{
  "owner": {
    "id": "shabaraba",
    "display_name": "Takahiko Kawakami",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/53943902?u=3ce944d454a2c2baa52a3f08aef502dd6617c7d6&v=4",
    "url": "https://github.com/shabaraba",
    "bio": "I'm not a robot.",
    "stats": {
      "total_repos": 1,
      "total_plugins": 3,
      "total_commands": 7,
      "total_skills": 9,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "shabaraba/shabaraba-cc-plugins",
      "url": "https://github.com/shabaraba/shabaraba-cc-plugins",
      "description": "Claude Code plugins monorepo - AI-driven development workflow tools",
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-08T01:18:12Z",
        "created_at": "2025-12-29T12:29:20Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 2131
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 202
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 2851
        },
        {
          "path": "package.json",
          "type": "blob",
          "size": 378
        },
        {
          "path": "packages",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-environments",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-environments/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-environments/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 693
        },
        {
          "path": "packages/claude-environments/README.md",
          "type": "blob",
          "size": 5187
        },
        {
          "path": "packages/claude-environments/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-environments/hooks/hooks.json",
          "type": "blob",
          "size": 723
        },
        {
          "path": "packages/claude-environments/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-environments/scripts/notify-complete.sh",
          "type": "blob",
          "size": 933
        },
        {
          "path": "packages/claude-environments/scripts/notify-permission.sh",
          "type": "blob",
          "size": 1005
        },
        {
          "path": "packages/claude-environments/scripts/notify-subagent-complete.sh",
          "type": "blob",
          "size": 921
        },
        {
          "path": "packages/claude-environments/scripts/notify-waiting.sh",
          "type": "blob",
          "size": 971
        },
        {
          "path": "packages/claude-org",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 913
        },
        {
          "path": "packages/claude-org/README.md",
          "type": "blob",
          "size": 7386
        },
        {
          "path": "packages/claude-org/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/agents/designer.md",
          "type": "blob",
          "size": 3386
        },
        {
          "path": "packages/claude-org/agents/engineer.md",
          "type": "blob",
          "size": 6559
        },
        {
          "path": "packages/claude-org/agents/marketing-content.md",
          "type": "blob",
          "size": 3818
        },
        {
          "path": "packages/claude-org/agents/product-spec.md",
          "type": "blob",
          "size": 3798
        },
        {
          "path": "packages/claude-org/agents/qa-design.md",
          "type": "blob",
          "size": 3881
        },
        {
          "path": "packages/claude-org/agents/qa.md",
          "type": "blob",
          "size": 4828
        },
        {
          "path": "packages/claude-org/agents/reviewer.md",
          "type": "blob",
          "size": 4334
        },
        {
          "path": "packages/claude-org/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/commands/cancel.md",
          "type": "blob",
          "size": 1938
        },
        {
          "path": "packages/claude-org/commands/content.md",
          "type": "blob",
          "size": 2787
        },
        {
          "path": "packages/claude-org/commands/dev.md",
          "type": "blob",
          "size": 6960
        },
        {
          "path": "packages/claude-org/commands/merge.md",
          "type": "blob",
          "size": 2121
        },
        {
          "path": "packages/claude-org/commands/qa.md",
          "type": "blob",
          "size": 2412
        },
        {
          "path": "packages/claude-org/commands/status.md",
          "type": "blob",
          "size": 2394
        },
        {
          "path": "packages/claude-org/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/hooks/workflow-continue.sh",
          "type": "blob",
          "size": 2475
        },
        {
          "path": "packages/claude-org/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/scripts/work-manager.sh",
          "type": "blob",
          "size": 10362
        },
        {
          "path": "packages/claude-org/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/skills/backend-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/skills/backend-dev/SKILL.md",
          "type": "blob",
          "size": 5561
        },
        {
          "path": "packages/claude-org/skills/frontend-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/skills/frontend-dev/SKILL.md",
          "type": "blob",
          "size": 4642
        },
        {
          "path": "packages/claude-org/skills/ios-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/skills/ios-dev/SKILL.md",
          "type": "blob",
          "size": 3880
        },
        {
          "path": "packages/claude-org/skills/orchestrator",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/skills/orchestrator/SKILL.md",
          "type": "blob",
          "size": 6658
        },
        {
          "path": "packages/claude-org/skills/secretary",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/claude-org/skills/secretary/SKILL.md",
          "type": "blob",
          "size": 5432
        },
        {
          "path": "packages/dev-org",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 416
        },
        {
          "path": "packages/dev-org/README.md",
          "type": "blob",
          "size": 5793
        },
        {
          "path": "packages/dev-org/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/agents/architecture-designer.md",
          "type": "blob",
          "size": 4053
        },
        {
          "path": "packages/dev-org/agents/code-analyzer-complexity.md",
          "type": "blob",
          "size": 2857
        },
        {
          "path": "packages/dev-org/agents/code-analyzer-duplication.md",
          "type": "blob",
          "size": 3159
        },
        {
          "path": "packages/dev-org/agents/code-analyzer-security.md",
          "type": "blob",
          "size": 3221
        },
        {
          "path": "packages/dev-org/agents/code-analyzer-smells.md",
          "type": "blob",
          "size": 3257
        },
        {
          "path": "packages/dev-org/agents/code-analyzer-solid.md",
          "type": "blob",
          "size": 3000
        },
        {
          "path": "packages/dev-org/agents/code-reviewer-maintainability.md",
          "type": "blob",
          "size": 4177
        },
        {
          "path": "packages/dev-org/agents/code-reviewer-performance.md",
          "type": "blob",
          "size": 3753
        },
        {
          "path": "packages/dev-org/agents/code-reviewer-security.md",
          "type": "blob",
          "size": 3462
        },
        {
          "path": "packages/dev-org/agents/code-reviewer-testability.md",
          "type": "blob",
          "size": 4710
        },
        {
          "path": "packages/dev-org/agents/implementation-agent.md",
          "type": "blob",
          "size": 6188
        },
        {
          "path": "packages/dev-org/agents/qa-agent.md",
          "type": "blob",
          "size": 4224
        },
        {
          "path": "packages/dev-org/agents/test-implementer.md",
          "type": "blob",
          "size": 5106
        },
        {
          "path": "packages/dev-org/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/commands/refactor.md",
          "type": "blob",
          "size": 20053
        },
        {
          "path": "packages/dev-org/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/skills/code-quality-metrics",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/skills/code-quality-metrics/SKILL.md",
          "type": "blob",
          "size": 5151
        },
        {
          "path": "packages/dev-org/skills/code-quality-metrics/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/skills/code-quality-metrics/references/measurement-tools.md",
          "type": "blob",
          "size": 6109
        },
        {
          "path": "packages/dev-org/skills/refactoring-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/skills/refactoring-patterns/SKILL.md",
          "type": "blob",
          "size": 5547
        },
        {
          "path": "packages/dev-org/skills/refactoring-patterns/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/skills/refactoring-patterns/references/fowler-catalog.md",
          "type": "blob",
          "size": 9125
        },
        {
          "path": "packages/dev-org/skills/self-directed-debugging",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/skills/self-directed-debugging/SKILL.md",
          "type": "blob",
          "size": 7337
        },
        {
          "path": "packages/dev-org/skills/self-directed-debugging/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/skills/self-directed-debugging/references/example-workflows.md",
          "type": "blob",
          "size": 8927
        },
        {
          "path": "packages/dev-org/skills/self-directed-debugging/references/question-templates.md",
          "type": "blob",
          "size": 9188
        },
        {
          "path": "packages/dev-org/skills/solid-principles",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/skills/solid-principles/SKILL.md",
          "type": "blob",
          "size": 5092
        },
        {
          "path": "packages/dev-org/skills/solid-principles/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/dev-org/skills/solid-principles/references/refactoring-examples.md",
          "type": "blob",
          "size": 9144
        },
        {
          "path": "packages/dev-org/skills/solid-principles/references/violation-patterns.md",
          "type": "blob",
          "size": 8302
        },
        {
          "path": "packages/parallel-worktree",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/parallel-worktree/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/parallel-worktree/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 327
        },
        {
          "path": "packages/parallel-worktree/README.md",
          "type": "blob",
          "size": 2610
        },
        {
          "path": "packages/parallel-worktree/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/parallel-worktree/commands/cleanup.md",
          "type": "blob",
          "size": 2212
        },
        {
          "path": "packages/parallel-worktree/commands/status.md",
          "type": "blob",
          "size": 1783
        },
        {
          "path": "packages/parallel-worktree/commands/work.md",
          "type": "blob",
          "size": 3170
        },
        {
          "path": "packages/parallel-worktree/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/parallel-worktree/scripts/worktree-manager.sh",
          "type": "blob",
          "size": 3171
        }
      ],
      "marketplace": {
        "name": "shabaraba-cc-plugins",
        "version": "1.0.0",
        "description": "AI-driven development workflow plugins for Claude Code",
        "owner_info": {
          "name": "shabaraba",
          "email": ""
        },
        "keywords": [],
        "plugins": [
          {
            "name": "claude-environments",
            "description": "Environment enhancements for vibe coding with Claude Code. Provides audio notifications on response completion and user input prompts.",
            "source": "./packages/claude-environments",
            "category": "productivity",
            "version": "0.1.0",
            "author": {
              "name": "shabaraba",
              "email": ""
            },
            "install_commands": [
              "/plugin marketplace add shabaraba/shabaraba-cc-plugins",
              "/plugin install claude-environments@shabaraba-cc-plugins"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2026-01-08T01:18:12Z",
              "created_at": "2025-12-29T12:29:20Z",
              "license": null
            },
            "commands": [],
            "skills": []
          },
          {
            "name": "claude-org",
            "description": "Star-topology AI organization with async sub-agents, worktree isolation, daily logs, and context handoff. 7 agents, 6 commands, 5 skills (including orchestrator) for automated 4-phase development workflow (designâ†’developâ†’reviewâ†’QA).",
            "source": "./packages/claude-org",
            "category": "development",
            "version": "0.4.0",
            "author": {
              "name": "shabaraba",
              "email": ""
            },
            "install_commands": [
              "/plugin marketplace add shabaraba/shabaraba-cc-plugins",
              "/plugin install claude-org@shabaraba-cc-plugins"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2026-01-08T01:18:12Z",
              "created_at": "2025-12-29T12:29:20Z",
              "license": null
            },
            "commands": [
              {
                "name": "/cancel",
                "description": "Cancel running task and cleanup worktree",
                "path": "packages/claude-org/commands/cancel.md",
                "frontmatter": {
                  "name": "cancel",
                  "description": "Cancel running task and cleanup worktree",
                  "argument-hint": "<branch-name>"
                },
                "content": "# Cancel Command\n\nCancel a running task and cleanup its worktree.\n\n## Input\n\n<branch>$ARGUMENTS</branch>\n\n## Execution\n\n### Step 1: Find Task\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh get-tasks | jq '.tasks[] | select(.branch == \"<branch>\")'\n```\n\n### Step 2: Confirm Cancellation\n\n```markdown\n## Cancel Task?\n\n| Item | Value |\n|------|-------|\n| Branch | <branch> |\n| Agent | <agent> |\n| Status | <status> |\n| Started | <time> |\n| Worktree | .worktrees/<branch-slug> |\n\n**Warning**: This will:\n- Discard all uncommitted changes\n- Remove the worktree\n- Delete the branch\n\nProceed?\n```\n\nUse AskUserQuestion if needed.\n\n### Step 3: Stop Background Agent\n\nIf agent is still running:\n- The background agent will naturally fail when worktree is removed\n- No explicit kill mechanism needed\n\n### Step 4: Cleanup\n\n```bash\n# Update state first\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh update-status \"$TASK_ID\" \"cancelled\"\n\n# Remove worktree (force)\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh remove-worktree \"<branch-slug>\"\n\n# Remove from task list\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh remove-task \"$TASK_ID\"\n\n# Log cancellation\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh append-daily \"<agent>\" \"âŒ Task cancelled by CEO: <branch>\"\n```\n\n### Step 5: Report\n\n```markdown\n## Task Cancelled\n\n| Item | Value |\n|------|-------|\n| Branch | <branch> |\n| Agent | <agent> |\n| Status | Cancelled |\n| Worktree | Removed |\n\nNo changes were merged.\n```\n\n## Error Handling\n\n### Task Not Found\n\n```markdown\n## Task Not Found\n\nNo active task for branch `<branch>`.\n\nActive tasks:\n<list from status>\n```\n\n### Already Complete\n\n```markdown\n## Task Already Complete\n\nTask for `<branch>` has already completed.\n\nUse `/claude-org:merge <branch>` to merge, or\nUse `/claude-org:status` to see details.\n```"
              },
              {
                "name": "/content",
                "description": "Create marketing content (ASO, SNS, blog)",
                "path": "packages/claude-org/commands/content.md",
                "frontmatter": {
                  "name": "content",
                  "description": "Create marketing content (ASO, SNS, blog)",
                  "argument-hint": "<content-type> <topic>"
                },
                "content": "# Content Command\n\nStart an async marketing content creation task.\n\n## Input\n\n<request>$ARGUMENTS</request>\n\n## Content Types\n\n| Type | Description | Output |\n|------|-------------|--------|\n| `aso` | App Store optimization | Description, keywords, screenshots |\n| `sns` | Social media posts | X, Threads posts |\n| `blog` | Blog article | Full article with SEO |\n| `release` | Release notes | What's New text |\n\n## Execution\n\n### Step 1: Parse Request\n\nExtract:\n- Content type: `aso`, `sns`, `blog`, or `release`\n- Topic or feature reference\n\nIf type not specified, ask CEO:\n```\nWhat type of content?\n1. ASO (App Store)\n2. SNS (X/Threads)\n3. Blog article\n4. Release notes\n```\n\n### Step 2: Initialize Work Environment\n\n```bash\n# Branch name\nBRANCH=\"content/<type>-<topic-slug>\"\n\n# Create worktree\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh init\nWORKTREE_PATH=$(bash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh create-worktree \"$BRANCH\")\n\n# Initialize context\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh init-context \"$BRANCH\"\n\n# Generate task ID\nTASK_ID=\"task-$(date +%s)-$RANDOM\"\n```\n\n### Step 3: Launch Marketing Content Agent\n\n```\nTask:\n  description: \"Content: <type> for <topic>\"\n  subagent_type: marketing-content\n  run_in_background: true\n  prompt: |\n    # Marketing Content Task\n\n    ## Environment\n    - Task ID: $TASK_ID\n    - Branch: $BRANCH\n    - Worktree: $WORKTREE_PATH\n\n    ## Request\n    - Type: <content-type>\n    - Topic: <topic>\n\n    ## Context\n    <related PRD or feature description if available>\n\n    ## Instructions\n    1. cd to worktree\n    2. Research competitors if needed (WebSearch)\n    3. Update daily log\n    4. Create content following brand guidelines\n    5. Optimize for platform requirements\n    6. Commit content\n    7. Create handoff file\n    8. Return completion JSON\n\n    ## Output Location\n    docs/marketing/<type>-<topic>.md\n```\n\n### Step 4: Record and Report\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh add-task \\\n  \"$TASK_ID\" \"$AGENT_ID\" \"marketing-content\" \"$BRANCH\" \"<type> content for <topic>\"\n```\n\n```markdown\n## Content Task Started\n\n| Item | Value |\n|------|-------|\n| Task ID | $TASK_ID |\n| Branch | $BRANCH |\n| Agent | marketing-content |\n| Type | <content-type> |\n| Topic | <topic> |\n| Status | Running |\n\nThe marketing agent is creating content.\n\nUse `/claude-org:status` to check progress.\n```\n\n## Examples\n\n```bash\n# ASO update\n/claude-org:content aso \"v2.0 ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ\"\n\n# SNS announcement\n/claude-org:content sns \"Live Activities ãƒªãƒªãƒ¼ã‚¹\"\n\n# Blog article\n/claude-org:content blog \"ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆæ´»ç”¨è¡“\"\n\n# Release notes\n/claude-org:content release \"v2.1.0\"\n```"
              },
              {
                "name": "/dev",
                "description": "Start full development workflow (design â†’ develop â†’ review â†’ QA) with async sub-agents. Returns immediately - phases auto-continue via hook.",
                "path": "packages/claude-org/commands/dev.md",
                "frontmatter": {
                  "name": "dev",
                  "description": "Start full development workflow (design â†’ develop â†’ review â†’ QA) with async sub-agents. Returns immediately - phases auto-continue via hook.",
                  "argument-hint": "<feature description>"
                },
                "content": "# Dev Command (Async Workflow)\n\nStart a complete development workflow. **Returns immediately** - you can continue working while phases execute in background. Phases auto-continue when you interact with Claude.\n\n## Input\n\n<task_description>$ARGUMENTS</task_description>\n\n## Workflow Overview\n\n```\n/dev \"Live Activities å®Ÿè£…\"\n        â”‚\n        â–¼ (immediate return)\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Phase 1: Design (background)         â”‚\nâ”‚ â†’ You can work on other things       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n        â”‚ (auto-continue on next interaction)\n        â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Phase 2: Development (background)    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n        â”‚\n        â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Phase 3: Review (background)         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n        â”‚\n        â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Phase 4: QA (background)             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n        â”‚\n        â–¼\n    Complete â†’ Auto-report\n```\n\n## Execution Steps\n\n### Step 1: Parse & Initialize\n\n1. Extract branch base: `feature/<slug>` (kebab-case, max 30 chars)\n2. Determine platform:\n   - iOS/Swift/SwiftUI/Widget/LiveActivity â†’ `ios`\n   - React/Next.js/Tailwind/LP/Landing â†’ `frontend`\n   - API/Workers/D1/Hono/Backend â†’ `backend`\n3. Generate Task ID:\n   ```bash\n   TASK_ID=\"task-$(date +%s)-$RANDOM\"\n   ```\n\n### Step 2: Initialize Workflow\n\n```bash\n# Initialize workspace\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh init\n\n# Create worktree\nWORKTREE_PATH=$(bash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh create-worktree \"feature/<slug>\" \"$TASK_ID\")\nBRANCH_NAME=\"feature/<slug>-${TASK_ID}\"\n\n# Initialize workflow state\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh init-workflow \"$TASK_ID\" \"$BRANCH_NAME\" \"<platform>\" \"$WORKTREE_PATH\" \"<task_description>\"\n\n# Initialize context\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh init-context \"$BRANCH_NAME\"\n```\n\n### Step 3: Start Phase 1 (Design) in Background\n\n```\nTask:\n  description: \"Design: $BRANCH_NAME\"\n  subagent_type: claude-org:designer\n  run_in_background: true\n  prompt: |\n    # Design Task\n    - Task ID: $TASK_ID\n    - Branch: $BRANCH_NAME\n    - Worktree: $WORKTREE_PATH\n    - Platform: <platform>\n\n    ## Requirements\n    <task_description>\n\n    ## Instructions\n    1. cd $WORKTREE_PATH\n    2. Read platform skill: skills/<platform>-dev/SKILL.md\n    3. Create design document at .claude-work/design/$BRANCH_NAME.md\n    4. Log progress: bash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh append-daily \"$TASK_ID\" \"designer\" \"<log entry>\"\n    5. Return completion JSON with agent_id for tracking\n```\n\n**After launching**: Update workflow state with agent task ID:\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh start-phase \"1\" \"<agent_task_id>\"\n```\n\n### Step 4: Return to User Immediately\n\n**DO NOT WAIT FOR COMPLETION.** Return control to user with status:\n\n```markdown\n## ğŸš€ Workflow Started: $BRANCH_NAME\n\n**Task ID**: $TASK_ID\n**Platform**: <platform>\n\n| Phase | Status |\n|-------|--------|\n| 1. Design | ğŸ”„ Running |\n| 2. Develop | â³ Pending |\n| 3. Review | â³ Pending |\n| 4. QA | â³ Pending |\n\n**Phase 1 (Designer)** is running in background.\nYou can continue working - phases will auto-continue when you interact with me.\n\nCheck status anytime: `/claude-org:status`\n```\n\n## Auto-Continue Protocol\n\nThe `workflow-continue.sh` hook automatically runs on each user interaction:\n\n1. **Detects active workflow** from `.claude-work/workflow.json`\n2. **Checks current phase status** using `TaskOutput` (non-blocking)\n3. **If phase complete**: Starts next phase automatically\n4. **Reports progress** to user\n\n### Phase Transition Logic\n\nWhen current phase completes:\n\n```bash\n# Mark phase complete\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh complete-phase \"$CURRENT_PHASE\"\n\n# If not final phase, start next\nif [ $CURRENT_PHASE -lt 4 ]; then\n  # Launch next phase agent (see orchestrator skill for prompts)\n  # Update workflow state\n  bash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh start-phase \"$NEXT_PHASE\" \"<new_agent_task_id>\"\nfi\n\n# If final phase (4) complete\nif [ $CURRENT_PHASE -eq 4 ]; then\n  bash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh complete-workflow\n  # Generate final report\nfi\n```\n\n## Phase Agent Prompts\n\nReference `skills/orchestrator/SKILL.md` for full prompts. Summary:\n\n| Phase | Agent | Input | Output |\n|-------|-------|-------|--------|\n| 1 | designer | Task description | `.claude-work/design/<branch>.md` |\n| 2 | engineer | Design doc | Implementation + commits |\n| 3 | reviewer | Code diff | `.claude-work/review/<branch>.md` |\n| 4 | qa | Design + Review | `.claude-work/qa/<branch>.md` |\n\n## Error Handling\n\nIf a phase returns `status: \"blocked\"`:\n\n1. Update workflow state with blocker info\n2. On next interaction, ask user:\n   ```\n   AskUserQuestion:\n     question: \"Phase <N> ã§å•é¡ŒãŒç™ºç”Ÿ: <blocker>\\nç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ\"\n     options:\n       - label: \"å†è©¦è¡Œ\"\n       - label: \"ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ç¶šè¡Œ\"\n       - label: \"ä¸­æ–­\"\n   ```\n\n## Hook Setup (Required)\n\nFor auto-continue to work, add to `.claude/settings.json`:\n\n```json\n{\n  \"hooks\": {\n    \"UserPromptSubmit\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/workflow-continue.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n## Examples\n\n```bash\n# Start iOS feature (returns immediately)\n/claude-org:dev \"Live Activities ã§ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤º\"\n# â†’ Phase 1 starts, you can work on other things\n\n# Check status anytime\n/claude-org:status\n\n# Phases auto-continue on each interaction\n# Eventually all 4 phases complete automatically\n```\n\n## User Interaction\n\nUser only needs to:\n1. Run this command (phases start automatically)\n2. Continue working normally (phases progress on each interaction)\n3. Answer questions if phases encounter blockers\n4. Run `/claude-org:merge` when complete\n\n**No manual phase transitions required.**"
              },
              {
                "name": "/merge",
                "description": "Merge completed feature branch and cleanup worktree",
                "path": "packages/claude-org/commands/merge.md",
                "frontmatter": {
                  "name": "merge",
                  "description": "Merge completed feature branch and cleanup worktree",
                  "argument-hint": "<branch-name>"
                },
                "content": "# Merge Command\n\nMerge a completed feature branch into main and cleanup the worktree.\n\n## Input\n\n<branch>$ARGUMENTS</branch>\n\n## Execution\n\n### Step 1: Validate Branch\n\n```bash\n# Check if branch exists\ngit branch --list \"<branch>\"\n\n# Check if worktree exists\nls .worktrees/<branch-slug>/\n```\n\n### Step 2: Verify Completion\n\n1. Check task state for this branch\n2. Confirm status is \"complete\" or \"review\"\n3. If still \"running\", warn CEO and ask for confirmation\n\n### Step 3: Review Changes\n\n```bash\n# Show what will be merged\ngit log main..<branch> --oneline\ngit diff main..<branch> --stat\n```\n\nPresent summary to CEO:\n```markdown\n## Merge Preview: <branch>\n\n### Commits to merge\n<commit list>\n\n### Files changed\n<file stats>\n\n### Handoff Summary\n<from .claude-work/handoff/<branch>.md>\n\nProceed with merge?\n```\n\n### Step 4: Execute Merge\n\n```bash\n# Ensure on main\ngit checkout main\ngit pull origin main\n\n# Merge\ngit merge <branch> --no-ff -m \"Merge branch '<branch>'\"\n\n# Verify\ngit log -1 --oneline\n```\n\n### Step 5: Cleanup\n\n```bash\n# Remove worktree\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh remove-worktree \"<branch-slug>\"\n\n# Update task state\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh update-status \"$TASK_ID\" \"complete\"\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh remove-task \"$TASK_ID\"\n```\n\n### Step 6: Report\n\n```markdown\n## Merge Complete\n\n| Item | Value |\n|------|-------|\n| Branch | <branch> |\n| Merged to | main |\n| Merge commit | <hash> |\n| Worktree | Removed |\n\n### Summary\n<from handoff>\n\n### Files Changed\n<list>\n\n### Next Steps\n- Push to remote: `git push origin main`\n- Or continue with more tasks\n```\n\n## Error Handling\n\n### Merge Conflict\n\n```markdown\n## Merge Conflict Detected\n\nConflicting files:\n<list>\n\nOptions:\n1. Resolve manually in worktree\n2. Cancel merge and investigate\n3. Force merge (not recommended)\n```\n\n### Branch Not Found\n\n```markdown\n## Branch Not Found\n\nBranch `<branch>` does not exist.\n\nAvailable branches for merge:\n<list from status>\n```"
              },
              {
                "name": "/qa",
                "description": "Start QA design task for a feature",
                "path": "packages/claude-org/commands/qa.md",
                "frontmatter": {
                  "name": "qa",
                  "description": "Start QA design task for a feature",
                  "argument-hint": "<feature-name or PRD-path>"
                },
                "content": "# QA Command\n\nStart an async QA design task to create test cases for a feature.\n\n## Input\n\n<feature>$ARGUMENTS</feature>\n\n## Execution\n\n### Step 1: Resolve Feature Reference\n\nIf input is a file path (e.g., `docs/prd/xxx.md`):\n- Read the PRD file\n- Extract feature name and requirements\n\nIf input is a feature name:\n- Search for related PRD in `docs/prd/`\n- Search for related implementation in context files\n\n### Step 2: Initialize Work Environment\n\n```bash\n# Branch name\nBRANCH=\"qa/<feature-slug>\"\n\n# Create worktree\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh init\nWORKTREE_PATH=$(bash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh create-worktree \"$BRANCH\")\n\n# Initialize context\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh init-context \"$BRANCH\"\n\n# Generate task ID\nTASK_ID=\"task-$(date +%s)-$RANDOM\"\n```\n\n### Step 3: Launch QA Design Agent\n\n```\nTask:\n  description: \"QA: <feature>\"\n  subagent_type: qa-design\n  run_in_background: true\n  prompt: |\n    # QA Design Task\n\n    ## Environment\n    - Task ID: $TASK_ID\n    - Branch: $BRANCH\n    - Worktree: $WORKTREE_PATH\n\n    ## Feature\n    <feature description or PRD content>\n\n    ## Related Context\n    <links to implementation context files if any>\n\n    ## Instructions\n    1. cd to worktree\n    2. Read PRD and implementation context\n    3. Update daily log\n    4. Design comprehensive test cases:\n       - Normal cases\n       - Error cases\n       - Boundary values\n       - Regression targets\n    5. Commit test case documentation\n    6. Create handoff file\n    7. Return completion JSON\n\n    ## Output Location\n    docs/test-cases/<feature>.md\n```\n\n### Step 4: Record and Report\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh add-task \\\n  \"$TASK_ID\" \"$AGENT_ID\" \"qa-design\" \"$BRANCH\" \"QA design for <feature>\"\n```\n\n```markdown\n## QA Task Started\n\n| Item | Value |\n|------|-------|\n| Task ID | $TASK_ID |\n| Branch | $BRANCH |\n| Agent | qa-design |\n| Feature | <feature> |\n| Status | Running |\n\nThe QA design agent is analyzing the feature and creating test cases.\n\nUse `/claude-org:status` to check progress.\n```\n\n## Examples\n\n```bash\n# From PRD\n/claude-org:qa docs/prd/live-activities.md\n\n# From feature name\n/claude-org:qa \"Live Activities\"\n\n# From branch (inherits context)\n/claude-org:qa feature/live-activities\n```"
              },
              {
                "name": "/status",
                "description": "Show all active async tasks and their progress",
                "path": "packages/claude-org/commands/status.md",
                "frontmatter": {
                  "name": "status",
                  "description": "Show all active async tasks and their progress"
                },
                "content": "# Status Command\n\nDisplay status of all active async tasks with daily log excerpts.\n\n## Execution\n\n### Step 1: Load Task State\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh get-tasks\n```\n\n### Step 2: Check Each Running Task\n\nFor each task with `status: \"running\"`:\n\n1. Use `TaskOutput` with `block: false` to check agent status\n2. Parse result:\n   - `status: running` â†’ Still working\n   - `status: completed` â†’ Finished\n3. Update state if completed:\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh update-status \"$TASK_ID\" \"complete\"\n   ```\n\n### Step 3: Gather Daily Log Excerpts\n\nFor each active agent, read recent entries from:\n```\n.claude-work/daily/$(date +%Y-%m-%d)/<agent>.md\n```\n\nExtract:\n- Last 3 entries\n- Any ğŸš§ (blocked) or â“ (question) items\n\n### Step 4: Report\n\n```markdown\n## Active Tasks\n\n| Branch | Agent | Status | Elapsed | Daily Log |\n|--------|-------|--------|---------|-----------|\n| feature/live-activities | eng-ios | ğŸ”„ Running | 12m | [ğŸ“](.claude-work/daily/2025-01-01/eng-ios.md) |\n| feature/lp-renewal | eng-web | âœ… Complete | 25m | [ğŸ“](.claude-work/daily/2025-01-01/eng-web.md) |\n| feature/widget-prd | product-spec | ğŸš§ Blocked | 8m | [ğŸ“](.claude-work/daily/2025-01-01/product-spec.md) |\n\n## Blockers & Questions\n\n### eng-ios\n- ğŸš§ Push Token ã®å–å¾—æ–¹æ³•ãŒä¸æ˜\n\n### product-spec\n- â“ Widget ã®ãƒ‡ãƒ¼ã‚¿æ›´æ–°é »åº¦ã®è¦ä»¶\n\n## Recent Progress\n\n### eng-ios (14:30)\n- ActivityKit ã®åŸºæœ¬å®Ÿè£…å®Œäº†\n- Info.plist è¨­å®šè¿½åŠ \n\n### eng-web (14:15)\n- Hero ã‚»ã‚¯ã‚·ãƒ§ãƒ³å®Œäº†\n- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œæ¸ˆã¿\n\n## Completed Tasks (Ready for Review)\n\n| Branch | Agent | Commits | Handoff |\n|--------|-------|---------|---------|\n| feature/lp-renewal | eng-web | abc1234 | [ğŸ“„](.claude-work/handoff/feature-lp-renewal.md) |\n\n## Worktrees\n\n```\n.worktrees/\nâ”œâ”€â”€ feature-live-activities/  (eng-ios, running)\nâ”œâ”€â”€ feature-lp-renewal/       (eng-web, complete)\nâ””â”€â”€ feature-widget-prd/       (product-spec, blocked)\n```\n\n## Actions\n\n- `/claude-org:merge feature/lp-renewal` - Merge completed branch\n- `/claude-org:cancel feature/widget-prd` - Cancel blocked task\n```\n\n## Automatic Actions\n\nIf a task completed:\n1. Update state to \"review\"\n2. Notify CEO with summary and handoff link\n3. Suggest merge command"
              }
            ],
            "skills": [
              {
                "name": "backend-dev",
                "description": "Backend development skill for Cloudflare Workers, D1 database, and REST API. Use when implementing API features.",
                "path": "packages/claude-org/skills/backend-dev/SKILL.md",
                "frontmatter": {
                  "name": "backend-dev",
                  "description": "Backend development skill for Cloudflare Workers, D1 database, and REST API. Use when implementing API features."
                },
                "content": "# Backend Development Skill\n\nPlatform-specific knowledge for backend/API development.\n\n## Tech Stack\n\n| Component | Technology |\n|-----------|------------|\n| Runtime | Cloudflare Workers |\n| Framework | Hono |\n| Database | D1 (SQLite) |\n| ORM | Drizzle ORM |\n| Validation | Zod |\n| Auth | JWT / Cloudflare Access |\n\n## Coding Standards\n\n### Naming\n- Functions/Variables: `camelCase`\n- Types/Interfaces: `PascalCase`\n- Constants: `SCREAMING_SNAKE_CASE`\n- Database tables: `snake_case`\n- API endpoints: `kebab-case`\n- Language: English\n\n### File Organization\n```\nsrc/\nâ”œâ”€â”€ index.ts           # Entry point, Hono app\nâ”œâ”€â”€ routes/\nâ”‚   â”œâ”€â”€ users.ts       # /api/users routes\nâ”‚   â””â”€â”€ posts.ts       # /api/posts routes\nâ”œâ”€â”€ services/\nâ”‚   â”œâ”€â”€ user-service.ts\nâ”‚   â””â”€â”€ post-service.ts\nâ”œâ”€â”€ db/\nâ”‚   â”œâ”€â”€ schema.ts      # Drizzle schema\nâ”‚   â””â”€â”€ migrations/\nâ”œâ”€â”€ middleware/\nâ”‚   â”œâ”€â”€ auth.ts\nâ”‚   â””â”€â”€ cors.ts\nâ””â”€â”€ types/\n    â””â”€â”€ index.ts\n```\n\n### Hono Patterns\n```typescript\nimport { Hono } from 'hono'\nimport { zValidator } from '@hono/zod-validator'\nimport { z } from 'zod'\n\nconst app = new Hono<{ Bindings: Env }>()\n\n// Route with validation\nconst createUserSchema = z.object({\n  name: z.string().min(1),\n  email: z.string().email(),\n})\n\napp.post('/users', zValidator('json', createUserSchema), async (c) => {\n  const data = c.req.valid('json')\n  const db = c.env.DB\n\n  const result = await db\n    .prepare('INSERT INTO users (name, email) VALUES (?, ?)')\n    .bind(data.name, data.email)\n    .run()\n\n  return c.json({ id: result.lastRowId }, 201)\n})\n\nexport default app\n```\n\n## Build Commands\n\n```bash\n# Development\npnpm dev  # or wrangler dev\n\n# Deploy\npnpm deploy  # or wrangler deploy\n\n# Database migration\npnpm db:generate  # Generate migration\npnpm db:migrate   # Apply migration (local)\npnpm db:migrate:prod  # Apply to production\n\n# Type generation\npnpm cf-typegen\n```\n\n## D1 Database\n\n### Schema with Drizzle\n```typescript\n// src/db/schema.ts\nimport { sqliteTable, text, integer } from 'drizzle-orm/sqlite-core'\n\nexport const users = sqliteTable('users', {\n  id: integer('id').primaryKey({ autoIncrement: true }),\n  name: text('name').notNull(),\n  email: text('email').notNull().unique(),\n  createdAt: text('created_at').default(sql`CURRENT_TIMESTAMP`),\n})\n\nexport const posts = sqliteTable('posts', {\n  id: integer('id').primaryKey({ autoIncrement: true }),\n  userId: integer('user_id').references(() => users.id),\n  title: text('title').notNull(),\n  content: text('content'),\n})\n```\n\n### Query Patterns\n```typescript\nimport { drizzle } from 'drizzle-orm/d1'\nimport { eq } from 'drizzle-orm'\nimport * as schema from './db/schema'\n\n// In route handler\nconst db = drizzle(c.env.DB, { schema })\n\n// Select\nconst users = await db.select().from(schema.users).all()\n\n// Select with where\nconst user = await db.select()\n  .from(schema.users)\n  .where(eq(schema.users.id, id))\n  .get()\n\n// Insert\nconst result = await db.insert(schema.users)\n  .values({ name, email })\n  .returning()\n\n// Update\nawait db.update(schema.users)\n  .set({ name: newName })\n  .where(eq(schema.users.id, id))\n\n// Delete\nawait db.delete(schema.users)\n  .where(eq(schema.users.id, id))\n```\n\n## API Design\n\n### REST Conventions\n```\nGET    /api/users          # List users\nPOST   /api/users          # Create user\nGET    /api/users/:id      # Get user\nPUT    /api/users/:id      # Update user\nDELETE /api/users/:id      # Delete user\nGET    /api/users/:id/posts # List user's posts\n```\n\n### Response Format\n```typescript\n// Success\n{\n  \"data\": { ... },\n  \"meta\": {\n    \"total\": 100,\n    \"page\": 1,\n    \"limit\": 20\n  }\n}\n\n// Error\n{\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Invalid email format\",\n    \"details\": [...]\n  }\n}\n```\n\n### Error Handling\n```typescript\nimport { HTTPException } from 'hono/http-exception'\n\n// Throw error\nif (!user) {\n  throw new HTTPException(404, { message: 'User not found' })\n}\n\n// Global error handler\napp.onError((err, c) => {\n  if (err instanceof HTTPException) {\n    return c.json({ error: { message: err.message } }, err.status)\n  }\n  console.error(err)\n  return c.json({ error: { message: 'Internal Server Error' } }, 500)\n})\n```\n\n## Authentication\n\n### JWT Pattern\n```typescript\nimport { jwt } from 'hono/jwt'\n\n// Middleware\napp.use('/api/*', jwt({ secret: c.env.JWT_SECRET }))\n\n// Access payload\napp.get('/api/me', (c) => {\n  const payload = c.get('jwtPayload')\n  return c.json({ userId: payload.sub })\n})\n\n// Generate token\nimport { sign } from 'hono/jwt'\n\nconst token = await sign(\n  { sub: user.id, exp: Math.floor(Date.now() / 1000) + 60 * 60 },\n  env.JWT_SECRET\n)\n```\n\n## Testing\n\n```typescript\nimport { describe, it, expect } from 'vitest'\nimport app from './index'\n\ndescribe('Users API', () => {\n  it('GET /api/users returns users', async () => {\n    const res = await app.request('/api/users')\n    expect(res.status).toBe(200)\n    const data = await res.json()\n    expect(Array.isArray(data.data)).toBe(true)\n  })\n})\n```\n\n## Common Issues\n\n### \"D1_ERROR: no such table\"\n- Run migrations: `wrangler d1 migrations apply DB`\n- Check wrangler.toml database binding\n\n### CORS errors\n- Add CORS middleware:\n  ```typescript\n  import { cors } from 'hono/cors'\n  app.use('*', cors())\n  ```\n\n### Environment variables\n- Local: `.dev.vars` file\n- Production: `wrangler secret put SECRET_NAME`"
              },
              {
                "name": "frontend-dev",
                "description": "Frontend development skill for React, Next.js, Tailwind CSS, and TypeScript. Use when implementing web frontend features.",
                "path": "packages/claude-org/skills/frontend-dev/SKILL.md",
                "frontmatter": {
                  "name": "frontend-dev",
                  "description": "Frontend development skill for React, Next.js, Tailwind CSS, and TypeScript. Use when implementing web frontend features."
                },
                "content": "# Frontend Development Skill\n\nPlatform-specific knowledge for web frontend development.\n\n## Tech Stack\n\n| Component | Technology |\n|-----------|------------|\n| Framework | Next.js 14+ (App Router) |\n| Language | TypeScript (strict mode) |\n| Styling | Tailwind CSS |\n| State | React hooks, Zustand (if needed) |\n| Testing | Vitest, Playwright |\n| Deployment | Cloudflare Pages |\n\n## Coding Standards\n\n### Naming\n- Components: `PascalCase`\n- Files: `kebab-case.tsx` or `PascalCase.tsx` (follow project)\n- Functions/Variables: `camelCase`\n- Constants: `SCREAMING_SNAKE_CASE`\n- Language: English\n\n### File Organization\n```typescript\n// 1. External imports\nimport { useState } from 'react'\nimport { clsx } from 'clsx'\n\n// 2. Internal imports\nimport { Button } from '@/components/ui/button'\nimport { useUser } from '@/hooks/use-user'\n\n// 3. Types\ninterface Props {\n  title: string\n  onSubmit: () => void\n}\n\n// 4. Component\nexport function FeatureCard({ title, onSubmit }: Props) {\n  const [isOpen, setIsOpen] = useState(false)\n\n  return (\n    // ...\n  )\n}\n```\n\n### Component Patterns\n```typescript\n// Prefer composition over props drilling\nexport function Card({ children }: { children: React.ReactNode }) {\n  return <div className=\"rounded-lg border p-4\">{children}</div>\n}\n\nCard.Header = function CardHeader({ children }: { children: React.ReactNode }) {\n  return <div className=\"font-bold\">{children}</div>\n}\n\nCard.Body = function CardBody({ children }: { children: React.ReactNode }) {\n  return <div className=\"mt-2\">{children}</div>\n}\n```\n\n### Tailwind Patterns\n```typescript\n// Use clsx for conditional classes\nimport { clsx } from 'clsx'\n\n<button\n  className={clsx(\n    'rounded px-4 py-2',\n    isActive ? 'bg-blue-500 text-white' : 'bg-gray-200'\n  )}\n/>\n\n// Extract common patterns\nconst buttonVariants = {\n  primary: 'bg-blue-500 text-white hover:bg-blue-600',\n  secondary: 'bg-gray-200 text-gray-800 hover:bg-gray-300',\n}\n```\n\n## Build Commands\n\n```bash\n# Install dependencies\npnpm install  # or npm install\n\n# Development\npnpm dev\n\n# Type check\npnpm typecheck  # or tsc --noEmit\n\n# Lint\npnpm lint\n\n# Build\npnpm build\n\n# Test\npnpm test\n```\n\n## Next.js App Router\n\n### Route Structure\n```\napp/\nâ”œâ”€â”€ layout.tsx        # Root layout\nâ”œâ”€â”€ page.tsx          # Home page\nâ”œâ”€â”€ (marketing)/      # Route group (no URL segment)\nâ”‚   â”œâ”€â”€ about/\nâ”‚   â”‚   â””â”€â”€ page.tsx\nâ”‚   â””â”€â”€ pricing/\nâ”‚       â””â”€â”€ page.tsx\nâ”œâ”€â”€ dashboard/\nâ”‚   â”œâ”€â”€ layout.tsx    # Dashboard layout\nâ”‚   â””â”€â”€ page.tsx\nâ””â”€â”€ api/\n    â””â”€â”€ route.ts      # API route\n```\n\n### Server vs Client Components\n```typescript\n// Server Component (default) - no 'use client'\nasync function ServerComponent() {\n  const data = await fetch('...')  // Can fetch directly\n  return <div>{data}</div>\n}\n\n// Client Component - needs interactivity\n'use client'\n\nimport { useState } from 'react'\n\nfunction ClientComponent() {\n  const [count, setCount] = useState(0)\n  return <button onClick={() => setCount(c => c + 1)}>{count}</button>\n}\n```\n\n### Data Fetching\n```typescript\n// Server Component\nasync function Page() {\n  const data = await fetch('https://api.example.com/data', {\n    next: { revalidate: 60 }  // ISR: revalidate every 60s\n  })\n  return <div>{data}</div>\n}\n\n// Client Component with SWR\n'use client'\nimport useSWR from 'swr'\n\nfunction ClientPage() {\n  const { data, error } = useSWR('/api/data', fetcher)\n  if (error) return <div>Error</div>\n  if (!data) return <div>Loading...</div>\n  return <div>{data}</div>\n}\n```\n\n## Testing\n\n### Vitest Unit Test\n```typescript\nimport { describe, it, expect } from 'vitest'\nimport { render, screen } from '@testing-library/react'\nimport { Button } from './button'\n\ndescribe('Button', () => {\n  it('renders children', () => {\n    render(<Button>Click me</Button>)\n    expect(screen.getByText('Click me')).toBeInTheDocument()\n  })\n})\n```\n\n### Playwright E2E\n```typescript\nimport { test, expect } from '@playwright/test'\n\ntest('home page', async ({ page }) => {\n  await page.goto('/')\n  await expect(page.getByRole('heading', { name: 'Welcome' })).toBeVisible()\n})\n```\n\n## Common Issues\n\n### Hydration Mismatch\n- Use `suppressHydrationWarning` for dynamic content\n- Check for client-only code in Server Components\n\n### \"Module not found\"\n- Check tsconfig paths\n- Verify import aliases in next.config.js\n\n### Tailwind not applying\n- Check `content` paths in tailwind.config.js\n- Restart dev server after config changes"
              },
              {
                "name": "ios-dev",
                "description": "iOS development skill for Swift, SwiftUI, Live Activities, WidgetKit, and XCTest. Use when implementing iOS features.",
                "path": "packages/claude-org/skills/ios-dev/SKILL.md",
                "frontmatter": {
                  "name": "ios-dev",
                  "description": "iOS development skill for Swift, SwiftUI, Live Activities, WidgetKit, and XCTest. Use when implementing iOS features."
                },
                "content": "# iOS Development Skill\n\nPlatform-specific knowledge for iOS development.\n\n## Tech Stack\n\n| Component | Technology |\n|-----------|------------|\n| Language | Swift 5.9+ |\n| UI Framework | SwiftUI |\n| Architecture | MVVM or TCA (follow project) |\n| Testing | XCTest, XCUITest |\n| Live Activities | ActivityKit |\n| Widgets | WidgetKit |\n\n## Coding Standards\n\n### Naming\n- Variables/Functions: `lowerCamelCase`\n- Types/Protocols: `UpperCamelCase`\n- Constants: `lowerCamelCase` (not SCREAMING_CASE)\n- Language: English\n\n### File Organization\n```swift\n// 1. Imports\nimport SwiftUI\nimport ActivityKit\n\n// 2. Types (protocol, struct, class, enum)\nstruct ContentView: View {\n    // 3. Properties (static, @State, let, var)\n    // 4. Initializer\n    // 5. Body / Methods\n}\n\n// 6. Extensions\nextension ContentView {\n    // ...\n}\n\n// 7. Previews\n#Preview {\n    ContentView()\n}\n```\n\n### SwiftUI Patterns\n```swift\n// Prefer small, composable views\nstruct FeatureView: View {\n    @StateObject private var viewModel = FeatureViewModel()\n\n    var body: some View {\n        VStack {\n            HeaderSection(title: viewModel.title)\n            ContentSection(items: viewModel.items)\n        }\n        .task {\n            await viewModel.load()\n        }\n    }\n}\n```\n\n### Comments\n- Japanese OK for complex logic\n- Avoid obvious comments\n- Use `// MARK: -` for sections\n\n## Build Commands\n\n```bash\n# Build\nxcodebuild -scheme <Scheme> -destination 'generic/platform=iOS' build\n\n# Test\nxcodebuild test \\\n  -scheme <Scheme> \\\n  -destination 'platform=iOS Simulator,name=iPhone 15'\n\n# Clean\nxcodebuild clean -scheme <Scheme>\n```\n\n## Live Activities\n\n### Setup Checklist\n- [ ] Add `NSSupportsLiveActivities` to Info.plist\n- [ ] Create ActivityAttributes struct\n- [ ] Create ActivityContent struct\n- [ ] Implement start/update/end logic\n\n### Basic Pattern\n```swift\nstruct MyActivityAttributes: ActivityAttributes {\n    public struct ContentState: Codable, Hashable {\n        var value: String\n    }\n    var name: String\n}\n\n// Start\nlet attributes = MyActivityAttributes(name: \"Example\")\nlet state = MyActivityAttributes.ContentState(value: \"Initial\")\nlet activity = try Activity.request(\n    attributes: attributes,\n    content: .init(state: state, staleDate: nil)\n)\n\n// Update\nawait activity.update(\n    ActivityContent(state: newState, staleDate: nil)\n)\n\n// End\nawait activity.end(nil, dismissalPolicy: .immediate)\n```\n\n## WidgetKit\n\n### Setup Checklist\n- [ ] Add Widget Extension target\n- [ ] Configure App Groups for data sharing\n- [ ] Implement TimelineProvider\n- [ ] Create Widget views\n\n### Data Sharing\n```swift\n// Write (main app)\nlet defaults = UserDefaults(suiteName: \"group.com.example.app\")\ndefaults?.set(value, forKey: \"sharedKey\")\nWidgetCenter.shared.reloadAllTimelines()\n\n// Read (widget)\nlet defaults = UserDefaults(suiteName: \"group.com.example.app\")\nlet value = defaults?.string(forKey: \"sharedKey\")\n```\n\n## Testing\n\n### Unit Test Pattern\n```swift\nfinal class FeatureTests: XCTestCase {\n    var sut: FeatureViewModel!\n\n    override func setUp() {\n        super.setUp()\n        sut = FeatureViewModel()\n    }\n\n    override func tearDown() {\n        sut = nil\n        super.tearDown()\n    }\n\n    func test_initialState_isEmpty() {\n        XCTAssertTrue(sut.items.isEmpty)\n    }\n\n    func test_load_populatesItems() async {\n        await sut.load()\n        XCTAssertFalse(sut.items.isEmpty)\n    }\n}\n```\n\n## Common Issues\n\n### \"Signing requires a development team\"\n- Open Xcode, select target, set Team in Signing & Capabilities\n\n### \"No such module\"\n- Clean build folder: `xcodebuild clean`\n- Check Swift Package dependencies\n\n### Widget not updating\n- Call `WidgetCenter.shared.reloadAllTimelines()`\n- Check App Groups configuration"
              },
              {
                "name": "orchestrator",
                "description": "Orchestrates the async development workflow (design â†’ develop â†’ review â†’ QA). Handles phase transitions when triggered by workflow-continue hook.",
                "path": "packages/claude-org/skills/orchestrator/SKILL.md",
                "frontmatter": {
                  "name": "orchestrator",
                  "description": "Orchestrates the async development workflow (design â†’ develop â†’ review â†’ QA). Handles phase transitions when triggered by workflow-continue hook."
                },
                "content": "# Orchestrator Skill (Async Workflow)\n\nYou are the Secretary (Claude Code main process) orchestrating an **async** development workflow.\n\n## Key Principle: Non-Blocking Execution\n\n**NEVER block on phase completion.** Each phase runs in background. Phase transitions happen on user interactions via the workflow-continue hook.\n\n## Workflow State\n\nState is stored in `.claude-work/workflow.json`:\n\n```json\n{\n  \"task_id\": \"task-1234567890-12345\",\n  \"branch\": \"feature/live-activities-task-1234567890-12345\",\n  \"platform\": \"ios\",\n  \"worktree\": \".worktrees/feature/...\",\n  \"description\": \"Live Activities ã§ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤º\",\n  \"current_phase\": 1,\n  \"phases\": {\n    \"1\": {\"name\": \"design\", \"agent\": \"designer\", \"status\": \"running\", \"agent_task_id\": \"abc123\"},\n    \"2\": {\"name\": \"develop\", \"agent\": \"engineer\", \"status\": \"pending\", \"agent_task_id\": null},\n    \"3\": {\"name\": \"review\", \"agent\": \"reviewer\", \"status\": \"pending\", \"agent_task_id\": null},\n    \"4\": {\"name\": \"qa\", \"agent\": \"qa\", \"status\": \"pending\", \"agent_task_id\": null}\n  },\n  \"status\": \"running\"\n}\n```\n\n## Phase Prompts\n\n### Phase 1: Design (designer agent)\n\n```\nTask:\n  description: \"Design: $BRANCH_NAME\"\n  subagent_type: claude-org:designer\n  run_in_background: true\n  prompt: |\n    # Design Task\n    - Task ID: $TASK_ID\n    - Branch: $BRANCH_NAME\n    - Worktree: $WORKTREE_PATH\n    - Platform: $PLATFORM\n\n    ## Requirements\n    $TASK_DESCRIPTION\n\n    ## Instructions\n    1. cd $WORKTREE_PATH\n    2. Read platform skill: skills/$PLATFORM-dev/SKILL.md\n    3. Create design document at .claude-work/design/$BRANCH_NAME.md\n    4. Log progress: bash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh append-daily \"$TASK_ID\" \"designer\" \"<log>\"\n    5. Return completion JSON\n```\n\n### Phase 2: Development (engineer agent)\n\n```\nTask:\n  description: \"Dev: $BRANCH_NAME\"\n  subagent_type: claude-org:engineer\n  run_in_background: true\n  prompt: |\n    # Development Task\n    - Task ID: $TASK_ID\n    - Branch: $BRANCH_NAME\n    - Worktree: $WORKTREE_PATH\n    - Platform: $PLATFORM\n\n    ## Design Document\n    Read: .claude-work/design/$BRANCH_NAME.md\n\n    ## Requirements\n    $TASK_DESCRIPTION\n\n    ## Instructions\n    1. cd $WORKTREE_PATH\n    2. Read platform skill: skills/$PLATFORM-dev/SKILL.md\n    3. Read design document\n    4. Implement following design\n    5. Run build/tests\n    6. Commit changes\n    7. Log progress\n    8. Return completion JSON\n```\n\n### Phase 3: Review (reviewer agent)\n\n```\nTask:\n  description: \"Review: $BRANCH_NAME\"\n  subagent_type: claude-org:reviewer\n  run_in_background: true\n  prompt: |\n    # Code Review Task\n    - Task ID: $TASK_ID\n    - Branch: $BRANCH_NAME\n    - Worktree: $WORKTREE_PATH\n    - Platform: $PLATFORM\n\n    ## Instructions\n    1. cd $WORKTREE_PATH\n    2. Review all changes: git diff main\n    3. Fix critical issues\n    4. Create review report at .claude-work/review/$BRANCH_NAME.md\n    5. Log progress\n    6. Return completion JSON\n```\n\n### Phase 4: QA (qa agent)\n\n```\nTask:\n  description: \"QA: $BRANCH_NAME\"\n  subagent_type: claude-org:qa\n  run_in_background: true\n  prompt: |\n    # QA Task\n    - Task ID: $TASK_ID\n    - Branch: $BRANCH_NAME\n    - Worktree: $WORKTREE_PATH\n    - Platform: $PLATFORM\n\n    ## Context\n    - Design: .claude-work/design/$BRANCH_NAME.md\n    - Review: .claude-work/review/$BRANCH_NAME.md\n\n    ## Instructions\n    1. cd $WORKTREE_PATH\n    2. Design test cases\n    3. Run tests\n    4. Create QA report at .claude-work/qa/$BRANCH_NAME.md\n    5. Log progress\n    6. Return completion JSON\n```\n\n## Auto-Continue Protocol\n\nWhen `<workflow-auto-continue>` tag appears (from hook), follow this protocol:\n\n### 1. Check Current Phase Completion\n\n```\nTaskOutput:\n  task_id: <agent_task_id from workflow.json>\n  block: false\n```\n\n### 2. If Phase Complete\n\n```bash\n# Update state\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh complete-phase \"$CURRENT_PHASE\"\n```\n\nReport to user:\n```markdown\nâœ… **Phase $CURRENT_PHASE ($PHASE_NAME) Complete**\n```\n\n### 3. Start Next Phase (if not phase 4)\n\nLaunch next agent with appropriate prompt (see above), then:\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh start-phase \"$NEXT_PHASE\" \"<new_agent_task_id>\"\n```\n\nReport:\n```markdown\nğŸ”„ **Phase $NEXT_PHASE ($NEXT_PHASE_NAME) Started**\n```\n\n### 4. If All Phases Complete (phase 4 done)\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh complete-workflow\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh create-handoff \"$BRANCH\" \"orchestrator\" \"$SUMMARY\"\n```\n\nGenerate final report:\n```markdown\n## âœ… é–‹ç™ºå®Œäº†: $BRANCH_NAME\n\n**Task ID**: $TASK_ID\n\n| Phase | Status | Duration |\n|-------|--------|----------|\n| Design | âœ… | Xm |\n| Develop | âœ… | Xm |\n| Review | âœ… | Xm |\n| QA | âœ… | Xm |\n| **Total** | | **Xm** |\n\n### Summary\n<brief implementation summary>\n\n### Artifacts\n- Design: .claude-work/design/$BRANCH_NAME.md\n- Review: .claude-work/review/$BRANCH_NAME.md\n- QA: .claude-work/qa/$BRANCH_NAME.md\n\n### Next Steps\n`/claude-org:merge $BRANCH_NAME` ã§ãƒãƒ¼ã‚¸\n```\n\n## Status Check Protocol\n\nWhen user asks for status or `/claude-org:status`:\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh workflow-summary\n```\n\nAlso check if current phase is complete (non-blocking TaskOutput).\n\n## Error Handling\n\nIf agent returns `status: \"blocked\"`:\n\n1. Note the blocker in workflow state\n2. Ask user:\n   ```\n   AskUserQuestion:\n     question: \"Phase $N ã§å•é¡Œç™ºç”Ÿ: $BLOCKER\\nç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ\"\n     options:\n       - label: \"å†è©¦è¡Œ\"\n       - label: \"ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ç¶šè¡Œ\"\n       - label: \"ä¸­æ–­\"\n   ```\n\n## Workflow Commands\n\n```bash\n# Initialize new workflow\nwork-manager.sh init-workflow \"$TASK_ID\" \"$BRANCH\" \"$PLATFORM\" \"$WORKTREE\" \"$DESC\"\n\n# Get workflow info\nwork-manager.sh get-workflow\nwork-manager.sh get-workflow-status\nwork-manager.sh get-current-phase\nwork-manager.sh get-phase-status \"$PHASE\"\nwork-manager.sh get-phase-agent-id \"$PHASE\"\nwork-manager.sh workflow-summary\n\n# Update workflow\nwork-manager.sh start-phase \"$PHASE\" \"$AGENT_TASK_ID\"\nwork-manager.sh complete-phase \"$PHASE\"\nwork-manager.sh complete-workflow\nwork-manager.sh clear-workflow\n```\n\n## Key Points\n\n1. **Never block** - Always use `run_in_background: true`\n2. **Return immediately** - After starting a phase, return to user\n3. **Check on interaction** - Hook triggers phase checks on each user message\n4. **State-driven** - All decisions based on `workflow.json`\n5. **Auto-progress** - No manual phase transitions needed"
              },
              {
                "name": "Secretary",
                "description": "Core orchestration skill for the Claude Organization. Manages async sub-agents, worktrees, daily logs, and context handoff. This skill defines how the main Claude Code instance operates as Secretary to the CEO.",
                "path": "packages/claude-org/skills/secretary/SKILL.md",
                "frontmatter": {
                  "name": "Secretary",
                  "description": "Core orchestration skill for the Claude Organization. Manages async sub-agents, worktrees, daily logs, and context handoff. This skill defines how the main Claude Code instance operates as Secretary to the CEO."
                },
                "content": "# Secretary Operating Manual\n\nYou are the Secretary to CEO (Shaba), responsible for orchestrating the entire AI development organization.\n\n## Core Responsibilities\n\n1. **CEO Communication** - Always responsive, never blocking\n2. **Agent Orchestration** - Launch, track, and report on async sub-agents\n3. **Worktree Management** - Isolated development environments\n4. **Information Flow** - Daily logs, context files, handoffs\n5. **Conflict Avoidance** - Serialize conflicting tasks\n\n## Organization Structure\n\n```\nCEO (Shaba)\n    â”‚\n    â–¼\nSecretary (You - Claude Code Main)\n    â”‚\n    â”œâ”€â”€ product-spec     (PRD, API specs)\n    â”œâ”€â”€ eng-ios          (Swift/SwiftUI)\n    â”œâ”€â”€ eng-web          (React/Next.js)\n    â”œâ”€â”€ qa-design        (Test cases)\n    â””â”€â”€ marketing-content (ASO, SNS, blog)\n```\n\n## Async Task Management\n\n### Launching Tasks\n\nWhen CEO requests work:\n\n1. **Identify Agent**\n   - iOS keywords â†’ eng-ios\n   - Web keywords â†’ eng-web\n   - Spec/PRD â†’ product-spec\n   - Test design â†’ qa-design\n   - Content â†’ marketing-content\n\n2. **Create Worktree**\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh create-worktree \"<branch>\"\n   ```\n\n3. **Initialize Context**\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh init-context \"<branch>\"\n   ```\n\n4. **Launch Background Agent**\n   ```\n   Task:\n     subagent_type: <agent>\n     run_in_background: true\n     prompt: <detailed instructions>\n   ```\n\n5. **Record State**\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/work-manager.sh add-task ...\n   ```\n\n6. **Report to CEO**\n   - Confirm task started\n   - Provide task ID and branch\n   - Remind available commands\n\n### Tracking Tasks\n\nPeriodically or on `/status`:\n\n1. Check each running task with `TaskOutput(block: false)`\n2. Update state if completed\n3. Extract daily log highlights\n4. Report blockers and questions\n5. Suggest next actions\n\n### Completing Tasks\n\nWhen task completes:\n\n1. Update state to \"review\"\n2. Read handoff file\n3. Summarize for CEO\n4. Suggest merge command\n\n## Daily Log Protocol\n\nAll agents write to `.claude-work/daily/{date}/{agent}.md`\n\n### Reading Logs\n- Check for ğŸš§ (blocked) items\n- Check for â“ (questions)\n- Extract recent progress\n- Report highlights to CEO\n\n### Log Format\n```\n### HH:MM é–‹å§‹\n- ã‚¿ã‚¹ã‚¯æ¦‚è¦\n\n### HH:MM é€²æ—\n- ã‚„ã£ãŸã“ã¨\n- ğŸ’¡ ç™ºè¦‹\n\n### HH:MM å›°ã‚Šã”ã¨\n- ğŸš§ ãƒ–ãƒ­ãƒƒã‚«ãƒ¼\n- â“ è³ªå•\n\n### HH:MM å®Œäº†\n- âœ… å®Œäº†å†…å®¹\n- ğŸ“ commits: hash\n```\n\n## Context Handoff Protocol\n\n### Context Files\n`.claude-work/context/{branch}.md`\n\nContains:\n- Design decisions\n- Dependencies\n- Notes for subsequent agents\n- Reference files\n\n### Handoff Files\n`.claude-work/handoff/{branch}.md`\n\nCreated on task completion:\n- Implementation summary\n- Key decisions\n- Remaining issues\n- Links to related docs\n\n### Information Flow\n```\nPRD â†’ context â†’ implementation â†’ handoff â†’ merge\n       â†“\n    qa-design reads context\n       â†“\n    marketing reads PRD + handoff\n```\n\n## Conflict Management\n\n### Same-File Conflicts\nIf two tasks might edit the same files:\n1. Identify potential conflict\n2. Run sequentially, not parallel\n3. Second task waits for first to merge\n\n### Dependency Ordering\n```\nPRD must complete before implementation starts\nImplementation should complete before QA design\n```\n\n## CEO Communication Style\n\n### Quick Acknowledgments\n```\nğŸ‘ <agent> ã« <task> ã‚’ä¾é ¼ã—ã¾ã—ãŸ (branch: <branch>)\nä»–ã«ä½•ã‹ã‚ã‚Šã¾ã™ã‹ï¼Ÿ\n```\n\n### Status Reports\nUse tables for clarity:\n```markdown\n| Branch | Agent | Status | Elapsed |\n|--------|-------|--------|---------|\n| ... | ... | ... | ... |\n```\n\n### Problem Escalation\nIf agent is blocked:\n```\nğŸš§ <agent> ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã™\nå•é¡Œ: <issue>\nå¯¾å¿œæ¡ˆ:\n1. <option 1>\n2. <option 2>\n```\n\n### Completion Notification\n```\nâœ… <branch> å®Œäº†\nã‚µãƒãƒªãƒ¼: <summary>\nãƒãƒ¼ã‚¸ã—ã¾ã™ã‹ï¼Ÿ `/claude-org:merge <branch>`\n```\n\n## Available Commands\n\n| Command | Purpose |\n|---------|---------|\n| `/claude-org:dev` | Start development task |\n| `/claude-org:status` | Check all task status |\n| `/claude-org:merge` | Merge completed branch |\n| `/claude-org:cancel` | Cancel running task |\n| `/claude-org:qa` | Start QA design task |\n| `/claude-org:content` | Create marketing content |\n\n## Directory Structure\n\n```\nproject/\nâ”œâ”€â”€ .worktrees/           # Agent work environments\nâ”œâ”€â”€ .claude-work/\nâ”‚   â”œâ”€â”€ state.json        # Task state\nâ”‚   â”œâ”€â”€ daily/            # Daily logs\nâ”‚   â”œâ”€â”€ context/          # Task context\nâ”‚   â””â”€â”€ handoff/          # Completion handoffs\nâ”œâ”€â”€ docs/\nâ”‚   â”œâ”€â”€ prd/              # Product specs\nâ”‚   â”œâ”€â”€ test-cases/       # QA output\nâ”‚   â””â”€â”€ marketing/        # Content output\nâ””â”€â”€ src/\n```\n\n## Emergency Procedures\n\n### Agent Not Responding\n1. Check TaskOutput\n2. Check daily log for last activity\n3. If stuck > 30 min, suggest cancel\n\n### Merge Conflict\n1. Do not force merge\n2. Explain conflict to CEO\n3. Offer manual resolution or cancel\n\n### Context Lost\nIf conversation restarts:\n1. Read `.claude-work/state.json`\n2. Read recent daily logs\n3. Resume orchestration"
              }
            ]
          },
          {
            "name": "dev-org",
            "description": "Comprehensive development organization plugin with AI-driven refactoring workflows. Features parallel analysis (SOLID, complexity, smells, security, duplication), architecture design, implementation, QA, testing, and multi-perspective code review.",
            "source": "./packages/dev-org",
            "category": "development",
            "version": "0.1.0",
            "author": {
              "name": "shabaraba",
              "email": ""
            },
            "install_commands": [
              "/plugin marketplace add shabaraba/shabaraba-cc-plugins",
              "/plugin install dev-org@shabaraba-cc-plugins"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2026-01-08T01:18:12Z",
              "created_at": "2025-12-29T12:29:20Z",
              "license": null
            },
            "commands": [
              {
                "name": "/refactor",
                "description": "Comprehensive AI-driven refactoring workflow with parallel analysis, design proposal, implementation, testing, and review",
                "path": "packages/dev-org/commands/refactor.md",
                "frontmatter": {
                  "name": "refactor",
                  "description": "Comprehensive AI-driven refactoring workflow with parallel analysis, design proposal, implementation, testing, and review",
                  "argument-hint": "[path] [--analysis-only] [--pr NUMBER]",
                  "allowed-tools": [
                    "Read",
                    "Write",
                    "Edit",
                    "Grep",
                    "Glob",
                    "Bash",
                    "Task",
                    "TodoWrite",
                    "AskUserQuestion"
                  ]
                },
                "content": "# Refactoring Workflow Orchestrator\n\nExecute a comprehensive refactoring workflow for the specified target.\n\n## Arguments\n\n- **path** (optional): Directory or file to refactor. Default: entire project\n- **--analysis-only**: Stop after analysis and design proposal (no implementation)\n- **--pr NUMBER**: Analyze and refactor based on PR changes\n\n## Critical Rules\n\n### 1. Always Verify Subagent Output\nAfter every subagent completes, YOU (orchestrator) must verify:\n- Files claimed to be created â†’ `Glob` to confirm existence\n- Files claimed to be modified â†’ `Read` to confirm changes\n- Tests claimed to pass â†’ `Bash` to run tests yourself\n\n### 2. Feedback Loops Are Mandatory\n```\nTest Failed? â†’ Back to Implementation (max 3 times)\nReview Issues? â†’ Back to Implementation (max 3 times)\nRegression Detected? â†’ Back to Implementation (max 3 times)\nStill Failing? â†’ Stop and ask user\n```\n\n### 3. Regression Prevention Is Critical\nThis is REFACTORING - behavior must NOT change:\n- **Implementation Phase**: White-box verification (code-level equivalence)\n- **QA Phase**: Black-box verification (input/output equivalence)\n- Any regression = immediate feedback loop to implementation\n\n### 4. Maximum Retry Limits\n- Implementation retry: 3 times per module\n- Test fix retry: 3 times total\n- Review fix retry: 3 times total\n- After max retries: STOP and report to user\n\n## Workflow Phases\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Preparation â”‚\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Analysis   â”‚ (5 analyzers in parallel)\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   Design    â”‚ â†’ USER APPROVAL REQUIRED (includes architecture rules)\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                FEEDBACK LOOP                    â”‚\nâ”‚            (max 3 retries each)                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚                                         â”‚   â”‚\nâ”‚  â–¼                                         â”‚   â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚   â”‚\nâ”‚  â”‚Implementationâ”‚                           â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚\nâ”‚         â–¼                                   â”‚   â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     White-box             â”‚   â”‚\nâ”‚  â”‚ Regression  â”‚â”€â”€â”€â”€ REGRESSION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚\nâ”‚  â”‚ Check (WB)  â”‚                           â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚\nâ”‚         â”‚ PASS                             â”‚   â”‚\nâ”‚         â–¼                                   â”‚   â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Architecture          â”‚   â”‚\nâ”‚  â”‚ Architectureâ”‚â”€â”€â”€â”€ VIOLATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚  â”‚    Check    â”‚                               â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                               â”‚\nâ”‚         â”‚ PASS                                 â”‚\nâ”‚         â–¼                                      â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚\nâ”‚  â”‚  QA & Test  â”‚                               â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                               â”‚\nâ”‚         â–¼                                      â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Black-box                 â”‚\nâ”‚  â”‚ Regression  â”‚â”€â”€â”€â”€ REGRESSION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nâ”‚  â”‚ Check (BB)  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\nâ”‚         â”‚ PASS\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n          â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   Review    â”‚â”€â”€â”€â”€â–ºâ”‚ Fix Issues       â”‚â”€â”€â”\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\n       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n       â”‚ PASS\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Completion  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Phase 1: Preparation\n\n**Actions**:\n1. Parse arguments to determine scope\n2. Create Git branch: `refactor/YYYYMMDD-{scope}`\n3. Initialize TodoWrite with all phases\n\n```bash\ngit checkout -b refactor/$(date +%Y%m%d)-{scope_slug}\n```\n\n**TodoWrite initialization**:\n```\n- [ ] Analysis Phase\n- [ ] Design Phase\n- [ ] User Approval\n- [ ] Implementation Phase\n- [ ] QA & Test Phase\n- [ ] Review Phase\n- [ ] Completion\n```\n\n---\n\n## Phase 2: Analysis (Parallel)\n\nLaunch 5 analyzer agents in parallel:\n\n```\nTask(subagent_type=\"code-analyzer-solid\", prompt=\"...\")\nTask(subagent_type=\"code-analyzer-complexity\", prompt=\"...\")\nTask(subagent_type=\"code-analyzer-smells\", prompt=\"...\")\nTask(subagent_type=\"code-analyzer-security\", prompt=\"...\")\nTask(subagent_type=\"code-analyzer-duplication\", prompt=\"...\")\n```\n\n**After all complete**: Aggregate results into unified analysis report.\n\n---\n\n## Phase 3: Design\n\nLaunch `architecture-designer` agent:\n```\nTask(subagent_type=\"architecture-designer\", prompt=\"Design refactoring based on: {analysis_results}\")\n```\n\n**USER APPROVAL REQUIRED**:\n```\nAskUserQuestion(\n  question=\"Proceed with this refactoring plan?\",\n  options=[\n    {label: \"Approve\", description: \"Continue to implementation\"},\n    {label: \"Modify\", description: \"Request changes to design\"},\n    {label: \"Cancel\", description: \"Stop refactoring\"}\n  ]\n)\n```\n\nIf `--analysis-only` or user cancels: Generate report and stop.\n\n---\n\n## Phase 4: Implementation\n\n### 4.1 Execute Implementation\n\nLaunch `implementation-agent`:\n```\nTask(subagent_type=\"implementation-agent\", prompt=\"Implement: {approved_design}\")\n```\n\n### 4.2 Verify Output (MANDATORY)\n\n**YOU must verify after subagent completes:**\n\n```python\n# For each file claimed as created:\nfor file in claimed_created_files:\n    result = Glob(pattern=file)\n    if not result:\n        VERIFICATION_FAILED = True\n\n# For each file claimed as modified:\nfor file in claimed_modified_files:\n    content = Read(file)\n    if expected_changes not in content:\n        VERIFICATION_FAILED = True\n```\n\n**If verification fails**:\n1. Log which files are missing/incorrect\n2. Re-launch implementation-agent with specific instructions\n3. Max 3 retries, then stop and report to user\n\n### 4.3 White-box Regression Check (MANDATORY)\n\n**This is REFACTORING - behavior must NOT change.**\n\nCheck for regressions at code level:\n\n```python\n# 1. Check no references to old/deleted code remain\nfor old_symbol in deleted_symbols:\n    references = Grep(pattern=old_symbol, path=target_path)\n    if references:\n        REGRESSION_DETECTED = True\n        # Old code still referenced!\n\n# 2. Verify functional equivalence\nfor refactored_function in refactored_functions:\n    # Read new implementation\n    new_code = Read(new_file_path)\n\n    # Verify same logic paths exist:\n    # - Same conditionals\n    # - Same loops\n    # - Same external calls\n    # - Same return values\n\n    if logic_differs:\n        REGRESSION_DETECTED = True\n```\n\n**Checklist:**\n- [ ] No dangling references to deleted symbols (Grep old names)\n- [ ] All public APIs preserved (same signatures)\n- [ ] Same external dependencies called\n- [ ] Same error handling paths\n- [ ] Same return value patterns\n\n**If regression detected:**\n1. Log specific regression issue\n2. Increment regression_retry_count\n3. If < 3 retries â†’ Re-launch implementation-agent with fix instructions\n4. If >= 3 retries â†’ STOP and report to user\n\n### 4.4 Architecture Compliance Check (MANDATORY)\n\n**Verify implementation follows the approved design's architecture rules.**\n\nThe design phase defines architectural boundaries and dependency rules.\nImplementation MUST comply with these rules.\n\n```python\n# 1. Extract architecture rules from design\narchitecture_rules = design.get_architecture_rules()\n# Example rules:\n# - \"Application layer must not depend on Presentation layer\"\n# - \"Domain layer must not depend on Infrastructure layer\"\n# - \"Controllers must call Use Cases, not Repositories directly\"\n\n# 2. Build forbidden dependency patterns\nforbidden_patterns = []\nfor rule in architecture_rules:\n    if rule.type == \"layer_dependency\":\n        # e.g., Application â†’ Presentation is forbidden\n        forbidden_patterns.append({\n            \"from_layer\": rule.from_layer,\n            \"to_layer\": rule.to_layer,\n            \"pattern\": f\"{rule.from_layer}.*require.*{rule.to_layer}\"\n        })\n\n# 3. Check for violations\nfor pattern in forbidden_patterns:\n    violations = Grep(\n        pattern=pattern[\"pattern\"],\n        path=f\"{target_path}/{pattern['from_layer']}\"\n    )\n    if violations:\n        ARCHITECTURE_VIOLATION = True\n        violation_details.append({\n            \"rule\": f\"{pattern['from_layer']} must not depend on {pattern['to_layer']}\",\n            \"files\": violations\n        })\n```\n\n**Common Architecture Violations to Check:**\n\n| Architecture | Forbidden Dependency | Grep Pattern Example |\n|--------------|---------------------|----------------------|\n| Clean Architecture | Application â†’ Presentation | `application.*require.*presentation` |\n| Clean Architecture | Domain â†’ Infrastructure | `domain.*require.*infrastructure` |\n| Clean Architecture | Domain â†’ Application | `domain.*require.*application` |\n| Layered | Service â†’ Controller | `service.*import.*controller` |\n| Hexagonal | Core â†’ Adapter | `core.*require.*adapter` |\n\n**Design-Specific Rules:**\n\nCheck the approved design document for:\n1. Layer definitions and their allowed dependencies\n2. Module boundaries and communication rules\n3. Prohibited patterns (e.g., \"No direct DB access from controllers\")\n4. Required patterns (e.g., \"All external calls must go through adapters\")\n\n**Verification Steps:**\n\n```python\n# For each layer defined in design:\nfor layer in design.layers:\n    allowed_deps = layer.allowed_dependencies\n\n    # Find all imports/requires in this layer\n    imports = Grep(pattern=\"require|import\", path=f\"{target_path}/{layer.path}\")\n\n    for imp in imports:\n        target_layer = resolve_layer(imp.target)\n        if target_layer not in allowed_deps:\n            ARCHITECTURE_VIOLATION = True\n```\n\n**Checklist:**\n- [ ] No forbidden layer dependencies (Grep patterns)\n- [ ] All modules in correct directories per design\n- [ ] Interfaces defined where design specifies\n- [ ] Dependency injection used where design requires\n- [ ] No circular dependencies between modules\n\n**If architecture violation detected:**\n```\nâ†’ Increment architecture_retry_count\nâ†’ IF architecture_retry_count > 3:\n    â†’ STOP and report to user:\n      \"Architecture violations not resolved after 3 attempts\"\n      \"Violations: {violation_details}\"\n      \"Design rules: {architecture_rules}\"\nâ†’ ELSE:\n    â†’ Go back to Phase 4.1 with prompt:\n      \"Fix architecture violations:\n       - {violation_1}: {file} depends on {forbidden_layer}\n       - {violation_2}: {file} depends on {forbidden_layer}\n       Refer to approved design for correct dependency direction.\"\n```\n\n### 4.5 Run Lint/Format\n\n```bash\n# Detect and run appropriate tools\nnpm run lint 2>/dev/null || npx eslint . --fix\nnpm run format 2>/dev/null || npx prettier --write .\n```\n\n---\n\n## Phase 5: QA & Test\n\n**CRITICAL: This phase verifies NO REGRESSION in behavior.**\n\n### 5.1 QA Analysis\n\nLaunch `qa-agent`:\n```\nTask(subagent_type=\"qa-agent\", prompt=\"Analyze impact and design tests for changes\")\n```\n\n### 5.2 Test Implementation\n\nLaunch `test-implementer`:\n```\nTask(subagent_type=\"test-implementer\", prompt=\"Implement tests: {test_design}\")\n```\n\n### 5.3 Run Tests (MANDATORY)\n\n**YOU must run tests yourself:**\n```bash\nnpm test || pytest || go test ./... || mvn test\n```\n\n### 5.4 Black-box Regression Check (MANDATORY)\n\n**Verify behavior is IDENTICAL before and after refactoring.**\n\nThis is INPUT/OUTPUT level verification:\n\n```python\n# For each refactored component, verify:\nfor component in refactored_components:\n\n    # 1. Identify testable entry points\n    entry_points = find_public_apis(component)\n\n    # 2. For each entry point, verify same behavior:\n    for api in entry_points:\n        # Check: same inputs â†’ same outputs\n        # Check: same error inputs â†’ same error outputs\n        # Check: same edge cases â†’ same results\n\n        if behavior_differs:\n            REGRESSION_DETECTED = True\n```\n\n**Verification Methods:**\n\n| Method | When to Use |\n|--------|-------------|\n| Existing tests pass | Always - first line of defense |\n| Manual smoke test | For UI/CLI components |\n| API comparison | For service endpoints |\n| Output diff | For data processing functions |\n\n**Checklist:**\n- [ ] All existing tests pass (no behavior change)\n- [ ] Public APIs return same results for same inputs\n- [ ] Error handling produces same error types/messages\n- [ ] Side effects (DB writes, file I/O, etc.) are identical\n- [ ] Performance characteristics are similar (no major regression)\n\n**If regression detected:**\n```\nâ†’ Increment regression_retry_count\nâ†’ IF regression_retry_count > 3:\n    â†’ STOP and report to user:\n      \"Behavior regression detected after 3 fix attempts\"\n      \"Differences: {regression_details}\"\nâ†’ ELSE:\n    â†’ Go back to Phase 4.1 with prompt:\n      \"Fix behavior regression: {specific_difference}\"\n```\n\n### 5.5 Handle Test Results\n\n```\nIF all tests pass:\n    â†’ Proceed to Phase 6 (Review)\n\nIF tests fail:\n    â†’ Increment retry_count\n    â†’ IF retry_count > 3:\n        â†’ STOP and report to user:\n          \"Tests failed 3 times. Issues: {failures}\"\n          \"Options: 1) Fix manually 2) Skip tests 3) Abort\"\n    â†’ ELSE:\n        â†’ Go back to Phase 4.1 with prompt:\n          \"Fix test failures: {failure_details}\"\n```\n\n---\n\n## Phase 6: Review\n\n### 6.1 Execute Reviews (Parallel)\n\nLaunch 4 reviewer agents:\n```\nTask(subagent_type=\"code-reviewer-security\", prompt=\"...\")\nTask(subagent_type=\"code-reviewer-performance\", prompt=\"...\")\nTask(subagent_type=\"code-reviewer-maintainability\", prompt=\"...\")\nTask(subagent_type=\"code-reviewer-testability\", prompt=\"...\")\n```\n\n### 6.2 Aggregate Findings\n\nCategorize issues:\n- **Critical**: Must fix before completion\n- **Major**: Should fix, ask user\n- **Minor**: Can fix automatically or defer\n\n### 6.3 Handle Review Issues\n\n```\nIF no critical/major issues:\n    â†’ Proceed to Phase 7 (Completion)\n\nIF critical issues found:\n    â†’ Increment review_retry_count\n    â†’ IF review_retry_count > 3:\n        â†’ STOP and report to user:\n          \"Critical issues not resolved after 3 attempts\"\n          \"Issues: {critical_issues}\"\n    â†’ ELSE:\n        â†’ Go back to Phase 4.1 with prompt:\n          \"Fix critical review issues: {issue_details}\"\n\nIF only major issues:\n    â†’ AskUserQuestion:\n        \"Review found these issues: {issues}\"\n        Options:\n        - \"Fix now\" â†’ Back to Phase 4.1\n        - \"Fix later\" â†’ Record as tech debt, continue\n        - \"Ignore\" â†’ Continue without fixing\n```\n\n### 6.4 Auto-fix Minor Issues\n\nFor minor issues (formatting, naming, etc.):\n1. Apply fixes directly using Edit tool\n2. Re-run lint/format\n3. Verify fixes applied\n\n---\n\n## Phase 7: Completion\n\n### 7.1 Final Verification\n\n**Run full test suite:**\n```bash\nnpm test || pytest || go test ./... || mvn test\n```\n\n**Verify all claimed files exist:**\n```python\nfor file in all_created_files:\n    assert Glob(file) is not empty\n```\n\n### 7.2 Generate Summary Report\n\n```markdown\n## Refactoring Summary\n\n### Changes Made\n- Files created: {count} (all verified)\n- Files modified: {count} (all verified)\n- Files deleted: {count}\n\n### Analysis Findings Addressed\n- SOLID violations fixed: {count}\n- Code smells removed: {count}\n- Duplications eliminated: {count}\n\n### Test Results\n- Total tests: {count}\n- Passing: {count}\n- Coverage: {percentage}%\n\n### Review Results\n- Critical issues: 0 (all resolved)\n- Major issues: {count} ({resolved} fixed, {deferred} deferred)\n- Minor issues: {count} (auto-fixed)\n\n### Iterations Required\n- Implementation retries: {count}\n- Test fix retries: {count}\n- Review fix retries: {count}\n```\n\n### 7.3 Present to User\n\nShow summary and ask:\n```\nAskUserQuestion(\n  question=\"Refactoring complete. What next?\",\n  options=[\n    {label: \"Merge\", description: \"Merge branch to main/develop\"},\n    {label: \"Create PR\", description: \"Create pull request for review\"},\n    {label: \"Keep branch\", description: \"Leave changes in branch\"}\n  ]\n)\n```\n\n---\n\n## State Tracking\n\nMaintain these variables throughout:\n\n```yaml\nstate:\n  current_phase: \"implementation\"\n  implementation_retry_count: 0\n  test_retry_count: 0\n  review_retry_count: 0\n  regression_retry_count: 0  # For both white-box and black-box checks\n  architecture_retry_count: 0  # For architecture compliance check\n  max_retries: 3\n\n  created_files: []\n  modified_files: []\n  deleted_files: []\n  deleted_symbols: []  # Track for regression checking\n\n  # Architecture rules from approved design\n  architecture_rules:\n    layers: []  # e.g., [\"domain\", \"application\", \"infrastructure\", \"presentation\"]\n    forbidden_dependencies: []  # e.g., [{\"from\": \"application\", \"to\": \"presentation\"}]\n    required_patterns: []  # e.g., [\"use_case\", \"repository\", \"adapter\"]\n\n  test_results:\n    passed: 0\n    failed: 0\n    failures: []\n\n  regression_check:\n    whitebox_passed: false\n    blackbox_passed: false\n    dangling_references: []\n    behavior_differences: []\n\n  architecture_check:\n    passed: false\n    violations: []  # e.g., [{\"file\": \"...\", \"rule\": \"...\", \"detail\": \"...\"}]\n\n  review_issues:\n    critical: []\n    major: []\n    minor: []\n```\n\n---\n\n## Error Handling\n\n| Situation | Action |\n|-----------|--------|\n| Analyzer fails | Continue with others, note partial results |\n| Implementation fails (< 3 retries) | Retry with error details |\n| Implementation fails (>= 3 retries) | Stop, report to user |\n| White-box regression (< 3 retries) | Back to implementation with specific issue |\n| White-box regression (>= 3 retries) | Stop, report dangling references |\n| Architecture violation (< 3 retries) | Back to implementation with violation details |\n| Architecture violation (>= 3 retries) | Stop, report violations and design rules |\n| Tests fail (< 3 retries) | Back to implementation |\n| Tests fail (>= 3 retries) | Stop, ask user what to do |\n| Black-box regression (< 3 retries) | Back to implementation with behavior diff |\n| Black-box regression (>= 3 retries) | Stop, report behavior differences |\n| Critical review issue (< 3 retries) | Back to implementation |\n| Critical review issue (>= 3 retries) | Stop, report to user |\n| Verification fails | Retry subagent or fix manually |\n\n---\n\n## Skills to Load\n\n- `solid-principles` - SOLID violation patterns\n- `refactoring-patterns` - Refactoring techniques\n- `code-quality-metrics` - Complexity thresholds\n\n---\n\n## Example Usage\n\n```bash\n# Refactor entire project\n/refactor\n\n# Refactor specific directory\n/refactor src/services\n\n# Analysis only (no changes)\n/refactor src/api --analysis-only\n\n# Refactor based on PR\n/refactor --pr 123\n```"
              }
            ],
            "skills": [
              {
                "name": "Code Quality Metrics",
                "description": "This skill should be used when the user asks about \"code complexity\", \"cyclomatic complexity\", \"cognitive complexity\", \"code metrics\", \"maintainability index\", \"code coverage\", or when measuring code quality quantitatively. Provides metrics thresholds and measurement techniques.",
                "path": "packages/dev-org/skills/code-quality-metrics/SKILL.md",
                "frontmatter": {
                  "name": "Code Quality Metrics",
                  "description": "This skill should be used when the user asks about \"code complexity\", \"cyclomatic complexity\", \"cognitive complexity\", \"code metrics\", \"maintainability index\", \"code coverage\", or when measuring code quality quantitatively. Provides metrics thresholds and measurement techniques.",
                  "version": "0.1.0"
                },
                "content": "# Code Quality Metrics Guide\n\n## Overview\n\nCode quality metrics provide quantitative measures of code characteristics. This skill covers complexity metrics, maintainability indices, and their practical thresholds across different languages.\n\n## Complexity Metrics\n\n### Cyclomatic Complexity (CC)\n\nMeasures the number of linearly independent paths through code.\n\n**Calculation**: CC = E - N + 2P\n- E = edges in control flow graph\n- N = nodes in control flow graph\n- P = connected components (usually 1)\n\n**Simplified**: Count decision points + 1\n- Each `if`, `elif`, `else`, `for`, `while`, `case`, `catch`, `&&`, `||`, `?:` adds 1\n\n**Thresholds**:\n| Range | Risk | Action |\n|-------|------|--------|\n| 1-10 | Low | Simple, well-structured |\n| 11-20 | Moderate | More complex, consider refactoring |\n| 21-50 | High | Complex, difficult to test |\n| >50 | Very High | Untestable, must refactor |\n\n### Cognitive Complexity\n\nMeasures how difficult code is to understand (introduced by SonarQube).\n\n**Key differences from CC**:\n- Penalizes nested structures more heavily\n- Doesn't count all decision points equally\n- Focuses on human comprehension\n\n**Calculation rules**:\n1. +1 for each break in linear flow (`if`, `for`, `while`, `switch`, `catch`, `?:`)\n2. +1 for each nesting level inside these structures\n3. +1 for binary logical operators (`&&`, `||`)\n4. Recursion adds +1\n\n**Thresholds**:\n| Range | Assessment |\n|-------|------------|\n| 0-7 | Easy to understand |\n| 8-15 | Moderate complexity |\n| 16-24 | High complexity, refactor |\n| 25+ | Very high, immediate refactoring |\n\n**Example**:\n```python\ndef process(items):           # 0\n    for item in items:        # +1 (loop)\n        if item.active:       # +1 (if) +1 (nesting=1)\n            if item.valid:    # +1 (if) +2 (nesting=2)\n                handle(item)\n    return items              # Total: 6\n```\n\n### Halstead Metrics\n\nBased on counting operators and operands:\n\n| Metric | Formula | Meaning |\n|--------|---------|---------|\n| Vocabulary | n = n1 + n2 | Unique operators + operands |\n| Length | N = N1 + N2 | Total operators + operands |\n| Volume | V = N Ã— log2(n) | Size of implementation |\n| Difficulty | D = (n1/2) Ã— (N2/n2) | Error-proneness |\n| Effort | E = D Ã— V | Mental effort to understand |\n\n## Maintainability Metrics\n\n### Maintainability Index (MI)\n\nComposite metric combining complexity, size, and comments.\n\n**Formula**: MI = 171 - 5.2 Ã— ln(V) - 0.23 Ã— CC - 16.2 Ã— ln(LOC)\n\n**Thresholds**:\n| Range | Maintainability |\n|-------|-----------------|\n| 85-100 | High maintainability |\n| 65-84 | Moderate maintainability |\n| 0-64 | Low maintainability |\n\n### Lines of Code (LOC)\n\n| Metric | Description | Threshold |\n|--------|-------------|-----------|\n| Physical LOC | All lines including blanks/comments | Method: <100, Class: <500 |\n| Logical LOC | Executable statements | Method: <30, Class: <200 |\n| Comment Ratio | Comments / Total | 10-30% typical |\n\n## Coupling Metrics\n\n### Afferent Coupling (Ca)\nNumber of classes that depend on this class.\n- High Ca = Many dependents, changes are risky\n\n### Efferent Coupling (Ce)\nNumber of classes this class depends on.\n- High Ce = Many dependencies, class is fragile\n\n### Instability (I)\nI = Ce / (Ca + Ce)\n- 0 = Stable (many dependents, few dependencies)\n- 1 = Unstable (few dependents, many dependencies)\n\n## Cohesion Metrics\n\n### Lack of Cohesion of Methods (LCOM)\n\nMeasures how related methods are within a class.\n\n**LCOM1**: Number of method pairs without shared instance variables\n- 0 = Perfect cohesion\n- High = Low cohesion, consider splitting\n\n**LCOM4**: Number of connected components in method-field graph\n- 1 = Cohesive class\n- >1 = Multiple responsibilities\n\n## Quick Reference Table\n\n| Metric | Tool | Good | Warning | Critical |\n|--------|------|------|---------|----------|\n| Cyclomatic | ESLint, SonarQube | â‰¤10 | 11-20 | >20 |\n| Cognitive | SonarQube | â‰¤15 | 16-24 | >24 |\n| Method LOC | - | â‰¤30 | 31-50 | >50 |\n| Class LOC | - | â‰¤300 | 301-500 | >500 |\n| Parameters | ESLint | â‰¤3 | 4-5 | >5 |\n| Nesting Depth | ESLint | â‰¤3 | 4 | >4 |\n| LCOM4 | - | 1 | 2 | >2 |\n\n## Measurement Commands\n\n### ESLint Complexity\n```bash\nnpx eslint --rule 'complexity: [\"error\", 10]' src/\n```\n\n### SonarQube Analysis\n```bash\nsonar-scanner -Dsonar.projectKey=myproject\n```\n\n### Python Radon\n```bash\nradon cc src/ -a -s  # Cyclomatic complexity\nradon mi src/ -s     # Maintainability index\n```\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed measurement techniques:\n- **`references/measurement-tools.md`** - Tool configurations and usage\n- **`references/thresholds-by-language.md`** - Language-specific thresholds\n\n### Integration with Other Skills\n\nCombine with:\n- `solid-principles` for structural analysis\n- `refactoring-patterns` for improvement strategies"
              },
              {
                "name": "Refactoring Patterns",
                "description": "This skill should be used when the user asks about \"refactoring\", \"code smells\", \"extract method\", \"extract class\", \"rename refactoring\", \"move method\", or when improving code structure without changing behavior. Provides Martin Fowler's refactoring catalog and code smell detection.",
                "path": "packages/dev-org/skills/refactoring-patterns/SKILL.md",
                "frontmatter": {
                  "name": "Refactoring Patterns",
                  "description": "This skill should be used when the user asks about \"refactoring\", \"code smells\", \"extract method\", \"extract class\", \"rename refactoring\", \"move method\", or when improving code structure without changing behavior. Provides Martin Fowler's refactoring catalog and code smell detection.",
                  "version": "0.1.0"
                },
                "content": "# Refactoring Patterns Guide\n\n## Overview\n\nRefactoring is the process of improving code structure without changing its external behavior. This skill provides guidance based on Martin Fowler's refactoring catalog and industry best practices for detecting code smells and applying appropriate refactoring patterns.\n\n## Core Principles\n\n### The Refactoring Cycle\n\n1. **Identify** - Detect code smells or improvement opportunities\n2. **Test** - Ensure tests cover the code to be refactored\n3. **Refactor** - Apply small, incremental changes\n4. **Verify** - Run tests after each change\n5. **Repeat** - Continue until goal is achieved\n\n### When to Refactor\n\n- Before adding new features\n- When fixing bugs\n- During code review\n- When code smells are detected\n- To improve test coverage\n\n### When NOT to Refactor\n\n- No test coverage exists (write tests first)\n- Deadline pressure (schedule dedicated time)\n- Complete rewrite is needed\n\n## Code Smells Categories\n\n### Bloaters\n\nCode that has grown too large:\n\n| Smell | Indicators | Refactoring |\n|-------|------------|-------------|\n| Long Method | >20 lines, multiple concerns | Extract Method |\n| Large Class | >300 lines, many fields | Extract Class |\n| Primitive Obsession | Overuse of primitives for data | Replace with Object |\n| Long Parameter List | >3-4 parameters | Introduce Parameter Object |\n| Data Clumps | Same data groups repeated | Extract Class |\n\n### Object-Orientation Abusers\n\nIncorrect OO design:\n\n| Smell | Indicators | Refactoring |\n|-------|------------|-------------|\n| Switch Statements | Type-based switching | Replace with Polymorphism |\n| Parallel Inheritance | Matching class hierarchies | Move Method, Collapse Hierarchy |\n| Refused Bequest | Subclass doesn't use inherited | Replace Inheritance with Delegation |\n| Temporary Field | Fields only sometimes used | Extract Class |\n\n### Change Preventers\n\nCode that resists modification:\n\n| Smell | Indicators | Refactoring |\n|-------|------------|-------------|\n| Divergent Change | Class changes for multiple reasons | Extract Class |\n| Shotgun Surgery | One change affects many classes | Move Method, Inline Class |\n| Parallel Inheritance | Adding subclass requires another | Move Method |\n\n### Dispensables\n\nUnnecessary code:\n\n| Smell | Indicators | Refactoring |\n|-------|------------|-------------|\n| Comments | Explaining bad code | Extract Method (self-documenting) |\n| Duplicate Code | Same code in multiple places | Extract Method/Class |\n| Dead Code | Unreachable code | Delete |\n| Lazy Class | Class does too little | Inline Class |\n| Speculative Generality | Unused abstraction | Collapse Hierarchy |\n\n### Couplers\n\nExcessive coupling:\n\n| Smell | Indicators | Refactoring |\n|-------|------------|-------------|\n| Feature Envy | Method uses other class's data | Move Method |\n| Inappropriate Intimacy | Classes know too much about each other | Move Method, Extract Class |\n| Message Chains | a.b().c().d() chains | Hide Delegate |\n| Middle Man | Class only delegates | Remove Middle Man |\n\n## Essential Refactoring Patterns\n\n### Extract Method\n\nTransform code fragment into a method with descriptive name.\n\n**When to apply**:\n- Code block has a clear purpose\n- Same code appears in multiple places\n- Method is too long\n\n**Process**:\n1. Identify code to extract\n2. Check for local variables used\n3. Create new method with clear name\n4. Replace original code with method call\n5. Compile and test\n\n### Extract Class\n\nMove related fields and methods to a new class.\n\n**When to apply**:\n- Class has multiple responsibilities\n- Subset of fields always used together\n- Class is too large\n\n**Process**:\n1. Identify cohesive group of fields/methods\n2. Create new class\n3. Move fields first, then methods\n4. Update references\n5. Consider making new class a field\n\n### Move Method\n\nMove method to the class that uses its data most.\n\n**When to apply**:\n- Method uses data from another class\n- Feature envy detected\n- Better cohesion possible\n\n### Introduce Parameter Object\n\nGroup related parameters into an object.\n\n**When to apply**:\n- Same parameter groups repeated\n- More than 3-4 parameters\n- Parameters represent a concept\n\n### Replace Conditional with Polymorphism\n\nReplace type-based switching with inheritance.\n\n**When to apply**:\n- Switch on type code\n- Same conditional in multiple places\n- New types require code changes\n\n## Refactoring Safety Checklist\n\nBefore refactoring:\n- [ ] Tests exist and pass\n- [ ] Code is under version control\n- [ ] IDE refactoring tools available\n- [ ] Small steps planned\n\nDuring refactoring:\n- [ ] One change at a time\n- [ ] Compile after each change\n- [ ] Test after each step\n- [ ] Commit working states\n\nAfter refactoring:\n- [ ] All tests pass\n- [ ] Code review completed\n- [ ] Documentation updated\n- [ ] Performance verified\n\n## Additional Resources\n\n### Reference Files\n\nFor comprehensive pattern catalog and detection scripts:\n- **`references/fowler-catalog.md`** - Complete refactoring pattern catalog\n- **`references/smell-detection.md`** - Code smell detection techniques\n\n### Integration with Other Skills\n\nCombine with:\n- `solid-principles` for design principle guidance\n- `code-quality-metrics` for quantitative analysis"
              },
              {
                "name": "Self-Directed Debugging",
                "description": "Autonomous development workflow that proactively asks questions, verifies implementation with tools, and auto-fixes linter errors. Use when implementing features to ensure quality through self-driven verification.",
                "path": "packages/dev-org/skills/self-directed-debugging/SKILL.md",
                "frontmatter": {
                  "name": "Self-Directed Debugging",
                  "description": "Autonomous development workflow that proactively asks questions, verifies implementation with tools, and auto-fixes linter errors. Use when implementing features to ensure quality through self-driven verification.",
                  "version": "0.1.0"
                },
                "content": "# Self-Directed Debugging Skill\n\n## Overview\n\nThis skill enables Claude Code to work autonomously with proactive quality assurance. It emphasizes asking clarifying questions, verifying implementations, and automatically fixing issues.\n\n## Core Principles\n\n### 1. Ask First, Code Later\n\n**ALWAYS ask clarifying questions when:**\n- Requirements are ambiguous or underspecified\n- Multiple implementation approaches exist\n- Design decisions impact architecture\n- Edge cases are unclear\n- Dependencies or tools are unfamiliar\n\n**Use AskUserQuestion tool proactively:**\n```markdown\nExamples:\n- \"Should I use Redux or Context API for state management?\"\n- \"Do you want error boundaries at the page or component level?\"\n- \"Should validation happen on the client, server, or both?\"\n- \"What should happen if the API times out?\"\n```\n\n**DON'T:**\n- Make assumptions without asking\n- Implement the first solution that comes to mind\n- Skip questions to \"save time\"\n- Guess at business logic requirements\n\n### 2. Verify Everything\n\nAfter implementing any feature, **ALWAYS perform these verification steps:**\n\n#### A. Linter Check\n```bash\n# Run linter immediately after changes\nnpm run lint\n# or\npnpm lint\n# or\neslint src/\n\n# If errors found, fix them automatically\nnpm run lint:fix\n```\n\n#### B. Type Check\n```bash\n# Verify TypeScript types\ntsc --noEmit\n# or\nnpm run typecheck\n```\n\n#### C. Unit Tests\n```bash\n# Run relevant tests\nnpm test -- --run\n# or specific test file\nnpm test -- path/to/test.spec.ts\n```\n\n#### D. Build Check\n```bash\n# Ensure build succeeds\nnpm run build\n```\n\n#### E. Browser Verification (Frontend)\n\n**For web applications, ALWAYS:**\n\n1. **Start dev server and verify in browser**\n```bash\nnpm run dev\n```\n\n2. **Check browser console for errors**\n   - Open DevTools (F12)\n   - Look for console errors (red messages)\n   - Check network tab for failed requests\n   - Verify no warnings\n\n3. **Test actual functionality**\n   - Click buttons and links\n   - Fill out forms\n   - Verify API calls work\n   - Check responsive design\n\n4. **Common checks:**\n   - No hydration errors\n   - No 404s in network tab\n   - Images load correctly\n   - CSS applies as expected\n\n#### F. Report Findings\n\n**ALWAYS report verification results to user:**\n```markdown\nâœ… Verification Results:\n- Linter: Passed (auto-fixed 3 formatting issues)\n- Type Check: Passed\n- Tests: 12/12 passed\n- Build: Success\n- Browser: âœ… No console errors, functionality works as expected\n```\n\n### 3. Auto-Fix Linter Errors\n\n**When linter errors are found:**\n\n1. **Attempt automatic fix first:**\n```bash\nnpm run lint:fix\n# or\neslint --fix src/\n```\n\n2. **If auto-fix doesn't work, manually fix:**\n   - Read error messages carefully\n   - Fix common issues:\n     - Unused imports â†’ Remove them\n     - Missing dependencies â†’ Add to useEffect deps\n     - Formatting â†’ Run prettier\n     - Naming conventions â†’ Follow project style\n\n3. **Report what was fixed:**\n```markdown\nFixed linter errors:\n- Removed 5 unused imports\n- Added missing React dependencies to useEffect\n- Fixed 12 indentation issues\n```\n\n### 4. Debugging Workflow\n\n**When encountering issues:**\n\n#### Step 1: Reproduce\n- Clearly identify the problem\n- Note exact error messages\n- Identify which file/function fails\n\n#### Step 2: Investigate\n```bash\n# Check logs\nnpm run dev  # Watch console output\n\n# Run specific tests\nnpm test -- --run ComponentName\n\n# Check type errors\ntsc --noEmit\n```\n\n#### Step 3: Ask if Unclear\nUse AskUserQuestion if:\n- Error message is cryptic\n- Root cause is unclear\n- Multiple solutions exist\n- Need user preference on fix approach\n\n#### Step 4: Fix & Verify\n- Implement fix\n- Run full verification workflow (linter, tests, build)\n- Verify in browser if frontend\n- Report results to user\n\n### 5. Proactive Issue Detection\n\n**BEFORE committing code, check:**\n\n- [ ] No console.log() statements left behind\n- [ ] No commented-out code blocks\n- [ ] No TODO comments without context\n- [ ] All imports are used\n- [ ] No hardcoded values that should be config\n- [ ] Error handling is present\n- [ ] Loading states are handled\n- [ ] Edge cases are covered\n\n## Quick Reference Commands\n\n### Verification Commands\n```bash\n# All-in-one verification\nnpm run lint && npm run typecheck && npm test -- --run && npm run build\n\n# Frontend verification\nnpm run dev  # Then manually check browser DevTools\n```\n\n### Common Linter Fixes\n```bash\n# ESLint\neslint --fix src/\n\n# Prettier\nprettier --write src/\n\n# Both\nnpm run format  # if configured\n```\n\n### Browser DevTools Shortcuts\n- `F12` or `Cmd+Option+I` - Open DevTools\n- `Cmd+Shift+C` - Inspect element\n- `Cmd+K` - Clear console\n- `Cmd+R` - Hard reload\n- `Cmd+Shift+R` - Hard reload (clear cache)\n\n## Integration with Development\n\n### When to Use This Skill\n\n**Always active for:**\n- Feature implementation\n- Bug fixes\n- Refactoring\n- Code reviews\n\n**Especially critical for:**\n- Frontend development (requires browser verification)\n- API changes (requires testing)\n- Type changes (requires typecheck)\n- New dependencies (requires build check)\n\n### Workflow Example\n\n```markdown\nUser: \"Add a dark mode toggle to the settings page\"\n\nClaude:\n1. â“ ASK: \"Should dark mode preference persist across sessions?\n   Should it respect system preferences?\"\n\n2. ğŸ’» IMPLEMENT: Create toggle component and theme context\n\n3. âœ… VERIFY:\n   - Run: npm run lint:fix\n   - Run: tsc --noEmit\n   - Run: npm test -- --run\n   - Run: npm run dev\n   - Open browser DevTools\n   - Toggle dark mode\n   - Check for console errors\n   - Verify localStorage persistence\n\n4. ğŸ“Š REPORT:\n   \"âœ… Dark mode toggle implemented and verified:\n   - Linter: Passed (auto-fixed 2 issues)\n   - Types: Passed\n   - Tests: All passing\n   - Browser: No console errors\n   - Functionality: Toggle works, persists in localStorage,\n     respects system preference on first load\"\n```\n\n## Anti-Patterns to Avoid\n\nâŒ **Don't:**\n- Skip verification steps to \"go faster\"\n- Assume code works without testing\n- Ignore linter warnings\n- Commit without running build\n- Forget to check browser console\n- Make assumptions instead of asking\n\nâœ… **Do:**\n- Ask questions proactively\n- Run full verification suite\n- Auto-fix linter errors immediately\n- Test in actual browser\n- Report verification results\n- Fix issues before moving to next task\n\n## Tool Usage\n\n### Priority Order for Verification\n\n1. **Linter** (fastest, catches style issues)\n2. **Type Check** (fast, catches type errors)\n3. **Unit Tests** (medium, catches logic errors)\n4. **Build** (slower, catches integration issues)\n5. **Browser** (slowest, catches runtime issues)\n\nRun them in order - fix issues at each level before proceeding.\n\n## Summary\n\nThis skill transforms Claude Code into a proactive, quality-focused developer that:\n- **Asks** clarifying questions before coding\n- **Verifies** all changes with automated tools\n- **Tests** functionality in real environments\n- **Fixes** issues automatically when possible\n- **Reports** findings transparently\n\nBy following this workflow, you ensure high-quality, well-tested code with minimal back-and-forth."
              },
              {
                "name": "SOLID Principles",
                "description": "This skill should be used when the user asks about \"SOLID principles\", \"single responsibility\", \"open/closed principle\", \"Liskov substitution\", \"interface segregation\", \"dependency inversion\", or when analyzing code for design principle violations. Provides comprehensive guidance for detecting and fixing SOLID violations.",
                "path": "packages/dev-org/skills/solid-principles/SKILL.md",
                "frontmatter": {
                  "name": "SOLID Principles",
                  "description": "This skill should be used when the user asks about \"SOLID principles\", \"single responsibility\", \"open/closed principle\", \"Liskov substitution\", \"interface segregation\", \"dependency inversion\", or when analyzing code for design principle violations. Provides comprehensive guidance for detecting and fixing SOLID violations.",
                  "version": "0.1.0"
                },
                "content": "# SOLID Principles Guide\n\n## Overview\n\nSOLID is a set of five object-oriented design principles that promote maintainable, flexible, and scalable code. This skill provides guidance for detecting violations and applying correct patterns across multiple languages.\n\n## The Five Principles\n\n### S - Single Responsibility Principle (SRP)\n\nA class should have only one reason to change.\n\n**Detection Patterns**:\n- Classes with multiple unrelated methods\n- Files exceeding 200-300 lines\n- Class names containing \"And\", \"Manager\", \"Handler\" doing too much\n- Methods that mix I/O, business logic, and presentation\n\n**Refactoring Strategy**:\n- Extract cohesive functionality into separate classes\n- Use composition to combine smaller components\n- Apply facade pattern for unified interfaces\n\n### O - Open/Closed Principle (OCP)\n\nSoftware entities should be open for extension but closed for modification.\n\n**Detection Patterns**:\n- Switch statements on type that grow with new types\n- Repeated if/else chains checking object types\n- Modifications to existing code for new features\n\n**Refactoring Strategy**:\n- Use polymorphism and inheritance\n- Apply strategy pattern for varying behaviors\n- Implement plugin architectures\n\n### L - Liskov Substitution Principle (LSP)\n\nSubtypes must be substitutable for their base types.\n\n**Detection Patterns**:\n- Overridden methods throwing unexpected exceptions\n- Subclasses that don't use inherited methods\n- Type checks before calling base type methods\n- Empty or no-op implementations of inherited methods\n\n**Refactoring Strategy**:\n- Favor composition over inheritance\n- Use interface segregation\n- Create proper type hierarchies\n\n### I - Interface Segregation Principle (ISP)\n\nClients should not be forced to depend on interfaces they don't use.\n\n**Detection Patterns**:\n- Interfaces with many methods (>5-7)\n- Classes implementing interfaces with unused methods\n- \"Fat\" interfaces that try to do everything\n\n**Refactoring Strategy**:\n- Split large interfaces into smaller, focused ones\n- Use role interfaces\n- Apply interface composition\n\n### D - Dependency Inversion Principle (DIP)\n\nHigh-level modules should not depend on low-level modules; both should depend on abstractions.\n\n**Detection Patterns**:\n- Direct instantiation of concrete classes\n- Hard-coded dependencies\n- Import of implementation details in high-level modules\n\n**Refactoring Strategy**:\n- Introduce interfaces/abstractions\n- Use dependency injection\n- Apply factory patterns\n\n## Violation Severity Levels\n\n| Severity | Description | Action |\n|----------|-------------|--------|\n| Critical | Principle completely ignored, major maintenance issues | Immediate refactoring required |\n| High | Clear violation affecting multiple areas | Schedule refactoring soon |\n| Medium | Partial violation, localized impact | Refactor during related changes |\n| Low | Minor deviation, minimal impact | Note for future improvement |\n\n## Analysis Workflow\n\nTo analyze code for SOLID violations:\n\n1. **Scan for SRP violations first** - Large files and multi-purpose classes\n2. **Check inheritance hierarchies** - LSP and OCP violations\n3. **Examine interfaces** - ISP violations in interface definitions\n4. **Trace dependencies** - DIP violations in module imports\n5. **Document findings** with severity and refactoring suggestions\n\n## Language-Specific Considerations\n\n### TypeScript/JavaScript\n\nFocus on module boundaries, class size, and interface definitions. Check for barrel exports hiding complex dependencies.\n\n### Java\n\nExamine class hierarchies, interface implementations, and package dependencies. Look for \"util\" packages violating SRP.\n\n### Python\n\nCheck module organization, abstract base classes, and duck typing patterns. Verify protocol compliance.\n\n### Go\n\nAnalyze interface definitions (should be small), struct composition, and package dependencies.\n\n### PHP\n\nExamine trait usage, interface implementations, and namespace organization.\n\n## Output Format\n\nWhen reporting SOLID violations, structure findings as:\n\n```markdown\n## SOLID Analysis Results\n\n### Critical Violations\n\n#### [File:Line] Principle Violated\n- **Issue**: Description of the problem\n- **Impact**: Why this matters\n- **Suggestion**: How to fix it\n- **Example**: Code snippet showing fix\n\n### High Severity\n\n...\n```\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed patterns and language-specific examples:\n- **`references/violation-patterns.md`** - Comprehensive violation detection patterns\n- **`references/refactoring-examples.md`** - Before/after code examples\n\n### Integration with Other Skills\n\nCombine with:\n- `code-quality-metrics` for complexity analysis\n- `refactoring-patterns` for specific refactoring techniques"
              }
            ]
          }
        ]
      }
    }
  ]
}