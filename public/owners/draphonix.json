{
  "owner": {
    "id": "draphonix",
    "display_name": "draphonix",
    "type": "Organization",
    "avatar_url": "https://avatars.githubusercontent.com/u/125016619?v=4",
    "url": "https://github.com/draphonix",
    "bio": null,
    "stats": {
      "total_repos": 1,
      "total_plugins": 5,
      "total_commands": 0,
      "total_skills": 5,
      "total_stars": 34,
      "total_forks": 12
    }
  },
  "repos": [
    {
      "full_name": "draphonix/skills",
      "url": "https://github.com/draphonix/skills",
      "description": null,
      "homepage": null,
      "signals": {
        "stars": 34,
        "forks": 12,
        "pushed_at": "2026-01-10T15:34:22Z",
        "created_at": "2026-01-09T15:01:12Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".agents",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills/issue-resolution",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills/issue-resolution/SKILL.md",
          "type": "blob",
          "size": 12424
        },
        {
          "path": ".agents/skills/issue-resolution/mcp.json",
          "type": "blob",
          "size": 160
        },
        {
          "path": ".agents/skills/issue-resolution/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills/issue-resolution/reference/examples.md",
          "type": "blob",
          "size": 9896
        },
        {
          "path": ".agents/skills/issue-resolution/reference/templates.md",
          "type": "blob",
          "size": 8292
        },
        {
          "path": ".agents/skills/knowledge",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills/knowledge/SKILL.md",
          "type": "blob",
          "size": 6184
        },
        {
          "path": ".agents/skills/knowledge/mcp.json",
          "type": "blob",
          "size": 363
        },
        {
          "path": ".agents/skills/knowledge/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills/knowledge/reference/doc-mapping.md",
          "type": "blob",
          "size": 1642
        },
        {
          "path": ".agents/skills/knowledge/reference/extraction-prompts.md",
          "type": "blob",
          "size": 2139
        },
        {
          "path": ".agents/skills/orchestrator",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills/orchestrator/SKILL.md",
          "type": "blob",
          "size": 10990
        },
        {
          "path": ".agents/skills/orchestrator/mcp.json",
          "type": "blob",
          "size": 427
        },
        {
          "path": ".agents/skills/orchestrator/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills/orchestrator/reference/worker-template.md",
          "type": "blob",
          "size": 2541
        },
        {
          "path": ".agents/skills/planning",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills/planning/SKILL.md",
          "type": "blob",
          "size": 12478
        },
        {
          "path": ".agents/skills/planning/mcp.json",
          "type": "blob",
          "size": 599
        },
        {
          "path": ".agents/skills/planning/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills/planning/reference/examples.md",
          "type": "blob",
          "size": 8322
        },
        {
          "path": ".agents/skills/planning/reference/templates.md",
          "type": "blob",
          "size": 6792
        },
        {
          "path": ".agents/skills/worker",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills/worker/SKILL.md",
          "type": "blob",
          "size": 9529
        },
        {
          "path": ".agents/skills/worker/mcp.json",
          "type": "blob",
          "size": 1030
        },
        {
          "path": ".agents/skills/worker/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agents/skills/worker/reference/message-templates.md",
          "type": "blob",
          "size": 3896
        },
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 1313
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 595
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 2844
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/issue-resolution",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/issue-resolution/SKILL.md",
          "type": "blob",
          "size": 12424
        },
        {
          "path": "skills/issue-resolution/mcp.json",
          "type": "blob",
          "size": 160
        },
        {
          "path": "skills/issue-resolution/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/issue-resolution/reference/examples.md",
          "type": "blob",
          "size": 9896
        },
        {
          "path": "skills/issue-resolution/reference/templates.md",
          "type": "blob",
          "size": 8292
        },
        {
          "path": "skills/knowledge",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/knowledge/SKILL.md",
          "type": "blob",
          "size": 6184
        },
        {
          "path": "skills/knowledge/mcp.json",
          "type": "blob",
          "size": 363
        },
        {
          "path": "skills/knowledge/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/knowledge/reference/doc-mapping.md",
          "type": "blob",
          "size": 1642
        },
        {
          "path": "skills/knowledge/reference/extraction-prompts.md",
          "type": "blob",
          "size": 2139
        },
        {
          "path": "skills/orchestrator",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/orchestrator/SKILL.md",
          "type": "blob",
          "size": 10990
        },
        {
          "path": "skills/orchestrator/mcp.json",
          "type": "blob",
          "size": 427
        },
        {
          "path": "skills/orchestrator/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/orchestrator/reference/worker-template.md",
          "type": "blob",
          "size": 2541
        },
        {
          "path": "skills/planning",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/planning/SKILL.md",
          "type": "blob",
          "size": 12478
        },
        {
          "path": "skills/planning/mcp.json",
          "type": "blob",
          "size": 599
        },
        {
          "path": "skills/planning/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/planning/reference/examples.md",
          "type": "blob",
          "size": 8322
        },
        {
          "path": "skills/planning/reference/templates.md",
          "type": "blob",
          "size": 6792
        },
        {
          "path": "skills/worker",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/worker/SKILL.md",
          "type": "blob",
          "size": 9529
        },
        {
          "path": "skills/worker/mcp.json",
          "type": "blob",
          "size": 1030
        },
        {
          "path": "skills/worker/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/worker/reference/message-templates.md",
          "type": "blob",
          "size": 3896
        }
      ],
      "marketplace": {
        "name": "kuckit",
        "version": null,
        "description": null,
        "owner_info": {
          "name": "draphonix",
          "url": "https://github.com/draphonix"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "issue-resolution",
            "description": "Systematically diagnose and fix bugs through triage, reproduction, root cause analysis, and verified fixes",
            "source": "./skills/issue-resolution",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add draphonix/skills",
              "/plugin install issue-resolution@kuckit"
            ],
            "signals": {
              "stars": 34,
              "forks": 12,
              "pushed_at": "2026-01-10T15:34:22Z",
              "created_at": "2026-01-09T15:01:12Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "issue-resolution",
                "description": "Systematically diagnose and fix bugs through triage, reproduction, root cause analysis, and verified fixes. Use when resolving bugs, errors, failing tests, or investigating unexpected behavior.",
                "path": "skills/issue-resolution/SKILL.md",
                "frontmatter": {
                  "name": "issue-resolution",
                  "description": "Systematically diagnose and fix bugs through triage, reproduction, root cause analysis, and verified fixes. Use when resolving bugs, errors, failing tests, or investigating unexpected behavior."
                },
                "content": "# Issue Resolution Pipeline\n\nSystematically resolve issues through iterative diagnosis and verified fixes.\n\n## Pipeline Overview\n\n```\nINPUT → Triage → Reproduction → Root Cause Analysis → Impact → Fix → Verify\n              ◄──────────────►◄────────────────────►\n                    (Iterative loops allowed)\n```\n\n| Phase                  | Purpose                            | Output              |\n| ---------------------- | ---------------------------------- | ------------------- |\n| 0. Triage              | Normalize input, classify severity | Issue Brief         |\n| 1. Reproduction        | Prove the bug, trace code path     | Repro Report + Test |\n| 2. Root Cause Analysis | Find WHY, not just WHERE           | RCA Report          |\n| 3. Impact Assessment   | Blast radius, regression risk      | Impact Report       |\n| 4. Fix Decomposition   | Break into beads                   | .beads/\\*.md        |\n| 5. Verification        | Prove fix works, no regressions    | Passing tests       |\n\n## Phase 0: Triage\n\nNormalize different input types to a structured Issue Brief.\n\n### Input Types\n\n| Type                  | Triage Strategy                       |\n| --------------------- | ------------------------------------- |\n| **Vague report**      | Clarify → Explore → Reproduce         |\n| **Error/Stack trace** | Parse trace → Locate code → Reproduce |\n| **Failing test**      | Run test → Extract assertion → Trace  |\n\n### Vague Report Triage\n\n```\nUser: \"Login is broken\"\n         │\n         ▼\nAsk clarification questions:\n• What error do you see?\n• When did it start working / stop working?\n• What steps trigger it?\n• Specific user/browser/environment?\n         │\n         ▼ (if user can't clarify)\nExplore:\n• mcp__gkg__search_codebase_definitions: Find auth/login related code\n• git log: Recent changes in area\n• Check logs if available\n```\n\n### Error/Stack Trace Triage\n\n```\nParse the stack trace:\n• Extract file:line locations\n• mcp__gkg__get_definition on functions in trace\n• Read surrounding context\n         │\n         ▼\nIdentify reproduction conditions:\n• What input caused this?\n• Can we write a test?\n```\n\n### Failing Test Triage\n\n```\nRun test in isolation:\n• bun test <file> --filter \"<test name>\"\n• Read test file for setup/assertions\n• Check git log: was it passing before?\n         │\n         ▼\nTrace implementation:\n• What code does test exercise?\n• mcp__gkg__get_references on tested function\n• Recent changes to implementation?\n```\n\n### Severity Classification\n\nDetermines reproduction requirements:\n\n| Severity                            | Reproduction Required  |\n| ----------------------------------- | ---------------------- |\n| **CRITICAL** (production, security) | Failing test REQUIRED  |\n| **REGRESSION** (was working)        | Failing test REQUIRED  |\n| **RACE CONDITION** (timing)         | Failing test REQUIRED  |\n| **LOGIC BUG**                       | Failing test PREFERRED |\n| **UI/VISUAL**                       | Manual + screenshot OK |\n| **PERFORMANCE**                     | Benchmark/profile OK   |\n| **QUICK FIX** (obvious cause)       | Manual repro OK        |\n\n### Issue Brief Template\n\nSave to `history/issues/<id>/brief.md`:\n\n```markdown\n# Issue Brief: <Short Title>\n\n**Severity**: CRITICAL / HIGH / MEDIUM / LOW\n**Type**: Regression / Edge case / Race condition / UI / Performance / Other\n**Repro Required**: Failing test / Manual OK\n\n## Symptom\n\n<What is happening>\n\n## Expected Behavior\n\n<What should happen>\n\n## Reproduction\n\n<Steps, test command, or code path>\n\n## Evidence\n\n<Error message, stack trace, test output>\n\n## Affected Area\n\n<Files, modules, features involved>\n\n## Timeline\n\n<When started, recent changes if known>\n```\n\n## Phase 1: Reproduction\n\nProve the bug exists and trace the code path.\n\n### If Failing Test Required\n\n```bash\n# Create test file\n# packages/<area>/src/__tests__/<feature>.regression.test.ts\n\n# Test should:\n# 1. Set up conditions that trigger bug\n# 2. Assert expected behavior (currently fails)\n# 3. Be deterministic\n```\n\n### Reproduction Checklist\n\n- [ ] Bug is reproducible on demand\n- [ ] Exact error/behavior captured\n- [ ] Minimal reproduction (simplest case that fails)\n- [ ] Code path identified (stack trace or tracing)\n\n### Code Path Tracing\n\n```\nmcp__gkg__get_definition     → Find where error originates\nmcp__gkg__get_references     → Find callers\ngit blame <file>       → Who changed it, when\ngit log -p <file>      → What changed recently\n```\n\n### Repro Report Template\n\nSave to `history/issues/<id>/repro.md`:\n\n```markdown\n# Reproduction Report: <Issue Title>\n\n## Reproduction Method\n\n☐ Failing test: `<test file and name>`\n☐ Manual: <steps>\n\n## Error/Behavior Captured\n\n<Exact error message, stack trace>\n\n## Code Path\n\n1. Entry: `<file>:<line>` - <function>\n2. Calls: `<file>:<line>` - <function>\n3. Fails at: `<file>:<line>` - <reason>\n\n## Recent Changes (if relevant)\n\n- <commit>: <summary>\n```\n\n## Phase 2: Root Cause Analysis\n\nFind WHY the bug happens, not just WHERE.\n\n### RCA Framework\n\n```\nSTEP 1: Generate hypotheses (3-5)\n         │\n         ▼\nSTEP 2: Gather evidence for/against each\n         │\n         ▼\nSTEP 3: Eliminate hypotheses\n         │\n         ▼\nSTEP 4: Confirm root cause\n```\n\n### Bug Type → RCA Strategy\n\n| Bug Type            | Strategy                  | Key Tools                       |\n| ------------------- | ------------------------- | ------------------------------- |\n| **Regression**      | Find breaking change      | `git bisect`, `git blame`       |\n| **Edge case**       | Analyze boundary inputs   | Type inspection, boundary tests |\n| **Race condition**  | Trace async flow          | Timing logs, async analysis     |\n| **Data corruption** | Trace state changes       | Data flow analysis              |\n| **External dep**    | Check version/API changes | Changelogs, API docs            |\n\n### Oracle for RCA\n\n**Hypothesis Generation:**\n\n```\noracle(\n  task: \"Generate root cause hypotheses\",\n  context: \"\"\"\n    Symptom: <error>\n    Code path: <trace>\n    Recent changes: <git log>\n\n    Generate 3-5 hypotheses ranked by likelihood.\n    For each, what evidence would support/refute it?\n  \"\"\",\n  files: [\"<affected files>\"]\n)\n```\n\n**Hypothesis Validation:**\n\n```\noracle(\n  task: \"Validate root cause hypothesis\",\n  context: \"\"\"\n    Hypothesis: <proposed cause>\n    Evidence: <gathered evidence>\n\n    1. Does evidence support or refute?\n    2. Explain causal chain: cause → symptom\n    3. What would confirm this?\n  \"\"\",\n  files: [\"<relevant files>\"]\n)\n```\n\n### Iteration: RCA → Reproduction Loop\n\nIf hypothesis needs more evidence:\n\n```\nIN RCA: \"Need timing logs to confirm race condition\"\n    │\n    ▼\nBACK TO REPRO:\n• Add instrumentation\n• Run with specific conditions\n• Capture new evidence\n    │\n    ▼\nRETURN TO RCA with new evidence\n```\n\n### RCA Report Template\n\nSave to `history/issues/<id>/rca.md`:\n\n```markdown\n# Root Cause Analysis: <Issue Title>\n\n## Iteration: <N>\n\n## Hypotheses Considered\n\n### Hypothesis A: <Description>\n\n- **Likelihood**: HIGH / MEDIUM / LOW\n- **Supporting evidence**: ...\n- **Refuting evidence**: ...\n- **Verdict**: ✓ CONFIRMED / ✗ ELIMINATED\n\n### Hypothesis B: ...\n\n## Root Cause (Confirmed)\n\n**Cause**: <Clear statement>\n\n**Causal chain**:\n\n1. <Step> leads to\n2. <Step> leads to\n3. <Symptom>\n\n## Why This Happened\n\n<Underlying reason - missing validation, wrong assumption, etc.>\n\n## Fix Approach\n\n**Immediate**: <What to change>\n**Preventive**: <How to prevent similar bugs>\n```\n\n## Phase 3: Impact Assessment\n\nBefore fixing, understand blast radius.\n\n### Impact Analysis\n\n```\nmcp__gkg__get_references <affected function>\n    → Who else calls this?\n\nGrep for related patterns\n    → Similar code that might have same bug?\n\nReview test coverage\n    → What tests cover this area?\n```\n\n### Regression Risk\n\n| Factor              | Risk Level |\n| ------------------- | ---------- |\n| High usage function | HIGH       |\n| Shared utility      | HIGH       |\n| Public API change   | HIGH       |\n| Internal helper     | LOW        |\n| Isolated module     | LOW        |\n\n### Spike for Complex Fixes\n\nIf fix approach is uncertain:\n\n```bash\nbd create \"Spike: Validate fix approach for <issue>\" -t task -p 0\n```\n\nExecute via MULTI_AGENT_WORKFLOW, write to `.spikes/<issue-id>/`.\n\n### Impact Report Template\n\nSave to `history/issues/<id>/impact.md`:\n\n```markdown\n# Impact Assessment: <Issue Title>\n\n## Blast Radius\n\n### Direct Impact\n\n- <File/function directly changed>\n\n### Callers Affected\n\n- <List from mcp__gkg__get_references>\n\n### Related Code\n\n- <Similar patterns that may need same fix>\n\n## Regression Risk\n\n**Level**: HIGH / MEDIUM / LOW\n**Reason**: <Why this risk level>\n\n## Test Coverage\n\n- Existing tests: <list>\n- Tests to add: <list>\n\n## Fix Validation\n\n☐ Spike completed (if needed): `.spikes/<id>/`\n☐ Fix approach validated\n```\n\n## Phase 4: Fix Decomposition\n\nBreak fix into beads.\n\n### Simple Fix (Single Bead)\n\n```bash\nbd create \"Fix: <issue title>\" -t bug -p <priority>\n```\n\nBead includes:\n\n- Root cause reference\n- Fix implementation\n- Test (failing → passing)\n- Docs update (if behavior change)\n\n### Complex Fix (Multiple Beads)\n\n```bash\nbd create \"Epic: Fix <issue>\" -t epic -p <priority>\nbd create \"Add regression test for <issue>\" -t task --blocks <epic>\nbd create \"Fix <component A>\" -t bug --blocks <epic> --deps <test>\nbd create \"Fix <component B>\" -t bug --blocks <epic> --deps <test>\nbd create \"Update docs for <behavior change>\" -t task --blocks <epic> --deps <fix-a>,<fix-b>\n```\n\n### Fix Bead Template\n\n```markdown\n# Fix: <Issue Title>\n\n**Type**: bug\n**Priority**: <0-4>\n**Fixes**: <issue reference>\n\n## Root Cause\n\n<From RCA report>\n\n## Fix Implementation\n\n<What to change and why>\n\n## Files to Modify\n\n- `<file>`: <change description>\n\n## Acceptance Criteria\n\n- [ ] Regression test passes\n- [ ] Original symptom no longer reproducible\n- [ ] No new test failures\n- [ ] `bun run check-types` passes\n- [ ] `bun run build` passes\n```\n\n## Phase 5: Verification\n\nProve fix works and nothing else broke.\n\n### Verification Checklist\n\n```bash\n# 1. Regression test passes\nbun test <regression-test-file>\n\n# 2. Original symptom gone\n<manual verification or test>\n\n# 3. No new failures\nbun run test\n\n# 4. Types and build\nbun run check-types\nbun run build\n```\n\n### Iteration: Verify → RCA Loop\n\nIf fix doesn't work:\n\n```\nTest still fails after fix\n    │\n    ▼\nRoot cause was wrong or incomplete\n    │\n    ▼\nBACK TO RCA:\n• Eliminate current hypothesis\n• Generate new hypotheses\n• Update RCA Report with iteration\n```\n\n### Verify → Impact Loop\n\nIf fix causes regressions:\n\n```\nNew test failures after fix\n    │\n    ▼\nFix has unintended side effects\n    │\n    ▼\nBACK TO IMPACT:\n• Reassess blast radius\n• Consider alternative fix approach\n```\n\n## Loop Limits\n\nPrevent infinite iteration:\n\n| Loop         | Soft Limit | Hard Limit | At Hard Limit               |\n| ------------ | ---------- | ---------- | --------------------------- |\n| RCA → Repro  | 2          | 4          | Escalate / pair debug       |\n| RCA → Triage | 1          | 2          | Re-evaluate original report |\n| Verify → RCA | 2          | 3          | Oracle deep review          |\n\n## Quick Reference\n\n### Tool Selection\n\n| Need                  | Tool                            |\n| --------------------- | ------------------------------- |\n| Parse stack trace     | Read + mcp**gkg**get_definition |\n| Find callers          | mcp**gkg**get_references        |\n| Recent changes        | git log, git blame              |\n| Binary search commits | git bisect                      |\n| Reasoning about cause | oracle                          |\n| Validate fix approach | Spike via MULTI_AGENT_WORKFLOW  |\n\n### Common Mistakes\n\n- **Fixing symptom, not cause** → Leads to recurrence\n- **Skipping reproduction** → Can't verify fix\n- **No regression test** → Bug returns later\n- **Ignoring impact** → Fix breaks other things\n- **Not iterating** → Wrong diagnosis persists"
              }
            ]
          },
          {
            "name": "knowledge",
            "description": "Extracts knowledge from Amp threads and updates project docs",
            "source": "./skills/knowledge",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add draphonix/skills",
              "/plugin install knowledge@kuckit"
            ],
            "signals": {
              "stars": 34,
              "forks": 12,
              "pushed_at": "2026-01-10T15:34:22Z",
              "created_at": "2026-01-09T15:01:12Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "knowledge",
                "description": "Extracts knowledge from Amp threads and updates project docs. Use when asked to document recent work, sync docs after an epic, summarize what changed, or update AGENTS.md from thread history.",
                "path": "skills/knowledge/SKILL.md",
                "frontmatter": {
                  "name": "knowledge",
                  "description": "Extracts knowledge from Amp threads and updates project docs. Use when asked to document recent work, sync docs after an epic, summarize what changed, or update AGENTS.md from thread history."
                },
                "content": "# Knowledge Extraction & Documentation Sync\n\nExtracts knowledge from Amp threads and synchronizes project documentation.\n\n## Pipeline\n\n```\nREQUEST → THREADS → TOPICS → CODE → DOCS\n```\n\n| Phase        | Action                     | Tools                  |\n| ------------ | -------------------------- | ---------------------- |\n| 1. Discover  | Find threads by query/time | `find_thread`          |\n| 2. Extract   | Parallel topic extraction  | `Task` + `read_thread` |\n| 3. Verify    | Ground topics in code      | `gkg`, `finder`        |\n| 4. Map       | Find target docs           | `Read`, `Grep`         |\n| 5. Reconcile | Compare all sources        | `Oracle`               |\n| 6. Apply     | Surgical updates           | `edit_file`, `mermaid` |\n\n## Phase 1: Discover Threads\n\nStart from user request:\n\n```bash\n# \"Document last 2 weeks\"\nfind_thread after:2w\n\n# \"Summarize auth work\"\nfind_thread \"authentication\"\n\n# \"What touched the SDK?\"\nfind_thread file:packages/sdk\n\n# Combined\nfind_thread \"refactor\" after:1w file:packages/api\n```\n\n## Phase 2: Extract Topics\n\nSpawn parallel `Task` agents (2-3 threads each):\n\n```\nTask prompt:\n\"Read threads [T-xxx, T-yyy] using read_thread.\nGoal: 'Extract topics, decisions, changes'\n\nReturn JSON:\n{\n  'topics': [{\n    'name': 'topic name',\n    'threads': ['T-xxx'],\n    'summary': '1-2 sentences',\n    'decisions': ['...'],\n    'patterns': ['...'],\n    'changes': ['...']\n  }]\n}\"\n```\n\nCollect outputs → Oracle synthesizes:\n\n```\nOracle: \"Cluster these extractions. Deduplicate.\nLatest thread wins conflicts. Output unified topic list.\"\n```\n\nSee `reference/extraction-prompts.md` for full templates.\n\n## Phase 3: Verify Against Code\n\nFor each topic, verify claims:\n\n```\nTopic: \"Added retry logic to API client\"\n\n1. finder \"retry logic API client\"\n   → finds src/api/client.ts\n\n2. gkg__search_codebase_definitions \"retry\"\n   → RetryPolicy class at L45\n\n3. gkg__get_references \"RetryPolicy\"\n   → 12 usages across 4 files\n\n→ Confirmed: topic matches code\n```\n\n| Claim Type        | Verification                                |\n| ----------------- | ------------------------------------------- |\n| \"Added X\"         | `mcp__gkg__search_codebase_definitions \"X\"` |\n| \"Refactored Y\"    | `finder \"Y\"` → `mcp__gkg__get_references`   |\n| \"Changed pattern\" | `mcp__morph_mcp__warpgrep_codebase_search`  |\n| \"Updated config\"  | `mcp__gkg__repo_map` on config paths        |\n\n## Phase 4: Map to Docs\n\nDiscover existing documentation:\n\n```bash\n# Structure\ngkg__repo_map on docs/, .claude/skills/, */AGENTS.md\n\n# Find existing mentions\nGrep \"topic keyword\" docs/\nGrep \"RetryPolicy\" AGENTS.md\n```\n\nRead target files before updating:\n\n```\nRead docs/ARCHITECTURE.md\n→ Note structure, sections, voice\n→ Identify insertion point\n```\n\nSee `reference/doc-mapping.md` for target file conventions.\n\n## Phase 5: Reconcile\n\nOracle compares three sources:\n\n```\nOracle prompt:\n\"Compare:\n1. TOPICS: [extracted]\n2. CODE: [verified state]\n3. DOCS: [current content]\n\nOutput:\n- GAPS: topics not in docs\n- STALE: docs ≠ code\n- UPDATES: [{file, section, change, rationale}]\"\n```\n\n## Phase 6: Apply Updates\n\n**Text updates**:\n\n```\nRead target → edit_file with precise changes\nPreserve structure and voice\n```\n\n**Architecture diagrams**:\n\n```\nmermaid with citations:\n{\n  \"code\": \"flowchart LR\\n  A[Client] --> B[RetryPolicy]\",\n  \"citations\": {\n    \"Client\": \"file:///src/api/client.ts#L10\",\n    \"RetryPolicy\": \"file:///src/api/retry.ts#L45\"\n  }\n}\n```\n\n**Parallel updates**: Multiple unrelated files → spawn Task per file.\n\n## Concrete Example\n\nUser: \"Document the auth refactor from last week\"\n\n```\n1. find_thread \"auth\" after:7d\n   → [T-abc, T-def, T-ghi]\n\n2. Task agents extract (parallel):\n   Agent A: T-abc → {topics: [{name: \"JWT migration\"}]}\n   Agent B: T-def, T-ghi → {topics: [{name: \"session cleanup\"}]}\n\n3. Oracle clusters:\n   → \"Auth Refactor\" with sub-topics\n\n4. Verify:\n   mcp__gkg__search_codebase_definitions \"JWTService\"\n   → confirmed at packages/auth/jwt.ts\n\n5. Map docs:\n   Grep \"authentication\" AGENTS.md\n   → Section exists at line 45\n\n6. Oracle reconciles:\n   → Gap: JWT migration not documented\n   → Update: AGENTS.md auth section\n\n7. Apply:\n   edit_file AGENTS.md add JWT details\n   mermaid auth flow diagram\n```\n\n## Tool Quick Reference\n\n| Goal                | Tool                                                   |\n| ------------------- | ------------------------------------------------------ |\n| Find threads        | `find_thread query\\|after:Xd\\|file:path`               |\n| Read thread         | `read_thread` with focused goal                        |\n| Parallel extraction | `Task` (spawn multiple)                                |\n| Find definitions    | `mcp__gkg__search_codebase_definitions`                |\n| Find references     | `mcp__gkg__get_references`                             |\n| Semantic search     | `finder` or `mcp__morph_mcp__warpgrep_codebase_search` |\n| Area overview       | `mcp__gkg__repo_map`                                   |\n| Synthesis           | `Oracle`                                               |\n| Read doc            | `Read`                                                 |\n| Search docs         | `Grep`                                                 |\n| Update doc          | `edit_file`                                            |\n| Diagram             | `mermaid` with citations                               |\n\n## Quality Checklist\n\n```\n- [ ] Topics verified against code (GKG)\n- [ ] Existing docs read before updating\n- [ ] Changes surgical, not wholesale\n- [ ] Mermaid diagrams have citations\n- [ ] Terminology matches existing docs\n```\n\n## Troubleshooting\n\n**Thread not found**: Try topic keywords, widen date range\n\n**Too many threads**: Add `file:` filter, narrow dates\n\n**Topic ≠ code**: Code is truth; note as \"planned\" or \"historical\"\n\n**Doc structure unclear**: Read first, match existing patterns"
              }
            ]
          },
          {
            "name": "orchestrator",
            "description": "Plan and coordinate multi-agent bead execution with parallel workers",
            "source": "./skills/orchestrator",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add draphonix/skills",
              "/plugin install orchestrator@kuckit"
            ],
            "signals": {
              "stars": 34,
              "forks": 12,
              "pushed_at": "2026-01-10T15:34:22Z",
              "created_at": "2026-01-09T15:01:12Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "orchestrator",
                "description": "Plan and coordinate multi-agent bead execution. Use when starting a new epic, assigning tracks to agents, or monitoring parallel work progress.",
                "path": "skills/orchestrator/SKILL.md",
                "frontmatter": {
                  "name": "orchestrator",
                  "description": "Plan and coordinate multi-agent bead execution. Use when starting a new epic, assigning tracks to agents, or monitoring parallel work progress."
                },
                "content": "# Orchestrator Skill: Autonomous Multi-Agent Coordination\n\nThis skill spawns and monitors parallel worker agents that execute beads autonomously.\n\n**Prerequisite**: Run the `planning` skill first to generate `history/<feature>/execution-plan.md`.\n\n## Architecture (Mode B: Autonomous)\n\n```\n┌─────────────────────────────────────────────────────────────────────────────┐\n│                              ORCHESTRATOR                                   │\n│                              (This Agent)                                   │\n├─────────────────────────────────────────────────────────────────────────────┤\n│  1. Read execution-plan.md (from planning skill)                            │\n│  2. Initialize Agent Mail                                                   │\n│  3. Spawn worker subagents via Task tool                                    │\n│  4. Monitor progress via Agent Mail                                         │\n│  5. Handle cross-track blockers                                             │\n│  6. Announce completion                                                     │\n└─────────────────────────────────────────────────────────────────────────────┘\n           │\n           │ Task tool spawns parallel workers\n           ▼\n┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐\n│  BlueLake        │  │  GreenCastle     │  │  RedStone        │\n│  Track 1         │  │  Track 2         │  │  Track 3         │\n│  [a → b → c]     │  │  [x → y]         │  │  [m → n → o]     │\n├──────────────────┤  ├──────────────────┤  ├──────────────────┤\n│  For each bead:  │  │  For each bead:  │  │  For each bead:  │\n│  • Reserve files │  │  • Reserve files │  │  • Reserve files │\n│  • Do work       │  │  • Do work       │  │  • Do work       │\n│  • Report mail   │  │  • Report mail   │  │  • Report mail   │\n│  • Next bead     │  │  • Next bead     │  │  • Next bead     │\n└──────────────────┘  └──────────────────┘  └──────────────────┘\n           │                   │                   │\n           └───────────────────┼───────────────────┘\n                               ▼\n                    ┌─────────────────────┐\n                    │     Agent Mail      │\n                    │  ─────────────────  │\n                    │  Epic Thread:       │\n                    │  • Progress reports │\n                    │  • Bead completions │\n                    │  • Blockers         │\n                    │                     │\n                    │  Track Threads:     │\n                    │  • Bead context     │\n                    │  • Learnings        │\n                    └─────────────────────┘\n```\n\n---\n\n## Phase 1: Read Execution Plan\n\nUse the **Read** tool to load the execution plan:\n\n- **path**: `history/<feature>/execution-plan.md`\n\nExtract:\n\n- `EPIC_ID` - the epic bead id\n- `TRACKS` - array of {agent_name, beads[], file_scope}\n- `CROSS_DEPS` - any cross-track dependencies\n\n---\n\n## Phase 2: Initialize Agent Mail\n\n### Step 1: Ensure project exists\n\n**Tool**: `mcp__mcp_agent_mail__ensure_project`\n\n| Parameter   | Value                     |\n| ----------- | ------------------------- |\n| `human_key` | `<absolute-project-path>` |\n\n### Step 2: Register orchestrator identity\n\n**Tool**: `mcp__mcp_agent_mail__register_agent`\n\n| Parameter          | Value                                 |\n| ------------------ | ------------------------------------- |\n| `project_key`      | `<absolute-project-path>`             |\n| `name`             | `<OrchestratorName>` (e.g. `GoldFox`) |\n| `program`          | `amp`                                 |\n| `model`            | `<model>`                             |\n| `task_description` | `Orchestrator for <epic-id>`          |\n\n---\n\n## Phase 3: Spawn Worker Subagents\n\n**Spawn all workers in parallel using the Task tool.**\n\nFor each track, invoke:\n\n**Tool**: `Task`\n\n| Parameter     | Value                                         |\n| ------------- | --------------------------------------------- |\n| `description` | `Worker <AgentName>: Track N - <description>` |\n| `prompt`      | See `reference/worker-template.md`            |\n\n### Example Task prompt for Track 1\n\n```\nYou are agent BlueLake working on Track 1 of epic bd-42.\n\n## Setup\n1. Read /path/to/project/AGENTS.md for tool preferences\n2. Load the worker skill: skill worker\n\n## Your Track\nBeads to complete IN ORDER: bd-43, bd-44, bd-45\nFile scope: packages/sdk/**\n\n## Protocol for EACH bead:\n\n### Start Bead\n1. mcp__mcp_agent_mail__register_agent with name=\"BlueLake\", task_description=\"<bead-id>\"\n2. mcp__mcp_agent_mail__summarize_thread with thread_id=\"track:BlueLake:bd-42\"\n3. mcp__mcp_agent_mail__file_reservation_paths with paths=[\"packages/sdk/**\"], reason=\"<bead-id>\"\n4. Run: bd update <bead-id> --status in_progress\n\n### Work on Bead\n- Use preferred tools from AGENTS.md (gkg for exploration, morph for edits)\n- Check inbox periodically with mcp__mcp_agent_mail__fetch_inbox\n\n### Complete Bead\n1. Run: bd close <bead-id> --reason \"Summary of work\"\n2. mcp__mcp_agent_mail__send_message:\n   - to: [\"GoldFox\"]\n   - thread_id: \"bd-42\"\n   - subject: \"[<bead-id>] COMPLETE\"\n   - body_md: \"Done: <summary>. Next: <next-bead-id>\"\n3. mcp__mcp_agent_mail__send_message (context for next bead):\n   - to: [\"BlueLake\"]\n   - thread_id: \"track:BlueLake:bd-42\"\n   - subject: \"<bead-id> Complete - Context for next\"\n   - body_md: \"## Learnings\\n- ...\\n## Gotchas\\n- ...\"\n4. mcp__mcp_agent_mail__release_file_reservations\n\n### Continue to Next Bead\n- Loop back to \"Start Bead\" with next bead in track\n- Read your track thread for context from previous bead\n\n## When Track Complete\nmcp__mcp_agent_mail__send_message:\n- to: [\"GoldFox\"]\n- thread_id: \"bd-42\"\n- subject: \"[Track 1] COMPLETE\"\n- body_md: \"All beads done. Summary: ...\"\n\nReturn a summary of all work completed.\n```\n\n---\n\n## Phase 4: Monitor Progress\n\nWhile workers execute, monitor via Agent Mail.\n\n### Check Epic Thread for Updates\n\n**Tool**: `mcp__mcp_agent_mail__search_messages`\n\n| Parameter     | Value       |\n| ------------- | ----------- |\n| `project_key` | `<path>`    |\n| `query`       | `<epic-id>` |\n| `limit`       | `20`        |\n\n### Check for Blockers\n\n**Tool**: `mcp__mcp_agent_mail__fetch_inbox`\n\n| Parameter        | Value                |\n| ---------------- | -------------------- |\n| `project_key`    | `<path>`             |\n| `agent_name`     | `<OrchestratorName>` |\n| `urgent_only`    | `true`               |\n| `include_bodies` | `true`               |\n\n### Check Bead Status\n\n```bash\nbv --robot-triage --graph-root <epic-id> 2>/dev/null | jq '.quick_ref'\n```\n\n---\n\n## Phase 5: Handle Cross-Track Issues\n\n### If Worker Reports Blocker\n\n**Tool**: `mcp__mcp_agent_mail__reply_message`\n\n| Parameter     | Value                |\n| ------------- | -------------------- |\n| `project_key` | `<path>`             |\n| `message_id`  | `<blocker-msg-id>`   |\n| `sender_name` | `<OrchestratorName>` |\n| `body_md`     | `Resolution: ...`    |\n\n### If File Conflict\n\n**Tool**: `mcp__mcp_agent_mail__send_message`\n\n| Parameter     | Value                                      |\n| ------------- | ------------------------------------------ |\n| `project_key` | `<path>`                                   |\n| `sender_name` | `<OrchestratorName>`                       |\n| `to`          | `[\"<HolderAgent>\"]`                        |\n| `thread_id`   | `<epic-id>`                                |\n| `subject`     | `File conflict resolution`                 |\n| `body_md`     | `<Worker> needs <files>. Can you release?` |\n\n---\n\n## Phase 6: Epic Completion\n\nWhen all workers report track complete:\n\n### Verify All Done\n\n```bash\nbv --robot-triage --graph-root <epic-id> 2>/dev/null | jq '.quick_ref.open_count'\n# Should be 0\n```\n\n### Send Completion Summary\n\n**Tool**: `mcp__mcp_agent_mail__send_message`\n\n| Parameter     | Value                                     |\n| ------------- | ----------------------------------------- |\n| `project_key` | `<path>`                                  |\n| `sender_name` | `<OrchestratorName>`                      |\n| `to`          | `[\"BlueLake\", \"GreenCastle\", \"RedStone\"]` |\n| `thread_id`   | `<epic-id>`                               |\n| `subject`     | `[<epic-id>] EPIC COMPLETE`               |\n| `body_md`     | See template below                        |\n\n```markdown\n## Epic Complete: <title>\n\n### Track Summaries\n\n- Track 1 (BlueLake): <summary>\n- Track 2 (GreenCastle): <summary>\n- Track 3 (RedStone): <summary>\n\n### Deliverables\n\n- <what was built>\n\n### Learnings\n\n- <key insights>\n```\n\n### Close Epic\n\n```bash\nbd close <epic-id> --reason \"All tracks complete\"\n```\n\n---\n\n## Quick Reference\n\n| Phase      | Tool / Command                                                               |\n| ---------- | ---------------------------------------------------------------------------- |\n| Read Plan  | `Read` tool → `history/<feature>/execution-plan.md`                          |\n| Initialize | `mcp__mcp_agent_mail__ensure_project`, `mcp__mcp_agent_mail__register_agent` |\n| Spawn      | `Task` tool for each track (parallel)                                        |\n| Monitor    | `mcp__mcp_agent_mail__fetch_inbox`, `mcp__mcp_agent_mail__search_messages`   |\n| Resolve    | `mcp__mcp_agent_mail__reply_message` for blockers                            |\n| Complete   | Verify all done, send summary, `bd close`                                    |\n\n---\n\n## Additional Resources\n\n- **Worker Prompt Template**: See `reference/worker-template.md` for the full template with variable substitution"
              }
            ]
          },
          {
            "name": "planning",
            "description": "Generate comprehensive plans through discovery, synthesis, verification, and decomposition",
            "source": "./skills/planning",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add draphonix/skills",
              "/plugin install planning@kuckit"
            ],
            "signals": {
              "stars": 34,
              "forks": 12,
              "pushed_at": "2026-01-10T15:34:22Z",
              "created_at": "2026-01-09T15:01:12Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "planning",
                "description": "Generate comprehensive plans for new features by exploring the codebase, synthesizing approaches, validating with spikes, and decomposing into beads. Use when asked to plan a feature, create a roadmap, or design an implementation approach.",
                "path": "skills/planning/SKILL.md",
                "frontmatter": {
                  "name": "planning",
                  "description": "Generate comprehensive plans for new features by exploring the codebase, synthesizing approaches, validating with spikes, and decomposing into beads. Use when asked to plan a feature, create a roadmap, or design an implementation approach."
                },
                "content": "# Feature Planning Pipeline\n\nGenerate quality plans through systematic discovery, synthesis, verification, and decomposition.\n\n## Pipeline Overview\n\n```\nUSER REQUEST → Worktree Setup → Discovery → Synthesis → Verification → Decomposition → Validation → Track Planning → Ready Plan\n```\n\n| Phase             | Tool                                     | Output                              |\n| ----------------- | ---------------------------------------- | ----------------------------------- |\n| 0. Worktree Setup | bd worktree                              | Isolated feature branch             |\n| 1. Discovery      | Parallel sub-agents, gkg, Librarian, exa | Discovery Report                    |\n| 2. Synthesis      | Oracle                                   | Approach + Risk Map                 |\n| 3. Verification   | Spikes via MULTI_AGENT_WORKFLOW          | Validated Approach + Learnings      |\n| 4. Decomposition  | file-beads skill                         | .beads/\\*.md files                  |\n| 5. Validation     | bv + Oracle                              | Validated dependency graph          |\n| 6. Track Planning | bv --robot-plan                          | Execution plan with parallel tracks |\n\n## Phase 0: Worktree Setup (Mandatory)\n\n**Why**: Beads are tracked in git. Without worktrees, branch switching causes conflicts when PRs merge.\n\n**Always create a worktree before creating beads for a feature:**\n\n```bash\n# From main repo root\nbd worktree create .worktrees/<feature-name> --branch feature/<feature-name>\ncd .worktrees/<feature-name>\n```\n\nThis creates a redirect file so all beads operations share the main repo's `.beads/` database. No merge conflicts when PR lands.\n\n**After PR merges:**\n\n```bash\ncd <main-repo>\ngit pull\nbd worktree remove .worktrees/<feature-name>\n```\n\n**Skip worktree only if**: Quick fix on main that won't create new beads.\n\n## Phase 1: Discovery (Parallel Exploration)\n\nLaunch parallel sub-agents to gather codebase intelligence:\n\n```\nTask() → Agent A: Architecture snapshot (gkg repo_map)\nTask() → Agent B: Pattern search (find similar existing code)\nTask() → Agent C: Constraints (package.json, tsconfig, deps)\nLibrarian → External patterns (\"how do similar projects do this?\")\nexa → Library docs (if external integration needed)\n```\n\n### Discovery Report Template\n\nSave to `history/<feature>/discovery.md`:\n\n```markdown\n# Discovery Report: <Feature Name>\n\n## Architecture Snapshot\n\n- Relevant packages: ...\n- Key modules: ...\n- Entry points: ...\n\n## Existing Patterns\n\n- Similar implementation: <file> does X using Y pattern\n- Reusable utilities: ...\n- Naming conventions: ...\n\n## Technical Constraints\n\n- Node version: ...\n- Key dependencies: ...\n- Build requirements: ...\n\n## External References\n\n- Library docs: ...\n- Similar projects: ...\n```\n\n## Phase 2: Synthesis (Oracle)\n\nFeed Discovery Report to Oracle for gap analysis:\n\n```\noracle(\n  task: \"Analyze gap between current codebase and feature requirements\",\n  context: \"Discovery report attached. User wants: <feature>\",\n  files: [\"history/<feature>/discovery.md\"]\n)\n```\n\nOracle produces:\n\n1. **Gap Analysis** - What exists vs what's needed\n2. **Approach Options** - 1-3 strategies with tradeoffs\n3. **Risk Assessment** - LOW / MEDIUM / HIGH per component\n\n### Risk Classification\n\n| Level  | Criteria                      | Verification                 |\n| ------ | ----------------------------- | ---------------------------- |\n| LOW    | Pattern exists in codebase    | Proceed                      |\n| MEDIUM | Variation of existing pattern | Interface sketch, type-check |\n| HIGH   | Novel or external integration | Spike required               |\n\n### Risk Indicators\n\n```\nPattern exists in codebase? ─── YES → LOW base\n                            └── NO  → MEDIUM+ base\n\nExternal dependency? ─── YES → HIGH\n                     └── NO  → Check blast radius\n\nBlast radius >5 files? ─── YES → HIGH\n                       └── NO  → MEDIUM\n```\n\nSave to `history/<feature>/approach.md`:\n\n```markdown\n# Approach: <Feature Name>\n\n## Gap Analysis\n\n| Component | Have | Need | Gap |\n| --------- | ---- | ---- | --- |\n| ...       | ...  | ...  | ... |\n\n## Recommended Approach\n\n<Description>\n\n### Alternative Approaches\n\n1. <Option A> - Tradeoff: ...\n2. <Option B> - Tradeoff: ...\n\n## Risk Map\n\n| Component   | Risk | Reason           | Verification |\n| ----------- | ---- | ---------------- | ------------ |\n| Stripe SDK  | HIGH | New external dep | Spike        |\n| User entity | LOW  | Follows existing | Proceed      |\n```\n\n## Phase 3: Verification (Risk-Based)\n\n### For HIGH Risk Items → Create Spike Beads\n\nSpikes are mini-plans executed via MULTI_AGENT_WORKFLOW:\n\n```bash\nbd create \"Spike: <question to answer>\" -t epic -p 0\nbd create \"Spike: Test X\" -t task --blocks <spike-epic>\nbd create \"Spike: Verify Y\" -t task --blocks <spike-epic>\n```\n\n### Spike Bead Template\n\n```markdown\n# Spike: <specific question>\n\n**Time-box**: 30 minutes\n**Output location**: .spikes/<spike-id>/\n\n## Question\n\nCan we <specific technical question>?\n\n## Success Criteria\n\n- [ ] Working throwaway code exists\n- [ ] Answer documented (yes/no + details)\n- [ ] Learnings captured for main plan\n\n## On Completion\n\nClose with: `bd close <id> --reason \"YES: <approach>\" or \"NO: <blocker>\"`\n```\n\n### Execute Spikes\n\nUse the MULTI_AGENT_WORKFLOW:\n\n1. `bv --robot-plan` to parallelize spikes\n2. `Task()` per spike with time-box\n3. Workers write to `.spikes/<feature>/<spike-id>/`\n4. Close with learnings: `bd close <id> --reason \"<result>\"`\n\n### Aggregate Spike Results\n\n```\noracle(\n  task: \"Synthesize spike results and update approach\",\n  context: \"Spikes completed. Results: ...\",\n  files: [\"history/<feature>/approach.md\"]\n)\n```\n\nUpdate approach.md with validated learnings.\n\n## Phase 4: Decomposition (file-beads skill)\n\nLoad the file-beads skill and create beads with embedded learnings:\n\n```bash\nskill(\"file-beads\")\n```\n\n### Bead Requirements\n\nEach bead MUST include:\n\n- **Spike learnings** embedded in description (if applicable)\n- **Reference to .spikes/ code** for HIGH risk items\n- **Clear acceptance criteria**\n- **File scope** for track assignment\n\n### Example Bead with Learnings\n\n```markdown\n# Implement Stripe webhook handler\n\n## Context\n\nSpike bd-12 validated: Stripe SDK works with our Node version.\nSee `.spikes/billing-spike/webhook-test/` for working example.\n\n## Learnings from Spike\n\n- Must use `stripe.webhooks.constructEvent()` for signature verification\n- Webhook secret stored in `STRIPE_WEBHOOK_SECRET` env var\n- Raw body required (not parsed JSON)\n\n## Acceptance Criteria\n\n- [ ] Webhook endpoint at `/api/webhooks/stripe`\n- [ ] Signature verification implemented\n- [ ] Events: `checkout.session.completed`, `invoice.paid`\n```\n\n## Phase 5: Validation\n\n### Run bv Analysis\n\n```bash\nbv --robot-suggest   # Find missing dependencies\nbv --robot-insights  # Detect cycles, bottlenecks\nbv --robot-priority  # Validate priorities\n```\n\n### Fix Issues\n\n```bash\nbd dep add <from> <to>      # Add missing deps\nbd dep remove <from> <to>   # Break cycles\nbd update <id> --priority X # Adjust priorities\n```\n\n### Oracle Final Review\n\n```\noracle(\n  task: \"Review plan completeness and clarity\",\n  context: \"Plan ready. Check for gaps, unclear beads, missing deps.\",\n  files: [\".beads/\"]\n)\n```\n\n## Phase 6: Track Planning\n\nThis phase creates an **execution-ready plan** so the orchestrator can spawn workers immediately without re-analyzing beads.\n\n### Step 1: Get Parallel Tracks\n\n```bash\nbv --robot-plan 2>/dev/null | jq '.plan.tracks'\n```\n\n### Step 2: Assign File Scopes\n\nFor each track, determine the file scope based on beads in that track:\n\n```bash\n# For each bead, check which files it touches\nbd show <bead-id>  # Look at description for file hints\n```\n\n**Rules:**\n\n- File scopes must NOT overlap between tracks\n- Use glob patterns: `packages/sdk/**`, `apps/server/**`\n- If overlap unavoidable, merge into single track\n\n### Step 3: Generate Agent Names\n\nAssign unique adjective+noun names to each track:\n\n- BlueLake, GreenCastle, RedStone, PurpleBear, etc.\n- Names are memorable identifiers, NOT role descriptions\n\n### Step 4: Create Execution Plan\n\nSave to `history/<feature>/execution-plan.md`:\n\n```markdown\n# Execution Plan: <Feature Name>\n\nEpic: <epic-id>\nGenerated: <date>\n\n## Tracks\n\n| Track | Agent       | Beads (in order)      | File Scope        |\n| ----- | ----------- | --------------------- | ----------------- |\n| 1     | BlueLake    | bd-10 → bd-11 → bd-12 | `packages/sdk/**` |\n| 2     | GreenCastle | bd-20 → bd-21         | `packages/cli/**` |\n| 3     | RedStone    | bd-30 → bd-31 → bd-32 | `apps/server/**`  |\n\n## Track Details\n\n### Track 1: BlueLake - <track-description>\n\n**File scope**: `packages/sdk/**`\n**Beads**:\n\n1. `bd-10`: <title> - <brief description>\n2. `bd-11`: <title> - <brief description>\n3. `bd-12`: <title> - <brief description>\n\n### Track 2: GreenCastle - <track-description>\n\n**File scope**: `packages/cli/**`\n**Beads**:\n\n1. `bd-20`: <title> - <brief description>\n2. `bd-21`: <title> - <brief description>\n\n### Track 3: RedStone - <track-description>\n\n**File scope**: `apps/server/**`\n**Beads**:\n\n1. `bd-30`: <title> - <brief description>\n2. `bd-31`: <title> - <brief description>\n3. `bd-32`: <title> - <brief description>\n\n## Cross-Track Dependencies\n\n- Track 2 can start after bd-11 (Track 1) completes\n- Track 3 has no cross-track dependencies\n\n## Key Learnings (from Spikes)\n\nEmbedded in beads, but summarized here for orchestrator reference:\n\n- <learning 1>\n- <learning 2>\n```\n\n### Validation\n\nBefore finalizing, verify:\n\n```bash\n# No cycles in the graph\nbv --robot-insights 2>/dev/null | jq '.Cycles'\n\n# All beads assigned to tracks\nbv --robot-plan 2>/dev/null | jq '.plan.unassigned'\n```\n\n## Output Artifacts\n\n| Artifact          | Location                              | Purpose                            |\n| ----------------- | ------------------------------------- | ---------------------------------- |\n| Discovery Report  | `history/<feature>/discovery.md`      | Codebase snapshot                  |\n| Approach Document | `history/<feature>/approach.md`       | Strategy + risks                   |\n| Spike Code        | `.spikes/<feature>/`                  | Reference implementations          |\n| Spike Learnings   | Embedded in beads                     | Context for workers                |\n| Beads             | `.beads/*.md`                         | Executable work items              |\n| Execution Plan    | `history/<feature>/execution-plan.md` | Track assignments for orchestrator |\n\n## Quick Reference\n\n### Tool Selection\n\n| Need               | Tool                                                                        |\n| ------------------ | --------------------------------------------------------------------------- |\n| Codebase structure | `mcp__gkg__repo_map`                                                        |\n| Find definitions   | `mcp__gkg__search_codebase_definitions`                                     |\n| Find usages        | `mcp__gkg__get_references`                                                  |\n| Semantic search    | `mcp__morph_mcp__warpgrep_codebase_search`                                  |\n| External patterns  | `librarian`                                                                 |\n| Library docs       | `mcp__MCP_DOCKER__resolve-library-id` → `mcp__MCP_DOCKER__get-library-docs` |\n| Web research       | `mcp__MCP_DOCKER__web_search_exa`                                           |\n| Gap analysis       | `oracle`                                                                    |\n| Create beads       | `skill(\"file-beads\")` + `bd create`                                         |\n| Validate graph     | `bv --robot-*`                                                              |\n\n### Common Mistakes\n\n- **Skipping discovery** → Plan misses existing patterns\n- **No risk assessment** → Surprises during execution\n- **No spikes for HIGH risk** → Blocked workers\n- **Missing learnings in beads** → Workers re-discover same issues\n- **No bv validation** → Broken dependency graph"
              }
            ]
          },
          {
            "name": "worker",
            "description": "Execute beads autonomously within a track with context persistence via Agent Mail",
            "source": "./skills/worker",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add draphonix/skills",
              "/plugin install worker@kuckit"
            ],
            "signals": {
              "stars": 34,
              "forks": 12,
              "pushed_at": "2026-01-10T15:34:22Z",
              "created_at": "2026-01-09T15:01:12Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "worker",
                "description": "Execute beads autonomously within a track. Handles bead-to-bead context persistence via Agent Mail, uses preferred tools from AGENTS.md, and reports progress to orchestrator.",
                "path": "skills/worker/SKILL.md",
                "frontmatter": {
                  "name": "worker",
                  "description": "Execute beads autonomously within a track. Handles bead-to-bead context persistence via Agent Mail, uses preferred tools from AGENTS.md, and reports progress to orchestrator."
                },
                "content": "# Worker Skill: Autonomous Bead Execution\n\nExecutes beads within an assigned track, maintaining context via Agent Mail.\n\n```\n┌─────────────────────────────────────────────────────────────────────────────┐\n│  TRACK LOOP (repeat for each bead in track)                                 │\n│                                                                             │\n│  ┌──────────────┐   ┌──────────────┐   ┌──────────────┐                    │\n│  │ START BEAD   │ → │ WORK ON BEAD │ → │ COMPLETE     │ ──┐                │\n│  │              │   │              │   │ BEAD         │   │                │\n│  │ • Read ctx   │   │ • Implement  │   │ • Report     │   │                │\n│  │ • Reserve    │   │ • Use tools  │   │ • Save ctx   │   │                │\n│  │ • Claim      │   │ • Check mail │   │ • Release    │   │                │\n│  └──────────────┘   └──────────────┘   └──────────────┘   │                │\n│         ▲                                                  │                │\n│         └──────────────────────────────────────────────────┘                │\n└─────────────────────────────────────────────────────────────────────────────┘\n```\n\n---\n\n## Initial Setup (Once Per Track)\n\n### 1. Register Agent Identity\n\n**Tool**: `mcp__mcp_agent_mail__register_agent`\n\n| Parameter          | Value                     |\n| ------------------ | ------------------------- |\n| `project_key`      | `<absolute-project-path>` |\n| `program`          | `amp`                     |\n| `model`            | `<your-model>`            |\n| `task_description` | `Track N: <description>`  |\n\n_Name auto-generated if omitted (e.g., BlueLake)_\n\n### 2. Understand Your Assignment\n\nFrom orchestrator: **Track number**, **Beads (in order)**, **File scope**, **Epic thread** (`<epic-id>`), **Track thread** (`track:<AgentName>:<epic-id>`)\n\n---\n\n## Bead Execution Loop\n\n### Step 1: Start Bead\n\n#### 1.1 Read Context from Previous Bead\n\n**Tool**: `mcp__mcp_agent_mail__summarize_thread`\n\n| Parameter          | Value                         |\n| ------------------ | ----------------------------- |\n| `project_key`      | `<path>`                      |\n| `thread_id`        | `track:<AgentName>:<epic-id>` |\n| `include_examples` | `true`                        |\n\n#### 1.2 Check Inbox\n\n**Tool**: `mcp__mcp_agent_mail__fetch_inbox`\n\n| Parameter        | Value         |\n| ---------------- | ------------- |\n| `project_key`    | `<path>`      |\n| `agent_name`     | `<AgentName>` |\n| `include_bodies` | `true`        |\n\n#### 1.3 Reserve Files\n\n**Tool**: `mcp__mcp_agent_mail__file_reservation_paths`\n\n| Parameter     | Value                      |\n| ------------- | -------------------------- |\n| `project_key` | `<path>`                   |\n| `agent_name`  | `<AgentName>`              |\n| `paths`       | `[\"<your-file-scope>/**\"]` |\n| `ttl_seconds` | `7200`                     |\n| `exclusive`   | `true`                     |\n| `reason`      | `<bead-id>`                |\n\nIf conflict → report blocker (see `reference/message-templates.md`)\n\n#### 1.4 Claim Bead\n\n```bash\nbd update <bead-id> --status in_progress\nbd show <bead-id>\n```\n\n---\n\n### Step 2: Work on Bead\n\n#### 2.1 Explore Codebase\n\n**Tool**: `mcp__gkg__search_codebase_definitions`\n\n| Parameter               | Value         |\n| ----------------------- | ------------- |\n| `search_terms`          | `[\"<terms>\"]` |\n| `project_absolute_path` | `<path>`      |\n\n**Tool**: `mcp__gkg__get_references`\n\n| Parameter            | Value      |\n| -------------------- | ---------- |\n| `absolute_file_path` | `<file>`   |\n| `definition_name`    | `<symbol>` |\n\n#### 2.2 Make Changes\n\n**Tool**: `mcp__morph_mcp__edit_file`\n\n| Parameter     | Value                                 |\n| ------------- | ------------------------------------- |\n| `path`        | `<file>`                              |\n| `code_edit`   | Use `// ... existing code ...` syntax |\n| `instruction` | `<what you're changing>`              |\n\nAfter edits: `get_diagnostics(\"<edited-file>\")`\n\n#### 2.3 For UI Work\n\nLoad `frontend-design` skill first, then follow this workflow:\n\n##### 2.3.1 Search for Components\n\n**Tool**: `mcp__shadcn__search_items_in_registries`\n\n| Parameter    | Value         |\n| ------------ | ------------- |\n| `registries` | `[\"@shadcn\"]` |\n| `query`      | `<component>` |\n\n##### 2.3.2 View Component Details\n\n**Tool**: `mcp__shadcn__view_items_in_registries`\n\n| Parameter | Value                     |\n| --------- | ------------------------- |\n| `items`   | `[\"@shadcn/<component>\"]` |\n\n##### 2.3.3 Get Usage Examples\n\n**Tool**: `mcp__shadcn__get_item_examples_from_registries`\n\n| Parameter    | Value              |\n| ------------ | ------------------ |\n| `registries` | `[\"@shadcn\"]`      |\n| `query`      | `<component>-demo` |\n\n##### 2.3.4 Install Component\n\n**Tool**: `mcp__shadcn__get_add_command_for_items`\n\n| Parameter | Value                     |\n| --------- | ------------------------- |\n| `items`   | `[\"@shadcn/<component>\"]` |\n\nThen run the returned command (e.g., `npx shadcn@latest add button`).\n\n##### 2.3.5 Verify Installation\n\n**Tool**: `mcp__shadcn__get_audit_checklist`\n\n| Parameter | Value                             |\n| --------- | --------------------------------- |\n| `reason`  | `Verify <component> installation` |\n\n#### 2.4 Check Inbox Periodically\n\nUse `mcp__mcp_agent_mail__fetch_inbox` with `since_ts` parameter.\n\n#### 2.5 If Blocker or Interface Change\n\nSee `reference/message-templates.md` for message formats.\n\n---\n\n### Step 3: Complete Bead\n\n#### 3.1 Verify & Check\n\n```bash\nget_diagnostics(\"<project-path>\")\nbun run check-types\nbun run build\n```\n\n#### 3.2 Close Bead\n\n```bash\nbd close <bead-id> --reason \"<concise summary>\"\n```\n\n#### 3.3 Report to Orchestrator\n\n**Tool**: `mcp__mcp_agent_mail__send_message`\n\n| Parameter     | Value                                |\n| ------------- | ------------------------------------ |\n| `project_key` | `<path>`                             |\n| `sender_name` | `<AgentName>`                        |\n| `to`          | `[\"<OrchestratorName>\"]`             |\n| `thread_id`   | `<epic-id>`                          |\n| `subject`     | `[<bead-id>] COMPLETE`               |\n| `body_md`     | See `reference/message-templates.md` |\n\n#### 3.4 Save Context for Next Bead\n\nSelf-addressed message to track thread. See `reference/message-templates.md`.\n\n#### 3.5 Release Reservations\n\n**Tool**: `mcp__mcp_agent_mail__release_file_reservations`\n\n| Parameter     | Value         |\n| ------------- | ------------- |\n| `project_key` | `<path>`      |\n| `agent_name`  | `<AgentName>` |\n\n---\n\n### Step 4: Continue to Next Bead\n\nLoop back to Step 1. Context from Step 3.4 available via track thread.\n\n---\n\n## Track Completion\n\nWhen all beads done, send track complete message (see `reference/message-templates.md`), then return:\n\n```\nTrack N (<AgentName>) Complete:\n- Completed beads: a, b, c\n- Summary: <what was built>\n- All acceptance criteria met\n```\n\n---\n\n## Quick Reference\n\n### Bead Lifecycle Checklist\n\n```\nSTART: summarize_thread → fetch_inbox → file_reservation_paths → bd update\nWORK:  gkg tools → morph edits → get_diagnostics → check inbox\nDONE:  verify → bd close → send_message (orchestrator) → send_message (self) → release\nNEXT:  loop to START\n```\n\n### Thread Reference\n\n| Thread                        | Purpose                                 |\n| ----------------------------- | --------------------------------------- |\n| `<epic-id>`                   | Cross-agent, orchestrator communication |\n| `track:<AgentName>:<epic-id>` | Your personal context persistence       |\n\n### Tool Reference\n\n| Task              | Tool                                             |\n| ----------------- | ------------------------------------------------ |\n| Find code         | `mcp__gkg__search_codebase_definitions`          |\n| Get definition    | `mcp__gkg__get_definition`                       |\n| Find usages       | `mcp__gkg__get_references`                       |\n| Edit file         | `mcp__morph_mcp__edit_file`                      |\n| Search components | `mcp__shadcn__search_items_in_registries`        |\n| View components   | `mcp__shadcn__view_items_in_registries`          |\n| Get examples      | `mcp__shadcn__get_item_examples_from_registries` |\n| Install component | `mcp__shadcn__get_add_command_for_items`         |\n| Verify install    | `mcp__shadcn__get_audit_checklist`               |\n\n---\n\n## Additional Resources\n\n- **Message Templates**: `reference/message-templates.md` for all Agent Mail message formats"
              }
            ]
          }
        ]
      }
    }
  ]
}