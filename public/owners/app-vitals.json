{
  "owner": {
    "id": "app-vitals",
    "display_name": "App Vitals",
    "type": "Organization",
    "avatar_url": "https://avatars.githubusercontent.com/u/84165920?v=4",
    "url": "https://github.com/app-vitals",
    "bio": null,
    "stats": {
      "total_repos": 1,
      "total_plugins": 1,
      "total_commands": 3,
      "total_skills": 1,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "app-vitals/marketplace",
      "url": "https://github.com/app-vitals/marketplace",
      "description": "marketplace for claude code plugins",
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-09T20:12:17Z",
        "created_at": "2025-12-22T14:43:54Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 717
        },
        {
          "path": "CLAUDE.md",
          "type": "blob",
          "size": 2428
        },
        {
          "path": "LICENSE",
          "type": "blob",
          "size": 1067
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 793
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-orchestrator",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-orchestrator/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-orchestrator/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 477
        },
        {
          "path": "plugins/ralph-orchestrator/README.md",
          "type": "blob",
          "size": 11196
        },
        {
          "path": "plugins/ralph-orchestrator/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-orchestrator/commands/prd.md",
          "type": "blob",
          "size": 5641
        },
        {
          "path": "plugins/ralph-orchestrator/commands/ralph-freeform.md",
          "type": "blob",
          "size": 7569
        },
        {
          "path": "plugins/ralph-orchestrator/commands/ralph.md",
          "type": "blob",
          "size": 7498
        },
        {
          "path": "plugins/ralph-orchestrator/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/SKILL.md",
          "type": "blob",
          "size": 15744
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/assets",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/assets/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/assets/templates/agents_template.md",
          "type": "blob",
          "size": 3479
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/assets/templates/plan_template.json",
          "type": "blob",
          "size": 2110
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/assets/templates/plan_template.md",
          "type": "blob",
          "size": 1616
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/assets/templates/prd_template.json",
          "type": "blob",
          "size": 1868
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/assets/templates/prd_template.md",
          "type": "blob",
          "size": 1174
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/assets/templates/progress_template.md",
          "type": "blob",
          "size": 1795
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/references/escape-hatches.md",
          "type": "blob",
          "size": 8061
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/references/prompt-patterns.md",
          "type": "blob",
          "size": 6653
        },
        {
          "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/references/story-sizing.md",
          "type": "blob",
          "size": 7104
        }
      ],
      "marketplace": {
        "name": "app-vitals-marketplace",
        "version": null,
        "description": "A marketplace of Claude Code plugins",
        "owner_info": {
          "name": "app-vitals",
          "email": "dave@app-vitals.com"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "ralph-orchestrator",
            "description": "Structured orchestration for Ralph loops with PRD support, progress tracking, TDD guidance, and escape hatches",
            "source": "./plugins/ralph-orchestrator",
            "category": "development",
            "version": "1.0.0",
            "author": {
              "name": "app-vitals",
              "email": "dave@app-vitals.com"
            },
            "install_commands": [
              "/plugin marketplace add app-vitals/marketplace",
              "/plugin install ralph-orchestrator@app-vitals-marketplace"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2026-01-09T20:12:17Z",
              "created_at": "2025-12-22T14:43:54Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/prd",
                "description": "Create a Product Requirements Document (PRD) for Ralph loop execution. Interactive workflow that guides through clarifying questions, generates right-sized user stories, and outputs both human-readable PRD.md and machine-readable prd.json.",
                "path": "plugins/ralph-orchestrator/commands/prd.md",
                "frontmatter": {
                  "name": "prd",
                  "description": "Create a Product Requirements Document (PRD) for Ralph loop execution. Interactive workflow that guides through clarifying questions, generates right-sized user stories, and outputs both human-readable PRD.md and machine-readable prd.json."
                },
                "content": "# Create PRD\n\nCreate a structured Product Requirements Document for Ralph loop execution.\n\n**Task name**: $1 (optional - will ask if not provided)\n\n## Workflow\n\n### Step 1: Gather Basic Information\n\nAsk these questions ONE AT A TIME (don't overwhelm with all at once):\n\n1. **Task Name** (if not provided via $1):\n   ```\n   What should I call this task?\n   Use a short, descriptive name like: \"todo-api\", \"auth-refactor\", \"payment-integration\"\n   ```\n\n2. **Problem Statement**:\n   ```\n   What problem are you trying to solve? (1-2 sentences)\n   Be specific - this becomes the mission statement for the Ralph loop.\n   ```\n\n3. **Success Criteria**:\n   ```\n   How will we know when this is DONE?\n   List specific, testable criteria. These become your completion conditions.\n\n   Good examples:\n   - \"All tests pass with >80% coverage\"\n   - \"API responds in <200ms\"\n   - \"User can complete checkout flow end-to-end\"\n   - \"No TypeScript errors\"\n\n   Bad examples:\n   - \"It works\" (too vague)\n   - \"Good performance\" (not measurable)\n   ```\n\n4. **Scope Boundaries**:\n   ```\n   What is OUT OF SCOPE? What should NOT be attempted?\n   This prevents scope creep during the loop.\n\n   Examples:\n   - \"Authentication (handled separately)\"\n   - \"Database migrations (manual process)\"\n   - \"UI styling (will be done later)\"\n   ```\n\n5. **Verification Method**:\n   ```\n   How should each story be verified?\n\n   Options:\n   A) Run tests (provide command, e.g., \"npm test\", \"pytest\")\n   B) Type check (provide command, e.g., \"npx tsc --noEmit\")\n   C) Manual browser verification (describe what to check)\n   D) API testing (describe endpoints to test)\n   E) Other (describe verification approach)\n   ```\n\n### Step 2: Generate User Stories\n\nBased on the information gathered, generate 3-7 user stories that:\n\n**Sizing Rules**:\n- Each story should be completable in 1-3 Ralph iterations\n- If a story seems bigger, break it down\n- Good size: \"Add a database column\", \"Create one API endpoint\", \"Add input validation\"\n- Too big: \"Build the entire dashboard\", \"Implement full authentication\"\n\n**Dependency Order**:\n- Stories execute sequentially, so dependencies must flow forward\n- Database changes before API endpoints before UI\n- Infrastructure before features\n\n**Each story must have**:\n- Clear acceptance criteria (testable, not vague)\n- Verification method (how to prove it's done)\n- No subjective language (\"works correctly\", \"good UX\")\n\nFormat each story as:\n```json\n{\n  \"id\": \"US-001\",\n  \"title\": \"Short descriptive title\",\n  \"description\": \"As a [user/developer], I want [feature] so that [benefit]\",\n  \"acceptance_criteria\": [\n    \"Specific testable criterion 1\",\n    \"Specific testable criterion 2\"\n  ],\n  \"verification\": \"How to verify this story is done\",\n  \"passes\": false,\n  \"notes\": \"\"\n}\n```\n\n### Step 3: Review with User\n\nPresent the generated user stories and ask:\n\n```\nHere are the user stories I've generated:\n\n1. US-001: [title]\n   - [acceptance criteria summary]\n\n2. US-002: [title]\n   - [acceptance criteria summary]\n\n[... etc ...]\n\nTotal: [N] stories\n\nWould you like to:\n1. Approve these stories as-is\n2. Add more stories\n3. Remove or combine stories\n4. Adjust acceptance criteria\n5. Reorder stories (change dependencies)\n```\n\nIterate until the user approves the story list.\n\n### Step 4: Create PRD Files\n\nCreate the working directory:\n```bash\nmkdir -p .claude/ralph/<task-name>/\n```\n\nWrite two files:\n\n**PRD.md** (human-readable):\nUse the template from `./skills/ralph-orchestrator/assets/templates/prd_template.md` as a guide, filling in:\n- Task name\n- Timestamp\n- Problem statement\n- Success criteria\n- Out of scope items\n- Verification method\n- All user stories with their details\n\n**prd.json** (machine-readable):\n```json\n{\n  \"name\": \"<task-name>\",\n  \"created_at\": \"<ISO timestamp>\",\n  \"status\": \"draft\",\n  \"problem_statement\": \"<from user>\",\n  \"success_criteria\": [\"<criterion 1>\", \"<criterion 2>\"],\n  \"out_of_scope\": [\"<item 1>\", \"<item 2>\"],\n  \"verification\": {\n    \"method\": \"<test|typecheck|browser|api|other>\",\n    \"command\": \"<if applicable>\",\n    \"description\": \"<description>\"\n  },\n  \"stories\": [\n    {\n      \"id\": \"US-001\",\n      \"title\": \"...\",\n      \"description\": \"...\",\n      \"acceptance_criteria\": [\"...\", \"...\"],\n      \"verification\": \"...\",\n      \"passes\": false,\n      \"notes\": \"\"\n    }\n  ]\n}\n```\n\n### Step 5: Confirm and Provide Next Steps\n\n```\nPRD created successfully!\n\nLocation: .claude/ralph/<task-name>/\nFiles:\n  - PRD.md (human-readable document - review and edit as needed)\n  - prd.json (machine-readable for Ralph loop)\n\nSummary:\n  - Task: <task-name>\n  - Stories: <count>\n  - Verification: <method>\n\nTo start the Ralph loop:\n  /ralph <task-name>\n\nTo start with a specific story:\n  /ralph <task-name> --story US-001\n\nTo set iteration limit:\n  /ralph <task-name> --max-iterations 30\n\nTo edit the PRD before starting:\n  Open .claude/ralph/<task-name>/PRD.md in your editor\n```\n\n## Tips for Good PRDs\n\n**Right-sized stories**:\n- Can be completed in 1-3 Ralph iterations\n- Have clear, testable acceptance criteria\n- Build on previous stories logically\n\n**Clear verification**:\n- Every story must be verifiable\n- Prefer automated verification (tests, type checks)\n- Manual verification is okay but should be specific\n\n**Realistic scope**:\n- Start smaller than you think you need\n- Can always add stories later\n- Out of scope items prevent creep"
              },
              {
                "name": "/ralph-freeform",
                "description": "Create a structured freeform plan for Ralph loop execution. Interactive workflow that gathers context, asks clarifying questions, generates phases with verification steps, and outputs both human-readable PLAN.md and machine-readable plan.json. Use this for simpler tasks that don't need full user stories.",
                "path": "plugins/ralph-orchestrator/commands/ralph-freeform.md",
                "frontmatter": {
                  "name": "ralph-freeform",
                  "description": "Create a structured freeform plan for Ralph loop execution. Interactive workflow that gathers context, asks clarifying questions, generates phases with verification steps, and outputs both human-readable PLAN.md and machine-readable plan.json. Use this for simpler tasks that don't need full user stories."
                },
                "content": "# Create Freeform Plan\n\nCreate a structured plan for freeform Ralph loop execution. Simpler than PRD - uses phases instead of user stories.\n\n**Task name**: $1 (optional - will ask if not provided)\n\n## When to Use This vs /prd\n\n| Use `/ralph-freeform` | Use `/prd` |\n|----------------------|------------|\n| Single goal/feature | Multiple features |\n| 2-5 phases of work | 5+ user stories |\n| Simpler verification | Complex acceptance criteria |\n| \"Add a health endpoint\" | \"Build authentication system\" |\n| \"Fix the login bug\" | \"Implement user management\" |\n\n## Workflow\n\n### Step 1: Gather Context Automatically\n\nBefore asking questions, gather context from the codebase:\n\n```bash\n# Check for project type indicators\nls package.json pyproject.toml Cargo.toml go.mod Gemfile 2>/dev/null\n```\n\nIdentify:\n- **Language/framework**: From config files (package.json â†’ Node.js, etc.)\n- **Test framework**: From test directories or config\n- **Existing patterns**: From directory structure\n\nUse this context to:\n- Suggest appropriate verification commands\n- Generate relevant phases\n- Avoid asking obvious questions\n\n### Step 2: Ask Clarifying Questions\n\nAsk these questions ONE AT A TIME (don't overwhelm):\n\n1. **Task Name** (if not provided via $1):\n   ```\n   What should I call this task?\n   Use a short, descriptive name like: \"health-endpoint\", \"fix-login-bug\", \"add-validation\"\n   ```\n\n2. **Goal**:\n   ```\n   What are you trying to accomplish? (1-2 sentences)\n   Be specific - this becomes the mission statement for the Ralph loop.\n\n   Examples:\n   - \"Add a /health endpoint that returns server status\"\n   - \"Fix the bug where login fails on mobile Safari\"\n   - \"Add input validation to the user registration form\"\n   ```\n\n3. **Success Criteria**:\n   ```\n   How will we know when this is DONE?\n   List 2-4 specific, testable criteria.\n\n   Good examples:\n   - \"GET /health returns {status: 'ok'} with 200\"\n   - \"Login works in Safari mobile (tested manually)\"\n   - \"Invalid emails show error message, form doesn't submit\"\n   - \"All existing tests still pass\"\n\n   Bad examples:\n   - \"It works\" (too vague)\n   - \"Good UX\" (not testable)\n   ```\n\n4. **Verification Method**:\n   Based on gathered context, suggest options:\n   ```\n   How should completion be verified?\n\n   Based on your project, I suggest:\n   A) Run tests: `npm test` (detected Jest config)\n   B) Type check: `npx tsc --noEmit`\n   C) Manual verification: [describe what to check]\n   D) Combination of above\n   E) Other: [describe]\n   ```\n\n5. **Out of Scope** (optional):\n   ```\n   Anything that should NOT be attempted? (press Enter to skip)\n\n   Examples:\n   - \"Don't change the database schema\"\n   - \"Don't refactor other endpoints\"\n   - \"Skip browser testing for now\"\n   ```\n\n### Step 3: Generate Phases\n\nBased on the goal, automatically generate 2-5 phases that:\n\n**Phase Generation Rules**:\n- Each phase should be completable in 1-2 Ralph iterations\n- Phases build on each other logically\n- Each phase has clear verification\n- First phase is often \"setup/understand current state\"\n- Last phase is often \"verify everything works together\"\n\n**Example for \"Add health endpoint\"**:\n```\nPhase 1: Understand Current Setup\n- Review existing route structure\n- Identify where health endpoint should go\n- Check for existing health check patterns\nVerify: Can describe the route structure\n\nPhase 2: Implement Health Endpoint\n- Create health route handler\n- Return {status: \"ok\", timestamp: Date.now()}\n- Add route to main router\nVerify: curl localhost:3000/health returns 200\n\nPhase 3: Add Tests\n- Write integration test for health endpoint\n- Test success case\n- Test response format\nVerify: npm test passes\n\nPhase 4: Final Verification\n- Run full test suite\n- Test endpoint manually\n- Verify no regressions\nVerify: All tests pass, endpoint works\n```\n\n### Step 4: Review with User\n\nPresent the generated plan:\n\n```\nHere's the plan I've generated:\n\n## Goal\n<goal statement>\n\n## Success Criteria\n- [ ] <criterion 1>\n- [ ] <criterion 2>\n\n## Phases\n\n### P1: <phase name>\nSteps:\n- <step 1>\n- <step 2>\nVerify: <verification>\n\n### P2: <phase name>\n...\n\n## Verification\nMethod: <method>\nCommand: <command if applicable>\n\n## Out of Scope\n- <item> (or \"None specified\")\n\n---\n\nWould you like to:\n1. Approve this plan as-is\n2. Add/remove phases\n3. Adjust steps within a phase\n4. Change verification method\n5. Start over with different goal\n```\n\nIterate until user approves.\n\n### Step 5: Create Plan Files\n\nCreate the working directory:\n```bash\nmkdir -p .claude/ralph/<task-name>/\n```\n\nWrite two files:\n\n**PLAN.md** (human-readable):\n```markdown\n# Plan: <task-name>\n\n**Created**: <timestamp>\n**Status**: draft\n**Type**: freeform\n\n## Goal\n\n<goal statement>\n\n## Success Criteria\n\n- [ ] <criterion 1>\n- [ ] <criterion 2>\n- [ ] <criterion 3>\n\n## Verification\n\n**Method**: <method>\n**Command**: `<command>` (if applicable)\n**Description**: <what success looks like>\n\n## Out of Scope\n\n- <item 1>\n- <item 2>\n\n## Phases\n\n### P1: <phase name>\n\n**Steps**:\n- [ ] <step 1>\n- [ ] <step 2>\n\n**Verify**: <how to verify phase complete>\n\n**Status**: pending\n\n---\n\n### P2: <phase name>\n\n...\n\n## Completion Checklist\n\nBefore outputting the completion promise, verify:\n- [ ] All phases completed\n- [ ] All success criteria met\n- [ ] Verification passes\n- [ ] No known regressions\n```\n\n**plan.json** (machine-readable):\n```json\n{\n  \"name\": \"<task-name>\",\n  \"created_at\": \"<ISO timestamp>\",\n  \"status\": \"draft\",\n  \"type\": \"plan\",\n  \"goal\": \"<goal statement>\",\n  \"success_criteria\": [\n    \"<criterion 1>\",\n    \"<criterion 2>\"\n  ],\n  \"verification\": {\n    \"method\": \"<test|typecheck|manual|api|other>\",\n    \"command\": \"<command if applicable>\",\n    \"description\": \"<what success looks like>\"\n  },\n  \"out_of_scope\": [\n    \"<item 1>\"\n  ],\n  \"phases\": [\n    {\n      \"id\": \"P1\",\n      \"name\": \"<phase name>\",\n      \"steps\": [\n        \"<step 1>\",\n        \"<step 2>\"\n      ],\n      \"verification\": \"<how to verify>\",\n      \"complete\": false,\n      \"notes\": \"\"\n    },\n    {\n      \"id\": \"P2\",\n      \"name\": \"<phase name>\",\n      \"steps\": [\"...\"],\n      \"verification\": \"...\",\n      \"complete\": false,\n      \"notes\": \"\"\n    }\n  ]\n}\n```\n\n### Step 6: Confirm and Provide Next Steps\n\n```\nPlan created successfully!\n\nLocation: .claude/ralph/<task-name>/\nFiles:\n  - PLAN.md (human-readable - review and edit as needed)\n  - plan.json (machine-readable for Ralph loop)\n\nSummary:\n  - Task: <task-name>\n  - Goal: <goal summary>\n  - Phases: <count>\n  - Verification: <method>\n\nTo start the Ralph loop:\n  /ralph <task-name>\n\nTo set iteration limit:\n  /ralph <task-name> --max-iterations 20\n\nTo edit the plan before starting:\n  Open .claude/ralph/<task-name>/PLAN.md in your editor\n```\n\n## Tips for Good Freeform Plans\n\n**Right-sized phases**:\n- 1-2 Ralph iterations per phase\n- Clear, focused objective\n- Concrete verification\n\n**Clear goal statement**:\n- One sentence\n- Specific outcome\n- No vague words like \"improve\" or \"better\"\n\n**Testable success criteria**:\n- Each criterion has yes/no answer\n- Prefer automated verification\n- 2-4 criteria is ideal\n\n**When to use /prd instead**:\n- Task has 5+ distinct features\n- Need detailed acceptance criteria per feature\n- Multiple stakeholder concerns\n- Long-running project work"
              },
              {
                "name": "/ralph",
                "description": "Start an orchestrated Ralph loop with full scaffolding. Supports PRD-based execution (from /prd), plan-based execution (from /ralph-freeform), or raw freeform prompts. Includes progress tracking, TDD guidance, verification steps, and escape hatches.",
                "path": "plugins/ralph-orchestrator/commands/ralph.md",
                "frontmatter": {
                  "name": "ralph",
                  "description": "Start an orchestrated Ralph loop with full scaffolding. Supports PRD-based execution (from /prd), plan-based execution (from /ralph-freeform), or raw freeform prompts. Includes progress tracking, TDD guidance, verification steps, and escape hatches."
                },
                "content": "# Ralph Orchestrator\n\nStart a structured Ralph loop with progress tracking, TDD guidance, and escape hatches.\n\n**Arguments**: $ARGUMENTS\n\nParse the arguments to extract:\n- `<task-name>` or `<freeform-prompt>` - Required, first positional argument\n- `--max-iterations N` - Optional, defaults to 50\n- `--story US-XXX` - Optional, start with specific story (PRD mode)\n- `--phase P1` - Optional, start with specific phase (Plan mode)\n- `--freeform` - Optional, force raw freeform mode even if PRD/plan exists\n\n## Workflow\n\n### Step 1: Determine Input Mode\n\nCheck for existing task files:\n\n```bash\n# Check for PRD or Plan files\nls .claude/ralph/<task-name>/prd.json 2>/dev/null\nls .claude/ralph/<task-name>/plan.json 2>/dev/null\n```\n\n**Mode A: PRD-based** (if prd.json exists and --freeform not specified):\n- Read `.claude/ralph/<task-name>/prd.json`\n- Use structured story-based execution\n- Completion promise: \"ALL STORIES PASS\"\n\n**Mode B: Plan-based** (if plan.json exists and --freeform not specified):\n- Read `.claude/ralph/<task-name>/plan.json`\n- Use phase-based execution (created via `/ralph-freeform`)\n- Completion promise: \"ALL PHASES COMPLETE\"\n\n**Mode C: Raw Freeform** (if no PRD/plan or --freeform flag):\n- Use the provided text as the task description\n- Create minimal working files\n- Completion promise: \"TASK COMPLETE\"\n\n### Step 2: Initialize Working Files\n\nCreate working directory if needed:\n```bash\nmkdir -p .claude/ralph/<task-name>/\n```\n\n**For PRD mode or Plan mode**, ensure these files exist (create from templates if not):\n\n1. Read existing progress.md or create from template:\n   - Template: `skills/ralph-orchestrator/assets/templates/progress_template.md`\n   - Location: `.claude/ralph/<task-name>/progress.md`\n\n2. Read existing AGENTS.md or create from template:\n   - Template: `skills/ralph-orchestrator/assets/templates/agents_template.md`\n   - Location: `.claude/ralph/<task-name>/AGENTS.md`\n\n**For Raw Freeform mode**, create minimal files:\n\n1. Create progress.md with:\n   ```markdown\n   # Progress: <task-name>\n\n   **Started**: <timestamp>\n   **Current Iteration**: 0\n   **Mode**: freeform\n\n   ## Learnings (append-only)\n\n   ## Current State\n\n   **Working on**: Not started\n   **Blockers**: none\n   **Last verification**: not yet run\n\n   ## Iteration History\n   ```\n\n2. Create minimal AGENTS.md:\n   ```markdown\n   # AGENTS.md - <task-name>\n\n   **Task**: <task-name>\n   **Created**: <timestamp>\n\n   ## Task Description\n\n   <freeform prompt text>\n\n   ## Discovered Patterns\n\n   ## Commands Reference\n   ```\n\n### Step 3: Build Master Prompt\n\nInvoke the ralph-orchestrator skill to build the complete master prompt:\n\n```\nUse the ralph-orchestrator skill to build the master prompt for:\n- Task: <task-name>\n- Mode: <prd|plan|freeform>\n- Max iterations: <from --max-iterations or 50>\n- Focus story: <from --story or first incomplete> (PRD mode)\n- Focus phase: <from --phase or first incomplete> (Plan mode)\n```\n\nThe skill will:\n1. Read prd.json (PRD mode), plan.json (Plan mode), or parse raw prompt\n2. Read current state from progress.md\n3. Build structured prompt with all scaffolding\n4. Return the complete master prompt\n\n### Step 4: Confirm with User\n\nBefore starting the loop, confirm:\n\n```\nReady to start Ralph loop!\n\n**Task**: <task-name>\n**Mode**: <PRD-based | Plan-based | Raw Freeform>\n**Max iterations**: <N>\n**Completion promise**: \"<promise>\"\n\n**Stories** (PRD mode only):\n- [ ] US-001: <title>\n- [ ] US-002: <title>\n- [x] US-003: <title> (already passing)\n\n**Phases** (Plan mode only):\n- [ ] P1: <phase name>\n- [ ] P2: <phase name>\n- [x] P3: <phase name> (already complete)\n\n**Working files**:\n- .claude/ralph/<task-name>/progress.md\n- .claude/ralph/<task-name>/AGENTS.md\n- .claude/ralph/<task-name>/prd.json (PRD mode)\n- .claude/ralph/<task-name>/plan.json (Plan mode)\n- ./CLAUDE.md (project root - receives promoted patterns)\n\n**To cancel the loop once started**: /cancel-ralph\n\nStart the loop now? (The loop will run until completion or max iterations)\n```\n\nWait for user confirmation.\n\n### Step 5: Invoke Ralph Loop\n\nOnce confirmed, invoke the official ralph-loop command:\n\n**For PRD mode**:\n```\n/ralph-loop \"<master-prompt>\" --max-iterations <N> --completion-promise \"ALL STORIES PASS\"\n```\n\n**For Plan mode**:\n```\n/ralph-loop \"<master-prompt>\" --max-iterations <N> --completion-promise \"ALL PHASES COMPLETE\"\n```\n\n**For Raw Freeform mode**:\n```\n/ralph-loop \"<master-prompt>\" --max-iterations <N> --completion-promise \"TASK COMPLETE\"\n```\n\nThe ralph-loop plugin will:\n- Feed the prompt to Claude\n- Intercept exit attempts\n- Re-feed the same prompt\n- Continue until completion promise detected or max iterations\n\n## Options Reference\n\n| Option | Description | Default |\n|--------|-------------|---------|\n| `--max-iterations N` | Stop after N iterations | 50 |\n| `--story US-XXX` | Start with specific story (PRD mode) | First incomplete |\n| `--phase P1` | Start with specific phase (Plan mode) | First incomplete |\n| `--freeform` | Force raw freeform mode | Auto-detect |\n\n## Examples\n\n**Start PRD-based loop** (after running /prd):\n```\n/ralph todo-api\n```\n\n**Start Plan-based loop** (after running /ralph-freeform):\n```\n/ralph health-endpoint\n```\n\n**Start with iteration limit**:\n```\n/ralph todo-api --max-iterations 30\n```\n\n**Start from specific story** (PRD mode):\n```\n/ralph todo-api --story US-003\n```\n\n**Start from specific phase** (Plan mode):\n```\n/ralph health-endpoint --phase P2\n```\n\n**Raw freeform task** (no PRD or plan):\n```\n/ralph \"Add a health check endpoint that returns {status: ok}\" --freeform --max-iterations 10\n```\n\n## Monitoring the Loop\n\nWhile the loop runs:\n- Watch progress in `.claude/ralph/<task-name>/progress.md`\n- Check story status in `.claude/ralph/<task-name>/prd.json` (PRD mode)\n- Check phase status in `.claude/ralph/<task-name>/plan.json` (Plan mode)\n- Review patterns in `.claude/ralph/<task-name>/AGENTS.md`\n- Check project-wide patterns promoted to `./CLAUDE.md`\n- Monitor git commits for progress\n\n## CLAUDE.md Updates\n\nDuring the loop, Claude will update two pattern files with different purposes:\n\n**AGENTS.md** (task-specific):\n- Located in `.claude/ralph/<task-name>/AGENTS.md`\n- Contains patterns specific to this task\n- Includes architectural decisions for this feature\n- Stays with the task working files\n\n**CLAUDE.md** (project-wide):\n- Located in project root `./CLAUDE.md`\n- Receives patterns that apply across the entire project\n- Updated when Claude discovers project-wide conventions\n- Persists beyond this task for future work\n\nPatterns are promoted from AGENTS.md to CLAUDE.md when they:\n- Apply to the whole project (naming conventions, structure)\n- Represent gotchas future tasks should know about\n- Establish architectural decisions affecting multiple features\n\n## Canceling the Loop\n\nTo stop the loop before completion:\n```\n/cancel-ralph\n```\n\nThis will:\n- Stop the current iteration\n- Preserve all progress in working files\n- Allow resuming later with `/ralph <task-name>`\n\n## Resuming a Loop\n\nIf a loop was canceled or hit max iterations:\n```\n/ralph <task-name>\n```\n\nThe skill will:\n- Read existing progress.md to understand state\n- Continue from where you left off\n- Preserve all learnings from previous sessions"
              }
            ],
            "skills": [
              {
                "name": "ralph-orchestrator",
                "description": "Build structured prompts for Ralph loops with TDD guidance, progress tracking, verification steps, and escape hatches. Invoke when starting a Ralph-based development task, creating orchestrated iteration loops, or converting PRDs to executable Ralph prompts. Wraps the official ralph-loop plugin to maximize loop success rates through careful prompt engineering and persistent state management.",
                "path": "plugins/ralph-orchestrator/skills/ralph-orchestrator/SKILL.md",
                "frontmatter": {
                  "name": "ralph-orchestrator",
                  "description": "Build structured prompts for Ralph loops with TDD guidance, progress tracking, verification steps, and escape hatches. Invoke when starting a Ralph-based development task, creating orchestrated iteration loops, or converting PRDs to executable Ralph prompts. Wraps the official ralph-loop plugin to maximize loop success rates through careful prompt engineering and persistent state management."
                },
                "content": "# Ralph Orchestrator\n\nBuild structured, scaffolded prompts for Ralph loops that maximize success rates through:\n- **Progress tracking**: Persistent learnings that survive iterations\n- **Context health**: When to commit, summarize, or archive\n- **TDD workflow**: Test-first development patterns\n- **Escape hatches**: Recovery when stuck\n- **Verification**: Automatic and manual verification steps\n\n## Core Concept\n\nRalph loops succeed when Claude has:\n1. **Clear completion criteria** - Unambiguous signal for when to output the completion promise\n2. **Progress visibility** - Ability to see what worked/failed in previous iterations\n3. **Incremental goals** - Small, achievable steps that build momentum\n4. **Recovery paths** - What to do when stuck\n\nThis skill builds prompts that embed all these elements.\n\n## How Ralph Works\n\nThe official `ralph-loop` plugin creates a self-referential feedback loop:\n1. Your prompt is fed to Claude\n2. Claude works on the task\n3. Claude tries to exit\n4. Stop hook intercepts exit and re-feeds the SAME prompt\n5. Repeat until completion promise is detected or max iterations reached\n\n**Key insight**: The prompt never changes between iterations. Claude's \"memory\" comes from:\n- Files on disk (progress.md, AGENTS.md, prd.json, your code)\n- Git history\n- Test results\n\nThis skill builds prompts that leverage these persistence mechanisms.\n\n---\n\n## Workflow\n\n### Phase 1: Understand the Input\n\nDetermine input mode from the invocation context:\n\n**PRD Mode** (if `.claude/ralph/<task-name>/prd.json` exists):\n- Read the prd.json file\n- Extract stories, success criteria, verification method\n- Identify which stories are already passing (`\"passes\": true`)\n- Determine next story to work on\n- Completion promise: `<promise>ALL STORIES PASS</promise>`\n\n**Plan Mode** (if `.claude/ralph/<task-name>/plan.json` exists):\n- Read the plan.json file\n- Extract phases, goal, success criteria, verification method\n- Identify which phases are already complete (`\"complete\": true`)\n- Determine next phase to work on\n- Completion promise: `<promise>ALL PHASES COMPLETE</promise>`\n\n**Raw Freeform Mode** (if neither PRD nor plan exists):\n- Parse the provided prompt text\n- Infer success criteria from the description\n- Create implicit single-phase structure\n- Completion promise: `<promise>TASK COMPLETE</promise>`\n\n### Phase 2: Initialize Working Files\n\nEnsure working files exist in `.claude/ralph/<task-name>/`:\n\n**progress.md** - Create from template if not exists:\n- Read `assets/templates/progress_template.md`\n- Fill in task name, timestamp, mode, first story ID\n- Write to `.claude/ralph/<task-name>/progress.md`\n\n**AGENTS.md** - Create from template if not exists:\n- Read `assets/templates/agents_template.md`\n- Fill in task name, timestamp, problem statement\n- Write to `.claude/ralph/<task-name>/AGENTS.md`\n\n### Phase 3: Build the Master Prompt\n\nThe master prompt is fed to Claude each iteration. It must be:\n- **Self-contained**: All necessary context included\n- **State-aware**: References progress files Claude should read\n- **Action-oriented**: Clear next steps\n- **Bounded**: Knows when to stop\n\nBuild the prompt using this structure:\n\n---\n\n```markdown\n# Ralph Loop Task: <task-name>\n\n## Your Mission\n\n<problem statement from PRD or freeform prompt>\n\n## Completion Criteria\n\nWhen ALL of the following are true, output exactly: <promise>ALL STORIES PASS</promise>\n\n<list each success criterion as a checkbox>\n\n**CRITICAL**: Do NOT output the completion promise unless ALL criteria are actually met. The loop will continue until you output this exact text or max iterations is reached.\n\n---\n\n## CRITICAL INSTRUCTIONS\n\nYou are in a Ralph loop. Each iteration, you receive this same prompt. Your memory persists ONLY through files on disk. Follow these instructions exactly.\n\n### 1. Read State First (EVERY ITERATION)\n\nBefore doing ANY work, read these files to understand current state:\n\n- `.claude/ralph/<task-name>/progress.md` - What you've learned, where you are, what iteration you're on\n- `.claude/ralph/<task-name>/AGENTS.md` - Persistent patterns and architectural decisions\n- `.claude/ralph/<task-name>/prd.json` - Current story status (which stories pass)\n\n**DO NOT** start working until you've read these files. They contain your memory from previous iterations.\n\n### 2. Progress Tracking (MANDATORY)\n\nAfter EACH meaningful action, update `.claude/ralph/<task-name>/progress.md`:\n\n**Learnings section** (append-only):\n```\n[Iteration N] <what you learned>\n```\nExample:\n```\n[Iteration 3] Database requires await on pool.connect() before queries\n[Iteration 4] Test file must be named *.test.ts to be discovered\n```\n\n**Current State section**:\n- Update \"Working on\" with current focus\n- Update \"Current Story\" with active story ID\n- Update \"Last verification\" with most recent test/check result\n- Increment \"Attempts on current issue\" if retrying same problem\n\n**Story Status section**:\n- Check off stories as they pass: `- [x] US-001: Create endpoint`\n\n**Iteration History section**:\n- Add brief entry for this iteration\n\n### 3. Context Health\n\n**Commit frequently**:\n- After each passing test\n- After each working feature\n- Use descriptive commit messages\n- This creates recovery points\n\n**Summarize on milestones**:\n- When completing a story, add insights to AGENTS.md\n- Document patterns discovered, architectural decisions\n- Keep AGENTS.md as distilled knowledge\n\n**Archive if progress.md grows large**:\n- If > 300 lines, move old iterations to progress_archive.md\n- Keep active iteration history manageable\n\n### 4. TDD Workflow\n\nFor each story or feature:\n\n1. **Write test FIRST**\n   - Define what success looks like in code\n   - Test should be specific and focused\n\n2. **Run test - confirm it FAILS**\n   - This proves the test is valid\n   - If it passes, test may be wrong\n\n3. **Implement minimal code**\n   - Just enough to make test pass\n   - Don't over-engineer\n\n4. **Run test - confirm it PASSES**\n   - If fails, debug and fix\n   - Update progress.md with learnings\n\n5. **Refactor if needed**\n   - Clean up while tests still pass\n   - Run tests after refactoring\n\n6. **Commit and document**\n   - Commit working code\n   - Update progress.md\n   - Update AGENTS.md if pattern discovered\n\n### 5. Verification Steps\n\n<verification method from PRD>\n\nRun verification after implementing each story:\n- **Command**: `<verification command if applicable>`\n- **Expected result**: <what success looks like>\n- **If verification fails**: Note in progress.md, attempt fix, re-verify\n\n### 6. Escape Hatches\n\n**If stuck after 3 attempts on the same issue**:\n\n1. **Document the issue** in progress.md:\n   ```\n   ### Blocked: <issue description>\n   - Attempted: <what you tried>\n   - Error: <exact error message>\n   - Hypothesis: <why it might be failing>\n   ```\n\n2. **Try ONE alternative approach**:\n   - Different library or method\n   - Simplified implementation\n   - Ask if requirement can be relaxed\n\n3. **If still stuck after alternative**:\n   - Mark story as BLOCKED in prd.json: `\"blocked\": true, \"blocked_reason\": \"...\"`\n   - Add to \"Blocked Stories\" section in progress.md\n   - Move to NEXT story (don't spin forever)\n\n4. **If ALL stories are blocked**:\n   - Create comprehensive summary in progress.md\n   - List all blockers and what was attempted\n   - Do NOT output false completion promise\n   - The loop will continue until max iterations\n\n**Never output the completion promise to escape a difficult situation. That defeats the purpose of the loop.**\n\n### 7. Project CLAUDE.md Updates\n\nAfter completing a story/phase, check if any learnings should be promoted to the project-level CLAUDE.md:\n\n**Promote to CLAUDE.md when:**\n- Discovered a project-wide convention (naming, structure, patterns)\n- Found a command or workflow that applies beyond this task\n- Identified a gotcha that future tasks should know about\n- Established an architectural decision affecting the whole project\n\n**Do NOT promote:**\n- Task-specific implementation details\n- Temporary workarounds\n- Learnings only relevant to this feature\n\n**Update format:**\nAppend to CLAUDE.md under a \"## Discovered Patterns\" or relevant existing section:\n```\n## Discovered Patterns\n\n### <Category>\n- <pattern description> (discovered during <task-name>)\n```\n\n**Location:**\n- Read: `./CLAUDE.md` (project root)\n- Write: Append new patterns, never remove existing content\n\n**Relationship to AGENTS.md:**\n- AGENTS.md = Task-specific patterns (stays in `.claude/ralph/<task>/`)\n- CLAUDE.md = Project-wide conventions (promoted from AGENTS.md)\n\n---\n\n## User Stories\n\n<For PRD mode, list all stories from prd.json>\n\n### Current Focus: <first non-passing, non-blocked story>\n\n**Story ID**: <id>\n**Title**: <title>\n**Description**: <description>\n\n**Acceptance Criteria**:\n<list criteria as checkboxes>\n\n**Verification**: <story-specific verification>\n\n### Remaining Stories\n\n<list other stories with status indicators>\n- [ ] US-002: <title>\n- [ ] US-003: <title>\n- [x] US-001: <title> (PASS)\n- [BLOCKED] US-004: <title>\n\n---\n\n## What To Do Now\n\n1. **Read state files** - progress.md, AGENTS.md, prd.json, and ./CLAUDE.md\n2. **Identify current iteration** from progress.md\n3. **Determine current story** - first non-passing, non-blocked story\n4. **Check attempt count** - if 3+ attempts on same issue, use escape hatch\n5. **Follow TDD workflow** for current story\n6. **Update progress.md** after each action\n7. **Run verification** when story seems complete\n8. **Update prd.json** when story passes: `\"passes\": true`\n9. **Update AGENTS.md** with task-specific patterns discovered\n10. **Promote to CLAUDE.md** any project-wide conventions discovered\n11. **Commit working code** with descriptive message\n12. **Move to next story** until all pass\n13. **When ALL criteria met**, output: <promise>ALL STORIES PASS</promise>\n\n---\n\n## Remember\n\n- You are in a LOOP - your work from previous iterations is in the files\n- READ STATE FIRST every iteration (progress.md, AGENTS.md, prd.json, CLAUDE.md)\n- NEVER output the completion promise unless it's TRUE\n- Commit often, document always\n- If stuck 3 times, use escape hatch - don't spin forever\n- Progress through stories methodically\n- Your learnings in progress.md help future iterations avoid mistakes\n- Promote project-wide patterns to CLAUDE.md, keep task-specific in AGENTS.md\n```\n\n---\n\n### Phase 4: Return the Built Prompt\n\nOutput the complete master prompt ready for the /ralph command:\n\n```\nMaster prompt built for Ralph loop.\n\n**Summary**:\n- Task: <task-name>\n- Mode: <prd|freeform>\n- Stories: <count> (<passing> passing, <blocked> blocked)\n- Current focus: <first incomplete story>\n- Completion promise: \"ALL STORIES PASS\"\n\n**Working files**:\n- .claude/ralph/<task-name>/progress.md\n- .claude/ralph/<task-name>/AGENTS.md\n- .claude/ralph/<task-name>/prd.json\n- ./CLAUDE.md (project root - for project-wide patterns)\n\nThe master prompt includes:\n- Mission and completion criteria\n- State file reading instructions\n- Progress tracking requirements\n- TDD workflow guidance\n- Verification steps\n- Escape hatch patterns\n- Story list with status\n\nReady to invoke ralph-loop with this prompt.\n```\n\n---\n\n## Key Principles\n\n### 1. The Prompt is the Contract\n\nEverything Claude needs to succeed must be in the prompt. The prompt is fed fresh each iteration - Claude doesn't remember previous iterations except through:\n- Files on disk (progress.md, AGENTS.md, prd.json, code files)\n- Git history\n- Test results\n\n### 2. Progress Files are Memory\n\nSince Ralph loops re-feed the same prompt, persistent files are how Claude \"remembers\":\n- **progress.md**: Append-only learnings, current state, iteration history\n- **AGENTS.md**: Task-specific patterns and architectural decisions\n- **CLAUDE.md**: Project-wide conventions (promoted from AGENTS.md)\n- **prd.json**: Story completion status\n\n### 3. Small Stories Beat Big Stories\n\nStories should be completable in 1-3 iterations. If a story takes more than 5 iterations:\n- It's too big - should have been broken down\n- There's a blocker - use escape hatch\n\n### 4. Verification is Essential\n\nEvery story must have a verification method. Without it, Claude can't objectively know when it's done. Prefer automated verification (tests, type checks) over manual.\n\n### 5. Escape Hatches Prevent Infinite Loops\n\nWhen stuck, Claude should:\n1. Document the issue thoroughly\n2. Try an alternative approach\n3. Mark as blocked and move on\n4. NEVER lie about completion\n\n---\n\n## Plan Mode Adaptations\n\nWhen `.claude/ralph/<task-name>/plan.json` exists (created via `/ralph-freeform`):\n\n**Key differences from PRD mode**:\n- **Phases instead of stories**: Larger chunks of work with steps\n- **Simpler structure**: 2-5 phases vs 5+ user stories\n- **Goal-focused**: Single goal with phases to achieve it\n- **Completion promise**: `<promise>ALL PHASES COMPLETE</promise>`\n\n**Master prompt adaptations for Plan Mode**:\n- Replace \"User Stories\" section with \"Phases\" section\n- Replace story IDs (US-001) with phase IDs (P1, P2)\n- Replace `prd.json` references with `plan.json`\n- Update status tracking for phases instead of stories\n\n**Phase Status in plan.json**:\n```json\n{\n  \"id\": \"P1\",\n  \"name\": \"Phase name\",\n  \"steps\": [\"step 1\", \"step 2\"],\n  \"verification\": \"How to verify\",\n  \"complete\": true,  // Update when phase done\n  \"notes\": \"Any notes from implementation\"\n}\n```\n\n**What To Do Now (Plan Mode)**:\n1. Read state files - progress.md, AGENTS.md, plan.json, and ./CLAUDE.md\n2. Identify current iteration from progress.md\n3. Determine current phase - first non-complete phase\n4. Check attempt count - if 3+ attempts on same issue, use escape hatch\n5. Work through current phase steps\n6. Update progress.md after each action\n7. Run verification when phase seems complete\n8. Update plan.json when phase passes: `\"complete\": true`\n9. Update AGENTS.md with task-specific patterns discovered\n10. Promote to CLAUDE.md any project-wide conventions discovered\n11. Commit working code with descriptive message\n12. Move to next phase until all complete\n13. When ALL phases complete, output: `<promise>ALL PHASES COMPLETE</promise>`\n\n---\n\n## Raw Freeform Mode Adaptations\n\nWhen neither PRD nor plan exists (raw prompt passed to /ralph):\n\n- **Single implicit phase**: The entire task is one phase\n- **Inferred criteria**: Extract testable criteria from description\n- **Completion promise**: Use `<promise>TASK COMPLETE</promise>`\n- **Simpler structure**: No phase list, just task description and criteria\n- **Minimal tracking**: progress.md still used, but no JSON status file\n\n---\n\n## References\n\nLoad these for detailed guidance:\n\n- **references/prompt-patterns.md** - Best practices for prompt writing\n- **references/story-sizing.md** - How to size user stories for Ralph\n- **references/escape-hatches.md** - Detailed recovery patterns\n\n---\n\n## Integration with ralph-loop\n\nThis skill builds the prompt; the actual looping is handled by the official `ralph-loop` plugin:\n\n```bash\n/ralph-loop \"<master-prompt>\" --max-iterations <N> --completion-promise \"ALL STORIES PASS\"\n```\n\nThe stop hook in ralph-loop:\n- Intercepts Claude's exit attempts\n- Re-feeds the same prompt\n- Detects completion promise to exit loop\n- Respects max-iterations limit\n\nOur progress.md, AGENTS.md, and prd.json provide the persistent context that makes each iteration productive."
              }
            ]
          }
        ]
      }
    }
  ]
}