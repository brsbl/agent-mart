{
  "owner": {
    "id": "physics91",
    "display_name": "Jaeyeong Kim",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/25581353?v=4",
    "url": "https://github.com/physics91",
    "bio": "재밌게 살자",
    "stats": {
      "total_repos": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 39,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "physics91/claude-vibe",
      "url": "https://github.com/physics91/claude-vibe",
      "description": "Claude Code hooks를 활용하여 세션 컴팩션 시 AGENTS.md 컨텍스트를 자동으로 보존/복원하는 플러그인",
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2025-12-29T01:44:17Z",
        "created_at": "2025-11-23T13:54:50Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 543
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 744
        },
        {
          "path": ".github",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/workflows",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/workflows/ci.yml",
          "type": "blob",
          "size": 909
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 226
        },
        {
          "path": "AGENTS.md",
          "type": "blob",
          "size": 6167
        },
        {
          "path": "AGENTS_PROGRESS.md",
          "type": "blob",
          "size": 384
        },
        {
          "path": "CHANGELOG.md",
          "type": "blob",
          "size": 15451
        },
        {
          "path": "NEXT_GENERATION.md",
          "type": "blob",
          "size": 7051
        },
        {
          "path": "README.ko.md",
          "type": "blob",
          "size": 2524
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 10841
        },
        {
          "path": "SECURITY.md",
          "type": "blob",
          "size": 3302
        },
        {
          "path": "commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "commands/a.md",
          "type": "blob",
          "size": 596
        },
        {
          "path": "commands/context-setup.md",
          "type": "blob",
          "size": 2003
        },
        {
          "path": "commands/context-status.md",
          "type": "blob",
          "size": 1326
        },
        {
          "path": "commands/cr.md",
          "type": "blob",
          "size": 4028
        },
        {
          "path": "commands/cs.md",
          "type": "blob",
          "size": 785
        },
        {
          "path": "commands/d.md",
          "type": "blob",
          "size": 581
        },
        {
          "path": "commands/debug.md",
          "type": "blob",
          "size": 2165
        },
        {
          "path": "commands/e.md",
          "type": "blob",
          "size": 653
        },
        {
          "path": "commands/f.md",
          "type": "blob",
          "size": 590
        },
        {
          "path": "commands/init-agents.md",
          "type": "blob",
          "size": 1688
        },
        {
          "path": "commands/init.md",
          "type": "blob",
          "size": 691
        },
        {
          "path": "commands/lint-agents.md",
          "type": "blob",
          "size": 1047
        },
        {
          "path": "commands/r.md",
          "type": "blob",
          "size": 564
        },
        {
          "path": "commands/rf.md",
          "type": "blob",
          "size": 657
        },
        {
          "path": "commands/skill-log.md",
          "type": "blob",
          "size": 1779
        },
        {
          "path": "commands/skill-test.md",
          "type": "blob",
          "size": 1768
        },
        {
          "path": "commands/st.md",
          "type": "blob",
          "size": 581
        },
        {
          "path": "commands/t.md",
          "type": "blob",
          "size": 646
        },
        {
          "path": "commands/validate-skill.md",
          "type": "blob",
          "size": 3027
        },
        {
          "path": "docs",
          "type": "tree",
          "size": null
        },
        {
          "path": "docs/ARCHITECTURE.md",
          "type": "blob",
          "size": 11277
        },
        {
          "path": "docs/api",
          "type": "tree",
          "size": null
        },
        {
          "path": "docs/api/cache.md",
          "type": "blob",
          "size": 6034
        },
        {
          "path": "docs/api/error-handler.md",
          "type": "blob",
          "size": 6581
        },
        {
          "path": "docs/api/parser.md",
          "type": "blob",
          "size": 5119
        },
        {
          "path": "docs/guides",
          "type": "tree",
          "size": null
        },
        {
          "path": "docs/guides/troubleshooting.md",
          "type": "blob",
          "size": 6723
        },
        {
          "path": "hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "hooks/hooks.json",
          "type": "blob",
          "size": 3096
        },
        {
          "path": "hooks/inject-agents.js",
          "type": "blob",
          "size": 7676
        },
        {
          "path": "hooks/lib",
          "type": "tree",
          "size": null
        },
        {
          "path": "hooks/lib/core.js",
          "type": "blob",
          "size": 183
        },
        {
          "path": "hooks/lib/core",
          "type": "tree",
          "size": null
        },
        {
          "path": "hooks/lib/core/constants.js",
          "type": "blob",
          "size": 5493
        },
        {
          "path": "hooks/lib/core/index.js",
          "type": "blob",
          "size": 1718
        },
        {
          "path": "hooks/lib/core/logger.js",
          "type": "blob",
          "size": 3666
        },
        {
          "path": "hooks/lib/core/output-formatter.js",
          "type": "blob",
          "size": 3682
        },
        {
          "path": "hooks/lib/core/stdin-reader.js",
          "type": "blob",
          "size": 2522
        },
        {
          "path": "hooks/lib/package.json",
          "type": "blob",
          "size": 412
        },
        {
          "path": "hooks/lib/utils.js",
          "type": "blob",
          "size": 183
        },
        {
          "path": "hooks/lib/utils",
          "type": "tree",
          "size": null
        },
        {
          "path": "hooks/lib/utils/http-client.js",
          "type": "blob",
          "size": 5465
        },
        {
          "path": "hooks/lib/utils/index.js",
          "type": "blob",
          "size": 1341
        },
        {
          "path": "hooks/lib/utils/security.js",
          "type": "blob",
          "size": 5737
        },
        {
          "path": "hooks/lib/utils/validation.js",
          "type": "blob",
          "size": 5309
        },
        {
          "path": "hooks/notification-handler.cmd",
          "type": "blob",
          "size": 46
        },
        {
          "path": "hooks/notification-handler.js",
          "type": "blob",
          "size": 8485
        },
        {
          "path": "hooks/post-tool-use",
          "type": "blob",
          "size": 514
        },
        {
          "path": "hooks/post-tool-use.cmd",
          "type": "blob",
          "size": 39
        },
        {
          "path": "hooks/post-tool-use.js",
          "type": "blob",
          "size": 11624
        },
        {
          "path": "hooks/post-tool-use.ps1",
          "type": "blob",
          "size": 5779
        },
        {
          "path": "hooks/post-tool-use.sh",
          "type": "blob",
          "size": 3323
        },
        {
          "path": "hooks/pre-compact",
          "type": "blob",
          "size": 1883
        },
        {
          "path": "hooks/pre-compact.cmd",
          "type": "blob",
          "size": 140
        },
        {
          "path": "hooks/pre-compact.js",
          "type": "blob",
          "size": 2967
        },
        {
          "path": "hooks/pre-compact.sh",
          "type": "blob",
          "size": 1018
        },
        {
          "path": "hooks/pre-tool-use-safety.cmd",
          "type": "blob",
          "size": 45
        },
        {
          "path": "hooks/pre-tool-use-safety.js",
          "type": "blob",
          "size": 4124
        },
        {
          "path": "hooks/session-start",
          "type": "blob",
          "size": 1891
        },
        {
          "path": "hooks/session-start.cmd",
          "type": "blob",
          "size": 144
        },
        {
          "path": "hooks/session-start.js",
          "type": "blob",
          "size": 7173
        },
        {
          "path": "hooks/session-start.sh",
          "type": "blob",
          "size": 1086
        },
        {
          "path": "hooks/status-line.cmd",
          "type": "blob",
          "size": 37
        },
        {
          "path": "hooks/status-line.js",
          "type": "blob",
          "size": 5209
        },
        {
          "path": "hooks/stop-quality-gate.cmd",
          "type": "blob",
          "size": 43
        },
        {
          "path": "hooks/stop-quality-gate.js",
          "type": "blob",
          "size": 8165
        },
        {
          "path": "hooks/user-prompt-submit",
          "type": "blob",
          "size": 1911
        },
        {
          "path": "hooks/user-prompt-submit.cmd",
          "type": "blob",
          "size": 154
        },
        {
          "path": "hooks/user-prompt-submit.js",
          "type": "blob",
          "size": 2713
        },
        {
          "path": "hooks/user-prompt-submit.ps1",
          "type": "blob",
          "size": 3816
        },
        {
          "path": "hooks/user-prompt-submit.sh",
          "type": "blob",
          "size": 4195
        },
        {
          "path": "lib",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/core",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/core/cache.ps1",
          "type": "blob",
          "size": 26273
        },
        {
          "path": "lib/core/clarification-generator.ps1",
          "type": "blob",
          "size": 6561
        },
        {
          "path": "lib/core/command-manager.ps1",
          "type": "blob",
          "size": 14428
        },
        {
          "path": "lib/core/constants.ps1",
          "type": "blob",
          "size": 10114
        },
        {
          "path": "lib/core/exceptions.ps1",
          "type": "blob",
          "size": 9655
        },
        {
          "path": "lib/core/json-helper.py",
          "type": "blob",
          "size": 4924
        },
        {
          "path": "lib/core/mcp-config-generator.ps1",
          "type": "blob",
          "size": 10398
        },
        {
          "path": "lib/core/pattern-analyzer.ps1",
          "type": "blob",
          "size": 14523
        },
        {
          "path": "lib/core/preset-manager.ps1",
          "type": "blob",
          "size": 13651
        },
        {
          "path": "lib/core/project-detector.ps1",
          "type": "blob",
          "size": 18579
        },
        {
          "path": "lib/core/project-profile-manager.ps1",
          "type": "blob",
          "size": 12824
        },
        {
          "path": "lib/core/prompt-analyzer.config.json",
          "type": "blob",
          "size": 1469
        },
        {
          "path": "lib/core/prompt-analyzer.js",
          "type": "blob",
          "size": 7924
        },
        {
          "path": "lib/core/prompt-analyzer.ps1",
          "type": "blob",
          "size": 3203
        },
        {
          "path": "lib/core/prompt-analyzer.sh",
          "type": "blob",
          "size": 751
        },
        {
          "path": "lib/core/session-memory.ps1",
          "type": "blob",
          "size": 15865
        },
        {
          "path": "lib/core/skill-suggester.ps1",
          "type": "blob",
          "size": 14730
        },
        {
          "path": "lib/mcp",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/.gitignore",
          "type": "blob",
          "size": 10
        },
        {
          "path": "lib/mcp/ai-code-agent/IMPROVEMENTS.md",
          "type": "blob",
          "size": 5554
        },
        {
          "path": "lib/mcp/ai-code-agent/config",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/config/codex-output.schema.json",
          "type": "blob",
          "size": 1359
        },
        {
          "path": "lib/mcp/ai-code-agent/config/default.json",
          "type": "blob",
          "size": 3877
        },
        {
          "path": "lib/mcp/ai-code-agent/dist",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/dist/chunk-DQNICZW5.js",
          "type": "blob",
          "size": 11544
        },
        {
          "path": "lib/mcp/ai-code-agent/dist/index.d.ts",
          "type": "blob",
          "size": 20
        },
        {
          "path": "lib/mcp/ai-code-agent/dist/index.js",
          "type": "blob",
          "size": 210418
        },
        {
          "path": "lib/mcp/ai-code-agent/dist/prompt-template-4FPZE2QV.js",
          "type": "blob",
          "size": 341
        },
        {
          "path": "lib/mcp/ai-code-agent/package-lock.json",
          "type": "blob",
          "size": 187051
        },
        {
          "path": "lib/mcp/ai-code-agent/package.json",
          "type": "blob",
          "size": 1737
        },
        {
          "path": "lib/mcp/ai-code-agent/src",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/auto-detect.test.ts",
          "type": "blob",
          "size": 23320
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/cli-detector.test.ts",
          "type": "blob",
          "size": 16419
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/config.test.ts",
          "type": "blob",
          "size": 16680
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/context-manager.test.ts",
          "type": "blob",
          "size": 17119
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/deep-merge.test.ts",
          "type": "blob",
          "size": 5915
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/error-handler.test.ts",
          "type": "blob",
          "size": 18661
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/logger.test.ts",
          "type": "blob",
          "size": 20645
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/prompt-template.test.ts",
          "type": "blob",
          "size": 23009
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/retry.test.ts",
          "type": "blob",
          "size": 16277
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/utils.test.ts",
          "type": "blob",
          "size": 14393
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/validation.test.ts",
          "type": "blob",
          "size": 30849
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/__tests__/warnings.test.ts",
          "type": "blob",
          "size": 15235
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/auto-detect.ts",
          "type": "blob",
          "size": 9977
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/cli-detector.ts",
          "type": "blob",
          "size": 8729
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/config.ts",
          "type": "blob",
          "size": 6596
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/context-manager.ts",
          "type": "blob",
          "size": 3910
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/error-handler.ts",
          "type": "blob",
          "size": 6412
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/logger.ts",
          "type": "blob",
          "size": 5076
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/prompt-template.ts",
          "type": "blob",
          "size": 13384
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/retry.ts",
          "type": "blob",
          "size": 1819
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/utils.ts",
          "type": "blob",
          "size": 4898
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/validation.ts",
          "type": "blob",
          "size": 26668
        },
        {
          "path": "lib/mcp/ai-code-agent/src/core/warnings.ts",
          "type": "blob",
          "size": 6059
        },
        {
          "path": "lib/mcp/ai-code-agent/src/index.ts",
          "type": "blob",
          "size": 5213
        },
        {
          "path": "lib/mcp/ai-code-agent/src/prompts",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/prompts/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/prompts/__tests__/registry.test.ts",
          "type": "blob",
          "size": 25930
        },
        {
          "path": "lib/mcp/ai-code-agent/src/prompts/builders",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/prompts/builders/general-review.ts",
          "type": "blob",
          "size": 4450
        },
        {
          "path": "lib/mcp/ai-code-agent/src/prompts/builders/performance-review.ts",
          "type": "blob",
          "size": 2555
        },
        {
          "path": "lib/mcp/ai-code-agent/src/prompts/builders/security-review.ts",
          "type": "blob",
          "size": 3046
        },
        {
          "path": "lib/mcp/ai-code-agent/src/prompts/index.ts",
          "type": "blob",
          "size": 496
        },
        {
          "path": "lib/mcp/ai-code-agent/src/prompts/registry.ts",
          "type": "blob",
          "size": 6011
        },
        {
          "path": "lib/mcp/ai-code-agent/src/prompts/schemas.ts",
          "type": "blob",
          "size": 2906
        },
        {
          "path": "lib/mcp/ai-code-agent/src/schemas",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/schemas/config.ts",
          "type": "blob",
          "size": 6673
        },
        {
          "path": "lib/mcp/ai-code-agent/src/schemas/context.ts",
          "type": "blob",
          "size": 3136
        },
        {
          "path": "lib/mcp/ai-code-agent/src/schemas/prompts.ts",
          "type": "blob",
          "size": 2385
        },
        {
          "path": "lib/mcp/ai-code-agent/src/schemas/responses.ts",
          "type": "blob",
          "size": 1345
        },
        {
          "path": "lib/mcp/ai-code-agent/src/schemas/tools.ts",
          "type": "blob",
          "size": 9692
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/aggregator",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/aggregator/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/aggregator/__tests__/merger.test.ts",
          "type": "blob",
          "size": 17793
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/aggregator/merger.ts",
          "type": "blob",
          "size": 13030
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/analysis-status",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/analysis-status/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/analysis-status/__tests__/store.test.ts",
          "type": "blob",
          "size": 9513
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/analysis-status/store.ts",
          "type": "blob",
          "size": 3427
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/base",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/base/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/base/__tests__/analysis.service.test.ts",
          "type": "blob",
          "size": 18915
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/base/analysis.service.ts",
          "type": "blob",
          "size": 14524
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/base/index.ts",
          "type": "blob",
          "size": 218
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/cache",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/cache/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/cache/__tests__/cache-key.test.ts",
          "type": "blob",
          "size": 7746
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/cache/__tests__/cache.service.test.ts",
          "type": "blob",
          "size": 14469
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/cache/cache-key.ts",
          "type": "blob",
          "size": 3278
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/cache/cache.service.ts",
          "type": "blob",
          "size": 4593
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/cache/index.ts",
          "type": "blob",
          "size": 339
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/codex",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/codex/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/codex/__tests__/client.test.ts",
          "type": "blob",
          "size": 24931
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/codex/client.ts",
          "type": "blob",
          "size": 17488
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/gemini",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/gemini/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/gemini/__tests__/client.test.ts",
          "type": "blob",
          "size": 25587
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/gemini/client.ts",
          "type": "blob",
          "size": 12731
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/scanner",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/scanner/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/scanner/__tests__/secrets.test.ts",
          "type": "blob",
          "size": 14652
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/scanner/index.ts",
          "type": "blob",
          "size": 180
        },
        {
          "path": "lib/mcp/ai-code-agent/src/services/scanner/secrets.ts",
          "type": "blob",
          "size": 25093
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/__tests__/database.test.ts",
          "type": "blob",
          "size": 21061
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/database.ts",
          "type": "blob",
          "size": 6867
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/index.ts",
          "type": "blob",
          "size": 788
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/repositories",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/repositories/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/repositories/__tests__/analysis.repository.test.ts",
          "type": "blob",
          "size": 15088
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/repositories/__tests__/cache.repository.test.ts",
          "type": "blob",
          "size": 13658
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/repositories/__tests__/prompt.repository.test.ts",
          "type": "blob",
          "size": 13781
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/repositories/analysis.repository.ts",
          "type": "blob",
          "size": 6804
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/repositories/base.repository.ts",
          "type": "blob",
          "size": 994
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/repositories/cache.repository.ts",
          "type": "blob",
          "size": 7700
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/repositories/index.ts",
          "type": "blob",
          "size": 463
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/repositories/prompt.repository.ts",
          "type": "blob",
          "size": 5854
        },
        {
          "path": "lib/mcp/ai-code-agent/src/storage/schema.ts",
          "type": "blob",
          "size": 2694
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/__tests__/registry.test.ts",
          "type": "blob",
          "size": 71736
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/formatters",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/formatters/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/formatters/__tests__/result-formatter.test.ts",
          "type": "blob",
          "size": 11387
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/formatters/index.ts",
          "type": "blob",
          "size": 173
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/formatters/result-formatter.ts",
          "type": "blob",
          "size": 6968
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/handlers",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/handlers/__tests__",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/handlers/__tests__/analysis-handler.test.ts",
          "type": "blob",
          "size": 11460
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/handlers/__tests__/combined-handler.test.ts",
          "type": "blob",
          "size": 21666
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/handlers/analysis-handler.ts",
          "type": "blob",
          "size": 8530
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/handlers/combined-handler.ts",
          "type": "blob",
          "size": 9617
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/handlers/index.ts",
          "type": "blob",
          "size": 306
        },
        {
          "path": "lib/mcp/ai-code-agent/src/tools/registry.ts",
          "type": "blob",
          "size": 25577
        },
        {
          "path": "lib/mcp/ai-code-agent/src/types",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/mcp/ai-code-agent/src/types/common.ts",
          "type": "blob",
          "size": 2884
        },
        {
          "path": "lib/mcp/ai-code-agent/src/types/index.ts",
          "type": "blob",
          "size": 54
        },
        {
          "path": "lib/mcp/ai-code-agent/tsconfig.json",
          "type": "blob",
          "size": 1485
        },
        {
          "path": "lib/mcp/ai-code-agent/vitest.config.ts",
          "type": "blob",
          "size": 411
        },
        {
          "path": "lib/utils",
          "type": "tree",
          "size": null
        },
        {
          "path": "lib/utils/conversion-helpers.ps1",
          "type": "blob",
          "size": 9052
        },
        {
          "path": "lib/utils/error-handler.ps1",
          "type": "blob",
          "size": 21490
        },
        {
          "path": "lib/utils/module-loader.ps1",
          "type": "blob",
          "size": 9688
        },
        {
          "path": "lib/utils/require-modules.ps1",
          "type": "blob",
          "size": 1885
        },
        {
          "path": "lib/utils/safe-access.ps1",
          "type": "blob",
          "size": 7239
        },
        {
          "path": "lib/utils/schema-validator.ps1",
          "type": "blob",
          "size": 21257
        },
        {
          "path": "lib/utils/validation.ps1",
          "type": "blob",
          "size": 12606
        },
        {
          "path": "managed-commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "managed-commands/analyze-code.md",
          "type": "blob",
          "size": 853
        },
        {
          "path": "managed-commands/explain-code.md",
          "type": "blob",
          "size": 796
        },
        {
          "path": "managed-commands/generate-tests.md",
          "type": "blob",
          "size": 826
        },
        {
          "path": "managed-commands/refactor-code.md",
          "type": "blob",
          "size": 901
        },
        {
          "path": "managed-commands/review-pr.md",
          "type": "blob",
          "size": 867
        },
        {
          "path": "presets",
          "type": "tree",
          "size": null
        },
        {
          "path": "presets/api-dev.json",
          "type": "blob",
          "size": 1390
        },
        {
          "path": "presets/data-science.json",
          "type": "blob",
          "size": 1367
        },
        {
          "path": "presets/devops.json",
          "type": "blob",
          "size": 1261
        },
        {
          "path": "presets/full-stack.json",
          "type": "blob",
          "size": 1190
        },
        {
          "path": "presets/go-backend.json",
          "type": "blob",
          "size": 1174
        },
        {
          "path": "presets/minimal.json",
          "type": "blob",
          "size": 391
        },
        {
          "path": "presets/python-web.json",
          "type": "blob",
          "size": 1210
        },
        {
          "path": "presets/rust-systems.json",
          "type": "blob",
          "size": 1108
        },
        {
          "path": "presets/web-dev.json",
          "type": "blob",
          "size": 1430
        },
        {
          "path": "schemas",
          "type": "tree",
          "size": null
        },
        {
          "path": "schemas/context-profile.schema.json",
          "type": "blob",
          "size": 4537
        },
        {
          "path": "schemas/mcp-config.schema.json",
          "type": "blob",
          "size": 7117
        },
        {
          "path": "scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "scripts/build-mcp.ps1",
          "type": "blob",
          "size": 3394
        },
        {
          "path": "scripts/build-mcp.sh",
          "type": "blob",
          "size": 2375
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/ai-code-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/ai-code-reviewer/SKILL.md",
          "type": "blob",
          "size": 5433
        },
        {
          "path": "skills/api-documenter",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/api-documenter/SKILL.md",
          "type": "blob",
          "size": 6541
        },
        {
          "path": "skills/ci-cd-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/ci-cd-reviewer/SKILL.md",
          "type": "blob",
          "size": 8625
        },
        {
          "path": "skills/code-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/code-reviewer/SKILL.md",
          "type": "blob",
          "size": 2611
        },
        {
          "path": "skills/context-manager",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/context-manager/SKILL.md",
          "type": "blob",
          "size": 5596
        },
        {
          "path": "skills/coverage-analyzer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/coverage-analyzer/SKILL.md",
          "type": "blob",
          "size": 5783
        },
        {
          "path": "skills/django-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/django-reviewer/SKILL.md",
          "type": "blob",
          "size": 7819
        },
        {
          "path": "skills/docker-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/docker-reviewer/SKILL.md",
          "type": "blob",
          "size": 7618
        },
        {
          "path": "skills/fastapi-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/fastapi-reviewer/SKILL.md",
          "type": "blob",
          "size": 7018
        },
        {
          "path": "skills/flask-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/flask-reviewer/SKILL.md",
          "type": "blob",
          "size": 7931
        },
        {
          "path": "skills/flutter-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/flutter-reviewer/SKILL.md",
          "type": "blob",
          "size": 9249
        },
        {
          "path": "skills/go-api-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/go-api-reviewer/SKILL.md",
          "type": "blob",
          "size": 9079
        },
        {
          "path": "skills/go-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/go-reviewer/SKILL.md",
          "type": "blob",
          "size": 7835
        },
        {
          "path": "skills/graphql-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/graphql-reviewer/SKILL.md",
          "type": "blob",
          "size": 13457
        },
        {
          "path": "skills/infra-security-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/infra-security-reviewer/SKILL.md",
          "type": "blob",
          "size": 10410
        },
        {
          "path": "skills/ios-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/ios-reviewer/SKILL.md",
          "type": "blob",
          "size": 8636
        },
        {
          "path": "skills/java-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/java-reviewer/SKILL.md",
          "type": "blob",
          "size": 11941
        },
        {
          "path": "skills/k8s-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/k8s-reviewer/SKILL.md",
          "type": "blob",
          "size": 8435
        },
        {
          "path": "skills/kotlin-android-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/kotlin-android-reviewer/SKILL.md",
          "type": "blob",
          "size": 6721
        },
        {
          "path": "skills/kotlin-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/kotlin-lsp/SKILL.md",
          "type": "blob",
          "size": 5534
        },
        {
          "path": "skills/kotlin-multiplatform-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/kotlin-multiplatform-reviewer/SKILL.md",
          "type": "blob",
          "size": 8194
        },
        {
          "path": "skills/kotlin-spring-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/kotlin-spring-reviewer/SKILL.md",
          "type": "blob",
          "size": 9111
        },
        {
          "path": "skills/migration-checker",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/migration-checker/SKILL.md",
          "type": "blob",
          "size": 9656
        },
        {
          "path": "skills/ml-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/ml-reviewer/SKILL.md",
          "type": "blob",
          "size": 10756
        },
        {
          "path": "skills/nextjs-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nextjs-reviewer/SKILL.md",
          "type": "blob",
          "size": 4213
        },
        {
          "path": "skills/orm-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/orm-reviewer/SKILL.md",
          "type": "blob",
          "size": 8421
        },
        {
          "path": "skills/perf-analyzer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/perf-analyzer/SKILL.md",
          "type": "blob",
          "size": 5678
        },
        {
          "path": "skills/prompt-clarifier",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/prompt-clarifier/SKILL.md",
          "type": "blob",
          "size": 3944
        },
        {
          "path": "skills/python-data-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/python-data-reviewer/SKILL.md",
          "type": "blob",
          "size": 8401
        },
        {
          "path": "skills/python-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/python-reviewer/SKILL.md",
          "type": "blob",
          "size": 5482
        },
        {
          "path": "skills/readme-generator",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/readme-generator/SKILL.md",
          "type": "blob",
          "size": 4228
        },
        {
          "path": "skills/rust-api-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/rust-api-reviewer/SKILL.md",
          "type": "blob",
          "size": 10402
        },
        {
          "path": "skills/rust-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/rust-reviewer/SKILL.md",
          "type": "blob",
          "size": 9264
        },
        {
          "path": "skills/schema-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/schema-reviewer/SKILL.md",
          "type": "blob",
          "size": 9198
        },
        {
          "path": "skills/security-scanner",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/security-scanner/SKILL.md",
          "type": "blob",
          "size": 4502
        },
        {
          "path": "skills/spring-boot-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/spring-boot-reviewer/SKILL.md",
          "type": "blob",
          "size": 16343
        },
        {
          "path": "skills/sql-optimizer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/sql-optimizer/SKILL.md",
          "type": "blob",
          "size": 7307
        },
        {
          "path": "skills/terraform-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/terraform-reviewer/SKILL.md",
          "type": "blob",
          "size": 8243
        },
        {
          "path": "skills/test-generator",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/test-generator/SKILL.md",
          "type": "blob",
          "size": 5810
        },
        {
          "path": "skills/typescript-reviewer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/typescript-reviewer/SKILL.md",
          "type": "blob",
          "size": 10953
        },
        {
          "path": "tests",
          "type": "tree",
          "size": null
        },
        {
          "path": "tests/demo-context-manager.ps1",
          "type": "blob",
          "size": 3953
        },
        {
          "path": "tests/e2e-test.js",
          "type": "blob",
          "size": 7016
        },
        {
          "path": "tests/e2e",
          "type": "tree",
          "size": null
        },
        {
          "path": "tests/e2e/README.md",
          "type": "blob",
          "size": 2962
        },
        {
          "path": "tests/e2e/run-e2e-tests.ps1",
          "type": "blob",
          "size": 8912
        },
        {
          "path": "tests/e2e/test-helpers.ps1",
          "type": "blob",
          "size": 5214
        },
        {
          "path": "tests/hooks.test.js",
          "type": "blob",
          "size": 56850
        },
        {
          "path": "tests/inject-agents.test.js",
          "type": "blob",
          "size": 9053
        },
        {
          "path": "tests/lint-agents.test.js",
          "type": "blob",
          "size": 4344
        },
        {
          "path": "tests/mcp",
          "type": "tree",
          "size": null
        },
        {
          "path": "tests/mcp/ai-code-agent.test.js",
          "type": "blob",
          "size": 16294
        },
        {
          "path": "tests/run-all-tests.ps1",
          "type": "blob",
          "size": 3005
        },
        {
          "path": "tests/run-all-tests.sh",
          "type": "blob",
          "size": 838
        },
        {
          "path": "tests/test-cache.ps1",
          "type": "blob",
          "size": 6992
        },
        {
          "path": "tests/test-command-manager.ps1",
          "type": "blob",
          "size": 6967
        },
        {
          "path": "tests/test-context-manager.ps1",
          "type": "blob",
          "size": 8001
        },
        {
          "path": "tests/test-e2e-scenarios.ps1",
          "type": "blob",
          "size": 5187
        },
        {
          "path": "tests/test-edge-cases.sh",
          "type": "blob",
          "size": 4312
        },
        {
          "path": "tests/test-prompt-analyzer.ps1",
          "type": "blob",
          "size": 4106
        },
        {
          "path": "tests/test-python-json.sh",
          "type": "blob",
          "size": 2545
        },
        {
          "path": "tests/test-refactor.ps1",
          "type": "blob",
          "size": 24685
        },
        {
          "path": "tests/test-security-patterns.ps1",
          "type": "blob",
          "size": 2509
        },
        {
          "path": "tools",
          "type": "tree",
          "size": null
        },
        {
          "path": "tools/lint-agents.js",
          "type": "blob",
          "size": 12937
        }
      ],
      "marketplace": {
        "name": "physics91-plugins",
        "version": null,
        "description": null,
        "owner_info": {
          "name": "physics91",
          "url": "https://github.com/physics91"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "claude-vibe",
            "description": "Comprehensive vibe coding assistant with intelligent context management and interactive prompt clarification",
            "source": "./",
            "category": null,
            "version": "0.2.0",
            "author": {
              "name": "physics91"
            },
            "install_commands": [
              "/plugin marketplace add physics91/claude-vibe",
              "/plugin install claude-vibe@physics91-plugins"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2025-12-29T01:44:17Z",
              "created_at": "2025-11-23T13:54:50Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "ai-code-reviewer",
                "description": "WHEN: Deep AI-powered code analysis, multi-model code review, security scanning with Codex and Gemini\nWHAT: Comprehensive code review using external AI models with severity-based findings, deduplication, and secret detection\nWHEN NOT: Simple lint checks -> code-reviewer, Quick security only -> security-scanner, Style formatting -> code-quality-checker\n",
                "path": "skills/ai-code-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "ai-code-reviewer",
                  "description": "WHEN: Deep AI-powered code analysis, multi-model code review, security scanning with Codex and Gemini\nWHAT: Comprehensive code review using external AI models with severity-based findings, deduplication, and secret detection\nWHEN NOT: Simple lint checks -> code-reviewer, Quick security only -> security-scanner, Style formatting -> code-quality-checker\n",
                  "mcp_tools": [
                    "analyze_code_with_codex",
                    "analyze_code_with_gemini",
                    "analyze_code_combined",
                    "scan_secrets",
                    "get_analysis_status"
                  ]
                },
                "content": "# AI Code Reviewer Skill\n\n## Purpose\n\nLeverages external AI models (OpenAI Codex CLI and Google Gemini CLI) for deep code analysis beyond Claude's built-in capabilities. Provides multi-perspective code reviews with result aggregation and consensus scoring.\n\n## Prerequisites\n\nAt least one of the following must be installed and authenticated:\n- **Codex CLI**: Run `codex auth` to authenticate\n- **Gemini CLI**: Run `gemini auth login` to authenticate\n\n## When to Use\n\n- Deep security analysis requiring external AI perspective\n- Performance optimization requests needing specialized analysis\n- Multi-model code review for high-confidence findings\n- Large codebase analysis with result caching\n- Secret and credential detection in code\n\n## Available MCP Tools\n\n### analyze_code_with_codex\nUses OpenAI Codex for comprehensive code analysis.\n- **Best for**: General code review, bug detection, logical errors\n- **Input**: Code snippet with optional context (project type, language, focus areas)\n- **Output**: Structured findings with severity levels and suggestions\n\n### analyze_code_with_gemini\nUses Google Gemini for code analysis.\n- **Best for**: Performance analysis, architectural review, style consistency\n- **Input**: Code snippet with optional context\n- **Output**: Structured findings with code examples\n\n### analyze_code_combined\nAggregates results from both Codex and Gemini with deduplication.\n- **Best for**: High-stakes reviews requiring consensus\n- **Features**:\n  - Parallel execution for speed\n  - Result deduplication with similarity threshold\n  - Confidence scoring based on agreement\n- **Output**: Merged findings with source attribution\n\n### scan_secrets\nDetects hardcoded secrets, API keys, credentials, and sensitive data.\n- **Best for**: Pre-commit security checks\n- **Patterns**: AWS, GCP, Azure, GitHub, database credentials, private keys\n- **Excludes**: Test files, mock files by default\n- **Output**: Secret findings with severity and remediation suggestions\n\n### get_analysis_status\nRetrieves status of async analysis operations.\n- **Input**: Analysis ID from previous tool call\n- **Output**: Status (pending/in_progress/completed/failed), result or error\n\n## Workflow\n\n### Step 1: Determine Analysis Type\n\nAsk user for analysis preference:\n\n**Question**: \"What type of AI analysis do you need?\"\n\n**Options**:\n1. **Quick Review** - Single model, faster (Codex OR Gemini)\n2. **Deep Review** - Combined models with consensus scoring\n3. **Security Scan** - Secret detection only\n4. **Performance Focus** - Optimization-focused review\n5. **Full Audit** - Combined + secret scan\n\n### Step 2: Model Selection (if Quick Review)\n\n**Question**: \"Which AI model should be used?\"\n\n**Options**:\n1. **Codex (OpenAI)** - Better for bug detection, logical errors\n2. **Gemini (Google)** - Better for architectural patterns, style\n\n### Step 3: Set Context (Optional)\n\n**Question**: \"What's the project context?\"\n\n**Options**:\n1. **Auto-detect** - Infer from code\n2. **Web App (React/Vue)** - Frontend focus\n3. **API (Node/Express)** - Backend focus\n4. **MCP Server** - Protocol focus\n5. **CLI Tool** - User tool focus\n6. **Library** - Reusability focus\n\n### Step 4: Execute Analysis\n\nCall the appropriate MCP tool based on selections.\n\n### Step 5: Present Results\n\nFormat findings in structured markdown with:\n- Overall assessment\n- Summary statistics\n- Grouped findings by severity\n- Actionable recommendations\n\n## Response Template\n\n```markdown\n## AI Code Review Results\n\n**Analysis ID**: [id]\n**Models Used**: [codex/gemini/combined]\n**Cache Status**: [hit/miss]\n**Duration**: [Xms]\n\n### Overall Assessment\n\n[AI-generated overall assessment of code quality]\n\n### Summary\n\n| Severity | Count |\n|----------|-------|\n| Critical | X |\n| High | X |\n| Medium | X |\n| Low | X |\n| **Total** | **X** |\n\n### Findings\n\n#### Critical Issues\n\n1. **[Title]** (Line X)\n   - **Description**: [...]\n   - **Suggestion**: [...]\n   - **Code**: `[snippet]`\n\n#### High Priority\n\n[...]\n\n### Recommendations\n\n1. [Prioritized action item 1]\n2. [Prioritized action item 2]\n3. [...]\n\n---\n*Analysis by [model(s)] | Confidence: [X]% | Duration: [X]ms*\n```\n\n## Integration Notes\n\n- Works alongside `code-reviewer` for comprehensive analysis\n- Complements `security-scanner` with external AI perspective\n- Results are cached (1 hour TTL) for repeated queries\n- Secret scanning runs locally, no external API calls\n- Triggered by `/cr` express command\n\n## Error Handling\n\n- **CLI Not Found**: Gracefully reports missing CLI, suggests installation\n- **Authentication Failed**: Guides user through auth process\n- **Timeout**: Returns partial results with warning\n- **Rate Limited**: Queues requests with exponential backoff\n\n## Performance Notes\n\n- Combined analysis runs in parallel by default\n- Cache reduces repeated analysis costs\n- Large files are truncated with warning\n- SQLite storage for persistent cache"
              },
              {
                "name": "api-documenter",
                "description": "WHEN: API documentation, JSDoc/TSDoc comments, Props documentation, Storybook story writing\nWHAT: Function/class/type JSDoc + React Props table + Markdown API docs + Storybook stories\nWHEN NOT: README writing → readme-generator, Code explanation → code-reviewer\n",
                "path": "skills/api-documenter/SKILL.md",
                "frontmatter": {
                  "name": "api-documenter",
                  "description": "WHEN: API documentation, JSDoc/TSDoc comments, Props documentation, Storybook story writing\nWHAT: Function/class/type JSDoc + React Props table + Markdown API docs + Storybook stories\nWHEN NOT: README writing → readme-generator, Code explanation → code-reviewer\n"
                },
                "content": "# API Documenter Skill\n\n## Purpose\nAutomatically generates API documentation for code including functions, components, and types with JSDoc/TSDoc comments.\n\n## When to Use\n- \"API docs\", \"jsdoc\", \"documentation\" requests\n- Component Props documentation needed\n- Adding comments to functions/classes\n- Storybook story generation\n\n## Workflow\n\n### Step 1: Select Documentation Target\n**AskUserQuestion:**\n```\n\"What code to document?\"\nOptions:\n- Specific file/function\n- Undocumented export functions\n- React component Props\n- All public APIs\n```\n\n### Step 2: Select Documentation Type\n**AskUserQuestion:**\n```\n\"What format to generate?\"\nOptions:\n- JSDoc/TSDoc comments\n- Markdown API docs\n- Storybook stories\n- All of the above\nmultiSelect: true\n```\n\n## Documentation Templates\n\n### JSDoc/TSDoc Comments\n\n**Function:**\n```typescript\n/**\n * Formats user data for display.\n *\n * @param user - User object to format\n * @param options - Formatting options\n * @param options.locale - Locale setting (default: 'en-US')\n * @param options.includeAge - Include age (default: false)\n *\n * @returns Formatted user string\n *\n * @example\n * ```typescript\n * const formatted = formatUser({ name: 'John', age: 30 })\n * // Returns: 'John'\n *\n * const withAge = formatUser({ name: 'John', age: 30 }, { includeAge: true })\n * // Returns: 'John (30)'\n * ```\n *\n * @throws {ValidationError} When user object is invalid\n * @see {@link User} User type definition\n * @since 1.0.0\n */\nexport function formatUser(user: User, options?: FormatOptions): string\n```\n\n**Interface:**\n```typescript\n/**\n * User information interface\n *\n * @interface User\n * @property {string} id - Unique identifier (UUID)\n * @property {string} name - User name\n * @property {string} email - Email address\n * @property {number} [age] - Age (optional)\n * @property {UserRole} role - User role\n */\ninterface User {\n  id: string\n  name: string\n  email: string\n  age?: number\n  role: UserRole\n}\n```\n\n**Class:**\n```typescript\n/**\n * API client for REST communication\n *\n * @class ApiClient\n * @example\n * ```typescript\n * const client = new ApiClient({ baseUrl: 'https://api.example.com' })\n * const users = await client.get<User[]>('/users')\n * ```\n */\nclass ApiClient {\n  /**\n   * Creates ApiClient instance\n   * @param config - Client configuration\n   */\n  constructor(config: ApiClientConfig) {}\n\n  /**\n   * Performs GET request\n   * @template T - Response type\n   * @param endpoint - API endpoint\n   * @returns Response data\n   */\n  async get<T>(endpoint: string): Promise<T> {}\n}\n```\n\n### React Component Documentation\n\n**Props Interface:**\n```typescript\n/**\n * Button component Props\n */\ninterface ButtonProps {\n  /** Button content */\n  children: React.ReactNode\n\n  /** Style variant @default 'primary' */\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost'\n\n  /** Button size @default 'medium' */\n  size?: 'small' | 'medium' | 'large'\n\n  /** Disabled state @default false */\n  disabled?: boolean\n\n  /** Loading state @default false */\n  loading?: boolean\n\n  /** Click event handler */\n  onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void\n}\n\n/**\n * Button component with various styles and sizes\n *\n * @component\n * @example\n * ```tsx\n * <Button onClick={handleClick}>Click me</Button>\n * <Button variant=\"secondary\" size=\"large\">Large Button</Button>\n * <Button loading disabled>Processing...</Button>\n * ```\n */\nexport function Button({ children, variant = 'primary', ...props }: ButtonProps)\n```\n\n### Markdown API Docs\n```markdown\n## formatUser\n\nFormats user data for display.\n\n### Signature\n\\`\\`\\`typescript\nfunction formatUser(user: User, options?: FormatOptions): string\n\\`\\`\\`\n\n### Parameters\n| Parameter | Type | Required | Default | Description |\n|-----------|------|----------|---------|-------------|\n| `user` | `User` | Yes | - | User object to format |\n| `options.locale` | `string` | No | `'en-US'` | Locale setting |\n\n### Returns\n`string` - Formatted user string\n\n### Example\n\\`\\`\\`typescript\nconst formatted = formatUser({ name: 'John', age: 30 })\n\\`\\`\\`\n```\n\n### Storybook Stories\n```typescript\nimport type { Meta, StoryObj } from '@storybook/react'\nimport { Button } from './Button'\n\nconst meta: Meta<typeof Button> = {\n  title: 'Components/Button',\n  component: Button,\n  tags: ['autodocs'],\n  argTypes: {\n    variant: {\n      control: 'select',\n      options: ['primary', 'secondary', 'outline', 'ghost'],\n    },\n    size: {\n      control: 'select',\n      options: ['small', 'medium', 'large'],\n    },\n  },\n}\n\nexport default meta\ntype Story = StoryObj<typeof Button>\n\n/** Default button style */\nexport const Default: Story = {\n  args: { children: 'Button', variant: 'primary' },\n}\n\n/** Primary variant for main actions */\nexport const Primary: Story = {\n  args: { children: 'Primary', variant: 'primary' },\n}\n\n/** Various sizes */\nexport const Sizes: Story = {\n  render: () => (\n    <div style={{ display: 'flex', gap: '1rem' }}>\n      <Button size=\"small\">Small</Button>\n      <Button size=\"medium\">Medium</Button>\n      <Button size=\"large\">Large</Button>\n    </div>\n  ),\n}\n```\n\n## Response Template\n```\n## API Documentation Generated\n\n**Target**: src/components/Button.tsx\n\n### JSDoc Comments\n- ButtonProps interface: 7 properties documented\n- Button component: Fully documented\n\n### Markdown Docs\n- File: docs/components/Button.md\n- Sections: Props, Usage, Accessibility\n\n### Storybook\n- File: src/components/Button.stories.tsx\n- Stories: 6 (Default, Primary, Secondary, Sizes, Loading, Disabled)\n\n### Statistics\n| Item | Count |\n|------|-------|\n| Documented Props | 7 |\n| Code Examples | 5 |\n| Stories | 6 |\n```\n\n## Best Practices\n1. **Consistent Style**: Same documentation style across project\n2. **Include Examples**: Usage examples for all public APIs\n3. **Type Accuracy**: Match TypeScript types with documentation\n4. **Keep Updated**: Update docs when code changes\n5. **Accessibility Info**: Include a11y information for components\n\n## Integration\n- `readme-generator` skill: README API section\n- `/explain-code` command: Code understanding\n- `code-reviewer` skill: Documentation quality check\n\n## Notes\n- Merges or overwrites if existing docs present\n- Auto-infers from TypeScript types\n- Excludes @internal tagged code"
              },
              {
                "name": "ci-cd-reviewer",
                "description": "WHEN: CI/CD pipeline review, GitHub Actions, GitLab CI, Jenkins, build optimization\nWHAT: Pipeline structure + Job optimization + Security scanning + Caching strategy + Deployment patterns\nWHEN NOT: Kubernetes → k8s-reviewer, Terraform → terraform-reviewer\n",
                "path": "skills/ci-cd-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "ci-cd-reviewer",
                  "description": "WHEN: CI/CD pipeline review, GitHub Actions, GitLab CI, Jenkins, build optimization\nWHAT: Pipeline structure + Job optimization + Security scanning + Caching strategy + Deployment patterns\nWHEN NOT: Kubernetes → k8s-reviewer, Terraform → terraform-reviewer\n"
                },
                "content": "# CI/CD Reviewer Skill\n\n## Purpose\nReviews CI/CD pipelines for structure, security, optimization, and best practices.\n\n## When to Use\n- GitHub Actions workflow review\n- GitLab CI pipeline review\n- Jenkins pipeline review\n- Build optimization\n- Deployment strategy review\n\n## Project Detection\n- `.github/workflows/*.yml`\n- `.gitlab-ci.yml`\n- `Jenkinsfile`\n- `azure-pipelines.yml`\n- `.circleci/config.yml`\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Platform**: GitHub Actions\n**Triggers**: push, pull_request\n**Jobs**: build, test, deploy\n**Environments**: staging, production\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full CI/CD review (recommended)\n- Pipeline structure\n- Security and secrets\n- Caching and optimization\n- Deployment strategy\nmultiSelect: true\n```\n\n## Detection Rules\n\n### GitHub Actions\n\n#### Workflow Structure\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| All jobs sequential | Parallelize independent jobs | MEDIUM |\n| No job dependencies | Add needs for proper order | HIGH |\n| Duplicate steps | Extract to composite action | MEDIUM |\n| No concurrency control | Add concurrency group | MEDIUM |\n\n```yaml\n# BAD: Sequential, no optimization\nname: CI\non: push\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: npm install\n      - run: npm run build\n      - run: npm test\n      - run: npm run lint\n      - run: docker build .\n      - run: docker push\n\n# GOOD: Parallel jobs with dependencies\nname: CI\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\nconcurrency:\n  group: ${{ github.workflow }}-${{ github.ref }}\n  cancel-in-progress: true\n\njobs:\n  lint:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n      - run: npm ci\n      - run: npm run lint\n\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n      - run: npm ci\n      - run: npm test\n\n  build:\n    needs: [lint, test]  # Run after lint and test pass\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n      - run: npm ci\n      - run: npm run build\n      - uses: actions/upload-artifact@v4\n        with:\n          name: build\n          path: dist/\n\n  deploy:\n    needs: build\n    if: github.ref == 'refs/heads/main'\n    runs-on: ubuntu-latest\n    environment: production\n    steps:\n      - uses: actions/download-artifact@v4\n        with:\n          name: build\n      - run: ./deploy.sh\n```\n\n#### Security\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Secrets in plain text | Use secrets context | CRITICAL |\n| No permissions defined | Add explicit permissions | HIGH |\n| Third-party actions unpinned | Pin to SHA | HIGH |\n| No environment protection | Use environments | MEDIUM |\n\n```yaml\n# BAD: Security issues\nname: Deploy\non: push\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - run: |\n          curl -X POST https://api.example.com \\\n            -H \"Authorization: Bearer ${{ secrets.API_KEY }}\"\n      - uses: some-org/some-action@main  # Unpinned!\n\n# GOOD: Secure workflow\nname: Deploy\n\non:\n  push:\n    branches: [main]\n\npermissions:\n  contents: read\n  id-token: write  # For OIDC\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    environment: production  # Requires approval\n    steps:\n      - uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n\n      - name: Configure AWS credentials\n        uses: aws-actions/configure-aws-credentials@e3dd6a429d7300a6a4c196c26e071d42e0343502 # v4.0.2\n        with:\n          role-to-assume: ${{ secrets.AWS_ROLE_ARN }}\n          aws-region: us-east-1\n\n      - name: Deploy\n        run: ./deploy.sh\n        env:\n          DEPLOY_TOKEN: ${{ secrets.DEPLOY_TOKEN }}\n```\n\n#### Caching\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No dependency caching | Add cache action | HIGH |\n| No Docker layer cache | Use buildx cache | MEDIUM |\n| Cache key not specific | Include lockfile hash | MEDIUM |\n\n```yaml\n# GOOD: Comprehensive caching\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      # Node.js caching\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n\n      # Or manual cache\n      - uses: actions/cache@v4\n        with:\n          path: ~/.npm\n          key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}\n          restore-keys: |\n            ${{ runner.os }}-node-\n\n      # Docker layer caching\n      - uses: docker/setup-buildx-action@v3\n\n      - uses: docker/build-push-action@v5\n        with:\n          context: .\n          push: true\n          tags: myapp:latest\n          cache-from: type=gha\n          cache-to: type=gha,mode=max\n```\n\n### GitLab CI\n\n```yaml\n# .gitlab-ci.yml\nstages:\n  - lint\n  - test\n  - build\n  - deploy\n\nvariables:\n  NODE_VERSION: \"20\"\n\n.node_template: &node_template\n  image: node:${NODE_VERSION}-alpine\n  cache:\n    key:\n      files:\n        - package-lock.json\n    paths:\n      - node_modules/\n  before_script:\n    - npm ci --cache .npm --prefer-offline\n\nlint:\n  <<: *node_template\n  stage: lint\n  script:\n    - npm run lint\n\ntest:\n  <<: *node_template\n  stage: test\n  script:\n    - npm test\n  coverage: '/Coverage: \\d+\\.\\d+%/'\n  artifacts:\n    reports:\n      junit: junit.xml\n      coverage_report:\n        coverage_format: cobertura\n        path: coverage/cobertura-coverage.xml\n\nbuild:\n  <<: *node_template\n  stage: build\n  script:\n    - npm run build\n  artifacts:\n    paths:\n      - dist/\n    expire_in: 1 week\n\ndeploy_staging:\n  stage: deploy\n  environment:\n    name: staging\n    url: https://staging.example.com\n  script:\n    - ./deploy.sh staging\n  only:\n    - main\n\ndeploy_production:\n  stage: deploy\n  environment:\n    name: production\n    url: https://example.com\n  script:\n    - ./deploy.sh production\n  when: manual\n  only:\n    - main\n```\n\n### Deployment Strategies\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Direct to production | Add staging environment | HIGH |\n| No rollback plan | Add rollback mechanism | HIGH |\n| No health checks | Add post-deploy verification | MEDIUM |\n\n```yaml\n# Blue-Green / Canary with GitHub Actions\ndeploy:\n  runs-on: ubuntu-latest\n  environment: production\n  steps:\n    - name: Deploy canary (10%)\n      run: |\n        kubectl set image deployment/app app=myapp:${{ github.sha }}\n        kubectl rollout status deployment/app --timeout=5m\n\n    - name: Verify canary\n      run: |\n        sleep 60\n        ./verify-deployment.sh\n\n    - name: Promote to 100%\n      if: success()\n      run: kubectl scale deployment/app --replicas=10\n\n    - name: Rollback on failure\n      if: failure()\n      run: kubectl rollout undo deployment/app\n```\n\n## Response Template\n```\n## CI/CD Review Results\n\n**Project**: [name]\n**Platform**: GitHub Actions\n**Jobs**: 4 | **Workflows**: 2\n\n### Pipeline Structure\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | ci.yml | All jobs run sequentially |\n\n### Security\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | deploy.yml | Actions not pinned to SHA |\n\n### Caching\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | ci.yml | No dependency caching |\n\n### Deployment\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | deploy.yml | No staging environment |\n\n### Recommended Actions\n1. [ ] Parallelize lint and test jobs\n2. [ ] Pin all actions to commit SHA\n3. [ ] Add npm caching\n4. [ ] Add staging deployment step\n```\n\n## Best Practices\n1. **Structure**: Parallel jobs, proper dependencies\n2. **Security**: Pin actions, use OIDC, minimal permissions\n3. **Caching**: Cache dependencies and Docker layers\n4. **Deployment**: Staging → Production with approvals\n5. **Monitoring**: Add status checks and notifications\n\n## Integration\n- `docker-reviewer`: Container build steps\n- `k8s-reviewer`: Kubernetes deployments\n- `security-scanner`: SAST/DAST in pipeline"
              },
              {
                "name": "code-reviewer",
                "description": "WHEN: Code review, quality check, code smell detection, refactoring suggestions\nWHAT: Complexity analysis + code smell list + severity-based issues + improvement suggestions\nWHEN NOT: Next.js specific → nextjs-reviewer, Security → security-scanner, Performance → perf-analyzer\n",
                "path": "skills/code-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "code-reviewer",
                  "description": "WHEN: Code review, quality check, code smell detection, refactoring suggestions\nWHAT: Complexity analysis + code smell list + severity-based issues + improvement suggestions\nWHEN NOT: Next.js specific → nextjs-reviewer, Security → security-scanner, Performance → perf-analyzer\n"
                },
                "content": "# Code Reviewer Skill\n\n## Purpose\nAnalyzes code quality, detects code smells, and suggests improvements.\n\n## When to Use\n- Code review requests\n- Code quality, code smell mentions\n- Post-implementation review\n- Pre-merge PR review\n\n## Workflow\n\n### Step 1: Review Scope\n**AskUserQuestion:**\n```\n\"What code should I review?\"\nOptions:\n- Current changes (git diff)\n- Specific file/folder\n- Full project scan\n- Recent commits\n```\n\n### Step 2: Review Focus\n**AskUserQuestion:**\n```\n\"What should I focus on?\"\nOptions:\n- Full quality check (recommended)\n- Bugs/Logic errors\n- Code style/Readability\n- Performance issues\n- Security vulnerabilities\nmultiSelect: true\n```\n\n### Step 3: Analysis\n- **Complexity**: Cyclomatic, Cognitive\n- **Duplication**: DRY violations\n- **Naming**: Variable/function naming quality\n- **Structure**: Function length, nesting depth, parameter count\n\n## Detection Rules\n\n### Code Smells\n| Smell | Threshold | Severity |\n|-------|-----------|----------|\n| Long Function | > 50 lines | MEDIUM |\n| Deep Nesting | > 3 levels | HIGH |\n| Magic Numbers | Hardcoded numbers | LOW |\n| Long Parameter List | > 4 params | MEDIUM |\n| God Object | > 20 methods | HIGH |\n| Duplicate Code | > 10 lines | HIGH |\n\n### Naming Conventions\n| Type | Pattern |\n|------|---------|\n| Function | camelCase, verb prefix |\n| Variable | camelCase, noun |\n| Constant | UPPER_SNAKE_CASE |\n| Class | PascalCase |\n| File | kebab-case or PascalCase |\n\n## Response Template\n```\n## Code Review Results\n\n**Target**: [path]\n\n### CRITICAL (Fix immediately)\n- **[Issue]** `file:line`\n  - Problem: [description]\n  - Solution: [suggestion]\n\n### HIGH | MEDIUM | LOW\n- ...\n\n### Positive Patterns\n- [Well-written code mentions]\n\n### Summary\n- Total issues: X\n- Critical: X | High: X | Medium: X | Low: X\n```\n\n## Best Practices\n1. Provide specific, actionable feedback with solutions\n2. Group by severity: Critical > High > Medium > Low\n3. Include positive feedback\n4. Provide copy-paste ready code fixes\n5. Respect project conventions\n\n## Integration\n- `/analyze-code` command\n- `security-scanner` skill\n- `perf-analyzer` skill\n\n## Notes\n- Reviews are suggestions, final decisions are developer's\n- Maintain consistency with existing project conventions\n- Use with automated linters (ESLint, Prettier)"
              },
              {
                "name": "context-manager",
                "description": "WHEN: Context setup, token optimization, MCP/agent configuration requests\nWHAT: Project analysis + Preset recommendation + MCP server selection + Agent activation + Config generation\nWHEN NOT: Status check only → /context-status command\n",
                "path": "skills/context-manager/SKILL.md",
                "frontmatter": {
                  "name": "context-manager",
                  "description": "WHEN: Context setup, token optimization, MCP/agent configuration requests\nWHAT: Project analysis + Preset recommendation + MCP server selection + Agent activation + Config generation\nWHEN NOT: Status check only → /context-status command\n"
                },
                "content": "# Context Manager Skill\n\n## Purpose\nOptimizes Claude Code's context window by interactively selecting MCP servers, Custom Agents, and Slash Commands per project and generating configuration files.\n\n## When to Use\nActivate when:\n1. User requests \"context setup\", \"context management\", \"token optimization\"\n2. `/context-setup` command is executed\n3. Starting work on a new project (auto-detect and recommend)\n\n## Workflow\n\n### Step 1: Analyze Project\nAnalyze project root files to detect project type.\n\nAnalysis targets:\n- `package.json` (Node.js/JavaScript)\n- `requirements.txt`, `pyproject.toml` (Python)\n- `go.mod` (Go)\n- `Cargo.toml` (Rust)\n- `pom.xml`, `build.gradle` (Java)\n\n### Step 2: Recommend Preset\nRecommend preset based on detected project type.\n\n**AskUserQuestion:**\n```\n\"Select a context preset for your project\"\nOptions:\n- Web Development - React/Vue/Next.js (~28k saved)\n- Python Web - FastAPI/Django/Flask (~30k saved)\n- Go Backend - Gin/Echo/Fiber (~28k saved)\n- Rust Systems - Actix/Axum (~32k saved)\n- DevOps - Docker/K8s/Terraform (~25k saved)\n- Data Science - ML/AI/Data (~30k saved)\n- Full Stack - Web + API + DB (~20k saved)\n- Minimal - Core tools only (~45k saved)\n- Custom - Select manually\n```\n\n### Step 3: Custom Configuration\nIf Custom is selected, choose by category.\n\n**MCP Server Selection:**\n```\nAskUserQuestion: \"Select MCP servers to enable\"\nOptions:\n- GitHub (PR/issue management) - ~8k tokens\n- Playwright (browser automation) - ~12k tokens\n- Brave Search (web search) - ~3k tokens\n- Select all\nmultiSelect: true\n```\n\n**Agent Category Selection:**\n```\nAskUserQuestion: \"Which agent categories do you need?\"\nOptions:\n- Frontend (React, Vue, Next.js, CSS)\n- Python (FastAPI, Django, Flask, Data)\n- Go/Rust (Go API, Rust Systems)\n- Backend (API, DB, Security)\n- DevOps (Docker, K8s, Terraform, CI/CD)\n- Database (SQL, ORM, Migrations)\n- Mobile (iOS, Android, Flutter)\n- AI/ML (ML, DL, NLP)\nmultiSelect: true\n```\n\n### Step 4: Generate Config Files\nCreate based on selections:\n\n1. **`.claude/context-profile.json`**: Project context settings\n2. **`.claude/.mcp.json`**: MCP server settings (selected servers only)\n\n### Step 5: Restart Instructions\nMCP settings apply after session restart.\n\n```\nSetup complete!\n\nGenerated files:\n- .claude/context-profile.json\n- .claude/.mcp.json\n\nActive MCP servers: github, playwright, brave-search\nActive agents: react-expert, css-expert, nodejs-expert\nEstimated token savings: ~28,000 tokens (14%)\n\nRestart Claude Code to apply MCP settings.\n```\n\n## Response Templates\n\n### Project Analysis Result\n```\nProject analyzed.\n\n**Detected project type**: Web Development (React + TypeScript)\n**Confidence**: 85%\n**Recommended preset**: web-dev\n**Estimated token savings**: ~28,000 tokens\n\n[Present preset selection with AskUserQuestion]\n```\n\n### Setup Complete\n```\nContext setup complete!\n\n**Profile**: Web Development\n**Project**: G:\\ai-dev\\my-project\n\n### Active MCP Servers (3/6)\n- github\n- playwright\n- brave-search\n\n### Active Agents (5/55)\n- react-expert\n- css-expert\n- nodejs-expert\n- frontend-optimizer\n- ui-ux-designer\n\n### Generated Files\n- .claude/context-profile.json\n- .claude/.mcp.json\n\n### Estimated Token Savings\n~28,000 tokens (14% saved)\n\nRestart Claude Code to apply MCP settings.\nTo change settings, run `/context-setup`.\n```\n\n### Current Status (/context-status)\n```\n## Current Context Status\n\n**Profile**: Web Development\n**Project**: G:\\ai-dev\\my-project\n\n### MCP Servers (3/6 active)\n[x] github\n[x] playwright\n[x] brave-search\n[ ] filesystem (inactive)\n[ ] openrouter (inactive)\n[ ] context7 (inactive)\n\n### Agents (5/55 active)\n[x] react-expert, css-expert, nodejs-expert, frontend-optimizer, ui-ux-designer\n\n### Estimated Token Savings\n~28,000 tokens\n```\n\n## Best Practices\n\n1. **Analyze first**: Analyze project files before asking questions\n2. **Provide recommendations**: Recommend appropriate preset based on analysis\n3. **Keep options concise**: Keep AskUserQuestion options to 4 or fewer\n4. **Show token savings**: Clearly communicate impact of each choice\n5. **Restart notice**: Always mention restart required for MCP changes\n\n## Integration\n\nThis skill integrates with:\n- `SessionStart` hook: Check project profile existence and notify\n- `/context-setup` command: Activate this skill\n- `/context-status` command: Display current status\n\n## Available Presets\n\n| Preset | Description | MCP Servers | Token Savings |\n|--------|-------------|-------------|---------------|\n| minimal | Core tools only | None | ~45k |\n| web-dev | React/Vue/Next.js | github, playwright, brave-search | ~28k |\n| python-web | FastAPI/Django/Flask | github, brave-search, context7 | ~30k |\n| go-backend | Gin/Echo/Fiber/Chi | github, brave-search, context7 | ~28k |\n| rust-systems | Actix-web/Axum | github, brave-search, context7 | ~32k |\n| devops | Docker/K8s/Terraform | github, brave-search, context7 | ~25k |\n| api-dev | Backend API | github, brave-search, context7 | ~25k |\n| data-science | ML/AI/Data | brave-search, context7, github | ~30k |\n| full-stack | Web + API + DB | github, playwright, brave-search, context7 | ~20k |\n\n## Notes\n\n- Project `.claude/.mcp.json` takes precedence over global settings\n- Agent enable/disable is handled via system prompt instructions\n- Config files can be committed to git for team sharing"
              },
              {
                "name": "coverage-analyzer",
                "description": "WHEN: Coverage analysis, finding untested files, test prioritization, coverage gap identification\nWHAT: Line/Branch/Function coverage + untested file list + priority by importance + improvement roadmap\nWHEN NOT: Test generation → test-generator, Test quality → code-reviewer\n",
                "path": "skills/coverage-analyzer/SKILL.md",
                "frontmatter": {
                  "name": "coverage-analyzer",
                  "description": "WHEN: Coverage analysis, finding untested files, test prioritization, coverage gap identification\nWHAT: Line/Branch/Function coverage + untested file list + priority by importance + improvement roadmap\nWHEN NOT: Test generation → test-generator, Test quality → code-reviewer\n"
                },
                "content": "# Coverage Analyzer Skill\n\n## Purpose\nAnalyzes project test coverage and identifies areas lacking tests. Recommends code to test with priority.\n\n## When to Use\n- Coverage analysis requests\n- Finding untested files\n- Coverage improvement guidance\n- Verifying critical code test status\n\n## Workflow\n\n### Step 1: Check Coverage Status\n```\nAnalyzing test environment...\n\n**Test Runner**: Jest\n**Test Files**: 45\n**Coverage Report**: coverage/lcov-report/\n**Current Coverage**: 68%\n```\n\n### Step 2: Select Analysis Type\n**AskUserQuestion:**\n```\n\"What coverage analysis do you need?\"\nOptions:\n- Overall coverage status\n- Find untested files\n- Low coverage files\n- Critical code test status\n- Coverage improvement priorities\n```\n\n## Analysis Types\n\n### Untested File Detection\n```\nTargets:\n- src/**/*.ts\n- src/**/*.tsx\n- lib/**/*.ts\n\nExcluded:\n- *.d.ts (type definitions)\n- *.test.ts (test files)\n- index.ts (barrel files)\n- *.config.ts (config files)\n```\n\n**Results Format:**\n```\n## Untested Files (15)\n\n### High Priority (Business Logic)\n| File | Lines | Complexity | Recommendation |\n|------|-------|------------|----------------|\n| src/utils/payment.ts | 120 | HIGH | Needs immediate tests |\n| src/services/auth.ts | 85 | HIGH | Needs immediate tests |\n\n### Medium Priority (Utilities)\n| File | Lines | Complexity | Recommendation |\n|------|-------|------------|----------------|\n| src/utils/format.ts | 45 | MEDIUM | Tests recommended |\n\n### Low Priority (Simple Code)\n| File | Lines | Complexity | Recommendation |\n|------|-------|------------|----------------|\n| src/constants/index.ts | 20 | LOW | Optional |\n```\n\n### Coverage Metrics\n| Metric | Description | Target |\n|--------|-------------|--------|\n| Line Coverage | Executed lines ratio | > 80% |\n| Branch Coverage | Executed branches ratio | > 75% |\n| Function Coverage | Executed functions ratio | > 85% |\n| Statement Coverage | Executed statements ratio | > 80% |\n\n**Analysis Results:**\n```\n### Overall Status\n| Metric | Current | Target | Status |\n|--------|---------|--------|--------|\n| Lines | 68% | 80% | WARNING |\n| Branches | 55% | 75% | CRITICAL |\n| Functions | 72% | 85% | WARNING |\n\n### Low Coverage Files (< 50%)\n| File | Lines | Branches | Impact |\n|------|-------|----------|--------|\n| src/services/payment.ts | 23% | 10% | HIGH |\n| src/components/Form.tsx | 45% | 30% | MEDIUM |\n```\n\n### Critical Code Analysis\n**Priority Criteria:**\n| Criteria | Description | Weight |\n|----------|-------------|--------|\n| Business Logic | Payment, auth, data processing | HIGH |\n| Usage Frequency | Import count | MEDIUM |\n| Complexity | Cyclomatic Complexity | MEDIUM |\n| Change Frequency | git log based | LOW |\n\n```\n### CRITICAL (Must Test)\n| File | Importance | Coverage | Recommendation |\n|------|------------|----------|----------------|\n| src/services/payment.ts | CRITICAL | 23% | Add tests immediately |\n| src/utils/auth.ts | CRITICAL | 0% | Create test file |\n\n### HIGH (Should Test)\n| File | Importance | Coverage | Recommendation |\n|------|------------|----------|----------------|\n| src/hooks/useCart.ts | HIGH | 45% | Add edge cases |\n```\n\n### Improvement Priorities\n```\n## Coverage Improvement Priorities\n\n### Priority 1: High Importance + Low Coverage\nNeeds immediate tests\n\n| File | Current | Expected Gain | Effort |\n|------|---------|---------------|--------|\n| src/services/payment.ts | 23% | +57% → 80% | 3 hours |\n| src/utils/auth.ts | 0% | +80% → 80% | 2 hours |\n\n### Priority 2: High Usage Frequency\nFrequently used utilities\n\n| File | Current | Imports | Effort |\n|------|---------|---------|--------|\n| src/utils/format.ts | 45% | 32 | 1 hour |\n| src/hooks/useApi.ts | 60% | 28 | 1 hour |\n\n### Priority 3: High Complexity\nBug-prone code\n\n| File | Current | Complexity | Effort |\n|------|---------|------------|--------|\n| src/components/Form.tsx | 45% | 15 | 2 hours |\n\n### Expected Results\nCurrent: 68%\nAfter Priority 1: 75%\nAfter Priority 2: 80%\nAfter Priority 3: 85%\n```\n\n## Response Template\n```\n## Test Coverage Analysis Results\n\n**Project**: [name]\n\n### Overall Status\n| Metric | Current | Target | Gap |\n|--------|---------|--------|-----|\n| Lines | 68% | 80% | -12% |\n| Branches | 55% | 75% | -20% |\n| Functions | 72% | 85% | -13% |\n\n### Untested Critical Files (5)\n1. `src/services/payment.ts` - Payment logic (CRITICAL)\n2. `src/utils/auth.ts` - Auth utilities (HIGH)\n3. `src/hooks/useCart.ts` - Cart hook (HIGH)\n\n### Low Coverage Files (< 50%)\n1. `src/components/CheckoutForm.tsx` - 45%\n2. `src/services/api.ts` - 38%\n\n### Recommended Actions\n1. [ ] Add payment.ts unit tests (expected +5% overall)\n2. [ ] Create auth.ts test file (expected +3% overall)\n3. [ ] Improve CheckoutForm component tests\n\n### Next Steps\nUse `test-generator` skill to auto-generate tests for these files.\n```\n\n## Best Practices\n1. **Meaningful Coverage**: Focus on critical code, not just numbers\n2. **Gradual Improvement**: Don't aim for 100% at once\n3. **Branch Coverage**: More important than line coverage\n4. **Test Quality**: Avoid meaningless tests just for coverage\n5. **CI Integration**: Fail build on coverage decrease\n\n## Integration\n- `test-generator` skill: Auto-generate missing tests\n- `code-reviewer` skill: Test quality review\n- `/generate-tests` command: Execute test generation\n\n## Notes\n- Uses coverage report files (lcov, coverage.json) if available\n- Estimates based on file analysis if no report\n- 100% coverage is not the goal, focus on critical code"
              },
              {
                "name": "django-reviewer",
                "description": "WHEN: Django project review, ORM queries, views/templates, admin customization\nWHAT: ORM optimization + View patterns + Template security + Admin config + Migration safety\nWHEN NOT: FastAPI → fastapi-reviewer, Flask → flask-reviewer, DRF API only → consider api-expert\n",
                "path": "skills/django-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "django-reviewer",
                  "description": "WHEN: Django project review, ORM queries, views/templates, admin customization\nWHAT: ORM optimization + View patterns + Template security + Admin config + Migration safety\nWHEN NOT: FastAPI → fastapi-reviewer, Flask → flask-reviewer, DRF API only → consider api-expert\n"
                },
                "content": "# Django Reviewer Skill\n\n## Purpose\nReviews Django projects for ORM usage, view patterns, security, and best practices.\n\n## When to Use\n- Django project code review\n- ORM query optimization\n- View/template review\n- Admin customization review\n- Migration safety check\n\n## Project Detection\n- `django` in requirements.txt/pyproject.toml\n- `manage.py` in project root\n- `settings.py` with INSTALLED_APPS\n- `urls.py`, `views.py`, `models.py` files\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Django**: 4.2+ / 5.0+\n**Database**: PostgreSQL/MySQL/SQLite\n**Template Engine**: Django Templates/Jinja2\n**REST**: Django REST Framework\n**Admin**: Django Admin / Unfold\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full Django review (recommended)\n- ORM and query optimization\n- Views and URL patterns\n- Templates and security\n- Admin customization\nmultiSelect: true\n```\n\n## Detection Rules\n\n### ORM Optimization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| N+1 query | Use select_related/prefetch_related | CRITICAL |\n| .all() in template | Prefetch in view | HIGH |\n| filter().first() | Use .filter().first() or get_or_none | LOW |\n| Multiple .save() | Use bulk_update/bulk_create | MEDIUM |\n\n```python\n# BAD: N+1 query\ndef get_orders(request):\n    orders = Order.objects.all()\n    # Each order.customer triggers a query!\n    return render(request, \"orders.html\", {\"orders\": orders})\n\n# GOOD: select_related for ForeignKey\ndef get_orders(request):\n    orders = Order.objects.select_related(\"customer\").all()\n    return render(request, \"orders.html\", {\"orders\": orders})\n\n# GOOD: prefetch_related for ManyToMany/reverse FK\ndef get_orders(request):\n    orders = Order.objects.prefetch_related(\"items\").all()\n    return render(request, \"orders.html\", {\"orders\": orders})\n\n# BAD: Multiple saves\nfor item in items:\n    item.status = \"processed\"\n    item.save()\n\n# GOOD: Bulk update\nItem.objects.filter(id__in=item_ids).update(status=\"processed\")\n```\n\n### View Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Function view for CRUD | Use Class-Based Views | LOW |\n| No permission check | Add @login_required or PermissionMixin | HIGH |\n| Business logic in view | Move to service/manager | MEDIUM |\n| No pagination | Add Paginator | MEDIUM |\n\n```python\n# BAD: Logic in view\ndef create_order(request):\n    if request.method == \"POST\":\n        # Too much logic here\n        user = request.user\n        cart = Cart.objects.get(user=user)\n        order = Order.objects.create(user=user, total=cart.total)\n        for item in cart.items.all():\n            OrderItem.objects.create(order=order, product=item.product)\n        cart.items.all().delete()\n        send_confirmation_email(user, order)\n        return redirect(\"order_detail\", order.id)\n\n# GOOD: Service layer\n# services/order_service.py\nclass OrderService:\n    @staticmethod\n    def create_from_cart(user: User) -> Order:\n        cart = Cart.objects.get(user=user)\n        order = Order.objects.create(user=user, total=cart.total)\n        OrderItem.objects.bulk_create([\n            OrderItem(order=order, product=item.product)\n            for item in cart.items.all()\n        ])\n        cart.items.all().delete()\n        send_confirmation_email.delay(user.id, order.id)  # Celery task\n        return order\n\n# views.py\nclass CreateOrderView(LoginRequiredMixin, View):\n    def post(self, request):\n        order = OrderService.create_from_cart(request.user)\n        return redirect(\"order_detail\", order.id)\n```\n\n### Template Security\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| \\|safe filter misuse | Only use for trusted content | CRITICAL |\n| {% autoescape off %} | Avoid, use mark_safe in Python | HIGH |\n| User input in JS | Use json_script filter | HIGH |\n| No CSRF token | Add {% csrf_token %} | CRITICAL |\n\n```html\n<!-- BAD: XSS vulnerability -->\n<div>{{ user_content|safe }}</div>\n\n<!-- GOOD: Auto-escaped (default) -->\n<div>{{ user_content }}</div>\n\n<!-- BAD: User data in JS -->\n<script>\nvar data = \"{{ user_data }}\";  // XSS risk!\n</script>\n\n<!-- GOOD: json_script filter -->\n{{ user_data|json_script:\"user-data\" }}\n<script>\nconst data = JSON.parse(\n    document.getElementById(\"user-data\").textContent\n);\n</script>\n```\n\n### Model Design\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No indexes on filter fields | Add db_index=True | HIGH |\n| CharField without max_length | Always specify max_length | MEDIUM |\n| No __str__ method | Add for admin display | LOW |\n| No Meta ordering | Add default ordering | LOW |\n\n```python\n# GOOD: Well-designed model\nclass Order(models.Model):\n    user = models.ForeignKey(\n        User,\n        on_delete=models.CASCADE,\n        related_name=\"orders\",\n    )\n    status = models.CharField(\n        max_length=20,\n        choices=OrderStatus.choices,\n        default=OrderStatus.PENDING,\n        db_index=True,  # Frequently filtered\n    )\n    created_at = models.DateTimeField(auto_now_add=True, db_index=True)\n    updated_at = models.DateTimeField(auto_now=True)\n\n    class Meta:\n        ordering = [\"-created_at\"]\n        indexes = [\n            models.Index(fields=[\"user\", \"status\"]),\n        ]\n\n    def __str__(self):\n        return f\"Order {self.id} - {self.user.email}\"\n```\n\n### Migration Safety\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Non-nullable field without default | Add default or null=True first | CRITICAL |\n| Large table ALTER | Use RunSQL with concurrent index | HIGH |\n| Data migration in schema migration | Separate into data migration | MEDIUM |\n\n```python\n# BAD: Adding non-nullable field\nclass Migration(migrations.Migration):\n    operations = [\n        migrations.AddField(\n            model_name=\"order\",\n            name=\"tracking_number\",\n            field=models.CharField(max_length=100),  # Will fail!\n        ),\n    ]\n\n# GOOD: Safe migration strategy\n# Step 1: Add nullable field\nmigrations.AddField(\n    model_name=\"order\",\n    name=\"tracking_number\",\n    field=models.CharField(max_length=100, null=True),\n),\n# Step 2: Data migration to populate\n# Step 3: Make non-nullable with default\n```\n\n## Response Template\n```\n## Django Code Review Results\n\n**Project**: [name]\n**Django**: 5.0 | **DB**: PostgreSQL | **DRF**: 3.14\n\n### ORM Optimization\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | views.py:45 | N+1 query - missing select_related |\n\n### View Patterns\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | views.py:23 | Missing LoginRequiredMixin |\n\n### Template Security\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | templates/user.html:12 | Unsafe |safe filter usage |\n\n### Migrations\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | 0015_add_field.py | Non-nullable field without default |\n\n### Recommended Actions\n1. [ ] Add select_related to order queries\n2. [ ] Add permission mixins to views\n3. [ ] Remove |safe from user content\n4. [ ] Fix migration for tracking_number field\n```\n\n## Best Practices\n1. **ORM**: Always prefetch related objects\n2. **Views**: Use CBV, service layer for logic\n3. **Security**: CSRF, XSS prevention, permissions\n4. **Migrations**: Zero-downtime strategies\n5. **Testing**: Factory Boy, pytest-django\n\n## Integration\n- `python-reviewer`: General Python patterns\n- `security-scanner`: Django security audit\n- `sql-optimizer`: Query analysis"
              },
              {
                "name": "docker-reviewer",
                "description": "WHEN: Dockerfile review, multi-stage builds, layer optimization, docker-compose\nWHAT: Image optimization + Layer caching + Security scanning + Compose best practices + Build efficiency\nWHEN NOT: Kubernetes → k8s-reviewer, Terraform → terraform-reviewer\n",
                "path": "skills/docker-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "docker-reviewer",
                  "description": "WHEN: Dockerfile review, multi-stage builds, layer optimization, docker-compose\nWHAT: Image optimization + Layer caching + Security scanning + Compose best practices + Build efficiency\nWHEN NOT: Kubernetes → k8s-reviewer, Terraform → terraform-reviewer\n"
                },
                "content": "# Docker Reviewer Skill\n\n## Purpose\nReviews Dockerfiles and docker-compose configurations for optimization, security, and best practices.\n\n## When to Use\n- Dockerfile code review\n- Docker image optimization\n- docker-compose.yml review\n- Container security audit\n- Build time optimization\n\n## Project Detection\n- `Dockerfile` in project\n- `docker-compose.yml` or `docker-compose.yaml`\n- `.dockerignore` file\n- `Dockerfile.*` variants\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Base Image**: node:20-alpine\n**Build Type**: Multi-stage\n**Compose**: v3.8\n**Registry**: Docker Hub / ECR / GCR\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full Docker review (recommended)\n- Dockerfile optimization\n- Layer caching strategy\n- Security hardening\n- docker-compose review\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Image Optimization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Large base image | Use alpine/slim/distroless | HIGH |\n| No multi-stage build | Add build stage | MEDIUM |\n| Too many layers | Combine RUN commands | MEDIUM |\n| Installing dev deps | Separate build/runtime | HIGH |\n\n```dockerfile\n# BAD: Large image with dev dependencies\nFROM node:20\nWORKDIR /app\nCOPY . .\nRUN npm install\nRUN npm run build\nCMD [\"node\", \"dist/index.js\"]\n# Result: ~1GB image\n\n# GOOD: Multi-stage with alpine\nFROM node:20-alpine AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci\nCOPY . .\nRUN npm run build\n\nFROM node:20-alpine AS runner\nWORKDIR /app\nENV NODE_ENV=production\nCOPY --from=builder /app/dist ./dist\nCOPY --from=builder /app/node_modules ./node_modules\nUSER node\nCMD [\"node\", \"dist/index.js\"]\n# Result: ~150MB image\n```\n\n### Layer Caching\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| COPY . before install | Copy package files first | HIGH |\n| No .dockerignore | Add .dockerignore | MEDIUM |\n| Changing files early | Order by change frequency | MEDIUM |\n\n```dockerfile\n# BAD: Cache invalidation on every code change\nFROM node:20-alpine\nWORKDIR /app\nCOPY . .                    # Invalidates cache on ANY change\nRUN npm install             # Always reinstalls\n\n# GOOD: Leverage layer caching\nFROM node:20-alpine\nWORKDIR /app\nCOPY package*.json ./       # Only invalidates on package change\nRUN npm ci                  # Cached if packages unchanged\nCOPY . .                    # Code changes don't affect npm cache\nRUN npm run build\n```\n\n```gitignore\n# .dockerignore\nnode_modules\n.git\n.gitignore\n*.md\n.env*\ndist\ncoverage\n.nyc_output\n```\n\n### Security\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Running as root | Add USER directive | CRITICAL |\n| Latest tag | Pin specific version | HIGH |\n| Secrets in build | Use build secrets | CRITICAL |\n| No health check | Add HEALTHCHECK | MEDIUM |\n\n```dockerfile\n# BAD: Security issues\nFROM node:latest           # Unpinned version\nWORKDIR /app\nCOPY . .\nENV API_KEY=secret123      # Secret in image!\nRUN npm install\nCMD [\"node\", \"index.js\"]   # Running as root\n\n# GOOD: Secure Dockerfile\nFROM node:20.10-alpine AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci --only=production\n\nFROM node:20.10-alpine\nWORKDIR /app\n\n# Create non-root user\nRUN addgroup -g 1001 appgroup && \\\n    adduser -u 1001 -G appgroup -s /bin/sh -D appuser\n\nCOPY --from=builder --chown=appuser:appgroup /app/node_modules ./node_modules\nCOPY --chown=appuser:appgroup . .\n\nUSER appuser\n\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n    CMD wget --quiet --tries=1 --spider http://localhost:3000/health || exit 1\n\nEXPOSE 3000\nCMD [\"node\", \"index.js\"]\n```\n\n### Build Secrets (Docker BuildKit)\n```dockerfile\n# syntax=docker/dockerfile:1.4\n\nFROM node:20-alpine\nWORKDIR /app\n\n# Mount secret during build (not stored in layer)\nRUN --mount=type=secret,id=npm_token \\\n    NPM_TOKEN=$(cat /run/secrets/npm_token) \\\n    npm ci\n\n# Build command:\n# DOCKER_BUILDKIT=1 docker build --secret id=npm_token,src=.npmrc .\n```\n\n### RUN Optimization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Multiple RUN for cleanup | Combine in single RUN | MEDIUM |\n| No cleanup after install | Remove cache in same layer | MEDIUM |\n\n```dockerfile\n# BAD: Multiple layers, cache not cleaned\nRUN apt-get update\nRUN apt-get install -y curl\nRUN apt-get clean\n\n# GOOD: Single layer with cleanup\nRUN apt-get update && \\\n    apt-get install -y --no-install-recommends curl && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/*\n```\n\n### Docker Compose\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No resource limits | Add deploy.resources | HIGH |\n| No health checks | Add healthcheck | MEDIUM |\n| Hardcoded config | Use environment variables | MEDIUM |\n| No restart policy | Add restart: unless-stopped | MEDIUM |\n\n```yaml\n# BAD: Minimal compose\nversion: '3.8'\nservices:\n  app:\n    build: .\n    ports:\n      - \"3000:3000\"\n  db:\n    image: postgres\n    environment:\n      POSTGRES_PASSWORD: password123\n\n# GOOD: Production-ready compose\nversion: '3.8'\n\nservices:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - \"3000:3000\"\n    environment:\n      - NODE_ENV=production\n      - DATABASE_URL=postgresql://user:${DB_PASSWORD}@db:5432/app\n    depends_on:\n      db:\n        condition: service_healthy\n    restart: unless-stopped\n    deploy:\n      resources:\n        limits:\n          cpus: '1'\n          memory: 512M\n        reservations:\n          cpus: '0.5'\n          memory: 256M\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"-q\", \"--spider\", \"http://localhost:3000/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n\n  db:\n    image: postgres:15-alpine\n    environment:\n      POSTGRES_USER: user\n      POSTGRES_PASSWORD: ${DB_PASSWORD}\n      POSTGRES_DB: app\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    restart: unless-stopped\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U user -d app\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\nvolumes:\n  postgres_data:\n```\n\n## Response Template\n```\n## Docker Review Results\n\n**Project**: [name]\n**Base Image**: node:20-alpine\n**Build**: Multi-stage | **Compose**: v3.8\n\n### Image Optimization\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | Dockerfile | Using node:latest (~1GB) |\n\n### Layer Caching\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | Dockerfile:5 | COPY . before npm install |\n\n### Security\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | Dockerfile | Running as root user |\n\n### Compose\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | docker-compose.yml | No resource limits |\n\n### Recommended Actions\n1. [ ] Switch to node:20-alpine base image\n2. [ ] Add multi-stage build\n3. [ ] Add USER directive for non-root\n4. [ ] Add resource limits in compose\n```\n\n## Best Practices\n1. **Base Image**: Use alpine/slim/distroless\n2. **Multi-stage**: Separate build and runtime\n3. **Caching**: Order by change frequency\n4. **Security**: Non-root, pinned versions, no secrets\n5. **Compose**: Health checks, resource limits\n\n## Integration\n- `k8s-reviewer`: Kubernetes deployments\n- `security-scanner`: Container security\n- `ci-cd-reviewer`: Build pipelines"
              },
              {
                "name": "fastapi-reviewer",
                "description": "WHEN: FastAPI project review, Pydantic models, async endpoints, dependency injection\nWHAT: Pydantic validation + Dependency injection + Async patterns + OpenAPI docs + Security\nWHEN NOT: Django → django-reviewer, Flask → flask-reviewer, General Python → python-reviewer\n",
                "path": "skills/fastapi-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "fastapi-reviewer",
                  "description": "WHEN: FastAPI project review, Pydantic models, async endpoints, dependency injection\nWHAT: Pydantic validation + Dependency injection + Async patterns + OpenAPI docs + Security\nWHEN NOT: Django → django-reviewer, Flask → flask-reviewer, General Python → python-reviewer\n"
                },
                "content": "# FastAPI Reviewer Skill\n\n## Purpose\nReviews FastAPI projects for API design, Pydantic usage, async patterns, and security.\n\n## When to Use\n- FastAPI project code review\n- Pydantic model review\n- API endpoint design review\n- Async/await pattern check\n- Dependency injection review\n\n## Project Detection\n- `fastapi` in requirements.txt/pyproject.toml\n- `from fastapi import` imports\n- `main.py` with FastAPI() app\n- `routers/` directory structure\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**FastAPI**: 0.100+\n**Pydantic**: v2\n**Database**: SQLAlchemy/Tortoise/Prisma\n**Auth**: OAuth2/JWT\n**Docs**: OpenAPI auto-generated\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full FastAPI review (recommended)\n- Pydantic models and validation\n- Dependency injection patterns\n- Async/await usage\n- Security and authentication\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Pydantic Models\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| dict instead of model | Use Pydantic BaseModel | MEDIUM |\n| Missing Field validation | Add Field constraints | MEDIUM |\n| No Config class | Add model_config | LOW |\n| Mutable default in Field | Use default_factory | HIGH |\n\n```python\n# BAD: Plain dict response\n@app.get(\"/user\")\nasync def get_user() -> dict:\n    return {\"name\": \"John\", \"age\": 30}\n\n# GOOD: Pydantic model\nclass UserResponse(BaseModel):\n    name: str = Field(..., min_length=1, max_length=100)\n    age: int = Field(..., ge=0, le=150)\n\n    model_config = ConfigDict(from_attributes=True)\n\n@app.get(\"/user\")\nasync def get_user() -> UserResponse:\n    return UserResponse(name=\"John\", age=30)\n\n# BAD: Mutable default\nclass Config(BaseModel):\n    items: list[str] = []  # Shared across instances!\n\n# GOOD: default_factory\nclass Config(BaseModel):\n    items: list[str] = Field(default_factory=list)\n```\n\n### Dependency Injection\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Repeated code in endpoints | Extract to Depends() | MEDIUM |\n| Global state access | Use dependency injection | HIGH |\n| No cleanup in deps | Use yield for cleanup | MEDIUM |\n| Hardcoded dependencies | Use Depends for testability | MEDIUM |\n\n```python\n# BAD: Repeated DB session code\n@app.get(\"/users\")\nasync def get_users():\n    db = SessionLocal()\n    try:\n        return db.query(User).all()\n    finally:\n        db.close()\n\n# GOOD: Dependency injection\nasync def get_db() -> AsyncGenerator[AsyncSession, None]:\n    async with async_session() as session:\n        yield session\n\n@app.get(\"/users\")\nasync def get_users(db: AsyncSession = Depends(get_db)):\n    result = await db.execute(select(User))\n    return result.scalars().all()\n```\n\n### Async Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| sync def for I/O | Use async def | HIGH |\n| Blocking call in async | Use run_in_executor | CRITICAL |\n| No async DB driver | Use asyncpg/aiosqlite | HIGH |\n| sync file I/O | Use aiofiles | MEDIUM |\n\n```python\n# BAD: Blocking call in async\n@app.get(\"/data\")\nasync def get_data():\n    response = requests.get(url)  # Blocks event loop!\n    return response.json()\n\n# GOOD: Async HTTP client\n@app.get(\"/data\")\nasync def get_data():\n    async with httpx.AsyncClient() as client:\n        response = await client.get(url)\n        return response.json()\n\n# BAD: Sync file read\n@app.get(\"/file\")\nasync def read_file():\n    with open(\"data.txt\") as f:\n        return f.read()\n\n# GOOD: Async file read\n@app.get(\"/file\")\nasync def read_file():\n    async with aiofiles.open(\"data.txt\") as f:\n        return await f.read()\n```\n\n### API Design\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No response_model | Add response_model param | MEDIUM |\n| Missing status codes | Add responses param | LOW |\n| No tags | Add tags for grouping | LOW |\n| Inconsistent naming | Use RESTful conventions | MEDIUM |\n\n```python\n# BAD: Minimal endpoint\n@app.post(\"/user\")\nasync def create(data: dict):\n    return {\"id\": 1}\n\n# GOOD: Full specification\n@app.post(\n    \"/users\",\n    response_model=UserResponse,\n    status_code=status.HTTP_201_CREATED,\n    responses={\n        409: {\"model\": ErrorResponse, \"description\": \"User exists\"},\n    },\n    tags=[\"users\"],\n    summary=\"Create a new user\",\n)\nasync def create_user(\n    user: UserCreate,\n    db: AsyncSession = Depends(get_db),\n) -> UserResponse:\n    \"\"\"Create a new user with the provided details.\"\"\"\n    return await user_service.create(db, user)\n```\n\n### Security\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No auth on endpoints | Add Depends(get_current_user) | CRITICAL |\n| Secrets in code | Use environment variables | CRITICAL |\n| No rate limiting | Add slowapi/fastapi-limiter | HIGH |\n| Missing CORS config | Configure CORSMiddleware | HIGH |\n\n```python\n# Security setup\nfrom fastapi.security import OAuth2PasswordBearer\nfrom fastapi.middleware.cors import CORSMiddleware\n\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")\n\nasync def get_current_user(\n    token: str = Depends(oauth2_scheme),\n    db: AsyncSession = Depends(get_db),\n) -> User:\n    user = await verify_token(token, db)\n    if not user:\n        raise HTTPException(status_code=401, detail=\"Invalid token\")\n    return user\n\n# Protected endpoint\n@app.get(\"/me\")\nasync def get_me(user: User = Depends(get_current_user)):\n    return user\n```\n\n## Response Template\n```\n## FastAPI Code Review Results\n\n**Project**: [name]\n**FastAPI**: 0.109 | **Pydantic**: v2 | **DB**: SQLAlchemy async\n\n### Pydantic Models\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | schemas.py:15 | Mutable default in Field |\n\n### Dependency Injection\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | routers/users.py | Repeated DB session code |\n\n### Async Patterns\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | services/external.py:34 | Blocking requests.get() call |\n\n### Security\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | main.py | No CORS configuration |\n\n### Recommended Actions\n1. [ ] Replace blocking HTTP calls with httpx async\n2. [ ] Add CORS middleware configuration\n3. [ ] Extract repeated code to dependencies\n4. [ ] Add response_model to all endpoints\n```\n\n## Best Practices\n1. **Pydantic v2**: Use model_config, Field validators\n2. **Async Everything**: DB, HTTP, file I/O\n3. **Dependencies**: Extract common logic\n4. **Security**: OAuth2, CORS, rate limiting\n5. **Documentation**: OpenAPI auto-docs with examples\n\n## Integration\n- `python-reviewer`: General Python patterns\n- `security-scanner`: API security audit\n- `api-documenter`: OpenAPI enhancement"
              },
              {
                "name": "flask-reviewer",
                "description": "WHEN: Flask project review, Blueprint structure, extensions, request handling\nWHAT: Blueprint organization + Extension patterns + Request/response handling + Configuration + Testing\nWHEN NOT: FastAPI → fastapi-reviewer, Django → django-reviewer, General Python → python-reviewer\n",
                "path": "skills/flask-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "flask-reviewer",
                  "description": "WHEN: Flask project review, Blueprint structure, extensions, request handling\nWHAT: Blueprint organization + Extension patterns + Request/response handling + Configuration + Testing\nWHEN NOT: FastAPI → fastapi-reviewer, Django → django-reviewer, General Python → python-reviewer\n"
                },
                "content": "# Flask Reviewer Skill\n\n## Purpose\nReviews Flask projects for application structure, extension usage, and best practices.\n\n## When to Use\n- Flask project code review\n- Blueprint structure review\n- Extension configuration review\n- Request handling patterns\n- Flask API design\n\n## Project Detection\n- `flask` in requirements.txt/pyproject.toml\n- `from flask import Flask` imports\n- `app.py` or `__init__.py` with Flask()\n- `blueprints/` or `routes/` directory\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Flask**: 3.0+\n**Extensions**: Flask-SQLAlchemy, Flask-Login, Flask-WTF\n**API**: Flask-RESTful / Flask-RESTX\n**Database**: SQLAlchemy\n**Template**: Jinja2\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full Flask review (recommended)\n- Application structure\n- Blueprint organization\n- Extension configuration\n- Security and validation\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Application Factory\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Global app instance | Use application factory | HIGH |\n| Config in code | Use config classes | MEDIUM |\n| No extension init | Use init_app pattern | MEDIUM |\n| Circular imports | Use factory + blueprints | HIGH |\n\n```python\n# BAD: Global app instance\n# app.py\nfrom flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\n\napp = Flask(__name__)\ndb = SQLAlchemy(app)  # Tight coupling\n\n# GOOD: Application factory\n# app/__init__.py\nfrom flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\n\ndb = SQLAlchemy()\n\ndef create_app(config_name=\"default\"):\n    app = Flask(__name__)\n    app.config.from_object(config[config_name])\n\n    db.init_app(app)\n\n    from app.routes import main_bp, api_bp\n    app.register_blueprint(main_bp)\n    app.register_blueprint(api_bp, url_prefix=\"/api\")\n\n    return app\n```\n\n### Blueprint Organization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| All routes in one file | Split into blueprints | MEDIUM |\n| No URL prefix | Add url_prefix to blueprints | LOW |\n| Mixed concerns | Separate by domain | MEDIUM |\n| No __init__.py exports | Export blueprint properly | LOW |\n\n```python\n# GOOD: Blueprint structure\n# app/routes/users.py\nfrom flask import Blueprint, request, jsonify\n\nusers_bp = Blueprint(\"users\", __name__, url_prefix=\"/users\")\n\n@users_bp.route(\"/\", methods=[\"GET\"])\ndef list_users():\n    return jsonify(users=User.query.all())\n\n@users_bp.route(\"/<int:user_id>\", methods=[\"GET\"])\ndef get_user(user_id):\n    user = User.query.get_or_404(user_id)\n    return jsonify(user=user.to_dict())\n\n# app/routes/__init__.py\nfrom app.routes.users import users_bp\nfrom app.routes.products import products_bp\n\n__all__ = [\"users_bp\", \"products_bp\"]\n```\n\n### Request Handling\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No input validation | Use marshmallow/pydantic | HIGH |\n| request.json without check | Handle None case | MEDIUM |\n| No error handlers | Add @app.errorhandler | MEDIUM |\n| Sync blocking calls | Consider async or Celery | MEDIUM |\n\n```python\n# BAD: No validation\n@app.route(\"/user\", methods=[\"POST\"])\ndef create_user():\n    data = request.json  # Could be None!\n    user = User(name=data[\"name\"])  # KeyError risk\n    return jsonify(user.to_dict())\n\n# GOOD: With validation (marshmallow)\nfrom marshmallow import Schema, fields, validate\n\nclass UserSchema(Schema):\n    name = fields.Str(required=True, validate=validate.Length(min=1, max=100))\n    email = fields.Email(required=True)\n\nuser_schema = UserSchema()\n\n@app.route(\"/user\", methods=[\"POST\"])\ndef create_user():\n    data = request.get_json()\n    if not data:\n        return jsonify(error=\"No JSON data\"), 400\n\n    errors = user_schema.validate(data)\n    if errors:\n        return jsonify(errors=errors), 400\n\n    user = User(**user_schema.load(data))\n    db.session.add(user)\n    db.session.commit()\n    return jsonify(user=user.to_dict()), 201\n```\n\n### Configuration\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Secrets in code | Use environment variables | CRITICAL |\n| No config classes | Use config hierarchy | MEDIUM |\n| DEBUG=True in prod | Environment-based config | CRITICAL |\n| No instance folder | Use instance config | LOW |\n\n```python\n# config.py\nimport os\n\nclass Config:\n    SECRET_KEY = os.environ.get(\"SECRET_KEY\") or \"dev-key-change-me\"\n    SQLALCHEMY_TRACK_MODIFICATIONS = False\n\nclass DevelopmentConfig(Config):\n    DEBUG = True\n    SQLALCHEMY_DATABASE_URI = os.environ.get(\"DEV_DATABASE_URL\") or \\\n        \"sqlite:///dev.db\"\n\nclass ProductionConfig(Config):\n    DEBUG = False\n    SQLALCHEMY_DATABASE_URI = os.environ.get(\"DATABASE_URL\")\n\n    @classmethod\n    def init_app(cls, app):\n        # Production-specific initialization\n        import logging\n        from logging.handlers import RotatingFileHandler\n\n        handler = RotatingFileHandler(\"app.log\", maxBytes=10240, backupCount=10)\n        handler.setLevel(logging.INFO)\n        app.logger.addHandler(handler)\n\nconfig = {\n    \"development\": DevelopmentConfig,\n    \"production\": ProductionConfig,\n    \"default\": DevelopmentConfig,\n}\n```\n\n### Error Handling\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No custom error pages | Add error handlers | MEDIUM |\n| Exception details in response | Hide in production | HIGH |\n| No logging | Add structured logging | MEDIUM |\n\n```python\n# app/errors.py\nfrom flask import jsonify, render_template\n\ndef register_error_handlers(app):\n    @app.errorhandler(400)\n    def bad_request(error):\n        if request_wants_json():\n            return jsonify(error=\"Bad request\"), 400\n        return render_template(\"errors/400.html\"), 400\n\n    @app.errorhandler(404)\n    def not_found(error):\n        if request_wants_json():\n            return jsonify(error=\"Not found\"), 404\n        return render_template(\"errors/404.html\"), 404\n\n    @app.errorhandler(500)\n    def internal_error(error):\n        db.session.rollback()\n        app.logger.error(f\"Internal error: {error}\")\n        if request_wants_json():\n            return jsonify(error=\"Internal server error\"), 500\n        return render_template(\"errors/500.html\"), 500\n\ndef request_wants_json():\n    return request.accept_mimetypes.best_match(\n        [\"application/json\", \"text/html\"]\n    ) == \"application/json\"\n```\n\n## Response Template\n```\n## Flask Code Review Results\n\n**Project**: [name]\n**Flask**: 3.0 | **SQLAlchemy**: 2.0 | **Extensions**: Login, WTF\n\n### Application Structure\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | app.py | Global app instance - use factory |\n\n### Blueprint Organization\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | routes.py | 50+ routes - split into blueprints |\n\n### Request Handling\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | views.py:34 | No input validation on POST |\n\n### Configuration\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | config.py | SECRET_KEY hardcoded |\n\n### Recommended Actions\n1. [ ] Implement application factory pattern\n2. [ ] Split routes into domain blueprints\n3. [ ] Add marshmallow validation schemas\n4. [ ] Move secrets to environment variables\n```\n\n## Best Practices\n1. **Factory Pattern**: Always use create_app()\n2. **Blueprints**: Organize by domain/feature\n3. **Validation**: marshmallow or pydantic\n4. **Config**: Environment-based hierarchy\n5. **Extensions**: Use init_app pattern\n\n## Integration\n- `python-reviewer`: General Python patterns\n- `security-scanner`: Flask security audit\n- `api-documenter`: API documentation"
              },
              {
                "name": "flutter-reviewer",
                "description": "WHEN: Flutter/Dart code review, Widget patterns, State management checks, BLoC/Provider/Riverpod analysis\nWHAT: Widget best practices + State management patterns + Performance optimization + Platform channel review\nWHEN NOT: Native Android → kotlin-android-reviewer, Native iOS → ios-reviewer\n",
                "path": "skills/flutter-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "flutter-reviewer",
                  "description": "WHEN: Flutter/Dart code review, Widget patterns, State management checks, BLoC/Provider/Riverpod analysis\nWHAT: Widget best practices + State management patterns + Performance optimization + Platform channel review\nWHEN NOT: Native Android → kotlin-android-reviewer, Native iOS → ios-reviewer\n"
                },
                "content": "# Flutter Reviewer Skill\n\n## Purpose\nReviews Flutter/Dart code for widget patterns, state management, performance, and cross-platform best practices.\n\n## When to Use\n- Flutter project code review\n- \"Widget\", \"BLoC\", \"Provider\", \"Riverpod\", \"GetX\" mentions\n- Flutter performance, rebuild optimization inspection\n- Projects with `pubspec.yaml` containing flutter dependency\n\n## Project Detection\n- `pubspec.yaml` with `flutter:` dependency\n- `lib/main.dart` exists\n- `android/` and `ios/` directories present\n- `.dart` files with Flutter imports\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Flutter**: 3.x\n**Dart**: 3.x\n**State Management**: BLoC / Provider / Riverpod / GetX\n**Architecture**: Clean Architecture / MVVM / MVC\n**Null Safety**: Enabled\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full Flutter pattern check (recommended)\n- Widget build optimization\n- State management patterns\n- Platform channels/native code\n- Navigation/routing patterns\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Widget Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Heavy logic in build() | Move to initState or separate method | HIGH |\n| Missing const constructor | Add const for immutable widgets | HIGH |\n| Unnecessary setState | Use state management for complex state | MEDIUM |\n| Large build method | Extract to smaller widgets | MEDIUM |\n| Missing key in ListView | Add key for correct item tracking | HIGH |\n\n```dart\n// BAD: Heavy logic in build\nclass MyWidget extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    final result = expensiveCalculation();  // Called every build\n    return Text(result);\n  }\n}\n\n// GOOD: Compute outside or cache\nclass MyWidget extends StatefulWidget {\n  @override\n  _MyWidgetState createState() => _MyWidgetState();\n}\n\nclass _MyWidgetState extends State<MyWidget> {\n  late String result;\n\n  @override\n  void initState() {\n    super.initState();\n    result = expensiveCalculation();\n  }\n\n  @override\n  Widget build(BuildContext context) => Text(result);\n}\n\n// BAD: Missing const\nclass MyWidget extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return Container(\n      child: Text('Hello'),  // Rebuilds unnecessarily\n    );\n  }\n}\n\n// GOOD: Use const\nclass MyWidget extends StatelessWidget {\n  const MyWidget({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    return const Text('Hello');  // Skipped in rebuilds\n  }\n}\n\n// BAD: Missing key in ListView\nListView.builder(\n  itemBuilder: (context, index) => ListTile(\n    title: Text(items[index].name),\n  ),\n)\n\n// GOOD: Add key\nListView.builder(\n  itemBuilder: (context, index) => ListTile(\n    key: ValueKey(items[index].id),\n    title: Text(items[index].name),\n  ),\n)\n```\n\n### State Management - BLoC\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| BLoC without close | Memory leak risk | CRITICAL |\n| emit after close | Runtime error risk | HIGH |\n| Nested BlocBuilder | Use BlocSelector or MultiBlocListener | MEDIUM |\n| Business logic in UI | Move to BLoC | MEDIUM |\n\n```dart\n// BAD: BLoC not closed\nclass MyWidget extends StatefulWidget {\n  @override\n  _MyWidgetState createState() => _MyWidgetState();\n}\n\nclass _MyWidgetState extends State<MyWidget> {\n  final bloc = MyBloc();\n\n  @override\n  Widget build(BuildContext context) => BlocBuilder...\n  // Missing dispose!\n}\n\n// GOOD: Close BLoC\n@override\nvoid dispose() {\n  bloc.close();\n  super.dispose();\n}\n\n// Better: Use BlocProvider\nBlocProvider(\n  create: (context) => MyBloc(),\n  child: MyWidget(),  // Auto-disposed\n)\n\n// BAD: Nested BlocBuilder\nBlocBuilder<BlocA, StateA>(\n  builder: (context, stateA) {\n    return BlocBuilder<BlocB, StateB>(\n      builder: (context, stateB) {\n        return Text('${stateA.value} ${stateB.value}');\n      },\n    );\n  },\n)\n\n// GOOD: Use MultiBlocListener or BlocSelector\nMultiBlocListener(\n  listeners: [\n    BlocListener<BlocA, StateA>(...),\n    BlocListener<BlocB, StateB>(...),\n  ],\n  child: Builder(\n    builder: (context) {\n      final a = context.watch<BlocA>().state;\n      final b = context.watch<BlocB>().state;\n      return Text('${a.value} ${b.value}');\n    },\n  ),\n)\n```\n\n### State Management - Provider/Riverpod\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Provider not disposed | Memory leak | HIGH |\n| ChangeNotifier without notifyListeners | UI not updated | HIGH |\n| context.read in build | Use context.watch | HIGH |\n| Missing ProviderScope | Riverpod won't work | CRITICAL |\n\n```dart\n// BAD: context.read in build (for reactive updates)\n@override\nWidget build(BuildContext context) {\n  final value = context.read<MyProvider>().value;  // Won't rebuild!\n  return Text(value);\n}\n\n// GOOD: context.watch for reactive\n@override\nWidget build(BuildContext context) {\n  final value = context.watch<MyProvider>().value;\n  return Text(value);\n}\n\n// BAD: Missing notifyListeners\nclass MyNotifier extends ChangeNotifier {\n  int _count = 0;\n  int get count => _count;\n\n  void increment() {\n    _count++;\n    // Missing notifyListeners()!\n  }\n}\n\n// GOOD: Call notifyListeners\nvoid increment() {\n  _count++;\n  notifyListeners();\n}\n\n// Riverpod: Missing ProviderScope\nvoid main() {\n  runApp(MyApp());  // Riverpod providers won't work!\n}\n\n// GOOD: Wrap with ProviderScope\nvoid main() {\n  runApp(\n    ProviderScope(\n      child: MyApp(),\n    ),\n  );\n}\n```\n\n### Performance Optimization\n| Check | Problem | Solution |\n|-------|---------|----------|\n| Unnecessary rebuilds | Performance | const, shouldRebuild, select |\n| Heavy images | Memory/performance | cached_network_image, resize |\n| Sync file I/O | UI jank | Use compute() or Isolate |\n| AnimationController not disposed | Memory leak | Dispose in dispose() |\n\n```dart\n// BAD: Sync heavy operation\nvoid loadData() {\n  final data = File('large.json').readAsStringSync();\n  final parsed = jsonDecode(data);  // Blocks UI!\n}\n\n// GOOD: Use compute/Isolate\nFuture<void> loadData() async {\n  final data = await compute(parseJson, filePath);\n}\n\n// BAD: AnimationController leak\nclass _MyState extends State<MyWidget> with TickerProviderStateMixin {\n  late AnimationController _controller;\n\n  @override\n  void initState() {\n    super.initState();\n    _controller = AnimationController(vsync: this);\n  }\n  // Missing dispose!\n}\n\n// GOOD: Dispose controller\n@override\nvoid dispose() {\n  _controller.dispose();\n  super.dispose();\n}\n```\n\n### Platform Channels\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Missing null check | Crash on null | HIGH |\n| No error handling | Silent failures | MEDIUM |\n| Main thread blocking | ANR/UI freeze | HIGH |\n| Hard-coded channel name | Maintenance issue | LOW |\n\n```dart\n// BAD: No error handling\nFuture<String> getPlatformVersion() async {\n  final version = await platform.invokeMethod('getVersion');\n  return version;\n}\n\n// GOOD: Error handling\nFuture<String> getPlatformVersion() async {\n  try {\n    final version = await platform.invokeMethod<String>('getVersion');\n    return version ?? 'Unknown';\n  } on PlatformException catch (e) {\n    return 'Failed: ${e.message}';\n  }\n}\n```\n\n## Response Template\n```\n## Flutter Code Review Results\n\n**Project**: [name]\n**Flutter**: 3.x | **Dart**: 3.x\n**State Management**: BLoC/Provider/Riverpod\n**Files Analyzed**: X\n\n### Widget Patterns\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | lib/screens/home.dart | Missing const constructor (line 45) |\n| HIGH | lib/widgets/list_item.dart | Missing key in ListView |\n\n### State Management\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | lib/blocs/user_bloc.dart | BLoC not closed (line 23) |\n| HIGH | lib/providers/cart.dart | Missing notifyListeners |\n\n### Performance\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | lib/services/data.dart | Sync file I/O blocking UI |\n| MEDIUM | lib/screens/gallery.dart | Large images not cached |\n\n### Recommended Actions\n1. [ ] Add const to immutable widgets\n2. [ ] Close BLoCs in dispose or use BlocProvider\n3. [ ] Use compute() for heavy operations\n4. [ ] Add keys to ListView items\n```\n\n## Best Practices\n1. **Widgets**: Use const, extract small widgets, add keys\n2. **State**: Choose appropriate state management, dispose resources\n3. **Performance**: Avoid rebuilds, use isolates for heavy work\n4. **Platform**: Handle errors, use typed method channels\n5. **Testing**: Widget tests, golden tests, integration tests\n\n## Integration\n- `code-reviewer` skill: General Dart code quality\n- `test-generator` skill: Flutter test generation\n- `kotlin-android-reviewer` skill: Platform channel Android side\n- `ios-reviewer` skill: Platform channel iOS side\n\n## Notes\n- Based on Flutter 3.x, Dart 3.x with null safety\n- Supports BLoC, Provider, Riverpod, GetX patterns\n- Includes platform channel best practices"
              },
              {
                "name": "go-api-reviewer",
                "description": "WHEN: Go API review with Gin/Echo/Fiber/Chi, router patterns, middleware, request handling\nWHAT: Router organization + Middleware patterns + Request validation + Error responses + OpenAPI\nWHEN NOT: General Go → go-reviewer, Rust API → rust-api-reviewer\n",
                "path": "skills/go-api-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "go-api-reviewer",
                  "description": "WHEN: Go API review with Gin/Echo/Fiber/Chi, router patterns, middleware, request handling\nWHAT: Router organization + Middleware patterns + Request validation + Error responses + OpenAPI\nWHEN NOT: General Go → go-reviewer, Rust API → rust-api-reviewer\n"
                },
                "content": "# Go API Reviewer Skill\n\n## Purpose\nReviews Go API projects using Gin, Echo, Fiber, or Chi for routing, middleware, and API patterns.\n\n## When to Use\n- Go REST API code review\n- Gin/Echo/Fiber/Chi project review\n- Middleware implementation review\n- API request/response handling\n- API documentation review\n\n## Project Detection\n- `github.com/gin-gonic/gin` import\n- `github.com/labstack/echo` import\n- `github.com/gofiber/fiber` import\n- `github.com/go-chi/chi` import\n- `handlers/`, `routes/`, `middleware/` directories\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Framework**: Gin v1.9+\n**Router**: Group-based routing\n**Middleware**: Auth, CORS, Logger, Recovery\n**Validation**: go-playground/validator\n**Docs**: Swagger/OpenAPI\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full API review (recommended)\n- Router and handler patterns\n- Middleware implementation\n- Request validation\n- Error handling and responses\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Router Organization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| All routes in main | Use router groups | MEDIUM |\n| No versioning | Add /api/v1 prefix | MEDIUM |\n| Inconsistent naming | Follow REST conventions | LOW |\n| No route grouping | Group by resource | MEDIUM |\n\n```go\n// BAD: All routes in main.go\nfunc main() {\n    r := gin.Default()\n    r.GET(\"/users\", getUsers)\n    r.POST(\"/users\", createUser)\n    r.GET(\"/users/:id\", getUser)\n    r.GET(\"/products\", getProducts)\n    // ... 50 more routes\n}\n\n// GOOD: Organized route groups (Gin)\nfunc SetupRouter() *gin.Engine {\n    r := gin.Default()\n\n    api := r.Group(\"/api/v1\")\n    {\n        users := api.Group(\"/users\")\n        {\n            users.GET(\"\", listUsers)\n            users.POST(\"\", createUser)\n            users.GET(\"/:id\", getUser)\n            users.PUT(\"/:id\", updateUser)\n            users.DELETE(\"/:id\", deleteUser)\n        }\n\n        products := api.Group(\"/products\")\n        {\n            products.GET(\"\", listProducts)\n            products.GET(\"/:id\", getProduct)\n        }\n    }\n\n    return r\n}\n\n// GOOD: Separate route files\n// routes/users.go\nfunc RegisterUserRoutes(rg *gin.RouterGroup) {\n    users := rg.Group(\"/users\")\n    h := NewUserHandler()\n\n    users.GET(\"\", h.List)\n    users.POST(\"\", h.Create)\n    users.GET(\"/:id\", h.Get)\n}\n```\n\n### Middleware Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Auth in handler | Extract to middleware | HIGH |\n| No recovery middleware | Add panic recovery | HIGH |\n| No request ID | Add request ID middleware | MEDIUM |\n| Middleware order wrong | Order: Logger → Recovery → Auth | MEDIUM |\n\n```go\n// GOOD: Middleware stack (Gin)\nfunc SetupMiddleware(r *gin.Engine) {\n    // Order matters!\n    r.Use(gin.Logger())\n    r.Use(gin.Recovery())\n    r.Use(RequestIDMiddleware())\n    r.Use(CORSMiddleware())\n}\n\n// GOOD: Auth middleware\nfunc AuthMiddleware() gin.HandlerFunc {\n    return func(c *gin.Context) {\n        token := c.GetHeader(\"Authorization\")\n        if token == \"\" {\n            c.AbortWithStatusJSON(401, gin.H{\"error\": \"unauthorized\"})\n            return\n        }\n\n        claims, err := ValidateToken(token)\n        if err != nil {\n            c.AbortWithStatusJSON(401, gin.H{\"error\": \"invalid token\"})\n            return\n        }\n\n        c.Set(\"user_id\", claims.UserID)\n        c.Next()\n    }\n}\n\n// Usage\napi := r.Group(\"/api/v1\")\napi.Use(AuthMiddleware())\n\n// GOOD: Request ID middleware\nfunc RequestIDMiddleware() gin.HandlerFunc {\n    return func(c *gin.Context) {\n        requestID := c.GetHeader(\"X-Request-ID\")\n        if requestID == \"\" {\n            requestID = uuid.New().String()\n        }\n        c.Set(\"request_id\", requestID)\n        c.Header(\"X-Request-ID\", requestID)\n        c.Next()\n    }\n}\n```\n\n### Request Validation\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Manual validation | Use validator tags | MEDIUM |\n| No binding errors | Return validation errors | HIGH |\n| No request DTOs | Define request structs | MEDIUM |\n| Missing required fields | Add binding:\"required\" | HIGH |\n\n```go\n// GOOD: Request struct with validation\ntype CreateUserRequest struct {\n    Name     string `json:\"name\" binding:\"required,min=1,max=100\"`\n    Email    string `json:\"email\" binding:\"required,email\"`\n    Age      int    `json:\"age\" binding:\"gte=0,lte=150\"`\n    Role     string `json:\"role\" binding:\"oneof=admin user guest\"`\n    Password string `json:\"password\" binding:\"required,min=8\"`\n}\n\n// GOOD: Handler with validation\nfunc (h *UserHandler) Create(c *gin.Context) {\n    var req CreateUserRequest\n    if err := c.ShouldBindJSON(&req); err != nil {\n        c.JSON(400, gin.H{\n            \"error\":   \"validation_error\",\n            \"details\": formatValidationErrors(err),\n        })\n        return\n    }\n\n    user, err := h.service.Create(c.Request.Context(), &req)\n    if err != nil {\n        handleError(c, err)\n        return\n    }\n\n    c.JSON(201, user)\n}\n\n// GOOD: Format validation errors\nfunc formatValidationErrors(err error) map[string]string {\n    errors := make(map[string]string)\n\n    var ve validator.ValidationErrors\n    if errors.As(err, &ve) {\n        for _, e := range ve {\n            field := strings.ToLower(e.Field())\n            errors[field] = getErrorMessage(e)\n        }\n    }\n\n    return errors\n}\n```\n\n### Error Handling\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Inconsistent error format | Use standard error response | HIGH |\n| Internal errors exposed | Hide implementation details | HIGH |\n| No error codes | Add error codes | MEDIUM |\n| HTTP status inconsistent | Follow REST conventions | MEDIUM |\n\n```go\n// GOOD: Standard error response\ntype ErrorResponse struct {\n    Error   string            `json:\"error\"`\n    Code    string            `json:\"code,omitempty\"`\n    Details map[string]string `json:\"details,omitempty\"`\n}\n\n// GOOD: Custom errors\nvar (\n    ErrNotFound     = &AppError{Code: \"NOT_FOUND\", Status: 404}\n    ErrUnauthorized = &AppError{Code: \"UNAUTHORIZED\", Status: 401}\n    ErrConflict     = &AppError{Code: \"CONFLICT\", Status: 409}\n)\n\ntype AppError struct {\n    Code    string\n    Status  int\n    Message string\n}\n\nfunc (e *AppError) Error() string {\n    return e.Message\n}\n\n// GOOD: Error handler\nfunc handleError(c *gin.Context, err error) {\n    var appErr *AppError\n    if errors.As(err, &appErr) {\n        c.JSON(appErr.Status, ErrorResponse{\n            Error: appErr.Message,\n            Code:  appErr.Code,\n        })\n        return\n    }\n\n    // Log internal error, return generic message\n    log.Printf(\"internal error: %v\", err)\n    c.JSON(500, ErrorResponse{\n        Error: \"Internal server error\",\n        Code:  \"INTERNAL_ERROR\",\n    })\n}\n```\n\n### Framework-Specific (Echo)\n```go\n// Echo example\nfunc SetupEcho() *echo.Echo {\n    e := echo.New()\n\n    e.Use(middleware.Logger())\n    e.Use(middleware.Recover())\n    e.Use(middleware.RequestID())\n    e.Use(middleware.CORS())\n\n    api := e.Group(\"/api/v1\")\n    api.Use(AuthMiddleware)\n\n    RegisterUserRoutes(api)\n\n    return e\n}\n\n// Echo handler\nfunc (h *UserHandler) Create(c echo.Context) error {\n    var req CreateUserRequest\n    if err := c.Bind(&req); err != nil {\n        return echo.NewHTTPError(400, \"invalid request\")\n    }\n\n    if err := c.Validate(&req); err != nil {\n        return err\n    }\n\n    user, err := h.service.Create(c.Request().Context(), &req)\n    if err != nil {\n        return err\n    }\n\n    return c.JSON(201, user)\n}\n```\n\n## Response Template\n```\n## Go API Code Review Results\n\n**Project**: [name]\n**Framework**: Gin 1.9 | **Go**: 1.22\n\n### Router Organization\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | main.go | 40+ routes in single file |\n\n### Middleware\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | handlers/user.go | Auth check in handler, not middleware |\n\n### Validation\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | handlers/user.go:34 | No request validation |\n\n### Error Handling\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | handlers/product.go | Inconsistent error response format |\n\n### Recommended Actions\n1. [ ] Split routes into separate files by resource\n2. [ ] Extract auth logic to middleware\n3. [ ] Add request struct validation\n4. [ ] Implement standard error response format\n```\n\n## Best Practices\n1. **Router**: Group by resource, version API\n2. **Middleware**: Proper order, reusable\n3. **Validation**: Use validator tags\n4. **Errors**: Standard format, hide internals\n5. **Docs**: Generate OpenAPI from code\n\n## Integration\n- `go-reviewer`: General Go patterns\n- `security-scanner`: API security\n- `api-documenter`: OpenAPI documentation"
              },
              {
                "name": "go-reviewer",
                "description": "WHEN: Go project review, error handling, goroutines, interfaces, testing\nWHAT: Error handling patterns + Concurrency safety + Interface design + Testing + Idiomatic Go\nWHEN NOT: Go API frameworks → go-api-reviewer, Rust → rust-reviewer\n",
                "path": "skills/go-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "go-reviewer",
                  "description": "WHEN: Go project review, error handling, goroutines, interfaces, testing\nWHAT: Error handling patterns + Concurrency safety + Interface design + Testing + Idiomatic Go\nWHEN NOT: Go API frameworks → go-api-reviewer, Rust → rust-reviewer\n"
                },
                "content": "# Go Reviewer Skill\n\n## Purpose\nReviews Go code for idiomatic patterns, error handling, concurrency, and best practices.\n\n## When to Use\n- Go project code review\n- Error handling review\n- Goroutine/channel review\n- Interface design review\n- Go testing patterns\n\n## Project Detection\n- `go.mod` in project root\n- `.go` files\n- `cmd/`, `internal/`, `pkg/` structure\n- `*_test.go` test files\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Go Version**: 1.21+\n**Module**: github.com/org/project\n**Structure**: Standard Go layout\n**Testing**: go test / testify\n**Linter**: golangci-lint\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full Go review (recommended)\n- Error handling patterns\n- Concurrency and goroutines\n- Interface design\n- Testing and benchmarks\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Error Handling\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Ignored error | Always handle errors | CRITICAL |\n| err != nil only | Add context with fmt.Errorf | MEDIUM |\n| Panic for errors | Return error instead | HIGH |\n| No error wrapping | Use %w for wrapping | MEDIUM |\n\n```go\n// BAD: Ignored error\ndata, _ := ioutil.ReadFile(\"config.json\")\n\n// GOOD: Handle error\ndata, err := os.ReadFile(\"config.json\")\nif err != nil {\n    return fmt.Errorf(\"reading config: %w\", err)\n}\n\n// BAD: No context\nif err != nil {\n    return err\n}\n\n// GOOD: Add context\nif err != nil {\n    return fmt.Errorf(\"failed to process user %d: %w\", userID, err)\n}\n\n// BAD: Panic for recoverable error\nfunc GetUser(id int) *User {\n    user, err := db.FindUser(id)\n    if err != nil {\n        panic(err)  // Don't panic!\n    }\n    return user\n}\n\n// GOOD: Return error\nfunc GetUser(id int) (*User, error) {\n    user, err := db.FindUser(id)\n    if err != nil {\n        return nil, fmt.Errorf(\"getting user %d: %w\", id, err)\n    }\n    return user, nil\n}\n```\n\n### Concurrency\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Data race potential | Use mutex or channels | CRITICAL |\n| Goroutine leak | Ensure goroutines exit | HIGH |\n| Unbuffered channel deadlock | Use buffered or select | HIGH |\n| No context cancellation | Pass context.Context | MEDIUM |\n\n```go\n// BAD: Data race\ntype Counter struct {\n    count int\n}\n\nfunc (c *Counter) Increment() {\n    c.count++  // Race condition!\n}\n\n// GOOD: Mutex protection\ntype Counter struct {\n    mu    sync.Mutex\n    count int\n}\n\nfunc (c *Counter) Increment() {\n    c.mu.Lock()\n    defer c.mu.Unlock()\n    c.count++\n}\n\n// BAD: Goroutine leak\nfunc process(items []Item) {\n    for _, item := range items {\n        go processItem(item)  // No way to wait or cancel!\n    }\n}\n\n// GOOD: WaitGroup and context\nfunc process(ctx context.Context, items []Item) error {\n    g, ctx := errgroup.WithContext(ctx)\n\n    for _, item := range items {\n        item := item  // Capture loop variable\n        g.Go(func() error {\n            return processItem(ctx, item)\n        })\n    }\n\n    return g.Wait()\n}\n\n// BAD: No timeout\nresp, err := client.Do(req)\n\n// GOOD: With context timeout\nctx, cancel := context.WithTimeout(ctx, 5*time.Second)\ndefer cancel()\n\nreq = req.WithContext(ctx)\nresp, err := client.Do(req)\n```\n\n### Interface Design\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Large interface | Keep interfaces small | MEDIUM |\n| Interface in implementation | Define at consumer | MEDIUM |\n| Concrete type in signature | Accept interfaces | MEDIUM |\n| No interface for testing | Add interface for mocking | MEDIUM |\n\n```go\n// BAD: Large interface\ntype UserService interface {\n    GetUser(id int) (*User, error)\n    CreateUser(u *User) error\n    UpdateUser(u *User) error\n    DeleteUser(id int) error\n    ListUsers() ([]*User, error)\n    SearchUsers(query string) ([]*User, error)\n    // ... 20 more methods\n}\n\n// GOOD: Small, focused interfaces\ntype UserGetter interface {\n    GetUser(ctx context.Context, id int) (*User, error)\n}\n\ntype UserCreator interface {\n    CreateUser(ctx context.Context, u *User) error\n}\n\n// Consumer defines the interface it needs\ntype UserHandler struct {\n    getter UserGetter  // Only what it needs\n}\n\n// BAD: Concrete type dependency\nfunc ProcessFile(f *os.File) error {\n    // Hard to test\n}\n\n// GOOD: Interface dependency\nfunc ProcessFile(r io.Reader) error {\n    // Easy to test with strings.Reader, bytes.Buffer, etc.\n}\n```\n\n### Code Organization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No package structure | Use cmd/internal/pkg | MEDIUM |\n| Exported unnecessary | Keep internal private | LOW |\n| Package name mismatch | Match directory name | LOW |\n| Circular import | Restructure packages | HIGH |\n\n```\n// GOOD: Standard Go project layout\nproject/\n├── cmd/\n│   └── server/\n│       └── main.go\n├── internal/           # Private packages\n│   ├── service/\n│   │   └── user.go\n│   └── repository/\n│       └── user.go\n├── pkg/               # Public packages\n│   └── client/\n│       └── client.go\n├── go.mod\n└── go.sum\n```\n\n### Testing\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No table-driven tests | Use test tables | MEDIUM |\n| No test helpers | Extract common setup | LOW |\n| No benchmarks | Add for hot paths | LOW |\n| Mocking concrete types | Use interfaces | MEDIUM |\n\n```go\n// GOOD: Table-driven test\nfunc TestParseSize(t *testing.T) {\n    tests := []struct {\n        name    string\n        input   string\n        want    int64\n        wantErr bool\n    }{\n        {\"bytes\", \"100\", 100, false},\n        {\"kilobytes\", \"1KB\", 1024, false},\n        {\"megabytes\", \"1MB\", 1048576, false},\n        {\"invalid\", \"abc\", 0, true},\n    }\n\n    for _, tt := range tests {\n        t.Run(tt.name, func(t *testing.T) {\n            got, err := ParseSize(tt.input)\n            if (err != nil) != tt.wantErr {\n                t.Errorf(\"ParseSize() error = %v, wantErr %v\", err, tt.wantErr)\n                return\n            }\n            if got != tt.want {\n                t.Errorf(\"ParseSize() = %v, want %v\", got, tt.want)\n            }\n        })\n    }\n}\n\n// GOOD: Benchmark\nfunc BenchmarkParseSize(b *testing.B) {\n    for i := 0; i < b.N; i++ {\n        ParseSize(\"1MB\")\n    }\n}\n```\n\n## Response Template\n```\n## Go Code Review Results\n\n**Project**: [name]\n**Go**: 1.22 | **Linter**: golangci-lint\n\n### Error Handling\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | service.go:45 | Ignored error from db.Query |\n\n### Concurrency\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | worker.go:23 | Potential goroutine leak |\n\n### Interface Design\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | handler.go:12 | Concrete type in function signature |\n\n### Testing\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | service_test.go | No table-driven tests |\n\n### Recommended Actions\n1. [ ] Handle all returned errors\n2. [ ] Add context cancellation to goroutines\n3. [ ] Define interfaces at consumer side\n4. [ ] Convert tests to table-driven format\n```\n\n## Best Practices\n1. **Errors**: Always handle, wrap with context\n2. **Concurrency**: Use context, errgroup, proper sync\n3. **Interfaces**: Small, defined at consumer\n4. **Testing**: Table-driven, interfaces for mocking\n5. **Linting**: Use golangci-lint\n\n## Integration\n- `go-api-reviewer`: API framework patterns\n- `security-scanner`: Go security audit\n- `perf-analyzer`: Go performance profiling"
              },
              {
                "name": "graphql-reviewer",
                "description": "WHEN: GraphQL schema review, resolver patterns, N+1 detection, query complexity, API security\nWHAT: Schema design + N+1 detection + Query complexity + Input validation + Error handling + DataLoader patterns\nWHEN NOT: REST API → api-documenter, Database schema → schema-reviewer, ORM → orm-reviewer\n",
                "path": "skills/graphql-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "graphql-reviewer",
                  "description": "WHEN: GraphQL schema review, resolver patterns, N+1 detection, query complexity, API security\nWHAT: Schema design + N+1 detection + Query complexity + Input validation + Error handling + DataLoader patterns\nWHEN NOT: REST API → api-documenter, Database schema → schema-reviewer, ORM → orm-reviewer\n"
                },
                "content": "# GraphQL Reviewer Skill\n\n## Purpose\nReviews GraphQL schemas, resolvers, and operations for N+1 problems, query complexity limits, input validation, security best practices, and proper error handling.\n\n## When to Use\n- GraphQL schema or resolver review requests\n- \"GraphQL\", \"N+1\", \"DataLoader\", \"query complexity\" mentions\n- Schema design review\n- Projects with `.graphql`, `.gql` files\n- GraphQL library dependencies (Apollo, Relay, graphql-js)\n\n## Project Detection\n- `.graphql` or `.gql` schema files\n- `schema.graphql` or `type-defs.ts`\n- `graphql` package in dependencies\n- `@apollo/server`, `graphql-yoga`, `mercurius` dependencies\n- `@Query`, `@Mutation`, `@Resolver` decorators (NestJS/TypeGraphQL)\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**GraphQL Server**: Apollo Server 4.x / GraphQL Yoga\n**Schema**: Code-first / SDL-first\n**Language**: TypeScript / JavaScript\n**ORM**: Prisma / TypeORM / Drizzle\n**Key Features**:\n  - DataLoader for batching\n  - Query complexity plugin\n  - Persisted queries\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which GraphQL areas to review?\"\nOptions:\n- Full GraphQL audit (recommended)\n- N+1 / DataLoader patterns\n- Schema design\n- Query complexity / Security\n- Error handling\n- Input validation\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Critical: N+1 Query Problem\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Resolver per item | N+1 queries | CRITICAL |\n| No DataLoader | Unbatched fetches | CRITICAL |\n| ORM lazy load in resolver | Hidden N+1 | CRITICAL |\n\n```typescript\n// BAD: N+1 problem\n// Schema\ntype Query {\n  posts: [Post!]!\n}\n\ntype Post {\n  id: ID!\n  author: User!  // N+1 here!\n}\n\n// Resolver - fetches author per post\nconst resolvers = {\n  Query: {\n    posts: () => db.post.findMany()\n  },\n  Post: {\n    author: (post) => db.user.findUnique({ where: { id: post.authorId } })\n    // If 100 posts → 1 + 100 queries!\n  }\n};\n\n// GOOD: DataLoader for batching\nimport DataLoader from 'dataloader';\n\nconst createLoaders = () => ({\n  userLoader: new DataLoader(async (ids: string[]) => {\n    const users = await db.user.findMany({\n      where: { id: { in: ids } }\n    });\n    const userMap = new Map(users.map(u => [u.id, u]));\n    return ids.map(id => userMap.get(id) ?? null);\n  })\n});\n\n// Resolver with DataLoader\nconst resolvers = {\n  Post: {\n    author: (post, _, { loaders }) => loaders.userLoader.load(post.authorId)\n    // Now: 1 + 1 queries (batched)\n  }\n};\n\n// BEST: Prisma with includes (no N+1)\nconst resolvers = {\n  Query: {\n    posts: () => db.post.findMany({\n      include: { author: true }  // Single query with JOIN\n    })\n  }\n};\n```\n\n### Critical: Excessive Fetching in Resolvers\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| SELECT * in resolver | Over-fetching | HIGH |\n| No field selection | Wasted resources | MEDIUM |\n| Ignoring selection set | Missing optimization | HIGH |\n\n```typescript\n// BAD: Fetches all fields regardless of query\nconst resolvers = {\n  Query: {\n    user: (_, { id }) => db.user.findUnique({\n      where: { id },\n      include: {\n        posts: true,      // Maybe not requested\n        comments: true,   // Maybe not requested\n        followers: true   // Maybe not requested\n      }\n    })\n  }\n};\n\n// GOOD: Use info to select only requested fields\nimport { GraphQLResolveInfo } from 'graphql';\nimport graphqlFields from 'graphql-fields';\n\nconst resolvers = {\n  Query: {\n    user: (_, { id }, __, info: GraphQLResolveInfo) => {\n      const requestedFields = graphqlFields(info);\n      return db.user.findUnique({\n        where: { id },\n        include: {\n          posts: 'posts' in requestedFields,\n          comments: 'comments' in requestedFields\n        }\n      });\n    }\n  }\n};\n\n// BETTER: Use Prisma's select based on GraphQL query\nimport { PrismaSelect } from '@paljs/plugins';\n\nconst resolvers = {\n  Query: {\n    user: (_, { id }, __, info) => {\n      const select = new PrismaSelect(info).value;\n      return db.user.findUnique({ where: { id }, ...select });\n    }\n  }\n};\n```\n\n### Critical: Mutation in Query\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Side effects in Query | Violates spec | CRITICAL |\n| Write operation in Query | Unexpected behavior | CRITICAL |\n\n```graphql\n# BAD: Mutation disguised as Query\ntype Query {\n  incrementViewCount(postId: ID!): Int!  # WRONG! This mutates data\n  markAsRead(notificationId: ID!): Boolean!  # WRONG!\n}\n\n# GOOD: Mutations for side effects\ntype Mutation {\n  incrementViewCount(postId: ID!): Post!\n  markAsRead(notificationId: ID!): Notification!\n}\n\n# Query should be idempotent (read-only)\ntype Query {\n  post(id: ID!): Post\n  viewCount(postId: ID!): Int!\n}\n```\n\n### High: Missing Input Validation\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| No validation in resolver | Bad data accepted | HIGH |\n| Trusting client input | Security risk | HIGH |\n| No sanitization | Injection risk | CRITICAL |\n\n```typescript\n// BAD: No validation\nconst resolvers = {\n  Mutation: {\n    createUser: (_, { input }) => {\n      // input.email could be anything\n      return db.user.create({ data: input });\n    }\n  }\n};\n\n// GOOD: Validate inputs\nimport { z } from 'zod';\n\nconst CreateUserSchema = z.object({\n  email: z.string().email(),\n  name: z.string().min(1).max(100),\n  age: z.number().int().min(0).max(150).optional()\n});\n\nconst resolvers = {\n  Mutation: {\n    createUser: (_, { input }) => {\n      const validated = CreateUserSchema.parse(input);\n      return db.user.create({ data: validated });\n    }\n  }\n};\n\n// Schema-level validation (GraphQL)\n\"\"\"\nUser creation input\n\"\"\"\ninput CreateUserInput {\n  email: String! @constraint(format: \"email\")\n  name: String! @constraint(minLength: 1, maxLength: 100)\n  age: Int @constraint(min: 0, max: 150)\n}\n```\n\n### High: No Query Complexity Limit\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Unlimited depth | DoS vector | HIGH |\n| No complexity limit | Resource exhaustion | HIGH |\n| No rate limiting | Abuse possible | MEDIUM |\n\n```typescript\n// BAD: Allows dangerous queries\n// Can request: user.friends.friends.friends.friends...\n\n// GOOD: Limit query depth\nimport depthLimit from 'graphql-depth-limit';\n\nconst server = new ApolloServer({\n  typeDefs,\n  resolvers,\n  validationRules: [depthLimit(5)]  // Max 5 levels deep\n});\n\n// GOOD: Query complexity plugin\nimport { createComplexityPlugin } from 'graphql-query-complexity';\n\nconst complexityPlugin = createComplexityPlugin({\n  estimators: [\n    fieldExtensionsEstimator(),\n    simpleEstimator({ defaultComplexity: 1 })\n  ],\n  maximumComplexity: 1000,\n  onComplete: (complexity) => {\n    console.log('Query Complexity:', complexity);\n  }\n});\n\n// Schema with complexity hints\ntype Query {\n  users(first: Int!): [User!]! @complexity(multipliers: [\"first\"], value: 5)\n  posts(first: Int!): [Post!]! @complexity(multipliers: [\"first\"], value: 3)\n}\n\n// GOOD: Rate limiting\nimport { rateLimitDirective } from 'graphql-rate-limit-directive';\n\nconst { rateLimitDirectiveTypeDefs, rateLimitDirectiveTransformer } =\n  rateLimitDirective();\n\ntype Query {\n  expensiveQuery: Data! @rateLimit(limit: 10, duration: 60)\n}\n```\n\n### High: No List Pagination\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Unbounded lists | Memory exhaustion | HIGH |\n| No cursor pagination | Poor performance | MEDIUM |\n| Missing total count | Bad UX | LOW |\n\n```graphql\n# BAD: Unbounded list\ntype Query {\n  posts: [Post!]!  # Could return millions!\n}\n\n# GOOD: Relay-style pagination\ntype Query {\n  posts(\n    first: Int\n    after: String\n    last: Int\n    before: String\n  ): PostConnection!\n}\n\ntype PostConnection {\n  edges: [PostEdge!]!\n  pageInfo: PageInfo!\n  totalCount: Int!\n}\n\ntype PostEdge {\n  node: Post!\n  cursor: String!\n}\n\ntype PageInfo {\n  hasNextPage: Boolean!\n  hasPreviousPage: Boolean!\n  startCursor: String\n  endCursor: String\n}\n\n# SIMPLER: Offset pagination (for small datasets)\ntype Query {\n  posts(offset: Int = 0, limit: Int = 20): PostPage!\n}\n\ntype PostPage {\n  items: [Post!]!\n  totalCount: Int!\n  hasMore: Boolean!\n}\n```\n\n### High: Missing Error Handling\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Throwing raw errors | Leaks info | HIGH |\n| No error codes | Hard to handle | MEDIUM |\n| Stack traces in response | Security risk | HIGH |\n\n```typescript\n// BAD: Raw error exposure\nconst resolvers = {\n  Query: {\n    user: async (_, { id }) => {\n      const user = await db.user.findUnique({ where: { id } });\n      if (!user) {\n        throw new Error('User not found');  // Generic error\n      }\n      return user;\n    }\n  }\n};\n\n// GOOD: Structured GraphQL errors\nimport { GraphQLError } from 'graphql';\n\nclass NotFoundError extends GraphQLError {\n  constructor(resource: string, id: string) {\n    super(`${resource} not found`, {\n      extensions: {\n        code: 'NOT_FOUND',\n        resource,\n        id\n      }\n    });\n  }\n}\n\nconst resolvers = {\n  Query: {\n    user: async (_, { id }) => {\n      const user = await db.user.findUnique({ where: { id } });\n      if (!user) {\n        throw new NotFoundError('User', id);\n      }\n      return user;\n    }\n  }\n};\n\n// Error formatting plugin\nconst formatError = (error: GraphQLError) => {\n  // Don't expose internal errors\n  if (error.extensions?.code === 'INTERNAL_SERVER_ERROR') {\n    return new GraphQLError('Internal server error', {\n      extensions: { code: 'INTERNAL_SERVER_ERROR' }\n    });\n  }\n  return error;\n};\n```\n\n### Medium: Internal ID Exposure\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Database ID in schema | Information leak | MEDIUM |\n| Sequential IDs | Enumeration risk | MEDIUM |\n| No ID obfuscation | Privacy concern | LOW |\n\n```graphql\n# BAD: Exposes database IDs\ntype User {\n  id: Int!  # Sequential, guessable\n}\n\n# GOOD: Use opaque IDs\ntype User {\n  id: ID!  # Could be UUID, hashid, etc.\n}\n```\n\n```typescript\n// ID encoding/decoding\nimport Hashids from 'hashids';\nconst hashids = new Hashids('secret-salt', 10);\n\nconst resolvers = {\n  User: {\n    id: (user) => hashids.encode(user.dbId)\n  },\n  Query: {\n    user: (_, { id }) => {\n      const [dbId] = hashids.decode(id);\n      return db.user.findUnique({ where: { id: dbId } });\n    }\n  }\n};\n```\n\n### Medium: Missing Non-null Defaults\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Nullable without reason | Confusing API | MEDIUM |\n| Everything nullable | Too permissive | LOW |\n\n```graphql\n# BAD: Unnecessarily nullable\ntype User {\n  id: ID          # Should always exist\n  email: String   # Required for user\n  name: String    # Should be required\n  bio: String     # OK to be nullable\n}\n\n# GOOD: Clear nullability\ntype User {\n  id: ID!          # Always present\n  email: String!   # Required\n  name: String!    # Required\n  bio: String      # Optional (nullable)\n  deletedAt: DateTime  # Optional\n}\n\n# For fields that may fail to resolve\ntype Post {\n  id: ID!\n  author: User  # Nullable if author deleted\n  authorId: ID! # Always has the reference\n}\n```\n\n## Response Template\n```\n## GraphQL Code Review Results\n\n**Project**: [name]\n**Server**: Apollo Server 4.x\n**Schema**: SDL-first / Code-first\n\n### N+1 / DataLoader\n\n#### CRITICAL\n| File | Line | Issue |\n|------|------|-------|\n| resolvers/post.ts | 23 | N+1 in author resolver - use DataLoader |\n| resolvers/user.ts | 45 | posts fetched per user without batching |\n\n### Query Complexity / Security\n| File | Line | Issue |\n|------|------|-------|\n| server.ts | 12 | No depth limit configured |\n| schema.graphql | 34 | posts query unbounded - add pagination |\n\n### Input Validation\n| File | Line | Issue |\n|------|------|-------|\n| mutations/user.ts | 56 | No email validation |\n| mutations/post.ts | 23 | Missing input sanitization |\n\n### Error Handling\n| File | Line | Issue |\n|------|------|-------|\n| resolvers/query.ts | 78 | Raw error thrown - use GraphQLError |\n\n### Schema Design\n| File | Line | Issue |\n|------|------|-------|\n| schema.graphql | 12 | Query with side effect - move to Mutation |\n| types/user.graphql | 8 | Exposes sequential database ID |\n\n### Recommendations\n1. [ ] Implement DataLoader for all relationship resolvers\n2. [ ] Add depth limit (max 5-7 levels)\n3. [ ] Add query complexity plugin (max 1000)\n4. [ ] Add pagination to all list fields\n5. [ ] Validate all mutation inputs with Zod/Yup\n\n### Positive Patterns\n- Good use of Relay connections for pagination\n- Proper error codes in GraphQL errors\n```\n\n## Best Practices\n1. **DataLoader**: Always batch relationship resolvers\n2. **Complexity**: Limit depth and complexity\n3. **Pagination**: Cursor-based for large lists\n4. **Validation**: Validate all inputs server-side\n5. **Errors**: Use structured GraphQL errors\n6. **Security**: Rate limit, no introspection in prod\n\n## Integration\n- `schema-reviewer` skill: Database schema\n- `orm-reviewer` skill: ORM patterns\n- `typescript-reviewer` skill: TS type safety\n- `security-scanner` skill: API security\n\n## Notes\n- Based on GraphQL best practices 2024\n- Works with Apollo, Yoga, Mercurius\n- Supports both SDL and code-first\n- Compatible with Prisma, TypeORM, Drizzle"
              },
              {
                "name": "infra-security-reviewer",
                "description": "WHEN: Infrastructure security audit, secrets management, network policies, compliance checks\nWHAT: Secrets scanning + Network policies + IAM/RBAC audit + Compliance validation + Security hardening\nWHEN NOT: Application security → security-scanner, Docker only → docker-reviewer\n",
                "path": "skills/infra-security-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "infra-security-reviewer",
                  "description": "WHEN: Infrastructure security audit, secrets management, network policies, compliance checks\nWHAT: Secrets scanning + Network policies + IAM/RBAC audit + Compliance validation + Security hardening\nWHEN NOT: Application security → security-scanner, Docker only → docker-reviewer\n"
                },
                "content": "# Infrastructure Security Reviewer Skill\n\n## Purpose\nReviews infrastructure configurations for security, compliance, and best practices.\n\n## When to Use\n- Infrastructure security audit\n- Secrets management review\n- Network policy review\n- IAM/RBAC audit\n- Compliance check (SOC2, HIPAA, PCI)\n\n## Project Detection\n- Terraform files with IAM/security resources\n- Kubernetes NetworkPolicy, RBAC\n- AWS/GCP/Azure security configs\n- `.env` files, secret references\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Cloud**: AWS/GCP/Azure\n**IaC**: Terraform/Pulumi\n**Secrets**: Vault/AWS Secrets Manager\n**Compliance**: SOC2/HIPAA/PCI\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full security review (recommended)\n- Secrets management\n- Network security\n- IAM and access control\n- Compliance validation\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Secrets Management\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Hardcoded secrets | Use secret manager | CRITICAL |\n| Secrets in env files | Use vault/KMS | CRITICAL |\n| No secret rotation | Enable auto-rotation | HIGH |\n| Secrets in logs | Mask in logging | CRITICAL |\n\n```hcl\n# BAD: Hardcoded secrets\nresource \"aws_db_instance\" \"main\" {\n  password = \"SuperSecret123!\"  # CRITICAL!\n}\n\nvariable \"api_key\" {\n  default = \"sk-1234567890\"  # CRITICAL!\n}\n\n# GOOD: Using AWS Secrets Manager\ndata \"aws_secretsmanager_secret_version\" \"db_password\" {\n  secret_id = aws_secretsmanager_secret.db_password.id\n}\n\nresource \"aws_db_instance\" \"main\" {\n  password = data.aws_secretsmanager_secret_version.db_password.secret_string\n}\n\n# GOOD: Secret rotation\nresource \"aws_secretsmanager_secret_rotation\" \"db_password\" {\n  secret_id           = aws_secretsmanager_secret.db_password.id\n  rotation_lambda_arn = aws_lambda_function.rotation.arn\n\n  rotation_rules {\n    automatically_after_days = 30\n  }\n}\n```\n\n```yaml\n# Kubernetes - BAD: Secret in plain text\napiVersion: v1\nkind: Secret\nmetadata:\n  name: db-secret\ntype: Opaque\ndata:\n  password: cGFzc3dvcmQxMjM=  # Just base64, not encrypted!\n\n# GOOD: External Secrets Operator\napiVersion: external-secrets.io/v1beta1\nkind: ExternalSecret\nmetadata:\n  name: db-secret\nspec:\n  refreshInterval: 1h\n  secretStoreRef:\n    name: aws-secrets-manager\n    kind: ClusterSecretStore\n  target:\n    name: db-secret\n  data:\n    - secretKey: password\n      remoteRef:\n        key: prod/db/password\n```\n\n### Network Security\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Public subnet for DB | Use private subnet | CRITICAL |\n| No network policies | Add K8s NetworkPolicy | HIGH |\n| Open security groups | Restrict to needed ports | CRITICAL |\n| No VPC flow logs | Enable flow logs | MEDIUM |\n\n```hcl\n# AWS - GOOD: Network segmentation\nresource \"aws_vpc\" \"main\" {\n  cidr_block           = \"10.0.0.0/16\"\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n}\n\nresource \"aws_subnet\" \"private\" {\n  count             = 3\n  vpc_id            = aws_vpc.main.id\n  cidr_block        = cidrsubnet(aws_vpc.main.cidr_block, 8, count.index)\n  availability_zone = data.aws_availability_zones.available.names[count.index]\n\n  tags = {\n    Name = \"private-${count.index + 1}\"\n    Type = \"private\"\n  }\n}\n\nresource \"aws_flow_log\" \"main\" {\n  vpc_id          = aws_vpc.main.id\n  traffic_type    = \"ALL\"\n  log_destination = aws_cloudwatch_log_group.flow_logs.arn\n  iam_role_arn    = aws_iam_role.flow_logs.arn\n}\n\n# Security group - least privilege\nresource \"aws_security_group\" \"app\" {\n  name        = \"app-sg\"\n  description = \"Application security group\"\n  vpc_id      = aws_vpc.main.id\n\n  ingress {\n    description     = \"HTTPS from ALB\"\n    from_port       = 443\n    to_port         = 443\n    protocol        = \"tcp\"\n    security_groups = [aws_security_group.alb.id]\n  }\n\n  egress {\n    description = \"HTTPS to internet\"\n    from_port   = 443\n    to_port     = 443\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n}\n```\n\n```yaml\n# Kubernetes NetworkPolicy\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: app-network-policy\n  namespace: production\nspec:\n  podSelector:\n    matchLabels:\n      app: myapp\n  policyTypes:\n    - Ingress\n    - Egress\n  ingress:\n    - from:\n        - namespaceSelector:\n            matchLabels:\n              name: ingress-nginx\n        - podSelector:\n            matchLabels:\n              app: ingress-nginx\n      ports:\n        - protocol: TCP\n          port: 8080\n  egress:\n    - to:\n        - namespaceSelector:\n            matchLabels:\n              name: production\n        - podSelector:\n            matchLabels:\n              app: postgres\n      ports:\n        - protocol: TCP\n          port: 5432\n    - to:  # Allow DNS\n        - namespaceSelector: {}\n          podSelector:\n            matchLabels:\n              k8s-app: kube-dns\n      ports:\n        - protocol: UDP\n          port: 53\n```\n\n### IAM / Access Control\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Wildcard permissions | Use specific resources | CRITICAL |\n| No MFA requirement | Require MFA | HIGH |\n| Long-lived credentials | Use OIDC/roles | HIGH |\n| Over-permissive roles | Apply least privilege | HIGH |\n\n```hcl\n# BAD: Overly permissive\nresource \"aws_iam_policy\" \"bad\" {\n  policy = jsonencode({\n    Statement = [{\n      Effect   = \"Allow\"\n      Action   = \"*\"\n      Resource = \"*\"\n    }]\n  })\n}\n\n# GOOD: Least privilege\nresource \"aws_iam_policy\" \"app\" {\n  name        = \"app-policy\"\n  description = \"Application specific permissions\"\n\n  policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Sid    = \"S3ReadWrite\"\n        Effect = \"Allow\"\n        Action = [\n          \"s3:GetObject\",\n          \"s3:PutObject\",\n          \"s3:DeleteObject\"\n        ]\n        Resource = [\n          \"${aws_s3_bucket.app.arn}/*\"\n        ]\n      },\n      {\n        Sid    = \"SecretsRead\"\n        Effect = \"Allow\"\n        Action = [\n          \"secretsmanager:GetSecretValue\"\n        ]\n        Resource = [\n          aws_secretsmanager_secret.app.arn\n        ]\n        Condition = {\n          StringEquals = {\n            \"aws:ResourceTag/Environment\" = var.environment\n          }\n        }\n      }\n    ]\n  })\n}\n\n# GOOD: OIDC for GitHub Actions\nresource \"aws_iam_openid_connect_provider\" \"github\" {\n  url             = \"https://token.actions.githubusercontent.com\"\n  client_id_list  = [\"sts.amazonaws.com\"]\n  thumbprint_list = [data.tls_certificate.github.certificates[0].sha1_fingerprint]\n}\n\nresource \"aws_iam_role\" \"github_actions\" {\n  name = \"github-actions-role\"\n\n  assume_role_policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [{\n      Effect = \"Allow\"\n      Principal = {\n        Federated = aws_iam_openid_connect_provider.github.arn\n      }\n      Action = \"sts:AssumeRoleWithWebIdentity\"\n      Condition = {\n        StringEquals = {\n          \"token.actions.githubusercontent.com:aud\" = \"sts.amazonaws.com\"\n        }\n        StringLike = {\n          \"token.actions.githubusercontent.com:sub\" = \"repo:myorg/myrepo:*\"\n        }\n      }\n    }]\n  })\n}\n```\n\n### Encryption\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Unencrypted storage | Enable encryption at rest | HIGH |\n| No TLS | Enforce TLS 1.2+ | HIGH |\n| Default KMS key | Use customer managed key | MEDIUM |\n\n```hcl\n# GOOD: Encryption at rest\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"app\" {\n  bucket = aws_s3_bucket.app.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm     = \"aws:kms\"\n      kms_master_key_id = aws_kms_key.app.arn\n    }\n    bucket_key_enabled = true\n  }\n}\n\nresource \"aws_rds_cluster\" \"main\" {\n  storage_encrypted = true\n  kms_key_id        = aws_kms_key.rds.arn\n}\n\n# GOOD: Enforce TLS\nresource \"aws_lb_listener\" \"https\" {\n  load_balancer_arn = aws_lb.main.arn\n  port              = \"443\"\n  protocol          = \"HTTPS\"\n  ssl_policy        = \"ELBSecurityPolicy-TLS13-1-2-2021-06\"\n  certificate_arn   = aws_acm_certificate.main.arn\n}\n```\n\n### Compliance Checklist\n```\n## SOC2 / HIPAA / PCI Compliance\n\n### Access Control\n[ ] MFA enforced for all users\n[ ] Least privilege IAM policies\n[ ] Regular access reviews\n[ ] Service accounts with minimal permissions\n\n### Data Protection\n[ ] Encryption at rest (S3, RDS, EBS)\n[ ] Encryption in transit (TLS 1.2+)\n[ ] Customer managed KMS keys\n[ ] Key rotation enabled\n\n### Network Security\n[ ] VPC with private subnets\n[ ] Security groups with least privilege\n[ ] Network segmentation\n[ ] VPC flow logs enabled\n\n### Logging & Monitoring\n[ ] CloudTrail enabled\n[ ] GuardDuty enabled\n[ ] Config rules for compliance\n[ ] Alerting on security events\n\n### Secrets Management\n[ ] No hardcoded secrets\n[ ] Secrets in Secrets Manager/Vault\n[ ] Automatic rotation enabled\n[ ] Audit logging for secret access\n```\n\n## Response Template\n```\n## Infrastructure Security Review Results\n\n**Project**: [name]\n**Cloud**: AWS | **IaC**: Terraform\n\n### Secrets Management\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | rds.tf:15 | Hardcoded database password |\n\n### Network Security\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | sg.tf:23 | Security group allows 0.0.0.0/0 |\n\n### IAM\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | iam.tf:45 | Wildcard permissions in policy |\n\n### Encryption\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | s3.tf:12 | S3 bucket not encrypted |\n\n### Recommended Actions\n1. [ ] Move secrets to AWS Secrets Manager\n2. [ ] Restrict security group ingress rules\n3. [ ] Apply least privilege to IAM policies\n4. [ ] Enable encryption for all storage\n```\n\n## Best Practices\n1. **Secrets**: Never hardcode, use secret managers\n2. **Network**: Private subnets, strict security groups\n3. **IAM**: Least privilege, no wildcards\n4. **Encryption**: At rest and in transit\n5. **Audit**: Enable logging everywhere\n\n## Integration\n- `terraform-reviewer`: IaC review\n- `k8s-reviewer`: Kubernetes security\n- `security-scanner`: Application security"
              },
              {
                "name": "ios-reviewer",
                "description": "WHEN: iOS Swift/SwiftUI code review, UIKit patterns, Combine/async-await checks, MVVM structure analysis\nWHAT: SwiftUI best practices + Combine patterns + Memory management + Performance optimization + Architecture patterns\nWHEN NOT: Cross-platform → flutter-reviewer, Android → kotlin-android-reviewer\n",
                "path": "skills/ios-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "ios-reviewer",
                  "description": "WHEN: iOS Swift/SwiftUI code review, UIKit patterns, Combine/async-await checks, MVVM structure analysis\nWHAT: SwiftUI best practices + Combine patterns + Memory management + Performance optimization + Architecture patterns\nWHEN NOT: Cross-platform → flutter-reviewer, Android → kotlin-android-reviewer\n"
                },
                "content": "# iOS Reviewer Skill\n\n## Purpose\nReviews iOS Swift code for SwiftUI, UIKit, Combine, and Swift Concurrency best practices.\n\n## When to Use\n- iOS Swift project code review\n- \"SwiftUI\", \"UIKit\", \"Combine\", \"async/await\" mentions\n- iOS performance, memory management inspection\n- Projects with `.xcodeproj` or `.xcworkspace`\n\n## Project Detection\n- `.xcodeproj` or `.xcworkspace` exists\n- `Package.swift` with iOS platform\n- `Info.plist` exists\n- `*.swift` files present\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Swift**: 5.9+\n**iOS Target**: 15.0+\n**UI Framework**: SwiftUI / UIKit\n**Architecture**: MVVM / TCA / Clean Architecture\n**Package Manager**: SPM / CocoaPods / Carthage\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full iOS pattern check (recommended)\n- SwiftUI view patterns\n- UIKit lifecycle/memory\n- Combine/async-await usage\n- Architecture patterns\nmultiSelect: true\n```\n\n## Detection Rules\n\n### SwiftUI Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Heavy computation in body | Move to ViewModel or task modifier | HIGH |\n| Missing @State/@StateObject distinction | Use @StateObject for owned objects | HIGH |\n| ObservableObject without @Published | Add @Published to observed properties | HIGH |\n| Missing EnvironmentObject injection | Ensure parent provides object | MEDIUM |\n| Large View body | Extract to smaller Views | MEDIUM |\n\n```swift\n// BAD: Heavy computation in body\nstruct MyView: View {\n    var body: some View {\n        let result = expensiveCalculation()  // Called every render\n        Text(result)\n    }\n}\n\n// GOOD: Move to ViewModel or use task\nstruct MyView: View {\n    @StateObject var viewModel = MyViewModel()\n    var body: some View {\n        Text(viewModel.result)\n            .task { await viewModel.calculate() }\n    }\n}\n\n// BAD: @State for reference type\nstruct MyView: View {\n    @State var viewModel = MyViewModel()  // Won't observe changes\n}\n\n// GOOD: @StateObject for reference type\nstruct MyView: View {\n    @StateObject var viewModel = MyViewModel()\n}\n\n// BAD: Missing @Published\nclass MyViewModel: ObservableObject {\n    var data: [String] = []  // Changes won't trigger view update\n}\n\n// GOOD: Add @Published\nclass MyViewModel: ObservableObject {\n    @Published var data: [String] = []\n}\n```\n\n### UIKit Patterns\n| Check | Issue | Severity |\n|-------|-------|----------|\n| Strong delegate reference | Retain cycle risk | CRITICAL |\n| Missing removeObserver | Memory leak | HIGH |\n| Force unwrap IBOutlet | Crash risk | HIGH |\n| viewDidLoad network call | UX issue | MEDIUM |\n| Main thread UI update missing | Undefined behavior | CRITICAL |\n\n```swift\n// BAD: Strong delegate\nclass MyViewController: UIViewController {\n    var delegate: MyDelegate?  // Strong reference!\n}\n\n// GOOD: Weak delegate\nclass MyViewController: UIViewController {\n    weak var delegate: MyDelegate?\n}\n\n// BAD: Missing removeObserver\noverride func viewDidLoad() {\n    super.viewDidLoad()\n    NotificationCenter.default.addObserver(self, ...)\n}\n\n// GOOD: Remove in deinit\ndeinit {\n    NotificationCenter.default.removeObserver(self)\n}\n\n// BAD: Force unwrap IBOutlet\n@IBOutlet var titleLabel: UILabel!\nfunc setup() {\n    titleLabel.text = \"Hello\"  // Crash if not connected\n}\n\n// GOOD: Safe unwrap\n@IBOutlet weak var titleLabel: UILabel?\nfunc setup() {\n    titleLabel?.text = \"Hello\"\n}\n```\n\n### Combine Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Missing store in cancellables | Subscription lost | CRITICAL |\n| receive(on:) missing for UI | Threading issue | HIGH |\n| PassthroughSubject without type erasure | Exposes implementation | MEDIUM |\n| Chain without error handling | Silent failures | MEDIUM |\n\n```swift\n// BAD: Missing store\nclass MyViewModel {\n    func subscribe() {\n        publisher.sink { value in\n            print(value)\n        }  // Immediately cancelled!\n    }\n}\n\n// GOOD: Store in cancellables\nclass MyViewModel {\n    private var cancellables = Set<AnyCancellable>()\n\n    func subscribe() {\n        publisher\n            .sink { value in print(value) }\n            .store(in: &cancellables)\n    }\n}\n\n// BAD: Missing receive(on:) for UI\npublisher\n    .sink { self.label.text = $0 }  // May not be on main thread\n    .store(in: &cancellables)\n\n// GOOD: Explicit main thread\npublisher\n    .receive(on: DispatchQueue.main)\n    .sink { self.label.text = $0 }\n    .store(in: &cancellables)\n```\n\n### Swift Concurrency (async/await)\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Blocking call in async context | Use async alternative | HIGH |\n| Missing @MainActor for UI | Threading issue | HIGH |\n| Task without cancellation handling | Resource leak | MEDIUM |\n| Unstructured Task in SwiftUI | Use .task modifier | MEDIUM |\n\n```swift\n// BAD: Blocking in async\nfunc fetchData() async -> Data {\n    return URLSession.shared.dataTask(...)  // Blocking!\n}\n\n// GOOD: Async alternative\nfunc fetchData() async throws -> Data {\n    let (data, _) = try await URLSession.shared.data(from: url)\n    return data\n}\n\n// BAD: Missing @MainActor for UI\nclass MyViewModel: ObservableObject {\n    @Published var items: [Item] = []\n\n    func load() async {\n        items = await fetchItems()  // May not be on main thread!\n    }\n}\n\n// GOOD: @MainActor\n@MainActor\nclass MyViewModel: ObservableObject {\n    @Published var items: [Item] = []\n\n    func load() async {\n        items = await fetchItems()  // Guaranteed main thread\n    }\n}\n\n// BAD: Unstructured Task in SwiftUI\nstruct MyView: View {\n    var body: some View {\n        Text(\"Hello\")\n            .onAppear {\n                Task { await load() }  // Not cancelled on disappear\n            }\n    }\n}\n\n// GOOD: Use .task modifier\nstruct MyView: View {\n    var body: some View {\n        Text(\"Hello\")\n            .task { await load() }  // Auto-cancelled\n    }\n}\n```\n\n### Memory Management\n| Check | Problem | Solution |\n|-------|---------|----------|\n| Strong self in closure | Retain cycle | [weak self] or [unowned self] |\n| Circular reference | Memory leak | Break cycle with weak |\n| Large image in memory | OOM risk | Use thumbnails, purge cache |\n| Uncancelled Task | Resource leak | Store and cancel |\n\n```swift\n// BAD: Strong self in closure\nclass MyViewController: UIViewController {\n    func setup() {\n        service.fetch { result in\n            self.update(result)  // Strong capture!\n        }\n    }\n}\n\n// GOOD: Weak self\nclass MyViewController: UIViewController {\n    func setup() {\n        service.fetch { [weak self] result in\n            self?.update(result)\n        }\n    }\n}\n```\n\n## Response Template\n```\n## iOS Code Review Results\n\n**Project**: [name]\n**Swift**: 5.9 | **iOS Target**: 15.0+\n**UI Framework**: SwiftUI/UIKit\n**Files Analyzed**: X\n\n### SwiftUI Patterns\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | Views/HomeView.swift | Heavy computation in body (line 45) |\n| MEDIUM | Views/ProfileView.swift | Large view body, extract components |\n\n### UIKit/Memory\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | Controllers/DetailVC.swift | Strong delegate reference (line 23) |\n| HIGH | Controllers/ListVC.swift | Missing removeObserver in deinit |\n\n### Combine/Async\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | Services/DataService.swift | Missing cancellable store |\n| HIGH | ViewModels/MainVM.swift | Missing @MainActor |\n\n### Recommended Actions\n1. [ ] Add [weak self] to closures\n2. [ ] Use @StateObject for owned ObservableObjects\n3. [ ] Add @MainActor to ViewModels\n4. [ ] Replace Task with .task modifier\n```\n\n## Best Practices\n1. **SwiftUI**: Prefer small, composable Views with proper state ownership\n2. **UIKit**: Always use weak delegates, clean up observers\n3. **Combine**: Store subscriptions, handle threading explicitly\n4. **Concurrency**: Use structured concurrency, @MainActor for UI\n5. **Memory**: Use weak captures, profile with Instruments\n\n## Integration\n- `code-reviewer` skill: General Swift code quality\n- `test-generator` skill: iOS XCTest generation\n- `security-scanner` skill: iOS security checks\n\n## Notes\n- Based on Swift 5.9+, iOS 15+\n- Supports SwiftUI and UIKit projects\n- Includes Swift Concurrency patterns (async/await)"
              },
              {
                "name": "java-reviewer",
                "description": "WHEN: Java code review, Java idioms, exception handling, collections, streams, Java 17+ features\nWHAT: Exception patterns + resource management + null safety + stream usage + modern Java features\nWHEN NOT: Spring specific → spring-boot-reviewer, Android → kotlin-android-reviewer, Kotlin → kotlin-spring-reviewer\n",
                "path": "skills/java-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "java-reviewer",
                  "description": "WHEN: Java code review, Java idioms, exception handling, collections, streams, Java 17+ features\nWHAT: Exception patterns + resource management + null safety + stream usage + modern Java features\nWHEN NOT: Spring specific → spring-boot-reviewer, Android → kotlin-android-reviewer, Kotlin → kotlin-spring-reviewer\n"
                },
                "content": "# Java Reviewer Skill\n\n## Purpose\nReviews Java code for idiomatic patterns, exception handling, resource management, null safety, and modern Java (17+) feature adoption.\n\n## When to Use\n- Java code review requests\n- \"Java patterns\", \"exception handling\", \"Java best practices\" mentions\n- Legacy Java modernization\n- Projects with `pom.xml` or `build.gradle`\n- `src/main/java/**/*.java` files\n\n## Project Detection\n- `pom.xml` (Maven) or `build.gradle` (Gradle)\n- `src/main/java/` directory structure\n- `.java` source files\n- `java.version` property in build config\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Java Version**: 17 / 21\n**Build Tool**: Maven / Gradle\n**Testing**: JUnit 5\n**Key Dependencies**:\n  - Lombok\n  - MapStruct\n  - Jakarta EE\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which Java areas to review?\"\nOptions:\n- Full Java idiom check (recommended)\n- Exception handling\n- Resource management (try-with-resources)\n- Null safety (Optional, annotations)\n- Stream/Collection patterns\n- Modern Java features (17+)\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Critical: Empty Catch Blocks\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Empty catch block | Silent failure | CRITICAL |\n| Catch all `Exception` | Over-broad handling | HIGH |\n| Catch `Throwable` | Catching errors | CRITICAL |\n| Missing logging in catch | Lost error info | HIGH |\n\n```java\n// BAD: Empty catch block\ntry {\n    parseFile(path);\n} catch (IOException e) {\n    // Silent failure - CRITICAL\n}\n\n// BAD: Catch all Exception\ntry {\n    process();\n} catch (Exception e) {\n    log.error(\"Error\", e);  // Too broad\n}\n\n// GOOD: Specific exception handling\ntry {\n    parseFile(path);\n} catch (FileNotFoundException e) {\n    log.warn(\"File not found: {}\", path);\n    return Optional.empty();\n} catch (IOException e) {\n    log.error(\"Failed to read file: {}\", path, e);\n    throw new ProcessingException(\"File read error\", e);\n}\n\n// BAD: Catching Throwable\ntry {\n    compute();\n} catch (Throwable t) {  // Catches OutOfMemoryError, StackOverflowError\n    log.error(\"Error\", t);\n}\n\n// GOOD: Catch Exception, let Errors propagate\ntry {\n    compute();\n} catch (Exception e) {\n    log.error(\"Processing failed\", e);\n    throw new ServiceException(e);\n}\n```\n\n### Critical: Mutable Static Fields\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| `public static` non-final | Thread-unsafe | CRITICAL |\n| Static mutable collection | Race condition | CRITICAL |\n| Static `DateFormat` | Not thread-safe | CRITICAL |\n\n```java\n// BAD: Mutable static field\npublic class Config {\n    public static String apiUrl;  // CRITICAL: Thread-unsafe\n    public static List<String> allowedHosts = new ArrayList<>();  // CRITICAL\n}\n\n// GOOD: Immutable static\npublic class Config {\n    public static final String API_URL = \"https://api.example.com\";\n    public static final List<String> ALLOWED_HOSTS = List.of(\"a.com\", \"b.com\");\n}\n\n// BAD: Static DateFormat (not thread-safe)\npublic class DateUtils {\n    private static final SimpleDateFormat FORMAT = new SimpleDateFormat(\"yyyy-MM-dd\");\n}\n\n// GOOD: ThreadLocal or DateTimeFormatter\npublic class DateUtils {\n    private static final DateTimeFormatter FORMAT = DateTimeFormatter.ofPattern(\"yyyy-MM-dd\");\n}\n```\n\n### High: Raw Types (No Generics)\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| `List` instead of `List<T>` | Type safety lost | MEDIUM |\n| `Map` instead of `Map<K, V>` | Unchecked operations | MEDIUM |\n| `Class` instead of `Class<?>` | Wildcard missing | LOW |\n\n```java\n// BAD: Raw types\nList users = new ArrayList();\nusers.add(\"string\");  // No compile error, runtime issue\nUser user = (User) users.get(0);  // ClassCastException\n\n// GOOD: Generics\nList<User> users = new ArrayList<>();\nusers.add(new User(\"John\"));  // Type-safe\nUser user = users.get(0);  // No cast needed\n\n// BAD: Raw Map\nMap config = new HashMap();\nconfig.put(\"key\", 123);\nString value = (String) config.get(\"key\");  // ClassCastException\n\n// GOOD: Typed Map\nMap<String, Object> config = new HashMap<>();\n// Or better:\nMap<String, String> stringConfig = new HashMap<>();\n```\n\n### High: Resource Management\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Manual close() | Leak on exception | HIGH |\n| Finally without null check | NPE risk | MEDIUM |\n| Missing try-with-resources | Resource leak | HIGH |\n\n```java\n// BAD: Manual resource management\nInputStream is = null;\ntry {\n    is = new FileInputStream(file);\n    process(is);\n} finally {\n    is.close();  // NPE if exception in constructor\n}\n\n// GOOD: try-with-resources\ntry (InputStream is = new FileInputStream(file)) {\n    process(is);\n}  // Auto-closed, even on exception\n\n// GOOD: Multiple resources\ntry (\n    Connection conn = dataSource.getConnection();\n    PreparedStatement stmt = conn.prepareStatement(sql);\n    ResultSet rs = stmt.executeQuery()\n) {\n    while (rs.next()) {\n        process(rs);\n    }\n}\n\n// Java 9+: Effectively final variables\nInputStream is = new FileInputStream(file);\ntry (is) {  // Can use existing variable\n    process(is);\n}\n```\n\n### High: Collection Null Returns\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Return `null` for empty | NPE risk | HIGH |\n| `null` collection parameter | Hidden bug | MEDIUM |\n| No defensive copy | Mutation leak | MEDIUM |\n\n```java\n// BAD: Return null for empty\npublic List<User> findUsers(String query) {\n    List<User> results = repository.search(query);\n    if (results.isEmpty()) {\n        return null;  // Client must null-check\n    }\n    return results;\n}\n\n// GOOD: Return empty collection\npublic List<User> findUsers(String query) {\n    List<User> results = repository.search(query);\n    return results != null ? results : Collections.emptyList();\n}\n\n// BETTER: Use Optional for single values\npublic Optional<User> findUser(String id) {\n    return Optional.ofNullable(repository.findById(id));\n}\n\n// BAD: No defensive copy\npublic List<String> getItems() {\n    return items;  // Caller can modify\n}\n\n// GOOD: Defensive copy or unmodifiable\npublic List<String> getItems() {\n    return List.copyOf(items);  // Java 10+\n    // or: return Collections.unmodifiableList(items);\n}\n```\n\n### Medium: String Concatenation in Loops\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| `+` in loop | O(n^2) complexity | MEDIUM |\n| `String.format` in loop | Performance hit | LOW |\n\n```java\n// BAD: String concatenation in loop\nString result = \"\";\nfor (String item : items) {\n    result += item + \",\";  // Creates new String each iteration\n}\n\n// GOOD: StringBuilder\nStringBuilder sb = new StringBuilder();\nfor (String item : items) {\n    sb.append(item).append(\",\");\n}\nString result = sb.toString();\n\n// BETTER: String.join (Java 8+)\nString result = String.join(\",\", items);\n\n// BEST: Collectors.joining (streams)\nString result = items.stream()\n    .collect(Collectors.joining(\",\"));\n```\n\n### Medium: Stream Anti-patterns\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| forEach with side effects | Not functional | MEDIUM |\n| Nested streams | Performance | MEDIUM |\n| Stream in loop | Create once | LOW |\n| Parallel without need | Overhead | LOW |\n\n```java\n// BAD: forEach with mutation\nList<User> activeUsers = new ArrayList<>();\nusers.stream()\n    .filter(User::isActive)\n    .forEach(activeUsers::add);  // Side effect\n\n// GOOD: Collect\nList<User> activeUsers = users.stream()\n    .filter(User::isActive)\n    .collect(Collectors.toList());\n\n// Java 16+: toList()\nList<User> activeUsers = users.stream()\n    .filter(User::isActive)\n    .toList();\n\n// BAD: Unnecessary parallel\nusers.parallelStream()  // Only 10 users\n    .map(User::getName)\n    .collect(Collectors.toList());\n\n// GOOD: Sequential for small collections\nusers.stream()\n    .map(User::getName)\n    .collect(Collectors.toList());\n```\n\n### Low: Missing @Override\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| No @Override on override | Typo not caught | LOW |\n| Missing equals/hashCode | Collection issues | MEDIUM |\n\n```java\n// BAD: Missing @Override\npublic class User {\n    public boolean equals(Object obj) {  // Typo not caught\n        // ...\n    }\n}\n\n// GOOD: With @Override\npublic class User {\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj) return true;\n        if (obj == null || getClass() != obj.getClass()) return false;\n        User user = (User) obj;\n        return Objects.equals(id, user.id);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id);\n    }\n}\n```\n\n### Modern Java Features (17+)\n| Old Pattern | Modern Alternative | Since |\n|-------------|-------------------|-------|\n| `instanceof` + cast | Pattern matching | Java 16 |\n| Switch statement | Switch expression | Java 14 |\n| Verbose records | `record` | Java 16 |\n| Text blocks (`\\n`) | `\"\"\"` | Java 15 |\n| Sealed classes | `sealed`, `permits` | Java 17 |\n\n```java\n// OLD: instanceof + cast\nif (obj instanceof User) {\n    User user = (User) obj;\n    process(user.getName());\n}\n\n// NEW: Pattern matching (Java 16+)\nif (obj instanceof User user) {\n    process(user.getName());\n}\n\n// OLD: Switch statement\nString status;\nswitch (code) {\n    case 200:\n        status = \"OK\";\n        break;\n    case 404:\n        status = \"Not Found\";\n        break;\n    default:\n        status = \"Unknown\";\n}\n\n// NEW: Switch expression (Java 14+)\nString status = switch (code) {\n    case 200 -> \"OK\";\n    case 404 -> \"Not Found\";\n    default -> \"Unknown\";\n};\n\n// OLD: Verbose DTO\npublic class UserDto {\n    private final String name;\n    private final int age;\n    // constructor, getters, equals, hashCode, toString\n}\n\n// NEW: Record (Java 16+)\npublic record UserDto(String name, int age) {}\n\n// Text blocks (Java 15+)\nString json = \"\"\"\n    {\n        \"name\": \"John\",\n        \"age\": 30\n    }\n    \"\"\";\n```\n\n## Response Template\n```\n## Java Code Review Results\n\n**Project**: [name]\n**Java Version**: 17 / 21\n**Build Tool**: Maven / Gradle\n\n### Exception Handling\n\n#### CRITICAL\n| File | Line | Issue |\n|------|------|-------|\n| Service.java | 45 | Empty catch block |\n| Utils.java | 78 | Catching Throwable |\n\n#### HIGH\n| File | Line | Issue |\n|------|------|-------|\n| Dao.java | 23 | Catching generic Exception |\n| Config.java | 12 | Mutable static field |\n\n### Resource Management\n| File | Line | Issue |\n|------|------|-------|\n| FileService.java | 56 | Missing try-with-resources |\n\n### Modern Java Adoption\n- [ ] Use pattern matching instanceof (Java 16+)\n- [ ] Convert DTOs to records\n- [ ] Use switch expressions\n- [ ] Use text blocks for multiline strings\n\n### Recommendations\n1. [ ] Replace empty catch blocks with proper handling\n2. [ ] Use try-with-resources for all IO\n3. [ ] Return empty collections instead of null\n4. [ ] Enable preview features if using Java 21\n\n### Positive Patterns\n- Good use of Optional for nullable returns\n- Proper use of streams for collection processing\n```\n\n## Best Practices\n1. **Fail Fast**: Validate inputs early\n2. **Immutability**: Prefer final fields, records\n3. **Null Safety**: Optional, @Nullable/@NonNull\n4. **Modern APIs**: java.time, List.of, Map.of\n5. **Checked Exceptions**: Use sparingly, wrap in runtime\n\n## Integration\n- `spring-boot-reviewer` skill: Spring-specific patterns\n- `orm-reviewer` skill: JPA/Hibernate patterns\n- `code-reviewer` skill: General quality\n- `security-scanner` skill: Security audit\n\n## Notes\n- Based on Java 17+ best practices\n- Encourages adoption of modern Java features\n- Compatible with Maven and Gradle projects\n- Works with Lombok and other code generators"
              },
              {
                "name": "k8s-reviewer",
                "description": "WHEN: Kubernetes manifest review, Helm charts, resource limits, probes, RBAC\nWHAT: Resource configuration + Health probes + Security context + RBAC policies + Helm best practices\nWHEN NOT: Docker only → docker-reviewer, Terraform → terraform-reviewer\n",
                "path": "skills/k8s-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "k8s-reviewer",
                  "description": "WHEN: Kubernetes manifest review, Helm charts, resource limits, probes, RBAC\nWHAT: Resource configuration + Health probes + Security context + RBAC policies + Helm best practices\nWHEN NOT: Docker only → docker-reviewer, Terraform → terraform-reviewer\n"
                },
                "content": "# Kubernetes Reviewer Skill\n\n## Purpose\nReviews Kubernetes manifests and Helm charts for resource configuration, security, and best practices.\n\n## When to Use\n- Kubernetes YAML review\n- Helm chart review\n- Pod security review\n- Resource limits check\n- RBAC configuration review\n\n## Project Detection\n- `*.yaml` in k8s/, manifests/, deploy/\n- `Chart.yaml` (Helm)\n- `kustomization.yaml`\n- `deployment.yaml`, `service.yaml`\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Manifest Type**: Deployment, Service, Ingress\n**Helm**: Chart v3\n**Namespace**: production\n**Cluster**: EKS/GKE/AKS\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full K8s review (recommended)\n- Resource limits and requests\n- Health probes configuration\n- Security context and RBAC\n- Helm chart structure\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Resource Limits\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No resource limits | Add limits and requests | CRITICAL |\n| Limits = Requests | Set different values | MEDIUM |\n| Too high limits | Right-size based on usage | MEDIUM |\n| No LimitRange | Add namespace LimitRange | MEDIUM |\n\n```yaml\n# BAD: No resource management\napiVersion: apps/v1\nkind: Deployment\nspec:\n  template:\n    spec:\n      containers:\n        - name: app\n          image: myapp:latest\n          # No resources defined!\n\n# GOOD: Proper resource management\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: myapp\n  namespace: production\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      containers:\n        - name: app\n          image: myapp:v1.2.3\n          resources:\n            requests:\n              cpu: \"100m\"\n              memory: \"128Mi\"\n            limits:\n              cpu: \"500m\"\n              memory: \"512Mi\"\n```\n\n### Health Probes\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No liveness probe | Add liveness check | HIGH |\n| No readiness probe | Add readiness check | HIGH |\n| No startup probe | Add for slow-starting apps | MEDIUM |\n| Same liveness/readiness | Differentiate purposes | MEDIUM |\n\n```yaml\n# GOOD: Complete probe configuration\nspec:\n  containers:\n    - name: app\n      image: myapp:v1.2.3\n      ports:\n        - containerPort: 8080\n\n      # Startup probe - for slow starting containers\n      startupProbe:\n        httpGet:\n          path: /health/startup\n          port: 8080\n        failureThreshold: 30\n        periodSeconds: 10\n\n      # Liveness probe - restart if unhealthy\n      livenessProbe:\n        httpGet:\n          path: /health/live\n          port: 8080\n        initialDelaySeconds: 0\n        periodSeconds: 10\n        timeoutSeconds: 5\n        failureThreshold: 3\n\n      # Readiness probe - remove from service if not ready\n      readinessProbe:\n        httpGet:\n          path: /health/ready\n          port: 8080\n        initialDelaySeconds: 5\n        periodSeconds: 5\n        timeoutSeconds: 3\n        failureThreshold: 3\n```\n\n### Security Context\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Running as root | Set runAsNonRoot: true | CRITICAL |\n| No security context | Add pod/container security | HIGH |\n| Privileged container | Remove privileged: true | CRITICAL |\n| Writable root filesystem | Set readOnlyRootFilesystem | HIGH |\n\n```yaml\n# BAD: No security constraints\nspec:\n  containers:\n    - name: app\n      image: myapp:latest\n      # No security context!\n\n# GOOD: Secure configuration\napiVersion: apps/v1\nkind: Deployment\nspec:\n  template:\n    spec:\n      securityContext:\n        runAsNonRoot: true\n        runAsUser: 1000\n        runAsGroup: 1000\n        fsGroup: 1000\n\n      containers:\n        - name: app\n          image: myapp:v1.2.3\n          securityContext:\n            allowPrivilegeEscalation: false\n            readOnlyRootFilesystem: true\n            capabilities:\n              drop:\n                - ALL\n          volumeMounts:\n            - name: tmp\n              mountPath: /tmp\n            - name: cache\n              mountPath: /app/cache\n\n      volumes:\n        - name: tmp\n          emptyDir: {}\n        - name: cache\n          emptyDir: {}\n```\n\n### Image Policy\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Using :latest tag | Pin specific version | HIGH |\n| No image pull policy | Set imagePullPolicy | MEDIUM |\n| Public registry | Use private registry | MEDIUM |\n\n```yaml\n# BAD\nimage: myapp:latest\n# or\nimage: myapp  # Implies :latest\n\n# GOOD\nimage: gcr.io/myproject/myapp:v1.2.3\nimagePullPolicy: IfNotPresent\n```\n\n### Pod Disruption Budget\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No PDB for critical apps | Add PodDisruptionBudget | HIGH |\n\n```yaml\napiVersion: policy/v1\nkind: PodDisruptionBudget\nmetadata:\n  name: myapp-pdb\nspec:\n  minAvailable: 2  # or maxUnavailable: 1\n  selector:\n    matchLabels:\n      app: myapp\n```\n\n### RBAC\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Using default SA | Create dedicated ServiceAccount | HIGH |\n| Cluster-wide permissions | Use namespaced Role | HIGH |\n| Wildcard permissions | Specify explicit resources | CRITICAL |\n\n```yaml\n# BAD: Overly permissive\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nrules:\n  - apiGroups: [\"*\"]\n    resources: [\"*\"]\n    verbs: [\"*\"]\n\n# GOOD: Least privilege\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: myapp-sa\n  namespace: production\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  name: myapp-role\n  namespace: production\nrules:\n  - apiGroups: [\"\"]\n    resources: [\"configmaps\", \"secrets\"]\n    verbs: [\"get\", \"list\"]\n  - apiGroups: [\"\"]\n    resources: [\"pods\"]\n    verbs: [\"get\", \"list\", \"watch\"]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  name: myapp-rolebinding\n  namespace: production\nsubjects:\n  - kind: ServiceAccount\n    name: myapp-sa\n    namespace: production\nroleRef:\n  kind: Role\n  name: myapp-role\n  apiGroup: rbac.authorization.k8s.io\n```\n\n### Helm Charts\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Hardcoded values | Use values.yaml | MEDIUM |\n| No default values | Provide sensible defaults | MEDIUM |\n| No NOTES.txt | Add post-install notes | LOW |\n\n```yaml\n# values.yaml\nreplicaCount: 3\n\nimage:\n  repository: myapp\n  tag: \"v1.2.3\"\n  pullPolicy: IfNotPresent\n\nresources:\n  requests:\n    cpu: 100m\n    memory: 128Mi\n  limits:\n    cpu: 500m\n    memory: 512Mi\n\n# templates/deployment.yaml\nspec:\n  replicas: {{ .Values.replicaCount }}\n  template:\n    spec:\n      containers:\n        - name: {{ .Chart.Name }}\n          image: \"{{ .Values.image.repository }}:{{ .Values.image.tag }}\"\n          resources:\n            {{- toYaml .Values.resources | nindent 12 }}\n```\n\n## Response Template\n```\n## Kubernetes Review Results\n\n**Project**: [name]\n**Type**: Deployment, Service, Ingress\n**Namespace**: production\n\n### Resource Limits\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | deployment.yaml | No resource limits defined |\n\n### Health Probes\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | deployment.yaml | Missing readiness probe |\n\n### Security\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | deployment.yaml | Running as root |\n\n### RBAC\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | rbac.yaml | Wildcard permissions |\n\n### Recommended Actions\n1. [ ] Add resource requests and limits\n2. [ ] Configure liveness and readiness probes\n3. [ ] Add security context with non-root user\n4. [ ] Apply least privilege RBAC\n```\n\n## Best Practices\n1. **Resources**: Always set requests and limits\n2. **Probes**: All three probe types for production\n3. **Security**: Non-root, read-only fs, drop capabilities\n4. **RBAC**: Least privilege, namespaced roles\n5. **Images**: Pin versions, use private registry\n\n## Integration\n- `docker-reviewer`: Container image review\n- `terraform-reviewer`: Infrastructure as code\n- `infra-security-reviewer`: Cluster security"
              },
              {
                "name": "kotlin-android-reviewer",
                "description": "WHEN: Android Kotlin code review, Jetpack Compose patterns, Coroutines/Flow checks, ViewModel structure analysis\nWHAT: Compose best practices + Coroutines patterns + State management + Memory leak detection + Performance optimization\nWHEN NOT: KMP shared code → kotlin-multiplatform-reviewer, Backend → kotlin-spring-reviewer\n",
                "path": "skills/kotlin-android-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "kotlin-android-reviewer",
                  "description": "WHEN: Android Kotlin code review, Jetpack Compose patterns, Coroutines/Flow checks, ViewModel structure analysis\nWHAT: Compose best practices + Coroutines patterns + State management + Memory leak detection + Performance optimization\nWHEN NOT: KMP shared code → kotlin-multiplatform-reviewer, Backend → kotlin-spring-reviewer\n"
                },
                "content": "# Kotlin Android Reviewer Skill\n\n## Purpose\nReviews Android Kotlin code for Jetpack Compose, Coroutines, Flow, and ViewModel best practices.\n\n## When to Use\n- Android Kotlin project code review\n- \"Compose pattern\", \"Coroutines\", \"Flow\", \"ViewModel\" mentions\n- Android performance, memory leak inspection\n- Projects with Android plugin in `build.gradle.kts`\n\n## Project Detection\n- `com.android.application` or `com.android.library` in build.gradle\n- `AndroidManifest.xml` exists\n- `src/main/java` or `src/main/kotlin` directories\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Kotlin**: 1.9.x\n**Compose**: 1.5.x\n**minSdk**: 24\n**targetSdk**: 34\n**Architecture**: MVVM + Clean Architecture\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full Android pattern check (recommended)\n- Jetpack Compose UI patterns\n- Coroutines/Flow usage\n- ViewModel/State management\n- Memory leaks/Performance\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Jetpack Compose Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Side-effect in Composable | Use LaunchedEffect/SideEffect | HIGH |\n| Object creation without remember | Use remember { } | HIGH |\n| Missing State hoisting | Hoist state to parent | MEDIUM |\n| Missing derivedStateOf | Use for derived state | LOW |\n| LazyColumn without key | Add key parameter | HIGH |\n\n```kotlin\n// BAD: Object creation without remember\n@Composable\nfun MyScreen() {\n    val list = mutableListOf<String>()  // New every recomposition\n}\n\n// GOOD: Use remember\n@Composable\nfun MyScreen() {\n    val list = remember { mutableListOf<String>() }\n}\n\n// BAD: Direct suspend call in Composable\n@Composable\nfun MyScreen(viewModel: MyViewModel) {\n    viewModel.loadData()  // Side-effect!\n}\n\n// GOOD: Use LaunchedEffect\n@Composable\nfun MyScreen(viewModel: MyViewModel) {\n    LaunchedEffect(Unit) {\n        viewModel.loadData()\n    }\n}\n```\n\n### Coroutines Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| GlobalScope usage | Use viewModelScope/lifecycleScope | CRITICAL |\n| Missing Dispatcher | Specify Dispatchers.IO/Default | MEDIUM |\n| Missing exception handling | try-catch or CoroutineExceptionHandler | HIGH |\n| runBlocking abuse | Convert to suspend function | HIGH |\n\n```kotlin\n// BAD: GlobalScope\nGlobalScope.launch {\n    repository.fetchData()\n}\n\n// GOOD: viewModelScope\nviewModelScope.launch {\n    repository.fetchData()\n}\n\n// BAD: Network on Main\nviewModelScope.launch {\n    val result = api.getData()  // NetworkOnMainThreadException\n}\n\n// GOOD: IO Dispatcher\nviewModelScope.launch {\n    val result = withContext(Dispatchers.IO) {\n        api.getData()\n    }\n}\n```\n\n### Flow Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Direct collect in Composable | Use collectAsState | HIGH |\n| SharedFlow without replay | Set appropriate replay value | MEDIUM |\n| Nullable StateFlow initial | Provide meaningful initial value | MEDIUM |\n\n```kotlin\n// BAD: Direct collect in Composable\n@Composable\nfun MyScreen(viewModel: MyViewModel) {\n    var data by remember { mutableStateOf<Data?>(null) }\n    LaunchedEffect(Unit) {\n        viewModel.dataFlow.collect { data = it }\n    }\n}\n\n// GOOD: collectAsState\n@Composable\nfun MyScreen(viewModel: MyViewModel) {\n    val data by viewModel.dataFlow.collectAsState()\n}\n\n// BAD: Nullable StateFlow initial\nprivate val _state = MutableStateFlow<UiState?>(null)\n\n// GOOD: Sealed class with clear initial state\nprivate val _state = MutableStateFlow<UiState>(UiState.Loading)\n```\n\n### ViewModel Patterns\n| Check | Issue | Severity |\n|-------|-------|----------|\n| Direct Context reference | Memory leak risk | CRITICAL |\n| View reference | Memory leak risk | CRITICAL |\n| Missing SavedStateHandle | Process death handling | MEDIUM |\n| Bidirectional data flow | Use UiState + Event pattern | MEDIUM |\n\n```kotlin\n// BAD: Activity Context reference\nclass MyViewModel(private val context: Context) : ViewModel()\n\n// GOOD: Application Context with Hilt\nclass MyViewModel(\n    @ApplicationContext private val context: Context\n) : ViewModel()\n\n// BAD: Bidirectional binding\nclass MyViewModel : ViewModel() {\n    var name = MutableLiveData<String>()\n}\n\n// GOOD: Unidirectional + sealed class\nclass MyViewModel : ViewModel() {\n    private val _uiState = MutableStateFlow(UiState())\n    val uiState: StateFlow<UiState> = _uiState.asStateFlow()\n\n    fun onNameChanged(name: String) {\n        _uiState.update { it.copy(name = name) }\n    }\n}\n```\n\n### Memory Leak Detection\n| Check | Problem | Solution |\n|-------|---------|----------|\n| Inner class with outer reference | Activity leak | WeakReference or static |\n| Unremoved Listener | Memory leak | Remove in onDestroy |\n| Uncancelled Coroutine Job | Job leak | Structured concurrency |\n| Unreleased Bitmap | OOM risk | recycle() or Coil/Glide |\n\n## Response Template\n```\n## Android Kotlin Code Review Results\n\n**Project**: [name]\n**Kotlin**: 1.9.x | **Compose**: 1.5.x\n**Files Analyzed**: X\n\n### Jetpack Compose\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | ui/HomeScreen.kt | Object creation without remember (line 45) |\n| MEDIUM | ui/ProfileScreen.kt | State hoisting recommended |\n\n### Coroutines/Flow\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | data/Repository.kt | GlobalScope usage (line 23) |\n| HIGH | viewmodel/MainViewModel.kt | Missing exception handling |\n\n### ViewModel/State\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | viewmodel/DetailViewModel.kt | Activity Context reference |\n\n### Recommended Actions\n1. [ ] GlobalScope → viewModelScope\n2. [ ] Add remember { }\n3. [ ] Apply UiState sealed class pattern\n```\n\n## Best Practices\n1. **Compose**: Prefer Stateless Composable, State hoisting\n2. **Coroutines**: Structured concurrency, appropriate Dispatcher\n3. **Flow**: Distinguish Hot/Cold Flow, StateFlow for UI state\n4. **ViewModel**: Unidirectional data flow, avoid Context\n5. **Testing**: Turbine for Flow, Compose test rules\n\n## Integration\n- `code-reviewer` skill: General Kotlin code quality\n- `kotlin-multiplatform-reviewer` skill: KMP shared code\n- `test-generator` skill: Android test generation\n\n## Notes\n- Based on Compose 1.0+\n- Kotlin 1.9+, Coroutines 1.7+ recommended\n- Supports Hilt/Dagger DI patterns"
              },
              {
                "name": "kotlin-multiplatform-reviewer",
                "description": "WHEN: Kotlin Multiplatform (KMP) project review, expect/actual patterns, shared module structure, iOS interop\nWHAT: Module structure analysis + expect/actual validation + platform separation + iOS/Android interop + dependency management\nWHEN NOT: Android UI → kotlin-android-reviewer, Server → kotlin-spring-reviewer\n",
                "path": "skills/kotlin-multiplatform-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "kotlin-multiplatform-reviewer",
                  "description": "WHEN: Kotlin Multiplatform (KMP) project review, expect/actual patterns, shared module structure, iOS interop\nWHAT: Module structure analysis + expect/actual validation + platform separation + iOS/Android interop + dependency management\nWHEN NOT: Android UI → kotlin-android-reviewer, Server → kotlin-spring-reviewer\n"
                },
                "content": "# Kotlin Multiplatform Reviewer Skill\n\n## Purpose\nReviews Kotlin Multiplatform (KMP) project structure and patterns including shared code design, expect/actual mechanism, and iOS interop.\n\n## When to Use\n- KMP project code review\n- \"expect/actual\", \"shared module\", \"commonMain\", \"multiplatform\" mentions\n- iOS/Android code sharing design review\n- Projects with `kotlin(\"multiplatform\")` plugin\n\n## Project Detection\n- `kotlin(\"multiplatform\")` plugin in `build.gradle.kts`\n- `src/commonMain`, `src/androidMain`, `src/iosMain` directories\n- `shared` or `common` module exists\n\n## Workflow\n\n### Step 1: Analyze Structure\n```\n**Kotlin**: 2.0.x\n**Targets**: Android, iOS (arm64, simulatorArm64)\n**Shared Module**: shared\n**Source Sets**:\n  - commonMain (shared code)\n  - androidMain (Android specific)\n  - iosMain (iOS specific)\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full KMP pattern check (recommended)\n- Module structure/dependencies\n- expect/actual implementation\n- Platform code separation\n- iOS interop (Swift/ObjC)\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Module Structure\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Bloated shared module | Split by layer | MEDIUM |\n| Circular dependencies | Unidirectional deps | HIGH |\n| Platform code in commonMain | Move to androidMain/iosMain | HIGH |\n| Missing test module | Add commonTest | MEDIUM |\n\n**Recommended Structure:**\n```\nproject/\n├── shared/\n│   └── src/\n│       ├── commonMain/kotlin/    # Shared business logic\n│       ├── commonTest/kotlin/    # Shared tests\n│       ├── androidMain/kotlin/   # Android specific\n│       ├── iosMain/kotlin/       # iOS specific\n│       └── iosTest/kotlin/\n├── androidApp/                    # Android app\n└── iosApp/                       # iOS app (Xcode)\n```\n\n### expect/actual Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| actual without expect | expect declaration required | CRITICAL |\n| Missing actual impl | Provide actual for all targets | CRITICAL |\n| Excessive expect/actual | Consider interface + DI | MEDIUM |\n| Direct platform API in actual | Add abstraction layer | MEDIUM |\n\n```kotlin\n// commonMain - expect declaration\nexpect class Platform() {\n    val name: String\n    fun getDeviceId(): String\n}\n\n// androidMain - actual implementation\nactual class Platform actual constructor() {\n    actual val name: String = \"Android ${Build.VERSION.SDK_INT}\"\n    actual fun getDeviceId(): String = Settings.Secure.getString(\n        context.contentResolver,\n        Settings.Secure.ANDROID_ID\n    )\n}\n\n// iosMain - actual implementation\nactual class Platform actual constructor() {\n    actual val name: String = UIDevice.currentDevice.systemName()\n    actual fun getDeviceId(): String = UIDevice.currentDevice\n        .identifierForVendor?.UUIDString ?: \"\"\n}\n```\n\n**BAD: expect/actual overuse**\n```kotlin\n// BAD: expect/actual for simple values\nexpect val platformName: String\nactual val platformName: String = \"Android\"\n\n// GOOD: interface + DI\ninterface PlatformInfo {\n    val name: String\n}\n\n// androidMain\nclass AndroidPlatformInfo : PlatformInfo {\n    override val name = \"Android\"\n}\n```\n\n### Platform Separation\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Platform import in commonMain | Move to platform source set | CRITICAL |\n| Java class in commonMain | expect/actual or pure Kotlin | HIGH |\n| UIKit/Android SDK in common | Separate to platform source set | CRITICAL |\n\n```kotlin\n// BAD: Android import in commonMain\n// commonMain/kotlin/Repository.kt\nimport android.content.Context  // Compile error!\n\n// GOOD: expect/actual separation\n// commonMain\nexpect class DataStore {\n    fun save(key: String, value: String)\n    fun get(key: String): String?\n}\n\n// androidMain\nactual class DataStore(private val context: Context) {\n    private val prefs = context.getSharedPreferences(\"app\", Context.MODE_PRIVATE)\n    actual fun save(key: String, value: String) {\n        prefs.edit().putString(key, value).apply()\n    }\n    actual fun get(key: String): String? = prefs.getString(key, null)\n}\n\n// iosMain\nactual class DataStore {\n    actual fun save(key: String, value: String) {\n        NSUserDefaults.standardUserDefaults.setObject(value, key)\n    }\n    actual fun get(key: String): String? =\n        NSUserDefaults.standardUserDefaults.stringForKey(key)\n}\n```\n\n### iOS Interop\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Missing @ObjCName | Swift-friendly naming | LOW |\n| Sealed class iOS exposure | Use enum or @ObjCName | MEDIUM |\n| Direct Flow exposure to iOS | Provide wrapper function | HIGH |\n| suspend function iOS call | Provide completion handler wrapper | HIGH |\n\n```kotlin\n// BAD: Direct suspend function exposure\nclass Repository {\n    suspend fun fetchData(): Data  // Hard to call from iOS\n}\n\n// GOOD: iOS wrapper provided\nclass Repository {\n    suspend fun fetchData(): Data\n\n    // iOS completion handler wrapper\n    fun fetchDataAsync(completion: (Data?, Error?) -> Unit) {\n        MainScope().launch {\n            try {\n                val data = fetchData()\n                completion(data, null)\n            } catch (e: Exception) {\n                completion(null, e)\n            }\n        }\n    }\n}\n```\n\n**Flow iOS Exposure:**\n```kotlin\n// BAD: Direct Flow exposure\nval dataFlow: Flow<Data>\n\n// GOOD: iOS wrapper\nfun observeData(onEach: (Data) -> Unit): Closeable {\n    val job = MainScope().launch {\n        dataFlow.collect { onEach(it) }\n    }\n    return object : Closeable {\n        override fun close() { job.cancel() }\n    }\n}\n```\n\n### Dependency Management\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Platform library in commonMain | Use multiplatform library | HIGH |\n| Version mismatch | Use Version Catalog | MEDIUM |\n| Unused dependencies | Remove unused | LOW |\n\n**Multiplatform Library Recommendations:**\n| Purpose | Library |\n|---------|---------|\n| HTTP | Ktor Client |\n| Serialization | Kotlinx Serialization |\n| Async | Kotlinx Coroutines |\n| DI | Koin, Kodein |\n| Date/Time | Kotlinx Datetime |\n| Settings | Multiplatform Settings |\n| Logging | Napier, Kermit |\n| DB | SQLDelight |\n\n## Response Template\n```\n## KMP Project Review Results\n\n**Project**: [name]\n**Kotlin**: 2.0.x\n**Targets**: Android, iOS (arm64, simulatorArm64)\n\n### Module Structure\n| Status | Item | Issue |\n|--------|------|-------|\n| OK | Source set separation | commonMain/androidMain/iosMain correct |\n| MEDIUM | Tests | Add commonTest recommended |\n\n### expect/actual\n| Status | File | Issue |\n|--------|------|-------|\n| OK | Platform.kt | expect/actual correctly implemented |\n| HIGH | DataStore.kt | Missing iosMain actual implementation |\n\n### iOS Interop\n| Status | Item | Issue |\n|--------|------|-------|\n| HIGH | Repository.kt | suspend function needs iOS wrapper |\n| MEDIUM | UiState.kt | Add @ObjCName to sealed class |\n\n### Recommended Actions\n1. [ ] Add DataStore iosMain actual implementation\n2. [ ] Add completion handler wrapper to fetchData()\n3. [ ] Add commonTest source set\n```\n\n## Best Practices\n1. **Share Scope**: Business logic > Data layer > UI (optional)\n2. **expect/actual**: Minimize usage, prefer interface + DI\n3. **iOS Interop**: Use SKIE library or manual wrappers\n4. **Testing**: Test shared logic in commonTest\n5. **Dependencies**: Prefer multiplatform libraries\n\n## Integration\n- `kotlin-android-reviewer` skill: Android specific code\n- `kotlin-spring-reviewer` skill: Server shared code\n- `code-reviewer` skill: General code quality\n\n## Notes\n- Based on Kotlin 2.0+\n- KMP 1.9.20+ recommended (Stable)\n- Compose Multiplatform requires separate review"
              },
              {
                "name": "kotlin-spring-reviewer",
                "description": "WHEN: Spring Boot + Kotlin, Ktor backend review, coroutine-based server, WebFlux/R2DBC pattern checks\nWHAT: Spring Kotlin idioms + Coroutines integration + WebFlux patterns + Data class usage + Test strategies\nWHEN NOT: Android → kotlin-android-reviewer, KMP shared code → kotlin-multiplatform-reviewer\n",
                "path": "skills/kotlin-spring-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "kotlin-spring-reviewer",
                  "description": "WHEN: Spring Boot + Kotlin, Ktor backend review, coroutine-based server, WebFlux/R2DBC pattern checks\nWHAT: Spring Kotlin idioms + Coroutines integration + WebFlux patterns + Data class usage + Test strategies\nWHEN NOT: Android → kotlin-android-reviewer, KMP shared code → kotlin-multiplatform-reviewer\n"
                },
                "content": "# Kotlin Spring Reviewer Skill\n\n## Purpose\nReviews Spring Boot + Kotlin and Ktor backend projects for Kotlin idioms, Coroutines integration, WebFlux, and data class best practices.\n\n## When to Use\n- Spring Boot + Kotlin project code review\n- Ktor server project review\n- \"WebFlux\", \"R2DBC\", \"Coroutines server\" mentions\n- Projects with `spring-boot` or `ktor` in `build.gradle.kts`\n\n## Project Detection\n- `org.springframework.boot` plugin in `build.gradle.kts`\n- `io.ktor` dependency in `build.gradle.kts`\n- `application.yml` or `application.properties`\n- `Application.kt` main class\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Framework**: Spring Boot 3.2.x\n**Kotlin**: 1.9.x\n**Build Tool**: Gradle (Kotlin DSL)\n**Dependencies**:\n  - Spring WebFlux (reactive)\n  - Spring Data R2DBC\n  - Kotlinx Coroutines\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full Kotlin Spring pattern check (recommended)\n- Kotlin idiom usage\n- Coroutines/WebFlux integration\n- Data class/DTO design\n- Test strategies\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Kotlin Idioms\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Java-style getter/setter | Use Kotlin property | LOW |\n| if-based null check | Use ?.let, ?:, avoid !! | MEDIUM |\n| if-else chain | Use when expression | LOW |\n| Missing extension functions | Utility → extension function | LOW |\n| Missing scope functions | Use apply, let, run, also | LOW |\n\n```kotlin\n// BAD: Java style\nclass User {\n    private var name: String? = null\n    fun getName(): String? = name\n    fun setName(name: String?) { this.name = name }\n}\n\n// GOOD: Kotlin property\nclass User {\n    var name: String? = null\n}\n\n// BAD: Java-style null check\nfun process(user: User?) {\n    if (user != null) {\n        if (user.name != null) {\n            println(user.name)\n        }\n    }\n}\n\n// GOOD: Kotlin null-safe operators\nfun process(user: User?) {\n    user?.name?.let { println(it) }\n}\n\n// BAD: if-else chain\nfun getStatus(code: Int): String {\n    if (code == 200) return \"OK\"\n    else if (code == 404) return \"Not Found\"\n    else return \"Unknown\"\n}\n\n// GOOD: when expression\nfun getStatus(code: Int): String = when (code) {\n    200 -> \"OK\"\n    404 -> \"Not Found\"\n    else -> \"Unknown\"\n}\n```\n\n### Spring + Kotlin Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| @Autowired field injection | Constructor injection | HIGH |\n| lateinit var abuse | Constructor injection or lazy | MEDIUM |\n| Missing open class | Use all-open plugin | HIGH |\n| data class @Entity | Use regular class | HIGH |\n\n```kotlin\n// BAD: Field injection\n@Service\nclass UserService {\n    @Autowired\n    private lateinit var userRepository: UserRepository\n}\n\n// GOOD: Constructor injection (Kotlin default)\n@Service\nclass UserService(\n    private val userRepository: UserRepository\n)\n\n// BAD: data class as JPA Entity\n@Entity\ndata class User(\n    @Id val id: Long,\n    val name: String\n)  // equals/hashCode issues\n\n// GOOD: Regular class with explicit equals/hashCode\n@Entity\nclass User(\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    var id: Long? = null,\n    var name: String\n) {\n    override fun equals(other: Any?): Boolean {\n        if (this === other) return true\n        if (other !is User) return false\n        return id != null && id == other.id\n    }\n    override fun hashCode(): Int = javaClass.hashCode()\n}\n```\n\n**Gradle Plugin Check:**\n```kotlin\n// build.gradle.kts\nplugins {\n    kotlin(\"plugin.spring\")  // all-open for Spring\n    kotlin(\"plugin.jpa\")     // no-arg for JPA entities\n}\n```\n\n### Coroutines Integration\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| runBlocking in controller | Use suspend function | CRITICAL |\n| GlobalScope in server | Use structured concurrency | CRITICAL |\n| Missing Dispatcher | Specify IO/Default | MEDIUM |\n| Missing exception handling | Use CoroutineExceptionHandler | HIGH |\n\n```kotlin\n// BAD: runBlocking in controller\n@GetMapping(\"/users\")\nfun getUsers(): List<User> = runBlocking {\n    userService.getUsers()\n}\n\n// GOOD: suspend function (WebFlux/Coroutines)\n@GetMapping(\"/users\")\nsuspend fun getUsers(): List<User> =\n    userService.getUsers()\n\n// BAD: GlobalScope in service\n@Service\nclass UserService {\n    fun processAsync() {\n        GlobalScope.launch {\n            // Dangerous: Not cancelled on app shutdown\n        }\n    }\n}\n\n// GOOD: Structured concurrency\n@Service\nclass UserService(\n    private val applicationScope: CoroutineScope\n) {\n    fun processAsync() = applicationScope.launch {\n        // Properly cancelled on app shutdown\n    }\n}\n```\n\n### WebFlux + Coroutines\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Direct Mono/Flux usage | Convert to suspend/Flow | MEDIUM |\n| awaitSingle abuse | Use coRouter DSL | LOW |\n| Blocking call | Use Dispatchers.IO | CRITICAL |\n\n```kotlin\n// OK: Direct Mono/Flux\n@GetMapping(\"/user/{id}\")\nfun getUser(@PathVariable id: Long): Mono<User> =\n    userRepository.findById(id)\n\n// BETTER: Kotlin Coroutines\n@GetMapping(\"/user/{id}\")\nsuspend fun getUser(@PathVariable id: Long): User? =\n    userRepository.findById(id).awaitSingleOrNull()\n\n// BEST: coRouter DSL (functional endpoints)\n@Configuration\nclass RouterConfig {\n    @Bean\n    fun routes(handler: UserHandler) = coRouter {\n        \"/api/users\".nest {\n            GET(\"\", handler::getAll)\n            GET(\"/{id}\", handler::getById)\n            POST(\"\", handler::create)\n        }\n    }\n}\n\nclass UserHandler(private val service: UserService) {\n    suspend fun getAll(request: ServerRequest): ServerResponse =\n        ServerResponse.ok().bodyAndAwait(service.getAll())\n}\n```\n\n### Ktor Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Excessive routing nesting | Split into modules | MEDIUM |\n| No DI | Use Koin/Kodein | MEDIUM |\n| Missing error handling | Use StatusPages plugin | HIGH |\n| Missing serialization | Use ContentNegotiation | HIGH |\n\n```kotlin\n// BAD: All routes in one file\nfun Application.module() {\n    routing {\n        get(\"/users\") { /* ... */ }\n        get(\"/users/{id}\") { /* ... */ }\n        get(\"/products\") { /* ... */ }\n        // ... 100 more\n    }\n}\n\n// GOOD: Split into modules\nfun Application.module() {\n    configureRouting()\n    configureSerialization()\n    configureDI()\n}\n\nfun Application.configureRouting() {\n    routing {\n        userRoutes()\n        productRoutes()\n    }\n}\n\nfun Route.userRoutes() {\n    route(\"/users\") {\n        get { /* ... */ }\n        get(\"/{id}\") { /* ... */ }\n        post { /* ... */ }\n    }\n}\n```\n\n### Data Class Design\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| var in DTO | Use val (immutable) | MEDIUM |\n| Excessive nullable | Use defaults or required | LOW |\n| Missing validation | Use @field:Valid, init {} | MEDIUM |\n\n```kotlin\n// BAD: Mutable DTO\ndata class CreateUserRequest(\n    var name: String?,\n    var email: String?\n)\n\n// GOOD: Immutable + validation\ndata class CreateUserRequest(\n    @field:NotBlank\n    val name: String,\n\n    @field:Email\n    val email: String\n) {\n    init {\n        require(name.length <= 100) { \"Name too long\" }\n    }\n}\n```\n\n## Response Template\n```\n## Kotlin Spring Code Review Results\n\n**Project**: [name]\n**Spring Boot**: 3.2.x | **Kotlin**: 1.9.x\n**Stack**: WebFlux + R2DBC + Coroutines\n\n### Kotlin Idioms\n| Status | File | Issue |\n|--------|------|-------|\n| LOW | UserService.kt | Java-style null check → ?.let recommended |\n\n### Spring Patterns\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | ProductService.kt | @Autowired field injection → constructor injection |\n| HIGH | User.kt | data class @Entity → regular class |\n\n### Coroutines\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | ReportService.kt | runBlocking in controller |\n| HIGH | BatchJob.kt | GlobalScope usage |\n\n### Recommended Actions\n1. [ ] Verify kotlin-spring, kotlin-jpa plugins\n2. [ ] runBlocking → suspend function conversion\n3. [ ] GlobalScope → applicationScope injection\n4. [ ] data class Entity → regular class change\n```\n\n## Best Practices\n1. **Constructor Injection**: Use default constructor instead of @Autowired\n2. **Immutability**: val, data class (except Entity)\n3. **Coroutines**: suspend functions, structured concurrency\n4. **Kotlin DSL**: coRouter, bean { }\n5. **Testing**: MockK, Kotest, @SpringBootTest\n\n## Integration\n- `code-reviewer` skill: General code quality\n- `kotlin-multiplatform-reviewer` skill: KMP server sharing\n- `security-scanner` skill: API security checks\n\n## Notes\n- Based on Spring Boot 3.x + Kotlin 1.9+\n- WebFlux/R2DBC reactive stack support\n- Ktor 2.x support"
              },
              {
                "name": "migration-checker",
                "description": "WHEN: Database migration review, backwards compatibility, rollback safety, data integrity\nWHAT: Migration safety + Rollback validation + Downtime analysis + Data preservation + Lock prevention\nWHEN NOT: Query optimization → sql-optimizer, Schema design → schema-reviewer\n",
                "path": "skills/migration-checker/SKILL.md",
                "frontmatter": {
                  "name": "migration-checker",
                  "description": "WHEN: Database migration review, backwards compatibility, rollback safety, data integrity\nWHAT: Migration safety + Rollback validation + Downtime analysis + Data preservation + Lock prevention\nWHEN NOT: Query optimization → sql-optimizer, Schema design → schema-reviewer\n"
                },
                "content": "# Migration Checker Skill\n\n## Purpose\nReviews database migrations for safety, backwards compatibility, rollback capability, and zero-downtime deployment.\n\n## When to Use\n- Database migration review\n- Schema change safety check\n- Rollback plan validation\n- Zero-downtime deployment check\n- Data migration review\n\n## Project Detection\n- `migrations/` directory\n- Prisma migrations\n- Alembic (Python)\n- TypeORM migrations\n- Rails migrations\n- Flyway/Liquibase\n\n## Workflow\n\n### Step 1: Analyze Migration\n```\n**Type**: Schema change / Data migration\n**Risk Level**: High (adds non-nullable column)\n**Tables Affected**: users, orders\n**Estimated Rows**: 1M+\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full migration review (recommended)\n- Backwards compatibility\n- Rollback safety\n- Lock and downtime analysis\n- Data integrity\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Dangerous Operations\n| Operation | Risk | Mitigation |\n|-----------|------|------------|\n| Add NOT NULL without default | CRITICAL | Add default or multi-step |\n| Drop column | HIGH | Ensure no code references |\n| Rename column | HIGH | Use multi-step migration |\n| Change column type | HIGH | Check data compatibility |\n| Add unique constraint | HIGH | Verify no duplicates first |\n| Drop table | CRITICAL | Ensure no references |\n\n### Adding Non-Nullable Column\n\n```sql\n-- BAD: Direct NOT NULL column (will fail on existing rows)\nALTER TABLE users ADD COLUMN phone VARCHAR(20) NOT NULL;\n-- ERROR: column \"phone\" contains null values\n\n-- GOOD: Multi-step migration\n-- Step 1: Add nullable column\nALTER TABLE users ADD COLUMN phone VARCHAR(20);\n\n-- Step 2: Backfill data (in batches for large tables)\nUPDATE users SET phone = 'unknown' WHERE phone IS NULL;\n\n-- Step 3: Add NOT NULL constraint\nALTER TABLE users ALTER COLUMN phone SET NOT NULL;\n```\n\n### Renaming Columns (Zero-Downtime)\n\n```sql\n-- BAD: Direct rename (breaks running code)\nALTER TABLE users RENAME COLUMN name TO full_name;\n-- Old code still uses \"name\"!\n\n-- GOOD: Multi-step migration\n\n-- Migration 1: Add new column\nALTER TABLE users ADD COLUMN full_name VARCHAR(200);\n\n-- Migration 2: Sync data (application writes to both)\nUPDATE users SET full_name = name WHERE full_name IS NULL;\n\n-- Deploy: Update code to read from full_name\n\n-- Migration 3: Drop old column (after code deployment)\nALTER TABLE users DROP COLUMN name;\n```\n\n### Index Operations\n\n```sql\n-- BAD: Regular CREATE INDEX (blocks writes)\nCREATE INDEX idx_orders_user_id ON orders(user_id);\n-- Locks table for duration!\n\n-- GOOD: Concurrent index (PostgreSQL)\nCREATE INDEX CONCURRENTLY idx_orders_user_id ON orders(user_id);\n-- Doesn't block writes, but takes longer\n\n-- Note: CONCURRENTLY cannot be in transaction\n-- Must be separate migration without transaction wrapper\n```\n\n### Data Migrations\n\n```python\n# BAD: Load all data into memory\ndef migrate():\n    users = User.objects.all()  # 1M rows in memory!\n    for user in users:\n        user.email = user.email.lower()\n        user.save()\n\n# GOOD: Batch processing\ndef migrate():\n    batch_size = 1000\n    total = User.objects.count()\n\n    for offset in range(0, total, batch_size):\n        users = User.objects.all()[offset:offset + batch_size]\n        for user in users:\n            user.email = user.email.lower()\n        User.objects.bulk_update(users, ['email'])\n\n# BETTER: Raw SQL for large tables\ndef migrate():\n    with connection.cursor() as cursor:\n        cursor.execute(\"\"\"\n            UPDATE users\n            SET email = LOWER(email)\n            WHERE id IN (\n                SELECT id FROM users\n                WHERE email != LOWER(email)\n                LIMIT 10000\n            )\n        \"\"\")\n```\n\n### Prisma Migration Safety\n\n```typescript\n// schema.prisma\n\n// BAD: Direct non-nullable addition\nmodel User {\n  id    Int    @id @default(autoincrement())\n  email String\n  phone String  // New non-nullable field - will fail!\n}\n\n// GOOD: Add with default first\nmodel User {\n  id    Int    @id @default(autoincrement())\n  email String\n  phone String @default(\"\")  // Safe to add\n}\n\n// Or nullable first, then make required\nmodel User {\n  id    Int     @id @default(autoincrement())\n  email String\n  phone String?  // Step 1: nullable\n}\n```\n\n### TypeORM Migration\n\n```typescript\n// BAD: Unsafe migration\nexport class AddUserPhone1234567890 implements MigrationInterface {\n    async up(queryRunner: QueryRunner): Promise<void> {\n        await queryRunner.query(\n            `ALTER TABLE users ADD phone VARCHAR(20) NOT NULL`\n        );\n    }\n\n    async down(queryRunner: QueryRunner): Promise<void> {\n        // No rollback!\n    }\n}\n\n// GOOD: Safe migration with rollback\nexport class AddUserPhone1234567890 implements MigrationInterface {\n    async up(queryRunner: QueryRunner): Promise<void> {\n        // Step 1: Add nullable column\n        await queryRunner.query(\n            `ALTER TABLE users ADD phone VARCHAR(20)`\n        );\n\n        // Step 2: Backfill\n        await queryRunner.query(\n            `UPDATE users SET phone = '' WHERE phone IS NULL`\n        );\n\n        // Step 3: Add constraint\n        await queryRunner.query(\n            `ALTER TABLE users ALTER COLUMN phone SET NOT NULL`\n        );\n    }\n\n    async down(queryRunner: QueryRunner): Promise<void> {\n        await queryRunner.query(\n            `ALTER TABLE users DROP COLUMN phone`\n        );\n    }\n}\n```\n\n### Django Migrations\n\n```python\n# BAD: RunPython without reverse\nclass Migration(migrations.Migration):\n    operations = [\n        migrations.RunPython(forwards_func),  # No reverse!\n    ]\n\n# GOOD: With reverse operation\nclass Migration(migrations.Migration):\n    operations = [\n        migrations.RunPython(\n            forwards_func,\n            reverse_code=backwards_func\n        ),\n    ]\n\n# BAD: Atomic migration for large data change\nclass Migration(migrations.Migration):\n    operations = [\n        migrations.RunPython(update_millions_of_rows),\n    ]\n\n# GOOD: Non-atomic for large changes\nclass Migration(migrations.Migration):\n    atomic = False\n\n    operations = [\n        migrations.RunPython(update_in_batches),\n    ]\n```\n\n### Rollback Checklist\n\n```sql\n-- Verify rollback for each operation\n\n-- ADD COLUMN → DROP COLUMN\nALTER TABLE users ADD COLUMN phone VARCHAR(20);\n-- Rollback: ALTER TABLE users DROP COLUMN phone;\n\n-- ADD CONSTRAINT → DROP CONSTRAINT\nALTER TABLE orders ADD CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(id);\n-- Rollback: ALTER TABLE orders DROP CONSTRAINT fk_user;\n\n-- CREATE INDEX → DROP INDEX\nCREATE INDEX idx_email ON users(email);\n-- Rollback: DROP INDEX idx_email;\n\n-- RENAME COLUMN → Complex (need old column back)\n-- Better to use add/copy/drop pattern\n```\n\n### Lock Analysis\n\n```sql\n-- PostgreSQL: Check what operations lock tables\n-- https://www.postgresql.org/docs/current/explicit-locking.html\n\n-- ACCESS EXCLUSIVE (blocks everything):\n-- - DROP TABLE\n-- - ALTER TABLE ... ADD COLUMN with DEFAULT (< PG 11)\n-- - ALTER TABLE ... ALTER COLUMN TYPE\n\n-- SHARE UPDATE EXCLUSIVE (blocks DDL, allows DML):\n-- - CREATE INDEX CONCURRENTLY\n-- - VACUUM\n\n-- Check for blocking locks before migration\nSELECT blocked_locks.pid AS blocked_pid,\n       blocked_activity.usename AS blocked_user,\n       blocking_locks.pid AS blocking_pid,\n       blocking_activity.usename AS blocking_user,\n       blocked_activity.query AS blocked_statement\nFROM pg_catalog.pg_locks blocked_locks\nJOIN pg_catalog.pg_stat_activity blocked_activity\n    ON blocked_activity.pid = blocked_locks.pid\nJOIN pg_catalog.pg_locks blocking_locks\n    ON blocking_locks.locktype = blocked_locks.locktype\nWHERE NOT blocked_locks.granted;\n```\n\n## Response Template\n```\n## Migration Review Results\n\n**Migration**: 20240115_add_user_phone\n**Type**: Schema change\n**Risk Level**: HIGH\n\n### Safety Analysis\n| Status | Issue | Impact |\n|--------|-------|--------|\n| CRITICAL | Non-nullable column without default | Migration will fail |\n| HIGH | No rollback operation defined | Cannot revert |\n| MEDIUM | Missing concurrent index | Table lock during creation |\n\n### Lock Analysis\n| Operation | Lock Type | Duration |\n|-----------|-----------|----------|\n| ADD COLUMN | ACCESS EXCLUSIVE | Brief |\n| CREATE INDEX | ACCESS EXCLUSIVE | Long (use CONCURRENTLY) |\n\n### Rollback Plan\n- [ ] Add rollback script\n- [ ] Test rollback in staging\n- [ ] Document manual rollback steps\n\n### Recommended Changes\n```sql\n-- Step 1: Add nullable column\nALTER TABLE users ADD COLUMN phone VARCHAR(20);\n\n-- Step 2: Backfill data\nUPDATE users SET phone = '' WHERE phone IS NULL;\n\n-- Step 3: Add NOT NULL\nALTER TABLE users ALTER COLUMN phone SET NOT NULL;\n\n-- Rollback\nALTER TABLE users DROP COLUMN phone;\n```\n\n### Pre-Migration Checklist\n- [ ] Backup database\n- [ ] Test in staging with production data\n- [ ] Schedule during low-traffic period\n- [ ] Notify team of potential downtime\n- [ ] Prepare rollback script\n```\n\n## Best Practices\n1. **Multi-Step**: Break dangerous operations into steps\n2. **Rollback**: Always define down/reverse migration\n3. **Concurrent**: Use CONCURRENTLY for indexes\n4. **Batching**: Process large data in chunks\n5. **Testing**: Test with production-like data volume\n\n## Integration\n- `schema-reviewer`: Schema design review\n- `sql-optimizer`: Query performance\n- `ci-cd-reviewer`: Migration in pipelines"
              },
              {
                "name": "ml-reviewer",
                "description": "WHEN: Machine Learning/Deep Learning code review, PyTorch/TensorFlow patterns, Model training optimization, MLOps checks\nWHAT: Model architecture review + Training patterns + Data pipeline checks + GPU optimization + Experiment tracking\nWHEN NOT: Data analysis only → python-data-reviewer, General Python → python-reviewer\n",
                "path": "skills/ml-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "ml-reviewer",
                  "description": "WHEN: Machine Learning/Deep Learning code review, PyTorch/TensorFlow patterns, Model training optimization, MLOps checks\nWHAT: Model architecture review + Training patterns + Data pipeline checks + GPU optimization + Experiment tracking\nWHEN NOT: Data analysis only → python-data-reviewer, General Python → python-reviewer\n"
                },
                "content": "# ML Reviewer Skill\n\n## Purpose\nReviews Machine Learning and Deep Learning code for PyTorch, TensorFlow, scikit-learn, and MLOps best practices.\n\n## When to Use\n- ML/DL project code review\n- \"PyTorch\", \"TensorFlow\", \"Keras\", \"scikit-learn\", \"model training\" mentions\n- Model performance, training optimization inspection\n- Projects with ML framework dependencies\n\n## Project Detection\n- `torch`, `tensorflow`, `keras`, `sklearn` in requirements.txt/pyproject.toml\n- `.pt`, `.pth`, `.h5`, `.pkl` model files\n- `train.py`, `model.py`, `dataset.py` files\n- Jupyter notebooks with ML imports\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Framework**: PyTorch / TensorFlow / scikit-learn\n**Python**: 3.10+\n**CUDA**: 11.x / 12.x\n**Task**: Classification / Regression / NLP / CV\n**Stage**: Research / Production\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full ML pattern check (recommended)\n- Model architecture review\n- Training loop optimization\n- Data pipeline efficiency\n- MLOps/deployment patterns\nmultiSelect: true\n```\n\n## Detection Rules\n\n### PyTorch Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Missing model.eval() | Inconsistent inference | HIGH |\n| Missing torch.no_grad() | Memory leak in inference | HIGH |\n| In-place operations in autograd | Gradient computation error | CRITICAL |\n| DataLoader num_workers=0 | CPU bottleneck | MEDIUM |\n| Missing gradient clipping | Exploding gradients | MEDIUM |\n\n```python\n# BAD: Missing eval() and no_grad()\ndef predict(model, x):\n    return model(x)  # Dropout/BatchNorm inconsistent!\n\n# GOOD: Proper inference mode\ndef predict(model, x):\n    model.eval()\n    with torch.no_grad():\n        return model(x)\n\n# BAD: In-place operation breaking autograd\nx = torch.randn(10, requires_grad=True)\nx += 1  # In-place! Breaks gradient computation\n\n# GOOD: Out-of-place operation\nx = torch.randn(10, requires_grad=True)\nx = x + 1\n\n# BAD: DataLoader bottleneck\nloader = DataLoader(dataset, batch_size=32)  # num_workers=0\n\n# GOOD: Parallel data loading\nloader = DataLoader(\n    dataset,\n    batch_size=32,\n    num_workers=4,\n    pin_memory=True,  # For GPU\n    persistent_workers=True,\n)\n\n# BAD: No gradient clipping\noptimizer.step()\n\n# GOOD: Clip gradients\ntorch.nn.utils.clip_grad_norm_(model.parameters(), max_norm=1.0)\noptimizer.step()\n```\n\n### TensorFlow/Keras Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Missing @tf.function | Performance loss | MEDIUM |\n| Eager mode in production | Slow inference | HIGH |\n| Large model in memory | OOM risk | HIGH |\n| Missing mixed precision | Training inefficiency | MEDIUM |\n\n```python\n# BAD: No @tf.function\ndef train_step(x, y):\n    with tf.GradientTape() as tape:\n        pred = model(x)\n        loss = loss_fn(y, pred)\n    gradients = tape.gradient(loss, model.trainable_variables)\n    optimizer.apply_gradients(zip(gradients, model.trainable_variables))\n\n# GOOD: Use @tf.function\n@tf.function\ndef train_step(x, y):\n    with tf.GradientTape() as tape:\n        pred = model(x, training=True)\n        loss = loss_fn(y, pred)\n    gradients = tape.gradient(loss, model.trainable_variables)\n    optimizer.apply_gradients(zip(gradients, model.trainable_variables))\n\n# BAD: Missing mixed precision\nmodel.fit(x_train, y_train, epochs=10)\n\n# GOOD: Enable mixed precision\ntf.keras.mixed_precision.set_global_policy('mixed_float16')\nmodel.fit(x_train, y_train, epochs=10)\n```\n\n### scikit-learn Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| fit_transform on test data | Data leakage | CRITICAL |\n| Missing cross-validation | Overfitting risk | HIGH |\n| No feature scaling | Model performance | MEDIUM |\n| Hardcoded random_state | Reproducibility | LOW |\n\n```python\n# BAD: Data leakage\nscaler = StandardScaler()\nX_train_scaled = scaler.fit_transform(X_train)\nX_test_scaled = scaler.fit_transform(X_test)  # LEAK! Re-fitting\n\n# GOOD: transform only on test\nscaler = StandardScaler()\nX_train_scaled = scaler.fit_transform(X_train)\nX_test_scaled = scaler.transform(X_test)  # No re-fit\n\n# BAD: No cross-validation\nmodel.fit(X_train, y_train)\nscore = model.score(X_test, y_test)\n\n# GOOD: Use cross-validation\nfrom sklearn.model_selection import cross_val_score\nscores = cross_val_score(model, X, y, cv=5)\nprint(f\"CV Score: {scores.mean():.3f} (+/- {scores.std():.3f})\")\n\n# BAD: Pipeline without scaling\nmodel = LogisticRegression()\nmodel.fit(X_train, y_train)\n\n# GOOD: Use Pipeline with scaling\nfrom sklearn.pipeline import Pipeline\npipeline = Pipeline([\n    ('scaler', StandardScaler()),\n    ('classifier', LogisticRegression())\n])\npipeline.fit(X_train, y_train)\n```\n\n### Data Pipeline\n| Check | Problem | Solution |\n|-------|---------|----------|\n| Loading full dataset to memory | OOM | Use generators/tf.data |\n| No data augmentation | Overfitting | Add augmentation |\n| Unbalanced classes | Biased model | Oversample/undersample/weights |\n| No validation split | No early stopping | Use validation set |\n\n```python\n# BAD: Full dataset in memory\nimages = []\nfor path in all_image_paths:\n    images.append(load_image(path))  # OOM for large datasets!\n\n# GOOD: Use generator\ndef data_generator(paths, batch_size):\n    for i in range(0, len(paths), batch_size):\n        batch_paths = paths[i:i+batch_size]\n        yield np.array([load_image(p) for p in batch_paths])\n\n# GOOD: Use tf.data\ndataset = tf.data.Dataset.from_tensor_slices(paths)\ndataset = dataset.map(load_and_preprocess)\ndataset = dataset.batch(32).prefetch(tf.data.AUTOTUNE)\n\n# BAD: No class weights for imbalanced data\nmodel.fit(X_train, y_train)\n\n# GOOD: Add class weights\nfrom sklearn.utils.class_weight import compute_class_weight\nweights = compute_class_weight('balanced', classes=np.unique(y), y=y)\nclass_weights = dict(enumerate(weights))\nmodel.fit(X_train, y_train, class_weight=class_weights)\n```\n\n### GPU/Performance\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| CPU tensor operations | Use GPU tensors | HIGH |\n| Frequent GPU-CPU transfer | Batch transfers | HIGH |\n| No gradient accumulation | OOM for large batch | MEDIUM |\n| Missing torch.cuda.empty_cache() | Memory fragmentation | LOW |\n\n```python\n# BAD: CPU operations\nx = torch.randn(1000, 1000)\ny = torch.randn(1000, 1000)\nz = x @ y  # CPU computation\n\n# GOOD: GPU operations\ndevice = torch.device('cuda' if torch.cuda.is_available() else 'cpu')\nx = torch.randn(1000, 1000, device=device)\ny = torch.randn(1000, 1000, device=device)\nz = x @ y  # GPU computation\n\n# BAD: Frequent CPU-GPU transfer\nfor x, y in dataloader:\n    x = x.cuda()\n    y = y.cuda()\n    loss = model(x, y)\n    print(loss.item())  # Sync every iteration!\n\n# GOOD: Batch logging\nlosses = []\nfor x, y in dataloader:\n    x, y = x.to(device), y.to(device)\n    loss = model(x, y)\n    losses.append(loss)\nif step % log_interval == 0:\n    print(torch.stack(losses).mean().item())\n\n# Gradient accumulation for large effective batch\naccumulation_steps = 4\nfor i, (x, y) in enumerate(dataloader):\n    loss = model(x, y) / accumulation_steps\n    loss.backward()\n    if (i + 1) % accumulation_steps == 0:\n        optimizer.step()\n        optimizer.zero_grad()\n```\n\n### MLOps/Experiment Tracking\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No experiment tracking | Reproducibility | HIGH |\n| Hardcoded hyperparameters | Config management | MEDIUM |\n| No model versioning | Deployment issues | MEDIUM |\n| Missing seed setting | Non-reproducible | HIGH |\n\n```python\n# BAD: No seed setting\nmodel = train_model(X, y)\n\n# GOOD: Set all seeds\nimport random\nimport numpy as np\nimport torch\n\ndef set_seed(seed=42):\n    random.seed(seed)\n    np.random.seed(seed)\n    torch.manual_seed(seed)\n    torch.cuda.manual_seed_all(seed)\n    torch.backends.cudnn.deterministic = True\n\nset_seed(42)\n\n# BAD: Hardcoded hyperparameters\nlr = 0.001\nbatch_size = 32\nepochs = 100\n\n# GOOD: Use config file or hydra\nimport hydra\nfrom omegaconf import DictConfig\n\n@hydra.main(config_path=\"configs\", config_name=\"train\")\ndef train(cfg: DictConfig):\n    model = build_model(cfg.model)\n    optimizer = torch.optim.Adam(model.parameters(), lr=cfg.lr)\n\n# GOOD: Use experiment tracking\nimport wandb\nwandb.init(project=\"my-project\", config=cfg)\nfor epoch in range(epochs):\n    loss = train_epoch(model, dataloader)\n    wandb.log({\"loss\": loss, \"epoch\": epoch})\nwandb.finish()\n```\n\n## Response Template\n```\n## ML Code Review Results\n\n**Project**: [name]\n**Framework**: PyTorch/TensorFlow/scikit-learn\n**Task**: Classification/Regression/NLP/CV\n**Files Analyzed**: X\n\n### Model Architecture\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | models/resnet.py | Missing dropout for regularization |\n| LOW | models/transformer.py | Consider gradient checkpointing |\n\n### Training Loop\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | train.py | Missing model.eval() in validation (line 45) |\n| HIGH | train.py | No gradient clipping (line 67) |\n\n### Data Pipeline\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | data/dataset.py | fit_transform on test data (line 23) |\n| HIGH | data/loader.py | DataLoader num_workers=0 |\n\n### MLOps\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | train.py | No seed setting for reproducibility |\n| MEDIUM | train.py | Hardcoded hyperparameters |\n\n### Recommended Actions\n1. [ ] Add model.eval() and torch.no_grad() for inference\n2. [ ] Fix data leakage in preprocessing\n3. [ ] Set random seeds for reproducibility\n4. [ ] Add experiment tracking (wandb/mlflow)\n```\n\n## Best Practices\n1. **Training**: eval mode, no_grad, gradient clipping, mixed precision\n2. **Data**: No leakage, proper splits, augmentation, balanced classes\n3. **Performance**: GPU operations, batch transfers, gradient accumulation\n4. **MLOps**: Seed setting, experiment tracking, config management\n5. **Testing**: Unit tests for data pipeline, model output shape tests\n\n## Integration\n- `python-reviewer` skill: General Python code quality\n- `python-data-reviewer` skill: Data preprocessing patterns\n- `test-generator` skill: ML test generation\n- `docker-reviewer` skill: ML containerization\n\n## Notes\n- Based on PyTorch 2.x, TensorFlow 2.x, scikit-learn 1.x\n- Supports distributed training patterns (DDP, FSDP)\n- Includes MLOps patterns (wandb, mlflow, hydra)"
              },
              {
                "name": "nextjs-reviewer",
                "description": "WHEN: Next.js project review, App Router patterns, Server/Client Component separation, data fetching\nWHAT: Router pattern analysis + SC/CC separation + next/image·font optimization + Server Actions review\nWHEN NOT: General code quality → code-reviewer, Bundle performance → perf-analyzer\n",
                "path": "skills/nextjs-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "nextjs-reviewer",
                  "description": "WHEN: Next.js project review, App Router patterns, Server/Client Component separation, data fetching\nWHAT: Router pattern analysis + SC/CC separation + next/image·font optimization + Server Actions review\nWHEN NOT: General code quality → code-reviewer, Bundle performance → perf-analyzer\n"
                },
                "content": "# Next.js Reviewer Skill\n\n## Purpose\nReviews Next.js specific patterns: App Router, Server Components, data fetching, and optimizations.\n\n## When to Use\n- Next.js project code review\n- App Router, Server Component mentions\n- Next.js optimization requests\n- Projects with `next.config.js` or `next.config.mjs`\n\n## Project Detection\n- `next.config.js` or `next.config.mjs`\n- `next` dependency in `package.json`\n- `app/` directory (App Router)\n- `pages/` directory (Pages Router)\n\n## Workflow\n\n### Step 1: Analyze Configuration\n```\n**Next.js**: 14.x\n**Router**: App Router\n**TypeScript**: Enabled\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full Next.js pattern check (recommended)\n- Server/Client Component separation\n- Data fetching patterns\n- Image/Font optimization\n- Routing and layouts\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Server vs Client Components\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Unnecessary 'use client' | Remove if SC possible | MEDIUM |\n| async in Client Component | Move to SC | HIGH |\n| useState/useEffect | Check 'use client' need | INFO |\n\n```typescript\n// BAD: Unnecessary 'use client'\n'use client'\nexport default function StaticPage() {\n  return <div>Static content</div>\n}\n\n// GOOD: Keep as Server Component\nexport default function StaticPage() {\n  return <div>Static content</div>\n}\n```\n\n### App Router Files\n| File | Purpose | Check |\n|------|---------|-------|\n| `page.tsx` | Route page | Default export |\n| `layout.tsx` | Layout | children prop |\n| `loading.tsx` | Loading UI | Suspense alternative |\n| `error.tsx` | Error handling | 'use client' required |\n\n### Data Fetching\n| Pattern | Recommendation |\n|---------|----------------|\n| SC fetch | Recommended (auto caching) |\n| Route Handler | API endpoints |\n| Client SWR/React Query | Real-time data |\n\n```typescript\n// GOOD: Direct fetch in Server Component\nasync function ProductPage({ params }) {\n  const product = await fetch(`/api/products/${params.id}`)\n  return <Product data={product} />\n}\n\n// WARNING: useEffect fetch in Client\n'use client'\nfunction ProductPage({ params }) {\n  useEffect(() => { fetch(...) }, [])\n  // Recommend: Move to Server Component\n}\n```\n\n### Image Optimization\n| Check | Issue | Severity |\n|-------|-------|----------|\n| `<img>` tag | Use `next/image` | HIGH |\n| Missing width/height | Layout shift | MEDIUM |\n| Missing priority | LCP image needs it | MEDIUM |\n\n### Server Actions\n| Check | Description | Severity |\n|-------|-------------|----------|\n| 'use server' location | Top of function/file | HIGH |\n| Input validation | Use zod | HIGH |\n| Error handling | try-catch | MEDIUM |\n\n## Response Template\n```\n## Next.js Review Results\n\n**Project**: [name]\n**Next.js**: 14.x (App Router)\n\n### Server/Client Components\n| Status | File | Issue |\n|--------|------|-------|\n| WARNING | app/products/page.tsx | Unnecessary 'use client' |\n\n### Data Fetching\n| Status | Location | Recommendation |\n|--------|----------|----------------|\n| WARNING | app/dashboard/page.tsx | Move useEffect fetch to SC |\n\n### Optimization\n| Area | Status | Details |\n|------|--------|---------|\n| Images | WARNING | 3 files using <img> |\n| Fonts | OK | Using next/font |\n\n### Actions\n1. [ ] Remove 'use client' from `app/products/page.tsx`\n2. [ ] Move fetch to Server Component\n3. [ ] Use next/image in `components/Banner.tsx`\n```\n\n## Best Practices\n1. **Server First**: Keep SC when possible\n2. **Colocation**: Fetch data where needed\n3. **Streaming**: Use loading.tsx and Suspense\n4. **Caching**: Explicit fetch caching strategy\n5. **Metadata**: Use generateMetadata\n\n## Integration\n- `code-reviewer` skill\n- `perf-analyzer` skill\n- `security-scanner` skill\n\n## Notes\n- Based on Next.js 13+ App Router\n- Pages Router has different rules\n- Review next.config.js settings too"
              },
              {
                "name": "orm-reviewer",
                "description": "WHEN: ORM code review, Prisma/TypeORM/SQLAlchemy/GORM patterns, lazy loading, transactions\nWHAT: Query efficiency + Lazy/eager loading + Transaction handling + N+1 prevention + Model design\nWHEN NOT: Raw SQL → sql-optimizer, Schema design → schema-reviewer\n",
                "path": "skills/orm-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "orm-reviewer",
                  "description": "WHEN: ORM code review, Prisma/TypeORM/SQLAlchemy/GORM patterns, lazy loading, transactions\nWHAT: Query efficiency + Lazy/eager loading + Transaction handling + N+1 prevention + Model design\nWHEN NOT: Raw SQL → sql-optimizer, Schema design → schema-reviewer\n"
                },
                "content": "# ORM Reviewer Skill\n\n## Purpose\nReviews ORM code for query efficiency, loading strategies, transactions, and best practices.\n\n## When to Use\n- ORM code review\n- Prisma/TypeORM/SQLAlchemy patterns\n- N+1 query detection\n- Transaction handling review\n- Model relationship design\n\n## Project Detection\n- `schema.prisma` (Prisma)\n- `@Entity` decorators (TypeORM)\n- `models.py` (Django/SQLAlchemy)\n- GORM struct tags\n\n## Workflow\n\n### Step 1: Analyze ORM\n```\n**ORM**: Prisma / TypeORM / SQLAlchemy\n**Database**: PostgreSQL\n**Models**: 15\n**Relationships**: HasMany, BelongsTo, ManyToMany\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full ORM review (recommended)\n- Query efficiency\n- Loading strategies (N+1)\n- Transaction handling\n- Model design\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Prisma Patterns\n\n#### N+1 Prevention\n```typescript\n// BAD: N+1 queries\nconst users = await prisma.user.findMany();\nfor (const user of users) {\n    const orders = await prisma.order.findMany({\n        where: { userId: user.id }\n    });\n    // N+1 queries!\n}\n\n// GOOD: Include related data\nconst users = await prisma.user.findMany({\n    include: {\n        orders: true\n    }\n});\n\n// GOOD: Selective include\nconst users = await prisma.user.findMany({\n    include: {\n        orders: {\n            where: { status: 'pending' },\n            take: 5,\n            orderBy: { createdAt: 'desc' }\n        }\n    }\n});\n```\n\n#### Select Optimization\n```typescript\n// BAD: Fetching all fields\nconst users = await prisma.user.findMany();\n\n// GOOD: Select only needed fields\nconst users = await prisma.user.findMany({\n    select: {\n        id: true,\n        name: true,\n        email: true\n    }\n});\n\n// GOOD: Combining select with relations\nconst orders = await prisma.order.findMany({\n    select: {\n        id: true,\n        total: true,\n        user: {\n            select: {\n                name: true,\n                email: true\n            }\n        }\n    }\n});\n```\n\n#### Transactions\n```typescript\n// BAD: No transaction for related operations\nawait prisma.order.create({ data: orderData });\nawait prisma.orderItem.createMany({ data: items });\nawait prisma.inventory.updateMany({ ... });\n// If inventory update fails, order is orphaned!\n\n// GOOD: Interactive transaction\nconst result = await prisma.$transaction(async (tx) => {\n    const order = await tx.order.create({ data: orderData });\n\n    await tx.orderItem.createMany({\n        data: items.map(item => ({ ...item, orderId: order.id }))\n    });\n\n    await tx.inventory.updateMany({\n        where: { productId: { in: items.map(i => i.productId) } },\n        data: { quantity: { decrement: 1 } }\n    });\n\n    return order;\n});\n```\n\n### TypeORM Patterns\n\n#### Eager vs Lazy Loading\n```typescript\n// BAD: Lazy loading causing N+1\n@Entity()\nclass User {\n    @OneToMany(() => Order, order => order.user)\n    orders: Order[];  // Lazy by default\n}\n\n// Triggers N+1:\nconst users = await userRepo.find();\nfor (const user of users) {\n    console.log(user.orders);  // Each access = query!\n}\n\n// GOOD: Eager loading with relations\nconst users = await userRepo.find({\n    relations: ['orders']\n});\n\n// GOOD: QueryBuilder for complex queries\nconst users = await userRepo\n    .createQueryBuilder('user')\n    .leftJoinAndSelect('user.orders', 'order')\n    .where('order.status = :status', { status: 'pending' })\n    .getMany();\n```\n\n#### Query Optimization\n```typescript\n// BAD: Multiple queries\nconst user = await userRepo.findOne({ where: { id } });\nconst orders = await orderRepo.find({ where: { userId: id } });\nconst reviews = await reviewRepo.find({ where: { userId: id } });\n\n// GOOD: Single query with joins\nconst user = await userRepo.findOne({\n    where: { id },\n    relations: ['orders', 'reviews']\n});\n\n// GOOD: Select specific columns\nconst users = await userRepo.find({\n    select: ['id', 'name', 'email'],\n    where: { status: 'active' }\n});\n```\n\n### SQLAlchemy Patterns\n\n#### Loading Strategies\n```python\n# BAD: Lazy loading N+1\nusers = session.query(User).all()\nfor user in users:\n    print(user.orders)  # N queries!\n\n# GOOD: Eager loading\nfrom sqlalchemy.orm import joinedload, selectinload\n\n# For one-to-many: selectinload (2 queries)\nusers = session.query(User).options(\n    selectinload(User.orders)\n).all()\n\n# For many-to-one: joinedload (1 query)\norders = session.query(Order).options(\n    joinedload(Order.user)\n).all()\n\n# Combined\nusers = session.query(User).options(\n    selectinload(User.orders).selectinload(Order.items),\n    joinedload(User.profile)\n).all()\n```\n\n#### Session Management\n```python\n# BAD: Long-lived session\nsession = Session()\n# ... many operations over time\nsession.close()  # Objects may be stale\n\n# GOOD: Context manager\nwith Session() as session:\n    user = session.query(User).first()\n    # Session auto-closes\n\n# GOOD: Scoped session in web apps\nfrom sqlalchemy.orm import scoped_session\n\nSession = scoped_session(sessionmaker(bind=engine))\n\n# In request handler\ndef handle_request():\n    try:\n        # Use Session()\n        Session.commit()\n    except:\n        Session.rollback()\n        raise\n    finally:\n        Session.remove()  # Clean up for this thread\n```\n\n### Django ORM Patterns\n\n#### N+1 Prevention\n```python\n# BAD: N+1 queries\norders = Order.objects.all()\nfor order in orders:\n    print(order.user.name)  # N queries!\n\n# GOOD: select_related for ForeignKey\norders = Order.objects.select_related('user').all()\n\n# GOOD: prefetch_related for reverse FK / M2M\nusers = User.objects.prefetch_related('orders').all()\n\n# GOOD: Combined with Prefetch for filtering\nfrom django.db.models import Prefetch\n\nusers = User.objects.prefetch_related(\n    Prefetch(\n        'orders',\n        queryset=Order.objects.filter(status='pending')\n    )\n).all()\n```\n\n#### Query Optimization\n```python\n# BAD: .count() after .all()\ncount = len(Order.objects.all())  # Loads all objects!\n\n# GOOD: Database count\ncount = Order.objects.count()\n\n# BAD: Multiple queries\nuser = User.objects.get(id=user_id)\norder_count = Order.objects.filter(user=user).count()\n\n# GOOD: Annotation\nfrom django.db.models import Count\n\nuser = User.objects.annotate(\n    order_count=Count('orders')\n).get(id=user_id)\n\n# values() for specific columns only\nemails = User.objects.values_list('email', flat=True)\n```\n\n### GORM (Go) Patterns\n```go\n// BAD: N+1 queries\nvar users []User\ndb.Find(&users)\nfor _, user := range users {\n    var orders []Order\n    db.Where(\"user_id = ?\", user.ID).Find(&orders)\n}\n\n// GOOD: Preload\nvar users []User\ndb.Preload(\"Orders\").Find(&users)\n\n// GOOD: Preload with conditions\ndb.Preload(\"Orders\", \"status = ?\", \"pending\").Find(&users)\n\n// GOOD: Nested preload\ndb.Preload(\"Orders.Items\").Find(&users)\n\n// Select specific columns\nvar users []User\ndb.Select(\"id\", \"name\", \"email\").Find(&users)\n```\n\n## Response Template\n```\n## ORM Code Review Results\n\n**ORM**: Prisma\n**Database**: PostgreSQL\n**Models**: 12\n\n### N+1 Queries\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | userService.ts:45 | Loop with findMany causing N+1 |\n\n### Loading Strategy\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | orderController.ts:23 | Missing include for user relation |\n\n### Transactions\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | checkoutService.ts:67 | Related operations without transaction |\n\n### Query Efficiency\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | reportService.ts:12 | Selecting all columns |\n\n### Recommended Fixes\n```typescript\n// Fix N+1 in userService.ts\nconst users = await prisma.user.findMany({\n    include: { orders: true }\n});\n\n// Add transaction in checkoutService.ts\nawait prisma.$transaction(async (tx) => {\n    // ... atomic operations\n});\n```\n```\n\n## Best Practices\n1. **Loading**: Eager load known relations\n2. **N+1**: Always include/preload in lists\n3. **Select**: Only needed columns\n4. **Transactions**: Wrap related operations\n5. **Batching**: Use createMany, bulk operations\n\n## Integration\n- `sql-optimizer`: Raw query optimization\n- `schema-reviewer`: Model design\n- `perf-analyzer`: Application performance"
              },
              {
                "name": "perf-analyzer",
                "description": "WHEN: Performance analysis, bundle size optimization, rendering, Core Web Vitals, code splitting\nWHAT: Bundle analysis + large dependency detection + re-render issues + useMemo/useCallback suggestions + LCP/FID/CLS improvements\nWHEN NOT: Code quality → code-reviewer, Security → security-scanner\n",
                "path": "skills/perf-analyzer/SKILL.md",
                "frontmatter": {
                  "name": "perf-analyzer",
                  "description": "WHEN: Performance analysis, bundle size optimization, rendering, Core Web Vitals, code splitting\nWHAT: Bundle analysis + large dependency detection + re-render issues + useMemo/useCallback suggestions + LCP/FID/CLS improvements\nWHEN NOT: Code quality → code-reviewer, Security → security-scanner\n"
                },
                "content": "# Performance Analyzer Skill\n\n## Purpose\nAnalyzes frontend application performance and suggests optimizations for bundle size, rendering, and images.\n\n## When to Use\n- Performance analysis requests\n- \"Slow\", \"long loading\" mentions\n- Bundle size, rendering, Core Web Vitals questions\n- Pre-production performance review\n\n## Workflow\n\n### Step 1: Select Analysis Areas\n**AskUserQuestion:**\n```\n\"Which areas to analyze?\"\nOptions:\n- Full performance analysis (recommended)\n- Bundle size analysis\n- Rendering performance (re-renders)\n- Image/asset optimization\n- Code splitting opportunities\nmultiSelect: true\n```\n\n## Analysis Areas\n\n### Bundle Size\n| Item | Threshold | Severity |\n|------|-----------|----------|\n| Total bundle | > 500KB | HIGH |\n| Initial JS | > 200KB | HIGH |\n| Single chunk | > 100KB | MEDIUM |\n| Unused code | Tree-shaking failures | MEDIUM |\n\n**Large Dependencies:**\n```typescript\n// WARNING: Large libraries\nimport _ from 'lodash'         // 71KB\nimport moment from 'moment'    // 280KB\n\n// BETTER: Lightweight alternatives\nimport debounce from 'lodash/debounce'  // 2KB\nimport { format } from 'date-fns'        // Only needed functions\n```\n\n**Tree-shaking Issues:**\n```typescript\n// BAD: Full import (no tree-shaking)\nimport * as utils from './utils'\n\n// GOOD: Named import\nimport { specificFunction } from './utils'\n```\n\n### Rendering Performance\n\n**Unnecessary Re-renders:**\n```typescript\n// WARNING: New object/array every render\nfunction Component() {\n  return <Child style={{ color: 'red' }} />  // New object each time\n}\n\n// BETTER: External definition\nconst style = { color: 'red' }\nfunction Component() {\n  return <Child style={style} />\n}\n```\n\n**Expensive Computations:**\n```typescript\n// WARNING: Computed every render\nfunction Component({ data }) {\n  const processed = data.map(item => expensiveOp(item))\n  return <List items={processed} />\n}\n\n// BETTER: useMemo caching\nconst processed = useMemo(\n  () => data.map(item => expensiveOp(item)),\n  [data]\n)\n```\n\n**Callback Optimization:**\n```typescript\n// WARNING: New function every render\n<Child onClick={() => handleClick()} />\n\n// BETTER: useCallback\nconst handleClick = useCallback(() => { /* ... */ }, [])\n<Child onClick={handleClick} />\n```\n\n### Image Optimization\n| Issue | Problem | Solution |\n|-------|---------|----------|\n| Large image | > 200KB | Compress or WebP |\n| Unoptimized format | PNG/JPG | WebP/AVIF |\n| Missing lazy load | Offscreen images | loading=\"lazy\" |\n| Fixed size | Non-responsive | srcset/sizes |\n\n```typescript\n// BAD: No optimization\n<img src=\"/hero.jpg\" alt=\"Hero\" />\n\n// GOOD: next/image\n<Image\n  src=\"/hero.jpg\"\n  alt=\"Hero\"\n  width={1200}\n  height={600}\n  priority  // LCP image\n  placeholder=\"blur\"\n/>\n```\n\n### Code Splitting\n```typescript\n// WARNING: Unnecessary initial load\nimport HeavyComponent from './HeavyComponent'\n\n// BETTER: Load on demand\nconst HeavyComponent = dynamic(() => import('./HeavyComponent'), {\n  loading: () => <Skeleton />\n})\n```\n\n### Core Web Vitals\n\n**LCP (Largest Contentful Paint)**\n| Grade | Time | Improvements |\n|-------|------|--------------|\n| Good | < 2.5s | - |\n| Needs Work | 2.5-4s | Image optimization, server response |\n| Poor | > 4s | CDN, caching, code splitting |\n\n**FID (First Input Delay)**\n| Grade | Time | Improvements |\n|-------|------|--------------|\n| Good | < 100ms | - |\n| Needs Work | 100-300ms | Reduce main thread blocking |\n| Poor | > 300ms | Split long tasks, Web Workers |\n\n**CLS (Cumulative Layout Shift)**\n| Grade | Score | Improvements |\n|-------|-------|--------------|\n| Good | < 0.1 | - |\n| Needs Work | 0.1-0.25 | Specify image/font dimensions |\n| Poor | > 0.25 | Reserve space for dynamic content |\n\n## Response Template\n```\n## Performance Analysis Results\n\n**Project**: [name]\n\n### Bundle Size\n| Item | Size | Status |\n|------|------|--------|\n| Total bundle | 650KB | WARNING |\n| Initial JS | 180KB | OK |\n\n**Large Dependencies:**\n| Package | Size | Alternative |\n|---------|------|-------------|\n| moment | 280KB | date-fns (7KB) |\n| lodash | 71KB | lodash-es + individual imports |\n\n### Rendering Performance\n| Component | Issue | Recommendation |\n|-----------|-------|----------------|\n| ProductList | Unnecessary re-renders | Add useMemo |\n\n### Image Optimization\n| Image | Size | Recommendation |\n|-------|------|----------------|\n| hero.jpg | 450KB | Convert to WebP, use next/image |\n\n### Code Splitting Opportunities\n| Component | Size | Recommendation |\n|-----------|------|----------------|\n| Dashboard | 85KB | dynamic import |\n\n### Priority Actions\n1. [ ] moment → date-fns migration (-273KB)\n2. [ ] Add useMemo to ProductList\n3. [ ] Convert hero.jpg to WebP\n4. [ ] Dynamic import Dashboard\n\n### Expected Improvements\n- Initial bundle: 650KB → ~350KB (-46%)\n- LCP: Expected improvement\n- TTI: Expected improvement\n```\n\n## Best Practices\n1. **Measure First**: Always measure before optimizing\n2. **Incremental**: Apply one change at a time\n3. **Trade-offs**: Avoid over-optimization\n4. **Real Device Testing**: Test on low-end devices\n5. **Continuous Monitoring**: Prevent performance regression\n\n## Integration\n- `code-reviewer` skill\n- `nextjs-reviewer` skill\n- `/analyze-code` command\n\n## Notes\n- Static analysis based, runtime performance may differ\n- Use with Lighthouse for actual measurements\n- Analyze production builds"
              },
              {
                "name": "prompt-clarifier",
                "description": "WHEN: Ambiguous prompts, vague requirements, missing context, unclear instructions\nWHAT: Ambiguity detection + AskUserQuestion clarification + Interactive option selection\nWHEN NOT: Clear detailed instructions → proceed directly\n",
                "path": "skills/prompt-clarifier/SKILL.md",
                "frontmatter": {
                  "name": "prompt-clarifier",
                  "description": "WHEN: Ambiguous prompts, vague requirements, missing context, unclear instructions\nWHAT: Ambiguity detection + AskUserQuestion clarification + Interactive option selection\nWHEN NOT: Clear detailed instructions → proceed directly\n"
                },
                "content": "# Prompt Clarifier Skill\n\n## Purpose\nDetects ambiguous prompts and asks clarification questions using AskUserQuestion with interactive selections.\n\n## When to Use\nActivate when:\n1. Prompt seems ambiguous or lacks necessary details\n2. User wants to create/build something without specifying technical details\n3. Vague instructions like \"fix this\", \"optimize\", or \"improve\" without context\n4. Excessive pronouns (\"this\", \"that\", \"it\") without clear references\n\n## Detection Criteria\nConsider prompt ambiguous if it:\n- Is very short (< 5 words) and lacks context\n- Mentions project type without specifying:\n  - Technology stack\n  - Main features\n  - Project scope\n- Contains optimization requests without specifying aspect:\n  - Performance/speed\n  - Memory usage\n  - Code readability\n  - Bundle size\n- References code/files without paths\n- Uses vague verbs without specifying target\n\n## Workflow\n\n### Step 1: Acknowledge\nBriefly acknowledge what the user is asking for.\n\n### Step 2: Use AskUserQuestion\nPresent targeted questions with multiple-choice options.\n\n**Example Question Patterns:**\n\nFor missing tech stack:\n```\nAskUserQuestion: \"Which tech stack would you like to use?\"\nOptions:\n- React + TypeScript + Node.js\n- Vue + JavaScript + Express\n- Vanilla JS + Python + FastAPI\n- I'll specify manually\n```\n\nFor missing features:\n```\nAskUserQuestion: \"Select main features (multiple selection)\"\nOptions:\n- User auth/login\n- Database CRUD\n- File upload\n- Real-time (WebSocket)\n- Payment system\n- Admin dashboard\nmultiSelect: true\n```\n\nFor vague optimization:\n```\nAskUserQuestion: \"What type of optimization do you need?\"\nOptions:\n- Execution speed/performance\n- Memory usage reduction\n- Bundle size reduction\n- Code readability\n```\n\nFor project scope:\n```\nAskUserQuestion: \"What's the project scale?\"\nOptions:\n- Simple prototype/MVP\n- Medium-scale project\n- Large enterprise-level\n- Not sure (recommend for me)\n```\n\n### Step 3: Provide Guidance\nAfter receiving answers, proceed with enhanced context.\n\n## Response Template\n\nWhen detecting ambiguity:\n\n1. **Acknowledge**: \"Got it. I'll help you with [request].\"\n2. **Explain**: \"To provide better results, I have a few questions.\"\n3. **Ask**: Use AskUserQuestion with relevant options\n4. **Proceed**: Start implementation with full context\n\n## Examples\n\n### Example 1: Vague Web Project\n**User**: \"Build me a website\"\n\n**Response**:\n```\nGot it. I'll help you build a website.\nFor better results, I have a few questions.\n\n[Use AskUserQuestion]\n1. Tech stack selection\n2. Main features selection\n3. Project scope\n\n[After answers, proceed with implementation]\n```\n\n### Example 2: Vague Optimization\n**User**: \"Optimize this code\"\n\n**Response**:\n```\nI'll help optimize your code.\nFirst, let me understand what type of optimization you need.\n\n[Use AskUserQuestion for optimization type]\n[Ask for file path if not specified]\n\n[Proceed with targeted optimization]\n```\n\n## Best Practices\n1. **Keep questions focused**: Ask only what's necessary\n2. **Provide sensible defaults**: Include common choices\n3. **Allow custom input**: Include \"Other\" option\n4. **Be conversational**: Don't make it feel like a form\n5. **Group related questions**: Ask related questions together\n6. **Proceed efficiently**: Once you have enough context, start working\n\n## Integration with Hook\nWorks with UserPromptSubmit hook. When you see:\n\n```\n<!-- VIBE CODING ASSISTANT: PROMPT CLARIFICATION NEEDED -->\n```\n\nAutomatically activate this skill and use AskUserQuestion.\n\n## Notes\n- Enhances vibe coding by ensuring sufficient context\n- Interactive selections make it easy to provide details\n- Don't ask unnecessary questions if prompt is clear"
              },
              {
                "name": "python-data-reviewer",
                "description": "WHEN: Pandas/NumPy code review, data processing, vectorization, memory optimization\nWHAT: Vectorization patterns + Memory efficiency + Data validation + Performance optimization + Best practices\nWHEN NOT: Web framework → fastapi/django/flask-reviewer, General Python → python-reviewer\n",
                "path": "skills/python-data-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "python-data-reviewer",
                  "description": "WHEN: Pandas/NumPy code review, data processing, vectorization, memory optimization\nWHAT: Vectorization patterns + Memory efficiency + Data validation + Performance optimization + Best practices\nWHEN NOT: Web framework → fastapi/django/flask-reviewer, General Python → python-reviewer\n"
                },
                "content": "# Python Data Reviewer Skill\n\n## Purpose\nReviews data science code for Pandas/NumPy efficiency, memory usage, and best practices.\n\n## When to Use\n- Pandas/NumPy code review\n- Data processing optimization\n- Memory efficiency check\n- \"Why is my data code slow?\"\n- ETL pipeline review\n\n## Project Detection\n- `pandas`, `numpy` in requirements.txt\n- `.ipynb` Jupyter notebooks\n- `data/`, `notebooks/` directories\n- DataFrame operations in code\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Pandas**: 2.0+\n**NumPy**: 1.24+\n**Other**: polars, dask, vaex\n**Visualization**: matplotlib, seaborn, plotly\n**ML**: scikit-learn, xgboost\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full data code review (recommended)\n- Vectorization and performance\n- Memory optimization\n- Data validation\n- Code organization\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Vectorization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| iterrows() loop | Use vectorized operations | CRITICAL |\n| apply() with simple func | Use built-in vectorized | HIGH |\n| Manual loop over array | Use NumPy broadcasting | HIGH |\n| List comprehension on Series | Use .map() or vectorize | MEDIUM |\n\n```python\n# BAD: iterrows (extremely slow)\nfor idx, row in df.iterrows():\n    df.loc[idx, \"total\"] = row[\"price\"] * row[\"quantity\"]\n\n# GOOD: Vectorized operation\ndf[\"total\"] = df[\"price\"] * df[\"quantity\"]\n\n# BAD: apply with simple operation\ndf[\"upper_name\"] = df[\"name\"].apply(lambda x: x.upper())\n\n# GOOD: Built-in string method\ndf[\"upper_name\"] = df[\"name\"].str.upper()\n\n# BAD: apply with condition\ndf[\"status\"] = df[\"score\"].apply(lambda x: \"pass\" if x >= 60 else \"fail\")\n\n# GOOD: np.where or np.select\ndf[\"status\"] = np.where(df[\"score\"] >= 60, \"pass\", \"fail\")\n\n# Multiple conditions\nconditions = [\n    df[\"score\"] >= 90,\n    df[\"score\"] >= 60,\n    df[\"score\"] < 60,\n]\nchoices = [\"A\", \"B\", \"F\"]\ndf[\"grade\"] = np.select(conditions, choices)\n```\n\n### Memory Optimization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| int64 for small ints | Use int8/int16/int32 | MEDIUM |\n| object dtype for categories | Use category dtype | HIGH |\n| Loading full file | Use chunks or usecols | HIGH |\n| Keeping unused columns | Drop early | MEDIUM |\n\n```python\n# BAD: Default dtypes waste memory\ndf = pd.read_csv(\"large_file.csv\")  # All int64, object\n\n# GOOD: Specify dtypes\ndtype_map = {\n    \"id\": \"int32\",\n    \"age\": \"int8\",\n    \"status\": \"category\",\n    \"price\": \"float32\",\n}\ndf = pd.read_csv(\"large_file.csv\", dtype=dtype_map)\n\n# GOOD: Load only needed columns\ndf = pd.read_csv(\n    \"large_file.csv\",\n    usecols=[\"id\", \"name\", \"price\"],\n    dtype=dtype_map,\n)\n\n# GOOD: Process in chunks\nchunks = pd.read_csv(\"huge_file.csv\", chunksize=100_000)\nresult = pd.concat([process_chunk(chunk) for chunk in chunks])\n\n# Memory check\nprint(df.info(memory_usage=\"deep\"))\n\n# Convert object to category if low cardinality\nfor col in df.select_dtypes(include=[\"object\"]).columns:\n    if df[col].nunique() / len(df) < 0.5:  # < 50% unique\n        df[col] = df[col].astype(\"category\")\n```\n\n### Data Validation\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No null check | Validate nulls early | HIGH |\n| No dtype validation | Assert expected types | MEDIUM |\n| No range validation | Check value bounds | MEDIUM |\n| Silent data issues | Raise or log warnings | HIGH |\n\n```python\n# GOOD: Data validation function\ndef validate_dataframe(df: pd.DataFrame) -> pd.DataFrame:\n    \"\"\"Validate and clean input DataFrame.\"\"\"\n\n    # Required columns\n    required_cols = [\"id\", \"name\", \"price\", \"quantity\"]\n    missing = set(required_cols) - set(df.columns)\n    if missing:\n        raise ValueError(f\"Missing columns: {missing}\")\n\n    # Null checks\n    null_counts = df[required_cols].isnull().sum()\n    if null_counts.any():\n        logger.warning(f\"Null values found:\\n{null_counts[null_counts > 0]}\")\n\n    # Type validation\n    assert df[\"id\"].dtype in [\"int32\", \"int64\"], \"id must be integer\"\n    assert df[\"price\"].dtype in [\"float32\", \"float64\"], \"price must be float\"\n\n    # Range validation\n    invalid_prices = df[df[\"price\"] < 0]\n    if len(invalid_prices) > 0:\n        logger.warning(f\"Found {len(invalid_prices)} negative prices\")\n        df = df[df[\"price\"] >= 0]\n\n    # Duplicate check\n    duplicates = df.duplicated(subset=[\"id\"])\n    if duplicates.any():\n        logger.warning(f\"Removing {duplicates.sum()} duplicates\")\n        df = df.drop_duplicates(subset=[\"id\"])\n\n    return df\n```\n\n### NumPy Patterns\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Python loop over array | Use broadcasting | CRITICAL |\n| np.append in loop | Pre-allocate array | HIGH |\n| Repeated array creation | Reuse arrays | MEDIUM |\n| Copy when not needed | Use views | MEDIUM |\n\n```python\n# BAD: Python loop\nresult = []\nfor i in range(len(arr)):\n    result.append(arr[i] * 2 + 1)\nresult = np.array(result)\n\n# GOOD: Vectorized\nresult = arr * 2 + 1\n\n# BAD: np.append in loop (creates new array each time)\nresult = np.array([])\nfor x in data:\n    result = np.append(result, process(x))\n\n# GOOD: Pre-allocate\nresult = np.empty(len(data))\nfor i, x in enumerate(data):\n    result[i] = process(x)\n\n# BETTER: Vectorize if possible\nresult = np.vectorize(process)(data)\n\n# BEST: Pure NumPy operation\nresult = np.sqrt(data) + np.log(data)\n\n# BAD: Unnecessary copy\nsubset = arr[arr > 0].copy()  # copy() often not needed\n\n# GOOD: View when modification not needed\nsubset = arr[arr > 0]  # Returns view\n```\n\n### Pandas Best Practices\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Chained indexing | Use .loc/.iloc | HIGH |\n| inplace=True | Assign result instead | MEDIUM |\n| reset_index() abuse | Keep index when useful | LOW |\n| df.append (deprecated) | Use pd.concat | HIGH |\n\n```python\n# BAD: Chained indexing (unpredictable)\ndf[df[\"price\"] > 100][\"status\"] = \"premium\"  # May not work!\n\n# GOOD: Use .loc\ndf.loc[df[\"price\"] > 100, \"status\"] = \"premium\"\n\n# BAD: df.append (deprecated)\nresult = pd.DataFrame()\nfor chunk in chunks:\n    result = result.append(chunk)\n\n# GOOD: pd.concat\nresult = pd.concat(chunks, ignore_index=True)\n\n# BAD: Multiple operations creating copies\ndf = df.dropna()\ndf = df.reset_index(drop=True)\ndf = df.sort_values(\"date\")\n\n# GOOD: Method chaining\ndf = (\n    df\n    .dropna()\n    .reset_index(drop=True)\n    .sort_values(\"date\")\n)\n```\n\n## Response Template\n```\n## Python Data Code Review Results\n\n**Project**: [name]\n**Pandas**: 2.1 | **NumPy**: 1.26 | **Size**: ~1M rows\n\n### Vectorization\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | process.py:45 | iterrows() loop - use vectorized ops |\n\n### Memory\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | load.py:23 | object dtype for 'status' - use category |\n\n### Data Validation\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | etl.py:67 | No null value handling |\n\n### NumPy\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | calc.py:12 | np.append in loop - pre-allocate |\n\n### Recommended Actions\n1. [ ] Replace iterrows with vectorized operations\n2. [ ] Convert low-cardinality columns to category\n3. [ ] Add data validation before processing\n4. [ ] Pre-allocate NumPy arrays in loops\n```\n\n## Performance Tips\n```python\n# Profile memory usage\ndf.info(memory_usage=\"deep\")\n\n# Profile time\n%timeit df.apply(func)  # Jupyter magic\n%timeit df[\"col\"].map(func)\n\n# Use query() for complex filters\ndf.query(\"price > 100 and category == 'A'\")\n\n# Use eval() for complex expressions\ndf.eval(\"profit = revenue - cost\")\n```\n\n## Best Practices\n1. **Vectorize**: Avoid loops, use broadcasting\n2. **Dtypes**: Use smallest sufficient type\n3. **Validate**: Check data quality early\n4. **Profile**: Measure before optimizing\n5. **Chunk**: Process large files incrementally\n\n## Integration\n- `python-reviewer`: General Python patterns\n- `perf-analyzer`: Performance profiling\n- `coverage-analyzer`: Test coverage for data code"
              },
              {
                "name": "python-reviewer",
                "description": "WHEN: General Python code review, PEP8 compliance, type hints, Pythonic patterns\nWHAT: PEP8/style check + Type hint validation + Pythonic idioms + Error handling + Documentation\nWHEN NOT: FastAPI → fastapi-reviewer, Django → django-reviewer, Data science → python-data-reviewer\n",
                "path": "skills/python-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "python-reviewer",
                  "description": "WHEN: General Python code review, PEP8 compliance, type hints, Pythonic patterns\nWHAT: PEP8/style check + Type hint validation + Pythonic idioms + Error handling + Documentation\nWHEN NOT: FastAPI → fastapi-reviewer, Django → django-reviewer, Data science → python-data-reviewer\n"
                },
                "content": "# Python Reviewer Skill\n\n## Purpose\nReviews Python code for style, idioms, type safety, and best practices.\n\n## When to Use\n- Python code review requests\n- PEP8 compliance check\n- Type hint review\n- \"Is this Pythonic?\" questions\n- General Python project review\n\n## Project Detection\n- `requirements.txt`, `pyproject.toml`, `setup.py`, `setup.cfg`\n- `.py` files in project\n- `__init__.py` module structure\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Python Version**: 3.11+\n**Package Manager**: pip/poetry/uv\n**Type Checking**: mypy/pyright\n**Linter**: ruff/flake8/pylint\n**Formatter**: black/ruff\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full Python review (recommended)\n- PEP8/Style compliance\n- Type hints and safety\n- Error handling patterns\n- Performance and idioms\nmultiSelect: true\n```\n\n## Detection Rules\n\n### PEP8 & Style\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Line > 88 chars | Break line or refactor | LOW |\n| Missing docstring | Add module/function docstring | MEDIUM |\n| Import order wrong | Use isort or ruff | LOW |\n| Inconsistent naming | snake_case for functions/vars | MEDIUM |\n\n```python\n# BAD: Inconsistent naming\ndef getUserName(userId):\n    pass\n\n# GOOD: PEP8 naming\ndef get_user_name(user_id: int) -> str:\n    pass\n```\n\n### Type Hints\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Missing return type | Add -> ReturnType | MEDIUM |\n| Any type overuse | Use specific types | MEDIUM |\n| Optional without None check | Add None handling | HIGH |\n| Missing generic types | Use list[T], dict[K,V] | LOW |\n\n```python\n# BAD: No type hints\ndef process(data):\n    return data.get(\"name\")\n\n# GOOD: Full type hints\ndef process(data: dict[str, Any]) -> str | None:\n    return data.get(\"name\")\n```\n\n### Pythonic Idioms\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Manual loop for list | Use list comprehension | LOW |\n| if x == True | Use if x | LOW |\n| Manual dict iteration | Use .items(), .keys(), .values() | LOW |\n| try/except pass | Handle or log exception | HIGH |\n| Mutable default arg | Use None default | CRITICAL |\n\n```python\n# BAD: Mutable default argument\ndef append_to(item, target=[]):\n    target.append(item)\n    return target\n\n# GOOD: None default\ndef append_to(item, target: list | None = None) -> list:\n    if target is None:\n        target = []\n    target.append(item)\n    return target\n\n# BAD: Manual loop\nresult = []\nfor x in items:\n    if x > 0:\n        result.append(x * 2)\n\n# GOOD: List comprehension\nresult = [x * 2 for x in items if x > 0]\n```\n\n### Error Handling\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Bare except | Catch specific exceptions | HIGH |\n| except Exception | Be more specific | MEDIUM |\n| No logging in except | Add logging | MEDIUM |\n| Missing finally | Add cleanup if needed | LOW |\n\n```python\n# BAD: Bare except\ntry:\n    process()\nexcept:\n    pass\n\n# GOOD: Specific exception with logging\ntry:\n    process()\nexcept ValueError as e:\n    logger.error(f\"Invalid value: {e}\")\n    raise\nexcept IOError as e:\n    logger.warning(f\"IO error: {e}\")\n    return None\n```\n\n### Modern Python (3.10+)\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Union[X, Y] | Use X \\| Y | LOW |\n| Optional[X] | Use X \\| None | LOW |\n| Dict, List from typing | Use dict, list builtin | LOW |\n| No match statement | Consider match for complex branching | LOW |\n\n```python\n# OLD: typing imports\nfrom typing import Optional, Union, List, Dict\n\ndef func(x: Optional[int]) -> Union[str, None]:\n    pass\n\n# MODERN: Built-in syntax (3.10+)\ndef func(x: int | None) -> str | None:\n    pass\n\n# Match statement (3.10+)\nmatch status:\n    case 200:\n        return \"OK\"\n    case 404:\n        return \"Not Found\"\n    case _:\n        return \"Unknown\"\n```\n\n## Response Template\n```\n## Python Code Review Results\n\n**Project**: [name]\n**Python**: 3.11 | **Tools**: ruff, mypy, pytest\n\n### Style & PEP8\n| Status | File | Issue |\n|--------|------|-------|\n| LOW | utils.py:45 | Line exceeds 88 characters |\n\n### Type Hints\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | service.py:23 | Missing return type annotation |\n\n### Pythonic Idioms\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | models.py:12 | Mutable default argument |\n\n### Error Handling\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | api.py:67 | Bare except clause |\n\n### Recommended Actions\n1. [ ] Fix mutable default arguments\n2. [ ] Add specific exception handling\n3. [ ] Add type hints to public functions\n4. [ ] Run ruff --fix for style issues\n```\n\n## Best Practices\n1. **Type Hints**: Use for all public APIs\n2. **Docstrings**: Google or NumPy style\n3. **Error Handling**: Specific exceptions, always log\n4. **Testing**: pytest with fixtures\n5. **Tooling**: ruff (lint+format), mypy (types)\n\n## Integration\n- `fastapi-reviewer`: FastAPI specific patterns\n- `django-reviewer`: Django specific patterns\n- `python-data-reviewer`: Pandas/NumPy patterns\n- `security-scanner`: Python security checks"
              },
              {
                "name": "readme-generator",
                "description": "WHEN: README generation/update, project documentation, installation/usage/contribution guides\nWHAT: Project analysis + sectioned README templates + badges + environment variable docs\nWHEN NOT: API docs → api-documenter, Code comments → api-documenter\n",
                "path": "skills/readme-generator/SKILL.md",
                "frontmatter": {
                  "name": "readme-generator",
                  "description": "WHEN: README generation/update, project documentation, installation/usage/contribution guides\nWHAT: Project analysis + sectioned README templates + badges + environment variable docs\nWHEN NOT: API docs → api-documenter, Code comments → api-documenter\n"
                },
                "content": "# README Generator Skill\n\n## Purpose\nAnalyzes project structure to generate or update README.md with installation, usage, API docs, and more.\n\n## When to Use\n- README generation requests\n- New project needs README\n- Existing README update needed\n- Installation, usage documentation requests\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Project**: my-awesome-app\n**Type**: Next.js Web Application\n**Language**: TypeScript\n**Package Manager**: npm\n**Dependencies**: React, Next.js, Tailwind CSS\n**Scripts**: dev, build, start, test, lint\n```\n\n### Step 2: Check Existing README\n```\nREADME Status:\n- Exists: [Yes/No]\n- Current sections: [list]\n- Last modified: [date]\n```\n\n### Step 3: Select Sections\n**AskUserQuestion:**\n```\n\"Select README sections\"\nOptions:\n- Project intro/overview\n- Installation\n- Usage/Getting started\n- Environment variables\n- API documentation\n- Contributing guide\n- License\nmultiSelect: true\n```\n\n### Step 4: Select Style\n**AskUserQuestion:**\n```\n\"Select README style\"\nOptions:\n- Concise (essentials only)\n- Detailed (screenshots/GIFs)\n- Technical (API-focused)\n- Open source (badges, contributing)\n```\n\n## README Templates\n\n### Basic Structure\n```markdown\n# Project Name\n\n![License](https://img.shields.io/badge/license-MIT-blue.svg)\n\nBrief description (1-2 sentences)\n\n## Features\n- Feature 1\n- Feature 2\n\n## Installation\n\\`\\`\\`bash\ngit clone https://github.com/username/project.git\ncd project\nnpm install\n\\`\\`\\`\n\n## Usage\n\\`\\`\\`bash\nnpm run dev      # Development\nnpm run build    # Production build\n\\`\\`\\`\n\n## Environment Variables\nCreate `.env.local`:\n\\`\\`\\`env\nDATABASE_URL=your_database_url\nNEXT_PUBLIC_API_URL=your_api_url\n\\`\\`\\`\n\n| Variable | Required | Description |\n|----------|----------|-------------|\n| `DATABASE_URL` | Yes | Database connection string |\n\n## Tech Stack\n- **Framework**: Next.js 14\n- **Language**: TypeScript\n\n## Project Structure\n\\`\\`\\`\n├── app/              # Next.js App Router\n├── components/       # React components\n├── lib/             # Utilities\n└── public/          # Static assets\n\\`\\`\\`\n\n## Contributing\n1. Fork the repository\n2. Create feature branch\n3. Commit changes\n4. Push to branch\n5. Open Pull Request\n\n## License\nMIT License\n```\n\n### Open Source Template\n```markdown\n# Project Name\n\n[![npm](https://badge.fury.io/js/package.svg)](https://www.npmjs.com/package/package)\n[![CI](https://github.com/user/repo/workflows/CI/badge.svg)](https://github.com/user/repo/actions)\n[![Coverage](https://codecov.io/gh/user/repo/branch/main/graph/badge.svg)](https://codecov.io/gh/user/repo)\n\n> Compelling project description\n\n## Installation\n\\`\\`\\`bash\nnpm install package-name\n\\`\\`\\`\n\n## Usage\n\\`\\`\\`typescript\nimport { feature } from 'package-name'\nconst result = feature({ option: 'value' })\n\\`\\`\\`\n\n## API Reference\n### `feature(options)`\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `option` | `string` | `'default'` | Description |\n\n## Contributing\nSee [CONTRIBUTING.md](CONTRIBUTING.md)\n\n## License\nMIT - see [LICENSE](LICENSE)\n```\n\n## Response Template\n```\n## README Generated\n\n**File**: README.md\n**Style**: Detailed\n\n### Included Sections\n- [x] Project intro\n- [x] Installation\n- [x] Usage\n- [x] Environment variables\n- [x] Tech stack\n- [x] Contributing\n- [x] License\n\n### Recommendations\n- [ ] Add screenshots/demo GIF\n- [ ] Detail API documentation\n- [ ] Create CONTRIBUTING.md\n```\n\n## Best Practices\n1. **Concise**: Quick access to key info\n2. **Structured**: Clear section separation\n3. **Examples**: Copy-paste ready code\n4. **Current**: Keep versions updated\n5. **Visual**: Badges, screenshots for readability\n\n## Integration\n- `api-documenter` skill: API section details\n- `/explain-code` command: Project structure understanding\n\n## Notes\n- Preserves existing README style when updating\n- Excludes sensitive info (.env values)\n- Project structure based on actual analysis"
              },
              {
                "name": "rust-api-reviewer",
                "description": "WHEN: Rust API review with Actix-web/Axum/Rocket, async patterns, extractors, middleware\nWHAT: Async handlers + Extractors + State management + Error responses + Tower middleware\nWHEN NOT: General Rust → rust-reviewer, Go API → go-api-reviewer\n",
                "path": "skills/rust-api-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "rust-api-reviewer",
                  "description": "WHEN: Rust API review with Actix-web/Axum/Rocket, async patterns, extractors, middleware\nWHAT: Async handlers + Extractors + State management + Error responses + Tower middleware\nWHEN NOT: General Rust → rust-reviewer, Go API → go-api-reviewer\n"
                },
                "content": "# Rust API Reviewer Skill\n\n## Purpose\nReviews Rust web API projects using Actix-web, Axum, or Rocket for async patterns and API design.\n\n## When to Use\n- Rust REST API code review\n- Actix-web/Axum/Rocket project review\n- Async handler patterns\n- Middleware and extractors\n- State management review\n\n## Project Detection\n- `actix-web` in Cargo.toml\n- `axum` in Cargo.toml\n- `rocket` in Cargo.toml\n- `handlers/`, `routes/` directories\n- `tower` middleware usage\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Framework**: Axum 0.7+\n**Runtime**: Tokio\n**Database**: SQLx / SeaORM / Diesel\n**Validation**: validator crate\n**Auth**: JWT / OAuth2\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full API review (recommended)\n- Async handlers and patterns\n- Extractors and validation\n- State and dependency injection\n- Error handling and responses\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Axum Patterns\n\n#### Handler Organization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| All routes in main | Use Router::nest | MEDIUM |\n| No route grouping | Group by resource | MEDIUM |\n| Missing method routing | Use method_router | LOW |\n\n```rust\n// BAD: All routes in main\n#[tokio::main]\nasync fn main() {\n    let app = Router::new()\n        .route(\"/users\", get(list_users).post(create_user))\n        .route(\"/users/:id\", get(get_user).put(update_user))\n        .route(\"/products\", get(list_products))\n        // ... 50 more routes\n        .with_state(state);\n}\n\n// GOOD: Organized with nest\nfn user_routes() -> Router<AppState> {\n    Router::new()\n        .route(\"/\", get(list_users).post(create_user))\n        .route(\"/:id\", get(get_user).put(update_user).delete(delete_user))\n}\n\nfn product_routes() -> Router<AppState> {\n    Router::new()\n        .route(\"/\", get(list_products).post(create_product))\n        .route(\"/:id\", get(get_product))\n}\n\nfn api_routes() -> Router<AppState> {\n    Router::new()\n        .nest(\"/users\", user_routes())\n        .nest(\"/products\", product_routes())\n}\n\n#[tokio::main]\nasync fn main() {\n    let state = AppState::new().await;\n\n    let app = Router::new()\n        .nest(\"/api/v1\", api_routes())\n        .layer(TraceLayer::new_for_http())\n        .with_state(state);\n\n    // ...\n}\n```\n\n#### Extractors\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Manual JSON parsing | Use Json extractor | HIGH |\n| No validation | Use ValidatedJson | HIGH |\n| Order of extractors | Body extractors last | HIGH |\n\n```rust\n// BAD: Manual parsing\nasync fn create_user(body: String) -> Result<Json<User>, AppError> {\n    let req: CreateUserRequest = serde_json::from_str(&body)?;\n    // ...\n}\n\n// GOOD: Json extractor\nasync fn create_user(\n    Json(req): Json<CreateUserRequest>,\n) -> Result<Json<User>, AppError> {\n    // req is already deserialized\n}\n\n// GOOD: With validation (using validator crate)\n#[derive(Debug, Deserialize, Validate)]\nstruct CreateUserRequest {\n    #[validate(length(min = 1, max = 100))]\n    name: String,\n    #[validate(email)]\n    email: String,\n}\n\nasync fn create_user(\n    State(state): State<AppState>,\n    ValidatedJson(req): ValidatedJson<CreateUserRequest>,\n) -> Result<Json<User>, AppError> {\n    // req is validated\n}\n\n// IMPORTANT: Extractor order matters!\n// Body-consuming extractors must be last\nasync fn handler(\n    State(state): State<AppState>,    // First: doesn't consume\n    Path(id): Path<i32>,              // Second: from URL\n    Query(params): Query<Params>,     // Third: from query\n    Json(body): Json<Request>,        // LAST: consumes body\n) -> Response {\n    // ...\n}\n```\n\n#### State Management\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Global static state | Use State extractor | HIGH |\n| No connection pool | Use shared pool | HIGH |\n| Mutex in async | Use tokio::sync::Mutex | CRITICAL |\n\n```rust\n// BAD: Global static\nstatic DB: OnceCell<Database> = OnceCell::new();\n\nasync fn get_user(Path(id): Path<i32>) -> Json<User> {\n    let db = DB.get().unwrap();  // Bad pattern\n    // ...\n}\n\n// GOOD: State extractor\n#[derive(Clone)]\nstruct AppState {\n    db: PgPool,\n    cache: Arc<Cache>,\n    config: Arc<Config>,\n}\n\nasync fn get_user(\n    State(state): State<AppState>,\n    Path(id): Path<i32>,\n) -> Result<Json<User>, AppError> {\n    let user = sqlx::query_as!(User, \"SELECT * FROM users WHERE id = $1\", id)\n        .fetch_one(&state.db)\n        .await?;\n    Ok(Json(user))\n}\n\n// BAD: std::sync::Mutex in async\nstruct AppState {\n    cache: std::sync::Mutex<HashMap<String, Value>>,  // Blocks!\n}\n\n// GOOD: tokio Mutex or RwLock\nstruct AppState {\n    cache: tokio::sync::RwLock<HashMap<String, Value>>,\n}\n\nasync fn get_cached(\n    State(state): State<AppState>,\n    Path(key): Path<String>,\n) -> Result<Json<Value>, AppError> {\n    let cache = state.cache.read().await;\n    cache.get(&key).cloned().ok_or(AppError::NotFound)\n}\n```\n\n### Error Handling\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Panic in handler | Return Result | CRITICAL |\n| No IntoResponse impl | Implement for errors | HIGH |\n| Leaking internal errors | Map to HTTP errors | HIGH |\n\n```rust\n// GOOD: Custom error type with IntoResponse\n#[derive(Debug)]\nenum AppError {\n    NotFound,\n    Unauthorized,\n    Validation(String),\n    Internal(anyhow::Error),\n}\n\nimpl IntoResponse for AppError {\n    fn into_response(self) -> Response {\n        let (status, message) = match self {\n            AppError::NotFound => (StatusCode::NOT_FOUND, \"Not found\"),\n            AppError::Unauthorized => (StatusCode::UNAUTHORIZED, \"Unauthorized\"),\n            AppError::Validation(msg) => {\n                return (StatusCode::BAD_REQUEST, Json(json!({\n                    \"error\": \"validation_error\",\n                    \"message\": msg,\n                }))).into_response();\n            }\n            AppError::Internal(err) => {\n                tracing::error!(\"Internal error: {:?}\", err);\n                (StatusCode::INTERNAL_SERVER_ERROR, \"Internal server error\")\n            }\n        };\n\n        (status, Json(json!({ \"error\": message }))).into_response()\n    }\n}\n\n// Implement From for automatic conversion\nimpl From<sqlx::Error> for AppError {\n    fn from(err: sqlx::Error) -> Self {\n        match err {\n            sqlx::Error::RowNotFound => AppError::NotFound,\n            _ => AppError::Internal(err.into()),\n        }\n    }\n}\n```\n\n### Middleware (Tower)\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No tracing | Add TraceLayer | MEDIUM |\n| No timeout | Add TimeoutLayer | MEDIUM |\n| Auth in handler | Use middleware | MEDIUM |\n\n```rust\nuse tower::ServiceBuilder;\nuse tower_http::{\n    trace::TraceLayer,\n    timeout::TimeoutLayer,\n    cors::CorsLayer,\n};\n\nfn app(state: AppState) -> Router {\n    Router::new()\n        .nest(\"/api\", api_routes())\n        .layer(\n            ServiceBuilder::new()\n                .layer(TraceLayer::new_for_http())\n                .layer(TimeoutLayer::new(Duration::from_secs(30)))\n                .layer(CorsLayer::permissive())\n        )\n        .with_state(state)\n}\n\n// GOOD: Auth middleware\nasync fn auth_middleware(\n    State(state): State<AppState>,\n    mut req: Request,\n    next: Next,\n) -> Result<Response, AppError> {\n    let token = req\n        .headers()\n        .get(AUTHORIZATION)\n        .and_then(|v| v.to_str().ok())\n        .and_then(|v| v.strip_prefix(\"Bearer \"))\n        .ok_or(AppError::Unauthorized)?;\n\n    let claims = validate_token(token, &state.jwt_secret)?;\n\n    req.extensions_mut().insert(claims);\n    Ok(next.run(req).await)\n}\n\n// Apply to routes\nlet protected = Router::new()\n    .route(\"/me\", get(get_me))\n    .route_layer(middleware::from_fn_with_state(state.clone(), auth_middleware));\n```\n\n### Actix-web Patterns\n```rust\n// Actix-web equivalent\nuse actix_web::{web, App, HttpServer, HttpResponse};\n\n#[actix_web::main]\nasync fn main() -> std::io::Result<()> {\n    let pool = create_pool().await;\n\n    HttpServer::new(move || {\n        App::new()\n            .app_data(web::Data::new(pool.clone()))\n            .service(\n                web::scope(\"/api/v1\")\n                    .service(\n                        web::scope(\"/users\")\n                            .route(\"\", web::get().to(list_users))\n                            .route(\"\", web::post().to(create_user))\n                            .route(\"/{id}\", web::get().to(get_user))\n                    )\n            )\n            .wrap(actix_web::middleware::Logger::default())\n    })\n    .bind(\"127.0.0.1:8080\")?\n    .run()\n    .await\n}\n\n// Actix handler\nasync fn create_user(\n    pool: web::Data<PgPool>,\n    req: web::Json<CreateUserRequest>,\n) -> Result<HttpResponse, actix_web::Error> {\n    let user = User::create(&pool, req.into_inner()).await?;\n    Ok(HttpResponse::Created().json(user))\n}\n```\n\n## Response Template\n```\n## Rust API Code Review Results\n\n**Project**: [name]\n**Framework**: Axum 0.7 | **Runtime**: Tokio\n\n### Handler Organization\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | main.rs | 30+ routes without nesting |\n\n### Extractors\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | handlers/user.rs:23 | Manual JSON parsing |\n\n### State Management\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | state.rs | std::sync::Mutex in async context |\n\n### Error Handling\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | handlers/product.rs | No IntoResponse for errors |\n\n### Recommended Actions\n1. [ ] Organize routes with Router::nest\n2. [ ] Use Json extractor with validation\n3. [ ] Replace std Mutex with tokio Mutex\n4. [ ] Implement IntoResponse for AppError\n```\n\n## Best Practices\n1. **Extractors**: Use typed extractors, body last\n2. **State**: Clone-friendly, async-safe\n3. **Errors**: Custom type with IntoResponse\n4. **Middleware**: Tower layers for cross-cutting\n5. **Tracing**: Use tracing crate for observability\n\n## Integration\n- `rust-reviewer`: General Rust patterns\n- `security-scanner`: API security audit\n- `perf-analyzer`: Async performance"
              },
              {
                "name": "rust-reviewer",
                "description": "WHEN: Rust project review, ownership/borrowing, error handling, unsafe code, performance\nWHAT: Ownership patterns + Lifetime analysis + Error handling (Result/Option) + Unsafe audit + Idiomatic Rust\nWHEN NOT: Rust API → rust-api-reviewer, Go → go-reviewer\n",
                "path": "skills/rust-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "rust-reviewer",
                  "description": "WHEN: Rust project review, ownership/borrowing, error handling, unsafe code, performance\nWHAT: Ownership patterns + Lifetime analysis + Error handling (Result/Option) + Unsafe audit + Idiomatic Rust\nWHEN NOT: Rust API → rust-api-reviewer, Go → go-reviewer\n"
                },
                "content": "# Rust Reviewer Skill\n\n## Purpose\nReviews Rust code for ownership, lifetimes, error handling, safety, and idiomatic patterns.\n\n## When to Use\n- Rust project code review\n- Ownership/borrowing review\n- Lifetime annotation review\n- Unsafe code audit\n- Error handling patterns\n\n## Project Detection\n- `Cargo.toml` in project root\n- `.rs` files\n- `src/lib.rs` or `src/main.rs`\n- `tests/` directory\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Rust Edition**: 2021\n**Type**: Library / Binary\n**Dependencies**: Key crates\n**Testing**: cargo test\n**Linter**: clippy\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full Rust review (recommended)\n- Ownership and borrowing\n- Lifetimes and references\n- Error handling (Result/Option)\n- Unsafe code audit\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Ownership & Borrowing\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Unnecessary clone() | Borrow instead | MEDIUM |\n| &String parameter | Use &str | MEDIUM |\n| Vec ownership transfer | Consider slice | MEDIUM |\n| Excessive Rc/Arc | Restructure ownership | MEDIUM |\n\n```rust\n// BAD: Unnecessary clone\nfn process(data: Vec<String>) {\n    for item in data.clone().iter() {  // Clone not needed!\n        println!(\"{}\", item);\n    }\n}\n\n// GOOD: Borrow\nfn process(data: &[String]) {\n    for item in data {\n        println!(\"{}\", item);\n    }\n}\n\n// BAD: &String parameter\nfn greet(name: &String) {\n    println!(\"Hello, {}\", name);\n}\n\n// GOOD: &str parameter (more flexible)\nfn greet(name: &str) {\n    println!(\"Hello, {}\", name);\n}\n\n// BAD: Taking ownership unnecessarily\nfn sum(numbers: Vec<i32>) -> i32 {\n    numbers.iter().sum()\n}\n\n// GOOD: Borrow slice\nfn sum(numbers: &[i32]) -> i32 {\n    numbers.iter().sum()\n}\n```\n\n### Lifetimes\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Missing lifetime annotation | Add explicit lifetime | HIGH |\n| 'static overuse | Use specific lifetime | MEDIUM |\n| Lifetime in struct | Consider ownership | MEDIUM |\n| Complex lifetime bounds | Simplify if possible | LOW |\n\n```rust\n// BAD: Missing lifetime\nstruct Parser {\n    input: &str,  // Error: missing lifetime\n}\n\n// GOOD: Explicit lifetime\nstruct Parser<'a> {\n    input: &'a str,\n}\n\nimpl<'a> Parser<'a> {\n    fn new(input: &'a str) -> Self {\n        Parser { input }\n    }\n\n    fn parse(&self) -> Result<Ast<'a>, Error> {\n        // ...\n    }\n}\n\n// BAD: 'static when not needed\nfn process(data: &'static str) {\n    // Requires static lifetime!\n}\n\n// GOOD: Generic lifetime\nfn process(data: &str) {\n    // Works with any lifetime\n}\n\n// Consider: Ownership instead of lifetime\nstruct Config {\n    name: String,  // Owned, no lifetime needed\n}\n```\n\n### Error Handling\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| unwrap() in library | Return Result | HIGH |\n| expect() without message | Add descriptive message | MEDIUM |\n| panic! for recoverable | Return Err | HIGH |\n| No custom error type | Define error enum | MEDIUM |\n\n```rust\n// BAD: unwrap in library code\npub fn parse_config(path: &str) -> Config {\n    let content = fs::read_to_string(path).unwrap();  // Will panic!\n    serde_json::from_str(&content).unwrap()\n}\n\n// GOOD: Return Result\npub fn parse_config(path: &str) -> Result<Config, ConfigError> {\n    let content = fs::read_to_string(path)\n        .map_err(|e| ConfigError::IoError(e))?;\n    serde_json::from_str(&content)\n        .map_err(|e| ConfigError::ParseError(e))\n}\n\n// GOOD: Custom error type\n#[derive(Debug, thiserror::Error)]\npub enum ConfigError {\n    #[error(\"failed to read config file: {0}\")]\n    IoError(#[from] std::io::Error),\n\n    #[error(\"failed to parse config: {0}\")]\n    ParseError(#[from] serde_json::Error),\n\n    #[error(\"missing required field: {0}\")]\n    MissingField(String),\n}\n\n// BAD: expect without message\nlet value = map.get(\"key\").expect(\"failed\");\n\n// GOOD: Descriptive expect\nlet value = map.get(\"key\")\n    .expect(\"config must contain 'key' field\");\n```\n\n### Option Handling\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| if let Some + else | Use map_or/unwrap_or | LOW |\n| Nested Options | Use and_then/flatten | MEDIUM |\n| match for single case | Use if let | LOW |\n\n```rust\n// BAD: Verbose Option handling\nlet result = match value {\n    Some(v) => v.to_string(),\n    None => \"default\".to_string(),\n};\n\n// GOOD: Using combinators\nlet result = value\n    .map(|v| v.to_string())\n    .unwrap_or_else(|| \"default\".to_string());\n\n// Or even simpler\nlet result = value.map_or(\"default\".to_string(), |v| v.to_string());\n\n// BAD: Nested Options\nlet result: Option<Option<i32>> = Some(Some(42));\nlet value = match result {\n    Some(Some(v)) => v,\n    _ => 0,\n};\n\n// GOOD: Flatten\nlet value = result.flatten().unwrap_or(0);\n\n// Using and_then for chaining\nlet value = get_user(id)\n    .and_then(|user| user.profile)\n    .and_then(|profile| profile.avatar)\n    .map(|avatar| avatar.url);\n```\n\n### Unsafe Code\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Unnecessary unsafe | Remove if safe alternative | HIGH |\n| No safety comment | Document invariants | HIGH |\n| Raw pointer dereference | Validate pointer | CRITICAL |\n| Transmute usage | Use safe cast if possible | CRITICAL |\n\n```rust\n// BAD: Unsafe without documentation\nunsafe fn get_value(ptr: *const i32) -> i32 {\n    *ptr\n}\n\n// GOOD: Documented unsafe\n/// Gets the value at the given pointer.\n///\n/// # Safety\n///\n/// - `ptr` must be valid and properly aligned\n/// - `ptr` must point to initialized memory\n/// - The memory must not be mutated while this reference exists\nunsafe fn get_value(ptr: *const i32) -> i32 {\n    debug_assert!(!ptr.is_null(), \"ptr must not be null\");\n    *ptr\n}\n\n// BAD: Transmute for casting\nlet bytes: [u8; 4] = unsafe { std::mem::transmute(value) };\n\n// GOOD: Safe alternative\nlet bytes = value.to_ne_bytes();\n\n// Encapsulating unsafe in safe API\npub struct Buffer {\n    ptr: *mut u8,\n    len: usize,\n}\n\nimpl Buffer {\n    /// Creates a new buffer. Safe because we control allocation.\n    pub fn new(size: usize) -> Self {\n        let ptr = unsafe { alloc(Layout::array::<u8>(size).unwrap()) };\n        Self { ptr, len: size }\n    }\n\n    /// Safe accessor - bounds checked\n    pub fn get(&self, index: usize) -> Option<u8> {\n        if index < self.len {\n            // SAFETY: index is bounds-checked above\n            Some(unsafe { *self.ptr.add(index) })\n        } else {\n            None\n        }\n    }\n}\n```\n\n### Idiomatic Rust\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| C-style loop | Use iterators | LOW |\n| Manual index tracking | Use enumerate() | LOW |\n| Return in match | Return match expression | LOW |\n| Redundant type annotation | Use inference | LOW |\n\n```rust\n// BAD: C-style loop\nlet mut i = 0;\nwhile i < items.len() {\n    process(&items[i]);\n    i += 1;\n}\n\n// GOOD: Iterator\nfor item in &items {\n    process(item);\n}\n\n// With index\nfor (i, item) in items.iter().enumerate() {\n    println!(\"{}: {}\", i, item);\n}\n\n// BAD: Redundant type\nlet numbers: Vec<i32> = vec![1, 2, 3];\nlet sum: i32 = numbers.iter().sum();\n\n// GOOD: Type inference\nlet numbers = vec![1, 2, 3];\nlet sum: i32 = numbers.iter().sum();  // Only needed here\n\n// BAD: Return in match arms\nfn classify(n: i32) -> &'static str {\n    match n {\n        0 => { return \"zero\"; }\n        _ if n > 0 => { return \"positive\"; }\n        _ => { return \"negative\"; }\n    }\n}\n\n// GOOD: Match as expression\nfn classify(n: i32) -> &'static str {\n    match n {\n        0 => \"zero\",\n        _ if n > 0 => \"positive\",\n        _ => \"negative\",\n    }\n}\n```\n\n## Response Template\n```\n## Rust Code Review Results\n\n**Project**: [name]\n**Rust Edition**: 2021 | **Clippy**: Enabled\n\n### Ownership & Borrowing\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | parser.rs:45 | Unnecessary clone() |\n\n### Lifetimes\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | cache.rs:23 | Missing lifetime on struct field |\n\n### Error Handling\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | lib.rs:67 | unwrap() in public function |\n\n### Unsafe\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | ffi.rs:12 | Unsafe block without safety comment |\n\n### Recommended Actions\n1. [ ] Replace clone() with borrowing\n2. [ ] Add lifetime annotations to Cache struct\n3. [ ] Return Result instead of panicking\n4. [ ] Document all unsafe blocks with safety invariants\n```\n\n## Best Practices\n1. **Ownership**: Borrow when possible, clone when needed\n2. **Lifetimes**: Explicit > implicit, owned > referenced\n3. **Errors**: thiserror for libs, anyhow for apps\n4. **Unsafe**: Minimize, document, encapsulate in safe API\n5. **Clippy**: Run with `cargo clippy -- -W clippy::pedantic`\n\n## Integration\n- `rust-api-reviewer`: Web framework patterns\n- `security-scanner`: Rust security audit\n- `perf-analyzer`: Performance profiling"
              },
              {
                "name": "schema-reviewer",
                "description": "WHEN: Database schema review, table design, normalization, constraints, index planning\nWHAT: Normalization analysis + Constraint validation + Index strategy + Data types + Relationship design\nWHEN NOT: Query optimization → sql-optimizer, ORM code → orm-reviewer\n",
                "path": "skills/schema-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "schema-reviewer",
                  "description": "WHEN: Database schema review, table design, normalization, constraints, index planning\nWHAT: Normalization analysis + Constraint validation + Index strategy + Data types + Relationship design\nWHEN NOT: Query optimization → sql-optimizer, ORM code → orm-reviewer\n"
                },
                "content": "# Schema Reviewer Skill\n\n## Purpose\nReviews database schema design for normalization, constraints, indexes, and best practices.\n\n## When to Use\n- Database schema review\n- Table design review\n- Normalization check\n- Index planning\n- Constraint validation\n\n## Project Detection\n- Schema files (`.sql`, `schema.prisma`)\n- Migration files\n- Entity definitions\n- Database documentation\n\n## Workflow\n\n### Step 1: Analyze Schema\n```\n**Database**: PostgreSQL/MySQL\n**Tables**: 15\n**Relationships**: 1:N, N:M\n**Normalization**: 3NF\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full schema review (recommended)\n- Normalization and design\n- Constraints and integrity\n- Index strategy\n- Data type optimization\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Normalization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Repeating groups | Move to separate table | HIGH |\n| Partial dependency | Apply 2NF | MEDIUM |\n| Transitive dependency | Apply 3NF | MEDIUM |\n| Over-normalization | Consider denormalization for reads | LOW |\n\n```sql\n-- BAD: 1NF violation (repeating groups)\nCREATE TABLE orders (\n    id INT PRIMARY KEY,\n    product1_id INT,\n    product1_qty INT,\n    product2_id INT,\n    product2_qty INT,\n    product3_id INT,\n    product3_qty INT\n);\n\n-- GOOD: Normalized with separate table\nCREATE TABLE orders (\n    id SERIAL PRIMARY KEY,\n    user_id INT NOT NULL REFERENCES users(id),\n    created_at TIMESTAMPTZ DEFAULT NOW()\n);\n\nCREATE TABLE order_items (\n    id SERIAL PRIMARY KEY,\n    order_id INT NOT NULL REFERENCES orders(id),\n    product_id INT NOT NULL REFERENCES products(id),\n    quantity INT NOT NULL CHECK (quantity > 0),\n    price DECIMAL(10,2) NOT NULL\n);\n\n-- BAD: 2NF violation (partial dependency)\nCREATE TABLE order_items (\n    order_id INT,\n    product_id INT,\n    product_name VARCHAR(100),  -- Depends only on product_id!\n    quantity INT,\n    PRIMARY KEY (order_id, product_id)\n);\n\n-- GOOD: Product name in products table only\nCREATE TABLE order_items (\n    order_id INT REFERENCES orders(id),\n    product_id INT REFERENCES products(id),\n    quantity INT NOT NULL,\n    PRIMARY KEY (order_id, product_id)\n);\n```\n\n### Constraints\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Missing PRIMARY KEY | Add primary key | CRITICAL |\n| Missing FOREIGN KEY | Add for relationships | HIGH |\n| No NOT NULL | Add where appropriate | MEDIUM |\n| No CHECK constraints | Validate data at DB level | MEDIUM |\n| Missing UNIQUE | Add for natural keys | HIGH |\n\n```sql\n-- BAD: No constraints\nCREATE TABLE users (\n    id INT,\n    email VARCHAR(255),\n    status VARCHAR(20)\n);\n\n-- GOOD: Proper constraints\nCREATE TABLE users (\n    id SERIAL PRIMARY KEY,\n    email VARCHAR(255) NOT NULL UNIQUE,\n    status VARCHAR(20) NOT NULL DEFAULT 'active'\n        CHECK (status IN ('active', 'inactive', 'banned')),\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n);\n\n-- With proper foreign keys\nCREATE TABLE orders (\n    id SERIAL PRIMARY KEY,\n    user_id INT NOT NULL REFERENCES users(id)\n        ON DELETE RESTRICT  -- Prevent user deletion with orders\n        ON UPDATE CASCADE,\n    status VARCHAR(20) NOT NULL DEFAULT 'pending'\n        CHECK (status IN ('pending', 'processing', 'shipped', 'delivered', 'cancelled')),\n    total DECIMAL(12,2) NOT NULL CHECK (total >= 0)\n);\n```\n\n### Data Types\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| VARCHAR for all strings | Use appropriate types | MEDIUM |\n| INT for monetary values | Use DECIMAL | HIGH |\n| FLOAT for money | Use DECIMAL | CRITICAL |\n| TEXT without limit | Consider VARCHAR with limit | LOW |\n| Missing timezone | Use TIMESTAMPTZ | HIGH |\n\n```sql\n-- BAD: Poor data type choices\nCREATE TABLE products (\n    id INT,\n    price FLOAT,              -- Precision issues!\n    quantity VARCHAR(10),     -- Should be INT\n    created_at TIMESTAMP,     -- No timezone!\n    description TEXT          -- Unlimited\n);\n\n-- GOOD: Appropriate data types\nCREATE TABLE products (\n    id SERIAL PRIMARY KEY,\n    sku VARCHAR(50) NOT NULL UNIQUE,\n    name VARCHAR(200) NOT NULL,\n    price DECIMAL(10,2) NOT NULL CHECK (price >= 0),\n    quantity INT NOT NULL DEFAULT 0 CHECK (quantity >= 0),\n    description TEXT,  -- OK for long text\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n);\n\n-- Use ENUMs for fixed values (PostgreSQL)\nCREATE TYPE order_status AS ENUM (\n    'pending', 'processing', 'shipped', 'delivered', 'cancelled'\n);\n\nCREATE TABLE orders (\n    status order_status NOT NULL DEFAULT 'pending'\n);\n```\n\n### Index Strategy\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No index on FK | Add index | HIGH |\n| No index on filter columns | Add index | HIGH |\n| Too many single-column indexes | Use composite | MEDIUM |\n| Missing unique index | Add for unique constraints | HIGH |\n\n```sql\n-- Index planning\nCREATE TABLE orders (\n    id SERIAL PRIMARY KEY,\n    user_id INT NOT NULL REFERENCES users(id),\n    status VARCHAR(20) NOT NULL,\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n);\n\n-- Foreign key index (not automatic in PostgreSQL!)\nCREATE INDEX idx_orders_user_id ON orders(user_id);\n\n-- Composite index for common queries\n-- WHERE status = ? ORDER BY created_at DESC\nCREATE INDEX idx_orders_status_created ON orders(status, created_at DESC);\n\n-- Partial index for specific cases\nCREATE INDEX idx_orders_pending ON orders(created_at)\nWHERE status = 'pending';\n\n-- Cover index (includes all needed columns)\nCREATE INDEX idx_orders_user_summary ON orders(user_id, status, total);\n```\n\n### Relationship Design\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| N:M without junction table | Create junction table | CRITICAL |\n| Self-reference without depth | Add level/path column | MEDIUM |\n| Circular references | Redesign relationships | HIGH |\n\n```sql\n-- N:M relationship with junction table\nCREATE TABLE products (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(200) NOT NULL\n);\n\nCREATE TABLE categories (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(100) NOT NULL\n);\n\nCREATE TABLE product_categories (\n    product_id INT NOT NULL REFERENCES products(id) ON DELETE CASCADE,\n    category_id INT NOT NULL REFERENCES categories(id) ON DELETE CASCADE,\n    PRIMARY KEY (product_id, category_id)\n);\n\n-- Hierarchical data (adjacency list)\nCREATE TABLE categories (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(100) NOT NULL,\n    parent_id INT REFERENCES categories(id),\n    level INT NOT NULL DEFAULT 0,\n    path LTREE  -- PostgreSQL ltree extension\n);\n\n-- Create index for hierarchical queries\nCREATE INDEX idx_categories_path ON categories USING GIST (path);\n```\n\n### Audit Columns\n```sql\n-- Standard audit columns\nCREATE TABLE entities (\n    id SERIAL PRIMARY KEY,\n    -- ... business columns ...\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    created_by INT REFERENCES users(id),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_by INT REFERENCES users(id),\n    deleted_at TIMESTAMPTZ,  -- Soft delete\n    deleted_by INT REFERENCES users(id)\n);\n\n-- Auto-update trigger\nCREATE OR REPLACE FUNCTION update_updated_at()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER trigger_update_updated_at\n    BEFORE UPDATE ON entities\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at();\n```\n\n## Response Template\n```\n## Database Schema Review Results\n\n**Database**: PostgreSQL 15\n**Tables**: 12 | **Relationships**: 8\n\n### Normalization\n| Status | Table | Issue |\n|--------|-------|-------|\n| HIGH | orders | Repeating product columns |\n\n### Constraints\n| Status | Table | Issue |\n|--------|-------|-------|\n| CRITICAL | users | Missing PRIMARY KEY |\n| HIGH | orders | Missing FOREIGN KEY to users |\n\n### Data Types\n| Status | Table.Column | Issue |\n|--------|--------------|-------|\n| CRITICAL | products.price | Using FLOAT instead of DECIMAL |\n\n### Indexes\n| Status | Table | Issue |\n|--------|-------|-------|\n| HIGH | orders.user_id | Missing index on foreign key |\n\n### Recommended Changes\n```sql\n-- Add missing primary key\nALTER TABLE users ADD PRIMARY KEY (id);\n\n-- Fix price data type\nALTER TABLE products\nALTER COLUMN price TYPE DECIMAL(10,2);\n\n-- Add foreign key index\nCREATE INDEX idx_orders_user_id ON orders(user_id);\n```\n```\n\n## Best Practices\n1. **Normalization**: 3NF default, denormalize for performance\n2. **Constraints**: PK, FK, NOT NULL, CHECK, UNIQUE\n3. **Data Types**: DECIMAL for money, TIMESTAMPTZ for time\n4. **Indexes**: FK columns, filter columns, composites\n5. **Audit**: created_at, updated_at, soft delete\n\n## Integration\n- `sql-optimizer`: Query performance\n- `migration-checker`: Migration safety\n- `orm-reviewer`: ORM mapping"
              },
              {
                "name": "security-scanner",
                "description": "WHEN: Security scan, vulnerability detection, XSS/CSRF analysis, secret exposure, OWASP Top 10\nWHAT: XSS/injection detection + hardcoded secrets + auth/authz issues + severity-based vulnerability list\nWHEN NOT: Performance → perf-analyzer, Cloud security → cloud-security-expert\n",
                "path": "skills/security-scanner/SKILL.md",
                "frontmatter": {
                  "name": "security-scanner",
                  "description": "WHEN: Security scan, vulnerability detection, XSS/CSRF analysis, secret exposure, OWASP Top 10\nWHAT: XSS/injection detection + hardcoded secrets + auth/authz issues + severity-based vulnerability list\nWHEN NOT: Performance → perf-analyzer, Cloud security → cloud-security-expert\n"
                },
                "content": "# Security Scanner Skill\n\n## Purpose\nDetects web application security vulnerabilities based on OWASP Top 10: XSS, hardcoded secrets, authentication issues.\n\n## When to Use\n- Security scan requests\n- XSS, CSRF, injection mentions\n- Pre-production security review\n- Auth/authz code review\n\n## Workflow\n\n### Step 1: Scan Scope\n**AskUserQuestion:**\n```\n\"Select scan scope\"\nOptions:\n- Frontend only\n- Include API/backend\n- Full project\n- Specific file/folder\n```\n\n### Step 2: Vulnerability Categories\n**AskUserQuestion:**\n```\n\"Select vulnerability types\"\nOptions:\n- Full security scan (recommended)\n- XSS (Cross-Site Scripting)\n- Secrets/API key exposure\n- Auth/authz issues\n- Dependency vulnerabilities\nmultiSelect: true\n```\n\n## Security Rules\n\n### OWASP Top 10\n| Rank | Vulnerability | Check | Severity |\n|------|---------------|-------|----------|\n| A01 | Broken Access Control | Auth bypass | CRITICAL |\n| A02 | Cryptographic Failures | Plaintext, weak crypto | CRITICAL |\n| A03 | Injection | SQL, NoSQL, XSS | CRITICAL |\n| A05 | Security Misconfiguration | CORS, headers | HIGH |\n| A07 | Auth Failures | Weak passwords, sessions | CRITICAL |\n\n### XSS Detection\n```typescript\n// CRITICAL: React dangerouslySetInnerHTML\n<div dangerouslySetInnerHTML={{ __html: userInput }} />\n// Fix: Use DOMPurify.sanitize(userInput)\n\n// HIGH: innerHTML direct use\nelement.innerHTML = userInput\n// Fix: Use textContent or sanitize\n\n// CRITICAL: eval or Function constructor\neval(userCode)\nnew Function(userCode)()\n// Fix: Never use\n```\n\n### Secret Exposure\n```typescript\n// CRITICAL: Hardcoded API key\nconst API_KEY = 'sk-1234567890abcdef'\n\n// Patterns detected:\n// - API keys: /[a-zA-Z0-9_-]{20,}/\n// - AWS keys: /AKIA[0-9A-Z]{16}/\n// - JWT: /eyJ[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+/\n\n// Fix: Use environment variables\nheaders: { 'X-API-Key': process.env.NEXT_PUBLIC_API_KEY }\n```\n\n### Auth/Authz Issues\n```typescript\n// HIGH: Token in localStorage\nlocalStorage.setItem('authToken', token)\n// Fix: Use httpOnly cookies\n\n// HIGH: Missing authorization check\nasync function deleteUser(userId) {\n  await db.users.delete(userId) // No auth check\n}\n// Fix: Add authorization\nif (!currentUser.isAdmin) throw new ForbiddenError()\n```\n\n### Unsafe Data Handling\n```typescript\n// HIGH: SQL Injection\nconst query = `SELECT * FROM users WHERE id = ${userId}`\n// Fix: Parameterized query\nconst query = 'SELECT * FROM users WHERE id = $1'\n\n// HIGH: Path traversal\nconst filePath = path.join(baseDir, userInput)\n// Fix: Validate path\nif (!safePath.startsWith(baseDir)) throw new Error()\n```\n\n### Next.js/React Security\n```typescript\n// HIGH: Server Action without validation\n'use server'\nasync function updateProfile(formData) {\n  const name = formData.get('name')\n  await db.users.update({ name }) // No validation\n}\n// Fix: Use zod validation\nconst schema = z.object({ name: z.string().min(1).max(100) })\n```\n\n## Response Template\n```\n## Security Scan Results\n\n**Project**: [name]\n**Files Scanned**: X\n\n### CRITICAL (Immediate action)\n\n#### 1. [A03] XSS Vulnerability\n**File**: `src/components/Comment.tsx:45`\n**Code**:\n\\`\\`\\`tsx\n<div dangerouslySetInnerHTML={{ __html: comment.body }} />\n\\`\\`\\`\n**Risk**: User input rendered without sanitization\n**Fix**:\n\\`\\`\\`tsx\nimport DOMPurify from 'dompurify'\n<div dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(comment.body) }} />\n\\`\\`\\`\n\n### HIGH | MEDIUM | LOW\n...\n\n### Summary\n| Severity | Count |\n|----------|-------|\n| CRITICAL | 2 |\n| HIGH | 3 |\n| MEDIUM | 5 |\n\n### Actions\n1. [ ] Install DOMPurify: `npm install dompurify`\n2. [ ] Move API keys to .env\n3. [ ] Use httpOnly cookies instead of localStorage\n```\n\n## Best Practices\n1. **Least Privilege**: Grant only necessary permissions\n2. **Defense in Depth**: Validate at multiple layers\n3. **Input Validation**: Validate all user input\n4. **Output Encoding**: Context-appropriate encoding\n5. **Secret Management**: Use env vars or secret managers\n\n## Integration\n- `code-reviewer` skill\n- `nextjs-reviewer` skill\n- `/analyze-code` command\n\n## Notes\n- Static analysis may have false positives\n- Runtime security testing needs separate tools\n- Sensitive files (.env, credentials) excluded from scan"
              },
              {
                "name": "spring-boot-reviewer",
                "description": "WHEN: Spring Boot code review, DI patterns, @Transactional, REST API design, security configuration\nWHAT: Dependency injection + Transaction management + API design + Security config + JPA patterns\nWHEN NOT: Kotlin Spring → kotlin-spring-reviewer, Pure Java → java-reviewer, Django/FastAPI → respective reviewers\n",
                "path": "skills/spring-boot-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "spring-boot-reviewer",
                  "description": "WHEN: Spring Boot code review, DI patterns, @Transactional, REST API design, security configuration\nWHAT: Dependency injection + Transaction management + API design + Security config + JPA patterns\nWHEN NOT: Kotlin Spring → kotlin-spring-reviewer, Pure Java → java-reviewer, Django/FastAPI → respective reviewers\n"
                },
                "content": "# Spring Boot Reviewer Skill\n\n## Purpose\nReviews Spring Boot applications for dependency injection patterns, transaction management, REST API design, security configuration, and JPA best practices.\n\n## When to Use\n- Spring Boot code review requests\n- \"Spring\", \"@Transactional\", \"JPA\", \"REST controller\" mentions\n- API security configuration review\n- Projects with `spring-boot-starter-*` dependencies\n- `@SpringBootApplication` class present\n\n## Project Detection\n- `spring-boot-starter-*` in pom.xml/build.gradle\n- `@SpringBootApplication` annotation\n- `application.yml` or `application.properties`\n- `src/main/resources/application*.yml`\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Spring Boot**: 3.2.x\n**Java**: 17 / 21\n**Dependencies**:\n  - spring-boot-starter-web\n  - spring-boot-starter-data-jpa\n  - spring-boot-starter-security\n  - spring-boot-starter-validation\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which Spring Boot areas to review?\"\nOptions:\n- Full Spring Boot audit (recommended)\n- Dependency Injection patterns\n- Transaction management\n- REST API design\n- Security configuration\n- JPA/Repository patterns\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Critical: Field Injection\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| `@Autowired` on field | Not testable | HIGH |\n| `@Inject` on field | Same issue | HIGH |\n| `@Value` on field | Consider constructor | MEDIUM |\n\n```java\n// BAD: Field injection\n@Service\npublic class UserService {\n    @Autowired\n    private UserRepository userRepository;\n\n    @Autowired\n    private EmailService emailService;\n}\n\n// GOOD: Constructor injection\n@Service\npublic class UserService {\n    private final UserRepository userRepository;\n    private final EmailService emailService;\n\n    public UserService(UserRepository userRepository,\n                      EmailService emailService) {\n        this.userRepository = userRepository;\n        this.emailService = emailService;\n    }\n}\n\n// BETTER: Lombok + constructor injection\n@Service\n@RequiredArgsConstructor\npublic class UserService {\n    private final UserRepository userRepository;\n    private final EmailService emailService;\n}\n```\n\n### Critical: JPA N+1 Query Problem\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Lazy load in loop | N+1 queries | CRITICAL |\n| Missing `@EntityGraph` | Suboptimal fetching | HIGH |\n| No `fetch join` | Multiple queries | HIGH |\n\n```java\n// BAD: N+1 problem\n@Entity\npublic class Order {\n    @OneToMany(mappedBy = \"order\", fetch = FetchType.LAZY)\n    private List<OrderItem> items;\n}\n\n// In service - N+1 queries!\nList<Order> orders = orderRepository.findAll();\nfor (Order order : orders) {\n    order.getItems().size();  // Triggers query per order\n}\n\n// GOOD: Fetch join in repository\n@Query(\"SELECT o FROM Order o JOIN FETCH o.items WHERE o.status = :status\")\nList<Order> findByStatusWithItems(@Param(\"status\") OrderStatus status);\n\n// GOOD: @EntityGraph\n@EntityGraph(attributePaths = {\"items\", \"customer\"})\nList<Order> findByStatus(OrderStatus status);\n\n// GOOD: Batch fetching\n@Entity\npublic class Order {\n    @OneToMany(mappedBy = \"order\")\n    @BatchSize(size = 20)  // Fetch 20 at a time\n    private List<OrderItem> items;\n}\n```\n\n### Critical: Missing Security\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| No `@PreAuthorize` | Unauthorized access | CRITICAL |\n| Hardcoded credentials | Security breach | CRITICAL |\n| Exposed Actuator endpoints | Info/control leak | CRITICAL |\n| Missing CSRF config | CSRF vulnerable | HIGH |\n| No rate limiting | DoS vulnerable | HIGH |\n| Entity returned from Controller | Data leak / OSIV | HIGH |\n\n```java\n// BAD: No authorization check\n@RestController\n@RequestMapping(\"/api/admin\")\npublic class AdminController {\n    @GetMapping(\"/users\")\n    public List<User> getAllUsers() {  // Anyone can access!\n        return userService.findAll();\n    }\n}\n\n// GOOD: Method-level security\n@RestController\n@RequestMapping(\"/api/admin\")\npublic class AdminController {\n    @GetMapping(\"/users\")\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public List<User> getAllUsers() {\n        return userService.findAll();\n    }\n}\n\n// Security configuration\n@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http\n            .authorizeHttpRequests(auth -> auth\n                .requestMatchers(\"/api/public/**\").permitAll()\n                .requestMatchers(\"/api/admin/**\").hasRole(\"ADMIN\")\n                .anyRequest().authenticated()\n            )\n            .csrf(csrf -> csrf.csrfTokenRepository(\n                CookieCsrfTokenRepository.withHttpOnlyFalse()))\n            .build();\n    }\n}\n```\n\n### High: Controller with Business Logic\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| DB access in controller | Layer violation | HIGH |\n| Complex logic in controller | Not testable | HIGH |\n| Transaction in controller | Wrong layer | HIGH |\n\n```java\n// BAD: Business logic in controller\n@RestController\n@RequestMapping(\"/api/orders\")\npublic class OrderController {\n    @Autowired\n    private OrderRepository orderRepository;\n\n    @PostMapping\n    @Transactional  // Wrong layer!\n    public Order createOrder(@RequestBody CreateOrderRequest request) {\n        // Business logic in controller\n        if (request.getItems().isEmpty()) {\n            throw new BadRequestException(\"Items required\");\n        }\n\n        Order order = new Order();\n        order.setCustomerId(request.getCustomerId());\n\n        BigDecimal total = BigDecimal.ZERO;\n        for (ItemRequest item : request.getItems()) {\n            total = total.add(item.getPrice().multiply(\n                BigDecimal.valueOf(item.getQuantity())));\n        }\n        order.setTotal(total);\n\n        return orderRepository.save(order);\n    }\n}\n\n// GOOD: Thin controller, service layer\n@RestController\n@RequestMapping(\"/api/orders\")\n@RequiredArgsConstructor\npublic class OrderController {\n    private final OrderService orderService;\n\n    @PostMapping\n    public ResponseEntity<OrderResponse> createOrder(\n            @Valid @RequestBody CreateOrderRequest request) {\n        Order order = orderService.create(request);\n        return ResponseEntity.created(\n            URI.create(\"/api/orders/\" + order.getId()))\n            .body(OrderResponse.from(order));\n    }\n}\n\n@Service\n@RequiredArgsConstructor\npublic class OrderService {\n    private final OrderRepository orderRepository;\n\n    @Transactional  // Correct layer\n    public Order create(CreateOrderRequest request) {\n        // Business logic here\n        Order order = buildOrder(request);\n        return orderRepository.save(order);\n    }\n}\n```\n\n### High: Missing @Transactional\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Multiple saves without txn | Partial commit | HIGH |\n| Self-invocation of @Transactional | Proxy bypassed | CRITICAL |\n| Read without `readOnly` | Missed optimization | MEDIUM |\n| Wrong propagation | Unexpected behavior | HIGH |\n\n```java\n// BAD: No transaction - partial failure\n@Service\npublic class TransferService {\n    public void transfer(Long fromId, Long toId, BigDecimal amount) {\n        Account from = accountRepository.findById(fromId).orElseThrow();\n        Account to = accountRepository.findById(toId).orElseThrow();\n\n        from.setBalance(from.getBalance().subtract(amount));\n        accountRepository.save(from);\n        // Exception here = money lost!\n        to.setBalance(to.getBalance().add(amount));\n        accountRepository.save(to);\n    }\n}\n\n// GOOD: Transactional\n@Service\npublic class TransferService {\n    @Transactional\n    public void transfer(Long fromId, Long toId, BigDecimal amount) {\n        Account from = accountRepository.findById(fromId).orElseThrow();\n        Account to = accountRepository.findById(toId).orElseThrow();\n\n        from.setBalance(from.getBalance().subtract(amount));\n        to.setBalance(to.getBalance().add(amount));\n        // Both or nothing\n    }\n}\n\n// GOOD: readOnly for queries\n@Transactional(readOnly = true)\npublic List<Account> findAll() {\n    return accountRepository.findAll();\n}\n\n// GOOD: Propagation for nested transactions\n@Transactional(propagation = Propagation.REQUIRES_NEW)\npublic void logAudit(String action) {\n    // Commits even if outer transaction rolls back\n}\n\n// CRITICAL: Self-invocation bypasses proxy\n@Service\npublic class OrderService {\n    @Transactional\n    public void processOrder(Order order) {\n        // ...\n        this.sendNotification(order);  // BAD: @Transactional ignored!\n    }\n\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\n    public void sendNotification(Order order) {\n        // This runs WITHOUT a new transaction due to self-invocation\n    }\n}\n\n// GOOD: Inject self or use separate service\n@Service\npublic class OrderService {\n    private final NotificationService notificationService;  // Separate bean\n\n    @Transactional\n    public void processOrder(Order order) {\n        notificationService.sendNotification(order);  // Proxy works\n    }\n}\n```\n\n### High: Missing DTO Validation\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| No `@Valid` on request | Unvalidated input | HIGH |\n| Missing validation annotations | Bad data accepted | HIGH |\n| No error handling | 500 on validation fail | MEDIUM |\n\n```java\n// BAD: No validation\n@PostMapping(\"/users\")\npublic User createUser(@RequestBody CreateUserRequest request) {\n    // name could be null, email invalid\n    return userService.create(request);\n}\n\n// GOOD: Validated request\npublic record CreateUserRequest(\n    @NotBlank(message = \"Name is required\")\n    @Size(max = 100, message = \"Name too long\")\n    String name,\n\n    @NotBlank\n    @Email(message = \"Invalid email format\")\n    String email,\n\n    @NotNull\n    @Min(value = 0, message = \"Age must be positive\")\n    @Max(value = 150, message = \"Invalid age\")\n    Integer age\n) {}\n\n@PostMapping(\"/users\")\npublic ResponseEntity<UserResponse> createUser(\n        @Valid @RequestBody CreateUserRequest request) {\n    return ResponseEntity.ok(userService.create(request));\n}\n\n// Global exception handler\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public ResponseEntity<ErrorResponse> handleValidation(\n            MethodArgumentNotValidException ex) {\n        List<String> errors = ex.getBindingResult()\n            .getFieldErrors().stream()\n            .map(error -> error.getField() + \": \" + error.getDefaultMessage())\n            .toList();\n        return ResponseEntity.badRequest()\n            .body(new ErrorResponse(\"Validation failed\", errors));\n    }\n}\n```\n\n### High: Hardcoded Configuration\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Hardcoded URL in code | Not configurable | HIGH |\n| Hardcoded credentials | Security risk | CRITICAL |\n| Magic numbers | Maintainability | MEDIUM |\n\n```java\n// BAD: Hardcoded configuration\n@Service\npublic class ExternalApiService {\n    private final String apiUrl = \"https://api.example.com\";  // Hardcoded\n    private final String apiKey = \"sk-secret-key\";  // CRITICAL!\n    private final int timeout = 5000;\n}\n\n// GOOD: Externalized configuration\n@Configuration\n@ConfigurationProperties(prefix = \"external-api\")\n@Validated\npublic class ExternalApiProperties {\n    @NotBlank\n    private String url;\n\n    @NotBlank\n    private String apiKey;\n\n    @Min(100)\n    @Max(60000)\n    private int timeout = 5000;\n\n    // getters, setters\n}\n\n@Service\n@RequiredArgsConstructor\npublic class ExternalApiService {\n    private final ExternalApiProperties properties;\n\n    public void call() {\n        // Use properties.getUrl(), etc.\n    }\n}\n\n// application.yml\nexternal-api:\n  url: ${EXTERNAL_API_URL}\n  api-key: ${EXTERNAL_API_KEY}\n  timeout: 5000\n```\n\n### Critical: WebFlux Blocking Calls\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| JDBC in WebFlux | Blocks event loop | CRITICAL |\n| Thread.sleep() | Blocks thread | CRITICAL |\n| Blocking I/O | Performance death | CRITICAL |\n\n```java\n// BAD: Blocking call in reactive stack\n@RestController\npublic class ReactiveController {\n    @Autowired\n    private JdbcTemplate jdbcTemplate;  // Blocking!\n\n    @GetMapping(\"/users\")\n    public Mono<List<User>> getUsers() {\n        // Blocks event loop thread!\n        List<User> users = jdbcTemplate.query(...);\n        return Mono.just(users);\n    }\n}\n\n// GOOD: Use R2DBC for reactive DB access\n@RestController\n@RequiredArgsConstructor\npublic class ReactiveController {\n    private final UserRepository userRepository;  // R2DBC\n\n    @GetMapping(\"/users\")\n    public Flux<User> getUsers() {\n        return userRepository.findAll();  // Non-blocking\n    }\n}\n\n// If must use blocking: subscribeOn(Schedulers.boundedElastic())\n@GetMapping(\"/legacy\")\npublic Mono<String> callLegacy() {\n    return Mono.fromCallable(() -> legacyBlockingService.call())\n        .subscribeOn(Schedulers.boundedElastic());\n}\n```\n\n### Medium: Missing API Versioning\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| No version in URL | Breaking changes | MEDIUM |\n| No version header | Hard to evolve | MEDIUM |\n\n```java\n// BAD: No versioning\n@RestController\n@RequestMapping(\"/api/users\")\npublic class UserController { }\n\n// GOOD: URL versioning\n@RestController\n@RequestMapping(\"/api/v1/users\")\npublic class UserControllerV1 { }\n\n@RestController\n@RequestMapping(\"/api/v2/users\")\npublic class UserControllerV2 { }\n\n// ALTERNATIVE: Header versioning\n@RestController\n@RequestMapping(\"/api/users\")\npublic class UserController {\n    @GetMapping(headers = \"X-API-Version=1\")\n    public List<UserV1Response> getUsersV1() { }\n\n    @GetMapping(headers = \"X-API-Version=2\")\n    public List<UserV2Response> getUsersV2() { }\n}\n```\n\n## Response Template\n```\n## Spring Boot Code Review Results\n\n**Project**: [name]\n**Spring Boot**: 3.2.x | **Java**: 17\n**Profile**: [dev/prod]\n\n### Dependency Injection\n\n#### HIGH\n| File | Line | Issue |\n|------|------|-------|\n| UserService.java | 12 | Field injection with @Autowired |\n| OrderService.java | 8 | Multiple @Autowired fields |\n\n### Transaction Management\n| File | Line | Issue |\n|------|------|-------|\n| TransferService.java | 34 | Missing @Transactional on multi-save |\n| ReportService.java | 56 | Read method without readOnly=true |\n\n### JPA/Repository\n| File | Line | Issue |\n|------|------|-------|\n| OrderService.java | 23 | N+1 query in loop |\n| ProductService.java | 45 | Missing fetch join |\n\n### Security\n| File | Line | Issue |\n|------|------|-------|\n| AdminController.java | 12 | Missing @PreAuthorize |\n| application.yml | 34 | Hardcoded API key |\n\n### REST API\n| File | Line | Issue |\n|------|------|-------|\n| UserController.java | 23 | Business logic in controller |\n| OrderController.java | 45 | Missing @Valid on request body |\n\n### Recommendations\n1. [ ] Replace field injection with constructor injection\n2. [ ] Add @Transactional to service methods\n3. [ ] Fix N+1 with @EntityGraph or fetch join\n4. [ ] Add method-level security annotations\n5. [ ] Move business logic to service layer\n\n### Positive Patterns\n- Good use of @ConfigurationProperties\n- Proper exception handling with @RestControllerAdvice\n```\n\n## Best Practices\n1. **Constructor Injection**: Always prefer over field injection\n2. **Service Layer**: Keep controllers thin\n3. **Transactions**: At service layer, readOnly for queries\n4. **Validation**: @Valid on all request bodies\n5. **Security**: Method-level with @PreAuthorize\n6. **Configuration**: Externalize all config values\n\n## Integration\n- `java-reviewer` skill: Java idioms\n- `kotlin-spring-reviewer` skill: Kotlin Spring\n- `orm-reviewer` skill: JPA deep dive\n- `security-scanner` skill: Security audit\n\n## Notes\n- Based on Spring Boot 3.x best practices\n- Assumes Spring Security 6.x\n- Works with both MVC and WebFlux\n- Compatible with Java 17+ and Kotlin"
              },
              {
                "name": "sql-optimizer",
                "description": "WHEN: SQL query review, query optimization, index usage, N+1 detection, performance analysis\nWHAT: Query plan analysis + Index recommendations + N+1 detection + Join optimization + Performance tuning\nWHEN NOT: Schema design → schema-reviewer, ORM code → orm-reviewer\n",
                "path": "skills/sql-optimizer/SKILL.md",
                "frontmatter": {
                  "name": "sql-optimizer",
                  "description": "WHEN: SQL query review, query optimization, index usage, N+1 detection, performance analysis\nWHAT: Query plan analysis + Index recommendations + N+1 detection + Join optimization + Performance tuning\nWHEN NOT: Schema design → schema-reviewer, ORM code → orm-reviewer\n"
                },
                "content": "# SQL Optimizer Skill\n\n## Purpose\nAnalyzes and optimizes SQL queries for performance, index usage, and best practices.\n\n## When to Use\n- SQL query optimization\n- Query performance review\n- Index usage analysis\n- N+1 query detection\n- Slow query troubleshooting\n\n## Project Detection\n- `.sql` files\n- Query strings in code\n- Database migration files\n- ORM query logs\n\n## Workflow\n\n### Step 1: Analyze Query\n```\n**Database**: PostgreSQL/MySQL/SQLite\n**Tables**: users, orders, products\n**Query Type**: SELECT with JOINs\n**Estimated Rows**: 100K+\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full query optimization (recommended)\n- Index usage analysis\n- Join optimization\n- Subquery refactoring\n- N+1 detection\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Index Usage\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Full table scan | Add appropriate index | CRITICAL |\n| Index not used | Check column order | HIGH |\n| Too many indexes | Consolidate indexes | MEDIUM |\n| Missing composite index | Add multi-column index | HIGH |\n\n```sql\n-- BAD: No index on filter columns\nSELECT * FROM orders\nWHERE created_at > '2024-01-01'\nAND status = 'pending';\n-- Full table scan!\n\n-- GOOD: Add composite index\nCREATE INDEX idx_orders_status_created\nON orders(status, created_at);\n\n-- Index order matters!\n-- For WHERE status = ? AND created_at > ?\n-- Index(status, created_at) ✓\n-- Index(created_at, status) ✗ (less effective)\n```\n\n### SELECT Optimization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| SELECT * | Select specific columns | HIGH |\n| Unnecessary columns | Remove unused columns | MEDIUM |\n| No LIMIT | Add LIMIT for large results | HIGH |\n\n```sql\n-- BAD: SELECT * with large result\nSELECT * FROM orders\nWHERE user_id = 123;\n-- Returns all columns, no limit\n\n-- GOOD: Specific columns, limited results\nSELECT id, status, total, created_at\nFROM orders\nWHERE user_id = 123\nORDER BY created_at DESC\nLIMIT 20;\n```\n\n### JOIN Optimization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Cartesian product | Add join condition | CRITICAL |\n| Join on non-indexed column | Add index | HIGH |\n| Too many joins | Consider denormalization | MEDIUM |\n| Implicit join | Use explicit JOIN syntax | LOW |\n\n```sql\n-- BAD: Implicit join (harder to read, error-prone)\nSELECT o.*, u.name\nFROM orders o, users u\nWHERE o.user_id = u.id;\n\n-- GOOD: Explicit JOIN\nSELECT o.id, o.total, u.name\nFROM orders o\nINNER JOIN users u ON o.user_id = u.id;\n\n-- BAD: Join on non-indexed column\nSELECT o.*, p.name\nFROM orders o\nJOIN products p ON o.product_code = p.code;\n-- If products.code has no index → slow!\n\n-- FIX: Add index\nCREATE INDEX idx_products_code ON products(code);\n```\n\n### Subquery Optimization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Correlated subquery | Convert to JOIN | HIGH |\n| IN with subquery | Use EXISTS or JOIN | MEDIUM |\n| Subquery in SELECT | Move to JOIN | HIGH |\n\n```sql\n-- BAD: Correlated subquery (runs for each row)\nSELECT *\nFROM orders o\nWHERE total > (\n    SELECT AVG(total)\n    FROM orders\n    WHERE user_id = o.user_id\n);\n\n-- GOOD: Use window function\nSELECT *\nFROM (\n    SELECT *,\n           AVG(total) OVER (PARTITION BY user_id) as avg_total\n    FROM orders\n) sub\nWHERE total > avg_total;\n\n-- BAD: IN with large subquery\nSELECT * FROM users\nWHERE id IN (SELECT user_id FROM orders WHERE status = 'vip');\n\n-- GOOD: Use EXISTS or JOIN\nSELECT u.* FROM users u\nWHERE EXISTS (\n    SELECT 1 FROM orders o\n    WHERE o.user_id = u.id AND o.status = 'vip'\n);\n\n-- Or with JOIN\nSELECT DISTINCT u.*\nFROM users u\nINNER JOIN orders o ON o.user_id = u.id\nWHERE o.status = 'vip';\n```\n\n### N+1 Query Detection\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Loop with query | Batch fetch | CRITICAL |\n| Lazy load in loop | Eager load | CRITICAL |\n\n```sql\n-- N+1 Pattern (application code)\n-- Query 1: Get all users\nSELECT * FROM users;\n\n-- Then for each user (N queries):\nSELECT * FROM orders WHERE user_id = 1;\nSELECT * FROM orders WHERE user_id = 2;\nSELECT * FROM orders WHERE user_id = 3;\n-- ... N more queries\n\n-- SOLUTION 1: JOIN\nSELECT u.*, o.*\nFROM users u\nLEFT JOIN orders o ON o.user_id = u.id;\n\n-- SOLUTION 2: IN query (for separate queries)\nSELECT * FROM orders WHERE user_id IN (1, 2, 3, ...);\n```\n\n### Aggregation Optimization\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| COUNT(*) on large table | Use approximate count | MEDIUM |\n| GROUP BY without index | Add index | HIGH |\n| HAVING vs WHERE | Filter early with WHERE | MEDIUM |\n\n```sql\n-- BAD: COUNT on entire table\nSELECT COUNT(*) FROM orders;\n-- Scans entire table\n\n-- GOOD: Approximate count (PostgreSQL)\nSELECT reltuples::bigint AS estimate\nFROM pg_class\nWHERE relname = 'orders';\n\n-- BAD: WHERE in HAVING\nSELECT user_id, COUNT(*)\nFROM orders\nGROUP BY user_id\nHAVING status = 'completed';  -- Wrong place!\n\n-- GOOD: Filter before grouping\nSELECT user_id, COUNT(*)\nFROM orders\nWHERE status = 'completed'  -- Filter first\nGROUP BY user_id;\n\n-- Index for GROUP BY\nCREATE INDEX idx_orders_user_status\nON orders(user_id, status);\n```\n\n### EXPLAIN Analysis\n```sql\n-- PostgreSQL EXPLAIN\nEXPLAIN (ANALYZE, BUFFERS, FORMAT TEXT)\nSELECT u.name, COUNT(o.id)\nFROM users u\nLEFT JOIN orders o ON o.user_id = u.id\nGROUP BY u.id;\n\n-- Look for:\n-- ✗ Seq Scan (full table scan)\n-- ✗ Nested Loop with high rows\n-- ✗ Hash Join with large hash\n-- ✓ Index Scan\n-- ✓ Index Only Scan\n-- ✓ Bitmap Index Scan\n```\n\n## Response Template\n```\n## SQL Query Optimization Results\n\n**Database**: PostgreSQL 15\n**Query Type**: SELECT with JOIN\n**Estimated Impact**: ~10x improvement\n\n### Index Usage\n| Status | Issue | Recommendation |\n|--------|-------|----------------|\n| CRITICAL | Full table scan on orders | Add index on (status, created_at) |\n\n### Join Analysis\n| Status | Issue | Recommendation |\n|--------|-------|----------------|\n| HIGH | Non-indexed join column | Add index on products.code |\n\n### Query Structure\n| Status | Issue | Recommendation |\n|--------|-------|----------------|\n| HIGH | SELECT * with no LIMIT | Select specific columns, add LIMIT |\n\n### Recommended Indexes\n```sql\nCREATE INDEX idx_orders_status_created ON orders(status, created_at);\nCREATE INDEX idx_products_code ON products(code);\n```\n\n### Optimized Query\n```sql\nSELECT o.id, o.total, p.name\nFROM orders o\nINNER JOIN products p ON o.product_id = p.id\nWHERE o.status = 'pending'\nORDER BY o.created_at DESC\nLIMIT 100;\n```\n```\n\n## Best Practices\n1. **Indexes**: Add for WHERE, JOIN, ORDER BY columns\n2. **SELECT**: Only needed columns, with LIMIT\n3. **JOINs**: Explicit syntax, indexed columns\n4. **Subqueries**: Prefer JOINs or CTEs\n5. **EXPLAIN**: Always analyze query plans\n\n## Integration\n- `schema-reviewer`: Database design\n- `orm-reviewer`: ORM query patterns\n- `perf-analyzer`: Application performance"
              },
              {
                "name": "terraform-reviewer",
                "description": "WHEN: Terraform code review, module structure, state management, security policies\nWHAT: Module organization + State backend + Security policies + Variable validation + Best practices\nWHEN NOT: Kubernetes → k8s-reviewer, Docker → docker-reviewer\n",
                "path": "skills/terraform-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "terraform-reviewer",
                  "description": "WHEN: Terraform code review, module structure, state management, security policies\nWHAT: Module organization + State backend + Security policies + Variable validation + Best practices\nWHEN NOT: Kubernetes → k8s-reviewer, Docker → docker-reviewer\n"
                },
                "content": "# Terraform Reviewer Skill\n\n## Purpose\nReviews Terraform code for module structure, state management, security, and best practices.\n\n## When to Use\n- Terraform code review\n- Module structure review\n- State backend configuration\n- Security policy review\n- Variable and output review\n\n## Project Detection\n- `*.tf` files in project\n- `main.tf`, `variables.tf`, `outputs.tf`\n- `modules/` directory\n- `terraform.tfvars`\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**Terraform**: 1.6+\n**Provider**: AWS/GCP/Azure\n**Backend**: S3/GCS/Azure Blob\n**Modules**: Custom + Registry\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which areas to review?\"\nOptions:\n- Full Terraform review (recommended)\n- Module structure\n- State management\n- Security and compliance\n- Variable validation\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Module Structure\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| All resources in main.tf | Split by resource type | MEDIUM |\n| No modules | Extract reusable modules | MEDIUM |\n| Hardcoded values | Use variables | HIGH |\n| No outputs | Add relevant outputs | MEDIUM |\n\n```\n# GOOD: Project structure\nterraform/\n├── environments/\n│   ├── dev/\n│   │   ├── main.tf\n│   │   ├── variables.tf\n│   │   └── terraform.tfvars\n│   └── prod/\n│       ├── main.tf\n│       ├── variables.tf\n│       └── terraform.tfvars\n├── modules/\n│   ├── vpc/\n│   │   ├── main.tf\n│   │   ├── variables.tf\n│   │   └── outputs.tf\n│   └── eks/\n│       ├── main.tf\n│       ├── variables.tf\n│       └── outputs.tf\n└── README.md\n```\n\n```hcl\n# BAD: Hardcoded values\nresource \"aws_instance\" \"web\" {\n  ami           = \"ami-12345678\"\n  instance_type = \"t3.micro\"\n\n  tags = {\n    Name = \"web-server\"\n  }\n}\n\n# GOOD: Parameterized with variables\nvariable \"instance_type\" {\n  description = \"EC2 instance type\"\n  type        = string\n  default     = \"t3.micro\"\n\n  validation {\n    condition     = can(regex(\"^t3\\\\.\", var.instance_type))\n    error_message = \"Instance type must be t3 family.\"\n  }\n}\n\nvariable \"environment\" {\n  description = \"Environment name\"\n  type        = string\n\n  validation {\n    condition     = contains([\"dev\", \"staging\", \"prod\"], var.environment)\n    error_message = \"Environment must be dev, staging, or prod.\"\n  }\n}\n\nresource \"aws_instance\" \"web\" {\n  ami           = data.aws_ami.amazon_linux.id\n  instance_type = var.instance_type\n\n  tags = merge(local.common_tags, {\n    Name = \"${var.project}-${var.environment}-web\"\n  })\n}\n```\n\n### State Management\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Local state | Use remote backend | CRITICAL |\n| No state locking | Enable DynamoDB/GCS lock | HIGH |\n| No state encryption | Enable encryption | HIGH |\n| Shared state file | Split by environment | MEDIUM |\n\n```hcl\n# BAD: Local state (default)\n# No backend configuration\n\n# GOOD: Remote backend with locking\nterraform {\n  backend \"s3\" {\n    bucket         = \"mycompany-terraform-state\"\n    key            = \"prod/vpc/terraform.tfstate\"\n    region         = \"us-east-1\"\n    encrypt        = true\n    dynamodb_table = \"terraform-state-lock\"\n  }\n}\n\n# For GCP\nterraform {\n  backend \"gcs\" {\n    bucket  = \"mycompany-terraform-state\"\n    prefix  = \"prod/vpc\"\n  }\n}\n```\n\n### Security\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Secrets in tfvars | Use secret manager | CRITICAL |\n| Public S3 bucket | Set ACL private | CRITICAL |\n| Open security group | Restrict CIDR | CRITICAL |\n| No encryption | Enable encryption | HIGH |\n\n```hcl\n# BAD: Security issues\nresource \"aws_security_group\" \"web\" {\n  ingress {\n    from_port   = 0\n    to_port     = 65535\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]  # Wide open!\n  }\n}\n\nresource \"aws_s3_bucket\" \"data\" {\n  bucket = \"my-data-bucket\"\n  acl    = \"public-read\"  # Public!\n}\n\n# GOOD: Secure configuration\nresource \"aws_security_group\" \"web\" {\n  name        = \"${var.project}-web-sg\"\n  description = \"Security group for web servers\"\n  vpc_id      = var.vpc_id\n\n  ingress {\n    description = \"HTTPS from load balancer\"\n    from_port   = 443\n    to_port     = 443\n    protocol    = \"tcp\"\n    security_groups = [aws_security_group.alb.id]\n  }\n\n  egress {\n    description = \"Allow all outbound\"\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  tags = local.common_tags\n}\n\nresource \"aws_s3_bucket\" \"data\" {\n  bucket = \"${var.project}-${var.environment}-data\"\n}\n\nresource \"aws_s3_bucket_public_access_block\" \"data\" {\n  bucket = aws_s3_bucket.data.id\n\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"data\" {\n  bucket = aws_s3_bucket.data.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm     = \"aws:kms\"\n      kms_master_key_id = aws_kms_key.s3.arn\n    }\n  }\n}\n```\n\n### Variable Validation\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| No type constraint | Add type | MEDIUM |\n| No validation | Add validation block | MEDIUM |\n| No description | Add description | LOW |\n| Sensitive not marked | Add sensitive = true | HIGH |\n\n```hcl\n# GOOD: Well-defined variables\nvariable \"vpc_cidr\" {\n  description = \"CIDR block for VPC\"\n  type        = string\n  default     = \"10.0.0.0/16\"\n\n  validation {\n    condition     = can(cidrnetmask(var.vpc_cidr))\n    error_message = \"Must be a valid CIDR block.\"\n  }\n}\n\nvariable \"db_password\" {\n  description = \"Database password\"\n  type        = string\n  sensitive   = true  # Won't show in logs\n\n  validation {\n    condition     = length(var.db_password) >= 16\n    error_message = \"Password must be at least 16 characters.\"\n  }\n}\n\nvariable \"allowed_environments\" {\n  description = \"List of allowed environment names\"\n  type        = list(string)\n  default     = [\"dev\", \"staging\", \"prod\"]\n}\n```\n\n### Resource Naming\n| Check | Recommendation | Severity |\n|-------|----------------|----------|\n| Inconsistent naming | Use naming convention | MEDIUM |\n| No tags | Add standard tags | MEDIUM |\n\n```hcl\n# GOOD: Consistent naming and tagging\nlocals {\n  name_prefix = \"${var.project}-${var.environment}\"\n\n  common_tags = {\n    Project     = var.project\n    Environment = var.environment\n    ManagedBy   = \"terraform\"\n    Owner       = var.owner\n  }\n}\n\nresource \"aws_vpc\" \"main\" {\n  cidr_block = var.vpc_cidr\n\n  tags = merge(local.common_tags, {\n    Name = \"${local.name_prefix}-vpc\"\n  })\n}\n```\n\n## Response Template\n```\n## Terraform Review Results\n\n**Project**: [name]\n**Terraform**: 1.6 | **Provider**: AWS\n\n### Module Structure\n| Status | File | Issue |\n|--------|------|-------|\n| MEDIUM | main.tf | 500+ lines, should split |\n\n### State Management\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | - | Using local state |\n\n### Security\n| Status | File | Issue |\n|--------|------|-------|\n| CRITICAL | security.tf:23 | Security group allows 0.0.0.0/0 |\n\n### Variables\n| Status | File | Issue |\n|--------|------|-------|\n| HIGH | variables.tf | db_password not marked sensitive |\n\n### Recommended Actions\n1. [ ] Configure remote state backend with locking\n2. [ ] Restrict security group ingress rules\n3. [ ] Mark sensitive variables\n4. [ ] Split main.tf into logical files\n```\n\n## Best Practices\n1. **Structure**: Separate by environment, use modules\n2. **State**: Remote backend with locking and encryption\n3. **Security**: No secrets in code, least privilege\n4. **Variables**: Type constraints, validation, descriptions\n5. **Naming**: Consistent convention, standard tags\n\n## Integration\n- `k8s-reviewer`: EKS/GKE cluster configs\n- `infra-security-reviewer`: Compliance checks\n- `ci-cd-reviewer`: Terraform in pipelines"
              },
              {
                "name": "test-generator",
                "description": "WHEN: Test code generation, unit/integration/E2E test writing, component/hook/utility tests\nWHAT: Framework detection + Jest/Vitest/RTL/Playwright templates + Happy Path/Edge/Error case tests\nWHEN NOT: Coverage analysis → coverage-analyzer, Test quality review → code-reviewer\n",
                "path": "skills/test-generator/SKILL.md",
                "frontmatter": {
                  "name": "test-generator",
                  "description": "WHEN: Test code generation, unit/integration/E2E test writing, component/hook/utility tests\nWHAT: Framework detection + Jest/Vitest/RTL/Playwright templates + Happy Path/Edge/Error case tests\nWHEN NOT: Coverage analysis → coverage-analyzer, Test quality review → code-reviewer\n"
                },
                "content": "# Test Generator Skill\n\n## Purpose\nAutomatically generates tests by detecting project test framework and applying appropriate patterns.\n\n## When to Use\n- Test generation requests\n- New component/function needs tests\n- Unit, E2E, integration test mentions\n- Coverage improvement needed\n\n## Framework Detection\n\n### Test Runners\n| Framework | Detection | package.json |\n|-----------|-----------|--------------|\n| Jest | `jest.config.*` | `jest` |\n| Vitest | `vitest.config.*` | `vitest` |\n| Playwright | `playwright.config.*` | `@playwright/test` |\n| Cypress | `cypress.config.*` | `cypress` |\n\n### Test Libraries\n| Library | Purpose | package.json |\n|---------|---------|--------------|\n| RTL | React components | `@testing-library/react` |\n| Vue Test Utils | Vue components | `@vue/test-utils` |\n\n## Workflow\n\n### Step 1: Detect Environment\n```\n**Runner**: Jest\n**Library**: React Testing Library\n**Config**: jest.config.js\n**Test Dir**: __tests__/, *.test.tsx\n```\n\n### Step 2: Select Target\n**AskUserQuestion:**\n```\n\"Which code to test?\"\nOptions:\n- Specific file/component\n- Auto-detect untested files\n- Recently changed files\n- Entire directory\n```\n\n### Step 3: Select Test Type\n**AskUserQuestion:**\n```\n\"What type of tests?\"\nOptions:\n- Unit Test\n- Integration Test\n- Component Test\n- E2E Test (Playwright/Cypress)\n```\n\n### Step 4: Coverage Goal\n**AskUserQuestion:**\n```\n\"Coverage goal?\"\nOptions:\n- Happy Path only\n- Happy Path + Edge Cases\n- Full (including errors)\n- Specify scenarios\n```\n\n## Test Templates\n\n### React Component (Jest + RTL)\n```typescript\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport { Component } from './Component'\n\ndescribe('Component', () => {\n  const defaultProps = { /* ... */ }\n  const renderComponent = (props = {}) =>\n    render(<Component {...defaultProps} {...props} />)\n\n  describe('Rendering', () => {\n    it('renders with default state', () => {\n      renderComponent()\n      expect(screen.getByRole('button')).toBeInTheDocument()\n    })\n  })\n\n  describe('Interactions', () => {\n    it('calls callback on click', async () => {\n      const onClick = jest.fn()\n      renderComponent({ onClick })\n      await userEvent.click(screen.getByRole('button'))\n      expect(onClick).toHaveBeenCalledTimes(1)\n    })\n  })\n\n  describe('Edge Cases', () => {\n    it('handles empty data', () => {\n      renderComponent({ data: [] })\n      expect(screen.getByText('No data')).toBeInTheDocument()\n    })\n  })\n})\n```\n\n### React Hook\n```typescript\nimport { renderHook, act, waitFor } from '@testing-library/react'\nimport { useCustomHook } from './useCustomHook'\n\ndescribe('useCustomHook', () => {\n  it('returns initial state', () => {\n    const { result } = renderHook(() => useCustomHook())\n    expect(result.current.value).toBe(initialValue)\n  })\n\n  it('updates state', () => {\n    const { result } = renderHook(() => useCustomHook())\n    act(() => { result.current.setValue('new') })\n    expect(result.current.value).toBe('new')\n  })\n})\n```\n\n### Utility Function\n```typescript\nimport { utilityFunction } from './utils'\n\ndescribe('utilityFunction', () => {\n  it('processes valid input', () => {\n    expect(utilityFunction('valid')).toBe('expected')\n  })\n\n  describe('Edge Cases', () => {\n    it('handles empty string', () => {\n      expect(utilityFunction('')).toBe('')\n    })\n\n    it('handles null', () => {\n      expect(utilityFunction(null)).toBeNull()\n    })\n  })\n\n  describe('Errors', () => {\n    it('throws on invalid input', () => {\n      expect(() => utilityFunction(undefined)).toThrow()\n    })\n  })\n})\n```\n\n### E2E (Playwright)\n```typescript\nimport { test, expect } from '@playwright/test'\n\ntest.describe('User Flow: Login', () => {\n  test.beforeEach(async ({ page }) => {\n    await page.goto('/login')\n  })\n\n  test('logs in successfully', async ({ page }) => {\n    await page.getByLabel('Email').fill('user@example.com')\n    await page.getByLabel('Password').fill('password123')\n    await page.getByRole('button', { name: 'Login' }).click()\n    await expect(page).toHaveURL('/dashboard')\n  })\n\n  test('shows error on invalid credentials', async ({ page }) => {\n    await page.getByLabel('Email').fill('wrong@example.com')\n    await page.getByLabel('Password').fill('wrong')\n    await page.getByRole('button', { name: 'Login' }).click()\n    await expect(page.getByRole('alert')).toContainText('Login failed')\n  })\n})\n```\n\n## Response Template\n```\n## Tests Generated\n\n**Target**: src/components/Button.tsx\n**Output**: src/components/__tests__/Button.test.tsx\n**Runner**: Jest + RTL\n\n### Test Cases\n| Category | Test | Description |\n|----------|------|-------------|\n| Rendering | Default render | Renders correctly |\n| Interaction | Click event | onClick callback |\n| Edge Case | Long text | Overflow handling |\n\n### Run\n\\`\\`\\`bash\nnpm test -- Button.test.tsx\nnpm test -- --coverage Button.test.tsx\n\\`\\`\\`\n\n### Expected Coverage\n- Lines: ~90%\n- Branches: ~85%\n- Functions: ~100%\n```\n\n## Best Practices\n1. **AAA Pattern**: Arrange-Act-Assert\n2. **Clear Names**: Expected behavior in test name\n3. **Independence**: Each test runs independently\n4. **Minimal Mocking**: Mock only when necessary\n5. **Real User Behavior**: Prefer user-event\n\n## Integration\n- `/generate-tests` command\n- `coverage-analyzer` skill\n- `code-reviewer` skill\n\n## Notes\n- Follows existing test patterns if present\n- Test file location matches project structure\n- Mocking based on actual implementation analysis"
              },
              {
                "name": "typescript-reviewer",
                "description": "WHEN: TypeScript code review, type safety audit, tsconfig analysis, TS migration review\nWHAT: Type safety checks + any usage audit + generic patterns + strict mode + compiler options analysis\nWHEN NOT: React specific → nextjs-reviewer, Node.js backend → nodejs-reviewer, General code → code-reviewer\n",
                "path": "skills/typescript-reviewer/SKILL.md",
                "frontmatter": {
                  "name": "typescript-reviewer",
                  "description": "WHEN: TypeScript code review, type safety audit, tsconfig analysis, TS migration review\nWHAT: Type safety checks + any usage audit + generic patterns + strict mode + compiler options analysis\nWHEN NOT: React specific → nextjs-reviewer, Node.js backend → nodejs-reviewer, General code → code-reviewer\n"
                },
                "content": "# TypeScript Reviewer Skill\n\n## Purpose\nReviews TypeScript code for type safety, best practices, and idiomatic patterns. Identifies `any` abuse, missing type annotations, and unsafe type operations.\n\n## When to Use\n- TypeScript code review requests\n- \"Type safety\", \"any audit\", \"TS patterns\" mentions\n- TypeScript migration review\n- tsconfig.json optimization\n- Projects with `tsconfig.json` or `.ts`/`.tsx` files\n\n## Project Detection\n- `tsconfig.json` present\n- `.ts` or `.tsx` files\n- `typescript` in package.json dependencies\n- `@types/*` packages in devDependencies\n\n## Workflow\n\n### Step 1: Analyze Project\n```\n**TypeScript**: 5.x\n**Target**: ES2022\n**Module**: ESNext\n**Strict Mode**: ✓ enabled\n**Key Flags**: strictNullChecks, noImplicitAny\n```\n\n### Step 2: Select Review Areas\n**AskUserQuestion:**\n```\n\"Which TypeScript areas to review?\"\nOptions:\n- Full type safety audit (recommended)\n- any/unknown usage\n- Generic patterns\n- Type assertions\n- Compiler options\nmultiSelect: true\n```\n\n## Detection Rules\n\n### Critical: Type Safety Bypasses\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Explicit `any` | Bypasses type system | CRITICAL |\n| `as any` casting | Type escape hatch | CRITICAL |\n| `// @ts-ignore` | Silences all errors | CRITICAL |\n| `// @ts-nocheck` | Disables file checking | CRITICAL |\n| `any[]` array | Untyped collections | HIGH |\n| Function returns `any` | Propagates unsafety | HIGH |\n| `Promise<any>` | Async unsafety | HIGH |\n| `Function` type | Too broad | HIGH |\n| `Object` / `{}` type | Almost anything | HIGH |\n| `Record<string, any>` | Indexed unsafety | HIGH |\n\n```typescript\n// BAD: Explicit any\nfunction process(data: any): any {\n  return data.value;  // No type safety\n}\n\n// GOOD: Proper typing\nfunction process<T extends { value: V }, V>(data: T): V {\n  return data.value;\n}\n\n// BAD: any array\nconst items: any[] = [];\n\n// GOOD: Typed array\nconst items: Item[] = [];\n// or if truly dynamic:\nconst items: unknown[] = [];\n\n// BAD: @ts-ignore without justification\n// @ts-ignore\nconst value = unsafeOperation();\n\n// ACCEPTABLE: @ts-expect-error with justification\n// @ts-expect-error - Legacy API returns wrong type, tracked in JIRA-123\nconst legacyValue = legacyApi.call();\n\n// BAD: Broad types\nconst handler: Function = () => {};\nconst data: Object = {};\nconst config: Record<string, any> = {};\n\n// GOOD: Specific types\nconst handler: () => void = () => {};\nconst data: Record<string, unknown> = {};\nconst config: AppConfig = {};\n```\n\n### High: Type Assertions (`as`) and External Data\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| `as Type` on external data | No runtime validation | CRITICAL |\n| `as unknown as Type` | Double assertion | HIGH |\n| `as Type` on internal data | Unsafe assumption | MEDIUM |\n| `<Type>value` (JSX conflict) | Legacy syntax | LOW |\n| `!` non-null assertion | Runtime error risk | HIGH |\n| `!` after guard/assertion | Acceptable | OK |\n\n```typescript\n// BAD: Blind assertion\nconst user = data as User;\n\n// GOOD: Type guard first\nfunction isUser(data: unknown): data is User {\n  return typeof data === 'object' && data !== null && 'id' in data;\n}\nif (isUser(data)) {\n  const user = data;  // Narrowed to User\n}\n\n// BAD: Non-null assertion\nconst name = user.profile!.name!;\n\n// GOOD: Optional chaining with default\nconst name = user.profile?.name ?? 'Anonymous';\n\n// BAD: Double assertion\nconst value = data as unknown as SpecificType;\n\n// GOOD: Proper validation\nfunction validate(data: unknown): SpecificType {\n  if (!isSpecificType(data)) throw new Error('Invalid data');\n  return data;\n}\n\n// CRITICAL: External data must be validated\n// BAD: API response without validation\nconst user = await fetch('/api/user').then(r => r.json()) as User;\n\n// GOOD: Validate external data with schema\nimport { z } from 'zod';\nconst UserSchema = z.object({ id: z.string(), name: z.string() });\nconst user = UserSchema.parse(await fetch('/api/user').then(r => r.json()));\n\n// ACCEPTABLE: ! after explicit check\nfunction process(items: Item[]) {\n  const first = items.find(i => i.active);\n  if (!first) throw new Error('No active item');\n  return first.value;  // Safe - we just checked\n}\n```\n\n### Medium: Missing Return Types\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| No function return type | Inferred may be wrong | MEDIUM |\n| Public API without types | Poor documentation | HIGH |\n| Async without Promise<T> | Return type unclear | MEDIUM |\n\n```typescript\n// BAD: Missing return type\nfunction calculateTotal(items) {\n  return items.reduce((sum, item) => sum + item.price, 0);\n}\n\n// GOOD: Explicit return type\nfunction calculateTotal(items: Item[]): number {\n  return items.reduce((sum, item) => sum + item.price, 0);\n}\n\n// BAD: Async without type\nasync function fetchUser(id) {\n  return await api.get(`/users/${id}`);\n}\n\n// GOOD: Typed async\nasync function fetchUser(id: string): Promise<User> {\n  return await api.get<User>(`/users/${id}`);\n}\n```\n\n### Medium: Generic Constraints\n| Pattern | Issue | Severity |\n|---------|-------|----------|\n| Unconstrained generics | Too permissive | MEDIUM |\n| `T extends any` | Useless constraint | LOW |\n| Missing defaults | Poor ergonomics | LOW |\n\n```typescript\n// BAD: Unconstrained generic\nfunction getValue<T>(obj: T, key: string) {\n  return obj[key];  // Error: Type 'string' cannot be used to index type 'T'\n}\n\n// GOOD: Constrained generic\nfunction getValue<T extends Record<string, unknown>, K extends keyof T>(\n  obj: T,\n  key: K\n): T[K] {\n  return obj[key];\n}\n\n// BAD: No default\ninterface Props<T> {\n  data: T;\n}\n\n// GOOD: With default\ninterface Props<T = unknown> {\n  data: T;\n}\n```\n\n### Low: Type vs Interface\n| Pattern | Recommendation | Severity |\n|---------|----------------|----------|\n| Inconsistent usage | Pick one convention | LOW |\n| Type for object shapes | Consider interface | LOW |\n| Interface for union | Use type alias | LOW |\n\n```typescript\n// Interface: Object shapes, extendable\ninterface User {\n  id: string;\n  name: string;\n}\n\ninterface Admin extends User {\n  permissions: string[];\n}\n\n// Type: Unions, intersections, primitives\ntype Status = 'active' | 'inactive' | 'pending';\ntype UserOrAdmin = User | Admin;\ntype Point = { x: number; y: number };\n```\n\n### tsconfig.json Review\n| Option | Recommended | Severity |\n|--------|-------------|----------|\n| `strict: false` | Enable strict mode | CRITICAL |\n| `noImplicitAny: false` | Enable | HIGH |\n| `strictNullChecks: false` | Enable | HIGH |\n| `useUnknownInCatchVariables: false` | Enable (catch as unknown) | HIGH |\n| `noImplicitReturns: false` | Enable | HIGH |\n| `forceConsistentCasingInFileNames: false` | Enable (cross-platform) | HIGH |\n| `noUncheckedIndexedAccess: false` | Consider enabling | MEDIUM |\n| `noFallthroughCasesInSwitch: false` | Enable | MEDIUM |\n| `noImplicitOverride: false` | Enable for OOP | MEDIUM |\n| `exactOptionalPropertyTypes: false` | Consider for libraries | LOW |\n| `skipLibCheck: true` (for libs) | Set false for libraries | MEDIUM |\n\n**Library-specific options:**\n| Option | Recommended | Purpose |\n|--------|-------------|---------|\n| `declaration: true` | Required | Generate .d.ts |\n| `declarationMap: true` | Recommended | Source maps for types |\n| `composite: true` | For monorepos | Project references |\n\n```json\n// RECOMMENDED tsconfig.json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES2022\",\n    \"module\": \"ESNext\",\n    \"moduleResolution\": \"bundler\",\n    \"strict\": true,\n    \"noImplicitAny\": true,\n    \"strictNullChecks\": true,\n    \"noUncheckedIndexedAccess\": true,\n    \"noImplicitReturns\": true,\n    \"noFallthroughCasesInSwitch\": true,\n    \"esModuleInterop\": true,\n    \"skipLibCheck\": true,\n    \"forceConsistentCasingInFileNames\": true\n  }\n}\n```\n\n### Utility Types Usage\n| Pattern | Better Alternative | Severity |\n|---------|-------------------|----------|\n| Manual partial | `Partial<T>` | LOW |\n| Manual readonly | `Readonly<T>` | LOW |\n| Manual pick | `Pick<T, K>` | LOW |\n| Manual omit | `Omit<T, K>` | LOW |\n\n```typescript\n// BAD: Manual partial\ninterface UpdateUserInput {\n  name?: string;\n  email?: string;\n  age?: number;\n}\n\n// GOOD: Utility type\ntype UpdateUserInput = Partial<User>;\n\n// BAD: Manual readonly\ninterface Config {\n  readonly host: string;\n  readonly port: number;\n}\n\n// GOOD: Utility type\ntype Config = Readonly<{\n  host: string;\n  port: number;\n}>;\n\n// Useful patterns\ntype CreateInput = Omit<User, 'id' | 'createdAt'>;\ntype PublicUser = Pick<User, 'id' | 'name'>;\ntype NonNullableUser = Required<User>;\n```\n\n## Response Template\n```\n## TypeScript Review Results\n\n**Project**: [name]\n**TypeScript**: 5.x | **Target**: ES2022\n**Strict Mode**: [enabled/disabled]\n\n### Type Safety Issues\n\n#### CRITICAL\n| File | Line | Issue |\n|------|------|-------|\n| api.ts | 45 | strict mode disabled in tsconfig |\n\n#### HIGH\n| File | Line | Issue |\n|------|------|-------|\n| utils.ts | 23 | `as any` type assertion |\n| service.ts | 67 | Non-null assertion `!` on optional |\n\n#### MEDIUM\n| File | Line | Issue |\n|------|------|-------|\n| handlers.ts | 12 | Missing return type on exported function |\n| models.ts | 34 | Implicit `any` in callback |\n\n### any Usage Audit\n- **Explicit any**: 5 occurrences\n- **as any**: 3 occurrences\n- **Implicit any**: 2 occurrences\n- **Total**: 10 (recommend: 0)\n\n### Recommendations\n1. [ ] Enable strict mode in tsconfig.json\n2. [ ] Replace `any` with `unknown` + type guards\n3. [ ] Add return types to public API functions\n4. [ ] Remove non-null assertions, use optional chaining\n\n### Positive Patterns\n- Good use of generics in `Repository<T>`\n- Proper discriminated unions in `Result<T, E>`\n```\n\n## Best Practices\n1. **Strict Mode**: Always enable for new projects\n2. **`unknown` over `any`**: Use `unknown` for truly dynamic data\n3. **Type Guards**: Custom type guards over assertions\n4. **Branded Types**: For type-safe IDs\n5. **Const Assertions**: `as const` for literal types\n6. **Template Literal Types**: For string patterns\n\n```typescript\n// Branded types for IDs\ntype UserId = string & { readonly brand: unique symbol };\ntype PostId = string & { readonly brand: unique symbol };\n\nfunction createUserId(id: string): UserId {\n  return id as UserId;\n}\n\n// Now type-safe:\nfunction getUser(id: UserId): User { ... }\n// getUser(postId);  // Error!\n```\n\n## Integration\n- `code-reviewer` skill: General quality\n- `nextjs-reviewer` skill: React/Next.js specifics\n- `security-scanner` skill: Security audit\n\n## Notes\n- Based on TypeScript 5.x best practices\n- Focuses on type safety over runtime\n- Respects existing project conventions\n- Compatible with JSX/TSX files"
              }
            ]
          }
        ]
      }
    }
  ]
}