{
  "owner": {
    "id": "vieko",
    "display_name": "Vieko Franetovic",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/48670?u=376c4abe88770ddc9724b144ebb061950b9e2bf7&v=4",
    "url": "https://github.com/vieko",
    "bio": "Summoning Demons ▲ @Vercel, previously @devolverdigital ",
    "stats": {
      "total_repos": 1,
      "total_plugins": 1,
      "total_commands": 8,
      "total_skills": 0,
      "total_stars": 4,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "vieko/bonfire",
      "url": "https://github.com/vieko/bonfire",
      "description": "Your AI coding partner forgets everything between conversations. Bonfire remembers.",
      "homepage": "https://vieko.dev/bonfire",
      "signals": {
        "stars": 4,
        "forks": 0,
        "pushed_at": "2026-01-12T20:00:55Z",
        "created_at": "2025-12-23T05:09:19Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".bonfire",
          "type": "tree",
          "size": null
        },
        {
          "path": ".bonfire/.gitignore",
          "type": "blob",
          "size": 14
        },
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 762
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 724
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 159
        },
        {
          "path": "CHANGELOG.md",
          "type": "blob",
          "size": 14234
        },
        {
          "path": "CLAUDE.md",
          "type": "blob",
          "size": 5795
        },
        {
          "path": "LICENSE",
          "type": "blob",
          "size": 1073
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 5904
        },
        {
          "path": "bonfire.gif",
          "type": "blob",
          "size": 59991
        },
        {
          "path": "bonfire.png",
          "type": "blob",
          "size": 1408371
        },
        {
          "path": "claude",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude/.claude-plugin/marketplace.json",
          "type": "blob",
          "size": 762
        },
        {
          "path": "claude/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 682
        },
        {
          "path": "claude/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude/agents/codebase-explorer.md",
          "type": "blob",
          "size": 2932
        },
        {
          "path": "claude/agents/doc-writer.md",
          "type": "blob",
          "size": 2760
        },
        {
          "path": "claude/agents/spec-writer.md",
          "type": "blob",
          "size": 3163
        },
        {
          "path": "claude/agents/work-reviewer.md",
          "type": "blob",
          "size": 3156
        },
        {
          "path": "claude/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude/commands/archive.md",
          "type": "blob",
          "size": 3331
        },
        {
          "path": "claude/commands/configure.md",
          "type": "blob",
          "size": 2355
        },
        {
          "path": "claude/commands/document.md",
          "type": "blob",
          "size": 5820
        },
        {
          "path": "claude/commands/end.md",
          "type": "blob",
          "size": 1922
        },
        {
          "path": "claude/commands/git-strategy.md",
          "type": "blob",
          "size": 2115
        },
        {
          "path": "claude/commands/review.md",
          "type": "blob",
          "size": 5133
        },
        {
          "path": "claude/commands/spec.md",
          "type": "blob",
          "size": 9389
        },
        {
          "path": "claude/commands/start.md",
          "type": "blob",
          "size": 5948
        },
        {
          "path": "claude/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude/skills/archive-bonfire",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude/skills/archive-bonfire/SKILL.md",
          "type": "blob",
          "size": 2097
        },
        {
          "path": "claude/skills/bonfire-context",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude/skills/bonfire-context/SKILL.md",
          "type": "blob",
          "size": 1913
        },
        {
          "path": "experiments",
          "type": "tree",
          "size": null
        },
        {
          "path": "experiments/post-tool-use-formatter-hook.md",
          "type": "blob",
          "size": 3252
        },
        {
          "path": "opencode",
          "type": "tree",
          "size": null
        },
        {
          "path": "opencode/README.md",
          "type": "blob",
          "size": 2172
        },
        {
          "path": "opencode/agent",
          "type": "tree",
          "size": null
        },
        {
          "path": "opencode/agent/codebase-explorer.md",
          "type": "blob",
          "size": 2997
        },
        {
          "path": "opencode/agent/doc-writer.md",
          "type": "blob",
          "size": 2806
        },
        {
          "path": "opencode/agent/spec-writer.md",
          "type": "blob",
          "size": 3223
        },
        {
          "path": "opencode/agent/work-reviewer.md",
          "type": "blob",
          "size": 3195
        },
        {
          "path": "opencode/command",
          "type": "tree",
          "size": null
        },
        {
          "path": "opencode/command/bonfire-archive.md",
          "type": "blob",
          "size": 3256
        },
        {
          "path": "opencode/command/bonfire-configure.md",
          "type": "blob",
          "size": 2287
        },
        {
          "path": "opencode/command/bonfire-document.md",
          "type": "blob",
          "size": 5783
        },
        {
          "path": "opencode/command/bonfire-end.md",
          "type": "blob",
          "size": 1846
        },
        {
          "path": "opencode/command/bonfire-git-strategy.md",
          "type": "blob",
          "size": 2047
        },
        {
          "path": "opencode/command/bonfire-review.md",
          "type": "blob",
          "size": 5068
        },
        {
          "path": "opencode/command/bonfire-spec.md",
          "type": "blob",
          "size": 9337
        },
        {
          "path": "opencode/command/bonfire-start.md",
          "type": "blob",
          "size": 5831
        },
        {
          "path": "opencode/opencode.json",
          "type": "blob",
          "size": 244
        },
        {
          "path": "opencode/package.json",
          "type": "blob",
          "size": 108
        },
        {
          "path": "opencode/plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "opencode/plugin/bonfire-hooks.ts",
          "type": "blob",
          "size": 1806
        },
        {
          "path": "opencode/skill",
          "type": "tree",
          "size": null
        },
        {
          "path": "opencode/skill/archive-bonfire-awareness",
          "type": "tree",
          "size": null
        },
        {
          "path": "opencode/skill/archive-bonfire-awareness/SKILL.md",
          "type": "blob",
          "size": 1900
        },
        {
          "path": "opencode/skill/bonfire-context",
          "type": "tree",
          "size": null
        },
        {
          "path": "opencode/skill/bonfire-context/SKILL.md",
          "type": "blob",
          "size": 1775
        },
        {
          "path": "opencode/tool",
          "type": "tree",
          "size": null
        },
        {
          "path": "opencode/tool/bonfire.ts",
          "type": "blob",
          "size": 2664
        },
        {
          "path": "packages",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/opencode-bonfire",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/opencode-bonfire/.gitignore",
          "type": "blob",
          "size": 103
        },
        {
          "path": "packages/opencode-bonfire/README.md",
          "type": "blob",
          "size": 2347
        },
        {
          "path": "packages/opencode-bonfire/package.json",
          "type": "blob",
          "size": 1020
        },
        {
          "path": "packages/opencode-bonfire/src",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/opencode-bonfire/src/cli.ts",
          "type": "blob",
          "size": 4742
        }
      ],
      "marketplace": {
        "name": "vieko",
        "version": null,
        "description": null,
        "owner_info": {
          "name": "Vieko Franetovic",
          "email": "hello@vieko.dev"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "bonfire",
            "description": "Claude Code forgets everything between sessions. Bonfire remembers.",
            "source": "./",
            "category": "productivity",
            "version": "1.0.1",
            "author": {
              "name": "Vieko Franetovic"
            },
            "install_commands": [
              "/plugin marketplace add vieko/bonfire",
              "/plugin install bonfire@vieko"
            ],
            "signals": {
              "stars": 4,
              "forks": 0,
              "pushed_at": "2026-01-12T20:00:55Z",
              "created_at": "2025-12-23T05:09:19Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/archive",
                "description": "Archive completed session work",
                "path": "claude/commands/archive.md",
                "frontmatter": {
                  "description": "Archive completed session work",
                  "allowed-tools": "Bash(git:*), Bash(linear:*), Read, Write, Glob",
                  "model": "haiku"
                },
                "content": "# Archive Session\n\n## Step 1: Find Git Root\n\nRun `git rev-parse --show-toplevel` to locate the repository root.\n\n## Step 2: Review Completed Work\n\nRead `<git-root>/.bonfire/index.md` and identify completed work:\n- Sessions with merged PRs\n- Completed features/tasks\n- Work that's no longer active\n\n## Step 3: Create Archive Entry\n\nMove completed session content to `<git-root>/.bonfire/archive/`.\n\n**Naming convention**: `YYYY-MM-DD-<issue-id>-<topic>.md`\n\nExamples:\n- `2025-12-22-GTMENG-387-inbound-improvements.md` (with issue ID)\n- `2025-12-22-fix-login-redirect.md` (without issue ID)\n\nUse this template:\n```markdown\n# [TOPIC]\n\n**Date**: [DATE]\n**Issue**: [ISSUE-ID or N/A]\n**PR**: [PR link if available]\n**Status**: Completed\n\n---\n\n## Summary\n\n[Brief description of what was accomplished]\n\n## Accomplished\n\n- [List of completed items]\n\n## Decisions Made\n\n- [Key decisions and rationale]\n\n## Impact\n\n- [Before/after metrics if applicable]\n- Files changed: [count]\n\n## Related\n\n- [Links to related docs, specs, or code]\n```\n\n## Step 4: Clean Up Index\n\nUpdate `<git-root>/.bonfire/index.md`:\n- Remove archived session entries from Recent Sessions\n- Keep Current State focused on active work\n- Update Next Session Priorities\n- Add link to archive file in Archived Sessions section:\n  ```markdown\n  ## Archived Sessions\n\n  - [YYYY-MM-DD - Topic](archive/YYYY-MM-DD-issue-topic.md)\n  ```\n\n## Step 5: Clean Up Specs (if applicable)\n\nRead `specsLocation` from `<git-root>/.bonfire/config.json` (default `.bonfire/specs/`).\n\nCheck if any specs in the configured location are now complete:\n- If the spec was fully implemented, delete the spec file (archive has the record)\n- If the spec has reusable reference material, move that content to `docs/` first\n\n## Step 6: Update Linear Issue (if applicable)\n\nRead `<git-root>/.bonfire/config.json` and check `linearEnabled`.\n\n**If `linearEnabled` is true**:\n\n1. Check if archived work references a Linear issue (look in session context for `[A-Z]+-[0-9]+` pattern)\n2. If Linear issue found, ask user: \"Mark Linear issue [ISSUE-ID] as Done?\"\n3. If user confirms:\n   - Use linear-cli to update the issue:\n     ```bash\n     linear issue update ENG-123 --state \"Done\"\n     ```\n   - Optionally add a comment with link to archive/PR:\n     ```bash\n     linear issue comment add ENG-123 -b \"Archived: [link]\"\n     ```\n4. On failure: Warn user - \"Couldn't update Linear issue. You may need to update it manually.\"\n\nNote: Run `linear issue update --help` to see available options.\n\n**If `linearEnabled` is false or not set**: Skip this step.\n\n## Step 7: Commit Archive (if tracked)\n\nRead `gitStrategy` from `<git-root>/.bonfire/config.json`.\n\n**If gitStrategy is \"ignore-all\"**: Skip committing - archive is local only.\n\n**If gitStrategy is \"hybrid\" or \"commit-all\"**:\n1. **NEVER use `git add -f`** - respect gitignore\n2. Stage unignored files:\n   ```bash\n   git add .bonfire/\n   ```\n3. Check if anything was staged before committing:\n   ```bash\n   git diff --cached --quiet .bonfire/ || git commit -m \"docs: archive completed session work\"\n   ```\n\n## Step 8: Confirm\n\nReport:\n- What was archived\n- Any specs cleaned up\n- Current state of index.md\n- Ready for next session"
              },
              {
                "name": "/configure",
                "description": "Change project settings (locations, git strategy, Linear)",
                "path": "claude/commands/configure.md",
                "frontmatter": {
                  "description": "Change project settings (locations, git strategy, Linear)",
                  "allowed-tools": "Bash(git:*), Read, Write, AskUserQuestion",
                  "model": "haiku"
                },
                "content": "# Configure Bonfire\n\nAlways runs interactively - asks all configuration questions regardless of arguments.\n\n## Step 1: Find Git Root\n\nRun `git rev-parse --show-toplevel` to locate the repository root.\n\n## Step 2: Check for Bonfire Directory\n\nIf `<git-root>/.bonfire/` does not exist, tell the user to run `/bonfire:start` first.\n\n## Step 3: Read Current Config\n\nRead `<git-root>/.bonfire/config.json` if it exists to see current settings.\n\n## Step 4: Ask All Configuration Questions\n\nUse AskUserQuestion to ask configuration questions (4 questions, one round):\n\n1. \"Where should specs be saved?\" (Header: \"Specs\")\n   - .bonfire/specs/ (Default) - Keep with session context\n   - specs/ - Project root level\n\n2. \"Where should docs be saved?\" (Header: \"Docs\")\n   - .bonfire/docs/ (Default) - Keep with session context\n   - docs/ - Project root level\n\n3. \"How should `.bonfire/` be handled in git?\" (Header: \"Git\")\n   - ignore-all (Default) - Keep sessions private/local\n   - hybrid - Commit docs/specs, keep notes private\n   - commit-all - Share everything with team\n\n4. \"Enable Linear integration?\" (Header: \"Linear\")\n   - No (Default) - Skip Linear integration\n   - Yes - Fetch/create Linear issues (requires linear-cli)\n\n## Step 5: Update Config\n\n**Completely overwrite** `<git-root>/.bonfire/config.json` with only these fields (do not preserve old fields like `models`):\n\n```json\n{\n  \"specsLocation\": \"<user-answer>\",\n  \"docsLocation\": \"<user-answer>\",\n  \"gitStrategy\": \"<user-answer>\",\n  \"linearEnabled\": <true-or-false>\n}\n```\n\n## Step 6: Update Git Strategy\n\nIf git strategy or locations changed, update `<git-root>/.bonfire/.gitignore`:\n\n**Ignore all**:\n```\n*\n!.gitignore\n```\n\n**Hybrid** (only include dirs that are inside .bonfire/):\n```\n*\n!.gitignore\n```\nIf docsLocation is `.bonfire/docs/`, add:\n```\n!docs/\n!docs/**\n```\nIf specsLocation is `.bonfire/specs/`, add:\n```\n!specs/\n!specs/**\n```\n\n**Commit all**:\n```\ndata/\nscratch/\n```\n\nIf switching FROM commit/hybrid TO ignore:\n- Warn user that existing tracked files will remain tracked\n- Offer to run: `git rm -r --cached .bonfire/`\n\n## Step 7: Confirm\n\nReport:\n- Settings updated\n- Any manual steps needed (git cleanup)\n- New configuration summary"
              },
              {
                "name": "/document",
                "description": "Create documentation about a topic in the codebase",
                "path": "claude/commands/document.md",
                "frontmatter": {
                  "description": "Create documentation about a topic in the codebase",
                  "allowed-tools": "Read, Write, Bash(git:*), Task"
                },
                "content": "# Document Topic\n\nCreate reference documentation using subagent for research, preserving main context.\n\n## Step 1: Find Git Root\n\nRun `git rev-parse --show-toplevel` to locate the repository root.\n\n## Step 2: Check Config\n\nRead `<git-root>/.bonfire/config.json` if it exists.\n\n**Docs location**: Read `docsLocation` from config. Default to `.bonfire/docs/` if not set.\n\n## Step 3: Understand the Topic\n\nThe topic to document is: $ARGUMENTS\n\nIf no topic provided, ask the user what they want documented.\n\n## Step 4: Explore the Codebase (Subagent)\n\n**Progress**: Tell the user \"Exploring codebase for [TOPIC]...\"\n\nUse the Task tool to invoke the **codebase-explorer** subagent for research.\n\nProvide a research directive:\n\n```\nResearch the codebase to document: [TOPIC]\n\nFind:\n1. **Architecture**: How this system/feature is structured, key components\n2. **Key Files**: Important files and their roles\n3. **Flow**: How data/control flows through the system\n4. **Patterns**: Design patterns and conventions used\n5. **Gotchas**: Important details, edge cases, things to watch out for\n\nReturn structured findings with file paths and brief descriptions.\n```\n\n**Wait for the subagent to return findings** before proceeding.\n\nThe subagent runs in isolated context (haiku model, fast), preserving main context for writing.\n\n### Exploration Validation\n\nAfter the subagent returns, validate the response:\n\n**Valid response contains at least one of:**\n- `## Architecture` or `## Patterns Found` with content\n- `## Key Files` with entries\n- `## Flow` or `## Gotchas` with items\n\n**On valid response**: Proceed to Step 5.\n\n**On invalid/empty response**:\n1. Warn user: \"Codebase exploration returned limited results. I'll research directly.\"\n2. Fall back to in-context research:\n   - `Glob(\"**/*[topic-related]*\")` to find relevant files\n   - `Grep(\"topic-keywords\")` to find implementations\n   - Read identified files\n3. Continue to Step 5 with in-context findings.\n\n**On subagent failure** (timeout, error):\n1. Warn user: \"Subagent exploration failed. Continuing with direct research.\"\n2. Perform in-context research as above.\n3. Continue to Step 5.\n\n### Resumable Exploration (Large Codebases)\n\nFor very large codebases, exploration may need multiple passes. The Task tool returns an `agentId` you can use to resume.\n\n**When to offer resume:**\n- Subagent returns with \"X additional items omitted\" notes\n- Findings cover only part of the topic (e.g., found architecture but not flows)\n- User asks for deeper exploration of a specific aspect\n\n**To resume exploration:**\n1. Tell user: \"Exploration found [X] but there's more to document. Continue exploring [specific aspect]?\"\n2. If yes, re-invoke codebase-explorer with the `resume` parameter:\n   - Pass the agentId from the previous invocation\n   - Provide a refined directive: \"Continue exploring: [specific aspect]. Focus on [what to find].\"\n3. Merge findings from resumed exploration with previous findings.\n4. Repeat if needed, up to 3 passes maximum.\n\n**Example multi-pass scenario:**\n- Pass 1: \"Document payment system\" → finds payment service, stripe integration\n- Pass 2 (resume): \"Continue exploring: refund handling\" → finds refund logic, webhooks\n- Merge: Combined findings produce more complete documentation\n\n## Step 5: Write Documentation (Subagent)\n\n**Progress**: Tell the user \"Writing documentation...\"\n\n**Naming convention**: `<topic>.md` (kebab-case)\n\nExamples:\n- `inbound-agent-architecture.md`\n- `sampling-strategies.md`\n- `authentication-flow.md`\n\nUse the Task tool to invoke the **doc-writer** subagent.\n\nProvide the prompt in this exact format:\n\n```\n## Research Findings\n\n<paste structured findings from Step 4>\n\n## Doc Metadata\n\n- **Topic**: <topic name>\n- **Output Path**: <git-root>/<docsLocation>/<topic>.md\n- **Date**: <YYYY-MM-DD>\n```\n\nThe subagent will write the doc file directly to the Output Path.\n\n### Doc Verification\n\nAfter the doc-writer subagent returns, verify the doc is complete.\n\n**Key sections to check** (lenient - only these 4):\n- `## Overview`\n- `## Key Files`\n- `## How It Works`\n- `## Gotchas`\n\n**Verification steps:**\n\n1. **Read the doc file** at `<git-root>/<docsLocation>/<topic>.md`\n\n2. **If file missing or empty**:\n   - Warn user: \"Doc file wasn't written. Writing directly...\"\n   - Write the doc yourself using the Write tool\n   - Run verification again on the written file\n\n3. **If file exists, check for key sections**:\n   - Scan content for the 4 section headers above\n   - Track which sections are present/missing\n\n4. **If all 4 sections present**:\n   - Tell user: \"Doc written and verified (4/4 key sections present).\"\n   - Proceed to Step 6.\n\n5. **If 1-3 sections missing** (partial write):\n   - Warn user: \"Doc appears incomplete. Missing sections: [list missing]\"\n   - Show which sections ARE present\n   - Ask: \"Proceed with partial doc, retry write, or abort?\"\n   - **Proceed**: Continue to Step 6\n   - **Retry**: Re-invoke doc-writer subagent with same input, then verify again\n   - **Abort**: Stop and inform user the incomplete doc file remains at path\n\n6. **If all sections missing but has content**:\n   - Treat as invalid format, trigger fallback write\n   - Write the doc yourself, then verify the written file\n\n**On subagent failure** (timeout, error):\n- Warn user: \"Doc writer failed. Writing doc directly...\"\n- Write the doc yourself using the Write tool\n- Run verification on the written file\n\n## Step 5: Link to Session Context\n\nAdd a reference to the doc in `<git-root>/.bonfire/index.md` under Key Resources or Notes.\n\n## Step 6: Confirm\n\nSummarize what was documented and ask if the user wants:\n- More detail on any section\n- Related topics documented\n- To proceed with other work"
              },
              {
                "name": "/end",
                "description": "End session - update context and commit changes",
                "path": "claude/commands/end.md",
                "frontmatter": {
                  "description": "End session - update context and commit changes",
                  "allowed-tools": "Bash(git:*), Read, Write, Glob, AskUserQuestion",
                  "model": "haiku"
                },
                "content": "# End Session\n\n## Step 1: Find Git Root\n\nRun `git rev-parse --show-toplevel` to locate the repository root.\n\n## Step 2: Review Session Work\n\nReview what was accomplished this session by examining:\n- Recent git commits\n- Files changed\n- Conversation context\n\n## Step 3: Update Session Context\n\nUpdate `<git-root>/.bonfire/index.md`:\n\n1. Update the session entry with:\n   - **Accomplished**: List what was completed\n   - **Decisions**: Key decisions made and rationale\n   - **Files Modified**: Important files changed (if relevant)\n   - **Blockers**: Any issues encountered\n\n2. Update \"Next Session Priorities\" based on remaining work\n\n3. Update \"Current State\" to reflect new status\n\n## Step 4: Commit Changes (if tracked)\n\nRead `<git-root>/.bonfire/config.json` to check `gitStrategy`.\n\n**If gitStrategy is \"ignore-all\"**: Skip committing - nothing is tracked. Tell the user session context was updated locally.\n\n**If gitStrategy is \"hybrid\" or \"commit-all\"**:\n\n1. **Check what can be staged**: Run `git status .bonfire/` to see what files are not ignored\n2. **NEVER use `git add -f`** - if a file is gitignored, respect that\n3. **Stage only unignored files**:\n   ```bash\n   git add .bonfire/\n   ```\n4. **Check if anything was staged**: Run `git diff --cached --quiet .bonfire/`\n   - If nothing staged (exit code 0), tell user \"Session context updated locally (files are gitignored)\"\n   - If changes staged, commit:\n     ```bash\n     git commit -m \"docs: update session context\"\n     ```\n\nIf the commit fails due to hooks, help resolve the issue (but never bypass hooks with `--no-verify`).\n\n## Step 5: Confirm\n\nSummarize:\n- What was documented\n- Next priorities\n- Any follow-up needed\n\nLet the user know they can run `/bonfire:archive` when this work is merged and complete."
              },
              {
                "name": "/git-strategy",
                "description": "Change how .bonfire/ is handled in git",
                "path": "claude/commands/git-strategy.md",
                "frontmatter": {
                  "description": "Change how .bonfire/ is handled in git",
                  "allowed-tools": "Bash(git:*), Read, Write, AskUserQuestion",
                  "model": "haiku"
                },
                "content": "# Change Git Strategy\n\n## Step 1: Find Git Root\n\nRun `git rev-parse --show-toplevel` to locate the repository root.\n\n## Step 2: Read Current Config\n\nRead `<git-root>/.bonfire/config.json` to check current `specsLocation` and `docsLocation` settings.\n\n## Step 3: Explain Options\n\nPresent the git strategy options:\n\n1. **Ignore all** - Keep sessions completely local\n   - Everything in .bonfire/ is gitignored\n   - Most private, nothing shared\n   - Good for: solo work, sensitive projects\n\n2. **Hybrid** - Commit docs/specs, keep notes private\n   - docs/ and specs/ are committed\n   - index.md and archive/ stay local\n   - Good for: teams that want shared docs but private notes\n\n3. **Commit all** - Share everything with team\n   - All session content is committed\n   - Only data/ and scratch/ ignored\n   - Good for: full transparency, team continuity\n\n## Step 4: Get User Choice\n\nUse AskUserQuestion to ask which strategy:\n\n\"Which git strategy for `.bonfire/`?\" (Header: \"Git\")\n- ignore-all (Recommended) - Keep sessions private/local\n- hybrid - Commit docs/specs, keep notes private\n- commit-all - Share everything with team\n\n## Step 5: Update .gitignore\n\nWrite the appropriate `.gitignore` to `<git-root>/.bonfire/.gitignore`:\n\n**Ignore all**:\n```\n*\n!.gitignore\n```\n\n**Hybrid** (only include dirs that are inside .bonfire/):\n```\n*\n!.gitignore\n```\nIf docsLocation is `.bonfire/docs/`, add:\n```\n!docs/\n!docs/**\n```\nIf specsLocation is `.bonfire/specs/`, add:\n```\n!specs/\n!specs/**\n```\n\n**Commit all**:\n```\ndata/\nscratch/\n```\n\n## Step 6: Handle Git Tracking\n\nIf switching FROM commit/hybrid TO ignore:\n- Warn user that existing tracked files will remain tracked\n- Offer to run: `git rm -r --cached .bonfire/` (removes from git but keeps files)\n- They'll need to commit this change\n\nIf switching TO commit/hybrid:\n- Files will be picked up on next commit\n- No special action needed\n\n## Step 7: Confirm\n\nReport:\n- New strategy applied\n- Any manual steps needed\n- How to verify the change"
              },
              {
                "name": "/review",
                "description": "Review work for blindspots, gaps, and improvements",
                "path": "claude/commands/review.md",
                "frontmatter": {
                  "description": "Review work for blindspots, gaps, and improvements",
                  "allowed-tools": "Bash(git:*), Bash(gh:*), Bash(linear:*), Read, Write, Task"
                },
                "content": "# Review Work\n\nStrategic review using subagent for analysis, preserving main context for action decisions.\n\n## Step 1: Determine Scope\n\nBased on $ARGUMENTS:\n- No args: Review current branch vs base\n- `--session`: Review work captured in current session context\n- Topic/area: Focus review on specific aspect\n\n## Step 2: Gather Context\n\n- Read session context from `<git-root>/.bonfire/index.md`\n- Get branch diff: `git diff main...HEAD` (or appropriate base)\n- Read relevant specs/docs from `.bonfire/`\n- Understand intent: what were we trying to accomplish?\n\n## Step 3: Run Review (Subagent)\n\n**Progress**: Tell the user \"Reviewing work for blindspots and gaps...\"\n\nUse the Task tool to invoke the **work-reviewer** subagent.\n\nProvide the review context:\n\n```\nReview this work for blindspots, gaps, and improvements.\n\n**Scope**: [Branch diff / session work / specific area]\n\n**Intent**: [What we were trying to accomplish - from session context]\n\n**Files changed**:\n[List of modified files from git diff]\n\n**Session context**:\n[Relevant notes from index.md]\n\nReturn categorized findings with severity and effort estimates.\n```\n\n**Wait for the subagent to return findings** before proceeding.\n\nThe subagent runs in isolated context (sonnet model), preserving main context for action decisions.\n\n### Review Validation\n\nAfter the subagent returns, validate the response:\n\n**Valid response contains:**\n- `## Summary` with finding counts\n- At least one of: `## Fix Now`, `## Needs Spec`, or `## Create Issues`\n\n**On valid response**: Proceed to Step 4.\n\n**On partial response** (missing categories but has findings):\n1. Warn user: \"Review returned partial results. Some categories may be missing.\"\n2. Present available findings.\n3. Continue to Step 4.\n\n**On invalid/empty response**:\n1. Warn user: \"Review subagent returned no findings. I'll review directly.\"\n2. Fall back to in-context review:\n   - Read changed files from git diff\n   - Analyze for common issues (missing tests, error handling, etc.)\n   - Check for TODOs and incomplete implementations\n3. Present in-context findings using the same format.\n\n**On subagent failure** (timeout, error):\n1. Warn user: \"Review subagent failed. Continuing with direct review.\"\n2. Perform in-context review as above.\n\n### Resumable Review (Large Changes)\n\nFor large changesets, review may need multiple passes. The Task tool returns an `agentId` you can use to resume.\n\n**When to offer resume:**\n- Review covers many files and user wants deeper analysis of specific area\n- Findings mention \"additional items omitted\" or suggest areas need more attention\n- User wants to focus review on specific aspect (e.g., \"look more at tests\")\n\n**To resume review:**\n1. Tell user: \"Review covered [X]. Want deeper analysis of [specific area]?\"\n2. If yes, re-invoke work-reviewer with the `resume` parameter:\n   - Pass the agentId from the previous invocation\n   - Provide a focused directive: \"Continue review focusing on: [specific area].\"\n3. Merge findings from resumed review with previous findings.\n4. Repeat if needed, up to 3 passes maximum.\n\n**Example multi-pass scenario:**\n- Pass 1: General review → finds 5 issues, notes \"test coverage not analyzed\"\n- Pass 2 (resume): \"Continue review focusing on: test coverage\" → finds 3 more test gaps\n- Merge: Combined findings give complete picture\n\n## Step 4: Present Findings\n\nPresent the subagent's findings grouped by recommended action:\n\n### Fix Now (trivial effort)\n[List items from subagent that can be fixed immediately]\n\n> Ask: \"Want me to fix these now?\"\n\n### Needs Spec (important, needs planning)\n[List items that need implementation planning]\n\n> Ask: \"Want me to create an implementation spec?\"\n\n### Create Issues (large effort or nice-to-have)\n[List items for future sessions]\n\n> Ask: \"Want me to create GitHub/Linear issues?\"\n\n## Step 5: Execute Chosen Action\n\nBased on user choice:\n- **Fix now**: Make the changes directly\n- **Spec**: Run `/bonfire:spec` with findings\n- **Create issues**: See below\n\n### Creating Issues\n\nFirst, read `<git-root>/.bonfire/config.json` and check `linearEnabled`.\n\n**Offer choices based on config:**\n- Always offer: \"Create GitHub issue\"\n- If `linearEnabled` is true: Also offer \"Create Linear issue\"\n\n**GitHub Issue Creation:**\n```bash\ngh issue create --title \"Finding title\" --body \"Finding details\"\n```\n\n**Linear Issue Creation (if enabled):**\n1. Use linear-cli to create the issue:\n   ```bash\n   linear issue create --title \"Finding title\" --description \"Finding details\"\n   ```\n2. On success: Return issue URL/ID\n3. On failure: Warn user, offer to create GitHub issue instead\n\nNote: Run `linear issue create --help` to see available options (team, priority, labels, etc.).\n\n**For each created issue:**\n- Record the issue ID and URL\n- Note which tracker (GitHub/Linear) was used\n\n## Step 6: Update Session Context\n\nAdd review outcomes to `<git-root>/.bonfire/index.md`:\n- Key findings noted\n- Issues created (with links)\n- Work deferred to future sessions"
              },
              {
                "name": "/spec",
                "description": "Create an implementation spec for a feature or task",
                "path": "claude/commands/spec.md",
                "frontmatter": {
                  "description": "Create an implementation spec for a feature or task",
                  "allowed-tools": "Read, Write, Bash(git:*), AskUserQuestion, Task"
                },
                "content": "# Create Implementation Spec\n\nA hybrid approach using subagents: research in isolated context, interview in main context, write in isolated context.\n\n## Step 1: Find Git Root\n\nRun `git rev-parse --show-toplevel` to locate the repository root.\n\n## Step 2: Check Config\n\nRead `<git-root>/.bonfire/config.json` if it exists.\n\n**Specs location**: Read `specsLocation` from config. Default to `.bonfire/specs/` if not set.\n\n## Step 3: Gather Initial Context\n\nGet the topic from $ARGUMENTS or ask if unclear.\n\nCheck for existing context:\n- Read `<git-root>/.bonfire/index.md` for project state\n- Check for `SPEC.md` or `spec.md` in git root (user's spec template)\n- If issue ID provided, note for filename\n\n## Step 4: Research Phase (Subagent)\n\n**Progress**: Tell the user \"Researching codebase for patterns and constraints...\"\n\nUse the Task tool to invoke the **codebase-explorer** subagent for research.\n\nProvide a research directive with these questions:\n\n```\nResearch the codebase for implementing: [TOPIC]\n\nFind:\n1. **Patterns**: How similar features are implemented, existing abstractions to reuse, naming conventions\n2. **Constraints**: Dependencies, API boundaries, performance considerations\n3. **Potential Conflicts**: Files that need changes, intersections with existing code, migration concerns\n\nReturn structured findings only - no raw file contents.\n```\n\n**Wait for the subagent to return findings** before proceeding.\n\nThe subagent runs in isolated context (haiku model, fast), preserving main context for interview.\n\n### Research Validation\n\nAfter the subagent returns, validate the response:\n\n**Valid response contains at least one of:**\n- `## Patterns Found` with content\n- `## Key Files` with entries\n- `## Constraints Discovered` with items\n\n**On valid response**: Proceed to Step 5.\n\n**On invalid/empty response**:\n1. Warn user: \"Codebase exploration returned limited results. I'll research directly.\"\n2. Fall back to in-context research using Glob, Grep, and Read:\n   - Search for patterns: `Glob(\"**/*.{ts,js,py,go}\")` to find code files\n   - Look for similar implementations: `Grep(\"pattern-keyword\")`\n   - Read key files identified\n3. Continue to Step 5 with in-context findings.\n\n**On subagent failure** (timeout, error):\n1. Warn user: \"Subagent research failed. Continuing with direct exploration.\"\n2. Perform in-context research as above.\n3. Continue to Step 5.\n\n### Resumable Exploration (Large Codebases)\n\nFor very large codebases, exploration may need multiple passes. The Task tool returns an `agentId` you can use to resume.\n\n**When to offer resume:**\n- Subagent returns with \"X additional items omitted\" notes\n- Findings cover only part of the codebase (e.g., backend but not frontend)\n- User asks for deeper exploration of a specific area\n\n**To resume exploration:**\n1. Tell user: \"Exploration found [X] but there's more to explore. Continue exploring [specific area]?\"\n2. If yes, re-invoke codebase-explorer with the `resume` parameter:\n   - Pass the agentId from the previous invocation\n   - Provide a refined directive: \"Continue exploring: [specific area]. Focus on [what to find].\"\n3. Merge findings from resumed exploration with previous findings.\n4. Repeat if needed, up to 3 passes maximum.\n\n**Example multi-pass scenario:**\n- Pass 1: \"Research authentication\" → finds auth middleware, auth service\n- Pass 2 (resume): \"Continue exploring: authorization rules\" → finds permissions, role checks\n- Merge: Combined findings inform better interview questions\n\n## Step 5: Interview Phase (Main Context)\n\n**Progress**: Tell the user \"Starting interview (3 rounds: core decisions, edge cases, testing & scope)...\"\n\nUsing the research findings, interview the user with **informed questions** via AskUserQuestion.\n\n### Round 1: Core Decisions\n\n**Progress**: \"Round 1/3: Core decisions...\"\n\nAsk about fundamental approach based on patterns found:\n\nExample questions (adapt based on actual findings):\n- \"I found [Pattern A] in `services/` and [Pattern B] in `handlers/`. Which pattern should this feature follow?\"\n- \"The existing [Component] handles [X]. Should we extend it or create a new [Y]?\"\n- \"I see [Library] is used for [purpose]. Should we use it here or try [Alternative]?\"\n\n### Round 2: Edge Cases & Tradeoffs\n\n**Progress**: \"Round 2/3: Edge cases and tradeoffs...\"\n\nBased on Round 1 answers and research, ask about:\n- Error handling approach\n- Edge cases identified in research\n- Performance vs simplicity tradeoffs\n- User experience considerations\n\nExample questions:\n- \"What should happen when [edge case from research]?\"\n- \"I found [potential conflict]. How should we handle it?\"\n- \"[Approach A] is simpler but [tradeoff]. [Approach B] is more complex but [benefit]. Preference?\"\n\n### Round 3: Testing & Scope (Required)\n\n**Progress**: \"Round 3/3: Testing and scope (final round)...\"\n\nAlways ask about testing and scope, even if user seems ready to proceed:\n\n**Testing** (must ask one):\n- \"What's the testing approach? Unit tests, integration tests, manual testing, or skip tests for MVP?\"\n- \"Should this include tests? If so, what should be covered?\"\n\n**Scope** (must ask one):\n- \"What's explicitly out of scope for this implementation?\"\n- \"MVP vs full implementation - any features to defer?\"\n\nExample combined question:\n- \"Two quick questions: (1) Testing approach for this feature? (2) Anything explicitly out of scope?\"\n\n**Do not skip Round 3.** These questions take 30 seconds and prevent spec gaps.\n\n## Step 6: Write the Spec (Subagent)\n\n**Progress**: Tell the user \"Writing implementation spec...\"\n\nUse the Task tool to invoke the **spec-writer** subagent.\n\nProvide the prompt in this exact format:\n\n```\n## Research Findings\n\n<paste structured findings from Step 4>\n\n## Interview Q&A\n\n### Core Decisions\n**Q**: <question from Round 1>\n**A**: <user's answer>\n\n### Edge Cases & Tradeoffs\n**Q**: <question from Round 2>\n**A**: <user's answer>\n\n### Scope & Boundaries\n**Q**: <question from Round 3>\n**A**: <user's answer>\n\n## Spec Metadata\n\n- **Topic**: <topic name>\n- **Issue**: <issue ID or N/A>\n- **Output Path**: <git-root>/<specsLocation>/<filename>.md\n- **Date**: <YYYY-MM-DD>\n```\n\nThe subagent will write the spec file directly to the Output Path.\n\n**Naming convention**: `<issue-id>-<topic>.md` or `<topic>.md`\n\n### Spec Verification\n\nAfter the spec-writer subagent returns, verify the spec is complete.\n\n**Key sections to check** (lenient - only these 4):\n- `## Overview`\n- `## Decisions`\n- `## Implementation Steps`\n- `## Edge Cases`\n\n**Verification steps:**\n\n1. **Read the spec file** at `<git-root>/<specsLocation>/<filename>.md`\n\n2. **If file missing or empty**:\n   - Warn user: \"Spec file wasn't written. Writing directly...\"\n   - Write the spec yourself using the Write tool\n   - Run verification again on the written file\n\n3. **If file exists, check for key sections**:\n   - Scan content for the 4 section headers above\n   - Track which sections are present/missing\n\n4. **If all 4 sections present**:\n   - Tell user: \"Spec written and verified (4/4 key sections present).\"\n   - Proceed to Step 7.\n\n5. **If 1-3 sections missing** (partial write):\n   - Warn user: \"Spec appears incomplete. Missing sections: [list missing]\"\n   - Show which sections ARE present\n   - Ask: \"Proceed with partial spec, retry write, or abort?\"\n   - **Proceed**: Continue to Step 7\n   - **Retry**: Re-invoke spec-writer subagent with same input, then verify again\n   - **Abort**: Stop and inform user the incomplete spec file remains at path\n\n6. **If all sections missing but has content**:\n   - Treat as invalid format, trigger fallback write\n   - Write the spec yourself, then verify the written file\n\n**On subagent failure** (timeout, error):\n- Warn user: \"Spec writer failed. Writing spec directly...\"\n- Write the spec yourself using the Write tool\n- Run verification on the written file\n\n## Step 7: Link to Session Context\n\nAdd a reference to the spec in `<git-root>/.bonfire/index.md` under Current State.\n\n## Step 8: Confirm\n\nRead the generated spec and present a summary. Ask if user wants to:\n- Proceed with implementation\n- Refine specific sections\n- Add more detail to any area\n- Save for later\n\n## Interview Tips\n\n**Good questions are:**\n- Informed by research (not generic)\n- About tradeoffs (not yes/no)\n- Specific to the codebase\n- Non-obvious (user wouldn't think to mention)\n\n**Bad questions:**\n- \"What features do you want?\" (too broad)\n- \"Should we add error handling?\" (obvious)\n- Generic without codebase context\n\n**Examples of good informed questions:**\n- \"I found `UserService` uses repository pattern but `OrderService` uses direct DB access. Which approach?\"\n- \"The `auth` middleware validates JWT but doesn't check permissions. Should this feature add permission checks or assume auth is enough?\"\n- \"There's a `BaseController` with shared logic. Extend it or keep this feature standalone?\"\n\n## Spec Lifecycle\n\nSpecs are **temporary artifacts** - they exist to guide implementation:\n\n1. **Draft** → Created, ready for review\n2. **In Progress** → Being implemented\n3. **Completed** → Implementation done\n\n**When a spec is fully implemented**:\n- If it contains reusable reference material, move to `docs/`\n- Delete the spec file - archive has the record\n- Don't let specs accumulate"
              },
              {
                "name": "/start",
                "description": "Start a new session - reads context and scaffolds .bonfire/ if needed",
                "path": "claude/commands/start.md",
                "frontmatter": {
                  "description": "Start a new session - reads context and scaffolds .bonfire/ if needed",
                  "allowed-tools": "Bash(git:*), Bash(gh:*), Bash(mkdir:*), Bash(linear:*), Read, Write, Glob, AskUserQuestion",
                  "model": "haiku"
                },
                "content": "# Start Session\n\n## Step 1: Find Git Root\n\nRun `git rev-parse --show-toplevel` to locate the repository root. All session files live at `<git-root>/.bonfire/`.\n\n## Step 2: Check for Bonfire Directory\n\nCheck if `<git-root>/.bonfire/index.md` exists.\n\n**If .bonfire/ does NOT exist**, scaffold it:\n\n1. Tell the user: \"No bonfire directory found. Let me set that up for you.\"\n\n2. Use AskUserQuestion to ask setup questions (4 questions, one round):\n\n   1. \"Where should specs be saved?\" (Header: \"Specs\")\n      - .bonfire/specs/ (Default) - Keep with session context\n      - specs/ - Project root level\n\n   2. \"Where should docs be saved?\" (Header: \"Docs\")\n      - .bonfire/docs/ (Default) - Keep with session context\n      - docs/ - Project root level\n\n   3. \"How should `.bonfire/` be handled in git?\" (Header: \"Git\")\n      - ignore-all (Default) - Keep sessions private/local\n      - hybrid - Commit docs/specs, keep notes private\n      - commit-all - Share everything with team\n\n   4. \"Enable Linear integration?\" (Header: \"Linear\")\n      - No (Default) - Skip Linear integration\n      - Yes - Fetch/create Linear issues (requires linear-cli)\n\n3. Create the directory structure based on user choices:\n\n   **Always create in .bonfire/**:\n   ```\n   .bonfire/\n   ├── index.md\n   ├── config.json\n   ├── archive/\n   └── .gitignore\n   ```\n\n   **If specsLocation is `.bonfire/specs/`**: create `.bonfire/specs/`\n   **If specsLocation is `specs/`**: create `<git-root>/specs/`\n\n   **If docsLocation is `.bonfire/docs/`**: create `.bonfire/docs/`\n   **If docsLocation is `docs/`**: create `<git-root>/docs/`\n\n4. Detect project name from: package.json name → git remote → directory name\n\n5. Create `config.json` with user's answers:\n   ```json\n   {\n     \"specsLocation\": \"<user-answer>\",\n     \"docsLocation\": \"<user-answer>\",\n     \"gitStrategy\": \"<user-answer>\",\n     \"linearEnabled\": <true-or-false>\n   }\n   ```\n\n6. Create `index.md` with template:\n   ```markdown\n   # Session Context: [PROJECT_NAME]\n\n   **Date**: [CURRENT_DATE]\n   **Status**: Active\n   **Branch**: main\n\n   ---\n\n   ## Current State\n\n   [Describe what you're working on]\n\n   ---\n\n   ## Recent Sessions\n\n   ### Session 1 - [CURRENT_DATE]\n\n   **Goal**: [What you want to accomplish]\n\n   **Accomplished**:\n   - [List completed items]\n\n   **Decisions**:\n   - [Key decisions made]\n\n   **Blockers**: None\n\n   ---\n\n   ## Next Session Priorities\n\n   1. [Priority items]\n\n   ---\n\n   ## Key Resources\n\n   **Code References**:\n   - [Component/feature]: `path/to/file.ts`\n\n   **External Links**:\n   - [Issue Tracker](url)\n\n   ---\n\n   ## Archived Sessions\n\n   [Links to archived sessions will appear here]\n\n   ---\n\n   ## Notes\n\n   [Any additional context]\n   ```\n\n7. Create `.gitignore` based on chosen strategy and locations:\n\n   **Ignore all**:\n   ```\n   *\n   !.gitignore\n   ```\n\n   **Hybrid** (only include dirs that are inside .bonfire/):\n   ```\n   *\n   !.gitignore\n   ```\n   If docsLocation is `.bonfire/docs/`, add:\n   ```\n   !docs/\n   !docs/**\n   ```\n   If specsLocation is `.bonfire/specs/`, add:\n   ```\n   !specs/\n   !specs/**\n   ```\n\n   **Commit all**:\n   ```\n   data/\n   scratch/\n   ```\n\n**If .bonfire/ EXISTS**, proceed to Step 3.\n\n## Step 3: Check/Update CLAUDE.md\n\nCheck if `<git-root>/CLAUDE.md` exists.\n\n**If CLAUDE.md does NOT exist**, create it:\n```markdown\n# [PROJECT_NAME]\n\n## Quick Context\n\nRead `.bonfire/index.md` for current project state, recent work, and priorities.\n\n## Bonfire Commands\n\n- `/bonfire:start` - Start a session (reads context)\n- `/bonfire:end` - End session (updates context)\n- `/bonfire:spec` - Create implementation spec\n- `/bonfire:document <topic>` - Document a topic\n- `/bonfire:review` - Review work for blindspots and improvements\n- `/bonfire:archive` - Archive completed work\n- `/bonfire:configure` - Change project settings\n```\n\n**If CLAUDE.md EXISTS**, check if it references `.bonfire/index.md`. If not, append:\n```markdown\n\n## Session Context\n\nRead `.bonfire/index.md` for current project state, recent work, and priorities.\n```\n\n## Step 4: Read Session Context\n\nRead `<git-root>/.bonfire/index.md` and report when ready.\n\nSummarize:\n- Current state\n- Recent work\n- Next priorities\n\nThen ask: \"What do you want to work on this session?\"\n\n## Step 5: Fetch External Context (Optional)\n\n**Only fetch if user provides a new URL or issue ID:**\n\n### Detecting Issue Type\n\n- **GitHub**: Starts with `#`, contains `github.com`, or doesn't match Linear pattern\n- **Linear**: Matches `[A-Z]+-[0-9]+` pattern (e.g., `ENG-123`, `ABC-456`) or contains `linear.app`\n\n### GitHub Issues/PRs\n\nUse `gh` CLI:\n- `gh pr view [URL] --json title,body,state,labels`\n- `gh issue view [URL] --json title,body,state,labels`\n\n### Linear Issues\n\nFirst, read `<git-root>/.bonfire/config.json` and check `linearEnabled`.\n\n**If `linearEnabled` is false or not set**: Skip Linear, treat as ad-hoc task.\n\n**If `linearEnabled` is true**:\n1. Use linear-cli to fetch the issue:\n   ```bash\n   linear issue view ENG-123\n   ```\n2. Extract: title, description, state, priority, labels, assignee\n3. On success: Summarize the issue context\n4. On failure: Warn user - \"Couldn't fetch Linear issue. Is linear-cli installed and authenticated? Continue without issue context?\"\n\nNote: Run `linear issue view --help` to see available options.\n\n### Update Session Context\n\nIf issue was fetched successfully:\n- Add reference to `index.md` under Current State\n- Include issue ID, title, and link\n- Note the issue tracker type (GitHub/Linear)\n\n### Fallback\n\nIf no URL/issue ID provided (continuing work, ad-hoc task):\n- Proceed with existing session context\n- Session notes are the source of truth for ongoing work\n\nConfirm understanding and ask how to proceed."
              }
            ],
            "skills": []
          }
        ]
      }
    }
  ]
}