{
  "owner": {
    "id": "IvanTorresEdge",
    "display_name": "Ivan Torres",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/915649?u=9eaa80b59f6f34676ff4c6453bdced21405b3466&v=4",
    "url": "https://github.com/IvanTorresEdge",
    "bio": "Ops Lead, King Protocol â€” AlphaGrowth",
    "stats": {
      "total_repos": 1,
      "total_plugins": 10,
      "total_commands": 115,
      "total_skills": 127,
      "total_stars": 0,
      "total_forks": 1
    }
  },
  "repos": [
    {
      "full_name": "IvanTorresEdge/molcajete.ai",
      "url": "https://github.com/IvanTorresEdge/molcajete.ai",
      "description": null,
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 1,
        "pushed_at": "2026-01-06T21:16:55Z",
        "created_at": "2025-11-13T04:11:22Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 2304
        },
        {
          "path": ".claude",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/settings.json",
          "type": "blob",
          "size": 80
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 259
        },
        {
          "path": ".molcajete",
          "type": "tree",
          "size": null
        },
        {
          "path": ".molcajete/.gitignore",
          "type": "blob",
          "size": 93
        },
        {
          "path": ".molcajete/README.md",
          "type": "blob",
          "size": 1805
        },
        {
          "path": ".molcajete/prd",
          "type": "tree",
          "size": null
        },
        {
          "path": ".molcajete/prd/PRD.md",
          "type": "blob",
          "size": 5782
        },
        {
          "path": ".molcajete/prd/mission.md",
          "type": "blob",
          "size": 4150
        },
        {
          "path": ".molcajete/prd/roadmap.md",
          "type": "blob",
          "size": 8002
        },
        {
          "path": ".molcajete/prd/specs",
          "type": "tree",
          "size": null
        },
        {
          "path": ".molcajete/prd/specs/20251114-hook-alerts-system",
          "type": "tree",
          "size": null
        },
        {
          "path": ".molcajete/prd/specs/20251114-hook-alerts-system/requirements.md",
          "type": "blob",
          "size": 10416
        },
        {
          "path": ".molcajete/prd/specs/20251114-molcajete_setup_command",
          "type": "tree",
          "size": null
        },
        {
          "path": ".molcajete/prd/specs/20251114-molcajete_setup_command/requirements.md",
          "type": "blob",
          "size": 7639
        },
        {
          "path": ".molcajete/prd/specs/20251114-molcajete_setup_command/spec.md",
          "type": "blob",
          "size": 19930
        },
        {
          "path": ".molcajete/prd/specs/20251114-molcajete_setup_command/tasks.md",
          "type": "blob",
          "size": 10777
        },
        {
          "path": ".molcajete/prd/specs/20251229-atomic_design_pattern",
          "type": "tree",
          "size": null
        },
        {
          "path": ".molcajete/prd/specs/20251229-atomic_design_pattern/requirements.md",
          "type": "blob",
          "size": 10482
        },
        {
          "path": ".molcajete/prd/specs/20251229-atomic_design_pattern/spec.md",
          "type": "blob",
          "size": 56031
        },
        {
          "path": ".molcajete/prd/specs/20251229-atomic_design_pattern/tasks.md",
          "type": "blob",
          "size": 16169
        },
        {
          "path": ".molcajete/prd/specs/20251229-refactor_atomic_design_command",
          "type": "tree",
          "size": null
        },
        {
          "path": ".molcajete/prd/specs/20251229-refactor_atomic_design_command/requirements.md",
          "type": "blob",
          "size": 12524
        },
        {
          "path": ".molcajete/prd/specs/20251229-refactor_atomic_design_command/spec.md",
          "type": "blob",
          "size": 39216
        },
        {
          "path": ".molcajete/prd/specs/20251229-refactor_atomic_design_command/tasks.md",
          "type": "blob",
          "size": 21267
        },
        {
          "path": ".molcajete/prd/specs/20251231-code_quality_enforcement",
          "type": "tree",
          "size": null
        },
        {
          "path": ".molcajete/prd/specs/20251231-code_quality_enforcement/audit.md",
          "type": "blob",
          "size": 4892
        },
        {
          "path": ".molcajete/prd/specs/20251231-code_quality_enforcement/requirements.md",
          "type": "blob",
          "size": 12893
        },
        {
          "path": ".molcajete/prd/specs/20251231-code_quality_enforcement/spec.md",
          "type": "blob",
          "size": 33439
        },
        {
          "path": ".molcajete/prd/specs/20251231-code_quality_enforcement/tasks.md",
          "type": "blob",
          "size": 17220
        },
        {
          "path": ".molcajete/prd/tech-stack.md",
          "type": "blob",
          "size": 8371
        },
        {
          "path": ".molcajete/research",
          "type": "tree",
          "size": null
        },
        {
          "path": ".molcajete/research/atomic-design-pattern-requirements.md",
          "type": "blob",
          "size": 29100
        },
        {
          "path": ".molcajete/research/code-quality-enforcement.md",
          "type": "blob",
          "size": 30102
        },
        {
          "path": "LICENSE",
          "type": "blob",
          "size": 1058
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 16405
        },
        {
          "path": "code-principles",
          "type": "tree",
          "size": null
        },
        {
          "path": "code-principles/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "code-principles/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 677
        },
        {
          "path": "code-principles/README.md",
          "type": "blob",
          "size": 8596
        },
        {
          "path": "code-principles/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "code-principles/skills/code-quality",
          "type": "tree",
          "size": null
        },
        {
          "path": "code-principles/skills/code-quality/SKILL.md",
          "type": "blob",
          "size": 5947
        },
        {
          "path": "code-principles/skills/code-quality/standards",
          "type": "tree",
          "size": null
        },
        {
          "path": "code-principles/skills/code-quality/standards/code-comments.md",
          "type": "blob",
          "size": 7367
        },
        {
          "path": "code-principles/skills/code-quality/standards/documentation.md",
          "type": "blob",
          "size": 9893
        },
        {
          "path": "code-principles/skills/code-quality/standards/test-coverage.md",
          "type": "blob",
          "size": 6953
        },
        {
          "path": "code-principles/skills/feature-slicing",
          "type": "tree",
          "size": null
        },
        {
          "path": "code-principles/skills/feature-slicing/SKILL.md",
          "type": "blob",
          "size": 4458
        },
        {
          "path": "code-principles/skills/feature-slicing/guides",
          "type": "tree",
          "size": null
        },
        {
          "path": "code-principles/skills/feature-slicing/guides/anti-patterns.md",
          "type": "blob",
          "size": 12194
        },
        {
          "path": "code-principles/skills/feature-slicing/guides/feature-workflow.md",
          "type": "blob",
          "size": 11563
        },
        {
          "path": "code-principles/skills/software-principles",
          "type": "tree",
          "size": null
        },
        {
          "path": "code-principles/skills/software-principles/SKILL.md",
          "type": "blob",
          "size": 2739
        },
        {
          "path": "code-principles/skills/software-principles/principles",
          "type": "tree",
          "size": null
        },
        {
          "path": "code-principles/skills/software-principles/principles/DRY.md",
          "type": "blob",
          "size": 9655
        },
        {
          "path": "code-principles/skills/software-principles/principles/KISS.md",
          "type": "blob",
          "size": 9761
        },
        {
          "path": "code-principles/skills/software-principles/principles/SOLID.md",
          "type": "blob",
          "size": 11637
        },
        {
          "path": "code-principles/skills/software-principles/principles/YAGNI.md",
          "type": "blob",
          "size": 11522
        },
        {
          "path": "code-principles/skills/testing-standards",
          "type": "tree",
          "size": null
        },
        {
          "path": "code-principles/skills/testing-standards/SKILL.md",
          "type": "blob",
          "size": 7239
        },
        {
          "path": "code-principles/skills/testing-standards/patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "code-principles/skills/testing-standards/patterns/coverage-guidelines.md",
          "type": "blob",
          "size": 9984
        },
        {
          "path": "code-principles/skills/testing-standards/patterns/test-structure.md",
          "type": "blob",
          "size": 9979
        },
        {
          "path": "code-principles/skills/testing-standards/patterns/testing-pyramid.md",
          "type": "blob",
          "size": 9938
        },
        {
          "path": "defaults",
          "type": "tree",
          "size": null
        },
        {
          "path": "defaults/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "defaults/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 383
        },
        {
          "path": "defaults/README.md",
          "type": "blob",
          "size": 3126
        },
        {
          "path": "defaults/settings.json",
          "type": "blob",
          "size": 523
        },
        {
          "path": "defaults/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "defaults/skills/play-sound",
          "type": "tree",
          "size": null
        },
        {
          "path": "defaults/skills/play-sound/SKILL.md",
          "type": "blob",
          "size": 4507
        },
        {
          "path": "defaults/skills/play-sound/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "defaults/skills/play-sound/scripts/play-sound.py",
          "type": "blob",
          "size": 3885
        },
        {
          "path": "git",
          "type": "tree",
          "size": null
        },
        {
          "path": "git/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "git/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 435
        },
        {
          "path": "git/README.md",
          "type": "blob",
          "size": 9225
        },
        {
          "path": "git/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "git/agents/code-committer.md",
          "type": "blob",
          "size": 3537
        },
        {
          "path": "git/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "git/commands/amend.md",
          "type": "blob",
          "size": 3616
        },
        {
          "path": "git/commands/commit.md",
          "type": "blob",
          "size": 2974
        },
        {
          "path": "git/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "git/skills/commit-standards",
          "type": "tree",
          "size": null
        },
        {
          "path": "git/skills/commit-standards/SKILL.md",
          "type": "blob",
          "size": 2147
        },
        {
          "path": "git/skills/commit-standards/best-practices.md",
          "type": "blob",
          "size": 4874
        },
        {
          "path": "git/skills/commit-standards/examples.md",
          "type": "blob",
          "size": 3458
        },
        {
          "path": "git/skills/commit-standards/message-format.md",
          "type": "blob",
          "size": 3101
        },
        {
          "path": "molcajete",
          "type": "tree",
          "size": null
        },
        {
          "path": "molcajete/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "molcajete/commands/setup.md",
          "type": "blob",
          "size": 6038
        },
        {
          "path": "molcajete/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "molcajete/skills/setup-utils.md",
          "type": "blob",
          "size": 7518
        },
        {
          "path": "prd",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 1006
        },
        {
          "path": "prd/README.md",
          "type": "blob",
          "size": 22764
        },
        {
          "path": "prd/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/agents/feature-analyst.md",
          "type": "blob",
          "size": 3184
        },
        {
          "path": "prd/agents/orchestrator.md",
          "type": "blob",
          "size": 5701
        },
        {
          "path": "prd/agents/product-strategist.md",
          "type": "blob",
          "size": 2516
        },
        {
          "path": "prd/agents/spec-writer.md",
          "type": "blob",
          "size": 3510
        },
        {
          "path": "prd/agents/task-planner.md",
          "type": "blob",
          "size": 4407
        },
        {
          "path": "prd/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/commands/break-task.md",
          "type": "blob",
          "size": 3485
        },
        {
          "path": "prd/commands/create-tasks.md",
          "type": "blob",
          "size": 4231
        },
        {
          "path": "prd/commands/execute-tasks.md",
          "type": "blob",
          "size": 6329
        },
        {
          "path": "prd/commands/plan-product.md",
          "type": "blob",
          "size": 3787
        },
        {
          "path": "prd/commands/scope-feature.md",
          "type": "blob",
          "size": 4358
        },
        {
          "path": "prd/commands/write-spec.md",
          "type": "blob",
          "size": 3695
        },
        {
          "path": "prd/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/skills/create-feature-folder",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/skills/create-feature-folder/SKILL.md",
          "type": "blob",
          "size": 1763
        },
        {
          "path": "prd/skills/product-planning",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/skills/product-planning/SKILL.md",
          "type": "blob",
          "size": 1453
        },
        {
          "path": "prd/skills/product-planning/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/skills/product-planning/templates/mission-template.md",
          "type": "blob",
          "size": 1239
        },
        {
          "path": "prd/skills/product-planning/templates/roadmap-template.md",
          "type": "blob",
          "size": 1410
        },
        {
          "path": "prd/skills/product-planning/templates/tech-stack-template.md",
          "type": "blob",
          "size": 2405
        },
        {
          "path": "prd/skills/spec-writing",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/skills/spec-writing/SKILL.md",
          "type": "blob",
          "size": 2215
        },
        {
          "path": "prd/skills/spec-writing/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/skills/spec-writing/templates/requirements-template.md",
          "type": "blob",
          "size": 3749
        },
        {
          "path": "prd/skills/spec-writing/templates/spec-template.md",
          "type": "blob",
          "size": 7123
        },
        {
          "path": "prd/skills/task-breakdown",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/skills/task-breakdown/SKILL.md",
          "type": "blob",
          "size": 4524
        },
        {
          "path": "prd/skills/task-breakdown/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "prd/skills/task-breakdown/templates/tasks-template.md",
          "type": "blob",
          "size": 3005
        },
        {
          "path": "research",
          "type": "tree",
          "size": null
        },
        {
          "path": "research/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "research/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 693
        },
        {
          "path": "research/README.md",
          "type": "blob",
          "size": 9276
        },
        {
          "path": "research/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "research/agents/fetch-agent.md",
          "type": "blob",
          "size": 910
        },
        {
          "path": "research/agents/local-agent.md",
          "type": "blob",
          "size": 1041
        },
        {
          "path": "research/agents/orchestrator.md",
          "type": "blob",
          "size": 3276
        },
        {
          "path": "research/agents/search-agent.md",
          "type": "blob",
          "size": 915
        },
        {
          "path": "research/agents/synthesis-agent.md",
          "type": "blob",
          "size": 2576
        },
        {
          "path": "research/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "research/commands/document.md",
          "type": "blob",
          "size": 2410
        },
        {
          "path": "research/commands/search.md",
          "type": "blob",
          "size": 1329
        },
        {
          "path": "research/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "research/skills/research-methods",
          "type": "tree",
          "size": null
        },
        {
          "path": "research/skills/research-methods/SKILL.md",
          "type": "blob",
          "size": 7387
        },
        {
          "path": "research/skills/research-methods/search-strategies.md",
          "type": "blob",
          "size": 10831
        },
        {
          "path": "research/skills/research-methods/session-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "research/skills/research-methods/session-management/cleanup-session.sh",
          "type": "blob",
          "size": 1789
        },
        {
          "path": "research/skills/research-methods/session-management/create-session.sh",
          "type": "blob",
          "size": 2176
        },
        {
          "path": "research/skills/research-methods/session-management/get-session-dir.sh",
          "type": "blob",
          "size": 601
        },
        {
          "path": "research/skills/research-methods/session-management/read-findings.sh",
          "type": "blob",
          "size": 1801
        },
        {
          "path": "research/skills/research-methods/session-management/update-status.sh",
          "type": "blob",
          "size": 1098
        },
        {
          "path": "research/skills/research-methods/session-management/write-finding.sh",
          "type": "blob",
          "size": 1516
        },
        {
          "path": "research/skills/research-methods/source-evaluation.md",
          "type": "blob",
          "size": 11240
        },
        {
          "path": "research/skills/research-methods/templates.md",
          "type": "blob",
          "size": 14922
        },
        {
          "path": "tech-stacks",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 1974
        },
        {
          "path": "tech-stacks/go/PLUGIN.md",
          "type": "blob",
          "size": 6328
        },
        {
          "path": "tech-stacks/go/README.md",
          "type": "blob",
          "size": 2600
        },
        {
          "path": "tech-stacks/go/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/agents/api-builder.md",
          "type": "blob",
          "size": 4523
        },
        {
          "path": "tech-stacks/go/agents/debugger.md",
          "type": "blob",
          "size": 2991
        },
        {
          "path": "tech-stacks/go/agents/deployer.md",
          "type": "blob",
          "size": 3221
        },
        {
          "path": "tech-stacks/go/agents/developer.md",
          "type": "blob",
          "size": 4852
        },
        {
          "path": "tech-stacks/go/agents/documenter.md",
          "type": "blob",
          "size": 3799
        },
        {
          "path": "tech-stacks/go/agents/optimizer.md",
          "type": "blob",
          "size": 3604
        },
        {
          "path": "tech-stacks/go/agents/security.md",
          "type": "blob",
          "size": 2584
        },
        {
          "path": "tech-stacks/go/agents/tester.md",
          "type": "blob",
          "size": 4358
        },
        {
          "path": "tech-stacks/go/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/commands/bench.md",
          "type": "blob",
          "size": 562
        },
        {
          "path": "tech-stacks/go/commands/build.md",
          "type": "blob",
          "size": 668
        },
        {
          "path": "tech-stacks/go/commands/coverage.md",
          "type": "blob",
          "size": 510
        },
        {
          "path": "tech-stacks/go/commands/debug.md",
          "type": "blob",
          "size": 831
        },
        {
          "path": "tech-stacks/go/commands/deploy.md",
          "type": "blob",
          "size": 734
        },
        {
          "path": "tech-stacks/go/commands/docker-build.md",
          "type": "blob",
          "size": 740
        },
        {
          "path": "tech-stacks/go/commands/docker-run.md",
          "type": "blob",
          "size": 612
        },
        {
          "path": "tech-stacks/go/commands/fmt.md",
          "type": "blob",
          "size": 402
        },
        {
          "path": "tech-stacks/go/commands/generate.md",
          "type": "blob",
          "size": 672
        },
        {
          "path": "tech-stacks/go/commands/init.md",
          "type": "blob",
          "size": 1322
        },
        {
          "path": "tech-stacks/go/commands/lint.md",
          "type": "blob",
          "size": 563
        },
        {
          "path": "tech-stacks/go/commands/mod-tidy.md",
          "type": "blob",
          "size": 508
        },
        {
          "path": "tech-stacks/go/commands/optimize.md",
          "type": "blob",
          "size": 769
        },
        {
          "path": "tech-stacks/go/commands/profile.md",
          "type": "blob",
          "size": 735
        },
        {
          "path": "tech-stacks/go/commands/run.md",
          "type": "blob",
          "size": 491
        },
        {
          "path": "tech-stacks/go/commands/sec-scan.md",
          "type": "blob",
          "size": 691
        },
        {
          "path": "tech-stacks/go/commands/test-race.md",
          "type": "blob",
          "size": 557
        },
        {
          "path": "tech-stacks/go/commands/test.md",
          "type": "blob",
          "size": 585
        },
        {
          "path": "tech-stacks/go/commands/vet.md",
          "type": "blob",
          "size": 430
        },
        {
          "path": "tech-stacks/go/commands/vuln-check.md",
          "type": "blob",
          "size": 590
        },
        {
          "path": "tech-stacks/go/manifest.json",
          "type": "blob",
          "size": 6142
        },
        {
          "path": "tech-stacks/go/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/benchmarking",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/benchmarking/SKILL.md",
          "type": "blob",
          "size": 1265
        },
        {
          "path": "tech-stacks/go/skills/code-quality",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/code-quality/SKILL.md",
          "type": "blob",
          "size": 7844
        },
        {
          "path": "tech-stacks/go/skills/concurrency-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/concurrency-patterns/SKILL.md",
          "type": "blob",
          "size": 7281
        },
        {
          "path": "tech-stacks/go/skills/coverage-analysis",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/coverage-analysis/SKILL.md",
          "type": "blob",
          "size": 1279
        },
        {
          "path": "tech-stacks/go/skills/deployment-strategies",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/deployment-strategies/SKILL.md",
          "type": "blob",
          "size": 2915
        },
        {
          "path": "tech-stacks/go/skills/docker-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/docker-patterns/SKILL.md",
          "type": "blob",
          "size": 2041
        },
        {
          "path": "tech-stacks/go/skills/documentation-standards",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/documentation-standards/SKILL.md",
          "type": "blob",
          "size": 2846
        },
        {
          "path": "tech-stacks/go/skills/error-handling",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/error-handling/SKILL.md",
          "type": "blob",
          "size": 5859
        },
        {
          "path": "tech-stacks/go/skills/grpc-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/grpc-patterns/SKILL.md",
          "type": "blob",
          "size": 3279
        },
        {
          "path": "tech-stacks/go/skills/optimization-techniques",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/optimization-techniques/SKILL.md",
          "type": "blob",
          "size": 1487
        },
        {
          "path": "tech-stacks/go/skills/performance-profiling",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/performance-profiling/SKILL.md",
          "type": "blob",
          "size": 1197
        },
        {
          "path": "tech-stacks/go/skills/post-change-verification",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/post-change-verification/SKILL.md",
          "type": "blob",
          "size": 7396
        },
        {
          "path": "tech-stacks/go/skills/project-structure",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/project-structure/SKILL.md",
          "type": "blob",
          "size": 5756
        },
        {
          "path": "tech-stacks/go/skills/rest-api-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/rest-api-patterns/SKILL.md",
          "type": "blob",
          "size": 3400
        },
        {
          "path": "tech-stacks/go/skills/secure-coding",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/secure-coding/SKILL.md",
          "type": "blob",
          "size": 4020
        },
        {
          "path": "tech-stacks/go/skills/security-scanning",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/security-scanning/SKILL.md",
          "type": "blob",
          "size": 1881
        },
        {
          "path": "tech-stacks/go/skills/testing-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/go/skills/testing-patterns/SKILL.md",
          "type": "blob",
          "size": 2158
        },
        {
          "path": "tech-stacks/js",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 1758
        },
        {
          "path": "tech-stacks/js/common/PLUGIN.md",
          "type": "blob",
          "size": 7610
        },
        {
          "path": "tech-stacks/js/common/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/agents/developer.md",
          "type": "blob",
          "size": 4782
        },
        {
          "path": "tech-stacks/js/common/agents/documenter.md",
          "type": "blob",
          "size": 7440
        },
        {
          "path": "tech-stacks/js/common/agents/quality-guardian.md",
          "type": "blob",
          "size": 7265
        },
        {
          "path": "tech-stacks/js/common/agents/security.md",
          "type": "blob",
          "size": 5637
        },
        {
          "path": "tech-stacks/js/common/agents/tester.md",
          "type": "blob",
          "size": 6060
        },
        {
          "path": "tech-stacks/js/common/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/commands/audit-fix.md",
          "type": "blob",
          "size": 810
        },
        {
          "path": "tech-stacks/js/common/commands/audit.md",
          "type": "blob",
          "size": 826
        },
        {
          "path": "tech-stacks/js/common/commands/build.md",
          "type": "blob",
          "size": 712
        },
        {
          "path": "tech-stacks/js/common/commands/dev.md",
          "type": "blob",
          "size": 433
        },
        {
          "path": "tech-stacks/js/common/commands/format-check.md",
          "type": "blob",
          "size": 618
        },
        {
          "path": "tech-stacks/js/common/commands/format.md",
          "type": "blob",
          "size": 513
        },
        {
          "path": "tech-stacks/js/common/commands/init.md",
          "type": "blob",
          "size": 3452
        },
        {
          "path": "tech-stacks/js/common/commands/install.md",
          "type": "blob",
          "size": 726
        },
        {
          "path": "tech-stacks/js/common/commands/license-check.md",
          "type": "blob",
          "size": 940
        },
        {
          "path": "tech-stacks/js/common/commands/lint.md",
          "type": "blob",
          "size": 529
        },
        {
          "path": "tech-stacks/js/common/commands/pre-commit.md",
          "type": "blob",
          "size": 1206
        },
        {
          "path": "tech-stacks/js/common/commands/test-coverage.md",
          "type": "blob",
          "size": 671
        },
        {
          "path": "tech-stacks/js/common/commands/test-ui.md",
          "type": "blob",
          "size": 533
        },
        {
          "path": "tech-stacks/js/common/commands/test-watch.md",
          "type": "blob",
          "size": 503
        },
        {
          "path": "tech-stacks/js/common/commands/test.md",
          "type": "blob",
          "size": 422
        },
        {
          "path": "tech-stacks/js/common/commands/type-check.md",
          "type": "blob",
          "size": 520
        },
        {
          "path": "tech-stacks/js/common/commands/validate.md",
          "type": "blob",
          "size": 856
        },
        {
          "path": "tech-stacks/js/common/manifest.json",
          "type": "blob",
          "size": 4121
        },
        {
          "path": "tech-stacks/js/common/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/biome-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/biome-setup/SKILL.md",
          "type": "blob",
          "size": 7208
        },
        {
          "path": "tech-stacks/js/common/skills/build-tools",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/build-tools/SKILL.md",
          "type": "blob",
          "size": 5995
        },
        {
          "path": "tech-stacks/js/common/skills/code-quality-standards",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/code-quality-standards/SKILL.md",
          "type": "blob",
          "size": 6986
        },
        {
          "path": "tech-stacks/js/common/skills/coverage-standards",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/coverage-standards/SKILL.md",
          "type": "blob",
          "size": 6102
        },
        {
          "path": "tech-stacks/js/common/skills/dependency-security",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/dependency-security/SKILL.md",
          "type": "blob",
          "size": 6030
        },
        {
          "path": "tech-stacks/js/common/skills/error-handling-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/error-handling-patterns/SKILL.md",
          "type": "blob",
          "size": 9183
        },
        {
          "path": "tech-stacks/js/common/skills/eslint-flat-config",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/eslint-flat-config/SKILL.md",
          "type": "blob",
          "size": 7973
        },
        {
          "path": "tech-stacks/js/common/skills/esm-module-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/esm-module-patterns/SKILL.md",
          "type": "blob",
          "size": 7069
        },
        {
          "path": "tech-stacks/js/common/skills/license-compliance",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/license-compliance/SKILL.md",
          "type": "blob",
          "size": 5126
        },
        {
          "path": "tech-stacks/js/common/skills/mocking-strategies",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/mocking-strategies/SKILL.md",
          "type": "blob",
          "size": 7516
        },
        {
          "path": "tech-stacks/js/common/skills/post-change-verification",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/post-change-verification/SKILL.md",
          "type": "blob",
          "size": 7621
        },
        {
          "path": "tech-stacks/js/common/skills/pre-commit-hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/pre-commit-hooks/SKILL.md",
          "type": "blob",
          "size": 5366
        },
        {
          "path": "tech-stacks/js/common/skills/testing-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/testing-patterns/SKILL.md",
          "type": "blob",
          "size": 8117
        },
        {
          "path": "tech-stacks/js/common/skills/type-safety-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/type-safety-patterns/SKILL.md",
          "type": "blob",
          "size": 8042
        },
        {
          "path": "tech-stacks/js/common/skills/typescript-strict-config",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/typescript-strict-config/SKILL.md",
          "type": "blob",
          "size": 7189
        },
        {
          "path": "tech-stacks/js/common/skills/vitest-configuration",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/common/skills/vitest-configuration/SKILL.md",
          "type": "blob",
          "size": 8312
        },
        {
          "path": "tech-stacks/js/node",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 1566
        },
        {
          "path": "tech-stacks/js/node/PLUGIN.md",
          "type": "blob",
          "size": 4996
        },
        {
          "path": "tech-stacks/js/node/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/agents/api-builder.md",
          "type": "blob",
          "size": 5458
        },
        {
          "path": "tech-stacks/js/node/agents/database-architect.md",
          "type": "blob",
          "size": 7267
        },
        {
          "path": "tech-stacks/js/node/agents/deployer.md",
          "type": "blob",
          "size": 7594
        },
        {
          "path": "tech-stacks/js/node/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/commands/api-init.md",
          "type": "blob",
          "size": 3496
        },
        {
          "path": "tech-stacks/js/node/commands/api-validate.md",
          "type": "blob",
          "size": 1033
        },
        {
          "path": "tech-stacks/js/node/commands/db-generate.md",
          "type": "blob",
          "size": 668
        },
        {
          "path": "tech-stacks/js/node/commands/db-migrate.md",
          "type": "blob",
          "size": 926
        },
        {
          "path": "tech-stacks/js/node/commands/db-seed.md",
          "type": "blob",
          "size": 1402
        },
        {
          "path": "tech-stacks/js/node/commands/deploy.md",
          "type": "blob",
          "size": 2295
        },
        {
          "path": "tech-stacks/js/node/commands/docker-build.md",
          "type": "blob",
          "size": 2060
        },
        {
          "path": "tech-stacks/js/node/commands/docker-run.md",
          "type": "blob",
          "size": 1942
        },
        {
          "path": "tech-stacks/js/node/commands/test-containers.md",
          "type": "blob",
          "size": 3249
        },
        {
          "path": "tech-stacks/js/node/commands/test-e2e.md",
          "type": "blob",
          "size": 2635
        },
        {
          "path": "tech-stacks/js/node/commands/test-integration.md",
          "type": "blob",
          "size": 2137
        },
        {
          "path": "tech-stacks/js/node/manifest.json",
          "type": "blob",
          "size": 3780
        },
        {
          "path": "tech-stacks/js/node/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/api-versioning",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/api-versioning/SKILL.md",
          "type": "blob",
          "size": 7665
        },
        {
          "path": "tech-stacks/js/node/skills/authentication-strategies",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/authentication-strategies/SKILL.md",
          "type": "blob",
          "size": 11268
        },
        {
          "path": "tech-stacks/js/node/skills/authorization-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/authorization-patterns/SKILL.md",
          "type": "blob",
          "size": 10447
        },
        {
          "path": "tech-stacks/js/node/skills/docker-backend-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/docker-backend-patterns/SKILL.md",
          "type": "blob",
          "size": 10424
        },
        {
          "path": "tech-stacks/js/node/skills/drizzle-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/drizzle-setup/SKILL.md",
          "type": "blob",
          "size": 9589
        },
        {
          "path": "tech-stacks/js/node/skills/e2e-testing-backend",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/e2e-testing-backend/SKILL.md",
          "type": "blob",
          "size": 12643
        },
        {
          "path": "tech-stacks/js/node/skills/fastify-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/fastify-patterns/SKILL.md",
          "type": "blob",
          "size": 9844
        },
        {
          "path": "tech-stacks/js/node/skills/integration-testing",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/integration-testing/SKILL.md",
          "type": "blob",
          "size": 11190
        },
        {
          "path": "tech-stacks/js/node/skills/migration-strategies",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/migration-strategies/SKILL.md",
          "type": "blob",
          "size": 7456
        },
        {
          "path": "tech-stacks/js/node/skills/prisma-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/prisma-setup/SKILL.md",
          "type": "blob",
          "size": 8868
        },
        {
          "path": "tech-stacks/js/node/skills/query-optimization",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/query-optimization/SKILL.md",
          "type": "blob",
          "size": 7517
        },
        {
          "path": "tech-stacks/js/node/skills/serialization-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/serialization-patterns/SKILL.md",
          "type": "blob",
          "size": 9628
        },
        {
          "path": "tech-stacks/js/node/skills/serverless-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/serverless-patterns/SKILL.md",
          "type": "blob",
          "size": 11337
        },
        {
          "path": "tech-stacks/js/node/skills/testcontainers-usage",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/testcontainers-usage/SKILL.md",
          "type": "blob",
          "size": 9997
        },
        {
          "path": "tech-stacks/js/node/skills/zod-validation",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/node/skills/zod-validation/SKILL.md",
          "type": "blob",
          "size": 8972
        },
        {
          "path": "tech-stacks/js/react-native",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 1820
        },
        {
          "path": "tech-stacks/js/react-native/PLUGIN.md",
          "type": "blob",
          "size": 8420
        },
        {
          "path": "tech-stacks/js/react-native/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/agents/code-analyzer.md",
          "type": "blob",
          "size": 14230
        },
        {
          "path": "tech-stacks/js/react-native/agents/component-builder.md",
          "type": "blob",
          "size": 14890
        },
        {
          "path": "tech-stacks/js/react-native/agents/e2e-tester.md",
          "type": "blob",
          "size": 6933
        },
        {
          "path": "tech-stacks/js/react-native/agents/navigation-architect.md",
          "type": "blob",
          "size": 7418
        },
        {
          "path": "tech-stacks/js/react-native/agents/performance-optimizer.md",
          "type": "blob",
          "size": 8204
        },
        {
          "path": "tech-stacks/js/react-native/agents/ui-designer.md",
          "type": "blob",
          "size": 8270
        },
        {
          "path": "tech-stacks/js/react-native/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/commands/analyze.md",
          "type": "blob",
          "size": 1226
        },
        {
          "path": "tech-stacks/js/react-native/commands/build-all.md",
          "type": "blob",
          "size": 1119
        },
        {
          "path": "tech-stacks/js/react-native/commands/build-android.md",
          "type": "blob",
          "size": 1055
        },
        {
          "path": "tech-stacks/js/react-native/commands/build-ios.md",
          "type": "blob",
          "size": 1019
        },
        {
          "path": "tech-stacks/js/react-native/commands/deploy-eas.md",
          "type": "blob",
          "size": 1340
        },
        {
          "path": "tech-stacks/js/react-native/commands/expo-init.md",
          "type": "blob",
          "size": 17683
        },
        {
          "path": "tech-stacks/js/react-native/commands/preview.md",
          "type": "blob",
          "size": 891
        },
        {
          "path": "tech-stacks/js/react-native/commands/refactor-atomic-design.md",
          "type": "blob",
          "size": 7765
        },
        {
          "path": "tech-stacks/js/react-native/commands/test-component.md",
          "type": "blob",
          "size": 1135
        },
        {
          "path": "tech-stacks/js/react-native/commands/test-e2e.md",
          "type": "blob",
          "size": 1062
        },
        {
          "path": "tech-stacks/js/react-native/commands/update-ota.md",
          "type": "blob",
          "size": 1429
        },
        {
          "path": "tech-stacks/js/react-native/manifest.json",
          "type": "blob",
          "size": 4451
        },
        {
          "path": "tech-stacks/js/react-native/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/accessibility-mobile",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/accessibility-mobile/SKILL.md",
          "type": "blob",
          "size": 10081
        },
        {
          "path": "tech-stacks/js/react-native/skills/atomic-design-mobile",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/atomic-design-mobile/SKILL.md",
          "type": "blob",
          "size": 19987
        },
        {
          "path": "tech-stacks/js/react-native/skills/component-testing-mobile",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/component-testing-mobile/SKILL.md",
          "type": "blob",
          "size": 8667
        },
        {
          "path": "tech-stacks/js/react-native/skills/eas-build-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/eas-build-setup/SKILL.md",
          "type": "blob",
          "size": 8084
        },
        {
          "path": "tech-stacks/js/react-native/skills/eas-update-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/eas-update-setup/SKILL.md",
          "type": "blob",
          "size": 8554
        },
        {
          "path": "tech-stacks/js/react-native/skills/expo-configuration",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/expo-configuration/SKILL.md",
          "type": "blob",
          "size": 5920
        },
        {
          "path": "tech-stacks/js/react-native/skills/expo-router-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/expo-router-patterns/SKILL.md",
          "type": "blob",
          "size": 7534
        },
        {
          "path": "tech-stacks/js/react-native/skills/flashlist-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/flashlist-patterns/SKILL.md",
          "type": "blob",
          "size": 7369
        },
        {
          "path": "tech-stacks/js/react-native/skills/form-handling-mobile",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/form-handling-mobile/SKILL.md",
          "type": "blob",
          "size": 10240
        },
        {
          "path": "tech-stacks/js/react-native/skills/gluestack-ui-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/gluestack-ui-setup/SKILL.md",
          "type": "blob",
          "size": 7114
        },
        {
          "path": "tech-stacks/js/react-native/skills/maestro-testing",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/maestro-testing/SKILL.md",
          "type": "blob",
          "size": 6357
        },
        {
          "path": "tech-stacks/js/react-native/skills/nativewind-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/nativewind-patterns/SKILL.md",
          "type": "blob",
          "size": 5615
        },
        {
          "path": "tech-stacks/js/react-native/skills/platform-specific-code",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/platform-specific-code/SKILL.md",
          "type": "blob",
          "size": 9219
        },
        {
          "path": "tech-stacks/js/react-native/skills/react-native-performance",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/react-native-performance/SKILL.md",
          "type": "blob",
          "size": 7340
        },
        {
          "path": "tech-stacks/js/react-native/skills/reanimated-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/reanimated-patterns/SKILL.md",
          "type": "blob",
          "size": 7294
        },
        {
          "path": "tech-stacks/js/react-native/skills/secure-storage-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/secure-storage-patterns/SKILL.md",
          "type": "blob",
          "size": 8285
        },
        {
          "path": "tech-stacks/js/react-native/skills/tanstack-query-mobile",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/tanstack-query-mobile/SKILL.md",
          "type": "blob",
          "size": 8110
        },
        {
          "path": "tech-stacks/js/react-native/skills/zustand-mobile-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react-native/skills/zustand-mobile-patterns/SKILL.md",
          "type": "blob",
          "size": 7673
        },
        {
          "path": "tech-stacks/js/react",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 1949
        },
        {
          "path": "tech-stacks/js/react/PLUGIN.md",
          "type": "blob",
          "size": 10891
        },
        {
          "path": "tech-stacks/js/react/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/agents/code-analyzer.md",
          "type": "blob",
          "size": 67761
        },
        {
          "path": "tech-stacks/js/react/agents/component-builder.md",
          "type": "blob",
          "size": 13088
        },
        {
          "path": "tech-stacks/js/react/agents/e2e-tester.md",
          "type": "blob",
          "size": 10024
        },
        {
          "path": "tech-stacks/js/react/agents/performance-optimizer.md",
          "type": "blob",
          "size": 7887
        },
        {
          "path": "tech-stacks/js/react/agents/state-architect.md",
          "type": "blob",
          "size": 7923
        },
        {
          "path": "tech-stacks/js/react/agents/ui-designer.md",
          "type": "blob",
          "size": 8792
        },
        {
          "path": "tech-stacks/js/react/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/commands/analyze.md",
          "type": "blob",
          "size": 2047
        },
        {
          "path": "tech-stacks/js/react/commands/build-nextjs.md",
          "type": "blob",
          "size": 2628
        },
        {
          "path": "tech-stacks/js/react/commands/build-spa.md",
          "type": "blob",
          "size": 2076
        },
        {
          "path": "tech-stacks/js/react/commands/deploy-cloudflare.md",
          "type": "blob",
          "size": 3818
        },
        {
          "path": "tech-stacks/js/react/commands/deploy-netlify.md",
          "type": "blob",
          "size": 3413
        },
        {
          "path": "tech-stacks/js/react/commands/deploy-vercel.md",
          "type": "blob",
          "size": 2657
        },
        {
          "path": "tech-stacks/js/react/commands/nextjs-init.md",
          "type": "blob",
          "size": 23550
        },
        {
          "path": "tech-stacks/js/react/commands/preview.md",
          "type": "blob",
          "size": 1157
        },
        {
          "path": "tech-stacks/js/react/commands/refactor-atomic-design.md",
          "type": "blob",
          "size": 7157
        },
        {
          "path": "tech-stacks/js/react/commands/spa-init.md",
          "type": "blob",
          "size": 19644
        },
        {
          "path": "tech-stacks/js/react/commands/test-component.md",
          "type": "blob",
          "size": 2305
        },
        {
          "path": "tech-stacks/js/react/commands/test-e2e.md",
          "type": "blob",
          "size": 3129
        },
        {
          "path": "tech-stacks/js/react/commands/test-visual.md",
          "type": "blob",
          "size": 3345
        },
        {
          "path": "tech-stacks/js/react/manifest.json",
          "type": "blob",
          "size": 4793
        },
        {
          "path": "tech-stacks/js/react/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/accessibility-testing",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/accessibility-testing/SKILL.md",
          "type": "blob",
          "size": 13087
        },
        {
          "path": "tech-stacks/js/react/skills/atomic-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/atomic-design/SKILL.md",
          "type": "blob",
          "size": 17273
        },
        {
          "path": "tech-stacks/js/react/skills/bundle-optimization",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/bundle-optimization/SKILL.md",
          "type": "blob",
          "size": 7160
        },
        {
          "path": "tech-stacks/js/react/skills/component-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/component-patterns/SKILL.md",
          "type": "blob",
          "size": 9120
        },
        {
          "path": "tech-stacks/js/react/skills/component-testing",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/component-testing/SKILL.md",
          "type": "blob",
          "size": 9358
        },
        {
          "path": "tech-stacks/js/react/skills/hooks-best-practices",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/hooks-best-practices/SKILL.md",
          "type": "blob",
          "size": 8875
        },
        {
          "path": "tech-stacks/js/react/skills/jotai-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/jotai-patterns/SKILL.md",
          "type": "blob",
          "size": 7797
        },
        {
          "path": "tech-stacks/js/react/skills/nextjs-configuration",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/nextjs-configuration/SKILL.md",
          "type": "blob",
          "size": 8252
        },
        {
          "path": "tech-stacks/js/react/skills/nextjs-deployment",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/nextjs-deployment/SKILL.md",
          "type": "blob",
          "size": 10573
        },
        {
          "path": "tech-stacks/js/react/skills/performance-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/performance-patterns/SKILL.md",
          "type": "blob",
          "size": 8938
        },
        {
          "path": "tech-stacks/js/react/skills/playwright-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/playwright-setup/SKILL.md",
          "type": "blob",
          "size": 9309
        },
        {
          "path": "tech-stacks/js/react/skills/radix-ui-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/radix-ui-patterns/SKILL.md",
          "type": "blob",
          "size": 11693
        },
        {
          "path": "tech-stacks/js/react/skills/react-19-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/react-19-patterns/SKILL.md",
          "type": "blob",
          "size": 8100
        },
        {
          "path": "tech-stacks/js/react/skills/responsive-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/responsive-design/SKILL.md",
          "type": "blob",
          "size": 9127
        },
        {
          "path": "tech-stacks/js/react/skills/shadcn-ui-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/shadcn-ui-setup/SKILL.md",
          "type": "blob",
          "size": 9847
        },
        {
          "path": "tech-stacks/js/react/skills/tailwind-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/tailwind-setup/SKILL.md",
          "type": "blob",
          "size": 8710
        },
        {
          "path": "tech-stacks/js/react/skills/tanstack-query-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/tanstack-query-setup/SKILL.md",
          "type": "blob",
          "size": 10069
        },
        {
          "path": "tech-stacks/js/react/skills/visual-regression",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/visual-regression/SKILL.md",
          "type": "blob",
          "size": 11139
        },
        {
          "path": "tech-stacks/js/react/skills/vite-configuration",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/vite-configuration/SKILL.md",
          "type": "blob",
          "size": 7600
        },
        {
          "path": "tech-stacks/js/react/skills/vite-deployment",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/vite-deployment/SKILL.md",
          "type": "blob",
          "size": 10777
        },
        {
          "path": "tech-stacks/js/react/skills/zustand-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/js/react/skills/zustand-patterns/SKILL.md",
          "type": "blob",
          "size": 8718
        },
        {
          "path": "tech-stacks/solidity",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 1876
        },
        {
          "path": "tech-stacks/solidity/PLUGIN.md",
          "type": "blob",
          "size": 8283
        },
        {
          "path": "tech-stacks/solidity/README.md",
          "type": "blob",
          "size": 10086
        },
        {
          "path": "tech-stacks/solidity/TODO.md",
          "type": "blob",
          "size": 497
        },
        {
          "path": "tech-stacks/solidity/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/agents/auditor.md",
          "type": "blob",
          "size": 2628
        },
        {
          "path": "tech-stacks/solidity/agents/debugger.md",
          "type": "blob",
          "size": 1975
        },
        {
          "path": "tech-stacks/solidity/agents/deployer.md",
          "type": "blob",
          "size": 3091
        },
        {
          "path": "tech-stacks/solidity/agents/developer.md",
          "type": "blob",
          "size": 4375
        },
        {
          "path": "tech-stacks/solidity/agents/gas-optimizer.md",
          "type": "blob",
          "size": 3446
        },
        {
          "path": "tech-stacks/solidity/agents/tester.md",
          "type": "blob",
          "size": 3404
        },
        {
          "path": "tech-stacks/solidity/agents/upgrader.md",
          "type": "blob",
          "size": 3390
        },
        {
          "path": "tech-stacks/solidity/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/commands/analyze.md",
          "type": "blob",
          "size": 638
        },
        {
          "path": "tech-stacks/solidity/commands/audit.md",
          "type": "blob",
          "size": 3556
        },
        {
          "path": "tech-stacks/solidity/commands/build.md",
          "type": "blob",
          "size": 563
        },
        {
          "path": "tech-stacks/solidity/commands/clean.md",
          "type": "blob",
          "size": 471
        },
        {
          "path": "tech-stacks/solidity/commands/compile.md",
          "type": "blob",
          "size": 683
        },
        {
          "path": "tech-stacks/solidity/commands/console.md",
          "type": "blob",
          "size": 938
        },
        {
          "path": "tech-stacks/solidity/commands/coverage.md",
          "type": "blob",
          "size": 733
        },
        {
          "path": "tech-stacks/solidity/commands/debug.md",
          "type": "blob",
          "size": 951
        },
        {
          "path": "tech-stacks/solidity/commands/deploy.md",
          "type": "blob",
          "size": 3944
        },
        {
          "path": "tech-stacks/solidity/commands/fork.md",
          "type": "blob",
          "size": 1197
        },
        {
          "path": "tech-stacks/solidity/commands/format.md",
          "type": "blob",
          "size": 586
        },
        {
          "path": "tech-stacks/solidity/commands/gas-report.md",
          "type": "blob",
          "size": 717
        },
        {
          "path": "tech-stacks/solidity/commands/init.md",
          "type": "blob",
          "size": 1128
        },
        {
          "path": "tech-stacks/solidity/commands/install.md",
          "type": "blob",
          "size": 753
        },
        {
          "path": "tech-stacks/solidity/commands/lint.md",
          "type": "blob",
          "size": 635
        },
        {
          "path": "tech-stacks/solidity/commands/optimize-gas.md",
          "type": "blob",
          "size": 1433
        },
        {
          "path": "tech-stacks/solidity/commands/snapshot.md",
          "type": "blob",
          "size": 742
        },
        {
          "path": "tech-stacks/solidity/commands/test-fuzz.md",
          "type": "blob",
          "size": 1125
        },
        {
          "path": "tech-stacks/solidity/commands/test.md",
          "type": "blob",
          "size": 659
        },
        {
          "path": "tech-stacks/solidity/commands/upgrade-check.md",
          "type": "blob",
          "size": 1769
        },
        {
          "path": "tech-stacks/solidity/commands/upgrade.md",
          "type": "blob",
          "size": 1804
        },
        {
          "path": "tech-stacks/solidity/commands/verify.md",
          "type": "blob",
          "size": 910
        },
        {
          "path": "tech-stacks/solidity/manifest.json",
          "type": "blob",
          "size": 5955
        },
        {
          "path": "tech-stacks/solidity/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/code-quality",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/code-quality/SKILL.md",
          "type": "blob",
          "size": 16591
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/SKILL.md",
          "type": "blob",
          "size": 8878
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/examples/ERC1155-example.sol",
          "type": "blob",
          "size": 9637
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/examples/ERC20-example.sol",
          "type": "blob",
          "size": 2702
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/examples/ERC721-example.sol",
          "type": "blob",
          "size": 6196
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/examples/upgradeable-example.sol",
          "type": "blob",
          "size": 9790
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/patterns/access-control.md",
          "type": "blob",
          "size": 1980
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/patterns/pausable.md",
          "type": "blob",
          "size": 3548
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/patterns/reentrancy-guard.md",
          "type": "blob",
          "size": 7205
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/patterns/token-standards.md",
          "type": "blob",
          "size": 10435
        },
        {
          "path": "tech-stacks/solidity/skills/contract-patterns/patterns/upgradeable-contracts.md",
          "type": "blob",
          "size": 3018
        },
        {
          "path": "tech-stacks/solidity/skills/coverage-analysis",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/coverage-analysis/SKILL.md",
          "type": "blob",
          "size": 9249
        },
        {
          "path": "tech-stacks/solidity/skills/deployment",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/deployment/SKILL.md",
          "type": "blob",
          "size": 15198
        },
        {
          "path": "tech-stacks/solidity/skills/foundry-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/foundry-setup/SKILL.md",
          "type": "blob",
          "size": 11116
        },
        {
          "path": "tech-stacks/solidity/skills/foundry-setup/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/foundry-setup/scripts/init-foundry.sh",
          "type": "blob",
          "size": 4034
        },
        {
          "path": "tech-stacks/solidity/skills/foundry-setup/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/foundry-setup/templates/.env.example",
          "type": "blob",
          "size": 2607
        },
        {
          "path": "tech-stacks/solidity/skills/foundry-setup/templates/foundry.toml",
          "type": "blob",
          "size": 2753
        },
        {
          "path": "tech-stacks/solidity/skills/framework-detection",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/framework-detection/SKILL.md",
          "type": "blob",
          "size": 7049
        },
        {
          "path": "tech-stacks/solidity/skills/gas-optimization",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/gas-optimization/SKILL.md",
          "type": "blob",
          "size": 17338
        },
        {
          "path": "tech-stacks/solidity/skills/hardhat-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/hardhat-setup/SKILL.md",
          "type": "blob",
          "size": 15970
        },
        {
          "path": "tech-stacks/solidity/skills/hardhat-setup/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/hardhat-setup/scripts/init-hardhat.sh",
          "type": "blob",
          "size": 4047
        },
        {
          "path": "tech-stacks/solidity/skills/hardhat-setup/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/hardhat-setup/templates/.env.example",
          "type": "blob",
          "size": 2537
        },
        {
          "path": "tech-stacks/solidity/skills/hardhat-setup/templates/deploy-script.js",
          "type": "blob",
          "size": 1428
        },
        {
          "path": "tech-stacks/solidity/skills/hardhat-setup/templates/hardhat.config.js",
          "type": "blob",
          "size": 2347
        },
        {
          "path": "tech-stacks/solidity/skills/hardhat-setup/templates/hardhat.config.ts",
          "type": "blob",
          "size": 2378
        },
        {
          "path": "tech-stacks/solidity/skills/natspec-standards",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/natspec-standards/SKILL.md",
          "type": "blob",
          "size": 14623
        },
        {
          "path": "tech-stacks/solidity/skills/post-change-verification",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/post-change-verification/SKILL.md",
          "type": "blob",
          "size": 8145
        },
        {
          "path": "tech-stacks/solidity/skills/proxy-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/proxy-patterns/SKILL.md",
          "type": "blob",
          "size": 4929
        },
        {
          "path": "tech-stacks/solidity/skills/security-audit",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/security-audit/SKILL.md",
          "type": "blob",
          "size": 11281
        },
        {
          "path": "tech-stacks/solidity/skills/security-audit/checklists",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/security-audit/checklists/access-control-checklist.md",
          "type": "blob",
          "size": 10490
        },
        {
          "path": "tech-stacks/solidity/skills/security-audit/checklists/common-vulnerabilities.md",
          "type": "blob",
          "size": 11152
        },
        {
          "path": "tech-stacks/solidity/skills/security-audit/checklists/defi-checklist.md",
          "type": "blob",
          "size": 10286
        },
        {
          "path": "tech-stacks/solidity/skills/security-audit/checklists/token-checklist.md",
          "type": "blob",
          "size": 12243
        },
        {
          "path": "tech-stacks/solidity/skills/security-audit/checklists/upgrade-checklist.md",
          "type": "blob",
          "size": 12860
        },
        {
          "path": "tech-stacks/solidity/skills/security-audit/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/security-audit/templates/audit-report-template.md",
          "type": "blob",
          "size": 9189
        },
        {
          "path": "tech-stacks/solidity/skills/testing-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/testing-patterns/SKILL.md",
          "type": "blob",
          "size": 19419
        },
        {
          "path": "tech-stacks/solidity/skills/upgrade-safety",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/upgrade-safety/SKILL.md",
          "type": "blob",
          "size": 6933
        },
        {
          "path": "tech-stacks/solidity/skills/vulnerability-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "tech-stacks/solidity/skills/vulnerability-patterns/SKILL.md",
          "type": "blob",
          "size": 4204
        }
      ],
      "marketplace": {
        "name": "Molcajete.ai",
        "version": null,
        "description": null,
        "owner_info": {
          "name": "Ivan",
          "email": "ivantorresedge@gmail.com"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "defaults",
            "description": "Defaults plugin providing audio feedback hooks",
            "source": "./defaults",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add IvanTorresEdge/molcajete.ai",
              "/plugin install defaults@Molcajete.ai"
            ],
            "signals": {
              "stars": 0,
              "forks": 1,
              "pushed_at": "2026-01-06T21:16:55Z",
              "created_at": "2025-11-13T04:11:22Z",
              "license": "MIT"
            },
            "commands": [],
            "skills": [
              {
                "name": "play-sound",
                "description": "Cross-platform audio feedback system for task completion and user prompts. Provides non-intrusive sound notifications to improve workflow awareness.",
                "path": "defaults/skills/play-sound/SKILL.md",
                "frontmatter": {
                  "name": "play-sound",
                  "description": "Cross-platform audio feedback system for task completion and user prompts. Provides non-intrusive sound notifications to improve workflow awareness."
                },
                "content": "# Audio Feedback System\n\nThis skill provides cross-platform audio feedback for Claude Code events, helping users stay aware of task progress and interaction points without constantly watching the screen.\n\n## Purpose\n\nAudio cues enhance the development workflow by:\n- **Signaling task completion**: Know when long-running tasks finish without monitoring\n- **Alerting to prompts**: Be notified when user input is required\n- **Maintaining flow**: Stay focused on other work while background tasks complete\n- **Reducing context switching**: Less need to check status updates manually\n\n## Sound Types\n\n### Success Sound\n- **Event**: Task completed successfully\n- **macOS**: Hero.aiff (triumphant sound)\n- **Linux**: complete.oga or similar system sound\n- **Windows**: 1000Hz beep for 100ms\n\n### Prompt Sound\n- **Event**: User input or decision required\n- **macOS**: Blow.aiff (blowing sound)\n- **Linux**: dialog-warning.oga or bell sound\n- **Windows**: 800Hz beep for 150ms\n\n## Implementation\n\nThe audio system is implemented in `scripts/play-sound.py`, a Python script that:\n\n1. **Detects the platform** (macOS, Linux, Windows)\n2. **Uses native system sounds** when available\n3. **Falls back gracefully** if sounds unavailable\n4. **Fails silently** to avoid interrupting workflow\n5. **Requires no external dependencies** (uses only Python stdlib)\n\n### macOS Implementation\nUses `afplay` command with system sounds from `/System/Library/Sounds/`:\n- Hero.aiff for success\n- Blow.aiff for prompts\n- Falls back to `osascript -e 'beep'` if needed\n\n### Linux Implementation\nSearches common sound directories:\n- `/usr/share/sounds/freedesktop/stereo/`\n- `/usr/share/sounds/ubuntu/stereo/`\n- `/usr/share/sounds/gnome/default/alerts/`\n\nTries multiple tools in order:\n1. `paplay` (PulseAudio)\n2. `aplay` (ALSA)\n3. `beep` command\n4. Terminal bell (`\\a`)\n\n### Windows Implementation\nUses `winsound` module from Python standard library:\n- Different frequencies for different events\n- MessageBeep as fallback\n- Terminal bell as last resort\n\n## Hook Configuration\n\nHooks are configured in the plugin's `settings.json`:\n\n```json\n{\n  \"hooks\": {\n    \"SubagentStop\": [\n      {\n        \"matcher\": \"*\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/skills/play-sound/scripts/play-sound.py success\"\n          }\n        ]\n      }\n    ],\n    \"Notification\": [\n      {\n        \"matcher\": \"*\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/skills/play-sound/scripts/play-sound.py prompt\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n## Customization\n\nUsers can customize the audio feedback by:\n\n1. **Modifying sound files**: Edit the sound file paths in `play-sound.py`\n2. **Adjusting frequencies**: Change the Hz and duration values for Windows\n3. **Adding new sound types**: Extend the sound_map dictionaries\n4. **Disabling hooks**: Remove or comment out hooks in settings.json\n\n## Cross-Platform Compatibility\n\nThe script is designed to work on:\n- **macOS**: 10.12+ (all versions with modern system sounds)\n- **Linux**: All major distributions (Ubuntu, Fedora, Debian, Arch, etc.)\n- **Windows**: Windows 7+ (any version with Python 3.x)\n\nAll implementations use sounds/capabilities available by default on the latest OS versions, requiring no additional software installation.\n\n## Silent Failure Philosophy\n\nThe audio system fails silently by design:\n- If sounds can't be played, workflow continues uninterrupted\n- No error messages displayed to the user\n- Prevents audio issues from blocking development work\n- Graceful degradation through multiple fallback options\n\n## Performance\n\n- **Non-blocking**: Sound playback runs asynchronously\n- **Minimal overhead**: Subprocess call takes ~10-50ms\n- **No dependencies**: Uses only Python standard library\n- **Small footprint**: Script is lightweight and fast\n\n## Testing\n\nTest the sound system manually:\n\n```bash\n# Test success sound\npython3 ./scripts/play-sound.py success\n\n# Test prompt sound\npython3 ./scripts/play-sound.py prompt\n\n# Test default (prompt)\npython3 ./scripts/play-sound.py\n```\n\n## Related Files\n\n- `scripts/play-sound.py`: Main implementation\n- `settings.json`: Hook configuration\n- Plugin enabled by default in user's Claude Code settings"
              }
            ]
          },
          {
            "name": "git",
            "description": "Git plugin for Claude Code",
            "source": "./git",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add IvanTorresEdge/molcajete.ai",
              "/plugin install git@Molcajete.ai"
            ],
            "signals": {
              "stars": 0,
              "forks": 1,
              "pushed_at": "2026-01-06T21:16:55Z",
              "created_at": "2025-11-13T04:11:22Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/amend",
                "description": "Amend the last commit with staged changes",
                "path": "git/commands/amend.md",
                "frontmatter": {
                  "description": "Amend the last commit with staged changes"
                },
                "content": "IMPORTANT: Immediately use the Task tool with subagent_type=\"git:code-committer\" to delegate ALL work to the code-committer agent. Do NOT do any analysis or work in the main context.\n\nUse this exact prompt for the agent:\n\"Execute the amend workflow following these steps:\n\n## MANDATORY REQUIREMENTS - READ BEFORE PROCEEDING\n\n**REQUIREMENT 1 - USE AskUserQuestion TOOL:**\nYou MUST use the AskUserQuestion tool to get user confirmation. NEVER ask questions in plain text. NEVER output \"Would you like to proceed?\" or similar. NEVER end your response with a question. The ONLY way to ask for confirmation is by invoking the AskUserQuestion tool. If you cannot use this tool, STOP and report an error.\n\n**REQUIREMENT 2 - NO AI ATTRIBUTION:**\nNEVER add \"Generated with Claude Code\", \"Co-Authored-By: Claude\", or any AI-related text to commit messages.\n\n1. **Safety Checks (CRITICAL - ALL MUST PASS)**\n   - Run `git status` and verify commit is unpushed\n     - Look for 'Your branch is ahead of' or no upstream\n     - If commit is pushed, show error and STOP:\n       ```\n       Error: Cannot safely amend this commit.\n\n       Reason: This commit has already been pushed to the remote repository.\n\n       Amending pushed commits can cause problems for collaborators.\n       Instead, create a new commit with /git:commit\n       ```\n\n   - Run `git log -1 --format='%an %ae'` to check authorship\n     - Verify name/email matches your identity\n     - If authored by someone else, show error and STOP:\n       ```\n       Error: Cannot safely amend this commit.\n\n       Reason: This commit was authored by someone else.\n\n       You should only amend commits you created.\n       To make changes, create a new commit with /git:commit\n       ```\n\n   - Verify a previous commit exists\n     - If no commits exist, show error and STOP:\n       ```\n       Error: Cannot amend - no previous commit exists.\n\n       This appears to be a new repository with no commits yet.\n       Use /git:commit to create your first commit.\n       ```\n\n2. **Analyze Current State**\n   - Run `git log -1` to see current commit message\n   - Run `git diff --staged` to see new changes being added\n   - Run `git log -5 --oneline` to match project style\n\n3. **Draft Improved Message**\n   - Follow the **commit-standards** skill for all formatting rules\n   - Incorporate existing commit context and intent\n   - Add new staged changes to the description\n   - Improve clarity or detail if needed\n   - Keep same commit type unless changes warrant a different one\n   - CRITICAL: Never mention AI, Claude, or tools in the message\n\n4. **Present Message and Get Confirmation (USE AskUserQuestion TOOL - NO EXCEPTIONS)**\n\n   Invoke the AskUserQuestion tool with:\n   - Question: \\\"Amend the last commit with this message?\\n\\nCurrent:\\n[current message]\\n\\nNew:\\n[new message]\\\"\n   - Header: \\\"Amend\\\"\n   - Options: [\\\"Yes\\\" - Amend with this message]\n   - multiSelect: false\n\n   The tool provides an \"Other\" option automatically. If user types in Other:\n   - Treat their input as instructions to modify the message (e.g., \"make it shorter\", \"keep original title\")\n   - Update the message and invoke AskUserQuestion again\n   - Repeat until user selects \"Yes\"\n\n   If AskUserQuestion is unavailable: STOP with error \"AskUserQuestion tool not available. Cannot proceed.\"\n\n5. **Execute Amend**\n   - After user confirms, execute using heredoc format:\n     ```bash\n     git commit --amend -m \\\"$(cat <<'EOF'\n     [new message]\n     EOF\n     )\\\"\n     ```\n   - Verify the amend succeeded with `git log -1 --oneline`\""
              },
              {
                "name": "/commit",
                "description": "Create a well-formatted commit from staged changes",
                "path": "git/commands/commit.md",
                "frontmatter": {
                  "description": "Create a well-formatted commit from staged changes"
                },
                "content": "IMPORTANT: Immediately use the Task tool with subagent_type=\"git:code-committer\" to delegate ALL work to the code-committer agent. Do NOT do any analysis or work in the main context.\n\nUse this exact prompt for the agent:\n\"Execute the commit workflow following these steps:\n\n## MANDATORY REQUIREMENTS - READ BEFORE PROCEEDING\n\n**REQUIREMENT 1 - STAGED CHANGES ONLY:**\nThis command ONLY commits already-staged changes. NEVER run `git add` under any circumstance. If there are no staged changes, show an error and stop immediately.\n\n**REQUIREMENT 2 - USE AskUserQuestion TOOL:**\nYou MUST use the AskUserQuestion tool to get user confirmation. NEVER ask questions in plain text. NEVER output \"Would you like to proceed?\" or similar. NEVER end your response with a question. The ONLY way to ask for confirmation is by invoking the AskUserQuestion tool. If you cannot use this tool, STOP and report an error.\n\n**REQUIREMENT 3 - NO AI ATTRIBUTION:**\nNEVER add \"Generated with Claude Code\", \"Co-Authored-By: Claude\", or any AI-related text to commit messages.\n\n1. **Verify Staged Changes**\n   - Run `git status` to check for staged changes\n   - If no staged changes found, show error and STOP:\n     ```\n     Error: No staged changes found.\n\n     Please stage your changes first:\n       git add <files>\n\n     Or stage all changes:\n       git add .\n     ```\n   - Do NOT offer to stage files. Do NOT run git add. Just stop.\n\n2. **Analyze Changes**\n   - Run `git diff --staged` to see what will be committed\n   - Run `git log -5 --oneline` to match project commit style\n   - Determine the type of changes (feature, fix, refactor, etc.)\n\n3. **Draft Commit Message**\n   - Follow the **commit-standards** skill for all formatting rules\n   - Choose appropriate imperative verb (adds, fixes, updates, removes, refactors, improves)\n   - Keep first line under 50 characters\n   - Add bullet points for complex changes\n   - CRITICAL: Never mention AI, Claude, or tools in the message\n\n4. **Present Message and Get Confirmation (USE AskUserQuestion TOOL - NO EXCEPTIONS)**\n\n   Invoke the AskUserQuestion tool with:\n   - Question: \\\"Commit with this message?\\n\\n[Insert the complete formatted commit message here]\\\"\n   - Header: \\\"Commit\\\"\n   - Options: [\\\"Yes\\\" - Commit this message]\n   - multiSelect: false\n\n   The tool provides an \"Other\" option automatically. If user types in Other:\n   - Treat their input as instructions to modify the message (e.g., \"make it shorter\", \"change adds to fixes\")\n   - Update the message and invoke AskUserQuestion again\n   - Repeat until user selects \"Yes\"\n\n   If AskUserQuestion is unavailable: STOP with error \"AskUserQuestion tool not available. Cannot proceed.\"\n\n5. **Execute Commit**\n   - After user confirms, execute using heredoc format:\n     ```bash\n     git commit -m \\\"$(cat <<'EOF'\n     [message]\n     EOF\n     )\\\"\n     ```\n   - Verify the commit succeeded with `git status`\""
              }
            ],
            "skills": [
              {
                "name": "commit-standards",
                "description": "Standards for writing clear, concise git commit messages. Use when creating commits, reviewing commit history, or establishing git workflow conventions.",
                "path": "git/skills/commit-standards/SKILL.md",
                "frontmatter": {
                  "name": "commit-standards",
                  "description": "Standards for writing clear, concise git commit messages. Use when creating commits, reviewing commit history, or establishing git workflow conventions."
                },
                "content": "# Commit Standards\n\nStandards for writing clear, concise git commit messages that communicate changes effectively.\n\n## Key Principles\n1. **Start with an imperative verb** - adds, fixes, updates, removes, refactors\n2. **Keep it short** - First line under 50 characters\n3. **Be specific** - Describe what changed, not what was wrong\n4. **Use simple language** - Avoid fancy or technical jargon when plain words work\n5. **Add context when needed** - Use bullet points in the body to explain why\n\n## Instructions\n\nWhen creating a commit message:\n\n1. Analyze the staged changes with `git diff --staged`\n2. Review recent commits with `git log -5 --oneline` to match project style\n3. Choose the appropriate verb based on change type:\n   - **Adds** - New files, features, or functionality\n   - **Fixes** - Bug fixes or corrections\n   - **Updates** - Changes to existing features\n   - **Refactors** - Code cleanup without changing behavior\n   - **Removes** - Deleting files or features\n   - **Improves** - Performance or quality enhancements\n4. Keep the first line under 50 characters\n5. Add bullet points in the body for complex changes\n6. **ABSOLUTELY CRITICAL**: Never mention AI, Claude, or other tools in commit messages - NO attribution text, NO co-author lines, NO emoji, NO exceptions\n\n## Examples\n\n### Good Commit Messages\n```\nAdds user authentication\n\n- Creates login and registration pages\n- Adds JWT token handling\n- Stores user session in localStorage\n```\n\n```\nFixes payment processing error\n\n- Validates amount before charging\n- Handles network timeouts\n- Shows error message to user\n```\n\n```\nUpdates installation instructions\n```\n\n### Bad Commit Messages\nâŒ `update stuff`\nâŒ `fix bug`\nâŒ `WIP`\nâŒ `Refactors authentication logic with help from Claude`\n\n## Related Files\n- `message-format.md` - Detailed commit message format rules\n- `examples.md` - Good and bad commit message examples\n- `best-practices.md` - Git workflow best practices"
              }
            ]
          },
          {
            "name": "go",
            "description": "Comprehensive Go development assistance from project initialization through deployment, enforcing Go community best practices and modern development principles",
            "source": "./tech-stacks/go",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add IvanTorresEdge/molcajete.ai",
              "/plugin install go@Molcajete.ai"
            ],
            "signals": {
              "stars": 0,
              "forks": 1,
              "pushed_at": "2026-01-06T21:16:55Z",
              "created_at": "2025-11-13T04:11:22Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/bench",
                "description": "Run benchmarks",
                "path": "tech-stacks/go/commands/bench.md",
                "frontmatter": {
                  "description": "Run benchmarks"
                },
                "content": "# Run Benchmarks\n\nExecute performance benchmarks.\n\nUse the Task tool to launch the **tester** agent with instructions:\n\n1. Run `go test -bench=. -benchmem ./...`\n2. Display benchmark results (iterations, time, memory)\n3. If previous results exist, compare using benchstat\n4. Identify performance regressions\n5. Suggest areas for optimization if needed\n\n**Benchmark Output:**\n- ns/op - Nanoseconds per operation\n- B/op - Bytes allocated per operation\n- allocs/op - Allocations per operation\n\nReference the benchmarking skill."
              },
              {
                "name": "/build",
                "description": "Build application using Makefile to ./bin directory",
                "path": "tech-stacks/go/commands/build.md",
                "frontmatter": {
                  "description": "Build application using Makefile to ./bin directory"
                },
                "content": "# Build Application\n\nBuild the application using the Makefile.\n\nUse the Task tool to launch the **developer** agent with instructions:\n\n1. Verify Makefile exists (create if missing)\n2. Run `make fmt` to format code first\n3. Run `make build` to compile binary\n4. Verify binary is created in `./bin/` directory\n5. Display build success and binary location\n6. If build fails, show errors and suggest fixes\n\n**Build Requirements:**\n- MUST use `make build`, never `go build` directly\n- Binary MUST be in `./bin/` directory\n- Code MUST be formatted before building\n\nReference the code-quality skill."
              },
              {
                "name": "/coverage",
                "description": "Generate coverage report",
                "path": "tech-stacks/go/commands/coverage.md",
                "frontmatter": {
                  "description": "Generate coverage report"
                },
                "content": "# Generate Coverage Report\n\nGenerate and analyze test coverage.\n\nUse the Task tool to launch the **tester** agent with instructions:\n\n1. Run `make coverage` (or `go test -coverprofile=coverage.out ./...`)\n2. Generate HTML coverage report: `go tool cover -html=coverage.out`\n3. Display coverage percentage\n4. Show uncovered lines/functions\n5. Suggest areas to improve coverage\n6. Open coverage report in browser if possible\n\nReference the coverage-analysis skill."
              },
              {
                "name": "/debug",
                "description": "Debug tests or application",
                "path": "tech-stacks/go/commands/debug.md",
                "frontmatter": {
                  "description": "Debug tests or application"
                },
                "content": "# Debug Tests or Application\n\nDebug failing tests or runtime issues.\n\nUse the Task tool to launch the **debugger** agent with instructions:\n\n1. Ask user what to debug (tests, specific function, runtime issue)\n2. If tests:\n   - Run with verbose output: `go test -v`\n   - Run with race detector if concurrent: `go test -race -v`\n   - Run specific test: `go test -v -run TestName`\n3. Analyze error messages and stack traces\n4. Check for common issues:\n   - Race conditions\n   - Nil pointer dereferences\n   - Goroutine leaks\n   - Deadlocks\n5. Provide diagnosis and specific fix recommendations\n\n**Debugging Tools:**\n- Verbose test output (`-v`)\n- Race detector (`-race`)\n- Goroutine profiling\n- Stack traces\n- Log analysis\n\nReference the concurrency-patterns and error-handling skills."
              },
              {
                "name": "/deploy",
                "description": "Deploy application",
                "path": "tech-stacks/go/commands/deploy.md",
                "frontmatter": {
                  "description": "Deploy application"
                },
                "content": "# Deploy Application\n\nDeploy the application to target environment.\n\nUse the Task tool to launch the **deployer** agent with instructions:\n\n1. Ask user for deployment target:\n   - Docker (local/remote)\n   - Kubernetes (specify cluster)\n   - AWS Lambda\n   - Google Cloud Run\n   - Other platform\n2. Verify build artifacts exist\n3. Create deployment configuration if needed\n4. Deploy to target environment\n5. Validate deployment (health checks)\n6. Display deployment URL/status\n7. Show logs if deployment fails\n\n**Deployment Steps:**\n- Build/verify artifacts\n- Configure environment\n- Deploy to platform\n- Validate health checks\n- Monitor initial logs\n\nReference the deployment-strategies skill."
              },
              {
                "name": "/docker-build",
                "description": "Build optimized Docker image",
                "path": "tech-stacks/go/commands/docker-build.md",
                "frontmatter": {
                  "description": "Build optimized Docker image"
                },
                "content": "# Build Docker Image\n\nCreate an optimized Docker image for the application.\n\nUse the Task tool to launch the **deployer** agent with instructions:\n\n1. Check if Dockerfile exists\n2. If not, create multi-stage Dockerfile:\n   - Build stage: golang:alpine\n   - Runtime stage: alpine or distroless\n3. Optimize for size (CGO_ENABLED=0, static binary)\n4. Build Docker image: `docker build -t app:latest .`\n5. Show image size\n6. Test container locally: `docker run app:latest`\n7. Suggest improvements if needed\n\n**Best Practices:**\n- Multi-stage builds\n- Static binaries (CGO_ENABLED=0)\n- Small base images (Alpine/distroless)\n- Layer caching\n- Health checks\n\nReference the docker-patterns skill."
              },
              {
                "name": "/docker-run",
                "description": "Run Docker container",
                "path": "tech-stacks/go/commands/docker-run.md",
                "frontmatter": {
                  "description": "Run Docker container"
                },
                "content": "# Run Docker Container\n\nRun the Docker container locally for testing.\n\nUse the Task tool to launch the **deployer** agent with instructions:\n\n1. Verify Docker image exists (build if needed)\n2. Run container: `docker run -p 8080:8080 app:latest`\n3. Test container functionality\n4. Show container logs\n5. Verify health checks (if configured)\n6. Stop container when done\n\n**Docker Run Options:**\n- `-p` - Port mapping\n- `-e` - Environment variables\n- `-v` - Volume mounts\n- `--rm` - Remove container after exit\n- `-d` - Detached mode\n\nReference the docker-patterns skill."
              },
              {
                "name": "/fmt",
                "description": "Format code with go fmt",
                "path": "tech-stacks/go/commands/fmt.md",
                "frontmatter": {
                  "description": "Format code with go fmt"
                },
                "content": "# Format Code\n\nFormat all Go code using go fmt.\n\nUse the Task tool to launch the **developer** agent with instructions:\n\n1. Run `make fmt` (or `go fmt ./...`)\n2. Show which files were formatted\n3. Verify all code is now properly formatted\n4. Display success message\n\n**Note:** This should be run after EVERY code change.\n\nReference the code-quality skill."
              },
              {
                "name": "/generate",
                "description": "Run go generate",
                "path": "tech-stacks/go/commands/generate.md",
                "frontmatter": {
                  "description": "Run go generate"
                },
                "content": "# Run Go Generate\n\nExecute go generate directives in the codebase.\n\nUse the Task tool to launch the **developer** agent with instructions:\n\n1. Find files with //go:generate directives\n2. Run `go generate ./...`\n3. Show which files were generated\n4. Verify generated code compiles\n5. Display any errors\n\n**Common Go Generate Uses:**\n- Mock generation (mockgen)\n- String method generation (stringer)\n- Protocol buffer compilation (protoc-gen-go)\n- SQL code generation (sqlc)\n- Wire dependency injection\n\n**Example Directive:**\n```go\n//go:generate mockgen -source=interface.go -destination=mock.go\n```\n\nReference the code-quality skill."
              },
              {
                "name": "/init",
                "description": "Initialize new Go project with Makefile and build structure",
                "path": "tech-stacks/go/commands/init.md",
                "frontmatter": {
                  "description": "Initialize new Go project with Makefile and build structure"
                },
                "content": "# Initialize Go Project\n\nInitialize a new Go project with user-selected structure.\n\nUse the Task tool to launch the **developer** agent with instructions:\n\n1. Ask user for project name and module path\n2. Ask user to select project structure:\n   - Standard layout (golang-standards)\n   - Hexagonal architecture\n   - Flat structure (simple)\n3. Create directory structure (including `bin/` directory)\n4. Initialize go.mod\n5. Create main.go with basic structure\n6. **REQUIRED: Create Makefile** with:\n   - `build` target (builds to `./bin/` directory)\n   - `run` target\n   - `test` target\n   - `fmt` target (runs `go fmt`)\n   - `lint` target\n   - `clean` target (removes `bin/` directory)\n7. Create .gitignore (must include `bin/` directory)\n8. Create README.md with:\n   - Project description\n   - Build instructions using Make\n   - Development principles (YAGNI, KISS, Readability)\n9. Initialize git repository (if not exists)\n10. Run `make fmt` to format all code\n11. Run `make build` to verify setup\n12. Display next steps\n\n**Build System Requirements:**\n- Makefile is REQUIRED\n- Binaries must build to `./bin/` directory\n- Never build to project root\n- Include all standard targets\n\nReference the project-structure and code-quality skills."
              },
              {
                "name": "/lint",
                "description": "Run linters",
                "path": "tech-stacks/go/commands/lint.md",
                "frontmatter": {
                  "description": "Run linters"
                },
                "content": "# Run Linters\n\nRun golangci-lint to check code quality.\n\nUse the Task tool to launch the **developer** agent with instructions:\n\n1. Check if golangci-lint is installed\n2. Run `make lint` (or `golangci-lint run`)\n3. Display linting issues by category\n4. Suggest fixes for common issues\n5. Explain lint errors if unclear\n\n**Common Linters:**\n- gofmt, goimports (formatting)\n- govet (suspicious constructs)\n- errcheck (unchecked errors)\n- staticcheck (advanced analysis)\n- gosec (security issues)\n\nReference the code-quality skill."
              },
              {
                "name": "/mod-tidy",
                "description": "Tidy dependencies",
                "path": "tech-stacks/go/commands/mod-tidy.md",
                "frontmatter": {
                  "description": "Tidy dependencies"
                },
                "content": "# Tidy Dependencies\n\nClean up go.mod and go.sum files.\n\nUse the Task tool to launch the **developer** agent with instructions:\n\n1. Run `go mod tidy`\n2. Show which dependencies were added/removed\n3. Verify go.mod and go.sum are updated\n4. Check for any errors\n5. Display summary of changes\n\n**What go mod tidy does:**\n- Adds missing module requirements\n- Removes unused module requirements\n- Updates go.sum\n- Ensures consistency\n\nReference the project-structure skill."
              },
              {
                "name": "/optimize",
                "description": "Analyze and optimize performance",
                "path": "tech-stacks/go/commands/optimize.md",
                "frontmatter": {
                  "description": "Analyze and optimize performance"
                },
                "content": "# Optimize Performance\n\nAnalyze and suggest performance optimizations.\n\nUse the Task tool to launch the **optimizer** agent with instructions:\n\n1. Profile the application (CPU and memory)\n2. Identify hot paths and bottlenecks\n3. Suggest optimizations based on profiling data\n4. Create benchmark baseline\n5. Optionally apply optimizations (with user approval)\n6. Re-run benchmarks\n7. Compare before/after using benchstat\n8. Document performance improvements\n\n**Optimization Approach:**\n1. Profile first (never guess)\n2. Focus on actual bottlenecks\n3. Benchmark before and after\n4. Maintain readability\n5. Document why optimizations were made\n\nReference the performance-profiling and optimization-techniques skills."
              },
              {
                "name": "/profile",
                "description": "Profile application performance",
                "path": "tech-stacks/go/commands/profile.md",
                "frontmatter": {
                  "description": "Profile application performance"
                },
                "content": "# Profile Application\n\nProfile the application for CPU, memory, or goroutine usage.\n\nUse the Task tool to launch the **optimizer** agent with instructions:\n\n1. Ask user for profile type (CPU, memory, goroutine, block, mutex)\n2. Run application/tests with profiling enabled\n3. Generate profile data\n4. Analyze profile with pprof\n5. Display top functions by resource usage\n6. Identify optimization opportunities\n7. Suggest specific improvements\n\n**Profile Commands:**\n- CPU: `go test -cpuprofile=cpu.out -bench=.`\n- Memory: `go test -memprofile=mem.out -bench=.`\n- Analyze: `go tool pprof -http=:8080 cpu.out`\n\nReference the performance-profiling and optimization-techniques skills."
              },
              {
                "name": "/run",
                "description": "Run application using Makefile",
                "path": "tech-stacks/go/commands/run.md",
                "frontmatter": {
                  "description": "Run application using Makefile"
                },
                "content": "# Run Application\n\nRun the application using the Makefile.\n\nUse the Task tool to launch the **developer** agent with instructions:\n\n1. Verify Makefile exists\n2. Run `make run` to build and run application\n3. Show application output\n4. If errors occur, display and suggest fixes\n\n**Requirements:**\n- Use `make run`, which typically depends on `make build`\n- Application runs from `./bin/` directory\n\nReference the project-structure skill."
              },
              {
                "name": "/sec-scan",
                "description": "Run security scanners",
                "path": "tech-stacks/go/commands/sec-scan.md",
                "frontmatter": {
                  "description": "Run security scanners"
                },
                "content": "# Security Scan\n\nRun comprehensive security analysis.\n\nUse the Task tool to launch the **security** agent with instructions:\n\n1. Run gosec for security issues: `gosec ./...`\n2. Run govulncheck for vulnerabilities: `govulncheck ./...`\n3. Collect and categorize findings\n4. Prioritize issues by severity (Critical, High, Medium, Low)\n5. Generate security report\n6. Recommend fixes for each issue\n7. Suggest prevention strategies\n\n**Security Checks:**\n- SQL injection\n- Command injection\n- Path traversal\n- Weak cryptography\n- Hardcoded secrets\n- Insecure randomness\n- Known vulnerabilities\n\nReference the security-scanning and secure-coding skills."
              },
              {
                "name": "/test-race",
                "description": "Run tests with race detector",
                "path": "tech-stacks/go/commands/test-race.md",
                "frontmatter": {
                  "description": "Run tests with race detector"
                },
                "content": "# Run Tests with Race Detector\n\nExecute tests with Go's race detector to catch concurrency issues.\n\nUse the Task tool to launch the **tester** agent with instructions:\n\n1. Run `make test-race` (or `go test -race -v ./...`)\n2. Show test results\n3. Display any race conditions detected\n4. Explain race condition issues if found\n5. Suggest fixes for race conditions\n\n**Note:** Race detector is essential for detecting concurrent access issues.\n\nReference the testing-patterns and concurrency-patterns skills."
              },
              {
                "name": "/test",
                "description": "Run test suite with coverage",
                "path": "tech-stacks/go/commands/test.md",
                "frontmatter": {
                  "description": "Run test suite with coverage"
                },
                "content": "# Run Tests\n\nExecute the test suite with optional race detection and coverage.\n\nUse the Task tool to launch the **tester** agent with instructions:\n\n1. Run `make test` (or `go test -v ./...` if no Makefile)\n2. Show test results with pass/fail counts\n3. Display any failing test details\n4. Optionally run with race detector (`make test-race`)\n5. Generate coverage report if requested (`make coverage`)\n6. Show coverage percentage\n7. Suggest improvements if coverage is low\n\nReference the testing-patterns and coverage-analysis skills."
              },
              {
                "name": "/vet",
                "description": "Run go vet",
                "path": "tech-stacks/go/commands/vet.md",
                "frontmatter": {
                  "description": "Run go vet"
                },
                "content": "# Run Go Vet\n\nRun go vet to examine code for suspicious constructs.\n\nUse the Task tool to launch the **developer** agent with instructions:\n\n1. Run `go vet ./...`\n2. Display any issues found\n3. Explain each issue\n4. Suggest fixes\n\n**Go Vet Checks:**\n- Unreachable code\n- Useless assignments\n- Impossible conditions\n- Printf format errors\n- Suspicious constructs\n\nReference the code-quality skill."
              },
              {
                "name": "/vuln-check",
                "description": "Check for vulnerable dependencies",
                "path": "tech-stacks/go/commands/vuln-check.md",
                "frontmatter": {
                  "description": "Check for vulnerable dependencies"
                },
                "content": "# Check Vulnerabilities\n\nCheck dependencies for known vulnerabilities.\n\nUse the Task tool to launch the **security** agent with instructions:\n\n1. Run `govulncheck ./...`\n2. Display vulnerabilities found in dependencies\n3. Show vulnerability details (CVE, severity, affected versions)\n4. Recommend updates or mitigations\n5. Check if vulnerabilities are actually used in code\n6. Suggest dependency updates\n\n**Note:** govulncheck only reports vulnerabilities in code paths that are actually used.\n\nReference the security-scanning skill."
              }
            ],
            "skills": [
              {
                "name": "benchmarking",
                "description": "Performance benchmarking techniques and analysis. Use when measuring performance.",
                "path": "tech-stacks/go/skills/benchmarking/SKILL.md",
                "frontmatter": {
                  "name": "benchmarking",
                  "description": "Performance benchmarking techniques and analysis. Use when measuring performance."
                },
                "content": "# Benchmarking Skill\n\nPerformance benchmarking techniques for Go.\n\n## When to Use\n\nUse when measuring or comparing performance.\n\n## Writing Benchmarks\n\n```go\nfunc BenchmarkGetUser(b *testing.B) {\n    svc := NewService()\n    ctx := context.Background()\n\n    b.ResetTimer()\n    for i := 0; i < b.N; i++ {\n        _, _ = svc.GetUser(ctx, 1)\n    }\n}\n```\n\n## Running Benchmarks\n\n```bash\n# Run all benchmarks\ngo test -bench=. -benchmem ./...\n\n# Specific benchmark\ngo test -bench=BenchmarkGetUser -benchmem\n\n# Multiple runs for accuracy\ngo test -bench=. -benchmem -count=10\n```\n\n## Analyzing Results\n\n```\nBenchmarkGetUser-8    1000000    1250 ns/op    320 B/op    5 allocs/op\n```\n\n- `1000000` - iterations\n- `1250 ns/op` - time per operation\n- `320 B/op` - bytes allocated\n- `5 allocs/op` - allocations per operation\n\n## Comparing with benchstat\n\n```bash\ngo test -bench=. -count=10 > old.txt\n# make changes\ngo test -bench=. -count=10 > new.txt\nbenchstat old.txt new.txt\n```\n\n## Best Practices\n\n- Use `b.ResetTimer()` after setup\n- Run multiple times (`-count`)\n- Use `benchstat` for comparison\n- Focus on allocations\n- Profile to understand results"
              },
              {
                "name": "code-quality",
                "description": "Go idioms, style guide, and best practices with YAGNI/KISS principles. Use when writing or reviewing Go code.",
                "path": "tech-stacks/go/skills/code-quality/SKILL.md",
                "frontmatter": {
                  "name": "code-quality",
                  "description": "Go idioms, style guide, and best practices with YAGNI/KISS principles. Use when writing or reviewing Go code."
                },
                "content": "# Code Quality Skill\n\nThis skill provides Go code quality standards with YAGNI/KISS development philosophy.\n\n## When to Use\n\nUse this skill when:\n- Writing new Go code\n- Reviewing code quality\n- Establishing coding standards\n- Refactoring code\n\n## Core Development Principles\n\n### 1. YAGNI (You Aren't Gonna Need It)\n- Only implement current requirements\n- Don't add features for hypothetical future needs\n- Refactor when actual needs arise\n- Avoid premature abstraction\n\n**Example:**\n```go\n// Good - Simple, addresses current need\nfunc GetUser(id int) (*User, error) {\n    return db.Query(\"SELECT * FROM users WHERE id = ?\", id)\n}\n\n// Bad - YAGNI violation, adding unused caching\nfunc GetUser(id int) (*User, error) {\n    if cached, ok := cache.Get(id); ok {\n        return cached, nil\n    }\n    user, err := db.Query(\"SELECT * FROM users WHERE id = ?\", id)\n    if err == nil {\n        cache.Set(id, user)\n    }\n    return user, err\n}\n```\n\n### 2. KISS (Keep It Simple, Stupid)\n- Prefer simple, straightforward solutions\n- Don't prematurely optimize\n- Profile before optimizing\n- Clear code beats clever code\n\n**Example:**\n```go\n// Good - Simple and clear\nfunc Sum(numbers []int) int {\n    sum := 0\n    for _, n := range numbers {\n        sum += n\n    }\n    return sum\n}\n\n// Bad - Unnecessary complexity\nfunc Sum(numbers []int) int {\n    ch := make(chan int)\n    go func() {\n        sum := 0\n        for _, n := range numbers {\n            sum += n\n        }\n        ch <- sum\n    }()\n    return <-ch\n}\n```\n\n### 3. Readability First\n- Code is read more than written\n- Use descriptive names\n- Keep functions focused and short\n- Comment non-obvious logic\n\n### 4. Formatting Standards\n- **ALWAYS run `go fmt` after changes**\n- Use `goimports` for import management\n- Consistent formatting across codebase\n\n### 5. Build System Standards\n- **ALWAYS create a Makefile**\n- **ALWAYS build to `./bin/` directory**\n- Never build binaries to project root\n- Use `make build`, never `go build` directly\n- Include `fmt`, `test`, `lint`, `clean` targets\n\n## Go Style Guide\n\n### Naming Conventions\n\n```go\n// Good naming\ntype UserService struct {}\nfunc (s *UserService) GetUser(ctx context.Context, id int) (*User, error)\nvar ErrNotFound = errors.New(\"not found\")\nconst MaxRetries = 3\n\n// Bad naming\ntype Userservice struct {}\nfunc (s *Userservice) get_user(ID int) (*User, error)\nvar errnotfound = errors.New(\"not found\")\nconst max_retries = 3\n```\n\n**Rules:**\n- MixedCaps (camelCase/PascalCase), not snake_case\n- Exported names start with capital letter\n- Acronyms are all caps: `HTTP`, `ID`, `URL`\n- Short, descriptive names\n- Single-letter names for short-lived variables (i, j, k)\n\n### Package Organization\n\n```go\n// Good - grouped by functionality\npackage user\n\ntype Service struct {}\ntype Repository struct {}\ntype Handler struct {}\n\n// Bad - grouped by type\npackage services\ntype UserService struct {}\ntype OrderService struct {}\n```\n\n### Interface Design\n\n```go\n// Good - small, focused interfaces\ntype Reader interface {\n    Read(p []byte) (n int, err error)\n}\n\ntype Writer interface {\n    Write(p []byte) (n int, err error)\n}\n\n// Bad - large interface\ntype FileManager interface {\n    Read(p []byte) (n int, err error)\n    Write(p []byte) (n int, err error)\n    Close() error\n    Seek(offset int64, whence int) (int64, error)\n    Stat() (FileInfo, error)\n}\n```\n\n**Rules:**\n- Accept interfaces, return structs\n- Keep interfaces small\n- Define interfaces at point of use\n- Interface names often end in -er\n\n### Error Handling\n\n```go\n// Good - context, clear naming, simple logic\nfunc (s *Service) GetUser(ctx context.Context, id int) (*User, error) {\n    user, err := s.repo.FindByID(ctx, id)\n    if err != nil {\n        return nil, fmt.Errorf(\"failed to get user: %w\", err)\n    }\n    return user, nil\n}\n\n// Bad - missing context, unclear error\nfunc (s *Service) GetUser(id int) (*User, error) {\n    user, err := s.repo.FindByID(id)\n    if err != nil {\n        return nil, err\n    }\n    return user, nil\n}\n```\n\n### Context Usage\n\n```go\n// Good - context first parameter\nfunc ProcessRequest(ctx context.Context, req Request) error {\n    // Check cancellation\n    select {\n    case <-ctx.Done():\n        return ctx.Err()\n    default:\n    }\n    return doWork(ctx, req)\n}\n\n// Bad - missing context\nfunc ProcessRequest(req Request) error {\n    return doWork(req)\n}\n```\n\n### Code Organization\n\n```go\n// Good structure\ntype Server struct {\n    host string\n    port int\n}\n\nfunc NewServer(host string, port int) *Server {\n    return &Server{host: host, port: int}\n}\n\nfunc (s *Server) Start() error {\n    // implementation\n}\n\n// Bad - scattered functions\nfunc StartServer(host string, port int) error {}\nfunc StopServer(s *Server) error {}\n```\n\n## Common Patterns\n\n### Functional Options\n\n```go\ntype Server struct {\n    host    string\n    port    int\n    timeout time.Duration\n}\n\ntype Option func(*Server)\n\nfunc WithHost(host string) Option {\n    return func(s *Server) { s.host = host }\n}\n\nfunc WithPort(port int) Option {\n    return func(s *Server) { s.port = port }\n}\n\nfunc NewServer(opts ...Option) *Server {\n    s := &Server{\n        host:    \"localhost\",\n        port:    8080,\n        timeout: 30 * time.Second,\n    }\n    for _, opt := range opts {\n        opt(s)\n    }\n    return s\n}\n\n// Usage\nsrv := NewServer(WithHost(\"0.0.0.0\"), WithPort(3000))\n```\n\n### Table-Driven Tests\n\n```go\nfunc TestAdd(t *testing.T) {\n    tests := []struct {\n        name string\n        a, b int\n        want int\n    }{\n        {\"positive\", 1, 2, 3},\n        {\"negative\", -1, -2, -3},\n        {\"mixed\", 1, -1, 0},\n    }\n\n    for _, tt := range tests {\n        t.Run(tt.name, func(t *testing.T) {\n            got := Add(tt.a, tt.b)\n            if got != tt.want {\n                t.Errorf(\"Add(%d, %d) = %d; want %d\", tt.a, tt.b, got, tt.want)\n            }\n        })\n    }\n}\n```\n\n## Makefile Requirements\n\n```makefile\n.PHONY: build test clean fmt lint\n\nbuild:\n\\t@mkdir -p bin\n\\tgo build -o bin/myapp cmd/myapp/main.go\n\nfmt:\n\\tgo fmt ./...\n\ntest:\n\\tgo test -v ./...\n\nlint:\n\\tgolangci-lint run\n\nclean:\n\\trm -rf bin/\n```\n\n## golangci-lint Configuration\n\nCreate `.golangci.yml`:\n\n```yaml\nlinters:\n  enable:\n    - gofmt\n    - goimports\n    - govet\n    - errcheck\n    - staticcheck\n    - gosec\n    - gosimple\n    - ineffassign\n    - unused\n\nlinters-settings:\n  gofmt:\n    simplify: true\n  goimports:\n    local-prefixes: github.com/yourorg/\n```\n\n## Anti-Patterns to Avoid\n\n### 1. Premature Optimization\n```go\n// Bad - optimizing without profiling\ntype Cache struct {\n    mu    sync.RWMutex\n    items map[string]*Item\n}\n\n// Good - start simple (KISS)\ntype Cache struct {\n    items map[string]*Item\n}\n```\n\n### 2. Over-Engineering\n```go\n// Bad - YAGNI violation\ntype UserFactory interface {\n    CreateUser() User\n}\n\ntype StandardUserFactory struct {}\n\nfunc (f *StandardUserFactory) CreateUser() User {\n    return User{}\n}\n\n// Good - simple and direct\nfunc NewUser() User {\n    return User{}\n}\n```\n\n### 3. Ignoring Errors\n```go\n// Bad\ndata, _ := ioutil.ReadFile(\"file.txt\")\n\n// Good\ndata, err := ioutil.ReadFile(\"file.txt\")\nif err != nil {\n    return fmt.Errorf(\"failed to read file: %w\", err)\n}\n```\n\n## Best Practices Summary\n\n1. **YAGNI** - Implement only what's needed now\n2. **KISS** - Simple solutions, optimize after profiling\n3. **Readability** - Clear code over clever code\n4. **go fmt** - Format after every change\n5. **Makefile** - Use make build, never go build directly\n6. **Context** - Pass context.Context as first parameter\n7. **Errors** - Always check and wrap errors\n8. **Interfaces** - Keep small, define at point of use\n9. **Names** - Clear, descriptive, follow conventions\n10. **Tests** - Table-driven, comprehensive"
              },
              {
                "name": "concurrency-patterns",
                "description": "Goroutines, channels, and sync patterns for concurrent programming. Use when implementing concurrent operations.",
                "path": "tech-stacks/go/skills/concurrency-patterns/SKILL.md",
                "frontmatter": {
                  "name": "concurrency-patterns",
                  "description": "Goroutines, channels, and sync patterns for concurrent programming. Use when implementing concurrent operations."
                },
                "content": "# Concurrency Patterns Skill\n\nGo concurrency patterns using goroutines, channels, and synchronization primitives.\n\n## When to Use\n\nUse this skill when:\n- Implementing concurrent operations\n- Managing goroutines\n- Using channels for communication\n- Synchronizing concurrent access\n\n## Goroutines\n\n### Basic Usage\n\n```go\n// Start a goroutine\ngo func() {\n    fmt.Println(\"Hello from goroutine\")\n}()\n\n// With parameters\ngo processItem(item)\n\n// Anonymous function with closure\nfor _, item := range items {\n    item := item // capture range variable\n    go func() {\n        process(item)\n    }()\n}\n```\n\n### Context for Cancellation\n\n```go\nfunc worker(ctx context.Context) {\n    for {\n        select {\n        case <-ctx.Done():\n            return\n        default:\n            doWork()\n        }\n    }\n}\n\nctx, cancel := context.WithCancel(context.Background())\ngo worker(ctx)\n// Later...\ncancel() // stop the worker\n```\n\n## Channels\n\n### Basic Patterns\n\n```go\n// Unbuffered channel\nch := make(chan int)\n\n// Buffered channel\nch := make(chan int, 10)\n\n// Send\nch <- 42\n\n// Receive\nvalue := <-ch\n\n// Receive with ok\nvalue, ok := <-ch\nif !ok {\n    // channel closed\n}\n\n// Close\nclose(ch)\n```\n\n### Fan-Out/Fan-In\n\n```go\nfunc fanOut(input <-chan int, workers int) []<-chan int {\n    channels := make([]<-chan int, workers)\n    for i := 0; i < workers; i++ {\n        channels[i] = worker(input)\n    }\n    return channels\n}\n\nfunc fanIn(channels ...<-chan int) <-chan int {\n    out := make(chan int)\n    var wg sync.WaitGroup\n\n    for _, ch := range channels {\n        wg.Add(1)\n        go func(c <-chan int) {\n            defer wg.Done()\n            for v := range c {\n                out <- v\n            }\n        }(ch)\n    }\n\n    go func() {\n        wg.Wait()\n        close(out)\n    }()\n\n    return out\n}\n```\n\n### Pipeline Pattern\n\n```go\nfunc generator(nums ...int) <-chan int {\n    out := make(chan int)\n    go func() {\n        defer close(out)\n        for _, n := range nums {\n            out <- n\n        }\n    }()\n    return out\n}\n\nfunc square(in <-chan int) <-chan int {\n    out := make(chan int)\n    go func() {\n        defer close(out)\n        for n := range in {\n            out <- n * n\n        }\n    }()\n    return out\n}\n\n// Usage\nnums := generator(1, 2, 3, 4)\nsquares := square(nums)\nfor v := range squares {\n    fmt.Println(v)\n}\n```\n\n## Worker Pools\n\n```go\nfunc workerPool(ctx context.Context, jobs <-chan Job, results chan<- Result, numWorkers int) {\n    var wg sync.WaitGroup\n\n    for i := 0; i < numWorkers; i++ {\n        wg.Add(1)\n        go func() {\n            defer wg.Done()\n            for {\n                select {\n                case <-ctx.Done():\n                    return\n                case job, ok := <-jobs:\n                    if !ok {\n                        return\n                    }\n                    result := processJob(job)\n                    select {\n                    case results <- result:\n                    case <-ctx.Done():\n                        return\n                    }\n                }\n            }\n        }()\n    }\n\n    wg.Wait()\n    close(results)\n}\n```\n\n## Synchronization\n\n### sync.WaitGroup\n\n```go\nvar wg sync.WaitGroup\n\nfor i := 0; i < 10; i++ {\n    wg.Add(1)\n    go func(id int) {\n        defer wg.Done()\n        process(id)\n    }(i)\n}\n\nwg.Wait() // wait for all goroutines\n```\n\n### sync.Mutex\n\n```go\ntype SafeCounter struct {\n    mu    sync.Mutex\n    count int\n}\n\nfunc (c *SafeCounter) Inc() {\n    c.mu.Lock()\n    defer c.mu.Unlock()\n    c.count++\n}\n\nfunc (c *SafeCounter) Value() int {\n    c.mu.Lock()\n    defer c.mu.Unlock()\n    return c.count\n}\n```\n\n### sync.RWMutex\n\n```go\ntype Cache struct {\n    mu    sync.RWMutex\n    items map[string]*Item\n}\n\nfunc (c *Cache) Get(key string) *Item {\n    c.mu.RLock()\n    defer c.mu.RUnlock()\n    return c.items[key]\n}\n\nfunc (c *Cache) Set(key string, item *Item) {\n    c.mu.Lock()\n    defer c.mu.Unlock()\n    c.items[key] = item\n}\n```\n\n### sync.Once\n\n```go\nvar (\n    instance *Singleton\n    once     sync.Once\n)\n\nfunc GetInstance() *Singleton {\n    once.Do(func() {\n        instance = &Singleton{}\n    })\n    return instance\n}\n```\n\n## errgroup\n\n```go\nimport \"golang.org/x/sync/errgroup\"\n\nfunc processParallel(ctx context.Context, items []Item) error {\n    g, ctx := errgroup.WithContext(ctx)\n\n    for _, item := range items {\n        item := item // capture\n        g.Go(func() error {\n            return processItem(ctx, item)\n        })\n    }\n\n    return g.Wait() // returns first error\n}\n```\n\n## Select Statement\n\n```go\nfunc handleRequests(ctx context.Context, requests <-chan Request, timeout time.Duration) {\n    for {\n        select {\n        case <-ctx.Done():\n            return\n        case req := <-requests:\n            processRequest(req)\n        case <-time.After(timeout):\n            log.Println(\"timeout\")\n        }\n    }\n}\n```\n\n## Avoiding Goroutine Leaks\n\n### Always Provide Exit Path\n\n```go\n// Good - can be stopped\nfunc worker(ctx context.Context) {\n    ticker := time.NewTicker(time.Second)\n    defer ticker.Stop()\n\n    for {\n        select {\n        case <-ctx.Done():\n            return // exit path\n        case <-ticker.C:\n            doWork()\n        }\n    }\n}\n\n// Bad - goroutine leak\nfunc worker() {\n    ticker := time.NewTicker(time.Second)\n    for range ticker.C {\n        doWork() // no way to stop\n    }\n}\n```\n\n### Close Channels to Signal Completion\n\n```go\nfunc generator(done <-chan struct{}) <-chan int {\n    out := make(chan int)\n    go func() {\n        defer close(out)\n        for i := 0; ; i++ {\n            select {\n            case out <- i:\n            case <-done:\n                return\n            }\n        }\n    }()\n    return out\n}\n```\n\n## Best Practices\n\n1. **Use context for cancellation** - Pass context.Context\n2. **Avoid shared memory** - Communicate via channels\n3. **Close channels from sender** - Not receiver\n4. **Check channel closure** - Use `value, ok := <-ch`\n5. **Capture range variables** - In goroutine loops\n6. **Use WaitGroup** - To wait for goroutines\n7. **Defer mutex unlocks** - Prevent deadlocks\n8. **Provide exit paths** - Prevent goroutine leaks\n9. **Use errgroup** - For error handling\n10. **Profile concurrent code** - Use race detector\n\n## Common Pitfalls\n\n### Forgetting to Capture Loop Variable\n\n```go\n// Bad\nfor _, item := range items {\n    go func() {\n        process(item) // wrong item!\n    }()\n}\n\n// Good\nfor _, item := range items {\n    item := item // capture\n    go func() {\n        process(item)\n    }()\n}\n```\n\n### Goroutine Leak\n\n```go\n// Bad - leaks goroutine\nfunc leak() {\n    ch := make(chan int)\n    go func() {\n        ch <- 1 // blocks forever if no receiver\n    }()\n}\n\n// Good - can complete\nfunc noLeak() {\n    ch := make(chan int, 1) // buffered\n    go func() {\n        ch <- 1 // won't block\n    }()\n}\n```\n\n### Race Conditions\n\n```go\n// Bad - data race\nvar counter int\nfor i := 0; i < 10; i++ {\n    go func() {\n        counter++ // race!\n    }()\n}\n\n// Good - synchronized\nvar mu sync.Mutex\nvar counter int\nfor i := 0; i < 10; i++ {\n    go func() {\n        mu.Lock()\n        counter++\n        mu.Unlock()\n    }()\n}\n```"
              },
              {
                "name": "coverage-analysis",
                "description": "Test coverage tracking and improvement strategies. Use when analyzing test coverage.",
                "path": "tech-stacks/go/skills/coverage-analysis/SKILL.md",
                "frontmatter": {
                  "name": "coverage-analysis",
                  "description": "Test coverage tracking and improvement strategies. Use when analyzing test coverage."
                },
                "content": "# Coverage Analysis Skill\n\nTest coverage analysis and improvement strategies.\n\n## When to Use\n\nUse when analyzing or improving test coverage.\n\n## Running Coverage\n\n```bash\n# Basic coverage\ngo test -cover ./...\n\n# Generate coverage profile\ngo test -coverprofile=coverage.out ./...\n\n# HTML report\ngo tool cover -html=coverage.out\n\n# Function-level coverage\ngo tool cover -func=coverage.out\n```\n\n## Interpreting Coverage\n\n```\ngithub.com/user/project/service/user.go:15:   GetUser         80.0%\ngithub.com/user/project/service/user.go:25:   CreateUser      100.0%\ngithub.com/user/project/service/user.go:35:   DeleteUser      0.0%\ntotal:                                         (statements)    75.5%\n```\n\n## Coverage Goals\n\n- **70-80%** - Good baseline\n- **80-90%** - Excellent\n- **90%+** - Diminishing returns\n- Focus on critical paths\n- Don't chase 100%\n\n## CI/CD Integration\n\n```yaml\n# GitHub Actions\n- name: Test with Coverage\n  run: |\n    go test -v -coverprofile=coverage.out ./...\n    go tool cover -func=coverage.out\n```\n\n## Best Practices\n\n- Track coverage trends\n- Cover critical paths first\n- Don't ignore edge cases\n- Quality over quantity"
              },
              {
                "name": "deployment-strategies",
                "description": "Deployment strategies for Go applications. Use when deploying applications.",
                "path": "tech-stacks/go/skills/deployment-strategies/SKILL.md",
                "frontmatter": {
                  "name": "deployment-strategies",
                  "description": "Deployment strategies for Go applications. Use when deploying applications."
                },
                "content": "# Deployment Strategies Skill\n\nDeployment patterns for Go applications.\n\n## When to Use\n\nUse when deploying Go applications to various platforms.\n\n## Kubernetes Deployment\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: myapp\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      containers:\n      - name: myapp\n        image: myapp:latest\n        ports:\n        - containerPort: 8080\n        env:\n        - name: DB_HOST\n          value: postgres\n        livenessProbe:\n          httpGet:\n            path: /health\n            port: 8080\n          initialDelaySeconds: 10\n          periodSeconds: 30\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 8080\n          initialDelaySeconds: 5\n          periodSeconds: 10\n        resources:\n          limits:\n            cpu: 500m\n            memory: 512Mi\n          requests:\n            cpu: 250m\n            memory: 256Mi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: myapp\nspec:\n  selector:\n    app: myapp\n  ports:\n  - port: 80\n    targetPort: 8080\n  type: LoadBalancer\n```\n\n## AWS Lambda\n\n```go\npackage main\n\nimport (\n    \"context\"\n    \"github.com/aws/aws-lambda-go/lambda\"\n)\n\ntype Request struct {\n    Name string `json:\"name\"`\n}\n\ntype Response struct {\n    Message string `json:\"message\"`\n}\n\nfunc handler(ctx context.Context, req Request) (Response, error) {\n    return Response{\n        Message: \"Hello \" + req.Name,\n    }, nil\n}\n\nfunc main() {\n    lambda.Start(handler)\n}\n```\n\n## Google Cloud Run\n\n```dockerfile\nFROM golang:1.23-alpine AS builder\nWORKDIR /app\nCOPY . .\nRUN CGO_ENABLED=0 go build -o server\n\nFROM alpine:latest\nCOPY --from=builder /app/server /server\nCMD [\"/server\"]\n```\n\nDeploy:\n```bash\ngcloud run deploy myapp --source . --region us-central1\n```\n\n## Best Practices\n\n1. **Health checks** - Implement /health and /ready endpoints\n2. **Resource limits** - Set CPU/memory limits\n3. **Graceful shutdown** - Handle SIGTERM\n4. **Configuration** - Use environment variables\n5. **Logging** - Structured logging to stdout\n6. **Monitoring** - Prometheus metrics\n7. **Secrets** - Use secret managers\n8. **Zero-downtime** - Rolling updates\n\n## Graceful Shutdown\n\n```go\nfunc main() {\n    srv := &http.Server{Addr: \":8080\"}\n\n    go func() {\n        if err := srv.ListenAndServe(); err != http.ErrServerClosed {\n            log.Fatal(err)\n        }\n    }()\n\n    // Wait for interrupt\n    quit := make(chan os.Signal, 1)\n    signal.Notify(quit, os.Interrupt, syscall.SIGTERM)\n    <-quit\n\n    // Graceful shutdown\n    ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)\n    defer cancel()\n\n    if err := srv.Shutdown(ctx); err != nil {\n        log.Fatal(err)\n    }\n}\n```"
              },
              {
                "name": "docker-patterns",
                "description": "Docker containerization best practices. Use when creating Dockerfiles.",
                "path": "tech-stacks/go/skills/docker-patterns/SKILL.md",
                "frontmatter": {
                  "name": "docker-patterns",
                  "description": "Docker containerization best practices. Use when creating Dockerfiles."
                },
                "content": "# Docker Patterns Skill\n\nDocker containerization best practices for Go.\n\n## When to Use\n\nUse when creating or optimizing Docker images.\n\n## Multi-Stage Dockerfile\n\n```dockerfile\n# Build stage\nFROM golang:1.23-alpine AS builder\n\nWORKDIR /app\n\n# Copy go mod files\nCOPY go.mod go.sum ./\nRUN go mod download\n\n# Copy source\nCOPY . .\n\n# Build static binary\nRUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main cmd/app/main.go\n\n# Runtime stage\nFROM alpine:latest\n\nRUN apk --no-cache add ca-certificates\n\nWORKDIR /root/\n\n# Copy binary from builder\nCOPY --from=builder /app/main .\n\nEXPOSE 8080\n\nCMD [\"./main\"]\n```\n\n## Distroless Image\n\n```dockerfile\n# Build stage\nFROM golang:1.23 AS builder\nWORKDIR /app\nCOPY go.* ./\nRUN go mod download\nCOPY . .\nRUN CGO_ENABLED=0 go build -o main cmd/app/main.go\n\n# Runtime stage\nFROM gcr.io/distroless/static-debian11\nCOPY --from=builder /app/main /\nCMD [\"/main\"]\n```\n\n## Docker Compose\n\n```yaml\nversion: '3.8'\n\nservices:\n  app:\n    build: .\n    ports:\n      - \"8080:8080\"\n    environment:\n      - DB_HOST=db\n      - DB_PORT=5432\n    depends_on:\n      - db\n\n  db:\n    image: postgres:15-alpine\n    environment:\n      - POSTGRES_PASSWORD=secret\n    volumes:\n      - db-data:/var/lib/postgresql/data\n\nvolumes:\n  db-data:\n```\n\n## .dockerignore\n\n```\nbin/\n.git/\n.gitignore\n*.md\n.env\n.vscode/\n.idea/\n*.test\ncoverage.out\n```\n\n## Best Practices\n\n1. **Multi-stage builds** - Small final images\n2. **Static binaries** - CGO_ENABLED=0\n3. **Small base images** - Alpine or distroless\n4. **Layer caching** - Copy go.mod before source\n5. **Health checks** - Add HEALTHCHECK instruction\n6. **Non-root user** - Run as non-root\n7. **.dockerignore** - Exclude unnecessary files\n8. **Security** - Scan with trivy\n\n## Health Check\n\n```dockerfile\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD wget --no-verbose --tries=1 --spider http://localhost:8080/health || exit 1\n```"
              },
              {
                "name": "documentation-standards",
                "description": "godoc conventions and documentation best practices. Use when documenting code.",
                "path": "tech-stacks/go/skills/documentation-standards/SKILL.md",
                "frontmatter": {
                  "name": "documentation-standards",
                  "description": "godoc conventions and documentation best practices. Use when documenting code."
                },
                "content": "# Documentation Standards Skill\n\nGo documentation conventions following godoc standards.\n\n## When to Use\n\nUse when writing or reviewing code documentation.\n\n## Package Documentation\n\n```go\n// Package user provides user management functionality.\n//\n// This package handles user authentication, authorization,\n// and profile management. It supports multiple authentication\n// providers and role-based access control.\n//\n// Example usage:\n//\n//     svc := user.NewService(db)\n//     user, err := svc.GetUser(ctx, userID)\n//     if err != nil {\n//         // handle error\n//     }\n//\npackage user\n```\n\n## Function Documentation\n\n```go\n// GetUser retrieves a user by ID.\n//\n// It returns an error if the user is not found or if\n// the database connection fails.\n//\n// Example:\n//\n//     user, err := GetUser(ctx, 1)\n//     if errors.Is(err, ErrNotFound) {\n//         // handle not found\n//     }\n//\nfunc GetUser(ctx context.Context, id int) (*User, error) {\n    // implementation\n}\n```\n\n## Type Documentation\n\n```go\n// User represents a system user with authentication details.\ntype User struct {\n    // ID is the unique identifier for the user.\n    ID int\n\n    // Name is the user's display name.\n    Name string\n\n    // Email is the user's email address.\n    // It must be unique across all users.\n    Email string\n}\n```\n\n## Example Functions\n\n```go\n// ExampleGetUser demonstrates how to retrieve a user.\nfunc ExampleGetUser() {\n    svc := NewService(db)\n    user, err := svc.GetUser(context.Background(), 1)\n    if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Println(user.Name)\n    // Output: John Doe\n}\n```\n\n## godoc Conventions\n\n1. **Start with symbol name** - \"GetUser retrieves...\"\n2. **Complete sentences** - Proper grammar and punctuation\n3. **No empty lines** - Between comment and declaration\n4. **Explain behavior** - What it does, not how\n5. **Document errors** - What errors can be returned\n6. **Provide examples** - For non-obvious usage\n\n## README.md Structure\n\n```markdown\n# Project Name\n\nBrief description.\n\n## Installation\n\n\\`\\`\\`bash\ngo get github.com/user/project\n\\`\\`\\`\n\n## Usage\n\n\\`\\`\\`go\npackage main\n\nimport \"github.com/user/project\"\n\nfunc main() {\n    // example code\n}\n\\`\\`\\`\n\n## Features\n\n- Feature 1\n- Feature 2\n\n## Building\n\n\\`\\`\\`bash\nmake build\n\\`\\`\\`\n\n## Testing\n\n\\`\\`\\`bash\nmake test\n\\`\\`\\`\n\n## License\n\nMIT\n```\n\n## Best Practices\n\n1. **Document all exports** - Public functions, types, constants\n2. **Be concise** - Clear but brief\n3. **Use examples** - For complex APIs\n4. **Keep updated** - Sync with code changes\n5. **Format correctly** - Follow godoc conventions\n6. **Link related items** - Reference related functions\n7. **Explain non-obvious** - Document \"why\", not \"what\""
              },
              {
                "name": "error-handling",
                "description": "Modern Go error handling patterns (Go 1.13+). Use when handling, creating, or wrapping errors.",
                "path": "tech-stacks/go/skills/error-handling/SKILL.md",
                "frontmatter": {
                  "name": "error-handling",
                  "description": "Modern Go error handling patterns (Go 1.13+). Use when handling, creating, or wrapping errors."
                },
                "content": "# Error Handling Skill\n\nModern error handling patterns following Go 1.13+ conventions.\n\n## When to Use\n\nUse this skill when:\n- Creating errors\n- Wrapping errors\n- Checking error types\n- Implementing error handling logic\n\n## Error Creation\n\n### Sentinel Errors\n\n```go\nvar (\n    ErrNotFound      = errors.New(\"not found\")\n    ErrUnauthorized  = errors.New(\"unauthorized\")\n    ErrInvalidInput  = errors.New(\"invalid input\")\n)\n\n// Usage\nif user == nil {\n    return ErrNotFound\n}\n```\n\n### Error Wrapping\n\n```go\n// Wrap errors with context\nfunc GetUser(ctx context.Context, id int) (*User, error) {\n    user, err := db.Query(ctx, id)\n    if err != nil {\n        return nil, fmt.Errorf(\"failed to get user %d: %w\", id, err)\n    }\n    return user, nil\n}\n```\n\n### Custom Error Types\n\n```go\ntype ValidationError struct {\n    Field string\n    Value interface{}\n    Err   error\n}\n\nfunc (e *ValidationError) Error() string {\n    return fmt.Sprintf(\"validation failed for %s=%v: %v\", e.Field, e.Value, e.Err)\n}\n\nfunc (e *ValidationError) Unwrap() error {\n    return e.Err\n}\n```\n\n## Error Checking\n\n### errors.Is\n\n```go\n// Check for specific error\nif errors.Is(err, ErrNotFound) {\n    return http.StatusNotFound\n}\n\n// Works with wrapped errors\nerr := fmt.Errorf(\"database error: %w\", ErrNotFound)\nerrors.Is(err, ErrNotFound) // true\n```\n\n### errors.As\n\n```go\n// Type assertion for error details\nvar validationErr *ValidationError\nif errors.As(err, &validationErr) {\n    log.Printf(\"validation failed: field=%s\", validationErr.Field)\n}\n```\n\n## Error Handling Patterns\n\n### Check-Early-Return\n\n```go\nfunc ProcessUser(ctx context.Context, id int) error {\n    user, err := GetUser(ctx, id)\n    if err != nil {\n        return fmt.Errorf(\"get user: %w\", err)\n    }\n\n    if err := ValidateUser(user); err != nil {\n        return fmt.Errorf(\"validate user: %w\", err)\n    }\n\n    if err := SaveUser(ctx, user); err != nil {\n        return fmt.Errorf(\"save user: %w\", err)\n    }\n\n    return nil\n}\n```\n\n### Error Context\n\n```go\n// Add context to errors\nfunc (s *Service) CreateOrder(ctx context.Context, order *Order) error {\n    if err := s.validateOrder(order); err != nil {\n        return fmt.Errorf(\"validation failed: %w\", err)\n    }\n\n    if err := s.repo.Save(ctx, order); err != nil {\n        return fmt.Errorf(\"failed to save order %d: %w\", order.ID, err)\n    }\n\n    return nil\n}\n```\n\n## Error Propagation\n\n### Simple Propagation\n\n```go\nfunc GetUser(id int) (*User, error) {\n    user, err := db.QueryUser(id)\n    if err != nil {\n        return nil, fmt.Errorf(\"query user: %w\", err)\n    }\n    return user, nil\n}\n```\n\n### Multi-Error Handling\n\n```go\nfunc ProcessBatch(items []Item) error {\n    var errs []error\n\n    for _, item := range items {\n        if err := ProcessItem(item); err != nil {\n            errs = append(errs, fmt.Errorf(\"item %d: %w\", item.ID, err))\n        }\n    }\n\n    if len(errs) > 0 {\n        return fmt.Errorf(\"batch processing failed: %v\", errs)\n    }\n\n    return nil\n}\n```\n\n## Panic vs Error\n\n### Use Errors (Preferred)\n\n```go\n// Good - return error\nfunc Divide(a, b int) (int, error) {\n    if b == 0 {\n        return 0, errors.New(\"division by zero\")\n    }\n    return a / b, nil\n}\n```\n\n### Use Panic (Rare)\n\n```go\n// Only for truly exceptional, unrecoverable situations\nfunc MustCompile(pattern string) *regexp.Regexp {\n    re, err := regexp.Compile(pattern)\n    if err != nil {\n        panic(fmt.Sprintf(\"invalid pattern: %v\", err))\n    }\n    return re\n}\n```\n\n### Recover from Panic\n\n```go\nfunc SafeHandler(w http.ResponseWriter, r *http.Request) {\n    defer func() {\n        if err := recover(); err != nil {\n            log.Printf(\"panic: %v\", err)\n            http.Error(w, \"Internal Server Error\", 500)\n        }\n    }()\n\n    // handler logic\n}\n```\n\n## Error Handling in Goroutines\n\n### Use Channels\n\n```go\nfunc ProcessAsync(ctx context.Context) error {\n    errCh := make(chan error, 1)\n\n    go func() {\n        errCh <- doWork(ctx)\n    }()\n\n    select {\n    case <-ctx.Done():\n        return ctx.Err()\n    case err := <-errCh:\n        return err\n    }\n}\n```\n\n### Use errgroup\n\n```go\nimport \"golang.org/x/sync/errgroup\"\n\nfunc ProcessParallel(ctx context.Context, items []Item) error {\n    g, ctx := errgroup.WithContext(ctx)\n\n    for _, item := range items {\n        item := item // capture range variable\n        g.Go(func() error {\n            return processItem(ctx, item)\n        })\n    }\n\n    return g.Wait()\n}\n```\n\n## Best Practices\n\n1. **Always check errors** - Never ignore with `_`\n2. **Wrap errors with context** - Use `fmt.Errorf(\"context: %w\", err)`\n3. **Use errors.Is** - For checking specific errors\n4. **Use errors.As** - For type assertions\n5. **Return early** - Check errors immediately\n6. **Don't panic** - Use errors for expected failures\n7. **Add context** - Make errors debuggable\n8. **Wrap, don't replace** - Preserve error chain\n\n## Anti-Patterns\n\n### Don't Ignore Errors\n\n```go\n// Bad\ndata, _ := ioutil.ReadFile(\"config.json\")\n\n// Good\ndata, err := ioutil.ReadFile(\"config.json\")\nif err != nil {\n    return fmt.Errorf(\"failed to read config: %w\", err)\n}\n```\n\n### Don't Lose Error Context\n\n```go\n// Bad - loses original error\nif err != nil {\n    return errors.New(\"failed to process\")\n}\n\n// Good - preserves error chain\nif err != nil {\n    return fmt.Errorf(\"failed to process: %w\", err)\n}\n```\n\n### Don't Panic for Expected Errors\n\n```go\n// Bad\nfunc GetConfig() *Config {\n    data, err := ioutil.ReadFile(\"config.json\")\n    if err != nil {\n        panic(err) // Don't do this\n    }\n    // ...\n}\n\n// Good\nfunc GetConfig() (*Config, error) {\n    data, err := ioutil.ReadFile(\"config.json\")\n    if err != nil {\n        return nil, fmt.Errorf(\"read config: %w\", err)\n    }\n    // ...\n}\n```"
              },
              {
                "name": "grpc-patterns",
                "description": "gRPC service implementation patterns. Use when building gRPC services.",
                "path": "tech-stacks/go/skills/grpc-patterns/SKILL.md",
                "frontmatter": {
                  "name": "grpc-patterns",
                  "description": "gRPC service implementation patterns. Use when building gRPC services."
                },
                "content": "# gRPC Patterns Skill\n\ngRPC service implementation for Go.\n\n## When to Use\n\nUse when building gRPC services.\n\n## Protocol Buffer Definition\n\n```protobuf\nsyntax = \"proto3\";\n\npackage user.v1;\n\noption go_package = \"github.com/user/project/proto/user/v1;userv1\";\n\nservice UserService {\n  rpc GetUser(GetUserRequest) returns (User);\n  rpc ListUsers(ListUsersRequest) returns (stream User);\n  rpc CreateUser(CreateUserRequest) returns (User);\n}\n\nmessage GetUserRequest {\n  int32 id = 1;\n}\n\nmessage User {\n  int32 id = 1;\n  string name = 2;\n  string email = 3;\n}\n\nmessage ListUsersRequest {\n  int32 page_size = 1;\n  string page_token = 2;\n}\n\nmessage CreateUserRequest {\n  string name = 1;\n  string email = 2;\n}\n```\n\n## Service Implementation\n\n```go\ntype server struct {\n    userv1.UnimplementedUserServiceServer\n    service *Service\n}\n\nfunc (s *server) GetUser(ctx context.Context, req *userv1.GetUserRequest) (*userv1.User, error) {\n    user, err := s.service.GetUser(ctx, int(req.Id))\n    if err != nil {\n        return nil, status.Errorf(codes.NotFound, \"user not found: %v\", err)\n    }\n\n    return &userv1.User{\n        Id:    int32(user.ID),\n        Name:  user.Name,\n        Email: user.Email,\n    }, nil\n}\n\nfunc (s *server) ListUsers(req *userv1.ListUsersRequest, stream userv1.UserService_ListUsersServer) error {\n    users, err := s.service.ListUsers(stream.Context(), int(req.PageSize))\n    if err != nil {\n        return status.Errorf(codes.Internal, \"failed to list users: %v\", err)\n    }\n\n    for _, user := range users {\n        if err := stream.Send(&userv1.User{\n            Id:    int32(user.ID),\n            Name:  user.Name,\n            Email: user.Email,\n        }); err != nil {\n            return err\n        }\n    }\n\n    return nil\n}\n```\n\n## Server Setup\n\n```go\nfunc main() {\n    lis, err := net.Listen(\"tcp\", \":50051\")\n    if err != nil {\n        log.Fatalf(\"failed to listen: %v\", err)\n    }\n\n    s := grpc.NewServer(\n        grpc.UnaryInterceptor(loggingInterceptor),\n    )\n\n    userv1.RegisterUserServiceServer(s, &server{\n        service: NewService(),\n    })\n\n    log.Println(\"Server listening on :50051\")\n    if err := s.Serve(lis); err != nil {\n        log.Fatalf(\"failed to serve: %v\", err)\n    }\n}\n```\n\n## Interceptors (Middleware)\n\n```go\nfunc loggingInterceptor(ctx context.Context, req interface{}, info *grpc.UnaryServerInfo, handler grpc.UnaryHandler) (interface{}, error) {\n    start := time.Now()\n    resp, err := handler(ctx, req)\n    log.Printf(\"method=%s duration=%v error=%v\", info.FullMethod, time.Since(start), err)\n    return resp, err\n}\n```\n\n## Client Usage\n\n```go\nconn, err := grpc.Dial(\"localhost:50051\", grpc.WithInsecure())\nif err != nil {\n    log.Fatal(err)\n}\ndefer conn.Close()\n\nclient := userv1.NewUserServiceClient(conn)\n\nuser, err := client.GetUser(context.Background(), &userv1.GetUserRequest{Id: 1})\nif err != nil {\n    log.Fatal(err)\n}\nfmt.Println(user)\n```\n\n## Best Practices\n\n- Use proper error codes (codes.NotFound, codes.InvalidArgument)\n- Implement interceptors for cross-cutting concerns\n- Use streaming for large datasets\n- Set timeouts on client calls\n- Handle metadata for auth\n- Implement health checks"
              },
              {
                "name": "optimization-techniques",
                "description": "Performance optimization strategies. Use ONLY after profiling identifies bottlenecks.",
                "path": "tech-stacks/go/skills/optimization-techniques/SKILL.md",
                "frontmatter": {
                  "name": "optimization-techniques",
                  "description": "Performance optimization strategies. Use ONLY after profiling identifies bottlenecks."
                },
                "content": "# Optimization Techniques Skill\n\nPerformance optimization strategies for Go. **ONLY use after profiling!**\n\n## When to Use\n\nUse ONLY after profiling identifies actual bottlenecks. **NEVER optimize prematurely (KISS principle).**\n\n## Pre-allocate Slices\n\n```go\n// Good - pre-allocate when size known\nitems := make([]Item, 0, expectedSize)\n\n// Bad - repeated allocations\nvar items []Item\n```\n\n## Use strings.Builder\n\n```go\n// Good\nvar b strings.Builder\nfor _, s := range strings {\n    b.WriteString(s)\n}\nresult := b.String()\n\n// Bad - repeated allocations\nresult := \"\"\nfor _, s := range strings {\n    result += s\n}\n```\n\n## sync.Pool for Reusable Objects\n\n```go\nvar bufferPool = sync.Pool{\n    New: func() interface{} {\n        return new(bytes.Buffer)\n    },\n}\n\nbuf := bufferPool.Get().(*bytes.Buffer)\ndefer bufferPool.Put(buf)\nbuf.Reset()\n// use buf\n```\n\n## Minimize Allocations\n\n```go\n// Good - reuse buffer\nbuf := make([]byte, 1024)\nfor {\n    n, _ := r.Read(buf)\n    process(buf[:n])\n}\n\n// Bad - allocate each time\nfor {\n    buf := make([]byte, 1024)\n    n, _ := r.Read(buf)\n    process(buf[:n])\n}\n```\n\n## Golden Rules\n\n1. **Profile first** - Don't guess\n2. **Measure impact** - Benchmark before/after\n3. **KISS principle** - Simple first, optimize later\n4. **Maintain readability** - Don't sacrifice clarity\n5. **Focus on hot paths** - 80/20 rule"
              },
              {
                "name": "performance-profiling",
                "description": "pprof usage and performance analysis. Use when profiling applications.",
                "path": "tech-stacks/go/skills/performance-profiling/SKILL.md",
                "frontmatter": {
                  "name": "performance-profiling",
                  "description": "pprof usage and performance analysis. Use when profiling applications."
                },
                "content": "# Performance Profiling Skill\n\nUsing pprof for performance analysis.\n\n## When to Use\n\nUse when identifying performance bottlenecks.\n\n## CPU Profiling\n\n```bash\n# During tests\ngo test -cpuprofile=cpu.out -bench=.\n\n# Analyze\ngo tool pprof cpu.out\n\n# Web interface\ngo tool pprof -http=:8080 cpu.out\n```\n\n## Memory Profiling\n\n```bash\n# During tests\ngo test -memprofile=mem.out -bench=.\n\n# Analyze\ngo tool pprof mem.out\n```\n\n## HTTP Endpoint\n\n```go\nimport _ \"net/http/pprof\"\n\nfunc main() {\n    go func() {\n        log.Println(http.ListenAndServe(\"localhost:6060\", nil))\n    }()\n    // your code\n}\n```\n\nAccess profiles at:\n- `http://localhost:6060/debug/pprof/`\n- `http://localhost:6060/debug/pprof/heap`\n- `http://localhost:6060/debug/pprof/goroutine`\n\n## pprof Commands\n\n```\n(pprof) top      # Top functions\n(pprof) list     # Source code view\n(pprof) web      # Graph view\n(pprof) pdf      # PDF output\n```\n\n## Best Practices\n\n- Profile in production-like conditions\n- Profile before optimizing\n- Focus on hot paths\n- Check both CPU and memory\n- Use flamegraphs for visualization"
              },
              {
                "name": "post-change-verification",
                "description": "Mandatory verification protocol after code changes for Go projects. Use after any code modification to ensure quality.",
                "path": "tech-stacks/go/skills/post-change-verification/SKILL.md",
                "frontmatter": {
                  "name": "post-change-verification",
                  "description": "Mandatory verification protocol after code changes for Go projects. Use after any code modification to ensure quality."
                },
                "content": "# Post-Change Verification Protocol\n\nThis skill defines the mandatory verification steps that Go agents must perform after modifying code files.\n\n## When to Use\n\nUse this skill ALWAYS when:\n- Creating new code files\n- Modifying existing code files\n- Refactoring code\n- Generating code\n\nDo NOT use when:\n- Only reading/analyzing code (no modifications)\n- Generating documentation only\n- Running diagnostics or audits\n\n## Protocol Steps\n\nAfter completing code changes, agents MUST execute these steps IN ORDER:\n\n### Step 1: Format Code\n\n```bash\nmake fmt\n# or if Makefile not available:\ngo fmt ./...\n```\n\n**Purpose:** Ensure consistent code formatting using Go's official formatter.\n\n### Step 2: Run Linter\n\n```bash\nmake lint\n# or if Makefile not available:\ngolangci-lint run\n```\n\n**Purpose:** Detect code quality issues, potential bugs, and style violations.\n\n### Step 3: Build (Type Check)\n\n```bash\nmake build\n# or if Makefile not available:\ngo build ./...\n```\n\n**Purpose:** Verify code compiles without errors. Go's compiler performs type checking.\n\n### Step 4: Run Related Tests\n\n```bash\nmake test\n# or if Makefile not available:\ngo test ./path/to/modified/...\n# or run all tests:\ngo test ./...\n```\n\n**Purpose:** Verify code changes do not break existing functionality.\n\n### Step 5: Verify Zero Issues\n\n**TARGET:** All steps must complete with ZERO errors and ZERO warnings.\n\nIf any step reports errors or warnings, proceed to Exception Handling.\n\n## Exception Handling\n\nWhen verification finds issues, follow this decision tree:\n\n```\nIssue Found During Verification\n            |\n            v\n    Was this issue caused\n    by current changes?\n            |\n     +------+------+\n     |             |\n    YES           NO\n     |             |\n     v             v\n  Fix it      Is it in a file\n  now         you modified?\n                   |\n            +------+------+\n            |             |\n           YES           NO\n            |             |\n            v             v\n      Is it a         Document and\n      small fix?      report only\n      (< 10 lines)         |\n            |              |\n     +------+------+       v\n     |             |    DONE\n    YES           NO    (proceed with\n     |             |     task)\n    v             v\n  Fix it      Document,\n  now         report,\n              recommend\n              separate task\n```\n\n### Decision Rules\n\n1. **Issue caused by your changes:** Fix immediately before completing task\n2. **Pre-existing issue in modified file, small fix (< 10 lines):** Fix as part of current work\n3. **Pre-existing issue in modified file, large fix (>= 10 lines):** Document and report, recommend separate cleanup task\n4. **Pre-existing issue in unmodified file:** Document and report only, do not fix\n\n### Example Scenarios\n\n**Scenario 1:** You add a new function and the linter reports an unused variable in your new code.\n- **Action:** Fix it immediately (issue caused by your changes)\n\n**Scenario 2:** You modify a file and discover a pre-existing lint warning (3 lines to fix) in a function you touched.\n- **Action:** Fix it as part of your work (small fix in modified file)\n\n**Scenario 3:** You modify a file and discover 50+ lines of lint warnings throughout the file.\n- **Action:** Document the issues, complete your task, recommend separate cleanup task\n\n**Scenario 4:** Lint reports warnings in a file you did not modify.\n- **Action:** Document the issues in output, proceed with task completion\n\n## Verification Output Format\n\nReport verification results using this consistent format:\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     [PASSED | FAILED | SKIPPED (reason)]\nLint:       [PASSED | FAILED] ([X] errors, [Y] warnings)\nBuild:      [PASSED | FAILED] ([X] errors)\nTests:      [PASSED | FAILED] ([X]/[Y] passed)\n\nPre-existing issues: [NONE | count listed below]\n[If issues exist, list them here]\n\n=== [TASK COMPLETE | VERIFICATION FAILED] ===\n```\n\n### Example: All Checks Passed\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       PASSED (0 errors, 0 warnings)\nBuild:      PASSED (0 errors)\nTests:      PASSED (24/24)\n\nPre-existing issues: NONE\n\n=== TASK COMPLETE ===\n```\n\n### Example: Pre-existing Issues Found\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       FAILED (0 errors caused by this change)\nBuild:      PASSED (0 errors)\nTests:      PASSED (24/24)\n\nPre-existing issues (not caused by this change):\n- internal/legacy/handler.go: Line 45 - exported function without comment\n- pkg/utils/strings.go: Lines 78-92 - ineffective assignment\n\nThese issues require structural changes beyond the scope of this task.\nRecommend creating a separate cleanup task.\n\n=== TASK COMPLETE ===\n```\n\n### Example: Issues Caused by Changes\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       FAILED (2 errors, 1 warning)\nBuild:      FAILED (1 error)\nTests:      FAILED (22/24)\n\nIssues to fix:\n- cmd/server/main.go: Line 23 - undefined: Config\n- internal/service/user.go: Line 45 - unused variable 'temp'\n- internal/service/user.go: Line 67 - missing error check\n\n=== VERIFICATION FAILED - FIX ISSUES BEFORE COMPLETING ===\n```\n\n## Graceful Degradation\n\nHandle missing or failing commands gracefully:\n\n| Situation | Status | Action |\n|-----------|--------|--------|\n| Command not found | `SKIPPED (command not found)` | Note and proceed to next step |\n| Command timeout (> 5 min) | `SKIPPED (timeout)` | Note and proceed to next step |\n| Execution error | `SKIPPED (execution error: [reason])` | Note and proceed to next step |\n\n### Example: Missing Linter\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       SKIPPED (command not found - golangci-lint not installed)\nBuild:      PASSED (0 errors)\nTests:      PASSED (24/24)\n\nPre-existing issues: NONE\n\nNote: Consider installing golangci-lint for full quality verification.\n\n=== TASK COMPLETE ===\n```\n\n## Makefile Integration\n\nGo projects MUST use Makefile for build operations. Ensure these targets exist:\n\n```makefile\n.PHONY: fmt lint build test\n\nfmt:\n\tgo fmt ./...\n\nlint:\n\tgolangci-lint run\n\nbuild:\n\tgo build -o ./bin/app ./cmd/app\n\ntest:\n\tgo test -v ./...\n\n# Combined verification target\nverify: fmt lint build test\n```\n\nIf Makefile targets are missing, fall back to direct commands but note in output.\n\n## Best Practices\n\n1. **Run all steps in order** - Each step may reveal different issues\n2. **Fix your own issues first** - Never leave broken code from your changes\n3. **Document pre-existing issues clearly** - Help future cleanup efforts\n4. **Use the 10-line rule consistently** - Small fixes improve code health, large fixes need dedicated tasks\n5. **Report honestly** - Verification results are informational, not judgmental\n6. **Use Makefile targets** - Always prefer `make fmt` over `go fmt ./...`\n\n## Code Review Checklist\n\nBefore completing any code-modifying task:\n\n- [ ] Format check passed (`make fmt`)\n- [ ] Lint check passed (or pre-existing issues documented)\n- [ ] Build check passed (or pre-existing issues documented)\n- [ ] Tests passed (or pre-existing issues documented)\n- [ ] All issues caused by changes are fixed\n- [ ] Pre-existing issues clearly documented\n- [ ] Verification output included in task completion"
              },
              {
                "name": "project-structure",
                "description": "Standard Go project layouts and architecture patterns. Use when initializing projects or understanding codebase structure.",
                "path": "tech-stacks/go/skills/project-structure/SKILL.md",
                "frontmatter": {
                  "name": "project-structure",
                  "description": "Standard Go project layouts and architecture patterns. Use when initializing projects or understanding codebase structure."
                },
                "content": "# Project Structure Skill\n\nThis skill defines standard Go project layouts following community conventions.\n\n## When to Use\n\nUse this skill when:\n- Initializing new Go projects\n- Organizing existing codebases\n- Choosing project architecture\n- Setting up build systems\n\n## Required Components (ALL Projects)\n\n1. **Makefile** - ALWAYS required for build automation\n2. **bin/** directory - ALWAYS where binaries are built (gitignored)\n3. **.gitignore** - MUST include `bin/` directory\n4. **go.mod** - Module definition\n5. **README.md** - With build instructions using Make\n\n## Standard Layout (golang-standards/project-layout)\n\n```\nproject/\nâ”œâ”€â”€ cmd/                    # Command entry points\nâ”‚   â””â”€â”€ myapp/\nâ”‚       â””â”€â”€ main.go\nâ”œâ”€â”€ internal/              # Private application code\nâ”‚   â”œâ”€â”€ handler/\nâ”‚   â”œâ”€â”€ service/\nâ”‚   â””â”€â”€ repository/\nâ”œâ”€â”€ pkg/                   # Public libraries\nâ”‚   â””â”€â”€ util/\nâ”œâ”€â”€ api/                   # API specifications (OpenAPI, gRPC)\nâ”œâ”€â”€ web/                   # Web application assets\nâ”œâ”€â”€ configs/               # Configuration files\nâ”œâ”€â”€ scripts/               # Build and utility scripts\nâ”œâ”€â”€ deployments/           # Deployment configs (Docker, K8s)\nâ”œâ”€â”€ test/                  # Integration and system tests\nâ”œâ”€â”€ docs/                  # Documentation\nâ”œâ”€â”€ bin/                   # Build output (REQUIRED, gitignored)\nâ”‚   â””â”€â”€ myapp\nâ”œâ”€â”€ go.mod                 # Go module definition\nâ”œâ”€â”€ go.sum                 # Dependency checksums\nâ”œâ”€â”€ Makefile              # Build automation (REQUIRED)\nâ”œâ”€â”€ .gitignore            # Must include bin/\nâ”œâ”€â”€ Dockerfile\nâ””â”€â”€ README.md\n```\n\n## Directory Purposes\n\n- **cmd/** - Main applications for this project. Directory name matches binary name.\n- **internal/** - Private application and library code. Not importable by other projects.\n- **pkg/** - Library code that's ok to use by external applications.\n- **bin/** - Binary output (NEVER commit these)\n- **api/** - OpenAPI/Swagger specs, protocol buffer files\n- **web/** - Web application specific components\n- **configs/** - Configuration file templates or default configs\n- **test/** - Additional external test apps and test data\n- **docs/** - Design and user documents\n- **scripts/** - Scripts for build, install, analysis, etc.\n- **deployments/** - IaaS, PaaS, system and container orchestration deployment configurations\n\n## Alternative Architectures\n\n### Hexagonal/Clean Architecture\n```\nproject/\nâ”œâ”€â”€ cmd/\nâ”œâ”€â”€ internal/\nâ”‚   â”œâ”€â”€ domain/          # Business logic\nâ”‚   â”œâ”€â”€ ports/           # Interfaces\nâ”‚   â”œâ”€â”€ adapters/        # Implementations\nâ”‚   â””â”€â”€ app/             # Application layer\nâ””â”€â”€ ...\n```\n\n### Flat Structure (Simple Projects)\n```\nproject/\nâ”œâ”€â”€ main.go\nâ”œâ”€â”€ handler.go\nâ”œâ”€â”€ service.go\nâ”œâ”€â”€ bin/\nâ”œâ”€â”€ go.mod\nâ”œâ”€â”€ Makefile\nâ””â”€â”€ README.md\n```\n\n## When to Use Each Structure\n\n- **Standard layout:** Medium to large projects, multiple binaries\n- **Hexagonal:** Complex domain logic, clear separation needed\n- **Flat:** Small utilities, CLIs, simple tools\n\n## Build System Standards\n\n### Makefile (REQUIRED)\n\nEvery project MUST have a Makefile:\n\n```makefile\n.PHONY: build test clean lint fmt run\n\n# Build binary to ./bin directory\nbuild:\n\\t@mkdir -p bin\n\\tgo build -o bin/myapp cmd/myapp/main.go\n\n# Run the application\nrun: build\n\\t./bin/myapp\n\n# Run tests\ntest:\n\\tgo test -v ./...\n\n# Run tests with race detector\ntest-race:\n\\tgo test -v -race ./...\n\n# Run tests with coverage\ncoverage:\n\\tgo test -coverprofile=coverage.out ./...\n\\tgo tool cover -html=coverage.out\n\n# Format code\nfmt:\n\\tgo fmt ./...\n\n# Run linters\nlint:\n\\tgolangci-lint run\n\n# Clean build artifacts\nclean:\n\\trm -rf bin/\n\\trm -f coverage.out\n\n# Install dependencies\ndeps:\n\\tgo mod download\n\\tgo mod tidy\n```\n\n### Build Rules\n\n- Every project MUST have a Makefile\n- Binaries MUST be built to `./bin/` directory\n- Never build to project root\n- `bin/` directory MUST be in .gitignore\n- Use `make build`, NEVER `go build` directly\n\n## .gitignore Template\n\n```\n# Binaries\nbin/\n*.exe\n*.exe~\n*.dll\n*.so\n*.dylib\n\n# Test binary\n*.test\n\n# Output of the go coverage tool\n*.out\n\n# Dependency directories\nvendor/\n\n# Go workspace file\ngo.work\n\n# Environment files\n.env\n.env.local\n\n# IDE\n.vscode/\n.idea/\n*.swp\n*.swo\n*~\n```\n\n## go.mod Best Practices\n\n```go\nmodule github.com/username/project\n\ngo 1.21\n\nrequire (\n    github.com/gin-gonic/gin v1.9.1\n    github.com/stretchr/testify v1.8.4\n)\n```\n\n- Use Go 1.21 or later\n- Run `go mod tidy` regularly\n- Commit go.sum to version control\n- Use `go mod vendor` if needed for reproducible builds\n\n## README.md Template\n\n```markdown\n# Project Name\n\nBrief description of what this project does.\n\n## Prerequisites\n\n- Go >= 1.21\n- make\n\n## Installation\n\n\\`\\`\\`bash\ngit clone https://github.com/username/project\ncd project\nmake deps\n\\`\\`\\`\n\n## Building\n\n\\`\\`\\`bash\nmake build\n\\`\\`\\`\n\nBinary will be in `./bin/`\n\n## Running\n\n\\`\\`\\`bash\nmake run\n\\`\\`\\`\n\n## Testing\n\n\\`\\`\\`bash\nmake test\nmake test-race\nmake coverage\n\\`\\`\\`\n\n## Development\n\n\\`\\`\\`bash\nmake fmt      # Format code\nmake lint     # Run linters\nmake vet      # Run go vet\n\\`\\`\\`\n\n## License\n\nMIT\n```\n\n## Notes\n\n- Follow the standard layout for new projects\n- Keep directory structure flat until complexity requires organization\n- Use `internal/` to prevent external imports\n- Binary names should match directory names in `cmd/`\n- Makefile is non-negotiable\n- Always build to `./bin/`"
              },
              {
                "name": "rest-api-patterns",
                "description": "REST API implementation patterns. Use when building HTTP APIs.",
                "path": "tech-stacks/go/skills/rest-api-patterns/SKILL.md",
                "frontmatter": {
                  "name": "rest-api-patterns",
                  "description": "REST API implementation patterns. Use when building HTTP APIs."
                },
                "content": "# REST API Patterns Skill\n\nREST API implementation patterns for Go.\n\n## When to Use\n\nUse when building HTTP APIs.\n\n## Handler Pattern\n\n```go\ntype Handler struct {\n    service *Service\n    logger  *log.Logger\n}\n\nfunc NewHandler(service *Service) *Handler {\n    return &Handler{service: service, logger: log.Default()}\n}\n\nfunc (h *Handler) GetUser(w http.ResponseWriter, r *http.Request) {\n    ctx := r.Context()\n\n    // Parse ID\n    userID, err := strconv.Atoi(chi.URLParam(r, \"id\"))\n    if err != nil {\n        respondError(w, http.StatusBadRequest, \"invalid user ID\")\n        return\n    }\n\n    // Get user\n    user, err := h.service.GetUser(ctx, userID)\n    if err != nil {\n        respondError(w, http.StatusInternalServerError, err.Error())\n        return\n    }\n\n    respondJSON(w, http.StatusOK, user)\n}\n```\n\n## Response Helpers\n\n```go\nfunc respondJSON(w http.ResponseWriter, status int, data interface{}) {\n    w.Header().Set(\"Content-Type\", \"application/json\")\n    w.WriteStatus(status)\n    json.NewEncoder(w).Encode(data)\n}\n\nfunc respondError(w http.ResponseWriter, status int, message string) {\n    respondJSON(w, status, map[string]string{\"error\": message})\n}\n```\n\n## Middleware\n\n```go\n// Logging middleware\nfunc loggingMiddleware(next http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        start := time.Now()\n        next.ServeHTTP(w, r)\n        log.Printf(\"%s %s %v\", r.Method, r.URL.Path, time.Since(start))\n    })\n}\n\n// Auth middleware\nfunc authMiddleware(next http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        token := r.Header.Get(\"Authorization\")\n        if !isValidToken(token) {\n            http.Error(w, \"Unauthorized\", http.StatusUnauthorized)\n            return\n        }\n        next.ServeHTTP(w, r)\n    })\n}\n```\n\n## Router Setup (Chi)\n\n```go\nfunc setupRoutes() http.Handler {\n    r := chi.NewRouter()\n\n    // Middleware\n    r.Use(middleware.Logger)\n    r.Use(middleware.Recoverer)\n    r.Use(corsMiddleware)\n\n    // Routes\n    r.Get(\"/health\", healthHandler)\n\n    r.Route(\"/api/v1\", func(r chi.Router) {\n        r.Use(authMiddleware)\n        r.Get(\"/users/{id}\", handler.GetUser)\n        r.Post(\"/users\", handler.CreateUser)\n        r.Put(\"/users/{id}\", handler.UpdateUser)\n        r.Delete(\"/users/{id}\", handler.DeleteUser)\n    })\n\n    return r\n}\n```\n\n## Request Validation\n\n```go\ntype CreateUserRequest struct {\n    Name  string `json:\"name\" validate:\"required,min=2,max=100\"`\n    Email string `json:\"email\" validate:\"required,email\"`\n}\n\nfunc (h *Handler) CreateUser(w http.ResponseWriter, r *http.Request) {\n    var req CreateUserRequest\n    if err := json.NewDecoder(r.Body).Decode(&req); err != nil {\n        respondError(w, http.StatusBadRequest, \"invalid JSON\")\n        return\n    }\n\n    if err := validate.Struct(req); err != nil {\n        respondError(w, http.StatusBadRequest, err.Error())\n        return\n    }\n\n    // process request\n}\n```\n\n## Best Practices\n\n- Use proper HTTP methods (GET, POST, PUT, DELETE)\n- Return appropriate status codes\n- Validate all inputs\n- Use middleware for cross-cutting concerns\n- Implement proper error handling\n- Add request/response logging\n- Use context for cancellation\n- Implement graceful shutdown"
              },
              {
                "name": "secure-coding",
                "description": "Security best practices for Go applications. Use when writing security-sensitive code.",
                "path": "tech-stacks/go/skills/secure-coding/SKILL.md",
                "frontmatter": {
                  "name": "secure-coding",
                  "description": "Security best practices for Go applications. Use when writing security-sensitive code."
                },
                "content": "# Secure Coding Skill\n\nSecurity best practices following OWASP guidelines.\n\n## When to Use\n\nUse when writing or reviewing security-sensitive code.\n\n## Input Validation\n\n```go\n// Good - validate and sanitize\nfunc GetUser(w http.ResponseWriter, r *http.Request) {\n    idStr := r.URL.Query().Get(\"id\")\n    id, err := strconv.Atoi(idStr)\n    if err != nil || id < 1 {\n        http.Error(w, \"invalid ID\", http.StatusBadRequest)\n        return\n    }\n    // use id safely\n}\n```\n\n## SQL Injection Prevention\n\n```go\n// Bad - SQL injection vulnerable\nquery := fmt.Sprintf(\"SELECT * FROM users WHERE id = %s\", userID)\ndb.Query(query)\n\n// Good - parameterized query\nquery := \"SELECT * FROM users WHERE id = ?\"\ndb.Query(query, userID)\n\n// Good - named parameters\nquery := \"SELECT * FROM users WHERE id = :id\"\ndb.NamedQuery(query, map[string]interface{}{\"id\": userID})\n```\n\n## Command Injection Prevention\n\n```go\n// Bad - shell injection\ncmd := exec.Command(\"sh\", \"-c\", \"echo \"+userInput)\n\n// Good - avoid shell\ncmd := exec.Command(\"echo\", userInput)\n\n// Good - validate input\nif !isValidInput(userInput) {\n    return errors.New(\"invalid input\")\n}\n```\n\n## Path Traversal Prevention\n\n```go\n// Good - validate and clean paths\nfunc serveFile(filename string) error {\n    // Validate filename\n    clean := filepath.Clean(filename)\n    if strings.Contains(clean, \"..\") {\n        return errors.New(\"invalid path\")\n    }\n\n    // Ensure it's in allowed directory\n    basePath := \"/var/www/files\"\n    fullPath := filepath.Join(basePath, clean)\n    if !strings.HasPrefix(fullPath, basePath) {\n        return errors.New(\"path outside allowed directory\")\n    }\n\n    return ioutil.ReadFile(fullPath)\n}\n```\n\n## Cryptography Best Practices\n\n```go\nimport \"crypto/rand\"\n\n// Good - crypto/rand for randomness\nfunc generateToken() (string, error) {\n    b := make([]byte, 32)\n    if _, err := rand.Read(b); err != nil {\n        return \"\", err\n    }\n    return base64.URLEncoding.EncodeToString(b), nil\n}\n\n// Bad - math/rand is not cryptographically secure\nfunc badToken() string {\n    return fmt.Sprintf(\"%d\", rand.Int())\n}\n```\n\n## Password Hashing\n\n```go\nimport \"golang.org/x/crypto/bcrypt\"\n\n// Hash password\nfunc hashPassword(password string) (string, error) {\n    hash, err := bcrypt.GenerateFromPassword([]byte(password), bcrypt.DefaultCost)\n    return string(hash), err\n}\n\n// Verify password\nfunc verifyPassword(hash, password string) bool {\n    err := bcrypt.CompareHashAndPassword([]byte(hash), []byte(password))\n    return err == nil\n}\n```\n\n## Secrets Management\n\n```go\n// Good - environment variables\napiKey := os.Getenv(\"API_KEY\")\nif apiKey == \"\" {\n    log.Fatal(\"API_KEY not set\")\n}\n\n// Bad - hardcoded secrets\nconst apiKey = \"sk_live_xxxxx\" // Never do this!\n```\n\n## CORS Configuration\n\n```go\n// Good - specific origins\nfunc corsMiddleware(next http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        origin := r.Header.Get(\"Origin\")\n        if isAllowedOrigin(origin) {\n            w.Header().Set(\"Access-Control-Allow-Origin\", origin)\n            w.Header().Set(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE\")\n            w.Header().Set(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\")\n        }\n        next.ServeHTTP(w, r)\n    })\n}\n\n// Bad - allow all origins\nw.Header().Set(\"Access-Control-Allow-Origin\", \"*\")\n```\n\n## Best Practices\n\n1. **Validate all inputs** - Never trust user data\n2. **Use parameterized queries** - Prevent SQL injection\n3. **Avoid shell execution** - Use exec.Command directly\n4. **Use crypto/rand** - Not math/rand\n5. **Hash passwords** - Use bcrypt\n6. **Store secrets securely** - Environment variables or secret managers\n7. **Validate file paths** - Prevent traversal\n8. **Use HTTPS** - Always\n9. **Set security headers** - CSP, X-Frame-Options, etc.\n10. **Keep dependencies updated** - Run govulncheck"
              },
              {
                "name": "security-scanning",
                "description": "Security scanning tools (gosec, govulncheck). Use when running security analysis.",
                "path": "tech-stacks/go/skills/security-scanning/SKILL.md",
                "frontmatter": {
                  "name": "security-scanning",
                  "description": "Security scanning tools (gosec, govulncheck). Use when running security analysis."
                },
                "content": "# Security Scanning Skill\n\nSecurity scanning tools and usage for Go.\n\n## When to Use\n\nUse when performing security analysis or audits.\n\n## gosec - Static Security Analysis\n\n### Installation\n```bash\ngo install github.com/securego/gosec/v2/cmd/gosec@latest\n```\n\n### Usage\n```bash\n# Scan all packages\ngosec ./...\n\n# JSON output\ngosec -fmt=json -out=results.json ./...\n\n# Specific rules\ngosec -include=G401,G501 ./...\n```\n\n### Common Issues Detected\n\n- G101: Hardcoded credentials\n- G102: Bind to all interfaces\n- G103: Unsafe block\n- G104: Unhandled errors\n- G201: SQL injection\n- G202: SQL string concatenation\n- G301: Poor file permissions\n- G401: Weak cryptography (MD5, SHA1)\n- G501: Blocklisted import (DES)\n\n## govulncheck - Vulnerability Scanner\n\n### Installation\n```bash\ngo install golang.org/x/vuln/cmd/govulncheck@latest\n```\n\n### Usage\n```bash\n# Scan for vulnerabilities\ngovulncheck ./...\n\n# JSON output\ngovulncheck -json ./...\n```\n\n### What It Checks\n\n- Known vulnerabilities in dependencies\n- Only reports vulnerabilities in code paths actually used\n- Uses official Go vulnerability database\n\n## CI/CD Integration\n\n```yaml\n# GitHub Actions\nname: Security Scan\non: [push, pull_request]\njobs:\n  security:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-go@v5\n      - name: Run Gosec\n        run: |\n          go install github.com/securego/gosec/v2/cmd/gosec@latest\n          gosec ./...\n      - name: Run govulncheck\n        run: |\n          go install golang.org/x/vuln/cmd/govulncheck@latest\n          govulncheck ./...\n```\n\n## Best Practices\n\n- Run in CI/CD pipeline\n- Address Critical/High issues first\n- Review false positives\n- Keep dependencies updated\n- Scan regularly (weekly minimum)"
              },
              {
                "name": "testing-patterns",
                "description": "Table-driven tests, mocking strategies, and comprehensive testing patterns. Use when writing tests.",
                "path": "tech-stacks/go/skills/testing-patterns/SKILL.md",
                "frontmatter": {
                  "name": "testing-patterns",
                  "description": "Table-driven tests, mocking strategies, and comprehensive testing patterns. Use when writing tests."
                },
                "content": "# Testing Patterns Skill\n\nComprehensive Go testing patterns following community best practices.\n\n## When to Use\n\nUse this skill when writing or reviewing tests.\n\n## Table-Driven Tests\n\n```go\nfunc TestAdd(t *testing.T) {\n    tests := []struct {\n        name string\n        a, b int\n        want int\n    }{\n        {\"positive\", 1, 2, 3},\n        {\"negative\", -1, -2, -3},\n        {\"zero\", 0, 0, 0},\n    }\n\n    for _, tt := range tests {\n        t.Run(tt.name, func(t *testing.T) {\n            got := Add(tt.a, tt.b)\n            if got != tt.want {\n                t.Errorf(\"Add(%d, %d) = %d; want %d\", tt.a, tt.b, got, tt.want)\n            }\n        })\n    }\n}\n```\n\n## Using Testify\n\n```go\nimport (\n    \"testing\"\n    \"github.com/stretchr/testify/assert\"\n    \"github.com/stretchr/testify/require\"\n)\n\nfunc TestService_GetUser(t *testing.T) {\n    svc := NewService()\n    user, err := svc.GetUser(1)\n\n    require.NoError(t, err)\n    assert.Equal(t, \"John\", user.Name)\n    assert.Greater(t, user.ID, 0)\n}\n```\n\n## Mocking with Interfaces\n\n```go\ntype UserRepository interface {\n    GetUser(id int) (*User, error)\n}\n\ntype mockUserRepo struct {\n    users map[int]*User\n}\n\nfunc (m *mockUserRepo) GetUser(id int) (*User, error) {\n    if user, ok := m.users[id]; ok {\n        return user, nil\n    }\n    return nil, ErrNotFound\n}\n\nfunc TestService(t *testing.T) {\n    repo := &mockUserRepo{\n        users: map[int]*User{\n            1: {ID: 1, Name: \"John\"},\n        },\n    }\n    svc := NewService(repo)\n    // test with mock\n}\n```\n\n## HTTP Testing\n\n```go\nfunc TestHandler(t *testing.T) {\n    req := httptest.NewRequest(\"GET\", \"/users/1\", nil)\n    w := httptest.NewRecorder()\n\n    handler := NewHandler(mockService)\n    handler.GetUser(w, req)\n\n    assert.Equal(t, http.StatusOK, w.Code)\n    assert.Contains(t, w.Body.String(), \"John\")\n}\n```\n\n## Best Practices\n\n- Use table-driven tests\n- Test one thing per test\n- Use testify for clarity\n- Mock external dependencies\n- Test edge cases\n- Run with race detector: `go test -race`"
              }
            ]
          },
          {
            "name": "res",
            "description": "Research and information gathering workflows with automatic detection and smart formatting",
            "source": "./research",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add IvanTorresEdge/molcajete.ai",
              "/plugin install res@Molcajete.ai"
            ],
            "signals": {
              "stars": 0,
              "forks": 1,
              "pushed_at": "2026-01-06T21:16:55Z",
              "created_at": "2025-11-13T04:11:22Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/document",
                "description": "Create comprehensive documentation from research findings using multi-agent workflow and save to file",
                "path": "research/commands/document.md",
                "frontmatter": {
                  "description": "Create comprehensive documentation from research findings using multi-agent workflow and save to file"
                },
                "content": "IMPORTANT: Immediately use the Task tool with subagent_type=\"res:orchestrator\" to delegate ALL work to the research orchestrator agent. Do NOT do any analysis or work in the main context.\n\nThis command accepts optional arguments in these formats:\n- /res:document (no args)\n- /res:document <query>\n- /res:document <filepath> <query>\n\nUse this exact prompt for the agent:\n\"Create comprehensive documentation using multi-agent research workflow.\n\nHandle arguments:\n- IF filepath AND query provided: Use both directly\n- IF query only: Use query, ask user for filepath before final save using AskUserQuestion with default: .molcajete/research/<auto-generated-name>.md\n- IF no arguments: Ask user for topic using AskUserQuestion, then for filepath with default: .molcajete/research/<auto-generated-name>.md\n\nExecute the multi-agent research workflow:\n\n1. **Query Clarification**: If needed, ask clarifying questions using AskUserQuestion to understand scope and requirements.\n\n2. **Query Analysis**: Determine detailed response format (this is documentation, not quick answer), complexity level, and research strategy.\n\n3. **Session Management**: Create research session using session-management scripts.\n\n4. **Research Planning**: Write comprehensive research plan targeting detailed documentation needs.\n\n5. **Agent Coordination**: Spawn specialized agents (search, fetch, local) in parallel to gather comprehensive information. Prioritize:\n   - Official documentation sources\n   - Implementation examples\n   - Local project patterns (if relevant)\n\n6. **Synthesis**: Spawn synthesis agent with 'detailed' response type to create comprehensive documentation following research-methods detailed template.\n\n7. **File Saving**: Synthesis agent will use AskUserQuestion to ask for filepath (if not provided) with default suggestion: .molcajete/research/<auto-generated-name>.md, then save using Write tool.\n\nIMPORTANT: This command ALWAYS results in a file being saved. The synthesis agent must:\n- Use AskUserQuestion tool (NOT text questions) to ask about saving location\n- Suggest .molcajete/research/ as the default directory\n- Auto-generate a kebab-case filename from the query (e.g., 'react-hooks-guide.md')\n- Ensure the documentation is written to the selected file path using Write tool\""
              },
              {
                "name": "/search",
                "description": "Search documentation and web sources for information using multi-agent research workflow",
                "path": "research/commands/search.md",
                "frontmatter": {
                  "description": "Search documentation and web sources for information using multi-agent research workflow"
                },
                "content": "IMPORTANT: Immediately use the Task tool with subagent_type=\"res:orchestrator\" to delegate ALL work to the research orchestrator agent. Do NOT do any analysis or work in the main context.\n\nUse this exact prompt for the agent:\n\"Conduct research for the following query: {user's research query}\n\nExecute the complete multi-agent research workflow:\n\n1. **Query Clarification**: Analyze the query for clarity. If ambiguous or lacking context, ask clarifying questions using AskUserQuestion before proceeding.\n\n2. **Query Analysis**: Determine response type (simple vs detailed), complexity, and execution strategy.\n\n3. **Session Management**: Create research session using session-management scripts.\n\n4. **Research Planning**: Write research plan with targeted questions and agent assignments.\n\n5. **Agent Coordination**: Spawn specialized agents (search, fetch, local) in parallel to gather information. Pass session ID explicitly to each agent.\n\n6. **Synthesis**: Spawn synthesis agent to combine findings and format final response.\n\n7. **Presentation**: Let synthesis agent present formatted results to user and handle file saving (for detailed responses).\n\nFollow the orchestrator agent workflow exactly as defined.\""
              }
            ],
            "skills": [
              {
                "name": "research-methods",
                "description": "Standards and methods for conducting research, gathering information, and presenting findings with proper source attribution. Use when researching topics, analyzing documentation, or synthesizing information from multiple sources.",
                "path": "research/skills/research-methods/SKILL.md",
                "frontmatter": {
                  "name": "research-methods",
                  "description": "Standards and methods for conducting research, gathering information, and presenting findings with proper source attribution. Use when researching topics, analyzing documentation, or synthesizing information from multiple sources."
                },
                "content": "# Research Methods\n\nComprehensive standards for conducting research, evaluating sources, and presenting information in clear, well-formatted responses.\n\n## When to Use This Skill\n\nUse this skill when:\n- Researching documentation for tools, frameworks, or APIs\n- Gathering information from multiple sources\n- Synthesizing findings into coherent responses\n- Creating reference materials\n- Answering questions requiring external information\n- Building knowledge bases\n\n## Key Principles\n\n1. **Ask before researching** - Clarify ambiguous queries before starting\n2. **Prioritize official sources** - Documentation over tutorials, primary over secondary\n3. **Track all sources** - Maintain attribution for every piece of information\n4. **Match format to need** - Simple questions get simple answers, complex get detailed\n5. **Accuracy over speed** - Cross-reference critical information\n6. **User-focused presentation** - Scannable, organized, actionable\n\n## Response Type Selection\n\n### Simple Response\n\n**Use when:**\n- Single, specific question\n- How-to query with clear scope\n- Quick reference lookup\n- Command syntax or parameter info\n- Definition or concept explanation\n- User wants fast answer\n\n**Template:**\n```markdown\n# [Concise Title]\n\n[Direct answer to the question]\n\n[Code example if applicable]\n\n## Sources\n- [URL] - [Description]\n```\n\n**Example questions:**\n- \"How do I amend a git commit?\"\n- \"What is the Stop hook in Claude Code?\"\n- \"How to use WebFetch tool?\"\n\n### Detailed Response\n\n**Use when:**\n- Broad, exploratory question\n- Request mentions \"comprehensive\", \"all\", \"detailed\"\n- Time estimate provided (\"5 min intro\", \"quick overview\")\n- Multiple related concepts\n- Comparative analysis\n- Building reference material\n\n**Template:**\n```markdown\n# [Descriptive Title]\n\n[Executive summary - 2-3 sentences providing overview]\n\n## Overview\n[Context and background]\n\n## [Topic Section 1]\n[Detailed information]\n\n## [Topic Section 2]\n[Detailed information]\n\n## Key Takeaways\n- [Point 1]\n- [Point 2]\n- [Point 3]\n\n## Sources\n- [URL] - [Description]\n```\n\n**Example questions:**\n- \"Research all available hooks in Claude Code\"\n- \"Give me a comprehensive overview of git workflows\"\n- \"Explain React hooks and when to use them\"\n\n## Research Process\n\n### 1. Clarification Phase\n\nBefore starting research:\n- Identify ambiguities in the query\n- Ask specific clarifying questions\n- Don't assume user intent\n- Use AskUserQuestion tool for multiple clarifications\n\n**Examples of good clarifications:**\n- \"Are you asking about React library hooks or Claude Code hooks?\"\n- \"Do you want a quick reference or detailed explanation?\"\n- \"Which version are you using?\"\n\n### 2. Source Selection\n\n**Priority order:**\n\n**Tier 1: Official Documentation**\n- `https://code.claude.com/docs/**` - Claude Code docs\n- `https://github.com/**` - Official repositories\n- `https://gist.github.com/**` - Official gists\n- Tool/framework official documentation sites\n\n**Tier 2: Community Resources**\n- Stack Overflow (for specific problems)\n- Technical blogs (recent, authoritative)\n- Tutorial sites (well-maintained)\n\n**Tier 3: General Web**\n- General search results\n- Use only when Tier 1-2 insufficient\n- Verify information quality carefully\n\n### 3. Information Gathering\n\n**For each source:**\n1. Read thoroughly\n2. Extract relevant information\n3. Note source URL and description\n4. Identify key points\n5. Check publication date/relevance\n\n**Cross-referencing:**\n- Verify critical facts across 2+ sources\n- Note version-specific information\n- Flag contradictions for investigation\n- Prefer recent over outdated\n\n### 4. Synthesis\n\n**Organize information:**\n- Group related concepts\n- Order from general to specific\n- Identify patterns and relationships\n- Extract key takeaways\n\n**Quality checks:**\n- Is it accurate?\n- Is it complete for the query?\n- Is it clearly presented?\n- Are sources properly attributed?\n\n## Formatting Standards\n\n### Markdown Structure\n\n**Headers:**\n- H1 (`#`) - Title only\n- H2 (`##`) - Major sections\n- H3 (`###`) - Subsections if needed\n- Keep hierarchy shallow (max 3 levels)\n\n**Code blocks:**\n```language\n# Always specify language\n# Include comments for clarity\n```\n\n**Lists:**\n- Use bullets for unordered items\n- Use numbers for sequential steps\n- Keep items parallel in structure\n- One idea per bullet point\n\n**Emphasis:**\n- **Bold** for key terms and important points\n- *Italic* sparingly for subtle emphasis\n- `Code font` for technical terms, commands, file names\n\n### Source Attribution\n\n**Format:**\n```markdown\n## Sources\n- [URL] - [Brief description of what info came from this source]\n```\n\n**Best practices:**\n- List in order of importance/relevance\n- Keep descriptions concise (5-10 words)\n- Include official docs first\n- Don't duplicate similar sources\n\n**Example:**\n```markdown\n## Sources\n- https://code.claude.com/docs/hooks - Hook events and configuration\n- https://github.com/example/repo/docs - Implementation examples\n- https://blog.example.com/hooks-guide - Best practices guide\n```\n\n## Template Usage\n\n### Simple Response Template\n\n**Structure:**\n1. Title (clear, specific)\n2. Direct answer (1-3 paragraphs)\n3. Code example (if applicable)\n4. Sources (2-4 typically)\n\n**Length:** 100-300 words plus code examples\n\n**Tone:** Direct, practical, focused\n\n### Detailed Response Template\n\n**Structure:**\n1. Title (descriptive, comprehensive)\n2. Executive summary (2-3 sentences)\n3. Overview section (context/background)\n4. Topic sections (2-5 sections, organized logically)\n5. Key takeaways (3-5 bullet points)\n6. Sources (5-10 typically)\n\n**Length:** 500-1500 words\n\n**Tone:** Comprehensive, educational, organized\n\n## Quality Standards\n\n### Accuracy\n- Cross-reference critical information\n- Note version-specific details\n- Flag assumptions or uncertainties\n- Prefer official sources\n\n### Completeness\n- Answer the actual question asked\n- Include necessary context\n- Provide examples when helpful\n- Cover edge cases if relevant\n\n### Clarity\n- Use simple, direct language\n- Define technical terms\n- Organize information logically\n- Make content scannable\n\n### Attribution\n- Cite every source used\n- Track where information came from\n- Describe what each source contributed\n- Link to original documentation\n\n## Error Handling\n\n### Insufficient Information\n```\nI found limited information about [topic]. Based on available sources:\n[Present what was found]\n\nThis might indicate:\n- Recent/unreleased feature\n- Deprecated functionality\n- Different terminology\n\nWould you like me to search with alternative terms?\n```\n\n### Contradictory Sources\n```\nI found conflicting information:\n- Source A: [X]\n- Source B: [Y]\n\nThis appears to be due to [version/context/timing].\nThe most current information suggests: [recommendation]\n```\n\n### No Results\n```\nI couldn't find reliable sources for [topic].\n\nCould you:\n- Verify the terminology?\n- Provide more context?\n- Specify the tool/version?\n```\n\n## Related Files\n\n- `templates.md` - Detailed template examples with full samples\n- `search-strategies.md` - Advanced search techniques per domain\n- `source-evaluation.md` - Criteria for assessing source quality"
              }
            ]
          },
          {
            "name": "prd",
            "description": "Spec driven product management for software projects",
            "source": "./prd",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add IvanTorresEdge/molcajete.ai",
              "/plugin install prd@Molcajete.ai"
            ],
            "signals": {
              "stars": 0,
              "forks": 1,
              "pushed_at": "2026-01-06T21:16:55Z",
              "created_at": "2025-11-13T04:11:22Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/break-task",
                "description": "Break a complex task into smaller, manageable sub-tasks",
                "path": "prd/commands/break-task.md",
                "frontmatter": {
                  "description": "Break a complex task into smaller, manageable sub-tasks"
                },
                "content": "**Note:** The {spec-name} should be the timestamped directory name (e.g., `20251112-feature_name`) created by previous commands.\n\n## When to Use This Command\n\n**Use `/prd:break-task` when:**\n- Task has complexity >8 points\n- Task reveals hidden complexity during implementation\n- You need more granular tracking of progress\n- Task is blocking and needs to be divided among team members\n\n**Example:**\n```\n/prd:break-task user-auth 1.2\n```\n\nThis breaks down task 1.2 in the user-auth spec into smaller sub-tasks.\n\n---\n\nIMPORTANT: Immediately use the Task tool with subagent_type=\"prd:task-planner\" to delegate ALL work to the task-planner agent. Do NOT do any analysis or work in the main context.\n\nUse this exact prompt for the agent:\n\"Execute the task breakdown workflow following these steps:\n\n1. **Verify Inputs**\n   - Check if spec name is provided\n   - Check if task ID is provided\n   - If either is missing, use AskUserQuestion to ask:\n     - Question: \\\"Please provide the spec name and task ID (e.g., user-auth 1.2)\\\"\n     - Header: \\\"Task Info\\\"\n     - Options: [User can type in Other field]\n\n2. **Read Context**\n   - Read .molcajete/prd/specs/{spec-name}/tasks.md\n   - Read .molcajete/prd/specs/{spec-name}/spec.md\n   - Find the specific task by ID in tasks.md\n   - If task not found, return error message\n\n3. **Analyze Task Complexity**\n   - Follow **task-breakdown** skill methodology\n   - Identify why this task is complex (>8 points if applicable)\n   - Determine the hidden sub-components\n   - Understand dependencies within the task\n   - Plan shortest path to completion using vertical slicing\n\n4. **Generate Sub-tasks**\n   - Break into smaller pieces (1-3 points each)\n   - Create indented checklist structure with proper numbering\n   - Maintain sequential order for working software delivery\n   - Follow vertical slicing principles (NOT horizontal layers)\n   - Each sub-task should contribute to end-to-end functionality\n\n5. **RETURN Updated Task Section**\n   - DO NOT attempt to write files - main context will handle file operations\n   - Return in your final response:\n     - The original task line\n     - The complete sub-task breakdown\n     - Exact formatting with proper indentation\n   - Format as:\n     ```\n     === OLD TASK ===\n     [original task line to be replaced]\n\n     === NEW TASK WITH SUB-TASKS ===\n     [complete replacement including parent task and all sub-tasks]\n     ```\n\nExample transformation:\n```\n=== OLD TASK ===\n- 1.2 [ ] Implement authentication system (8 points)\n\n=== NEW TASK WITH SUB-TASKS ===\n- 1.2 [ ] Implement authentication system\n  - 1.2.1 [ ] Add JWT library dependency (1 point)\n  - 1.2.2 [ ] Create token generation utility (2 points)\n  - 1.2.3 [ ] Add authentication middleware (3 points)\n  - 1.2.4 [ ] Implement token refresh flow (3 points)\n  - 1.2.5 [ ] Add logout endpoint (1 point)\n  - 1.2.6 [ ] Write authentication tests (2 points)\n```\n\nFollow your agent instructions in agents/task-planner.md and reference the task-breakdown skill.\"\n\n## After Agent Returns\n\nOnce the agent provides the task breakdown:\n\n1. **Update tasks.md:**\n   Use Edit tool on `.molcajete/prd/specs/{spec-name}/tasks.md` to replace the old task with the new sub-task breakdown\n\n2. **Inform user:**\n   ```\n   Broke down task {task-id} into {N} sub-tasks\n   Updated: .molcajete/prd/specs/{spec-name}/tasks.md\n\n   You can now work through the sub-tasks incrementally.\n   ```"
              },
              {
                "name": "/create-tasks",
                "description": "Break specification into actionable, prioritized tasks organized by features",
                "path": "prd/commands/create-tasks.md",
                "frontmatter": {
                  "description": "Break specification into actionable, prioritized tasks organized by features"
                },
                "content": "**Note:** The {spec-name} should be the timestamped directory name (e.g., `20251112-feature_name`) created by previous commands.\n\nIMPORTANT: Immediately use the Task tool with subagent_type=\"prd:task-planner\" to delegate ALL work to the task-planner agent. Do NOT do any analysis or work in the main context.\n\nUse this exact prompt for the agent:\n\"Execute the task planning workflow following these steps:\n\n1. **Verify Prerequisites**\n   - Check if spec name is provided\n   - If not provided, use AskUserQuestion to ask:\n     - Question: \\\"Which spec should I create tasks for?\\\"\n     - Header: \\\"Spec Name\\\"\n     - Options: [User can type in Other field]\n\n2. **Read All Context**\n   - Read product context files:\n     - .molcajete/prd/PRD.md\n     - .molcajete/prd/mission.md\n     - .molcajete/prd/tech-stack.md\n   - Read the specification:\n     - .molcajete/prd/specs/{spec-name}/spec.md\n   - If spec.md doesn't exist, return error message:\n     ```\n     Error: Specification not found.\n\n     Please run /prd:write-spec {spec-name} first to create the specification.\n     ```\n\n3. **Identify Sequential Steps for Working Software**\n   - Follow the **task-breakdown** skill methodology exactly\n   - Think vertically through all layers for each feature (NOT horizontally)\n   - Organize tasks so each step produces working software\n   - For each task, ask: 'After this task, is the user one step closer to using this feature?'\n   - Shortest path to working software is the guiding principle\n\n4. **Organize Tasks Into Features**\n   - Each feature delivers complete, user-facing functionality\n   - Each feature works across all layers (vertical, not horizontal)\n   - Each feature can be tested end-to-end\n   - Feature boundaries should enable iterative delivery\n   - Good: \\\"Users can sign up for an account\\\"\n   - Bad: \\\"All database migrations\\\"\n\n5. **Estimate Complexity**\n   - Use story points from task-breakdown skill:\n     - 1 point: Simple, well-understood, minimal dependencies\n     - 3 points: Medium complexity, some unknowns\n     - 5 points: High complexity, many unknowns\n     - 8 points: Very complex (break down further if possible)\n   - Flag tasks larger than 8 points as needing breakdown\n\n6. **Analyze Dependencies**\n   - Identify blockers (what must be done before this task)\n   - Note what each task enables\n   - Flag parallel opportunities (tasks with no dependencies)\n   - Identify critical path (longest chain of dependent tasks)\n\n7. **Generate Tasks Document**\n   - Follow task-breakdown skill template exactly\n   - Include all required sections:\n     - Overview (feature description, strategic alignment, success criteria, estimated effort, key risks)\n     - Features (organized vertically with progress tracking)\n     - Task Breakdown (numbered tasks with checkboxes, complexity, dependencies, acceptance)\n     - Execution Strategy (sequential vs parallel approach)\n     - Risk Assessment (technical risks, dependencies, performance, security)\n     - Progress Tracking (overall progress percentage)\n\n8. **RETURN Complete Content**\n   - DO NOT attempt to write files - main context will handle file operations\n   - Return in your final response:\n     - The complete tasks.md content\n     - The roadmap update needed (what to change in roadmap.md)\n   - Format as:\n     ```\n     === TASKS CONTENT ===\n     [full tasks.md content]\n\n     === ROADMAP UPDATE ===\n     [description of changes to make to roadmap.md]\n     ```\n\nFollow your agent instructions in agents/task-planner.md and reference the task-breakdown skill for all methodology and templates.\"\n\n## After Agent Returns\n\nOnce the agent provides the tasks content:\n\n1. **Write tasks.md file:**\n   Use Write tool to create `.molcajete/prd/specs/{spec-name}/tasks.md` with the content returned by the agent\n\n2. **Update roadmap:**\n   Use Edit tool to update `.molcajete/prd/roadmap.md` with the changes specified by the agent\n\n3. **Inform user:**\n   ```\n   Created task breakdown: .molcajete/prd/specs/{spec-name}/tasks.md\n   Updated roadmap status to \"Ready for Implementation\"\n\n   Next step: Run /prd:execute-tasks {spec-name} to begin implementation\n   ```"
              },
              {
                "name": "/execute-tasks",
                "description": "Orchestrate task implementation with specialized stack-specific subagents",
                "path": "prd/commands/execute-tasks.md",
                "frontmatter": {
                  "description": "Orchestrate task implementation with specialized stack-specific subagents"
                },
                "content": "**Note:** The {spec-name} should be the timestamped directory name (e.g., `20251112-feature_name`) created by previous commands.\n\nIMPORTANT: Immediately use the Task tool with subagent_type=\"prd:orchestrator\" to delegate ALL work to the orchestrator agent. Do NOT do any analysis or work in the main context.\n\nUse this exact prompt for the agent:\n\"Execute the task orchestration workflow following these steps:\n\n**CRITICAL SCOPE CONTROL:**\n- ONLY execute the specific tasks that are explicitly requested\n- If user specifies task IDs (e.g., \\\"complete task 1.1\\\" or \\\"implement Feature 2\\\"), execute ONLY those tasks\n- STOP immediately after completing the requested tasks - DO NOT continue to other tasks\n- DO NOT assume you should build everything - ask if unclear about scope\n- Completing more than requested wastes time and violates user intent\n\n**IMPORTANT: You CANNOT write files due to subagent limitations. Track all changes and return them to main context for file updates.**\n\n1. **Verify Prerequisites and Scope**\n   - Check if spec name is provided\n   - If not provided, use AskUserQuestion to ask:\n     - Question: \\\"Which spec should I execute tasks for?\\\"\n     - Header: \\\"Spec Name\\\"\n     - Options: [User can type in Other field]\n   - Check if specific tasks are requested (task IDs, feature numbers, or \\\"all\\\")\n   - If unclear, use AskUserQuestion to ask:\n     - Question: \\\"Which tasks should I execute? (e.g., 'task 1.1', 'Feature 2', or 'all')\\\"\n     - Header: \\\"Task Scope\\\"\n     - Options:\n       - \\\"All tasks\\\" - Execute everything in tasks.md\n       - \\\"Specific tasks\\\" - User will specify in Other field\n     - multiSelect: false\n\n2. **Read All Context**\n   - Read product context:\n     - .molcajete/prd/PRD.md\n     - .molcajete/prd/mission.md\n     - .molcajete/prd/tech-stack.md\n   - Read specification:\n     - .molcajete/prd/specs/{spec-name}/spec.md\n     - .molcajete/prd/specs/{spec-name}/tasks.md\n   - Read roadmap:\n     - .molcajete/prd/roadmap.md\n   - If any files are missing, return error message\n\n3. **Discover Available Plugins and Agents**\n   - Read plugin metadata from */PLUGIN.md files of the plugin directory\n   - Parse YAML frontmatter for plugin id, techStackKeywords, and agents list\n   - Build agent registry with capabilities and \"Use When\" guidance\n   - If no PLUGIN.md files found, fall back to general-purpose agents\n\n4. **Identify Tech Stack and Match Agents**\n   - From tech-stack.md, identify technologies mentioned (e.g., \"Solidity\", \"Go\", \"React\")\n   - Match keywords against plugin techStackKeywords\n   - Load agents from matching plugins\n   - Example: tech-stack mentions \"Solidity\" â†’ load sol:* agents from tech-stacks/solidity/PLUGIN.md\n   - Map tasks to appropriate subagents based on task type and agent capabilities\n   - Follow **task-breakdown** skill for understanding feature organization\n\n5. **Plan Execution Strategy**\n   - Use AskUserQuestion to ask user:\n     - Question: \\\"Execute tasks sequentially (one at a time) or in parallel (multiple at once)?\\\"\n     - Header: \\\"Execution\\\"\n     - Options:\n       - \\\"Sequential\\\" - One feature at a time, safer for learning codebases\n       - \\\"Parallel\\\" - Multiple features simultaneously, faster but requires clear boundaries\n     - multiSelect: false\n   - Reference task-breakdown skill for orchestration strategies\n\n6. **Execute Tasks (RESPECT SCOPE)**\n   - Execute ONLY the tasks specified in step 1 - DO NOT continue beyond requested scope\n   - Before starting each task, verify it's within the requested scope\n   - Delegate tasks to appropriate tech-specific subagents using Task tool\n   - For each completed task:\n     - Verify acceptance criteria are met\n     - Run tests\n     - Track all changes made\n   - If tasks fail, document the failure and blockers\n   - After completing requested tasks, STOP and return results - DO NOT continue to additional tasks\n\n7. **Track All Changes (DO NOT WRITE FILES)**\n   For each task, record:\n   - Task ID and description\n   - Completion status and timestamp\n   - Implementation notes and decisions\n   - Any deviations from spec\n   - Files created/modified by subagents\n   - Test results (pass/fail)\n   - Technical debt identified\n\n8. **RETURN Complete Update Package**\n   - DO NOT attempt to write files - main context will handle file operations\n   - Return in your final response:\n\n   ```\n   === COMPLETED TASKS ===\n   [List of task IDs with completion timestamps, format: 1.1 - Task description (Completed: YYYY-MM-DD HH:MM)]\n\n   === TASKS.MD UPDATES ===\n   [Specific edits needed: which tasks to check off, implementation notes to add]\n\n   === SPEC.MD IMPLEMENTATION NOTES ===\n   [All important decisions, technical debt, deviations from original design]\n\n   === SPEC.MD IMPLEMENTATION SUMMARY ===\n   [Status, what was built, key decisions, test results, next steps]\n\n   === ROADMAP UPDATE ===\n   [New status (In Progress/Implemented/Blocked), completion percentage, completion date if done]\n\n   === FILES CREATED/MODIFIED ===\n   [List all files created or modified by subagents with brief descriptions]\n   ```\n\nFollow your agent instructions in agents/orchestrator.md and reference task-breakdown skill for orchestration strategies.\"\n\n## After Agent Returns\n\nOnce the agent provides the update package:\n\n1. **Update roadmap.md:**\n   Use Edit tool on `.molcajete/prd/roadmap.md` to change feature status as specified by agent\n\n2. **Update tasks.md:**\n   Use Edit tool on `.molcajete/prd/specs/{spec-name}/tasks.md` to:\n   - Check off completed tasks\n   - Add completion timestamps\n   - Add implementation notes\n\n3. **Update spec.md:**\n   Use Edit tool on `.molcajete/prd/specs/{spec-name}/spec.md` to:\n   - Add \\\"Implementation Notes\\\" section (if not exists) with decisions and deviations\n   - Add \\\"Implementation Summary\\\" section at end with status, decisions, test results, next steps\n\n4. **Inform user:**\n   ```\n   Implementation complete for {spec-name}\n\n   Updated files:\n   - .molcajete/prd/specs/{spec-name}/tasks.md (X tasks completed)\n   - .molcajete/prd/specs/{spec-name}/spec.md (added implementation notes)\n   - .molcajete/prd/roadmap.md (status updated)\n\n   Files created/modified:\n   [List from agent]\n\n   Summary: [Brief summary from agent]\n   ```"
              },
              {
                "name": "/plan-product",
                "description": "Establish strategic foundation for product (one-time setup)",
                "path": "prd/commands/plan-product.md",
                "frontmatter": {
                  "description": "Establish strategic foundation for product (one-time setup)"
                },
                "content": "IMPORTANT: Immediately use the Task tool with subagent_type=\"prd:product-strategist\" to delegate ALL work to the product-strategist agent. Do NOT do any analysis or work in the main context.\n\nUse this exact prompt for the agent:\n\"Execute the product planning workflow following these steps:\n\n1. **Introduction**\n   - Explain this is a one-time setup to establish product foundation\n   - Let user know this creates strategic context that guides all future development\n   - Mention this can be updated later as the product evolves\n\n2. **Conduct Strategic Interview**\n   - Use AskUserQuestion tool to gather information across five key areas:\n\n   **Vision & Purpose:**\n   - What problem does this product solve?\n   - What is the long-term vision?\n   - What makes this product unique?\n   - What does success look like?\n\n   **Target Users:**\n   - Who are the primary users?\n   - What are their key pain points?\n   - What are their technical capabilities?\n   - What platforms/devices do they use?\n\n   **Differentiation:**\n   - What alternatives exist?\n   - Why would users choose this product?\n   - What are the key competitive advantages?\n   - What won't this product do?\n\n   **Technology Stack:**\n   - What technology choices have been made or are preferred?\n   - Are there existing systems to integrate with?\n   - What are the scalability requirements?\n   - What are the security/compliance requirements?\n\n   **Roadmap:**\n   - What features are most critical (Now)?\n   - What features come next (Next)?\n   - What features are on the horizon (Later)?\n   - Why this prioritization?\n\n3. **Generate Product Documents**\n   - Follow the **product-planning** skill templates exactly\n   - Create four foundational documents:\n     - mission.md (Vision, Target Users, Key Differentiators, Success Metrics)\n     - roadmap.md (Features organized into Now/Next/Later/Completed with rationale)\n     - tech-stack.md (Backend, frontend, infrastructure, integrations, standards)\n     - PRD.md (Master index with links to all context files)\n   - All files will be placed in `.molcajete/prd/` directory\n\n4. **Ensure Strategic Alignment**\n   - Verify all roadmap features align with the mission\n   - Ensure tech stack supports the product vision\n   - Check that target users' needs are addressed\n   - Validate success metrics are measurable\n\n5. **RETURN Complete Content**\n   - DO NOT attempt to write files - main context will handle file operations\n   - Return in your final response all four document contents\n   - Format as:\n     ```\n     === MISSION.MD ===\n     [full mission.md content]\n\n     === ROADMAP.MD ===\n     [full roadmap.md content]\n\n     === TECH-STACK.MD ===\n     [full tech-stack.md content]\n\n     === PRODUCT.MD ===\n     [full PRD.md content]\n     ```\n\nFollow your agent instructions in agents/product-strategist.md and reference the product-planning skill for all templates and guidance.\"\n\n## After Agent Returns\n\nOnce the agent provides all document contents:\n\n1. **Create product directory:**\n   ```bash\n   mkdir -p .molcajete/prd\n   ```\n\n2. **Write all files:**\n   - Use Write tool to create `.molcajete/prd/PRD.md`\n   - Use Write tool to create `.molcajete/prd/mission.md`\n   - Use Write tool to create `.molcajete/prd/roadmap.md`\n   - Use Write tool to create `.molcajete/prd/tech-stack.md`\n\n3. **Inform user:**\n   ```\n   Created product foundation:\n   - .molcajete/prd/PRD.md (master index)\n   - .molcajete/prd/mission.md (vision and strategy)\n   - .molcajete/prd/roadmap.md (feature roadmap)\n   - .molcajete/prd/tech-stack.md (technology decisions)\n\n   Next steps:\n   - Run /prd:scope-feature to analyze a specific feature, OR\n   - Run /prd:write-spec {feature-name} to create a specification\n   ```"
              },
              {
                "name": "/scope-feature",
                "description": "Refine rough feature ideas into clear, scoped requirements (optional for complex features)",
                "path": "prd/commands/scope-feature.md",
                "frontmatter": {
                  "description": "Refine rough feature ideas into clear, scoped requirements (optional for complex features)"
                },
                "content": "## When to Use This Command\n\n**Use `/prd:scope-feature` when:**\n- Feature idea is vague or underspecified\n- Multiple stakeholders have different interpretations\n- Feature involves complex integrations or unknowns\n- You want to explore technical feasibility before full spec\n- Feature scope needs clear boundaries defined\n\n**Skip this and go directly to `/prd:write-spec` when:**\n- Feature is simple and well-understood\n- Requirements are already crystal clear\n- You have mockups/designs that fully define the feature\n- Feature is a minor enhancement to existing functionality\n\n---\n\nIMPORTANT: Immediately use the Task tool with subagent_type=\"prd:feature-analyst\" to delegate ALL work to the feature-analyst agent. Do NOT do any analysis or work in the main context.\n\nUse this exact prompt for the agent:\n\"Execute the feature scoping workflow following these steps:\n\n1. **Check Product Context**\n   - Verify product context exists:\n     - .molcajete/prd/PRD.md\n     - .molcajete/prd/mission.md\n     - .molcajete/prd/roadmap.md\n     - .molcajete/prd/tech-stack.md\n   - If any are missing, return error message:\n     ```\n     Error: Product context not found.\n\n     Please run /prd:plan-product first to set up product context.\n     ```\n\n2. **Identify Feature to Analyze**\n   - Use AskUserQuestion to ask:\n     - Question: \\\"Which feature should I analyze? You can select from the roadmap or describe a new feature idea.\\\"\n     - Header: \\\"Feature\\\"\n     - Options: [User can type in Other field to describe new feature]\n\n3. **Conduct Requirements Interview**\n   - Use AskUserQuestion tool to gather detailed requirements across these areas:\n     - **User Stories & Value**: Who benefits? What problem does this solve? What value does it deliver?\n     - **Functional Requirements**: What must the feature do? What are the core capabilities?\n     - **Technical Considerations**: Integration points? Performance requirements? Security needs?\n     - **User Experience**: How will users interact? What's the happy path? What about errors?\n     - **Scope & Boundaries**: What's included? What's explicitly excluded? What's MVP vs. future?\n   - Ask follow-up questions to clarify ambiguous or incomplete answers\n   - Reference **spec-writing** skill for requirements gathering best practices\n\n4. **Generate Requirements Document**\n   - Follow the **spec-writing** skill requirements template\n   - Include these sections:\n     - Overview (feature description, user value, success criteria)\n     - User Stories (who, what, why for each user type)\n     - Functional Requirements (detailed capabilities)\n     - Technical Considerations (integrations, performance, security, scalability)\n     - User Experience (flows, interactions, validation, errors)\n     - Scope Definition (in scope, out of scope, MVP boundaries, future enhancements)\n   - Reference product context for strategic alignment\n\n5. **RETURN Complete Content**\n   - DO NOT attempt to write files - main context will handle file operations\n   - Return in your final response:\n     - The complete requirements.md content\n     - Suggested feature name (derived from the requirements)\n   - Format as:\n     ```\n     === FEATURE NAME ===\n     [suggested-feature-name]\n\n     === REQUIREMENTS CONTENT ===\n     [full requirements.md content]\n     ```\n\nFollow your agent instructions in agents/feature-analyst.md and reference the spec-writing skill for requirements format.\"\n\n## After Agent Returns\n\nOnce the agent provides the requirements content:\n\n1. **Create timestamped spec directory:**\n   ```bash\n   FEATURE_DIR=$(python3 -c \"from datetime import datetime; from pathlib import Path; import sys; name = sys.argv[1].replace('-', '_'); timestamp = datetime.now().strftime('%Y%m%d'); dir_name = f'{timestamp}-{name}'; Path(f'.molcajete/prd/specs/{dir_name}').mkdir(parents=True, exist_ok=True); print(dir_name)\" \"{feature-name}\")\n   ```\n\n2. **Write requirements.md file:**\n   Use Write tool to create `.molcajete/prd/specs/${FEATURE_DIR}/requirements.md` with the content returned by the agent\n\n3. **Inform user:**\n   ```\n   Created requirements: .molcajete/prd/specs/${FEATURE_DIR}/requirements.md\n\n   Next step: Run /prd:write-spec ${FEATURE_DIR} to create the full technical specification\n   ```"
              },
              {
                "name": "/write-spec",
                "description": "Create formal specification for a feature",
                "path": "prd/commands/write-spec.md",
                "frontmatter": {
                  "description": "Create formal specification for a feature"
                },
                "content": "IMPORTANT: Immediately use the Task tool with subagent_type=\"prd:spec-writer\" to delegate ALL work to the spec-writer agent. Do NOT do any analysis or work in the main context.\n\nUse this exact prompt for the agent:\n\"Execute the spec writing workflow following these steps:\n\n1. **Check Prerequisites**\n   - Verify product context exists by checking for:\n     - .molcajete/prd/PRD.md\n     - .molcajete/prd/mission.md\n     - .molcajete/prd/roadmap.md\n     - .molcajete/prd/tech-stack.md\n   - If any are missing, return error message:\n     ```\n     Error: Product context not found.\n\n     Please run /prd:plan-product first to set up product context.\n     ```\n\n2. **Get Spec Name**\n   - If spec name not provided in command, use AskUserQuestion to ask:\n     - Question: \\\"What is the feature name for this spec?\\\"\n     - Header: \\\"Feature Name\\\"\n     - Options: [User can type in Other field]\n\n3. **Check for Existing Requirements**\n   - Try to read `.molcajete/prd/specs/{spec-name}/requirements.md`\n   - If exists, read and use as input\n   - If not exists, use AskUserQuestion to ask:\n     - Question: \\\"Describe the feature you want to spec out. Include: user value, functional requirements, and any technical considerations.\\\"\n     - Header: \\\"Feature Details\\\"\n     - Options: [User can type in Other field]\n\n4. **Generate Comprehensive Specification**\n   - Follow the **spec-writing** skill for all section requirements and structure\n   - Apply **software-principles** skill for architecture decisions\n   - Create specification with these sections:\n     - Overview (feature description, strategic alignment, user value, success criteria)\n     - Requirements Summary (functional, non-functional, constraints, out of scope)\n     - Data Models (schema, relationships, validation, indexes)\n     - API Contracts if applicable (endpoints, request/response, auth, errors)\n     - User Interface if applicable (components, flows, state, validation, accessibility)\n     - Integration Points (external APIs, dependencies, events)\n     - Acceptance Criteria (testable criteria, edge cases, performance, security)\n     - Verification (test scenarios at all levels)\n\n5. **RETURN Complete Content**\n   - DO NOT attempt to write files - main context will handle file operations\n   - Return in your final response:\n     - The complete spec.md content\n     - The roadmap update needed (what to change in roadmap.md)\n   - Format as:\n     ```\n     === SPEC CONTENT ===\n     [full spec.md content]\n\n     === ROADMAP UPDATE ===\n     [description of changes to make to roadmap.md]\n     ```\n\nFollow your agent instructions in agents/spec-writer.md and reference the spec-writing skill for all formatting and content standards.\"\n\n## After Agent Returns\n\nOnce the agent provides the spec content:\n\n1. **Create timestamped directory:**\n   ```bash\n   FEATURE_DIR=$(python3 -c \"from datetime import datetime; from pathlib import Path; import sys; name = sys.argv[1].replace('-', '_'); timestamp = datetime.now().strftime('%Y%m%d'); dir_name = f'{timestamp}-{name}'; Path(f'.molcajete/prd/specs/{dir_name}').mkdir(parents=True, exist_ok=True); print(dir_name)\" \"{spec-name}\")\n   ```\n\n2. **Write spec file:**\n   Use Write tool to create `.molcajete/prd/specs/${FEATURE_DIR}/spec.md` with the content returned by the agent\n\n3. **Update roadmap:**\n   Use Edit tool on `.molcajete/prd/roadmap.md` to make the changes specified by the agent\n\n4. **Inform user:**\n   ```\n   Created specification: .molcajete/prd/specs/${FEATURE_DIR}/spec.md\n   Updated roadmap status\n\n   Next step: Run /prd:create-tasks ${FEATURE_DIR} to break this into implementation tasks\n   ```"
              }
            ],
            "skills": [
              {
                "name": "create-feature-folder",
                "description": "Helper for creating timestamped feature directories. Use when creating new feature specs.",
                "path": "prd/skills/create-feature-folder/SKILL.md",
                "frontmatter": {
                  "name": "create-feature-folder",
                  "description": "Helper for creating timestamped feature directories. Use when creating new feature specs."
                },
                "content": "# Create Feature Folder Skill\n\n## When to Use\n\n- Creating new feature directories in .molcajete/prd/specs/\n- Need timestamped folder names (YYYYMMDD-feature_name format)\n\n## Usage\n\nThe timestamp logic is inlined directly in commands for portability:\n\n```bash\nFEATURE_DIR=$(python3 -c \"from datetime import datetime; from pathlib import Path; import sys; name = sys.argv[1].replace('-', '_'); timestamp = datetime.now().strftime('%Y%m%d'); dir_name = f'{timestamp}-{name}'; Path(f'.molcajete/prd/specs/{dir_name}').mkdir(parents=True, exist_ok=True); print(dir_name)\" \"<feature-name>\")\n```\n\n**Output:** Returns the timestamped directory name (e.g., `20251112-feature_name`)\n\n**How it works:**\n1. Converts feature name from kebab-case to snake_case\n2. Gets current date in YYYYMMDD format\n3. Creates directory name: `{timestamp}-{feature_name}`\n4. Creates directory at: `.molcajete/prd/specs/{timestamp}-{feature_name}/`\n5. Returns just the directory name for use in subsequent commands\n\n## Example\n\n```bash\n# Create folder for \"user-authentication\" feature\nFEATURE_DIR=$(python3 -c \"from datetime import datetime; from pathlib import Path; import sys; name = sys.argv[1].replace('-', '_'); timestamp = datetime.now().strftime('%Y%m%d'); dir_name = f'{timestamp}-{name}'; Path(f'.molcajete/prd/specs/{dir_name}').mkdir(parents=True, exist_ok=True); print(dir_name)\" \"user-authentication\")\n# Creates: .molcajete/prd/specs/20251112-user_authentication/\n# Returns: 20251112-user_authentication\n\n# Use in subsequent commands\necho \"Feature directory: ${FEATURE_DIR}\"\n# Output: Feature directory: 20251112-user_authentication\n```"
              },
              {
                "name": "product-planning",
                "description": "Standards and templates for product vision, roadmap planning, and technology selection. Use when establishing product foundation or making strategic decisions.",
                "path": "prd/skills/product-planning/SKILL.md",
                "frontmatter": {
                  "name": "product-planning",
                  "description": "Standards and templates for product vision, roadmap planning, and technology selection. Use when establishing product foundation or making strategic decisions."
                },
                "content": "# Product Planning Skill\n\n## When to Use\n\n- Creating initial product vision and mission\n- Planning feature roadmaps\n- Making technology stack decisions\n- Evaluating strategic alignment of features\n\n## Strategic Interview Questions\n\n### Vision Questions\n- What problem does this product solve?\n- Why does this problem matter?\n- What does success look like?\n\n### User Questions\n- Who will use this product?\n- What are their key pain points?\n- How do they currently solve this problem?\n\n### Differentiation Questions\n- What makes this product unique?\n- Who are the competitors?\n- What's your unfair advantage?\n\n### Roadmap Questions\n- What are the must-have features?\n- What's nice to have but not critical?\n- What's the natural feature progression?\n\n### Tech Stack Questions\n- What are your technical requirements?\n- What's your team's expertise?\n- What are your scaling needs?\n- What are your integration requirements?\n\n## Document Templates\n\nSee templates/ directory for:\n- mission-template.md\n- roadmap-template.md\n- tech-stack-template.md\n\n## Strategic Alignment Checks\n\nWhen reviewing features:\n1. Does this align with product mission?\n2. Does this serve target users?\n3. Does this leverage our differentiators?\n4. Does this fit our tech stack?"
              },
              {
                "name": "spec-writing",
                "description": "Standards and templates for writing detailed feature specifications. Use when transforming requirements into implementation-ready specs.",
                "path": "prd/skills/spec-writing/SKILL.md",
                "frontmatter": {
                  "name": "spec-writing",
                  "description": "Standards and templates for writing detailed feature specifications. Use when transforming requirements into implementation-ready specs."
                },
                "content": "# Spec Writing Skill\n\n## When to Use\n\n- Writing formal feature specifications\n- Refining rough requirements\n- Defining acceptance criteria\n- Documenting technical architecture for features\n\n## Specification Structure\n\n### Required Sections\n\n1. **Overview**\n   - High-level feature description\n   - Strategic alignment (why this feature matters)\n   - User value proposition\n\n2. **Requirements**\n   - Functional requirements (what it must do)\n   - Non-functional requirements (performance, security, etc.)\n   - Constraints and assumptions\n\n3. **Data Models**\n   - Database schema / smart contract storage\n   - Entity relationships\n   - Data validation rules\n\n4. **API Contracts** (if applicable)\n   - Endpoints and routes\n   - Request/response formats\n   - Error handling\n\n5. **User Interface** (if applicable)\n   - UI components and layout\n   - User flows and interactions\n   - Accessibility requirements\n\n6. **Integration Points**\n   - External services\n   - Internal dependencies\n   - Third-party APIs\n\n7. **Acceptance Criteria**\n   - Testable success criteria\n   - Edge cases to handle\n   - Performance targets\n\n8. **Verification**\n   - How to validate implementation\n   - Test scenarios\n   - Success metrics\n\n## Best Practices\n\n- Be specific and testable\n- Include visual references when UI is involved\n- Define clear boundaries and scope\n- Reference product context for strategic alignment\n- Apply software principles from code-principles plugin\n- Think in vertical features (what's the MVP feature?)\n\n## Formatting Standards\n\n**CRITICAL: Follow template formatting exactly:**\n\n- Use text checkboxes: `[ ]` for incomplete, `[x]` for complete\n- **NEVER use emojis** for checkboxes or task status\n- Follow the exact structure and styling from the templates\n- Maintain consistent heading levels and list styles\n- Use numbered lists where templates show numbers\n- Preserve all formatting as shown in requirements-template.md and spec-template.md\n\n## Templates\n\nSee templates/ directory for:\n- requirements-template.md\n- spec-template.md"
              },
              {
                "name": "task-breakdown",
                "description": "Methodology for breaking specifications into actionable tasks organized by features. Use when creating task lists or orchestrating implementation.",
                "path": "prd/skills/task-breakdown/SKILL.md",
                "frontmatter": {
                  "name": "task-breakdown",
                  "description": "Methodology for breaking specifications into actionable tasks organized by features. Use when creating task lists or orchestrating implementation."
                },
                "content": "# Task Breakdown Skill\n\n## When to Use\n\n- Breaking specs into implementation tasks\n- Organizing work by features\n- Planning sequential or parallel execution\n- Estimating implementation effort\n\n## Feature Organization Methodology\n\n### Principle\n**UPMOST IMPORTANCE:** The best path is the shortest to get working software that can be tested end-to-end.\n\nEach feature delivers a complete user-facing capability that works across all application layers. Tasks are organized sequentially within each feature to achieve working, testable software as quickly as possible.\n\n### Feature Organization\n\n**Feature Structure:**\n```\n## 1. [ ] Users should be able to signup\n\n- 1.1 [ ] Create user migrations\n- 1.2 [ ] Add /signup end-point\n- 1.3 [ ] Build user signup form\n- 1.4 [ ] Add user signup form validations\n- 1.5 [ ] Send signup confirmation email\n- 1.6 [ ] Add /signup/confirmation/:confirmation_id end-point\n  - 1.6.1 [ ] Verify valid token\n  - 1.6.2 [ ] Throw error with expired tokens\n  - 1.6.3 [ ] Activate user account\n- 1.7 [ ] Build user email confirmation page\n\n## 2. [ ] Users should be able to login\n\n- 2.1 [ ] Add /signin end-point\n- 2.2 [ ] Build user sign-in form\n- 2.3 [ ] Add user sign-in validations\n- 2.4 [ ] Display \"Lost password?\" link after failed attempt\n```\n\n### Feature Boundaries\n\n**Good feature:** \"Users should be able to signup\"\n- Complete end-to-end functionality\n- Works across all layers (database, backend, frontend)\n- Can be tested and demonstrated\n- Delivers immediate user value\n\n**Bad feature:** \"All database migrations\"\n- Horizontal layer, not vertical feature\n- Cannot be tested end-to-end\n- Doesn't deliver user value by itself\n\n### Task Types Within Features\n\nAs you break down each feature, you'll typically encounter these types of tasks in logical sequence:\n\n- **Data layer:** Migrations, schema design, indexes\n- **Backend:** API endpoints, business logic, validation, error handling\n- **Frontend:** UI components, forms, user flows, state management\n- **Integration:** Email sending, external APIs, webhooks\n- **Testing:** Unit tests, integration tests, E2E tests\n\nThe key is to organize these in the shortest path to working software, not in separate sections.\n\n## Estimation Guidelines\n\n**Complexity Levels:**\n- **Simple (1 point):** Straightforward, well-understood, minimal dependencies\n- **Medium (3 points):** Moderate complexity, some unknowns, few dependencies\n- **Complex (5 points):** High complexity, many unknowns, multiple dependencies\n- **Very Complex (8 points):** Requires research, high risk, many dependencies\n\n**Red Flags:**\n- Tasks larger than 8 points (break down further)\n- Vague task descriptions\n- Hidden dependencies\n\n## Dependency Analysis\n\n1. **Identify Dependencies:**\n   - What must be done before this task?\n   - What blocks this task?\n   - What does this task enable?\n\n2. **Critical Path:**\n   - Longest chain of dependent tasks\n   - High-risk items should be tackled early\n\n3. **Parallel Opportunities:**\n   - Tasks with no dependencies can run in parallel\n   - Different specialties can work simultaneously within a feature\n\n## Orchestration Strategies\n\n### Sequential Execution\n- One feature at a time, in priority order\n- Complete all tasks for feature 1, then move to feature 2\n- Each feature delivers working, testable software before moving to the next\n- Best for: Learning codebases, tight coordination needed, high-risk features\n\n### Parallel Execution\n- Multiple features simultaneously\n- Multiple subagents working on independent features\n- Best for: Large specs with independent features, experienced teams, well-defined boundaries\n- Requires careful dependency management\n\n## Formatting Standards\n\n**CRITICAL: Follow template formatting exactly:**\n\n- Use text checkboxes: `[ ]` for incomplete, `[x]` for complete\n- **NEVER use emojis** for checkboxes or task status\n- **ALL tasks MUST have task IDs** in the format: 1.1, 1.2, 2.1, 2.2, etc.\n- **ALL subtasks MUST have nested IDs** like: 1.3.1, 1.3.2, 1.3.3\n- Follow the exact structure and styling from tasks-template.md\n- Maintain consistent indentation (2 spaces for nested items)\n- Feature headers use: `## N. [ ] Feature description`\n- Tasks use: `- N.M [ ] Task description`\n- Subtasks use: `  - N.M.K [ ] Subtask description`\n\n## Templates\n\nSee templates/ directory for:\n- tasks-template.md"
              }
            ]
          },
          {
            "name": "sol",
            "description": "Smart contract development, testing, auditing, and deployment for Solidity for Foundy and Hardhat support",
            "source": "./tech-stacks/solidity",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add IvanTorresEdge/molcajete.ai",
              "/plugin install sol@Molcajete.ai"
            ],
            "signals": {
              "stars": 0,
              "forks": 1,
              "pushed_at": "2026-01-06T21:16:55Z",
              "created_at": "2025-11-13T04:11:22Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/analyze",
                "description": "Run static analysis on contracts using Slither",
                "path": "tech-stacks/solidity/commands/analyze.md",
                "frontmatter": {
                  "description": "Run static analysis on contracts using Slither"
                },
                "content": "# Run Static Analysis\n\nRun static analysis on contracts using Slither.\n\nUse the Task tool to launch the **auditor** agent with the following instructions:\n\n1. Check if Slither is installed\n2. Run static analysis: `slither .`\n3. Parse and categorize findings by severity:\n   - High severity\n   - Medium severity\n   - Low severity\n   - Informational\n4. Filter out known false positives if configured\n5. Report findings with file and line references\n6. Provide brief explanation of each issue\n7. Suggest fixes for high-severity issues\n\nReference the security-audit skill."
              },
              {
                "name": "/audit",
                "description": "Perform comprehensive security audit using multiple tools",
                "path": "tech-stacks/solidity/commands/audit.md",
                "frontmatter": {
                  "description": "Perform comprehensive security audit using multiple tools"
                },
                "content": "IMPORTANT: Immediately use the Task tool with subagent_type=\"sol:auditor\" to delegate ALL work to the auditor agent. Do NOT do any analysis or work in the main context.\n\nUse this exact prompt for the agent:\n\"Execute the security audit workflow following these steps:\n\n1. **Identify Contracts in Scope**\n   - Use Glob to find all contracts: `src/**/*.sol` or `contracts/**/*.sol`\n   - List all contracts that will be audited\n   - Understand contract purposes from NatSpec and code structure\n\n2. **Run Automated Security Analysis**\n   - Follow **security-audit** skill methodology\n   - Run Slither for static analysis:\n     ```bash\n     slither . --json slither-report.json\n     slither . --detect reentrancy-eth,unchecked-transfer,dangerous-strict-equalities\n     ```\n   - Run Mythril if available:\n     ```bash\n     myth analyze contracts/*.sol -o json > mythril-report.json\n     ```\n   - Run Echidna for fuzzing if configured:\n     ```bash\n     echidna-test contracts/MyContract.sol --config echidna.yaml\n     ```\n   - Run Foundry fuzz tests:\n     ```bash\n     forge test --fuzz-runs 10000\n     ```\n\n3. **Perform Manual Code Review**\n   - Use security-audit skill checklists:\n     - Common vulnerabilities checklist (reentrancy, access control, integer issues, external calls, oracle manipulation, front-running, DoS, timestamp dependence, delegatecall, signature replay)\n     - Access control checklist (admin protection, role checks, privilege escalation, multi-sig, timelock)\n     - Token-specific checklist if applicable (ERC compliance, approval race, transfer checks, fee-on-transfer, decimals)\n     - DeFi-specific checklist if applicable (oracle manipulation, flash loans, price staleness, slippage, liquidation)\n     - Upgrade-specific checklist if upgradeable (storage layout, initializers, authorization, storage gaps, upgrade testing)\n   - Review code manually for logic errors and business logic issues\n\n4. **Classify All Findings by Severity**\n   - **Critical**: Direct loss of funds, contract takeover, unauthorized state manipulation\n   - **High**: Significant loss under specific conditions, privilege escalation, critical function DoS\n   - **Medium**: Partial loss of funds, temporary DoS, front-running opportunities\n   - **Low**: Gas optimizations, code quality issues, minor edge cases\n   - **Informational**: Best practice recommendations, documentation improvements, code clarity\n\n5. **Generate Comprehensive Audit Report**\n   - Follow security-audit skill report template\n   - Include:\n     - Executive Summary (overall assessment, critical findings, recommendations)\n     - Scope (contracts audited, tools used, audit date)\n     - Findings (grouped by severity with file, lines, description, proof of concept, recommendation for each)\n     - Summary (counts by severity)\n     - Recommendations (prioritized actions)\n   - For each finding provide:\n     - Severity classification\n     - File and line numbers\n     - Detailed description\n     - Proof of concept code if applicable\n     - Specific, actionable remediation recommendation\n\n6. **Create Summary Report**\n   - Display summary with counts:\n     ```\n     Security Audit Summary:\n     - Critical: X\n     - High: X\n     - Medium: X\n     - Low: X\n     - Informational: X\n     ```\n   - Highlight critical and high severity findings\n   - Provide next steps and recommendations\n\nFollow your agent instructions in agents/auditor.md and reference the security-audit skill and all relevant checklists.\""
              },
              {
                "name": "/build",
                "description": "Full build with compilation and artifact generation",
                "path": "tech-stacks/solidity/commands/build.md",
                "frontmatter": {
                  "description": "Full build with compilation and artifact generation"
                },
                "content": "# Build Project\n\nFull build with compilation and artifact generation.\n\nUse the Task tool to launch the **developer** agent with the following instructions:\n\n1. Detect project framework using framework-detection skill\n2. Clean any existing artifacts\n3. Compile all contracts\n4. Generate type definitions (if Hardhat with TypeChain)\n5. Verify build artifacts are created\n6. Report build summary with contract count, warnings, and artifact locations\n\nReference the framework-detection skill."
              },
              {
                "name": "/clean",
                "description": "Clean all build artifacts and cache",
                "path": "tech-stacks/solidity/commands/clean.md",
                "frontmatter": {
                  "description": "Clean all build artifacts and cache"
                },
                "content": "# Clean Build Artifacts\n\nClean all build artifacts and cache.\n\nUse the Task tool to launch the **developer** agent with the following instructions:\n\n1. Detect project framework using framework-detection skill\n2. Clean build artifacts:\n   - Foundry: `forge clean`\n   - Hardhat: `npx hardhat clean`\n3. Remove cache directories\n4. Report cleaned directories and freed space\n\nReference the framework-detection skill."
              },
              {
                "name": "/compile",
                "description": "Compile Solidity contracts using the detected framework",
                "path": "tech-stacks/solidity/commands/compile.md",
                "frontmatter": {
                  "description": "Compile Solidity contracts using the detected framework"
                },
                "content": "# Compile Contracts\n\nCompile Solidity contracts using the detected framework.\n\nUse the Task tool to launch the **developer** agent with the following instructions:\n\n1. Detect the project framework (Foundry, Hardhat, or Hybrid) using framework-detection skill\n2. Compile contracts using the appropriate command:\n   - Foundry: `forge build`\n   - Hardhat: `npx hardhat compile`\n   - Hybrid: Compile with both\n3. Report any compilation errors with file and line references\n4. Show compilation artifacts location\n5. Report success with contract count and any warnings\n\nReference the framework-detection skill."
              },
              {
                "name": "/console",
                "description": "Launch interactive console for contract interaction",
                "path": "tech-stacks/solidity/commands/console.md",
                "frontmatter": {
                  "description": "Launch interactive console for contract interaction"
                },
                "content": "# Interactive Console\n\nLaunch interactive console for contract interaction.\n\nUse the Task tool to launch the **developer** agent with the following instructions:\n\n1. Detect framework:\n   - Foundry: Launch `cast` for network interactions or explain interactive chisel usage\n   - Hardhat: Launch `npx hardhat console`\n2. For Foundry, provide common cast commands:\n   - `cast call [contract] \"[signature]\"` - Call view function\n   - `cast send [contract] \"[signature]\"` - Send transaction\n   - `cast storage [contract] [slot]` - Read storage\n   - `cast 4byte [selector]` - Decode function selector\n3. For Hardhat console, show example usage:\n   - Loading contract factory\n   - Connecting to deployed contracts\n   - Calling functions\n   - Checking balances and state\n4. Provide relevant examples based on contracts in project\n\nReference the framework-detection skill."
              },
              {
                "name": "/coverage",
                "description": "Generate test coverage report and analyze results",
                "path": "tech-stacks/solidity/commands/coverage.md",
                "frontmatter": {
                  "description": "Generate test coverage report and analyze results"
                },
                "content": "# Generate Coverage Report\n\nGenerate test coverage report and analyze results.\n\nUse the Task tool to launch the **tester** agent with the following instructions:\n\n1. Detect project framework using framework-detection skill\n2. Generate coverage:\n   - Foundry: `forge coverage`\n   - Hardhat: `npx hardhat coverage`\n3. Parse coverage results:\n   - Line coverage\n   - Branch coverage\n   - Function coverage\n4. Identify uncovered code sections\n5. Report coverage summary with percentage by contract\n6. Suggest tests for uncovered critical paths\n7. Check if coverage meets goal (>95% line, >90% branch)\n\nReference the framework-detection and testing-patterns skills."
              },
              {
                "name": "/debug",
                "description": "Debug failed transaction or test with trace analysis",
                "path": "tech-stacks/solidity/commands/debug.md",
                "frontmatter": {
                  "description": "Debug failed transaction or test with trace analysis"
                },
                "content": "# Debug Transaction or Test\n\nDebug failed transaction or test with trace analysis.\n\nUse the Task tool to launch the **debugger** agent with the following instructions:\n\n1. Ask user what to debug:\n   - Failing test name\n   - Transaction hash (for on-chain transactions)\n2. Detect framework and run debugging:\n   - Foundry test: `forge test --match-test [name] -vvvv`\n   - Foundry transaction: `cast run [hash] --trace`\n   - Foundry interactive: `forge test --debug [name]`\n   - Hardhat: Run test with console.log output\n3. Analyze traces to identify:\n   - Revert location\n   - Parameter values at revert\n   - State changes before revert\n   - Call stack at failure\n4. Form hypothesis about cause\n5. Report findings with:\n   - Exact failure location (file:line)\n   - Reason for failure\n   - Values that caused failure\n   - Suggested fix\n\nReference the framework-detection skill."
              },
              {
                "name": "/deploy",
                "description": "Deploy contracts to specified network with verification",
                "path": "tech-stacks/solidity/commands/deploy.md",
                "frontmatter": {
                  "description": "Deploy contracts to specified network with verification"
                },
                "content": "IMPORTANT: Immediately use the Task tool with subagent_type=\"sol:deployer\" to delegate ALL work to the deployer agent. Do NOT do any analysis or work in the main context.\n\nUse this exact prompt for the agent:\n\"Execute the contract deployment workflow following these steps:\n\n1. **Ask User for Target Network**\n   - Use AskUserQuestion to ask:\n     - Question: \\\"Which network should I deploy to?\\\"\n     - Header: \\\"Network\\\"\n     - Options:\n       - \\\"Sepolia\\\" - Ethereum testnet\n       - \\\"Mumbai\\\" - Polygon testnet\n       - \\\"Mainnet\\\" - Ethereum mainnet (requires audit)\n     - multiSelect: false\n   - If user selects Other, ask them to specify network name\n\n2. **Verify Pre-Deployment Checklist**\n   - Follow **deployment** skill pre-deployment requirements\n   - Check:\n     - All tests passing (run forge test or npx hardhat test)\n     - Test coverage >95% if possible\n     - Security audit completed (REQUIRED for mainnet, check for audit report)\n     - Constructor parameters prepared and verified\n     - Deployment account funded (check balance)\n     - RPC URL configured in environment\n     - Block explorer API key configured for verification\n   - If mainnet deployment and no audit found, STOP and warn user\n   - Show checklist status to user before proceeding\n\n3. **Detect Framework and Execute Deployment**\n   - Use **framework-detection** skill to identify Foundry/Hardhat/Hybrid\n   - **For Foundry:**\n     ```bash\n     # Deploy to network\n     forge script script/Deploy.s.sol \\\n       --rpc-url $NETWORK_RPC_URL \\\n       --broadcast \\\n       --verify \\\n       --etherscan-api-key $ETHERSCAN_API_KEY\n     ```\n   - **For Hardhat:**\n     ```bash\n     # Deploy to network\n     npx hardhat run scripts/deploy.ts --network NETWORK_NAME\n\n     # Verify separately\n     npx hardhat verify --network NETWORK_NAME DEPLOYED_ADDRESS [constructor args]\n     ```\n   - Capture deployment transaction hash and deployed address\n   - If deployment fails, show error and help user troubleshoot\n\n4. **Verify Contract on Block Explorer**\n   - **For Foundry:** Verification happens automatically with --verify flag\n   - **For Hardhat:** Run separate verification command\n   - Confirm contract is verified by checking block explorer\n   - If verification fails, help user debug (check compiler version, optimization settings, constructor args)\n\n5. **Save Deployment Information**\n   - Create or update deployments/NETWORK_NAME.json with:\n     - Contract address\n     - Implementation address (if upgradeable)\n     - Deployer address\n     - Block number\n     - Transaction hash\n     - Timestamp\n     - Constructor arguments\n     - Verification status\n   - Use Write tool to save deployment info\n\n6. **Run Post-Deployment Validation**\n   - Verify contract code exists:\n     ```bash\n     cast code DEPLOYED_ADDRESS --rpc-url $RPC_URL\n     ```\n   - Test view functions:\n     ```bash\n     cast call DEPLOYED_ADDRESS \\\"owner()(address)\\\" --rpc-url $RPC_URL\n     cast call DEPLOYED_ADDRESS \\\"name()(string)\\\" --rpc-url $RPC_URL\n     ```\n   - Confirm verification on block explorer (visit URL and check)\n   - Run a test transaction if safe to do so\n\n7. **Generate Deployment Report**\n   - Display complete deployment summary:\n     ```\n     Deployment Summary\n     ==================\n     Network: [network name]\n     Contract Address: [address]\n     Transaction Hash: [hash]\n     Block Number: [number]\n     Deployer: [address]\n     Verified: [yes/no]\n\n     Validation Results:\n     - Contract code exists: âœ“\n     - Owner function works: âœ“\n     - Block explorer verification: âœ“\n\n     Deployment info saved to: deployments/[network].json\n\n     Next steps:\n     - Test critical functions\n     - Transfer ownership if needed\n     - Update documentation\n     ```\n\nFollow your agent instructions in agents/deployer.md and reference the deployment and framework-detection skills.\""
              },
              {
                "name": "/fork",
                "description": "Run tests against a forked network",
                "path": "tech-stacks/solidity/commands/fork.md",
                "frontmatter": {
                  "description": "Run tests against a forked network"
                },
                "content": "# Fork Testing\n\nRun tests against a forked network.\n\nUse the Task tool to launch the **tester** agent with the following instructions:\n\n1. Use AskUserQuestion to ask:\n   - Question: \"Which network should I fork for testing?\"\n   - Header: \"Network\"\n   - Options:\n     - \"Ethereum Mainnet\" - Fork Ethereum mainnet\n     - \"Arbitrum One\" - Fork Arbitrum mainnet\n     - \"Polygon\" - Fork Polygon mainnet\n     - \"Optimism\" - Fork Optimism mainnet\n     - \"Base\" - Fork Base mainnet\n   - multiSelect: false\n2. If user needs specific block, use AskUserQuestion to ask:\n   - Question: \"Fork at specific block number? (Leave blank for latest)\"\n   - Header: \"Block\"\n   - Options: [User can type block number in Other field, or leave blank for latest]\n3. Detect framework and run fork tests:\n   - Foundry: `forge test --fork-url $RPC_URL --fork-block-number [block]`\n   - Hardhat: Configure hardhat network fork in config, then run tests\n3. Run tests against forked state\n4. Report test results\n5. Show any integration issues with mainnet state\n6. Report fork block number and network used\n\nReference the framework-detection and testing-patterns skills."
              },
              {
                "name": "/format",
                "description": "Format Solidity code following style standards",
                "path": "tech-stacks/solidity/commands/format.md",
                "frontmatter": {
                  "description": "Format Solidity code following style standards"
                },
                "content": "# Format Code\n\nFormat Solidity code following style standards.\n\nUse the Task tool to launch the **developer** agent with the following instructions:\n\n1. Detect project framework using framework-detection skill\n2. Format Solidity code:\n   - Foundry: `forge fmt`\n   - Hardhat: Use prettier-plugin-solidity if configured\n3. Apply code style standards from code-style skill\n4. Report formatted files count\n5. Show any style violations that couldn't be auto-fixed\n\nReference the framework-detection and code-style skills."
              },
              {
                "name": "/gas-report",
                "description": "Generate gas usage report for contract functions",
                "path": "tech-stacks/solidity/commands/gas-report.md",
                "frontmatter": {
                  "description": "Generate gas usage report for contract functions"
                },
                "content": "# Generate Gas Report\n\nGenerate gas usage report for contract functions.\n\nUse the Task tool to launch the **gas-optimizer** agent with the following instructions:\n\n1. Detect project framework using framework-detection skill\n2. Generate gas report:\n   - Foundry: `forge test --gas-report`\n   - Hardhat: `REPORT_GAS=true npx hardhat test`\n3. Analyze gas usage by function\n4. Identify expensive operations\n5. Compare with previous snapshots if available\n6. Report gas usage summary with cost estimates at current gas prices\n7. Suggest optimization opportunities for high-gas functions\n\nReference the framework-detection and gas-optimization skills."
              },
              {
                "name": "/init",
                "description": "Initialize a new Solidity project with Foundry or Hardhat",
                "path": "tech-stacks/solidity/commands/init.md",
                "frontmatter": {
                  "description": "Initialize a new Solidity project with Foundry or Hardhat"
                },
                "content": "# Initialize Solidity Project\n\nInitialize a new Solidity project with framework auto-detection or user prompt.\n\nUse the Task tool to launch the **developer** agent with the following instructions:\n\n1. Detect if a framework is already present (check for foundry.toml or hardhat.config.js/ts)\n2. If no framework detected, use AskUserQuestion to ask:\n   - Question: \"Which Solidity development framework should I initialize?\"\n   - Header: \"Framework\"\n   - Options:\n     - \"Foundry\" - Fast Solidity testing framework with native Solidity tests\n     - \"Hardhat\" - Flexible Ethereum development environment with TypeScript tests\n     - \"Hybrid\" - Both Foundry and Hardhat for maximum flexibility\n   - multiSelect: false\n3. Initialize the selected framework(s) following the setup-foundry and setup-hardhat skills\n4. Set up project structure with recommended directories\n5. Create initial contract files with templates if requested\n6. Install dependencies\n7. Report completion with next steps\n\nReference the framework-detection and relevant setup skills."
              },
              {
                "name": "/install",
                "description": "Install project dependencies based on the framework",
                "path": "tech-stacks/solidity/commands/install.md",
                "frontmatter": {
                  "description": "Install project dependencies based on the framework"
                },
                "content": "# Install Dependencies\n\nInstall project dependencies based on the framework.\n\nUse the Task tool to launch the **developer** agent with the following instructions:\n\n1. Detect project framework using framework-detection skill\n2. Install dependencies:\n   - Foundry: Install forge-std and any git dependencies listed in foundry.toml\n   - Hardhat: Run `npm install` or `yarn install`\n   - Hybrid: Install for both frameworks\n3. Install commonly used libraries if requested (OpenZeppelin, Solmate, etc.)\n4. Update remappings (Foundry) or imports (Hardhat) as needed\n5. Report installed packages and versions\n\nReference the framework-detection, setup-foundry, and setup-hardhat skills."
              },
              {
                "name": "/lint",
                "description": "Run linting checks on Solidity code",
                "path": "tech-stacks/solidity/commands/lint.md",
                "frontmatter": {
                  "description": "Run linting checks on Solidity code"
                },
                "content": "# Lint Code\n\nRun linting checks on Solidity code.\n\nUse the Task tool to launch the **developer** agent with the following instructions:\n\n1. Detect project framework using framework-detection skill\n2. Run linting:\n   - Foundry: Check code style with `forge fmt --check`\n   - Hardhat: Run solhint if configured\n3. Check for common issues:\n   - Style violations\n   - Unused variables\n   - Deprecated syntax\n   - Missing documentation\n4. Report linting results with file and line references\n5. Suggest fixes for violations\n\nReference the framework-detection and code-style skills."
              },
              {
                "name": "/optimize-gas",
                "description": "Analyze and optimize gas usage in smart contracts",
                "path": "tech-stacks/solidity/commands/optimize-gas.md",
                "frontmatter": {
                  "description": "Analyze and optimize gas usage in smart contracts"
                },
                "content": "# Optimize Gas Usage\n\nAnalyze gas usage and apply optimization techniques to reduce costs.\n\nUse the Task tool to launch the **gas-optimizer** agent with the following instructions:\n\n1. Generate baseline gas report:\n   - Run gas report for current state\n   - Save baseline metrics\n2. Analyze code for optimization opportunities using gas-optimization skill:\n   - Storage variable packing\n   - Cached storage reads\n   - Efficient data types (uint256 vs smaller types)\n   - Loop optimizations\n   - Unnecessary zero initializations\n   - Short-circuit evaluation order\n   - Function visibility optimization\n   - Immutable/constant usage\n3. Prioritize optimizations by impact:\n   - Calculate potential savings for each optimization\n   - Focus on high-frequency functions\n   - Consider deployment vs runtime costs\n4. Apply optimizations:\n   - Make code changes following best practices\n   - Preserve functionality and readability\n   - Maintain security standards\n5. Verify improvements:\n   - Run tests to ensure correctness\n   - Generate new gas report\n   - Compare with baseline\n   - Calculate savings percentage\n6. Generate optimization report:\n   - List all optimizations applied\n   - Show before/after gas costs\n   - Total gas savings\n   - Estimated cost savings at current gas prices\n\nReference the gas-optimization, framework-detection, and code-quality skills."
              },
              {
                "name": "/snapshot",
                "description": "Create or compare gas usage snapshots",
                "path": "tech-stacks/solidity/commands/snapshot.md",
                "frontmatter": {
                  "description": "Create or compare gas usage snapshots"
                },
                "content": "# Create Gas Snapshot\n\nCreate or compare gas usage snapshots.\n\nUse the Task tool to launch the **gas-optimizer** agent with the following instructions:\n\n1. Check if previous snapshot exists\n2. Create new gas snapshot:\n   - Foundry: `forge snapshot`\n   - Saves to `.gas-snapshot` file\n3. If previous snapshot exists:\n   - Compare with previous: `forge snapshot --diff`\n   - Report gas changes (increases/decreases) by function\n   - Flag any significant regressions (>5% increase)\n4. Report snapshot summary:\n   - Total functions tested\n   - Gas changes if comparing\n   - Regressions detected\n   - Improvements detected\n\nReference the framework-detection and gas-optimization skills."
              },
              {
                "name": "/test-fuzz",
                "description": "Run fuzz tests to discover edge cases and vulnerabilities",
                "path": "tech-stacks/solidity/commands/test-fuzz.md",
                "frontmatter": {
                  "description": "Run fuzz tests to discover edge cases and vulnerabilities"
                },
                "content": "# Run Fuzz Tests\n\nExecute fuzz testing to automatically discover edge cases and potential vulnerabilities.\n\nUse the Task tool to launch the **tester** agent with the following instructions:\n\n1. Detect project framework using framework-detection skill\n2. Check for existing fuzz tests:\n   - Foundry: Functions starting with `testFuzz_` in test files\n   - Hardhat: Tests using property-based testing libraries\n3. Run fuzz tests:\n   - Foundry: `forge test --match-test testFuzz`\n   - Configure number of runs if needed (default: 256)\n4. Analyze fuzz test results:\n   - Show discovered edge cases\n   - Report any failures with input values that caused failure\n   - Display coverage of input space\n5. If failures found:\n   - Show exact input values that caused failure\n   - Provide trace of the failing execution\n   - Suggest fixes based on failure pattern\n6. Report summary:\n   - Number of fuzz tests run\n   - Total fuzzing runs executed\n   - Edge cases discovered\n   - Failures found\n\nReference the framework-detection and testing-patterns skills."
              },
              {
                "name": "/test",
                "description": "Execute test suite with framework-appropriate testing language",
                "path": "tech-stacks/solidity/commands/test.md",
                "frontmatter": {
                  "description": "Execute test suite with framework-appropriate testing language"
                },
                "content": "# Run Tests\n\nExecute test suite with framework-appropriate testing language.\n\nUse the Task tool to launch the **tester** agent with the following instructions:\n\n1. Detect project framework using framework-detection skill\n2. Run tests:\n   - Foundry: `forge test` (Solidity tests)\n   - Hardhat: `npx hardhat test` (TypeScript tests)\n3. Show test results with pass/fail counts\n4. Display any failing test details with traces\n5. Report test execution time\n6. Suggest running with increased verbosity if tests fail\n\nReference the framework-detection and testing-patterns skills."
              },
              {
                "name": "/upgrade-check",
                "description": "Validate upgrade safety and storage layout compatibility",
                "path": "tech-stacks/solidity/commands/upgrade-check.md",
                "frontmatter": {
                  "description": "Validate upgrade safety and storage layout compatibility"
                },
                "content": "# Check Upgrade Safety\n\nValidate that a contract upgrade is safe and maintains storage layout compatibility.\n\nUse the Task tool to launch the **upgrader** agent with the following instructions:\n\n1. Verify upgradeable contract setup:\n   - Detect proxy pattern (UUPS, Transparent, Beacon)\n   - Identify current implementation\n   - Locate new implementation contract\n2. Ask user for:\n   - Current implementation contract name/path\n   - New implementation contract name/path\n   - Proxy address (optional, for on-chain validation)\n3. Perform storage layout analysis:\n   - Foundry: Use `forge inspect` to compare storage layouts\n   - Hardhat: Use OpenZeppelin Upgrades plugin validation\n   - Check for storage slot conflicts\n   - Verify no storage variables removed or reordered\n   - Check for type changes in existing variables\n4. Validate upgrade safety rules:\n   - No removed storage variables\n   - No reordered storage variables\n   - No type changes in existing variables\n   - New variables only added at the end\n   - Constructor not used (initializer pattern required)\n   - No selfdestruct or delegatecall issues\n   - Initialize functions properly protected\n5. Check for common upgrade pitfalls:\n   - Function selector collisions\n   - Missing reinitializer version bumps\n   - Uninitialized implementation contracts\n   - Missing gap variables\n6. Generate safety report:\n   - Storage layout comparison (before/after)\n   - List of all checks performed\n   - Any violations or warnings found\n   - Recommendation (SAFE / UNSAFE / WARNINGS)\n   - Specific issues that need fixing\n7. If unsafe, provide remediation steps\n\nReference the upgrade-safety, proxy-patterns, and framework-detection skills."
              },
              {
                "name": "/upgrade",
                "description": "Execute safe contract upgrade for proxy patterns",
                "path": "tech-stacks/solidity/commands/upgrade.md",
                "frontmatter": {
                  "description": "Execute safe contract upgrade for proxy patterns"
                },
                "content": "# Upgrade Contract\n\nExecute safe contract upgrade for proxy patterns.\n\nUse the Task tool to launch the **upgrader** agent with the following instructions:\n\n1. Verify this is an upgradeable contract (detect proxy pattern)\n2. Run pre-upgrade checklist:\n   - Storage layout compatibility check\n   - New implementation tested\n   - Authorization function present\n   - All tests passing\n3. Use AskUserQuestion to ask for proxy address:\n   - Question: \"What is the proxy contract address to upgrade?\"\n   - Header: \"Proxy Address\"\n   - Options: [User must type address in Other field]\n4. Use AskUserQuestion to ask for target network:\n   - Question: \"Which network is the proxy deployed on?\"\n   - Header: \"Network\"\n   - Options:\n     - \"Sepolia\" - Ethereum testnet\n     - \"Mainnet\" - Ethereum mainnet (requires extra caution)\n     - \"Polygon\" - Polygon mainnet\n     - \"Arbitrum\" - Arbitrum One mainnet\n   - multiSelect: false\n5. Use AskUserQuestion to ask about reinitializer:\n   - Question: \"Does the new implementation have a reinitializer function to call after upgrade?\"\n   - Header: \"Reinitializer\"\n   - Options:\n     - \"Yes\" - Call reinitializer function after upgrade\n     - \"No\" - Skip reinitializer (no new state to initialize)\n   - multiSelect: false\n6. Validate upgrade safety:\n   - Foundry: Compare storage layouts with `forge inspect`\n   - Hardhat: Use `upgrades.validateUpgrade()`\n7. Execute upgrade:\n   - Deploy new implementation\n   - Upgrade proxy to new implementation\n   - Call reinitializer if needed\n8. Verify upgrade:\n   - Check implementation address updated\n   - Test functionality\n   - Verify storage preserved\n9. Report upgrade results\n\nReference the framework-detection, proxy-patterns, and upgrade-safety skills."
              },
              {
                "name": "/verify",
                "description": "Verify contract source code on block explorer",
                "path": "tech-stacks/solidity/commands/verify.md",
                "frontmatter": {
                  "description": "Verify contract source code on block explorer"
                },
                "content": "# Verify Contract\n\nVerify contract source code on block explorer.\n\nUse the Task tool to launch the **deployer** agent with the following instructions:\n\n1. Ask user for:\n   - Contract address\n   - Network\n   - Constructor arguments (if any)\n2. Detect framework and verify:\n   - Foundry: `forge verify-contract --verification-method standard-json-input`\n   - Hardhat: `npx hardhat verify`\n3. Handle verification process:\n   - Submit source code using Standard JSON Input format (Foundry)\n   - Wait for verification\n   - Handle any errors (wrong compiler version, constructor args, etc.)\n4. Verify success on block explorer\n5. Report verification status with block explorer link\n\n**Note:** Always use `--verification-method standard-json-input` with Foundry for consistent verification.\n\nReference the framework-detection and deployment skills."
              }
            ],
            "skills": [
              {
                "name": "code-quality",
                "description": "Code quality standards, linting rules, and best practices for clean Solidity code. Use when reviewing code quality or establishing project standards.",
                "path": "tech-stacks/solidity/skills/code-quality/SKILL.md",
                "frontmatter": {
                  "name": "code-quality",
                  "description": "Code quality standards, linting rules, and best practices for clean Solidity code. Use when reviewing code quality or establishing project standards."
                },
                "content": "# Code Quality Skill\n\nThis skill provides code quality standards, linting configurations, and best practices for maintaining high-quality Solidity codebases.\n\n## When to Use\n\nUse this skill when:\n- Setting up new projects\n- Reviewing code quality\n- Establishing coding standards\n- Configuring linters and formatters\n- Conducting code reviews\n\n## Solidity Style Guide\n\nFollow the [Official Solidity Style Guide](https://docs.soliditylang.org/en/latest/style-guide.html)\n\n### Key Conventions\n\n**Contract Layout:**\n```solidity\n// SPDX-License-Identifier: MIT\npragma solidity ^0.8.30;\n\n// Imports\nimport {ERC20} from \"@openzeppelin/contracts/token/ERC20/ERC20.sol\";\n\n/**\n * @title MyContract\n * @notice Brief description\n */\ncontract MyContract is ERC20 {\n    // Type declarations\n    struct User {\n        uint256 balance;\n        bool active;\n    }\n\n    // State variables\n    uint256 public constant MAX_SUPPLY = 1_000_000;\n    uint256 private _value;\n    mapping(address => User) private _users;\n\n    // Events\n    event ValueUpdated(uint256 newValue);\n\n    // Errors\n    error InvalidValue(uint256 value);\n\n    // Modifiers\n    modifier onlyPositive(uint256 value) {\n        if (value == 0) revert InvalidValue(value);\n        _;\n    }\n\n    // Constructor\n    constructor() ERC20(\"MyToken\", \"MTK\") {}\n\n    // External functions\n    function setValue(uint256 newValue) external {}\n\n    // Public functions\n    function getValue() public view returns (uint256) {}\n\n    // Internal functions\n    function _internalFunction() internal {}\n\n    // Private functions\n    function _privateFunction() private {}\n}\n```\n\n### Naming Conventions\n\n```solidity\n// Contracts: PascalCase\ncontract MyContract {}\ninterface IMyInterface {}\nlibrary MyLibrary {}\n\n// Functions: camelCase\nfunction transferTokens() public {}\n\n// Variables: camelCase\nuint256 public tokenBalance;\naddress private ownerAddress;\n\n// Constants: UPPER_CASE\nuint256 public constant MAX_SUPPLY = 1000;\n\n// Private/internal: _prefixed\nuint256 private _privateVar;\nfunction _internalFunc() internal {}\n\n// Events: PascalCase\nevent TokensTransferred(address from, address to);\n\n// Errors: PascalCase\nerror InsufficientBalance();\n\n// Modifiers: camelCase\nmodifier onlyOwner() {}\n```\n\n### Error Naming Philosophy\n\n**Default to simple, idiomatic names** for common validation and state checks. Use descriptive names only when needed for complex business logic.\n\n#### Simple Idiomatic Names (Preferred)\n\nUse terse, community-standard error names that are immediately understood:\n\n```solidity\n// âœ… Simple validation errors (preferred)\nerror ZeroAddress();\nerror Expired();\nerror Unauthorized();\nerror Forbidden();\nerror NotFound();\nerror AlreadyExists();\n\n// âœ… Simple state errors\nerror InvalidState();\nerror AlreadyInitialized();\nerror NotInitialized();\nerror Paused();\nerror NotPaused();\n\n// âœ… Simple value errors\nerror OutOfBounds();\nerror Overflow();\nerror Underflow();\nerror InvalidAmount();\n\n// âœ… Simple timing errors\nerror TooEarly();\nerror TooLate();\nerror DeadlineExpired();\n```\n\n#### When to Use Descriptive Names\n\nUse longer, descriptive error names when:\n1. Complex business logic with multiple conditions\n2. Parameters are needed for debugging/events\n3. Context isn't clear from contract/function name\n\n```solidity\n// âœ… Complex business logic requiring description\nerror InsufficientCollateral(uint256 required, uint256 provided);\nerror InvalidVaultState(VaultState current, VaultState expected);\nerror ExceedsMaxSupply(uint256 requested, uint256 available);\n```\n\n#### Context Reduces Verbosity Needs\n\nThe contract and function name provide context, so error names can be simple:\n\n```solidity\n// âœ… Good: Context makes meaning clear\ncontract Vault {\n    function deposit(address token, uint256 amount) external {\n        if (token == address(0)) revert ZeroAddress();  // Vault.deposit: ZeroAddress - clear it's the token\n        if (amount == 0) revert InvalidAmount();         // Vault.deposit: InvalidAmount - clear it's deposit amount\n        if (block.timestamp > deadline) revert Expired(); // Vault.deposit: Expired - clear the deposit window expired\n    }\n}\n\n// âŒ Avoid: Overly verbose with redundant context\ncontract Vault {\n    function deposit(address token, uint256 amount) external {\n        if (token == address(0)) revert InvalidVaultDepositTokenAddress();  // Redundant: \"Vault\", \"Deposit\" in name\n        if (amount == 0) revert VaultDepositAmountCannotBeZero();           // Unnecessarily long\n        if (block.timestamp > deadline) revert VaultDepositDeadlineHasExpired(); // Too verbose\n    }\n}\n```\n\n#### Error Parameters\n\n**When to include parameters:**\n- For debugging: provide values that caused the error\n- For event logs: enable off-chain monitoring\n- For user feedback: help users understand what went wrong\n\n**When to skip parameters:**\n- Simple validation checks (e.g., zero address, zero amount)\n- State checks (e.g., already initialized, paused)\n- Gas optimization: parameters increase deployment cost\n\n```solidity\n// âœ… Parameters for debugging\nerror InsufficientBalance(uint256 required, uint256 available);\nerror TransferFailed(address from, address to, uint256 amount);\n\n// âœ… No parameters for simple checks\nerror ZeroAddress();        // Don't need to know which address\nerror Paused();            // State is clear from name\nerror Unauthorized();      // Caller check failed\n```\n\n#### Examples from Industry Standards\n\nOpenZeppelin and other leading contracts use simple, idiomatic error names:\n\n```solidity\n// OpenZeppelin style\nerror InvalidSender();\nerror InvalidReceiver();\nerror InsufficientAllowance();\nerror InvalidApprover();\n\n// Uniswap style\nerror Expired();\nerror Forbidden();\nerror InvalidTo();\n\n// AAVE style\nerror ZeroAddress();\nerror InvalidAmount();\nerror Paused();\n```\n\n#### Quick Reference\n\n| Situation | Error Name | Parameters |\n|-----------|------------|------------|\n| Zero address check | `ZeroAddress()` | None |\n| Amount is zero | `InvalidAmount()` | None |\n| Deadline passed | `Expired()` | None |\n| Not authorized | `Unauthorized()` | None |\n| Already initialized | `AlreadyInitialized()` | None |\n| Complex balance check | `InsufficientBalance(uint256 required, uint256 available)` | Required |\n| Complex state change | `InvalidStateTransition(State from, State to)` | Required |\n| Business logic violation | `ExceedsMaxSupply(uint256 requested, uint256 max)` | Recommended |\n\n**Guiding principle:** If OpenZeppelin would use a simple name, you should too. Default to simple, only add complexity when necessary.\n\n### Formatting\n\n**Indentation:** 4 spaces (not tabs)\n\n**Line Length:** Max 120 characters\n\n**Spacing:**\n```solidity\n// âœ… Good spacing\nfunction transfer(address to, uint256 amount) public returns (bool) {\n    require(to != address(0), \"Invalid address\");\n    balances[msg.sender] -= amount;\n    balances[to] += amount;\n    return true;\n}\n\n// âŒ Bad spacing\nfunction transfer(address to,uint256 amount)public returns(bool){\n    require(to!=address(0),\"Invalid address\");\n    balances[msg.sender]-=amount;\n    balances[to]+=amount;\n    return true;\n}\n```\n\n**Braces:**\n```solidity\n// âœ… Good: Opening brace on same line\nif (condition) {\n    doSomething();\n} else {\n    doSomethingElse();\n}\n\n// âŒ Bad: Opening brace on new line\nif (condition)\n{\n    doSomething();\n}\n```\n\n## Linting Configuration\n\n### Solhint (Foundry/Hardhat)\n\n**Install:**\n```bash\nnpm install --save-dev solhint\n```\n\n**.solhint.json:**\n```json\n{\n  \"extends\": \"solhint:recommended\",\n  \"rules\": {\n    \"compiler-version\": [\"error\", \"^0.8.0\"],\n    \"func-visibility\": [\"error\", {\"ignoreConstructors\": true}],\n    \"max-line-length\": [\"error\", 120],\n    \"not-rely-on-time\": \"off\",\n    \"no-empty-blocks\": \"error\",\n    \"no-unused-vars\": \"error\",\n    \"avoid-low-level-calls\": \"warn\",\n    \"avoid-call-value\": \"warn\",\n    \"reason-string\": [\"warn\", {\"maxLength\": 64}]\n  }\n}\n```\n\n**Run:**\n```bash\nnpx solhint 'contracts/**/*.sol'\n```\n\n### Prettier (Formatting)\n\n**Install:**\n```bash\nnpm install --save-dev prettier prettier-plugin-solidity\n```\n\n**.prettierrc:**\n```json\n{\n  \"plugins\": [\"prettier-plugin-solidity\"],\n  \"overrides\": [\n    {\n      \"files\": \"*.sol\",\n      \"options\": {\n        \"printWidth\": 120,\n        \"tabWidth\": 4,\n        \"useTabs\": false,\n        \"singleQuote\": false,\n        \"bracketSpacing\": false,\n        \"explicitTypes\": \"always\"\n      }\n    }\n  ]\n}\n```\n\n**Run:**\n```bash\nnpx prettier --write 'contracts/**/*.sol'\n```\n\n### Slither (Static Analysis)\n\n```bash\n# Install\npip3 install slither-analyzer\n\n# Run\nslither .\n\n# Run specific checks\nslither . --detect reentrancy-eth,unchecked-transfer\n\n# Ignore false positives\nslither . --exclude naming-convention,solc-version\n```\n\n## Code Quality Principles\n\n### 1. KISS (Keep It Simple, Stupid)\n\n```solidity\n// âŒ Overly complex\nfunction calculateFee(uint256 amount, bool isVIP, uint256 tier) public pure returns (uint256) {\n    return isVIP\n        ? (tier == 1 ? amount * 5 / 1000 : tier == 2 ? amount * 3 / 1000 : amount * 1 / 1000)\n        : amount * 10 / 1000;\n}\n\n// âœ… Simple and clear\nfunction calculateFee(uint256 amount, bool isVIP, uint256 tier) public pure returns (uint256) {\n    uint256 feeRate;\n\n    if (isVIP) {\n        if (tier == 1) feeRate = 5;\n        else if (tier == 2) feeRate = 3;\n        else feeRate = 1;\n    } else {\n        feeRate = 10;\n    }\n\n    return (amount * feeRate) / 1000;\n}\n```\n\n### 2. DRY (Don't Repeat Yourself)\n\n```solidity\n// âŒ Repetitive code\nfunction withdrawETH() external {\n    require(msg.sender == owner, \"Not owner\");\n    payable(msg.sender).transfer(address(this).balance);\n}\n\nfunction withdrawTokens(address token) external {\n    require(msg.sender == owner, \"Not owner\");\n    IERC20(token).transfer(msg.sender, IERC20(token).balanceOf(address(this)));\n}\n\n// âœ… DRY with modifier\nmodifier onlyOwner() {\n    require(msg.sender == owner, \"Not owner\");\n    _;\n}\n\nfunction withdrawETH() external onlyOwner {\n    payable(msg.sender).transfer(address(this).balance);\n}\n\nfunction withdrawTokens(address token) external onlyOwner {\n    IERC20(token).transfer(msg.sender, IERC20(token).balanceOf(address(this)));\n}\n```\n\n### 3. Single Responsibility\n\n```solidity\n// âŒ Function does too much\nfunction processUser(address user, uint256 amount) external {\n    require(users[user].active, \"User not active\");\n    require(amount > 0, \"Invalid amount\");\n\n    uint256 fee = calculateFee(amount);\n    uint256 netAmount = amount - fee;\n\n    balances[user] += netAmount;\n    feeCollected += fee;\n    lastUpdate[user] = block.timestamp;\n\n    emit UserProcessed(user, netAmount);\n    emit FeeCollected(fee);\n}\n\n// âœ… Split into focused functions\nfunction deposit(address user, uint256 amount) external {\n    _validateDeposit(user, amount);\n\n    uint256 netAmount = _processDeposit(amount);\n    _updateUserBalance(user, netAmount);\n\n    emit Deposited(user, netAmount);\n}\n\nfunction _validateDeposit(address user, uint256 amount) private view {\n    require(users[user].active, \"User not active\");\n    require(amount > 0, \"Invalid amount\");\n}\n\nfunction _processDeposit(uint256 amount) private returns (uint256) {\n    uint256 fee = _calculateFee(amount);\n    feeCollected += fee;\n    emit FeeCollected(fee);\n    return amount - fee;\n}\n```\n\n### 4. Explicit Over Implicit\n\n```solidity\n// âŒ Implicit types and values\nfunction transfer(address to, uint amount) public {\n    balances[msg.sender] -= amount;\n    balances[to] += amount;\n}\n\n// âœ… Explicit types and checks\nfunction transfer(address to, uint256 amount) public returns (bool) {\n    require(to != address(0), \"Invalid recipient\");\n    require(balances[msg.sender] >= amount, \"Insufficient balance\");\n\n    balances[msg.sender] -= amount;\n    balances[to] += amount;\n\n    emit Transfer(msg.sender, to, amount);\n    return true;\n}\n```\n\n## Best Practices\n\n### Use Latest Stable Solidity Version\n\n```solidity\n// âœ… Latest stable version\npragma solidity ^0.8.30;\n\n// âŒ Old version\npragma solidity ^0.6.0;\n```\n\n### Use Named Imports\n\n```solidity\n// âœ… Named imports\nimport {ERC20} from \"@openzeppelin/contracts/token/ERC20/ERC20.sol\";\nimport {Ownable} from \"@openzeppelin/contracts/access/Ownable.sol\";\n\n// âŒ Wildcard imports\nimport \"@openzeppelin/contracts/token/ERC20/ERC20.sol\";\n```\n\n### Use Custom Errors\n\n```solidity\n// âœ… Custom errors (gas efficient)\nerror InsufficientBalance(uint256 available, uint256 required);\n\nif (balance < amount) {\n    revert InsufficientBalance(balance, amount);\n}\n\n// âŒ String errors (expensive)\nrequire(balance >= amount, \"Insufficient balance\");\n```\n\n### Avoid Magic Numbers\n\n```solidity\n// âŒ Magic numbers\nuint256 fee = amount * 3 / 100;\nuint256 cooldown = block.timestamp + 86400;\n\n// âœ… Named constants\nuint256 constant FEE_PERCENTAGE = 3;\nuint256 constant FEE_DENOMINATOR = 100;\nuint256 constant COOLDOWN_PERIOD = 1 days;\n\nuint256 fee = (amount * FEE_PERCENTAGE) / FEE_DENOMINATOR;\nuint256 cooldown = block.timestamp + COOLDOWN_PERIOD;\n```\n\n### Check Effects Interactions\n\n```solidity\n// âœ… CEI pattern\nfunction withdraw(uint256 amount) external {\n    // CHECKS\n    require(balances[msg.sender] >= amount, \"Insufficient balance\");\n\n    // EFFECTS\n    balances[msg.sender] -= amount;\n\n    // INTERACTIONS\n    (bool success, ) = msg.sender.call{value: amount}(\"\");\n    require(success, \"Transfer failed\");\n}\n```\n\n### Use Natspec Comments\n\n```solidity\n/**\n * @notice Transfers tokens to recipient\n * @param to The recipient address\n * @param amount The amount to transfer\n * @return success True if transfer succeeded\n */\nfunction transfer(address to, uint256 amount) external returns (bool success) {\n    // Implementation\n}\n```\n\n## Code Review Checklist\n\n### General\n- [ ] Code follows Solidity style guide\n- [ ] Functions have clear names\n- [ ] Variables have descriptive names\n- [ ] No magic numbers\n- [ ] Comments explain \"why\" not \"what\"\n- [ ] No commented-out code\n- [ ] No console.log or debug statements\n\n### Security\n- [ ] CEI pattern followed\n- [ ] Access control present\n- [ ] Integer overflow/underflow handled\n- [ ] Reentrancy protection where needed\n- [ ] Input validation present\n- [ ] No unchecked external calls\n\n### Gas Efficiency\n- [ ] Storage access minimized\n- [ ] Variables packed efficiently\n- [ ] Loops bounded\n- [ ] Constants used appropriately\n- [ ] Unnecessary storage avoided\n\n### Documentation\n- [ ] All public functions documented\n- [ ] Complex logic explained\n- [ ] Security assumptions documented\n- [ ] Known issues/limitations noted\n\n## Common Code Smells\n\n### Long Functions\n\n```solidity\n// âŒ Function too long (>50 lines)\nfunction process() external {\n    // 100+ lines of code\n}\n\n// âœ… Split into smaller functions\nfunction process() external {\n    _validate();\n    _calculate();\n    _execute();\n}\n```\n\n### Deep Nesting\n\n```solidity\n// âŒ Too many nested levels\nif (condition1) {\n    if (condition2) {\n        if (condition3) {\n            if (condition4) {\n                // Do something\n            }\n        }\n    }\n}\n\n// âœ… Early returns\nif (!condition1) return;\nif (!condition2) return;\nif (!condition3) return;\nif (!condition4) return;\n// Do something\n```\n\n### God Contracts\n\n```solidity\n// âŒ Contract does everything (1000+ lines)\ncontract Everything {\n    // Token functionality\n    // Staking functionality\n    // Governance functionality\n    // ... everything\n}\n\n// âœ… Separate concerns\ncontract Token is ERC20 {}\ncontract Staking {}\ncontract Governance {}\n```\n\n## Automated Quality Checks\n\n### GitHub Actions\n\n```yaml\nname: Code Quality\n\non: [push, pull_request]\n\njobs:\n  quality:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Install dependencies\n        run: npm install\n\n      - name: Run Solhint\n        run: npx solhint 'contracts/**/*.sol'\n\n      - name: Check formatting\n        run: npx prettier --check 'contracts/**/*.sol'\n\n      - name: Run Slither\n        uses: crytic/slither-action@v0.3.0\n```\n\n## Quick Reference\n\n| Tool | Purpose | Command |\n|------|---------|---------|\n| Solhint | Linting | `npx solhint 'contracts/**/*.sol'` |\n| Prettier | Formatting | `npx prettier --write 'contracts/**/*.sol'` |\n| Slither | Static Analysis | `slither .` |\n| Forge fmt | Formatting (Foundry) | `forge fmt` |\n\n---\n\n**Remember:** Code quality is not just about aestheticsâ€”it's about maintainability, security, and preventing bugs. Establish standards early and enforce them consistently."
              },
              {
                "name": "contract-patterns",
                "description": "Common Solidity design patterns and implementations for secure smart contract development. Use when implementing standard functionality like access control, upgradeability, or token standards.",
                "path": "tech-stacks/solidity/skills/contract-patterns/SKILL.md",
                "frontmatter": {
                  "name": "contract-patterns",
                  "description": "Common Solidity design patterns and implementations for secure smart contract development. Use when implementing standard functionality like access control, upgradeability, or token standards."
                },
                "content": "# Contract Patterns Skill\n\nThis skill provides battle-tested patterns and examples for common smart contract functionality.\n\n## When to Use\n\nUse this skill when:\n- Implementing access control mechanisms\n- Creating upgradeable contracts\n- Building token contracts (ERC20, ERC721, ERC1155)\n- Adding pausability to contracts\n- Protecting against reentrancy attacks\n- Following established security patterns\n\n## Pattern Categories\n\n### 1. Access Control Patterns\n\nSee `./patterns/access-control.md` for detailed documentation.\n\n**Common patterns:**\n- **Ownable** - Single owner with privileged access\n- **AccessControl** - Role-based access control (RBAC)\n- **Multisig** - Multiple signatures required for actions\n- **Timelock** - Delayed execution for critical functions\n\n**When to use:**\n- Ownable: Simple contracts with single admin\n- AccessControl: Complex permissions with multiple roles\n- Multisig: High-value contracts requiring consensus\n- Timelock: Governance and critical upgrades\n\n### 2. Upgradeable Contract Patterns\n\nSee `./patterns/upgradeable-contracts.md` for detailed documentation.\n\n**Common patterns:**\n- **Transparent Proxy** - Separate admin and user logic\n- **UUPS (Universal Upgradeable Proxy Standard)** - Upgrade logic in implementation\n- **Beacon Proxy** - Multiple proxies sharing same implementation\n- **Diamond Pattern (EIP-2535)** - Multi-facet proxy for large contracts\n\n**When to use:**\n- Transparent: When admin and user separation is critical\n- UUPS: Gas-efficient upgrades, upgrade logic in implementation\n- Beacon: Deploying many instances of same logic\n- Diamond: Large contracts exceeding size limits\n\n### 3. Pausable Pattern\n\nSee `./patterns/pausable.md` for detailed documentation.\n\n**Purpose:** Emergency stop mechanism to pause contract functionality\n\n**When to use:**\n- Contracts handling user funds\n- Contracts that may need emergency stops\n- Contracts under active development/monitoring\n\n**Key features:**\n- Pause/unpause functionality\n- Restricted to authorized roles\n- Graceful degradation of functionality\n\n### 4. Reentrancy Guard\n\nSee `./patterns/reentrancy-guard.md` for detailed documentation.\n\n**Purpose:** Prevent reentrancy attacks in functions that make external calls\n\n**When to use:**\n- Functions that transfer ETH\n- Functions that call external contracts\n- Functions that modify state after external calls\n\n**Implementation:**\n- Checks-Effects-Interactions pattern\n- ReentrancyGuard modifier\n- Mutex locks\n\n### 5. Token Standards\n\nSee `./patterns/token-standards.md` for detailed documentation.\n\n**ERC20** - Fungible tokens\n- Standard interface for tokens like USDC, DAI\n- Transfer, approve, transferFrom functionality\n- See `./examples/ERC20-example.sol`\n\n**ERC721** - Non-fungible tokens (NFTs)\n- Unique tokens with individual ownership\n- Metadata support\n- See `./examples/ERC721-example.sol`\n\n**ERC1155** - Multi-token standard\n- Batch operations for fungible and non-fungible tokens\n- Gas-efficient for multiple token types\n- See `./examples/ERC1155-example.sol`\n\n## Integration with Code Principles\n\nThese patterns follow the code-principles from the foundation plugin:\n\n- **DRY**: Inherit from OpenZeppelin contracts instead of reimplementing\n- **SOLID**: Single responsibility for each pattern/module\n- **KISS**: Use simplest pattern that meets requirements\n- **Security First**: Battle-tested implementations over custom code\n\n**Note:** Solidity-specific security concerns take precedence over general software principles.\n\n## OpenZeppelin Contracts\n\nMost patterns are best implemented using OpenZeppelin contracts:\n\n```bash\n# Install OpenZeppelin\nforge install OpenZeppelin/openzeppelin-contracts\n# or\nnpm install @openzeppelin/contracts\n```\n\n**Available contracts:**\n- `@openzeppelin/contracts/access/Ownable.sol`\n- `@openzeppelin/contracts/access/AccessControl.sol`\n- `@openzeppelin/contracts/security/Pausable.sol`\n- `@openzeppelin/contracts/security/ReentrancyGuard.sol`\n- `@openzeppelin/contracts/token/ERC20/ERC20.sol`\n- `@openzeppelin/contracts/token/ERC721/ERC721.sol`\n- `@openzeppelin/contracts/token/ERC1155/ERC1155.sol`\n- `@openzeppelin/contracts/proxy/transparent/TransparentUpgradeableProxy.sol`\n- `@openzeppelin/contracts/proxy/ERC1967/ERC1967Proxy.sol`\n\n## Pattern Selection Guide\n\n| Need | Pattern | Complexity | Gas Cost | Security |\n|------|---------|------------|----------|----------|\n| Single admin | Ownable | Low | Low | Medium |\n| Multiple roles | AccessControl | Medium | Medium | High |\n| Emergency stop | Pausable | Low | Low | High |\n| Prevent reentrancy | ReentrancyGuard | Low | Low | Critical |\n| Fungible tokens | ERC20 | Low | Low | High |\n| NFTs | ERC721 | Medium | Medium | High |\n| Multi-token | ERC1155 | High | Low | High |\n| Simple upgrades | UUPS | Medium | Low | High |\n| Admin separation | Transparent Proxy | Medium | Medium | High |\n| Multiple instances | Beacon Proxy | High | Low | High |\n| Large contracts | Diamond | Very High | Medium | Medium |\n\n## Best Practices\n\n1. **Prefer OpenZeppelin** - Use audited implementations over custom code\n2. **Combine patterns carefully** - Test interactions between patterns\n3. **Follow initialization patterns** - Use proper constructor/initializer for upgradeable contracts\n4. **Test thoroughly** - Each pattern has unique security considerations\n5. **Document deviations** - If customizing standard patterns, document why\n6. **Keep it simple** - Use simplest pattern that meets requirements\n7. **Security over gas optimization** - Prioritize security when patterns conflict\n\n## Common Combinations\n\n### Pausable + AccessControl\n```solidity\ncontract MyContract is Pausable, AccessControl {\n    bytes32 public constant PAUSER_ROLE = keccak256(\"PAUSER_ROLE\");\n\n    function pause() public onlyRole(PAUSER_ROLE) {\n        _pause();\n    }\n\n    function unpause() public onlyRole(PAUSER_ROLE) {\n        _unpause();\n    }\n\n    function criticalFunction() public whenNotPaused {\n        // Function logic\n    }\n}\n```\n\n### ERC20 + Ownable + Pausable\n```solidity\ncontract MyToken is ERC20, Ownable, Pausable {\n    constructor() ERC20(\"MyToken\", \"MTK\") Ownable(msg.sender) {}\n\n    function pause() public onlyOwner {\n        _pause();\n    }\n\n    function _update(address from, address to, uint256 value)\n        internal\n        override\n        whenNotPaused\n    {\n        super._update(from, to, value);\n    }\n}\n```\n\n### UUPS + AccessControl + ReentrancyGuard\n```solidity\ncontract MyUpgradeableContract is\n    UUPSUpgradeable,\n    AccessControlUpgradeable,\n    ReentrancyGuardUpgradeable\n{\n    bytes32 public constant UPGRADER_ROLE = keccak256(\"UPGRADER_ROLE\");\n\n    function _authorizeUpgrade(address newImplementation)\n        internal\n        override\n        onlyRole(UPGRADER_ROLE)\n    {}\n}\n```\n\n## Anti-Patterns to Avoid\n\n1. **Custom access control** - Use OpenZeppelin instead\n2. **Manual reentrancy protection** - Use ReentrancyGuard\n3. **Incorrect upgrade patterns** - Follow OpenZeppelin upgrade guides\n4. **Mixing storage layouts** - Be careful with inheritance order\n5. **Skipping initialization** - Always initialize upgradeable contracts\n6. **Ignoring token standards** - Follow ERC specifications exactly\n\n## Pattern Files\n\nThis skill provides the following pattern documentation:\n- `./patterns/upgradeable-contracts.md` - Proxy patterns\n- `./patterns/access-control.md` - Permission patterns\n- `./patterns/pausable.md` - Emergency stop pattern\n- `./patterns/reentrancy-guard.md` - Reentrancy protection\n- `./patterns/token-standards.md` - ERC20/721/1155 standards\n\n## Example Contracts\n\nThis skill provides the following examples:\n- `./examples/ERC20-example.sol` - Fungible token implementation\n- `./examples/ERC721-example.sol` - NFT implementation\n- `./examples/ERC1155-example.sol` - Multi-token implementation\n- `./examples/upgradeable-example.sol` - UUPS upgradeable contract\n\n## Quick Reference\n\n```solidity\n// Access Control\nimport \"@openzeppelin/contracts/access/Ownable.sol\";\nimport \"@openzeppelin/contracts/access/AccessControl.sol\";\n\n// Security\nimport \"@openzeppelin/contracts/security/Pausable.sol\";\nimport \"@openzeppelin/contracts/security/ReentrancyGuard.sol\";\n\n// Tokens\nimport \"@openzeppelin/contracts/token/ERC20/ERC20.sol\";\nimport \"@openzeppelin/contracts/token/ERC721/ERC721.sol\";\nimport \"@openzeppelin/contracts/token/ERC1155/ERC1155.sol\";\n\n// Upgradeability\nimport \"@openzeppelin/contracts/proxy/utils/UUPSUpgradeable.sol\";\nimport \"@openzeppelin/contracts/proxy/transparent/TransparentUpgradeableProxy.sol\";\n```\n\n---\n\n**Remember:** Always prefer battle-tested OpenZeppelin implementations over custom patterns. Security > Gas optimization > Code elegance."
              },
              {
                "name": "coverage-analysis",
                "description": "Test coverage analysis and improvement strategies for Solidity contracts. Use when analyzing or improving test coverage.",
                "path": "tech-stacks/solidity/skills/coverage-analysis/SKILL.md",
                "frontmatter": {
                  "name": "coverage-analysis",
                  "description": "Test coverage analysis and improvement strategies for Solidity contracts. Use when analyzing or improving test coverage."
                },
                "content": "# Coverage Analysis Skill\n\nThis skill provides strategies for analyzing and improving test coverage in Solidity projects.\n\n## When to Use\n\nUse this skill when:\n- Analyzing test coverage\n- Improving coverage metrics\n- Identifying untested code paths\n- Preparing for audits\n- Establishing coverage requirements\n\n## Coverage Metrics\n\n### Types of Coverage\n\n**Line Coverage:** Percentage of code lines executed\n**Branch Coverage:** Percentage of decision branches taken\n**Function Coverage:** Percentage of functions called\n**Statement Coverage:** Percentage of statements executed\n\n### Coverage Goals\n\n- **Line Coverage:** >95%\n- **Branch Coverage:** >90%\n- **Function Coverage:** 100%\n- **Critical Paths:** 100%\n\n## Measuring Coverage\n\n### Foundry\n\n```bash\n# Generate coverage report\nforge coverage\n\n# Detailed report\nforge coverage --report lcov\ngenhtml lcov.info --output-directory coverage\nopen coverage/index.html\n\n# Debug coverage\nforge coverage --report debug > coverage.txt\n\n# Coverage for specific contracts\nforge coverage --match-contract MyContract\n```\n\n### Hardhat\n\n```bash\n# Install\nnpm install --save-dev solidity-coverage\n\n# Generate report\nnpx hardhat coverage\n\n# Output in coverage/index.html\n```\n\n## Identifying Uncovered Code\n\n### Reading Coverage Reports\n\n**Foundry lcov format:**\n```\nFile                  | % Lines      | % Statements | % Branches   | % Funcs      |\n----------------------|--------------|--------------|--------------|--------------|\nsrc/MyContract.sol    | 95.00% (38/40)| 95.00% (38/40)| 87.50% (7/8) | 100.00% (5/5)|\n```\n\n**Areas to investigate:**\n- Lines with 0 executions\n- Branches not taken (if/else, require, etc.)\n- Functions never called\n- Error paths not triggered\n\n### Common Uncovered Areas\n\n1. **Error Handlers**\n```solidity\n// Often uncovered: revert branches\nfunction transfer(uint256 amount) public {\n    if (balance < amount) {\n        revert InsufficientBalance();  // âš ï¸ Test this path!\n    }\n    // Main path is usually covered\n}\n```\n\n2. **Edge Cases**\n```solidity\n// Test boundary conditions\nfunction withdraw(uint256 amount) public {\n    require(amount > 0);           // âš ï¸ Test with 0\n    require(amount <= balance);     // âš ï¸ Test with max\n    require(amount <= type(uint256).max);  // âš ï¸ Test overflow\n}\n```\n\n3. **Modifiers**\n```solidity\n// Ensure all modifier paths covered\nmodifier onlyOwner() {\n    require(msg.sender == owner);  // âš ï¸ Test unauthorized access\n    _;\n}\n```\n\n4. **Internal/Private Functions**\n```solidity\n// May be uncovered if only called conditionally\nfunction _internalCalc() private returns (uint256) {\n    // âš ï¸ Ensure all code paths call this\n}\n```\n\n## Improving Coverage\n\n### 1. Test All Branches\n\n```solidity\n// Contract function\nfunction withdraw(uint256 amount) public {\n    if (amount > balance) {\n        revert InsufficientBalance();\n    }\n    balance -= amount;\n}\n\n// Tests needed\nfunction test_Withdraw_Success() public {}           // âœ… Success path\nfunction test_RevertWhen_InsufficientBalance() public {} // âœ… Revert path\n```\n\n### 2. Test Edge Cases\n\n```solidity\n// Test suite\nfunction test_Transfer_ZeroAmount() public {}\nfunction test_Transfer_MaxAmount() public {}\nfunction test_Transfer_ToZeroAddress() public {}\nfunction test_Transfer_ToSelf() public {}\nfunction test_Transfer_WithNoBalance() public {}\n```\n\n### 3. Test All Function Combinations\n\n```solidity\n// Contract with state-dependent behavior\ncontract Stateful {\n    enum State { Pending, Active, Closed }\n    State public state;\n\n    function action() public {\n        if (state == State.Pending) { /* ... */ }\n        else if (state == State.Active) { /* ... */ }\n        else { /* ... */ }\n    }\n}\n\n// Test each state\nfunction test_Action_WhenPending() public {}\nfunction test_Action_WhenActive() public {}\nfunction test_Action_WhenClosed() public {}\n```\n\n### 4. Test Access Control Paths\n\n```solidity\n// For each restricted function, test:\nfunction test_Admin_CanPause() public {}           // âœ… Authorized\nfunction test_RevertWhen_NonAdminPauses() public {} // âœ… Unauthorized\n```\n\n## Coverage Gaps Analysis\n\n### Finding Gaps\n\n```bash\n# Foundry: Show uncovered lines\nforge coverage --report debug | grep -A 5 \"0 hits\"\n\n# Hardhat: Open HTML report\nnpx hardhat coverage\n# Check coverage/index.html for red/yellow lines\n```\n\n### Prioritizing Coverage\n\n**High Priority (Must cover):**\n1. Fund transfer functions\n2. Access control checks\n3. State-changing operations\n4. External call handling\n5. Error conditions\n\n**Medium Priority (Should cover):**\n1. View functions with logic\n2. Internal calculations\n3. Event emissions\n4. Modifier logic\n\n**Low Priority (Nice to have):**\n1. Simple getters\n2. Pure utility functions\n3. Unreachable code (if any)\n\n## Coverage Strategies\n\n### Fuzz Testing for Coverage\n\n```solidity\n// Fuzz tests automatically cover many paths\nfunction testFuzz_Transfer(address to, uint256 amount) public {\n    vm.assume(to != address(0));\n    vm.assume(amount <= type(uint128).max);\n\n    // Foundry will test with many random values\n    // Increases branch coverage automatically\n}\n```\n\n### Invariant Testing for Coverage\n\n```solidity\n// Invariant tests exercise many code paths\ncontract InvariantTest is Test {\n    function invariant_SumOfBalancesEqualsTotalSupply() public {\n        // This gets called after random state changes\n        // Increases coverage naturally\n    }\n}\n```\n\n### Integration Tests\n\n```solidity\n// Integration tests cover cross-contract interactions\nfunction test_FullWorkflow() public {\n    token.approve(address(vault), 1000);\n    vault.deposit(1000);\n    vm.warp(block.timestamp + 30 days);\n    vault.withdraw();\n    // Covers multiple contracts and functions\n}\n```\n\n## Excluding Code from Coverage\n\n### Unreachable Code\n\n```solidity\n// solhint-disable-next-line\nfunction unreachableCode() private pure {\n    // Intentionally never called\n    // Could be legacy code or future feature\n}\n```\n\n### Test Harnesses\n\n```solidity\n// test/harness/MyContractHarness.sol\n// Don't count test helpers in coverage\ncontract MyContractHarness is MyContract {\n    function exposed_internalFunction() public {\n        return _internalFunction();\n    }\n}\n```\n\n## CI/CD Coverage Requirements\n\n### GitHub Actions Example\n\n```yaml\nname: Coverage Check\n\non: [push, pull_request]\n\njobs:\n  coverage:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Install Foundry\n        uses: foundry-rs/foundry-toolchain@v1\n\n      - name: Run coverage\n        run: forge coverage --report summary\n\n      - name: Check coverage threshold\n        run: |\n          COVERAGE=$(forge coverage --report summary | grep \"Total\" | awk '{print $4}' | sed 's/%//')\n          if (( $(echo \"$COVERAGE < 95\" | bc -l) )); then\n            echo \"Coverage $COVERAGE% is below threshold of 95%\"\n            exit 1\n          fi\n```\n\n## Coverage Anti-Patterns\n\n### âŒ Testing for Coverage, Not Correctness\n\n```solidity\n// âŒ Bad: Just calling functions for coverage\nfunction test_Transfer() public {\n    token.transfer(user, 100);  // No assertions!\n}\n\n// âœ… Good: Testing actual behavior\nfunction test_Transfer_UpdatesBalances() public {\n    uint256 senderBefore = token.balanceOf(sender);\n    uint256 recipientBefore = token.balanceOf(recipient);\n\n    vm.prank(sender);\n    token.transfer(recipient, 100);\n\n    assertEq(token.balanceOf(sender), senderBefore - 100);\n    assertEq(token.balanceOf(recipient), recipientBefore + 100);\n}\n```\n\n### âŒ 100% Coverage â‰  No Bugs\n\n```solidity\n// Even with 100% coverage, logic bugs can exist\nfunction calculateReward(uint256 stake) public pure returns (uint256) {\n    return stake * 2;  // Should be stake * 110 / 100 (10% reward)\n}\n\n// Test has 100% coverage but doesn't catch the bug\nfunction test_CalculateReward() public {\n    uint256 reward = calculateReward(100);\n    assert(reward > 0);  // Passes but logic is wrong!\n}\n```\n\n## Coverage Best Practices\n\n1. **Aim for high coverage, not 100%** - Some code paths may be intentionally unreachable\n2. **Focus on critical paths first** - Fund transfers, access control, state changes\n3. **Use fuzz and invariant tests** - Automatically increase branch coverage\n4. **Test error conditions** - Reverts and edge cases\n5. **Document excluded code** - Explain why certain code isn't covered\n6. **Review coverage reports regularly** - Make coverage part of code review\n7. **Set minimum thresholds** - Enforce in CI/CD\n\n## Quick Reference\n\n| Framework | Generate Coverage | View Report |\n|-----------|------------------|-------------|\n| Foundry | `forge coverage` | `forge coverage --report debug` |\n| Hardhat | `npx hardhat coverage` | Open `coverage/index.html` |\n\n| Metric | Minimum | Target |\n|--------|---------|--------|\n| Line Coverage | 90% | 95% |\n| Branch Coverage | 85% | 90% |\n| Function Coverage | 95% | 100% |\n\n---\n\n**Remember:** Coverage is a necessary but not sufficient condition for quality. High coverage with poor test quality is worse than lower coverage with rigorous tests. Focus on meaningful test scenarios, not just hitting coverage numbers."
              },
              {
                "name": "deployment",
                "description": "Deployment strategies, scripts, and best practices for Solidity smart contracts. Use when deploying contracts to testnets or mainnet.",
                "path": "tech-stacks/solidity/skills/deployment/SKILL.md",
                "frontmatter": {
                  "name": "deployment",
                  "description": "Deployment strategies, scripts, and best practices for Solidity smart contracts. Use when deploying contracts to testnets or mainnet."
                },
                "content": "# Deployment Skill\n\nThis skill provides deployment strategies, scripts, and best practices for deploying Solidity smart contracts with Foundry and Hardhat.\n\n## When to Use\n\nUse this skill when:\n- Deploying contracts to testnets or mainnet\n- Writing deployment scripts\n- Setting up multi-chain deployments\n- Managing contract upgrades\n- Verifying deployed contracts\n\n## Deployment Checklist\n\n### Pre-Deployment\n\n- [ ] **Code Complete**\n  - All features implemented\n  - Tests passing (>95% coverage)\n  - Security audit completed (for production)\n  - Gas optimization done\n\n- [ ] **Configuration**\n  - Network RPC URLs configured\n  - Deployment account secured (hardware wallet preferred)\n  - Gas price strategy determined\n  - Environment variables set\n\n- [ ] **Documentation**\n  - Deployment plan documented\n  - Constructor parameters documented\n  - Initial configuration values defined\n  - Verification plan ready\n\n- [ ] **Testing**\n  - Deployed and tested on local network\n  - Deployed and tested on testnet\n  - Integration tests passing\n  - Upgrade path tested (if upgradeable)\n\n### During Deployment\n\n- [ ] Deploy to testnet first\n- [ ] Verify deployment address\n- [ ] Initialize contract (if upgradeable)\n- [ ] Configure contract parameters\n- [ ] Transfer ownership/roles if needed\n- [ ] Verify contract on block explorer\n\n### Post-Deployment\n\n- [ ] Verify all functions work correctly\n- [ ] Document deployed addresses\n- [ ] Set up monitoring\n- [ ] Create emergency procedures\n- [ ] Announce deployment\n\n## Foundry Deployment\n\n### Basic Deployment Script\n\n```solidity\n// script/Deploy.s.sol\n// SPDX-License-Identifier: MIT\npragma solidity ^0.8.30;\n\nimport {Script} from \"forge-std/Script.sol\";\nimport {MyContract} from \"../src/MyContract.sol\";\n\ncontract DeployScript is Script {\n    function run() external {\n        // Load deployer private key\n        uint256 deployerPrivateKey = vm.envUint(\"PRIVATE_KEY\");\n\n        // Start broadcasting transactions\n        vm.startBroadcast(deployerPrivateKey);\n\n        // Deploy contract\n        MyContract myContract = new MyContract(\n            vm.envAddress(\"INITIAL_OWNER\")\n        );\n\n        // Log deployment address\n        console.log(\"MyContract deployed to:\", address(myContract));\n\n        // Stop broadcasting\n        vm.stopBroadcast();\n    }\n}\n```\n\n### Secure Deployment (Hardware Wallet)\n\n```solidity\ncontract DeployScript is Script {\n    function run() external {\n        // Use --ledger flag when running script\n        // No private key in environment\n\n        vm.startBroadcast();\n\n        MyContract myContract = new MyContract(msg.sender);\n\n        vm.stopBroadcast();\n    }\n}\n```\n\n**Run with Ledger:**\n```bash\nforge script script/Deploy.s.sol --rpc-url $SEPOLIA_RPC_URL --ledger --broadcast --verify\n```\n\n### Deployment with Constructor Parameters\n\n```solidity\ncontract DeployScript is Script {\n    function run() external returns (MyContract) {\n        vm.startBroadcast();\n\n        // Get parameters from environment or hardcode\n        address owner = vm.envAddress(\"OWNER\");\n        uint256 initialSupply = vm.envUint(\"INITIAL_SUPPLY\");\n        string memory name = vm.envString(\"TOKEN_NAME\");\n\n        MyContract myContract = new MyContract(\n            owner,\n            initialSupply,\n            name\n        );\n\n        vm.stopBroadcast();\n\n        return myContract;\n    }\n}\n```\n\n### Deploy and Verify\n\n```bash\n# Deploy to testnet with verification\nforge script script/Deploy.s.sol \\\n  --rpc-url $SEPOLIA_RPC_URL \\\n  --broadcast \\\n  --verify \\\n  --etherscan-api-key $ETHERSCAN_API_KEY\n\n# Deploy to mainnet\nforge script script/Deploy.s.sol \\\n  --rpc-url $MAINNET_RPC_URL \\\n  --broadcast \\\n  --verify \\\n  --etherscan-api-key $ETHERSCAN_API_KEY \\\n  --slow  # Use for mainnet to avoid nonce issues\n```\n\n### Multi-Contract Deployment\n\n```solidity\ncontract DeployScript is Script {\n    function run() external {\n        vm.startBroadcast();\n\n        // Deploy in order\n        Token token = new Token();\n        console.log(\"Token:\", address(token));\n\n        Oracle oracle = new Oracle();\n        console.log(\"Oracle:\", address(oracle));\n\n        Vault vault = new Vault(address(token), address(oracle));\n        console.log(\"Vault:\", address(vault));\n\n        // Configure relationships\n        token.setVault(address(vault));\n        oracle.addAuthorized(address(vault));\n\n        vm.stopBroadcast();\n    }\n}\n```\n\n### Deployment with CREATE2 (Deterministic Address)\n\n```solidity\ncontract DeployScript is Script {\n    function run() external {\n        vm.startBroadcast();\n\n        bytes32 salt = bytes32(uint256(1));  // Choose salt for deterministic address\n\n        MyContract myContract = new MyContract{salt: salt}();\n\n        console.log(\"Deployed to:\", address(myContract));\n\n        vm.stopBroadcast();\n    }\n}\n```\n\n## Hardhat Deployment\n\n### Basic Deployment Script (TypeScript)\n\n```typescript\n// scripts/deploy.ts\nimport { ethers } from \"hardhat\";\n\nasync function main() {\n  // Get signer\n  const [deployer] = await ethers.getSigners();\n  console.log(\"Deploying with account:\", deployer.address);\n\n  // Check balance\n  const balance = await ethers.provider.getBalance(deployer.address);\n  console.log(\"Account balance:\", ethers.formatEther(balance), \"ETH\");\n\n  // Deploy contract\n  const MyContract = await ethers.getContractFactory(\"MyContract\");\n  const myContract = await MyContract.deploy();\n\n  await myContract.waitForDeployment();\n\n  const address = await myContract.getAddress();\n  console.log(\"MyContract deployed to:\", address);\n\n  // Wait for block confirmations before verification\n  console.log(\"Waiting for block confirmations...\");\n  await myContract.deploymentTransaction()?.wait(5);\n\n  // Verify on Etherscan\n  if (process.env.ETHERSCAN_API_KEY) {\n    console.log(\"Verifying contract...\");\n    await run(\"verify:verify\", {\n      address: address,\n      constructorArguments: [],\n    });\n  }\n}\n\nmain()\n  .then(() => process.exit(0))\n  .catch((error) => {\n    console.error(error);\n    process.exit(1);\n  });\n```\n\n### Deployment with Constructor Parameters\n\n```typescript\nasync function main() {\n  const [deployer] = await ethers.getSigners();\n\n  // Get parameters\n  const initialOwner = process.env.INITIAL_OWNER || deployer.address;\n  const initialSupply = ethers.parseEther(\"1000000\");\n\n  // Deploy\n  const Token = await ethers.getContractFactory(\"Token\");\n  const token = await Token.deploy(initialOwner, initialSupply);\n\n  await token.waitForDeployment();\n\n  const address = await token.getAddress();\n  console.log(\"Token deployed to:\", address);\n\n  // Verify with constructor args\n  await run(\"verify:verify\", {\n    address: address,\n    constructorArguments: [initialOwner, initialSupply],\n  });\n}\n```\n\n### Using Hardhat Ignition (Recommended)\n\n```typescript\n// ignition/modules/MyContract.ts\nimport { buildModule } from \"@nomicfoundation/hardhat-ignition/modules\";\n\nexport default buildModule(\"MyContractModule\", (m) => {\n  const initialOwner = m.getParameter(\"initialOwner\");\n  const initialSupply = m.getParameter(\"initialSupply\", 1000000n);\n\n  const token = m.contract(\"Token\", [initialOwner, initialSupply]);\n\n  return { token };\n});\n```\n\n**Deploy with Ignition:**\n```bash\nnpx hardhat ignition deploy ignition/modules/MyContract.ts --network sepolia\n```\n\n### Multi-Contract Deployment\n\n```typescript\nasync function main() {\n  const [deployer] = await ethers.getSigners();\n\n  // Deploy Token\n  const Token = await ethers.getContractFactory(\"Token\");\n  const token = await Token.deploy();\n  await token.waitForDeployment();\n  console.log(\"Token:\", await token.getAddress());\n\n  // Deploy Oracle\n  const Oracle = await ethers.getContractFactory(\"Oracle\");\n  const oracle = await Oracle.deploy();\n  await oracle.waitForDeployment();\n  console.log(\"Oracle:\", await oracle.getAddress());\n\n  // Deploy Vault with dependencies\n  const Vault = await ethers.getContractFactory(\"Vault\");\n  const vault = await Vault.deploy(\n    await token.getAddress(),\n    await oracle.getAddress()\n  );\n  await vault.waitForDeployment();\n  console.log(\"Vault:\", await vault.getAddress());\n\n  // Configure relationships\n  await token.setVault(await vault.getAddress());\n  await oracle.addAuthorized(await vault.getAddress());\n\n  // Save deployment addresses\n  const fs = require(\"fs\");\n  const deployment = {\n    token: await token.getAddress(),\n    oracle: await oracle.getAddress(),\n    vault: await vault.getAddress(),\n    deployer: deployer.address,\n    network: (await ethers.provider.getNetwork()).name,\n    timestamp: new Date().toISOString(),\n  };\n\n  fs.writeFileSync(\n    \"deployment.json\",\n    JSON.stringify(deployment, null, 2)\n  );\n}\n```\n\n## Upgradeable Contract Deployment\n\n### UUPS Deployment (Foundry)\n\n```solidity\nimport {ERC1967Proxy} from \"@openzeppelin/contracts/proxy/ERC1967/ERC1967Proxy.sol\";\n\ncontract DeployUpgradeable is Script {\n    function run() external {\n        vm.startBroadcast();\n\n        // Deploy implementation\n        MyContract implementation = new MyContract();\n        console.log(\"Implementation:\", address(implementation));\n\n        // Encode initialize call\n        bytes memory initData = abi.encodeWithSelector(\n            MyContract.initialize.selector,\n            msg.sender\n        );\n\n        // Deploy proxy\n        ERC1967Proxy proxy = new ERC1967Proxy(\n            address(implementation),\n            initData\n        );\n        console.log(\"Proxy:\", address(proxy));\n\n        vm.stopBroadcast();\n    }\n}\n```\n\n### UUPS Deployment (Hardhat)\n\n```typescript\nimport { ethers, upgrades } from \"hardhat\";\n\nasync function main() {\n  const MyContract = await ethers.getContractFactory(\"MyContract\");\n\n  // Deploy upgradeable contract\n  const myContract = await upgrades.deployProxy(\n    MyContract,\n    [initialOwner],  // initializer args\n    { initializer: \"initialize\", kind: \"uups\" }\n  );\n\n  await myContract.waitForDeployment();\n\n  console.log(\"Proxy deployed to:\", await myContract.getAddress());\n  console.log(\"Implementation:\", await upgrades.erc1967.getImplementationAddress(\n    await myContract.getAddress()\n  ));\n}\n```\n\n## Multi-Chain Deployment\n\n### Foundry Multi-Chain\n\n```bash\n# Deploy to multiple networks\nnetworks=(\"sepolia\" \"goerli\" \"mumbai\")\n\nfor network in \"${networks[@]}\"; do\n  echo \"Deploying to $network...\"\n  forge script script/Deploy.s.sol \\\n    --rpc-url $(eval echo \\$${network^^}_RPC_URL) \\\n    --broadcast \\\n    --verify\ndone\n```\n\n### Hardhat Multi-Chain\n\n```typescript\n// hardhat.config.ts\nexport default {\n  networks: {\n    sepolia: {\n      url: process.env.SEPOLIA_RPC_URL,\n      accounts: [process.env.PRIVATE_KEY!],\n    },\n    polygon: {\n      url: process.env.POLYGON_RPC_URL,\n      accounts: [process.env.PRIVATE_KEY!],\n    },\n    arbitrum: {\n      url: process.env.ARBITRUM_RPC_URL,\n      accounts: [process.env.PRIVATE_KEY!],\n    },\n  },\n};\n```\n\n**Deploy to each:**\n```bash\nnpx hardhat run scripts/deploy.ts --network sepolia\nnpx hardhat run scripts/deploy.ts --network polygon\nnpx hardhat run scripts/deploy.ts --network arbitrum\n```\n\n## Contract Verification\n\n### Foundry Verification\n\n```bash\n# Verify contract\nforge verify-contract \\\n  --chain-id 11155111 \\\n  --num-of-optimizations 200 \\\n  --watch \\\n  --compiler-version v0.8.30 \\\n  --verification-method standard-json-input \\\n  --etherscan-api-key $ETHERSCAN_API_KEY \\\n  0x1234... \\\n  src/MyContract.sol:MyContract\n\n# Verify with constructor args\nforge verify-contract \\\n  --chain-id 1 \\\n  --constructor-args $(cast abi-encode \"constructor(address,uint256)\" 0x... 1000) \\\n  --verification-method standard-json-input \\\n  0x1234... \\\n  src/MyContract.sol:MyContract\n```\n\n### Hardhat Verification\n\n```bash\n# Verify contract\nnpx hardhat verify --network sepolia 0x1234...\n\n# Verify with constructor args\nnpx hardhat verify --network sepolia 0x1234... \"arg1\" 123\n\n# Verify upgradeable (verify implementation)\nnpx hardhat verify --network sepolia IMPLEMENTATION_ADDRESS\n```\n\n## Gas Price Strategies\n\n### Foundry Gas Options\n\n```bash\n# Set gas price\nforge script Deploy.s.sol --gas-price 50gwei\n\n# Set priority fee\nforge script Deploy.s.sol --priority-gas-price 2gwei\n\n# Legacy gas pricing\nforge script Deploy.s.sol --legacy\n```\n\n### Hardhat Gas Configuration\n\n```typescript\n// hardhat.config.ts\nexport default {\n  networks: {\n    mainnet: {\n      url: process.env.MAINNET_RPC_URL,\n      gasPrice: 50000000000,  // 50 gwei\n    },\n  },\n};\n\n// Or in script\nconst tx = await myContract.deploy({\n  gasPrice: ethers.parseUnits(\"50\", \"gwei\"),\n});\n```\n\n## Deployment Best Practices\n\n1. **Test First**\n   - Deploy to local network\n   - Deploy to testnet\n   - Verify all functionality\n   - Only then deploy to mainnet\n\n2. **Security**\n   - Use hardware wallet for mainnet\n   - Never commit private keys\n   - Use encrypted keystores or env variables\n   - Verify contract addresses\n\n3. **Documentation**\n   - Document deployment addresses\n   - Document configuration parameters\n   - Create deployment guide\n   - Maintain changelog\n\n4. **Verification**\n   - Always verify contracts on block explorer\n   - Verify all related contracts\n   - Check source code matches\n\n5. **Gas Management**\n   - Monitor gas prices\n   - Use appropriate gas limits\n   - Consider gas price oracles\n   - Budget for deployment costs\n\n6. **Multi-Sig for Critical Functions**\n   - Deploy with multi-sig owner\n   - Use timelock for upgrades\n   - Document key management\n\n## Deployment Tracking\n\n### Save Deployment Info\n\n```typescript\n// Save to JSON\nconst deployment = {\n  network: network.name,\n  contractAddress: await contract.getAddress(),\n  deployer: deployer.address,\n  blockNumber: contract.deploymentTransaction()?.blockNumber,\n  transactionHash: contract.deploymentTransaction()?.hash,\n  timestamp: new Date().toISOString(),\n  constructorArgs: [owner, initialSupply],\n};\n\nfs.writeFileSync(\n  `deployments/${network.name}.json`,\n  JSON.stringify(deployment, null, 2)\n);\n```\n\n### Environment-Specific Deployment\n\n```typescript\nconst config = {\n  development: {\n    initialSupply: ethers.parseEther(\"1000000\"),\n    fee: 100,  // 1%\n  },\n  production: {\n    initialSupply: ethers.parseEther(\"100000000\"),\n    fee: 30,   // 0.3%\n  },\n};\n\nconst env = process.env.NODE_ENV || \"development\";\nconst params = config[env];\n```\n\n## Quick Reference\n\n### Foundry Commands\n\n```bash\n# Deploy\nforge script Deploy.s.sol --rpc-url $RPC_URL --broadcast\n\n# Deploy with verification\nforge script Deploy.s.sol --rpc-url $RPC_URL --broadcast --verify\n\n# Deploy with hardware wallet\nforge script Deploy.s.sol --rpc-url $RPC_URL --ledger --broadcast\n\n# Verify existing contract\nforge verify-contract ADDRESS Contract --chain-id 1\n```\n\n### Hardhat Commands\n\n```bash\n# Deploy\nnpx hardhat run scripts/deploy.ts --network sepolia\n\n# Verify\nnpx hardhat verify --network sepolia ADDRESS \"arg1\" 123\n\n# Deploy upgradeable\nnpx hardhat run scripts/deployUpgradeable.ts --network sepolia\n```\n\n---\n\n**Remember:** Always test deployments on testnets first. Use hardware wallets or secure key management for mainnet deployments. Verify all contracts on block explorers."
              },
              {
                "name": "foundry-setup",
                "description": "Templates and automation for initializing and configuring Foundry projects. Use when setting up new Foundry projects or adding Foundry to existing codebases.",
                "path": "tech-stacks/solidity/skills/foundry-setup/SKILL.md",
                "frontmatter": {
                  "name": "foundry-setup",
                  "description": "Templates and automation for initializing and configuring Foundry projects. Use when setting up new Foundry projects or adding Foundry to existing codebases."
                },
                "content": "# Foundry Setup Skill\n\nThis skill provides templates, scripts, and best practices for setting up Foundry-based Solidity projects.\n\n## When to Use\n\nUse this skill when:\n- Initializing a new Foundry project\n- Adding Foundry to an existing Solidity codebase\n- Configuring Foundry settings (optimization, tests, etc.)\n- Setting up Foundry in a hybrid Hardhat/Foundry project\n- Updating Foundry configuration\n\n**Prerequisites:** Foundry must be installed (`foundryup`)\n\n## Integration with Framework Detection\n\nBefore using this skill, reference the `framework-detection` skill to:\n- Check if Foundry is already configured\n- Determine if this is a hybrid setup\n- Avoid overwriting existing configuration\n\n## Quick Setup\n\n### Basic Initialization\n\n```bash\n# Initialize new Foundry project\nforge init my-project\ncd my-project\n\n# Or initialize in existing directory\nforge init --force\n```\n\n### Project Structure\n\nFoundry creates this structure:\n\n```\nproject/\nâ”œâ”€â”€ foundry.toml          # Configuration\nâ”œâ”€â”€ .env.example          # Environment variables template\nâ”œâ”€â”€ lib/                  # Dependencies (git submodules)\nâ”œâ”€â”€ src/                  # Contract source files\nâ”‚   â”œâ”€â”€ interfaces        # Interfaces\nâ”‚   â”‚   â””â”€â”€ICounter       # Example interface\nâ”‚   â””â”€â”€ Counter.sol       # Example contract\nâ”œâ”€â”€ test/                 # Test files\nâ”‚   â””â”€â”€ Counter.t.sol     # Example test\nâ””â”€â”€ script/               # Deployment scripts\n    â””â”€â”€ Counter.s.sol     # Example script\n```\n\n## Configuration Templates\n\n### foundry.toml\n\nSee `./templates/foundry.toml` for the complete configuration template.\n\n**Key Configuration Sections:**\n\n```toml\n[profile.default]\nsrc = \"src\"\nout = \"out\"\nlibs = [\"lib\"]\nsolc_version = \"0.8.30\"\noptimizer = true\noptimizer_runs = 200\nvia_ir = false\n\n# Testing\nverbosity = 2\nfuzz_runs = 256\n\n# Gas reporting\ngas_reports = [\"*\"]\n\n# Formatting\nline_length = 120\ntab_width = 4\nbracket_spacing = false\n```\n\n### Environment Variables\n\nSee `./templates/.env.example` for complete environment variable template.\n\n**Essential Variables:**\n\n```bash\n# RPC URLs\nMAINNET_RPC_URL=\nSEPOLIA_RPC_URL=\nARBITRUM_RPC_URL=\n\n# Private Keys (NEVER commit actual keys)\nPRIVATE_KEY=\n\n# Etherscan API Keys\nETHERSCAN_API_KEY=\nARBISCAN_API_KEY=\n\n# Gas Price Settings\nGAS_PRICE=\n```\n\n## Common Configurations\n\n### 1. High Optimization for Production\n\n```toml\n[profile.production]\noptimizer = true\noptimizer_runs = 10000\nvia_ir = true\n```\n\n### 2. Detailed Testing\n\n```toml\n[profile.test]\nverbosity = 3\nfuzz_runs = 1000\ninvariant_runs = 256\n```\n\n### 3. Gas Optimization Focus\n\n```toml\n[profile.gas-optimized]\noptimizer = true\noptimizer_runs = 1000000\nvia_ir = true\ngas_reports = [\"*\"]\n```\n\n### 4. Mainnet Forking for Tests\n\n```toml\n[profile.default]\nfork_url = \"${MAINNET_RPC_URL}\"\nfork_block_number = 18000000\n```\n\n## Dependencies Management\n\n### Adding Libraries\n\n```bash\n# Add OpenZeppelin contracts\nforge install OpenZeppelin/openzeppelin-contracts\n\n# Add Solmate\nforge install transmissions11/solmate\n\n# Add Forge Standard Library (included by default)\nforge install foundry-rs/forge-std\n```\n\n### Remappings\n\nFoundry auto-generates `remappings.txt`, but you can customize:\n\n```txt\n@openzeppelin/=lib/openzeppelin-contracts/\n@solmate/=lib/solmate/src/\nforge-std/=lib/forge-std/src/\n```\n\nOr configure in `foundry.toml`:\n\n```toml\nremappings = [\n    \"@openzeppelin/=lib/openzeppelin-contracts/\",\n    \"@solmate/=lib/solmate/src/\"\n]\n```\n\n## Initialization Script\n\nSee `./scripts/init-foundry.sh` for automated setup.\n\n**Usage:**\n\n```bash\n# Basic initialization\n./scripts/init-foundry.sh\n\n# With project name\n./scripts/init-foundry.sh my-project\n\n# In existing directory\n./scripts/init-foundry.sh --force\n```\n\n**What the script does:**\n1. Checks if Foundry is installed\n2. Initializes Foundry project\n3. Copies configuration templates\n4. Sets up .gitignore\n5. Installs essential dependencies\n6. Creates initial directory structure\n\n## Hybrid Setup (Foundry + Hardhat)\n\nWhen adding Foundry to an existing Hardhat project:\n\n### 1. Initialize Foundry Without Overwriting\n\n```bash\n# Initialize but don't overwrite existing files\nforge init --no-commit\n```\n\n### 2. Configure Separate Directories\n\n```toml\n# foundry.toml\n[profile.default]\nsrc = \"contracts\"          # Use Hardhat's contracts dir\ntest = \"test/foundry\"      # Separate Foundry tests\nout = \"out\"\nlibs = [\"node_modules\", \"lib\"]  # Include both package managers\n```\n\n### 3. Update .gitignore\n\n```gitignore\n# Foundry\nout/\ncache/\nlib/\n\n# Hardhat\nartifacts/\ncache/\nnode_modules/\n```\n\n### 4. Install Shared Dependencies\n\n```bash\n# Install via Foundry\nforge install OpenZeppelin/openzeppelin-contracts\n\n# Reference in Hardhat\n# Add to hardhat.config.js:\n# paths: { sources: \"./contracts\" }\n```\n\n## Testing Setup\n\n### Basic Test Structure\n\n```solidity\n// SPDX-License-Identifier: MIT\npragma solidity ^0.8.30;\n\nimport \"forge-std/Test.sol\";\nimport \"../src/MyContract.sol\";\n\ncontract MyContractTest is Test {\n    MyContract public myContract;\n\n    function setUp() public {\n        myContract = new MyContract();\n    }\n\n    function testBasic() public {\n        // Test implementation\n    }\n\n    function testFuzz_Amount(uint256 amount) public {\n        // Fuzz test\n    }\n}\n```\n\n### Running Tests\n\n```bash\n# Run all tests\nforge test\n\n# Run specific test\nforge test --match-test testBasic\n\n# Run with verbosity\nforge test -vvvv\n\n# Run with gas reporting\nforge test --gas-report\n\n# Run with coverage\nforge coverage\n```\n\n## Security Best Practices for Private Keys\n\nâš ï¸ **CRITICAL: Never store production private keys in .env files!**\n\n### Recommended Approaches (in order of preference)\n\n#### 1. Hardware Wallets (Most Secure - Production)\n\n```bash\n# Deploy using Ledger\nforge script script/Deploy.s.sol:DeployScript \\\n  --rpc-url $RPC_URL \\\n  --ledger \\\n  --broadcast\n\n# Deploy using Trezor\nforge script script/Deploy.s.sol:DeployScript \\\n  --rpc-url $RPC_URL \\\n  --trezor \\\n  --broadcast\n```\n\n#### 2. Cast Wallet (Recommended - Development & Production)\n\nCreate a named keystore:\n\n```bash\n# Create a new wallet (prompts for password)\ncast wallet new ~/.foundry/keystores/deployer\n\n# Import existing private key into keystore\ncast wallet import deployer --interactive\n```\n\nUse in deployment:\n\n```bash\n# Deploy using named account\nforge script script/Deploy.s.sol:DeployScript \\\n  --rpc-url $RPC_URL \\\n  --account deployer \\\n  --sender 0xYourAddress \\\n  --broadcast\n```\n\nUpdate your script to use the account:\n\n```solidity\ncontract DeployScript is Script {\n    function run() external {\n        // No private key needed - uses --account flag\n        vm.startBroadcast();\n\n        MyContract myContract = new MyContract();\n\n        vm.stopBroadcast();\n\n        console.log(\"MyContract deployed to:\", address(myContract));\n    }\n}\n```\n\n#### 3. Interactive Private Key (Development Only)\n\n```bash\n# Prompts for private key (not stored anywhere)\nforge script script/Deploy.s.sol:DeployScript \\\n  --rpc-url $RPC_URL \\\n  --private-key-interactive \\\n  --broadcast\n```\n\n#### 4. .env Variables (Development/Testing ONLY)\n\nâš ï¸ **Use ONLY for local development or testnet testing with non-production keys!**\n\n```solidity\ncontract DeployScript is Script {\n    function run() external {\n        uint256 deployerPrivateKey = vm.envUint(\"PRIVATE_KEY\");\n\n        vm.startBroadcast(deployerPrivateKey);\n\n        MyContract myContract = new MyContract();\n\n        vm.stopBroadcast();\n\n        console.log(\"MyContract deployed to:\", address(myContract));\n    }\n}\n```\n\n**If using .env:**\n- âœ… Only use accounts created specifically for development/testing\n- âœ… Never reuse production private keys\n- âœ… Keep test funds minimal\n- âœ… Add .env to .gitignore\n- âŒ Never commit .env to version control\n- âŒ Never use for mainnet deployments\n\n## Deployment Setup\n\n### Deploy Commands\n\n```bash\n# Dry run (simulation)\nforge script script/Deploy.s.sol:DeployScript --rpc-url $RPC_URL\n\n# Actual deployment with hardware wallet (RECOMMENDED for production)\nforge script script/Deploy.s.sol:DeployScript \\\n  --rpc-url $RPC_URL \\\n  --ledger \\\n  --broadcast \\\n  --verify\n\n# Actual deployment with cast wallet (RECOMMENDED for all deployments)\nforge script script/Deploy.s.sol:DeployScript \\\n  --rpc-url $RPC_URL \\\n  --account deployer \\\n  --sender 0xYourAddress \\\n  --broadcast \\\n  --verify\n\n# Development only: with .env private key\nforge script script/Deploy.s.sol:DeployScript \\\n  --rpc-url $RPC_URL \\\n  --broadcast \\\n  --verify\n```\n\n## Best Practices\n\n1. **Secure private key management** - Use hardware wallets or `cast wallet` for all deployments; never store production keys in .env\n2. **Use profiles** - Create different profiles for dev, test, production\n3. **High optimizer runs for production** - Use 10,000+ optimizer runs for deployed contracts\n4. **Comprehensive .env.example** - Document all required environment variables (but discourage private keys)\n5. **Git submodules for deps** - Let Foundry manage dependencies via git\n6. **Separate test directories** - Use `test/foundry/` for Foundry tests in hybrid setups\n7. **Enable via-ir for optimization** - Use `via_ir = true` for complex contracts\n8. **Version pin Solidity** - Specify exact `solc_version` in foundry.toml\n\n## Troubleshooting\n\n### Issue: \"forge: command not found\"\n\n```bash\n# Install/update Foundry\ncurl -L https://foundry.paradigm.xyz | bash\nfoundryup\n```\n\n### Issue: Dependency conflicts in hybrid setup\n\n```toml\n# Prioritize Foundry libs over node_modules\nlibs = [\"lib\", \"node_modules\"]\n```\n\n### Issue: Compilation errors with remappings\n\n```bash\n# Regenerate remappings\nforge remappings > remappings.txt\n```\n\n### Issue: Tests not found\n\n```bash\n# Check test file naming (must end in .t.sol)\nmv test/MyTest.sol test/MyTest.t.sol\n```\n\n## Quick Reference\n\n| Task | Command | Notes |\n|------|---------|-------|\n| Init project | `forge init` | Creates new project |\n| Add dependency | `forge install <repo>` | Uses git submodules |\n| Build | `forge build` | Compiles contracts |\n| Test | `forge test` | Runs tests |\n| Coverage | `forge coverage` | Test coverage |\n| Gas report | `forge test --gas-report` | Gas usage |\n| Format | `forge fmt` | Code formatting |\n| Deploy | `forge script` | Run deployment |\n| Verify | `forge verify-contract` | Verify on Etherscan |\n\n## Template Files\n\nThis skill provides the following templates:\n- `./templates/foundry.toml` - Complete Foundry configuration\n- `./templates/.env.example` - Environment variables template\n\n## Scripts\n\nThis skill provides the following scripts:\n- `./scripts/init-foundry.sh` - Automated project initialization\n\n---\n\n**Next Steps After Setup:**\n1. Configure `foundry.toml` for your specific needs\n2. Copy `.env.example` to `.env` and fill in values\n3. Install required dependencies with `forge install`\n4. Write contracts in `src/`\n5. Write tests in `test/`\n6. Run `forge test` to verify setup"
              },
              {
                "name": "framework-detection",
                "description": "Detects Solidity development framework (Foundry, Hardhat, or Hybrid) and adapts workflows accordingly. Use at the start of any Solidity development task to determine which tools and commands to use.",
                "path": "tech-stacks/solidity/skills/framework-detection/SKILL.md",
                "frontmatter": {
                  "name": "framework-detection",
                  "description": "Detects Solidity development framework (Foundry, Hardhat, or Hybrid) and adapts workflows accordingly. Use at the start of any Solidity development task to determine which tools and commands to use."
                },
                "content": "# Framework Detection Skill\n\nThis skill enables automatic detection of the Solidity development framework being used in a project and adapts workflows accordingly.\n\n## When to Use\n\nUse this skill **at the beginning of any Solidity development workflow** to:\n- Detect which framework is configured (Foundry, Hardhat, or Hybrid)\n- Determine which commands to use for compilation, testing, deployment\n- Adapt agent behavior to framework-specific patterns\n- Handle hybrid setups where both frameworks coexist\n\n## Detection Logic\n\n### 1. Foundry Detection\n\nCheck for **foundry.toml** in the project root:\n\n```bash\n# Foundry indicator\nif [ -f \"foundry.toml\" ]; then\n    echo \"Foundry detected\"\nfi\n```\n\n**Foundry-specific files:**\n- `foundry.toml` - Main configuration file\n- `lib/` directory - Dependencies (via git submodules)\n- `test/` directory with `.t.sol` files\n- `script/` directory for deployment scripts\n\n**Commands:**\n- Compile: `forge build`\n- Test: `forge test`\n- Deploy: `forge script`\n- Coverage: `forge coverage`\n\n### 2. Hardhat Detection\n\nCheck for **hardhat.config.js** or **hardhat.config.ts** in the project root:\n\n```bash\n# Hardhat indicator\nif [ -f \"hardhat.config.js\" ] || [ -f \"hardhat.config.ts\" ]; then\n    echo \"Hardhat detected\"\nfi\n```\n\n**Hardhat-specific files:**\n- `hardhat.config.js` or `hardhat.config.ts` - Main configuration\n- `package.json` with hardhat dependencies\n- `node_modules/` directory\n- `test/` directory with `.js` or `.ts` files\n- `scripts/` directory for deployment\n\n**Commands:**\n- Compile: `npx hardhat compile`\n- Test: `npx hardhat test`\n- Deploy: `npx hardhat run scripts/deploy.js`\n- Coverage: `npx hardhat coverage`\n\n### 3. Hybrid Setup Detection\n\nBoth frameworks can coexist in the same project:\n\n```bash\n# Hybrid indicator\nif [ -f \"foundry.toml\" ] && ([ -f \"hardhat.config.js\" ] || [ -f \"hardhat.config.ts\" ]); then\n    echo \"Hybrid setup detected\"\nfi\n```\n\n**Hybrid workflow strategy:**\n- **Primary:** Use Foundry for compilation and testing (faster)\n- **Secondary:** Use Hardhat for deployment and verification (better tooling)\n- **Flexibility:** Allow agents to choose based on task requirements\n\n## Framework-Specific Workflow Adaptation\n\n### Compilation\n\n```bash\n# Foundry\nforge build\n\n# Hardhat\nnpx hardhat compile\n\n# Hybrid (prefer Foundry)\nforge build\n```\n\n### Testing\n\n```bash\n# Foundry\nforge test\nforge test -vvv              # Verbose\nforge test --match-test testName\n\n# Hardhat\nnpx hardhat test\nnpx hardhat test --grep \"pattern\"\n\n# Hybrid\nforge test                    # Fast unit tests\nnpx hardhat test             # Integration tests with JS tooling\n```\n\n### Deployment\n\n```bash\n# Foundry\nforge script script/Deploy.s.sol:DeployScript --rpc-url $RPC_URL --broadcast\n\n# Hardhat\nnpx hardhat run scripts/deploy.js --network mainnet\n\n# Hybrid (prefer Hardhat for deployment)\nnpx hardhat run scripts/deploy.js --network mainnet\n```\n\n### Gas Reporting\n\n```bash\n# Foundry\nforge test --gas-report\n\n# Hardhat\nREPORT_GAS=true npx hardhat test\n\n# Hybrid\nforge test --gas-report      # More detailed\n```\n\n### Coverage\n\n```bash\n# Foundry\nforge coverage\nforge coverage --report lcov\n\n# Hardhat\nnpx hardhat coverage\n\n# Hybrid (prefer Foundry)\nforge coverage --report lcov\n```\n\n## Agent Integration\n\nAll agents should **call this skill first** before executing any framework-specific commands:\n\n```markdown\n**Framework Detection Process:**\n\n1. Check for foundry.toml â†’ Foundry detected\n2. Check for hardhat.config.js/ts â†’ Hardhat detected\n3. Both present â†’ Hybrid detected\n4. Neither present â†’ Prompt user or initialize\n```\n\n### Example Agent Workflow\n\n```markdown\n**Step 1: Detect Framework**\n\nI'll first check which framework is configured in this project.\n\n[Uses Bash tool to check for foundry.toml and hardhat.config.*]\n\n**Framework detected:** Foundry\n\n**Step 2: Adapt Commands**\n\nBased on Foundry detection, I'll use:\n- Compilation: `forge build`\n- Testing: `forge test`\n- Coverage: `forge coverage`\n\n[Proceeds with Foundry-specific workflow...]\n```\n\n## Hybrid Setup Recommendations\n\nWhen both frameworks are detected, follow these guidelines:\n\n### Foundry Strengths\n- **Fast compilation** (Rust-based)\n- **Fast testing** (no JS overhead)\n- **Fuzz testing** (built-in)\n- **Gas optimization** (detailed reports)\n- **Formal verification** (via Forge)\n\n**Use Foundry for:**\n- Unit testing\n- Gas optimization\n- Fuzz testing\n- Development iteration (compile/test cycles)\n\n### Hardhat Strengths\n- **JavaScript ecosystem** integration\n- **Better deployment tooling** (scripts, tasks)\n- **Contract verification** (Etherscan, etc.)\n- **Mature plugin ecosystem**\n- **TypeScript support**\n\n**Use Hardhat for:**\n- Deployment scripts\n- Contract verification\n- Integration with frontend\n- Complex deployment workflows\n- Network forking\n\n## Error Handling\n\n### No Framework Detected\n\nIf neither framework is detected:\n\n```markdown\nâš ï¸ **No Solidity framework detected**\n\nI couldn't find foundry.toml or hardhat.config.js/ts in this project.\n\nWould you like to:\n1. Initialize Foundry (`forge init`)\n2. Initialize Hardhat (`npx hardhat init`)\n3. Skip framework setup (manual configuration)\n```\n\n### Framework Mismatch\n\nIf commands fail due to wrong framework assumptions:\n\n```markdown\nâš ï¸ **Framework mismatch detected**\n\nThe command failed. Let me re-check the framework configuration and adapt.\n\n[Re-runs framework detection]\n\nSwitching to [detected framework] workflow...\n```\n\n## Best Practices\n\n1. **Always detect first** - Never assume framework without checking\n2. **Adapt commands** - Use framework-specific commands based on detection\n3. **Prefer Foundry for speed** - In hybrid setups, use Foundry for dev tasks\n4. **Prefer Hardhat for deployment** - Use Hardhat for production deployment\n5. **Be explicit** - Tell the user which framework is being used\n6. **Handle errors gracefully** - Re-detect if commands fail\n\n## Integration with Other Skills\n\nThis skill is **foundational** and should be referenced by:\n- `foundry-setup` skill\n- `hardhat-setup` skill\n- All development agents (developer, tester, gas-optimizer, etc.)\n- All testing workflows\n- All deployment workflows\n\n## Quick Reference\n\n| Task | Foundry | Hardhat | Hybrid Strategy |\n|------|---------|---------|----------------|\n| Compile | `forge build` | `npx hardhat compile` | Use Foundry |\n| Test | `forge test` | `npx hardhat test` | Use Foundry |\n| Coverage | `forge coverage` | `npx hardhat coverage` | Use Foundry |\n| Deploy | `forge script` | `npx hardhat run` | Use Hardhat |\n| Verify | `forge verify-contract` | `npx hardhat verify` | Use Hardhat |\n| Gas Report | `forge test --gas-report` | `REPORT_GAS=true npx hardhat test` | Use Foundry |\n\n---\n\n**Remember:** Framework detection is the **first step** in any Solidity workflow. Always detect before executing commands."
              },
              {
                "name": "gas-optimization",
                "description": "Gas optimization techniques and patterns for efficient Solidity smart contracts. Use when optimizing contract gas costs or reviewing code for efficiency improvements.",
                "path": "tech-stacks/solidity/skills/gas-optimization/SKILL.md",
                "frontmatter": {
                  "name": "gas-optimization",
                  "description": "Gas optimization techniques and patterns for efficient Solidity smart contracts. Use when optimizing contract gas costs or reviewing code for efficiency improvements."
                },
                "content": "# Gas Optimization Skill\n\nThis skill provides techniques, patterns, and best practices for optimizing gas costs in Solidity smart contracts.\n\n## When to Use\n\nUse this skill when:\n- Optimizing contract gas costs\n- Reviewing code for efficiency improvements\n- Preparing contracts for production deployment\n- Reducing transaction costs for users\n- Optimizing storage usage\n- Improving loop efficiency\n\n**Important:** Always prioritize security over gas optimization. Only optimize after ensuring correctness and security.\n\n## Gas Cost Basics\n\n### Operation Costs (Approximate)\n\n| Operation | Gas Cost |\n|-----------|----------|\n| Addition/Subtraction | 3 |\n| Multiplication/Division | 5 |\n| SLOAD (storage read) | 2,100 |\n| SSTORE (storage write, zero to non-zero) | 20,000 |\n| SSTORE (storage write, non-zero to non-zero) | 5,000 |\n| SSTORE (storage write, non-zero to zero) | 15,000 refund |\n| Memory expansion | Quadratic |\n| LOG0-LOG4 | 375 + 375 * topics |\n| CALL | 100-9,000 |\n| CREATE | 32,000 |\n\n### Key Principles\n\n1. **Storage is expensive** - Minimize SLOAD/SSTORE\n2. **Memory is cheap** - Use for temporary data\n3. **Calldata is cheapest** - Use for read-only function parameters\n4. **Smaller is better** - Pack variables, use smaller types\n5. **Batch operations** - Combine multiple operations\n6. **Avoid redundancy** - Cache values, eliminate duplicate code\n\n## Storage Optimization\n\n### 1. Variable Packing\n\n**Pack variables into 32-byte slots:**\n\n```solidity\n// âŒ Bad: Uses 3 storage slots (96 bytes)\ncontract Inefficient {\n    uint8 a;      // slot 0 (wastes 31 bytes)\n    uint256 b;    // slot 1\n    uint8 c;      // slot 2 (wastes 31 bytes)\n}\n\n// âœ… Good: Uses 2 storage slots (64 bytes)\ncontract Efficient {\n    uint8 a;      // slot 0\n    uint8 c;      // slot 0 (packed)\n    uint256 b;    // slot 1\n}\n\n// âœ… Better: Pack related variables\ncontract BetterPacking {\n    address owner;    // 20 bytes - slot 0\n    uint96 balance;   // 12 bytes - slot 0 (packed, total 32 bytes)\n\n    uint128 value1;   // 16 bytes - slot 1\n    uint128 value2;   // 16 bytes - slot 1 (packed, total 32 bytes)\n}\n```\n\n**Savings:** ~15,000 gas per avoided storage slot\n\n### 2. Use Smaller Types When Possible\n\n```solidity\n// âŒ Unnecessary uint256 for small values\nuint256 public percentage;  // 0-100, wastes space\n\n// âœ… Use appropriate size\nuint8 public percentage;    // 0-255, sufficient for percentages\n\n// Timestamps\nuint32 public timestamp;    // Valid until year 2106\nuint40 public timestamp;    // Valid until year 36812\n\n// Counters\nuint32 public counter;      // Supports 4.29 billion items\n```\n\n**Warning:** Smaller types don't save gas in function parameters or local variables, only in storage!\n\n### 3. Caching Storage Variables\n\n```solidity\n// âŒ Bad: Multiple storage reads (6,300 gas)\nfunction bad() public view returns (uint256) {\n    return storageValue + storageValue + storageValue;\n}\n\n// âœ… Good: Cache in memory (2,103 gas)\nfunction good() public view returns (uint256) {\n    uint256 cached = storageValue;  // 1 SLOAD\n    return cached + cached + cached;\n}\n```\n\n**Pattern: Cache before loops:**\n```solidity\n// âŒ Bad: SLOAD in every iteration\nfunction sumBad() public view returns (uint256) {\n    uint256 sum = 0;\n    for (uint256 i = 0; i < items.length; i++) {\n        sum += multiplier * items[i];  // SLOAD multiplier each time\n    }\n    return sum;\n}\n\n// âœ… Good: Cache outside loop\nfunction sumGood() public view returns (uint256) {\n    uint256 sum = 0;\n    uint256 _multiplier = multiplier;  // Cache once\n    for (uint256 i = 0; i < items.length; i++) {\n        sum += _multiplier * items[i];\n    }\n    return sum;\n}\n```\n\n### 4. Use Constants and Immutables\n\n```solidity\n// âŒ Bad: Storage variable (2,100 gas per read)\nuint256 public maxSupply = 1000000;\n\n// âœ… Good: Constant (no storage, embedded in bytecode)\nuint256 public constant MAX_SUPPLY = 1000000;\n\n// âœ… Good: Immutable (set once in constructor, cheap to read)\naddress public immutable owner;\n\nconstructor() {\n    owner = msg.sender;\n}\n```\n\n**Savings:**\n- `constant`: ~2,100 gas per read vs storage\n- `immutable`: ~2,000 gas per read vs storage\n\n### 5. Short-Circuit Storage Updates\n\n```solidity\n// âŒ Always writes (5,000-20,000 gas)\nfunction setBad(uint256 newValue) public {\n    value = newValue;\n}\n\n// âœ… Only write if changed (saves gas when unchanged)\nfunction setGood(uint256 newValue) public {\n    if (value != newValue) {\n        value = newValue;\n    }\n}\n```\n\n### 6. Delete to Get Refunds\n\n```solidity\n// Clear storage to get refund (15,000 gas)\ndelete balances[user];  // Sets to 0\n\n// Or explicitly\nbalances[user] = 0;\n```\n\n**Note:** Refund is capped at 50% of gas used in transaction\n\n## Function Optimization\n\n### 1. Function Visibility\n\n```solidity\n// âŒ public functions cost more\nfunction getData() public view returns (uint256) {\n    return data;\n}\n\n// âœ… external is cheaper (saves ~200 gas per call)\nfunction getData() external view returns (uint256) {\n    return data;\n}\n```\n\n**Rule:** Use `external` if function is only called externally\n\n### 2. Payable Functions\n\n```solidity\n// âŒ Non-payable has additional checks\nfunction transfer(address to, uint256 amount) public {\n    // Costs extra to check msg.value == 0\n}\n\n// âœ… Payable skips check (saves ~24 gas)\nfunction transfer(address to, uint256 amount) public payable {\n    // Only use if function legitimately accepts ETH\n}\n```\n\n**Warning:** Only use `payable` if function should accept ETH!\n\n### 3. Short-Circuit Conditions\n\n```solidity\n// âœ… Put cheap checks first\nrequire(msg.sender == owner && expensiveCheck(), \"Failed\");\n\n// Expensive check only runs if sender is owner\n```\n\n### 4. Custom Errors\n\n```solidity\n// âŒ String errors are expensive\nrequire(balance >= amount, \"Insufficient balance\");\n\n// âœ… Custom errors save gas (~50 gas)\nerror InsufficientBalance(uint256 balance, uint256 required);\n\nif (balance < amount) {\n    revert InsufficientBalance(balance, amount);\n}\n```\n\n**Savings:** ~50 gas per revert + deployment cost savings\n\n## Loop Optimization\n\n### 1. Cache Array Length\n\n```solidity\n// âŒ Bad: Reads length every iteration\nfor (uint256 i = 0; i < array.length; i++) {\n    // Process\n}\n\n// âœ… Good: Cache length\nuint256 length = array.length;\nfor (uint256 i = 0; i < length; i++) {\n    // Process\n}\n```\n\n**Savings:** ~100 gas per iteration for storage arrays\n\n### 2. Unchecked Increments\n\n```solidity\n// âŒ Checked increment\nfor (uint256 i = 0; i < length; i++) {\n    // Overflow check costs ~30 gas\n}\n\n// âœ… Unchecked increment (safe if bounds known)\nfor (uint256 i = 0; i < length;) {\n    // Process\n\n    unchecked {\n        ++i;  // Saves ~30 gas per iteration\n    }\n}\n```\n\n### 3. ++i vs i++\n\n```solidity\n// âœ… Prefix increment cheaper\nfor (uint256 i = 0; i < length; ++i) {\n    // Saves ~5 gas per iteration\n}\n\n// âŒ Postfix increment more expensive\nfor (uint256 i = 0; i < length; i++) {\n    // Costs extra gas\n}\n```\n\n### 4. Avoid Storage Array Iteration\n\n```solidity\n// âŒ Very expensive: Storage array iteration\nuint256[] public items;\n\nfunction sumBad() public view returns (uint256) {\n    uint256 sum = 0;\n    for (uint256 i = 0; i < items.length; i++) {\n        sum += items[i];  // SLOAD every iteration\n    }\n    return sum;\n}\n\n// âœ… Better: Use mapping with counter\nmapping(uint256 => uint256) public items;\nuint256 public itemCount;\n\n// âœ… Or load to memory first\nfunction sumGood() public view returns (uint256) {\n    uint256[] memory _items = items;  // Load once\n    uint256 sum = 0;\n    for (uint256 i = 0; i < _items.length; i++) {\n        sum += _items[i];  // Memory access\n    }\n    return sum;\n}\n```\n\n## Memory vs Calldata\n\n### 1. Use Calldata for Read-Only Parameters\n\n```solidity\n// âŒ memory copies data (expensive)\nfunction processBad(uint256[] memory data) external {\n    uint256 sum = 0;\n    for (uint256 i = 0; i < data.length; i++) {\n        sum += data[i];\n    }\n}\n\n// âœ… calldata reads directly (cheap)\nfunction processGood(uint256[] calldata data) external {\n    uint256 sum = 0;\n    for (uint256 i = 0; i < data.length; i++) {\n        sum += data[i];\n    }\n}\n```\n\n**Savings:** Significant for large arrays (~50-100 gas per element)\n\n### 2. Return Memory Efficiently\n\n```solidity\n// âŒ Creates unnecessary array\nfunction getBad() public view returns (uint256[] memory) {\n    uint256[] memory result = new uint256[](100);\n    // Fill array\n    return result;\n}\n\n// âœ… Return only needed data\nfunction getGood(uint256 start, uint256 count) public view returns (uint256[] memory) {\n    uint256[] memory result = new uint256[](count);\n    // Fill with requested range\n    return result;\n}\n```\n\n## Data Structure Optimization\n\n### 1. Mappings vs Arrays\n\n```solidity\n// âœ… Mappings: O(1) access, good for sparse data\nmapping(uint256 => User) public users;\n\n// âœ… Arrays: Good for iteration, dense data\nUser[] public userArray;\n```\n\n**Trade-offs:**\n- Mappings: Fast access, can't iterate, can't get length\n- Arrays: Iterable, expensive to grow, costly iteration\n\n### 2. Nested Mappings vs Structs\n\n```solidity\n// âŒ Multiple mappings\nmapping(address => uint256) public balances;\nmapping(address => uint256) public rewards;\nmapping(address => uint256) public stakes;\n\n// âœ… Single mapping with struct\nstruct UserData {\n    uint256 balance;\n    uint256 reward;\n    uint256 stake;\n}\nmapping(address => UserData) public userData;\n\n// Access: userData[user].balance (1 SLOAD for struct pointer)\n```\n\n### 3. Bit Packing for Booleans\n\n```solidity\n// âŒ 8 booleans = 8 storage slots\nbool public flag1;\nbool public flag2;\n// ... 8 total\n\n// âœ… Use single uint256 with bit operations\nuint256 public flags;  // Can store 256 booleans\n\nfunction setFlag(uint256 index, bool value) public {\n    if (value) {\n        flags |= (1 << index);   // Set bit\n    } else {\n        flags &= ~(1 << index);  // Clear bit\n    }\n}\n\nfunction getFlag(uint256 index) public view returns (bool) {\n    return (flags & (1 << index)) != 0;\n}\n```\n\n## Advanced Techniques\n\n### 1. Assembly for Storage Access\n\n```solidity\n// âœ… Assembly can be more efficient for storage\nfunction getValueAsm(uint256 slot) public view returns (uint256 value) {\n    assembly {\n        value := sload(slot)\n    }\n}\n\nfunction setValueAsm(uint256 slot, uint256 value) public {\n    assembly {\n        sstore(slot, value)\n    }\n}\n```\n\n**Warning:** Use assembly cautiously - easy to make mistakes!\n\n### 2. Batch Operations\n\n```solidity\n// âŒ Multiple transactions\nfunction transferMultipleTx(address[] calldata recipients, uint256[] calldata amounts) external {\n    for (uint256 i = 0; i < recipients.length; i++) {\n        transfer(recipients[i], amounts[i]);\n    }\n}\n\n// âœ… Single transaction with batch\nfunction batchTransfer(address[] calldata recipients, uint256[] calldata amounts) external {\n    require(recipients.length == amounts.length, \"Length mismatch\");\n\n    for (uint256 i = 0; i < recipients.length;) {\n        _transfer(msg.sender, recipients[i], amounts[i]);\n\n        unchecked { ++i; }\n    }\n}\n```\n\n### 3. Events vs Storage\n\n```solidity\n// âŒ Store historical data on-chain\nuint256[] public historicalPrices;\n\n// âœ… Emit events instead (much cheaper)\nevent PriceUpdated(uint256 price, uint256 timestamp);\n\nfunction updatePrice(uint256 newPrice) external {\n    currentPrice = newPrice;\n    emit PriceUpdated(newPrice, block.timestamp);\n}\n```\n\n**Savings:** Events are ~1/10 the cost of storage\n\n### 4. Lazy Initialization\n\n```solidity\n// âŒ Initialize all at once\nconstructor() {\n    for (uint256 i = 0; i < 100; i++) {\n        data[i] = initialValue;\n    }\n}\n\n// âœ… Initialize on demand\nmapping(uint256 => uint256) private data;\nbool private initialized;\n\nfunction getData(uint256 index) public returns (uint256) {\n    if (!data[index]) {\n        data[index] = initialValue;\n    }\n    return data[index];\n}\n```\n\n## Compiler Optimization\n\n### 1. Optimizer Settings\n\n**foundry.toml:**\n```toml\n[profile.default]\noptimizer = true\noptimizer_runs = 200  # Balance deployment vs runtime cost\n\n[profile.production]\noptimizer_runs = 10000  # Optimize for runtime (contracts called often)\n\n[profile.deployment]\noptimizer_runs = 1  # Optimize for deployment (one-time contracts)\n```\n\n**hardhat.config.js:**\n```javascript\nmodule.exports = {\n  solidity: {\n    version: \"0.8.30\",\n    settings: {\n      optimizer: {\n        enabled: true,\n        runs: 200\n      },\n      viaIR: true  // Use IR-based compiler (can reduce gas further)\n    }\n  }\n};\n```\n\n### 2. Solidity Version\n\n```solidity\n// âœ… Use latest stable version for best optimizations\npragma solidity ^0.8.30;\n```\n\nNewer versions have better:\n- Optimizer improvements\n- Gas optimizations\n- Built-in overflow checks\n\n## Gas Reporting\n\n### Foundry\n\n```bash\n# Gas report in tests\nforge test --gas-report\n\n# Gas snapshot\nforge snapshot\n\n# Compare snapshots\nforge snapshot --diff\n```\n\n### Hardhat\n\n```javascript\n// hardhat.config.js\nrequire(\"hardhat-gas-reporter\");\n\nmodule.exports = {\n  gasReporter: {\n    enabled: true,\n    currency: \"USD\",\n    coinmarketcap: process.env.CMC_API_KEY\n  }\n};\n```\n\n## Common Anti-Patterns\n\n### âŒ 1. Redundant Checks\n\n```solidity\n// âŒ Redundant: SafeMath when using Solidity 0.8+\nimport \"@openzeppelin/contracts/utils/math/SafeMath.sol\";\nusing SafeMath for uint256;\n\n// âœ… Built-in overflow protection\nuint256 result = a + b;  // Reverts on overflow in 0.8+\n```\n\n### âŒ 2. String Concatenation\n\n```solidity\n// âŒ Very expensive\nstring memory result = string(abi.encodePacked(str1, str2, str3));\n\n// âœ… Avoid strings in contracts when possible\n// Use events or off-chain concatenation\n```\n\n### âŒ 3. Storing Large Data\n\n```solidity\n// âŒ Don't store large data on-chain\nstring[] public descriptions;  // Each string costs thousands of gas\n\n// âœ… Store hash and keep data off-chain\nbytes32[] public descriptionHashes;\n```\n\n### âŒ 4. Unbounded Loops\n\n```solidity\n// âŒ Can hit gas limit\nfunction processAll() public {\n    for (uint256 i = 0; i < users.length; i++) {\n        // Process\n    }\n}\n\n// âœ… Add pagination\nfunction processBatch(uint256 start, uint256 count) public {\n    uint256 end = start + count;\n    if (end > users.length) end = users.length;\n\n    for (uint256 i = start; i < end; i++) {\n        // Process\n    }\n}\n```\n\n## Optimization Checklist\n\n### Storage\n- [ ] Variables packed into 32-byte slots\n- [ ] Used smallest appropriate type for storage variables\n- [ ] Constants used instead of storage where possible\n- [ ] Immutables used for constructor-set values\n- [ ] Cached storage variables accessed multiple times\n- [ ] Unnecessary storage writes removed\n- [ ] Deletions used to get gas refunds\n\n### Functions\n- [ ] External used instead of public where possible\n- [ ] Custom errors instead of string errors\n- [ ] Short-circuit boolean conditions\n- [ ] Payable used where appropriate (only if accepts ETH)\n- [ ] Function visibility optimized\n\n### Loops\n- [ ] Array length cached\n- [ ] Unchecked increment used (where safe)\n- [ ] ++i used instead of i++\n- [ ] Storage access minimized in loops\n- [ ] Unbounded loops avoided\n\n### Memory/Calldata\n- [ ] Calldata used for read-only array parameters\n- [ ] Memory vs storage trade-offs considered\n- [ ] Unnecessary memory allocations removed\n\n### General\n- [ ] Batch operations used where possible\n- [ ] Events used instead of storage for historical data\n- [ ] Compiler optimizer enabled\n- [ ] Latest stable Solidity version used\n- [ ] Gas report reviewed\n\n## Measurement and Benchmarking\n\n### Before Optimization\n\n```bash\n# Baseline gas report\nforge test --gas-report > gas-before.txt\nforge snapshot --snap baseline.snap\n```\n\n### After Optimization\n\n```bash\n# Compare gas usage\nforge test --gas-report > gas-after.txt\nforge snapshot --diff baseline.snap\n```\n\n### Gas Profiling\n\n```bash\n# Detailed gas profiling\nforge test --gas-report -vvv\n```\n\n## Trade-offs\n\n### Code Readability vs Gas\n\n```solidity\n// More readable\nif (condition1 && condition2) {\n    doSomething();\n}\n\n// More gas efficient but less clear\nif (condition1) {\n    if (condition2) {\n        doSomething();\n    }\n}\n```\n\n**Recommendation:** Prioritize readability unless gas savings are significant (>5%)\n\n### Deployment Cost vs Runtime Cost\n\n```solidity\n// Cheaper deployment, expensive runtime\n// Fewer optimizer runs (1-200)\n\n// Expensive deployment, cheap runtime\n// More optimizer runs (1000-10000)\n```\n\n**Recommendation:** Optimize for runtime if contract will be used frequently\n\n## Quick Reference\n\n| Technique | Savings | Risk | Effort |\n|-----------|---------|------|--------|\n| Variable packing | High | Low | Low |\n| Cache storage reads | High | Low | Low |\n| Use constants | High | None | Low |\n| External over public | Low | None | Low |\n| Custom errors | Medium | None | Low |\n| Unchecked increments | Low | Medium | Low |\n| ++i over i++ | Low | None | Low |\n| Calldata over memory | Medium | None | Low |\n| Batch operations | High | Low | Medium |\n| Assembly | High | High | High |\n\n---\n\n**Remember:** Security and correctness come first. Only optimize after ensuring your code is secure and functions correctly. Profile before optimizing to identify the most impactful changes."
              },
              {
                "name": "hardhat-setup",
                "description": "Templates and automation for initializing and configuring Hardhat projects. Use when setting up new Hardhat projects or adding Hardhat to existing codebases.",
                "path": "tech-stacks/solidity/skills/hardhat-setup/SKILL.md",
                "frontmatter": {
                  "name": "hardhat-setup",
                  "description": "Templates and automation for initializing and configuring Hardhat projects. Use when setting up new Hardhat projects or adding Hardhat to existing codebases."
                },
                "content": "# Hardhat Setup Skill\n\nThis skill provides templates, scripts, and best practices for setting up Hardhat-based Solidity projects.\n\n## When to Use\n\nUse this skill when:\n- Initializing a new Hardhat project\n- Adding Hardhat to an existing Solidity codebase\n- Configuring Hardhat settings (networks, plugins, etc.)\n- Setting up Hardhat in a hybrid Foundry/Hardhat project\n- Updating Hardhat configuration\n\n**Prerequisites:** Node.js and npm/yarn/pnpm must be installed\n\n## Integration with Framework Detection\n\nBefore using this skill, reference the `framework-detection` skill to:\n- Check if Hardhat is already configured\n- Determine if this is a hybrid setup\n- Avoid overwriting existing configuration\n\n## Quick Setup\n\n### Basic Initialization\n\n```bash\n# Initialize new Hardhat project\nnpm init -y\nnpm install --save-dev hardhat\nnpx hardhat init\n\n# Or with yarn\nyarn init -y\nyarn add --dev hardhat\nnpx hardhat init\n```\n\n### Project Structure\n\nHardhat creates this structure:\n\n```\nproject/\nâ”œâ”€â”€ hardhat.config.js     # Configuration\nâ”œâ”€â”€ .env                  # Environment variables\nâ”œâ”€â”€ package.json          # Dependencies\nâ”œâ”€â”€ contracts/            # Contract source files\nâ”‚   â””â”€â”€ Lock.sol          # Example contract\nâ”œâ”€â”€ test/                 # Test files\nâ”‚   â””â”€â”€ Lock.js           # Example test\nâ”œâ”€â”€ scripts/              # Deployment scripts\nâ”‚   â””â”€â”€ deploy.js         # Example script\nâ””â”€â”€ ignition/             # Hardhat Ignition (deployment modules)\n```\n\n## Configuration Templates\n\n### hardhat.config.js\n\nSee `./templates/hardhat.config.js` for JavaScript configuration template.\n\n**Key Configuration Sections:**\n\n```javascript\nrequire(\"@nomicfoundation/hardhat-toolbox\");\nrequire(\"dotenv\").config();\n\nmodule.exports = {\n  solidity: {\n    version: \"0.8.30\",\n    settings: {\n      optimizer: {\n        enabled: true,\n        runs: 200\n      }\n    }\n  },\n  networks: {\n    hardhat: {},\n    sepolia: {\n      url: process.env.SEPOLIA_RPC_URL || \"\",\n      accounts: process.env.PRIVATE_KEY ? [process.env.PRIVATE_KEY] : []\n    }\n  },\n  etherscan: {\n    apiKey: process.env.ETHERSCAN_API_KEY\n  }\n};\n```\n\n### hardhat.config.ts\n\nSee `./templates/hardhat.config.ts` for TypeScript configuration template.\n\n**TypeScript Configuration:**\n\n```typescript\nimport { HardhatUserConfig } from \"hardhat/config\";\nimport \"@nomicfoundation/hardhat-toolbox\";\nimport \"dotenv/config\";\n\nconst config: HardhatUserConfig = {\n  solidity: \"0.8.30\",\n  networks: {\n    sepolia: {\n      url: process.env.SEPOLIA_RPC_URL || \"\",\n      accounts: process.env.PRIVATE_KEY ? [process.env.PRIVATE_KEY] : []\n    }\n  }\n};\n\nexport default config;\n```\n\n### Environment Variables\n\nSee `./templates/.env.example` for complete environment variable template.\n\n**Essential Variables:**\n\n```bash\n# RPC URLs\nMAINNET_RPC_URL=\nSEPOLIA_RPC_URL=\n\n# Private Keys (NEVER commit actual keys)\nPRIVATE_KEY=\n\n# Etherscan API Keys\nETHERSCAN_API_KEY=\n\n# Gas Settings\nGAS_PRICE=\n```\n\n## Essential Plugins\n\n### Hardhat Toolbox (Recommended)\n\nIncludes all essential plugins:\n\n```bash\nnpm install --save-dev @nomicfoundation/hardhat-toolbox\n```\n\n**Includes:**\n- `@nomicfoundation/hardhat-ethers` - Ethers.js integration\n- `@nomicfoundation/hardhat-chai-matchers` - Chai matchers for testing\n- `@nomicfoundation/hardhat-verify` - Contract verification\n- `hardhat-gas-reporter` - Gas usage reporting\n- `solidity-coverage` - Code coverage\n- `@typechain/hardhat` - TypeScript types for contracts\n\n### Individual Plugins\n\n```bash\n# Contract verification\nnpm install --save-dev @nomicfoundation/hardhat-verify\n\n# Gas reporting\nnpm install --save-dev hardhat-gas-reporter\n\n# Code coverage\nnpm install --save-dev solidity-coverage\n\n# OpenZeppelin Upgrades\nnpm install --save-dev @openzeppelin/hardhat-upgrades\n```\n\n## Common Configurations\n\n### 1. Multiple Networks\n\n```javascript\nnetworks: {\n  mainnet: {\n    url: process.env.MAINNET_RPC_URL,\n    accounts: [process.env.PRIVATE_KEY],\n    chainId: 1\n  },\n  sepolia: {\n    url: process.env.SEPOLIA_RPC_URL,\n    accounts: [process.env.PRIVATE_KEY],\n    chainId: 11155111\n  },\n  arbitrum: {\n    url: process.env.ARBITRUM_RPC_URL,\n    accounts: [process.env.PRIVATE_KEY],\n    chainId: 42161\n  }\n}\n```\n\n### 2. High Optimization for Production\n\n```javascript\nsolidity: {\n  version: \"0.8.30\",\n  settings: {\n    optimizer: {\n      enabled: true,\n      runs: 10000\n    },\n    viaIR: true\n  }\n}\n```\n\n### 3. Multiple Solidity Versions\n\n```javascript\nsolidity: {\n  compilers: [\n    {\n      version: \"0.8.30\",\n      settings: {\n        optimizer: { enabled: true, runs: 200 }\n      }\n    },\n    {\n      version: \"0.8.20\",\n      settings: {\n        optimizer: { enabled: true, runs: 200 }\n      }\n    }\n  ]\n}\n```\n\n### 4. Gas Reporter Configuration\n\n```javascript\ngasReporter: {\n  enabled: process.env.REPORT_GAS === \"true\",\n  currency: \"USD\",\n  coinmarketcap: process.env.COINMARKETCAP_API_KEY,\n  outputFile: \"gas-report.txt\",\n  noColors: true\n}\n```\n\n## Dependencies Management\n\n### Installing OpenZeppelin\n\n```bash\n# OpenZeppelin Contracts\nnpm install @openzeppelin/contracts\n\n# OpenZeppelin Upgrades Plugin\nnpm install --save-dev @openzeppelin/hardhat-upgrades\n```\n\n### Installing Common Libraries\n\n```bash\n# Ethers.js (usually included with hardhat-toolbox)\nnpm install ethers\n\n# Chai for testing\nnpm install --save-dev chai\n\n# Dotenv for environment variables\nnpm install --save-dev dotenv\n```\n\n## Initialization Script\n\nSee `./scripts/init-hardhat.sh` for automated setup.\n\n**Usage:**\n\n```bash\n# Basic initialization\n./scripts/init-hardhat.sh\n\n# With project name\n./scripts/init-hardhat.sh my-project\n\n# With TypeScript\n./scripts/init-hardhat.sh my-project --typescript\n```\n\n**What the script does:**\n1. Checks if Node.js is installed\n2. Initializes npm/yarn project\n3. Installs Hardhat and essential plugins\n4. Creates configuration files\n5. Sets up .gitignore\n6. Installs OpenZeppelin contracts\n7. Creates example contract and test\n\n## Hybrid Setup (Hardhat + Foundry)\n\nWhen adding Hardhat to an existing Foundry project:\n\n### 1. Initialize Hardhat Without Overwriting\n\n```bash\n# Initialize npm project\nnpm init -y\n\n# Install Hardhat\nnpm install --save-dev hardhat\nnpx hardhat init  # Choose \"Create an empty hardhat.config.js\"\n```\n\n### 2. Configure Shared Directories\n\n```javascript\n// hardhat.config.js\nmodule.exports = {\n  paths: {\n    sources: \"./src\",      // Use Foundry's src dir\n    tests: \"./test\",       // Shared test dir\n    cache: \"./cache_hardhat\",  // Separate cache\n    artifacts: \"./artifacts\"\n  },\n  solidity: \"0.8.30\"\n};\n```\n\n### 3. Update .gitignore\n\n```gitignore\n# Hardhat\nartifacts/\ncache/\ncache_hardhat/\nnode_modules/\ncoverage/\ncoverage.json\ntypechain-types/\n\n# Foundry\nout/\nlib/\n\n# Environment\n.env\n.env.local\n```\n\n### 4. Shared Dependencies\n\n```bash\n# Install OpenZeppelin via npm (for Hardhat)\nnpm install @openzeppelin/contracts\n\n# Foundry can reference node_modules\n# Add to foundry.toml:\n# libs = [\"node_modules\", \"lib\"]\n```\n\n## Testing Setup\n\n### Basic Test Structure (JavaScript)\n\n```javascript\nconst { expect } = require(\"chai\");\nconst { ethers } = require(\"hardhat\");\n\ndescribe(\"MyContract\", function () {\n  let myContract;\n  let owner;\n\n  beforeEach(async function () {\n    [owner] = await ethers.getSigners();\n    const MyContract = await ethers.getContractFactory(\"MyContract\");\n    myContract = await MyContract.deploy();\n  });\n\n  it(\"Should work correctly\", async function () {\n    // Test implementation\n    expect(await myContract.someFunction()).to.equal(expectedValue);\n  });\n});\n```\n\n### Basic Test Structure (TypeScript)\n\n```typescript\nimport { expect } from \"chai\";\nimport { ethers } from \"hardhat\";\nimport { MyContract } from \"../typechain-types\";\n\ndescribe(\"MyContract\", function () {\n  let myContract: MyContract;\n\n  beforeEach(async function () {\n    const MyContract = await ethers.getContractFactory(\"MyContract\");\n    myContract = await MyContract.deploy();\n  });\n\n  it(\"Should work correctly\", async function () {\n    expect(await myContract.someFunction()).to.equal(expectedValue);\n  });\n});\n```\n\n### Running Tests\n\n```bash\n# Run all tests\nnpx hardhat test\n\n# Run specific test\nnpx hardhat test test/MyContract.test.js\n\n# With gas reporting\nREPORT_GAS=true npx hardhat test\n\n# With coverage\nnpx hardhat coverage\n```\n\n## Security Best Practices for Private Keys\n\nâš ï¸ **CRITICAL: Never store production private keys in .env files!**\n\n### Recommended Approaches (in order of preference)\n\n#### 1. Hardware Wallets (Most Secure - Production)\n\nInstall the Ledger plugin:\n\n```bash\nnpm install --save-dev @nomicfoundation/hardhat-ledger\n```\n\nConfigure in `hardhat.config.js`:\n\n```javascript\nrequire(\"@nomicfoundation/hardhat-ledger\");\n\nmodule.exports = {\n  networks: {\n    mainnet: {\n      url: process.env.MAINNET_RPC_URL,\n      ledgerAccounts: [\n        \"0xYourLedgerAddress\"\n      ]\n    }\n  }\n};\n```\n\nDeploy with Ledger:\n\n```bash\nnpx hardhat run scripts/deploy.js --network mainnet\n```\n\n#### 2. Hardhat Configuration Variables (Recommended - Built-in)\n\nHardhat 2.x+ includes built-in support for secure configuration variables:\n\n```bash\n# Set a configuration variable (prompts for value, stores encrypted)\nnpx hardhat vars set PRIVATE_KEY\n\n# List all configuration variables\nnpx hardhat vars list\n\n# Delete a variable\nnpx hardhat vars delete PRIVATE_KEY\n```\n\nUse in `hardhat.config.js`:\n\n```javascript\nconst { vars } = require(\"hardhat/config\");\n\nmodule.exports = {\n  networks: {\n    sepolia: {\n      url: vars.get(\"SEPOLIA_RPC_URL\"),\n      accounts: [vars.get(\"PRIVATE_KEY\")]\n    }\n  }\n};\n```\n\nThis stores encrypted values in your home directory and prompts for decryption when needed.\n\n#### 3. hardhat-keystore Plugin (Encrypted Keystore)\n\nSimilar to Foundry's `cast wallet`, provides encrypted keystore management:\n\n```bash\nnpm install --save-dev hardhat-keystore\n```\n\nConfigure in `hardhat.config.js`:\n\n```javascript\nrequire(\"hardhat-keystore\");\n\nmodule.exports = {\n  networks: {\n    sepolia: {\n      url: process.env.SEPOLIA_RPC_URL,\n      accounts: {\n        mnemonic: keystore.getMnemonic(),\n        // or\n        privateKey: keystore.getPrivateKey(\"deployer\")\n      }\n    }\n  }\n};\n```\n\n#### 4. hardhat-secure-accounts Plugin (Third-Party Alternative)\n\n```bash\nnpm install --save-dev hardhat-secure-accounts\n```\n\nCreates encrypted keystore files:\n\n```bash\n# Create new encrypted account\nnpx hardhat accounts:create\n\n# Import existing private key\nnpx hardhat accounts:import --name deployer\n```\n\nUse in scripts:\n\n```javascript\nconst { getSecureAccount } = require(\"hardhat-secure-accounts\");\n\nasync function main() {\n  const signer = await getSecureAccount(\"deployer\");\n  // Use signer for deployment\n}\n```\n\n#### 5. Interactive Environment Variable (Development Only)\n\nPrompt for private key at runtime (doesn't store on disk):\n\n```javascript\nconst readline = require(\"readline\");\n\nasync function getPrivateKey() {\n  const rl = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout\n  });\n\n  return new Promise((resolve) => {\n    rl.question(\"Enter private key: \", (answer) => {\n      rl.close();\n      resolve(answer);\n    });\n  });\n}\n\nasync function main() {\n  const privateKey = await getPrivateKey();\n  const wallet = new ethers.Wallet(privateKey, ethers.provider);\n  // Use wallet for deployment\n}\n```\n\n#### 6. .env Variables (Development/Testing ONLY)\n\nâš ï¸ **Use ONLY for local development or testnet testing with non-production keys!**\n\n```javascript\nrequire(\"dotenv\").config();\n\nmodule.exports = {\n  networks: {\n    sepolia: {\n      url: process.env.SEPOLIA_RPC_URL,\n      accounts: process.env.PRIVATE_KEY ? [process.env.PRIVATE_KEY] : []\n    }\n  }\n};\n```\n\n**If using .env:**\n- âœ… Only use accounts created specifically for development/testing\n- âœ… Never reuse production private keys\n- âœ… Keep test funds minimal\n- âœ… Add .env to .gitignore\n- âŒ Never commit .env to version control\n- âŒ Never use for mainnet deployments\n\n## Deployment Setup\n\n### Basic Deployment Script\n\n```javascript\n// scripts/deploy.js\nconst hre = require(\"hardhat\");\n\nasync function main() {\n  const MyContract = await hre.ethers.getContractFactory(\"MyContract\");\n  const myContract = await MyContract.deploy();\n  await myContract.waitForDeployment();\n\n  console.log(\"MyContract deployed to:\", await myContract.getAddress());\n}\n\nmain()\n  .then(() => process.exit(0))\n  .catch((error) => {\n    console.error(error);\n    process.exit(1);\n  });\n```\n\n### Deploy Commands\n\n```bash\n# Deploy to local network\nnpx hardhat run scripts/deploy.js\n\n# Deploy to Sepolia with hardware wallet (RECOMMENDED for production)\nnpx hardhat run scripts/deploy.js --network sepolia\n# (Ledger will prompt for approval)\n\n# Deploy to Sepolia with Hardhat vars (RECOMMENDED for all deployments)\n# First time: npx hardhat vars set PRIVATE_KEY\nnpx hardhat run scripts/deploy.js --network sepolia\n\n# Development only: with .env private key\nnpx hardhat run scripts/deploy.js --network sepolia\n\n# Verify contract\nnpx hardhat verify --network sepolia DEPLOYED_CONTRACT_ADDRESS\n```\n\n## Best Practices\n\n1. **Secure private key management** - Use hardware wallets or Hardhat Configuration Variables for all deployments; never store production keys in .env\n2. **Use hardhat-toolbox** - Includes all essential plugins\n3. **TypeScript for large projects** - Better type safety and IDE support\n4. **Comprehensive .env.example** - Document all required environment variables (but discourage private keys)\n5. **Separate networks** - Configure all networks you'll deploy to\n6. **Gas reporting** - Enable gas reports for optimization\n7. **Code coverage** - Run coverage regularly\n8. **Contract verification** - Always verify deployed contracts\n9. **Version lock dependencies** - Use exact versions in package.json\n\n## Troubleshooting\n\n### Issue: \"hardhat: command not found\"\n\n```bash\n# Use npx\nnpx hardhat compile\n\n# Or install globally (not recommended)\nnpm install -g hardhat\n```\n\n### Issue: Module not found errors\n\n```bash\n# Clear cache and reinstall\nrm -rf node_modules package-lock.json\nnpm install\n```\n\n### Issue: Compilation errors with OpenZeppelin\n\n```bash\n# Ensure correct import paths\nimport \"@openzeppelin/contracts/token/ERC20/ERC20.sol\";\n```\n\n### Issue: Network connection errors\n\n```bash\n# Check RPC URL in .env\n# Test with curl\ncurl -X POST -H \"Content-Type: application/json\" \\\n  --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_blockNumber\",\"params\":[],\"id\":1}' \\\n  $SEPOLIA_RPC_URL\n```\n\n## Quick Reference\n\n| Task | Command | Notes |\n|------|---------|-------|\n| Init project | `npx hardhat init` | Creates new project |\n| Add dependency | `npm install <package>` | Uses npm |\n| Compile | `npx hardhat compile` | Compiles contracts |\n| Test | `npx hardhat test` | Runs tests |\n| Coverage | `npx hardhat coverage` | Test coverage |\n| Gas report | `REPORT_GAS=true npx hardhat test` | Gas usage |\n| Deploy | `npx hardhat run scripts/deploy.js` | Run deployment |\n| Verify | `npx hardhat verify` | Verify on Etherscan |\n| Clean | `npx hardhat clean` | Clean artifacts |\n\n## Template Files\n\nThis skill provides the following templates:\n- `./templates/hardhat.config.js` - JavaScript configuration\n- `./templates/hardhat.config.ts` - TypeScript configuration\n- `./templates/.env.example` - Environment variables template\n- `./templates/deploy-script.js` - Deployment script template\n\n## Scripts\n\nThis skill provides the following scripts:\n- `./scripts/init-hardhat.sh` - Automated project initialization\n\n---\n\n**Next Steps After Setup:**\n1. Configure `hardhat.config.js` for your networks\n2. Copy `.env.example` to `.env` and fill in values\n3. Install required dependencies with `npm install`\n4. Write contracts in `contracts/`\n5. Write tests in `test/`\n6. Run `npx hardhat test` to verify setup"
              },
              {
                "name": "natspec-standards",
                "description": "NatSpec documentation standards and best practices for Solidity contracts. Use when documenting code or reviewing documentation quality.",
                "path": "tech-stacks/solidity/skills/natspec-standards/SKILL.md",
                "frontmatter": {
                  "name": "natspec-standards",
                  "description": "NatSpec documentation standards and best practices for Solidity contracts. Use when documenting code or reviewing documentation quality."
                },
                "content": "# NatSpec Standards Skill\n\nThis skill provides standards and best practices for NatSpec (Ethereum Natural Specification) documentation in Solidity.\n\n## When to Use\n\nUse this skill when:\n- Documenting smart contracts\n- Reviewing code documentation\n- Generating documentation\n- Preparing for audits\n- Creating public APIs\n\n## NatSpec Overview\n\nNatSpec is Ethereum's standard for documenting smart contracts. It generates human-readable documentation and is displayed in wallets when users interact with contracts.\n\n**Benefits:**\n- User-facing descriptions in wallets\n- Developer documentation\n- Automated doc generation\n- Audit trail\n- Function parameter explanation\n\n## Basic Tags\n\n### Contract-Level Tags\n\n```solidity\n/// @title Brief contract title\n/// @author Author name\n/// @notice Explanation visible to end users\n/// @dev Technical details for developers\n/// @custom:security-contact security@example.com\ncontract MyContract {\n    // ...\n}\n```\n\n### Function Tags\n\n```solidity\n/// @notice Transfers tokens to a recipient\n/// @dev Uses SafeERC20 for safe transfers\n/// @param to The address receiving the tokens\n/// @param amount The number of tokens to transfer\n/// @return success True if the transfer succeeded\nfunction transfer(address to, uint256 amount) public returns (bool success) {\n    // ...\n}\n```\n\n### Event Tags\n\n```solidity\n/// @notice Emitted when tokens are transferred\n/// @dev Follows ERC20 standard\n/// @param from The sender address\n/// @param to The recipient address\n/// @param value The amount transferred\nevent Transfer(address indexed from, address indexed to, uint256 value);\n```\n\n### State Variable Tags\n\n```solidity\n/// @notice The total supply of tokens\n/// @dev Updated on mint and burn\nuint256 public totalSupply;\n\n/// @notice Mapping of account balances\nmapping(address => uint256) public balances;\n```\n\n## Complete Tag Reference\n\n| Tag | Usage | Visibility |\n|-----|-------|-----------|\n| `@title` | Contract title | External |\n| `@author` | Author name | External |\n| `@notice` | User explanation | External |\n| `@dev` | Developer notes | Developer |\n| `@param` | Parameter description | External |\n| `@return` | Return value description | External |\n| `@inheritdoc` | Inherit documentation | - |\n| `@custom:*` | Custom tags | Both |\n\n## Documentation Patterns\n\n### Comprehensive Contract Documentation\n\n```solidity\n/**\n * @title ERC20 Token Implementation\n * @author YourName\n * @notice This contract implements a standard ERC20 token with additional features\n * @dev Inherits from OpenZeppelin's ERC20 implementation\n * @custom:security-contact security@example.com\n */\ncontract MyToken is ERC20, Ownable {\n    /// @notice The maximum supply of tokens that can ever exist\n    /// @dev Set to 1 million tokens with 18 decimals\n    uint256 public constant MAX_SUPPLY = 1_000_000 * 10**18;\n\n    /// @notice Tracks the total amount of tokens that have been minted\n    /// @dev Incremented on mint, used to enforce MAX_SUPPLY\n    uint256 public totalMinted;\n\n    /**\n     * @notice Creates the token contract and mints initial supply\n     * @dev Sets the token name and symbol, grants DEFAULT_ADMIN_ROLE to deployer\n     * @param initialOwner The address that will own the contract\n     */\n    constructor(address initialOwner)\n        ERC20(\"MyToken\", \"MTK\")\n        Ownable(initialOwner)\n    {}\n\n    /**\n     * @notice Mints new tokens to a specified address\n     * @dev Only callable by owner, enforces MAX_SUPPLY limit\n     * @param to The address that will receive the minted tokens\n     * @param amount The number of tokens to mint (in wei, e.g., 1e18 = 1 token)\n     *\n     * Requirements:\n     * - Caller must be the owner\n     * - Total minted must not exceed MAX_SUPPLY\n     * - `to` cannot be the zero address\n     *\n     * Emits a {Transfer} event from the zero address\n     */\n    function mint(address to, uint256 amount) public onlyOwner {\n        require(totalMinted + amount <= MAX_SUPPLY, \"Exceeds max supply\");\n        _mint(to, amount);\n        totalMinted += amount;\n    }\n\n    /**\n     * @notice Returns the remaining tokens that can be minted\n     * @dev Calculates MAX_SUPPLY - totalMinted\n     * @return remaining The number of tokens that can still be minted\n     */\n    function remainingSupply() public view returns (uint256 remaining) {\n        return MAX_SUPPLY - totalMinted;\n    }\n}\n```\n\n### Documenting Complex Functions\n\n```solidity\n/**\n * @notice Swaps exact tokens for tokens through multiple pairs\n * @dev Supports multi-hop swaps through the Uniswap V2 router\n *\n * This function swaps an exact amount of input tokens for as many output\n * tokens as possible, following the path of token pairs defined in `path`.\n * The swap will revert if the output amount is less than `amountOutMin`.\n *\n * @param amountIn The exact amount of input tokens to swap\n * @param amountOutMin The minimum amount of output tokens to receive\n * @param path An array of token addresses defining the swap path\n * @param to The address that will receive the output tokens\n * @param deadline Unix timestamp after which the transaction will revert\n *\n * @return amounts An array of amounts for each step in the swap path\n *\n * Requirements:\n * - `path.length` must be >= 2\n * - `deadline` must be in the future\n * - Contract must have approval to spend `amountIn` of `path[0]` tokens\n * - Resulting amount must be >= `amountOutMin`\n *\n * Emits:\n * - {Swap} event for each pair in the path\n * - {Transfer} events for token movements\n *\n * Example:\n * ```\n * // Swap 1 ETH for at least 2000 USDC\n * uint256 amountIn = 1 ether;\n * uint256 amountOutMin = 2000 * 10**6;\n * address[] memory path = new address[](2);\n * path[0] = WETH;\n * path[1] = USDC;\n * swapExactTokensForTokens(amountIn, amountOutMin, path, msg.sender, block.timestamp + 300);\n * ```\n */\nfunction swapExactTokensForTokens(\n    uint256 amountIn,\n    uint256 amountOutMin,\n    address[] calldata path,\n    address to,\n    uint256 deadline\n) external returns (uint256[] memory amounts) {\n    // Implementation\n}\n```\n\n### Documenting Errors\n\n```solidity\n/**\n * @notice Thrown when a user has insufficient balance for an operation\n * @dev Used instead of require() for gas efficiency\n * @param account The address with insufficient balance\n * @param balance The actual balance of the account\n * @param needed The amount needed for the operation\n */\nerror InsufficientBalance(address account, uint256 balance, uint256 needed);\n\n/**\n * @notice Thrown when an unauthorized address attempts a restricted action\n * @param caller The address that attempted the action\n * @param required The role or address required\n */\nerror Unauthorized(address caller, address required);\n```\n\n### Documenting Modifiers\n\n```solidity\n/**\n * @notice Ensures the function can only be called when the contract is not paused\n * @dev Reverts with \"Pausable: paused\" if contract is paused\n */\nmodifier whenNotPaused() {\n    require(!paused(), \"Pausable: paused\");\n    _;\n}\n\n/**\n * @notice Prevents reentrant calls to a function\n * @dev Uses the ReentrancyGuard pattern from OpenZeppelin\n */\nmodifier nonReentrant() {\n    require(_status != _ENTERED, \"ReentrancyGuard: reentrant call\");\n    _status = _ENTERED;\n    _;\n    _status = _NOT_ENTERED;\n}\n```\n\n### Documenting Structs and Enums\n\n```solidity\n/**\n * @notice Represents a user's position in the vault\n * @dev Stored in the `positions` mapping\n * @param amount The amount of tokens deposited\n * @param shares The number of vault shares owned\n * @param lastUpdate The timestamp of the last position update\n * @param locked Whether the position is locked for withdrawals\n */\nstruct Position {\n    uint256 amount;\n    uint256 shares;\n    uint256 lastUpdate;\n    bool locked;\n}\n\n/**\n * @notice Possible states for a proposal\n * @dev Used in the governance system\n */\nenum ProposalState {\n    Pending,    /// @notice Proposal has been created but voting hasn't started\n    Active,     /// @notice Voting is currently open\n    Canceled,   /// @notice Proposal was canceled by the proposer\n    Defeated,   /// @notice Proposal failed to reach quorum or majority\n    Succeeded,  /// @notice Proposal passed and can be executed\n    Executed    /// @notice Proposal has been executed\n}\n```\n\n## Documentation Best Practices\n\n### 1. Always Document Public/External Functions\n\n```solidity\n// âŒ Bad: No documentation\nfunction transfer(address to, uint256 amount) public returns (bool) {}\n\n// âœ… Good: Clear documentation\n/**\n * @notice Transfers tokens to a recipient\n * @param to The recipient address\n * @param amount The amount to transfer\n * @return success True if transfer succeeded\n */\nfunction transfer(address to, uint256 amount) public returns (bool success) {}\n```\n\n### 2. Explain Complex Logic\n\n```solidity\n/**\n * @notice Calculates compound interest using the formula: A = P(1 + r)^t\n * @dev Uses fixed-point arithmetic with 18 decimals\n *\n * The calculation is broken into steps to avoid overflow:\n * 1. Calculate (1 + rate) with 18 decimal precision\n * 2. Raise to the power of time periods\n * 3. Multiply by principal and adjust for decimals\n *\n * @param principal The initial amount (with 18 decimals)\n * @param rate The interest rate per period (with 18 decimals, e.g., 0.05e18 = 5%)\n * @param periods The number of compounding periods\n * @return The final amount after compound interest\n */\nfunction calculateCompoundInterest(\n    uint256 principal,\n    uint256 rate,\n    uint256 periods\n) public pure returns (uint256) {\n    // Implementation\n}\n```\n\n### 3. Document Requirements and Effects\n\n```solidity\n/**\n * @notice Stakes tokens in the contract\n * @dev Transfers tokens from user and mints staking shares\n *\n * @param amount The amount of tokens to stake\n *\n * Requirements:\n * - `amount` must be greater than 0\n * - User must have approved this contract to spend `amount`\n * - User must have sufficient token balance\n * - Contract must not be paused\n *\n * Effects:\n * - Transfers `amount` tokens from user to contract\n * - Mints proportional shares to user\n * - Updates user's stake timestamp\n * - Increases total staked amount\n *\n * Emits:\n * - {Staked} event with user address and amount\n * - {Transfer} events from token transfers\n */\nfunction stake(uint256 amount) external nonReentrant whenNotPaused {\n    // Implementation\n}\n```\n\n### 4. Document Security Considerations\n\n```solidity\n/**\n * @notice Withdraws all staked tokens and rewards\n * @dev Uses pull-over-push pattern to avoid reentrancy\n *\n * Security Considerations:\n * - Protected by `nonReentrant` modifier\n * - Updates state before external calls (CEI pattern)\n * - Will revert if contract has insufficient balance\n *\n * @return stakedAmount The amount of staked tokens returned\n * @return rewardAmount The amount of reward tokens claimed\n */\nfunction withdraw() external nonReentrant returns (uint256 stakedAmount, uint256 rewardAmount) {\n    // Implementation\n}\n```\n\n### 5. Use Custom Tags for Additional Info\n\n```solidity\n/**\n * @title Vault Contract\n * @author YourName\n * @notice Deposit tokens to earn yield\n * @dev Implements ERC4626 tokenized vault standard\n *\n * @custom:security-contact security@example.com\n * @custom:audit Audited by Company X on 2024-01-15\n * @custom:version 1.0.0\n * @custom:license MIT\n */\ncontract Vault is ERC4626 {\n    // ...\n}\n```\n\n## Documentation Generation\n\n### Foundry\n\n```bash\n# Generate documentation\nforge doc\n\n# Generate and serve\nforge doc --serve --port 3000\n\n# Generate for specific contract\nforge doc --contract MyContract\n```\n\n### Hardhat\n\n```bash\n# Install hardhat-dodoc\nnpm install --save-dev @primitivefi/hardhat-dodoc\n\n# Generate documentation\nnpx hardhat dodoc\n\n# Documentation generated in docs/\n```\n\n## Inheritance Documentation\n\n```solidity\n/**\n * @title Enhanced ERC20\n * @notice ERC20 with additional features\n * @inheritdoc ERC20\n */\ncontract EnhancedERC20 is ERC20 {\n    /**\n     * @notice Mints new tokens with additional validation\n     * @inheritdoc ERC20\n     * @dev Adds max supply check before minting\n     */\n    function _mint(address account, uint256 amount) internal override {\n        require(totalSupply() + amount <= MAX_SUPPLY, \"Exceeds max supply\");\n        super._mint(account, amount);\n    }\n}\n```\n\n## Common Documentation Mistakes\n\n### âŒ 1. Vague Descriptions\n\n```solidity\n/// @notice Does stuff\n/// @param x some value\nfunction doSomething(uint256 x) public {}\n```\n\n### âœ… Better:\n\n```solidity\n/**\n * @notice Updates the withdrawal fee percentage\n * @param newFee The new fee in basis points (e.g., 100 = 1%)\n */\nfunction setFee(uint256 newFee) public {}\n```\n\n### âŒ 2. Outdated Documentation\n\n```solidity\n/// @notice Transfers tokens (function has been modified but docs haven't)\nfunction transfer(address to, uint256 amount, bool fast) public {}\n```\n\n### âŒ 3. Missing Parameter Descriptions\n\n```solidity\n/// @notice Swaps tokens\nfunction swap(uint256 a, uint256 b, address[] memory p) public {}\n```\n\n### âœ… Better:\n\n```solidity\n/**\n * @notice Swaps tokens through specified path\n * @param amountIn The input amount\n * @param amountOutMin The minimum acceptable output\n * @param path The swap path (array of token addresses)\n */\nfunction swap(uint256 amountIn, uint256 amountOutMin, address[] memory path) public {}\n```\n\n## Documentation Checklist\n\n- [ ] Every public/external function documented\n- [ ] All parameters explained\n- [ ] Return values described\n- [ ] Requirements listed\n- [ ] Effects documented\n- [ ] Events documented\n- [ ] Errors documented with parameters\n- [ ] Complex logic explained\n- [ ] Security considerations noted\n- [ ] Examples provided for complex functions\n- [ ] Custom tags used where appropriate\n- [ ] Documentation matches implementation\n\n## Quick Reference\n\n### Minimal Documentation\n\n```solidity\n/// @notice Brief user-facing description\n/// @param param1 Description\n/// @return Description\nfunction myFunction(uint256 param1) external returns (uint256) {}\n```\n\n### Complete Documentation\n\n```solidity\n/**\n * @notice User-facing description\n * @dev Technical details\n * @param param1 Description\n * @param param2 Description\n * @return returnValue Description\n *\n * Requirements:\n * - List requirements\n *\n * Emits:\n * - {EventName}\n */\nfunction myFunction(uint256 param1, address param2)\n    external\n    returns (uint256 returnValue)\n{}\n```\n\n---\n\n**Remember:** Good documentation is essential for security audits, user trust, and long-term maintainability. Document as you code, not as an afterthought."
              },
              {
                "name": "post-change-verification",
                "description": "Mandatory verification protocol after code changes for Solidity projects. Use after any code modification to ensure quality.",
                "path": "tech-stacks/solidity/skills/post-change-verification/SKILL.md",
                "frontmatter": {
                  "name": "post-change-verification",
                  "description": "Mandatory verification protocol after code changes for Solidity projects. Use after any code modification to ensure quality."
                },
                "content": "# Post-Change Verification Protocol\n\nThis skill defines the mandatory verification steps that Solidity agents must perform after modifying code files.\n\n## When to Use\n\nUse this skill ALWAYS when:\n- Creating new contract files\n- Modifying existing contracts\n- Refactoring code\n- Generating code\n\nDo NOT use when:\n- Only reading/analyzing code (no modifications)\n- Generating documentation only\n- Running security audits (read-only)\n\n## Framework Detection\n\nBefore running commands, detect the project's framework:\n\n| Indicator | Framework | Tools |\n|-----------|-----------|-------|\n| `foundry.toml` | Foundry | `forge fmt`, `forge build`, `forge test` |\n| `hardhat.config.js/ts` | Hardhat | `npx prettier`, `npx hardhat compile`, `npx hardhat test` |\n| Both files exist | Hybrid | Use Foundry for contracts, Hardhat for deployment |\n\n**Detection Order:** Check for `foundry.toml` first, then `hardhat.config.*`.\n\n## Protocol Steps\n\nAfter completing code changes, agents MUST execute these steps IN ORDER:\n\n### Step 1: Format Code\n\n**Foundry:**\n```bash\nforge fmt\n```\n\n**Hardhat:**\n```bash\nnpx prettier --write \"contracts/**/*.sol\"\n```\n\n**Purpose:** Ensure consistent code formatting across contracts.\n\n### Step 2: Run Linter\n\n```bash\nsolhint \"src/**/*.sol\"\n# or for Hardhat projects\nsolhint \"contracts/**/*.sol\"\n```\n\n**Purpose:** Detect code quality issues, potential vulnerabilities, and style violations.\n\n### Step 3: Compile (Type Check)\n\n**Foundry:**\n```bash\nforge build\n```\n\n**Hardhat:**\n```bash\nnpx hardhat compile\n```\n\n**Purpose:** Verify contracts compile without errors. Catches type errors and syntax issues.\n\n### Step 4: Run Related Tests\n\n**Foundry:**\n```bash\nforge test --match-path \"test/ModifiedContract.t.sol\"\n# or run all tests\nforge test\n```\n\n**Hardhat:**\n```bash\nnpx hardhat test test/ModifiedContract.test.ts\n# or run all tests\nnpx hardhat test\n```\n\n**Purpose:** Verify code changes do not break existing functionality.\n\n### Step 5: Verify Zero Issues\n\n**TARGET:** All steps must complete with ZERO errors and ZERO warnings.\n\nIf any step reports errors or warnings, proceed to Exception Handling.\n\n## Exception Handling\n\nWhen verification finds issues, follow this decision tree:\n\n```\nIssue Found During Verification\n            |\n            v\n    Was this issue caused\n    by current changes?\n            |\n     +------+------+\n     |             |\n    YES           NO\n     |             |\n     v             v\n  Fix it      Is it in a file\n  now         you modified?\n                   |\n            +------+------+\n            |             |\n           YES           NO\n            |             |\n            v             v\n      Is it a         Document and\n      small fix?      report only\n      (< 10 lines)         |\n            |              |\n     +------+------+       v\n     |             |    DONE\n    YES           NO    (proceed with\n     |             |     task)\n    v             v\n  Fix it      Document,\n  now         report,\n              recommend\n              separate task\n```\n\n### Decision Rules\n\n1. **Issue caused by your changes:** Fix immediately before completing task\n2. **Pre-existing issue in modified file, small fix (< 10 lines):** Fix as part of current work\n3. **Pre-existing issue in modified file, large fix (>= 10 lines):** Document and report, recommend separate cleanup task\n4. **Pre-existing issue in unmodified file:** Document and report only, do not fix\n\n### Example Scenarios\n\n**Scenario 1:** You add a new function and the linter reports a visibility issue in your new code.\n- **Action:** Fix it immediately (issue caused by your changes)\n\n**Scenario 2:** You modify a contract and discover a pre-existing lint warning (3 lines to fix) in a function you touched.\n- **Action:** Fix it as part of your work (small fix in modified file)\n\n**Scenario 3:** You modify a contract and discover 50+ lines of lint warnings throughout the file.\n- **Action:** Document the issues, complete your task, recommend separate cleanup task\n\n**Scenario 4:** Lint reports warnings in a contract you did not modify.\n- **Action:** Document the issues in output, proceed with task completion\n\n## Verification Output Format\n\nReport verification results using this consistent format:\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     [PASSED | FAILED | SKIPPED (reason)]\nLint:       [PASSED | FAILED] ([X] errors, [Y] warnings)\nCompile:    [PASSED | FAILED] ([X] errors)\nTests:      [PASSED | FAILED] ([X]/[Y] passed)\n\nPre-existing issues: [NONE | count listed below]\n[If issues exist, list them here]\n\n=== [TASK COMPLETE | VERIFICATION FAILED] ===\n```\n\n### Example: All Checks Passed\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       PASSED (0 errors, 0 warnings)\nCompile:    PASSED (0 errors)\nTests:      PASSED (15/15)\n\nPre-existing issues: NONE\n\n=== TASK COMPLETE ===\n```\n\n### Example: Pre-existing Issues Found\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       FAILED (0 errors caused by this change)\nCompile:    PASSED (0 errors)\nTests:      PASSED (15/15)\n\nPre-existing issues (not caused by this change):\n- src/legacy/OldToken.sol: Line 45 - func-visibility: Consider adding visibility specifier\n- src/utils/Helper.sol: Lines 78-92 - reason-string: Missing error message\n\nThese issues require structural changes beyond the scope of this task.\nRecommend creating a separate cleanup task.\n\n=== TASK COMPLETE ===\n```\n\n### Example: Issues Caused by Changes\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       FAILED (2 errors, 1 warning)\nCompile:    FAILED (1 error)\nTests:      FAILED (13/15)\n\nIssues to fix:\n- src/Token.sol: Line 23 - ParserError: Expected ';' but got '{'\n- src/Token.sol: Line 45 - not-rely-on-time: Avoid using block.timestamp\n- src/Token.sol: Line 67 - Missing NatSpec documentation\n\n=== VERIFICATION FAILED - FIX ISSUES BEFORE COMPLETING ===\n```\n\n## Graceful Degradation\n\nHandle missing or failing commands gracefully:\n\n| Situation | Status | Action |\n|-----------|--------|--------|\n| Command not found | `SKIPPED (command not found)` | Note and proceed to next step |\n| Command timeout (> 5 min) | `SKIPPED (timeout)` | Note and proceed to next step |\n| Execution error | `SKIPPED (execution error: [reason])` | Note and proceed to next step |\n\n### Example: Missing Linter\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       SKIPPED (command not found - solhint not installed)\nCompile:    PASSED (0 errors)\nTests:      PASSED (15/15)\n\nPre-existing issues: NONE\n\nNote: Consider installing solhint for full quality verification.\n\n=== TASK COMPLETE ===\n```\n\n## Makefile Integration (Foundry)\n\nFoundry projects SHOULD use Makefile for build operations. Ensure these targets exist:\n\n```makefile\n.PHONY: fmt lint build test verify\n\nfmt:\n\tforge fmt\n\nlint:\n\tsolhint \"src/**/*.sol\"\n\nbuild:\n\tforge build\n\ntest:\n\tforge test\n\n# Combined verification target\nverify: fmt lint build test\n```\n\nIf Makefile targets are missing, fall back to direct commands but note in output.\n\n## Best Practices\n\n1. **Run all steps in order** - Each step may reveal different issues\n2. **Fix your own issues first** - Never leave broken code from your changes\n3. **Document pre-existing issues clearly** - Help future cleanup efforts\n4. **Use the 10-line rule consistently** - Small fixes improve code health, large fixes need dedicated tasks\n5. **Report honestly** - Verification results are informational, not judgmental\n6. **Security before optimization** - Never skip verification for speed\n\n## Code Review Checklist\n\nBefore completing any code-modifying task:\n\n- [ ] Format check passed (`forge fmt` or `npx prettier`)\n- [ ] Lint check passed (or pre-existing issues documented)\n- [ ] Compile check passed (or pre-existing issues documented)\n- [ ] Tests passed (or pre-existing issues documented)\n- [ ] All issues caused by changes are fixed\n- [ ] Pre-existing issues clearly documented\n- [ ] Verification output included in task completion"
              },
              {
                "name": "proxy-patterns",
                "description": "Proxy patterns for upgradeable smart contracts. Use when implementing or reviewing upgradeable contracts.",
                "path": "tech-stacks/solidity/skills/proxy-patterns/SKILL.md",
                "frontmatter": {
                  "name": "proxy-patterns",
                  "description": "Proxy patterns for upgradeable smart contracts. Use when implementing or reviewing upgradeable contracts."
                },
                "content": "# Proxy Patterns Skill\n\nReference skill for proxy patterns in Solidity. Detailed proxy implementations are covered in the `contract-patterns` skill.\n\n## When to Use\n\nUse this skill when:\n- Implementing upgradeable contracts\n- Choosing proxy pattern\n- Understanding proxy mechanics\n- Reviewing upgrade implementations\n\n## Related Skills\n\nFor detailed proxy implementations, see:\n- **contract-patterns**: `patterns/upgradeable-contracts.md`\n- **upgrade-safety**: Safe upgrade practices\n- **security-audit**: `checklists/upgrade-checklist.md`\n\n## Proxy Pattern Overview\n\n### Pattern Comparison\n\n| Pattern | Upgrade Location | Best For | Complexity |\n|---------|-----------------|----------|------------|\n| UUPS | Implementation | Most cases | Medium |\n| Transparent | Proxy | Admin separation | Low |\n| Beacon | Beacon contract | Multiple instances | High |\n| Diamond | Facet contracts | Large contracts | Very High |\n\n## UUPS (Universal Upgradeable Proxy Standard)\n\n**Recommended for most use cases**\n\n```solidity\nimport \"@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol\";\n\ncontract MyContract is UUPSUpgradeable, OwnableUpgradeable {\n    constructor() {\n        _disableInitializers();\n    }\n\n    function initialize() public initializer {\n        __Ownable_init(msg.sender);\n        __UUPSUpgradeable_init();\n    }\n\n    function _authorizeUpgrade(address) internal override onlyOwner {}\n}\n```\n\n**Pros:**\n- Gas efficient\n- Flexible upgrade authorization\n- Smaller proxy contract\n\n**Cons:**\n- Can brick if _authorizeUpgrade removed\n- More complex implementation\n\n**Detailed documentation:** See `contract-patterns/patterns/upgradeable-contracts.md`\n\n## Transparent Proxy\n\n**Use when admin/user separation is critical**\n\n```solidity\nimport \"@openzeppelin/contracts/proxy/transparent/TransparentUpgradeableProxy.sol\";\n\n// Deploy\nTransparentUpgradeableProxy proxy = new TransparentUpgradeableProxy(\n    implementationAddress,\n    adminAddress,\n    initData\n);\n```\n\n**Pros:**\n- Clear admin/user separation\n- Admin cannot call implementation functions\n- Battle-tested pattern\n\n**Cons:**\n- Higher gas costs\n- Larger proxy contract\n\n**Detailed documentation:** See `contract-patterns/patterns/upgradeable-contracts.md`\n\n## Beacon Proxy\n\n**Use for multiple instances sharing implementation**\n\n```solidity\nimport \"@openzeppelin/contracts/proxy/beacon/UpgradeableBeacon.sol\";\nimport \"@openzeppelin/contracts/proxy/beacon/BeaconProxy.sol\";\n\n// Deploy beacon\nUpgradeableBeacon beacon = new UpgradeableBeacon(implementationAddress);\n\n// Deploy proxies\nBeaconProxy proxy1 = new BeaconProxy(address(beacon), initData);\nBeaconProxy proxy2 = new BeaconProxy(address(beacon), initData);\n\n// Upgrade all\nbeacon.upgradeTo(newImplementation);\n```\n\n**Pros:**\n- Upgrade multiple contracts at once\n- Gas efficient for many instances\n- Centralized control\n\n**Cons:**\n- All instances upgrade together\n- Additional beacon contract\n\n**Detailed documentation:** See `contract-patterns/patterns/upgradeable-contracts.md`\n\n## Diamond Pattern (EIP-2535)\n\n**Use for contracts exceeding size limits**\n\nComplex pattern with multiple facets. See [EIP-2535](https://eips.ethereum.org/EIPS/eip-2535) for specification.\n\n## Storage Layout Rules\n\n**Critical for all proxy patterns:**\n\n```solidity\n// V1\ncontract V1 {\n    uint256 public value;\n    address public owner;\n}\n\n// V2 - âœ… Safe upgrade\ncontract V2 {\n    uint256 public value;      // Same position\n    address public owner;      // Same position\n    uint256 public newValue;   // Added at end\n}\n\n// V2 - âŒ Unsafe upgrade\ncontract V2Bad {\n    address public owner;      // âŒ Changed position\n    uint256 public value;      // âŒ Changed position\n}\n```\n\n**Rules:**\n1. Never delete state variables\n2. Never change types\n3. Never change order\n4. Only add at the end\n5. Use storage gaps in base contracts\n\n## Quick Pattern Selection\n\n**Choose UUPS if:**\n- You want gas efficiency\n- You need flexible upgrade control\n- You're comfortable with the pattern\n\n**Choose Transparent if:**\n- You need strict admin/user separation\n- Gas cost is less critical\n- You want simplicity\n\n**Choose Beacon if:**\n- Deploying many similar contracts\n- Need to upgrade all together\n- Want centralized upgrade control\n\n**Choose Diamond if:**\n- Contract exceeds 24KB limit\n- Need modular functionality\n- Comfortable with complexity\n\n## Related Documentation\n\n- **Implementation examples:** `contract-patterns/patterns/upgradeable-contracts.md`\n- **Security checklist:** `security-audit/checklists/upgrade-checklist.md`\n- **Upgrade safety:** `upgrade-safety/SKILL.md`\n- **Example contract:** `contract-patterns/examples/upgradeable-example.sol`\n\n---\n\n**Note:** This is a reference skill. For detailed implementations and examples, see the `contract-patterns` skill."
              },
              {
                "name": "security-audit",
                "description": "Security audit methodology, checklists, and tools for identifying vulnerabilities in Solidity smart contracts. Use when reviewing contracts for security issues or performing comprehensive audits.",
                "path": "tech-stacks/solidity/skills/security-audit/SKILL.md",
                "frontmatter": {
                  "name": "security-audit",
                  "description": "Security audit methodology, checklists, and tools for identifying vulnerabilities in Solidity smart contracts. Use when reviewing contracts for security issues or performing comprehensive audits."
                },
                "content": "# Security Audit Skill\n\nThis skill provides methodology, checklists, and templates for conducting security audits of Solidity smart contracts.\n\n## When to Use\n\nUse this skill when:\n- Reviewing contracts for security vulnerabilities\n- Performing comprehensive security audits\n- Preparing for external audits\n- Implementing security best practices\n- Analyzing contract attack surfaces\n- Validating security assumptions\n\n## Audit Process\n\n### 1. Preparation Phase\n\n**Understand the System:**\n- Review project documentation\n- Understand business logic and requirements\n- Identify trust boundaries\n- Map out contract interactions\n- Review previous audits (if any)\n\n**Set Scope:**\n- Define which contracts are in scope\n- Identify external dependencies\n- Note any known issues or concerns\n- Establish audit timeline\n\n### 2. Automated Analysis\n\n**Tools to run:**\n\n```bash\n# Static analysis with Slither\nslither . --detect all\n\n# Mythril symbolic execution\nmyth analyze contracts/MyContract.sol\n\n# Aderyn static analyzer\naderyn .\n\n# Gas optimization with Foundry\nforge test --gas-report\n\n# Code coverage\nforge coverage\n\n# Mutation testing\nvertigo run\n```\n\n**Key tools:**\n- **Slither**: Fast static analysis with 70+ detectors\n- **Mythril**: Symbolic execution for deep analysis\n- **Aderyn**: Modern Rust-based analyzer\n- **Echidna**: Fuzzing for property testing\n- **Manticore**: Symbolic execution for complex scenarios\n\n### 3. Manual Review\n\nSee `./checklists/` for comprehensive review checklists:\n\n- **common-vulnerabilities.md** - OWASP Top 10 for smart contracts\n- **access-control-checklist.md** - Authorization and permission checks\n- **token-checklist.md** - ERC20/721/1155 specific issues\n- **defi-checklist.md** - DeFi-specific vulnerabilities\n- **upgrade-checklist.md** - Proxy and upgrade safety\n- **gas-optimization-checklist.md** - Gas efficiency review\n\n### 4. Testing Review\n\n**Test Coverage Analysis:**\n- Line coverage > 95%\n- Branch coverage > 90%\n- Function coverage = 100%\n- Critical paths fully tested\n\n**Test Quality:**\n- Edge cases covered\n- Negative test cases present\n- Fuzz testing implemented\n- Integration tests present\n- Reentrancy attack tests\n- Access control tests\n\n### 5. Documentation Review\n\n**Code Documentation:**\n- NatSpec comments present\n- Complex logic explained\n- Security assumptions documented\n- Known limitations noted\n\n**External Documentation:**\n- Architecture diagrams\n- Threat model documented\n- Deployment procedures\n- Upgrade procedures\n- Emergency procedures\n\n## Critical Vulnerability Categories\n\n### High Severity\n\n1. **Reentrancy**\n   - External calls before state updates\n   - Missing ReentrancyGuard\n   - Cross-function reentrancy\n\n2. **Access Control**\n   - Missing access modifiers\n   - Incorrect owner checks\n   - Centralization risks\n   - Privilege escalation\n\n3. **Integer Issues**\n   - Overflow/underflow (pre-0.8)\n   - Division by zero\n   - Precision loss\n\n4. **Unchecked External Calls**\n   - Ignored return values\n   - Low-level call failures\n   - Delegatecall to untrusted addresses\n\n5. **Logic Errors**\n   - Incorrect calculations\n   - Wrong operator usage\n   - State machine issues\n\n### Medium Severity\n\n1. **Front-Running**\n   - Transaction ordering dependence\n   - Lack of commit-reveal\n   - MEV vulnerabilities\n\n2. **Denial of Service**\n   - Unbounded loops\n   - Gas limit attacks\n   - Block gas limit issues\n\n3. **Oracle Manipulation**\n   - Price oracle attacks\n   - Flash loan exploits\n   - Stale price data\n\n4. **Token Issues**\n   - Approval race conditions\n   - Transfer return value handling\n   - Fee-on-transfer tokens\n\n### Low Severity\n\n1. **Gas Optimization**\n   - Inefficient storage usage\n   - Redundant operations\n   - Suboptimal patterns\n\n2. **Code Quality**\n   - Unused variables\n   - Dead code\n   - Magic numbers\n   - Inconsistent naming\n\n## Security Patterns\n\n### 1. Checks-Effects-Interactions (CEI)\n\n```solidity\nfunction withdraw(uint256 amount) public {\n    // 1. CHECKS\n    require(balances[msg.sender] >= amount, \"Insufficient balance\");\n\n    // 2. EFFECTS\n    balances[msg.sender] -= amount;\n\n    // 3. INTERACTIONS\n    (bool success, ) = msg.sender.call{value: amount}(\"\");\n    require(success, \"Transfer failed\");\n}\n```\n\n### 2. Pull Over Push\n\n```solidity\n// âŒ BAD: Push payments\nfunction distributeRewards() public {\n    for (uint i = 0; i < users.length; i++) {\n        users[i].transfer(rewards[users[i]]);\n    }\n}\n\n// âœ… GOOD: Pull payments\nfunction claimReward() public {\n    uint256 reward = rewards[msg.sender];\n    require(reward > 0, \"No reward\");\n    rewards[msg.sender] = 0;\n    payable(msg.sender).transfer(reward);\n}\n```\n\n### 3. Rate Limiting\n\n```solidity\nmapping(address => uint256) public lastActionTime;\nuint256 public constant COOLDOWN = 1 hours;\n\nfunction sensitiveAction() public {\n    require(\n        block.timestamp >= lastActionTime[msg.sender] + COOLDOWN,\n        \"Cooldown not expired\"\n    );\n    lastActionTime[msg.sender] = block.timestamp;\n    // Action logic\n}\n```\n\n### 4. Emergency Stop\n\n```solidity\nimport \"@openzeppelin/contracts/security/Pausable.sol\";\n\ncontract MyContract is Pausable {\n    function criticalFunction() public whenNotPaused {\n        // Protected by pause mechanism\n    }\n\n    function pause() public onlyOwner {\n        _pause();\n    }\n}\n```\n\n## Automated Tool Commands\n\n### Slither Analysis\n\n```bash\n# Basic analysis\nslither .\n\n# Specific detectors\nslither . --detect reentrancy-eth,unchecked-transfer\n\n# Generate report\nslither . --json slither-report.json\n\n# Check upgradeability\nslither-check-upgradeability . MyContract\n\n# Human-readable summary\nslither . --print human-summary\n```\n\n### Mythril Analysis\n\n```bash\n# Analyze specific contract\nmyth analyze contracts/MyContract.sol\n\n# With specific modules\nmyth analyze contracts/MyContract.sol -m IntegerOverflow,Reentrancy\n\n# Generate report\nmyth analyze contracts/MyContract.sol -o json > mythril-report.json\n```\n\n### Aderyn Analysis\n\n```bash\n# Basic scan\naderyn .\n\n# Generate markdown report\naderyn . --output report.md\n\n# Specific severity\naderyn . --severity high,medium\n```\n\n### Echidna Fuzzing\n\n```bash\n# Fuzz test with config\nechidna-test contracts/MyContract.sol --config echidna.yaml\n\n# Specific test contract\nechidna-test contracts/MyContract.sol --contract TestContract\n```\n\n## Audit Report Template\n\nSee `./templates/audit-report-template.md` for a comprehensive audit report structure.\n\n**Report sections:**\n1. Executive Summary\n2. Scope and Methodology\n3. Findings Overview\n4. Detailed Findings\n5. Recommendations\n6. Conclusion\n7. Appendices\n\n## Common Vulnerability Checklist\n\n### Access Control\n- [ ] All functions have appropriate access modifiers\n- [ ] Owner/admin addresses are validated\n- [ ] Role-based access control is correctly implemented\n- [ ] No unauthorized privilege escalation possible\n- [ ] Multi-sig or timelock for critical functions\n\n### Reentrancy\n- [ ] CEI pattern followed\n- [ ] ReentrancyGuard applied to vulnerable functions\n- [ ] No external calls before state updates\n- [ ] Cross-function reentrancy considered\n\n### Integer Operations\n- [ ] Using Solidity 0.8+ for automatic checks\n- [ ] Division by zero checks where needed\n- [ ] Precision loss in calculations handled\n\n### External Calls\n- [ ] Return values checked\n- [ ] Gas limits considered\n- [ ] Delegatecall to trusted addresses only\n- [ ] Call used instead of transfer/send for flexibility\n\n### Token Handling\n- [ ] ERC20 approval race condition handled\n- [ ] Transfer return values checked\n- [ ] Fee-on-transfer tokens considered\n- [ ] Decimal handling correct\n\n### Upgrades (if applicable)\n- [ ] Storage layout preserved\n- [ ] Initializers properly protected\n- [ ] _authorizeUpgrade function present\n- [ ] Storage gaps used\n- [ ] Upgrade tested on testnet\n\n### Gas Optimization\n- [ ] No unbounded loops\n- [ ] Efficient storage usage\n- [ ] Batch operations where possible\n- [ ] View/pure functions used correctly\n\n### Oracle Usage\n- [ ] Price staleness checks\n- [ ] Multiple oracle sources\n- [ ] Flash loan attack protection\n- [ ] Chainlink recommendations followed\n\n## Security Resources\n\n### Documentation\n- [Ethereum Smart Contract Security Best Practices](https://consensys.github.io/smart-contract-best-practices/)\n- [SWC Registry](https://swcregistry.io/) - Smart contract weakness classification\n- [Solidity Security Considerations](https://docs.soliditylang.org/en/latest/security-considerations.html)\n- [OpenZeppelin Security](https://docs.openzeppelin.com/contracts/4.x/security)\n\n### Tools\n- [Slither](https://github.com/crytic/slither)\n- [Mythril](https://github.com/ConsenSys/mythril)\n- [Aderyn](https://github.com/Cyfrin/aderyn)\n- [Echidna](https://github.com/crytic/echidna)\n- [Manticore](https://github.com/trailofbits/manticore)\n\n### Audit Firms\n- Trail of Bits\n- OpenZeppelin\n- ConsenSys Diligence\n- Cyfrin (Code4rena)\n- Spearbit\n\n## Finding Severity Classification\n\n### Critical\n- Direct loss of funds\n- Complete contract takeover\n- Unrecoverable state corruption\n\n**Example:** Reentrancy allowing unlimited withdrawals\n\n### High\n- Significant loss of funds under specific conditions\n- Privilege escalation\n- Critical function DoS\n\n**Example:** Missing access control on admin function\n\n### Medium\n- Partial loss of funds\n- Temporary DoS\n- Incorrect state management\n\n**Example:** Front-running opportunity affecting fairness\n\n### Low\n- Potential issues under rare conditions\n- Gas optimizations\n- Code quality improvements\n\n**Example:** Use of magic numbers instead of constants\n\n### Informational\n- Best practice recommendations\n- Documentation improvements\n- Code clarity suggestions\n\n**Example:** Missing NatSpec comments\n\n## Best Practices\n\n1. **Multiple passes** - Review code multiple times with different focuses\n2. **Assume malicious actors** - Think like an attacker\n3. **Test assumptions** - Verify all security assumptions\n4. **Check dependencies** - Review imported contracts and libraries\n5. **Consider edge cases** - Zero values, max values, empty arrays\n6. **Document findings clearly** - Include reproduction steps and recommendations\n7. **Retest after fixes** - Verify fixes don't introduce new issues\n8. **Stay updated** - Follow latest vulnerability disclosures\n\n## Integration with Other Skills\n\nThis skill works with:\n- **vulnerability-patterns**: Detailed vulnerability descriptions\n- **testing-patterns**: Test design for security scenarios\n- **gas-optimization**: Efficient and secure implementations\n- **upgrade-safety**: Safe upgrade practices\n\n## Quick Reference\n\n| Task | Tool | Command |\n|------|------|---------|\n| Static analysis | Slither | `slither .` |\n| Symbolic execution | Mythril | `myth analyze contracts/` |\n| Modern analysis | Aderyn | `aderyn .` |\n| Fuzzing | Echidna | `echidna-test contracts/` |\n| Coverage | Foundry | `forge coverage` |\n| Gas report | Foundry | `forge test --gas-report` |\n\n---\n\n**Remember:** Security is not a one-time check. Conduct regular audits, especially after significant changes. Consider external audits for production systems handling significant value."
              },
              {
                "name": "testing-patterns",
                "description": "Test design patterns, best practices, and examples for comprehensive Solidity testing. Use when writing tests for smart contracts or improving test coverage.",
                "path": "tech-stacks/solidity/skills/testing-patterns/SKILL.md",
                "frontmatter": {
                  "name": "testing-patterns",
                  "description": "Test design patterns, best practices, and examples for comprehensive Solidity testing. Use when writing tests for smart contracts or improving test coverage."
                },
                "content": "# Testing Patterns Skill\n\nThis skill provides patterns, best practices, and examples for testing Solidity smart contracts using Foundry and Hardhat.\n\n**Testing Language:**\n- **Foundry projects:** Tests written in Solidity\n- **Hardhat projects:** Tests written in TypeScript with strict mode enabled\n\n## When to Use\n\nUse this skill when:\n- Writing tests for new contracts\n- Improving test coverage\n- Designing test suites\n- Implementing fuzz testing\n- Creating invariant tests\n- Testing security scenarios\n- Organizing test files\n\n## Testing Language by Framework\n\n**Foundry projects:** Write tests in **Solidity**\n- Type-safe at compile time\n- Uses Foundry's Test contract\n- Direct access to contract internals\n- Built-in fuzz and invariant testing\n\n**Hardhat projects:** Write tests in **TypeScript** (strict mode)\n- Strongly typed with TypeScript\n- Better IDE support and autocomplete\n- Catch type errors before runtime\n- Modern async/await patterns\n\n## Testing Frameworks\n\n### Foundry (Solidity Tests)\n\n**Advantages:**\n- Fast execution (written in Rust)\n- Built-in fuzz testing\n- Built-in invariant testing\n- Gas reporting\n- Cheatcodes for powerful testing\n- Native Solidity tests\n\n**Basic Test:**\n```solidity\n// SPDX-License-Identifier: MIT\npragma solidity ^0.8.30;\n\nimport {Test} from \"forge-std/Test.sol\";\nimport {MyContract} from \"../src/MyContract.sol\";\n\ncontract MyContractTest is Test {\n    MyContract public myContract;\n    address public owner = address(1);\n\n    function setUp() public {\n        vm.prank(owner);\n        myContract = new MyContract();\n    }\n\n    function test_BasicFunctionality() public {\n        // Arrange\n        uint256 expected = 42;\n\n        // Act\n        myContract.setValue(expected);\n\n        // Assert\n        assertEq(myContract.value(), expected);\n    }\n}\n```\n\n### Hardhat (TypeScript Tests)\n\n**Advantages:**\n- TypeScript with strict typing\n- Rich ecosystem\n- Easy mocking\n- Time manipulation\n- Network forking\n\n**TypeScript Configuration (tsconfig.json):**\n```json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES2020\",\n    \"module\": \"commonjs\",\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"skipLibCheck\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"resolveJsonModule\": true,\n    \"noImplicitAny\": true,\n    \"strictNullChecks\": true,\n    \"strictFunctionTypes\": true\n  },\n  \"include\": [\"./test\", \"./scripts\", \"./typechain-types\"],\n  \"files\": [\"./hardhat.config.ts\"]\n}\n```\n\n**Basic Test (TypeScript):**\n```typescript\nimport { expect } from \"chai\";\nimport { ethers } from \"hardhat\";\nimport { MyContract } from \"../typechain-types\";\nimport { SignerWithAddress } from \"@nomicfoundation/hardhat-ethers/signers\";\n\ndescribe(\"MyContract\", function () {\n  let myContract: MyContract;\n  let owner: SignerWithAddress;\n\n  beforeEach(async function () {\n    [owner] = await ethers.getSigners();\n    const MyContractFactory = await ethers.getContractFactory(\"MyContract\");\n    myContract = await MyContractFactory.deploy();\n  });\n\n  it(\"should set value correctly\", async function () {\n    const expected: number = 42;\n    await myContract.setValue(expected);\n    expect(await myContract.value()).to.equal(expected);\n  });\n});\n```\n\n## Test Organization\n\n### File Structure\n\n**Foundry:**\n```\ntest/\nâ”œâ”€â”€ unit/\nâ”‚   â”œâ”€â”€ MyContract.t.sol\nâ”‚   â””â”€â”€ Token.t.sol\nâ”œâ”€â”€ integration/\nâ”‚   â”œâ”€â”€ Integration.t.sol\nâ”‚   â””â”€â”€ Workflow.t.sol\nâ”œâ”€â”€ fuzz/\nâ”‚   â””â”€â”€ Fuzz.t.sol\nâ””â”€â”€ invariant/\n    â””â”€â”€ Invariant.t.sol\n```\n\n**Hardhat (TypeScript):**\n```\ntest/\nâ”œâ”€â”€ unit/\nâ”‚   â”œâ”€â”€ MyContract.test.ts\nâ”‚   â””â”€â”€ Token.test.ts\nâ”œâ”€â”€ integration/\nâ”‚   â”œâ”€â”€ Integration.test.ts\nâ”‚   â””â”€â”€ Workflow.test.ts\nâ””â”€â”€ fixtures/\n    â””â”€â”€ deploy.ts\n```\n\n### Naming Conventions\n\n**Foundry (Solidity):**\n- Files: `ContractName.t.sol`\n- Contracts: `ContractNameTest`\n- Functions: `test_FunctionName_Condition()`\n- Fuzz: `testFuzz_FunctionName()`\n- Invariant: `invariant_ConditionName()`\n\n**Hardhat (TypeScript):**\n- Files: `ContractName.test.ts`\n- Describe blocks: Contract/feature names\n- It blocks: Specific behavior descriptions\n- Strict typing: All variables explicitly typed\n\n## Test Patterns\n\n### 1. Arrange-Act-Assert (AAA)\n\n```solidity\nfunction test_Transfer() public {\n    // ARRANGE: Set up test conditions\n    address recipient = address(0xBEEF);\n    uint256 amount = 100;\n    deal(address(token), user, 1000);\n\n    // ACT: Perform the action\n    vm.prank(user);\n    token.transfer(recipient, amount);\n\n    // ASSERT: Verify the result\n    assertEq(token.balanceOf(recipient), amount);\n    assertEq(token.balanceOf(user), 900);\n}\n```\n\n### 2. Setup and Teardown\n\n**Foundry:**\n```solidity\ncontract MyTest is Test {\n    MyContract public myContract;\n    address public user1;\n    address public user2;\n\n    function setUp() public {\n        // Runs before each test\n        myContract = new MyContract();\n        user1 = makeAddr(\"user1\");\n        user2 = makeAddr(\"user2\");\n\n        vm.deal(user1, 100 ether);\n        vm.deal(user2, 100 ether);\n    }\n}\n```\n\n**Hardhat (TypeScript):**\n```typescript\nimport { ethers } from \"hardhat\";\nimport { MyContract } from \"../typechain-types\";\n\ndescribe(\"MyContract\", function () {\n  let myContract: MyContract;\n\n  beforeEach(async function () {\n    // Runs before each test\n    const MyContractFactory = await ethers.getContractFactory(\"MyContract\");\n    myContract = await MyContractFactory.deploy();\n  });\n\n  afterEach(async function () {\n    // Cleanup after each test (if needed)\n  });\n});\n```\n\n### 3. Test Fixtures\n\n**Hardhat (TypeScript):**\n```typescript\nimport { loadFixture } from \"@nomicfoundation/hardhat-network-helpers\";\nimport { ethers } from \"hardhat\";\nimport { Token } from \"../typechain-types\";\nimport { SignerWithAddress } from \"@nomicfoundation/hardhat-ethers/signers\";\n\nasync function deployTokenFixture() {\n  const [owner, addr1, addr2]: SignerWithAddress[] = await ethers.getSigners();\n  const TokenFactory = await ethers.getContractFactory(\"Token\");\n  const token: Token = await TokenFactory.deploy();\n\n  return { token, owner, addr1, addr2 };\n}\n\ndescribe(\"Token\", function () {\n  it(\"should transfer tokens\", async function () {\n    const { token, addr1 } = await loadFixture(deployTokenFixture);\n    await token.transfer(addr1.address, 100);\n    expect(await token.balanceOf(addr1.address)).to.equal(100);\n  });\n});\n```\n\n### 4. Testing Reverts\n\n**Foundry:**\n```solidity\nfunction test_RevertWhen_InsufficientBalance() public {\n    vm.expectRevert(\"Insufficient balance\");\n    myContract.withdraw(1000);\n}\n\nfunction test_RevertWhen_Unauthorized() public {\n    vm.prank(address(0xBEEF));\n    vm.expectRevert(\"Ownable: caller is not the owner\");\n    myContract.adminFunction();\n}\n\n// Custom error\nfunction test_RevertWhen_CustomError() public {\n    vm.expectRevert(MyContract.InsufficientBalance.selector);\n    myContract.withdraw(1000);\n}\n```\n\n**Hardhat (TypeScript):**\n```typescript\nimport { expect } from \"chai\";\n\nit(\"should revert when insufficient balance\", async function () {\n  await expect(myContract.withdraw(1000))\n    .to.be.revertedWith(\"Insufficient balance\");\n});\n\nit(\"should revert with custom error\", async function () {\n  await expect(myContract.withdraw(1000))\n    .to.be.revertedWithCustomError(myContract, \"InsufficientBalance\");\n});\n```\n\n### 5. Testing Events\n\n**Foundry:**\n```solidity\nfunction test_EmitsTransferEvent() public {\n    vm.expectEmit(true, true, false, true);\n    emit Transfer(user1, user2, 100);\n\n    vm.prank(user1);\n    token.transfer(user2, 100);\n}\n```\n\n**Hardhat (TypeScript):**\n```typescript\nimport { expect } from \"chai\";\n\nit(\"should emit Transfer event\", async function () {\n  await expect(token.transfer(addr1.address, 100))\n    .to.emit(token, \"Transfer\")\n    .withArgs(owner.address, addr1.address, 100);\n});\n```\n\n## Advanced Testing Techniques\n\n### Fuzz Testing\n\n**Purpose:** Test with random inputs to find edge cases\n\n**Foundry:**\n```solidity\nfunction testFuzz_Transfer(address to, uint256 amount) public {\n    // Foundry will call this with random values\n    vm.assume(to != address(0));\n    vm.assume(amount <= type(uint256).max);\n\n    deal(address(token), user, amount);\n\n    vm.prank(user);\n    if (amount <= token.balanceOf(user)) {\n        token.transfer(to, amount);\n        assertEq(token.balanceOf(to), amount);\n    }\n}\n\n// Configure fuzzing\n/// forge-config: default.fuzz.runs = 1000\n/// forge-config: default.fuzz.max-test-rejects = 100000\n```\n\n**Hardhat (with Echidna):**\n```solidity\ncontract EchidnaTest is MyContract {\n    function echidna_balance_never_negative() public view returns (bool) {\n        return balances[msg.sender] >= 0;\n    }\n}\n```\n\n### Invariant Testing\n\n**Purpose:** Properties that should always hold true\n\n**Foundry:**\n```solidity\ncontract InvariantTest is Test {\n    MyContract public myContract;\n    Handler public handler;\n\n    function setUp() public {\n        myContract = new MyContract();\n        handler = new Handler(myContract);\n\n        targetContract(address(handler));\n    }\n\n    function invariant_TotalSupplyEqualsSumOfBalances() public {\n        assertEq(\n            myContract.totalSupply(),\n            handler.sumOfBalances()\n        );\n    }\n\n    function invariant_BalancesNeverExceedSupply() public {\n        assertTrue(handler.maxBalance() <= myContract.totalSupply());\n    }\n}\n\n// Handler contract for invariant testing\ncontract Handler {\n    MyContract public myContract;\n    uint256 public sumOfBalances;\n\n    constructor(MyContract _myContract) {\n        myContract = _myContract;\n    }\n\n    function transfer(address to, uint256 amount) public {\n        // Bounded random actions\n        amount = bound(amount, 0, myContract.balanceOf(msg.sender));\n        myContract.transfer(to, amount);\n    }\n}\n```\n\n### Property-Based Testing\n\n**Example Properties:**\n```solidity\n// Sum of parts equals whole\nfunction invariant_SumEqualsTotal() public {\n    uint256 sum = 0;\n    for (uint i = 0; i < holders.length; i++) {\n        sum += balances[holders[i]];\n    }\n    assertEq(sum, totalSupply);\n}\n\n// Operation reversibility\nfunction test_DepositWithdrawIdentity(uint256 amount) public {\n    uint256 balanceBefore = user.balance;\n\n    vm.prank(user);\n    vault.deposit{value: amount}();\n\n    vm.prank(user);\n    vault.withdraw(amount);\n\n    assertEq(user.balance, balanceBefore);\n}\n\n// Monotonic properties\nfunction test_BalanceNeverDecreases() public {\n    uint256 balanceBefore = token.balanceOf(user);\n\n    // Some operation that should only increase balance\n    token.mint(user, 100);\n\n    assertTrue(token.balanceOf(user) >= balanceBefore);\n}\n```\n\n## Common Test Scenarios\n\n### Testing Access Control\n\n```solidity\nfunction test_OnlyOwnerCanMint() public {\n    vm.prank(owner);\n    token.mint(user, 100);  // Should succeed\n    assertEq(token.balanceOf(user), 100);\n}\n\nfunction test_RevertWhen_NonOwnerMints() public {\n    vm.prank(user);\n    vm.expectRevert(\"Ownable: caller is not the owner\");\n    token.mint(user, 100);\n}\n\nfunction test_OwnershipTransfer() public {\n    address newOwner = address(0xBEEF);\n\n    vm.prank(owner);\n    token.transferOwnership(newOwner);\n\n    assertEq(token.owner(), newOwner);\n\n    // New owner can now mint\n    vm.prank(newOwner);\n    token.mint(user, 100);\n    assertEq(token.balanceOf(user), 100);\n}\n```\n\n### Testing Pausable Contracts\n\n```solidity\nfunction test_PauseStopsTransfers() public {\n    // Setup\n    deal(address(token), user, 1000);\n\n    // Pause\n    vm.prank(owner);\n    token.pause();\n\n    // Try transfer\n    vm.prank(user);\n    vm.expectRevert(\"Pausable: paused\");\n    token.transfer(address(0xBEEF), 100);\n}\n\nfunction test_UnpauseRestoresTransfers() public {\n    deal(address(token), user, 1000);\n\n    vm.prank(owner);\n    token.pause();\n\n    vm.prank(owner);\n    token.unpause();\n\n    // Transfer should work now\n    vm.prank(user);\n    token.transfer(address(0xBEEF), 100);\n    assertEq(token.balanceOf(address(0xBEEF)), 100);\n}\n```\n\n### Testing Reentrancy Protection\n\n```solidity\ncontract Attacker {\n    MyContract public target;\n    uint256 public attackCount;\n\n    constructor(MyContract _target) {\n        target = _target;\n    }\n\n    function attack() public payable {\n        target.deposit{value: msg.value}();\n        target.withdraw(msg.value);\n    }\n\n    receive() external payable {\n        if (attackCount < 3) {\n            attackCount++;\n            target.withdraw(msg.value);\n        }\n    }\n}\n\nfunction test_ReentrancyProtection() public {\n    Attacker attacker = new Attacker(myContract);\n\n    vm.deal(address(attacker), 1 ether);\n\n    vm.expectRevert(\"ReentrancyGuard: reentrant call\");\n    attacker.attack{value: 1 ether}();\n}\n```\n\n### Testing Upgradeable Contracts\n\n```solidity\nfunction test_UpgradePreservesStorage() public {\n    // Deploy V1\n    MyContractV1 v1 = new MyContractV1();\n    v1.initialize(owner);\n    v1.setValue(42);\n\n    // Deploy V2\n    MyContractV2 v2 = new MyContractV2();\n\n    // Upgrade\n    vm.prank(owner);\n    // Simulate upgrade (depends on proxy pattern)\n\n    // Verify storage preserved\n    assertEq(v2.value(), 42);\n}\n```\n\n## Cheatcodes (Foundry)\n\n### Time Manipulation\n\n```solidity\n// Set block timestamp\nvm.warp(block.timestamp + 1 days);\n\n// Set block number\nvm.roll(block.number + 100);\n\n// Skip time\nskip(1 days);\n\n// Rewind time\nrewind(1 hours);\n```\n\n### Account Manipulation\n\n```solidity\n// Set msg.sender for next call\nvm.prank(user);\n\n// Set msg.sender for all subsequent calls\nvm.startPrank(user);\nvm.stopPrank();\n\n// Create labeled address\naddress user = makeAddr(\"user\");\n\n// Give ETH to address\nvm.deal(user, 100 ether);\n\n// Set token balance\ndeal(address(token), user, 1000);\n```\n\n### Call Manipulation\n\n```solidity\n// Expect revert\nvm.expectRevert(\"Error message\");\n\n// Expect emit\nvm.expectEmit(true, true, false, true);\n\n// Mock calls\nvm.mockCall(\n    address(token),\n    abi.encodeWithSelector(token.balanceOf.selector, user),\n    abi.encode(1000)\n);\n```\n\n### State Snapshots\n\n```solidity\n// Take snapshot\nuint256 snapshot = vm.snapshot();\n\n// Revert to snapshot\nvm.revertTo(snapshot);\n```\n\n## Test Coverage\n\n### Measuring Coverage\n\n**Foundry:**\n```bash\n# Generate coverage report\nforge coverage\n\n# Generate detailed report\nforge coverage --report lcov\n\n# Generate HTML report\ngenhtml lcov.info --output-directory coverage\n\n# View specific file\nforge coverage --report debug > coverage.txt\n```\n\n**Hardhat:**\n```bash\n# Generate coverage\nnpx hardhat coverage\n\n# Coverage stored in coverage/index.html\n```\n\n### Coverage Goals\n\n- **Line Coverage:** >95%\n- **Branch Coverage:** >90%\n- **Function Coverage:** 100%\n- **Statement Coverage:** >95%\n\n**Focus on:**\n- All public/external functions tested\n- All access control paths\n- All error conditions\n- Edge cases (0, max values)\n- Integration scenarios\n\n## Testing Best Practices\n\n### 1. Test Naming\n\n**Good:**\n```solidity\nfunction test_RevertWhen_WithdrawWithInsufficientBalance() public {}\nfunction test_TransferUpdatesBalances() public {}\nfunction testFuzz_CannotOverflowTotalSupply(uint256 amount) public {}\n```\n\n**Bad:**\n```solidity\nfunction test1() public {}\nfunction testTransfer() public {}  // Too generic\nfunction test_withdraw() public {}  // Doesn't describe outcome\n```\n\n### 2. One Assert Per Concept\n\n```solidity\n// âœ… Good: Clear what's being tested\nfunction test_Transfer_UpdatesSenderBalance() public {\n    uint256 balanceBefore = token.balanceOf(sender);\n    token.transfer(recipient, 100);\n    assertEq(token.balanceOf(sender), balanceBefore - 100);\n}\n\nfunction test_Transfer_UpdatesRecipientBalance() public {\n    uint256 balanceBefore = token.balanceOf(recipient);\n    token.transfer(recipient, 100);\n    assertEq(token.balanceOf(recipient), balanceBefore + 100);\n}\n```\n\n### 3. Test Independence\n\n```solidity\n// âœ… Good: Each test is independent\nfunction test_Scenario1() public {\n    uint256 snapshot = vm.snapshot();\n    // Test logic\n    vm.revertTo(snapshot);\n}\n\nfunction test_Scenario2() public {\n    // Fresh state from setUp()\n}\n```\n\n### 4. Meaningful Test Data\n\n```solidity\n// âŒ Bad: Magic numbers\nfunction test_Transfer() public {\n    token.transfer(address(0x123), 42);\n}\n\n// âœ… Good: Named constants\nfunction test_Transfer() public {\n    address recipient = makeAddr(\"recipient\");\n    uint256 transferAmount = 100 * 10**18;  // 100 tokens\n    token.transfer(recipient, transferAmount);\n}\n```\n\n### 5. Test Edge Cases\n\n```solidity\nfunction test_TransferZeroAmount() public {}\nfunction test_TransferMaxAmount() public {}\nfunction test_TransferToZeroAddress() public {}\nfunction test_TransferToSelf() public {}\nfunction test_TransferWithNoBalance() public {}\n```\n\n## Integration Testing\n\n### Cross-Contract Interactions\n\n```solidity\ncontract IntegrationTest is Test {\n    Token public token;\n    Vault public vault;\n    Oracle public oracle;\n\n    function setUp() public {\n        token = new Token();\n        oracle = new Oracle();\n        vault = new Vault(address(token), address(oracle));\n    }\n\n    function test_DepositAndEarn() public {\n        // Setup\n        deal(address(token), user, 1000);\n\n        vm.startPrank(user);\n\n        // Approve\n        token.approve(address(vault), 1000);\n\n        // Deposit\n        vault.deposit(1000);\n\n        // Warp time\n        vm.warp(block.timestamp + 30 days);\n\n        // Check earnings\n        uint256 earned = vault.earned(user);\n        assertTrue(earned > 0);\n\n        vm.stopPrank();\n    }\n}\n```\n\n### Forking Mainnet\n\n**Foundry:**\n```solidity\ncontract ForkTest is Test {\n    function setUp() public {\n        vm.createSelectFork(vm.envString(\"MAINNET_RPC_URL\"));\n    }\n\n    function test_InteractWithUniswap() public {\n        IUniswapV2Router router = IUniswapV2Router(UNISWAP_ROUTER);\n        // Test against real mainnet contracts\n    }\n}\n```\n\n**Hardhat (TypeScript):**\n```typescript\nimport { ethers, network } from \"hardhat\";\nimport { IUniswapV2Router } from \"../typechain-types\";\n\ndescribe(\"Fork Test\", function () {\n  before(async function () {\n    await network.provider.request({\n      method: \"hardhat_reset\",\n      params: [{\n        forking: {\n          jsonRpcUrl: process.env.MAINNET_RPC_URL,\n          blockNumber: 15000000\n        }\n      }]\n    });\n  });\n\n  it(\"should interact with Uniswap\", async function () {\n    const ROUTER_ADDRESS: string = \"0x...\";\n    const router: IUniswapV2Router = await ethers.getContractAt(\n      \"IUniswapV2Router\",\n      ROUTER_ADDRESS\n    );\n    // Test\n  });\n});\n```\n\n## Quick Reference\n\n### Foundry Commands (Solidity Tests)\n\n```bash\n# Run tests\nforge test\n\n# Run specific test\nforge test --match-test test_Transfer\n\n# Run with gas report\nforge test --gas-report\n\n# Run with coverage\nforge coverage\n\n# Run with verbosity\nforge test -vvvv\n\n# Fuzz testing\nforge test --fuzz-runs 10000\n```\n\n### Hardhat Commands (TypeScript Tests)\n\n```bash\n# Run tests\nnpx hardhat test\n\n# Run specific test\nnpx hardhat test test/MyContract.test.ts\n\n# With gas reporter\nREPORT_GAS=true npx hardhat test\n\n# With coverage\nnpx hardhat coverage\n```\n\n---\n\n**Remember:** Good tests are the first line of defense against bugs and vulnerabilities. Aim for comprehensive coverage, but focus on meaningful test scenarios over arbitrary coverage percentages."
              },
              {
                "name": "upgrade-safety",
                "description": "Safe upgrade practices for upgradeable smart contracts. Use when planning or executing contract upgrades.",
                "path": "tech-stacks/solidity/skills/upgrade-safety/SKILL.md",
                "frontmatter": {
                  "name": "upgrade-safety",
                  "description": "Safe upgrade practices for upgradeable smart contracts. Use when planning or executing contract upgrades."
                },
                "content": "# Upgrade Safety Skill\n\nReference skill for safe upgrade practices. Detailed upgrade security checklist is in the `security-audit` skill.\n\n## When to Use\n\nUse this skill when:\n- Planning contract upgrades\n- Executing upgrades\n- Reviewing upgrade implementations\n- Testing upgrade scenarios\n\n## Related Skills\n\nFor comprehensive upgrade security, see:\n- **security-audit**: `checklists/upgrade-checklist.md` - Complete upgrade security checklist\n- **proxy-patterns**: Proxy pattern selection and implementation\n- **contract-patterns**: `patterns/upgradeable-contracts.md` and `examples/upgradeable-example.sol`\n\n## Upgrade Safety Rules\n\n### Storage Layout Safety\n\n**Never:**\n- Delete state variables\n- Change variable types\n- Change variable order\n- Reorder inherited contracts\n\n**Always:**\n- Add new variables at the end\n- Use storage gaps\n- Document storage layout\n- Test storage compatibility\n\n**Example:**\n```solidity\n// V1\ncontract V1 {\n    uint256 public value;\n    address public owner;\n    uint256[48] private __gap;  // Reserve space\n}\n\n// V2 - âœ… Safe\ncontract V2 {\n    uint256 public value;\n    address public owner;\n    uint256 public newValue;    // Added at end\n    uint256[47] private __gap;  // Reduced gap\n}\n```\n\n### Initializer Safety\n\n**Always:**\n- Use `_disableInitializers()` in constructor\n- Use `initializer` modifier for init function\n- Use `reinitializer(version)` for upgrade init\n- Call parent initializers\n\n**Example:**\n```solidity\ncontract MyContract is Initializable, UUPSUpgradeable {\n    constructor() {\n        _disableInitializers();  // âœ… Required\n    }\n\n    function initialize() public initializer {\n        __UUPSUpgradeable_init();\n    }\n\n    function initializeV2() public reinitializer(2) {\n        // V2 initialization\n    }\n}\n```\n\n### Authorization Safety\n\n**UUPS:**\n- Always keep `_authorizeUpgrade` function\n- Use appropriate access control\n- Consider timelock for critical upgrades\n\n```solidity\nfunction _authorizeUpgrade(address) internal override onlyOwner {}\n```\n\n**Never remove this function in UUPS upgrades!**\n\n## Upgrade Process\n\n### Pre-Upgrade Checklist\n\n- [ ] Storage layout verified compatible\n- [ ] New implementation tested\n- [ ] Initializers properly protected\n- [ ] Authorization functions present\n- [ ] Tests passing\n- [ ] Storage verification tool run\n- [ ] Deployment addresses verified\n- [ ] Backup plan prepared\n\n### Verification Tools\n\n**Foundry:**\n```bash\n# Check storage layout\nforge inspect MyContract storage-layout\n\n# Compare layouts\nforge inspect MyContractV1 storage-layout > v1.json\nforge inspect MyContractV2 storage-layout > v2.json\ndiff v1.json v2.json\n```\n\n**Hardhat:**\n```bash\n# Validate upgrade\nnpx hardhat verify-upgrade <PROXY> <NEW_IMPL>\n```\n\n**Slither:**\n```bash\n# Check upgradeability\nslither-check-upgradeability . MyContract\n```\n\n### During Upgrade\n\n1. **Pause if applicable**\n2. **Deploy new implementation**\n3. **Verify implementation**\n4. **Execute upgrade**\n5. **Verify proxy points to new implementation**\n6. **Test critical functions**\n7. **Unpause if paused**\n\n### Post-Upgrade\n\n- [ ] Verify implementation address\n- [ ] Test all critical functions\n- [ ] Monitor for issues\n- [ ] Document changes\n- [ ] Update documentation\n\n## Testing Upgrades\n\n### Storage Preservation Test\n\n```solidity\nfunction test_UpgradePreservesStorage() public {\n    // Deploy V1\n    MyContractV1 v1 = new MyContractV1();\n    v1.initialize(owner);\n    v1.setValue(42);\n\n    // Deploy V2 implementation\n    MyContractV2 implementation = new MyContractV2();\n\n    // Simulate upgrade (actual upgrade depends on proxy pattern)\n    // ...\n\n    // Cast to V2 interface\n    MyContractV2 v2 = MyContractV2(address(v1));\n\n    // Verify storage preserved\n    assertEq(v2.getValue(), 42);\n    assertEq(v2.owner(), owner);\n}\n```\n\n### Fork Testing\n\n```solidity\nfunction test_UpgradeOnFork() public {\n    // Fork mainnet\n    vm.createSelectFork(vm.envString(\"MAINNET_RPC_URL\"));\n\n    // Get existing proxy\n    MyContract proxy = MyContract(PROXY_ADDRESS);\n\n    // Deploy new implementation\n    MyContract newImpl = new MyContract();\n\n    // Upgrade\n    vm.prank(OWNER);\n    proxy.upgradeTo(address(newImpl));\n\n    // Verify\n    assertEq(proxy.version(), 2);\n}\n```\n\n## Common Upgrade Mistakes\n\n### âŒ 1. Storage Collision\n\n```solidity\n// V1\ncontract V1 {\n    uint256 public value;\n}\n\n// V2 - âŒ Wrong!\ncontract V2 {\n    address public owner;   // Overwrites value!\n    uint256 public value;\n}\n```\n\n### âŒ 2. Uninitialized Implementation\n\n```solidity\n// âŒ Missing constructor protection\ncontract MyContract {\n    function initialize() public initializer {\n        // Attacker can initialize implementation!\n    }\n}\n```\n\n### âŒ 3. Removed Authorization\n\n```solidity\n// V1\ncontract V1 is UUPSUpgradeable {\n    function _authorizeUpgrade(address) internal override onlyOwner {}\n}\n\n// V2 - âŒ Removed authorization!\ncontract V2 is UUPSUpgradeable {\n    // Missing _authorizeUpgrade - contract is now non-upgradeable!\n}\n```\n\n### âŒ 4. Selfdestruct in Implementation\n\n```solidity\n// âŒ Never use selfdestruct in upgradeable contracts\nfunction destroy() public {\n    selfdestruct(payable(owner));  // Kills implementation for all proxies!\n}\n```\n\n## Security Considerations\n\n1. **Multi-sig for upgrades** - Never use single key in production\n2. **Timelock delays** - Give users time to exit before upgrade\n3. **Pause before upgrade** - Prevent state changes during upgrade\n4. **Test on testnet** - Always test upgrades before mainnet\n5. **Emergency procedures** - Have rollback plan ready\n\n## Best Practices\n\n1. **Always use OpenZeppelin upgradeable contracts**\n2. **Test upgrades on fork before mainnet**\n3. **Use storage gaps (50 slots) in base contracts**\n4. **Document storage layout changes**\n5. **Never remove _authorizeUpgrade in UUPS**\n6. **Use reinitializer for upgrade initialization**\n7. **Verify storage compatibility with tools**\n8. **Multi-sig + timelock for production**\n9. **Monitor after upgrade**\n10. **Have rollback plan**\n\n## Tools\n\n| Tool | Purpose | Command |\n|------|---------|---------|\n| Foundry | Storage layout | `forge inspect Contract storage-layout` |\n| Hardhat | Verify upgrade | `npx hardhat verify-upgrade` |\n| Slither | Check upgrade safety | `slither-check-upgradeability` |\n| OpenZeppelin Defender | Upgrade automation | Web interface |\n\n## Related Documentation\n\n- **Detailed checklist:** `security-audit/checklists/upgrade-checklist.md`\n- **Proxy patterns:** `proxy-patterns/SKILL.md`\n- **Implementation examples:** `contract-patterns/patterns/upgradeable-contracts.md`\n- **Example contract:** `contract-patterns/examples/upgradeable-example.sol`\n\n---\n\n**Note:** This is a reference skill. For the complete upgrade security checklist, see `security-audit/checklists/upgrade-checklist.md`."
              },
              {
                "name": "vulnerability-patterns",
                "description": "Common vulnerability patterns in Solidity and how to prevent them. Use when reviewing contracts for security issues or learning about common exploits.",
                "path": "tech-stacks/solidity/skills/vulnerability-patterns/SKILL.md",
                "frontmatter": {
                  "name": "vulnerability-patterns",
                  "description": "Common vulnerability patterns in Solidity and how to prevent them. Use when reviewing contracts for security issues or learning about common exploits."
                },
                "content": "# Vulnerability Patterns Skill\n\nReference skill for common Solidity vulnerability patterns. This skill references detailed checklists in the `security-audit` skill.\n\n## When to Use\n\nUse this skill when:\n- Learning about common vulnerabilities\n- Reviewing code for security issues\n- Understanding exploit techniques\n- Preventing known vulnerabilities\n\n## Related Skills\n\nFor comprehensive security auditing, see:\n- **security-audit**: Complete audit methodology and checklists\n- **testing-patterns**: Security testing approaches\n- **contract-patterns**: Secure implementation patterns\n\n## Common Vulnerability Categories\n\n### Critical Vulnerabilities\n\n1. **Reentrancy** - See `security-audit/checklists/common-vulnerabilities.md`\n   - Classic reentrancy (same function)\n   - Cross-function reentrancy\n   - Read-only reentrancy\n\n2. **Access Control** - See `security-audit/checklists/access-control-checklist.md`\n   - Missing access modifiers\n   - Incorrect authorization\n   - Privilege escalation\n\n3. **Integer Issues** - See `security-audit/checklists/common-vulnerabilities.md`\n   - Overflow/underflow (pre-0.8)\n   - Division by zero\n   - Precision loss\n\n4. **Oracle Manipulation** - See `security-audit/checklists/defi-checklist.md`\n   - Flash loan attacks\n   - Price manipulation\n   - Stale price data\n\n### High Severity\n\n1. **Unchecked External Calls**\n2. **Delegatecall Injection**\n3. **Signature Replay**\n4. **Front-Running**\n5. **Denial of Service**\n\n### Medium Severity\n\n1. **Timestamp Dependence**\n2. **Tx.origin Authentication**\n3. **Floating Pragma**\n4. **Uninitialized Storage**\n\n## Quick Vulnerability Reference\n\n### Reentrancy\n\n```solidity\n// âŒ Vulnerable\nfunction withdraw() public {\n    uint amount = balances[msg.sender];\n    (bool success, ) = msg.sender.call{value: amount}(\"\");\n    balances[msg.sender] = 0;  // Too late!\n}\n\n// âœ… Secure\nfunction withdraw() public nonReentrant {\n    uint amount = balances[msg.sender];\n    balances[msg.sender] = 0;  // Update first\n    (bool success, ) = msg.sender.call{value: amount}(\"\");\n    require(success);\n}\n```\n\n### Access Control\n\n```solidity\n// âŒ Missing modifier\nfunction mint(address to, uint amount) public {\n    _mint(to, amount);\n}\n\n// âœ… Protected\nfunction mint(address to, uint amount) public onlyOwner {\n    _mint(to, amount);\n}\n```\n\n### Integer Overflow\n\n```solidity\n// âŒ Pre-0.8 vulnerable\npragma solidity 0.7.6;\nuint256 balance = type(uint256).max;\nbalance += 1;  // Overflows silently\n\n// âœ… Solidity 0.8+ safe\npragma solidity 0.8.30;\nuint256 balance = type(uint256).max;\nbalance += 1;  // Reverts\n```\n\n## Testing for Vulnerabilities\n\n### Reentrancy Test\n\n```solidity\ncontract Attacker {\n    Target public target;\n\n    function attack() external payable {\n        target.deposit{value: msg.value}();\n        target.withdraw();\n    }\n\n    receive() external payable {\n        if (address(target).balance > 0) {\n            target.withdraw();\n        }\n    }\n}\n\nfunction test_ReentrancyAttack() public {\n    vm.expectRevert();  // Should revert\n    attacker.attack{value: 1 ether}();\n}\n```\n\n### Access Control Test\n\n```solidity\nfunction test_RevertWhen_UnauthorizedMint() public {\n    vm.prank(attacker);\n    vm.expectRevert(\"Ownable: caller is not the owner\");\n    token.mint(attacker, 1000);\n}\n```\n\n## Resources\n\n**Detailed Vulnerability Information:**\n- [SWC Registry](https://swcregistry.io/) - Smart Contract Weakness Classification\n- [ConsenSys Best Practices](https://consensys.github.io/smart-contract-best-practices/)\n- [Rekt News](https://rekt.news/) - DeFi exploit analysis\n\n**Related Skills:**\n- `security-audit/checklists/common-vulnerabilities.md` - Complete vulnerability checklist\n- `security-audit/checklists/defi-checklist.md` - DeFi-specific vulnerabilities\n- `security-audit/checklists/upgrade-checklist.md` - Upgrade-related issues\n\n---\n\n**Note:** This is a reference skill. For comprehensive security auditing, use the `security-audit` skill which contains detailed checklists and methodologies."
              }
            ]
          },
          {
            "name": "js",
            "description": "Base JavaScript/TypeScript development with strict TypeScript, Biome/ESLint, Vitest testing, and modern ESM patterns",
            "source": "./tech-stacks/js/common",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add IvanTorresEdge/molcajete.ai",
              "/plugin install js@Molcajete.ai"
            ],
            "signals": {
              "stars": 0,
              "forks": 1,
              "pushed_at": "2026-01-06T21:16:55Z",
              "created_at": "2025-11-13T04:11:22Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/audit-fix",
                "description": "Auto-fix vulnerabilities",
                "path": "tech-stacks/js/common/commands/audit-fix.md",
                "frontmatter": {
                  "description": "Auto-fix vulnerabilities",
                  "model": "haiku"
                },
                "content": "# Auto-Fix Vulnerabilities\n\nAutomatically fix known vulnerabilities when safe to do so.\n\nExecute the following command:\n\n```bash\nnpm audit fix\n```\n\n**For more aggressive fixes (may include breaking changes):**\n```bash\nnpm audit fix --force\n```\n\n**What it does:**\n- Updates vulnerable packages to patched versions\n- Respects semver constraints by default\n- `--force` flag allows major version updates\n\n**After fixing:**\n1. Run tests: `npm test`\n2. Verify application works correctly\n3. Review any breaking changes\n4. Commit the updated `package-lock.json`\n\n**Manual fixes may be required for:**\n- Vulnerabilities with no patch available\n- Breaking changes that need code updates\n- Transitive dependencies\n\nReference the **dependency-security** skill."
              },
              {
                "name": "/audit",
                "description": "Security audit",
                "path": "tech-stacks/js/common/commands/audit.md",
                "frontmatter": {
                  "description": "Security audit"
                },
                "content": "# Security Audit\n\nScan dependencies for known vulnerabilities.\n\nUse the Task tool to launch the **security** agent with instructions:\n\n1. Run npm audit:\n   ```bash\n   npm audit\n   ```\n\n2. If Snyk is available, run:\n   ```bash\n   npx snyk test\n   ```\n\n3. If Socket.dev CLI is available, run:\n   ```bash\n   npx @socketsecurity/cli scan\n   ```\n\n4. Compile results into a report:\n   - Number of vulnerabilities by severity\n   - Affected packages\n   - Available fixes\n   - Recommended actions\n\n**Severity Levels:**\n- Critical: Immediate action required\n- High: Fix within 24 hours\n- Moderate: Fix within 1 week\n- Low: Fix when convenient\n\n**Quality Requirements:**\n- No critical vulnerabilities\n- No high vulnerabilities (or documented exceptions)\n\nReference the **dependency-security** skill."
              },
              {
                "name": "/build",
                "description": "Build project",
                "path": "tech-stacks/js/common/commands/build.md",
                "frontmatter": {
                  "description": "Build project"
                },
                "content": "# Build Project\n\nCompile TypeScript and bundle the project for production.\n\nUse the Task tool to launch the **quality-guardian** agent with instructions:\n\n1. Run type-check first:\n   ```bash\n   npm run type-check\n   ```\n2. If type-check passes, run build:\n   ```bash\n   npm run build\n   ```\n3. Verify build output exists in `dist/` directory\n4. Report build success or any errors\n\n**Typical build commands:**\n- Library: `tsup src/index.ts --format esm,cjs --dts`\n- App: Framework-specific build command\n\n**Quality Requirements:**\n- Type-check must pass with zero errors\n- Build must complete successfully\n- Output files must be generated\n\nReference the **build-tools** skill."
              },
              {
                "name": "/dev",
                "description": "Run development environment",
                "path": "tech-stacks/js/common/commands/dev.md",
                "frontmatter": {
                  "description": "Run development environment",
                  "model": "haiku"
                },
                "content": "# Run Development Environment\n\nStart the development server or watcher.\n\nExecute the following command:\n\n```bash\nnpm run dev\n```\n\nThis typically runs:\n- `tsx watch src/index.ts` for libraries/CLIs\n- A framework-specific dev server for apps\n\n**Notes:**\n- Development mode enables hot reloading\n- TypeScript errors are shown in real-time\n- Press Ctrl+C to stop the server"
              },
              {
                "name": "/format-check",
                "description": "Check formatting",
                "path": "tech-stacks/js/common/commands/format-check.md",
                "frontmatter": {
                  "description": "Check formatting",
                  "model": "haiku"
                },
                "content": "# Check Formatting\n\nVerify all files are properly formatted without making changes.\n\nExecute the following command:\n\n```bash\nnpm run format:check\n```\n\n**For Biome:**\n```bash\nbiome format .\n```\n\n**For Prettier:**\n```bash\nprettier --check .\n```\n\n**Expected Output:**\n- Success: All files formatted correctly (exit code 0)\n- Failure: List of files needing formatting\n\n**Quality Requirements:**\n- All files must be properly formatted\n- Run `npm run format` to fix any issues\n\nReference the **biome-setup** or **eslint-flat-config** skill based on project configuration."
              },
              {
                "name": "/format",
                "description": "Format code",
                "path": "tech-stacks/js/common/commands/format.md",
                "frontmatter": {
                  "description": "Format code",
                  "model": "haiku"
                },
                "content": "# Format Code\n\nApply consistent formatting to all source files.\n\nExecute the following command:\n\n```bash\nnpm run format\n```\n\n**For Biome:**\n```bash\nbiome format --write .\n```\n\n**For Prettier:**\n```bash\nprettier --write .\n```\n\n**Files Formatted:**\n- `*.ts`, `*.tsx` - TypeScript files\n- `*.js`, `*.jsx` - JavaScript files\n- `*.json` - JSON files\n- `*.md` - Markdown files\n\nReference the **biome-setup** or **eslint-flat-config** skill based on project configuration."
              },
              {
                "name": "/init",
                "description": "Initialize TypeScript project with strict type checking configuration",
                "path": "tech-stacks/js/common/commands/init.md",
                "frontmatter": {
                  "description": "Initialize TypeScript project with strict type checking configuration"
                },
                "content": "# Initialize TypeScript Project\n\nInitialize a new TypeScript project with strict configuration and modern tooling.\n\nUse the Task tool to launch the **developer** agent with instructions:\n\n1. Ask user for project details using AskUserQuestion tool:\n   - Project name\n   - Project type (library, cli, service)\n   - Linter choice (Biome or ESLint + Prettier)\n   - Test framework (Vitest - default)\n   - Package manager (npm, pnpm, yarn)\n\n2. Create project structure:\n   ```\n   project/\n   â”œâ”€â”€ src/\n   â”‚   â”œâ”€â”€ index.ts\n   â”‚   â””â”€â”€ __tests__/\n   â”‚       â””â”€â”€ index.test.ts\n   â”œâ”€â”€ dist/              # Build output (gitignored)\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ package.json\n   â”œâ”€â”€ .gitignore\n   â”œâ”€â”€ .editorconfig\n   â””â”€â”€ README.md\n   ```\n\n3. Create `tsconfig.json` following **typescript-strict-config** skill:\n   - All strict flags enabled\n   - No implicit any\n   - No unchecked indexed access\n   - Target: ES2022, Module: ESNext\n\n4. Create `package.json` with scripts:\n   ```json\n   {\n     \"type\": \"module\",\n     \"scripts\": {\n       \"dev\": \"tsx watch src/index.ts\",\n       \"build\": \"tsup src/index.ts --format esm,cjs --dts\",\n       \"type-check\": \"tsc --noEmit\",\n       \"lint\": \"biome check .\",\n       \"format\": \"biome format --write .\",\n       \"test\": \"vitest run\",\n       \"test:watch\": \"vitest\",\n       \"test:coverage\": \"vitest run --coverage\",\n       \"validate\": \"npm run type-check && npm run lint && npm test\"\n     }\n   }\n   ```\n\n5. Create linter configuration:\n   - If Biome: Create `biome.json` with strict rules\n   - If ESLint: Create `eslint.config.ts` (flat config) + `.prettierrc`\n\n6. Create `vitest.config.ts` following **vitest-configuration** skill\n\n7. Create `.gitignore`:\n   ```\n   node_modules/\n   dist/\n   coverage/\n   .env\n   .env.local\n   *.log\n   .DS_Store\n   ```\n\n8. Create `.editorconfig`:\n   ```ini\n   root = true\n\n   [*]\n   charset = utf-8\n   end_of_line = lf\n   indent_style = space\n   indent_size = 2\n   insert_final_newline = true\n   trim_trailing_whitespace = true\n   ```\n\n9. Create `README.md` with:\n   - Project description\n   - Installation instructions\n   - Development commands\n   - Testing instructions\n\n10. Create starter `src/index.ts`:\n    ```typescript\n    export function greet(name: string): string {\n      return `Hello, ${name}!`;\n    }\n    ```\n\n11. Create starter `src/__tests__/index.test.ts`:\n    ```typescript\n    import { describe, it, expect } from 'vitest';\n    import { greet } from '../index';\n\n    describe('greet', () => {\n      it('should greet by name', () => {\n        expect(greet('World')).toBe('Hello, World!');\n      });\n    });\n    ```\n\n12. Initialize package manager:\n    - Run `npm install` (or pnpm/yarn)\n    - Install dependencies (TypeScript, Vitest, linter, etc.)\n\n13. Initialize git repository:\n    - Run `git init`\n    - Create initial commit\n\n14. Run validation:\n    - `npm run type-check` - Must pass with zero errors\n    - `npm run lint` - Must pass with zero warnings\n    - `npm test` - Must pass all tests\n\n15. Display next steps to user\n\n**Quality Requirements:**\n- All TypeScript strict flags enabled\n- Zero TypeScript errors or warnings\n- Zero linter warnings\n- All tests passing\n- NO `any` types allowed\n\nReference the **typescript-strict-config**, **eslint-flat-config**, **biome-setup**, and **vitest-configuration** skills."
              },
              {
                "name": "/install",
                "description": "Install and audit dependencies",
                "path": "tech-stacks/js/common/commands/install.md",
                "frontmatter": {
                  "description": "Install and audit dependencies"
                },
                "content": "# Install Dependencies\n\nInstall project dependencies and run security audit.\n\nUse the Task tool to launch the **security** agent with instructions:\n\n1. Check if `package.json` exists\n2. Detect package manager (npm, pnpm, yarn) from lock file\n3. Install dependencies:\n   ```bash\n   npm install\n   # or\n   pnpm install\n   # or\n   yarn install\n   ```\n4. Run security audit:\n   ```bash\n   npm audit\n   ```\n5. Report any vulnerabilities found\n6. Suggest fixes for any high/critical vulnerabilities\n\n**Quality Requirements:**\n- All dependencies installed successfully\n- No high or critical vulnerabilities (or documented exceptions)\n\nReference the **dependency-security** skill."
              },
              {
                "name": "/license-check",
                "description": "Check dependency licenses",
                "path": "tech-stacks/js/common/commands/license-check.md",
                "frontmatter": {
                  "description": "Check dependency licenses"
                },
                "content": "# Check Dependency Licenses\n\nVerify all dependency licenses are compatible with the project.\n\nUse the Task tool to launch the **security** agent with instructions:\n\n1. Run license checker:\n   ```bash\n   npx license-checker --summary\n   ```\n\n2. Check for problematic licenses:\n   ```bash\n   npx license-checker --onlyAllow \"MIT;Apache-2.0;BSD-2-Clause;BSD-3-Clause;ISC;0BSD;Unlicense\"\n   ```\n\n3. Generate detailed report if issues found:\n   ```bash\n   npx license-checker --json > licenses.json\n   ```\n\n4. Report findings:\n   - List of all licenses used\n   - Any licenses requiring attention (GPL, LGPL, AGPL)\n   - Any unknown or missing licenses\n\n**Safe Licenses (Permissive):**\n- MIT\n- Apache-2.0\n- BSD-2-Clause\n- BSD-3-Clause\n- ISC\n- 0BSD\n- Unlicense\n\n**Requires Review (Copyleft):**\n- GPL-2.0, GPL-3.0\n- LGPL-2.1, LGPL-3.0\n- AGPL-3.0\n- MPL-2.0\n\nReference the **license-compliance** skill."
              },
              {
                "name": "/lint",
                "description": "Run linter",
                "path": "tech-stacks/js/common/commands/lint.md",
                "frontmatter": {
                  "description": "Run linter",
                  "model": "haiku"
                },
                "content": "# Run Linter\n\nCheck code for linting errors and style issues.\n\nExecute the following command:\n\n```bash\nnpm run lint\n```\n\n**For Biome:**\n```bash\nbiome check .\n```\n\n**For ESLint:**\n```bash\neslint .\n```\n\n**Quality Requirements:**\n- Zero linting errors\n- Zero linting warnings (warnings are treated as errors)\n\n**Auto-fix:**\n```bash\n# Biome\nbiome check --write .\n\n# ESLint\neslint --fix .\n```\n\nReference the **eslint-flat-config** or **biome-setup** skill based on project configuration."
              },
              {
                "name": "/pre-commit",
                "description": "Pre-commit quality gate",
                "path": "tech-stacks/js/common/commands/pre-commit.md",
                "frontmatter": {
                  "description": "Pre-commit quality gate"
                },
                "content": "# Pre-Commit Quality Gate\n\nRun quality checks on staged files before committing.\n\nUse the Task tool to launch the **quality-guardian** agent with instructions:\n\n1. Check if Husky is configured:\n   - Look for `.husky/` directory\n   - Look for `prepare` script in package.json\n\n2. If not configured, set up pre-commit hooks:\n   ```bash\n   npm install -D husky lint-staged\n   npx husky init\n   ```\n\n3. Configure lint-staged in `package.json`:\n   ```json\n   {\n     \"lint-staged\": {\n       \"*.{ts,tsx}\": [\n         \"biome check --write\",\n         \"biome format --write\"\n       ],\n       \"*.{json,md}\": [\n         \"biome format --write\"\n       ]\n     }\n   }\n   ```\n\n4. Create `.husky/pre-commit`:\n   ```bash\n   #!/usr/bin/env sh\n   . \"$(dirname -- \"$0\")/_/husky.sh\"\n\n   npx lint-staged\n   npm run type-check\n   ```\n\n5. Test the hook:\n   ```bash\n   git add .\n   git commit -m \"test commit\"\n   ```\n\n**What pre-commit checks:**\n- Lint staged files\n- Format staged files\n- Run type-check on entire project\n\n**Quality Requirements:**\n- All staged files must pass lint\n- All staged files must be formatted\n- Type-check must pass\n\nReference the **pre-commit-hooks** skill."
              },
              {
                "name": "/test-coverage",
                "description": "Generate coverage report",
                "path": "tech-stacks/js/common/commands/test-coverage.md",
                "frontmatter": {
                  "description": "Generate coverage report",
                  "model": "haiku"
                },
                "content": "# Generate Coverage Report\n\nRun tests and generate code coverage report.\n\nExecute the following command:\n\n```bash\nnpm run test:coverage\n```\n\nThis runs:\n```bash\nvitest run --coverage\n```\n\n**Coverage Output:**\n- Text summary in terminal\n- HTML report in `coverage/` directory\n- JSON report for CI integration\n\n**Coverage Thresholds (minimum 80%):**\n- Lines: 80%\n- Functions: 80%\n- Branches: 80%\n- Statements: 80%\n\n**View HTML Report:**\n```bash\nopen coverage/index.html\n```\n\n**Quality Requirements:**\n- All coverage thresholds must be met\n- No uncovered critical paths\n\nReference the **coverage-standards** skill."
              },
              {
                "name": "/test-ui",
                "description": "Open Vitest UI",
                "path": "tech-stacks/js/common/commands/test-ui.md",
                "frontmatter": {
                  "description": "Open Vitest UI",
                  "model": "haiku"
                },
                "content": "# Open Vitest UI\n\nLaunch the Vitest graphical user interface for interactive testing.\n\nExecute the following command:\n\n```bash\nnpm run test:ui\n```\n\nThis runs:\n```bash\nvitest --ui\n```\n\n**UI Features:**\n- Visual test explorer\n- Real-time test results\n- Filter and search tests\n- View test code and output\n- Re-run individual tests\n- Module dependency graph\n\n**Browser Access:**\nOpens automatically at `http://localhost:51204/__vitest__/`\n\nReference the **vitest-configuration** skill."
              },
              {
                "name": "/test-watch",
                "description": "Run tests in watch mode",
                "path": "tech-stacks/js/common/commands/test-watch.md",
                "frontmatter": {
                  "description": "Run tests in watch mode",
                  "model": "haiku"
                },
                "content": "# Run Tests in Watch Mode\n\nStart Vitest in watch mode for continuous testing during development.\n\nExecute the following command:\n\n```bash\nnpm run test:watch\n```\n\nThis runs:\n```bash\nvitest\n```\n\n**Watch Mode Features:**\n- Re-runs tests when files change\n- Only runs affected tests\n- Interactive filtering options\n- Press `q` to quit\n- Press `a` to run all tests\n- Press `f` to run only failed tests\n\nReference the **vitest-configuration** skill."
              },
              {
                "name": "/test",
                "description": "Run test suite",
                "path": "tech-stacks/js/common/commands/test.md",
                "frontmatter": {
                  "description": "Run test suite",
                  "model": "haiku"
                },
                "content": "# Run Test Suite\n\nExecute all tests using Vitest.\n\nExecute the following command:\n\n```bash\nnpm test\n```\n\nThis runs:\n```bash\nvitest run\n```\n\n**Expected Output:**\n- Test results with pass/fail counts\n- Any failing test details\n\n**Quality Requirements:**\n- All tests must pass\n- No skipped tests in CI\n\nReference the **testing-patterns** and **vitest-configuration** skills."
              },
              {
                "name": "/type-check",
                "description": "Run TypeScript compiler checks",
                "path": "tech-stacks/js/common/commands/type-check.md",
                "frontmatter": {
                  "description": "Run TypeScript compiler checks",
                  "model": "haiku"
                },
                "content": "# Run TypeScript Type Check\n\nCheck TypeScript types without emitting output.\n\nExecute the following command:\n\n```bash\nnpm run type-check\n```\n\nThis runs:\n```bash\ntsc --noEmit\n```\n\n**Expected Output:**\n- Success: No output (exit code 0)\n- Failure: TypeScript errors with file locations\n\n**Quality Requirements:**\n- Zero TypeScript errors\n- Zero TypeScript warnings\n- No `any` types (implicit or explicit)\n\nReference the **typescript-strict-config** skill."
              },
              {
                "name": "/validate",
                "description": "Run all quality checks",
                "path": "tech-stacks/js/common/commands/validate.md",
                "frontmatter": {
                  "description": "Run all quality checks"
                },
                "content": "# Run All Quality Checks\n\nExecute the full validation suite: type-check, lint, format-check, and tests.\n\nUse the Task tool to launch the **quality-guardian** agent with instructions:\n\n1. Run TypeScript type-check:\n   ```bash\n   npm run type-check\n   ```\n\n2. Run linter:\n   ```bash\n   npm run lint\n   ```\n\n3. Check formatting:\n   ```bash\n   npm run format:check\n   ```\n\n4. Run tests:\n   ```bash\n   npm test\n   ```\n\n5. Report overall status:\n   - âœ… All checks passed\n   - âŒ Which checks failed and why\n\n**Typical validate script:**\n```json\n{\n  \"scripts\": {\n    \"validate\": \"npm run type-check && npm run lint && npm run format:check && npm test\"\n  }\n}\n```\n\n**Quality Requirements:**\n- All four checks must pass\n- Zero errors, zero warnings\n- All tests passing\n\nReference the **code-quality-standards** skill."
              }
            ],
            "skills": [
              {
                "name": "biome-setup",
                "description": "Biome linter/formatter setup. Use when configuring Biome as an alternative to ESLint + Prettier.",
                "path": "tech-stacks/js/common/skills/biome-setup/SKILL.md",
                "frontmatter": {
                  "name": "biome-setup",
                  "description": "Biome linter/formatter setup. Use when configuring Biome as an alternative to ESLint + Prettier."
                },
                "content": "# Biome Setup Skill\n\nThis skill covers Biome configuration for TypeScript projects as an alternative to ESLint + Prettier.\n\n## When to Use\n\nUse this skill when:\n- Setting up a new project with modern tooling\n- Replacing ESLint + Prettier with a single tool\n- Need faster linting and formatting\n- Want simpler configuration\n\n## Core Principle\n\n**ONE TOOL, ZERO DEPENDENCIES** - Biome replaces both ESLint and Prettier with 10-100x better performance.\n\n## Installation\n\n```bash\nnpm install -D @biomejs/biome\n```\n\n## Basic Configuration\n\n### biome.json\n\n```json\n{\n  \"$schema\": \"https://biomejs.dev/schemas/1.9.0/schema.json\",\n  \"organizeImports\": {\n    \"enabled\": true\n  },\n  \"linter\": {\n    \"enabled\": true,\n    \"rules\": {\n      \"recommended\": true,\n      \"suspicious\": {\n        \"noExplicitAny\": \"error\",\n        \"noImplicitAnyLet\": \"error\"\n      },\n      \"correctness\": {\n        \"noUnusedVariables\": \"error\",\n        \"noUnusedImports\": \"error\"\n      },\n      \"style\": {\n        \"noNonNullAssertion\": \"warn\",\n        \"useConst\": \"error\",\n        \"useTemplate\": \"error\"\n      },\n      \"complexity\": {\n        \"noBannedTypes\": \"error\",\n        \"noUselessTypeConstraint\": \"error\"\n      }\n    }\n  },\n  \"formatter\": {\n    \"enabled\": true,\n    \"indentStyle\": \"space\",\n    \"indentWidth\": 2,\n    \"lineWidth\": 100\n  },\n  \"javascript\": {\n    \"formatter\": {\n      \"semicolons\": \"always\",\n      \"quoteStyle\": \"single\",\n      \"trailingCommas\": \"all\",\n      \"arrowParentheses\": \"always\"\n    }\n  },\n  \"files\": {\n    \"ignore\": [\"node_modules\", \"dist\", \"coverage\"]\n  }\n}\n```\n\n## Package.json Scripts\n\n```json\n{\n  \"scripts\": {\n    \"lint\": \"biome check .\",\n    \"lint:fix\": \"biome check --write .\",\n    \"format\": \"biome format --write .\",\n    \"format:check\": \"biome format .\"\n  }\n}\n```\n\n## Key Rules\n\n### Type Safety Rules\n\n```json\n{\n  \"linter\": {\n    \"rules\": {\n      \"suspicious\": {\n        \"noExplicitAny\": \"error\",\n        \"noImplicitAnyLet\": \"error\",\n        \"noConfusingVoidType\": \"error\",\n        \"noAsyncPromiseExecutor\": \"error\"\n      }\n    }\n  }\n}\n```\n\n**noExplicitAny:**\n```typescript\n// âŒ Error\nfunction process(data: any) { }\n\n// âœ… OK\nfunction process(data: unknown) { }\n```\n\n**noImplicitAnyLet:**\n```typescript\n// âŒ Error\nlet value;  // implicit any\n\n// âœ… OK\nlet value: string;\nlet value: unknown;\n```\n\n### Code Quality Rules\n\n```json\n{\n  \"linter\": {\n    \"rules\": {\n      \"correctness\": {\n        \"noUnusedVariables\": \"error\",\n        \"noUnusedImports\": \"error\",\n        \"noConstantCondition\": \"error\",\n        \"noUndeclaredVariables\": \"error\"\n      }\n    }\n  }\n}\n```\n\n### Style Rules\n\n```json\n{\n  \"linter\": {\n    \"rules\": {\n      \"style\": {\n        \"useConst\": \"error\",\n        \"useTemplate\": \"error\",\n        \"noVar\": \"error\",\n        \"useShorthandFunctionType\": \"error\",\n        \"useExportType\": \"error\",\n        \"useImportType\": \"error\"\n      }\n    }\n  }\n}\n```\n\n**useExportType / useImportType:**\n```typescript\n// âŒ Error - using value import for type\nimport { User } from './types';\nexport { User };\n\n// âœ… OK - type-only imports/exports\nimport type { User } from './types';\nexport type { User };\n```\n\n## Formatter Configuration\n\n### JavaScript/TypeScript Formatting\n\n```json\n{\n  \"javascript\": {\n    \"formatter\": {\n      \"semicolons\": \"always\",\n      \"quoteStyle\": \"single\",\n      \"jsxQuoteStyle\": \"double\",\n      \"trailingCommas\": \"all\",\n      \"arrowParentheses\": \"always\",\n      \"bracketSpacing\": true,\n      \"bracketSameLine\": false\n    }\n  }\n}\n```\n\n### JSON Formatting\n\n```json\n{\n  \"json\": {\n    \"formatter\": {\n      \"trailingCommas\": \"none\"\n    }\n  }\n}\n```\n\n## File-Specific Overrides\n\n```json\n{\n  \"overrides\": [\n    {\n      \"include\": [\"**/*.test.ts\", \"**/*.test.tsx\"],\n      \"linter\": {\n        \"rules\": {\n          \"suspicious\": {\n            \"noExplicitAny\": \"off\"\n          }\n        }\n      }\n    },\n    {\n      \"include\": [\"*.config.js\", \"*.config.ts\"],\n      \"linter\": {\n        \"rules\": {\n          \"style\": {\n            \"noDefaultExport\": \"off\"\n          }\n        }\n      }\n    }\n  ]\n}\n```\n\n## VS Code Integration\n\n### Install Extension\n\nInstall \"Biome\" extension from VS Code marketplace.\n\n### settings.json\n\n```json\n{\n  \"editor.defaultFormatter\": \"biomejs.biome\",\n  \"editor.formatOnSave\": true,\n  \"editor.codeActionsOnSave\": {\n    \"quickfix.biome\": \"explicit\",\n    \"source.organizeImports.biome\": \"explicit\"\n  },\n  \"[javascript]\": {\n    \"editor.defaultFormatter\": \"biomejs.biome\"\n  },\n  \"[typescript]\": {\n    \"editor.defaultFormatter\": \"biomejs.biome\"\n  },\n  \"[json]\": {\n    \"editor.defaultFormatter\": \"biomejs.biome\"\n  }\n}\n```\n\n## CLI Commands\n\n### Linting\n\n```bash\n# Check all files\nbiome check .\n\n# Check and fix\nbiome check --write .\n\n# Check specific files\nbiome check src/\n\n# Check with specific rules\nbiome check --diagnostic-level=error .\n```\n\n### Formatting\n\n```bash\n# Check formatting\nbiome format .\n\n# Apply formatting\nbiome format --write .\n\n# Format specific files\nbiome format --write src/**/*.ts\n```\n\n### CI Integration\n\n```bash\n# Check only (exit non-zero on issues)\nbiome ci .\n```\n\n## Migration from ESLint + Prettier\n\n### Step 1: Install Biome\n\n```bash\nnpm uninstall eslint prettier eslint-config-prettier @typescript-eslint/eslint-plugin @typescript-eslint/parser\nnpm install -D @biomejs/biome\n```\n\n### Step 2: Create biome.json\n\n```bash\nnpx biome init\n```\n\n### Step 3: Update Scripts\n\n```json\n{\n  \"scripts\": {\n    \"lint\": \"biome check .\",\n    \"format\": \"biome format --write .\"\n  }\n}\n```\n\n### Step 4: Remove Old Config Files\n\n```bash\nrm .eslintrc.json .eslintrc.js .prettierrc .prettierignore\n```\n\n### Rule Mapping\n\n| ESLint Rule | Biome Rule |\n|-------------|------------|\n| `@typescript-eslint/no-explicit-any` | `suspicious/noExplicitAny` |\n| `@typescript-eslint/no-unused-vars` | `correctness/noUnusedVariables` |\n| `no-var` | `style/noVar` |\n| `prefer-const` | `style/useConst` |\n| `prefer-template` | `style/useTemplate` |\n\n## Limitations\n\nBiome does not support:\n- Custom rules (plugin ecosystem)\n- Some ESLint-specific rules\n- JSON configuration with comments\n\nUse ESLint if you need:\n- eslint-plugin-react-hooks\n- eslint-plugin-jsx-a11y\n- Custom rule development\n\n## Pre-commit Hook\n\n```json\n{\n  \"lint-staged\": {\n    \"*.{ts,tsx,js,jsx,json,md}\": [\n      \"biome check --write --no-errors-on-unmatched\"\n    ]\n  }\n}\n```\n\n## GitHub Actions\n\n```yaml\nname: Lint\n\non: [push, pull_request]\n\njobs:\n  lint:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n      - run: npm ci\n      - run: npx biome ci .\n```\n\n## Best Practices Summary\n\n1. **Use `biome ci` in CI pipelines**\n2. **Enable organizeImports**\n3. **Set noExplicitAny to error**\n4. **Use overrides for test files**\n5. **Configure VS Code for format on save**\n6. **Use lint-staged for pre-commit**\n\n## Code Review Checklist\n\n- [ ] biome.json present in project root\n- [ ] noExplicitAny set to error\n- [ ] noUnusedVariables enabled\n- [ ] Formatter configured consistently\n- [ ] VS Code extension installed\n- [ ] Pre-commit hook configured\n- [ ] CI uses `biome ci`"
              },
              {
                "name": "build-tools",
                "description": "Build tool configuration for tsup, tsx, and bundlers. Use when setting up build pipelines.",
                "path": "tech-stacks/js/common/skills/build-tools/SKILL.md",
                "frontmatter": {
                  "name": "build-tools",
                  "description": "Build tool configuration for tsup, tsx, and bundlers. Use when setting up build pipelines."
                },
                "content": "# Build Tools Skill\n\nThis skill covers build tool configuration for TypeScript projects.\n\n## When to Use\n\nUse this skill when:\n- Setting up build pipelines\n- Configuring library bundling\n- Running TypeScript directly\n- Choosing between build tools\n\n## Core Principle\n\n**RIGHT TOOL FOR THE JOB** - Use tsup for libraries, tsx for scripts, Vite for apps.\n\n## Tool Selection Guide\n\n| Use Case | Recommended Tool |\n|----------|------------------|\n| Library/Package | tsup |\n| CLI Application | tsup + tsx |\n| Script Execution | tsx |\n| React SPA | Vite |\n| Full-Stack App | Next.js |\n\n## tsup - Library Bundler\n\n### Installation\n\n```bash\nnpm install -D tsup\n```\n\n### Basic Configuration\n\n```typescript\n// tsup.config.ts\nimport { defineConfig } from 'tsup';\n\nexport default defineConfig({\n  entry: ['src/index.ts'],\n  format: ['esm', 'cjs'],\n  dts: true,\n  clean: true,\n  splitting: false,\n  sourcemap: true,\n  minify: false,\n  treeshake: true,\n});\n```\n\n### Package.json for Library\n\n```json\n{\n  \"name\": \"my-library\",\n  \"version\": \"1.0.0\",\n  \"type\": \"module\",\n  \"main\": \"./dist/index.cjs\",\n  \"module\": \"./dist/index.js\",\n  \"types\": \"./dist/index.d.ts\",\n  \"exports\": {\n    \".\": {\n      \"import\": {\n        \"types\": \"./dist/index.d.ts\",\n        \"default\": \"./dist/index.js\"\n      },\n      \"require\": {\n        \"types\": \"./dist/index.d.cts\",\n        \"default\": \"./dist/index.cjs\"\n      }\n    }\n  },\n  \"files\": [\"dist\"],\n  \"scripts\": {\n    \"build\": \"tsup\",\n    \"dev\": \"tsup --watch\"\n  }\n}\n```\n\n### Multiple Entry Points\n\n```typescript\n// tsup.config.ts\nexport default defineConfig({\n  entry: {\n    index: 'src/index.ts',\n    utils: 'src/utils/index.ts',\n    cli: 'src/cli.ts',\n  },\n  format: ['esm', 'cjs'],\n  dts: true,\n});\n```\n\n### CLI with Shebang\n\n```typescript\n// tsup.config.ts\nexport default defineConfig({\n  entry: ['src/cli.ts'],\n  format: ['esm'],\n  banner: {\n    js: '#!/usr/bin/env node',\n  },\n  clean: true,\n});\n```\n\n## tsx - TypeScript Execution\n\n### Installation\n\n```bash\nnpm install -D tsx\n```\n\n### Usage\n\n```bash\n# Run TypeScript file directly\nnpx tsx src/script.ts\n\n# Watch mode\nnpx tsx watch src/server.ts\n\n# With Node.js flags\nnpx tsx --inspect src/debug.ts\n```\n\n### Package.json Scripts\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"tsx watch src/index.ts\",\n    \"start\": \"tsx src/index.ts\",\n    \"script\": \"tsx scripts/migrate.ts\"\n  }\n}\n```\n\n### tsconfig.json for tsx\n\n```json\n{\n  \"compilerOptions\": {\n    \"module\": \"ESNext\",\n    \"moduleResolution\": \"bundler\",\n    \"esModuleInterop\": true\n  }\n}\n```\n\n## TypeScript Compiler (tsc)\n\n### Build Only (No Bundling)\n\n```json\n{\n  \"compilerOptions\": {\n    \"outDir\": \"./dist\",\n    \"declaration\": true,\n    \"declarationMap\": true,\n    \"sourceMap\": true\n  }\n}\n```\n\n```json\n{\n  \"scripts\": {\n    \"build\": \"tsc\",\n    \"build:watch\": \"tsc --watch\"\n  }\n}\n```\n\n## Vite - Application Bundler\n\n### Installation\n\n```bash\nnpm create vite@latest\n```\n\n### Configuration\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\n\nexport default defineConfig({\n  plugins: [react()],\n  build: {\n    target: 'ES2022',\n    sourcemap: true,\n    outDir: 'dist',\n  },\n  resolve: {\n    alias: {\n      '@': '/src',\n    },\n  },\n});\n```\n\n### Library Mode\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from 'vite';\nimport { resolve } from 'node:path';\n\nexport default defineConfig({\n  build: {\n    lib: {\n      entry: resolve(__dirname, 'src/index.ts'),\n      name: 'MyLib',\n      fileName: 'my-lib',\n      formats: ['es', 'cjs'],\n    },\n    rollupOptions: {\n      external: ['react', 'react-dom'],\n    },\n  },\n});\n```\n\n## Build Scripts\n\n### Complete Build Pipeline\n\n```json\n{\n  \"scripts\": {\n    \"prebuild\": \"npm run clean\",\n    \"build\": \"tsup\",\n    \"postbuild\": \"npm run type-check\",\n    \"clean\": \"rm -rf dist\",\n    \"type-check\": \"tsc --noEmit\"\n  }\n}\n```\n\n### Watch Mode\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"tsup --watch\",\n    \"dev:run\": \"tsx watch src/index.ts\"\n  }\n}\n```\n\n## Output Formats\n\n### ESM (ES Modules)\n\n```typescript\n// Output: dist/index.js\nexport function hello() { }\n```\n\n### CJS (CommonJS)\n\n```typescript\n// Output: dist/index.cjs\nmodule.exports.hello = function() { }\n```\n\n### Dual Package\n\n```typescript\n// tsup.config.ts\nexport default defineConfig({\n  format: ['esm', 'cjs'],\n  dts: true,\n});\n```\n\n## Declaration Files\n\n### Generate .d.ts\n\n```typescript\n// tsup.config.ts\nexport default defineConfig({\n  dts: true, // Generate declaration files\n});\n```\n\n### Separate Declaration Build\n\n```json\n{\n  \"scripts\": {\n    \"build\": \"tsup && tsc --emitDeclarationOnly\"\n  }\n}\n```\n\n## Source Maps\n\n```typescript\n// tsup.config.ts\nexport default defineConfig({\n  sourcemap: true, // Generate source maps\n});\n```\n\n## Tree Shaking\n\n```typescript\n// tsup.config.ts\nexport default defineConfig({\n  treeshake: true, // Remove unused code\n});\n```\n\n## Minification\n\n```typescript\n// tsup.config.ts\nexport default defineConfig({\n  minify: true, // Minify output (production)\n});\n```\n\n## External Dependencies\n\n```typescript\n// tsup.config.ts\nexport default defineConfig({\n  external: ['react', 'react-dom'], // Don't bundle these\n});\n```\n\n## Best Practices Summary\n\n1. **Use tsup for libraries** - Simple, fast, handles dual packages\n2. **Use tsx for scripts** - Direct execution without build\n3. **Use Vite for apps** - Fast dev server, optimized builds\n4. **Generate type declarations** - Always include .d.ts files\n5. **Support both ESM and CJS** - Dual package format\n6. **Enable source maps** - For debugging\n7. **Tree shake in production** - Remove unused code\n\n## Code Review Checklist\n\n- [ ] Correct build tool selected for use case\n- [ ] tsup.config.ts or vite.config.ts present\n- [ ] Declaration files generated (dts: true)\n- [ ] Both ESM and CJS formats for libraries\n- [ ] Source maps enabled\n- [ ] External dependencies configured\n- [ ] Clean script removes old builds"
              },
              {
                "name": "code-quality-standards",
                "description": "Quality gates and enforcement. Use when defining and enforcing code quality standards.",
                "path": "tech-stacks/js/common/skills/code-quality-standards/SKILL.md",
                "frontmatter": {
                  "name": "code-quality-standards",
                  "description": "Quality gates and enforcement. Use when defining and enforcing code quality standards."
                },
                "content": "# Code Quality Standards Skill\n\nThis skill covers quality gates and enforcement for TypeScript projects.\n\n## When to Use\n\nUse this skill when:\n- Defining quality standards\n- Setting up quality gates\n- Reviewing code quality\n- Configuring CI/CD quality checks\n\n## Core Principle\n\n**ZERO WARNINGS POLICY** - All warnings are treated as errors. No exceptions without documented justification.\n\n## Quality Gates\n\n### Required Checks (Must Pass)\n\n| Check | Command | Requirement |\n|-------|---------|-------------|\n| Type Check | `npm run type-check` | Zero errors |\n| Linting | `npm run lint` | Zero errors, zero warnings |\n| Formatting | `npm run format:check` | All files formatted |\n| Tests | `npm test` | All tests pass |\n\n### Recommended Checks\n\n| Check | Command | Requirement |\n|-------|---------|-------------|\n| Coverage | `npm run test:coverage` | 80% minimum |\n| Security | `npm audit` | No high/critical |\n| Licenses | License check | Approved licenses only |\n\n## Package.json Scripts\n\n```json\n{\n  \"scripts\": {\n    \"type-check\": \"tsc --noEmit\",\n    \"lint\": \"biome check .\",\n    \"lint:fix\": \"biome check --write .\",\n    \"format\": \"biome format --write .\",\n    \"format:check\": \"biome format .\",\n    \"test\": \"vitest run\",\n    \"test:coverage\": \"vitest run --coverage\",\n    \"validate\": \"npm run type-check && npm run lint && npm run format:check && npm test\",\n    \"pre-commit\": \"lint-staged && npm run type-check\"\n  }\n}\n```\n\n## Type Safety Standards\n\n### Required TypeScript Configuration\n\n```json\n{\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"noImplicitAny\": true,\n    \"noUncheckedIndexedAccess\": true\n  }\n}\n```\n\n### Forbidden Patterns\n\n```typescript\n// âŒ Never use any\nfunction bad(data: any) { }\nconst x: any = value;\n\n// âŒ No implicit any\nfunction bad(data) { }  // Error: implicit any\n\n// âŒ No @ts-ignore without justification\n// @ts-ignore\nriskyCode();\n\n// âœ… Acceptable with justification\n// @ts-expect-error - External library has incorrect types (issue #123)\nexternalLib.brokenMethod();\n```\n\n## Linting Standards\n\n### Biome Configuration\n\n```json\n{\n  \"linter\": {\n    \"rules\": {\n      \"recommended\": true,\n      \"suspicious\": {\n        \"noExplicitAny\": \"error\"\n      },\n      \"correctness\": {\n        \"noUnusedVariables\": \"error\"\n      }\n    }\n  }\n}\n```\n\n### ESLint Configuration\n\n```typescript\n{\n  rules: {\n    '@typescript-eslint/no-explicit-any': 'error',\n    '@typescript-eslint/no-unused-vars': 'error',\n    '@typescript-eslint/explicit-function-return-type': 'error',\n  }\n}\n```\n\n## Code Style Standards\n\n### Naming Conventions\n\n```typescript\n// Variables: camelCase\nconst userName = 'Alice';\nconst isActive = true;\n\n// Constants: UPPER_SNAKE_CASE\nconst MAX_RETRIES = 3;\nconst API_BASE_URL = 'https://api.example.com';\n\n// Functions: camelCase\nfunction calculateTotal() { }\nconst processData = () => { };\n\n// Classes: PascalCase\nclass UserService { }\nclass ApiClient { }\n\n// Interfaces/Types: PascalCase\ninterface UserData { }\ntype ApiResponse<T> = { };\n\n// Enums: PascalCase with PascalCase values\nenum Status {\n  Active = 'ACTIVE',\n  Inactive = 'INACTIVE',\n}\n```\n\n### File Naming\n\n```\nsrc/\nâ”œâ”€â”€ components/\nâ”‚   â”œâ”€â”€ Button.tsx           # PascalCase for components\nâ”‚   â””â”€â”€ user-profile.tsx     # kebab-case acceptable\nâ”œâ”€â”€ utils/\nâ”‚   â””â”€â”€ format-date.ts       # kebab-case for utilities\nâ”œâ”€â”€ services/\nâ”‚   â””â”€â”€ api-client.ts        # kebab-case for services\nâ””â”€â”€ types/\n    â””â”€â”€ user.ts              # lowercase for type files\n```\n\n## Test Standards\n\n### Test File Location\n\n```\nsrc/\nâ”œâ”€â”€ utils/\nâ”‚   â”œâ”€â”€ format.ts\nâ”‚   â””â”€â”€ __tests__/\nâ”‚       â””â”€â”€ format.test.ts\n```\n\n### Test Structure\n\n```typescript\ndescribe('FunctionName', () => {\n  describe('when condition', () => {\n    it('should do expected behavior', () => {\n      // Arrange\n      // Act\n      // Assert\n    });\n  });\n});\n```\n\n### Coverage Requirements\n\n- Lines: 80% minimum\n- Functions: 80% minimum\n- Branches: 80% minimum\n- Statements: 80% minimum\n\n## Documentation Standards\n\n### Required Documentation\n\n```typescript\n/**\n * Brief description of the function.\n *\n * @param input - Description of input parameter\n * @returns Description of return value\n * @throws {ErrorType} Description of when thrown\n *\n * @example\n * ```typescript\n * const result = functionName('input');\n * ```\n */\nexport function functionName(input: string): Result {\n  // implementation\n}\n```\n\n### When Documentation Required\n\n- All exported functions\n- All exported classes\n- All exported interfaces\n- Complex internal logic\n\n## CI/CD Quality Pipeline\n\n```yaml\nname: Quality Checks\n\non: [push, pull_request]\n\njobs:\n  quality:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n          cache: 'npm'\n\n      - run: npm ci\n\n      - name: Type Check\n        run: npm run type-check\n\n      - name: Lint\n        run: npm run lint\n\n      - name: Format Check\n        run: npm run format:check\n\n      - name: Test\n        run: npm run test:coverage\n\n      - name: Security Audit\n        run: npm audit --audit-level=high\n```\n\n## Quality Metrics\n\n### Code Health Indicators\n\n| Metric | Good | Warning | Critical |\n|--------|------|---------|----------|\n| Type Errors | 0 | >0 | >0 |\n| Lint Warnings | 0 | 1-5 | >5 |\n| Test Coverage | >80% | 60-80% | <60% |\n| Vulnerabilities | 0 high | 0 critical | Any critical |\n\n### Monitoring Quality\n\n```bash\n# Generate quality report\nnpm run validate\n\n# Check specific metrics\nnpm run type-check  # Type errors\nnpm run lint        # Lint issues\nnpm run test:coverage  # Coverage percentage\nnpm audit           # Vulnerabilities\n```\n\n## Exceptions Process\n\n### When Exceptions Allowed\n\n1. External library type issues\n2. Generated code\n3. Legacy code (with migration plan)\n4. Platform-specific code\n\n### Exception Documentation\n\n```typescript\n// File: src/legacy/old-module.ts\n// QUALITY EXCEPTION: Legacy code pending migration\n// Issue: #456\n// Owner: @developer\n// Review Date: 2024-06-01\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n// Legacy code here\n/* eslint-enable @typescript-eslint/no-explicit-any */\n```\n\n## Best Practices Summary\n\n1. **Zero warnings** - All warnings are errors\n2. **Type everything** - No implicit or explicit any\n3. **Test everything** - 80% coverage minimum\n4. **Document exports** - Public API documented\n5. **Automate checks** - CI/CD enforces standards\n6. **Review exceptions** - Track and expire\n7. **Consistent style** - Automated formatting\n\n## Code Review Checklist\n\n- [ ] Type check passes with zero errors\n- [ ] Lint passes with zero warnings\n- [ ] Code is properly formatted\n- [ ] Tests pass with 80%+ coverage\n- [ ] No new security vulnerabilities\n- [ ] Public API documented\n- [ ] Exceptions documented with issues"
              },
              {
                "name": "coverage-standards",
                "description": "Coverage thresholds and reporting. Use when analyzing and improving test coverage.",
                "path": "tech-stacks/js/common/skills/coverage-standards/SKILL.md",
                "frontmatter": {
                  "name": "coverage-standards",
                  "description": "Coverage thresholds and reporting. Use when analyzing and improving test coverage."
                },
                "content": "# Coverage Standards Skill\n\nThis skill covers test coverage standards and analysis.\n\n## When to Use\n\nUse this skill when:\n- Setting coverage thresholds\n- Analyzing coverage reports\n- Improving test coverage\n- Configuring CI coverage gates\n\n## Core Principle\n\n**COVERAGE IS A MINIMUM, NOT A GOAL** - 80% coverage is a floor, not a ceiling. Focus on testing critical paths.\n\n## Coverage Thresholds\n\n### Minimum Requirements\n\n| Metric | Threshold |\n|--------|-----------|\n| Lines | 80% |\n| Functions | 80% |\n| Branches | 80% |\n| Statements | 80% |\n\n### Vitest Configuration\n\n```typescript\n// vitest.config.ts\nexport default defineConfig({\n  test: {\n    coverage: {\n      provider: 'v8',\n      thresholds: {\n        lines: 80,\n        functions: 80,\n        branches: 80,\n        statements: 80,\n      },\n    },\n  },\n});\n```\n\n## Coverage Metrics Explained\n\n### Lines Coverage\n\nPercentage of executable lines that were run during tests.\n\n```typescript\nfunction example(x: number): number {\n  if (x > 0) {         // Line 1\n    return x * 2;      // Line 2 - only covered if x > 0\n  }\n  return 0;            // Line 3 - only covered if x <= 0\n}\n```\n\n### Branch Coverage\n\nPercentage of decision branches (if/else, switch, ternary) that were taken.\n\n```typescript\nfunction example(x: number): string {\n  // Two branches: true and false\n  if (x > 0) {\n    return 'positive';  // Branch 1\n  } else {\n    return 'non-positive';  // Branch 2\n  }\n}\n\n// Need both tests for 100% branch coverage\ntest('positive', () => expect(example(1)).toBe('positive'));\ntest('non-positive', () => expect(example(0)).toBe('non-positive'));\n```\n\n### Function Coverage\n\nPercentage of functions that were called at least once.\n\n### Statement Coverage\n\nPercentage of statements that were executed.\n\n## Coverage Exclusions\n\n### Valid Exclusions\n\n```typescript\n// vitest.config.ts\nexport default defineConfig({\n  test: {\n    coverage: {\n      exclude: [\n        'node_modules/',\n        'dist/',\n        '**/*.test.ts',\n        '**/__tests__/**',\n        '**/__mocks__/**',\n        '**/*.d.ts',\n        '**/types/**',\n        '**/index.ts',  // Re-export files\n        '**/generated/**',  // Generated code\n      ],\n    },\n  },\n});\n```\n\n### Inline Exclusions\n\n```typescript\n/* v8 ignore next */\nfunction debugOnly(): void {\n  console.log('debug');\n}\n\n/* v8 ignore start */\nfunction untestableCode(): void {\n  // Platform-specific code\n}\n/* v8 ignore stop */\n```\n\n## Coverage Reports\n\n### Report Types\n\n```typescript\nexport default defineConfig({\n  test: {\n    coverage: {\n      reporter: [\n        'text',      // Terminal output\n        'html',      // HTML report\n        'json',      // JSON for tools\n        'lcov',      // For coverage services\n        'cobertura', // For CI systems\n      ],\n      reportsDirectory: './coverage',\n    },\n  },\n});\n```\n\n### Viewing Reports\n\n```bash\n# Generate coverage\nnpm run test:coverage\n\n# View HTML report\nopen coverage/index.html\n```\n\n## Improving Coverage\n\n### Identify Gaps\n\n1. Run coverage report\n2. Check HTML report for red (uncovered) lines\n3. Prioritize critical paths\n4. Add tests for uncovered branches\n\n### Common Uncovered Patterns\n\n#### Error Handling\n\n```typescript\n// Often uncovered\nfunction fetchData(): Promise<Data> {\n  try {\n    return await api.get('/data');\n  } catch (error) {\n    // This branch often uncovered\n    throw new ApiError('Failed to fetch');\n  }\n}\n\n// Test the error path\nit('should throw on API error', async () => {\n  vi.mocked(api.get).mockRejectedValue(new Error('Network'));\n  await expect(fetchData()).rejects.toThrow('Failed to fetch');\n});\n```\n\n#### Edge Cases\n\n```typescript\nfunction divide(a: number, b: number): number {\n  if (b === 0) {\n    throw new Error('Division by zero');  // Often uncovered\n  }\n  return a / b;\n}\n\n// Test edge case\nit('should throw for division by zero', () => {\n  expect(() => divide(1, 0)).toThrow('Division by zero');\n});\n```\n\n#### Guard Clauses\n\n```typescript\nfunction processUser(user: User | null): string {\n  if (!user) {\n    return 'No user';  // Test this branch\n  }\n  return user.name;\n}\n```\n\n## Coverage Anti-Patterns\n\n### Testing Implementation Details\n\n```typescript\n// âŒ Bad - tests internal state\nit('should set internal flag', () => {\n  service.process();\n  expect(service._internalFlag).toBe(true);\n});\n\n// âœ… Good - tests behavior\nit('should produce expected output', () => {\n  const result = service.process();\n  expect(result).toEqual(expected);\n});\n```\n\n### Coverage Without Assertions\n\n```typescript\n// âŒ Bad - covers code but doesn't verify\nit('should run without errors', () => {\n  const result = processData(input);\n  // No assertions!\n});\n\n// âœ… Good - verifies behavior\nit('should transform data correctly', () => {\n  const result = processData(input);\n  expect(result).toEqual(expectedOutput);\n});\n```\n\n### Chasing 100% Coverage\n\n```typescript\n// Not everything needs testing\n/* v8 ignore next */\nif (process.env.DEBUG) {\n  console.log('Debug info');\n}\n```\n\n## CI Integration\n\n### GitHub Actions\n\n```yaml\n- name: Run tests with coverage\n  run: npm run test:coverage\n\n- name: Upload coverage to Codecov\n  uses: codecov/codecov-action@v4\n  with:\n    files: ./coverage/lcov.info\n    fail_ci_if_error: true\n```\n\n### Coverage Comments on PRs\n\n```yaml\n- name: Coverage Report\n  uses: davelosert/vitest-coverage-report-action@v2\n```\n\n## Best Practices Summary\n\n1. **80% is minimum** - Aim higher for critical code\n2. **Test behavior** - Not just for coverage numbers\n3. **Exclude generated code** - Don't inflate metrics\n4. **Cover error paths** - Critical for reliability\n5. **Review coverage drops** - Investigate regressions\n6. **Don't chase 100%** - Focus on value\n7. **Use coverage in CI** - Catch regressions early\n\n## Code Review Checklist\n\n- [ ] Coverage thresholds configured\n- [ ] All coverage metrics meet 80%\n- [ ] Error paths tested\n- [ ] Edge cases covered\n- [ ] No coverage-only tests\n- [ ] Valid exclusions documented\n- [ ] CI coverage gate enabled"
              },
              {
                "name": "dependency-security",
                "description": "Dependency security scanning. Use when auditing npm packages for vulnerabilities.",
                "path": "tech-stacks/js/common/skills/dependency-security/SKILL.md",
                "frontmatter": {
                  "name": "dependency-security",
                  "description": "Dependency security scanning. Use when auditing npm packages for vulnerabilities."
                },
                "content": "# Dependency Security Skill\n\nThis skill covers security scanning for npm dependencies.\n\n## When to Use\n\nUse this skill when:\n- Auditing project dependencies\n- Setting up security CI/CD\n- Responding to vulnerability alerts\n- Evaluating new dependencies\n\n## Core Principle\n\n**DEFENSE IN DEPTH** - Use multiple tools for security scanning. No single tool catches everything.\n\n## npm audit\n\n### Basic Usage\n\n```bash\n# Run audit\nnpm audit\n\n# JSON output for parsing\nnpm audit --json\n\n# Only high/critical\nnpm audit --audit-level=high\n\n# Production dependencies only\nnpm audit --omit=dev\n```\n\n### Auto-Fix\n\n```bash\n# Safe fixes (semver-compatible)\nnpm audit fix\n\n# Force fixes (may have breaking changes)\nnpm audit fix --force\n\n# Dry run\nnpm audit fix --dry-run\n```\n\n### Understanding Output\n\n```\n# vulnerabilities found\n\nSeverity: high\nPackage: example-package\nDependency of: my-dep\nPath: my-dep > sub-dep > example-package\nMore info: https://npmjs.com/advisories/XXXXX\n```\n\n## Snyk\n\n### Installation\n\n```bash\nnpm install -g snyk\nsnyk auth\n```\n\n### Usage\n\n```bash\n# Test for vulnerabilities\nsnyk test\n\n# Monitor project (continuous)\nsnyk monitor\n\n# High severity only\nsnyk test --severity-threshold=high\n\n# Specific package\nsnyk test --package-manager=npm\n```\n\n### CI Integration\n\n```yaml\n- name: Snyk Security Scan\n  uses: snyk/actions/node@master\n  env:\n    SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}\n  with:\n    args: --severity-threshold=high\n```\n\n## Socket.dev\n\n### Installation\n\n```bash\nnpm install -g @socketsecurity/cli\n```\n\n### Usage\n\n```bash\n# Scan for supply chain issues\nnpx @socketsecurity/cli scan\n\n# Detailed report\nnpx @socketsecurity/cli report\n```\n\n### What Socket Detects\n\n- Typosquatting attacks\n- Protestware\n- Malicious packages\n- Unexpected behavior\n- Network access\n- Shell access\n\n## Severity Levels\n\n| Level | Description | Action |\n|-------|-------------|--------|\n| Critical | RCE, data breach | Fix immediately |\n| High | Privilege escalation | Fix within 24 hours |\n| Moderate | DoS, info disclosure | Fix within 1 week |\n| Low | Minor issues | Fix when convenient |\n\n## Security Audit Workflow\n\n### 1. Initial Assessment\n\n```bash\n# Full audit\nnpm audit\n\n# Check for outdated packages\nnpm outdated\n```\n\n### 2. Vulnerability Analysis\n\nFor each vulnerability:\n1. Check if it affects your usage\n2. Look for patches or updates\n3. Evaluate alternative packages\n4. Document if accepted risk\n\n### 3. Remediation\n\n```bash\n# Update specific package\nnpm update package-name\n\n# Update to latest\nnpm install package-name@latest\n\n# Replace package\nnpm uninstall vulnerable-package\nnpm install alternative-package\n```\n\n### 4. Verification\n\n```bash\n# Re-run audit\nnpm audit\n\n# Run tests\nnpm test\n```\n\n## Lock File Security\n\n### Verify Lock File Integrity\n\n```bash\n# Verify package-lock.json\nnpm ci  # Clean install from lock file\n\n# Check for lock file modifications\ngit diff package-lock.json\n```\n\n### Lock File Best Practices\n\n1. **Always commit lock files**\n2. **Use `npm ci` in CI/CD**\n3. **Review lock file changes in PRs**\n4. **Never manually edit lock files**\n\n## Dependency Evaluation\n\n### Before Adding Dependencies\n\n1. **Check npm page** - Downloads, maintenance, issues\n2. **Check Snyk DB** - Known vulnerabilities\n3. **Check Socket.dev** - Supply chain risks\n4. **Check license** - Compatibility\n\n### Evaluation Checklist\n\n- [ ] Active maintenance (recent commits)\n- [ ] High download count\n- [ ] No critical vulnerabilities\n- [ ] Acceptable license\n- [ ] Reasonable dependency tree\n- [ ] Type definitions available\n\n## Automated Security\n\n### Dependabot Configuration\n\n```yaml\n# .github/dependabot.yml\nversion: 2\nupdates:\n  - package-ecosystem: \"npm\"\n    directory: \"/\"\n    schedule:\n      interval: \"weekly\"\n    open-pull-requests-limit: 10\n    groups:\n      dev-dependencies:\n        dependency-type: \"development\"\n```\n\n### Renovate Configuration\n\n```json\n{\n  \"extends\": [\"config:base\"],\n  \"packageRules\": [\n    {\n      \"matchUpdateTypes\": [\"minor\", \"patch\"],\n      \"automerge\": true\n    }\n  ]\n}\n```\n\n## CI Pipeline Security\n\n```yaml\nname: Security\n\non:\n  push:\n    branches: [main]\n  pull_request:\n  schedule:\n    - cron: '0 0 * * *'  # Daily\n\njobs:\n  audit:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Node\n        uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: npm audit\n        run: npm audit --audit-level=high\n\n      - name: Snyk scan\n        uses: snyk/actions/node@master\n        env:\n          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}\n```\n\n## Handling Vulnerabilities\n\n### When Patch Available\n\n```bash\nnpm audit fix\n# or\nnpm update vulnerable-package\n```\n\n### When No Patch Available\n\n1. **Check if vulnerability applies** - May not affect your usage\n2. **Use override** - Force specific version\n\n```json\n{\n  \"overrides\": {\n    \"vulnerable-package\": \"2.0.0\"\n  }\n}\n```\n\n3. **Replace dependency** - Find alternative\n4. **Accept risk** - Document and track\n\n### Documentation\n\n```markdown\n## Security Exceptions\n\n### vulnerable-package@1.0.0\n- **Vulnerability**: CVE-2024-XXXXX\n- **Reason Accepted**: Only used in tests, not production\n- **Review Date**: 2024-12-01\n- **Assignee**: @developer\n```\n\n## Best Practices Summary\n\n1. **Run audit regularly** - At least weekly\n2. **Use multiple tools** - npm audit + Snyk + Socket\n3. **Automate updates** - Dependabot or Renovate\n4. **Review before merge** - Check lock file changes\n5. **Document exceptions** - Track accepted risks\n6. **Monitor dependencies** - Snyk monitor\n7. **Keep dependencies minimal** - Fewer deps = smaller attack surface\n\n## Code Review Checklist\n\n- [ ] npm audit passes with no high/critical\n- [ ] Lock file committed\n- [ ] New dependencies evaluated\n- [ ] Vulnerable dependencies documented\n- [ ] CI security checks configured\n- [ ] Dependabot/Renovate enabled"
              },
              {
                "name": "error-handling-patterns",
                "description": "Type-safe error handling with discriminated unions and Result types. Use when designing error handling strategies.",
                "path": "tech-stacks/js/common/skills/error-handling-patterns/SKILL.md",
                "frontmatter": {
                  "name": "error-handling-patterns",
                  "description": "Type-safe error handling with discriminated unions and Result types. Use when designing error handling strategies."
                },
                "content": "# Error Handling Patterns Skill\n\nThis skill covers type-safe error handling patterns for TypeScript.\n\n## When to Use\n\nUse this skill when:\n- Designing error handling strategies\n- Creating APIs that can fail\n- Implementing recoverable error flows\n- Building robust applications\n\n## Core Principle\n\n**ERRORS ARE VALUES** - Treat errors as first-class values that can be typed, returned, and handled explicitly.\n\n## Result Type Pattern\n\n### Basic Result Type\n\n```typescript\ntype Result<T, E = Error> =\n  | { success: true; data: T }\n  | { success: false; error: E };\n\n// Helper functions\nfunction ok<T>(data: T): Result<T, never> {\n  return { success: true, data };\n}\n\nfunction err<E>(error: E): Result<never, E> {\n  return { success: false, error };\n}\n```\n\n### Using Result Type\n\n```typescript\ninterface User {\n  id: string;\n  name: string;\n}\n\ninterface UserNotFoundError {\n  type: 'USER_NOT_FOUND';\n  userId: string;\n}\n\ninterface DatabaseError {\n  type: 'DATABASE_ERROR';\n  message: string;\n}\n\ntype GetUserError = UserNotFoundError | DatabaseError;\n\nasync function getUser(id: string): Promise<Result<User, GetUserError>> {\n  try {\n    const user = await db.users.findUnique({ where: { id } });\n    if (!user) {\n      return err({ type: 'USER_NOT_FOUND', userId: id });\n    }\n    return ok(user);\n  } catch (e) {\n    return err({ type: 'DATABASE_ERROR', message: String(e) });\n  }\n}\n\n// Usage\nconst result = await getUser('123');\nif (result.success) {\n  console.log(result.data.name); // User\n} else {\n  switch (result.error.type) {\n    case 'USER_NOT_FOUND':\n      console.log(`User ${result.error.userId} not found`);\n      break;\n    case 'DATABASE_ERROR':\n      console.log(`Database error: ${result.error.message}`);\n      break;\n  }\n}\n```\n\n## Discriminated Union Errors\n\n### Error Type Hierarchy\n\n```typescript\n// Base error interface\ninterface BaseError {\n  type: string;\n  message: string;\n  timestamp: Date;\n}\n\n// Specific error types\ninterface ValidationError extends BaseError {\n  type: 'VALIDATION_ERROR';\n  field: string;\n  value: unknown;\n}\n\ninterface NotFoundError extends BaseError {\n  type: 'NOT_FOUND_ERROR';\n  resource: string;\n  id: string;\n}\n\ninterface AuthorizationError extends BaseError {\n  type: 'AUTHORIZATION_ERROR';\n  requiredRole: string;\n  userRole: string;\n}\n\ninterface NetworkError extends BaseError {\n  type: 'NETWORK_ERROR';\n  url: string;\n  statusCode?: number;\n}\n\n// Union of all errors\ntype AppError =\n  | ValidationError\n  | NotFoundError\n  | AuthorizationError\n  | NetworkError;\n```\n\n### Error Factory Functions\n\n```typescript\nfunction createValidationError(\n  field: string,\n  value: unknown,\n  message: string,\n): ValidationError {\n  return {\n    type: 'VALIDATION_ERROR',\n    field,\n    value,\n    message,\n    timestamp: new Date(),\n  };\n}\n\nfunction createNotFoundError(resource: string, id: string): NotFoundError {\n  return {\n    type: 'NOT_FOUND_ERROR',\n    resource,\n    id,\n    message: `${resource} with id ${id} not found`,\n    timestamp: new Date(),\n  };\n}\n```\n\n## Try-Catch Patterns\n\n### Type-Safe Catch Handling\n\n```typescript\nfunction handleError(error: unknown): AppError {\n  // Error instance\n  if (error instanceof Error) {\n    return {\n      type: 'NETWORK_ERROR',\n      url: '',\n      message: error.message,\n      timestamp: new Date(),\n    };\n  }\n\n  // String error\n  if (typeof error === 'string') {\n    return {\n      type: 'NETWORK_ERROR',\n      url: '',\n      message: error,\n      timestamp: new Date(),\n    };\n  }\n\n  // Unknown error\n  return {\n    type: 'NETWORK_ERROR',\n    url: '',\n    message: 'An unknown error occurred',\n    timestamp: new Date(),\n  };\n}\n\nasync function fetchData<T>(url: string): Promise<Result<T, NetworkError>> {\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      return err({\n        type: 'NETWORK_ERROR',\n        url,\n        statusCode: response.status,\n        message: `HTTP ${response.status}`,\n        timestamp: new Date(),\n      });\n    }\n    const data = (await response.json()) as T;\n    return ok(data);\n  } catch (error) {\n    return err({\n      type: 'NETWORK_ERROR',\n      url,\n      message: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: new Date(),\n    });\n  }\n}\n```\n\n## Custom Error Classes\n\n### Typed Error Classes\n\n```typescript\nabstract class AppErrorBase extends Error {\n  abstract readonly type: string;\n  readonly timestamp: Date;\n\n  constructor(message: string) {\n    super(message);\n    this.name = this.constructor.name;\n    this.timestamp = new Date();\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\nclass ValidationErrorClass extends AppErrorBase {\n  readonly type = 'VALIDATION_ERROR' as const;\n\n  constructor(\n    message: string,\n    public readonly field: string,\n    public readonly value: unknown,\n  ) {\n    super(message);\n  }\n}\n\nclass NotFoundErrorClass extends AppErrorBase {\n  readonly type = 'NOT_FOUND_ERROR' as const;\n\n  constructor(\n    public readonly resource: string,\n    public readonly id: string,\n  ) {\n    super(`${resource} with id ${id} not found`);\n  }\n}\n```\n\n### Type Guard for Error Classes\n\n```typescript\nfunction isValidationError(error: unknown): error is ValidationErrorClass {\n  return error instanceof ValidationErrorClass;\n}\n\nfunction isNotFoundError(error: unknown): error is NotFoundErrorClass {\n  return error instanceof NotFoundErrorClass;\n}\n\nfunction isAppError(\n  error: unknown,\n): error is ValidationErrorClass | NotFoundErrorClass {\n  return isValidationError(error) || isNotFoundError(error);\n}\n```\n\n## Async Error Handling\n\n### Promise-Based Result\n\n```typescript\nasync function safeAsync<T>(\n  fn: () => Promise<T>,\n): Promise<Result<T, Error>> {\n  try {\n    const data = await fn();\n    return ok(data);\n  } catch (error) {\n    return err(error instanceof Error ? error : new Error(String(error)));\n  }\n}\n\n// Usage\nconst result = await safeAsync(() => fetchUser('123'));\nif (result.success) {\n  console.log(result.data);\n}\n```\n\n### Multiple Async Operations\n\n```typescript\nasync function getAllResults<T, E>(\n  operations: Promise<Result<T, E>>[],\n): Promise<Result<T[], E>> {\n  const results = await Promise.all(operations);\n\n  const errors = results.filter(\n    (r): r is { success: false; error: E } => !r.success,\n  );\n\n  if (errors.length > 0) {\n    return err(errors[0].error);\n  }\n\n  const data = results\n    .filter((r): r is { success: true; data: T } => r.success)\n    .map((r) => r.data);\n\n  return ok(data);\n}\n```\n\n## Error Logging\n\n### Structured Error Logging\n\n```typescript\ninterface ErrorLog {\n  type: string;\n  message: string;\n  timestamp: string;\n  stack?: string;\n  context?: Record<string, unknown>;\n}\n\nfunction logError(error: AppError, context?: Record<string, unknown>): void {\n  const log: ErrorLog = {\n    type: error.type,\n    message: error.message,\n    timestamp: error.timestamp.toISOString(),\n    context,\n  };\n\n  if (error instanceof Error) {\n    log.stack = error.stack;\n  }\n\n  console.error(JSON.stringify(log));\n}\n```\n\n## Error Recovery Patterns\n\n### Retry with Backoff\n\n```typescript\ninterface RetryOptions {\n  maxAttempts: number;\n  delayMs: number;\n  backoffMultiplier: number;\n}\n\nasync function withRetry<T, E>(\n  fn: () => Promise<Result<T, E>>,\n  options: RetryOptions,\n): Promise<Result<T, E>> {\n  let lastError: E | undefined;\n  let delay = options.delayMs;\n\n  for (let attempt = 1; attempt <= options.maxAttempts; attempt++) {\n    const result = await fn();\n    if (result.success) {\n      return result;\n    }\n\n    lastError = result.error;\n\n    if (attempt < options.maxAttempts) {\n      await new Promise((resolve) => setTimeout(resolve, delay));\n      delay *= options.backoffMultiplier;\n    }\n  }\n\n  return err(lastError!);\n}\n```\n\n### Fallback Values\n\n```typescript\nfunction withFallback<T, E>(\n  result: Result<T, E>,\n  fallback: T,\n): T {\n  return result.success ? result.data : fallback;\n}\n\nfunction withFallbackFn<T, E>(\n  result: Result<T, E>,\n  fallbackFn: (error: E) => T,\n): T {\n  return result.success ? result.data : fallbackFn(result.error);\n}\n```\n\n## Best Practices Summary\n\n1. **Use Result types for recoverable errors**\n2. **Use discriminated unions for error types**\n3. **Always handle unknown in catch clauses**\n4. **Create factory functions for errors**\n5. **Log errors with structured context**\n6. **Use type guards for error narrowing**\n7. **Throw only for unrecoverable errors**\n\n## When to Throw vs Return Error\n\n### Throw for:\n- Programming errors (bugs)\n- Unrecoverable situations\n- Constraint violations that should never happen\n\n### Return Error for:\n- Expected failure cases\n- User input validation\n- Network/IO operations\n- Business rule violations\n\n## Code Review Checklist\n\n- [ ] All errors have explicit types\n- [ ] Catch clauses handle `unknown` type\n- [ ] Result types used for recoverable errors\n- [ ] Error factory functions create consistent errors\n- [ ] Discriminated unions enable exhaustive handling\n- [ ] Errors are logged with context\n- [ ] Recovery strategies implemented where appropriate"
              },
              {
                "name": "eslint-flat-config",
                "description": "ESLint 9.x flat configuration patterns. Use when setting up ESLint with TypeScript.",
                "path": "tech-stacks/js/common/skills/eslint-flat-config/SKILL.md",
                "frontmatter": {
                  "name": "eslint-flat-config",
                  "description": "ESLint 9.x flat configuration patterns. Use when setting up ESLint with TypeScript."
                },
                "content": "# ESLint Flat Config Skill\n\nThis skill covers ESLint 9.x flat configuration for TypeScript projects.\n\n## When to Use\n\nUse this skill when:\n- Setting up ESLint for TypeScript projects\n- Migrating from legacy .eslintrc to flat config\n- Configuring strict linting rules\n- Integrating ESLint with Prettier\n\n## Core Principle\n\n**FLAT CONFIG IS THE FUTURE** - ESLint 9.x uses flat config (`eslint.config.ts`) by default.\n\n## Basic Configuration\n\n### eslint.config.ts\n\n```typescript\nimport js from '@eslint/js';\nimport tseslint from 'typescript-eslint';\nimport type { Linter } from 'eslint';\n\nconst config: Linter.Config[] = [\n  // Ignore patterns\n  {\n    ignores: ['dist/**', 'node_modules/**', 'coverage/**'],\n  },\n\n  // Base JavaScript rules\n  js.configs.recommended,\n\n  // TypeScript strict rules\n  ...tseslint.configs.strictTypeChecked,\n\n  // Custom rules for TypeScript files\n  {\n    files: ['**/*.ts', '**/*.tsx'],\n    languageOptions: {\n      parserOptions: {\n        project: './tsconfig.json',\n        tsconfigRootDir: import.meta.dirname,\n      },\n    },\n    rules: {\n      // Type safety\n      '@typescript-eslint/no-explicit-any': 'error',\n      '@typescript-eslint/no-unsafe-assignment': 'error',\n      '@typescript-eslint/no-unsafe-member-access': 'error',\n      '@typescript-eslint/no-unsafe-call': 'error',\n      '@typescript-eslint/no-unsafe-return': 'error',\n      '@typescript-eslint/no-unsafe-argument': 'error',\n\n      // Code quality\n      '@typescript-eslint/explicit-function-return-type': 'error',\n      '@typescript-eslint/explicit-module-boundary-types': 'error',\n      '@typescript-eslint/no-unused-vars': [\n        'error',\n        { argsIgnorePattern: '^_' },\n      ],\n\n      // Strict boolean expressions\n      '@typescript-eslint/strict-boolean-expressions': 'error',\n\n      // No floating promises\n      '@typescript-eslint/no-floating-promises': 'error',\n      '@typescript-eslint/no-misused-promises': 'error',\n    },\n  },\n];\n\nexport default config;\n```\n\n## Installation\n\n```bash\nnpm install -D eslint @eslint/js typescript-eslint\n```\n\n## Package.json Scripts\n\n```json\n{\n  \"scripts\": {\n    \"lint\": \"eslint .\",\n    \"lint:fix\": \"eslint --fix .\"\n  }\n}\n```\n\n## Key Rules Explained\n\n### Type Safety Rules\n\n```typescript\n// @typescript-eslint/no-explicit-any: 'error'\n// âŒ Bad\nfunction process(data: any) { }\n\n// âœ… Good\nfunction process(data: unknown) { }\n```\n\n```typescript\n// @typescript-eslint/explicit-function-return-type: 'error'\n// âŒ Bad\nfunction add(a: number, b: number) {\n  return a + b;\n}\n\n// âœ… Good\nfunction add(a: number, b: number): number {\n  return a + b;\n}\n```\n\n```typescript\n// @typescript-eslint/strict-boolean-expressions: 'error'\n// âŒ Bad\nif (value) { }\n\n// âœ… Good\nif (value !== undefined && value !== null) { }\nif (typeof value === 'string' && value.length > 0) { }\n```\n\n### Promise Handling Rules\n\n```typescript\n// @typescript-eslint/no-floating-promises: 'error'\n// âŒ Bad - Promise ignored\nfetchData();\n\n// âœ… Good - Promise handled\nawait fetchData();\n// or\nfetchData().catch(handleError);\n// or\nvoid fetchData(); // Explicitly ignored\n```\n\n```typescript\n// @typescript-eslint/no-misused-promises: 'error'\n// âŒ Bad - async function in non-async context\nconst handlers = {\n  onClick: async () => { }, // Error in some contexts\n};\n\n// âœ… Good - wrap in non-async handler\nconst handlers = {\n  onClick: () => {\n    void handleClick();\n  },\n};\n```\n\n## ESLint with Prettier\n\n### Installation\n\n```bash\nnpm install -D eslint-config-prettier\n```\n\n### Configuration\n\n```typescript\nimport js from '@eslint/js';\nimport tseslint from 'typescript-eslint';\nimport prettier from 'eslint-config-prettier';\n\nconst config = [\n  js.configs.recommended,\n  ...tseslint.configs.strictTypeChecked,\n  prettier, // Must be last to override other formatting rules\n  {\n    // Custom rules...\n  },\n];\n\nexport default config;\n```\n\n## File-Specific Configurations\n\n```typescript\nconst config = [\n  // All TypeScript files\n  {\n    files: ['**/*.ts', '**/*.tsx'],\n    rules: {\n      '@typescript-eslint/explicit-function-return-type': 'error',\n    },\n  },\n\n  // Test files - relaxed rules\n  {\n    files: ['**/*.test.ts', '**/*.test.tsx', '**/__tests__/**'],\n    rules: {\n      '@typescript-eslint/no-explicit-any': 'off',\n      '@typescript-eslint/no-unsafe-assignment': 'off',\n    },\n  },\n\n  // Config files - CommonJS allowed\n  {\n    files: ['*.config.js', '*.config.cjs'],\n    rules: {\n      '@typescript-eslint/no-var-requires': 'off',\n    },\n  },\n];\n```\n\n## Custom Rule Configurations\n\n### Naming Conventions\n\n```typescript\n{\n  rules: {\n    '@typescript-eslint/naming-convention': [\n      'error',\n      // Variables: camelCase\n      {\n        selector: 'variable',\n        format: ['camelCase', 'UPPER_CASE'],\n      },\n      // Types: PascalCase\n      {\n        selector: 'typeLike',\n        format: ['PascalCase'],\n      },\n      // Interfaces: PascalCase, no I prefix\n      {\n        selector: 'interface',\n        format: ['PascalCase'],\n        custom: {\n          regex: '^I[A-Z]',\n          match: false,\n        },\n      },\n      // Private members: underscore prefix\n      {\n        selector: 'memberLike',\n        modifiers: ['private'],\n        format: ['camelCase'],\n        leadingUnderscore: 'require',\n      },\n    ],\n  },\n}\n```\n\n### Import Organization\n\n```bash\nnpm install -D eslint-plugin-import\n```\n\n```typescript\nimport importPlugin from 'eslint-plugin-import';\n\nconst config = [\n  {\n    plugins: {\n      import: importPlugin,\n    },\n    rules: {\n      'import/order': [\n        'error',\n        {\n          groups: [\n            'builtin',\n            'external',\n            'internal',\n            'parent',\n            'sibling',\n            'index',\n          ],\n          'newlines-between': 'always',\n          alphabetize: { order: 'asc' },\n        },\n      ],\n      'import/no-duplicates': 'error',\n    },\n  },\n];\n```\n\n## Migration from Legacy Config\n\n### Old .eslintrc.json\n\n```json\n{\n  \"extends\": [\n    \"eslint:recommended\",\n    \"plugin:@typescript-eslint/recommended\"\n  ],\n  \"rules\": {\n    \"@typescript-eslint/no-explicit-any\": \"error\"\n  }\n}\n```\n\n### New eslint.config.ts\n\n```typescript\nimport js from '@eslint/js';\nimport tseslint from 'typescript-eslint';\n\nexport default [\n  js.configs.recommended,\n  ...tseslint.configs.recommended,\n  {\n    rules: {\n      '@typescript-eslint/no-explicit-any': 'error',\n    },\n  },\n];\n```\n\n## Common Issues and Solutions\n\n### \"Parsing error: Cannot read file tsconfig.json\"\n\n```typescript\n// Ensure tsconfigRootDir is set\n{\n  languageOptions: {\n    parserOptions: {\n      project: './tsconfig.json',\n      tsconfigRootDir: import.meta.dirname,\n    },\n  },\n}\n```\n\n### \"Definition for rule not found\"\n\n```bash\n# Ensure all plugins are installed\nnpm install -D @eslint/js typescript-eslint\n```\n\n### Files Not Being Linted\n\n```typescript\n// Check ignores pattern\n{\n  ignores: ['dist/**', 'node_modules/**'],\n}\n\n// Ensure files pattern includes your files\n{\n  files: ['**/*.ts', '**/*.tsx'],\n}\n```\n\n## IDE Integration\n\n### VS Code Settings\n\n```json\n{\n  \"eslint.useFlatConfig\": true,\n  \"eslint.validate\": [\n    \"javascript\",\n    \"javascriptreact\",\n    \"typescript\",\n    \"typescriptreact\"\n  ],\n  \"editor.codeActionsOnSave\": {\n    \"source.fixAll.eslint\": true\n  }\n}\n```\n\n## Best Practices Summary\n\n1. **Use TypeScript for eslint.config.ts**\n2. **Enable strictTypeChecked rules**\n3. **Put Prettier config last**\n4. **Relax rules for test files**\n5. **Set tsconfigRootDir properly**\n6. **Use file-specific configurations**\n7. **Configure VS Code for auto-fix**\n\n## Code Review Checklist\n\n- [ ] eslint.config.ts uses TypeScript\n- [ ] strictTypeChecked rules enabled\n- [ ] no-explicit-any set to error\n- [ ] explicit-function-return-type enabled\n- [ ] Prettier config is last\n- [ ] Test files have relaxed rules\n- [ ] Ignores dist and node_modules"
              },
              {
                "name": "esm-module-patterns",
                "description": "Modern ESM import/export patterns. Use when writing or reviewing module structure.",
                "path": "tech-stacks/js/common/skills/esm-module-patterns/SKILL.md",
                "frontmatter": {
                  "name": "esm-module-patterns",
                  "description": "Modern ESM import/export patterns. Use when writing or reviewing module structure."
                },
                "content": "# ESM Module Patterns Skill\n\nThis skill covers modern ECMAScript Module (ESM) patterns for TypeScript projects.\n\n## When to Use\n\nUse this skill when:\n- Setting up new TypeScript projects\n- Converting CommonJS to ESM\n- Designing module structure\n- Reviewing import/export patterns\n\n## Core Principle\n\n**ESM ONLY** - No CommonJS (`require`/`module.exports`). All projects use native ES Modules.\n\n## Package.json Configuration\n\n```json\n{\n  \"type\": \"module\",\n  \"exports\": {\n    \".\": {\n      \"import\": \"./dist/index.js\",\n      \"require\": \"./dist/index.cjs\",\n      \"types\": \"./dist/index.d.ts\"\n    }\n  },\n  \"main\": \"./dist/index.cjs\",\n  \"module\": \"./dist/index.js\",\n  \"types\": \"./dist/index.d.ts\",\n  \"files\": [\"dist\"]\n}\n```\n\n## Import Patterns\n\n### Named Imports (Preferred)\n\n```typescript\n// âœ… Named imports - clear and tree-shakeable\nimport { formatDate, parseDate } from './utils/date.js';\nimport { UserService, type User } from './services/user.js';\n\n// âœ… Type-only imports\nimport type { Config } from './config.js';\n```\n\n### Default Imports\n\n```typescript\n// âœ… Default import for single main export\nimport express from 'express';\nimport React from 'react';\n\n// âœ… Default with named\nimport fs, { promises as fsp } from 'node:fs';\n```\n\n### Namespace Imports\n\n```typescript\n// âœ… Namespace import when many exports needed\nimport * as utils from './utils/index.js';\n\nutils.formatDate(date);\nutils.parseDate(str);\n```\n\n### Dynamic Imports\n\n```typescript\n// âœ… Dynamic import for code splitting\nconst module = await import('./heavy-module.js');\n\n// âœ… Conditional loading\nif (process.env.NODE_ENV === 'development') {\n  const devTools = await import('./dev-tools.js');\n  devTools.enable();\n}\n```\n\n## Export Patterns\n\n### Named Exports (Preferred)\n\n```typescript\n// âœ… Named exports - explicit and tree-shakeable\nexport function formatDate(date: Date): string {\n  return date.toISOString();\n}\n\nexport interface User {\n  id: string;\n  name: string;\n}\n\nexport const DEFAULT_TIMEOUT = 5000;\n```\n\n### Default Exports\n\n```typescript\n// âœ… Default export for main module entry\nexport default class ApiClient {\n  // ...\n}\n\n// âœ… Default export for React components\nexport default function Button({ children }: ButtonProps) {\n  return <button>{children}</button>;\n}\n```\n\n### Re-exports\n\n```typescript\n// âœ… Re-export from barrel file (index.ts)\nexport { formatDate, parseDate } from './date.js';\nexport { User, UserService } from './user.js';\nexport type { Config } from './config.js';\n\n// âœ… Re-export with rename\nexport { internalFunction as publicFunction } from './internal.js';\n\n// âœ… Re-export all\nexport * from './utils.js';\nexport * as helpers from './helpers.js';\n```\n\n## File Extensions\n\n**Always use `.js` extension in imports**, even for TypeScript files:\n\n```typescript\n// âœ… Correct - .js extension\nimport { helper } from './utils/helper.js';\nimport { User } from '../models/user.js';\n\n// âŒ Wrong - no extension\nimport { helper } from './utils/helper';\n\n// âŒ Wrong - .ts extension\nimport { helper } from './utils/helper.ts';\n```\n\n**Why `.js`?** TypeScript compiles `.ts` to `.js`, and Node.js ESM requires extensions.\n\n## tsconfig.json for ESM\n\n```json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES2022\",\n    \"module\": \"ESNext\",\n    \"moduleResolution\": \"bundler\",\n    \"esModuleInterop\": true,\n    \"allowSyntheticDefaultImports\": true,\n    \"isolatedModules\": true\n  }\n}\n```\n\n## Directory Structure\n\n```\nsrc/\nâ”œâ”€â”€ index.ts              # Main entry point\nâ”œâ”€â”€ types/\nâ”‚   â””â”€â”€ index.ts          # Type exports\nâ”œâ”€â”€ utils/\nâ”‚   â”œâ”€â”€ index.ts          # Barrel file\nâ”‚   â”œâ”€â”€ date.ts\nâ”‚   â””â”€â”€ string.ts\nâ”œâ”€â”€ services/\nâ”‚   â”œâ”€â”€ index.ts          # Barrel file\nâ”‚   â”œâ”€â”€ api.ts\nâ”‚   â””â”€â”€ auth.ts\nâ””â”€â”€ models/\n    â”œâ”€â”€ index.ts          # Barrel file\n    â””â”€â”€ user.ts\n```\n\n## Barrel Files (index.ts)\n\nUse barrel files to simplify imports:\n\n```typescript\n// src/utils/index.ts\nexport { formatDate, parseDate } from './date.js';\nexport { capitalize, truncate } from './string.js';\nexport { debounce, throttle } from './async.js';\n```\n\n```typescript\n// Consumer code\nimport { formatDate, capitalize, debounce } from './utils/index.js';\n// or\nimport { formatDate, capitalize, debounce } from './utils/index.js';\n```\n\n## Node.js Built-in Modules\n\nUse `node:` prefix for Node.js built-in modules:\n\n```typescript\n// âœ… With node: prefix\nimport fs from 'node:fs';\nimport path from 'node:path';\nimport { createServer } from 'node:http';\n\n// âŒ Without prefix (works but not recommended)\nimport fs from 'fs';\n```\n\n## CommonJS Interop\n\nWhen importing CommonJS modules:\n\n```typescript\n// âœ… Default import for CommonJS modules\nimport lodash from 'lodash';\n\n// âœ… Named imports if supported\nimport { debounce } from 'lodash';\n\n// âš ï¸ May need default for some CJS modules\nimport pkg from 'some-cjs-package';\nconst { namedExport } = pkg;\n```\n\n## Anti-Patterns\n\n### Mixed Module Systems\n\n```typescript\n// âŒ Never use require() in ESM\nconst fs = require('fs');\n\n// âŒ Never use module.exports\nmodule.exports = { foo };\n\n// âŒ Never use __dirname/__filename directly\nconsole.log(__dirname);\n```\n\n### ESM Replacements for CommonJS Globals\n\n```typescript\n// âœ… ESM way to get __dirname and __filename\nimport { fileURLToPath } from 'node:url';\nimport { dirname } from 'node:path';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n```\n\n### Circular Dependencies\n\n```typescript\n// âŒ Avoid circular imports\n// a.ts\nimport { b } from './b.js';\nexport const a = b + 1;\n\n// b.ts\nimport { a } from './a.js'; // Circular!\nexport const b = a + 1;\n\n// âœ… Break cycle with third module or restructure\n// shared.ts\nexport const base = 1;\n\n// a.ts\nimport { base } from './shared.js';\nexport const a = base + 1;\n\n// b.ts\nimport { base } from './shared.js';\nexport const b = base + 2;\n```\n\n## Type-Only Imports\n\nUse `type` keyword for imports used only in type positions:\n\n```typescript\n// âœ… Type-only import - removed at compile time\nimport type { User, Config } from './types.js';\n\n// âœ… Inline type import\nimport { createUser, type User } from './user.js';\n\n// âœ… Type-only re-export\nexport type { User, Config } from './types.js';\n```\n\n## Best Practices Summary\n\n1. **Always use `\"type\": \"module\"` in package.json**\n2. **Use `.js` extension in all imports**\n3. **Prefer named exports over default exports**\n4. **Use `node:` prefix for Node.js built-ins**\n5. **Use type-only imports for types**\n6. **Create barrel files for clean API surface**\n7. **Avoid circular dependencies**\n8. **Never mix ESM and CommonJS**\n\n## Code Review Checklist\n\n- [ ] package.json has `\"type\": \"module\"`\n- [ ] All imports use `.js` extension\n- [ ] No `require()` or `module.exports`\n- [ ] Node.js built-ins use `node:` prefix\n- [ ] Type-only imports use `type` keyword\n- [ ] No circular dependencies\n- [ ] Barrel files export public API only"
              },
              {
                "name": "license-compliance",
                "description": "License checking and compatibility. Use when evaluating dependency licenses.",
                "path": "tech-stacks/js/common/skills/license-compliance/SKILL.md",
                "frontmatter": {
                  "name": "license-compliance",
                  "description": "License checking and compatibility. Use when evaluating dependency licenses."
                },
                "content": "# License Compliance Skill\n\nThis skill covers license checking for npm dependencies.\n\n## When to Use\n\nUse this skill when:\n- Evaluating new dependencies\n- Auditing license compliance\n- Preparing for release\n- Setting up license policies\n\n## Core Principle\n\n**KNOW YOUR LICENSES** - Understand what licenses allow and require before adding dependencies.\n\n## License Categories\n\n### Permissive Licenses (Generally Safe)\n\n| License | Commercial Use | Modification | Distribution | Attribution |\n|---------|---------------|--------------|--------------|-------------|\n| MIT | Yes | Yes | Yes | Yes |\n| Apache-2.0 | Yes | Yes | Yes | Yes |\n| BSD-2-Clause | Yes | Yes | Yes | Yes |\n| BSD-3-Clause | Yes | Yes | Yes | Yes |\n| ISC | Yes | Yes | Yes | Yes |\n| 0BSD | Yes | Yes | Yes | No |\n| Unlicense | Yes | Yes | Yes | No |\n\n### Copyleft Licenses (Requires Review)\n\n| License | Effect |\n|---------|--------|\n| GPL-2.0 | Derivative works must be GPL |\n| GPL-3.0 | Derivative works must be GPL |\n| LGPL-2.1 | Dynamic linking OK, static linking requires LGPL |\n| LGPL-3.0 | Dynamic linking OK, static linking requires LGPL |\n| AGPL-3.0 | Network use triggers copyleft |\n| MPL-2.0 | File-level copyleft |\n\n### Special Attention\n\n| License | Notes |\n|---------|-------|\n| CC-BY-* | Not designed for software |\n| WTFPL | May not be recognized legally |\n| Proprietary | Requires explicit permission |\n| No License | All rights reserved by default |\n\n## License Checker Tool\n\n### Installation\n\n```bash\nnpm install -g license-checker\n```\n\n### Basic Usage\n\n```bash\n# List all licenses\nnpx license-checker\n\n# Summary view\nnpx license-checker --summary\n\n# JSON output\nnpx license-checker --json > licenses.json\n\n# CSV output\nnpx license-checker --csv > licenses.csv\n```\n\n### Allowed Licenses Only\n\n```bash\nnpx license-checker --onlyAllow \"MIT;Apache-2.0;BSD-2-Clause;BSD-3-Clause;ISC;0BSD;Unlicense\"\n```\n\n### Exclude Licenses\n\n```bash\nnpx license-checker --excludeLicenses \"GPL;AGPL\"\n```\n\n## License Automation\n\n### Pre-commit Hook\n\n```json\n{\n  \"husky\": {\n    \"hooks\": {\n      \"pre-commit\": \"npx license-checker --onlyAllow 'MIT;Apache-2.0;BSD-2-Clause;BSD-3-Clause;ISC'\"\n    }\n  }\n}\n```\n\n### CI Pipeline\n\n```yaml\n- name: License Check\n  run: npx license-checker --onlyAllow \"MIT;Apache-2.0;BSD-2-Clause;BSD-3-Clause;ISC;0BSD\"\n```\n\n### Package.json Script\n\n```json\n{\n  \"scripts\": {\n    \"license-check\": \"license-checker --onlyAllow 'MIT;Apache-2.0;BSD-2-Clause;BSD-3-Clause;ISC'\"\n  }\n}\n```\n\n## License Policy\n\n### Recommended Policy\n\n```markdown\n## Allowed Licenses\n\n- MIT\n- Apache-2.0\n- BSD-2-Clause\n- BSD-3-Clause\n- ISC\n- 0BSD\n- Unlicense\n- CC0-1.0\n\n## Requires Review\n\n- MPL-2.0\n- LGPL-*\n- EPL-*\n\n## Not Allowed\n\n- GPL-* (without explicit approval)\n- AGPL-*\n- Proprietary\n- No License\n```\n\n### Policy Exceptions\n\nDocument any exceptions:\n\n```markdown\n## License Exceptions\n\n### package-name@1.0.0\n- **License**: GPL-2.0\n- **Reason**: CLI tool only, not linked into our code\n- **Approved By**: @legal-team\n- **Date**: 2024-01-01\n```\n\n## Attribution Requirements\n\n### MIT License Attribution\n\n```markdown\n## Third-Party Licenses\n\nThis software includes the following third-party packages:\n\n### package-name\nCopyright (c) 2024 Author Name\nLicensed under the MIT License\n```\n\n### Generating Attribution\n\n```bash\nnpx license-checker --production --csv --out THIRD_PARTY_LICENSES.csv\n```\n\n## License File Detection\n\n### Common License Files\n\n- LICENSE\n- LICENSE.md\n- LICENSE.txt\n- COPYING\n- NOTICE\n\n### Package.json License Field\n\n```json\n{\n  \"license\": \"MIT\"\n}\n```\n\n### SPDX Identifiers\n\nUse standard SPDX identifiers:\n- `MIT`\n- `Apache-2.0`\n- `BSD-3-Clause`\n- `(MIT OR Apache-2.0)` - dual license\n- `UNLICENSED` - proprietary\n\n## Handling License Issues\n\n### Unknown License\n\n```bash\n# Investigate\nnpx license-checker --unknown\n\n# Manual check\ncat node_modules/package-name/LICENSE\n```\n\n### Missing License\n\n1. Check package repository\n2. Contact maintainer\n3. Find alternative package\n4. Get explicit permission\n\n### License Conflict\n\n1. Identify conflicting licenses\n2. Consult legal if needed\n3. Find alternative packages\n4. Document decision\n\n## SBOM Generation\n\n### CycloneDX Format\n\n```bash\nnpm install -g @cyclonedx/cyclonedx-npm\nnpx @cyclonedx/cyclonedx-npm --output-format JSON > sbom.json\n```\n\n### SPDX Format\n\n```bash\nnpm install -g @spdx/spdx-sbom-generator\nnpx spdx-sbom-generator\n```\n\n## Best Practices Summary\n\n1. **Define license policy** - Know what's allowed\n2. **Check before adding** - Evaluate new dependencies\n3. **Automate checking** - CI/CD license gates\n4. **Document exceptions** - Track approved deviations\n5. **Generate attribution** - For distribution\n6. **Regular audits** - Dependencies change\n7. **Create SBOM** - For compliance reporting\n\n## Code Review Checklist\n\n- [ ] New dependencies have allowed licenses\n- [ ] License checker passes in CI\n- [ ] Attribution file updated\n- [ ] Exceptions documented\n- [ ] No copyleft licenses (or approved)\n- [ ] Package.json has valid license field"
              },
              {
                "name": "mocking-strategies",
                "description": "Test mocking strategies with Vitest. Use when mocking dependencies in tests.",
                "path": "tech-stacks/js/common/skills/mocking-strategies/SKILL.md",
                "frontmatter": {
                  "name": "mocking-strategies",
                  "description": "Test mocking strategies with Vitest. Use when mocking dependencies in tests."
                },
                "content": "# Mocking Strategies Skill\n\nThis skill covers mocking strategies for Vitest testing.\n\n## When to Use\n\nUse this skill when:\n- Isolating units under test\n- Mocking external dependencies\n- Creating test doubles\n- Stubbing API responses\n\n## Core Principle\n\n**MOCK BOUNDARIES, NOT INTERNALS** - Mock external dependencies (APIs, databases) not internal implementation.\n\n## vi.fn() - Function Mocks\n\n### Basic Mock Function\n\n```typescript\nimport { vi, describe, it, expect } from 'vitest';\n\nconst mockFn = vi.fn();\n\n// Call the mock\nmockFn('arg1', 'arg2');\n\n// Assertions\nexpect(mockFn).toHaveBeenCalled();\nexpect(mockFn).toHaveBeenCalledWith('arg1', 'arg2');\nexpect(mockFn).toHaveBeenCalledTimes(1);\n```\n\n### Mock Return Values\n\n```typescript\nconst mockFn = vi.fn();\n\n// Return specific value\nmockFn.mockReturnValue('result');\n\n// Return different values on subsequent calls\nmockFn\n  .mockReturnValueOnce('first')\n  .mockReturnValueOnce('second')\n  .mockReturnValue('default');\n\n// Return resolved promise\nmockFn.mockResolvedValue({ data: 'value' });\n\n// Return rejected promise\nmockFn.mockRejectedValue(new Error('Failed'));\n```\n\n### Mock Implementation\n\n```typescript\nconst mockFn = vi.fn().mockImplementation((a: number, b: number) => a + b);\n\nexpect(mockFn(1, 2)).toBe(3);\n\n// One-time implementation\nmockFn.mockImplementationOnce(() => 'special');\n```\n\n## vi.spyOn() - Method Spies\n\n### Spy on Object Methods\n\n```typescript\nimport { vi, describe, it, expect, afterEach } from 'vitest';\n\nconst calculator = {\n  add(a: number, b: number): number {\n    return a + b;\n  },\n};\n\ndescribe('calculator', () => {\n  afterEach(() => {\n    vi.restoreAllMocks();\n  });\n\n  it('should spy on add method', () => {\n    const spy = vi.spyOn(calculator, 'add');\n\n    calculator.add(1, 2);\n\n    expect(spy).toHaveBeenCalledWith(1, 2);\n    expect(spy).toHaveReturnedWith(3);\n  });\n\n  it('should mock return value', () => {\n    vi.spyOn(calculator, 'add').mockReturnValue(100);\n\n    expect(calculator.add(1, 2)).toBe(100);\n  });\n});\n```\n\n### Spy on Class Methods\n\n```typescript\nclass UserService {\n  async getUser(id: string): Promise<User> {\n    // Real implementation\n  }\n}\n\nit('should spy on class method', async () => {\n  const service = new UserService();\n  const spy = vi.spyOn(service, 'getUser').mockResolvedValue({\n    id: '123',\n    name: 'Test User',\n  });\n\n  const user = await service.getUser('123');\n\n  expect(spy).toHaveBeenCalledWith('123');\n  expect(user.name).toBe('Test User');\n});\n```\n\n## vi.mock() - Module Mocking\n\n### Auto-Mock Module\n\n```typescript\nimport { vi, describe, it, expect } from 'vitest';\nimport { fetchUser } from './api';\n\n// Mock entire module\nvi.mock('./api');\n\ndescribe('with mocked api', () => {\n  it('should use mocked function', async () => {\n    // fetchUser is now a mock\n    vi.mocked(fetchUser).mockResolvedValue({ id: '1', name: 'Mock User' });\n\n    const user = await fetchUser('1');\n    expect(user.name).toBe('Mock User');\n  });\n});\n```\n\n### Manual Mock Implementation\n\n```typescript\nvi.mock('./api', () => ({\n  fetchUser: vi.fn().mockResolvedValue({ id: '1', name: 'Mock User' }),\n  fetchPosts: vi.fn().mockResolvedValue([]),\n}));\n```\n\n### Partial Mock\n\n```typescript\nvi.mock('./utils', async (importOriginal) => {\n  const actual = await importOriginal<typeof import('./utils')>();\n  return {\n    ...actual,\n    // Only mock specific exports\n    formatDate: vi.fn().mockReturnValue('mocked date'),\n  };\n});\n```\n\n## Mocking External Modules\n\n### Mock Node.js Modules\n\n```typescript\nimport { vi } from 'vitest';\nimport fs from 'node:fs';\n\nvi.mock('node:fs');\n\nit('should mock fs.readFile', async () => {\n  vi.mocked(fs.readFile).mockImplementation((path, callback) => {\n    callback(null, 'mocked content');\n  });\n});\n```\n\n### Mock npm Packages\n\n```typescript\nvi.mock('axios', () => ({\n  default: {\n    get: vi.fn().mockResolvedValue({ data: { id: 1 } }),\n    post: vi.fn().mockResolvedValue({ data: { success: true } }),\n  },\n}));\n```\n\n## Timer Mocks\n\n### Mock setTimeout/setInterval\n\n```typescript\nimport { vi, describe, it, expect, beforeEach, afterEach } from 'vitest';\n\ndescribe('timer tests', () => {\n  beforeEach(() => {\n    vi.useFakeTimers();\n  });\n\n  afterEach(() => {\n    vi.useRealTimers();\n  });\n\n  it('should advance timers', () => {\n    const callback = vi.fn();\n    setTimeout(callback, 1000);\n\n    expect(callback).not.toHaveBeenCalled();\n\n    vi.advanceTimersByTime(1000);\n\n    expect(callback).toHaveBeenCalled();\n  });\n\n  it('should run all timers', () => {\n    const callback = vi.fn();\n    setTimeout(callback, 1000);\n    setTimeout(callback, 2000);\n\n    vi.runAllTimers();\n\n    expect(callback).toHaveBeenCalledTimes(2);\n  });\n});\n```\n\n### Mock Date\n\n```typescript\nbeforeEach(() => {\n  vi.useFakeTimers();\n  vi.setSystemTime(new Date('2024-01-01'));\n});\n\nafterEach(() => {\n  vi.useRealTimers();\n});\n\nit('should use mocked date', () => {\n  expect(new Date().toISOString()).toBe('2024-01-01T00:00:00.000Z');\n});\n```\n\n## Mock Assertions\n\n```typescript\nconst mockFn = vi.fn();\n\n// Call count\nexpect(mockFn).toHaveBeenCalledTimes(3);\nexpect(mockFn).toHaveBeenCalledOnce();\n\n// Call arguments\nexpect(mockFn).toHaveBeenCalledWith('arg1', 'arg2');\nexpect(mockFn).toHaveBeenLastCalledWith('last', 'args');\nexpect(mockFn).toHaveBeenNthCalledWith(2, 'second', 'call');\n\n// Return values\nexpect(mockFn).toHaveReturned();\nexpect(mockFn).toHaveReturnedWith('value');\nexpect(mockFn).toHaveLastReturnedWith('last');\n\n// Access call info\nexpect(mockFn.mock.calls[0]).toEqual(['first', 'call']);\nexpect(mockFn.mock.results[0].value).toBe('result');\n```\n\n## Reset and Restore\n\n```typescript\nconst mockFn = vi.fn();\n\n// Clear call history (keeps implementation)\nmockFn.mockClear();\n// or\nvi.clearAllMocks();\n\n// Reset to initial state (clears implementation)\nmockFn.mockReset();\n// or\nvi.resetAllMocks();\n\n// Restore original implementation (for spies)\nmockFn.mockRestore();\n// or\nvi.restoreAllMocks();\n```\n\n## Test Doubles Patterns\n\n### Stub - Provides Canned Answers\n\n```typescript\nconst userRepository = {\n  findById: vi.fn().mockResolvedValue({ id: '1', name: 'Test' }),\n};\n```\n\n### Spy - Records Calls\n\n```typescript\nconst analytics = {\n  track: vi.fn(),\n};\n\n// Act\nperformAction();\n\n// Assert calls were made\nexpect(analytics.track).toHaveBeenCalledWith('action', { type: 'click' });\n```\n\n### Fake - Working Implementation\n\n```typescript\nclass FakeUserRepository implements UserRepository {\n  private users = new Map<string, User>();\n\n  async save(user: User): Promise<void> {\n    this.users.set(user.id, user);\n  }\n\n  async findById(id: string): Promise<User | null> {\n    return this.users.get(id) ?? null;\n  }\n}\n```\n\n## Best Practices Summary\n\n1. **Mock at boundaries** - APIs, databases, file system\n2. **Don't mock what you own** - Test your own code directly\n3. **Clear mocks between tests** - Use beforeEach/afterEach\n4. **Use vi.mocked() for type safety** - TypeScript-aware mocking\n5. **Prefer spies over mocks** - When you need real behavior\n6. **Keep mocks simple** - Complex mocks indicate design issues\n7. **Restore after tests** - Prevent test pollution\n\n## Code Review Checklist\n\n- [ ] Mocks cleared between tests\n- [ ] Only external dependencies mocked\n- [ ] vi.mocked() used for type safety\n- [ ] Spies restored after use\n- [ ] Mock assertions verify behavior\n- [ ] No unnecessary mocking\n- [ ] Fake implementations for complex scenarios"
              },
              {
                "name": "post-change-verification",
                "description": "Mandatory verification protocol after code changes for JavaScript/TypeScript projects. Use after any code modification to ensure quality.",
                "path": "tech-stacks/js/common/skills/post-change-verification/SKILL.md",
                "frontmatter": {
                  "name": "post-change-verification",
                  "description": "Mandatory verification protocol after code changes for JavaScript/TypeScript projects. Use after any code modification to ensure quality."
                },
                "content": "# Post-Change Verification Protocol\n\nThis skill defines the mandatory verification steps that JavaScript/TypeScript agents must perform after modifying code files.\n\n## When to Use\n\nUse this skill ALWAYS when:\n- Creating new code files\n- Modifying existing code files\n- Refactoring code\n- Generating code\n\nDo NOT use when:\n- Only reading/analyzing code (no modifications)\n- Generating documentation only\n- Running diagnostics or audits\n\n## Package Manager Detection\n\nBefore running any commands, detect the project's package manager:\n\n| Lock File | Package Manager | Run Command |\n|-----------|-----------------|-------------|\n| `pnpm-lock.yaml` | pnpm | `pnpm run <script>` |\n| `yarn.lock` | yarn | `yarn <script>` |\n| `package-lock.json` | npm | `npm run <script>` |\n| `bun.lockb` | bun | `bun run <script>` |\n\n**Detection Order:** Check for lock files in the order above. Use the first match.\n\n**If no lock file exists:** Default to `npm` or ask the user which package manager to use.\n\n**Throughout this document:** Commands use `<pkg>` as placeholder. Replace with the detected package manager:\n- `<pkg> run format` â†’ `pnpm run format` or `yarn format` or `npm run format`\n- `<pkg> test` â†’ `pnpm test` or `yarn test` or `npm test`\n\n## Protocol Steps\n\nAfter completing code changes, agents MUST execute these steps IN ORDER:\n\n### Step 1: Format Code\n\n```bash\n<pkg> run format\n# or\nnpx biome format --write .\n```\n\n**Purpose:** Ensure consistent code style across the project.\n\n### Step 2: Run Linter\n\n```bash\n<pkg> run lint\n# or\nnpx biome check .\n```\n\n**Purpose:** Detect code quality issues, unused variables, and potential bugs.\n\n### Step 3: Run Type Checker\n\n```bash\n<pkg> run type-check\n# or\nnpx tsc --noEmit\n```\n\n**Purpose:** Verify type safety and catch type errors.\n\n### Step 4: Run Related Tests\n\n```bash\n<pkg> test -- --changed\n# or\nnpx vitest related\n# or\n<pkg> test\n```\n\n**Purpose:** Verify code changes do not break existing functionality.\n\n### Step 5: Verify Zero Issues\n\n**TARGET:** All steps must complete with ZERO errors and ZERO warnings.\n\nIf any step reports errors or warnings, proceed to Exception Handling.\n\n## Exception Handling\n\nWhen verification finds issues, follow this decision tree:\n\n```\nIssue Found During Verification\n            |\n            v\n    Was this issue caused\n    by current changes?\n            |\n     +------+------+\n     |             |\n    YES           NO\n     |             |\n     v             v\n  Fix it      Is it in a file\n  now         you modified?\n                   |\n            +------+------+\n            |             |\n           YES           NO\n            |             |\n            v             v\n      Is it a         Document and\n      small fix?      report only\n      (< 10 lines)         |\n            |              |\n     +------+------+       v\n     |             |    DONE\n    YES           NO    (proceed with\n     |             |     task)\n    v             v\n  Fix it      Document,\n  now         report,\n              recommend\n              separate task\n```\n\n### Decision Rules\n\n1. **Issue caused by your changes:** Fix immediately before completing task\n2. **Pre-existing issue in modified file, small fix (< 10 lines):** Fix as part of current work\n3. **Pre-existing issue in modified file, large fix (>= 10 lines):** Document and report, recommend separate cleanup task\n4. **Pre-existing issue in unmodified file:** Document and report only, do not fix\n\n### Example Scenarios\n\n**Scenario 1:** You add a new function and the linter reports an unused variable in your new code.\n- **Action:** Fix it immediately (issue caused by your changes)\n\n**Scenario 2:** You modify a file and discover a pre-existing type error (3 lines to fix) in a function you touched.\n- **Action:** Fix it as part of your work (small fix in modified file)\n\n**Scenario 3:** You modify a file and discover 50+ lines of type errors throughout the file.\n- **Action:** Document the issues, complete your task, recommend separate cleanup task\n\n**Scenario 4:** Lint reports warnings in a file you did not modify.\n- **Action:** Document the issues in output, proceed with task completion\n\n## Verification Output Format\n\nReport verification results using this consistent format:\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     [PASSED | FAILED | SKIPPED (reason)]\nLint:       [PASSED | FAILED] ([X] errors, [Y] warnings)\nType-check: [PASSED | FAILED] ([X] errors)\nTests:      [PASSED | FAILED] ([X]/[Y] passed)\n\nPre-existing issues: [NONE | count listed below]\n[If issues exist, list them here]\n\n=== [TASK COMPLETE | VERIFICATION FAILED] ===\n```\n\n### Example: All Checks Passed\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       PASSED (0 errors, 0 warnings)\nType-check: PASSED (0 errors)\nTests:      PASSED (12/12)\n\nPre-existing issues: NONE\n\n=== TASK COMPLETE ===\n```\n\n### Example: Pre-existing Issues Found\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       FAILED (0 errors caused by this change)\nType-check: PASSED (0 errors)\nTests:      PASSED (12/12)\n\nPre-existing issues (not caused by this change):\n- src/utils/legacy.ts: Line 45 - 'data' has implicit 'any' type\n- src/api/client.ts: Lines 78-92 - Missing error handling\n\nThese issues require structural changes beyond the scope of this task.\nRecommend creating a separate cleanup task.\n\n=== TASK COMPLETE ===\n```\n\n### Example: Issues Caused by Changes\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       FAILED (2 errors, 1 warning)\nType-check: FAILED (1 error)\nTests:      FAILED (10/12)\n\nIssues to fix:\n- src/features/new.ts: Line 23 - Unused variable 'temp'\n- src/features/new.ts: Line 45 - Missing return type\n- src/features/new.ts: Line 67 - Type 'string' not assignable to 'number'\n\n=== VERIFICATION FAILED - FIX ISSUES BEFORE COMPLETING ===\n```\n\n## Graceful Degradation\n\nHandle missing or failing commands gracefully:\n\n| Situation | Status | Action |\n|-----------|--------|--------|\n| Command not found | `SKIPPED (command not found)` | Note and proceed to next step |\n| Command timeout (> 5 min) | `SKIPPED (timeout)` | Note and proceed to next step |\n| Execution error | `SKIPPED (execution error: [reason])` | Note and proceed to next step |\n\n### Example: Missing Command\n\n```\n=== POST-CHANGE VERIFICATION ===\n\nFormat:     PASSED\nLint:       SKIPPED (command not found - no 'lint' script in package.json)\nType-check: PASSED (0 errors)\nTests:      PASSED (8/8)\n\nPre-existing issues: NONE\n\nNote: Consider adding a 'lint' script to package.json for full quality verification.\n\n=== TASK COMPLETE ===\n```\n\n## Best Practices\n\n1. **Run all steps in order** - Each step may reveal different issues\n2. **Fix your own issues first** - Never leave broken code from your changes\n3. **Document pre-existing issues clearly** - Help future cleanup efforts\n4. **Use the 10-line rule consistently** - Small fixes improve code health, large fixes need dedicated tasks\n5. **Report honestly** - Verification results are informational, not judgmental\n\n## Code Review Checklist\n\nBefore completing any code-modifying task:\n\n- [ ] Format check passed\n- [ ] Lint check passed (or pre-existing issues documented)\n- [ ] Type check passed (or pre-existing issues documented)\n- [ ] Tests passed (or pre-existing issues documented)\n- [ ] All issues caused by changes are fixed\n- [ ] Pre-existing issues clearly documented\n- [ ] Verification output included in task completion"
              },
              {
                "name": "pre-commit-hooks",
                "description": "Pre-commit hook setup with Husky and lint-staged. Use when configuring git hooks.",
                "path": "tech-stacks/js/common/skills/pre-commit-hooks/SKILL.md",
                "frontmatter": {
                  "name": "pre-commit-hooks",
                  "description": "Pre-commit hook setup with Husky and lint-staged. Use when configuring git hooks."
                },
                "content": "# Pre-commit Hooks Skill\n\nThis skill covers pre-commit hook configuration with Husky and lint-staged.\n\n## When to Use\n\nUse this skill when:\n- Setting up git hooks\n- Configuring pre-commit quality gates\n- Automating code formatting\n- Enforcing standards before commits\n\n## Core Principle\n\n**FAIL FAST** - Catch issues before they enter the repository. Pre-commit hooks are the first line of defense.\n\n## Installation\n\n### Husky + lint-staged\n\n```bash\nnpm install -D husky lint-staged\nnpx husky init\n```\n\n### Directory Structure\n\n```\nproject/\nâ”œâ”€â”€ .husky/\nâ”‚   â”œâ”€â”€ _/\nâ”‚   â”‚   â””â”€â”€ husky.sh\nâ”‚   â””â”€â”€ pre-commit\nâ”œâ”€â”€ package.json\nâ””â”€â”€ ...\n```\n\n## Configuration\n\n### package.json\n\n```json\n{\n  \"scripts\": {\n    \"prepare\": \"husky\"\n  },\n  \"lint-staged\": {\n    \"*.{ts,tsx}\": [\n      \"biome check --write\",\n      \"biome format --write\"\n    ],\n    \"*.{js,jsx}\": [\n      \"biome check --write\",\n      \"biome format --write\"\n    ],\n    \"*.{json,md}\": [\n      \"biome format --write\"\n    ]\n  }\n}\n```\n\n### .husky/pre-commit\n\n```bash\n#!/usr/bin/env sh\n. \"$(dirname -- \"$0\")/_/husky.sh\"\n\nnpx lint-staged\nnpm run type-check\n```\n\n## lint-staged Patterns\n\n### Basic Pattern\n\n```json\n{\n  \"lint-staged\": {\n    \"*.ts\": \"command\"\n  }\n}\n```\n\n### Multiple Commands\n\n```json\n{\n  \"lint-staged\": {\n    \"*.ts\": [\n      \"biome check --write\",\n      \"biome format --write\"\n    ]\n  }\n}\n```\n\n### Glob Patterns\n\n```json\n{\n  \"lint-staged\": {\n    \"src/**/*.ts\": \"biome check --write\",\n    \"*.{json,md}\": \"biome format --write\",\n    \"!dist/**\": \"biome check\"\n  }\n}\n```\n\n## Biome Configuration\n\n### lint-staged with Biome\n\n```json\n{\n  \"lint-staged\": {\n    \"*.{ts,tsx,js,jsx}\": [\n      \"biome check --write --no-errors-on-unmatched\"\n    ],\n    \"*.{json,md}\": [\n      \"biome format --write --no-errors-on-unmatched\"\n    ]\n  }\n}\n```\n\n### Pre-commit Hook\n\n```bash\n#!/usr/bin/env sh\n. \"$(dirname -- \"$0\")/_/husky.sh\"\n\nnpx lint-staged\nnpm run type-check\n```\n\n## ESLint + Prettier Configuration\n\n### lint-staged with ESLint + Prettier\n\n```json\n{\n  \"lint-staged\": {\n    \"*.{ts,tsx}\": [\n      \"eslint --fix\",\n      \"prettier --write\"\n    ],\n    \"*.{js,jsx}\": [\n      \"eslint --fix\",\n      \"prettier --write\"\n    ],\n    \"*.{json,md,css}\": [\n      \"prettier --write\"\n    ]\n  }\n}\n```\n\n## Advanced Patterns\n\n### Run Tests for Changed Files\n\n```json\n{\n  \"lint-staged\": {\n    \"*.ts\": [\n      \"biome check --write\",\n      \"vitest related --run\"\n    ]\n  }\n}\n```\n\n### Skip CI in Commit Messages\n\n```bash\n# .husky/pre-commit\n#!/usr/bin/env sh\n. \"$(dirname -- \"$0\")/_/husky.sh\"\n\n# Skip hooks for CI commits\nif [ \"$SKIP_HOOKS\" = \"1\" ]; then\n  exit 0\nfi\n\nnpx lint-staged\nnpm run type-check\n```\n\n### Conditional Hooks\n\n```bash\n#!/usr/bin/env sh\n. \"$(dirname -- \"$0\")/_/husky.sh\"\n\n# Only run on feature branches\nBRANCH=$(git rev-parse --abbrev-ref HEAD)\nif [ \"$BRANCH\" = \"main\" ]; then\n  echo \"Running full validation on main...\"\n  npm run validate\nelse\n  npx lint-staged\nfi\n```\n\n## Other Git Hooks\n\n### commit-msg - Commit Message Validation\n\n```bash\n# .husky/commit-msg\n#!/usr/bin/env sh\n. \"$(dirname -- \"$0\")/_/husky.sh\"\n\nnpx commitlint --edit $1\n```\n\n### Commitlint Configuration\n\n```bash\nnpm install -D @commitlint/cli @commitlint/config-conventional\n```\n\n```javascript\n// commitlint.config.js\nexport default {\n  extends: ['@commitlint/config-conventional'],\n};\n```\n\n### pre-push - Pre-Push Validation\n\n```bash\n# .husky/pre-push\n#!/usr/bin/env sh\n. \"$(dirname -- \"$0\")/_/husky.sh\"\n\nnpm run validate\nnpm run test:coverage\n```\n\n## Troubleshooting\n\n### Hook Not Running\n\n```bash\n# Reinstall hooks\nnpx husky install\n\n# Make hook executable\nchmod +x .husky/pre-commit\n```\n\n### Skipping Hooks\n\n```bash\n# Skip hooks for one commit\ngit commit --no-verify -m \"WIP: skip hooks\"\nSKIP_HOOKS=1 git commit -m \"Skip hooks\"\n\n# Not recommended for regular use!\n```\n\n### Debugging lint-staged\n\n```bash\n# Verbose output\nnpx lint-staged --debug\n```\n\n### Windows Issues\n\n```bash\n# Use cross-platform shebang\n#!/usr/bin/env sh\n\n# Or use node for complex scripts\n#!/usr/bin/env node\n```\n\n## CI/CD Integration\n\n### Ensure Hooks Are Installed\n\n```yaml\n# .github/workflows/ci.yml\n- name: Install dependencies\n  run: npm ci\n\n# npm ci runs \"prepare\" script which installs husky\n```\n\n### Skip Hooks in CI\n\n```bash\n# CI environments typically don't need hooks\n# npm ci doesn't run prepare by default in CI\n```\n\n## Best Practices Summary\n\n1. **Keep hooks fast** - Under 10 seconds\n2. **Only lint staged files** - Use lint-staged\n3. **Run type-check** - Catches type errors\n4. **Don't run full tests** - Too slow for commits\n5. **Allow skipping** - For emergencies only\n6. **Commit .husky** - Version control hooks\n7. **Use --no-verify sparingly** - Document when skipped\n\n## Hook Speed Optimization\n\n```json\n{\n  \"lint-staged\": {\n    \"*.{ts,tsx}\": [\n      \"biome check --write --no-errors-on-unmatched\"\n    ]\n  }\n}\n```\n\nAvoid:\n- Running full test suite\n- Type-checking all files (unless fast)\n- Installing dependencies\n\n## Code Review Checklist\n\n- [ ] Husky installed and configured\n- [ ] lint-staged in package.json\n- [ ] Pre-commit hook runs linting\n- [ ] Pre-commit hook runs formatting\n- [ ] Type-check included (if fast)\n- [ ] .husky directory committed\n- [ ] Hooks work on all platforms"
              },
              {
                "name": "testing-patterns",
                "description": "Unit testing patterns with Vitest. Use when writing tests for TypeScript code.",
                "path": "tech-stacks/js/common/skills/testing-patterns/SKILL.md",
                "frontmatter": {
                  "name": "testing-patterns",
                  "description": "Unit testing patterns with Vitest. Use when writing tests for TypeScript code."
                },
                "content": "# Testing Patterns Skill\n\nThis skill covers unit testing patterns for TypeScript with Vitest.\n\n## When to Use\n\nUse this skill when:\n- Writing unit tests\n- Organizing test files\n- Implementing test patterns\n- Improving test quality\n\n## Core Principle\n\n**TEST BEHAVIOR, NOT IMPLEMENTATION** - Tests should verify what code does, not how it does it.\n\n## Test Structure\n\n### Arrange-Act-Assert (AAA)\n\n```typescript\nimport { describe, it, expect } from 'vitest';\n\ndescribe('calculateTotal', () => {\n  it('should calculate total with tax', () => {\n    // Arrange\n    const items = [\n      { price: 100, quantity: 2 },\n      { price: 50, quantity: 1 },\n    ];\n    const taxRate = 0.1;\n\n    // Act\n    const result = calculateTotal(items, taxRate);\n\n    // Assert\n    expect(result).toBe(275); // (200 + 50) * 1.1\n  });\n});\n```\n\n### Given-When-Then (BDD Style)\n\n```typescript\ndescribe('User Authentication', () => {\n  describe('given valid credentials', () => {\n    describe('when user logs in', () => {\n      it('then returns authentication token', async () => {\n        const credentials = { email: 'user@example.com', password: 'valid' };\n        const result = await login(credentials);\n        expect(result.token).toBeDefined();\n      });\n    });\n  });\n});\n```\n\n## Test Organization\n\n### File Structure\n\n```\nsrc/\nâ”œâ”€â”€ utils/\nâ”‚   â”œâ”€â”€ format.ts\nâ”‚   â””â”€â”€ __tests__/\nâ”‚       â””â”€â”€ format.test.ts\nâ”œâ”€â”€ services/\nâ”‚   â”œâ”€â”€ user.ts\nâ”‚   â””â”€â”€ __tests__/\nâ”‚       â””â”€â”€ user.test.ts\n```\n\n### Describe Block Organization\n\n```typescript\ndescribe('UserService', () => {\n  // Setup shared across all tests\n  let userService: UserService;\n\n  beforeEach(() => {\n    userService = new UserService();\n  });\n\n  describe('createUser', () => {\n    it('should create user with valid data', () => { });\n    it('should throw for invalid email', () => { });\n    it('should hash password before storing', () => { });\n  });\n\n  describe('findUser', () => {\n    it('should return user by id', () => { });\n    it('should return null for non-existent user', () => { });\n  });\n});\n```\n\n## Assertion Patterns\n\n### Basic Assertions\n\n```typescript\n// Equality\nexpect(value).toBe(expected);           // Strict equality (===)\nexpect(value).toEqual(expected);        // Deep equality\nexpect(value).toStrictEqual(expected);  // Deep equality + type\n\n// Truthiness\nexpect(value).toBeTruthy();\nexpect(value).toBeFalsy();\nexpect(value).toBeNull();\nexpect(value).toBeUndefined();\nexpect(value).toBeDefined();\n\n// Numbers\nexpect(value).toBeGreaterThan(3);\nexpect(value).toBeLessThan(10);\nexpect(value).toBeCloseTo(0.3, 5);     // Floating point\n\n// Strings\nexpect(value).toMatch(/pattern/);\nexpect(value).toContain('substring');\n\n// Arrays\nexpect(array).toContain(item);\nexpect(array).toHaveLength(3);\n\n// Objects\nexpect(object).toHaveProperty('key');\nexpect(object).toHaveProperty('key', 'value');\nexpect(object).toMatchObject({ partial: true });\n```\n\n### Async Assertions\n\n```typescript\n// Resolves\nawait expect(promise).resolves.toBe('value');\nawait expect(promise).resolves.toEqual({ data: 'value' });\n\n// Rejects\nawait expect(promise).rejects.toThrow('error message');\nawait expect(promise).rejects.toBeInstanceOf(Error);\n```\n\n### Error Assertions\n\n```typescript\n// Sync errors\nexpect(() => throwingFunction()).toThrow();\nexpect(() => throwingFunction()).toThrow('error message');\nexpect(() => throwingFunction()).toThrow(CustomError);\n\n// Async errors\nawait expect(asyncThrowingFunction()).rejects.toThrow();\n```\n\n## Test Data Patterns\n\n### Factories\n\n```typescript\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n}\n\nfunction createUser(overrides: Partial<User> = {}): User {\n  return {\n    id: 'user-123',\n    name: 'Test User',\n    email: 'test@example.com',\n    ...overrides,\n  };\n}\n\n// Usage\nit('should update user name', () => {\n  const user = createUser({ name: 'Original' });\n  const updated = updateUser(user, { name: 'Updated' });\n  expect(updated.name).toBe('Updated');\n});\n```\n\n### Builders\n\n```typescript\nclass UserBuilder {\n  private user: User = {\n    id: 'user-123',\n    name: 'Test User',\n    email: 'test@example.com',\n  };\n\n  withId(id: string): this {\n    this.user.id = id;\n    return this;\n  }\n\n  withName(name: string): this {\n    this.user.name = name;\n    return this;\n  }\n\n  build(): User {\n    return { ...this.user };\n  }\n}\n\n// Usage\nconst user = new UserBuilder()\n  .withId('custom-id')\n  .withName('Custom Name')\n  .build();\n```\n\n## Setup and Teardown\n\n```typescript\nimport { describe, it, beforeAll, afterAll, beforeEach, afterEach } from 'vitest';\n\ndescribe('Database tests', () => {\n  // Run once before all tests\n  beforeAll(async () => {\n    await database.connect();\n  });\n\n  // Run once after all tests\n  afterAll(async () => {\n    await database.disconnect();\n  });\n\n  // Run before each test\n  beforeEach(async () => {\n    await database.clear();\n  });\n\n  // Run after each test\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n});\n```\n\n## Parameterized Tests\n\n```typescript\nimport { describe, it, expect } from 'vitest';\n\ndescribe('isValidEmail', () => {\n  it.each([\n    ['user@example.com', true],\n    ['user@sub.example.com', true],\n    ['invalid', false],\n    ['@example.com', false],\n    ['user@', false],\n  ])('should return %s for \"%s\"', (email, expected) => {\n    expect(isValidEmail(email)).toBe(expected);\n  });\n});\n\n// With named parameters\ndescribe('calculateDiscount', () => {\n  it.each`\n    price   | quantity | expected\n    ${100}  | ${1}     | ${100}\n    ${100}  | ${5}     | ${450}\n    ${100}  | ${10}    | ${800}\n  `('should calculate $expected for $quantity items at $price', ({ price, quantity, expected }) => {\n    expect(calculateDiscount(price, quantity)).toBe(expected);\n  });\n});\n```\n\n## Async Testing\n\n```typescript\n// Using async/await\nit('should fetch user data', async () => {\n  const user = await fetchUser('123');\n  expect(user.name).toBe('Test User');\n});\n\n// Using resolves\nit('should resolve with user data', async () => {\n  await expect(fetchUser('123')).resolves.toMatchObject({\n    name: 'Test User',\n  });\n});\n\n// Testing timeouts\nit('should timeout after 5 seconds', async () => {\n  await expect(slowOperation()).rejects.toThrow('timeout');\n}, 10000); // Custom timeout\n```\n\n## Testing Exceptions\n\n```typescript\ndescribe('validateInput', () => {\n  it('should throw ValidationError for empty input', () => {\n    expect(() => validateInput('')).toThrow(ValidationError);\n  });\n\n  it('should throw with specific message', () => {\n    expect(() => validateInput('')).toThrow('Input cannot be empty');\n  });\n\n  it('should throw with error properties', () => {\n    try {\n      validateInput('');\n      expect.fail('Should have thrown');\n    } catch (error) {\n      expect(error).toBeInstanceOf(ValidationError);\n      expect((error as ValidationError).code).toBe('EMPTY_INPUT');\n    }\n  });\n});\n```\n\n## Test Isolation\n\n```typescript\ndescribe('isolated tests', () => {\n  // Each test gets fresh instance\n  let service: UserService;\n\n  beforeEach(() => {\n    service = new UserService();\n    vi.clearAllMocks();\n  });\n\n  it('test 1 - creates user', () => {\n    service.create({ name: 'User 1' });\n    expect(service.count()).toBe(1);\n  });\n\n  it('test 2 - also starts empty', () => {\n    // This test starts with empty service\n    expect(service.count()).toBe(0);\n  });\n});\n```\n\n## Best Practices Summary\n\n1. **Use AAA pattern** - Arrange, Act, Assert\n2. **One assertion per test** - Keep tests focused\n3. **Descriptive names** - Tests are documentation\n4. **Use factories** - Consistent test data\n5. **Isolate tests** - No shared mutable state\n6. **Test edge cases** - Empty, null, error paths\n7. **Avoid implementation details** - Test behavior\n\n## Code Review Checklist\n\n- [ ] Tests follow AAA pattern\n- [ ] Test names describe behavior\n- [ ] Each test is independent\n- [ ] Factories used for test data\n- [ ] Edge cases covered\n- [ ] Async tests properly awaited\n- [ ] Errors properly asserted"
              },
              {
                "name": "type-safety-patterns",
                "description": "Advanced TypeScript type patterns including generics, type guards, and branded types. Use when designing type-safe APIs.",
                "path": "tech-stacks/js/common/skills/type-safety-patterns/SKILL.md",
                "frontmatter": {
                  "name": "type-safety-patterns",
                  "description": "Advanced TypeScript type patterns including generics, type guards, and branded types. Use when designing type-safe APIs."
                },
                "content": "# Type Safety Patterns Skill\n\nThis skill covers advanced TypeScript patterns for maximum type safety.\n\n## When to Use\n\nUse this skill when:\n- Designing type-safe APIs\n- Working with unknown data\n- Creating reusable generic utilities\n- Implementing runtime type checking\n\n## Core Principle\n\n**TYPES ARE DOCUMENTATION** - Well-designed types make code self-documenting and catch errors at compile time.\n\n## Type Guards\n\n### typeof Guards\n\n```typescript\nfunction processValue(value: string | number): string {\n  if (typeof value === 'string') {\n    return value.toUpperCase(); // value is string\n  }\n  return value.toFixed(2); // value is number\n}\n```\n\n### instanceof Guards\n\n```typescript\nclass ApiError extends Error {\n  constructor(\n    message: string,\n    public statusCode: number,\n  ) {\n    super(message);\n  }\n}\n\nfunction handleError(error: unknown): string {\n  if (error instanceof ApiError) {\n    return `API Error ${error.statusCode}: ${error.message}`;\n  }\n  if (error instanceof Error) {\n    return `Error: ${error.message}`;\n  }\n  return 'Unknown error';\n}\n```\n\n### User-Defined Type Guards\n\n```typescript\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n}\n\nfunction isUser(value: unknown): value is User {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    'id' in value &&\n    'name' in value &&\n    'email' in value &&\n    typeof (value as Record<string, unknown>).id === 'string' &&\n    typeof (value as Record<string, unknown>).name === 'string' &&\n    typeof (value as Record<string, unknown>).email === 'string'\n  );\n}\n\nfunction processUser(data: unknown): User {\n  if (!isUser(data)) {\n    throw new Error('Invalid user data');\n  }\n  return data; // data is User\n}\n```\n\n### Assertion Functions\n\n```typescript\nfunction assertIsString(value: unknown): asserts value is string {\n  if (typeof value !== 'string') {\n    throw new Error(`Expected string, got ${typeof value}`);\n  }\n}\n\nfunction processInput(input: unknown): string {\n  assertIsString(input);\n  return input.toUpperCase(); // input is string\n}\n```\n\n## Generic Types\n\n### Basic Generics\n\n```typescript\nfunction identity<T>(value: T): T {\n  return value;\n}\n\nconst str = identity('hello'); // string\nconst num = identity(42); // number\n```\n\n### Generic Constraints\n\n```typescript\ninterface HasId {\n  id: string;\n}\n\nfunction findById<T extends HasId>(items: T[], id: string): T | undefined {\n  return items.find((item) => item.id === id);\n}\n\ninterface User extends HasId {\n  name: string;\n}\n\nconst users: User[] = [{ id: '1', name: 'Alice' }];\nconst user = findById(users, '1'); // User | undefined\n```\n\n### Multiple Type Parameters\n\n```typescript\nfunction map<T, U>(items: T[], fn: (item: T) => U): U[] {\n  return items.map(fn);\n}\n\nconst numbers = [1, 2, 3];\nconst strings = map(numbers, (n) => n.toString()); // string[]\n```\n\n### Default Type Parameters\n\n```typescript\ninterface ApiResponse<T = unknown> {\n  data: T;\n  status: number;\n  message: string;\n}\n\nconst response: ApiResponse<User> = {\n  data: { id: '1', name: 'Alice', email: 'alice@example.com' },\n  status: 200,\n  message: 'OK',\n};\n```\n\n## Branded Types\n\nPrevent mixing incompatible values of the same underlying type:\n\n```typescript\n// Brand type utility\ntype Brand<T, B> = T & { __brand: B };\n\n// Branded IDs\ntype UserId = Brand<string, 'UserId'>;\ntype OrderId = Brand<string, 'OrderId'>;\n\n// Constructor functions\nfunction createUserId(id: string): UserId {\n  return id as UserId;\n}\n\nfunction createOrderId(id: string): OrderId {\n  return id as OrderId;\n}\n\n// Type-safe functions\nfunction getUser(id: UserId): User {\n  // ...\n}\n\nfunction getOrder(id: OrderId): Order {\n  // ...\n}\n\n// Usage\nconst userId = createUserId('user-123');\nconst orderId = createOrderId('order-456');\n\ngetUser(userId); // âœ… OK\ngetUser(orderId); // âŒ Type error!\n```\n\n## Discriminated Unions\n\n```typescript\n// Define discriminated union\ntype Result<T, E = Error> =\n  | { success: true; data: T }\n  | { success: false; error: E };\n\n// Usage\nfunction divide(a: number, b: number): Result<number, string> {\n  if (b === 0) {\n    return { success: false, error: 'Division by zero' };\n  }\n  return { success: true, data: a / b };\n}\n\n// Pattern matching\nconst result = divide(10, 2);\nif (result.success) {\n  console.log(result.data); // number\n} else {\n  console.log(result.error); // string\n}\n```\n\n## Utility Types\n\n### Built-in Utility Types\n\n```typescript\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  createdAt: Date;\n}\n\n// Partial - all properties optional\ntype PartialUser = Partial<User>;\n\n// Required - all properties required\ntype RequiredUser = Required<PartialUser>;\n\n// Pick - select properties\ntype UserBasic = Pick<User, 'id' | 'name'>;\n\n// Omit - exclude properties\ntype UserWithoutDates = Omit<User, 'createdAt'>;\n\n// Readonly - all properties readonly\ntype ReadonlyUser = Readonly<User>;\n\n// Record - object with specific key/value types\ntype UserMap = Record<string, User>;\n```\n\n### Custom Utility Types\n\n```typescript\n// Make specific properties optional\ntype PartialBy<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;\n\ntype UserCreate = PartialBy<User, 'id' | 'createdAt'>;\n\n// Make specific properties required\ntype RequiredBy<T, K extends keyof T> = Omit<T, K> & Required<Pick<T, K>>;\n\n// Deep readonly\ntype DeepReadonly<T> = {\n  readonly [P in keyof T]: T[P] extends object ? DeepReadonly<T[P]> : T[P];\n};\n\n// Non-nullable properties\ntype NonNullableProps<T> = {\n  [P in keyof T]: NonNullable<T[P]>;\n};\n```\n\n## Template Literal Types\n\n```typescript\ntype HttpMethod = 'GET' | 'POST' | 'PUT' | 'DELETE';\ntype ApiPath = '/users' | '/orders' | '/products';\n\ntype ApiEndpoint = `${HttpMethod} ${ApiPath}`;\n// \"GET /users\" | \"GET /orders\" | \"GET /products\" | \"POST /users\" | ...\n\n// Event handlers\ntype EventName = 'click' | 'focus' | 'blur';\ntype EventHandler = `on${Capitalize<EventName>}`;\n// \"onClick\" | \"onFocus\" | \"onBlur\"\n```\n\n## Conditional Types\n\n```typescript\n// Extract array element type\ntype ArrayElement<T> = T extends (infer E)[] ? E : never;\n\ntype Numbers = ArrayElement<number[]>; // number\ntype Strings = ArrayElement<string[]>; // string\n\n// Extract promise value type\ntype Awaited<T> = T extends Promise<infer U> ? U : T;\n\ntype ResolvedValue = Awaited<Promise<string>>; // string\n\n// Extract function return type\ntype ReturnOf<T> = T extends (...args: unknown[]) => infer R ? R : never;\n```\n\n## Mapped Types\n\n```typescript\n// Make all properties nullable\ntype Nullable<T> = {\n  [P in keyof T]: T[P] | null;\n};\n\n// Getters for all properties\ntype Getters<T> = {\n  [P in keyof T as `get${Capitalize<string & P>}`]: () => T[P];\n};\n\ninterface Person {\n  name: string;\n  age: number;\n}\n\ntype PersonGetters = Getters<Person>;\n// { getName: () => string; getAge: () => number; }\n```\n\n## Index Signatures with Constraints\n\n```typescript\n// String index with specific value type\ninterface StringMap {\n  [key: string]: string;\n}\n\n// Template literal key constraints\ninterface EventHandlers {\n  [K: `on${string}`]: (event: Event) => void;\n}\n\n// Record with computed keys\ntype StatusCodes = Record<200 | 400 | 404 | 500, string>;\n```\n\n## Best Practices Summary\n\n1. **Use type guards for runtime type checking**\n2. **Prefer user-defined type guards for complex types**\n3. **Use branded types for domain IDs**\n4. **Use discriminated unions for state machines**\n5. **Leverage utility types instead of manual typing**\n6. **Use generics for reusable, type-safe code**\n7. **Prefer `unknown` over `any` for unknown values**\n\n## Code Review Checklist\n\n- [ ] No `any` types - use `unknown` with type guards\n- [ ] Generic constraints are properly defined\n- [ ] Type guards return `value is Type`\n- [ ] Discriminated unions have literal discriminant\n- [ ] Branded types used for domain identifiers\n- [ ] Utility types used where applicable\n- [ ] Conditional types are well-documented"
              },
              {
                "name": "typescript-strict-config",
                "description": "Strict TypeScript configuration with all safety flags enabled. Use when initializing TypeScript projects or enforcing type safety.",
                "path": "tech-stacks/js/common/skills/typescript-strict-config/SKILL.md",
                "frontmatter": {
                  "name": "typescript-strict-config",
                  "description": "Strict TypeScript configuration with all safety flags enabled. Use when initializing TypeScript projects or enforcing type safety."
                },
                "content": "# TypeScript Strict Configuration Skill\n\nThis skill defines the strictest possible TypeScript configuration for maximum type safety.\n\n## When to Use\n\nUse this skill when:\n- Initializing new TypeScript projects\n- Upgrading existing projects to strict mode\n- Enforcing zero-tolerance type safety\n- Reviewing TypeScript configurations\n\n## Core Principle\n\n**ZERO TOLERANCE FOR `any` TYPES** - Every value must have an explicit, meaningful type.\n\n## tsconfig.json Template\n\n```json\n{\n  \"compilerOptions\": {\n    // Language & Environment\n    \"target\": \"ES2022\",\n    \"lib\": [\"ES2022\"],\n    \"module\": \"ESNext\",\n    \"moduleResolution\": \"bundler\",\n\n    // Emit\n    \"declaration\": true,\n    \"declarationMap\": true,\n    \"sourceMap\": true,\n    \"outDir\": \"./dist\",\n    \"removeComments\": false,\n    \"importHelpers\": true,\n\n    // Interop Constraints\n    \"esModuleInterop\": true,\n    \"allowSyntheticDefaultImports\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"isolatedModules\": true,\n\n    // Type Checking - ALL STRICT FLAGS\n    \"strict\": true,\n    \"noImplicitAny\": true,\n    \"strictNullChecks\": true,\n    \"strictFunctionTypes\": true,\n    \"strictBindCallApply\": true,\n    \"strictPropertyInitialization\": true,\n    \"noImplicitThis\": true,\n    \"useUnknownInCatchVariables\": true,\n    \"alwaysStrict\": true,\n\n    // Additional Checks\n    \"noUnusedLocals\": true,\n    \"noUnusedParameters\": true,\n    \"noImplicitReturns\": true,\n    \"noFallthroughCasesInSwitch\": true,\n    \"noUncheckedIndexedAccess\": true,\n    \"noImplicitOverride\": true,\n    \"noPropertyAccessFromIndexSignature\": true,\n    \"allowUnusedLabels\": false,\n    \"allowUnreachableCode\": false,\n    \"exactOptionalPropertyTypes\": true,\n\n    // Completeness\n    \"skipLibCheck\": false,\n    \"skipDefaultLibCheck\": false\n  },\n  \"include\": [\"src/**/*\"],\n  \"exclude\": [\"node_modules\", \"dist\", \"**/*.test.ts\"]\n}\n```\n\n## Key Flags Explained\n\n### Mandatory Strict Flags\n\n- **strict: true** - Enables all strict type checking options\n- **noImplicitAny: true** - Error on expressions/declarations with implied `any` type\n- **strictNullChecks: true** - Null and undefined are not assignable to other types\n- **strictFunctionTypes: true** - Function parameters are checked contravariantly\n- **strictBindCallApply: true** - Type-check bind, call, and apply methods\n- **strictPropertyInitialization: true** - Class properties must be initialized\n- **noImplicitThis: true** - Error on `this` expressions with implied `any` type\n- **useUnknownInCatchVariables: true** - Catch clause variables are `unknown` (not `any`)\n\n### Additional Safety Flags\n\n- **noUncheckedIndexedAccess: true** - Array/index access returns `T | undefined`\n- **noImplicitReturns: true** - Error when not all code paths return a value\n- **noFallthroughCasesInSwitch: true** - Error on fallthrough cases in switch statements\n- **noUnusedLocals: true** - Error on unused local variables\n- **noUnusedParameters: true** - Error on unused function parameters\n- **exactOptionalPropertyTypes: true** - Enforce exact optional property types\n- **noPropertyAccessFromIndexSignature: true** - Require bracket notation for index signatures\n\n## Package.json Scripts\n\n```json\n{\n  \"scripts\": {\n    \"type-check\": \"tsc --noEmit\",\n    \"type-check:watch\": \"tsc --noEmit --watch\",\n    \"build\": \"tsc\",\n    \"clean\": \"rm -rf dist\"\n  }\n}\n```\n\n## Common Patterns\n\n### Handling Unknown Types\n\n**BAD:**\n```typescript\nfunction process(data: any) {  // âŒ\n  return data.value;\n}\n```\n\n**GOOD:**\n```typescript\nfunction isValidData(value: unknown): value is { value: string } {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    'value' in value &&\n    typeof (value as Record<string, unknown>).value === 'string'\n  );\n}\n\nfunction process(data: unknown): string {\n  if (!isValidData(data)) {\n    throw new Error('Invalid data');\n  }\n  return data.value;\n}\n```\n\n### Handling Array Access\n\nWith `noUncheckedIndexedAccess: true`, array access returns `T | undefined`:\n\n```typescript\nconst numbers: number[] = [1, 2, 3];\n\n// âŒ Type error - value is number | undefined\nconst first: number = numbers[0];\n\n// âœ… Explicit check\nconst first = numbers[0];\nif (first !== undefined) {\n  console.log(first.toFixed(2));\n}\n\n// âœ… Using optional chaining\nconsole.log(numbers[0]?.toFixed(2));\n\n// âœ… Using assertion (only if guaranteed)\nconst firstAsserted = numbers[0]!;\n```\n\n### Handling Null/Undefined\n\n```typescript\n// âŒ Implicit null\nlet name: string = null;  // Error with strictNullChecks\n\n// âœ… Explicit null\nlet name: string | null = null;\n\n// âœ… Narrowing\nif (name !== null) {\n  console.log(name.toUpperCase());\n}\n\n// âœ… Optional chaining\nconsole.log(name?.toUpperCase());\n\n// âœ… Nullish coalescing\nconst displayName = name ?? 'Anonymous';\n```\n\n### Catch Clause Variables\n\nWith `useUnknownInCatchVariables: true`:\n\n```typescript\n// âŒ Old way (error is `any`)\ntry {\n  riskyOperation();\n} catch (error) {\n  console.log(error.message);  // Unsafe\n}\n\n// âœ… New way (error is `unknown`)\ntry {\n  riskyOperation();\n} catch (error) {\n  if (error instanceof Error) {\n    console.log(error.message);\n  } else {\n    console.log('Unknown error:', error);\n  }\n}\n```\n\n### Function Return Types\n\n```typescript\n// âŒ Missing return type\nfunction calculate(x: number) {\n  return x * 2;\n}\n\n// âœ… Explicit return type\nfunction calculate(x: number): number {\n  return x * 2;\n}\n\n// âœ… Async function\nasync function fetchData(id: string): Promise<Data> {\n  const response = await fetch(`/api/data/${id}`);\n  return response.json() as Promise<Data>;\n}\n```\n\n## ESLint Integration\n\nAdd TypeScript ESLint rules to enforce strict typing:\n\n```typescript\n// eslint.config.ts\nimport tseslint from 'typescript-eslint';\n\nexport default tseslint.config(\n  ...tseslint.configs.strictTypeChecked,\n  {\n    rules: {\n      '@typescript-eslint/no-explicit-any': 'error',\n      '@typescript-eslint/no-unsafe-assignment': 'error',\n      '@typescript-eslint/no-unsafe-member-access': 'error',\n      '@typescript-eslint/no-unsafe-call': 'error',\n      '@typescript-eslint/no-unsafe-return': 'error',\n      '@typescript-eslint/explicit-function-return-type': 'error',\n      '@typescript-eslint/explicit-module-boundary-types': 'error',\n    },\n  },\n);\n```\n\n## Upgrading Existing Projects\n\n1. Add strict flags incrementally\n2. Start with `strict: true`\n3. Fix all errors\n4. Add additional flags one by one\n5. Use `// @ts-expect-error` with justification for unavoidable cases\n\n## Code Review Checklist\n\n- [ ] No `any` types (explicit or implicit)\n- [ ] All functions have explicit return types\n- [ ] All parameters have explicit types\n- [ ] Proper null/undefined handling\n- [ ] Array access checked for undefined\n- [ ] Catch clauses handle unknown error type\n- [ ] No `// @ts-ignore` without justification\n\n## Notes\n\n- Never disable strict flags to make code compile\n- Use `unknown` instead of `any` for truly unknown types\n- Write type guards for runtime type checking\n- All new projects MUST use this configuration\n- Zero tolerance for `any` types"
              },
              {
                "name": "vitest-configuration",
                "description": "Vitest setup and best practices. Use when configuring Vitest for TypeScript projects.",
                "path": "tech-stacks/js/common/skills/vitest-configuration/SKILL.md",
                "frontmatter": {
                  "name": "vitest-configuration",
                  "description": "Vitest setup and best practices. Use when configuring Vitest for TypeScript projects."
                },
                "content": "# Vitest Configuration Skill\n\nThis skill covers Vitest configuration for TypeScript projects.\n\n## When to Use\n\nUse this skill when:\n- Setting up testing infrastructure\n- Configuring coverage thresholds\n- Setting up test environments\n- Migrating from Jest to Vitest\n\n## Core Principle\n\n**FAST, NATIVE ESM TESTING** - Vitest provides Jest-compatible API with native ESM support and Vite-powered performance.\n\n## Installation\n\n```bash\nnpm install -D vitest @vitest/coverage-v8\n```\n\n## Basic Configuration\n\n### vitest.config.ts\n\n```typescript\nimport { defineConfig } from 'vitest/config';\n\nexport default defineConfig({\n  test: {\n    globals: true,\n    environment: 'node',\n    include: ['src/**/__tests__/**/*.test.{ts,tsx}'],\n    exclude: ['node_modules', 'dist'],\n    coverage: {\n      provider: 'v8',\n      reporter: ['text', 'json', 'html'],\n      exclude: [\n        'node_modules/',\n        'dist/',\n        '**/*.test.ts',\n        '**/__tests__/**',\n        '**/*.d.ts',\n      ],\n      thresholds: {\n        lines: 80,\n        functions: 80,\n        branches: 80,\n        statements: 80,\n      },\n    },\n    typecheck: {\n      enabled: true,\n      tsconfig: './tsconfig.json',\n    },\n  },\n});\n```\n\n## Package.json Scripts\n\n```json\n{\n  \"scripts\": {\n    \"test\": \"vitest run\",\n    \"test:watch\": \"vitest\",\n    \"test:coverage\": \"vitest run --coverage\",\n    \"test:ui\": \"vitest --ui\"\n  }\n}\n```\n\n## Test Environments\n\n### Node Environment (Default)\n\n```typescript\nexport default defineConfig({\n  test: {\n    environment: 'node',\n  },\n});\n```\n\n### JSDOM Environment (For DOM Testing)\n\n```bash\nnpm install -D jsdom\n```\n\n```typescript\nexport default defineConfig({\n  test: {\n    environment: 'jsdom',\n  },\n});\n```\n\n### Happy-DOM Environment (Faster Alternative)\n\n```bash\nnpm install -D happy-dom\n```\n\n```typescript\nexport default defineConfig({\n  test: {\n    environment: 'happy-dom',\n  },\n});\n```\n\n### Per-File Environment\n\n```typescript\n// In test file header\n// @vitest-environment jsdom\n\nimport { describe, it, expect } from 'vitest';\n```\n\n## Global Setup and Teardown\n\n### Setup Files\n\n```typescript\n// vitest.config.ts\nexport default defineConfig({\n  test: {\n    setupFiles: ['./src/test/setup.ts'],\n    globalSetup: ['./src/test/global-setup.ts'],\n  },\n});\n```\n\n```typescript\n// src/test/setup.ts\nimport { beforeAll, afterAll, afterEach } from 'vitest';\n\nbeforeAll(() => {\n  // Runs once before all tests\n});\n\nafterEach(() => {\n  // Runs after each test\n});\n\nafterAll(() => {\n  // Runs once after all tests\n});\n```\n\n```typescript\n// src/test/global-setup.ts\nexport default async function setup() {\n  // Global setup (runs before all test files)\n  console.log('Starting test suite');\n}\n\nexport async function teardown() {\n  // Global teardown (runs after all test files)\n  console.log('Test suite complete');\n}\n```\n\n## Coverage Configuration\n\n### Comprehensive Coverage Setup\n\n```typescript\nexport default defineConfig({\n  test: {\n    coverage: {\n      provider: 'v8',\n      reporter: ['text', 'json', 'html', 'lcov'],\n      reportsDirectory: './coverage',\n      exclude: [\n        'node_modules/',\n        'dist/',\n        '**/*.test.ts',\n        '**/*.test.tsx',\n        '**/__tests__/**',\n        '**/__mocks__/**',\n        '**/*.d.ts',\n        '**/types/**',\n        '**/index.ts', // Re-export files\n      ],\n      thresholds: {\n        lines: 80,\n        functions: 80,\n        branches: 80,\n        statements: 80,\n      },\n      // Fail if coverage drops\n      thresholds: {\n        '100': true, // Enforce 100% on new code\n      },\n    },\n  },\n});\n```\n\n## TypeScript Integration\n\n### Type Checking in Tests\n\n```typescript\nexport default defineConfig({\n  test: {\n    typecheck: {\n      enabled: true,\n      tsconfig: './tsconfig.json',\n      include: ['**/*.test.ts', '**/*.test.tsx'],\n    },\n  },\n});\n```\n\n### tsconfig.json for Tests\n\n```json\n{\n  \"compilerOptions\": {\n    \"types\": [\"vitest/globals\"]\n  },\n  \"include\": [\"src/**/*\", \"src/**/__tests__/**/*\"]\n}\n```\n\n## Path Aliases\n\n```typescript\nimport { defineConfig } from 'vitest/config';\nimport path from 'node:path';\n\nexport default defineConfig({\n  test: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n      '@test': path.resolve(__dirname, './src/test'),\n    },\n  },\n});\n```\n\n## Parallel Execution\n\n```typescript\nexport default defineConfig({\n  test: {\n    // Run tests in parallel (default)\n    pool: 'threads',\n    poolOptions: {\n      threads: {\n        singleThread: false,\n        maxThreads: 4,\n        minThreads: 1,\n      },\n    },\n    // Or run tests sequentially\n    // sequence: {\n    //   concurrent: false,\n    // },\n  },\n});\n```\n\n## Test Filtering\n\n### By Pattern\n\n```bash\n# Run tests matching pattern\nvitest run --grep=\"user\"\n\n# Run specific file\nvitest run src/utils/__tests__/format.test.ts\n```\n\n### By Annotation\n\n```typescript\nimport { describe, it, expect } from 'vitest';\n\ndescribe('feature', () => {\n  it.skip('skipped test', () => {\n    // This test is skipped\n  });\n\n  it.only('only this test runs', () => {\n    // Only this test runs when using .only\n  });\n\n  it.todo('not yet implemented');\n});\n```\n\n## Snapshot Testing\n\n```typescript\nimport { describe, it, expect } from 'vitest';\n\ndescribe('snapshots', () => {\n  it('should match snapshot', () => {\n    const result = { id: 1, name: 'test' };\n    expect(result).toMatchSnapshot();\n  });\n\n  it('should match inline snapshot', () => {\n    const result = { id: 1, name: 'test' };\n    expect(result).toMatchInlineSnapshot(`\n      {\n        \"id\": 1,\n        \"name\": \"test\",\n      }\n    `);\n  });\n});\n```\n\n### Snapshot Configuration\n\n```typescript\nexport default defineConfig({\n  test: {\n    snapshotFormat: {\n      printBasicPrototype: false,\n    },\n  },\n});\n```\n\n## Mocking Configuration\n\n### Auto-Mocking\n\n```typescript\nexport default defineConfig({\n  test: {\n    mockReset: true, // Reset mocks before each test\n    clearMocks: true, // Clear mock calls before each test\n    restoreMocks: true, // Restore original implementations\n  },\n});\n```\n\n### Module Mocking Directory\n\n```typescript\nexport default defineConfig({\n  test: {\n    deps: {\n      interopDefault: true,\n    },\n  },\n});\n```\n\n## Reporter Configuration\n\n```typescript\nexport default defineConfig({\n  test: {\n    reporters: ['default', 'json', 'html'],\n    outputFile: {\n      json: './test-results/results.json',\n      html: './test-results/results.html',\n    },\n  },\n});\n```\n\n## Watch Mode Configuration\n\n```typescript\nexport default defineConfig({\n  test: {\n    watch: true,\n    watchExclude: ['**/node_modules/**', '**/dist/**'],\n    forceRerunTriggers: ['**/vitest.config.ts', '**/vite.config.ts'],\n  },\n});\n```\n\n## CI Configuration\n\n```typescript\nexport default defineConfig({\n  test: {\n    // CI-specific settings\n    ...(process.env.CI\n      ? {\n          minWorkers: 1,\n          maxWorkers: 2,\n          coverage: {\n            reporter: ['text', 'json', 'lcov'],\n          },\n        }\n      : {}),\n  },\n});\n```\n\n## Vitest UI\n\n```bash\nnpm install -D @vitest/ui\n```\n\n```bash\nvitest --ui\n```\n\nOpens interactive UI at `http://localhost:51204/__vitest__/`\n\n## Migration from Jest\n\n### Configuration Mapping\n\n| Jest | Vitest |\n|------|--------|\n| `testEnvironment` | `environment` |\n| `setupFilesAfterEnv` | `setupFiles` |\n| `testMatch` | `include` |\n| `testPathIgnorePatterns` | `exclude` |\n| `moduleNameMapper` | `alias` |\n| `collectCoverageFrom` | `coverage.include` |\n\n### Import Changes\n\n```typescript\n// Jest\nimport { jest } from '@jest/globals';\n\n// Vitest\nimport { vi } from 'vitest';\n\n// Jest mock\njest.fn();\njest.mock('./module');\n\n// Vitest mock\nvi.fn();\nvi.mock('./module');\n```\n\n## Best Practices Summary\n\n1. **Use TypeScript for configuration**\n2. **Set coverage thresholds to 80%+**\n3. **Enable type checking in tests**\n4. **Use appropriate test environment**\n5. **Configure parallel execution**\n6. **Use setup files for common setup**\n7. **Configure reporters for CI**\n\n## Code Review Checklist\n\n- [ ] vitest.config.ts uses TypeScript\n- [ ] Coverage thresholds set (80%+)\n- [ ] Type checking enabled\n- [ ] Correct environment selected\n- [ ] Setup files configured if needed\n- [ ] Snapshot format configured\n- [ ] CI-specific settings applied"
              }
            ]
          },
          {
            "name": "react",
            "description": "React 19 and Next.js 15 development with Vite, TailwindCSS, component testing, and deployment patterns",
            "source": "./tech-stacks/js/react",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add IvanTorresEdge/molcajete.ai",
              "/plugin install react@Molcajete.ai"
            ],
            "signals": {
              "stars": 0,
              "forks": 1,
              "pushed_at": "2026-01-06T21:16:55Z",
              "created_at": "2025-11-13T04:11:22Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/analyze",
                "description": "Analyze React Native bundle size",
                "path": "tech-stacks/js/react-native/commands/analyze.md",
                "frontmatter": {
                  "description": "Analyze React Native bundle size"
                },
                "content": "# Analyze Bundle Size\n\nAnalyze the bundle size and identify optimization opportunities.\n\nUse the Task tool to launch the **performance-optimizer** agent with instructions:\n\n1. Check for bundle analysis tools:\n   ```bash\n   npm list react-native-bundle-visualizer\n   ```\n\n2. If not installed:\n   ```bash\n   npm install --save-dev react-native-bundle-visualizer\n   ```\n\n3. Run bundle analysis:\n   ```bash\n   npx react-native-bundle-visualizer\n   ```\n\n4. Alternative: Use Metro bundler stats:\n   ```bash\n   npx expo export --dump-sourcemap\n   ```\n\n5. Analyze the bundle:\n   - Identify large dependencies\n   - Find duplicate packages\n   - Spot unused code\n\n6. Provide optimization recommendations:\n   - Large packages that could be replaced\n   - Code splitting opportunities\n   - Lazy loading suggestions\n   - Tree-shaking improvements\n\n7. Check for common issues:\n   - Moment.js (suggest date-fns or dayjs)\n   - Lodash (suggest individual imports or lodash-es)\n   - Large icon libraries (suggest selective imports)\n\n8. Report findings:\n   - Total bundle size\n   - Size by module\n   - Recommendations with estimated savings\n\nReference the **react-native-performance** skill."
              },
              {
                "name": "/build-all",
                "description": "Build iOS and Android apps using EAS Build",
                "path": "tech-stacks/js/react-native/commands/build-all.md",
                "frontmatter": {
                  "description": "Build iOS and Android apps using EAS Build"
                },
                "content": "# Build All Platforms\n\nBuild both iOS and Android apps using EAS Build service.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if EAS CLI is installed:\n   ```bash\n   eas --version\n   ```\n\n2. If not installed:\n   ```bash\n   npm install -g eas-cli\n   ```\n\n3. Login to Expo account:\n   ```bash\n   eas login\n   ```\n\n4. Configure EAS Build (if not already):\n   ```bash\n   eas build:configure\n   ```\n\n5. Ask user for build profile using AskUserQuestion:\n   - development (dev builds for both platforms)\n   - preview (internal testing builds)\n   - production (store-ready builds)\n\n6. Start builds for both platforms:\n   ```bash\n   eas build --platform all --profile {profile}\n   ```\n\n7. Monitor build progress:\n   - Provide build URLs for tracking\n   - Builds run in parallel on EAS\n   - Report status of each platform\n\n8. When complete:\n   - Provide iOS download link (IPA or Simulator build)\n   - Provide Android download link (APK or AAB)\n   - Show build artifacts summary\n\nReference the **eas-build-setup** skill."
              },
              {
                "name": "/build-android",
                "description": "Build Android app using EAS Build",
                "path": "tech-stacks/js/react-native/commands/build-android.md",
                "frontmatter": {
                  "description": "Build Android app using EAS Build"
                },
                "content": "# Build Android App\n\nBuild Android app using EAS Build service.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if EAS CLI is installed:\n   ```bash\n   eas --version\n   ```\n\n2. If not installed:\n   ```bash\n   npm install -g eas-cli\n   ```\n\n3. Login to Expo account:\n   ```bash\n   eas login\n   ```\n\n4. Configure EAS Build (if not already):\n   ```bash\n   eas build:configure\n   ```\n\n5. Ask user for build profile using AskUserQuestion:\n   - development (APK for testing)\n   - preview (APK for internal distribution)\n   - production (AAB for Play Store)\n\n6. Start Android build:\n   ```bash\n   eas build --platform android --profile {profile}\n   ```\n\n7. Monitor build progress:\n   - Provide build URL for tracking\n   - Wait for completion\n   - Provide download link when ready\n\n8. If production build:\n   - Generate AAB (Android App Bundle)\n   - Remind about signing keystore\n   - Guide through keystore setup if needed\n\nReference the **eas-build-setup** skill."
              },
              {
                "name": "/build-ios",
                "description": "Build iOS app using EAS Build",
                "path": "tech-stacks/js/react-native/commands/build-ios.md",
                "frontmatter": {
                  "description": "Build iOS app using EAS Build"
                },
                "content": "# Build iOS App\n\nBuild iOS app using EAS Build service.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if EAS CLI is installed:\n   ```bash\n   eas --version\n   ```\n\n2. If not installed:\n   ```bash\n   npm install -g eas-cli\n   ```\n\n3. Login to Expo account:\n   ```bash\n   eas login\n   ```\n\n4. Configure EAS Build (if not already):\n   ```bash\n   eas build:configure\n   ```\n\n5. Ask user for build profile using AskUserQuestion:\n   - development (development build with dev client)\n   - preview (ad-hoc distribution for testing)\n   - production (App Store ready)\n\n6. Start iOS build:\n   ```bash\n   eas build --platform ios --profile {profile}\n   ```\n\n7. Monitor build progress:\n   - Provide build URL for tracking\n   - Wait for completion\n   - Provide download link when ready\n\n8. If production build:\n   - Remind about App Store credentials\n   - Guide through signing certificate setup\n\nReference the **eas-build-setup** skill."
              },
              {
                "name": "/deploy-eas",
                "description": "Deploy to EAS and submit to app stores",
                "path": "tech-stacks/js/react-native/commands/deploy-eas.md",
                "frontmatter": {
                  "description": "Deploy to EAS and submit to app stores"
                },
                "content": "# Deploy to EAS\n\nDeploy app to EAS and optionally submit to App Store / Google Play.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Ensure EAS is configured:\n   ```bash\n   eas --version\n   eas whoami\n   ```\n\n2. Ask user for deployment options using AskUserQuestion:\n   - Platform (iOS, Android, both)\n   - Submit to store? (yes/no)\n   - Build profile (production recommended for store submission)\n\n3. If builds needed:\n   ```bash\n   eas build --platform {platform} --profile production\n   ```\n\n4. Wait for builds to complete\n\n5. If submitting to iOS App Store:\n   ```bash\n   eas submit --platform ios\n   ```\n   - Configure App Store Connect credentials if needed\n   - Select the build to submit\n   - Choose submission options\n\n6. If submitting to Google Play Store:\n   ```bash\n   eas submit --platform android\n   ```\n   - Configure Google Play credentials if needed\n   - Select the build to submit\n   - Choose track (internal, alpha, beta, production)\n\n7. Monitor submission status:\n   - Provide App Store Connect / Play Console links\n   - Report submission status\n   - Note any review requirements\n\n8. Provide next steps:\n   - App review timelines\n   - How to check status\n   - Rollout instructions\n\nReference the **eas-build-setup** skill."
              },
              {
                "name": "/expo-init",
                "description": "Initialize Expo project with React Native, TypeScript, Atomic Design, and modern tooling",
                "path": "tech-stacks/js/react-native/commands/expo-init.md",
                "frontmatter": {
                  "description": "Initialize Expo project with React Native, TypeScript, Atomic Design, and modern tooling"
                },
                "content": "# Initialize Expo Project\n\nInitialize a new React Native app with Expo, TypeScript strict mode, NativeWind, Atomic Design component structure, and modern tooling.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Ask user for project details using AskUserQuestion tool:\n   - Project name\n   - Include Gluestack-ui? (yes/no)\n   - State management (Zustand, Jotai, none)\n   - Package manager (npm, pnpm, yarn)\n   - Initialize EAS? (yes/no)\n\n1.5. Check PRD configuration for component organization preference:\n\n   Look for `componentOrganization` setting in:\n   - `.molcajete/prd/tech-stack.md` (YAML frontmatter)\n   - `.molcajete/prd/tech-stack.yaml`\n\n   **Valid values:**\n   - `atomic` (default) - Atomic Design pattern with atoms/, molecules/, organisms/, templates/\n   - `flat` - Simple flat components/ directory\n   - `feature-based` - Feature modules with shared components\n\n   ```yaml\n   # Example .molcajete/prd/tech-stack.yaml\n   techStack:\n     framework: react-native-expo\n     componentOrganization: atomic  # or 'flat' or 'feature-based'\n   ```\n\n   If no config found or value is `atomic`, proceed with Atomic Design (Step 3).\n   If `flat`, use flat structure (Step 3a).\n   If `feature-based`, use feature-based structure (Step 3b).\n\n2. Create project using Expo:\n   ```bash\n   npx create-expo-app@latest {project-name}\n   cd {project-name}\n   ```\n\n3. Create project structure with Atomic Design pattern:\n   ```\n   project/\n   â”œâ”€â”€ app/\n   â”‚   â”œâ”€â”€ (auth)/\n   â”‚   â”‚   â”œâ”€â”€ login.tsx\n   â”‚   â”‚   â””â”€â”€ _layout.tsx\n   â”‚   â”œâ”€â”€ (tabs)/\n   â”‚   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â”‚   â”œâ”€â”€ index.tsx\n   â”‚   â”‚   â””â”€â”€ profile.tsx\n   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â””â”€â”€ +not-found.tsx\n   â”œâ”€â”€ components/\n   â”‚   â”œâ”€â”€ atoms/\n   â”‚   â”‚   â”œâ”€â”€ Button/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx\n   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.stories.tsx\n   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts\n   â”‚   â”‚   â”‚   â””â”€â”€ __tests__/\n   â”‚   â”‚   â”‚       â””â”€â”€ Button.test.tsx\n   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â”œâ”€â”€ molecules/\n   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â”œâ”€â”€ organisms/\n   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â”œâ”€â”€ templates/\n   â”‚   â”‚   â”œâ”€â”€ ScreenLayout/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ ScreenLayout.tsx\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â””â”€â”€ index.ts              # Main barrel export\n   â”œâ”€â”€ hooks/\n   â”‚   â””â”€â”€ useAuth.ts\n   â”œâ”€â”€ store/           # If state management selected\n   â”‚   â””â”€â”€ authStore.ts\n   â”œâ”€â”€ lib/\n   â”‚   â”œâ”€â”€ api.ts\n   â”‚   â””â”€â”€ utils.ts\n   â”œâ”€â”€ constants/\n   â”‚   â”œâ”€â”€ Colors.ts\n   â”‚   â””â”€â”€ Sizes.ts\n   â”œâ”€â”€ assets/\n   â”‚   â”œâ”€â”€ images/\n   â”‚   â””â”€â”€ fonts/\n   â”œâ”€â”€ .storybook/\n   â”‚   â”œâ”€â”€ main.ts\n   â”‚   â””â”€â”€ preview.ts\n   â”œâ”€â”€ __tests__/\n   â”‚   â”œâ”€â”€ components/\n   â”‚   â””â”€â”€ e2e/\n   â”œâ”€â”€ app.json\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â”œâ”€â”€ tailwind.config.js\n   â””â”€â”€ package.json\n   ```\n\n4. Create barrel exports for each atomic level:\n\n   **components/atoms/index.ts:**\n   ```typescript\n   export { Button } from './Button';\n   export type { ButtonProps } from './Button/Button';\n   ```\n\n   **components/molecules/index.ts:**\n   ```typescript\n   // Export molecules as they are created\n   ```\n\n   **components/organisms/index.ts:**\n   ```typescript\n   // Export organisms as they are created\n   ```\n\n   **components/templates/index.ts:**\n   ```typescript\n   export { ScreenLayout } from './ScreenLayout';\n   ```\n\n   **components/index.ts:**\n   ```typescript\n   export * from './atoms';\n   export * from './molecules';\n   export * from './organisms';\n   export * from './templates';\n   ```\n\n3a. **ALTERNATIVE: Flat Structure** (if `componentOrganization: flat`):\n   ```\n   project/\n   â”œâ”€â”€ app/\n   â”‚   â”œâ”€â”€ (auth)/\n   â”‚   â”‚   â”œâ”€â”€ login.tsx\n   â”‚   â”‚   â””â”€â”€ _layout.tsx\n   â”‚   â”œâ”€â”€ (tabs)/\n   â”‚   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â”‚   â”œâ”€â”€ index.tsx\n   â”‚   â”‚   â””â”€â”€ profile.tsx\n   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â””â”€â”€ +not-found.tsx\n   â”œâ”€â”€ components/\n   â”‚   â”œâ”€â”€ Button/\n   â”‚   â”‚   â”œâ”€â”€ Button.tsx\n   â”‚   â”‚   â”œâ”€â”€ index.ts\n   â”‚   â”‚   â””â”€â”€ __tests__/\n   â”‚   â”‚       â””â”€â”€ Button.test.tsx\n   â”‚   â”œâ”€â”€ Input/\n   â”‚   â”œâ”€â”€ Header/\n   â”‚   â”œâ”€â”€ LoginForm/\n   â”‚   â””â”€â”€ index.ts              # Barrel export\n   â”œâ”€â”€ hooks/\n   â”œâ”€â”€ store/\n   â”œâ”€â”€ lib/\n   â”œâ”€â”€ constants/\n   â”œâ”€â”€ assets/\n   â”œâ”€â”€ app.json\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â”œâ”€â”€ tailwind.config.js\n   â””â”€â”€ package.json\n   ```\n\n   **Note:** Flat structure does not include Storybook setup by default. Skip Step 13 (Storybook).\n\n3b. **ALTERNATIVE: Feature-Based Structure** (if `componentOrganization: feature-based`):\n   ```\n   project/\n   â”œâ”€â”€ app/\n   â”‚   â”œâ”€â”€ (auth)/\n   â”‚   â”‚   â”œâ”€â”€ login.tsx\n   â”‚   â”‚   â””â”€â”€ _layout.tsx\n   â”‚   â”œâ”€â”€ (tabs)/\n   â”‚   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â”‚   â”œâ”€â”€ index.tsx\n   â”‚   â”‚   â””â”€â”€ profile.tsx\n   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â””â”€â”€ +not-found.tsx\n   â”œâ”€â”€ features/\n   â”‚   â”œâ”€â”€ auth/\n   â”‚   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”œâ”€â”€ profile/\n   â”‚   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â””â”€â”€ index.ts\n   â”œâ”€â”€ shared/\n   â”‚   â””â”€â”€ components/\n   â”‚       â”œâ”€â”€ Button/\n   â”‚       â”œâ”€â”€ Input/\n   â”‚       â””â”€â”€ index.ts\n   â”œâ”€â”€ hooks/\n   â”œâ”€â”€ lib/\n   â”œâ”€â”€ constants/\n   â”œâ”€â”€ assets/\n   â”œâ”€â”€ app.json\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â”œâ”€â”€ tailwind.config.js\n   â””â”€â”€ package.json\n   ```\n\n   **Note:** Feature-based structure does not include Storybook setup by default. Skip Step 13 (Storybook).\n\n5. Update `tsconfig.json` with strict configuration:\n   ```json\n   {\n     \"extends\": \"expo/tsconfig.base\",\n     \"compilerOptions\": {\n       \"strict\": true,\n       \"noImplicitAny\": true,\n       \"strictNullChecks\": true,\n       \"noUncheckedIndexedAccess\": true,\n       \"noUnusedLocals\": true,\n       \"noUnusedParameters\": true,\n       \"noImplicitReturns\": true,\n       \"baseUrl\": \".\",\n       \"paths\": {\n         \"@/*\": [\"./*\"]\n       }\n     }\n   }\n   ```\n\n6. Install NativeWind:\n   ```bash\n   npx expo install nativewind\n   npm install --dev tailwindcss\n   npx tailwindcss init\n   ```\n\n7. Create `tailwind.config.js`:\n   ```javascript\n   /** @type {import('tailwindcss').Config} */\n   module.exports = {\n     content: [\n       \"./app/**/*.{js,jsx,ts,tsx}\",\n       \"./components/**/*.{js,jsx,ts,tsx}\"\n     ],\n     presets: [require(\"nativewind/preset\")],\n     theme: {\n       extend: {},\n     },\n     plugins: [],\n   }\n   ```\n\n8. Update `babel.config.js`:\n   ```javascript\n   module.exports = function(api) {\n     api.cache(true);\n     return {\n       presets: ['babel-preset-expo'],\n       plugins: [\"nativewind/babel\"],\n     };\n   };\n   ```\n\n9. Create `biome.json` with strict rules (reference **biome-setup** skill from js/common)\n\n10. Create `jest.config.js`:\n   ```javascript\n   module.exports = {\n     preset: 'jest-expo',\n     transformIgnorePatterns: [\n       'node_modules/(?!((jest-)?react-native|@react-native(-community)?)|expo(nent)?|@expo(nent)?/.*|@expo-google-fonts/.*|react-navigation|@react-navigation/.*|@unimodules/.*|unimodules|sentry-expo|native-base|react-native-svg)'\n     ],\n     collectCoverageFrom: [\n       '**/*.{ts,tsx}',\n       '!**/coverage/**',\n       '!**/node_modules/**',\n       '!**/babel.config.js',\n       '!**/jest.setup.js'\n     ],\n     coverageThreshold: {\n       global: {\n         lines: 80,\n         functions: 80,\n         branches: 80,\n         statements: 80,\n       },\n     },\n   };\n   ```\n\n11. Update `package.json` scripts:\n    ```json\n    {\n      \"scripts\": {\n        \"start\": \"expo start\",\n        \"android\": \"expo start --android\",\n        \"ios\": \"expo start --ios\",\n        \"web\": \"expo start --web\",\n        \"type-check\": \"tsc --noEmit\",\n        \"lint\": \"biome check .\",\n        \"lint:fix\": \"biome check --write .\",\n        \"format\": \"biome format --write .\",\n        \"test\": \"jest\",\n        \"test:watch\": \"jest --watch\",\n        \"test:coverage\": \"jest --coverage\",\n        \"validate\": \"npm run type-check && npm run lint && npm test\",\n        \"storybook\": \"expo start --dev-client\",\n        \"storybook:ios\": \"expo start --dev-client --ios\",\n        \"storybook:android\": \"expo start --dev-client --android\"\n      }\n    }\n    ```\n\n12. Install dependencies:\n    - Core: expo, react-native, typescript\n    - Testing: jest-expo, @testing-library/react-native\n    - Biome\n    - Selected state management\n    - TanStack Query, React Hook Form, Zod\n\n13. Set up Storybook React Native (Atomic Design only - skip for flat/feature-based):\n\n    Install Storybook:\n    ```bash\n    npx -p @storybook/cli sb init --type react_native\n    npm install -D @storybook/addon-ondevice-controls @storybook/addon-ondevice-actions\n    ```\n\n    Create `.storybook/main.ts`:\n    ```typescript\n    import type { StorybookConfig } from '@storybook/react-native';\n\n    const config: StorybookConfig = {\n      stories: [\n        '../components/atoms/**/*.stories.@(ts|tsx)',\n        '../components/molecules/**/*.stories.@(ts|tsx)',\n        '../components/organisms/**/*.stories.@(ts|tsx)',\n      ],\n      addons: [\n        '@storybook/addon-ondevice-controls',\n        '@storybook/addon-ondevice-actions',\n      ],\n    };\n\n    export default config;\n    ```\n\n    Create `.storybook/preview.ts`:\n    ```typescript\n    import type { Preview } from '@storybook/react-native';\n\n    const preview: Preview = {\n      parameters: {\n        controls: {\n          matchers: {\n            color: /(background|color)$/i,\n            date: /Date$/i,\n          },\n        },\n      },\n    };\n\n    export default preview;\n    ```\n\n    **Note:** React Native Storybook runs on-device rather than in a web browser. Use the on-device addons for controls and actions.\n\n14. If Gluestack-ui selected:\n    ```bash\n    npx gluestack-ui init\n    ```\n\n15. If EAS selected:\n    ```bash\n    npm install -g eas-cli\n    eas login\n    eas build:configure\n    ```\n\n16. Create example Button atom component with accessibility:\n\n    **components/atoms/Button/Button.tsx:**\n    ```typescript\n    import { Pressable, Text, ActivityIndicator, StyleSheet } from 'react-native';\n\n    export interface ButtonProps {\n      variant: 'primary' | 'secondary' | 'danger';\n      size?: 'sm' | 'md' | 'lg';\n      loading?: boolean;\n      disabled?: boolean;\n      onPress?: () => void;\n      children: string;\n      accessibilityLabel?: string;\n    }\n\n    export function Button({\n      variant,\n      size = 'md',\n      loading,\n      disabled,\n      onPress,\n      children,\n      accessibilityLabel,\n    }: ButtonProps): React.ReactElement {\n      const isDisabled = disabled || loading;\n\n      return (\n        <Pressable\n          style={({ pressed }) => [\n            styles.base,\n            styles[variant],\n            styles[size],\n            isDisabled && styles.disabled,\n            pressed && !isDisabled && styles.pressed,\n          ]}\n          onPress={onPress}\n          disabled={isDisabled}\n          accessibilityLabel={accessibilityLabel || children}\n          accessibilityRole=\"button\"\n          accessibilityState={{ disabled: isDisabled }}\n        >\n          {loading && (\n            <ActivityIndicator\n              color={variant === 'secondary' ? '#374151' : '#ffffff'}\n              style={styles.spinner}\n            />\n          )}\n          <Text style={[styles.text, styles[`${variant}Text`]]}>\n            {children}\n          </Text>\n        </Pressable>\n      );\n    }\n\n    const styles = StyleSheet.create({\n      base: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        borderRadius: 8,\n        minHeight: 44, // Minimum touch target (Apple HIG)\n        minWidth: 44,\n      },\n      primary: {\n        backgroundColor: '#2563eb',\n      },\n      secondary: {\n        backgroundColor: '#e5e7eb',\n      },\n      danger: {\n        backgroundColor: '#dc2626',\n      },\n      sm: {\n        paddingHorizontal: 12,\n        paddingVertical: 6,\n      },\n      md: {\n        paddingHorizontal: 16,\n        paddingVertical: 10,\n      },\n      lg: {\n        paddingHorizontal: 24,\n        paddingVertical: 14,\n      },\n      disabled: {\n        opacity: 0.5,\n      },\n      pressed: {\n        opacity: 0.8,\n      },\n      spinner: {\n        marginRight: 8,\n      },\n      text: {\n        fontWeight: '600',\n        textAlign: 'center',\n      },\n      primaryText: {\n        color: '#ffffff',\n      },\n      secondaryText: {\n        color: '#1f2937',\n      },\n      dangerText: {\n        color: '#ffffff',\n      },\n    });\n    ```\n\n    **components/atoms/Button/Button.stories.tsx:**\n    ```typescript\n    import type { Meta, StoryObj } from '@storybook/react-native';\n    import { Button } from './Button';\n\n    const meta: Meta<typeof Button> = {\n      title: 'Atoms/Button',\n      component: Button,\n      argTypes: {\n        variant: {\n          control: 'select',\n          options: ['primary', 'secondary', 'danger'],\n        },\n        size: {\n          control: 'select',\n          options: ['sm', 'md', 'lg'],\n        },\n        loading: { control: 'boolean' },\n        disabled: { control: 'boolean' },\n      },\n    };\n\n    export default meta;\n    type Story = StoryObj<typeof Button>;\n\n    export const Primary: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Primary Button',\n      },\n    };\n\n    export const Secondary: Story = {\n      args: {\n        variant: 'secondary',\n        children: 'Secondary Button',\n      },\n    };\n\n    export const Danger: Story = {\n      args: {\n        variant: 'danger',\n        children: 'Delete',\n      },\n    };\n\n    export const Loading: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Saving...',\n        loading: true,\n      },\n    };\n\n    export const Disabled: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Disabled Button',\n        disabled: true,\n      },\n    };\n    ```\n\n    **components/atoms/Button/index.ts:**\n    ```typescript\n    export { Button } from './Button';\n    export type { ButtonProps } from './Button';\n    ```\n\n    **components/atoms/Button/__tests__/Button.test.tsx:**\n    ```typescript\n    import { render, screen, fireEvent } from '@testing-library/react-native';\n    import { Button } from '../Button';\n\n    describe('Button', () => {\n      it('renders children correctly', () => {\n        render(<Button variant=\"primary\" onPress={jest.fn()}>Click me</Button>);\n        expect(screen.getByText('Click me')).toBeTruthy();\n      });\n\n      it('calls onPress when pressed', () => {\n        const handlePress = jest.fn();\n        render(<Button variant=\"primary\" onPress={handlePress}>Click</Button>);\n\n        fireEvent.press(screen.getByRole('button'));\n\n        expect(handlePress).toHaveBeenCalledTimes(1);\n      });\n\n      it('does not call onPress when disabled', () => {\n        const handlePress = jest.fn();\n        render(<Button variant=\"primary\" onPress={handlePress} disabled>Click</Button>);\n\n        fireEvent.press(screen.getByRole('button'));\n\n        expect(handlePress).not.toHaveBeenCalled();\n      });\n\n      it('shows loading indicator when loading', () => {\n        render(<Button variant=\"primary\" loading>Loading</Button>);\n        expect(screen.getByRole('button')).toHaveAccessibilityState({ disabled: true });\n      });\n\n      it('has correct accessibility properties', () => {\n        render(\n          <Button variant=\"primary\" accessibilityLabel=\"Submit form\">Submit</Button>\n        );\n        expect(screen.getByLabelText('Submit form')).toBeTruthy();\n      });\n\n      it('has minimum touch target size', () => {\n        // Button should have minHeight and minWidth of 44 for accessibility\n        const { getByRole } = render(<Button variant=\"primary\">A</Button>);\n        const button = getByRole('button');\n        // Style assertions would be checked visually or with snapshot testing\n        expect(button).toBeTruthy();\n      });\n    });\n    ```\n\n    **Mobile-Specific Requirements (documented):**\n    - Minimum 44x44pt touch targets (Apple HIG, Material Design)\n    - `accessibilityLabel` for screen readers\n    - `accessibilityRole=\"button\"` for semantic meaning\n    - `accessibilityState={{ disabled }}` for state announcement\n    - Pressed state feedback via opacity change\n\n17. Create ScreenLayout template component\n\n18. Initialize git repository\n\n19. Run validation:\n    - `npm run type-check`\n    - `npm run lint`\n    - `npm test`\n\n20. Display next steps to user\n\n**Quality Requirements:**\n- All TypeScript strict flags enabled\n- Zero TypeScript errors or warnings\n- Zero linter warnings\n- NO `any` types allowed\n- Tests pass with 80%+ coverage\n\nReference the **expo-configuration**, **nativewind-patterns**, and **expo-router-patterns** skills."
              },
              {
                "name": "/preview",
                "description": "Preview React Native app with Expo Go",
                "path": "tech-stacks/js/react-native/commands/preview.md",
                "frontmatter": {
                  "description": "Preview React Native app with Expo Go"
                },
                "content": "# Preview with Expo Go\n\nStart the development server and preview the app on a device or simulator.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if Expo CLI is available:\n   ```bash\n   npx expo --version\n   ```\n\n2. Start the development server:\n   ```bash\n   npx expo start\n   ```\n\n3. Ask user for preview target using AskUserQuestion:\n   - iOS Simulator\n   - Android Emulator\n   - Expo Go (scan QR code)\n   - Web browser\n\n4. Launch on selected target:\n   ```bash\n   # iOS Simulator\n   npx expo start --ios\n\n   # Android Emulator\n   npx expo start --android\n\n   # Web\n   npx expo start --web\n   ```\n\n5. If using Expo Go:\n   - Display QR code in terminal\n   - Instruct user to scan with Expo Go app\n\n6. Monitor for errors and provide feedback\n\nReference the **expo-configuration** skill."
              },
              {
                "name": "/refactor-atomic-design",
                "description": "Refactor existing React Native (Expo) project to Atomic Design component structure",
                "path": "tech-stacks/js/react-native/commands/refactor-atomic-design.md",
                "frontmatter": {
                  "description": "Refactor existing React Native (Expo) project to Atomic Design component structure",
                  "agent": "code-analyzer"
                },
                "content": "# Refactor Atomic Design Command\n\nRefactor existing React Native (Expo) project to Atomic Design component structure with analysis, plan approval, and automated execution.\n\n## Parameters\n\n| Parameter | Type | Required | Default | Description |\n|-----------|------|----------|---------|-------------|\n| `--target` | string | No | components directory | Specific directory or component to refactor |\n| `--dry-run` | boolean | No | false | Show plan without executing |\n| `--skip-stories` | boolean | No | false | Skip Storybook story generation |\n| `--skip-tests` | boolean | No | false | Skip test file updates |\n\n## Workflow\n\n### Phase 1: Initialization\n\n1. Detect Expo project:\n   - Check for `app.json` or `app.config.js` -> Expo project\n   - Verify Expo Router in package.json\n\n2. Identify component directory:\n   - `components/` for Expo projects (no `src/` prefix)\n\n3. Verify or create atomic design directories:\n   ```\n   components/\n   â”œâ”€â”€ atoms/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â”œâ”€â”€ molecules/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â”œâ”€â”€ organisms/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â”œâ”€â”€ templates/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â””â”€â”€ index.ts\n   ```\n\n4. Create barrel exports if missing:\n\n   **Level barrel export template:**\n   ```typescript\n   // components/atoms/index.ts\n   // Barrel export for atoms\n   // Components will be added here as they are created or moved\n   ```\n\n   **Main barrel export template:**\n   ```typescript\n   // components/index.ts\n   export * from './atoms';\n   export * from './molecules';\n   export * from './organisms';\n   export * from './templates';\n   ```\n\n### Phase 2: Analysis\n\nInvoke the **code-analyzer** agent with reference to **atomic-design-mobile** skill to:\n\n1. Scan component directories using Glob patterns:\n   - `components/**/*.tsx` (excluding tests and stories)\n   - Exclude: `**/*.test.tsx`, `**/*.spec.tsx`, `**/*.stories.tsx`\n   - Exclude: Components already in atomic directories (`atoms/`, `molecules/`, `organisms/`, `templates/`)\n   - Exclude: `app/**` (Expo Router screens)\n\n2. Analyze each component:\n   - Read component code\n   - Identify imports and dependencies\n   - Detect state usage (useState, useEffect, stores)\n   - Check for data fetching (useQuery, fetch)\n   - **Detect accessibility props** (accessibilityLabel, accessibilityRole, accessibilityState)\n   - **Detect platform-specific code** (Platform.OS, Platform.select)\n\n3. Classify components using atomic-design-mobile skill criteria:\n   - **Atom**: No custom imports, stateless, 44pt touch targets, accessibility props\n   - **Molecule**: Imports 2+ atoms, single purpose, keyboard handling\n   - **Organism**: Larger section, may have business logic, safe area handling\n   - **Template**: Accepts children, named with \"Layout\" suffix, safe areas, keyboard avoidance\n   - **Screen**: Located in app/ directory, connects to data sources (NOT moved)\n\n4. Assign confidence levels:\n   - **High**: Component clearly matches one level's criteria with accessibility\n   - **Medium**: Component partially matches multiple levels\n   - **Low**: Component has ambiguous characteristics or missing accessibility\n\n5. Detect circular dependencies and generate warnings\n\n### Phase 3: Plan Generation\n\nGenerate RefactoringPlan with:\n- Project metadata (name, framework: expo, component directory)\n- Component migrations (source path, destination path, level, confidence, reason)\n- Affected files (imports to update)\n- Summary statistics\n- Warnings (including accessibility warnings)\n\n### Phase 4: User Approval\n\nPresent plan using AskUserQuestion with options:\n\n1. **Approve all and execute** - Proceed with full refactoring\n2. **Review and modify classifications** - Change component levels before execution\n3. **Select specific components** - Partial refactoring\n4. **Cancel** - Exit without changes\n\n### Phase 5: Refactoring Execution\n\n1. Move component directories to atomic level folders:\n   - `components/Button/` -> `components/atoms/Button/`\n   - Include all files: `*.tsx`, `index.ts`, `__tests__/*`, `*.stories.tsx`\n\n2. Update all import statements across codebase:\n   - `from '@/components/Button'` -> `from '@/components/atoms'`\n   - `from '../Button'` -> `from '@/components/atoms'`\n\n3. Create/update barrel exports at each level:\n   ```typescript\n   // components/atoms/index.ts\n   export { Button } from './Button';\n   export type { ButtonProps } from './Button';\n   ```\n\n4. Generate Storybook stories (if not `--skip-stories`):\n   - Only for atoms, molecules, organisms (NOT templates)\n   - Use React Native Storybook format (@storybook/react-native)\n   - Use title hierarchy: `'Atoms/Button'`, `'Molecules/FormField'`\n\n5. Update test file imports (if not `--skip-tests`)\n\n### Phase 6: Verification\n\nExecute **post-change-verification skill** protocol:\n\n1. Detect package manager (check lock files: pnpm-lock.yaml, yarn.lock, package-lock.json, bun.lockb)\n\n2. Run format:\n   ```bash\n   <pkg> run format\n   ```\n\n3. Run lint:\n   ```bash\n   <pkg> run lint\n   ```\n\n4. Run type-check:\n   ```bash\n   <pkg> run type-check   # or npx tsc --noEmit\n   ```\n\n5. Run tests:\n   ```bash\n   <pkg> test\n   ```\n\n6. Display completion summary with verification results:\n   ```\n   === REFACTORING COMPLETE ===\n\n   Files changed: 35\n   Components moved: 18\n   Stories created: 14\n   Barrel exports updated: 5\n\n   === POST-CHANGE VERIFICATION ===\n\n   Format:     PASSED\n   Lint:       PASSED (0 errors, 0 warnings)\n   Type-check: PASSED (0 errors)\n   Tests:      PASSED (18/18)\n\n   Pre-existing issues: NONE\n\n   === TASK COMPLETE ===\n\n   Next steps:\n   1. Run Storybook on device to verify stories\n   2. Review the changes in your git diff\n   3. Commit when satisfied\n\n   To undo: git checkout -- components/\n   ```\n\n## Directory Structure\n\n### Before Refactoring\n\n```\ncomponents/\n  Button/\n    Button.tsx\n    index.ts\n  Input/\n    Input.tsx\n    index.ts\n  SearchBar/\n    SearchBar.tsx\n    index.ts\n  Header/\n    Header.tsx\n    index.ts\n  ScreenLayout/\n    ScreenLayout.tsx\n    index.ts\n```\n\n### After Refactoring\n\n```\ncomponents/\n  atoms/\n    Button/\n      Button.tsx\n      Button.stories.tsx\n      index.ts\n    Input/\n      Input.tsx\n      Input.stories.tsx\n      index.ts\n    index.ts\n  molecules/\n    SearchBar/\n      SearchBar.tsx\n      SearchBar.stories.tsx\n      index.ts\n    index.ts\n  organisms/\n    Header/\n      Header.tsx\n      Header.stories.tsx\n      index.ts\n    index.ts\n  templates/\n    ScreenLayout/\n      ScreenLayout.tsx\n      index.ts\n    index.ts\n  index.ts\n```\n\n## Examples\n\n### Full Refactoring\n\n```bash\n/react-native:refactor-atomic-design\n```\n\n### Refactor Specific Directory\n\n```bash\n/react-native:refactor-atomic-design --target components/ui\n```\n\n### Skip Story Generation\n\n```bash\n/react-native:refactor-atomic-design --skip-stories\n```\n\n### Dry Run (Show Plan Only)\n\n```bash\n/react-native:refactor-atomic-design --dry-run\n```\n\n## Skills Referenced\n\n- **atomic-design-mobile** - Classification criteria with mobile accessibility, touch targets, Storybook templates, barrel export patterns\n- **post-change-verification** - Mandatory verification protocol after code changes (used in Phase 6)\n\n## Notes\n\n- Expo projects do NOT use a `src/` directory\n- Recommend committing or stashing changes before running\n- Previously refactored components (already in atomic directories) are skipped\n- Running command twice produces same result (idempotent)\n- Screens in `app/` directory remain there (Expo Router convention)\n- Stories use @storybook/react-native format for on-device viewing"
              },
              {
                "name": "/test-component",
                "description": "Test React Native components with Jest and Testing Library",
                "path": "tech-stacks/js/react-native/commands/test-component.md",
                "frontmatter": {
                  "description": "Test React Native components with Jest and Testing Library"
                },
                "content": "# Test React Native Components\n\nRun unit tests for React Native components using Jest and React Native Testing Library.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if testing dependencies are installed:\n   ```bash\n   npm list jest-expo @testing-library/react-native\n   ```\n\n2. If not installed:\n   ```bash\n   npm install --save-dev jest-expo @testing-library/react-native @testing-library/jest-native\n   ```\n\n3. Ask user for test scope using AskUserQuestion:\n   - Run all tests\n   - Run specific component tests\n   - Run with coverage\n   - Run in watch mode\n\n4. Run tests based on selection:\n   ```bash\n   # All tests\n   npm test\n\n   # Specific component\n   npm test -- Button\n\n   # With coverage\n   npm run test:coverage\n\n   # Watch mode\n   npm run test:watch\n   ```\n\n5. Analyze test results:\n   - Report passing/failing tests\n   - Show coverage metrics\n   - Identify uncovered code paths\n\n6. If tests fail:\n   - Analyze failure reasons\n   - Suggest fixes\n\nReference the **component-testing-mobile** skill."
              },
              {
                "name": "/test-e2e",
                "description": "Run Maestro E2E tests for React Native app",
                "path": "tech-stacks/js/react-native/commands/test-e2e.md",
                "frontmatter": {
                  "description": "Run Maestro E2E tests for React Native app"
                },
                "content": "# Run Maestro E2E Tests\n\nRun end-to-end tests using Maestro.\n\nUse the Task tool to launch the **e2e-tester** agent with instructions:\n\n1. Check if Maestro is installed:\n   ```bash\n   maestro -v\n   ```\n\n2. If not installed, guide user to install:\n   ```bash\n   # macOS/Linux\n   curl -Ls \"https://get.maestro.mobile.dev\" | bash\n\n   # Windows\n   # Download from https://maestro.mobile.dev\n   ```\n\n3. Find Maestro test files:\n   ```bash\n   find __tests__/e2e -name \"*.yaml\"\n   ```\n\n4. Ask user for test options using AskUserQuestion:\n   - Platform (iOS, Android)\n   - Run all tests or specific flow\n   - Generate report\n\n5. Run tests on selected platform:\n   ```bash\n   # iOS Simulator\n   maestro test __tests__/e2e/\n\n   # Android Emulator\n   maestro test __tests__/e2e/ --platform android\n   ```\n\n6. Generate report if requested:\n   ```bash\n   maestro test __tests__/e2e/ --format junit --output test-results/\n   ```\n\n7. Analyze results and provide feedback\n\nReference the **maestro-testing** skill."
              },
              {
                "name": "/update-ota",
                "description": "Push over-the-air (OTA) update using EAS Update",
                "path": "tech-stacks/js/react-native/commands/update-ota.md",
                "frontmatter": {
                  "description": "Push over-the-air (OTA) update using EAS Update"
                },
                "content": "# Push OTA Update\n\nPush over-the-air update to published apps using EAS Update.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if EAS Update is configured in `app.json`:\n   ```json\n   {\n     \"expo\": {\n       \"updates\": {\n         \"url\": \"https://u.expo.dev/[your-project-id]\"\n       },\n       \"runtimeVersion\": {\n         \"policy\": \"appVersion\"\n       }\n     }\n   }\n   ```\n\n2. Verify EAS Update is set up:\n   ```bash\n   eas update:configure\n   ```\n\n3. Ask user for update details using AskUserQuestion:\n   - Branch (production, staging, preview)\n   - Message describing the update\n   - Channel (if using multiple channels)\n\n4. Run pre-update checks:\n   ```bash\n   npm run type-check\n   npm run lint\n   npm test\n   ```\n\n5. Publish the update:\n   ```bash\n   eas update --branch {branch} --message \"{message}\"\n   ```\n\n6. Monitor update status:\n   - Provide update ID\n   - Show update URL\n   - Confirm deployment\n\n7. Verify update is live:\n   - Check EAS dashboard\n   - Test on device (may need app restart)\n\n8. Provide rollback instructions if needed:\n   ```bash\n   eas update:rollback --branch {branch}\n   ```\n\n**Important Notes:**\n- OTA updates only work for JavaScript/TypeScript changes\n- Native code changes require a new build\n- Users receive updates on next app launch\n\nReference the **eas-update-setup** skill."
              },
              {
                "name": "/analyze",
                "description": "Analyze bundle size and dependencies",
                "path": "tech-stacks/js/react/commands/analyze.md",
                "frontmatter": {
                  "description": "Analyze bundle size and dependencies",
                  "model": "haiku"
                },
                "content": "# Analyze Bundle Size\n\nAnalyze the production bundle to identify large dependencies and optimization opportunities.\n\nExecute the following workflow:\n\n1. Detect project type:\n   - Check for `next.config.ts` â†’ Next.js project\n   - Check for `vite.config.ts` â†’ Vite project\n\n2. Install analysis tools if needed:\n\n   **For Vite:**\n   ```bash\n   npm install -D rollup-plugin-visualizer\n   ```\n\n   **For Next.js:**\n   ```bash\n   npm install -D @next/bundle-analyzer\n   ```\n\n3. Configure analysis:\n\n   **For Vite (vite.config.ts):**\n   ```typescript\n   import { visualizer } from 'rollup-plugin-visualizer';\n\n   export default defineConfig({\n     plugins: [\n       react(),\n       visualizer({\n         filename: 'stats.html',\n         open: true,\n         gzipSize: true,\n         brotliSize: true,\n       }),\n     ],\n   });\n   ```\n\n   **For Next.js (next.config.ts):**\n   ```typescript\n   const withBundleAnalyzer = require('@next/bundle-analyzer')({\n     enabled: process.env.ANALYZE === 'true',\n   });\n\n   export default withBundleAnalyzer(config);\n   ```\n\n4. Run analysis:\n\n   **For Vite:**\n   ```bash\n   npm run build\n   # Opens stats.html automatically\n   ```\n\n   **For Next.js:**\n   ```bash\n   ANALYZE=true npm run build\n   ```\n\n5. Generate report showing:\n   - Total bundle size (raw and gzipped)\n   - Largest dependencies\n   - Code splitting effectiveness\n   - Potential duplicates\n\n6. Provide optimization recommendations:\n   - Large libraries to lazy load\n   - Dependencies that could be replaced\n   - Code that could be split\n   - Tree shaking opportunities\n\n7. Common issues to check:\n   - moment.js â†’ Use date-fns or dayjs\n   - lodash â†’ Import individual functions\n   - Large icon libraries â†’ Import specific icons\n   - Unused dependencies â†’ Remove them\n\n**Target Metrics:**\n- Initial JS: < 100KB (gzipped)\n- Per-route JS: < 50KB (gzipped)\n- Total bundle: < 500KB (gzipped)\n\nReference the **bundle-optimization** skill for detailed optimization patterns."
              },
              {
                "name": "/build-nextjs",
                "description": "Build Next.js app for production",
                "path": "tech-stacks/js/react/commands/build-nextjs.md",
                "frontmatter": {
                  "description": "Build Next.js app for production",
                  "model": "haiku"
                },
                "content": "# Build Next.js App\n\nBuild the Next.js application for production deployment.\n\nExecute the following workflow:\n\n1. Run quality checks first:\n   ```bash\n   npm run validate\n   ```\n\n2. Build for production:\n   ```bash\n   npm run build\n   ```\n\n3. The build process will:\n   - Type-check with TypeScript\n   - Lint with configured linter\n   - Generate optimized production build\n   - Create `.next/` directory\n   - Static export if configured\n\n4. Build output:\n   ```\n   .next/\n   â”œâ”€â”€ cache/\n   â”œâ”€â”€ server/\n   â”‚   â”œâ”€â”€ app/\n   â”‚   â””â”€â”€ pages/\n   â”œâ”€â”€ static/\n   â”‚   â”œâ”€â”€ chunks/\n   â”‚   â””â”€â”€ css/\n   â””â”€â”€ BUILD_ID\n   ```\n\n5. Start production server:\n   ```bash\n   npm run start\n   ```\n\n6. For static export (if applicable):\n   ```bash\n   npm run build\n   # Output: out/\n   ```\n\n## Build Configuration\n\n```typescript\n// next.config.ts\nimport type { NextConfig } from 'next';\n\nconst config: NextConfig = {\n  reactStrictMode: true,\n  typescript: {\n    ignoreBuildErrors: false, // NEVER ignore\n  },\n  eslint: {\n    ignoreDuringBuilds: false, // NEVER ignore\n  },\n  output: 'standalone', // For Docker deployments\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'example.com',\n      },\n    ],\n  },\n};\n\nexport default config;\n```\n\n## Static Export Configuration\n\n```typescript\n// next.config.ts\nconst config: NextConfig = {\n  output: 'export',\n  images: {\n    unoptimized: true, // Required for static export\n  },\n  trailingSlash: true,\n};\n```\n\n## Build Analysis\n\nEnable bundle analysis:\n\n```bash\nANALYZE=true npm run build\n```\n\n## Environment Variables\n\n```bash\n# .env.production\nNEXT_PUBLIC_API_URL=https://api.production.com\nDATABASE_URL=postgresql://...\n```\n\n## CI/CD Integration\n\n```yaml\n# GitHub Actions\n- name: Build\n  run: npm run build\n  env:\n    DATABASE_URL: ${{ secrets.DATABASE_URL }}\n    NEXT_PUBLIC_API_URL: ${{ secrets.API_URL }}\n\n- name: Upload build\n  uses: actions/upload-artifact@v4\n  with:\n    name: nextjs-build\n    path: .next/\n```\n\n## Standalone Build (for Docker)\n\nWith `output: 'standalone'`:\n\n```dockerfile\nFROM node:22-alpine AS runner\nWORKDIR /app\n\nCOPY --from=builder /app/.next/standalone ./\nCOPY --from=builder /app/.next/static ./.next/static\nCOPY --from=builder /app/public ./public\n\nENV NODE_ENV=production\nEXPOSE 3000\nCMD [\"node\", \"server.js\"]\n```\n\n**Quality Requirements:**\n- Zero TypeScript errors\n- Zero linter warnings\n- All tests pass\n- Build succeeds without errors\n\nReference the **nextjs-configuration** and **nextjs-deployment** skills."
              },
              {
                "name": "/build-spa",
                "description": "Build Vite SPA for production",
                "path": "tech-stacks/js/react/commands/build-spa.md",
                "frontmatter": {
                  "description": "Build Vite SPA for production",
                  "model": "haiku"
                },
                "content": "# Build Vite SPA\n\nBuild the Vite SPA for production deployment.\n\nExecute the following workflow:\n\n1. Run quality checks first:\n   ```bash\n   npm run validate\n   ```\n\n2. Build for production:\n   ```bash\n   npm run build\n   ```\n\n3. The build process will:\n   - Type-check with TypeScript\n   - Bundle with Vite/Rollup\n   - Minify and optimize\n   - Generate source maps\n   - Output to `dist/` directory\n\n4. Build output structure:\n   ```\n   dist/\n   â”œâ”€â”€ index.html\n   â”œâ”€â”€ assets/\n   â”‚   â”œâ”€â”€ index-[hash].js\n   â”‚   â”œâ”€â”€ index-[hash].css\n   â”‚   â””â”€â”€ vendor-[hash].js\n   â””â”€â”€ ...\n   ```\n\n5. Preview the build:\n   ```bash\n   npm run preview\n   ```\n\n6. Verify build:\n   - Check console for errors\n   - Test all routes\n   - Verify assets load\n   - Check performance\n\n## Build Optimization\n\nThe build should include:\n\n```typescript\n// vite.config.ts\nexport default defineConfig({\n  build: {\n    target: 'ES2022',\n    sourcemap: true,\n    minify: 'esbuild',\n    rollupOptions: {\n      output: {\n        manualChunks: {\n          'vendor-react': ['react', 'react-dom'],\n          'vendor-ui': ['@radix-ui/react-dialog', '@radix-ui/react-dropdown-menu'],\n        },\n      },\n    },\n  },\n});\n```\n\n## Build Size Targets\n\n| Metric | Target |\n|--------|--------|\n| Initial JS | < 100KB (gzipped) |\n| Total JS | < 500KB (gzipped) |\n| CSS | < 50KB (gzipped) |\n| Images | Optimized |\n\n## Environment Variables\n\nEnsure production environment variables are set:\n\n```bash\n# .env.production\nVITE_API_URL=https://api.production.com\nVITE_APP_ENV=production\n```\n\n## CI/CD Integration\n\n```yaml\n# GitHub Actions\n- name: Build\n  run: npm run build\n  env:\n    VITE_API_URL: ${{ secrets.PROD_API_URL }}\n\n- name: Upload artifacts\n  uses: actions/upload-artifact@v4\n  with:\n    name: dist\n    path: dist/\n```\n\n**Quality Requirements:**\n- Zero TypeScript errors\n- Zero linter warnings\n- All tests pass\n- Build succeeds without errors\n\nReference the **vite-configuration** and **bundle-optimization** skills."
              },
              {
                "name": "/deploy-cloudflare",
                "description": "Deploy to Cloudflare Pages",
                "path": "tech-stacks/js/react/commands/deploy-cloudflare.md",
                "frontmatter": {
                  "description": "Deploy to Cloudflare Pages",
                  "model": "haiku"
                },
                "content": "# Deploy to Cloudflare Pages\n\nDeploy the React application to Cloudflare Pages.\n\nExecute the following workflow:\n\n1. Ensure Wrangler CLI is installed:\n   ```bash\n   npm install -g wrangler\n   ```\n\n2. Login to Cloudflare:\n   ```bash\n   wrangler login\n   ```\n\n3. Run quality checks:\n   ```bash\n   npm run validate\n   ```\n\n4. Build the project:\n   ```bash\n   npm run build\n   ```\n\n5. Create Pages project (first time):\n   ```bash\n   wrangler pages project create my-app\n   ```\n\n6. Deploy:\n   ```bash\n   wrangler pages deploy dist\n   ```\n\n## Project Configuration\n\nCreate `wrangler.toml`:\n\n```toml\nname = \"my-react-app\"\ncompatibility_date = \"2024-01-01\"\npages_build_output_dir = \"dist\"\n\n[build]\ncommand = \"npm run build\"\n\n# Environment variables\n[vars]\nVITE_API_URL = \"https://api.production.com\"\n```\n\n## GitHub Integration\n\n1. Go to https://dash.cloudflare.com\n2. Select Workers & Pages\n3. Create application > Pages > Connect to Git\n4. Select repository\n5. Configure build settings:\n   - Framework preset: Vite\n   - Build command: `npm run build`\n   - Build output directory: `dist`\n\nFor Next.js:\n- Framework preset: Next.js\n- Build command: `npm run build`\n- Build output directory: `.next`\n\n## Environment Variables\n\n```bash\n# Via Wrangler\nwrangler pages secret put API_KEY\n```\n\nOr via dashboard: Workers & Pages > [Project] > Settings > Environment variables\n\n## Functions (Edge)\n\nCreate edge functions in `functions/`:\n\n```typescript\n// functions/api/hello.ts\nexport async function onRequest(context: EventContext<unknown, string, unknown>) {\n  return new Response(JSON.stringify({ message: 'Hello from the edge!' }), {\n    headers: { 'Content-Type': 'application/json' },\n  });\n}\n```\n\n## Custom Domain\n\n```bash\n# Via dashboard\n# Workers & Pages > [Project] > Custom domains > Add\n```\n\n## SPA Routing\n\nCreate `_routes.json` in `public/`:\n\n```json\n{\n  \"version\": 1,\n  \"include\": [\"/*\"],\n  \"exclude\": [\"/assets/*\"]\n}\n```\n\nOr create `functions/_middleware.ts`:\n\n```typescript\nexport async function onRequest(context: EventContext<unknown, string, unknown>) {\n  try {\n    return await context.next();\n  } catch {\n    return context.env.ASSETS.fetch(new Request(`${context.request.url.split('/')[0]}/index.html`));\n  }\n}\n```\n\n## Headers Configuration\n\nCreate `_headers` in `public/`:\n\n```\n/*\n  X-Frame-Options: DENY\n  X-Content-Type-Options: nosniff\n\n/assets/*\n  Cache-Control: public, max-age=31536000, immutable\n```\n\n## Deployment Checklist\n\n- [ ] All tests pass\n- [ ] Build succeeds locally\n- [ ] wrangler.toml configured\n- [ ] Environment variables set\n- [ ] Custom domain configured (optional)\n- [ ] Preview deployment verified\n- [ ] Production deployment verified\n\n## Rollback\n\nVia dashboard: Workers & Pages > [Project] > Deployments > Roll back to this deployment\n\n## CI/CD with GitHub Actions\n\n```yaml\nname: Deploy to Cloudflare Pages\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: read\n      deployments: write\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Node\n        uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Build\n        run: npm run build\n\n      - name: Deploy to Cloudflare Pages\n        uses: cloudflare/pages-action@v1\n        with:\n          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}\n          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}\n          projectName: my-react-app\n          directory: dist\n          gitHubToken: ${{ secrets.GITHUB_TOKEN }}\n```\n\n**Notes:**\n- Global edge network (300+ locations)\n- Automatic HTTPS\n- Unlimited bandwidth (free tier)\n- Workers integration\n- Web Analytics built-in\n\nReference the **vite-deployment** skill."
              },
              {
                "name": "/deploy-netlify",
                "description": "Deploy to Netlify",
                "path": "tech-stacks/js/react/commands/deploy-netlify.md",
                "frontmatter": {
                  "description": "Deploy to Netlify",
                  "model": "haiku"
                },
                "content": "# Deploy to Netlify\n\nDeploy the React application to Netlify.\n\nExecute the following workflow:\n\n1. Ensure Netlify CLI is installed:\n   ```bash\n   npm install -g netlify-cli\n   ```\n\n2. Login to Netlify:\n   ```bash\n   netlify login\n   ```\n\n3. Run quality checks:\n   ```bash\n   npm run validate\n   ```\n\n4. Build the project:\n   ```bash\n   npm run build\n   ```\n\n5. Deploy to preview:\n   ```bash\n   netlify deploy\n   ```\n\n6. Deploy to production:\n   ```bash\n   netlify deploy --prod\n   ```\n\n## Project Configuration\n\nCreate `netlify.toml`:\n\n```toml\n[build]\n  command = \"npm run build\"\n  publish = \"dist\"\n\n# For SPA routing\n[[redirects]]\n  from = \"/*\"\n  to = \"/index.html\"\n  status = 200\n\n# Environment variables\n[build.environment]\n  NODE_VERSION = \"22\"\n\n# Headers\n[[headers]]\n  for = \"/*\"\n  [headers.values]\n    X-Frame-Options = \"DENY\"\n    X-Content-Type-Options = \"nosniff\"\n\n# Cache static assets\n[[headers]]\n  for = \"/assets/*\"\n  [headers.values]\n    Cache-Control = \"public, max-age=31536000, immutable\"\n```\n\nFor Next.js:\n\n```toml\n[build]\n  command = \"npm run build\"\n  publish = \".next\"\n\n[[plugins]]\n  package = \"@netlify/plugin-nextjs\"\n```\n\n## Environment Variables\n\nSet via CLI:\n\n```bash\nnetlify env:set VITE_API_URL \"https://api.production.com\"\nnetlify env:set DATABASE_URL \"postgresql://...\"\n```\n\nOr via dashboard at https://app.netlify.com/sites/[site]/settings/env\n\n## GitHub Integration\n\n1. Go to https://app.netlify.com\n2. Click \"Add new site\" > \"Import an existing project\"\n3. Connect GitHub repository\n4. Configure build settings\n5. Deploy\n\n## Build Settings (via UI)\n\nFor Vite SPA:\n- Build command: `npm run build`\n- Publish directory: `dist`\n\nFor Next.js:\n- Build command: `npm run build`\n- Publish directory: `.next`\n- Add Next.js plugin\n\n## Functions (Serverless)\n\nCreate serverless functions in `netlify/functions/`:\n\n```typescript\n// netlify/functions/hello.ts\nimport type { Handler } from '@netlify/functions';\n\nexport const handler: Handler = async (event, context) => {\n  return {\n    statusCode: 200,\n    body: JSON.stringify({ message: 'Hello from Netlify!' }),\n  };\n};\n```\n\n## Custom Domain\n\n```bash\n# Add domain\nnetlify domains:add example.com\n```\n\nOr via dashboard: Sites > Domain settings > Add custom domain\n\n## Deployment Checklist\n\n- [ ] All tests pass\n- [ ] Build succeeds locally\n- [ ] netlify.toml configured\n- [ ] Environment variables set\n- [ ] Preview deployment verified\n- [ ] Production deployment verified\n\n## Rollback\n\nVia dashboard: Deploys > Select previous deploy > Publish deploy\n\n## CI/CD with GitHub Actions\n\n```yaml\nname: Deploy to Netlify\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Node\n        uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Build\n        run: npm run build\n\n      - name: Deploy to Netlify\n        uses: nwtgck/actions-netlify@v3\n        with:\n          publish-dir: './dist'\n          production-deploy: true\n        env:\n          NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}\n          NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}\n```\n\n**Notes:**\n- Automatic HTTPS\n- Global CDN\n- Deploy previews for PRs\n- Serverless functions\n- Edge functions\n\nReference the **vite-deployment** skill."
              },
              {
                "name": "/deploy-vercel",
                "description": "Deploy to Vercel",
                "path": "tech-stacks/js/react/commands/deploy-vercel.md",
                "frontmatter": {
                  "description": "Deploy to Vercel",
                  "model": "haiku"
                },
                "content": "# Deploy to Vercel\n\nDeploy the React application to Vercel.\n\nExecute the following workflow:\n\n1. Ensure Vercel CLI is installed:\n   ```bash\n   npm install -g vercel\n   ```\n\n2. Login to Vercel (if not already):\n   ```bash\n   vercel login\n   ```\n\n3. Run quality checks:\n   ```bash\n   npm run validate\n   ```\n\n4. Deploy to preview:\n   ```bash\n   vercel\n   ```\n\n5. Deploy to production:\n   ```bash\n   vercel --prod\n   ```\n\n## Project Configuration\n\nCreate `vercel.json` for custom configuration:\n\n```json\n{\n  \"buildCommand\": \"npm run build\",\n  \"outputDirectory\": \"dist\",\n  \"framework\": \"vite\",\n  \"rewrites\": [\n    { \"source\": \"/(.*)\", \"destination\": \"/\" }\n  ]\n}\n```\n\nFor Next.js (auto-detected):\n\n```json\n{\n  \"framework\": \"nextjs\"\n}\n```\n\n## Environment Variables\n\nSet environment variables in Vercel:\n\n```bash\n# Via CLI\nvercel env add VITE_API_URL production\nvercel env add DATABASE_URL production\n\n# Or via dashboard\n# https://vercel.com/[team]/[project]/settings/environment-variables\n```\n\n## GitHub Integration\n\n1. Connect GitHub repository at vercel.com\n2. Enable automatic deployments\n3. Configure branch deployments:\n   - Production: main\n   - Preview: all other branches\n\n## Build Settings\n\nFor Vite SPA:\n- Framework Preset: Vite\n- Build Command: `npm run build`\n- Output Directory: `dist`\n- Install Command: `npm install`\n\nFor Next.js:\n- Framework Preset: Next.js\n- Build Command: `npm run build`\n- Output Directory: `.next`\n\n## Custom Domain\n\n```bash\n# Add domain\nvercel domains add example.com\n\n# Or via dashboard\n# https://vercel.com/[team]/[project]/settings/domains\n```\n\n## Deployment Checklist\n\n- [ ] All tests pass\n- [ ] Build succeeds locally\n- [ ] Environment variables set\n- [ ] Domain configured (if applicable)\n- [ ] Preview deployment verified\n- [ ] Production deployment verified\n\n## Rollback\n\n```bash\n# List deployments\nvercel ls\n\n# Rollback to previous deployment\nvercel rollback\n```\n\n## CI/CD with GitHub Actions\n\n```yaml\nname: Deploy to Vercel\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Deploy to Vercel\n        uses: amondnet/vercel-action@v25\n        with:\n          vercel-token: ${{ secrets.VERCEL_TOKEN }}\n          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}\n          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}\n          vercel-args: '--prod'\n```\n\n**Notes:**\n- Vercel auto-detects framework (Next.js, Vite)\n- Serverless Functions for API routes\n- Edge Functions for middleware\n- Automatic HTTPS and CDN\n\nReference the **vite-deployment** and **nextjs-deployment** skills."
              },
              {
                "name": "/nextjs-init",
                "description": "Initialize Next.js 15 project with App Router, TypeScript, Atomic Design, and Storybook",
                "path": "tech-stacks/js/react/commands/nextjs-init.md",
                "frontmatter": {
                  "description": "Initialize Next.js 15 project with App Router, TypeScript, Atomic Design, and Storybook"
                },
                "content": "# Initialize Next.js Project\n\nInitialize a new Next.js 15 project with App Router, TypeScript strict mode, Atomic Design component structure, and Storybook.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Ask user for project details using AskUserQuestion tool:\n   - Project name\n   - CSS solution (Tailwind CSS, CSS Modules, styled-components)\n   - State management (Zustand, Jotai, none)\n   - UI library (shadcn/ui, Radix UI, none)\n   - Data fetching (TanStack Query, tRPC, native)\n   - Database (Prisma, Drizzle, none)\n   - Authentication (NextAuth.js, Clerk, none)\n   - Package manager (npm, pnpm, yarn)\n\n1.5. Check PRD configuration for component organization preference:\n\n   Look for `componentOrganization` setting in:\n   - `.molcajete/prd/tech-stack.md` (YAML frontmatter)\n   - `.molcajete/prd/tech-stack.yaml`\n\n   **Valid values:**\n   - `atomic` (default) - Atomic Design pattern with atoms/, molecules/, organisms/, templates/\n   - `flat` - Simple flat components/ directory\n   - `feature-based` - Feature modules with shared components\n\n   ```yaml\n   # Example .molcajete/prd/tech-stack.yaml\n   techStack:\n     framework: react-nextjs\n     componentOrganization: atomic  # or 'flat' or 'feature-based'\n   ```\n\n   If no config found or value is `atomic`, proceed with Atomic Design (Step 3).\n   If `flat`, use flat structure (Step 3a).\n   If `feature-based`, use feature-based structure (Step 3b).\n\n2. Create project using create-next-app:\n   ```bash\n   npx create-next-app@latest {project-name} --typescript --tailwind --eslint --app --src-dir --import-alias \"@/*\"\n   cd {project-name}\n   ```\n\n3. Create project structure with Atomic Design pattern:\n   ```\n   project/\n   â”œâ”€â”€ src/\n   â”‚   â”œâ”€â”€ app/\n   â”‚   â”‚   â”œâ”€â”€ layout.tsx            # Root layout - uses templates\n   â”‚   â”‚   â”œâ”€â”€ page.tsx              # Home page\n   â”‚   â”‚   â”œâ”€â”€ globals.css\n   â”‚   â”‚   â””â”€â”€ api/\n   â”‚   â”‚       â””â”€â”€ health/\n   â”‚   â”‚           â””â”€â”€ route.ts\n   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”œâ”€â”€ atoms/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ Button/\n   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx\n   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.stories.tsx\n   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts\n   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ __tests__/\n   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ Button.test.tsx\n   â”‚   â”‚   â”‚   â”œâ”€â”€ Input/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ Label/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export for atoms\n   â”‚   â”‚   â”œâ”€â”€ molecules/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ FormField/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchForm/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export for molecules\n   â”‚   â”‚   â”œâ”€â”€ organisms/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ Header/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export for organisms\n   â”‚   â”‚   â”œâ”€â”€ templates/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ MainLayout/\n   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MainLayout.tsx\n   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardLayout/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthLayout/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export for templates\n   â”‚   â”‚   â””â”€â”€ index.ts              # Main barrel export\n   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”‚   â””â”€â”€ useAuth.ts\n   â”‚   â”œâ”€â”€ stores/\n   â”‚   â”‚   â””â”€â”€ userStore.ts\n   â”‚   â”œâ”€â”€ lib/\n   â”‚   â”‚   â”œâ”€â”€ utils.ts\n   â”‚   â”‚   â””â”€â”€ db.ts                 # If database selected\n   â”‚   â””â”€â”€ types/\n   â”œâ”€â”€ .storybook/\n   â”‚   â”œâ”€â”€ main.ts\n   â”‚   â””â”€â”€ preview.ts\n   â”œâ”€â”€ tests/\n   â”‚   â””â”€â”€ e2e/\n   â”œâ”€â”€ public/\n   â”œâ”€â”€ prisma/                       # If Prisma selected\n   â”‚   â””â”€â”€ schema.prisma\n   â”œâ”€â”€ next.config.ts\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â””â”€â”€ package.json\n   ```\n\n   **Note:** Next.js uses `src/app/` for pages via file-based routing. Templates in `src/components/templates/` are reusable layout patterns that Next.js layouts import and use.\n\n4. Create barrel exports for each atomic level:\n\n   **src/components/atoms/index.ts:**\n   ```typescript\n   export { Button } from './Button';\n   export type { ButtonProps } from './Button/Button';\n   ```\n\n   **src/components/molecules/index.ts:**\n   ```typescript\n   // Export molecules as they are created\n   ```\n\n   **src/components/organisms/index.ts:**\n   ```typescript\n   // Export organisms as they are created\n   ```\n\n   **src/components/templates/index.ts:**\n   ```typescript\n   export { MainLayout } from './MainLayout';\n   ```\n\n   **src/components/index.ts:**\n   ```typescript\n   export * from './atoms';\n   export * from './molecules';\n   export * from './organisms';\n   export * from './templates';\n   ```\n\n3a. **ALTERNATIVE: Flat Structure** (if `componentOrganization: flat`):\n   ```\n   project/\n   â”œâ”€â”€ src/\n   â”‚   â”œâ”€â”€ app/\n   â”‚   â”‚   â”œâ”€â”€ layout.tsx\n   â”‚   â”‚   â”œâ”€â”€ page.tsx\n   â”‚   â”‚   â”œâ”€â”€ globals.css\n   â”‚   â”‚   â””â”€â”€ api/\n   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”œâ”€â”€ Button/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx\n   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts\n   â”‚   â”‚   â”‚   â””â”€â”€ __tests__/\n   â”‚   â”‚   â”‚       â””â”€â”€ Button.test.tsx\n   â”‚   â”‚   â”œâ”€â”€ Input/\n   â”‚   â”‚   â”œâ”€â”€ Header/\n   â”‚   â”‚   â”œâ”€â”€ LoginForm/\n   â”‚   â”‚   â””â”€â”€ index.ts              # Barrel export\n   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”œâ”€â”€ stores/\n   â”‚   â”œâ”€â”€ lib/\n   â”‚   â””â”€â”€ types/\n   â”œâ”€â”€ tests/\n   â”œâ”€â”€ public/\n   â”œâ”€â”€ next.config.ts\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â””â”€â”€ package.json\n   ```\n\n   **Note:** Flat structure does not include Storybook setup by default. Skip Step 10 (Storybook).\n\n3b. **ALTERNATIVE: Feature-Based Structure** (if `componentOrganization: feature-based`):\n   ```\n   project/\n   â”œâ”€â”€ src/\n   â”‚   â”œâ”€â”€ app/\n   â”‚   â”‚   â”œâ”€â”€ layout.tsx\n   â”‚   â”‚   â”œâ”€â”€ page.tsx\n   â”‚   â”‚   â”œâ”€â”€ globals.css\n   â”‚   â”‚   â”œâ”€â”€ dashboard/\n   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx\n   â”‚   â”‚   â””â”€â”€ api/\n   â”‚   â”œâ”€â”€ features/\n   â”‚   â”‚   â”œâ”€â”€ auth/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm/\n   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â”œâ”€â”€ dashboard/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”œâ”€â”€ shared/\n   â”‚   â”‚   â””â”€â”€ components/\n   â”‚   â”‚       â”œâ”€â”€ Button/\n   â”‚   â”‚       â”œâ”€â”€ Input/\n   â”‚   â”‚       â””â”€â”€ index.ts\n   â”‚   â”œâ”€â”€ lib/\n   â”‚   â””â”€â”€ types/\n   â”œâ”€â”€ tests/\n   â”œâ”€â”€ public/\n   â”œâ”€â”€ next.config.ts\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â””â”€â”€ package.json\n   ```\n\n   **Note:** Feature-based structure does not include Storybook setup by default. Skip Step 10 (Storybook).\n\n5. Update `tsconfig.json` with strict configuration:\n   ```json\n   {\n     \"compilerOptions\": {\n       \"target\": \"ES2022\",\n       \"lib\": [\"ES2022\", \"DOM\", \"DOM.Iterable\"],\n       \"module\": \"ESNext\",\n       \"moduleResolution\": \"bundler\",\n       \"strict\": true,\n       \"noImplicitAny\": true,\n       \"strictNullChecks\": true,\n       \"noUncheckedIndexedAccess\": true,\n       \"noUnusedLocals\": true,\n       \"noUnusedParameters\": true,\n       \"noImplicitReturns\": true,\n       \"jsx\": \"preserve\",\n       \"incremental\": true,\n       \"plugins\": [{ \"name\": \"next\" }],\n       \"baseUrl\": \".\",\n       \"paths\": {\n         \"@/*\": [\"./src/*\"]\n       }\n     },\n     \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n     \"exclude\": [\"node_modules\"]\n   }\n   ```\n\n6. Create `next.config.ts`:\n   ```typescript\n   import type { NextConfig } from 'next';\n\n   const config: NextConfig = {\n     reactStrictMode: true,\n     typescript: {\n       ignoreBuildErrors: false, // NEVER ignore TS errors\n     },\n     eslint: {\n       ignoreDuringBuilds: false, // NEVER ignore lint errors\n     },\n     experimental: {\n       typedRoutes: true,\n     },\n   };\n\n   export default config;\n   ```\n\n7. Replace ESLint with Biome:\n   - Remove eslint config\n   - Create `biome.json` with strict rules (reference **biome-setup** skill)\n\n8. Create `vitest.config.ts`:\n   ```typescript\n   import { defineConfig } from 'vitest/config';\n   import react from '@vitejs/plugin-react';\n   import path from 'path';\n\n   export default defineConfig({\n     plugins: [react()],\n     test: {\n       globals: true,\n       environment: 'jsdom',\n       setupFiles: ['./src/test/setup.ts'],\n       include: ['src/**/__tests__/**/*.test.{ts,tsx}'],\n       exclude: ['node_modules', '.next'],\n       coverage: {\n         provider: 'v8',\n         thresholds: {\n           lines: 80,\n           functions: 80,\n           branches: 80,\n           statements: 80,\n         },\n       },\n     },\n     resolve: {\n       alias: {\n         '@': path.resolve(__dirname, './src'),\n       },\n     },\n   });\n   ```\n\n9. Create `src/test/setup.ts`:\n   ```typescript\n   import '@testing-library/jest-dom/vitest';\n   ```\n\n10. Set up Storybook with Next.js (Atomic Design only - skip for flat/feature-based):\n\n    Install Storybook:\n    ```bash\n    npx storybook@latest init --type nextjs --no-dev\n    ```\n\n    Install additional addons:\n    ```bash\n    npm install -D @storybook/addon-a11y @storybook/addon-viewport\n    ```\n\n    Create `.storybook/main.ts`:\n    ```typescript\n    import type { StorybookConfig } from '@storybook/nextjs';\n\n    const config: StorybookConfig = {\n      stories: [\n        '../src/components/atoms/**/*.stories.@(ts|tsx)',\n        '../src/components/molecules/**/*.stories.@(ts|tsx)',\n        '../src/components/organisms/**/*.stories.@(ts|tsx)',\n      ],\n      addons: [\n        '@storybook/addon-links',\n        '@storybook/addon-essentials',\n        '@storybook/addon-interactions',\n        '@storybook/addon-a11y',\n        '@storybook/addon-viewport',\n      ],\n      framework: {\n        name: '@storybook/nextjs',\n        options: {},\n      },\n      docs: {\n        autodocs: 'tag',\n      },\n    };\n\n    export default config;\n    ```\n\n    Create `.storybook/preview.ts`:\n    ```typescript\n    import type { Preview } from '@storybook/react';\n\n    const preview: Preview = {\n      parameters: {\n        actions: { argTypesRegex: '^on[A-Z].*' },\n        controls: {\n          matchers: {\n            color: /(background|color)$/i,\n            date: /Date$/i,\n          },\n        },\n      },\n    };\n\n    export default preview;\n    ```\n\n11. Create `package.json` scripts:\n    ```json\n    {\n      \"scripts\": {\n        \"dev\": \"next dev\",\n        \"build\": \"next build\",\n        \"start\": \"next start\",\n        \"type-check\": \"tsc --noEmit\",\n        \"lint\": \"biome check .\",\n        \"lint:fix\": \"biome check --write .\",\n        \"format\": \"biome format --write .\",\n        \"test\": \"vitest run\",\n        \"test:watch\": \"vitest\",\n        \"test:coverage\": \"vitest run --coverage\",\n        \"test:e2e\": \"playwright test\",\n        \"storybook\": \"storybook dev -p 6006\",\n        \"build-storybook\": \"storybook build\",\n        \"validate\": \"npm run type-check && npm run lint && npm test\"\n      }\n    }\n    ```\n\n12. Install additional dependencies:\n    - Vitest, @testing-library/react, @testing-library/jest-dom\n    - Biome\n    - Storybook with addons\n    - Selected state management\n    - Selected UI library\n    - Selected data fetching library\n    - Selected database ORM\n    - Selected auth solution\n\n13. If shadcn/ui selected:\n    - Run `npx shadcn@latest init`\n    - Configure components.json\n    - Install initial components\n\n14. If Prisma selected:\n    - Initialize Prisma: `npx prisma init`\n    - Create basic schema\n    - Generate client\n\n15. Create MainLayout template:\n\n    **src/components/templates/MainLayout/MainLayout.tsx:**\n    ```typescript\n    import { Header } from '@/components/organisms';\n\n    interface MainLayoutProps {\n      children: React.ReactNode;\n    }\n\n    export function MainLayout({ children }: MainLayoutProps): React.ReactElement {\n      return (\n        <div className=\"min-h-screen flex flex-col\">\n          <Header />\n          <main className=\"flex-1 container mx-auto px-4 py-8\">\n            {children}\n          </main>\n          <footer className=\"border-t py-4\">\n            <div className=\"container mx-auto px-4 text-center text-sm text-gray-500\">\n              Built with Next.js and Atomic Design\n            </div>\n          </footer>\n        </div>\n      );\n    }\n    ```\n\n    **src/components/templates/MainLayout/index.ts:**\n    ```typescript\n    export { MainLayout } from './MainLayout';\n    ```\n\n    **Note on Templates vs Next.js Layouts:**\n    - **Templates** (`src/components/templates/`) are reusable component patterns that define visual structure\n    - **Next.js Layouts** (`src/app/layout.tsx`, `src/app/dashboard/layout.tsx`) are route-specific wrappers that can import and use templates\n    - Templates are portable and can be used across multiple layouts or even different projects\n    - Next.js layouts handle route-specific concerns like metadata, loading states, and error boundaries\n\n16. Update `src/app/layout.tsx` to use template:\n    ```typescript\n    import type { Metadata } from 'next';\n    import { MainLayout } from '@/components/templates';\n    import './globals.css';\n\n    export const metadata: Metadata = {\n      title: 'My App',\n      description: 'Built with Next.js and Atomic Design',\n    };\n\n    export default function RootLayout({\n      children,\n    }: {\n      children: React.ReactNode;\n    }): React.ReactElement {\n      return (\n        <html lang=\"en\">\n          <body>\n            <MainLayout>{children}</MainLayout>\n          </body>\n        </html>\n      );\n    }\n    ```\n\n17. Create example Button atom component:\n\n    **src/components/atoms/Button/Button.tsx:**\n    ```typescript\n    import { forwardRef } from 'react';\n    import { cn } from '@/lib/utils';\n\n    export interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n      variant: 'primary' | 'secondary' | 'danger' | 'ghost';\n      size?: 'sm' | 'md' | 'lg';\n      loading?: boolean;\n    }\n\n    export const Button = forwardRef<HTMLButtonElement, ButtonProps>(\n      ({ variant, size = 'md', loading, className, children, disabled, ...props }, ref) => {\n        return (\n          <button\n            ref={ref}\n            type=\"button\"\n            className={cn(\n              'inline-flex items-center justify-center rounded-md font-medium transition-colors',\n              'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2',\n              {\n                'bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500': variant === 'primary',\n                'bg-gray-200 text-gray-900 hover:bg-gray-300 focus-visible:ring-gray-500': variant === 'secondary',\n                'bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500': variant === 'danger',\n                'bg-transparent hover:bg-gray-100 focus-visible:ring-gray-500': variant === 'ghost',\n                'px-3 py-1.5 text-sm': size === 'sm',\n                'px-4 py-2 text-base': size === 'md',\n                'px-6 py-3 text-lg': size === 'lg',\n                'opacity-50 cursor-not-allowed': disabled || loading,\n              },\n              className\n            )}\n            disabled={disabled || loading}\n            {...props}\n          >\n            {loading && (\n              <svg\n                className=\"mr-2 h-4 w-4 animate-spin\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n              >\n                <circle\n                  className=\"opacity-25\"\n                  cx=\"12\"\n                  cy=\"12\"\n                  r=\"10\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"4\"\n                />\n                <path\n                  className=\"opacity-75\"\n                  fill=\"currentColor\"\n                  d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                />\n              </svg>\n            )}\n            {children}\n          </button>\n        );\n      }\n    );\n    Button.displayName = 'Button';\n    ```\n\n    **src/components/atoms/Button/Button.stories.tsx:**\n    ```typescript\n    import type { Meta, StoryObj } from '@storybook/react';\n    import { Button } from './Button';\n\n    const meta: Meta<typeof Button> = {\n      title: 'Atoms/Button',\n      component: Button,\n      tags: ['autodocs'],\n      parameters: {\n        layout: 'centered',\n      },\n      argTypes: {\n        variant: {\n          control: 'select',\n          options: ['primary', 'secondary', 'danger', 'ghost'],\n          description: 'The visual style of the button',\n        },\n        size: {\n          control: 'select',\n          options: ['sm', 'md', 'lg'],\n          description: 'The size of the button',\n        },\n        loading: {\n          control: 'boolean',\n          description: 'Shows a loading spinner',\n        },\n        disabled: {\n          control: 'boolean',\n          description: 'Disables the button',\n        },\n      },\n    };\n\n    export default meta;\n    type Story = StoryObj<typeof Button>;\n\n    export const Primary: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Primary Button',\n      },\n    };\n\n    export const Secondary: Story = {\n      args: {\n        variant: 'secondary',\n        children: 'Secondary Button',\n      },\n    };\n\n    export const Danger: Story = {\n      args: {\n        variant: 'danger',\n        children: 'Delete',\n      },\n    };\n\n    export const Ghost: Story = {\n      args: {\n        variant: 'ghost',\n        children: 'Ghost Button',\n      },\n    };\n\n    export const Loading: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Saving...',\n        loading: true,\n      },\n    };\n\n    export const Disabled: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Disabled Button',\n        disabled: true,\n      },\n    };\n\n    export const AllSizes: Story = {\n      render: () => (\n        <div className=\"flex items-center gap-4\">\n          <Button variant=\"primary\" size=\"sm\">Small</Button>\n          <Button variant=\"primary\" size=\"md\">Medium</Button>\n          <Button variant=\"primary\" size=\"lg\">Large</Button>\n        </div>\n      ),\n    };\n\n    export const AllVariants: Story = {\n      render: () => (\n        <div className=\"flex items-center gap-4\">\n          <Button variant=\"primary\">Primary</Button>\n          <Button variant=\"secondary\">Secondary</Button>\n          <Button variant=\"danger\">Danger</Button>\n          <Button variant=\"ghost\">Ghost</Button>\n        </div>\n      ),\n    };\n    ```\n\n    **src/components/atoms/Button/index.ts:**\n    ```typescript\n    export { Button } from './Button';\n    export type { ButtonProps } from './Button';\n    ```\n\n    **src/components/atoms/Button/__tests__/Button.test.tsx:**\n    ```typescript\n    import { describe, it, expect, vi } from 'vitest';\n    import { render, screen, fireEvent } from '@testing-library/react';\n    import { Button } from '../Button';\n\n    describe('Button', () => {\n      it('renders children correctly', () => {\n        render(<Button variant=\"primary\">Click me</Button>);\n        expect(screen.getByRole('button')).toHaveTextContent('Click me');\n      });\n\n      it('applies variant styles', () => {\n        const { rerender } = render(<Button variant=\"primary\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('bg-blue-600');\n\n        rerender(<Button variant=\"secondary\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('bg-gray-200');\n\n        rerender(<Button variant=\"danger\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('bg-red-600');\n      });\n\n      it('applies size styles', () => {\n        const { rerender } = render(<Button variant=\"primary\" size=\"sm\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('px-3', 'py-1.5', 'text-sm');\n\n        rerender(<Button variant=\"primary\" size=\"md\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('px-4', 'py-2', 'text-base');\n\n        rerender(<Button variant=\"primary\" size=\"lg\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('px-6', 'py-3', 'text-lg');\n      });\n\n      it('calls onClick when clicked', () => {\n        const handleClick = vi.fn();\n        render(<Button variant=\"primary\" onClick={handleClick}>Click</Button>);\n\n        fireEvent.click(screen.getByRole('button'));\n\n        expect(handleClick).toHaveBeenCalledTimes(1);\n      });\n\n      it('disables button when disabled prop is true', () => {\n        render(<Button variant=\"primary\" disabled>Disabled</Button>);\n        expect(screen.getByRole('button')).toBeDisabled();\n      });\n\n      it('disables button when loading prop is true', () => {\n        render(<Button variant=\"primary\" loading>Loading</Button>);\n        expect(screen.getByRole('button')).toBeDisabled();\n      });\n\n      it('shows loading spinner when loading', () => {\n        render(<Button variant=\"primary\" loading>Loading</Button>);\n        expect(screen.getByRole('button').querySelector('svg')).toBeInTheDocument();\n      });\n\n      it('does not call onClick when disabled', () => {\n        const handleClick = vi.fn();\n        render(<Button variant=\"primary\" onClick={handleClick} disabled>Click</Button>);\n\n        fireEvent.click(screen.getByRole('button'));\n\n        expect(handleClick).not.toHaveBeenCalled();\n      });\n\n      it('forwards ref to button element', () => {\n        const ref = vi.fn();\n        render(<Button variant=\"primary\" ref={ref}>Button</Button>);\n        expect(ref).toHaveBeenCalled();\n      });\n\n      it('has type=\"button\" by default', () => {\n        render(<Button variant=\"primary\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveAttribute('type', 'button');\n      });\n    });\n    ```\n\n18. Create Server Component example:\n    ```typescript\n    // src/app/page.tsx\n    export default async function HomePage(): Promise<React.ReactElement> {\n      return (\n        <div>\n          <h1 className=\"text-4xl font-bold\">Welcome</h1>\n          <p className=\"mt-4 text-gray-600\">\n            Your Next.js app with Atomic Design is ready.\n          </p>\n        </div>\n      );\n    }\n    ```\n\n19. If NextAuth.js selected:\n    - Install and configure auth\n    - Create auth API routes\n\n20. Initialize git repository\n\n21. Run validation:\n    - `npm run type-check`\n    - `npm run lint`\n    - `npm test`\n    - `npm run storybook` (verify Storybook runs)\n\n22. Display next steps to user\n\n**Quality Requirements:**\n- All TypeScript strict flags enabled\n- Zero TypeScript errors or warnings\n- Zero linter warnings\n- NO `any` types allowed\n- Server Components by default\n- Tests pass with 80%+ coverage\n- Storybook builds without errors\n\nReference the **nextjs-configuration**, **react-19-patterns**, **tailwind-setup**, and **atomic-design** skills."
              },
              {
                "name": "/preview",
                "description": "Preview production build locally",
                "path": "tech-stacks/js/react/commands/preview.md",
                "frontmatter": {
                  "description": "Preview production build locally",
                  "model": "haiku"
                },
                "content": "# Preview Production Build\n\nPreview the production build locally to verify it works correctly before deployment.\n\nExecute the following workflow:\n\n1. Detect project type:\n   - Check for `next.config.ts` â†’ Next.js project\n   - Check for `vite.config.ts` â†’ Vite project\n\n2. Build the project:\n\n   **For Vite:**\n   ```bash\n   npm run build\n   ```\n\n   **For Next.js:**\n   ```bash\n   npm run build\n   ```\n\n3. Start preview server:\n\n   **For Vite:**\n   ```bash\n   npm run preview\n   ```\n   Opens at http://localhost:4173\n\n   **For Next.js:**\n   ```bash\n   npm run start\n   ```\n   Opens at http://localhost:3000\n\n4. Display preview URL and instructions:\n   - How to test the build\n   - Check for console errors\n   - Verify all routes work\n   - Test on different viewports\n\n5. Remind user to verify:\n   - All pages load correctly\n   - API routes respond\n   - Assets load properly\n   - No console errors\n   - Performance is acceptable\n\n**Notes:**\n- Production build should be tested before deployment\n- Check for hydration mismatches in Next.js\n- Verify environment variables are set correctly"
              },
              {
                "name": "/refactor-atomic-design",
                "description": "Refactor existing React project to Atomic Design component structure",
                "path": "tech-stacks/js/react/commands/refactor-atomic-design.md",
                "frontmatter": {
                  "description": "Refactor existing React project to Atomic Design component structure",
                  "agent": "code-analyzer"
                },
                "content": "# Refactor Atomic Design Command\n\nRefactor existing React (Vite SPA or Next.js) project to Atomic Design component structure with analysis, plan approval, and automated execution.\n\n## Parameters\n\n| Parameter | Type | Required | Default | Description |\n|-----------|------|----------|---------|-------------|\n| `--target` | string | No | components directory | Specific directory or component to refactor |\n| `--dry-run` | boolean | No | false | Show plan without executing |\n| `--skip-stories` | boolean | No | false | Skip Storybook story generation |\n| `--skip-tests` | boolean | No | false | Skip test file updates |\n\n## Workflow\n\n### Phase 1: Initialization\n\n1. Detect project framework:\n   - Check for `next.config.ts` or `next.config.js` â†’ Next.js project\n   - Check for `vite.config.ts` â†’ Vite project\n\n2. Identify component directory:\n   - `src/components/` for both Vite and Next.js\n\n3. Verify or create atomic design directories:\n   ```\n   src/components/\n   â”œâ”€â”€ atoms/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â”œâ”€â”€ molecules/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â”œâ”€â”€ organisms/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â”œâ”€â”€ templates/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â””â”€â”€ index.ts\n   ```\n\n4. Create barrel exports if missing:\n\n   **Level barrel export template:**\n   ```typescript\n   // src/components/atoms/index.ts\n   // Barrel export for atoms\n   // Components will be added here as they are created or moved\n   ```\n\n   **Main barrel export template:**\n   ```typescript\n   // src/components/index.ts\n   export * from './atoms';\n   export * from './molecules';\n   export * from './organisms';\n   export * from './templates';\n   ```\n\n### Phase 2: Analysis\n\nInvoke the **code-analyzer** agent with reference to **atomic-design** skill to:\n\n1. Scan component directories using Glob patterns:\n   - `src/components/**/*.tsx` (excluding tests and stories)\n   - Exclude: `**/*.test.tsx`, `**/*.spec.tsx`, `**/*.stories.tsx`\n   - Exclude: Components already in atomic directories (`atoms/`, `molecules/`, `organisms/`, `templates/`)\n\n2. Analyze each component:\n   - Read component code\n   - Identify imports and dependencies\n   - Detect state usage (useState, useEffect, stores)\n   - Check for data fetching (useQuery, fetch)\n\n3. Classify components using atomic-design skill criteria:\n   - **Atom**: No custom imports, stateless or UI state only\n   - **Molecule**: Imports 2+ atoms, single purpose, minimal state\n   - **Organism**: Larger section, may have business logic or stores\n   - **Template**: Accepts children, named with \"Layout\" suffix\n   - **Page**: Named with \"Page\" suffix, connects to data sources\n\n4. Assign confidence levels:\n   - **High**: Component clearly matches one level's criteria\n   - **Medium**: Component partially matches multiple levels\n   - **Low**: Component has ambiguous characteristics\n\n5. Detect circular dependencies and generate warnings\n\n### Phase 3: Plan Generation\n\nGenerate RefactoringPlan with:\n- Project metadata (name, framework, component directory)\n- Component migrations (source path, destination path, level, confidence, reason)\n- Affected files (imports to update)\n- Summary statistics\n- Warnings\n\n### Phase 4: User Approval\n\nPresent plan using AskUserQuestion with options:\n\n1. **Approve all and execute** - Proceed with full refactoring\n2. **Review and modify classifications** - Change component levels before execution\n3. **Select specific components** - Partial refactoring\n4. **Cancel** - Exit without changes\n\n### Phase 5: Refactoring Execution\n\n1. Move component directories to atomic level folders:\n   - `src/components/Button/` â†’ `src/components/atoms/Button/`\n   - Include all files: `*.tsx`, `index.ts`, `__tests__/*`, `*.stories.tsx`\n\n2. Update all import statements across codebase:\n   - `from '@/components/Button'` â†’ `from '@/components/atoms'`\n   - `from '../Button'` â†’ `from '@/components/atoms'`\n\n3. Create/update barrel exports at each level:\n   ```typescript\n   // src/components/atoms/index.ts\n   export { Button } from './Button';\n   export type { ButtonProps } from './Button';\n   ```\n\n4. Generate Storybook stories (if not `--skip-stories`):\n   - Only for atoms, molecules, organisms (NOT templates)\n   - Use title hierarchy: `'Atoms/Button'`, `'Molecules/FormField'`\n\n5. Update test file imports (if not `--skip-tests`)\n\n### Phase 6: Verification\n\nExecute **post-change-verification skill** protocol:\n\n1. Detect package manager (check lock files: pnpm-lock.yaml, yarn.lock, package-lock.json, bun.lockb)\n\n2. Run format:\n   ```bash\n   <pkg> run format\n   ```\n\n3. Run lint:\n   ```bash\n   <pkg> run lint\n   ```\n\n4. Run type-check:\n   ```bash\n   <pkg> run type-check   # or npx tsc --noEmit\n   ```\n\n5. Run tests:\n   ```bash\n   <pkg> test\n   ```\n\n6. Display completion summary with verification results:\n   ```\n   === REFACTORING COMPLETE ===\n\n   Files changed: 47\n   Components moved: 24\n   Stories created: 19\n   Barrel exports updated: 5\n\n   === POST-CHANGE VERIFICATION ===\n\n   Format:     PASSED\n   Lint:       PASSED (0 errors, 0 warnings)\n   Type-check: PASSED (0 errors)\n   Tests:      PASSED (24/24)\n\n   Pre-existing issues: NONE\n\n   === TASK COMPLETE ===\n\n   Next steps:\n   1. Run `npm run storybook` to verify stories\n   2. Review the changes in your git diff\n   3. Commit when satisfied\n\n   To undo: git checkout -- src/components/\n   ```\n\n## Directory Structure\n\n### Before Refactoring\n\n```\nsrc/components/\n  Button/\n    Button.tsx\n    index.ts\n  Input/\n    Input.tsx\n    index.ts\n  FormField/\n    FormField.tsx\n    index.ts\n  Header/\n    Header.tsx\n    index.ts\n  MainLayout/\n    MainLayout.tsx\n    index.ts\n```\n\n### After Refactoring\n\n```\nsrc/components/\n  atoms/\n    Button/\n      Button.tsx\n      Button.stories.tsx\n      index.ts\n    Input/\n      Input.tsx\n      Input.stories.tsx\n      index.ts\n    index.ts\n  molecules/\n    FormField/\n      FormField.tsx\n      FormField.stories.tsx\n      index.ts\n    index.ts\n  organisms/\n    Header/\n      Header.tsx\n      Header.stories.tsx\n      index.ts\n    index.ts\n  templates/\n    MainLayout/\n      MainLayout.tsx\n      index.ts\n    index.ts\n  index.ts\n```\n\n## Examples\n\n### Full Refactoring\n\n```bash\n/react:refactor-atomic-design\n```\n\n### Refactor Specific Directory\n\n```bash\n/react:refactor-atomic-design --target src/components/ui\n```\n\n### Skip Story Generation\n\n```bash\n/react:refactor-atomic-design --skip-stories\n```\n\n### Dry Run (Show Plan Only)\n\n```bash\n/react:refactor-atomic-design --dry-run\n```\n\n## Skills Referenced\n\n- **atomic-design** - Classification criteria, Storybook templates, barrel export patterns\n- **post-change-verification** - Mandatory verification protocol after code changes (used in Phase 6)\n\n## Notes\n\n- Recommend committing or stashing changes before running\n- Previously refactored components (already in atomic directories) are skipped\n- Running command twice produces same result (idempotent)\n- Next.js pages remain in `src/app/` (Next.js convention)"
              },
              {
                "name": "/spa-init",
                "description": "Initialize Vite SPA project with React 19, TypeScript, Atomic Design, and Storybook",
                "path": "tech-stacks/js/react/commands/spa-init.md",
                "frontmatter": {
                  "description": "Initialize Vite SPA project with React 19, TypeScript, Atomic Design, and Storybook"
                },
                "content": "# Initialize Vite SPA Project\n\nInitialize a new React SPA with Vite, TypeScript strict mode, Atomic Design component structure, and Storybook.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Ask user for project details using AskUserQuestion tool:\n   - Project name\n   - CSS solution (Tailwind CSS, CSS Modules, styled-components)\n   - State management (Zustand, Jotai, none)\n   - UI library (shadcn/ui, Radix UI, none)\n   - Router (React Router, TanStack Router)\n   - Package manager (npm, pnpm, yarn)\n\n1.5. Check PRD configuration for component organization preference:\n\n   Look for `componentOrganization` setting in:\n   - `.molcajete/prd/tech-stack.md` (YAML frontmatter)\n   - `.molcajete/prd/tech-stack.yaml`\n\n   **Valid values:**\n   - `atomic` (default) - Atomic Design pattern with atoms/, molecules/, organisms/, templates/\n   - `flat` - Simple flat components/ directory\n   - `feature-based` - Feature modules with shared components\n\n   ```yaml\n   # Example .molcajete/prd/tech-stack.yaml\n   techStack:\n     framework: react\n     componentOrganization: atomic  # or 'flat' or 'feature-based'\n   ```\n\n   If no config found or value is `atomic`, proceed with Atomic Design (Step 3).\n   If `flat`, use flat structure (Step 3a).\n   If `feature-based`, use feature-based structure (Step 3b).\n\n2. Create project using Vite:\n   ```bash\n   npm create vite@latest {project-name} -- --template react-ts\n   cd {project-name}\n   ```\n\n3. Create project structure with Atomic Design pattern:\n   ```\n   project/\n   â”œâ”€â”€ src/\n   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”œâ”€â”€ atoms/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ Button/\n   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx\n   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.stories.tsx\n   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts\n   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ __tests__/\n   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ Button.test.tsx\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â”‚   â”œâ”€â”€ molecules/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â”‚   â”œâ”€â”€ organisms/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â”‚   â”œâ”€â”€ templates/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â”‚   â””â”€â”€ index.ts              # Main barrel export\n   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”œâ”€â”€ stores/        # If state management selected\n   â”‚   â”œâ”€â”€ pages/\n   â”‚   â”‚   â””â”€â”€ Home/\n   â”‚   â”‚       â””â”€â”€ HomePage.tsx\n   â”‚   â”œâ”€â”€ lib/\n   â”‚   â”‚   â””â”€â”€ utils.ts\n   â”‚   â”œâ”€â”€ types/\n   â”‚   â”œâ”€â”€ App.tsx\n   â”‚   â””â”€â”€ main.tsx\n   â”œâ”€â”€ .storybook/\n   â”‚   â”œâ”€â”€ main.ts\n   â”‚   â””â”€â”€ preview.ts\n   â”œâ”€â”€ tests/\n   â”‚   â””â”€â”€ e2e/\n   â”œâ”€â”€ public/\n   â”œâ”€â”€ index.html\n   â”œâ”€â”€ vite.config.ts\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â””â”€â”€ package.json\n   ```\n\n4. Create barrel exports for each atomic level:\n\n   **src/components/atoms/index.ts:**\n   ```typescript\n   export { Button } from './Button';\n   export type { ButtonProps } from './Button/Button';\n   ```\n\n   **src/components/molecules/index.ts:**\n   ```typescript\n   // Export molecules as they are created\n   ```\n\n   **src/components/organisms/index.ts:**\n   ```typescript\n   // Export organisms as they are created\n   ```\n\n   **src/components/templates/index.ts:**\n   ```typescript\n   // Export templates as they are created\n   ```\n\n   **src/components/index.ts:**\n   ```typescript\n   export * from './atoms';\n   export * from './molecules';\n   export * from './organisms';\n   export * from './templates';\n   ```\n\n3a. **ALTERNATIVE: Flat Structure** (if `componentOrganization: flat`):\n   ```\n   project/\n   â”œâ”€â”€ src/\n   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”œâ”€â”€ Button/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx\n   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts\n   â”‚   â”‚   â”‚   â””â”€â”€ __tests__/\n   â”‚   â”‚   â”‚       â””â”€â”€ Button.test.tsx\n   â”‚   â”‚   â”œâ”€â”€ Input/\n   â”‚   â”‚   â”œâ”€â”€ Header/\n   â”‚   â”‚   â”œâ”€â”€ LoginForm/\n   â”‚   â”‚   â””â”€â”€ index.ts              # Barrel export\n   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”œâ”€â”€ stores/\n   â”‚   â”œâ”€â”€ pages/\n   â”‚   â”œâ”€â”€ lib/\n   â”‚   â”œâ”€â”€ types/\n   â”‚   â”œâ”€â”€ App.tsx\n   â”‚   â””â”€â”€ main.tsx\n   â”œâ”€â”€ tests/\n   â”œâ”€â”€ public/\n   â”œâ”€â”€ vite.config.ts\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â””â”€â”€ package.json\n   ```\n\n   **Note:** Flat structure does not include Storybook setup by default. Skip Step 10 (Storybook).\n\n3b. **ALTERNATIVE: Feature-Based Structure** (if `componentOrganization: feature-based`):\n   ```\n   project/\n   â”œâ”€â”€ src/\n   â”‚   â”œâ”€â”€ features/\n   â”‚   â”‚   â”œâ”€â”€ auth/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm/\n   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx\n   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useAuth.ts\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â”œâ”€â”€ dashboard/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”œâ”€â”€ shared/\n   â”‚   â”‚   â””â”€â”€ components/\n   â”‚   â”‚       â”œâ”€â”€ Button/\n   â”‚   â”‚       â”‚   â”œâ”€â”€ Button.tsx\n   â”‚   â”‚       â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚       â”œâ”€â”€ Input/\n   â”‚   â”‚       â””â”€â”€ index.ts\n   â”‚   â”œâ”€â”€ pages/\n   â”‚   â”œâ”€â”€ lib/\n   â”‚   â”œâ”€â”€ types/\n   â”‚   â”œâ”€â”€ App.tsx\n   â”‚   â””â”€â”€ main.tsx\n   â”œâ”€â”€ tests/\n   â”œâ”€â”€ public/\n   â”œâ”€â”€ vite.config.ts\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â””â”€â”€ package.json\n   ```\n\n   **Note:** Feature-based structure does not include Storybook setup by default. Skip Step 10 (Storybook).\n\n5. Update `tsconfig.json` with strict configuration:\n   ```json\n   {\n     \"compilerOptions\": {\n       \"target\": \"ES2022\",\n       \"lib\": [\"ES2022\", \"DOM\", \"DOM.Iterable\"],\n       \"module\": \"ESNext\",\n       \"moduleResolution\": \"bundler\",\n       \"strict\": true,\n       \"noImplicitAny\": true,\n       \"strictNullChecks\": true,\n       \"noUncheckedIndexedAccess\": true,\n       \"noUnusedLocals\": true,\n       \"noUnusedParameters\": true,\n       \"noImplicitReturns\": true,\n       \"jsx\": \"react-jsx\",\n       \"baseUrl\": \".\",\n       \"paths\": {\n         \"@/*\": [\"./src/*\"]\n       }\n     },\n     \"include\": [\"src\"],\n     \"exclude\": [\"node_modules\"]\n   }\n   ```\n\n6. Create `vite.config.ts`:\n   ```typescript\n   import { defineConfig } from 'vite';\n   import react from '@vitejs/plugin-react';\n   import path from 'path';\n\n   export default defineConfig({\n     plugins: [react()],\n     resolve: {\n       alias: {\n         '@': path.resolve(__dirname, './src'),\n       },\n     },\n     build: {\n       target: 'ES2022',\n       sourcemap: true,\n     },\n   });\n   ```\n\n7. Create `biome.json` with strict rules (reference **biome-setup** skill)\n\n8. Create `vitest.config.ts`:\n   ```typescript\n   import { defineConfig } from 'vitest/config';\n   import react from '@vitejs/plugin-react';\n   import path from 'path';\n\n   export default defineConfig({\n     plugins: [react()],\n     test: {\n       globals: true,\n       environment: 'jsdom',\n       setupFiles: ['./src/test/setup.ts'],\n       include: ['src/**/__tests__/**/*.test.{ts,tsx}'],\n       coverage: {\n         provider: 'v8',\n         thresholds: {\n           lines: 80,\n           functions: 80,\n           branches: 80,\n           statements: 80,\n         },\n       },\n     },\n     resolve: {\n       alias: {\n         '@': path.resolve(__dirname, './src'),\n       },\n     },\n   });\n   ```\n\n9. Create `src/test/setup.ts`:\n   ```typescript\n   import '@testing-library/jest-dom/vitest';\n   ```\n\n10. Set up Storybook with Vite (Atomic Design only - skip for flat/feature-based):\n\n    Install Storybook:\n    ```bash\n    npx storybook@latest init --type react_vite --no-dev\n    ```\n\n    Install additional addons:\n    ```bash\n    npm install -D @storybook/addon-a11y @storybook/addon-viewport\n    ```\n\n    Create `.storybook/main.ts`:\n    ```typescript\n    import type { StorybookConfig } from '@storybook/react-vite';\n\n    const config: StorybookConfig = {\n      stories: [\n        '../src/components/atoms/**/*.stories.@(ts|tsx)',\n        '../src/components/molecules/**/*.stories.@(ts|tsx)',\n        '../src/components/organisms/**/*.stories.@(ts|tsx)',\n      ],\n      addons: [\n        '@storybook/addon-links',\n        '@storybook/addon-essentials',\n        '@storybook/addon-interactions',\n        '@storybook/addon-a11y',\n        '@storybook/addon-viewport',\n      ],\n      framework: {\n        name: '@storybook/react-vite',\n        options: {},\n      },\n      docs: {\n        autodocs: 'tag',\n      },\n    };\n\n    export default config;\n    ```\n\n    Create `.storybook/preview.ts`:\n    ```typescript\n    import type { Preview } from '@storybook/react';\n\n    const preview: Preview = {\n      parameters: {\n        actions: { argTypesRegex: '^on[A-Z].*' },\n        controls: {\n          matchers: {\n            color: /(background|color)$/i,\n            date: /Date$/i,\n          },\n        },\n      },\n    };\n\n    export default preview;\n    ```\n\n11. Create `package.json` scripts:\n    ```json\n    {\n      \"scripts\": {\n        \"dev\": \"vite\",\n        \"build\": \"tsc && vite build\",\n        \"preview\": \"vite preview\",\n        \"type-check\": \"tsc --noEmit\",\n        \"lint\": \"biome check .\",\n        \"lint:fix\": \"biome check --write .\",\n        \"format\": \"biome format --write .\",\n        \"test\": \"vitest run\",\n        \"test:watch\": \"vitest\",\n        \"test:coverage\": \"vitest run --coverage\",\n        \"test:ui\": \"vitest --ui\",\n        \"storybook\": \"storybook dev -p 6006\",\n        \"build-storybook\": \"storybook build\",\n        \"validate\": \"npm run type-check && npm run lint && npm test\"\n      }\n    }\n    ```\n\n12. Install dependencies based on selections:\n    - React 19, TypeScript, Vite (core)\n    - Vitest, @testing-library/react, @testing-library/jest-dom\n    - Biome\n    - Storybook with addons\n    - Selected CSS solution\n    - Selected state management\n    - Selected UI library\n    - Selected router\n\n13. If Tailwind CSS selected:\n    - Install tailwindcss, postcss, autoprefixer\n    - Create tailwind.config.ts and postcss.config.js\n    - Add Tailwind directives to CSS\n\n14. If shadcn/ui selected:\n    - Run `npx shadcn@latest init`\n    - Configure components.json\n    - Install initial components (Button, etc.)\n\n15. Create example Button atom component:\n\n    **src/components/atoms/Button/Button.tsx:**\n    ```typescript\n    import { forwardRef } from 'react';\n    import { cn } from '@/lib/utils';\n\n    export interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n      variant: 'primary' | 'secondary' | 'danger' | 'ghost';\n      size?: 'sm' | 'md' | 'lg';\n      loading?: boolean;\n    }\n\n    export const Button = forwardRef<HTMLButtonElement, ButtonProps>(\n      ({ variant, size = 'md', loading, className, children, disabled, ...props }, ref) => {\n        return (\n          <button\n            ref={ref}\n            type=\"button\"\n            className={cn(\n              'inline-flex items-center justify-center rounded-md font-medium transition-colors',\n              'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2',\n              {\n                'bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500': variant === 'primary',\n                'bg-gray-200 text-gray-900 hover:bg-gray-300 focus-visible:ring-gray-500': variant === 'secondary',\n                'bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500': variant === 'danger',\n                'bg-transparent hover:bg-gray-100 focus-visible:ring-gray-500': variant === 'ghost',\n                'px-3 py-1.5 text-sm': size === 'sm',\n                'px-4 py-2 text-base': size === 'md',\n                'px-6 py-3 text-lg': size === 'lg',\n                'opacity-50 cursor-not-allowed': disabled || loading,\n              },\n              className\n            )}\n            disabled={disabled || loading}\n            {...props}\n          >\n            {loading && (\n              <svg\n                className=\"mr-2 h-4 w-4 animate-spin\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n              >\n                <circle\n                  className=\"opacity-25\"\n                  cx=\"12\"\n                  cy=\"12\"\n                  r=\"10\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"4\"\n                />\n                <path\n                  className=\"opacity-75\"\n                  fill=\"currentColor\"\n                  d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                />\n              </svg>\n            )}\n            {children}\n          </button>\n        );\n      }\n    );\n    Button.displayName = 'Button';\n    ```\n\n    **src/components/atoms/Button/Button.stories.tsx:**\n    ```typescript\n    import type { Meta, StoryObj } from '@storybook/react';\n    import { Button } from './Button';\n\n    const meta: Meta<typeof Button> = {\n      title: 'Atoms/Button',\n      component: Button,\n      tags: ['autodocs'],\n      parameters: {\n        layout: 'centered',\n      },\n      argTypes: {\n        variant: {\n          control: 'select',\n          options: ['primary', 'secondary', 'danger', 'ghost'],\n          description: 'The visual style of the button',\n        },\n        size: {\n          control: 'select',\n          options: ['sm', 'md', 'lg'],\n          description: 'The size of the button',\n        },\n        loading: {\n          control: 'boolean',\n          description: 'Shows a loading spinner',\n        },\n        disabled: {\n          control: 'boolean',\n          description: 'Disables the button',\n        },\n      },\n    };\n\n    export default meta;\n    type Story = StoryObj<typeof Button>;\n\n    export const Primary: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Primary Button',\n      },\n    };\n\n    export const Secondary: Story = {\n      args: {\n        variant: 'secondary',\n        children: 'Secondary Button',\n      },\n    };\n\n    export const Danger: Story = {\n      args: {\n        variant: 'danger',\n        children: 'Delete',\n      },\n    };\n\n    export const Ghost: Story = {\n      args: {\n        variant: 'ghost',\n        children: 'Ghost Button',\n      },\n    };\n\n    export const Loading: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Saving...',\n        loading: true,\n      },\n    };\n\n    export const Disabled: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Disabled Button',\n        disabled: true,\n      },\n    };\n\n    export const AllSizes: Story = {\n      render: () => (\n        <div className=\"flex items-center gap-4\">\n          <Button variant=\"primary\" size=\"sm\">Small</Button>\n          <Button variant=\"primary\" size=\"md\">Medium</Button>\n          <Button variant=\"primary\" size=\"lg\">Large</Button>\n        </div>\n      ),\n    };\n\n    export const AllVariants: Story = {\n      render: () => (\n        <div className=\"flex items-center gap-4\">\n          <Button variant=\"primary\">Primary</Button>\n          <Button variant=\"secondary\">Secondary</Button>\n          <Button variant=\"danger\">Danger</Button>\n          <Button variant=\"ghost\">Ghost</Button>\n        </div>\n      ),\n    };\n    ```\n\n    **src/components/atoms/Button/index.ts:**\n    ```typescript\n    export { Button } from './Button';\n    export type { ButtonProps } from './Button';\n    ```\n\n    **src/components/atoms/Button/__tests__/Button.test.tsx:**\n    ```typescript\n    import { describe, it, expect, vi } from 'vitest';\n    import { render, screen, fireEvent } from '@testing-library/react';\n    import { Button } from '../Button';\n\n    describe('Button', () => {\n      it('renders children correctly', () => {\n        render(<Button variant=\"primary\">Click me</Button>);\n        expect(screen.getByRole('button')).toHaveTextContent('Click me');\n      });\n\n      it('applies variant styles', () => {\n        const { rerender } = render(<Button variant=\"primary\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('bg-blue-600');\n\n        rerender(<Button variant=\"secondary\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('bg-gray-200');\n\n        rerender(<Button variant=\"danger\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('bg-red-600');\n      });\n\n      it('applies size styles', () => {\n        const { rerender } = render(<Button variant=\"primary\" size=\"sm\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('px-3', 'py-1.5', 'text-sm');\n\n        rerender(<Button variant=\"primary\" size=\"md\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('px-4', 'py-2', 'text-base');\n\n        rerender(<Button variant=\"primary\" size=\"lg\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveClass('px-6', 'py-3', 'text-lg');\n      });\n\n      it('calls onClick when clicked', () => {\n        const handleClick = vi.fn();\n        render(<Button variant=\"primary\" onClick={handleClick}>Click</Button>);\n\n        fireEvent.click(screen.getByRole('button'));\n\n        expect(handleClick).toHaveBeenCalledTimes(1);\n      });\n\n      it('disables button when disabled prop is true', () => {\n        render(<Button variant=\"primary\" disabled>Disabled</Button>);\n        expect(screen.getByRole('button')).toBeDisabled();\n      });\n\n      it('disables button when loading prop is true', () => {\n        render(<Button variant=\"primary\" loading>Loading</Button>);\n        expect(screen.getByRole('button')).toBeDisabled();\n      });\n\n      it('shows loading spinner when loading', () => {\n        render(<Button variant=\"primary\" loading>Loading</Button>);\n        expect(screen.getByRole('button').querySelector('svg')).toBeInTheDocument();\n      });\n\n      it('does not call onClick when disabled', () => {\n        const handleClick = vi.fn();\n        render(<Button variant=\"primary\" onClick={handleClick} disabled>Click</Button>);\n\n        fireEvent.click(screen.getByRole('button'));\n\n        expect(handleClick).not.toHaveBeenCalled();\n      });\n\n      it('forwards ref to button element', () => {\n        const ref = vi.fn();\n        render(<Button variant=\"primary\" ref={ref}>Button</Button>);\n        expect(ref).toHaveBeenCalled();\n      });\n\n      it('has type=\"button\" by default', () => {\n        render(<Button variant=\"primary\">Button</Button>);\n        expect(screen.getByRole('button')).toHaveAttribute('type', 'button');\n      });\n    });\n    ```\n\n16. Initialize git repository\n\n17. Run validation:\n    - `npm run type-check`\n    - `npm run lint`\n    - `npm test`\n    - `npm run storybook` (verify Storybook runs)\n\n18. Display next steps to user\n\n**Quality Requirements:**\n- All TypeScript strict flags enabled\n- Zero TypeScript errors or warnings\n- Zero linter warnings\n- NO `any` types allowed\n- Tests pass with 80%+ coverage\n- Storybook builds without errors\n\nReference the **vite-configuration**, **react-19-patterns**, **tailwind-setup**, and **atomic-design** skills."
              },
              {
                "name": "/test-component",
                "description": "Test React components with Vitest and Testing Library",
                "path": "tech-stacks/js/react/commands/test-component.md",
                "frontmatter": {
                  "description": "Test React components with Vitest and Testing Library",
                  "model": "haiku"
                },
                "content": "# Test React Components\n\nRun component tests using Vitest and React Testing Library.\n\nExecute the following workflow:\n\n1. Run component tests:\n   ```bash\n   npm run test\n   ```\n\n2. For watch mode (during development):\n   ```bash\n   npm run test:watch\n   ```\n\n3. For coverage report:\n   ```bash\n   npm run test:coverage\n   ```\n\n4. For interactive UI:\n   ```bash\n   npm run test:ui\n   ```\n\n5. To run specific test file:\n   ```bash\n   npx vitest run src/components/Button/__tests__/Button.test.tsx\n   ```\n\n6. To run tests matching a pattern:\n   ```bash\n   npx vitest run --grep \"Button\"\n   ```\n\n## Test File Convention\n\nTests should be placed in `__tests__/` directories:\n\n```\nsrc/components/\nâ”œâ”€â”€ Button/\nâ”‚   â”œâ”€â”€ Button.tsx\nâ”‚   â””â”€â”€ __tests__/\nâ”‚       â””â”€â”€ Button.test.tsx\n```\n\n## Test Structure Template\n\n```typescript\nimport { describe, it, expect, vi } from 'vitest';\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport { Button } from '../Button';\n\ndescribe('Button', () => {\n  it('renders children correctly', () => {\n    render(<Button>Click me</Button>);\n\n    expect(screen.getByRole('button')).toHaveTextContent('Click me');\n  });\n\n  it('calls onClick when clicked', () => {\n    const handleClick = vi.fn();\n    render(<Button onClick={handleClick}>Click</Button>);\n\n    fireEvent.click(screen.getByRole('button'));\n\n    expect(handleClick).toHaveBeenCalledTimes(1);\n  });\n\n  it('is disabled when disabled prop is true', () => {\n    render(<Button disabled>Disabled</Button>);\n\n    expect(screen.getByRole('button')).toBeDisabled();\n  });\n});\n```\n\n## Query Priority (Best Practices)\n\n1. `getByRole` - Accessible queries (best)\n2. `getByLabelText` - Form inputs\n3. `getByPlaceholderText` - Inputs without labels\n4. `getByText` - Non-interactive elements\n5. `getByTestId` - Last resort\n\n## Coverage Requirements\n\n- Lines: 80% minimum\n- Functions: 80% minimum\n- Branches: 80% minimum\n- Statements: 80% minimum\n\n**Notes:**\n- Test behavior, not implementation\n- Use verb-first test names: \"renders...\", \"calls...\", \"throws...\"\n- Avoid testing implementation details\n- Mock external dependencies\n\nReference the **component-testing** and **testing-patterns** skills."
              },
              {
                "name": "/test-e2e",
                "description": "Run Playwright E2E tests",
                "path": "tech-stacks/js/react/commands/test-e2e.md",
                "frontmatter": {
                  "description": "Run Playwright E2E tests",
                  "model": "haiku"
                },
                "content": "# Run Playwright E2E Tests\n\nRun end-to-end tests using Playwright.\n\nExecute the following workflow:\n\n1. Ensure Playwright is installed:\n   ```bash\n   npx playwright install\n   ```\n\n2. Run all E2E tests:\n   ```bash\n   npx playwright test\n   ```\n\n3. Run with UI mode (interactive):\n   ```bash\n   npx playwright test --ui\n   ```\n\n4. Run specific test file:\n   ```bash\n   npx playwright test tests/e2e/auth.spec.ts\n   ```\n\n5. Run tests in headed mode (visible browser):\n   ```bash\n   npx playwright test --headed\n   ```\n\n6. Run in specific browser:\n   ```bash\n   npx playwright test --project=chromium\n   npx playwright test --project=firefox\n   npx playwright test --project=webkit\n   ```\n\n7. Debug a specific test:\n   ```bash\n   npx playwright test --debug tests/e2e/auth.spec.ts\n   ```\n\n8. Show test report:\n   ```bash\n   npx playwright show-report\n   ```\n\n## Test File Convention\n\nE2E tests should be in `tests/e2e/`:\n\n```\ntests/\nâ”œâ”€â”€ e2e/\nâ”‚   â”œâ”€â”€ pages/           # Page Objects\nâ”‚   â”‚   â”œâ”€â”€ LoginPage.ts\nâ”‚   â”‚   â””â”€â”€ DashboardPage.ts\nâ”‚   â”œâ”€â”€ auth.spec.ts\nâ”‚   â”œâ”€â”€ dashboard.spec.ts\nâ”‚   â””â”€â”€ visual.spec.ts\nâ””â”€â”€ playwright.config.ts\n```\n\n## Test Structure Template\n\n```typescript\nimport { test, expect } from '@playwright/test';\n\ntest.describe('Authentication', () => {\n  test('logs in successfully', async ({ page }) => {\n    await page.goto('/login');\n\n    await page.getByLabel('Email').fill('user@example.com');\n    await page.getByLabel('Password').fill('password123');\n    await page.getByRole('button', { name: 'Sign in' }).click();\n\n    await expect(page).toHaveURL('/dashboard');\n    await expect(page.getByRole('heading', { name: 'Dashboard' })).toBeVisible();\n  });\n\n  test('shows error with invalid credentials', async ({ page }) => {\n    await page.goto('/login');\n\n    await page.getByLabel('Email').fill('user@example.com');\n    await page.getByLabel('Password').fill('wrongpassword');\n    await page.getByRole('button', { name: 'Sign in' }).click();\n\n    await expect(page.getByRole('alert')).toContainText('Invalid credentials');\n  });\n});\n```\n\n## Configuration (playwright.config.ts)\n\n```typescript\nimport { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  testDir: './tests/e2e',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: 'html',\n  use: {\n    baseURL: 'http://localhost:3000',\n    trace: 'on-first-retry',\n  },\n  projects: [\n    { name: 'chromium', use: { ...devices['Desktop Chrome'] } },\n    { name: 'firefox', use: { ...devices['Desktop Firefox'] } },\n    { name: 'webkit', use: { ...devices['Desktop Safari'] } },\n  ],\n  webServer: {\n    command: 'npm run dev',\n    url: 'http://localhost:3000',\n    reuseExistingServer: !process.env.CI,\n  },\n});\n```\n\n**Notes:**\n- Use stable selectors (role, label, testid)\n- Avoid hard-coded waits\n- Keep tests independent\n- Run in parallel for speed\n\nReference the **playwright-setup** skill for detailed patterns."
              },
              {
                "name": "/test-visual",
                "description": "Run visual regression tests",
                "path": "tech-stacks/js/react/commands/test-visual.md",
                "frontmatter": {
                  "description": "Run visual regression tests",
                  "model": "haiku"
                },
                "content": "# Run Visual Regression Tests\n\nRun visual regression tests to catch unintended UI changes.\n\nExecute the following workflow:\n\n1. Run visual regression tests with Playwright:\n   ```bash\n   npx playwright test --grep \"@visual\"\n   ```\n\n2. Update snapshots when intentional changes are made:\n   ```bash\n   npx playwright test --update-snapshots\n   ```\n\n3. Run visual tests for specific component:\n   ```bash\n   npx playwright test visual.spec.ts --grep \"Button\"\n   ```\n\n## Visual Test Structure\n\n```typescript\nimport { test, expect } from '@playwright/test';\n\ntest.describe('Visual Regression @visual', () => {\n  test('home page matches snapshot', async ({ page }) => {\n    await page.goto('/');\n\n    await expect(page).toHaveScreenshot('home-page.png', {\n      fullPage: true,\n      maxDiffPixelRatio: 0.01,\n    });\n  });\n\n  test('button variants match snapshots', async ({ page }) => {\n    await page.goto('/storybook/button');\n\n    const primaryButton = page.getByTestId('button-primary');\n    await expect(primaryButton).toHaveScreenshot('button-primary.png');\n\n    const secondaryButton = page.getByTestId('button-secondary');\n    await expect(secondaryButton).toHaveScreenshot('button-secondary.png');\n  });\n\n  test('responsive layouts match snapshots', async ({ page }) => {\n    await page.goto('/');\n\n    // Mobile\n    await page.setViewportSize({ width: 375, height: 667 });\n    await expect(page).toHaveScreenshot('home-mobile.png');\n\n    // Tablet\n    await page.setViewportSize({ width: 768, height: 1024 });\n    await expect(page).toHaveScreenshot('home-tablet.png');\n\n    // Desktop\n    await page.setViewportSize({ width: 1920, height: 1080 });\n    await expect(page).toHaveScreenshot('home-desktop.png');\n  });\n});\n```\n\n## Configuration\n\nAdd to `playwright.config.ts`:\n\n```typescript\nexport default defineConfig({\n  expect: {\n    toHaveScreenshot: {\n      maxDiffPixelRatio: 0.01,\n      threshold: 0.2,\n    },\n  },\n  // Create separate project for visual tests\n  projects: [\n    {\n      name: 'visual',\n      testMatch: '**/visual*.spec.ts',\n      use: { ...devices['Desktop Chrome'] },\n    },\n  ],\n});\n```\n\n## Snapshot Storage\n\nSnapshots are stored in:\n```\ntests/\nâ”œâ”€â”€ e2e/\nâ”‚   â”œâ”€â”€ visual.spec.ts\nâ”‚   â””â”€â”€ visual.spec.ts-snapshots/\nâ”‚       â”œâ”€â”€ home-page-chromium-linux.png\nâ”‚       â”œâ”€â”€ home-mobile-chromium-linux.png\nâ”‚       â””â”€â”€ ...\n```\n\n## Best Practices\n\n1. **Stable selectors** - Use data-testid for visual test targets\n2. **Wait for animations** - Ensure animations complete before screenshot\n3. **Consistent state** - Reset state between tests\n4. **Environment consistency** - Same fonts, icons across environments\n5. **Threshold tuning** - Adjust pixel ratio for anti-aliasing differences\n\n## Handling Flaky Tests\n\n```typescript\n// Wait for fonts to load\nawait page.waitForLoadState('networkidle');\n\n// Wait for animations\nawait page.waitForTimeout(500);\n\n// Hide dynamic content\nawait page.evaluate(() => {\n  document.querySelectorAll('[data-dynamic]').forEach((el) => {\n    el.style.visibility = 'hidden';\n  });\n});\n```\n\n**Notes:**\n- Commit baseline snapshots to git\n- Review snapshot changes in PRs\n- Run visual tests in CI with consistent environment\n\nReference the **visual-regression** skill for detailed patterns."
              }
            ],
            "skills": [
              {
                "name": "accessibility-mobile",
                "description": "React Native accessibility patterns for iOS and Android. Use when implementing a11y features.",
                "path": "tech-stacks/js/react-native/skills/accessibility-mobile/SKILL.md",
                "frontmatter": {
                  "name": "accessibility-mobile",
                  "description": "React Native accessibility patterns for iOS and Android. Use when implementing a11y features."
                },
                "content": "# Accessibility Mobile Skill\n\nThis skill covers accessibility (a11y) best practices for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Building accessible components\n- Implementing screen reader support\n- Adding accessibility labels\n- Testing accessibility\n\n## Core Principle\n\n**INCLUSIVE BY DEFAULT** - Accessibility is not optional. Build for all users.\n\n## Basic Accessibility Props\n\n```typescript\nimport { TouchableOpacity, Text, View } from 'react-native';\n\n// Accessible button\n<TouchableOpacity\n  accessible={true}\n  accessibilityRole=\"button\"\n  accessibilityLabel=\"Submit form\"\n  accessibilityHint=\"Double tap to submit your information\"\n  onPress={handleSubmit}\n>\n  <Text>Submit</Text>\n</TouchableOpacity>\n\n// Accessible image\n<Image\n  source={require('./profile.png')}\n  accessible={true}\n  accessibilityLabel=\"Profile picture of John Doe\"\n/>\n\n// Decorative image (hidden from screen readers)\n<Image\n  source={require('./decoration.png')}\n  accessible={false}\n  accessibilityElementsHidden={true}\n  importantForAccessibility=\"no-hide-descendants\"\n/>\n```\n\n## Accessibility Roles\n\n```typescript\n// Common roles\n<TouchableOpacity accessibilityRole=\"button\">\n<TouchableOpacity accessibilityRole=\"link\">\n<TextInput accessibilityRole=\"search\">\n<Switch accessibilityRole=\"switch\">\n<Image accessibilityRole=\"image\">\n<Text accessibilityRole=\"header\">\n<Text accessibilityRole=\"text\">\n<View accessibilityRole=\"alert\">\n<View accessibilityRole=\"checkbox\">\n<View accessibilityRole=\"radio\">\n<View accessibilityRole=\"tab\">\n<View accessibilityRole=\"tablist\">\n<View accessibilityRole=\"progressbar\">\n<View accessibilityRole=\"slider\">\n```\n\n## Accessible Forms\n\n```typescript\nfunction AccessibleForm(): React.ReactElement {\n  const [email, setEmail] = useState('');\n  const [emailError, setEmailError] = useState('');\n\n  return (\n    <View>\n      {/* Label association */}\n      <Text nativeID=\"emailLabel\">Email Address</Text>\n      <TextInput\n        value={email}\n        onChangeText={setEmail}\n        accessibilityLabel=\"Email Address\"\n        accessibilityLabelledBy=\"emailLabel\"\n        accessibilityRole=\"none\"\n        keyboardType=\"email-address\"\n        autoComplete=\"email\"\n        textContentType=\"emailAddress\"\n        // Error state\n        accessibilityInvalid={!!emailError}\n        accessibilityErrorMessage={emailError}\n      />\n      {emailError && (\n        <Text\n          accessibilityRole=\"alert\"\n          accessibilityLiveRegion=\"polite\"\n          className=\"text-red-500\"\n        >\n          {emailError}\n        </Text>\n      )}\n\n      <TouchableOpacity\n        accessibilityRole=\"button\"\n        accessibilityLabel=\"Submit registration form\"\n        accessibilityState={{ disabled: !email }}\n        disabled={!email}\n        onPress={handleSubmit}\n      >\n        <Text>Submit</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n```\n\n## Accessibility State\n\n```typescript\n// Toggle state\n<TouchableOpacity\n  accessibilityRole=\"checkbox\"\n  accessibilityState={{\n    checked: isChecked,\n  }}\n  onPress={() => setIsChecked(!isChecked)}\n>\n  <Text>{isChecked ? 'â˜‘' : 'â˜'} Accept terms</Text>\n</TouchableOpacity>\n\n// Expanded state\n<TouchableOpacity\n  accessibilityRole=\"button\"\n  accessibilityState={{\n    expanded: isExpanded,\n  }}\n  onPress={() => setIsExpanded(!isExpanded)}\n>\n  <Text>Show details</Text>\n</TouchableOpacity>\n\n// Selected state\n<TouchableOpacity\n  accessibilityRole=\"tab\"\n  accessibilityState={{\n    selected: isSelected,\n  }}\n>\n  <Text>Tab 1</Text>\n</TouchableOpacity>\n\n// Busy state\n<View\n  accessibilityRole=\"progressbar\"\n  accessibilityState={{\n    busy: isLoading,\n  }}\n>\n  <ActivityIndicator />\n</View>\n```\n\n## Accessibility Value\n\n```typescript\n// Progress bar\n<View\n  accessibilityRole=\"progressbar\"\n  accessibilityValue={{\n    min: 0,\n    max: 100,\n    now: progress,\n    text: `${progress}% complete`,\n  }}\n>\n  <View style={{ width: `${progress}%`, height: 4, backgroundColor: 'blue' }} />\n</View>\n\n// Slider\n<Slider\n  accessibilityRole=\"adjustable\"\n  accessibilityValue={{\n    min: 0,\n    max: 100,\n    now: volume,\n    text: `Volume ${volume}%`,\n  }}\n  accessibilityLabel=\"Volume control\"\n  value={volume}\n  onValueChange={setVolume}\n/>\n```\n\n## Live Regions\n\n```typescript\n// Announce changes to screen readers\n<View\n  accessibilityLiveRegion=\"polite\" // or \"assertive\"\n  accessibilityRole=\"alert\"\n>\n  <Text>{statusMessage}</Text>\n</View>\n\n// Toast/notification\nfunction Toast({ message, visible }: ToastProps): React.ReactElement | null {\n  if (!visible) return null;\n\n  return (\n    <View\n      accessibilityRole=\"alert\"\n      accessibilityLiveRegion=\"assertive\"\n      className=\"bg-black p-4 rounded-lg\"\n    >\n      <Text className=\"text-white\">{message}</Text>\n    </View>\n  );\n}\n```\n\n## Grouping Elements\n\n```typescript\n// Group related elements\n<View\n  accessible={true}\n  accessibilityLabel=\"Product: iPhone 15 Pro, Price: $999\"\n>\n  <Text>iPhone 15 Pro</Text>\n  <Text>$999</Text>\n</View>\n\n// Prevent grouping\n<View accessible={false}>\n  <TouchableOpacity accessibilityLabel=\"Edit\">\n    <Icon name=\"edit\" />\n  </TouchableOpacity>\n  <TouchableOpacity accessibilityLabel=\"Delete\">\n    <Icon name=\"delete\" />\n  </TouchableOpacity>\n</View>\n```\n\n## Focus Management\n\n```typescript\nimport { useRef } from 'react';\nimport { AccessibilityInfo, findNodeHandle } from 'react-native';\n\nfunction FocusExample(): React.ReactElement {\n  const headerRef = useRef<Text>(null);\n\n  const focusOnHeader = () => {\n    const node = findNodeHandle(headerRef.current);\n    if (node) {\n      AccessibilityInfo.setAccessibilityFocus(node);\n    }\n  };\n\n  return (\n    <View>\n      <Text ref={headerRef} accessibilityRole=\"header\">\n        Welcome\n      </Text>\n      <TouchableOpacity onPress={focusOnHeader}>\n        <Text>Focus header</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n```\n\n## Screen Reader Detection\n\n```typescript\nimport { useEffect, useState } from 'react';\nimport { AccessibilityInfo } from 'react-native';\n\nfunction useScreenReader() {\n  const [isEnabled, setIsEnabled] = useState(false);\n\n  useEffect(() => {\n    AccessibilityInfo.isScreenReaderEnabled().then(setIsEnabled);\n\n    const subscription = AccessibilityInfo.addEventListener(\n      'screenReaderChanged',\n      setIsEnabled\n    );\n\n    return () => subscription.remove();\n  }, []);\n\n  return isEnabled;\n}\n\n// Usage\nfunction MyComponent(): React.ReactElement {\n  const isScreenReaderEnabled = useScreenReader();\n\n  return (\n    <View>\n      {isScreenReaderEnabled ? (\n        <Text>Detailed description for screen reader users</Text>\n      ) : (\n        <Icon name=\"info\" />\n      )}\n    </View>\n  );\n}\n```\n\n## Reduce Motion\n\n```typescript\nimport { useEffect, useState } from 'react';\nimport { AccessibilityInfo } from 'react-native';\n\nfunction useReduceMotion() {\n  const [reduceMotion, setReduceMotion] = useState(false);\n\n  useEffect(() => {\n    AccessibilityInfo.isReduceMotionEnabled().then(setReduceMotion);\n\n    const subscription = AccessibilityInfo.addEventListener(\n      'reduceMotionChanged',\n      setReduceMotion\n    );\n\n    return () => subscription.remove();\n  }, []);\n\n  return reduceMotion;\n}\n\n// Usage with animations\nfunction AnimatedComponent(): React.ReactElement {\n  const reduceMotion = useReduceMotion();\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [\n      {\n        scale: reduceMotion\n          ? 1\n          : withSpring(scale.value),\n      },\n    ],\n  }));\n\n  return <Animated.View style={animatedStyle} />;\n}\n```\n\n## Accessible Navigation\n\n```typescript\n// Tab bar with proper accessibility\nfunction TabBar({ tabs, activeTab, onTabPress }) {\n  return (\n    <View accessibilityRole=\"tablist\">\n      {tabs.map((tab, index) => (\n        <TouchableOpacity\n          key={tab.id}\n          accessibilityRole=\"tab\"\n          accessibilityState={{ selected: activeTab === index }}\n          accessibilityLabel={`${tab.label}, tab ${index + 1} of ${tabs.length}`}\n          onPress={() => onTabPress(index)}\n        >\n          <Text>{tab.label}</Text>\n        </TouchableOpacity>\n      ))}\n    </View>\n  );\n}\n```\n\n## Accessible Lists\n\n```typescript\nfunction AccessibleList({ items }) {\n  return (\n    <FlashList\n      data={items}\n      renderItem={({ item, index }) => (\n        <View\n          accessible={true}\n          accessibilityLabel={`Item ${index + 1} of ${items.length}: ${item.title}`}\n          accessibilityHint=\"Double tap to view details\"\n        >\n          <Text>{item.title}</Text>\n        </View>\n      )}\n      accessibilityRole=\"list\"\n    />\n  );\n}\n```\n\n## Testing Accessibility\n\n```typescript\nimport { render, screen } from '@testing-library/react-native';\n\ndescribe('Accessibility', () => {\n  it('has correct accessibility role', () => {\n    render(<SubmitButton />);\n    expect(screen.getByRole('button')).toBeOnTheScreen();\n  });\n\n  it('has accessibility label', () => {\n    render(<IconButton icon=\"heart\" label=\"Add to favorites\" />);\n    expect(screen.getByLabelText('Add to favorites')).toBeOnTheScreen();\n  });\n\n  it('announces state changes', () => {\n    render(<Toggle checked={true} label=\"Notifications\" />);\n    expect(screen.getByRole('switch')).toHaveAccessibilityState({\n      checked: true,\n    });\n  });\n});\n```\n\n## Checklist\n\n- [ ] All interactive elements have `accessibilityRole`\n- [ ] All images have `accessibilityLabel` or are hidden\n- [ ] Form inputs have labels and error messages\n- [ ] Touch targets are at least 44x44 points\n- [ ] Color is not the only way to convey information\n- [ ] Text has sufficient contrast ratio (4.5:1)\n- [ ] Animations respect reduce motion setting\n- [ ] Focus order is logical\n- [ ] Dynamic content uses live regions\n- [ ] Screen reader testing on iOS and Android\n\n## Notes\n\n- Test with VoiceOver (iOS) and TalkBack (Android)\n- Use Accessibility Inspector in Xcode\n- Enable accessibility testing in development\n- Consider users with motor impairments\n- Provide alternatives for gestures"
              },
              {
                "name": "atomic-design-mobile",
                "description": "Atomic Design component organization pattern for React Native mobile applications. Use when creating new components with proper accessibility and touch targets.",
                "path": "tech-stacks/js/react-native/skills/atomic-design-mobile/SKILL.md",
                "frontmatter": {
                  "name": "atomic-design-mobile",
                  "description": "Atomic Design component organization pattern for React Native mobile applications. Use when creating new components with proper accessibility and touch targets."
                },
                "content": "# Atomic Design Mobile Skill\n\nThis skill covers the Atomic Design pattern for organizing React Native components with mobile-specific considerations including accessibility, touch targets, and platform differences.\n\n## When to Use\n\nUse this skill when:\n- Creating new mobile components\n- Organizing existing component structures\n- Deciding where a component should live\n- Ensuring accessibility compliance\n- Handling platform-specific requirements\n\n## Core Principle\n\n**ACCESSIBLE BY DEFAULT** - Every component must meet mobile accessibility standards including touch targets, screen reader support, and platform conventions.\n\n## The Five-Level Hierarchy\n\n| Level | Alternative Name | Description | Examples | State | Storybook |\n|-------|------------------|-------------|----------|-------|-----------|\n| **Atoms** | Elements | Basic building blocks | Button, Input, Text, Icon | Stateless | Yes |\n| **Molecules** | Widgets | Functional units combining atoms | SearchBar, FormField, ListItem | Minimal state | Yes |\n| **Organisms** | Modules | Complex UI sections | Header, TabBar, LoginForm | Can have state | Yes |\n| **Templates** | Layouts | Screen-level layout structures | ScreenLayout, AuthLayout | Layout state only | No |\n| **Screens** | - | Specific template instances | Login screen, Dashboard screen | Full state | No |\n\n## Mobile-Specific Requirements by Level\n\n### Atoms\n\n- **Touch targets:** Minimum 44x44pt (Apple HIG, Material Design)\n- **Accessibility props:** `accessibilityLabel`, `accessibilityRole`, `accessibilityState`\n- **Platform styling:** Use `Platform.OS` or `Platform.select` when needed\n- **Haptic feedback:** Consider `expo-haptics` for interactive elements\n\n### Molecules\n\n- **Keyboard handling:** Use `KeyboardAvoidingView` for form inputs\n- **Gesture support:** Use `react-native-gesture-handler` when needed\n- **Safe areas:** Consider safe area insets for edge components\n\n### Organisms\n\n- **Platform awareness:** iOS vs Android visual differences\n- **Safe areas:** Use `useSafeAreaInsets` for edge sections\n- **Navigation integration:** Consider navigation context\n\n### Templates\n\n- **Screen layout:** Handle status bar, navigation bar\n- **Safe areas:** Manage all safe area insets\n- **Keyboard avoidance:** Global keyboard handling\n- **Orientation:** Support orientation changes\n\n## Component Classification Decision\n\nUse this flowchart to determine the correct atomic level:\n\n| Question | Answer | Level |\n|----------|--------|-------|\n| Can it be broken down further? | No | **Atom** |\n| Does it combine atoms for a single purpose? | Yes | **Molecule** |\n| Is it a larger section with business logic? | Yes | **Organism** |\n| Does it define screen structure without content? | Yes | **Template** |\n| Does it have real content and data connections? | Yes | **Screen** |\n\n## Classification Checklists\n\n### Is it an Atom?\n\n- [ ] Cannot be broken down into smaller components\n- [ ] Single basic element (Pressable, TextInput, Text, Image)\n- [ ] No business logic\n- [ ] Stateless or only UI state (pressed, focused)\n- [ ] No dependencies on other custom components\n- [ ] Has minimum 44pt touch target\n- [ ] Has accessibility props\n\n### Is it a Molecule?\n\n- [ ] Combines 2+ atoms\n- [ ] Single functional purpose\n- [ ] Minimal internal state\n- [ ] No data fetching\n- [ ] No connection to global state\n- [ ] Handles keyboard avoidance if containing inputs\n\n### Is it an Organism?\n\n- [ ] Larger interface section\n- [ ] May have business logic\n- [ ] May connect to stores\n- [ ] Relatively standalone\n- [ ] Could be used across multiple screens\n- [ ] Handles safe areas if at screen edges\n\n### Is it a Template?\n\n- [ ] Defines screen structure\n- [ ] Uses slots/children for content\n- [ ] No real data\n- [ ] Handles safe areas, status bar, keyboard\n- [ ] Manages screen-level layout concerns\n\n### Is it a Screen?\n\n- [ ] Uses a template\n- [ ] Has real content\n- [ ] Connects to data sources\n- [ ] Handles routing/navigation\n\n## Code Examples\n\n### Atom Example\n\n```typescript\n// components/atoms/Button/Button.tsx\nimport { Pressable, Text, ActivityIndicator, StyleSheet, Platform } from 'react-native';\n\ninterface ButtonProps {\n  variant: 'primary' | 'secondary' | 'danger';\n  size?: 'sm' | 'md' | 'lg';\n  loading?: boolean;\n  disabled?: boolean;\n  onPress?: () => void;\n  children: string;\n  accessibilityLabel?: string;\n}\n\nexport function Button({\n  variant,\n  size = 'md',\n  loading,\n  disabled,\n  onPress,\n  children,\n  accessibilityLabel,\n}: ButtonProps) {\n  return (\n    <Pressable\n      style={({ pressed }) => [\n        styles.base,\n        styles[variant],\n        styles[size],\n        (disabled || loading) && styles.disabled,\n        pressed && styles.pressed,\n      ]}\n      onPress={onPress}\n      disabled={disabled || loading}\n      accessibilityLabel={accessibilityLabel || children}\n      accessibilityRole=\"button\"\n      accessibilityState={{ disabled: disabled || loading }}\n    >\n      {loading && <ActivityIndicator color=\"#fff\" style={styles.spinner} />}\n      <Text style={[styles.text, styles[`${variant}Text`]]}>{children}</Text>\n    </Pressable>\n  );\n}\n\nconst styles = StyleSheet.create({\n  base: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 8,\n    minHeight: 44, // Minimum touch target\n    minWidth: 44,\n  },\n  primary: {\n    backgroundColor: '#2563eb',\n  },\n  secondary: {\n    backgroundColor: '#e5e7eb',\n  },\n  danger: {\n    backgroundColor: '#dc2626',\n  },\n  sm: {\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n  },\n  md: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n  },\n  lg: {\n    paddingHorizontal: 24,\n    paddingVertical: 16,\n  },\n  disabled: {\n    opacity: 0.5,\n  },\n  pressed: {\n    opacity: 0.8,\n  },\n  spinner: {\n    marginRight: 8,\n  },\n  text: {\n    fontWeight: '600',\n  },\n  primaryText: {\n    color: '#ffffff',\n  },\n  secondaryText: {\n    color: '#111827',\n  },\n  dangerText: {\n    color: '#ffffff',\n  },\n});\n```\n\n### Molecule Example\n\n```typescript\n// components/molecules/FormField/FormField.tsx\nimport { View, Text, TextInput, StyleSheet } from 'react-native';\n\ninterface FormFieldProps {\n  label: string;\n  value: string;\n  onChangeText: (text: string) => void;\n  placeholder?: string;\n  error?: string;\n  required?: boolean;\n  secureTextEntry?: boolean;\n  keyboardType?: 'default' | 'email-address' | 'numeric' | 'phone-pad';\n  accessibilityLabel?: string;\n}\n\nexport function FormField({\n  label,\n  value,\n  onChangeText,\n  placeholder,\n  error,\n  required,\n  secureTextEntry,\n  keyboardType = 'default',\n  accessibilityLabel,\n}: FormFieldProps) {\n  const inputAccessibilityLabel = accessibilityLabel || `${label}${required ? ', required' : ''}`;\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.label}>\n        {label}\n        {required && <Text style={styles.required}> *</Text>}\n      </Text>\n      <TextInput\n        style={[styles.input, error && styles.inputError]}\n        value={value}\n        onChangeText={onChangeText}\n        placeholder={placeholder}\n        secureTextEntry={secureTextEntry}\n        keyboardType={keyboardType}\n        accessibilityLabel={inputAccessibilityLabel}\n        accessibilityState={{ disabled: false }}\n        accessibilityHint={error}\n      />\n      {error && (\n        <Text style={styles.error} accessibilityRole=\"alert\">\n          {error}\n        </Text>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    marginBottom: 16,\n  },\n  label: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: '#374151',\n    marginBottom: 4,\n  },\n  required: {\n    color: '#dc2626',\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#d1d5db',\n    borderRadius: 8,\n    paddingHorizontal: 12,\n    paddingVertical: 12,\n    fontSize: 16,\n    minHeight: 44, // Minimum touch target\n  },\n  inputError: {\n    borderColor: '#dc2626',\n  },\n  error: {\n    fontSize: 12,\n    color: '#dc2626',\n    marginTop: 4,\n  },\n});\n```\n\n### Organism Example\n\n```typescript\n// components/organisms/LoginForm/LoginForm.tsx\nimport { useState } from 'react';\nimport { View, StyleSheet, KeyboardAvoidingView, Platform } from 'react-native';\nimport { Button } from '@/components/atoms';\nimport { FormField } from '@/components/molecules';\n\ninterface LoginFormProps {\n  onSubmit: (email: string, password: string) => Promise<void>;\n}\n\nexport function LoginForm({ onSubmit }: LoginFormProps) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const validate = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    if (!email) newErrors.email = 'Email is required';\n    if (!password) newErrors.password = 'Password is required';\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async () => {\n    if (!validate()) return;\n\n    setLoading(true);\n    try {\n      await onSubmit(email, password);\n    } catch {\n      setErrors({ form: 'Invalid credentials' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      style={styles.container}\n    >\n      <FormField\n        label=\"Email\"\n        value={email}\n        onChangeText={setEmail}\n        placeholder=\"you@example.com\"\n        keyboardType=\"email-address\"\n        error={errors.email}\n        required\n      />\n      <FormField\n        label=\"Password\"\n        value={password}\n        onChangeText={setPassword}\n        placeholder=\"Enter password\"\n        secureTextEntry\n        error={errors.password}\n        required\n      />\n      <Button\n        variant=\"primary\"\n        onPress={handleSubmit}\n        loading={loading}\n        accessibilityLabel=\"Sign in\"\n      >\n        Sign In\n      </Button>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: 16,\n  },\n});\n```\n\n### Template Example\n\n```typescript\n// components/templates/ScreenLayout/ScreenLayout.tsx\nimport { SafeAreaView, View, StyleSheet, StatusBar, Platform } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { Header } from '@/components/organisms';\n\ninterface ScreenLayoutProps {\n  children: React.ReactNode;\n  title?: string;\n  showHeader?: boolean;\n  showBackButton?: boolean;\n  onBack?: () => void;\n}\n\nexport function ScreenLayout({\n  children,\n  title,\n  showHeader = true,\n  showBackButton = false,\n  onBack,\n}: ScreenLayoutProps) {\n  const insets = useSafeAreaInsets();\n\n  return (\n    <View style={[styles.container, { paddingTop: insets.top }]}>\n      <StatusBar barStyle=\"dark-content\" />\n      {showHeader && (\n        <Header\n          title={title}\n          showBackButton={showBackButton}\n          onBack={onBack}\n        />\n      )}\n      <View style={[styles.content, { paddingBottom: insets.bottom }]}>\n        {children}\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#ffffff',\n  },\n  content: {\n    flex: 1,\n    padding: 16,\n  },\n});\n```\n\n### Screen Example (Expo Router)\n\n```typescript\n// app/(auth)/login.tsx\nimport { useRouter } from 'expo-router';\nimport { AuthLayout } from '@/components/templates';\nimport { LoginForm } from '@/components/organisms';\nimport { useAuth } from '@/hooks/useAuth';\n\nexport default function LoginScreen() {\n  const router = useRouter();\n  const { login } = useAuth();\n\n  const handleLogin = async (email: string, password: string) => {\n    await login(email, password);\n    router.replace('/(tabs)');\n  };\n\n  return (\n    <AuthLayout title=\"Welcome Back\" subtitle=\"Sign in to your account\">\n      <LoginForm onSubmit={handleLogin} />\n    </AuthLayout>\n  );\n}\n```\n\n## React Native Storybook Story Templates\n\n### Atom Story Template\n\n```typescript\n// Button.stories.tsx\nimport type { Meta, StoryObj } from '@storybook/react-native';\nimport { Button } from './Button';\n\nconst meta: Meta<typeof Button> = {\n  title: 'Atoms/Button',\n  component: Button,\n  argTypes: {\n    variant: {\n      control: 'select',\n      options: ['primary', 'secondary', 'danger'],\n    },\n    size: {\n      control: 'select',\n      options: ['sm', 'md', 'lg'],\n    },\n    loading: { control: 'boolean' },\n    disabled: { control: 'boolean' },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof Button>;\n\nexport const Primary: Story = {\n  args: {\n    variant: 'primary',\n    children: 'Primary Button',\n  },\n};\n\nexport const Secondary: Story = {\n  args: {\n    variant: 'secondary',\n    children: 'Secondary Button',\n  },\n};\n\nexport const Loading: Story = {\n  args: {\n    variant: 'primary',\n    children: 'Saving...',\n    loading: true,\n  },\n};\n\nexport const Disabled: Story = {\n  args: {\n    variant: 'primary',\n    children: 'Disabled',\n    disabled: true,\n  },\n};\n```\n\n### Molecule Story Template\n\n```typescript\n// FormField.stories.tsx\nimport type { Meta, StoryObj } from '@storybook/react-native';\nimport { useState } from 'react';\nimport { FormField } from './FormField';\n\nconst meta: Meta<typeof FormField> = {\n  title: 'Molecules/FormField',\n  component: FormField,\n};\n\nexport default meta;\ntype Story = StoryObj<typeof FormField>;\n\n// Wrapper for controlled input\nfunction FormFieldWrapper(props: any) {\n  const [value, setValue] = useState('');\n  return <FormField {...props} value={value} onChangeText={setValue} />;\n}\n\nexport const Default: Story = {\n  render: () => (\n    <FormFieldWrapper\n      label=\"Email\"\n      placeholder=\"you@example.com\"\n    />\n  ),\n};\n\nexport const WithError: Story = {\n  render: () => (\n    <FormFieldWrapper\n      label=\"Email\"\n      error=\"Email is required\"\n      required\n    />\n  ),\n};\n\nexport const Password: Story = {\n  render: () => (\n    <FormFieldWrapper\n      label=\"Password\"\n      placeholder=\"Enter password\"\n      secureTextEntry\n      required\n    />\n  ),\n};\n```\n\n### Organism Story Template\n\n```typescript\n// LoginForm.stories.tsx\nimport type { Meta, StoryObj } from '@storybook/react-native';\nimport { LoginForm } from './LoginForm';\n\nconst meta: Meta<typeof LoginForm> = {\n  title: 'Organisms/LoginForm',\n  component: LoginForm,\n};\n\nexport default meta;\ntype Story = StoryObj<typeof LoginForm>;\n\nexport const Default: Story = {\n  args: {\n    onSubmit: async (email, password) => {\n      console.log('Login:', { email, password });\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n    },\n  },\n};\n```\n\n## Naming Conventions\n\n```\ncomponents/\nâ”œâ”€â”€ atoms/\nâ”‚   â”œâ”€â”€ Button/           # PascalCase - noun\nâ”‚   â”œâ”€â”€ Input/\nâ”‚   â”œâ”€â”€ Text/\nâ”‚   â””â”€â”€ Icon/\nâ”œâ”€â”€ molecules/\nâ”‚   â”œâ”€â”€ SearchBar/        # PascalCase - descriptive compound\nâ”‚   â”œâ”€â”€ FormField/\nâ”‚   â””â”€â”€ ListItem/\nâ”œâ”€â”€ organisms/\nâ”‚   â”œâ”€â”€ Header/           # PascalCase - section name\nâ”‚   â”œâ”€â”€ TabBar/\nâ”‚   â””â”€â”€ LoginForm/\nâ”œâ”€â”€ templates/\nâ”‚   â”œâ”€â”€ ScreenLayout/     # PascalCase - always end with \"Layout\"\nâ”‚   â”œâ”€â”€ AuthLayout/\nâ”‚   â””â”€â”€ TabLayout/\nâ””â”€â”€ index.ts\n\napp/                      # Screens via Expo Router\nâ”œâ”€â”€ (auth)/\nâ”‚   â”œâ”€â”€ login.tsx         # lowercase - Expo Router convention\nâ”‚   â””â”€â”€ register.tsx\nâ””â”€â”€ (tabs)/\n    â”œâ”€â”€ index.tsx\n    â””â”€â”€ profile.tsx\n```\n\n## Import Strategy\n\n```typescript\n// Within same level - use relative imports\nimport { Button } from '../Button';\n\n// Across levels - use path alias (no src/ prefix for Expo)\nimport { Button, Input } from '@/components/atoms';\nimport { SearchBar, FormField } from '@/components/molecules';\nimport { Header, LoginForm } from '@/components/organisms';\nimport { ScreenLayout, AuthLayout } from '@/components/templates';\n\n// From top-level barrel\nimport { Button, Input, SearchBar, Header } from '@/components';\n```\n\n### Path Alias Configuration (Expo)\n\n**tsconfig.json:**\n```json\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"@/*\": [\"./*\"]\n    }\n  }\n}\n```\n\n**Note:** Expo projects do not use a `src/` directory.\n\n## Barrel Export Patterns\n\n### Atom Level Barrel Export\n\n```typescript\n// components/atoms/index.ts\nexport { Button } from './Button';\nexport { Input } from './Input';\nexport { Text } from './Text';\nexport { Icon } from './Icon';\nexport { Avatar } from './Avatar';\nexport { Spinner } from './Spinner';\n\n// Re-export types\nexport type { ButtonProps } from './Button';\nexport type { InputProps } from './Input';\n```\n\n### Molecule Level Barrel Export\n\n```typescript\n// components/molecules/index.ts\nexport { SearchBar } from './SearchBar';\nexport { FormField } from './FormField';\nexport { ListItem } from './ListItem';\nexport { Card } from './Card';\n\nexport type { FormFieldProps } from './FormField';\n```\n\n### Organism Level Barrel Export\n\n```typescript\n// components/organisms/index.ts\nexport { Header } from './Header';\nexport { TabBar } from './TabBar';\nexport { LoginForm } from './LoginForm';\nexport { BottomSheet } from './BottomSheet';\n\nexport type { LoginFormProps } from './LoginForm';\n```\n\n### Template Level Barrel Export\n\n```typescript\n// components/templates/index.ts\nexport { ScreenLayout } from './ScreenLayout';\nexport { AuthLayout } from './AuthLayout';\nexport { TabLayout } from './TabLayout';\n```\n\n### Main Barrel Export\n\n```typescript\n// components/index.ts\nexport * from './atoms';\nexport * from './molecules';\nexport * from './organisms';\nexport * from './templates';\n```\n\n## Accessibility Checklist\n\n### Every Atom Must Have\n\n- [ ] `accessibilityLabel` - descriptive text for screen readers\n- [ ] `accessibilityRole` - semantic role (button, link, image, etc.)\n- [ ] `accessibilityState` - current state (disabled, selected, checked)\n- [ ] Minimum 44x44pt touch target\n- [ ] Visible focus indicator (where applicable)\n\n### Every Interactive Element Must Have\n\n- [ ] `accessibilityHint` - describes action result (optional but recommended)\n- [ ] Proper contrast ratio (4.5:1 for text)\n- [ ] Touch feedback (pressed state visual change)\n\n### Example Accessibility Props\n\n```typescript\n<Pressable\n  accessibilityLabel=\"Submit form\"\n  accessibilityRole=\"button\"\n  accessibilityState={{ disabled: isDisabled }}\n  accessibilityHint=\"Submits the login form\"\n>\n  <Text>Submit</Text>\n</Pressable>\n```\n\n## Platform-Specific Patterns\n\n### Using Platform.OS\n\n```typescript\nimport { Platform, StyleSheet } from 'react-native';\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingTop: Platform.OS === 'ios' ? 20 : 0,\n  },\n});\n```\n\n### Using Platform.select\n\n```typescript\nimport { Platform, StyleSheet } from 'react-native';\n\nconst styles = StyleSheet.create({\n  shadow: Platform.select({\n    ios: {\n      shadowColor: '#000',\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.25,\n      shadowRadius: 4,\n    },\n    android: {\n      elevation: 4,\n    },\n    default: {},\n  }),\n});\n```\n\n## Best Practices\n\n1. **Touch targets first** - Every interactive element is at least 44x44pt\n2. **Accessibility always** - Never skip accessibilityLabel and accessibilityRole\n3. **Use StyleSheet** - Create styles outside components for performance\n4. **Pressable over TouchableOpacity** - Better accessibility support\n5. **Safe areas everywhere** - Handle notches, home indicators, status bars\n6. **Keyboard avoidance** - Wrap forms in KeyboardAvoidingView\n7. **Platform awareness** - Test on both iOS and Android\n8. **Test with VoiceOver/TalkBack** - Verify screen reader experience\n\n## Notes\n\n- Expo projects do not use a `src/` directory\n- Templates and Screens do not get Storybook stories\n- React Native Storybook runs on-device, not in browser\n- Brad Frost's original article: https://bradfrost.com/blog/post/atomic-web-design/"
              },
              {
                "name": "component-testing-mobile",
                "description": "Jest and React Native Testing Library patterns. Use when writing component tests.",
                "path": "tech-stacks/js/react-native/skills/component-testing-mobile/SKILL.md",
                "frontmatter": {
                  "name": "component-testing-mobile",
                  "description": "Jest and React Native Testing Library patterns. Use when writing component tests."
                },
                "content": "# Component Testing Mobile Skill\n\nThis skill covers testing React Native components with Jest and RNTL.\n\n## When to Use\n\nUse this skill when:\n- Writing unit tests for components\n- Testing hooks and utilities\n- Testing component interactions\n- Mocking native modules\n\n## Core Principle\n\n**TEST BEHAVIOR** - Test what users see and do, not implementation details.\n\n## Installation\n\n```bash\nnpm install --save-dev @testing-library/react-native jest @types/jest\n```\n\n## Jest Configuration\n\n```javascript\n// jest.config.js\nmodule.exports = {\n  preset: 'jest-expo',\n  setupFilesAfterEnv: ['@testing-library/react-native/extend-expect'],\n  transformIgnorePatterns: [\n    'node_modules/(?!((jest-)?react-native|@react-native(-community)?)|expo(nent)?|@expo(nent)?/.*|@expo-google-fonts/.*|react-navigation|@react-navigation/.*|@unimodules/.*|unimodules|sentry-expo|native-base|react-native-svg)',\n  ],\n  moduleNameMapper: {\n    '^@/(.*)$': '<rootDir>/$1',\n  },\n  collectCoverageFrom: [\n    '**/*.{ts,tsx}',\n    '!**/node_modules/**',\n    '!**/coverage/**',\n    '!**/*.d.ts',\n  ],\n};\n```\n\n## Basic Component Test\n\n```typescript\n// components/__tests__/Button.test.tsx\nimport { render, screen, fireEvent } from '@testing-library/react-native';\nimport { Button } from '../Button';\n\ndescribe('Button', () => {\n  it('renders with text', () => {\n    render(<Button>Press me</Button>);\n\n    expect(screen.getByText('Press me')).toBeOnTheScreen();\n  });\n\n  it('calls onPress when pressed', () => {\n    const onPress = jest.fn();\n    render(<Button onPress={onPress}>Press me</Button>);\n\n    fireEvent.press(screen.getByText('Press me'));\n\n    expect(onPress).toHaveBeenCalledTimes(1);\n  });\n\n  it('is disabled when disabled prop is true', () => {\n    const onPress = jest.fn();\n    render(<Button onPress={onPress} disabled>Press me</Button>);\n\n    fireEvent.press(screen.getByText('Press me'));\n\n    expect(onPress).not.toHaveBeenCalled();\n  });\n});\n```\n\n## Testing with Accessibility\n\n```typescript\nimport { render, screen } from '@testing-library/react-native';\n\ndescribe('AccessibleButton', () => {\n  it('has correct accessibility role', () => {\n    render(<Button accessibilityRole=\"button\">Submit</Button>);\n\n    expect(screen.getByRole('button')).toBeOnTheScreen();\n  });\n\n  it('has accessibility label', () => {\n    render(\n      <Button accessibilityLabel=\"Submit form\">\n        <Icon name=\"check\" />\n      </Button>\n    );\n\n    expect(screen.getByLabelText('Submit form')).toBeOnTheScreen();\n  });\n});\n```\n\n## Testing Async Operations\n\n```typescript\nimport { render, screen, waitFor } from '@testing-library/react-native';\n\ndescribe('UserProfile', () => {\n  it('shows loading state initially', () => {\n    render(<UserProfile userId=\"123\" />);\n\n    expect(screen.getByText('Loading...')).toBeOnTheScreen();\n  });\n\n  it('shows user data after loading', async () => {\n    render(<UserProfile userId=\"123\" />);\n\n    await waitFor(() => {\n      expect(screen.getByText('John Doe')).toBeOnTheScreen();\n    });\n  });\n\n  it('shows error on fetch failure', async () => {\n    server.use(\n      rest.get('/api/users/123', (req, res, ctx) => {\n        return res(ctx.status(500));\n      })\n    );\n\n    render(<UserProfile userId=\"123\" />);\n\n    await waitFor(() => {\n      expect(screen.getByText('Error loading user')).toBeOnTheScreen();\n    });\n  });\n});\n```\n\n## Testing Forms\n\n```typescript\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react-native';\nimport { LoginForm } from '../LoginForm';\n\ndescribe('LoginForm', () => {\n  it('shows validation errors for empty submission', async () => {\n    render(<LoginForm />);\n\n    fireEvent.press(screen.getByText('Sign In'));\n\n    await waitFor(() => {\n      expect(screen.getByText('Email is required')).toBeOnTheScreen();\n    });\n  });\n\n  it('submits with valid data', async () => {\n    const onSubmit = jest.fn();\n    render(<LoginForm onSubmit={onSubmit} />);\n\n    fireEvent.changeText(\n      screen.getByPlaceholderText('Email'),\n      'test@example.com'\n    );\n    fireEvent.changeText(\n      screen.getByPlaceholderText('Password'),\n      'password123'\n    );\n    fireEvent.press(screen.getByText('Sign In'));\n\n    await waitFor(() => {\n      expect(onSubmit).toHaveBeenCalledWith({\n        email: 'test@example.com',\n        password: 'password123',\n      });\n    });\n  });\n});\n```\n\n## Testing Lists\n\n```typescript\nimport { render, screen, fireEvent } from '@testing-library/react-native';\n\ndescribe('TodoList', () => {\n  const items = [\n    { id: '1', text: 'Buy groceries' },\n    { id: '2', text: 'Walk the dog' },\n  ];\n\n  it('renders all items', () => {\n    render(<TodoList items={items} />);\n\n    expect(screen.getByText('Buy groceries')).toBeOnTheScreen();\n    expect(screen.getByText('Walk the dog')).toBeOnTheScreen();\n  });\n\n  it('calls onItemPress with correct item', () => {\n    const onItemPress = jest.fn();\n    render(<TodoList items={items} onItemPress={onItemPress} />);\n\n    fireEvent.press(screen.getByText('Buy groceries'));\n\n    expect(onItemPress).toHaveBeenCalledWith(items[0]);\n  });\n});\n```\n\n## Mocking Native Modules\n\n```typescript\n// jest.setup.js\njest.mock('expo-secure-store', () => ({\n  getItemAsync: jest.fn(),\n  setItemAsync: jest.fn(),\n  deleteItemAsync: jest.fn(),\n}));\n\njest.mock('expo-router', () => ({\n  useRouter: () => ({\n    push: jest.fn(),\n    replace: jest.fn(),\n    back: jest.fn(),\n  }),\n  useLocalSearchParams: () => ({}),\n}));\n\njest.mock('@react-native-async-storage/async-storage', () =>\n  require('@react-native-async-storage/async-storage/jest/async-storage-mock')\n);\n```\n\n## Testing Hooks\n\n```typescript\nimport { renderHook, act } from '@testing-library/react-native';\nimport { useCounter } from '../useCounter';\n\ndescribe('useCounter', () => {\n  it('starts with initial value', () => {\n    const { result } = renderHook(() => useCounter(10));\n\n    expect(result.current.count).toBe(10);\n  });\n\n  it('increments counter', () => {\n    const { result } = renderHook(() => useCounter(0));\n\n    act(() => {\n      result.current.increment();\n    });\n\n    expect(result.current.count).toBe(1);\n  });\n});\n```\n\n## Testing with Providers\n\n```typescript\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { render } from '@testing-library/react-native';\n\nfunction createWrapper() {\n  const queryClient = new QueryClient({\n    defaultOptions: {\n      queries: { retry: false },\n    },\n  });\n\n  return ({ children }: { children: React.ReactNode }) => (\n    <QueryClientProvider client={queryClient}>\n      {children}\n    </QueryClientProvider>\n  );\n}\n\ndescribe('UserList', () => {\n  it('fetches and displays users', async () => {\n    render(<UserList />, { wrapper: createWrapper() });\n\n    await waitFor(() => {\n      expect(screen.getByText('John Doe')).toBeOnTheScreen();\n    });\n  });\n});\n```\n\n## Testing Zustand Stores\n\n```typescript\nimport { useAuthStore } from '../authStore';\n\ndescribe('authStore', () => {\n  beforeEach(() => {\n    useAuthStore.setState({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n    });\n  });\n\n  it('sets user on login', async () => {\n    await useAuthStore.getState().login('test@test.com', 'password');\n\n    expect(useAuthStore.getState().isAuthenticated).toBe(true);\n    expect(useAuthStore.getState().user).toBeDefined();\n  });\n\n  it('clears state on logout', async () => {\n    useAuthStore.setState({\n      user: { id: '1', email: 'test@test.com' },\n      isAuthenticated: true,\n    });\n\n    await useAuthStore.getState().logout();\n\n    expect(useAuthStore.getState().user).toBeNull();\n    expect(useAuthStore.getState().isAuthenticated).toBe(false);\n  });\n});\n```\n\n## Common Matchers\n\n```typescript\n// Element presence\nexpect(element).toBeOnTheScreen();\nexpect(element).not.toBeOnTheScreen();\n\n// Text content\nexpect(element).toHaveTextContent('Hello');\n\n// Accessibility\nexpect(element).toBeEnabled();\nexpect(element).toBeDisabled();\nexpect(element).toHaveAccessibilityValue({ text: '50%' });\n\n// Style (with jest-native)\nexpect(element).toHaveStyle({ backgroundColor: 'red' });\n```\n\n## Running Tests\n\n```bash\n# Run all tests\nnpm test\n\n# Run with coverage\nnpm test -- --coverage\n\n# Run specific file\nnpm test -- Button.test.tsx\n\n# Watch mode\nnpm test -- --watch\n```\n\n## Notes\n\n- Use `screen` for queries instead of destructuring from render\n- Prefer `getByRole` and `getByLabelText` for accessibility\n- Use `waitFor` for async operations\n- Mock native modules in setup file\n- Test behavior, not implementation\n- Keep tests focused and isolated"
              },
              {
                "name": "eas-build-setup",
                "description": "EAS Build configuration for iOS and Android. Use when setting up cloud builds.",
                "path": "tech-stacks/js/react-native/skills/eas-build-setup/SKILL.md",
                "frontmatter": {
                  "name": "eas-build-setup",
                  "description": "EAS Build configuration for iOS and Android. Use when setting up cloud builds."
                },
                "content": "# EAS Build Setup Skill\n\nThis skill covers EAS Build configuration for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Setting up cloud builds\n- Configuring build profiles\n- Managing credentials\n- Building for app stores\n\n## Core Principle\n\n**CLOUD-FIRST BUILDS** - Let EAS handle the complexity of native builds.\n\n## Installation\n\n```bash\n# Install EAS CLI globally\nnpm install -g eas-cli\n\n# Login to Expo account\neas login\n\n# Initialize EAS in project\neas build:configure\n```\n\n## Basic Configuration\n\n```json\n// eas.json\n{\n  \"cli\": {\n    \"version\": \">= 12.0.0\"\n  },\n  \"build\": {\n    \"development\": {\n      \"developmentClient\": true,\n      \"distribution\": \"internal\"\n    },\n    \"preview\": {\n      \"distribution\": \"internal\"\n    },\n    \"production\": {}\n  },\n  \"submit\": {\n    \"production\": {}\n  }\n}\n```\n\n## Full Configuration\n\n```json\n// eas.json\n{\n  \"cli\": {\n    \"version\": \">= 12.0.0\",\n    \"appVersionSource\": \"remote\"\n  },\n  \"build\": {\n    \"base\": {\n      \"node\": \"20.11.0\",\n      \"env\": {\n        \"EXPO_PUBLIC_API_URL\": \"https://api.example.com\"\n      }\n    },\n    \"development\": {\n      \"extends\": \"base\",\n      \"developmentClient\": true,\n      \"distribution\": \"internal\",\n      \"ios\": {\n        \"simulator\": true\n      },\n      \"android\": {\n        \"buildType\": \"apk\"\n      },\n      \"env\": {\n        \"EXPO_PUBLIC_API_URL\": \"https://api.dev.example.com\"\n      }\n    },\n    \"preview\": {\n      \"extends\": \"base\",\n      \"distribution\": \"internal\",\n      \"ios\": {\n        \"resourceClass\": \"m-medium\"\n      },\n      \"android\": {\n        \"buildType\": \"apk\"\n      },\n      \"channel\": \"preview\",\n      \"env\": {\n        \"EXPO_PUBLIC_API_URL\": \"https://api.staging.example.com\"\n      }\n    },\n    \"production\": {\n      \"extends\": \"base\",\n      \"autoIncrement\": true,\n      \"ios\": {\n        \"resourceClass\": \"m-medium\"\n      },\n      \"channel\": \"production\",\n      \"env\": {\n        \"EXPO_PUBLIC_API_URL\": \"https://api.example.com\"\n      }\n    }\n  },\n  \"submit\": {\n    \"production\": {\n      \"ios\": {\n        \"appleId\": \"your@email.com\",\n        \"ascAppId\": \"1234567890\",\n        \"appleTeamId\": \"ABCD1234\"\n      },\n      \"android\": {\n        \"serviceAccountKeyPath\": \"./google-service-account.json\",\n        \"track\": \"internal\"\n      }\n    }\n  }\n}\n```\n\n## App Configuration\n\n```typescript\n// app.config.ts\nimport { ExpoConfig, ConfigContext } from 'expo/config';\n\nexport default ({ config }: ConfigContext): ExpoConfig => ({\n  ...config,\n  name: 'My App',\n  slug: 'my-app',\n  version: '1.0.0',\n  orientation: 'portrait',\n  icon: './assets/icon.png',\n  splash: {\n    image: './assets/splash.png',\n    resizeMode: 'contain',\n    backgroundColor: '#ffffff',\n  },\n  ios: {\n    bundleIdentifier: 'com.company.myapp',\n    supportsTablet: true,\n    infoPlist: {\n      NSCameraUsageDescription: 'This app uses the camera for...',\n      NSPhotoLibraryUsageDescription: 'This app accesses photos for...',\n    },\n  },\n  android: {\n    package: 'com.company.myapp',\n    adaptiveIcon: {\n      foregroundImage: './assets/adaptive-icon.png',\n      backgroundColor: '#ffffff',\n    },\n    permissions: [\n      'CAMERA',\n      'READ_EXTERNAL_STORAGE',\n      'WRITE_EXTERNAL_STORAGE',\n    ],\n  },\n  extra: {\n    eas: {\n      projectId: 'your-project-id',\n    },\n  },\n  owner: 'your-expo-account',\n});\n```\n\n## Credentials Management\n\n```bash\n# iOS credentials\neas credentials --platform ios\n\n# Android credentials\neas credentials --platform android\n\n# View current credentials\neas credentials\n\n# Generate new iOS distribution certificate\neas credentials --platform ios\n\n# Generate new Android keystore\neas credentials --platform android\n```\n\n## Build Commands\n\n```bash\n# Development build (with dev client)\neas build --profile development --platform ios\neas build --profile development --platform android\n\n# Preview build (internal testing)\neas build --profile preview --platform all\n\n# Production build\neas build --profile production --platform all\n\n# Build with specific message\neas build --profile production --message \"Release v1.0.0\"\n\n# Local build (without cloud)\neas build --local --platform ios\n```\n\n## iOS Specific Configuration\n\n```json\n// eas.json - iOS section\n{\n  \"build\": {\n    \"production\": {\n      \"ios\": {\n        \"resourceClass\": \"m-medium\",\n        \"image\": \"latest\",\n        \"credentialsSource\": \"remote\",\n        \"buildConfiguration\": \"Release\"\n      }\n    }\n  }\n}\n```\n\n### iOS Entitlements\n\n```xml\n<!-- ios/MyApp/MyApp.entitlements -->\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n<plist version=\"1.0\">\n<dict>\n  <key>aps-environment</key>\n  <string>production</string>\n  <key>com.apple.developer.associated-domains</key>\n  <array>\n    <string>applinks:example.com</string>\n  </array>\n</dict>\n</plist>\n```\n\n## Android Specific Configuration\n\n```json\n// eas.json - Android section\n{\n  \"build\": {\n    \"preview\": {\n      \"android\": {\n        \"buildType\": \"apk\",\n        \"gradleCommand\": \":app:assembleRelease\"\n      }\n    },\n    \"production\": {\n      \"android\": {\n        \"buildType\": \"app-bundle\",\n        \"gradleCommand\": \":app:bundleRelease\",\n        \"resourceClass\": \"medium\"\n      }\n    }\n  }\n}\n```\n\n## Environment Variables\n\n```json\n// eas.json\n{\n  \"build\": {\n    \"production\": {\n      \"env\": {\n        \"EXPO_PUBLIC_API_URL\": \"https://api.example.com\",\n        \"EXPO_PUBLIC_ANALYTICS_ID\": \"UA-XXXXX-Y\"\n      }\n    }\n  }\n}\n```\n\n```bash\n# Or use EAS Secrets for sensitive values\neas secret:create --name API_KEY --value \"your-secret-key\" --scope project\neas secret:list\n```\n\n## Build Hooks\n\n```json\n// package.json\n{\n  \"scripts\": {\n    \"eas-build-pre-install\": \"echo 'Running pre-install hook'\",\n    \"eas-build-post-install\": \"echo 'Running post-install hook'\",\n    \"eas-build-on-success\": \"echo 'Build succeeded!'\",\n    \"eas-build-on-error\": \"echo 'Build failed!'\"\n  }\n}\n```\n\n## Internal Distribution\n\n```bash\n# Register devices for internal distribution\neas device:create\n\n# List registered devices\neas device:list\n\n# Build for internal distribution\neas build --profile preview --platform ios\n```\n\n## Monitoring Builds\n\n```bash\n# View build status\neas build:list\n\n# View specific build\neas build:view <build-id>\n\n# Cancel build\neas build:cancel <build-id>\n\n# Download build artifacts\neas build:download --platform ios --latest\n```\n\n## CI/CD Integration\n\n```yaml\n# .github/workflows/eas-build.yml\nname: EAS Build\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Setup EAS\n        uses: expo/expo-github-action@v8\n        with:\n          eas-version: latest\n          token: ${{ secrets.EXPO_TOKEN }}\n\n      - name: Build preview\n        if: github.event_name == 'pull_request'\n        run: eas build --profile preview --platform all --non-interactive\n\n      - name: Build production\n        if: github.ref == 'refs/heads/main'\n        run: eas build --profile production --platform all --non-interactive\n```\n\n## Version Management\n\n```json\n// eas.json\n{\n  \"cli\": {\n    \"appVersionSource\": \"remote\"\n  },\n  \"build\": {\n    \"production\": {\n      \"autoIncrement\": true\n    }\n  }\n}\n```\n\n```bash\n# Manually set version\neas build:version:set --platform ios --version 1.2.0 --build-number 45\neas build:version:set --platform android --version 1.2.0 --version-code 45\n\n# Get current version\neas build:version:get --platform ios\n```\n\n## Notes\n\n- Use development builds for debugging\n- Use preview builds for internal testing\n- Use production builds for store submission\n- Keep credentials in EAS (remote) for team sharing\n- Use EAS Secrets for sensitive environment variables\n- Set up CI/CD for automated builds\n- Monitor build times and optimize as needed"
              },
              {
                "name": "eas-update-setup",
                "description": "EAS Update for OTA updates. Use when setting up over-the-air updates.",
                "path": "tech-stacks/js/react-native/skills/eas-update-setup/SKILL.md",
                "frontmatter": {
                  "name": "eas-update-setup",
                  "description": "EAS Update for OTA updates. Use when setting up over-the-air updates."
                },
                "content": "# EAS Update Setup Skill\n\nThis skill covers EAS Update for over-the-air (OTA) updates in React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Setting up OTA updates\n- Managing update channels\n- Rolling back updates\n- A/B testing with updates\n\n## Core Principle\n\n**INSTANT UPDATES** - Ship JavaScript changes without app store review.\n\n## What Can Be Updated OTA\n\n```\nâœ… CAN update OTA:\n- JavaScript code\n- TypeScript code\n- Assets (images, fonts)\n- Styling changes\n- New screens/components\n- Bug fixes in JS\n\nâŒ CANNOT update OTA:\n- Native code changes\n- New native modules\n- Native dependencies\n- App permissions\n- Build configuration\n```\n\n## Installation\n\n```bash\n# Install expo-updates\nnpx expo install expo-updates\n\n# Configure EAS Update\neas update:configure\n```\n\n## Basic Configuration\n\n```json\n// eas.json\n{\n  \"build\": {\n    \"preview\": {\n      \"channel\": \"preview\"\n    },\n    \"production\": {\n      \"channel\": \"production\"\n    }\n  }\n}\n```\n\n```typescript\n// app.config.ts\nexport default {\n  expo: {\n    // ...other config\n    updates: {\n      url: 'https://u.expo.dev/your-project-id',\n      fallbackToCacheTimeout: 0,\n    },\n    runtimeVersion: {\n      policy: 'appVersion',\n    },\n  },\n};\n```\n\n## Runtime Version Strategies\n\n```typescript\n// app.config.ts\n\n// Option 1: Based on app version (recommended for most apps)\nexport default {\n  expo: {\n    runtimeVersion: {\n      policy: 'appVersion', // Uses version from app.json\n    },\n  },\n};\n\n// Option 2: Based on SDK version\nexport default {\n  expo: {\n    runtimeVersion: {\n      policy: 'sdkVersion',\n    },\n  },\n};\n\n// Option 3: Based on native code fingerprint\nexport default {\n  expo: {\n    runtimeVersion: {\n      policy: 'fingerprint',\n    },\n  },\n};\n\n// Option 4: Manual version\nexport default {\n  expo: {\n    runtimeVersion: '1.0.0',\n  },\n};\n```\n\n## Publishing Updates\n\n```bash\n# Publish to preview channel\neas update --channel preview --message \"Fix login bug\"\n\n# Publish to production channel\neas update --channel production --message \"Release 1.2.1 hotfix\"\n\n# Publish specific branch\neas update --branch main --message \"Latest changes\"\n\n# Publish with auto-generated message\neas update --channel production --auto\n```\n\n## Update Channels & Branches\n\n```bash\n# Create a new branch\neas branch:create staging\n\n# Map channel to branch\neas channel:create staging\neas channel:edit staging --branch staging\n\n# View channels\neas channel:list\n\n# View branches\neas branch:list\n\n# Roll back to previous update\neas channel:rollback production\n```\n\n## Programmatic Update Checking\n\n```typescript\nimport * as Updates from 'expo-updates';\n\n// Check for updates on app start\nasync function checkForUpdates() {\n  try {\n    const update = await Updates.checkForUpdateAsync();\n\n    if (update.isAvailable) {\n      await Updates.fetchUpdateAsync();\n      await Updates.reloadAsync();\n    }\n  } catch (error) {\n    console.error('Error checking for updates:', error);\n  }\n}\n\n// Use in app entry\nuseEffect(() => {\n  if (!__DEV__) {\n    checkForUpdates();\n  }\n}, []);\n```\n\n## Update Hook Pattern\n\n```typescript\nimport { useEffect, useState } from 'react';\nimport * as Updates from 'expo-updates';\n\ninterface UpdateState {\n  isChecking: boolean;\n  isAvailable: boolean;\n  isDownloading: boolean;\n  error: Error | null;\n  checkForUpdate: () => Promise<void>;\n  downloadAndRestart: () => Promise<void>;\n}\n\nexport function useUpdates(): UpdateState {\n  const [isChecking, setIsChecking] = useState(false);\n  const [isAvailable, setIsAvailable] = useState(false);\n  const [isDownloading, setIsDownloading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const checkForUpdate = async () => {\n    if (__DEV__) return;\n\n    setIsChecking(true);\n    setError(null);\n\n    try {\n      const update = await Updates.checkForUpdateAsync();\n      setIsAvailable(update.isAvailable);\n    } catch (e) {\n      setError(e as Error);\n    } finally {\n      setIsChecking(false);\n    }\n  };\n\n  const downloadAndRestart = async () => {\n    if (!isAvailable) return;\n\n    setIsDownloading(true);\n    try {\n      await Updates.fetchUpdateAsync();\n      await Updates.reloadAsync();\n    } catch (e) {\n      setError(e as Error);\n      setIsDownloading(false);\n    }\n  };\n\n  // Check on mount\n  useEffect(() => {\n    checkForUpdate();\n  }, []);\n\n  return {\n    isChecking,\n    isAvailable,\n    isDownloading,\n    error,\n    checkForUpdate,\n    downloadAndRestart,\n  };\n}\n```\n\n## Update Banner Component\n\n```typescript\nimport { useUpdates } from '@/hooks/useUpdates';\n\nexport function UpdateBanner(): React.ReactElement | null {\n  const { isAvailable, isDownloading, downloadAndRestart } = useUpdates();\n\n  if (!isAvailable) return null;\n\n  return (\n    <View className=\"bg-blue-600 px-4 py-3 flex-row items-center justify-between\">\n      <Text className=\"text-white\">A new version is available</Text>\n      <TouchableOpacity\n        onPress={downloadAndRestart}\n        disabled={isDownloading}\n        className=\"bg-white px-4 py-2 rounded\"\n      >\n        <Text className=\"text-blue-600 font-semibold\">\n          {isDownloading ? 'Updating...' : 'Update Now'}\n        </Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n```\n\n## Background Updates\n\n```typescript\n// app.config.ts\nexport default {\n  expo: {\n    updates: {\n      url: 'https://u.expo.dev/your-project-id',\n      checkAutomatically: 'ON_LOAD', // or 'ON_ERROR_RECOVERY', 'NEVER'\n      fallbackToCacheTimeout: 0, // 0 = use cache, don't wait\n    },\n  },\n};\n```\n\n## Update Events\n\n```typescript\nimport * as Updates from 'expo-updates';\n\nuseEffect(() => {\n  const subscription = Updates.addListener((event) => {\n    if (event.type === Updates.UpdateEventType.UPDATE_AVAILABLE) {\n      // New update downloaded\n      Alert.alert(\n        'Update Available',\n        'A new version has been downloaded. Restart to apply?',\n        [\n          { text: 'Later', style: 'cancel' },\n          { text: 'Restart', onPress: () => Updates.reloadAsync() },\n        ]\n      );\n    } else if (event.type === Updates.UpdateEventType.ERROR) {\n      // Update error\n      console.error('Update error:', event.message);\n    }\n  });\n\n  return () => subscription.remove();\n}, []);\n```\n\n## CI/CD Integration\n\n```yaml\n# .github/workflows/eas-update.yml\nname: EAS Update\n\non:\n  push:\n    branches: [main, staging]\n\njobs:\n  update:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Setup EAS\n        uses: expo/expo-github-action@v8\n        with:\n          eas-version: latest\n          token: ${{ secrets.EXPO_TOKEN }}\n\n      - name: Publish update\n        run: |\n          if [ \"${{ github.ref }}\" == \"refs/heads/main\" ]; then\n            eas update --channel production --auto --non-interactive\n          else\n            eas update --channel staging --auto --non-interactive\n          fi\n```\n\n## Rollback Strategy\n\n```bash\n# View update history\neas update:list --channel production\n\n# Rollback to previous update\neas channel:rollback production\n\n# Rollback to specific update\neas channel:edit production --branch <branch-name>\n```\n\n## A/B Testing with Channels\n\n```bash\n# Create experiment channels\neas channel:create production-control\neas channel:create production-variant\n\n# Deploy different versions\neas update --channel production-control --message \"Control version\"\neas update --channel production-variant --message \"Variant A\"\n\n# Route users to channels based on criteria\n```\n\n## Debug Updates\n\n```typescript\nimport * as Updates from 'expo-updates';\n\n// Get current update info\nconsole.log('Channel:', Updates.channel);\nconsole.log('Runtime Version:', Updates.runtimeVersion);\nconsole.log('Update ID:', Updates.updateId);\nconsole.log('Created At:', Updates.createdAt);\nconsole.log('Is Embedded Launch:', Updates.isEmbeddedLaunch);\n```\n\n## Monitoring\n\n```bash\n# View update analytics\neas update:list --channel production --limit 10\n\n# View update details\neas update:view <update-id>\n```\n\n## Notes\n\n- OTA updates only work for JS/assets, not native code\n- Test updates in preview before production\n- Use meaningful update messages for tracking\n- Set up CI/CD for automated deployments\n- Consider user experience for mandatory vs. optional updates\n- Monitor update success rates\n- Have a rollback plan ready"
              },
              {
                "name": "expo-configuration",
                "description": "Expo SDK configuration and setup. Use when configuring Expo projects.",
                "path": "tech-stacks/js/react-native/skills/expo-configuration/SKILL.md",
                "frontmatter": {
                  "name": "expo-configuration",
                  "description": "Expo SDK configuration and setup. Use when configuring Expo projects."
                },
                "content": "# Expo Configuration Skill\n\nThis skill covers Expo SDK configuration for React Native projects.\n\n## When to Use\n\nUse this skill when:\n- Setting up a new Expo project\n- Configuring app.json/app.config.js\n- Adding native modules\n- Configuring build settings\n\n## Core Principle\n\n**MANAGED WORKFLOW** - Use Expo's managed workflow for best developer experience.\n\n## Project Initialization\n\n```bash\n# Create new Expo project\nnpx create-expo-app@latest my-app\n\n# With specific template\nnpx create-expo-app@latest my-app --template tabs\n```\n\n## App Configuration\n\n### app.json\n\n```json\n{\n  \"expo\": {\n    \"name\": \"My App\",\n    \"slug\": \"my-app\",\n    \"version\": \"1.0.0\",\n    \"orientation\": \"portrait\",\n    \"icon\": \"./assets/icon.png\",\n    \"userInterfaceStyle\": \"automatic\",\n    \"splash\": {\n      \"image\": \"./assets/splash.png\",\n      \"resizeMode\": \"contain\",\n      \"backgroundColor\": \"#ffffff\"\n    },\n    \"assetBundlePatterns\": [\"**/*\"],\n    \"ios\": {\n      \"supportsTablet\": true,\n      \"bundleIdentifier\": \"com.company.myapp\"\n    },\n    \"android\": {\n      \"adaptiveIcon\": {\n        \"foregroundImage\": \"./assets/adaptive-icon.png\",\n        \"backgroundColor\": \"#ffffff\"\n      },\n      \"package\": \"com.company.myapp\"\n    },\n    \"web\": {\n      \"bundler\": \"metro\",\n      \"output\": \"static\",\n      \"favicon\": \"./assets/favicon.png\"\n    },\n    \"plugins\": [],\n    \"experiments\": {\n      \"typedRoutes\": true\n    }\n  }\n}\n```\n\n### app.config.js (Dynamic Configuration)\n\n```javascript\nexport default ({ config }) => {\n  return {\n    ...config,\n    name: process.env.APP_NAME || 'My App',\n    version: process.env.APP_VERSION || '1.0.0',\n    extra: {\n      apiUrl: process.env.API_URL,\n      enableAnalytics: process.env.ENABLE_ANALYTICS === 'true',\n    },\n  };\n};\n```\n\n## Environment Variables\n\n### .env Files\n\n```bash\n# .env\nEXPO_PUBLIC_API_URL=https://api.example.com\nEXPO_PUBLIC_ANALYTICS_KEY=abc123\n```\n\n### Using Environment Variables\n\n```typescript\n// Must be prefixed with EXPO_PUBLIC_\nconst apiUrl = process.env.EXPO_PUBLIC_API_URL;\n\n// Or use expo-constants for extra config\nimport Constants from 'expo-constants';\nconst { apiUrl } = Constants.expoConfig?.extra ?? {};\n```\n\n## Common Plugins\n\n### Install Plugins\n\n```bash\n# Expo Router\nnpx expo install expo-router\n\n# Secure Store\nnpx expo install expo-secure-store\n\n# Image Picker\nnpx expo install expo-image-picker\n\n# Camera\nnpx expo install expo-camera\n\n# Location\nnpx expo install expo-location\n\n# Notifications\nnpx expo install expo-notifications\n\n# Haptics\nnpx expo install expo-haptics\n```\n\n### Configure Plugins\n\n```json\n{\n  \"expo\": {\n    \"plugins\": [\n      \"expo-router\",\n      \"expo-secure-store\",\n      [\n        \"expo-image-picker\",\n        {\n          \"photosPermission\": \"Allow $(PRODUCT_NAME) to access your photos.\"\n        }\n      ],\n      [\n        \"expo-camera\",\n        {\n          \"cameraPermission\": \"Allow $(PRODUCT_NAME) to access camera.\"\n        }\n      ],\n      [\n        \"expo-location\",\n        {\n          \"locationAlwaysAndWhenInUsePermission\": \"Allow $(PRODUCT_NAME) to use your location.\"\n        }\n      ]\n    ]\n  }\n}\n```\n\n## New Architecture\n\n### Enable New Architecture\n\n```json\n{\n  \"expo\": {\n    \"newArchEnabled\": true\n  }\n}\n```\n\n## EAS Configuration\n\n### eas.json\n\n```json\n{\n  \"cli\": {\n    \"version\": \">= 5.0.0\"\n  },\n  \"build\": {\n    \"development\": {\n      \"developmentClient\": true,\n      \"distribution\": \"internal\"\n    },\n    \"preview\": {\n      \"distribution\": \"internal\"\n    },\n    \"production\": {}\n  },\n  \"submit\": {\n    \"production\": {}\n  }\n}\n```\n\n### EAS Update Configuration\n\n```json\n{\n  \"expo\": {\n    \"updates\": {\n      \"url\": \"https://u.expo.dev/your-project-id\"\n    },\n    \"runtimeVersion\": {\n      \"policy\": \"appVersion\"\n    }\n  }\n}\n```\n\n## Development Commands\n\n```bash\n# Start development server\nnpx expo start\n\n# Start with specific platform\nnpx expo start --ios\nnpx expo start --android\n\n# Clear cache\nnpx expo start --clear\n\n# Prebuild native projects\nnpx expo prebuild\n\n# Run native build\nnpx expo run:ios\nnpx expo run:android\n```\n\n## TypeScript Configuration\n\n### tsconfig.json\n\n```json\n{\n  \"extends\": \"expo/tsconfig.base\",\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"noImplicitAny\": true,\n    \"strictNullChecks\": true,\n    \"noUncheckedIndexedAccess\": true,\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@/*\": [\"./*\"]\n    }\n  },\n  \"include\": [\"**/*.ts\", \"**/*.tsx\", \".expo/types/**/*.ts\", \"expo-env.d.ts\"]\n}\n```\n\n### expo-env.d.ts\n\n```typescript\n/// <reference types=\"expo/types\" />\n\n// Add custom type declarations here\ndeclare module '*.png' {\n  const value: number;\n  export default value;\n}\n```\n\n## Metro Configuration\n\n### metro.config.js\n\n```javascript\nconst { getDefaultConfig } = require('expo/metro-config');\n\nconst config = getDefaultConfig(__dirname);\n\n// Add custom configuration\nconfig.resolver.sourceExts.push('cjs');\n\nmodule.exports = config;\n```\n\n## Splash Screen\n\n### Configure Splash\n\n```json\n{\n  \"expo\": {\n    \"splash\": {\n      \"image\": \"./assets/splash.png\",\n      \"resizeMode\": \"cover\",\n      \"backgroundColor\": \"#3B82F6\"\n    }\n  }\n}\n```\n\n### Programmatic Control\n\n```typescript\nimport * as SplashScreen from 'expo-splash-screen';\n\n// Prevent auto-hide\nSplashScreen.preventAutoHideAsync();\n\n// Hide when ready\nawait SplashScreen.hideAsync();\n```\n\n## App Icons\n\n### Configure Icons\n\n```json\n{\n  \"expo\": {\n    \"icon\": \"./assets/icon.png\",\n    \"ios\": {\n      \"icon\": \"./assets/ios-icon.png\"\n    },\n    \"android\": {\n      \"adaptiveIcon\": {\n        \"foregroundImage\": \"./assets/adaptive-icon.png\",\n        \"backgroundColor\": \"#ffffff\"\n      }\n    }\n  }\n}\n```\n\n## Notes\n\n- Use `EXPO_PUBLIC_` prefix for client-side env vars\n- Enable typed routes for type-safe navigation\n- Configure EAS for production builds\n- Use app.config.js for dynamic configuration\n- Add plugins for native functionality"
              },
              {
                "name": "expo-router-patterns",
                "description": "Expo Router file-based navigation patterns. Use when implementing navigation.",
                "path": "tech-stacks/js/react-native/skills/expo-router-patterns/SKILL.md",
                "frontmatter": {
                  "name": "expo-router-patterns",
                  "description": "Expo Router file-based navigation patterns. Use when implementing navigation."
                },
                "content": "# Expo Router Patterns Skill\n\nThis skill covers Expo Router navigation for React Native.\n\n## When to Use\n\nUse this skill when:\n- Setting up navigation\n- Creating screens and routes\n- Implementing deep linking\n- Protecting routes\n\n## Core Principle\n\n**FILE-BASED ROUTING** - Routes are defined by file structure (like Next.js).\n\n## File Structure\n\n```\napp/\nâ”œâ”€â”€ (auth)/             # Route group (not in URL)\nâ”‚   â”œâ”€â”€ login.tsx      # /login\nâ”‚   â”œâ”€â”€ register.tsx   # /register\nâ”‚   â””â”€â”€ _layout.tsx    # Layout for auth routes\nâ”œâ”€â”€ (tabs)/            # Tab navigation group\nâ”‚   â”œâ”€â”€ _layout.tsx    # Tabs layout\nâ”‚   â”œâ”€â”€ index.tsx      # /\nâ”‚   â””â”€â”€ profile.tsx    # /profile\nâ”œâ”€â”€ settings/\nâ”‚   â”œâ”€â”€ index.tsx      # /settings\nâ”‚   â””â”€â”€ [id].tsx       # /settings/123 (dynamic)\nâ”œâ”€â”€ _layout.tsx        # Root layout\nâ”œâ”€â”€ +not-found.tsx     # 404 page\nâ””â”€â”€ [...missing].tsx   # Catch-all route\n```\n\n## Basic Navigation\n\n### Link Component\n\n```typescript\nimport { Link } from 'expo-router';\n\n<Link href=\"/profile\">Go to Profile</Link>\n\n// With params\n<Link\n  href={{\n    pathname: '/user/[id]',\n    params: { id: '123' },\n  }}\n>\n  View User\n</Link>\n\n// As child (for custom styling)\n<Link href=\"/settings\" asChild>\n  <TouchableOpacity>\n    <Text>Settings</Text>\n  </TouchableOpacity>\n</Link>\n```\n\n### useRouter Hook\n\n```typescript\nimport { useRouter } from 'expo-router';\n\nfunction Component(): React.ReactElement {\n  const router = useRouter();\n\n  const handleNavigate = () => {\n    // Push new screen\n    router.push('/profile');\n\n    // Replace current screen\n    router.replace('/login');\n\n    // Go back\n    router.back();\n\n    // Navigate with params\n    router.push({\n      pathname: '/user/[id]',\n      params: { id: '123' },\n    });\n  };\n\n  return <Button onPress={handleNavigate}>Navigate</Button>;\n}\n```\n\n## Layout Components\n\n### Root Layout\n\n```typescript\n// app/_layout.tsx\nimport { Stack } from 'expo-router';\nimport { StatusBar } from 'expo-status-bar';\n\nexport default function RootLayout(): React.ReactElement {\n  return (\n    <>\n      <StatusBar style=\"auto\" />\n      <Stack>\n        <Stack.Screen name=\"(tabs)\" options={{ headerShown: false }} />\n        <Stack.Screen name=\"(auth)\" options={{ headerShown: false }} />\n        <Stack.Screen\n          name=\"modal\"\n          options={{\n            presentation: 'modal',\n            headerTitle: 'Modal',\n          }}\n        />\n      </Stack>\n    </>\n  );\n}\n```\n\n### Tab Layout\n\n```typescript\n// app/(tabs)/_layout.tsx\nimport { Tabs } from 'expo-router';\nimport { Ionicons } from '@expo/vector-icons';\n\nexport default function TabLayout(): React.ReactElement {\n  return (\n    <Tabs\n      screenOptions={{\n        tabBarActiveTintColor: '#3B82F6',\n        tabBarInactiveTintColor: '#6B7280',\n        headerShown: false,\n      }}\n    >\n      <Tabs.Screen\n        name=\"index\"\n        options={{\n          title: 'Home',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"home\" size={size} color={color} />\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"search\"\n        options={{\n          title: 'Search',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"search\" size={size} color={color} />\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"profile\"\n        options={{\n          title: 'Profile',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"person\" size={size} color={color} />\n          ),\n        }}\n      />\n    </Tabs>\n  );\n}\n```\n\n## Dynamic Routes\n\n### Single Parameter\n\n```typescript\n// app/user/[id].tsx\nimport { useLocalSearchParams } from 'expo-router';\nimport { View, Text } from 'react-native';\n\nexport default function UserPage(): React.ReactElement {\n  const { id } = useLocalSearchParams<{ id: string }>();\n\n  return (\n    <View className=\"flex-1 items-center justify-center\">\n      <Text className=\"text-lg\">User ID: {id}</Text>\n    </View>\n  );\n}\n```\n\n### Multiple Parameters\n\n```typescript\n// app/[category]/[id].tsx\nimport { useLocalSearchParams } from 'expo-router';\n\nexport default function ProductPage(): React.ReactElement {\n  const { category, id } = useLocalSearchParams<{\n    category: string;\n    id: string;\n  }>();\n\n  return (\n    <View>\n      <Text>Category: {category}</Text>\n      <Text>Product ID: {id}</Text>\n    </View>\n  );\n}\n```\n\n### Catch-All Route\n\n```typescript\n// app/[...path].tsx\nimport { useLocalSearchParams } from 'expo-router';\n\nexport default function CatchAllPage(): React.ReactElement {\n  const { path } = useLocalSearchParams<{ path: string[] }>();\n\n  return (\n    <View>\n      <Text>Path segments: {path?.join('/')}</Text>\n    </View>\n  );\n}\n```\n\n## Protected Routes\n\n```typescript\n// app/_layout.tsx\nimport { Redirect, Stack } from 'expo-router';\nimport { useAuth } from '@/hooks/useAuth';\nimport { Loading } from '@/components/Loading';\n\nexport default function RootLayout(): React.ReactElement {\n  const { user, isLoading } = useAuth();\n\n  if (isLoading) {\n    return <Loading />;\n  }\n\n  if (!user) {\n    return <Redirect href=\"/login\" />;\n  }\n\n  return <Stack />;\n}\n```\n\n## Route Groups\n\n```\napp/\nâ”œâ”€â”€ (auth)/           # Auth group (no /auth in URL)\nâ”‚   â”œâ”€â”€ login.tsx    # /login\nâ”‚   â””â”€â”€ register.tsx # /register\nâ”œâ”€â”€ (app)/           # App group (no /app in URL)\nâ”‚   â”œâ”€â”€ home.tsx     # /home\nâ”‚   â””â”€â”€ profile.tsx  # /profile\n```\n\n## Modal Routes\n\n```typescript\n// app/_layout.tsx\n<Stack>\n  <Stack.Screen name=\"(tabs)\" options={{ headerShown: false }} />\n  <Stack.Screen\n    name=\"modal\"\n    options={{\n      presentation: 'modal',\n      animation: 'slide_from_bottom',\n    }}\n  />\n</Stack>\n\n// Navigate to modal\nrouter.push('/modal');\n\n// Close modal\nrouter.back();\n```\n\n## Deep Linking\n\n### Configuration\n\n```json\n// app.json\n{\n  \"expo\": {\n    \"scheme\": \"myapp\",\n    \"web\": {\n      \"bundler\": \"metro\"\n    }\n  }\n}\n```\n\n### Links\n\n```\nmyapp://                    # Opens app\nmyapp://profile             # Opens /profile\nmyapp://user/123            # Opens /user/123\nhttps://myapp.com/profile   # Universal link\n```\n\n## Navigation Hooks\n\n### usePathname\n\n```typescript\nimport { usePathname } from 'expo-router';\n\nfunction Component(): React.ReactElement {\n  const pathname = usePathname();\n  // Returns: \"/user/123\"\n\n  return <Text>Current path: {pathname}</Text>;\n}\n```\n\n### useSegments\n\n```typescript\nimport { useSegments } from 'expo-router';\n\nfunction Component(): React.ReactElement {\n  const segments = useSegments();\n  // Returns: [\"user\", \"123\"]\n\n  return <Text>Segments: {segments.join(', ')}</Text>;\n}\n```\n\n### useFocusEffect\n\n```typescript\nimport { useFocusEffect } from 'expo-router';\nimport { useCallback } from 'react';\n\nfunction Screen(): React.ReactElement {\n  useFocusEffect(\n    useCallback(() => {\n      // Runs when screen is focused\n      console.log('Screen focused');\n\n      return () => {\n        // Cleanup when screen loses focus\n        console.log('Screen unfocused');\n      };\n    }, [])\n  );\n\n  return <View />;\n}\n```\n\n## Notes\n\n- Use route groups `(name)` to organize without affecting URLs\n- Layouts cascade (parent layouts wrap children)\n- `_layout.tsx` defines the navigation structure\n- `+not-found.tsx` handles 404 routes\n- Deep linking is configured automatically\n- Use typed params with generics for type safety"
              },
              {
                "name": "flashlist-patterns",
                "description": "FlashList high-performance list patterns. Use when implementing lists.",
                "path": "tech-stacks/js/react-native/skills/flashlist-patterns/SKILL.md",
                "frontmatter": {
                  "name": "flashlist-patterns",
                  "description": "FlashList high-performance list patterns. Use when implementing lists."
                },
                "content": "# FlashList Patterns Skill\n\nThis skill covers Shopify's FlashList for high-performance lists.\n\n## When to Use\n\nUse this skill when:\n- Implementing any scrollable list\n- Replacing FlatList\n- Lists have 50+ items\n- List performance is critical\n\n## Core Principle\n\n**FLASHLIST ALWAYS** - FlashList is 10x faster than FlatList. Use it for all lists.\n\n## Installation\n\n```bash\nnpm install @shopify/flash-list\n```\n\n## Basic Usage\n\n```typescript\nimport { FlashList } from '@shopify/flash-list';\n\ninterface Item {\n  id: string;\n  title: string;\n}\n\nfunction ItemList({ items }: { items: Item[] }): React.ReactElement {\n  return (\n    <FlashList\n      data={items}\n      renderItem={({ item }) => (\n        <View className=\"p-4 border-b border-gray-200\">\n          <Text className=\"text-lg\">{item.title}</Text>\n        </View>\n      )}\n      estimatedItemSize={60}  // Required!\n      keyExtractor={(item) => item.id}\n    />\n  );\n}\n```\n\n## Required Props\n\n### estimatedItemSize\n\n```typescript\n// Required for FlashList to calculate recycling\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={80}  // Average height of items in pixels\n/>\n```\n\n## Performance Optimization\n\n### Memoize renderItem\n\n```typescript\nimport { useCallback, memo } from 'react';\n\nconst ItemCard = memo(function ItemCard({ item }: { item: Item }) {\n  return (\n    <View className=\"p-4\">\n      <Text>{item.title}</Text>\n    </View>\n  );\n});\n\nfunction ItemList({ items }: { items: Item[] }): React.ReactElement {\n  const renderItem = useCallback(\n    ({ item }: { item: Item }) => <ItemCard item={item} />,\n    []\n  );\n\n  return (\n    <FlashList\n      data={items}\n      renderItem={renderItem}\n      estimatedItemSize={60}\n    />\n  );\n}\n```\n\n### Use keyExtractor\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  keyExtractor={(item) => item.id}  // Unique stable key\n/>\n```\n\n## Different Item Types\n\n### getItemType\n\n```typescript\ninterface ListItem {\n  id: string;\n  type: 'header' | 'item' | 'separator';\n  data: unknown;\n}\n\n<FlashList\n  data={items}\n  renderItem={({ item }) => {\n    switch (item.type) {\n      case 'header':\n        return <HeaderComponent data={item.data} />;\n      case 'separator':\n        return <SeparatorComponent />;\n      default:\n        return <ItemComponent data={item.data} />;\n    }\n  }}\n  getItemType={(item) => item.type}  // Enables better recycling\n  estimatedItemSize={60}\n/>\n```\n\n### overrideItemLayout\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  overrideItemLayout={(layout, item) => {\n    // Set exact size for different item types\n    if (item.type === 'header') {\n      layout.size = 100;\n    } else if (item.type === 'separator') {\n      layout.size = 20;\n    } else {\n      layout.size = 60;\n    }\n  }}\n/>\n```\n\n## Horizontal Lists\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={150}\n  horizontal\n/>\n```\n\n## Grid Layout\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={180}\n  numColumns={2}\n/>\n```\n\n## Pull to Refresh\n\n```typescript\nimport { useState } from 'react';\nimport { RefreshControl } from 'react-native';\n\nfunction RefreshableList(): React.ReactElement {\n  const [refreshing, setRefreshing] = useState(false);\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await fetchNewData();\n    setRefreshing(false);\n  };\n\n  return (\n    <FlashList\n      data={items}\n      renderItem={renderItem}\n      estimatedItemSize={60}\n      refreshControl={\n        <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\n      }\n    />\n  );\n}\n```\n\n## Infinite Scroll\n\n```typescript\nfunction InfiniteList(): React.ReactElement {\n  const [items, setItems] = useState<Item[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n\n  const loadMore = async () => {\n    if (loading || !hasMore) return;\n\n    setLoading(true);\n    const newItems = await fetchMoreItems();\n\n    if (newItems.length === 0) {\n      setHasMore(false);\n    } else {\n      setItems((prev) => [...prev, ...newItems]);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <FlashList\n      data={items}\n      renderItem={renderItem}\n      estimatedItemSize={60}\n      onEndReached={loadMore}\n      onEndReachedThreshold={0.5}\n      ListFooterComponent={loading ? <ActivityIndicator /> : null}\n    />\n  );\n}\n```\n\n## Empty State\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  ListEmptyComponent={\n    <View className=\"flex-1 items-center justify-center p-8\">\n      <Text className=\"text-gray-500\">No items found</Text>\n    </View>\n  }\n/>\n```\n\n## Headers and Footers\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  ListHeaderComponent={\n    <View className=\"p-4 bg-gray-100\">\n      <Text className=\"text-xl font-bold\">Items</Text>\n    </View>\n  }\n  ListFooterComponent={\n    <View className=\"p-4\">\n      <Text className=\"text-gray-500 text-center\">End of list</Text>\n    </View>\n  }\n/>\n```\n\n## Sticky Headers\n\n```typescript\ninterface Section {\n  title: string;\n  data: Item[];\n}\n\n// Use SectionList-like pattern\n<FlashList\n  data={flattenedData}\n  renderItem={({ item }) => {\n    if (item.isHeader) {\n      return <StickyHeader title={item.title} />;\n    }\n    return <ItemCard item={item} />;\n  }}\n  stickyHeaderIndices={headerIndices}\n  estimatedItemSize={60}\n  getItemType={(item) => (item.isHeader ? 'header' : 'item')}\n/>\n```\n\n## Scroll to Item\n\n```typescript\nimport { useRef } from 'react';\nimport { FlashList } from '@shopify/flash-list';\n\nfunction ScrollableList(): React.ReactElement {\n  const listRef = useRef<FlashList<Item>>(null);\n\n  const scrollToTop = () => {\n    listRef.current?.scrollToOffset({ offset: 0, animated: true });\n  };\n\n  const scrollToIndex = (index: number) => {\n    listRef.current?.scrollToIndex({ index, animated: true });\n  };\n\n  return (\n    <>\n      <FlashList\n        ref={listRef}\n        data={items}\n        renderItem={renderItem}\n        estimatedItemSize={60}\n      />\n      <Button onPress={scrollToTop}>Scroll to Top</Button>\n    </>\n  );\n}\n```\n\n## Common Props\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  keyExtractor={(item) => item.id}\n  getItemType={(item) => item.type}\n  numColumns={1}\n  horizontal={false}\n  inverted={false}\n  showsVerticalScrollIndicator={true}\n  showsHorizontalScrollIndicator={false}\n  onEndReached={loadMore}\n  onEndReachedThreshold={0.5}\n  refreshControl={<RefreshControl />}\n  ListHeaderComponent={<Header />}\n  ListFooterComponent={<Footer />}\n  ListEmptyComponent={<EmptyState />}\n  ItemSeparatorComponent={() => <View className=\"h-px bg-gray-200\" />}\n/>\n```\n\n## Debug Mode\n\n```typescript\n// Enable debug logs in development\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  // Debug overlay shows recycling info\n/>\n```\n\n## Notes\n\n- `estimatedItemSize` is required\n- Use `getItemType` for different item layouts\n- Memoize renderItem with useCallback\n- Use React.memo for item components\n- FlashList recycles views for performance\n- Test with large datasets (1000+ items)"
              },
              {
                "name": "form-handling-mobile",
                "description": "React Hook Form and Zod for React Native forms. Use when implementing forms.",
                "path": "tech-stacks/js/react-native/skills/form-handling-mobile/SKILL.md",
                "frontmatter": {
                  "name": "form-handling-mobile",
                  "description": "React Hook Form and Zod for React Native forms. Use when implementing forms."
                },
                "content": "# Form Handling Mobile Skill\n\nThis skill covers React Hook Form with Zod validation for React Native.\n\n## When to Use\n\nUse this skill when:\n- Building login/signup forms\n- Creating data entry forms\n- Implementing form validation\n- Handling complex form state\n\n## Core Principle\n\n**CONTROLLED VALIDATION** - Use Zod for schema validation, React Hook Form for state.\n\n## Installation\n\n```bash\nnpm install react-hook-form @hookform/resolvers zod\n```\n\n## Basic Form\n\n```typescript\nimport { View, Text, TextInput, TouchableOpacity } from 'react-native';\nimport { useForm, Controller } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\n\nconst loginSchema = z.object({\n  email: z.string().email('Invalid email address'),\n  password: z.string().min(8, 'Password must be at least 8 characters'),\n});\n\ntype LoginFormData = z.infer<typeof loginSchema>;\n\nexport function LoginForm(): React.ReactElement {\n  const {\n    control,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: '',\n      password: '',\n    },\n  });\n\n  const onSubmit = (data: LoginFormData) => {\n    console.log(data);\n  };\n\n  return (\n    <View className=\"gap-4\">\n      <View>\n        <Text className=\"mb-1 font-medium\">Email</Text>\n        <Controller\n          control={control}\n          name=\"email\"\n          render={({ field: { onChange, onBlur, value } }) => (\n            <TextInput\n              className=\"border border-gray-300 rounded-lg px-4 py-3\"\n              placeholder=\"Enter email\"\n              value={value}\n              onChangeText={onChange}\n              onBlur={onBlur}\n              keyboardType=\"email-address\"\n              autoCapitalize=\"none\"\n              autoComplete=\"email\"\n            />\n          )}\n        />\n        {errors.email && (\n          <Text className=\"text-red-500 text-sm mt-1\">\n            {errors.email.message}\n          </Text>\n        )}\n      </View>\n\n      <View>\n        <Text className=\"mb-1 font-medium\">Password</Text>\n        <Controller\n          control={control}\n          name=\"password\"\n          render={({ field: { onChange, onBlur, value } }) => (\n            <TextInput\n              className=\"border border-gray-300 rounded-lg px-4 py-3\"\n              placeholder=\"Enter password\"\n              value={value}\n              onChangeText={onChange}\n              onBlur={onBlur}\n              secureTextEntry\n              autoComplete=\"password\"\n            />\n          )}\n        />\n        {errors.password && (\n          <Text className=\"text-red-500 text-sm mt-1\">\n            {errors.password.message}\n          </Text>\n        )}\n      </View>\n\n      <TouchableOpacity\n        onPress={handleSubmit(onSubmit)}\n        className=\"bg-blue-600 py-4 rounded-lg\"\n      >\n        <Text className=\"text-white text-center font-semibold\">Sign In</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n```\n\n## Complex Validation Schema\n\n```typescript\nconst signupSchema = z\n  .object({\n    email: z.string().email('Invalid email'),\n    username: z\n      .string()\n      .min(3, 'Username must be at least 3 characters')\n      .max(20, 'Username must be at most 20 characters')\n      .regex(/^[a-zA-Z0-9_]+$/, 'Only letters, numbers, and underscores'),\n    password: z\n      .string()\n      .min(8, 'Password must be at least 8 characters')\n      .regex(/[A-Z]/, 'Must contain uppercase letter')\n      .regex(/[a-z]/, 'Must contain lowercase letter')\n      .regex(/[0-9]/, 'Must contain number'),\n    confirmPassword: z.string(),\n    acceptTerms: z.boolean().refine((val) => val === true, {\n      message: 'You must accept the terms',\n    }),\n  })\n  .refine((data) => data.password === data.confirmPassword, {\n    message: 'Passwords do not match',\n    path: ['confirmPassword'],\n  });\n```\n\n## Reusable Input Component\n\n```typescript\nimport { Control, Controller, FieldValues, Path } from 'react-hook-form';\n\ninterface FormInputProps<T extends FieldValues> {\n  control: Control<T>;\n  name: Path<T>;\n  label: string;\n  placeholder?: string;\n  secureTextEntry?: boolean;\n  keyboardType?: 'default' | 'email-address' | 'numeric' | 'phone-pad';\n  autoCapitalize?: 'none' | 'sentences' | 'words' | 'characters';\n  error?: string;\n}\n\nexport function FormInput<T extends FieldValues>({\n  control,\n  name,\n  label,\n  placeholder,\n  secureTextEntry,\n  keyboardType = 'default',\n  autoCapitalize = 'sentences',\n  error,\n}: FormInputProps<T>): React.ReactElement {\n  return (\n    <View className=\"mb-4\">\n      <Text className=\"mb-1 font-medium text-gray-700\">{label}</Text>\n      <Controller\n        control={control}\n        name={name}\n        render={({ field: { onChange, onBlur, value } }) => (\n          <TextInput\n            className={`border rounded-lg px-4 py-3 ${\n              error ? 'border-red-500' : 'border-gray-300'\n            }`}\n            placeholder={placeholder}\n            value={value}\n            onChangeText={onChange}\n            onBlur={onBlur}\n            secureTextEntry={secureTextEntry}\n            keyboardType={keyboardType}\n            autoCapitalize={autoCapitalize}\n          />\n        )}\n      />\n      {error && (\n        <Text className=\"text-red-500 text-sm mt-1\">{error}</Text>\n      )}\n    </View>\n  );\n}\n\n// Usage\n<FormInput\n  control={control}\n  name=\"email\"\n  label=\"Email\"\n  placeholder=\"Enter email\"\n  keyboardType=\"email-address\"\n  autoCapitalize=\"none\"\n  error={errors.email?.message}\n/>\n```\n\n## With Gluestack-ui\n\n```typescript\nimport {\n  FormControl,\n  FormControlLabel,\n  FormControlLabelText,\n  FormControlError,\n  FormControlErrorText,\n  Input,\n  InputField,\n} from '@gluestack-ui/themed';\nimport { Controller, useForm } from 'react-hook-form';\n\nexport function StyledLoginForm(): React.ReactElement {\n  const { control, handleSubmit, formState: { errors } } = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n  });\n\n  return (\n    <View className=\"gap-4\">\n      <FormControl isInvalid={!!errors.email}>\n        <FormControlLabel>\n          <FormControlLabelText>Email</FormControlLabelText>\n        </FormControlLabel>\n        <Controller\n          control={control}\n          name=\"email\"\n          render={({ field: { onChange, value } }) => (\n            <Input>\n              <InputField\n                value={value}\n                onChangeText={onChange}\n                placeholder=\"Enter email\"\n                keyboardType=\"email-address\"\n                autoCapitalize=\"none\"\n              />\n            </Input>\n          )}\n        />\n        <FormControlError>\n          <FormControlErrorText>\n            {errors.email?.message}\n          </FormControlErrorText>\n        </FormControlError>\n      </FormControl>\n    </View>\n  );\n}\n```\n\n## Form with Mutation\n\n```typescript\nimport { useMutation } from '@tanstack/react-query';\nimport { useRouter } from 'expo-router';\n\nexport function LoginFormWithMutation(): React.ReactElement {\n  const router = useRouter();\n  const { mutate: login, isPending } = useLoginMutation();\n\n  const {\n    control,\n    handleSubmit,\n    formState: { errors },\n    setError,\n  } = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n  });\n\n  const onSubmit = (data: LoginFormData) => {\n    login(data, {\n      onSuccess: () => {\n        router.replace('/(tabs)');\n      },\n      onError: (error) => {\n        setError('root', {\n          message: error.message || 'Login failed',\n        });\n      },\n    });\n  };\n\n  return (\n    <View className=\"gap-4\">\n      {errors.root && (\n        <View className=\"bg-red-100 p-4 rounded-lg\">\n          <Text className=\"text-red-700\">{errors.root.message}</Text>\n        </View>\n      )}\n\n      {/* Form fields */}\n\n      <TouchableOpacity\n        onPress={handleSubmit(onSubmit)}\n        disabled={isPending}\n        className={`py-4 rounded-lg ${\n          isPending ? 'bg-gray-400' : 'bg-blue-600'\n        }`}\n      >\n        <Text className=\"text-white text-center font-semibold\">\n          {isPending ? 'Signing in...' : 'Sign In'}\n        </Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n```\n\n## Checkbox and Switch\n\n```typescript\nconst preferencesSchema = z.object({\n  emailNotifications: z.boolean(),\n  pushNotifications: z.boolean(),\n  newsletter: z.boolean(),\n});\n\n<Controller\n  control={control}\n  name=\"emailNotifications\"\n  render={({ field: { onChange, value } }) => (\n    <View className=\"flex-row items-center justify-between py-2\">\n      <Text>Email Notifications</Text>\n      <Switch value={value} onValueChange={onChange} />\n    </View>\n  )}\n/>\n```\n\n## Select/Picker\n\n```typescript\nimport { Picker } from '@react-native-picker/picker';\n\n<Controller\n  control={control}\n  name=\"country\"\n  render={({ field: { onChange, value } }) => (\n    <View className=\"border border-gray-300 rounded-lg\">\n      <Picker selectedValue={value} onValueChange={onChange}>\n        <Picker.Item label=\"Select country\" value=\"\" />\n        <Picker.Item label=\"United States\" value=\"US\" />\n        <Picker.Item label=\"Canada\" value=\"CA\" />\n        <Picker.Item label=\"Mexico\" value=\"MX\" />\n      </Picker>\n    </View>\n  )}\n/>\n```\n\n## Watch and Dynamic Fields\n\n```typescript\nfunction DynamicForm(): React.ReactElement {\n  const { control, watch } = useForm();\n  const showAdditionalFields = watch('hasAccount');\n\n  return (\n    <View>\n      <Controller\n        control={control}\n        name=\"hasAccount\"\n        render={({ field: { onChange, value } }) => (\n          <View className=\"flex-row items-center\">\n            <Switch value={value} onValueChange={onChange} />\n            <Text className=\"ml-2\">I have an account</Text>\n          </View>\n        )}\n      />\n\n      {showAdditionalFields && (\n        <FormInput\n          control={control}\n          name=\"accountId\"\n          label=\"Account ID\"\n        />\n      )}\n    </View>\n  );\n}\n```\n\n## Notes\n\n- Use Zod for type-safe validation\n- Create reusable form components\n- Handle loading states during submission\n- Show validation errors inline\n- Use setError for server errors\n- Test form behavior on both platforms"
              },
              {
                "name": "gluestack-ui-setup",
                "description": "Gluestack-ui component library setup and usage. Use when implementing pre-built accessible components.",
                "path": "tech-stacks/js/react-native/skills/gluestack-ui-setup/SKILL.md",
                "frontmatter": {
                  "name": "gluestack-ui-setup",
                  "description": "Gluestack-ui component library setup and usage. Use when implementing pre-built accessible components."
                },
                "content": "# Gluestack-ui Setup Skill\n\nThis skill covers Gluestack-ui component library for React Native.\n\n## When to Use\n\nUse this skill when:\n- Need pre-built accessible components\n- Implementing forms with inputs, selects, etc.\n- Building modals, tooltips, popovers\n- Want shadcn/ui-like experience for mobile\n\n## Core Principle\n\n**ACCESSIBLE BY DEFAULT** - Gluestack components are built with accessibility in mind.\n\n## Installation\n\n```bash\nnpx gluestack-ui init\n```\n\nFollow the prompts to configure:\n- Style engine (NativeWind recommended)\n- TypeScript\n- Path aliases\n\n## Available Components\n\n### Form Components\n\n```typescript\nimport {\n  Input,\n  InputField,\n  InputSlot,\n  InputIcon,\n} from '@gluestack-ui/themed';\n\n<Input>\n  <InputSlot>\n    <InputIcon as={SearchIcon} />\n  </InputSlot>\n  <InputField\n    placeholder=\"Search...\"\n    accessibilityLabel=\"Search input\"\n  />\n</Input>\n```\n\n### Button\n\n```typescript\nimport { Button, ButtonText, ButtonIcon } from '@gluestack-ui/themed';\n\n<Button size=\"md\" variant=\"solid\" action=\"primary\">\n  <ButtonText>Click Me</ButtonText>\n</Button>\n\n<Button size=\"lg\" variant=\"outline\" action=\"secondary\">\n  <ButtonIcon as={PlusIcon} />\n  <ButtonText>Add Item</ButtonText>\n</Button>\n```\n\n### Select\n\n```typescript\nimport {\n  Select,\n  SelectTrigger,\n  SelectInput,\n  SelectPortal,\n  SelectBackdrop,\n  SelectContent,\n  SelectItem,\n} from '@gluestack-ui/themed';\n\n<Select>\n  <SelectTrigger>\n    <SelectInput placeholder=\"Select option\" />\n  </SelectTrigger>\n  <SelectPortal>\n    <SelectBackdrop />\n    <SelectContent>\n      <SelectItem label=\"Option 1\" value=\"1\" />\n      <SelectItem label=\"Option 2\" value=\"2\" />\n      <SelectItem label=\"Option 3\" value=\"3\" />\n    </SelectContent>\n  </SelectPortal>\n</Select>\n```\n\n### Checkbox\n\n```typescript\nimport {\n  Checkbox,\n  CheckboxIndicator,\n  CheckboxIcon,\n  CheckboxLabel,\n} from '@gluestack-ui/themed';\nimport { CheckIcon } from 'lucide-react-native';\n\n<Checkbox value=\"agree\">\n  <CheckboxIndicator>\n    <CheckboxIcon as={CheckIcon} />\n  </CheckboxIndicator>\n  <CheckboxLabel>I agree to terms</CheckboxLabel>\n</Checkbox>\n```\n\n### Modal\n\n```typescript\nimport {\n  Modal,\n  ModalBackdrop,\n  ModalContent,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  ModalCloseButton,\n} from '@gluestack-ui/themed';\n\nconst [showModal, setShowModal] = useState(false);\n\n<Modal isOpen={showModal} onClose={() => setShowModal(false)}>\n  <ModalBackdrop />\n  <ModalContent>\n    <ModalHeader>\n      <Heading>Modal Title</Heading>\n      <ModalCloseButton />\n    </ModalHeader>\n    <ModalBody>\n      <Text>Modal content goes here</Text>\n    </ModalBody>\n    <ModalFooter>\n      <Button onPress={() => setShowModal(false)}>\n        <ButtonText>Close</ButtonText>\n      </Button>\n    </ModalFooter>\n  </ModalContent>\n</Modal>\n```\n\n### Toast\n\n```typescript\nimport { useToast, Toast, ToastTitle, ToastDescription } from '@gluestack-ui/themed';\n\nfunction Component(): React.ReactElement {\n  const toast = useToast();\n\n  const showToast = () => {\n    toast.show({\n      placement: 'top',\n      render: ({ id }) => (\n        <Toast nativeID={id} action=\"success\">\n          <ToastTitle>Success!</ToastTitle>\n          <ToastDescription>Your action was completed.</ToastDescription>\n        </Toast>\n      ),\n    });\n  };\n\n  return (\n    <Button onPress={showToast}>\n      <ButtonText>Show Toast</ButtonText>\n    </Button>\n  );\n}\n```\n\n### Alert\n\n```typescript\nimport { Alert, AlertIcon, AlertText } from '@gluestack-ui/themed';\nimport { InfoIcon } from 'lucide-react-native';\n\n<Alert action=\"info\">\n  <AlertIcon as={InfoIcon} />\n  <AlertText>This is an informational alert.</AlertText>\n</Alert>\n\n<Alert action=\"error\">\n  <AlertIcon as={AlertCircleIcon} />\n  <AlertText>Something went wrong!</AlertText>\n</Alert>\n```\n\n## Combining with NativeWind\n\n```typescript\nimport { Button, ButtonText } from '@gluestack-ui/themed';\n\n// Use className for additional styling\n<Button className=\"bg-blue-600 rounded-full\">\n  <ButtonText className=\"text-white font-bold\">\n    Custom Styled\n  </ButtonText>\n</Button>\n```\n\n## Form Example\n\n```typescript\nimport { View, Text } from 'react-native';\nimport {\n  Input,\n  InputField,\n  Button,\n  ButtonText,\n  FormControl,\n  FormControlLabel,\n  FormControlLabelText,\n  FormControlError,\n  FormControlErrorText,\n} from '@gluestack-ui/themed';\nimport { useForm, Controller } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\n\nconst schema = z.object({\n  email: z.string().email('Invalid email'),\n  password: z.string().min(8, 'Password must be at least 8 characters'),\n});\n\ntype FormData = z.infer<typeof schema>;\n\nexport function LoginForm(): React.ReactElement {\n  const { control, handleSubmit, formState: { errors } } = useForm<FormData>({\n    resolver: zodResolver(schema),\n  });\n\n  const onSubmit = (data: FormData) => {\n    console.log(data);\n  };\n\n  return (\n    <View className=\"gap-4\">\n      <FormControl isInvalid={!!errors.email}>\n        <FormControlLabel>\n          <FormControlLabelText>Email</FormControlLabelText>\n        </FormControlLabel>\n        <Controller\n          control={control}\n          name=\"email\"\n          render={({ field: { onChange, value } }) => (\n            <Input>\n              <InputField\n                value={value}\n                onChangeText={onChange}\n                keyboardType=\"email-address\"\n                autoCapitalize=\"none\"\n              />\n            </Input>\n          )}\n        />\n        <FormControlError>\n          <FormControlErrorText>{errors.email?.message}</FormControlErrorText>\n        </FormControlError>\n      </FormControl>\n\n      <FormControl isInvalid={!!errors.password}>\n        <FormControlLabel>\n          <FormControlLabelText>Password</FormControlLabelText>\n        </FormControlLabel>\n        <Controller\n          control={control}\n          name=\"password\"\n          render={({ field: { onChange, value } }) => (\n            <Input>\n              <InputField\n                value={value}\n                onChangeText={onChange}\n                secureTextEntry\n              />\n            </Input>\n          )}\n        />\n        <FormControlError>\n          <FormControlErrorText>{errors.password?.message}</FormControlErrorText>\n        </FormControlError>\n      </FormControl>\n\n      <Button onPress={handleSubmit(onSubmit)}>\n        <ButtonText>Sign In</ButtonText>\n      </Button>\n    </View>\n  );\n}\n```\n\n## Theming\n\n```typescript\n// gluestack-ui.config.ts\nimport { config } from '@gluestack-ui/config';\n\nexport default {\n  ...config,\n  tokens: {\n    ...config.tokens,\n    colors: {\n      ...config.tokens.colors,\n      primary500: '#3B82F6',\n      primary600: '#2563EB',\n    },\n  },\n};\n```\n\n## Notes\n\n- Gluestack components work seamlessly with NativeWind\n- All components support accessibility attributes\n- Use FormControl for form validation feedback\n- Toast requires ToastProvider at app root\n- Modal requires OverlayProvider for proper rendering"
              },
              {
                "name": "maestro-testing",
                "description": "Maestro E2E testing patterns for React Native. Use when implementing end-to-end tests.",
                "path": "tech-stacks/js/react-native/skills/maestro-testing/SKILL.md",
                "frontmatter": {
                  "name": "maestro-testing",
                  "description": "Maestro E2E testing patterns for React Native. Use when implementing end-to-end tests."
                },
                "content": "# Maestro Testing Skill\n\nThis skill covers Maestro E2E testing for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Writing E2E tests\n- Testing user flows\n- Automating UI testing\n- CI/CD testing\n\n## Core Principle\n\n**YAML SIMPLICITY** - Maestro uses simple YAML syntax for readable, maintainable tests.\n\n## Installation\n\n```bash\n# macOS/Linux\ncurl -Ls \"https://get.maestro.mobile.dev\" | bash\n\n# Verify installation\nmaestro -v\n```\n\n## Project Structure\n\n```\n__tests__/\nâ””â”€â”€ e2e/\n    â”œâ”€â”€ flows/\n    â”‚   â”œâ”€â”€ login.yaml\n    â”‚   â””â”€â”€ common.yaml\n    â”œâ”€â”€ login_flow.yaml\n    â”œâ”€â”€ signup_flow.yaml\n    â”œâ”€â”€ navigation_flow.yaml\n    â””â”€â”€ checkout_flow.yaml\n```\n\n## Basic Test\n\n```yaml\n# __tests__/e2e/login_flow.yaml\nappId: com.myapp\n---\n- launchApp\n- tapOn: \"Email\"\n- inputText: \"test@example.com\"\n- tapOn: \"Password\"\n- inputText: \"password123\"\n- tapOn: \"Sign In\"\n- assertVisible: \"Welcome\"\n```\n\n## Common Commands\n\n### App Control\n\n```yaml\n# Launch app\n- launchApp\n\n# Clear app state and launch\n- launchApp:\n    clearState: true\n\n# Stop app\n- stopApp\n```\n\n### Tap Actions\n\n```yaml\n# Tap by text\n- tapOn: \"Button Text\"\n\n# Tap by accessibility ID\n- tapOn:\n    id: \"submit-button\"\n\n# Tap by index (when multiple matches)\n- tapOn:\n    text: \"Item\"\n    index: 0\n\n# Long press\n- longPressOn: \"Delete\"\n```\n\n### Text Input\n\n```yaml\n# Input text\n- inputText: \"Hello World\"\n\n# Clear and input\n- clearText\n- inputText: \"New Text\"\n\n# Input in specific field\n- tapOn: \"Email\"\n- inputText: \"user@example.com\"\n```\n\n### Assertions\n\n```yaml\n# Assert element is visible\n- assertVisible: \"Success\"\n\n# Assert element is not visible\n- assertNotVisible: \"Error\"\n\n# Assert with timeout\n- extendedWaitUntil:\n    visible: \"Loaded\"\n    timeout: 10000\n```\n\n### Scrolling\n\n```yaml\n# Scroll down\n- scroll\n\n# Scroll until visible\n- scrollUntilVisible:\n    element: \"Target Item\"\n    direction: DOWN\n    timeout: 10000\n\n# Scroll in element\n- scroll:\n    element:\n      id: \"scrollable-list\"\n    direction: DOWN\n```\n\n### Swipe Gestures\n\n```yaml\n# Swipe left (delete)\n- swipe:\n    direction: LEFT\n    start: \"Item to delete\"\n\n# Swipe down (refresh)\n- swipe:\n    direction: DOWN\n    start:\n      above: \"First Item\"\n```\n\n### Waiting\n\n```yaml\n# Wait for animation\n- waitForAnimationToEnd\n\n# Wait specific time (ms)\n- wait: 2000\n\n# Wait until visible\n- extendedWaitUntil:\n    visible: \"Element\"\n    timeout: 5000\n```\n\n### Screenshots\n\n```yaml\n# Take screenshot\n- takeScreenshot: screen_name\n```\n\n## Flow Composition\n\n### Reusable Flows\n\n```yaml\n# flows/login.yaml\n- tapOn: \"Email\"\n- inputText: ${email}\n- tapOn: \"Password\"\n- inputText: ${password}\n- tapOn: \"Sign In\"\n- assertVisible: \"Welcome\"\n```\n\n```yaml\n# main_test.yaml\n- launchApp\n- runFlow:\n    file: flows/login.yaml\n    env:\n      email: \"test@example.com\"\n      password: \"password123\"\n- tapOn: \"Profile\"\n```\n\n### Conditional Flows\n\n```yaml\n# Handle optional popups\n- runFlow:\n    when:\n      visible: \"Accept Cookies\"\n    commands:\n      - tapOn: \"Accept\"\n\n- tapOn: \"Continue\"\n```\n\n## Environment Variables\n\n```yaml\n# Use environment variables\nappId: ${APP_ID}\n---\n- launchApp\n- tapOn: \"Email\"\n- inputText: ${TEST_EMAIL}\n```\n\n```bash\n# Run with variables\nAPP_ID=com.myapp TEST_EMAIL=test@test.com maestro test test.yaml\n```\n\n## Platform-Specific Tests\n\n```yaml\n# iOS-specific\n- runFlow:\n    when:\n      platform: iOS\n    commands:\n      - tapOn: \"iOS Settings\"\n\n# Android-specific\n- runFlow:\n    when:\n      platform: Android\n    commands:\n      - tapOn: \"Android Settings\"\n```\n\n## Complete Test Examples\n\n### Login Flow\n\n```yaml\n# __tests__/e2e/login_flow.yaml\nappId: com.myapp\n---\n- launchApp:\n    clearState: true\n\n# Navigate to login\n- tapOn: \"Sign In\"\n\n# Enter credentials\n- tapOn:\n    id: \"email-input\"\n- inputText: \"test@example.com\"\n\n- tapOn:\n    id: \"password-input\"\n- inputText: \"password123\"\n\n# Submit\n- tapOn:\n    id: \"login-button\"\n\n# Wait for navigation\n- waitForAnimationToEnd\n\n# Verify success\n- assertVisible: \"Welcome back\"\n- assertVisible: \"Home\"\n\n# Take screenshot\n- takeScreenshot: login_success\n```\n\n### Form Validation\n\n```yaml\n# __tests__/e2e/form_validation.yaml\nappId: com.myapp\n---\n- launchApp\n\n# Test empty submission\n- tapOn: \"Submit\"\n- assertVisible: \"Email is required\"\n\n# Test invalid email\n- tapOn: \"Email\"\n- inputText: \"invalid\"\n- tapOn: \"Submit\"\n- assertVisible: \"Invalid email\"\n\n# Test valid submission\n- clearText\n- inputText: \"valid@example.com\"\n- tapOn: \"Password\"\n- inputText: \"ValidPass123!\"\n- tapOn: \"Submit\"\n- assertVisible: \"Success\"\n```\n\n### Navigation Flow\n\n```yaml\n# __tests__/e2e/navigation_flow.yaml\nappId: com.myapp\n---\n- launchApp\n\n# Test tab navigation\n- tapOn:\n    id: \"tab-home\"\n- assertVisible: \"Home Screen\"\n\n- tapOn:\n    id: \"tab-search\"\n- assertVisible: \"Search\"\n\n- tapOn:\n    id: \"tab-profile\"\n- assertVisible: \"Profile\"\n\n# Test back navigation\n- tapOn: \"Settings\"\n- assertVisible: \"Settings\"\n- back\n- assertVisible: \"Profile\"\n```\n\n## Running Tests\n\n```bash\n# Run single test\nmaestro test __tests__/e2e/login_flow.yaml\n\n# Run all tests\nmaestro test __tests__/e2e/\n\n# Run on specific platform\nmaestro test __tests__/e2e/ --platform ios\n\n# Generate JUnit report\nmaestro test __tests__/e2e/ --format junit --output results/\n```\n\n## CI/CD Integration\n\n```yaml\n# .github/workflows/e2e.yml\nname: E2E Tests\n\non: [push, pull_request]\n\njobs:\n  e2e:\n    runs-on: macos-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Node\n        uses: actions/setup-node@v4\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Install Maestro\n        run: |\n          curl -Ls \"https://get.maestro.mobile.dev\" | bash\n          echo \"$HOME/.maestro/bin\" >> $GITHUB_PATH\n\n      - name: Build app\n        run: npx expo prebuild && npx expo run:ios\n\n      - name: Run E2E tests\n        run: maestro test __tests__/e2e/\n\n      - name: Upload results\n        uses: actions/upload-artifact@v3\n        with:\n          name: e2e-results\n          path: results/\n```\n\n## Notes\n\n- Requires simulator/emulator running\n- Use accessibility IDs for reliable selection\n- Keep tests independent\n- Use reusable flows for common actions\n- Test on both platforms\n- Consider Maestro Cloud for CI"
              },
              {
                "name": "nativewind-patterns",
                "description": "NativeWind (Tailwind CSS for React Native) styling patterns. Use when styling mobile components.",
                "path": "tech-stacks/js/react-native/skills/nativewind-patterns/SKILL.md",
                "frontmatter": {
                  "name": "nativewind-patterns",
                  "description": "NativeWind (Tailwind CSS for React Native) styling patterns. Use when styling mobile components."
                },
                "content": "# NativeWind Patterns Skill\n\nThis skill covers NativeWind styling for React Native applications.\n\n## When to Use\n\nUse this skill when:\n- Styling React Native components\n- Converting Tailwind patterns to mobile\n- Implementing dark mode\n- Responsive mobile design\n\n## Core Principle\n\n**UTILITY FIRST** - Use className with Tailwind utilities adapted for mobile.\n\n## Installation\n\n```bash\nnpx expo install nativewind\nnpm install --dev tailwindcss\nnpx tailwindcss init\n```\n\n## Configuration\n\n```javascript\n// tailwind.config.js\nmodule.exports = {\n  content: [\n    \"./app/**/*.{js,jsx,ts,tsx}\",\n    \"./components/**/*.{js,jsx,ts,tsx}\"\n  ],\n  presets: [require(\"nativewind/preset\")],\n  theme: {\n    extend: {},\n  },\n  plugins: [],\n}\n```\n\n```javascript\n// babel.config.js\nmodule.exports = function(api) {\n  api.cache(true);\n  return {\n    presets: ['babel-preset-expo'],\n    plugins: [\"nativewind/babel\"],\n  };\n};\n```\n\n## Basic Usage\n\n```typescript\nimport { View, Text } from 'react-native';\n\nexport function Card(): React.ReactElement {\n  return (\n    <View className=\"bg-white rounded-lg p-4 shadow-md\">\n      <Text className=\"text-lg font-bold text-gray-900\">\n        Card Title\n      </Text>\n      <Text className=\"text-sm text-gray-600 mt-2\">\n        Card description\n      </Text>\n    </View>\n  );\n}\n```\n\n## Flexbox Layouts\n\n```typescript\n// Center content\n<View className=\"flex-1 items-center justify-center\">\n  <Text>Centered</Text>\n</View>\n\n// Space between\n<View className=\"flex-row items-center justify-between\">\n  <Text>Left</Text>\n  <Text>Right</Text>\n</View>\n\n// Vertical stack with gap\n<View className=\"flex-col gap-4\">\n  <Text>Item 1</Text>\n  <Text>Item 2</Text>\n</View>\n\n// Horizontal stack\n<View className=\"flex-row items-center gap-2\">\n  <Icon />\n  <Text>With Icon</Text>\n</View>\n```\n\n## Dark Mode\n\n```typescript\n<View className=\"bg-white dark:bg-gray-900\">\n  <Text className=\"text-gray-900 dark:text-white\">\n    Adaptive text\n  </Text>\n</View>\n\n// Check dark mode status\nimport { useColorScheme } from 'nativewind';\n\nfunction Component(): React.ReactElement {\n  const { colorScheme, toggleColorScheme } = useColorScheme();\n\n  return (\n    <TouchableOpacity onPress={toggleColorScheme}>\n      <Text>{colorScheme === 'dark' ? 'Light Mode' : 'Dark Mode'}</Text>\n    </TouchableOpacity>\n  );\n}\n```\n\n## Platform-Specific Styles\n\n```typescript\nimport { Platform } from 'react-native';\n\n<View className={Platform.select({\n  ios: 'pt-12',      // iOS status bar\n  android: 'pt-6',   // Android status bar\n  default: 'pt-8'\n})}>\n  <Text>Platform-adaptive padding</Text>\n</View>\n```\n\n## Common Mobile Patterns\n\n### Safe Touch Targets\n\n```typescript\n// Minimum 44x44 points for accessibility\n<TouchableOpacity className=\"min-h-[44] min-w-[44] items-center justify-center\">\n  <Text>Tap Me</Text>\n</TouchableOpacity>\n```\n\n### Card Component\n\n```typescript\n<View className=\"bg-white rounded-xl p-4 shadow-sm border border-gray-100\">\n  <Text className=\"text-lg font-semibold\">Title</Text>\n  <Text className=\"text-gray-600 mt-1\">Description</Text>\n</View>\n```\n\n### Button Variants\n\n```typescript\n// Primary Button\n<TouchableOpacity className=\"bg-blue-600 py-3 px-6 rounded-lg active:bg-blue-700\">\n  <Text className=\"text-white font-semibold text-center\">Primary</Text>\n</TouchableOpacity>\n\n// Secondary Button\n<TouchableOpacity className=\"bg-gray-100 py-3 px-6 rounded-lg active:bg-gray-200\">\n  <Text className=\"text-gray-900 font-semibold text-center\">Secondary</Text>\n</TouchableOpacity>\n\n// Outline Button\n<TouchableOpacity className=\"border border-blue-600 py-3 px-6 rounded-lg\">\n  <Text className=\"text-blue-600 font-semibold text-center\">Outline</Text>\n</TouchableOpacity>\n```\n\n### Input Fields\n\n```typescript\n<View className=\"mb-4\">\n  <Text className=\"text-gray-700 mb-1 font-medium\">Label</Text>\n  <TextInput\n    className=\"bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 text-gray-900\"\n    placeholder=\"Enter text...\"\n    placeholderTextColor=\"#9CA3AF\"\n  />\n</View>\n```\n\n## Spacing Scale\n\n```typescript\n// Padding\n<View className=\"p-0\">   {/* 0 */}\n<View className=\"p-1\">   {/* 4px */}\n<View className=\"p-2\">   {/* 8px */}\n<View className=\"p-4\">   {/* 16px */}\n<View className=\"p-6\">   {/* 24px */}\n<View className=\"p-8\">   {/* 32px */}\n\n// Margin\n<View className=\"m-4\">   {/* All sides */}\n<View className=\"mx-4\">  {/* Horizontal */}\n<View className=\"my-4\">  {/* Vertical */}\n<View className=\"mt-4\">  {/* Top only */}\n```\n\n## Colors\n\n```typescript\n// Text colors\n<Text className=\"text-gray-900\">   {/* Primary text */}\n<Text className=\"text-gray-600\">   {/* Secondary text */}\n<Text className=\"text-gray-400\">   {/* Muted text */}\n<Text className=\"text-blue-600\">   {/* Link/accent */}\n<Text className=\"text-red-500\">    {/* Error */}\n<Text className=\"text-green-500\">  {/* Success */}\n\n// Background colors\n<View className=\"bg-white\">        {/* Surface */}\n<View className=\"bg-gray-50\">      {/* Background */}\n<View className=\"bg-gray-100\">     {/* Muted background */}\n<View className=\"bg-blue-600\">     {/* Primary */}\n```\n\n## Limitations\n\nNot all Tailwind classes work on React Native:\n- No `hover:` (use `active:` instead)\n- No `grid` (use flexbox)\n- No `cursor-pointer`\n- No CSS filters\n- Limited box-shadow (use `shadow-sm`, `shadow-md`, etc.)\n\n## Notes\n\n- Always test on both iOS and Android\n- Use `active:` instead of `hover:` for touch feedback\n- Keep styles consistent with platform conventions\n- Use NativeWind's useColorScheme for dark mode"
              },
              {
                "name": "platform-specific-code",
                "description": "Platform-specific patterns for iOS and Android. Use when writing platform-conditional code.",
                "path": "tech-stacks/js/react-native/skills/platform-specific-code/SKILL.md",
                "frontmatter": {
                  "name": "platform-specific-code",
                  "description": "Platform-specific patterns for iOS and Android. Use when writing platform-conditional code."
                },
                "content": "# Platform-Specific Code Skill\n\nThis skill covers patterns for handling iOS and Android differences.\n\n## When to Use\n\nUse this skill when:\n- Writing platform-specific UI\n- Handling platform APIs differently\n- Creating platform-specific files\n- Styling for each platform\n\n## Core Principle\n\n**WRITE ONCE, ADAPT WHERE NEEDED** - Share code where possible, diverge only when necessary.\n\n## Platform Detection\n\n```typescript\nimport { Platform } from 'react-native';\n\n// Basic detection\nif (Platform.OS === 'ios') {\n  // iOS-specific code\n} else if (Platform.OS === 'android') {\n  // Android-specific code\n}\n\n// Platform.select for values\nconst styles = {\n  container: {\n    paddingTop: Platform.select({\n      ios: 20,\n      android: 0,\n    }),\n  },\n};\n\n// With default value\nconst shadowStyle = Platform.select({\n  ios: {\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n  },\n  android: {\n    elevation: 5,\n  },\n  default: {},\n});\n```\n\n## Platform-Specific Files\n\n```\n// File structure\ncomponents/\nâ”œâ”€â”€ Button.tsx          // Shared code\nâ”œâ”€â”€ Button.ios.tsx      // iOS-specific\nâ”œâ”€â”€ Button.android.tsx  // Android-specific\n```\n\n```typescript\n// Button.ios.tsx\nimport { TouchableOpacity, Text } from 'react-native';\n\nexport function Button({ onPress, children }) {\n  return (\n    <TouchableOpacity\n      onPress={onPress}\n      style={{ paddingVertical: 12, paddingHorizontal: 24 }}\n    >\n      <Text>{children}</Text>\n    </TouchableOpacity>\n  );\n}\n\n// Button.android.tsx\nimport { Pressable, Text } from 'react-native';\n\nexport function Button({ onPress, children }) {\n  return (\n    <Pressable\n      onPress={onPress}\n      android_ripple={{ color: 'rgba(0,0,0,0.1)' }}\n      style={{ paddingVertical: 12, paddingHorizontal: 24 }}\n    >\n      <Text>{children}</Text>\n    </Pressable>\n  );\n}\n\n// Usage - automatically picks correct file\nimport { Button } from './Button';\n```\n\n## Platform-Specific Styling\n\n```typescript\nimport { Platform, StyleSheet } from 'react-native';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    // Platform-specific values\n    ...Platform.select({\n      ios: {\n        paddingTop: 44, // iOS notch\n      },\n      android: {\n        paddingTop: 24, // Android status bar\n      },\n    }),\n  },\n  shadow: Platform.select({\n    ios: {\n      shadowColor: '#000',\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 4,\n    },\n    android: {\n      elevation: 4,\n    },\n  }),\n});\n```\n\n## NativeWind Platform Classes\n\n```typescript\n// Using NativeWind with platform prefixes\n<View className=\"ios:pt-12 android:pt-6\">\n  <Text>Platform-specific padding</Text>\n</View>\n\n<View className=\"ios:shadow-lg android:elevation-4\">\n  <Text>Platform-specific shadows</Text>\n</View>\n```\n\n## Safe Area Handling\n\n```typescript\nimport { SafeAreaView, useSafeAreaInsets } from 'react-native-safe-area-context';\n\n// Using SafeAreaView\nfunction Screen() {\n  return (\n    <SafeAreaView style={{ flex: 1 }}>\n      <Content />\n    </SafeAreaView>\n  );\n}\n\n// Using hook for fine control\nfunction Header() {\n  const insets = useSafeAreaInsets();\n\n  return (\n    <View style={{ paddingTop: insets.top }}>\n      <Text>Header</Text>\n    </View>\n  );\n}\n\n// Platform-specific safe area\nfunction PlatformHeader() {\n  const insets = useSafeAreaInsets();\n\n  return (\n    <View\n      style={{\n        paddingTop: Platform.select({\n          ios: insets.top,\n          android: insets.top + 8, // Extra padding on Android\n        }),\n      }}\n    >\n      <Text>Header</Text>\n    </View>\n  );\n}\n```\n\n## Status Bar\n\n```typescript\nimport { StatusBar, Platform } from 'react-native';\n\nfunction App() {\n  return (\n    <>\n      <StatusBar\n        barStyle={Platform.select({\n          ios: 'dark-content',\n          android: 'light-content',\n        })}\n        backgroundColor={Platform.OS === 'android' ? '#ffffff' : undefined}\n        translucent={Platform.OS === 'android'}\n      />\n      <Content />\n    </>\n  );\n}\n```\n\n## Platform-Specific Navigation\n\n```typescript\nimport { Platform } from 'react-native';\nimport { Stack } from 'expo-router';\n\nfunction StackLayout() {\n  return (\n    <Stack\n      screenOptions={{\n        headerStyle: {\n          backgroundColor: '#fff',\n        },\n        // iOS-specific\n        ...(Platform.OS === 'ios' && {\n          headerLargeTitle: true,\n          headerTransparent: true,\n          headerBlurEffect: 'regular',\n        }),\n        // Android-specific\n        ...(Platform.OS === 'android' && {\n          animation: 'slide_from_right',\n        }),\n      }}\n    >\n      <Stack.Screen name=\"index\" />\n    </Stack>\n  );\n}\n```\n\n## Platform-Specific Haptics\n\n```typescript\nimport * as Haptics from 'expo-haptics';\nimport { Platform, Vibration } from 'react-native';\n\nasync function triggerFeedback() {\n  if (Platform.OS === 'ios') {\n    await Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n  } else {\n    Vibration.vibrate(50);\n  }\n}\n\n// Selection feedback\nasync function selectionFeedback() {\n  if (Platform.OS === 'ios') {\n    await Haptics.selectionAsync();\n  }\n  // Android handles selection feedback automatically\n}\n```\n\n## Platform-Specific Keyboards\n\n```typescript\nimport { Platform, KeyboardAvoidingView } from 'react-native';\n\nfunction FormScreen() {\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      keyboardVerticalOffset={Platform.select({\n        ios: 88, // Header height\n        android: 0,\n      })}\n      style={{ flex: 1 }}\n    >\n      <Form />\n    </KeyboardAvoidingView>\n  );\n}\n```\n\n## Platform-Specific Permissions\n\n```typescript\nimport * as ImagePicker from 'expo-image-picker';\nimport { Platform } from 'react-native';\n\nasync function requestCameraPermission() {\n  if (Platform.OS === 'ios') {\n    const { status } = await ImagePicker.requestCameraPermissionsAsync();\n    return status === 'granted';\n  } else {\n    // Android handles permissions differently\n    const { status } = await ImagePicker.requestCameraPermissionsAsync();\n    return status === 'granted';\n  }\n}\n```\n\n## Platform-Specific Links\n\n```typescript\nimport { Linking, Platform } from 'react-native';\n\nfunction openSettings() {\n  if (Platform.OS === 'ios') {\n    Linking.openURL('app-settings:');\n  } else {\n    Linking.openSettings();\n  }\n}\n\nfunction openMaps(latitude: number, longitude: number) {\n  const url = Platform.select({\n    ios: `maps:0,0?q=${latitude},${longitude}`,\n    android: `geo:0,0?q=${latitude},${longitude}`,\n  });\n\n  if (url) {\n    Linking.openURL(url);\n  }\n}\n\nfunction openPhone(phoneNumber: string) {\n  const url = Platform.select({\n    ios: `telprompt:${phoneNumber}`,\n    android: `tel:${phoneNumber}`,\n  });\n\n  if (url) {\n    Linking.openURL(url);\n  }\n}\n```\n\n## Platform-Specific Components\n\n```typescript\nimport { Platform, Pressable, TouchableOpacity } from 'react-native';\n\n// Use Pressable with ripple on Android\nfunction PlatformButton({ onPress, children, style }) {\n  if (Platform.OS === 'android') {\n    return (\n      <Pressable\n        onPress={onPress}\n        android_ripple={{ color: 'rgba(0,0,0,0.1)' }}\n        style={style}\n      >\n        {children}\n      </Pressable>\n    );\n  }\n\n  return (\n    <TouchableOpacity onPress={onPress} style={style}>\n      {children}\n    </TouchableOpacity>\n  );\n}\n```\n\n## Platform-Specific Fonts\n\n```typescript\nimport { Platform } from 'react-native';\n\nconst fontFamily = Platform.select({\n  ios: 'System',\n  android: 'Roboto',\n});\n\n// With custom fonts\nconst customFont = Platform.select({\n  ios: 'SF Pro Display',\n  android: 'sans-serif-medium',\n});\n```\n\n## Version Checking\n\n```typescript\nimport { Platform } from 'react-native';\n\n// Check platform version\nconst isIOS15OrLater = Platform.OS === 'ios' && parseInt(Platform.Version, 10) >= 15;\nconst isAndroid12OrLater = Platform.OS === 'android' && Platform.Version >= 31;\n\n// Conditional features\nif (isIOS15OrLater) {\n  // Use iOS 15+ features\n}\n```\n\n## Platform Constants\n\n```typescript\nimport { Platform } from 'react-native';\n\n// iOS specific\nif (Platform.OS === 'ios') {\n  console.log('iOS Version:', Platform.Version); // e.g., \"17.0\"\n  console.log('Is iPad:', Platform.isPad);\n  console.log('Is TV:', Platform.isTV);\n}\n\n// Android specific\nif (Platform.OS === 'android') {\n  console.log('API Level:', Platform.Version); // e.g., 34\n}\n```\n\n## Testing Platform Code\n\n```typescript\nimport { Platform } from 'react-native';\n\n// Mock Platform in tests\njest.mock('react-native/Libraries/Utilities/Platform', () => ({\n  OS: 'ios',\n  select: jest.fn((obj) => obj.ios),\n}));\n\n// Or for Android\njest.mock('react-native/Libraries/Utilities/Platform', () => ({\n  OS: 'android',\n  select: jest.fn((obj) => obj.android),\n  Version: 31,\n}));\n```\n\n## Notes\n\n- Use platform-specific files for large differences\n- Use Platform.select for simple value differences\n- Test on both platforms regularly\n- Consider using design system that handles differences\n- Document platform-specific behavior\n- Use Expo's cross-platform APIs when available"
              },
              {
                "name": "react-native-performance",
                "description": "React Native performance optimization techniques. Use when optimizing app performance.",
                "path": "tech-stacks/js/react-native/skills/react-native-performance/SKILL.md",
                "frontmatter": {
                  "name": "react-native-performance",
                  "description": "React Native performance optimization techniques. Use when optimizing app performance."
                },
                "content": "# React Native Performance Skill\n\nThis skill covers performance optimization for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- App feels slow or janky\n- Lists scroll poorly\n- Animations stutter\n- Bundle size is too large\n- Memory usage is high\n\n## Core Principle\n\n**MEASURE FIRST** - Profile before optimizing. Fix actual bottlenecks, not perceived ones.\n\n## Profiling Tools\n\n### React DevTools Profiler\n\n```typescript\n// Enable profiling in development\nif (__DEV__) {\n  // React DevTools will show component render times\n}\n```\n\n### Flipper\n\n```bash\n# Install Flipper for advanced debugging\n# https://fbflipper.com/\n```\n\n### Performance Monitor\n\n```typescript\n// Show FPS and memory in development\nimport { LogBox } from 'react-native';\n\nif (__DEV__) {\n  // Performance overlay available via shake gesture\n}\n```\n\n## Render Optimization\n\n### Avoid Inline Functions\n\n```typescript\n// âŒ Bad: Creates new function every render\n<Button onPress={() => handlePress(item.id)} />\n\n// âœ… Good: Stable function reference\nconst handlePress = useCallback((id: string) => {\n  console.log(id);\n}, []);\n\n<Button onPress={() => handlePress(item.id)} />\n\n// âœ… Better: If possible, pass id differently\nconst handleItemPress = useCallback(() => {\n  console.log(item.id);\n}, [item.id]);\n\n<Button onPress={handleItemPress} />\n```\n\n### Memoize Components\n\n```typescript\nimport { memo } from 'react';\n\ninterface ItemCardProps {\n  item: Item;\n  onPress: (id: string) => void;\n}\n\nexport const ItemCard = memo(function ItemCard({\n  item,\n  onPress,\n}: ItemCardProps): React.ReactElement {\n  return (\n    <TouchableOpacity onPress={() => onPress(item.id)}>\n      <Text>{item.name}</Text>\n    </TouchableOpacity>\n  );\n});\n```\n\n### useMemo for Expensive Computations\n\n```typescript\nimport { useMemo } from 'react';\n\nfunction FilteredList({ items, filter }: Props): React.ReactElement {\n  // Only recompute when items or filter change\n  const filteredItems = useMemo(() => {\n    return items.filter((item) =>\n      item.name.toLowerCase().includes(filter.toLowerCase())\n    );\n  }, [items, filter]);\n\n  return <FlashList data={filteredItems} {...rest} />;\n}\n```\n\n### useCallback for Event Handlers\n\n```typescript\nimport { useCallback } from 'react';\n\nfunction ItemList(): React.ReactElement {\n  const handlePress = useCallback((id: string) => {\n    // Handle press\n  }, []);\n\n  const renderItem = useCallback(({ item }: { item: Item }) => (\n    <ItemCard item={item} onPress={handlePress} />\n  ), [handlePress]);\n\n  return (\n    <FlashList\n      data={items}\n      renderItem={renderItem}\n      estimatedItemSize={80}\n    />\n  );\n}\n```\n\n## List Performance\n\n### Use FlashList Instead of FlatList\n\n```typescript\nimport { FlashList } from '@shopify/flash-list';\n\n// âœ… FlashList is 10x faster than FlatList\n<FlashList\n  data={items}\n  renderItem={({ item }) => <ItemCard item={item} />}\n  estimatedItemSize={80}  // Required for FlashList\n  keyExtractor={(item) => item.id}\n/>\n```\n\n### Optimize Item Rendering\n\n```typescript\n// âœ… Use getItemType for different item layouts\n<FlashList\n  data={items}\n  renderItem={({ item }) => {\n    if (item.type === 'header') return <Header />;\n    return <Item item={item} />;\n  }}\n  getItemType={(item) => item.type}\n  estimatedItemSize={60}\n/>\n\n// âœ… Use overrideItemLayout for variable heights\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  overrideItemLayout={(layout, item) => {\n    layout.size = item.type === 'header' ? 100 : 60;\n  }}\n/>\n```\n\n## Image Optimization\n\n### Use expo-image\n\n```typescript\nimport { Image } from 'expo-image';\n\n// âœ… expo-image is faster than React Native Image\n<Image\n  source={{ uri: imageUrl }}\n  style={{ width: 200, height: 200 }}\n  contentFit=\"cover\"\n  transition={200}\n  cachePolicy=\"memory-disk\"\n/>\n```\n\n### Optimize Image Size\n\n```typescript\n// âœ… Request appropriately sized images\nconst imageUrl = `${baseUrl}?w=400&h=400`;\n\n// âœ… Use blurhash for placeholders\n<Image\n  source={{ uri: imageUrl }}\n  placeholder={blurhash}\n  transition={200}\n/>\n```\n\n## Animation Optimization\n\n### Use Reanimated\n\n```typescript\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withSpring,\n} from 'react-native-reanimated';\n\n// âœ… Animations run on UI thread\nfunction AnimatedBox(): React.ReactElement {\n  const scale = useSharedValue(1);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  return <Animated.View style={animatedStyle} />;\n}\n```\n\n### Avoid JS-Driven Animations\n\n```typescript\n// âŒ Bad: JS thread animations\nconst [scale, setScale] = useState(1);\nAnimated.timing(scale, { toValue: 2 }).start();\n\n// âœ… Good: Reanimated (runs on UI thread)\nconst scale = useSharedValue(1);\nscale.value = withSpring(2);\n```\n\n## Bundle Size Optimization\n\n### Analyze Bundle\n\n```bash\nnpx react-native-bundle-visualizer\n```\n\n### Optimize Imports\n\n```typescript\n// âŒ Bad: Imports entire library\nimport { format } from 'date-fns';\n\n// âœ… Good: Import only what you need\nimport format from 'date-fns/format';\n\n// âŒ Bad: Import all icons\nimport * as Icons from 'lucide-react-native';\n\n// âœ… Good: Import specific icons\nimport { Home, Search } from 'lucide-react-native';\n```\n\n### Replace Heavy Libraries\n\n```typescript\n// Replace moment.js (300KB) with:\n// - date-fns (tree-shakeable)\n// - dayjs (2KB)\n\n// Replace lodash with:\n// - Individual lodash functions\n// - Native JavaScript methods\n```\n\n## Memory Management\n\n### Clean Up Effects\n\n```typescript\nuseEffect(() => {\n  const subscription = eventEmitter.subscribe(handler);\n\n  // âœ… Always clean up subscriptions\n  return () => {\n    subscription.unsubscribe();\n  };\n}, []);\n```\n\n### Avoid Memory Leaks\n\n```typescript\n// âœ… Cancel async operations\nuseEffect(() => {\n  let isMounted = true;\n\n  fetchData().then((data) => {\n    if (isMounted) {\n      setData(data);\n    }\n  });\n\n  return () => {\n    isMounted = false;\n  };\n}, []);\n```\n\n## Common Pitfalls\n\n### Avoid\n\n```typescript\n// âŒ Inline styles (creates new object every render)\n<View style={{ padding: 10 }} />\n\n// âŒ Anonymous functions in render\n<Button onPress={() => handlePress()} />\n\n// âŒ FlatList for long lists\n<FlatList data={longList} />\n\n// âŒ Unoptimized images\n<Image source={{ uri: fullSizeImage }} />\n```\n\n### Prefer\n\n```typescript\n// âœ… NativeWind or StyleSheet\n<View className=\"p-4\" />\n\n// âœ… useCallback for handlers\nconst handlePress = useCallback(() => {...}, []);\n\n// âœ… FlashList for long lists\n<FlashList data={longList} estimatedItemSize={80} />\n\n// âœ… Optimized images with expo-image\n<Image source={{ uri: optimizedImage }} cachePolicy=\"memory-disk\" />\n```\n\n## Performance Checklist\n\n- [ ] Use FlashList instead of FlatList\n- [ ] Memoize expensive computations\n- [ ] Use useCallback for event handlers\n- [ ] Use React.memo for list items\n- [ ] Use Reanimated for animations\n- [ ] Use expo-image for images\n- [ ] Analyze and optimize bundle size\n- [ ] Clean up effects and subscriptions\n- [ ] Profile before optimizing\n\n## Notes\n\n- Profile on actual devices, not simulators\n- Focus on 60fps for smooth experience\n- Monitor memory usage\n- Test on lower-end devices\n- Use New Architecture for better performance"
              },
              {
                "name": "reanimated-patterns",
                "description": "React Native Reanimated animation patterns. Use when implementing animations.",
                "path": "tech-stacks/js/react-native/skills/reanimated-patterns/SKILL.md",
                "frontmatter": {
                  "name": "reanimated-patterns",
                  "description": "React Native Reanimated animation patterns. Use when implementing animations."
                },
                "content": "# Reanimated Patterns Skill\n\nThis skill covers React Native Reanimated for performant animations.\n\n## When to Use\n\nUse this skill when:\n- Implementing smooth animations\n- Gesture-based interactions\n- Complex animation sequences\n- Performance-critical animations\n\n## Core Principle\n\n**UI THREAD ANIMATIONS** - Reanimated runs animations on the UI thread for 60fps.\n\n## Installation\n\n```bash\nnpx expo install react-native-reanimated\n```\n\nUpdate babel.config.js:\n```javascript\nmodule.exports = function(api) {\n  api.cache(true);\n  return {\n    presets: ['babel-preset-expo'],\n    plugins: ['react-native-reanimated/plugin'],\n  };\n};\n```\n\n## Basic Concepts\n\n### Shared Values\n\n```typescript\nimport { useSharedValue } from 'react-native-reanimated';\n\n// Shared values are synchronized between JS and UI threads\nconst scale = useSharedValue(1);\nconst opacity = useSharedValue(0);\nconst translateX = useSharedValue(0);\n\n// Update shared values\nscale.value = 2;\nopacity.value = 1;\n```\n\n### Animated Styles\n\n```typescript\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n} from 'react-native-reanimated';\n\nfunction AnimatedBox(): React.ReactElement {\n  const scale = useSharedValue(1);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  return (\n    <Animated.View style={[styles.box, animatedStyle]} />\n  );\n}\n```\n\n## Animation Functions\n\n### withSpring\n\n```typescript\nimport { withSpring } from 'react-native-reanimated';\n\n// Spring animation (natural bounce)\nscale.value = withSpring(2, {\n  damping: 10,\n  stiffness: 100,\n  mass: 1,\n});\n```\n\n### withTiming\n\n```typescript\nimport { withTiming, Easing } from 'react-native-reanimated';\n\n// Timed animation\nopacity.value = withTiming(1, {\n  duration: 300,\n  easing: Easing.bezier(0.25, 0.1, 0.25, 1),\n});\n```\n\n### withDelay\n\n```typescript\nimport { withDelay, withSpring } from 'react-native-reanimated';\n\n// Delayed animation\nscale.value = withDelay(500, withSpring(2));\n```\n\n### withSequence\n\n```typescript\nimport { withSequence, withTiming } from 'react-native-reanimated';\n\n// Sequential animations\nscale.value = withSequence(\n  withTiming(1.2, { duration: 100 }),\n  withTiming(0.9, { duration: 100 }),\n  withTiming(1, { duration: 100 })\n);\n```\n\n### withRepeat\n\n```typescript\nimport { withRepeat, withTiming } from 'react-native-reanimated';\n\n// Repeating animation\nrotation.value = withRepeat(\n  withTiming(360, { duration: 1000 }),\n  -1,  // -1 for infinite\n  false // reverse\n);\n```\n\n## Common Animations\n\n### Fade In/Out\n\n```typescript\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withTiming,\n} from 'react-native-reanimated';\n\nfunction FadeView({ visible }: { visible: boolean }): React.ReactElement {\n  const opacity = useSharedValue(0);\n\n  useEffect(() => {\n    opacity.value = withTiming(visible ? 1 : 0, { duration: 300 });\n  }, [visible]);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    opacity: opacity.value,\n  }));\n\n  return (\n    <Animated.View style={animatedStyle}>\n      {children}\n    </Animated.View>\n  );\n}\n```\n\n### Scale on Press\n\n```typescript\nfunction ScaleButton({ onPress, children }: Props): React.ReactElement {\n  const scale = useSharedValue(1);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  const handlePressIn = () => {\n    scale.value = withSpring(0.95);\n  };\n\n  const handlePressOut = () => {\n    scale.value = withSpring(1);\n  };\n\n  return (\n    <TouchableOpacity\n      onPressIn={handlePressIn}\n      onPressOut={handlePressOut}\n      onPress={onPress}\n      activeOpacity={1}\n    >\n      <Animated.View style={animatedStyle}>\n        {children}\n      </Animated.View>\n    </TouchableOpacity>\n  );\n}\n```\n\n### Slide In\n\n```typescript\nimport { Dimensions } from 'react-native';\n\nconst { width } = Dimensions.get('window');\n\nfunction SlideIn({ visible }: { visible: boolean }): React.ReactElement {\n  const translateX = useSharedValue(width);\n\n  useEffect(() => {\n    translateX.value = withSpring(visible ? 0 : width);\n  }, [visible]);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ translateX: translateX.value }],\n  }));\n\n  return (\n    <Animated.View style={[styles.panel, animatedStyle]}>\n      {children}\n    </Animated.View>\n  );\n}\n```\n\n## Entering/Exiting Animations\n\n```typescript\nimport Animated, {\n  FadeIn,\n  FadeOut,\n  SlideInRight,\n  SlideOutLeft,\n  ZoomIn,\n  BounceIn,\n} from 'react-native-reanimated';\n\n// Fade\n<Animated.View entering={FadeIn.duration(300)} exiting={FadeOut.duration(200)}>\n\n// Slide\n<Animated.View entering={SlideInRight} exiting={SlideOutLeft}>\n\n// Zoom\n<Animated.View entering={ZoomIn.springify()}>\n\n// Bounce\n<Animated.View entering={BounceIn.delay(200)}>\n\n// Custom\n<Animated.View\n  entering={FadeIn.duration(500).delay(100).springify()}\n  exiting={FadeOut.duration(300)}\n>\n```\n\n## Layout Animations\n\n```typescript\nimport Animated, { Layout } from 'react-native-reanimated';\n\n// Animate layout changes\n<Animated.View layout={Layout.springify()}>\n  {items.map((item) => (\n    <Animated.View\n      key={item.id}\n      entering={FadeIn}\n      exiting={FadeOut}\n      layout={Layout}\n    >\n      <Text>{item.name}</Text>\n    </Animated.View>\n  ))}\n</Animated.View>\n```\n\n## Gesture Handler Integration\n\n```typescript\nimport { GestureDetector, Gesture } from 'react-native-gesture-handler';\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withSpring,\n} from 'react-native-reanimated';\n\nfunction DraggableBox(): React.ReactElement {\n  const translateX = useSharedValue(0);\n  const translateY = useSharedValue(0);\n\n  const gesture = Gesture.Pan()\n    .onUpdate((event) => {\n      translateX.value = event.translationX;\n      translateY.value = event.translationY;\n    })\n    .onEnd(() => {\n      translateX.value = withSpring(0);\n      translateY.value = withSpring(0);\n    });\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [\n      { translateX: translateX.value },\n      { translateY: translateY.value },\n    ],\n  }));\n\n  return (\n    <GestureDetector gesture={gesture}>\n      <Animated.View style={[styles.box, animatedStyle]} />\n    </GestureDetector>\n  );\n}\n```\n\n## Interpolation\n\n```typescript\nimport { interpolate, Extrapolation } from 'react-native-reanimated';\n\nconst animatedStyle = useAnimatedStyle(() => {\n  const scale = interpolate(\n    scrollY.value,\n    [0, 100],\n    [1, 0.5],\n    Extrapolation.CLAMP\n  );\n\n  const opacity = interpolate(\n    scrollY.value,\n    [0, 50, 100],\n    [1, 0.5, 0]\n  );\n\n  return {\n    transform: [{ scale }],\n    opacity,\n  };\n});\n```\n\n## Worklets\n\n```typescript\nimport { runOnJS } from 'react-native-reanimated';\n\n// Call JS function from worklet\nconst updateState = (value: number) => {\n  setState(value);\n};\n\nconst animatedStyle = useAnimatedStyle(() => {\n  if (position.value > 100) {\n    runOnJS(updateState)(position.value);\n  }\n  return { transform: [{ translateX: position.value }] };\n});\n```\n\n## Notes\n\n- All animation logic runs on UI thread\n- Use worklets ('worklet' directive) for custom functions\n- Use runOnJS to call JS functions from worklets\n- Test animations on real devices\n- Reanimated is compatible with Expo"
              },
              {
                "name": "secure-storage-patterns",
                "description": "expo-secure-store patterns for sensitive data. Use when storing tokens and credentials.",
                "path": "tech-stacks/js/react-native/skills/secure-storage-patterns/SKILL.md",
                "frontmatter": {
                  "name": "secure-storage-patterns",
                  "description": "expo-secure-store patterns for sensitive data. Use when storing tokens and credentials."
                },
                "content": "# Secure Storage Patterns Skill\n\nThis skill covers secure data storage for React Native with Expo.\n\n## When to Use\n\nUse this skill when:\n- Storing authentication tokens\n- Saving sensitive user data\n- Managing API keys\n- Storing encryption keys\n\n## Core Principle\n\n**SECURE BY DEFAULT** - Always use SecureStore for sensitive data, never AsyncStorage.\n\n## Installation\n\n```bash\nnpx expo install expo-secure-store\n```\n\n## Basic Usage\n\n```typescript\nimport * as SecureStore from 'expo-secure-store';\n\n// Save value\nawait SecureStore.setItemAsync('authToken', 'your-token-here');\n\n// Get value\nconst token = await SecureStore.getItemAsync('authToken');\n\n// Delete value\nawait SecureStore.deleteItemAsync('authToken');\n```\n\n## Authentication Token Storage\n\n```typescript\n// lib/secureStorage.ts\nimport * as SecureStore from 'expo-secure-store';\n\nconst TOKEN_KEY = 'authToken';\nconst REFRESH_TOKEN_KEY = 'refreshToken';\nconst USER_KEY = 'user';\n\nexport const secureStorage = {\n  // Token management\n  async saveToken(token: string): Promise<void> {\n    await SecureStore.setItemAsync(TOKEN_KEY, token);\n  },\n\n  async getToken(): Promise<string | null> {\n    return SecureStore.getItemAsync(TOKEN_KEY);\n  },\n\n  async deleteToken(): Promise<void> {\n    await SecureStore.deleteItemAsync(TOKEN_KEY);\n  },\n\n  // Refresh token\n  async saveRefreshToken(token: string): Promise<void> {\n    await SecureStore.setItemAsync(REFRESH_TOKEN_KEY, token);\n  },\n\n  async getRefreshToken(): Promise<string | null> {\n    return SecureStore.getItemAsync(REFRESH_TOKEN_KEY);\n  },\n\n  async deleteRefreshToken(): Promise<void> {\n    await SecureStore.deleteItemAsync(REFRESH_TOKEN_KEY);\n  },\n\n  // User data\n  async saveUser(user: User): Promise<void> {\n    await SecureStore.setItemAsync(USER_KEY, JSON.stringify(user));\n  },\n\n  async getUser(): Promise<User | null> {\n    const userStr = await SecureStore.getItemAsync(USER_KEY);\n    return userStr ? JSON.parse(userStr) : null;\n  },\n\n  async deleteUser(): Promise<void> {\n    await SecureStore.deleteItemAsync(USER_KEY);\n  },\n\n  // Clear all auth data\n  async clearAuth(): Promise<void> {\n    await Promise.all([\n      SecureStore.deleteItemAsync(TOKEN_KEY),\n      SecureStore.deleteItemAsync(REFRESH_TOKEN_KEY),\n      SecureStore.deleteItemAsync(USER_KEY),\n    ]);\n  },\n};\n```\n\n## Auth Store with Secure Storage\n\n```typescript\nimport { create } from 'zustand';\nimport { secureStorage } from '@/lib/secureStorage';\n\ninterface User {\n  id: string;\n  email: string;\n  name: string;\n}\n\ninterface AuthState {\n  user: User | null;\n  token: string | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  initialize: () => Promise<void>;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => Promise<void>;\n}\n\nexport const useAuthStore = create<AuthState>((set) => ({\n  user: null,\n  token: null,\n  isAuthenticated: false,\n  isLoading: true,\n\n  initialize: async () => {\n    try {\n      const [token, user] = await Promise.all([\n        secureStorage.getToken(),\n        secureStorage.getUser(),\n      ]);\n\n      if (token && user) {\n        set({\n          token,\n          user,\n          isAuthenticated: true,\n          isLoading: false,\n        });\n      } else {\n        set({ isLoading: false });\n      }\n    } catch {\n      set({ isLoading: false });\n    }\n  },\n\n  login: async (email, password) => {\n    set({ isLoading: true });\n\n    const response = await fetch('/api/auth/login', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, password }),\n    });\n\n    if (!response.ok) {\n      set({ isLoading: false });\n      throw new Error('Login failed');\n    }\n\n    const { user, token, refreshToken } = await response.json();\n\n    await Promise.all([\n      secureStorage.saveToken(token),\n      secureStorage.saveRefreshToken(refreshToken),\n      secureStorage.saveUser(user),\n    ]);\n\n    set({\n      user,\n      token,\n      isAuthenticated: true,\n      isLoading: false,\n    });\n  },\n\n  logout: async () => {\n    await secureStorage.clearAuth();\n    set({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n    });\n  },\n}));\n```\n\n## Initialize Auth on App Start\n\n```typescript\n// app/_layout.tsx\nimport { useEffect } from 'react';\nimport { useAuthStore } from '@/store/authStore';\n\nexport default function RootLayout(): React.ReactElement {\n  const initialize = useAuthStore((state) => state.initialize);\n  const isLoading = useAuthStore((state) => state.isLoading);\n\n  useEffect(() => {\n    initialize();\n  }, [initialize]);\n\n  if (isLoading) {\n    return <LoadingScreen />;\n  }\n\n  return <Stack />;\n}\n```\n\n## Token Refresh Pattern\n\n```typescript\n// lib/api.ts\nimport axios from 'axios';\nimport { secureStorage } from './secureStorage';\n\nconst api = axios.create({\n  baseURL: process.env.EXPO_PUBLIC_API_URL,\n});\n\n// Request interceptor - add token\napi.interceptors.request.use(async (config) => {\n  const token = await secureStorage.getToken();\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor - refresh token on 401\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      try {\n        const refreshToken = await secureStorage.getRefreshToken();\n\n        if (!refreshToken) {\n          throw new Error('No refresh token');\n        }\n\n        const response = await axios.post('/api/auth/refresh', {\n          refreshToken,\n        });\n\n        const { token: newToken } = response.data;\n        await secureStorage.saveToken(newToken);\n\n        originalRequest.headers.Authorization = `Bearer ${newToken}`;\n        return api(originalRequest);\n      } catch {\n        await secureStorage.clearAuth();\n        // Navigate to login\n        return Promise.reject(error);\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n```\n\n## Biometric Authentication\n\n```typescript\nimport * as LocalAuthentication from 'expo-local-authentication';\n\nexport const biometricAuth = {\n  async isAvailable(): Promise<boolean> {\n    const compatible = await LocalAuthentication.hasHardwareAsync();\n    const enrolled = await LocalAuthentication.isEnrolledAsync();\n    return compatible && enrolled;\n  },\n\n  async authenticate(): Promise<boolean> {\n    const result = await LocalAuthentication.authenticateAsync({\n      promptMessage: 'Authenticate to continue',\n      fallbackLabel: 'Use passcode',\n    });\n\n    return result.success;\n  },\n};\n\n// Usage with secure storage\nasync function getSecureData(): Promise<string | null> {\n  const authenticated = await biometricAuth.authenticate();\n\n  if (!authenticated) {\n    throw new Error('Authentication failed');\n  }\n\n  return secureStorage.getToken();\n}\n```\n\n## Storage Options\n\n```typescript\n// SecureStore options\nawait SecureStore.setItemAsync('key', 'value', {\n  keychainAccessible: SecureStore.AFTER_FIRST_UNLOCK,\n});\n\n// Available options:\n// AFTER_FIRST_UNLOCK - accessible after device unlocked once\n// AFTER_FIRST_UNLOCK_THIS_DEVICE_ONLY - same, but not synced\n// ALWAYS - always accessible (less secure)\n// ALWAYS_THIS_DEVICE_ONLY - always accessible, not synced\n// WHEN_UNLOCKED - only when device is unlocked (default)\n// WHEN_UNLOCKED_THIS_DEVICE_ONLY - same, but not synced\n```\n\n## When to Use What\n\n```typescript\n// âœ… SecureStore - Sensitive data\nawait SecureStore.setItemAsync('authToken', token);\nawait SecureStore.setItemAsync('apiKey', key);\nawait SecureStore.setItemAsync('encryptionKey', key);\n\n// âŒ AsyncStorage - Non-sensitive data only\nawait AsyncStorage.setItem('theme', 'dark');\nawait AsyncStorage.setItem('onboardingComplete', 'true');\nawait AsyncStorage.setItem('lastViewedProduct', productId);\n```\n\n## Notes\n\n- Always use SecureStore for tokens and credentials\n- SecureStore has ~2KB limit per item\n- Data is encrypted using device keychain/keystore\n- Consider biometric authentication for extra security\n- Clear sensitive data on logout\n- Handle storage errors gracefully"
              },
              {
                "name": "tanstack-query-mobile",
                "description": "TanStack Query for React Native data fetching. Use when implementing server state.",
                "path": "tech-stacks/js/react-native/skills/tanstack-query-mobile/SKILL.md",
                "frontmatter": {
                  "name": "tanstack-query-mobile",
                  "description": "TanStack Query for React Native data fetching. Use when implementing server state."
                },
                "content": "# TanStack Query Mobile Skill\n\nThis skill covers TanStack Query for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Fetching data from APIs\n- Caching server data\n- Synchronizing server state\n- Implementing pagination\n- Optimistic updates\n\n## Core Principle\n\n**SERVER STATE** - TanStack Query manages server state. Use Zustand for client state.\n\n## Installation\n\n```bash\nnpm install @tanstack/react-query\n```\n\n## Setup\n\n```typescript\n// app/_layout.tsx\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 1000 * 60 * 5, // 5 minutes\n      gcTime: 1000 * 60 * 30,   // 30 minutes (formerly cacheTime)\n      retry: 2,\n      refetchOnWindowFocus: false, // Disable for mobile\n    },\n  },\n});\n\nexport default function RootLayout(): React.ReactElement {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <Stack />\n    </QueryClientProvider>\n  );\n}\n```\n\n## Basic Query\n\n```typescript\nimport { useQuery } from '@tanstack/react-query';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n}\n\nasync function fetchUser(id: string): Promise<User> {\n  const response = await fetch(`/api/users/${id}`);\n  if (!response.ok) throw new Error('Failed to fetch user');\n  return response.json();\n}\n\nfunction UserProfile({ userId }: { userId: string }): React.ReactElement {\n  const { data: user, isLoading, isError, error } = useQuery({\n    queryKey: ['user', userId],\n    queryFn: () => fetchUser(userId),\n  });\n\n  if (isLoading) {\n    return <ActivityIndicator />;\n  }\n\n  if (isError) {\n    return <Text>Error: {error.message}</Text>;\n  }\n\n  return (\n    <View>\n      <Text>{user.name}</Text>\n      <Text>{user.email}</Text>\n    </View>\n  );\n}\n```\n\n## Query with Authentication\n\n```typescript\nimport { useQuery } from '@tanstack/react-query';\nimport { useAuthStore } from '@/store/authStore';\n\nfunction useUserPosts() {\n  const token = useAuthStore((state) => state.token);\n\n  return useQuery({\n    queryKey: ['posts', 'user'],\n    queryFn: async () => {\n      const response = await fetch('/api/posts', {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      if (!response.ok) throw new Error('Failed to fetch posts');\n      return response.json();\n    },\n    enabled: !!token, // Only fetch when authenticated\n  });\n}\n```\n\n## Mutations\n\n```typescript\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\n\ninterface CreatePostInput {\n  title: string;\n  content: string;\n}\n\nfunction useCreatePost() {\n  const queryClient = useQueryClient();\n  const token = useAuthStore((state) => state.token);\n\n  return useMutation({\n    mutationFn: async (input: CreatePostInput) => {\n      const response = await fetch('/api/posts', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(input),\n      });\n      if (!response.ok) throw new Error('Failed to create post');\n      return response.json();\n    },\n    onSuccess: () => {\n      // Invalidate posts query to refetch\n      queryClient.invalidateQueries({ queryKey: ['posts'] });\n    },\n  });\n}\n\n// Usage\nfunction CreatePostForm(): React.ReactElement {\n  const { mutate, isPending } = useCreatePost();\n\n  const handleSubmit = (data: CreatePostInput) => {\n    mutate(data, {\n      onSuccess: () => {\n        // Navigate or show success\n      },\n      onError: (error) => {\n        // Show error toast\n      },\n    });\n  };\n\n  return (\n    <Button onPress={() => handleSubmit({ title, content })} disabled={isPending}>\n      {isPending ? 'Creating...' : 'Create Post'}\n    </Button>\n  );\n}\n```\n\n## Optimistic Updates\n\n```typescript\nfunction useLikePost() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: (postId: string) =>\n      fetch(`/api/posts/${postId}/like`, { method: 'POST' }),\n\n    onMutate: async (postId) => {\n      // Cancel outgoing refetches\n      await queryClient.cancelQueries({ queryKey: ['posts'] });\n\n      // Snapshot previous value\n      const previousPosts = queryClient.getQueryData(['posts']);\n\n      // Optimistically update\n      queryClient.setQueryData(['posts'], (old: Post[]) =>\n        old.map((post) =>\n          post.id === postId\n            ? { ...post, likes: post.likes + 1, isLiked: true }\n            : post\n        )\n      );\n\n      return { previousPosts };\n    },\n\n    onError: (err, postId, context) => {\n      // Rollback on error\n      queryClient.setQueryData(['posts'], context?.previousPosts);\n    },\n\n    onSettled: () => {\n      // Refetch after error or success\n      queryClient.invalidateQueries({ queryKey: ['posts'] });\n    },\n  });\n}\n```\n\n## Infinite Queries (Pagination)\n\n```typescript\nimport { useInfiniteQuery } from '@tanstack/react-query';\nimport { FlashList } from '@shopify/flash-list';\n\ninterface PostsResponse {\n  posts: Post[];\n  nextCursor: string | null;\n}\n\nfunction useInfinitePosts() {\n  return useInfiniteQuery({\n    queryKey: ['posts', 'infinite'],\n    queryFn: async ({ pageParam }) => {\n      const response = await fetch(\n        `/api/posts?cursor=${pageParam ?? ''}&limit=20`\n      );\n      return response.json() as Promise<PostsResponse>;\n    },\n    initialPageParam: null as string | null,\n    getNextPageParam: (lastPage) => lastPage.nextCursor,\n  });\n}\n\nfunction PostsList(): React.ReactElement {\n  const {\n    data,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useInfinitePosts();\n\n  const posts = data?.pages.flatMap((page) => page.posts) ?? [];\n\n  return (\n    <FlashList\n      data={posts}\n      renderItem={({ item }) => <PostCard post={item} />}\n      estimatedItemSize={100}\n      onEndReached={() => {\n        if (hasNextPage && !isFetchingNextPage) {\n          fetchNextPage();\n        }\n      }}\n      onEndReachedThreshold={0.5}\n      ListFooterComponent={\n        isFetchingNextPage ? <ActivityIndicator /> : null\n      }\n    />\n  );\n}\n```\n\n## Pull to Refresh\n\n```typescript\nimport { RefreshControl } from 'react-native';\n\nfunction PostsList(): React.ReactElement {\n  const { data, isLoading, refetch, isRefetching } = usePosts();\n\n  return (\n    <FlashList\n      data={data}\n      renderItem={renderItem}\n      estimatedItemSize={100}\n      refreshControl={\n        <RefreshControl\n          refreshing={isRefetching}\n          onRefresh={refetch}\n        />\n      }\n    />\n  );\n}\n```\n\n## Query Hooks Pattern\n\n```typescript\n// hooks/queries/usePosts.ts\nexport function usePosts() {\n  return useQuery({\n    queryKey: ['posts'],\n    queryFn: fetchPosts,\n  });\n}\n\nexport function usePost(id: string) {\n  return useQuery({\n    queryKey: ['posts', id],\n    queryFn: () => fetchPost(id),\n    enabled: !!id,\n  });\n}\n\n// hooks/mutations/usePostMutations.ts\nexport function useCreatePost() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: createPost,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['posts'] });\n    },\n  });\n}\n\nexport function useDeletePost() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: deletePost,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['posts'] });\n    },\n  });\n}\n```\n\n## API Client\n\n```typescript\n// lib/api.ts\nimport axios from 'axios';\nimport * as SecureStore from 'expo-secure-store';\n\nconst api = axios.create({\n  baseURL: process.env.EXPO_PUBLIC_API_URL,\n});\n\napi.interceptors.request.use(async (config) => {\n  const token = await SecureStore.getItemAsync('authToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\nexport default api;\n```\n\n## Notes\n\n- Use queryKey for cache identification\n- Invalidate queries after mutations\n- Use enabled for conditional fetching\n- Implement optimistic updates for better UX\n- Use infinite queries for pagination\n- Create custom hooks for reusability"
              },
              {
                "name": "zustand-mobile-patterns",
                "description": "Zustand state management for React Native. Use when implementing client-side state.",
                "path": "tech-stacks/js/react-native/skills/zustand-mobile-patterns/SKILL.md",
                "frontmatter": {
                  "name": "zustand-mobile-patterns",
                  "description": "Zustand state management for React Native. Use when implementing client-side state."
                },
                "content": "# Zustand Mobile Patterns Skill\n\nThis skill covers Zustand state management for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Managing global client state\n- Authentication state\n- User preferences/settings\n- Shopping cart\n- Theme management\n\n## Core Principle\n\n**SIMPLE AND MINIMAL** - Zustand is lightweight. Keep stores focused.\n\n## Installation\n\n```bash\nnpm install zustand\n```\n\n## Basic Store\n\n```typescript\nimport { create } from 'zustand';\n\ninterface CounterState {\n  count: number;\n  increment: () => void;\n  decrement: () => void;\n  reset: () => void;\n}\n\nexport const useCounterStore = create<CounterState>((set) => ({\n  count: 0,\n  increment: () => set((state) => ({ count: state.count + 1 })),\n  decrement: () => set((state) => ({ count: state.count - 1 })),\n  reset: () => set({ count: 0 }),\n}));\n\n// Usage\nfunction Counter(): React.ReactElement {\n  const count = useCounterStore((state) => state.count);\n  const increment = useCounterStore((state) => state.increment);\n\n  return (\n    <TouchableOpacity onPress={increment}>\n      <Text>Count: {count}</Text>\n    </TouchableOpacity>\n  );\n}\n```\n\n## Authentication Store\n\n```typescript\nimport { create } from 'zustand';\nimport * as SecureStore from 'expo-secure-store';\n\ninterface User {\n  id: string;\n  email: string;\n  name: string;\n}\n\ninterface AuthState {\n  user: User | null;\n  token: string | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => Promise<void>;\n  loadStoredAuth: () => Promise<void>;\n}\n\nexport const useAuthStore = create<AuthState>((set, get) => ({\n  user: null,\n  token: null,\n  isAuthenticated: false,\n  isLoading: true,\n\n  login: async (email, password) => {\n    set({ isLoading: true });\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password }),\n      });\n\n      if (!response.ok) throw new Error('Login failed');\n\n      const { user, token } = await response.json();\n\n      await SecureStore.setItemAsync('authToken', token);\n      await SecureStore.setItemAsync('user', JSON.stringify(user));\n\n      set({ user, token, isAuthenticated: true, isLoading: false });\n    } catch (error) {\n      set({ isLoading: false });\n      throw error;\n    }\n  },\n\n  logout: async () => {\n    await SecureStore.deleteItemAsync('authToken');\n    await SecureStore.deleteItemAsync('user');\n    set({ user: null, token: null, isAuthenticated: false });\n  },\n\n  loadStoredAuth: async () => {\n    try {\n      const token = await SecureStore.getItemAsync('authToken');\n      const userStr = await SecureStore.getItemAsync('user');\n\n      if (token && userStr) {\n        const user = JSON.parse(userStr);\n        set({ user, token, isAuthenticated: true, isLoading: false });\n      } else {\n        set({ isLoading: false });\n      }\n    } catch {\n      set({ isLoading: false });\n    }\n  },\n}));\n```\n\n## Settings Store with Persistence\n\n```typescript\nimport { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\ninterface SettingsState {\n  theme: 'light' | 'dark' | 'system';\n  notifications: boolean;\n  language: string;\n  setTheme: (theme: 'light' | 'dark' | 'system') => void;\n  setNotifications: (enabled: boolean) => void;\n  setLanguage: (language: string) => void;\n}\n\nexport const useSettingsStore = create<SettingsState>()(\n  persist(\n    (set) => ({\n      theme: 'system',\n      notifications: true,\n      language: 'en',\n      setTheme: (theme) => set({ theme }),\n      setNotifications: (notifications) => set({ notifications }),\n      setLanguage: (language) => set({ language }),\n    }),\n    {\n      name: 'settings-storage',\n      storage: createJSONStorage(() => AsyncStorage),\n    }\n  )\n);\n```\n\n## Cart Store\n\n```typescript\ninterface CartItem {\n  id: string;\n  name: string;\n  price: number;\n  quantity: number;\n}\n\ninterface CartState {\n  items: CartItem[];\n  addItem: (item: Omit<CartItem, 'quantity'>) => void;\n  removeItem: (id: string) => void;\n  updateQuantity: (id: string, quantity: number) => void;\n  clearCart: () => void;\n  total: () => number;\n}\n\nexport const useCartStore = create<CartState>((set, get) => ({\n  items: [],\n\n  addItem: (item) =>\n    set((state) => {\n      const existing = state.items.find((i) => i.id === item.id);\n      if (existing) {\n        return {\n          items: state.items.map((i) =>\n            i.id === item.id ? { ...i, quantity: i.quantity + 1 } : i\n          ),\n        };\n      }\n      return { items: [...state.items, { ...item, quantity: 1 }] };\n    }),\n\n  removeItem: (id) =>\n    set((state) => ({\n      items: state.items.filter((item) => item.id !== id),\n    })),\n\n  updateQuantity: (id, quantity) =>\n    set((state) => ({\n      items:\n        quantity <= 0\n          ? state.items.filter((item) => item.id !== id)\n          : state.items.map((item) =>\n              item.id === id ? { ...item, quantity } : item\n            ),\n    })),\n\n  clearCart: () => set({ items: [] }),\n\n  total: () => {\n    const state = get();\n    return state.items.reduce(\n      (sum, item) => sum + item.price * item.quantity,\n      0\n    );\n  },\n}));\n```\n\n## Selectors for Performance\n\n```typescript\n// âŒ Bad: Subscribes to entire store\nfunction Component(): React.ReactElement {\n  const store = useCartStore();\n  return <Text>{store.items.length}</Text>;\n}\n\n// âœ… Good: Only subscribes to items.length\nfunction Component(): React.ReactElement {\n  const itemCount = useCartStore((state) => state.items.length);\n  return <Text>{itemCount}</Text>;\n}\n\n// âœ… Good: Multiple selectors\nfunction CartSummary(): React.ReactElement {\n  const itemCount = useCartStore((state) => state.items.length);\n  const total = useCartStore((state) => state.total());\n\n  return (\n    <View>\n      <Text>Items: {itemCount}</Text>\n      <Text>Total: ${total.toFixed(2)}</Text>\n    </View>\n  );\n}\n```\n\n## Combining with React Query\n\n```typescript\n// Zustand for client state\nconst useAuthStore = create<AuthState>(...);\n\n// React Query for server state\nfunction useUser() {\n  const token = useAuthStore((state) => state.token);\n\n  return useQuery({\n    queryKey: ['user'],\n    queryFn: () => fetchUser(token),\n    enabled: !!token,\n  });\n}\n```\n\n## DevTools (Development)\n\n```typescript\nimport { create } from 'zustand';\nimport { devtools } from 'zustand/middleware';\n\nexport const useStore = create<StoreState>()(\n  devtools(\n    (set) => ({\n      // state and actions\n    }),\n    { name: 'MyStore' }\n  )\n);\n```\n\n## Testing Stores\n\n```typescript\nimport { useAuthStore } from '../authStore';\n\ndescribe('authStore', () => {\n  beforeEach(() => {\n    // Reset store before each test\n    useAuthStore.setState({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n      isLoading: false,\n    });\n  });\n\n  it('logs out correctly', () => {\n    useAuthStore.setState({\n      user: { id: '1', email: 'test@test.com', name: 'Test' },\n      isAuthenticated: true,\n    });\n\n    useAuthStore.getState().logout();\n\n    expect(useAuthStore.getState().user).toBeNull();\n    expect(useAuthStore.getState().isAuthenticated).toBe(false);\n  });\n});\n```\n\n## Notes\n\n- Use selectors to prevent unnecessary re-renders\n- Persist only necessary state\n- Use SecureStore for sensitive data\n- Keep stores focused on single concerns\n- Zustand works outside React components\n- Compatible with React 18 concurrent features"
              },
              {
                "name": "accessibility-testing",
                "description": "Accessibility testing with axe-core and Playwright. Use when implementing a11y tests.",
                "path": "tech-stacks/js/react/skills/accessibility-testing/SKILL.md",
                "frontmatter": {
                  "name": "accessibility-testing",
                  "description": "Accessibility testing with axe-core and Playwright. Use when implementing a11y tests."
                },
                "content": "# Accessibility Testing Skill\n\nThis skill covers accessibility testing patterns for React applications.\n\n## When to Use\n\nUse this skill when:\n- Testing WCAG compliance\n- Automating accessibility audits\n- Testing keyboard navigation\n- Validating screen reader compatibility\n\n## Core Principle\n\n**ACCESSIBLE BY DEFAULT** - Build accessibility into your testing pipeline. Catch issues before they reach users.\n\n## Testing Library + axe-core\n\n### Installation\n\n```bash\nnpm install -D @testing-library/jest-dom axe-core @axe-core/react vitest-axe\n```\n\n### Setup\n\n```typescript\n// src/test/setup.ts\nimport '@testing-library/jest-dom/vitest';\nimport 'vitest-axe/extend-expect';\n```\n\n### Component Accessibility Test\n\n```typescript\nimport { describe, it, expect } from 'vitest';\nimport { render } from '@testing-library/react';\nimport { axe, toHaveNoViolations } from 'vitest-axe';\nimport { Button } from '../Button';\n\nexpect.extend(toHaveNoViolations);\n\ndescribe('Button accessibility', () => {\n  it('has no accessibility violations', async () => {\n    const { container } = render(<Button>Click me</Button>);\n\n    const results = await axe(container);\n\n    expect(results).toHaveNoViolations();\n  });\n\n  it('is accessible when disabled', async () => {\n    const { container } = render(<Button disabled>Disabled</Button>);\n\n    const results = await axe(container);\n\n    expect(results).toHaveNoViolations();\n  });\n\n  it('is accessible with icon', async () => {\n    const { container } = render(\n      <Button aria-label=\"Add item\">\n        <PlusIcon />\n      </Button>\n    );\n\n    const results = await axe(container);\n\n    expect(results).toHaveNoViolations();\n  });\n});\n```\n\n### Form Accessibility Test\n\n```typescript\nimport { describe, it, expect } from 'vitest';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { axe, toHaveNoViolations } from 'vitest-axe';\nimport { LoginForm } from '../LoginForm';\n\nexpect.extend(toHaveNoViolations);\n\ndescribe('LoginForm accessibility', () => {\n  it('has no accessibility violations', async () => {\n    const { container } = render(<LoginForm onSubmit={vi.fn()} />);\n\n    const results = await axe(container);\n\n    expect(results).toHaveNoViolations();\n  });\n\n  it('has accessible form labels', () => {\n    render(<LoginForm onSubmit={vi.fn()} />);\n\n    expect(screen.getByLabelText(/email/i)).toBeInTheDocument();\n    expect(screen.getByLabelText(/password/i)).toBeInTheDocument();\n  });\n\n  it('shows accessible error messages', async () => {\n    const user = userEvent.setup();\n    render(<LoginForm onSubmit={vi.fn()} />);\n\n    await user.click(screen.getByRole('button', { name: /sign in/i }));\n\n    const emailInput = screen.getByLabelText(/email/i);\n    expect(emailInput).toHaveAccessibleDescription(/required/i);\n  });\n\n  it('manages focus on validation error', async () => {\n    const user = userEvent.setup();\n    render(<LoginForm onSubmit={vi.fn()} />);\n\n    await user.click(screen.getByRole('button', { name: /sign in/i }));\n\n    expect(screen.getByLabelText(/email/i)).toHaveFocus();\n  });\n});\n```\n\n## Playwright Accessibility Testing\n\n### Installation\n\n```bash\nnpm install -D @axe-core/playwright\n```\n\n### Basic Accessibility Test\n\n```typescript\nimport { test, expect } from '@playwright/test';\nimport AxeBuilder from '@axe-core/playwright';\n\ntest.describe('Accessibility', () => {\n  test('homepage has no violations', async ({ page }) => {\n    await page.goto('/');\n\n    const accessibilityScanResults = await new AxeBuilder({ page }).analyze();\n\n    expect(accessibilityScanResults.violations).toEqual([]);\n  });\n\n  test('login page has no violations', async ({ page }) => {\n    await page.goto('/login');\n\n    const accessibilityScanResults = await new AxeBuilder({ page }).analyze();\n\n    expect(accessibilityScanResults.violations).toEqual([]);\n  });\n});\n```\n\n### WCAG Level Testing\n\n```typescript\ntest('page meets WCAG 2.1 AA', async ({ page }) => {\n  await page.goto('/');\n\n  const accessibilityScanResults = await new AxeBuilder({ page })\n    .withTags(['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa'])\n    .analyze();\n\n  expect(accessibilityScanResults.violations).toEqual([]);\n});\n\ntest('page meets WCAG 2.1 AAA', async ({ page }) => {\n  await page.goto('/');\n\n  const accessibilityScanResults = await new AxeBuilder({ page })\n    .withTags(['wcag2a', 'wcag2aa', 'wcag2aaa', 'wcag21a', 'wcag21aa', 'wcag21aaa'])\n    .analyze();\n\n  expect(accessibilityScanResults.violations).toEqual([]);\n});\n```\n\n### Scoped Accessibility Test\n\n```typescript\ntest('main content is accessible', async ({ page }) => {\n  await page.goto('/');\n\n  const accessibilityScanResults = await new AxeBuilder({ page })\n    .include('main')\n    .analyze();\n\n  expect(accessibilityScanResults.violations).toEqual([]);\n});\n\ntest('modal is accessible', async ({ page }) => {\n  await page.goto('/');\n  await page.click('button[aria-label=\"Open settings\"]');\n\n  const accessibilityScanResults = await new AxeBuilder({ page })\n    .include('[role=\"dialog\"]')\n    .analyze();\n\n  expect(accessibilityScanResults.violations).toEqual([]);\n});\n```\n\n### Excluding Known Issues\n\n```typescript\ntest('page is accessible (excluding known issues)', async ({ page }) => {\n  await page.goto('/');\n\n  const accessibilityScanResults = await new AxeBuilder({ page })\n    .exclude('.third-party-widget')\n    .disableRules(['color-contrast']) // Temporarily disable if fixing\n    .analyze();\n\n  expect(accessibilityScanResults.violations).toEqual([]);\n});\n```\n\n## Keyboard Navigation Testing\n\n```typescript\ntest.describe('Keyboard navigation', () => {\n  test('can navigate form with keyboard', async ({ page }) => {\n    await page.goto('/login');\n\n    // Tab to email input\n    await page.keyboard.press('Tab');\n    await expect(page.getByLabel('Email')).toBeFocused();\n\n    // Tab to password input\n    await page.keyboard.press('Tab');\n    await expect(page.getByLabel('Password')).toBeFocused();\n\n    // Tab to submit button\n    await page.keyboard.press('Tab');\n    await expect(page.getByRole('button', { name: /sign in/i })).toBeFocused();\n  });\n\n  test('can navigate menu with arrow keys', async ({ page }) => {\n    await page.goto('/');\n\n    // Open menu\n    await page.getByRole('button', { name: /menu/i }).click();\n\n    // Navigate with arrow keys\n    await page.keyboard.press('ArrowDown');\n    await expect(page.getByRole('menuitem', { name: /home/i })).toBeFocused();\n\n    await page.keyboard.press('ArrowDown');\n    await expect(page.getByRole('menuitem', { name: /about/i })).toBeFocused();\n\n    // Select with Enter\n    await page.keyboard.press('Enter');\n    await expect(page).toHaveURL('/about');\n  });\n\n  test('escape closes modal', async ({ page }) => {\n    await page.goto('/');\n\n    // Open modal\n    await page.getByRole('button', { name: /open modal/i }).click();\n    await expect(page.getByRole('dialog')).toBeVisible();\n\n    // Close with Escape\n    await page.keyboard.press('Escape');\n    await expect(page.getByRole('dialog')).not.toBeVisible();\n  });\n\n  test('focus is trapped in modal', async ({ page }) => {\n    await page.goto('/');\n\n    await page.getByRole('button', { name: /open modal/i }).click();\n\n    const dialog = page.getByRole('dialog');\n    const focusableElements = dialog.locator(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n\n    const count = await focusableElements.count();\n\n    // Tab through all focusable elements\n    for (let i = 0; i < count + 1; i++) {\n      await page.keyboard.press('Tab');\n    }\n\n    // Focus should wrap back to first element in dialog\n    const firstFocusable = focusableElements.first();\n    await expect(firstFocusable).toBeFocused();\n  });\n});\n```\n\n## Screen Reader Testing\n\n### ARIA Attributes Test\n\n```typescript\ntest.describe('ARIA attributes', () => {\n  test('buttons have accessible names', async ({ page }) => {\n    await page.goto('/');\n\n    const buttons = page.getByRole('button');\n    const count = await buttons.count();\n\n    for (let i = 0; i < count; i++) {\n      const button = buttons.nth(i);\n      const name = await button.getAttribute('aria-label') ||\n                   await button.textContent();\n      expect(name).toBeTruthy();\n    }\n  });\n\n  test('images have alt text', async ({ page }) => {\n    await page.goto('/');\n\n    const images = page.getByRole('img');\n    const count = await images.count();\n\n    for (let i = 0; i < count; i++) {\n      const image = images.nth(i);\n      const alt = await image.getAttribute('alt');\n      expect(alt).toBeTruthy();\n    }\n  });\n\n  test('form fields have labels', async ({ page }) => {\n    await page.goto('/contact');\n\n    const inputs = page.locator('input:not([type=\"hidden\"])');\n    const count = await inputs.count();\n\n    for (let i = 0; i < count; i++) {\n      const input = inputs.nth(i);\n      const id = await input.getAttribute('id');\n      const ariaLabel = await input.getAttribute('aria-label');\n      const ariaLabelledBy = await input.getAttribute('aria-labelledby');\n\n      const hasLabel = id\n        ? await page.locator(`label[for=\"${id}\"]`).count() > 0\n        : false;\n\n      expect(hasLabel || ariaLabel || ariaLabelledBy).toBeTruthy();\n    }\n  });\n\n  test('live regions announce changes', async ({ page }) => {\n    await page.goto('/notifications');\n\n    // Check for live region\n    const liveRegion = page.locator('[aria-live]');\n    await expect(liveRegion).toBeVisible();\n\n    // Trigger notification\n    await page.getByRole('button', { name: /show notification/i }).click();\n\n    // Verify content in live region\n    await expect(liveRegion).toContainText('Notification');\n  });\n});\n```\n\n## Accessibility Fixture\n\n```typescript\n// tests/a11y/fixtures.ts\nimport { test as base, expect } from '@playwright/test';\nimport AxeBuilder from '@axe-core/playwright';\n\ninterface A11yFixtures {\n  makeAxeBuilder: () => AxeBuilder;\n}\n\nexport const test = base.extend<A11yFixtures>({\n  makeAxeBuilder: async ({ page }, use) => {\n    const makeAxeBuilder = () =>\n      new AxeBuilder({ page })\n        .withTags(['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa']);\n\n    await use(makeAxeBuilder);\n  },\n});\n\nexport { expect };\n\n// Usage\nimport { test, expect } from './fixtures';\n\ntest('page is accessible', async ({ page, makeAxeBuilder }) => {\n  await page.goto('/');\n\n  const accessibilityScanResults = await makeAxeBuilder().analyze();\n\n  expect(accessibilityScanResults.violations).toEqual([]);\n});\n```\n\n## Custom Matchers\n\n```typescript\n// tests/a11y/matchers.ts\nimport { expect } from '@playwright/test';\nimport AxeBuilder from '@axe-core/playwright';\n\nexpect.extend({\n  async toBeAccessible(page) {\n    const results = await new AxeBuilder({ page })\n      .withTags(['wcag2a', 'wcag2aa'])\n      .analyze();\n\n    const pass = results.violations.length === 0;\n\n    if (pass) {\n      return {\n        message: () => 'expected page to have accessibility violations',\n        pass: true,\n      };\n    }\n\n    const violations = results.violations\n      .map((v) => `${v.id}: ${v.description}\\n  ${v.nodes.map((n) => n.html).join('\\n  ')}`)\n      .join('\\n\\n');\n\n    return {\n      message: () => `expected page to be accessible:\\n\\n${violations}`,\n      pass: false,\n    };\n  },\n});\n\n// Usage\ntest('page is accessible', async ({ page }) => {\n  await page.goto('/');\n  await expect(page).toBeAccessible();\n});\n```\n\n## CI Integration\n\n```yaml\n# .github/workflows/a11y.yml\nname: Accessibility\n\non: [push, pull_request]\n\njobs:\n  accessibility:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Install Playwright browsers\n        run: npx playwright install --with-deps\n\n      - name: Run accessibility tests\n        run: npx playwright test tests/a11y/\n\n      - name: Upload report\n        uses: actions/upload-artifact@v4\n        if: always()\n        with:\n          name: a11y-report\n          path: playwright-report/\n```\n\n## Best Practices\n\n1. **Test early** - Run accessibility tests in development\n2. **Test all states** - Loading, error, empty, populated\n3. **Test interactions** - Keyboard, focus, hover states\n4. **Use semantic HTML** - Proper headings, landmarks, lists\n5. **Test color contrast** - Especially for text on images\n6. **Test with real devices** - Screen readers behave differently\n\n## WCAG Quick Reference\n\n| Level | Common Requirements |\n|-------|---------------------|\n| A | Alt text, form labels, keyboard access, no seizure triggers |\n| AA | Color contrast (4.5:1), resize text, focus visible, skip links |\n| AAA | Enhanced contrast (7:1), sign language, extended audio description |\n\n## Notes\n\n- axe-core catches ~57% of accessibility issues\n- Manual testing still required for full coverage\n- Test with actual assistive technology\n- Document known issues and remediation plans"
              },
              {
                "name": "atomic-design",
                "description": "Atomic Design component organization pattern for React applications. Use when creating new components or organizing component structures.",
                "path": "tech-stacks/js/react/skills/atomic-design/SKILL.md",
                "frontmatter": {
                  "name": "atomic-design",
                  "description": "Atomic Design component organization pattern for React applications. Use when creating new components or organizing component structures."
                },
                "content": "# Atomic Design Skill\n\nThis skill covers the Atomic Design pattern for organizing React components into a clear hierarchy that promotes reusability, consistency, and scalability.\n\n## When to Use\n\nUse this skill when:\n- Creating new components\n- Organizing existing component structures\n- Deciding where a component should live\n- Building component libraries\n- Setting up new React projects\n\n## Core Principle\n\n**COMPOSITION FROM SIMPLE TO COMPLEX** - Build complex interfaces by composing simple, well-tested building blocks.\n\n## The Five-Level Hierarchy\n\n| Level | Alternative Name | Description | Examples | State | Storybook |\n|-------|------------------|-------------|----------|-------|-----------|\n| **Atoms** | Elements | Basic building blocks | Button, Input, Label, Icon | Stateless | Yes |\n| **Molecules** | Widgets | Functional units combining atoms | SearchForm, FormField, Card | Minimal state | Yes |\n| **Organisms** | Modules | Complex UI sections | Header, Footer, LoginForm | Can have state | Yes |\n| **Templates** | Layouts | Page-level layout structures | MainLayout, AuthLayout | Layout state only | No |\n| **Pages** | - | Specific template instances | HomePage, DashboardPage | Full state | No |\n\n## Component Classification Decision\n\nUse this flowchart to determine the correct atomic level:\n\n| Question | Answer | Level |\n|----------|--------|-------|\n| Can it be broken down further? | No | **Atom** |\n| Does it combine atoms for a single purpose? | Yes | **Molecule** |\n| Is it a larger section with business logic? | Yes | **Organism** |\n| Does it define page structure without content? | Yes | **Template** |\n| Does it have real content and data connections? | Yes | **Page** |\n\n## Classification Checklists\n\n### Is it an Atom?\n\n- [ ] Cannot be broken down into smaller components\n- [ ] Single HTML element or very simple composition\n- [ ] No business logic\n- [ ] Stateless or only UI state (hover, focus)\n- [ ] No dependencies on other custom components\n\n### Is it a Molecule?\n\n- [ ] Combines 2+ atoms\n- [ ] Single functional purpose\n- [ ] Minimal internal state\n- [ ] No data fetching\n- [ ] No connection to global state\n\n### Is it an Organism?\n\n- [ ] Larger interface section\n- [ ] May have business logic\n- [ ] May connect to stores\n- [ ] Relatively standalone\n- [ ] Could be used across multiple pages\n\n### Is it a Template?\n\n- [ ] Defines page structure\n- [ ] Uses slots/children for content\n- [ ] No real data\n- [ ] Handles layout concerns (responsive, spacing)\n\n### Is it a Page?\n\n- [ ] Uses a template\n- [ ] Has real content\n- [ ] Connects to data sources\n- [ ] Handles routing/navigation\n\n## Code Examples\n\n### Atom Example\n\n```typescript\n// src/components/atoms/Button/Button.tsx\nimport { forwardRef } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant: 'primary' | 'secondary' | 'danger' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n  loading?: boolean;\n}\n\nexport const Button = forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ variant, size = 'md', loading, className, children, disabled, ...props }, ref) => {\n    return (\n      <button\n        ref={ref}\n        type=\"button\"\n        className={cn(\n          'inline-flex items-center justify-center rounded-md font-medium transition-colors',\n          'focus-visible:outline-none focus-visible:ring-2',\n          {\n            'bg-blue-600 text-white hover:bg-blue-700': variant === 'primary',\n            'bg-gray-200 text-gray-900 hover:bg-gray-300': variant === 'secondary',\n            'bg-red-600 text-white hover:bg-red-700': variant === 'danger',\n            'bg-transparent hover:bg-gray-100': variant === 'ghost',\n            'px-3 py-1.5 text-sm': size === 'sm',\n            'px-4 py-2 text-base': size === 'md',\n            'px-6 py-3 text-lg': size === 'lg',\n            'opacity-50 cursor-not-allowed': disabled || loading,\n          },\n          className\n        )}\n        disabled={disabled || loading}\n        {...props}\n      >\n        {loading && <span className=\"mr-2 h-4 w-4 animate-spin\">...</span>}\n        {children}\n      </button>\n    );\n  }\n);\nButton.displayName = 'Button';\n```\n\n### Molecule Example\n\n```typescript\n// src/components/molecules/FormField/FormField.tsx\nimport { Label, Input, Text } from '@/components/atoms';\n\ninterface FormFieldProps {\n  label: string;\n  name: string;\n  type?: string;\n  placeholder?: string;\n  error?: string;\n  required?: boolean;\n  value?: string;\n  onChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport function FormField({\n  label,\n  name,\n  type = 'text',\n  placeholder,\n  error,\n  required,\n  value,\n  onChange,\n}: FormFieldProps): React.ReactElement {\n  return (\n    <div className=\"space-y-1\">\n      <Label htmlFor={name}>\n        {label}\n        {required && <span className=\"text-red-500 ml-1\">*</span>}\n      </Label>\n      <Input\n        id={name}\n        name={name}\n        type={type}\n        placeholder={placeholder}\n        value={value}\n        onChange={onChange}\n        aria-invalid={!!error}\n        aria-describedby={error ? `${name}-error` : undefined}\n      />\n      {error && (\n        <Text id={`${name}-error`} className=\"text-red-500 text-sm\">\n          {error}\n        </Text>\n      )}\n    </div>\n  );\n}\n```\n\n### Organism Example\n\n```typescript\n// src/components/organisms/LoginForm/LoginForm.tsx\nimport { useState } from 'react';\nimport { Button } from '@/components/atoms';\nimport { FormField } from '@/components/molecules';\n\ninterface LoginFormProps {\n  onSubmit: (email: string, password: string) => Promise<void>;\n  onForgotPassword?: () => void;\n}\n\nexport function LoginForm({ onSubmit, onForgotPassword }: LoginFormProps): React.ReactElement {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const validate = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    if (!email) newErrors.email = 'Email is required';\n    if (!password) newErrors.password = 'Password is required';\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent): Promise<void> => {\n    e.preventDefault();\n    if (!validate()) return;\n\n    setLoading(true);\n    try {\n      await onSubmit(email, password);\n    } catch {\n      setErrors({ form: 'Invalid credentials' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4 max-w-md\">\n      <FormField\n        label=\"Email\"\n        name=\"email\"\n        type=\"email\"\n        placeholder=\"you@example.com\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        error={errors.email}\n        required\n      />\n      <FormField\n        label=\"Password\"\n        name=\"password\"\n        type=\"password\"\n        placeholder=\"********\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n        error={errors.password}\n        required\n      />\n      {errors.form && <div className=\"text-red-500 text-sm\">{errors.form}</div>}\n      <Button variant=\"primary\" type=\"submit\" loading={loading} className=\"w-full\">\n        Sign In\n      </Button>\n      {onForgotPassword && (\n        <button\n          type=\"button\"\n          onClick={onForgotPassword}\n          className=\"text-sm text-blue-600 hover:underline\"\n        >\n          Forgot password?\n        </button>\n      )}\n    </form>\n  );\n}\n```\n\n### Template Example\n\n```typescript\n// src/components/templates/AuthLayout/AuthLayout.tsx\ninterface AuthLayoutProps {\n  children: React.ReactNode;\n  title: string;\n  subtitle?: string;\n}\n\nexport function AuthLayout({ children, title, subtitle }: AuthLayoutProps): React.ReactElement {\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <div className=\"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow\">\n        <div className=\"text-center\">\n          <h1 className=\"text-3xl font-bold\">{title}</h1>\n          {subtitle && <p className=\"mt-2 text-gray-600\">{subtitle}</p>}\n        </div>\n        {children}\n      </div>\n    </div>\n  );\n}\n```\n\n### Page Example (Vite SPA)\n\n```typescript\n// src/pages/Login/LoginPage.tsx\nimport { useNavigate } from 'react-router-dom';\nimport { AuthLayout } from '@/components/templates';\nimport { LoginForm } from '@/components/organisms';\nimport { useAuth } from '@/hooks/useAuth';\n\nexport function LoginPage(): React.ReactElement {\n  const navigate = useNavigate();\n  const { login } = useAuth();\n\n  const handleLogin = async (email: string, password: string) => {\n    await login(email, password);\n    navigate('/dashboard');\n  };\n\n  return (\n    <AuthLayout title=\"Welcome Back\" subtitle=\"Sign in to your account\">\n      <LoginForm onSubmit={handleLogin} onForgotPassword={() => navigate('/forgot-password')} />\n    </AuthLayout>\n  );\n}\n```\n\n## Storybook Story Templates\n\n### Atom Story Template\n\n```typescript\n// Button.stories.tsx\nimport type { Meta, StoryObj } from '@storybook/react';\nimport { Button } from './Button';\n\nconst meta: Meta<typeof Button> = {\n  title: 'Atoms/Button',\n  component: Button,\n  tags: ['autodocs'],\n  parameters: {\n    layout: 'centered',\n  },\n  argTypes: {\n    variant: {\n      control: 'select',\n      options: ['primary', 'secondary', 'danger', 'ghost'],\n      description: 'The visual style of the button',\n    },\n    size: {\n      control: 'select',\n      options: ['sm', 'md', 'lg'],\n      description: 'The size of the button',\n    },\n    loading: {\n      control: 'boolean',\n      description: 'Shows a loading spinner',\n    },\n    disabled: {\n      control: 'boolean',\n      description: 'Disables the button',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof Button>;\n\nexport const Primary: Story = {\n  args: {\n    variant: 'primary',\n    children: 'Primary Button',\n  },\n};\n\nexport const Secondary: Story = {\n  args: {\n    variant: 'secondary',\n    children: 'Secondary Button',\n  },\n};\n\nexport const Loading: Story = {\n  args: {\n    variant: 'primary',\n    children: 'Saving...',\n    loading: true,\n  },\n};\n\nexport const AllVariants: Story = {\n  render: () => (\n    <div className=\"flex gap-4\">\n      <Button variant=\"primary\">Primary</Button>\n      <Button variant=\"secondary\">Secondary</Button>\n      <Button variant=\"danger\">Danger</Button>\n      <Button variant=\"ghost\">Ghost</Button>\n    </div>\n  ),\n};\n```\n\n### Molecule Story Template\n\n```typescript\n// FormField.stories.tsx\nimport type { Meta, StoryObj } from '@storybook/react';\nimport { FormField } from './FormField';\n\nconst meta: Meta<typeof FormField> = {\n  title: 'Molecules/FormField',\n  component: FormField,\n  tags: ['autodocs'],\n  parameters: {\n    layout: 'centered',\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof FormField>;\n\nexport const Default: Story = {\n  args: {\n    label: 'Email',\n    name: 'email',\n    placeholder: 'you@example.com',\n  },\n};\n\nexport const WithError: Story = {\n  args: {\n    label: 'Email',\n    name: 'email',\n    error: 'Email is required',\n    required: true,\n  },\n};\n\nexport const Required: Story = {\n  args: {\n    label: 'Password',\n    name: 'password',\n    type: 'password',\n    required: true,\n  },\n};\n```\n\n### Organism Story Template\n\n```typescript\n// LoginForm.stories.tsx\nimport type { Meta, StoryObj } from '@storybook/react';\nimport { LoginForm } from './LoginForm';\n\nconst meta: Meta<typeof LoginForm> = {\n  title: 'Organisms/LoginForm',\n  component: LoginForm,\n  tags: ['autodocs'],\n  parameters: {\n    layout: 'centered',\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof LoginForm>;\n\nexport const Default: Story = {\n  args: {\n    onSubmit: async (email, password) => {\n      console.log('Login:', { email, password });\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n    },\n    onForgotPassword: () => console.log('Forgot password clicked'),\n  },\n};\n\nexport const WithoutForgotPassword: Story = {\n  args: {\n    onSubmit: async () => {\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n    },\n  },\n};\n```\n\n## Naming Conventions\n\n```\natoms/\n  Button/           # PascalCase - noun (what it is)\n  Input/\n  Icon/\n\nmolecules/\n  SearchForm/       # PascalCase - descriptive compound name\n  InputGroup/\n  FormField/\n\norganisms/\n  Header/           # PascalCase - section name\n  LoginForm/\n  ProductCard/\n\ntemplates/\n  MainLayout/       # PascalCase - always end with \"Layout\"\n  DashboardLayout/\n  AuthLayout/\n\npages/\n  HomePage/         # PascalCase - always end with \"Page\"\n  DashboardPage/\n  ProfilePage/\n```\n\n## Import Strategy\n\n```typescript\n// Within same level - use relative imports\nimport { Button } from '../Button';\n\n// Across levels - use path alias\nimport { Button, Input } from '@/components/atoms';\nimport { SearchForm, FormField } from '@/components/molecules';\nimport { Header, LoginForm } from '@/components/organisms';\nimport { MainLayout, AuthLayout } from '@/components/templates';\n\n// From top-level barrel (when importing many components)\nimport { Button, Input, SearchForm, Header } from '@/components';\n```\n\n### Path Alias Configuration\n\n**Vite (`vite.config.ts`):**\n```typescript\nimport { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\nimport path from 'path';\n\nexport default defineConfig({\n  plugins: [react()],\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n    },\n  },\n});\n```\n\n**Next.js (`tsconfig.json`):**\n```json\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"@/*\": [\"./src/*\"]\n    }\n  }\n}\n```\n\n## Barrel Export Patterns\n\n### Atom Level Barrel Export\n\n```typescript\n// src/components/atoms/index.ts\nexport { Button } from './Button';\nexport { Input } from './Input';\nexport { Label } from './Label';\nexport { Icon } from './Icon';\nexport { Text } from './Text';\nexport { Image } from './Image';\nexport { Badge } from './Badge';\nexport { Avatar } from './Avatar';\nexport { Spinner } from './Spinner';\n\n// Re-export types\nexport type { ButtonProps } from './Button';\nexport type { InputProps } from './Input';\n```\n\n### Molecule Level Barrel Export\n\n```typescript\n// src/components/molecules/index.ts\nexport { SearchForm } from './SearchForm';\nexport { InputGroup } from './InputGroup';\nexport { Card } from './Card';\nexport { FormField } from './FormField';\nexport { MenuItem } from './MenuItem';\n\nexport type { FormFieldProps } from './FormField';\n```\n\n### Organism Level Barrel Export\n\n```typescript\n// src/components/organisms/index.ts\nexport { Header } from './Header';\nexport { Footer } from './Footer';\nexport { Navigation } from './Navigation';\nexport { Sidebar } from './Sidebar';\nexport { LoginForm } from './LoginForm';\n\nexport type { LoginFormProps } from './LoginForm';\n```\n\n### Template Level Barrel Export\n\n```typescript\n// src/components/templates/index.ts\nexport { MainLayout } from './MainLayout';\nexport { DashboardLayout } from './DashboardLayout';\nexport { AuthLayout } from './AuthLayout';\n```\n\n### Main Barrel Export\n\n```typescript\n// src/components/index.ts\nexport * from './atoms';\nexport * from './molecules';\nexport * from './organisms';\nexport * from './templates';\n```\n\n## PRD Override Configuration\n\nProjects can opt out of Atomic Design by specifying in their PRD:\n\n```yaml\n# .molcajete/prd/tech-stack.yaml or tech-stack.md frontmatter\ntechStack:\n  framework: react\n  componentOrganization: atomic    # Default - Atomic Design\n  # componentOrganization: flat    # Simple flat structure\n  # componentOrganization: feature-based  # Feature modules\n```\n\n### Alternative: Flat Structure\n\nWhen `componentOrganization: flat`:\n```\nsrc/\nâ”œâ”€â”€ components/\nâ”‚   â”œâ”€â”€ Button/\nâ”‚   â”œâ”€â”€ Input/\nâ”‚   â”œâ”€â”€ Header/\nâ”‚   â”œâ”€â”€ LoginForm/\nâ”‚   â””â”€â”€ ...\n```\n\n### Alternative: Feature-Based Structure\n\nWhen `componentOrganization: feature-based`:\n```\nsrc/\nâ”œâ”€â”€ features/\nâ”‚   â”œâ”€â”€ auth/\nâ”‚   â”‚   â”œâ”€â”€ components/\nâ”‚   â”‚   â”œâ”€â”€ hooks/\nâ”‚   â”‚   â””â”€â”€ stores/\nâ”‚   â”œâ”€â”€ dashboard/\nâ”‚   â””â”€â”€ profile/\nâ”œâ”€â”€ shared/\nâ”‚   â””â”€â”€ components/\nâ”‚       â”œâ”€â”€ Button/\nâ”‚       â””â”€â”€ Input/\n```\n\n## Best Practices\n\n1. **Start with atoms** - Build basic building blocks first\n2. **Compose upward** - Molecules use atoms, organisms use molecules\n3. **Keep atoms stateless** - UI state only (hover, focus)\n4. **Elevate state** - Keep state at organism level or higher\n5. **Type everything** - Strict TypeScript interfaces for all props\n6. **Write stories** - Every atom, molecule, and organism has Storybook stories\n7. **Test in isolation** - Each component testable independently\n8. **Use forwardRef** - For focusable/interactive atoms\n9. **Set displayName** - For DevTools debugging\n\n## Notes\n\n- Atomic Design is the default for new projects\n- Templates and Pages do not get Storybook stories\n- Brad Frost's original article: https://bradfrost.com/blog/post/atomic-web-design/\n- shadcn/ui components can be classified as atoms or molecules"
              },
              {
                "name": "bundle-optimization",
                "description": "Bundle size optimization including tree shaking, code splitting, and dependency analysis. Use when reducing bundle size.",
                "path": "tech-stacks/js/react/skills/bundle-optimization/SKILL.md",
                "frontmatter": {
                  "name": "bundle-optimization",
                  "description": "Bundle size optimization including tree shaking, code splitting, and dependency analysis. Use when reducing bundle size."
                },
                "content": "# Bundle Optimization Skill\n\nThis skill covers techniques for optimizing JavaScript bundle size.\n\n## When to Use\n\nUse this skill when:\n- Reducing initial load time\n- Analyzing bundle contents\n- Implementing code splitting\n- Replacing heavy dependencies\n\n## Core Principle\n\n**SHIP LESS JAVASCRIPT** - Every kilobyte counts. Remove what you don't need, defer what you don't need immediately.\n\n## Bundle Analysis\n\n### Vite Bundle Analyzer\n\n```bash\nnpm install -D rollup-plugin-visualizer\n```\n\n```typescript\n// vite.config.ts\nimport { visualizer } from 'rollup-plugin-visualizer';\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    visualizer({\n      filename: 'stats.html',\n      open: true,\n      gzipSize: true,\n      brotliSize: true,\n    }),\n  ],\n});\n```\n\n### Next.js Bundle Analyzer\n\n```bash\nnpm install -D @next/bundle-analyzer\n```\n\n```typescript\n// next.config.ts\nimport bundleAnalyzer from '@next/bundle-analyzer';\n\nconst withBundleAnalyzer = bundleAnalyzer({\n  enabled: process.env.ANALYZE === 'true',\n});\n\nexport default withBundleAnalyzer(config);\n```\n\n```bash\nANALYZE=true npm run build\n```\n\n### Source Map Explorer\n\n```bash\nnpx source-map-explorer dist/**/*.js\n```\n\n## Code Splitting\n\n### Route-Based Splitting\n\n```typescript\nimport { lazy, Suspense } from 'react';\n\nconst Dashboard = lazy(() => import('./pages/Dashboard'));\nconst Settings = lazy(() => import('./pages/Settings'));\n\nfunction App(): React.ReactElement {\n  return (\n    <Suspense fallback={<Loading />}>\n      <Routes>\n        <Route path=\"/dashboard\" element={<Dashboard />} />\n        <Route path=\"/settings\" element={<Settings />} />\n      </Routes>\n    </Suspense>\n  );\n}\n```\n\n### Component-Level Splitting\n\n```typescript\nconst HeavyChart = lazy(() => import('./components/HeavyChart'));\n\nfunction Dashboard(): React.ReactElement {\n  const [showChart, setShowChart] = useState(false);\n\n  return (\n    <div>\n      <button onClick={() => setShowChart(true)}>Show Chart</button>\n      {showChart && (\n        <Suspense fallback={<ChartSkeleton />}>\n          <HeavyChart />\n        </Suspense>\n      )}\n    </div>\n  );\n}\n```\n\n### Manual Chunks (Vite)\n\n```typescript\n// vite.config.ts\nbuild: {\n  rollupOptions: {\n    output: {\n      manualChunks: {\n        'vendor-react': ['react', 'react-dom', 'react-router-dom'],\n        'vendor-ui': ['@radix-ui/react-dialog', '@radix-ui/react-dropdown-menu'],\n        'vendor-charts': ['recharts'],\n      },\n    },\n  },\n},\n```\n\n## Tree Shaking\n\n### Import Specific Functions\n\n```typescript\n// âŒ Imports entire library\nimport _ from 'lodash';\n_.debounce(fn, 300);\n\n// âœ… Imports only what's needed\nimport debounce from 'lodash/debounce';\ndebounce(fn, 300);\n\n// âœ… Or use lodash-es for better tree shaking\nimport { debounce } from 'lodash-es';\n```\n\n### Icon Libraries\n\n```typescript\n// âŒ Imports all icons\nimport * as Icons from 'lucide-react';\n\n// âœ… Imports specific icons\nimport { Home, Settings, User } from 'lucide-react';\n```\n\n### Date Libraries\n\n```typescript\n// âŒ moment.js (330KB)\nimport moment from 'moment';\n\n// âœ… date-fns (tree-shakeable)\nimport { format, parseISO } from 'date-fns';\n\n// âœ… dayjs (2KB)\nimport dayjs from 'dayjs';\n```\n\n## Heavy Dependency Alternatives\n\n| Heavy Library | Size | Alternative | Size |\n|--------------|------|-------------|------|\n| moment.js | 330KB | date-fns | ~20KB |\n| lodash | 530KB | lodash-es (specific) | ~5KB |\n| axios | 40KB | fetch (native) | 0KB |\n| uuid | 18KB | crypto.randomUUID() | 0KB |\n| classnames | 1.8KB | clsx | 0.3KB |\n\n## Dynamic Imports\n\n### Conditional Loading\n\n```typescript\nasync function loadPolyfill(): Promise<void> {\n  if (!('IntersectionObserver' in window)) {\n    await import('intersection-observer');\n  }\n}\n\nasync function loadAnalytics(): Promise<void> {\n  if (process.env.NODE_ENV === 'production') {\n    const { initAnalytics } = await import('./analytics');\n    initAnalytics();\n  }\n}\n```\n\n### Feature-Based Loading\n\n```typescript\nconst PDFViewer = lazy(() => import('./PDFViewer'));\nconst VideoPlayer = lazy(() => import('./VideoPlayer'));\n\nfunction MediaViewer({ type, src }: MediaViewerProps): React.ReactElement {\n  if (type === 'pdf') {\n    return (\n      <Suspense fallback={<Loading />}>\n        <PDFViewer src={src} />\n      </Suspense>\n    );\n  }\n\n  if (type === 'video') {\n    return (\n      <Suspense fallback={<Loading />}>\n        <VideoPlayer src={src} />\n      </Suspense>\n    );\n  }\n\n  return <img src={src} alt=\"\" />;\n}\n```\n\n## Prefetching\n\n### Link Prefetching\n\n```typescript\n// React Router\nimport { Link } from 'react-router-dom';\n\nfunction Nav(): React.ReactElement {\n  const prefetchDashboard = (): void => {\n    import('./pages/Dashboard');\n  };\n\n  return (\n    <Link to=\"/dashboard\" onMouseEnter={prefetchDashboard}>\n      Dashboard\n    </Link>\n  );\n}\n```\n\n### Next.js Prefetching\n\n```typescript\nimport Link from 'next/link';\n\n// Automatic prefetching (default)\n<Link href=\"/dashboard\">Dashboard</Link>\n\n// Disable prefetching\n<Link href=\"/dashboard\" prefetch={false}>Dashboard</Link>\n```\n\n## CSS Optimization\n\n### Tailwind CSS Purging\n\n```typescript\n// tailwind.config.ts\nexport default {\n  content: ['./src/**/*.{js,ts,jsx,tsx}'],\n  // Tailwind automatically purges unused styles in production\n};\n```\n\n### CSS-in-JS Extraction\n\nUse build-time extraction for CSS-in-JS:\n\n```typescript\n// Use vanilla-extract for zero-runtime CSS\nimport { style } from '@vanilla-extract/css';\n\nexport const button = style({\n  backgroundColor: 'blue',\n  color: 'white',\n});\n```\n\n## Image Optimization\n\n```typescript\n// Use next/image for automatic optimization\nimport Image from 'next/image';\n\n<Image\n  src=\"/hero.jpg\"\n  alt=\"Hero\"\n  width={1200}\n  height={600}\n  priority // For LCP images\n  placeholder=\"blur\"\n  blurDataURL=\"...\"\n/>\n\n// Or use vite-imagetools\nimport heroImage from './hero.jpg?w=1200&format=webp';\n```\n\n## Monitoring Bundle Size\n\n### Size Limits\n\n```bash\nnpm install -D size-limit @size-limit/preset-app\n```\n\n```json\n// package.json\n{\n  \"size-limit\": [\n    {\n      \"path\": \"dist/**/*.js\",\n      \"limit\": \"200 KB\"\n    }\n  ],\n  \"scripts\": {\n    \"size\": \"size-limit\",\n    \"size-check\": \"size-limit --ci\"\n  }\n}\n```\n\n### CI Integration\n\n```yaml\n# .github/workflows/size.yml\n- name: Check bundle size\n  run: npm run size-check\n```\n\n## Bundle Size Targets\n\n| Metric | Target | Good | Critical |\n|--------|--------|------|----------|\n| Initial JS | < 100KB | < 150KB | > 200KB |\n| Per-route JS | < 50KB | < 100KB | > 150KB |\n| Total JS | < 500KB | < 750KB | > 1MB |\n\n## Optimization Checklist\n\n- [ ] Analyze bundle with visualizer\n- [ ] Implement route-based code splitting\n- [ ] Import specific functions (tree shaking)\n- [ ] Replace heavy dependencies\n- [ ] Lazy load heavy components\n- [ ] Optimize images\n- [ ] Set up size limits in CI\n- [ ] Monitor bundle size over time\n\n## Notes\n\n- Always analyze before optimizing\n- Focus on initial load first\n- Use lazy loading for below-the-fold content\n- Consider server components (Next.js) to reduce client JS"
              },
              {
                "name": "component-patterns",
                "description": "React component composition patterns including compound components and render props. Use when designing reusable components.",
                "path": "tech-stacks/js/react/skills/component-patterns/SKILL.md",
                "frontmatter": {
                  "name": "component-patterns",
                  "description": "React component composition patterns including compound components and render props. Use when designing reusable components."
                },
                "content": "# React Component Patterns Skill\n\nThis skill covers component composition patterns for building reusable, flexible components.\n\n## When to Use\n\nUse this skill when:\n- Building component libraries\n- Creating flexible, reusable components\n- Designing component APIs\n- Implementing complex UI patterns\n\n## Core Principle\n\n**COMPOSITION OVER CONFIGURATION** - Build flexible components through composition rather than prop overload.\n\n## Basic Component Pattern\n\n### Props Interface\n\n```typescript\ninterface ButtonProps {\n  variant?: 'primary' | 'secondary' | 'danger';\n  size?: 'sm' | 'md' | 'lg';\n  disabled?: boolean;\n  loading?: boolean;\n  onClick?: () => void;\n  children: React.ReactNode;\n}\n\nexport function Button({\n  variant = 'primary',\n  size = 'md',\n  disabled = false,\n  loading = false,\n  onClick,\n  children,\n}: ButtonProps): React.ReactElement {\n  return (\n    <button\n      type=\"button\"\n      className={cn(buttonVariants({ variant, size }))}\n      disabled={disabled || loading}\n      onClick={onClick}\n    >\n      {loading && <Spinner className=\"mr-2\" />}\n      {children}\n    </button>\n  );\n}\n```\n\n## Compound Components\n\nComponents that work together to form a cohesive unit.\n\n### Context-Based Compound Components\n\n```typescript\nimport { createContext, useContext, useState } from 'react';\n\ninterface TabsContextValue {\n  activeTab: string;\n  setActiveTab: (tab: string) => void;\n}\n\nconst TabsContext = createContext<TabsContextValue | null>(null);\n\nfunction useTabsContext(): TabsContextValue {\n  const context = useContext(TabsContext);\n  if (!context) {\n    throw new Error('Tabs components must be used within Tabs');\n  }\n  return context;\n}\n\n// Root Component\ninterface TabsProps {\n  defaultValue: string;\n  children: React.ReactNode;\n}\n\nfunction Tabs({ defaultValue, children }: TabsProps): React.ReactElement {\n  const [activeTab, setActiveTab] = useState(defaultValue);\n\n  return (\n    <TabsContext.Provider value={{ activeTab, setActiveTab }}>\n      <div className=\"tabs\">{children}</div>\n    </TabsContext.Provider>\n  );\n}\n\n// Tab List\nfunction TabList({ children }: { children: React.ReactNode }): React.ReactElement {\n  return <div className=\"tab-list\" role=\"tablist\">{children}</div>;\n}\n\n// Tab Trigger\ninterface TabTriggerProps {\n  value: string;\n  children: React.ReactNode;\n}\n\nfunction TabTrigger({ value, children }: TabTriggerProps): React.ReactElement {\n  const { activeTab, setActiveTab } = useTabsContext();\n\n  return (\n    <button\n      type=\"button\"\n      role=\"tab\"\n      aria-selected={activeTab === value}\n      className={cn('tab-trigger', activeTab === value && 'active')}\n      onClick={() => setActiveTab(value)}\n    >\n      {children}\n    </button>\n  );\n}\n\n// Tab Content\ninterface TabContentProps {\n  value: string;\n  children: React.ReactNode;\n}\n\nfunction TabContent({ value, children }: TabContentProps): React.ReactElement | null {\n  const { activeTab } = useTabsContext();\n\n  if (activeTab !== value) return null;\n\n  return (\n    <div role=\"tabpanel\" className=\"tab-content\">\n      {children}\n    </div>\n  );\n}\n\n// Attach sub-components\nTabs.List = TabList;\nTabs.Trigger = TabTrigger;\nTabs.Content = TabContent;\n\nexport { Tabs };\n\n// Usage\nfunction App(): React.ReactElement {\n  return (\n    <Tabs defaultValue=\"tab1\">\n      <Tabs.List>\n        <Tabs.Trigger value=\"tab1\">Tab 1</Tabs.Trigger>\n        <Tabs.Trigger value=\"tab2\">Tab 2</Tabs.Trigger>\n      </Tabs.List>\n      <Tabs.Content value=\"tab1\">Content 1</Tabs.Content>\n      <Tabs.Content value=\"tab2\">Content 2</Tabs.Content>\n    </Tabs>\n  );\n}\n```\n\n## Render Props Pattern\n\nPass a function as children or prop to control rendering.\n\n```typescript\ninterface MousePosition {\n  x: number;\n  y: number;\n}\n\ninterface MouseTrackerProps {\n  children: (position: MousePosition) => React.ReactElement;\n}\n\nfunction MouseTracker({ children }: MouseTrackerProps): React.ReactElement {\n  const [position, setPosition] = useState<MousePosition>({ x: 0, y: 0 });\n\n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent): void => {\n      setPosition({ x: e.clientX, y: e.clientY });\n    };\n\n    window.addEventListener('mousemove', handleMouseMove);\n    return () => window.removeEventListener('mousemove', handleMouseMove);\n  }, []);\n\n  return children(position);\n}\n\n// Usage\nfunction App(): React.ReactElement {\n  return (\n    <MouseTracker>\n      {({ x, y }) => (\n        <div>\n          Mouse position: {x}, {y}\n        </div>\n      )}\n    </MouseTracker>\n  );\n}\n```\n\n## Slot Pattern\n\nAllow users to replace parts of a component.\n\n```typescript\ninterface CardProps {\n  header?: React.ReactNode;\n  footer?: React.ReactNode;\n  children: React.ReactNode;\n}\n\nfunction Card({ header, footer, children }: CardProps): React.ReactElement {\n  return (\n    <div className=\"card\">\n      {header && <div className=\"card-header\">{header}</div>}\n      <div className=\"card-body\">{children}</div>\n      {footer && <div className=\"card-footer\">{footer}</div>}\n    </div>\n  );\n}\n\n// Usage\nfunction App(): React.ReactElement {\n  return (\n    <Card\n      header={<h2>Card Title</h2>}\n      footer={<Button>Action</Button>}\n    >\n      Card content goes here\n    </Card>\n  );\n}\n```\n\n## Polymorphic Components\n\nComponents that can render as different elements.\n\n```typescript\ntype PolymorphicProps<E extends React.ElementType> = {\n  as?: E;\n} & React.ComponentPropsWithoutRef<E>;\n\nfunction Box<E extends React.ElementType = 'div'>({\n  as,\n  children,\n  ...props\n}: PolymorphicProps<E>): React.ReactElement {\n  const Component = as ?? 'div';\n  return <Component {...props}>{children}</Component>;\n}\n\n// Usage\nfunction App(): React.ReactElement {\n  return (\n    <>\n      <Box>Default div</Box>\n      <Box as=\"span\">As span</Box>\n      <Box as=\"a\" href=\"/about\">As link</Box>\n      <Box as=\"button\" onClick={() => {}}>As button</Box>\n    </>\n  );\n}\n```\n\n## Controlled vs Uncontrolled\n\n### Uncontrolled Component\n\n```typescript\ninterface UncontrolledInputProps {\n  defaultValue?: string;\n  onChange?: (value: string) => void;\n}\n\nfunction UncontrolledInput({ defaultValue, onChange }: UncontrolledInputProps): React.ReactElement {\n  const [value, setValue] = useState(defaultValue ?? '');\n\n  const handleChange = (e: ChangeEvent<HTMLInputElement>): void => {\n    setValue(e.target.value);\n    onChange?.(e.target.value);\n  };\n\n  return <input value={value} onChange={handleChange} />;\n}\n```\n\n### Controlled Component\n\n```typescript\ninterface ControlledInputProps {\n  value: string;\n  onChange: (value: string) => void;\n}\n\nfunction ControlledInput({ value, onChange }: ControlledInputProps): React.ReactElement {\n  return (\n    <input\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n    />\n  );\n}\n```\n\n### Controlled + Uncontrolled (Flexible)\n\n```typescript\ninterface FlexibleInputProps {\n  value?: string;\n  defaultValue?: string;\n  onChange?: (value: string) => void;\n}\n\nfunction FlexibleInput({\n  value: controlledValue,\n  defaultValue,\n  onChange,\n}: FlexibleInputProps): React.ReactElement {\n  const [internalValue, setInternalValue] = useState(defaultValue ?? '');\n  const isControlled = controlledValue !== undefined;\n  const value = isControlled ? controlledValue : internalValue;\n\n  const handleChange = (e: ChangeEvent<HTMLInputElement>): void => {\n    if (!isControlled) {\n      setInternalValue(e.target.value);\n    }\n    onChange?.(e.target.value);\n  };\n\n  return <input value={value} onChange={handleChange} />;\n}\n```\n\n## forwardRef Pattern\n\nForward refs to inner elements.\n\n```typescript\nimport { forwardRef } from 'react';\n\ninterface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  label: string;\n  error?: string;\n}\n\nconst Input = forwardRef<HTMLInputElement, InputProps>(\n  ({ label, error, ...props }, ref) => {\n    return (\n      <div className=\"input-wrapper\">\n        <label>{label}</label>\n        <input ref={ref} {...props} />\n        {error && <span className=\"error\">{error}</span>}\n      </div>\n    );\n  }\n);\nInput.displayName = 'Input';\n\nexport { Input };\n```\n\n## Best Practices\n\n1. **Prefer composition** - Use children and slots over many props\n2. **Use TypeScript** - Strict types for all props\n3. **Provide defaults** - Sensible default values\n4. **Forward refs** - For focusable/interactive elements\n5. **Display name** - Set for DevTools debugging\n6. **Keep components small** - Single responsibility\n7. **Colocate related components** - Compound components together\n\n## Pattern Selection Guide\n\n| Pattern | Use When |\n|---------|----------|\n| Props | Simple, few variations |\n| Compound | Related components working together |\n| Render Props | Need to expose internal state |\n| Slots | Customizable sections |\n| Polymorphic | Flexible element type |\n| Controlled | Parent manages state |\n| Uncontrolled | Self-contained state |\n\n## Notes\n\n- Start simple, add patterns as needed\n- Compound components are great for component libraries\n- Use Radix UI primitives for accessible base components"
              },
              {
                "name": "component-testing",
                "description": "React component testing with Vitest and Testing Library. Use when writing unit tests for components.",
                "path": "tech-stacks/js/react/skills/component-testing/SKILL.md",
                "frontmatter": {
                  "name": "component-testing",
                  "description": "React component testing with Vitest and Testing Library. Use when writing unit tests for components."
                },
                "content": "# Component Testing Skill\n\nThis skill covers React component testing patterns with Vitest and Testing Library.\n\n## When to Use\n\nUse this skill when:\n- Writing unit tests for React components\n- Testing user interactions\n- Verifying component behavior\n- Testing hooks and context\n\n## Core Principle\n\n**TEST USER BEHAVIOR** - Test what users see and do, not implementation details. Your tests should not break when you refactor.\n\n## Setup\n\n### Installation\n\n```bash\nnpm install -D vitest @testing-library/react @testing-library/jest-dom @testing-library/user-event jsdom\n```\n\n### Configuration\n\n```typescript\n// vitest.config.ts\nimport { defineConfig } from 'vitest/config';\nimport react from '@vitejs/plugin-react';\nimport path from 'path';\n\nexport default defineConfig({\n  plugins: [react()],\n  test: {\n    globals: true,\n    environment: 'jsdom',\n    setupFiles: ['./src/test/setup.ts'],\n    include: ['src/**/__tests__/**/*.test.{ts,tsx}'],\n    coverage: {\n      provider: 'v8',\n      thresholds: {\n        lines: 80,\n        functions: 80,\n        branches: 80,\n        statements: 80,\n      },\n    },\n  },\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n    },\n  },\n});\n```\n\n```typescript\n// src/test/setup.ts\nimport '@testing-library/jest-dom/vitest';\n```\n\n## Basic Component Test\n\n```typescript\nimport { describe, it, expect } from 'vitest';\nimport { render, screen } from '@testing-library/react';\nimport { Button } from '../Button';\n\ndescribe('Button', () => {\n  it('renders children correctly', () => {\n    render(<Button>Click me</Button>);\n\n    expect(screen.getByRole('button')).toHaveTextContent('Click me');\n  });\n\n  it('applies variant class', () => {\n    render(<Button variant=\"primary\">Primary</Button>);\n\n    expect(screen.getByRole('button')).toHaveClass('bg-primary');\n  });\n\n  it('is disabled when disabled prop is true', () => {\n    render(<Button disabled>Disabled</Button>);\n\n    expect(screen.getByRole('button')).toBeDisabled();\n  });\n});\n```\n\n## User Interaction Tests\n\n```typescript\nimport { describe, it, expect, vi } from 'vitest';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { Counter } from '../Counter';\n\ndescribe('Counter', () => {\n  it('increments count when button clicked', async () => {\n    const user = userEvent.setup();\n    render(<Counter />);\n\n    const button = screen.getByRole('button', { name: /increment/i });\n    await user.click(button);\n\n    expect(screen.getByText('Count: 1')).toBeInTheDocument();\n  });\n\n  it('calls onChange with new count', async () => {\n    const user = userEvent.setup();\n    const handleChange = vi.fn();\n    render(<Counter onChange={handleChange} />);\n\n    await user.click(screen.getByRole('button', { name: /increment/i }));\n\n    expect(handleChange).toHaveBeenCalledWith(1);\n  });\n});\n```\n\n## Form Testing\n\n```typescript\nimport { describe, it, expect, vi } from 'vitest';\nimport { render, screen, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { LoginForm } from '../LoginForm';\n\ndescribe('LoginForm', () => {\n  it('submits form with email and password', async () => {\n    const user = userEvent.setup();\n    const handleSubmit = vi.fn();\n    render(<LoginForm onSubmit={handleSubmit} />);\n\n    await user.type(screen.getByLabelText(/email/i), 'test@example.com');\n    await user.type(screen.getByLabelText(/password/i), 'password123');\n    await user.click(screen.getByRole('button', { name: /sign in/i }));\n\n    await waitFor(() => {\n      expect(handleSubmit).toHaveBeenCalledWith({\n        email: 'test@example.com',\n        password: 'password123',\n      });\n    });\n  });\n\n  it('shows validation error for invalid email', async () => {\n    const user = userEvent.setup();\n    render(<LoginForm onSubmit={vi.fn()} />);\n\n    await user.type(screen.getByLabelText(/email/i), 'invalid-email');\n    await user.click(screen.getByRole('button', { name: /sign in/i }));\n\n    expect(await screen.findByText(/invalid email/i)).toBeInTheDocument();\n  });\n\n  it('disables submit button while loading', async () => {\n    render(<LoginForm onSubmit={vi.fn()} isLoading />);\n\n    expect(screen.getByRole('button', { name: /sign in/i })).toBeDisabled();\n  });\n});\n```\n\n## Query Priority\n\nUse queries in this order of preference:\n\n```typescript\n// 1. Accessible queries (best)\nscreen.getByRole('button', { name: /submit/i });\nscreen.getByRole('textbox', { name: /email/i });\nscreen.getByRole('heading', { level: 1 });\n\n// 2. Semantic queries\nscreen.getByLabelText(/email/i);\nscreen.getByPlaceholderText(/enter email/i);\nscreen.getByText(/welcome/i);\nscreen.getByAltText(/profile picture/i);\n\n// 3. Test ID (last resort)\nscreen.getByTestId('custom-element');\n```\n\n## Async Testing\n\n```typescript\nimport { describe, it, expect, vi } from 'vitest';\nimport { render, screen, waitFor } from '@testing-library/react';\nimport { UserProfile } from '../UserProfile';\n\n// Mock fetch\nvi.mock('../api', () => ({\n  fetchUser: vi.fn(() =>\n    Promise.resolve({ id: '1', name: 'John Doe' })\n  ),\n}));\n\ndescribe('UserProfile', () => {\n  it('displays loading state initially', () => {\n    render(<UserProfile userId=\"1\" />);\n\n    expect(screen.getByText(/loading/i)).toBeInTheDocument();\n  });\n\n  it('displays user data after loading', async () => {\n    render(<UserProfile userId=\"1\" />);\n\n    expect(await screen.findByText('John Doe')).toBeInTheDocument();\n    expect(screen.queryByText(/loading/i)).not.toBeInTheDocument();\n  });\n\n  it('displays error when fetch fails', async () => {\n    const { fetchUser } = await import('../api');\n    vi.mocked(fetchUser).mockRejectedValueOnce(new Error('Failed'));\n\n    render(<UserProfile userId=\"1\" />);\n\n    expect(await screen.findByText(/error/i)).toBeInTheDocument();\n  });\n});\n```\n\n## Testing with Context\n\n```typescript\nimport { describe, it, expect } from 'vitest';\nimport { render, screen } from '@testing-library/react';\nimport { ThemeProvider } from '../ThemeContext';\nimport { ThemedButton } from '../ThemedButton';\n\nfunction renderWithTheme(ui: React.ReactElement, theme = 'light') {\n  return render(\n    <ThemeProvider defaultTheme={theme}>\n      {ui}\n    </ThemeProvider>\n  );\n}\n\ndescribe('ThemedButton', () => {\n  it('renders with light theme styles', () => {\n    renderWithTheme(<ThemedButton>Click</ThemedButton>, 'light');\n\n    expect(screen.getByRole('button')).toHaveClass('bg-white');\n  });\n\n  it('renders with dark theme styles', () => {\n    renderWithTheme(<ThemedButton>Click</ThemedButton>, 'dark');\n\n    expect(screen.getByRole('button')).toHaveClass('bg-gray-900');\n  });\n});\n```\n\n## Testing Custom Hooks\n\n```typescript\nimport { describe, it, expect } from 'vitest';\nimport { renderHook, act } from '@testing-library/react';\nimport { useCounter } from '../useCounter';\n\ndescribe('useCounter', () => {\n  it('initializes with default value', () => {\n    const { result } = renderHook(() => useCounter());\n\n    expect(result.current.count).toBe(0);\n  });\n\n  it('initializes with provided value', () => {\n    const { result } = renderHook(() => useCounter(10));\n\n    expect(result.current.count).toBe(10);\n  });\n\n  it('increments count', () => {\n    const { result } = renderHook(() => useCounter());\n\n    act(() => {\n      result.current.increment();\n    });\n\n    expect(result.current.count).toBe(1);\n  });\n\n  it('resets to initial value', () => {\n    const { result } = renderHook(() => useCounter(5));\n\n    act(() => {\n      result.current.increment();\n      result.current.increment();\n      result.current.reset();\n    });\n\n    expect(result.current.count).toBe(5);\n  });\n});\n```\n\n## Mocking\n\n### Mocking Modules\n\n```typescript\nimport { vi } from 'vitest';\n\n// Mock entire module\nvi.mock('../api');\n\n// Mock with implementation\nvi.mock('../utils', () => ({\n  formatDate: vi.fn((date) => '2024-01-01'),\n}));\n```\n\n### Mocking Functions\n\n```typescript\nconst mockFn = vi.fn();\nmockFn.mockReturnValue('default');\nmockFn.mockReturnValueOnce('first call');\nmockFn.mockResolvedValue({ data: 'async result' });\nmockFn.mockRejectedValue(new Error('Failed'));\n```\n\n## Test Structure\n\n### File Organization\n\n```\nsrc/\nâ”œâ”€â”€ components/\nâ”‚   â”œâ”€â”€ Button/\nâ”‚   â”‚   â”œâ”€â”€ Button.tsx\nâ”‚   â”‚   â”œâ”€â”€ index.ts\nâ”‚   â”‚   â””â”€â”€ __tests__/\nâ”‚   â”‚       â””â”€â”€ Button.test.tsx\n```\n\n### Test Naming\n\n```typescript\n// Use verb-first naming\nit('renders children correctly', ...);\nit('calls onClick when clicked', ...);\nit('throws error for invalid input', ...);\nit('displays loading state initially', ...);\n```\n\n## Best Practices\n\n1. **Test behavior, not implementation** - Focus on what users experience\n2. **Use accessible queries** - getByRole, getByLabelText first\n3. **Avoid testing styles** - Test classes/attributes, not computed styles\n4. **Keep tests focused** - One behavior per test\n5. **Use userEvent over fireEvent** - More realistic interactions\n6. **Wait for async operations** - Use findBy, waitFor\n\n## Notes\n\n- Testing Library encourages accessible components\n- Avoid snapshot tests for components (too brittle)\n- Mock at the boundary (API, not internal functions)\n- Tests should give confidence to refactor"
              },
              {
                "name": "hooks-best-practices",
                "description": "React Hooks patterns including custom hooks and dependency management. Use when implementing component logic.",
                "path": "tech-stacks/js/react/skills/hooks-best-practices/SKILL.md",
                "frontmatter": {
                  "name": "hooks-best-practices",
                  "description": "React Hooks patterns including custom hooks and dependency management. Use when implementing component logic."
                },
                "content": "# React Hooks Best Practices Skill\n\nThis skill covers React Hooks patterns, custom hooks, and dependency management.\n\n## When to Use\n\nUse this skill when:\n- Writing custom hooks\n- Managing component state\n- Handling side effects\n- Optimizing with memoization\n\n## Core Principle\n\n**EXTRACT AND REUSE** - Extract reusable logic into custom hooks. Keep components focused on rendering.\n\n## Custom Hook Patterns\n\n### Basic Custom Hook\n\n```typescript\nimport { useState, useCallback } from 'react';\n\ninterface UseToggleReturn {\n  value: boolean;\n  toggle: () => void;\n  setTrue: () => void;\n  setFalse: () => void;\n}\n\nexport function useToggle(initialValue = false): UseToggleReturn {\n  const [value, setValue] = useState(initialValue);\n\n  const toggle = useCallback(() => setValue((v) => !v), []);\n  const setTrue = useCallback(() => setValue(true), []);\n  const setFalse = useCallback(() => setValue(false), []);\n\n  return { value, toggle, setTrue, setFalse };\n}\n```\n\n### Data Fetching Hook\n\n```typescript\nimport { useState, useEffect } from 'react';\n\ninterface UseQueryResult<T> {\n  data: T | null;\n  error: Error | null;\n  isLoading: boolean;\n  refetch: () => void;\n}\n\nexport function useQuery<T>(\n  queryFn: () => Promise<T>,\n  deps: unknown[] = []\n): UseQueryResult<T> {\n  const [data, setData] = useState<T | null>(null);\n  const [error, setError] = useState<Error | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const fetchData = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const result = await queryFn();\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Unknown error'));\n    } finally {\n      setIsLoading(false);\n    }\n  }, deps);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return { data, error, isLoading, refetch: fetchData };\n}\n```\n\n### Form Hook\n\n```typescript\nimport { useState, useCallback, ChangeEvent, FormEvent } from 'react';\n\ninterface UseFormReturn<T> {\n  values: T;\n  errors: Partial<Record<keyof T, string>>;\n  handleChange: (e: ChangeEvent<HTMLInputElement>) => void;\n  handleSubmit: (onSubmit: (values: T) => void) => (e: FormEvent) => void;\n  reset: () => void;\n  setFieldValue: (field: keyof T, value: T[keyof T]) => void;\n}\n\nexport function useForm<T extends Record<string, unknown>>(\n  initialValues: T\n): UseFormReturn<T> {\n  const [values, setValues] = useState<T>(initialValues);\n  const [errors, setErrors] = useState<Partial<Record<keyof T, string>>>({});\n\n  const handleChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    const { name, value, type, checked } = e.target;\n    setValues((prev) => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value,\n    }));\n  }, []);\n\n  const handleSubmit = useCallback(\n    (onSubmit: (values: T) => void) => (e: FormEvent) => {\n      e.preventDefault();\n      onSubmit(values);\n    },\n    [values]\n  );\n\n  const reset = useCallback(() => {\n    setValues(initialValues);\n    setErrors({});\n  }, [initialValues]);\n\n  const setFieldValue = useCallback((field: keyof T, value: T[keyof T]) => {\n    setValues((prev) => ({ ...prev, [field]: value }));\n  }, []);\n\n  return { values, errors, handleChange, handleSubmit, reset, setFieldValue };\n}\n```\n\n## Dependency Array Management\n\n### Correct Dependencies\n\n```typescript\n// âœ… All dependencies included\nuseEffect(() => {\n  fetchUser(userId);\n}, [userId]);\n\n// âœ… Stable callback with useCallback\nconst handleClick = useCallback(() => {\n  onClick(id);\n}, [onClick, id]);\n\nuseEffect(() => {\n  document.addEventListener('click', handleClick);\n  return () => document.removeEventListener('click', handleClick);\n}, [handleClick]);\n```\n\n### Common Mistakes\n\n```typescript\n// âŒ Missing dependency\nuseEffect(() => {\n  fetchUser(userId); // userId not in deps\n}, []);\n\n// âŒ Object/array causing infinite loops\nuseEffect(() => {\n  doSomething(options); // options is new object each render\n}, [options]);\n\n// âœ… Fix: Use useMemo or extract values\nconst { page, limit } = options;\nuseEffect(() => {\n  doSomething({ page, limit });\n}, [page, limit]);\n```\n\n### Stable References\n\n```typescript\n// âŒ Function recreated each render\nfunction Component({ onSave }: { onSave: (data: Data) => void }): React.ReactElement {\n  useEffect(() => {\n    const handler = () => onSave(data);\n    window.addEventListener('beforeunload', handler);\n    return () => window.removeEventListener('beforeunload', handler);\n  }, [onSave, data]); // onSave might change\n}\n\n// âœ… Use useCallback in parent or useRef\nfunction Component({ onSave }: { onSave: (data: Data) => void }): React.ReactElement {\n  const onSaveRef = useRef(onSave);\n  onSaveRef.current = onSave;\n\n  useEffect(() => {\n    const handler = () => onSaveRef.current(data);\n    window.addEventListener('beforeunload', handler);\n    return () => window.removeEventListener('beforeunload', handler);\n  }, [data]); // Stable reference\n}\n```\n\n## Effect Cleanup\n\n### Subscription Cleanup\n\n```typescript\nuseEffect(() => {\n  const subscription = eventEmitter.subscribe(handleEvent);\n\n  return () => {\n    subscription.unsubscribe();\n  };\n}, [handleEvent]);\n```\n\n### Abort Controller for Fetch\n\n```typescript\nuseEffect(() => {\n  const controller = new AbortController();\n\n  async function fetchData(): Promise<void> {\n    try {\n      const response = await fetch(url, { signal: controller.signal });\n      const data = await response.json();\n      setData(data);\n    } catch (err) {\n      if (err instanceof Error && err.name !== 'AbortError') {\n        setError(err);\n      }\n    }\n  }\n\n  fetchData();\n\n  return () => controller.abort();\n}, [url]);\n```\n\n### Timer Cleanup\n\n```typescript\nuseEffect(() => {\n  const timerId = setInterval(() => {\n    setCount((c) => c + 1);\n  }, 1000);\n\n  return () => clearInterval(timerId);\n}, []);\n```\n\n## Memoization Patterns\n\n### useMemo for Expensive Computations\n\n```typescript\nconst sortedItems = useMemo(() => {\n  return items.slice().sort((a, b) => a.name.localeCompare(b.name));\n}, [items]);\n\nconst filteredData = useMemo(() => {\n  return data.filter((item) => item.status === filter);\n}, [data, filter]);\n```\n\n### useCallback for Stable Functions\n\n```typescript\n// âœ… Stable function for child components\nconst handleSelect = useCallback((id: string) => {\n  setSelectedId(id);\n  onSelect?.(id);\n}, [onSelect]);\n\n// âœ… Stable function for effects\nconst fetchData = useCallback(async () => {\n  const result = await api.getData(params);\n  setData(result);\n}, [params]);\n```\n\n### When NOT to Memoize\n\n```typescript\n// âŒ Premature optimization\nconst name = useMemo(() => `${firstName} ${lastName}`, [firstName, lastName]);\n\n// âœ… Simple computation - no memoization needed\nconst name = `${firstName} ${lastName}`;\n\n// âŒ Memoizing primitives\nconst isActive = useMemo(() => status === 'active', [status]);\n\n// âœ… Direct comparison\nconst isActive = status === 'active';\n```\n\n## Hook Rules\n\n1. **Only call at top level** - Not in loops, conditions, or nested functions\n2. **Only call in React functions** - Components or custom hooks\n3. **Start with 'use'** - Custom hook naming convention\n4. **Keep hooks pure** - Same inputs = same outputs\n\n```typescript\n// âŒ Conditional hook call\nfunction Component({ shouldFetch }: { shouldFetch: boolean }): React.ReactElement {\n  if (shouldFetch) {\n    const data = useQuery(fetchData); // Error!\n  }\n}\n\n// âœ… Always call, conditionally use\nfunction Component({ shouldFetch }: { shouldFetch: boolean }): React.ReactElement {\n  const data = useQuery(fetchData, { enabled: shouldFetch });\n}\n```\n\n## Testing Custom Hooks\n\n```typescript\nimport { renderHook, act } from '@testing-library/react';\nimport { useToggle } from '../useToggle';\n\ndescribe('useToggle', () => {\n  it('initializes with false by default', () => {\n    const { result } = renderHook(() => useToggle());\n\n    expect(result.current.value).toBe(false);\n  });\n\n  it('toggles value', () => {\n    const { result } = renderHook(() => useToggle());\n\n    act(() => {\n      result.current.toggle();\n    });\n\n    expect(result.current.value).toBe(true);\n  });\n});\n```\n\n## Best Practices Summary\n\n1. **Extract reusable logic** - Create custom hooks\n2. **Include all dependencies** - Let ESLint guide you\n3. **Use stable references** - useCallback, useMemo, useRef\n4. **Clean up effects** - Return cleanup function\n5. **Avoid premature memoization** - Profile first\n6. **Name with 'use' prefix** - Convention for custom hooks\n7. **Keep hooks focused** - Single responsibility\n\n## Notes\n\n- Use TanStack Query for data fetching (better than custom hooks)\n- Use Zustand/Jotai for global state (instead of Context + hooks)\n- Consider React 19's use() hook for promises and context"
              },
              {
                "name": "jotai-patterns",
                "description": "Jotai atomic state management patterns. Use when implementing fine-grained reactive state.",
                "path": "tech-stacks/js/react/skills/jotai-patterns/SKILL.md",
                "frontmatter": {
                  "name": "jotai-patterns",
                  "description": "Jotai atomic state management patterns. Use when implementing fine-grained reactive state."
                },
                "content": "# Jotai Patterns Skill\n\nThis skill covers Jotai atomic state management for React applications.\n\n## When to Use\n\nUse this skill when:\n- Need fine-grained reactivity\n- Building complex state dependencies\n- Want provider-less global state\n- Prefer atomic/bottom-up state design\n\n## Core Principle\n\n**ATOMS ARE PRIMITIVES** - Build complex state from simple atoms. Components subscribe only to atoms they use.\n\n## Basic Atoms\n\n```typescript\nimport { atom, useAtom, useAtomValue, useSetAtom } from 'jotai';\n\n// Primitive atom\nconst countAtom = atom(0);\n\n// Usage\nfunction Counter(): React.ReactElement {\n  const [count, setCount] = useAtom(countAtom);\n\n  return (\n    <button onClick={() => setCount((c) => c + 1)}>\n      Count: {count}\n    </button>\n  );\n}\n\n// Read-only usage\nfunction CountDisplay(): React.ReactElement {\n  const count = useAtomValue(countAtom);\n  return <span>Count: {count}</span>;\n}\n\n// Write-only usage\nfunction IncrementButton(): React.ReactElement {\n  const setCount = useSetAtom(countAtom);\n  return <button onClick={() => setCount((c) => c + 1)}>+</button>;\n}\n```\n\n## Derived Atoms\n\n### Read-Only Derived\n\n```typescript\nconst countAtom = atom(0);\n\n// Derived atom (read-only)\nconst doubleCountAtom = atom((get) => get(countAtom) * 2);\n\nconst isEvenAtom = atom((get) => get(countAtom) % 2 === 0);\n\n// Multiple dependencies\nconst usersAtom = atom<User[]>([]);\nconst filterAtom = atom('');\n\nconst filteredUsersAtom = atom((get) => {\n  const users = get(usersAtom);\n  const filter = get(filterAtom).toLowerCase();\n\n  if (!filter) return users;\n  return users.filter((user) =>\n    user.name.toLowerCase().includes(filter)\n  );\n});\n```\n\n### Read-Write Derived\n\n```typescript\nconst celsiusAtom = atom(0);\n\n// Read-write derived atom\nconst fahrenheitAtom = atom(\n  (get) => get(celsiusAtom) * (9 / 5) + 32,\n  (get, set, newFahrenheit: number) => {\n    set(celsiusAtom, (newFahrenheit - 32) * (5 / 9));\n  }\n);\n\n// Usage - both read and write work\nfunction TemperatureConverter(): React.ReactElement {\n  const [celsius, setCelsius] = useAtom(celsiusAtom);\n  const [fahrenheit, setFahrenheit] = useAtom(fahrenheitAtom);\n\n  return (\n    <div>\n      <input\n        type=\"number\"\n        value={celsius}\n        onChange={(e) => setCelsius(Number(e.target.value))}\n      />\n      Â°C =\n      <input\n        type=\"number\"\n        value={fahrenheit}\n        onChange={(e) => setFahrenheit(Number(e.target.value))}\n      />\n      Â°F\n    </div>\n  );\n}\n```\n\n## Async Atoms\n\n```typescript\n// Async read atom\nconst userAtom = atom(async () => {\n  const response = await fetch('/api/user');\n  return response.json() as Promise<User>;\n});\n\n// Usage with Suspense\nfunction UserProfile(): React.ReactElement {\n  const user = useAtomValue(userAtom);\n  return <h1>{user.name}</h1>;\n}\n\nfunction App(): React.ReactElement {\n  return (\n    <Suspense fallback={<Loading />}>\n      <UserProfile />\n    </Suspense>\n  );\n}\n\n// Async with dependencies\nconst userIdAtom = atom('1');\n\nconst userDataAtom = atom(async (get) => {\n  const userId = get(userIdAtom);\n  const response = await fetch(`/api/users/${userId}`);\n  return response.json() as Promise<User>;\n});\n```\n\n## Write-Only Atoms (Actions)\n\n```typescript\nconst todosAtom = atom<Todo[]>([]);\n\n// Write-only atom for actions\nconst addTodoAtom = atom(null, (get, set, text: string) => {\n  const newTodo: Todo = {\n    id: crypto.randomUUID(),\n    text,\n    completed: false,\n  };\n  set(todosAtom, [...get(todosAtom), newTodo]);\n});\n\nconst toggleTodoAtom = atom(null, (get, set, id: string) => {\n  set(\n    todosAtom,\n    get(todosAtom).map((todo) =>\n      todo.id === id ? { ...todo, completed: !todo.completed } : todo\n    )\n  );\n});\n\nconst removeTodoAtom = atom(null, (get, set, id: string) => {\n  set(\n    todosAtom,\n    get(todosAtom).filter((todo) => todo.id !== id)\n  );\n});\n\n// Usage\nfunction AddTodo(): React.ReactElement {\n  const addTodo = useSetAtom(addTodoAtom);\n  const [text, setText] = useState('');\n\n  const handleSubmit = (e: FormEvent): void => {\n    e.preventDefault();\n    if (text.trim()) {\n      addTodo(text);\n      setText('');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input value={text} onChange={(e) => setText(e.target.value)} />\n      <button type=\"submit\">Add</button>\n    </form>\n  );\n}\n```\n\n## Atom Families\n\n```typescript\nimport { atomFamily } from 'jotai/utils';\n\n// Create atoms dynamically\nconst todoAtomFamily = atomFamily((id: string) =>\n  atom<Todo | null>(null)\n);\n\n// Usage\nfunction TodoItem({ id }: { id: string }): React.ReactElement {\n  const [todo, setTodo] = useAtom(todoAtomFamily(id));\n\n  if (!todo) return null;\n\n  return (\n    <div>\n      <input\n        type=\"checkbox\"\n        checked={todo.completed}\n        onChange={() =>\n          setTodo({ ...todo, completed: !todo.completed })\n        }\n      />\n      {todo.text}\n    </div>\n  );\n}\n```\n\n## Persistence\n\n```typescript\nimport { atomWithStorage } from 'jotai/utils';\n\n// Persisted to localStorage\nconst themeAtom = atomWithStorage<'light' | 'dark'>('theme', 'light');\n\nconst settingsAtom = atomWithStorage('settings', {\n  notifications: true,\n  language: 'en',\n});\n\n// Usage - automatically syncs with localStorage\nfunction ThemeToggle(): React.ReactElement {\n  const [theme, setTheme] = useAtom(themeAtom);\n\n  return (\n    <button onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}>\n      {theme}\n    </button>\n  );\n}\n```\n\n## Reset Atoms\n\n```typescript\nimport { atomWithReset, useResetAtom, RESET } from 'jotai/utils';\n\nconst formAtom = atomWithReset({\n  name: '',\n  email: '',\n  message: '',\n});\n\nfunction ContactForm(): React.ReactElement {\n  const [form, setForm] = useAtom(formAtom);\n  const resetForm = useResetAtom(formAtom);\n\n  // Or use RESET symbol\n  // setForm(RESET);\n\n  return (\n    <form>\n      <input\n        value={form.name}\n        onChange={(e) => setForm({ ...form, name: e.target.value })}\n      />\n      <button type=\"button\" onClick={resetForm}>\n        Reset\n      </button>\n    </form>\n  );\n}\n```\n\n## Combining with TanStack Query\n\n```typescript\nimport { atomWithQuery } from 'jotai-tanstack-query';\n\nconst userIdAtom = atom('1');\n\nconst userAtom = atomWithQuery((get) => ({\n  queryKey: ['user', get(userIdAtom)],\n  queryFn: () => fetchUser(get(userIdAtom)),\n}));\n\nfunction UserProfile(): React.ReactElement {\n  const [{ data: user, isLoading }] = useAtom(userAtom);\n\n  if (isLoading) return <Loading />;\n  return <div>{user?.name}</div>;\n}\n```\n\n## DevTools\n\n```typescript\nimport { useAtomsDebugValue } from 'jotai-devtools';\n\nfunction App(): React.ReactElement {\n  useAtomsDebugValue(); // Shows atoms in React DevTools\n\n  return <Main />;\n}\n```\n\n## Best Practices\n\n1. **Start with primitive atoms** - Build complex from simple\n2. **Use derived atoms** - Avoid duplicating state\n3. **Keep atoms small** - One concern per atom\n4. **Use atom families** - For dynamic/collection state\n5. **Prefer useAtomValue/useSetAtom** - When only reading or writing\n\n## Jotai vs Zustand\n\n| Feature | Jotai | Zustand |\n|---------|-------|---------|\n| Model | Bottom-up (atoms) | Top-down (store) |\n| Subscriptions | Automatic (fine-grained) | Manual (selectors) |\n| Provider | Optional | Not needed |\n| Async | Built-in | Manual |\n| DevTools | Separate package | Middleware |\n| Best for | Complex dependencies | Simple global state |\n\n## When to Use Jotai\n\n- Complex state dependencies\n- Fine-grained re-render control\n- Derived state calculations\n- Code splitting state\n- When you think in \"atoms\"\n\n## Notes\n\n- Atoms are not stored in a single object\n- Each atom can be code-split\n- No provider needed (uses React context internally)\n- Works great with React Suspense"
              },
              {
                "name": "nextjs-configuration",
                "description": "Next.js 15 configuration with App Router. Use when setting up or configuring Next.js projects.",
                "path": "tech-stacks/js/react/skills/nextjs-configuration/SKILL.md",
                "frontmatter": {
                  "name": "nextjs-configuration",
                  "description": "Next.js 15 configuration with App Router. Use when setting up or configuring Next.js projects."
                },
                "content": "# Next.js Configuration Skill\n\nThis skill covers Next.js 15 configuration with the App Router.\n\n## When to Use\n\nUse this skill when:\n- Setting up new Next.js projects\n- Configuring build and deployment\n- Adding middleware and redirects\n- Configuring image optimization\n\n## Core Principle\n\n**CONVENTIONS OVER CONFIGURATION** - Next.js has sensible defaults. Only configure when you need to deviate.\n\n## Basic Configuration\n\n```typescript\n// next.config.ts\nimport type { NextConfig } from 'next';\n\nconst config: NextConfig = {\n  reactStrictMode: true,\n};\n\nexport default config;\n```\n\n## Full Configuration\n\n```typescript\n// next.config.ts\nimport type { NextConfig } from 'next';\n\nconst config: NextConfig = {\n  // React strict mode (recommended)\n  reactStrictMode: true,\n\n  // NEVER ignore errors\n  typescript: {\n    ignoreBuildErrors: false,\n  },\n  eslint: {\n    ignoreDuringBuilds: false,\n  },\n\n  // Experimental features\n  experimental: {\n    typedRoutes: true,\n  },\n\n  // Image optimization\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'example.com',\n        pathname: '/images/**',\n      },\n    ],\n  },\n\n  // Redirects\n  async redirects() {\n    return [\n      {\n        source: '/old-page',\n        destination: '/new-page',\n        permanent: true,\n      },\n    ];\n  },\n\n  // Rewrites\n  async rewrites() {\n    return [\n      {\n        source: '/api/:path*',\n        destination: 'https://api.example.com/:path*',\n      },\n    ];\n  },\n\n  // Headers\n  async headers() {\n    return [\n      {\n        source: '/(.*)',\n        headers: [\n          {\n            key: 'X-Frame-Options',\n            value: 'DENY',\n          },\n          {\n            key: 'X-Content-Type-Options',\n            value: 'nosniff',\n          },\n        ],\n      },\n    ];\n  },\n};\n\nexport default config;\n```\n\n## App Router Structure\n\n```\nsrc/\nâ”œâ”€â”€ app/\nâ”‚   â”œâ”€â”€ layout.tsx       # Root layout\nâ”‚   â”œâ”€â”€ page.tsx         # Home page (/)\nâ”‚   â”œâ”€â”€ loading.tsx      # Loading UI\nâ”‚   â”œâ”€â”€ error.tsx        # Error boundary\nâ”‚   â”œâ”€â”€ not-found.tsx    # 404 page\nâ”‚   â”œâ”€â”€ globals.css      # Global styles\nâ”‚   â”œâ”€â”€ about/\nâ”‚   â”‚   â””â”€â”€ page.tsx     # /about\nâ”‚   â”œâ”€â”€ blog/\nâ”‚   â”‚   â”œâ”€â”€ page.tsx     # /blog\nâ”‚   â”‚   â””â”€â”€ [slug]/\nâ”‚   â”‚       â””â”€â”€ page.tsx # /blog/:slug\nâ”‚   â””â”€â”€ api/\nâ”‚       â””â”€â”€ health/\nâ”‚           â””â”€â”€ route.ts # /api/health\n```\n\n## Layout Configuration\n\n```typescript\n// app/layout.tsx\nimport type { Metadata } from 'next';\nimport { Inter } from 'next/font/google';\nimport './globals.css';\n\nconst inter = Inter({ subsets: ['latin'] });\n\nexport const metadata: Metadata = {\n  title: {\n    default: 'My App',\n    template: '%s | My App',\n  },\n  description: 'My application description',\n  openGraph: {\n    title: 'My App',\n    description: 'My application description',\n    url: 'https://myapp.com',\n    siteName: 'My App',\n    locale: 'en_US',\n    type: 'website',\n  },\n};\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}): React.ReactElement {\n  return (\n    <html lang=\"en\">\n      <body className={inter.className}>{children}</body>\n    </html>\n  );\n}\n```\n\n## Image Configuration\n\n```typescript\n// next.config.ts\nimages: {\n  // Remote image patterns\n  remotePatterns: [\n    {\n      protocol: 'https',\n      hostname: '**.example.com',\n    },\n    {\n      protocol: 'https',\n      hostname: 'cdn.example.com',\n      pathname: '/images/**',\n    },\n  ],\n\n  // Image formats\n  formats: ['image/avif', 'image/webp'],\n\n  // Device sizes for responsive images\n  deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],\n  imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],\n\n  // Disable optimization for static export\n  // unoptimized: true,\n},\n```\n\n## Environment Variables\n\n```bash\n# .env.local (not committed)\nDATABASE_URL=postgresql://...\nAPI_SECRET=secret\n\n# .env (committed)\nNEXT_PUBLIC_API_URL=https://api.example.com\nNEXT_PUBLIC_APP_NAME=My App\n```\n\n```typescript\n// Usage\n// Server-side only\nconst dbUrl = process.env.DATABASE_URL;\n\n// Client-side (must have NEXT_PUBLIC_ prefix)\nconst apiUrl = process.env.NEXT_PUBLIC_API_URL;\n```\n\n## Middleware\n\n```typescript\n// middleware.ts (root level)\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\nexport function middleware(request: NextRequest): NextResponse {\n  // Authentication check\n  const token = request.cookies.get('token');\n\n  if (!token && request.nextUrl.pathname.startsWith('/dashboard')) {\n    return NextResponse.redirect(new URL('/login', request.url));\n  }\n\n  // Add headers\n  const response = NextResponse.next();\n  response.headers.set('x-custom-header', 'value');\n\n  return response;\n}\n\n// Configure which paths middleware runs on\nexport const config = {\n  matcher: [\n    '/dashboard/:path*',\n    '/api/:path*',\n  ],\n};\n```\n\n## Route Handlers (API Routes)\n\n```typescript\n// app/api/users/route.ts\nimport { NextRequest, NextResponse } from 'next/server';\n\nexport async function GET(request: NextRequest): Promise<NextResponse> {\n  const users = await db.user.findMany();\n  return NextResponse.json(users);\n}\n\nexport async function POST(request: NextRequest): Promise<NextResponse> {\n  const body = await request.json();\n  const user = await db.user.create({ data: body });\n  return NextResponse.json(user, { status: 201 });\n}\n\n// app/api/users/[id]/route.ts\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n): Promise<NextResponse> {\n  const user = await db.user.findUnique({ where: { id: params.id } });\n  if (!user) {\n    return NextResponse.json({ error: 'Not found' }, { status: 404 });\n  }\n  return NextResponse.json(user);\n}\n```\n\n## Static Export\n\n```typescript\n// next.config.ts\nconst config: NextConfig = {\n  output: 'export',\n  images: {\n    unoptimized: true, // Required for static export\n  },\n  trailingSlash: true,\n};\n```\n\n## Standalone Build (Docker)\n\n```typescript\n// next.config.ts\nconst config: NextConfig = {\n  output: 'standalone',\n};\n```\n\n```dockerfile\nFROM node:22-alpine AS runner\nWORKDIR /app\n\nCOPY --from=builder /app/.next/standalone ./\nCOPY --from=builder /app/.next/static ./.next/static\nCOPY --from=builder /app/public ./public\n\nENV NODE_ENV=production\nEXPOSE 3000\nCMD [\"node\", \"server.js\"]\n```\n\n## Bundle Analyzer\n\n```typescript\n// next.config.ts\nimport bundleAnalyzer from '@next/bundle-analyzer';\n\nconst withBundleAnalyzer = bundleAnalyzer({\n  enabled: process.env.ANALYZE === 'true',\n});\n\nconst config: NextConfig = {\n  // ...\n};\n\nexport default withBundleAnalyzer(config);\n```\n\n```bash\nANALYZE=true npm run build\n```\n\n## Security Headers\n\n```typescript\n// next.config.ts\nasync headers() {\n  return [\n    {\n      source: '/(.*)',\n      headers: [\n        {\n          key: 'X-DNS-Prefetch-Control',\n          value: 'on',\n        },\n        {\n          key: 'Strict-Transport-Security',\n          value: 'max-age=63072000; includeSubDomains; preload',\n        },\n        {\n          key: 'X-Frame-Options',\n          value: 'SAMEORIGIN',\n        },\n        {\n          key: 'X-Content-Type-Options',\n          value: 'nosniff',\n        },\n        {\n          key: 'Referrer-Policy',\n          value: 'origin-when-cross-origin',\n        },\n      ],\n    },\n  ];\n},\n```\n\n## Commands\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"next dev\",\n    \"build\": \"next build\",\n    \"start\": \"next start\",\n    \"lint\": \"next lint\"\n  }\n}\n```\n\n## Best Practices\n\n1. **Use App Router** - Pages Router is legacy\n2. **Server Components by default** - Use 'use client' only when needed\n3. **Typed routes** - Enable experimental.typedRoutes\n4. **Never ignore errors** - Keep ignoreBuildErrors: false\n5. **Environment variables** - Use NEXT_PUBLIC_ for client-side\n6. **Image optimization** - Use next/image component\n7. **Middleware** - Use for auth, redirects, headers\n\n## Notes\n\n- App Router is the recommended approach for new projects\n- Server Components reduce client-side JavaScript\n- Middleware runs on the Edge Runtime\n- Static export removes server-side features"
              },
              {
                "name": "nextjs-deployment",
                "description": "Next.js deployment strategies and platform configurations. Use when deploying Next.js applications.",
                "path": "tech-stacks/js/react/skills/nextjs-deployment/SKILL.md",
                "frontmatter": {
                  "name": "nextjs-deployment",
                  "description": "Next.js deployment strategies and platform configurations. Use when deploying Next.js applications."
                },
                "content": "# Next.js Deployment Skill\n\nThis skill covers deploying Next.js applications to various hosting platforms.\n\n## When to Use\n\nUse this skill when:\n- Deploying Next.js applications\n- Configuring Server Components deployment\n- Setting up edge functions\n- Optimizing for production hosting\n\n## Core Principle\n\n**CHOOSE THE RIGHT PLATFORM** - Next.js features (SSR, ISR, Edge) require different hosting capabilities. Choose based on your needs.\n\n## Build Configuration\n\n### Production Build\n\n```typescript\n// next.config.ts\nimport type { NextConfig } from 'next';\n\nconst nextConfig: NextConfig = {\n  output: 'standalone', // For Docker/self-hosted\n  // output: 'export',  // For static export only\n\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'cdn.example.com',\n      },\n    ],\n  },\n\n  experimental: {\n    serverActions: {\n      bodySizeLimit: '2mb',\n    },\n  },\n};\n\nexport default nextConfig;\n```\n\n### Environment Configuration\n\n```env\n# .env.production\nNEXT_PUBLIC_API_URL=https://api.production.com\nDATABASE_URL=postgresql://...\nNEXTAUTH_SECRET=your-secret\n```\n\n## Vercel Deployment (Recommended)\n\n### Configuration\n\n```json\n// vercel.json\n{\n  \"framework\": \"nextjs\",\n  \"buildCommand\": \"npm run build\",\n  \"regions\": [\"iad1\"],\n  \"functions\": {\n    \"app/api/**/*.ts\": {\n      \"memory\": 1024,\n      \"maxDuration\": 30\n    }\n  },\n  \"crons\": [\n    {\n      \"path\": \"/api/cron/cleanup\",\n      \"schedule\": \"0 0 * * *\"\n    }\n  ]\n}\n```\n\n### Deploy Script\n\n```bash\n# Install Vercel CLI\nnpm install -g vercel\n\n# Link project\nvercel link\n\n# Deploy preview\nvercel\n\n# Deploy production\nvercel --prod\n```\n\n### GitHub Actions\n\n```yaml\n# .github/workflows/deploy-vercel.yml\nname: Deploy to Vercel\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\nenv:\n  VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}\n  VERCEL_PROJECT_ID: ${{ secrets.VERCEL_PROJECT_ID }}\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Install Vercel CLI\n        run: npm install -g vercel@latest\n\n      - name: Pull Vercel Environment\n        run: vercel pull --yes --environment=production --token=${{ secrets.VERCEL_TOKEN }}\n\n      - name: Build\n        run: vercel build --prod --token=${{ secrets.VERCEL_TOKEN }}\n\n      - name: Deploy\n        run: vercel deploy --prebuilt --prod --token=${{ secrets.VERCEL_TOKEN }}\n```\n\n## Netlify Deployment\n\n### Configuration\n\n```toml\n# netlify.toml\n[build]\n  command = \"npm run build\"\n  publish = \".next\"\n\n[build.environment]\n  NEXT_TELEMETRY_DISABLED = \"1\"\n\n[[plugins]]\n  package = \"@netlify/plugin-nextjs\"\n```\n\n### Install Netlify Plugin\n\n```bash\nnpm install -D @netlify/plugin-nextjs\n```\n\n### GitHub Actions\n\n```yaml\n# .github/workflows/deploy-netlify.yml\nname: Deploy to Netlify\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Build\n        run: npm run build\n\n      - name: Deploy to Netlify\n        uses: nwtgck/actions-netlify@v3\n        with:\n          publish-dir: '.next'\n          production-branch: main\n          github-token: ${{ secrets.GITHUB_TOKEN }}\n        env:\n          NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}\n          NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}\n```\n\n## Cloudflare Pages\n\n### Configuration\n\n```typescript\n// next.config.ts\nconst nextConfig: NextConfig = {\n  experimental: {\n    runtime: 'edge',\n  },\n};\n```\n\n### Install Adapter\n\n```bash\nnpm install -D @cloudflare/next-on-pages\n```\n\n### Build Script\n\n```json\n// package.json\n{\n  \"scripts\": {\n    \"build:cloudflare\": \"npx @cloudflare/next-on-pages\"\n  }\n}\n```\n\n### GitHub Actions\n\n```yaml\n# .github/workflows/deploy-cloudflare.yml\nname: Deploy to Cloudflare Pages\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Build\n        run: npx @cloudflare/next-on-pages\n\n      - name: Deploy\n        uses: cloudflare/pages-action@v1\n        with:\n          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}\n          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}\n          projectName: my-nextjs-app\n          directory: .vercel/output/static\n```\n\n## Docker Deployment\n\n### Dockerfile\n\n```dockerfile\n# Dockerfile\nFROM node:22-alpine AS base\n\n# Install dependencies\nFROM base AS deps\nRUN apk add --no-cache libc6-compat\nWORKDIR /app\nCOPY package.json package-lock.json ./\nRUN npm ci\n\n# Build\nFROM base AS builder\nWORKDIR /app\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY . .\nENV NEXT_TELEMETRY_DISABLED=1\nRUN npm run build\n\n# Production\nFROM base AS runner\nWORKDIR /app\nENV NODE_ENV=production\nENV NEXT_TELEMETRY_DISABLED=1\n\nRUN addgroup --system --gid 1001 nodejs\nRUN adduser --system --uid 1001 nextjs\n\nCOPY --from=builder /app/public ./public\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\n\nUSER nextjs\nEXPOSE 3000\nENV PORT=3000\nENV HOSTNAME=\"0.0.0.0\"\n\nCMD [\"node\", \"server.js\"]\n```\n\n### Docker Compose\n\n```yaml\n# docker-compose.yml\nversion: '3.8'\n\nservices:\n  web:\n    build: .\n    ports:\n      - \"3000:3000\"\n    environment:\n      - DATABASE_URL=postgresql://postgres:password@db:5432/app\n      - NEXTAUTH_SECRET=${NEXTAUTH_SECRET}\n      - NEXTAUTH_URL=http://localhost:3000\n    depends_on:\n      - db\n\n  db:\n    image: postgres:16-alpine\n    environment:\n      - POSTGRES_USER=postgres\n      - POSTGRES_PASSWORD=password\n      - POSTGRES_DB=app\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n\nvolumes:\n  postgres_data:\n```\n\n### Build and Run\n\n```bash\n# Build image\ndocker build -t my-nextjs-app .\n\n# Run container\ndocker run -p 3000:3000 my-nextjs-app\n\n# With docker-compose\ndocker-compose up -d\n```\n\n## AWS Amplify\n\n### Configuration\n\n```yaml\n# amplify.yml\nversion: 1\nfrontend:\n  phases:\n    preBuild:\n      commands:\n        - npm ci\n    build:\n      commands:\n        - npm run build\n  artifacts:\n    baseDirectory: .next\n    files:\n      - '**/*'\n  cache:\n    paths:\n      - node_modules/**/*\n      - .next/cache/**/*\n```\n\n## Static Export\n\n### Configuration\n\n```typescript\n// next.config.ts\nconst nextConfig: NextConfig = {\n  output: 'export',\n  trailingSlash: true,\n  images: {\n    unoptimized: true,\n  },\n};\n```\n\n### Limitations\n\n- No Server Components with dynamic rendering\n- No API routes\n- No ISR/revalidation\n- No middleware\n- No image optimization (unless external service)\n\n## Edge Functions\n\n### Edge API Route\n\n```typescript\n// app/api/edge/route.ts\nimport { NextRequest } from 'next/server';\n\nexport const runtime = 'edge';\n\nexport async function GET(request: NextRequest) {\n  const { searchParams } = new URL(request.url);\n  const name = searchParams.get('name');\n\n  return new Response(JSON.stringify({ message: `Hello ${name}` }), {\n    headers: { 'Content-Type': 'application/json' },\n  });\n}\n```\n\n### Edge Middleware\n\n```typescript\n// middleware.ts\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\nexport function middleware(request: NextRequest) {\n  // Add custom header\n  const response = NextResponse.next();\n  response.headers.set('x-custom-header', 'value');\n  return response;\n}\n\nexport const config = {\n  matcher: '/api/:path*',\n};\n```\n\n## ISR Configuration\n\n### On-Demand Revalidation\n\n```typescript\n// app/api/revalidate/route.ts\nimport { NextRequest } from 'next/server';\nimport { revalidatePath, revalidateTag } from 'next/cache';\n\nexport async function POST(request: NextRequest) {\n  const { path, tag, secret } = await request.json();\n\n  if (secret !== process.env.REVALIDATION_SECRET) {\n    return new Response('Invalid secret', { status: 401 });\n  }\n\n  if (path) {\n    revalidatePath(path);\n  }\n\n  if (tag) {\n    revalidateTag(tag);\n  }\n\n  return new Response('Revalidated', { status: 200 });\n}\n```\n\n### Time-Based Revalidation\n\n```typescript\n// app/posts/page.tsx\nasync function getPosts() {\n  const res = await fetch('https://api.example.com/posts', {\n    next: { revalidate: 3600 }, // Revalidate every hour\n  });\n  return res.json();\n}\n```\n\n## Health Checks\n\n```typescript\n// app/api/health/route.ts\nimport { NextResponse } from 'next/server';\n\nexport async function GET() {\n  try {\n    // Check database connection\n    // await db.query('SELECT 1');\n\n    return NextResponse.json({\n      status: 'healthy',\n      timestamp: new Date().toISOString(),\n    });\n  } catch {\n    return NextResponse.json(\n      { status: 'unhealthy' },\n      { status: 503 }\n    );\n  }\n}\n```\n\n## Monitoring\n\n### Vercel Analytics\n\n```typescript\n// app/layout.tsx\nimport { Analytics } from '@vercel/analytics/react';\nimport { SpeedInsights } from '@vercel/speed-insights/next';\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <html lang=\"en\">\n      <body>\n        {children}\n        <Analytics />\n        <SpeedInsights />\n      </body>\n    </html>\n  );\n}\n```\n\n## Commands\n\n```bash\n# Build for production\nnpm run build\n\n# Start production server\nnpm run start\n\n# Deploy to Vercel\nvercel --prod\n\n# Build Docker image\ndocker build -t my-app .\n\n# Export static site\nnpm run build && npx next export\n```\n\n## Platform Comparison\n\n| Feature | Vercel | Netlify | Cloudflare | AWS | Docker |\n|---------|--------|---------|------------|-----|--------|\n| Server Components | Full | Full | Edge only | Full | Full |\n| ISR | Full | Limited | No | Full | Full |\n| Edge Functions | Yes | Yes | Yes | Yes | No |\n| Image Optimization | Built-in | Plugin | No | Custom | Custom |\n| Serverless | Yes | Yes | Yes | Yes | No |\n\n## Best Practices\n\n1. **Use standalone output** - For Docker deployments\n2. **Enable ISR** - For dynamic content with caching\n3. **Configure health checks** - For load balancers\n4. **Set up monitoring** - Analytics and error tracking\n5. **Use edge when possible** - For lower latency\n6. **Cache static assets** - Long cache times with hashing\n\n## Notes\n\n- Vercel has best Next.js support (same team)\n- Docker requires standalone output mode\n- Static export loses many Next.js features\n- Edge runtime has Node.js API limitations"
              },
              {
                "name": "performance-patterns",
                "description": "React performance optimization including memoization, code splitting, and lazy loading. Use when optimizing React applications.",
                "path": "tech-stacks/js/react/skills/performance-patterns/SKILL.md",
                "frontmatter": {
                  "name": "performance-patterns",
                  "description": "React performance optimization including memoization, code splitting, and lazy loading. Use when optimizing React applications."
                },
                "content": "# React Performance Patterns Skill\n\nThis skill covers performance optimization techniques for React applications.\n\n## When to Use\n\nUse this skill when:\n- Optimizing render performance\n- Reducing bundle size\n- Implementing lazy loading\n- Fixing performance bottlenecks\n\n## Core Principle\n\n**MEASURE FIRST** - Profile before optimizing. Premature optimization leads to complexity without benefit.\n\n## Memoization\n\n### React.memo\n\nPrevent re-renders when props haven't changed.\n\n```typescript\nimport { memo } from 'react';\n\ninterface ListItemProps {\n  item: Item;\n  onSelect: (id: string) => void;\n}\n\n// âœ… Memoize when:\n// - Component renders often with same props\n// - Component is expensive to render\n// - Parent re-renders frequently\nconst ListItem = memo(function ListItem({\n  item,\n  onSelect,\n}: ListItemProps): React.ReactElement {\n  return (\n    <li onClick={() => onSelect(item.id)}>\n      {item.name}\n    </li>\n  );\n});\n\n// With custom comparison\nconst ListItem = memo(\n  function ListItem({ item }: ListItemProps): React.ReactElement {\n    return <li>{item.name}</li>;\n  },\n  (prevProps, nextProps) => {\n    return prevProps.item.id === nextProps.item.id;\n  }\n);\n```\n\n### useMemo\n\nCache expensive computations.\n\n```typescript\nimport { useMemo } from 'react';\n\nfunction UserList({ users, filter }: UserListProps): React.ReactElement {\n  // âœ… Use for expensive computations\n  const filteredUsers = useMemo(() => {\n    return users\n      .filter((user) => user.name.includes(filter))\n      .sort((a, b) => a.name.localeCompare(b.name));\n  }, [users, filter]);\n\n  // âŒ Don't use for simple operations\n  // const fullName = useMemo(() => `${first} ${last}`, [first, last]);\n  // Just use: const fullName = `${first} ${last}`;\n\n  return (\n    <ul>\n      {filteredUsers.map((user) => (\n        <li key={user.id}>{user.name}</li>\n      ))}\n    </ul>\n  );\n}\n```\n\n### useCallback\n\nKeep function references stable.\n\n```typescript\nimport { useCallback, memo } from 'react';\n\nfunction Parent(): React.ReactElement {\n  const [count, setCount] = useState(0);\n\n  // âœ… Stable callback for memoized children\n  const handleClick = useCallback((id: string) => {\n    console.log(`Clicked: ${id}`);\n  }, []);\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount((c) => c + 1)}>Increment</button>\n      <MemoizedList onItemClick={handleClick} />\n    </div>\n  );\n}\n\nconst MemoizedList = memo(function MemoizedList({\n  onItemClick,\n}: {\n  onItemClick: (id: string) => void;\n}): React.ReactElement {\n  console.log('List rendered'); // Only logs once!\n  return <ul>...</ul>;\n});\n```\n\n## Code Splitting\n\n### React.lazy\n\n```typescript\nimport { lazy, Suspense } from 'react';\n\n// Lazy load route components\nconst Dashboard = lazy(() => import('./pages/Dashboard'));\nconst Settings = lazy(() => import('./pages/Settings'));\nconst Profile = lazy(() => import('./pages/Profile'));\n\nfunction App(): React.ReactElement {\n  return (\n    <Suspense fallback={<LoadingSpinner />}>\n      <Routes>\n        <Route path=\"/dashboard\" element={<Dashboard />} />\n        <Route path=\"/settings\" element={<Settings />} />\n        <Route path=\"/profile\" element={<Profile />} />\n      </Routes>\n    </Suspense>\n  );\n}\n```\n\n### Named Exports with lazy\n\n```typescript\n// For named exports, create intermediate module\n// Dashboard.lazy.ts\nexport { Dashboard as default } from './Dashboard';\n\n// App.tsx\nconst Dashboard = lazy(() => import('./Dashboard.lazy'));\n```\n\n### Prefetching\n\n```typescript\nfunction NavLink({ to, children }: NavLinkProps): React.ReactElement {\n  const prefetch = (): void => {\n    if (to === '/dashboard') {\n      import('./pages/Dashboard');\n    } else if (to === '/settings') {\n      import('./pages/Settings');\n    }\n  };\n\n  return (\n    <Link to={to} onMouseEnter={prefetch} onFocus={prefetch}>\n      {children}\n    </Link>\n  );\n}\n```\n\n## Virtualization\n\nFor long lists, render only visible items.\n\n```typescript\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport { useRef } from 'react';\n\nfunction VirtualList({ items }: { items: Item[] }): React.ReactElement {\n  const parentRef = useRef<HTMLDivElement>(null);\n\n  const virtualizer = useVirtualizer({\n    count: items.length,\n    getScrollElement: () => parentRef.current,\n    estimateSize: () => 50,\n    overscan: 5,\n  });\n\n  return (\n    <div ref={parentRef} className=\"h-[500px] overflow-auto\">\n      <div\n        style={{\n          height: `${virtualizer.getTotalSize()}px`,\n          width: '100%',\n          position: 'relative',\n        }}\n      >\n        {virtualizer.getVirtualItems().map((virtualItem) => (\n          <div\n            key={virtualItem.key}\n            style={{\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              width: '100%',\n              height: `${virtualItem.size}px`,\n              transform: `translateY(${virtualItem.start}px)`,\n            }}\n          >\n            {items[virtualItem.index]?.name}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n```\n\n## State Management Optimization\n\n### Split State\n\n```typescript\n// âŒ Single state object causes full re-render\nconst [state, setState] = useState({\n  user: null,\n  theme: 'light',\n  notifications: [],\n});\n\n// âœ… Split state - components only re-render for their state\nconst [user, setUser] = useState<User | null>(null);\nconst [theme, setTheme] = useState<'light' | 'dark'>('light');\nconst [notifications, setNotifications] = useState<Notification[]>([]);\n```\n\n### Zustand Selectors\n\n```typescript\nimport { create } from 'zustand';\n\ninterface Store {\n  user: User | null;\n  theme: 'light' | 'dark';\n  setUser: (user: User) => void;\n  setTheme: (theme: 'light' | 'dark') => void;\n}\n\nconst useStore = create<Store>((set) => ({\n  user: null,\n  theme: 'light',\n  setUser: (user) => set({ user }),\n  setTheme: (theme) => set({ theme }),\n}));\n\n// âœ… Subscribe only to what you need\nfunction UserName(): React.ReactElement {\n  const userName = useStore((state) => state.user?.name);\n  return <span>{userName}</span>;\n}\n\nfunction ThemeToggle(): React.ReactElement {\n  const theme = useStore((state) => state.theme);\n  const setTheme = useStore((state) => state.setTheme);\n  return <button onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}>Toggle</button>;\n}\n```\n\n## Image Optimization\n\n### Lazy Loading Images\n\n```typescript\nfunction LazyImage({ src, alt }: { src: string; alt: string }): React.ReactElement {\n  return (\n    <img\n      src={src}\n      alt={alt}\n      loading=\"lazy\"\n      decoding=\"async\"\n    />\n  );\n}\n```\n\n### Next.js Image\n\n```typescript\nimport Image from 'next/image';\n\nfunction OptimizedImage(): React.ReactElement {\n  return (\n    <Image\n      src=\"/hero.jpg\"\n      alt=\"Hero\"\n      width={1200}\n      height={600}\n      priority // For LCP images\n      placeholder=\"blur\"\n      blurDataURL=\"data:image/jpeg;base64,...\"\n    />\n  );\n}\n```\n\n## Avoiding Common Pitfalls\n\n### Object/Array in Dependencies\n\n```typescript\n// âŒ New object each render\nfunction Component({ filters }: { filters: { page: number; limit: number } }): React.ReactElement {\n  useEffect(() => {\n    fetchData(filters);\n  }, [filters]); // Infinite loop!\n}\n\n// âœ… Extract primitive values\nfunction Component({ filters }: { filters: { page: number; limit: number } }): React.ReactElement {\n  const { page, limit } = filters;\n  useEffect(() => {\n    fetchData({ page, limit });\n  }, [page, limit]);\n}\n```\n\n### Inline Object Props\n\n```typescript\n// âŒ New object each render\n<Child style={{ color: 'red' }} />\n\n// âœ… Stable reference\nconst style = useMemo(() => ({ color: 'red' }), []);\n<Child style={style} />\n\n// Or define outside component\nconst redStyle = { color: 'red' };\n<Child style={redStyle} />\n```\n\n## Profiling Tools\n\n### React DevTools Profiler\n\n1. Install React DevTools browser extension\n2. Open DevTools > Profiler tab\n3. Click Record, interact with app, stop\n4. Analyze flame graph for slow renders\n\n### Why Did You Render\n\n```typescript\n// In development only\nimport whyDidYouRender from '@welldone-software/why-did-you-render';\n\nif (process.env.NODE_ENV === 'development') {\n  whyDidYouRender(React, {\n    trackAllPureComponents: true,\n  });\n}\n```\n\n## Performance Checklist\n\n- [ ] Profile before optimizing\n- [ ] Use React.memo for expensive components\n- [ ] Implement code splitting for routes\n- [ ] Virtualize long lists (100+ items)\n- [ ] Use stable references (useCallback, useMemo)\n- [ ] Optimize images (lazy loading, proper sizing)\n- [ ] Use Zustand selectors or split state\n- [ ] Avoid inline objects/arrays as props\n\n## Notes\n\n- Don't optimize prematurely\n- memo() is free for simple components\n- useCallback/useMemo have overhead - use wisely\n- Virtualization significantly helps long lists"
              },
              {
                "name": "playwright-setup",
                "description": "Playwright E2E testing setup and configuration. Use when setting up end-to-end tests.",
                "path": "tech-stacks/js/react/skills/playwright-setup/SKILL.md",
                "frontmatter": {
                  "name": "playwright-setup",
                  "description": "Playwright E2E testing setup and configuration. Use when setting up end-to-end tests."
                },
                "content": "# Playwright Setup Skill\n\nThis skill covers Playwright end-to-end testing setup for React applications.\n\n## When to Use\n\nUse this skill when:\n- Setting up E2E testing\n- Configuring cross-browser testing\n- Implementing CI/CD testing\n- Creating Page Object Models\n\n## Core Principle\n\n**TEST USER JOURNEYS** - E2E tests verify complete user flows. Focus on critical paths that matter to users.\n\n## Installation\n\n```bash\nnpm init playwright@latest\n```\n\nOr manually:\n\n```bash\nnpm install -D @playwright/test\nnpx playwright install\n```\n\n## Configuration\n\n```typescript\n// playwright.config.ts\nimport { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  testDir: './tests/e2e',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: [\n    ['html'],\n    ['json', { outputFile: 'test-results/results.json' }],\n    ['list'],\n  ],\n  use: {\n    baseURL: 'http://localhost:3000',\n    trace: 'on-first-retry',\n    screenshot: 'only-on-failure',\n    video: 'on-first-retry',\n  },\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n    },\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n    },\n    {\n      name: 'Mobile Chrome',\n      use: { ...devices['Pixel 5'] },\n    },\n    {\n      name: 'Mobile Safari',\n      use: { ...devices['iPhone 12'] },\n    },\n  ],\n  webServer: {\n    command: 'npm run dev',\n    url: 'http://localhost:3000',\n    reuseExistingServer: !process.env.CI,\n    timeout: 120 * 1000,\n  },\n});\n```\n\n## Project Structure\n\n```\ntests/\nâ”œâ”€â”€ e2e/\nâ”‚   â”œâ”€â”€ pages/              # Page Objects\nâ”‚   â”‚   â”œâ”€â”€ LoginPage.ts\nâ”‚   â”‚   â”œâ”€â”€ DashboardPage.ts\nâ”‚   â”‚   â””â”€â”€ BasePage.ts\nâ”‚   â”œâ”€â”€ fixtures/           # Custom fixtures\nâ”‚   â”‚   â””â”€â”€ index.ts\nâ”‚   â”œâ”€â”€ auth.spec.ts\nâ”‚   â”œâ”€â”€ dashboard.spec.ts\nâ”‚   â””â”€â”€ checkout.spec.ts\nâ””â”€â”€ playwright.config.ts\n```\n\n## Basic Test\n\n```typescript\nimport { test, expect } from '@playwright/test';\n\ntest.describe('Home Page', () => {\n  test('displays welcome message', async ({ page }) => {\n    await page.goto('/');\n\n    await expect(page.getByRole('heading', { name: 'Welcome' })).toBeVisible();\n  });\n\n  test('navigates to about page', async ({ page }) => {\n    await page.goto('/');\n\n    await page.getByRole('link', { name: 'About' }).click();\n\n    await expect(page).toHaveURL('/about');\n  });\n});\n```\n\n## Page Object Model\n\n### Base Page\n\n```typescript\n// tests/e2e/pages/BasePage.ts\nimport { Page, Locator } from '@playwright/test';\n\nexport class BasePage {\n  readonly page: Page;\n  readonly header: Locator;\n  readonly footer: Locator;\n\n  constructor(page: Page) {\n    this.page = page;\n    this.header = page.getByRole('banner');\n    this.footer = page.getByRole('contentinfo');\n  }\n\n  async navigate(path: string): Promise<void> {\n    await this.page.goto(path);\n  }\n\n  async waitForPageLoad(): Promise<void> {\n    await this.page.waitForLoadState('networkidle');\n  }\n}\n```\n\n### Login Page\n\n```typescript\n// tests/e2e/pages/LoginPage.ts\nimport { Page, Locator, expect } from '@playwright/test';\nimport { BasePage } from './BasePage';\n\nexport class LoginPage extends BasePage {\n  readonly emailInput: Locator;\n  readonly passwordInput: Locator;\n  readonly submitButton: Locator;\n  readonly errorMessage: Locator;\n\n  constructor(page: Page) {\n    super(page);\n    this.emailInput = page.getByLabel('Email');\n    this.passwordInput = page.getByLabel('Password');\n    this.submitButton = page.getByRole('button', { name: 'Sign in' });\n    this.errorMessage = page.getByRole('alert');\n  }\n\n  async goto(): Promise<void> {\n    await this.navigate('/login');\n  }\n\n  async login(email: string, password: string): Promise<void> {\n    await this.emailInput.fill(email);\n    await this.passwordInput.fill(password);\n    await this.submitButton.click();\n  }\n\n  async expectError(message: string): Promise<void> {\n    await expect(this.errorMessage).toContainText(message);\n  }\n\n  async expectLoggedIn(): Promise<void> {\n    await expect(this.page).toHaveURL('/dashboard');\n  }\n}\n```\n\n### Using Page Objects\n\n```typescript\n// tests/e2e/auth.spec.ts\nimport { test, expect } from '@playwright/test';\nimport { LoginPage } from './pages/LoginPage';\n\ntest.describe('Authentication', () => {\n  test('logs in with valid credentials', async ({ page }) => {\n    const loginPage = new LoginPage(page);\n\n    await loginPage.goto();\n    await loginPage.login('user@example.com', 'password123');\n    await loginPage.expectLoggedIn();\n  });\n\n  test('shows error with invalid credentials', async ({ page }) => {\n    const loginPage = new LoginPage(page);\n\n    await loginPage.goto();\n    await loginPage.login('user@example.com', 'wrongpassword');\n    await loginPage.expectError('Invalid credentials');\n  });\n});\n```\n\n## Fixtures\n\n```typescript\n// tests/e2e/fixtures/index.ts\nimport { test as base } from '@playwright/test';\nimport { LoginPage } from '../pages/LoginPage';\nimport { DashboardPage } from '../pages/DashboardPage';\n\ninterface Pages {\n  loginPage: LoginPage;\n  dashboardPage: DashboardPage;\n}\n\ninterface TestFixtures {\n  authenticatedPage: void;\n}\n\nexport const test = base.extend<Pages & TestFixtures>({\n  loginPage: async ({ page }, use) => {\n    await use(new LoginPage(page));\n  },\n\n  dashboardPage: async ({ page }, use) => {\n    await use(new DashboardPage(page));\n  },\n\n  authenticatedPage: async ({ page }, use) => {\n    // Setup: Login before test\n    await page.goto('/login');\n    await page.getByLabel('Email').fill('test@example.com');\n    await page.getByLabel('Password').fill('password123');\n    await page.getByRole('button', { name: 'Sign in' }).click();\n    await page.waitForURL('/dashboard');\n\n    // Run the test\n    await use();\n\n    // Teardown: Logout after test (if needed)\n  },\n});\n\nexport { expect } from '@playwright/test';\n```\n\n```typescript\n// Usage\nimport { test, expect } from '../fixtures';\n\ntest.describe('Dashboard', () => {\n  test('shows user info when authenticated', async ({ page, authenticatedPage }) => {\n    await expect(page.getByText('Welcome back')).toBeVisible();\n  });\n});\n```\n\n## Authentication State\n\n### Saving Auth State\n\n```typescript\n// tests/e2e/auth.setup.ts\nimport { test as setup, expect } from '@playwright/test';\n\nconst authFile = 'tests/.auth/user.json';\n\nsetup('authenticate', async ({ page }) => {\n  await page.goto('/login');\n  await page.getByLabel('Email').fill('test@example.com');\n  await page.getByLabel('Password').fill('password123');\n  await page.getByRole('button', { name: 'Sign in' }).click();\n\n  await page.waitForURL('/dashboard');\n\n  await page.context().storageState({ path: authFile });\n});\n```\n\n### Using Auth State\n\n```typescript\n// playwright.config.ts\nexport default defineConfig({\n  projects: [\n    { name: 'setup', testMatch: /.*\\.setup\\.ts/ },\n    {\n      name: 'chromium',\n      use: {\n        ...devices['Desktop Chrome'],\n        storageState: 'tests/.auth/user.json',\n      },\n      dependencies: ['setup'],\n    },\n  ],\n});\n```\n\n## API Mocking\n\n```typescript\ntest('displays mocked data', async ({ page }) => {\n  await page.route('**/api/users', async (route) => {\n    await route.fulfill({\n      status: 200,\n      contentType: 'application/json',\n      body: JSON.stringify([{ id: 1, name: 'Mock User' }]),\n    });\n  });\n\n  await page.goto('/users');\n\n  await expect(page.getByText('Mock User')).toBeVisible();\n});\n```\n\n## Commands\n\n```bash\n# Run all tests\nnpx playwright test\n\n# Run specific file\nnpx playwright test auth.spec.ts\n\n# Run with UI mode\nnpx playwright test --ui\n\n# Run in headed mode\nnpx playwright test --headed\n\n# Run specific project\nnpx playwright test --project=chromium\n\n# Debug mode\nnpx playwright test --debug\n\n# Show report\nnpx playwright show-report\n\n# Update snapshots\nnpx playwright test --update-snapshots\n```\n\n## CI Configuration\n\n```yaml\n# .github/workflows/e2e.yml\nname: E2E Tests\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Install Playwright browsers\n        run: npx playwright install --with-deps\n\n      - name: Run tests\n        run: npx playwright test\n\n      - name: Upload report\n        uses: actions/upload-artifact@v4\n        if: always()\n        with:\n          name: playwright-report\n          path: playwright-report/\n```\n\n## Best Practices\n\n1. **Use locators** - Prefer role, label, text over CSS selectors\n2. **Wait for elements** - Use auto-waiting, avoid fixed sleeps\n3. **Independent tests** - No test should depend on another\n4. **Page Object Model** - Encapsulate page interactions\n5. **CI-specific config** - Different retries, workers for CI\n6. **Auth state reuse** - Save and restore auth state\n\n## Notes\n\n- Playwright auto-waits for elements\n- Use `--debug` to step through tests\n- Traces help debug flaky tests\n- Run in parallel for speed"
              },
              {
                "name": "radix-ui-patterns",
                "description": "Radix UI primitive components for accessible UI. Use when building accessible interactive components.",
                "path": "tech-stacks/js/react/skills/radix-ui-patterns/SKILL.md",
                "frontmatter": {
                  "name": "radix-ui-patterns",
                  "description": "Radix UI primitive components for accessible UI. Use when building accessible interactive components."
                },
                "content": "# Radix UI Patterns Skill\n\nThis skill covers Radix UI primitives for building accessible, unstyled components.\n\n## When to Use\n\nUse this skill when:\n- Building accessible UI components\n- Need keyboard navigation\n- Implementing dialogs, dropdowns, tooltips\n- Creating design system primitives\n\n## Core Principle\n\n**ACCESSIBILITY FIRST** - Radix handles focus management, keyboard navigation, and ARIA attributes. You handle styling.\n\n## Installation\n\n```bash\n# Install individual primitives\nnpm install @radix-ui/react-dialog\nnpm install @radix-ui/react-dropdown-menu\nnpm install @radix-ui/react-popover\nnpm install @radix-ui/react-tooltip\nnpm install @radix-ui/react-tabs\nnpm install @radix-ui/react-accordion\nnpm install @radix-ui/react-select\nnpm install @radix-ui/react-checkbox\nnpm install @radix-ui/react-switch\nnpm install @radix-ui/react-slider\n```\n\n## Dialog Pattern\n\n```typescript\n'use client';\n\nimport * as Dialog from '@radix-ui/react-dialog';\nimport { X } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface ModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  title: string;\n  description?: string;\n  children: React.ReactNode;\n}\n\nexport function Modal({\n  open,\n  onOpenChange,\n  title,\n  description,\n  children,\n}: ModalProps): React.ReactElement {\n  return (\n    <Dialog.Root open={open} onOpenChange={onOpenChange}>\n      <Dialog.Portal>\n        <Dialog.Overlay className=\"fixed inset-0 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\" />\n        <Dialog.Content className=\"fixed left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] bg-white rounded-lg p-6 w-full max-w-md shadow-xl data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95\">\n          <Dialog.Title className=\"text-lg font-semibold\">\n            {title}\n          </Dialog.Title>\n          {description && (\n            <Dialog.Description className=\"mt-2 text-sm text-gray-500\">\n              {description}\n            </Dialog.Description>\n          )}\n          <div className=\"mt-4\">{children}</div>\n          <Dialog.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2\">\n            <X className=\"h-4 w-4\" />\n            <span className=\"sr-only\">Close</span>\n          </Dialog.Close>\n        </Dialog.Content>\n      </Dialog.Portal>\n    </Dialog.Root>\n  );\n}\n\n// Usage\nfunction App(): React.ReactElement {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <>\n      <button onClick={() => setOpen(true)}>Open Modal</button>\n      <Modal\n        open={open}\n        onOpenChange={setOpen}\n        title=\"Confirm Action\"\n        description=\"Are you sure you want to proceed?\"\n      >\n        <div className=\"flex gap-2 justify-end\">\n          <button onClick={() => setOpen(false)}>Cancel</button>\n          <button onClick={() => { /* action */ setOpen(false); }}>\n            Confirm\n          </button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n```\n\n## Dropdown Menu Pattern\n\n```typescript\n'use client';\n\nimport * as DropdownMenu from '@radix-ui/react-dropdown-menu';\nimport { Check, ChevronRight } from 'lucide-react';\n\ninterface MenuItem {\n  label: string;\n  onSelect: () => void;\n  disabled?: boolean;\n  icon?: React.ReactNode;\n}\n\ninterface MenuProps {\n  trigger: React.ReactNode;\n  items: MenuItem[];\n}\n\nexport function Menu({ trigger, items }: MenuProps): React.ReactElement {\n  return (\n    <DropdownMenu.Root>\n      <DropdownMenu.Trigger asChild>\n        {trigger}\n      </DropdownMenu.Trigger>\n\n      <DropdownMenu.Portal>\n        <DropdownMenu.Content\n          className=\"min-w-[200px] bg-white rounded-md shadow-lg border p-1 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[side=bottom]:slide-in-from-top-2\"\n          sideOffset={5}\n        >\n          {items.map((item, index) => (\n            <DropdownMenu.Item\n              key={index}\n              disabled={item.disabled}\n              onSelect={item.onSelect}\n              className=\"flex items-center gap-2 px-2 py-1.5 text-sm rounded cursor-pointer outline-none hover:bg-gray-100 focus:bg-gray-100 data-[disabled]:opacity-50 data-[disabled]:pointer-events-none\"\n            >\n              {item.icon}\n              {item.label}\n            </DropdownMenu.Item>\n          ))}\n        </DropdownMenu.Content>\n      </DropdownMenu.Portal>\n    </DropdownMenu.Root>\n  );\n}\n\n// With sub-menus and checkboxes\nfunction AdvancedMenu(): React.ReactElement {\n  const [showBookmarks, setShowBookmarks] = useState(true);\n\n  return (\n    <DropdownMenu.Root>\n      <DropdownMenu.Trigger asChild>\n        <button>Options</button>\n      </DropdownMenu.Trigger>\n\n      <DropdownMenu.Portal>\n        <DropdownMenu.Content className=\"menu-content\">\n          <DropdownMenu.CheckboxItem\n            checked={showBookmarks}\n            onCheckedChange={setShowBookmarks}\n            className=\"menu-item\"\n          >\n            <DropdownMenu.ItemIndicator>\n              <Check className=\"h-4 w-4\" />\n            </DropdownMenu.ItemIndicator>\n            Show Bookmarks\n          </DropdownMenu.CheckboxItem>\n\n          <DropdownMenu.Separator className=\"h-px bg-gray-200 my-1\" />\n\n          <DropdownMenu.Sub>\n            <DropdownMenu.SubTrigger className=\"menu-item\">\n              More Options\n              <ChevronRight className=\"ml-auto h-4 w-4\" />\n            </DropdownMenu.SubTrigger>\n            <DropdownMenu.Portal>\n              <DropdownMenu.SubContent className=\"menu-content\">\n                <DropdownMenu.Item className=\"menu-item\">\n                  Option 1\n                </DropdownMenu.Item>\n                <DropdownMenu.Item className=\"menu-item\">\n                  Option 2\n                </DropdownMenu.Item>\n              </DropdownMenu.SubContent>\n            </DropdownMenu.Portal>\n          </DropdownMenu.Sub>\n        </DropdownMenu.Content>\n      </DropdownMenu.Portal>\n    </DropdownMenu.Root>\n  );\n}\n```\n\n## Tabs Pattern\n\n```typescript\n'use client';\n\nimport * as Tabs from '@radix-ui/react-tabs';\n\ninterface TabItem {\n  value: string;\n  label: string;\n  content: React.ReactNode;\n}\n\ninterface TabsGroupProps {\n  defaultValue: string;\n  items: TabItem[];\n}\n\nexport function TabsGroup({ defaultValue, items }: TabsGroupProps): React.ReactElement {\n  return (\n    <Tabs.Root defaultValue={defaultValue}>\n      <Tabs.List className=\"flex border-b\">\n        {items.map((item) => (\n          <Tabs.Trigger\n            key={item.value}\n            value={item.value}\n            className=\"px-4 py-2 text-sm border-b-2 border-transparent data-[state=active]:border-blue-500 data-[state=active]:text-blue-600 hover:text-gray-700\"\n          >\n            {item.label}\n          </Tabs.Trigger>\n        ))}\n      </Tabs.List>\n\n      {items.map((item) => (\n        <Tabs.Content\n          key={item.value}\n          value={item.value}\n          className=\"p-4 focus:outline-none\"\n        >\n          {item.content}\n        </Tabs.Content>\n      ))}\n    </Tabs.Root>\n  );\n}\n```\n\n## Select Pattern\n\n```typescript\n'use client';\n\nimport * as Select from '@radix-ui/react-select';\nimport { Check, ChevronDown, ChevronUp } from 'lucide-react';\n\ninterface SelectOption {\n  value: string;\n  label: string;\n}\n\ninterface SelectFieldProps {\n  value: string;\n  onValueChange: (value: string) => void;\n  options: SelectOption[];\n  placeholder?: string;\n}\n\nexport function SelectField({\n  value,\n  onValueChange,\n  options,\n  placeholder = 'Select...',\n}: SelectFieldProps): React.ReactElement {\n  return (\n    <Select.Root value={value} onValueChange={onValueChange}>\n      <Select.Trigger className=\"inline-flex items-center justify-between gap-2 px-3 py-2 text-sm bg-white border rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\">\n        <Select.Value placeholder={placeholder} />\n        <Select.Icon>\n          <ChevronDown className=\"h-4 w-4\" />\n        </Select.Icon>\n      </Select.Trigger>\n\n      <Select.Portal>\n        <Select.Content className=\"bg-white rounded-md shadow-lg border overflow-hidden\">\n          <Select.ScrollUpButton className=\"flex items-center justify-center h-6\">\n            <ChevronUp className=\"h-4 w-4\" />\n          </Select.ScrollUpButton>\n\n          <Select.Viewport className=\"p-1\">\n            {options.map((option) => (\n              <Select.Item\n                key={option.value}\n                value={option.value}\n                className=\"relative flex items-center px-8 py-2 text-sm rounded cursor-pointer outline-none hover:bg-gray-100 focus:bg-gray-100 data-[state=checked]:text-blue-600\"\n              >\n                <Select.ItemIndicator className=\"absolute left-2\">\n                  <Check className=\"h-4 w-4\" />\n                </Select.ItemIndicator>\n                <Select.ItemText>{option.label}</Select.ItemText>\n              </Select.Item>\n            ))}\n          </Select.Viewport>\n\n          <Select.ScrollDownButton className=\"flex items-center justify-center h-6\">\n            <ChevronDown className=\"h-4 w-4\" />\n          </Select.ScrollDownButton>\n        </Select.Content>\n      </Select.Portal>\n    </Select.Root>\n  );\n}\n```\n\n## Tooltip Pattern\n\n```typescript\n'use client';\n\nimport * as Tooltip from '@radix-ui/react-tooltip';\n\ninterface TooltipProps {\n  content: string;\n  children: React.ReactNode;\n  side?: 'top' | 'right' | 'bottom' | 'left';\n}\n\nexport function TooltipWrapper({\n  content,\n  children,\n  side = 'top',\n}: TooltipProps): React.ReactElement {\n  return (\n    <Tooltip.Provider delayDuration={300}>\n      <Tooltip.Root>\n        <Tooltip.Trigger asChild>\n          {children}\n        </Tooltip.Trigger>\n        <Tooltip.Portal>\n          <Tooltip.Content\n            side={side}\n            className=\"px-3 py-1.5 text-sm bg-gray-900 text-white rounded shadow-lg animate-in fade-in-0 zoom-in-95\"\n            sideOffset={5}\n          >\n            {content}\n            <Tooltip.Arrow className=\"fill-gray-900\" />\n          </Tooltip.Content>\n        </Tooltip.Portal>\n      </Tooltip.Root>\n    </Tooltip.Provider>\n  );\n}\n```\n\n## Accessibility Features\n\nRadix primitives automatically provide:\n\n- **Keyboard navigation** - Tab, Arrow keys, Enter, Escape\n- **Focus management** - Traps focus in modals, returns focus on close\n- **ARIA attributes** - Proper roles, states, and properties\n- **Screen reader announcements** - Live regions for dynamic content\n\n## Data Attributes for Styling\n\n```css\n/* Style based on state */\n[data-state=\"open\"] {\n  /* Open state styles */\n}\n\n[data-state=\"closed\"] {\n  /* Closed state styles */\n}\n\n[data-state=\"active\"] {\n  /* Active state styles */\n}\n\n[data-state=\"checked\"] {\n  /* Checked state styles */\n}\n\n[data-disabled] {\n  /* Disabled state styles */\n}\n\n[data-highlighted] {\n  /* Keyboard highlighted styles */\n}\n```\n\n## Best Practices\n\n1. **Use `asChild`** - Pass your own trigger elements\n2. **Portal content** - Render overlays outside DOM tree\n3. **Use data attributes** - Style based on component state\n4. **Add animations** - Use `data-[state=open]` for enter/exit animations\n5. **Provide sr-only labels** - For icon-only buttons\n\n## Notes\n\n- Radix is unstyled by design\n- Use with Tailwind CSS or CSS-in-JS\n- shadcn/ui is built on Radix primitives\n- All primitives are individually installable"
              },
              {
                "name": "react-19-patterns",
                "description": "React 19 features including Server Components, Actions, and use() hook. Use when building modern React applications.",
                "path": "tech-stacks/js/react/skills/react-19-patterns/SKILL.md",
                "frontmatter": {
                  "name": "react-19-patterns",
                  "description": "React 19 features including Server Components, Actions, and use() hook. Use when building modern React applications."
                },
                "content": "# React 19 Patterns Skill\n\nThis skill covers React 19 features and patterns for building modern applications.\n\n## When to Use\n\nUse this skill when:\n- Building React 19 applications\n- Implementing Server Components\n- Using Actions for form handling\n- Leveraging the use() hook\n\n## Core Principle\n\n**SERVER FIRST** - Default to Server Components, use 'use client' only when needed for interactivity.\n\n## Server Components (Default)\n\nServer Components run on the server and send HTML to the client.\n\n### Basic Server Component\n\n```typescript\n// app/users/page.tsx - Server Component (default)\nimport { getUsers } from '@/lib/api';\n\nexport default async function UsersPage(): Promise<React.ReactElement> {\n  const users = await getUsers();\n\n  return (\n    <ul>\n      {users.map((user) => (\n        <li key={user.id}>{user.name}</li>\n      ))}\n    </ul>\n  );\n}\n```\n\n### When to Use Server Components\n\n- Data fetching\n- Accessing backend resources\n- Sensitive information (API keys, tokens)\n- Large dependencies (keep on server)\n- SEO-critical content\n\n### Server Component Benefits\n\n- Zero client-side JavaScript\n- Direct database/API access\n- Smaller bundle size\n- Better initial load performance\n\n## Client Components\n\nClient Components run in the browser for interactivity.\n\n### Basic Client Component\n\n```typescript\n'use client';\n\nimport { useState } from 'react';\n\ninterface CounterProps {\n  initialValue?: number;\n}\n\nexport function Counter({ initialValue = 0 }: CounterProps): React.ReactElement {\n  const [count, setCount] = useState(initialValue);\n\n  return (\n    <button type=\"button\" onClick={() => setCount((c) => c + 1)}>\n      Count: {count}\n    </button>\n  );\n}\n```\n\n### When to Use Client Components\n\n- useState, useEffect, useReducer\n- Event listeners (onClick, onChange)\n- Browser APIs (localStorage, geolocation)\n- Custom hooks with state\n- Third-party components requiring state\n\n## Actions (Form Handling)\n\nActions replace traditional form handlers with server-side processing.\n\n### Server Action\n\n```typescript\n// app/actions.ts\n'use server';\n\nimport { revalidatePath } from 'next/cache';\nimport { redirect } from 'next/navigation';\n\nexport async function createUser(formData: FormData): Promise<void> {\n  const name = formData.get('name') as string;\n  const email = formData.get('email') as string;\n\n  await db.user.create({ data: { name, email } });\n\n  revalidatePath('/users');\n  redirect('/users');\n}\n```\n\n### Using Action in Form\n\n```typescript\n// app/users/new/page.tsx\nimport { createUser } from '../actions';\n\nexport default function NewUserPage(): React.ReactElement {\n  return (\n    <form action={createUser}>\n      <input type=\"text\" name=\"name\" required />\n      <input type=\"email\" name=\"email\" required />\n      <button type=\"submit\">Create User</button>\n    </form>\n  );\n}\n```\n\n### Action with useActionState\n\n```typescript\n'use client';\n\nimport { useActionState } from 'react';\nimport { createUser } from '../actions';\n\ninterface FormState {\n  message: string;\n  success: boolean;\n}\n\nexport function UserForm(): React.ReactElement {\n  const [state, formAction, isPending] = useActionState<FormState, FormData>(\n    createUser,\n    { message: '', success: false }\n  );\n\n  return (\n    <form action={formAction}>\n      <input type=\"text\" name=\"name\" required disabled={isPending} />\n      <input type=\"email\" name=\"email\" required disabled={isPending} />\n      <button type=\"submit\" disabled={isPending}>\n        {isPending ? 'Creating...' : 'Create User'}\n      </button>\n      {state.message && <p>{state.message}</p>}\n    </form>\n  );\n}\n```\n\n## use() Hook\n\nThe use() hook reads values from promises and contexts.\n\n### Reading Promises\n\n```typescript\n'use client';\n\nimport { use } from 'react';\n\ninterface User {\n  id: string;\n  name: string;\n}\n\nfunction UserProfile({ userPromise }: { userPromise: Promise<User> }): React.ReactElement {\n  const user = use(userPromise); // Suspends until resolved\n\n  return <h1>{user.name}</h1>;\n}\n\n// Usage with Suspense\nfunction UserPage(): React.ReactElement {\n  const userPromise = fetchUser('123');\n\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <UserProfile userPromise={userPromise} />\n    </Suspense>\n  );\n}\n```\n\n### Reading Context Conditionally\n\n```typescript\n'use client';\n\nimport { use, createContext } from 'react';\n\nconst ThemeContext = createContext<'light' | 'dark'>('light');\n\nfunction Button({ showIcon }: { showIcon: boolean }): React.ReactElement {\n  // Can use conditionally (unlike useContext)\n  if (showIcon) {\n    const theme = use(ThemeContext);\n    return <button className={theme}>With Icon</button>;\n  }\n  return <button>Without Icon</button>;\n}\n```\n\n## Suspense Boundaries\n\n### Data Loading with Suspense\n\n```typescript\nimport { Suspense } from 'react';\n\nexport default function Dashboard(): React.ReactElement {\n  return (\n    <div>\n      <h1>Dashboard</h1>\n\n      <Suspense fallback={<UserSkeleton />}>\n        <UserInfo />\n      </Suspense>\n\n      <Suspense fallback={<StatsSkeleton />}>\n        <Stats />\n      </Suspense>\n    </div>\n  );\n}\n```\n\n### Streaming with Suspense\n\n```typescript\n// app/page.tsx\nimport { Suspense } from 'react';\n\nexport default function Page(): React.ReactElement {\n  return (\n    <main>\n      {/* Renders immediately */}\n      <Header />\n\n      {/* Streams when ready */}\n      <Suspense fallback={<Loading />}>\n        <SlowComponent />\n      </Suspense>\n\n      {/* Renders immediately */}\n      <Footer />\n    </main>\n  );\n}\n```\n\n## Component Composition Patterns\n\n### Server + Client Components\n\n```typescript\n// ServerWrapper.tsx (Server Component)\nimport { getData } from '@/lib/api';\nimport { InteractiveList } from './InteractiveList';\n\nexport async function ServerWrapper(): Promise<React.ReactElement> {\n  const data = await getData();\n\n  return <InteractiveList items={data} />;\n}\n\n// InteractiveList.tsx (Client Component)\n'use client';\n\nimport { useState } from 'react';\n\ninterface InteractiveListProps {\n  items: Item[];\n}\n\nexport function InteractiveList({ items }: InteractiveListProps): React.ReactElement {\n  const [selected, setSelected] = useState<string | null>(null);\n\n  return (\n    <ul>\n      {items.map((item) => (\n        <li\n          key={item.id}\n          onClick={() => setSelected(item.id)}\n          className={selected === item.id ? 'selected' : ''}\n        >\n          {item.name}\n        </li>\n      ))}\n    </ul>\n  );\n}\n```\n\n### Passing Server Components as Children\n\n```typescript\n// ClientWrapper.tsx\n'use client';\n\nimport { useState } from 'react';\n\ninterface ClientWrapperProps {\n  children: React.ReactNode;\n}\n\nexport function ClientWrapper({ children }: ClientWrapperProps): React.ReactElement {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <div>\n      <button type=\"button\" onClick={() => setIsOpen(!isOpen)}>\n        Toggle\n      </button>\n      {isOpen && children}\n    </div>\n  );\n}\n\n// Page.tsx (Server Component)\nimport { ClientWrapper } from './ClientWrapper';\nimport { ServerContent } from './ServerContent';\n\nexport default function Page(): React.ReactElement {\n  return (\n    <ClientWrapper>\n      <ServerContent /> {/* Server Component as child */}\n    </ClientWrapper>\n  );\n}\n```\n\n## Best Practices\n\n1. **Default to Server Components** - Only use 'use client' when needed\n2. **Lift state up** - Keep interactive boundaries small\n3. **Use Suspense** - Provide loading states\n4. **Collocate Actions** - Keep actions near their forms\n5. **Stream UI** - Use Suspense for progressive rendering\n\n## Migration from React 18\n\n| React 18 | React 19 |\n|----------|----------|\n| useEffect for data | async Server Component |\n| useState + fetch | Server Action |\n| Context.Consumer | use(Context) |\n| Promise.then() | use(Promise) |\n\n## Notes\n\n- Server Components are the default in Next.js App Router\n- Actions must be marked with 'use server'\n- use() can only be called during render\n- Suspense boundaries catch thrown promises"
              },
              {
                "name": "responsive-design",
                "description": "Mobile-first responsive design patterns. Use when building responsive layouts and components.",
                "path": "tech-stacks/js/react/skills/responsive-design/SKILL.md",
                "frontmatter": {
                  "name": "responsive-design",
                  "description": "Mobile-first responsive design patterns. Use when building responsive layouts and components."
                },
                "content": "# Responsive Design Skill\n\nThis skill covers mobile-first responsive design patterns for React applications.\n\n## When to Use\n\nUse this skill when:\n- Building responsive layouts\n- Creating mobile-first designs\n- Implementing adaptive components\n- Handling different screen sizes\n\n## Core Principle\n\n**MOBILE FIRST** - Design for mobile, then enhance for larger screens. This results in simpler, more maintainable CSS.\n\n## Breakpoints\n\n### Tailwind CSS Default Breakpoints\n\n| Breakpoint | Min Width | CSS |\n|------------|-----------|-----|\n| (default) | 0px | Base styles |\n| sm | 640px | `@media (min-width: 640px)` |\n| md | 768px | `@media (min-width: 768px)` |\n| lg | 1024px | `@media (min-width: 1024px)` |\n| xl | 1280px | `@media (min-width: 1280px)` |\n| 2xl | 1536px | `@media (min-width: 1536px)` |\n\n### Mobile First Approach\n\n```typescript\n// Start with mobile styles, add breakpoints for larger screens\n<div className=\"\n  w-full          // Mobile: full width\n  sm:w-1/2        // >=640px: half width\n  lg:w-1/3        // >=1024px: third width\n  xl:w-1/4        // >=1280px: quarter width\n\">\n```\n\n## Layout Patterns\n\n### Responsive Container\n\n```typescript\nfunction Container({ children }: { children: React.ReactNode }): React.ReactElement {\n  return (\n    <div className=\"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8\">\n      {children}\n    </div>\n  );\n}\n```\n\n### Responsive Grid\n\n```typescript\n// Basic responsive grid\n<div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n  {items.map((item) => (\n    <Card key={item.id} {...item} />\n  ))}\n</div>\n\n// Auto-fill grid (flexible columns)\n<div className=\"grid gap-4 grid-cols-[repeat(auto-fill,minmax(250px,1fr))]\">\n  {items.map((item) => (\n    <Card key={item.id} {...item} />\n  ))}\n</div>\n```\n\n### Responsive Flexbox\n\n```typescript\n// Stack on mobile, row on desktop\n<div className=\"flex flex-col gap-4 sm:flex-row sm:items-center\">\n  <div>Item 1</div>\n  <div>Item 2</div>\n  <div>Item 3</div>\n</div>\n\n// Reverse order on mobile\n<div className=\"flex flex-col-reverse gap-4 lg:flex-row\">\n  <aside className=\"w-full lg:w-64\">Sidebar</aside>\n  <main className=\"flex-1\">Content</main>\n</div>\n```\n\n### Responsive Sidebar Layout\n\n```typescript\nfunction DashboardLayout({ children }: { children: React.ReactNode }): React.ReactElement {\n  return (\n    <div className=\"min-h-screen lg:flex\">\n      {/* Sidebar - hidden on mobile, fixed on desktop */}\n      <aside className=\"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col\">\n        <nav className=\"flex flex-1 flex-col bg-gray-900 px-4 py-6\">\n          {/* Navigation items */}\n        </nav>\n      </aside>\n\n      {/* Mobile header */}\n      <header className=\"sticky top-0 z-40 flex h-16 items-center bg-white shadow lg:hidden\">\n        <button className=\"px-4\">\n          <MenuIcon />\n        </button>\n      </header>\n\n      {/* Main content */}\n      <main className=\"flex-1 lg:pl-64\">\n        <div className=\"px-4 py-6 sm:px-6 lg:px-8\">\n          {children}\n        </div>\n      </main>\n    </div>\n  );\n}\n```\n\n## Component Patterns\n\n### Responsive Navigation\n\n```typescript\n'use client';\n\nimport { useState } from 'react';\nimport { Menu, X } from 'lucide-react';\n\nfunction Navigation(): React.ReactElement {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <nav className=\"bg-white shadow\">\n      <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex h-16 justify-between\">\n          {/* Logo */}\n          <div className=\"flex items-center\">\n            <Logo />\n          </div>\n\n          {/* Desktop navigation */}\n          <div className=\"hidden sm:flex sm:items-center sm:space-x-8\">\n            <NavLink href=\"/\">Home</NavLink>\n            <NavLink href=\"/about\">About</NavLink>\n            <NavLink href=\"/contact\">Contact</NavLink>\n          </div>\n\n          {/* Mobile menu button */}\n          <div className=\"flex items-center sm:hidden\">\n            <button\n              onClick={() => setIsOpen(!isOpen)}\n              className=\"inline-flex items-center justify-center p-2\"\n            >\n              {isOpen ? <X /> : <Menu />}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile menu */}\n      {isOpen && (\n        <div className=\"sm:hidden\">\n          <div className=\"space-y-1 px-2 pb-3 pt-2\">\n            <MobileNavLink href=\"/\">Home</MobileNavLink>\n            <MobileNavLink href=\"/about\">About</MobileNavLink>\n            <MobileNavLink href=\"/contact\">Contact</MobileNavLink>\n          </div>\n        </div>\n      )}\n    </nav>\n  );\n}\n```\n\n### Responsive Card\n\n```typescript\nfunction ProductCard({ product }: { product: Product }): React.ReactElement {\n  return (\n    <div className=\"\n      flex flex-col\n      sm:flex-row\n      lg:flex-col\n      rounded-lg border bg-white shadow-sm overflow-hidden\n    \">\n      {/* Image - full width on mobile, side on tablet, full on desktop */}\n      <div className=\"\n        w-full\n        sm:w-48 sm:flex-shrink-0\n        lg:w-full\n      \">\n        <img\n          src={product.image}\n          alt={product.name}\n          className=\"h-48 w-full object-cover sm:h-full lg:h-48\"\n        />\n      </div>\n\n      {/* Content */}\n      <div className=\"flex flex-1 flex-col p-4\">\n        <h3 className=\"text-lg font-semibold\">{product.name}</h3>\n        <p className=\"mt-1 text-sm text-gray-500 line-clamp-2\">\n          {product.description}\n        </p>\n        <div className=\"mt-auto pt-4\">\n          <span className=\"text-lg font-bold\">${product.price}</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n```\n\n### Responsive Table\n\n```typescript\n// Table on desktop, cards on mobile\nfunction ResponsiveTable({ data }: { data: User[] }): React.ReactElement {\n  return (\n    <>\n      {/* Mobile cards */}\n      <div className=\"space-y-4 md:hidden\">\n        {data.map((user) => (\n          <div key={user.id} className=\"rounded-lg border bg-white p-4\">\n            <div className=\"font-medium\">{user.name}</div>\n            <div className=\"mt-1 text-sm text-gray-500\">{user.email}</div>\n            <div className=\"mt-2 text-sm\">\n              <span className=\"font-medium\">Role:</span> {user.role}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Desktop table */}\n      <table className=\"hidden w-full md:table\">\n        <thead>\n          <tr className=\"border-b\">\n            <th className=\"px-4 py-3 text-left\">Name</th>\n            <th className=\"px-4 py-3 text-left\">Email</th>\n            <th className=\"px-4 py-3 text-left\">Role</th>\n          </tr>\n        </thead>\n        <tbody>\n          {data.map((user) => (\n            <tr key={user.id} className=\"border-b\">\n              <td className=\"px-4 py-3\">{user.name}</td>\n              <td className=\"px-4 py-3\">{user.email}</td>\n              <td className=\"px-4 py-3\">{user.role}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </>\n  );\n}\n```\n\n## Typography\n\n### Responsive Text Sizes\n\n```typescript\n<h1 className=\"text-2xl font-bold sm:text-3xl lg:text-4xl xl:text-5xl\">\n  Responsive Heading\n</h1>\n\n<p className=\"text-sm sm:text-base lg:text-lg\">\n  Responsive paragraph text.\n</p>\n```\n\n### Fluid Typography (CSS Clamp)\n\n```css\n/* globals.css */\n.fluid-heading {\n  font-size: clamp(1.5rem, 5vw, 3rem);\n}\n```\n\n## Spacing\n\n### Responsive Padding/Margin\n\n```typescript\n<section className=\"py-8 sm:py-12 lg:py-16 xl:py-20\">\n  <div className=\"px-4 sm:px-6 lg:px-8\">\n    Content with responsive spacing\n  </div>\n</section>\n```\n\n## useMediaQuery Hook\n\n```typescript\nimport { useState, useEffect } from 'react';\n\nexport function useMediaQuery(query: string): boolean {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    const media = window.matchMedia(query);\n    if (media.matches !== matches) {\n      setMatches(media.matches);\n    }\n    const listener = (): void => setMatches(media.matches);\n    media.addEventListener('change', listener);\n    return () => media.removeEventListener('change', listener);\n  }, [matches, query]);\n\n  return matches;\n}\n\n// Usage\nfunction Component(): React.ReactElement {\n  const isDesktop = useMediaQuery('(min-width: 1024px)');\n\n  return isDesktop ? <DesktopView /> : <MobileView />;\n}\n```\n\n## Best Practices\n\n1. **Mobile first** - Start with mobile styles\n2. **Use breakpoints consistently** - Stick to Tailwind defaults\n3. **Test on real devices** - Emulators aren't perfect\n4. **Consider touch targets** - Min 44x44px on mobile\n5. **Use semantic HTML** - Improves accessibility\n6. **Avoid fixed widths** - Use relative/fluid sizing\n\n## Accessibility Considerations\n\n- Ensure touch targets are at least 44x44px on mobile\n- Don't hide critical content on mobile\n- Test with screen readers at all breakpoints\n- Ensure text remains readable when zoomed\n\n## Notes\n\n- Test at various breakpoints, not just exact values\n- Consider landscape orientation on mobile\n- Use Container Queries for component-level responsiveness (Tailwind v3.4+)"
              },
              {
                "name": "shadcn-ui-setup",
                "description": "shadcn/ui component library setup and customization. Use when building UIs with pre-built components.",
                "path": "tech-stacks/js/react/skills/shadcn-ui-setup/SKILL.md",
                "frontmatter": {
                  "name": "shadcn-ui-setup",
                  "description": "shadcn/ui component library setup and customization. Use when building UIs with pre-built components."
                },
                "content": "# shadcn/ui Setup Skill\n\nThis skill covers shadcn/ui component library installation and customization.\n\n## When to Use\n\nUse this skill when:\n- Need pre-styled accessible components\n- Building design systems quickly\n- Want full control over component code\n- Using Tailwind CSS\n\n## Core Principle\n\n**COPY, DON'T IMPORT** - shadcn/ui components are copied into your codebase. You own and customize them fully.\n\n## Installation\n\n### Initialize Project\n\n```bash\n# For new Next.js project\nnpx create-next-app@latest my-app --typescript --tailwind --eslint\n\n# Initialize shadcn/ui\nnpx shadcn@latest init\n```\n\n### Configuration Options\n\n```text\nWould you like to use TypeScript? yes\nWhich style would you like to use? Default\nWhich color would you like to use as base color? Slate\nWhere is your global CSS file? app/globals.css\nWould you like to use CSS variables for colors? yes\nWhere is your tailwind.config.ts located? tailwind.config.ts\nConfigure the import alias for components: @/components\nConfigure the import alias for utils: @/lib/utils\nAre you using React Server Components? yes\n```\n\n### Generated Configuration\n\n```json\n// components.json\n{\n  \"$schema\": \"https://ui.shadcn.com/schema.json\",\n  \"style\": \"default\",\n  \"rsc\": true,\n  \"tsx\": true,\n  \"tailwind\": {\n    \"config\": \"tailwind.config.ts\",\n    \"css\": \"app/globals.css\",\n    \"baseColor\": \"slate\",\n    \"cssVariables\": true,\n    \"prefix\": \"\"\n  },\n  \"aliases\": {\n    \"components\": \"@/components\",\n    \"utils\": \"@/lib/utils\"\n  }\n}\n```\n\n## Adding Components\n\n```bash\n# Add individual components\nnpx shadcn@latest add button\nnpx shadcn@latest add card\nnpx shadcn@latest add dialog\nnpx shadcn@latest add dropdown-menu\nnpx shadcn@latest add form\nnpx shadcn@latest add input\nnpx shadcn@latest add select\nnpx shadcn@latest add tabs\nnpx shadcn@latest add toast\n\n# Add multiple components\nnpx shadcn@latest add button card dialog\n\n# Add all components\nnpx shadcn@latest add --all\n```\n\n## Component Structure\n\n```\nsrc/\nâ”œâ”€â”€ components/\nâ”‚   â””â”€â”€ ui/\nâ”‚       â”œâ”€â”€ button.tsx\nâ”‚       â”œâ”€â”€ card.tsx\nâ”‚       â”œâ”€â”€ dialog.tsx\nâ”‚       â””â”€â”€ ...\nâ”œâ”€â”€ lib/\nâ”‚   â””â”€â”€ utils.ts\nâ””â”€â”€ app/\n    â””â”€â”€ globals.css\n```\n\n## Utility Function\n\n```typescript\n// lib/utils.ts\nimport { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]): string {\n  return twMerge(clsx(inputs));\n}\n```\n\n## Using Components\n\n### Button\n\n```typescript\nimport { Button } from '@/components/ui/button';\n\nfunction App(): React.ReactElement {\n  return (\n    <div className=\"flex gap-2\">\n      <Button variant=\"default\">Default</Button>\n      <Button variant=\"secondary\">Secondary</Button>\n      <Button variant=\"destructive\">Destructive</Button>\n      <Button variant=\"outline\">Outline</Button>\n      <Button variant=\"ghost\">Ghost</Button>\n      <Button variant=\"link\">Link</Button>\n\n      <Button size=\"sm\">Small</Button>\n      <Button size=\"lg\">Large</Button>\n      <Button size=\"icon\"><Icon /></Button>\n\n      <Button disabled>Disabled</Button>\n      <Button asChild>\n        <a href=\"/about\">Link as Button</a>\n      </Button>\n    </div>\n  );\n}\n```\n\n### Card\n\n```typescript\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\n\nfunction UserCard({ user }: { user: User }): React.ReactElement {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>{user.name}</CardTitle>\n        <CardDescription>{user.email}</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <p>{user.bio}</p>\n      </CardContent>\n      <CardFooter className=\"flex justify-between\">\n        <Button variant=\"outline\">Cancel</Button>\n        <Button>Save</Button>\n      </CardFooter>\n    </Card>\n  );\n}\n```\n\n### Dialog\n\n```typescript\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\n\nfunction ConfirmDialog(): React.ReactElement {\n  return (\n    <Dialog>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\">Delete</Button>\n      </DialogTrigger>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Are you sure?</DialogTitle>\n          <DialogDescription>\n            This action cannot be undone.\n          </DialogDescription>\n        </DialogHeader>\n        <DialogFooter>\n          <Button variant=\"outline\">Cancel</Button>\n          <Button variant=\"destructive\">Delete</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n```\n\n### Form with React Hook Form + Zod\n\n```typescript\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { useForm } from 'react-hook-form';\nimport { z } from 'zod';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\n\nconst formSchema = z.object({\n  username: z.string().min(2).max(50),\n  email: z.string().email(),\n});\n\ntype FormValues = z.infer<typeof formSchema>;\n\nfunction ProfileForm(): React.ReactElement {\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      username: '',\n      email: '',\n    },\n  });\n\n  function onSubmit(values: FormValues): void {\n    console.log(values);\n  }\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8\">\n        <FormField\n          control={form.control}\n          name=\"username\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Username</FormLabel>\n              <FormControl>\n                <Input placeholder=\"johndoe\" {...field} />\n              </FormControl>\n              <FormDescription>\n                Your public display name.\n              </FormDescription>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"email\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Email</FormLabel>\n              <FormControl>\n                <Input type=\"email\" {...field} />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <Button type=\"submit\">Submit</Button>\n      </form>\n    </Form>\n  );\n}\n```\n\n## Customizing Components\n\n### Adding Variants\n\n```typescript\n// components/ui/button.tsx\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground shadow hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90',\n        outline: 'border border-input bg-background shadow-sm hover:bg-accent',\n        secondary: 'bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n        // Add custom variants\n        success: 'bg-green-500 text-white hover:bg-green-600',\n        warning: 'bg-yellow-500 text-white hover:bg-yellow-600',\n      },\n      size: {\n        default: 'h-9 px-4 py-2',\n        sm: 'h-8 rounded-md px-3 text-xs',\n        lg: 'h-10 rounded-md px-8',\n        icon: 'h-9 w-9',\n        // Add custom sizes\n        xl: 'h-12 rounded-md px-10 text-base',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n);\n```\n\n### Customizing Theme Colors\n\n```css\n/* app/globals.css */\n@layer base {\n  :root {\n    --background: 0 0% 100%;\n    --foreground: 222.2 84% 4.9%;\n    --primary: 222.2 47.4% 11.2%;\n    --primary-foreground: 210 40% 98%;\n    /* Add custom colors */\n    --success: 142 76% 36%;\n    --success-foreground: 0 0% 100%;\n    --warning: 38 92% 50%;\n    --warning-foreground: 0 0% 100%;\n  }\n\n  .dark {\n    --background: 222.2 84% 4.9%;\n    --foreground: 210 40% 98%;\n    /* Dark mode colors */\n  }\n}\n```\n\n## Best Practices\n\n1. **Don't modify node_modules** - Components are in your codebase\n2. **Use cn() utility** - For conditional classes\n3. **Keep variants consistent** - Follow existing patterns\n4. **Customize at theme level** - Use CSS variables\n5. **Document customizations** - For team consistency\n\n## Common Patterns\n\n### Loading Button\n\n```typescript\n<Button disabled={isLoading}>\n  {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n  {isLoading ? 'Loading...' : 'Submit'}\n</Button>\n```\n\n### Responsive Dialog\n\n```typescript\nimport {\n  Dialog,\n  DialogContent,\n} from '@/components/ui/dialog';\nimport {\n  Drawer,\n  DrawerContent,\n} from '@/components/ui/drawer';\nimport { useMediaQuery } from '@/hooks/use-media-query';\n\nfunction ResponsiveDialog({ open, onOpenChange, children }: Props): React.ReactElement {\n  const isDesktop = useMediaQuery('(min-width: 768px)');\n\n  if (isDesktop) {\n    return (\n      <Dialog open={open} onOpenChange={onOpenChange}>\n        <DialogContent>{children}</DialogContent>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Drawer open={open} onOpenChange={onOpenChange}>\n      <DrawerContent>{children}</DrawerContent>\n    </Drawer>\n  );\n}\n```\n\n## Notes\n\n- shadcn/ui is built on Radix UI primitives\n- All components are fully accessible\n- Works with React Server Components\n- No runtime dependency (code is yours)"
              },
              {
                "name": "tailwind-setup",
                "description": "Tailwind CSS 4.x configuration and patterns. Use when setting up or customizing Tailwind CSS.",
                "path": "tech-stacks/js/react/skills/tailwind-setup/SKILL.md",
                "frontmatter": {
                  "name": "tailwind-setup",
                  "description": "Tailwind CSS 4.x configuration and patterns. Use when setting up or customizing Tailwind CSS."
                },
                "content": "# Tailwind CSS Setup Skill\n\nThis skill covers Tailwind CSS 4.x configuration for React applications.\n\n## When to Use\n\nUse this skill when:\n- Setting up Tailwind CSS\n- Customizing theme and colors\n- Creating utility patterns\n- Configuring dark mode\n\n## Core Principle\n\n**UTILITY FIRST** - Build designs with utility classes. Extract components only when patterns repeat.\n\n## Installation\n\n### Vite\n\n```bash\nnpm install -D tailwindcss postcss autoprefixer\nnpx tailwindcss init -p\n```\n\n### Next.js\n\n```bash\n# Included with create-next-app --tailwind\n# Or install manually:\nnpm install -D tailwindcss postcss autoprefixer\nnpx tailwindcss init -p\n```\n\n## Configuration\n\n```typescript\n// tailwind.config.ts\nimport type { Config } from 'tailwindcss';\n\nconst config: Config = {\n  content: [\n    './src/**/*.{js,ts,jsx,tsx,mdx}',\n    './app/**/*.{js,ts,jsx,tsx,mdx}',\n    './components/**/*.{js,ts,jsx,tsx,mdx}',\n  ],\n  darkMode: 'class',\n  theme: {\n    extend: {\n      colors: {\n        border: 'hsl(var(--border))',\n        background: 'hsl(var(--background))',\n        foreground: 'hsl(var(--foreground))',\n        primary: {\n          DEFAULT: 'hsl(var(--primary))',\n          foreground: 'hsl(var(--primary-foreground))',\n        },\n        secondary: {\n          DEFAULT: 'hsl(var(--secondary))',\n          foreground: 'hsl(var(--secondary-foreground))',\n        },\n        destructive: {\n          DEFAULT: 'hsl(var(--destructive))',\n          foreground: 'hsl(var(--destructive-foreground))',\n        },\n        muted: {\n          DEFAULT: 'hsl(var(--muted))',\n          foreground: 'hsl(var(--muted-foreground))',\n        },\n        accent: {\n          DEFAULT: 'hsl(var(--accent))',\n          foreground: 'hsl(var(--accent-foreground))',\n        },\n      },\n      fontFamily: {\n        sans: ['var(--font-sans)', 'system-ui', 'sans-serif'],\n        mono: ['var(--font-mono)', 'monospace'],\n      },\n      borderRadius: {\n        lg: 'var(--radius)',\n        md: 'calc(var(--radius) - 2px)',\n        sm: 'calc(var(--radius) - 4px)',\n      },\n      keyframes: {\n        'accordion-down': {\n          from: { height: '0' },\n          to: { height: 'var(--radix-accordion-content-height)' },\n        },\n        'accordion-up': {\n          from: { height: 'var(--radix-accordion-content-height)' },\n          to: { height: '0' },\n        },\n      },\n      animation: {\n        'accordion-down': 'accordion-down 0.2s ease-out',\n        'accordion-up': 'accordion-up 0.2s ease-out',\n      },\n    },\n  },\n  plugins: [\n    require('@tailwindcss/typography'),\n    require('@tailwindcss/forms'),\n    require('tailwindcss-animate'),\n  ],\n};\n\nexport default config;\n```\n\n## CSS Variables Setup\n\n```css\n/* globals.css */\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  :root {\n    --background: 0 0% 100%;\n    --foreground: 222.2 84% 4.9%;\n    --card: 0 0% 100%;\n    --card-foreground: 222.2 84% 4.9%;\n    --popover: 0 0% 100%;\n    --popover-foreground: 222.2 84% 4.9%;\n    --primary: 222.2 47.4% 11.2%;\n    --primary-foreground: 210 40% 98%;\n    --secondary: 210 40% 96.1%;\n    --secondary-foreground: 222.2 47.4% 11.2%;\n    --muted: 210 40% 96.1%;\n    --muted-foreground: 215.4 16.3% 46.9%;\n    --accent: 210 40% 96.1%;\n    --accent-foreground: 222.2 47.4% 11.2%;\n    --destructive: 0 84.2% 60.2%;\n    --destructive-foreground: 210 40% 98%;\n    --border: 214.3 31.8% 91.4%;\n    --input: 214.3 31.8% 91.4%;\n    --ring: 222.2 84% 4.9%;\n    --radius: 0.5rem;\n  }\n\n  .dark {\n    --background: 222.2 84% 4.9%;\n    --foreground: 210 40% 98%;\n    --card: 222.2 84% 4.9%;\n    --card-foreground: 210 40% 98%;\n    --popover: 222.2 84% 4.9%;\n    --popover-foreground: 210 40% 98%;\n    --primary: 210 40% 98%;\n    --primary-foreground: 222.2 47.4% 11.2%;\n    --secondary: 217.2 32.6% 17.5%;\n    --secondary-foreground: 210 40% 98%;\n    --muted: 217.2 32.6% 17.5%;\n    --muted-foreground: 215 20.2% 65.1%;\n    --accent: 217.2 32.6% 17.5%;\n    --accent-foreground: 210 40% 98%;\n    --destructive: 0 62.8% 30.6%;\n    --destructive-foreground: 210 40% 98%;\n    --border: 217.2 32.6% 17.5%;\n    --input: 217.2 32.6% 17.5%;\n    --ring: 212.7 26.8% 83.9%;\n  }\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n```\n\n## Common Patterns\n\n### Container with Max Width\n\n```typescript\nfunction Container({ children }: { children: React.ReactNode }): React.ReactElement {\n  return (\n    <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n      {children}\n    </div>\n  );\n}\n```\n\n### Responsive Grid\n\n```typescript\nfunction Grid({ children }: { children: React.ReactNode }): React.ReactElement {\n  return (\n    <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n      {children}\n    </div>\n  );\n}\n```\n\n### Flex Layouts\n\n```typescript\n// Horizontal center\n<div className=\"flex items-center justify-center\">\n\n// Space between\n<div className=\"flex items-center justify-between\">\n\n// Vertical stack\n<div className=\"flex flex-col space-y-4\">\n\n// Horizontal stack with gap\n<div className=\"flex items-center gap-4\">\n```\n\n### Card Pattern\n\n```typescript\nfunction Card({ children }: { children: React.ReactNode }): React.ReactElement {\n  return (\n    <div className=\"rounded-lg border bg-card p-6 shadow-sm\">\n      {children}\n    </div>\n  );\n}\n```\n\n### Button Variants\n\n```typescript\n// Primary\n<button className=\"bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 rounded-md\">\n\n// Secondary\n<button className=\"bg-secondary text-secondary-foreground hover:bg-secondary/80 h-10 px-4 rounded-md\">\n\n// Outline\n<button className=\"border border-input bg-background hover:bg-accent h-10 px-4 rounded-md\">\n\n// Ghost\n<button className=\"hover:bg-accent hover:text-accent-foreground h-10 px-4 rounded-md\">\n```\n\n### Form Input\n\n```typescript\n<input\n  type=\"text\"\n  className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\n/>\n```\n\n## Dark Mode\n\n### Class-Based (Recommended)\n\n```typescript\n// tailwind.config.ts\ndarkMode: 'class',\n\n// Toggle dark mode\nfunction ThemeToggle(): React.ReactElement {\n  const [theme, setTheme] = useState<'light' | 'dark'>('light');\n\n  useEffect(() => {\n    document.documentElement.classList.toggle('dark', theme === 'dark');\n  }, [theme]);\n\n  return (\n    <button onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}>\n      Toggle Theme\n    </button>\n  );\n}\n```\n\n### Using dark: Modifier\n\n```typescript\n<div className=\"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100\">\n  Adapts to dark mode\n</div>\n```\n\n## Responsive Design\n\n```typescript\n// Mobile first breakpoints\n// sm: 640px\n// md: 768px\n// lg: 1024px\n// xl: 1280px\n// 2xl: 1536px\n\n<div className=\"\n  text-sm\n  sm:text-base\n  md:text-lg\n  lg:text-xl\n\">\n  Responsive text\n</div>\n\n<div className=\"\n  w-full\n  sm:w-1/2\n  md:w-1/3\n  lg:w-1/4\n\">\n  Responsive width\n</div>\n```\n\n## Custom Components\n\n### Creating Reusable Classes\n\n```css\n/* globals.css */\n@layer components {\n  .btn {\n    @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none;\n  }\n\n  .btn-primary {\n    @apply bg-primary text-primary-foreground hover:bg-primary/90;\n  }\n\n  .btn-secondary {\n    @apply bg-secondary text-secondary-foreground hover:bg-secondary/80;\n  }\n}\n```\n\n## cn() Utility\n\n```typescript\n// lib/utils.ts\nimport { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]): string {\n  return twMerge(clsx(inputs));\n}\n\n// Usage\n<div className={cn(\n  'base-class',\n  isActive && 'active-class',\n  variant === 'primary' ? 'primary-class' : 'secondary-class'\n)}>\n```\n\n## Best Practices\n\n1. **Mobile first** - Start with mobile, add breakpoints\n2. **Use design tokens** - CSS variables for consistency\n3. **Extract components** - When patterns repeat 3+ times\n4. **Use cn()** - For conditional/merged classes\n5. **Avoid @apply overuse** - Utilities in JSX are fine\n\n## Notes\n\n- Tailwind CSS 4.x uses native CSS nesting\n- PurgeCSS is built-in (only used classes in bundle)\n- Use VS Code Tailwind CSS IntelliSense extension\n- PostCSS config is required"
              },
              {
                "name": "tanstack-query-setup",
                "description": "TanStack Query setup for data fetching and caching. Use when implementing server state management.",
                "path": "tech-stacks/js/react/skills/tanstack-query-setup/SKILL.md",
                "frontmatter": {
                  "name": "tanstack-query-setup",
                  "description": "TanStack Query setup for data fetching and caching. Use when implementing server state management."
                },
                "content": "# TanStack Query Setup Skill\n\nThis skill covers TanStack Query (React Query) for server state management.\n\n## When to Use\n\nUse this skill when:\n- Fetching data from APIs\n- Implementing caching strategies\n- Handling mutations with optimistic updates\n- Managing server state\n\n## Core Principle\n\n**SERVER STATE IS DIFFERENT** - Server state is async, cached, and can become stale. TanStack Query handles this complexity.\n\n## Installation & Setup\n\n```bash\nnpm install @tanstack/react-query\n```\n\n```typescript\n// app/providers.tsx\n'use client';\n\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { useState } from 'react';\n\nexport function Providers({ children }: { children: React.ReactNode }): React.ReactElement {\n  const [queryClient] = useState(\n    () =>\n      new QueryClient({\n        defaultOptions: {\n          queries: {\n            staleTime: 60 * 1000, // 1 minute\n            gcTime: 5 * 60 * 1000, // 5 minutes (formerly cacheTime)\n            retry: 1,\n            refetchOnWindowFocus: false,\n          },\n        },\n      })\n  );\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {children}\n      <ReactQueryDevtools initialIsOpen={false} />\n    </QueryClientProvider>\n  );\n}\n```\n\n## Query Keys Factory\n\n```typescript\n// lib/queryKeys.ts\nexport const userKeys = {\n  all: ['users'] as const,\n  lists: () => [...userKeys.all, 'list'] as const,\n  list: (filters: UserFilters) => [...userKeys.lists(), filters] as const,\n  details: () => [...userKeys.all, 'detail'] as const,\n  detail: (id: string) => [...userKeys.details(), id] as const,\n};\n\nexport const postKeys = {\n  all: ['posts'] as const,\n  lists: () => [...postKeys.all, 'list'] as const,\n  list: (filters: PostFilters) => [...postKeys.lists(), filters] as const,\n  details: () => [...postKeys.all, 'detail'] as const,\n  detail: (id: string) => [...postKeys.details(), id] as const,\n  byUser: (userId: string) => [...postKeys.all, 'user', userId] as const,\n};\n```\n\n## Basic Query\n\n```typescript\nimport { useQuery } from '@tanstack/react-query';\nimport { userKeys } from '@/lib/queryKeys';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n}\n\nasync function fetchUser(id: string): Promise<User> {\n  const response = await fetch(`/api/users/${id}`);\n  if (!response.ok) {\n    throw new Error('Failed to fetch user');\n  }\n  return response.json();\n}\n\nexport function useUser(userId: string) {\n  return useQuery({\n    queryKey: userKeys.detail(userId),\n    queryFn: () => fetchUser(userId),\n    staleTime: 5 * 60 * 1000, // 5 minutes\n    enabled: !!userId, // Only fetch if userId exists\n  });\n}\n\n// Usage in component\nfunction UserProfile({ userId }: { userId: string }): React.ReactElement {\n  const { data: user, isLoading, error } = useUser(userId);\n\n  if (isLoading) return <Loading />;\n  if (error) return <Error message={error.message} />;\n  if (!user) return <NotFound />;\n\n  return <div>{user.name}</div>;\n}\n```\n\n## Query with Parameters\n\n```typescript\ninterface UserFilters {\n  page: number;\n  limit: number;\n  search?: string;\n}\n\ninterface UsersResponse {\n  users: User[];\n  total: number;\n  page: number;\n}\n\nasync function fetchUsers(filters: UserFilters): Promise<UsersResponse> {\n  const params = new URLSearchParams({\n    page: String(filters.page),\n    limit: String(filters.limit),\n    ...(filters.search && { search: filters.search }),\n  });\n\n  const response = await fetch(`/api/users?${params}`);\n  if (!response.ok) throw new Error('Failed to fetch users');\n  return response.json();\n}\n\nexport function useUsers(filters: UserFilters) {\n  return useQuery({\n    queryKey: userKeys.list(filters),\n    queryFn: () => fetchUsers(filters),\n    placeholderData: (previousData) => previousData, // Keep previous data while fetching\n  });\n}\n```\n\n## Mutations\n\n### Basic Mutation\n\n```typescript\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\n\ninterface CreateUserInput {\n  name: string;\n  email: string;\n}\n\nasync function createUser(input: CreateUserInput): Promise<User> {\n  const response = await fetch('/api/users', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(input),\n  });\n  if (!response.ok) throw new Error('Failed to create user');\n  return response.json();\n}\n\nexport function useCreateUser() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: createUser,\n    onSuccess: () => {\n      // Invalidate and refetch users list\n      queryClient.invalidateQueries({ queryKey: userKeys.lists() });\n    },\n  });\n}\n\n// Usage\nfunction CreateUserForm(): React.ReactElement {\n  const createUser = useCreateUser();\n\n  const handleSubmit = (e: FormEvent<HTMLFormElement>): void => {\n    e.preventDefault();\n    const formData = new FormData(e.currentTarget);\n    createUser.mutate({\n      name: formData.get('name') as string,\n      email: formData.get('email') as string,\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input name=\"name\" required />\n      <input name=\"email\" type=\"email\" required />\n      <button type=\"submit\" disabled={createUser.isPending}>\n        {createUser.isPending ? 'Creating...' : 'Create'}\n      </button>\n      {createUser.error && <p>{createUser.error.message}</p>}\n    </form>\n  );\n}\n```\n\n### Optimistic Updates\n\n```typescript\nexport function useUpdateUser() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: updateUser,\n    onMutate: async (newUser) => {\n      // Cancel outgoing refetches\n      await queryClient.cancelQueries({ queryKey: userKeys.detail(newUser.id) });\n\n      // Snapshot previous value\n      const previousUser = queryClient.getQueryData<User>(\n        userKeys.detail(newUser.id)\n      );\n\n      // Optimistically update\n      queryClient.setQueryData(userKeys.detail(newUser.id), newUser);\n\n      // Return context with snapshot\n      return { previousUser };\n    },\n    onError: (_err, newUser, context) => {\n      // Rollback on error\n      if (context?.previousUser) {\n        queryClient.setQueryData(\n          userKeys.detail(newUser.id),\n          context.previousUser\n        );\n      }\n    },\n    onSettled: (_data, _error, newUser) => {\n      // Refetch to ensure consistency\n      queryClient.invalidateQueries({ queryKey: userKeys.detail(newUser.id) });\n    },\n  });\n}\n```\n\n## Infinite Queries\n\n```typescript\nimport { useInfiniteQuery } from '@tanstack/react-query';\n\ninterface PostsPage {\n  posts: Post[];\n  nextCursor: string | null;\n}\n\nasync function fetchPosts(cursor?: string): Promise<PostsPage> {\n  const params = cursor ? `?cursor=${cursor}` : '';\n  const response = await fetch(`/api/posts${params}`);\n  return response.json();\n}\n\nexport function useInfinitePosts() {\n  return useInfiniteQuery({\n    queryKey: postKeys.lists(),\n    queryFn: ({ pageParam }) => fetchPosts(pageParam),\n    initialPageParam: undefined as string | undefined,\n    getNextPageParam: (lastPage) => lastPage.nextCursor ?? undefined,\n  });\n}\n\n// Usage\nfunction PostList(): React.ReactElement {\n  const {\n    data,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useInfinitePosts();\n\n  return (\n    <div>\n      {data?.pages.map((page, i) => (\n        <React.Fragment key={i}>\n          {page.posts.map((post) => (\n            <PostCard key={post.id} post={post} />\n          ))}\n        </React.Fragment>\n      ))}\n\n      <button\n        onClick={() => fetchNextPage()}\n        disabled={!hasNextPage || isFetchingNextPage}\n      >\n        {isFetchingNextPage ? 'Loading...' : hasNextPage ? 'Load More' : 'No more'}\n      </button>\n    </div>\n  );\n}\n```\n\n## Prefetching\n\n```typescript\nimport { useQueryClient } from '@tanstack/react-query';\n\nfunction UserList(): React.ReactElement {\n  const queryClient = useQueryClient();\n\n  const prefetchUser = (userId: string): void => {\n    queryClient.prefetchQuery({\n      queryKey: userKeys.detail(userId),\n      queryFn: () => fetchUser(userId),\n      staleTime: 5 * 60 * 1000,\n    });\n  };\n\n  return (\n    <ul>\n      {users.map((user) => (\n        <li\n          key={user.id}\n          onMouseEnter={() => prefetchUser(user.id)}\n        >\n          <Link to={`/users/${user.id}`}>{user.name}</Link>\n        </li>\n      ))}\n    </ul>\n  );\n}\n```\n\n## Dependent Queries\n\n```typescript\nfunction useUserPosts(userId: string | undefined) {\n  const userQuery = useUser(userId ?? '');\n\n  return useQuery({\n    queryKey: postKeys.byUser(userId ?? ''),\n    queryFn: () => fetchUserPosts(userId!),\n    enabled: !!userId && userQuery.isSuccess,\n  });\n}\n```\n\n## Error Handling\n\n```typescript\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      retry: (failureCount, error) => {\n        // Don't retry on 4xx errors\n        if (error instanceof Response && error.status >= 400 && error.status < 500) {\n          return false;\n        }\n        return failureCount < 3;\n      },\n    },\n    mutations: {\n      onError: (error) => {\n        // Global error handling\n        console.error('Mutation error:', error);\n      },\n    },\n  },\n});\n```\n\n## Best Practices\n\n1. **Use query key factories** - Consistent, type-safe keys\n2. **Set staleTime** - Prevent unnecessary refetches\n3. **Use selectors** - `select` option for derived data\n4. **Prefetch** - Improve perceived performance\n5. **Optimistic updates** - Better UX for mutations\n6. **Error boundaries** - Handle query errors gracefully\n\n## TanStack Query vs Zustand\n\n| Use Case | Tool |\n|----------|------|\n| API data | TanStack Query |\n| User authentication state | Zustand |\n| Shopping cart | Zustand |\n| Theme/settings | Zustand |\n| Form state | React Hook Form |\n\n## Notes\n\n- gcTime (formerly cacheTime) is how long inactive data stays in cache\n- staleTime is how long data is considered fresh\n- Use React Query DevTools for debugging\n- Works with Server Components via initial data"
              },
              {
                "name": "visual-regression",
                "description": "Visual regression testing with Playwright and Percy. Use when implementing screenshot-based testing.",
                "path": "tech-stacks/js/react/skills/visual-regression/SKILL.md",
                "frontmatter": {
                  "name": "visual-regression",
                  "description": "Visual regression testing with Playwright and Percy. Use when implementing screenshot-based testing."
                },
                "content": "# Visual Regression Testing Skill\n\nThis skill covers visual regression testing patterns for React applications.\n\n## When to Use\n\nUse this skill when:\n- Catching unintended visual changes\n- Testing component appearance across browsers\n- Validating responsive layouts\n- Maintaining design consistency\n\n## Core Principle\n\n**CATCH VISUAL BUGS** - Visual regression tests detect unintended changes to UI appearance that functional tests miss.\n\n## Playwright Visual Testing\n\n### Setup\n\n```typescript\n// playwright.config.ts\nimport { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  testDir: './tests/visual',\n  snapshotDir: './tests/visual/__snapshots__',\n  updateSnapshots: 'missing',\n  expect: {\n    toHaveScreenshot: {\n      maxDiffPixels: 100,\n      threshold: 0.2,\n    },\n  },\n  projects: [\n    {\n      name: 'Desktop Chrome',\n      use: {\n        browserName: 'chromium',\n        viewport: { width: 1280, height: 720 },\n      },\n    },\n    {\n      name: 'Mobile Safari',\n      use: {\n        browserName: 'webkit',\n        viewport: { width: 375, height: 667 },\n      },\n    },\n  ],\n});\n```\n\n### Basic Screenshot Test\n\n```typescript\nimport { test, expect } from '@playwright/test';\n\ntest.describe('Visual Regression', () => {\n  test('homepage matches snapshot', async ({ page }) => {\n    await page.goto('/');\n    await page.waitForLoadState('networkidle');\n\n    await expect(page).toHaveScreenshot('homepage.png');\n  });\n\n  test('dashboard matches snapshot', async ({ page }) => {\n    await page.goto('/dashboard');\n    await page.waitForLoadState('networkidle');\n\n    await expect(page).toHaveScreenshot('dashboard.png');\n  });\n});\n```\n\n### Component Screenshot\n\n```typescript\ntest('button component variants', async ({ page }) => {\n  await page.goto('/storybook/button');\n\n  // Screenshot specific element\n  const button = page.getByRole('button', { name: 'Primary' });\n  await expect(button).toHaveScreenshot('button-primary.png');\n\n  // Screenshot component container\n  const container = page.locator('[data-testid=\"button-variants\"]');\n  await expect(container).toHaveScreenshot('button-variants.png');\n});\n```\n\n### Handling Dynamic Content\n\n```typescript\ntest('page with dynamic content', async ({ page }) => {\n  await page.goto('/profile');\n\n  // Mask dynamic elements\n  await expect(page).toHaveScreenshot('profile.png', {\n    mask: [\n      page.locator('[data-testid=\"timestamp\"]'),\n      page.locator('[data-testid=\"avatar\"]'),\n      page.locator('.dynamic-ad'),\n    ],\n  });\n});\n\ntest('page with animations', async ({ page }) => {\n  await page.goto('/animated-page');\n\n  // Disable animations\n  await page.emulateMedia({ reducedMotion: 'reduce' });\n\n  // Or wait for animations to complete\n  await page.waitForFunction(() => {\n    const animations = document.getAnimations();\n    return animations.every((a) => a.playState === 'finished');\n  });\n\n  await expect(page).toHaveScreenshot('animated-page.png');\n});\n```\n\n### Responsive Screenshots\n\n```typescript\nconst viewports = [\n  { width: 375, height: 667, name: 'mobile' },\n  { width: 768, height: 1024, name: 'tablet' },\n  { width: 1280, height: 720, name: 'desktop' },\n  { width: 1920, height: 1080, name: 'wide' },\n];\n\ntest.describe('Responsive layouts', () => {\n  for (const viewport of viewports) {\n    test(`homepage at ${viewport.name}`, async ({ page }) => {\n      await page.setViewportSize({ width: viewport.width, height: viewport.height });\n      await page.goto('/');\n      await page.waitForLoadState('networkidle');\n\n      await expect(page).toHaveScreenshot(`homepage-${viewport.name}.png`);\n    });\n  }\n});\n```\n\n### Full Page Screenshots\n\n```typescript\ntest('full page screenshot', async ({ page }) => {\n  await page.goto('/long-page');\n  await page.waitForLoadState('networkidle');\n\n  await expect(page).toHaveScreenshot('long-page-full.png', {\n    fullPage: true,\n  });\n});\n```\n\n## Percy Integration\n\n### Installation\n\n```bash\nnpm install -D @percy/cli @percy/playwright\n```\n\n### Configuration\n\n```yaml\n# .percy.yml\nversion: 2\nsnapshot:\n  widths:\n    - 375\n    - 768\n    - 1280\n  minHeight: 1024\n  percyCSS: |\n    .hide-in-percy {\n      visibility: hidden;\n    }\ndiscovery:\n  allowedHostnames:\n    - localhost\n    - cdn.example.com\n```\n\n### Percy Tests\n\n```typescript\nimport { test } from '@playwright/test';\nimport percySnapshot from '@percy/playwright';\n\ntest.describe('Percy Visual Tests', () => {\n  test('homepage', async ({ page }) => {\n    await page.goto('/');\n    await page.waitForLoadState('networkidle');\n\n    await percySnapshot(page, 'Homepage');\n  });\n\n  test('dashboard states', async ({ page }) => {\n    await page.goto('/dashboard');\n\n    // Empty state\n    await percySnapshot(page, 'Dashboard - Empty');\n\n    // With data\n    await page.evaluate(() => {\n      // Inject mock data\n    });\n    await percySnapshot(page, 'Dashboard - With Data');\n\n    // Loading state\n    await page.evaluate(() => {\n      document.body.classList.add('loading');\n    });\n    await percySnapshot(page, 'Dashboard - Loading');\n  });\n});\n```\n\n### Percy with Storybook\n\n```bash\nnpm install -D @percy/storybook\n```\n\n```javascript\n// .storybook/main.js\nmodule.exports = {\n  addons: ['@percy/storybook'],\n};\n```\n\n```bash\n# Run Percy on Storybook\nnpx percy storybook ./storybook-static\n```\n\n## Component Visual Testing\n\n### Storybook Integration\n\n```typescript\n// Button.stories.tsx\nimport type { Meta, StoryObj } from '@storybook/react';\nimport { Button } from './Button';\n\nconst meta: Meta<typeof Button> = {\n  title: 'Components/Button',\n  component: Button,\n  parameters: {\n    chromatic: { disableSnapshot: false },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof Button>;\n\nexport const AllVariants: Story = {\n  render: () => (\n    <div className=\"flex flex-col gap-4\">\n      <div className=\"flex gap-2\">\n        <Button variant=\"default\">Default</Button>\n        <Button variant=\"secondary\">Secondary</Button>\n        <Button variant=\"destructive\">Destructive</Button>\n        <Button variant=\"outline\">Outline</Button>\n        <Button variant=\"ghost\">Ghost</Button>\n      </div>\n      <div className=\"flex gap-2\">\n        <Button size=\"sm\">Small</Button>\n        <Button size=\"default\">Default</Button>\n        <Button size=\"lg\">Large</Button>\n      </div>\n      <div className=\"flex gap-2\">\n        <Button disabled>Disabled</Button>\n        <Button isLoading>Loading</Button>\n      </div>\n    </div>\n  ),\n};\n\n// Interaction states for visual testing\nexport const HoverState: Story = {\n  args: { children: 'Hover Me' },\n  parameters: {\n    pseudo: { hover: true },\n  },\n};\n\nexport const FocusState: Story = {\n  args: { children: 'Focus Me' },\n  parameters: {\n    pseudo: { focus: true },\n  },\n};\n```\n\n### Visual Test Fixture\n\n```typescript\n// tests/visual/fixtures.ts\nimport { test as base } from '@playwright/test';\n\ninterface VisualTestFixtures {\n  visualPage: typeof page;\n}\n\nexport const test = base.extend<VisualTestFixtures>({\n  visualPage: async ({ page }, use) => {\n    // Disable animations globally\n    await page.addStyleTag({\n      content: `\n        *, *::before, *::after {\n          animation-duration: 0s !important;\n          animation-delay: 0s !important;\n          transition-duration: 0s !important;\n          transition-delay: 0s !important;\n        }\n      `,\n    });\n\n    // Set consistent date/time\n    await page.addInitScript(() => {\n      const fixedDate = new Date('2024-01-15T10:00:00Z');\n      // @ts-ignore\n      Date = class extends Date {\n        constructor(...args: []) {\n          if (args.length === 0) {\n            super(fixedDate);\n          } else {\n            // @ts-ignore\n            super(...args);\n          }\n        }\n        static now() {\n          return fixedDate.getTime();\n        }\n      };\n    });\n\n    await use(page);\n  },\n});\n\nexport { expect } from '@playwright/test';\n```\n\n## Dark Mode Testing\n\n```typescript\ntest.describe('Dark mode visual tests', () => {\n  test('homepage in light mode', async ({ page }) => {\n    await page.goto('/');\n    await expect(page).toHaveScreenshot('homepage-light.png');\n  });\n\n  test('homepage in dark mode', async ({ page }) => {\n    await page.goto('/');\n\n    // Enable dark mode\n    await page.evaluate(() => {\n      document.documentElement.classList.add('dark');\n    });\n\n    await expect(page).toHaveScreenshot('homepage-dark.png');\n  });\n\n  test('component in both modes', async ({ page }) => {\n    await page.goto('/components/card');\n\n    const card = page.locator('[data-testid=\"card\"]');\n\n    // Light mode\n    await expect(card).toHaveScreenshot('card-light.png');\n\n    // Dark mode\n    await page.evaluate(() => {\n      document.documentElement.classList.add('dark');\n    });\n    await expect(card).toHaveScreenshot('card-dark.png');\n  });\n});\n```\n\n## CI Integration\n\n### GitHub Actions\n\n```yaml\n# .github/workflows/visual.yml\nname: Visual Regression\n\non: [push, pull_request]\n\njobs:\n  visual-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Install Playwright browsers\n        run: npx playwright install --with-deps\n\n      - name: Run visual tests\n        run: npx playwright test tests/visual/\n\n      - name: Upload snapshots\n        uses: actions/upload-artifact@v4\n        if: failure()\n        with:\n          name: visual-snapshots\n          path: |\n            tests/visual/__snapshots__/\n            test-results/\n```\n\n### Percy CI\n\n```yaml\n# .github/workflows/percy.yml\nname: Percy\n\non: [push, pull_request]\n\njobs:\n  percy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Install Playwright browsers\n        run: npx playwright install --with-deps\n\n      - name: Percy snapshot\n        run: npx percy exec -- npx playwright test tests/visual/\n        env:\n          PERCY_TOKEN: ${{ secrets.PERCY_TOKEN }}\n```\n\n## Commands\n\n```bash\n# Run visual tests\nnpx playwright test tests/visual/\n\n# Update snapshots\nnpx playwright test tests/visual/ --update-snapshots\n\n# Run specific visual test\nnpx playwright test tests/visual/homepage.spec.ts\n\n# Run with Percy\nnpx percy exec -- npx playwright test tests/visual/\n\n# View report\nnpx playwright show-report\n```\n\n## Best Practices\n\n1. **Stable selectors** - Use data-testid for visual test targets\n2. **Mask dynamic content** - Hide timestamps, ads, avatars\n3. **Disable animations** - Prevent flaky screenshots\n4. **Test critical paths** - Focus on key user journeys\n5. **Review changes** - Don't auto-approve snapshot updates\n6. **Version snapshots** - Commit snapshots to git\n\n## Notes\n\n- Visual tests are slower than unit tests\n- Run on CI with consistent environment\n- Use threshold for minor rendering differences\n- Percy provides cross-browser comparison"
              },
              {
                "name": "vite-configuration",
                "description": "Vite 6.x configuration for React SPAs. Use when setting up or configuring Vite projects.",
                "path": "tech-stacks/js/react/skills/vite-configuration/SKILL.md",
                "frontmatter": {
                  "name": "vite-configuration",
                  "description": "Vite 6.x configuration for React SPAs. Use when setting up or configuring Vite projects."
                },
                "content": "# Vite Configuration Skill\n\nThis skill covers Vite 6.x configuration for React single-page applications.\n\n## When to Use\n\nUse this skill when:\n- Setting up new Vite React projects\n- Configuring build optimization\n- Adding plugins and aliases\n- Configuring environment variables\n\n## Core Principle\n\n**FAST BY DEFAULT** - Vite is optimized out of the box. Only add configuration when needed.\n\n## Basic Configuration\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\nimport path from 'path';\n\nexport default defineConfig({\n  plugins: [react()],\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n    },\n  },\n});\n```\n\n## Full Configuration\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\nimport path from 'path';\n\nexport default defineConfig({\n  plugins: [react()],\n\n  // Path aliases\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n      '@components': path.resolve(__dirname, './src/components'),\n      '@hooks': path.resolve(__dirname, './src/hooks'),\n      '@lib': path.resolve(__dirname, './src/lib'),\n    },\n  },\n\n  // Development server\n  server: {\n    port: 3000,\n    open: true,\n    proxy: {\n      '/api': {\n        target: 'http://localhost:8080',\n        changeOrigin: true,\n        rewrite: (path) => path.replace(/^\\/api/, ''),\n      },\n    },\n  },\n\n  // Build configuration\n  build: {\n    target: 'ES2022',\n    sourcemap: true,\n    minify: 'esbuild',\n    rollupOptions: {\n      output: {\n        manualChunks: {\n          'vendor-react': ['react', 'react-dom'],\n          'vendor-router': ['react-router-dom'],\n        },\n      },\n    },\n  },\n\n  // Preview server (for built app)\n  preview: {\n    port: 4173,\n  },\n});\n```\n\n## TypeScript Path Aliases\n\nConfigure both Vite and TypeScript:\n\n```typescript\n// vite.config.ts\nresolve: {\n  alias: {\n    '@': path.resolve(__dirname, './src'),\n  },\n},\n```\n\n```json\n// tsconfig.json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@/*\": [\"./src/*\"]\n    }\n  }\n}\n```\n\n## Environment Variables\n\n### Defining Variables\n\n```bash\n# .env\nVITE_API_URL=http://localhost:8080\nVITE_APP_TITLE=My App\n\n# .env.development\nVITE_API_URL=http://localhost:8080\n\n# .env.production\nVITE_API_URL=https://api.production.com\n```\n\n### Using Variables\n\n```typescript\n// In application code\nconst apiUrl = import.meta.env.VITE_API_URL;\n\n// TypeScript declarations\n// src/vite-env.d.ts\n/// <reference types=\"vite/client\" />\n\ninterface ImportMetaEnv {\n  readonly VITE_API_URL: string;\n  readonly VITE_APP_TITLE: string;\n}\n\ninterface ImportMeta {\n  readonly env: ImportMetaEnv;\n}\n```\n\n## Plugin Configuration\n\n### React Plugin Options\n\n```typescript\nimport react from '@vitejs/plugin-react';\n\nexport default defineConfig({\n  plugins: [\n    react({\n      // Babel plugins (for emotion, styled-components, etc.)\n      babel: {\n        plugins: ['@emotion/babel-plugin'],\n      },\n      // React Refresh options\n      fastRefresh: true,\n    }),\n  ],\n});\n```\n\n### Common Plugins\n\n```typescript\nimport { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\nimport { visualizer } from 'rollup-plugin-visualizer';\nimport { VitePWA } from 'vite-plugin-pwa';\n\nexport default defineConfig({\n  plugins: [\n    react(),\n\n    // Bundle analyzer\n    visualizer({\n      filename: 'stats.html',\n      open: true,\n      gzipSize: true,\n    }),\n\n    // PWA support\n    VitePWA({\n      registerType: 'autoUpdate',\n      manifest: {\n        name: 'My App',\n        short_name: 'App',\n        theme_color: '#ffffff',\n      },\n    }),\n  ],\n});\n```\n\n## Build Optimization\n\n### Manual Chunks\n\n```typescript\nbuild: {\n  rollupOptions: {\n    output: {\n      manualChunks: {\n        // Group React ecosystem\n        'vendor-react': ['react', 'react-dom', 'react-router-dom'],\n        // Group UI libraries\n        'vendor-ui': ['@radix-ui/react-dialog', '@radix-ui/react-dropdown-menu'],\n        // Group state management\n        'vendor-state': ['zustand', '@tanstack/react-query'],\n      },\n    },\n  },\n},\n```\n\n### Dynamic Chunks\n\n```typescript\nbuild: {\n  rollupOptions: {\n    output: {\n      manualChunks(id) {\n        if (id.includes('node_modules')) {\n          if (id.includes('react')) {\n            return 'vendor-react';\n          }\n          if (id.includes('@radix-ui')) {\n            return 'vendor-ui';\n          }\n          return 'vendor';\n        }\n      },\n    },\n  },\n},\n```\n\n### Chunk Size Warnings\n\n```typescript\nbuild: {\n  chunkSizeWarningLimit: 500, // KB\n},\n```\n\n## CSS Configuration\n\n### CSS Modules\n\n```typescript\ncss: {\n  modules: {\n    localsConvention: 'camelCase',\n  },\n},\n```\n\n### PostCSS\n\n```typescript\ncss: {\n  postcss: {\n    plugins: [\n      require('autoprefixer'),\n      require('tailwindcss'),\n    ],\n  },\n},\n```\n\n### Preprocessors\n\n```typescript\ncss: {\n  preprocessorOptions: {\n    scss: {\n      additionalData: `@import \"@/styles/variables.scss\";`,\n    },\n  },\n},\n```\n\n## Proxy Configuration\n\n```typescript\nserver: {\n  proxy: {\n    // String shorthand\n    '/foo': 'http://localhost:4567',\n\n    // With options\n    '/api': {\n      target: 'http://localhost:8080',\n      changeOrigin: true,\n      rewrite: (path) => path.replace(/^\\/api/, ''),\n    },\n\n    // Regex\n    '^/api/.*': {\n      target: 'http://localhost:8080',\n      changeOrigin: true,\n    },\n  },\n},\n```\n\n## Library Mode\n\nFor building component libraries:\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\nimport dts from 'vite-plugin-dts';\nimport path from 'path';\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    dts({ include: ['src'] }),\n  ],\n  build: {\n    lib: {\n      entry: path.resolve(__dirname, 'src/index.ts'),\n      name: 'MyLibrary',\n      formats: ['es', 'cjs'],\n      fileName: (format) => `index.${format}.js`,\n    },\n    rollupOptions: {\n      external: ['react', 'react-dom'],\n      output: {\n        globals: {\n          react: 'React',\n          'react-dom': 'ReactDOM',\n        },\n      },\n    },\n  },\n});\n```\n\n## Testing Configuration\n\n```typescript\n// vitest.config.ts\nimport { defineConfig } from 'vitest/config';\nimport react from '@vitejs/plugin-react';\nimport path from 'path';\n\nexport default defineConfig({\n  plugins: [react()],\n  test: {\n    globals: true,\n    environment: 'jsdom',\n    setupFiles: ['./src/test/setup.ts'],\n    include: ['src/**/__tests__/**/*.test.{ts,tsx}'],\n    coverage: {\n      provider: 'v8',\n      reporter: ['text', 'json', 'html'],\n      thresholds: {\n        lines: 80,\n        functions: 80,\n        branches: 80,\n        statements: 80,\n      },\n    },\n  },\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n    },\n  },\n});\n```\n\n## Commands\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"tsc && vite build\",\n    \"preview\": \"vite preview\",\n    \"analyze\": \"vite build && vite-bundle-visualizer\"\n  }\n}\n```\n\n## Best Practices\n\n1. **Use path aliases** - Clean imports with @/\n2. **Environment variables** - Prefix with VITE_\n3. **Manual chunks** - Split vendor code\n4. **Proxy API calls** - Avoid CORS in development\n5. **Type declarations** - Declare ImportMetaEnv\n6. **Source maps** - Enable for debugging\n\n## Notes\n\n- Vite uses ESBuild for development (fast)\n- Vite uses Rollup for production (optimized)\n- Hot Module Replacement (HMR) works out of the box\n- CSS is automatically extracted and minified"
              },
              {
                "name": "vite-deployment",
                "description": "Vite SPA deployment to various platforms. Use when deploying React SPAs.",
                "path": "tech-stacks/js/react/skills/vite-deployment/SKILL.md",
                "frontmatter": {
                  "name": "vite-deployment",
                  "description": "Vite SPA deployment to various platforms. Use when deploying React SPAs."
                },
                "content": "# Vite Deployment Skill\n\nThis skill covers deploying Vite-built React SPAs to various hosting platforms.\n\n## When to Use\n\nUse this skill when:\n- Deploying React SPAs built with Vite\n- Setting up CI/CD pipelines\n- Configuring preview deployments\n- Optimizing for production hosting\n\n## Core Principle\n\n**BUILD ONCE, DEPLOY ANYWHERE** - Vite produces static assets that can be deployed to any static hosting provider.\n\n## Build Configuration\n\n### Production Build\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\n\nexport default defineConfig({\n  plugins: [react()],\n  build: {\n    outDir: 'dist',\n    sourcemap: true,\n    rollupOptions: {\n      output: {\n        manualChunks: {\n          vendor: ['react', 'react-dom'],\n          router: ['react-router-dom'],\n        },\n      },\n    },\n  },\n  // Base path for deployment (adjust if not at root)\n  base: '/',\n});\n```\n\n### SPA Router Configuration\n\n```typescript\n// For client-side routing, configure redirects for all hosting platforms\n\n// vite.config.ts - Preview server fallback\nexport default defineConfig({\n  preview: {\n    port: 4173,\n  },\n  // This handles local preview, but each platform needs its own config\n});\n```\n\n## Vercel Deployment\n\n### Configuration\n\n```json\n// vercel.json\n{\n  \"buildCommand\": \"npm run build\",\n  \"outputDirectory\": \"dist\",\n  \"framework\": \"vite\",\n  \"rewrites\": [\n    { \"source\": \"/(.*)\", \"destination\": \"/index.html\" }\n  ],\n  \"headers\": [\n    {\n      \"source\": \"/assets/(.*)\",\n      \"headers\": [\n        { \"key\": \"Cache-Control\", \"value\": \"public, max-age=31536000, immutable\" }\n      ]\n    }\n  ]\n}\n```\n\n### Deploy Script\n\n```bash\n# Install Vercel CLI\nnpm install -g vercel\n\n# Deploy to preview\nvercel\n\n# Deploy to production\nvercel --prod\n```\n\n### GitHub Actions\n\n```yaml\n# .github/workflows/deploy-vercel.yml\nname: Deploy to Vercel\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Build\n        run: npm run build\n\n      - name: Deploy to Vercel\n        uses: amondnet/vercel-action@v25\n        with:\n          vercel-token: ${{ secrets.VERCEL_TOKEN }}\n          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}\n          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}\n          vercel-args: ${{ github.ref == 'refs/heads/main' && '--prod' || '' }}\n```\n\n## Netlify Deployment\n\n### Configuration\n\n```toml\n# netlify.toml\n[build]\n  command = \"npm run build\"\n  publish = \"dist\"\n\n[[redirects]]\n  from = \"/*\"\n  to = \"/index.html\"\n  status = 200\n\n[[headers]]\n  for = \"/assets/*\"\n  [headers.values]\n    Cache-Control = \"public, max-age=31536000, immutable\"\n\n[[headers]]\n  for = \"/*\"\n  [headers.values]\n    X-Frame-Options = \"DENY\"\n    X-XSS-Protection = \"1; mode=block\"\n    X-Content-Type-Options = \"nosniff\"\n    Referrer-Policy = \"strict-origin-when-cross-origin\"\n```\n\n### Deploy Script\n\n```bash\n# Install Netlify CLI\nnpm install -g netlify-cli\n\n# Login\nnetlify login\n\n# Deploy preview\nnetlify deploy\n\n# Deploy production\nnetlify deploy --prod\n```\n\n### GitHub Actions\n\n```yaml\n# .github/workflows/deploy-netlify.yml\nname: Deploy to Netlify\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Build\n        run: npm run build\n\n      - name: Deploy to Netlify\n        uses: nwtgck/actions-netlify@v3\n        with:\n          publish-dir: './dist'\n          production-branch: main\n          github-token: ${{ secrets.GITHUB_TOKEN }}\n          deploy-message: \"Deploy from GitHub Actions\"\n        env:\n          NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}\n          NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}\n```\n\n## Cloudflare Pages Deployment\n\n### Configuration\n\n```json\n// wrangler.toml (optional)\nname = \"my-react-app\"\ncompatibility_date = \"2024-01-01\"\npages_build_output_dir = \"dist\"\n\n[site]\nbucket = \"dist\"\n```\n\n### Redirect Rules\n\n```plain\n# public/_redirects\n/*    /index.html   200\n```\n\n### GitHub Actions\n\n```yaml\n# .github/workflows/deploy-cloudflare.yml\nname: Deploy to Cloudflare Pages\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: read\n      deployments: write\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Build\n        run: npm run build\n\n      - name: Deploy to Cloudflare Pages\n        uses: cloudflare/pages-action@v1\n        with:\n          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}\n          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}\n          projectName: my-react-app\n          directory: dist\n          gitHubToken: ${{ secrets.GITHUB_TOKEN }}\n```\n\n## AWS S3 + CloudFront\n\n### S3 Bucket Policy\n\n```json\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"PublicReadGetObject\",\n      \"Effect\": \"Allow\",\n      \"Principal\": \"*\",\n      \"Action\": \"s3:GetObject\",\n      \"Resource\": \"arn:aws:s3:::your-bucket-name/*\"\n    }\n  ]\n}\n```\n\n### GitHub Actions\n\n```yaml\n# .github/workflows/deploy-aws.yml\nname: Deploy to AWS\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Build\n        run: npm run build\n\n      - name: Configure AWS credentials\n        uses: aws-actions/configure-aws-credentials@v4\n        with:\n          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n          aws-region: us-east-1\n\n      - name: Deploy to S3\n        run: |\n          aws s3 sync dist/ s3://${{ secrets.S3_BUCKET }} --delete\n\n      - name: Invalidate CloudFront\n        run: |\n          aws cloudfront create-invalidation \\\n            --distribution-id ${{ secrets.CLOUDFRONT_DISTRIBUTION_ID }} \\\n            --paths \"/*\"\n```\n\n## GitHub Pages\n\n### Configuration\n\n```typescript\n// vite.config.ts\nexport default defineConfig({\n  base: '/repository-name/', // Set to your repo name\n  plugins: [react()],\n});\n```\n\n### GitHub Actions\n\n```yaml\n# .github/workflows/deploy-ghpages.yml\nname: Deploy to GitHub Pages\n\non:\n  push:\n    branches: [main]\n\npermissions:\n  contents: read\n  pages: write\n  id-token: write\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Build\n        run: npm run build\n\n      - name: Setup Pages\n        uses: actions/configure-pages@v4\n\n      - name: Upload artifact\n        uses: actions/upload-pages-artifact@v3\n        with:\n          path: './dist'\n\n  deploy:\n    needs: build\n    runs-on: ubuntu-latest\n    environment:\n      name: github-pages\n      url: ${{ steps.deployment.outputs.page_url }}\n    steps:\n      - name: Deploy to GitHub Pages\n        id: deployment\n        uses: actions/deploy-pages@v4\n```\n\n### 404 Handling for SPA\n\n```bash\n# Create 404.html that redirects to index.html\ncp dist/index.html dist/404.html\n```\n\n## Firebase Hosting\n\n### Configuration\n\n```json\n// firebase.json\n{\n  \"hosting\": {\n    \"public\": \"dist\",\n    \"ignore\": [\"firebase.json\", \"**/.*\", \"**/node_modules/**\"],\n    \"rewrites\": [\n      {\n        \"source\": \"**\",\n        \"destination\": \"/index.html\"\n      }\n    ],\n    \"headers\": [\n      {\n        \"source\": \"/assets/**\",\n        \"headers\": [\n          {\n            \"key\": \"Cache-Control\",\n            \"value\": \"public, max-age=31536000, immutable\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Deploy Script\n\n```bash\n# Install Firebase CLI\nnpm install -g firebase-tools\n\n# Login\nfirebase login\n\n# Initialize (select Hosting)\nfirebase init\n\n# Deploy\nfirebase deploy --only hosting\n```\n\n## Environment Variables\n\n### Build-Time Variables\n\n```typescript\n// vite.config.ts\nexport default defineConfig({\n  define: {\n    __APP_VERSION__: JSON.stringify(process.env.npm_package_version),\n  },\n});\n```\n\n```env\n# .env.production\nVITE_API_URL=https://api.production.com\nVITE_ANALYTICS_ID=UA-XXXXX\n```\n\n### Platform-Specific Variables\n\n```yaml\n# GitHub Actions\nenv:\n  VITE_API_URL: ${{ vars.API_URL }}\n  VITE_ANALYTICS_ID: ${{ secrets.ANALYTICS_ID }}\n```\n\n## Caching Strategy\n\n### Asset Caching\n\n```typescript\n// vite.config.ts\nexport default defineConfig({\n  build: {\n    rollupOptions: {\n      output: {\n        // Add hash to filenames for cache busting\n        entryFileNames: 'assets/[name]-[hash].js',\n        chunkFileNames: 'assets/[name]-[hash].js',\n        assetFileNames: 'assets/[name]-[hash].[ext]',\n      },\n    },\n  },\n});\n```\n\n### Headers Configuration\n\n```plain\n# Hashed assets - cache forever\n/assets/*\n  Cache-Control: public, max-age=31536000, immutable\n\n# HTML - always revalidate\n/index.html\n  Cache-Control: no-cache, no-store, must-revalidate\n\n# Service worker - no cache\n/sw.js\n  Cache-Control: no-cache, no-store, must-revalidate\n```\n\n## Preview Deployments\n\n### Vercel\n\n```yaml\n# Automatic preview deployments on PRs\n# No additional config needed with Vercel\n```\n\n### Netlify\n\n```toml\n# netlify.toml\n[context.deploy-preview]\n  command = \"npm run build\"\n\n[context.branch-deploy]\n  command = \"npm run build\"\n```\n\n## Commands\n\n```bash\n# Build for production\nnpm run build\n\n# Preview production build locally\nnpm run preview\n\n# Deploy to Vercel\nvercel --prod\n\n# Deploy to Netlify\nnetlify deploy --prod\n\n# Deploy to Firebase\nfirebase deploy --only hosting\n```\n\n## Best Practices\n\n1. **Enable source maps** - Helps debug production issues\n2. **Use content hashing** - Enables aggressive caching\n3. **Set security headers** - X-Frame-Options, CSP, etc.\n4. **Configure SPA routing** - Redirect all paths to index.html\n5. **Environment separation** - Different configs for staging/production\n6. **Preview deployments** - Test changes before production\n\n## Notes\n\n- Vite outputs static files to `dist/` by default\n- All platforms need SPA routing configured\n- Use environment variables for API URLs\n- Monitor bundle size with `vite-bundle-visualizer`"
              },
              {
                "name": "zustand-patterns",
                "description": "Zustand state management patterns. Use when implementing client-side state with Zustand.",
                "path": "tech-stacks/js/react/skills/zustand-patterns/SKILL.md",
                "frontmatter": {
                  "name": "zustand-patterns",
                  "description": "Zustand state management patterns. Use when implementing client-side state with Zustand."
                },
                "content": "# Zustand Patterns Skill\n\nThis skill covers Zustand state management patterns for React applications.\n\n## When to Use\n\nUse this skill when:\n- Managing global client state\n- Implementing authentication state\n- Creating shopping cart functionality\n- Building theme/settings management\n\n## Core Principle\n\n**SIMPLE BY DEFAULT** - Zustand is minimal. Keep stores focused and use selectors for performance.\n\n## Basic Store\n\n```typescript\nimport { create } from 'zustand';\n\ninterface CounterState {\n  count: number;\n  increment: () => void;\n  decrement: () => void;\n  reset: () => void;\n}\n\nexport const useCounterStore = create<CounterState>((set) => ({\n  count: 0,\n  increment: () => set((state) => ({ count: state.count + 1 })),\n  decrement: () => set((state) => ({ count: state.count - 1 })),\n  reset: () => set({ count: 0 }),\n}));\n\n// Usage\nfunction Counter(): React.ReactElement {\n  const count = useCounterStore((state) => state.count);\n  const increment = useCounterStore((state) => state.increment);\n\n  return (\n    <button onClick={increment}>Count: {count}</button>\n  );\n}\n```\n\n## Typed Store with Actions\n\n```typescript\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n}\n\ninterface AuthState {\n  user: User | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  login: (credentials: { email: string; password: string }) => Promise<void>;\n  logout: () => void;\n  setUser: (user: User) => void;\n}\n\nexport const useAuthStore = create<AuthState>((set, get) => ({\n  user: null,\n  isAuthenticated: false,\n  isLoading: false,\n\n  login: async (credentials) => {\n    set({ isLoading: true });\n    try {\n      const response = await fetch('/api/login', {\n        method: 'POST',\n        body: JSON.stringify(credentials),\n      });\n      const user = await response.json();\n      set({ user, isAuthenticated: true, isLoading: false });\n    } catch {\n      set({ isLoading: false });\n      throw new Error('Login failed');\n    }\n  },\n\n  logout: () => {\n    set({ user: null, isAuthenticated: false });\n  },\n\n  setUser: (user) => {\n    set({ user, isAuthenticated: true });\n  },\n}));\n```\n\n## Selectors for Performance\n\n```typescript\n// âŒ Re-renders on any state change\nfunction Component(): React.ReactElement {\n  const store = useAuthStore(); // Subscribes to entire store\n  return <span>{store.user?.name}</span>;\n}\n\n// âœ… Re-renders only when user changes\nfunction Component(): React.ReactElement {\n  const user = useAuthStore((state) => state.user);\n  return <span>{user?.name}</span>;\n}\n\n// âœ… Multiple selectors\nfunction Component(): React.ReactElement {\n  const user = useAuthStore((state) => state.user);\n  const isLoading = useAuthStore((state) => state.isLoading);\n  return isLoading ? <Loading /> : <span>{user?.name}</span>;\n}\n\n// âœ… Computed selector\nfunction Component(): React.ReactElement {\n  const userName = useAuthStore((state) => state.user?.name ?? 'Guest');\n  return <span>{userName}</span>;\n}\n```\n\n## Middleware\n\n### Persist Middleware\n\n```typescript\nimport { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\ninterface SettingsState {\n  theme: 'light' | 'dark';\n  language: string;\n  setTheme: (theme: 'light' | 'dark') => void;\n  setLanguage: (language: string) => void;\n}\n\nexport const useSettingsStore = create<SettingsState>()(\n  persist(\n    (set) => ({\n      theme: 'light',\n      language: 'en',\n      setTheme: (theme) => set({ theme }),\n      setLanguage: (language) => set({ language }),\n    }),\n    {\n      name: 'settings-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({\n        theme: state.theme,\n        language: state.language,\n      }),\n    }\n  )\n);\n```\n\n### DevTools Middleware\n\n```typescript\nimport { create } from 'zustand';\nimport { devtools } from 'zustand/middleware';\n\nexport const useStore = create<StoreState>()(\n  devtools(\n    (set) => ({\n      // state and actions\n    }),\n    { name: 'MyStore' }\n  )\n);\n```\n\n### Combined Middleware\n\n```typescript\nimport { create } from 'zustand';\nimport { devtools, persist } from 'zustand/middleware';\n\nexport const useStore = create<StoreState>()(\n  devtools(\n    persist(\n      (set) => ({\n        // state and actions\n      }),\n      { name: 'storage-key' }\n    ),\n    { name: 'DevToolsName' }\n  )\n);\n```\n\n## Slices Pattern\n\nSplit large stores into slices:\n\n```typescript\n// slices/userSlice.ts\nimport { StateCreator } from 'zustand';\n\nexport interface UserSlice {\n  user: User | null;\n  setUser: (user: User) => void;\n  clearUser: () => void;\n}\n\nexport const createUserSlice: StateCreator<\n  UserSlice & CartSlice,\n  [],\n  [],\n  UserSlice\n> = (set) => ({\n  user: null,\n  setUser: (user) => set({ user }),\n  clearUser: () => set({ user: null }),\n});\n\n// slices/cartSlice.ts\nexport interface CartSlice {\n  items: CartItem[];\n  addItem: (item: CartItem) => void;\n  removeItem: (id: string) => void;\n  clearCart: () => void;\n}\n\nexport const createCartSlice: StateCreator<\n  UserSlice & CartSlice,\n  [],\n  [],\n  CartSlice\n> = (set) => ({\n  items: [],\n  addItem: (item) => set((state) => ({ items: [...state.items, item] })),\n  removeItem: (id) => set((state) => ({\n    items: state.items.filter((item) => item.id !== id),\n  })),\n  clearCart: () => set({ items: [] }),\n});\n\n// store.ts\nimport { create } from 'zustand';\nimport { createUserSlice, UserSlice } from './slices/userSlice';\nimport { createCartSlice, CartSlice } from './slices/cartSlice';\n\ntype StoreState = UserSlice & CartSlice;\n\nexport const useStore = create<StoreState>()((...a) => ({\n  ...createUserSlice(...a),\n  ...createCartSlice(...a),\n}));\n```\n\n## Async Actions\n\n```typescript\ninterface TodoState {\n  todos: Todo[];\n  isLoading: boolean;\n  error: string | null;\n  fetchTodos: () => Promise<void>;\n  addTodo: (text: string) => Promise<void>;\n}\n\nexport const useTodoStore = create<TodoState>((set, get) => ({\n  todos: [],\n  isLoading: false,\n  error: null,\n\n  fetchTodos: async () => {\n    set({ isLoading: true, error: null });\n    try {\n      const response = await fetch('/api/todos');\n      const todos = await response.json();\n      set({ todos, isLoading: false });\n    } catch (err) {\n      set({\n        error: err instanceof Error ? err.message : 'Failed to fetch',\n        isLoading: false,\n      });\n    }\n  },\n\n  addTodo: async (text) => {\n    const optimisticTodo: Todo = {\n      id: crypto.randomUUID(),\n      text,\n      completed: false,\n    };\n\n    // Optimistic update\n    set((state) => ({ todos: [...state.todos, optimisticTodo] }));\n\n    try {\n      const response = await fetch('/api/todos', {\n        method: 'POST',\n        body: JSON.stringify({ text }),\n      });\n      const savedTodo = await response.json();\n\n      // Replace optimistic with real\n      set((state) => ({\n        todos: state.todos.map((t) =>\n          t.id === optimisticTodo.id ? savedTodo : t\n        ),\n      }));\n    } catch {\n      // Rollback on error\n      set((state) => ({\n        todos: state.todos.filter((t) => t.id !== optimisticTodo.id),\n      }));\n    }\n  },\n}));\n```\n\n## Testing Stores\n\n```typescript\nimport { describe, it, expect, beforeEach } from 'vitest';\nimport { useAuthStore } from '../authStore';\n\ndescribe('authStore', () => {\n  beforeEach(() => {\n    // Reset store before each test\n    useAuthStore.setState({\n      user: null,\n      isAuthenticated: false,\n      isLoading: false,\n    });\n  });\n\n  it('sets user on login', async () => {\n    const user = { id: '1', name: 'Test', email: 'test@test.com' };\n\n    useAuthStore.getState().setUser(user);\n\n    expect(useAuthStore.getState().user).toEqual(user);\n    expect(useAuthStore.getState().isAuthenticated).toBe(true);\n  });\n\n  it('clears user on logout', () => {\n    useAuthStore.setState({ user: { id: '1' }, isAuthenticated: true });\n\n    useAuthStore.getState().logout();\n\n    expect(useAuthStore.getState().user).toBeNull();\n    expect(useAuthStore.getState().isAuthenticated).toBe(false);\n  });\n});\n```\n\n## Best Practices\n\n1. **Use selectors** - Always select specific state\n2. **Keep stores focused** - One concern per store\n3. **Use TypeScript** - Full type safety\n4. **Persist wisely** - Only persist what's needed\n5. **Devtools in development** - Easier debugging\n6. **Test store logic** - Unit test actions\n\n## When NOT to Use Zustand\n\n- Server state â†’ Use TanStack Query\n- Form state â†’ Use React Hook Form\n- URL state â†’ Use router params\n- Local component state â†’ Use useState\n\n## Notes\n\n- Zustand is 1KB (smaller than Redux)\n- No providers needed (unlike Context)\n- Works outside React components\n- Compatible with React 19"
              }
            ]
          },
          {
            "name": "node",
            "description": "Node.js backend development with Fastify, Prisma/Drizzle ORM, Docker containerization, and serverless deployment",
            "source": "./tech-stacks/js/node",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add IvanTorresEdge/molcajete.ai",
              "/plugin install node@Molcajete.ai"
            ],
            "signals": {
              "stars": 0,
              "forks": 1,
              "pushed_at": "2026-01-06T21:16:55Z",
              "created_at": "2025-11-13T04:11:22Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/api-init",
                "description": "Initialize REST/GraphQL API project with Fastify, Prisma, and modern patterns",
                "path": "tech-stacks/js/node/commands/api-init.md",
                "frontmatter": {
                  "description": "Initialize REST/GraphQL API project with Fastify, Prisma, and modern patterns"
                },
                "content": "# Initialize API Project\n\nInitialize a new Node.js API project with type-safe configuration.\n\nUse the Task tool to launch the **api-builder** agent with instructions:\n\n1. Ask user for project details using AskUserQuestion tool:\n   - Project name\n   - API type (REST, GraphQL, tRPC)\n   - HTTP framework (Fastify - default, Express, Hono)\n   - ORM choice (Prisma - default, Drizzle ORM)\n   - Database type (PostgreSQL, MySQL, SQLite)\n   - Authentication method (JWT, session, none)\n\n2. Create project structure:\n   ```\n   project/\n   â”œâ”€â”€ src/\n   â”‚   â”œâ”€â”€ index.ts              # Entry point\n   â”‚   â”œâ”€â”€ app.ts                # App configuration\n   â”‚   â”œâ”€â”€ config/\n   â”‚   â”‚   â””â”€â”€ index.ts          # Environment config\n   â”‚   â”œâ”€â”€ routes/\n   â”‚   â”‚   â”œâ”€â”€ index.ts          # Route registration\n   â”‚   â”‚   â””â”€â”€ health.ts         # Health check endpoint\n   â”‚   â”œâ”€â”€ middleware/\n   â”‚   â”‚   â”œâ”€â”€ error-handler.ts  # Global error handler\n   â”‚   â”‚   â””â”€â”€ auth.ts           # Authentication middleware\n   â”‚   â”œâ”€â”€ services/\n   â”‚   â”‚   â””â”€â”€ __tests__/\n   â”‚   â”œâ”€â”€ db/\n   â”‚   â”‚   â””â”€â”€ index.ts          # Database client\n   â”‚   â””â”€â”€ __tests__/\n   â”‚       â””â”€â”€ health.test.ts\n   â”œâ”€â”€ prisma/\n   â”‚   â””â”€â”€ schema.prisma\n   â”œâ”€â”€ dist/\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ package.json\n   â”œâ”€â”€ .env.example\n   â”œâ”€â”€ .gitignore\n   â””â”€â”€ README.md\n   ```\n\n3. Create `package.json` with scripts:\n   ```json\n   {\n     \"type\": \"module\",\n     \"scripts\": {\n       \"dev\": \"tsx watch src/index.ts\",\n       \"build\": \"tsup src/index.ts --format esm --dts\",\n       \"start\": \"node dist/index.js\",\n       \"type-check\": \"tsc --noEmit\",\n       \"lint\": \"biome check .\",\n       \"format\": \"biome format --write .\",\n       \"test\": \"vitest run\",\n       \"test:watch\": \"vitest\",\n       \"test:integration\": \"vitest run --config vitest.integration.config.ts\",\n       \"db:generate\": \"prisma generate\",\n       \"db:migrate\": \"prisma migrate dev\",\n       \"db:push\": \"prisma db push\",\n       \"db:seed\": \"tsx prisma/seed.ts\",\n       \"validate\": \"npm run type-check && npm run lint && npm test\"\n     }\n   }\n   ```\n\n4. Create Fastify app configuration:\n   ```typescript\n   // src/app.ts\n   import Fastify from 'fastify';\n   import { config } from './config';\n\n   export async function buildApp() {\n     const app = Fastify({\n       logger: {\n         level: config.logLevel,\n       },\n     });\n\n     // Register plugins\n     await app.register(import('./routes'));\n\n     return app;\n   }\n   ```\n\n5. Create health check endpoint\n\n6. Create error handling middleware\n\n7. Set up Prisma schema with initial User model\n\n8. Create `.env.example`:\n   ```\n   DATABASE_URL=postgresql://user:password@localhost:5432/dbname\n   JWT_SECRET=your-secret-key\n   PORT=3000\n   NODE_ENV=development\n   LOG_LEVEL=info\n   ```\n\n9. Install dependencies:\n   - fastify, @fastify/cors, @fastify/jwt\n   - @prisma/client, prisma\n   - zod, pino\n   - tsx, tsup (dev)\n\n10. Run validation:\n    - `npm run type-check`\n    - `npm run lint`\n    - `npm test`\n\n**Quality Requirements:**\n- All TypeScript strict flags enabled\n- Zero TypeScript errors or warnings\n- Zero linter warnings\n- All tests passing\n- NO `any` types allowed\n\nReference the **fastify-patterns**, **prisma-setup**, and **zod-validation** skills."
              },
              {
                "name": "/api-validate",
                "description": "Validate API schemas with Zod",
                "path": "tech-stacks/js/node/commands/api-validate.md",
                "frontmatter": {
                  "description": "Validate API schemas with Zod"
                },
                "content": "# Validate API Schemas\n\nValidate all Zod schemas and ensure type consistency.\n\nUse the Task tool to launch the **api-builder** agent with instructions:\n\n1. Find all Zod schema files:\n   - `src/schemas/*.ts`\n   - `src/routes/**/schema.ts`\n   - Inline schemas in route files\n\n2. Validate schema definitions:\n   - All schemas export properly\n   - Type inference works (`z.infer<typeof Schema>`)\n   - No circular dependencies\n\n3. Run type-check:\n   ```bash\n   npm run type-check\n   ```\n\n4. Check for common issues:\n   - Unused schemas\n   - Missing required fields\n   - Inconsistent naming\n\n5. Generate schema documentation (optional):\n   ```bash\n   npx zod-to-json-schema\n   ```\n\n6. Validate runtime behavior with tests:\n   ```bash\n   npm test -- --grep schema\n   ```\n\n**Quality Requirements:**\n- All schemas must pass type-check\n- Schema inference must work correctly\n- No `any` types in schema definitions\n- Tests for schema validation logic\n\nReference the **zod-validation** skill."
              },
              {
                "name": "/db-generate",
                "description": "Generate Prisma client from schema",
                "path": "tech-stacks/js/node/commands/db-generate.md",
                "frontmatter": {
                  "description": "Generate Prisma client from schema"
                },
                "content": "# Generate Prisma Client\n\nGenerate the Prisma client after schema changes.\n\nUse the Task tool to launch the **database-architect** agent with instructions:\n\n1. Verify Prisma schema exists at `prisma/schema.prisma`\n\n2. Run Prisma generate:\n   ```bash\n   npx prisma generate\n   ```\n\n3. Verify client generation succeeded\n\n4. Run type-check to ensure generated types are valid:\n   ```bash\n   npm run type-check\n   ```\n\n5. Display generated client location and usage instructions\n\n**Quality Requirements:**\n- Schema must be valid\n- No generation errors\n- Type-check must pass\n\nReference the **prisma-setup** skill."
              },
              {
                "name": "/db-migrate",
                "description": "Run database migrations",
                "path": "tech-stacks/js/node/commands/db-migrate.md",
                "frontmatter": {
                  "description": "Run database migrations"
                },
                "content": "# Run Database Migrations\n\nApply pending database migrations.\n\nUse the Task tool to launch the **database-architect** agent with instructions:\n\n1. Check for pending migrations\n\n2. For development:\n   ```bash\n   npx prisma migrate dev\n   ```\n\n3. For production deployment:\n   ```bash\n   npx prisma migrate deploy\n   ```\n\n4. If schema-only push needed (dev only):\n   ```bash\n   npx prisma db push\n   ```\n\n5. Regenerate Prisma client after migration:\n   ```bash\n   npx prisma generate\n   ```\n\n6. Verify database state:\n   ```bash\n   npx prisma db pull --print\n   ```\n\n7. Run type-check to ensure schema matches code:\n   ```bash\n   npm run type-check\n   ```\n\n**Quality Requirements:**\n- All migrations must apply successfully\n- No data loss warnings without user confirmation\n- Type-check must pass after migration\n\nReference the **migration-strategies** and **prisma-setup** skills."
              },
              {
                "name": "/db-seed",
                "description": "Seed database with test data",
                "path": "tech-stacks/js/node/commands/db-seed.md",
                "frontmatter": {
                  "description": "Seed database with test data"
                },
                "content": "# Seed Database\n\nSeed the database with development or test data.\n\nUse the Task tool to launch the **database-architect** agent with instructions:\n\n1. Check for existing seed file at `prisma/seed.ts`\n\n2. If seed file doesn't exist, create one:\n   ```typescript\n   // prisma/seed.ts\n   import { PrismaClient } from '@prisma/client';\n\n   const prisma = new PrismaClient();\n\n   async function main(): Promise<void> {\n     // Clear existing data\n     await prisma.$transaction([\n       // Add deleteMany calls in correct order\n     ]);\n\n     // Create seed data\n     console.log('Seeding database...');\n\n     // Add seed data creation\n\n     console.log('Database seeded successfully');\n   }\n\n   main()\n     .catch((e) => {\n       console.error(e);\n       process.exit(1);\n     })\n     .finally(async () => {\n       await prisma.$disconnect();\n     });\n   ```\n\n3. Ensure package.json has seed script:\n   ```json\n   {\n     \"prisma\": {\n       \"seed\": \"tsx prisma/seed.ts\"\n     }\n   }\n   ```\n\n4. Run seed:\n   ```bash\n   npx prisma db seed\n   ```\n\n5. Or run directly:\n   ```bash\n   npx tsx prisma/seed.ts\n   ```\n\n6. Verify seeded data\n\n**Quality Requirements:**\n- Seed script must be idempotent (safe to run multiple times)\n- Clear existing data before seeding\n- Use transactions for data integrity\n- Type-safe seed data\n\nReference the **prisma-setup** skill."
              },
              {
                "name": "/deploy",
                "description": "Deploy to cloud platform (Vercel, Railway, Fly.io, etc.)",
                "path": "tech-stacks/js/node/commands/deploy.md",
                "frontmatter": {
                  "description": "Deploy to cloud platform (Vercel, Railway, Fly.io, etc.)"
                },
                "content": "# Deploy to Platform\n\nDeploy the application to a cloud platform.\n\nUse the Task tool to launch the **deployer** agent with instructions:\n\n1. Ask user for deployment target using AskUserQuestion tool:\n   - Railway (recommended for full-stack)\n   - Fly.io (recommended for containers)\n   - Vercel (recommended for serverless)\n   - Render\n   - AWS Lambda\n   - Google Cloud Run\n   - DigitalOcean App Platform\n\n2. Run pre-deployment checks:\n   ```bash\n   npm run type-check\n   npm run lint\n   npm run test\n   npm run build\n   ```\n\n3. Based on platform, follow deployment steps:\n\n## Railway Deployment\n\n```bash\n# Install Railway CLI\nnpm install -g @railway/cli\n\n# Login\nrailway login\n\n# Link project\nrailway link\n\n# Deploy\nrailway up\n```\n\nConfiguration (railway.toml):\n```toml\n[build]\nbuilder = \"dockerfile\"\ndockerfilePath = \"Dockerfile\"\n\n[deploy]\nhealthcheckPath = \"/health\"\nhealthcheckTimeout = 30\nrestartPolicyType = \"on_failure\"\n```\n\n## Fly.io Deployment\n\n```bash\n# Install Fly CLI\ncurl -L https://fly.io/install.sh | sh\n\n# Login\nfly auth login\n\n# Launch (first time)\nfly launch\n\n# Deploy\nfly deploy\n```\n\nConfiguration (fly.toml):\n```toml\napp = \"my-app\"\nprimary_region = \"iad\"\n\n[build]\ndockerfile = \"Dockerfile\"\n\n[http_service]\ninternal_port = 3000\nforce_https = true\n```\n\n## Vercel Deployment\n\n```bash\n# Install Vercel CLI\nnpm install -g vercel\n\n# Login\nvercel login\n\n# Deploy\nvercel --prod\n```\n\nConfiguration (vercel.json):\n```json\n{\n  \"functions\": {\n    \"api/**/*.ts\": {\n      \"memory\": 1024,\n      \"maxDuration\": 30\n    }\n  }\n}\n```\n\n## Render Deployment\n\n```yaml\n# render.yaml\nservices:\n  - type: web\n    name: api\n    runtime: docker\n    dockerfilePath: ./Dockerfile\n    healthCheckPath: /health\n    envVars:\n      - key: DATABASE_URL\n        fromDatabase:\n          name: db\n          property: connectionString\n```\n\n4. Set environment variables in platform dashboard\n\n5. Verify deployment:\n   ```bash\n   curl https://your-app.platform.app/health\n   ```\n\n6. Set up monitoring and alerts\n\n**Quality Requirements:**\n- All pre-deployment checks pass\n- Health check endpoint responds\n- Environment variables configured\n- SSL/TLS enabled\n\nReference the **serverless-patterns** and **docker-backend-patterns** skills."
              },
              {
                "name": "/docker-build",
                "description": "Build optimized Docker image for Node.js application",
                "path": "tech-stacks/js/node/commands/docker-build.md",
                "frontmatter": {
                  "description": "Build optimized Docker image for Node.js application"
                },
                "content": "# Build Docker Image\n\nBuild an optimized Docker image using multi-stage builds.\n\nUse the Task tool to launch the **deployer** agent with instructions:\n\n1. Check for existing Dockerfile, create if missing\n\n2. Ensure Dockerfile uses multi-stage build pattern:\n   - Stage 1: Dependencies\n   - Stage 2: Build\n   - Stage 3: Production runner\n\n3. Build the image:\n   ```bash\n   docker build -t app:latest .\n   ```\n\n4. Build with specific tag:\n   ```bash\n   docker build -t app:$(git rev-parse --short HEAD) .\n   ```\n\n5. Build with build arguments:\n   ```bash\n   docker build \\\n     --build-arg NODE_ENV=production \\\n     -t app:latest .\n   ```\n\n6. Verify image size:\n   ```bash\n   docker images app:latest\n   ```\n\n7. Test the image locally:\n   ```bash\n   docker run --rm -p 3000:3000 --env-file .env.local app:latest\n   ```\n\n8. Check for vulnerabilities:\n   ```bash\n   docker scout cves app:latest\n   ```\n\n9. Verify health check:\n   ```bash\n   curl http://localhost:3000/health\n   ```\n\n**Dockerfile Template:**\n```dockerfile\nFROM node:22-alpine AS base\nRUN apk add --no-cache libc6-compat\nWORKDIR /app\n\nFROM base AS deps\nCOPY package.json package-lock.json ./\nRUN npm ci --only=production\n\nFROM base AS build\nCOPY package.json package-lock.json ./\nRUN npm ci\nCOPY . .\nRUN npm run build\n\nFROM base AS runner\nENV NODE_ENV=production\nRUN addgroup --system --gid 1001 nodejs\nRUN adduser --system --uid 1001 nodejs\n\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY --from=build /app/dist ./dist\nCOPY --from=build /app/package.json ./\n\nUSER nodejs\nEXPOSE 3000\nENV PORT=3000\n\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD wget --no-verbose --tries=1 --spider http://localhost:3000/health || exit 1\n\nCMD [\"node\", \"dist/index.js\"]\n```\n\n**Quality Requirements:**\n- Multi-stage build for minimal image size\n- Non-root user in production stage\n- Health check configured\n- No development dependencies in final image\n\nReference the **docker-backend-patterns** skill."
              },
              {
                "name": "/docker-run",
                "description": "Run Docker container locally",
                "path": "tech-stacks/js/node/commands/docker-run.md",
                "frontmatter": {
                  "description": "Run Docker container locally"
                },
                "content": "# Run Docker Container\n\nRun the application in a Docker container locally.\n\nUse the Task tool to launch the **deployer** agent with instructions:\n\n1. Check if image exists:\n   ```bash\n   docker images app:latest\n   ```\n\n2. If not, build first:\n   ```bash\n   docker build -t app:latest .\n   ```\n\n3. Run with docker-compose (recommended):\n   ```bash\n   docker-compose up -d\n   ```\n\n4. Or run standalone container:\n   ```bash\n   docker run -d \\\n     --name app \\\n     -p 3000:3000 \\\n     --env-file .env.local \\\n     app:latest\n   ```\n\n5. Run with database:\n   ```bash\n   docker run -d \\\n     --name app \\\n     -p 3000:3000 \\\n     --network app-network \\\n     -e DATABASE_URL=postgresql://postgres:password@db:5432/app \\\n     app:latest\n   ```\n\n6. View logs:\n   ```bash\n   docker logs -f app\n   ```\n\n7. Check health:\n   ```bash\n   docker inspect --format='{{.State.Health.Status}}' app\n   curl http://localhost:3000/health\n   ```\n\n8. Stop container:\n   ```bash\n   docker stop app\n   docker rm app\n   ```\n\n9. Stop all services:\n   ```bash\n   docker-compose down\n   ```\n\n**docker-compose.yml Template:**\n```yaml\nversion: '3.8'\n\nservices:\n  api:\n    build: .\n    ports:\n      - \"3000:3000\"\n    environment:\n      - DATABASE_URL=postgresql://postgres:password@db:5432/app\n      - NODE_ENV=production\n    depends_on:\n      db:\n        condition: service_healthy\n\n  db:\n    image: postgres:16-alpine\n    environment:\n      - POSTGRES_USER=postgres\n      - POSTGRES_PASSWORD=password\n      - POSTGRES_DB=app\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\nvolumes:\n  postgres_data:\n```\n\n**Quality Requirements:**\n- Container starts successfully\n- Health check passes\n- Logs show no errors\n- API responds correctly\n\nReference the **docker-backend-patterns** skill."
              },
              {
                "name": "/test-containers",
                "description": "Run tests with Docker containers using testcontainers",
                "path": "tech-stacks/js/node/commands/test-containers.md",
                "frontmatter": {
                  "description": "Run tests with Docker containers using testcontainers"
                },
                "content": "# Run Tests with Docker Containers\n\nRun integration tests using testcontainers for isolated database instances.\n\nUse the Task tool to launch the **tester** agent with instructions:\n\n1. Ensure Docker is running:\n   ```bash\n   docker info\n   ```\n\n2. Install testcontainers:\n   ```bash\n   npm install -D @testcontainers/postgresql\n   ```\n\n3. Create test setup with containers:\n   ```typescript\n   // tests/setup/database.ts\n   import { PostgreSqlContainer, StartedPostgreSqlContainer } from '@testcontainers/postgresql';\n   import { PrismaClient } from '@prisma/client';\n   import { execSync } from 'child_process';\n\n   let container: StartedPostgreSqlContainer;\n   let prisma: PrismaClient;\n\n   export async function setupDatabase(): Promise<PrismaClient> {\n     container = await new PostgreSqlContainer()\n       .withDatabase('test')\n       .withUsername('test')\n       .withPassword('test')\n       .start();\n\n     const databaseUrl = container.getConnectionUri();\n     process.env.DATABASE_URL = databaseUrl;\n\n     // Run migrations\n     execSync('npx prisma migrate deploy', {\n       env: { ...process.env, DATABASE_URL: databaseUrl },\n     });\n\n     prisma = new PrismaClient({\n       datasources: { db: { url: databaseUrl } },\n     });\n\n     return prisma;\n   }\n\n   export async function teardownDatabase(): Promise<void> {\n     await prisma.$disconnect();\n     await container.stop();\n   }\n   ```\n\n4. Use in tests:\n   ```typescript\n   // src/services/__tests__/user.container.test.ts\n   import { describe, it, expect, beforeAll, afterAll } from 'vitest';\n   import { PrismaClient } from '@prisma/client';\n   import { setupDatabase, teardownDatabase } from '../../../tests/setup/database';\n   import { UserService } from '../user';\n\n   describe('UserService with testcontainers', () => {\n     let prisma: PrismaClient;\n     let userService: UserService;\n\n     beforeAll(async () => {\n       prisma = await setupDatabase();\n       userService = new UserService(prisma);\n     }, 60000);\n\n     afterAll(async () => {\n       await teardownDatabase();\n     });\n\n     it('creates and retrieves user', async () => {\n       const user = await userService.create({\n         email: 'test@example.com',\n         name: 'Test User',\n       });\n\n       const found = await userService.findById(user.id);\n       expect(found).toMatchObject({\n         email: 'test@example.com',\n         name: 'Test User',\n       });\n     });\n   });\n   ```\n\n5. Run container tests:\n   ```bash\n   npx vitest run --config vitest.container.config.ts\n   ```\n\n6. Container test configuration:\n   ```typescript\n   // vitest.container.config.ts\n   import { defineConfig } from 'vitest/config';\n\n   export default defineConfig({\n     test: {\n       include: ['**/*.container.test.ts'],\n       testTimeout: 120000,\n       hookTimeout: 60000,\n       pool: 'forks',\n       poolOptions: {\n         forks: {\n           singleFork: true, // Run serially for container tests\n         },\n       },\n     },\n   });\n   ```\n\n**Quality Requirements:**\n- Docker must be running\n- Container startup timeout handled\n- Proper cleanup after tests\n- Isolated database per test run\n\nReference the **testcontainers-usage** skill."
              },
              {
                "name": "/test-e2e",
                "description": "Run end-to-end tests for backend services",
                "path": "tech-stacks/js/node/commands/test-e2e.md",
                "frontmatter": {
                  "description": "Run end-to-end tests for backend services"
                },
                "content": "# Run End-to-End Tests\n\nRun E2E tests that test the complete application stack.\n\nUse the Task tool to launch the **tester** agent with instructions:\n\n1. Start required services (database, cache, etc.):\n   ```bash\n   docker-compose up -d\n   ```\n\n2. Wait for services to be ready:\n   ```bash\n   npx wait-on tcp:5432 tcp:6379\n   ```\n\n3. Run migrations:\n   ```bash\n   npx prisma migrate deploy\n   ```\n\n4. Seed test data:\n   ```bash\n   npx prisma db seed\n   ```\n\n5. Start application in test mode:\n   ```bash\n   NODE_ENV=test npm run start &\n   ```\n\n6. Run E2E tests:\n   ```bash\n   npx vitest run --config vitest.e2e.config.ts\n   ```\n\n7. E2E test configuration:\n   ```typescript\n   // vitest.e2e.config.ts\n   import { defineConfig } from 'vitest/config';\n\n   export default defineConfig({\n     test: {\n       include: ['tests/e2e/**/*.e2e.test.ts'],\n       globalSetup: './tests/e2e/setup.ts',\n       globalTeardown: './tests/e2e/teardown.ts',\n       testTimeout: 60000,\n       hookTimeout: 30000,\n     },\n   });\n   ```\n\n8. Example E2E test:\n   ```typescript\n   // tests/e2e/auth.e2e.test.ts\n   import { describe, it, expect } from 'vitest';\n\n   const API_URL = process.env.API_URL || 'http://localhost:3000';\n\n   describe('Authentication E2E', () => {\n     it('completes full auth flow', async () => {\n       // Register\n       const registerResponse = await fetch(`${API_URL}/api/auth/register`, {\n         method: 'POST',\n         headers: { 'Content-Type': 'application/json' },\n         body: JSON.stringify({\n           email: 'e2e@example.com',\n           password: 'Password123!',\n           name: 'E2E User',\n         }),\n       });\n       expect(registerResponse.status).toBe(201);\n\n       // Login\n       const loginResponse = await fetch(`${API_URL}/api/auth/login`, {\n         method: 'POST',\n         headers: { 'Content-Type': 'application/json' },\n         body: JSON.stringify({\n           email: 'e2e@example.com',\n           password: 'Password123!',\n         }),\n       });\n       expect(loginResponse.status).toBe(200);\n       const { token } = await loginResponse.json();\n\n       // Access protected resource\n       const profileResponse = await fetch(`${API_URL}/api/users/me`, {\n         headers: { Authorization: `Bearer ${token}` },\n       });\n       expect(profileResponse.status).toBe(200);\n     });\n   });\n   ```\n\n9. Clean up:\n   ```bash\n   docker-compose down\n   ```\n\n**Quality Requirements:**\n- All E2E tests must pass\n- Services properly started and stopped\n- Test data cleaned up\n- No flaky tests\n\nReference the **e2e-testing-backend** skill."
              },
              {
                "name": "/test-integration",
                "description": "Run integration tests with Supertest",
                "path": "tech-stacks/js/node/commands/test-integration.md",
                "frontmatter": {
                  "description": "Run integration tests with Supertest"
                },
                "content": "# Run Integration Tests\n\nRun API integration tests using Supertest.\n\nUse the Task tool to launch the **tester** agent with instructions:\n\n1. Ensure test database is configured:\n   - `.env.test` with test database URL\n   - Separate database instance for tests\n\n2. Run database migrations for test environment:\n   ```bash\n   DATABASE_URL=$TEST_DATABASE_URL npx prisma migrate deploy\n   ```\n\n3. Run integration tests:\n   ```bash\n   npm run test:integration\n   ```\n\n   Or with Vitest:\n   ```bash\n   npx vitest run --config vitest.integration.config.ts\n   ```\n\n4. Integration test configuration:\n   ```typescript\n   // vitest.integration.config.ts\n   import { defineConfig } from 'vitest/config';\n\n   export default defineConfig({\n     test: {\n       include: ['src/**/*.integration.test.ts'],\n       globalSetup: './tests/integration/setup.ts',\n       globalTeardown: './tests/integration/teardown.ts',\n       testTimeout: 30000,\n     },\n   });\n   ```\n\n5. Example integration test:\n   ```typescript\n   // src/routes/__tests__/users.integration.test.ts\n   import { describe, it, expect, beforeAll, afterAll } from 'vitest';\n   import supertest from 'supertest';\n   import { buildApp } from '../../app';\n\n   describe('Users API', () => {\n     let app: FastifyInstance;\n\n     beforeAll(async () => {\n       app = await buildApp();\n       await app.ready();\n     });\n\n     afterAll(async () => {\n       await app.close();\n     });\n\n     it('creates a user', async () => {\n       const response = await supertest(app.server)\n         .post('/api/users')\n         .send({ email: 'test@example.com', name: 'Test User' })\n         .expect(201);\n\n       expect(response.body).toMatchObject({\n         email: 'test@example.com',\n         name: 'Test User',\n       });\n     });\n   });\n   ```\n\n6. Generate coverage report:\n   ```bash\n   npm run test:integration -- --coverage\n   ```\n\n**Quality Requirements:**\n- All integration tests must pass\n- Test database isolated from development\n- Clean up test data after each test\n- Coverage threshold met\n\nReference the **integration-testing** skill."
              }
            ],
            "skills": [
              {
                "name": "api-versioning",
                "description": "API versioning strategies for Node.js backends. Use when implementing versioned APIs.",
                "path": "tech-stacks/js/node/skills/api-versioning/SKILL.md",
                "frontmatter": {
                  "name": "api-versioning",
                  "description": "API versioning strategies for Node.js backends. Use when implementing versioned APIs."
                },
                "content": "# API Versioning Skill\n\nThis skill covers API versioning strategies for maintaining backward compatibility.\n\n## When to Use\n\nUse this skill when:\n- Building public APIs\n- Planning for API evolution\n- Supporting multiple API versions\n- Deprecating old endpoints\n\n## Core Principle\n\n**BACKWARD COMPATIBILITY** - Existing clients should continue working. New features require new versions only when breaking changes are necessary.\n\n## Versioning Strategies\n\n### 1. URL Path Versioning (Recommended)\n\n```typescript\n// src/routes/index.ts\nimport { FastifyPluginAsync } from 'fastify';\n\nconst routes: FastifyPluginAsync = async (fastify) => {\n  // Version 1\n  await fastify.register(import('./v1'), { prefix: '/api/v1' });\n\n  // Version 2\n  await fastify.register(import('./v2'), { prefix: '/api/v2' });\n};\n\nexport default routes;\n```\n\n```typescript\n// src/routes/v1/users.ts\nimport { FastifyPluginAsync } from 'fastify';\n\nconst usersV1: FastifyPluginAsync = async (fastify) => {\n  fastify.get('/', async () => {\n    // V1 response format\n    return fastify.db.user.findMany({\n      select: { id: true, name: true, email: true },\n    });\n  });\n};\n\nexport default usersV1;\n```\n\n```typescript\n// src/routes/v2/users.ts\nimport { FastifyPluginAsync } from 'fastify';\n\nconst usersV2: FastifyPluginAsync = async (fastify) => {\n  fastify.get('/', async () => {\n    // V2 response format with pagination\n    return {\n      data: await fastify.db.user.findMany(),\n      meta: {\n        total: await fastify.db.user.count(),\n        page: 1,\n        perPage: 20,\n      },\n    };\n  });\n};\n\nexport default usersV2;\n```\n\n### 2. Header-Based Versioning\n\n```typescript\n// src/plugins/api-version.ts\nimport { FastifyPluginAsync, FastifyRequest } from 'fastify';\nimport fp from 'fastify-plugin';\n\ndeclare module 'fastify' {\n  interface FastifyRequest {\n    apiVersion: string;\n  }\n}\n\nconst apiVersionPlugin: FastifyPluginAsync = async (fastify) => {\n  fastify.decorateRequest('apiVersion', '');\n\n  fastify.addHook('onRequest', async (request) => {\n    const version = request.headers['api-version'] as string | undefined;\n    request.apiVersion = version ?? '1';\n  });\n};\n\nexport default fp(apiVersionPlugin);\n```\n\n```typescript\n// src/routes/users.ts\nimport { FastifyPluginAsync } from 'fastify';\n\nconst users: FastifyPluginAsync = async (fastify) => {\n  fastify.get('/', async (request) => {\n    const users = await fastify.db.user.findMany();\n\n    // Response based on version\n    if (request.apiVersion === '2') {\n      return {\n        data: users,\n        meta: { total: users.length },\n      };\n    }\n\n    // V1 default response\n    return users;\n  });\n};\n\nexport default users;\n```\n\n### 3. Query Parameter Versioning\n\n```typescript\n// src/routes/users.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport { z } from 'zod';\n\nconst QuerySchema = z.object({\n  version: z.enum(['1', '2']).default('1'),\n});\n\nconst users: FastifyPluginAsync = async (fastify) => {\n  fastify.get<{ Querystring: z.infer<typeof QuerySchema> }>('/', async (request) => {\n    const { version } = request.query;\n    const users = await fastify.db.user.findMany();\n\n    if (version === '2') {\n      return { data: users, meta: { total: users.length } };\n    }\n\n    return users;\n  });\n};\n\nexport default users;\n```\n\n## Version Router Pattern\n\n```typescript\n// src/lib/version-router.ts\nimport { FastifyPluginAsync, FastifyRequest, FastifyReply } from 'fastify';\n\ntype VersionHandler<T> = (\n  request: FastifyRequest,\n  reply: FastifyReply\n) => Promise<T>;\n\ninterface VersionedHandlers<T> {\n  v1: VersionHandler<T>;\n  v2?: VersionHandler<T>;\n  v3?: VersionHandler<T>;\n}\n\nexport function createVersionedHandler<T>(\n  handlers: VersionedHandlers<T>\n): VersionHandler<T> {\n  return async (request, reply) => {\n    const version = request.apiVersion as keyof VersionedHandlers<T>;\n    const handler = handlers[version] ?? handlers.v1;\n    return handler(request, reply);\n  };\n}\n```\n\n```typescript\n// Usage\nimport { createVersionedHandler } from '../lib/version-router';\n\nfastify.get('/users', createVersionedHandler({\n  v1: async (request) => {\n    return fastify.db.user.findMany();\n  },\n  v2: async (request) => {\n    return {\n      data: await fastify.db.user.findMany(),\n      meta: { version: 2 },\n    };\n  },\n}));\n```\n\n## Deprecation Handling\n\n```typescript\n// src/plugins/deprecation.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport fp from 'fastify-plugin';\n\ninterface DeprecatedRoute {\n  path: string;\n  method: string;\n  sunsetDate: string;\n  alternative?: string;\n}\n\nconst deprecatedRoutes: DeprecatedRoute[] = [\n  {\n    path: '/api/v1/users',\n    method: 'GET',\n    sunsetDate: '2025-06-01',\n    alternative: '/api/v2/users',\n  },\n];\n\nconst deprecationPlugin: FastifyPluginAsync = async (fastify) => {\n  fastify.addHook('onSend', async (request, reply) => {\n    const deprecated = deprecatedRoutes.find(\n      (r) => r.path === request.url && r.method === request.method\n    );\n\n    if (deprecated) {\n      reply.header('Deprecation', `date=\"${deprecated.sunsetDate}\"`);\n      reply.header('Sunset', deprecated.sunsetDate);\n      if (deprecated.alternative) {\n        reply.header('Link', `<${deprecated.alternative}>; rel=\"successor-version\"`);\n      }\n    }\n  });\n};\n\nexport default fp(deprecationPlugin);\n```\n\n## Response Transformers\n\n```typescript\n// src/transformers/user.ts\nimport { User } from '@prisma/client';\n\ninterface UserV1Response {\n  id: string;\n  name: string;\n  email: string;\n}\n\ninterface UserV2Response {\n  id: string;\n  fullName: string;\n  emailAddress: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport function toUserV1(user: User): UserV1Response {\n  return {\n    id: user.id,\n    name: user.name,\n    email: user.email,\n  };\n}\n\nexport function toUserV2(user: User): UserV2Response {\n  return {\n    id: user.id,\n    fullName: user.name,\n    emailAddress: user.email,\n    createdAt: user.createdAt.toISOString(),\n    updatedAt: user.updatedAt.toISOString(),\n  };\n}\n```\n\n## Versioned Schemas\n\n```typescript\n// src/schemas/user.ts\nimport { z } from 'zod';\n\n// V1 Schema\nexport const UserV1Schema = z.object({\n  id: z.string(),\n  name: z.string(),\n  email: z.string(),\n});\n\n// V2 Schema - Added fields\nexport const UserV2Schema = z.object({\n  id: z.string(),\n  fullName: z.string(),\n  emailAddress: z.string(),\n  createdAt: z.string().datetime(),\n  updatedAt: z.string().datetime(),\n  profile: z.object({\n    avatar: z.string().nullable(),\n    bio: z.string().nullable(),\n  }).optional(),\n});\n\nexport type UserV1 = z.infer<typeof UserV1Schema>;\nexport type UserV2 = z.infer<typeof UserV2Schema>;\n```\n\n## Breaking vs Non-Breaking Changes\n\n### Non-Breaking (Add to existing version)\n- Adding new endpoints\n- Adding optional fields to responses\n- Adding optional query parameters\n- Loosening validation rules\n\n### Breaking (Requires new version)\n- Removing fields from responses\n- Renaming fields\n- Changing field types\n- Tightening validation rules\n- Removing endpoints\n- Changing endpoint paths\n\n## Best Practices\n\n1. **Default version** - Always have a default version\n2. **Document changes** - Maintain changelog per version\n3. **Deprecation notices** - Use headers for deprecation warnings\n4. **Sunset dates** - Communicate end-of-life dates\n5. **Support window** - Support at least 2 versions\n6. **Breaking changes** - Only in major version bumps\n\n## Notes\n\n- URL versioning is most explicit and cacheable\n- Header versioning keeps URLs clean\n- Support minimum 2 versions simultaneously\n- Document version differences in API docs"
              },
              {
                "name": "authentication-strategies",
                "description": "Authentication patterns including JWT, sessions, and OAuth. Use when implementing user authentication.",
                "path": "tech-stacks/js/node/skills/authentication-strategies/SKILL.md",
                "frontmatter": {
                  "name": "authentication-strategies",
                  "description": "Authentication patterns including JWT, sessions, and OAuth. Use when implementing user authentication."
                },
                "content": "# Authentication Strategies Skill\n\nThis skill covers authentication patterns for Node.js APIs.\n\n## When to Use\n\nUse this skill when:\n- Implementing user authentication\n- Setting up JWT token handling\n- Integrating OAuth providers\n- Managing user sessions\n\n## Core Principle\n\n**DEFENSE IN DEPTH** - Multiple layers of security. Never trust client input. Always validate tokens server-side.\n\n## JWT Authentication\n\n### Setup\n\n```bash\nnpm install @fastify/jwt bcrypt\nnpm install -D @types/bcrypt\n```\n\n### JWT Plugin\n\n```typescript\n// src/plugins/auth.ts\nimport { FastifyPluginAsync, FastifyRequest } from 'fastify';\nimport fp from 'fastify-plugin';\nimport jwt from '@fastify/jwt';\n\ndeclare module '@fastify/jwt' {\n  interface FastifyJWT {\n    payload: {\n      userId: string;\n      role: 'USER' | 'ADMIN';\n      iat: number;\n      exp: number;\n    };\n    user: {\n      userId: string;\n      role: 'USER' | 'ADMIN';\n    };\n  }\n}\n\ndeclare module 'fastify' {\n  interface FastifyInstance {\n    authenticate: (request: FastifyRequest) => Promise<void>;\n    authenticateOptional: (request: FastifyRequest) => Promise<void>;\n  }\n}\n\nconst authPlugin: FastifyPluginAsync = async (fastify) => {\n  await fastify.register(jwt, {\n    secret: process.env.JWT_SECRET!,\n    sign: {\n      expiresIn: '15m', // Short-lived access tokens\n    },\n  });\n\n  // Required authentication\n  fastify.decorate('authenticate', async (request: FastifyRequest) => {\n    await request.jwtVerify();\n  });\n\n  // Optional authentication\n  fastify.decorate('authenticateOptional', async (request: FastifyRequest) => {\n    try {\n      await request.jwtVerify();\n    } catch {\n      // Continue without user\n    }\n  });\n};\n\nexport default fp(authPlugin, { name: 'auth' });\n```\n\n### Auth Routes\n\n```typescript\n// src/routes/auth.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport { z } from 'zod';\nimport bcrypt from 'bcrypt';\n\nconst RegisterSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8),\n  name: z.string().min(1),\n});\n\nconst LoginSchema = z.object({\n  email: z.string().email(),\n  password: z.string(),\n});\n\nconst authRoutes: FastifyPluginAsync = async (fastify) => {\n  // Register\n  fastify.post<{ Body: z.infer<typeof RegisterSchema> }>('/register', async (request, reply) => {\n    const { email, password, name } = request.body;\n\n    // Check if user exists\n    const existing = await fastify.db.user.findUnique({ where: { email } });\n    if (existing) {\n      return reply.status(400).send({ error: 'Email already registered' });\n    }\n\n    // Hash password\n    const hashedPassword = await bcrypt.hash(password, 12);\n\n    // Create user\n    const user = await fastify.db.user.create({\n      data: { email, password: hashedPassword, name },\n    });\n\n    // Generate tokens\n    const accessToken = fastify.jwt.sign({\n      userId: user.id,\n      role: user.role,\n    });\n\n    const refreshToken = await createRefreshToken(fastify, user.id);\n\n    return reply.status(201).send({\n      user: { id: user.id, email: user.email, name: user.name },\n      accessToken,\n      refreshToken,\n    });\n  });\n\n  // Login\n  fastify.post<{ Body: z.infer<typeof LoginSchema> }>('/login', async (request, reply) => {\n    const { email, password } = request.body;\n\n    const user = await fastify.db.user.findUnique({ where: { email } });\n    if (!user) {\n      return reply.status(401).send({ error: 'Invalid credentials' });\n    }\n\n    const validPassword = await bcrypt.compare(password, user.password);\n    if (!validPassword) {\n      return reply.status(401).send({ error: 'Invalid credentials' });\n    }\n\n    const accessToken = fastify.jwt.sign({\n      userId: user.id,\n      role: user.role,\n    });\n\n    const refreshToken = await createRefreshToken(fastify, user.id);\n\n    return {\n      user: { id: user.id, email: user.email, name: user.name },\n      accessToken,\n      refreshToken,\n    };\n  });\n\n  // Refresh token\n  fastify.post<{ Body: { refreshToken: string } }>('/refresh', async (request, reply) => {\n    const { refreshToken } = request.body;\n\n    const token = await fastify.db.refreshToken.findUnique({\n      where: { token: refreshToken },\n      include: { user: true },\n    });\n\n    if (!token || token.expiresAt < new Date()) {\n      return reply.status(401).send({ error: 'Invalid refresh token' });\n    }\n\n    // Rotate refresh token\n    await fastify.db.refreshToken.delete({ where: { id: token.id } });\n    const newRefreshToken = await createRefreshToken(fastify, token.userId);\n\n    const accessToken = fastify.jwt.sign({\n      userId: token.user.id,\n      role: token.user.role,\n    });\n\n    return { accessToken, refreshToken: newRefreshToken };\n  });\n\n  // Logout\n  fastify.post('/logout', {\n    preHandler: [fastify.authenticate],\n  }, async (request, reply) => {\n    // Delete all refresh tokens for user\n    await fastify.db.refreshToken.deleteMany({\n      where: { userId: request.user.userId },\n    });\n\n    return { success: true };\n  });\n};\n\nasync function createRefreshToken(fastify: FastifyInstance, userId: string): Promise<string> {\n  const token = crypto.randomUUID();\n  const expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000); // 7 days\n\n  await fastify.db.refreshToken.create({\n    data: { token, userId, expiresAt },\n  });\n\n  return token;\n}\n\nexport default authRoutes;\n```\n\n### Protected Routes\n\n```typescript\n// src/routes/users.ts\nimport { FastifyPluginAsync } from 'fastify';\n\nconst usersRoutes: FastifyPluginAsync = async (fastify) => {\n  // Protected route\n  fastify.get('/me', {\n    preHandler: [fastify.authenticate],\n  }, async (request) => {\n    const user = await fastify.db.user.findUnique({\n      where: { id: request.user.userId },\n      select: { id: true, email: true, name: true, role: true },\n    });\n\n    return user;\n  });\n\n  // Admin only route\n  fastify.get('/admin/users', {\n    preHandler: [fastify.authenticate],\n  }, async (request, reply) => {\n    if (request.user.role !== 'ADMIN') {\n      return reply.status(403).send({ error: 'Forbidden' });\n    }\n\n    return fastify.db.user.findMany();\n  });\n};\n\nexport default usersRoutes;\n```\n\n## OAuth 2.0 Integration\n\n### Google OAuth\n\n```typescript\n// src/routes/oauth.ts\nimport { FastifyPluginAsync } from 'fastify';\n\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID!;\nconst GOOGLE_CLIENT_SECRET = process.env.GOOGLE_CLIENT_SECRET!;\nconst GOOGLE_REDIRECT_URI = process.env.GOOGLE_REDIRECT_URI!;\n\nconst oauthRoutes: FastifyPluginAsync = async (fastify) => {\n  // Initiate Google OAuth\n  fastify.get('/google', async (request, reply) => {\n    const params = new URLSearchParams({\n      client_id: GOOGLE_CLIENT_ID,\n      redirect_uri: GOOGLE_REDIRECT_URI,\n      response_type: 'code',\n      scope: 'email profile',\n      access_type: 'offline',\n    });\n\n    return reply.redirect(\n      `https://accounts.google.com/o/oauth2/v2/auth?${params}`\n    );\n  });\n\n  // Google OAuth callback\n  fastify.get<{ Querystring: { code: string } }>('/google/callback', async (request, reply) => {\n    const { code } = request.query;\n\n    // Exchange code for tokens\n    const tokenResponse = await fetch('https://oauth2.googleapis.com/token', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n      body: new URLSearchParams({\n        code,\n        client_id: GOOGLE_CLIENT_ID,\n        client_secret: GOOGLE_CLIENT_SECRET,\n        redirect_uri: GOOGLE_REDIRECT_URI,\n        grant_type: 'authorization_code',\n      }),\n    });\n\n    const tokens = await tokenResponse.json();\n\n    // Get user info\n    const userResponse = await fetch('https://www.googleapis.com/oauth2/v2/userinfo', {\n      headers: { Authorization: `Bearer ${tokens.access_token}` },\n    });\n\n    const googleUser = await userResponse.json();\n\n    // Find or create user\n    let user = await fastify.db.user.findUnique({\n      where: { email: googleUser.email },\n    });\n\n    if (!user) {\n      user = await fastify.db.user.create({\n        data: {\n          email: googleUser.email,\n          name: googleUser.name,\n          googleId: googleUser.id,\n          password: '', // No password for OAuth users\n        },\n      });\n    }\n\n    // Generate JWT\n    const accessToken = fastify.jwt.sign({\n      userId: user.id,\n      role: user.role,\n    });\n\n    // Redirect to frontend with token\n    return reply.redirect(`${process.env.FRONTEND_URL}/auth/callback?token=${accessToken}`);\n  });\n};\n\nexport default oauthRoutes;\n```\n\n## API Key Authentication\n\n```typescript\n// src/plugins/api-key.ts\nimport { FastifyPluginAsync, FastifyRequest } from 'fastify';\nimport fp from 'fastify-plugin';\n\ndeclare module 'fastify' {\n  interface FastifyRequest {\n    apiKey?: { id: string; name: string; permissions: string[] };\n  }\n  interface FastifyInstance {\n    authenticateApiKey: (request: FastifyRequest) => Promise<void>;\n  }\n}\n\nconst apiKeyPlugin: FastifyPluginAsync = async (fastify) => {\n  fastify.decorate('authenticateApiKey', async (request: FastifyRequest) => {\n    const key = request.headers['x-api-key'] as string | undefined;\n\n    if (!key) {\n      throw fastify.httpErrors.unauthorized('API key required');\n    }\n\n    const apiKey = await fastify.db.apiKey.findUnique({\n      where: { key },\n    });\n\n    if (!apiKey || !apiKey.active) {\n      throw fastify.httpErrors.unauthorized('Invalid API key');\n    }\n\n    // Update last used\n    await fastify.db.apiKey.update({\n      where: { id: apiKey.id },\n      data: { lastUsedAt: new Date() },\n    });\n\n    request.apiKey = {\n      id: apiKey.id,\n      name: apiKey.name,\n      permissions: apiKey.permissions,\n    };\n  });\n};\n\nexport default fp(apiKeyPlugin);\n```\n\n## Password Security\n\n```typescript\n// src/lib/password.ts\nimport bcrypt from 'bcrypt';\nimport { z } from 'zod';\n\nconst SALT_ROUNDS = 12;\n\n// Password requirements\nexport const PasswordSchema = z.string()\n  .min(8, 'Password must be at least 8 characters')\n  .regex(/[A-Z]/, 'Password must contain uppercase letter')\n  .regex(/[a-z]/, 'Password must contain lowercase letter')\n  .regex(/[0-9]/, 'Password must contain number')\n  .regex(/[^A-Za-z0-9]/, 'Password must contain special character');\n\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, SALT_ROUNDS);\n}\n\nexport async function verifyPassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n\nexport function isPasswordCompromised(password: string): boolean {\n  // Check against common passwords list\n  const commonPasswords = ['password', '123456', 'qwerty'];\n  return commonPasswords.includes(password.toLowerCase());\n}\n```\n\n## Best Practices\n\n1. **Short-lived access tokens** - 15 minutes maximum\n2. **Rotate refresh tokens** - On each use\n3. **Hash passwords** - bcrypt with high cost factor\n4. **Rate limit auth endpoints** - Prevent brute force\n5. **Secure cookies** - HttpOnly, Secure, SameSite\n6. **Validate all tokens** - Server-side verification\n\n## Notes\n\n- Never store plain-text passwords\n- Use HTTPS in production\n- Implement account lockout\n- Log authentication events\n- Support MFA for sensitive operations"
              },
              {
                "name": "authorization-patterns",
                "description": "Authorization patterns including RBAC and ABAC. Use when implementing access control.",
                "path": "tech-stacks/js/node/skills/authorization-patterns/SKILL.md",
                "frontmatter": {
                  "name": "authorization-patterns",
                  "description": "Authorization patterns including RBAC and ABAC. Use when implementing access control."
                },
                "content": "# Authorization Patterns Skill\n\nThis skill covers authorization patterns for controlling access to resources.\n\n## When to Use\n\nUse this skill when:\n- Implementing role-based access control (RBAC)\n- Setting up attribute-based access control (ABAC)\n- Creating permission guards\n- Controlling resource access\n\n## Core Principle\n\n**LEAST PRIVILEGE** - Grant minimum permissions needed. Default to deny. Validate on every request.\n\n## Role-Based Access Control (RBAC)\n\n### Role Definition\n\n```typescript\n// src/lib/roles.ts\nexport const Role = {\n  USER: 'USER',\n  MODERATOR: 'MODERATOR',\n  ADMIN: 'ADMIN',\n} as const;\n\nexport type Role = (typeof Role)[keyof typeof Role];\n\nexport const Permission = {\n  // Users\n  USER_READ: 'user:read',\n  USER_CREATE: 'user:create',\n  USER_UPDATE: 'user:update',\n  USER_DELETE: 'user:delete',\n\n  // Posts\n  POST_READ: 'post:read',\n  POST_CREATE: 'post:create',\n  POST_UPDATE: 'post:update',\n  POST_DELETE: 'post:delete',\n\n  // Admin\n  ADMIN_ACCESS: 'admin:access',\n} as const;\n\nexport type Permission = (typeof Permission)[keyof typeof Permission];\n\nexport const rolePermissions: Record<Role, Permission[]> = {\n  USER: [\n    Permission.USER_READ,\n    Permission.POST_READ,\n    Permission.POST_CREATE,\n  ],\n  MODERATOR: [\n    Permission.USER_READ,\n    Permission.POST_READ,\n    Permission.POST_CREATE,\n    Permission.POST_UPDATE,\n    Permission.POST_DELETE,\n  ],\n  ADMIN: Object.values(Permission),\n};\n```\n\n### Permission Checker\n\n```typescript\n// src/lib/permissions.ts\nimport { Role, Permission, rolePermissions } from './roles';\n\nexport function hasPermission(role: Role, permission: Permission): boolean {\n  return rolePermissions[role].includes(permission);\n}\n\nexport function hasAnyPermission(role: Role, permissions: Permission[]): boolean {\n  return permissions.some((p) => hasPermission(role, p));\n}\n\nexport function hasAllPermissions(role: Role, permissions: Permission[]): boolean {\n  return permissions.every((p) => hasPermission(role, p));\n}\n```\n\n### Authorization Middleware\n\n```typescript\n// src/plugins/authorize.ts\nimport { FastifyPluginAsync, FastifyRequest, FastifyReply } from 'fastify';\nimport fp from 'fastify-plugin';\nimport { Permission, hasPermission, hasAnyPermission } from '../lib/permissions';\n\ndeclare module 'fastify' {\n  interface FastifyInstance {\n    authorize: (...permissions: Permission[]) => (\n      request: FastifyRequest,\n      reply: FastifyReply\n    ) => Promise<void>;\n    authorizeAny: (...permissions: Permission[]) => (\n      request: FastifyRequest,\n      reply: FastifyReply\n    ) => Promise<void>;\n  }\n}\n\nconst authorizePlugin: FastifyPluginAsync = async (fastify) => {\n  // Require ALL permissions\n  fastify.decorate('authorize', (...permissions: Permission[]) => {\n    return async (request: FastifyRequest, reply: FastifyReply) => {\n      if (!request.user) {\n        return reply.status(401).send({ error: 'Unauthorized' });\n      }\n\n      const authorized = permissions.every((p) =>\n        hasPermission(request.user.role, p)\n      );\n\n      if (!authorized) {\n        return reply.status(403).send({ error: 'Forbidden' });\n      }\n    };\n  });\n\n  // Require ANY permission\n  fastify.decorate('authorizeAny', (...permissions: Permission[]) => {\n    return async (request: FastifyRequest, reply: FastifyReply) => {\n      if (!request.user) {\n        return reply.status(401).send({ error: 'Unauthorized' });\n      }\n\n      const authorized = hasAnyPermission(request.user.role, permissions);\n\n      if (!authorized) {\n        return reply.status(403).send({ error: 'Forbidden' });\n      }\n    };\n  });\n};\n\nexport default fp(authorizePlugin);\n```\n\n### Using Authorization\n\n```typescript\n// src/routes/admin.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport { Permission } from '../lib/roles';\n\nconst adminRoutes: FastifyPluginAsync = async (fastify) => {\n  // All routes require authentication\n  fastify.addHook('preHandler', fastify.authenticate);\n\n  // Admin dashboard - requires admin access\n  fastify.get('/dashboard', {\n    preHandler: [fastify.authorize(Permission.ADMIN_ACCESS)],\n  }, async () => {\n    return { stats: await getAdminStats(fastify) };\n  });\n\n  // Manage users - requires user management permissions\n  fastify.get('/users', {\n    preHandler: [fastify.authorize(Permission.USER_READ, Permission.ADMIN_ACCESS)],\n  }, async () => {\n    return fastify.db.user.findMany();\n  });\n\n  fastify.delete('/users/:id', {\n    preHandler: [fastify.authorize(Permission.USER_DELETE)],\n  }, async (request) => {\n    const { id } = request.params as { id: string };\n    await fastify.db.user.delete({ where: { id } });\n    return { success: true };\n  });\n};\n\nexport default adminRoutes;\n```\n\n## Attribute-Based Access Control (ABAC)\n\n### Policy Definition\n\n```typescript\n// src/lib/abac/policies.ts\nimport { User, Post } from '@prisma/client';\n\ninterface PolicyContext {\n  user: User;\n  resource: unknown;\n  action: string;\n  environment?: {\n    time?: Date;\n    ip?: string;\n  };\n}\n\ntype PolicyFunction = (context: PolicyContext) => boolean;\n\nconst policies: Record<string, PolicyFunction> = {\n  // Post policies\n  'post:read': ({ resource }) => {\n    const post = resource as Post;\n    return post.published;\n  },\n\n  'post:update': ({ user, resource }) => {\n    const post = resource as Post;\n    return post.authorId === user.id || user.role === 'ADMIN';\n  },\n\n  'post:delete': ({ user, resource }) => {\n    const post = resource as Post;\n    return post.authorId === user.id || user.role === 'ADMIN';\n  },\n\n  // User policies\n  'user:update': ({ user, resource }) => {\n    const targetUser = resource as User;\n    return user.id === targetUser.id || user.role === 'ADMIN';\n  },\n\n  // Time-based policy\n  'admin:access': ({ user, environment }) => {\n    if (user.role !== 'ADMIN') return false;\n\n    // Only during business hours\n    const hour = environment?.time?.getHours() ?? new Date().getHours();\n    return hour >= 9 && hour <= 17;\n  },\n};\n\nexport function checkPolicy(\n  action: string,\n  context: Omit<PolicyContext, 'action'>\n): boolean {\n  const policy = policies[action];\n  if (!policy) {\n    return false; // Deny by default\n  }\n  return policy({ ...context, action });\n}\n```\n\n### ABAC Middleware\n\n```typescript\n// src/plugins/abac.ts\nimport { FastifyPluginAsync, FastifyRequest, FastifyReply } from 'fastify';\nimport fp from 'fastify-plugin';\nimport { checkPolicy } from '../lib/abac/policies';\n\ntype ResourceLoader<T> = (request: FastifyRequest) => Promise<T>;\n\ndeclare module 'fastify' {\n  interface FastifyInstance {\n    checkAccess: <T>(\n      action: string,\n      loadResource: ResourceLoader<T>\n    ) => (request: FastifyRequest, reply: FastifyReply) => Promise<void>;\n  }\n}\n\nconst abacPlugin: FastifyPluginAsync = async (fastify) => {\n  fastify.decorate(\n    'checkAccess',\n    <T>(action: string, loadResource: ResourceLoader<T>) => {\n      return async (request: FastifyRequest, reply: FastifyReply) => {\n        if (!request.user) {\n          return reply.status(401).send({ error: 'Unauthorized' });\n        }\n\n        const resource = await loadResource(request);\n        if (!resource) {\n          return reply.status(404).send({ error: 'Resource not found' });\n        }\n\n        const user = await fastify.db.user.findUnique({\n          where: { id: request.user.userId },\n        });\n\n        if (!user) {\n          return reply.status(401).send({ error: 'Unauthorized' });\n        }\n\n        const allowed = checkPolicy(action, {\n          user,\n          resource,\n          environment: {\n            time: new Date(),\n            ip: request.ip,\n          },\n        });\n\n        if (!allowed) {\n          return reply.status(403).send({ error: 'Forbidden' });\n        }\n\n        // Attach resource to request for handler\n        (request as FastifyRequest & { resource: T }).resource = resource;\n      };\n    }\n  );\n};\n\nexport default fp(abacPlugin);\n```\n\n### Using ABAC\n\n```typescript\n// src/routes/posts.ts\nimport { FastifyPluginAsync } from 'fastify';\n\nconst postsRoutes: FastifyPluginAsync = async (fastify) => {\n  // Update post with ABAC\n  fastify.put<{ Params: { id: string } }>('/:id', {\n    preHandler: [\n      fastify.authenticate,\n      fastify.checkAccess('post:update', async (request) => {\n        const { id } = request.params as { id: string };\n        return fastify.db.post.findUnique({ where: { id } });\n      }),\n    ],\n  }, async (request) => {\n    const post = (request as unknown as { resource: Post }).resource;\n    const { title, content } = request.body as { title: string; content: string };\n\n    return fastify.db.post.update({\n      where: { id: post.id },\n      data: { title, content },\n    });\n  });\n\n  // Delete post with ABAC\n  fastify.delete<{ Params: { id: string } }>('/:id', {\n    preHandler: [\n      fastify.authenticate,\n      fastify.checkAccess('post:delete', async (request) => {\n        const { id } = request.params as { id: string };\n        return fastify.db.post.findUnique({ where: { id } });\n      }),\n    ],\n  }, async (request) => {\n    const post = (request as unknown as { resource: Post }).resource;\n    await fastify.db.post.delete({ where: { id: post.id } });\n    return { success: true };\n  });\n};\n\nexport default postsRoutes;\n```\n\n## Scope-Based Authorization\n\n```typescript\n// src/lib/scopes.ts\nexport const Scope = {\n  READ: 'read',\n  WRITE: 'write',\n  DELETE: 'delete',\n  ADMIN: 'admin',\n} as const;\n\nexport type Scope = (typeof Scope)[keyof typeof Scope];\n\nexport function parseScopes(scopeString: string): Scope[] {\n  return scopeString.split(' ').filter((s): s is Scope =>\n    Object.values(Scope).includes(s as Scope)\n  );\n}\n\nexport function hasScope(userScopes: Scope[], requiredScope: Scope): boolean {\n  if (userScopes.includes(Scope.ADMIN)) return true;\n  return userScopes.includes(requiredScope);\n}\n```\n\n## Best Practices\n\n1. **Default deny** - Require explicit permission grants\n2. **Centralize policies** - Single source of truth\n3. **Audit access** - Log authorization decisions\n4. **Fail closed** - Errors result in denial\n5. **Test policies** - Unit test authorization logic\n6. **Separate concerns** - Authentication vs authorization\n\n## Notes\n\n- RBAC is simpler for most applications\n- ABAC is more flexible for complex rules\n- Combine both for best results\n- Cache permission checks for performance"
              },
              {
                "name": "docker-backend-patterns",
                "description": "Docker containerization patterns for Node.js applications. Use when containerizing backend services.",
                "path": "tech-stacks/js/node/skills/docker-backend-patterns/SKILL.md",
                "frontmatter": {
                  "name": "docker-backend-patterns",
                  "description": "Docker containerization patterns for Node.js applications. Use when containerizing backend services."
                },
                "content": "# Docker Backend Patterns Skill\n\nThis skill covers Docker containerization best practices for Node.js applications.\n\n## When to Use\n\nUse this skill when:\n- Containerizing Node.js applications\n- Optimizing Docker image size\n- Implementing multi-stage builds\n- Deploying to container platforms\n\n## Core Principle\n\n**MINIMAL, SECURE, REPRODUCIBLE** - Small images, non-root users, deterministic builds.\n\n## Multi-Stage Dockerfile\n\n```dockerfile\n# Dockerfile\n# Stage 1: Dependencies\nFROM node:22-alpine AS deps\nRUN apk add --no-cache libc6-compat\nWORKDIR /app\n\nCOPY package.json package-lock.json ./\nRUN npm ci --only=production\n\n# Stage 2: Build\nFROM node:22-alpine AS build\nWORKDIR /app\n\nCOPY package.json package-lock.json ./\nRUN npm ci\n\nCOPY . .\nRUN npm run build\n\n# Stage 3: Production\nFROM node:22-alpine AS runner\nWORKDIR /app\n\nENV NODE_ENV=production\nENV PORT=3000\n\n# Security: Create non-root user\nRUN addgroup --system --gid 1001 nodejs\nRUN adduser --system --uid 1001 nodejs\n\n# Copy production dependencies\nCOPY --from=deps /app/node_modules ./node_modules\n\n# Copy built application\nCOPY --from=build /app/dist ./dist\nCOPY --from=build /app/package.json ./\n\n# Copy Prisma schema for migrations\nCOPY --from=build /app/prisma ./prisma\n\n# Generate Prisma client\nRUN npx prisma generate\n\n# Set ownership\nRUN chown -R nodejs:nodejs /app\n\nUSER nodejs\n\nEXPOSE 3000\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD wget --no-verbose --tries=1 --spider http://localhost:3000/health || exit 1\n\nCMD [\"node\", \"dist/index.js\"]\n```\n\n## .dockerignore\n\n```\n# .dockerignore\nnode_modules\nnpm-debug.log\n.git\n.gitignore\n.env\n.env.*\n!.env.example\ndist\ncoverage\n.nyc_output\n*.md\n!README.md\nDockerfile*\ndocker-compose*\n.dockerignore\n.eslintrc*\n.prettierrc*\n*.test.ts\n__tests__\ntests\n.vscode\n.idea\n*.log\n```\n\n## Development Dockerfile\n\n```dockerfile\n# Dockerfile.dev\nFROM node:22-alpine\n\nWORKDIR /app\n\nRUN apk add --no-cache libc6-compat\n\nCOPY package.json package-lock.json ./\nRUN npm ci\n\nCOPY . .\n\nEXPOSE 3000\n\nCMD [\"npm\", \"run\", \"dev\"]\n```\n\n## Docker Compose\n\n```yaml\n# docker-compose.yml\nversion: '3.8'\n\nservices:\n  api:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - \"3000:3000\"\n    environment:\n      - DATABASE_URL=postgresql://postgres:password@db:5432/app\n      - REDIS_URL=redis://redis:6379\n      - JWT_SECRET=${JWT_SECRET}\n      - NODE_ENV=production\n    depends_on:\n      db:\n        condition: service_healthy\n      redis:\n        condition: service_healthy\n    restart: unless-stopped\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"--spider\", \"http://localhost:3000/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n\n  db:\n    image: postgres:16-alpine\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: password\n      POSTGRES_DB: app\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  redis:\n    image: redis:7-alpine\n    command: redis-server --appendonly yes\n    volumes:\n      - redis_data:/data\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"ping\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  migration:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    command: npx prisma migrate deploy\n    environment:\n      - DATABASE_URL=postgresql://postgres:password@db:5432/app\n    depends_on:\n      db:\n        condition: service_healthy\n\nvolumes:\n  postgres_data:\n  redis_data:\n```\n\n## Development Compose\n\n```yaml\n# docker-compose.dev.yml\nversion: '3.8'\n\nservices:\n  api:\n    build:\n      context: .\n      dockerfile: Dockerfile.dev\n    ports:\n      - \"3000:3000\"\n    volumes:\n      - .:/app\n      - /app/node_modules\n    environment:\n      - DATABASE_URL=postgresql://postgres:password@db:5432/app\n      - NODE_ENV=development\n    depends_on:\n      - db\n\n  db:\n    image: postgres:16-alpine\n    ports:\n      - \"5432:5432\"\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: password\n      POSTGRES_DB: app\n    volumes:\n      - postgres_dev:/var/lib/postgresql/data\n\nvolumes:\n  postgres_dev:\n```\n\n## Build Arguments\n\n```dockerfile\n# Dockerfile with build args\nARG NODE_VERSION=22\nFROM node:${NODE_VERSION}-alpine AS base\n\nARG APP_VERSION\nENV APP_VERSION=${APP_VERSION}\n\n# ... rest of Dockerfile\n```\n\n```bash\n# Build with arguments\ndocker build \\\n  --build-arg NODE_VERSION=22 \\\n  --build-arg APP_VERSION=$(git rev-parse --short HEAD) \\\n  -t myapp:latest .\n```\n\n## Layer Caching Optimization\n\n```dockerfile\n# Optimize for layer caching\nFROM node:22-alpine AS deps\nWORKDIR /app\n\n# Copy only package files first (better caching)\nCOPY package.json package-lock.json ./\nRUN npm ci\n\n# Then copy source (invalidates less often)\nFROM deps AS build\nCOPY . .\nRUN npm run build\n```\n\n## Security Best Practices\n\n```dockerfile\n# Security-focused Dockerfile\nFROM node:22-alpine AS runner\nWORKDIR /app\n\n# Update packages for security patches\nRUN apk update && apk upgrade --no-cache\n\n# Create non-root user\nRUN addgroup --system --gid 1001 nodejs && \\\n    adduser --system --uid 1001 --ingroup nodejs nodejs\n\n# Set strict file permissions\nCOPY --chown=nodejs:nodejs --from=build /app/dist ./dist\nCOPY --chown=nodejs:nodejs --from=deps /app/node_modules ./node_modules\nCOPY --chown=nodejs:nodejs package.json ./\n\n# Remove unnecessary tools\nRUN apk del --purge apk-tools\n\n# Switch to non-root user\nUSER nodejs\n\n# Read-only filesystem (where possible)\n# Note: Some apps need writable /tmp\n```\n\n## Health Check Endpoint\n\n```typescript\n// src/routes/health.ts\nimport { FastifyPluginAsync } from 'fastify';\n\ninterface HealthStatus {\n  status: 'healthy' | 'unhealthy';\n  version: string;\n  uptime: number;\n  timestamp: string;\n  checks: {\n    database: HealthCheck;\n    redis: HealthCheck;\n  };\n}\n\ninterface HealthCheck {\n  status: 'up' | 'down';\n  latency?: number;\n}\n\nconst healthRoutes: FastifyPluginAsync = async (fastify) => {\n  fastify.get<{ Reply: HealthStatus }>('/health', async (request, reply) => {\n    const checks = {\n      database: await checkDatabase(fastify),\n      redis: await checkRedis(fastify),\n    };\n\n    const isHealthy = Object.values(checks).every((c) => c.status === 'up');\n\n    const response: HealthStatus = {\n      status: isHealthy ? 'healthy' : 'unhealthy',\n      version: process.env.APP_VERSION ?? 'unknown',\n      uptime: process.uptime(),\n      timestamp: new Date().toISOString(),\n      checks,\n    };\n\n    return reply.status(isHealthy ? 200 : 503).send(response);\n  });\n\n  // Liveness probe (basic check)\n  fastify.get('/health/live', async () => {\n    return { status: 'ok' };\n  });\n\n  // Readiness probe (full check)\n  fastify.get('/health/ready', async (request, reply) => {\n    const dbOk = (await checkDatabase(fastify)).status === 'up';\n    if (!dbOk) {\n      return reply.status(503).send({ status: 'not ready' });\n    }\n    return { status: 'ready' };\n  });\n};\n\nasync function checkDatabase(fastify: FastifyInstance): Promise<HealthCheck> {\n  const start = Date.now();\n  try {\n    await fastify.db.$queryRaw`SELECT 1`;\n    return { status: 'up', latency: Date.now() - start };\n  } catch {\n    return { status: 'down' };\n  }\n}\n\nasync function checkRedis(fastify: FastifyInstance): Promise<HealthCheck> {\n  const start = Date.now();\n  try {\n    await fastify.redis.ping();\n    return { status: 'up', latency: Date.now() - start };\n  } catch {\n    return { status: 'down' };\n  }\n}\n\nexport default healthRoutes;\n```\n\n## Graceful Shutdown\n\n```typescript\n// src/index.ts\nconst signals: NodeJS.Signals[] = ['SIGTERM', 'SIGINT'];\n\nfor (const signal of signals) {\n  process.on(signal, async () => {\n    app.log.info(`Received ${signal}, shutting down gracefully...`);\n\n    // Stop accepting new connections\n    await app.close();\n\n    // Close database connections\n    await prisma.$disconnect();\n\n    app.log.info('Graceful shutdown complete');\n    process.exit(0);\n  });\n}\n```\n\n## Docker Commands\n\n```bash\n# Build image\ndocker build -t myapp:latest .\n\n# Build with no cache\ndocker build --no-cache -t myapp:latest .\n\n# Run container\ndocker run -d --name myapp -p 3000:3000 --env-file .env myapp:latest\n\n# View logs\ndocker logs -f myapp\n\n# Execute command in container\ndocker exec -it myapp sh\n\n# Check image size\ndocker images myapp:latest\n\n# Scan for vulnerabilities\ndocker scout cves myapp:latest\n\n# Push to registry\ndocker push registry.example.com/myapp:latest\n```\n\n## CI/CD Build\n\n```yaml\n# .github/workflows/docker.yml\nname: Build and Push Docker Image\n\non:\n  push:\n    branches: [main]\n    tags: ['v*']\n\nenv:\n  REGISTRY: ghcr.io\n  IMAGE_NAME: ${{ github.repository }}\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: read\n      packages: write\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Set up Docker Buildx\n        uses: docker/setup-buildx-action@v3\n\n      - name: Log in to Container Registry\n        uses: docker/login-action@v3\n        with:\n          registry: ${{ env.REGISTRY }}\n          username: ${{ github.actor }}\n          password: ${{ secrets.GITHUB_TOKEN }}\n\n      - name: Extract metadata\n        id: meta\n        uses: docker/metadata-action@v5\n        with:\n          images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}\n          tags: |\n            type=sha,prefix=\n            type=ref,event=branch\n            type=semver,pattern={{version}}\n\n      - name: Build and push\n        uses: docker/build-push-action@v5\n        with:\n          context: .\n          push: true\n          tags: ${{ steps.meta.outputs.tags }}\n          labels: ${{ steps.meta.outputs.labels }}\n          cache-from: type=gha\n          cache-to: type=gha,mode=max\n```\n\n## Best Practices\n\n1. **Multi-stage builds** - Separate build from runtime\n2. **Non-root user** - Never run as root\n3. **Health checks** - Enable container orchestration\n4. **Minimal base image** - Use Alpine when possible\n5. **Layer caching** - Order Dockerfile for cache efficiency\n6. **Graceful shutdown** - Handle SIGTERM properly\n\n## Notes\n\n- Alpine images are smaller but use musl libc\n- Some npm packages need `libc6-compat`\n- Use `.dockerignore` to reduce context size\n- Tag images with git SHA for traceability"
              },
              {
                "name": "drizzle-setup",
                "description": "Drizzle ORM configuration and patterns. Use as a lightweight alternative to Prisma.",
                "path": "tech-stacks/js/node/skills/drizzle-setup/SKILL.md",
                "frontmatter": {
                  "name": "drizzle-setup",
                  "description": "Drizzle ORM configuration and patterns. Use as a lightweight alternative to Prisma."
                },
                "content": "# Drizzle ORM Setup Skill\n\nThis skill covers Drizzle ORM setup and patterns for Node.js applications.\n\n## When to Use\n\nUse this skill when:\n- Preferring SQL-first approach\n- Need lightweight ORM\n- Want full SQL control\n- Building high-performance APIs\n\n## Core Principle\n\n**SQL-FIRST, TYPE-SAFE** - Drizzle generates TypeScript types from SQL schemas. Full SQL control with type safety.\n\n## Installation\n\n```bash\nnpm install drizzle-orm postgres\nnpm install -D drizzle-kit\n```\n\n## Schema Definition\n\n```typescript\n// src/db/schema.ts\nimport {\n  pgTable,\n  text,\n  timestamp,\n  boolean,\n  pgEnum,\n  index,\n  uniqueIndex,\n} from 'drizzle-orm/pg-core';\nimport { relations } from 'drizzle-orm';\nimport { createId } from '@paralleldrive/cuid2';\n\n// Enums\nexport const roleEnum = pgEnum('role', ['USER', 'MODERATOR', 'ADMIN']);\n\n// Users table\nexport const users = pgTable('users', {\n  id: text('id').primaryKey().$defaultFn(() => createId()),\n  email: text('email').notNull().unique(),\n  name: text('name').notNull(),\n  password: text('password').notNull(),\n  role: roleEnum('role').default('USER').notNull(),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n}, (table) => ({\n  emailIdx: uniqueIndex('users_email_idx').on(table.email),\n  roleIdx: index('users_role_idx').on(table.role),\n}));\n\n// Profiles table\nexport const profiles = pgTable('profiles', {\n  id: text('id').primaryKey().$defaultFn(() => createId()),\n  bio: text('bio'),\n  avatar: text('avatar'),\n  userId: text('user_id').notNull().references(() => users.id, { onDelete: 'cascade' }).unique(),\n});\n\n// Posts table\nexport const posts = pgTable('posts', {\n  id: text('id').primaryKey().$defaultFn(() => createId()),\n  title: text('title').notNull(),\n  slug: text('slug').notNull().unique(),\n  content: text('content'),\n  published: boolean('published').default(false).notNull(),\n  authorId: text('author_id').notNull().references(() => users.id, { onDelete: 'cascade' }),\n  createdAt: timestamp('created_at').defaultNow().notNull(),\n  updatedAt: timestamp('updated_at').defaultNow().notNull(),\n}, (table) => ({\n  slugIdx: uniqueIndex('posts_slug_idx').on(table.slug),\n  authorIdx: index('posts_author_idx').on(table.authorId),\n  publishedIdx: index('posts_published_idx').on(table.published, table.createdAt),\n}));\n\n// Tags table\nexport const tags = pgTable('tags', {\n  id: text('id').primaryKey().$defaultFn(() => createId()),\n  name: text('name').notNull().unique(),\n});\n\n// Posts to Tags junction table\nexport const postsToTags = pgTable('posts_to_tags', {\n  postId: text('post_id').notNull().references(() => posts.id, { onDelete: 'cascade' }),\n  tagId: text('tag_id').notNull().references(() => tags.id, { onDelete: 'cascade' }),\n}, (table) => ({\n  pk: index('posts_to_tags_pk').on(table.postId, table.tagId),\n}));\n\n// Relations\nexport const usersRelations = relations(users, ({ one, many }) => ({\n  profile: one(profiles, {\n    fields: [users.id],\n    references: [profiles.userId],\n  }),\n  posts: many(posts),\n}));\n\nexport const profilesRelations = relations(profiles, ({ one }) => ({\n  user: one(users, {\n    fields: [profiles.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const postsRelations = relations(posts, ({ one, many }) => ({\n  author: one(users, {\n    fields: [posts.authorId],\n    references: [users.id],\n  }),\n  tags: many(postsToTags),\n}));\n\nexport const tagsRelations = relations(tags, ({ many }) => ({\n  posts: many(postsToTags),\n}));\n\nexport const postsToTagsRelations = relations(postsToTags, ({ one }) => ({\n  post: one(posts, {\n    fields: [postsToTags.postId],\n    references: [posts.id],\n  }),\n  tag: one(tags, {\n    fields: [postsToTags.tagId],\n    references: [tags.id],\n  }),\n}));\n```\n\n## Client Setup\n\n```typescript\n// src/db/index.ts\nimport { drizzle } from 'drizzle-orm/postgres-js';\nimport postgres from 'postgres';\nimport * as schema from './schema';\n\nconst connectionString = process.env.DATABASE_URL!;\n\n// For query purposes\nconst queryClient = postgres(connectionString);\nexport const db = drizzle(queryClient, { schema });\n\n// For migrations\nexport const migrationClient = postgres(connectionString, { max: 1 });\n```\n\n### Fastify Plugin\n\n```typescript\n// src/plugins/database.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport fp from 'fastify-plugin';\nimport { drizzle } from 'drizzle-orm/postgres-js';\nimport postgres from 'postgres';\nimport * as schema from '../db/schema';\n\ntype DB = ReturnType<typeof drizzle<typeof schema>>;\n\ndeclare module 'fastify' {\n  interface FastifyInstance {\n    db: DB;\n  }\n}\n\nconst databasePlugin: FastifyPluginAsync = async (fastify) => {\n  const client = postgres(process.env.DATABASE_URL!);\n  const db = drizzle(client, { schema });\n\n  fastify.decorate('db', db);\n\n  fastify.addHook('onClose', async () => {\n    await client.end();\n  });\n};\n\nexport default fp(databasePlugin, { name: 'database' });\n```\n\n## Query Patterns\n\n### Basic CRUD\n\n```typescript\nimport { eq, desc, and, or, like, sql } from 'drizzle-orm';\nimport { db } from './db';\nimport { users, posts, tags } from './db/schema';\n\n// Create\nconst [user] = await db.insert(users).values({\n  email: 'user@example.com',\n  name: 'User',\n  password: hashedPassword,\n}).returning();\n\n// Read single\nconst user = await db.query.users.findFirst({\n  where: eq(users.id, userId),\n});\n\n// Read many\nconst allUsers = await db.query.users.findMany({\n  where: eq(users.role, 'USER'),\n  orderBy: desc(users.createdAt),\n  limit: 10,\n});\n\n// Update\nconst [updated] = await db.update(users)\n  .set({ name: 'New Name', updatedAt: new Date() })\n  .where(eq(users.id, userId))\n  .returning();\n\n// Delete\nawait db.delete(users).where(eq(users.id, userId));\n```\n\n### Relations\n\n```typescript\n// Query with relations\nconst userWithPosts = await db.query.users.findFirst({\n  where: eq(users.id, userId),\n  with: {\n    profile: true,\n    posts: {\n      where: eq(posts.published, true),\n      limit: 10,\n      orderBy: desc(posts.createdAt),\n      with: {\n        tags: {\n          with: {\n            tag: true,\n          },\n        },\n      },\n    },\n  },\n});\n\n// Select specific columns\nconst userNames = await db.select({\n  id: users.id,\n  name: users.name,\n}).from(users);\n```\n\n### Complex Queries\n\n```typescript\n// Joins\nconst postsWithAuthors = await db\n  .select({\n    post: posts,\n    author: {\n      id: users.id,\n      name: users.name,\n    },\n  })\n  .from(posts)\n  .innerJoin(users, eq(posts.authorId, users.id))\n  .where(eq(posts.published, true))\n  .orderBy(desc(posts.createdAt));\n\n// Aggregations\nconst postCounts = await db\n  .select({\n    authorId: posts.authorId,\n    count: sql<number>`count(*)::int`,\n  })\n  .from(posts)\n  .groupBy(posts.authorId);\n\n// Subqueries\nconst usersWithPostCount = await db\n  .select({\n    user: users,\n    postCount: sql<number>`(\n      SELECT count(*) FROM ${posts}\n      WHERE ${posts.authorId} = ${users.id}\n    )::int`,\n  })\n  .from(users);\n```\n\n### Transactions\n\n```typescript\nconst result = await db.transaction(async (tx) => {\n  const [user] = await tx.insert(users).values({\n    email: 'user@example.com',\n    name: 'User',\n    password: hashedPassword,\n  }).returning();\n\n  const [profile] = await tx.insert(profiles).values({\n    userId: user.id,\n    bio: 'New user',\n  }).returning();\n\n  return { user, profile };\n});\n```\n\n## Drizzle Config\n\n```typescript\n// drizzle.config.ts\nimport type { Config } from 'drizzle-kit';\n\nexport default {\n  schema: './src/db/schema.ts',\n  out: './drizzle',\n  driver: 'pg',\n  dbCredentials: {\n    connectionString: process.env.DATABASE_URL!,\n  },\n} satisfies Config;\n```\n\n## Migration Commands\n\n```bash\n# Generate migration\nnpx drizzle-kit generate:pg\n\n# Apply migrations\nnpx drizzle-kit push:pg\n\n# View migrations\nnpx drizzle-kit studio\n```\n\n### Migration Script\n\n```typescript\n// src/db/migrate.ts\nimport { migrate } from 'drizzle-orm/postgres-js/migrator';\nimport { drizzle } from 'drizzle-orm/postgres-js';\nimport postgres from 'postgres';\n\nconst connectionString = process.env.DATABASE_URL!;\nconst sql = postgres(connectionString, { max: 1 });\nconst db = drizzle(sql);\n\nasync function main(): Promise<void> {\n  console.log('Running migrations...');\n  await migrate(db, { migrationsFolder: './drizzle' });\n  console.log('Migrations complete');\n  await sql.end();\n}\n\nmain().catch((e) => {\n  console.error(e);\n  process.exit(1);\n});\n```\n\n## Type Inference\n\n```typescript\n// Infer types from schema\nimport { InferSelectModel, InferInsertModel } from 'drizzle-orm';\nimport { users, posts } from './db/schema';\n\nexport type User = InferSelectModel<typeof users>;\nexport type NewUser = InferInsertModel<typeof users>;\n\nexport type Post = InferSelectModel<typeof posts>;\nexport type NewPost = InferInsertModel<typeof posts>;\n```\n\n## Package.json Scripts\n\n```json\n{\n  \"scripts\": {\n    \"db:generate\": \"drizzle-kit generate:pg\",\n    \"db:migrate\": \"tsx src/db/migrate.ts\",\n    \"db:push\": \"drizzle-kit push:pg\",\n    \"db:studio\": \"drizzle-kit studio\"\n  }\n}\n```\n\n## Best Practices\n\n1. **Use relations** - Define relations for type-safe joins\n2. **Type inference** - Use InferSelectModel/InferInsertModel\n3. **Prepared statements** - Use db.query for better performance\n4. **Transactions** - Use for related operations\n5. **Indexes** - Define indexes in schema\n\n## Notes\n\n- Drizzle is SQL-first - full control over queries\n- Smaller bundle size than Prisma\n- No code generation step required\n- Excellent TypeScript inference"
              },
              {
                "name": "e2e-testing-backend",
                "description": "End-to-end testing patterns for backend services. Use when testing complete application flows.",
                "path": "tech-stacks/js/node/skills/e2e-testing-backend/SKILL.md",
                "frontmatter": {
                  "name": "e2e-testing-backend",
                  "description": "End-to-end testing patterns for backend services. Use when testing complete application flows."
                },
                "content": "# E2E Testing Backend Skill\n\nThis skill covers end-to-end testing patterns for Node.js backend services.\n\n## When to Use\n\nUse this skill when:\n- Testing complete user flows\n- Verifying multi-service integration\n- Testing deployment readiness\n- Validating production-like scenarios\n\n## Core Principle\n\n**TEST LIKE A USER** - E2E tests verify the system works as users expect. Test complete flows, not individual parts.\n\n## Setup\n\n```typescript\n// tests/e2e/setup.ts\nimport { execSync, spawn, ChildProcess } from 'child_process';\n\nlet serverProcess: ChildProcess | null = null;\n\nexport async function startServer(): Promise<void> {\n  // Build the application\n  execSync('npm run build', { stdio: 'inherit' });\n\n  // Start the server\n  serverProcess = spawn('node', ['dist/index.js'], {\n    env: {\n      ...process.env,\n      NODE_ENV: 'test',\n      PORT: '3001',\n    },\n    stdio: 'pipe',\n  });\n\n  // Wait for server to be ready\n  await waitForServer('http://localhost:3001/health', 30000);\n}\n\nexport async function stopServer(): Promise<void> {\n  if (serverProcess) {\n    serverProcess.kill();\n    serverProcess = null;\n  }\n}\n\nasync function waitForServer(url: string, timeout: number): Promise<void> {\n  const startTime = Date.now();\n\n  while (Date.now() - startTime < timeout) {\n    try {\n      const response = await fetch(url);\n      if (response.ok) return;\n    } catch {\n      // Server not ready yet\n    }\n    await new Promise((resolve) => setTimeout(resolve, 500));\n  }\n\n  throw new Error(`Server did not start within ${timeout}ms`);\n}\n```\n\n## Vitest Configuration\n\n```typescript\n// vitest.e2e.config.ts\nimport { defineConfig } from 'vitest/config';\n\nexport default defineConfig({\n  test: {\n    include: ['tests/e2e/**/*.e2e.test.ts'],\n    testTimeout: 60000,\n    hookTimeout: 30000,\n    globalSetup: './tests/e2e/global-setup.ts',\n    setupFiles: ['./tests/e2e/setup-file.ts'],\n    pool: 'forks',\n    poolOptions: {\n      forks: {\n        singleFork: true,\n      },\n    },\n  },\n});\n```\n\n## Global Setup\n\n```typescript\n// tests/e2e/global-setup.ts\nimport { execSync } from 'child_process';\n\nexport async function setup(): Promise<void> {\n  console.log('Setting up E2E environment...');\n\n  // Start required services\n  execSync('docker-compose -f docker-compose.test.yml up -d', {\n    stdio: 'inherit',\n  });\n\n  // Wait for services to be ready\n  await waitForPostgres();\n  await waitForRedis();\n\n  // Run migrations\n  execSync('npx prisma migrate deploy', { stdio: 'inherit' });\n\n  // Seed test data\n  execSync('npx prisma db seed', { stdio: 'inherit' });\n\n  console.log('E2E environment ready');\n}\n\nexport async function teardown(): Promise<void> {\n  console.log('Tearing down E2E environment...');\n  execSync('docker-compose -f docker-compose.test.yml down', {\n    stdio: 'inherit',\n  });\n}\n\nasync function waitForPostgres(): Promise<void> {\n  const maxAttempts = 30;\n  for (let i = 0; i < maxAttempts; i++) {\n    try {\n      execSync('docker-compose -f docker-compose.test.yml exec -T db pg_isready', {\n        stdio: 'pipe',\n      });\n      return;\n    } catch {\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n    }\n  }\n  throw new Error('PostgreSQL did not start');\n}\n\nasync function waitForRedis(): Promise<void> {\n  const maxAttempts = 30;\n  for (let i = 0; i < maxAttempts; i++) {\n    try {\n      execSync('docker-compose -f docker-compose.test.yml exec -T redis redis-cli ping', {\n        stdio: 'pipe',\n      });\n      return;\n    } catch {\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n    }\n  }\n  throw new Error('Redis did not start');\n}\n```\n\n## Docker Compose for Tests\n\n```yaml\n# docker-compose.test.yml\nversion: '3.8'\n\nservices:\n  db:\n    image: postgres:16-alpine\n    environment:\n      POSTGRES_USER: test\n      POSTGRES_PASSWORD: test\n      POSTGRES_DB: testdb\n    ports:\n      - \"5433:5432\"\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U test\"]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n\n  redis:\n    image: redis:7-alpine\n    ports:\n      - \"6380:6379\"\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"ping\"]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n\n  api:\n    build: .\n    environment:\n      NODE_ENV: test\n      DATABASE_URL: postgresql://test:test@db:5432/testdb\n      REDIS_URL: redis://redis:6379\n      PORT: 3000\n    ports:\n      - \"3001:3000\"\n    depends_on:\n      db:\n        condition: service_healthy\n      redis:\n        condition: service_healthy\n```\n\n## Complete Flow Test\n\n```typescript\n// tests/e2e/auth-flow.e2e.test.ts\nimport { describe, it, expect, beforeAll, afterAll } from 'vitest';\n\nconst API_URL = process.env.API_URL ?? 'http://localhost:3001';\n\ndescribe('Authentication Flow E2E', () => {\n  const testUser = {\n    email: `e2e-${Date.now()}@example.com`,\n    password: 'Password123!',\n    name: 'E2E Test User',\n  };\n\n  let accessToken: string;\n  let refreshToken: string;\n  let userId: string;\n\n  it('registers a new user', async () => {\n    const response = await fetch(`${API_URL}/api/auth/register`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(testUser),\n    });\n\n    expect(response.status).toBe(201);\n\n    const data = await response.json();\n    expect(data.user.email).toBe(testUser.email);\n    expect(data.accessToken).toBeDefined();\n    expect(data.refreshToken).toBeDefined();\n\n    accessToken = data.accessToken;\n    refreshToken = data.refreshToken;\n    userId = data.user.id;\n  });\n\n  it('logs in with registered credentials', async () => {\n    const response = await fetch(`${API_URL}/api/auth/login`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        email: testUser.email,\n        password: testUser.password,\n      }),\n    });\n\n    expect(response.status).toBe(200);\n\n    const data = await response.json();\n    expect(data.accessToken).toBeDefined();\n    accessToken = data.accessToken;\n  });\n\n  it('accesses protected resource with token', async () => {\n    const response = await fetch(`${API_URL}/api/users/me`, {\n      headers: { Authorization: `Bearer ${accessToken}` },\n    });\n\n    expect(response.status).toBe(200);\n\n    const data = await response.json();\n    expect(data.email).toBe(testUser.email);\n    expect(data.name).toBe(testUser.name);\n  });\n\n  it('refreshes access token', async () => {\n    const response = await fetch(`${API_URL}/api/auth/refresh`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ refreshToken }),\n    });\n\n    expect(response.status).toBe(200);\n\n    const data = await response.json();\n    expect(data.accessToken).toBeDefined();\n    expect(data.accessToken).not.toBe(accessToken);\n  });\n\n  it('logs out successfully', async () => {\n    const response = await fetch(`${API_URL}/api/auth/logout`, {\n      method: 'POST',\n      headers: { Authorization: `Bearer ${accessToken}` },\n    });\n\n    expect(response.status).toBe(200);\n  });\n\n  it('rejects requests after logout', async () => {\n    const response = await fetch(`${API_URL}/api/auth/refresh`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ refreshToken }),\n    });\n\n    expect(response.status).toBe(401);\n  });\n});\n```\n\n## CRUD Flow Test\n\n```typescript\n// tests/e2e/posts-crud.e2e.test.ts\nimport { describe, it, expect, beforeAll } from 'vitest';\n\nconst API_URL = process.env.API_URL ?? 'http://localhost:3001';\n\ndescribe('Posts CRUD Flow E2E', () => {\n  let authToken: string;\n  let postId: string;\n\n  beforeAll(async () => {\n    // Login to get auth token\n    const response = await fetch(`${API_URL}/api/auth/login`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        email: 'e2e-user@example.com',\n        password: 'Password123!',\n      }),\n    });\n    const data = await response.json();\n    authToken = data.accessToken;\n  });\n\n  it('creates a post', async () => {\n    const response = await fetch(`${API_URL}/api/posts`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${authToken}`,\n      },\n      body: JSON.stringify({\n        title: 'E2E Test Post',\n        content: 'This is an E2E test post',\n        published: false,\n      }),\n    });\n\n    expect(response.status).toBe(201);\n\n    const data = await response.json();\n    expect(data.title).toBe('E2E Test Post');\n    postId = data.id;\n  });\n\n  it('retrieves the created post', async () => {\n    const response = await fetch(`${API_URL}/api/posts/${postId}`, {\n      headers: { Authorization: `Bearer ${authToken}` },\n    });\n\n    expect(response.status).toBe(200);\n\n    const data = await response.json();\n    expect(data.title).toBe('E2E Test Post');\n    expect(data.published).toBe(false);\n  });\n\n  it('updates the post', async () => {\n    const response = await fetch(`${API_URL}/api/posts/${postId}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${authToken}`,\n      },\n      body: JSON.stringify({\n        title: 'Updated E2E Test Post',\n        published: true,\n      }),\n    });\n\n    expect(response.status).toBe(200);\n\n    const data = await response.json();\n    expect(data.title).toBe('Updated E2E Test Post');\n    expect(data.published).toBe(true);\n  });\n\n  it('lists posts including the new one', async () => {\n    const response = await fetch(`${API_URL}/api/posts?published=true`, {\n      headers: { Authorization: `Bearer ${authToken}` },\n    });\n\n    expect(response.status).toBe(200);\n\n    const data = await response.json();\n    const post = data.data.find((p: { id: string }) => p.id === postId);\n    expect(post).toBeDefined();\n    expect(post.title).toBe('Updated E2E Test Post');\n  });\n\n  it('deletes the post', async () => {\n    const response = await fetch(`${API_URL}/api/posts/${postId}`, {\n      method: 'DELETE',\n      headers: { Authorization: `Bearer ${authToken}` },\n    });\n\n    expect(response.status).toBe(204);\n  });\n\n  it('returns 404 for deleted post', async () => {\n    const response = await fetch(`${API_URL}/api/posts/${postId}`, {\n      headers: { Authorization: `Bearer ${authToken}` },\n    });\n\n    expect(response.status).toBe(404);\n  });\n});\n```\n\n## API Client Helper\n\n```typescript\n// tests/e2e/helpers/api-client.ts\nconst API_URL = process.env.API_URL ?? 'http://localhost:3001';\n\ninterface RequestOptions {\n  method?: string;\n  body?: unknown;\n  headers?: Record<string, string>;\n  token?: string;\n}\n\nexport async function apiRequest(\n  path: string,\n  options: RequestOptions = {}\n): Promise<Response> {\n  const { method = 'GET', body, headers = {}, token } = options;\n\n  const requestHeaders: Record<string, string> = {\n    'Content-Type': 'application/json',\n    ...headers,\n  };\n\n  if (token) {\n    requestHeaders['Authorization'] = `Bearer ${token}`;\n  }\n\n  return fetch(`${API_URL}${path}`, {\n    method,\n    headers: requestHeaders,\n    body: body ? JSON.stringify(body) : undefined,\n  });\n}\n\nexport async function login(\n  email: string,\n  password: string\n): Promise<{ accessToken: string; refreshToken: string }> {\n  const response = await apiRequest('/api/auth/login', {\n    method: 'POST',\n    body: { email, password },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Login failed: ${response.status}`);\n  }\n\n  return response.json();\n}\n```\n\n## Running E2E Tests\n\n```bash\n# Start services and run tests\nnpm run test:e2e\n\n# Run against existing services\nAPI_URL=http://localhost:3000 npm run test:e2e\n\n# Run specific test file\nnpm run test:e2e -- auth-flow.e2e.test.ts\n```\n\n## Package.json Scripts\n\n```json\n{\n  \"scripts\": {\n    \"test:e2e\": \"docker-compose -f docker-compose.test.yml up -d && vitest run --config vitest.e2e.config.ts; docker-compose -f docker-compose.test.yml down\",\n    \"test:e2e:watch\": \"docker-compose -f docker-compose.test.yml up -d && vitest --config vitest.e2e.config.ts\"\n  }\n}\n```\n\n## Best Practices\n\n1. **Test complete flows** - Registration to logout\n2. **Isolate test data** - Use unique identifiers\n3. **Clean up after tests** - Delete created resources\n4. **Use real services** - No mocking in E2E\n5. **Test error scenarios** - Invalid data, auth failures\n6. **Parallel-safe** - Tests should not interfere\n\n## Notes\n\n- E2E tests are slowest - run sparingly\n- Use in CI/CD before deployment\n- Test against staging environment\n- Monitor test flakiness"
              },
              {
                "name": "fastify-patterns",
                "description": "Fastify framework patterns including routing, plugins, and decorators. Use when building Fastify APIs.",
                "path": "tech-stacks/js/node/skills/fastify-patterns/SKILL.md",
                "frontmatter": {
                  "name": "fastify-patterns",
                  "description": "Fastify framework patterns including routing, plugins, and decorators. Use when building Fastify APIs."
                },
                "content": "# Fastify Patterns Skill\n\nThis skill covers Fastify 5.x patterns for building high-performance Node.js APIs.\n\n## When to Use\n\nUse this skill when:\n- Building REST APIs with Fastify\n- Creating reusable plugins\n- Implementing schema-based validation\n- Designing middleware patterns\n\n## Core Principle\n\n**SCHEMA-FIRST DEVELOPMENT** - Define schemas before implementation. Fastify uses schemas for validation and serialization.\n\n## Project Setup\n\n### Installation\n\n```bash\nnpm install fastify @fastify/cors @fastify/jwt @fastify/swagger\nnpm install -D @types/node\n```\n\n### Basic Application\n\n```typescript\n// src/app.ts\nimport Fastify, { FastifyInstance } from 'fastify';\nimport cors from '@fastify/cors';\n\nexport async function buildApp(): Promise<FastifyInstance> {\n  const app = Fastify({\n    logger: {\n      level: process.env.LOG_LEVEL ?? 'info',\n      transport: process.env.NODE_ENV === 'development'\n        ? { target: 'pino-pretty' }\n        : undefined,\n    },\n  });\n\n  // Register plugins\n  await app.register(cors, {\n    origin: process.env.CORS_ORIGIN ?? true,\n  });\n\n  // Register routes\n  await app.register(import('./routes'));\n\n  return app;\n}\n```\n\n```typescript\n// src/index.ts\nimport { buildApp } from './app';\n\nconst start = async (): Promise<void> => {\n  const app = await buildApp();\n\n  try {\n    const port = parseInt(process.env.PORT ?? '3000', 10);\n    await app.listen({ port, host: '0.0.0.0' });\n  } catch (err) {\n    app.log.error(err);\n    process.exit(1);\n  }\n};\n\nstart();\n```\n\n## Route Patterns\n\n### Basic Routes\n\n```typescript\n// src/routes/index.ts\nimport { FastifyPluginAsync } from 'fastify';\n\nconst routes: FastifyPluginAsync = async (fastify) => {\n  await fastify.register(import('./health'));\n  await fastify.register(import('./users'), { prefix: '/api/users' });\n  await fastify.register(import('./posts'), { prefix: '/api/posts' });\n};\n\nexport default routes;\n```\n\n### Schema-Based Route\n\n```typescript\n// src/routes/users.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport { z } from 'zod';\nimport { zodToJsonSchema } from 'zod-to-json-schema';\n\nconst CreateUserSchema = z.object({\n  email: z.string().email(),\n  name: z.string().min(1).max(100),\n});\n\nconst UserResponseSchema = z.object({\n  id: z.string(),\n  email: z.string(),\n  name: z.string(),\n  createdAt: z.string(),\n});\n\ntype CreateUserInput = z.infer<typeof CreateUserSchema>;\ntype UserResponse = z.infer<typeof UserResponseSchema>;\n\nconst usersRoutes: FastifyPluginAsync = async (fastify) => {\n  // GET /api/users\n  fastify.get<{ Reply: UserResponse[] }>('/', {\n    schema: {\n      response: {\n        200: zodToJsonSchema(z.array(UserResponseSchema)),\n      },\n    },\n  }, async () => {\n    return fastify.db.user.findMany();\n  });\n\n  // POST /api/users\n  fastify.post<{ Body: CreateUserInput; Reply: UserResponse }>('/', {\n    schema: {\n      body: zodToJsonSchema(CreateUserSchema),\n      response: {\n        201: zodToJsonSchema(UserResponseSchema),\n      },\n    },\n  }, async (request, reply) => {\n    const user = await fastify.db.user.create({\n      data: request.body,\n    });\n    return reply.status(201).send(user);\n  });\n\n  // GET /api/users/:id\n  fastify.get<{ Params: { id: string }; Reply: UserResponse }>('/:id', {\n    schema: {\n      params: zodToJsonSchema(z.object({ id: z.string() })),\n    },\n  }, async (request, reply) => {\n    const user = await fastify.db.user.findUnique({\n      where: { id: request.params.id },\n    });\n\n    if (!user) {\n      return reply.status(404).send({ error: 'User not found' });\n    }\n\n    return user;\n  });\n};\n\nexport default usersRoutes;\n```\n\n## Plugin Patterns\n\n### Database Plugin\n\n```typescript\n// src/plugins/database.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport fp from 'fastify-plugin';\nimport { PrismaClient } from '@prisma/client';\n\ndeclare module 'fastify' {\n  interface FastifyInstance {\n    db: PrismaClient;\n  }\n}\n\nconst databasePlugin: FastifyPluginAsync = async (fastify) => {\n  const prisma = new PrismaClient({\n    log: ['query', 'info', 'warn', 'error'],\n  });\n\n  await prisma.$connect();\n\n  fastify.decorate('db', prisma);\n\n  fastify.addHook('onClose', async () => {\n    await prisma.$disconnect();\n  });\n};\n\nexport default fp(databasePlugin, {\n  name: 'database',\n});\n```\n\n### Authentication Plugin\n\n```typescript\n// src/plugins/auth.ts\nimport { FastifyPluginAsync, FastifyRequest } from 'fastify';\nimport fp from 'fastify-plugin';\nimport jwt from '@fastify/jwt';\n\ndeclare module 'fastify' {\n  interface FastifyInstance {\n    authenticate: (request: FastifyRequest) => Promise<void>;\n  }\n}\n\ndeclare module '@fastify/jwt' {\n  interface FastifyJWT {\n    payload: { userId: string; role: string };\n    user: { userId: string; role: string };\n  }\n}\n\nconst authPlugin: FastifyPluginAsync = async (fastify) => {\n  await fastify.register(jwt, {\n    secret: process.env.JWT_SECRET ?? 'your-secret-key',\n  });\n\n  fastify.decorate('authenticate', async (request: FastifyRequest) => {\n    await request.jwtVerify();\n  });\n};\n\nexport default fp(authPlugin, {\n  name: 'auth',\n});\n```\n\n## Hook Patterns\n\n### Request Lifecycle Hooks\n\n```typescript\n// src/hooks/logging.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport fp from 'fastify-plugin';\n\nconst loggingHooks: FastifyPluginAsync = async (fastify) => {\n  fastify.addHook('onRequest', async (request) => {\n    request.log.info({\n      method: request.method,\n      url: request.url\n    }, 'incoming request');\n  });\n\n  fastify.addHook('onResponse', async (request, reply) => {\n    request.log.info({\n      method: request.method,\n      url: request.url,\n      statusCode: reply.statusCode,\n      responseTime: reply.elapsedTime,\n    }, 'request completed');\n  });\n\n  fastify.addHook('onError', async (request, reply, error) => {\n    request.log.error({\n      method: request.method,\n      url: request.url,\n      error: error.message,\n    }, 'request error');\n  });\n};\n\nexport default fp(loggingHooks);\n```\n\n## Error Handling\n\n### Global Error Handler\n\n```typescript\n// src/plugins/error-handler.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport fp from 'fastify-plugin';\nimport { ZodError } from 'zod';\n\ninterface ErrorResponse {\n  error: string;\n  code: string;\n  statusCode: number;\n  details?: unknown;\n}\n\nconst errorHandler: FastifyPluginAsync = async (fastify) => {\n  fastify.setErrorHandler((error, request, reply) => {\n    request.log.error(error);\n\n    // Zod validation errors\n    if (error instanceof ZodError) {\n      const response: ErrorResponse = {\n        error: 'Validation failed',\n        code: 'VALIDATION_ERROR',\n        statusCode: 400,\n        details: error.errors,\n      };\n      return reply.status(400).send(response);\n    }\n\n    // Fastify validation errors\n    if (error.validation) {\n      const response: ErrorResponse = {\n        error: 'Validation failed',\n        code: 'VALIDATION_ERROR',\n        statusCode: 400,\n        details: error.validation,\n      };\n      return reply.status(400).send(response);\n    }\n\n    // Default error response\n    const statusCode = error.statusCode ?? 500;\n    const response: ErrorResponse = {\n      error: statusCode >= 500 ? 'Internal Server Error' : error.message,\n      code: error.code ?? 'INTERNAL_ERROR',\n      statusCode,\n    };\n\n    return reply.status(statusCode).send(response);\n  });\n};\n\nexport default fp(errorHandler);\n```\n\n## Testing Patterns\n\n### Route Testing\n\n```typescript\n// src/routes/__tests__/users.test.ts\nimport { describe, it, expect, beforeAll, afterAll } from 'vitest';\nimport { FastifyInstance } from 'fastify';\nimport { buildApp } from '../../app';\n\ndescribe('Users routes', () => {\n  let app: FastifyInstance;\n\n  beforeAll(async () => {\n    app = await buildApp();\n    await app.ready();\n  });\n\n  afterAll(async () => {\n    await app.close();\n  });\n\n  it('creates a user with valid data', async () => {\n    const response = await app.inject({\n      method: 'POST',\n      url: '/api/users',\n      payload: {\n        email: 'test@example.com',\n        name: 'Test User',\n      },\n    });\n\n    expect(response.statusCode).toBe(201);\n    expect(response.json()).toMatchObject({\n      email: 'test@example.com',\n      name: 'Test User',\n    });\n  });\n\n  it('rejects invalid email', async () => {\n    const response = await app.inject({\n      method: 'POST',\n      url: '/api/users',\n      payload: {\n        email: 'invalid-email',\n        name: 'Test User',\n      },\n    });\n\n    expect(response.statusCode).toBe(400);\n  });\n});\n```\n\n## OpenAPI Documentation\n\n```typescript\n// src/plugins/swagger.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport fp from 'fastify-plugin';\nimport swagger from '@fastify/swagger';\nimport swaggerUi from '@fastify/swagger-ui';\n\nconst swaggerPlugin: FastifyPluginAsync = async (fastify) => {\n  await fastify.register(swagger, {\n    openapi: {\n      info: {\n        title: 'API Documentation',\n        version: '1.0.0',\n      },\n      servers: [\n        { url: 'http://localhost:3000', description: 'Development' },\n      ],\n    },\n  });\n\n  await fastify.register(swaggerUi, {\n    routePrefix: '/docs',\n  });\n};\n\nexport default fp(swaggerPlugin);\n```\n\n## Best Practices\n\n1. **Use plugins** - Encapsulate functionality in plugins\n2. **Schema-first** - Define schemas for all routes\n3. **Type decorations** - Extend FastifyInstance types properly\n4. **Fastify-plugin** - Use `fp()` for plugins that need encapsulation\n5. **Lifecycle hooks** - Use hooks for cross-cutting concerns\n6. **Error handling** - Centralize error handling\n\n## Notes\n\n- Fastify auto-validates with JSON Schema\n- Use `zodToJsonSchema` for Zod integration\n- Plugins are encapsulated by default (use `fp()` to share)\n- Always type route handlers with generics"
              },
              {
                "name": "integration-testing",
                "description": "API integration testing with Supertest and Vitest. Use when testing API endpoints.",
                "path": "tech-stacks/js/node/skills/integration-testing/SKILL.md",
                "frontmatter": {
                  "name": "integration-testing",
                  "description": "API integration testing with Supertest and Vitest. Use when testing API endpoints."
                },
                "content": "# Integration Testing Skill\n\nThis skill covers integration testing patterns for Node.js APIs.\n\n## When to Use\n\nUse this skill when:\n- Testing API endpoints\n- Verifying request/response cycles\n- Testing database interactions\n- Validating authentication flows\n\n## Core Principle\n\n**TEST REAL BEHAVIOR** - Integration tests verify components work together. Use real databases when possible.\n\n## Setup\n\n```bash\nnpm install -D vitest supertest @types/supertest\n```\n\n## Vitest Configuration\n\n```typescript\n// vitest.integration.config.ts\nimport { defineConfig } from 'vitest/config';\n\nexport default defineConfig({\n  test: {\n    include: ['src/**/*.integration.test.ts'],\n    globalSetup: './tests/setup/global.ts',\n    setupFiles: ['./tests/setup/integration.ts'],\n    testTimeout: 30000,\n    hookTimeout: 10000,\n    pool: 'forks',\n    poolOptions: {\n      forks: {\n        singleFork: true,\n      },\n    },\n  },\n});\n```\n\n## Test Setup\n\n```typescript\n// tests/setup/integration.ts\nimport { beforeAll, afterAll, afterEach } from 'vitest';\nimport { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\n\nbeforeAll(async () => {\n  await prisma.$connect();\n});\n\nafterAll(async () => {\n  await prisma.$disconnect();\n});\n\nafterEach(async () => {\n  // Clean up test data\n  await prisma.$transaction([\n    prisma.comment.deleteMany(),\n    prisma.post.deleteMany(),\n    prisma.session.deleteMany(),\n    prisma.user.deleteMany(),\n  ]);\n});\n```\n\n## Basic API Test\n\n```typescript\n// src/routes/__tests__/health.integration.test.ts\nimport { describe, it, expect, beforeAll, afterAll } from 'vitest';\nimport supertest from 'supertest';\nimport { FastifyInstance } from 'fastify';\nimport { buildApp } from '../../app';\n\ndescribe('Health endpoint', () => {\n  let app: FastifyInstance;\n\n  beforeAll(async () => {\n    app = await buildApp();\n    await app.ready();\n  });\n\n  afterAll(async () => {\n    await app.close();\n  });\n\n  it('returns healthy status', async () => {\n    const response = await supertest(app.server)\n      .get('/health')\n      .expect(200);\n\n    expect(response.body).toMatchObject({\n      status: 'healthy',\n    });\n    expect(response.body.timestamp).toBeDefined();\n  });\n});\n```\n\n## CRUD Endpoint Tests\n\n```typescript\n// src/routes/__tests__/users.integration.test.ts\nimport { describe, it, expect, beforeAll, afterAll, beforeEach } from 'vitest';\nimport supertest from 'supertest';\nimport { FastifyInstance } from 'fastify';\nimport { buildApp } from '../../app';\nimport { createTestUser, generateAuthToken } from '../../../tests/helpers';\n\ndescribe('Users API', () => {\n  let app: FastifyInstance;\n  let authToken: string;\n\n  beforeAll(async () => {\n    app = await buildApp();\n    await app.ready();\n  });\n\n  afterAll(async () => {\n    await app.close();\n  });\n\n  beforeEach(async () => {\n    const user = await createTestUser({ role: 'ADMIN' });\n    authToken = generateAuthToken(user);\n  });\n\n  describe('POST /api/users', () => {\n    it('creates a user with valid data', async () => {\n      const userData = {\n        email: 'newuser@example.com',\n        name: 'New User',\n        password: 'Password123!',\n      };\n\n      const response = await supertest(app.server)\n        .post('/api/users')\n        .set('Authorization', `Bearer ${authToken}`)\n        .send(userData)\n        .expect(201);\n\n      expect(response.body).toMatchObject({\n        email: userData.email,\n        name: userData.name,\n      });\n      expect(response.body.id).toBeDefined();\n      expect(response.body.password).toBeUndefined();\n    });\n\n    it('rejects invalid email format', async () => {\n      const response = await supertest(app.server)\n        .post('/api/users')\n        .set('Authorization', `Bearer ${authToken}`)\n        .send({\n          email: 'invalid-email',\n          name: 'Test',\n          password: 'Password123!',\n        })\n        .expect(400);\n\n      expect(response.body.error).toBeDefined();\n    });\n\n    it('rejects duplicate email', async () => {\n      await createTestUser({ email: 'existing@example.com' });\n\n      const response = await supertest(app.server)\n        .post('/api/users')\n        .set('Authorization', `Bearer ${authToken}`)\n        .send({\n          email: 'existing@example.com',\n          name: 'Test',\n          password: 'Password123!',\n        })\n        .expect(400);\n\n      expect(response.body.error).toContain('email');\n    });\n  });\n\n  describe('GET /api/users/:id', () => {\n    it('returns user by id', async () => {\n      const user = await createTestUser();\n\n      const response = await supertest(app.server)\n        .get(`/api/users/${user.id}`)\n        .set('Authorization', `Bearer ${authToken}`)\n        .expect(200);\n\n      expect(response.body).toMatchObject({\n        id: user.id,\n        email: user.email,\n        name: user.name,\n      });\n    });\n\n    it('returns 404 for non-existent user', async () => {\n      await supertest(app.server)\n        .get('/api/users/non-existent-id')\n        .set('Authorization', `Bearer ${authToken}`)\n        .expect(404);\n    });\n  });\n\n  describe('PUT /api/users/:id', () => {\n    it('updates user data', async () => {\n      const user = await createTestUser();\n\n      const response = await supertest(app.server)\n        .put(`/api/users/${user.id}`)\n        .set('Authorization', `Bearer ${authToken}`)\n        .send({ name: 'Updated Name' })\n        .expect(200);\n\n      expect(response.body.name).toBe('Updated Name');\n    });\n  });\n\n  describe('DELETE /api/users/:id', () => {\n    it('deletes user', async () => {\n      const user = await createTestUser();\n\n      await supertest(app.server)\n        .delete(`/api/users/${user.id}`)\n        .set('Authorization', `Bearer ${authToken}`)\n        .expect(204);\n\n      // Verify deletion\n      await supertest(app.server)\n        .get(`/api/users/${user.id}`)\n        .set('Authorization', `Bearer ${authToken}`)\n        .expect(404);\n    });\n  });\n});\n```\n\n## Authentication Tests\n\n```typescript\n// src/routes/__tests__/auth.integration.test.ts\nimport { describe, it, expect, beforeAll, afterAll } from 'vitest';\nimport supertest from 'supertest';\nimport { FastifyInstance } from 'fastify';\nimport { buildApp } from '../../app';\nimport { createTestUser } from '../../../tests/helpers';\n\ndescribe('Auth API', () => {\n  let app: FastifyInstance;\n\n  beforeAll(async () => {\n    app = await buildApp();\n    await app.ready();\n  });\n\n  afterAll(async () => {\n    await app.close();\n  });\n\n  describe('POST /api/auth/login', () => {\n    it('returns tokens for valid credentials', async () => {\n      await createTestUser({\n        email: 'test@example.com',\n        password: 'Password123!',\n      });\n\n      const response = await supertest(app.server)\n        .post('/api/auth/login')\n        .send({\n          email: 'test@example.com',\n          password: 'Password123!',\n        })\n        .expect(200);\n\n      expect(response.body.accessToken).toBeDefined();\n      expect(response.body.refreshToken).toBeDefined();\n      expect(response.body.user).toMatchObject({\n        email: 'test@example.com',\n      });\n    });\n\n    it('rejects invalid password', async () => {\n      await createTestUser({\n        email: 'test@example.com',\n        password: 'Password123!',\n      });\n\n      await supertest(app.server)\n        .post('/api/auth/login')\n        .send({\n          email: 'test@example.com',\n          password: 'WrongPassword!',\n        })\n        .expect(401);\n    });\n  });\n\n  describe('POST /api/auth/refresh', () => {\n    it('returns new tokens with valid refresh token', async () => {\n      const user = await createTestUser();\n      const loginResponse = await supertest(app.server)\n        .post('/api/auth/login')\n        .send({\n          email: user.email,\n          password: 'Password123!',\n        });\n\n      const response = await supertest(app.server)\n        .post('/api/auth/refresh')\n        .send({ refreshToken: loginResponse.body.refreshToken })\n        .expect(200);\n\n      expect(response.body.accessToken).toBeDefined();\n      expect(response.body.refreshToken).toBeDefined();\n    });\n  });\n\n  describe('Protected routes', () => {\n    it('requires authentication', async () => {\n      await supertest(app.server)\n        .get('/api/users/me')\n        .expect(401);\n    });\n\n    it('rejects invalid token', async () => {\n      await supertest(app.server)\n        .get('/api/users/me')\n        .set('Authorization', 'Bearer invalid-token')\n        .expect(401);\n    });\n  });\n});\n```\n\n## Test Helpers\n\n```typescript\n// tests/helpers/index.ts\nimport { PrismaClient, User, Role } from '@prisma/client';\nimport bcrypt from 'bcrypt';\nimport jwt from 'jsonwebtoken';\n\nconst prisma = new PrismaClient();\n\ninterface CreateUserOptions {\n  email?: string;\n  name?: string;\n  password?: string;\n  role?: Role;\n}\n\nexport async function createTestUser(options: CreateUserOptions = {}): Promise<User> {\n  const {\n    email = `test-${Date.now()}@example.com`,\n    name = 'Test User',\n    password = 'Password123!',\n    role = 'USER',\n  } = options;\n\n  const hashedPassword = await bcrypt.hash(password, 10);\n\n  return prisma.user.create({\n    data: { email, name, password: hashedPassword, role },\n  });\n}\n\nexport function generateAuthToken(user: User): string {\n  return jwt.sign(\n    { userId: user.id, role: user.role },\n    process.env.JWT_SECRET!,\n    { expiresIn: '1h' }\n  );\n}\n\nexport async function createTestPost(authorId: string, options = {}) {\n  return prisma.post.create({\n    data: {\n      title: 'Test Post',\n      slug: `test-post-${Date.now()}`,\n      content: 'Test content',\n      authorId,\n      ...options,\n    },\n  });\n}\n```\n\n## Database Seeding for Tests\n\n```typescript\n// tests/setup/seed.ts\nimport { PrismaClient } from '@prisma/client';\nimport bcrypt from 'bcrypt';\n\nconst prisma = new PrismaClient();\n\nexport async function seedTestData() {\n  const password = await bcrypt.hash('Password123!', 10);\n\n  const admin = await prisma.user.create({\n    data: {\n      email: 'admin@test.com',\n      name: 'Admin',\n      password,\n      role: 'ADMIN',\n    },\n  });\n\n  const user = await prisma.user.create({\n    data: {\n      email: 'user@test.com',\n      name: 'User',\n      password,\n      role: 'USER',\n    },\n  });\n\n  return { admin, user };\n}\n```\n\n## Running Tests\n\n```bash\n# Run integration tests\nnpm run test:integration\n\n# Run with coverage\nnpm run test:integration -- --coverage\n\n# Run specific file\nnpm run test:integration -- users.integration.test.ts\n\n# Watch mode\nnpm run test:integration -- --watch\n```\n\n## Best Practices\n\n1. **Isolate tests** - Each test should be independent\n2. **Clean up** - Reset database state between tests\n3. **Use factories** - Create test data with helpers\n4. **Test edge cases** - Invalid input, auth failures, not found\n5. **Check response shape** - Validate complete response structure\n6. **Test status codes** - Verify correct HTTP status codes\n\n## Notes\n\n- Integration tests are slower than unit tests\n- Use a separate test database\n- Run sequentially to avoid conflicts\n- Mock external services (email, payments)"
              },
              {
                "name": "migration-strategies",
                "description": "Database migration best practices and strategies. Use when managing schema changes.",
                "path": "tech-stacks/js/node/skills/migration-strategies/SKILL.md",
                "frontmatter": {
                  "name": "migration-strategies",
                  "description": "Database migration best practices and strategies. Use when managing schema changes."
                },
                "content": "# Migration Strategies Skill\n\nThis skill covers database migration patterns and best practices.\n\n## When to Use\n\nUse this skill when:\n- Making schema changes\n- Deploying database updates\n- Handling data migrations\n- Planning rollback strategies\n\n## Core Principle\n\n**FORWARD-ONLY, REVERSIBLE** - Migrations should be forward-only in production but designed to be logically reversible.\n\n## Migration Types\n\n### Schema Migrations\n- Add/remove tables\n- Add/remove columns\n- Modify column types\n- Add/remove indexes\n- Add/remove constraints\n\n### Data Migrations\n- Backfill data\n- Transform existing data\n- Migrate between schemas\n\n## Safe Migration Patterns\n\n### Adding Columns\n\n```sql\n-- Safe: Add nullable column\nALTER TABLE users ADD COLUMN phone TEXT;\n\n-- Safe: Add column with default\nALTER TABLE users ADD COLUMN status TEXT DEFAULT 'active';\n\n-- Unsafe: Add NOT NULL without default\n-- ALTER TABLE users ADD COLUMN required_field TEXT NOT NULL; -- DON'T DO THIS\n```\n\n### Adding Non-Null Columns\n\n```typescript\n// Step 1: Add nullable column\nawait prisma.$executeRaw`ALTER TABLE users ADD COLUMN bio TEXT`;\n\n// Step 2: Backfill data\nawait prisma.$executeRaw`UPDATE users SET bio = '' WHERE bio IS NULL`;\n\n// Step 3: Add NOT NULL constraint\nawait prisma.$executeRaw`ALTER TABLE users ALTER COLUMN bio SET NOT NULL`;\n```\n\n### Renaming Columns (Zero Downtime)\n\n```typescript\n// Step 1: Add new column\nawait db.schema.alterTable('users').addColumn('full_name', 'text');\n\n// Step 2: Backfill data\nawait db.update(users).set({ fullName: sql`${users.name}` });\n\n// Step 3: Update application to use new column\n// Deploy code that writes to both columns\n\n// Step 4: Stop writing to old column\n// Deploy code that only uses new column\n\n// Step 5: Remove old column (separate migration)\nawait db.schema.alterTable('users').dropColumn('name');\n```\n\n### Adding Indexes (Non-Blocking)\n\n```sql\n-- PostgreSQL: Create index concurrently\nCREATE INDEX CONCURRENTLY users_email_idx ON users(email);\n\n-- Don't do this in production:\n-- CREATE INDEX users_email_idx ON users(email); -- Blocks table\n```\n\n### Removing Columns\n\n```typescript\n// Step 1: Stop reading the column in code\n// Deploy code that doesn't read the column\n\n// Step 2: Stop writing the column in code\n// Deploy code that doesn't write the column\n\n// Step 3: Remove the column\nawait db.schema.alterTable('users').dropColumn('old_column');\n```\n\n## Prisma Migration Workflow\n\n### Development\n\n```bash\n# Create and apply migration\nnpx prisma migrate dev --name add_phone_to_users\n\n# Reset database (destructive)\nnpx prisma migrate reset\n\n# Apply without generating\nnpx prisma db push\n```\n\n### Production\n\n```bash\n# Apply pending migrations\nnpx prisma migrate deploy\n\n# Check migration status\nnpx prisma migrate status\n```\n\n### Migration File\n\n```sql\n-- prisma/migrations/20240101_add_phone/migration.sql\n-- CreateTable\nALTER TABLE \"users\" ADD COLUMN \"phone\" TEXT;\n\n-- CreateIndex\nCREATE INDEX \"users_phone_idx\" ON \"users\"(\"phone\");\n```\n\n## Drizzle Migration Workflow\n\n### Generate Migration\n\n```bash\nnpx drizzle-kit generate:pg\n```\n\n### Apply Migration\n\n```typescript\n// src/db/migrate.ts\nimport { migrate } from 'drizzle-orm/postgres-js/migrator';\n\nawait migrate(db, { migrationsFolder: './drizzle' });\n```\n\n## Data Migration Pattern\n\n```typescript\n// migrations/backfill-user-slugs.ts\nimport { db } from '../src/db';\nimport { users } from '../src/db/schema';\nimport { isNull } from 'drizzle-orm';\nimport slugify from 'slugify';\n\nconst BATCH_SIZE = 1000;\n\nasync function backfillSlugs(): Promise<void> {\n  let processed = 0;\n\n  while (true) {\n    const batch = await db\n      .select({ id: users.id, name: users.name })\n      .from(users)\n      .where(isNull(users.slug))\n      .limit(BATCH_SIZE);\n\n    if (batch.length === 0) break;\n\n    await db.transaction(async (tx) => {\n      for (const user of batch) {\n        const slug = slugify(user.name, { lower: true });\n        await tx.update(users)\n          .set({ slug })\n          .where(eq(users.id, user.id));\n      }\n    });\n\n    processed += batch.length;\n    console.log(`Processed ${processed} users`);\n  }\n\n  console.log(`Backfill complete. Total: ${processed}`);\n}\n\nbackfillSlugs().catch(console.error);\n```\n\n## Rollback Strategies\n\n### With Prisma\n\n```bash\n# Prisma doesn't have built-in rollback\n# Instead, create a new migration that reverses changes\n\n# Mark migration as rolled back (doesn't undo changes)\nnpx prisma migrate resolve --rolled-back 20240101_add_phone\n```\n\n### Manual Rollback\n\n```typescript\n// migrations/rollback-20240101.ts\nimport { db } from '../src/db';\n\nasync function rollback(): Promise<void> {\n  await db.transaction(async (tx) => {\n    // Reverse the changes\n    await tx.schema.alterTable('users').dropColumn('phone');\n  });\n\n  // Update migration table\n  await db.delete(migrations)\n    .where(eq(migrations.name, '20240101_add_phone'));\n}\n\nrollback().catch(console.error);\n```\n\n## Zero-Downtime Migration Checklist\n\n1. **Backward compatible** - Old code works with new schema\n2. **Forward compatible** - New code works with old schema\n3. **Non-blocking** - Use CONCURRENTLY for indexes\n4. **Batched** - Process large data in batches\n5. **Idempotent** - Safe to run multiple times\n6. **Monitored** - Watch for locks and performance\n\n## Migration Testing\n\n```typescript\n// migrations/__tests__/add-phone.test.ts\nimport { describe, it, expect, beforeAll, afterAll } from 'vitest';\nimport { migrate } from '../add-phone';\nimport { rollback } from '../rollback-add-phone';\nimport { setupTestDb, teardownTestDb } from '../../tests/utils';\n\ndescribe('add-phone migration', () => {\n  beforeAll(async () => {\n    await setupTestDb();\n  });\n\n  afterAll(async () => {\n    await teardownTestDb();\n  });\n\n  it('adds phone column', async () => {\n    await migrate();\n\n    const columns = await db.query(`\n      SELECT column_name FROM information_schema.columns\n      WHERE table_name = 'users' AND column_name = 'phone'\n    `);\n\n    expect(columns.length).toBe(1);\n  });\n\n  it('rollback removes phone column', async () => {\n    await rollback();\n\n    const columns = await db.query(`\n      SELECT column_name FROM information_schema.columns\n      WHERE table_name = 'users' AND column_name = 'phone'\n    `);\n\n    expect(columns.length).toBe(0);\n  });\n});\n```\n\n## CI/CD Integration\n\n```yaml\n# .github/workflows/migrate.yml\nname: Database Migration\n\non:\n  push:\n    branches: [main]\n    paths:\n      - 'prisma/migrations/**'\n\njobs:\n  migrate:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - run: npm ci\n\n      - name: Run migrations\n        run: npx prisma migrate deploy\n        env:\n          DATABASE_URL: ${{ secrets.DATABASE_URL }}\n```\n\n## Best Practices\n\n1. **One change per migration** - Easier to debug and rollback\n2. **Test migrations** - Run against production-like data\n3. **Backup before migrating** - Always have a restore point\n4. **Monitor locks** - Watch for blocking queries\n5. **Schedule large migrations** - During low-traffic periods\n6. **Document migrations** - Explain why, not just what\n\n## Notes\n\n- Never modify existing migrations after deployment\n- Large data migrations should be batched\n- Use transactions for consistency\n- Always test rollback procedures"
              },
              {
                "name": "prisma-setup",
                "description": "Prisma ORM configuration and patterns. Use when setting up database access with Prisma.",
                "path": "tech-stacks/js/node/skills/prisma-setup/SKILL.md",
                "frontmatter": {
                  "name": "prisma-setup",
                  "description": "Prisma ORM configuration and patterns. Use when setting up database access with Prisma."
                },
                "content": "# Prisma Setup Skill\n\nThis skill covers Prisma ORM setup and patterns for Node.js applications.\n\n## When to Use\n\nUse this skill when:\n- Setting up database access\n- Defining data models\n- Managing migrations\n- Optimizing database queries\n\n## Core Principle\n\n**TYPE-SAFE DATABASE ACCESS** - Prisma generates TypeScript types from your schema. Use them everywhere.\n\n## Installation\n\n```bash\nnpm install @prisma/client\nnpm install -D prisma\nnpx prisma init\n```\n\n## Schema Definition\n\n```prisma\n// prisma/schema.prisma\ngenerator client {\n  provider = \"prisma-client-js\"\n}\n\ndatasource db {\n  provider = \"postgresql\"\n  url      = env(\"DATABASE_URL\")\n}\n\nmodel User {\n  id        String   @id @default(cuid())\n  email     String   @unique\n  name      String\n  password  String\n  role      Role     @default(USER)\n  posts     Post[]\n  profile   Profile?\n  sessions  Session[]\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  @@index([email])\n  @@index([role])\n}\n\nmodel Profile {\n  id     String  @id @default(cuid())\n  bio    String? @db.Text\n  avatar String?\n  userId String  @unique\n  user   User    @relation(fields: [userId], references: [id], onDelete: Cascade)\n}\n\nmodel Post {\n  id        String     @id @default(cuid())\n  title     String\n  slug      String     @unique\n  content   String?    @db.Text\n  published Boolean    @default(false)\n  authorId  String\n  author    User       @relation(fields: [authorId], references: [id], onDelete: Cascade)\n  tags      Tag[]\n  comments  Comment[]\n  createdAt DateTime   @default(now())\n  updatedAt DateTime   @updatedAt\n\n  @@index([authorId])\n  @@index([slug])\n  @@index([published, createdAt])\n}\n\nmodel Tag {\n  id    String @id @default(cuid())\n  name  String @unique\n  posts Post[]\n}\n\nmodel Comment {\n  id        String   @id @default(cuid())\n  content   String   @db.Text\n  postId    String\n  post      Post     @relation(fields: [postId], references: [id], onDelete: Cascade)\n  authorId  String\n  createdAt DateTime @default(now())\n\n  @@index([postId])\n}\n\nmodel Session {\n  id        String   @id @default(cuid())\n  token     String   @unique\n  userId    String\n  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n  expiresAt DateTime\n  createdAt DateTime @default(now())\n\n  @@index([userId])\n  @@index([expiresAt])\n}\n\nenum Role {\n  USER\n  MODERATOR\n  ADMIN\n}\n```\n\n## Client Setup\n\n```typescript\n// src/db/client.ts\nimport { PrismaClient } from '@prisma/client';\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var prisma: PrismaClient | undefined;\n}\n\nexport const prisma = globalThis.prisma ?? new PrismaClient({\n  log: process.env.NODE_ENV === 'development'\n    ? ['query', 'info', 'warn', 'error']\n    : ['error'],\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  globalThis.prisma = prisma;\n}\n```\n\n### Fastify Plugin\n\n```typescript\n// src/plugins/database.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport fp from 'fastify-plugin';\nimport { PrismaClient } from '@prisma/client';\n\ndeclare module 'fastify' {\n  interface FastifyInstance {\n    db: PrismaClient;\n  }\n}\n\nconst databasePlugin: FastifyPluginAsync = async (fastify) => {\n  const prisma = new PrismaClient({\n    log: [\n      { emit: 'event', level: 'query' },\n      { emit: 'event', level: 'error' },\n    ],\n  });\n\n  prisma.$on('query', (e) => {\n    fastify.log.debug({ query: e.query, duration: e.duration }, 'database query');\n  });\n\n  await prisma.$connect();\n  fastify.decorate('db', prisma);\n\n  fastify.addHook('onClose', async () => {\n    await prisma.$disconnect();\n  });\n};\n\nexport default fp(databasePlugin, { name: 'database' });\n```\n\n## Query Patterns\n\n### Basic CRUD\n\n```typescript\n// Create\nconst user = await prisma.user.create({\n  data: {\n    email: 'user@example.com',\n    name: 'User',\n    password: hashedPassword,\n  },\n});\n\n// Read\nconst user = await prisma.user.findUnique({\n  where: { id: userId },\n});\n\nconst users = await prisma.user.findMany({\n  where: { role: 'USER' },\n  orderBy: { createdAt: 'desc' },\n  take: 10,\n});\n\n// Update\nconst updated = await prisma.user.update({\n  where: { id: userId },\n  data: { name: 'New Name' },\n});\n\n// Delete\nawait prisma.user.delete({\n  where: { id: userId },\n});\n```\n\n### Relations\n\n```typescript\n// Create with relations\nconst post = await prisma.post.create({\n  data: {\n    title: 'My Post',\n    slug: 'my-post',\n    content: 'Content here',\n    author: {\n      connect: { id: userId },\n    },\n    tags: {\n      connectOrCreate: [\n        {\n          where: { name: 'typescript' },\n          create: { name: 'typescript' },\n        },\n      ],\n    },\n  },\n});\n\n// Include relations\nconst postWithAuthor = await prisma.post.findUnique({\n  where: { id: postId },\n  include: {\n    author: {\n      select: { id: true, name: true, email: true },\n    },\n    tags: true,\n    _count: {\n      select: { comments: true },\n    },\n  },\n});\n```\n\n### Pagination\n\n```typescript\ninterface PaginationParams {\n  page: number;\n  perPage: number;\n}\n\ninterface PaginatedResult<T> {\n  data: T[];\n  meta: {\n    total: number;\n    page: number;\n    perPage: number;\n    totalPages: number;\n  };\n}\n\nasync function paginateUsers(\n  params: PaginationParams\n): Promise<PaginatedResult<User>> {\n  const { page, perPage } = params;\n  const skip = (page - 1) * perPage;\n\n  const [users, total] = await prisma.$transaction([\n    prisma.user.findMany({\n      skip,\n      take: perPage,\n      orderBy: { createdAt: 'desc' },\n    }),\n    prisma.user.count(),\n  ]);\n\n  return {\n    data: users,\n    meta: {\n      total,\n      page,\n      perPage,\n      totalPages: Math.ceil(total / perPage),\n    },\n  };\n}\n```\n\n### Transactions\n\n```typescript\n// Sequential transaction\nconst [user, post] = await prisma.$transaction([\n  prisma.user.create({ data: userData }),\n  prisma.post.create({ data: postData }),\n]);\n\n// Interactive transaction\nconst result = await prisma.$transaction(async (tx) => {\n  const user = await tx.user.findUnique({\n    where: { id: userId },\n  });\n\n  if (!user) {\n    throw new Error('User not found');\n  }\n\n  const post = await tx.post.create({\n    data: {\n      title: 'New Post',\n      slug: 'new-post',\n      authorId: user.id,\n    },\n  });\n\n  return { user, post };\n});\n```\n\n## Migration Commands\n\n```bash\n# Create migration\nnpx prisma migrate dev --name add_users\n\n# Apply migrations (production)\nnpx prisma migrate deploy\n\n# Reset database (development only)\nnpx prisma migrate reset\n\n# Generate client\nnpx prisma generate\n\n# Push schema (no migration)\nnpx prisma db push\n\n# View database\nnpx prisma studio\n```\n\n## Seed Script\n\n```typescript\n// prisma/seed.ts\nimport { PrismaClient } from '@prisma/client';\nimport bcrypt from 'bcrypt';\n\nconst prisma = new PrismaClient();\n\nasync function main(): Promise<void> {\n  console.log('Seeding database...');\n\n  // Clear existing data\n  await prisma.comment.deleteMany();\n  await prisma.post.deleteMany();\n  await prisma.session.deleteMany();\n  await prisma.profile.deleteMany();\n  await prisma.user.deleteMany();\n  await prisma.tag.deleteMany();\n\n  // Create admin user\n  const adminPassword = await bcrypt.hash('admin123', 12);\n  const admin = await prisma.user.create({\n    data: {\n      email: 'admin@example.com',\n      name: 'Admin User',\n      password: adminPassword,\n      role: 'ADMIN',\n      profile: {\n        create: {\n          bio: 'System administrator',\n        },\n      },\n    },\n  });\n\n  // Create tags\n  const tags = await Promise.all([\n    prisma.tag.create({ data: { name: 'typescript' } }),\n    prisma.tag.create({ data: { name: 'nodejs' } }),\n    prisma.tag.create({ data: { name: 'prisma' } }),\n  ]);\n\n  // Create posts\n  await prisma.post.create({\n    data: {\n      title: 'Getting Started with Prisma',\n      slug: 'getting-started-with-prisma',\n      content: 'Prisma is a modern database toolkit...',\n      published: true,\n      authorId: admin.id,\n      tags: {\n        connect: tags.map((t) => ({ id: t.id })),\n      },\n    },\n  });\n\n  console.log('Database seeded successfully');\n}\n\nmain()\n  .catch((e) => {\n    console.error(e);\n    process.exit(1);\n  })\n  .finally(async () => {\n    await prisma.$disconnect();\n  });\n```\n\n## Package.json Config\n\n```json\n{\n  \"prisma\": {\n    \"seed\": \"tsx prisma/seed.ts\"\n  }\n}\n```\n\n## Best Practices\n\n1. **Use transactions** - For related operations\n2. **Index foreign keys** - Always add @@index\n3. **Select only needed fields** - Use select for performance\n4. **Avoid N+1** - Use include for relations\n5. **Soft deletes** - Add deletedAt for audit trails\n6. **Connection pooling** - Use pgbouncer in production\n\n## Notes\n\n- Run `prisma generate` after schema changes\n- Use `prisma studio` for database exploration\n- Migrations are production-safe\n- Use environment variables for database URL"
              },
              {
                "name": "query-optimization",
                "description": "Database query optimization strategies. Use when improving query performance.",
                "path": "tech-stacks/js/node/skills/query-optimization/SKILL.md",
                "frontmatter": {
                  "name": "query-optimization",
                  "description": "Database query optimization strategies. Use when improving query performance."
                },
                "content": "# Query Optimization Skill\n\nThis skill covers database query optimization for Node.js applications.\n\n## When to Use\n\nUse this skill when:\n- Queries are slow\n- Database CPU is high\n- Optimizing N+1 queries\n- Adding indexes strategically\n\n## Core Principle\n\n**MEASURE FIRST, OPTIMIZE SECOND** - Profile before optimizing. The bottleneck is often not where you expect.\n\n## N+1 Query Prevention\n\n### The Problem\n\n```typescript\n// BAD: N+1 queries\nconst posts = await prisma.post.findMany();\n\nfor (const post of posts) {\n  // This runs a query for each post!\n  const author = await prisma.user.findUnique({\n    where: { id: post.authorId },\n  });\n  console.log(`${post.title} by ${author?.name}`);\n}\n```\n\n### The Solution\n\n```typescript\n// GOOD: Single query with include\nconst posts = await prisma.post.findMany({\n  include: {\n    author: {\n      select: { id: true, name: true },\n    },\n  },\n});\n\nfor (const post of posts) {\n  console.log(`${post.title} by ${post.author.name}`);\n}\n```\n\n### DataLoader Pattern\n\n```typescript\n// src/lib/dataloader.ts\nimport DataLoader from 'dataloader';\nimport { PrismaClient } from '@prisma/client';\n\nexport function createUserLoader(prisma: PrismaClient) {\n  return new DataLoader<string, User | null>(async (ids) => {\n    const users = await prisma.user.findMany({\n      where: { id: { in: [...ids] } },\n    });\n\n    const userMap = new Map(users.map((u) => [u.id, u]));\n    return ids.map((id) => userMap.get(id) ?? null);\n  });\n}\n\n// Usage\nconst userLoader = createUserLoader(prisma);\nconst posts = await prisma.post.findMany();\n\n// Batches all user lookups into single query\nconst postsWithAuthors = await Promise.all(\n  posts.map(async (post) => ({\n    ...post,\n    author: await userLoader.load(post.authorId),\n  }))\n);\n```\n\n## Index Strategies\n\n### When to Add Indexes\n\n```sql\n-- Columns in WHERE clauses\nCREATE INDEX posts_author_id_idx ON posts(author_id);\n\n-- Columns in JOIN conditions\nCREATE INDEX comments_post_id_idx ON comments(post_id);\n\n-- Columns in ORDER BY\nCREATE INDEX posts_created_at_idx ON posts(created_at DESC);\n\n-- Compound indexes for combined queries\nCREATE INDEX posts_published_created_idx ON posts(published, created_at DESC);\n```\n\n### Prisma Index Definition\n\n```prisma\nmodel Post {\n  id        String   @id\n  authorId  String\n  published Boolean\n  createdAt DateTime\n\n  @@index([authorId])\n  @@index([published, createdAt(sort: Desc)])\n}\n```\n\n### Drizzle Index Definition\n\n```typescript\nexport const posts = pgTable('posts', {\n  id: text('id').primaryKey(),\n  authorId: text('author_id'),\n  published: boolean('published'),\n  createdAt: timestamp('created_at'),\n}, (table) => ({\n  authorIdx: index('posts_author_idx').on(table.authorId),\n  publishedCreatedIdx: index('posts_published_created_idx')\n    .on(table.published, desc(table.createdAt)),\n}));\n```\n\n## Query Analysis\n\n### Explain Analyze\n\n```typescript\n// Prisma\nconst result = await prisma.$queryRaw`\n  EXPLAIN ANALYZE\n  SELECT * FROM posts WHERE author_id = ${userId}\n`;\nconsole.log(result);\n\n// Drizzle\nconst result = await db.execute(sql`\n  EXPLAIN ANALYZE\n  SELECT * FROM posts WHERE author_id = ${userId}\n`);\n```\n\n### Query Logging\n\n```typescript\n// Prisma with query logging\nconst prisma = new PrismaClient({\n  log: [\n    {\n      emit: 'event',\n      level: 'query',\n    },\n  ],\n});\n\nprisma.$on('query', (e) => {\n  if (e.duration > 100) { // Log slow queries (>100ms)\n    console.warn('Slow query:', {\n      query: e.query,\n      duration: `${e.duration}ms`,\n    });\n  }\n});\n```\n\n## Pagination Optimization\n\n### Offset Pagination (Simple but Slow)\n\n```typescript\n// Gets slower as offset increases\nconst posts = await prisma.post.findMany({\n  skip: (page - 1) * perPage,\n  take: perPage,\n  orderBy: { createdAt: 'desc' },\n});\n```\n\n### Cursor Pagination (Fast)\n\n```typescript\n// Constant performance regardless of page\nasync function getPosts(cursor?: string, limit = 20) {\n  const posts = await prisma.post.findMany({\n    take: limit + 1, // Fetch one extra to check if more exist\n    cursor: cursor ? { id: cursor } : undefined,\n    orderBy: { createdAt: 'desc' },\n  });\n\n  const hasMore = posts.length > limit;\n  const items = hasMore ? posts.slice(0, -1) : posts;\n  const nextCursor = hasMore ? items[items.length - 1]?.id : null;\n\n  return { items, nextCursor, hasMore };\n}\n```\n\n## Select Only What You Need\n\n```typescript\n// BAD: Fetching all columns\nconst users = await prisma.user.findMany();\n\n// GOOD: Select specific columns\nconst users = await prisma.user.findMany({\n  select: {\n    id: true,\n    name: true,\n    email: true,\n  },\n});\n\n// Drizzle equivalent\nconst users = await db\n  .select({\n    id: users.id,\n    name: users.name,\n    email: users.email,\n  })\n  .from(users);\n```\n\n## Batch Operations\n\n```typescript\n// BAD: Individual inserts\nfor (const item of items) {\n  await prisma.item.create({ data: item });\n}\n\n// GOOD: Batch insert\nawait prisma.item.createMany({\n  data: items,\n});\n\n// Drizzle batch insert\nawait db.insert(items).values(itemsData);\n```\n\n## Connection Pooling\n\n```typescript\n// Prisma connection pool\nconst prisma = new PrismaClient({\n  datasources: {\n    db: {\n      url: process.env.DATABASE_URL,\n    },\n  },\n});\n\n// For serverless, use external pooler (PgBouncer, Supabase Pooler)\n// DATABASE_URL=postgres://...?pgbouncer=true\n```\n\n## Caching Strategies\n\n```typescript\n// In-memory cache for frequently accessed data\nimport { LRUCache } from 'lru-cache';\n\nconst userCache = new LRUCache<string, User>({\n  max: 500,\n  ttl: 1000 * 60 * 5, // 5 minutes\n});\n\nasync function getUserById(id: string): Promise<User | null> {\n  const cached = userCache.get(id);\n  if (cached) return cached;\n\n  const user = await prisma.user.findUnique({ where: { id } });\n  if (user) userCache.set(id, user);\n  return user;\n}\n\n// Invalidate on update\nasync function updateUser(id: string, data: UserUpdate): Promise<User> {\n  const user = await prisma.user.update({ where: { id }, data });\n  userCache.set(id, user);\n  return user;\n}\n```\n\n## Query Optimization Checklist\n\n1. **Check indexes** - Ensure WHERE/JOIN columns are indexed\n2. **Avoid SELECT *** - Select only needed columns\n3. **Use includes** - Prevent N+1 queries\n4. **Cursor pagination** - For large datasets\n5. **Batch operations** - Group inserts/updates\n6. **Connection pooling** - Especially for serverless\n7. **Query caching** - For read-heavy data\n\n## Monitoring Queries\n\n```typescript\n// Prisma metrics\nimport { Prisma } from '@prisma/client';\n\nconst prisma = new PrismaClient().$extends({\n  query: {\n    $allOperations({ operation, model, args, query }) {\n      const start = performance.now();\n      return query(args).finally(() => {\n        const duration = performance.now() - start;\n        if (duration > 100) {\n          console.warn(`Slow ${model}.${operation}: ${duration.toFixed(2)}ms`);\n        }\n      });\n    },\n  },\n});\n```\n\n## Best Practices\n\n1. **Profile first** - Measure before optimizing\n2. **Index strategically** - Not every column needs an index\n3. **Monitor slow queries** - Set up alerts\n4. **Use EXPLAIN ANALYZE** - Understand query plans\n5. **Test with production data** - Performance varies with data size\n6. **Review regularly** - Queries that were fast may become slow\n\n## Notes\n\n- Indexes speed up reads but slow down writes\n- Composite indexes order matters\n- Cursor pagination is preferred for APIs\n- Cache invalidation is harder than caching"
              },
              {
                "name": "serialization-patterns",
                "description": "Data serialization and transformation patterns. Use when formatting API responses.",
                "path": "tech-stacks/js/node/skills/serialization-patterns/SKILL.md",
                "frontmatter": {
                  "name": "serialization-patterns",
                  "description": "Data serialization and transformation patterns. Use when formatting API responses."
                },
                "content": "# Serialization Patterns Skill\n\nThis skill covers data serialization and transformation for API responses.\n\n## When to Use\n\nUse this skill when:\n- Formatting API responses\n- Transforming database models\n- Hiding sensitive fields\n- Normalizing data structures\n\n## Core Principle\n\n**SEPARATE INTERNAL FROM EXTERNAL** - Internal models differ from API responses. Transform explicitly.\n\n## Basic Transformation\n\n```typescript\n// src/serializers/user.ts\nimport { User } from '@prisma/client';\n\ninterface UserResponse {\n  id: string;\n  email: string;\n  name: string;\n  role: string;\n  createdAt: string;\n}\n\nexport function serializeUser(user: User): UserResponse {\n  return {\n    id: user.id,\n    email: user.email,\n    name: user.name,\n    role: user.role,\n    createdAt: user.createdAt.toISOString(),\n  };\n}\n\nexport function serializeUsers(users: User[]): UserResponse[] {\n  return users.map(serializeUser);\n}\n```\n\n## Class-Based Serializer\n\n```typescript\n// src/serializers/base.ts\nexport abstract class Serializer<TModel, TResponse> {\n  abstract serialize(model: TModel): TResponse;\n\n  serializeMany(models: TModel[]): TResponse[] {\n    return models.map((model) => this.serialize(model));\n  }\n}\n\n// src/serializers/user.ts\nimport { User, Profile } from '@prisma/client';\nimport { Serializer } from './base';\n\ninterface UserResponse {\n  id: string;\n  email: string;\n  name: string;\n  profile: ProfileResponse | null;\n}\n\ninterface ProfileResponse {\n  bio: string | null;\n  avatar: string | null;\n}\n\ntype UserWithProfile = User & { profile: Profile | null };\n\nexport class UserSerializer extends Serializer<UserWithProfile, UserResponse> {\n  serialize(user: UserWithProfile): UserResponse {\n    return {\n      id: user.id,\n      email: user.email,\n      name: user.name,\n      profile: user.profile ? {\n        bio: user.profile.bio,\n        avatar: user.profile.avatar,\n      } : null,\n    };\n  }\n}\n\n// Usage\nconst serializer = new UserSerializer();\nconst response = serializer.serialize(user);\nconst responses = serializer.serializeMany(users);\n```\n\n## Conditional Fields\n\n```typescript\ninterface UserResponse {\n  id: string;\n  email: string;\n  name: string;\n  role: string;\n  // Admin-only fields\n  lastLoginAt?: string;\n  loginCount?: number;\n}\n\ninterface SerializeOptions {\n  includeAdminFields?: boolean;\n}\n\nexport function serializeUser(\n  user: User,\n  options: SerializeOptions = {}\n): UserResponse {\n  const base: UserResponse = {\n    id: user.id,\n    email: user.email,\n    name: user.name,\n    role: user.role,\n  };\n\n  if (options.includeAdminFields) {\n    return {\n      ...base,\n      lastLoginAt: user.lastLoginAt?.toISOString(),\n      loginCount: user.loginCount,\n    };\n  }\n\n  return base;\n}\n```\n\n## Nested Serialization\n\n```typescript\n// src/serializers/post.ts\nimport { Post, User, Tag } from '@prisma/client';\n\ninterface PostResponse {\n  id: string;\n  title: string;\n  slug: string;\n  content: string | null;\n  published: boolean;\n  author: AuthorResponse;\n  tags: TagResponse[];\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface AuthorResponse {\n  id: string;\n  name: string;\n}\n\ninterface TagResponse {\n  id: string;\n  name: string;\n}\n\ntype PostWithRelations = Post & {\n  author: User;\n  tags: Tag[];\n};\n\nexport function serializePost(post: PostWithRelations): PostResponse {\n  return {\n    id: post.id,\n    title: post.title,\n    slug: post.slug,\n    content: post.content,\n    published: post.published,\n    author: {\n      id: post.author.id,\n      name: post.author.name,\n    },\n    tags: post.tags.map((tag) => ({\n      id: tag.id,\n      name: tag.name,\n    })),\n    createdAt: post.createdAt.toISOString(),\n    updatedAt: post.updatedAt.toISOString(),\n  };\n}\n```\n\n## Paginated Response\n\n```typescript\n// src/serializers/pagination.ts\ninterface PaginatedResponse<T> {\n  data: T[];\n  meta: {\n    total: number;\n    page: number;\n    perPage: number;\n    totalPages: number;\n    hasMore: boolean;\n  };\n  links: {\n    first: string;\n    prev: string | null;\n    next: string | null;\n    last: string;\n  };\n}\n\ninterface PaginationInput {\n  items: unknown[];\n  total: number;\n  page: number;\n  perPage: number;\n  baseUrl: string;\n}\n\nexport function serializePaginated<T>(\n  input: PaginationInput,\n  serializer: (item: unknown) => T\n): PaginatedResponse<T> {\n  const { items, total, page, perPage, baseUrl } = input;\n  const totalPages = Math.ceil(total / perPage);\n\n  return {\n    data: items.map(serializer),\n    meta: {\n      total,\n      page,\n      perPage,\n      totalPages,\n      hasMore: page < totalPages,\n    },\n    links: {\n      first: `${baseUrl}?page=1&perPage=${perPage}`,\n      prev: page > 1 ? `${baseUrl}?page=${page - 1}&perPage=${perPage}` : null,\n      next: page < totalPages ? `${baseUrl}?page=${page + 1}&perPage=${perPage}` : null,\n      last: `${baseUrl}?page=${totalPages}&perPage=${perPage}`,\n    },\n  };\n}\n```\n\n## JSON:API Format\n\n```typescript\n// src/serializers/jsonapi.ts\ninterface JsonApiResource<T> {\n  type: string;\n  id: string;\n  attributes: T;\n  relationships?: Record<string, JsonApiRelationship>;\n}\n\ninterface JsonApiRelationship {\n  data: { type: string; id: string } | { type: string; id: string }[];\n}\n\ninterface JsonApiResponse<T> {\n  data: JsonApiResource<T> | JsonApiResource<T>[];\n  included?: JsonApiResource<unknown>[];\n}\n\nexport function toJsonApi<T extends { id: string }>(\n  type: string,\n  data: T\n): JsonApiResource<Omit<T, 'id'>> {\n  const { id, ...attributes } = data;\n  return {\n    type,\n    id,\n    attributes: attributes as Omit<T, 'id'>,\n  };\n}\n\n// Usage\nconst user = { id: '1', name: 'John', email: 'john@example.com' };\nconst response = toJsonApi('user', user);\n// { type: 'user', id: '1', attributes: { name: 'John', email: '...' } }\n```\n\n## Hiding Sensitive Data\n\n```typescript\n// src/serializers/sanitize.ts\ntype SensitiveFields = 'password' | 'passwordHash' | 'apiKey' | 'secret';\n\nexport function sanitize<T extends Record<string, unknown>>(\n  obj: T\n): Omit<T, SensitiveFields> {\n  const sensitiveKeys: SensitiveFields[] = [\n    'password',\n    'passwordHash',\n    'apiKey',\n    'secret',\n  ];\n\n  const result = { ...obj };\n  for (const key of sensitiveKeys) {\n    delete result[key];\n  }\n  return result as Omit<T, SensitiveFields>;\n}\n\n// With deep sanitization\nexport function deepSanitize<T>(obj: T): T {\n  if (obj === null || typeof obj !== 'object') {\n    return obj;\n  }\n\n  if (Array.isArray(obj)) {\n    return obj.map(deepSanitize) as T;\n  }\n\n  const sensitiveKeys = ['password', 'passwordHash', 'apiKey', 'secret'];\n  const result: Record<string, unknown> = {};\n\n  for (const [key, value] of Object.entries(obj)) {\n    if (!sensitiveKeys.includes(key)) {\n      result[key] = deepSanitize(value);\n    }\n  }\n\n  return result as T;\n}\n```\n\n## Date Formatting\n\n```typescript\n// src/serializers/date.ts\nexport function toISOString(date: Date | null | undefined): string | null {\n  return date?.toISOString() ?? null;\n}\n\nexport function toUnixTimestamp(date: Date | null | undefined): number | null {\n  return date ? Math.floor(date.getTime() / 1000) : null;\n}\n\nexport function toRelativeTime(date: Date): string {\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffSecs = Math.floor(diffMs / 1000);\n  const diffMins = Math.floor(diffSecs / 60);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffDays > 0) return `${diffDays}d ago`;\n  if (diffHours > 0) return `${diffHours}h ago`;\n  if (diffMins > 0) return `${diffMins}m ago`;\n  return 'just now';\n}\n```\n\n## Response Envelope\n\n```typescript\n// src/serializers/envelope.ts\ninterface SuccessResponse<T> {\n  success: true;\n  data: T;\n}\n\ninterface ErrorResponse {\n  success: false;\n  error: {\n    code: string;\n    message: string;\n    details?: unknown;\n  };\n}\n\ntype ApiResponse<T> = SuccessResponse<T> | ErrorResponse;\n\nexport function success<T>(data: T): SuccessResponse<T> {\n  return { success: true, data };\n}\n\nexport function error(\n  code: string,\n  message: string,\n  details?: unknown\n): ErrorResponse {\n  return {\n    success: false,\n    error: { code, message, details },\n  };\n}\n\n// Usage in routes\nfastify.get('/users/:id', async (request, reply) => {\n  const user = await findUser(request.params.id);\n\n  if (!user) {\n    return reply.status(404).send(error('NOT_FOUND', 'User not found'));\n  }\n\n  return success(serializeUser(user));\n});\n```\n\n## Fastify Response Serialization\n\n```typescript\n// Configure Fastify to use custom serializer\nimport { FastifyInstance } from 'fastify';\n\nexport function configureSerializers(fastify: FastifyInstance): void {\n  fastify.setReplySerializer((payload) => {\n    return JSON.stringify(payload, (key, value) => {\n      // Convert Dates to ISO strings\n      if (value instanceof Date) {\n        return value.toISOString();\n      }\n      // Convert BigInt to string\n      if (typeof value === 'bigint') {\n        return value.toString();\n      }\n      return value;\n    });\n  });\n}\n```\n\n## Best Practices\n\n1. **Explicit transformation** - Never return raw database models\n2. **Type safety** - Define response types explicitly\n3. **Hide sensitive data** - Remove passwords, keys, secrets\n4. **Consistent format** - Same structure across endpoints\n5. **Date handling** - Use ISO 8601 format\n6. **Null handling** - Be explicit about null vs undefined\n\n## Notes\n\n- Serializers are pure functions\n- Test serializers independently\n- Document response formats in OpenAPI\n- Consider versioned serializers for API versions"
              },
              {
                "name": "serverless-patterns",
                "description": "Serverless deployment patterns for Node.js. Use when deploying to serverless platforms.",
                "path": "tech-stacks/js/node/skills/serverless-patterns/SKILL.md",
                "frontmatter": {
                  "name": "serverless-patterns",
                  "description": "Serverless deployment patterns for Node.js. Use when deploying to serverless platforms."
                },
                "content": "# Serverless Patterns Skill\n\nThis skill covers serverless deployment patterns for Node.js applications.\n\n## When to Use\n\nUse this skill when:\n- Deploying to Vercel, AWS Lambda, Cloudflare Workers\n- Building serverless APIs\n- Optimizing cold start performance\n- Designing for serverless constraints\n\n## Core Principle\n\n**STATELESS AND FAST** - No persistent state. Minimize cold starts. Design for request-response lifecycle.\n\n## Vercel Serverless Functions\n\n### Project Structure\n\n```\nmy-api/\nâ”œâ”€â”€ api/\nâ”‚   â”œâ”€â”€ health.ts          # /api/health\nâ”‚   â”œâ”€â”€ users/\nâ”‚   â”‚   â”œâ”€â”€ index.ts       # /api/users (GET, POST)\nâ”‚   â”‚   â””â”€â”€ [id].ts        # /api/users/:id\nâ”‚   â””â”€â”€ auth/\nâ”‚       â”œâ”€â”€ login.ts       # /api/auth/login\nâ”‚       â””â”€â”€ register.ts    # /api/auth/register\nâ”œâ”€â”€ lib/\nâ”‚   â”œâ”€â”€ db.ts\nâ”‚   â””â”€â”€ auth.ts\nâ”œâ”€â”€ vercel.json\nâ””â”€â”€ package.json\n```\n\n### Basic Handler\n\n```typescript\n// api/health.ts\nimport type { VercelRequest, VercelResponse } from '@vercel/node';\n\nexport default function handler(\n  req: VercelRequest,\n  res: VercelResponse\n): VercelResponse {\n  return res.status(200).json({\n    status: 'healthy',\n    timestamp: new Date().toISOString(),\n  });\n}\n```\n\n### CRUD Handler\n\n```typescript\n// api/users/index.ts\nimport type { VercelRequest, VercelResponse } from '@vercel/node';\nimport { prisma } from '../../lib/db';\nimport { authenticate } from '../../lib/auth';\nimport { z } from 'zod';\n\nconst CreateUserSchema = z.object({\n  email: z.string().email(),\n  name: z.string().min(1),\n});\n\nexport default async function handler(\n  req: VercelRequest,\n  res: VercelResponse\n): Promise<VercelResponse> {\n  try {\n    if (req.method === 'GET') {\n      const users = await prisma.user.findMany({\n        select: { id: true, email: true, name: true },\n      });\n      return res.status(200).json(users);\n    }\n\n    if (req.method === 'POST') {\n      const body = CreateUserSchema.parse(req.body);\n      const user = await prisma.user.create({ data: body });\n      return res.status(201).json(user);\n    }\n\n    return res.status(405).json({ error: 'Method not allowed' });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({ error: error.errors });\n    }\n    console.error(error);\n    return res.status(500).json({ error: 'Internal server error' });\n  }\n}\n```\n\n### Dynamic Route Handler\n\n```typescript\n// api/users/[id].ts\nimport type { VercelRequest, VercelResponse } from '@vercel/node';\nimport { prisma } from '../../lib/db';\n\nexport default async function handler(\n  req: VercelRequest,\n  res: VercelResponse\n): Promise<VercelResponse> {\n  const { id } = req.query;\n\n  if (typeof id !== 'string') {\n    return res.status(400).json({ error: 'Invalid ID' });\n  }\n\n  try {\n    if (req.method === 'GET') {\n      const user = await prisma.user.findUnique({ where: { id } });\n      if (!user) {\n        return res.status(404).json({ error: 'User not found' });\n      }\n      return res.status(200).json(user);\n    }\n\n    if (req.method === 'PUT') {\n      const user = await prisma.user.update({\n        where: { id },\n        data: req.body,\n      });\n      return res.status(200).json(user);\n    }\n\n    if (req.method === 'DELETE') {\n      await prisma.user.delete({ where: { id } });\n      return res.status(204).end();\n    }\n\n    return res.status(405).json({ error: 'Method not allowed' });\n  } catch (error) {\n    console.error(error);\n    return res.status(500).json({ error: 'Internal server error' });\n  }\n}\n```\n\n### vercel.json\n\n```json\n{\n  \"functions\": {\n    \"api/**/*.ts\": {\n      \"memory\": 1024,\n      \"maxDuration\": 30\n    }\n  },\n  \"rewrites\": [\n    { \"source\": \"/api/(.*)\", \"destination\": \"/api/$1\" }\n  ],\n  \"headers\": [\n    {\n      \"source\": \"/api/(.*)\",\n      \"headers\": [\n        { \"key\": \"Access-Control-Allow-Origin\", \"value\": \"*\" },\n        { \"key\": \"Access-Control-Allow-Methods\", \"value\": \"GET, POST, PUT, DELETE, OPTIONS\" },\n        { \"key\": \"Access-Control-Allow-Headers\", \"value\": \"Content-Type, Authorization\" }\n      ]\n    }\n  ]\n}\n```\n\n## AWS Lambda\n\n### Handler Pattern\n\n```typescript\n// src/handlers/users.ts\nimport { APIGatewayProxyHandler, APIGatewayProxyResult } from 'aws-lambda';\nimport { prisma } from '../lib/db';\nimport { z } from 'zod';\n\nconst CreateUserSchema = z.object({\n  email: z.string().email(),\n  name: z.string().min(1),\n});\n\nexport const createUser: APIGatewayProxyHandler = async (event) => {\n  try {\n    const body = JSON.parse(event.body ?? '{}');\n    const data = CreateUserSchema.parse(body);\n\n    const user = await prisma.user.create({ data });\n\n    return {\n      statusCode: 201,\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(user),\n    };\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return {\n        statusCode: 400,\n        body: JSON.stringify({ error: error.errors }),\n      };\n    }\n    console.error(error);\n    return {\n      statusCode: 500,\n      body: JSON.stringify({ error: 'Internal server error' }),\n    };\n  }\n};\n\nexport const getUser: APIGatewayProxyHandler = async (event) => {\n  const id = event.pathParameters?.id;\n\n  if (!id) {\n    return {\n      statusCode: 400,\n      body: JSON.stringify({ error: 'Missing ID' }),\n    };\n  }\n\n  const user = await prisma.user.findUnique({ where: { id } });\n\n  if (!user) {\n    return {\n      statusCode: 404,\n      body: JSON.stringify({ error: 'User not found' }),\n    };\n  }\n\n  return {\n    statusCode: 200,\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(user),\n  };\n};\n```\n\n### Serverless Framework Config\n\n```yaml\n# serverless.yml\nservice: my-api\nframeworkVersion: '3'\n\nprovider:\n  name: aws\n  runtime: nodejs20.x\n  stage: ${opt:stage, 'dev'}\n  region: us-east-1\n  environment:\n    DATABASE_URL: ${env:DATABASE_URL}\n    NODE_OPTIONS: --enable-source-maps\n\nfunctions:\n  createUser:\n    handler: dist/handlers/users.createUser\n    events:\n      - http:\n          path: users\n          method: post\n          cors: true\n\n  getUser:\n    handler: dist/handlers/users.getUser\n    events:\n      - http:\n          path: users/{id}\n          method: get\n          cors: true\n\nplugins:\n  - serverless-esbuild\n\ncustom:\n  esbuild:\n    bundle: true\n    minify: true\n    sourcemap: true\n    target: 'node20'\n```\n\n## Cloudflare Workers\n\n### Worker Handler\n\n```typescript\n// src/worker.ts\nimport { Router } from 'itty-router';\n\ninterface Env {\n  DATABASE_URL: string;\n}\n\nconst router = Router();\n\nrouter.get('/api/health', () => {\n  return Response.json({\n    status: 'healthy',\n    timestamp: new Date().toISOString(),\n  });\n});\n\nrouter.get('/api/users', async (request, env: Env) => {\n  // Use D1 or external database\n  const users = await fetchUsers(env.DATABASE_URL);\n  return Response.json(users);\n});\n\nrouter.post('/api/users', async (request, env: Env) => {\n  const body = await request.json();\n  const user = await createUser(env.DATABASE_URL, body);\n  return Response.json(user, { status: 201 });\n});\n\nrouter.all('*', () => {\n  return Response.json({ error: 'Not found' }, { status: 404 });\n});\n\nexport default {\n  fetch: (request: Request, env: Env) => router.handle(request, env),\n};\n```\n\n### wrangler.toml\n\n```toml\nname = \"my-api\"\nmain = \"src/worker.ts\"\ncompatibility_date = \"2024-01-01\"\n\n[vars]\nNODE_ENV = \"production\"\n\n[[d1_databases]]\nbinding = \"DB\"\ndatabase_name = \"my-database\"\ndatabase_id = \"xxx\"\n```\n\n## Cold Start Optimization\n\n### Lazy Loading\n\n```typescript\n// lib/db.ts - Lazy initialization\nimport { PrismaClient } from '@prisma/client';\n\nlet prisma: PrismaClient | null = null;\n\nexport function getPrisma(): PrismaClient {\n  if (!prisma) {\n    prisma = new PrismaClient();\n  }\n  return prisma;\n}\n```\n\n### Connection Pooling\n\n```typescript\n// Use connection pooler for serverless\n// Prisma Data Proxy or PgBouncer\n\nconst prisma = new PrismaClient({\n  datasources: {\n    db: {\n      url: process.env.DATABASE_URL, // Use pooler URL\n    },\n  },\n});\n```\n\n### Bundle Optimization\n\n```typescript\n// tsup.config.ts - Optimize bundle\nimport { defineConfig } from 'tsup';\n\nexport default defineConfig({\n  entry: ['src/handlers/**/*.ts'],\n  format: ['esm'],\n  target: 'node20',\n  clean: true,\n  minify: true,\n  treeshake: true,\n  external: ['@prisma/client'],\n});\n```\n\n## Middleware Pattern\n\n```typescript\n// lib/middleware.ts\nimport type { VercelRequest, VercelResponse } from '@vercel/node';\n\ntype Handler = (req: VercelRequest, res: VercelResponse) => Promise<VercelResponse>;\ntype Middleware = (handler: Handler) => Handler;\n\nexport const withCors: Middleware = (handler) => async (req, res) => {\n  res.setHeader('Access-Control-Allow-Origin', '*');\n  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n  res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n\n  if (req.method === 'OPTIONS') {\n    return res.status(200).end();\n  }\n\n  return handler(req, res);\n};\n\nexport const withAuth: Middleware = (handler) => async (req, res) => {\n  const token = req.headers.authorization?.replace('Bearer ', '');\n\n  if (!token) {\n    return res.status(401).json({ error: 'Unauthorized' });\n  }\n\n  try {\n    // Verify token\n    const user = await verifyToken(token);\n    (req as any).user = user;\n    return handler(req, res);\n  } catch {\n    return res.status(401).json({ error: 'Invalid token' });\n  }\n};\n\n// Compose middleware\nexport const compose = (...middlewares: Middleware[]) => (handler: Handler): Handler => {\n  return middlewares.reduceRight((h, m) => m(h), handler);\n};\n\n// Usage\nexport default compose(withCors, withAuth)(async (req, res) => {\n  const user = (req as any).user;\n  return res.json({ message: `Hello, ${user.name}` });\n});\n```\n\n## Error Handling\n\n```typescript\n// lib/errors.ts\nexport class ApiError extends Error {\n  constructor(\n    public statusCode: number,\n    message: string,\n    public code?: string\n  ) {\n    super(message);\n    this.name = 'ApiError';\n  }\n}\n\nexport function withErrorHandling(handler: Handler): Handler {\n  return async (req, res) => {\n    try {\n      return await handler(req, res);\n    } catch (error) {\n      if (error instanceof ApiError) {\n        return res.status(error.statusCode).json({\n          error: error.message,\n          code: error.code,\n        });\n      }\n\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({\n          error: 'Validation failed',\n          details: error.errors,\n        });\n      }\n\n      console.error('Unhandled error:', error);\n      return res.status(500).json({ error: 'Internal server error' });\n    }\n  };\n}\n```\n\n## Best Practices\n\n1. **Minimize dependencies** - Smaller bundles = faster cold starts\n2. **Connection pooling** - Use external pooler for databases\n3. **Lazy initialization** - Initialize on first request\n4. **Stateless design** - No persistent state between requests\n5. **Error handling** - Catch and log all errors\n6. **Response caching** - Use CDN edge caching when possible\n\n## Notes\n\n- Cold starts vary by platform (50ms-500ms)\n- Database connections are the main cold start cost\n- Use edge functions for low-latency responses\n- Monitor invocation counts and duration"
              },
              {
                "name": "testcontainers-usage",
                "description": "Docker-based testing with testcontainers. Use when running tests with real databases.",
                "path": "tech-stacks/js/node/skills/testcontainers-usage/SKILL.md",
                "frontmatter": {
                  "name": "testcontainers-usage",
                  "description": "Docker-based testing with testcontainers. Use when running tests with real databases."
                },
                "content": "# Testcontainers Usage Skill\n\nThis skill covers testcontainers for isolated integration testing with Docker.\n\n## When to Use\n\nUse this skill when:\n- Need isolated database per test run\n- Testing against real database\n- Running CI/CD pipeline tests\n- Testing database-specific features\n\n## Core Principle\n\n**REAL DEPENDENCIES** - Test against real databases in containers. No mocking database behavior.\n\n## Installation\n\n```bash\nnpm install -D @testcontainers/postgresql testcontainers\n```\n\n## Basic Setup\n\n```typescript\n// tests/setup/containers.ts\nimport { PostgreSqlContainer, StartedPostgreSqlContainer } from '@testcontainers/postgresql';\nimport { PrismaClient } from '@prisma/client';\nimport { execSync } from 'child_process';\n\nlet container: StartedPostgreSqlContainer;\nlet prisma: PrismaClient;\n\nexport async function startDatabase(): Promise<{\n  container: StartedPostgreSqlContainer;\n  prisma: PrismaClient;\n  connectionString: string;\n}> {\n  container = await new PostgreSqlContainer('postgres:16-alpine')\n    .withDatabase('testdb')\n    .withUsername('test')\n    .withPassword('test')\n    .start();\n\n  const connectionString = container.getConnectionUri();\n\n  // Set environment variable for Prisma\n  process.env.DATABASE_URL = connectionString;\n\n  // Run migrations\n  execSync('npx prisma migrate deploy', {\n    env: { ...process.env, DATABASE_URL: connectionString },\n    stdio: 'inherit',\n  });\n\n  // Create Prisma client\n  prisma = new PrismaClient({\n    datasources: {\n      db: { url: connectionString },\n    },\n  });\n\n  await prisma.$connect();\n\n  return { container, prisma, connectionString };\n}\n\nexport async function stopDatabase(): Promise<void> {\n  if (prisma) {\n    await prisma.$disconnect();\n  }\n  if (container) {\n    await container.stop();\n  }\n}\n\nexport function getPrisma(): PrismaClient {\n  return prisma;\n}\n```\n\n## Vitest Configuration\n\n```typescript\n// vitest.container.config.ts\nimport { defineConfig } from 'vitest/config';\n\nexport default defineConfig({\n  test: {\n    include: ['**/*.container.test.ts'],\n    testTimeout: 120000,\n    hookTimeout: 60000,\n    pool: 'forks',\n    poolOptions: {\n      forks: {\n        singleFork: true, // Run serially for container tests\n      },\n    },\n    globalSetup: './tests/setup/container-setup.ts',\n  },\n});\n```\n\n## Global Setup\n\n```typescript\n// tests/setup/container-setup.ts\nimport { startDatabase, stopDatabase } from './containers';\n\nexport async function setup(): Promise<void> {\n  console.log('Starting test database container...');\n  await startDatabase();\n  console.log('Test database ready');\n}\n\nexport async function teardown(): Promise<void> {\n  console.log('Stopping test database container...');\n  await stopDatabase();\n  console.log('Container stopped');\n}\n```\n\n## Per-Test Container\n\n```typescript\n// tests/setup/per-test-container.ts\nimport { PostgreSqlContainer, StartedPostgreSqlContainer } from '@testcontainers/postgresql';\nimport { PrismaClient } from '@prisma/client';\nimport { execSync } from 'child_process';\n\nexport async function withDatabase<T>(\n  testFn: (prisma: PrismaClient) => Promise<T>\n): Promise<T> {\n  const container = await new PostgreSqlContainer('postgres:16-alpine')\n    .withDatabase('testdb')\n    .withUsername('test')\n    .withPassword('test')\n    .start();\n\n  const connectionString = container.getConnectionUri();\n\n  // Run migrations\n  execSync('npx prisma migrate deploy', {\n    env: { ...process.env, DATABASE_URL: connectionString },\n    stdio: 'pipe',\n  });\n\n  const prisma = new PrismaClient({\n    datasources: { db: { url: connectionString } },\n  });\n\n  try {\n    await prisma.$connect();\n    return await testFn(prisma);\n  } finally {\n    await prisma.$disconnect();\n    await container.stop();\n  }\n}\n```\n\n## Integration Test Example\n\n```typescript\n// src/services/__tests__/user.container.test.ts\nimport { describe, it, expect, beforeAll, afterAll, beforeEach } from 'vitest';\nimport { PrismaClient } from '@prisma/client';\nimport { startDatabase, stopDatabase, getPrisma } from '../../../tests/setup/containers';\nimport { UserService } from '../user';\n\ndescribe('UserService with testcontainers', () => {\n  let prisma: PrismaClient;\n  let userService: UserService;\n\n  beforeAll(async () => {\n    const db = await startDatabase();\n    prisma = db.prisma;\n    userService = new UserService(prisma);\n  }, 120000); // 2 minute timeout for container startup\n\n  afterAll(async () => {\n    await stopDatabase();\n  });\n\n  beforeEach(async () => {\n    // Clean up between tests\n    await prisma.user.deleteMany();\n  });\n\n  it('creates a user', async () => {\n    const user = await userService.create({\n      email: 'test@example.com',\n      name: 'Test User',\n      password: 'password123',\n    });\n\n    expect(user.id).toBeDefined();\n    expect(user.email).toBe('test@example.com');\n  });\n\n  it('finds user by email', async () => {\n    await userService.create({\n      email: 'find@example.com',\n      name: 'Find Me',\n      password: 'password123',\n    });\n\n    const found = await userService.findByEmail('find@example.com');\n\n    expect(found).not.toBeNull();\n    expect(found?.name).toBe('Find Me');\n  });\n\n  it('returns null for non-existent user', async () => {\n    const found = await userService.findByEmail('nonexistent@example.com');\n    expect(found).toBeNull();\n  });\n\n  it('updates user', async () => {\n    const user = await userService.create({\n      email: 'update@example.com',\n      name: 'Original Name',\n      password: 'password123',\n    });\n\n    const updated = await userService.update(user.id, { name: 'New Name' });\n\n    expect(updated.name).toBe('New Name');\n  });\n\n  it('deletes user', async () => {\n    const user = await userService.create({\n      email: 'delete@example.com',\n      name: 'Delete Me',\n      password: 'password123',\n    });\n\n    await userService.delete(user.id);\n\n    const found = await userService.findById(user.id);\n    expect(found).toBeNull();\n  });\n});\n```\n\n## Multiple Containers\n\n```typescript\n// tests/setup/multi-containers.ts\nimport { PostgreSqlContainer, StartedPostgreSqlContainer } from '@testcontainers/postgresql';\nimport { GenericContainer, StartedTestContainer } from 'testcontainers';\n\ninterface TestContainers {\n  postgres: StartedPostgreSqlContainer;\n  redis: StartedTestContainer;\n}\n\nexport async function startContainers(): Promise<TestContainers> {\n  // Start containers in parallel\n  const [postgres, redis] = await Promise.all([\n    new PostgreSqlContainer('postgres:16-alpine')\n      .withDatabase('testdb')\n      .start(),\n    new GenericContainer('redis:7-alpine')\n      .withExposedPorts(6379)\n      .start(),\n  ]);\n\n  // Set environment variables\n  process.env.DATABASE_URL = postgres.getConnectionUri();\n  process.env.REDIS_URL = `redis://${redis.getHost()}:${redis.getMappedPort(6379)}`;\n\n  return { postgres, redis };\n}\n\nexport async function stopContainers(containers: TestContainers): Promise<void> {\n  await Promise.all([\n    containers.postgres.stop(),\n    containers.redis.stop(),\n  ]);\n}\n```\n\n## Reusable Container\n\n```typescript\n// tests/setup/reusable-container.ts\nimport { PostgreSqlContainer, StartedPostgreSqlContainer } from '@testcontainers/postgresql';\n\nlet reusableContainer: StartedPostgreSqlContainer | null = null;\n\nexport async function getReusableContainer(): Promise<StartedPostgreSqlContainer> {\n  if (!reusableContainer) {\n    reusableContainer = await new PostgreSqlContainer('postgres:16-alpine')\n      .withReuse()\n      .start();\n  }\n  return reusableContainer;\n}\n\n// Note: Reusable containers persist between test runs\n// Use for faster local development\n// Don't use in CI - start fresh containers there\n```\n\n## Test with App\n\n```typescript\n// src/routes/__tests__/users.container.test.ts\nimport { describe, it, expect, beforeAll, afterAll, beforeEach } from 'vitest';\nimport supertest from 'supertest';\nimport { FastifyInstance } from 'fastify';\nimport { PrismaClient } from '@prisma/client';\nimport { buildApp } from '../../app';\nimport { startDatabase, stopDatabase } from '../../../tests/setup/containers';\n\ndescribe('Users API with real database', () => {\n  let app: FastifyInstance;\n  let prisma: PrismaClient;\n\n  beforeAll(async () => {\n    const db = await startDatabase();\n    prisma = db.prisma;\n    app = await buildApp();\n    await app.ready();\n  }, 120000);\n\n  afterAll(async () => {\n    await app.close();\n    await stopDatabase();\n  });\n\n  beforeEach(async () => {\n    await prisma.user.deleteMany();\n  });\n\n  it('creates and retrieves user', async () => {\n    // Create\n    const createResponse = await supertest(app.server)\n      .post('/api/users')\n      .send({\n        email: 'test@example.com',\n        name: 'Test User',\n        password: 'Password123!',\n      })\n      .expect(201);\n\n    const userId = createResponse.body.id;\n\n    // Retrieve\n    const getResponse = await supertest(app.server)\n      .get(`/api/users/${userId}`)\n      .expect(200);\n\n    expect(getResponse.body.email).toBe('test@example.com');\n  });\n});\n```\n\n## CI Configuration\n\n```yaml\n# .github/workflows/test.yml\nname: Tests\n\non: [push, pull_request]\n\njobs:\n  container-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '22'\n\n      - run: npm ci\n\n      - name: Run container tests\n        run: npm run test:containers\n```\n\n## Best Practices\n\n1. **Single fork mode** - Run container tests serially\n2. **Adequate timeouts** - Container startup takes time\n3. **Clean between tests** - Delete data, not container\n4. **Reuse for dev** - Speed up local development\n5. **Fresh for CI** - Always start new in CI\n6. **Parallel containers** - Start multiple services together\n\n## Notes\n\n- Requires Docker to be running\n- First run downloads images (slow)\n- Reusable containers speed up local dev\n- Container logs available for debugging"
              },
              {
                "name": "zod-validation",
                "description": "Zod schema validation patterns. Use when validating API inputs and data.",
                "path": "tech-stacks/js/node/skills/zod-validation/SKILL.md",
                "frontmatter": {
                  "name": "zod-validation",
                  "description": "Zod schema validation patterns. Use when validating API inputs and data."
                },
                "content": "# Zod Validation Skill\n\nThis skill covers Zod schema validation for type-safe data validation.\n\n## When to Use\n\nUse this skill when:\n- Validating API request bodies\n- Parsing environment variables\n- Transforming data\n- Creating type-safe schemas\n\n## Core Principle\n\n**VALIDATE AT BOUNDARIES** - Validate all external input. Trust internal data. Use Zod for type inference.\n\n## Installation\n\n```bash\nnpm install zod\n```\n\n## Basic Schemas\n\n```typescript\nimport { z } from 'zod';\n\n// Primitives\nconst stringSchema = z.string();\nconst numberSchema = z.number();\nconst booleanSchema = z.boolean();\nconst dateSchema = z.date();\n\n// String validations\nconst emailSchema = z.string().email();\nconst urlSchema = z.string().url();\nconst uuidSchema = z.string().uuid();\nconst minLengthSchema = z.string().min(1).max(100);\nconst regexSchema = z.string().regex(/^[a-z]+$/);\n\n// Number validations\nconst positiveSchema = z.number().positive();\nconst intSchema = z.number().int();\nconst rangeSchema = z.number().min(0).max(100);\n\n// Optional and nullable\nconst optionalSchema = z.string().optional(); // string | undefined\nconst nullableSchema = z.string().nullable(); // string | null\nconst nullishSchema = z.string().nullish();   // string | null | undefined\n```\n\n## Object Schemas\n\n```typescript\nconst UserSchema = z.object({\n  id: z.string().uuid(),\n  email: z.string().email(),\n  name: z.string().min(1).max(100),\n  age: z.number().int().positive().optional(),\n  role: z.enum(['USER', 'ADMIN', 'MODERATOR']),\n  createdAt: z.date(),\n});\n\n// Type inference\ntype User = z.infer<typeof UserSchema>;\n\n// Partial (all fields optional)\nconst PartialUserSchema = UserSchema.partial();\n\n// Pick specific fields\nconst UserEmailSchema = UserSchema.pick({ email: true, name: true });\n\n// Omit fields\nconst UserWithoutIdSchema = UserSchema.omit({ id: true, createdAt: true });\n\n// Extend schema\nconst UserWithProfileSchema = UserSchema.extend({\n  profile: z.object({\n    bio: z.string().optional(),\n    avatar: z.string().url().optional(),\n  }),\n});\n```\n\n## Array and Union Schemas\n\n```typescript\n// Arrays\nconst StringArraySchema = z.array(z.string());\nconst NumberArraySchema = z.array(z.number()).min(1).max(10);\n\n// Tuples\nconst CoordinatesSchema = z.tuple([z.number(), z.number()]);\n\n// Unions\nconst StringOrNumberSchema = z.union([z.string(), z.number()]);\nconst ResultSchema = z.discriminatedUnion('status', [\n  z.object({ status: z.literal('success'), data: z.unknown() }),\n  z.object({ status: z.literal('error'), error: z.string() }),\n]);\n\n// Enums\nconst RoleSchema = z.enum(['USER', 'ADMIN', 'MODERATOR']);\ntype Role = z.infer<typeof RoleSchema>; // 'USER' | 'ADMIN' | 'MODERATOR'\n```\n\n## API Request Schemas\n\n```typescript\n// Create user request\nconst CreateUserSchema = z.object({\n  email: z.string().email('Invalid email address'),\n  password: z.string()\n    .min(8, 'Password must be at least 8 characters')\n    .regex(/[A-Z]/, 'Password must contain uppercase letter')\n    .regex(/[0-9]/, 'Password must contain number'),\n  name: z.string().min(1, 'Name is required').max(100),\n});\n\n// Update user request (all fields optional)\nconst UpdateUserSchema = CreateUserSchema.partial();\n\n// Query parameters\nconst PaginationSchema = z.object({\n  page: z.coerce.number().int().positive().default(1),\n  perPage: z.coerce.number().int().min(1).max(100).default(20),\n  sort: z.enum(['asc', 'desc']).default('desc'),\n});\n\n// Path parameters\nconst IdParamSchema = z.object({\n  id: z.string().uuid('Invalid ID format'),\n});\n```\n\n## Transformations\n\n```typescript\n// Transform during parse\nconst TrimmedStringSchema = z.string().trim();\nconst LowercaseEmailSchema = z.string().email().toLowerCase();\n\n// Transform to different type\nconst DateStringSchema = z.string().transform((str) => new Date(str));\n\n// Coerce types\nconst CoercedNumberSchema = z.coerce.number(); // \"42\" -> 42\nconst CoercedDateSchema = z.coerce.date();     // \"2024-01-01\" -> Date\n\n// Complex transformation\nconst UserInputSchema = z.object({\n  email: z.string().email().toLowerCase().trim(),\n  name: z.string().trim(),\n  tags: z.string().transform((str) => str.split(',').map((t) => t.trim())),\n});\n```\n\n## Custom Validations\n\n```typescript\n// Custom refinement\nconst PasswordSchema = z.string()\n  .min(8)\n  .refine(\n    (password) => /[A-Z]/.test(password),\n    { message: 'Password must contain uppercase letter' }\n  )\n  .refine(\n    (password) => /[0-9]/.test(password),\n    { message: 'Password must contain number' }\n  );\n\n// Cross-field validation\nconst PasswordConfirmSchema = z.object({\n  password: z.string().min(8),\n  confirmPassword: z.string(),\n}).refine(\n  (data) => data.password === data.confirmPassword,\n  {\n    message: 'Passwords do not match',\n    path: ['confirmPassword'],\n  }\n);\n\n// Async validation\nconst UniqueEmailSchema = z.string().email().refine(\n  async (email) => {\n    const exists = await checkEmailExists(email);\n    return !exists;\n  },\n  { message: 'Email already registered' }\n);\n```\n\n## Fastify Integration\n\n```typescript\n// src/routes/users.ts\nimport { FastifyPluginAsync } from 'fastify';\nimport { z } from 'zod';\nimport { zodToJsonSchema } from 'zod-to-json-schema';\n\nconst CreateUserSchema = z.object({\n  email: z.string().email(),\n  name: z.string().min(1),\n  password: z.string().min(8),\n});\n\nconst UserResponseSchema = z.object({\n  id: z.string(),\n  email: z.string(),\n  name: z.string(),\n  createdAt: z.string(),\n});\n\ntype CreateUserInput = z.infer<typeof CreateUserSchema>;\ntype UserResponse = z.infer<typeof UserResponseSchema>;\n\nconst usersRoutes: FastifyPluginAsync = async (fastify) => {\n  // Manual validation\n  fastify.post<{ Body: CreateUserInput }>('/', async (request, reply) => {\n    const result = CreateUserSchema.safeParse(request.body);\n\n    if (!result.success) {\n      return reply.status(400).send({\n        error: 'Validation failed',\n        details: result.error.flatten(),\n      });\n    }\n\n    const user = await createUser(result.data);\n    return reply.status(201).send(user);\n  });\n\n  // With JSON Schema (Fastify validates)\n  fastify.post<{ Body: CreateUserInput; Reply: UserResponse }>('/v2', {\n    schema: {\n      body: zodToJsonSchema(CreateUserSchema),\n      response: {\n        201: zodToJsonSchema(UserResponseSchema),\n      },\n    },\n  }, async (request, reply) => {\n    const user = await createUser(request.body);\n    return reply.status(201).send(user);\n  });\n};\n```\n\n## Environment Validation\n\n```typescript\n// src/config/env.ts\nimport { z } from 'zod';\n\nconst EnvSchema = z.object({\n  NODE_ENV: z.enum(['development', 'production', 'test']).default('development'),\n  PORT: z.coerce.number().default(3000),\n  DATABASE_URL: z.string().url(),\n  JWT_SECRET: z.string().min(32),\n  CORS_ORIGIN: z.string().url().optional(),\n  LOG_LEVEL: z.enum(['debug', 'info', 'warn', 'error']).default('info'),\n});\n\nexport type Env = z.infer<typeof EnvSchema>;\n\nfunction validateEnv(): Env {\n  const result = EnvSchema.safeParse(process.env);\n\n  if (!result.success) {\n    console.error('Invalid environment variables:');\n    console.error(result.error.flatten().fieldErrors);\n    process.exit(1);\n  }\n\n  return result.data;\n}\n\nexport const env = validateEnv();\n```\n\n## Error Handling\n\n```typescript\nimport { z, ZodError } from 'zod';\n\nfunction parseOrThrow<T>(schema: z.ZodSchema<T>, data: unknown): T {\n  return schema.parse(data);\n}\n\nfunction parseOrNull<T>(schema: z.ZodSchema<T>, data: unknown): T | null {\n  const result = schema.safeParse(data);\n  return result.success ? result.data : null;\n}\n\n// Flatten errors for API response\nfunction formatZodError(error: ZodError): Record<string, string[]> {\n  return error.flatten().fieldErrors as Record<string, string[]>;\n}\n\n// Usage\ntry {\n  const user = parseOrThrow(UserSchema, requestBody);\n} catch (error) {\n  if (error instanceof ZodError) {\n    return { errors: formatZodError(error) };\n  }\n  throw error;\n}\n```\n\n## Composing Schemas\n\n```typescript\n// Base schemas\nconst AddressSchema = z.object({\n  street: z.string(),\n  city: z.string(),\n  country: z.string(),\n  postalCode: z.string(),\n});\n\nconst ContactSchema = z.object({\n  email: z.string().email(),\n  phone: z.string().optional(),\n});\n\n// Composed schema\nconst CustomerSchema = z.object({\n  id: z.string().uuid(),\n  name: z.string(),\n  contact: ContactSchema,\n  billingAddress: AddressSchema,\n  shippingAddress: AddressSchema.optional(),\n});\n```\n\n## Best Practices\n\n1. **Validate early** - At API boundaries\n2. **Use inference** - `z.infer<typeof Schema>`\n3. **Custom messages** - User-friendly error messages\n4. **Coerce types** - For query params\n5. **Safe parse** - Use `safeParse` for graceful errors\n6. **Compose schemas** - Build complex from simple\n\n## Notes\n\n- Zod is synchronous by default\n- Use `refine` for async validations\n- `zodToJsonSchema` for OpenAPI/Swagger\n- Schemas are immutable - methods return new schemas"
              }
            ]
          },
          {
            "name": "react-native",
            "description": "React Native with Expo SDK 52+, NativeWind, Gluestack-ui, and EAS Build/Update for mobile development",
            "source": "./tech-stacks/js/react-native",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add IvanTorresEdge/molcajete.ai",
              "/plugin install react-native@Molcajete.ai"
            ],
            "signals": {
              "stars": 0,
              "forks": 1,
              "pushed_at": "2026-01-06T21:16:55Z",
              "created_at": "2025-11-13T04:11:22Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/analyze",
                "description": "Analyze React Native bundle size",
                "path": "tech-stacks/js/react-native/commands/analyze.md",
                "frontmatter": {
                  "description": "Analyze React Native bundle size"
                },
                "content": "# Analyze Bundle Size\n\nAnalyze the bundle size and identify optimization opportunities.\n\nUse the Task tool to launch the **performance-optimizer** agent with instructions:\n\n1. Check for bundle analysis tools:\n   ```bash\n   npm list react-native-bundle-visualizer\n   ```\n\n2. If not installed:\n   ```bash\n   npm install --save-dev react-native-bundle-visualizer\n   ```\n\n3. Run bundle analysis:\n   ```bash\n   npx react-native-bundle-visualizer\n   ```\n\n4. Alternative: Use Metro bundler stats:\n   ```bash\n   npx expo export --dump-sourcemap\n   ```\n\n5. Analyze the bundle:\n   - Identify large dependencies\n   - Find duplicate packages\n   - Spot unused code\n\n6. Provide optimization recommendations:\n   - Large packages that could be replaced\n   - Code splitting opportunities\n   - Lazy loading suggestions\n   - Tree-shaking improvements\n\n7. Check for common issues:\n   - Moment.js (suggest date-fns or dayjs)\n   - Lodash (suggest individual imports or lodash-es)\n   - Large icon libraries (suggest selective imports)\n\n8. Report findings:\n   - Total bundle size\n   - Size by module\n   - Recommendations with estimated savings\n\nReference the **react-native-performance** skill."
              },
              {
                "name": "/build-all",
                "description": "Build iOS and Android apps using EAS Build",
                "path": "tech-stacks/js/react-native/commands/build-all.md",
                "frontmatter": {
                  "description": "Build iOS and Android apps using EAS Build"
                },
                "content": "# Build All Platforms\n\nBuild both iOS and Android apps using EAS Build service.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if EAS CLI is installed:\n   ```bash\n   eas --version\n   ```\n\n2. If not installed:\n   ```bash\n   npm install -g eas-cli\n   ```\n\n3. Login to Expo account:\n   ```bash\n   eas login\n   ```\n\n4. Configure EAS Build (if not already):\n   ```bash\n   eas build:configure\n   ```\n\n5. Ask user for build profile using AskUserQuestion:\n   - development (dev builds for both platforms)\n   - preview (internal testing builds)\n   - production (store-ready builds)\n\n6. Start builds for both platforms:\n   ```bash\n   eas build --platform all --profile {profile}\n   ```\n\n7. Monitor build progress:\n   - Provide build URLs for tracking\n   - Builds run in parallel on EAS\n   - Report status of each platform\n\n8. When complete:\n   - Provide iOS download link (IPA or Simulator build)\n   - Provide Android download link (APK or AAB)\n   - Show build artifacts summary\n\nReference the **eas-build-setup** skill."
              },
              {
                "name": "/build-android",
                "description": "Build Android app using EAS Build",
                "path": "tech-stacks/js/react-native/commands/build-android.md",
                "frontmatter": {
                  "description": "Build Android app using EAS Build"
                },
                "content": "# Build Android App\n\nBuild Android app using EAS Build service.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if EAS CLI is installed:\n   ```bash\n   eas --version\n   ```\n\n2. If not installed:\n   ```bash\n   npm install -g eas-cli\n   ```\n\n3. Login to Expo account:\n   ```bash\n   eas login\n   ```\n\n4. Configure EAS Build (if not already):\n   ```bash\n   eas build:configure\n   ```\n\n5. Ask user for build profile using AskUserQuestion:\n   - development (APK for testing)\n   - preview (APK for internal distribution)\n   - production (AAB for Play Store)\n\n6. Start Android build:\n   ```bash\n   eas build --platform android --profile {profile}\n   ```\n\n7. Monitor build progress:\n   - Provide build URL for tracking\n   - Wait for completion\n   - Provide download link when ready\n\n8. If production build:\n   - Generate AAB (Android App Bundle)\n   - Remind about signing keystore\n   - Guide through keystore setup if needed\n\nReference the **eas-build-setup** skill."
              },
              {
                "name": "/build-ios",
                "description": "Build iOS app using EAS Build",
                "path": "tech-stacks/js/react-native/commands/build-ios.md",
                "frontmatter": {
                  "description": "Build iOS app using EAS Build"
                },
                "content": "# Build iOS App\n\nBuild iOS app using EAS Build service.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if EAS CLI is installed:\n   ```bash\n   eas --version\n   ```\n\n2. If not installed:\n   ```bash\n   npm install -g eas-cli\n   ```\n\n3. Login to Expo account:\n   ```bash\n   eas login\n   ```\n\n4. Configure EAS Build (if not already):\n   ```bash\n   eas build:configure\n   ```\n\n5. Ask user for build profile using AskUserQuestion:\n   - development (development build with dev client)\n   - preview (ad-hoc distribution for testing)\n   - production (App Store ready)\n\n6. Start iOS build:\n   ```bash\n   eas build --platform ios --profile {profile}\n   ```\n\n7. Monitor build progress:\n   - Provide build URL for tracking\n   - Wait for completion\n   - Provide download link when ready\n\n8. If production build:\n   - Remind about App Store credentials\n   - Guide through signing certificate setup\n\nReference the **eas-build-setup** skill."
              },
              {
                "name": "/deploy-eas",
                "description": "Deploy to EAS and submit to app stores",
                "path": "tech-stacks/js/react-native/commands/deploy-eas.md",
                "frontmatter": {
                  "description": "Deploy to EAS and submit to app stores"
                },
                "content": "# Deploy to EAS\n\nDeploy app to EAS and optionally submit to App Store / Google Play.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Ensure EAS is configured:\n   ```bash\n   eas --version\n   eas whoami\n   ```\n\n2. Ask user for deployment options using AskUserQuestion:\n   - Platform (iOS, Android, both)\n   - Submit to store? (yes/no)\n   - Build profile (production recommended for store submission)\n\n3. If builds needed:\n   ```bash\n   eas build --platform {platform} --profile production\n   ```\n\n4. Wait for builds to complete\n\n5. If submitting to iOS App Store:\n   ```bash\n   eas submit --platform ios\n   ```\n   - Configure App Store Connect credentials if needed\n   - Select the build to submit\n   - Choose submission options\n\n6. If submitting to Google Play Store:\n   ```bash\n   eas submit --platform android\n   ```\n   - Configure Google Play credentials if needed\n   - Select the build to submit\n   - Choose track (internal, alpha, beta, production)\n\n7. Monitor submission status:\n   - Provide App Store Connect / Play Console links\n   - Report submission status\n   - Note any review requirements\n\n8. Provide next steps:\n   - App review timelines\n   - How to check status\n   - Rollout instructions\n\nReference the **eas-build-setup** skill."
              },
              {
                "name": "/expo-init",
                "description": "Initialize Expo project with React Native, TypeScript, Atomic Design, and modern tooling",
                "path": "tech-stacks/js/react-native/commands/expo-init.md",
                "frontmatter": {
                  "description": "Initialize Expo project with React Native, TypeScript, Atomic Design, and modern tooling"
                },
                "content": "# Initialize Expo Project\n\nInitialize a new React Native app with Expo, TypeScript strict mode, NativeWind, Atomic Design component structure, and modern tooling.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Ask user for project details using AskUserQuestion tool:\n   - Project name\n   - Include Gluestack-ui? (yes/no)\n   - State management (Zustand, Jotai, none)\n   - Package manager (npm, pnpm, yarn)\n   - Initialize EAS? (yes/no)\n\n1.5. Check PRD configuration for component organization preference:\n\n   Look for `componentOrganization` setting in:\n   - `.molcajete/prd/tech-stack.md` (YAML frontmatter)\n   - `.molcajete/prd/tech-stack.yaml`\n\n   **Valid values:**\n   - `atomic` (default) - Atomic Design pattern with atoms/, molecules/, organisms/, templates/\n   - `flat` - Simple flat components/ directory\n   - `feature-based` - Feature modules with shared components\n\n   ```yaml\n   # Example .molcajete/prd/tech-stack.yaml\n   techStack:\n     framework: react-native-expo\n     componentOrganization: atomic  # or 'flat' or 'feature-based'\n   ```\n\n   If no config found or value is `atomic`, proceed with Atomic Design (Step 3).\n   If `flat`, use flat structure (Step 3a).\n   If `feature-based`, use feature-based structure (Step 3b).\n\n2. Create project using Expo:\n   ```bash\n   npx create-expo-app@latest {project-name}\n   cd {project-name}\n   ```\n\n3. Create project structure with Atomic Design pattern:\n   ```\n   project/\n   â”œâ”€â”€ app/\n   â”‚   â”œâ”€â”€ (auth)/\n   â”‚   â”‚   â”œâ”€â”€ login.tsx\n   â”‚   â”‚   â””â”€â”€ _layout.tsx\n   â”‚   â”œâ”€â”€ (tabs)/\n   â”‚   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â”‚   â”œâ”€â”€ index.tsx\n   â”‚   â”‚   â””â”€â”€ profile.tsx\n   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â””â”€â”€ +not-found.tsx\n   â”œâ”€â”€ components/\n   â”‚   â”œâ”€â”€ atoms/\n   â”‚   â”‚   â”œâ”€â”€ Button/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx\n   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.stories.tsx\n   â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts\n   â”‚   â”‚   â”‚   â””â”€â”€ __tests__/\n   â”‚   â”‚   â”‚       â””â”€â”€ Button.test.tsx\n   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â”œâ”€â”€ molecules/\n   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â”œâ”€â”€ organisms/\n   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â”œâ”€â”€ templates/\n   â”‚   â”‚   â”œâ”€â”€ ScreenLayout/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ ScreenLayout.tsx\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â””â”€â”€ index.ts          # Barrel export\n   â”‚   â””â”€â”€ index.ts              # Main barrel export\n   â”œâ”€â”€ hooks/\n   â”‚   â””â”€â”€ useAuth.ts\n   â”œâ”€â”€ store/           # If state management selected\n   â”‚   â””â”€â”€ authStore.ts\n   â”œâ”€â”€ lib/\n   â”‚   â”œâ”€â”€ api.ts\n   â”‚   â””â”€â”€ utils.ts\n   â”œâ”€â”€ constants/\n   â”‚   â”œâ”€â”€ Colors.ts\n   â”‚   â””â”€â”€ Sizes.ts\n   â”œâ”€â”€ assets/\n   â”‚   â”œâ”€â”€ images/\n   â”‚   â””â”€â”€ fonts/\n   â”œâ”€â”€ .storybook/\n   â”‚   â”œâ”€â”€ main.ts\n   â”‚   â””â”€â”€ preview.ts\n   â”œâ”€â”€ __tests__/\n   â”‚   â”œâ”€â”€ components/\n   â”‚   â””â”€â”€ e2e/\n   â”œâ”€â”€ app.json\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â”œâ”€â”€ tailwind.config.js\n   â””â”€â”€ package.json\n   ```\n\n4. Create barrel exports for each atomic level:\n\n   **components/atoms/index.ts:**\n   ```typescript\n   export { Button } from './Button';\n   export type { ButtonProps } from './Button/Button';\n   ```\n\n   **components/molecules/index.ts:**\n   ```typescript\n   // Export molecules as they are created\n   ```\n\n   **components/organisms/index.ts:**\n   ```typescript\n   // Export organisms as they are created\n   ```\n\n   **components/templates/index.ts:**\n   ```typescript\n   export { ScreenLayout } from './ScreenLayout';\n   ```\n\n   **components/index.ts:**\n   ```typescript\n   export * from './atoms';\n   export * from './molecules';\n   export * from './organisms';\n   export * from './templates';\n   ```\n\n3a. **ALTERNATIVE: Flat Structure** (if `componentOrganization: flat`):\n   ```\n   project/\n   â”œâ”€â”€ app/\n   â”‚   â”œâ”€â”€ (auth)/\n   â”‚   â”‚   â”œâ”€â”€ login.tsx\n   â”‚   â”‚   â””â”€â”€ _layout.tsx\n   â”‚   â”œâ”€â”€ (tabs)/\n   â”‚   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â”‚   â”œâ”€â”€ index.tsx\n   â”‚   â”‚   â””â”€â”€ profile.tsx\n   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â””â”€â”€ +not-found.tsx\n   â”œâ”€â”€ components/\n   â”‚   â”œâ”€â”€ Button/\n   â”‚   â”‚   â”œâ”€â”€ Button.tsx\n   â”‚   â”‚   â”œâ”€â”€ index.ts\n   â”‚   â”‚   â””â”€â”€ __tests__/\n   â”‚   â”‚       â””â”€â”€ Button.test.tsx\n   â”‚   â”œâ”€â”€ Input/\n   â”‚   â”œâ”€â”€ Header/\n   â”‚   â”œâ”€â”€ LoginForm/\n   â”‚   â””â”€â”€ index.ts              # Barrel export\n   â”œâ”€â”€ hooks/\n   â”œâ”€â”€ store/\n   â”œâ”€â”€ lib/\n   â”œâ”€â”€ constants/\n   â”œâ”€â”€ assets/\n   â”œâ”€â”€ app.json\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â”œâ”€â”€ tailwind.config.js\n   â””â”€â”€ package.json\n   ```\n\n   **Note:** Flat structure does not include Storybook setup by default. Skip Step 13 (Storybook).\n\n3b. **ALTERNATIVE: Feature-Based Structure** (if `componentOrganization: feature-based`):\n   ```\n   project/\n   â”œâ”€â”€ app/\n   â”‚   â”œâ”€â”€ (auth)/\n   â”‚   â”‚   â”œâ”€â”€ login.tsx\n   â”‚   â”‚   â””â”€â”€ _layout.tsx\n   â”‚   â”œâ”€â”€ (tabs)/\n   â”‚   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â”‚   â”œâ”€â”€ index.tsx\n   â”‚   â”‚   â””â”€â”€ profile.tsx\n   â”‚   â”œâ”€â”€ _layout.tsx\n   â”‚   â””â”€â”€ +not-found.tsx\n   â”œâ”€â”€ features/\n   â”‚   â”œâ”€â”€ auth/\n   â”‚   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm/\n   â”‚   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â”œâ”€â”€ profile/\n   â”‚   â”‚   â”œâ”€â”€ components/\n   â”‚   â”‚   â”œâ”€â”€ hooks/\n   â”‚   â”‚   â””â”€â”€ index.ts\n   â”‚   â””â”€â”€ index.ts\n   â”œâ”€â”€ shared/\n   â”‚   â””â”€â”€ components/\n   â”‚       â”œâ”€â”€ Button/\n   â”‚       â”œâ”€â”€ Input/\n   â”‚       â””â”€â”€ index.ts\n   â”œâ”€â”€ hooks/\n   â”œâ”€â”€ lib/\n   â”œâ”€â”€ constants/\n   â”œâ”€â”€ assets/\n   â”œâ”€â”€ app.json\n   â”œâ”€â”€ tsconfig.json\n   â”œâ”€â”€ biome.json\n   â”œâ”€â”€ tailwind.config.js\n   â””â”€â”€ package.json\n   ```\n\n   **Note:** Feature-based structure does not include Storybook setup by default. Skip Step 13 (Storybook).\n\n5. Update `tsconfig.json` with strict configuration:\n   ```json\n   {\n     \"extends\": \"expo/tsconfig.base\",\n     \"compilerOptions\": {\n       \"strict\": true,\n       \"noImplicitAny\": true,\n       \"strictNullChecks\": true,\n       \"noUncheckedIndexedAccess\": true,\n       \"noUnusedLocals\": true,\n       \"noUnusedParameters\": true,\n       \"noImplicitReturns\": true,\n       \"baseUrl\": \".\",\n       \"paths\": {\n         \"@/*\": [\"./*\"]\n       }\n     }\n   }\n   ```\n\n6. Install NativeWind:\n   ```bash\n   npx expo install nativewind\n   npm install --dev tailwindcss\n   npx tailwindcss init\n   ```\n\n7. Create `tailwind.config.js`:\n   ```javascript\n   /** @type {import('tailwindcss').Config} */\n   module.exports = {\n     content: [\n       \"./app/**/*.{js,jsx,ts,tsx}\",\n       \"./components/**/*.{js,jsx,ts,tsx}\"\n     ],\n     presets: [require(\"nativewind/preset\")],\n     theme: {\n       extend: {},\n     },\n     plugins: [],\n   }\n   ```\n\n8. Update `babel.config.js`:\n   ```javascript\n   module.exports = function(api) {\n     api.cache(true);\n     return {\n       presets: ['babel-preset-expo'],\n       plugins: [\"nativewind/babel\"],\n     };\n   };\n   ```\n\n9. Create `biome.json` with strict rules (reference **biome-setup** skill from js/common)\n\n10. Create `jest.config.js`:\n   ```javascript\n   module.exports = {\n     preset: 'jest-expo',\n     transformIgnorePatterns: [\n       'node_modules/(?!((jest-)?react-native|@react-native(-community)?)|expo(nent)?|@expo(nent)?/.*|@expo-google-fonts/.*|react-navigation|@react-navigation/.*|@unimodules/.*|unimodules|sentry-expo|native-base|react-native-svg)'\n     ],\n     collectCoverageFrom: [\n       '**/*.{ts,tsx}',\n       '!**/coverage/**',\n       '!**/node_modules/**',\n       '!**/babel.config.js',\n       '!**/jest.setup.js'\n     ],\n     coverageThreshold: {\n       global: {\n         lines: 80,\n         functions: 80,\n         branches: 80,\n         statements: 80,\n       },\n     },\n   };\n   ```\n\n11. Update `package.json` scripts:\n    ```json\n    {\n      \"scripts\": {\n        \"start\": \"expo start\",\n        \"android\": \"expo start --android\",\n        \"ios\": \"expo start --ios\",\n        \"web\": \"expo start --web\",\n        \"type-check\": \"tsc --noEmit\",\n        \"lint\": \"biome check .\",\n        \"lint:fix\": \"biome check --write .\",\n        \"format\": \"biome format --write .\",\n        \"test\": \"jest\",\n        \"test:watch\": \"jest --watch\",\n        \"test:coverage\": \"jest --coverage\",\n        \"validate\": \"npm run type-check && npm run lint && npm test\",\n        \"storybook\": \"expo start --dev-client\",\n        \"storybook:ios\": \"expo start --dev-client --ios\",\n        \"storybook:android\": \"expo start --dev-client --android\"\n      }\n    }\n    ```\n\n12. Install dependencies:\n    - Core: expo, react-native, typescript\n    - Testing: jest-expo, @testing-library/react-native\n    - Biome\n    - Selected state management\n    - TanStack Query, React Hook Form, Zod\n\n13. Set up Storybook React Native (Atomic Design only - skip for flat/feature-based):\n\n    Install Storybook:\n    ```bash\n    npx -p @storybook/cli sb init --type react_native\n    npm install -D @storybook/addon-ondevice-controls @storybook/addon-ondevice-actions\n    ```\n\n    Create `.storybook/main.ts`:\n    ```typescript\n    import type { StorybookConfig } from '@storybook/react-native';\n\n    const config: StorybookConfig = {\n      stories: [\n        '../components/atoms/**/*.stories.@(ts|tsx)',\n        '../components/molecules/**/*.stories.@(ts|tsx)',\n        '../components/organisms/**/*.stories.@(ts|tsx)',\n      ],\n      addons: [\n        '@storybook/addon-ondevice-controls',\n        '@storybook/addon-ondevice-actions',\n      ],\n    };\n\n    export default config;\n    ```\n\n    Create `.storybook/preview.ts`:\n    ```typescript\n    import type { Preview } from '@storybook/react-native';\n\n    const preview: Preview = {\n      parameters: {\n        controls: {\n          matchers: {\n            color: /(background|color)$/i,\n            date: /Date$/i,\n          },\n        },\n      },\n    };\n\n    export default preview;\n    ```\n\n    **Note:** React Native Storybook runs on-device rather than in a web browser. Use the on-device addons for controls and actions.\n\n14. If Gluestack-ui selected:\n    ```bash\n    npx gluestack-ui init\n    ```\n\n15. If EAS selected:\n    ```bash\n    npm install -g eas-cli\n    eas login\n    eas build:configure\n    ```\n\n16. Create example Button atom component with accessibility:\n\n    **components/atoms/Button/Button.tsx:**\n    ```typescript\n    import { Pressable, Text, ActivityIndicator, StyleSheet } from 'react-native';\n\n    export interface ButtonProps {\n      variant: 'primary' | 'secondary' | 'danger';\n      size?: 'sm' | 'md' | 'lg';\n      loading?: boolean;\n      disabled?: boolean;\n      onPress?: () => void;\n      children: string;\n      accessibilityLabel?: string;\n    }\n\n    export function Button({\n      variant,\n      size = 'md',\n      loading,\n      disabled,\n      onPress,\n      children,\n      accessibilityLabel,\n    }: ButtonProps): React.ReactElement {\n      const isDisabled = disabled || loading;\n\n      return (\n        <Pressable\n          style={({ pressed }) => [\n            styles.base,\n            styles[variant],\n            styles[size],\n            isDisabled && styles.disabled,\n            pressed && !isDisabled && styles.pressed,\n          ]}\n          onPress={onPress}\n          disabled={isDisabled}\n          accessibilityLabel={accessibilityLabel || children}\n          accessibilityRole=\"button\"\n          accessibilityState={{ disabled: isDisabled }}\n        >\n          {loading && (\n            <ActivityIndicator\n              color={variant === 'secondary' ? '#374151' : '#ffffff'}\n              style={styles.spinner}\n            />\n          )}\n          <Text style={[styles.text, styles[`${variant}Text`]]}>\n            {children}\n          </Text>\n        </Pressable>\n      );\n    }\n\n    const styles = StyleSheet.create({\n      base: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        borderRadius: 8,\n        minHeight: 44, // Minimum touch target (Apple HIG)\n        minWidth: 44,\n      },\n      primary: {\n        backgroundColor: '#2563eb',\n      },\n      secondary: {\n        backgroundColor: '#e5e7eb',\n      },\n      danger: {\n        backgroundColor: '#dc2626',\n      },\n      sm: {\n        paddingHorizontal: 12,\n        paddingVertical: 6,\n      },\n      md: {\n        paddingHorizontal: 16,\n        paddingVertical: 10,\n      },\n      lg: {\n        paddingHorizontal: 24,\n        paddingVertical: 14,\n      },\n      disabled: {\n        opacity: 0.5,\n      },\n      pressed: {\n        opacity: 0.8,\n      },\n      spinner: {\n        marginRight: 8,\n      },\n      text: {\n        fontWeight: '600',\n        textAlign: 'center',\n      },\n      primaryText: {\n        color: '#ffffff',\n      },\n      secondaryText: {\n        color: '#1f2937',\n      },\n      dangerText: {\n        color: '#ffffff',\n      },\n    });\n    ```\n\n    **components/atoms/Button/Button.stories.tsx:**\n    ```typescript\n    import type { Meta, StoryObj } from '@storybook/react-native';\n    import { Button } from './Button';\n\n    const meta: Meta<typeof Button> = {\n      title: 'Atoms/Button',\n      component: Button,\n      argTypes: {\n        variant: {\n          control: 'select',\n          options: ['primary', 'secondary', 'danger'],\n        },\n        size: {\n          control: 'select',\n          options: ['sm', 'md', 'lg'],\n        },\n        loading: { control: 'boolean' },\n        disabled: { control: 'boolean' },\n      },\n    };\n\n    export default meta;\n    type Story = StoryObj<typeof Button>;\n\n    export const Primary: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Primary Button',\n      },\n    };\n\n    export const Secondary: Story = {\n      args: {\n        variant: 'secondary',\n        children: 'Secondary Button',\n      },\n    };\n\n    export const Danger: Story = {\n      args: {\n        variant: 'danger',\n        children: 'Delete',\n      },\n    };\n\n    export const Loading: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Saving...',\n        loading: true,\n      },\n    };\n\n    export const Disabled: Story = {\n      args: {\n        variant: 'primary',\n        children: 'Disabled Button',\n        disabled: true,\n      },\n    };\n    ```\n\n    **components/atoms/Button/index.ts:**\n    ```typescript\n    export { Button } from './Button';\n    export type { ButtonProps } from './Button';\n    ```\n\n    **components/atoms/Button/__tests__/Button.test.tsx:**\n    ```typescript\n    import { render, screen, fireEvent } from '@testing-library/react-native';\n    import { Button } from '../Button';\n\n    describe('Button', () => {\n      it('renders children correctly', () => {\n        render(<Button variant=\"primary\" onPress={jest.fn()}>Click me</Button>);\n        expect(screen.getByText('Click me')).toBeTruthy();\n      });\n\n      it('calls onPress when pressed', () => {\n        const handlePress = jest.fn();\n        render(<Button variant=\"primary\" onPress={handlePress}>Click</Button>);\n\n        fireEvent.press(screen.getByRole('button'));\n\n        expect(handlePress).toHaveBeenCalledTimes(1);\n      });\n\n      it('does not call onPress when disabled', () => {\n        const handlePress = jest.fn();\n        render(<Button variant=\"primary\" onPress={handlePress} disabled>Click</Button>);\n\n        fireEvent.press(screen.getByRole('button'));\n\n        expect(handlePress).not.toHaveBeenCalled();\n      });\n\n      it('shows loading indicator when loading', () => {\n        render(<Button variant=\"primary\" loading>Loading</Button>);\n        expect(screen.getByRole('button')).toHaveAccessibilityState({ disabled: true });\n      });\n\n      it('has correct accessibility properties', () => {\n        render(\n          <Button variant=\"primary\" accessibilityLabel=\"Submit form\">Submit</Button>\n        );\n        expect(screen.getByLabelText('Submit form')).toBeTruthy();\n      });\n\n      it('has minimum touch target size', () => {\n        // Button should have minHeight and minWidth of 44 for accessibility\n        const { getByRole } = render(<Button variant=\"primary\">A</Button>);\n        const button = getByRole('button');\n        // Style assertions would be checked visually or with snapshot testing\n        expect(button).toBeTruthy();\n      });\n    });\n    ```\n\n    **Mobile-Specific Requirements (documented):**\n    - Minimum 44x44pt touch targets (Apple HIG, Material Design)\n    - `accessibilityLabel` for screen readers\n    - `accessibilityRole=\"button\"` for semantic meaning\n    - `accessibilityState={{ disabled }}` for state announcement\n    - Pressed state feedback via opacity change\n\n17. Create ScreenLayout template component\n\n18. Initialize git repository\n\n19. Run validation:\n    - `npm run type-check`\n    - `npm run lint`\n    - `npm test`\n\n20. Display next steps to user\n\n**Quality Requirements:**\n- All TypeScript strict flags enabled\n- Zero TypeScript errors or warnings\n- Zero linter warnings\n- NO `any` types allowed\n- Tests pass with 80%+ coverage\n\nReference the **expo-configuration**, **nativewind-patterns**, and **expo-router-patterns** skills."
              },
              {
                "name": "/preview",
                "description": "Preview React Native app with Expo Go",
                "path": "tech-stacks/js/react-native/commands/preview.md",
                "frontmatter": {
                  "description": "Preview React Native app with Expo Go"
                },
                "content": "# Preview with Expo Go\n\nStart the development server and preview the app on a device or simulator.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if Expo CLI is available:\n   ```bash\n   npx expo --version\n   ```\n\n2. Start the development server:\n   ```bash\n   npx expo start\n   ```\n\n3. Ask user for preview target using AskUserQuestion:\n   - iOS Simulator\n   - Android Emulator\n   - Expo Go (scan QR code)\n   - Web browser\n\n4. Launch on selected target:\n   ```bash\n   # iOS Simulator\n   npx expo start --ios\n\n   # Android Emulator\n   npx expo start --android\n\n   # Web\n   npx expo start --web\n   ```\n\n5. If using Expo Go:\n   - Display QR code in terminal\n   - Instruct user to scan with Expo Go app\n\n6. Monitor for errors and provide feedback\n\nReference the **expo-configuration** skill."
              },
              {
                "name": "/refactor-atomic-design",
                "description": "Refactor existing React Native (Expo) project to Atomic Design component structure",
                "path": "tech-stacks/js/react-native/commands/refactor-atomic-design.md",
                "frontmatter": {
                  "description": "Refactor existing React Native (Expo) project to Atomic Design component structure",
                  "agent": "code-analyzer"
                },
                "content": "# Refactor Atomic Design Command\n\nRefactor existing React Native (Expo) project to Atomic Design component structure with analysis, plan approval, and automated execution.\n\n## Parameters\n\n| Parameter | Type | Required | Default | Description |\n|-----------|------|----------|---------|-------------|\n| `--target` | string | No | components directory | Specific directory or component to refactor |\n| `--dry-run` | boolean | No | false | Show plan without executing |\n| `--skip-stories` | boolean | No | false | Skip Storybook story generation |\n| `--skip-tests` | boolean | No | false | Skip test file updates |\n\n## Workflow\n\n### Phase 1: Initialization\n\n1. Detect Expo project:\n   - Check for `app.json` or `app.config.js` -> Expo project\n   - Verify Expo Router in package.json\n\n2. Identify component directory:\n   - `components/` for Expo projects (no `src/` prefix)\n\n3. Verify or create atomic design directories:\n   ```\n   components/\n   â”œâ”€â”€ atoms/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â”œâ”€â”€ molecules/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â”œâ”€â”€ organisms/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â”œâ”€â”€ templates/\n   â”‚   â”œâ”€â”€ .gitkeep\n   â”‚   â””â”€â”€ index.ts\n   â””â”€â”€ index.ts\n   ```\n\n4. Create barrel exports if missing:\n\n   **Level barrel export template:**\n   ```typescript\n   // components/atoms/index.ts\n   // Barrel export for atoms\n   // Components will be added here as they are created or moved\n   ```\n\n   **Main barrel export template:**\n   ```typescript\n   // components/index.ts\n   export * from './atoms';\n   export * from './molecules';\n   export * from './organisms';\n   export * from './templates';\n   ```\n\n### Phase 2: Analysis\n\nInvoke the **code-analyzer** agent with reference to **atomic-design-mobile** skill to:\n\n1. Scan component directories using Glob patterns:\n   - `components/**/*.tsx` (excluding tests and stories)\n   - Exclude: `**/*.test.tsx`, `**/*.spec.tsx`, `**/*.stories.tsx`\n   - Exclude: Components already in atomic directories (`atoms/`, `molecules/`, `organisms/`, `templates/`)\n   - Exclude: `app/**` (Expo Router screens)\n\n2. Analyze each component:\n   - Read component code\n   - Identify imports and dependencies\n   - Detect state usage (useState, useEffect, stores)\n   - Check for data fetching (useQuery, fetch)\n   - **Detect accessibility props** (accessibilityLabel, accessibilityRole, accessibilityState)\n   - **Detect platform-specific code** (Platform.OS, Platform.select)\n\n3. Classify components using atomic-design-mobile skill criteria:\n   - **Atom**: No custom imports, stateless, 44pt touch targets, accessibility props\n   - **Molecule**: Imports 2+ atoms, single purpose, keyboard handling\n   - **Organism**: Larger section, may have business logic, safe area handling\n   - **Template**: Accepts children, named with \"Layout\" suffix, safe areas, keyboard avoidance\n   - **Screen**: Located in app/ directory, connects to data sources (NOT moved)\n\n4. Assign confidence levels:\n   - **High**: Component clearly matches one level's criteria with accessibility\n   - **Medium**: Component partially matches multiple levels\n   - **Low**: Component has ambiguous characteristics or missing accessibility\n\n5. Detect circular dependencies and generate warnings\n\n### Phase 3: Plan Generation\n\nGenerate RefactoringPlan with:\n- Project metadata (name, framework: expo, component directory)\n- Component migrations (source path, destination path, level, confidence, reason)\n- Affected files (imports to update)\n- Summary statistics\n- Warnings (including accessibility warnings)\n\n### Phase 4: User Approval\n\nPresent plan using AskUserQuestion with options:\n\n1. **Approve all and execute** - Proceed with full refactoring\n2. **Review and modify classifications** - Change component levels before execution\n3. **Select specific components** - Partial refactoring\n4. **Cancel** - Exit without changes\n\n### Phase 5: Refactoring Execution\n\n1. Move component directories to atomic level folders:\n   - `components/Button/` -> `components/atoms/Button/`\n   - Include all files: `*.tsx`, `index.ts`, `__tests__/*`, `*.stories.tsx`\n\n2. Update all import statements across codebase:\n   - `from '@/components/Button'` -> `from '@/components/atoms'`\n   - `from '../Button'` -> `from '@/components/atoms'`\n\n3. Create/update barrel exports at each level:\n   ```typescript\n   // components/atoms/index.ts\n   export { Button } from './Button';\n   export type { ButtonProps } from './Button';\n   ```\n\n4. Generate Storybook stories (if not `--skip-stories`):\n   - Only for atoms, molecules, organisms (NOT templates)\n   - Use React Native Storybook format (@storybook/react-native)\n   - Use title hierarchy: `'Atoms/Button'`, `'Molecules/FormField'`\n\n5. Update test file imports (if not `--skip-tests`)\n\n### Phase 6: Verification\n\nExecute **post-change-verification skill** protocol:\n\n1. Detect package manager (check lock files: pnpm-lock.yaml, yarn.lock, package-lock.json, bun.lockb)\n\n2. Run format:\n   ```bash\n   <pkg> run format\n   ```\n\n3. Run lint:\n   ```bash\n   <pkg> run lint\n   ```\n\n4. Run type-check:\n   ```bash\n   <pkg> run type-check   # or npx tsc --noEmit\n   ```\n\n5. Run tests:\n   ```bash\n   <pkg> test\n   ```\n\n6. Display completion summary with verification results:\n   ```\n   === REFACTORING COMPLETE ===\n\n   Files changed: 35\n   Components moved: 18\n   Stories created: 14\n   Barrel exports updated: 5\n\n   === POST-CHANGE VERIFICATION ===\n\n   Format:     PASSED\n   Lint:       PASSED (0 errors, 0 warnings)\n   Type-check: PASSED (0 errors)\n   Tests:      PASSED (18/18)\n\n   Pre-existing issues: NONE\n\n   === TASK COMPLETE ===\n\n   Next steps:\n   1. Run Storybook on device to verify stories\n   2. Review the changes in your git diff\n   3. Commit when satisfied\n\n   To undo: git checkout -- components/\n   ```\n\n## Directory Structure\n\n### Before Refactoring\n\n```\ncomponents/\n  Button/\n    Button.tsx\n    index.ts\n  Input/\n    Input.tsx\n    index.ts\n  SearchBar/\n    SearchBar.tsx\n    index.ts\n  Header/\n    Header.tsx\n    index.ts\n  ScreenLayout/\n    ScreenLayout.tsx\n    index.ts\n```\n\n### After Refactoring\n\n```\ncomponents/\n  atoms/\n    Button/\n      Button.tsx\n      Button.stories.tsx\n      index.ts\n    Input/\n      Input.tsx\n      Input.stories.tsx\n      index.ts\n    index.ts\n  molecules/\n    SearchBar/\n      SearchBar.tsx\n      SearchBar.stories.tsx\n      index.ts\n    index.ts\n  organisms/\n    Header/\n      Header.tsx\n      Header.stories.tsx\n      index.ts\n    index.ts\n  templates/\n    ScreenLayout/\n      ScreenLayout.tsx\n      index.ts\n    index.ts\n  index.ts\n```\n\n## Examples\n\n### Full Refactoring\n\n```bash\n/react-native:refactor-atomic-design\n```\n\n### Refactor Specific Directory\n\n```bash\n/react-native:refactor-atomic-design --target components/ui\n```\n\n### Skip Story Generation\n\n```bash\n/react-native:refactor-atomic-design --skip-stories\n```\n\n### Dry Run (Show Plan Only)\n\n```bash\n/react-native:refactor-atomic-design --dry-run\n```\n\n## Skills Referenced\n\n- **atomic-design-mobile** - Classification criteria with mobile accessibility, touch targets, Storybook templates, barrel export patterns\n- **post-change-verification** - Mandatory verification protocol after code changes (used in Phase 6)\n\n## Notes\n\n- Expo projects do NOT use a `src/` directory\n- Recommend committing or stashing changes before running\n- Previously refactored components (already in atomic directories) are skipped\n- Running command twice produces same result (idempotent)\n- Screens in `app/` directory remain there (Expo Router convention)\n- Stories use @storybook/react-native format for on-device viewing"
              },
              {
                "name": "/test-component",
                "description": "Test React Native components with Jest and Testing Library",
                "path": "tech-stacks/js/react-native/commands/test-component.md",
                "frontmatter": {
                  "description": "Test React Native components with Jest and Testing Library"
                },
                "content": "# Test React Native Components\n\nRun unit tests for React Native components using Jest and React Native Testing Library.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if testing dependencies are installed:\n   ```bash\n   npm list jest-expo @testing-library/react-native\n   ```\n\n2. If not installed:\n   ```bash\n   npm install --save-dev jest-expo @testing-library/react-native @testing-library/jest-native\n   ```\n\n3. Ask user for test scope using AskUserQuestion:\n   - Run all tests\n   - Run specific component tests\n   - Run with coverage\n   - Run in watch mode\n\n4. Run tests based on selection:\n   ```bash\n   # All tests\n   npm test\n\n   # Specific component\n   npm test -- Button\n\n   # With coverage\n   npm run test:coverage\n\n   # Watch mode\n   npm run test:watch\n   ```\n\n5. Analyze test results:\n   - Report passing/failing tests\n   - Show coverage metrics\n   - Identify uncovered code paths\n\n6. If tests fail:\n   - Analyze failure reasons\n   - Suggest fixes\n\nReference the **component-testing-mobile** skill."
              },
              {
                "name": "/test-e2e",
                "description": "Run Maestro E2E tests for React Native app",
                "path": "tech-stacks/js/react-native/commands/test-e2e.md",
                "frontmatter": {
                  "description": "Run Maestro E2E tests for React Native app"
                },
                "content": "# Run Maestro E2E Tests\n\nRun end-to-end tests using Maestro.\n\nUse the Task tool to launch the **e2e-tester** agent with instructions:\n\n1. Check if Maestro is installed:\n   ```bash\n   maestro -v\n   ```\n\n2. If not installed, guide user to install:\n   ```bash\n   # macOS/Linux\n   curl -Ls \"https://get.maestro.mobile.dev\" | bash\n\n   # Windows\n   # Download from https://maestro.mobile.dev\n   ```\n\n3. Find Maestro test files:\n   ```bash\n   find __tests__/e2e -name \"*.yaml\"\n   ```\n\n4. Ask user for test options using AskUserQuestion:\n   - Platform (iOS, Android)\n   - Run all tests or specific flow\n   - Generate report\n\n5. Run tests on selected platform:\n   ```bash\n   # iOS Simulator\n   maestro test __tests__/e2e/\n\n   # Android Emulator\n   maestro test __tests__/e2e/ --platform android\n   ```\n\n6. Generate report if requested:\n   ```bash\n   maestro test __tests__/e2e/ --format junit --output test-results/\n   ```\n\n7. Analyze results and provide feedback\n\nReference the **maestro-testing** skill."
              },
              {
                "name": "/update-ota",
                "description": "Push over-the-air (OTA) update using EAS Update",
                "path": "tech-stacks/js/react-native/commands/update-ota.md",
                "frontmatter": {
                  "description": "Push over-the-air (OTA) update using EAS Update"
                },
                "content": "# Push OTA Update\n\nPush over-the-air update to published apps using EAS Update.\n\nUse the Task tool to launch the **component-builder** agent with instructions:\n\n1. Check if EAS Update is configured in `app.json`:\n   ```json\n   {\n     \"expo\": {\n       \"updates\": {\n         \"url\": \"https://u.expo.dev/[your-project-id]\"\n       },\n       \"runtimeVersion\": {\n         \"policy\": \"appVersion\"\n       }\n     }\n   }\n   ```\n\n2. Verify EAS Update is set up:\n   ```bash\n   eas update:configure\n   ```\n\n3. Ask user for update details using AskUserQuestion:\n   - Branch (production, staging, preview)\n   - Message describing the update\n   - Channel (if using multiple channels)\n\n4. Run pre-update checks:\n   ```bash\n   npm run type-check\n   npm run lint\n   npm test\n   ```\n\n5. Publish the update:\n   ```bash\n   eas update --branch {branch} --message \"{message}\"\n   ```\n\n6. Monitor update status:\n   - Provide update ID\n   - Show update URL\n   - Confirm deployment\n\n7. Verify update is live:\n   - Check EAS dashboard\n   - Test on device (may need app restart)\n\n8. Provide rollback instructions if needed:\n   ```bash\n   eas update:rollback --branch {branch}\n   ```\n\n**Important Notes:**\n- OTA updates only work for JavaScript/TypeScript changes\n- Native code changes require a new build\n- Users receive updates on next app launch\n\nReference the **eas-update-setup** skill."
              }
            ],
            "skills": [
              {
                "name": "accessibility-mobile",
                "description": "React Native accessibility patterns for iOS and Android. Use when implementing a11y features.",
                "path": "tech-stacks/js/react-native/skills/accessibility-mobile/SKILL.md",
                "frontmatter": {
                  "name": "accessibility-mobile",
                  "description": "React Native accessibility patterns for iOS and Android. Use when implementing a11y features."
                },
                "content": "# Accessibility Mobile Skill\n\nThis skill covers accessibility (a11y) best practices for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Building accessible components\n- Implementing screen reader support\n- Adding accessibility labels\n- Testing accessibility\n\n## Core Principle\n\n**INCLUSIVE BY DEFAULT** - Accessibility is not optional. Build for all users.\n\n## Basic Accessibility Props\n\n```typescript\nimport { TouchableOpacity, Text, View } from 'react-native';\n\n// Accessible button\n<TouchableOpacity\n  accessible={true}\n  accessibilityRole=\"button\"\n  accessibilityLabel=\"Submit form\"\n  accessibilityHint=\"Double tap to submit your information\"\n  onPress={handleSubmit}\n>\n  <Text>Submit</Text>\n</TouchableOpacity>\n\n// Accessible image\n<Image\n  source={require('./profile.png')}\n  accessible={true}\n  accessibilityLabel=\"Profile picture of John Doe\"\n/>\n\n// Decorative image (hidden from screen readers)\n<Image\n  source={require('./decoration.png')}\n  accessible={false}\n  accessibilityElementsHidden={true}\n  importantForAccessibility=\"no-hide-descendants\"\n/>\n```\n\n## Accessibility Roles\n\n```typescript\n// Common roles\n<TouchableOpacity accessibilityRole=\"button\">\n<TouchableOpacity accessibilityRole=\"link\">\n<TextInput accessibilityRole=\"search\">\n<Switch accessibilityRole=\"switch\">\n<Image accessibilityRole=\"image\">\n<Text accessibilityRole=\"header\">\n<Text accessibilityRole=\"text\">\n<View accessibilityRole=\"alert\">\n<View accessibilityRole=\"checkbox\">\n<View accessibilityRole=\"radio\">\n<View accessibilityRole=\"tab\">\n<View accessibilityRole=\"tablist\">\n<View accessibilityRole=\"progressbar\">\n<View accessibilityRole=\"slider\">\n```\n\n## Accessible Forms\n\n```typescript\nfunction AccessibleForm(): React.ReactElement {\n  const [email, setEmail] = useState('');\n  const [emailError, setEmailError] = useState('');\n\n  return (\n    <View>\n      {/* Label association */}\n      <Text nativeID=\"emailLabel\">Email Address</Text>\n      <TextInput\n        value={email}\n        onChangeText={setEmail}\n        accessibilityLabel=\"Email Address\"\n        accessibilityLabelledBy=\"emailLabel\"\n        accessibilityRole=\"none\"\n        keyboardType=\"email-address\"\n        autoComplete=\"email\"\n        textContentType=\"emailAddress\"\n        // Error state\n        accessibilityInvalid={!!emailError}\n        accessibilityErrorMessage={emailError}\n      />\n      {emailError && (\n        <Text\n          accessibilityRole=\"alert\"\n          accessibilityLiveRegion=\"polite\"\n          className=\"text-red-500\"\n        >\n          {emailError}\n        </Text>\n      )}\n\n      <TouchableOpacity\n        accessibilityRole=\"button\"\n        accessibilityLabel=\"Submit registration form\"\n        accessibilityState={{ disabled: !email }}\n        disabled={!email}\n        onPress={handleSubmit}\n      >\n        <Text>Submit</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n```\n\n## Accessibility State\n\n```typescript\n// Toggle state\n<TouchableOpacity\n  accessibilityRole=\"checkbox\"\n  accessibilityState={{\n    checked: isChecked,\n  }}\n  onPress={() => setIsChecked(!isChecked)}\n>\n  <Text>{isChecked ? 'â˜‘' : 'â˜'} Accept terms</Text>\n</TouchableOpacity>\n\n// Expanded state\n<TouchableOpacity\n  accessibilityRole=\"button\"\n  accessibilityState={{\n    expanded: isExpanded,\n  }}\n  onPress={() => setIsExpanded(!isExpanded)}\n>\n  <Text>Show details</Text>\n</TouchableOpacity>\n\n// Selected state\n<TouchableOpacity\n  accessibilityRole=\"tab\"\n  accessibilityState={{\n    selected: isSelected,\n  }}\n>\n  <Text>Tab 1</Text>\n</TouchableOpacity>\n\n// Busy state\n<View\n  accessibilityRole=\"progressbar\"\n  accessibilityState={{\n    busy: isLoading,\n  }}\n>\n  <ActivityIndicator />\n</View>\n```\n\n## Accessibility Value\n\n```typescript\n// Progress bar\n<View\n  accessibilityRole=\"progressbar\"\n  accessibilityValue={{\n    min: 0,\n    max: 100,\n    now: progress,\n    text: `${progress}% complete`,\n  }}\n>\n  <View style={{ width: `${progress}%`, height: 4, backgroundColor: 'blue' }} />\n</View>\n\n// Slider\n<Slider\n  accessibilityRole=\"adjustable\"\n  accessibilityValue={{\n    min: 0,\n    max: 100,\n    now: volume,\n    text: `Volume ${volume}%`,\n  }}\n  accessibilityLabel=\"Volume control\"\n  value={volume}\n  onValueChange={setVolume}\n/>\n```\n\n## Live Regions\n\n```typescript\n// Announce changes to screen readers\n<View\n  accessibilityLiveRegion=\"polite\" // or \"assertive\"\n  accessibilityRole=\"alert\"\n>\n  <Text>{statusMessage}</Text>\n</View>\n\n// Toast/notification\nfunction Toast({ message, visible }: ToastProps): React.ReactElement | null {\n  if (!visible) return null;\n\n  return (\n    <View\n      accessibilityRole=\"alert\"\n      accessibilityLiveRegion=\"assertive\"\n      className=\"bg-black p-4 rounded-lg\"\n    >\n      <Text className=\"text-white\">{message}</Text>\n    </View>\n  );\n}\n```\n\n## Grouping Elements\n\n```typescript\n// Group related elements\n<View\n  accessible={true}\n  accessibilityLabel=\"Product: iPhone 15 Pro, Price: $999\"\n>\n  <Text>iPhone 15 Pro</Text>\n  <Text>$999</Text>\n</View>\n\n// Prevent grouping\n<View accessible={false}>\n  <TouchableOpacity accessibilityLabel=\"Edit\">\n    <Icon name=\"edit\" />\n  </TouchableOpacity>\n  <TouchableOpacity accessibilityLabel=\"Delete\">\n    <Icon name=\"delete\" />\n  </TouchableOpacity>\n</View>\n```\n\n## Focus Management\n\n```typescript\nimport { useRef } from 'react';\nimport { AccessibilityInfo, findNodeHandle } from 'react-native';\n\nfunction FocusExample(): React.ReactElement {\n  const headerRef = useRef<Text>(null);\n\n  const focusOnHeader = () => {\n    const node = findNodeHandle(headerRef.current);\n    if (node) {\n      AccessibilityInfo.setAccessibilityFocus(node);\n    }\n  };\n\n  return (\n    <View>\n      <Text ref={headerRef} accessibilityRole=\"header\">\n        Welcome\n      </Text>\n      <TouchableOpacity onPress={focusOnHeader}>\n        <Text>Focus header</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n```\n\n## Screen Reader Detection\n\n```typescript\nimport { useEffect, useState } from 'react';\nimport { AccessibilityInfo } from 'react-native';\n\nfunction useScreenReader() {\n  const [isEnabled, setIsEnabled] = useState(false);\n\n  useEffect(() => {\n    AccessibilityInfo.isScreenReaderEnabled().then(setIsEnabled);\n\n    const subscription = AccessibilityInfo.addEventListener(\n      'screenReaderChanged',\n      setIsEnabled\n    );\n\n    return () => subscription.remove();\n  }, []);\n\n  return isEnabled;\n}\n\n// Usage\nfunction MyComponent(): React.ReactElement {\n  const isScreenReaderEnabled = useScreenReader();\n\n  return (\n    <View>\n      {isScreenReaderEnabled ? (\n        <Text>Detailed description for screen reader users</Text>\n      ) : (\n        <Icon name=\"info\" />\n      )}\n    </View>\n  );\n}\n```\n\n## Reduce Motion\n\n```typescript\nimport { useEffect, useState } from 'react';\nimport { AccessibilityInfo } from 'react-native';\n\nfunction useReduceMotion() {\n  const [reduceMotion, setReduceMotion] = useState(false);\n\n  useEffect(() => {\n    AccessibilityInfo.isReduceMotionEnabled().then(setReduceMotion);\n\n    const subscription = AccessibilityInfo.addEventListener(\n      'reduceMotionChanged',\n      setReduceMotion\n    );\n\n    return () => subscription.remove();\n  }, []);\n\n  return reduceMotion;\n}\n\n// Usage with animations\nfunction AnimatedComponent(): React.ReactElement {\n  const reduceMotion = useReduceMotion();\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [\n      {\n        scale: reduceMotion\n          ? 1\n          : withSpring(scale.value),\n      },\n    ],\n  }));\n\n  return <Animated.View style={animatedStyle} />;\n}\n```\n\n## Accessible Navigation\n\n```typescript\n// Tab bar with proper accessibility\nfunction TabBar({ tabs, activeTab, onTabPress }) {\n  return (\n    <View accessibilityRole=\"tablist\">\n      {tabs.map((tab, index) => (\n        <TouchableOpacity\n          key={tab.id}\n          accessibilityRole=\"tab\"\n          accessibilityState={{ selected: activeTab === index }}\n          accessibilityLabel={`${tab.label}, tab ${index + 1} of ${tabs.length}`}\n          onPress={() => onTabPress(index)}\n        >\n          <Text>{tab.label}</Text>\n        </TouchableOpacity>\n      ))}\n    </View>\n  );\n}\n```\n\n## Accessible Lists\n\n```typescript\nfunction AccessibleList({ items }) {\n  return (\n    <FlashList\n      data={items}\n      renderItem={({ item, index }) => (\n        <View\n          accessible={true}\n          accessibilityLabel={`Item ${index + 1} of ${items.length}: ${item.title}`}\n          accessibilityHint=\"Double tap to view details\"\n        >\n          <Text>{item.title}</Text>\n        </View>\n      )}\n      accessibilityRole=\"list\"\n    />\n  );\n}\n```\n\n## Testing Accessibility\n\n```typescript\nimport { render, screen } from '@testing-library/react-native';\n\ndescribe('Accessibility', () => {\n  it('has correct accessibility role', () => {\n    render(<SubmitButton />);\n    expect(screen.getByRole('button')).toBeOnTheScreen();\n  });\n\n  it('has accessibility label', () => {\n    render(<IconButton icon=\"heart\" label=\"Add to favorites\" />);\n    expect(screen.getByLabelText('Add to favorites')).toBeOnTheScreen();\n  });\n\n  it('announces state changes', () => {\n    render(<Toggle checked={true} label=\"Notifications\" />);\n    expect(screen.getByRole('switch')).toHaveAccessibilityState({\n      checked: true,\n    });\n  });\n});\n```\n\n## Checklist\n\n- [ ] All interactive elements have `accessibilityRole`\n- [ ] All images have `accessibilityLabel` or are hidden\n- [ ] Form inputs have labels and error messages\n- [ ] Touch targets are at least 44x44 points\n- [ ] Color is not the only way to convey information\n- [ ] Text has sufficient contrast ratio (4.5:1)\n- [ ] Animations respect reduce motion setting\n- [ ] Focus order is logical\n- [ ] Dynamic content uses live regions\n- [ ] Screen reader testing on iOS and Android\n\n## Notes\n\n- Test with VoiceOver (iOS) and TalkBack (Android)\n- Use Accessibility Inspector in Xcode\n- Enable accessibility testing in development\n- Consider users with motor impairments\n- Provide alternatives for gestures"
              },
              {
                "name": "atomic-design-mobile",
                "description": "Atomic Design component organization pattern for React Native mobile applications. Use when creating new components with proper accessibility and touch targets.",
                "path": "tech-stacks/js/react-native/skills/atomic-design-mobile/SKILL.md",
                "frontmatter": {
                  "name": "atomic-design-mobile",
                  "description": "Atomic Design component organization pattern for React Native mobile applications. Use when creating new components with proper accessibility and touch targets."
                },
                "content": "# Atomic Design Mobile Skill\n\nThis skill covers the Atomic Design pattern for organizing React Native components with mobile-specific considerations including accessibility, touch targets, and platform differences.\n\n## When to Use\n\nUse this skill when:\n- Creating new mobile components\n- Organizing existing component structures\n- Deciding where a component should live\n- Ensuring accessibility compliance\n- Handling platform-specific requirements\n\n## Core Principle\n\n**ACCESSIBLE BY DEFAULT** - Every component must meet mobile accessibility standards including touch targets, screen reader support, and platform conventions.\n\n## The Five-Level Hierarchy\n\n| Level | Alternative Name | Description | Examples | State | Storybook |\n|-------|------------------|-------------|----------|-------|-----------|\n| **Atoms** | Elements | Basic building blocks | Button, Input, Text, Icon | Stateless | Yes |\n| **Molecules** | Widgets | Functional units combining atoms | SearchBar, FormField, ListItem | Minimal state | Yes |\n| **Organisms** | Modules | Complex UI sections | Header, TabBar, LoginForm | Can have state | Yes |\n| **Templates** | Layouts | Screen-level layout structures | ScreenLayout, AuthLayout | Layout state only | No |\n| **Screens** | - | Specific template instances | Login screen, Dashboard screen | Full state | No |\n\n## Mobile-Specific Requirements by Level\n\n### Atoms\n\n- **Touch targets:** Minimum 44x44pt (Apple HIG, Material Design)\n- **Accessibility props:** `accessibilityLabel`, `accessibilityRole`, `accessibilityState`\n- **Platform styling:** Use `Platform.OS` or `Platform.select` when needed\n- **Haptic feedback:** Consider `expo-haptics` for interactive elements\n\n### Molecules\n\n- **Keyboard handling:** Use `KeyboardAvoidingView` for form inputs\n- **Gesture support:** Use `react-native-gesture-handler` when needed\n- **Safe areas:** Consider safe area insets for edge components\n\n### Organisms\n\n- **Platform awareness:** iOS vs Android visual differences\n- **Safe areas:** Use `useSafeAreaInsets` for edge sections\n- **Navigation integration:** Consider navigation context\n\n### Templates\n\n- **Screen layout:** Handle status bar, navigation bar\n- **Safe areas:** Manage all safe area insets\n- **Keyboard avoidance:** Global keyboard handling\n- **Orientation:** Support orientation changes\n\n## Component Classification Decision\n\nUse this flowchart to determine the correct atomic level:\n\n| Question | Answer | Level |\n|----------|--------|-------|\n| Can it be broken down further? | No | **Atom** |\n| Does it combine atoms for a single purpose? | Yes | **Molecule** |\n| Is it a larger section with business logic? | Yes | **Organism** |\n| Does it define screen structure without content? | Yes | **Template** |\n| Does it have real content and data connections? | Yes | **Screen** |\n\n## Classification Checklists\n\n### Is it an Atom?\n\n- [ ] Cannot be broken down into smaller components\n- [ ] Single basic element (Pressable, TextInput, Text, Image)\n- [ ] No business logic\n- [ ] Stateless or only UI state (pressed, focused)\n- [ ] No dependencies on other custom components\n- [ ] Has minimum 44pt touch target\n- [ ] Has accessibility props\n\n### Is it a Molecule?\n\n- [ ] Combines 2+ atoms\n- [ ] Single functional purpose\n- [ ] Minimal internal state\n- [ ] No data fetching\n- [ ] No connection to global state\n- [ ] Handles keyboard avoidance if containing inputs\n\n### Is it an Organism?\n\n- [ ] Larger interface section\n- [ ] May have business logic\n- [ ] May connect to stores\n- [ ] Relatively standalone\n- [ ] Could be used across multiple screens\n- [ ] Handles safe areas if at screen edges\n\n### Is it a Template?\n\n- [ ] Defines screen structure\n- [ ] Uses slots/children for content\n- [ ] No real data\n- [ ] Handles safe areas, status bar, keyboard\n- [ ] Manages screen-level layout concerns\n\n### Is it a Screen?\n\n- [ ] Uses a template\n- [ ] Has real content\n- [ ] Connects to data sources\n- [ ] Handles routing/navigation\n\n## Code Examples\n\n### Atom Example\n\n```typescript\n// components/atoms/Button/Button.tsx\nimport { Pressable, Text, ActivityIndicator, StyleSheet, Platform } from 'react-native';\n\ninterface ButtonProps {\n  variant: 'primary' | 'secondary' | 'danger';\n  size?: 'sm' | 'md' | 'lg';\n  loading?: boolean;\n  disabled?: boolean;\n  onPress?: () => void;\n  children: string;\n  accessibilityLabel?: string;\n}\n\nexport function Button({\n  variant,\n  size = 'md',\n  loading,\n  disabled,\n  onPress,\n  children,\n  accessibilityLabel,\n}: ButtonProps) {\n  return (\n    <Pressable\n      style={({ pressed }) => [\n        styles.base,\n        styles[variant],\n        styles[size],\n        (disabled || loading) && styles.disabled,\n        pressed && styles.pressed,\n      ]}\n      onPress={onPress}\n      disabled={disabled || loading}\n      accessibilityLabel={accessibilityLabel || children}\n      accessibilityRole=\"button\"\n      accessibilityState={{ disabled: disabled || loading }}\n    >\n      {loading && <ActivityIndicator color=\"#fff\" style={styles.spinner} />}\n      <Text style={[styles.text, styles[`${variant}Text`]]}>{children}</Text>\n    </Pressable>\n  );\n}\n\nconst styles = StyleSheet.create({\n  base: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 8,\n    minHeight: 44, // Minimum touch target\n    minWidth: 44,\n  },\n  primary: {\n    backgroundColor: '#2563eb',\n  },\n  secondary: {\n    backgroundColor: '#e5e7eb',\n  },\n  danger: {\n    backgroundColor: '#dc2626',\n  },\n  sm: {\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n  },\n  md: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n  },\n  lg: {\n    paddingHorizontal: 24,\n    paddingVertical: 16,\n  },\n  disabled: {\n    opacity: 0.5,\n  },\n  pressed: {\n    opacity: 0.8,\n  },\n  spinner: {\n    marginRight: 8,\n  },\n  text: {\n    fontWeight: '600',\n  },\n  primaryText: {\n    color: '#ffffff',\n  },\n  secondaryText: {\n    color: '#111827',\n  },\n  dangerText: {\n    color: '#ffffff',\n  },\n});\n```\n\n### Molecule Example\n\n```typescript\n// components/molecules/FormField/FormField.tsx\nimport { View, Text, TextInput, StyleSheet } from 'react-native';\n\ninterface FormFieldProps {\n  label: string;\n  value: string;\n  onChangeText: (text: string) => void;\n  placeholder?: string;\n  error?: string;\n  required?: boolean;\n  secureTextEntry?: boolean;\n  keyboardType?: 'default' | 'email-address' | 'numeric' | 'phone-pad';\n  accessibilityLabel?: string;\n}\n\nexport function FormField({\n  label,\n  value,\n  onChangeText,\n  placeholder,\n  error,\n  required,\n  secureTextEntry,\n  keyboardType = 'default',\n  accessibilityLabel,\n}: FormFieldProps) {\n  const inputAccessibilityLabel = accessibilityLabel || `${label}${required ? ', required' : ''}`;\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.label}>\n        {label}\n        {required && <Text style={styles.required}> *</Text>}\n      </Text>\n      <TextInput\n        style={[styles.input, error && styles.inputError]}\n        value={value}\n        onChangeText={onChangeText}\n        placeholder={placeholder}\n        secureTextEntry={secureTextEntry}\n        keyboardType={keyboardType}\n        accessibilityLabel={inputAccessibilityLabel}\n        accessibilityState={{ disabled: false }}\n        accessibilityHint={error}\n      />\n      {error && (\n        <Text style={styles.error} accessibilityRole=\"alert\">\n          {error}\n        </Text>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    marginBottom: 16,\n  },\n  label: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: '#374151',\n    marginBottom: 4,\n  },\n  required: {\n    color: '#dc2626',\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#d1d5db',\n    borderRadius: 8,\n    paddingHorizontal: 12,\n    paddingVertical: 12,\n    fontSize: 16,\n    minHeight: 44, // Minimum touch target\n  },\n  inputError: {\n    borderColor: '#dc2626',\n  },\n  error: {\n    fontSize: 12,\n    color: '#dc2626',\n    marginTop: 4,\n  },\n});\n```\n\n### Organism Example\n\n```typescript\n// components/organisms/LoginForm/LoginForm.tsx\nimport { useState } from 'react';\nimport { View, StyleSheet, KeyboardAvoidingView, Platform } from 'react-native';\nimport { Button } from '@/components/atoms';\nimport { FormField } from '@/components/molecules';\n\ninterface LoginFormProps {\n  onSubmit: (email: string, password: string) => Promise<void>;\n}\n\nexport function LoginForm({ onSubmit }: LoginFormProps) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const validate = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    if (!email) newErrors.email = 'Email is required';\n    if (!password) newErrors.password = 'Password is required';\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async () => {\n    if (!validate()) return;\n\n    setLoading(true);\n    try {\n      await onSubmit(email, password);\n    } catch {\n      setErrors({ form: 'Invalid credentials' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      style={styles.container}\n    >\n      <FormField\n        label=\"Email\"\n        value={email}\n        onChangeText={setEmail}\n        placeholder=\"you@example.com\"\n        keyboardType=\"email-address\"\n        error={errors.email}\n        required\n      />\n      <FormField\n        label=\"Password\"\n        value={password}\n        onChangeText={setPassword}\n        placeholder=\"Enter password\"\n        secureTextEntry\n        error={errors.password}\n        required\n      />\n      <Button\n        variant=\"primary\"\n        onPress={handleSubmit}\n        loading={loading}\n        accessibilityLabel=\"Sign in\"\n      >\n        Sign In\n      </Button>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: 16,\n  },\n});\n```\n\n### Template Example\n\n```typescript\n// components/templates/ScreenLayout/ScreenLayout.tsx\nimport { SafeAreaView, View, StyleSheet, StatusBar, Platform } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { Header } from '@/components/organisms';\n\ninterface ScreenLayoutProps {\n  children: React.ReactNode;\n  title?: string;\n  showHeader?: boolean;\n  showBackButton?: boolean;\n  onBack?: () => void;\n}\n\nexport function ScreenLayout({\n  children,\n  title,\n  showHeader = true,\n  showBackButton = false,\n  onBack,\n}: ScreenLayoutProps) {\n  const insets = useSafeAreaInsets();\n\n  return (\n    <View style={[styles.container, { paddingTop: insets.top }]}>\n      <StatusBar barStyle=\"dark-content\" />\n      {showHeader && (\n        <Header\n          title={title}\n          showBackButton={showBackButton}\n          onBack={onBack}\n        />\n      )}\n      <View style={[styles.content, { paddingBottom: insets.bottom }]}>\n        {children}\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#ffffff',\n  },\n  content: {\n    flex: 1,\n    padding: 16,\n  },\n});\n```\n\n### Screen Example (Expo Router)\n\n```typescript\n// app/(auth)/login.tsx\nimport { useRouter } from 'expo-router';\nimport { AuthLayout } from '@/components/templates';\nimport { LoginForm } from '@/components/organisms';\nimport { useAuth } from '@/hooks/useAuth';\n\nexport default function LoginScreen() {\n  const router = useRouter();\n  const { login } = useAuth();\n\n  const handleLogin = async (email: string, password: string) => {\n    await login(email, password);\n    router.replace('/(tabs)');\n  };\n\n  return (\n    <AuthLayout title=\"Welcome Back\" subtitle=\"Sign in to your account\">\n      <LoginForm onSubmit={handleLogin} />\n    </AuthLayout>\n  );\n}\n```\n\n## React Native Storybook Story Templates\n\n### Atom Story Template\n\n```typescript\n// Button.stories.tsx\nimport type { Meta, StoryObj } from '@storybook/react-native';\nimport { Button } from './Button';\n\nconst meta: Meta<typeof Button> = {\n  title: 'Atoms/Button',\n  component: Button,\n  argTypes: {\n    variant: {\n      control: 'select',\n      options: ['primary', 'secondary', 'danger'],\n    },\n    size: {\n      control: 'select',\n      options: ['sm', 'md', 'lg'],\n    },\n    loading: { control: 'boolean' },\n    disabled: { control: 'boolean' },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof Button>;\n\nexport const Primary: Story = {\n  args: {\n    variant: 'primary',\n    children: 'Primary Button',\n  },\n};\n\nexport const Secondary: Story = {\n  args: {\n    variant: 'secondary',\n    children: 'Secondary Button',\n  },\n};\n\nexport const Loading: Story = {\n  args: {\n    variant: 'primary',\n    children: 'Saving...',\n    loading: true,\n  },\n};\n\nexport const Disabled: Story = {\n  args: {\n    variant: 'primary',\n    children: 'Disabled',\n    disabled: true,\n  },\n};\n```\n\n### Molecule Story Template\n\n```typescript\n// FormField.stories.tsx\nimport type { Meta, StoryObj } from '@storybook/react-native';\nimport { useState } from 'react';\nimport { FormField } from './FormField';\n\nconst meta: Meta<typeof FormField> = {\n  title: 'Molecules/FormField',\n  component: FormField,\n};\n\nexport default meta;\ntype Story = StoryObj<typeof FormField>;\n\n// Wrapper for controlled input\nfunction FormFieldWrapper(props: any) {\n  const [value, setValue] = useState('');\n  return <FormField {...props} value={value} onChangeText={setValue} />;\n}\n\nexport const Default: Story = {\n  render: () => (\n    <FormFieldWrapper\n      label=\"Email\"\n      placeholder=\"you@example.com\"\n    />\n  ),\n};\n\nexport const WithError: Story = {\n  render: () => (\n    <FormFieldWrapper\n      label=\"Email\"\n      error=\"Email is required\"\n      required\n    />\n  ),\n};\n\nexport const Password: Story = {\n  render: () => (\n    <FormFieldWrapper\n      label=\"Password\"\n      placeholder=\"Enter password\"\n      secureTextEntry\n      required\n    />\n  ),\n};\n```\n\n### Organism Story Template\n\n```typescript\n// LoginForm.stories.tsx\nimport type { Meta, StoryObj } from '@storybook/react-native';\nimport { LoginForm } from './LoginForm';\n\nconst meta: Meta<typeof LoginForm> = {\n  title: 'Organisms/LoginForm',\n  component: LoginForm,\n};\n\nexport default meta;\ntype Story = StoryObj<typeof LoginForm>;\n\nexport const Default: Story = {\n  args: {\n    onSubmit: async (email, password) => {\n      console.log('Login:', { email, password });\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n    },\n  },\n};\n```\n\n## Naming Conventions\n\n```\ncomponents/\nâ”œâ”€â”€ atoms/\nâ”‚   â”œâ”€â”€ Button/           # PascalCase - noun\nâ”‚   â”œâ”€â”€ Input/\nâ”‚   â”œâ”€â”€ Text/\nâ”‚   â””â”€â”€ Icon/\nâ”œâ”€â”€ molecules/\nâ”‚   â”œâ”€â”€ SearchBar/        # PascalCase - descriptive compound\nâ”‚   â”œâ”€â”€ FormField/\nâ”‚   â””â”€â”€ ListItem/\nâ”œâ”€â”€ organisms/\nâ”‚   â”œâ”€â”€ Header/           # PascalCase - section name\nâ”‚   â”œâ”€â”€ TabBar/\nâ”‚   â””â”€â”€ LoginForm/\nâ”œâ”€â”€ templates/\nâ”‚   â”œâ”€â”€ ScreenLayout/     # PascalCase - always end with \"Layout\"\nâ”‚   â”œâ”€â”€ AuthLayout/\nâ”‚   â””â”€â”€ TabLayout/\nâ””â”€â”€ index.ts\n\napp/                      # Screens via Expo Router\nâ”œâ”€â”€ (auth)/\nâ”‚   â”œâ”€â”€ login.tsx         # lowercase - Expo Router convention\nâ”‚   â””â”€â”€ register.tsx\nâ””â”€â”€ (tabs)/\n    â”œâ”€â”€ index.tsx\n    â””â”€â”€ profile.tsx\n```\n\n## Import Strategy\n\n```typescript\n// Within same level - use relative imports\nimport { Button } from '../Button';\n\n// Across levels - use path alias (no src/ prefix for Expo)\nimport { Button, Input } from '@/components/atoms';\nimport { SearchBar, FormField } from '@/components/molecules';\nimport { Header, LoginForm } from '@/components/organisms';\nimport { ScreenLayout, AuthLayout } from '@/components/templates';\n\n// From top-level barrel\nimport { Button, Input, SearchBar, Header } from '@/components';\n```\n\n### Path Alias Configuration (Expo)\n\n**tsconfig.json:**\n```json\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"@/*\": [\"./*\"]\n    }\n  }\n}\n```\n\n**Note:** Expo projects do not use a `src/` directory.\n\n## Barrel Export Patterns\n\n### Atom Level Barrel Export\n\n```typescript\n// components/atoms/index.ts\nexport { Button } from './Button';\nexport { Input } from './Input';\nexport { Text } from './Text';\nexport { Icon } from './Icon';\nexport { Avatar } from './Avatar';\nexport { Spinner } from './Spinner';\n\n// Re-export types\nexport type { ButtonProps } from './Button';\nexport type { InputProps } from './Input';\n```\n\n### Molecule Level Barrel Export\n\n```typescript\n// components/molecules/index.ts\nexport { SearchBar } from './SearchBar';\nexport { FormField } from './FormField';\nexport { ListItem } from './ListItem';\nexport { Card } from './Card';\n\nexport type { FormFieldProps } from './FormField';\n```\n\n### Organism Level Barrel Export\n\n```typescript\n// components/organisms/index.ts\nexport { Header } from './Header';\nexport { TabBar } from './TabBar';\nexport { LoginForm } from './LoginForm';\nexport { BottomSheet } from './BottomSheet';\n\nexport type { LoginFormProps } from './LoginForm';\n```\n\n### Template Level Barrel Export\n\n```typescript\n// components/templates/index.ts\nexport { ScreenLayout } from './ScreenLayout';\nexport { AuthLayout } from './AuthLayout';\nexport { TabLayout } from './TabLayout';\n```\n\n### Main Barrel Export\n\n```typescript\n// components/index.ts\nexport * from './atoms';\nexport * from './molecules';\nexport * from './organisms';\nexport * from './templates';\n```\n\n## Accessibility Checklist\n\n### Every Atom Must Have\n\n- [ ] `accessibilityLabel` - descriptive text for screen readers\n- [ ] `accessibilityRole` - semantic role (button, link, image, etc.)\n- [ ] `accessibilityState` - current state (disabled, selected, checked)\n- [ ] Minimum 44x44pt touch target\n- [ ] Visible focus indicator (where applicable)\n\n### Every Interactive Element Must Have\n\n- [ ] `accessibilityHint` - describes action result (optional but recommended)\n- [ ] Proper contrast ratio (4.5:1 for text)\n- [ ] Touch feedback (pressed state visual change)\n\n### Example Accessibility Props\n\n```typescript\n<Pressable\n  accessibilityLabel=\"Submit form\"\n  accessibilityRole=\"button\"\n  accessibilityState={{ disabled: isDisabled }}\n  accessibilityHint=\"Submits the login form\"\n>\n  <Text>Submit</Text>\n</Pressable>\n```\n\n## Platform-Specific Patterns\n\n### Using Platform.OS\n\n```typescript\nimport { Platform, StyleSheet } from 'react-native';\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingTop: Platform.OS === 'ios' ? 20 : 0,\n  },\n});\n```\n\n### Using Platform.select\n\n```typescript\nimport { Platform, StyleSheet } from 'react-native';\n\nconst styles = StyleSheet.create({\n  shadow: Platform.select({\n    ios: {\n      shadowColor: '#000',\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.25,\n      shadowRadius: 4,\n    },\n    android: {\n      elevation: 4,\n    },\n    default: {},\n  }),\n});\n```\n\n## Best Practices\n\n1. **Touch targets first** - Every interactive element is at least 44x44pt\n2. **Accessibility always** - Never skip accessibilityLabel and accessibilityRole\n3. **Use StyleSheet** - Create styles outside components for performance\n4. **Pressable over TouchableOpacity** - Better accessibility support\n5. **Safe areas everywhere** - Handle notches, home indicators, status bars\n6. **Keyboard avoidance** - Wrap forms in KeyboardAvoidingView\n7. **Platform awareness** - Test on both iOS and Android\n8. **Test with VoiceOver/TalkBack** - Verify screen reader experience\n\n## Notes\n\n- Expo projects do not use a `src/` directory\n- Templates and Screens do not get Storybook stories\n- React Native Storybook runs on-device, not in browser\n- Brad Frost's original article: https://bradfrost.com/blog/post/atomic-web-design/"
              },
              {
                "name": "component-testing-mobile",
                "description": "Jest and React Native Testing Library patterns. Use when writing component tests.",
                "path": "tech-stacks/js/react-native/skills/component-testing-mobile/SKILL.md",
                "frontmatter": {
                  "name": "component-testing-mobile",
                  "description": "Jest and React Native Testing Library patterns. Use when writing component tests."
                },
                "content": "# Component Testing Mobile Skill\n\nThis skill covers testing React Native components with Jest and RNTL.\n\n## When to Use\n\nUse this skill when:\n- Writing unit tests for components\n- Testing hooks and utilities\n- Testing component interactions\n- Mocking native modules\n\n## Core Principle\n\n**TEST BEHAVIOR** - Test what users see and do, not implementation details.\n\n## Installation\n\n```bash\nnpm install --save-dev @testing-library/react-native jest @types/jest\n```\n\n## Jest Configuration\n\n```javascript\n// jest.config.js\nmodule.exports = {\n  preset: 'jest-expo',\n  setupFilesAfterEnv: ['@testing-library/react-native/extend-expect'],\n  transformIgnorePatterns: [\n    'node_modules/(?!((jest-)?react-native|@react-native(-community)?)|expo(nent)?|@expo(nent)?/.*|@expo-google-fonts/.*|react-navigation|@react-navigation/.*|@unimodules/.*|unimodules|sentry-expo|native-base|react-native-svg)',\n  ],\n  moduleNameMapper: {\n    '^@/(.*)$': '<rootDir>/$1',\n  },\n  collectCoverageFrom: [\n    '**/*.{ts,tsx}',\n    '!**/node_modules/**',\n    '!**/coverage/**',\n    '!**/*.d.ts',\n  ],\n};\n```\n\n## Basic Component Test\n\n```typescript\n// components/__tests__/Button.test.tsx\nimport { render, screen, fireEvent } from '@testing-library/react-native';\nimport { Button } from '../Button';\n\ndescribe('Button', () => {\n  it('renders with text', () => {\n    render(<Button>Press me</Button>);\n\n    expect(screen.getByText('Press me')).toBeOnTheScreen();\n  });\n\n  it('calls onPress when pressed', () => {\n    const onPress = jest.fn();\n    render(<Button onPress={onPress}>Press me</Button>);\n\n    fireEvent.press(screen.getByText('Press me'));\n\n    expect(onPress).toHaveBeenCalledTimes(1);\n  });\n\n  it('is disabled when disabled prop is true', () => {\n    const onPress = jest.fn();\n    render(<Button onPress={onPress} disabled>Press me</Button>);\n\n    fireEvent.press(screen.getByText('Press me'));\n\n    expect(onPress).not.toHaveBeenCalled();\n  });\n});\n```\n\n## Testing with Accessibility\n\n```typescript\nimport { render, screen } from '@testing-library/react-native';\n\ndescribe('AccessibleButton', () => {\n  it('has correct accessibility role', () => {\n    render(<Button accessibilityRole=\"button\">Submit</Button>);\n\n    expect(screen.getByRole('button')).toBeOnTheScreen();\n  });\n\n  it('has accessibility label', () => {\n    render(\n      <Button accessibilityLabel=\"Submit form\">\n        <Icon name=\"check\" />\n      </Button>\n    );\n\n    expect(screen.getByLabelText('Submit form')).toBeOnTheScreen();\n  });\n});\n```\n\n## Testing Async Operations\n\n```typescript\nimport { render, screen, waitFor } from '@testing-library/react-native';\n\ndescribe('UserProfile', () => {\n  it('shows loading state initially', () => {\n    render(<UserProfile userId=\"123\" />);\n\n    expect(screen.getByText('Loading...')).toBeOnTheScreen();\n  });\n\n  it('shows user data after loading', async () => {\n    render(<UserProfile userId=\"123\" />);\n\n    await waitFor(() => {\n      expect(screen.getByText('John Doe')).toBeOnTheScreen();\n    });\n  });\n\n  it('shows error on fetch failure', async () => {\n    server.use(\n      rest.get('/api/users/123', (req, res, ctx) => {\n        return res(ctx.status(500));\n      })\n    );\n\n    render(<UserProfile userId=\"123\" />);\n\n    await waitFor(() => {\n      expect(screen.getByText('Error loading user')).toBeOnTheScreen();\n    });\n  });\n});\n```\n\n## Testing Forms\n\n```typescript\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react-native';\nimport { LoginForm } from '../LoginForm';\n\ndescribe('LoginForm', () => {\n  it('shows validation errors for empty submission', async () => {\n    render(<LoginForm />);\n\n    fireEvent.press(screen.getByText('Sign In'));\n\n    await waitFor(() => {\n      expect(screen.getByText('Email is required')).toBeOnTheScreen();\n    });\n  });\n\n  it('submits with valid data', async () => {\n    const onSubmit = jest.fn();\n    render(<LoginForm onSubmit={onSubmit} />);\n\n    fireEvent.changeText(\n      screen.getByPlaceholderText('Email'),\n      'test@example.com'\n    );\n    fireEvent.changeText(\n      screen.getByPlaceholderText('Password'),\n      'password123'\n    );\n    fireEvent.press(screen.getByText('Sign In'));\n\n    await waitFor(() => {\n      expect(onSubmit).toHaveBeenCalledWith({\n        email: 'test@example.com',\n        password: 'password123',\n      });\n    });\n  });\n});\n```\n\n## Testing Lists\n\n```typescript\nimport { render, screen, fireEvent } from '@testing-library/react-native';\n\ndescribe('TodoList', () => {\n  const items = [\n    { id: '1', text: 'Buy groceries' },\n    { id: '2', text: 'Walk the dog' },\n  ];\n\n  it('renders all items', () => {\n    render(<TodoList items={items} />);\n\n    expect(screen.getByText('Buy groceries')).toBeOnTheScreen();\n    expect(screen.getByText('Walk the dog')).toBeOnTheScreen();\n  });\n\n  it('calls onItemPress with correct item', () => {\n    const onItemPress = jest.fn();\n    render(<TodoList items={items} onItemPress={onItemPress} />);\n\n    fireEvent.press(screen.getByText('Buy groceries'));\n\n    expect(onItemPress).toHaveBeenCalledWith(items[0]);\n  });\n});\n```\n\n## Mocking Native Modules\n\n```typescript\n// jest.setup.js\njest.mock('expo-secure-store', () => ({\n  getItemAsync: jest.fn(),\n  setItemAsync: jest.fn(),\n  deleteItemAsync: jest.fn(),\n}));\n\njest.mock('expo-router', () => ({\n  useRouter: () => ({\n    push: jest.fn(),\n    replace: jest.fn(),\n    back: jest.fn(),\n  }),\n  useLocalSearchParams: () => ({}),\n}));\n\njest.mock('@react-native-async-storage/async-storage', () =>\n  require('@react-native-async-storage/async-storage/jest/async-storage-mock')\n);\n```\n\n## Testing Hooks\n\n```typescript\nimport { renderHook, act } from '@testing-library/react-native';\nimport { useCounter } from '../useCounter';\n\ndescribe('useCounter', () => {\n  it('starts with initial value', () => {\n    const { result } = renderHook(() => useCounter(10));\n\n    expect(result.current.count).toBe(10);\n  });\n\n  it('increments counter', () => {\n    const { result } = renderHook(() => useCounter(0));\n\n    act(() => {\n      result.current.increment();\n    });\n\n    expect(result.current.count).toBe(1);\n  });\n});\n```\n\n## Testing with Providers\n\n```typescript\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { render } from '@testing-library/react-native';\n\nfunction createWrapper() {\n  const queryClient = new QueryClient({\n    defaultOptions: {\n      queries: { retry: false },\n    },\n  });\n\n  return ({ children }: { children: React.ReactNode }) => (\n    <QueryClientProvider client={queryClient}>\n      {children}\n    </QueryClientProvider>\n  );\n}\n\ndescribe('UserList', () => {\n  it('fetches and displays users', async () => {\n    render(<UserList />, { wrapper: createWrapper() });\n\n    await waitFor(() => {\n      expect(screen.getByText('John Doe')).toBeOnTheScreen();\n    });\n  });\n});\n```\n\n## Testing Zustand Stores\n\n```typescript\nimport { useAuthStore } from '../authStore';\n\ndescribe('authStore', () => {\n  beforeEach(() => {\n    useAuthStore.setState({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n    });\n  });\n\n  it('sets user on login', async () => {\n    await useAuthStore.getState().login('test@test.com', 'password');\n\n    expect(useAuthStore.getState().isAuthenticated).toBe(true);\n    expect(useAuthStore.getState().user).toBeDefined();\n  });\n\n  it('clears state on logout', async () => {\n    useAuthStore.setState({\n      user: { id: '1', email: 'test@test.com' },\n      isAuthenticated: true,\n    });\n\n    await useAuthStore.getState().logout();\n\n    expect(useAuthStore.getState().user).toBeNull();\n    expect(useAuthStore.getState().isAuthenticated).toBe(false);\n  });\n});\n```\n\n## Common Matchers\n\n```typescript\n// Element presence\nexpect(element).toBeOnTheScreen();\nexpect(element).not.toBeOnTheScreen();\n\n// Text content\nexpect(element).toHaveTextContent('Hello');\n\n// Accessibility\nexpect(element).toBeEnabled();\nexpect(element).toBeDisabled();\nexpect(element).toHaveAccessibilityValue({ text: '50%' });\n\n// Style (with jest-native)\nexpect(element).toHaveStyle({ backgroundColor: 'red' });\n```\n\n## Running Tests\n\n```bash\n# Run all tests\nnpm test\n\n# Run with coverage\nnpm test -- --coverage\n\n# Run specific file\nnpm test -- Button.test.tsx\n\n# Watch mode\nnpm test -- --watch\n```\n\n## Notes\n\n- Use `screen` for queries instead of destructuring from render\n- Prefer `getByRole` and `getByLabelText` for accessibility\n- Use `waitFor` for async operations\n- Mock native modules in setup file\n- Test behavior, not implementation\n- Keep tests focused and isolated"
              },
              {
                "name": "eas-build-setup",
                "description": "EAS Build configuration for iOS and Android. Use when setting up cloud builds.",
                "path": "tech-stacks/js/react-native/skills/eas-build-setup/SKILL.md",
                "frontmatter": {
                  "name": "eas-build-setup",
                  "description": "EAS Build configuration for iOS and Android. Use when setting up cloud builds."
                },
                "content": "# EAS Build Setup Skill\n\nThis skill covers EAS Build configuration for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Setting up cloud builds\n- Configuring build profiles\n- Managing credentials\n- Building for app stores\n\n## Core Principle\n\n**CLOUD-FIRST BUILDS** - Let EAS handle the complexity of native builds.\n\n## Installation\n\n```bash\n# Install EAS CLI globally\nnpm install -g eas-cli\n\n# Login to Expo account\neas login\n\n# Initialize EAS in project\neas build:configure\n```\n\n## Basic Configuration\n\n```json\n// eas.json\n{\n  \"cli\": {\n    \"version\": \">= 12.0.0\"\n  },\n  \"build\": {\n    \"development\": {\n      \"developmentClient\": true,\n      \"distribution\": \"internal\"\n    },\n    \"preview\": {\n      \"distribution\": \"internal\"\n    },\n    \"production\": {}\n  },\n  \"submit\": {\n    \"production\": {}\n  }\n}\n```\n\n## Full Configuration\n\n```json\n// eas.json\n{\n  \"cli\": {\n    \"version\": \">= 12.0.0\",\n    \"appVersionSource\": \"remote\"\n  },\n  \"build\": {\n    \"base\": {\n      \"node\": \"20.11.0\",\n      \"env\": {\n        \"EXPO_PUBLIC_API_URL\": \"https://api.example.com\"\n      }\n    },\n    \"development\": {\n      \"extends\": \"base\",\n      \"developmentClient\": true,\n      \"distribution\": \"internal\",\n      \"ios\": {\n        \"simulator\": true\n      },\n      \"android\": {\n        \"buildType\": \"apk\"\n      },\n      \"env\": {\n        \"EXPO_PUBLIC_API_URL\": \"https://api.dev.example.com\"\n      }\n    },\n    \"preview\": {\n      \"extends\": \"base\",\n      \"distribution\": \"internal\",\n      \"ios\": {\n        \"resourceClass\": \"m-medium\"\n      },\n      \"android\": {\n        \"buildType\": \"apk\"\n      },\n      \"channel\": \"preview\",\n      \"env\": {\n        \"EXPO_PUBLIC_API_URL\": \"https://api.staging.example.com\"\n      }\n    },\n    \"production\": {\n      \"extends\": \"base\",\n      \"autoIncrement\": true,\n      \"ios\": {\n        \"resourceClass\": \"m-medium\"\n      },\n      \"channel\": \"production\",\n      \"env\": {\n        \"EXPO_PUBLIC_API_URL\": \"https://api.example.com\"\n      }\n    }\n  },\n  \"submit\": {\n    \"production\": {\n      \"ios\": {\n        \"appleId\": \"your@email.com\",\n        \"ascAppId\": \"1234567890\",\n        \"appleTeamId\": \"ABCD1234\"\n      },\n      \"android\": {\n        \"serviceAccountKeyPath\": \"./google-service-account.json\",\n        \"track\": \"internal\"\n      }\n    }\n  }\n}\n```\n\n## App Configuration\n\n```typescript\n// app.config.ts\nimport { ExpoConfig, ConfigContext } from 'expo/config';\n\nexport default ({ config }: ConfigContext): ExpoConfig => ({\n  ...config,\n  name: 'My App',\n  slug: 'my-app',\n  version: '1.0.0',\n  orientation: 'portrait',\n  icon: './assets/icon.png',\n  splash: {\n    image: './assets/splash.png',\n    resizeMode: 'contain',\n    backgroundColor: '#ffffff',\n  },\n  ios: {\n    bundleIdentifier: 'com.company.myapp',\n    supportsTablet: true,\n    infoPlist: {\n      NSCameraUsageDescription: 'This app uses the camera for...',\n      NSPhotoLibraryUsageDescription: 'This app accesses photos for...',\n    },\n  },\n  android: {\n    package: 'com.company.myapp',\n    adaptiveIcon: {\n      foregroundImage: './assets/adaptive-icon.png',\n      backgroundColor: '#ffffff',\n    },\n    permissions: [\n      'CAMERA',\n      'READ_EXTERNAL_STORAGE',\n      'WRITE_EXTERNAL_STORAGE',\n    ],\n  },\n  extra: {\n    eas: {\n      projectId: 'your-project-id',\n    },\n  },\n  owner: 'your-expo-account',\n});\n```\n\n## Credentials Management\n\n```bash\n# iOS credentials\neas credentials --platform ios\n\n# Android credentials\neas credentials --platform android\n\n# View current credentials\neas credentials\n\n# Generate new iOS distribution certificate\neas credentials --platform ios\n\n# Generate new Android keystore\neas credentials --platform android\n```\n\n## Build Commands\n\n```bash\n# Development build (with dev client)\neas build --profile development --platform ios\neas build --profile development --platform android\n\n# Preview build (internal testing)\neas build --profile preview --platform all\n\n# Production build\neas build --profile production --platform all\n\n# Build with specific message\neas build --profile production --message \"Release v1.0.0\"\n\n# Local build (without cloud)\neas build --local --platform ios\n```\n\n## iOS Specific Configuration\n\n```json\n// eas.json - iOS section\n{\n  \"build\": {\n    \"production\": {\n      \"ios\": {\n        \"resourceClass\": \"m-medium\",\n        \"image\": \"latest\",\n        \"credentialsSource\": \"remote\",\n        \"buildConfiguration\": \"Release\"\n      }\n    }\n  }\n}\n```\n\n### iOS Entitlements\n\n```xml\n<!-- ios/MyApp/MyApp.entitlements -->\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n<plist version=\"1.0\">\n<dict>\n  <key>aps-environment</key>\n  <string>production</string>\n  <key>com.apple.developer.associated-domains</key>\n  <array>\n    <string>applinks:example.com</string>\n  </array>\n</dict>\n</plist>\n```\n\n## Android Specific Configuration\n\n```json\n// eas.json - Android section\n{\n  \"build\": {\n    \"preview\": {\n      \"android\": {\n        \"buildType\": \"apk\",\n        \"gradleCommand\": \":app:assembleRelease\"\n      }\n    },\n    \"production\": {\n      \"android\": {\n        \"buildType\": \"app-bundle\",\n        \"gradleCommand\": \":app:bundleRelease\",\n        \"resourceClass\": \"medium\"\n      }\n    }\n  }\n}\n```\n\n## Environment Variables\n\n```json\n// eas.json\n{\n  \"build\": {\n    \"production\": {\n      \"env\": {\n        \"EXPO_PUBLIC_API_URL\": \"https://api.example.com\",\n        \"EXPO_PUBLIC_ANALYTICS_ID\": \"UA-XXXXX-Y\"\n      }\n    }\n  }\n}\n```\n\n```bash\n# Or use EAS Secrets for sensitive values\neas secret:create --name API_KEY --value \"your-secret-key\" --scope project\neas secret:list\n```\n\n## Build Hooks\n\n```json\n// package.json\n{\n  \"scripts\": {\n    \"eas-build-pre-install\": \"echo 'Running pre-install hook'\",\n    \"eas-build-post-install\": \"echo 'Running post-install hook'\",\n    \"eas-build-on-success\": \"echo 'Build succeeded!'\",\n    \"eas-build-on-error\": \"echo 'Build failed!'\"\n  }\n}\n```\n\n## Internal Distribution\n\n```bash\n# Register devices for internal distribution\neas device:create\n\n# List registered devices\neas device:list\n\n# Build for internal distribution\neas build --profile preview --platform ios\n```\n\n## Monitoring Builds\n\n```bash\n# View build status\neas build:list\n\n# View specific build\neas build:view <build-id>\n\n# Cancel build\neas build:cancel <build-id>\n\n# Download build artifacts\neas build:download --platform ios --latest\n```\n\n## CI/CD Integration\n\n```yaml\n# .github/workflows/eas-build.yml\nname: EAS Build\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Setup EAS\n        uses: expo/expo-github-action@v8\n        with:\n          eas-version: latest\n          token: ${{ secrets.EXPO_TOKEN }}\n\n      - name: Build preview\n        if: github.event_name == 'pull_request'\n        run: eas build --profile preview --platform all --non-interactive\n\n      - name: Build production\n        if: github.ref == 'refs/heads/main'\n        run: eas build --profile production --platform all --non-interactive\n```\n\n## Version Management\n\n```json\n// eas.json\n{\n  \"cli\": {\n    \"appVersionSource\": \"remote\"\n  },\n  \"build\": {\n    \"production\": {\n      \"autoIncrement\": true\n    }\n  }\n}\n```\n\n```bash\n# Manually set version\neas build:version:set --platform ios --version 1.2.0 --build-number 45\neas build:version:set --platform android --version 1.2.0 --version-code 45\n\n# Get current version\neas build:version:get --platform ios\n```\n\n## Notes\n\n- Use development builds for debugging\n- Use preview builds for internal testing\n- Use production builds for store submission\n- Keep credentials in EAS (remote) for team sharing\n- Use EAS Secrets for sensitive environment variables\n- Set up CI/CD for automated builds\n- Monitor build times and optimize as needed"
              },
              {
                "name": "eas-update-setup",
                "description": "EAS Update for OTA updates. Use when setting up over-the-air updates.",
                "path": "tech-stacks/js/react-native/skills/eas-update-setup/SKILL.md",
                "frontmatter": {
                  "name": "eas-update-setup",
                  "description": "EAS Update for OTA updates. Use when setting up over-the-air updates."
                },
                "content": "# EAS Update Setup Skill\n\nThis skill covers EAS Update for over-the-air (OTA) updates in React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Setting up OTA updates\n- Managing update channels\n- Rolling back updates\n- A/B testing with updates\n\n## Core Principle\n\n**INSTANT UPDATES** - Ship JavaScript changes without app store review.\n\n## What Can Be Updated OTA\n\n```\nâœ… CAN update OTA:\n- JavaScript code\n- TypeScript code\n- Assets (images, fonts)\n- Styling changes\n- New screens/components\n- Bug fixes in JS\n\nâŒ CANNOT update OTA:\n- Native code changes\n- New native modules\n- Native dependencies\n- App permissions\n- Build configuration\n```\n\n## Installation\n\n```bash\n# Install expo-updates\nnpx expo install expo-updates\n\n# Configure EAS Update\neas update:configure\n```\n\n## Basic Configuration\n\n```json\n// eas.json\n{\n  \"build\": {\n    \"preview\": {\n      \"channel\": \"preview\"\n    },\n    \"production\": {\n      \"channel\": \"production\"\n    }\n  }\n}\n```\n\n```typescript\n// app.config.ts\nexport default {\n  expo: {\n    // ...other config\n    updates: {\n      url: 'https://u.expo.dev/your-project-id',\n      fallbackToCacheTimeout: 0,\n    },\n    runtimeVersion: {\n      policy: 'appVersion',\n    },\n  },\n};\n```\n\n## Runtime Version Strategies\n\n```typescript\n// app.config.ts\n\n// Option 1: Based on app version (recommended for most apps)\nexport default {\n  expo: {\n    runtimeVersion: {\n      policy: 'appVersion', // Uses version from app.json\n    },\n  },\n};\n\n// Option 2: Based on SDK version\nexport default {\n  expo: {\n    runtimeVersion: {\n      policy: 'sdkVersion',\n    },\n  },\n};\n\n// Option 3: Based on native code fingerprint\nexport default {\n  expo: {\n    runtimeVersion: {\n      policy: 'fingerprint',\n    },\n  },\n};\n\n// Option 4: Manual version\nexport default {\n  expo: {\n    runtimeVersion: '1.0.0',\n  },\n};\n```\n\n## Publishing Updates\n\n```bash\n# Publish to preview channel\neas update --channel preview --message \"Fix login bug\"\n\n# Publish to production channel\neas update --channel production --message \"Release 1.2.1 hotfix\"\n\n# Publish specific branch\neas update --branch main --message \"Latest changes\"\n\n# Publish with auto-generated message\neas update --channel production --auto\n```\n\n## Update Channels & Branches\n\n```bash\n# Create a new branch\neas branch:create staging\n\n# Map channel to branch\neas channel:create staging\neas channel:edit staging --branch staging\n\n# View channels\neas channel:list\n\n# View branches\neas branch:list\n\n# Roll back to previous update\neas channel:rollback production\n```\n\n## Programmatic Update Checking\n\n```typescript\nimport * as Updates from 'expo-updates';\n\n// Check for updates on app start\nasync function checkForUpdates() {\n  try {\n    const update = await Updates.checkForUpdateAsync();\n\n    if (update.isAvailable) {\n      await Updates.fetchUpdateAsync();\n      await Updates.reloadAsync();\n    }\n  } catch (error) {\n    console.error('Error checking for updates:', error);\n  }\n}\n\n// Use in app entry\nuseEffect(() => {\n  if (!__DEV__) {\n    checkForUpdates();\n  }\n}, []);\n```\n\n## Update Hook Pattern\n\n```typescript\nimport { useEffect, useState } from 'react';\nimport * as Updates from 'expo-updates';\n\ninterface UpdateState {\n  isChecking: boolean;\n  isAvailable: boolean;\n  isDownloading: boolean;\n  error: Error | null;\n  checkForUpdate: () => Promise<void>;\n  downloadAndRestart: () => Promise<void>;\n}\n\nexport function useUpdates(): UpdateState {\n  const [isChecking, setIsChecking] = useState(false);\n  const [isAvailable, setIsAvailable] = useState(false);\n  const [isDownloading, setIsDownloading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const checkForUpdate = async () => {\n    if (__DEV__) return;\n\n    setIsChecking(true);\n    setError(null);\n\n    try {\n      const update = await Updates.checkForUpdateAsync();\n      setIsAvailable(update.isAvailable);\n    } catch (e) {\n      setError(e as Error);\n    } finally {\n      setIsChecking(false);\n    }\n  };\n\n  const downloadAndRestart = async () => {\n    if (!isAvailable) return;\n\n    setIsDownloading(true);\n    try {\n      await Updates.fetchUpdateAsync();\n      await Updates.reloadAsync();\n    } catch (e) {\n      setError(e as Error);\n      setIsDownloading(false);\n    }\n  };\n\n  // Check on mount\n  useEffect(() => {\n    checkForUpdate();\n  }, []);\n\n  return {\n    isChecking,\n    isAvailable,\n    isDownloading,\n    error,\n    checkForUpdate,\n    downloadAndRestart,\n  };\n}\n```\n\n## Update Banner Component\n\n```typescript\nimport { useUpdates } from '@/hooks/useUpdates';\n\nexport function UpdateBanner(): React.ReactElement | null {\n  const { isAvailable, isDownloading, downloadAndRestart } = useUpdates();\n\n  if (!isAvailable) return null;\n\n  return (\n    <View className=\"bg-blue-600 px-4 py-3 flex-row items-center justify-between\">\n      <Text className=\"text-white\">A new version is available</Text>\n      <TouchableOpacity\n        onPress={downloadAndRestart}\n        disabled={isDownloading}\n        className=\"bg-white px-4 py-2 rounded\"\n      >\n        <Text className=\"text-blue-600 font-semibold\">\n          {isDownloading ? 'Updating...' : 'Update Now'}\n        </Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n```\n\n## Background Updates\n\n```typescript\n// app.config.ts\nexport default {\n  expo: {\n    updates: {\n      url: 'https://u.expo.dev/your-project-id',\n      checkAutomatically: 'ON_LOAD', // or 'ON_ERROR_RECOVERY', 'NEVER'\n      fallbackToCacheTimeout: 0, // 0 = use cache, don't wait\n    },\n  },\n};\n```\n\n## Update Events\n\n```typescript\nimport * as Updates from 'expo-updates';\n\nuseEffect(() => {\n  const subscription = Updates.addListener((event) => {\n    if (event.type === Updates.UpdateEventType.UPDATE_AVAILABLE) {\n      // New update downloaded\n      Alert.alert(\n        'Update Available',\n        'A new version has been downloaded. Restart to apply?',\n        [\n          { text: 'Later', style: 'cancel' },\n          { text: 'Restart', onPress: () => Updates.reloadAsync() },\n        ]\n      );\n    } else if (event.type === Updates.UpdateEventType.ERROR) {\n      // Update error\n      console.error('Update error:', event.message);\n    }\n  });\n\n  return () => subscription.remove();\n}, []);\n```\n\n## CI/CD Integration\n\n```yaml\n# .github/workflows/eas-update.yml\nname: EAS Update\n\non:\n  push:\n    branches: [main, staging]\n\njobs:\n  update:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Setup EAS\n        uses: expo/expo-github-action@v8\n        with:\n          eas-version: latest\n          token: ${{ secrets.EXPO_TOKEN }}\n\n      - name: Publish update\n        run: |\n          if [ \"${{ github.ref }}\" == \"refs/heads/main\" ]; then\n            eas update --channel production --auto --non-interactive\n          else\n            eas update --channel staging --auto --non-interactive\n          fi\n```\n\n## Rollback Strategy\n\n```bash\n# View update history\neas update:list --channel production\n\n# Rollback to previous update\neas channel:rollback production\n\n# Rollback to specific update\neas channel:edit production --branch <branch-name>\n```\n\n## A/B Testing with Channels\n\n```bash\n# Create experiment channels\neas channel:create production-control\neas channel:create production-variant\n\n# Deploy different versions\neas update --channel production-control --message \"Control version\"\neas update --channel production-variant --message \"Variant A\"\n\n# Route users to channels based on criteria\n```\n\n## Debug Updates\n\n```typescript\nimport * as Updates from 'expo-updates';\n\n// Get current update info\nconsole.log('Channel:', Updates.channel);\nconsole.log('Runtime Version:', Updates.runtimeVersion);\nconsole.log('Update ID:', Updates.updateId);\nconsole.log('Created At:', Updates.createdAt);\nconsole.log('Is Embedded Launch:', Updates.isEmbeddedLaunch);\n```\n\n## Monitoring\n\n```bash\n# View update analytics\neas update:list --channel production --limit 10\n\n# View update details\neas update:view <update-id>\n```\n\n## Notes\n\n- OTA updates only work for JS/assets, not native code\n- Test updates in preview before production\n- Use meaningful update messages for tracking\n- Set up CI/CD for automated deployments\n- Consider user experience for mandatory vs. optional updates\n- Monitor update success rates\n- Have a rollback plan ready"
              },
              {
                "name": "expo-configuration",
                "description": "Expo SDK configuration and setup. Use when configuring Expo projects.",
                "path": "tech-stacks/js/react-native/skills/expo-configuration/SKILL.md",
                "frontmatter": {
                  "name": "expo-configuration",
                  "description": "Expo SDK configuration and setup. Use when configuring Expo projects."
                },
                "content": "# Expo Configuration Skill\n\nThis skill covers Expo SDK configuration for React Native projects.\n\n## When to Use\n\nUse this skill when:\n- Setting up a new Expo project\n- Configuring app.json/app.config.js\n- Adding native modules\n- Configuring build settings\n\n## Core Principle\n\n**MANAGED WORKFLOW** - Use Expo's managed workflow for best developer experience.\n\n## Project Initialization\n\n```bash\n# Create new Expo project\nnpx create-expo-app@latest my-app\n\n# With specific template\nnpx create-expo-app@latest my-app --template tabs\n```\n\n## App Configuration\n\n### app.json\n\n```json\n{\n  \"expo\": {\n    \"name\": \"My App\",\n    \"slug\": \"my-app\",\n    \"version\": \"1.0.0\",\n    \"orientation\": \"portrait\",\n    \"icon\": \"./assets/icon.png\",\n    \"userInterfaceStyle\": \"automatic\",\n    \"splash\": {\n      \"image\": \"./assets/splash.png\",\n      \"resizeMode\": \"contain\",\n      \"backgroundColor\": \"#ffffff\"\n    },\n    \"assetBundlePatterns\": [\"**/*\"],\n    \"ios\": {\n      \"supportsTablet\": true,\n      \"bundleIdentifier\": \"com.company.myapp\"\n    },\n    \"android\": {\n      \"adaptiveIcon\": {\n        \"foregroundImage\": \"./assets/adaptive-icon.png\",\n        \"backgroundColor\": \"#ffffff\"\n      },\n      \"package\": \"com.company.myapp\"\n    },\n    \"web\": {\n      \"bundler\": \"metro\",\n      \"output\": \"static\",\n      \"favicon\": \"./assets/favicon.png\"\n    },\n    \"plugins\": [],\n    \"experiments\": {\n      \"typedRoutes\": true\n    }\n  }\n}\n```\n\n### app.config.js (Dynamic Configuration)\n\n```javascript\nexport default ({ config }) => {\n  return {\n    ...config,\n    name: process.env.APP_NAME || 'My App',\n    version: process.env.APP_VERSION || '1.0.0',\n    extra: {\n      apiUrl: process.env.API_URL,\n      enableAnalytics: process.env.ENABLE_ANALYTICS === 'true',\n    },\n  };\n};\n```\n\n## Environment Variables\n\n### .env Files\n\n```bash\n# .env\nEXPO_PUBLIC_API_URL=https://api.example.com\nEXPO_PUBLIC_ANALYTICS_KEY=abc123\n```\n\n### Using Environment Variables\n\n```typescript\n// Must be prefixed with EXPO_PUBLIC_\nconst apiUrl = process.env.EXPO_PUBLIC_API_URL;\n\n// Or use expo-constants for extra config\nimport Constants from 'expo-constants';\nconst { apiUrl } = Constants.expoConfig?.extra ?? {};\n```\n\n## Common Plugins\n\n### Install Plugins\n\n```bash\n# Expo Router\nnpx expo install expo-router\n\n# Secure Store\nnpx expo install expo-secure-store\n\n# Image Picker\nnpx expo install expo-image-picker\n\n# Camera\nnpx expo install expo-camera\n\n# Location\nnpx expo install expo-location\n\n# Notifications\nnpx expo install expo-notifications\n\n# Haptics\nnpx expo install expo-haptics\n```\n\n### Configure Plugins\n\n```json\n{\n  \"expo\": {\n    \"plugins\": [\n      \"expo-router\",\n      \"expo-secure-store\",\n      [\n        \"expo-image-picker\",\n        {\n          \"photosPermission\": \"Allow $(PRODUCT_NAME) to access your photos.\"\n        }\n      ],\n      [\n        \"expo-camera\",\n        {\n          \"cameraPermission\": \"Allow $(PRODUCT_NAME) to access camera.\"\n        }\n      ],\n      [\n        \"expo-location\",\n        {\n          \"locationAlwaysAndWhenInUsePermission\": \"Allow $(PRODUCT_NAME) to use your location.\"\n        }\n      ]\n    ]\n  }\n}\n```\n\n## New Architecture\n\n### Enable New Architecture\n\n```json\n{\n  \"expo\": {\n    \"newArchEnabled\": true\n  }\n}\n```\n\n## EAS Configuration\n\n### eas.json\n\n```json\n{\n  \"cli\": {\n    \"version\": \">= 5.0.0\"\n  },\n  \"build\": {\n    \"development\": {\n      \"developmentClient\": true,\n      \"distribution\": \"internal\"\n    },\n    \"preview\": {\n      \"distribution\": \"internal\"\n    },\n    \"production\": {}\n  },\n  \"submit\": {\n    \"production\": {}\n  }\n}\n```\n\n### EAS Update Configuration\n\n```json\n{\n  \"expo\": {\n    \"updates\": {\n      \"url\": \"https://u.expo.dev/your-project-id\"\n    },\n    \"runtimeVersion\": {\n      \"policy\": \"appVersion\"\n    }\n  }\n}\n```\n\n## Development Commands\n\n```bash\n# Start development server\nnpx expo start\n\n# Start with specific platform\nnpx expo start --ios\nnpx expo start --android\n\n# Clear cache\nnpx expo start --clear\n\n# Prebuild native projects\nnpx expo prebuild\n\n# Run native build\nnpx expo run:ios\nnpx expo run:android\n```\n\n## TypeScript Configuration\n\n### tsconfig.json\n\n```json\n{\n  \"extends\": \"expo/tsconfig.base\",\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"noImplicitAny\": true,\n    \"strictNullChecks\": true,\n    \"noUncheckedIndexedAccess\": true,\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@/*\": [\"./*\"]\n    }\n  },\n  \"include\": [\"**/*.ts\", \"**/*.tsx\", \".expo/types/**/*.ts\", \"expo-env.d.ts\"]\n}\n```\n\n### expo-env.d.ts\n\n```typescript\n/// <reference types=\"expo/types\" />\n\n// Add custom type declarations here\ndeclare module '*.png' {\n  const value: number;\n  export default value;\n}\n```\n\n## Metro Configuration\n\n### metro.config.js\n\n```javascript\nconst { getDefaultConfig } = require('expo/metro-config');\n\nconst config = getDefaultConfig(__dirname);\n\n// Add custom configuration\nconfig.resolver.sourceExts.push('cjs');\n\nmodule.exports = config;\n```\n\n## Splash Screen\n\n### Configure Splash\n\n```json\n{\n  \"expo\": {\n    \"splash\": {\n      \"image\": \"./assets/splash.png\",\n      \"resizeMode\": \"cover\",\n      \"backgroundColor\": \"#3B82F6\"\n    }\n  }\n}\n```\n\n### Programmatic Control\n\n```typescript\nimport * as SplashScreen from 'expo-splash-screen';\n\n// Prevent auto-hide\nSplashScreen.preventAutoHideAsync();\n\n// Hide when ready\nawait SplashScreen.hideAsync();\n```\n\n## App Icons\n\n### Configure Icons\n\n```json\n{\n  \"expo\": {\n    \"icon\": \"./assets/icon.png\",\n    \"ios\": {\n      \"icon\": \"./assets/ios-icon.png\"\n    },\n    \"android\": {\n      \"adaptiveIcon\": {\n        \"foregroundImage\": \"./assets/adaptive-icon.png\",\n        \"backgroundColor\": \"#ffffff\"\n      }\n    }\n  }\n}\n```\n\n## Notes\n\n- Use `EXPO_PUBLIC_` prefix for client-side env vars\n- Enable typed routes for type-safe navigation\n- Configure EAS for production builds\n- Use app.config.js for dynamic configuration\n- Add plugins for native functionality"
              },
              {
                "name": "expo-router-patterns",
                "description": "Expo Router file-based navigation patterns. Use when implementing navigation.",
                "path": "tech-stacks/js/react-native/skills/expo-router-patterns/SKILL.md",
                "frontmatter": {
                  "name": "expo-router-patterns",
                  "description": "Expo Router file-based navigation patterns. Use when implementing navigation."
                },
                "content": "# Expo Router Patterns Skill\n\nThis skill covers Expo Router navigation for React Native.\n\n## When to Use\n\nUse this skill when:\n- Setting up navigation\n- Creating screens and routes\n- Implementing deep linking\n- Protecting routes\n\n## Core Principle\n\n**FILE-BASED ROUTING** - Routes are defined by file structure (like Next.js).\n\n## File Structure\n\n```\napp/\nâ”œâ”€â”€ (auth)/             # Route group (not in URL)\nâ”‚   â”œâ”€â”€ login.tsx      # /login\nâ”‚   â”œâ”€â”€ register.tsx   # /register\nâ”‚   â””â”€â”€ _layout.tsx    # Layout for auth routes\nâ”œâ”€â”€ (tabs)/            # Tab navigation group\nâ”‚   â”œâ”€â”€ _layout.tsx    # Tabs layout\nâ”‚   â”œâ”€â”€ index.tsx      # /\nâ”‚   â””â”€â”€ profile.tsx    # /profile\nâ”œâ”€â”€ settings/\nâ”‚   â”œâ”€â”€ index.tsx      # /settings\nâ”‚   â””â”€â”€ [id].tsx       # /settings/123 (dynamic)\nâ”œâ”€â”€ _layout.tsx        # Root layout\nâ”œâ”€â”€ +not-found.tsx     # 404 page\nâ””â”€â”€ [...missing].tsx   # Catch-all route\n```\n\n## Basic Navigation\n\n### Link Component\n\n```typescript\nimport { Link } from 'expo-router';\n\n<Link href=\"/profile\">Go to Profile</Link>\n\n// With params\n<Link\n  href={{\n    pathname: '/user/[id]',\n    params: { id: '123' },\n  }}\n>\n  View User\n</Link>\n\n// As child (for custom styling)\n<Link href=\"/settings\" asChild>\n  <TouchableOpacity>\n    <Text>Settings</Text>\n  </TouchableOpacity>\n</Link>\n```\n\n### useRouter Hook\n\n```typescript\nimport { useRouter } from 'expo-router';\n\nfunction Component(): React.ReactElement {\n  const router = useRouter();\n\n  const handleNavigate = () => {\n    // Push new screen\n    router.push('/profile');\n\n    // Replace current screen\n    router.replace('/login');\n\n    // Go back\n    router.back();\n\n    // Navigate with params\n    router.push({\n      pathname: '/user/[id]',\n      params: { id: '123' },\n    });\n  };\n\n  return <Button onPress={handleNavigate}>Navigate</Button>;\n}\n```\n\n## Layout Components\n\n### Root Layout\n\n```typescript\n// app/_layout.tsx\nimport { Stack } from 'expo-router';\nimport { StatusBar } from 'expo-status-bar';\n\nexport default function RootLayout(): React.ReactElement {\n  return (\n    <>\n      <StatusBar style=\"auto\" />\n      <Stack>\n        <Stack.Screen name=\"(tabs)\" options={{ headerShown: false }} />\n        <Stack.Screen name=\"(auth)\" options={{ headerShown: false }} />\n        <Stack.Screen\n          name=\"modal\"\n          options={{\n            presentation: 'modal',\n            headerTitle: 'Modal',\n          }}\n        />\n      </Stack>\n    </>\n  );\n}\n```\n\n### Tab Layout\n\n```typescript\n// app/(tabs)/_layout.tsx\nimport { Tabs } from 'expo-router';\nimport { Ionicons } from '@expo/vector-icons';\n\nexport default function TabLayout(): React.ReactElement {\n  return (\n    <Tabs\n      screenOptions={{\n        tabBarActiveTintColor: '#3B82F6',\n        tabBarInactiveTintColor: '#6B7280',\n        headerShown: false,\n      }}\n    >\n      <Tabs.Screen\n        name=\"index\"\n        options={{\n          title: 'Home',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"home\" size={size} color={color} />\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"search\"\n        options={{\n          title: 'Search',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"search\" size={size} color={color} />\n          ),\n        }}\n      />\n      <Tabs.Screen\n        name=\"profile\"\n        options={{\n          title: 'Profile',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"person\" size={size} color={color} />\n          ),\n        }}\n      />\n    </Tabs>\n  );\n}\n```\n\n## Dynamic Routes\n\n### Single Parameter\n\n```typescript\n// app/user/[id].tsx\nimport { useLocalSearchParams } from 'expo-router';\nimport { View, Text } from 'react-native';\n\nexport default function UserPage(): React.ReactElement {\n  const { id } = useLocalSearchParams<{ id: string }>();\n\n  return (\n    <View className=\"flex-1 items-center justify-center\">\n      <Text className=\"text-lg\">User ID: {id}</Text>\n    </View>\n  );\n}\n```\n\n### Multiple Parameters\n\n```typescript\n// app/[category]/[id].tsx\nimport { useLocalSearchParams } from 'expo-router';\n\nexport default function ProductPage(): React.ReactElement {\n  const { category, id } = useLocalSearchParams<{\n    category: string;\n    id: string;\n  }>();\n\n  return (\n    <View>\n      <Text>Category: {category}</Text>\n      <Text>Product ID: {id}</Text>\n    </View>\n  );\n}\n```\n\n### Catch-All Route\n\n```typescript\n// app/[...path].tsx\nimport { useLocalSearchParams } from 'expo-router';\n\nexport default function CatchAllPage(): React.ReactElement {\n  const { path } = useLocalSearchParams<{ path: string[] }>();\n\n  return (\n    <View>\n      <Text>Path segments: {path?.join('/')}</Text>\n    </View>\n  );\n}\n```\n\n## Protected Routes\n\n```typescript\n// app/_layout.tsx\nimport { Redirect, Stack } from 'expo-router';\nimport { useAuth } from '@/hooks/useAuth';\nimport { Loading } from '@/components/Loading';\n\nexport default function RootLayout(): React.ReactElement {\n  const { user, isLoading } = useAuth();\n\n  if (isLoading) {\n    return <Loading />;\n  }\n\n  if (!user) {\n    return <Redirect href=\"/login\" />;\n  }\n\n  return <Stack />;\n}\n```\n\n## Route Groups\n\n```\napp/\nâ”œâ”€â”€ (auth)/           # Auth group (no /auth in URL)\nâ”‚   â”œâ”€â”€ login.tsx    # /login\nâ”‚   â””â”€â”€ register.tsx # /register\nâ”œâ”€â”€ (app)/           # App group (no /app in URL)\nâ”‚   â”œâ”€â”€ home.tsx     # /home\nâ”‚   â””â”€â”€ profile.tsx  # /profile\n```\n\n## Modal Routes\n\n```typescript\n// app/_layout.tsx\n<Stack>\n  <Stack.Screen name=\"(tabs)\" options={{ headerShown: false }} />\n  <Stack.Screen\n    name=\"modal\"\n    options={{\n      presentation: 'modal',\n      animation: 'slide_from_bottom',\n    }}\n  />\n</Stack>\n\n// Navigate to modal\nrouter.push('/modal');\n\n// Close modal\nrouter.back();\n```\n\n## Deep Linking\n\n### Configuration\n\n```json\n// app.json\n{\n  \"expo\": {\n    \"scheme\": \"myapp\",\n    \"web\": {\n      \"bundler\": \"metro\"\n    }\n  }\n}\n```\n\n### Links\n\n```\nmyapp://                    # Opens app\nmyapp://profile             # Opens /profile\nmyapp://user/123            # Opens /user/123\nhttps://myapp.com/profile   # Universal link\n```\n\n## Navigation Hooks\n\n### usePathname\n\n```typescript\nimport { usePathname } from 'expo-router';\n\nfunction Component(): React.ReactElement {\n  const pathname = usePathname();\n  // Returns: \"/user/123\"\n\n  return <Text>Current path: {pathname}</Text>;\n}\n```\n\n### useSegments\n\n```typescript\nimport { useSegments } from 'expo-router';\n\nfunction Component(): React.ReactElement {\n  const segments = useSegments();\n  // Returns: [\"user\", \"123\"]\n\n  return <Text>Segments: {segments.join(', ')}</Text>;\n}\n```\n\n### useFocusEffect\n\n```typescript\nimport { useFocusEffect } from 'expo-router';\nimport { useCallback } from 'react';\n\nfunction Screen(): React.ReactElement {\n  useFocusEffect(\n    useCallback(() => {\n      // Runs when screen is focused\n      console.log('Screen focused');\n\n      return () => {\n        // Cleanup when screen loses focus\n        console.log('Screen unfocused');\n      };\n    }, [])\n  );\n\n  return <View />;\n}\n```\n\n## Notes\n\n- Use route groups `(name)` to organize without affecting URLs\n- Layouts cascade (parent layouts wrap children)\n- `_layout.tsx` defines the navigation structure\n- `+not-found.tsx` handles 404 routes\n- Deep linking is configured automatically\n- Use typed params with generics for type safety"
              },
              {
                "name": "flashlist-patterns",
                "description": "FlashList high-performance list patterns. Use when implementing lists.",
                "path": "tech-stacks/js/react-native/skills/flashlist-patterns/SKILL.md",
                "frontmatter": {
                  "name": "flashlist-patterns",
                  "description": "FlashList high-performance list patterns. Use when implementing lists."
                },
                "content": "# FlashList Patterns Skill\n\nThis skill covers Shopify's FlashList for high-performance lists.\n\n## When to Use\n\nUse this skill when:\n- Implementing any scrollable list\n- Replacing FlatList\n- Lists have 50+ items\n- List performance is critical\n\n## Core Principle\n\n**FLASHLIST ALWAYS** - FlashList is 10x faster than FlatList. Use it for all lists.\n\n## Installation\n\n```bash\nnpm install @shopify/flash-list\n```\n\n## Basic Usage\n\n```typescript\nimport { FlashList } from '@shopify/flash-list';\n\ninterface Item {\n  id: string;\n  title: string;\n}\n\nfunction ItemList({ items }: { items: Item[] }): React.ReactElement {\n  return (\n    <FlashList\n      data={items}\n      renderItem={({ item }) => (\n        <View className=\"p-4 border-b border-gray-200\">\n          <Text className=\"text-lg\">{item.title}</Text>\n        </View>\n      )}\n      estimatedItemSize={60}  // Required!\n      keyExtractor={(item) => item.id}\n    />\n  );\n}\n```\n\n## Required Props\n\n### estimatedItemSize\n\n```typescript\n// Required for FlashList to calculate recycling\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={80}  // Average height of items in pixels\n/>\n```\n\n## Performance Optimization\n\n### Memoize renderItem\n\n```typescript\nimport { useCallback, memo } from 'react';\n\nconst ItemCard = memo(function ItemCard({ item }: { item: Item }) {\n  return (\n    <View className=\"p-4\">\n      <Text>{item.title}</Text>\n    </View>\n  );\n});\n\nfunction ItemList({ items }: { items: Item[] }): React.ReactElement {\n  const renderItem = useCallback(\n    ({ item }: { item: Item }) => <ItemCard item={item} />,\n    []\n  );\n\n  return (\n    <FlashList\n      data={items}\n      renderItem={renderItem}\n      estimatedItemSize={60}\n    />\n  );\n}\n```\n\n### Use keyExtractor\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  keyExtractor={(item) => item.id}  // Unique stable key\n/>\n```\n\n## Different Item Types\n\n### getItemType\n\n```typescript\ninterface ListItem {\n  id: string;\n  type: 'header' | 'item' | 'separator';\n  data: unknown;\n}\n\n<FlashList\n  data={items}\n  renderItem={({ item }) => {\n    switch (item.type) {\n      case 'header':\n        return <HeaderComponent data={item.data} />;\n      case 'separator':\n        return <SeparatorComponent />;\n      default:\n        return <ItemComponent data={item.data} />;\n    }\n  }}\n  getItemType={(item) => item.type}  // Enables better recycling\n  estimatedItemSize={60}\n/>\n```\n\n### overrideItemLayout\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  overrideItemLayout={(layout, item) => {\n    // Set exact size for different item types\n    if (item.type === 'header') {\n      layout.size = 100;\n    } else if (item.type === 'separator') {\n      layout.size = 20;\n    } else {\n      layout.size = 60;\n    }\n  }}\n/>\n```\n\n## Horizontal Lists\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={150}\n  horizontal\n/>\n```\n\n## Grid Layout\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={180}\n  numColumns={2}\n/>\n```\n\n## Pull to Refresh\n\n```typescript\nimport { useState } from 'react';\nimport { RefreshControl } from 'react-native';\n\nfunction RefreshableList(): React.ReactElement {\n  const [refreshing, setRefreshing] = useState(false);\n\n  const onRefresh = async () => {\n    setRefreshing(true);\n    await fetchNewData();\n    setRefreshing(false);\n  };\n\n  return (\n    <FlashList\n      data={items}\n      renderItem={renderItem}\n      estimatedItemSize={60}\n      refreshControl={\n        <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\n      }\n    />\n  );\n}\n```\n\n## Infinite Scroll\n\n```typescript\nfunction InfiniteList(): React.ReactElement {\n  const [items, setItems] = useState<Item[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n\n  const loadMore = async () => {\n    if (loading || !hasMore) return;\n\n    setLoading(true);\n    const newItems = await fetchMoreItems();\n\n    if (newItems.length === 0) {\n      setHasMore(false);\n    } else {\n      setItems((prev) => [...prev, ...newItems]);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <FlashList\n      data={items}\n      renderItem={renderItem}\n      estimatedItemSize={60}\n      onEndReached={loadMore}\n      onEndReachedThreshold={0.5}\n      ListFooterComponent={loading ? <ActivityIndicator /> : null}\n    />\n  );\n}\n```\n\n## Empty State\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  ListEmptyComponent={\n    <View className=\"flex-1 items-center justify-center p-8\">\n      <Text className=\"text-gray-500\">No items found</Text>\n    </View>\n  }\n/>\n```\n\n## Headers and Footers\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  ListHeaderComponent={\n    <View className=\"p-4 bg-gray-100\">\n      <Text className=\"text-xl font-bold\">Items</Text>\n    </View>\n  }\n  ListFooterComponent={\n    <View className=\"p-4\">\n      <Text className=\"text-gray-500 text-center\">End of list</Text>\n    </View>\n  }\n/>\n```\n\n## Sticky Headers\n\n```typescript\ninterface Section {\n  title: string;\n  data: Item[];\n}\n\n// Use SectionList-like pattern\n<FlashList\n  data={flattenedData}\n  renderItem={({ item }) => {\n    if (item.isHeader) {\n      return <StickyHeader title={item.title} />;\n    }\n    return <ItemCard item={item} />;\n  }}\n  stickyHeaderIndices={headerIndices}\n  estimatedItemSize={60}\n  getItemType={(item) => (item.isHeader ? 'header' : 'item')}\n/>\n```\n\n## Scroll to Item\n\n```typescript\nimport { useRef } from 'react';\nimport { FlashList } from '@shopify/flash-list';\n\nfunction ScrollableList(): React.ReactElement {\n  const listRef = useRef<FlashList<Item>>(null);\n\n  const scrollToTop = () => {\n    listRef.current?.scrollToOffset({ offset: 0, animated: true });\n  };\n\n  const scrollToIndex = (index: number) => {\n    listRef.current?.scrollToIndex({ index, animated: true });\n  };\n\n  return (\n    <>\n      <FlashList\n        ref={listRef}\n        data={items}\n        renderItem={renderItem}\n        estimatedItemSize={60}\n      />\n      <Button onPress={scrollToTop}>Scroll to Top</Button>\n    </>\n  );\n}\n```\n\n## Common Props\n\n```typescript\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  keyExtractor={(item) => item.id}\n  getItemType={(item) => item.type}\n  numColumns={1}\n  horizontal={false}\n  inverted={false}\n  showsVerticalScrollIndicator={true}\n  showsHorizontalScrollIndicator={false}\n  onEndReached={loadMore}\n  onEndReachedThreshold={0.5}\n  refreshControl={<RefreshControl />}\n  ListHeaderComponent={<Header />}\n  ListFooterComponent={<Footer />}\n  ListEmptyComponent={<EmptyState />}\n  ItemSeparatorComponent={() => <View className=\"h-px bg-gray-200\" />}\n/>\n```\n\n## Debug Mode\n\n```typescript\n// Enable debug logs in development\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  // Debug overlay shows recycling info\n/>\n```\n\n## Notes\n\n- `estimatedItemSize` is required\n- Use `getItemType` for different item layouts\n- Memoize renderItem with useCallback\n- Use React.memo for item components\n- FlashList recycles views for performance\n- Test with large datasets (1000+ items)"
              },
              {
                "name": "form-handling-mobile",
                "description": "React Hook Form and Zod for React Native forms. Use when implementing forms.",
                "path": "tech-stacks/js/react-native/skills/form-handling-mobile/SKILL.md",
                "frontmatter": {
                  "name": "form-handling-mobile",
                  "description": "React Hook Form and Zod for React Native forms. Use when implementing forms."
                },
                "content": "# Form Handling Mobile Skill\n\nThis skill covers React Hook Form with Zod validation for React Native.\n\n## When to Use\n\nUse this skill when:\n- Building login/signup forms\n- Creating data entry forms\n- Implementing form validation\n- Handling complex form state\n\n## Core Principle\n\n**CONTROLLED VALIDATION** - Use Zod for schema validation, React Hook Form for state.\n\n## Installation\n\n```bash\nnpm install react-hook-form @hookform/resolvers zod\n```\n\n## Basic Form\n\n```typescript\nimport { View, Text, TextInput, TouchableOpacity } from 'react-native';\nimport { useForm, Controller } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\n\nconst loginSchema = z.object({\n  email: z.string().email('Invalid email address'),\n  password: z.string().min(8, 'Password must be at least 8 characters'),\n});\n\ntype LoginFormData = z.infer<typeof loginSchema>;\n\nexport function LoginForm(): React.ReactElement {\n  const {\n    control,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: '',\n      password: '',\n    },\n  });\n\n  const onSubmit = (data: LoginFormData) => {\n    console.log(data);\n  };\n\n  return (\n    <View className=\"gap-4\">\n      <View>\n        <Text className=\"mb-1 font-medium\">Email</Text>\n        <Controller\n          control={control}\n          name=\"email\"\n          render={({ field: { onChange, onBlur, value } }) => (\n            <TextInput\n              className=\"border border-gray-300 rounded-lg px-4 py-3\"\n              placeholder=\"Enter email\"\n              value={value}\n              onChangeText={onChange}\n              onBlur={onBlur}\n              keyboardType=\"email-address\"\n              autoCapitalize=\"none\"\n              autoComplete=\"email\"\n            />\n          )}\n        />\n        {errors.email && (\n          <Text className=\"text-red-500 text-sm mt-1\">\n            {errors.email.message}\n          </Text>\n        )}\n      </View>\n\n      <View>\n        <Text className=\"mb-1 font-medium\">Password</Text>\n        <Controller\n          control={control}\n          name=\"password\"\n          render={({ field: { onChange, onBlur, value } }) => (\n            <TextInput\n              className=\"border border-gray-300 rounded-lg px-4 py-3\"\n              placeholder=\"Enter password\"\n              value={value}\n              onChangeText={onChange}\n              onBlur={onBlur}\n              secureTextEntry\n              autoComplete=\"password\"\n            />\n          )}\n        />\n        {errors.password && (\n          <Text className=\"text-red-500 text-sm mt-1\">\n            {errors.password.message}\n          </Text>\n        )}\n      </View>\n\n      <TouchableOpacity\n        onPress={handleSubmit(onSubmit)}\n        className=\"bg-blue-600 py-4 rounded-lg\"\n      >\n        <Text className=\"text-white text-center font-semibold\">Sign In</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n```\n\n## Complex Validation Schema\n\n```typescript\nconst signupSchema = z\n  .object({\n    email: z.string().email('Invalid email'),\n    username: z\n      .string()\n      .min(3, 'Username must be at least 3 characters')\n      .max(20, 'Username must be at most 20 characters')\n      .regex(/^[a-zA-Z0-9_]+$/, 'Only letters, numbers, and underscores'),\n    password: z\n      .string()\n      .min(8, 'Password must be at least 8 characters')\n      .regex(/[A-Z]/, 'Must contain uppercase letter')\n      .regex(/[a-z]/, 'Must contain lowercase letter')\n      .regex(/[0-9]/, 'Must contain number'),\n    confirmPassword: z.string(),\n    acceptTerms: z.boolean().refine((val) => val === true, {\n      message: 'You must accept the terms',\n    }),\n  })\n  .refine((data) => data.password === data.confirmPassword, {\n    message: 'Passwords do not match',\n    path: ['confirmPassword'],\n  });\n```\n\n## Reusable Input Component\n\n```typescript\nimport { Control, Controller, FieldValues, Path } from 'react-hook-form';\n\ninterface FormInputProps<T extends FieldValues> {\n  control: Control<T>;\n  name: Path<T>;\n  label: string;\n  placeholder?: string;\n  secureTextEntry?: boolean;\n  keyboardType?: 'default' | 'email-address' | 'numeric' | 'phone-pad';\n  autoCapitalize?: 'none' | 'sentences' | 'words' | 'characters';\n  error?: string;\n}\n\nexport function FormInput<T extends FieldValues>({\n  control,\n  name,\n  label,\n  placeholder,\n  secureTextEntry,\n  keyboardType = 'default',\n  autoCapitalize = 'sentences',\n  error,\n}: FormInputProps<T>): React.ReactElement {\n  return (\n    <View className=\"mb-4\">\n      <Text className=\"mb-1 font-medium text-gray-700\">{label}</Text>\n      <Controller\n        control={control}\n        name={name}\n        render={({ field: { onChange, onBlur, value } }) => (\n          <TextInput\n            className={`border rounded-lg px-4 py-3 ${\n              error ? 'border-red-500' : 'border-gray-300'\n            }`}\n            placeholder={placeholder}\n            value={value}\n            onChangeText={onChange}\n            onBlur={onBlur}\n            secureTextEntry={secureTextEntry}\n            keyboardType={keyboardType}\n            autoCapitalize={autoCapitalize}\n          />\n        )}\n      />\n      {error && (\n        <Text className=\"text-red-500 text-sm mt-1\">{error}</Text>\n      )}\n    </View>\n  );\n}\n\n// Usage\n<FormInput\n  control={control}\n  name=\"email\"\n  label=\"Email\"\n  placeholder=\"Enter email\"\n  keyboardType=\"email-address\"\n  autoCapitalize=\"none\"\n  error={errors.email?.message}\n/>\n```\n\n## With Gluestack-ui\n\n```typescript\nimport {\n  FormControl,\n  FormControlLabel,\n  FormControlLabelText,\n  FormControlError,\n  FormControlErrorText,\n  Input,\n  InputField,\n} from '@gluestack-ui/themed';\nimport { Controller, useForm } from 'react-hook-form';\n\nexport function StyledLoginForm(): React.ReactElement {\n  const { control, handleSubmit, formState: { errors } } = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n  });\n\n  return (\n    <View className=\"gap-4\">\n      <FormControl isInvalid={!!errors.email}>\n        <FormControlLabel>\n          <FormControlLabelText>Email</FormControlLabelText>\n        </FormControlLabel>\n        <Controller\n          control={control}\n          name=\"email\"\n          render={({ field: { onChange, value } }) => (\n            <Input>\n              <InputField\n                value={value}\n                onChangeText={onChange}\n                placeholder=\"Enter email\"\n                keyboardType=\"email-address\"\n                autoCapitalize=\"none\"\n              />\n            </Input>\n          )}\n        />\n        <FormControlError>\n          <FormControlErrorText>\n            {errors.email?.message}\n          </FormControlErrorText>\n        </FormControlError>\n      </FormControl>\n    </View>\n  );\n}\n```\n\n## Form with Mutation\n\n```typescript\nimport { useMutation } from '@tanstack/react-query';\nimport { useRouter } from 'expo-router';\n\nexport function LoginFormWithMutation(): React.ReactElement {\n  const router = useRouter();\n  const { mutate: login, isPending } = useLoginMutation();\n\n  const {\n    control,\n    handleSubmit,\n    formState: { errors },\n    setError,\n  } = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n  });\n\n  const onSubmit = (data: LoginFormData) => {\n    login(data, {\n      onSuccess: () => {\n        router.replace('/(tabs)');\n      },\n      onError: (error) => {\n        setError('root', {\n          message: error.message || 'Login failed',\n        });\n      },\n    });\n  };\n\n  return (\n    <View className=\"gap-4\">\n      {errors.root && (\n        <View className=\"bg-red-100 p-4 rounded-lg\">\n          <Text className=\"text-red-700\">{errors.root.message}</Text>\n        </View>\n      )}\n\n      {/* Form fields */}\n\n      <TouchableOpacity\n        onPress={handleSubmit(onSubmit)}\n        disabled={isPending}\n        className={`py-4 rounded-lg ${\n          isPending ? 'bg-gray-400' : 'bg-blue-600'\n        }`}\n      >\n        <Text className=\"text-white text-center font-semibold\">\n          {isPending ? 'Signing in...' : 'Sign In'}\n        </Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n```\n\n## Checkbox and Switch\n\n```typescript\nconst preferencesSchema = z.object({\n  emailNotifications: z.boolean(),\n  pushNotifications: z.boolean(),\n  newsletter: z.boolean(),\n});\n\n<Controller\n  control={control}\n  name=\"emailNotifications\"\n  render={({ field: { onChange, value } }) => (\n    <View className=\"flex-row items-center justify-between py-2\">\n      <Text>Email Notifications</Text>\n      <Switch value={value} onValueChange={onChange} />\n    </View>\n  )}\n/>\n```\n\n## Select/Picker\n\n```typescript\nimport { Picker } from '@react-native-picker/picker';\n\n<Controller\n  control={control}\n  name=\"country\"\n  render={({ field: { onChange, value } }) => (\n    <View className=\"border border-gray-300 rounded-lg\">\n      <Picker selectedValue={value} onValueChange={onChange}>\n        <Picker.Item label=\"Select country\" value=\"\" />\n        <Picker.Item label=\"United States\" value=\"US\" />\n        <Picker.Item label=\"Canada\" value=\"CA\" />\n        <Picker.Item label=\"Mexico\" value=\"MX\" />\n      </Picker>\n    </View>\n  )}\n/>\n```\n\n## Watch and Dynamic Fields\n\n```typescript\nfunction DynamicForm(): React.ReactElement {\n  const { control, watch } = useForm();\n  const showAdditionalFields = watch('hasAccount');\n\n  return (\n    <View>\n      <Controller\n        control={control}\n        name=\"hasAccount\"\n        render={({ field: { onChange, value } }) => (\n          <View className=\"flex-row items-center\">\n            <Switch value={value} onValueChange={onChange} />\n            <Text className=\"ml-2\">I have an account</Text>\n          </View>\n        )}\n      />\n\n      {showAdditionalFields && (\n        <FormInput\n          control={control}\n          name=\"accountId\"\n          label=\"Account ID\"\n        />\n      )}\n    </View>\n  );\n}\n```\n\n## Notes\n\n- Use Zod for type-safe validation\n- Create reusable form components\n- Handle loading states during submission\n- Show validation errors inline\n- Use setError for server errors\n- Test form behavior on both platforms"
              },
              {
                "name": "gluestack-ui-setup",
                "description": "Gluestack-ui component library setup and usage. Use when implementing pre-built accessible components.",
                "path": "tech-stacks/js/react-native/skills/gluestack-ui-setup/SKILL.md",
                "frontmatter": {
                  "name": "gluestack-ui-setup",
                  "description": "Gluestack-ui component library setup and usage. Use when implementing pre-built accessible components."
                },
                "content": "# Gluestack-ui Setup Skill\n\nThis skill covers Gluestack-ui component library for React Native.\n\n## When to Use\n\nUse this skill when:\n- Need pre-built accessible components\n- Implementing forms with inputs, selects, etc.\n- Building modals, tooltips, popovers\n- Want shadcn/ui-like experience for mobile\n\n## Core Principle\n\n**ACCESSIBLE BY DEFAULT** - Gluestack components are built with accessibility in mind.\n\n## Installation\n\n```bash\nnpx gluestack-ui init\n```\n\nFollow the prompts to configure:\n- Style engine (NativeWind recommended)\n- TypeScript\n- Path aliases\n\n## Available Components\n\n### Form Components\n\n```typescript\nimport {\n  Input,\n  InputField,\n  InputSlot,\n  InputIcon,\n} from '@gluestack-ui/themed';\n\n<Input>\n  <InputSlot>\n    <InputIcon as={SearchIcon} />\n  </InputSlot>\n  <InputField\n    placeholder=\"Search...\"\n    accessibilityLabel=\"Search input\"\n  />\n</Input>\n```\n\n### Button\n\n```typescript\nimport { Button, ButtonText, ButtonIcon } from '@gluestack-ui/themed';\n\n<Button size=\"md\" variant=\"solid\" action=\"primary\">\n  <ButtonText>Click Me</ButtonText>\n</Button>\n\n<Button size=\"lg\" variant=\"outline\" action=\"secondary\">\n  <ButtonIcon as={PlusIcon} />\n  <ButtonText>Add Item</ButtonText>\n</Button>\n```\n\n### Select\n\n```typescript\nimport {\n  Select,\n  SelectTrigger,\n  SelectInput,\n  SelectPortal,\n  SelectBackdrop,\n  SelectContent,\n  SelectItem,\n} from '@gluestack-ui/themed';\n\n<Select>\n  <SelectTrigger>\n    <SelectInput placeholder=\"Select option\" />\n  </SelectTrigger>\n  <SelectPortal>\n    <SelectBackdrop />\n    <SelectContent>\n      <SelectItem label=\"Option 1\" value=\"1\" />\n      <SelectItem label=\"Option 2\" value=\"2\" />\n      <SelectItem label=\"Option 3\" value=\"3\" />\n    </SelectContent>\n  </SelectPortal>\n</Select>\n```\n\n### Checkbox\n\n```typescript\nimport {\n  Checkbox,\n  CheckboxIndicator,\n  CheckboxIcon,\n  CheckboxLabel,\n} from '@gluestack-ui/themed';\nimport { CheckIcon } from 'lucide-react-native';\n\n<Checkbox value=\"agree\">\n  <CheckboxIndicator>\n    <CheckboxIcon as={CheckIcon} />\n  </CheckboxIndicator>\n  <CheckboxLabel>I agree to terms</CheckboxLabel>\n</Checkbox>\n```\n\n### Modal\n\n```typescript\nimport {\n  Modal,\n  ModalBackdrop,\n  ModalContent,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  ModalCloseButton,\n} from '@gluestack-ui/themed';\n\nconst [showModal, setShowModal] = useState(false);\n\n<Modal isOpen={showModal} onClose={() => setShowModal(false)}>\n  <ModalBackdrop />\n  <ModalContent>\n    <ModalHeader>\n      <Heading>Modal Title</Heading>\n      <ModalCloseButton />\n    </ModalHeader>\n    <ModalBody>\n      <Text>Modal content goes here</Text>\n    </ModalBody>\n    <ModalFooter>\n      <Button onPress={() => setShowModal(false)}>\n        <ButtonText>Close</ButtonText>\n      </Button>\n    </ModalFooter>\n  </ModalContent>\n</Modal>\n```\n\n### Toast\n\n```typescript\nimport { useToast, Toast, ToastTitle, ToastDescription } from '@gluestack-ui/themed';\n\nfunction Component(): React.ReactElement {\n  const toast = useToast();\n\n  const showToast = () => {\n    toast.show({\n      placement: 'top',\n      render: ({ id }) => (\n        <Toast nativeID={id} action=\"success\">\n          <ToastTitle>Success!</ToastTitle>\n          <ToastDescription>Your action was completed.</ToastDescription>\n        </Toast>\n      ),\n    });\n  };\n\n  return (\n    <Button onPress={showToast}>\n      <ButtonText>Show Toast</ButtonText>\n    </Button>\n  );\n}\n```\n\n### Alert\n\n```typescript\nimport { Alert, AlertIcon, AlertText } from '@gluestack-ui/themed';\nimport { InfoIcon } from 'lucide-react-native';\n\n<Alert action=\"info\">\n  <AlertIcon as={InfoIcon} />\n  <AlertText>This is an informational alert.</AlertText>\n</Alert>\n\n<Alert action=\"error\">\n  <AlertIcon as={AlertCircleIcon} />\n  <AlertText>Something went wrong!</AlertText>\n</Alert>\n```\n\n## Combining with NativeWind\n\n```typescript\nimport { Button, ButtonText } from '@gluestack-ui/themed';\n\n// Use className for additional styling\n<Button className=\"bg-blue-600 rounded-full\">\n  <ButtonText className=\"text-white font-bold\">\n    Custom Styled\n  </ButtonText>\n</Button>\n```\n\n## Form Example\n\n```typescript\nimport { View, Text } from 'react-native';\nimport {\n  Input,\n  InputField,\n  Button,\n  ButtonText,\n  FormControl,\n  FormControlLabel,\n  FormControlLabelText,\n  FormControlError,\n  FormControlErrorText,\n} from '@gluestack-ui/themed';\nimport { useForm, Controller } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\n\nconst schema = z.object({\n  email: z.string().email('Invalid email'),\n  password: z.string().min(8, 'Password must be at least 8 characters'),\n});\n\ntype FormData = z.infer<typeof schema>;\n\nexport function LoginForm(): React.ReactElement {\n  const { control, handleSubmit, formState: { errors } } = useForm<FormData>({\n    resolver: zodResolver(schema),\n  });\n\n  const onSubmit = (data: FormData) => {\n    console.log(data);\n  };\n\n  return (\n    <View className=\"gap-4\">\n      <FormControl isInvalid={!!errors.email}>\n        <FormControlLabel>\n          <FormControlLabelText>Email</FormControlLabelText>\n        </FormControlLabel>\n        <Controller\n          control={control}\n          name=\"email\"\n          render={({ field: { onChange, value } }) => (\n            <Input>\n              <InputField\n                value={value}\n                onChangeText={onChange}\n                keyboardType=\"email-address\"\n                autoCapitalize=\"none\"\n              />\n            </Input>\n          )}\n        />\n        <FormControlError>\n          <FormControlErrorText>{errors.email?.message}</FormControlErrorText>\n        </FormControlError>\n      </FormControl>\n\n      <FormControl isInvalid={!!errors.password}>\n        <FormControlLabel>\n          <FormControlLabelText>Password</FormControlLabelText>\n        </FormControlLabel>\n        <Controller\n          control={control}\n          name=\"password\"\n          render={({ field: { onChange, value } }) => (\n            <Input>\n              <InputField\n                value={value}\n                onChangeText={onChange}\n                secureTextEntry\n              />\n            </Input>\n          )}\n        />\n        <FormControlError>\n          <FormControlErrorText>{errors.password?.message}</FormControlErrorText>\n        </FormControlError>\n      </FormControl>\n\n      <Button onPress={handleSubmit(onSubmit)}>\n        <ButtonText>Sign In</ButtonText>\n      </Button>\n    </View>\n  );\n}\n```\n\n## Theming\n\n```typescript\n// gluestack-ui.config.ts\nimport { config } from '@gluestack-ui/config';\n\nexport default {\n  ...config,\n  tokens: {\n    ...config.tokens,\n    colors: {\n      ...config.tokens.colors,\n      primary500: '#3B82F6',\n      primary600: '#2563EB',\n    },\n  },\n};\n```\n\n## Notes\n\n- Gluestack components work seamlessly with NativeWind\n- All components support accessibility attributes\n- Use FormControl for form validation feedback\n- Toast requires ToastProvider at app root\n- Modal requires OverlayProvider for proper rendering"
              },
              {
                "name": "maestro-testing",
                "description": "Maestro E2E testing patterns for React Native. Use when implementing end-to-end tests.",
                "path": "tech-stacks/js/react-native/skills/maestro-testing/SKILL.md",
                "frontmatter": {
                  "name": "maestro-testing",
                  "description": "Maestro E2E testing patterns for React Native. Use when implementing end-to-end tests."
                },
                "content": "# Maestro Testing Skill\n\nThis skill covers Maestro E2E testing for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Writing E2E tests\n- Testing user flows\n- Automating UI testing\n- CI/CD testing\n\n## Core Principle\n\n**YAML SIMPLICITY** - Maestro uses simple YAML syntax for readable, maintainable tests.\n\n## Installation\n\n```bash\n# macOS/Linux\ncurl -Ls \"https://get.maestro.mobile.dev\" | bash\n\n# Verify installation\nmaestro -v\n```\n\n## Project Structure\n\n```\n__tests__/\nâ””â”€â”€ e2e/\n    â”œâ”€â”€ flows/\n    â”‚   â”œâ”€â”€ login.yaml\n    â”‚   â””â”€â”€ common.yaml\n    â”œâ”€â”€ login_flow.yaml\n    â”œâ”€â”€ signup_flow.yaml\n    â”œâ”€â”€ navigation_flow.yaml\n    â””â”€â”€ checkout_flow.yaml\n```\n\n## Basic Test\n\n```yaml\n# __tests__/e2e/login_flow.yaml\nappId: com.myapp\n---\n- launchApp\n- tapOn: \"Email\"\n- inputText: \"test@example.com\"\n- tapOn: \"Password\"\n- inputText: \"password123\"\n- tapOn: \"Sign In\"\n- assertVisible: \"Welcome\"\n```\n\n## Common Commands\n\n### App Control\n\n```yaml\n# Launch app\n- launchApp\n\n# Clear app state and launch\n- launchApp:\n    clearState: true\n\n# Stop app\n- stopApp\n```\n\n### Tap Actions\n\n```yaml\n# Tap by text\n- tapOn: \"Button Text\"\n\n# Tap by accessibility ID\n- tapOn:\n    id: \"submit-button\"\n\n# Tap by index (when multiple matches)\n- tapOn:\n    text: \"Item\"\n    index: 0\n\n# Long press\n- longPressOn: \"Delete\"\n```\n\n### Text Input\n\n```yaml\n# Input text\n- inputText: \"Hello World\"\n\n# Clear and input\n- clearText\n- inputText: \"New Text\"\n\n# Input in specific field\n- tapOn: \"Email\"\n- inputText: \"user@example.com\"\n```\n\n### Assertions\n\n```yaml\n# Assert element is visible\n- assertVisible: \"Success\"\n\n# Assert element is not visible\n- assertNotVisible: \"Error\"\n\n# Assert with timeout\n- extendedWaitUntil:\n    visible: \"Loaded\"\n    timeout: 10000\n```\n\n### Scrolling\n\n```yaml\n# Scroll down\n- scroll\n\n# Scroll until visible\n- scrollUntilVisible:\n    element: \"Target Item\"\n    direction: DOWN\n    timeout: 10000\n\n# Scroll in element\n- scroll:\n    element:\n      id: \"scrollable-list\"\n    direction: DOWN\n```\n\n### Swipe Gestures\n\n```yaml\n# Swipe left (delete)\n- swipe:\n    direction: LEFT\n    start: \"Item to delete\"\n\n# Swipe down (refresh)\n- swipe:\n    direction: DOWN\n    start:\n      above: \"First Item\"\n```\n\n### Waiting\n\n```yaml\n# Wait for animation\n- waitForAnimationToEnd\n\n# Wait specific time (ms)\n- wait: 2000\n\n# Wait until visible\n- extendedWaitUntil:\n    visible: \"Element\"\n    timeout: 5000\n```\n\n### Screenshots\n\n```yaml\n# Take screenshot\n- takeScreenshot: screen_name\n```\n\n## Flow Composition\n\n### Reusable Flows\n\n```yaml\n# flows/login.yaml\n- tapOn: \"Email\"\n- inputText: ${email}\n- tapOn: \"Password\"\n- inputText: ${password}\n- tapOn: \"Sign In\"\n- assertVisible: \"Welcome\"\n```\n\n```yaml\n# main_test.yaml\n- launchApp\n- runFlow:\n    file: flows/login.yaml\n    env:\n      email: \"test@example.com\"\n      password: \"password123\"\n- tapOn: \"Profile\"\n```\n\n### Conditional Flows\n\n```yaml\n# Handle optional popups\n- runFlow:\n    when:\n      visible: \"Accept Cookies\"\n    commands:\n      - tapOn: \"Accept\"\n\n- tapOn: \"Continue\"\n```\n\n## Environment Variables\n\n```yaml\n# Use environment variables\nappId: ${APP_ID}\n---\n- launchApp\n- tapOn: \"Email\"\n- inputText: ${TEST_EMAIL}\n```\n\n```bash\n# Run with variables\nAPP_ID=com.myapp TEST_EMAIL=test@test.com maestro test test.yaml\n```\n\n## Platform-Specific Tests\n\n```yaml\n# iOS-specific\n- runFlow:\n    when:\n      platform: iOS\n    commands:\n      - tapOn: \"iOS Settings\"\n\n# Android-specific\n- runFlow:\n    when:\n      platform: Android\n    commands:\n      - tapOn: \"Android Settings\"\n```\n\n## Complete Test Examples\n\n### Login Flow\n\n```yaml\n# __tests__/e2e/login_flow.yaml\nappId: com.myapp\n---\n- launchApp:\n    clearState: true\n\n# Navigate to login\n- tapOn: \"Sign In\"\n\n# Enter credentials\n- tapOn:\n    id: \"email-input\"\n- inputText: \"test@example.com\"\n\n- tapOn:\n    id: \"password-input\"\n- inputText: \"password123\"\n\n# Submit\n- tapOn:\n    id: \"login-button\"\n\n# Wait for navigation\n- waitForAnimationToEnd\n\n# Verify success\n- assertVisible: \"Welcome back\"\n- assertVisible: \"Home\"\n\n# Take screenshot\n- takeScreenshot: login_success\n```\n\n### Form Validation\n\n```yaml\n# __tests__/e2e/form_validation.yaml\nappId: com.myapp\n---\n- launchApp\n\n# Test empty submission\n- tapOn: \"Submit\"\n- assertVisible: \"Email is required\"\n\n# Test invalid email\n- tapOn: \"Email\"\n- inputText: \"invalid\"\n- tapOn: \"Submit\"\n- assertVisible: \"Invalid email\"\n\n# Test valid submission\n- clearText\n- inputText: \"valid@example.com\"\n- tapOn: \"Password\"\n- inputText: \"ValidPass123!\"\n- tapOn: \"Submit\"\n- assertVisible: \"Success\"\n```\n\n### Navigation Flow\n\n```yaml\n# __tests__/e2e/navigation_flow.yaml\nappId: com.myapp\n---\n- launchApp\n\n# Test tab navigation\n- tapOn:\n    id: \"tab-home\"\n- assertVisible: \"Home Screen\"\n\n- tapOn:\n    id: \"tab-search\"\n- assertVisible: \"Search\"\n\n- tapOn:\n    id: \"tab-profile\"\n- assertVisible: \"Profile\"\n\n# Test back navigation\n- tapOn: \"Settings\"\n- assertVisible: \"Settings\"\n- back\n- assertVisible: \"Profile\"\n```\n\n## Running Tests\n\n```bash\n# Run single test\nmaestro test __tests__/e2e/login_flow.yaml\n\n# Run all tests\nmaestro test __tests__/e2e/\n\n# Run on specific platform\nmaestro test __tests__/e2e/ --platform ios\n\n# Generate JUnit report\nmaestro test __tests__/e2e/ --format junit --output results/\n```\n\n## CI/CD Integration\n\n```yaml\n# .github/workflows/e2e.yml\nname: E2E Tests\n\non: [push, pull_request]\n\njobs:\n  e2e:\n    runs-on: macos-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Node\n        uses: actions/setup-node@v4\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Install Maestro\n        run: |\n          curl -Ls \"https://get.maestro.mobile.dev\" | bash\n          echo \"$HOME/.maestro/bin\" >> $GITHUB_PATH\n\n      - name: Build app\n        run: npx expo prebuild && npx expo run:ios\n\n      - name: Run E2E tests\n        run: maestro test __tests__/e2e/\n\n      - name: Upload results\n        uses: actions/upload-artifact@v3\n        with:\n          name: e2e-results\n          path: results/\n```\n\n## Notes\n\n- Requires simulator/emulator running\n- Use accessibility IDs for reliable selection\n- Keep tests independent\n- Use reusable flows for common actions\n- Test on both platforms\n- Consider Maestro Cloud for CI"
              },
              {
                "name": "nativewind-patterns",
                "description": "NativeWind (Tailwind CSS for React Native) styling patterns. Use when styling mobile components.",
                "path": "tech-stacks/js/react-native/skills/nativewind-patterns/SKILL.md",
                "frontmatter": {
                  "name": "nativewind-patterns",
                  "description": "NativeWind (Tailwind CSS for React Native) styling patterns. Use when styling mobile components."
                },
                "content": "# NativeWind Patterns Skill\n\nThis skill covers NativeWind styling for React Native applications.\n\n## When to Use\n\nUse this skill when:\n- Styling React Native components\n- Converting Tailwind patterns to mobile\n- Implementing dark mode\n- Responsive mobile design\n\n## Core Principle\n\n**UTILITY FIRST** - Use className with Tailwind utilities adapted for mobile.\n\n## Installation\n\n```bash\nnpx expo install nativewind\nnpm install --dev tailwindcss\nnpx tailwindcss init\n```\n\n## Configuration\n\n```javascript\n// tailwind.config.js\nmodule.exports = {\n  content: [\n    \"./app/**/*.{js,jsx,ts,tsx}\",\n    \"./components/**/*.{js,jsx,ts,tsx}\"\n  ],\n  presets: [require(\"nativewind/preset\")],\n  theme: {\n    extend: {},\n  },\n  plugins: [],\n}\n```\n\n```javascript\n// babel.config.js\nmodule.exports = function(api) {\n  api.cache(true);\n  return {\n    presets: ['babel-preset-expo'],\n    plugins: [\"nativewind/babel\"],\n  };\n};\n```\n\n## Basic Usage\n\n```typescript\nimport { View, Text } from 'react-native';\n\nexport function Card(): React.ReactElement {\n  return (\n    <View className=\"bg-white rounded-lg p-4 shadow-md\">\n      <Text className=\"text-lg font-bold text-gray-900\">\n        Card Title\n      </Text>\n      <Text className=\"text-sm text-gray-600 mt-2\">\n        Card description\n      </Text>\n    </View>\n  );\n}\n```\n\n## Flexbox Layouts\n\n```typescript\n// Center content\n<View className=\"flex-1 items-center justify-center\">\n  <Text>Centered</Text>\n</View>\n\n// Space between\n<View className=\"flex-row items-center justify-between\">\n  <Text>Left</Text>\n  <Text>Right</Text>\n</View>\n\n// Vertical stack with gap\n<View className=\"flex-col gap-4\">\n  <Text>Item 1</Text>\n  <Text>Item 2</Text>\n</View>\n\n// Horizontal stack\n<View className=\"flex-row items-center gap-2\">\n  <Icon />\n  <Text>With Icon</Text>\n</View>\n```\n\n## Dark Mode\n\n```typescript\n<View className=\"bg-white dark:bg-gray-900\">\n  <Text className=\"text-gray-900 dark:text-white\">\n    Adaptive text\n  </Text>\n</View>\n\n// Check dark mode status\nimport { useColorScheme } from 'nativewind';\n\nfunction Component(): React.ReactElement {\n  const { colorScheme, toggleColorScheme } = useColorScheme();\n\n  return (\n    <TouchableOpacity onPress={toggleColorScheme}>\n      <Text>{colorScheme === 'dark' ? 'Light Mode' : 'Dark Mode'}</Text>\n    </TouchableOpacity>\n  );\n}\n```\n\n## Platform-Specific Styles\n\n```typescript\nimport { Platform } from 'react-native';\n\n<View className={Platform.select({\n  ios: 'pt-12',      // iOS status bar\n  android: 'pt-6',   // Android status bar\n  default: 'pt-8'\n})}>\n  <Text>Platform-adaptive padding</Text>\n</View>\n```\n\n## Common Mobile Patterns\n\n### Safe Touch Targets\n\n```typescript\n// Minimum 44x44 points for accessibility\n<TouchableOpacity className=\"min-h-[44] min-w-[44] items-center justify-center\">\n  <Text>Tap Me</Text>\n</TouchableOpacity>\n```\n\n### Card Component\n\n```typescript\n<View className=\"bg-white rounded-xl p-4 shadow-sm border border-gray-100\">\n  <Text className=\"text-lg font-semibold\">Title</Text>\n  <Text className=\"text-gray-600 mt-1\">Description</Text>\n</View>\n```\n\n### Button Variants\n\n```typescript\n// Primary Button\n<TouchableOpacity className=\"bg-blue-600 py-3 px-6 rounded-lg active:bg-blue-700\">\n  <Text className=\"text-white font-semibold text-center\">Primary</Text>\n</TouchableOpacity>\n\n// Secondary Button\n<TouchableOpacity className=\"bg-gray-100 py-3 px-6 rounded-lg active:bg-gray-200\">\n  <Text className=\"text-gray-900 font-semibold text-center\">Secondary</Text>\n</TouchableOpacity>\n\n// Outline Button\n<TouchableOpacity className=\"border border-blue-600 py-3 px-6 rounded-lg\">\n  <Text className=\"text-blue-600 font-semibold text-center\">Outline</Text>\n</TouchableOpacity>\n```\n\n### Input Fields\n\n```typescript\n<View className=\"mb-4\">\n  <Text className=\"text-gray-700 mb-1 font-medium\">Label</Text>\n  <TextInput\n    className=\"bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 text-gray-900\"\n    placeholder=\"Enter text...\"\n    placeholderTextColor=\"#9CA3AF\"\n  />\n</View>\n```\n\n## Spacing Scale\n\n```typescript\n// Padding\n<View className=\"p-0\">   {/* 0 */}\n<View className=\"p-1\">   {/* 4px */}\n<View className=\"p-2\">   {/* 8px */}\n<View className=\"p-4\">   {/* 16px */}\n<View className=\"p-6\">   {/* 24px */}\n<View className=\"p-8\">   {/* 32px */}\n\n// Margin\n<View className=\"m-4\">   {/* All sides */}\n<View className=\"mx-4\">  {/* Horizontal */}\n<View className=\"my-4\">  {/* Vertical */}\n<View className=\"mt-4\">  {/* Top only */}\n```\n\n## Colors\n\n```typescript\n// Text colors\n<Text className=\"text-gray-900\">   {/* Primary text */}\n<Text className=\"text-gray-600\">   {/* Secondary text */}\n<Text className=\"text-gray-400\">   {/* Muted text */}\n<Text className=\"text-blue-600\">   {/* Link/accent */}\n<Text className=\"text-red-500\">    {/* Error */}\n<Text className=\"text-green-500\">  {/* Success */}\n\n// Background colors\n<View className=\"bg-white\">        {/* Surface */}\n<View className=\"bg-gray-50\">      {/* Background */}\n<View className=\"bg-gray-100\">     {/* Muted background */}\n<View className=\"bg-blue-600\">     {/* Primary */}\n```\n\n## Limitations\n\nNot all Tailwind classes work on React Native:\n- No `hover:` (use `active:` instead)\n- No `grid` (use flexbox)\n- No `cursor-pointer`\n- No CSS filters\n- Limited box-shadow (use `shadow-sm`, `shadow-md`, etc.)\n\n## Notes\n\n- Always test on both iOS and Android\n- Use `active:` instead of `hover:` for touch feedback\n- Keep styles consistent with platform conventions\n- Use NativeWind's useColorScheme for dark mode"
              },
              {
                "name": "platform-specific-code",
                "description": "Platform-specific patterns for iOS and Android. Use when writing platform-conditional code.",
                "path": "tech-stacks/js/react-native/skills/platform-specific-code/SKILL.md",
                "frontmatter": {
                  "name": "platform-specific-code",
                  "description": "Platform-specific patterns for iOS and Android. Use when writing platform-conditional code."
                },
                "content": "# Platform-Specific Code Skill\n\nThis skill covers patterns for handling iOS and Android differences.\n\n## When to Use\n\nUse this skill when:\n- Writing platform-specific UI\n- Handling platform APIs differently\n- Creating platform-specific files\n- Styling for each platform\n\n## Core Principle\n\n**WRITE ONCE, ADAPT WHERE NEEDED** - Share code where possible, diverge only when necessary.\n\n## Platform Detection\n\n```typescript\nimport { Platform } from 'react-native';\n\n// Basic detection\nif (Platform.OS === 'ios') {\n  // iOS-specific code\n} else if (Platform.OS === 'android') {\n  // Android-specific code\n}\n\n// Platform.select for values\nconst styles = {\n  container: {\n    paddingTop: Platform.select({\n      ios: 20,\n      android: 0,\n    }),\n  },\n};\n\n// With default value\nconst shadowStyle = Platform.select({\n  ios: {\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n  },\n  android: {\n    elevation: 5,\n  },\n  default: {},\n});\n```\n\n## Platform-Specific Files\n\n```\n// File structure\ncomponents/\nâ”œâ”€â”€ Button.tsx          // Shared code\nâ”œâ”€â”€ Button.ios.tsx      // iOS-specific\nâ”œâ”€â”€ Button.android.tsx  // Android-specific\n```\n\n```typescript\n// Button.ios.tsx\nimport { TouchableOpacity, Text } from 'react-native';\n\nexport function Button({ onPress, children }) {\n  return (\n    <TouchableOpacity\n      onPress={onPress}\n      style={{ paddingVertical: 12, paddingHorizontal: 24 }}\n    >\n      <Text>{children}</Text>\n    </TouchableOpacity>\n  );\n}\n\n// Button.android.tsx\nimport { Pressable, Text } from 'react-native';\n\nexport function Button({ onPress, children }) {\n  return (\n    <Pressable\n      onPress={onPress}\n      android_ripple={{ color: 'rgba(0,0,0,0.1)' }}\n      style={{ paddingVertical: 12, paddingHorizontal: 24 }}\n    >\n      <Text>{children}</Text>\n    </Pressable>\n  );\n}\n\n// Usage - automatically picks correct file\nimport { Button } from './Button';\n```\n\n## Platform-Specific Styling\n\n```typescript\nimport { Platform, StyleSheet } from 'react-native';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    // Platform-specific values\n    ...Platform.select({\n      ios: {\n        paddingTop: 44, // iOS notch\n      },\n      android: {\n        paddingTop: 24, // Android status bar\n      },\n    }),\n  },\n  shadow: Platform.select({\n    ios: {\n      shadowColor: '#000',\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 4,\n    },\n    android: {\n      elevation: 4,\n    },\n  }),\n});\n```\n\n## NativeWind Platform Classes\n\n```typescript\n// Using NativeWind with platform prefixes\n<View className=\"ios:pt-12 android:pt-6\">\n  <Text>Platform-specific padding</Text>\n</View>\n\n<View className=\"ios:shadow-lg android:elevation-4\">\n  <Text>Platform-specific shadows</Text>\n</View>\n```\n\n## Safe Area Handling\n\n```typescript\nimport { SafeAreaView, useSafeAreaInsets } from 'react-native-safe-area-context';\n\n// Using SafeAreaView\nfunction Screen() {\n  return (\n    <SafeAreaView style={{ flex: 1 }}>\n      <Content />\n    </SafeAreaView>\n  );\n}\n\n// Using hook for fine control\nfunction Header() {\n  const insets = useSafeAreaInsets();\n\n  return (\n    <View style={{ paddingTop: insets.top }}>\n      <Text>Header</Text>\n    </View>\n  );\n}\n\n// Platform-specific safe area\nfunction PlatformHeader() {\n  const insets = useSafeAreaInsets();\n\n  return (\n    <View\n      style={{\n        paddingTop: Platform.select({\n          ios: insets.top,\n          android: insets.top + 8, // Extra padding on Android\n        }),\n      }}\n    >\n      <Text>Header</Text>\n    </View>\n  );\n}\n```\n\n## Status Bar\n\n```typescript\nimport { StatusBar, Platform } from 'react-native';\n\nfunction App() {\n  return (\n    <>\n      <StatusBar\n        barStyle={Platform.select({\n          ios: 'dark-content',\n          android: 'light-content',\n        })}\n        backgroundColor={Platform.OS === 'android' ? '#ffffff' : undefined}\n        translucent={Platform.OS === 'android'}\n      />\n      <Content />\n    </>\n  );\n}\n```\n\n## Platform-Specific Navigation\n\n```typescript\nimport { Platform } from 'react-native';\nimport { Stack } from 'expo-router';\n\nfunction StackLayout() {\n  return (\n    <Stack\n      screenOptions={{\n        headerStyle: {\n          backgroundColor: '#fff',\n        },\n        // iOS-specific\n        ...(Platform.OS === 'ios' && {\n          headerLargeTitle: true,\n          headerTransparent: true,\n          headerBlurEffect: 'regular',\n        }),\n        // Android-specific\n        ...(Platform.OS === 'android' && {\n          animation: 'slide_from_right',\n        }),\n      }}\n    >\n      <Stack.Screen name=\"index\" />\n    </Stack>\n  );\n}\n```\n\n## Platform-Specific Haptics\n\n```typescript\nimport * as Haptics from 'expo-haptics';\nimport { Platform, Vibration } from 'react-native';\n\nasync function triggerFeedback() {\n  if (Platform.OS === 'ios') {\n    await Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n  } else {\n    Vibration.vibrate(50);\n  }\n}\n\n// Selection feedback\nasync function selectionFeedback() {\n  if (Platform.OS === 'ios') {\n    await Haptics.selectionAsync();\n  }\n  // Android handles selection feedback automatically\n}\n```\n\n## Platform-Specific Keyboards\n\n```typescript\nimport { Platform, KeyboardAvoidingView } from 'react-native';\n\nfunction FormScreen() {\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      keyboardVerticalOffset={Platform.select({\n        ios: 88, // Header height\n        android: 0,\n      })}\n      style={{ flex: 1 }}\n    >\n      <Form />\n    </KeyboardAvoidingView>\n  );\n}\n```\n\n## Platform-Specific Permissions\n\n```typescript\nimport * as ImagePicker from 'expo-image-picker';\nimport { Platform } from 'react-native';\n\nasync function requestCameraPermission() {\n  if (Platform.OS === 'ios') {\n    const { status } = await ImagePicker.requestCameraPermissionsAsync();\n    return status === 'granted';\n  } else {\n    // Android handles permissions differently\n    const { status } = await ImagePicker.requestCameraPermissionsAsync();\n    return status === 'granted';\n  }\n}\n```\n\n## Platform-Specific Links\n\n```typescript\nimport { Linking, Platform } from 'react-native';\n\nfunction openSettings() {\n  if (Platform.OS === 'ios') {\n    Linking.openURL('app-settings:');\n  } else {\n    Linking.openSettings();\n  }\n}\n\nfunction openMaps(latitude: number, longitude: number) {\n  const url = Platform.select({\n    ios: `maps:0,0?q=${latitude},${longitude}`,\n    android: `geo:0,0?q=${latitude},${longitude}`,\n  });\n\n  if (url) {\n    Linking.openURL(url);\n  }\n}\n\nfunction openPhone(phoneNumber: string) {\n  const url = Platform.select({\n    ios: `telprompt:${phoneNumber}`,\n    android: `tel:${phoneNumber}`,\n  });\n\n  if (url) {\n    Linking.openURL(url);\n  }\n}\n```\n\n## Platform-Specific Components\n\n```typescript\nimport { Platform, Pressable, TouchableOpacity } from 'react-native';\n\n// Use Pressable with ripple on Android\nfunction PlatformButton({ onPress, children, style }) {\n  if (Platform.OS === 'android') {\n    return (\n      <Pressable\n        onPress={onPress}\n        android_ripple={{ color: 'rgba(0,0,0,0.1)' }}\n        style={style}\n      >\n        {children}\n      </Pressable>\n    );\n  }\n\n  return (\n    <TouchableOpacity onPress={onPress} style={style}>\n      {children}\n    </TouchableOpacity>\n  );\n}\n```\n\n## Platform-Specific Fonts\n\n```typescript\nimport { Platform } from 'react-native';\n\nconst fontFamily = Platform.select({\n  ios: 'System',\n  android: 'Roboto',\n});\n\n// With custom fonts\nconst customFont = Platform.select({\n  ios: 'SF Pro Display',\n  android: 'sans-serif-medium',\n});\n```\n\n## Version Checking\n\n```typescript\nimport { Platform } from 'react-native';\n\n// Check platform version\nconst isIOS15OrLater = Platform.OS === 'ios' && parseInt(Platform.Version, 10) >= 15;\nconst isAndroid12OrLater = Platform.OS === 'android' && Platform.Version >= 31;\n\n// Conditional features\nif (isIOS15OrLater) {\n  // Use iOS 15+ features\n}\n```\n\n## Platform Constants\n\n```typescript\nimport { Platform } from 'react-native';\n\n// iOS specific\nif (Platform.OS === 'ios') {\n  console.log('iOS Version:', Platform.Version); // e.g., \"17.0\"\n  console.log('Is iPad:', Platform.isPad);\n  console.log('Is TV:', Platform.isTV);\n}\n\n// Android specific\nif (Platform.OS === 'android') {\n  console.log('API Level:', Platform.Version); // e.g., 34\n}\n```\n\n## Testing Platform Code\n\n```typescript\nimport { Platform } from 'react-native';\n\n// Mock Platform in tests\njest.mock('react-native/Libraries/Utilities/Platform', () => ({\n  OS: 'ios',\n  select: jest.fn((obj) => obj.ios),\n}));\n\n// Or for Android\njest.mock('react-native/Libraries/Utilities/Platform', () => ({\n  OS: 'android',\n  select: jest.fn((obj) => obj.android),\n  Version: 31,\n}));\n```\n\n## Notes\n\n- Use platform-specific files for large differences\n- Use Platform.select for simple value differences\n- Test on both platforms regularly\n- Consider using design system that handles differences\n- Document platform-specific behavior\n- Use Expo's cross-platform APIs when available"
              },
              {
                "name": "react-native-performance",
                "description": "React Native performance optimization techniques. Use when optimizing app performance.",
                "path": "tech-stacks/js/react-native/skills/react-native-performance/SKILL.md",
                "frontmatter": {
                  "name": "react-native-performance",
                  "description": "React Native performance optimization techniques. Use when optimizing app performance."
                },
                "content": "# React Native Performance Skill\n\nThis skill covers performance optimization for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- App feels slow or janky\n- Lists scroll poorly\n- Animations stutter\n- Bundle size is too large\n- Memory usage is high\n\n## Core Principle\n\n**MEASURE FIRST** - Profile before optimizing. Fix actual bottlenecks, not perceived ones.\n\n## Profiling Tools\n\n### React DevTools Profiler\n\n```typescript\n// Enable profiling in development\nif (__DEV__) {\n  // React DevTools will show component render times\n}\n```\n\n### Flipper\n\n```bash\n# Install Flipper for advanced debugging\n# https://fbflipper.com/\n```\n\n### Performance Monitor\n\n```typescript\n// Show FPS and memory in development\nimport { LogBox } from 'react-native';\n\nif (__DEV__) {\n  // Performance overlay available via shake gesture\n}\n```\n\n## Render Optimization\n\n### Avoid Inline Functions\n\n```typescript\n// âŒ Bad: Creates new function every render\n<Button onPress={() => handlePress(item.id)} />\n\n// âœ… Good: Stable function reference\nconst handlePress = useCallback((id: string) => {\n  console.log(id);\n}, []);\n\n<Button onPress={() => handlePress(item.id)} />\n\n// âœ… Better: If possible, pass id differently\nconst handleItemPress = useCallback(() => {\n  console.log(item.id);\n}, [item.id]);\n\n<Button onPress={handleItemPress} />\n```\n\n### Memoize Components\n\n```typescript\nimport { memo } from 'react';\n\ninterface ItemCardProps {\n  item: Item;\n  onPress: (id: string) => void;\n}\n\nexport const ItemCard = memo(function ItemCard({\n  item,\n  onPress,\n}: ItemCardProps): React.ReactElement {\n  return (\n    <TouchableOpacity onPress={() => onPress(item.id)}>\n      <Text>{item.name}</Text>\n    </TouchableOpacity>\n  );\n});\n```\n\n### useMemo for Expensive Computations\n\n```typescript\nimport { useMemo } from 'react';\n\nfunction FilteredList({ items, filter }: Props): React.ReactElement {\n  // Only recompute when items or filter change\n  const filteredItems = useMemo(() => {\n    return items.filter((item) =>\n      item.name.toLowerCase().includes(filter.toLowerCase())\n    );\n  }, [items, filter]);\n\n  return <FlashList data={filteredItems} {...rest} />;\n}\n```\n\n### useCallback for Event Handlers\n\n```typescript\nimport { useCallback } from 'react';\n\nfunction ItemList(): React.ReactElement {\n  const handlePress = useCallback((id: string) => {\n    // Handle press\n  }, []);\n\n  const renderItem = useCallback(({ item }: { item: Item }) => (\n    <ItemCard item={item} onPress={handlePress} />\n  ), [handlePress]);\n\n  return (\n    <FlashList\n      data={items}\n      renderItem={renderItem}\n      estimatedItemSize={80}\n    />\n  );\n}\n```\n\n## List Performance\n\n### Use FlashList Instead of FlatList\n\n```typescript\nimport { FlashList } from '@shopify/flash-list';\n\n// âœ… FlashList is 10x faster than FlatList\n<FlashList\n  data={items}\n  renderItem={({ item }) => <ItemCard item={item} />}\n  estimatedItemSize={80}  // Required for FlashList\n  keyExtractor={(item) => item.id}\n/>\n```\n\n### Optimize Item Rendering\n\n```typescript\n// âœ… Use getItemType for different item layouts\n<FlashList\n  data={items}\n  renderItem={({ item }) => {\n    if (item.type === 'header') return <Header />;\n    return <Item item={item} />;\n  }}\n  getItemType={(item) => item.type}\n  estimatedItemSize={60}\n/>\n\n// âœ… Use overrideItemLayout for variable heights\n<FlashList\n  data={items}\n  renderItem={renderItem}\n  estimatedItemSize={60}\n  overrideItemLayout={(layout, item) => {\n    layout.size = item.type === 'header' ? 100 : 60;\n  }}\n/>\n```\n\n## Image Optimization\n\n### Use expo-image\n\n```typescript\nimport { Image } from 'expo-image';\n\n// âœ… expo-image is faster than React Native Image\n<Image\n  source={{ uri: imageUrl }}\n  style={{ width: 200, height: 200 }}\n  contentFit=\"cover\"\n  transition={200}\n  cachePolicy=\"memory-disk\"\n/>\n```\n\n### Optimize Image Size\n\n```typescript\n// âœ… Request appropriately sized images\nconst imageUrl = `${baseUrl}?w=400&h=400`;\n\n// âœ… Use blurhash for placeholders\n<Image\n  source={{ uri: imageUrl }}\n  placeholder={blurhash}\n  transition={200}\n/>\n```\n\n## Animation Optimization\n\n### Use Reanimated\n\n```typescript\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withSpring,\n} from 'react-native-reanimated';\n\n// âœ… Animations run on UI thread\nfunction AnimatedBox(): React.ReactElement {\n  const scale = useSharedValue(1);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  return <Animated.View style={animatedStyle} />;\n}\n```\n\n### Avoid JS-Driven Animations\n\n```typescript\n// âŒ Bad: JS thread animations\nconst [scale, setScale] = useState(1);\nAnimated.timing(scale, { toValue: 2 }).start();\n\n// âœ… Good: Reanimated (runs on UI thread)\nconst scale = useSharedValue(1);\nscale.value = withSpring(2);\n```\n\n## Bundle Size Optimization\n\n### Analyze Bundle\n\n```bash\nnpx react-native-bundle-visualizer\n```\n\n### Optimize Imports\n\n```typescript\n// âŒ Bad: Imports entire library\nimport { format } from 'date-fns';\n\n// âœ… Good: Import only what you need\nimport format from 'date-fns/format';\n\n// âŒ Bad: Import all icons\nimport * as Icons from 'lucide-react-native';\n\n// âœ… Good: Import specific icons\nimport { Home, Search } from 'lucide-react-native';\n```\n\n### Replace Heavy Libraries\n\n```typescript\n// Replace moment.js (300KB) with:\n// - date-fns (tree-shakeable)\n// - dayjs (2KB)\n\n// Replace lodash with:\n// - Individual lodash functions\n// - Native JavaScript methods\n```\n\n## Memory Management\n\n### Clean Up Effects\n\n```typescript\nuseEffect(() => {\n  const subscription = eventEmitter.subscribe(handler);\n\n  // âœ… Always clean up subscriptions\n  return () => {\n    subscription.unsubscribe();\n  };\n}, []);\n```\n\n### Avoid Memory Leaks\n\n```typescript\n// âœ… Cancel async operations\nuseEffect(() => {\n  let isMounted = true;\n\n  fetchData().then((data) => {\n    if (isMounted) {\n      setData(data);\n    }\n  });\n\n  return () => {\n    isMounted = false;\n  };\n}, []);\n```\n\n## Common Pitfalls\n\n### Avoid\n\n```typescript\n// âŒ Inline styles (creates new object every render)\n<View style={{ padding: 10 }} />\n\n// âŒ Anonymous functions in render\n<Button onPress={() => handlePress()} />\n\n// âŒ FlatList for long lists\n<FlatList data={longList} />\n\n// âŒ Unoptimized images\n<Image source={{ uri: fullSizeImage }} />\n```\n\n### Prefer\n\n```typescript\n// âœ… NativeWind or StyleSheet\n<View className=\"p-4\" />\n\n// âœ… useCallback for handlers\nconst handlePress = useCallback(() => {...}, []);\n\n// âœ… FlashList for long lists\n<FlashList data={longList} estimatedItemSize={80} />\n\n// âœ… Optimized images with expo-image\n<Image source={{ uri: optimizedImage }} cachePolicy=\"memory-disk\" />\n```\n\n## Performance Checklist\n\n- [ ] Use FlashList instead of FlatList\n- [ ] Memoize expensive computations\n- [ ] Use useCallback for event handlers\n- [ ] Use React.memo for list items\n- [ ] Use Reanimated for animations\n- [ ] Use expo-image for images\n- [ ] Analyze and optimize bundle size\n- [ ] Clean up effects and subscriptions\n- [ ] Profile before optimizing\n\n## Notes\n\n- Profile on actual devices, not simulators\n- Focus on 60fps for smooth experience\n- Monitor memory usage\n- Test on lower-end devices\n- Use New Architecture for better performance"
              },
              {
                "name": "reanimated-patterns",
                "description": "React Native Reanimated animation patterns. Use when implementing animations.",
                "path": "tech-stacks/js/react-native/skills/reanimated-patterns/SKILL.md",
                "frontmatter": {
                  "name": "reanimated-patterns",
                  "description": "React Native Reanimated animation patterns. Use when implementing animations."
                },
                "content": "# Reanimated Patterns Skill\n\nThis skill covers React Native Reanimated for performant animations.\n\n## When to Use\n\nUse this skill when:\n- Implementing smooth animations\n- Gesture-based interactions\n- Complex animation sequences\n- Performance-critical animations\n\n## Core Principle\n\n**UI THREAD ANIMATIONS** - Reanimated runs animations on the UI thread for 60fps.\n\n## Installation\n\n```bash\nnpx expo install react-native-reanimated\n```\n\nUpdate babel.config.js:\n```javascript\nmodule.exports = function(api) {\n  api.cache(true);\n  return {\n    presets: ['babel-preset-expo'],\n    plugins: ['react-native-reanimated/plugin'],\n  };\n};\n```\n\n## Basic Concepts\n\n### Shared Values\n\n```typescript\nimport { useSharedValue } from 'react-native-reanimated';\n\n// Shared values are synchronized between JS and UI threads\nconst scale = useSharedValue(1);\nconst opacity = useSharedValue(0);\nconst translateX = useSharedValue(0);\n\n// Update shared values\nscale.value = 2;\nopacity.value = 1;\n```\n\n### Animated Styles\n\n```typescript\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n} from 'react-native-reanimated';\n\nfunction AnimatedBox(): React.ReactElement {\n  const scale = useSharedValue(1);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  return (\n    <Animated.View style={[styles.box, animatedStyle]} />\n  );\n}\n```\n\n## Animation Functions\n\n### withSpring\n\n```typescript\nimport { withSpring } from 'react-native-reanimated';\n\n// Spring animation (natural bounce)\nscale.value = withSpring(2, {\n  damping: 10,\n  stiffness: 100,\n  mass: 1,\n});\n```\n\n### withTiming\n\n```typescript\nimport { withTiming, Easing } from 'react-native-reanimated';\n\n// Timed animation\nopacity.value = withTiming(1, {\n  duration: 300,\n  easing: Easing.bezier(0.25, 0.1, 0.25, 1),\n});\n```\n\n### withDelay\n\n```typescript\nimport { withDelay, withSpring } from 'react-native-reanimated';\n\n// Delayed animation\nscale.value = withDelay(500, withSpring(2));\n```\n\n### withSequence\n\n```typescript\nimport { withSequence, withTiming } from 'react-native-reanimated';\n\n// Sequential animations\nscale.value = withSequence(\n  withTiming(1.2, { duration: 100 }),\n  withTiming(0.9, { duration: 100 }),\n  withTiming(1, { duration: 100 })\n);\n```\n\n### withRepeat\n\n```typescript\nimport { withRepeat, withTiming } from 'react-native-reanimated';\n\n// Repeating animation\nrotation.value = withRepeat(\n  withTiming(360, { duration: 1000 }),\n  -1,  // -1 for infinite\n  false // reverse\n);\n```\n\n## Common Animations\n\n### Fade In/Out\n\n```typescript\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withTiming,\n} from 'react-native-reanimated';\n\nfunction FadeView({ visible }: { visible: boolean }): React.ReactElement {\n  const opacity = useSharedValue(0);\n\n  useEffect(() => {\n    opacity.value = withTiming(visible ? 1 : 0, { duration: 300 });\n  }, [visible]);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    opacity: opacity.value,\n  }));\n\n  return (\n    <Animated.View style={animatedStyle}>\n      {children}\n    </Animated.View>\n  );\n}\n```\n\n### Scale on Press\n\n```typescript\nfunction ScaleButton({ onPress, children }: Props): React.ReactElement {\n  const scale = useSharedValue(1);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  const handlePressIn = () => {\n    scale.value = withSpring(0.95);\n  };\n\n  const handlePressOut = () => {\n    scale.value = withSpring(1);\n  };\n\n  return (\n    <TouchableOpacity\n      onPressIn={handlePressIn}\n      onPressOut={handlePressOut}\n      onPress={onPress}\n      activeOpacity={1}\n    >\n      <Animated.View style={animatedStyle}>\n        {children}\n      </Animated.View>\n    </TouchableOpacity>\n  );\n}\n```\n\n### Slide In\n\n```typescript\nimport { Dimensions } from 'react-native';\n\nconst { width } = Dimensions.get('window');\n\nfunction SlideIn({ visible }: { visible: boolean }): React.ReactElement {\n  const translateX = useSharedValue(width);\n\n  useEffect(() => {\n    translateX.value = withSpring(visible ? 0 : width);\n  }, [visible]);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ translateX: translateX.value }],\n  }));\n\n  return (\n    <Animated.View style={[styles.panel, animatedStyle]}>\n      {children}\n    </Animated.View>\n  );\n}\n```\n\n## Entering/Exiting Animations\n\n```typescript\nimport Animated, {\n  FadeIn,\n  FadeOut,\n  SlideInRight,\n  SlideOutLeft,\n  ZoomIn,\n  BounceIn,\n} from 'react-native-reanimated';\n\n// Fade\n<Animated.View entering={FadeIn.duration(300)} exiting={FadeOut.duration(200)}>\n\n// Slide\n<Animated.View entering={SlideInRight} exiting={SlideOutLeft}>\n\n// Zoom\n<Animated.View entering={ZoomIn.springify()}>\n\n// Bounce\n<Animated.View entering={BounceIn.delay(200)}>\n\n// Custom\n<Animated.View\n  entering={FadeIn.duration(500).delay(100).springify()}\n  exiting={FadeOut.duration(300)}\n>\n```\n\n## Layout Animations\n\n```typescript\nimport Animated, { Layout } from 'react-native-reanimated';\n\n// Animate layout changes\n<Animated.View layout={Layout.springify()}>\n  {items.map((item) => (\n    <Animated.View\n      key={item.id}\n      entering={FadeIn}\n      exiting={FadeOut}\n      layout={Layout}\n    >\n      <Text>{item.name}</Text>\n    </Animated.View>\n  ))}\n</Animated.View>\n```\n\n## Gesture Handler Integration\n\n```typescript\nimport { GestureDetector, Gesture } from 'react-native-gesture-handler';\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  withSpring,\n} from 'react-native-reanimated';\n\nfunction DraggableBox(): React.ReactElement {\n  const translateX = useSharedValue(0);\n  const translateY = useSharedValue(0);\n\n  const gesture = Gesture.Pan()\n    .onUpdate((event) => {\n      translateX.value = event.translationX;\n      translateY.value = event.translationY;\n    })\n    .onEnd(() => {\n      translateX.value = withSpring(0);\n      translateY.value = withSpring(0);\n    });\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [\n      { translateX: translateX.value },\n      { translateY: translateY.value },\n    ],\n  }));\n\n  return (\n    <GestureDetector gesture={gesture}>\n      <Animated.View style={[styles.box, animatedStyle]} />\n    </GestureDetector>\n  );\n}\n```\n\n## Interpolation\n\n```typescript\nimport { interpolate, Extrapolation } from 'react-native-reanimated';\n\nconst animatedStyle = useAnimatedStyle(() => {\n  const scale = interpolate(\n    scrollY.value,\n    [0, 100],\n    [1, 0.5],\n    Extrapolation.CLAMP\n  );\n\n  const opacity = interpolate(\n    scrollY.value,\n    [0, 50, 100],\n    [1, 0.5, 0]\n  );\n\n  return {\n    transform: [{ scale }],\n    opacity,\n  };\n});\n```\n\n## Worklets\n\n```typescript\nimport { runOnJS } from 'react-native-reanimated';\n\n// Call JS function from worklet\nconst updateState = (value: number) => {\n  setState(value);\n};\n\nconst animatedStyle = useAnimatedStyle(() => {\n  if (position.value > 100) {\n    runOnJS(updateState)(position.value);\n  }\n  return { transform: [{ translateX: position.value }] };\n});\n```\n\n## Notes\n\n- All animation logic runs on UI thread\n- Use worklets ('worklet' directive) for custom functions\n- Use runOnJS to call JS functions from worklets\n- Test animations on real devices\n- Reanimated is compatible with Expo"
              },
              {
                "name": "secure-storage-patterns",
                "description": "expo-secure-store patterns for sensitive data. Use when storing tokens and credentials.",
                "path": "tech-stacks/js/react-native/skills/secure-storage-patterns/SKILL.md",
                "frontmatter": {
                  "name": "secure-storage-patterns",
                  "description": "expo-secure-store patterns for sensitive data. Use when storing tokens and credentials."
                },
                "content": "# Secure Storage Patterns Skill\n\nThis skill covers secure data storage for React Native with Expo.\n\n## When to Use\n\nUse this skill when:\n- Storing authentication tokens\n- Saving sensitive user data\n- Managing API keys\n- Storing encryption keys\n\n## Core Principle\n\n**SECURE BY DEFAULT** - Always use SecureStore for sensitive data, never AsyncStorage.\n\n## Installation\n\n```bash\nnpx expo install expo-secure-store\n```\n\n## Basic Usage\n\n```typescript\nimport * as SecureStore from 'expo-secure-store';\n\n// Save value\nawait SecureStore.setItemAsync('authToken', 'your-token-here');\n\n// Get value\nconst token = await SecureStore.getItemAsync('authToken');\n\n// Delete value\nawait SecureStore.deleteItemAsync('authToken');\n```\n\n## Authentication Token Storage\n\n```typescript\n// lib/secureStorage.ts\nimport * as SecureStore from 'expo-secure-store';\n\nconst TOKEN_KEY = 'authToken';\nconst REFRESH_TOKEN_KEY = 'refreshToken';\nconst USER_KEY = 'user';\n\nexport const secureStorage = {\n  // Token management\n  async saveToken(token: string): Promise<void> {\n    await SecureStore.setItemAsync(TOKEN_KEY, token);\n  },\n\n  async getToken(): Promise<string | null> {\n    return SecureStore.getItemAsync(TOKEN_KEY);\n  },\n\n  async deleteToken(): Promise<void> {\n    await SecureStore.deleteItemAsync(TOKEN_KEY);\n  },\n\n  // Refresh token\n  async saveRefreshToken(token: string): Promise<void> {\n    await SecureStore.setItemAsync(REFRESH_TOKEN_KEY, token);\n  },\n\n  async getRefreshToken(): Promise<string | null> {\n    return SecureStore.getItemAsync(REFRESH_TOKEN_KEY);\n  },\n\n  async deleteRefreshToken(): Promise<void> {\n    await SecureStore.deleteItemAsync(REFRESH_TOKEN_KEY);\n  },\n\n  // User data\n  async saveUser(user: User): Promise<void> {\n    await SecureStore.setItemAsync(USER_KEY, JSON.stringify(user));\n  },\n\n  async getUser(): Promise<User | null> {\n    const userStr = await SecureStore.getItemAsync(USER_KEY);\n    return userStr ? JSON.parse(userStr) : null;\n  },\n\n  async deleteUser(): Promise<void> {\n    await SecureStore.deleteItemAsync(USER_KEY);\n  },\n\n  // Clear all auth data\n  async clearAuth(): Promise<void> {\n    await Promise.all([\n      SecureStore.deleteItemAsync(TOKEN_KEY),\n      SecureStore.deleteItemAsync(REFRESH_TOKEN_KEY),\n      SecureStore.deleteItemAsync(USER_KEY),\n    ]);\n  },\n};\n```\n\n## Auth Store with Secure Storage\n\n```typescript\nimport { create } from 'zustand';\nimport { secureStorage } from '@/lib/secureStorage';\n\ninterface User {\n  id: string;\n  email: string;\n  name: string;\n}\n\ninterface AuthState {\n  user: User | null;\n  token: string | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  initialize: () => Promise<void>;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => Promise<void>;\n}\n\nexport const useAuthStore = create<AuthState>((set) => ({\n  user: null,\n  token: null,\n  isAuthenticated: false,\n  isLoading: true,\n\n  initialize: async () => {\n    try {\n      const [token, user] = await Promise.all([\n        secureStorage.getToken(),\n        secureStorage.getUser(),\n      ]);\n\n      if (token && user) {\n        set({\n          token,\n          user,\n          isAuthenticated: true,\n          isLoading: false,\n        });\n      } else {\n        set({ isLoading: false });\n      }\n    } catch {\n      set({ isLoading: false });\n    }\n  },\n\n  login: async (email, password) => {\n    set({ isLoading: true });\n\n    const response = await fetch('/api/auth/login', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, password }),\n    });\n\n    if (!response.ok) {\n      set({ isLoading: false });\n      throw new Error('Login failed');\n    }\n\n    const { user, token, refreshToken } = await response.json();\n\n    await Promise.all([\n      secureStorage.saveToken(token),\n      secureStorage.saveRefreshToken(refreshToken),\n      secureStorage.saveUser(user),\n    ]);\n\n    set({\n      user,\n      token,\n      isAuthenticated: true,\n      isLoading: false,\n    });\n  },\n\n  logout: async () => {\n    await secureStorage.clearAuth();\n    set({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n    });\n  },\n}));\n```\n\n## Initialize Auth on App Start\n\n```typescript\n// app/_layout.tsx\nimport { useEffect } from 'react';\nimport { useAuthStore } from '@/store/authStore';\n\nexport default function RootLayout(): React.ReactElement {\n  const initialize = useAuthStore((state) => state.initialize);\n  const isLoading = useAuthStore((state) => state.isLoading);\n\n  useEffect(() => {\n    initialize();\n  }, [initialize]);\n\n  if (isLoading) {\n    return <LoadingScreen />;\n  }\n\n  return <Stack />;\n}\n```\n\n## Token Refresh Pattern\n\n```typescript\n// lib/api.ts\nimport axios from 'axios';\nimport { secureStorage } from './secureStorage';\n\nconst api = axios.create({\n  baseURL: process.env.EXPO_PUBLIC_API_URL,\n});\n\n// Request interceptor - add token\napi.interceptors.request.use(async (config) => {\n  const token = await secureStorage.getToken();\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor - refresh token on 401\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      try {\n        const refreshToken = await secureStorage.getRefreshToken();\n\n        if (!refreshToken) {\n          throw new Error('No refresh token');\n        }\n\n        const response = await axios.post('/api/auth/refresh', {\n          refreshToken,\n        });\n\n        const { token: newToken } = response.data;\n        await secureStorage.saveToken(newToken);\n\n        originalRequest.headers.Authorization = `Bearer ${newToken}`;\n        return api(originalRequest);\n      } catch {\n        await secureStorage.clearAuth();\n        // Navigate to login\n        return Promise.reject(error);\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n```\n\n## Biometric Authentication\n\n```typescript\nimport * as LocalAuthentication from 'expo-local-authentication';\n\nexport const biometricAuth = {\n  async isAvailable(): Promise<boolean> {\n    const compatible = await LocalAuthentication.hasHardwareAsync();\n    const enrolled = await LocalAuthentication.isEnrolledAsync();\n    return compatible && enrolled;\n  },\n\n  async authenticate(): Promise<boolean> {\n    const result = await LocalAuthentication.authenticateAsync({\n      promptMessage: 'Authenticate to continue',\n      fallbackLabel: 'Use passcode',\n    });\n\n    return result.success;\n  },\n};\n\n// Usage with secure storage\nasync function getSecureData(): Promise<string | null> {\n  const authenticated = await biometricAuth.authenticate();\n\n  if (!authenticated) {\n    throw new Error('Authentication failed');\n  }\n\n  return secureStorage.getToken();\n}\n```\n\n## Storage Options\n\n```typescript\n// SecureStore options\nawait SecureStore.setItemAsync('key', 'value', {\n  keychainAccessible: SecureStore.AFTER_FIRST_UNLOCK,\n});\n\n// Available options:\n// AFTER_FIRST_UNLOCK - accessible after device unlocked once\n// AFTER_FIRST_UNLOCK_THIS_DEVICE_ONLY - same, but not synced\n// ALWAYS - always accessible (less secure)\n// ALWAYS_THIS_DEVICE_ONLY - always accessible, not synced\n// WHEN_UNLOCKED - only when device is unlocked (default)\n// WHEN_UNLOCKED_THIS_DEVICE_ONLY - same, but not synced\n```\n\n## When to Use What\n\n```typescript\n// âœ… SecureStore - Sensitive data\nawait SecureStore.setItemAsync('authToken', token);\nawait SecureStore.setItemAsync('apiKey', key);\nawait SecureStore.setItemAsync('encryptionKey', key);\n\n// âŒ AsyncStorage - Non-sensitive data only\nawait AsyncStorage.setItem('theme', 'dark');\nawait AsyncStorage.setItem('onboardingComplete', 'true');\nawait AsyncStorage.setItem('lastViewedProduct', productId);\n```\n\n## Notes\n\n- Always use SecureStore for tokens and credentials\n- SecureStore has ~2KB limit per item\n- Data is encrypted using device keychain/keystore\n- Consider biometric authentication for extra security\n- Clear sensitive data on logout\n- Handle storage errors gracefully"
              },
              {
                "name": "tanstack-query-mobile",
                "description": "TanStack Query for React Native data fetching. Use when implementing server state.",
                "path": "tech-stacks/js/react-native/skills/tanstack-query-mobile/SKILL.md",
                "frontmatter": {
                  "name": "tanstack-query-mobile",
                  "description": "TanStack Query for React Native data fetching. Use when implementing server state."
                },
                "content": "# TanStack Query Mobile Skill\n\nThis skill covers TanStack Query for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Fetching data from APIs\n- Caching server data\n- Synchronizing server state\n- Implementing pagination\n- Optimistic updates\n\n## Core Principle\n\n**SERVER STATE** - TanStack Query manages server state. Use Zustand for client state.\n\n## Installation\n\n```bash\nnpm install @tanstack/react-query\n```\n\n## Setup\n\n```typescript\n// app/_layout.tsx\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 1000 * 60 * 5, // 5 minutes\n      gcTime: 1000 * 60 * 30,   // 30 minutes (formerly cacheTime)\n      retry: 2,\n      refetchOnWindowFocus: false, // Disable for mobile\n    },\n  },\n});\n\nexport default function RootLayout(): React.ReactElement {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <Stack />\n    </QueryClientProvider>\n  );\n}\n```\n\n## Basic Query\n\n```typescript\nimport { useQuery } from '@tanstack/react-query';\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n}\n\nasync function fetchUser(id: string): Promise<User> {\n  const response = await fetch(`/api/users/${id}`);\n  if (!response.ok) throw new Error('Failed to fetch user');\n  return response.json();\n}\n\nfunction UserProfile({ userId }: { userId: string }): React.ReactElement {\n  const { data: user, isLoading, isError, error } = useQuery({\n    queryKey: ['user', userId],\n    queryFn: () => fetchUser(userId),\n  });\n\n  if (isLoading) {\n    return <ActivityIndicator />;\n  }\n\n  if (isError) {\n    return <Text>Error: {error.message}</Text>;\n  }\n\n  return (\n    <View>\n      <Text>{user.name}</Text>\n      <Text>{user.email}</Text>\n    </View>\n  );\n}\n```\n\n## Query with Authentication\n\n```typescript\nimport { useQuery } from '@tanstack/react-query';\nimport { useAuthStore } from '@/store/authStore';\n\nfunction useUserPosts() {\n  const token = useAuthStore((state) => state.token);\n\n  return useQuery({\n    queryKey: ['posts', 'user'],\n    queryFn: async () => {\n      const response = await fetch('/api/posts', {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      if (!response.ok) throw new Error('Failed to fetch posts');\n      return response.json();\n    },\n    enabled: !!token, // Only fetch when authenticated\n  });\n}\n```\n\n## Mutations\n\n```typescript\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\n\ninterface CreatePostInput {\n  title: string;\n  content: string;\n}\n\nfunction useCreatePost() {\n  const queryClient = useQueryClient();\n  const token = useAuthStore((state) => state.token);\n\n  return useMutation({\n    mutationFn: async (input: CreatePostInput) => {\n      const response = await fetch('/api/posts', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(input),\n      });\n      if (!response.ok) throw new Error('Failed to create post');\n      return response.json();\n    },\n    onSuccess: () => {\n      // Invalidate posts query to refetch\n      queryClient.invalidateQueries({ queryKey: ['posts'] });\n    },\n  });\n}\n\n// Usage\nfunction CreatePostForm(): React.ReactElement {\n  const { mutate, isPending } = useCreatePost();\n\n  const handleSubmit = (data: CreatePostInput) => {\n    mutate(data, {\n      onSuccess: () => {\n        // Navigate or show success\n      },\n      onError: (error) => {\n        // Show error toast\n      },\n    });\n  };\n\n  return (\n    <Button onPress={() => handleSubmit({ title, content })} disabled={isPending}>\n      {isPending ? 'Creating...' : 'Create Post'}\n    </Button>\n  );\n}\n```\n\n## Optimistic Updates\n\n```typescript\nfunction useLikePost() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: (postId: string) =>\n      fetch(`/api/posts/${postId}/like`, { method: 'POST' }),\n\n    onMutate: async (postId) => {\n      // Cancel outgoing refetches\n      await queryClient.cancelQueries({ queryKey: ['posts'] });\n\n      // Snapshot previous value\n      const previousPosts = queryClient.getQueryData(['posts']);\n\n      // Optimistically update\n      queryClient.setQueryData(['posts'], (old: Post[]) =>\n        old.map((post) =>\n          post.id === postId\n            ? { ...post, likes: post.likes + 1, isLiked: true }\n            : post\n        )\n      );\n\n      return { previousPosts };\n    },\n\n    onError: (err, postId, context) => {\n      // Rollback on error\n      queryClient.setQueryData(['posts'], context?.previousPosts);\n    },\n\n    onSettled: () => {\n      // Refetch after error or success\n      queryClient.invalidateQueries({ queryKey: ['posts'] });\n    },\n  });\n}\n```\n\n## Infinite Queries (Pagination)\n\n```typescript\nimport { useInfiniteQuery } from '@tanstack/react-query';\nimport { FlashList } from '@shopify/flash-list';\n\ninterface PostsResponse {\n  posts: Post[];\n  nextCursor: string | null;\n}\n\nfunction useInfinitePosts() {\n  return useInfiniteQuery({\n    queryKey: ['posts', 'infinite'],\n    queryFn: async ({ pageParam }) => {\n      const response = await fetch(\n        `/api/posts?cursor=${pageParam ?? ''}&limit=20`\n      );\n      return response.json() as Promise<PostsResponse>;\n    },\n    initialPageParam: null as string | null,\n    getNextPageParam: (lastPage) => lastPage.nextCursor,\n  });\n}\n\nfunction PostsList(): React.ReactElement {\n  const {\n    data,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useInfinitePosts();\n\n  const posts = data?.pages.flatMap((page) => page.posts) ?? [];\n\n  return (\n    <FlashList\n      data={posts}\n      renderItem={({ item }) => <PostCard post={item} />}\n      estimatedItemSize={100}\n      onEndReached={() => {\n        if (hasNextPage && !isFetchingNextPage) {\n          fetchNextPage();\n        }\n      }}\n      onEndReachedThreshold={0.5}\n      ListFooterComponent={\n        isFetchingNextPage ? <ActivityIndicator /> : null\n      }\n    />\n  );\n}\n```\n\n## Pull to Refresh\n\n```typescript\nimport { RefreshControl } from 'react-native';\n\nfunction PostsList(): React.ReactElement {\n  const { data, isLoading, refetch, isRefetching } = usePosts();\n\n  return (\n    <FlashList\n      data={data}\n      renderItem={renderItem}\n      estimatedItemSize={100}\n      refreshControl={\n        <RefreshControl\n          refreshing={isRefetching}\n          onRefresh={refetch}\n        />\n      }\n    />\n  );\n}\n```\n\n## Query Hooks Pattern\n\n```typescript\n// hooks/queries/usePosts.ts\nexport function usePosts() {\n  return useQuery({\n    queryKey: ['posts'],\n    queryFn: fetchPosts,\n  });\n}\n\nexport function usePost(id: string) {\n  return useQuery({\n    queryKey: ['posts', id],\n    queryFn: () => fetchPost(id),\n    enabled: !!id,\n  });\n}\n\n// hooks/mutations/usePostMutations.ts\nexport function useCreatePost() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: createPost,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['posts'] });\n    },\n  });\n}\n\nexport function useDeletePost() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: deletePost,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['posts'] });\n    },\n  });\n}\n```\n\n## API Client\n\n```typescript\n// lib/api.ts\nimport axios from 'axios';\nimport * as SecureStore from 'expo-secure-store';\n\nconst api = axios.create({\n  baseURL: process.env.EXPO_PUBLIC_API_URL,\n});\n\napi.interceptors.request.use(async (config) => {\n  const token = await SecureStore.getItemAsync('authToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\nexport default api;\n```\n\n## Notes\n\n- Use queryKey for cache identification\n- Invalidate queries after mutations\n- Use enabled for conditional fetching\n- Implement optimistic updates for better UX\n- Use infinite queries for pagination\n- Create custom hooks for reusability"
              },
              {
                "name": "zustand-mobile-patterns",
                "description": "Zustand state management for React Native. Use when implementing client-side state.",
                "path": "tech-stacks/js/react-native/skills/zustand-mobile-patterns/SKILL.md",
                "frontmatter": {
                  "name": "zustand-mobile-patterns",
                  "description": "Zustand state management for React Native. Use when implementing client-side state."
                },
                "content": "# Zustand Mobile Patterns Skill\n\nThis skill covers Zustand state management for React Native apps.\n\n## When to Use\n\nUse this skill when:\n- Managing global client state\n- Authentication state\n- User preferences/settings\n- Shopping cart\n- Theme management\n\n## Core Principle\n\n**SIMPLE AND MINIMAL** - Zustand is lightweight. Keep stores focused.\n\n## Installation\n\n```bash\nnpm install zustand\n```\n\n## Basic Store\n\n```typescript\nimport { create } from 'zustand';\n\ninterface CounterState {\n  count: number;\n  increment: () => void;\n  decrement: () => void;\n  reset: () => void;\n}\n\nexport const useCounterStore = create<CounterState>((set) => ({\n  count: 0,\n  increment: () => set((state) => ({ count: state.count + 1 })),\n  decrement: () => set((state) => ({ count: state.count - 1 })),\n  reset: () => set({ count: 0 }),\n}));\n\n// Usage\nfunction Counter(): React.ReactElement {\n  const count = useCounterStore((state) => state.count);\n  const increment = useCounterStore((state) => state.increment);\n\n  return (\n    <TouchableOpacity onPress={increment}>\n      <Text>Count: {count}</Text>\n    </TouchableOpacity>\n  );\n}\n```\n\n## Authentication Store\n\n```typescript\nimport { create } from 'zustand';\nimport * as SecureStore from 'expo-secure-store';\n\ninterface User {\n  id: string;\n  email: string;\n  name: string;\n}\n\ninterface AuthState {\n  user: User | null;\n  token: string | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => Promise<void>;\n  loadStoredAuth: () => Promise<void>;\n}\n\nexport const useAuthStore = create<AuthState>((set, get) => ({\n  user: null,\n  token: null,\n  isAuthenticated: false,\n  isLoading: true,\n\n  login: async (email, password) => {\n    set({ isLoading: true });\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password }),\n      });\n\n      if (!response.ok) throw new Error('Login failed');\n\n      const { user, token } = await response.json();\n\n      await SecureStore.setItemAsync('authToken', token);\n      await SecureStore.setItemAsync('user', JSON.stringify(user));\n\n      set({ user, token, isAuthenticated: true, isLoading: false });\n    } catch (error) {\n      set({ isLoading: false });\n      throw error;\n    }\n  },\n\n  logout: async () => {\n    await SecureStore.deleteItemAsync('authToken');\n    await SecureStore.deleteItemAsync('user');\n    set({ user: null, token: null, isAuthenticated: false });\n  },\n\n  loadStoredAuth: async () => {\n    try {\n      const token = await SecureStore.getItemAsync('authToken');\n      const userStr = await SecureStore.getItemAsync('user');\n\n      if (token && userStr) {\n        const user = JSON.parse(userStr);\n        set({ user, token, isAuthenticated: true, isLoading: false });\n      } else {\n        set({ isLoading: false });\n      }\n    } catch {\n      set({ isLoading: false });\n    }\n  },\n}));\n```\n\n## Settings Store with Persistence\n\n```typescript\nimport { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\ninterface SettingsState {\n  theme: 'light' | 'dark' | 'system';\n  notifications: boolean;\n  language: string;\n  setTheme: (theme: 'light' | 'dark' | 'system') => void;\n  setNotifications: (enabled: boolean) => void;\n  setLanguage: (language: string) => void;\n}\n\nexport const useSettingsStore = create<SettingsState>()(\n  persist(\n    (set) => ({\n      theme: 'system',\n      notifications: true,\n      language: 'en',\n      setTheme: (theme) => set({ theme }),\n      setNotifications: (notifications) => set({ notifications }),\n      setLanguage: (language) => set({ language }),\n    }),\n    {\n      name: 'settings-storage',\n      storage: createJSONStorage(() => AsyncStorage),\n    }\n  )\n);\n```\n\n## Cart Store\n\n```typescript\ninterface CartItem {\n  id: string;\n  name: string;\n  price: number;\n  quantity: number;\n}\n\ninterface CartState {\n  items: CartItem[];\n  addItem: (item: Omit<CartItem, 'quantity'>) => void;\n  removeItem: (id: string) => void;\n  updateQuantity: (id: string, quantity: number) => void;\n  clearCart: () => void;\n  total: () => number;\n}\n\nexport const useCartStore = create<CartState>((set, get) => ({\n  items: [],\n\n  addItem: (item) =>\n    set((state) => {\n      const existing = state.items.find((i) => i.id === item.id);\n      if (existing) {\n        return {\n          items: state.items.map((i) =>\n            i.id === item.id ? { ...i, quantity: i.quantity + 1 } : i\n          ),\n        };\n      }\n      return { items: [...state.items, { ...item, quantity: 1 }] };\n    }),\n\n  removeItem: (id) =>\n    set((state) => ({\n      items: state.items.filter((item) => item.id !== id),\n    })),\n\n  updateQuantity: (id, quantity) =>\n    set((state) => ({\n      items:\n        quantity <= 0\n          ? state.items.filter((item) => item.id !== id)\n          : state.items.map((item) =>\n              item.id === id ? { ...item, quantity } : item\n            ),\n    })),\n\n  clearCart: () => set({ items: [] }),\n\n  total: () => {\n    const state = get();\n    return state.items.reduce(\n      (sum, item) => sum + item.price * item.quantity,\n      0\n    );\n  },\n}));\n```\n\n## Selectors for Performance\n\n```typescript\n// âŒ Bad: Subscribes to entire store\nfunction Component(): React.ReactElement {\n  const store = useCartStore();\n  return <Text>{store.items.length}</Text>;\n}\n\n// âœ… Good: Only subscribes to items.length\nfunction Component(): React.ReactElement {\n  const itemCount = useCartStore((state) => state.items.length);\n  return <Text>{itemCount}</Text>;\n}\n\n// âœ… Good: Multiple selectors\nfunction CartSummary(): React.ReactElement {\n  const itemCount = useCartStore((state) => state.items.length);\n  const total = useCartStore((state) => state.total());\n\n  return (\n    <View>\n      <Text>Items: {itemCount}</Text>\n      <Text>Total: ${total.toFixed(2)}</Text>\n    </View>\n  );\n}\n```\n\n## Combining with React Query\n\n```typescript\n// Zustand for client state\nconst useAuthStore = create<AuthState>(...);\n\n// React Query for server state\nfunction useUser() {\n  const token = useAuthStore((state) => state.token);\n\n  return useQuery({\n    queryKey: ['user'],\n    queryFn: () => fetchUser(token),\n    enabled: !!token,\n  });\n}\n```\n\n## DevTools (Development)\n\n```typescript\nimport { create } from 'zustand';\nimport { devtools } from 'zustand/middleware';\n\nexport const useStore = create<StoreState>()(\n  devtools(\n    (set) => ({\n      // state and actions\n    }),\n    { name: 'MyStore' }\n  )\n);\n```\n\n## Testing Stores\n\n```typescript\nimport { useAuthStore } from '../authStore';\n\ndescribe('authStore', () => {\n  beforeEach(() => {\n    // Reset store before each test\n    useAuthStore.setState({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n      isLoading: false,\n    });\n  });\n\n  it('logs out correctly', () => {\n    useAuthStore.setState({\n      user: { id: '1', email: 'test@test.com', name: 'Test' },\n      isAuthenticated: true,\n    });\n\n    useAuthStore.getState().logout();\n\n    expect(useAuthStore.getState().user).toBeNull();\n    expect(useAuthStore.getState().isAuthenticated).toBe(false);\n  });\n});\n```\n\n## Notes\n\n- Use selectors to prevent unnecessary re-renders\n- Persist only necessary state\n- Use SecureStore for sensitive data\n- Keep stores focused on single concerns\n- Zustand works outside React components\n- Compatible with React 18 concurrent features"
              }
            ]
          }
        ]
      }
    }
  ]
}