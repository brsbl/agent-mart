{
  "owner": {
    "id": "gplv2",
    "display_name": "Glenn Plas",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/907459?u=fafe6ce757caafab8037ca20b5f5f15990465d10&v=4",
    "url": "https://github.com/gplv2",
    "bio": "sysadmin, programmer, GIS enthusiast.  I play with large datasets for breakfast, with plenty of servers for lunch and chew on open source for dinner.",
    "stats": {
      "total_repos": 1,
      "total_plugins": 1,
      "total_commands": 9,
      "total_skills": 1,
      "total_stars": 1,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "gplv2/ogrep-marketplace",
      "url": "https://github.com/gplv2/ogrep-marketplace",
      "description": null,
      "homepage": null,
      "signals": {
        "stars": 1,
        "forks": 0,
        "pushed_at": "2026-01-12T18:07:43Z",
        "created_at": "2026-01-10T12:34:30Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 721
        },
        {
          "path": ".env.example",
          "type": "blob",
          "size": 3671
        },
        {
          "path": ".envrc",
          "type": "blob",
          "size": 48
        },
        {
          "path": ".githooks",
          "type": "tree",
          "size": null
        },
        {
          "path": ".githooks/pre-push",
          "type": "blob",
          "size": 778
        },
        {
          "path": ".github",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/workflows",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/workflows/ci.yml",
          "type": "blob",
          "size": 1988
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 80
        },
        {
          "path": ".pre-commit-config.yaml",
          "type": "blob",
          "size": 1087
        },
        {
          "path": ".yamllint.yaml",
          "type": "blob",
          "size": 1612
        },
        {
          "path": "CHANGELOG-USER.md",
          "type": "blob",
          "size": 3697
        },
        {
          "path": "CHANGELOG.md",
          "type": "blob",
          "size": 33766
        },
        {
          "path": "CLAUDE.md",
          "type": "blob",
          "size": 34441
        },
        {
          "path": "LICENSE",
          "type": "blob",
          "size": 1056
        },
        {
          "path": "LOCAL_EMBEDDINGS_GUIDE.md",
          "type": "blob",
          "size": 44488
        },
        {
          "path": "Makefile",
          "type": "blob",
          "size": 2707
        },
        {
          "path": "QUICKSTART.md",
          "type": "blob",
          "size": 3412
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 20558
        },
        {
          "path": "RELEASE_NOTES.md",
          "type": "blob",
          "size": 3833
        },
        {
          "path": "WORD_ABOUT_SKILLUSE.md",
          "type": "blob",
          "size": 4384
        },
        {
          "path": "activate.sh",
          "type": "blob",
          "size": 809
        },
        {
          "path": "cont.txt",
          "type": "blob",
          "size": 2757
        },
        {
          "path": "docs",
          "type": "tree",
          "size": null
        },
        {
          "path": "docs/EMBEDDING_PERFORMANCE_TEST_PLAN.md",
          "type": "blob",
          "size": 10933
        },
        {
          "path": "ogrep",
          "type": "tree",
          "size": null
        },
        {
          "path": "ogrep/__init__.py",
          "type": "blob",
          "size": 2112
        },
        {
          "path": "ogrep/__main__.py",
          "type": "blob",
          "size": 101
        },
        {
          "path": "ogrep/chunking.py",
          "type": "blob",
          "size": 2641
        },
        {
          "path": "ogrep/cli.py",
          "type": "blob",
          "size": 12480
        },
        {
          "path": "ogrep/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "ogrep/commands/__init__.py",
          "type": "blob",
          "size": 1220
        },
        {
          "path": "ogrep/commands/_arg_builders.py",
          "type": "blob",
          "size": 3740
        },
        {
          "path": "ogrep/commands/_common.py",
          "type": "blob",
          "size": 6554
        },
        {
          "path": "ogrep/commands/benchmark.py",
          "type": "blob",
          "size": 17856
        },
        {
          "path": "ogrep/commands/chunk.py",
          "type": "blob",
          "size": 6276
        },
        {
          "path": "ogrep/commands/clean.py",
          "type": "blob",
          "size": 2755
        },
        {
          "path": "ogrep/commands/health.py",
          "type": "blob",
          "size": 16616
        },
        {
          "path": "ogrep/commands/index.py",
          "type": "blob",
          "size": 19718
        },
        {
          "path": "ogrep/commands/models.py",
          "type": "blob",
          "size": 1604
        },
        {
          "path": "ogrep/commands/query.py",
          "type": "blob",
          "size": 11008
        },
        {
          "path": "ogrep/commands/reindex.py",
          "type": "blob",
          "size": 4046
        },
        {
          "path": "ogrep/commands/reset.py",
          "type": "blob",
          "size": 2524
        },
        {
          "path": "ogrep/commands/status.py",
          "type": "blob",
          "size": 2870
        },
        {
          "path": "ogrep/commands/tune.py",
          "type": "blob",
          "size": 10611
        },
        {
          "path": "ogrep/db.py",
          "type": "blob",
          "size": 5017
        },
        {
          "path": "ogrep/embed.py",
          "type": "blob",
          "size": 16554
        },
        {
          "path": "ogrep/filetype.py",
          "type": "blob",
          "size": 7393
        },
        {
          "path": "ogrep/indexer.py",
          "type": "blob",
          "size": 25009
        },
        {
          "path": "ogrep/mcp",
          "type": "tree",
          "size": null
        },
        {
          "path": "ogrep/mcp/__init__.py",
          "type": "blob",
          "size": null
        },
        {
          "path": "ogrep/mcp/__main__.py",
          "type": "blob",
          "size": 1135
        },
        {
          "path": "ogrep/models.py",
          "type": "blob",
          "size": 16858
        },
        {
          "path": "ogrep/search.py",
          "type": "blob",
          "size": 17064
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ogrep",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ogrep/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ogrep/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 484
        },
        {
          "path": "plugins/ogrep/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ogrep/commands/chunk.md",
          "type": "blob",
          "size": 1968
        },
        {
          "path": "plugins/ogrep/commands/clean.md",
          "type": "blob",
          "size": 692
        },
        {
          "path": "plugins/ogrep/commands/health.md",
          "type": "blob",
          "size": 1271
        },
        {
          "path": "plugins/ogrep/commands/index.md",
          "type": "blob",
          "size": 1524
        },
        {
          "path": "plugins/ogrep/commands/query.md",
          "type": "blob",
          "size": 1642
        },
        {
          "path": "plugins/ogrep/commands/refresh.md",
          "type": "blob",
          "size": 439
        },
        {
          "path": "plugins/ogrep/commands/reindex.md",
          "type": "blob",
          "size": 899
        },
        {
          "path": "plugins/ogrep/commands/reset.md",
          "type": "blob",
          "size": 717
        },
        {
          "path": "plugins/ogrep/commands/status.md",
          "type": "blob",
          "size": 831
        },
        {
          "path": "plugins/ogrep/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ogrep/skills/semantic-grep",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ogrep/skills/semantic-grep/SKILL.md",
          "type": "blob",
          "size": 17966
        },
        {
          "path": "pyproject.toml",
          "type": "blob",
          "size": 3864
        },
        {
          "path": "tests",
          "type": "tree",
          "size": null
        },
        {
          "path": "tests/__init__.py",
          "type": "blob",
          "size": 24
        },
        {
          "path": "tests/conftest.py",
          "type": "blob",
          "size": 3088
        },
        {
          "path": "tests/test_benchmark.py",
          "type": "blob",
          "size": 11686
        },
        {
          "path": "tests/test_chunk_command.py",
          "type": "blob",
          "size": 10751
        },
        {
          "path": "tests/test_chunking.py",
          "type": "blob",
          "size": 1959
        },
        {
          "path": "tests/test_cli.py",
          "type": "blob",
          "size": 3651
        },
        {
          "path": "tests/test_db.py",
          "type": "blob",
          "size": 2139
        },
        {
          "path": "tests/test_embed.py",
          "type": "blob",
          "size": 10737
        },
        {
          "path": "tests/test_embedding_reuse.py",
          "type": "blob",
          "size": 17226
        },
        {
          "path": "tests/test_filetype.py",
          "type": "blob",
          "size": 6786
        },
        {
          "path": "tests/test_health_command.py",
          "type": "blob",
          "size": 9058
        },
        {
          "path": "tests/test_hybrid_search.py",
          "type": "blob",
          "size": 8363
        },
        {
          "path": "tests/test_index_command.py",
          "type": "blob",
          "size": 4742
        },
        {
          "path": "tests/test_models.py",
          "type": "blob",
          "size": 13496
        },
        {
          "path": "tests/test_query_command.py",
          "type": "blob",
          "size": 29782
        },
        {
          "path": "tests/test_roundtrip.py",
          "type": "blob",
          "size": 9350
        },
        {
          "path": "tests/test_search.py",
          "type": "blob",
          "size": 23983
        }
      ],
      "marketplace": {
        "name": "ogrep-marketplace",
        "version": "0.6.4",
        "description": "Claude Code marketplace for ogrep - semantic code search with multiple modes: semantic (conceptual), fulltext (FTS5), and hybrid. Supports local models via LM Studio (offline, free) or OpenAI embeddings.",
        "owner_info": {
          "name": "gplv2",
          "email": "glenn@bitless.be",
          "url": "https://github.com/gplv2"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "ogrep",
            "description": "Semantic code search with multiple modes: semantic (embedding similarity for conceptual queries), fulltext (FTS5 keyword matching for exact identifiers), and hybrid (combined - best of both). JSON output for AI tools.",
            "source": "./plugins/ogrep",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add gplv2/ogrep-marketplace",
              "/plugin install ogrep@ogrep-marketplace"
            ],
            "signals": {
              "stars": 1,
              "forks": 0,
              "pushed_at": "2026-01-12T18:07:43Z",
              "created_at": "2026-01-10T12:34:30Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/chunk",
                "description": "Get a chunk by reference with optional context. Use after query finds something interesting to expand context.",
                "path": "plugins/ogrep/commands/chunk.md",
                "frontmatter": {
                  "name": "chunk",
                  "description": "Get a chunk by reference with optional context. Use after query finds something interesting to expand context."
                },
                "content": "# ogrep chunk\n\nRetrieve chunks by reference (path:index) or raw ID, with optional neighboring chunks for context.\n\n## Usage\n\n```bash\nogrep chunk \"path/to/file.py:N\"     # By chunk reference\nogrep chunk 42                       # By raw chunk ID\n\n# With context\nogrep chunk \"auth.py:2\" --before 1   # + 1 chunk before\nogrep chunk \"auth.py:2\" --after 1    # + 1 chunk after\nogrep chunk \"auth.py:2\" --context 1  # + 1 before AND after\n```\n\n## Options\n\n| Flag | Short | Description |\n|------|-------|-------------|\n| `--before N` | `-B` | Include N chunks before the requested chunk |\n| `--after N` | `-A` | Include N chunks after the requested chunk |\n| `--context N` | `-C` | Include N chunks before AND after (shorthand) |\n| `--json` | | Output as JSON (default, included for consistency) |\n\n## Output Format\n\nReturns JSON with the requested chunk and any context:\n\n```json\n{\n  \"requested\": {\n    \"chunk_ref\": \"src/auth.py:2\",\n    \"chunk_id\": 42,\n    \"chunk_index\": 2,\n    \"path\": \"/home/user/repo/src/auth.py\",\n    \"relative_path\": \"src/auth.py\",\n    \"start_line\": 61,\n    \"end_line\": 120,\n    \"language\": \"python\",\n    \"text\": \"def authenticate_user(...):\\n    ...\"\n  },\n  \"before\": [\n    {\n      \"chunk_ref\": \"src/auth.py:1\",\n      \"chunk_id\": 41,\n      \"start_line\": 1,\n      \"end_line\": 60,\n      \"text\": \"import hashlib\\n...\"\n    }\n  ],\n  \"after\": []\n}\n```\n\n## Common Patterns\n\n### Expand Context After Query\n\n```bash\n# Query found something interesting\nogrep query \"database connection\" --json\n# Result: chunk_ref: \"db.py:3\"\n\n# Get context above (imports, setup)\nogrep chunk \"db.py:3\" --before 1\n```\n\n### Trace Code Flow\n\n```bash\n# See what comes after a function definition\nogrep chunk \"handler.py:2\" --after 2\n```\n\n### Full Section Context\n\n```bash\n# Get surrounding context\nogrep chunk \"auth.py:4\" --context 1\n```"
              },
              {
                "name": "/clean",
                "description": null,
                "path": "plugins/ogrep/commands/clean.md",
                "frontmatter": null,
                "content": "---\ndescription: Remove stale entries from the index (files that no longer exist)\nallowed-tools: Bash\nargument-hint: [--vacuum] [--json]\n---\n\nClean up the index by removing entries for files that have been deleted.\n\n## Commands\n\n```bash\n# Clean stale entries\nogrep clean\n\n# Clean and compact database\nogrep clean --vacuum\n\n# Clean with JSON output\nogrep clean --json\n```\n\n## Flags\n\n| Flag | Description |\n|------|-------------|\n| `--vacuum` | Compact the SQLite database after cleaning |\n| `--json` | Output results as JSON |\n\n## JSON Output\n\n```json\n{\n  \"status\": \"success\",\n  \"removed_count\": 3,\n  \"removed_paths\": [\"/path/to/deleted1.py\", \"/path/to/deleted2.py\"],\n  \"vacuumed\": true\n}\n```\n"
              },
              {
                "name": "/health",
                "description": null,
                "path": "plugins/ogrep/commands/health.md",
                "frontmatter": null,
                "content": "---\ndescription: Show database health diagnostics and repair options\nallowed-tools: Bash\nargument-hint: [--vacuum] [--rebuild-fts] [--integrity] [--full] [--json]\n---\n\nDisplay comprehensive database diagnostics including table sizes, indexes, SQLite info, FTS5 stats, and integrity checks.\n\n## Commands\n\n```bash\n# Full diagnostic output\nogrep health\n\n# With JSON output (for AI tool integration)\nogrep health --json\n```\n\n## Repair Options\n\n| Flag | Description |\n|------|-------------|\n| `--vacuum` | Reclaim space and defragment database |\n| `--rebuild-fts` | Drop and rebuild FTS5 full-text index |\n| `--integrity` | Run full integrity check (slow on large DBs) |\n| `--full` | All repairs: vacuum + rebuild-fts + integrity |\n| `--json` | Output results as JSON |\n\n## JSON Output\n\n```json\n{\n  \"database\": \"/path/to/.ogrep/index.sqlite\",\n  \"tables\": {\n    \"chunks\": {\"rows\": 217, \"size_bytes\": 1782579},\n    \"files\": {\"rows\": 42, \"size_bytes\": 8192}\n  },\n  \"dedup_stats\": {\n    \"total_chunks\": 217,\n    \"unique_hashes\": 200,\n    \"duplicates\": 17,\n    \"savings_percent\": 7.8\n  },\n  \"fts5\": {\"rows\": 217, \"tokens_estimate\": 54073},\n  \"sqlite_info\": {\"version\": \"3.45.0\", \"page_size\": 4096},\n  \"integrity\": \"ok\",\n  \"operations\": {\"vacuum\": true, \"rebuild_fts\": false}\n}\n```\n"
              },
              {
                "name": "/index",
                "description": null,
                "path": "plugins/ogrep/commands/index.md",
                "frontmatter": null,
                "content": "---\ndescription: Index the current repository for semantic search (creates .ogrep/index.sqlite)\nallowed-tools: Bash\nargument-hint: [path] [--list] [--no-detect] [--json]\n---\n\nRun indexing with ogrep. If no path is provided, index the current directory.\n\n## Commands\n\n```bash\n# Index current directory\nogrep index ${1:-.}\n\n# Preview files before indexing (recommended for new repos)\nogrep index ${1:-.} --list\n\n# Index without MIME detection (faster)\nogrep index ${1:-.} --no-detect\n\n# Index with JSON output (for AI tool integration)\nogrep index ${1:-.} --json\n```\n\n## Flags\n\n| Flag | Description |\n|------|-------------|\n| `--list`, `-l` | Preview files with detection results (dry run) |\n| `--no-detect` | Disable MIME type detection (faster, null-byte only) |\n| `--json` | Output results as JSON (structured metadata) |\n| `-e PATTERN` | Add exclude patterns |\n| `-i PATTERN` | Include patterns (override excludes) |\n\n## JSON Output\n\nWhen using `--json`, returns structured data:\n\n```json\n{\n  \"status\": \"success\",\n  \"path\": \"/path/to/repo\",\n  \"files_indexed\": 42,\n  \"files_skipped\": 5,\n  \"chunks_total\": 217,\n  \"chunks_reused\": 150,\n  \"chunks_embedded\": 67,\n  \"tokens_saved_estimate\": 15000,\n  \"model\": \"text-embedding-3-small\",\n  \"dimensions\": 1536\n}\n```\n\n## Notes\n\n- Use `--list` first to see what will be indexed\n- Create `.ogrepignore` for permanent exclusions\n- Binary files are auto-detected and excluded\n- YAML files (*.yaml, *.yml) are now indexed by default\n\nIf `ogrep` is not installed, run: `pip install ogrep`\n"
              },
              {
                "name": "/query",
                "description": "Run a semantic query over the local SQLite index and return top matches",
                "path": "plugins/ogrep/commands/query.md",
                "frontmatter": {
                  "description": "Run a semantic query over the local SQLite index and return top matches",
                  "allowed-tools": "Bash",
                  "argument-hint": "<query text>"
                },
                "content": "Run:\n- `ogrep query \"$ARGUMENTS\" --top 15 --refresh --json`\n\n**Flags explained:**\n- `--refresh` ensures results reflect current code by checking for changed files and reindexing them before querying\n- `--json` returns structured output with full chunk text, language detection, and metadata\n- `--mode MODE` (optional) selects search mode: `semantic`, `fulltext`, or `hybrid` (default)\n\n**Search modes:**\n- `semantic`: Embedding similarity only (conceptual questions)\n- `fulltext`: FTS5 keyword matching (exact identifiers)\n- `hybrid`: Combined scoring (default, best of both)\n\n**JSON output structure:**\n```json\n{\n  \"query\": \"...\",\n  \"results\": [\n    {\n      \"rank\": 1,\n      \"chunk_ref\": \"src/file.py:2\",\n      \"chunk_id\": 42,\n      \"path\": \"/absolute/path/to/file.py\",\n      \"relative_path\": \"src/file.py\",\n      \"start_line\": 10,\n      \"end_line\": 70,\n      \"score\": 0.85,\n      \"confidence\": \"high\",\n      \"language\": \"python\",\n      \"text\": \"full chunk content...\"\n    }\n  ],\n  \"stats\": {\n    \"total_results\": 15,\n    \"total_chunks\": 1234,\n    \"search_time_ms\": 45,\n    \"search_mode\": \"hybrid\",\n    \"fts_available\": true,\n    \"index_model\": \"text-embedding-3-small\",\n    \"index_dimensions\": 1536,\n    \"refreshed_files\": 0,\n    \"confidence_summary\": {\"high\": 3, \"medium\": 5, \"low\": 2, \"very_low\": 0}\n  }\n}\n```\n\n**Using chunk_ref:** After finding a result, use `ogrep chunk \"src/file.py:2\"` to get more context.\n\nIf it fails because the DB doesn't exist:\n1) Run `/ogrep:index`\n2) Retry the query."
              },
              {
                "name": "/refresh",
                "description": "Refresh the index by reindexing any files that have changed since last index",
                "path": "plugins/ogrep/commands/refresh.md",
                "frontmatter": {
                  "description": "Refresh the index by reindexing any files that have changed since last index",
                  "allowed-tools": "Bash"
                },
                "content": "Run:\n- `ogrep index .`\n\nThis performs an incremental reindex - only changed files are re-embedded,\nand unchanged chunks reuse their existing embeddings (fast and token-efficient).\n\nUse this before running multiple queries to ensure all results are fresh,\nor configure Claude Code hooks to auto-refresh after file edits."
              },
              {
                "name": "/reindex",
                "description": null,
                "path": "plugins/ogrep/commands/reindex.md",
                "frontmatter": null,
                "content": "---\ndescription: Force rebuild of the semantic search index from scratch\nallowed-tools: Bash\nargument-hint: [path] [--json]\n---\n\nCompletely rebuild the index by removing it and reindexing from scratch.\n\n## Commands\n\n```bash\n# Rebuild index for current directory\nogrep reindex ${1:-.}\n\n# Rebuild with JSON output\nogrep reindex ${1:-.} --json\n```\n\n## Flags\n\n| Flag | Description |\n|------|-------------|\n| `--json` | Output results as JSON |\n| `-m MODEL` | Use specific embedding model |\n| `--chunk-lines N` | Lines per chunk (default: 60) |\n| `--overlap N` | Overlap lines between chunks (default: 10) |\n\n## JSON Output\n\n```json\n{\n  \"status\": \"success\",\n  \"path\": \"/path/to/repo\",\n  \"files_indexed\": 42,\n  \"files_skipped\": 5,\n  \"chunks_total\": 217,\n  \"chunks_embedded\": 217,\n  \"model\": \"text-embedding-3-small\",\n  \"dimensions\": 1536\n}\n```\n\nThis is equivalent to `ogrep reset --force && ogrep index`.\n"
              },
              {
                "name": "/reset",
                "description": null,
                "path": "plugins/ogrep/commands/reset.md",
                "frontmatter": null,
                "content": "---\ndescription: Remove the ogrep index database for the current scope\nallowed-tools: Bash\nargument-hint: [--force] [--json]\n---\n\nRemove the semantic search index.\n\n## Commands\n\n```bash\n# Reset index (requires -f in non-interactive mode)\nogrep reset -f\n\n# Reset with JSON output\nogrep reset -f --json\n```\n\n## Flags\n\n| Flag | Description |\n|------|-------------|\n| `-f`, `--force` | Skip confirmation (required in non-interactive mode) |\n| `--json` | Output results as JSON |\n\n## JSON Output\n\n```json\n{\n  \"status\": \"success\",\n  \"database\": \"/path/to/.ogrep/index.sqlite\",\n  \"removed\": true,\n  \"size_bytes\": 1048576,\n  \"size_human\": \"1.0 MB\"\n}\n```\n\nThe `-f` flag is required in non-interactive mode (like Claude Code).\n"
              },
              {
                "name": "/status",
                "description": "Show ogrep index status and statistics",
                "path": "plugins/ogrep/commands/status.md",
                "frontmatter": {
                  "description": "Show ogrep index status and statistics",
                  "allowed-tools": "Bash",
                  "argument-hint": [
                    "--json"
                  ]
                },
                "content": "Display information about the current index including file count, chunk count, model used, and database size.\n\n## Commands\n\n```bash\n# Show status (human readable)\nogrep status\n\n# Show status as JSON (for AI tool integration)\nogrep status --json\n```\n\n## JSON Output\n\nWhen using `--json`, returns structured data:\n\n```json\n{\n  \"database\": \"/path/to/.ogrep/index.sqlite\",\n  \"status\": \"indexed\",\n  \"indexed\": true,\n  \"files\": 42,\n  \"chunks\": 217,\n  \"model\": \"text-embedding-3-small\",\n  \"dimensions\": 1536,\n  \"size_bytes\": 1048576,\n  \"size_human\": \"1.0 MB\"\n}\n```\n\nIf no index exists:\n\n```json\n{\n  \"database\": \"/path/to/.ogrep/index.sqlite\",\n  \"status\": \"not_indexed\",\n  \"indexed\": false,\n  \"message\": \"No index found at ...\"\n}\n```"
              }
            ],
            "skills": [
              {
                "name": "semantic-grep",
                "description": "Semantic code search with multiple modes: semantic (embedding similarity), fulltext (FTS5 keywords), and hybrid (combined - best of both). Proactively use when:\n- User asks WHERE something is implemented (\"where is X handled\", \"how does Y work\")\n- User needs to understand code behavior vs finding exact names\n- Exact grep would require knowing the right terms first\n- User wants to search codebase by meaning, not just keywords\nUse when appropriate context detected. Trigger with conceptual code questions.\n",
                "path": "plugins/ogrep/skills/semantic-grep/SKILL.md",
                "frontmatter": {
                  "name": "semantic-grep",
                  "description": "Semantic code search with multiple modes: semantic (embedding similarity), fulltext (FTS5 keywords), and hybrid (combined - best of both). Proactively use when:\n- User asks WHERE something is implemented (\"where is X handled\", \"how does Y work\")\n- User needs to understand code behavior vs finding exact names\n- Exact grep would require knowing the right terms first\n- User wants to search codebase by meaning, not just keywords\nUse when appropriate context detected. Trigger with conceptual code questions.\n",
                  "allowed-tools": "Bash, Read"
                },
                "content": "# Semantic grep workflow (ogrep) v0.6.4\n\nFast semantic search over local repos using `ogrep` (SQLite index + embeddings).\n\n## Quick Examples (Copy & Paste)\n\n```bash\n# Search by concept (semantic)\nogrep query \"where is authentication handled\" -n 10 --refresh --json\n\n# Search by exact identifier (fulltext)\nogrep query \"def validate_token\" --mode fulltext --json\n\n# Combined search (hybrid - default)\nogrep query \"user login validation\" -n 15 --refresh --json\n\n# Expand context around a result\nogrep chunk \"src/auth.py:2\" --context 1 --json\n\n# Index the repo (first time or after major changes)\nogrep index .\n\n# Check index status\nogrep status --json\n```\n\n## Common Patterns\n\n| Task | Command |\n|------|---------|\n| Find where X is implemented | `ogrep query \"where is X handled\" --json` |\n| Find exact function/class | `ogrep query \"def function_name\" --mode fulltext --json` |\n| Understand how X works | `ogrep query \"how does X work\" -n 15 --json` |\n| Find all uses of X | `ogrep query \"X\" --mode fulltext --json` |\n| Search after editing files | `ogrep query \"...\" --refresh --json` |\n| Get more context | `ogrep chunk \"file.py:N\" --context 2` |\n| Find config/YAML | `ogrep query \"database configuration\" --json` |\n| Find error handling | `ogrep query \"exception handling\" --json` |\n\n## Key Features\n\n- **Three search modes**: semantic (conceptual), fulltext (exact), hybrid (combined)\n- **Relative confidence scoring**: Compares results to top match (v0.6.4+)\n- **JSON output for all commands**: Structured data for AI tool integration\n- **Chunk navigation**: Expand context around search results\n- **Smart embedding reuse**: Minimal API costs on reindex\n- **YAML files indexed**: Configuration files now searchable by default\n\n## Quick Start\n\n```bash\n# Index the repo (run once, or after major changes)\nogrep index .\n\n# Semantic search with JSON output (recommended for AI tools)\nogrep query \"where is authentication handled?\" -n 15 --json\n\n# Use --refresh to ensure freshness after recent edits\nogrep query \"database connection logic\" -n 10 --refresh --json\n```\n\n### When to Use --refresh\n\nThe `--refresh` flag checks for changed files and reindexes them before searching:\n\n- **Use --refresh**: After editing files, or when you need guaranteed fresh results\n- **Skip --refresh**: For faster queries when you know files haven't changed recently\n\nThe refresh operation is fast due to smart embedding reuse (unchanged chunks keep their embeddings).\n\n## Search Modes\n\nogrep supports three search modes via `--mode` (or `-M`):\n\n| Mode | Best For | Example Query |\n|------|----------|---------------|\n| `semantic` | Conceptual questions | \"where is user authentication handled\" |\n| `fulltext` | Exact identifiers | \"def validate_token\" |\n| `hybrid` | Mixed/unsure (default) | \"authenticate user validation\" |\n\n```bash\n# Explicit mode selection\nogrep query \"authenticate\" --mode semantic --json   # Embeddings only\nogrep query \"def authenticate\" --mode fulltext --json  # Keywords only\nogrep query \"user login\" --mode hybrid --json       # Combined (default)\n```\n\n**Default behavior:**\n- Uses `OGREP_SEARCH_MODE` env var if set\n- Falls back to `hybrid` if not set\n- Gracefully degrades to `semantic` if FTS5 unavailable\n\n### When to Use Each Mode\n\n| Situation | Mode | Why |\n|-----------|------|-----|\n| \"How does X work?\" | semantic | Conceptual understanding |\n| \"Where is X implemented?\" | semantic/hybrid | Need related code, not exact match |\n| Looking for exact function name | fulltext | Know the identifier |\n| Found semantic result, want exact matches | fulltext | Refine initial finding |\n| Unsure what terms codebase uses | hybrid | Best of both worlds |\n\n## Chunk Navigation\n\nAfter a query finds something interesting, use `ogrep chunk` to expand context:\n\n```bash\n# Get chunk by reference (from query results)\nogrep chunk \"src/auth.py:2\"\n\n# Get surrounding context\nogrep chunk \"src/auth.py:2\" --before 1    # + 1 chunk before\nogrep chunk \"src/auth.py:2\" --after 1     # + 1 chunk after\nogrep chunk \"src/auth.py:2\" --context 1   # + 1 before AND after\n\n# Also works with raw chunk IDs\nogrep chunk 42\n```\n\n### Direct Chunk Access\n\nYou can access chunks directly without querying first:\n\n```bash\n# Access chunk 0 (first chunk) of any file\nogrep chunk \"src/main.py:0\" --json\n\n# Access specific chunk by file path and index\nogrep chunk \"src/models/user.py:3\" --json\n\n# Access by database chunk ID (from previous query results)\nogrep chunk 42 --json\nogrep chunk 157 --context 1 --json\n```\n\n**Understanding chunk_ref format:** `\"path/to/file.py:N\"` where N is the chunk index (0-based) within that file. Each chunk is ~60 lines of code by default.\n\n### Navigating Neighbors\n\nNeighbors are chunks adjacent to your target - use them to understand context:\n\n```bash\n# See what comes BEFORE the target chunk\nogrep chunk \"handler.py:5\" --before 2 --json\n# Returns: requested chunk + 2 chunks before it\n\n# See what comes AFTER the target chunk\nogrep chunk \"handler.py:5\" --after 2 --json\n# Returns: requested chunk + 2 chunks after it\n\n# See BOTH directions (full context)\nogrep chunk \"handler.py:5\" --context 2 --json\n# Returns: 2 before + target + 2 after (5 total chunks)\n```\n\n**When to expand neighbors:**\n| Situation | Direction | Example |\n|-----------|-----------|---------|\n| Found function body, need signature | `--before 1` | Class definition above |\n| Found function, need to see caller | `--after 1` | What happens next |\n| Found config, need full section | `--context 1` | Surrounding settings |\n| Debugging flow, need full picture | `--context 2` | Bigger context |\n\n### Chunk Navigation Patterns\n\n#### Pattern 1: Expand Context After Query\n```bash\n# Query found something in chunk 3, want to see setup above\nogrep query \"database connection\" --json\n# Result: chunk_ref: \"db.py:3\"\nogrep chunk \"db.py:3\" --before 1\n```\n\n#### Pattern 2: Trace Function Flow\n```bash\n# Found a function, want to see what comes next\nogrep chunk \"handler.py:2\" --after 2\n```\n\n#### Pattern 3: Understand Full Module Section\n```bash\n# Found interesting code, want full surrounding context\nogrep chunk \"auth.py:4\" --context 2\n```\n\n#### Pattern 4: Quick Keyword Lookup\n```bash\n# Know exact function name\nogrep query \"def process_request\" --mode fulltext --json\n```\n\n#### Pattern 5: Walk Through a File Sequentially\n```bash\n# Start at the beginning of a file\nogrep chunk \"api/routes.py:0\" --json\n# Then walk forward\nogrep chunk \"api/routes.py:1\" --json\nogrep chunk \"api/routes.py:2\" --json\n# Or get multiple at once\nogrep chunk \"api/routes.py:0\" --after 3 --json\n```\n\n#### Pattern 6: Find Class Definition from Method\n```bash\n# Query found a method in chunk 5\nogrep query \"def validate_credentials\" --json\n# Result: chunk_ref: \"auth/user.py:5\"\n# Look backward to find the class definition\nogrep chunk \"auth/user.py:5\" --before 2 --json\n```\n\n## Confidence Levels\n\nEach result includes a `confidence` level using **relative scoring** (v0.6.4+). Confidence compares each result to the top score, not fixed thresholds:\n\n| Confidence | Relative Score | What It Means |\n|------------|----------------|---------------|\n| `high` | 90%+ of top | Trust and use directly |\n| `medium` | 75-89% of top | Use but verify with context |\n| `low` | 50-74% of top | Consider alternative queries |\n| `very_low` | < 50% of top | Likely not relevant |\n\n**Why relative scoring matters:**\nCosine similarity scores cluster around 0.3-0.5 (not uniformly [0,1]). A score of 0.45 is excellent! Relative scoring answers: \"How good is this compared to the best result?\"\n\n**Example output:**\n```\n  1. src/auth.py:2  score=0.45 [high]      # Top result = high confidence\n  2. src/auth.py:5  score=0.42 [high]      # 93% of top = still high\n  3. src/utils.py:1 score=0.35 [medium]    # 78% of top = medium\n  4. src/db.py:3    score=0.20 [very_low]  # 44% of top = very_low\n```\n\n**Using confidence effectively:**\n- High confidence results: Use directly in your response\n- Medium confidence: Read the chunk, maybe expand context with `ogrep chunk --context 1`\n- Low confidence: The query might need refinement, or the code doesn't exist\n- Mixed results (some high, some low): The high confidence ones are likely correct\n\nThe `confidence_summary` in stats shows the distribution across all results.\n\n## JSON Output Format\n\nThe `--json` flag returns structured data:\n\n```json\n{\n  \"query\": \"where is authentication handled?\",\n  \"results\": [\n    {\n      \"rank\": 1,\n      \"chunk_ref\": \"src/auth.py:2\",\n      \"chunk_id\": 42,\n      \"path\": \"/home/user/repo/src/auth.py\",\n      \"relative_path\": \"src/auth.py\",\n      \"start_line\": 61,\n      \"end_line\": 120,\n      \"score\": 0.8523,\n      \"confidence\": \"high\",\n      \"language\": \"python\",\n      \"text\": \"def authenticate_user(username, password):\\n    ...\"\n    }\n  ],\n  \"stats\": {\n    \"total_results\": 15,\n    \"total_chunks\": 1234,\n    \"search_time_ms\": 45,\n    \"search_mode\": \"hybrid\",\n    \"fts_available\": true,\n    \"index_model\": \"text-embedding-3-small\",\n    \"index_dimensions\": 1536,\n    \"refreshed_files\": 0,\n    \"confidence_summary\": {\n      \"high\": 3,\n      \"medium\": 7,\n      \"low\": 5,\n      \"very_low\": 0\n    }\n  }\n}\n```\n\n**Key fields:**\n- `chunk_ref`: Primary reference for `ogrep chunk` command (e.g., `src/auth.py:2`)\n- `chunk_id`: Internal ID (also works with `ogrep chunk 42`)\n- `confidence`: Human-readable confidence level\n- `relative_path`: Easier to read than absolute paths\n- `language`: Programming language detected from extension\n- `text`: **Full chunk content** (not truncated)\n- `fts_available`: Whether hybrid/fulltext search was possible\n- `confidence_summary`: Distribution of confidence levels across results\n- `refreshed_files`: Number of files reindexed (when using --refresh)\n\n### Chunk Command JSON Output\n\n```json\n{\n  \"requested\": {\n    \"chunk_ref\": \"src/auth.py:2\",\n    \"chunk_id\": 42,\n    \"chunk_index\": 2,\n    \"path\": \"/home/user/repo/src/auth.py\",\n    \"relative_path\": \"src/auth.py\",\n    \"start_line\": 61,\n    \"end_line\": 120,\n    \"language\": \"python\",\n    \"text\": \"def authenticate_user(...)...\"\n  },\n  \"before\": [ /* array of chunk objects */ ],\n  \"after\": [ /* array of chunk objects */ ]\n}\n```\n\n## Commands Reference\n\nAll commands support `--json` for structured output (AI tool integration).\n\n| Command | Description | JSON Support |\n|---------|-------------|--------------|\n| `ogrep index .` | Index current directory | `--json` |\n| `ogrep index . --list` | Preview files (dry run) | `--json` |\n| `ogrep query \"text\" -n 15 --json` | Search (add -r for refresh) | `--json` |\n| `ogrep chunk \"path:N\" -C 1` | Get chunk with context | `--json` (default) |\n| `ogrep status` | Show index info | `--json` |\n| `ogrep health` | Full database diagnostics | `--json` |\n| `ogrep health --vacuum` | Reclaim space and defragment | `--json` |\n| `ogrep health --rebuild-fts` | Rebuild FTS5 index | `--json` |\n| `ogrep reindex .` | Rebuild index from scratch | `--json` |\n| `ogrep reset -f` | Delete index | `--json` |\n| `ogrep clean` | Remove stale entries | `--json` |\n| `ogrep models` | List embedding models | `--json` |\n| `ogrep tune .` | Auto-tune chunk size | `--json` |\n| `ogrep benchmark .` | Compare all embedding models | `--json` |\n\n### JSON Output for All Commands\n\nEvery command now supports `--json` for programmatic access:\n\n```bash\n# Index with JSON output\nogrep index . --json\n# Returns: {\"status\": \"success\", \"files_indexed\": 42, \"chunks_total\": 217, ...}\n\n# Status as JSON\nogrep status --json\n# Returns: {\"indexed\": true, \"files\": 42, \"chunks\": 217, \"model\": \"...\", ...}\n\n# Clean with JSON output\nogrep clean --json\n# Returns: {\"status\": \"success\", \"removed_count\": 3, \"removed_paths\": [...]}\n\n# Health check as JSON\nogrep health --json\n# Returns: {\"tables\": {...}, \"dedup_stats\": {...}, \"fts5\": {...}, ...}\n\n# Models as JSON\nogrep models --json\n# Returns: {\"models\": [{\"id\": \"...\", \"dimensions\": 1536, ...}], ...}\n```\n\n## Flag Reference\n\n### Query Flags\n\n| Flag | Short | Description |\n|------|-------|-------------|\n| `--refresh` | `-r` | Reindex changed files before search |\n| `--json` | | Full JSON output (recommended for AI tools) |\n| `--mode MODE` | `-M` | Search mode: semantic, fulltext, hybrid |\n| `--top N` | `-n` | Number of results (default: 10) |\n| `--model MODEL` | `-m` | Embedding model (must match index) |\n\n### Chunk Flags\n\n| Flag | Short | Description |\n|------|-------|-------------|\n| `--before N` | `-B` | Include N chunks before |\n| `--after N` | `-A` | Include N chunks after |\n| `--context N` | `-C` | Include N chunks before AND after |\n\n### Index Flags\n\n| Flag | Short | Description |\n|------|-------|-------------|\n| `--list` | `-l` | Preview files (dry run, doesn't index) |\n| `--json` | | Output results as JSON |\n| `--exclude PATTERN` | `-e` | Add exclude pattern |\n| `--include PATTERN` | `-i` | Override default excludes |\n| `--model MODEL` | `-m` | Embedding model |\n| `--chunk-lines N` | | Lines per chunk (model-specific default) |\n| `--overlap N` | | Overlap between chunks |\n| `--no-detect` | | Skip MIME detection (faster) |\n\n### Status/Health/Clean/Reset Flags\n\n| Flag | Description |\n|------|-------------|\n| `--json` | Output results as JSON |\n| `--vacuum` | (clean/health) Compact database |\n| `--rebuild-fts` | (health) Rebuild FTS5 index |\n| `--integrity` | (health) Full integrity check |\n| `--full` | (health) All repairs |\n| `-f`, `--force` | (reset) Skip confirmation |\n\n## Environment Variables\n\n### Core Configuration\n\n| Variable | Default | Description |\n|----------|---------|-------------|\n| `OPENAI_API_KEY` | - | Required for OpenAI embeddings |\n| `OGREP_BASE_URL` | - | Local server URL (e.g., `http://localhost:1234/v1`) |\n| `OGREP_MODEL` | `text-embedding-3-small`* | Default embedding model |\n| `OGREP_DIMENSIONS` | model default | Embedding dimensions |\n\n*When `OGREP_BASE_URL` is set, defaults to `nomic-embed-text-v1.5` (local model)\n\n### Chunk Configuration\n\n| Variable | Default | Description |\n|----------|---------|-------------|\n| `OGREP_CHUNK_LINES` | model-specific | Lines per chunk (60 for OpenAI, 30 for local) |\n| `OGREP_OVERLAP_LINES` | model-specific | Overlap between chunks |\n| `OGREP_BATCH_SIZE` | auto-tuned | Batch size for embedding requests |\n\n### Search Configuration\n\n| Variable | Default | Description |\n|----------|---------|-------------|\n| `OGREP_SEARCH_MODE` | `hybrid` | Default search mode |\n| `OGREP_HYBRID_ALPHA` | `0.7` | Semantic weight in hybrid (0.0-1.0) |\n\n### Confidence Configuration\n\n| Variable | Default | Description |\n|----------|---------|-------------|\n| `OGREP_CONFIDENCE_MODE` | `relative` | Mode: `relative` (% of top) or `absolute` |\n| `OGREP_RELATIVE_HIGH` | `0.90` | Relative: 90% of top score = high |\n| `OGREP_RELATIVE_MEDIUM` | `0.75` | Relative: 75% of top score = medium |\n| `OGREP_RELATIVE_LOW` | `0.50` | Relative: 50% of top score = low |\n| `OGREP_CONFIDENCE_HIGH` | `0.50` | Absolute: threshold for \"high\" |\n| `OGREP_CONFIDENCE_MEDIUM` | `0.40` | Absolute: threshold for \"medium\" |\n| `OGREP_CONFIDENCE_LOW` | `0.30` | Absolute: threshold for \"low\" |\n\n## FTS5 Availability\n\nHybrid and fulltext modes require FTS5 index. If missing:\n- Search falls back to semantic mode automatically\n- Warning printed to stderr (not in JSON output)\n- `fts_available: false` in JSON stats\n\n**To enable hybrid search:**\n```bash\nogrep reindex .   # Rebuilds index with FTS5\n```\n\n**Check FTS5 status:**\n```bash\nogrep health      # Shows \"FTS5 Stats\" section\n```\n\n## Operational Notes\n\n### Model Consistency\n- Model must match between index and query\n- Run `ogrep status` to check current index model\n- Use same `-m` flag or environment variable\n\n### Smart Embedding Reuse\nogrep minimizes API costs through intelligent caching:\n- Unchanged files are skipped entirely\n- Modified files reuse embeddings for unchanged chunks\n- Cross-file deduplication: identical chunks share embeddings\n\n### Local Models (LM Studio)\nFor offline/free usage:\n```bash\nexport OGREP_BASE_URL=http://localhost:1234/v1\nogrep index . -m nomic   # Uses local model\n```\n\n### Token-Aware Batching\nLarge batches are automatically split to respect model context limits. No configuration needed.\n\n### Database Health\n```bash\nogrep health              # Full diagnostics\nogrep health --vacuum     # Reclaim space\nogrep health --integrity  # Full integrity check\n```\n\n## Workflow Examples\n\n### Example 1: Initial Search\n```bash\n# First time setup\nogrep index .\nogrep query \"how does the API handle errors\" -n 10 --json\n```\n\n### Example 2: Deep Dive After Finding Something\n```bash\n# Found error handling in handler.py:3\nogrep chunk \"handler.py:3\" --context 2\n\n# Look for related error types\nogrep query \"error types\" --mode fulltext --json\n```\n\n### Example 3: After Editing Files\n```bash\n# Ensure fresh results after making changes\nogrep query \"the function I just modified\" --refresh --json\n```\n\n### Example 4: Exploring Unknown Codebase\n```bash\n# Conceptual search first\nogrep query \"where is user data stored\" --json\n\n# Then keyword search for specifics\nogrep query \"UserRepository\" --mode fulltext --json\n\n# Expand context on interesting results\nogrep chunk \"models/user.py:2\" -C 1\n```\n\n### Example 5: Debugging Session\n```bash\n# Find error handling\nogrep query \"exception handling for network requests\" --json\n\n# Look at surrounding code\nogrep chunk \"client.py:4\" --before 2 --after 1\n\n# Find all catch blocks\nogrep query \"except Exception\" --mode fulltext --json\n```"
              }
            ]
          }
        ]
      }
    }
  ]
}