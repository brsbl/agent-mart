{
  "owner": {
    "id": "hgeldenhuys",
    "display_name": "hgeldenhuys",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/179999?u=989a39fc64e9eb433a91c144702942251a989d7f&v=4",
    "url": "https://github.com/hgeldenhuys",
    "bio": "Fullstack Javascript Engineer / Ex Mendix MVP ",
    "stats": {
      "total_repos": 1,
      "total_plugins": 3,
      "total_commands": 0,
      "total_skills": 3,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "hgeldenhuys/claude-agent-lifecycle",
      "url": "https://github.com/hgeldenhuys/claude-agent-lifecycle",
      "description": null,
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2025-12-06T19:43:12Z",
        "created_at": "2025-11-28T01:45:59Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 1329
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 740
        },
        {
          "path": ".claude",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/skills/managing-agent-lifecycles",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/skills/managing-agent-lifecycles/SKILL.md",
          "type": "blob",
          "size": 5240
        },
        {
          "path": ".claude/skills/managing-agent-lifecycles/api-reference.md",
          "type": "blob",
          "size": 5421
        },
        {
          "path": ".claude/skills/managing-agent-lifecycles/examples.md",
          "type": "blob",
          "size": 9129
        },
        {
          "path": ".claude/skills/managing-agent-lifecycles/patterns.md",
          "type": "blob",
          "size": 8569
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 261
        },
        {
          "path": "CLAUDE.md",
          "type": "blob",
          "size": 2634
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 8941
        },
        {
          "path": "TEXTILE.md",
          "type": "blob",
          "size": 1172
        },
        {
          "path": "hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "hooks/README.md",
          "type": "blob",
          "size": 3875
        },
        {
          "path": "hooks/hooks.json",
          "type": "blob",
          "size": 375
        },
        {
          "path": "hooks/lifecycle-manager.ts",
          "type": "blob",
          "size": 2828
        },
        {
          "path": "package.json",
          "type": "blob",
          "size": 982
        },
        {
          "path": "scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "scripts/install.ts",
          "type": "blob",
          "size": 7900
        },
        {
          "path": "src",
          "type": "tree",
          "size": null
        },
        {
          "path": "src/index.ts",
          "type": "blob",
          "size": 3907
        },
        {
          "path": "src/registry.ts",
          "type": "blob",
          "size": 9760
        },
        {
          "path": "src/storage",
          "type": "tree",
          "size": null
        },
        {
          "path": "src/storage/file.ts",
          "type": "blob",
          "size": 6881
        },
        {
          "path": "src/storage/index.ts",
          "type": "blob",
          "size": 222
        },
        {
          "path": "src/storage/memory.ts",
          "type": "blob",
          "size": 2967
        },
        {
          "path": "src/types.ts",
          "type": "blob",
          "size": 7982
        },
        {
          "path": "src/utils",
          "type": "tree",
          "size": null
        },
        {
          "path": "src/utils/logger.ts",
          "type": "blob",
          "size": 4630
        },
        {
          "path": "src/utils/paths.ts",
          "type": "blob",
          "size": 1096
        },
        {
          "path": "tests",
          "type": "tree",
          "size": null
        },
        {
          "path": "tests/integration",
          "type": "tree",
          "size": null
        },
        {
          "path": "tests/integration/lifecycle-isolation.test.ts",
          "type": "blob",
          "size": 13837
        },
        {
          "path": "tests/unit",
          "type": "tree",
          "size": null
        },
        {
          "path": "tests/unit/registry.test.ts",
          "type": "blob",
          "size": 10042
        },
        {
          "path": "tests/unit/storage.test.ts",
          "type": "blob",
          "size": 8712
        },
        {
          "path": "tsconfig.json",
          "type": "blob",
          "size": 425
        }
      ],
      "marketplace": {
        "name": "claude-skills-marketplace",
        "version": "1.0.0",
        "description": "Official marketplace for Claude Code agent lifecycle, knowledge management, and SDLC orchestration plugins",
        "owner_info": {
          "name": "Hendrik Geldenhuys",
          "url": "https://github.com/hgeldenhuys"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "claude-agent-lifecycle",
            "description": "Persistent agent lifecycle management with 6 lifespans (ephemeral, turn, context, session, workflow, project)",
            "source": "./",
            "category": null,
            "version": "1.0.0",
            "author": null,
            "install_commands": [
              "/plugin marketplace add hgeldenhuys/claude-agent-lifecycle",
              "/plugin install claude-agent-lifecycle@claude-skills-marketplace"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2025-12-06T19:43:12Z",
              "created_at": "2025-11-28T01:45:59Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "managing-agent-lifecycles",
                "description": "Implements persistent agent lifecycle management with 6 lifespans (ephemeral, turn, context, session, workflow, project). Use when creating agents that survive across turns, managing workflow-scoped execution, or needing automatic cleanup at lifecycle boundaries.",
                "path": ".claude/skills/managing-agent-lifecycles/SKILL.md",
                "frontmatter": {
                  "name": "managing-agent-lifecycles",
                  "description": "Implements persistent agent lifecycle management with 6 lifespans (ephemeral, turn, context, session, workflow, project). Use when creating agents that survive across turns, managing workflow-scoped execution, or needing automatic cleanup at lifecycle boundaries."
                },
                "content": "# Managing Agent Lifecycles\n\nPersistent agent lifecycle management for Claude Code projects. Creates agents with defined lifespans and automatic disposal.\n\n## When to Use\n\n- Creating agents that persist beyond a single call\n- Managing workflow-scoped agents (story execution, feature development)\n- Automatic agent cleanup at lifecycle boundaries (Stop, SessionEnd)\n- Building systems with multiple cooperating agents\n\n## Quick Start\n\n```typescript\nimport { AgentRegistry } from 'claude-agent-lifecycle';\n\nconst registry = new AgentRegistry();\n\n// Create session-scoped agent (survives until session ends)\nconst { agent, isNew } = await registry.create({\n  lifespan: 'session',\n  name: 'my-advisor',\n  model: 'haiku',\n});\n\n// Resume later in same session\nconst advisor = await registry.resume('my-advisor');\n```\n\n## The 6 Lifespans\n\n| Lifespan | Auto-Disposal | Use Case |\n|----------|---------------|----------|\n| `ephemeral` | Immediately | Fire-and-forget tasks |\n| `turn` | Stop event | Per-response helpers |\n| `context` | Context reset | Multi-turn conversations |\n| `session` | SessionEnd | Knowledge advisors |\n| `workflow` | Manual/complete | Story/feature execution |\n| `project` | Manual only | Singleton services |\n\n### Choosing a Lifespan\n\n```\nHow long should the agent live?\n├── Just this one call? → ephemeral\n├── Until response completes? → turn\n├── Until context resets? → context\n├── Until session ends? → session\n├── Until work unit completes? → workflow\n└── Forever (manual disposal)? → project\n```\n\n## Implementation Checklist\n\nWhen implementing agent lifecycle management:\n\n- [ ] Install package: `bun add claude-agent-lifecycle`\n- [ ] Choose appropriate lifespan for each agent type\n- [ ] Configure hooks for automatic disposal (Stop, SessionEnd)\n- [ ] Use descriptive agent names (e.g., `backend-dev` not `agent1`)\n- [ ] Store role and capabilities in metadata\n- [ ] Test with debug mode enabled\n\n## Common Patterns\n\n### Pattern 1: Session-Scoped Advisor\n\nFor agents persisting throughout a Claude Code session:\n\n```typescript\nconst { agent, isNew } = await registry.create({\n  lifespan: 'session',\n  name: 'shadow-advisor',\n  model: 'haiku',\n  metadata: { role: 'knowledge-retrieval' },\n});\n```\n\n### Pattern 2: Workflow-Scoped Execution\n\nFor agents tied to a unit of work:\n\n```typescript\n// Start executor for story\nawait registry.startWorkflow({\n  lifespan: 'workflow',\n  workflowId: 'FEAT-001',\n  name: 'executor',\n});\n\n// Add specialists\nawait registry.startWorkflow({\n  lifespan: 'workflow',\n  workflowId: 'FEAT-001',\n  name: 'backend-dev',\n});\n\n// Complete when done (disposes all workflow agents)\nawait registry.completeWorkflow('FEAT-001');\n```\n\n### Pattern 3: Turn-Scoped Helper\n\nFor short-lived per-response agents:\n\n```typescript\nconst { agent } = await registry.create({\n  lifespan: 'turn',\n  name: 'code-analyzer',\n});\n// Automatically disposed when Stop hook fires\n```\n\nSee `patterns.md` for detailed implementations.\n\n## Hook Integration\n\nHooks automatically dispose agents at lifecycle boundaries.\n\n### hooks/hooks.json\n\n```json\n{\n  \"Stop\": [{\n    \"hooks\": [{\n      \"type\": \"command\",\n      \"command\": \"bun \\\"${CLAUDE_PLUGIN_ROOT}/hooks/lifecycle-manager.ts\\\"\"\n    }]\n  }],\n  \"SessionEnd\": [{\n    \"hooks\": [{\n      \"type\": \"command\",\n      \"command\": \"bun \\\"${CLAUDE_PLUGIN_ROOT}/hooks/lifecycle-manager.ts\\\"\"\n    }]\n  }]\n}\n```\n\n### hooks/lifecycle-manager.ts\n\n```typescript\nimport { AgentRegistry } from 'claude-agent-lifecycle';\nimport { getHookEvent } from 'claude-hooks-sdk';\n\nconst event = getHookEvent();\nconst registry = new AgentRegistry();\n\nif (event.type === 'Stop') {\n  await registry.disposeByLifespan('turn');\n}\n\nif (event.type === 'SessionEnd') {\n  await registry.disposeByScope(event.session.sessionId);\n}\n```\n\n## Storage Structure\n\n```\n.agent/agents/\n├── session/{session-id}/{agent-name}.json\n├── workflow/{workflow-id}/{agent-name}.json\n└── project/{agent-name}.json\n```\n\n## Debug Mode\n\nEnable for troubleshooting:\n\n```bash\nAGENT_LIFECYCLE_DEBUG=true claude\n```\n\nOutput:\n```\n[agent-lifecycle] Created: shadow-advisor (session)\n[agent-lifecycle] Stop: Disposed 1 turn-scoped agents\n```\n\n## API Summary\n\n| Method | Purpose |\n|--------|---------|\n| `create(config)` | Create or resume agent |\n| `resume(name)` | Resume by name |\n| `dispose(id)` | Dispose specific agent |\n| `startWorkflow(config)` | Start workflow agent |\n| `completeWorkflow(id)` | Complete and dispose workflow |\n\nSee `api-reference.md` for complete API documentation.\n\n## Installation\n\n```bash\n# As plugin (recommended)\n/plugin marketplace add hgeldenhuys/claude-agent-lifecycle\n/plugin install claude-agent-lifecycle\n\n# As package\nbun add claude-agent-lifecycle\n```\n\n## Related Files\n\n- `api-reference.md` - Complete API documentation\n- `patterns.md` - Detailed pattern implementations\n- `examples.md` - Real-world usage examples"
              }
            ]
          },
          {
            "name": "claude-weave",
            "description": "11-dimensional knowledge framework with Shadow Advisor, Librarian, and Bayesian fact tracking",
            "source": {
              "source": "github",
              "repo": "hgeldenhuys/claude-weave"
            },
            "category": null,
            "version": "2.1.0",
            "author": null,
            "install_commands": [
              "/plugin marketplace add hgeldenhuys/claude-agent-lifecycle",
              "/plugin install claude-weave@claude-skills-marketplace"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2025-12-06T19:43:12Z",
              "created_at": "2025-11-28T01:45:59Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "managing-agent-lifecycles",
                "description": "Implements persistent agent lifecycle management with 6 lifespans (ephemeral, turn, context, session, workflow, project). Use when creating agents that survive across turns, managing workflow-scoped execution, or needing automatic cleanup at lifecycle boundaries.",
                "path": ".claude/skills/managing-agent-lifecycles/SKILL.md",
                "frontmatter": {
                  "name": "managing-agent-lifecycles",
                  "description": "Implements persistent agent lifecycle management with 6 lifespans (ephemeral, turn, context, session, workflow, project). Use when creating agents that survive across turns, managing workflow-scoped execution, or needing automatic cleanup at lifecycle boundaries."
                },
                "content": "# Managing Agent Lifecycles\n\nPersistent agent lifecycle management for Claude Code projects. Creates agents with defined lifespans and automatic disposal.\n\n## When to Use\n\n- Creating agents that persist beyond a single call\n- Managing workflow-scoped agents (story execution, feature development)\n- Automatic agent cleanup at lifecycle boundaries (Stop, SessionEnd)\n- Building systems with multiple cooperating agents\n\n## Quick Start\n\n```typescript\nimport { AgentRegistry } from 'claude-agent-lifecycle';\n\nconst registry = new AgentRegistry();\n\n// Create session-scoped agent (survives until session ends)\nconst { agent, isNew } = await registry.create({\n  lifespan: 'session',\n  name: 'my-advisor',\n  model: 'haiku',\n});\n\n// Resume later in same session\nconst advisor = await registry.resume('my-advisor');\n```\n\n## The 6 Lifespans\n\n| Lifespan | Auto-Disposal | Use Case |\n|----------|---------------|----------|\n| `ephemeral` | Immediately | Fire-and-forget tasks |\n| `turn` | Stop event | Per-response helpers |\n| `context` | Context reset | Multi-turn conversations |\n| `session` | SessionEnd | Knowledge advisors |\n| `workflow` | Manual/complete | Story/feature execution |\n| `project` | Manual only | Singleton services |\n\n### Choosing a Lifespan\n\n```\nHow long should the agent live?\n├── Just this one call? → ephemeral\n├── Until response completes? → turn\n├── Until context resets? → context\n├── Until session ends? → session\n├── Until work unit completes? → workflow\n└── Forever (manual disposal)? → project\n```\n\n## Implementation Checklist\n\nWhen implementing agent lifecycle management:\n\n- [ ] Install package: `bun add claude-agent-lifecycle`\n- [ ] Choose appropriate lifespan for each agent type\n- [ ] Configure hooks for automatic disposal (Stop, SessionEnd)\n- [ ] Use descriptive agent names (e.g., `backend-dev` not `agent1`)\n- [ ] Store role and capabilities in metadata\n- [ ] Test with debug mode enabled\n\n## Common Patterns\n\n### Pattern 1: Session-Scoped Advisor\n\nFor agents persisting throughout a Claude Code session:\n\n```typescript\nconst { agent, isNew } = await registry.create({\n  lifespan: 'session',\n  name: 'shadow-advisor',\n  model: 'haiku',\n  metadata: { role: 'knowledge-retrieval' },\n});\n```\n\n### Pattern 2: Workflow-Scoped Execution\n\nFor agents tied to a unit of work:\n\n```typescript\n// Start executor for story\nawait registry.startWorkflow({\n  lifespan: 'workflow',\n  workflowId: 'FEAT-001',\n  name: 'executor',\n});\n\n// Add specialists\nawait registry.startWorkflow({\n  lifespan: 'workflow',\n  workflowId: 'FEAT-001',\n  name: 'backend-dev',\n});\n\n// Complete when done (disposes all workflow agents)\nawait registry.completeWorkflow('FEAT-001');\n```\n\n### Pattern 3: Turn-Scoped Helper\n\nFor short-lived per-response agents:\n\n```typescript\nconst { agent } = await registry.create({\n  lifespan: 'turn',\n  name: 'code-analyzer',\n});\n// Automatically disposed when Stop hook fires\n```\n\nSee `patterns.md` for detailed implementations.\n\n## Hook Integration\n\nHooks automatically dispose agents at lifecycle boundaries.\n\n### hooks/hooks.json\n\n```json\n{\n  \"Stop\": [{\n    \"hooks\": [{\n      \"type\": \"command\",\n      \"command\": \"bun \\\"${CLAUDE_PLUGIN_ROOT}/hooks/lifecycle-manager.ts\\\"\"\n    }]\n  }],\n  \"SessionEnd\": [{\n    \"hooks\": [{\n      \"type\": \"command\",\n      \"command\": \"bun \\\"${CLAUDE_PLUGIN_ROOT}/hooks/lifecycle-manager.ts\\\"\"\n    }]\n  }]\n}\n```\n\n### hooks/lifecycle-manager.ts\n\n```typescript\nimport { AgentRegistry } from 'claude-agent-lifecycle';\nimport { getHookEvent } from 'claude-hooks-sdk';\n\nconst event = getHookEvent();\nconst registry = new AgentRegistry();\n\nif (event.type === 'Stop') {\n  await registry.disposeByLifespan('turn');\n}\n\nif (event.type === 'SessionEnd') {\n  await registry.disposeByScope(event.session.sessionId);\n}\n```\n\n## Storage Structure\n\n```\n.agent/agents/\n├── session/{session-id}/{agent-name}.json\n├── workflow/{workflow-id}/{agent-name}.json\n└── project/{agent-name}.json\n```\n\n## Debug Mode\n\nEnable for troubleshooting:\n\n```bash\nAGENT_LIFECYCLE_DEBUG=true claude\n```\n\nOutput:\n```\n[agent-lifecycle] Created: shadow-advisor (session)\n[agent-lifecycle] Stop: Disposed 1 turn-scoped agents\n```\n\n## API Summary\n\n| Method | Purpose |\n|--------|---------|\n| `create(config)` | Create or resume agent |\n| `resume(name)` | Resume by name |\n| `dispose(id)` | Dispose specific agent |\n| `startWorkflow(config)` | Start workflow agent |\n| `completeWorkflow(id)` | Complete and dispose workflow |\n\nSee `api-reference.md` for complete API documentation.\n\n## Installation\n\n```bash\n# As plugin (recommended)\n/plugin marketplace add hgeldenhuys/claude-agent-lifecycle\n/plugin install claude-agent-lifecycle\n\n# As package\nbun add claude-agent-lifecycle\n```\n\n## Related Files\n\n- `api-reference.md` - Complete API documentation\n- `patterns.md` - Detailed pattern implementations\n- `examples.md` - Real-world usage examples"
              }
            ]
          },
          {
            "name": "claude-loom",
            "description": "Autonomous SDLC orchestration with workflow-scoped story execution agents",
            "source": {
              "source": "github",
              "repo": "hgeldenhuys/claude-loom"
            },
            "category": null,
            "version": "2.0.0",
            "author": null,
            "install_commands": [
              "/plugin marketplace add hgeldenhuys/claude-agent-lifecycle",
              "/plugin install claude-loom@claude-skills-marketplace"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2025-12-06T19:43:12Z",
              "created_at": "2025-11-28T01:45:59Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "managing-agent-lifecycles",
                "description": "Implements persistent agent lifecycle management with 6 lifespans (ephemeral, turn, context, session, workflow, project). Use when creating agents that survive across turns, managing workflow-scoped execution, or needing automatic cleanup at lifecycle boundaries.",
                "path": ".claude/skills/managing-agent-lifecycles/SKILL.md",
                "frontmatter": {
                  "name": "managing-agent-lifecycles",
                  "description": "Implements persistent agent lifecycle management with 6 lifespans (ephemeral, turn, context, session, workflow, project). Use when creating agents that survive across turns, managing workflow-scoped execution, or needing automatic cleanup at lifecycle boundaries."
                },
                "content": "# Managing Agent Lifecycles\n\nPersistent agent lifecycle management for Claude Code projects. Creates agents with defined lifespans and automatic disposal.\n\n## When to Use\n\n- Creating agents that persist beyond a single call\n- Managing workflow-scoped agents (story execution, feature development)\n- Automatic agent cleanup at lifecycle boundaries (Stop, SessionEnd)\n- Building systems with multiple cooperating agents\n\n## Quick Start\n\n```typescript\nimport { AgentRegistry } from 'claude-agent-lifecycle';\n\nconst registry = new AgentRegistry();\n\n// Create session-scoped agent (survives until session ends)\nconst { agent, isNew } = await registry.create({\n  lifespan: 'session',\n  name: 'my-advisor',\n  model: 'haiku',\n});\n\n// Resume later in same session\nconst advisor = await registry.resume('my-advisor');\n```\n\n## The 6 Lifespans\n\n| Lifespan | Auto-Disposal | Use Case |\n|----------|---------------|----------|\n| `ephemeral` | Immediately | Fire-and-forget tasks |\n| `turn` | Stop event | Per-response helpers |\n| `context` | Context reset | Multi-turn conversations |\n| `session` | SessionEnd | Knowledge advisors |\n| `workflow` | Manual/complete | Story/feature execution |\n| `project` | Manual only | Singleton services |\n\n### Choosing a Lifespan\n\n```\nHow long should the agent live?\n├── Just this one call? → ephemeral\n├── Until response completes? → turn\n├── Until context resets? → context\n├── Until session ends? → session\n├── Until work unit completes? → workflow\n└── Forever (manual disposal)? → project\n```\n\n## Implementation Checklist\n\nWhen implementing agent lifecycle management:\n\n- [ ] Install package: `bun add claude-agent-lifecycle`\n- [ ] Choose appropriate lifespan for each agent type\n- [ ] Configure hooks for automatic disposal (Stop, SessionEnd)\n- [ ] Use descriptive agent names (e.g., `backend-dev` not `agent1`)\n- [ ] Store role and capabilities in metadata\n- [ ] Test with debug mode enabled\n\n## Common Patterns\n\n### Pattern 1: Session-Scoped Advisor\n\nFor agents persisting throughout a Claude Code session:\n\n```typescript\nconst { agent, isNew } = await registry.create({\n  lifespan: 'session',\n  name: 'shadow-advisor',\n  model: 'haiku',\n  metadata: { role: 'knowledge-retrieval' },\n});\n```\n\n### Pattern 2: Workflow-Scoped Execution\n\nFor agents tied to a unit of work:\n\n```typescript\n// Start executor for story\nawait registry.startWorkflow({\n  lifespan: 'workflow',\n  workflowId: 'FEAT-001',\n  name: 'executor',\n});\n\n// Add specialists\nawait registry.startWorkflow({\n  lifespan: 'workflow',\n  workflowId: 'FEAT-001',\n  name: 'backend-dev',\n});\n\n// Complete when done (disposes all workflow agents)\nawait registry.completeWorkflow('FEAT-001');\n```\n\n### Pattern 3: Turn-Scoped Helper\n\nFor short-lived per-response agents:\n\n```typescript\nconst { agent } = await registry.create({\n  lifespan: 'turn',\n  name: 'code-analyzer',\n});\n// Automatically disposed when Stop hook fires\n```\n\nSee `patterns.md` for detailed implementations.\n\n## Hook Integration\n\nHooks automatically dispose agents at lifecycle boundaries.\n\n### hooks/hooks.json\n\n```json\n{\n  \"Stop\": [{\n    \"hooks\": [{\n      \"type\": \"command\",\n      \"command\": \"bun \\\"${CLAUDE_PLUGIN_ROOT}/hooks/lifecycle-manager.ts\\\"\"\n    }]\n  }],\n  \"SessionEnd\": [{\n    \"hooks\": [{\n      \"type\": \"command\",\n      \"command\": \"bun \\\"${CLAUDE_PLUGIN_ROOT}/hooks/lifecycle-manager.ts\\\"\"\n    }]\n  }]\n}\n```\n\n### hooks/lifecycle-manager.ts\n\n```typescript\nimport { AgentRegistry } from 'claude-agent-lifecycle';\nimport { getHookEvent } from 'claude-hooks-sdk';\n\nconst event = getHookEvent();\nconst registry = new AgentRegistry();\n\nif (event.type === 'Stop') {\n  await registry.disposeByLifespan('turn');\n}\n\nif (event.type === 'SessionEnd') {\n  await registry.disposeByScope(event.session.sessionId);\n}\n```\n\n## Storage Structure\n\n```\n.agent/agents/\n├── session/{session-id}/{agent-name}.json\n├── workflow/{workflow-id}/{agent-name}.json\n└── project/{agent-name}.json\n```\n\n## Debug Mode\n\nEnable for troubleshooting:\n\n```bash\nAGENT_LIFECYCLE_DEBUG=true claude\n```\n\nOutput:\n```\n[agent-lifecycle] Created: shadow-advisor (session)\n[agent-lifecycle] Stop: Disposed 1 turn-scoped agents\n```\n\n## API Summary\n\n| Method | Purpose |\n|--------|---------|\n| `create(config)` | Create or resume agent |\n| `resume(name)` | Resume by name |\n| `dispose(id)` | Dispose specific agent |\n| `startWorkflow(config)` | Start workflow agent |\n| `completeWorkflow(id)` | Complete and dispose workflow |\n\nSee `api-reference.md` for complete API documentation.\n\n## Installation\n\n```bash\n# As plugin (recommended)\n/plugin marketplace add hgeldenhuys/claude-agent-lifecycle\n/plugin install claude-agent-lifecycle\n\n# As package\nbun add claude-agent-lifecycle\n```\n\n## Related Files\n\n- `api-reference.md` - Complete API documentation\n- `patterns.md` - Detailed pattern implementations\n- `examples.md` - Real-world usage examples"
              }
            ]
          }
        ]
      }
    }
  ]
}