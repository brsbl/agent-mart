{
  "owner": {
    "id": "TechDufus",
    "display_name": "Matthew DeGarmo",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/46715299?u=33f95febf843994ba914788477d12b3ac7ccaf90&v=4",
    "url": "https://github.com/TechDufus",
    "bio": "Just your friendly neighborhood Dufus™.",
    "stats": {
      "total_repos": 1,
      "total_plugins": 1,
      "total_commands": 1,
      "total_skills": 4,
      "total_stars": 18,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "TechDufus/oh-my-claude",
      "url": "https://github.com/TechDufus/oh-my-claude",
      "description": "Add ultrawork to any prompt for maximum parallel execution",
      "homepage": null,
      "signals": {
        "stars": 18,
        "forks": 0,
        "pushed_at": "2026-01-12T01:57:30Z",
        "created_at": "2026-01-09T17:36:16Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 1045
        },
        {
          "path": ".github",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/workflows",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/workflows/validate-plugin.yml",
          "type": "blob",
          "size": 4477
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 307
        },
        {
          "path": "CLAUDE.md",
          "type": "blob",
          "size": 2202
        },
        {
          "path": "CONTRIBUTING.md",
          "type": "blob",
          "size": 3294
        },
        {
          "path": "LICENSE",
          "type": "blob",
          "size": 1066
        },
        {
          "path": "PLUGIN-STRUCTURE.md",
          "type": "blob",
          "size": 3879
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 8115
        },
        {
          "path": "demo",
          "type": "tree",
          "size": null
        },
        {
          "path": "demo/README.md",
          "type": "blob",
          "size": 581
        },
        {
          "path": "demo/ultrawork-demo.tape",
          "type": "blob",
          "size": 1217
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 515
        },
        {
          "path": "plugins/oh-my-claude/.mcp.json",
          "type": "blob",
          "size": 158
        },
        {
          "path": "plugins/oh-my-claude/CLAUDE.md",
          "type": "blob",
          "size": 6497
        },
        {
          "path": "plugins/oh-my-claude/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude/agents/architect.md",
          "type": "blob",
          "size": 5346
        },
        {
          "path": "plugins/oh-my-claude/agents/librarian.md",
          "type": "blob",
          "size": 4116
        },
        {
          "path": "plugins/oh-my-claude/agents/orchestrator.md",
          "type": "blob",
          "size": 8236
        },
        {
          "path": "plugins/oh-my-claude/agents/scout.md",
          "type": "blob",
          "size": 3014
        },
        {
          "path": "plugins/oh-my-claude/agents/scribe.md",
          "type": "blob",
          "size": 4760
        },
        {
          "path": "plugins/oh-my-claude/agents/validator.md",
          "type": "blob",
          "size": 8338
        },
        {
          "path": "plugins/oh-my-claude/agents/worker.md",
          "type": "blob",
          "size": 3351
        },
        {
          "path": "plugins/oh-my-claude/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude/commands/prime.md",
          "type": "blob",
          "size": 10203
        },
        {
          "path": "plugins/oh-my-claude/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude/hooks/agent_usage_reminder.py",
          "type": "blob",
          "size": 2522
        },
        {
          "path": "plugins/oh-my-claude/hooks/commit_quality_enforcer.py",
          "type": "blob",
          "size": 7483
        },
        {
          "path": "plugins/oh-my-claude/hooks/context_guardian.py",
          "type": "blob",
          "size": 2800
        },
        {
          "path": "plugins/oh-my-claude/hooks/context_monitor.py",
          "type": "blob",
          "size": 3224
        },
        {
          "path": "plugins/oh-my-claude/hooks/context_protector.py",
          "type": "blob",
          "size": 5364
        },
        {
          "path": "plugins/oh-my-claude/hooks/edit_error_recovery.py",
          "type": "blob",
          "size": 2174
        },
        {
          "path": "plugins/oh-my-claude/hooks/hook_utils.py",
          "type": "blob",
          "size": 10363
        },
        {
          "path": "plugins/oh-my-claude/hooks/hooks.json",
          "type": "blob",
          "size": 3180
        },
        {
          "path": "plugins/oh-my-claude/hooks/precompact_context.py",
          "type": "blob",
          "size": 4843
        },
        {
          "path": "plugins/oh-my-claude/hooks/safe_permissions.py",
          "type": "blob",
          "size": 9541
        },
        {
          "path": "plugins/oh-my-claude/hooks/tdd_enforcer.py",
          "type": "blob",
          "size": 7063
        },
        {
          "path": "plugins/oh-my-claude/hooks/todo_enforcer.py",
          "type": "blob",
          "size": 10558
        },
        {
          "path": "plugins/oh-my-claude/hooks/ultrawork_detector.py",
          "type": "blob",
          "size": 16016
        },
        {
          "path": "plugins/oh-my-claude/hooks/verification_reminder.py",
          "type": "blob",
          "size": 1332
        },
        {
          "path": "plugins/oh-my-claude/install.sh",
          "type": "blob",
          "size": 4537
        },
        {
          "path": "plugins/oh-my-claude/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude/skills/git-commit-validator",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude/skills/git-commit-validator/SKILL.md",
          "type": "blob",
          "size": 7942
        },
        {
          "path": "plugins/oh-my-claude/skills/git-commit-validator/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude/skills/git-commit-validator/scripts/git-commit-helper.sh",
          "type": "blob",
          "size": 4111
        },
        {
          "path": "plugins/oh-my-claude/skills/plan",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude/skills/plan/SKILL.md",
          "type": "blob",
          "size": 21625
        },
        {
          "path": "plugins/oh-my-claude/skills/pr-creation",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude/skills/pr-creation/SKILL.md",
          "type": "blob",
          "size": 7153
        },
        {
          "path": "plugins/oh-my-claude/skills/worktree",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/oh-my-claude/skills/worktree/SKILL.md",
          "type": "blob",
          "size": 13974
        },
        {
          "path": "tests",
          "type": "tree",
          "size": null
        },
        {
          "path": "tests/oh-my-claude",
          "type": "tree",
          "size": null
        },
        {
          "path": "tests/oh-my-claude/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "tests/oh-my-claude/hooks/__init__.py",
          "type": "blob",
          "size": 42
        },
        {
          "path": "tests/oh-my-claude/hooks/conftest.py",
          "type": "blob",
          "size": 2334
        },
        {
          "path": "tests/oh-my-claude/hooks/pyproject.toml",
          "type": "blob",
          "size": 606
        },
        {
          "path": "tests/oh-my-claude/hooks/test_agent_usage_reminder.py",
          "type": "blob",
          "size": 8914
        },
        {
          "path": "tests/oh-my-claude/hooks/test_commit_quality_enforcer.py",
          "type": "blob",
          "size": 9573
        },
        {
          "path": "tests/oh-my-claude/hooks/test_context_guardian.py",
          "type": "blob",
          "size": 5145
        },
        {
          "path": "tests/oh-my-claude/hooks/test_context_monitor.py",
          "type": "blob",
          "size": 12394
        },
        {
          "path": "tests/oh-my-claude/hooks/test_context_protector.py",
          "type": "blob",
          "size": 7871
        },
        {
          "path": "tests/oh-my-claude/hooks/test_edit_error_recovery.py",
          "type": "blob",
          "size": 12430
        },
        {
          "path": "tests/oh-my-claude/hooks/test_hook_utils.py",
          "type": "blob",
          "size": 10086
        },
        {
          "path": "tests/oh-my-claude/hooks/test_precompact_context.py",
          "type": "blob",
          "size": 7797
        },
        {
          "path": "tests/oh-my-claude/hooks/test_safe_permissions.py",
          "type": "blob",
          "size": 14748
        },
        {
          "path": "tests/oh-my-claude/hooks/test_tdd_enforcer.py",
          "type": "blob",
          "size": 17978
        },
        {
          "path": "tests/oh-my-claude/hooks/test_todo_enforcer.py",
          "type": "blob",
          "size": 12821
        },
        {
          "path": "tests/oh-my-claude/hooks/test_ultrawork_detector.py",
          "type": "blob",
          "size": 9979
        },
        {
          "path": "tests/oh-my-claude/hooks/test_verification_reminder.py",
          "type": "blob",
          "size": 4755
        },
        {
          "path": "tests/oh-my-claude/hooks/uv.lock",
          "type": "blob",
          "size": 45198
        }
      ],
      "marketplace": {
        "name": "oh-my-claude",
        "version": null,
        "description": null,
        "owner_info": {
          "name": "TechDufus"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "oh-my-claude",
            "description": "Add 'ultrawork' to any prompt for maximum parallel execution.",
            "source": "./plugins/oh-my-claude",
            "category": "productivity",
            "version": "0.2.3",
            "author": {
              "name": "TechDufus"
            },
            "install_commands": [
              "/plugin marketplace add TechDufus/oh-my-claude",
              "/plugin install oh-my-claude@oh-my-claude"
            ],
            "signals": {
              "stars": 18,
              "forks": 0,
              "pushed_at": "2026-01-12T01:57:30Z",
              "created_at": "2026-01-09T17:36:16Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/prime",
                "description": "Prime context for fresh session: /prime [task hint] [--quick] [--verbose]",
                "path": "plugins/oh-my-claude/commands/prime.md",
                "frontmatter": {
                  "description": "Prime context for fresh session: /prime [task hint] [--quick] [--verbose]",
                  "argument-hint": "[task hint] [--quick] [--verbose]",
                  "allowed-tools": [
                    "Bash(git:*)",
                    "Bash(gh:*)",
                    "Task",
                    "Read",
                    "Grep",
                    "Glob"
                  ]
                },
                "content": "# /prime - Context Priming for Fresh Sessions\n\nRapidly build complete understanding of current work state after `/clear` or new session start. Uses parallel subagents to maximize context gathering while minimizing main context token usage.\n\n## Usage\n\n```\n/prime                                    # Full context priming (default)\n/prime <task-hint>                        # Prime with upcoming task focus\n/prime --quick                            # Essential git state only (faster)\n/prime --verbose                          # Include full diffs in report\n```\n\n### Examples\n```\n/prime                                    # General orientation\n/prime migrating postgres init scripts    # Focus exploration on postgres/init\n/prime reviewing PR #42                   # Pull PR context to forefront\n```\n\n## Arguments: $ARGUMENTS\n\n---\n\n## Philosophy\n\n**Problem**: Fresh sessions lack context about in-progress work.\n\n**Solution**: Subagents explore repository state in parallel, then synthesize into a concise briefing. Main context receives only the summary, not raw exploration data.\n\n**Task-Focused**: When a task hint is provided, subagents prioritize context relevant to that task (pyramid approach - start with intent).\n\n---\n\n## Phase -1: Parse Arguments\n\nParse `$ARGUMENTS` to extract:\n- **Task hint**: Any non-flag text (e.g., \"migrating postgres init scripts\")\n- **Flags**: `--quick`, `--verbose`\n\n---\n\n## Phase 0: Quick Snapshot (Main Agent)\n\nRun these commands in parallel via Bash tool:\n\n```bash\ngit branch --show-current\ngit rev-parse --abbrev-ref HEAD@{upstream} 2>/dev/null || echo \"no upstream\"\ngit status --short --branch\ngit log --oneline -5\ngit stash list --format=\"%gd: %s\"\n```\n\nDisplay immediately:\n```\n## Quick Snapshot\n- **Branch**: <current-branch> (tracking: <upstream-or-none>)\n- **Status**: <N files changed, M staged, K untracked>\n- **Recent commits**: <last 3-5 one-liners>\n- **Stashes**: <count or \"none\">\n```\n\nIf `--quick` flag provided, STOP HERE.\n\n---\n\n## Subagent Prompt Template\n\nAll subagents receive this wrapper structure. Replace `{AGENT_NAME}`, `{WORD_LIMIT}`, `{COMMANDS}`, `{REQUIREMENTS}`, and `{XML_FIELDS}`:\n\n```\nTask(\n  subagent_type: \"general-purpose\",\n  description: \"{description}\",\n  prompt: \"\"\"\n  <task_context>\n  TASK HINT: {task_hint or \"None provided - do general analysis\"}\n  </task_context>\n\n  {AGENT_SPECIFIC_INSTRUCTIONS}\n\n  Provide a CONCISE summary (under {WORD_LIMIT} words).\n  If task hint provided, prioritize findings relevant to that task.\n\n  <commands>\n  {COMMANDS}\n  </commands>\n\n  <analysis_requirements>\n  {REQUIREMENTS}\n  If task hint provided, add: **Task relevance**: Which findings relate to the hinted task?\n  </analysis_requirements>\n\n  <output_format>\n  Return structured XML:\n  <{agent}_analysis>\n    {XML_FIELDS}\n    <task_relevance>...</task_relevance>  <!-- only if task hint provided -->\n  </{agent}_analysis>\n  </output_format>\n  \"\"\"\n)\n```\n\n---\n\n## Phase 1: Parallel Subagent Exploration\n\nLaunch THREE subagents simultaneously (all in single message):\n\n### Subagent 1: Git Changes Analyst\n\n**Word limit**: 500 | **Description**: \"Analyze git changes\"\n\n**Commands**:\n1. `git log main..HEAD --format='%h %s' 2>/dev/null || git log -10 --format='%h %s'`\n2. `git diff --cached --stat` (staged)\n3. `git diff --stat` (unstaged)\n4. `git diff --cached` (full staged - summarize, don't echo)\n5. `git diff` (full unstaged - summarize, don't echo)\n6. `git stash show -p stash@{0} 2>/dev/null` (if stashes exist)\n7. `git ls-files --others --exclude-standard | head -20` (untracked)\n\n**Requirements**:\n- **Branch commits**: Group by feature/fix/refactor\n- **Staged/Unstaged/Untracked changes**: Categorize by src/test/config/docs\n- **Stash contents**: Any paused work?\n- **Work narrative**: 2-3 sentences on current developer activity\n\n**XML Fields**: `branch_commits`, `staged`, `unstaged`, `untracked`, `stashes`, `narrative`\n\n### Subagent 2: GitHub Context Analyst\n\n**Word limit**: 400 | **Description**: \"Analyze GitHub context\"\n\n**Commands**:\n1. `gh pr list --state open --author @me --json number,title,headRefName,baseRefName,isDraft,updatedAt,reviewDecision --limit 5`\n2. `gh pr view --json number,title,body,state,commits,reviews,statusCheckRollup 2>/dev/null`\n3. `gh issue list --assignee @me --state open --json number,title,labels,updatedAt --limit 10`\n4. `gh run list --limit 3 --json conclusion,name,updatedAt,headBranch`\n\n**Requirements**:\n- If current branch has PR: Draft status? Review feedback? CI status?\n- If branch name contains issue number: Fetch issue, extract requirements\n- If task hint mentions PR/issue: Fetch that directly\n\n**XML Fields**: `current_pr`, `related_issue`, `ci_status`, `other_prs`, `open_issues`\n\nReturn `<github_analysis><none>No GitHub context available</none></github_analysis>` if gh CLI fails.\n\n### Subagent 3: Project Context Analyst\n\n**Word limit**: 300 | **Description**: \"Analyze project context\"\n\n**Standard Checks**:\n1. `CLAUDE.md` - Look for \"## Active Work\" section\n2. `.claude/CLAUDE.md` - Project-specific instructions\n3. `TODO.md` or `TODO` - Tracked tasks\n4. `.claude/notepads/` - learnings.md, decisions.md, context.md\n5. `git diff --name-only HEAD~5..HEAD 2>/dev/null | head -20`\n\n**Task-Focused Exploration** (if hint provided):\n- Glob: Find files matching task keywords\n- Grep: Search for relevant patterns\n- Read: Top 3-5 matching files, summarize structure\n- Note file locations for main agent reference\n\n**Requirements**:\n- Active work description and phase from CLAUDE.md\n- Key learnings, decisions, context from notepads\n- Primary directories and patterns from recent changes\n- Relevant files and conventions (if task hint provided)\n\n**XML Fields**: `active_work`, `notepad_context` (with learnings/decisions/context), `focus_areas`, `project_type`, `available_commands`, `task_exploration` (with relevant_files/implementation_summary/conventions)\n\n---\n\n## Phase 2: Synthesis\n\nAfter all subagents return, synthesize into unified briefing.\n\n**Token Budget**: Keep under 800 tokens. Leave room for actual work.\n\n### With Task Hint Format\n\n```markdown\n# Work State Briefing\n\n## TL;DR\n<One paragraph: Current state + relevance to hinted task>\n\n## Task Context: {task_hint}\n- **Relevant files**: <From Project Context>\n- **Related changes**: <From Git Changes>\n- **Associated PRs/issues**: <From GitHub Context>\n- **Implementation notes**: <Key patterns discovered>\n\n## General State\n### Git\n<Non-task-related branch, commits, changes>\n\n### GitHub\n<Other PRs, issues, CI status>\n\n### Project\n<Active work tracking, focus areas>\n\n## Suggested Next Actions\n<Tailored to the hinted task>\n```\n\n### Without Task Hint Format\n\n```markdown\n# Work State Briefing\n\n## TL;DR\n<One paragraph: Work in progress, state, next steps>\n\n## Git State\n<Branch, commits, changes summary>\n\n## GitHub Context\n<PR status, issue linkage, CI>\n\n## Project Context\n<Active work, focus areas>\n\n## Suggested Next Actions\n<2-3 logical next steps>\n```\n\n---\n\n## Mode Variations\n\n| Mode | Behavior | Token Usage | Best For |\n|------|----------|-------------|----------|\n| `--quick` | Phase 0 only, no subagents | ~100-200 | Quick orientation |\n| `--verbose` | Include actual diff content | Higher | Complex changes |\n| Default | Full Phase 0 + 1 + 2 | ~500-800 | Most situations |\n\n---\n\n## Example: With Task Hint\n\n**Command**: `/prime migrating postgres chart init scripts`\n\n```markdown\n# Work State Briefing\n\n## TL;DR\nBranch main is clean. Found init scripts in `charts/shared-init/` ConfigMap.\nThree postgres charts reference shared init. No active PR for this migration.\n\n## Task Context: migrating postgres chart init scripts\n\n### Relevant Files\n- `charts/shared-init/templates/configmap.yaml` - Current shared init\n- `charts/postgres-*/values.yaml` - Reference shared-init\n- `charts/shared-init/files/*.sql` - 4 SQL init scripts\n\n### Current Implementation\nShared-init creates ConfigMap with SQL scripts mounted to `/docker-entrypoint-initdb.d/`.\nScripts: `01-extensions.sql`, `02-schemas.sql`, `03-users.sql`, `04-grants.sql`.\n\n### Conventions\n- Numeric prefix for ordering\n- Secrets via `envFrom`\n- Pattern: `{{ include \"shared-init.fullname\" . }}-scripts`\n\n## General State\n- **Branch**: main (clean)\n- **CI**: All passing\n\n## Suggested Next Actions\n1. Create branch: `feat/postgres-init-migration`\n2. Copy SQL files to each postgres chart\n3. Update templates for local ConfigMap\n4. Remove shared-init dependency\n```\n\n## Example: Without Task Hint\n\n**Command**: `/prime`\n\n```markdown\n# Work State Briefing\n\n## TL;DR\nWorking on OAuth2 feature (branch: feat/oauth2-login). 3 commits implementing\nprovider abstraction. Focus: Google callback handler. PR #47 draft, CI passing.\n\n## Git State\n- **Branch**: feat/oauth2-login (5 ahead of main)\n- **Unstaged**: `src/auth/google.ts` (callback logic)\n- **Untracked**: `src/auth/github.ts` (next provider)\n\n## GitHub Context\n- **PR #47**: Draft, CI passing, no reviews\n- **Issue #42**: \"Add social login\" - requires Google + GitHub\n\n## Project Context\n- **Active Work**: OAuth2 callback handlers\n- **Focus**: `src/auth/`\n\n## Suggested Next Actions\n1. Complete Google callback handler\n2. Add tests for callback flow\n3. Start GitHub provider\n```\n\n---\n\n## Error Handling\n\n- **Not a git repo**: Report error, suggest running from repo root\n- **No gh CLI**: Skip GitHub context, note in output\n- **No CLAUDE.md**: Skip project context section\n- **Empty branch**: Focus on staged/unstaged only\n- **Network issues**: Timeout GitHub calls after 10s, report partial\n\n---\n\n## When to Use Task Hints\n\n| Scenario | Use Hint? | Example |\n|----------|-----------|---------|\n| General orientation | No | `/prime` |\n| Resuming specific work | Yes | `/prime fixing auth timeout` |\n| Starting new feature | Yes | `/prime implementing rate limiting` |\n| Reviewing PR | Yes | `/prime reviewing PR #42` |\n\n**Tips**: Be specific (\"postgres init scripts\" beats \"database stuff\"). Don't chain with `/compact`. Clear before priming for cleanest context."
              }
            ],
            "skills": [
              {
                "name": "git-commit-validator",
                "description": "MUST be used for ANY git workflow that involves committing code. This includes explicit commit requests AND implicit ones like 'ship it', 'wrap it up', or finishing implementation work. Handles staging, message generation, validation, and commit execution with conventional commit format.",
                "path": "plugins/oh-my-claude/skills/git-commit-validator/SKILL.md",
                "frontmatter": {
                  "name": "git-commit-validator",
                  "description": "MUST be used for ANY git workflow that involves committing code. This includes explicit commit requests AND implicit ones like 'ship it', 'wrap it up', or finishing implementation work. Handles staging, message generation, validation, and commit execution with conventional commit format.",
                  "allowed-tools": [
                    "Bash(git status:*)",
                    "Bash(git diff:*)",
                    "Bash(git add:*)",
                    "Bash(git commit:*)",
                    "Bash(git log:*)",
                    "Bash(${CLAUDE_PLUGIN_ROOT}/skills/git-commit-validator/scripts/:*)",
                    "Read",
                    "Grep"
                  ]
                },
                "content": "# Git Commit Validator\n\nThis skill MUST be invoked whenever you are about to create a git commit. It handles the complete workflow and enforces commit message standards.\n\n## When This Skill Activates\n\n**Auto-invoke this skill when the user implies code should be committed:**\n\n| Category | Trigger Phrases |\n|----------|-----------------|\n| **Explicit commit** | \"commit\", \"make a commit\", \"commit this\" |\n| **Ship intent** | \"ship it\", \"send it\" |\n| **Finalization** | \"wrap it up\", \"finalize this\", \"we're done\", \"that's it\" |\n| **After implementation** | When you complete work and there are uncommitted changes |\n\n**Key insight:** If the user's intent results in `git commit` being run, this skill MUST be used first.\n\n**Do NOT run `git commit` without this skill.**\n\n## Complete Commit Workflow\n\n### Step 1: Gather Context\n\n```bash\ngit status                    # See what's changed\ngit diff HEAD                 # See all changes (staged + unstaged)\ngit log --oneline -5          # Recent commit style reference\n```\n\n### Step 2: Stage Changes\n\n**Default behavior** - stage all changes:\n```bash\ngit add -A\n```\n\n**If user specifies `--staged`** - skip staging, use only what's already staged.\n\n**If user gives instructions** - follow them:\n- \"ignore the docs\" → don't stage doc files\n- \"only the src folder\" → stage selectively\n\n### Step 3: Analyze and Generate Message\n\nBased on the diff, determine:\n1. **Type**: feat, fix, docs, refactor, test, chore, perf, ci, build, style, revert\n2. **Scope** (optional): module or area affected\n3. **Description**: concise, imperative mood, lowercase\n4. **Body**: see decision matrix below\n\n**Message Format:**\n```\n<type>[optional scope]: <description>\n\n[body - required for non-trivial changes]\n\n[optional footer - breaking changes, issue refs]\n```\n\n## Commit Body Decision Matrix\n\n**The body is NOT optional for most real work.** Use this matrix:\n\n| Change Type | Body Required? | Body Content |\n|-------------|---------------|--------------|\n| Typo fix, single-line change | No | Subject is sufficient |\n| Config tweak, version bump | No | Subject is sufficient |\n| Bug fix | **YES** | What caused it, how you fixed it |\n| New feature | **YES** | What it does, why it's needed, key design choices |\n| Refactor | **YES** | What changed structurally, why this approach |\n| Multiple files changed | **YES** | What each area of change accomplishes |\n| Breaking change | **YES** | What breaks, migration path |\n| Performance improvement | **YES** | What was slow, what's faster, by how much |\n\n### Body Quality Standards\n\n**Good body content includes:**\n- **Context**: Why this change is needed (the problem)\n- **Approach**: How you solved it (key decisions)\n- **Impact**: What this enables or fixes\n- **Caveats**: Limitations, follow-up work, edge cases\n\n**Use bullet points** when listing multiple changes:\n```\n- Add validation for email format\n- Refactor user service to async\n- Update tests for new behavior\n```\n\n**Wrap at 72 characters** - hard requirement for git tooling compatibility.\n\n### Sizing Your Commit Message\n\n| Diff Size | Expected Message |\n|-----------|-----------------|\n| 1-10 lines | Subject only (if truly trivial) |\n| 10-50 lines | Subject + 1-2 sentence body |\n| 50-200 lines | Subject + paragraph or bullets |\n| 200+ lines | Subject + detailed body with sections |\n\n**When in doubt, write more.** A detailed commit message is a gift to future developers (including yourself).\n\n### Step 4: Validate Message\n\n**Run the validation script before committing:**\n\n```bash\n${CLAUDE_PLUGIN_ROOT}/skills/git-commit-validator/scripts/git-commit-helper.sh \"your commit message here\"\n```\n\n- If the script returns **non-zero**, the message is invalid\n- Fix the message according to the script output and retry validation\n- Do NOT proceed to commit with an invalid message\n\nThe script validates:\n1. **Subject line <= 50 chars**\n2. **Body lines <= 72 chars** (if body present)\n3. **Format check** - Must match conventional commit format\n4. **No AI attribution** - Rejects \"generated with\", \"co-authored-by.*claude\", \"ai-generated\"\n\n### Step 5: Commit\n\nUse HEREDOC for proper formatting:\n```bash\ngit commit -m \"$(cat <<'EOF'\ntype: description here\nEOF\n)\"\n```\n\n## Validation Rules\n\n### Subject Line (Required)\n- **Max 50 characters**\n- **Format**: `<type>[scope]: <description>`\n- **Type**: lowercase (feat, fix, docs, style, refactor, test, chore, perf, ci, build, revert)\n- **Description**: lowercase start, no period at end, imperative mood\n\n### Body Lines (Required for non-trivial changes)\n- Max 72 characters per line\n- Blank line between subject and body\n- Explain \"why\" not just \"what\"\n- See decision matrix above for when body is required\n\n### Forbidden Content\n- NO AI attribution (\"Generated with Claude\", \"Created by AI\")\n- NO AI co-authors (\"Co-authored-by: Claude\")\n- NO branding phrases\n\n## Type Reference\n\n| Type | Use For |\n|------|---------|\n| `feat` | New feature or capability |\n| `fix` | Bug fix |\n| `docs` | Documentation only |\n| `refactor` | Code restructuring (no behavior change) |\n| `perf` | Performance improvement |\n| `test` | Test additions/fixes |\n| `chore` | Maintenance, deps |\n| `ci` | CI/CD changes |\n| `build` | Build system changes |\n| `style` | Formatting (no logic change) |\n| `revert` | Reverting previous commit |\n\n## Examples\n\n### Minimal (only for truly trivial changes)\n\n```\ndocs: fix typo in readme\n```\n\n```\nchore: bump lodash to 4.17.21\n```\n\n### Standard (most commits should look like this)\n\n```\nfix(api): resolve timeout on large file uploads\n\nRequests over 10MB were hitting the default 30s timeout.\nIncreased timeout to 5 minutes for upload endpoints and added\nprogress tracking to prevent connection drops.\n```\n\n```\nfeat(auth): add password reset via email\n\nUsers can now request a password reset link sent to their\nregistered email. Link expires after 1 hour.\n\n- Add /auth/forgot-password endpoint\n- Add /auth/reset-password endpoint with token validation\n- Integrate SendGrid for transactional emails\n- Add rate limiting (3 requests per hour per email)\n```\n\n### Detailed (for large or complex changes)\n\n```\nrefactor(database): migrate from callbacks to async/await\n\nThe callback-based database layer was causing pyramid-of-doom\nissues and making error handling inconsistent across services.\n\nChanges:\n- Convert all db methods to return Promises\n- Update 47 call sites across 12 service files\n- Add connection pool management with proper cleanup\n- Standardize error types (DbConnectionError, DbQueryError)\n\nThis unblocks the upcoming transaction support work.\n```\n\n```\nfeat(hooks): add pre-delegation context injection\n\nProblem: Agents were receiving prompts without project context,\nleading to inconsistent code style and missed conventions.\n\nSolution: SessionStart hook now injects a delegation template\ninto Claude's context that gets included with every Task() call.\n\nTemplate includes:\n- 7 sections covering task, context, expected output\n- MUST DO / MUST NOT constraints\n- Verification checklist\n\nThis standardizes agent output quality across all delegations.\n```\n\n## Why No AI Attribution?\n\nCommit messages reflect intent and ownership of the change. AI attribution:\n- Clutters git history\n- Dilutes accountability\n- Adds no useful information\n\nThe human owns the commit. The tool is irrelevant.\n\n---\n\n**Note:** This skill handles COMMIT only. Push must be requested separately."
              },
              {
                "name": "plan",
                "description": "Structured planning with draft management. Use this skill when the user wants to plan a feature, task, or project before implementation. Triggers on: '/plan <topic>', 'let's plan', 'plan for', 'help me plan'. Creates draft at .claude/plans/drafts/, conducts interview, generates final plan on confirmation.",
                "path": "plugins/oh-my-claude/skills/plan/SKILL.md",
                "frontmatter": {
                  "name": "plan",
                  "description": "Structured planning with draft management. Use this skill when the user wants to plan a feature, task, or project before implementation. Triggers on: '/plan <topic>', 'let's plan', 'plan for', 'help me plan'. Creates draft at .claude/plans/drafts/, conducts interview, generates final plan on confirmation.",
                  "allowed-tools": [
                    "Read",
                    "Write",
                    "Edit",
                    "Glob",
                    "Grep",
                    "Task",
                    "AskUserQuestion"
                  ]
                },
                "content": "# Plan Skill\n\nStructured planning through interview and draft management.\n\n## When This Skill Activates\n\n| Category | Trigger Phrases |\n|----------|-----------------|\n| **Start planning** | `/plan <topic>`, `let's plan`, `plan for`, `help me plan` |\n| **Continue draft** | `continue planning`, `back to plan`, `resume plan` |\n| **Finalize** | `make it a plan`, `finalize plan`, `generate plan`, `create the plan` |\n| **Abandon** | `cancel plan`, `abandon planning`, `forget the plan` |\n\n## Planning Workflow\n\n### Phase 1: Initiation\n\nWhen triggered with a topic:\n\n1. Create draft file at `.claude/plans/drafts/{topic-slug}.md`\n2. Initialize with template structure\n3. Begin interview\n\n**Draft location:** `.claude/plans/drafts/{topic-slug}.md`\n**Final plan location:** `.claude/plans/{topic-slug}.md`\n\n### Phase 2: Interview\n\nAsk focused questions to gather requirements. Keep it to 3-5 core questions:\n\n**Core Questions:**\n1. \"What problem does this solve?\" (understand context)\n2. \"What's the scope - minimal viable vs complete?\" (set boundaries)\n3. \"Any constraints, non-goals, or things to avoid?\" (define exclusions)\n\n**Follow-up Questions (as needed):**\n- Technical approach preferences\n- Dependencies on other work\n- Priority/timeline considerations\n\nAfter each answer, update the draft file with new information.\n\nUse `AskUserQuestion` tool for structured multi-choice questions when options are clear.\n\n### Phase 3: Research\n\nBefore finalizing, research the codebase:\n\n```\nAgent: oh-my-claude:scout\nTask: Find relevant files for {topic}\nWhy: Need to understand existing code before planning changes\nExpected: List of files that will be affected\n```\n\n```\nAgent: oh-my-claude:librarian\nTask: Read and summarize key files\nWhy: Need context for implementation planning\nExpected: Summary of current implementation patterns\n```\n\nAdd findings to draft under \"## Research Findings\".\n\n### Phase 4: Confirmation\n\nWhen user says \"make it a plan\" or similar:\n1. Review draft completeness\n2. Transform draft into final plan\n3. Write to `.claude/plans/{topic-slug}.md`\n4. Delete draft file (optional - can keep for reference)\n\n## Draft Structure\n\n```markdown\n# Planning Draft: {topic}\n\n## Status\nPhase: Interview | Research | Ready for Plan\nStarted: {timestamp}\n\n## Requirements\n- [captured from interview]\n\n## Decisions\n- [choices made during interview]\n\n## Research Findings\n- [results from scout/librarian]\n\n## Open Questions\n- [unanswered items]\n```\n\n## Final Plan Structure\n\n```markdown\n# Plan: {topic}\n\n## Context\n[Why this plan exists, what problem it solves]\n\n## Objectives\n\n### Must Have\n- [required outcomes]\n\n### Must NOT Have\n- [explicit exclusions]\n\n## Implementation Steps\n1. [Step with file references and details]\n2. [Step with file references and details]\n\n## Files to Modify\n| File | Changes |\n|------|---------|\n| `path/to/file.ts` | [what changes] |\n\n## Acceptance Criteria\n- [ ] [Testable criterion]\n- [ ] [Testable criterion]\n```\n\n## Decision Matrices\n\n### Interview Depth by Complexity\n\n| Complexity | Question Count | Interview Duration | Indicators |\n|------------|----------------|-------------------|------------|\n| **Simple** | 2-3 questions | 1-2 exchanges | Single file, typo fix, config change, obvious scope |\n| **Standard** | 4-5 questions | 3-4 exchanges | Multi-file feature, clear requirements, bounded scope |\n| **Complex** | 6-8+ questions | 5+ exchanges | Architecture change, new system, cross-cutting concerns |\n\n**Complexity Detection Heuristics:**\n\n| Signal | Points to... |\n|--------|--------------|\n| User says \"just\" or \"simple\" or \"quick\" | Simple |\n| Mentions specific file or function | Simple to Standard |\n| Says \"redesign\" or \"rethink\" or \"overhaul\" | Complex |\n| Involves multiple systems or services | Complex |\n| Unclear success criteria | Complex (need more questions) |\n| User provides detailed spec upfront | May skip some questions |\n\n### When to Skip Research\n\n| Scenario | Skip Research? | Reason |\n|----------|---------------|--------|\n| User provides full context and file paths | Yes | Already have needed info |\n| Typo fix, docs update, config tweak | Yes | Scope is obvious |\n| User explicitly says \"I know where changes go\" | Yes | Trust user knowledge |\n| New feature in unfamiliar codebase area | **No** | Must understand current state |\n| Refactoring existing code | **No** | Need to know what exists |\n| \"I'm not sure where this should go\" | **No** | Research required |\n| User skips interview answers with \"you decide\" | **No** | Research compensates for missing context |\n\n### When to Delegate to Architect\n\n| Scenario | Delegate? | Rationale |\n|----------|-----------|-----------|\n| Single feature, clear scope | No | Plan skill handles this |\n| Multi-phase project with dependencies | **Yes** | Architect decomposes into phases |\n| User asks for \"roadmap\" or \"strategy\" | **Yes** | Beyond single plan scope |\n| Involves trade-off analysis | **Yes** | Architect evaluates approaches |\n| Plan would exceed 20 implementation steps | **Yes** | Too complex for single plan |\n\n## Pre-Finalization Validation Checklist\n\nBefore writing the final plan, verify:\n\n```\n[ ] Context section explains WHY (not just what)\n[ ] At least one \"Must NOT Have\" item defined\n[ ] Implementation steps reference specific files\n[ ] Each step is actionable (not vague)\n[ ] Acceptance criteria are testable\n[ ] No open questions remain unanswered\n[ ] File paths verified via research (if research was done)\n[ ] Scope matches user's stated complexity preference\n```\n\n**If any item fails:** Return to interview or research phase to fill gaps.\n\n## Example Planning Sessions\n\n### Example 1: Simple (Single File Change)\n\n**Trigger:** `/plan add rate limit to login endpoint`\n\n**Interview (2 questions):**\n\n> **Claude:** What's the rate limit you want - requests per minute and per what (IP, user, both)?\n>\n> **User:** 5 per minute per IP\n>\n> **Claude:** Any bypass needed for testing or admin users?\n>\n> **User:** No, keep it simple\n\n**Research:** Skipped - user specified the exact endpoint\n\n**Draft Excerpt:**\n```markdown\n## Requirements\n- 5 requests per minute per IP on /auth/login\n- No bypasses needed\n\n## Decisions\n- Use existing rate limit middleware pattern\n```\n\n**Final Plan Excerpt:**\n```markdown\n# Plan: add rate limit to login endpoint\n\n## Context\nLogin endpoint currently has no rate limiting, making it vulnerable\nto brute force attacks.\n\n## Objectives\n\n### Must Have\n- Rate limit /auth/login to 5 requests/minute/IP\n- Return 429 status with retry-after header when exceeded\n\n### Must NOT Have\n- Admin bypass\n- Per-user tracking (IP only)\n\n## Implementation Steps\n1. Add rate limit middleware to src/api/middleware/rateLimit.ts\n   - Configure: window=60s, max=5, keyGenerator=req.ip\n2. Apply middleware to login route in src/routes/auth.ts\n\n## Files to Modify\n| File | Changes |\n|------|---------|\n| `src/routes/auth.ts` | Add rateLimit middleware to POST /login |\n\n## Acceptance Criteria\n- [ ] 6th request within 60s returns 429\n- [ ] Response includes Retry-After header\n```\n\n---\n\n### Example 2: Standard (New Feature)\n\n**Trigger:** `let's plan adding webhook support`\n\n**Interview (5 questions):**\n\n> **Claude:** What problem does webhook support solve for your users?\n>\n> **User:** They need real-time notifications when orders change status\n>\n> **Claude:** What's the scope - minimal viable or complete webhook system?\n>\n> **User:** Start minimal - just order status changes, single URL per user\n>\n> **Claude:** Any constraints or things to avoid?\n>\n> **User:** No external queue systems, keep it in-process for now\n>\n> **Claude:** Retry behavior when webhook delivery fails?\n>\n> **User:** 3 retries with exponential backoff, then give up\n>\n> **Claude:** Any security requirements - signatures, auth headers?\n>\n> **User:** HMAC signature so receivers can verify authenticity\n\n**Research:**\n```\nAgent: scout\nTask: Find order-related event code and existing notification patterns\nResult: src/services/orderService.ts emits events, src/events/ has EventEmitter setup\n```\n\n```\nAgent: librarian\nTask: Summarize order event structure and existing patterns\nResult: Orders emit 'order:created', 'order:updated' with full order payload\n```\n\n**Draft Excerpt:**\n```markdown\n## Requirements\n- Webhook registration (one URL per user)\n- Trigger on order status changes\n- HMAC-SHA256 signature for verification\n- 3 retries with exponential backoff\n\n## Decisions\n- Hook into existing order:updated event\n- Store webhook URLs in user record (no separate table)\n- In-process delivery, no external queue\n\n## Research Findings\n- Order events already exist in src/services/orderService.ts\n- EventEmitter pattern in src/events/\n- User model in src/models/user.ts\n```\n\n**Final Plan Excerpt:**\n```markdown\n# Plan: webhook support for order status\n\n## Context\nUsers need real-time notifications when their orders change status.\nCurrently they must poll the API to detect changes.\n\n## Objectives\n\n### Must Have\n- Register webhook URL (one per user)\n- Fire webhook on order status change\n- HMAC-SHA256 signature in X-Signature header\n- 3 retries with exponential backoff (1s, 2s, 4s)\n\n### Must NOT Have\n- Multiple webhooks per user\n- External queue/worker system\n- Webhook for events other than order status\n\n## Implementation Steps\n1. Add webhookUrl field to User model in src/models/user.ts\n2. Create webhook service in src/services/webhookService.ts\n   - deliverWebhook(userId, event, payload)\n   - generateSignature(payload, secret)\n   - retry logic with backoff\n3. Subscribe to order:updated in src/events/handlers/webhookHandler.ts\n4. Add API endpoints in src/routes/webhooks.ts\n   - POST /webhooks/register\n   - DELETE /webhooks\n   - GET /webhooks/test (sends test payload)\n\n## Files to Modify\n| File | Changes |\n|------|---------|\n| `src/models/user.ts` | Add webhookUrl, webhookSecret fields |\n| `src/services/webhookService.ts` | New - delivery, signing, retry |\n| `src/events/handlers/webhookHandler.ts` | New - listen to order events |\n| `src/routes/webhooks.ts` | New - registration endpoints |\n| `src/routes/index.ts` | Mount webhook routes |\n\n## Acceptance Criteria\n- [ ] User can register a webhook URL via API\n- [ ] Order status change triggers HTTP POST to registered URL\n- [ ] Request includes X-Signature header with valid HMAC\n- [ ] Failed delivery retries 3 times with backoff\n- [ ] Test endpoint delivers sample payload\n```\n\n---\n\n### Example 3: Complex (Architecture Change)\n\n**Trigger:** `/plan migrate from REST to GraphQL`\n\n**Interview (8 questions):**\n\n> **Claude:** What's driving this migration - specific pain points with REST?\n>\n> **User:** Mobile app makes too many round trips, need to batch queries\n>\n> **Claude:** Full replacement or hybrid (GraphQL alongside REST)?\n>\n> **User:** Hybrid - new features in GraphQL, REST stays for existing clients\n>\n> **Claude:** What's the scope - start with which domain?\n>\n> **User:** User and order domains first, that's what mobile needs\n>\n> **Claude:** Any GraphQL experience on the team, or greenfield?\n>\n> **User:** Greenfield, first time\n>\n> **Claude:** Schema-first or code-first approach preference?\n>\n> **User:** Code-first, easier for TypeScript devs\n>\n> **Claude:** Authentication approach - reuse existing or GraphQL-native?\n>\n> **User:** Reuse existing JWT middleware\n>\n> **Claude:** Any real-time requirements - subscriptions for live updates?\n>\n> **User:** Not in phase 1, but design for it\n>\n> **Claude:** Performance constraints - query depth limits, complexity?\n>\n> **User:** Yes, prevent deeply nested queries that could DOS us\n\n**Research:**\n```\nAgent: scout\nTask: Map current REST endpoints for user and order domains\nResult: 12 endpoints in src/routes/users.ts, 18 in src/routes/orders.ts\n```\n\n```\nAgent: librarian\nTask: Summarize data models and relationships for User and Order\nResult: User hasMany Orders, Order hasMany LineItems, Order belongsTo User\n```\n\n```\nAgent: architect\nTask: Evaluate GraphQL library options for Node.js with TypeScript\nResult: Recommends @graphql-yoga with pothos for code-first, good TS support\n```\n\n**Draft Excerpt:**\n```markdown\n## Requirements\n- GraphQL endpoint alongside existing REST\n- User and Order types with queries and mutations\n- Reuse existing JWT auth\n- Query depth limiting\n- Code-first schema with TypeScript\n\n## Decisions\n- Library: graphql-yoga + pothos (code-first, TypeScript-native)\n- Mount at /graphql, REST unchanged\n- Resolver pattern: thin resolvers calling existing services\n- Phase 1: queries and mutations only, no subscriptions\n- Depth limit: 5 levels max\n\n## Research Findings\n- 30 REST endpoints to eventually cover\n- User -> Orders -> LineItems relationship\n- JWT middleware in src/middleware/auth.ts is reusable\n- Existing services (userService, orderService) can back resolvers\n\n## Open Questions\n- None remaining\n```\n\n**Final Plan Excerpt:**\n```markdown\n# Plan: GraphQL layer for mobile optimization\n\n## Context\nMobile app makes 4-6 REST calls per screen due to resource-oriented\nendpoints. GraphQL allows batching these into single requests.\nAdding GraphQL alongside REST - no breaking changes to existing clients.\n\n## Objectives\n\n### Must Have\n- /graphql endpoint with graphql-yoga\n- User type: queries (me, user, users), mutations (updateProfile)\n- Order type: queries (order, orders, myOrders), mutations (createOrder, updateStatus)\n- JWT authentication via context\n- Query depth limit of 5 levels\n- Code-first schema using pothos\n\n### Must NOT Have\n- Removal or changes to existing REST endpoints\n- Subscriptions (phase 2)\n- Coverage of domains beyond User/Order\n- Custom scalars beyond DateTime\n\n## Implementation Steps\n\n### Phase 1: Foundation (Week 1)\n1. Install dependencies: graphql-yoga, pothos, graphql-depth-limit\n2. Create GraphQL server setup in src/graphql/server.ts\n3. Configure depth limiting and error formatting\n4. Add /graphql route in src/routes/index.ts\n5. Create auth context builder reusing JWT middleware\n\n### Phase 2: User Domain (Week 1)\n6. Define User type in src/graphql/types/User.ts\n7. Implement user queries in src/graphql/resolvers/userQueries.ts\n8. Implement user mutations in src/graphql/resolvers/userMutations.ts\n9. Add DataLoader for N+1 prevention\n\n### Phase 3: Order Domain (Week 2)\n10. Define Order, LineItem types in src/graphql/types/\n11. Define relationship: User.orders, Order.customer\n12. Implement order queries and mutations\n13. Add DataLoader for order->lineItems\n\n### Phase 4: Polish (Week 2)\n14. Add query complexity analysis\n15. Set up GraphQL Playground for dev\n16. Document schema with descriptions\n17. Add integration tests for key queries\n\n## Files to Modify\n| File | Changes |\n|------|---------|\n| `package.json` | Add graphql-yoga, pothos, graphql-depth-limit |\n| `src/graphql/server.ts` | New - yoga server config |\n| `src/graphql/schema.ts` | New - pothos schema builder |\n| `src/graphql/types/*.ts` | New - User, Order, LineItem types |\n| `src/graphql/resolvers/*.ts` | New - queries and mutations |\n| `src/graphql/context.ts` | New - auth context builder |\n| `src/graphql/loaders/*.ts` | New - DataLoaders |\n| `src/routes/index.ts` | Mount /graphql route |\n\n## Acceptance Criteria\n- [ ] POST /graphql accepts valid GraphQL queries\n- [ ] Query { me { orders { id } } } returns user's orders in one request\n- [ ] Queries deeper than 5 levels are rejected\n- [ ] Invalid JWT returns authentication error\n- [ ] Existing REST endpoints continue to work unchanged\n- [ ] GraphQL Playground accessible in development\n```\n\n## Error Handling\n\n### User Interrupts Mid-Planning\n\n**Scenario:** User says \"actually never mind\" or \"let's do something else\" during interview.\n\n**Recovery:**\n1. Confirm: \"Pause planning for '{topic}'? I'll keep the draft if you want to resume later.\"\n2. If confirmed: Leave draft in place at `.claude/plans/drafts/{topic}.md`\n3. Log interruption point in draft under \"## Status\":\n   ```markdown\n   ## Status\n   Phase: Interview (paused)\n   Last question: [the question that was pending]\n   ```\n4. If user says \"delete it\": confirm and remove draft\n\n---\n\n### Research Phase Fails\n\n**Scenario:** Scout or librarian agent returns errors or finds nothing relevant.\n\n**Recovery Actions:**\n\n| Failure Type | Recovery |\n|--------------|----------|\n| Agent timeout | Retry once; if still fails, proceed without research and note gap |\n| \"No files found\" | Ask user: \"Scout found no relevant files. Can you point me to where this code lives?\" |\n| Agent returns confused output | Re-run with more specific prompt; if still fails, note gap and proceed |\n| Permission error | Skip research, note in draft, proceed with user-provided context |\n\n**Draft notation when research fails:**\n```markdown\n## Research Findings\n- Scout: Unable to complete - no matching files found\n- IMPACT: File paths in plan are estimates; verify before implementing\n```\n\n**Always inform user:** \"Research couldn't find existing patterns. The plan will be based on your input and best practices - you may need to adjust file paths during implementation.\"\n\n---\n\n### Topic Too Vague\n\n**Scenario:** User says `/plan make it better` or `/plan improve performance`\n\n**Recovery:**\n1. Do NOT create a draft yet\n2. Ask a scoping question:\n   - \"Make what better - a specific feature, the codebase structure, or something else?\"\n   - \"Improve performance where - API response times, build speed, database queries?\"\n3. Wait for clarification before creating draft\n4. If user remains vague after 2 attempts: \"I need a more specific topic to create an actionable plan. Can you describe the outcome you want?\"\n\n**Decision rule:** Create draft only when you can write a meaningful one-line summary of what the plan is for.\n\n---\n\n### Conflicting Requirements\n\n**Scenario:** User provides requirements that contradict each other during interview.\n\n**Examples:**\n- \"Keep it simple\" + \"Support all edge cases\"\n- \"No dependencies\" + \"Use Redis for caching\"\n- \"Finish today\" + 20-step feature request\n\n**Recovery:**\n1. Name the conflict explicitly: \"I'm hearing two things that might conflict: [A] and [B].\"\n2. Offer resolution options:\n   - \"Should we prioritize [A] and relax [B]?\"\n   - \"Or prioritize [B] and accept [A] will be limited?\"\n3. Record the decision in draft:\n   ```markdown\n   ## Decisions\n   - Conflict: User wanted X and Y which are mutually exclusive\n   - Resolution: Prioritizing X per user preference; Y deferred to future\n   ```\n\n**Never silently pick one side.** Make the trade-off explicit.\n\n---\n\n### Agent Delegation Fails\n\n**Scenario:** Task() call to scout, librarian, or architect fails or hangs.\n\n**Recovery by Agent:**\n\n| Agent | Failure | Recovery |\n|-------|---------|----------|\n| Scout | No response | Use Glob/Grep directly as fallback |\n| Scout | Error | Ask user for file locations manually |\n| Librarian | No response | Read files directly (if small) or summarize from grep output |\n| Librarian | File too large error | Ask for specific sections to examine |\n| Architect | No response | Proceed with planning yourself; note in draft |\n| Architect | Confused output | Re-prompt with clearer task; if still fails, handle internally |\n\n**Log delegation failures:**\n```markdown\n## Research Findings\n- Scout delegation failed (timeout after 60s)\n- Fallback: Used Glob to find *.ts files in src/\n- Found: src/services/orderService.ts, src/routes/orders.ts\n```\n\n**Key principle:** Delegation is an optimization. Failures should not block planning - fall back to direct tool use.\n\n---\n\n### User Wants to Finalize Too Early\n\n**Scenario:** User says \"create the plan\" but interview is incomplete or research hasn't run.\n\n**Recovery:**\n1. Check draft status - is there enough to create an actionable plan?\n2. If critical gaps exist, say:\n   - \"I can create a plan now, but I'm missing [X]. The plan will be less actionable without it.\"\n   - \"Want me to proceed anyway, or should we [answer one more question / run quick research]?\"\n3. If user insists: create plan with explicit gaps noted:\n   ```markdown\n   ## Implementation Steps\n   1. [Step based on assumptions - verify file path]\n\n   ## Known Gaps\n   - File locations unverified (research skipped)\n   - Retry behavior undefined (question skipped)\n   ```\n\n## Behavior Rules\n\n### MUST DO\n- Create draft file before starting interview\n- Update draft after each user response\n- Research codebase before finalizing plan\n- Include file references in final plan\n- Keep interview focused (3-5 questions max)\n\n### MUST NOT\n- Auto-generate plan without user confirmation\n- Delete draft without user confirmation\n- Skip the interview phase\n- Generate vague plans without concrete steps\n\n## Handling Existing Drafts\n\nIf `/plan <topic>` is called and a draft already exists:\n\n1. Ask user: \"Found existing draft for '{topic}'. Resume or start fresh?\"\n2. If resume: continue from current phase\n3. If start fresh: backup old draft as `{topic}-{timestamp}.md.bak`, create new\n\n## Abandoning Plans\n\nWhen user says \"cancel plan\" or \"abandon planning\":\n1. Confirm: \"Abandon planning for '{topic}'? Draft will be deleted.\"\n2. If confirmed: delete draft file\n3. If declined: continue planning\n\n---\n\n**Note:** This skill handles PLANNING only. Implementation is separate - use ultrawork or direct work after plan is approved."
              },
              {
                "name": "pr-creation",
                "description": "MUST be used when creating pull requests. Handles context gathering, title generation (conventional commit format), body formatting, and PR creation via GitHub CLI. Creates PRs as drafts by default. Triggers on: 'create PR', 'open PR', 'ready for review', 'push for PR', 'send for review'.",
                "path": "plugins/oh-my-claude/skills/pr-creation/SKILL.md",
                "frontmatter": {
                  "name": "pr-creation",
                  "description": "MUST be used when creating pull requests. Handles context gathering, title generation (conventional commit format), body formatting, and PR creation via GitHub CLI. Creates PRs as drafts by default. Triggers on: 'create PR', 'open PR', 'ready for review', 'push for PR', 'send for review'.",
                  "allowed-tools": [
                    "Bash(git:*)",
                    "Bash(gh:*)",
                    "Read",
                    "Grep"
                  ]
                },
                "content": "# PR Creation\n\nThis skill MUST be invoked whenever you are creating a pull request. It handles the complete workflow from context gathering to PR submission with consistent formatting.\n\n## When This Skill Activates\n\n**Auto-invoke this skill when the user implies a PR should be created:**\n\n| Category | Trigger Phrases |\n|----------|-----------------|\n| **Explicit PR** | \"create PR\", \"open PR\", \"make PR\", \"create a pull request\" |\n| **Review intent** | \"ready for review\", \"review ready\", \"send for review\" |\n| **Push for PR** | \"push for PR\", \"push and PR\", \"push and create PR\" |\n| **Submission** | \"submit for review\", \"open pull request\", \"make a pull request\" |\n\n**Key insight:** If the user's intent results in `gh pr create` being run, this skill MUST be used first.\n\n**Do NOT run `gh pr create` without this skill.**\n\n## Complete PR Creation Workflow\n\n### Step 1: Gather Context\n\n```bash\ngit status                              # Check working tree state\ngit diff HEAD                           # See uncommitted changes (if any)\ngit log main..HEAD --oneline            # Commits to be included in PR\ngit diff main...HEAD                    # Full diff against base branch\ngit branch --show-current               # Current branch name\n```\n\n**Important:** Ensure all changes are committed before creating PR. If uncommitted changes exist, use the git-commit-validator skill first.\n\n### Step 2: Determine Base Branch\n\nCheck for common base branch names:\n```bash\ngit rev-parse --verify main 2>/dev/null && echo \"main\" || git rev-parse --verify master 2>/dev/null && echo \"master\"\n```\n\nOr check remote default:\n```bash\ngh repo view --json defaultBranchRef --jq '.defaultBranchRef.name'\n```\n\n### Step 3: Generate PR Title\n\n**Format:** `type(scope): description` (conventional commits)\n\n**Rules:**\n- Max 50 characters\n- Lowercase type from: feat, fix, docs, refactor, test, chore, perf, ci, build, style, revert\n- Optional scope in parentheses\n- Imperative mood (\"add\" not \"added\")\n- No period at end\n\n**Title should summarize the entire PR, not just the last commit.**\n\nAnalyze all commits in the PR:\n```bash\ngit log main..HEAD --oneline\n```\n\nSynthesize into a single title that captures the overall change.\n\n### Step 4: Generate PR Body\n\n**Use this exact format:**\n\n```markdown\n## Summary\n[1-3 sentences explaining what this PR does and why]\n\n## Changes\n- [Bullet list of key changes]\n- [Focus on what matters, not every file touched]\n\n## Test Plan\n[How changes were validated - tests run, manual verification, etc.]\n\nCloses #123\n```\n\n**Body Guidelines:**\n- Summary: Brief context for reviewers, focus on WHY\n- Changes: Key modifications, not exhaustive file list\n- Test Plan: How you verified the changes work\n- Issue reference: Include if applicable (Closes, Fixes, Resolves)\n\n### Step 5: Create PR\n\n**Default: Create as draft** (per project standards)\n\nUse HEREDOC for proper body formatting:\n```bash\ngh pr create --draft --title \"type(scope): description\" --body \"$(cat <<'EOF'\n## Summary\nBrief explanation of what and why.\n\n## Changes\n- Key change 1\n- Key change 2\n\n## Test Plan\nHow this was tested.\n\nCloses #123\nEOF\n)\"\n```\n\n**For ready-for-review PRs** (when user explicitly requests):\n```bash\ngh pr create --title \"...\" --body \"...\"\n```\n\n## Validation Rules\n\n### Title Validation\n\n1. **Max 50 characters** - Truncate or rephrase if over\n2. **Format check** - Must match: `^[a-z]+(\\([a-z0-9\\-]+\\))?!?: .+$`\n3. **Valid type** - One of: feat, fix, docs, refactor, test, chore, perf, ci, build, style, revert\n4. **Imperative mood** - \"add feature\" not \"added feature\"\n5. **No period at end**\n\n### Body Validation\n\n1. **Has Summary section** - Required\n2. **Has Changes section** - Required (at least one bullet)\n3. **Has Test Plan section** - Required\n4. **Concise** - 2-3 paragraphs max in summary\n5. **No AI attribution** - No \"Generated by\", \"Created with AI\", etc.\n\n### Pre-flight Checks\n\nBefore creating PR:\n1. Branch has commits ahead of base\n2. No uncommitted changes (or commit them first)\n3. Branch is pushed to remote\n4. No existing PR for this branch (unless intentional)\n\n```bash\n# Check if PR already exists\ngh pr list --head \"$(git branch --show-current)\" --state open\n```\n\n## Type Reference\n\n| Type | Use For |\n|------|---------|\n| `feat` | New feature or capability |\n| `fix` | Bug fix |\n| `docs` | Documentation only |\n| `refactor` | Code restructuring (no behavior change) |\n| `perf` | Performance improvement |\n| `test` | Test additions/fixes |\n| `chore` | Maintenance, deps, config |\n| `ci` | CI/CD changes |\n| `build` | Build system changes |\n| `style` | Formatting (no logic change) |\n| `revert` | Reverting previous changes |\n\n## Examples\n\n### Simple Feature PR\n\n**Title:**\n```\nfeat(auth): add OAuth2 login support\n```\n\n**Body:**\n```markdown\n## Summary\nAdds Google OAuth2 as an authentication option alongside existing email/password login.\n\n## Changes\n- Add OAuth2 provider configuration\n- Create OAuth callback handler\n- Add \"Login with Google\" button to login page\n\n## Test Plan\n- Tested OAuth flow locally with test credentials\n- Verified token refresh works correctly\n- Existing email login still works\n\nCloses #45\n```\n\n### Bug Fix PR\n\n**Title:**\n```\nfix(api): resolve timeout on large file uploads\n```\n\n**Body:**\n```markdown\n## Summary\nLarge file uploads were timing out due to default 30s limit. Increased timeout and added progress tracking.\n\n## Changes\n- Increase upload timeout to 5 minutes\n- Add upload progress callback\n- Better error messages for timeout scenarios\n\n## Test Plan\n- Uploaded 500MB file successfully\n- Verified timeout error message when server unreachable\n\nFixes #128\n```\n\n### Refactoring PR\n\n**Title:**\n```\nrefactor: consolidate auth middleware\n```\n\n**Body:**\n```markdown\n## Summary\nAuth checks were scattered across three middleware files. Consolidated into single auth module for consistency.\n\n## Changes\n- Merge auth middleware into single module\n- Update route imports\n- Remove deprecated auth helpers\n\n## Test Plan\n- All existing auth tests pass\n- Manual verification of protected routes\n```\n\n## Why Draft by Default?\n\nDraft PRs signal the work is ready for early feedback but may not be complete. Benefits:\n- Allows CI to run before requesting reviews\n- Enables async collaboration on in-progress work\n- Prevents accidental merges of incomplete work\n- Clear signal when ready: mark ready for review\n\nTo create a non-draft PR, user must explicitly request it.\n\n## Error Handling\n\n| Error | Resolution |\n|-------|------------|\n| No commits ahead of base | Ensure work is committed |\n| Branch not pushed | Push with `git push -u origin HEAD` |\n| PR already exists | Show existing PR URL, ask if update intended |\n| Auth failure | Run `gh auth login` |\n| Title too long | Shorten or rephrase |"
              },
              {
                "name": "worktree",
                "description": "Git worktree automation for isolated feature development. Triggers on: '/worktree create', '/worktree list', '/worktree remove'. Creates isolated working directories with automatic setup.",
                "path": "plugins/oh-my-claude/skills/worktree/SKILL.md",
                "frontmatter": {
                  "name": "worktree",
                  "description": "Git worktree automation for isolated feature development. Triggers on: '/worktree create', '/worktree list', '/worktree remove'. Creates isolated working directories with automatic setup.",
                  "allowed-tools": [
                    "Bash(git worktree:*)",
                    "Bash(git branch:*)",
                    "Bash(git checkout:*)",
                    "Bash(mkdir:*)",
                    "Bash(cp:*)",
                    "Bash(rm:*)",
                    "Bash(ls:*)",
                    "Bash(npm:*)",
                    "Bash(yarn:*)",
                    "Bash(pnpm:*)",
                    "Read",
                    "Write",
                    "Glob"
                  ]
                },
                "content": "# Worktree Skill\n\nGit worktree automation for isolated feature development.\n\n## When This Skill Activates\n\n| Category | Trigger Phrases |\n|----------|-----------------|\n| **Create worktree** | `/worktree create <name>`, `/worktree new <name>` |\n| **List worktrees** | `/worktree list`, `/worktree ls` |\n| **Remove worktree** | `/worktree remove <name>`, `/worktree rm <name>` |\n| **Status** | `/worktree status` |\n\n## Commands\n\n### Create Worktree\n\n```\n/worktree create <feature-name>\n```\n\nCreates an isolated worktree for feature development.\n\n**Workflow:**\n1. Generate branch name: `feat/<feature-name>`\n2. Create worktree: `git worktree add .worktrees/<feature-name> -b feat/<feature-name>`\n3. Copy environment files (if they exist):\n   - `.env`, `.env.local`, `.env.development`\n   - `.nvmrc`, `.node-version`\n   - `.npmrc`\n4. Detect and run package manager install:\n   - If `package-lock.json` → `npm install`\n   - If `yarn.lock` → `yarn install`\n   - If `pnpm-lock.yaml` → `pnpm install`\n   - If `bun.lockb` → `bun install`\n5. Add `.worktrees/` to `.gitignore` if not present\n6. **Verify worktree creation:**\n   - Run `git -C .worktrees/<name> status` to confirm clean state\n   - Run `git worktree list` to confirm worktree is registered\n   - If verification fails, run cleanup and report error\n7. Report path and instructions\n\n**Example:**\n```bash\ngit worktree add .worktrees/auth-feature -b feat/auth-feature\ncp .env .worktrees/auth-feature/ 2>/dev/null || true\ncp .nvmrc .worktrees/auth-feature/ 2>/dev/null || true\ncd .worktrees/auth-feature && npm install\n```\n\n### List Worktrees\n\n```\n/worktree list\n```\n\nShows all active worktrees:\n```bash\ngit worktree list\n```\n\n### Remove Worktree\n\n```\n/worktree remove <name>\n```\n\nRemoves a worktree and optionally its branch:\n\n**Workflow:**\n1. Confirm removal with user\n2. Remove worktree: `git worktree remove .worktrees/<name> --force`\n3. Ask if branch should be deleted\n4. If yes: `git branch -D feat/<name>`\n\n### Status\n\n```\n/worktree status\n```\n\nShows status of current worktree:\n- Current branch\n- Uncommitted changes\n- Relationship to main worktree\n\n## Directory Structure\n\n```\nproject/\n├── .worktrees/           # All worktrees live here\n│   ├── auth-feature/     # Isolated worktree\n│   └── api-refactor/     # Another worktree\n├── .gitignore           # Should include .worktrees/\n└── ...\n```\n\n## Environment Files\n\nThese files are copied to new worktrees if they exist:\n\n| File | Purpose |\n|------|---------|\n| `.env` | Environment variables |\n| `.env.local` | Local overrides |\n| `.env.development` | Development config |\n| `.nvmrc` | Node version |\n| `.node-version` | Node version (alternative) |\n| `.npmrc` | npm configuration |\n| `.tool-versions` | asdf version manager |\n\n## Behavior Rules\n\n### MUST DO\n- Create worktrees under `.worktrees/` directory\n- Add `.worktrees/` to `.gitignore` automatically\n- Copy environment files to new worktrees\n- Run package install in new worktrees\n- Confirm before removing worktrees\n\n### MUST NOT\n- Create worktrees outside `.worktrees/`\n- Force delete branches without confirmation\n- Leave orphaned worktrees\n\n## Safety\n\n**Before removal, check:**\n- No uncommitted changes in worktree\n- No unpushed commits on branch\n- Warn user if either condition exists\n\n**Recovery:**\n- Worktrees can be recovered with `git worktree add` if directory deleted manually\n- Branches are not deleted unless explicitly requested\n\n## Decision Matrix: Worktree vs Branch\n\n| Situation | Use Worktree | Use Branch |\n|-----------|--------------|------------|\n| Working on two features simultaneously | YES | NO |\n| Quick hotfix while mid-feature | YES | NO |\n| Sequential feature development | NO | YES |\n| Code review while continuing work | YES | NO |\n| Simple branch for later work | NO | YES |\n| Different node_modules needed | YES | NO |\n| Testing against different deps | YES | NO |\n| Just want to save work in progress | NO | YES (stash or branch) |\n\n**Rule of thumb:**\n- **Parallel work** = worktree (isolated directories, no context switching)\n- **Sequential work** = branch (single directory, normal git workflow)\n- **Different dependencies** = worktree (each has own node_modules)\n\n## Example Sessions\n\n### Create Worktree - Complete Session\n\n```\nUser: /worktree create auth-refactor\n\nClaude: Creating worktree for auth-refactor...\n```\n\n```bash\n# Step 1: Verify we're in a git repo and check current state\n$ git rev-parse --is-inside-work-tree\ntrue\n\n$ git worktree list\n/Users/dev/myapp  abc1234 [main]\n\n# Step 2: Check if branch already exists\n$ git branch --list 'feat/auth-refactor'\n(no output = branch doesn't exist, safe to proceed)\n\n# Step 3: Create the worktree with new branch\n$ git worktree add .worktrees/auth-refactor -b feat/auth-refactor\nPreparing worktree (new branch 'feat/auth-refactor')\nHEAD is now at abc1234 feat: add user dashboard\n\n# Step 4: Copy environment files\n$ cp .env .worktrees/auth-refactor/ 2>/dev/null && echo \"Copied .env\" || echo \"No .env found\"\nCopied .env\n\n$ cp .nvmrc .worktrees/auth-refactor/ 2>/dev/null && echo \"Copied .nvmrc\" || echo \"No .nvmrc found\"\nCopied .nvmrc\n\n# Step 5: Detect package manager and install\n$ ls .worktrees/auth-refactor/package-lock.json\n.worktrees/auth-refactor/package-lock.json\n\n$ cd .worktrees/auth-refactor && npm install\nadded 847 packages in 32s\n\n# Step 6: Ensure .worktrees/ is in .gitignore\n$ grep -q \"^\\.worktrees/$\" .gitignore || echo \".worktrees/\" >> .gitignore\n(added to .gitignore)\n\n# Step 7: Verify worktree is functional\n$ git -C .worktrees/auth-refactor status\nOn branch feat/auth-refactor\nnothing to commit, working tree clean\n\n$ git worktree list\n/Users/dev/myapp                      abc1234 [main]\n/Users/dev/myapp/.worktrees/auth-refactor  abc1234 [feat/auth-refactor]\n```\n\n**Output to user:**\n```\nWorktree created successfully.\n\nLocation: .worktrees/auth-refactor\nBranch:   feat/auth-refactor\nBase:     main (abc1234)\n\nEnvironment files copied:\n  - .env\n  - .nvmrc\n\nDependencies installed via npm.\n\nTo work in this worktree:\n  cd .worktrees/auth-refactor\n\nTo open in new terminal/editor:\n  code .worktrees/auth-refactor\n```\n\n### List Worktrees - Complete Session\n\n```\nUser: /worktree list\n\nClaude: Current worktrees:\n```\n\n```bash\n$ git worktree list\n/Users/dev/myapp                          abc1234 [main]\n/Users/dev/myapp/.worktrees/auth-refactor def5678 [feat/auth-refactor]\n/Users/dev/myapp/.worktrees/api-cache     ghi9012 [feat/api-cache]\n```\n\n**Output to user:**\n```\nActive Worktrees:\n\n1. main (primary)\n   Path:   /Users/dev/myapp\n   Commit: abc1234\n\n2. auth-refactor\n   Path:   .worktrees/auth-refactor\n   Branch: feat/auth-refactor\n   Commit: def5678\n\n3. api-cache\n   Path:   .worktrees/api-cache\n   Branch: feat/api-cache\n   Commit: ghi9012\n```\n\n### Remove Worktree - Complete Session (With Warning)\n\n```\nUser: /worktree remove auth-refactor\n\nClaude: Checking worktree status before removal...\n```\n\n```bash\n# Step 1: Check for uncommitted changes\n$ git -C .worktrees/auth-refactor status --porcelain\n M src/auth/login.ts\n?? src/auth/temp.ts\n\n# Step 2: Check for unpushed commits\n$ git -C .worktrees/auth-refactor log origin/feat/auth-refactor..HEAD --oneline 2>/dev/null || git -C .worktrees/auth-refactor log origin/main..HEAD --oneline\na1b2c3d feat(auth): add session validation\nd4e5f6g feat(auth): refactor token storage\n```\n\n**Output to user:**\n```\nWARNING: This worktree has uncommitted changes:\n\nModified:  src/auth/login.ts\nUntracked: src/auth/temp.ts\n\nWARNING: This worktree has 2 unpushed commits:\n\na1b2c3d feat(auth): add session validation\nd4e5f6g feat(auth): refactor token storage\n\nAre you sure you want to remove this worktree?\nThis will DELETE all uncommitted changes permanently.\n\nOptions:\n1. Commit and push changes first, then remove\n2. Force remove (loses uncommitted changes)\n3. Cancel\n```\n\n```\nUser: force remove, I don't need those changes\n\nClaude: Removing worktree...\n```\n\n```bash\n# Step 3: Force remove the worktree\n$ git worktree remove .worktrees/auth-refactor --force\nRemoving worktree directory .worktrees/auth-refactor\n\n# Step 4: Ask about branch deletion\n```\n\n**Output to user:**\n```\nWorktree removed.\n\nThe branch 'feat/auth-refactor' still exists with 2 commits.\nDelete the branch as well? (y/n)\n```\n\n```\nUser: yes\n\nClaude: Deleting branch...\n```\n\n```bash\n$ git branch -D feat/auth-refactor\nDeleted branch feat/auth-refactor (was a1b2c3d).\n\n$ git worktree list\n/Users/dev/myapp                      abc1234 [main]\n/Users/dev/myapp/.worktrees/api-cache ghi9012 [feat/api-cache]\n```\n\n**Output to user:**\n```\nCleanup complete.\n- Worktree directory removed\n- Branch feat/auth-refactor deleted\n```\n\n## Error Handling\n\n### Error: Branch Already Exists\n\n```bash\n$ git worktree add .worktrees/auth-feature -b feat/auth-feature\nfatal: a branch named 'feat/auth-feature' already exists\n```\n\n**Recovery:**\n```bash\n# Option 1: Use existing branch (if worktree doesn't exist for it)\n$ git worktree add .worktrees/auth-feature feat/auth-feature\n\n# Option 2: Choose a different name\n$ git worktree add .worktrees/auth-feature-v2 -b feat/auth-feature-v2\n\n# Option 3: Delete the old branch first (if safe)\n$ git branch -d feat/auth-feature  # safe delete (fails if unmerged)\n$ git worktree add .worktrees/auth-feature -b feat/auth-feature\n```\n\n**User message:** \"Branch 'feat/auth-feature' already exists. Would you like to: (1) use the existing branch, (2) choose a different name, or (3) delete the old branch first?\"\n\n### Error: Worktree Directory Already Exists\n\n```bash\n$ git worktree add .worktrees/auth-feature -b feat/auth-feature\nfatal: '.worktrees/auth-feature' already exists\n```\n\n**Recovery:**\n```bash\n# Check if it's a valid worktree\n$ git worktree list | grep auth-feature\n\n# If listed: worktree exists, inform user\n# If not listed: orphaned directory, safe to remove\n$ rm -rf .worktrees/auth-feature\n$ git worktree prune\n$ git worktree add .worktrees/auth-feature -b feat/auth-feature\n```\n\n**User message:** \"Directory '.worktrees/auth-feature' already exists. This appears to be an orphaned directory (not a valid worktree). Remove it and retry?\"\n\n### Error: Package Install Fails\n\n```bash\n$ cd .worktrees/auth-feature && npm install\nnpm ERR! code ERESOLVE\nnpm ERR! ERESOLVE could not resolve\nnpm ERR! peer dep missing: react@^17.0.0\n```\n\n**Recovery:**\n```bash\n# Worktree is created but deps failed\n# Option 1: Try with legacy peer deps\n$ cd .worktrees/auth-feature && npm install --legacy-peer-deps\n\n# Option 2: Use different package manager\n$ cd .worktrees/auth-feature && yarn install\n\n# Option 3: Skip install, let user handle\n```\n\n**User message:** \"Worktree created successfully, but npm install failed with dependency conflicts. The worktree is ready at .worktrees/auth-feature. You may need to run `npm install --legacy-peer-deps` or resolve the conflicts manually.\"\n\n### Error: Disk Space Insufficient\n\n```bash\n$ cd .worktrees/auth-feature && npm install\nnpm ERR! code ENOSPC\nnpm ERR! syscall write\nnpm ERR! errno -28\nnpm ERR! ENOSPC: no space left on device\n```\n\n**Recovery:**\n```bash\n# Clean up the partial worktree\n$ git worktree remove .worktrees/auth-feature --force\n$ git branch -D feat/auth-feature\n\n# Check disk space\n$ df -h .\n```\n\n**User message:** \"Disk space insufficient. The partial worktree has been cleaned up. Free up disk space and try again. Current usage: [show df output]\"\n\n### Error: Invalid Worktree Name\n\n```bash\n$ git worktree add \".worktrees/my feature\" -b \"feat/my feature\"\nfatal: 'feat/my feature' is not a valid branch name\n```\n\n**Prevention:** Validate names before attempting creation.\n\n```bash\n# Valid patterns: alphanumeric, hyphens, underscores\n# Invalid: spaces, special chars, starting with hyphen\n\n# Sanitize input\nname=\"my feature\"\nsanitized=$(echo \"$name\" | tr ' ' '-' | tr -cd 'a-zA-Z0-9-_')\n# Result: my-feature\n```\n\n**User message:** \"Invalid name 'my feature'. Branch names cannot contain spaces. Using 'my-feature' instead.\"\n\n### Error: Worktree Locked\n\n```bash\n$ git worktree remove .worktrees/auth-feature\nfatal: '.worktrees/auth-feature' is locked\n```\n\n**Recovery:**\n```bash\n# Check why it's locked\n$ cat .git/worktrees/auth-feature/locked\nProcess still running or editor has files open\n\n# Unlock if safe\n$ git worktree unlock .worktrees/auth-feature\n$ git worktree remove .worktrees/auth-feature\n```\n\n**User message:** \"Worktree is locked (possibly by another process or editor). Close any editors with files from this worktree open, then retry.\"\n\n## Cleanup Instructions for Partial Failures\n\nIf worktree creation fails partway through, clean up in reverse order:\n\n```bash\n# 1. Remove node_modules if install started\n$ rm -rf .worktrees/<name>/node_modules 2>/dev/null\n\n# 2. Remove the worktree directory\n$ git worktree remove .worktrees/<name> --force 2>/dev/null || rm -rf .worktrees/<name>\n\n# 3. Prune worktree references\n$ git worktree prune\n\n# 4. Delete the branch if it was created\n$ git branch -D feat/<name> 2>/dev/null\n\n# 5. Verify clean state\n$ git worktree list\n$ git branch --list 'feat/<name>'\n```\n\n**Automated cleanup function:**\n```bash\ncleanup_failed_worktree() {\n    local name=\"$1\"\n    rm -rf \".worktrees/${name}/node_modules\" 2>/dev/null\n    git worktree remove \".worktrees/${name}\" --force 2>/dev/null || rm -rf \".worktrees/${name}\"\n    git worktree prune\n    git branch -D \"feat/${name}\" 2>/dev/null\n    echo \"Cleaned up failed worktree: ${name}\"\n}\n```\n\n---\n\n**Note:** This skill manages worktrees only. Use standard git commands for commits, pushes, and merges within worktrees."
              }
            ]
          }
        ]
      }
    }
  ]
}