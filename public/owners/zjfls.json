{
  "owner": {
    "id": "zjfls",
    "display_name": "zjfls",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/10725809?v=4",
    "url": "https://github.com/zjfls",
    "bio": null,
    "stats": {
      "total_repos": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 3,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "zjfls/zhoujie-claude-skills",
      "url": "https://github.com/zjfls/zhoujie-claude-skills",
      "description": "claude skill for myself",
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-12T17:31:01Z",
        "created_at": "2026-01-11T02:00:12Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 591
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 363
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 1689
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/deep-learning",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/deep-learning/README.md",
          "type": "blob",
          "size": 3396
        },
        {
          "path": "skills/deep-learning/SKILL.md",
          "type": "blob",
          "size": 15993
        },
        {
          "path": "skills/deep-learning/learning-guide-template.html",
          "type": "blob",
          "size": 23710
        },
        {
          "path": "skills/deep-learning/paper-downloader.py",
          "type": "blob",
          "size": 10912
        },
        {
          "path": "skills/deep-learning/resources-guide.md",
          "type": "blob",
          "size": 6835
        },
        {
          "path": "skills/news-summary",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/news-summary/README.md",
          "type": "blob",
          "size": 7705
        },
        {
          "path": "skills/news-summary/SKILL.md",
          "type": "blob",
          "size": 6798
        },
        {
          "path": "skills/news-summary/lib",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/news-summary/lib/generator.js",
          "type": "blob",
          "size": 17063
        },
        {
          "path": "skills/news-summary/lib/html-generator.js",
          "type": "blob",
          "size": 5877
        },
        {
          "path": "skills/news-summary/lib/news-ai.js",
          "type": "blob",
          "size": 12633
        },
        {
          "path": "skills/news-summary/lib/server.js",
          "type": "blob",
          "size": 12200
        },
        {
          "path": "skills/skill-forge",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/DEDUPLICATION.md",
          "type": "blob",
          "size": 8964
        },
        {
          "path": "skills/skill-forge/FEATURES.md",
          "type": "blob",
          "size": 10655
        },
        {
          "path": "skills/skill-forge/README.md",
          "type": "blob",
          "size": 8065
        },
        {
          "path": "skills/skill-forge/SKILL.md",
          "type": "blob",
          "size": 40632
        },
        {
          "path": "skills/skill-forge/agent_analysis.html",
          "type": "blob",
          "size": 11408
        },
        {
          "path": "skills/skill-forge/agent_deep_analysis.html",
          "type": "blob",
          "size": 28953
        },
        {
          "path": "skills/skill-forge/debug-db.js",
          "type": "blob",
          "size": 420
        },
        {
          "path": "skills/skill-forge/lib",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/lib/dashboard-template.js",
          "type": "blob",
          "size": 32691
        },
        {
          "path": "skills/skill-forge/lib/database.js",
          "type": "blob",
          "size": 20022
        },
        {
          "path": "skills/skill-forge/lib/history-template.js",
          "type": "blob",
          "size": 22689
        },
        {
          "path": "skills/skill-forge/lib/html-template.js",
          "type": "blob",
          "size": 20898
        },
        {
          "path": "skills/skill-forge/lib/question-search-template.js",
          "type": "blob",
          "size": 11513
        },
        {
          "path": "skills/skill-forge/lib/quiz-engine.js",
          "type": "blob",
          "size": 25489
        },
        {
          "path": "skills/skill-forge/lib/quiz-search-template.js",
          "type": "blob",
          "size": 13853
        },
        {
          "path": "skills/skill-forge/lib/result-template.js",
          "type": "blob",
          "size": 60800
        },
        {
          "path": "skills/skill-forge/lib/server.js",
          "type": "blob",
          "size": 63846
        },
        {
          "path": "skills/skill-forge/lib/utils",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/lib/utils/similarity.js",
          "type": "blob",
          "size": 6969
        },
        {
          "path": "skills/skill-forge/package.json",
          "type": "blob",
          "size": 481
        },
        {
          "path": "skills/skill-forge/public",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/public/vendor",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/contrib",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/contrib/auto-render.min.js",
          "type": "blob",
          "size": 3478
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_AMS-Regular.woff2",
          "type": "blob",
          "size": 28076
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Caligraphic-Bold.woff2",
          "type": "blob",
          "size": 6912
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Caligraphic-Regular.woff2",
          "type": "blob",
          "size": 6908
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Fraktur-Bold.woff2",
          "type": "blob",
          "size": 11348
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Fraktur-Regular.woff2",
          "type": "blob",
          "size": 11316
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Main-Bold.woff2",
          "type": "blob",
          "size": 25324
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Main-BoldItalic.woff2",
          "type": "blob",
          "size": 16780
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Main-Italic.woff2",
          "type": "blob",
          "size": 16988
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Main-Regular.woff2",
          "type": "blob",
          "size": 26272
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Math-BoldItalic.woff2",
          "type": "blob",
          "size": 16400
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Math-Italic.woff2",
          "type": "blob",
          "size": 16440
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_SansSerif-Bold.woff2",
          "type": "blob",
          "size": 12216
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_SansSerif-Italic.woff2",
          "type": "blob",
          "size": 12028
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_SansSerif-Regular.woff2",
          "type": "blob",
          "size": 10344
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Script-Regular.woff2",
          "type": "blob",
          "size": 9644
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Size1-Regular.woff2",
          "type": "blob",
          "size": 5468
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Size2-Regular.woff2",
          "type": "blob",
          "size": 5208
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Size3-Regular.woff2",
          "type": "blob",
          "size": 3624
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Size4-Regular.woff2",
          "type": "blob",
          "size": 4928
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/fonts/KaTeX_Typewriter-Regular.woff2",
          "type": "blob",
          "size": 13568
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/katex.min.css",
          "type": "blob",
          "size": 23196
        },
        {
          "path": "skills/skill-forge/public/vendor/KaTeX/0.16.9/katex.min.js",
          "type": "blob",
          "size": 277038
        },
        {
          "path": "skills/skill-forge/public/vendor/highlight.js",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/public/vendor/highlight.js/11.9.0",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/public/vendor/highlight.js/11.9.0/highlight.min.js",
          "type": "blob",
          "size": 121727
        },
        {
          "path": "skills/skill-forge/public/vendor/highlight.js/11.9.0/styles",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/public/vendor/highlight.js/11.9.0/styles/github-dark.min.css",
          "type": "blob",
          "size": 1315
        },
        {
          "path": "skills/skill-forge/schema.sql",
          "type": "blob",
          "size": 5876
        },
        {
          "path": "skills/skill-forge/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-forge/scripts/add_cot_quiz.js",
          "type": "blob",
          "size": 16491
        },
        {
          "path": "skills/skill-forge/scripts/download_assets.js",
          "type": "blob",
          "size": 2633
        },
        {
          "path": "skills/skill-forge/tmp_old_server.js",
          "type": "blob",
          "size": 76036
        },
        {
          "path": "skills/skill-forge/tmpclaude-0afe-cwd",
          "type": "blob",
          "size": 49
        },
        {
          "path": "skills/skill-forge/tmpclaude-7338-cwd",
          "type": "blob",
          "size": 49
        }
      ],
      "marketplace": {
        "name": "zhoujie-claude-skills",
        "version": null,
        "description": null,
        "owner_info": {
          "name": "ZhouJie",
          "email": "zhoujie@example.com"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "zhoujie-skills",
            "description": "Collection of custom skills including deep learning resources, news summarization, and intelligent quiz system",
            "source": "./",
            "category": null,
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add zjfls/zhoujie-claude-skills",
              "/plugin install zhoujie-skills@zhoujie-claude-skills"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2026-01-12T17:31:01Z",
              "created_at": "2026-01-11T02:00:12Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "deep-learning",
                "description": "根据学习主题和范围，搜集权威的书单、博客、网站、框架、论文等学习资料，支持论文自动下载",
                "path": "skills/deep-learning/SKILL.md",
                "frontmatter": {
                  "name": "deep-learning",
                  "description": "根据学习主题和范围，搜集权威的书单、博客、网站、框架、论文等学习资料，支持论文自动下载"
                },
                "content": "# 深度学习资料搜集 Skill\n\n你是一个专业的学习资料搜集专家，专注于帮助用户系统性地收集某个技术领域的权威学习资源。\n\n## 第一步：需求收集（必须执行）\n\n在开始搜集资料前，**必须**向用户询问以下信息：\n\n### 1. 学习主题\n询问用户想要学习的具体主题，例如：\n- 深度学习/机器学习的某个子领域（如：Transformer、强化学习、计算机视觉、NLP等）\n- 某个具体技术（如：PyTorch、TensorFlow、LangChain等）\n- 某个应用领域（如：推荐系统、自动驾驶、医学AI等）\n\n### 2. 学习范围\n询问用户的学习深度和范围：\n- **入门级**：基础概念、入门教程、快速上手\n- **进阶级**：深入原理、最佳实践、工程实现\n- **专家级**：前沿研究、论文阅读、学术动态\n- **全面级**：从入门到精通的完整学习路径\n\n### 3. 偏好设置\n询问用户的学习偏好：\n- 语言偏好（中文/英文/两者都要）\n- 是否需要视频教程\n- 是否需要实战项目\n- 重点关注哪类资源（书籍/博客/论文/框架）\n\n## 第二步：资料搜集\n\n根据用户需求，使用搜索工具系统性搜集以下类型的资源：\n\n**⚠️ 搜索策略**：WebSearch 优先 → Brave Search 备用 → Brave Search 每次调用后必须 `sleep 1` 防止 QPS 超标\n\n### 1. 权威书单（全球资源优先）\n搜索关键词示例：\n- `{主题} best books` (优先)\n- `{主题} textbook recommendation` (优先)\n- `{主题} must read books`\n- `{主题} 经典书籍推荐` (辅助)\n\n**评估标准**：\n- 作者权威性（知名学者、业界专家）\n- 出版社声誉（O'Reilly、Manning、Springer、MIT Press、Cambridge University Press等）\n- 社区评价（Amazon评分、Goodreads、豆瓣评分）\n- 更新时效性\n\n**购买渠道**：\n- Amazon (amazon.com) - 全球最大\n- O'Reilly Safari (oreilly.com) - 技术订阅\n- Springer Link (link.springer.com) - 学术书籍\n- Manning (manning.com) - 编程书籍\n- Packt (packtpub.com) - 技术书籍\n- Book Depository (bookdepository.com) - 免运费\n- AbeBooks (abebooks.com) - 二手书\n- 京东/当当 - 中文版 (辅助)\n\n### 2. 权威博客和教程（全球资源优先）\n搜索关键词示例：\n- `{主题} tutorial` (优先)\n- `{主题} blog posts` (优先)\n- `{主题} comprehensive guide`\n- `{主题} 教程 知乎` (辅助)\n\n**重点来源（按优先级排序）**：\n1. **官方文档和教程** - 最权威\n2. **国际知名博客**：\n   - Towards Data Science (Medium)\n   - Machine Learning Mastery - Jason Brownlee\n   - Jay Alammar - Transformer可视化\n   - Distill.pub - 高质量交互式解释\n   - Lil'Log - Lilian Weng (OpenAI)\n   - Sebastian Ruder - NLP综述\n   - Andrej Karpathy - 前Tesla AI总监\n   - Christopher Olah - Google Brain\n   - Chip Huyen - ML系统设计\n   - Eugene Yan - ML工程实践\n3. **Medium技术文章**\n4. **个人技术博客**（知名研究者或工程师）\n5. **中文博客（辅助）**：知乎专栏、CSDN优质文章\n\n### 3. 权威网站和平台（全球资源优先）\n搜索和推荐（按优先级排序）：\n- **课程平台**：\n  - Coursera (coursera.org) - 斯坦福、DeepLearning.AI\n  - edX (edx.org) - MIT、Harvard\n  - Udacity (udacity.com) - 纳米学位\n  - fast.ai (fast.ai) - 实践导向，完全免费\n  - MIT OpenCourseWare (ocw.mit.edu)\n  - Stanford Online (online.stanford.edu)\n  - Khan Academy (khanacademy.org) - 基础数学\n  - YouTube - 3Blue1Brown, Sentdex, StatQuest\n  - B站优质UP主 (辅助)\n- **学习社区**：\n  - Kaggle (kaggle.com) - 竞赛和数据集\n  - Papers With Code (paperswithcode.com) - 论文+代码\n  - Hugging Face (huggingface.co) - 模型和数据集\n  - GitHub - 开源项目\n  - Weights & Biases (wandb.ai) - 实验追踪\n- **官方资源**：框架官网、学术机构网站\n- **问答社区**：Stack Overflow、Reddit (r/MachineLearning, r/LearnMachineLearning)、知乎(辅助)\n\n### 4. 框架和工具\n搜索关键词示例：\n- `{主题} framework comparison`\n- `{主题} 工具 推荐`\n- `{主题} library github`\n\n**收集信息**：\n- 框架名称和官网\n- GitHub Star数和活跃度\n- 学习曲线评估\n- 适用场景\n- 官方教程和文档链接\n\n### 5. 论文资源\n搜索关键词示例：\n- `{主题} survey paper`\n- `{主题} 综述论文`\n- `{主题} seminal papers`\n- `{主题} arxiv`\n\n**重点来源**：\n- arXiv（预印本）\n- Google Scholar\n- Papers With Code\n- Semantic Scholar\n- ACL Anthology（NLP领域）\n- CVF Open Access（计算机视觉领域）\n\n## 第三步：论文下载（高优先级任务）\n\n⚠️ **重要提示**：论文下载是高优先级任务，在条件允许的情况下尽量执行。下载后必须按规范重命名，不要保留原始文件名。\n\n对于搜集到的重要论文，尝试自动下载：\n\n### 下载源优先级\n1. **arXiv** - 直接下载PDF\n   - URL格式：`https://arxiv.org/pdf/{paper_id}.pdf`\n\n2. **Papers With Code** - 获取论文链接和代码\n   - 搜索论文标题获取下载链接\n\n3. **Semantic Scholar** - 获取PDF链接\n   - API：`https://api.semanticscholar.org/`\n\n4. **OpenReview** - 会议论文\n   - 直接提供PDF下载\n\n5. **ACL Anthology** - NLP论文\n   - URL格式：`https://aclanthology.org/{paper_id}.pdf`\n\n6. **CVF** - 计算机视觉论文\n   - CVPR、ICCV等会议论文\n\n### 下载流程\n\n```\n对于每篇论文：\n1. 检查是否有arXiv链接 -> 直接构建PDF URL下载\n2. 检查是否有DOI -> 尝试Sci-Hub镜像（仅供学术研究）\n3. 检查是否开放获取 -> 直接下载\n4. 记录无法下载的论文，提供替代方案\n```\n\n### 保存位置\n- 在**当前工作目录**创建：`./learning-resources/{主题}/papers/`\n- **必须重命名**：`{年份}_{第一作者}_{简短标题}.pdf`（不要保留原始文件名）\n- 命名示例：`2017_Vaswani_Attention_Is_All_You_Need.pdf`\n\n---\n\n## 第四步：知识体系构建\n\n⚠️ **核心步骤**：基于搜集到的资源（特别是论文），构建结构化的知识体系。\n\n### 1. 论文知识提取\n对于每篇下载的论文，提取以下信息：\n\n| 提取项 | 说明 |\n|--------|------|\n| **核心概念** | 论文提出或依赖的关键概念 |\n| **前置知识** | 理解论文需要的先修知识 |\n| **创新点** | 论文的主要贡献 |\n| **应用场景** | 技术的实际应用 |\n| **难度等级** | 入门/进阶/专家 |\n\n### 2. 建立概念依赖关系\n分析概念之间的依赖，构建学习图谱：\n\n```\n基础概念（先学）\n    ↓\n核心技术（中间）\n    ↓\n进阶应用（后学）\n    ↓\n前沿研究（最后）\n```\n\n### 3. 划分学习阶段\n将所有资源按难度和依赖关系划分为四个阶段：\n\n| 阶段 | 名称 | 内容 | 目标 |\n|------|------|------|------|\n| **阶段 1** | 基础概念 | 数学基础、核心定义、入门教程 | 建立基本认知 |\n| **阶段 2** | 核心技术 | 经典算法、核心论文、实践框架 | 掌握核心能力 |\n| **阶段 3** | 进阶应用 | 工程实践、优化技巧、实战项目 | 能够独立应用 |\n| **阶段 4** | 前沿研究 | 最新论文、SOTA方法、开放问题 | 了解研究前沿 |\n\n### 4. 生成学习路径\n为每个阶段规划具体的学习顺序和建议时间：\n\n```\n阶段 N: {阶段名称}\n├── 学习目标: {本阶段要达成的目标}\n├── 建议时长: {预估学习时间}\n├── 资源列表:\n│   ├── 必修: {必须学习的资源}\n│   └── 选修: {可选的补充资源}\n├── 论文阅读:\n│   ├── {论文1} - {核心知识点}\n│   └── {论文2} - {核心知识点}\n└── 阶段检验: {如何判断已掌握本阶段内容}\n```\n\n## 第五步：生成结构化 HTML 学习指南\n\n⚠️ **重要**：生成交互式 HTML 学习文档，而非简单的 Markdown 列表。\n\n### HTML 文档结构\n\n生成 `learning-guide.html`，包含以下部分：\n\n```html\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>{主题} 学习指南</title>\n    <!-- 内嵌样式：现代暗色主题 -->\n</head>\n<body>\n    <!-- 1. 顶部导航 -->\n    <header>\n        <h1>{主题} 学习指南</h1>\n        <div class=\"progress-bar\">学习进度: 0/{总资源数}</div>\n        <nav>快速导航: 阶段1 | 阶段2 | 阶段3 | 阶段4</nav>\n    </header>\n\n    <!-- 2. 概览信息 -->\n    <section id=\"overview\">\n        <p>学习主题 | 学习范围 | 生成时间</p>\n        <p>总览: {书籍数} 本书 | {课程数} 门课程 | {论文数} 篇论文</p>\n    </section>\n\n    <!-- 3. 学习路径（核心部分） -->\n    <section id=\"learning-path\">\n        <!-- 阶段卡片，每个阶段包含目标、资源、论文、检验标准 -->\n        <div class=\"stage\" id=\"stage-1\">...</div>\n        <div class=\"stage\" id=\"stage-2\">...</div>\n        <div class=\"stage\" id=\"stage-3\">...</div>\n        <div class=\"stage\" id=\"stage-4\">...</div>\n    </section>\n\n    <!-- 4. 资源详情 -->\n    <section id=\"resources\">\n        <!-- 书籍卡片 -->\n        <div class=\"resource-category\" id=\"books\">...</div>\n        <!-- 课程卡片 -->\n        <div class=\"resource-category\" id=\"courses\">...</div>\n        <!-- 论文卡片（含知识点摘要） -->\n        <div class=\"resource-category\" id=\"papers\">...</div>\n    </section>\n\n    <!-- 5. 知识图谱（可选） -->\n    <section id=\"knowledge-graph\">\n        <!-- 概念依赖关系的可视化 -->\n    </section>\n\n    <!-- 6. 底部行动建议 -->\n    <footer>\n        <h3>下一步行动</h3>\n        <ol>具体建议...</ol>\n    </footer>\n</body>\n</html>\n```\n\n### 样式规范\n\n| 元素 | 样式要求 |\n|------|----------|\n| **整体** | 暗色主题（#1a1a2e 背景），现代感 |\n| **阶段卡片** | 渐变边框，悬停动画 |\n| **资源卡片** | 圆角，阴影，标签分类 |\n| **进度条** | 动态显示学习进度 |\n| **论文卡片** | 突出显示知识点，链接到本地 PDF |\n\n### 阶段卡片内容\n\n每个阶段卡片包含：\n\n```html\n<div class=\"stage\">\n    <div class=\"stage-header\">\n        <span class=\"stage-number\">阶段 {N}</span>\n        <h2>{阶段名称}</h2>\n        <span class=\"stage-duration\">{建议时长}</span>\n    </div>\n    <div class=\"stage-goal\">\n        <h4>🎯 学习目标</h4>\n        <p>{本阶段要达成的目标}</p>\n    </div>\n    <div class=\"stage-resources\">\n        <h4>📚 学习资源</h4>\n        <div class=\"required\">必修: ...</div>\n        <div class=\"optional\">选修: ...</div>\n    </div>\n    <div class=\"stage-papers\">\n        <h4>📄 论文阅读</h4>\n        <ul>\n            <li><a href=\"papers/{文件名}\">{论文标题}</a> - {核心知识点}</li>\n        </ul>\n    </div>\n    <div class=\"stage-checkpoint\">\n        <h4>✅ 阶段检验</h4>\n        <p>{如何判断已掌握本阶段内容}</p>\n    </div>\n</div>\n```\n\n### 论文卡片内容\n\n```html\n<div class=\"paper-card\">\n    <div class=\"paper-header\">\n        <span class=\"paper-stage\">阶段 {N}</span>\n        <span class=\"paper-difficulty\">{难度}</span>\n    </div>\n    <h3 class=\"paper-title\">{论文标题}</h3>\n    <p class=\"paper-meta\">{作者} | {年份} | {会议/期刊}</p>\n    <div class=\"paper-knowledge\">\n        <h4>💡 核心知识点</h4>\n        <ul>\n            <li>{知识点1}</li>\n            <li>{知识点2}</li>\n        </ul>\n    </div>\n    <div class=\"paper-prereq\">\n        <h4>📋 前置知识</h4>\n        <p>{需要的先修知识}</p>\n    </div>\n    <div class=\"paper-actions\">\n        <a href=\"papers/{文件名}\" class=\"btn-primary\">📥 阅读论文</a>\n        <a href=\"{arxiv链接}\" class=\"btn-secondary\">🔗 arXiv</a>\n    </div>\n</div>\n```\n\n### 同时生成 Markdown 版本\n\n为兼容性保留 `README.md`，内容精简版：\n\n```markdown\n# {主题} 学习资料\n\n> 📖 完整学习指南请打开 [learning-guide.html](./learning-guide.html)\n\n## 快速概览\n- 书籍: {N} 本\n- 课程: {N} 门  \n- 论文: {N} 篇\n\n## 学习路径概要\n1. **阶段 1 - 基础概念**: {简述}\n2. **阶段 2 - 核心技术**: {简述}\n3. **阶段 3 - 进阶应用**: {简述}\n4. **阶段 4 - 前沿研究**: {简述}\n\n## 下载的论文\n| 文件名 | 标题 | 阶段 |\n|--------|------|------|\n```\n\n## 第六步：保存和展示\n\n1. **保存文件**（在**当前工作目录**下）：\n   ```\n   ./learning-resources/{主题}/\n   ├── learning-guide.html    # 🌟 主要学习指南（HTML）\n   ├── README.md              # 快速概览（Markdown）\n   ├── resources.json         # 结构化数据\n   ├── knowledge-graph.json   # 知识图谱数据\n   ├── papers/                # 下载的论文\n   │   ├── 2017_Vaswani_Attention.pdf\n   │   └── ...\n   ├── code/                  # 相关代码资源（如有）\n   └── notes/                 # 学习笔记目录（预留）\n   ```\n\n2. **resources.json 结构**：\n   ```json\n   {\n     \"meta\": {\n       \"topic\": \"{主题}\",\n       \"scope\": \"{学习范围}\",\n       \"generated_at\": \"{时间戳}\"\n     },\n     \"stages\": [\n       {\n         \"id\": 1,\n         \"name\": \"基础概念\",\n         \"goal\": \"{目标}\",\n         \"duration\": \"{时长}\",\n         \"resources\": [...],\n         \"papers\": [...],\n         \"checkpoint\": \"{检验标准}\"\n       }\n     ],\n     \"books\": [...],\n     \"courses\": [...],\n     \"papers\": [\n       {\n         \"title\": \"{标题}\",\n         \"authors\": \"{作者}\",\n         \"year\": 2017,\n         \"stage\": 2,\n         \"difficulty\": \"进阶\",\n         \"knowledge_points\": [...],\n         \"prerequisites\": [...],\n         \"local_path\": \"papers/xxx.pdf\",\n         \"arxiv_url\": \"...\"\n       }\n     ],\n     \"knowledge_graph\": {\n       \"nodes\": [...],\n       \"edges\": [...]\n     }\n   }\n   ```\n\n3. **打开学习指南**：\n   - 生成完成后用默认浏览器打开 `learning-guide.html`\n   - macOS: `open learning-guide.html`\n   - Linux: `xdg-open learning-guide.html`\n   - Windows: `start learning-guide.html`\n\n## 工作流程总结\n\n```\n1. 询问用户 -> 获取主题、范围、偏好\n2. WebSearch（优先） -> 搜集各类资源（Brave Search备用，需sleep 1）\n3. 评估筛选 -> 保留权威高质量资源\n4. 论文下载（高优先级） -> 下载重要论文并按规范重命名\n5. 知识体系构建 -> 提取论文知识点，划分学习阶段，生成学习路径\n6. 生成 HTML 指南 -> 创建结构化交互式学习文档\n7. 保存展示 -> 保存文件并用浏览器打开\n```\n\n## 注意事项\n\n1. **质量优先**：宁缺毋滥，只推荐真正有价值的资源\n2. **来源标注**：所有资源都要标明来源和链接\n3. **时效性**：标注资源的发布/更新时间\n4. **版权尊重**：论文下载仅限合法渠道，尊重版权\n5. **个性化**：根据用户的具体需求定制资源清单\n6. **可操作性**：提供清晰的学习路径和建议\n\n## 示例对话\n\n**用户**：帮我搜集深度学习相关的学习资料\n\n**助手**：好的！为了给你搜集最合适的学习资料，我需要了解几个问题：\n\n1. **学习主题**：你想学习深度学习的哪个方向？\n   - 通用深度学习基础\n   - 计算机视觉（CV）\n   - 自然语言处理（NLP）\n   - 强化学习（RL）\n   - 生成式AI（如：大语言模型、Diffusion）\n   - 其他（请说明）\n\n2. **学习范围**：你目前的水平和学习目标是？\n   - 入门级：零基础，想要快速入门\n   - 进阶级：有基础，想要深入理解\n   - 专家级：熟练掌握，关注前沿研究\n   - 全面级：想要完整的学习路径\n\n3. **偏好设置**：\n   - 语言偏好：中文/英文/都可以\n   - 是否需要视频教程？\n   - 是否需要实战项目？\n   - 最关注哪类资源？（书籍/博客/论文/框架）\n\n请回答以上问题，我将为你量身定制学习资料清单！"
              },
              {
                "name": "news-summary",
                "description": "新闻搜索、新闻摘要、新闻汇总、热点新闻、最新新闻、新闻整理、新闻收集。帮你搜索最近几天的相关新闻（12-25条），生成精美的HTML摘要页面，每条新闻都有摘要和AI深度解读功能，自动打开浏览器展示",
                "path": "skills/news-summary/SKILL.md",
                "frontmatter": {
                  "name": "news-summary",
                  "description": "新闻搜索、新闻摘要、新闻汇总、热点新闻、最新新闻、新闻整理、新闻收集。帮你搜索最近几天的相关新闻（12-25条），生成精美的HTML摘要页面，每条新闻都有摘要和AI深度解读功能，自动打开浏览器展示"
                },
                "content": "# 新闻搜索摘要 Skill\n\n一个智能新闻搜索和摘要工具，帮你快速获取和分析最新新闻。\n\n## 核心功能\n\n### 1. 搜索新闻\n- 询问用户搜索主题\n- 搜索最近 3-5 天的 12-25 条相关新闻\n- **搜索工具**：优先使用 WebSearch，不可用时使用 Brave Search MCP\n- **Brave Search 限制**：每次调用后必须 `sleep 1` 秒，防止速率限制\n- **搜索优化**：\n  * 使用多个关键词组合搜索\n  * 分批搜索确保足够结果\n  * 自动去重（标题/URL）\n  * 如结果不足 12 条，扩大时间范围或关键词\n\n### 2. 分析新闻\n对每条新闻提取：\n- 标题\n- 来源网站\n- 发布时间\n- 权威性评估（高/中/低）\n- 摘要（100-200字）\n- 原文链接\n\n### 3. 生成 HTML 页面\n- **输出目录**：`<当前工作目录>/news-summary/<timestamp>_<topic>/`\n  * 通过 `pwd` 获取当前工作目录的绝对路径\n  * `<timestamp>` 格式：`YYYYMMDD_HHMM`（如：`20260111_1145`），确保每次搜索都有唯一目录\n  * `<topic>` 从用户查询提取关键词（如：`AI`、`deepseek`），无法提取时使用 `news`\n  * 示例：`/path/to/work/news-summary/20260111_1145_AI/`\n- **文件名**：`news_summary_<topic>.html`\n- **AI 解读目录**：`<当前工作目录>/news-summary/<timestamp>_<topic>/analysis/`\n- **解读文件名**：`news_analysis_<newsId>.md`\n- **页面特性**：\n  * 美观的响应式设计\n  * 卡片式新闻展示\n  * 每条新闻包含：标题、来源、时间、权威性标签、摘要\n  * 两个按钮：\"查看原文\" 和 \"AI解读\"\n  * **必须在 </body> 前包含**：`<script src=\"/news-ai.js\"></script>`\n\n### 4. AI 解读功能\n- **服务器**：Node.js HTTP 服务器(lib/server.js，端口 3456)\n- **真实 AI 分析**：通过 Claude Code CLI 生成深度解读\n- **输出格式**：完整的 HTML 页面\n  * 存储位置：`<工作目录>/news-summary/<timestamp_topic>/analysis/news_analysis_<id>.html`\n  * 包含完整的 HTML 结构（<!DOCTYPE html>、<html>、<head>、<body>等）\n  * 使用现代化的 CSS 样式，响应式设计\n  * 颜色主题使用 #667eea 和 #764ba2 渐变\n  * 包含新闻信息、分析内容、底部版权等完整结构\n- **自定义 Prompt**：点击\"AI解读\"按钮后可输入自定义分析角度\n- **阻塞和超时**：\n  * 生成时显示加载模态框\n  * 120 秒超时自动中止\n- **文件管理**：\n  * 已生成：显示\"查看AI解读\"和\"删除解读\"按钮\n  * 未生成：显示\"AI解读\"按钮\n  * 支持删除和重新生成\n- **服务端点**：\n  * `GET /check-analysis?newsId=<id>&timestamp=<timestamp_topic>` - 检查解读文件是否存在\n  * `POST /analyze` - 生成 AI 解读（支持 customPrompt，输出完整 HTML）\n  * `DELETE /delete-analysis?newsId=<id>&timestamp=<timestamp_topic>` - 删除解读\n  * `GET /view-analysis?newsId=<id>&timestamp=<timestamp_topic>` - 查看解读（直接返回 HTML）\n  * `GET /news-summary/<timestamp_topic>/<filename>` - 静态文件服务\n  * `GET /news-ai.js` - 前端脚本\n\n### 5. 重启服务器并打开浏览器\n- **重启服务器步骤**（每次生成后必须执行）：\n  1. 检查端口 3456 是否被占用：\n     - Windows: `netstat -ano | findstr 3456`\n     - macOS/Linux: `lsof -ti:3456` 或 `netstat -ano | grep 3456`\n  2. 如果端口被占用，停止旧服务器：\n     - Windows: `taskkill /F /PID <进程ID>`\n     - macOS/Linux: `kill -9 <进程ID>`\n  3. 重新启动服务器：\n     - Windows: `start /B node <skill目录>/lib/server.js`\n     - macOS/Linux: `node <skill目录>/lib/server.js &`\n  4. 等待 2 秒确保服务器启动\n  5. 验证启动：访问 `http://localhost:3456/news-ai.js` 应该返回 JavaScript 代码\n- 生成 HTML 后，通过 HTTP 打开浏览器\n- **浏览器命令**：\n  * Windows: `Start-Process \"http://localhost:3456/news-summary/<timestamp_topic>/news_summary_<topic>.html\"`\n  * macOS: `open \"http://localhost:3456/news-summary/<timestamp_topic>/news_summary_<topic>.html\"`\n  * Linux: `xdg-open \"http://localhost:3456/news-summary/<timestamp_topic>/news_summary_<topic>.html\"`\n- **重要**：必须通过 HTTP 访问，不能使用 file:// 协议\n\n## 工作流程\n\n1. 询问用户搜索主题\n2. **生成唯一标识**：\n   - 从查询中提取关键词作为 `<topic>`（无法提取则用 `news`）\n   - 生成时间戳：`<timestamp>` = `YYYYMMDD_HHMM` 格式\n   - 组合为：`<timestamp>_<topic>`（如：`20260111_1145_AI`）\n3. 搜索新闻（WebSearch 优先；Brave Search 需间隔 1 秒）\n4. 分析和整理新闻信息\n5. **获取当前工作目录**：使用 Bash 命令 `pwd` 获取绝对路径\n6. **创建目录**：`<当前工作目录>/news-summary/<timestamp>_<topic>/`\n7. **生成 HTML**：\n   - 文件路径：`<当前工作目录>/news-summary/<timestamp>_<topic>/news_summary_<topic>.html`\n   - **必须在 </body> 前添加**：`<script src=\"/news-ai.js\"></script>`\n   - 每个新闻卡片必须包含 data 属性（data-news-id, data-news-url, data-news-source, data-news-time）\n8. **重启服务器**：\n   - 检查端口 3456 是否被占用\n   - 如果被占用，停止旧服务器\n   - 启动新服务器：`node <skill目录>/lib/server.js &`\n   - 等待 2 秒并验证\n9. 打开浏览器：`http://localhost:3456/news-summary/<timestamp>_<topic>/news_summary_<topic>.html`\n\n## HTML 模板要求\n\n- 现代简洁设计，响应式布局\n- 卡片式新闻展示\n- **每个新闻卡片必须包含 data 属性**：\n  * `data-news-id`: 新闻 ID（0, 1, 2...）\n  * `data-news-url`: 原文链接\n  * `data-news-source`: 来源\n  * `data-news-time`: 发布时间\n  * `data-news-title`: 新闻标题\n  * `data-news-summary`: 新闻摘要\n- 权威性标签：高（绿色）、中（黄色）、低（灰色）\n- 相对时间显示（如：2天前）\n- **必须在 </body> 前引入**：`<script src=\"/news-ai.js\"></script>`（使用绝对路径）\n- **初始只包含\"查看原文\"按钮**，AI 解读按钮由 news-ai.js 在页面加载后动态添加\n\n## 注意事项\n\n- 使用绝对路径（通过 `pwd` 获取当前工作目录）\n- 创建必要的目录结构\n- 处理网络请求失败\n- 验证新闻来源可靠性\n- **必须在 HTML 中包含** `<script src=\"/news-ai.js\"></script>`，否则 AI 解读功能不可用\n- **时间戳格式**：必须使用 `YYYYMMDD_HHMM` 格式，确保每次搜索都有唯一目录\n- **服务器必须重启**：每次生成新闻后必须重启服务器，确保 WORK_DIR 指向当前工作目录"
              },
              {
                "name": "skill-forge",
                "description": "智能学习测验系统。根据学习主题和难度生成定制化试卷（选择题、问答题、代码题），支持实时AI答疑、自动评分、错题分析和学习历史追踪",
                "path": "skills/skill-forge/SKILL.md",
                "frontmatter": {
                  "name": "skill-forge",
                  "description": "智能学习测验系统。根据学习主题和难度生成定制化试卷（选择题、问答题、代码题），支持实时AI答疑、自动评分、错题分析和学习历史追踪"
                },
                "content": "# Skill Forge - 智能学习测验系统\n\n你是一个智能学习助手，专注于通过测验帮助用户掌握技能。你的核心能力是**生成高质量试卷**、**智能评分**、**答疑解惑**和**追踪学习进度**。\n\n## 🗄️ 数据存储架构（重要！）\n\n### 数据目录结构\n\n所有数据存储在 **`~/.skill-forge/`** 目录下：\n\n```\n~/.skill-forge/\n├── skill-forge.db          # SQLite数据库（核心数据）\n├── quizzes/                # 试卷HTML文件\n│   └── <timestamp>_<topic>/\n│       ├── quiz.html       # 试卷页面\n│       └── result.html     # 成绩页面（提交后生成）\n└── history/                # 历史记录备份（JSON格式）\n    └── <timestamp>_backup.json\n```\n\n### 数据库Schema（SQLite）\n\n**重要**：数据库文件位于 `~/.skill-forge/skill-forge.db`，使用以下schema：\n\n```sql\n-- 试卷模板表\nCREATE TABLE IF NOT EXISTS quizzes (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    quiz_id TEXT UNIQUE NOT NULL,           -- 唯一标识：<timestamp>_<topic>\n    topic TEXT NOT NULL,                     -- 学习主题\n    topic_detail TEXT,                       -- 详细主题说明\n    difficulty TEXT NOT NULL,                -- 难度：beginner/intermediate/advanced\n    question_count INTEGER NOT NULL,         -- 题目数量\n    created_at TEXT NOT NULL,                -- 创建时间（ISO格式）\n    status TEXT DEFAULT 'created'            -- 状态：created/completed\n);\n\n-- 考试实例表（新增）\nCREATE TABLE IF NOT EXISTS exams (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    exam_id TEXT UNIQUE NOT NULL,            -- 考试唯一标识：<quiz_id>_<timestamp>\n    quiz_id TEXT NOT NULL,                   -- 关联试卷ID\n    status TEXT DEFAULT 'in_progress',       -- 状态：in_progress/completed/abandoned\n    started_at TEXT NOT NULL,                -- 开始时间\n    FOREIGN KEY (quiz_id) REFERENCES quizzes(quiz_id) ON DELETE CASCADE\n);\n\n-- 题目表\nCREATE TABLE IF NOT EXISTS questions (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    quiz_id TEXT NOT NULL,                   -- 关联试卷ID\n    question_number INTEGER NOT NULL,        -- 题号（1,2,3...）\n    question_type TEXT NOT NULL,             -- 题型：choice/essay/code\n    content TEXT NOT NULL,                   -- 题目内容\n    options TEXT,                            -- 选项（JSON数组，仅choice类型）\n    correct_answer TEXT NOT NULL,            -- 正确答案\n    score INTEGER NOT NULL,                  -- 分值\n    knowledge_points TEXT,                   -- 知识点（JSON数组）\n    explanation TEXT,                        -- 题目解析\n    source_type TEXT DEFAULT 'ai_generated', -- 题目来源类型：ai_generated/interview/exam/community\n    source_url TEXT,                         -- 来源URL（如果适用）\n    source_name TEXT,                        -- 来源名称（如果适用）\n    content_hash TEXT,                       -- 内容哈希（用于去重）\n    FOREIGN KEY (quiz_id) REFERENCES quizzes(quiz_id) ON DELETE CASCADE\n);\n\n-- 提交记录表\nCREATE TABLE IF NOT EXISTS submissions (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    submission_id TEXT UNIQUE NOT NULL,      -- 提交ID：<exam_id>_<timestamp>\n    exam_id TEXT NOT NULL,                   -- 关联考试ID\n    quiz_id TEXT NOT NULL,                   -- 关联试卷ID（冗余用于快速查询）\n    submitted_at TEXT NOT NULL,              -- 提交时间（ISO格式）\n    total_score INTEGER NOT NULL,            -- 总分\n    obtained_score REAL NOT NULL,            -- 得分\n    time_spent INTEGER,                      -- 答题用时（秒）\n    pass_status TEXT,                        -- 通过状态：pass/fail\n    FOREIGN KEY (exam_id) REFERENCES exams(exam_id) ON DELETE CASCADE,\n    FOREIGN KEY (quiz_id) REFERENCES quizzes(quiz_id) ON DELETE CASCADE\n);\n\n-- 用户答案表\nCREATE TABLE IF NOT EXISTS answers (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    submission_id TEXT NOT NULL,             -- 关联提交ID\n    question_id INTEGER NOT NULL,            -- 关联题目ID\n    user_answer TEXT,                        -- 用户答案\n    is_correct INTEGER,                      -- 是否正确：1/0\n    score_obtained REAL,                     -- 获得分数\n    ai_feedback TEXT,                        -- AI评分反馈\n    FOREIGN KEY (submission_id) REFERENCES submissions(submission_id) ON DELETE CASCADE,\n    FOREIGN KEY (question_id) REFERENCES questions(id)\n);\n\n-- AI对话记录表\nCREATE TABLE IF NOT EXISTS ai_interactions (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    exam_id TEXT NOT NULL,                   -- 关联考试ID\n    quiz_id TEXT NOT NULL,                   -- 关联试卷ID（冗余）\n    question_number INTEGER NOT NULL,        -- 关联题号\n    user_query TEXT NOT NULL,                -- 用户提问\n    ai_response TEXT NOT NULL,               -- AI回答\n    created_at TEXT NOT NULL,                -- 提问时间（ISO格式）\n    FOREIGN KEY (exam_id) REFERENCES exams(exam_id) ON DELETE CASCADE,\n    FOREIGN KEY (quiz_id) REFERENCES quizzes(quiz_id) ON DELETE CASCADE\n);\n\n-- 题目深度解析记录表\nCREATE TABLE IF NOT EXISTS question_analyses (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    exam_id TEXT NOT NULL,                   -- 关联测验ID\n    question_id INTEGER NOT NULL,            -- 关联题目ID\n    title TEXT,                              -- 解析标题（可选）\n    content TEXT NOT NULL,                   -- HTML格式的解析内容\n    created_at TEXT NOT NULL,                -- 创建时间（ISO格式）\n    FOREIGN KEY (exam_id) REFERENCES exams(exam_id) ON DELETE CASCADE,\n    FOREIGN KEY (question_id) REFERENCES questions(id)\n);\n\n-- 创建索引\nCREATE INDEX IF NOT EXISTS idx_quizzes_quiz_id ON quizzes(quiz_id);\nCREATE INDEX IF NOT EXISTS idx_exams_quiz_id ON exams(quiz_id);\nCREATE INDEX IF NOT EXISTS idx_questions_quiz_id ON questions(quiz_id);\nCREATE INDEX IF NOT EXISTS idx_submissions_exam_id ON submissions(exam_id);\nCREATE INDEX IF NOT EXISTS idx_submissions_quiz_id ON submissions(quiz_id);\nCREATE INDEX IF NOT EXISTS idx_answers_submission_id ON answers(submission_id);\nCREATE INDEX IF NOT EXISTS idx_ai_interactions_exam_id ON ai_interactions(exam_id);\nCREATE INDEX IF NOT EXISTS idx_question_analyses_exam_question ON question_analyses(exam_id, question_id);\n```\n\n## ⚙️ 配置系统\n\n### 配置文件（config.json）\n\n**位置**：`~/.skill-forge/config.json`\n\n**首次使用**：\n- 系统首次启动时自动创建默认配置\n- 也可以手动编辑来覆盖默认值\n- 修改后需重启服务器生效\n\n**完整配置项说明**：\n\n```json\n{\n    \"version\": \"1.0.0\",\n    \"ai\": {\n        \"model\": \"mcs-1\",              // AI模型名称（必须是有效的Claude模型）\n        \"timeout\": 120000,             // AI请求超时时间（毫秒）\n        \"cliCommand\": \"claude\",        // Claude CLI命令名称\n        \"temperature\": 0.7             // AI生成温度（0-1，越高越随机）\n    },\n    \"server\": {\n        \"port\": 3457,                  // HTTP服务器端口\n        \"dataDir\": \"~/.skill-forge\"    // 数据存储目录\n    },\n    \"quiz\": {\n        \"defaultDifficulty\": \"intermediate\",    // 默认难度：beginner/intermediate/advanced\n        \"defaultQuestionCount\": 10,             // 默认题目数量\n        \"autoSaveInterval\": 30000,              // 自动保存间隔（毫秒）\n        \"passThreshold\": 60                     // 及格分数线（百分比，0-100）\n    },\n    \"deduplication\": {\n        \"enabled\": true,               // 是否启用题目去重功能\n        \"policy\": \"avoid\",             // 去重策略：avoid（完全避免）/allow_few（允许少量）/unlimited（不限制）\n        \"similarityThreshold\": 0.7,    // 相似度判定阈值（0-1，越高要求越严格）\n        \"lookbackDays\": 30             // 去重检查的历史天数\n    }\n}\n```\n\n**常用配置修改示例**：\n\n```bash\n# 修改AI模型\nvi ~/.skill-forge/config.json\n# 修改 \"model\": \"mcs-1\" 为其他有效模型\n\n# 修改端口号（如果3457被占用）\n# 修改 \"port\": 3457 为其他端口\n\n# 调整及格线\n# 修改 \"passThreshold\": 60 为其他值（如70）\n\n# 调整去重策略\n# 修改 \"policy\": \"avoid\" 为 \"allow_few\"（允许少量重复题）\n```\n\n## 📋 数据操作流程（必须严格遵守！）\n\n### 1️⃣ 首次使用初始化流程\n\n**触发条件**：任何操作开始前，系统自动检查并初始化\n\n**自动初始化步骤**（由 `database.js` 的 `initDatabase()` 方法完成）：\n\n1. **检查并创建数据目录**：\n   ```javascript\n   if (!fs.existsSync('~/.skill-forge/')) {\n       fs.mkdirSync('~/.skill-forge/', { recursive: true });\n       console.log('✓ 创建数据目录: ~/.skill-forge');\n   }\n   ```\n\n2. **创建子目录结构**：\n   ```\n   ~/.skill-forge/\n   ├── quizzes/     # 自动创建（试卷HTML文件）\n   └── history/     # 自动创建（历史记录备份）\n   ```\n\n3. **创建默认配置文件**（如果不存在）：\n   ```javascript\n   // 自动生成 ~/.skill-forge/config.json\n   // 包含所有默认配置项\n   console.log('✓ 配置文件已创建: ~/.skill-forge/config.json');\n   ```\n\n4. **初始化数据库**：\n   ```javascript\n   // 连接/创建 ~/.skill-forge/skill-forge.db\n   // 执行 schema.sql 创建所有表和索引\n   console.log('✓ 数据库已连接: ~/.skill-forge/skill-forge.db');\n   console.log('✓ 数据库表已初始化');\n   ```\n\n5. **验证初始化成功**：\n   控制台输出完整的初始化日志：\n   ```\n   ✓ 创建数据目录: ~/.skill-forge\n   ✓ 配置文件已创建: ~/.skill-forge/config.json\n   ✓ 数据库已连接: ~/.skill-forge/skill-forge.db\n   ✓ 数据库表已初始化\n   ```\n\n**重要特性**：\n- **完全自动化**：无需任何手动操作\n- **幂等性**：可以多次调用，不会重复创建或报错\n- **容错性**：已存在的目录/文件不会被覆盖\n- **即用性**：首次使用时自动完成所有初始化\n\n**用户无需做任何事情**，直接使用即可：\n```bash\n# 第一次使用\n/skill-forge\n# → 系统自动初始化所有必需的目录、配置和数据库\n```\n\n### 2️⃣ 创建试卷流程\n\n```\n用户请求 → 收集参数 → 生成quiz_id → 初始化数据库 → 生成题目 → 插入数据库 → 启动服务器 → 打开浏览器\n```\n\n**详细步骤**：\n\n1. **收集参数**（⚠️ 必须主动询问，不可跳过！）：\n\n   **重要原则**：除非用户明确说「快速生成」「直接生成」「用默认设置」，否则必须逐项询问以下所有参数。\n   \n   **询问模板**（发送给用户）：\n   ```\n   📚 在生成试卷前，请回答以下问题（或输入\"快速生成\"使用默认设置）：\n   \n   1️⃣ **学习主题**：您想练习什么？（如：JavaScript 闭包、Python 装饰器）\n   \n   2️⃣ **难度等级**：\n      - 初级（基础概念）\n      - 中级（应用场景）\n      - 高级（底层原理 + 边界情况）\n   \n   3️⃣ **题目数量**：您希望多少道题？（默认 10 题，建议 5-20）\n   \n   4️⃣ **题型分布**：\n      - 选择题为主（适合快速检测）\n      - 问答题为主（适合深度理解）\n      - 代码题为主（适合实战练习）\n      - 混合（选择 + 问答 + 代码）\n   \n   5️⃣ **题目来源**：\n      - 🌐 网络搜索真题（面试题/考试题）\n      - 📋 我提供资料（粘贴或链接）\n      - 🤖 AI 直接生成（速度最快）\n      - 🔄 混合模式（推荐：先搜索，不足时 AI 补充）\n   \n   请逐项回答，或直接描述您的需求：\n   ```\n   \n   **收集的参数**：\n   - 学习主题（topic）- 必填\n   - 主题详细说明（topic_detail）- 可选\n   - 难度等级（difficulty）：beginner/intermediate/advanced\n   - 题目数量（question_count）：默认 10，范围 5-20\n   - 题型分布（question_types）：choice/essay/code 的比例\n   - 题目来源（source_mode）：search/user_provided/ai_generated/mixed\n\n\n2. **生成quiz_id**：\n   ```javascript\n   const timestamp = new Date().toISOString().replace(/[:.]/g, '-').substring(0, 19);\n   const topicSlug = topic.toLowerCase().replace(/\\s+/g, '-').substring(0, 30);\n   const quiz_id = `${timestamp}_${topicSlug}`;\n   // 示例：2026-01-11T14-30-45_javascript-basics\n   ```\n\n3. **初始化数据库**：\n   - 调用 `database.js` 的 `initDatabase()` 确保数据库存在\n\n4. **使用AI生成题目**：\n   - 根据主题、难度、题型生成高质量题目\n   - 确保题目具有知识点标签\n   - 生成详细的解析和标准答案\n\n   **网络搜索习题（可选增强）**：\n   \n   当需要从网络获取真实习题资源时，遵循以下策略：\n   \n   1. **优先使用 websearch**：首先尝试使用内置的 `search_web` 工具搜索习题\n   2. **备用 brave-search**：如果 websearch 搜索不到结果或结果质量不佳，切换到 `brave-search` MCP 工具\n   3. **API 速率限制**：使用 brave-search 时，**每次请求之间必须间隔至少 1 秒**，以避免 API rate limit 错误\n   \n   ```\n   搜索策略示例：\n   1. search_web(\"JavaScript 闭包 面试题\") \n   2. 如果结果不足 → 等待1秒 → brave_web_search(\"JavaScript closure interview questions\")\n   3. 如果仍不足 → 等待1秒 → brave_web_search(\"JavaScript 闭包 笔试题 考试题\")\n   ```\n\n   **题目来源策略（重要！必须遵循）**：\n\n   生成题目时，必须尝试以下来源策略，并正确填充来源字段：\n\n   **策略 1：网络搜索真题（优先）**\n   ```\n   1. 使用 search_web 搜索「{主题} 面试题」「{主题} 考试真题」「{主题} 练习题」\n   2. 从搜索结果中提取高质量题目\n   3. 填充来源字段：\n      - source_type: \"interview\" / \"exam\" / \"community\"\n      - source_url: 题目原始链接\n      - source_name: 来源名称（如 \"LeetCode\"、\"牛客网\"、\"力扣\"）\n   ```\n\n   **策略 2：询问用户（当网络搜索不足时）**\n   ```\n   🔍 我在网络上找到了部分题目，但可能不够完整。您有以下选择：\n   \n   1. 📝 使用 AI 生成补充题目（标记为 AI 生成）\n   2. 📋 提供您自己的题目资料（粘贴文本或提供链接）\n   3. 🔗 指定特定的题目来源网站（如某本书、某个题库）\n   \n   请选择或直接提供资料：\n   ```\n\n   **策略 3：AI 生成补充（兜底）**\n   ```\n   - 根据主题生成高质量题目\n   - 标记为 source_type = \"ai_generated\"\n   - source_url 和 source_name 留空\n   ```\n\n   **来源字段说明**：\n   | 字段 | 类型 | 说明 | 示例值 |\n   |------|------|------|--------|\n   | source_type | TEXT | 来源类型 | interview, exam, official_doc, community, ai_generated |\n   | source_url | TEXT | 原题链接 | https://leetcode.cn/problems/xxx |\n   | source_name | TEXT | 来源名称 | LeetCode、牛客网、《JavaScript高级程序设计》 |\n\n\n   **题目去重机制（三层策略）**：\n\n   **第一层：内容哈希精确匹配**（最快，database层）\n   ```javascript\n   // 1. 查询已有题目的哈希值\n   const existingHashes = await db.getExistingQuestionHashes(topic, 30);\n\n   // 2. 为新题目计算哈希\n   const crypto = require('crypto');\n   function calculateContentHash(question) {\n       const content = question.content + (question.options ? JSON.stringify(question.options) : '');\n       return crypto.createHash('md5').update(content).digest('hex');\n   }\n\n   // 3. 过滤完全相同的题目\n   const newQuestions = generatedQuestions.filter(q => {\n       const hash = calculateContentHash(q);\n       return !existingHashes.includes(hash);\n   });\n   ```\n\n   **第二层：文本相似度检测**（中速，本地计算）\n   ```javascript\n   const { findSimilarQuestions } = require('./utils/similarity');\n\n   // 1. 获取已有题目内容\n   const existingQuestions = await db.getExistingQuestionContents(topic, 30);\n\n   // 2. 对每道新题目检查相似度\n   const uniqueQuestions = [];\n   for (const newQ of newQuestions) {\n       const similarQuestions = findSimilarQuestions(newQ, existingQuestions, 0.7);\n\n       if (similarQuestions.length === 0) {\n           uniqueQuestions.push(newQ);  // 没有相似题目，保留\n       } else if (repeatPolicy === 'allow_few' && Math.random() < 0.2) {\n           uniqueQuestions.push(newQ);  // 允许少量重复策略\n       }\n       // repeatPolicy === 'avoid' 则跳过相似题目\n   }\n   ```\n\n   **算法说明**：\n   - **Jaccard相似度**: 基于词集合的交集/并集，快速计算整体相似度\n   - **余弦相似度**: 基于词频向量，更精确地反映内容相似度\n   - **综合相似度**: Jaccard (40%) + 余弦 (60%) 的加权平均\n\n   **相似度判断逻辑**：\n   ```javascript\n   // 题目内容相似度 ≥ 0.7 → 判定为相似题目\n   // 题目内容相似度 0.5-0.7 且 选项相似度 ≥ 0.7 → 判定为相似题目\n   ```\n\n   **第三层：Claude语义判断**（最慢但最准确，可选）\n   ```javascript\n   // 对于高相似度(0.6-0.75)的题目，用Claude进行最终判断\n   const claudePrompt = `\n   请判断以下两道题目是否本质相同（只是措辞不同）：\n\n   题目1：${newQuestion.content}\n   题目2：${existingQuestion.content}\n\n   只回答：相同 或 不同\n   `;\n\n   const result = await callClaude(claudePrompt);\n   if (result.includes('相同')) {\n       // 跳过此题\n   }\n   ```\n\n   **重复度控制策略**：\n   - `avoid`（完全避免）：通过所有三层检测的题目才保留\n   - `allow_few`（允许少量）：第二层检测到相似时，20%概率保留\n   - `unlimited`（不限制）：只使用第一层哈希精确匹配\n\n5. **插入数据库**：\n   ```javascript\n   // 插入试卷记录\n   INSERT INTO quizzes (quiz_id, topic, topic_detail, difficulty, question_count, created_at, status)\n   VALUES (quiz_id, topic, topic_detail, difficulty, question_count, datetime('now'), 'created');\n\n   // 插入题目记录（循环）\n   for each question:\n       INSERT INTO questions (quiz_id, question_number, question_type, content, options, correct_answer, score, knowledge_points, explanation, source_type, source_url, source_name)\n       VALUES (...);\n   ```\n\n6. **动态渲染准备**：\n   - 试卷页面将通过 `/quiz/:quiz_id` 动态渲染\n   - 不需要生成静态 `quiz.html` 文件\n\n7. **启动HTTP服务器**：\n   - 端口：3457\n   - 工作目录：`~/.skill-forge/`\n   - 重启逻辑：检查端口占用 → 停止旧服务器 → 启动新服务器\n\n8. **打开浏览器**：\n   ```bash\n   # macOS\n   open \"http://localhost:3457/quiz/<quiz_id>\"\n   # Linux\n   xdg-open \"http://localhost:3457/quiz/<quiz_id>\"\n   # Windows\n   Start-Process \"http://localhost:3457/quiz/<quiz_id>\"\n   ```\n\n### 3️⃣ 答题与提交流程\n\n```\n用户答题 → 前端暂存 → 点击提交 → 发送到服务器 → AI评分 → 保存数据库 → 生成成绩页 → 返回结果\n```\n\n**详细步骤**：\n\n1. **前端状态管理**（quiz-engine.js）：\n   ```javascript\n   const quizState = {\n       quizId: '',\n       answers: {},        // { questionNumber: userAnswer }\n       startTime: Date.now(),\n       aiRequests: new Map()  // { questionNumber: { status, response } }\n   };\n   ```\n\n2. **自动保存**（每30秒）：\n   ```javascript\n   localStorage.setItem(`quiz_${quizId}_draft`, JSON.stringify(quizState));\n   ```\n\n3. **提交请求**：\n   ```http\n   POST /submit-quiz\n   Content-Type: application/json\n\n   {\n       \"quiz_id\": \"...\",\n       \"answers\": { \"1\": \"A\", \"2\": \"...\", ... },\n       \"time_spent\": 1234\n   }\n   ```\n\n4. **服务器端评分**：\n   - 从数据库读取题目和正确答案\n   - 对于选择题：直接比对\n   - 对于问答题/代码题：调用AI评分\n   ```javascript\n   const aiPrompt = `\n   请为以下答案打分（0-${question.score}分）：\n\n   题目：${question.content}\n   标准答案：${question.correct_answer}\n   用户答案：${userAnswer}\n\n   输出JSON格式：\n   {\n       \"score\": 数字,\n       \"feedback\": \"详细反馈\",\n       \"is_correct\": true/false\n   }\n   `;\n   ```\n\n5. **保存到数据库**：\n   ```javascript\n   // 生成submission_id\n   const submission_id = `${quiz_id}_${timestamp}`;\n\n   // 插入提交记录\n   INSERT INTO submissions (submission_id, quiz_id, submitted_at, total_score, obtained_score, time_spent, pass_status)\n   VALUES (...);\n\n   // 插入答案记录\n   for each answer:\n       INSERT INTO answers (submission_id, question_id, user_answer, is_correct, score_obtained, ai_feedback)\n       VALUES (...);\n\n   // 更新试卷状态\n   UPDATE quizzes SET status = 'completed' WHERE quiz_id = ?;\n   ```\n\n6. **跳转成绩页**：\n   - URL：`http://localhost:3457/result/<quiz_id>?submission_id=<submission_id>`\n   - 内容：服务器端动态渲染的总分、得分、正确率、逐题分析、错题汇总\n\n### 4️⃣ AI提问流程（异步状态管理）\n\n```\n用户点击\"提问\" → 打开对话框 → 输入问题 → 发送请求 → 显示加载状态 → 接收响应 → 更新UI → 保存记录\n```\n\n**详细步骤**：\n\n1. **前端状态管理**：\n   ```javascript\n   const aiState = {\n       [questionNumber]: {\n           status: 'idle',  // idle/loading/success/error\n           query: '',\n           response: '',\n           error: null,\n           timestamp: null\n       }\n   };\n   ```\n\n2. **发送请求**：\n   ```http\n   POST /ask-ai\n   Content-Type: application/json\n\n   {\n       \"quiz_id\": \"...\",\n       \"question_number\": 1,\n       \"user_query\": \"这道题的解题思路是什么？\"\n   }\n   ```\n\n3. **服务器端处理**（异步）：\n   ```javascript\n   // 从数据库获取题目信息\n   const question = await db.getQuestion(quiz_id, question_number);\n\n   // 调用Claude CLI\n   const claudeProcess = spawn('claude', [\n       '--print',\n       '--model', 'claude-sonnet-4-20250514'\n   ]);\n\n   const aiPrompt = `\n   你是一位耐心的导师，学生正在做关于\"${quizTopic}\"的测验。\n\n   题目：${question.content}\n   ${question.options ? `选项：${question.options}` : ''}\n   知识点：${question.knowledge_points}\n\n   学生提问：${user_query}\n\n   请用清晰易懂的语言回答，注意：\n   1. 不要直接给出答案\n   2. 引导学生思考\n   3. 提供相关知识点解释\n   4. 举例说明（如果适用）\n\n   回答格式为HTML片段（不需要完整HTML结构）：\n   `;\n\n   // 120秒超时\n   setTimeout(() => claudeProcess.kill(), 120000);\n   ```\n\n4. **前端状态更新**：\n   ```javascript\n   // 加载中\n   aiState[questionNumber].status = 'loading';\n   showLoadingModal('AI正在思考中...');\n\n   // 成功\n   aiState[questionNumber] = {\n       status: 'success',\n       response: aiResponse,\n       timestamp: Date.now()\n   };\n   hideLoadingModal();\n   showAIResponse(aiResponse);\n\n   // 失败\n   aiState[questionNumber] = {\n       status: 'error',\n       error: errorMessage,\n       timestamp: Date.now()\n   };\n   showError(errorMessage);\n   ```\n\n5. **保存对话记录**：\n   ```javascript\n   INSERT INTO ai_interactions (quiz_id, question_number, user_query, ai_response, created_at)\n   VALUES (?, ?, ?, ?, ?);\n   ```\n\n### 5️⃣ 历史查询流程\n\n**功能**：查看所有测验历史、错题分析、学习进度\n\n```\n用户请求历史 → 查询数据库 → 生成统计数据 → 生成HTML报告 → 打开浏览器\n```\n\n**详细步骤**：\n\n1. **查询所有试卷**：\n   ```sql\n   SELECT q.*, s.obtained_score, s.total_score, s.submitted_at\n   FROM quizzes q\n   LEFT JOIN submissions s ON q.quiz_id = s.quiz_id\n   ORDER BY q.created_at DESC;\n   ```\n\n2. **统计数据**：\n   - 总测验次数\n   - 平均分数\n   - 知识点掌握情况（从questions和answers表联合查询）\n   - 错题数量\n\n3. **生成历史报告HTML**：\n   - 文件：`~/.skill-forge/history/report_<timestamp>.html`\n   - 内容：时间轴、成绩曲线、知识点雷达图、错题本\n\n4. **打开浏览器**：\n   ```bash\n   open \"http://localhost:3457/history/report_<timestamp>.html\"\n   ```\n\n### 6️⃣ AI学习计划生成流程\n\n**功能**：测验完成后，基于薄弱知识点生成个性化学习计划，并对接 deep-learning skill 自动搜集学习资料\n\n**学习闭环架构**：\n```\n测验 → 发现薄弱点 → AI生成学习计划 → 搜集资料 → 学习提升 → 再次测验\n```\n\n**完整流程**：\n\n```\n用户点击\"生成学习计划\" → 分析薄弱点 → AI深度分析 → 生成定制提示词 → 用户复制提示词 → 调用deep-learning skill\n```\n\n**详细步骤**：\n\n1. **薄弱知识点自动分析**（前端 JavaScript）：\n   ```javascript\n   // 根据测验结果计算知识点掌握率\n   const knowledgeStats = {};\n   answers.forEach(answer => {\n       answer.knowledge_points.forEach(kp => {\n           knowledgeStats[kp] = {\n               correct: correctCount,\n               total: totalCount,\n               percent: (correctCount / totalCount * 100)\n           };\n       });\n   });\n\n   // 分级分类\n   const critical = [];   // 掌握率 < 60% - 急需加强\n   const moderate = [];   // 掌握率 60-80% - 需要巩固\n   const good = [];       // 掌握率 >= 80% - 良好\n   ```\n\n2. **发送AI分析请求**：\n   ```http\n   POST /api/generate-ai-learning-plan\n   Content-Type: application/json\n\n   {\n       \"submission_id\": \"2026-01-11T14-30-45_javascript-basics_2026-01-11T15-45-12\"\n   }\n   ```\n\n3. **服务器端AI深度分析**（`server.js` 的 `generateAILearningPlan()`）：\n\n   **收集数据**：\n   ```javascript\n   // 获取完整测验数据\n   const submission = await db.getSubmission(submission_id);\n   const quiz = await db.getQuiz(submission.quiz_id);\n   const questions = await db.getQuestions(submission.quiz_id);\n   const answers = await db.getAnswers(submission_id);\n\n   // 统计薄弱知识点\n   const knowledgeStats = { /* ... */ };\n\n   // 收集错题详情（最多5道）\n   const wrongAnswers = answers.filter(a => !a.is_correct).slice(0, 5);\n   const wrongDetails = wrongAnswers.map(answer => ({\n       question_number, question_type, content, options,\n       user_answer, correct_answer, knowledge_points, ai_feedback\n   }));\n   ```\n\n   **构建AI提示词**（发送给Claude）：\n   ```javascript\n   const aiPrompt = `你是一位专业的学习规划师。请分析以下测验结果，生成个性化的学习计划。\n\n## 测验信息\n- 主题：${quiz.topic}\n- 难度：${quiz.difficulty}\n- 得分：${obtained_score}/${total_score}（${percentage}%）\n\n## 薄弱知识点统计\n### 急需加强（掌握率 < 60%）\n${critical.map(kp => `- ${kp.name}：${kp.percent}%（${kp.correct}/${kp.total}题正确）`).join('\\n')}\n\n### 需要巩固（掌握率 60-80%）\n${moderate.map(kp => `- ${kp.name}：${kp.percent}%（${kp.correct}/${kp.total}题正确）`).join('\\n')}\n\n## 错题详情分析\n${wrongDetails.map(wd => `\n### 错题：${wd.question_type}\n**题目**：${wd.content}\n**你的答案**：${wd.user_answer}\n**正确答案**：${wd.correct_answer}\n**知识点**：${wd.knowledge_points.join('、')}\n**AI反馈**：${wd.ai_feedback}\n`).join('\\n')}\n\n## 请你完成以下任务\n\n### 1. 错误原因分析\n分析用户在这些错题上犯错的根本原因（不是表面原因）。例如：\n- 是概念理解不清？\n- 是知识点混淆？\n- 是粗心大意？\n- 是缺乏实践经验？\n\n### 2. 学习范围判断\n基于测验结果，判断用户应该选择的学习范围：\n- 入门级：需要系统性学习基础\n- 进阶级：有一定基础但需要深入\n- 专家级：基础扎实，冲刺高级内容\n\n### 3. 生成 Deep Learning Skill 提示词\n生成一个完整的、可以直接使用的提示词，用于调用 deep-learning skill。\n\n**提示词格式要求**：\n\\`\\`\\`\n帮我搜集关于「{主题}」的学习资料\n\n📊 我刚完成了一次测验，以下是我的薄弱知识点分析：\n\n{薄弱点列表}\n\n📋 AI 分析：\n{错误原因分析}\n\n📚 请为我定制学习资料：\n1. 学习主题：{主题}\n2. 学习范围：{范围}（{原因}）\n3. 重点关注：{知识点列表}\n4. 学习偏好：\n   • 语言：中英文都可以，优先权威资源\n   • 需要实战项目和代码示例\n   • 重点关注：{资源类型建议}\n   • 生成结构化的学习路径和 HTML 学习指南\n\\`\\`\\`\n\n### 4. 学习建议\n给出3-5条具体的学习建议，包括：\n- 应该先学什么，后学什么\n- 推荐的学习方法\n- 避免的常见误区\n\n## 输出格式（JSON）\n请严格按照以下JSON格式输出（不要包含任何其他文字）：\n\n\\`\\`\\`json\n{\n    \"analysis\": {\n        \"errorReasons\": [\"原因1\", \"原因2\", \"原因3\"],\n        \"learningScope\": \"入门级/进阶级/专家级\",\n        \"scopeReason\": \"为什么选择这个范围的详细解释\"\n    },\n    \"deepLearningPrompt\": \"完整的提示词文本\",\n    \"suggestions\": [\n        \"建议1\",\n        \"建议2\",\n        \"建议3\"\n    ],\n    \"focusAreas\": [\"重点领域1\", \"重点领域2\"],\n    \"resourceTypes\": [\"books\", \"tutorials\", \"papers\", \"projects\"]\n}\n\\`\\`\\`\n   `;\n\n   // 调用 Claude CLI\n   const claudeProcess = spawn(CLAUDE_CLI, [\n       '--print',\n       '--model', AI_MODEL\n   ], {\n       stdio: ['pipe', 'pipe', 'pipe'],\n       shell: true\n   });\n\n   // 60秒超时\n   setTimeout(() => claudeProcess.kill(), 60000);\n\n   // 解析JSON响应\n   const result = JSON.parse(output);\n   return result;\n   ```\n\n4. **前端显示学习计划**（模态框）：\n\n   **加载动画**：\n   ```javascript\n   showLoadingModal('🤖 AI 正在分析你的测验结果\\n分析错题原因，生成个性化学习计划...\\n这可能需要 30-60 秒');\n   ```\n\n   **模态框内容**：\n   ```html\n   <div class=\"learning-plan-modal\">\n       <h2>📚 个性化学习计划</h2>\n\n       <!-- 薄弱知识点分析 -->\n       <section class=\"weak-points\">\n           <h3>📊 薄弱知识点分析</h3>\n           <div class=\"critical\">\n               🔴 急需加强（3个知识点）\n               - 闭包 (40%)\n               - Promise (50%)\n               - 原型链 (55%)\n           </div>\n           <div class=\"moderate\">\n               🟡 需要巩固（2个知识点）\n               - 异步编程 (70%)\n               - this指向 (75%)\n           </div>\n       </section>\n\n       <!-- AI 错误原因分析 -->\n       <section class=\"ai-analysis\">\n           <h3>🤖 AI 错误原因分析</h3>\n           <ul>\n               <li>对闭包的作用域链理解不够深入</li>\n               <li>Promise的错误处理机制掌握不足</li>\n               <li>原型继承与原型链的区别混淆</li>\n           </ul>\n           <div class=\"learning-scope\">\n               <strong>📖 学习范围建议：</strong> 进阶级\n               <p>你已经具备JavaScript基础，但需要深入理解高级特性...</p>\n           </div>\n       </section>\n\n       <!-- 学习建议 -->\n       <section class=\"suggestions\">\n           <h3>💡 学习建议</h3>\n           <ol>\n               <li>先系统学习作用域和闭包原理，再进入异步编程</li>\n               <li>通过实际项目练习Promise和async/await</li>\n               <li>用可视化工具理解原型链机制</li>\n           </ol>\n       </section>\n\n       <!-- Deep Learning 提示词 -->\n       <section class=\"prompt-section\">\n           <p><strong>📚 下一步操作：</strong>\n           AI已为你生成个性化学习提示词。复制后在Claude Code中粘贴，即可自动搜集针对性学习资料。</p>\n\n           <textarea id=\"learning-prompt\" readonly>\n帮我搜集关于「JavaScript高级特性」的学习资料\n\n📊 我刚完成了一次测验，以下是我的薄弱知识点分析：\n🔴 急需加强：闭包(40%)、Promise(50%)、原型链(55%)\n🟡 需要巩固：异步编程(70%)、this指向(75%)\n\n📋 AI 分析：\n- 对闭包的作用域链理解不够深入\n- Promise的错误处理机制掌握不足\n- 原型继承与原型链的区别混淆\n\n📚 请为我定制学习资料：\n1. 学习主题：JavaScript高级特性（闭包、Promise、原型链）\n2. 学习范围：进阶级（有基础但需深入）\n3. 重点关注：闭包、Promise、原型链、异步编程\n4. 学习偏好：\n   • 语言：中英文都可以，优先权威资源\n   • 需要实战项目和代码示例\n   • 重点关注：在线教程、实战项目、可视化工具\n   • 生成结构化的学习路径和 HTML 学习指南\n           </textarea>\n\n           <button onclick=\"copyPrompt()\">📋 复制</button>\n       </section>\n\n       <footer>\n           <button onclick=\"closeModal()\">关闭</button>\n           <button onclick=\"copyAndClose()\">复制并关闭 ✓</button>\n       </footer>\n   </div>\n   ```\n\n5. **用户操作流程**：\n   ```\n   1. 用户点击\"复制\"按钮\n   2. 提示词自动复制到剪贴板\n   3. 用户在Claude Code中粘贴\n   4. deep-learning skill自动触发\n   5. 系统搜集针对性学习资料：\n      - 搜索权威书籍（Amazon、O'Reilly）\n      - 查找优质教程（MDN、JavaScript.info）\n      - 收集经典博客（2ality、Axel Rauschmayer）\n      - 下载相关论文（如有）\n      - 生成HTML学习指南\n   6. 用户开始学习\n   7. 学习完成后，再次创建测验验证提升\n   ```\n\n**关键技术特性**：\n\n- **异步处理**：AI分析需要30-60秒，显示加载动画避免用户焦虑\n- **JSON格式化**：AI输出严格的JSON，便于前端解析展示\n- **提示词模板**：生成的提示词可直接用于 deep-learning skill\n- **学习闭环**：测验 → 分析 → 学习 → 再测验，形成完整学习循环\n\n**数据库保存**（可选扩展）：\n```sql\n-- 可以添加学习计划表保存生成的计划\nCREATE TABLE IF NOT EXISTS learning_plans (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    submission_id TEXT NOT NULL,\n    analysis TEXT,              -- JSON格式的分析结果\n    prompt TEXT,                -- 生成的提示词\n    created_at TEXT NOT NULL,\n    FOREIGN KEY (submission_id) REFERENCES submissions(submission_id)\n);\n```\n\n## 🎯 工作流程总结\n\n### 用户首次使用\n\n```\n用户：/skill-forge\n\n助手：\n1. 检查 ~/.skill-forge/ 是否存在\n2. 如不存在：\n   - 创建目录结构\n   - 初始化数据库\n   - 显示欢迎信息\n3. 询问用户需求：\n   - 创建新测验\n   - 查看历史记录\n   - 继续未完成的测验\n```\n\n### 创建测验完整流程\n\n```\n1. 询问参数（主题、难度、题目数量）\n2. 生成quiz_id（时间戳_主题）\n3. 确保数据库初始化\n4. 使用AI生成题目\n5. 插入数据库（quizzes表 + questions表）\n6. 生成HTML文件\n7. 重启HTTP服务器（端口3457）\n8. 打开浏览器\n9. 告知用户测验已准备好\n```\n\n### 答题流程\n\n```\n前端：\n- 实时保存答案到localStorage\n- 每道题显示\"提问AI\"按钮\n- 提交前二次确认\n\n点击提问AI：\n- 打开模态框输入问题\n- 显示加载动画（计时器+进度条）\n- 异步调用Claude CLI\n- 显示AI回答（HTML格式，排版精美）\n- 保存对话到数据库\n\n点击提交：\n- 收集所有答案\n- 发送到服务器\n- 服务器AI评分（问答题/代码题）\n- 保存到数据库\n- 生成成绩页\n- 跳转到成绩页\n```\n\n## 🎨 HTML页面设计要求\n\n### 试卷页面（quiz.html）\n\n**布局**：\n```\n顶部栏：\n- 左侧：主题标题 + 难度标签\n- 右侧：计时器 + 进度（已答/总数）\n\n侧边栏（可折叠）：\n- 题目导航（1,2,3...）\n- 状态指示：未答（灰）、已答（蓝）、已提问AI（绿）\n\n主体区域：\n- 题目卡片（序号、分值、知识点标签）\n- 答题区域：\n  * 选择题：单选按钮\n  * 问答题：文本框（支持Markdown）\n  * 代码题：代码编辑器（Monaco Editor或简单textarea+语法高亮）\n- 操作按钮：\n  * \"💬 提问AI\"（每道题独立）\n  * \"< 上一题\" / \"下一题 >\"\n  * \"📝 标记\" / \"⏭️ 跳过\"\n\n底部栏：\n- 进度条\n- \"提交试卷\"按钮（大而醒目）\n```\n\n**样式要求**：\n- 现代简洁设计\n- 响应式布局（支持手机和桌面）\n- 颜色主题：使用渐变色（#667eea 到 #764ba2）\n- 代码块使用等宽字体和语法高亮\n- 动画效果：页面切换平滑、按钮悬停效果\n- AI对话框：模态框形式，支持滚动长内容\n\n**必须包含**：\n```html\n<div id=\"quiz-container\" data-quiz-id=\"<quiz_id>\">\n    <!-- 试卷内容 -->\n</div>\n<script src=\"/quiz-engine.js\"></script>\n```\n\n### 成绩页面（result.html）\n\n**布局**：\n```\n顶部：\n- 大标题：\"测验成绩\"\n- 总分/得分 + 正确率（大字号、醒目）\n- 通过状态（pass/fail，彩色标签）\n\n成绩概览：\n- 答题用时\n- 题型分布饼图\n- 知识点掌握雷达图\n\n逐题分析：\n- 每道题显示：\n  * 题目内容\n  * 你的答案 vs 正确答案\n  * 得分情况\n  * AI评分反馈\n  * 知识点标签\n  * 查看解析（折叠内容）\n\n错题汇总：\n- 单独列出所有错题\n- 按知识点分类\n- \"加入错题本\"按钮\n\n底部操作：\n- \"重新测验\"\n- \"查看历史记录\"\n- \"导出成绩单（PDF）\"\n```\n\n### 历史记录页面（history/report.html）\n\n**布局**：\n```\n顶部统计：\n- 总测验次数\n- 平均分数\n- 总答题时间\n- 知识点掌握数量\n\n时间轴：\n- 按时间倒序显示所有测验\n- 每条记录：主题、日期、得分、查看详情\n\n学习分析：\n- 成绩趋势图（折线图）\n- 知识点掌握雷达图\n- 错题分布饼图\n\n错题本：\n- 所有错题列表\n- 支持筛选（知识点、日期）\n- \"针对性练习\"按钮\n```\n\n## 🚨 注意事项\n\n### 数据安全\n1. **数据隔离**：每个quiz_id必须唯一，使用时间戳确保\n2. **原子操作**：数据库写入使用事务，确保一致性\n3. **备份机制**：每次提交后自动备份到 `~/.skill-forge/history/`\n\n### 异步状态管理\n1. **AI请求超时**：120秒超时，显示友好提示\n2. **状态同步**：前端状态与数据库保持同步\n3. **加载指示**：所有异步操作显示加载动画\n4. **错误恢复**：网络错误时从localStorage恢复\n\n### 性能优化\n1. **数据库索引**：quiz_id等关键字段建立索引\n2. **懒加载**：历史记录页面分页加载\n3. **缓存策略**：静态资源浏览器缓存\n\n### 用户体验\n1. **友好提示**：每个操作都有明确反馈\n2. **快捷键**：支持键盘导航（N下一题、P上一题）\n3. **自动保存**：防止意外关闭丢失数据\n4. **排版优化**：AI回答使用Markdown渲染，代码高亮\n\n## 📝 示例对话\n\n**用户**：/skill-forge\n\n**助手**：\n欢迎使用 Skill Forge！🎓\n\n我将帮你通过测验快速掌握技能。请选择操作：\n1. 📝 创建新测验\n2. 📊 查看历史记录\n3. 🔄 继续未完成的测验\n\n请回复数字或直接说明需求。\n\n---\n\n**用户**：创建新测验\n\n**助手**：\n好的！请告诉我以下信息：\n\n1. **学习主题**：你想测验哪个领域的知识？\n   - 示例：JavaScript基础、数据结构与算法、React Hooks、Python爬虫等\n\n2. **主题详细说明**（可选）：\n   - 示例：重点关注ES6+特性、闭包、异步编程\n\n3. **难度等级**：\n   - beginner（初级）：基础概念和简单应用\n   - intermediate（中级）：深入理解和实践技巧\n   - advanced（高级）：复杂场景和最佳实践\n\n4. **题目数量**：建议5-20题（默认10题）\n\n5. **题型偏好**（可选）：\n   - 选择题、问答题、代码题的比例\n   - 示例：50%选择题，30%问答题，20%代码题\n\n请回答以上问题，我将为你生成定制化测验！\n\n---\n\n**用户**：主题是JavaScript基础，中级难度，10道题，一半选择题一半问答题\n\n**助手**：\n收到！正在为你生成测验...\n\n✓ 数据库已初始化\n✓ 正在生成10道题目（5道选择题 + 5道问答题）\n✓ 题目已保存到数据库\n✓ HTML文件已生成\n✓ 服务器已启动（http://localhost:3457）\n✓ 浏览器已打开\n\n测验ID：`2026-01-11T14-30-45_javascript-basics`\n存储路径：`~/.skill-forge/quizzes/2026-01-11T14-30-45_javascript-basics/`\n\n祝你测验顺利！记得使用每道题的\"💬 提问AI\"功能获取提示。"
              }
            ]
          }
        ]
      }
    }
  ]
}