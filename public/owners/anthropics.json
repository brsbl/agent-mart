{
  "owner": {
    "id": "anthropics",
    "display_name": "Anthropic",
    "type": "Organization",
    "avatar_url": "https://avatars.githubusercontent.com/u/76263028?v=4",
    "url": "https://github.com/anthropics",
    "bio": null,
    "stats": {
      "total_repos": 1,
      "total_plugins": 13,
      "total_commands": 15,
      "total_skills": 10,
      "total_stars": 55310,
      "total_forks": 4002
    }
  },
  "repos": [
    {
      "full_name": "anthropics/claude-code",
      "url": "https://github.com/anthropics/claude-code",
      "description": "Claude Code is an agentic coding tool that lives in your terminal, understands your codebase, and helps you code faster by executing routine tasks, explaining complex code, and handling git workflows - all through natural language commands.",
      "homepage": "https://code.claude.com/docs/en/overview",
      "signals": {
        "stars": 55310,
        "forks": 4002,
        "pushed_at": "2026-01-11T00:28:28Z",
        "created_at": "2025-02-22T17:41:21Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 5468
        },
        {
          "path": ".claude",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/commands/commit-push-pr.md",
          "type": "blob",
          "size": 795
        },
        {
          "path": ".claude/commands/dedupe.md",
          "type": "blob",
          "size": 1444
        },
        {
          "path": ".claude/commands/oncall-triage.md",
          "type": "blob",
          "size": 2178
        },
        {
          "path": ".devcontainer",
          "type": "tree",
          "size": null
        },
        {
          "path": ".devcontainer/Dockerfile",
          "type": "blob",
          "size": 2507
        },
        {
          "path": ".devcontainer/devcontainer.json",
          "type": "blob",
          "size": 1662
        },
        {
          "path": ".devcontainer/init-firewall.sh",
          "type": "blob",
          "size": 4578
        },
        {
          "path": ".gitattributes",
          "type": "blob",
          "size": 35
        },
        {
          "path": ".github",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/ISSUE_TEMPLATE",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/ISSUE_TEMPLATE/bug_report.yml",
          "type": "blob",
          "size": 5851
        },
        {
          "path": ".github/ISSUE_TEMPLATE/config.yml",
          "type": "blob",
          "size": 619
        },
        {
          "path": ".github/ISSUE_TEMPLATE/documentation.yml",
          "type": "blob",
          "size": 3489
        },
        {
          "path": ".github/ISSUE_TEMPLATE/feature_request.yml",
          "type": "blob",
          "size": 4208
        },
        {
          "path": ".github/ISSUE_TEMPLATE/model_behavior.yml",
          "type": "blob",
          "size": 6952
        },
        {
          "path": ".github/workflows",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/workflows/auto-close-duplicates.yml",
          "type": "blob",
          "size": 847
        },
        {
          "path": ".github/workflows/backfill-duplicate-comments.yml",
          "type": "blob",
          "size": 1143
        },
        {
          "path": ".github/workflows/claude-dedupe-issues.yml",
          "type": "blob",
          "size": 2862
        },
        {
          "path": ".github/workflows/claude-issue-triage.yml",
          "type": "blob",
          "size": 4829
        },
        {
          "path": ".github/workflows/claude.yml",
          "type": "blob",
          "size": 1206
        },
        {
          "path": ".github/workflows/issue-opened-dispatch.yml",
          "type": "blob",
          "size": 738
        },
        {
          "path": ".github/workflows/lock-closed-issues.yml",
          "type": "blob",
          "size": 3121
        },
        {
          "path": ".github/workflows/log-issue-events.yml",
          "type": "blob",
          "size": 1403
        },
        {
          "path": ".github/workflows/oncall-triage.yml",
          "type": "blob",
          "size": 5743
        },
        {
          "path": ".github/workflows/remove-autoclose-label.yml",
          "type": "blob",
          "size": 1447
        },
        {
          "path": ".github/workflows/stale-issue-manager.yml",
          "type": "blob",
          "size": 6467
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 11
        },
        {
          "path": ".vscode",
          "type": "tree",
          "size": null
        },
        {
          "path": ".vscode/extensions.json",
          "type": "blob",
          "size": 155
        },
        {
          "path": "CHANGELOG.md",
          "type": "blob",
          "size": 65544
        },
        {
          "path": "LICENSE.md",
          "type": "blob",
          "size": 150
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 2542
        },
        {
          "path": "SECURITY.md",
          "type": "blob",
          "size": 693
        },
        {
          "path": "Script",
          "type": "tree",
          "size": null
        },
        {
          "path": "Script/run_devcontainer_claude_code.ps1",
          "type": "blob",
          "size": 5319
        },
        {
          "path": "demo.gif",
          "type": "blob",
          "size": 11002760
        },
        {
          "path": "examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "examples/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "examples/hooks/bash_command_validator_example.py",
          "type": "blob",
          "size": 2078
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/README.md",
          "type": "blob",
          "size": 6530
        },
        {
          "path": "plugins/agent-sdk-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 190
        },
        {
          "path": "plugins/agent-sdk-dev/README.md",
          "type": "blob",
          "size": 6397
        },
        {
          "path": "plugins/agent-sdk-dev/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/agents/agent-sdk-verifier-py.md",
          "type": "blob",
          "size": 5206
        },
        {
          "path": "plugins/agent-sdk-dev/agents/agent-sdk-verifier-ts.md",
          "type": "blob",
          "size": 5419
        },
        {
          "path": "plugins/agent-sdk-dev/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/commands/new-sdk-app.md",
          "type": "blob",
          "size": 7846
        },
        {
          "path": "plugins/claude-opus-4-5-migration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-opus-4-5-migration/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-opus-4-5-migration/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 234
        },
        {
          "path": "plugins/claude-opus-4-5-migration/README.md",
          "type": "blob",
          "size": 707
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/SKILL.md",
          "type": "blob",
          "size": 4746
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/references/effort.md",
          "type": "blob",
          "size": 1728
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/references/prompt-snippets.md",
          "type": "blob",
          "size": 6139
        },
        {
          "path": "plugins/code-review",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-review/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-review/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 257
        },
        {
          "path": "plugins/code-review/README.md",
          "type": "blob",
          "size": 7703
        },
        {
          "path": "plugins/code-review/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-review/commands/code-review.md",
          "type": "blob",
          "size": 6570
        },
        {
          "path": "plugins/commit-commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/commit-commands/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/commit-commands/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 258
        },
        {
          "path": "plugins/commit-commands/README.md",
          "type": "blob",
          "size": 5908
        },
        {
          "path": "plugins/commit-commands/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/commit-commands/commands/clean_gone.md",
          "type": "blob",
          "size": 1865
        },
        {
          "path": "plugins/commit-commands/commands/commit-push-pr.md",
          "type": "blob",
          "size": 796
        },
        {
          "path": "plugins/commit-commands/commands/commit.md",
          "type": "blob",
          "size": 624
        },
        {
          "path": "plugins/explanatory-output-style",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/explanatory-output-style/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/explanatory-output-style/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 293
        },
        {
          "path": "plugins/explanatory-output-style/README.md",
          "type": "blob",
          "size": 2470
        },
        {
          "path": "plugins/explanatory-output-style/hooks-handlers",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/explanatory-output-style/hooks-handlers/session-start.sh",
          "type": "blob",
          "size": 1468
        },
        {
          "path": "plugins/explanatory-output-style/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/explanatory-output-style/hooks/hooks.json",
          "type": "blob",
          "size": 314
        },
        {
          "path": "plugins/feature-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 291
        },
        {
          "path": "plugins/feature-dev/README.md",
          "type": "blob",
          "size": 11697
        },
        {
          "path": "plugins/feature-dev/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/agents/code-architect.md",
          "type": "blob",
          "size": 2259
        },
        {
          "path": "plugins/feature-dev/agents/code-explorer.md",
          "type": "blob",
          "size": 2115
        },
        {
          "path": "plugins/feature-dev/agents/code-reviewer.md",
          "type": "blob",
          "size": 2994
        },
        {
          "path": "plugins/feature-dev/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/commands/feature-dev.md",
          "type": "blob",
          "size": 5097
        },
        {
          "path": "plugins/frontend-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 256
        },
        {
          "path": "plugins/frontend-design/README.md",
          "type": "blob",
          "size": 977
        },
        {
          "path": "plugins/frontend-design/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/skills/frontend-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/skills/frontend-design/SKILL.md",
          "type": "blob",
          "size": 4274
        },
        {
          "path": "plugins/hookify",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 234
        },
        {
          "path": "plugins/hookify/.gitignore",
          "type": "blob",
          "size": 291
        },
        {
          "path": "plugins/hookify/README.md",
          "type": "blob",
          "size": 7710
        },
        {
          "path": "plugins/hookify/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/agents/conversation-analyzer.md",
          "type": "blob",
          "size": 5478
        },
        {
          "path": "plugins/hookify/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/commands/configure.md",
          "type": "blob",
          "size": 2863
        },
        {
          "path": "plugins/hookify/commands/help.md",
          "type": "blob",
          "size": 4624
        },
        {
          "path": "plugins/hookify/commands/hookify.md",
          "type": "blob",
          "size": 7667
        },
        {
          "path": "plugins/hookify/commands/list.md",
          "type": "blob",
          "size": 2020
        },
        {
          "path": "plugins/hookify/core",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/core/__init__.py",
          "type": "blob",
          "size": null
        },
        {
          "path": "plugins/hookify/core/config_loader.py",
          "type": "blob",
          "size": 9690
        },
        {
          "path": "plugins/hookify/core/rule_engine.py",
          "type": "blob",
          "size": 10727
        },
        {
          "path": "plugins/hookify/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/examples/console-log-warning.local.md",
          "type": "blob",
          "size": 315
        },
        {
          "path": "plugins/hookify/examples/dangerous-rm.local.md",
          "type": "blob",
          "size": 278
        },
        {
          "path": "plugins/hookify/examples/require-tests-stop.local.md",
          "type": "blob",
          "size": 500
        },
        {
          "path": "plugins/hookify/examples/sensitive-files-warning.local.md",
          "type": "blob",
          "size": 421
        },
        {
          "path": "plugins/hookify/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/hooks/__init__.py",
          "type": "blob",
          "size": null
        },
        {
          "path": "plugins/hookify/hooks/hooks.json",
          "type": "blob",
          "size": 1020
        },
        {
          "path": "plugins/hookify/hooks/posttooluse.py",
          "type": "blob",
          "size": 1776
        },
        {
          "path": "plugins/hookify/hooks/pretooluse.py",
          "type": "blob",
          "size": 2205
        },
        {
          "path": "plugins/hookify/hooks/stop.py",
          "type": "blob",
          "size": 1557
        },
        {
          "path": "plugins/hookify/hooks/userpromptsubmit.py",
          "type": "blob",
          "size": 1543
        },
        {
          "path": "plugins/hookify/matchers",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/matchers/__init__.py",
          "type": "blob",
          "size": null
        },
        {
          "path": "plugins/hookify/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/skills/writing-rules",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/skills/writing-rules/SKILL.md",
          "type": "blob",
          "size": 8423
        },
        {
          "path": "plugins/hookify/utils",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/utils/__init__.py",
          "type": "blob",
          "size": null
        },
        {
          "path": "plugins/learning-output-style",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/learning-output-style/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/learning-output-style/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 296
        },
        {
          "path": "plugins/learning-output-style/README.md",
          "type": "blob",
          "size": 4687
        },
        {
          "path": "plugins/learning-output-style/hooks-handlers",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/learning-output-style/hooks-handlers/session-start.sh",
          "type": "blob",
          "size": 3564
        },
        {
          "path": "plugins/learning-output-style/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/learning-output-style/hooks/hooks.json",
          "type": "blob",
          "size": 311
        },
        {
          "path": "plugins/plugin-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/README.md",
          "type": "blob",
          "size": 14592
        },
        {
          "path": "plugins/plugin-dev/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/agents/agent-creator.md",
          "type": "blob",
          "size": 7437
        },
        {
          "path": "plugins/plugin-dev/agents/plugin-validator.md",
          "type": "blob",
          "size": 6623
        },
        {
          "path": "plugins/plugin-dev/agents/skill-reviewer.md",
          "type": "blob",
          "size": 6079
        },
        {
          "path": "plugins/plugin-dev/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/commands/create-plugin.md",
          "type": "blob",
          "size": 14950
        },
        {
          "path": "plugins/plugin-dev/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/SKILL.md",
          "type": "blob",
          "size": 10430
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/examples/agent-creation-prompt.md",
          "type": "blob",
          "size": 9390
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/examples/complete-agent-examples.md",
          "type": "blob",
          "size": 14117
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references/agent-creation-system-prompt.md",
          "type": "blob",
          "size": 8879
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references/system-prompt-design.md",
          "type": "blob",
          "size": 9998
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references/triggering-examples.md",
          "type": "blob",
          "size": 11613
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/scripts/validate-agent.sh",
          "type": "blob",
          "size": 5796
        },
        {
          "path": "plugins/plugin-dev/skills/command-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/README.md",
          "type": "blob",
          "size": 7651
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/SKILL.md",
          "type": "blob",
          "size": 18941
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/examples/plugin-commands.md",
          "type": "blob",
          "size": 13989
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/examples/simple-commands.md",
          "type": "blob",
          "size": 8675
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/advanced-workflows.md",
          "type": "blob",
          "size": 13618
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/documentation-patterns.md",
          "type": "blob",
          "size": 14971
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/frontmatter-reference.md",
          "type": "blob",
          "size": 9162
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/interactive-commands.md",
          "type": "blob",
          "size": 20980
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/marketplace-considerations.md",
          "type": "blob",
          "size": 16437
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/plugin-features-reference.md",
          "type": "blob",
          "size": 14622
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/testing-strategies.md",
          "type": "blob",
          "size": 14803
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/SKILL.md",
          "type": "blob",
          "size": 16246
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/examples/load-context.sh",
          "type": "blob",
          "size": 1690
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/examples/validate-bash.sh",
          "type": "blob",
          "size": 1304
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/examples/validate-write.sh",
          "type": "blob",
          "size": 1222
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references/advanced.md",
          "type": "blob",
          "size": 10148
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references/migration.md",
          "type": "blob",
          "size": 8299
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references/patterns.md",
          "type": "blob",
          "size": 7144
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/scripts/README.md",
          "type": "blob",
          "size": 3677
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/scripts/hook-linter.sh",
          "type": "blob",
          "size": 4200
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/scripts/test-hook.sh",
          "type": "blob",
          "size": 5336
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/scripts/validate-hook-schema.sh",
          "type": "blob",
          "size": 5081
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/SKILL.md",
          "type": "blob",
          "size": 12519
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/examples/http-server.json",
          "type": "blob",
          "size": 502
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/examples/sse-server.json",
          "type": "blob",
          "size": 413
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/examples/stdio-server.json",
          "type": "blob",
          "size": 686
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references/authentication.md",
          "type": "blob",
          "size": 10196
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references/server-types.md",
          "type": "blob",
          "size": 10613
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references/tool-usage.md",
          "type": "blob",
          "size": 11674
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/SKILL.md",
          "type": "blob",
          "size": 12101
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/examples/create-settings-command.md",
          "type": "blob",
          "size": 2177
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/examples/example-settings.md",
          "type": "blob",
          "size": 2930
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/examples/read-settings-hook.sh",
          "type": "blob",
          "size": 2205
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/references/parsing-techniques.md",
          "type": "blob",
          "size": 11513
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/references/real-world-examples.md",
          "type": "blob",
          "size": 9496
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/scripts/parse-frontmatter.sh",
          "type": "blob",
          "size": 1269
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/scripts/validate-settings.sh",
          "type": "blob",
          "size": 2712
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/README.md",
          "type": "blob",
          "size": 3210
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/SKILL.md",
          "type": "blob",
          "size": 13796
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples/advanced-plugin.md",
          "type": "blob",
          "size": 18746
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples/minimal-plugin.md",
          "type": "blob",
          "size": 1731
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples/standard-plugin.md",
          "type": "blob",
          "size": 13310
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/references/component-patterns.md",
          "type": "blob",
          "size": 12086
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/references/manifest-reference.md",
          "type": "blob",
          "size": 12061
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development/SKILL.md",
          "type": "blob",
          "size": 22827
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development/references/skill-creator-original.md",
          "type": "blob",
          "size": 11547
        },
        {
          "path": "plugins/pr-review-toolkit",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 282
        },
        {
          "path": "plugins/pr-review-toolkit/README.md",
          "type": "blob",
          "size": 7528
        },
        {
          "path": "plugins/pr-review-toolkit/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/agents/code-reviewer.md",
          "type": "blob",
          "size": 3985
        },
        {
          "path": "plugins/pr-review-toolkit/agents/code-simplifier.md",
          "type": "blob",
          "size": 5230
        },
        {
          "path": "plugins/pr-review-toolkit/agents/comment-analyzer.md",
          "type": "blob",
          "size": 5725
        },
        {
          "path": "plugins/pr-review-toolkit/agents/pr-test-analyzer.md",
          "type": "blob",
          "size": 4985
        },
        {
          "path": "plugins/pr-review-toolkit/agents/silent-failure-hunter.md",
          "type": "blob",
          "size": 7807
        },
        {
          "path": "plugins/pr-review-toolkit/agents/type-design-analyzer.md",
          "type": "blob",
          "size": 5368
        },
        {
          "path": "plugins/pr-review-toolkit/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/commands/review-pr.md",
          "type": "blob",
          "size": 4997
        },
        {
          "path": "plugins/ralph-wiggum",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-wiggum/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-wiggum/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 353
        },
        {
          "path": "plugins/ralph-wiggum/README.md",
          "type": "blob",
          "size": 5201
        },
        {
          "path": "plugins/ralph-wiggum/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-wiggum/commands/cancel-ralph.md",
          "type": "blob",
          "size": 745
        },
        {
          "path": "plugins/ralph-wiggum/commands/help.md",
          "type": "blob",
          "size": 3229
        },
        {
          "path": "plugins/ralph-wiggum/commands/ralph-loop.md",
          "type": "blob",
          "size": 923
        },
        {
          "path": "plugins/ralph-wiggum/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-wiggum/hooks/hooks.json",
          "type": "blob",
          "size": 284
        },
        {
          "path": "plugins/ralph-wiggum/hooks/stop-hook.sh",
          "type": "blob",
          "size": 6564
        },
        {
          "path": "plugins/ralph-wiggum/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-wiggum/scripts/setup-ralph-loop.sh",
          "type": "blob",
          "size": 7009
        },
        {
          "path": "plugins/security-guidance",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/security-guidance/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/security-guidance/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 306
        },
        {
          "path": "plugins/security-guidance/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/security-guidance/hooks/hooks.json",
          "type": "blob",
          "size": 382
        },
        {
          "path": "plugins/security-guidance/hooks/security_reminder_hook.py",
          "type": "blob",
          "size": 10767
        },
        {
          "path": "scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "scripts/auto-close-duplicates.ts",
          "type": "blob",
          "size": 7753
        },
        {
          "path": "scripts/backfill-duplicate-comments.ts",
          "type": "blob",
          "size": 6830
        },
        {
          "path": "scripts/comment-on-duplicates.sh",
          "type": "blob",
          "size": 2449
        }
      ],
      "marketplace": {
        "name": "claude-code-plugins",
        "version": "1.0.0",
        "description": "Bundled plugins for Claude Code including Agent SDK development tools, PR review toolkit, and commit workflows",
        "owner_info": {
          "name": "Anthropic",
          "email": "support@anthropic.com"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "agent-sdk-dev",
            "description": "Development kit for working with the Claude Agent SDK",
            "source": "./plugins/agent-sdk-dev",
            "category": "development",
            "version": null,
            "author": null,
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install agent-sdk-dev@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [
              {
                "name": "/new-sdk-app",
                "description": "Create and setup a new Claude Agent SDK application",
                "path": "plugins/agent-sdk-dev/commands/new-sdk-app.md",
                "frontmatter": {
                  "description": "Create and setup a new Claude Agent SDK application",
                  "argument-hint": [
                    "project-name"
                  ]
                },
                "content": "You are tasked with helping the user create a new Claude Agent SDK application. Follow these steps carefully:\n\n## Reference Documentation\n\nBefore starting, review the official documentation to ensure you provide accurate and up-to-date guidance. Use WebFetch to read these pages:\n\n1. **Start with the overview**: https://docs.claude.com/en/api/agent-sdk/overview\n2. **Based on the user's language choice, read the appropriate SDK reference**:\n   - TypeScript: https://docs.claude.com/en/api/agent-sdk/typescript\n   - Python: https://docs.claude.com/en/api/agent-sdk/python\n3. **Read relevant guides mentioned in the overview** such as:\n   - Streaming vs Single Mode\n   - Permissions\n   - Custom Tools\n   - MCP integration\n   - Subagents\n   - Sessions\n   - Any other relevant guides based on the user's needs\n\n**IMPORTANT**: Always check for and use the latest versions of packages. Use WebSearch or WebFetch to verify current versions before installation.\n\n## Gather Requirements\n\nIMPORTANT: Ask these questions one at a time. Wait for the user's response before asking the next question. This makes it easier for the user to respond.\n\nAsk the questions in this order (skip any that the user has already provided via arguments):\n\n1. **Language** (ask first): \"Would you like to use TypeScript or Python?\"\n\n   - Wait for response before continuing\n\n2. **Project name** (ask second): \"What would you like to name your project?\"\n\n   - If $ARGUMENTS is provided, use that as the project name and skip this question\n   - Wait for response before continuing\n\n3. **Agent type** (ask third, but skip if #2 was sufficiently detailed): \"What kind of agent are you building? Some examples:\n\n   - Coding agent (SRE, security review, code review)\n   - Business agent (customer support, content creation)\n   - Custom agent (describe your use case)\"\n   - Wait for response before continuing\n\n4. **Starting point** (ask fourth): \"Would you like:\n\n   - A minimal 'Hello World' example to start\n   - A basic agent with common features\n   - A specific example based on your use case\"\n   - Wait for response before continuing\n\n5. **Tooling choice** (ask fifth): Let the user know what tools you'll use, and confirm with them that these are the tools they want to use (for example, they may prefer pnpm or bun over npm). Respect the user's preferences when executing on the requirements.\n\nAfter all questions are answered, proceed to create the setup plan.\n\n## Setup Plan\n\nBased on the user's answers, create a plan that includes:\n\n1. **Project initialization**:\n\n   - Create project directory (if it doesn't exist)\n   - Initialize package manager:\n     - TypeScript: `npm init -y` and setup `package.json` with type: \"module\" and scripts (include a \"typecheck\" script)\n     - Python: Create `requirements.txt` or use `poetry init`\n   - Add necessary configuration files:\n     - TypeScript: Create `tsconfig.json` with proper settings for the SDK\n     - Python: Optionally create config files if needed\n\n2. **Check for Latest Versions**:\n\n   - BEFORE installing, use WebSearch or check npm/PyPI to find the latest version\n   - For TypeScript: Check https://www.npmjs.com/package/@anthropic-ai/claude-agent-sdk\n   - For Python: Check https://pypi.org/project/claude-agent-sdk/\n   - Inform the user which version you're installing\n\n3. **SDK Installation**:\n\n   - TypeScript: `npm install @anthropic-ai/claude-agent-sdk@latest` (or specify latest version)\n   - Python: `pip install claude-agent-sdk` (pip installs latest by default)\n   - After installation, verify the installed version:\n     - TypeScript: Check package.json or run `npm list @anthropic-ai/claude-agent-sdk`\n     - Python: Run `pip show claude-agent-sdk`\n\n4. **Create starter files**:\n\n   - TypeScript: Create an `index.ts` or `src/index.ts` with a basic query example\n   - Python: Create a `main.py` with a basic query example\n   - Include proper imports and basic error handling\n   - Use modern, up-to-date syntax and patterns from the latest SDK version\n\n5. **Environment setup**:\n\n   - Create a `.env.example` file with `ANTHROPIC_API_KEY=your_api_key_here`\n   - Add `.env` to `.gitignore`\n   - Explain how to get an API key from https://console.anthropic.com/\n\n6. **Optional: Create .claude directory structure**:\n   - Offer to create `.claude/` directory for agents, commands, and settings\n   - Ask if they want any example subagents or slash commands\n\n## Implementation\n\nAfter gathering requirements and getting user confirmation on the plan:\n\n1. Check for latest package versions using WebSearch or WebFetch\n2. Execute the setup steps\n3. Create all necessary files\n4. Install dependencies (always use latest stable versions)\n5. Verify installed versions and inform the user\n6. Create a working example based on their agent type\n7. Add helpful comments in the code explaining what each part does\n8. **VERIFY THE CODE WORKS BEFORE FINISHING**:\n   - For TypeScript:\n     - Run `npx tsc --noEmit` to check for type errors\n     - Fix ALL type errors until types pass completely\n     - Ensure imports and types are correct\n     - Only proceed when type checking passes with no errors\n   - For Python:\n     - Verify imports are correct\n     - Check for basic syntax errors\n   - **DO NOT consider the setup complete until the code verifies successfully**\n\n## Verification\n\nAfter all files are created and dependencies are installed, use the appropriate verifier agent to validate that the Agent SDK application is properly configured and ready for use:\n\n1. **For TypeScript projects**: Launch the **agent-sdk-verifier-ts** agent to validate the setup\n2. **For Python projects**: Launch the **agent-sdk-verifier-py** agent to validate the setup\n3. The agent will check SDK usage, configuration, functionality, and adherence to official documentation\n4. Review the verification report and address any issues\n\n## Getting Started Guide\n\nOnce setup is complete and verified, provide the user with:\n\n1. **Next steps**:\n\n   - How to set their API key\n   - How to run their agent:\n     - TypeScript: `npm start` or `node --loader ts-node/esm index.ts`\n     - Python: `python main.py`\n\n2. **Useful resources**:\n\n   - Link to TypeScript SDK reference: https://docs.claude.com/en/api/agent-sdk/typescript\n   - Link to Python SDK reference: https://docs.claude.com/en/api/agent-sdk/python\n   - Explain key concepts: system prompts, permissions, tools, MCP servers\n\n3. **Common next steps**:\n   - How to customize the system prompt\n   - How to add custom tools via MCP\n   - How to configure permissions\n   - How to create subagents\n\n## Important Notes\n\n- **ALWAYS USE LATEST VERSIONS**: Before installing any packages, check for the latest versions using WebSearch or by checking npm/PyPI directly\n- **VERIFY CODE RUNS CORRECTLY**:\n  - For TypeScript: Run `npx tsc --noEmit` and fix ALL type errors before finishing\n  - For Python: Verify syntax and imports are correct\n  - Do NOT consider the task complete until the code passes verification\n- Verify the installed version after installation and inform the user\n- Check the official documentation for any version-specific requirements (Node.js version, Python version, etc.)\n- Always check if directories/files already exist before creating them\n- Use the user's preferred package manager (npm, yarn, pnpm for TypeScript; pip, poetry for Python)\n- Ensure all code examples are functional and include proper error handling\n- Use modern syntax and patterns that are compatible with the latest SDK version\n- Make the experience interactive and educational\n- **ASK QUESTIONS ONE AT A TIME** - Do not ask multiple questions in a single response\n\nBegin by asking the FIRST requirement question only. Wait for the user's answer before proceeding to the next question."
              }
            ],
            "skills": []
          },
          {
            "name": "claude-opus-4-5-migration",
            "description": "Migrate your code and prompts from Sonnet 4.x and Opus 4.1 to Opus 4.5.",
            "source": "./plugins/claude-opus-4-5-migration",
            "category": "development",
            "version": "1.0.0",
            "author": {
              "name": "William Hu",
              "email": "whu@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install claude-opus-4-5-migration@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "claude-opus-4-5-migration",
                "description": "Migrate prompts and code from Claude Sonnet 4.0, Sonnet 4.5, or Opus 4.1 to Opus 4.5. Use when the user wants to update their codebase, prompts, or API calls to use Opus 4.5. Handles model string updates and prompt adjustments for known Opus 4.5 behavioral differences. Does NOT migrate Haiku 4.5.",
                "path": "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/SKILL.md",
                "frontmatter": {
                  "name": "claude-opus-4-5-migration",
                  "description": "Migrate prompts and code from Claude Sonnet 4.0, Sonnet 4.5, or Opus 4.1 to Opus 4.5. Use when the user wants to update their codebase, prompts, or API calls to use Opus 4.5. Handles model string updates and prompt adjustments for known Opus 4.5 behavioral differences. Does NOT migrate Haiku 4.5."
                },
                "content": "# Opus 4.5 Migration Guide\n\nOne-shot migration from Sonnet 4.0, Sonnet 4.5, or Opus 4.1 to Opus 4.5.\n\n## Migration Workflow\n\n1. Search codebase for model strings and API calls\n2. Update model strings to Opus 4.5 (see platform-specific strings below)\n3. Remove unsupported beta headers\n4. Add effort parameter set to `\"high\"` (see `references/effort.md`)\n5. Summarize all changes made\n6. Tell the user: \"If you encounter any issues with Opus 4.5, let me know and I can help adjust your prompts.\"\n\n## Model String Updates\n\nIdentify which platform the codebase uses, then replace model strings accordingly.\n\n### Unsupported Beta Headers\n\nRemove the `context-1m-2025-08-07` beta header if presentâ€”it is not yet supported with Opus 4.5. Leave a comment noting this:\n\n```python\n# Note: 1M context beta (context-1m-2025-08-07) not yet supported with Opus 4.5\n```\n\n### Target Model Strings (Opus 4.5)\n\n| Platform | Opus 4.5 Model String |\n|----------|----------------------|\n| Anthropic API (1P) | `claude-opus-4-5-20251101` |\n| AWS Bedrock | `anthropic.claude-opus-4-5-20251101-v1:0` |\n| Google Vertex AI | `claude-opus-4-5@20251101` |\n| Azure AI Foundry | `claude-opus-4-5-20251101` |\n\n### Source Model Strings to Replace\n\n| Source Model | Anthropic API (1P) | AWS Bedrock | Google Vertex AI |\n|--------------|-------------------|-------------|------------------|\n| Sonnet 4.0 | `claude-sonnet-4-20250514` | `anthropic.claude-sonnet-4-20250514-v1:0` | `claude-sonnet-4@20250514` |\n| Sonnet 4.5 | `claude-sonnet-4-5-20250929` | `anthropic.claude-sonnet-4-5-20250929-v1:0` | `claude-sonnet-4-5@20250929` |\n| Opus 4.1 | `claude-opus-4-1-20250422` | `anthropic.claude-opus-4-1-20250422-v1:0` | `claude-opus-4-1@20250422` |\n\n**Do NOT migrate**: Any Haiku models (e.g., `claude-haiku-4-5-20251001`).\n\n## Prompt Adjustments\n\nOpus 4.5 has known behavioral differences from previous models. **Only apply these fixes if the user explicitly requests them or reports a specific issue.** By default, just update model strings.\n\n**Integration guidelines**: When adding snippets, don't just append them to prompts. Integrate them thoughtfully:\n- Use XML tags (e.g., `<code_guidelines>`, `<tool_usage>`) to organize additions\n- Match the style and structure of the existing prompt\n- Place snippets in logical locations (e.g., coding guidelines near other coding instructions)\n- If the prompt already uses XML tags, add new content within appropriate existing tags or create consistent new ones\n\n### 1. Tool Overtriggering\n\nOpus 4.5 is more responsive to system prompts. Aggressive language that prevented undertriggering on previous models may now cause overtriggering.\n\n**Apply if**: User reports tools being called too frequently or unnecessarily.\n\n**Find and soften**:\n- `CRITICAL:` â†’ remove or soften\n- `You MUST...` â†’ `You should...`\n- `ALWAYS do X` â†’ `Do X`\n- `NEVER skip...` â†’ `Don't skip...`\n- `REQUIRED` â†’ remove or soften\n\nOnly apply to tool-triggering instructions. Leave other uses of emphasis alone.\n\n### 2. Over-Engineering Prevention\n\nOpus 4.5 tends to create extra files, add unnecessary abstractions, or build unrequested flexibility.\n\n**Apply if**: User reports unwanted files, excessive abstraction, or unrequested features. Add the snippet from `references/prompt-snippets.md`.\n\n### 3. Code Exploration\n\nOpus 4.5 can be overly conservative about exploring code, proposing solutions without reading files.\n\n**Apply if**: User reports the model proposing fixes without inspecting relevant code. Add the snippet from `references/prompt-snippets.md`.\n\n### 4. Frontend Design\n\n**Apply if**: User requests improved frontend design quality or reports generic-looking outputs.\n\nAdd the frontend aesthetics snippet from `references/prompt-snippets.md`.\n\n### 5. Thinking Sensitivity\n\nWhen extended thinking is not enabled (the default), Opus 4.5 is particularly sensitive to the word \"think\" and its variants. Extended thinking is enabled only if the API request contains a `thinking` parameter.\n\n**Apply if**: User reports issues related to \"thinking\" while extended thinking is not enabled (no `thinking` parameter in request).\n\nReplace \"think\" with alternatives like \"consider,\" \"believe,\" or \"evaluate.\"\n\n## Reference\n\nSee `references/prompt-snippets.md` for the full text of each snippet to add.\n\nSee `references/effort.md` for configuring the effort parameter (only if user requests it)."
              }
            ]
          },
          {
            "name": "code-review",
            "description": "Automated code review for pull requests using multiple specialized agents with confidence-based scoring to filter false positives",
            "source": "./plugins/code-review",
            "category": "productivity",
            "version": "1.0.0",
            "author": {
              "name": "Boris Cherny",
              "email": "boris@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install code-review@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [
              {
                "name": "/code-review",
                "description": "Code review a pull request",
                "path": "plugins/code-review/commands/code-review.md",
                "frontmatter": {
                  "allowed-tools": "Bash(gh issue view:*), Bash(gh search:*), Bash(gh issue list:*), Bash(gh pr comment:*), Bash(gh pr diff:*), Bash(gh pr view:*), Bash(gh pr list:*), mcp__github_inline_comment__create_inline_comment",
                  "description": "Code review a pull request"
                },
                "content": "Provide a code review for the given pull request.\n\n**Agent assumptions (applies to all agents and subagents):**\n- All tools are functional and will work without error. Do not test tools or make exploratory calls.\n- Only call a tool if it is required to complete the task. Every tool call should have a clear purpose.\n\nTo do this, follow these steps precisely:\n\n1. Launch a haiku agent to check if any of the following are true:\n   - The pull request is closed\n   - The pull request is a draft\n   - The pull request does not need code review (e.g. automated PR, trivial change that is obviously correct)\n   - Claude has already commented on this PR (check `gh pr view <PR> --comments` for comments left by claude)\n\n   If any condition is true, stop and do not proceed.\n\nNote: Still review Claude generated PR's.\n\n2. Launch a haiku agent to return a list of file paths (not their contents) for all relevant CLAUDE.md files including:\n   - The root CLAUDE.md file, if it exists\n   - Any CLAUDE.md files in directories containing files modified by the pull request\n\n3. Launch a sonnet agent to view the pull request and return a summary of the changes\n\n4. Launch 4 agents in parallel to independently review the changes. Each agent should return the list of issues, where each issue includes a description and the reason it was flagged (e.g. \"CLAUDE.md adherence\", \"bug\"). The agents should do the following:\n\n   Agents 1 + 2: CLAUDE.md compliance sonnet agents\n   Audit changes for CLAUDE.md compliance in parallel. Note: When evaluating CLAUDE.md compliance for a file, you should only consider CLAUDE.md files that share a file path with the file or parents.\n\n   Agent 3: Opus bug agent (parallel subagent with agent 4)\n   Scan for obvious bugs. Focus only on the diff itself without reading extra context. Flag only significant bugs; ignore nitpicks and likely false positives. Do not flag issues that you cannot validate without looking at context outside of the git diff.\n\n   Agent 4: Opus bug agent (parallel subagent with agent 3)\n   Look for problems that exist in the introduced code. This could be security issues, incorrect logic, etc. Only look for issues that fall within the changed code.\n\n   **CRITICAL: We only want HIGH SIGNAL issues.** Flag issues where:\n   - The code will fail to compile or parse (syntax errors, type errors, missing imports, unresolved references)\n   - The code will definitely produce wrong results regardless of inputs (clear logic errors)\n   - Clear, unambiguous CLAUDE.md violations where you can quote the exact rule being broken\n\n   Do NOT flag:\n   - Code style or quality concerns\n   - Potential issues that depend on specific inputs or state\n   - Subjective suggestions or improvements\n\n   If you are not certain an issue is real, do not flag it. False positives erode trust and waste reviewer time.\n\n   In addition to the above, each subagent should be told the PR title and description. This will help provide context regarding the author's intent.\n\n5. For each issue found in the previous step by agents 3 and 4, launch parallel subagents to validate the issue. These subagents should get the PR title and description along with a description of the issue. The agent's job is to review the issue to validate that the stated issue is truly an issue with high confidence. For example, if an issue such as \"variable is not defined\" was flagged, the subagent's job would be to validate that is actually true in the code. Another example would be CLAUDE.md issues. The agent should validate that the CLAUDE.md rule that was violated is scoped for this file and is actually violated. Use Opus subagents for bugs and logic issues, and sonnet agents for CLAUDE.md violations.\n\n6. Filter out any issues that were not validated in step 5. This step will give us our list of high signal issues for our review.\n\n7. If issues were found, skip to step 8 to post inline comments directly.\n\n   If NO issues were found, post a summary comment using `gh pr comment` (if `--comment` argument is provided):\n   \"No issues found. Checked for bugs and CLAUDE.md compliance.\"\n\n8. Post inline comments for each issue using `mcp__github_inline_comment__create_inline_comment`. For each comment:\n   - Provide a brief description of the issue\n   - For small, self-contained fixes, include a committable suggestion block\n   - For larger fixes (6+ lines, structural changes, or changes spanning multiple locations), describe the issue and suggested fix without a suggestion block\n\n   **IMPORTANT: Only post ONE comment per unique issue. Do not post duplicate comments.**\n\nUse this list when evaluating issues in Steps 4 and 5 (these are false positives, do NOT flag):\n\n- Pre-existing issues\n- Something that appears to be a bug but is actually correct\n- Pedantic nitpicks that a senior engineer would not flag\n- Issues that a linter will catch (do not run the linter to verify)\n- General code quality concerns (e.g., lack of test coverage, general security issues) unless explicitly required in CLAUDE.md\n- Issues mentioned in CLAUDE.md but explicitly silenced in the code (e.g., via a lint ignore comment)\n\nNotes:\n\n- Use gh CLI to interact with GitHub (e.g., fetch pull requests, create comments). Do not use web fetch.\n- Create a todo list before starting.\n- You must cite and link each issue in inline comments (e.g., if referring to a CLAUDE.md, include a link to it).\n- If no issues are found, post a comment with the following format:\n\n---\n\n## Code review\n\nNo issues found. Checked for bugs and CLAUDE.md compliance.\n\n---\n\n- When linking to code in inline comments, follow the following format precisely, otherwise the Markdown preview won't render correctly: https://github.com/anthropics/claude-code/blob/c21d3c10bc8e898b7ac1a2d745bdc9bc4e423afe/package.json#L10-L15\n  - Requires full git sha\n  - You must provide the full sha. Commands like `https://github.com/owner/repo/blob/$(git rev-parse HEAD)/foo/bar` will not work, since your comment will be directly rendered in Markdown.\n  - Repo name must match the repo you're code reviewing\n  - # sign after the file name\n  - Line range format is L[start]-L[end]\n  - Provide at least 1 line of context before and after, centered on the line you are commenting about (eg. if you are commenting about lines 5-6, you should link to `L4-7`)"
              }
            ],
            "skills": []
          },
          {
            "name": "commit-commands",
            "description": "Commands for git commit workflows including commit, push, and PR creation",
            "source": "./plugins/commit-commands",
            "category": "productivity",
            "version": "1.0.0",
            "author": {
              "name": "Anthropic",
              "email": "support@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install commit-commands@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [
              {
                "name": "/clean_gone",
                "description": "Cleans up all git branches marked as [gone] (branches that have been deleted on the remote but still exist locally), including removing associated worktrees.",
                "path": "plugins/commit-commands/commands/clean_gone.md",
                "frontmatter": {
                  "description": "Cleans up all git branches marked as [gone] (branches that have been deleted on the remote but still exist locally), including removing associated worktrees."
                },
                "content": "## Your Task\n\nYou need to execute the following bash commands to clean up stale local branches that have been deleted from the remote repository.\n\n## Commands to Execute\n\n1. **First, list branches to identify any with [gone] status**\n   Execute this command:\n   ```bash\n   git branch -v\n   ```\n   \n   Note: Branches with a '+' prefix have associated worktrees and must have their worktrees removed before deletion.\n\n2. **Next, identify worktrees that need to be removed for [gone] branches**\n   Execute this command:\n   ```bash\n   git worktree list\n   ```\n\n3. **Finally, remove worktrees and delete [gone] branches (handles both regular and worktree branches)**\n   Execute this command:\n   ```bash\n   # Process all [gone] branches, removing '+' prefix if present\n   git branch -v | grep '\\[gone\\]' | sed 's/^[+* ]//' | awk '{print $1}' | while read branch; do\n     echo \"Processing branch: $branch\"\n     # Find and remove worktree if it exists\n     worktree=$(git worktree list | grep \"\\\\[$branch\\\\]\" | awk '{print $1}')\n     if [ ! -z \"$worktree\" ] && [ \"$worktree\" != \"$(git rev-parse --show-toplevel)\" ]; then\n       echo \"  Removing worktree: $worktree\"\n       git worktree remove --force \"$worktree\"\n     fi\n     # Delete the branch\n     echo \"  Deleting branch: $branch\"\n     git branch -D \"$branch\"\n   done\n   ```\n\n## Expected Behavior\n\nAfter executing these commands, you will:\n\n- See a list of all local branches with their status\n- Identify and remove any worktrees associated with [gone] branches\n- Delete all branches marked as [gone]\n- Provide feedback on which worktrees and branches were removed\n\nIf no branches are marked as [gone], report that no cleanup was needed."
              },
              {
                "name": "/commit-push-pr",
                "description": "Commit, push, and open a PR",
                "path": "plugins/commit-commands/commands/commit-push-pr.md",
                "frontmatter": {
                  "allowed-tools": "Bash(git checkout --branch:*), Bash(git add:*), Bash(git status:*), Bash(git push:*), Bash(git commit:*), Bash(gh pr create:*)",
                  "description": "Commit, push, and open a PR"
                },
                "content": "## Context\n\n- Current git status: !`git status`\n- Current git diff (staged and unstaged changes): !`git diff HEAD`\n- Current branch: !`git branch --show-current`\n\n## Your task\n\nBased on the above changes:\n\n1. Create a new branch if on main\n2. Create a single commit with an appropriate message\n3. Push the branch to origin\n4. Create a pull request using `gh pr create`\n5. You have the capability to call multiple tools in a single response. You MUST do all of the above in a single message. Do not use any other tools or do anything else. Do not send any other text or messages besides these tool calls."
              },
              {
                "name": "/commit",
                "description": "Create a git commit",
                "path": "plugins/commit-commands/commands/commit.md",
                "frontmatter": {
                  "allowed-tools": "Bash(git add:*), Bash(git status:*), Bash(git commit:*)",
                  "description": "Create a git commit"
                },
                "content": "## Context\n\n- Current git status: !`git status`\n- Current git diff (staged and unstaged changes): !`git diff HEAD`\n- Current branch: !`git branch --show-current`\n- Recent commits: !`git log --oneline -10`\n\n## Your task\n\nBased on the above changes, create a single git commit.\n\nYou have the capability to call multiple tools in a single response. Stage and create the commit using a single message. Do not use any other tools or do anything else. Do not send any other text or messages besides these tool calls."
              }
            ],
            "skills": []
          },
          {
            "name": "explanatory-output-style",
            "description": "Adds educational insights about implementation choices and codebase patterns (mimics the deprecated Explanatory output style)",
            "source": "./plugins/explanatory-output-style",
            "category": "learning",
            "version": "1.0.0",
            "author": {
              "name": "Dickson Tsai",
              "email": "dickson@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install explanatory-output-style@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [],
            "skills": []
          },
          {
            "name": "feature-dev",
            "description": "Comprehensive feature development workflow with specialized agents for codebase exploration, architecture design, and quality review",
            "source": "./plugins/feature-dev",
            "category": "development",
            "version": "1.0.0",
            "author": {
              "name": "Siddharth Bidasaria",
              "email": "sbidasaria@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install feature-dev@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [
              {
                "name": "/feature-dev",
                "description": "Guided feature development with codebase understanding and architecture focus",
                "path": "plugins/feature-dev/commands/feature-dev.md",
                "frontmatter": {
                  "description": "Guided feature development with codebase understanding and architecture focus",
                  "argument-hint": "Optional feature description"
                },
                "content": "# Feature Development\n\nYou are helping a developer implement a new feature. Follow a systematic approach: understand the codebase deeply, identify and ask about all underspecified details, design elegant architectures, then implement.\n\n## Core Principles\n\n- **Ask clarifying questions**: Identify all ambiguities, edge cases, and underspecified behaviors. Ask specific, concrete questions rather than making assumptions. Wait for user answers before proceeding with implementation. Ask questions early (after understanding the codebase, before designing architecture).\n- **Understand before acting**: Read and comprehend existing code patterns first\n- **Read files identified by agents**: When launching agents, ask them to return lists of the most important files to read. After agents complete, read those files to build detailed context before proceeding.\n- **Simple and elegant**: Prioritize readable, maintainable, architecturally sound code\n- **Use TodoWrite**: Track all progress throughout\n\n---\n\n## Phase 1: Discovery\n\n**Goal**: Understand what needs to be built\n\nInitial request: $ARGUMENTS\n\n**Actions**:\n1. Create todo list with all phases\n2. If feature unclear, ask user for:\n   - What problem are they solving?\n   - What should the feature do?\n   - Any constraints or requirements?\n3. Summarize understanding and confirm with user\n\n---\n\n## Phase 2: Codebase Exploration\n\n**Goal**: Understand relevant existing code and patterns at both high and low levels\n\n**Actions**:\n1. Launch 2-3 code-explorer agents in parallel. Each agent should:\n   - Trace through the code comprehensively and focus on getting a comprehensive understanding of abstractions, architecture and flow of control\n   - Target a different aspect of the codebase (eg. similar features, high level understanding, architectural understanding, user experience, etc)\n   - Include a list of 5-10 key files to read\n\n   **Example agent prompts**:\n   - \"Find features similar to [feature] and trace through their implementation comprehensively\"\n   - \"Map the architecture and abstractions for [feature area], tracing through the code comprehensively\"\n   - \"Analyze the current implementation of [existing feature/area], tracing through the code comprehensively\"\n   - \"Identify UI patterns, testing approaches, or extension points relevant to [feature]\"\n\n2. Once the agents return, please read all files identified by agents to build deep understanding\n3. Present comprehensive summary of findings and patterns discovered\n\n---\n\n## Phase 3: Clarifying Questions\n\n**Goal**: Fill in gaps and resolve all ambiguities before designing\n\n**CRITICAL**: This is one of the most important phases. DO NOT SKIP.\n\n**Actions**:\n1. Review the codebase findings and original feature request\n2. Identify underspecified aspects: edge cases, error handling, integration points, scope boundaries, design preferences, backward compatibility, performance needs\n3. **Present all questions to the user in a clear, organized list**\n4. **Wait for answers before proceeding to architecture design**\n\nIf the user says \"whatever you think is best\", provide your recommendation and get explicit confirmation.\n\n---\n\n## Phase 4: Architecture Design\n\n**Goal**: Design multiple implementation approaches with different trade-offs\n\n**Actions**:\n1. Launch 2-3 code-architect agents in parallel with different focuses: minimal changes (smallest change, maximum reuse), clean architecture (maintainability, elegant abstractions), or pragmatic balance (speed + quality)\n2. Review all approaches and form your opinion on which fits best for this specific task (consider: small fix vs large feature, urgency, complexity, team context)\n3. Present to user: brief summary of each approach, trade-offs comparison, **your recommendation with reasoning**, concrete implementation differences\n4. **Ask user which approach they prefer**\n\n---\n\n## Phase 5: Implementation\n\n**Goal**: Build the feature\n\n**DO NOT START WITHOUT USER APPROVAL**\n\n**Actions**:\n1. Wait for explicit user approval\n2. Read all relevant files identified in previous phases\n3. Implement following chosen architecture\n4. Follow codebase conventions strictly\n5. Write clean, well-documented code\n6. Update todos as you progress\n\n---\n\n## Phase 6: Quality Review\n\n**Goal**: Ensure code is simple, DRY, elegant, easy to read, and functionally correct\n\n**Actions**:\n1. Launch 3 code-reviewer agents in parallel with different focuses: simplicity/DRY/elegance, bugs/functional correctness, project conventions/abstractions\n2. Consolidate findings and identify highest severity issues that you recommend fixing\n3. **Present findings to user and ask what they want to do** (fix now, fix later, or proceed as-is)\n4. Address issues based on user decision\n\n---\n\n## Phase 7: Summary\n\n**Goal**: Document what was accomplished\n\n**Actions**:\n1. Mark all todos complete\n2. Summarize:\n   - What was built\n   - Key decisions made\n   - Files modified\n   - Suggested next steps\n\n---"
              }
            ],
            "skills": []
          },
          {
            "name": "frontend-design",
            "description": "Create distinctive, production-grade frontend interfaces with high design quality. Generates creative, polished code that avoids generic AI aesthetics.",
            "source": "./plugins/frontend-design",
            "category": "development",
            "version": "1.0.0",
            "author": {
              "name": "Prithvi Rajasekaran & Alexander Bricken",
              "email": "prithvi@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install frontend-design@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "frontend-design",
                "description": "Create distinctive, production-grade frontend interfaces with high design quality. Use this skill when the user asks to build web components, pages, or applications. Generates creative, polished code that avoids generic AI aesthetics.",
                "path": "plugins/frontend-design/skills/frontend-design/SKILL.md",
                "frontmatter": {
                  "name": "frontend-design",
                  "description": "Create distinctive, production-grade frontend interfaces with high design quality. Use this skill when the user asks to build web components, pages, or applications. Generates creative, polished code that avoids generic AI aesthetics.",
                  "license": "Complete terms in LICENSE.txt"
                },
                "content": "This skill guides creation of distinctive, production-grade frontend interfaces that avoid generic \"AI slop\" aesthetics. Implement real working code with exceptional attention to aesthetic details and creative choices.\n\nThe user provides frontend requirements: a component, page, application, or interface to build. They may include context about the purpose, audience, or technical constraints.\n\n## Design Thinking\n\nBefore coding, understand the context and commit to a BOLD aesthetic direction:\n- **Purpose**: What problem does this interface solve? Who uses it?\n- **Tone**: Pick an extreme: brutally minimal, maximalist chaos, retro-futuristic, organic/natural, luxury/refined, playful/toy-like, editorial/magazine, brutalist/raw, art deco/geometric, soft/pastel, industrial/utilitarian, etc. There are so many flavors to choose from. Use these for inspiration but design one that is true to the aesthetic direction.\n- **Constraints**: Technical requirements (framework, performance, accessibility).\n- **Differentiation**: What makes this UNFORGETTABLE? What's the one thing someone will remember?\n\n**CRITICAL**: Choose a clear conceptual direction and execute it with precision. Bold maximalism and refined minimalism both work - the key is intentionality, not intensity.\n\nThen implement working code (HTML/CSS/JS, React, Vue, etc.) that is:\n- Production-grade and functional\n- Visually striking and memorable\n- Cohesive with a clear aesthetic point-of-view\n- Meticulously refined in every detail\n\n## Frontend Aesthetics Guidelines\n\nFocus on:\n- **Typography**: Choose fonts that are beautiful, unique, and interesting. Avoid generic fonts like Arial and Inter; opt instead for distinctive choices that elevate the frontend's aesthetics; unexpected, characterful font choices. Pair a distinctive display font with a refined body font.\n- **Color & Theme**: Commit to a cohesive aesthetic. Use CSS variables for consistency. Dominant colors with sharp accents outperform timid, evenly-distributed palettes.\n- **Motion**: Use animations for effects and micro-interactions. Prioritize CSS-only solutions for HTML. Use Motion library for React when available. Focus on high-impact moments: one well-orchestrated page load with staggered reveals (animation-delay) creates more delight than scattered micro-interactions. Use scroll-triggering and hover states that surprise.\n- **Spatial Composition**: Unexpected layouts. Asymmetry. Overlap. Diagonal flow. Grid-breaking elements. Generous negative space OR controlled density.\n- **Backgrounds & Visual Details**: Create atmosphere and depth rather than defaulting to solid colors. Add contextual effects and textures that match the overall aesthetic. Apply creative forms like gradient meshes, noise textures, geometric patterns, layered transparencies, dramatic shadows, decorative borders, custom cursors, and grain overlays.\n\nNEVER use generic AI-generated aesthetics like overused font families (Inter, Roboto, Arial, system fonts), cliched color schemes (particularly purple gradients on white backgrounds), predictable layouts and component patterns, and cookie-cutter design that lacks context-specific character.\n\nInterpret creatively and make unexpected choices that feel genuinely designed for the context. No design should be the same. Vary between light and dark themes, different fonts, different aesthetics. NEVER converge on common choices (Space Grotesk, for example) across generations.\n\n**IMPORTANT**: Match implementation complexity to the aesthetic vision. Maximalist designs need elaborate code with extensive animations and effects. Minimalist or refined designs need restraint, precision, and careful attention to spacing, typography, and subtle details. Elegance comes from executing the vision well.\n\nRemember: Claude is capable of extraordinary creative work. Don't hold back, show what can truly be created when thinking outside the box and committing fully to a distinctive vision."
              }
            ]
          },
          {
            "name": "hookify",
            "description": "Easily create custom hooks to prevent unwanted behaviors by analyzing conversation patterns or from explicit instructions. Define rules via simple markdown files.",
            "source": "./plugins/hookify",
            "category": "productivity",
            "version": "0.1.0",
            "author": {
              "name": "Daisy Hollman",
              "email": "daisy@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install hookify@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [
              {
                "name": "/configure",
                "description": "Enable or disable hookify rules interactively",
                "path": "plugins/hookify/commands/configure.md",
                "frontmatter": {
                  "description": "Enable or disable hookify rules interactively",
                  "allowed-tools": [
                    "Glob",
                    "Read",
                    "Edit",
                    "AskUserQuestion",
                    "Skill"
                  ]
                },
                "content": "# Configure Hookify Rules\n\n**Load hookify:writing-rules skill first** to understand rule format.\n\nEnable or disable existing hookify rules using an interactive interface.\n\n## Steps\n\n### 1. Find Existing Rules\n\nUse Glob tool to find all hookify rule files:\n```\npattern: \".claude/hookify.*.local.md\"\n```\n\nIf no rules found, inform user:\n```\nNo hookify rules configured yet. Use `/hookify` to create your first rule.\n```\n\n### 2. Read Current State\n\nFor each rule file:\n- Read the file\n- Extract `name` and `enabled` fields from frontmatter\n- Build list of rules with current state\n\n### 3. Ask User Which Rules to Toggle\n\nUse AskUserQuestion to let user select rules:\n\n```json\n{\n  \"questions\": [\n    {\n      \"question\": \"Which rules would you like to enable or disable?\",\n      \"header\": \"Configure\",\n      \"multiSelect\": true,\n      \"options\": [\n        {\n          \"label\": \"warn-dangerous-rm (currently enabled)\",\n          \"description\": \"Warns about rm -rf commands\"\n        },\n        {\n          \"label\": \"warn-console-log (currently disabled)\",\n          \"description\": \"Warns about console.log in code\"\n        },\n        {\n          \"label\": \"require-tests (currently enabled)\",\n          \"description\": \"Requires tests before stopping\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Option format:**\n- Label: `{rule-name} (currently {enabled|disabled})`\n- Description: Brief description from rule's message or pattern\n\n### 4. Parse User Selection\n\nFor each selected rule:\n- Determine current state from label (enabled/disabled)\n- Toggle state: enabled â†’ disabled, disabled â†’ enabled\n\n### 5. Update Rule Files\n\nFor each rule to toggle:\n- Use Read tool to read current content\n- Use Edit tool to change `enabled: true` to `enabled: false` (or vice versa)\n- Handle both with and without quotes\n\n**Edit pattern for enabling:**\n```\nold_string: \"enabled: false\"\nnew_string: \"enabled: true\"\n```\n\n**Edit pattern for disabling:**\n```\nold_string: \"enabled: true\"\nnew_string: \"enabled: false\"\n```\n\n### 6. Confirm Changes\n\nShow user what was changed:\n\n```\n## Hookify Rules Updated\n\n**Enabled:**\n- warn-console-log\n\n**Disabled:**\n- warn-dangerous-rm\n\n**Unchanged:**\n- require-tests\n\nChanges apply immediately - no restart needed\n```\n\n## Important Notes\n\n- Changes take effect immediately on next tool use\n- You can also manually edit .claude/hookify.*.local.md files\n- To permanently remove a rule, delete its .local.md file\n- Use `/hookify:list` to see all configured rules\n\n## Edge Cases\n\n**No rules to configure:**\n- Show message about using `/hookify` to create rules first\n\n**User selects no rules:**\n- Inform that no changes were made\n\n**File read/write errors:**\n- Inform user of specific error\n- Suggest manual editing as fallback"
              },
              {
                "name": "/help",
                "description": "Get help with the hookify plugin",
                "path": "plugins/hookify/commands/help.md",
                "frontmatter": {
                  "description": "Get help with the hookify plugin",
                  "allowed-tools": [
                    "Read"
                  ]
                },
                "content": "# Hookify Plugin Help\n\nExplain how the hookify plugin works and how to use it.\n\n## Overview\n\nThe hookify plugin makes it easy to create custom hooks that prevent unwanted behaviors. Instead of editing `hooks.json` files, users create simple markdown configuration files that define patterns to watch for.\n\n## How It Works\n\n### 1. Hook System\n\nHookify installs generic hooks that run on these events:\n- **PreToolUse**: Before any tool executes (Bash, Edit, Write, etc.)\n- **PostToolUse**: After a tool executes\n- **Stop**: When Claude wants to stop working\n- **UserPromptSubmit**: When user submits a prompt\n\nThese hooks read configuration files from `.claude/hookify.*.local.md` and check if any rules match the current operation.\n\n### 2. Configuration Files\n\nUsers create rules in `.claude/hookify.{rule-name}.local.md` files:\n\n```markdown\n---\nname: warn-dangerous-rm\nenabled: true\nevent: bash\npattern: rm\\s+-rf\n---\n\nâš ï¸ **Dangerous rm command detected!**\n\nThis command could delete important files. Please verify the path.\n```\n\n**Key fields:**\n- `name`: Unique identifier for the rule\n- `enabled`: true/false to activate/deactivate\n- `event`: bash, file, stop, prompt, or all\n- `pattern`: Regex pattern to match\n\nThe message body is what Claude sees when the rule triggers.\n\n### 3. Creating Rules\n\n**Option A: Use /hookify command**\n```\n/hookify Don't use console.log in production files\n```\n\nThis analyzes your request and creates the appropriate rule file.\n\n**Option B: Create manually**\nCreate `.claude/hookify.my-rule.local.md` with the format above.\n\n**Option C: Analyze conversation**\n```\n/hookify\n```\n\nWithout arguments, hookify analyzes recent conversation to find behaviors you want to prevent.\n\n## Available Commands\n\n- **`/hookify`** - Create hooks from conversation analysis or explicit instructions\n- **`/hookify:help`** - Show this help (what you're reading now)\n- **`/hookify:list`** - List all configured hooks\n- **`/hookify:configure`** - Enable/disable existing hooks interactively\n\n## Example Use Cases\n\n**Prevent dangerous commands:**\n```markdown\n---\nname: block-chmod-777\nenabled: true\nevent: bash\npattern: chmod\\s+777\n---\n\nDon't use chmod 777 - it's a security risk. Use specific permissions instead.\n```\n\n**Warn about debugging code:**\n```markdown\n---\nname: warn-console-log\nenabled: true\nevent: file\npattern: console\\.log\\(\n---\n\nConsole.log detected. Remember to remove debug logging before committing.\n```\n\n**Require tests before stopping:**\n```markdown\n---\nname: require-tests\nenabled: true\nevent: stop\npattern: .*\n---\n\nDid you run tests before finishing? Make sure `npm test` or equivalent was executed.\n```\n\n## Pattern Syntax\n\nUse Python regex syntax:\n- `\\s` - whitespace\n- `\\.` - literal dot\n- `|` - OR\n- `+` - one or more\n- `*` - zero or more\n- `\\d` - digit\n- `[abc]` - character class\n\n**Examples:**\n- `rm\\s+-rf` - matches \"rm -rf\"\n- `console\\.log\\(` - matches \"console.log(\"\n- `(eval|exec)\\(` - matches \"eval(\" or \"exec(\"\n- `\\.env$` - matches files ending in .env\n\n## Important Notes\n\n**No Restart Needed**: Hookify rules (`.local.md` files) take effect immediately on the next tool use. The hookify hooks are already loaded and read your rules dynamically.\n\n**Block or Warn**: Rules can either `block` operations (prevent execution) or `warn` (show message but allow). Set `action: block` or `action: warn` in the rule's frontmatter.\n\n**Rule Files**: Keep rules in `.claude/hookify.*.local.md` - they should be git-ignored (add to .gitignore if needed).\n\n**Disable Rules**: Set `enabled: false` in frontmatter or delete the file.\n\n## Troubleshooting\n\n**Hook not triggering:**\n- Check rule file is in `.claude/` directory\n- Verify `enabled: true` in frontmatter\n- Confirm pattern is valid regex\n- Test pattern: `python3 -c \"import re; print(re.search('your_pattern', 'test_text'))\"`\n- Rules take effect immediately - no restart needed\n\n**Import errors:**\n- Check Python 3 is available: `python3 --version`\n- Verify hookify plugin is installed correctly\n\n**Pattern not matching:**\n- Test regex separately\n- Check for escaping issues (use unquoted patterns in YAML)\n- Try simpler pattern first, then refine\n\n## Getting Started\n\n1. Create your first rule:\n   ```\n   /hookify Warn me when I try to use rm -rf\n   ```\n\n2. Try to trigger it:\n   - Ask Claude to run `rm -rf /tmp/test`\n   - You should see the warning\n\n4. Refine the rule by editing `.claude/hookify.warn-rm.local.md`\n\n5. Create more rules as you encounter unwanted behaviors\n\nFor more examples, check the `${CLAUDE_PLUGIN_ROOT}/examples/` directory."
              },
              {
                "name": "/hookify",
                "description": "Create hooks to prevent unwanted behaviors from conversation analysis or explicit instructions",
                "path": "plugins/hookify/commands/hookify.md",
                "frontmatter": {
                  "description": "Create hooks to prevent unwanted behaviors from conversation analysis or explicit instructions",
                  "argument-hint": "Optional specific behavior to address",
                  "allowed-tools": [
                    "Read",
                    "Write",
                    "AskUserQuestion",
                    "Task",
                    "Grep",
                    "TodoWrite",
                    "Skill"
                  ]
                },
                "content": "# Hookify - Create Hooks from Unwanted Behaviors\n\n**FIRST: Load the hookify:writing-rules skill** using the Skill tool to understand rule file format and syntax.\n\nCreate hook rules to prevent problematic behaviors by analyzing the conversation or from explicit user instructions.\n\n## Your Task\n\nYou will help the user create hookify rules to prevent unwanted behaviors. Follow these steps:\n\n### Step 1: Gather Behavior Information\n\n**If $ARGUMENTS is provided:**\n- User has given specific instructions: `$ARGUMENTS`\n- Still analyze recent conversation (last 10-15 user messages) for additional context\n- Look for examples of the behavior happening\n\n**If $ARGUMENTS is empty:**\n- Launch the conversation-analyzer agent to find problematic behaviors\n- Agent will scan user prompts for frustration signals\n- Agent will return structured findings\n\n**To analyze conversation:**\nUse the Task tool to launch conversation-analyzer agent:\n```\n{\n  \"subagent_type\": \"general-purpose\",\n  \"description\": \"Analyze conversation for unwanted behaviors\",\n  \"prompt\": \"You are analyzing a Claude Code conversation to find behaviors the user wants to prevent.\n\nRead user messages in the current conversation and identify:\n1. Explicit requests to avoid something (\\\"don't do X\\\", \\\"stop doing Y\\\")\n2. Corrections or reversions (user fixing Claude's actions)\n3. Frustrated reactions (\\\"why did you do X?\\\", \\\"I didn't ask for that\\\")\n4. Repeated issues (same problem multiple times)\n\nFor each issue found, extract:\n- What tool was used (Bash, Edit, Write, etc.)\n- Specific pattern or command\n- Why it was problematic\n- User's stated reason\n\nReturn findings as a structured list with:\n- category: Type of issue\n- tool: Which tool was involved\n- pattern: Regex or literal pattern to match\n- context: What happened\n- severity: high/medium/low\n\nFocus on the most recent issues (last 20-30 messages). Don't go back further unless explicitly asked.\"\n}\n```\n\n### Step 2: Present Findings to User\n\nAfter gathering behaviors (from arguments or agent), present to user using AskUserQuestion:\n\n**Question 1: Which behaviors to hookify?**\n- Header: \"Create Rules\"\n- multiSelect: true\n- Options: List each detected behavior (max 4)\n  - Label: Short description (e.g., \"Block rm -rf\")\n  - Description: Why it's problematic\n\n**Question 2: For each selected behavior, ask about action:**\n- \"Should this block the operation or just warn?\"\n- Options:\n  - \"Just warn\" (action: warn - shows message but allows)\n  - \"Block operation\" (action: block - prevents execution)\n\n**Question 3: Ask for example patterns:**\n- \"What patterns should trigger this rule?\"\n- Show detected patterns\n- Allow user to refine or add more\n\n### Step 3: Generate Rule Files\n\nFor each confirmed behavior, create a `.claude/hookify.{rule-name}.local.md` file:\n\n**Rule naming convention:**\n- Use kebab-case\n- Be descriptive: `block-dangerous-rm`, `warn-console-log`, `require-tests-before-stop`\n- Start with action verb: block, warn, prevent, require\n\n**File format:**\n```markdown\n---\nname: {rule-name}\nenabled: true\nevent: {bash|file|stop|prompt|all}\npattern: {regex pattern}\naction: {warn|block}\n---\n\n{Message to show Claude when rule triggers}\n```\n\n**Action values:**\n- `warn`: Show message but allow operation (default)\n- `block`: Prevent operation or stop session\n\n**For more complex rules (multiple conditions):**\n```markdown\n---\nname: {rule-name}\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.env$\n  - field: new_text\n    operator: contains\n    pattern: API_KEY\n---\n\n{Warning message}\n```\n\n### Step 4: Create Files and Confirm\n\n**IMPORTANT**: Rule files must be created in the current working directory's `.claude/` folder, NOT the plugin directory.\n\nUse the current working directory (where Claude Code was started) as the base path.\n\n1. Check if `.claude/` directory exists in current working directory\n   - If not, create it first with: `mkdir -p .claude`\n\n2. Use Write tool to create each `.claude/hookify.{name}.local.md` file\n   - Use relative path from current working directory: `.claude/hookify.{name}.local.md`\n   - The path should resolve to the project's .claude directory, not the plugin's\n\n3. Show user what was created:\n   ```\n   Created 3 hookify rules:\n   - .claude/hookify.dangerous-rm.local.md\n   - .claude/hookify.console-log.local.md\n   - .claude/hookify.sensitive-files.local.md\n\n   These rules will trigger on:\n   - dangerous-rm: Bash commands matching \"rm -rf\"\n   - console-log: Edits adding console.log statements\n   - sensitive-files: Edits to .env or credentials files\n   ```\n\n4. Verify files were created in the correct location by listing them\n\n5. Inform user: **\"Rules are active immediately - no restart needed!\"**\n\n   The hookify hooks are already loaded and will read your new rules on the next tool use.\n\n## Event Types Reference\n\n- **bash**: Matches Bash tool commands\n- **file**: Matches Edit, Write, MultiEdit tools\n- **stop**: Matches when agent wants to stop (use for completion checks)\n- **prompt**: Matches when user submits prompts\n- **all**: Matches all events\n\n## Pattern Writing Tips\n\n**Bash patterns:**\n- Match dangerous commands: `rm\\s+-rf|chmod\\s+777|dd\\s+if=`\n- Match specific tools: `npm\\s+install\\s+|pip\\s+install`\n\n**File patterns:**\n- Match code patterns: `console\\.log\\(|eval\\(|innerHTML\\s*=`\n- Match file paths: `\\.env$|\\.git/|node_modules/`\n\n**Stop patterns:**\n- Check for missing steps: (check transcript or completion criteria)\n\n## Example Workflow\n\n**User says**: \"/hookify Don't use rm -rf without asking me first\"\n\n**Your response**:\n1. Analyze: User wants to prevent rm -rf commands\n2. Ask: \"Should I block this command or just warn you?\"\n3. User selects: \"Just warn\"\n4. Create `.claude/hookify.dangerous-rm.local.md`:\n   ```markdown\n   ---\n   name: warn-dangerous-rm\n   enabled: true\n   event: bash\n   pattern: rm\\s+-rf\n   ---\n\n   âš ï¸ **Dangerous rm command detected**\n\n   You requested to be warned before using rm -rf.\n   Please verify the path is correct.\n   ```\n5. Confirm: \"Created hookify rule. It's active immediately - try triggering it!\"\n\n## Important Notes\n\n- **No restart needed**: Rules take effect immediately on the next tool use\n- **File location**: Create files in project's `.claude/` directory (current working directory), NOT the plugin's .claude/\n- **Regex syntax**: Use Python regex syntax (raw strings, no need to escape in YAML)\n- **Action types**: Rules can `warn` (default) or `block` operations\n- **Testing**: Test rules immediately after creating them\n\n## Troubleshooting\n\n**If rule file creation fails:**\n1. Check current working directory with pwd\n2. Ensure `.claude/` directory exists (create with mkdir if needed)\n3. Use absolute path if needed: `{cwd}/.claude/hookify.{name}.local.md`\n4. Verify file was created with Glob or ls\n\n**If rule doesn't trigger after creation:**\n1. Verify file is in project `.claude/` not plugin `.claude/`\n2. Check file with Read tool to ensure pattern is correct\n3. Test pattern with: `python3 -c \"import re; print(re.search(r'pattern', 'test text'))\"`\n4. Verify `enabled: true` in frontmatter\n5. Remember: Rules work immediately, no restart needed\n\n**If blocking seems too strict:**\n1. Change `action: block` to `action: warn` in the rule file\n2. Or adjust the pattern to be more specific\n3. Changes take effect on next tool use\n\nUse TodoWrite to track your progress through the steps."
              },
              {
                "name": "/list",
                "description": "List all configured hookify rules",
                "path": "plugins/hookify/commands/list.md",
                "frontmatter": {
                  "description": "List all configured hookify rules",
                  "allowed-tools": [
                    "Glob",
                    "Read",
                    "Skill"
                  ]
                },
                "content": "# List Hookify Rules\n\n**Load hookify:writing-rules skill first** to understand rule format.\n\nShow all configured hookify rules in the project.\n\n## Steps\n\n1. Use Glob tool to find all hookify rule files:\n   ```\n   pattern: \".claude/hookify.*.local.md\"\n   ```\n\n2. For each file found:\n   - Use Read tool to read the file\n   - Extract frontmatter fields: name, enabled, event, pattern\n   - Extract message preview (first 100 chars)\n\n3. Present results in a table:\n\n```\n## Configured Hookify Rules\n\n| Name | Enabled | Event | Pattern | File |\n|------|---------|-------|---------|------|\n| warn-dangerous-rm | âœ… Yes | bash | rm\\s+-rf | hookify.dangerous-rm.local.md |\n| warn-console-log | âœ… Yes | file | console\\.log\\( | hookify.console-log.local.md |\n| check-tests | âŒ No | stop | .* | hookify.require-tests.local.md |\n\n**Total**: 3 rules (2 enabled, 1 disabled)\n```\n\n4. For each rule, show a brief preview:\n```\n### warn-dangerous-rm\n**Event**: bash\n**Pattern**: `rm\\s+-rf`\n**Message**: \"âš ï¸ **Dangerous rm command detected!** This command could delete...\"\n\n**Status**: âœ… Active\n**File**: .claude/hookify.dangerous-rm.local.md\n```\n\n5. Add helpful footer:\n```\n---\n\nTo modify a rule: Edit the .local.md file directly\nTo disable a rule: Set `enabled: false` in frontmatter\nTo enable a rule: Set `enabled: true` in frontmatter\nTo delete a rule: Remove the .local.md file\nTo create a rule: Use `/hookify` command\n\n**Remember**: Changes take effect immediately - no restart needed\n```\n\n## If No Rules Found\n\nIf no hookify rules exist:\n\n```\n## No Hookify Rules Configured\n\nYou haven't created any hookify rules yet.\n\nTo get started:\n1. Use `/hookify` to analyze conversation and create rules\n2. Or manually create `.claude/hookify.my-rule.local.md` files\n3. See `/hookify:help` for documentation\n\nExample:\n```\n/hookify Warn me when I use console.log\n```\n\nCheck `${CLAUDE_PLUGIN_ROOT}/examples/` for example rule files.\n```"
              }
            ],
            "skills": [
              {
                "name": "Writing Hookify Rules",
                "description": "This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"configure hookify\", \"add a hookify rule\", or needs guidance on hookify rule syntax and patterns.",
                "path": "plugins/hookify/skills/writing-rules/SKILL.md",
                "frontmatter": {
                  "name": "Writing Hookify Rules",
                  "description": "This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"configure hookify\", \"add a hookify rule\", or needs guidance on hookify rule syntax and patterns.",
                  "version": "0.1.0"
                },
                "content": "# Writing Hookify Rules\n\n## Overview\n\nHookify rules are markdown files with YAML frontmatter that define patterns to watch for and messages to show when those patterns match. Rules are stored in `.claude/hookify.{rule-name}.local.md` files.\n\n## Rule File Format\n\n### Basic Structure\n\n```markdown\n---\nname: rule-identifier\nenabled: true\nevent: bash|file|stop|prompt|all\npattern: regex-pattern-here\n---\n\nMessage to show Claude when this rule triggers.\nCan include markdown formatting, warnings, suggestions, etc.\n```\n\n### Frontmatter Fields\n\n**name** (required): Unique identifier for the rule\n- Use kebab-case: `warn-dangerous-rm`, `block-console-log`\n- Be descriptive and action-oriented\n- Start with verb: warn, prevent, block, require, check\n\n**enabled** (required): Boolean to activate/deactivate\n- `true`: Rule is active\n- `false`: Rule is disabled (won't trigger)\n- Can toggle without deleting rule\n\n**event** (required): Which hook event to trigger on\n- `bash`: Bash tool commands\n- `file`: Edit, Write, MultiEdit tools\n- `stop`: When agent wants to stop\n- `prompt`: When user submits a prompt\n- `all`: All events\n\n**action** (optional): What to do when rule matches\n- `warn`: Show message but allow operation (default)\n- `block`: Prevent operation (PreToolUse) or stop session (Stop events)\n- If omitted, defaults to `warn`\n\n**pattern** (simple format): Regex pattern to match\n- Used for simple single-condition rules\n- Matches against command (bash) or new_text (file)\n- Python regex syntax\n\n**Example:**\n```yaml\nevent: bash\npattern: rm\\s+-rf\n```\n\n### Advanced Format (Multiple Conditions)\n\nFor complex rules with multiple conditions:\n\n```markdown\n---\nname: warn-env-file-edits\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.env$\n  - field: new_text\n    operator: contains\n    pattern: API_KEY\n---\n\nYou're adding an API key to a .env file. Ensure this file is in .gitignore!\n```\n\n**Condition fields:**\n- `field`: Which field to check\n  - For bash: `command`\n  - For file: `file_path`, `new_text`, `old_text`, `content`\n- `operator`: How to match\n  - `regex_match`: Regex pattern matching\n  - `contains`: Substring check\n  - `equals`: Exact match\n  - `not_contains`: Substring must NOT be present\n  - `starts_with`: Prefix check\n  - `ends_with`: Suffix check\n- `pattern`: Pattern or string to match\n\n**All conditions must match for rule to trigger.**\n\n## Message Body\n\nThe markdown content after frontmatter is shown to Claude when the rule triggers.\n\n**Good messages:**\n- Explain what was detected\n- Explain why it's problematic\n- Suggest alternatives or best practices\n- Use formatting for clarity (bold, lists, etc.)\n\n**Example:**\n```markdown\nâš ï¸ **Console.log detected!**\n\nYou're adding console.log to production code.\n\n**Why this matters:**\n- Debug logs shouldn't ship to production\n- Console.log can expose sensitive data\n- Impacts browser performance\n\n**Alternatives:**\n- Use a proper logging library\n- Remove before committing\n- Use conditional debug builds\n```\n\n## Event Type Guide\n\n### bash Events\n\nMatch Bash command patterns:\n\n```markdown\n---\nevent: bash\npattern: sudo\\s+|rm\\s+-rf|chmod\\s+777\n---\n\nDangerous command detected!\n```\n\n**Common patterns:**\n- Dangerous commands: `rm\\s+-rf`, `dd\\s+if=`, `mkfs`\n- Privilege escalation: `sudo\\s+`, `su\\s+`\n- Permission issues: `chmod\\s+777`, `chown\\s+root`\n\n### file Events\n\nMatch Edit/Write/MultiEdit operations:\n\n```markdown\n---\nevent: file\npattern: console\\.log\\(|eval\\(|innerHTML\\s*=\n---\n\nPotentially problematic code pattern detected!\n```\n\n**Match on different fields:**\n```markdown\n---\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.tsx?$\n  - field: new_text\n    operator: regex_match\n    pattern: console\\.log\\(\n---\n\nConsole.log in TypeScript file!\n```\n\n**Common patterns:**\n- Debug code: `console\\.log\\(`, `debugger`, `print\\(`\n- Security risks: `eval\\(`, `innerHTML\\s*=`, `dangerouslySetInnerHTML`\n- Sensitive files: `\\.env$`, `credentials`, `\\.pem$`\n- Generated files: `node_modules/`, `dist/`, `build/`\n\n### stop Events\n\nMatch when agent wants to stop (completion checks):\n\n```markdown\n---\nevent: stop\npattern: .*\n---\n\nBefore stopping, verify:\n- [ ] Tests were run\n- [ ] Build succeeded\n- [ ] Documentation updated\n```\n\n**Use for:**\n- Reminders about required steps\n- Completion checklists\n- Process enforcement\n\n### prompt Events\n\nMatch user prompt content (advanced):\n\n```markdown\n---\nevent: prompt\nconditions:\n  - field: user_prompt\n    operator: contains\n    pattern: deploy to production\n---\n\nProduction deployment checklist:\n- [ ] Tests passing?\n- [ ] Reviewed by team?\n- [ ] Monitoring ready?\n```\n\n## Pattern Writing Tips\n\n### Regex Basics\n\n**Literal characters:** Most characters match themselves\n- `rm` matches \"rm\"\n- `console.log` matches \"console.log\"\n\n**Special characters need escaping:**\n- `.` (any char) â†’ `\\.` (literal dot)\n- `(` `)` â†’ `\\(` `\\)` (literal parens)\n- `[` `]` â†’ `\\[` `\\]` (literal brackets)\n\n**Common metacharacters:**\n- `\\s` - whitespace (space, tab, newline)\n- `\\d` - digit (0-9)\n- `\\w` - word character (a-z, A-Z, 0-9, _)\n- `.` - any character\n- `+` - one or more\n- `*` - zero or more\n- `?` - zero or one\n- `|` - OR\n\n**Examples:**\n```\nrm\\s+-rf         Matches: rm -rf, rm  -rf\nconsole\\.log\\(   Matches: console.log(\n(eval|exec)\\(    Matches: eval( or exec(\nchmod\\s+777      Matches: chmod 777, chmod  777\nAPI_KEY\\s*=      Matches: API_KEY=, API_KEY =\n```\n\n### Testing Patterns\n\nTest regex patterns before using:\n\n```bash\npython3 -c \"import re; print(re.search(r'your_pattern', 'test text'))\"\n```\n\nOr use online regex testers (regex101.com with Python flavor).\n\n### Common Pitfalls\n\n**Too broad:**\n```yaml\npattern: log    # Matches \"log\", \"login\", \"dialog\", \"catalog\"\n```\nBetter: `console\\.log\\(|logger\\.`\n\n**Too specific:**\n```yaml\npattern: rm -rf /tmp  # Only matches exact path\n```\nBetter: `rm\\s+-rf`\n\n**Escaping issues:**\n- YAML quoted strings: `\"pattern\"` requires double backslashes `\\\\s`\n- YAML unquoted: `pattern: \\s` works as-is\n- **Recommendation**: Use unquoted patterns in YAML\n\n## File Organization\n\n**Location:** All rules in `.claude/` directory\n**Naming:** `.claude/hookify.{descriptive-name}.local.md`\n**Gitignore:** Add `.claude/*.local.md` to `.gitignore`\n\n**Good names:**\n- `hookify.dangerous-rm.local.md`\n- `hookify.console-log.local.md`\n- `hookify.require-tests.local.md`\n- `hookify.sensitive-files.local.md`\n\n**Bad names:**\n- `hookify.rule1.local.md` (not descriptive)\n- `hookify.md` (missing .local)\n- `danger.local.md` (missing hookify prefix)\n\n## Workflow\n\n### Creating a Rule\n\n1. Identify unwanted behavior\n2. Determine which tool is involved (Bash, Edit, etc.)\n3. Choose event type (bash, file, stop, etc.)\n4. Write regex pattern\n5. Create `.claude/hookify.{name}.local.md` file in project root\n6. Test immediately - rules are read dynamically on next tool use\n\n### Refining a Rule\n\n1. Edit the `.local.md` file\n2. Adjust pattern or message\n3. Test immediately - changes take effect on next tool use\n\n### Disabling a Rule\n\n**Temporary:** Set `enabled: false` in frontmatter\n**Permanent:** Delete the `.local.md` file\n\n## Examples\n\nSee `${CLAUDE_PLUGIN_ROOT}/examples/` for complete examples:\n- `dangerous-rm.local.md` - Block dangerous rm commands\n- `console-log-warning.local.md` - Warn about console.log\n- `sensitive-files-warning.local.md` - Warn about editing .env files\n\n## Quick Reference\n\n**Minimum viable rule:**\n```markdown\n---\nname: my-rule\nenabled: true\nevent: bash\npattern: dangerous_command\n---\n\nWarning message here\n```\n\n**Rule with conditions:**\n```markdown\n---\nname: my-rule\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.ts$\n  - field: new_text\n    operator: contains\n    pattern: any\n---\n\nWarning message\n```\n\n**Event types:**\n- `bash` - Bash commands\n- `file` - File edits\n- `stop` - Completion checks\n- `prompt` - User input\n- `all` - All events\n\n**Field options:**\n- Bash: `command`\n- File: `file_path`, `new_text`, `old_text`, `content`\n- Prompt: `user_prompt`\n\n**Operators:**\n- `regex_match`, `contains`, `equals`, `not_contains`, `starts_with`, `ends_with`"
              }
            ]
          },
          {
            "name": "learning-output-style",
            "description": "Interactive learning mode that requests meaningful code contributions at decision points (mimics the unshipped Learning output style)",
            "source": "./plugins/learning-output-style",
            "category": "learning",
            "version": "1.0.0",
            "author": {
              "name": "Boris Cherny",
              "email": "boris@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install learning-output-style@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [],
            "skills": []
          },
          {
            "name": "plugin-dev",
            "description": "Comprehensive toolkit for developing Claude Code plugins. Includes 7 expert skills covering hooks, MCP integration, commands, agents, and best practices. AI-assisted plugin creation and validation.",
            "source": "./plugins/plugin-dev",
            "category": "development",
            "version": "0.1.0",
            "author": {
              "name": "Daisy Hollman",
              "email": "daisy@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install plugin-dev@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [
              {
                "name": "/create-plugin",
                "description": "Guided end-to-end plugin creation workflow with component design, implementation, and validation",
                "path": "plugins/plugin-dev/commands/create-plugin.md",
                "frontmatter": {
                  "description": "Guided end-to-end plugin creation workflow with component design, implementation, and validation",
                  "argument-hint": "Optional plugin description",
                  "allowed-tools": [
                    "Read",
                    "Write",
                    "Grep",
                    "Glob",
                    "Bash",
                    "TodoWrite",
                    "AskUserQuestion",
                    "Skill",
                    "Task"
                  ]
                },
                "content": "# Plugin Creation Workflow\n\nGuide the user through creating a complete, high-quality Claude Code plugin from initial concept to tested implementation. Follow a systematic approach: understand requirements, design components, clarify details, implement following best practices, validate, and test.\n\n## Core Principles\n\n- **Ask clarifying questions**: Identify all ambiguities about plugin purpose, triggering, scope, and components. Ask specific, concrete questions rather than making assumptions. Wait for user answers before proceeding with implementation.\n- **Load relevant skills**: Use the Skill tool to load plugin-dev skills when needed (plugin-structure, hook-development, agent-development, etc.)\n- **Use specialized agents**: Leverage agent-creator, plugin-validator, and skill-reviewer agents for AI-assisted development\n- **Follow best practices**: Apply patterns from plugin-dev's own implementation\n- **Progressive disclosure**: Create lean skills with references/examples\n- **Use TodoWrite**: Track all progress throughout all phases\n\n**Initial request:** $ARGUMENTS\n\n---\n\n## Phase 1: Discovery\n\n**Goal**: Understand what plugin needs to be built and what problem it solves\n\n**Actions**:\n1. Create todo list with all 7 phases\n2. If plugin purpose is clear from arguments:\n   - Summarize understanding\n   - Identify plugin type (integration, workflow, analysis, toolkit, etc.)\n3. If plugin purpose is unclear, ask user:\n   - What problem does this plugin solve?\n   - Who will use it and when?\n   - What should it do?\n   - Any similar plugins to reference?\n4. Summarize understanding and confirm with user before proceeding\n\n**Output**: Clear statement of plugin purpose and target users\n\n---\n\n## Phase 2: Component Planning\n\n**Goal**: Determine what plugin components are needed\n\n**MUST load plugin-structure skill** using Skill tool before this phase.\n\n**Actions**:\n1. Load plugin-structure skill to understand component types\n2. Analyze plugin requirements and determine needed components:\n   - **Skills**: Does it need specialized knowledge? (hooks API, MCP patterns, etc.)\n   - **Commands**: User-initiated actions? (deploy, configure, analyze)\n   - **Agents**: Autonomous tasks? (validation, generation, analysis)\n   - **Hooks**: Event-driven automation? (validation, notifications)\n   - **MCP**: External service integration? (databases, APIs)\n   - **Settings**: User configuration? (.local.md files)\n3. For each component type needed, identify:\n   - How many of each type\n   - What each one does\n   - Rough triggering/usage patterns\n4. Present component plan to user as table:\n   ```\n   | Component Type | Count | Purpose |\n   |----------------|-------|---------|\n   | Skills         | 2     | Hook patterns, MCP usage |\n   | Commands       | 3     | Deploy, configure, validate |\n   | Agents         | 1     | Autonomous validation |\n   | Hooks          | 0     | Not needed |\n   | MCP            | 1     | Database integration |\n   ```\n5. Get user confirmation or adjustments\n\n**Output**: Confirmed list of components to create\n\n---\n\n## Phase 3: Detailed Design & Clarifying Questions\n\n**Goal**: Specify each component in detail and resolve all ambiguities\n\n**CRITICAL**: This is one of the most important phases. DO NOT SKIP.\n\n**Actions**:\n1. For each component in the plan, identify underspecified aspects:\n   - **Skills**: What triggers them? What knowledge do they provide? How detailed?\n   - **Commands**: What arguments? What tools? Interactive or automated?\n   - **Agents**: When to trigger (proactive/reactive)? What tools? Output format?\n   - **Hooks**: Which events? Prompt or command based? Validation criteria?\n   - **MCP**: What server type? Authentication? Which tools?\n   - **Settings**: What fields? Required vs optional? Defaults?\n\n2. **Present all questions to user in organized sections** (one section per component type)\n\n3. **Wait for answers before proceeding to implementation**\n\n4. If user says \"whatever you think is best\", provide specific recommendations and get explicit confirmation\n\n**Example questions for a skill**:\n- What specific user queries should trigger this skill?\n- Should it include utility scripts? What functionality?\n- How detailed should the core SKILL.md be vs references/?\n- Any real-world examples to include?\n\n**Example questions for an agent**:\n- Should this agent trigger proactively after certain actions, or only when explicitly requested?\n- What tools does it need (Read, Write, Bash, etc.)?\n- What should the output format be?\n- Any specific quality standards to enforce?\n\n**Output**: Detailed specification for each component\n\n---\n\n## Phase 4: Plugin Structure Creation\n\n**Goal**: Create plugin directory structure and manifest\n\n**Actions**:\n1. Determine plugin name (kebab-case, descriptive)\n2. Choose plugin location:\n   - Ask user: \"Where should I create the plugin?\"\n   - Offer options: current directory, ../new-plugin-name, custom path\n3. Create directory structure using bash:\n   ```bash\n   mkdir -p plugin-name/.claude-plugin\n   mkdir -p plugin-name/skills     # if needed\n   mkdir -p plugin-name/commands   # if needed\n   mkdir -p plugin-name/agents     # if needed\n   mkdir -p plugin-name/hooks      # if needed\n   ```\n4. Create plugin.json manifest using Write tool:\n   ```json\n   {\n     \"name\": \"plugin-name\",\n     \"version\": \"0.1.0\",\n     \"description\": \"[brief description]\",\n     \"author\": {\n       \"name\": \"[author from user or default]\",\n       \"email\": \"[email or default]\"\n     }\n   }\n   ```\n5. Create README.md template\n6. Create .gitignore if needed (for .claude/*.local.md, etc.)\n7. Initialize git repo if creating new directory\n\n**Output**: Plugin directory structure created and ready for components\n\n---\n\n## Phase 5: Component Implementation\n\n**Goal**: Create each component following best practices\n\n**LOAD RELEVANT SKILLS** before implementing each component type:\n- Skills: Load skill-development skill\n- Commands: Load command-development skill\n- Agents: Load agent-development skill\n- Hooks: Load hook-development skill\n- MCP: Load mcp-integration skill\n- Settings: Load plugin-settings skill\n\n**Actions for each component**:\n\n### For Skills:\n1. Load skill-development skill using Skill tool\n2. For each skill:\n   - Ask user for concrete usage examples (or use from Phase 3)\n   - Plan resources (scripts/, references/, examples/)\n   - Create skill directory structure\n   - Write SKILL.md with:\n     - Third-person description with specific trigger phrases\n     - Lean body (1,500-2,000 words) in imperative form\n     - References to supporting files\n   - Create reference files for detailed content\n   - Create example files for working code\n   - Create utility scripts if needed\n3. Use skill-reviewer agent to validate each skill\n\n### For Commands:\n1. Load command-development skill using Skill tool\n2. For each command:\n   - Write command markdown with frontmatter\n   - Include clear description and argument-hint\n   - Specify allowed-tools (minimal necessary)\n   - Write instructions FOR Claude (not TO user)\n   - Provide usage examples and tips\n   - Reference relevant skills if applicable\n\n### For Agents:\n1. Load agent-development skill using Skill tool\n2. For each agent, use agent-creator agent:\n   - Provide description of what agent should do\n   - Agent-creator generates: identifier, whenToUse with examples, systemPrompt\n   - Create agent markdown file with frontmatter and system prompt\n   - Add appropriate model, color, and tools\n   - Validate with validate-agent.sh script\n\n### For Hooks:\n1. Load hook-development skill using Skill tool\n2. For each hook:\n   - Create hooks/hooks.json with hook configuration\n   - Prefer prompt-based hooks for complex logic\n   - Use ${CLAUDE_PLUGIN_ROOT} for portability\n   - Create hook scripts if needed (in examples/ not scripts/)\n   - Test with validate-hook-schema.sh and test-hook.sh utilities\n\n### For MCP:\n1. Load mcp-integration skill using Skill tool\n2. Create .mcp.json configuration with:\n   - Server type (stdio for local, SSE for hosted)\n   - Command and args (with ${CLAUDE_PLUGIN_ROOT})\n   - extensionToLanguage mapping if LSP\n   - Environment variables as needed\n3. Document required env vars in README\n4. Provide setup instructions\n\n### For Settings:\n1. Load plugin-settings skill using Skill tool\n2. Create settings template in README\n3. Create example .claude/plugin-name.local.md file (as documentation)\n4. Implement settings reading in hooks/commands as needed\n5. Add to .gitignore: `.claude/*.local.md`\n\n**Progress tracking**: Update todos as each component is completed\n\n**Output**: All plugin components implemented\n\n---\n\n## Phase 6: Validation & Quality Check\n\n**Goal**: Ensure plugin meets quality standards and works correctly\n\n**Actions**:\n1. **Run plugin-validator agent**:\n   - Use plugin-validator agent to comprehensively validate plugin\n   - Check: manifest, structure, naming, components, security\n   - Review validation report\n\n2. **Fix critical issues**:\n   - Address any critical errors from validation\n   - Fix any warnings that indicate real problems\n\n3. **Review with skill-reviewer** (if plugin has skills):\n   - For each skill, use skill-reviewer agent\n   - Check description quality, progressive disclosure, writing style\n   - Apply recommendations\n\n4. **Test agent triggering** (if plugin has agents):\n   - For each agent, verify <example> blocks are clear\n   - Check triggering conditions are specific\n   - Run validate-agent.sh on agent files\n\n5. **Test hook configuration** (if plugin has hooks):\n   - Run validate-hook-schema.sh on hooks/hooks.json\n   - Test hook scripts with test-hook.sh\n   - Verify ${CLAUDE_PLUGIN_ROOT} usage\n\n6. **Present findings**:\n   - Summary of validation results\n   - Any remaining issues\n   - Overall quality assessment\n\n7. **Ask user**: \"Validation complete. Issues found: [count critical], [count warnings]. Would you like me to fix them now, or proceed to testing?\"\n\n**Output**: Plugin validated and ready for testing\n\n---\n\n## Phase 7: Testing & Verification\n\n**Goal**: Test that plugin works correctly in Claude Code\n\n**Actions**:\n1. **Installation instructions**:\n   - Show user how to test locally:\n     ```bash\n     cc --plugin-dir /path/to/plugin-name\n     ```\n   - Or copy to `.claude-plugin/` for project testing\n\n2. **Verification checklist** for user to perform:\n   - [ ] Skills load when triggered (ask questions with trigger phrases)\n   - [ ] Commands appear in `/help` and execute correctly\n   - [ ] Agents trigger on appropriate scenarios\n   - [ ] Hooks activate on events (if applicable)\n   - [ ] MCP servers connect (if applicable)\n   - [ ] Settings files work (if applicable)\n\n3. **Testing recommendations**:\n   - For skills: Ask questions using trigger phrases from descriptions\n   - For commands: Run `/plugin-name:command-name` with various arguments\n   - For agents: Create scenarios matching agent examples\n   - For hooks: Use `claude --debug` to see hook execution\n   - For MCP: Use `/mcp` to verify servers and tools\n\n4. **Ask user**: \"I've prepared the plugin for testing. Would you like me to guide you through testing each component, or do you want to test it yourself?\"\n\n5. **If user wants guidance**, walk through testing each component with specific test cases\n\n**Output**: Plugin tested and verified working\n\n---\n\n## Phase 8: Documentation & Next Steps\n\n**Goal**: Ensure plugin is well-documented and ready for distribution\n\n**Actions**:\n1. **Verify README completeness**:\n   - Check README has: overview, features, installation, prerequisites, usage\n   - For MCP plugins: Document required environment variables\n   - For hook plugins: Explain hook activation\n   - For settings: Provide configuration templates\n\n2. **Add marketplace entry** (if publishing):\n   - Show user how to add to marketplace.json\n   - Help draft marketplace description\n   - Suggest category and tags\n\n3. **Create summary**:\n   - Mark all todos complete\n   - List what was created:\n     - Plugin name and purpose\n     - Components created (X skills, Y commands, Z agents, etc.)\n     - Key files and their purposes\n     - Total file count and structure\n   - Next steps:\n     - Testing recommendations\n     - Publishing to marketplace (if desired)\n     - Iteration based on usage\n\n4. **Suggest improvements** (optional):\n   - Additional components that could enhance plugin\n   - Integration opportunities\n   - Testing strategies\n\n**Output**: Complete, documented plugin ready for use or publication\n\n---\n\n## Important Notes\n\n### Throughout All Phases\n\n- **Use TodoWrite** to track progress at every phase\n- **Load skills with Skill tool** when working on specific component types\n- **Use specialized agents** (agent-creator, plugin-validator, skill-reviewer)\n- **Ask for user confirmation** at key decision points\n- **Follow plugin-dev's own patterns** as reference examples\n- **Apply best practices**:\n  - Third-person descriptions for skills\n  - Imperative form in skill bodies\n  - Commands written FOR Claude\n  - Strong trigger phrases\n  - ${CLAUDE_PLUGIN_ROOT} for portability\n  - Progressive disclosure\n  - Security-first (HTTPS, no hardcoded credentials)\n\n### Key Decision Points (Wait for User)\n\n1. After Phase 1: Confirm plugin purpose\n2. After Phase 2: Approve component plan\n3. After Phase 3: Proceed to implementation\n4. After Phase 6: Fix issues or proceed\n5. After Phase 7: Continue to documentation\n\n### Skills to Load by Phase\n\n- **Phase 2**: plugin-structure\n- **Phase 5**: skill-development, command-development, agent-development, hook-development, mcp-integration, plugin-settings (as needed)\n- **Phase 6**: (agents will use skills automatically)\n\n### Quality Standards\n\nEvery component must meet these standards:\n- âœ… Follows plugin-dev's proven patterns\n- âœ… Uses correct naming conventions\n- âœ… Has strong trigger conditions (skills/agents)\n- âœ… Includes working examples\n- âœ… Properly documented\n- âœ… Validated with utilities\n- âœ… Tested in Claude Code\n\n---\n\n## Example Workflow\n\n### User Request\n\"Create a plugin for managing database migrations\"\n\n### Phase 1: Discovery\n- Understand: Migration management, database schema versioning\n- Confirm: User wants to create, run, rollback migrations\n\n### Phase 2: Component Planning\n- Skills: 1 (migration best practices)\n- Commands: 3 (create-migration, run-migrations, rollback)\n- Agents: 1 (migration-validator)\n- MCP: 1 (database connection)\n\n### Phase 3: Clarifying Questions\n- Which databases? (PostgreSQL, MySQL, etc.)\n- Migration file format? (SQL, code-based?)\n- Should agent validate before applying?\n- What MCP tools needed? (query, execute, schema)\n\n### Phase 4-8: Implementation, Validation, Testing, Documentation\n\n---\n\n**Begin with Phase 1: Discovery**"
              }
            ],
            "skills": [
              {
                "name": "Agent Development",
                "description": "This skill should be used when the user asks to \"create an agent\", \"add an agent\", \"write a subagent\", \"agent frontmatter\", \"when to use description\", \"agent examples\", \"agent tools\", \"agent colors\", \"autonomous agent\", or needs guidance on agent structure, system prompts, triggering conditions, or agent development best practices for Claude Code plugins.",
                "path": "plugins/plugin-dev/skills/agent-development/SKILL.md",
                "frontmatter": {
                  "name": "Agent Development",
                  "description": "This skill should be used when the user asks to \"create an agent\", \"add an agent\", \"write a subagent\", \"agent frontmatter\", \"when to use description\", \"agent examples\", \"agent tools\", \"agent colors\", \"autonomous agent\", or needs guidance on agent structure, system prompts, triggering conditions, or agent development best practices for Claude Code plugins.",
                  "version": "0.1.0"
                },
                "content": "# Agent Development for Claude Code Plugins\n\n## Overview\n\nAgents are autonomous subprocesses that handle complex, multi-step tasks independently. Understanding agent structure, triggering conditions, and system prompt design enables creating powerful autonomous capabilities.\n\n**Key concepts:**\n- Agents are FOR autonomous work, commands are FOR user-initiated actions\n- Markdown file format with YAML frontmatter\n- Triggering via description field with examples\n- System prompt defines agent behavior\n- Model and color customization\n\n## Agent File Structure\n\n### Complete Format\n\n```markdown\n---\nname: agent-identifier\ndescription: Use this agent when [triggering conditions]. Examples:\n\n<example>\nContext: [Situation description]\nuser: \"[User request]\"\nassistant: \"[How assistant should respond and use this agent]\"\n<commentary>\n[Why this agent should be triggered]\n</commentary>\n</example>\n\n<example>\n[Additional example...]\n</example>\n\nmodel: inherit\ncolor: blue\ntools: [\"Read\", \"Write\", \"Grep\"]\n---\n\nYou are [agent role description]...\n\n**Your Core Responsibilities:**\n1. [Responsibility 1]\n2. [Responsibility 2]\n\n**Analysis Process:**\n[Step-by-step workflow]\n\n**Output Format:**\n[What to return]\n```\n\n## Frontmatter Fields\n\n### name (required)\n\nAgent identifier used for namespacing and invocation.\n\n**Format:** lowercase, numbers, hyphens only\n**Length:** 3-50 characters\n**Pattern:** Must start and end with alphanumeric\n\n**Good examples:**\n- `code-reviewer`\n- `test-generator`\n- `api-docs-writer`\n- `security-analyzer`\n\n**Bad examples:**\n- `helper` (too generic)\n- `-agent-` (starts/ends with hyphen)\n- `my_agent` (underscores not allowed)\n- `ag` (too short, < 3 chars)\n\n### description (required)\n\nDefines when Claude should trigger this agent. **This is the most critical field.**\n\n**Must include:**\n1. Triggering conditions (\"Use this agent when...\")\n2. Multiple `<example>` blocks showing usage\n3. Context, user request, and assistant response in each example\n4. `<commentary>` explaining why agent triggers\n\n**Format:**\n```\nUse this agent when [conditions]. Examples:\n\n<example>\nContext: [Scenario description]\nuser: \"[What user says]\"\nassistant: \"[How Claude should respond]\"\n<commentary>\n[Why this agent is appropriate]\n</commentary>\n</example>\n\n[More examples...]\n```\n\n**Best practices:**\n- Include 2-4 concrete examples\n- Show proactive and reactive triggering\n- Cover different phrasings of same intent\n- Explain reasoning in commentary\n- Be specific about when NOT to use the agent\n\n### model (required)\n\nWhich model the agent should use.\n\n**Options:**\n- `inherit` - Use same model as parent (recommended)\n- `sonnet` - Claude Sonnet (balanced)\n- `opus` - Claude Opus (most capable, expensive)\n- `haiku` - Claude Haiku (fast, cheap)\n\n**Recommendation:** Use `inherit` unless agent needs specific model capabilities.\n\n### color (required)\n\nVisual identifier for agent in UI.\n\n**Options:** `blue`, `cyan`, `green`, `yellow`, `magenta`, `red`\n\n**Guidelines:**\n- Choose distinct colors for different agents in same plugin\n- Use consistent colors for similar agent types\n- Blue/cyan: Analysis, review\n- Green: Success-oriented tasks\n- Yellow: Caution, validation\n- Red: Critical, security\n- Magenta: Creative, generation\n\n### tools (optional)\n\nRestrict agent to specific tools.\n\n**Format:** Array of tool names\n\n```yaml\ntools: [\"Read\", \"Write\", \"Grep\", \"Bash\"]\n```\n\n**Default:** If omitted, agent has access to all tools\n\n**Best practice:** Limit tools to minimum needed (principle of least privilege)\n\n**Common tool sets:**\n- Read-only analysis: `[\"Read\", \"Grep\", \"Glob\"]`\n- Code generation: `[\"Read\", \"Write\", \"Grep\"]`\n- Testing: `[\"Read\", \"Bash\", \"Grep\"]`\n- Full access: Omit field or use `[\"*\"]`\n\n## System Prompt Design\n\nThe markdown body becomes the agent's system prompt. Write in second person, addressing the agent directly.\n\n### Structure\n\n**Standard template:**\n```markdown\nYou are [role] specializing in [domain].\n\n**Your Core Responsibilities:**\n1. [Primary responsibility]\n2. [Secondary responsibility]\n3. [Additional responsibilities...]\n\n**Analysis Process:**\n1. [Step one]\n2. [Step two]\n3. [Step three]\n[...]\n\n**Quality Standards:**\n- [Standard 1]\n- [Standard 2]\n\n**Output Format:**\nProvide results in this format:\n- [What to include]\n- [How to structure]\n\n**Edge Cases:**\nHandle these situations:\n- [Edge case 1]: [How to handle]\n- [Edge case 2]: [How to handle]\n```\n\n### Best Practices\n\nâœ… **DO:**\n- Write in second person (\"You are...\", \"You will...\")\n- Be specific about responsibilities\n- Provide step-by-step process\n- Define output format\n- Include quality standards\n- Address edge cases\n- Keep under 10,000 characters\n\nâŒ **DON'T:**\n- Write in first person (\"I am...\", \"I will...\")\n- Be vague or generic\n- Omit process steps\n- Leave output format undefined\n- Skip quality guidance\n- Ignore error cases\n\n## Creating Agents\n\n### Method 1: AI-Assisted Generation\n\nUse this prompt pattern (extracted from Claude Code):\n\n```\nCreate an agent configuration based on this request: \"[YOUR DESCRIPTION]\"\n\nRequirements:\n1. Extract core intent and responsibilities\n2. Design expert persona for the domain\n3. Create comprehensive system prompt with:\n   - Clear behavioral boundaries\n   - Specific methodologies\n   - Edge case handling\n   - Output format\n4. Create identifier (lowercase, hyphens, 3-50 chars)\n5. Write description with triggering conditions\n6. Include 2-3 <example> blocks showing when to use\n\nReturn JSON with:\n{\n  \"identifier\": \"agent-name\",\n  \"whenToUse\": \"Use this agent when... Examples: <example>...</example>\",\n  \"systemPrompt\": \"You are...\"\n}\n```\n\nThen convert to agent file format with frontmatter.\n\nSee `examples/agent-creation-prompt.md` for complete template.\n\n### Method 2: Manual Creation\n\n1. Choose agent identifier (3-50 chars, lowercase, hyphens)\n2. Write description with examples\n3. Select model (usually `inherit`)\n4. Choose color for visual identification\n5. Define tools (if restricting access)\n6. Write system prompt with structure above\n7. Save as `agents/agent-name.md`\n\n## Validation Rules\n\n### Identifier Validation\n\n```\nâœ… Valid: code-reviewer, test-gen, api-analyzer-v2\nâŒ Invalid: ag (too short), -start (starts with hyphen), my_agent (underscore)\n```\n\n**Rules:**\n- 3-50 characters\n- Lowercase letters, numbers, hyphens only\n- Must start and end with alphanumeric\n- No underscores, spaces, or special characters\n\n### Description Validation\n\n**Length:** 10-5,000 characters\n**Must include:** Triggering conditions and examples\n**Best:** 200-1,000 characters with 2-4 examples\n\n### System Prompt Validation\n\n**Length:** 20-10,000 characters\n**Best:** 500-3,000 characters\n**Structure:** Clear responsibilities, process, output format\n\n## Agent Organization\n\n### Plugin Agents Directory\n\n```\nplugin-name/\nâ””â”€â”€ agents/\n    â”œâ”€â”€ analyzer.md\n    â”œâ”€â”€ reviewer.md\n    â””â”€â”€ generator.md\n```\n\nAll `.md` files in `agents/` are auto-discovered.\n\n### Namespacing\n\nAgents are namespaced automatically:\n- Single plugin: `agent-name`\n- With subdirectories: `plugin:subdir:agent-name`\n\n## Testing Agents\n\n### Test Triggering\n\nCreate test scenarios to verify agent triggers correctly:\n\n1. Write agent with specific triggering examples\n2. Use similar phrasing to examples in test\n3. Check Claude loads the agent\n4. Verify agent provides expected functionality\n\n### Test System Prompt\n\nEnsure system prompt is complete:\n\n1. Give agent typical task\n2. Check it follows process steps\n3. Verify output format is correct\n4. Test edge cases mentioned in prompt\n5. Confirm quality standards are met\n\n## Quick Reference\n\n### Minimal Agent\n\n```markdown\n---\nname: simple-agent\ndescription: Use this agent when... Examples: <example>...</example>\nmodel: inherit\ncolor: blue\n---\n\nYou are an agent that [does X].\n\nProcess:\n1. [Step 1]\n2. [Step 2]\n\nOutput: [What to provide]\n```\n\n### Frontmatter Fields Summary\n\n| Field | Required | Format | Example |\n|-------|----------|--------|---------|\n| name | Yes | lowercase-hyphens | code-reviewer |\n| description | Yes | Text + examples | Use when... <example>... |\n| model | Yes | inherit/sonnet/opus/haiku | inherit |\n| color | Yes | Color name | blue |\n| tools | No | Array of tool names | [\"Read\", \"Grep\"] |\n\n### Best Practices\n\n**DO:**\n- âœ… Include 2-4 concrete examples in description\n- âœ… Write specific triggering conditions\n- âœ… Use `inherit` for model unless specific need\n- âœ… Choose appropriate tools (least privilege)\n- âœ… Write clear, structured system prompts\n- âœ… Test agent triggering thoroughly\n\n**DON'T:**\n- âŒ Use generic descriptions without examples\n- âŒ Omit triggering conditions\n- âŒ Give all agents same color\n- âŒ Grant unnecessary tool access\n- âŒ Write vague system prompts\n- âŒ Skip testing\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed guidance, consult:\n\n- **`references/system-prompt-design.md`** - Complete system prompt patterns\n- **`references/triggering-examples.md`** - Example formats and best practices\n- **`references/agent-creation-system-prompt.md`** - The exact prompt from Claude Code\n\n### Example Files\n\nWorking examples in `examples/`:\n\n- **`agent-creation-prompt.md`** - AI-assisted agent generation template\n- **`complete-agent-examples.md`** - Full agent examples for different use cases\n\n### Utility Scripts\n\nDevelopment tools in `scripts/`:\n\n- **`validate-agent.sh`** - Validate agent file structure\n- **`test-agent-trigger.sh`** - Test if agent triggers correctly\n\n## Implementation Workflow\n\nTo create an agent for a plugin:\n\n1. Define agent purpose and triggering conditions\n2. Choose creation method (AI-assisted or manual)\n3. Create `agents/agent-name.md` file\n4. Write frontmatter with all required fields\n5. Write system prompt following best practices\n6. Include 2-4 triggering examples in description\n7. Validate with `scripts/validate-agent.sh`\n8. Test triggering with real scenarios\n9. Document agent in plugin README\n\nFocus on clear triggering conditions and comprehensive system prompts for autonomous operation."
              },
              {
                "name": "Command Development",
                "description": "This skill should be used when the user asks to \"create a slash command\", \"add a command\", \"write a custom command\", \"define command arguments\", \"use command frontmatter\", \"organize commands\", \"create command with file references\", \"interactive command\", \"use AskUserQuestion in command\", or needs guidance on slash command structure, YAML frontmatter fields, dynamic arguments, bash execution in commands, user interaction patterns, or command development best practices for Claude Code.",
                "path": "plugins/plugin-dev/skills/command-development/SKILL.md",
                "frontmatter": {
                  "name": "Command Development",
                  "description": "This skill should be used when the user asks to \"create a slash command\", \"add a command\", \"write a custom command\", \"define command arguments\", \"use command frontmatter\", \"organize commands\", \"create command with file references\", \"interactive command\", \"use AskUserQuestion in command\", or needs guidance on slash command structure, YAML frontmatter fields, dynamic arguments, bash execution in commands, user interaction patterns, or command development best practices for Claude Code.",
                  "version": "0.2.0"
                },
                "content": "# Command Development for Claude Code\n\n## Overview\n\nSlash commands are frequently-used prompts defined as Markdown files that Claude executes during interactive sessions. Understanding command structure, frontmatter options, and dynamic features enables creating powerful, reusable workflows.\n\n**Key concepts:**\n- Markdown file format for commands\n- YAML frontmatter for configuration\n- Dynamic arguments and file references\n- Bash execution for context\n- Command organization and namespacing\n\n## Command Basics\n\n### What is a Slash Command?\n\nA slash command is a Markdown file containing a prompt that Claude executes when invoked. Commands provide:\n- **Reusability**: Define once, use repeatedly\n- **Consistency**: Standardize common workflows\n- **Sharing**: Distribute across team or projects\n- **Efficiency**: Quick access to complex prompts\n\n### Critical: Commands are Instructions FOR Claude\n\n**Commands are written for agent consumption, not human consumption.**\n\nWhen a user invokes `/command-name`, the command content becomes Claude's instructions. Write commands as directives TO Claude about what to do, not as messages TO the user.\n\n**Correct approach (instructions for Claude):**\n```markdown\nReview this code for security vulnerabilities including:\n- SQL injection\n- XSS attacks\n- Authentication issues\n\nProvide specific line numbers and severity ratings.\n```\n\n**Incorrect approach (messages to user):**\n```markdown\nThis command will review your code for security issues.\nYou'll receive a report with vulnerability details.\n```\n\nThe first example tells Claude what to do. The second tells the user what will happen but doesn't instruct Claude. Always use the first approach.\n\n### Command Locations\n\n**Project commands** (shared with team):\n- Location: `.claude/commands/`\n- Scope: Available in specific project\n- Label: Shown as \"(project)\" in `/help`\n- Use for: Team workflows, project-specific tasks\n\n**Personal commands** (available everywhere):\n- Location: `~/.claude/commands/`\n- Scope: Available in all projects\n- Label: Shown as \"(user)\" in `/help`\n- Use for: Personal workflows, cross-project utilities\n\n**Plugin commands** (bundled with plugins):\n- Location: `plugin-name/commands/`\n- Scope: Available when plugin installed\n- Label: Shown as \"(plugin-name)\" in `/help`\n- Use for: Plugin-specific functionality\n\n## File Format\n\n### Basic Structure\n\nCommands are Markdown files with `.md` extension:\n\n```\n.claude/commands/\nâ”œâ”€â”€ review.md           # /review command\nâ”œâ”€â”€ test.md             # /test command\nâ””â”€â”€ deploy.md           # /deploy command\n```\n\n**Simple command:**\n```markdown\nReview this code for security vulnerabilities including:\n- SQL injection\n- XSS attacks\n- Authentication bypass\n- Insecure data handling\n```\n\nNo frontmatter needed for basic commands.\n\n### With YAML Frontmatter\n\nAdd configuration using YAML frontmatter:\n\n```markdown\n---\ndescription: Review code for security issues\nallowed-tools: Read, Grep, Bash(git:*)\nmodel: sonnet\n---\n\nReview this code for security vulnerabilities...\n```\n\n## YAML Frontmatter Fields\n\n### description\n\n**Purpose:** Brief description shown in `/help`\n**Type:** String\n**Default:** First line of command prompt\n\n```yaml\n---\ndescription: Review pull request for code quality\n---\n```\n\n**Best practice:** Clear, actionable description (under 60 characters)\n\n### allowed-tools\n\n**Purpose:** Specify which tools command can use\n**Type:** String or Array\n**Default:** Inherits from conversation\n\n```yaml\n---\nallowed-tools: Read, Write, Edit, Bash(git:*)\n---\n```\n\n**Patterns:**\n- `Read, Write, Edit` - Specific tools\n- `Bash(git:*)` - Bash with git commands only\n- `*` - All tools (rarely needed)\n\n**Use when:** Command requires specific tool access\n\n### model\n\n**Purpose:** Specify model for command execution\n**Type:** String (sonnet, opus, haiku)\n**Default:** Inherits from conversation\n\n```yaml\n---\nmodel: haiku\n---\n```\n\n**Use cases:**\n- `haiku` - Fast, simple commands\n- `sonnet` - Standard workflows\n- `opus` - Complex analysis\n\n### argument-hint\n\n**Purpose:** Document expected arguments for autocomplete\n**Type:** String\n**Default:** None\n\n```yaml\n---\nargument-hint: [pr-number] [priority] [assignee]\n---\n```\n\n**Benefits:**\n- Helps users understand command arguments\n- Improves command discovery\n- Documents command interface\n\n### disable-model-invocation\n\n**Purpose:** Prevent SlashCommand tool from programmatically calling command\n**Type:** Boolean\n**Default:** false\n\n```yaml\n---\ndisable-model-invocation: true\n---\n```\n\n**Use when:** Command should only be manually invoked\n\n## Dynamic Arguments\n\n### Using $ARGUMENTS\n\nCapture all arguments as single string:\n\n```markdown\n---\ndescription: Fix issue by number\nargument-hint: [issue-number]\n---\n\nFix issue #$ARGUMENTS following our coding standards and best practices.\n```\n\n**Usage:**\n```\n> /fix-issue 123\n> /fix-issue 456\n```\n\n**Expands to:**\n```\nFix issue #123 following our coding standards...\nFix issue #456 following our coding standards...\n```\n\n### Using Positional Arguments\n\nCapture individual arguments with `$1`, `$2`, `$3`, etc.:\n\n```markdown\n---\ndescription: Review PR with priority and assignee\nargument-hint: [pr-number] [priority] [assignee]\n---\n\nReview pull request #$1 with priority level $2.\nAfter review, assign to $3 for follow-up.\n```\n\n**Usage:**\n```\n> /review-pr 123 high alice\n```\n\n**Expands to:**\n```\nReview pull request #123 with priority level high.\nAfter review, assign to alice for follow-up.\n```\n\n### Combining Arguments\n\nMix positional and remaining arguments:\n\n```markdown\nDeploy $1 to $2 environment with options: $3\n```\n\n**Usage:**\n```\n> /deploy api staging --force --skip-tests\n```\n\n**Expands to:**\n```\nDeploy api to staging environment with options: --force --skip-tests\n```\n\n## File References\n\n### Using @ Syntax\n\nInclude file contents in command:\n\n```markdown\n---\ndescription: Review specific file\nargument-hint: [file-path]\n---\n\nReview @$1 for:\n- Code quality\n- Best practices\n- Potential bugs\n```\n\n**Usage:**\n```\n> /review-file src/api/users.ts\n```\n\n**Effect:** Claude reads `src/api/users.ts` before processing command\n\n### Multiple File References\n\nReference multiple files:\n\n```markdown\nCompare @src/old-version.js with @src/new-version.js\n\nIdentify:\n- Breaking changes\n- New features\n- Bug fixes\n```\n\n### Static File References\n\nReference known files without arguments:\n\n```markdown\nReview @package.json and @tsconfig.json for consistency\n\nEnsure:\n- TypeScript version matches\n- Dependencies are aligned\n- Build configuration is correct\n```\n\n## Bash Execution in Commands\n\nCommands can execute bash commands inline to dynamically gather context before Claude processes the command. This is useful for including repository state, environment information, or project-specific context.\n\n**When to use:**\n- Include dynamic context (git status, environment vars, etc.)\n- Gather project/repository state\n- Build context-aware workflows\n\n**Implementation details:**\nFor complete syntax, examples, and best practices, see `references/plugin-features-reference.md` section on bash execution. The reference includes the exact syntax and multiple working examples to avoid execution issues\n\n## Command Organization\n\n### Flat Structure\n\nSimple organization for small command sets:\n\n```\n.claude/commands/\nâ”œâ”€â”€ build.md\nâ”œâ”€â”€ test.md\nâ”œâ”€â”€ deploy.md\nâ”œâ”€â”€ review.md\nâ””â”€â”€ docs.md\n```\n\n**Use when:** 5-15 commands, no clear categories\n\n### Namespaced Structure\n\nOrganize commands in subdirectories:\n\n```\n.claude/commands/\nâ”œâ”€â”€ ci/\nâ”‚   â”œâ”€â”€ build.md        # /build (project:ci)\nâ”‚   â”œâ”€â”€ test.md         # /test (project:ci)\nâ”‚   â””â”€â”€ lint.md         # /lint (project:ci)\nâ”œâ”€â”€ git/\nâ”‚   â”œâ”€â”€ commit.md       # /commit (project:git)\nâ”‚   â””â”€â”€ pr.md           # /pr (project:git)\nâ””â”€â”€ docs/\n    â”œâ”€â”€ generate.md     # /generate (project:docs)\n    â””â”€â”€ publish.md      # /publish (project:docs)\n```\n\n**Benefits:**\n- Logical grouping by category\n- Namespace shown in `/help`\n- Easier to find related commands\n\n**Use when:** 15+ commands, clear categories\n\n## Best Practices\n\n### Command Design\n\n1. **Single responsibility:** One command, one task\n2. **Clear descriptions:** Self-explanatory in `/help`\n3. **Explicit dependencies:** Use `allowed-tools` when needed\n4. **Document arguments:** Always provide `argument-hint`\n5. **Consistent naming:** Use verb-noun pattern (review-pr, fix-issue)\n\n### Argument Handling\n\n1. **Validate arguments:** Check for required arguments in prompt\n2. **Provide defaults:** Suggest defaults when arguments missing\n3. **Document format:** Explain expected argument format\n4. **Handle edge cases:** Consider missing or invalid arguments\n\n```markdown\n---\nargument-hint: [pr-number]\n---\n\n$IF($1,\n  Review PR #$1,\n  Please provide a PR number. Usage: /review-pr [number]\n)\n```\n\n### File References\n\n1. **Explicit paths:** Use clear file paths\n2. **Check existence:** Handle missing files gracefully\n3. **Relative paths:** Use project-relative paths\n4. **Glob support:** Consider using Glob tool for patterns\n\n### Bash Commands\n\n1. **Limit scope:** Use `Bash(git:*)` not `Bash(*)`\n2. **Safe commands:** Avoid destructive operations\n3. **Handle errors:** Consider command failures\n4. **Keep fast:** Long-running commands slow invocation\n\n### Documentation\n\n1. **Add comments:** Explain complex logic\n2. **Provide examples:** Show usage in comments\n3. **List requirements:** Document dependencies\n4. **Version commands:** Note breaking changes\n\n```markdown\n---\ndescription: Deploy application to environment\nargument-hint: [environment] [version]\n---\n\n<!--\nUsage: /deploy [staging|production] [version]\nRequires: AWS credentials configured\nExample: /deploy staging v1.2.3\n-->\n\nDeploy application to $1 environment using version $2...\n```\n\n## Common Patterns\n\n### Review Pattern\n\n```markdown\n---\ndescription: Review code changes\nallowed-tools: Read, Bash(git:*)\n---\n\nFiles changed: !`git diff --name-only`\n\nReview each file for:\n1. Code quality and style\n2. Potential bugs or issues\n3. Test coverage\n4. Documentation needs\n\nProvide specific feedback for each file.\n```\n\n### Testing Pattern\n\n```markdown\n---\ndescription: Run tests for specific file\nargument-hint: [test-file]\nallowed-tools: Bash(npm:*)\n---\n\nRun tests: !`npm test $1`\n\nAnalyze results and suggest fixes for failures.\n```\n\n### Documentation Pattern\n\n```markdown\n---\ndescription: Generate documentation for file\nargument-hint: [source-file]\n---\n\nGenerate comprehensive documentation for @$1 including:\n- Function/class descriptions\n- Parameter documentation\n- Return value descriptions\n- Usage examples\n- Edge cases and errors\n```\n\n### Workflow Pattern\n\n```markdown\n---\ndescription: Complete PR workflow\nargument-hint: [pr-number]\nallowed-tools: Bash(gh:*), Read\n---\n\nPR #$1 Workflow:\n\n1. Fetch PR: !`gh pr view $1`\n2. Review changes\n3. Run checks\n4. Approve or request changes\n```\n\n## Troubleshooting\n\n**Command not appearing:**\n- Check file is in correct directory\n- Verify `.md` extension present\n- Ensure valid Markdown format\n- Restart Claude Code\n\n**Arguments not working:**\n- Verify `$1`, `$2` syntax correct\n- Check `argument-hint` matches usage\n- Ensure no extra spaces\n\n**Bash execution failing:**\n- Check `allowed-tools` includes Bash\n- Verify command syntax in backticks\n- Test command in terminal first\n- Check for required permissions\n\n**File references not working:**\n- Verify `@` syntax correct\n- Check file path is valid\n- Ensure Read tool allowed\n- Use absolute or project-relative paths\n\n## Plugin-Specific Features\n\n### CLAUDE_PLUGIN_ROOT Variable\n\nPlugin commands have access to `${CLAUDE_PLUGIN_ROOT}`, an environment variable that resolves to the plugin's absolute path.\n\n**Purpose:**\n- Reference plugin files portably\n- Execute plugin scripts\n- Load plugin configuration\n- Access plugin templates\n\n**Basic usage:**\n\n```markdown\n---\ndescription: Analyze using plugin script\nallowed-tools: Bash(node:*)\n---\n\nRun analysis: !`node ${CLAUDE_PLUGIN_ROOT}/scripts/analyze.js $1`\n\nReview results and report findings.\n```\n\n**Common patterns:**\n\n```markdown\n# Execute plugin script\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/script.sh`\n\n# Load plugin configuration\n@${CLAUDE_PLUGIN_ROOT}/config/settings.json\n\n# Use plugin template\n@${CLAUDE_PLUGIN_ROOT}/templates/report.md\n\n# Access plugin resources\n@${CLAUDE_PLUGIN_ROOT}/docs/reference.md\n```\n\n**Why use it:**\n- Works across all installations\n- Portable between systems\n- No hardcoded paths needed\n- Essential for multi-file plugins\n\n### Plugin Command Organization\n\nPlugin commands discovered automatically from `commands/` directory:\n\n```\nplugin-name/\nâ”œâ”€â”€ commands/\nâ”‚   â”œâ”€â”€ foo.md              # /foo (plugin:plugin-name)\nâ”‚   â”œâ”€â”€ bar.md              # /bar (plugin:plugin-name)\nâ”‚   â””â”€â”€ utils/\nâ”‚       â””â”€â”€ helper.md       # /helper (plugin:plugin-name:utils)\nâ””â”€â”€ plugin.json\n```\n\n**Namespace benefits:**\n- Logical command grouping\n- Shown in `/help` output\n- Avoid name conflicts\n- Organize related commands\n\n**Naming conventions:**\n- Use descriptive action names\n- Avoid generic names (test, run)\n- Consider plugin-specific prefix\n- Use hyphens for multi-word names\n\n### Plugin Command Patterns\n\n**Configuration-based pattern:**\n\n```markdown\n---\ndescription: Deploy using plugin configuration\nargument-hint: [environment]\nallowed-tools: Read, Bash(*)\n---\n\nLoad configuration: @${CLAUDE_PLUGIN_ROOT}/config/$1-deploy.json\n\nDeploy to $1 using configuration settings.\nMonitor deployment and report status.\n```\n\n**Template-based pattern:**\n\n```markdown\n---\ndescription: Generate docs from template\nargument-hint: [component]\n---\n\nTemplate: @${CLAUDE_PLUGIN_ROOT}/templates/docs.md\n\nGenerate documentation for $1 following template structure.\n```\n\n**Multi-script pattern:**\n\n```markdown\n---\ndescription: Complete build workflow\nallowed-tools: Bash(*)\n---\n\nBuild: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh`\nTest: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/test.sh`\nPackage: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/package.sh`\n\nReview outputs and report workflow status.\n```\n\n**See `references/plugin-features-reference.md` for detailed patterns.**\n\n## Integration with Plugin Components\n\nCommands can integrate with other plugin components for powerful workflows.\n\n### Agent Integration\n\nLaunch plugin agents for complex tasks:\n\n```markdown\n---\ndescription: Deep code review\nargument-hint: [file-path]\n---\n\nInitiate comprehensive review of @$1 using the code-reviewer agent.\n\nThe agent will analyze:\n- Code structure\n- Security issues\n- Performance\n- Best practices\n\nAgent uses plugin resources:\n- ${CLAUDE_PLUGIN_ROOT}/config/rules.json\n- ${CLAUDE_PLUGIN_ROOT}/checklists/review.md\n```\n\n**Key points:**\n- Agent must exist in `plugin/agents/` directory\n- Claude uses Task tool to launch agent\n- Document agent capabilities\n- Reference plugin resources agent uses\n\n### Skill Integration\n\nLeverage plugin skills for specialized knowledge:\n\n```markdown\n---\ndescription: Document API with standards\nargument-hint: [api-file]\n---\n\nDocument API in @$1 following plugin standards.\n\nUse the api-docs-standards skill to ensure:\n- Complete endpoint documentation\n- Consistent formatting\n- Example quality\n- Error documentation\n\nGenerate production-ready API docs.\n```\n\n**Key points:**\n- Skill must exist in `plugin/skills/` directory\n- Mention skill name to trigger invocation\n- Document skill purpose\n- Explain what skill provides\n\n### Hook Coordination\n\nDesign commands that work with plugin hooks:\n- Commands can prepare state for hooks to process\n- Hooks execute automatically on tool events\n- Commands should document expected hook behavior\n- Guide Claude on interpreting hook output\n\nSee `references/plugin-features-reference.md` for examples of commands that coordinate with hooks\n\n### Multi-Component Workflows\n\nCombine agents, skills, and scripts:\n\n```markdown\n---\ndescription: Comprehensive review workflow\nargument-hint: [file]\nallowed-tools: Bash(node:*), Read\n---\n\nTarget: @$1\n\nPhase 1 - Static Analysis:\n!`node ${CLAUDE_PLUGIN_ROOT}/scripts/lint.js $1`\n\nPhase 2 - Deep Review:\nLaunch code-reviewer agent for detailed analysis.\n\nPhase 3 - Standards Check:\nUse coding-standards skill for validation.\n\nPhase 4 - Report:\nTemplate: @${CLAUDE_PLUGIN_ROOT}/templates/review.md\n\nCompile findings into report following template.\n```\n\n**When to use:**\n- Complex multi-step workflows\n- Leverage multiple plugin capabilities\n- Require specialized analysis\n- Need structured outputs\n\n## Validation Patterns\n\nCommands should validate inputs and resources before processing.\n\n### Argument Validation\n\n```markdown\n---\ndescription: Deploy with validation\nargument-hint: [environment]\n---\n\nValidate environment: !`echo \"$1\" | grep -E \"^(dev|staging|prod)$\" || echo \"INVALID\"`\n\nIf $1 is valid environment:\n  Deploy to $1\nOtherwise:\n  Explain valid environments: dev, staging, prod\n  Show usage: /deploy [environment]\n```\n\n### File Existence Checks\n\n```markdown\n---\ndescription: Process configuration\nargument-hint: [config-file]\n---\n\nCheck file exists: !`test -f $1 && echo \"EXISTS\" || echo \"MISSING\"`\n\nIf file exists:\n  Process configuration: @$1\nOtherwise:\n  Explain where to place config file\n  Show expected format\n  Provide example configuration\n```\n\n### Plugin Resource Validation\n\n```markdown\n---\ndescription: Run plugin analyzer\nallowed-tools: Bash(test:*)\n---\n\nValidate plugin setup:\n- Script: !`test -x ${CLAUDE_PLUGIN_ROOT}/bin/analyze && echo \"âœ“\" || echo \"âœ—\"`\n- Config: !`test -f ${CLAUDE_PLUGIN_ROOT}/config.json && echo \"âœ“\" || echo \"âœ—\"`\n\nIf all checks pass, run analysis.\nOtherwise, report missing components.\n```\n\n### Error Handling\n\n```markdown\n---\ndescription: Build with error handling\nallowed-tools: Bash(*)\n---\n\nExecute build: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh 2>&1 || echo \"BUILD_FAILED\"`\n\nIf build succeeded:\n  Report success and output location\nIf build failed:\n  Analyze error output\n  Suggest likely causes\n  Provide troubleshooting steps\n```\n\n**Best practices:**\n- Validate early in command\n- Provide helpful error messages\n- Suggest corrective actions\n- Handle edge cases gracefully\n\n---\n\nFor detailed frontmatter field specifications, see `references/frontmatter-reference.md`.\nFor plugin-specific features and patterns, see `references/plugin-features-reference.md`.\nFor command pattern examples, see `examples/` directory."
              },
              {
                "name": "Hook Development",
                "description": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop hook\", \"validate tool use\", \"implement prompt-based hooks\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"set up event-driven automation\", \"block dangerous commands\", or mentions hook events (PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification). Provides comprehensive guidance for creating and implementing Claude Code plugin hooks with focus on advanced prompt-based hooks API.",
                "path": "plugins/plugin-dev/skills/hook-development/SKILL.md",
                "frontmatter": {
                  "name": "Hook Development",
                  "description": "This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop hook\", \"validate tool use\", \"implement prompt-based hooks\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"set up event-driven automation\", \"block dangerous commands\", or mentions hook events (PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification). Provides comprehensive guidance for creating and implementing Claude Code plugin hooks with focus on advanced prompt-based hooks API.",
                  "version": "0.1.0"
                },
                "content": "# Hook Development for Claude Code Plugins\n\n## Overview\n\nHooks are event-driven automation scripts that execute in response to Claude Code events. Use hooks to validate operations, enforce policies, add context, and integrate external tools into workflows.\n\n**Key capabilities:**\n- Validate tool calls before execution (PreToolUse)\n- React to tool results (PostToolUse)\n- Enforce completion standards (Stop, SubagentStop)\n- Load project context (SessionStart)\n- Automate workflows across the development lifecycle\n\n## Hook Types\n\n### Prompt-Based Hooks (Recommended)\n\nUse LLM-driven decision making for context-aware validation:\n\n```json\n{\n  \"type\": \"prompt\",\n  \"prompt\": \"Evaluate if this tool use is appropriate: $TOOL_INPUT\",\n  \"timeout\": 30\n}\n```\n\n**Supported events:** Stop, SubagentStop, UserPromptSubmit, PreToolUse\n\n**Benefits:**\n- Context-aware decisions based on natural language reasoning\n- Flexible evaluation logic without bash scripting\n- Better edge case handling\n- Easier to maintain and extend\n\n### Command Hooks\n\nExecute bash commands for deterministic checks:\n\n```json\n{\n  \"type\": \"command\",\n  \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\",\n  \"timeout\": 60\n}\n```\n\n**Use for:**\n- Fast deterministic validations\n- File system operations\n- External tool integrations\n- Performance-critical checks\n\n## Hook Configuration Formats\n\n### Plugin hooks.json Format\n\n**For plugin hooks** in `hooks/hooks.json`, use wrapper format:\n\n```json\n{\n  \"description\": \"Brief explanation of hooks (optional)\",\n  \"hooks\": {\n    \"PreToolUse\": [...],\n    \"Stop\": [...],\n    \"SessionStart\": [...]\n  }\n}\n```\n\n**Key points:**\n- `description` field is optional\n- `hooks` field is required wrapper containing actual hook events\n- This is the **plugin-specific format**\n\n**Example:**\n```json\n{\n  \"description\": \"Validation hooks for code quality\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/validate.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Settings Format (Direct)\n\n**For user settings** in `.claude/settings.json`, use direct format:\n\n```json\n{\n  \"PreToolUse\": [...],\n  \"Stop\": [...],\n  \"SessionStart\": [...]\n}\n```\n\n**Key points:**\n- No wrapper - events directly at top level\n- No description field\n- This is the **settings format**\n\n**Important:** The examples below show the hook event structure that goes inside either format. For plugin hooks.json, wrap these in `{\"hooks\": {...}}`.\n\n## Hook Events\n\n### PreToolUse\n\nExecute before any tool runs. Use to approve, deny, or modify tool calls.\n\n**Example (prompt-based):**\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate file write safety. Check: system paths, credentials, path traversal, sensitive content. Return 'approve' or 'deny'.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Output for PreToolUse:**\n```json\n{\n  \"hookSpecificOutput\": {\n    \"permissionDecision\": \"allow|deny|ask\",\n    \"updatedInput\": {\"field\": \"modified_value\"}\n  },\n  \"systemMessage\": \"Explanation for Claude\"\n}\n```\n\n### PostToolUse\n\nExecute after tool completes. Use to react to results, provide feedback, or log.\n\n**Example:**\n```json\n{\n  \"PostToolUse\": [\n    {\n      \"matcher\": \"Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Analyze edit result for potential issues: syntax errors, security vulnerabilities, breaking changes. Provide feedback.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Output behavior:**\n- Exit 0: stdout shown in transcript\n- Exit 2: stderr fed back to Claude\n- systemMessage included in context\n\n### Stop\n\nExecute when main agent considers stopping. Use to validate completeness.\n\n**Example:**\n```json\n{\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Verify task completion: tests run, build succeeded, questions answered. Return 'approve' to stop or 'block' with reason to continue.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Decision output:**\n```json\n{\n  \"decision\": \"approve|block\",\n  \"reason\": \"Explanation\",\n  \"systemMessage\": \"Additional context\"\n}\n```\n\n### SubagentStop\n\nExecute when subagent considers stopping. Use to ensure subagent completed its task.\n\nSimilar to Stop hook, but for subagents.\n\n### UserPromptSubmit\n\nExecute when user submits a prompt. Use to add context, validate, or block prompts.\n\n**Example:**\n```json\n{\n  \"UserPromptSubmit\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Check if prompt requires security guidance. If discussing auth, permissions, or API security, return relevant warnings.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n### SessionStart\n\nExecute when Claude Code session begins. Use to load context and set environment.\n\n**Example:**\n```json\n{\n  \"SessionStart\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/load-context.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Special capability:** Persist environment variables using `$CLAUDE_ENV_FILE`:\n```bash\necho \"export PROJECT_TYPE=nodejs\" >> \"$CLAUDE_ENV_FILE\"\n```\n\nSee `examples/load-context.sh` for complete example.\n\n### SessionEnd\n\nExecute when session ends. Use for cleanup, logging, and state preservation.\n\n### PreCompact\n\nExecute before context compaction. Use to add critical information to preserve.\n\n### Notification\n\nExecute when Claude sends notifications. Use to react to user notifications.\n\n## Hook Output Format\n\n### Standard Output (All Hooks)\n\n```json\n{\n  \"continue\": true,\n  \"suppressOutput\": false,\n  \"systemMessage\": \"Message for Claude\"\n}\n```\n\n- `continue`: If false, halt processing (default true)\n- `suppressOutput`: Hide output from transcript (default false)\n- `systemMessage`: Message shown to Claude\n\n### Exit Codes\n\n- `0` - Success (stdout shown in transcript)\n- `2` - Blocking error (stderr fed back to Claude)\n- Other - Non-blocking error\n\n## Hook Input Format\n\nAll hooks receive JSON via stdin with common fields:\n\n```json\n{\n  \"session_id\": \"abc123\",\n  \"transcript_path\": \"/path/to/transcript.txt\",\n  \"cwd\": \"/current/working/dir\",\n  \"permission_mode\": \"ask|allow\",\n  \"hook_event_name\": \"PreToolUse\"\n}\n```\n\n**Event-specific fields:**\n\n- **PreToolUse/PostToolUse:** `tool_name`, `tool_input`, `tool_result`\n- **UserPromptSubmit:** `user_prompt`\n- **Stop/SubagentStop:** `reason`\n\nAccess fields in prompts using `$TOOL_INPUT`, `$TOOL_RESULT`, `$USER_PROMPT`, etc.\n\n## Environment Variables\n\nAvailable in all command hooks:\n\n- `$CLAUDE_PROJECT_DIR` - Project root path\n- `$CLAUDE_PLUGIN_ROOT` - Plugin directory (use for portable paths)\n- `$CLAUDE_ENV_FILE` - SessionStart only: persist env vars here\n- `$CLAUDE_CODE_REMOTE` - Set if running in remote context\n\n**Always use ${CLAUDE_PLUGIN_ROOT} in hook commands for portability:**\n\n```json\n{\n  \"type\": \"command\",\n  \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\"\n}\n```\n\n## Plugin Hook Configuration\n\nIn plugins, define hooks in `hooks/hooks.json`:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate file write safety\"\n        }\n      ]\n    }\n  ],\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Verify task completion\"\n        }\n      ]\n    }\n  ],\n  \"SessionStart\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/load-context.sh\",\n          \"timeout\": 10\n        }\n      ]\n    }\n  ]\n}\n```\n\nPlugin hooks merge with user's hooks and run in parallel.\n\n## Matchers\n\n### Tool Name Matching\n\n**Exact match:**\n```json\n\"matcher\": \"Write\"\n```\n\n**Multiple tools:**\n```json\n\"matcher\": \"Read|Write|Edit\"\n```\n\n**Wildcard (all tools):**\n```json\n\"matcher\": \"*\"\n```\n\n**Regex patterns:**\n```json\n\"matcher\": \"mcp__.*__delete.*\"  // All MCP delete tools\n```\n\n**Note:** Matchers are case-sensitive.\n\n### Common Patterns\n\n```json\n// All MCP tools\n\"matcher\": \"mcp__.*\"\n\n// Specific plugin's MCP tools\n\"matcher\": \"mcp__plugin_asana_.*\"\n\n// All file operations\n\"matcher\": \"Read|Write|Edit\"\n\n// Bash commands only\n\"matcher\": \"Bash\"\n```\n\n## Security Best Practices\n\n### Input Validation\n\nAlways validate inputs in command hooks:\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\ninput=$(cat)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\n\n# Validate tool name format\nif [[ ! \"$tool_name\" =~ ^[a-zA-Z0-9_]+$ ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Invalid tool name\"}' >&2\n  exit 2\nfi\n```\n\n### Path Safety\n\nCheck for path traversal and sensitive files:\n\n```bash\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\n\n# Deny path traversal\nif [[ \"$file_path\" == *\"..\"* ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Path traversal detected\"}' >&2\n  exit 2\nfi\n\n# Deny sensitive files\nif [[ \"$file_path\" == *\".env\"* ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Sensitive file\"}' >&2\n  exit 2\nfi\n```\n\nSee `examples/validate-write.sh` and `examples/validate-bash.sh` for complete examples.\n\n### Quote All Variables\n\n```bash\n# GOOD: Quoted\necho \"$file_path\"\ncd \"$CLAUDE_PROJECT_DIR\"\n\n# BAD: Unquoted (injection risk)\necho $file_path\ncd $CLAUDE_PROJECT_DIR\n```\n\n### Set Appropriate Timeouts\n\n```json\n{\n  \"type\": \"command\",\n  \"command\": \"bash script.sh\",\n  \"timeout\": 10\n}\n```\n\n**Defaults:** Command hooks (60s), Prompt hooks (30s)\n\n## Performance Considerations\n\n### Parallel Execution\n\nAll matching hooks run **in parallel**:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write\",\n      \"hooks\": [\n        {\"type\": \"command\", \"command\": \"check1.sh\"},  // Parallel\n        {\"type\": \"command\", \"command\": \"check2.sh\"},  // Parallel\n        {\"type\": \"prompt\", \"prompt\": \"Validate...\"}   // Parallel\n      ]\n    }\n  ]\n}\n```\n\n**Design implications:**\n- Hooks don't see each other's output\n- Non-deterministic ordering\n- Design for independence\n\n### Optimization\n\n1. Use command hooks for quick deterministic checks\n2. Use prompt hooks for complex reasoning\n3. Cache validation results in temp files\n4. Minimize I/O in hot paths\n\n## Temporarily Active Hooks\n\nCreate hooks that activate conditionally by checking for a flag file or configuration:\n\n**Pattern: Flag file activation**\n```bash\n#!/bin/bash\n# Only active when flag file exists\nFLAG_FILE=\"$CLAUDE_PROJECT_DIR/.enable-strict-validation\"\n\nif [ ! -f \"$FLAG_FILE\" ]; then\n  # Flag not present, skip validation\n  exit 0\nfi\n\n# Flag present, run validation\ninput=$(cat)\n# ... validation logic ...\n```\n\n**Pattern: Configuration-based activation**\n```bash\n#!/bin/bash\n# Check configuration for activation\nCONFIG_FILE=\"$CLAUDE_PROJECT_DIR/.claude/plugin-config.json\"\n\nif [ -f \"$CONFIG_FILE\" ]; then\n  enabled=$(jq -r '.strictMode // false' \"$CONFIG_FILE\")\n  if [ \"$enabled\" != \"true\" ]; then\n    exit 0  # Not enabled, skip\n  fi\nfi\n\n# Enabled, run hook logic\ninput=$(cat)\n# ... hook logic ...\n```\n\n**Use cases:**\n- Enable strict validation only when needed\n- Temporary debugging hooks\n- Project-specific hook behavior\n- Feature flags for hooks\n\n**Best practice:** Document activation mechanism in plugin README so users know how to enable/disable temporary hooks.\n\n## Hook Lifecycle and Limitations\n\n### Hooks Load at Session Start\n\n**Important:** Hooks are loaded when Claude Code session starts. Changes to hook configuration require restarting Claude Code.\n\n**Cannot hot-swap hooks:**\n- Editing `hooks/hooks.json` won't affect current session\n- Adding new hook scripts won't be recognized\n- Changing hook commands/prompts won't update\n- Must restart Claude Code: exit and run `claude` again\n\n**To test hook changes:**\n1. Edit hook configuration or scripts\n2. Exit Claude Code session\n3. Restart: `claude` or `cc`\n4. New hook configuration loads\n5. Test hooks with `claude --debug`\n\n### Hook Validation at Startup\n\nHooks are validated when Claude Code starts:\n- Invalid JSON in hooks.json causes loading failure\n- Missing scripts cause warnings\n- Syntax errors reported in debug mode\n\nUse `/hooks` command to review loaded hooks in current session.\n\n## Debugging Hooks\n\n### Enable Debug Mode\n\n```bash\nclaude --debug\n```\n\nLook for hook registration, execution logs, input/output JSON, and timing information.\n\n### Test Hook Scripts\n\nTest command hooks directly:\n\n```bash\necho '{\"tool_name\": \"Write\", \"tool_input\": {\"file_path\": \"/test\"}}' | \\\n  bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\n\necho \"Exit code: $?\"\n```\n\n### Validate JSON Output\n\nEnsure hooks output valid JSON:\n\n```bash\noutput=$(./your-hook.sh < test-input.json)\necho \"$output\" | jq .\n```\n\n## Quick Reference\n\n### Hook Events Summary\n\n| Event | When | Use For |\n|-------|------|---------|\n| PreToolUse | Before tool | Validation, modification |\n| PostToolUse | After tool | Feedback, logging |\n| UserPromptSubmit | User input | Context, validation |\n| Stop | Agent stopping | Completeness check |\n| SubagentStop | Subagent done | Task validation |\n| SessionStart | Session begins | Context loading |\n| SessionEnd | Session ends | Cleanup, logging |\n| PreCompact | Before compact | Preserve context |\n| Notification | User notified | Logging, reactions |\n\n### Best Practices\n\n**DO:**\n- âœ… Use prompt-based hooks for complex logic\n- âœ… Use ${CLAUDE_PLUGIN_ROOT} for portability\n- âœ… Validate all inputs in command hooks\n- âœ… Quote all bash variables\n- âœ… Set appropriate timeouts\n- âœ… Return structured JSON output\n- âœ… Test hooks thoroughly\n\n**DON'T:**\n- âŒ Use hardcoded paths\n- âŒ Trust user input without validation\n- âŒ Create long-running hooks\n- âŒ Rely on hook execution order\n- âŒ Modify global state unpredictably\n- âŒ Log sensitive information\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed patterns and advanced techniques, consult:\n\n- **`references/patterns.md`** - Common hook patterns (8+ proven patterns)\n- **`references/migration.md`** - Migrating from basic to advanced hooks\n- **`references/advanced.md`** - Advanced use cases and techniques\n\n### Example Hook Scripts\n\nWorking examples in `examples/`:\n\n- **`validate-write.sh`** - File write validation example\n- **`validate-bash.sh`** - Bash command validation example\n- **`load-context.sh`** - SessionStart context loading example\n\n### Utility Scripts\n\nDevelopment tools in `scripts/`:\n\n- **`validate-hook-schema.sh`** - Validate hooks.json structure and syntax\n- **`test-hook.sh`** - Test hooks with sample input before deployment\n- **`hook-linter.sh`** - Check hook scripts for common issues and best practices\n\n### External Resources\n\n- **Official Docs**: https://docs.claude.com/en/docs/claude-code/hooks\n- **Examples**: See security-guidance plugin in marketplace\n- **Testing**: Use `claude --debug` for detailed logs\n- **Validation**: Use `jq` to validate hook JSON output\n\n## Implementation Workflow\n\nTo implement hooks in a plugin:\n\n1. Identify events to hook into (PreToolUse, Stop, SessionStart, etc.)\n2. Decide between prompt-based (flexible) or command (deterministic) hooks\n3. Write hook configuration in `hooks/hooks.json`\n4. For command hooks, create hook scripts\n5. Use ${CLAUDE_PLUGIN_ROOT} for all file references\n6. Validate configuration with `scripts/validate-hook-schema.sh hooks/hooks.json`\n7. Test hooks with `scripts/test-hook.sh` before deployment\n8. Test in Claude Code with `claude --debug`\n9. Document hooks in plugin README\n\nFocus on prompt-based hooks for most use cases. Reserve command hooks for performance-critical or deterministic checks."
              },
              {
                "name": "MCP Integration",
                "description": "This skill should be used when the user asks to \"add MCP server\", \"integrate MCP\", \"configure MCP in plugin\", \"use .mcp.json\", \"set up Model Context Protocol\", \"connect external service\", mentions \"${CLAUDE_PLUGIN_ROOT} with MCP\", or discusses MCP server types (SSE, stdio, HTTP, WebSocket). Provides comprehensive guidance for integrating Model Context Protocol servers into Claude Code plugins for external tool and service integration.",
                "path": "plugins/plugin-dev/skills/mcp-integration/SKILL.md",
                "frontmatter": {
                  "name": "MCP Integration",
                  "description": "This skill should be used when the user asks to \"add MCP server\", \"integrate MCP\", \"configure MCP in plugin\", \"use .mcp.json\", \"set up Model Context Protocol\", \"connect external service\", mentions \"${CLAUDE_PLUGIN_ROOT} with MCP\", or discusses MCP server types (SSE, stdio, HTTP, WebSocket). Provides comprehensive guidance for integrating Model Context Protocol servers into Claude Code plugins for external tool and service integration.",
                  "version": "0.1.0"
                },
                "content": "# MCP Integration for Claude Code Plugins\n\n## Overview\n\nModel Context Protocol (MCP) enables Claude Code plugins to integrate with external services and APIs by providing structured tool access. Use MCP integration to expose external service capabilities as tools within Claude Code.\n\n**Key capabilities:**\n- Connect to external services (databases, APIs, file systems)\n- Provide 10+ related tools from a single service\n- Handle OAuth and complex authentication flows\n- Bundle MCP servers with plugins for automatic setup\n\n## MCP Server Configuration Methods\n\nPlugins can bundle MCP servers in two ways:\n\n### Method 1: Dedicated .mcp.json (Recommended)\n\nCreate `.mcp.json` at plugin root:\n\n```json\n{\n  \"database-tools\": {\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/db-server\",\n    \"args\": [\"--config\", \"${CLAUDE_PLUGIN_ROOT}/config.json\"],\n    \"env\": {\n      \"DB_URL\": \"${DB_URL}\"\n    }\n  }\n}\n```\n\n**Benefits:**\n- Clear separation of concerns\n- Easier to maintain\n- Better for multiple servers\n\n### Method 2: Inline in plugin.json\n\nAdd `mcpServers` field to plugin.json:\n\n```json\n{\n  \"name\": \"my-plugin\",\n  \"version\": \"1.0.0\",\n  \"mcpServers\": {\n    \"plugin-api\": {\n      \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/api-server\",\n      \"args\": [\"--port\", \"8080\"]\n    }\n  }\n}\n```\n\n**Benefits:**\n- Single configuration file\n- Good for simple single-server plugins\n\n## MCP Server Types\n\n### stdio (Local Process)\n\nExecute local MCP servers as child processes. Best for local tools and custom servers.\n\n**Configuration:**\n```json\n{\n  \"filesystem\": {\n    \"command\": \"npx\",\n    \"args\": [\"-y\", \"@modelcontextprotocol/server-filesystem\", \"/allowed/path\"],\n    \"env\": {\n      \"LOG_LEVEL\": \"debug\"\n    }\n  }\n}\n```\n\n**Use cases:**\n- File system access\n- Local database connections\n- Custom MCP servers\n- NPM-packaged MCP servers\n\n**Process management:**\n- Claude Code spawns and manages the process\n- Communicates via stdin/stdout\n- Terminates when Claude Code exits\n\n### SSE (Server-Sent Events)\n\nConnect to hosted MCP servers with OAuth support. Best for cloud services.\n\n**Configuration:**\n```json\n{\n  \"asana\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.asana.com/sse\"\n  }\n}\n```\n\n**Use cases:**\n- Official hosted MCP servers (Asana, GitHub, etc.)\n- Cloud services with MCP endpoints\n- OAuth-based authentication\n- No local installation needed\n\n**Authentication:**\n- OAuth flows handled automatically\n- User prompted on first use\n- Tokens managed by Claude Code\n\n### HTTP (REST API)\n\nConnect to RESTful MCP servers with token authentication.\n\n**Configuration:**\n```json\n{\n  \"api-service\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\",\n      \"X-Custom-Header\": \"value\"\n    }\n  }\n}\n```\n\n**Use cases:**\n- REST API-based MCP servers\n- Token-based authentication\n- Custom API backends\n- Stateless interactions\n\n### WebSocket (Real-time)\n\nConnect to WebSocket MCP servers for real-time bidirectional communication.\n\n**Configuration:**\n```json\n{\n  \"realtime-service\": {\n    \"type\": \"ws\",\n    \"url\": \"wss://mcp.example.com/ws\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${TOKEN}\"\n    }\n  }\n}\n```\n\n**Use cases:**\n- Real-time data streaming\n- Persistent connections\n- Push notifications from server\n- Low-latency requirements\n\n## Environment Variable Expansion\n\nAll MCP configurations support environment variable substitution:\n\n**${CLAUDE_PLUGIN_ROOT}** - Plugin directory (always use for portability):\n```json\n{\n  \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/my-server\"\n}\n```\n\n**User environment variables** - From user's shell:\n```json\n{\n  \"env\": {\n    \"API_KEY\": \"${MY_API_KEY}\",\n    \"DATABASE_URL\": \"${DB_URL}\"\n  }\n}\n```\n\n**Best practice:** Document all required environment variables in plugin README.\n\n## MCP Tool Naming\n\nWhen MCP servers provide tools, they're automatically prefixed:\n\n**Format:** `mcp__plugin_<plugin-name>_<server-name>__<tool-name>`\n\n**Example:**\n- Plugin: `asana`\n- Server: `asana`\n- Tool: `create_task`\n- **Full name:** `mcp__plugin_asana_asana__asana_create_task`\n\n### Using MCP Tools in Commands\n\nPre-allow specific MCP tools in command frontmatter:\n\n```markdown\n---\nallowed-tools: [\n  \"mcp__plugin_asana_asana__asana_create_task\",\n  \"mcp__plugin_asana_asana__asana_search_tasks\"\n]\n---\n```\n\n**Wildcard (use sparingly):**\n```markdown\n---\nallowed-tools: [\"mcp__plugin_asana_asana__*\"]\n---\n```\n\n**Best practice:** Pre-allow specific tools, not wildcards, for security.\n\n## Lifecycle Management\n\n**Automatic startup:**\n- MCP servers start when plugin enables\n- Connection established before first tool use\n- Restart required for configuration changes\n\n**Lifecycle:**\n1. Plugin loads\n2. MCP configuration parsed\n3. Server process started (stdio) or connection established (SSE/HTTP/WS)\n4. Tools discovered and registered\n5. Tools available as `mcp__plugin_...__...`\n\n**Viewing servers:**\nUse `/mcp` command to see all servers including plugin-provided ones.\n\n## Authentication Patterns\n\n### OAuth (SSE/HTTP)\n\nOAuth handled automatically by Claude Code:\n\n```json\n{\n  \"type\": \"sse\",\n  \"url\": \"https://mcp.example.com/sse\"\n}\n```\n\nUser authenticates in browser on first use. No additional configuration needed.\n\n### Token-Based (Headers)\n\nStatic or environment variable tokens:\n\n```json\n{\n  \"type\": \"http\",\n  \"url\": \"https://api.example.com\",\n  \"headers\": {\n    \"Authorization\": \"Bearer ${API_TOKEN}\"\n  }\n}\n```\n\nDocument required environment variables in README.\n\n### Environment Variables (stdio)\n\nPass configuration to MCP server:\n\n```json\n{\n  \"command\": \"python\",\n  \"args\": [\"-m\", \"my_mcp_server\"],\n  \"env\": {\n    \"DATABASE_URL\": \"${DB_URL}\",\n    \"API_KEY\": \"${API_KEY}\",\n    \"LOG_LEVEL\": \"info\"\n  }\n}\n```\n\n## Integration Patterns\n\n### Pattern 1: Simple Tool Wrapper\n\nCommands use MCP tools with user interaction:\n\n```markdown\n# Command: create-item.md\n---\nallowed-tools: [\"mcp__plugin_name_server__create_item\"]\n---\n\nSteps:\n1. Gather item details from user\n2. Use mcp__plugin_name_server__create_item\n3. Confirm creation\n```\n\n**Use for:** Adding validation or preprocessing before MCP calls.\n\n### Pattern 2: Autonomous Agent\n\nAgents use MCP tools autonomously:\n\n```markdown\n# Agent: data-analyzer.md\n\nAnalysis Process:\n1. Query data via mcp__plugin_db_server__query\n2. Process and analyze results\n3. Generate insights report\n```\n\n**Use for:** Multi-step MCP workflows without user interaction.\n\n### Pattern 3: Multi-Server Plugin\n\nIntegrate multiple MCP servers:\n\n```json\n{\n  \"github\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.github.com/sse\"\n  },\n  \"jira\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.jira.com/sse\"\n  }\n}\n```\n\n**Use for:** Workflows spanning multiple services.\n\n## Security Best Practices\n\n### Use HTTPS/WSS\n\nAlways use secure connections:\n\n```json\nâœ… \"url\": \"https://mcp.example.com/sse\"\nâŒ \"url\": \"http://mcp.example.com/sse\"\n```\n\n### Token Management\n\n**DO:**\n- âœ… Use environment variables for tokens\n- âœ… Document required env vars in README\n- âœ… Let OAuth flow handle authentication\n\n**DON'T:**\n- âŒ Hardcode tokens in configuration\n- âŒ Commit tokens to git\n- âŒ Share tokens in documentation\n\n### Permission Scoping\n\nPre-allow only necessary MCP tools:\n\n```markdown\nâœ… allowed-tools: [\n  \"mcp__plugin_api_server__read_data\",\n  \"mcp__plugin_api_server__create_item\"\n]\n\nâŒ allowed-tools: [\"mcp__plugin_api_server__*\"]\n```\n\n## Error Handling\n\n### Connection Failures\n\nHandle MCP server unavailability:\n- Provide fallback behavior in commands\n- Inform user of connection issues\n- Check server URL and configuration\n\n### Tool Call Errors\n\nHandle failed MCP operations:\n- Validate inputs before calling MCP tools\n- Provide clear error messages\n- Check rate limiting and quotas\n\n### Configuration Errors\n\nValidate MCP configuration:\n- Test server connectivity during development\n- Validate JSON syntax\n- Check required environment variables\n\n## Performance Considerations\n\n### Lazy Loading\n\nMCP servers connect on-demand:\n- Not all servers connect at startup\n- First tool use triggers connection\n- Connection pooling managed automatically\n\n### Batching\n\nBatch similar requests when possible:\n\n```\n# Good: Single query with filters\ntasks = search_tasks(project=\"X\", assignee=\"me\", limit=50)\n\n# Avoid: Many individual queries\nfor id in task_ids:\n    task = get_task(id)\n```\n\n## Testing MCP Integration\n\n### Local Testing\n\n1. Configure MCP server in `.mcp.json`\n2. Install plugin locally (`.claude-plugin/`)\n3. Run `/mcp` to verify server appears\n4. Test tool calls in commands\n5. Check `claude --debug` logs for connection issues\n\n### Validation Checklist\n\n- [ ] MCP configuration is valid JSON\n- [ ] Server URL is correct and accessible\n- [ ] Required environment variables documented\n- [ ] Tools appear in `/mcp` output\n- [ ] Authentication works (OAuth or tokens)\n- [ ] Tool calls succeed from commands\n- [ ] Error cases handled gracefully\n\n## Debugging\n\n### Enable Debug Logging\n\n```bash\nclaude --debug\n```\n\nLook for:\n- MCP server connection attempts\n- Tool discovery logs\n- Authentication flows\n- Tool call errors\n\n### Common Issues\n\n**Server not connecting:**\n- Check URL is correct\n- Verify server is running (stdio)\n- Check network connectivity\n- Review authentication configuration\n\n**Tools not available:**\n- Verify server connected successfully\n- Check tool names match exactly\n- Run `/mcp` to see available tools\n- Restart Claude Code after config changes\n\n**Authentication failing:**\n- Clear cached auth tokens\n- Re-authenticate\n- Check token scopes and permissions\n- Verify environment variables set\n\n## Quick Reference\n\n### MCP Server Types\n\n| Type | Transport | Best For | Auth |\n|------|-----------|----------|------|\n| stdio | Process | Local tools, custom servers | Env vars |\n| SSE | HTTP | Hosted services, cloud APIs | OAuth |\n| HTTP | REST | API backends, token auth | Tokens |\n| ws | WebSocket | Real-time, streaming | Tokens |\n\n### Configuration Checklist\n\n- [ ] Server type specified (stdio/SSE/HTTP/ws)\n- [ ] Type-specific fields complete (command or url)\n- [ ] Authentication configured\n- [ ] Environment variables documented\n- [ ] HTTPS/WSS used (not HTTP/WS)\n- [ ] ${CLAUDE_PLUGIN_ROOT} used for paths\n\n### Best Practices\n\n**DO:**\n- âœ… Use ${CLAUDE_PLUGIN_ROOT} for portable paths\n- âœ… Document required environment variables\n- âœ… Use secure connections (HTTPS/WSS)\n- âœ… Pre-allow specific MCP tools in commands\n- âœ… Test MCP integration before publishing\n- âœ… Handle connection and tool errors gracefully\n\n**DON'T:**\n- âŒ Hardcode absolute paths\n- âŒ Commit credentials to git\n- âŒ Use HTTP instead of HTTPS\n- âŒ Pre-allow all tools with wildcards\n- âŒ Skip error handling\n- âŒ Forget to document setup\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed information, consult:\n\n- **`references/server-types.md`** - Deep dive on each server type\n- **`references/authentication.md`** - Authentication patterns and OAuth\n- **`references/tool-usage.md`** - Using MCP tools in commands and agents\n\n### Example Configurations\n\nWorking examples in `examples/`:\n\n- **`stdio-server.json`** - Local stdio MCP server\n- **`sse-server.json`** - Hosted SSE server with OAuth\n- **`http-server.json`** - REST API with token auth\n\n### External Resources\n\n- **Official MCP Docs**: https://modelcontextprotocol.io/\n- **Claude Code MCP Docs**: https://docs.claude.com/en/docs/claude-code/mcp\n- **MCP SDK**: @modelcontextprotocol/sdk\n- **Testing**: Use `claude --debug` and `/mcp` command\n\n## Implementation Workflow\n\nTo add MCP integration to a plugin:\n\n1. Choose MCP server type (stdio, SSE, HTTP, ws)\n2. Create `.mcp.json` at plugin root with configuration\n3. Use ${CLAUDE_PLUGIN_ROOT} for all file references\n4. Document required environment variables in README\n5. Test locally with `/mcp` command\n6. Pre-allow MCP tools in relevant commands\n7. Handle authentication (OAuth or tokens)\n8. Test error cases (connection failures, auth errors)\n9. Document MCP integration in plugin README\n\nFocus on stdio for custom/local servers, SSE for hosted services with OAuth."
              },
              {
                "name": "Plugin Settings",
                "description": "This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", \"user-configurable plugin\", \".local.md files\", \"plugin state files\", \"read YAML frontmatter\", \"per-project plugin settings\", or wants to make plugin behavior configurable. Documents the .claude/plugin-name.local.md pattern for storing plugin-specific configuration with YAML frontmatter and markdown content.",
                "path": "plugins/plugin-dev/skills/plugin-settings/SKILL.md",
                "frontmatter": {
                  "name": "Plugin Settings",
                  "description": "This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", \"user-configurable plugin\", \".local.md files\", \"plugin state files\", \"read YAML frontmatter\", \"per-project plugin settings\", or wants to make plugin behavior configurable. Documents the .claude/plugin-name.local.md pattern for storing plugin-specific configuration with YAML frontmatter and markdown content.",
                  "version": "0.1.0"
                },
                "content": "# Plugin Settings Pattern for Claude Code Plugins\n\n## Overview\n\nPlugins can store user-configurable settings and state in `.claude/plugin-name.local.md` files within the project directory. This pattern uses YAML frontmatter for structured configuration and markdown content for prompts or additional context.\n\n**Key characteristics:**\n- File location: `.claude/plugin-name.local.md` in project root\n- Structure: YAML frontmatter + markdown body\n- Purpose: Per-project plugin configuration and state\n- Usage: Read from hooks, commands, and agents\n- Lifecycle: User-managed (not in git, should be in `.gitignore`)\n\n## File Structure\n\n### Basic Template\n\n```markdown\n---\nenabled: true\nsetting1: value1\nsetting2: value2\nnumeric_setting: 42\nlist_setting: [\"item1\", \"item2\"]\n---\n\n# Additional Context\n\nThis markdown body can contain:\n- Task descriptions\n- Additional instructions\n- Prompts to feed back to Claude\n- Documentation or notes\n```\n\n### Example: Plugin State File\n\n**.claude/my-plugin.local.md:**\n```markdown\n---\nenabled: true\nstrict_mode: false\nmax_retries: 3\nnotification_level: info\ncoordinator_session: team-leader\n---\n\n# Plugin Configuration\n\nThis plugin is configured for standard validation mode.\nContact @team-lead with questions.\n```\n\n## Reading Settings Files\n\n### From Hooks (Bash Scripts)\n\n**Pattern: Check existence and parse frontmatter**\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\n# Define state file path\nSTATE_FILE=\".claude/my-plugin.local.md\"\n\n# Quick exit if file doesn't exist\nif [[ ! -f \"$STATE_FILE\" ]]; then\n  exit 0  # Plugin not configured, skip\nfi\n\n# Parse YAML frontmatter (between --- markers)\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$STATE_FILE\")\n\n# Extract individual fields\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\nSTRICT_MODE=$(echo \"$FRONTMATTER\" | grep '^strict_mode:' | sed 's/strict_mode: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n# Check if enabled\nif [[ \"$ENABLED\" != \"true\" ]]; then\n  exit 0  # Disabled\nfi\n\n# Use configuration in hook logic\nif [[ \"$STRICT_MODE\" == \"true\" ]]; then\n  # Apply strict validation\n  # ...\nfi\n```\n\nSee `examples/read-settings-hook.sh` for complete working example.\n\n### From Commands\n\nCommands can read settings files to customize behavior:\n\n```markdown\n---\ndescription: Process data with plugin\nallowed-tools: [\"Read\", \"Bash\"]\n---\n\n# Process Command\n\nSteps:\n1. Check if settings exist at `.claude/my-plugin.local.md`\n2. Read configuration using Read tool\n3. Parse YAML frontmatter to extract settings\n4. Apply settings to processing logic\n5. Execute with configured behavior\n```\n\n### From Agents\n\nAgents can reference settings in their instructions:\n\n```markdown\n---\nname: configured-agent\ndescription: Agent that adapts to project settings\n---\n\nCheck for plugin settings at `.claude/my-plugin.local.md`.\nIf present, parse YAML frontmatter and adapt behavior according to:\n- enabled: Whether plugin is active\n- mode: Processing mode (strict, standard, lenient)\n- Additional configuration fields\n```\n\n## Parsing Techniques\n\n### Extract Frontmatter\n\n```bash\n# Extract everything between --- markers\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n```\n\n### Read Individual Fields\n\n**String fields:**\n```bash\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field_name:' | sed 's/field_name: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n```\n\n**Boolean fields:**\n```bash\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n# Compare: if [[ \"$ENABLED\" == \"true\" ]]; then\n```\n\n**Numeric fields:**\n```bash\nMAX=$(echo \"$FRONTMATTER\" | grep '^max_value:' | sed 's/max_value: *//')\n# Use: if [[ $MAX -gt 100 ]]; then\n```\n\n### Read Markdown Body\n\nExtract content after second `---`:\n\n```bash\n# Get everything after closing ---\nBODY=$(awk '/^---$/{i++; next} i>=2' \"$FILE\")\n```\n\n## Common Patterns\n\n### Pattern 1: Temporarily Active Hooks\n\nUse settings file to control hook activation:\n\n```bash\n#!/bin/bash\nSTATE_FILE=\".claude/security-scan.local.md\"\n\n# Quick exit if not configured\nif [[ ! -f \"$STATE_FILE\" ]]; then\n  exit 0\nfi\n\n# Read enabled flag\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$STATE_FILE\")\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n\nif [[ \"$ENABLED\" != \"true\" ]]; then\n  exit 0  # Disabled\nfi\n\n# Run hook logic\n# ...\n```\n\n**Use case:** Enable/disable hooks without editing hooks.json (requires restart).\n\n### Pattern 2: Agent State Management\n\nStore agent-specific state and configuration:\n\n**.claude/multi-agent-swarm.local.md:**\n```markdown\n---\nagent_name: auth-agent\ntask_number: 3.5\npr_number: 1234\ncoordinator_session: team-leader\nenabled: true\ndependencies: [\"Task 3.4\"]\n---\n\n# Task Assignment\n\nImplement JWT authentication for the API.\n\n**Success Criteria:**\n- Authentication endpoints created\n- Tests passing\n- PR created and CI green\n```\n\nRead from hooks to coordinate agents:\n\n```bash\nAGENT_NAME=$(echo \"$FRONTMATTER\" | grep '^agent_name:' | sed 's/agent_name: *//')\nCOORDINATOR=$(echo \"$FRONTMATTER\" | grep '^coordinator_session:' | sed 's/coordinator_session: *//')\n\n# Send notification to coordinator\ntmux send-keys -t \"$COORDINATOR\" \"Agent $AGENT_NAME completed task\" Enter\n```\n\n### Pattern 3: Configuration-Driven Behavior\n\n**.claude/my-plugin.local.md:**\n```markdown\n---\nvalidation_level: strict\nmax_file_size: 1000000\nallowed_extensions: [\".js\", \".ts\", \".tsx\"]\nenable_logging: true\n---\n\n# Validation Configuration\n\nStrict mode enabled for this project.\nAll writes validated against security policies.\n```\n\nUse in hooks or commands:\n\n```bash\nLEVEL=$(echo \"$FRONTMATTER\" | grep '^validation_level:' | sed 's/validation_level: *//')\n\ncase \"$LEVEL\" in\n  strict)\n    # Apply strict validation\n    ;;\n  standard)\n    # Apply standard validation\n    ;;\n  lenient)\n    # Apply lenient validation\n    ;;\nesac\n```\n\n## Creating Settings Files\n\n### From Commands\n\nCommands can create settings files:\n\n```markdown\n# Setup Command\n\nSteps:\n1. Ask user for configuration preferences\n2. Create `.claude/my-plugin.local.md` with YAML frontmatter\n3. Set appropriate values based on user input\n4. Inform user that settings are saved\n5. Remind user to restart Claude Code for hooks to recognize changes\n```\n\n### Template Generation\n\nProvide template in plugin README:\n\n```markdown\n## Configuration\n\nCreate `.claude/my-plugin.local.md` in your project:\n\n\\`\\`\\`markdown\n---\nenabled: true\nmode: standard\nmax_retries: 3\n---\n\n# Plugin Configuration\n\nYour settings are active.\n\\`\\`\\`\n\nAfter creating or editing, restart Claude Code for changes to take effect.\n```\n\n## Best Practices\n\n### File Naming\n\nâœ… **DO:**\n- Use `.claude/plugin-name.local.md` format\n- Match plugin name exactly\n- Use `.local.md` suffix for user-local files\n\nâŒ **DON'T:**\n- Use different directory (not `.claude/`)\n- Use inconsistent naming\n- Use `.md` without `.local` (might be committed)\n\n### Gitignore\n\nAlways add to `.gitignore`:\n\n```gitignore\n.claude/*.local.md\n.claude/*.local.json\n```\n\nDocument this in plugin README.\n\n### Defaults\n\nProvide sensible defaults when settings file doesn't exist:\n\n```bash\nif [[ ! -f \"$STATE_FILE\" ]]; then\n  # Use defaults\n  ENABLED=true\n  MODE=standard\nelse\n  # Read from file\n  # ...\nfi\n```\n\n### Validation\n\nValidate settings values:\n\n```bash\nMAX=$(echo \"$FRONTMATTER\" | grep '^max_value:' | sed 's/max_value: *//')\n\n# Validate numeric range\nif ! [[ \"$MAX\" =~ ^[0-9]+$ ]] || [[ $MAX -lt 1 ]] || [[ $MAX -gt 100 ]]; then\n  echo \"âš ï¸  Invalid max_value in settings (must be 1-100)\" >&2\n  MAX=10  # Use default\nfi\n```\n\n### Restart Requirement\n\n**Important:** Settings changes require Claude Code restart.\n\nDocument in your README:\n\n```markdown\n## Changing Settings\n\nAfter editing `.claude/my-plugin.local.md`:\n1. Save the file\n2. Exit Claude Code\n3. Restart: `claude` or `cc`\n4. New settings will be loaded\n```\n\nHooks cannot be hot-swapped within a session.\n\n## Security Considerations\n\n### Sanitize User Input\n\nWhen writing settings files from user input:\n\n```bash\n# Escape quotes in user input\nSAFE_VALUE=$(echo \"$USER_INPUT\" | sed 's/\"/\\\\\"/g')\n\n# Write to file\ncat > \"$STATE_FILE\" <<EOF\n---\nuser_setting: \"$SAFE_VALUE\"\n---\nEOF\n```\n\n### Validate File Paths\n\nIf settings contain file paths:\n\n```bash\nFILE_PATH=$(echo \"$FRONTMATTER\" | grep '^data_file:' | sed 's/data_file: *//')\n\n# Check for path traversal\nif [[ \"$FILE_PATH\" == *\"..\"* ]]; then\n  echo \"âš ï¸  Invalid path in settings (path traversal)\" >&2\n  exit 2\nfi\n```\n\n### Permissions\n\nSettings files should be:\n- Readable by user only (`chmod 600`)\n- Not committed to git\n- Not shared between users\n\n## Real-World Examples\n\n### multi-agent-swarm Plugin\n\n**.claude/multi-agent-swarm.local.md:**\n```markdown\n---\nagent_name: auth-implementation\ntask_number: 3.5\npr_number: 1234\ncoordinator_session: team-leader\nenabled: true\ndependencies: [\"Task 3.4\"]\nadditional_instructions: Use JWT tokens, not sessions\n---\n\n# Task: Implement Authentication\n\nBuild JWT-based authentication for the REST API.\nCoordinate with auth-agent on shared types.\n```\n\n**Hook usage (agent-stop-notification.sh):**\n- Checks if file exists (line 15-18: quick exit if not)\n- Parses frontmatter to get coordinator_session, agent_name, enabled\n- Sends notifications to coordinator if enabled\n- Allows quick activation/deactivation via `enabled: true/false`\n\n### ralph-wiggum Plugin\n\n**.claude/ralph-loop.local.md:**\n```markdown\n---\niteration: 1\nmax_iterations: 10\ncompletion_promise: \"All tests passing and build successful\"\n---\n\nFix all the linting errors in the project.\nMake sure tests pass after each fix.\n```\n\n**Hook usage (stop-hook.sh):**\n- Checks if file exists (line 15-18: quick exit if not active)\n- Reads iteration count and max_iterations\n- Extracts completion_promise for loop termination\n- Reads body as the prompt to feed back\n- Updates iteration count on each loop\n\n## Quick Reference\n\n### File Location\n\n```\nproject-root/\nâ””â”€â”€ .claude/\n    â””â”€â”€ plugin-name.local.md\n```\n\n### Frontmatter Parsing\n\n```bash\n# Extract frontmatter\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n\n# Read field\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field:' | sed 's/field: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n```\n\n### Body Parsing\n\n```bash\n# Extract body (after second ---)\nBODY=$(awk '/^---$/{i++; next} i>=2' \"$FILE\")\n```\n\n### Quick Exit Pattern\n\n```bash\nif [[ ! -f \".claude/my-plugin.local.md\" ]]; then\n  exit 0  # Not configured\nfi\n```\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed implementation patterns:\n\n- **`references/parsing-techniques.md`** - Complete guide to parsing YAML frontmatter and markdown bodies\n- **`references/real-world-examples.md`** - Deep dive into multi-agent-swarm and ralph-wiggum implementations\n\n### Example Files\n\nWorking examples in `examples/`:\n\n- **`read-settings-hook.sh`** - Hook that reads and uses settings\n- **`create-settings-command.md`** - Command that creates settings file\n- **`example-settings.md`** - Template settings file\n\n### Utility Scripts\n\nDevelopment tools in `scripts/`:\n\n- **`validate-settings.sh`** - Validate settings file structure\n- **`parse-frontmatter.sh`** - Extract frontmatter fields\n\n## Implementation Workflow\n\nTo add settings to a plugin:\n\n1. Design settings schema (which fields, types, defaults)\n2. Create template file in plugin documentation\n3. Add gitignore entry for `.claude/*.local.md`\n4. Implement settings parsing in hooks/commands\n5. Use quick-exit pattern (check file exists, check enabled field)\n6. Document settings in plugin README with template\n7. Remind users that changes require Claude Code restart\n\nFocus on keeping settings simple and providing good defaults when settings file doesn't exist."
              },
              {
                "name": "Plugin Structure",
                "description": "This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand plugin structure\", \"organize plugin components\", \"set up plugin.json\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"add commands/agents/skills/hooks\", \"configure auto-discovery\", or needs guidance on plugin directory layout, manifest configuration, component organization, file naming conventions, or Claude Code plugin architecture best practices.",
                "path": "plugins/plugin-dev/skills/plugin-structure/SKILL.md",
                "frontmatter": {
                  "name": "Plugin Structure",
                  "description": "This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand plugin structure\", \"organize plugin components\", \"set up plugin.json\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"add commands/agents/skills/hooks\", \"configure auto-discovery\", or needs guidance on plugin directory layout, manifest configuration, component organization, file naming conventions, or Claude Code plugin architecture best practices.",
                  "version": "0.1.0"
                },
                "content": "# Plugin Structure for Claude Code\n\n## Overview\n\nClaude Code plugins follow a standardized directory structure with automatic component discovery. Understanding this structure enables creating well-organized, maintainable plugins that integrate seamlessly with Claude Code.\n\n**Key concepts:**\n- Conventional directory layout for automatic discovery\n- Manifest-driven configuration in `.claude-plugin/plugin.json`\n- Component-based organization (commands, agents, skills, hooks)\n- Portable path references using `${CLAUDE_PLUGIN_ROOT}`\n- Explicit vs. auto-discovered component loading\n\n## Directory Structure\n\nEvery Claude Code plugin follows this organizational pattern:\n\n```\nplugin-name/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â””â”€â”€ plugin.json          # Required: Plugin manifest\nâ”œâ”€â”€ commands/                 # Slash commands (.md files)\nâ”œâ”€â”€ agents/                   # Subagent definitions (.md files)\nâ”œâ”€â”€ skills/                   # Agent skills (subdirectories)\nâ”‚   â””â”€â”€ skill-name/\nâ”‚       â””â”€â”€ SKILL.md         # Required for each skill\nâ”œâ”€â”€ hooks/\nâ”‚   â””â”€â”€ hooks.json           # Event handler configuration\nâ”œâ”€â”€ .mcp.json                # MCP server definitions\nâ””â”€â”€ scripts/                 # Helper scripts and utilities\n```\n\n**Critical rules:**\n\n1. **Manifest location**: The `plugin.json` manifest MUST be in `.claude-plugin/` directory\n2. **Component locations**: All component directories (commands, agents, skills, hooks) MUST be at plugin root level, NOT nested inside `.claude-plugin/`\n3. **Optional components**: Only create directories for components the plugin actually uses\n4. **Naming convention**: Use kebab-case for all directory and file names\n\n## Plugin Manifest (plugin.json)\n\nThe manifest defines plugin metadata and configuration. Located at `.claude-plugin/plugin.json`:\n\n### Required Fields\n\n```json\n{\n  \"name\": \"plugin-name\"\n}\n```\n\n**Name requirements:**\n- Use kebab-case format (lowercase with hyphens)\n- Must be unique across installed plugins\n- No spaces or special characters\n- Example: `code-review-assistant`, `test-runner`, `api-docs`\n\n### Recommended Metadata\n\n```json\n{\n  \"name\": \"plugin-name\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Brief explanation of plugin purpose\",\n  \"author\": {\n    \"name\": \"Author Name\",\n    \"email\": \"author@example.com\",\n    \"url\": \"https://example.com\"\n  },\n  \"homepage\": \"https://docs.example.com\",\n  \"repository\": \"https://github.com/user/plugin-name\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"testing\", \"automation\", \"ci-cd\"]\n}\n```\n\n**Version format**: Follow semantic versioning (MAJOR.MINOR.PATCH)\n**Keywords**: Use for plugin discovery and categorization\n\n### Component Path Configuration\n\nSpecify custom paths for components (supplements default directories):\n\n```json\n{\n  \"name\": \"plugin-name\",\n  \"commands\": \"./custom-commands\",\n  \"agents\": [\"./agents\", \"./specialized-agents\"],\n  \"hooks\": \"./config/hooks.json\",\n  \"mcpServers\": \"./.mcp.json\"\n}\n```\n\n**Important**: Custom paths supplement defaultsâ€”they don't replace them. Components in both default directories and custom paths will load.\n\n**Path rules:**\n- Must be relative to plugin root\n- Must start with `./`\n- Cannot use absolute paths\n- Support arrays for multiple locations\n\n## Component Organization\n\n### Commands\n\n**Location**: `commands/` directory\n**Format**: Markdown files with YAML frontmatter\n**Auto-discovery**: All `.md` files in `commands/` load automatically\n\n**Example structure**:\n```\ncommands/\nâ”œâ”€â”€ review.md        # /review command\nâ”œâ”€â”€ test.md          # /test command\nâ””â”€â”€ deploy.md        # /deploy command\n```\n\n**File format**:\n```markdown\n---\nname: command-name\ndescription: Command description\n---\n\nCommand implementation instructions...\n```\n\n**Usage**: Commands integrate as native slash commands in Claude Code\n\n### Agents\n\n**Location**: `agents/` directory\n**Format**: Markdown files with YAML frontmatter\n**Auto-discovery**: All `.md` files in `agents/` load automatically\n\n**Example structure**:\n```\nagents/\nâ”œâ”€â”€ code-reviewer.md\nâ”œâ”€â”€ test-generator.md\nâ””â”€â”€ refactorer.md\n```\n\n**File format**:\n```markdown\n---\ndescription: Agent role and expertise\ncapabilities:\n  - Specific task 1\n  - Specific task 2\n---\n\nDetailed agent instructions and knowledge...\n```\n\n**Usage**: Users can invoke agents manually, or Claude Code selects them automatically based on task context\n\n### Skills\n\n**Location**: `skills/` directory with subdirectories per skill\n**Format**: Each skill in its own directory with `SKILL.md` file\n**Auto-discovery**: All `SKILL.md` files in skill subdirectories load automatically\n\n**Example structure**:\n```\nskills/\nâ”œâ”€â”€ api-testing/\nâ”‚   â”œâ”€â”€ SKILL.md\nâ”‚   â”œâ”€â”€ scripts/\nâ”‚   â”‚   â””â”€â”€ test-runner.py\nâ”‚   â””â”€â”€ references/\nâ”‚       â””â”€â”€ api-spec.md\nâ””â”€â”€ database-migrations/\n    â”œâ”€â”€ SKILL.md\n    â””â”€â”€ examples/\n        â””â”€â”€ migration-template.sql\n```\n\n**SKILL.md format**:\n```markdown\n---\nname: Skill Name\ndescription: When to use this skill\nversion: 1.0.0\n---\n\nSkill instructions and guidance...\n```\n\n**Supporting files**: Skills can include scripts, references, examples, or assets in subdirectories\n\n**Usage**: Claude Code autonomously activates skills based on task context matching the description\n\n### Hooks\n\n**Location**: `hooks/hooks.json` or inline in `plugin.json`\n**Format**: JSON configuration defining event handlers\n**Registration**: Hooks register automatically when plugin enables\n\n**Example structure**:\n```\nhooks/\nâ”œâ”€â”€ hooks.json           # Hook configuration\nâ””â”€â”€ scripts/\n    â”œâ”€â”€ validate.sh      # Hook script\n    â””â”€â”€ check-style.sh   # Hook script\n```\n\n**Configuration format**:\n```json\n{\n  \"PreToolUse\": [{\n    \"matcher\": \"Write|Edit\",\n    \"hooks\": [{\n      \"type\": \"command\",\n      \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/validate.sh\",\n      \"timeout\": 30\n    }]\n  }]\n}\n```\n\n**Available events**: PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification\n\n**Usage**: Hooks execute automatically in response to Claude Code events\n\n### MCP Servers\n\n**Location**: `.mcp.json` at plugin root or inline in `plugin.json`\n**Format**: JSON configuration for MCP server definitions\n**Auto-start**: Servers start automatically when plugin enables\n\n**Example format**:\n```json\n{\n  \"mcpServers\": {\n    \"server-name\": {\n      \"command\": \"node\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/server.js\"],\n      \"env\": {\n        \"API_KEY\": \"${API_KEY}\"\n      }\n    }\n  }\n}\n```\n\n**Usage**: MCP servers integrate seamlessly with Claude Code's tool system\n\n## Portable Path References\n\n### ${CLAUDE_PLUGIN_ROOT}\n\nUse `${CLAUDE_PLUGIN_ROOT}` environment variable for all intra-plugin path references:\n\n```json\n{\n  \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/run.sh\"\n}\n```\n\n**Why it matters**: Plugins install in different locations depending on:\n- User installation method (marketplace, local, npm)\n- Operating system conventions\n- User preferences\n\n**Where to use it**:\n- Hook command paths\n- MCP server command arguments\n- Script execution references\n- Resource file paths\n\n**Never use**:\n- Hardcoded absolute paths (`/Users/name/plugins/...`)\n- Relative paths from working directory (`./scripts/...` in commands)\n- Home directory shortcuts (`~/plugins/...`)\n\n### Path Resolution Rules\n\n**In manifest JSON fields** (hooks, MCP servers):\n```json\n\"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/tool.sh\"\n```\n\n**In component files** (commands, agents, skills):\n```markdown\nReference scripts at: ${CLAUDE_PLUGIN_ROOT}/scripts/helper.py\n```\n\n**In executed scripts**:\n```bash\n#!/bin/bash\n# ${CLAUDE_PLUGIN_ROOT} available as environment variable\nsource \"${CLAUDE_PLUGIN_ROOT}/lib/common.sh\"\n```\n\n## File Naming Conventions\n\n### Component Files\n\n**Commands**: Use kebab-case `.md` files\n- `code-review.md` â†’ `/code-review`\n- `run-tests.md` â†’ `/run-tests`\n- `api-docs.md` â†’ `/api-docs`\n\n**Agents**: Use kebab-case `.md` files describing role\n- `test-generator.md`\n- `code-reviewer.md`\n- `performance-analyzer.md`\n\n**Skills**: Use kebab-case directory names\n- `api-testing/`\n- `database-migrations/`\n- `error-handling/`\n\n### Supporting Files\n\n**Scripts**: Use descriptive kebab-case names with appropriate extensions\n- `validate-input.sh`\n- `generate-report.py`\n- `process-data.js`\n\n**Documentation**: Use kebab-case markdown files\n- `api-reference.md`\n- `migration-guide.md`\n- `best-practices.md`\n\n**Configuration**: Use standard names\n- `hooks.json`\n- `.mcp.json`\n- `plugin.json`\n\n## Auto-Discovery Mechanism\n\nClaude Code automatically discovers and loads components:\n\n1. **Plugin manifest**: Reads `.claude-plugin/plugin.json` when plugin enables\n2. **Commands**: Scans `commands/` directory for `.md` files\n3. **Agents**: Scans `agents/` directory for `.md` files\n4. **Skills**: Scans `skills/` for subdirectories containing `SKILL.md`\n5. **Hooks**: Loads configuration from `hooks/hooks.json` or manifest\n6. **MCP servers**: Loads configuration from `.mcp.json` or manifest\n\n**Discovery timing**:\n- Plugin installation: Components register with Claude Code\n- Plugin enable: Components become available for use\n- No restart required: Changes take effect on next Claude Code session\n\n**Override behavior**: Custom paths in `plugin.json` supplement (not replace) default directories\n\n## Best Practices\n\n### Organization\n\n1. **Logical grouping**: Group related components together\n   - Put test-related commands, agents, and skills together\n   - Create subdirectories in `scripts/` for different purposes\n\n2. **Minimal manifest**: Keep `plugin.json` lean\n   - Only specify custom paths when necessary\n   - Rely on auto-discovery for standard layouts\n   - Use inline configuration only for simple cases\n\n3. **Documentation**: Include README files\n   - Plugin root: Overall purpose and usage\n   - Component directories: Specific guidance\n   - Script directories: Usage and requirements\n\n### Naming\n\n1. **Consistency**: Use consistent naming across components\n   - If command is `test-runner`, name related agent `test-runner-agent`\n   - Match skill directory names to their purpose\n\n2. **Clarity**: Use descriptive names that indicate purpose\n   - Good: `api-integration-testing/`, `code-quality-checker.md`\n   - Avoid: `utils/`, `misc.md`, `temp.sh`\n\n3. **Length**: Balance brevity with clarity\n   - Commands: 2-3 words (`review-pr`, `run-ci`)\n   - Agents: Describe role clearly (`code-reviewer`, `test-generator`)\n   - Skills: Topic-focused (`error-handling`, `api-design`)\n\n### Portability\n\n1. **Always use ${CLAUDE_PLUGIN_ROOT}**: Never hardcode paths\n2. **Test on multiple systems**: Verify on macOS, Linux, Windows\n3. **Document dependencies**: List required tools and versions\n4. **Avoid system-specific features**: Use portable bash/Python constructs\n\n### Maintenance\n\n1. **Version consistently**: Update version in plugin.json for releases\n2. **Deprecate gracefully**: Mark old components clearly before removal\n3. **Document breaking changes**: Note changes affecting existing users\n4. **Test thoroughly**: Verify all components work after changes\n\n## Common Patterns\n\n### Minimal Plugin\n\nSingle command with no dependencies:\n```\nmy-plugin/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â””â”€â”€ plugin.json    # Just name field\nâ””â”€â”€ commands/\n    â””â”€â”€ hello.md       # Single command\n```\n\n### Full-Featured Plugin\n\nComplete plugin with all component types:\n```\nmy-plugin/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â””â”€â”€ plugin.json\nâ”œâ”€â”€ commands/          # User-facing commands\nâ”œâ”€â”€ agents/            # Specialized subagents\nâ”œâ”€â”€ skills/            # Auto-activating skills\nâ”œâ”€â”€ hooks/             # Event handlers\nâ”‚   â”œâ”€â”€ hooks.json\nâ”‚   â””â”€â”€ scripts/\nâ”œâ”€â”€ .mcp.json          # External integrations\nâ””â”€â”€ scripts/           # Shared utilities\n```\n\n### Skill-Focused Plugin\n\nPlugin providing only skills:\n```\nmy-plugin/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â””â”€â”€ plugin.json\nâ””â”€â”€ skills/\n    â”œâ”€â”€ skill-one/\n    â”‚   â””â”€â”€ SKILL.md\n    â””â”€â”€ skill-two/\n        â””â”€â”€ SKILL.md\n```\n\n## Troubleshooting\n\n**Component not loading**:\n- Verify file is in correct directory with correct extension\n- Check YAML frontmatter syntax (commands, agents, skills)\n- Ensure skill has `SKILL.md` (not `README.md` or other name)\n- Confirm plugin is enabled in Claude Code settings\n\n**Path resolution errors**:\n- Replace all hardcoded paths with `${CLAUDE_PLUGIN_ROOT}`\n- Verify paths are relative and start with `./` in manifest\n- Check that referenced files exist at specified paths\n- Test with `echo $CLAUDE_PLUGIN_ROOT` in hook scripts\n\n**Auto-discovery not working**:\n- Confirm directories are at plugin root (not in `.claude-plugin/`)\n- Check file naming follows conventions (kebab-case, correct extensions)\n- Verify custom paths in manifest are correct\n- Restart Claude Code to reload plugin configuration\n\n**Conflicts between plugins**:\n- Use unique, descriptive component names\n- Namespace commands with plugin name if needed\n- Document potential conflicts in plugin README\n- Consider command prefixes for related functionality\n\n---\n\nFor detailed examples and advanced patterns, see files in `references/` and `examples/` directories."
              },
              {
                "name": "Skill Development",
                "description": "This skill should be used when the user wants to \"create a skill\", \"add a skill to plugin\", \"write a new skill\", \"improve skill description\", \"organize skill content\", or needs guidance on skill structure, progressive disclosure, or skill development best practices for Claude Code plugins.",
                "path": "plugins/plugin-dev/skills/skill-development/SKILL.md",
                "frontmatter": {
                  "name": "Skill Development",
                  "description": "This skill should be used when the user wants to \"create a skill\", \"add a skill to plugin\", \"write a new skill\", \"improve skill description\", \"organize skill content\", or needs guidance on skill structure, progressive disclosure, or skill development best practices for Claude Code plugins.",
                  "version": "0.1.0"
                },
                "content": "# Skill Development for Claude Code Plugins\n\nThis skill provides guidance for creating effective skills for Claude Code plugins.\n\n## About Skills\n\nSkills are modular, self-contained packages that extend Claude's capabilities by providing\nspecialized knowledge, workflows, and tools. Think of them as \"onboarding guides\" for specific\ndomains or tasksâ€”they transform Claude from a general-purpose agent into a specialized agent\nequipped with procedural knowledge that no model can fully possess.\n\n### What Skills Provide\n\n1. Specialized workflows - Multi-step procedures for specific domains\n2. Tool integrations - Instructions for working with specific file formats or APIs\n3. Domain expertise - Company-specific knowledge, schemas, business logic\n4. Bundled resources - Scripts, references, and assets for complex and repetitive tasks\n\n### Anatomy of a Skill\n\nEvery skill consists of a required SKILL.md file and optional bundled resources:\n\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md (required)\nâ”‚   â”œâ”€â”€ YAML frontmatter metadata (required)\nâ”‚   â”‚   â”œâ”€â”€ name: (required)\nâ”‚   â”‚   â””â”€â”€ description: (required)\nâ”‚   â””â”€â”€ Markdown instructions (required)\nâ””â”€â”€ Bundled Resources (optional)\n    â”œâ”€â”€ scripts/          - Executable code (Python/Bash/etc.)\n    â”œâ”€â”€ references/       - Documentation intended to be loaded into context as needed\n    â””â”€â”€ assets/           - Files used in output (templates, icons, fonts, etc.)\n```\n\n#### SKILL.md (required)\n\n**Metadata Quality:** The `name` and `description` in YAML frontmatter determine when Claude will use the skill. Be specific about what the skill does and when to use it. Use the third-person (e.g. \"This skill should be used when...\" instead of \"Use this skill when...\").\n\n#### Bundled Resources (optional)\n\n##### Scripts (`scripts/`)\n\nExecutable code (Python/Bash/etc.) for tasks that require deterministic reliability or are repeatedly rewritten.\n\n- **When to include**: When the same code is being rewritten repeatedly or deterministic reliability is needed\n- **Example**: `scripts/rotate_pdf.py` for PDF rotation tasks\n- **Benefits**: Token efficient, deterministic, may be executed without loading into context\n- **Note**: Scripts may still need to be read by Claude for patching or environment-specific adjustments\n\n##### References (`references/`)\n\nDocumentation and reference material intended to be loaded as needed into context to inform Claude's process and thinking.\n\n- **When to include**: For documentation that Claude should reference while working\n- **Examples**: `references/finance.md` for financial schemas, `references/mnda.md` for company NDA template, `references/policies.md` for company policies, `references/api_docs.md` for API specifications\n- **Use cases**: Database schemas, API documentation, domain knowledge, company policies, detailed workflow guides\n- **Benefits**: Keeps SKILL.md lean, loaded only when Claude determines it's needed\n- **Best practice**: If files are large (>10k words), include grep search patterns in SKILL.md\n- **Avoid duplication**: Information should live in either SKILL.md or references files, not both. Prefer references files for detailed information unless it's truly core to the skillâ€”this keeps SKILL.md lean while making information discoverable without hogging the context window. Keep only essential procedural instructions and workflow guidance in SKILL.md; move detailed reference material, schemas, and examples to references files.\n\n##### Assets (`assets/`)\n\nFiles not intended to be loaded into context, but rather used within the output Claude produces.\n\n- **When to include**: When the skill needs files that will be used in the final output\n- **Examples**: `assets/logo.png` for brand assets, `assets/slides.pptx` for PowerPoint templates, `assets/frontend-template/` for HTML/React boilerplate, `assets/font.ttf` for typography\n- **Use cases**: Templates, images, icons, boilerplate code, fonts, sample documents that get copied or modified\n- **Benefits**: Separates output resources from documentation, enables Claude to use files without loading them into context\n\n### Progressive Disclosure Design Principle\n\nSkills use a three-level loading system to manage context efficiently:\n\n1. **Metadata (name + description)** - Always in context (~100 words)\n2. **SKILL.md body** - When skill triggers (<5k words)\n3. **Bundled resources** - As needed by Claude (Unlimited*)\n\n*Unlimited because scripts can be executed without reading into context window.\n\n## Skill Creation Process\n\nTo create a skill, follow the \"Skill Creation Process\" in order, skipping steps only if there is a clear reason why they are not applicable.\n\n### Step 1: Understanding the Skill with Concrete Examples\n\nSkip this step only when the skill's usage patterns are already clearly understood. It remains valuable even when working with an existing skill.\n\nTo create an effective skill, clearly understand concrete examples of how the skill will be used. This understanding can come from either direct user examples or generated examples that are validated with user feedback.\n\nFor example, when building an image-editor skill, relevant questions include:\n\n- \"What functionality should the image-editor skill support? Editing, rotating, anything else?\"\n- \"Can you give some examples of how this skill would be used?\"\n- \"I can imagine users asking for things like 'Remove the red-eye from this image' or 'Rotate this image'. Are there other ways you imagine this skill being used?\"\n- \"What would a user say that should trigger this skill?\"\n\nTo avoid overwhelming users, avoid asking too many questions in a single message. Start with the most important questions and follow up as needed for better effectiveness.\n\nConclude this step when there is a clear sense of the functionality the skill should support.\n\n### Step 2: Planning the Reusable Skill Contents\n\nTo turn concrete examples into an effective skill, analyze each example by:\n\n1. Considering how to execute on the example from scratch\n2. Identifying what scripts, references, and assets would be helpful when executing these workflows repeatedly\n\nExample: When building a `pdf-editor` skill to handle queries like \"Help me rotate this PDF,\" the analysis shows:\n\n1. Rotating a PDF requires re-writing the same code each time\n2. A `scripts/rotate_pdf.py` script would be helpful to store in the skill\n\nExample: When designing a `frontend-webapp-builder` skill for queries like \"Build me a todo app\" or \"Build me a dashboard to track my steps,\" the analysis shows:\n\n1. Writing a frontend webapp requires the same boilerplate HTML/React each time\n2. An `assets/hello-world/` template containing the boilerplate HTML/React project files would be helpful to store in the skill\n\nExample: When building a `big-query` skill to handle queries like \"How many users have logged in today?\" the analysis shows:\n\n1. Querying BigQuery requires re-discovering the table schemas and relationships each time\n2. A `references/schema.md` file documenting the table schemas would be helpful to store in the skill\n\n**For Claude Code plugins:** When building a hooks skill, the analysis shows:\n1. Developers repeatedly need to validate hooks.json and test hook scripts\n2. `scripts/validate-hook-schema.sh` and `scripts/test-hook.sh` utilities would be helpful\n3. `references/patterns.md` for detailed hook patterns to avoid bloating SKILL.md\n\nTo establish the skill's contents, analyze each concrete example to create a list of the reusable resources to include: scripts, references, and assets.\n\n### Step 3: Create Skill Structure\n\nFor Claude Code plugins, create the skill directory structure:\n\n```bash\nmkdir -p plugin-name/skills/skill-name/{references,examples,scripts}\ntouch plugin-name/skills/skill-name/SKILL.md\n```\n\n**Note:** Unlike the generic skill-creator which uses `init_skill.py`, plugin skills are created directly in the plugin's `skills/` directory with a simpler manual structure.\n\n### Step 4: Edit the Skill\n\nWhen editing the (newly-created or existing) skill, remember that the skill is being created for another instance of Claude to use. Focus on including information that would be beneficial and non-obvious to Claude. Consider what procedural knowledge, domain-specific details, or reusable assets would help another Claude instance execute these tasks more effectively.\n\n#### Start with Reusable Skill Contents\n\nTo begin implementation, start with the reusable resources identified above: `scripts/`, `references/`, and `assets/` files. Note that this step may require user input. For example, when implementing a `brand-guidelines` skill, the user may need to provide brand assets or templates to store in `assets/`, or documentation to store in `references/`.\n\nAlso, delete any example files and directories not needed for the skill. Create only the directories you actually need (references/, examples/, scripts/).\n\n#### Update SKILL.md\n\n**Writing Style:** Write the entire skill using **imperative/infinitive form** (verb-first instructions), not second person. Use objective, instructional language (e.g., \"To accomplish X, do Y\" rather than \"You should do X\" or \"If you need to do X\"). This maintains consistency and clarity for AI consumption.\n\n**Description (Frontmatter):** Use third-person format with specific trigger phrases:\n\n```yaml\n---\nname: Skill Name\ndescription: This skill should be used when the user asks to \"specific phrase 1\", \"specific phrase 2\", \"specific phrase 3\". Include exact phrases users would say that should trigger this skill. Be concrete and specific.\nversion: 0.1.0\n---\n```\n\n**Good description examples:**\n```yaml\ndescription: This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse hook\", \"validate tool use\", \"implement prompt-based hooks\", or mentions hook events (PreToolUse, PostToolUse, Stop).\n```\n\n**Bad description examples:**\n```yaml\ndescription: Use this skill when working with hooks.  # Wrong person, vague\ndescription: Load when user needs hook help.  # Not third person\ndescription: Provides hook guidance.  # No trigger phrases\n```\n\nTo complete SKILL.md body, answer the following questions:\n\n1. What is the purpose of the skill, in a few sentences?\n2. When should the skill be used? (Include this in frontmatter description with specific triggers)\n3. In practice, how should Claude use the skill? All reusable skill contents developed above should be referenced so that Claude knows how to use them.\n\n**Keep SKILL.md lean:** Target 1,500-2,000 words for the body. Move detailed content to references/:\n- Detailed patterns â†’ `references/patterns.md`\n- Advanced techniques â†’ `references/advanced.md`\n- Migration guides â†’ `references/migration.md`\n- API references â†’ `references/api-reference.md`\n\n**Reference resources in SKILL.md:**\n```markdown\n## Additional Resources\n\n### Reference Files\n\nFor detailed patterns and techniques, consult:\n- **`references/patterns.md`** - Common patterns\n- **`references/advanced.md`** - Advanced use cases\n\n### Example Files\n\nWorking examples in `examples/`:\n- **`example-script.sh`** - Working example\n```\n\n### Step 5: Validate and Test\n\n**For plugin skills, validation is different from generic skills:**\n\n1. **Check structure**: Skill directory in `plugin-name/skills/skill-name/`\n2. **Validate SKILL.md**: Has frontmatter with name and description\n3. **Check trigger phrases**: Description includes specific user queries\n4. **Verify writing style**: Body uses imperative/infinitive form, not second person\n5. **Test progressive disclosure**: SKILL.md is lean (~1,500-2,000 words), detailed content in references/\n6. **Check references**: All referenced files exist\n7. **Validate examples**: Examples are complete and correct\n8. **Test scripts**: Scripts are executable and work correctly\n\n**Use the skill-reviewer agent:**\n```\nAsk: \"Review my skill and check if it follows best practices\"\n```\n\nThe skill-reviewer agent will check description quality, content organization, and progressive disclosure.\n\n### Step 6: Iterate\n\nAfter testing the skill, users may request improvements. Often this happens right after using the skill, with fresh context of how the skill performed.\n\n**Iteration workflow:**\n1. Use the skill on real tasks\n2. Notice struggles or inefficiencies\n3. Identify how SKILL.md or bundled resources should be updated\n4. Implement changes and test again\n\n**Common improvements:**\n- Strengthen trigger phrases in description\n- Move long sections from SKILL.md to references/\n- Add missing examples or scripts\n- Clarify ambiguous instructions\n- Add edge case handling\n\n## Plugin-Specific Considerations\n\n### Skill Location in Plugins\n\nPlugin skills live in the plugin's `skills/` directory:\n\n```\nmy-plugin/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â””â”€â”€ plugin.json\nâ”œâ”€â”€ commands/\nâ”œâ”€â”€ agents/\nâ””â”€â”€ skills/\n    â””â”€â”€ my-skill/\n        â”œâ”€â”€ SKILL.md\n        â”œâ”€â”€ references/\n        â”œâ”€â”€ examples/\n        â””â”€â”€ scripts/\n```\n\n### Auto-Discovery\n\nClaude Code automatically discovers skills:\n- Scans `skills/` directory\n- Finds subdirectories containing `SKILL.md`\n- Loads skill metadata (name + description) always\n- Loads SKILL.md body when skill triggers\n- Loads references/examples when needed\n\n### No Packaging Needed\n\nPlugin skills are distributed as part of the plugin, not as separate ZIP files. Users get skills when they install the plugin.\n\n### Testing in Plugins\n\nTest skills by installing plugin locally:\n\n```bash\n# Test with --plugin-dir\ncc --plugin-dir /path/to/plugin\n\n# Ask questions that should trigger the skill\n# Verify skill loads correctly\n```\n\n## Examples from Plugin-Dev\n\nStudy the skills in this plugin as examples of best practices:\n\n**hook-development skill:**\n- Excellent trigger phrases: \"create a hook\", \"add a PreToolUse hook\", etc.\n- Lean SKILL.md (1,651 words)\n- 3 references/ files for detailed content\n- 3 examples/ of working hooks\n- 3 scripts/ utilities\n\n**agent-development skill:**\n- Strong triggers: \"create an agent\", \"agent frontmatter\", etc.\n- Focused SKILL.md (1,438 words)\n- References include the AI generation prompt from Claude Code\n- Complete agent examples\n\n**plugin-settings skill:**\n- Specific triggers: \"plugin settings\", \".local.md files\", \"YAML frontmatter\"\n- References show real implementations (multi-agent-swarm, ralph-wiggum)\n- Working parsing scripts\n\nEach demonstrates progressive disclosure and strong triggering.\n\n## Progressive Disclosure in Practice\n\n### What Goes in SKILL.md\n\n**Include (always loaded when skill triggers):**\n- Core concepts and overview\n- Essential procedures and workflows\n- Quick reference tables\n- Pointers to references/examples/scripts\n- Most common use cases\n\n**Keep under 3,000 words, ideally 1,500-2,000 words**\n\n### What Goes in references/\n\n**Move to references/ (loaded as needed):**\n- Detailed patterns and advanced techniques\n- Comprehensive API documentation\n- Migration guides\n- Edge cases and troubleshooting\n- Extensive examples and walkthroughs\n\n**Each reference file can be large (2,000-5,000+ words)**\n\n### What Goes in examples/\n\n**Working code examples:**\n- Complete, runnable scripts\n- Configuration files\n- Template files\n- Real-world usage examples\n\n**Users can copy and adapt these directly**\n\n### What Goes in scripts/\n\n**Utility scripts:**\n- Validation tools\n- Testing helpers\n- Parsing utilities\n- Automation scripts\n\n**Should be executable and documented**\n\n## Writing Style Requirements\n\n### Imperative/Infinitive Form\n\nWrite using verb-first instructions, not second person:\n\n**Correct (imperative):**\n```\nTo create a hook, define the event type.\nConfigure the MCP server with authentication.\nValidate settings before use.\n```\n\n**Incorrect (second person):**\n```\nYou should create a hook by defining the event type.\nYou need to configure the MCP server.\nYou must validate settings before use.\n```\n\n### Third-Person in Description\n\nThe frontmatter description must use third person:\n\n**Correct:**\n```yaml\ndescription: This skill should be used when the user asks to \"create X\", \"configure Y\"...\n```\n\n**Incorrect:**\n```yaml\ndescription: Use this skill when you want to create X...\ndescription: Load this skill when user asks...\n```\n\n### Objective, Instructional Language\n\nFocus on what to do, not who should do it:\n\n**Correct:**\n```\nParse the frontmatter using sed.\nExtract fields with grep.\nValidate values before use.\n```\n\n**Incorrect:**\n```\nYou can parse the frontmatter...\nClaude should extract fields...\nThe user might validate values...\n```\n\n## Validation Checklist\n\nBefore finalizing a skill:\n\n**Structure:**\n- [ ] SKILL.md file exists with valid YAML frontmatter\n- [ ] Frontmatter has `name` and `description` fields\n- [ ] Markdown body is present and substantial\n- [ ] Referenced files actually exist\n\n**Description Quality:**\n- [ ] Uses third person (\"This skill should be used when...\")\n- [ ] Includes specific trigger phrases users would say\n- [ ] Lists concrete scenarios (\"create X\", \"configure Y\")\n- [ ] Not vague or generic\n\n**Content Quality:**\n- [ ] SKILL.md body uses imperative/infinitive form\n- [ ] Body is focused and lean (1,500-2,000 words ideal, <5k max)\n- [ ] Detailed content moved to references/\n- [ ] Examples are complete and working\n- [ ] Scripts are executable and documented\n\n**Progressive Disclosure:**\n- [ ] Core concepts in SKILL.md\n- [ ] Detailed docs in references/\n- [ ] Working code in examples/\n- [ ] Utilities in scripts/\n- [ ] SKILL.md references these resources\n\n**Testing:**\n- [ ] Skill triggers on expected user queries\n- [ ] Content is helpful for intended tasks\n- [ ] No duplicated information across files\n- [ ] References load when needed\n\n## Common Mistakes to Avoid\n\n### Mistake 1: Weak Trigger Description\n\nâŒ **Bad:**\n```yaml\ndescription: Provides guidance for working with hooks.\n```\n\n**Why bad:** Vague, no specific trigger phrases, not third person\n\nâœ… **Good:**\n```yaml\ndescription: This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse hook\", \"validate tool use\", or mentions hook events. Provides comprehensive hooks API guidance.\n```\n\n**Why good:** Third person, specific phrases, concrete scenarios\n\n### Mistake 2: Too Much in SKILL.md\n\nâŒ **Bad:**\n```\nskill-name/\nâ””â”€â”€ SKILL.md  (8,000 words - everything in one file)\n```\n\n**Why bad:** Bloats context when skill loads, detailed content always loaded\n\nâœ… **Good:**\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md  (1,800 words - core essentials)\nâ””â”€â”€ references/\n    â”œâ”€â”€ patterns.md (2,500 words)\n    â””â”€â”€ advanced.md (3,700 words)\n```\n\n**Why good:** Progressive disclosure, detailed content loaded only when needed\n\n### Mistake 3: Second Person Writing\n\nâŒ **Bad:**\n```markdown\nYou should start by reading the configuration file.\nYou need to validate the input.\nYou can use the grep tool to search.\n```\n\n**Why bad:** Second person, not imperative form\n\nâœ… **Good:**\n```markdown\nStart by reading the configuration file.\nValidate the input before processing.\nUse the grep tool to search for patterns.\n```\n\n**Why good:** Imperative form, direct instructions\n\n### Mistake 4: Missing Resource References\n\nâŒ **Bad:**\n```markdown\n# SKILL.md\n\n[Core content]\n\n[No mention of references/ or examples/]\n```\n\n**Why bad:** Claude doesn't know references exist\n\nâœ… **Good:**\n```markdown\n# SKILL.md\n\n[Core content]\n\n## Additional Resources\n\n### Reference Files\n- **`references/patterns.md`** - Detailed patterns\n- **`references/advanced.md`** - Advanced techniques\n\n### Examples\n- **`examples/script.sh`** - Working example\n```\n\n**Why good:** Claude knows where to find additional information\n\n## Quick Reference\n\n### Minimal Skill\n\n```\nskill-name/\nâ””â”€â”€ SKILL.md\n```\n\nGood for: Simple knowledge, no complex resources needed\n\n### Standard Skill (Recommended)\n\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md\nâ”œâ”€â”€ references/\nâ”‚   â””â”€â”€ detailed-guide.md\nâ””â”€â”€ examples/\n    â””â”€â”€ working-example.sh\n```\n\nGood for: Most plugin skills with detailed documentation\n\n### Complete Skill\n\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md\nâ”œâ”€â”€ references/\nâ”‚   â”œâ”€â”€ patterns.md\nâ”‚   â””â”€â”€ advanced.md\nâ”œâ”€â”€ examples/\nâ”‚   â”œâ”€â”€ example1.sh\nâ”‚   â””â”€â”€ example2.json\nâ””â”€â”€ scripts/\n    â””â”€â”€ validate.sh\n```\n\nGood for: Complex domains with validation utilities\n\n## Best Practices Summary\n\nâœ… **DO:**\n- Use third-person in description (\"This skill should be used when...\")\n- Include specific trigger phrases (\"create X\", \"configure Y\")\n- Keep SKILL.md lean (1,500-2,000 words)\n- Use progressive disclosure (move details to references/)\n- Write in imperative/infinitive form\n- Reference supporting files clearly\n- Provide working examples\n- Create utility scripts for common operations\n- Study plugin-dev's skills as templates\n\nâŒ **DON'T:**\n- Use second person anywhere\n- Have vague trigger conditions\n- Put everything in SKILL.md (>3,000 words without references/)\n- Write in second person (\"You should...\")\n- Leave resources unreferenced\n- Include broken or incomplete examples\n- Skip validation\n\n## Additional Resources\n\n### Study These Skills\n\nPlugin-dev's skills demonstrate best practices:\n- `../hook-development/` - Progressive disclosure, utilities\n- `../agent-development/` - AI-assisted creation, references\n- `../mcp-integration/` - Comprehensive references\n- `../plugin-settings/` - Real-world examples\n- `../command-development/` - Clear critical concepts\n- `../plugin-structure/` - Good organization\n\n### Reference Files\n\nFor complete skill-creator methodology:\n- **`references/skill-creator-original.md`** - Full original skill-creator content\n\n## Implementation Workflow\n\nTo create a skill for your plugin:\n\n1. **Understand use cases**: Identify concrete examples of skill usage\n2. **Plan resources**: Determine what scripts/references/examples needed\n3. **Create structure**: `mkdir -p skills/skill-name/{references,examples,scripts}`\n4. **Write SKILL.md**:\n   - Frontmatter with third-person description and trigger phrases\n   - Lean body (1,500-2,000 words) in imperative form\n   - Reference supporting files\n5. **Add resources**: Create references/, examples/, scripts/ as needed\n6. **Validate**: Check description, writing style, organization\n7. **Test**: Verify skill loads on expected triggers\n8. **Iterate**: Improve based on usage\n\nFocus on strong trigger descriptions, progressive disclosure, and imperative writing style for effective skills that load when needed and provide targeted guidance."
              }
            ]
          },
          {
            "name": "pr-review-toolkit",
            "description": "Comprehensive PR review agents specializing in comments, tests, error handling, type design, code quality, and code simplification",
            "source": "./plugins/pr-review-toolkit",
            "category": "productivity",
            "version": "1.0.0",
            "author": {
              "name": "Anthropic",
              "email": "support@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install pr-review-toolkit@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [
              {
                "name": "/review-pr",
                "description": "Comprehensive PR review using specialized agents",
                "path": "plugins/pr-review-toolkit/commands/review-pr.md",
                "frontmatter": {
                  "description": "Comprehensive PR review using specialized agents",
                  "argument-hint": "[review-aspects]",
                  "allowed-tools": [
                    "Bash",
                    "Glob",
                    "Grep",
                    "Read",
                    "Task"
                  ]
                },
                "content": "# Comprehensive PR Review\n\nRun a comprehensive pull request review using multiple specialized agents, each focusing on a different aspect of code quality.\n\n**Review Aspects (optional):** \"$ARGUMENTS\"\n\n## Review Workflow:\n\n1. **Determine Review Scope**\n   - Check git status to identify changed files\n   - Parse arguments to see if user requested specific review aspects\n   - Default: Run all applicable reviews\n\n2. **Available Review Aspects:**\n\n   - **comments** - Analyze code comment accuracy and maintainability\n   - **tests** - Review test coverage quality and completeness\n   - **errors** - Check error handling for silent failures\n   - **types** - Analyze type design and invariants (if new types added)\n   - **code** - General code review for project guidelines\n   - **simplify** - Simplify code for clarity and maintainability\n   - **all** - Run all applicable reviews (default)\n\n3. **Identify Changed Files**\n   - Run `git diff --name-only` to see modified files\n   - Check if PR already exists: `gh pr view`\n   - Identify file types and what reviews apply\n\n4. **Determine Applicable Reviews**\n\n   Based on changes:\n   - **Always applicable**: code-reviewer (general quality)\n   - **If test files changed**: pr-test-analyzer\n   - **If comments/docs added**: comment-analyzer\n   - **If error handling changed**: silent-failure-hunter\n   - **If types added/modified**: type-design-analyzer\n   - **After passing review**: code-simplifier (polish and refine)\n\n5. **Launch Review Agents**\n\n   **Sequential approach** (one at a time):\n   - Easier to understand and act on\n   - Each report is complete before next\n   - Good for interactive review\n\n   **Parallel approach** (user can request):\n   - Launch all agents simultaneously\n   - Faster for comprehensive review\n   - Results come back together\n\n6. **Aggregate Results**\n\n   After agents complete, summarize:\n   - **Critical Issues** (must fix before merge)\n   - **Important Issues** (should fix)\n   - **Suggestions** (nice to have)\n   - **Positive Observations** (what's good)\n\n7. **Provide Action Plan**\n\n   Organize findings:\n   ```markdown\n   # PR Review Summary\n\n   ## Critical Issues (X found)\n   - [agent-name]: Issue description [file:line]\n\n   ## Important Issues (X found)\n   - [agent-name]: Issue description [file:line]\n\n   ## Suggestions (X found)\n   - [agent-name]: Suggestion [file:line]\n\n   ## Strengths\n   - What's well-done in this PR\n\n   ## Recommended Action\n   1. Fix critical issues first\n   2. Address important issues\n   3. Consider suggestions\n   4. Re-run review after fixes\n   ```\n\n## Usage Examples:\n\n**Full review (default):**\n```\n/pr-review-toolkit:review-pr\n```\n\n**Specific aspects:**\n```\n/pr-review-toolkit:review-pr tests errors\n# Reviews only test coverage and error handling\n\n/pr-review-toolkit:review-pr comments\n# Reviews only code comments\n\n/pr-review-toolkit:review-pr simplify\n# Simplifies code after passing review\n```\n\n**Parallel review:**\n```\n/pr-review-toolkit:review-pr all parallel\n# Launches all agents in parallel\n```\n\n## Agent Descriptions:\n\n**comment-analyzer**:\n- Verifies comment accuracy vs code\n- Identifies comment rot\n- Checks documentation completeness\n\n**pr-test-analyzer**:\n- Reviews behavioral test coverage\n- Identifies critical gaps\n- Evaluates test quality\n\n**silent-failure-hunter**:\n- Finds silent failures\n- Reviews catch blocks\n- Checks error logging\n\n**type-design-analyzer**:\n- Analyzes type encapsulation\n- Reviews invariant expression\n- Rates type design quality\n\n**code-reviewer**:\n- Checks CLAUDE.md compliance\n- Detects bugs and issues\n- Reviews general code quality\n\n**code-simplifier**:\n- Simplifies complex code\n- Improves clarity and readability\n- Applies project standards\n- Preserves functionality\n\n## Tips:\n\n- **Run early**: Before creating PR, not after\n- **Focus on changes**: Agents analyze git diff by default\n- **Address critical first**: Fix high-priority issues before lower priority\n- **Re-run after fixes**: Verify issues are resolved\n- **Use specific reviews**: Target specific aspects when you know the concern\n\n## Workflow Integration:\n\n**Before committing:**\n```\n1. Write code\n2. Run: /pr-review-toolkit:review-pr code errors\n3. Fix any critical issues\n4. Commit\n```\n\n**Before creating PR:**\n```\n1. Stage all changes\n2. Run: /pr-review-toolkit:review-pr all\n3. Address all critical and important issues\n4. Run specific reviews again to verify\n5. Create PR\n```\n\n**After PR feedback:**\n```\n1. Make requested changes\n2. Run targeted reviews based on feedback\n3. Verify issues are resolved\n4. Push updates\n```\n\n## Notes:\n\n- Agents run autonomously and return detailed reports\n- Each agent focuses on its specialty for deep analysis\n- Results are actionable with specific file:line references\n- Agents use appropriate models for their complexity\n- All agents available in `/agents` list"
              }
            ],
            "skills": []
          },
          {
            "name": "ralph-wiggum",
            "description": "Interactive self-referential AI loops for iterative development. Claude works on the same task repeatedly, seeing its previous work, until completion.",
            "source": "./plugins/ralph-wiggum",
            "category": "development",
            "version": "1.0.0",
            "author": {
              "name": "Daisy Hollman",
              "email": "daisy@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install ralph-wiggum@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [
              {
                "name": "/cancel-ralph",
                "description": "Cancel active Ralph Wiggum loop",
                "path": "plugins/ralph-wiggum/commands/cancel-ralph.md",
                "frontmatter": {
                  "description": "Cancel active Ralph Wiggum loop",
                  "allowed-tools": [
                    "Bash(test -f .claude/ralph-loop.local.md:*)",
                    "Bash(rm .claude/ralph-loop.local.md)",
                    "Read(.claude/ralph-loop.local.md)"
                  ],
                  "hide-from-slash-command-tool": "true"
                },
                "content": "# Cancel Ralph\n\nTo cancel the Ralph loop:\n\n1. Check if `.claude/ralph-loop.local.md` exists using Bash: `test -f .claude/ralph-loop.local.md && echo \"EXISTS\" || echo \"NOT_FOUND\"`\n\n2. **If NOT_FOUND**: Say \"No active Ralph loop found.\"\n\n3. **If EXISTS**:\n   - Read `.claude/ralph-loop.local.md` to get the current iteration number from the `iteration:` field\n   - Remove the file using Bash: `rm .claude/ralph-loop.local.md`\n   - Report: \"Cancelled Ralph loop (was at iteration N)\" where N is the iteration value"
              },
              {
                "name": "/help",
                "description": "Explain Ralph Wiggum technique and available commands",
                "path": "plugins/ralph-wiggum/commands/help.md",
                "frontmatter": {
                  "description": "Explain Ralph Wiggum technique and available commands"
                },
                "content": "# Ralph Wiggum Plugin Help\n\nPlease explain the following to the user:\n\n## What is the Ralph Wiggum Technique?\n\nThe Ralph Wiggum technique is an iterative development methodology based on continuous AI loops, pioneered by Geoffrey Huntley.\n\n**Core concept:**\n```bash\nwhile :; do\n  cat PROMPT.md | claude-code --continue\ndone\n```\n\nThe same prompt is fed to Claude repeatedly. The \"self-referential\" aspect comes from Claude seeing its own previous work in the files and git history, not from feeding output back as input.\n\n**Each iteration:**\n1. Claude receives the SAME prompt\n2. Works on the task, modifying files\n3. Tries to exit\n4. Stop hook intercepts and feeds the same prompt again\n5. Claude sees its previous work in the files\n6. Iteratively improves until completion\n\nThe technique is described as \"deterministically bad in an undeterministic world\" - failures are predictable, enabling systematic improvement through prompt tuning.\n\n## Available Commands\n\n### /ralph-loop <PROMPT> [OPTIONS]\n\nStart a Ralph loop in your current session.\n\n**Usage:**\n```\n/ralph-loop \"Refactor the cache layer\" --max-iterations 20\n/ralph-loop \"Add tests\" --completion-promise \"TESTS COMPLETE\"\n```\n\n**Options:**\n- `--max-iterations <n>` - Max iterations before auto-stop\n- `--completion-promise <text>` - Promise phrase to signal completion\n\n**How it works:**\n1. Creates `.claude/.ralph-loop.local.md` state file\n2. You work on the task\n3. When you try to exit, stop hook intercepts\n4. Same prompt fed back\n5. You see your previous work\n6. Continues until promise detected or max iterations\n\n---\n\n### /cancel-ralph\n\nCancel an active Ralph loop (removes the loop state file).\n\n**Usage:**\n```\n/cancel-ralph\n```\n\n**How it works:**\n- Checks for active loop state file\n- Removes `.claude/.ralph-loop.local.md`\n- Reports cancellation with iteration count\n\n---\n\n## Key Concepts\n\n### Completion Promises\n\nTo signal completion, Claude must output a `<promise>` tag:\n\n```\n<promise>TASK COMPLETE</promise>\n```\n\nThe stop hook looks for this specific tag. Without it (or `--max-iterations`), Ralph runs infinitely.\n\n### Self-Reference Mechanism\n\nThe \"loop\" doesn't mean Claude talks to itself. It means:\n- Same prompt repeated\n- Claude's work persists in files\n- Each iteration sees previous attempts\n- Builds incrementally toward goal\n\n## Example\n\n### Interactive Bug Fix\n\n```\n/ralph-loop \"Fix the token refresh logic in auth.ts. Output <promise>FIXED</promise> when all tests pass.\" --completion-promise \"FIXED\" --max-iterations 10\n```\n\nYou'll see Ralph:\n- Attempt fixes\n- Run tests\n- See failures\n- Iterate on solution\n- In your current session\n\n## When to Use Ralph\n\n**Good for:**\n- Well-defined tasks with clear success criteria\n- Tasks requiring iteration and refinement\n- Iterative development with self-correction\n- Greenfield projects\n\n**Not good for:**\n- Tasks requiring human judgment or design decisions\n- One-shot operations\n- Tasks with unclear success criteria\n- Debugging production issues (use targeted debugging instead)\n\n## Learn More\n\n- Original technique: https://ghuntley.com/ralph/\n- Ralph Orchestrator: https://github.com/mikeyobrien/ralph-orchestrator"
              },
              {
                "name": "/ralph-loop",
                "description": "Start Ralph Wiggum loop in current session",
                "path": "plugins/ralph-wiggum/commands/ralph-loop.md",
                "frontmatter": {
                  "description": "Start Ralph Wiggum loop in current session",
                  "argument-hint": "PROMPT [--max-iterations N] [--completion-promise TEXT]",
                  "allowed-tools": [
                    "Bash(${CLAUDE_PLUGIN_ROOT}/scripts/setup-ralph-loop.sh:*)"
                  ],
                  "hide-from-slash-command-tool": "true"
                },
                "content": "# Ralph Loop Command\n\nExecute the setup script to initialize the Ralph loop:\n\n```!\n\"${CLAUDE_PLUGIN_ROOT}/scripts/setup-ralph-loop.sh\" $ARGUMENTS\n```\n\nPlease work on the task. When you try to exit, the Ralph loop will feed the SAME PROMPT back to you for the next iteration. You'll see your previous work in files and git history, allowing you to iterate and improve.\n\nCRITICAL RULE: If a completion promise is set, you may ONLY output it when the statement is completely and unequivocally TRUE. Do not output false promises to escape the loop, even if you think you're stuck or should exit for other reasons. The loop is designed to continue until genuine completion."
              }
            ],
            "skills": []
          },
          {
            "name": "security-guidance",
            "description": "Security reminder hook that warns about potential security issues when editing files, including command injection, XSS, and unsafe code patterns",
            "source": "./plugins/security-guidance",
            "category": "security",
            "version": "1.0.0",
            "author": {
              "name": "David Dworken",
              "email": "dworken@anthropic.com"
            },
            "install_commands": [
              "/plugin marketplace add anthropics/claude-code",
              "/plugin install security-guidance@claude-code-plugins"
            ],
            "signals": {
              "stars": 55310,
              "forks": 4002,
              "pushed_at": "2026-01-11T00:28:28Z",
              "created_at": "2025-02-22T17:41:21Z",
              "license": null
            },
            "commands": [],
            "skills": []
          }
        ]
      }
    }
  ]
}