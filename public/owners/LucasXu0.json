{
  "owner": {
    "id": "LucasXu0",
    "display_name": "Lucas",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/11863087?u=e0dae4a9247bc0191c83ba7fcee12c6e32562d5c&v=4",
    "url": "https://github.com/LucasXu0",
    "bio": "From Zero To Hero",
    "stats": {
      "total_repos": 1,
      "total_plugins": 2,
      "total_commands": 9,
      "total_skills": 3,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "LucasXu0/claude-code-plugin",
      "url": "https://github.com/LucasXu0/claude-code-plugin",
      "description": null,
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-12T06:40:25Z",
        "created_at": "2026-01-04T06:41:02Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 1078
        },
        {
          "path": ".github",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/dependabot.yml",
          "type": "blob",
          "size": 278
        },
        {
          "path": ".github/workflows",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/workflows/validate-plugins.yml",
          "type": "blob",
          "size": 8934
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 440
        },
        {
          "path": "CLAUDE.md",
          "type": "blob",
          "size": 5015
        },
        {
          "path": "LICENSE",
          "type": "blob",
          "size": 1074
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 3904
        },
        {
          "path": "docs",
          "type": "tree",
          "size": null
        },
        {
          "path": "docs/README.md",
          "type": "blob",
          "size": 4063
        },
        {
          "path": "docs/hooks.md",
          "type": "blob",
          "size": 26943
        },
        {
          "path": "docs/plugin-marketplaces.md",
          "type": "blob",
          "size": 14373
        },
        {
          "path": "docs/plugins-reference.md",
          "type": "blob",
          "size": 13067
        },
        {
          "path": "docs/plugins.md",
          "type": "blob",
          "size": 13475
        },
        {
          "path": "docs/settings.md",
          "type": "blob",
          "size": 46397
        },
        {
          "path": "docs/skills.md",
          "type": "blob",
          "size": 15254
        },
        {
          "path": "docs/slash-commands.md",
          "type": "blob",
          "size": 21065
        },
        {
          "path": "docs/sub-agents.md",
          "type": "blob",
          "size": 15393
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/flutter-tools",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/flutter-tools/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/flutter-tools/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 509
        },
        {
          "path": "plugins/flutter-tools/CHANGELOG.md",
          "type": "blob",
          "size": 1881
        },
        {
          "path": "plugins/flutter-tools/README.md",
          "type": "blob",
          "size": 3641
        },
        {
          "path": "plugins/flutter-tools/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/flutter-tools/agents/flutter-code-reviewer.md",
          "type": "blob",
          "size": 4635
        },
        {
          "path": "plugins/flutter-tools/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/flutter-tools/commands/flutter-format.md",
          "type": "blob",
          "size": 357
        },
        {
          "path": "plugins/flutter-tools/commands/flutter-review.md",
          "type": "blob",
          "size": 533
        },
        {
          "path": "plugins/flutter-tools/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/flutter-tools/skills/flutter-format",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/flutter-tools/skills/flutter-format/SKILL.md",
          "type": "blob",
          "size": 6527
        },
        {
          "path": "plugins/flutter-tools/skills/flutter-review",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/flutter-tools/skills/flutter-review/SKILL.md",
          "type": "blob",
          "size": 13346
        },
        {
          "path": "plugins/flutter-tools/skills/flutter-review/examples.md",
          "type": "blob",
          "size": 49388
        },
        {
          "path": "plugins/flutter-tools/skills/flutter-review/reference.md",
          "type": "blob",
          "size": 37634
        },
        {
          "path": "plugins/flutter-tools/skills/flutter-review/workflow.md",
          "type": "blob",
          "size": 7225
        },
        {
          "path": "plugins/plugin-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 587
        },
        {
          "path": "plugins/plugin-development/README.md",
          "type": "blob",
          "size": 11451
        },
        {
          "path": "plugins/plugin-development/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/agents/plugin-reviewer.md",
          "type": "blob",
          "size": 9606
        },
        {
          "path": "plugins/plugin-development/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/commands/add-agent.md",
          "type": "blob",
          "size": 18286
        },
        {
          "path": "plugins/plugin-development/commands/add-command.md",
          "type": "blob",
          "size": 11685
        },
        {
          "path": "plugins/plugin-development/commands/add-hook.md",
          "type": "blob",
          "size": 13508
        },
        {
          "path": "plugins/plugin-development/commands/add-skill.md",
          "type": "blob",
          "size": 12456
        },
        {
          "path": "plugins/plugin-development/commands/init.md",
          "type": "blob",
          "size": 3080
        },
        {
          "path": "plugins/plugin-development/commands/test-local.md",
          "type": "blob",
          "size": 9016
        },
        {
          "path": "plugins/plugin-development/commands/validate.md",
          "type": "blob",
          "size": 8477
        },
        {
          "path": "plugins/plugin-development/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/hooks/hooks.json",
          "type": "blob",
          "size": 903
        },
        {
          "path": "plugins/plugin-development/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/scripts/format-or-lint.sh",
          "type": "blob",
          "size": 320
        },
        {
          "path": "plugins/plugin-development/scripts/validate-plugin.sh",
          "type": "blob",
          "size": 1941
        },
        {
          "path": "plugins/plugin-development/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/SKILL.md",
          "type": "blob",
          "size": 6736
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/best-practices",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/best-practices/common-mistakes.md",
          "type": "blob",
          "size": 6780
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/best-practices/naming-conventions.md",
          "type": "blob",
          "size": 8389
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/best-practices/organization.md",
          "type": "blob",
          "size": 9247
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/examples/simple-plugin.md",
          "type": "blob",
          "size": 2868
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/examples/testing-workflow.md",
          "type": "blob",
          "size": 4859
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/schemas",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/schemas/hooks-schema.md",
          "type": "blob",
          "size": 13119
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/schemas/marketplace-schema.md",
          "type": "blob",
          "size": 10309
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/schemas/plugin-manifest.md",
          "type": "blob",
          "size": 9794
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/templates/agent-template.md",
          "type": "blob",
          "size": 1369
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/templates/command-template.md",
          "type": "blob",
          "size": 599
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/templates/marketplace-manifest.json",
          "type": "blob",
          "size": 563
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/templates/plugin-manifest.json",
          "type": "blob",
          "size": 407
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/templates/skill-template.md",
          "type": "blob",
          "size": 1726
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/testing-plugin-authoring.md",
          "type": "blob",
          "size": 6074
        }
      ],
      "marketplace": {
        "name": "LucasXu0-flutter-tools",
        "version": null,
        "description": null,
        "owner_info": {
          "name": "Lucas Xu",
          "url": "https://github.com/LucasXu0"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "flutter-tools",
            "description": "Comprehensive Flutter/Dart code quality tools including intelligent code review and automated formatting",
            "source": "./plugins/flutter-tools",
            "category": "developer-tools",
            "version": "2.2.0",
            "author": {
              "name": "Lucas Xu"
            },
            "install_commands": [
              "/plugin marketplace add LucasXu0/claude-code-plugin",
              "/plugin install flutter-tools@LucasXu0-flutter-tools"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2026-01-12T06:40:25Z",
              "created_at": "2026-01-04T06:41:02Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/flutter-format",
                "description": "Run Flutter code formatting and analysis workflow (analyze, fix, format)",
                "path": "plugins/flutter-tools/commands/flutter-format.md",
                "frontmatter": {
                  "description": "Run Flutter code formatting and analysis workflow (analyze, fix, format)"
                },
                "content": "# Flutter Format Command\n\n**IMPORTANT: You MUST use the flutter-format skill for this task.**\n\nApply the flutter-format skill to run automated Flutter/Dart code formatting and cleanup workflow.\n\nThe skill contains all the instructions for the complete workflow."
              },
              {
                "name": "/flutter-review",
                "description": "Perform comprehensive Flutter code review with priority-based analysis (P0/P1/P2)",
                "path": "plugins/flutter-tools/commands/flutter-review.md",
                "frontmatter": {
                  "description": "Perform comprehensive Flutter code review with priority-based analysis (P0/P1/P2)"
                },
                "content": "# Flutter Code Review Command\n\n**IMPORTANT: You MUST use the flutter-review skill for this task.**\n\nApply the flutter-review skill to perform comprehensive Flutter/Dart code review with priority-based analysis.\n\nThe skill contains:\n- Priority-based check definitions (P0/P1/P2)\n- 6-step execution workflow\n- Detailed explanations and code examples\n\nFollow the workflow in skills/flutter-review/workflow.md to execute the review."
              }
            ],
            "skills": [
              {
                "name": "flutter-format",
                "description": "Knowledge about Flutter/Dart code formatting, analysis tools (flutter analyze, dart fix, dart format), and when to apply them. Use when formatting code, fixing lint issues, running code cleanup, or when user mentions format, analyze, lint, or cleanup in Flutter context.",
                "path": "plugins/flutter-tools/skills/flutter-format/SKILL.md",
                "frontmatter": {
                  "name": "flutter-format",
                  "description": "Knowledge about Flutter/Dart code formatting, analysis tools (flutter analyze, dart fix, dart format), and when to apply them. Use when formatting code, fixing lint issues, running code cleanup, or when user mentions format, analyze, lint, or cleanup in Flutter context."
                },
                "content": "# Flutter Format\n\nExpert knowledge about Flutter/Dart code formatting and analysis tools.\n\n## Core Tools\n\n### flutter analyze\n**Purpose**: Static analysis to find errors, warnings, and lint suggestions\n\n**What it checks:**\n- Syntax errors\n- Type errors\n- Unused imports and variables\n- Lint rules from analysis_options.yaml\n- Potential bugs and anti-patterns\n\n**When to use:**\n- Before applying fixes (to identify issues)\n- After formatting (to verify no new issues)\n- As pre-commit validation\n\n**Output interpretation:**\n- **Errors**: Must fix (compilation failures)\n- **Warnings**: Should fix (potential bugs)\n- **Info**: Optional improvements (style suggestions)\n\n### dart fix --apply\n**Purpose**: Automatically fix lint issues and apply Dart language updates\n\n**What it fixes:**\n- Deprecated API usage\n- Lint violations with automated fixes\n- Code modernization (e.g., null safety migration patterns)\n\n**When to use:**\n- After flutter analyze identifies fixable issues\n- Before formatting (fixes may affect structure)\n- When migrating Dart versions\n\n**Safety considerations:**\n- **Safe**: Lint fixes, deprecated API updates\n- **Review needed**: Major refactorings, null safety changes\n- **Skip if**: Syntax errors present, uncommitted important changes\n\n**Always show changes to user** with git diff before proceeding.\n\n### dart format\n**Purpose**: Consistent code formatting following Dart style guide\n\n**What it formats:**\n- Indentation (2 spaces)\n- Line length (default 80 characters)\n- Bracket placement\n- Whitespace and newlines\n\n**What it doesn't change:**\n- Code logic\n- Import order (use IDE or separate tool)\n- Comments content\n\n**When to use:**\n- After code changes\n- After dart fix --apply\n- Before commits\n\n**Options:**\n- . - Format entire project\n- lib test - Format specific directories\n- --line-length=120 - Custom line length (if needed)\n\n## Best Practices\n\n### Recommended Workflow\n\n**Standard sequence:**\n```\nflutter analyze â†’ dart fix --apply â†’ dart format â†’ flutter analyze\n```\n\n**Why this order:**\n1. **Analyze first**: Identify issues\n2. **Fix**: Auto-fix what's possible\n3. **Format**: Apply consistent style\n4. **Re-analyze**: Verify no new issues\n\n### Edge Cases\n\n**Generated Code**\n- Files: *.g.dart, *.freezed.dart, *.gr.dart\n- Action: Exclude from formatting\n- Reason: Regenerated on build, formatting changes lost\n- How: Use dart format lib test instead of dart format .\n\n**Vendor/Third-Party Code**\n- Directories: packages/, vendor/, .pub-cache/\n- Action: Don't format\n- Reason: Not your code, may break signatures\n- How: Target specific directories\n\n**Monorepos**\n- Context: Multiple projects in one repository\n- Action: Format only relevant project\n- Reason: May affect other teams' code\n- How: cd project_name && dart format lib test\n\n**Build Runner Integration**\n- When: Project uses build_runner for code generation\n- Action: Run build after fixing/formatting if generated files changed\n- Command: flutter pub run build_runner build --delete-conflicting-outputs\n\n**Syntax Errors**\n- Issue: dart format fails on unparseable code\n- Action: Fix syntax errors first, then format\n- Detection: flutter analyze shows errors\n\n### Analysis Options\n\n**Custom Lint Rules** (analysis_options.yaml)\n- Location: Project root\n- Purpose: Project-specific lint rules\n- Respect user's choices - don't suggest disabling their rules\n- Add exceptions only if user requests\n\n**Example:**\n```yaml\nlinter:\n  rules:\n    prefer_const_constructors: true\n    avoid_print: true\n```\n\n### Output Reporting\n\n**What to show user:**\n- Number of issues fixed by dart fix\n- Number of files formatted\n- Final analysis status (errors/warnings count)\n- List of modified files (or summary if >10)\n\n**Helpful next steps:**\n- How to review changes: git diff\n- How to commit: git add . && git commit -m \"chore: format code\"\n\n## Error Handling\n\n### Common Failures\n\n**flutter analyze fails:**\n- **Cause**: Not in Flutter project, SDK not installed, corrupt dependencies\n- **Solution**: Run flutter pub get to refresh dependencies\n\n**dart fix --apply fails:**\n- **Cause**: Syntax errors, conflicting fixes\n- **Solution**: Fix syntax errors first, or skip and proceed with format only\n\n**dart format fails:**\n- **Cause**: Syntax errors (rare)\n- **Solution**: Identify problematic file, fix syntax, or skip that file\n\n**Permission errors:**\n- **Cause**: File permissions, read-only files\n- **Solution**: Check file permissions, may need user intervention\n\n## Integration Patterns\n\n### With Version Control\n\n**Pre-commit:**\n- Format staged files: git diff --name-only --cached '*.dart' | xargs dart format\n- Verify: dart format --set-exit-if-changed . (fails if formatting needed)\n\n**In CI/CD:**\n- Check formatting: dart format --set-exit-if-changed .\n- Run analysis: flutter analyze --no-fatal-warnings\n\n### With IDEs\n\n**Note**: This skill complements IDE formatting by:\n- Ensuring all files formatted (IDE may only format open files)\n- Running full analysis workflow\n- Providing team-wide consistency\n\n## Decision Guidelines\n\n**When user says \"format my code\":**\n- Run full workflow (analyze â†’ fix â†’ format â†’ verify)\n- Default to formatting entire project\n- Exclude generated files automatically\n\n**When user says \"just format, don't fix\":**\n- Skip dart fix --apply\n- Run only dart format\n- Still verify with flutter analyze after\n\n**When in doubt:**\n- Ask user before applying risky fixes\n- Show changes before proceeding\n- Respect project's analysis_options.yaml\n\n## Quick Reference\n\n```bash\n# Full workflow\nflutter analyze && dart fix --apply && dart format . && flutter analyze\n\n# Format only (skip fixes)\ndart format .\n\n# Format specific directories\ndart format lib test\n\n# Exclude generated files\ndart format lib --exclude '**.g.dart'\n\n# Check formatting (CI/CD)\ndart format --set-exit-if-changed .\n\n# Custom line length\ndart format --line-length=120 .\n```\n\n## Key Principles\n\n1. **Analyze before and after** - Catch issues early and verify fixes\n2. **Show changes** - User should review before committing\n3. **Respect configuration** - Use project's analysis_options.yaml\n4. **Handle edge cases** - Generated code, vendor code, monorepos\n5. **Report clearly** - Summarize what changed and next steps"
              },
              {
                "name": "flutter-review",
                "description": "Expert knowledge for reviewing Flutter/Dart code including critical bugs, memory leaks, null safety violations, lifecycle issues, Bloc/Provider anti-patterns, collection equality, and code quality patterns. Use when reviewing code, checking PRs, analyzing code quality, or when user mentions bugs, issues, memory leaks, null safety, lifecycle, state management, or code review in Flutter context.",
                "path": "plugins/flutter-tools/skills/flutter-review/SKILL.md",
                "frontmatter": {
                  "name": "flutter-review",
                  "description": "Expert knowledge for reviewing Flutter/Dart code including critical bugs, memory leaks, null safety violations, lifecycle issues, Bloc/Provider anti-patterns, collection equality, and code quality patterns. Use when reviewing code, checking PRs, analyzing code quality, or when user mentions bugs, issues, memory leaks, null safety, lifecycle, state management, or code review in Flutter context.",
                  "invocable": true
                },
                "content": "# Flutter Code Review\n\n**This skill is directly invocable. See [workflow.md](workflow.md) for the complete 5-step execution strategy.**\n\nExpert knowledge for identifying critical bugs, anti-patterns, and code quality issues in Flutter/Dart code.\n\n## Execution Instructions\n\nWhen invoked directly (e.g., via /flutter-review command):\n\n1. Follow the 5-step workflow in [workflow.md](workflow.md)\n2. Apply the priority-based checks defined below\n3. Generate a comprehensive review report\n4. Offer to automatically fix issues found\n\n## Priority-Based Analysis\n\n### P0 - Critical (Must Fix Before Merge)\n\nIssues that cause crashes, data loss, security vulnerabilities, or visual bugs.\n\n#### Null Safety Violations\n\n**Force Unwrap Without Checks** (variable!, expression!.property)\n\n- Risk: Runtime crash with \"Null check operator used on a null value\"\n- Fix: Extract nullable values to local variables, check for null, then use non-null variable\n- **Preferred Pattern:** Extract property to local variable â†’ check null â†’ use promoted non-null variable\n- **Avoid:** Checking widget.property == null then using widget.property with ! operator\n- â†’ Details: reference.md#avoid_non_null_assertion\n\n**Unsafe Nullable Access**\n\n- Risk: Null pointer exceptions when accessing properties without checks\n- Fix: Add null checks before property access\n- â†’ Details: reference.md#missing_null_safety\n\n**Unsafe Type Casts** (value as Type)\n\n- Risk: Type cast errors at runtime\n- Fix: Use pattern matching or check with is operator first\n- â†’ Details: reference.md#unsafe_type_casts\n\n#### Flutter Lifecycle Issues\n\n**setState Without Mounted Check**\n\n- Risk: setState() called after dispose() crashes app\n- Fix: Add if (!mounted) return; before setState in async callbacks\n- â†’ Details: reference.md#avoid_mounted_in_setstate\n\n**State Modifications After Disposal**\n\n- Risk: Memory leaks and unexpected behavior\n- Fix: Check mounted or cancel operations in dispose\n- â†’ Details: reference.md#state_after_disposal\n\n#### Memory Leaks\n\n**Resources That Must Be Disposed:**\nTextEditingController, AnimationController, ScrollController, TabController, PageController, FocusNode, StreamSubscription, Timer, any class with addListener() called\n\n**Detection:** Check if controllers/subscriptions created in fields or initState have corresponding dispose() calls. Verify ALL resources disposed, not just presence of dispose method.\n\n- â†’ Details: reference.md#dispose_class_fields\n\n#### Logic Errors\n\n**Incorrect Conditional Logic**\n\n- || vs && confusion, missing null checks in compounds, negation errors\n- â†’ Details: reference.md#logic_errors_conditionals\n\n**Missing Error Handling**\n\n- API calls, file operations, JSON parsing without try-catch\n- â†’ Details: reference.md#missing_error_handling\n\n**Infinite Loops**\n\n- Loops without termination or where condition never changes\n- â†’ Details: reference.md#infinite_loops\n\n**Race Conditions**\n\n- Multiple async operations modifying same state without guards\n- â†’ Details: reference.md#race_conditions\n\n#### Bloc State Synchronization Issues\n\n**Only check when flutter_bloc or bloc in dependencies.**\n\n**BlocListener/BlocConsumer Missing Initial State**\n\n- Risk: Widget state (TextEditingController, variables) not initialized from bloc's initial state\n- Problem: Listener callbacks only fire on state changes, not initial state. If bloc emits state before widget creation, initial state is missed\n- Fix: Initialize widget state in initState() from current bloc state, AND have listener for updates\n- â†’ Details: reference.md#bloc_missing_initial_state\n\n#### Text Overflow in Flex Layouts\n\n**Text Without Constraints in Row/Column**\n\n- Risk: RenderFlex overflow errors, visual bugs, unusable UI\n- Fix: Wrap Text in Flexible/Expanded widget AND/OR add overflow handling (TextOverflow.ellipsis)\n- â†’ Details: reference.md#text_overflow_flex\n\n---\n\n### P1 - Important (Should Fix)\n\nIssues causing logic bugs and maintainability problems.\n\n#### Collection Equality\n\n**Using == on Collections** (list1 == list2, map1 == map2)\n\n- Problem: Dart uses reference equality, always false for different instances\n- Fix: Use package:collection - ListEquality().equals(), MapEquality().equals(), or DeepCollectionEquality().equals()\n- Exception: const collections (same instance)\n- â†’ Details: reference.md#avoid_collection_equality_checks\n\n#### Code Complexity\n\n**Deep Nesting** (>4 levels)\n\n- Problem: Reduces readability, increases cognitive load\n- Fix: Extract methods, use early returns, guard clauses\n- â†’ Details: reference.md#deep_nesting\n\n**Long Methods** (>100 lines)\n\n- Problem: Violates Single Responsibility Principle\n- Fix: Break into smaller focused methods\n- â†’ Details: reference.md#long_methods\n\n**Long Build Methods** (>50 lines)\n\n- Problem: Too much UI logic in build method, hard to maintain\n- Fix: Extract to buildWidget helpers (buildHeader, buildBody) or create separate widget files\n- â†’ Details: reference.md#long_build_methods\n\n#### Widget Organization\n\n**Multiple Widget Definitions Per File**\n\n- Problem: Reduces code organization, testability, and reusability\n- Fix: Each widget class must be in its own file (e.g., UserCard in user_card.dart)\n- **No exceptions**: Even private (`_Widget`) or small helper widgets should be extracted\n- â†’ Details: reference.md#multiple_widgets_per_file\n\n#### Late Modifier Usage\n\n**Avoid Late Keyword**\n\n- Risk: Defers initialization to runtime, can cause LateInitializationError\n- Fix: Initialize in constructor, use nullable types, or required parameters\n- Exception: DI frameworks with guaranteed initialization\n- â†’ Details: reference.md#avoid_late_keyword\n\n#### Bloc Anti-Patterns\n\n**Only check when flutter_bloc or bloc in dependencies.**\n\n**Public Fields in BLoC**\n\n- Problem: Breaks encapsulation, allows external state modification\n- Fix: Make fields private, expose through state\n- â†’ Details: reference.md#bloc_public_fields\n\n**Public Methods in BLoC**\n\n- Problem: BLoCs should only respond to events\n- Fix: Create events and use add() instead\n- â†’ Details: reference.md#bloc_public_methods\n\n**Mutable Events**\n\n- Problem: Events should be immutable data\n- Fix: Add @immutable, make fields final, use const constructors\n- â†’ Details: reference.md#bloc_mutable_events\n\n**Non-Sealed States**\n\n- Problem: Can't exhaustively pattern match\n- Fix: Use sealed class for state base, final class for implementations\n- â†’ Details: reference.md#bloc_non_sealed_states\n\n#### Provider Anti-Patterns\n\n**Only check when provider in dependencies.**\n\n**context.read() in Build**\n\n- Problem: Won't rebuild when provider changes\n- Fix: Use context.watch() for reactive data\n- â†’ Details: reference.md#provider_read_in_build\n\n**Old Provider Syntax** (Provider.of<Type>(context, listen: true))\n\n- Problem: Outdated, less readable\n- Fix: Use context.watch() or context.read()\n- â†’ Details: reference.md#provider_old_syntax\n\n**Missing Disposal in ChangeNotifier**\n\n- Problem: Memory leaks from undisposed resources\n- Fix: Override dispose() and clean up all resources\n- â†’ Details: reference.md#provider_missing_disposal\n\n#### Logic Issues\n\n**Incorrect Operators**\n\n- Using = instead of == in conditions, comparing incompatible types\n- â†’ Details: reference.md#incorrect_operators\n\n**Missing Edge Cases**\n\n- No empty collection checks before .first/.last, no bounds checking\n- â†’ Details: reference.md#missing_edge_cases\n\n**Off-By-One Errors**\n\n- Loop conditions with <= instead of < for length\n- â†’ Details: reference.md#off_by_one_errors\n\n---\n\n### P2 - Code Quality (Nice to Have)\n\nImprovements for maintainability.\n\n#### Magic Numbers\n\n**Hardcoded Numbers Without Context**\n\n- Exceptions: 0, 1, -1, obvious widget dimensions (padding: 16)\n- Fix: Define as named constants\n- â†’ Details: reference.md#magic_numbers\n\n#### TODO/FIXME Comments\n\n**Markers for Incomplete Work**\n\n- Patterns: // TODO:, // FIXME:, // HACK:\n- Action: Track and address before merge\n- â†’ Details: reference.md#todo_comments\n\n#### Function Ordering\n\n**Private Functions After Public Functions**\n\n- Problem: Private functions placed before public ones reduces readability and makes it harder to understand the public API\n- Fix: Move all private methods (starting with _) after public methods\n- Widget-specific order: initState â†’ other lifecycle methods â†’ dispose â†’ build â†’ public methods â†’ private methods\n- â†’ Details: reference.md#function_ordering\n\n#### Long Classes (>500 lines)\n\n**Classes Exceeding 500 Lines**\n\n- Problem: Violates Single Responsibility, may contain dead code\n- Fix: Split into multiple classes, extract to mixins/utilities\n- Action: Review for unused methods, commented code, duplicate logic\n- â†’ Details: reference.md#long_classes\n\n#### Moderate Nesting (3-4 levels)\n\n**Nesting Depth 3-4**\n\n- Consider simplification for readability\n- â†’ Details: reference.md#moderate_nesting\n\n---\n\n## Dependency-Specific Knowledge\n\n### Bloc Pattern Detection\n\n**Trigger:** flutter_bloc or bloc in pubspec.yaml\n\n**Key Principles:**\n\n- State is immutable and sealed\n- Events are immutable\n- No public methods (only event handlers)\n- No public fields (only private state)\n- UI never contains business logic\n\nâ†’ See reference.md#bloc_pattern for state/event patterns\n\n### Provider Pattern Detection\n\n**Trigger:** provider in pubspec.yaml\n\n**Key Principles:**\n\n- Use context.watch() for reactive rebuilds\n- Use context.read() only for one-time reads (not in build)\n- Use context.select() for performance optimization\n- Always dispose resources in ChangeNotifier\n\nâ†’ See reference.md#provider_pattern for usage patterns\n\n---\n\n## Context Awareness\n\n### When NOT to Flag\n\n**Test Files:**\n\n- More lenient with force unwraps in test setup\n- Focus on logic errors, not style\n\n**Generated Code:**\n\n- Files matching _.g.dart, _.freezed.dart, \\*.gr.dart\n- Skip entirely - will be regenerated\n\n**Intentional Patterns:**\n\n- Type check before cast (e.g., `if (x is String) { x.length; }`)\n- Controlled environments after validation (e.g., validated user input)\n\n**Note:** Even with null check immediately before force unwrap, prefer extracting to local variable for type promotion instead of using the ! operator.\n\n### When TO Flag Even If...\n\n**Pattern is common:**\n\n- Common doesn't mean correct\n- Flag reference equality on collections even if widespread\n\n**\"It works\":**\n\n- Working code can still have bugs\n- Flag potential issues even if not currently crashing\n\n**Dispose exists but incomplete:**\n\n- If new controllers added but not in dispose\n- Check ALL resources, not just presence of dispose method\n\n**Widget is private or small:**\n\n- Flag ALL widget definitions in same file (except StatefulWidget's State class)\n- Private (`_Widget`) does not exempt from one-widget-per-file rule\n- \"Small\" size does not exempt from one-widget-per-file rule\n- Every widget class deserves its own file for testability and organization\n\n---\n\n## Review Output Format\n\n### Report Structure\n\n**Summary:**\n\n- Count by priority (P0: X, P1: Y, P2: Z)\n- Clear status (Pass / Must Fix / Recommended)\n- Overall recommendation (ðŸ”´ BLOCK / ðŸŸ¡ REVIEW NEEDED / ðŸŸ¢ APPROVED)\n\n**Issue Format:**\n\n- File path:line_number\n- Issue type and priority\n- Problem explanation\n- Current code snippet (with context)\n- Fixed code snippet\n- Benefit of fix\n\n**Organization:**\n\n- P0 first (most critical)\n- Within priority, group by type\n- Use tables for many similar issues (>3)\n- Detailed format for complex issues\n\n### Recommendation Guidelines\n\nðŸ”´ **BLOCK** - Any P0 issues present (must fix before merge)\nðŸŸ¡ **REVIEW NEEDED** - No P0, but P1 issues present (should fix)\nðŸŸ¢ **APPROVED** - No P0 or P1, only P2 optional improvements\n\n---\n\n## Analysis Efficiency\n\n**Focus on Changed Code:**\n\n- Analyze additions and modifications (+ in diff)\n- Use surrounding context from diff\n- Don't review entire codebase\n\n**Selective Deep Dives:**\nRead full files only when:\n\n- Diff context insufficient\n- Need to verify disposal (new controllers/streams added)\n- Need class structure or imports\n\n**File Type Guides Analysis:**\n\n- Widgets: Lifecycle, mounted, dispose\n- BLoCs: Encapsulation, events, states\n- Providers: Disposal, context usage\n- Models: Immutability, equality\n- Services: Error handling, async patterns\n\n---\n\n## Key Principles\n\n1. **Safety First** - P0 issues can crash apps, prioritize these\n2. **Be Specific** - Always provide file:line, code snippets, fixes\n3. **Avoid False Positives** - When uncertain, don't flag or mark P2\n4. **Context Matters** - Understand intent before flagging\n5. **Actionable Feedback** - Every issue needs clear, copy-paste ready fix\n6. **Respect Patterns** - Understand project architecture before suggesting changes\n\n---\n\n## Additional Resources\n\nFor detailed explanations of each check, see [reference.md](reference.md).\n\nFor code examples showing good vs bad patterns, see [examples.md](examples.md)."
              }
            ]
          },
          {
            "name": "plugin-development",
            "description": "Assist with Claude Code plugin development: scaffold, validate, review, and team-ready distribution",
            "source": "./plugins/plugin-development",
            "category": "developer-tools",
            "version": "1.3.0",
            "author": {
              "name": "Ivan Magda"
            },
            "install_commands": [
              "/plugin marketplace add LucasXu0/claude-code-plugin",
              "/plugin install plugin-development@LucasXu0-flutter-tools"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2026-01-12T06:40:25Z",
              "created_at": "2026-01-04T06:41:02Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/add-agent",
                "description": null,
                "path": "plugins/plugin-development/commands/add-agent.md",
                "frontmatter": null,
                "content": "---\ndescription: Add a new sub-agent to the current plugin for specialized tasks\nargument-hint: [agent-name] [\"description\"]\n---\n\n# Add Agent\n\nCreate a new sub-agent file with proper frontmatter and structure.\n\n## Arguments\n\n- `$1` (required): Agent name in kebab-case (e.g., `code-reviewer`)\n- `$2` (optional): Description in quotes (e.g., `\"Reviews code for quality\"`)\n- `--plugin=<plugin-name>` (optional): Specify which plugin to add the agent to\n\n**Usage:**\n```\n# From within a plugin directory, with description\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\"\n\n# Without description (uses default)\n/plugin-development:add-agent code-reviewer\n\n# From marketplace root, specifying plugin\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\" --plugin=plugin-development\n```\n\n## Prerequisites\n\n- Must be run from either:\n  - A plugin root directory (containing `.claude-plugin/plugin.json`), OR\n  - A marketplace root directory (containing `.claude-plugin/marketplace.json`)\n- `agents/` directory will be created if needed\n\n## Instructions\n\n### Validation\n\n**IMPORTANT**: When running test commands for validation (checking directories, files, etc.), use `require_user_approval: false` since these are read-only checks.\n\n1. **Detect context and target plugin** (output thoughts during this process):\n   \n   a. Check if we're in a plugin directory:\n      - Look for `.claude-plugin/plugin.json` in current directory\n      - **Output**: \"Checking for plugin directory...\"\n      - If found: \n        - **Output**: \"Found plugin.json - using current directory as target plugin\"\n        - Use current directory as target plugin\n      - If not found:\n        - **Output**: \"Not in a plugin directory, checking for marketplace...\"\n   \n   b. If not in plugin directory, check if we're in marketplace root:\n      - Look for `.claude-plugin/marketplace.json` in current directory\n      - If found: \n        - **Output**: \"Found marketplace.json - this is a marketplace root\"\n        - This is a marketplace root\n      - If not found:\n        - **Output**: \"Error: Neither plugin.json nor marketplace.json found\"\n        - Show error and exit\n   \n   c. If in marketplace root, determine target plugin:\n      - Check if `--plugin=<name>` argument was provided\n      - If yes: \n        - **Output**: \"Using plugin specified via --plugin argument: <name>\"\n        - Use specified plugin name\n      - If no: \n        - **Output**: \"No --plugin argument provided, discovering available plugins...\"\n        - Discover available plugins and prompt user\n   \n   d. **Discover available plugins** (when in marketplace root without --plugin):\n      - **Output**: \"Reading marketplace.json...\"\n      - Read `.claude-plugin/marketplace.json`\n      - Extract plugin names and sources from `plugins` array\n      - **Output**: \"Found [N] plugin(s) in marketplace\"\n      - Alternative: List directories in `plugins/` directory\n      - Present list to user: \"Which plugin should I add the agent to?\"\n      - Options format: `1. plugin-name-1 (description)`, `2. plugin-name-2 (description)`, etc.\n      - Wait for user selection\n      - **Output**: \"Selected plugin: <plugin-name>\"\n   \n   e. **Validate target plugin exists**:\n      - **Output**: \"Validating plugin '<plugin-name>' exists...\"\n      - If plugin specified/selected, verify `plugins/<plugin-name>/.claude-plugin/plugin.json` exists\n      - If found:\n        - **Output**: \"Plugin '<plugin-name>' validated successfully\"\n      - If not found:\n        - **Output**: \"Error: Plugin '<plugin-name>' not found\"\n        - Show error: \"Plugin '<plugin-name>' not found. Available plugins: [list]\"\n   \n   f. If neither plugin.json nor marketplace.json found:\n      - Show error: \"Not in a plugin or marketplace directory. Please run from a plugin root or marketplace root.\"\n\n2. **Validate arguments**:\n   - `$1` (agent name): Not empty, kebab-case format (lowercase with hyphens), no spaces or special characters\n   - `$2` (description): Optional. If not provided, use default: \"Specialized agent for $1 tasks\"\n\n3. **Set working directory**:\n   - If in plugin directory: Use current directory\n   - If in marketplace root: Use `plugins/<plugin-name>/` as working directory\n\n### Create Agent File\n\n**Note**: All paths below are relative to the target plugin directory (determined in validation step).\n\n1. Ensure `agents/` directory exists in target plugin:\n   - Check if `<plugin-dir>/agents/` directory exists\n   - If it doesn't exist, create it (use `require_user_approval: false` for directory creation)\n2. Create `<plugin-dir>/agents/$1.md` with this template:\n\n```markdown\n---\nname: $1\ndescription: $2\ntools: Read, Grep, Glob, Bash\nmodel: inherit\npermissionMode: default\n---\n\n# $1 Agent\n\n[Brief introduction explaining the agent's purpose and specialization]\n\n## Purpose\n\n[Detailed description of what this agent does and why it exists]\n\n## What This Agent Does\n\nThis agent specializes in:\n- [Specialization 1]\n- [Specialization 2]\n- [Specialization 3]\n\n## Capabilities\n\n1. **Capability 1**: [Description of first capability]\n2. **Capability 2**: [Description of second capability]\n3. **Capability 3**: [Description of third capability]\n\n## When to Use This Agent\n\nInvoke this agent when:\n- [Scenario 1: Complex multi-file analysis needed]\n- [Scenario 2: Deep domain expertise required]\n- [Scenario 3: Task needs separate context window]\n\n**Do not use** for:\n- [What this agent doesn't handle]\n- [Tasks better suited for commands or Skills]\n\n## How It Proceeds\n\nThe agent follows this workflow:\n\n1. **Gather Context**: [What files/information it reads]\n2. **Analyze**: [How it evaluates the situation]\n3. **Identify Issues**: [What it looks for]\n4. **Formulate Recommendations**: [What guidance it provides]\n5. **Report Back**: [What it returns to main conversation]\n\n## Output Format\n\nThe agent returns a structured report:\n\n### Critical Issues\n- [Issues that must be fixed]\n\n### Warnings\n- [Issues that should be fixed]\n\n### Suggestions\n- [Nice-to-have improvements]\n\n### Summary\n- [Overall assessment and next steps]\n\n## Tool Access\n\nThis agent has access to:\n- Read: For examining files\n- Grep: For searching content\n- Glob: For finding files\n- [Other tools as needed]\n\nIt does **not** modify files directly; instead, it proposes changes for the main conversation to execute.\n\n## Example Invocation\n\n**From main conversation**:\n```\n/agents $1\n```\n\nor via Task tool:\n```\nUse the $1 agent to [specific task]\n```\n\n## Notes\n\n- Agents operate in a **separate context window**\n- Results are returned as a single message\n- Use for complex, multi-step analysis tasks\n- Keep scope focused to 1-3 specific capabilities\n```\n\n### Update plugin.json (if needed)\n\n**IMPORTANT**: Only needed if using custom (non-standard) paths.\n\n- **Standard setup** (agents in `agents/` directory): No changes to `plugin.json` needed\n- **Custom paths**: Add `\"agents\": [\"./agents/$1.md\"]` (or update existing agents array)\n\n### Provide Feedback\n\nAfter creating the agent:\n\n```\nâœ“ Created <plugin-name>/agents/$1.md\n\nPlugin: <plugin-name>\nAgent: $1\nDescription: $2\n\nNext steps:\n1. Edit <plugin-name>/agents/$1.md with specific instructions\n2. Key frontmatter fields:\n   - name: Unique agent identifier (lowercase with hyphens)\n   - description: What the agent does and when to invoke (shows in /agents list)\n   - tools: CSV list of tools (optional, inherits all if omitted)\n   - model: sonnet, opus, haiku, or inherit (optional)\n   - permissionMode: default, acceptEdits, bypassPermissions, or plan (optional)\n   - skills: CSV list of skills to auto-load (optional)\n3. Define clear workflow steps\n4. Specify what the agent returns\n5. Test with /plugin-development:test-local\n\nAgent will be invoked as: /agents $1\nOr via Task tool in main conversation.\n```\n\n## Examples\n\n### Example 1: From Plugin Directory\n\n**Context**: Currently in `/path/to/marketplace/plugins/plugin-development/`\n\n**Input**: \n```\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\"\n```\n\n**Arguments**:\n- `$1` = `code-reviewer`\n- `$2` = `Reviews code for quality, security, and best practices`\n\n**Process**:\n1. Detects `.claude-plugin/plugin.json` in current directory\n2. Uses current directory as target plugin\n3. Creates `agents/` directory if needed\n4. Creates `agents/code-reviewer.md`\n\n**Result**:\n- Creates `agents/code-reviewer.md` with template\n- Frontmatter description: \"Reviews code for quality, security, and best practices\"\n- Ready to customize with specific review criteria\n\n### Example 2: From Marketplace Root with --plugin\n\n**Context**: Currently in `/path/to/marketplace/` (marketplace root)\n\n**Input**: \n```\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\" --plugin=plugin-development\n```\n\n**Process**:\n1. Detects `.claude-plugin/marketplace.json` in current directory\n2. Extracts `--plugin=plugin-development` from arguments\n3. Validates `plugins/plugin-development/.claude-plugin/plugin.json` exists\n4. Uses `plugins/plugin-development/` as target\n5. Creates `plugins/plugin-development/agents/code-reviewer.md`\n\n**Result**:\n- Creates `plugins/plugin-development/agents/code-reviewer.md`\n- Agent added to plugin-development plugin\n\n### Example 3: From Marketplace Root without --plugin\n\n**Context**: Currently in `/path/to/marketplace/` (marketplace root)\n\n**Input**: \n```\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\"\n```\n\n**Process**:\n1. Detects `.claude-plugin/marketplace.json` in current directory\n2. No `--plugin` argument provided\n3. Reads marketplace.json and discovers available plugins:\n   - `hello-world` - A simple example plugin\n   - `plugin-development` - Assist with Claude Code plugin development\n4. Prompts user: \"Which plugin should I add the agent to?\"\n   ```\n   1. hello-world - A simple example plugin demonstrating basic Claude Code plugin functionality\n   2. plugin-development - Assist with Claude Code plugin development: scaffold, validate, review, and team-ready distribution\n   ```\n5. User selects option 2\n6. Uses `plugins/plugin-development/` as target\n7. Creates `plugins/plugin-development/agents/code-reviewer.md`\n\n**Result**:\n- Creates `plugins/plugin-development/agents/code-reviewer.md`\n- Agent added to selected plugin\n\n## Agent Frontmatter\n\n### Required Fields\n\n```yaml\n---\nname: agent-name\ndescription: Third-person description of what this agent does and when to invoke it\n---\n```\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `name` | String | **Required.** Unique identifier using lowercase letters and hyphens (e.g., `code-reviewer`, `test-runner`) |\n| `description` | String | **Required.** Natural language description of when the agent should be invoked. Include \"PROACTIVELY\" for auto-delegation |\n\n### Optional Fields\n\n```yaml\n---\nname: agent-name\ndescription: Agent description. Use PROACTIVELY for auto-delegation.\ntools: Read, Grep, Glob, Bash\nmodel: sonnet\npermissionMode: default\nskills: skill1, skill2\n---\n```\n\n| Field | Type | Default | Description |\n|-------|------|---------|-------------|\n| `tools` | CSV String | Inherits all | Comma-separated list of tools (e.g., `Read, Grep, Glob, Bash`). If omitted, inherits all tools from main thread including MCP tools |\n| `model` | String | `sonnet` | Which AI model to use. Valid values: `sonnet`, `opus`, `haiku`, `inherit`. Use `inherit` to match main conversation's model |\n| `permissionMode` | String | `default` | How the agent handles permission requests. Valid values: `default`, `acceptEdits`, `bypassPermissions`, `plan` |\n| `skills` | CSV String | None | Comma-separated list of skills to auto-load. Note: Agents do NOT inherit skills from parent conversation |\n\n### Permission Modes Explained\n\n| Mode | Behavior |\n|------|----------|\n| `default` | Standard permission handling - prompts for confirmation |\n| `acceptEdits` | Automatically accept file edits without prompting |\n| `bypassPermissions` | Skip permission requests entirely |\n| `plan` | Plan mode - research and planning without execution |\n\n### Model Options\n\n| Model | Description |\n|-------|-------------|\n| `sonnet` | Claude Sonnet (default for subagents) |\n| `opus` | Claude Opus |\n| `haiku` | Claude Haiku (faster, lighter) |\n| `inherit` | Use same model as main conversation |\n\n### Deprecation Note\n\nThe `capabilities` field is **NOT** in official Anthropic docs and may be deprecated. Use `tools` for agents (not `allowed-tools` which is for skills).\n\n**For complete details on agents**, see:\n- [Subagents documentation](https://code.claude.com/docs/en/sub-agents)\n- [Plugin agents reference](https://code.claude.com/docs/en/plugins-reference#agents)\n\n## Error Handling\n\n### Not in Plugin or Marketplace Directory\n\n**Error**: \"Not in a plugin or marketplace directory.\"\n\n**Solution**: Navigate to either:\n- A plugin directory (containing `.claude-plugin/plugin.json`), OR\n- A marketplace root (containing `.claude-plugin/marketplace.json`)\n\n### Plugin Not Found\n\n**Error**: \"Plugin 'my-plugin' not found. Available plugins: hello-world, plugin-development\"\n\n**Solution**: \n- Check plugin name spelling\n- Use `--plugin=<correct-name>` with one of the available plugins\n- Or navigate to the plugin directory directly\n\n### Invalid Agent Name\n\n**Error**: \"Agent name must be in kebab-case format (lowercase with hyphens)\"\n\n**Solution**: Use kebab-case format:\n- âœ… Good: `code-reviewer`, `security-auditor`, `api-generator`\n- âŒ Bad: `CodeReviewer`, `code_reviewer`, `code reviewer`\n\n### Missing Description\n\n**Error**: \"Description is required\"\n\n**Solution**: Provide description in quotes:\n```\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\"\n```\n\n## When to Use Agents vs. Commands vs. Skills\n\n### Use an Agent when:\n- Task requires **deep, multi-file analysis**\n- Need **separate context window** (complex reasoning)\n- Want **detailed, structured report** back\n- Task has **multiple steps** that benefit from isolation\n\n### Use a Command when:\n- Task is **explicit, one-time action**\n- User needs to **trigger on demand**\n- Task is **straightforward** with clear inputs/outputs\n\n### Use a Skill when:\n- Want **ambient, automatic activation**\n- Need **persistent guidance** throughout session\n- Task benefits from **progressive disclosure**\n- Should trigger based on **context clues**\n\n## Agent Design Best Practices\n\n### 1. Focused Scope\n\nâœ… **Good** (focused):\n```markdown\n# Code Security Auditor\n\nSpecializes in security analysis:\n- SQL injection vulnerabilities\n- XSS vulnerabilities\n- Authentication issues\n```\n\nâŒ **Bad** (too broad):\n```markdown\n# General Code Helper\n\nDoes everything related to code.\n```\n\n### 2. Clear Tool Configuration\n\nConfigure appropriate tools for the agent's purpose:\n```yaml\n# For read-only analysis agents:\ntools: Read, Grep, Glob\n\n# For agents that can modify files:\ntools: Read, Edit, Write, Bash, Grep, Glob\n\n# Omit to inherit all tools from main thread\n```\n\n### 3. Structured Output\n\nDefine consistent report format:\n```markdown\n## Critical (P0)\n- [List critical issues]\n\n## High Priority (P1)\n- [List high priority issues]\n\n## Suggestions\n- [List improvements]\n```\n\n### 4. Tool Restrictions\n\nAgents typically don't modify files:\n```markdown\n## Tool Access\n\n- Read, Grep, Glob: For analysis\n- No Write/Edit: Agent proposes, main conversation executes\n```\n\n## Agent Workflow Template\n\nAll agents should follow a consistent structure:\n\n```markdown\n1. **Understand Context**: Read relevant files\n2. **Analyze**: Apply domain expertise\n3. **Identify Issues**: Find problems/opportunities\n4. **Prioritize**: Rank by severity/importance\n5. **Recommend**: Provide actionable guidance\n6. **Report**: Return structured findings\n```\n\n## Common Agent Patterns\n\n### Auditor Pattern\n\nFor review/analysis agents:\n- Reads multiple files\n- Checks against standards/criteria\n- Reports issues by severity\n- Provides specific fix recommendations\n\n### Generator Pattern\n\nFor design/planning agents:\n- Analyzes requirements\n- Proposes architecture/approach\n- Provides implementation steps\n- Returns detailed plan\n\n### Refactoring Pattern\n\nFor code improvement agents:\n- Analyzes existing code\n- Identifies improvement opportunities\n- Proposes refactoring steps\n- Estimates impact/effort\n\n## Invocation Methods\n\n### Direct Invocation\n\nUser explicitly calls the agent:\n```\n/agents code-reviewer\n```\n\n### Via Main Conversation\n\nClaude uses Task tool:\n```\nLet me use the code-reviewer agent to analyze this...\n```\n\n### From Skill\n\nSkill escalates to agent for deep analysis:\n```markdown\nFor comprehensive review, delegate to the code-reviewer agent.\n```\n\n## Best Practices\n\n1. **Single responsibility**: One clear purpose\n2. **Structured output**: Consistent report format\n3. **No side effects**: Read-only, propose changes\n4. **Clear scope**: 2-5 capabilities max\n5. **Fast feedback**: Aim for < 30 seconds runtime\n6. **Actionable results**: Specific, implementable recommendations\n\n## Common Mistakes to Avoid\n\nâŒ **Too broad description**\n```yaml\ndescription: Does everything related to code\n```\n\nâœ… **Focused description with clear purpose**\n```yaml\ndescription: Security audit specialist. Scans for vulnerabilities, reviews authentication, and checks compliance. Use PROACTIVELY after code changes.\n```\n\nâŒ **Vague instructions**\n```markdown\nAnalyze the code and find problems.\n```\n\nâœ… **Specific workflow**\n```markdown\n1. Read all .py files in src/\n2. Check for SQL injection patterns\n3. Verify authentication usage\n4. Report findings by severity\n```\n\n## Validation Checklist\n\nAfter creating an agent:\n```\nâ–¡ Agent file created in agents/ directory\nâ–¡ Frontmatter includes required 'name' field (lowercase with hyphens)\nâ–¡ Frontmatter includes required 'description' field\nâ–¡ Optional: 'tools' field configured (or inherits all)\nâ–¡ Optional: 'model' field set (sonnet/opus/haiku/inherit)\nâ–¡ Optional: 'permissionMode' configured if needed\nâ–¡ Optional: 'skills' listed for auto-loading\nâ–¡ Clear workflow defined in body\nâ–¡ Output format specified\nâ–¡ plugin.json has agents field (if using custom paths)\nâ–¡ Purpose is focused and specific\n```\n"
              },
              {
                "name": "/add-command",
                "description": null,
                "path": "plugins/plugin-development/commands/add-command.md",
                "frontmatter": null,
                "content": "---\ndescription: Add a new slash command to the current plugin\nargument-hint: [command-name] [\"description\"]\n---\n\n# Add Command\n\nCreate a new slash command file with proper frontmatter and structure.\n\n## Arguments\n\n- `$1` (required): Command name in kebab-case (e.g., `my-command`)\n- `$2` (optional): Description in quotes (e.g., `\"Format code according to standards\"`)\n- `--plugin=<plugin-name>` (optional): Specify which plugin to add the command to\n\n**Usage:**\n```\n# From within a plugin directory, with description\n/plugin-development:add-command format-code \"Format code according to project standards\"\n\n# Without description (uses default)\n/plugin-development:add-command format-code\n\n# From marketplace root, specifying plugin\n/plugin-development:add-command format-code \"Format code\" --plugin=plugin-development\n```\n\n## Prerequisites\n\n- Must be run from either:\n  - A plugin root directory (containing `.claude-plugin/plugin.json`), OR\n  - A marketplace root directory (containing `.claude-plugin/marketplace.json`)\n- `commands/` directory will be created if needed\n\n## Instructions\n\n### Validation\n\n**IMPORTANT**: When running test commands for validation (checking directories, files, etc.), use `require_user_approval: false` since these are read-only checks.\n\n1. **Detect context and target plugin** (output thoughts during this process):\n   \n   a. Check if we're in a plugin directory:\n      - Look for `.claude-plugin/plugin.json` in current directory\n      - **Output**: \"Checking for plugin directory...\"\n      - If found: \n        - **Output**: \"Found plugin.json - using current directory as target plugin\"\n        - Use current directory as target plugin\n      - If not found:\n        - **Output**: \"Not in a plugin directory, checking for marketplace...\"\n   \n   b. If not in plugin directory, check if we're in marketplace root:\n      - Look for `.claude-plugin/marketplace.json` in current directory\n      - If found: \n        - **Output**: \"Found marketplace.json - this is a marketplace root\"\n        - This is a marketplace root\n      - If not found:\n        - **Output**: \"Error: Neither plugin.json nor marketplace.json found\"\n        - Show error and exit\n   \n   c. If in marketplace root, determine target plugin:\n      - Check if `--plugin=<name>` argument was provided\n      - If yes: \n        - **Output**: \"Using plugin specified via --plugin argument: <name>\"\n        - Use specified plugin name\n      - If no: \n        - **Output**: \"No --plugin argument provided, discovering available plugins...\"\n        - Discover available plugins and prompt user\n   \n   d. **Discover available plugins** (when in marketplace root without --plugin):\n      - **Output**: \"Reading marketplace.json...\"\n      - Read `.claude-plugin/marketplace.json`\n      - Extract plugin names and sources from `plugins` array\n      - **Output**: \"Found [N] plugin(s) in marketplace\"\n      - Alternative: List directories in `plugins/` directory\n      - Present list to user: \"Which plugin should I add the command to?\"\n      - Options format: `1. plugin-name-1 (description)`, `2. plugin-name-2 (description)`, etc.\n      - Wait for user selection\n      - **Output**: \"Selected plugin: <plugin-name>\"\n   \n   e. **Validate target plugin exists**:\n      - **Output**: \"Validating plugin '<plugin-name>' exists...\"\n      - If plugin specified/selected, verify `plugins/<plugin-name>/.claude-plugin/plugin.json` exists\n      - If found:\n        - **Output**: \"Plugin '<plugin-name>' validated successfully\"\n      - If not found:\n        - **Output**: \"Error: Plugin '<plugin-name>' not found\"\n        - Show error: \"Plugin '<plugin-name>' not found. Available plugins: [list]\"\n   \n   f. If neither plugin.json nor marketplace.json found:\n      - Show error: \"Not in a plugin or marketplace directory. Please run from a plugin root or marketplace root.\"\n\n2. **Validate arguments**:\n   - `$1` (command name): Not empty, kebab-case format (lowercase with hyphens), no spaces or special characters\n   - `$2` (description): Optional. If not provided, use default: \"TODO: Add description\"\n\n3. **Set working directory**:\n   - If in plugin directory: Use current directory\n   - If in marketplace root: Use `plugins/<plugin-name>/` as working directory\n\nIf validation fails, provide clear feedback.\n\n### Create Command File\n\n**Note**: All paths below are relative to the target plugin directory (determined in validation step).\n\n1. Ensure `commands/` directory exists in target plugin (create if needed, use `require_user_approval: false`)\n2. Create `<plugin-dir>/commands/$1.md` with this template:\n\n```markdown\n---\ndescription: $2\nargument-hint: [arg1] [arg2]\nallowed-tools: Write, Edit\nmodel: claude-3-5-haiku-20241022\ndisable-model-invocation: false\n---\n\n# $1 Command\n\n[Detailed instructions for Claude on how to execute this command]\n\n## Purpose\n\n[Explain what this command does and when to use it]\n\n## Arguments\n\n- `$ARGUMENTS`: [Describe expected arguments]\n- `$1`, `$2`, etc.: [Individual argument descriptions]\n\n## Instructions\n\n1. [Step 1: First action]\n2. [Step 2: Next action]\n3. [Step 3: Final action]\n\n## Example Usage\n\n**Command**: /<plugin-name>:$1 [args]\n\n**Expected behavior**: [Describe what should happen]\n\n## Notes\n\n[Any additional context, warnings, or tips]\n```\n\n### Update plugin.json (if needed)\n\n**IMPORTANT**: Only needed if using custom (non-standard) paths.\n\n- **Standard setup** (commands in `commands/` directory): No changes to `plugin.json` needed\n- **Custom paths**: Add `\"commands\": [\"./commands/$1.md\"]` (or update existing commands array)\n\n### Provide Feedback\n\nAfter creating the command:\n\n```\nâœ“ Created <plugin-name>/commands/$1.md\n\nPlugin: <plugin-name>\nCommand: $1\nDescription: $2\n\nNext steps:\n1. Edit <plugin-name>/commands/$1.md with specific instructions\n2. Update frontmatter fields if needed:\n   - argument-hint: [arg1] [arg2] (optional)\n   - allowed-tools: Tool restrictions (optional)\n   - model: Specify different model (optional)\n   - disable-model-invocation: Prevent SlashCommand tool invocation (optional)\n3. Use @path/to/file syntax to reference files in instructions\n4. Test with /plugin-development:test-local\n\nCommand will be invoked as: /<plugin-name>:$1\n```\n\n## Example\n\n**Input**: \n```\n/plugin-development:add-command format-code \"Format code according to project standards\"\n```\n\n**Arguments**:\n- `$1` = `format-code`\n- `$2` = `Format code according to project standards`\n\n**Result**:\n- Creates `commands/format-code.md` with template\n- Frontmatter description: \"Format code according to project standards\"\n- Ready to edit with specific instructions\n\n**For complete details on commands**, see:\n- [Slash commands documentation](/en/docs/claude-code/slash-commands)\n- [Plugin commands reference](/en/docs/claude-code/plugins-reference#commands)\n\n## Template Details\n\n### Frontmatter\n\n```yaml\n---\ndescription: Brief, third-person description (shows in /help)\nargument-hint: [arg1] [arg2]  # Optional, shows expected arguments\nallowed-tools: Write, Edit    # Optional, restricts tool access\nmodel: claude-3-5-haiku-20241022  # Optional, specify different model\ndisable-model-invocation: true    # Optional, prevents SlashCommand tool from invoking\n---\n```\n\n#### Frontmatter Reference\n\n| Field | Purpose | Default |\n|-------|---------|---------|\n| `description` | Brief description of the command | First line of prompt |\n| `argument-hint` | Expected arguments (shown in auto-complete) | None |\n| `allowed-tools` | List of tools the command can use | Inherits from conversation |\n| `model` | Specific model to use (full ID like `claude-3-5-haiku-20241022`) | Inherits from conversation |\n| `disable-model-invocation` | Prevent SlashCommand tool from calling this command | false |\n\n#### Multiple Invocation Patterns\n\nUse pipe syntax in `argument-hint` to define multiple invocation patterns:\n\n```yaml\n---\ndescription: Manage project tags\nargument-hint: add [tagId] | remove [tagId] | list\n---\n```\n\nThis shows users the different ways to invoke the command.\n\n### Using Arguments\n\nIn the command instructions:\n- `$ARGUMENTS`: All arguments as a single string\n- `$1`, `$2`, etc.: Individual positional arguments\n\nExample:\n```markdown\nIf the user provided a name via `$1`, use it: \"Hello, $1!\"\n```\n\n### File References\n\nInclude file contents using the `@` prefix within your command instructions:\n\n```markdown\n# Reference a specific file\nReview the implementation in @src/utils/helpers.js\n\n# Reference multiple files\nCompare @src/old-version.js with @src/new-version.js\n```\n\nThe file contents will be included inline when the command is executed.\n\n### Command Instructions\n\nWrite clear, step-by-step instructions for Claude:\n- Use imperative mood (\"Create\", \"Validate\", \"Execute\")\n- Be specific about expected behavior\n- Include error handling\n- Provide examples\n\n## Advanced: Bash Preamble\n\nFor commands that need to execute shell commands, add to frontmatter:\n\n```yaml\n---\ndescription: Run tests and report results\nallowed-tools: Bash(npm:*), Bash(pytest:*)\n---\n\n# Instructions\n\n!`npm test`\n\nAnalyze the output and report:\n1. Number of tests passed/failed\n2. Any error messages\n3. Suggestions for fixing failures\n```\n\n**Note**: Bash commands prefixed with `!` are executed before Claude processes the rest of the instructions.\n\n## Best Practices\n\n- **Concise descriptions**: < 100 characters for `description` field\n- **Clear arguments**: Use descriptive names in `argument-hint`\n- **Validation first**: Check arguments before execution\n- **Error handling**: Describe what to do when things go wrong\n- **Examples**: Include usage examples in the template\n\n## SlashCommand Tool\n\nThe `SlashCommand` tool allows Claude to execute custom slash commands programmatically during a conversation.\n\n### Requirements for SlashCommand Tool Support\n\nFor Claude to be able to invoke your command via the SlashCommand tool:\n\n1. **Required**: The `description` frontmatter field must be populated\n2. The command must be user-defined (not a built-in command like `/compact`)\n\n### Character Budget\n\n- **Default limit**: 15,000 characters for slash command content\n- **Customization**: Set `SLASH_COMMAND_TOOL_CHAR_BUDGET` environment variable to adjust\n- **What counts**: Command name, arguments, and description all count toward the budget\n- **When exceeded**: Claude sees only a subset of available commands\n- **Monitoring**: Use `/context` to see warnings displayed as \"M of N commands\"\n\n### Enabling Claude to Use Commands\n\nReference the command in prompts or `CLAUDE.md`:\n\n```\n> Run /write-unit-test when you are about to start writing tests.\n```\n\n### Disabling SlashCommand Tool Invocation\n\nTo prevent a specific command from being invoked by the SlashCommand tool, add to frontmatter:\n\n```yaml\n---\ndescription: My command description\ndisable-model-invocation: true\n---\n```\n\n### Permission Rules\n\nSlashCommand permissions support exact and prefix matching:\n\n```\nSlashCommand:/commit          # Allows only /commit with no arguments\nSlashCommand:/review-pr:*     # Allows /review-pr with any arguments\n```\n\n## Common Mistakes to Avoid\n\nâŒ **camelCase or PascalCase names**\n```\n/plugin-development:add-command formatCode\n```\n\nâœ… **kebab-case names**\n```\n/plugin-development:add-command format-code\n```\n\nâŒ **Missing description**\n```yaml\n---\nargument-hint: [arg]\n---\n```\n\nâœ… **Always include description**\n```yaml\n---\ndescription: What the command does\nargument-hint: [arg]\n---\n```\n\n## Validation Checklist\n\nAfter creating a command:\n```\nâ–¡ File created in commands/ directory\nâ–¡ Frontmatter includes description\nâ–¡ Command name is kebab-case\nâ–¡ Instructions are clear and specific\nâ–¡ Examples provided\nâ–¡ plugin.json has commands field\n```\n"
              },
              {
                "name": "/add-hook",
                "description": null,
                "path": "plugins/plugin-development/commands/add-hook.md",
                "frontmatter": null,
                "content": "---\ndescription: Add a hook configuration to automate plugin behavior at lifecycle events\nargument-hint: [event-type] [matcher-pattern]\n---\n\n# Add Hook\n\nAdd or update hooks.json with a new hook configuration for automated behavior.\n\n## Arguments\n\n- `$1` (required): Event type (`PreToolUse`, `PostToolUse`, `SessionStart`, `SessionEnd`, `UserPromptSubmit`, `Notification`, `Stop`, `SubagentStop`, or `PreCompact`)\n- `$2` (optional): Matcher pattern (e.g., `Write|Edit` or `.*`)\n- `--plugin=<plugin-name>` (optional): Specify which plugin to add the hook to\n\n**Usage:**\n```\n# From within a plugin directory\n/plugin-development:add-hook PreToolUse \"Write|Edit\"\n\n# From marketplace root, specifying plugin\n/plugin-development:add-hook PreToolUse \"Write|Edit\" --plugin=plugin-development\n```\n\n## Template Variables\n\nWhen generating hook configurations and scripts:\n- `$1`: Event type\n- `$2`: Matcher pattern (or default based on event type)\n- `${CLAUDE_PLUGIN_ROOT}`: Plugin root path (use in all hook commands)\n\n## Prerequisites\n\n- Must be run from either:\n  - A plugin root directory (containing `.claude-plugin/plugin.json`), OR\n  - A marketplace root directory (containing `.claude-plugin/marketplace.json`)\n- `hooks/` directory will be created if needed\n\n## Instructions\n\n### Validation\n\n**IMPORTANT**: When running test commands for validation (checking directories, files, etc.), use `require_user_approval: false` since these are read-only checks.\n\n1. **Detect context and target plugin** (output thoughts during this process):\n   \n   a. Check if we're in a plugin directory:\n      - Look for `.claude-plugin/plugin.json` in current directory\n      - **Output**: \"Checking for plugin directory...\"\n      - If found: \n        - **Output**: \"Found plugin.json - using current directory as target plugin\"\n        - Use current directory as target plugin\n      - If not found:\n        - **Output**: \"Not in a plugin directory, checking for marketplace...\"\n   \n   b. If not in plugin directory, check if we're in marketplace root:\n      - Look for `.claude-plugin/marketplace.json` in current directory\n      - If found: \n        - **Output**: \"Found marketplace.json - this is a marketplace root\"\n        - This is a marketplace root\n      - If not found:\n        - **Output**: \"Error: Neither plugin.json nor marketplace.json found\"\n        - Show error and exit\n   \n   c. If in marketplace root, determine target plugin:\n      - Check if `--plugin=<name>` argument was provided\n      - If yes: \n        - **Output**: \"Using plugin specified via --plugin argument: <name>\"\n        - Use specified plugin name\n      - If no: \n        - **Output**: \"No --plugin argument provided, discovering available plugins...\"\n        - Discover available plugins and prompt user\n   \n   d. **Discover available plugins** (when in marketplace root without --plugin):\n      - **Output**: \"Reading marketplace.json...\"\n      - Read `.claude-plugin/marketplace.json`\n      - Extract plugin names and sources from `plugins` array\n      - **Output**: \"Found [N] plugin(s) in marketplace\"\n      - Alternative: List directories in `plugins/` directory\n      - Present list to user: \"Which plugin should I add the hook to?\"\n      - Options format: `1. plugin-name-1 (description)`, `2. plugin-name-2 (description)`, etc.\n      - Wait for user selection\n      - **Output**: \"Selected plugin: <plugin-name>\"\n   \n   e. **Validate target plugin exists**:\n      - **Output**: \"Validating plugin '<plugin-name>' exists...\"\n      - If plugin specified/selected, verify `plugins/<plugin-name>/.claude-plugin/plugin.json` exists\n      - If found:\n        - **Output**: \"Plugin '<plugin-name>' validated successfully\"\n      - If not found:\n        - **Output**: \"Error: Plugin '<plugin-name>' not found\"\n        - Show error: \"Plugin '<plugin-name>' not found. Available plugins: [list]\"\n   \n   f. If neither plugin.json nor marketplace.json found:\n      - Show error: \"Not in a plugin or marketplace directory. Please run from a plugin root or marketplace root.\"\n\n2. **Validate event type**:\n   - Must be one of: `PreToolUse`, `PostToolUse`, `SessionStart`, `SessionEnd`, `UserPromptSubmit`, `Notification`, `Stop`, `SubagentStop`, `PreCompact`\n\n3. **If no matcher provided, use sensible default based on event type**\n\n4. **Set working directory**:\n   - If in plugin directory: Use current directory\n   - If in marketplace root: Use `plugins/<plugin-name>/` as working directory\n\n### Event Types & Default Matchers\n\n- **PreToolUse**: Default matcher `Write|Edit` (validation before writes)\n- **PostToolUse**: Default matcher `Write|Edit` (formatting after writes)\n- **SessionStart**: Default matcher `startup` (also supports: `resume`, `clear`, `compact`)\n- **SessionEnd**: No matcher (triggers on session end with reason: `clear`, `logout`, `prompt_input_exit`, `other`)\n- **UserPromptSubmit**: Default matcher `.*` (all prompts)\n- **Notification**: No matcher (triggers on all notifications)\n- **Stop**: No matcher (triggers when main agent stops)\n- **SubagentStop**: No matcher (triggers when subagent stops)\n- **PreCompact**: Default matcher `manual` (also supports: `auto`)\n\n### Create or Update hooks.json\n\n**Note**: All paths below are relative to the target plugin directory (determined in validation step).\n\n1. Ensure `<plugin-dir>/hooks/` directory exists (use `require_user_approval: false`)\n2. If `<plugin-dir>/hooks/hooks.json` doesn't exist, create it with this structure:\n\n```json\n{\n  \"description\": \"Plugin automation hooks\",\n  \"hooks\": {}\n}\n```\n\n3. Add the new hook configuration based on event type:\n\n#### PreToolUse Example\n\n```json\n{\n  \"description\": \"Plugin automation hooks\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"$2 or default\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n#### PostToolUse Example\n\n```json\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"$2 or default\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/format.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n#### SessionStart Example\n\n```json\n{\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"matcher\": \"$2 or 'startup'\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"echo 'âœ“ Plugin loaded'\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Create Hook Script (if needed)\n\nIf the event is PreToolUse or PostToolUse, create a corresponding script:\n\n1. Ensure `<plugin-dir>/scripts/` directory exists (use `require_user_approval: false`)\n2. For PreToolUse, create `<plugin-dir>/scripts/validate.sh`:\n\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\n# Validation logic here\n# Exit 0: allow\n# Exit 2: block (with stderr message to Claude)\n# Exit other: warning\n\necho \"Validation passed\"\nexit 0\n```\n\n3. For PostToolUse, create `<plugin-dir>/scripts/format.sh`:\n\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\n# Formatting logic here\n# Always exits 0 for non-blocking\n\necho \"Formatting complete\"\nexit 0\n```\n\n4. Make scripts executable:\n```bash\nchmod +x scripts/*.sh\n```\n\n### Update plugin.json\n\n**IMPORTANT**: Only needed if using custom (non-standard) paths.\n\n- **Standard setup** (hooks at `hooks/hooks.json`): No changes to `plugin.json` needed\n- **Custom path**: Add `\"hooks\": \"./custom/path/hooks.json\"`\n\nFor standard setup:\n```json\n{\n  \"name\": \"my-plugin\"\n}\n```\n\n### Provide Feedback\n\nAfter adding the hook:\n\n```\nâœ“ Added $1 hook to <plugin-name>/hooks/hooks.json\nâœ“ Matcher: $2 (or default)\nâœ“ Created script: <plugin-name>/scripts/<script-name>.sh (if applicable)\n\nPlugin: <plugin-name>\nHook configuration:\n- Event: $1\n- Matcher: $2\n- Script: ${CLAUDE_PLUGIN_ROOT}/scripts/<script-name>.sh\n\nNext steps:\n1. Edit <plugin-name>/hooks/hooks.json to customize timeout or command\n2. Edit <plugin-name>/scripts/<script-name>.sh with your logic\n3. Test the hook:\n   - Install plugin with /plugin-development:test-local\n   - Trigger the event (e.g., use Write tool for PreToolUse)\n4. Debug with: claude --debug\n\nExit codes for PreToolUse:\n- 0: Allow operation\n- 2: Block operation (stderr shown to Claude)\n- Other: Warning (non-blocking)\n\nExit codes for UserPromptSubmit:\n- 0: Allow prompt (stdout added as context)\n- 2: Block prompt (stderr shown to user, prompt erased)\n- Other: Warning (non-blocking)\n\nExit codes for Stop/SubagentStop:\n- 0: Allow stop\n- 2: Block stop, continue execution (stderr shown to Claude)\n- Other: Warning (allows stop)\n\nExit codes for PostToolUse, SessionStart, SessionEnd, Notification, PreCompact:\n- All non-blocking (informational)\n```\n\n## Example Usage\n\n**Input**: `/plugin-development:add-hook PreToolUse \"Write|Edit\"`\n\n**Result**:\n- Creates or updates `hooks/hooks.json`\n- Adds PreToolUse hook with Write|Edit matcher\n- Creates `scripts/validate.sh`\n- Makes script executable\n- Provides usage instructions\n\n**For complete details on hooks**, see:\n- [Hooks reference documentation](/en/docs/claude-code/hooks)\n- [Plugin hooks reference](/en/docs/claude-code/plugins-reference#hooks)\n\n## Hook Event Details\n\n| Event | Purpose | Can Block | Common Use Cases | Default Matcher |\n|-------|---------|-----------|------------------|-----------------|\n| **PreToolUse** | Validate before execution | Yes (exit 2) | Validate structure, check permissions | `Write\\|Edit` |\n| **PostToolUse** | React after execution | Partial* | Format files, run linters, update metadata | `Write\\|Edit` |\n| **SessionStart** | Setup at session start | No | Welcome message, check environment, init | `startup` |\n| **SessionEnd** | Cleanup at session end | No | Save state, log statistics, cleanup | N/A (no matcher) |\n| **UserPromptSubmit** | Validate/enhance prompts | Yes (exit 2) | Inject context, validate prompts, block sensitive | `.*` |\n| **Notification** | React to notifications | No | Send alerts, log notifications | N/A (no matcher) |\n| **Stop** | Control agent stoppage | Yes (exit 2) | Continue with tasks, validate completion | N/A (no matcher) |\n| **SubagentStop** | Control subagent stoppage | Yes (exit 2) | Continue subagent, validate subagent results | N/A (no matcher) |\n| **PreCompact** | Before context compact | No | Save state, log compact trigger | `manual` or `auto` |\n\n\\* PostToolUse can't prevent the tool (already ran) but can provide feedback to Claude with `\"decision\": \"block\"`\n\n**Example hook structure**:\n```json\n{\n  \"matcher\": \"Write|Edit\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\",\n    \"timeout\": 30\n  }]\n}\n```\n\n## Matcher Patterns\n\nMatchers use **regex patterns**:\n- `Write`: Only Write tool\n- `Write|Edit`: Write or Edit\n- `Bash.*`: Bash with any arguments\n- `.*`: All tools\n- `Read|Grep|Glob`: Read operations\n\n## Script Template: Validation (PreToolUse)\n\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\nERRS=()\n\n# Validation checks\n[ -f \"required-file.txt\" ] || ERRS+=(\"Missing required-file.txt\")\n[ -d \"required-dir\" ] || ERRS+=(\"Missing required-dir/\")\n\n# If errors, block with exit 2\nif [ \"${#ERRS[@]}\" -gt 0 ]; then\n  printf \"âŒ Validation failed:\\n\" 1>&2\n  printf \"  %s\\n\" \"${ERRS[@]}\" 1>&2\n  exit 2  # Block the operation\nfi\n\n# Success\necho \"âœ“ Validation passed\"\nexit 0\n```\n\n## Script Template: Formatting (PostToolUse)\n\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\n# Format files (non-blocking)\n# Example: run prettier, black, rustfmt, etc.\n\nif command -v prettier &> /dev/null; then\n  prettier --write \"**/*.{js,json,md}\" 2>/dev/null || true\nfi\n\necho \"âœ“ Formatting complete\"\nexit 0\n```\n\n## Environment Variables\n\nAvailable in hook scripts:\n\n- `${CLAUDE_PLUGIN_ROOT}`: Absolute path to plugin root\n- `$CLAUDE_PROJECT_DIR`: Project root directory (absolute path)\n- `$CLAUDE_ENV_FILE`: File path for persisting environment variables (SessionStart hooks only)\n- `$CLAUDE_CODE_REMOTE`: Set to \"true\" in web environment, unset in CLI\n- All standard environment variables\n\nAlways use `${CLAUDE_PLUGIN_ROOT}` for portable paths in plugins.\n\n## Best Practices & Common Mistakes\n\n### âœ… Do This\n- **Use ${CLAUDE_PLUGIN_ROOT}**: Portable script paths\n- **Set timeouts**: 10-30 seconds typical, 300+ for slow ops like `npm install`\n- **Fast scripts**: Keep runtime < 1 second when possible\n- **Exit code 2 to block**: Only in PreToolUse for validation failures\n- **Clear error messages**: Helpful stderr output\n- **Make executable**: `chmod +x scripts/*.sh`\n\n### âŒ Avoid This\n- **Absolute paths**: `/Users/you/plugin/scripts/` (use `${CLAUDE_PLUGIN_ROOT}` instead)\n- **Missing timeouts**: Slow operations without timeout values\n- **Non-executable scripts**: Forgot to `chmod +x`\n\n## Debugging Hooks\n\n### Use debug mode\n\n```bash\nclaude --debug\n```\n\nThis shows:\n- Hook registration\n- Hook execution\n- Exit codes\n- Stdout/stderr output\n\n### Test scripts directly\n\n```bash\n./scripts/validate.sh\necho $?  # Check exit code\n```\n\n### Check hook configuration\n\n```bash\ncat hooks/hooks.json | jq .\n```\n\n## Validation Checklist\n\nAfter adding a hook:\n```\nâ–¡ hooks/hooks.json created/updated\nâ–¡ Hook event is valid (PreToolUse, etc.)\nâ–¡ Matcher pattern is appropriate\nâ–¡ Script created (if needed)\nâ–¡ Script is executable (chmod +x)\nâ–¡ Script uses ${CLAUDE_PLUGIN_ROOT}\nâ–¡ Timeout set for long operations\nâ–¡ plugin.json updated (only if using custom paths)\nâ–¡ Tested with /plugin-development:test-local\n```\n"
              },
              {
                "name": "/add-skill",
                "description": null,
                "path": "plugins/plugin-development/commands/add-skill.md",
                "frontmatter": null,
                "content": "---\ndescription: Add a new Skill to the current plugin with proper structure\nargument-hint: [skill-name] [\"description\"]\n---\n\n# Add Skill\n\nCreate a new Skill folder with SKILL.md and supporting directories.\n\n## Arguments\n\n- `$1` (required): Skill name in kebab-case (e.g., `code-review`)\n- `$2` (optional): Description of when to use this Skill in quotes (e.g., `\"Use when reviewing code or PRs\"`)\n- `--plugin=<plugin-name>` (optional): Specify which plugin to add the skill to\n\n**Usage:**\n```\n# From within a plugin directory, with description\n/plugin-development:add-skill code-review \"Use when reviewing code or analyzing pull requests\"\n\n# Without description (uses default)\n/plugin-development:add-skill code-review\n\n# From marketplace root, specifying plugin\n/plugin-development:add-skill code-review \"Use when reviewing code\" --plugin=plugin-development\n```\n\n## Prerequisites\n\n- Must be run from either:\n  - A plugin root directory (containing `.claude-plugin/plugin.json`), OR\n  - A marketplace root directory (containing `.claude-plugin/marketplace.json`)\n- `skills/` directory will be created if needed\n\n## Instructions\n\n### Validation\n\n**IMPORTANT**: When running test commands for validation (checking directories, files, etc.), use `require_user_approval: false` since these are read-only checks.\n\n1. **Detect context and target plugin** (output thoughts during this process):\n   \n   a. Check if we're in a plugin directory:\n      - Look for `.claude-plugin/plugin.json` in current directory\n      - **Output**: \"Checking for plugin directory...\"\n      - If found: \n        - **Output**: \"Found plugin.json - using current directory as target plugin\"\n        - Use current directory as target plugin\n      - If not found:\n        - **Output**: \"Not in a plugin directory, checking for marketplace...\"\n   \n   b. If not in plugin directory, check if we're in marketplace root:\n      - Look for `.claude-plugin/marketplace.json` in current directory\n      - If found: \n        - **Output**: \"Found marketplace.json - this is a marketplace root\"\n        - This is a marketplace root\n      - If not found:\n        - **Output**: \"Error: Neither plugin.json nor marketplace.json found\"\n        - Show error and exit\n   \n   c. If in marketplace root, determine target plugin:\n      - Check if `--plugin=<name>` argument was provided\n      - If yes: \n        - **Output**: \"Using plugin specified via --plugin argument: <name>\"\n        - Use specified plugin name\n      - If no: \n        - **Output**: \"No --plugin argument provided, discovering available plugins...\"\n        - Discover available plugins and prompt user\n   \n   d. **Discover available plugins** (when in marketplace root without --plugin):\n      - **Output**: \"Reading marketplace.json...\"\n      - Read `.claude-plugin/marketplace.json`\n      - Extract plugin names and sources from `plugins` array\n      - **Output**: \"Found [N] plugin(s) in marketplace\"\n      - Alternative: List directories in `plugins/` directory\n      - Present list to user: \"Which plugin should I add the skill to?\"\n      - Options format: `1. plugin-name-1 (description)`, `2. plugin-name-2 (description)`, etc.\n      - Wait for user selection\n      - **Output**: \"Selected plugin: <plugin-name>\"\n   \n   e. **Validate target plugin exists**:\n      - **Output**: \"Validating plugin '<plugin-name>' exists...\"\n      - If plugin specified/selected, verify `plugins/<plugin-name>/.claude-plugin/plugin.json` exists\n      - If found:\n        - **Output**: \"Plugin '<plugin-name>' validated successfully\"\n      - If not found:\n        - **Output**: \"Error: Plugin '<plugin-name>' not found\"\n        - Show error: \"Plugin '<plugin-name>' not found. Available plugins: [list]\"\n   \n   f. If neither plugin.json nor marketplace.json found:\n      - Show error: \"Not in a plugin or marketplace directory. Please run from a plugin root or marketplace root.\"\n\n2. **Validate arguments**:\n   - `$1` (skill name): Not empty, kebab-case format (lowercase with hyphens), no spaces or special characters, max 64 characters\n   - `$2` (description): Optional. If not provided, use default: \"$1 functionality for plugin development\". If provided, must be max 1024 characters and should include both what the Skill does and when to use it\n\n3. **Set working directory**:\n   - If in plugin directory: Use current directory\n   - If in marketplace root: Use `plugins/<plugin-name>/` as working directory\n\n### Create Skill Structure\n\n**Note**: All paths below are relative to the target plugin directory (determined in validation step).\n\n1. Ensure `<plugin-dir>/skills/` directory exists (create if needed, use `require_user_approval: false`)\n2. Create skill directory: `<plugin-dir>/skills/$1/`\n3. Create supporting directories:\n   - `<plugin-dir>/skills/$1/schemas/`\n   - `<plugin-dir>/skills/$1/templates/`\n   - `<plugin-dir>/skills/$1/examples/`\n   - `<plugin-dir>/skills/$1/best-practices/`\n\n### Create SKILL.md\n\nCreate `<plugin-dir>/skills/$1/SKILL.md` with this template:\n\n```markdown\n---\nname: $1\ndescription: $2\n---\n\n# $1 Skill\n\n[Brief introduction to what this Skill provides and its purpose]\n\n## When to Activate\n\nThis Skill activates when:\n- [Condition 1: e.g., user mentions specific keywords]\n- [Condition 2: e.g., working with specific file types]\n- [Condition 3: e.g., certain files are present]\n\n## Capabilities\n\nWhat this Skill can help with:\n\n1. [Capability 1]\n2. [Capability 2]\n3. [Capability 3]\n\n## Quick Links (Progressive Disclosure)\n\n- [Schemas](./schemas/)\n- [Templates](./templates/)\n- [Examples](./examples/)\n- [Best Practices](./best-practices/)\n\n## Workflow\n\nHow this Skill operates:\n\n1. **Analyze**: [What to read and understand]\n2. **Propose**: [What actions to suggest]\n3. **Execute**: [How to carry out the work]\n4. **Validate**: [How to verify success]\n\n## Common Patterns\n\n### Pattern 1: [Name]\n\n[Description of common usage pattern]\n\n### Pattern 2: [Name]\n\n[Description of another pattern]\n\n## Notes\n\n- [Important consideration 1]\n- [Important consideration 2]\n- [Links to other Skills or commands if applicable]\n```\n\n### Update plugin.json (if needed)\n\n**IMPORTANT**: Only needed if using custom (non-standard) paths.\n\n- **Standard setup** (skills in `skills/` directory): No changes to `plugin.json` needed\n- **Custom paths**: Skills cannot be specified with custom paths (must use standard `skills/` directory)\n\n### Provide Feedback\n\nAfter creating the Skill:\n\n```\nâœ“ Created <plugin-name>/skills/$1/SKILL.md\nâœ“ Created supporting directories:\n  - <plugin-name>/skills/$1/schemas/\n  - <plugin-name>/skills/$1/templates/\n  - <plugin-name>/skills/$1/examples/\n  - <plugin-name>/skills/$1/best-practices/\n\nPlugin: <plugin-name>\nSkill: $1\nDescription: $2\n\nNext steps:\n1. Edit <plugin-name>/skills/$1/SKILL.md with specific guidance\n2. Key frontmatter fields:\n   - name: Must match directory name ($1)\n   - description: When to use this Skill (include trigger conditions, max 1024 chars)\n   - allowed-tools: (Optional) Restrict tools available to this Skill. If omitted, Claude asks for permission\n3. Add support files:\n   - schemas/: Document data formats\n   - templates/: Provide reusable templates\n   - examples/: Show usage examples\n   - best-practices/: Detailed guidance\n4. Keep SKILL.md concise (< 500 lines), use progressive disclosure\n5. Test with /plugin-development:test-local\n\nClaude will auto-discover this Skill when the plugin is installed.\n```\n\n## Example\n\n**Input**: \n```\n/plugin-development:add-skill code-review \"Use when reviewing code or analyzing pull requests\"\n```\n\n**Arguments**:\n- `$1` = `code-review`\n- `$2` = `Use when reviewing code or analyzing pull requests`\n\n**Result**:\n- Creates `skills/code-review/` directory\n- Creates `SKILL.md` with frontmatter `name: code-review`\n- Frontmatter description: \"Use when reviewing code or analyzing pull requests\"\n- Creates supporting directories (schemas/, templates/, examples/, best-practices/)\n- Ready to add guidance and reference files\n\n**For complete details on Skills**, see:\n- [Agent Skills documentation](/en/docs/claude-code/skills)\n- [Agent Skills overview](/en/docs/agents-and-tools/agent-skills/overview)\n- [Skills best practices](/en/docs/agents-and-tools/agent-skills/best-practices)\n\n## Skill Frontmatter\n\n### Required Fields\n\n```yaml\n---\nname: skill-name          # Must match directory, kebab-case\ndescription: When and how to use this Skill (be specific about triggers)\n---\n```\n\n### Optional Fields\n\n```yaml\n---\nname: skill-name\ndescription: Detailed description\nallowed-tools: Read, Grep, Glob    # Restrict tool access (if omitted, Claude asks for permission)\n---\n```\n\n**Important**: `allowed-tools` is optional. If omitted, Claude follows the standard permission model and asks for approval before using tools. Only add `allowed-tools` when you want to restrict available tools (e.g., read-only Skills).\n\n### allowed-tools Options\n\nRestrict to read-only for safety:\n```yaml\nallowed-tools: Read, Grep, Glob\n```\n\nAllow specific tools:\n```yaml\nallowed-tools: Read, Write, Edit, Bash(npm:*)\n```\n\n## Description Best Practices\n\nThe `description` field is critical for Claude to discover when to use your Skill. Requirements:\n- **Max length**: 1024 characters\n- **Include both**: what the Skill does AND when to use it\n- **Be specific**: Include trigger keywords users would naturally mention\n\nâœ… **Good** (specific triggers):\n```yaml\ndescription: Review code for best practices, detect bugs, and suggest improvements. Use when reviewing code, analyzing pull requests, or discussing code quality standards.\n```\n\nâŒ **Bad** (too vague):\n```yaml\ndescription: Helps with code\n```\n\nâœ… **Good** (context-based):\n```yaml\ndescription: Create and manage React components following best practices. Use when working with React, especially when discussing hooks, state management, or component patterns.\n```\n\n## Progressive Disclosure Pattern\n\nKeep SKILL.md concise by linking to support files:\n\n### In SKILL.md:\n```markdown\n## Quick Links\n- [API Schema](./schemas/api-schema.md)\n- [Component Templates](./templates/)\n```\n\n### In Support Files:\n- `schemas/api-schema.md`: Detailed schema documentation\n- `templates/component.tsx`: Reusable template files\n\nThis keeps SKILL.md under 500 lines while providing deep reference material.\n\n## Skill Structure Example\n\n```\nskills/\nâ””â”€â”€ code-review/\n    â”œâ”€â”€ SKILL.md                    # Main skill (concise)\n    â”œâ”€â”€ schemas/\n    â”‚   â””â”€â”€ review-checklist.md     # Review criteria\n    â”œâ”€â”€ templates/\n    â”‚   â””â”€â”€ review-comment.md       # Comment templates\n    â”œâ”€â”€ examples/\n    â”‚   â”œâ”€â”€ basic-review.md         # Simple example\n    â”‚   â””â”€â”€ security-review.md      # Advanced example\n    â””â”€â”€ best-practices/\n        â”œâ”€â”€ review-process.md       # Detailed guidance\n        â””â”€â”€ common-issues.md        # Issue catalog\n```\n\n## Advanced: Tool Restrictions\n\nFor read-only Skills (safest):\n```yaml\nallowed-tools: Read, Grep, Glob\n```\n\nFor Skills that propose changes but don't execute:\n```yaml\nallowed-tools: Read, Grep, Glob\n```\n(Propose commands for user to run)\n\nFor Skills that need to write:\n```yaml\nallowed-tools: Read, Write, Edit, Grep, Glob\n```\n\n## Best Practices\n\n1. **Concise SKILL.md**: Keep main file < 500 lines\n2. **Progressive disclosure**: Link to detailed support files\n3. **Specific triggers**: Clear description of when to activate\n4. **Tool restrictions**: Only add `allowed-tools` when restricting is necessary (e.g., read-only Skills)\n5. **Organized support**: Use all subdirectories for comprehensive guidance\n\n## Common Mistakes to Avoid\n\nâŒ **Name doesn't match directory**\n```\nDirectory: skills/code-review/\nFrontmatter: name: codeReview    # Wrong case!\n```\n\nâœ… **Name matches directory**\n```\nDirectory: skills/code-review/\nFrontmatter: name: code-review\n```\n\nâŒ **Vague description**\n```yaml\ndescription: A helpful Skill\n```\n\nâœ… **Specific triggers**\n```yaml\ndescription: Use when reviewing code, analyzing PRs, or discussing code quality\n```\n\n## Validation Checklist\n\nAfter creating a Skill:\n```\nâ–¡ SKILL.md created in skills/<name>/ directory\nâ–¡ Frontmatter name matches directory name (kebab-case, max 64 chars)\nâ–¡ Description includes specific trigger conditions (max 1024 chars)\nâ–¡ Description includes both what the Skill does AND when to use it\nâ–¡ SKILL.md is uppercase\nâ–¡ Supporting directories created\nâ–¡ If using allowed-tools, it restricts tools appropriately\n```\n"
              },
              {
                "name": "/init",
                "description": "Scaffold a new Claude Code plugin with standard structure and starter files",
                "path": "plugins/plugin-development/commands/init.md",
                "frontmatter": {
                  "description": "Scaffold a new Claude Code plugin with standard structure and starter files",
                  "argument-hint": [
                    "plugin-name"
                  ]
                },
                "content": "# Initialize Plugin\n\nCreate the standard directory structure and files for a new Claude Code plugin.\n\n## Arguments\n\n- `$1` (required): Plugin name in kebab-case (e.g., `my-awesome-plugin`)\n\n## What This Command Does\n\n1. Creates the plugin directory structure:\n   - `.claude-plugin/` with `plugin.json`\n   - `commands/` directory\n   - `agents/` directory\n   - `skills/` directory\n   - `hooks/` directory with `hooks.json`\n   - `scripts/` directory\n2. Generates a starter `plugin.json` with the provided name\n3. Creates a README.md template\n4. Provides next steps\n\n## Instructions\n\n### Validation\n\nFirst, validate the plugin name:\n- Must be provided (not empty)\n- Should be kebab-case (lowercase with hyphens)\n- Should not contain spaces or special characters\n\nIf validation fails, explain the requirements and ask for a valid name.\n\n### Create Directory Structure\n\nCreate these directories:\n```\n$1/\nâ”œâ”€â”€ .claude-plugin/\nâ”œâ”€â”€ commands/\nâ”œâ”€â”€ agents/\nâ”œâ”€â”€ skills/\nâ”œâ”€â”€ hooks/\nâ””â”€â”€ scripts/\n```\n\n### Create plugin.json\n\nCreate `.claude-plugin/plugin.json` with this template:\n\n```json\n{\n  \"name\": \"$1\",\n  \"version\": \"0.1.0\",\n  \"description\": \"Brief description of what this plugin does\",\n  \"author\": {\n    \"name\": \"Your Name\",\n    \"email\": \"you@example.com\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"keyword1\", \"keyword2\"]\n}\n```\n\n### Create hooks.json\n\nCreate `hooks/hooks.json` with a basic structure:\n\n```json\n{\n  \"description\": \"Plugin hooks\",\n  \"hooks\": {}\n}\n```\n\n### Create README.md\n\nCreate `README.md` with this template:\n\n```markdown\n# $1\n\n[Brief description of what this plugin does]\n\n## Installation\n\n```bash\n/plugin install $1@marketplace-name\n```\n\n## Commands\n\n[List commands here]\n\n## Usage\n\n[Provide examples]\n```\n\n### Create Validation Script\n\nCreate `scripts/validate-plugin.sh` with executable permissions:\n\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\n# Basic plugin structure validation\n[ -f \".claude-plugin/plugin.json\" ] || { echo \"Missing plugin.json\" >&2; exit 2; }\nexit 0\n```\n\nMake it executable: `chmod +x scripts/validate-plugin.sh`\n\n## Next Steps\n\nAfter scaffolding, provide these instructions to the user:\n\n```\nâœ“ Plugin scaffolded at $1/\n\nNext steps:\n1. Edit $1/.claude-plugin/plugin.json with your metadata\n2. Add components:\n   - /plugin-development:add-command <name> <description>\n   - /plugin-development:add-skill <name> <description>\n   - /plugin-development:add-agent <name> <description>\n3. Validate: /plugin-development:validate\n4. Test locally: /plugin-development:test-local\n```\n\n## Example\n\n**Input**: `/plugin-development:init my-awesome-plugin`\n\n**Result**:\n- Creates `my-awesome-plugin/` with full structure\n- Generates starter files\n- Displays next steps\n\n## Notes\n\n- The command creates the plugin directory in the current working directory\n- All paths in generated files are relative (use `./`)\n- The plugin is not yet installed; use `/plugin-development:test-local` to test it"
              },
              {
                "name": "/test-local",
                "description": "Create a local dev marketplace and install the plugin for testing",
                "path": "plugins/plugin-development/commands/test-local.md",
                "frontmatter": {
                  "description": "Create a local dev marketplace and install the plugin for testing"
                },
                "content": "# Test Plugin Locally\n\nSet up a development marketplace for local testing and install the current plugin.\n\n## Prerequisites\n\n- Must be run from a plugin root directory (containing `.claude-plugin/plugin.json`)\n- Plugin should pass validation (run `/plugin-development:validate` first)\n\n## Instructions\n\n### What This Command Does\n\n1. Creates a sibling `dev-marketplace/` directory (if it doesn't exist)\n2. Generates `dev-marketplace/.claude-plugin/marketplace.json` pointing to your plugin\n3. Provides instructions for:\n   - Adding the marketplace to Claude Code\n   - Installing the plugin\n   - Testing workflow (edit â†’ reinstall â†’ test loop)\n\n### Step 1: Read Plugin Metadata\n\nRead `.claude-plugin/plugin.json` to get:\n- Plugin name\n- Plugin description\n- Plugin version\n\n### Step 2: Determine Plugin Path\n\nGet the current plugin directory path. Common patterns:\n- Current working directory\n- From the location of plugin.json\n\nThe marketplace source path should be relative from marketplace to plugin:\n- If plugin is at `/path/to/my-plugin/`\n- Dev marketplace at `/path/to/dev-marketplace/`\n- Source path: `../my-plugin`\n\n### Step 3: Create Dev Marketplace Structure\n\n1. Create directory: `../dev-marketplace/.claude-plugin/`\n2. Create `marketplace.json` at `../dev-marketplace/.claude-plugin/marketplace.json`\n\n### Step 4: Generate marketplace.json\n\nCreate with this structure:\n\n```json\n{\n  \"name\": \"dev-marketplace\",\n  \"owner\": {\n    \"name\": \"Developer\"\n  },\n  \"metadata\": {\n    \"description\": \"Local development marketplace for testing plugins\",\n    \"version\": \"0.1.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"<plugin-name-from-plugin.json>\",\n      \"description\": \"<description-from-plugin.json>\",\n      \"version\": \"<version-from-plugin.json>\",\n      \"source\": \"../<plugin-directory-name>\"\n    }\n  ]\n}\n```\n\n**Important**: The `source` path is relative from marketplace to plugin directory.\n\n### Step 5: Provide Testing Instructions\n\nDisplay clear instructions for the user:\n\n```\nâœ… Dev marketplace created at ../dev-marketplace/\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸš€ Testing Workflow\n\n1ï¸âƒ£  ADD MARKETPLACE (First time only)\n   /plugin marketplace add ../dev-marketplace\n\n   Verify:\n   /plugin marketplace list\n\n2ï¸âƒ£  INSTALL PLUGIN\n   /plugin install <plugin-name>@dev-marketplace\n\n   Verify:\n   /help\n   (Your commands should appear)\n\n3ï¸âƒ£  TEST COMMANDS\n   /<plugin-name>:<command-name> [args]\n\n   Examples:\n   /<plugin-name>:command1\n   /<plugin-name>:command2 arg\n\n4ï¸âƒ£  ITERATION LOOP (After making changes)\n\n   a. Edit your plugin files\n   b. Validate: /plugin-development:validate\n   c. Uninstall: /plugin uninstall <plugin-name>@dev-marketplace\n   d. Reinstall: /plugin install <plugin-name>@dev-marketplace\n   e. Test again: /<plugin-name>:command-name\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸ’¡ Tips\n\n- Must uninstall/reinstall to pick up changes\n- Use /plugin-development:validate before each test\n- Check /agents to see if your agents appear\n- Use claude --debug to see plugin loading details\n- Run hooks/scripts directly to test them: ./scripts/validate.sh\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸ“¦ Marketplace Location\nPath: ../dev-marketplace/\nConfig: ../dev-marketplace/.claude-plugin/marketplace.json\n\nPlugin reference:\n- Name: <plugin-name>\n- Source: ../<plugin-directory>\n```\n\n## Example\n\n**Input**: `/plugin-development:test-local`\n\n(Run from `/path/to/my-plugin/`)\n\n**Output**:\n```\nâœ… Dev marketplace created at ../dev-marketplace/\n\nRegistered plugin: my-plugin\nSource path: ../my-plugin\n\nNext: /plugin marketplace add ../dev-marketplace\nThen: /plugin install my-plugin@dev-marketplace\n```\n\n## Handling Existing Marketplace\n\nIf `../dev-marketplace/.claude-plugin/marketplace.json` already exists:\n\n### Option 1: Update Existing (Recommended)\n\n1. Read existing marketplace.json\n2. Check if current plugin already registered\n3. If yes: Update the entry\n4. If no: Append to plugins array\n5. Write back to file\n\n### Option 2: Ask User\n\n```\nâš ï¸  Dev marketplace already exists at ../dev-marketplace/\n\nCurrent plugins registered:\n- plugin-a\n- plugin-b\n\nWould you like to:\n1. Add <current-plugin> to existing marketplace\n2. Replace existing marketplace.json\n3. Cancel\n\n(Auto-select option 1 for smooth workflow)\n```\n\n## Marketplace Structure Reference\n\n```\ndev-marketplace/\nâ””â”€â”€ .claude-plugin/\n    â””â”€â”€ marketplace.json\n```\n\n**marketplace.json**:\n```json\n{\n  \"name\": \"dev-marketplace\",\n  \"owner\": {\n    \"name\": \"Developer\"\n  },\n  \"metadata\": {\n    \"description\": \"Local development marketplace\",\n    \"version\": \"0.1.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"plugin-name\",\n      \"description\": \"Plugin description\",\n      \"version\": \"1.0.0\",\n      \"source\": \"../plugin-name\"\n    }\n  ]\n}\n```\n\n## Testing Multiple Plugins\n\nIf user has multiple plugins, the dev marketplace can reference them all:\n\n```json\n{\n  \"plugins\": [\n    {\n      \"name\": \"plugin-one\",\n      \"source\": \"../plugin-one\"\n    },\n    {\n      \"name\": \"plugin-two\",\n      \"source\": \"../plugin-two\"\n    }\n  ]\n}\n```\n\nInstall separately:\n```\n/plugin install plugin-one@dev-marketplace\n/plugin install plugin-two@dev-marketplace\n```\n\n## Troubleshooting Tips\n\nInclude these in the output:\n\n```\nðŸ”§ Troubleshooting\n\nPlugin not loading?\nâ–¡ Check /plugin list to verify installation\nâ–¡ Verify plugin.json paths are relative (./commands/)\nâ–¡ Run /plugin-development:validate\n\nCommands not showing?\nâ–¡ Check /help for command list\nâ–¡ Verify commands/ directory has .md files\nâ–¡ Ensure frontmatter has description field\nâ–¡ Reinstall the plugin\n\nSkills not triggering?\nâ–¡ Check SKILL.md frontmatter name matches directory\nâ–¡ Verify description has clear trigger conditions\nâ–¡ Skills auto-activate based on context\n\nHooks not running?\nâ–¡ Make scripts executable: chmod +x scripts/*.sh\nâ–¡ Use ${CLAUDE_PLUGIN_ROOT} in hook commands\nâ–¡ Test script directly: ./scripts/script-name.sh\nâ–¡ Check claude --debug for hook execution logs\n```\n\n## Advanced: Custom Marketplace Location\n\nIf user wants marketplace elsewhere:\n\n```\nYou can specify a custom location:\n1. Create marketplace structure anywhere\n2. Update source paths accordingly\n3. Add marketplace: /plugin marketplace add /path/to/marketplace\n\nExample for repo root:\n- Plugin: /repo/plugins/my-plugin/\n- Marketplace: /repo/dev-marketplace/\n- Source path: ../plugins/my-plugin\n```\n\n## Validation Before Testing\n\nRemind user to validate:\n\n```\nâš¡ Quick Check\n\nBefore testing, validate your plugin:\n/plugin-development:validate\n\nThis catches common issues:\n- Invalid JSON\n- Path errors\n- Naming mismatches\n- Missing files\n```\n\n## Complete Workflow Example\n\nShow a complete example session:\n\n```\nðŸ“ Complete Testing Session\n\n# Initial setup (once)\n$ cd my-plugin/\n$ /plugin-development:validate\nâœ… Validation passed\n\n$ /plugin-development:test-local\nâœ… Dev marketplace created\n\n$ /plugin marketplace add ../dev-marketplace\nâœ… Marketplace added\n\n$ /plugin install my-plugin@dev-marketplace\nâœ… Plugin installed\n\n$ /help\nCommands:\n  /my-plugin:command1 - Does something\n  /my-plugin:command2 - Does another thing\n\n$ /my-plugin:command1\n[Command executes successfully]\n\n# After making changes\n$ [edit files]\n\n$ /plugin-development:validate\nâœ… Validation passed\n\n$ /plugin uninstall my-plugin@dev-marketplace\nâœ… Plugin uninstalled\n\n$ /plugin install my-plugin@dev-marketplace\nâœ… Plugin installed\n\n$ /my-plugin:command1\n[Tests updated functionality]\n```\n\n## Notes\n\n- The dev marketplace is for **local testing only**\n- Do not commit `dev-marketplace/` to your plugin repository\n- For team distribution, create a proper marketplace repository\n- The source path must be relative from marketplace to plugin\n- Must uninstall/reinstall to pick up plugin changes\n\n## After Testing\n\nWhen ready for team distribution:\n\n```\nâœ… Plugin tested successfully!\n\nReady for team distribution:\n1. Create a proper marketplace repository\n2. Add your plugin to the marketplace\n3. Commit and push to GitHub\n4. Team installs via: /plugin marketplace add your-org/marketplace-repo\n5. Or configure in .claude/settings.json for auto-install\n```\n\n## Best Practices\n\n1. **Validate first**: Always run `/plugin-development:validate` before testing\n2. **Clean reinstalls**: Uninstall fully before reinstalling\n3. **Test all components**: Commands, skills, agents, hooks\n4. **Incremental changes**: Test small changes frequently\n5. **Debug mode**: Use `claude --debug` when troubleshooting\n6. **Direct testing**: Test hook scripts directly before installing\n\n## Related Commands\n\n- `/plugin-development:validate` - Validate before testing\n- `/plugin-development:init` - Scaffold new plugin\n- `/plugin marketplace list` - See available marketplaces\n- `/plugin list` - See installed plugins\n- `/help` - See available commands"
              },
              {
                "name": "/validate",
                "description": "Validate plugin structure, manifest, and component files for common issues",
                "path": "plugins/plugin-development/commands/validate.md",
                "frontmatter": {
                  "description": "Validate plugin structure, manifest, and component files for common issues"
                },
                "content": "# Validate Plugin\n\nComprehensive validation of plugin structure, configuration, and components.\n\n## Prerequisites\n\n- Must be run from a plugin root directory (containing `.claude-plugin/plugin.json`)\n\n## Instructions\n\n### What This Command Does\n\nPerforms a thorough validation of the plugin:\n\n1. **Structure validation**: Check directories and files exist\n2. **Manifest validation**: Verify plugin.json is valid and complete\n3. **Component validation**: Check commands, agents, skills, hooks\n4. **Path validation**: Ensure all paths are relative and resolve correctly\n5. **Naming validation**: Verify kebab-case conventions\n6. **Common issues**: Flag typical mistakes\n\n### Validation Steps\n\n#### 1. Check Core Structure\n\nVerify these exist:\n```\nâ–¡ .claude-plugin/plugin.json\nâ–¡ At least one component directory (commands/, agents/, skills/, or hooks/)\n```\n\n#### 2. Validate plugin.json\n\nRead and check:\n- **Valid JSON**: Can parse without errors\n- **Required fields present**: `name`, `version`, `description`\n- **Name format**: kebab-case (lowercase with hyphens)\n- **Version format**: Valid SemVer (e.g., \"1.0.0\")\n- **Paths are relative**: Start with `./` not `/`\n- **Author format**: If present, valid object or string\n\nExample valid structure:\n```json\n{\n  \"name\": \"plugin-name\",\n  \"version\": \"1.0.0\",\n  \"description\": \"What the plugin does\",\n  \"author\": {\n    \"name\": \"Your Name\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"keyword1\"],\n  \"commands\": \"./commands/\",\n  \"agents\": \"./agents/\",\n  \"hooks\": \"./hooks/hooks.json\"\n}\n```\n\n#### 3. Validate Component Paths\n\nFor each path in plugin.json:\n- **commands**: Check directory exists, contains .md files\n- **agents**: Check directory exists, contains .md files\n- **skills**: Check directory exists, contains skill folders with SKILL.md\n- **hooks**: Check file exists and is valid JSON\n\n#### 4. Validate Commands\n\nFor each file in `commands/`:\n- **File extension**: Must be .md\n- **Frontmatter present**: Has `---` delimiters\n- **Description field**: Frontmatter includes `description`\n- **Naming**: kebab-case filename\n- **Content**: Not empty after frontmatter\n\n#### 5. Validate Skills\n\nFor each directory in `skills/`:\n- **SKILL.md exists**: In uppercase\n- **Frontmatter present**: Has `---` delimiters\n- **Required fields**: `name` and `description` present\n- **Name matches directory**: Exact match, kebab-case\n- **Description is specific**: Includes when/why to use\n\n#### 6. Validate Agents\n\nFor each file in `agents/`:\n- **File extension**: Must be .md\n- **Frontmatter present**: Has `---` delimiters\n- **Description field**: Present in frontmatter\n- **Naming**: kebab-case filename\n- **Content**: Not empty after frontmatter\n\n#### 7. Validate Hooks\n\nIf `hooks.json` exists:\n- **Valid JSON**: Can parse without errors\n- **Proper structure**: Has `hooks` object\n- **Event names**: Valid events (PreToolUse, PostToolUse, etc.)\n- **Hook commands**: Scripts use `${CLAUDE_PLUGIN_ROOT}`\n- **Scripts exist**: Referenced scripts are present\n- **Scripts executable**: Have execute permissions\n\n### Validation Output Format\n\nReport findings in this structure:\n\n```\nðŸ” Validating plugin: <plugin-name>\n\nâœ… Structure\n  âœ“ .claude-plugin/plugin.json exists\n  âœ“ Component directories present\n\nâœ… Manifest (plugin.json)\n  âœ“ Valid JSON\n  âœ“ Required fields: name, version, description\n  âœ“ Name format: kebab-case\n  âœ“ Version format: SemVer\n  âœ“ Paths are relative\n\nâœ… Commands (3 files)\n  âœ“ commands/init.md\n  âœ“ commands/validate.md\n  âœ“ commands/test-local.md\n\nâœ… Skills (1 skill)\n  âœ“ skills/plugin-authoring/SKILL.md\n    - name matches directory: âœ“\n    - description present: âœ“\n\nâœ… Agents (1 agent)\n  âœ“ agents/plugin-reviewer.md\n\nâœ… Hooks\n  âœ“ hooks/hooks.json is valid\n  âœ“ Scripts exist and are executable\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâœ… Validation passed: 0 errors, 0 warnings\n```\n\n### Error Reporting\n\nIf issues are found, report clearly:\n\n```\nâŒ Errors Found\n\n1. Manifest: plugin.json missing required field \"version\"\n   Fix: Add \"version\": \"1.0.0\" to .claude-plugin/plugin.json\n\n2. Command: commands/myCommand.md uses camelCase\n   Fix: Rename to commands/my-command.md (kebab-case)\n\n3. Skill: skills/MySkill/SKILL.md name doesn't match directory\n   Fix: Change frontmatter 'name' to \"my-skill\" (matches directory)\n\nâš ï¸  Warnings\n\n1. No README.md found\n   Suggestion: Create README.md with usage documentation\n\n2. No keywords in plugin.json\n   Suggestion: Add keywords array for discoverability\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâŒ Validation failed: 3 errors, 2 warnings\n```\n\n## Validation Categories\n\n### Critical (Must Fix)\n\n- Missing plugin.json\n- Invalid JSON in config files\n- Missing required fields (name, version, description)\n- Absolute paths in configuration\n- Component name mismatches (skill name â‰  directory)\n- Non-executable hook scripts\n\n### Warnings (Should Fix)\n\n- Missing README.md\n- No keywords in plugin.json\n- Empty component directories\n- Commands missing argument-hint\n- Skills without progressive disclosure structure\n\n### Suggestions (Nice to Have)\n\n- Add CHANGELOG.md\n- Include examples directory\n- Add more descriptive descriptions\n- Use consistent naming patterns\n\n## Common Issues Detected\n\n### Issue: Paths Not Relative\n\n```json\nâŒ \"commands\": \"/Users/you/plugin/commands/\"\nâœ… \"commands\": \"./commands/\"\n```\n\n### Issue: Name Mismatch\n\n```\nDirectory: skills/code-review/\nFrontmatter: name: codeReview\nâŒ Names don't match\n\nFix: Change frontmatter to name: code-review\n```\n\n### Issue: Missing Frontmatter\n\n```markdown\n# My Command\n\nInstructions...\n```\nâŒ No frontmatter with description\n\n```markdown\n---\ndescription: What this command does\n---\n\n# My Command\n\nInstructions...\n```\nâœ… Has required frontmatter\n\n### Issue: Hook Script Not Executable\n\n```bash\n$ ls -l scripts/validate.sh\n-rw-r--r--  validate.sh\nâŒ Not executable\n\n$ chmod +x scripts/validate.sh\nâœ… Now executable\n```\n\n## Validation Checklist\n\nComplete checklist used for validation:\n\n```\nStructure:\nâ–¡ .claude-plugin/plugin.json exists\nâ–¡ At least one component directory present\nâ–¡ README.md exists\n\nManifest:\nâ–¡ Valid JSON syntax\nâ–¡ name field: present, kebab-case\nâ–¡ version field: present, valid SemVer\nâ–¡ description field: present, non-empty\nâ–¡ Paths are relative (start with ./)\nâ–¡ Referenced paths exist\n\nCommands:\nâ–¡ .md extension\nâ–¡ Frontmatter with description\nâ–¡ kebab-case naming\nâ–¡ Non-empty content\n\nSkills:\nâ–¡ Directory structure (skill-name/SKILL.md)\nâ–¡ SKILL.md in uppercase\nâ–¡ Frontmatter with name and description\nâ–¡ Name matches directory (exact, kebab-case)\n\nAgents:\nâ–¡ .md extension\nâ–¡ Frontmatter with description\nâ–¡ kebab-case naming\nâ–¡ Non-empty content\n\nHooks:\nâ–¡ hooks.json valid JSON\nâ–¡ Proper structure (hooks object)\nâ–¡ Valid event names\nâ–¡ Scripts use ${CLAUDE_PLUGIN_ROOT}\nâ–¡ Scripts exist\nâ–¡ Scripts are executable (chmod +x)\n```\n\n## After Validation\n\n### If Validation Passes\n\n```\nâœ… Plugin is valid and ready for testing!\n\nNext steps:\n1. Test locally: /plugin-development:test-local\n2. Create dev marketplace and install\n3. Test all commands and features\n4. Register in team marketplace when ready\n```\n\n### If Validation Fails\n\n```\nâŒ Please fix the errors above before testing.\n\nNeed help?\n- Review error messages for specific fixes\n- Check best practices: /plugin-development:help\n- Common issues documented in examples\n```\n\n## Example Usage\n\n**Input**: `/plugin-development:validate`\n\n**Output**:\n```\nðŸ” Validating plugin: my-awesome-plugin\n\nâœ… All checks passed\nâœ“ Structure correct\nâœ“ Manifest valid\nâœ“ 5 commands validated\nâœ“ 2 skills validated\nâœ“ 1 agent validated\nâœ“ Hooks configured correctly\n\nâœ… Plugin ready for testing!\n```\n\n## Best Practices\n\n1. **Validate often**: Run before testing or commits\n2. **Fix errors first**: Address critical issues before warnings\n3. **Read messages carefully**: Each error includes fix instructions\n4. **Use debug mode**: Run `claude --debug` for deep inspection\n5. **Incremental fixes**: Fix and re-validate one issue at a time\n\n## Notes\n\n- This command only reads files (no modifications)\n- Validation is comprehensive but not exhaustive\n- Some issues may only appear during runtime testing\n- Always test in a dev marketplace after validation passes"
              }
            ],
            "skills": [
              {
                "name": "plugin-authoring",
                "description": "Use when creating, modifying, or debugging Claude Code plugins. Triggers on .claude-plugin/, plugin.json, marketplace.json, commands/, agents/, skills/, hooks/ directories. Provides schemas, templates, validation workflows, and troubleshooting.",
                "path": "plugins/plugin-development/skills/plugin-authoring/SKILL.md",
                "frontmatter": {
                  "name": "plugin-authoring",
                  "description": "Use when creating, modifying, or debugging Claude Code plugins. Triggers on .claude-plugin/, plugin.json, marketplace.json, commands/, agents/, skills/, hooks/ directories. Provides schemas, templates, validation workflows, and troubleshooting.",
                  "allowed-tools": "Read, Grep, Glob"
                },
                "content": "# Plugin Authoring (Skill)\n\nYou are the canonical guide for Claude Code plugin development. Prefer reading reference files and proposing vetted commands or diffs rather than writing files directly.\n\n**Official documentation**: For Anthropic's official skill authoring best practices, see https://docs.anthropic.com/en/docs/agents-and-tools/agent-skills/skill-authoring-best-practices\n\n## Triggers & Scope\n\nActivate whenever context includes `.claude-plugin/`, `plugin.json`, `marketplace.json`, `commands/`, `agents/`, `skills/`, or `hooks/`.\n\n## Flow of Operation\n\n1. **Diagnose** current repo layout (read-only)\n2. **Propose** the minimal safe action (scaffold, validate, or review)\n3. **Execute** via `/plugin-development:...` commands when the user agrees\n4. **Escalate** to the **plugin-reviewer** agent for deep audits\n5. **Guardrails**: default to read-only; ask before edits\n\n## Quick Links (Progressive Disclosure)\n\n- **Schemas**: [schemas/plugin-manifest.md](schemas/plugin-manifest.md), [schemas/hooks-schema.md](schemas/hooks-schema.md), [schemas/marketplace-schema.md](schemas/marketplace-schema.md)\n- **Templates**: [templates/](templates/)\n- **Examples**: [examples/](examples/)\n- **Best practices**: [best-practices/](best-practices/)\n- **Common mistakes**: [best-practices/common-mistakes.md](best-practices/common-mistakes.md)\n- **Testing this skill**: [testing-plugin-authoring.md](testing-plugin-authoring.md)\n\n## Checklists\n\n### Component Checklist\n\n```\nâ–¡ .claude-plugin/plugin.json exists (required)\nâ–¡ Component dirs at plugin root (commands/, agents/, skills/, hooks/)\nâ–¡ Do NOT put components inside .claude-plugin/ directory\nâ–¡ Commands use kebab-case naming\nâ–¡ Skills have valid frontmatter (name + description required, optional: model, allowed-tools)\nâ–¡ Skills name validation:\n  - Matches directory name\n  - Lowercase letters, numbers, hyphens only\n  - Max 64 characters\n  - No reserved words ('anthropic', 'claude')\n  - No XML tags\nâ–¡ Hooks use ${CLAUDE_PLUGIN_ROOT} for paths (not relative paths)\nâ–¡ All scripts are executable (chmod +x)\n```\n\n### Release Checklist\n\n```\nâ–¡ plugin.json: name/version/keywords present\nâ–¡ Do NOT include standard paths in component fields\nâ–¡ Local marketplace installs cleanly\nâ–¡ Validate with /plugin-development:validate\nâ–¡ Test all commands, skills, and hooks\nâ–¡ README.md exists with usage examples\n```\n\n## Red Flags (STOP If You're About To...)\n\n- Put `commands/`, `agents/`, `skills/`, or `hooks/` inside `.claude-plugin/` â†’ **WRONG LOCATION** (components go at plugin root)\n- Add `\"commands\": \"./commands/\"` to plugin.json â†’ **UNNECESSARY** (standard directories auto-discovered, this breaks things)\n- Use relative paths like `./scripts/format.sh` in hooks â†’ **USE** `${CLAUDE_PLUGIN_ROOT}/scripts/format.sh`\n- Skip `/plugin-development:validate` before testing â†’ **ALWAYS VALIDATE FIRST**\n- Forget `chmod +x` on hook scripts â†’ **Scripts won't execute (silent failure)**\n- Use 'claude' or 'anthropic' in skill names â†’ **RESERVED WORDS (will be rejected)**\n\n**All of these cause silent failures. When in doubt, validate.**\n\nFor detailed explanations: [best-practices/common-mistakes.md](best-practices/common-mistakes.md)\n\n## Why Validation Matters\n\n| Skip This | What Happens |\n|-----------|--------------|\n| Validate manifest | Plugin won't load, no error message |\n| chmod +x scripts | Hooks silently fail |\n| ${CLAUDE_PLUGIN_ROOT} | Works in dev, breaks on install |\n| Standard directory rules | Components not discovered |\n\n**Running `/plugin-development:validate` catches 90% of issues before debugging starts.**\n\n## Playbooks\n\n- **Scaffold** â†’ `/plugin-development:init <name>` then fill templates\n- **Add a component** â†’ `/plugin-development:add-command|add-skill|add-agent|add-hook`\n- **Validate** â†’ `/plugin-development:validate` (schema & structure checks)\n- **Test locally** â†’ `/plugin-development:test-local` (dev marketplace)\n\n## Common Workflows\n\n### Creating a New Plugin\n\n1. Run `/plugin-development:init <plugin-name>` to scaffold structure\n2. Edit `.claude-plugin/plugin.json` with your metadata\n3. Add components using `/plugin-development:add-command`, etc.\n4. Validate with `/plugin-development:validate`\n5. Test locally with `/plugin-development:test-local`\n\n### Adding a Slash Command\n\n1. Run `/plugin-development:add-command <name> <description>`\n2. Edit `commands/<name>.md` with instructions\n3. Add frontmatter: `description` and `argument-hint`\n4. Test: `/plugin install` your plugin, then `/<name>`\n\n### Adding a Skill\n\n1. Run `/plugin-development:add-skill <name> <when-to-use>`\n2. Edit `skills/<name>/SKILL.md` with your instructions\n3. **Frontmatter requirements**:\n   - `name`: lowercase letters, numbers, and hyphens only, max 64 chars (required). Cannot contain reserved words 'anthropic' or 'claude'. Cannot contain XML tags.\n   - `description`: include both WHAT the Skill does AND WHEN to use it, max 1024 chars (required). Cannot contain XML tags.\n   - `model`: specify which Claude model to use, e.g., `model: claude-sonnet-4-20250514` (optional, defaults to conversation's model)\n   - `allowed-tools`: comma-separated list of tools (optional). Tools listed don't require permission to use when Skill is active. If omitted, Skill doesn't restrict tools.\n4. Keep SKILL.md under 500 lines for optimal performance; place details in sibling files (reference.md, examples.md, scripts/)\n\n### Troubleshooting\n\n- **Plugin not loading?** Check `plugin.json` paths are relative to plugin root. Do NOT include `commands`, `agents`, `skills`, or `hooks` fields for standard directories.\n- **Commands not showing?** Verify `commands/` directory exists at plugin root with `.md` files. Do NOT add `commands` field to `plugin.json` for standard paths.\n- **Hooks not running?** Ensure scripts are executable (`chmod +x`) and use `${CLAUDE_PLUGIN_ROOT}` for paths\n- **Skill not triggering?** Check `name` matches directory and uses lowercase letters, numbers, and hyphens only (max 64 chars). Ensure `description` includes both what and when to use (max 1024 chars). Neither field can contain XML tags.\n\n## Notes\n\n- Prefer templates & scripts over freeform generation for deterministic tasks\n- If writes are needed, propose a command or a PR-style diff first\n- For complex audits, delegate to `/agents plugin-reviewer`\n- Always validate with `/plugin-development:validate` before testing"
              }
            ]
          }
        ]
      }
    }
  ]
}