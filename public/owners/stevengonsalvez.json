{
  "owner": {
    "id": "stevengonsalvez",
    "display_name": "Steven Gonsalvez",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/9320602?u=ef9243fa967f76247da68f3d53170ddca539ef31&v=4",
    "url": "https://github.com/stevengonsalvez",
    "bio": null,
    "stats": {
      "total_repos": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 1,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "stevengonsalvez/agent-bridge",
      "url": "https://github.com/stevengonsalvez/agent-bridge",
      "description": null,
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-09T14:26:11Z",
        "created_at": "2025-12-29T23:38:39Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 818
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 642
        },
        {
          "path": ".claude",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/skills/debug-bridge.md",
          "type": "blob",
          "size": 4978
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 216
        },
        {
          "path": ".prettierrc",
          "type": "blob",
          "size": 106
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 10106
        },
        {
          "path": "apps",
          "type": "tree",
          "size": null
        },
        {
          "path": "apps/sample-react-app",
          "type": "tree",
          "size": null
        },
        {
          "path": "apps/sample-react-app/index.html",
          "type": "blob",
          "size": 306
        },
        {
          "path": "apps/sample-react-app/package.json",
          "type": "blob",
          "size": 591
        },
        {
          "path": "apps/sample-react-app/src",
          "type": "tree",
          "size": null
        },
        {
          "path": "apps/sample-react-app/src/App.tsx",
          "type": "blob",
          "size": 3970
        },
        {
          "path": "apps/sample-react-app/src/debug-bridge.ts",
          "type": "blob",
          "size": 1031
        },
        {
          "path": "apps/sample-react-app/src/main.tsx",
          "type": "blob",
          "size": 435
        },
        {
          "path": "apps/sample-react-app/src/store.ts",
          "type": "blob",
          "size": 1165
        },
        {
          "path": "apps/sample-react-app/src/styles.css",
          "type": "blob",
          "size": 1158
        },
        {
          "path": "apps/sample-react-app/src/vite-env.d.ts",
          "type": "blob",
          "size": 38
        },
        {
          "path": "apps/sample-react-app/tsconfig.json",
          "type": "blob",
          "size": 183
        },
        {
          "path": "apps/sample-react-app/vite.config.ts",
          "type": "blob",
          "size": 162
        },
        {
          "path": "docs",
          "type": "tree",
          "size": null
        },
        {
          "path": "docs/architecture.md",
          "type": "blob",
          "size": 20856
        },
        {
          "path": "package.json",
          "type": "blob",
          "size": 588
        },
        {
          "path": "packages",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/browser",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/browser/README.md",
          "type": "blob",
          "size": 4790
        },
        {
          "path": "packages/browser/package.json",
          "type": "blob",
          "size": 957
        },
        {
          "path": "packages/browser/src",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/browser/src/bridge.ts",
          "type": "blob",
          "size": 4891
        },
        {
          "path": "packages/browser/src/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/browser/src/commands/executor.ts",
          "type": "blob",
          "size": 11339
        },
        {
          "path": "packages/browser/src/index.ts",
          "type": "blob",
          "size": 125
        },
        {
          "path": "packages/browser/src/telemetry",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/browser/src/telemetry/console-hook.ts",
          "type": "blob",
          "size": 1414
        },
        {
          "path": "packages/browser/src/telemetry/dom-observer.ts",
          "type": "blob",
          "size": 2107
        },
        {
          "path": "packages/browser/src/telemetry/error-hook.ts",
          "type": "blob",
          "size": 1465
        },
        {
          "path": "packages/browser/src/telemetry/ui-tree.ts",
          "type": "blob",
          "size": 5033
        },
        {
          "path": "packages/browser/tsconfig.json",
          "type": "blob",
          "size": 191
        },
        {
          "path": "packages/browser/tsup.config.ts",
          "type": "blob",
          "size": 205
        },
        {
          "path": "packages/cli",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/cli/README.md",
          "type": "blob",
          "size": 3480
        },
        {
          "path": "packages/cli/package.json",
          "type": "blob",
          "size": 1075
        },
        {
          "path": "packages/cli/src",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/cli/src/bin",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/cli/src/bin/cli.ts",
          "type": "blob",
          "size": 2969
        },
        {
          "path": "packages/cli/src/index.ts",
          "type": "blob",
          "size": 134
        },
        {
          "path": "packages/cli/src/input",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/cli/src/input/stdin-handler.ts",
          "type": "blob",
          "size": 6029
        },
        {
          "path": "packages/cli/src/output",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/cli/src/output/formatter.ts",
          "type": "blob",
          "size": 9171
        },
        {
          "path": "packages/cli/src/server",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/cli/src/server/websocket-server.ts",
          "type": "blob",
          "size": 4793
        },
        {
          "path": "packages/cli/tsconfig.json",
          "type": "blob",
          "size": 145
        },
        {
          "path": "packages/cli/tsup.config.ts",
          "type": "blob",
          "size": 238
        },
        {
          "path": "packages/types",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/types/README.md",
          "type": "blob",
          "size": 2431
        },
        {
          "path": "packages/types/package.json",
          "type": "blob",
          "size": 827
        },
        {
          "path": "packages/types/src",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/types/src/config",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/types/src/config/index.ts",
          "type": "blob",
          "size": 694
        },
        {
          "path": "packages/types/src/constants.ts",
          "type": "blob",
          "size": 69
        },
        {
          "path": "packages/types/src/index.ts",
          "type": "blob",
          "size": 141
        },
        {
          "path": "packages/types/src/messages",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/types/src/messages/base.ts",
          "type": "blob",
          "size": 375
        },
        {
          "path": "packages/types/src/messages/commands.ts",
          "type": "blob",
          "size": 1763
        },
        {
          "path": "packages/types/src/messages/connection.ts",
          "type": "blob",
          "size": 385
        },
        {
          "path": "packages/types/src/messages/index.ts",
          "type": "blob",
          "size": 751
        },
        {
          "path": "packages/types/src/messages/results.ts",
          "type": "blob",
          "size": 541
        },
        {
          "path": "packages/types/src/messages/telemetry.ts",
          "type": "blob",
          "size": 1101
        },
        {
          "path": "packages/types/src/utils",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/types/src/utils/index.ts",
          "type": "blob",
          "size": 864
        },
        {
          "path": "packages/types/tsconfig.json",
          "type": "blob",
          "size": 175
        },
        {
          "path": "packages/types/tsup.config.ts",
          "type": "blob",
          "size": 205
        },
        {
          "path": "plans",
          "type": "tree",
          "size": null
        },
        {
          "path": "plans/implementation-plan.md",
          "type": "blob",
          "size": 55651
        },
        {
          "path": "pnpm-lock.yaml",
          "type": "blob",
          "size": 61774
        },
        {
          "path": "pnpm-workspace.yaml",
          "type": "blob",
          "size": 40
        },
        {
          "path": "prd.md",
          "type": "blob",
          "size": 22528
        },
        {
          "path": "scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "scripts/auto-login.mjs",
          "type": "blob",
          "size": 11917
        },
        {
          "path": "scripts/comprehensive-test.mjs",
          "type": "blob",
          "size": 14030
        },
        {
          "path": "scripts/launch-browser.js",
          "type": "blob",
          "size": 575
        },
        {
          "path": "scripts/test-shadow-dom.mjs",
          "type": "blob",
          "size": 5141
        },
        {
          "path": "scripts/test-type.mjs",
          "type": "blob",
          "size": 2241
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/debug-bridge",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/debug-bridge/SKILL.md",
          "type": "blob",
          "size": 16838
        },
        {
          "path": "spec.md",
          "type": "blob",
          "size": 35757
        },
        {
          "path": "tsconfig.base.json",
          "type": "blob",
          "size": 569
        },
        {
          "path": "turbo.json",
          "type": "blob",
          "size": 348
        }
      ],
      "marketplace": {
        "name": "agent-bridge-marketplace",
        "version": null,
        "description": "Browser automation and debugging plugins for AI agents",
        "owner_info": {
          "name": "stevengonsalvez",
          "url": "https://github.com/stevengonsalvez"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "debug-bridge",
            "description": "Browser automation and inspection toolkit for AI agents. Debug web apps, inspect UI, automate workflows, take screenshots.",
            "source": "./",
            "category": null,
            "version": "0.1.2",
            "author": {
              "name": "stevengonsalvez",
              "url": "https://github.com/stevengonsalvez"
            },
            "install_commands": [
              "/plugin marketplace add stevengonsalvez/agent-bridge",
              "/plugin install debug-bridge@agent-bridge-marketplace"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2026-01-09T14:26:11Z",
              "created_at": "2025-12-29T23:38:39Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "debug-bridge",
                "description": "Browser automation and inspection toolkit for AI agents. Debug web apps,\ninspect UI elements, automate workflows, take screenshots, click buttons,\ntype text, and interact with web applications via WebSocket.\n",
                "path": "skills/debug-bridge/SKILL.md",
                "frontmatter": {
                  "name": "debug-bridge",
                  "description": "Browser automation and inspection toolkit for AI agents. Debug web apps,\ninspect UI elements, automate workflows, take screenshots, click buttons,\ntype text, and interact with web applications via WebSocket.\n",
                  "aliases": [
                    "ui-inspector",
                    "browser-controller",
                    "web-automation",
                    "screenshot-tool",
                    "browser-debugger"
                  ],
                  "triggers": [
                    "debug the app",
                    "debug this app",
                    "inspect the UI",
                    "inspect the page",
                    "test the login flow",
                    "test the form",
                    "click the button",
                    "click this button",
                    "take a screenshot",
                    "screenshot the app",
                    "automate this workflow",
                    "automate the test",
                    "interact with the browser",
                    "interact with the web app",
                    "control the browser",
                    "fill in the form",
                    "type into the input",
                    "check the page state",
                    "get the DOM",
                    "run browser automation"
                  ],
                  "type": "cli-tool",
                  "capabilities": [
                    "click",
                    "type",
                    "hover",
                    "select",
                    "focus",
                    "scroll",
                    "navigate",
                    "evaluate",
                    "screenshot",
                    "inspect-dom",
                    "get-ui-tree",
                    "get-state"
                  ],
                  "prerequisites": {
                    "runtime": "node >= 18",
                    "packages": [
                      "debug-bridge-cli (npx debug-bridge-cli or npm install -g debug-bridge-cli)",
                      "debug-bridge-browser (npm install debug-bridge-browser)"
                    ]
                  },
                  "compatibility": {
                    "claude-code": "full",
                    "cursor": "full",
                    "codex": "limited (sandbox may restrict WebSocket)",
                    "copilot": "untested"
                  },
                  "protocol_version": 1,
                  "default_port": 4000
                },
                "content": "# Debug Bridge Skill\n\nEnables AI agents to inspect and control web applications via WebSocket. Use this skill when you need to debug, test, automate, or interact with a running web application.\n\n## When to Use This Skill\n\nUse debug-bridge when the user asks you to:\n- **Debug the app** - Inspect UI, check state, find issues\n- **Test a flow** - Login, checkout, form submission\n- **Automate interactions** - Click buttons, fill forms, navigate\n- **Take screenshots** - Capture current state for verification\n- **Inspect elements** - Get UI tree, DOM snapshot, element properties\n\n## Architecture Overview\n\n```\n┌─────────────┐     WebSocket      ┌─────────────┐     WebSocket      ┌─────────────┐\n│   AI Agent  │ ◄──────────────────► │  CLI Server │ ◄──────────────────►│   Browser   │\n│  (You/Claude)│   role=agent      │  (Port 4000) │   role=app         │  (Your App) │\n└─────────────┘                    └─────────────┘                    └─────────────┘\n```\n\n## Quick Start\n\n### Step 1: Start the Debug Server\n\n```bash\n# Using npx (recommended - no install needed)\nnpx debug-bridge-cli connect --session my-session\n\n# Or with custom port\nnpx debug-bridge-cli connect --session my-session --port 4001\n```\n\n**Expected output:**\n```\n[DebugBridge] Server listening on ws://localhost:4000\n[DebugBridge] Waiting for connections...\n[DebugBridge] Session: my-session\n```\n\n### Step 2: Open Browser with Debug Params\n\nThe web app must have `debug-bridge-browser` SDK installed and configured.\n\nNavigate to your app with query params:\n```\nhttp://localhost:5173?session=my-session&port=4000\n```\n\n**Expected console output in browser:**\n```\n[DebugBridge] Connecting to ws://localhost:4000/debug?role=app&sessionId=my-session\n[DebugBridge] Connected\n```\n\n### Step 3: Connect as Agent\n\n```javascript\nconst sessionId = 'my-session';\nconst ws = new WebSocket(`ws://localhost:4000/debug?role=agent&sessionId=${sessionId}`);\n\nws.onopen = () => console.log('Connected to debug bridge');\nws.onmessage = (event) => {\n  const msg = JSON.parse(event.data);\n  console.log('Received:', msg.type);\n};\n```\n\n## Connection Lifecycle\n\n### Messages You Will Receive\n\n1. **On browser connect** - `hello` message with app info:\n```json\n{\n  \"type\": \"hello\",\n  \"protocolVersion\": 1,\n  \"sessionId\": \"my-session\",\n  \"appName\": \"My App\",\n  \"url\": \"http://localhost:5173/\",\n  \"viewport\": { \"width\": 1920, \"height\": 1080 }\n}\n```\n\n2. **After hello** - `capabilities` message:\n```json\n{\n  \"type\": \"capabilities\",\n  \"capabilities\": [\"dom_snapshot\", \"dom_mutations\", \"ui_tree\", \"console\", \"errors\", \"eval\"]\n}\n```\n\n3. **Ongoing** - `console`, `error`, `state_update`, `dom_mutations` messages\n\n### Health Check Sequence\n\n**Before sending commands, verify the system is ready:**\n\n```javascript\nasync function healthCheck(ws, sessionId) {\n  return new Promise((resolve, reject) => {\n    const timeout = setTimeout(() => reject(new Error('Health check timeout')), 5000);\n\n    let serverReady = false;\n    let browserConnected = false;\n\n    ws.onmessage = (event) => {\n      const msg = JSON.parse(event.data);\n\n      if (msg.type === 'hello') {\n        browserConnected = true;\n        console.log('Browser connected:', msg.appName || msg.url);\n      }\n\n      if (msg.type === 'capabilities') {\n        serverReady = true;\n        console.log('Capabilities:', msg.capabilities);\n      }\n\n      if (serverReady && browserConnected) {\n        clearTimeout(timeout);\n        resolve({ serverReady, browserConnected, capabilities: msg.capabilities });\n      }\n    };\n\n    ws.onerror = (err) => {\n      clearTimeout(timeout);\n      reject(err);\n    };\n  });\n}\n```\n\n## Available Commands\n\nAll commands require base message fields:\n```javascript\nconst baseMessage = {\n  protocolVersion: 1,\n  sessionId: 'my-session',\n  timestamp: Date.now(),\n  requestId: crypto.randomUUID()  // For correlating responses\n};\n```\n\n### Element Targeting\n\nCommands that target elements accept:\n```typescript\ntype ElementTarget = {\n  stableId?: string;   // Preferred - stable across renders\n  selector?: string;   // CSS selector fallback\n  text?: string;       // Match by visible text\n  role?: string;       // ARIA role\n};\n```\n\n**Priority:** `stableId` > `selector` > `text + role`\n\n### Command Reference\n\n| Command | Description | Parameters | Returns |\n|---------|-------------|------------|---------|\n| `request_ui_tree` | Get all interactive elements | - | `UiTreeItem[]` |\n| `click` | Click an element | `target: ElementTarget` | `success: boolean` |\n| `type` | Type text into input | `target: ElementTarget, text: string, options?: {clear?, delay?, pressEnter?}` | `success: boolean` |\n| `hover` | Hover over element | `target: ElementTarget` | `success: boolean` |\n| `select` | Select option in dropdown | `target: ElementTarget, value?: string, label?: string, index?: number` | `success: boolean` |\n| `focus` | Focus an element | `target: ElementTarget` | `success: boolean` |\n| `scroll` | Scroll page or element | `target?: ElementTarget, x?: number, y?: number` | `success: boolean` |\n| `navigate` | Navigate to URL | `url: string` | `success: boolean` |\n| `evaluate` | Execute JavaScript | `code: string` | `result: any` |\n| `request_screenshot` | Capture viewport | `selector?: string, fullPage?: boolean` | Base64 PNG |\n| `request_state` | Get cookies/localStorage | `scope?: string` | State object |\n| `request_dom_snapshot` | Get full HTML | - | `html: string` |\n\n### Command Examples\n\n#### Get UI Tree\n```javascript\nws.send(JSON.stringify({\n  ...baseMessage,\n  type: 'request_ui_tree'\n}));\n// Response: { type: 'ui_tree', items: [...] }\n```\n\n#### Click Element\n```javascript\nws.send(JSON.stringify({\n  ...baseMessage,\n  type: 'click',\n  target: { stableId: 'submit-btn-abc123' }\n}));\n// Response: { type: 'command_result', success: true, requestId: '...' }\n```\n\n#### Type Text with Options\n```javascript\nws.send(JSON.stringify({\n  ...baseMessage,\n  type: 'type',\n  target: { selector: '#email-input' },\n  text: 'user@example.com',\n  options: {\n    clear: true,       // Clear existing text first\n    delay: 50,         // Delay between keystrokes (ms)\n    pressEnter: false  // Press Enter after typing\n  }\n}));\n```\n\n#### Select Dropdown Option\n```javascript\nws.send(JSON.stringify({\n  ...baseMessage,\n  type: 'select',\n  target: { selector: '#country-select' },\n  label: 'United States'  // Or: value: 'US', index: 5\n}));\n```\n\n#### Scroll\n```javascript\n// Scroll by pixels\nws.send(JSON.stringify({\n  ...baseMessage,\n  type: 'scroll',\n  y: 500  // Scroll down 500px\n}));\n\n// Scroll element into view\nws.send(JSON.stringify({\n  ...baseMessage,\n  type: 'scroll',\n  target: { stableId: 'footer-element' }\n}));\n```\n\n#### Execute JavaScript\n```javascript\nws.send(JSON.stringify({\n  ...baseMessage,\n  type: 'evaluate',\n  code: 'document.title'\n}));\n// Response: { type: 'command_result', result: 'My App Title' }\n```\n\n#### Screenshot\n```javascript\nws.send(JSON.stringify({\n  ...baseMessage,\n  type: 'request_screenshot',\n  fullPage: true  // Or selector: '#specific-element'\n}));\n// Response: { type: 'screenshot', data: 'base64...', width: 1920, height: 1080 }\n```\n\n## Error Handling\n\n### Error Codes\n\n| Code | Cause | Recovery Strategy |\n|------|-------|-------------------|\n| `TARGET_NOT_FOUND` | Element not in DOM | Call `request_ui_tree` to refresh, verify selector |\n| `TARGET_NOT_VISIBLE` | Element off-screen or hidden | `scroll` to element first, wait for animation |\n| `TARGET_DISABLED` | Element is disabled | Check preconditions, wait for enable |\n| `TIMEOUT` | Operation exceeded time limit | Retry with backoff, check if page is loading |\n| `EVAL_DISABLED` | JavaScript eval blocked | Feature not available, use alternative |\n| `EVAL_ERROR` | JavaScript execution failed | Check code syntax, handle exceptions |\n| `NAVIGATION_FAILED` | URL navigation failed | Verify URL, check network |\n| `INVALID_COMMAND` | Malformed command | Check command structure against spec |\n| `UNKNOWN_ERROR` | Unexpected error | Log details, retry |\n\n### Error Response Format\n\n```json\n{\n  \"type\": \"command_result\",\n  \"requestId\": \"abc123\",\n  \"requestType\": \"click\",\n  \"success\": false,\n  \"error\": {\n    \"code\": \"TARGET_NOT_FOUND\",\n    \"message\": \"Element with stableId 'btn-xyz' not found in DOM\"\n  },\n  \"duration\": 150\n}\n```\n\n### Recovery Patterns\n\n```javascript\nasync function clickWithRetry(ws, target, maxRetries = 3) {\n  for (let attempt = 0; attempt < maxRetries; attempt++) {\n    const result = await sendCommand(ws, { type: 'click', target });\n\n    if (result.success) return result;\n\n    if (result.error?.code === 'TARGET_NOT_FOUND') {\n      // Element may have re-rendered, refresh UI tree\n      await sendCommand(ws, { type: 'request_ui_tree' });\n      await delay(500);\n      continue;\n    }\n\n    if (result.error?.code === 'TARGET_NOT_VISIBLE') {\n      // Scroll element into view\n      await sendCommand(ws, { type: 'scroll', target });\n      await delay(300);\n      continue;\n    }\n\n    throw new Error(`Click failed: ${result.error?.message}`);\n  }\n  throw new Error('Max retries exceeded');\n}\n```\n\n## Workflow Patterns\n\n### Pattern: Login Flow\n\n```javascript\nasync function loginFlow(ws, email, password) {\n  // 1. Get UI tree to discover elements\n  const uiTree = await requestUiTree(ws);\n\n  // 2. Find form elements\n  const emailInput = uiTree.find(i =>\n    i.role === 'textbox' && (i.meta.name?.includes('email') || i.meta.placeholder?.includes('email'))\n  );\n  const passwordInput = uiTree.find(i =>\n    i.role === 'textbox' && i.meta.type === 'password'\n  );\n  const submitBtn = uiTree.find(i =>\n    i.role === 'button' && (i.text?.toLowerCase().includes('sign') || i.text?.toLowerCase().includes('log'))\n  );\n\n  if (!emailInput || !passwordInput || !submitBtn) {\n    throw new Error('Login form elements not found');\n  }\n\n  // 3. Enter credentials\n  await type(ws, emailInput.stableId, email, { clear: true });\n  await type(ws, passwordInput.stableId, password, { clear: true });\n\n  // 4. Submit\n  await click(ws, submitBtn.stableId);\n\n  // 5. Wait for navigation/redirect\n  await waitForCondition(ws, async () => {\n    const state = await requestState(ws);\n    return state.localStorage?.authToken || state.cookies?.session;\n  }, 10000);\n\n  // 6. Verify success\n  const screenshot = await requestScreenshot(ws);\n  return { success: true, screenshot };\n}\n```\n\n### Pattern: Wait for Element\n\n```javascript\nasync function waitForElement(ws, predicate, timeout = 5000) {\n  const startTime = Date.now();\n\n  while (Date.now() - startTime < timeout) {\n    const uiTree = await requestUiTree(ws);\n    const element = uiTree.find(predicate);\n\n    if (element) return element;\n\n    await delay(200);\n  }\n\n  throw new Error(`Element not found within ${timeout}ms`);\n}\n\n// Usage\nconst modal = await waitForElement(ws,\n  item => item.role === 'dialog' && item.visible\n);\n```\n\n### Pattern: Form Submission\n\n```javascript\nasync function fillForm(ws, formData) {\n  const uiTree = await requestUiTree(ws);\n\n  for (const [fieldName, value] of Object.entries(formData)) {\n    const input = uiTree.find(i =>\n      i.meta.name === fieldName ||\n      i.meta.id === fieldName ||\n      i.label?.toLowerCase().includes(fieldName.toLowerCase())\n    );\n\n    if (!input) {\n      console.warn(`Field ${fieldName} not found`);\n      continue;\n    }\n\n    if (input.role === 'combobox' || input.meta.tagName === 'SELECT') {\n      await select(ws, input.stableId, { label: value });\n    } else if (input.role === 'checkbox') {\n      if (input.checked !== (value === true || value === 'true')) {\n        await click(ws, input.stableId);\n      }\n    } else {\n      await type(ws, input.stableId, value, { clear: true });\n    }\n  }\n}\n```\n\n## Troubleshooting\n\n### Server won't start\n```bash\n# Check if port is in use\nlsof -i :4000\n\n# Kill existing process\nlsof -ti:4000 | xargs kill -9\n\n# Try different port\nnpx debug-bridge-cli connect --session my-session --port 4001\n```\n\n### Browser not connecting\n1. Verify URL has correct query params: `?session=<id>&port=<port>`\n2. Check browser console for `[DebugBridge]` logs\n3. Verify SDK is initialized in dev mode only\n4. Check CORS if server and app on different origins\n\n### Commands timing out\n1. Check if browser tab is focused/active\n2. Page may be loading - wait for `load` event\n3. Heavy page - increase timeout\n4. Network issues - check connectivity\n\n### Element not found\n1. Element may not be rendered yet - use `waitForElement`\n2. Element may be in iframe - iframes not yet supported\n3. Element may have dynamic ID - use `text` or `selector` instead of `stableId`\n4. Re-request UI tree - DOM may have changed\n\n### Session ID mismatch\n- CLI session and URL param must match exactly\n- Session IDs are case-sensitive\n- Only one browser can connect per session\n\n## Browser SDK Integration\n\nFor the web app to work with debug-bridge, add the SDK:\n\n```bash\nnpm install debug-bridge-browser\n```\n\n```typescript\n// src/debug-bridge.ts\nimport { createDebugBridge } from 'debug-bridge-browser';\n\n// Only in development\nif (import.meta.env.DEV) {\n  const params = new URLSearchParams(window.location.search);\n  const sessionId = params.get('session');\n  const port = params.get('port') || '4000';\n\n  if (sessionId) {\n    const bridge = createDebugBridge({\n      url: `ws://localhost:${port}/debug?role=app&sessionId=${sessionId}`,\n      sessionId,\n      appName: 'My App',\n    });\n\n    bridge.connect();\n\n    // Expose for debugging\n    (window as any).__debugBridge = bridge;\n  }\n}\n```\n\n## Cross-Platform Installation\n\n### Claude Code\n```bash\n# Via plugin (recommended)\nclaude plugin install github:stevengonsalvez/agent-bridge\n\n# Or copy skill manually\ncp -r skills/debug-bridge ~/.claude/skills/\n```\n\n### Cursor\n```bash\ncp -r skills/debug-bridge ~/.cursor/skills/\n```\n\n### Codex\n```bash\ncp -r skills/debug-bridge ~/.codex/skills/\n```\n\n### VS Code / GitHub Copilot\n```bash\ncp -r skills/debug-bridge .github/skills/\n```\n\n## API Reference\n\n### UiTreeItem Structure\n\n```typescript\ntype UiTreeItem = {\n  stableId: string;      // Stable identifier for targeting\n  selector: string;      // CSS selector\n  role: string;          // ARIA role (button, textbox, link, etc.)\n  text?: string;         // Visible text content\n  label?: string;        // aria-label or associated label\n  disabled: boolean;     // Is element disabled\n  visible: boolean;      // Is element visible\n  checked?: boolean;     // For checkboxes/radios\n  value?: string;        // Current value\n  meta: {\n    tagName: string;     // HTML tag (BUTTON, INPUT, etc.)\n    type?: string;       // Input type (text, password, etc.)\n    name?: string;       // Input name attribute\n    href?: string;       // Link href\n    placeholder?: string;\n  };\n};\n```\n\n### Capabilities\n\n| Capability | Description |\n|------------|-------------|\n| `dom_snapshot` | Can request full HTML |\n| `dom_mutations` | Receives live DOM changes |\n| `ui_tree` | Can request interactive elements |\n| `console` | Receives console.log output |\n| `errors` | Receives JavaScript errors |\n| `eval` | Can execute JavaScript |\n| `custom_state` | App sends custom state |\n\n## Version History\n\n- **0.1.2** - Current version, npm published\n- **Protocol Version: 1** - Message format specification"
              }
            ]
          }
        ]
      }
    }
  ]
}