{
  "owner": {
    "id": "iknite",
    "display_name": "Enrique Paredes",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/745710?u=533c2f71832011ecfc3238434f91ed343213929c&v=4",
    "url": "https://github.com/iknite",
    "bio": null,
    "stats": {
      "total_repos": 1,
      "total_plugins": 1,
      "total_commands": 6,
      "total_skills": 1,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "iknite/claude-code-marketplace",
      "url": "https://github.com/iknite/claude-code-marketplace",
      "description": "PoC to test nesting worktrees to allow upper context life-cycle also inside the repository",
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2025-12-20T16:03:16Z",
        "created_at": "2025-12-17T20:07:26Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 677
        },
        {
          "path": ".github",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/workflows",
          "type": "tree",
          "size": null
        },
        {
          "path": ".github/workflows/validate-plugins.yml",
          "type": "blob",
          "size": 343
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 1323
        },
        {
          "path": "validate-plugins.sh",
          "type": "blob",
          "size": 1338
        },
        {
          "path": "worktree-context",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 589
        },
        {
          "path": "worktree-context/README.md",
          "type": "blob",
          "size": 4413
        },
        {
          "path": "worktree-context/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/agents/worktree-manager.md",
          "type": "blob",
          "size": 2982
        },
        {
          "path": "worktree-context/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/commands/context-init.md",
          "type": "blob",
          "size": 2610
        },
        {
          "path": "worktree-context/commands/wt-list.md",
          "type": "blob",
          "size": 560
        },
        {
          "path": "worktree-context/commands/wt-new.md",
          "type": "blob",
          "size": 1363
        },
        {
          "path": "worktree-context/commands/wt-pr.md",
          "type": "blob",
          "size": 1544
        },
        {
          "path": "worktree-context/commands/wt-remove.md",
          "type": "blob",
          "size": 728
        },
        {
          "path": "worktree-context/commands/wt-status.md",
          "type": "blob",
          "size": 1928
        },
        {
          "path": "worktree-context/settings.json",
          "type": "blob",
          "size": 1553
        },
        {
          "path": "worktree-context/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/skills/context-methodology",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/skills/context-methodology/SKILL.md",
          "type": "blob",
          "size": 5001
        }
      ],
      "marketplace": {
        "name": "iknite-cc-marketplace",
        "version": null,
        "description": null,
        "owner_info": {
          "name": "iknite",
          "email": "iknite@gmail.com"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "worktree-context",
            "description": "Bootstrap projects with separation of concerns between AI configuration and source code",
            "source": "./worktree-context",
            "category": "project-management",
            "version": "1.0.0",
            "author": {
              "name": "iknite"
            },
            "install_commands": [
              "/plugin marketplace add iknite/claude-code-marketplace",
              "/plugin install worktree-context@iknite-cc-marketplace"
            ],
            "signals": {
              "stars": 0,
              "forks": 0,
              "pushed_at": "2025-12-20T16:03:16Z",
              "created_at": "2025-12-17T20:07:26Z",
              "license": null
            },
            "commands": [
              {
                "name": "/context-init",
                "description": "Initialize context branch methodology on a new or existing repository",
                "path": "worktree-context/commands/context-init.md",
                "frontmatter": {
                  "description": "Initialize context branch methodology on a new or existing repository",
                  "allowed-tools": "Bash(git:*), Bash(mkdir:*), Bash(ls:*), Write, Edit",
                  "argument-hint": [
                    "repo-path"
                  ]
                },
                "content": "# Initialize Context Branch Methodology\n\nSet up the separation of concerns structure for AI context and project code.\n\n## Target\nRepository at: `${1:-.}` (current directory if not specified)\n\n## Standard Structure\n\nAll worktrees live inside a `/root` folder within the bare repository:\n\n```\nbare-repo/\n└── root/\n    ├── context/              # context branch (AI configuration)\n    │   ├── CLAUDE.md\n    │   ├── .claude/\n    │   ├── .gitignore        # Contains: worktree/**/\n    │   └── worktree/         # All code worktrees here\n    │       └── feature/...\n    └── master/               # master/main branch (direct access)\n```\n\n## Task\n\n### Step 1: Detect repository type\n- Check if target is a bare repo, regular repo, or needs cloning\n- Identify the main branch name (master or main)\n\n### Step 2: Convert to bare repo structure (if needed)\nIf the repo is not bare:\n```bash\n# Clone as bare\ngit clone --bare <repo-url> <repo-name>\ncd <repo-name>\n```\n\n### Step 3: Create the /root directory structure if not exists\n```bash\nmkdir -p root\n```\n\n### Step 4: Create master/main worktree\n```bash\n# Detect default branch name\nDEFAULT_BRANCH=$(git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* ')\ngit worktree add root/$DEFAULT_BRANCH $DEFAULT_BRANCH\n```\n\n### Step 5: Create orphan context branch and worktree\n```bash\n# Create orphan branch\ngit checkout --orphan context\ngit reset --hard\ngit commit --allow-empty -m \"init: context branch for AI configuration\"\n\n# Add as worktree\ngit worktree add root/context context\n```\n\n### Step 6: Set up context branch structure\nIn `root/context/`, create:\n- `CLAUDE.md` - Basic project instructions template\n- `.gitignore` - With `worktree/**/` to ignore nested worktrees\n- `.claude/` directory for commands, agents, skills\n- `worktree/` directory for code worktrees\n\n### Step 7: Verify setup\n```bash\ngit worktree list\n```\n\nExpected output:\n```\n/path/to/bare-repo              (bare)\n/path/to/bare-repo/root/context [context]\n/path/to/bare-repo/root/master  [master]\n```\n\n## Output\n\nProvide clear next steps:\n1. `cd root/context` to work with AI configuration\n2. Use `/wt-new feature/name` to create feature worktrees\n3. All code work happens in `root/context/worktree/`\n4. Never edit `root/master/` directly - use worktrees instead"
              },
              {
                "name": "/wt-list",
                "description": "List all git worktrees with their status",
                "path": "worktree-context/commands/wt-list.md",
                "frontmatter": {
                  "description": "List all git worktrees with their status",
                  "allowed-tools": "Bash(git worktree:*), Bash(git branch:*), Bash(git log:*)"
                },
                "content": "# List Worktrees\n\nShow all worktrees in this repository with their current status.\n\n## Current worktrees\n!`git worktree list`\n\n## Task\nProvide a summary of:\n1. All active worktrees and their branches\n2. Which worktrees are inside `worktree/` (following methodology)\n3. Which worktrees are outside (legacy or root worktrees)\n4. Any worktrees that might need cleanup (merged branches)\n\nFormat the output clearly for the user."
              },
              {
                "name": "/wt-new",
                "description": "Create a new worktree branch from master inside worktree/ folder",
                "path": "worktree-context/commands/wt-new.md",
                "frontmatter": {
                  "description": "Create a new worktree branch from master inside worktree/ folder",
                  "allowed-tools": "Bash(git worktree:*), Bash(git branch:*), Bash(git symbolic-ref:*), Bash(ls:*)",
                  "argument-hint": "<branch-name> [base-branch]"
                },
                "content": "# Create New Worktree\n\nCreate a new git worktree for branch `$1`.\n\n## Detect default branch\n!`git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || (git branch -l main master 2>/dev/null | head -1 | tr -d '* ')`\n\n## Current worktrees\n!`git worktree list`\n\n## Rules\n1. All worktrees MUST be created inside the `worktree/` folder\n2. Branch names should follow the pattern: `feature/`, `fix/`, `chore/`, etc.\n3. If no base branch is specified, use the repository's default branch (main or master)\n\n## Task\n\n### Step 1: Determine the base branch\n- If `$2` is provided, use it as the base branch\n- Otherwise, detect the default branch using:\n  ```bash\n  git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* '\n  ```\n\n### Step 2: Create the worktree\nFor a new branch:\n```bash\ngit worktree add -b $1 worktree/$1 <base-branch>\n```\n\nIf the branch already exists:\n```bash\ngit worktree add worktree/$1 $1\n```\n\n### Step 3: Verify\nAfter creation, confirm the worktree was created successfully by listing all worktrees."
              },
              {
                "name": "/wt-pr",
                "description": "Create a GitHub PR from a worktree branch",
                "path": "worktree-context/commands/wt-pr.md",
                "frontmatter": {
                  "description": "Create a GitHub PR from a worktree branch",
                  "allowed-tools": "Bash(git:*), Bash(gh:*)",
                  "argument-hint": "<branch-name> [base-branch]"
                },
                "content": "# Create PR from Worktree\n\nCreate a GitHub Pull Request for branch `$1`.\n\n## Detect default branch\n!`git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || (git branch -l main master 2>/dev/null | head -1 | tr -d '* ')`\n\n## Current status of the branch\n!`cd worktree/$1 2>/dev/null && git status || echo \"Worktree not found at worktree/$1\"`\n\n## Recent commits on this branch\n!`cd worktree/$1 2>/dev/null && git log --oneline -5 || echo \"\"`\n\n## Task\n\n### Step 1: Determine the base branch\n- If `$2` is provided, use it as the PR base\n- Otherwise, detect the default branch (main or master) using:\n  ```bash\n  git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* '\n  ```\n\n### Step 2: Navigate to the worktree\n```bash\ncd worktree/$1\n```\n\n### Step 3: Check for uncommitted changes\nIf any uncommitted changes exist, ask user what to do.\n\n### Step 4: Push the branch\n```bash\ngit push -u origin $1\n```\n\n### Step 5: Create the PR\n```bash\ngh pr create --base <detected-base-branch> --title \"...\" --body \"...\"\n```\n- Title: derive from branch name or recent commits\n- Body: summarize changes with a test plan\n\n## PR Body Template\n```\n## Summary\n<bullet points of changes>\n\n## Test plan\n<how to verify the changes>\n\n---\nGenerated with [Claude Code](https://claude.ai/code)\n```"
              },
              {
                "name": "/wt-remove",
                "description": "Remove a worktree and optionally delete its branch",
                "path": "worktree-context/commands/wt-remove.md",
                "frontmatter": {
                  "description": "Remove a worktree and optionally delete its branch",
                  "allowed-tools": "Bash(git worktree:*), Bash(git branch:*), Bash(ls:*)",
                  "argument-hint": "<branch-name> [--delete-branch]"
                },
                "content": "# Remove Worktree\n\nRemove the worktree for branch `$1`.\n\n## Current worktrees\n!`git worktree list`\n\n## Task\n1. Remove the worktree using: `git worktree remove worktree/$1`\n2. If `--delete-branch` or `-d` is in the arguments, also delete the branch: `git branch -d $1`\n3. If removal fails due to uncommitted changes, inform the user and ask if they want to force removal\n4. After removal, list remaining worktrees to confirm\n\n## Safety\n- Never force remove without user confirmation\n- Warn if the branch has unmerged changes before deleting"
              },
              {
                "name": "/wt-status",
                "description": "Show status of all worktrees including pending commits and sync state",
                "path": "worktree-context/commands/wt-status.md",
                "frontmatter": {
                  "description": "Show status of all worktrees including pending commits and sync state",
                  "allowed-tools": "Bash(git:*), Bash(ls:*)"
                },
                "content": "# Worktree Status\n\nShow the status of all worktrees: context, default branch, and feature branches.\n\n## All worktrees\n!`git worktree list`\n\n## Task\n\nGenerate a comprehensive status report for all worktrees:\n\n### Step 1: Detect default branch\n```bash\nDEFAULT_BRANCH=$(git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* ')\n```\n\n### Step 2: For each worktree, check:\n\n1. **Context branch** (`root/context` or current context location):\n   ```bash\n   git -C <context-path> status --short\n   git -C <context-path> log origin/context..HEAD --oneline 2>/dev/null || echo \"No remote tracking\"\n   ```\n\n2. **Default branch** (`root/$DEFAULT_BRANCH`):\n   ```bash\n   git -C <default-branch-path> status --short\n   git -C <default-branch-path> log origin/${DEFAULT_BRANCH}..HEAD --oneline 2>/dev/null\n   ```\n\n3. **All feature worktrees** (inside `worktree/`):\n   ```bash\n   for dir in worktree/*/*; do\n     if [ -d \"${dir}\" ]; then\n       echo \"=== ${dir} ===\"\n       git -C \"${dir}\" status --short\n       git -C \"${dir}\" log origin/$(git -C \"${dir}\" branch --show-current)..HEAD --oneline 2>/dev/null || echo \"No remote tracking\"\n     fi\n   done\n   ```\n\n### Step 3: Format output as a table\n\nFor each worktree, report:\n| Worktree | Branch | Uncommitted | Unpushed | Behind Remote |\n|----------|--------|-------------|----------|---------------|\n\nWhere:\n- **Uncommitted**: Number of modified/untracked files\n- **Unpushed**: Commits ahead of remote\n- **Behind Remote**: Commits behind remote (needs pull)\n\n### Step 4: Summary\n\nProvide a quick summary:\n- Total worktrees\n- Worktrees with uncommitted changes\n- Worktrees with unpushed commits\n- Worktrees that need pulling\n\nFlag any worktrees that need attention."
              }
            ],
            "skills": [
              {
                "name": "context-methodology",
                "description": "Knowledge about the context branch methodology for separating AI configuration from project code using git worktrees. Use when users ask about worktree structure, branch organization, or the separation of concerns pattern.",
                "path": "worktree-context/skills/context-methodology/SKILL.md",
                "frontmatter": {
                  "name": "context-methodology",
                  "description": "Knowledge about the context branch methodology for separating AI configuration from project code using git worktrees. Use when users ask about worktree structure, branch organization, or the separation of concerns pattern.",
                  "allowed-tools": "Read, Glob, Grep, Bash"
                },
                "content": "# Context Branch Methodology\n\nThis skill provides knowledge about the **context branch methodology** - a pattern for separating AI assistant configuration from project source code using git worktrees.\n\n## The Problem\n\nWhen using AI coding assistants like Claude Code, projects accumulate:\n- `CLAUDE.md` files with instructions\n- `.claude/` directories with settings, commands, agents\n- Custom hooks and configurations\n\nThese files:\n1. Clutter project history with AI-specific commits\n2. Mix tooling concerns with business logic\n3. Create noise in code reviews\n4. May contain sensitive prompts or configurations\n\n## The Solution\n\nUse **two independent git histories** in the same repository:\n\n### Branch Structure\n\n| Branch | Purpose | Contains |\n|--------|---------|----------|\n| `context` | AI configuration | CLAUDE.md, .claude/, settings |\n| `main`/`master` | Project code | Source code, tests, docs |\n| `feature/*` | Development | Feature work (descends from main/master) |\n\n### Directory Layout\n\n```\nbare-repo/\n└── root/\n    ├── context/           # context branch worktree\n    │   ├── CLAUDE.md      # AI instructions\n    │   ├── .claude/       # Commands, agents, skills\n    │   ├── .gitignore     # Contains: worktree/**/\n    │   └── worktree/      # All code worktrees here\n    │       ├── feature/\n    │       │   └── my-feature/  # Feature branch worktree\n    │       └── fix/\n    │           └── bug-123/     # Bugfix branch worktree\n    └── main/              # main/master branch (direct access, read-only)\n```\n\n### Key Insight\n\nThe `context` branch's `.gitignore` contains `worktree/**/`, so:\n- Nested worktrees are invisible to context commits\n- AI config and code remain in separate histories\n- Claude Code runs from `context/`, sees both contexts\n\n## Detecting the Default Branch\n\nRepositories may use either `main` or `master` as their default branch. Always detect it:\n\n```bash\n# Method 1: From remote HEAD (most reliable if remote exists)\ngit symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@'\n\n# Method 2: Check which branch exists locally\ngit branch -l main master 2>/dev/null | head -1 | tr -d '* '\n\n# Method 3: Combined approach\nDEFAULT_BRANCH=$(git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* ')\n```\n\n## Workflow\n\n### Creating a New Feature\n\n```bash\n# From the context worktree\ncd root/context\n\n# Detect default branch\nDEFAULT_BRANCH=$(git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || echo \"main\")\n\n# Create feature worktree from default branch\ngit worktree add -b feature/my-feature worktree/feature/my-feature $DEFAULT_BRANCH\n\n# Work in the feature\ncd worktree/feature/my-feature\n# ... make changes ...\n\n# Commit and push\ngit add . && git commit -m \"feat: add feature\"\ngit push -u origin feature/my-feature\n\n# Create PR targeting default branch\ngh pr create --base $DEFAULT_BRANCH\n```\n\n### Updating AI Configuration\n\n```bash\n# From context worktree (root/context)\n# Edit CLAUDE.md or .claude/ files\ngit add .\ngit commit -m \"context: update AI instructions\"\ngit push origin context\n```\n\n## Rules\n\n1. **Never edit `root/main/` or `root/master/` directly** - always use a worktree\n2. **All code worktrees inside `worktree/`** - maintains the separation\n3. **Feature branches from default branch** - not from `context`\n4. **Context branch is orphan** - no shared history with main/master\n5. **PRs target default branch** - context changes stay on context branch\n\n## Benefits\n\n- Clean project history (no AI config commits)\n- Separate concerns (tooling vs code)\n- Team flexibility (share context or keep personal)\n- Easy experimentation (modify AI config without affecting code)\n\n## Common Questions\n\n**Q: How does Claude Code see both contexts?**\nA: Claude runs from the `context/` directory, which contains both the AI config files AND the `worktree/` folder with code. The parent CLAUDE.md applies to nested directories.\n\n**Q: Can I have multiple context branches?**\nA: Yes! You could have `context-personal` and `context-team` for different configurations.\n\n**Q: What if I need different AI config per feature?**\nA: Each worktree can have its own `.claude/` that overrides or extends the parent context.\n\n**Q: How do I migrate an existing repo?**\nA: Use the `/context-init` command or the `worktree-manager` agent to set up the structure.\n\n**Q: Does it work with both main and master?**\nA: Yes! The commands auto-detect the default branch. You can also explicitly specify the base branch as an argument."
              }
            ]
          }
        ]
      }
    }
  ]
}