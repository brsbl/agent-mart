{
  "owner": {
    "id": "BitYoungjae",
    "display_name": "BitYoungjae",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/3115669?u=7331bfa51d95ae7a0483feeb445cfd6eb2e43c3d&v=4",
    "url": "https://github.com/BitYoungjae",
    "bio": "Creating with joy, connecting with joy, living with joy.",
    "stats": {
      "total_repos": 1,
      "total_plugins": 4,
      "total_commands": 7,
      "total_skills": 12,
      "total_stars": 5,
      "total_forks": 0
    }
  },
  "repos": [
    {
      "full_name": "BitYoungjae/marketplace",
      "url": "https://github.com/BitYoungjae/marketplace",
      "description": "A Claude Code plugin marketplace by BitYoungjae.",
      "homepage": null,
      "signals": {
        "stars": 5,
        "forks": 0,
        "pushed_at": "2026-01-12T13:31:28Z",
        "created_at": "2025-12-27T15:21:29Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 2048
        },
        {
          "path": ".claude",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/skills/commit-helper",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/skills/commit-helper/SKILL.md",
          "type": "blob",
          "size": 19277
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 536
        },
        {
          "path": "CLAUDE.md",
          "type": "blob",
          "size": 5264
        },
        {
          "path": "LICENSE",
          "type": "blob",
          "size": 1068
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 2537
        },
        {
          "path": "contexts",
          "type": "tree",
          "size": null
        },
        {
          "path": "contexts/cc",
          "type": "tree",
          "size": null
        },
        {
          "path": "contexts/cc/CLAUDE.md",
          "type": "blob",
          "size": 715
        },
        {
          "path": "contexts/cc/ask-user-question-tool.md",
          "type": "blob",
          "size": 5620
        },
        {
          "path": "contexts/cc/hooks-guide.md",
          "type": "blob",
          "size": 9765
        },
        {
          "path": "contexts/cc/hooks.md",
          "type": "blob",
          "size": 40048
        },
        {
          "path": "contexts/cc/lesson-learned.md",
          "type": "blob",
          "size": 968
        },
        {
          "path": "contexts/cc/plugins-reference.md",
          "type": "blob",
          "size": 29416
        },
        {
          "path": "contexts/cc/plugins.md",
          "type": "blob",
          "size": 16908
        },
        {
          "path": "contexts/cc/prompt-engineering",
          "type": "tree",
          "size": null
        },
        {
          "path": "contexts/cc/prompt-engineering/be-clear-and-direct.md",
          "type": "blob",
          "size": 8873
        },
        {
          "path": "contexts/cc/prompt-engineering/chain-of-thought.md",
          "type": "blob",
          "size": 9786
        },
        {
          "path": "contexts/cc/prompt-engineering/chain-prompts.md",
          "type": "blob",
          "size": 21811
        },
        {
          "path": "contexts/cc/prompt-engineering/extended-thinking-tips.md",
          "type": "blob",
          "size": 15691
        },
        {
          "path": "contexts/cc/prompt-engineering/long-context-tips.md",
          "type": "blob",
          "size": 3689
        },
        {
          "path": "contexts/cc/prompt-engineering/multishot-prompting.md",
          "type": "blob",
          "size": 6263
        },
        {
          "path": "contexts/cc/prompt-engineering/prefill-claudes-response.md",
          "type": "blob",
          "size": 7408
        },
        {
          "path": "contexts/cc/prompt-engineering/system-prompts.md",
          "type": "blob",
          "size": 8221
        },
        {
          "path": "contexts/cc/prompt-engineering/use-xml-tags.md",
          "type": "blob",
          "size": 10168
        },
        {
          "path": "contexts/cc/skills.md",
          "type": "blob",
          "size": 28066
        },
        {
          "path": "contexts/cc/slash-commands.md",
          "type": "blob",
          "size": 26222
        },
        {
          "path": "contexts/cc/sub-agents.md",
          "type": "blob",
          "size": 32592
        },
        {
          "path": "contexts/cc/task-tool-context.md",
          "type": "blob",
          "size": 7548
        },
        {
          "path": "contexts/neovim",
          "type": "tree",
          "size": null
        },
        {
          "path": "contexts/neovim/neovim-debugging-guide.md",
          "type": "blob",
          "size": 3962
        },
        {
          "path": "contexts/obsidian",
          "type": "tree",
          "size": null
        },
        {
          "path": "contexts/obsidian/mermaid-support.md",
          "type": "blob",
          "size": 1435
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dokhak",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dokhak/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dokhak/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 513
        },
        {
          "path": "plugins/dokhak/CLAUDE.md",
          "type": "blob",
          "size": 4216
        },
        {
          "path": "plugins/dokhak/README.ko.md",
          "type": "blob",
          "size": 18735
        },
        {
          "path": "plugins/dokhak/README.md",
          "type": "blob",
          "size": 14997
        },
        {
          "path": "plugins/dokhak/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dokhak/agents/project-interviewer.md",
          "type": "blob",
          "size": 10497
        },
        {
          "path": "plugins/dokhak/agents/research-collector.md",
          "type": "blob",
          "size": 16864
        },
        {
          "path": "plugins/dokhak/agents/researcher.md",
          "type": "blob",
          "size": 20308
        },
        {
          "path": "plugins/dokhak/agents/reviewer.md",
          "type": "blob",
          "size": 14133
        },
        {
          "path": "plugins/dokhak/agents/structure-designer.md",
          "type": "blob",
          "size": 11580
        },
        {
          "path": "plugins/dokhak/agents/writer.md",
          "type": "blob",
          "size": 15025
        },
        {
          "path": "plugins/dokhak/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dokhak/commands/continue.md",
          "type": "blob",
          "size": 10354
        },
        {
          "path": "plugins/dokhak/commands/doctor.md",
          "type": "blob",
          "size": 10871
        },
        {
          "path": "plugins/dokhak/commands/init.md",
          "type": "blob",
          "size": 8649
        },
        {
          "path": "plugins/dokhak/commands/status.md",
          "type": "blob",
          "size": 1963
        },
        {
          "path": "plugins/dokhak/commands/write.md",
          "type": "blob",
          "size": 12270
        },
        {
          "path": "plugins/dokhak/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dokhak/skills/domain-profiles",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dokhak/skills/domain-profiles/SKILL.md",
          "type": "blob",
          "size": 3889
        },
        {
          "path": "plugins/dokhak/skills/domain-profiles/arts.md",
          "type": "blob",
          "size": 9109
        },
        {
          "path": "plugins/dokhak/skills/domain-profiles/history.md",
          "type": "blob",
          "size": 7912
        },
        {
          "path": "plugins/dokhak/skills/domain-profiles/language.md",
          "type": "blob",
          "size": 8722
        },
        {
          "path": "plugins/dokhak/skills/domain-profiles/science.md",
          "type": "blob",
          "size": 8117
        },
        {
          "path": "plugins/dokhak/skills/domain-profiles/technology.md",
          "type": "blob",
          "size": 7967
        },
        {
          "path": "plugins/dokhak/skills/project-interview",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dokhak/skills/project-interview/SKILL.md",
          "type": "blob",
          "size": 1375
        },
        {
          "path": "plugins/dokhak/skills/project-interview/conversation-flow.md",
          "type": "blob",
          "size": 18713
        },
        {
          "path": "plugins/dokhak/skills/project-interview/interview-data-template.md",
          "type": "blob",
          "size": 3839
        },
        {
          "path": "plugins/dokhak/skills/project-scaffolder",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dokhak/skills/project-scaffolder/SKILL.md",
          "type": "blob",
          "size": 3726
        },
        {
          "path": "plugins/dokhak/skills/project-scaffolder/claude-md-template.md",
          "type": "blob",
          "size": 3468
        },
        {
          "path": "plugins/dokhak/skills/project-scaffolder/persona-template.md",
          "type": "blob",
          "size": 3685
        },
        {
          "path": "plugins/dokhak/skills/project-scaffolder/plan-template.md",
          "type": "blob",
          "size": 2882
        },
        {
          "path": "plugins/dokhak/skills/project-scaffolder/project-context-template.md",
          "type": "blob",
          "size": 3790
        },
        {
          "path": "plugins/dokhak/skills/project-scaffolder/task-template.md",
          "type": "blob",
          "size": 4097
        },
        {
          "path": "plugins/dokhak/skills/research-storage",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dokhak/skills/research-storage/SKILL.md",
          "type": "blob",
          "size": 17150
        },
        {
          "path": "plugins/nvim-doctor",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/nvim-doctor/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/nvim-doctor/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 398
        },
        {
          "path": "plugins/nvim-doctor/README.ko.md",
          "type": "blob",
          "size": 4850
        },
        {
          "path": "plugins/nvim-doctor/README.md",
          "type": "blob",
          "size": 4643
        },
        {
          "path": "plugins/nvim-doctor/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/nvim-doctor/agents/config-auditor.md",
          "type": "blob",
          "size": 3687
        },
        {
          "path": "plugins/nvim-doctor/agents/nvim-diagnostician.md",
          "type": "blob",
          "size": 2771
        },
        {
          "path": "plugins/nvim-doctor/agents/plugin-investigator.md",
          "type": "blob",
          "size": 5303
        },
        {
          "path": "plugins/nvim-doctor/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/nvim-doctor/commands/diagnose.md",
          "type": "blob",
          "size": 3250
        },
        {
          "path": "plugins/nvim-doctor/contexts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/nvim-doctor/contexts/communication-schemas.md",
          "type": "blob",
          "size": 7228
        },
        {
          "path": "plugins/nvim-doctor/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/nvim-doctor/skills/config-auditing",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/nvim-doctor/skills/config-auditing/SKILL.md",
          "type": "blob",
          "size": 4010
        },
        {
          "path": "plugins/nvim-doctor/skills/config-auditing/audit-checklist.md",
          "type": "blob",
          "size": 8569
        },
        {
          "path": "plugins/nvim-doctor/skills/config-auditing/best-practices.md",
          "type": "blob",
          "size": 9536
        },
        {
          "path": "plugins/nvim-doctor/skills/config-auditing/deprecated-apis.md",
          "type": "blob",
          "size": 8937
        },
        {
          "path": "plugins/nvim-doctor/skills/neovim-debugging",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/nvim-doctor/skills/neovim-debugging/SKILL.md",
          "type": "blob",
          "size": 5743
        },
        {
          "path": "plugins/nvim-doctor/skills/neovim-debugging/diagnostic-flowchart.md",
          "type": "blob",
          "size": 23300
        },
        {
          "path": "plugins/nvim-doctor/skills/neovim-debugging/error-patterns.md",
          "type": "blob",
          "size": 8752
        },
        {
          "path": "plugins/nvim-doctor/skills/neovim-debugging/information-gathering.md",
          "type": "blob",
          "size": 7887
        },
        {
          "path": "plugins/nvim-doctor/skills/neovim-debugging/plugin-specifics.md",
          "type": "blob",
          "size": 10158
        },
        {
          "path": "plugins/nvim-doctor/skills/plugin-research",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/nvim-doctor/skills/plugin-research/SKILL.md",
          "type": "blob",
          "size": 5291
        },
        {
          "path": "plugins/nvim-doctor/skills/plugin-research/ecosystem-knowledge.md",
          "type": "blob",
          "size": 7406
        },
        {
          "path": "plugins/nvim-doctor/skills/plugin-research/github-patterns.md",
          "type": "blob",
          "size": 5406
        },
        {
          "path": "plugins/obsidian-blocks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian-blocks/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian-blocks/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 676
        },
        {
          "path": "plugins/obsidian-blocks/README.md",
          "type": "blob",
          "size": 1929
        },
        {
          "path": "plugins/obsidian-blocks/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian-blocks/agents/doc-enhancer.md",
          "type": "blob",
          "size": 13572
        },
        {
          "path": "plugins/obsidian-blocks/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian-blocks/commands/enhance.md",
          "type": "blob",
          "size": 767
        },
        {
          "path": "plugins/obsidian-blocks/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian-blocks/skills/desmos-graphing",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian-blocks/skills/desmos-graphing/SKILL.md",
          "type": "blob",
          "size": 7496
        },
        {
          "path": "plugins/obsidian-blocks/skills/desmos-graphing/reference.md",
          "type": "blob",
          "size": 14958
        },
        {
          "path": "plugins/obsidian-blocks/skills/mathjax-rendering",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian-blocks/skills/mathjax-rendering/SKILL.md",
          "type": "blob",
          "size": 5897
        },
        {
          "path": "plugins/obsidian-blocks/skills/mathjax-rendering/reference.md",
          "type": "blob",
          "size": 8979
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/SKILL.md",
          "type": "blob",
          "size": 11190
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/architecture.md",
          "type": "blob",
          "size": 10144
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/block.md",
          "type": "blob",
          "size": 10258
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/class-diagram.md",
          "type": "blob",
          "size": 13804
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/er-diagram.md",
          "type": "blob",
          "size": 10459
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/flowchart.md",
          "type": "blob",
          "size": 8130
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/gantt.md",
          "type": "blob",
          "size": 12603
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/gitgraph.md",
          "type": "blob",
          "size": 6568
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/journey.md",
          "type": "blob",
          "size": 8330
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/mindmap.md",
          "type": "blob",
          "size": 3907
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/pie.md",
          "type": "blob",
          "size": 2549
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/quadrant-chart.md",
          "type": "blob",
          "size": 8838
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/reference.md",
          "type": "blob",
          "size": 7413
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/sankey.md",
          "type": "blob",
          "size": 7941
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/sequence.md",
          "type": "blob",
          "size": 13226
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/state.md",
          "type": "blob",
          "size": 13366
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/timeline.md",
          "type": "blob",
          "size": 10027
        },
        {
          "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/xychart.md",
          "type": "blob",
          "size": 8266
        },
        {
          "path": "plugins/obsidian-blocks/skills/tikzjax-diagramming",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian-blocks/skills/tikzjax-diagramming/SKILL.md",
          "type": "blob",
          "size": 4939
        },
        {
          "path": "plugins/obsidian-blocks/skills/tikzjax-diagramming/reference.md",
          "type": "blob",
          "size": 9034
        },
        {
          "path": "plugins/omarchy",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/omarchy/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/omarchy/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 436
        },
        {
          "path": "plugins/omarchy/README.md",
          "type": "blob",
          "size": 1467
        },
        {
          "path": "plugins/omarchy/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/omarchy/skills/omarchy-theming",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/omarchy/skills/omarchy-theming/SKILL.md",
          "type": "blob",
          "size": 5556
        },
        {
          "path": "plugins/omarchy/skills/omarchy-theming/reference.md",
          "type": "blob",
          "size": 14279
        },
        {
          "path": "scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "scripts/cc-docs-sync.sh",
          "type": "blob",
          "size": 6097
        }
      ],
      "marketplace": {
        "name": "bityoungjae-marketplace",
        "version": null,
        "description": "BitYoungjae's Claude Code plugin marketplace",
        "owner_info": {
          "name": "BitYoungjae",
          "email": "bityoungjae@gmail.com"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "dokhak",
            "description": "A Claude Code plugin for creating comprehensive self-learning resources. Automates the entire workflow from project scaffolding to document generation.",
            "source": "./plugins/dokhak",
            "category": null,
            "version": "2.4.0",
            "author": {
              "name": "BitYoungjae",
              "email": "bityoungjae@gmail.com"
            },
            "install_commands": [
              "/plugin marketplace add BitYoungjae/marketplace",
              "/plugin install dokhak@bityoungjae-marketplace"
            ],
            "signals": {
              "stars": 5,
              "forks": 0,
              "pushed_at": "2026-01-12T13:31:28Z",
              "created_at": "2025-12-27T15:21:29Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/continue",
                "description": "Continue writing multiple sections. Uses researcher->writer->reviewer pipeline for each section. Supports domain-adaptive content generation (technology, history, science, arts, general).",
                "path": "plugins/dokhak/commands/continue.md",
                "frontmatter": {
                  "description": "Continue writing multiple sections. Uses researcher->writer->reviewer pipeline for each section. Supports domain-adaptive content generation (technology, history, science, arts, general).",
                  "allowed-tools": "Read, Grep, Glob, Task, Edit",
                  "argument-hint": "[count] [--skip-review] [--glm]",
                  "model": "opus"
                },
                "content": "# Continue Session\n\nWrite the next N incomplete sections (default: 3).\n\n## Context Files\n\n- Persona: @persona.md\n- Project Context: @project-context.md\n\n## Current State\n\n- Incomplete tasks: !`grep -c \"\\[ \\]\" task.md 2>/dev/null || echo \"No task.md found\"`\n\n## Process\n\n### 1. Parse Arguments\n\n**CRITICAL**: Extract count, skip_review, and use_glm_tools flags from $ARGUMENTS.\n\n```\nskip_review = $ARGUMENTS.includes(\"--skip-review\")\nuse_glm_tools = $ARGUMENTS.includes(\"--glm\") ? \"true\" : \"false\"\ncount = parseInt($ARGUMENTS.replace(\"--skip-review\", \"\").replace(\"--glm\", \"\").trim()) || 3\n```\n\nThe `use_glm_tools` value MUST be the string `\"true\"` or `\"false\"` for XML.\n\n### 2. Read task.md and Extract Domain\n\nRead task.md and identify all incomplete sections (`[ ]` items).\n\nRead persona.md and extract domain information:\n\n- Domain (from Domain Guidelines section header, e.g., \"Domain Guidelines: Technology\" â†’ technology)\n- If no Domain Guidelines section, default to \"technology\" for backward compatibility\n\nDomain values: technology, history, science, arts, general\n\n### 3. Build Section Queue\n\nCreate a queue of sections to write:\n\n1. Collect first `count` incomplete (`[ ]`) items from task.md\n2. Extract section IDs and titles for each queued item\n\n### 3.5 Directory Resolution Helper\n\n**CRITICAL**: Use multi-tier search to find existing research directories. This handles naming inconsistencies.\n\n> **âš ï¸ Glob Returns Files Only**\n>\n> Glob does NOT return directories. All patterns MUST end with `/research.md`.\n>\n> | Pattern | Result |\n> |---------|--------|\n> | `.research/sections/*9-1*` | âŒ Empty |\n> | `.research/sections/*9-1*/research.md` | âœ… Works |\n\nDefine a helper function to resolve research directories:\n\n```\nfunction resolveResearchDirectory(chapter, section, title):\n  # Normalize identifiers (from research-storage skill)\n  canonical_chapter = normalizeChapter(chapter)\n    # \"1\" â†’ \"01\", \"01\" â†’ \"01\", \"10\" â†’ \"10\"\n\n  canonical_section = normalizeSection(section)\n    # \"1\" â†’ \"1\", \"01\" â†’ \"1\", \"02\" â†’ \"2\"\n\n  canonical_slug = generateSlug(title)\n    # \"Core Concepts\" â†’ \"core-concepts\"\n    # \"What is React?\" â†’ \"what-is-react\"\n\n  canonical_path = \".research/sections/{canonical_chapter}-{canonical_section}-{canonical_slug}/\"\n\n  # Tier 1: Exact canonical match\n  tier1 = Glob(\"{canonical_path}research.md\")\n  if tier1 not empty:\n    return { path: canonical_path, existing: true, tier: 1 }\n\n  # Tier 2: Canonical chapter-section, any slug\n  tier2 = Glob(\".research/sections/{canonical_chapter}-{canonical_section}-*/research.md\")\n  if tier2 not empty:\n    return { path: parent(tier2[0]), existing: true, tier: 2 }\n\n  # Tier 3: Non-padded chapter variation\n  raw_chapter = String(parseInt(chapter, 10))  # \"01\" â†’ \"1\"\n  tier3 = Glob(\".research/sections/{raw_chapter}-{canonical_section}-*/research.md\")\n  if tier3 not empty:\n    return { path: parent(tier3[0]), existing: true, tier: 3 }\n\n  # Tier 4: Flexible pattern with first keyword\n  keyword = canonical_slug.split('-')[0]\n  tier4 = Glob(\".research/sections/*-{canonical_section}-*{keyword}*/research.md\")\n  if tier4 not empty:\n    return { path: parent(tier4[0]), existing: true, tier: 4 }\n\n  # No match - use canonical for new directory\n  return { path: canonical_path, existing: false, tier: \"new\" }\n```\n\n### 4. Execute Write Loop\n\nFor each section in queue:\n\n```\n// Initialize previous section tracker\nprevious_document_path = \"none\"\n\nfor (i = 1; i <= queue.length; i++) {\n  section = queue[i]\n  review_status = \"SKIPPED\"\n\n  // Track previous section for coherence review\n  previous_section_path = previous_document_path\n\n  // Progress report\n  \"ğŸ“ [{i}/{queue.length}] Starting: {section.title} (domain: {domain})\"\n\n  // Extract chapter and section numbers from section.id (e.g., \"1.2\" or \"01-2\")\n  raw_chapter = extract_chapter(section.id)\n  raw_section = extract_section(section.id)\n\n  // Resolve research directory using multi-tier search\n  resolution = resolveResearchDirectory(raw_chapter, raw_section, section.title)\n  resolved_dir = resolution.path\n  existing_research = resolution.existing\n  match_tier = resolution.tier\n\n  // Generate canonical identifiers for output paths\n  canonical_chapter = normalizeChapter(raw_chapter)\n  canonical_section = normalizeSection(raw_section)\n  canonical_slug = generateSlug(section.title)\n\n  // Research Phase\n  Task(\n    subagent_type=\"dokhak:researcher\",\n    model=\"haiku\",\n    description=\"Research for {section.title}\",\n    prompt=\"\"\"\n      <research_request>\n        <section>\n          <id>{canonical_chapter}-{canonical_section}</id>\n          <slug>{canonical_slug}</slug>\n          <title>{section.title}</title>\n        </section>\n        <subtopics>\n          <subtopic>{subtopic 1}</subtopic>\n          <subtopic>{subtopic 2}</subtopic>\n        </subtopics>\n        <domain>{domain}</domain>\n        <output_dir>{resolved_dir}</output_dir>\n        <existing_research>{existing_research}</existing_research>\n        <use_glm_tools>{use_glm_tools}</use_glm_tools>\n      </research_request>\n    \"\"\"\n  )\n  // Agent returns: \"research_saved:{resolved_path}\\nsources:N\\nsubtopics_covered:X/Y\\nmatch_tier:T\"\n\n  // Parse researcher's confirmation to get actual research path\n  actual_research_dir = parse_research_saved_path(researcher_confirmation)\n\n  // Writing Phase - Pass FILE PATHS only\n  Task(\n    subagent_type=\"dokhak:writer\",\n    model=\"opus\",\n    description=\"Write {section.title}\",\n    prompt=\"\"\"\n      <writing_request>\n        <section>\n          <title>{section.title}</title>\n          <page_count>{section.pages}</page_count>\n          <subtopics>\n            <subtopic>{subtopic 1}</subtopic>\n            <subtopic>{subtopic 2}</subtopic>\n          </subtopics>\n        </section>\n        <domain>{domain}</domain>\n        <output_path>docs/{canonical_chapter}-{canonical_section}-{canonical_slug}.md</output_path>\n        <use_glm_tools>{use_glm_tools}</use_glm_tools>\n      </writing_request>\n\n      <context_files>\n        <persona_path>persona.md</persona_path>\n        <project_context_path>project-context.md</project_context_path>\n        <research_path>{actual_research_dir}research.md</research_path>\n        <sources_path>{actual_research_dir}sources.md</sources_path>\n        <init_summary_path>.research/init/summary.md</init_summary_path>\n      </context_files>\n\n      Read the context files above. Write the section following persona voice.\n    \"\"\"\n  )\n  // Agent returns: \"document_written:{path}\\nlines:{count}\"\n\n  // Document path using canonical identifiers\n  document_path = \"docs/{canonical_chapter}-{canonical_section}-{canonical_slug}.md\"\n\n  // Store for next iteration's previous_section tracking\n  previous_document_path = document_path\n\n  // Review Phase (if skip_review is false)\n  if (!skip_review) {\n    Task(\n      subagent_type=\"dokhak:reviewer\",\n      model=\"haiku\",\n      description=\"Review {section.title}\",\n      prompt=\"\"\"\n        <review_request>\n          <document_path>{document_path}</document_path>\n          <persona_path>persona.md</persona_path>\n          <previous_section>{previous_section_path}</previous_section>\n          <docs_directory>docs/</docs_directory>\n          <target_pages>{section.pages}</target_pages>\n          <domain>{domain}</domain>\n        </review_request>\n      \"\"\"\n    )\n\n    // Revision Phase (if needed) - Pass FILE PATHS only\n    if (review_result.status == \"NEEDS_REVISION\") {\n      Task(\n        subagent_type=\"dokhak:writer\",\n        model=\"opus\",\n        description=\"Revise {section.title}\",\n        prompt=\"\"\"\n          <revision_request>\n            <document_path>{document_path}</document_path>\n            <domain>{domain}</domain>\n            <review_feedback>\n              {revision_suggestions from review_result}\n            </review_feedback>\n          </revision_request>\n\n          <context_files>\n            <persona_path>persona.md</persona_path>\n            <project_context_path>project-context.md</project_context_path>\n          </context_files>\n\n          Read the document and context files. Apply the review feedback.\n          Focus ONLY on issues in feedback. Maintain structure and voice.\n        \"\"\"\n      )\n      // Agent returns: \"document_written:{path}\\nlines:{count}\"\n      review_status = \"REVISED\"\n    } else {\n      review_status = \"PASS\"\n    }\n  }\n\n  // Update task.md\n  Change `[ ]` to `[x]` for this section\n\n  // Progress report\n  \"âœ“ [{i}/{queue.length}] Completed: {section.title} (Review: {review_status})\"\n}\n```\n\n### 5. Stop Conditions\n\nStop the loop when ANY of these occur:\n\n1. **Count reached**: Completed `count` sections\n2. **Queue empty**: No more incomplete sections\n\n## Output\n\nFinal summary:\n\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“Š Session Summary\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“š Domain: {domain}\nğŸ” Review: {enabled|skipped}\n\nâœ“ Completed: {completed_count} sections\n  - {section_1_title} [{PASS|REVISED|SKIPPED}]\n  - {section_2_title} [{PASS|REVISED|SKIPPED}]\n  - ...\n\nğŸ“ Files created:\n  - docs/{file_1}.md\n  - docs/{file_2}.md\n  - ...\n\nğŸ“‹ Remaining: {remaining_count} sections\n   Next: {next_section_title or \"All sections completed\"}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n## Error Handling\n\n- If researcher fails for a section: Continue with writer using LLM knowledge\n- If writer fails: Stop loop, do NOT update task.md for failed section, report error\n- If reviewer fails for a section: Log warning, proceed to completion (treat as --skip-review for that section)\n- If revision fails: Stop loop, do NOT update task.md for failed section, report error with original review feedback\n- If task.md is missing: Error and exit\n- If plan.md is missing: Error and exit\n- If domain cannot be determined: Default to \"technology\" for backward compatibility"
              },
              {
                "name": "/doctor",
                "description": "Diagnose project structure health and interactively fix issues. Checks required files, cross-file consistency, and completion status sync.",
                "path": "plugins/dokhak/commands/doctor.md",
                "frontmatter": {
                  "description": "Diagnose project structure health and interactively fix issues. Checks required files, cross-file consistency, and completion status sync.",
                  "allowed-tools": "Read, Write, Edit, Grep, Glob, Bash(wc:*), Bash(ls:*), AskUserQuestion",
                  "argument-hint": "[--auto | --check]",
                  "model": "haiku",
                  "skills": "project-scaffolder"
                },
                "content": "# Project Health Check Command\n\n## Context\n\n- Project files: !`ls -la plan.md task.md persona.md project-context.md CLAUDE.md 2>/dev/null || echo \"Some files missing\"`\n- Docs directory: !`ls -d docs 2>/dev/null && ls docs/*.md 2>/dev/null | wc -l || echo \"0 docs\"`\n\n## Output Language\n\nLook at the existing project files (plan.md, task.md, persona.md, etc.) and infer the learner's language. Output all messages in that language. If unclear, default to English.\n\n## Arguments\n\n| Argument  | Description                                  |\n| --------- | -------------------------------------------- |\n| (none)    | Interactive mode - prompt for each fix       |\n| `--auto`  | Auto-fix with sensible defaults (no prompts) |\n| `--check` | Report only, no fix prompts (for CI)         |\n\n## Task\n\nDiagnose project structure and interactively fix issues found.\n\n---\n\n## Step 1: Check Required Files (Category 1)\n\nCheck the existence of these files:\n\n| File                 | Level | Action if Missing                       |\n| -------------------- | ----- | --------------------------------------- |\n| `plan.md`            | ERROR | Must fix - project cannot function      |\n| `task.md`            | ERROR | Must fix - progress tracking impossible |\n| `persona.md`         | WARN  | Recommended for consistent voice        |\n| `project-context.md` | WARN  | Recommended for research context        |\n| `CLAUDE.md`          | WARN  | Recommended for session continuity      |\n\n### For ERROR level (plan.md, task.md missing)\n\nIf `$ARGUMENTS` contains \"--check\":\n\n- Report the error and continue\n\nIf `$ARGUMENTS` contains \"--auto\":\n\n- Suggest running `/init`\n\nOtherwise, use AskUserQuestion:\n\n```\nquestions: [\n  {\n    question: \"{filename} not found. How would you like to fix this?\",\n    header: \"Missing\",\n    multiSelect: false,\n    options: [\n      {\n        label: \"Run /init (Recommended)\",\n        description: \"Initialize complete project structure\"\n      },\n      {\n        label: \"Create empty template\",\n        description: \"Create minimal file structure\"\n      },\n      {\n        label: \"Skip for now\",\n        description: \"Continue without fixing\"\n      }\n    ]\n  }\n]\n```\n\n**Fix Actions:**\n\n- \"Run /init\": Output message suggesting user run `/init`\n- \"Create empty template\": Use Write tool to create minimal template\n\n### For WARN level (persona.md, project-context.md, CLAUDE.md missing)\n\nIf `$ARGUMENTS` contains \"--check\":\n\n- Report the warning and continue\n\nIf `$ARGUMENTS` contains \"--auto\":\n\n- Skip (warnings don't auto-fix)\n\nOtherwise, use AskUserQuestion:\n\n```\nquestions: [\n  {\n    question: \"{filename} not found (recommended). Create from template?\",\n    header: \"Recommend\",\n    multiSelect: false,\n    options: [\n      {\n        label: \"Yes, create from template\",\n        description: \"Create file with default structure\"\n      },\n      {\n        label: \"Skip for now\",\n        description: \"Continue without this file\"\n      }\n    ]\n  }\n]\n```\n\n**Fix Actions:**\n\n- \"Yes, create from template\": Read the appropriate template from `project-scaffolder` skill and use Write tool\n\n### Template Reference (from project-scaffolder skill)\n\nWhen creating missing files, Read the corresponding template:\n\n| Missing File         | Template to Read                                        |\n| -------------------- | ------------------------------------------------------- |\n| `plan.md`            | `skills/project-scaffolder/plan-template.md`            |\n| `task.md`            | `skills/project-scaffolder/task-template.md`            |\n| `persona.md`         | `skills/project-scaffolder/persona-template.md`         |\n| `project-context.md` | `skills/project-scaffolder/project-context-template.md` |\n| `CLAUDE.md`          | `skills/project-scaffolder/claude-md-template.md`       |\n\n**Process:**\n\n1. Read the template file from the skill directory\n2. Write the template content to the missing file location\n3. Inform user that placeholders (e.g., `{PROJECT_TITLE}`) need to be filled in\n\n---\n\n## Step 2: Check Cross-File Consistency (Category 2)\n\nCompare content across files for consistency.\n\n### 2.1 plan.md â†” task.md Comparison\n\nRead both files and check:\n\n1. **Section Count Match**\n   - Count sections in plan.md (pattern: `### X.Y` or numbered items with page counts)\n   - Count checkbox items in task.md (pattern: `- [ ]` or `- [x]`)\n   - Flag if counts differ\n\n2. **Section ID Match**\n   - Extract section IDs from plan.md\n   - Extract section references from task.md\n   - Find sections in plan.md but not in task.md\n   - Find sections in task.md but not in plan.md\n\n3. **Page Allocation Match**\n   - Extract page counts from plan.md (pattern: `(Xp)` or `X pages`)\n   - Compare with any page references in task.md\n\n### For each inconsistency found\n\nIf `$ARGUMENTS` contains \"--check\":\n\n- Report and continue\n\nIf `$ARGUMENTS` contains \"--auto\":\n\n- Sync from plan.md to task.md (plan.md is source of truth)\n\nOtherwise, use AskUserQuestion:\n\n```\nquestions: [\n  {\n    question: \"Section {X.Y} exists in plan.md but missing in task.md. How to fix?\",\n    header: \"Sync\",\n    multiSelect: false,\n    options: [\n      {\n        label: \"Add to task.md (Recommended)\",\n        description: \"Sync from plan.md (source of truth)\"\n      },\n      {\n        label: \"Remove from plan.md\",\n        description: \"Sync from task.md instead\"\n      },\n      {\n        label: \"Skip\",\n        description: \"Leave inconsistency\"\n      }\n    ]\n  }\n]\n```\n\n**Fix Actions:**\n\n- \"Add to task.md\": Use Edit tool to add missing section to task.md\n- \"Remove from plan.md\": Use Edit tool to remove section from plan.md\n\n### 2.2 plan.md â†” CLAUDE.md Comparison (if CLAUDE.md exists)\n\nCheck:\n\n- Session count consistency\n- Structure description accuracy\n\nFor inconsistencies, offer to update CLAUDE.md (it should reflect plan.md).\n\n### 2.3 task.md â†” CLAUDE.md Comparison (if CLAUDE.md exists)\n\nCheck:\n\n- Session boundary comments match\n- Section references are accurate\n\n---\n\n## Step 3: Check Completion Status (Category 3)\n\nCompare task.md checkboxes with actual files in docs/.\n\n### 3.1 Task Marked Complete but File Missing\n\nFor each `[x]` in task.md:\n\n- Extract expected filename (pattern: `{chapter}-{section}-{slug}.md`)\n- Check if `docs/{filename}` exists\n- Flag if file missing\n\nIf `$ARGUMENTS` contains \"--check\":\n\n- Report and continue\n\nIf `$ARGUMENTS` contains \"--auto\":\n\n- Uncheck the task in task.md\n\nOtherwise, use AskUserQuestion:\n\n```\nquestions: [\n  {\n    question: \"Task {X.Y} marked [x] but docs/{filename}.md not found. How to fix?\",\n    header: \"Missing\",\n    multiSelect: false,\n    options: [\n      {\n        label: \"Uncheck task (Recommended)\",\n        description: \"Mark as incomplete in task.md\"\n      },\n      {\n        label: \"Create empty document\",\n        description: \"Create placeholder file\"\n      },\n      {\n        label: \"Skip\",\n        description: \"Leave inconsistency\"\n      }\n    ]\n  }\n]\n```\n\n**Fix Actions:**\n\n- \"Uncheck task\": Use Edit tool to change `[x]` to `[ ]`\n- \"Create empty document\": Use Write tool to create minimal document\n\n### 3.2 File Exists but Task Not Checked\n\nFor each `.md` file in docs/:\n\n- Extract section ID from filename\n- Check if matching task shows `[x]`\n- Flag if task shows `[ ]`\n\nIf `$ARGUMENTS` contains \"--check\":\n\n- Report and continue\n\nIf `$ARGUMENTS` contains \"--auto\":\n\n- Check the task in task.md\n\nOtherwise, use AskUserQuestion:\n\n```\nquestions: [\n  {\n    question: \"docs/{filename}.md exists but task {X.Y} shows [ ]. How to fix?\",\n    header: \"Unchecked\",\n    multiSelect: false,\n    options: [\n      {\n        label: \"Mark as complete (Recommended)\",\n        description: \"Check [x] in task.md\"\n      },\n      {\n        label: \"Delete the file\",\n        description: \"Remove docs/{filename}.md\"\n      },\n      {\n        label: \"Skip\",\n        description: \"Leave inconsistency\"\n      }\n    ]\n  }\n]\n```\n\n**Fix Actions:**\n\n- \"Mark as complete\": Use Edit tool to change `[ ]` to `[x]`\n- \"Delete the file\": Use Bash to remove the file (with confirmation)\n\n---\n\n## Step 4: Output Summary\n\nAfter all checks complete, output a summary **in the detected language**.\n\n### English Example\n\n```\n=== Project Health Check ===\n\n[1/3] Required Files\n      âœ“ plan.md\n      âœ“ task.md\n      âœ“ persona.md\n      ! CLAUDE.md (recommended)\n      Fixed: 0 | Skipped: 1\n\n[2/3] Cross-File Consistency\n      Comparing plan.md â†” task.md...\n      âœ“ Section count matches (15)\n      âœ“ All sections synced\n      Fixed: 0 | Skipped: 0\n\n[3/3] Completion Status\n      Progress: 5/15 sections (33%)\n      âœ“ All completed tasks have files\n      âœ“ All files have matching tasks\n      Fixed: 0 | Skipped: 0\n\n=== Summary ===\nChecked: 3 categories\nIssues found: 1\nFixed: 0\nSkipped: 1 (CLAUDE.md recommended)\n\nProject health: GOOD\n```\n\n### Korean Example (í•œêµ­ì–´)\n\n```\n=== í”„ë¡œì íŠ¸ ìƒíƒœ ì ê²€ ===\n\n[1/3] í•„ìˆ˜ íŒŒì¼\n      âœ“ plan.md\n      âœ“ task.md\n      âœ“ persona.md\n      ! CLAUDE.md (ê¶Œì¥)\n      ìˆ˜ì •: 0 | ê±´ë„ˆëœ€: 1\n\n[2/3] íŒŒì¼ ê°„ ì¼ê´€ì„±\n      plan.md â†” task.md ë¹„êµ ì¤‘...\n      âœ“ ì„¹ì…˜ ìˆ˜ ì¼ì¹˜ (15ê°œ)\n      âœ“ ëª¨ë“  ì„¹ì…˜ ë™ê¸°í™”ë¨\n      ìˆ˜ì •: 0 | ê±´ë„ˆëœ€: 0\n\n[3/3] ì™„ë£Œ ìƒíƒœ\n      ì§„í–‰ë¥ : 5/15 ì„¹ì…˜ (33%)\n      âœ“ ì™„ë£Œëœ ì‘ì—…ì— íŒŒì¼ ì¡´ì¬\n      âœ“ ëª¨ë“  íŒŒì¼ì— ì‘ì—… í•­ëª© ì¡´ì¬\n      ìˆ˜ì •: 0 | ê±´ë„ˆëœ€: 0\n\n=== ìš”ì•½ ===\nì ê²€: 3ê°œ ì¹´í…Œê³ ë¦¬\në°œê²¬ëœ ë¬¸ì œ: 1ê°œ\nìˆ˜ì •ë¨: 0ê°œ\nê±´ë„ˆëœ€: 1ê°œ (CLAUDE.md ê¶Œì¥)\n\ní”„ë¡œì íŠ¸ ìƒíƒœ: ì–‘í˜¸\n```\n\n### Status Indicators\n\n| Status | English                   | í•œêµ­ì–´                |\n| ------ | ------------------------- | --------------------- |\n| âœ“      | Check passed              | í™•ì¸ë¨                |\n| âœ—      | Error found (must fix)    | ì˜¤ë¥˜ ë°œê²¬ (ìˆ˜ì • í•„ìš”) |\n| !      | Warning (recommended fix) | ê²½ê³  (ìˆ˜ì • ê¶Œì¥)      |\n| â†’      | Fixed during this run     | ì´ë²ˆ ì‹¤í–‰ì—ì„œ ìˆ˜ì •ë¨  |\n\n### Health Rating\n\n| English         | í•œêµ­ì–´    | Criteria                     |\n| --------------- | --------- | ---------------------------- |\n| GOOD            | ì–‘í˜¸      | No errors, may have warnings |\n| NEEDS_ATTENTION | ì£¼ì˜ í•„ìš” | Has errors that were skipped |\n| CRITICAL        | ì‹¬ê°      | Required files missing       |\n\n---\n\n## Notes\n\n- plan.md is the source of truth for structure\n- task.md is the source of truth for completion status\n- When in doubt, preserve data (don't delete without confirmation)\n- Group related issues when presenting to user\n- Be concise but informative in output"
              },
              {
                "name": "/init",
                "description": "Initialize a new learning resource project through interactive interview. Creates plan.md, task.md, persona.md, project-context.md, interview-data.md, and CLAUDE.md. Supports multiple domains: technology, history, science, arts, and general.",
                "path": "plugins/dokhak/commands/init.md",
                "frontmatter": {
                  "description": "Initialize a new learning resource project through interactive interview. Creates plan.md, task.md, persona.md, project-context.md, interview-data.md, and CLAUDE.md. Supports multiple domains: technology, history, science, arts, and general.",
                  "allowed-tools": "Read, Write, Edit, Bash, Glob, WebSearch, WebFetch, Task, AskUserQuestion",
                  "argument-hint": "[--glm]",
                  "model": "opus"
                },
                "content": "# Initialize Self-Learning Resource Project\n\nInteractive interview-based project initialization for learning resources.\n\n---\n\n## Phase 1: Project Interview\n\n<communication_rules>\nCRITICAL: The interviewer agent communicates DIRECTLY with the user.\n\n- Do NOT add any introduction before launching the interviewer\n- Do NOT add transition messages like \"Starting interview...\" or \"Let me start the interview\"\n- Do NOT summarize or rephrase the agent's output after it completes\n- Let the conversation flow naturally as if the interviewer IS the main assistant\n- The user should feel they are talking to ONE entity, not being handed off to another\n\nWhen the interview completes, silently proceed to Phase 2 without announcing completion.\n</communication_rules>\n\n### Launch Project Interviewer\n\n```\nTask(\n  subagent_type=\"dokhak:project-interviewer\",\n  model=\"opus\",\n  description=\"Conduct project initialization interview\",\n  prompt=\"\"\"\n    <role>\n    You are a learning experience designer having a direct conversation with the learner.\n    You ARE the main assistant - not a separate tool or delegated agent.\n    </role>\n\n    <task>\n    Conduct an interview for project initialization following the project-interview skill.\n    </task>\n\n    <instructions>\n    1. Start immediately with your multilingual greeting - no preamble\n    2. Have a natural conversation to understand the learner\n    3. Generate persona.md and interview-data.md\n    4. Return results in project_metadata XML format\n    </instructions>\n\n    <output_format>\n    Use persona-template.md from project-scaffolder skill when creating persona.md.\n    </output_format>\n  \"\"\"\n)\n```\n\n### Interview Goals\n\nThrough natural conversation, understand:\n\n| What to Learn | How to Discover                                |\n| ------------- | ---------------------------------------------- |\n| Topic         | Open question: \"What would you like to learn?\" |\n| Domain        | Infer from topic, confirm if ambiguous         |\n| Motivation    | Ask why they want to learn this                |\n| Level         | Ask about background and experience            |\n| Preferences   | Discuss desired style and volume               |\n| Environment   | For technology: ask about OS/tools             |\n\nStore the returned `project_metadata` XML for subsequent phases.\n\n---\n\n## Argument Parsing\n\n**CRITICAL**: Parse the `--glm` flag from $ARGUMENTS:\n\n```\nuse_glm_tools = $ARGUMENTS.includes(\"--glm\") ? \"true\" : \"false\"\n```\n\nThe `use_glm_tools` value MUST be the string `\"true\"` or `\"false\"` for XML.\n\n---\n\n## Phase 2-6: Background Processing\n\n<background_processing_rules>\nAfter the interview completes, execute Phases 2-6 silently in sequence.\n\n- Do NOT announce each phase to the user (e.g., \"Now collecting research...\")\n- Do NOT show progress updates between phases\n- Process all phases quietly, then show only the final Completion Report\n- If any phase fails, note it in the report rather than interrupting with error messages\n  </background_processing_rules>\n\n### Phase 2: Research Collection\n\nUse the research-collector subagent with domain-adaptive strategy.\nResearch results are saved to `.research/init/` directory.\n\n```\nTask(\n  subagent_type=\"dokhak:research-collector\",\n  model=\"haiku\",\n  description=\"Research {topic} resources\",\n  prompt=\"\"\"\n    <research_request>\n      <topic>{topic}</topic>\n      <domain>{domain}</domain>\n      <audience_level>{audience}</audience_level>\n      <use_glm_tools>{use_glm_tools}</use_glm_tools>\n    </research_request>\n\n    Conduct research appropriate for this domain using the domain-profiles skill.\n    Save results to .research/init/ following research-storage skill conventions.\n    Return confirmation message only (not the research content).\n  \"\"\"\n)\n```\n\nAgent returns confirmation like:\n```\nresearch_saved:.research/init/\nsources:12\nconcepts:8\n```\n\n**IMPORTANT**: Do NOT store the research content. The confirmation message is sufficient.\n\n---\n\n### Phase 3: Create plan.md\n\nUse the structure-designer subagent to create plan.md.\nPass file PATHS only - structure-designer reads files directly.\n\n```\nTask(\n  subagent_type=\"dokhak:structure-designer\",\n  model=\"opus\",\n  description=\"Create plan.md structure\",\n  prompt=\"\"\"\n    <structure_request>\n      <topic>{topic}</topic>\n      <domain>{domain}</domain>\n      <volume>{pages} pages</volume>\n      <language>{lang}</language>\n      <audience>{audience}</audience>\n      <environment>{environment}</environment>\n    </structure_request>\n\n    <research_files>\n      <summary_path>.research/init/summary.md</summary_path>\n      <sources_path>.research/init/sources.md</sources_path>\n    </research_files>\n\n    Read the research files above using Read tool.\n    Create plan.md using the project-scaffolder skill as reference.\n  \"\"\"\n)\n```\n\n**IMPORTANT**: Do NOT Read the research files in this command. The structure-designer reads them directly in its isolated context.\n\n---\n\n### Phase 4: Create task.md\n\nUse the structure-designer subagent to create task.md with session distribution.\n\n```\nTask(\n  subagent_type=\"dokhak:structure-designer\",\n  model=\"opus\",\n  description=\"Create task.md with sessions\",\n  prompt=\"\"\"\n    Read plan.md and create task.md using the project-scaffolder skill as reference.\n    Split into sessions and mark session boundaries with HTML comments.\n  \"\"\"\n)\n```\n\n---\n\n### Phase 5: Create project-context.md\n\nCreate project-context.md with research results and domain-specific information.\n\n```\nUsing project-context-template.md from project-scaffolder skill as reference,\n\nCreate project-context.md with:\n- Research results from Phase 2 (authoritative sources)\n- Domain-specific context from {domain_specific} XML\n- Environment-specific notes (if technology)\n- Version information (if applicable)\n- Learning path recommendations\n- Prerequisites summary\n```\n\n---\n\n### Phase 6: Create CLAUDE.md\n\nCreate CLAUDE.md using claude-md-template.md from project-scaffolder skill as reference:\n\n- Project overview (topic, domain, audience)\n- Key skills and agents references (/write, researcher, writer)\n- Document structure guidelines\n- Writing persona summary (from persona.md)\n- Domain-specific guidelines (from domain-profiles)\n- Quality standards\n\n---\n\n## Completion Report\n\nAfter all phases complete, provide a summary:\n\n```\n=== Project Initialization Complete ===\n\nTopic: {topic}\nDomain: {domain}\nScope: {pages} pages in {lang}\nAudience: {audience}\nEnvironment: {environment} (if applicable)\n\nFiles Created:\n  âœ“ persona.md - Writer/Reader personas with {domain} guidelines\n  âœ“ interview-data.md - Interview transcript and insights\n  âœ“ plan.md - X Parts, Y Chapters, Z Sections\n  âœ“ task.md - N sessions\n  âœ“ project-context.md - Research and context\n  âœ“ CLAUDE.md - Project guidelines\n\nNext Steps:\n  1. Review plan.md structure\n  2. Review persona.md for accuracy\n  3. Run /write to start writing first section\n  4. Use /status to track progress\n```\n\n---\n\n## Variable Mapping\n\nInterview collects and maps the following variables:\n\n| Variable      | Source                     | Notes                                       |\n| ------------- | -------------------------- | ------------------------------------------- |\n| `topic`       | Conversation               | What the learner wants to learn             |\n| `domain`      | Inferred + confirmed       | technology, history, science, arts, general |\n| `pages`       | Conversation               | 50 (small), 100 (medium), 200 (large)       |\n| `lang`        | Detected from conversation | ko, en, etc.                                |\n| `audience`    | Inferred from background   | beginner, intermediate, advanced            |\n| `environment` | Conversation (tech only)   | linux, macos, windows, cross-platform       |\n| `motivation`  | Conversation               | Why they want to learn                      |\n| `preferences` | Conversation               | Learning style preferences                  |\n\n---\n\n## Error Recovery\n\n- If research yields limited results: Proceed with available information, note gaps\n- If page allocation doesn't sum correctly: Adjust proportionally\n- If any file creation fails: Report specific error, continue with others\n- If persona.md already exists: Ask user whether to overwrite or merge"
              },
              {
                "name": "/status",
                "description": "Show project progress and statistics. Displays completion percentage, Part/Chapter breakdown, and next pending tasks.",
                "path": "plugins/dokhak/commands/status.md",
                "frontmatter": {
                  "description": "Show project progress and statistics. Displays completion percentage, Part/Chapter breakdown, and next pending tasks.",
                  "allowed-tools": "Read, Grep, Glob, Bash(grep:*), Bash(head:*), Bash(wc:*)",
                  "model": "haiku"
                },
                "content": "# Project Status Command\n\n## Context\n\n- Completed tasks: !`grep -c \"\\[x\\]\" task.md 2>/dev/null || echo \"0\"`\n- Pending tasks: !`grep -c \"\\[ \\]\" task.md 2>/dev/null || echo \"0\"`\n- Plan metadata: !`head -20 plan.md 2>/dev/null || echo \"No plan.md found\"`\n\n## Task\n\nGenerate a progress report for this learning resource project.\n\n### Step 1: Check Prerequisites\n\nIf task.md does not exist, report:\n```\nError: task.md not found.\nRun /init first to initialize the project.\n```\n\nIf plan.md does not exist, report:\n```\nError: plan.md not found.\nRun /init first to initialize the project.\n```\n\n### Step 2: Extract Project Information\n\nFrom plan.md, extract:\n- Project title (first # heading)\n- Target System\n- Target Audience\n- Total Estimated Pages\n\n### Step 3: Calculate Progress by Part\n\nFor each Part in task.md:\n1. Count `[x]` (completed) items\n2. Count `[ ]` (pending) items\n3. Calculate percentage\n\n### Step 4: Identify Next Tasks\n\nList the first 3-5 uncompleted `[ ]` items from task.md.\n\n### Step 5: Output Format\n\nUse this exact format:\n\n```\n=== Learning Resource Status ===\n\nTopic: {PROJECT_TITLE}\nProgress: {COMPLETED}/{TOTAL} sections ({PERCENTAGE}%)\nPages: ~{ESTIMATED_DONE}/{TOTAL_PAGES} estimated\n\nPart 1: {STATUS} ({DONE}/{TOTAL})\nPart 2: {STATUS} ({DONE}/{TOTAL})\n...\n\nNext tasks:\n  [ ] {SECTION_NUMBER} {SECTION_TITLE} ({PAGES}p)\n  [ ] {SECTION_NUMBER} {SECTION_TITLE} ({PAGES}p)\n  [ ] {SECTION_NUMBER} {SECTION_TITLE} ({PAGES}p)\n```\n\nStatus labels:\n- \"Complete\" if all items done\n- \"In Progress\" if some items done\n- \"Pending\" if no items done\n\n### Notes\n\n- Page estimation: assume completed sections contribute their planned pages\n- If Part structure is unclear, group by Chapter instead\n- Keep output concise and scannable"
              },
              {
                "name": "/write",
                "description": "Write the next document section using researcher->writer->reviewer pipeline. Identifies next incomplete task, gathers research, writes document, and reviews quality. Supports domain-adaptive content generation (technology, history, science, arts, general).",
                "path": "plugins/dokhak/commands/write.md",
                "frontmatter": {
                  "description": "Write the next document section using researcher->writer->reviewer pipeline. Identifies next incomplete task, gathers research, writes document, and reviews quality. Supports domain-adaptive content generation (technology, history, science, arts, general).",
                  "allowed-tools": "Read, Grep, Glob, Task, Edit",
                  "argument-hint": "[section-id] [--skip-review] [--glm]",
                  "model": "opus"
                },
                "content": "# Write Document\n\nWrite the next incomplete section from task.md, or a specific section if provided via $ARGUMENTS.\n\n## Context Files\n\n- Persona: @persona.md\n- Project Context: @project-context.md\n\n## Current State\n\n- Next task: !`grep -m1 \"\\[ \\]\" task.md 2>/dev/null || echo \"No task.md found\"`\n\n## Process\n\n### 1. Identify Target Section and Parse Flags\n\n**CRITICAL**: Parse flags from $ARGUMENTS first:\n\n```\nskip_review = $ARGUMENTS.includes(\"--skip-review\")\nuse_glm_tools = $ARGUMENTS.includes(\"--glm\") ? \"true\" : \"false\"\nsection_id = $ARGUMENTS.replace(\"--skip-review\", \"\").replace(\"--glm\", \"\").trim()\n```\n\nIf section_id is empty after flag removal, parse task.md for the first `[ ]` item.\n\nExtract:\n\n- Section ID (e.g., \"3.2\")\n- Section title\n\n### 2. Get Section Details and Domain\n\nRead plan.md and extract details for the target section:\n\n- Full title\n- Estimated page count\n- Subtopics to cover\n- Part/Chapter context\n\nRead persona.md and extract domain information:\n\n- Domain (from Domain Guidelines section header, e.g., \"Domain Guidelines: Technology\" â†’ technology)\n- If no Domain Guidelines section, default to \"technology\" for backward compatibility\n\nDomain values: technology, history, science, arts, general\n\n### 3. Resolve Research Directory\n\n**CRITICAL**: Use multi-tier search to find existing research directories. This handles naming inconsistencies from different generation sources.\n\n#### 3.1 Normalize Identifiers\n\nApply normalization functions from research-storage skill:\n\n```\n# Extract chapter and section from section ID (e.g., \"1.2\" or \"01-2\")\nraw_chapter = extract_chapter(section_id)\nraw_section = extract_section(section_id)\n\n# Normalize to canonical format\ncanonical_chapter = normalizeChapter(raw_chapter)\n  # \"1\" â†’ \"01\", \"01\" â†’ \"01\", \"10\" â†’ \"10\"\n\ncanonical_section = normalizeSection(raw_section)\n  # \"1\" â†’ \"1\", \"01\" â†’ \"1\", \"02\" â†’ \"2\"\n\ncanonical_slug = generateSlug(section_title)\n  # \"Core Concepts\" â†’ \"core-concepts\"\n  # \"What is React?\" â†’ \"what-is-react\"\n\ncanonical_path = \".research/sections/{canonical_chapter}-{canonical_section}-{canonical_slug}/\"\n```\n\n#### 3.2 Multi-Tier Search\n\n> **âš ï¸ Glob Returns Files Only**\n>\n> Glob does NOT return directories. All patterns MUST end with `/research.md`.\n>\n> | Pattern | Result |\n> |---------|--------|\n> | `.research/sections/*9-1*` | âŒ Empty |\n> | `.research/sections/*9-1*/research.md` | âœ… Works |\n\nExecute searches in order. Stop at first match:\n\n```\n# Tier 1: Exact canonical match\ntier1_result = Glob(\"{canonical_path}research.md\")\n\nIF tier1_result is not empty:\n  resolved_dir = canonical_path\n  existing_research = true\n  match_tier = 1\nELSE:\n  # Tier 2: Canonical chapter-section, any slug\n  tier2_result = Glob(\".research/sections/{canonical_chapter}-{canonical_section}-*/research.md\")\n\n  IF tier2_result is not empty:\n    resolved_dir = parent_directory(tier2_result[0])\n    existing_research = true\n    match_tier = 2\n  ELSE:\n    # Tier 3: Non-padded chapter variation\n    raw_chapter_str = String(parseInt(raw_chapter, 10))  # \"01\" â†’ \"1\"\n    tier3_result = Glob(\".research/sections/{raw_chapter_str}-{canonical_section}-*/research.md\")\n\n    IF tier3_result is not empty:\n      resolved_dir = parent_directory(tier3_result[0])\n      existing_research = true\n      match_tier = 3\n    ELSE:\n      # Tier 4: Flexible pattern with first keyword\n      first_keyword = canonical_slug.split('-')[0]  # \"core-concepts\" â†’ \"core\"\n      tier4_result = Glob(\".research/sections/*-{canonical_section}-*{first_keyword}*/research.md\")\n\n      IF tier4_result is not empty:\n        resolved_dir = parent_directory(tier4_result[0])\n        existing_research = true\n        match_tier = 4\n      ELSE:\n        # No existing research found - use canonical path for new directory\n        resolved_dir = canonical_path\n        existing_research = false\n        match_tier = \"new\"\n```\n\n#### 3.3 Resolution Summary\n\nStore the resolution results for use in subsequent steps:\n\n```\nresolved_dir = {matched_directory OR canonical_path}\nexisting_research = {true if any tier matched}\nmatch_tier = {1|2|3|4|new}\n```\n\n**IMPORTANT**: Use `resolved_dir` when invoking researcher and writer agents, NOT the originally generated path.\n\n### 4. Research Phase\n\nInvoke the researcher agent to gather information.\nResearch results are saved to `{resolved_dir}` (from Step 3).\n\n```\nTask(\n  subagent_type=\"dokhak:researcher\",\n  model=\"haiku\",\n  description=\"Research for {section_title}\",\n  prompt=\"\"\"\n    <research_request>\n      <section>\n        <id>{canonical_chapter}-{canonical_section}</id>\n        <slug>{canonical_slug}</slug>\n        <title>{section_title}</title>\n      </section>\n      <subtopics>\n        <subtopic>{subtopic 1}</subtopic>\n        <subtopic>{subtopic 2}</subtopic>\n        ...\n      </subtopics>\n      <domain>{domain}</domain>\n      <audience_level>{audience_level}</audience_level>\n      <output_dir>{resolved_dir}</output_dir>\n      <existing_research>{existing_research}</existing_research>\n      <use_glm_tools>{use_glm_tools}</use_glm_tools>\n    </research_request>\n\n    Follow domain-specific search strategy using domain-profiles skill.\n    Save results following research-storage skill conventions.\n    The researcher will perform its own directory resolution to validate the path.\n    Return confirmation message only (not the research content).\n  \"\"\"\n)\n```\n\nAgent returns confirmation like:\n```\nresearch_saved:{resolved_path}\nsources:5\nsubtopics_covered:4/4\nmatch_tier:1\n```\n\n**IMPORTANT**: Do NOT store the research content. The confirmation message is sufficient. Parse `research_saved:` to get the actual path used by researcher (may differ if researcher resolved differently).\n\n### 5. Writing Phase\n\nInvoke the writer agent with file PATHS only.\nWriter reads context files directly in its isolated context.\n\n**IMPORTANT**: Use the path from researcher's confirmation (`research_saved:`) to ensure consistency. If researcher resolved to a different path, use that path.\n\n```\n# Parse researcher's confirmation to get actual research path\nactual_research_dir = parse_research_saved_path(researcher_confirmation)\n# e.g., \"research_saved:.research/sections/01-2-core-concepts/\" â†’ \".research/sections/01-2-core-concepts/\"\n\nTask(\n  subagent_type=\"dokhak:writer\",\n  model=\"opus\",\n  description=\"Write {section_title}\",\n  prompt=\"\"\"\n    <writing_request>\n      <section>\n        <title>{section_title}</title>\n        <id>{canonical_chapter}-{canonical_section}</id>\n        <page_count>{page_count}</page_count>\n        <subtopics>{subtopics}</subtopics>\n        <part_context>{part_title}</part_context>\n        <chapter_context>{chapter_title}</chapter_context>\n      </section>\n      <domain>{domain}</domain>\n      <output_path>docs/{canonical_chapter}-{canonical_section}-{canonical_slug}.md</output_path>\n      <use_glm_tools>{use_glm_tools}</use_glm_tools>\n    </writing_request>\n\n    <context_files>\n      <persona_path>persona.md</persona_path>\n      <project_context_path>project-context.md</project_context_path>\n      <research_path>{actual_research_dir}research.md</research_path>\n      <sources_path>{actual_research_dir}sources.md</sources_path>\n      <init_summary_path>.research/init/summary.md</init_summary_path>\n    </context_files>\n\n    Read the context files above using Read tool (priority order: persona â†’ research â†’ sources â†’ project_context â†’ init_summary).\n\n    Instructions:\n    - Adopt the persona completely\n    - Match the project's language\n    - Respect the page count (1 page â‰ˆ 50-70 lines, excluding frontmatter)\n    - Apply domain-specific writing style\n    - Follow Domain Guidelines from persona.md\n    - Structure is YOUR decision based on content\n    - Write the file directly using Write tool\n    - Return confirmation message only (not the document content)\n  \"\"\"\n)\n```\n\nAgent returns confirmation like:\n```\ndocument_written:docs/{canonical_chapter}-{canonical_section}-{canonical_slug}.md\nlines:{line_count}\n```\n\n**IMPORTANT**: Do NOT Read the context files in this command. The writer reads them directly in its isolated context.\n\n### 5.5 Determine Previous Section\n\nCalculate the previous section path for coherence review:\n\n1. Parse `canonical_section` to get section number (S)\n2. Parse `canonical_chapter` to get chapter number (C)\n\n**Resolution logic**:\n\n```\nIF S > 1:\n  # Previous section is in same chapter\n  prev_section = S - 1\n  prev_chapter = canonical_chapter\n  previous_section_path = Glob(\"docs/{prev_chapter}-{prev_section}-*.md\")[0] OR \"none\"\n\nELSE IF S == 1 AND parseInt(canonical_chapter) > 1:\n  # First section of chapter - get last section of previous chapter\n  prev_chapter = normalizeChapter(parseInt(canonical_chapter) - 1)\n  # Find all sections in previous chapter, get the last one\n  prev_chapter_files = Glob(\"docs/{prev_chapter}-*-*.md\")\n  IF prev_chapter_files not empty:\n    # Sort by section number and get last\n    previous_section_path = prev_chapter_files[last]\n  ELSE:\n    previous_section_path = \"none\"\n\nELSE:\n  # First section of first chapter\n  previous_section_path = \"none\"\n```\n\nStore `previous_section_path` for use in review phase.\n\n### 6. Review Phase (if --skip-review not set)\n\nIf $ARGUMENTS contains \"--skip-review\":\n- Skip to Step 8 (Update Task Status)\n\nOtherwise, invoke the reviewer agent:\n\n```\nTask(\n  subagent_type=\"dokhak:reviewer\",\n  model=\"haiku\",\n  description=\"Review {section_title}\",\n  prompt=\"\"\"\n    <review_request>\n      <document_path>docs/{canonical_chapter}-{canonical_section}-{canonical_slug}.md</document_path>\n      <persona_path>persona.md</persona_path>\n      <previous_section>{previous_section_path}</previous_section>\n      <docs_directory>docs/</docs_directory>\n      <target_pages>{page_count}</target_pages>\n      <domain>{domain}</domain>\n    </review_request>\n  \"\"\"\n)\n```\n\nStore the result as `review_result`.\n\n### 7. Revision Phase (if needed)\n\nParse `review_result` XML and check `<summary status=\"...\">`:\n\n**If status=\"NEEDS_REVISION\":**\n\nExtract `<revision_suggestions>` and invoke writer agent for revision:\n\n```\nTask(\n  subagent_type=\"dokhak:writer\",\n  model=\"opus\",\n  description=\"Revise {section_title}\",\n  prompt=\"\"\"\n    ## Persona\n    {full content of persona.md}\n\n    ## Project Context\n    {full content of project-context.md}\n\n    ## Domain\n    {domain}\n\n    ## Original Document\n    {content of docs/{section_id}-{slugified_title}.md}\n\n    ## Review Feedback\n    {revision_suggestions from review_result}\n\n    ## Instructions\n    - Focus ONLY on the issues listed in revision suggestions\n    - Do NOT rewrite the entire document\n    - Apply fixes for high-priority items first\n    - Maintain existing structure and voice\n    - Write the revised file directly using Write tool\n  \"\"\"\n)\n```\n\n**Important:** Only ONE revision is allowed to prevent infinite loops. After revision, proceed directly to Step 8.\n\n**If status=\"PASS\":**\n- Proceed to Step 8\n\n### 8. Update Task Status\n\nAfter successful writing (and optional review/revision):\n\n1. Find the completed task line in task.md\n2. Change `[ ]` to `[x]`\n3. Report completion to user\n\n## Output\n\nReport the completion:\n\n```\nâœ“ {section_id} {section_title} written\n  Domain: {domain}\n  File: docs/{filename}.md\n  Review: {PASS|REVISED|SKIPPED}\n  Next: {next_incomplete_section or \"All sections complete\"}\n```\n\n## Error Handling\n\n- If persona.md is missing: Proceed with generic writer persona, default domain to \"general\"\n- If project-context.md is missing: Warn user, proceed with minimal context\n- If domain cannot be determined: Default to \"technology\" for backward compatibility\n- If research returns empty: Writer uses LLM knowledge only\n- If writer fails: Do NOT update task.md, report error\n- If reviewer fails: Log warning, proceed to completion (treat as --skip-review)\n- If revision fails: Do NOT update task.md, report error with original review feedback"
              }
            ],
            "skills": [
              {
                "name": "domain-profiles",
                "description": "Domain-specific configuration profiles for learning resource creation. Defines search strategies, special fields, terminology policies, and content structures for different academic domains: technology, history, science, arts, and general. Use when researcher or writer agents need domain-adapted behavior.",
                "path": "plugins/dokhak/skills/domain-profiles/SKILL.md",
                "frontmatter": {
                  "name": "domain-profiles",
                  "description": "Domain-specific configuration profiles for learning resource creation. Defines search strategies, special fields, terminology policies, and content structures for different academic domains: technology, history, science, arts, and general. Use when researcher or writer agents need domain-adapted behavior.",
                  "allowed-tools": "Read, WebSearch, WebFetch",
                  "user-invocable": false
                },
                "content": "# Domain Profiles Skill\n\nThis skill provides domain-specific configurations for learning resource creation.\n\n## When to Use\n\n- During `/init` Phase 2 (Research Collection)\n- When researcher agent needs domain-specific search strategies\n- When writer agent needs domain-adapted content structure\n- When creating persona.md with Domain Guidelines section\n\n## Available Profiles\n\n| Profile    | File                           | Description                                    |\n| ---------- | ------------------------------ | ---------------------------------------------- |\n| Technology | [technology.md](technology.md) | Programming, frameworks, tools, APIs           |\n| History    | [history.md](history.md)       | Historical events, periods, civilizations      |\n| Science    | [science.md](science.md)       | Physics, chemistry, biology, mathematics       |\n| Arts       | [arts.md](arts.md)             | Visual arts, music, performing arts            |\n| General    | [language.md](language.md)     | General topics, linguistics, language learning |\n\n**Note**: The \"general\" domain uses `language.md` profile, which contains broadly applicable patterns for educational content.\n\n## Profile Structure\n\nEach profile contains:\n\n### 1. Search Strategy\n\nAuthoritative sources and search query patterns for the domain.\n\n### 2. Special Fields\n\nDomain-specific metadata fields to collect and include.\n\n### 3. Terminology Policy\n\nHow to handle technical terms, translations, and citations.\n\n### 4. Content Structure\n\nRecommended document organization and pedagogical approach.\n\n## Standard Loading Pattern\n\nAll agents should load domain profiles using this standardized pattern:\n\n```\nRead(\"skills/domain-profiles/{domain}.md\")\n```\n\n**Domain to File Mapping**:\n\n| Input Domain | File to Read |\n|--------------|--------------|\n| technology | technology.md |\n| history | history.md |\n| science | science.md |\n| arts | arts.md |\n| general | language.md |\n\n**IMPORTANT**: When domain is \"general\", agents MUST read `language.md`, not \"general.md\" (which doesn't exist).\n\n### Agent-Specific Usage\n\n| Agent | Sections to Extract |\n|-------|---------------------|\n| researcher | Search Strategy, Special Fields, Quality Indicators |\n| research-collector | Search Strategy, Special Fields |\n| writer | Content Structure, Terminology Policy |\n| reviewer | Review Criteria (Critical Checks, Quality Checks, Style Checks) |\n\n## Usage Example\n\n```\n# In researcher agent prompt\nRead(\"skills/domain-profiles/technology.md\")\n# Extract Search Strategy section for domain-appropriate queries\n\n# In writer agent prompt\nRead(\"skills/domain-profiles/technology.md\")\n# Apply Content Structure and Terminology Policy to document\n```\n\n## Domain Detection\n\nDomains are determined by the project-interviewer during the interview:\n\n| Domain           | Typical Topics                         |\n| ---------------- | -------------------------------------- |\n| technology       | Python, React, Docker, API, í”„ë¡œê·¸ë˜ë° |\n| history          | ì¡°ì„ ì‹œëŒ€, ë¥´ë„¤ìƒìŠ¤, ì„¸ê³„ëŒ€ì „, ë¬¸ëª…     |\n| science          | ì–‘ìì—­í•™, ë¯¸ì ë¶„, ì„¸í¬ìƒë¬¼í•™, í™”í•™     |\n| arts             | ìœ í™”, ì‘ê³¡, ì¡°ê°, ì—°ê¸°, ë””ìì¸         |\n| language/general | ì–¸ì–´í•™, ê¸€ì“°ê¸°, ì¼ë°˜ êµì–‘              |\n\n## Fallback Behavior\n\nIf domain is unclear or \"general\", use:\n\n- Broad academic search strategies\n- Minimal special fields\n- Standard terminology policy\n- Flexible content structure"
              },
              {
                "name": "project-interview",
                "description": "Resources for conversational interviews to create learner profiles. Used by project-interviewer agent during /init.",
                "path": "plugins/dokhak/skills/project-interview/SKILL.md",
                "frontmatter": {
                  "name": "project-interview",
                  "description": "Resources for conversational interviews to create learner profiles. Used by project-interviewer agent during /init.",
                  "allowed-tools": "Read, Write, AskUserQuestion",
                  "user-invocable": false
                },
                "content": "# Project Interview Skill\n\nThis skill provides resources for conducting natural, conversational interviews with learners.\n\n## Core Principle\n\n**One goal**: Gather enough information to create a persona.md that fits the learner.\n\nWhat to understand:\n\n- What they want to learn (topic)\n- Why they want to learn it (motivation, context)\n- How much they already know (level)\n- What kind of document they want (volume, style)\n\n## Resources\n\n| Resource | Purpose |\n| -------- | ------- |\n| [conversation-flow.md](conversation-flow.md) | Example conversations for reference |\n| [interview-data-template.md](interview-data-template.md) | Template for saving conversation records |\n\n## Approach\n\nInstead of following rigid rules, act like a good counselor:\n\n- Start with open questions\n- Read a lot from what the learner says\n- Ask more naturally when information is lacking\n- Show the profile summary when you've understood enough\n- Reflect any corrections they request\n\n## Output\n\n1. **persona.md** - Use template from project-scaffolder skill\n2. **interview-data.md** - Save conversation record\n3. **project_metadata XML** - Return to calling command"
              },
              {
                "name": "project-scaffolder",
                "description": "Creates plan.md, task.md, persona.md, project-context.md, and CLAUDE.md for new self-learning resource projects. Use when: (1) /init command is invoked, (2) setting up a new tutorial/guide/documentation project, (3) structure-designer agent needs templates for learning resource structure design. Provides hierarchical Part/Chapter/Section templates with page allocation.",
                "path": "plugins/dokhak/skills/project-scaffolder/SKILL.md",
                "frontmatter": {
                  "name": "project-scaffolder",
                  "description": "Creates plan.md, task.md, persona.md, project-context.md, and CLAUDE.md for new self-learning resource projects. Use when: (1) /init command is invoked, (2) setting up a new tutorial/guide/documentation project, (3) structure-designer agent needs templates for learning resource structure design. Provides hierarchical Part/Chapter/Section templates with page allocation.",
                  "allowed-tools": "Read, Write, Bash, Glob",
                  "user-invocable": false
                },
                "content": "# Project Scaffolder Skill\n\nThis skill provides templates and guidance for scaffolding new self-learning resource projects.\n\n## Templates\n\nThe following templates are available in this skill directory:\n\n| Template | Purpose |\n|----------|---------|\n| [plan-template.md](plan-template.md) | Project structure with Part/Chapter/Section hierarchy |\n| [task-template.md](task-template.md) | Session-based task checklist mirroring plan.md |\n| [persona-template.md](persona-template.md) | Writer/Reader persona and code policy definitions |\n| [project-context-template.md](project-context-template.md) | Target environment and reference URLs |\n| [claude-md-template.md](claude-md-template.md) | CLAUDE.md project instructions |\n\n## Workflow\n\n### 1. Information Gathering\n\nBefore scaffolding, collect the following information:\n\n- **Topic**: Subject of the learning resource\n- **Total Pages**: Estimated page count (50/100/200+)\n- **Language**: Primary language (ko/en)\n- **Target Audience**: Experience level (beginner/intermediate/advanced)\n- **Target Environment**: OS, tools, versions\n\n### 2. File Generation Order\n\n1. `plan.md` - Main structure document (use plan-template.md)\n2. `task.md` - Session-divided checklist (use task-template.md)\n3. `persona.md` - Writer/Reader definitions (use persona-template.md)\n4. `project-context.md` - Environment and references (use project-context-template.md)\n5. `CLAUDE.md` - Project instructions for Claude (use claude-md-template.md)\n\n### 3. Structure Guidelines\n\n#### Hierarchy\n\n- **Part**: Major theme (50-100 pages), contains 3-6 chapters\n- **Chapter**: Topic group (15-30 pages), contains 3-5 sections\n- **Section**: Single concept (5-12 pages)\n\n#### Page Allocation Formula\n\n| Content Type | Percentage |\n|--------------|------------|\n| Introduction/Overview | 5-8% |\n| Core Content | 60-70% |\n| Practice/Examples | 20-25% |\n| Summary/Review | 5-8% |\n\n### 4. Session Division Rules\n\nWhen creating task.md, divide work into Claude Code sessions:\n\n- **1 session** = 3-5 sections or 20-40 pages\n- Group sections within the same Chapter/Part\n- Consider dependencies (prerequisite â†’ subsequent)\n- Mark session boundaries with HTML comments:\n\n```markdown\n<!-- Session 1: Part 1 Foundations -->\n- [ ] 1.1 Introduction (8p)\n- [ ] 1.2 Core Concepts (7p)\n\n<!-- Session 2: Part 1 Architecture -->\n- [ ] 1.3 System Design (10p)\n```\n\n### 5. Placeholder Variables\n\nUse `{VARIABLE_NAME}` format for all placeholders:\n\n| Variable | Description |\n|----------|-------------|\n| `{PROJECT_TITLE}` | Project name |\n| `{TARGET_SYSTEM}` | Target OS/environment |\n| `{TARGET_AUDIENCE}` | Reader experience level |\n| `{TOTAL_PAGES}` | Total estimated pages |\n| `{DATE}` | Creation/update date |\n| `{PART_TITLE}` | Part title |\n| `{CHAPTER_TITLE}` | Chapter title |\n| `{SECTION_TITLE}` | Section title |\n| `{PAGES}` | Page count for section |\n\n## Quality Checklist\n\nBefore completing scaffolding, verify:\n\n- [ ] All placeholder variables use `{VARIABLE_NAME}` format\n- [ ] plan.md has proper Part/Chapter/Section hierarchy\n- [ ] task.md mirrors plan.md structure exactly\n- [ ] Session boundaries are marked with HTML comments\n- [ ] Page allocations sum to total target pages\n- [ ] All template files are properly referenced"
              },
              {
                "name": "research-storage",
                "description": "Research file storage conventions and templates for dokhak agents. Use when: (1) saving research results from research-collector or researcher agents, (2) reading cached research files, (3) checking if research exists for a section. Provides directory structure, file format templates, and naming conventions.",
                "path": "plugins/dokhak/skills/research-storage/SKILL.md",
                "frontmatter": {
                  "name": "research-storage",
                  "description": "Research file storage conventions and templates for dokhak agents. Use when: (1) saving research results from research-collector or researcher agents, (2) reading cached research files, (3) checking if research exists for a section. Provides directory structure, file format templates, and naming conventions.",
                  "allowed-tools": "Read, Write, Glob",
                  "user-invocable": false
                },
                "content": "# Research Storage Skill\n\nThis skill defines conventions for storing and retrieving research data collected by dokhak agents. Research files are cached to enable reuse and reduce redundant web searches.\n\n## Quick Reference for Agents\n\n| Agent | Uses This Skill For |\n|-------|---------------------|\n| researcher | Directory resolution, research.md writing, multi-tier lookup |\n| research-collector | summary.md, sources.md writing to `.research/init/` |\n| writer | Reading research files (read-only) |\n| structure-designer | Reading init research (read-only) |\n\n### Standard Loading Pattern\n\nAll agents should reference this skill for:\n- **Normalization functions**: normalizeChapter, normalizeSection, generateSlug\n- **Multi-tier directory resolution**: Handling legacy naming inconsistencies\n- **File format templates**: research.md, sources.md, summary.md\n\n```\nRead(\"skills/research-storage/SKILL.md\")\n```\n\n## Directory Structure\n\n```\nproject-root/\nâ”œâ”€â”€ .research/                          # Research cache directory\nâ”‚   â”œâ”€â”€ init/                           # /init command research\nâ”‚   â”‚   â”œâ”€â”€ summary.md                  # Structured research summary\nâ”‚   â”‚   â””â”€â”€ sources.md                  # Source registry with reliability\nâ”‚   â”‚\nâ”‚   â””â”€â”€ sections/                       # /write command section research\nâ”‚       â”œâ”€â”€ 01-1-introduction/\nâ”‚       â”‚   â”œâ”€â”€ research.md             # Section research results\nâ”‚       â”‚   â””â”€â”€ sources.md              # Section sources\nâ”‚       â”œâ”€â”€ 01-2-core-concepts/\nâ”‚       â”‚   â”œâ”€â”€ research.md\nâ”‚       â”‚   â””â”€â”€ sources.md\nâ”‚       â””â”€â”€ {chapter}-{section}-{slug}/\nâ”‚           â”œâ”€â”€ research.md\nâ”‚           â””â”€â”€ sources.md\n```\n\n## Naming Convention\n\n### Section Directory Pattern (CANONICAL)\n\nFormat: `{chapter}-{section}-{slug}`\n\n| Component | Format                  | Canonical Example | Non-canonical (avoid) |\n| --------- | ----------------------- | ----------------- | --------------------- |\n| chapter   | Zero-padded 2 digits    | `01`, `02`, `10`  | `1`, `2`              |\n| section   | Single digit (NO padding) | `1`, `2`, `3`   | `01`, `02`            |\n| slug      | Kebab-case lowercase    | `core-concepts`   | `Core-Concepts`       |\n\n**Canonical Examples**:\n\n- Chapter 1, Section 2, \"Core Concepts\" â†’ `01-2-core-concepts` âœ“\n- Chapter 3, Section 1, \"Getting Started\" â†’ `03-1-getting-started` âœ“\n- Chapter 10, Section 3, \"Advanced Patterns\" â†’ `10-3-advanced-patterns` âœ“\n\n**Non-canonical (may exist from legacy/inconsistency)**:\n\n- `1-2-core-concepts` (chapter not padded)\n- `01-02-core-concepts` (section padded)\n- `01-2-Core-Concepts` (slug not lowercase)\n\n## Normalization Functions\n\n**CRITICAL**: All agents MUST use these normalization functions to ensure consistency.\n\n### normalizeChapter(chapter)\n\nConverts any chapter format to canonical 2-digit zero-padded string.\n\n```\nInput: \"1\" or \"01\" or 1 or \"001\"\nOutput: \"01\" (always 2-digit zero-padded string)\n\nProcess:\n1. Convert to integer: parseInt(chapter, 10)\n2. Zero-pad to 2 digits: String(n).padStart(2, '0')\n\nExamples:\n- \"1\" â†’ \"01\"\n- \"01\" â†’ \"01\"\n- \"10\" â†’ \"10\"\n- 1 â†’ \"01\"\n- \"001\" â†’ \"01\"\n```\n\n### normalizeSection(section)\n\nConverts any section format to canonical single-digit string (no padding).\n\n```\nInput: \"1\" or \"01\" or 1\nOutput: \"1\" (single digit, no padding)\n\nProcess:\n1. Convert to integer: parseInt(section, 10)\n2. Convert to string: String(n)\n\nExamples:\n- \"1\" â†’ \"1\"\n- \"01\" â†’ \"1\"\n- \"3\" â†’ \"3\"\n- \"03\" â†’ \"3\"\n```\n\n### generateSlug(title)\n\nConverts title to canonical kebab-case slug.\n\n```\nInput: Any title string\nOutput: Lowercase kebab-case slug\n\nProcess:\n1. Convert to lowercase: title.toLowerCase()\n2. Replace spaces with hyphens: replace(/\\s+/g, '-')\n3. Remove special characters (keep a-z, 0-9, -): replace(/[^a-z0-9-]/g, '')\n4. Collapse multiple hyphens: replace(/-+/g, '-')\n5. Trim leading/trailing hyphens: replace(/^-|-$/g, '')\n\nExamples:\n- \"Core Concepts\" â†’ \"core-concepts\"\n- \"What is React?\" â†’ \"what-is-react\"\n- \"Setup & Installation\" â†’ \"setup-installation\"\n- \"  Multiple   Spaces  \" â†’ \"multiple-spaces\"\n- \"C++ Programming\" â†’ \"c-programming\"\n```\n\n### buildCanonicalPath(chapter, section, title)\n\nBuilds the canonical directory path.\n\n```\nInput: chapter, section, title\nOutput: \".research/sections/{canonical_chapter}-{canonical_section}-{canonical_slug}/\"\n\nProcess:\n1. canonical_chapter = normalizeChapter(chapter)\n2. canonical_section = normalizeSection(section)\n3. canonical_slug = generateSlug(title)\n4. return \".research/sections/{canonical_chapter}-{canonical_section}-{canonical_slug}/\"\n\nExample:\n- buildCanonicalPath(\"1\", \"02\", \"Core Concepts\")\n- â†’ \".research/sections/01-2-core-concepts/\"\n```\n\n## File Path Generation\n\n### For /init Research\n\n```\n.research/init/summary.md\n.research/init/sources.md\n```\n\n### For Section Research\n\n```\n.research/sections/{chapter}-{section}-{slug}/research.md\n.research/sections/{chapter}-{section}-{slug}/sources.md\n```\n\n**Example**: Section 1.2 \"Core Concepts\"\n\n```\n.research/sections/01-2-core-concepts/research.md\n.research/sections/01-2-core-concepts/sources.md\n```\n\n## File Format Templates\n\n### summary.md (for /init)\n\n```markdown\n# Research Summary\n\n> Generated: {YYYY-MM-DD}\n> Topic: {topic}\n> Domain: {domain}\n\n## Key Concepts\n\n### {Concept 1}\n\n- **Definition**: {clear definition}\n- **Importance**: {why it matters}\n- **Source**: [{source name}]({url})\n\n### {Concept 2}\n\n- **Definition**: {clear definition}\n- **Importance**: {why it matters}\n- **Source**: [{source name}]({url})\n\n## Learning Path\n\n1. **Prerequisites**: {comma-separated list}\n2. **Fundamentals**: {comma-separated list}\n3. **Core Skills**: {comma-separated list}\n4. **Advanced Topics**: {comma-separated list}\n\n## Current Trends ({current_year})\n\n- {trend 1 with source link}\n- {trend 2 with source link}\n\n## Domain-Specific Information\n\n{domain-specific sections based on domain-profiles skill}\n```\n\n### sources.md (for both /init and sections)\n\n```markdown\n# Source Registry\n\n> Section: {section_id or \"init\"}\n> Generated: {YYYY-MM-DD}\n\n## Primary Sources (High Reliability)\n\n| Source | URL   | Type          | Last Verified |\n| ------ | ----- | ------------- | ------------- |\n| {name} | {url} | Official Docs | {YYYY-MM-DD}  |\n| {name} | {url} | Official Docs | {YYYY-MM-DD}  |\n\n## Secondary Sources (Medium Reliability)\n\n| Source | URL   | Type     | Notes   |\n| ------ | ----- | -------- | ------- |\n| {name} | {url} | Tutorial | {notes} |\n| {name} | {url} | Blog     | {notes} |\n\n## Rejected Sources\n\n| Source | Reason            |\n| ------ | ----------------- |\n| {name} | Outdated (year)   |\n| {name} | Unreliable author |\n```\n\n### research.md (for sections)\n\n````markdown\n# Research: {Section Title}\n\n> Section: {chapter}.{section} {title}\n> Target Pages: {N}p\n> Generated: {YYYY-MM-DD}\n\n## Scope\n\n{Brief description of what this section covers}\n\n## Key Concepts\n\n### {Concept 1}\n\n- **Definition**: {definition}\n- **Source**: [{name}]({url})\n\n### {Concept 2}\n\n- **Definition**: {definition}\n- **Source**: [{name}]({url})\n\n## Code Examples\n\n### {Example Title}\n\n```{language}\n{code}\n```\n\n> Source: [{name}]({url})\n\n## Common Pitfalls\n\n1. **{Pitfall 1}**: {description}\n   - **Cause**: {why it happens}\n   - **Solution**: {how to avoid}\n\n2. **{Pitfall 2}**: {description}\n   - **Cause**: {why it happens}\n   - **Solution**: {how to avoid}\n\n## Practical Insights\n\n- {insight 1 with source link}\n- {insight 2 with source link}\n\n## Subtopic Coverage\n\n| Subtopic | Status   | Source            |\n| -------- | -------- | ----------------- |\n| {name}   | Complete | [{source}]({url}) |\n| {name}   | Partial  | [{source}]({url}) |\n| {name}   | Missing  | -                 |\n````\n\n## Directory Resolution Strategy\n\nWhen locating research directories, use multi-tier search to handle naming inconsistencies from legacy data or different generation sources.\n\n### Why Multi-Tier Search?\n\nResearch directories may have been created with inconsistent naming:\n\n| Inconsistency Type     | Example Mismatch                           |\n| ---------------------- | ------------------------------------------ |\n| Chapter padding        | `1-2-intro` vs `01-2-intro`                |\n| Section padding        | `01-02-intro` vs `01-2-intro`              |\n| Slug case              | `01-2-Core-Concepts` vs `01-2-core-concepts` |\n| Slug special chars     | `01-2-whats-new?` vs `01-2-whats-new`      |\n| Combined inconsistency | `1-02-What's New?` vs `01-2-whats-new`     |\n\n### Multi-Tier Search Algorithm\n\n> **âš ï¸ CRITICAL: Glob Returns Files Only**\n>\n> Glob does NOT return directories. All patterns MUST end with a filename (e.g., `/research.md`).\n>\n> | Pattern | Result |\n> |---------|--------|\n> | `.research/sections/*9-1*` | âŒ Empty (matches directory, not returned) |\n> | `.research/sections/*9-1*/research.md` | âœ… Returns file path |\n> | `.research/sections/*9-1*/*` | âœ… Returns all files in matching dirs |\n\nExecute tiers in order. Stop at first successful match.\n\n#### Tier 1: Canonical Exact Match (Primary)\n\nSearch using fully normalized canonical path.\n\n```\ncanonical_chapter = normalizeChapter(chapter)  # \"1\" â†’ \"01\"\ncanonical_section = normalizeSection(section)  # \"02\" â†’ \"2\"\ncanonical_slug = generateSlug(title)           # \"Core Concepts\" â†’ \"core-concepts\"\n\nGlob(\".research/sections/{canonical_chapter}-{canonical_section}-{canonical_slug}/research.md\")\n\nExample: Glob(\".research/sections/01-2-core-concepts/research.md\")\n```\n\n#### Tier 2: Canonical Chapter-Section, Any Slug\n\nIf Tier 1 fails, search with canonical chapter-section but wildcard slug.\n\n```\nGlob(\".research/sections/{canonical_chapter}-{canonical_section}-*/research.md\")\n\nExample: Glob(\".research/sections/01-2-*/research.md\")\n```\n\nThis catches slug variations like `Core-Concepts`, `core_concepts`, etc.\n\n#### Tier 3: Non-Padded Chapter Variation\n\nIf Tier 2 fails, try without chapter zero-padding (legacy compatibility).\n\n```\nraw_chapter = String(parseInt(chapter, 10))  # \"01\" â†’ \"1\"\n\nGlob(\".research/sections/{raw_chapter}-{canonical_section}-*/research.md\")\n\nExample: Glob(\".research/sections/1-2-*/research.md\")\n```\n\n#### Tier 4: Flexible Pattern Match (Last Resort)\n\nIf all above fail, use section number and first slug keyword.\n\n```\nfirst_keyword = generateSlug(title).split('-')[0]  # \"core-concepts\" â†’ \"core\"\n\nGlob(\".research/sections/*-{canonical_section}-*{first_keyword}*/research.md\")\n\nExample: Glob(\".research/sections/*-2-*core*/research.md\")\n```\n\n### Resolution Output Format\n\nReturn resolution result in XML format:\n\n```xml\n<directory_resolution>\n  <input>\n    <chapter>{original_chapter}</chapter>\n    <section>{original_section}</section>\n    <title>{original_title}</title>\n  </input>\n  <canonical>\n    <chapter>{normalized_chapter}</chapter>\n    <section>{normalized_section}</section>\n    <slug>{normalized_slug}</slug>\n    <path>{canonical_path}</path>\n  </canonical>\n  <resolution>\n    <resolved_path>{matched_path OR canonical_path}</resolved_path>\n    <existing>{true|false}</existing>\n    <match_tier>{1|2|3|4|new}</match_tier>\n  </resolution>\n</directory_resolution>\n```\n\n### Resolution Logic Summary\n\n```\nfunction resolveResearchDirectory(chapter, section, title):\n  # Normalize inputs\n  c = normalizeChapter(chapter)\n  s = normalizeSection(section)\n  slug = generateSlug(title)\n  canonical = \".research/sections/{c}-{s}-{slug}/\"\n\n  # Tier 1: Exact canonical\n  result = Glob(\"{canonical}research.md\")\n  if result: return { path: canonical, existing: true, tier: 1 }\n\n  # Tier 2: Canonical chapter-section, any slug\n  result = Glob(\".research/sections/{c}-{s}-*/research.md\")\n  if result: return { path: parent(result[0]), existing: true, tier: 2 }\n\n  # Tier 3: Non-padded chapter\n  raw_c = String(parseInt(chapter, 10))\n  result = Glob(\".research/sections/{raw_c}-{s}-*/research.md\")\n  if result: return { path: parent(result[0]), existing: true, tier: 3 }\n\n  # Tier 4: Flexible pattern\n  keyword = slug.split('-')[0]\n  result = Glob(\".research/sections/*-{s}-*{keyword}*/research.md\")\n  if result: return { path: parent(result[0]), existing: true, tier: 4 }\n\n  # No match - use canonical for new directory\n  return { path: canonical, existing: false, tier: \"new\" }\n```\n\n## Usage Patterns\n\n### Checking Existing Research (UPDATED)\n\n**IMPORTANT**: Do NOT use simple Glob. Use the multi-tier resolution strategy above.\n\n```\n# OLD (may miss existing research due to naming inconsistency)\nGlob(\".research/sections/{chapter}-{section}-{slug}/research.md\")\n\n# NEW (handles all variations)\nresolution = resolveResearchDirectory(chapter, section, title)\nexisting_research = resolution.existing\nresearch_dir = resolution.resolved_path\n```\n\nReturns resolved directory path and existence status.\n\n### Reading Research Files\n\nWhen consuming research, read files directly in agent context:\n\n```\nRead(\".research/init/summary.md\")\nRead(\".research/sections/01-2-core-concepts/research.md\")\n```\n\n### Saving Research Results\n\nAgents should Write files following the templates above:\n\n```\nWrite(\".research/init/summary.md\", content)\nWrite(\".research/sections/01-2-core-concepts/research.md\", content)\n```\n\n## Agent-Specific Guidelines\n\n### research-collector Agent\n\n- Outputs to: `.research/init/summary.md`, `.research/init/sources.md`\n- Creates directory if not exists\n- Returns confirmation only: `research_saved:.research/init/`\n\n### researcher Agent\n\n- Outputs to: `.research/sections/{id}/research.md`, `.research/sections/{id}/sources.md`\n- Checks existing research via Subtopic Coverage table\n- Appends to existing if partial coverage\n- Returns confirmation only: `research_saved:{output_dir}`\n\n### Consumer Agents (structure-designer, writer)\n\n- Receive file paths in prompt\n- Read files directly in their own context\n- Do not modify research files\n\n## XML Output Schemas\n\nStandardized XML schemas for agent communication. All agents should use these formats for consistency.\n\n### Research Result Schema\n\nUsed by `research-collector` and `researcher` agents:\n\n```xml\n<research_result domain=\"{technology|history|science|arts|general}\" status=\"OK|PARTIAL|ERROR\">\n  <summary>\n    <sources_count>{N}</sources_count>\n    <concepts_count>{N}</concepts_count>\n    <output_path>{path}</output_path>\n    <generated>{YYYY-MM-DD}</generated>\n  </summary>\n\n  <authoritative_sources>\n    - [Source Name](url) - {reliability: high|medium}\n  </authoritative_sources>\n\n  <key_concepts>\n    - **{Term}**: {Definition}\n  </key_concepts>\n\n  <learning_path>\n    1. Prerequisites: {list}\n    2. Fundamentals: {list}\n    3. Core Skills: {list}\n    4. Advanced: {list}\n  </learning_path>\n\n  <!-- Domain-specific sections as per domain-profiles -->\n</research_result>\n```\n\n### Directory Resolution Schema\n\nUsed by `researcher` agent for path resolution:\n\n```xml\n<directory_resolution>\n  <input>\n    <chapter>{original_chapter}</chapter>\n    <section>{original_section}</section>\n    <title>{original_title}</title>\n  </input>\n  <canonical>\n    <chapter>{normalized_chapter}</chapter>\n    <section>{normalized_section}</section>\n    <slug>{normalized_slug}</slug>\n    <path>{canonical_path}</path>\n  </canonical>\n  <resolution status=\"FOUND|NEW\">\n    <resolved_path>{matched_path OR canonical_path}</resolved_path>\n    <existing>{true|false}</existing>\n    <match_tier>{1|2|3|4|new}</match_tier>\n  </resolution>\n</directory_resolution>\n```\n\n### Subtopic Coverage Schema\n\nUsed within research files to track coverage:\n\n```xml\n<subtopic_coverage>\n  <subtopic name=\"{name}\" status=\"Complete|Partial|Missing\">\n    <source>{url or \"pending\"}</source>\n  </subtopic>\n</subtopic_coverage>\n```\n\n### Status Values Reference\n\n| Status | Context | Meaning |\n|--------|---------|---------|\n| OK | research_result | All subtopics covered, sufficient sources |\n| PARTIAL | research_result | Some subtopics missing or incomplete |\n| ERROR | research_result | Critical failure (e.g., no sources found) |\n| FOUND | directory_resolution | Existing research directory located |\n| NEW | directory_resolution | No existing research, use canonical path |\n\n---\n\n## Error Handling\n\n| Scenario                       | Action                              |\n| ------------------------------ | ----------------------------------- |\n| `.research/` directory missing | Auto-create on first write          |\n| Research file not found        | Conduct fresh research              |\n| Read failure                   | Log warning, conduct fresh research |\n| Write failure                  | Report error, do not update task.md |\n\n## .gitignore Recommendation\n\nResearch files are regenerable and should typically be ignored:\n\n```gitignore\n# Research cache (regenerable)\n.research/\n```"
              }
            ]
          },
          {
            "name": "nvim-doctor",
            "description": "Diagnose and fix your Neovim configuration issues with AI-powered analysis. Like 'brew doctor' for your Neovim setup.",
            "source": "./plugins/nvim-doctor",
            "category": null,
            "version": "0.2.1",
            "author": {
              "name": "BitYoungjae",
              "email": "bityoungjae@gmail.com"
            },
            "install_commands": [
              "/plugin marketplace add BitYoungjae/marketplace",
              "/plugin install nvim-doctor@bityoungjae-marketplace"
            ],
            "signals": {
              "stars": 5,
              "forks": 0,
              "pushed_at": "2026-01-12T13:31:28Z",
              "created_at": "2025-12-27T15:21:29Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/diagnose",
                "description": "Comprehensive Neovim diagnostics - errors, keymap conflicts, performance issues",
                "path": "plugins/nvim-doctor/commands/diagnose.md",
                "frontmatter": {
                  "description": "Comprehensive Neovim diagnostics - errors, keymap conflicts, performance issues",
                  "allowed-tools": "Bash(nvim:*), Bash(cat:*), Bash(ls:*), Read, Grep, Glob, Task",
                  "argument-hint": "<error-message-or-symptom>"
                },
                "content": "## System Information\n\n<system_info>\n- Neovim version: !`nvim --version 2>&1 || echo \"nvim not found\"`\n- Config path: !`nvim --headless -c \"lua print(vim.fn.stdpath('config'))\" -c \"qa\" 2>&1 || echo \"N/A\"`\n- Plugin count: !`nvim --headless -c \"lua local ok,l=pcall(require,'lazy');print(ok and #vim.tbl_keys(l.plugins()) or 'N/A')\" -c \"qa\" 2>&1 || echo \"N/A\"`\n- Startup time: (measured by agent during diagnosis)\n</system_info>\n\n## User Problem\n\n$ARGUMENTS\n\n## Task\n\n<instructions>\nYou are a Neovim troubleshooting expert. Analyze the system information and user's problem description above.\n\n### Step 1: Classify the Problem\n\nUse the Classification Matrix below to determine the problem type:\n\n| Classification | Keywords/Signals | Primary Agent | Fallback Agent |\n|----------------|------------------|---------------|----------------|\n| `STARTUP_ERROR` | \"E5108\", \"crash\", \"won't start\", lua error stack trace | nvim-diagnostician | - |\n| `PLUGIN_CONFLICT` | \"after update\", specific plugin name, \"conflict\", \"broke\" | plugin-investigator | nvim-diagnostician |\n| `KEYMAP_ISSUE` | \"key doesn't work\", \"which-key\", \"mapping\", \"leader\" | nvim-diagnostician | config-auditor |\n| `LSP_ISSUE` | \"LSP\", \"language server\", \"no completion\", \":LspInfo\" | nvim-diagnostician | - |\n| `PERFORMANCE` | \"slow\", \"startup time\", \"lag\", \"freeze\", \"memory\" | config-auditor | nvim-diagnostician |\n| `CONFIG_AUDIT` | \"review\", \"audit\", \"deprecated\", \"optimize\" | config-auditor | - |\n| `PLUGIN_VERSION` | \"update\", \"version\", \"breaking change\", \"upgrade\" | plugin-investigator | - |\n| `GENERAL` | unclear or multiple issues | nvim-diagnostician | config-auditor |\n\n### Step 2: Route to Specialized Agent\n\nBased on classification, delegate to the appropriate agent using Task:\n\n```\nTask(\n  subagent_type=\"nvim-doctor:{agent-name}\",\n  model=\"{agent-model}\",\n  description=\"Diagnose: {brief-summary}\",\n  prompt=\"\"\"\n    <diagnosis_request>\n      <classification>{CLASSIFICATION}</classification>\n      <confidence>{HIGH|MEDIUM|LOW}</confidence>\n      <user_problem>\n        {original user problem from $ARGUMENTS}\n      </user_problem>\n      <system_info>\n        {collected system info from above}\n      </system_info>\n    </diagnosis_request>\n  \"\"\"\n)\n```\n\n**Agent Selection:**\n- `nvim-diagnostician` (opus): Complex errors, keymaps, LSP - requires deep reasoning\n- `config-auditor` (haiku): Performance issues, config review - fast scanning\n- `plugin-investigator` (haiku): Plugin versions, compatibility - GitHub research\n\n### Step 3: Handle Agent Response\n\nIf agent returns `HANDOFF` status, invoke the target agent with the handoff context.\n\nIf agent returns `NEEDS_INVESTIGATION`, ask the user for more information.\n\nIf agent returns `RESOLVED`, present the diagnosis and solution to the user.\n\n### Step 4: Communicate in User's Language\n\nMatch the language the user used in their problem description.\n</instructions>\n\n## Communication Schemas Reference\n\nSee `contexts/communication-schemas.md` for standardized XML formats used between agents."
              }
            ],
            "skills": [
              {
                "name": "config-auditing",
                "description": "Neovim configuration audit knowledge base. Use when: reviewing config files for issues, checking deprecated APIs, optimizing settings, or performing health checks. Provides checklists, best practices, and version-specific deprecated API detection patterns.",
                "path": "plugins/nvim-doctor/skills/config-auditing/SKILL.md",
                "frontmatter": {
                  "name": "config-auditing",
                  "description": "Neovim configuration audit knowledge base. Use when: reviewing config files for issues, checking deprecated APIs, optimizing settings, or performing health checks. Provides checklists, best practices, and version-specific deprecated API detection patterns.",
                  "allowed-tools": "Read, Bash, Grep, Glob",
                  "context": "fork"
                },
                "content": "# Neovim Configuration Auditing Skill\n\nSystematic configuration analysis for identifying issues, optimizations, and deprecated API usage in Neovim setups.\n\n## Supporting Documents\n\n| Document | Purpose | When to Use |\n|----------|---------|-------------|\n| [audit-checklist.md](audit-checklist.md) | Structured audit categories with detection patterns | Systematic config review |\n| [best-practices.md](best-practices.md) | lazy.nvim patterns, vim.opt usage, keymap conventions | Optimization suggestions |\n| [deprecated-apis.md](deprecated-apis.md) | Version-specific deprecated APIs with grep patterns | Compatibility checks |\n\n## Quick Validation Commands\n\nRun these headless commands for rapid assessment:\n\n```bash\n# Get Neovim version\nnvim --version | head -1\n\n# Get config path\nnvim --headless -c \"lua print(vim.fn.stdpath('config'))\" -c \"qa\" 2>&1\n\n# Count Lua files in config\nfind ~/.config/nvim -name \"*.lua\" 2>/dev/null | wc -l\n\n# Count plugins (lazy.nvim)\nls ~/.local/share/nvim/lazy 2>/dev/null | wc -l\n\n# Check for deprecated vim.api.nvim_buf_set_option usage\ngrep -rn \"nvim_buf_set_option\\|nvim_win_set_option\" ~/.config/nvim --include=\"*.lua\" 2>/dev/null | head -10\n\n# Check startup time\nnvim --startuptime /tmp/nvim-startup.log +q && tail -5 /tmp/nvim-startup.log\n\n# Validate Lua syntax in config\nnvim --headless -c \"lua dofile(vim.fn.stdpath('config')..'/init.lua')\" -c \"qa\" 2>&1\n\n# Check for error on startup\nnvim --headless -c \"qa\" 2>&1 | head -20\n```\n\n## Scoring Criteria\n\nAssign grades based on issue severity and count:\n\n| Grade | Criteria | Description |\n|-------|----------|-------------|\n| **A** | 0 Critical, 0-2 Warnings | Excellent - Production ready |\n| **B** | 0 Critical, 3-5 Warnings | Good - Minor improvements possible |\n| **C** | 0 Critical, 6+ Warnings OR 1 Critical | Acceptable - Needs attention |\n| **D** | 2-3 Critical issues | Poor - Significant problems |\n| **F** | 4+ Critical issues | Failing - Requires immediate fixes |\n\n### Issue Severity Definitions\n\n**Critical**: Security risks, breaking deprecated APIs (removed in current version), runtime errors\n**Warning**: Performance issues, deprecated APIs (still working), code style violations\n**Suggestion**: Optional improvements, modern alternatives, organization tips\n\n## Audit Workflow\n\n1. **Gather Environment Info**\n   - Neovim version (determines which deprecated APIs apply)\n   - Plugin manager type (lazy.nvim, packer.nvim, etc.)\n   - Config structure (single file vs modular)\n\n2. **Run Category Audits**\n   - Follow [audit-checklist.md](audit-checklist.md) categories in order\n   - Use grep patterns to detect issues programmatically\n   - Note severity for each finding\n\n3. **Check Version Compatibility**\n   - Reference [deprecated-apis.md](deprecated-apis.md) for user's Neovim version\n   - Flag APIs deprecated OR removed in their version\n\n4. **Apply Best Practices**\n   - Compare against [best-practices.md](best-practices.md)\n   - Suggest optimizations where applicable\n\n5. **Calculate Grade**\n   - Count Critical/Warning/Suggestion issues\n   - Apply scoring criteria above\n   - Provide overall health assessment\n\n## Output Template\n\n```xml\n<audit_report>\n## Summary\n- **Grade**: [A-F]\n- **Neovim Version**: [detected version]\n- **Config Location**: [path]\n- **Plugin Count**: [count]\n\n## Critical Issues\n[List each critical issue with file:line and fix]\n\n## Warnings\n[List each warning with file:line and recommendation]\n\n## Suggestions\n[List optional improvements]\n\n## Statistics\n| Metric | Value |\n|--------|-------|\n| Total Lua files | X |\n| Total lines | Y |\n| Plugins | Z |\n| Startup time | Nms |\n| Deprecated APIs | N |\n</audit_report>\n```"
              },
              {
                "name": "neovim-debugging",
                "description": "Debug Neovim/LazyVim configuration issues. Use when: user reports Neovim errors, keymaps not working, plugins failing, or config problems. Provides systematic diagnosis through hypothesis testing, not just checklists. Think like a detective narrowing down possibilities.",
                "path": "plugins/nvim-doctor/skills/neovim-debugging/SKILL.md",
                "frontmatter": {
                  "name": "neovim-debugging",
                  "description": "Debug Neovim/LazyVim configuration issues. Use when: user reports Neovim errors, keymaps not working, plugins failing, or config problems. Provides systematic diagnosis through hypothesis testing, not just checklists. Think like a detective narrowing down possibilities.",
                  "allowed-tools": "Read, Bash, Grep, Glob, AskUserQuestion",
                  "user-invocable": false
                },
                "content": "# Neovim/LazyVim Debugging Skill\n\nYou are an expert Neovim debugger. Your job is to diagnose configuration problems systematicallyâ€”not by running through checklists, but by forming hypotheses and testing them efficiently.\n\n## Core Debugging Philosophy\n\n### Think Like a Detective\n\n1. **Observe symptoms** â†’ What exactly is the user experiencing?\n2. **Form hypotheses** â†’ What could cause this symptom?\n3. **Test the most likely hypothesis first** â†’ Use minimal, targeted tests\n4. **Narrow the scope** â†’ Binary search through possibilities\n5. **Confirm root cause** â†’ Verify the fix addresses the symptom\n\n### The Golden Rule\n\n> Before asking the user for more information, ask yourself: \"Can I gather this programmatically using headless mode or file inspection?\"\n\nOnly ask the user when you genuinely need interactive feedback (e.g., \"Does the error appear when you do X?\").\n\n## Diagnostic Entry Points\n\nClassify the problem first, then follow the appropriate diagnostic path:\n\n| Problem Type | Primary Signal | Start Here |\n|--------------|----------------|------------|\n| **Lua Error** | `E5108: Error executing lua...` | [error-patterns.md](error-patterns.md) â†’ Decode the error message |\n| **Key Not Working** | \"When I press X, nothing happens\" | [diagnostic-flowchart.md](diagnostic-flowchart.md) â†’ Keymap diagnosis |\n| **Plugin Not Loading** | Feature missing, no error | [plugin-specifics.md](plugin-specifics.md) â†’ Check lazy loading |\n| **Performance** | Slow startup, lag, freeze | [diagnostic-flowchart.md](diagnostic-flowchart.md) â†’ Performance diagnosis |\n| **UI/Visual** | Colors wrong, elements missing | [diagnostic-flowchart.md](diagnostic-flowchart.md) â†’ UI diagnosis |\n\n## Quick Diagnostic Commands\n\nUse these headless commands to gather information without user interaction:\n\n```bash\n# Check if a plugin is installed\nnvim --headless -c \"lua print(pcall(require, 'PLUGIN_NAME'))\" -c \"qa\" 2>&1\n# true = installed, false = not found\n\n# Get a config value\nnvim --headless -c \"lua print(vim.inspect(CONFIG_PATH))\" -c \"qa\" 2>&1\n\n# Check if a function exists\nnvim --headless -c \"lua print(type(require('MODULE').FUNCTION))\" -c \"qa\" 2>&1\n# function = exists, nil = doesn't exist\n\n# Get leader/localleader\nnvim --headless -c \"lua print('leader:', vim.g.mapleader, 'localleader:', vim.g.maplocalleader)\" -c \"qa\" 2>&1\n\n# Check LazyVim extras\ncat ~/.config/nvim/lazyvim.json 2>/dev/null || echo \"Not a LazyVim config\"\n```\n\n## Decision Framework\n\n```\n<decision_tree>\n1. Can I reproduce/verify this myself?\n   â”œâ”€ YES â†’ Use headless mode or read config files directly\n   â””â”€ NO â†’ Ask the user for specific, actionable information\n\n2. Is the problem intermittent or consistent?\n   â”œâ”€ Consistent â†’ Focus on static config analysis\n   â””â”€ Intermittent â†’ Consider runtime state, timing, async issues\n\n3. Did this work before?\n   â”œâ”€ YES â†’ Look for recent changes (plugin updates, config edits)\n   â””â”€ NO â†’ Check basic setup (installation, dependencies)\n\n4. Is this isolated or widespread?\n   â”œâ”€ Isolated (one plugin/key) â†’ Focus on specific config\n   â””â”€ Widespread â†’ Check core config, leader settings, plugin manager\n</decision_tree>\n```\n\n## Supporting Documents\n\n| Document | When to Use |\n|----------|-------------|\n| [diagnostic-flowchart.md](diagnostic-flowchart.md) | Step-by-step diagnosis paths for each problem type |\n| [error-patterns.md](error-patterns.md) | Common error messages and their typical causes |\n| [information-gathering.md](information-gathering.md) | What to ask users and how to ask effectively |\n| [plugin-specifics.md](plugin-specifics.md) | Plugin-specific debugging (which-key, LSP, telescope, etc.) |\n\n## Example Diagnosis Flow\n\n<example>\n**User says**: \"My localleader keymaps don't show in which-key\"\n\n**Diagnostic thinking**:\n```\n<analysis>\nSymptom: which-key popup doesn't appear for localleader prefix\n\nHypotheses (ordered by likelihood):\n1. localleader not triggering which-key (most common with LazyVim)\n2. localleader mappings not registered\n3. localleader itself not set correctly\n4. which-key not installed/loaded\n\nTest plan:\n1. Check if leader (Space) shows which-key â†’ isolates which-key vs localleader issue\n2. Headless: verify localleader value\n3. Headless: check which-key config for localleader trigger\n</analysis>\n```\n\n**First action**: Ask user \"Does pressing Space (leader) show the which-key popup?\"\n- If YES â†’ Problem is localleader-specific, check which-key trigger config\n- If NO â†’ which-key itself is broken, different diagnosis path\n</example>\n\n## Anti-Patterns to Avoid\n\n1. **Don't shotgun debug**: Running every possible diagnostic command wastes time\n2. **Don't assume**: Verify your assumptions with tests before suggesting fixes\n3. **Don't ignore versions**: Neovim/plugin versions matter; API changes break things\n4. **Don't forget lazy loading**: Many issues stem from plugins not being loaded when expected\n5. **Don't skip reproduction**: Confirm you understand the exact trigger before diagnosing\n\n## Output Format\n\nWhen presenting findings, use this structure:\n\n```markdown\n## Diagnosis\n\n**Symptom**: [What the user reported]\n**Root Cause**: [What's actually wrong]\n**Evidence**: [How you determined this]\n\n## Solution\n\n[Step-by-step fix]\n\n## Prevention\n\n[How to avoid this in the future, if applicable]\n```"
              },
              {
                "name": "plugin-research",
                "description": "Neovim plugin ecosystem research. Use for: version compatibility, GitHub issues, breaking changes, plugin alternatives. Provides systematic investigation patterns for plugin-related problems.",
                "path": "plugins/nvim-doctor/skills/plugin-research/SKILL.md",
                "frontmatter": {
                  "name": "plugin-research",
                  "description": "Neovim plugin ecosystem research. Use for: version compatibility, GitHub issues, breaking changes, plugin alternatives. Provides systematic investigation patterns for plugin-related problems.",
                  "allowed-tools": "Read, Bash, Grep, Glob, WebSearch, WebFetch",
                  "context": "fork",
                  "user-invocable": false
                },
                "content": "# Plugin Research Skill\n\nYou are investigating Neovim plugin issues. Use this skill to systematically gather information about plugins, their versions, compatibility, and known issues.\n\n## Core Philosophy\n\n### GitHub-First Research\n\n1. **Local state** is authoritative for what's installed\n2. **GitHub** is authoritative for what's available and known issues\n3. **Combine both** to form complete picture\n\n### Investigation Priority\n\n```\n1. Local state (lazy-lock.json, plugin files)\n2. GitHub repository (releases, tags, commits)\n3. GitHub issues (bugs, breaking changes)\n4. Community resources (Reddit, discussions)\n```\n\n## Quick Diagnostic Commands\n\n```bash\n# Get installed plugin version from lazy-lock.json\ncat ~/.config/nvim/lazy-lock.json | grep -A2 '\"PLUGIN_NAME\"'\n\n# Check if plugin is loaded\nnvim --headless -c \"lua print(package.loaded['PLUGIN_NAME'] ~= nil)\" -c \"qa\" 2>&1\n\n# Get plugin info from lazy.nvim\nnvim --headless -c \"lua local l=require('lazy.core.config');print(vim.inspect(l.plugins['PLUGIN_NAME']))\" -c \"qa\" 2>&1\n\n# List plugin files\nls -la ~/.local/share/nvim/lazy/PLUGIN_NAME/\n\n# Check plugin's README for version requirements\ncat ~/.local/share/nvim/lazy/PLUGIN_NAME/README.md | head -50\n```\n\n## Supporting Documents\n\n| Document | Purpose |\n|----------|---------|\n| [github-patterns.md](github-patterns.md) | GitHub search queries, release extraction, CHANGELOG parsing |\n| [ecosystem-knowledge.md](ecosystem-knowledge.md) | Plugin authors, categories, known conflicts, migration paths |\n\n## Investigation Workflow\n\n### Step 1: Gather Local State\n\n```bash\n# 1. Get commit hash from lock file\ncat ~/.config/nvim/lazy-lock.json | grep -A2 '\"plugin-name\"'\n# Output: \"commit\": \"abc1234...\"\n\n# 2. Check plugin directory\nls ~/.local/share/nvim/lazy/plugin-name/\n\n# 3. Find user's configuration for this plugin\ngrep -r \"plugin-name\" ~/.config/nvim --include=\"*.lua\" -l\n```\n\n### Step 2: GitHub Research\n\nUse patterns from [github-patterns.md](github-patterns.md):\n\n1. **Find repository** - Search query templates\n2. **Get latest version** - WebFetch releases page\n3. **Check CHANGELOG** - Parse for breaking changes\n4. **Search issues** - Find related bugs/problems\n\n### Step 3: Compare Versions\n\n```\nInstalled (local)     vs    Latest (GitHub)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\ncommit: abc1234             commit: def5678\ntag: v1.2.0                 tag: v2.0.0\nneovim: >= 0.9              neovim: >= 0.10\n```\n\n### Step 4: Form Recommendations\n\nBased on comparison:\n- **Up to date**: No action needed\n- **Minor update**: Safe to upgrade, new features available\n- **Major update**: Check breaking changes before upgrading\n- **Breaking changes**: Provide migration guide\n\n## Version Comparison Rules\n\n### Semantic Versioning\n\n| Change | Meaning | Risk Level |\n|--------|---------|------------|\n| MAJOR (X.0.0) | Breaking changes | HIGH - review before upgrade |\n| MINOR (0.X.0) | New features | LOW - safe to upgrade |\n| PATCH (0.0.X) | Bug fixes | NONE - always safe |\n\n### Commit Hash Mapping\n\nlazy.nvim uses commit hashes, not tags. To map:\n\n```bash\n# Find which tag contains a commit\ngit tag --contains abc1234\n\n# Or check releases page on GitHub\n# WebFetch: https://github.com/owner/repo/releases\n```\n\n## Output Format\n\nStructure investigation reports using:\n\n```xml\n<investigation_report status=\"{OK|OUTDATED|BREAKING_CHANGES|ERROR}\">\n  <plugin>\n    <name>{plugin-name}</name>\n    <installed>{commit or tag}</installed>\n    <latest>{from GitHub}</latest>\n    <status>{comparison result}</status>\n  </plugin>\n\n  <changes_since_installed>\n    <breaking>{list}</breaking>\n    <features>{list}</features>\n    <fixes>{list}</fixes>\n  </changes_since_installed>\n\n  <known_issues>\n    {relevant GitHub issues}\n  </known_issues>\n\n  <compatibility>\n    <neovim_required>{version}</neovim_required>\n    <dependencies>{list}</dependencies>\n    <conflicts>{known conflicts}</conflicts>\n  </compatibility>\n\n  <recommendations>\n    {actionable advice}\n  </recommendations>\n</investigation_report>\n```\n\n## Common Investigation Patterns\n\n### Pattern: Plugin Not Loading\n\n```\nCheck order:\n1. Is it in lazy-lock.json? (installed)\n2. Is directory present in ~/.local/share/nvim/lazy/?\n3. Is it enabled in config? (not disabled/cond=false)\n4. Are dependencies satisfied?\n5. Is it lazy-loaded and trigger not fired?\n```\n\n### Pattern: Plugin Broken After Update\n\n```\nCheck order:\n1. What version was installed before?\n2. What version is installed now?\n3. Are there breaking changes between versions?\n4. Does new version require newer Neovim?\n5. Did dependencies also need updating?\n```\n\n### Pattern: Plugin Conflict\n\n```\nCheck order:\n1. Which plugins are in conflict?\n2. Do they modify same functionality? (keymaps, highlights, LSP)\n3. Is load order correct?\n4. Are there known conflicts in GitHub issues?\n5. Can one be lazy-loaded to avoid conflict?\n```"
              }
            ]
          },
          {
            "name": "obsidian-blocks",
            "description": "Skills for writing visual content in Obsidian using code blocks. Formulas (LaTeX), graphs (Desmos), diagrams (Mermaid, TikZ), and more.",
            "source": "./plugins/obsidian-blocks",
            "category": null,
            "version": "1.5.1",
            "author": {
              "name": "BitYoungjae",
              "email": "bityoungjae@gmail.com"
            },
            "install_commands": [
              "/plugin marketplace add BitYoungjae/marketplace",
              "/plugin install obsidian-blocks@bityoungjae-marketplace"
            ],
            "signals": {
              "stars": 5,
              "forks": 0,
              "pushed_at": "2026-01-12T13:31:28Z",
              "created_at": "2025-12-27T15:21:29Z",
              "license": "MIT"
            },
            "commands": [
              {
                "name": "/enhance",
                "description": "Analyze and enhance Obsidian documents with visual elements (Mermaid, Desmos, MathJax)",
                "path": "plugins/obsidian-blocks/commands/enhance.md",
                "frontmatter": {
                  "description": "Analyze and enhance Obsidian documents with visual elements (Mermaid, Desmos, MathJax)",
                  "argument-hint": "<file-path>"
                },
                "content": "# Document Enhancement\n\nEnhance the document at `$ARGUMENTS` with visual elements.\n\nUse the `doc-enhancer` agent to perform this task. The agent has access to:\n- **mermaid-diagramming** skill: 16 diagram types for processes, structures, timelines\n- **desmos-graphing** skill: Interactive function graphs\n- **mathjax-rendering** skill: LaTeX formula rendering\n\nDelegate the following to the agent:\n1. Read and analyze the target document: `$ARGUMENTS`\n2. Identify enhancement opportunities (diagrams, graphs, formulas)\n3. Apply restrained, contextually appropriate visual elements\n4. Preserve the document's original flow and voice"
              }
            ],
            "skills": [
              {
                "name": "desmos-graphing",
                "description": "Create interactive Desmos graphs in Obsidian using desmos-graph code blocks. Use when visualizing functions, parametric curves, inequalities, or mathematical relationships with customizable styling and settings.",
                "path": "plugins/obsidian-blocks/skills/desmos-graphing/SKILL.md",
                "frontmatter": {
                  "name": "desmos-graphing",
                  "description": "Create interactive Desmos graphs in Obsidian using desmos-graph code blocks. Use when visualizing functions, parametric curves, inequalities, or mathematical relationships with customizable styling and settings.",
                  "context": "fork",
                  "user-invocable": false
                },
                "content": "# Desmos Graphing in Obsidian\n\n## âš ï¸ CRITICAL: Dual Parser System\n\nThe plugin uses **different parsers** for different parts:\n\n| Location | Parser | pi | sqrt | Example |\n|----------|--------|-----|------|---------|\n| Settings | mathjs | `pi` | - | `left=-2*pi+0.5` |\n| Equations | Desmos (LaTeX) | `\\pi` | `\\sqrt{x}` | `y=\\sqrt{x}+\\pi` |\n| Points | Desmos (LaTeX) | `\\pi` | `\\sqrt{x}` | `(\\pi/2, 1)` |\n| **Restrictions** | plain math | numeric | `x^0.5` | `x>-1.5708` |\n\n```markdown\nâœ… CORRECT\nleft=-0.5; right=2*pi+0.5\n---\ny=\\sqrt{x}|blue\ny=x/\\sqrt{3}|green|0<=x<=3^0.5\n(\\pi/2, 0)|label:cos(90Â°)=0\n\nâŒ WRONG (will error)\nleft=-2*\\pi               # Error: \"Syntax error in part '\\pi'\"\ny=\\sin(x+pi/4)            # Error: \"Too many variables\" (p*i)\n(pi/2, 0)                 # Error: \"Too many variables\" â† Points need LaTeX!\ny=x/sqrt(3)|0<=x<=sqrt(3) # Error: \"Too many variables\" (s*q*r*t)\n```\n\n**Key rule**: `\\sqrt{x}` in equations, `x^0.5` in restrictions!\n\n## Code Block Format\n\n````markdown\n```desmos-graph\n[settings]\n---\n[equations]\n```\n````\n\n- Settings (optional) above `---`, equations below\n- Each equation on its own line\n- Use `|` to add styling/restrictions to equations\n\n## Quick Start\n\n### Basic Function\n\n````markdown\n```desmos-graph\ny=x^2\ny=\\sin(x)|blue\n```\n````\n\n### With Settings\n\n````markdown\n```desmos-graph\nleft=-2*pi; right=2*pi\nbottom=-2; top=2\n---\ny=\\sin(x)|red\ny=\\cos(x)|blue|dashed\n```\n````\n\n### Points and Labels\n\n````markdown\n```desmos-graph\n(0, 0)|label:Origin\n(3, 4)|red|label:Point A\n(\\pi/2, 1)|blue|label:Ï€/2    # Use \\pi in coordinates!\ny=x|dashed\n```\n````\n\nâš ï¸ Points use LaTeX: `(\\pi/2, 0)` not `(pi/2, 0)`\n\n## Essential Settings\n\n| Setting | Default | Description |\n|---------|---------|-------------|\n| `width` | 600 | Graph width in pixels |\n| `height` | 400 | Graph height in pixels |\n| `left` | -10 | Left boundary |\n| `right` | 10 | Right boundary |\n| `bottom` | -7 | Bottom boundary |\n| `top` | 7 | Top boundary |\n| `grid` | true | Show grid lines |\n| `degreeMode` | radians | `radians` or `degrees` |\n\n### Additional Settings\n\n| Setting | Default | Description |\n|---------|---------|-------------|\n| `hideAxisNumbers` | false | Hide axis number labels |\n| `xAxisLabel` | - | Custom x-axis label |\n| `yAxisLabel` | - | Custom y-axis label |\n| `xAxisLogarithmic` | false | Logarithmic x-axis scale |\n| `yAxisLogarithmic` | false | Logarithmic y-axis scale |\n| `defaultColor` | - | Default color for all equations |\n\nSettings use `=` for values, separated by `;` or newlines.\nBounds accept math expressions: `left=-2*pi`\n\n## Equation Styling\n\nUse `|` (pipe) to add styling after an equation:\n\n```\nequation|color|style|restrictions|label\n```\n\nSegment order is flexible - the parser auto-detects each segment type.\n\nâš ï¸ **CRITICAL: `|` is RESERVED as delimiter!**\n\nThe pipe character cannot appear in equations or labels:\n\n```\n(1, 0)|label:|v|=5         # âŒ Error: label parsed as empty\n(1, 0)|label:âˆ¥vâˆ¥=5         # âœ… Use Unicode âˆ¥ (U+2225)\ny=|x|                      # âŒ Error: pipes split the equation\ny=abs(x)                   # âœ… Use abs() function\n```\n\n### Colors\n\n**Supported names:** `red`, `green`, `blue`, `yellow`, `orange`, `purple`, `cyan`, `magenta`, `black`, `white`\n\n**Hex codes:** `#rrggbb` or `#rgb` (e.g., `#ff6600`, `#f60`)\n\nâš ï¸ **`gray`/`grey` are NOT supported!** Use hex instead:\n- Light gray: `#c0c0c0`\n- Medium gray: `#808080`\n- Dark gray: `#404040`\n\n```\ny=x|gray           # âŒ Error: parsed as restriction\ny=x|#808080        # âœ… Correct\n```\n\n### Line & Point Styles\n\n| Line | Point | Effect |\n|------|-------|--------|\n| `solid` | `point` | Default (solid/filled) |\n| `dashed` | `open` | Dashed/open circle |\n| `dotted` | `cross` | Dotted/X mark |\n\n### Labels\n\n`(1, 2)|label` shows \"(1, 2)\", `(1, 2)|label:Point A` shows custom text\n\n### Restrictions\n\nLimit where equations are drawn:\n\n```\ny=x^2|0<x<5           # Only draw for 0 < x < 5\ny=\\sin(x)|x>0|y>0     # Multiple restrictions\ny=2x|0<=x<=1          # <= and >= supported\ny=\\tan(x)|x>-1.5708|x<1.5708   # Use numeric values (Ï€/2â‰ˆ1.5708)\n```\n\n**âš ï¸ CRITICAL: Use plain math, NOT LaTeX in restrictions!**\n\n| âœ… Correct | âŒ Wrong | Why |\n|-----------|---------|-----|\n| `x/2<y` | `\\frac{x}{2}<y` | No LaTeX commands |\n| `x^0.5<2` | `\\sqrt{x}<2` | Use `^0.5` not `\\sqrt` |\n| `0<x<3^0.5` | `0<x<sqrt(3)` | `sqrt()` â†’ s*q*r*t |\n| `x>-1.5708` | `x>-pi/2` | `pi` â†’ p*i, use numeric |\n| `0<x<1` | `\\{0<x<1\\}` | No braces needed |\n\nThe plugin auto-wraps restrictions with `{}` - don't add them yourself.\n\n### Hidden & Special Tags\n\n```\nf(x)=x^2|hidden       # Define but don't display\ny=f(x)+1              # Use the hidden function\ny=\\sin(x)|noline      # Points only, no connecting line\n```\n\n## Combining Styles\n\nOrder doesn't matter:\n\n```\ny=x^2|red|dashed|0<x<5\n(1, 2)|open|blue|label:Start\n```\n\n## Equation Types\n\n| Type | Example |\n|------|---------|\n| Explicit | `y=x^2` |\n| Implicit | `x^2+y^2=25` |\n| Parametric | `(\\cos(t), \\sin(t))` |\n| Polar | `r=1+\\cos(\\theta)` |\n| Piecewise | `y=\\{x<0: -x, x\\}` |\n| Point | `(3, 4)` |\n| Function def | `f(x)=x^2` |\n\n### âš ï¸ Polar Equations Must Be Linear in r\n\nDesmos only supports polar equations where r appears linearly:\n\n```\nr=1+\\cos(\\theta)       # âœ… Linear in r\nr^2=\\cos(2\\theta)      # âŒ Error: \"must be linear in r\"\n```\n\n**Solution**: Convert to parametric curve:\n\n```\n# Lemniscate (rÂ² = cos(2Î¸)) â†’ parametric form\n(\\cos(t)\\sqrt{\\cos(2t)}, \\sin(t)\\sqrt{\\cos(2t)})|blue\n```\n\n### Parametric Curves Warning\n\nâš ï¸ Expand parenthetical expressions to avoid parsing errors:\n\n```\n(2t, 4t(1-t))|blue     # âš ï¸ May be misinterpreted as piecewise\n(2t, 4t-4t^2)|blue     # âœ… Expanded form is safer\n```\n\n### Piecewise Functions\n\nâš ï¸ **Escape curly braces** with backslash:\n\n```\ny={x<0: -x, x}         # âŒ Error\ny=\\{x<0: -x, x\\}       # âœ… Correct\n```\n\n## Complete Examples\n\n### Trigonometric Phase Shifts\n\n````markdown\n```desmos-graph\nleft=-2*pi; right=2*pi\nbottom=-2; top=2\n---\ny=\\sin(x)|blue\ny=\\sin(x+\\pi/4)|red\ny=\\sin(x+\\pi/2)|green\ny=\\sin(x+\\pi)|purple|dashed\n```\n````\n\n### Bezier Curve with Control Points\n\n````markdown\n```desmos-graph\nleft=-0.5; right=2.5\nbottom=-0.5; top=2.5\n---\n(2t, 4t-4t^2)|blue\n(0, 0)|black|label:P0\n(1, 2)|black|label:P1\n(2, 0)|black|label:P2\ny=2x|#808080|dashed|0<x<1\ny=-2x+4|#808080|dashed|1<x<2\n```\n````\n\n### Easing Functions\n\n````markdown\n```desmos-graph\nleft=-0.2; right=1.2\nbottom=-0.2; top=1.2\n---\ny=x|dashed|black\ny=1-\\cos(\\pi*x/2)|blue|0<=x<=1\ny=\\sin(\\pi*x/2)|red|0<=x<=1\n```\n````\n\n### Cosine with Special Points\n\n````markdown\n```desmos-graph\nleft=-0.5; right=2*pi+0.5\nbottom=-1.5; top=1.5\n---\ny=\\cos(x)|blue\n(0, 1)|red|label:cos(0)=1\n(\\pi/2, 0)|red|label:cos(Ï€/2)=0\n(\\pi, -1)|red|label:cos(Ï€)=-1\n(3*\\pi/2, 0)|red|label:cos(3Ï€/2)=0\n```\n````\n\nâš ï¸ Note: Settings use `2*pi`, points use `\\pi`, `3*\\pi/2`, etc.\n\n## Advanced\n\nFor complete documentation, see [reference.md](reference.md):\n- All 13 settings with defaults and auto-adjustment rules\n- Hex codes for unsupported colors (gray, pink, brown, etc.)\n- 13 error messages with causes and fixes\n- Detailed troubleshooting for common issues\n- Polar-to-parametric conversion examples"
              },
              {
                "name": "mathjax-rendering",
                "description": "Render mathematical formulas in Obsidian using LaTeX/MathJax syntax. Use when writing equations, matrices, integrals, summations, or any mathematical notation in Obsidian notes.",
                "path": "plugins/obsidian-blocks/skills/mathjax-rendering/SKILL.md",
                "frontmatter": {
                  "name": "mathjax-rendering",
                  "description": "Render mathematical formulas in Obsidian using LaTeX/MathJax syntax. Use when writing equations, matrices, integrals, summations, or any mathematical notation in Obsidian notes.",
                  "context": "fork",
                  "user-invocable": false
                },
                "content": "# MathJax Rendering in Obsidian\n\nObsidian uses MathJax to render LaTeX math expressions. This skill covers essential syntax for mathematical notation.\n\nFor complete symbol tables and advanced commands, see [reference.md](reference.md).\n\n## 1. Basic Syntax\n\n### Inline vs Block\n\n```markdown\nInline: The equation $E = mc^2$ appears within text.\n\nBlock (centered, display-style):\n$$\n\\int_0^{\\infty} e^{-x^2} dx = \\frac{\\sqrt{\\pi}}{2}\n$$\n```\n\n- **Inline** (`$...$`): Compact, flows with paragraph\n- **Block** (`$$...$$`): Larger, centered, multi-line capable\n\n---\n\n## 2. Fractions and Roots\n\n```latex\n\\frac{a}{b}       % Standard fraction\n\\sqrt{x}          % Square root\n\\sqrt[n]{x}       % n-th root\n\\binom{n}{k}      % Binomial coefficient\n```\n\n**Examples:**\n\n```latex\n$$\n\\frac{d}{dx}\\left(\\frac{f(x)}{g(x)}\\right) = \\frac{f'(x)g(x) - f(x)g'(x)}{[g(x)]^2}\n$$\n\n$$\n\\sqrt{a^2 + b^2} = c \\qquad \\sqrt[3]{27} = 3\n$$\n```\n\n---\n\n## 3. Superscripts and Subscripts\n\n```latex\n$x^2$           % Superscript\n$x_1$           % Subscript\n$x_i^2$         % Both combined\n$x^{10}$        % Multiple characters need braces\n$x_{n+1}$       % Expression as subscript\n```\n\n**Note**: Use braces `{}` for multi-character exponents/subscripts.\n\n---\n\n## 4. Greek Letters\n\n### Common Letters\n\n| Lowercase | | Uppercase | |\n|-----------|--------|-----------|--------|\n| `\\alpha` Î± | `\\beta` Î² | `\\Gamma` Î“ | `\\Delta` Î” |\n| `\\gamma` Î³ | `\\delta` Î´ | `\\Theta` Î˜ | `\\Lambda` Î› |\n| `\\epsilon` Îµ | `\\theta` Î¸ | `\\Sigma` Î£ | `\\Phi` Î¦ |\n| `\\lambda` Î» | `\\mu` Î¼ | `\\Psi` Î¨ | `\\Omega` Î© |\n| `\\pi` Ï€ | `\\sigma` Ïƒ | | |\n| `\\phi` Ï† | `\\omega` Ï‰ | | |\n\nSee [reference.md](reference.md) for complete Greek alphabet.\n\n---\n\n## 5. Common Operators and Symbols\n\n| Symbol | Syntax | | Symbol | Syntax |\n|--------|--------|---|--------|--------|\n| â‰¤ | `\\leq` | | âˆˆ | `\\in` |\n| â‰¥ | `\\geq` | | âˆ‰ | `\\notin` |\n| â‰  | `\\neq` | | âŠ‚ | `\\subset` |\n| â‰ˆ | `\\approx` | | âˆª | `\\cup` |\n| Ã— | `\\times` | | âˆ© | `\\cap` |\n| Â· | `\\cdot` | | âˆ | `\\infty` |\n| Â± | `\\pm` | | âˆ‚ | `\\partial` |\n| âˆ€ | `\\forall` | | âˆ‡ | `\\nabla` |\n| âˆƒ | `\\exists` | | âˆ… | `\\emptyset` |\n\nSee [reference.md](reference.md) for complete symbol tables.\n\n---\n\n## 6. Matrices\n\n### Matrix Environments\n\n| Environment | Brackets |\n|-------------|----------|\n| `pmatrix` | ( ) |\n| `bmatrix` | [ ] |\n| `vmatrix` | \\| \\| (determinant) |\n| `Bmatrix` | { } |\n\n### Examples\n\n```latex\n$$\nA = \\begin{pmatrix}\na & b \\\\\nc & d\n\\end{pmatrix}\n$$\n\n$$\n\\det(A) = \\begin{vmatrix}\na & b \\\\\nc & d\n\\end{vmatrix} = ad - bc\n$$\n\n$$\nI = \\begin{bmatrix}\n1 & 0 & 0 \\\\\n0 & 1 & 0 \\\\\n0 & 0 & 1\n\\end{bmatrix}\n$$\n```\n\n### With Ellipsis\n\n```latex\n$$\n\\begin{pmatrix}\na_{11} & \\cdots & a_{1n} \\\\\n\\vdots & \\ddots & \\vdots \\\\\na_{m1} & \\cdots & a_{mn}\n\\end{pmatrix}\n$$\n```\n\n---\n\n## 7. Aligned Equations\n\nUse `aligned` environment with `&` for alignment and `\\\\` for line breaks:\n\n```latex\n$$\n\\begin{aligned}\n(a+b)^2 &= (a+b)(a+b) \\\\\n        &= a^2 + 2ab + b^2\n\\end{aligned}\n$$\n```\n\n### Conditional Definitions (cases)\n\n```latex\n$$\nf(x) = \\begin{cases}\nx^2 & \\text{if } x \\geq 0 \\\\\n-x  & \\text{if } x < 0\n\\end{cases}\n$$\n```\n\n### Text in Math\n\nUse `\\text{...}` for regular text:\n\n```latex\n$$\nx = 5 \\text{ where } x \\in \\mathbb{N}\n$$\n```\n\n---\n\n## 8. Integrals, Sums, and Limits\n\n### Integrals\n\n```latex\n$$\n\\int_a^b f(x) \\, dx \\qquad \\iint_D f \\, dA \\qquad \\oint_C \\mathbf{F} \\cdot d\\mathbf{r}\n$$\n```\n\n**Tip**: Use `\\,` before `dx` for proper spacing.\n\n### Sums and Products\n\n```latex\n$$\n\\sum_{n=1}^{\\infty} \\frac{1}{n^2} = \\frac{\\pi^2}{6}\n$$\n\n$$\n\\prod_{i=1}^{n} a_i\n$$\n```\n\n### Limits\n\n```latex\n$$\n\\lim_{x \\to 0} \\frac{\\sin x}{x} = 1\n$$\n\n$$\n\\lim_{n \\to \\infty} \\left(1 + \\frac{1}{n}\\right)^n = e\n$$\n```\n\n---\n\n## 9. Delimiters\n\nUse `\\left` and `\\right` for auto-sizing:\n\n```latex\n$$\n\\left( \\frac{a}{b} \\right) \\qquad \\left[ \\sum_{i=1}^{n} x_i \\right] \\qquad \\left\\{ x : x > 0 \\right\\}\n$$\n```\n\n### One-sided Delimiter\n\nUse `\\left.` or `\\right.` for invisible delimiter:\n\n```latex\n$$\n\\left. \\frac{df}{dx} \\right|_{x=0}\n$$\n```\n\n---\n\n## 10. Font Styles\n\n| Style | Syntax | Use Case |\n|-------|--------|----------|\n| Bold | `\\mathbf{v}` | Vectors |\n| Roman | `\\mathrm{d}x` | Differential d |\n| Blackboard | `\\mathbb{R}` | Number sets |\n| Calligraphic | `\\mathcal{L}` | Operators |\n\n### Number Sets\n\n```latex\n$$\n\\mathbb{N} \\subset \\mathbb{Z} \\subset \\mathbb{Q} \\subset \\mathbb{R} \\subset \\mathbb{C}\n$$\n```\n\n---\n\n## 11. Decorations\n\n| Decoration | Syntax |\n|------------|--------|\n| Hat | `\\hat{x}` |\n| Bar | `\\bar{x}` |\n| Tilde | `\\tilde{x}` |\n| Vector | `\\vec{x}` |\n| Dot | `\\dot{x}` |\n| Double dot | `\\ddot{x}` |\n\n### Overbrace/Underbrace\n\n```latex\n$$\n\\overbrace{a + b + c}^{\\text{sum}} = \\underbrace{x + y + z}_{\\text{total}}\n$$\n```\n\n### Arrows\n\n```latex\n$$\n\\overrightarrow{AB} \\qquad \\overleftarrow{CD}\n$$\n```\n\n---\n\n## 12. Common Patterns\n\n### Derivatives\n\n```latex\n$$\n\\frac{dy}{dx} \\qquad \\frac{\\partial f}{\\partial x} \\qquad \\nabla f\n$$\n```\n\n### Norm and Absolute Value\n\n```latex\n$$\n\\|x\\| = \\sqrt{\\sum x_i^2} \\qquad |x - y| \\leq |x| + |y|\n$$\n```\n\n### Probability\n\n```latex\n$$\nP(A \\mid B) = \\frac{P(B \\mid A) P(A)}{P(B)}\n$$\n\n$$\n\\mathbb{E}[X] = \\sum_{i} x_i P(X = x_i)\n$$\n```\n\n---\n\n## Quick Reference\n\n```latex\n% Fractions and roots\n\\frac{a}{b}  \\sqrt{x}  \\sqrt[n]{x}\n\n% Greek (common)\n\\alpha \\beta \\gamma \\theta \\lambda \\pi \\sigma \\omega\n\\Gamma \\Delta \\Sigma \\Omega\n\n% Relations\n= \\neq \\leq \\geq \\approx \\equiv \\in \\subset\n\n% Operations\n+ - \\times \\div \\cdot \\pm\n\n% Calculus\n\\int \\sum \\prod \\lim \\partial \\nabla\n\n% Sets\n\\mathbb{R} \\mathbb{N} \\mathbb{Z} \\mathbb{Q} \\mathbb{C}\n\n% Decorations\n\\hat{x} \\bar{x} \\vec{x} \\dot{x}\n```"
              },
              {
                "name": "mermaid-diagramming",
                "description": "Create Mermaid diagrams in Obsidian including flowcharts, sequence diagrams, class diagrams, and more. Use when visualizing processes, system architectures, workflows, or any structured relationships in Obsidian notes.",
                "path": "plugins/obsidian-blocks/skills/mermaid-diagramming/SKILL.md",
                "frontmatter": {
                  "name": "mermaid-diagramming",
                  "description": "Create Mermaid diagrams in Obsidian including flowcharts, sequence diagrams, class diagrams, and more. Use when visualizing processes, system architectures, workflows, or any structured relationships in Obsidian notes.",
                  "context": "fork",
                  "user-invocable": false
                },
                "content": "# Mermaid Diagramming in Obsidian\n\nObsidian has built-in Mermaid support. Use fenced code blocks with `mermaid` language identifier.\n\nFor common syntax (styling, comments, themes), see [reference.md](reference.md).\n\n## âš ï¸ Obsidian-Specific Constraints\n\n**Rendering Differences**: Obsidian's Mermaid version may lag behind mermaid.js releases. Some cutting-edge features may not work.\n\n**Theme Interaction**: Diagram colors adapt to Obsidian theme. Use explicit styles for consistent appearance across themes.\n\n**Performance**: Very large diagrams (50+ nodes) may slow down rendering. Split into multiple diagrams if needed.\n\n**Export**: PDF export converts diagrams to images. For external sharing, capture as PNG/SVG.\n\n**No JavaScript**: Click events and JavaScript callbacks are disabled for security.\n\n---\n\n## Diagram Selection Guide\n\n| Use Case | Diagram Type | Keyword |\n|----------|--------------|---------|\n| Process flow, decision trees | Flowchart | `flowchart` |\n| API calls, message passing | Sequence | `sequenceDiagram` |\n| OOP design, relationships | Class | `classDiagram` |\n| Project timeline, scheduling | Gantt | `gantt` |\n| State machine, lifecycle | State | `stateDiagram-v2` |\n| Git branching strategy | Gitgraph | `gitGraph` |\n| Brainstorming, hierarchies | Mindmap | `mindmap` |\n| Proportions, percentages | Pie Chart | `pie` |\n| Database schema, entities | ER Diagram | `erDiagram` |\n| User experience steps, satisfaction | User Journey | `journey` |\n| Historical events, milestones | Timeline | `timeline` |\n| Priority matrix, 2D positioning | Quadrant Chart | `quadrantChart` |\n| Flow visualization, proportional bands | Sankey Diagram | `sankey-beta` |\n| Numerical data visualization | XY Chart | `xychart-beta` |\n| Precise element positioning, layouts | Block Diagram | `block-beta` |\n| Cloud services, service relationships | Architecture | `architecture-beta` |\n\n---\n\n## Quick Start Examples\n\n### Flowchart\n\n```mermaid\nflowchart TD\n    A[Start] --> B{Decision}\n    B -->|Yes| C[Action 1]\n    B -->|No| D[Action 2]\n    C --> E[End]\n    D --> E\n```\n\n**Key syntax:**\n- Direction: `TD` (top-down), `LR` (left-right), `BT`, `RL`\n- Shapes: `[rect]`, `(rounded)`, `{diamond}`, `[(cylinder)]`, `((circle))`\n- Arrows: `-->`, `-.->` (dotted), `==>` (thick)\n- Labels: `-->|text|` or `-- text -->`\n\nFor details: [flowchart.md](flowchart.md)\n\n---\n\n### Sequence Diagram\n\n```mermaid\nsequenceDiagram\n    participant C as Client\n    participant S as Server\n    participant D as Database\n\n    C->>S: HTTP Request\n    activate S\n    S->>D: Query\n    D-->>S: Result\n    S-->>C: Response\n    deactivate S\n```\n\n**Key syntax:**\n- Arrows: `->>` (sync), `-->>` (response), `-)` (async)\n- Activation: `activate`/`deactivate` or `+`/`-` suffix\n- Control: `loop`, `alt`/`else`, `opt`, `par`/`and`, `critical`\n- Notes: `Note right of A: text`, `Note over A,B: text`\n\nFor details: [sequence.md](sequence.md)\n\n---\n\n### Class Diagram\n\n```mermaid\nclassDiagram\n    class Animal {\n        +String name\n        +int age\n        +makeSound() void\n    }\n    class Dog {\n        +fetch() void\n    }\n    Animal <|-- Dog : extends\n```\n\n**Key syntax:**\n- Visibility: `+` public, `-` private, `#` protected, `~` package\n- Relations: `<|--` inheritance, `*--` composition, `o--` aggregation, `-->` association\n- Methods: `+method(args) returnType`\n\nFor details: [class-diagram.md](class-diagram.md)\n\n---\n\n### Gantt Chart\n\n```mermaid\ngantt\n    title Project Timeline\n    dateFormat YYYY-MM-DD\n\n    section Planning\n    Requirements    :a1, 2024-01-01, 7d\n    Design          :a2, after a1, 5d\n\n    section Development\n    Implementation  :2024-01-15, 14d\n    Testing         :7d\n```\n\n**Key syntax:**\n- `dateFormat`: Date format (YYYY-MM-DD, etc.)\n- Tasks: `name :id, start, duration` or `name :after id, duration`\n- Modifiers: `done`, `active`, `crit`, `milestone`\n\nFor details: [gantt.md](gantt.md)\n\n---\n\n### State Diagram\n\n```mermaid\nstateDiagram-v2\n    [*] --> Idle\n    Idle --> Processing : start\n    Processing --> Success : complete\n    Processing --> Error : fail\n    Success --> [*]\n    Error --> Idle : retry\n```\n\n**Key syntax:**\n- Start/End: `[*]`\n- Transition: `State1 --> State2 : event`\n- Composite: `state Name { ... }`\n- Fork/Join: `state fork_name <<fork>>`, `<<join>>`\n\nFor details: [state.md](state.md)\n\n---\n\n### Gitgraph\n\n```mermaid\ngitGraph\n    commit id: \"init\"\n    branch develop\n    checkout develop\n    commit id: \"feat-1\"\n    commit id: \"feat-2\"\n    checkout main\n    merge develop id: \"v1.0\" tag: \"release\"\n```\n\n**Key syntax:**\n- `commit`: Add commit, optional `id:`, `tag:`, `type:`\n- `branch name`: Create branch\n- `checkout name`: Switch branch\n- `merge name`: Merge branch\n\nFor details: [gitgraph.md](gitgraph.md)\n\n---\n\n### Mindmap\n\n```mermaid\nmindmap\n    root((Project))\n        Frontend\n            React\n            TypeScript\n        Backend\n            Node.js\n            PostgreSQL\n        DevOps\n            Docker\n            CI/CD\n```\n\n**Key syntax:**\n- Indentation defines hierarchy\n- Shapes: `root((circle))`, `(rounded)`, `[square]`, `))cloud((`\n- Use 4-space or tab indentation\n\nFor details: [mindmap.md](mindmap.md)\n\n---\n\n### Pie Chart\n\n```mermaid\npie showData\n    title Browser Market Share\n    \"Chrome\" : 65\n    \"Safari\" : 19\n    \"Firefox\" : 8\n    \"Edge\" : 5\n    \"Other\" : 3\n```\n\n**Key syntax:**\n- `title`: Optional chart title\n- `showData`: Display values on segments\n- Format: `\"Label\" : value`\n\nFor details: [pie.md](pie.md)\n\n---\n\n### ER Diagram\n\n```mermaid\nerDiagram\n    CUSTOMER ||--o{ ORDER : places\n    ORDER ||--|{ LINE-ITEM : contains\n    CUSTOMER {\n        int id PK\n        string email UK\n        string name\n    }\n```\n\n**Key syntax:**\n- Entities: `ENTITY_NAME`\n- Attributes: `type name [PK/FK/UK]`\n- Cardinality: `||--o{` (one to many), `||--||` (one to one)\n- Relationship: `ENTITY1 REL ENTITY2 : label`\n\nFor details: [er-diagram.md](er-diagram.md)\n\n---\n\n### User Journey\n\n```mermaid\njourney\n    title Customer Support\n    section Contact\n      Submit ticket: 2: Customer\n      Receive notice: 4: Agent\n    section Resolution\n      Troubleshoot issue: 3: Agent\n      Confirm solution: 5: Customer\n```\n\n**Key syntax:**\n- Sections: `section name`\n- Tasks: `Task name: score: actor`\n- Score: 1-5 (1 = unsatisfied, 5 = satisfied)\n- Actors: User roles involved\n\nFor details: [journey.md](journey.md)\n\n---\n\n### Timeline\n\n```mermaid\ntimeline\n    title Product Roadmap\n    section 2023\n        Q1 2023 : MVP launch\n        Q4 2023 : v1.0 release\n    section 2024\n        Q2 2024 : Major features\n        Q4 2024 : v2.0\n```\n\n**Key syntax:**\n- Time periods: `period : event`\n- Sections: Group related periods\n- Multiple events: `period : event1 : event2`\n- Flexible format: Years, months, quarters, or custom text\n\nFor details: [timeline.md](timeline.md)\n\n---\n\n### Quadrant Chart\n\n```mermaid\nquadrantChart\n    title Feature Prioritization\n    x-axis Effort --> Value\n    y-axis Complexity --> Impact\n    Dark Mode: [0.4, 0.7]\n    Search: [0.6, 0.8]\n    Export PDF: [0.7, 0.6]\n    Fix UI Bug: [0.2, 0.3]\n```\n\n**Key syntax:**\n- Axes: `x-axis label --> label` and `y-axis label --> label`\n- Points: `Name: [x, y]` (coordinates 0.0-1.0)\n- Quadrants: Auto-divided at 0.5 on both axes\n\nFor details: [quadrant-chart.md](quadrant-chart.md)\n\n---\n\n### Sankey Diagram\n\n```mermaid\nsankey-beta\n\nA,B,10\nA,C,15\nB,D,8\nC,D,22\n```\n\n**Key syntax:**\n- CSV format: `source, target, value`\n- Three columns required\n- Values are numeric (flow magnitude)\n- Nodes auto-created from sources/targets\n\nFor details: [sankey.md](sankey.md)\n\n---\n\n### XY Chart\n\n```mermaid\nxychart-beta\n    title \"Sales Data\"\n    x-axis [Jan, Feb, Mar, Apr, May]\n    y-axis \"Revenue\" 0 --> 100\n    line [30, 45, 55, 70, 85]\n```\n\n**Key syntax:**\n- Chart type: `xychart-beta` or `xychart-beta horizontal`\n- X-axis: `[categories]` or `min --> max`\n- Y-axis: `\"label\" min --> max`\n- Series: `line [values]` or `bar [values]`\n\nFor details: [xychart.md](xychart.md)\n\n---\n\n### Block Diagram\n\n```mermaid\nblock-beta\n    columns 2\n    A[\"Frontend\"]:1\n    B[\"Backend\"]:1\n    C[\"Database\"]:2\n\n    style A fill:#e3f2fd,stroke:#1565c0,color:#0d47a1\n    style B fill:#f3e5f5,stroke:#7b1fa2,color:#4a148c\n    style C fill:#e8f5e9,stroke:#2e7d32,color:#1b5e20\n```\n\n**Key syntax:**\n- Blocks: `ID[\"Label\"]:SPAN` - Each block on new line\n- Columns: `columns N` - Define layout width\n- Styling: `style ID fill:#hex,stroke:#hex,color:#hex`\n- Spans: `:N` suffix - How many columns block occupies\n\nFor details: [block.md](block.md)\n\n---\n\n### Architecture Diagram\n\n```mermaid\narchitecture-beta\n    group Cloud(cloud)[Cloud Infrastructure]\n    service web(server)[Web Server] in Cloud\n    service api(server)[API Server] in Cloud\n    service db(database)[Database]\n\n    web:R --> L:api\n    api:R --> L:db\n```\n\n**Key syntax:**\n- Groups: `group {id}({icon})[{label}]` - Organize services\n- Services: `service {id}({icon})[{label}] (in {parent})?` - Available icons: server, database, cloud, disk, internet\n- Nesting: `in {parent_id}` - Place service/group inside parent group\n- Connections: `{id1}:{pos} {arrow} {pos}:{id2}` - Position: L(eft), R(ight), T(op), B(ottom)\n- Arrows: `-->` (right), `<--` (left), `--` (both)\n\nFor details: [architecture.md](architecture.md)\n\n---\n\n\n## Common Patterns\n\n### Adding Styles\n\n```mermaid\nflowchart LR\n    A[Normal] --> B[Styled]\n    style B fill:#f96,stroke:#333,stroke-width:2px\n```\n\n### Using Classes\n\n```mermaid\nflowchart LR\n    A:::highlight --> B --> C:::highlight\n    classDef highlight fill:#ff0,stroke:#f00,stroke-width:2px\n```\n\n### Comments\n\n```mermaid\nflowchart TD\n    %% This is a comment\n    A --> B\n```\n\n---\n\n## Reference\n\nFor complete documentation on common features:\n- [reference.md](reference.md) - Styling, themes, comments, directives\n\nFor diagram-specific guides:\n- [flowchart.md](flowchart.md) - Node shapes, links, subgraphs\n- [sequence.md](sequence.md) - Messages, activation, control flow\n- [class-diagram.md](class-diagram.md) - Classes, relationships\n- [gantt.md](gantt.md) - Tasks, dependencies, milestones\n- [state.md](state.md) - States, transitions, composite states\n- [gitgraph.md](gitgraph.md) - Commits, branches, merges\n- [mindmap.md](mindmap.md) - Hierarchies, node shapes\n- [pie.md](pie.md) - Proportional data\n- [er-diagram.md](er-diagram.md) - Entities, attributes, relationships (Session 1)\n- [journey.md](journey.md) - User journeys, satisfaction scores (Session 1)\n- [timeline.md](timeline.md) - Events, milestones, time periods (Session 1)\n- [quadrant-chart.md](quadrant-chart.md) - Priority matrix, 2D positioning (Session 2)\n- [sankey.md](sankey.md) - Flow visualization, proportional bands (Session 2)\n- [xychart.md](xychart.md) - Numerical data visualization (Session 2)\n- [block.md](block.md) - Element positioning, multi-column layouts (Session 3)\n- [architecture.md](architecture.md) - Cloud services, service relationships (Session 3)"
              },
              {
                "name": "tikzjax-diagramming",
                "description": "Create TikZ diagrams in Obsidian using TikZJax plugin. Use when visualizing geometric shapes, coordinate systems, game scenes, circuit diagrams, chemical structures, or complex technical drawings that require precise positioning.",
                "path": "plugins/obsidian-blocks/skills/tikzjax-diagramming/SKILL.md",
                "frontmatter": {
                  "name": "tikzjax-diagramming",
                  "description": "Create TikZ diagrams in Obsidian using TikZJax plugin. Use when visualizing geometric shapes, coordinate systems, game scenes, circuit diagrams, chemical structures, or complex technical drawings that require precise positioning.",
                  "context": "fork",
                  "user-invocable": false
                },
                "content": "# TikZJax Diagramming for Obsidian\n\nTikZJax enables LaTeX/TikZ diagrams in Obsidian. Use for complex technical drawings where Mermaid lacks precision:\n- Geometric shapes and coordinate systems\n- Game scenes with precise positioning\n- Circuit diagrams (circuitikz)\n- Chemical structures (chemfig)\n- 3D plots (tikz-3dplot, pgfplots)\n- Commutative diagrams (tikz-cd)\n\n## Basic Syntax\n\n```tikz\n\\begin{document}\n\\begin{tikzpicture}[scale=1]\n  \\draw[thick] (0,0) rectangle (4,2);\n  \\fill[cyan] (1,0.5) rectangle (3,1.5);\n\\end{tikzpicture}\n\\end{document}\n```\n\n**Required Structure:**\n- Code block language: `tikz`\n- Must include `\\begin{document}` and `\\end{document}`\n- Drawing code inside `\\begin{tikzpicture}...\\end{tikzpicture}`\n- Recommended: `scale=1` (smaller values reduce text readability)\n\n## Supported Packages\n\nLoad with `\\usepackage{}`:\n\n| Package | Purpose |\n|---------|---------|\n| tikz | Core drawing (implicit) |\n| tikz-cd | Commutative diagrams |\n| circuitikz | Electronic circuits |\n| pgfplots | Data visualization, plots |\n| chemfig | Chemical structures |\n| tikz-3dplot | 3D coordinate systems |\n| array | Table environments |\n| amsmath | Math typesetting |\n| amsfonts | Mathematical fonts |\n| amssymb | Mathematical symbols |\n\n## TikZ Libraries\n\nLoad with `\\usetikzlibrary{}`:\n\n```latex\n\\usepackage{tikz}\n\\usetikzlibrary{decorations.pathreplacing}\n\\usetikzlibrary{arrows.meta}\n\\usetikzlibrary{calc}\n\\begin{document}\n  % Drawing commands here\n\\end{document}\n```\n\n## Dark Mode Behavior\n\nTikZJax plugin can automatically invert `black` â†” `white` in dark mode (configurable in plugin settings).\n\n### Text Color\n\nOmit color specification in `\\node` for automatic theme adaptation:\n\n```latex\n% Explicit color - fixed, won't adapt\n\\node[black] at (2,0) {Label};\n\n% No color - adapts automatically (recommended)\n\\node at (2,0) {Label};\n```\n\n### Black/White Inversion\n\nWhen dark mode inversion is enabled:\n- `black` becomes `white` (and vice versa)\n- Other named colors remain unchanged\n- `\\definecolor{}` custom colors are NOT inverted\n\n## Unsupported Features\n\n| Feature | Status | Alternative |\n|---------|--------|-------------|\n| Color mixing (`blue!30`, `cyan!20!white`) | Not supported | Use base colors only |\n| Korean text | Not supported | Use English |\n| `\\definecolor{}{RGB}{}` | Not inverted in dark mode | Use named colors if inversion needed |\n| `\\definecolor{}{HTML}{}` | Not inverted in dark mode | Use named colors if inversion needed |\n\n## Quick Start Examples\n\n### Simple Rectangle with Fill\n\n```tikz\n\\begin{document}\n\\begin{tikzpicture}[scale=1]\n  \\draw[thick, gray] (0,0) rectangle (4,3);\n  \\fill[cyan, opacity=0.3] (0.5,0.5) rectangle (3.5,2.5);\n  \\node at (2,1.5) {Content Area};\n\\end{tikzpicture}\n\\end{document}\n```\n\n### Coordinate System\n\n```tikz\n\\begin{document}\n\\begin{tikzpicture}[scale=1]\n  % Axes\n  \\draw[thick, gray, ->] (-0.5,0) -- (4,0) node[right] {$x$};\n  \\draw[thick, gray, ->] (0,-0.5) -- (0,3) node[above] {$y$};\n\n  % Point\n  \\fill[red] (2,1.5) circle (3pt) node[above right] {$P(2,1.5)$};\n\n  % Dashed guides\n  \\draw[dashed, yellow] (2,0) -- (2,1.5);\n  \\draw[dashed, yellow] (0,1.5) -- (2,1.5);\n\\end{tikzpicture}\n\\end{document}\n```\n\n### Circuit Diagram\n\n```tikz\n\\usepackage{circuitikz}\n\\begin{document}\n\\begin{circuitikz}[scale=1]\n  \\draw (0,0) to[R, l=$R_1$] (2,0)\n              to[C, l=$C_1$] (4,0)\n              to[short] (4,-2)\n              to[battery1, l=$V$] (0,-2)\n              to[short] (0,0);\n\\end{circuitikz}\n\\end{document}\n```\n\n### Chemical Structure\n\n```tikz\n\\usepackage{chemfig}\n\\begin{document}\n\\chemfig{H-C(-[2]H)(-[6]H)-C(-[2]H)(-[6]H)-H}\n\\end{document}\n```\n\n### Commutative Diagram\n\n```tikz\n\\usepackage{tikz-cd}\n\\begin{document}\n\\begin{tikzcd}\n  A \\arrow[r, \"f\"] \\arrow[d, \"g\"'] & B \\arrow[d, \"h\"] \\\\\n  C \\arrow[r, \"k\"'] & D\n\\end{tikzcd}\n\\end{document}\n```\n\n### 3D Plot\n\n```tikz\n\\usepackage{pgfplots}\n\\begin{document}\n\\begin{tikzpicture}\n\\begin{axis}[\n  view={60}{30},\n  colormap/cool\n]\n\\addplot3[\n  surf,\n  domain=-2:2,\n  domain y=-2:2\n] {exp(-x^2-y^2)};\n\\end{axis}\n\\end{tikzpicture}\n\\end{document}\n```\n\n## When to Use TikZJax vs Other Tools\n\n| Use Case | Tool |\n|----------|------|\n| Flowcharts, sequences, ER diagrams | Mermaid |\n| Mathematical functions, interactive graphs | Desmos |\n| Inline math, equations | MathJax |\n| Precise geometry, coordinate systems | **TikZJax** |\n| Game scenes, sprites, positioning | **TikZJax** |\n| Circuit diagrams | **TikZJax** |\n| Chemical structures | **TikZJax** |\n| 3D visualizations | **TikZJax** |\n\n## Reference\n\nFor complete syntax reference, color tables, and advanced examples, see [reference.md](reference.md)."
              }
            ]
          },
          {
            "name": "omarchy",
            "description": "Skills for creating and managing themes in Omarchy, a Hyprland-based Linux desktop environment.",
            "source": "./plugins/omarchy",
            "category": null,
            "version": "1.0.0",
            "author": {
              "name": "BitYoungjae",
              "email": "bityoungjae@gmail.com"
            },
            "install_commands": [
              "/plugin marketplace add BitYoungjae/marketplace",
              "/plugin install omarchy@bityoungjae-marketplace"
            ],
            "signals": {
              "stars": 5,
              "forks": 0,
              "pushed_at": "2026-01-12T13:31:28Z",
              "created_at": "2025-12-27T15:21:29Z",
              "license": "MIT"
            },
            "commands": [],
            "skills": [
              {
                "name": "omarchy-theming",
                "description": "Create and manage Omarchy desktop themes. Use when working with colors.toml, terminal themes (Alacritty/Kitty/Ghostty), Hyprland colors, Waybar styling, btop themes, or theme installation/removal.",
                "path": "plugins/omarchy/skills/omarchy-theming/SKILL.md",
                "frontmatter": {
                  "name": "omarchy-theming",
                  "description": "Create and manage Omarchy desktop themes. Use when working with colors.toml, terminal themes (Alacritty/Kitty/Ghostty), Hyprland colors, Waybar styling, btop themes, or theme installation/removal."
                },
                "content": "# Omarchy Theme Creation\n\nCreate themes for Omarchy by defining colors in `colors.toml`. Colors automatically propagate to all desktop applications.\n\n## Quick Start\n\n<steps>\n1. Create theme directory:\n   ```bash\n   mkdir -p ~/.config/omarchy/themes/my-theme/backgrounds\n   ```\n\n2. Create `colors.toml` with all 22 required variables (see schema below)\n\n3. Add wallpaper images to `backgrounds/`\n\n4. Apply theme:\n   ```bash\n   omarchy-theme-set my-theme\n   ```\n</steps>\n\n## Instructions\n\nWhen creating or modifying Omarchy themes:\n\n1. **Always define all 22 color variables** in `colors.toml` - missing variables cause errors\n2. **Use HEX format only** (`#RRGGBB`) - no RGB, HSL, or named colors\n3. **Include `backgrounds/` directory** with at least one wallpaper image\n4. **For light themes**, create empty `light.mode` file in theme directory\n5. **Test with `omarchy-theme-set`** after changes\n\nFor detailed variable usage per application, see [reference.md](reference.md).\n\n## Theme Structure\n\n```\n~/.config/omarchy/themes/{theme-name}/\nâ”œâ”€â”€ colors.toml        # [Required] 22 color definitions\nâ”œâ”€â”€ backgrounds/       # [Required] Wallpaper images (PNG/JPG)\nâ”œâ”€â”€ preview.png        # [Recommended] Theme preview\nâ”œâ”€â”€ icons.theme        # [Recommended] GTK icon theme name\nâ”œâ”€â”€ neovim.lua         # [Recommended] LazyVim colorscheme\nâ”œâ”€â”€ vscode.json        # [Recommended] VS Code theme metadata\nâ”œâ”€â”€ btop.theme         # [Recommended] btop color theme\nâ”œâ”€â”€ light.mode         # [Optional] Empty file = light theme\nâ”œâ”€â”€ chromium.theme     # [Optional] Browser theme RGB\nâ””â”€â”€ hyprland.conf      # [Optional] Static Hyprland override\n```\n\n## colors.toml Schema\n\n<schema>\n```toml\n# Core UI (6 variables)\naccent = \"#89b4fa\"                 # Primary accent color\ncursor = \"#f5e0dc\"                 # Terminal cursor\nforeground = \"#cdd6f4\"             # Primary text\nbackground = \"#1e1e2e\"             # Primary background\nselection_foreground = \"#1e1e2e\"   # Selected text foreground\nselection_background = \"#f5e0dc\"   # Selected text background\n\n# ANSI Normal (8 variables)\ncolor0 = \"#45475a\"    # Black\ncolor1 = \"#f38ba8\"    # Red (errors)\ncolor2 = \"#a6e3a1\"    # Green (success)\ncolor3 = \"#f9e2af\"    # Yellow (warnings)\ncolor4 = \"#89b4fa\"    # Blue (links)\ncolor5 = \"#f5c2e7\"    # Magenta (special)\ncolor6 = \"#94e2d5\"    # Cyan (code)\ncolor7 = \"#bac2de\"    # White (text)\n\n# ANSI Bright (8 variables)\ncolor8 = \"#585b70\"    # Bright Black (muted/disabled)\ncolor9 = \"#f38ba8\"    # Bright Red\ncolor10 = \"#a6e3a1\"   # Bright Green\ncolor11 = \"#f9e2af\"   # Bright Yellow\ncolor12 = \"#89b4fa\"   # Bright Blue\ncolor13 = \"#f5c2e7\"   # Bright Magenta\ncolor14 = \"#94e2d5\"   # Bright Cyan\ncolor15 = \"#a6adc8\"   # Bright White\n```\n</schema>\n\n## Template Variables\n\nEach color supports 3 formats for different contexts:\n\n| Format | Example | Output | Use Case |\n|--------|---------|--------|----------|\n| `{{ name }}` | `{{ accent }}` | `#89b4fa` | CSS, TOML |\n| `{{ name_strip }}` | `{{ accent_strip }}` | `89b4fa` | Hyprland `rgb()` |\n| `{{ name_rgb }}` | `{{ accent_rgb }}` | `137,180,250` | RGBA values |\n\n## Examples\n\n<example title=\"Dark Theme (Tokyo Night)\">\n```toml\naccent = \"#7aa2f7\"\ncursor = \"#c0caf5\"\nforeground = \"#a9b1d6\"\nbackground = \"#1a1b26\"\nselection_foreground = \"#c0caf5\"\nselection_background = \"#7aa2f7\"\n\ncolor0 = \"#32344a\"\ncolor1 = \"#f7768e\"\ncolor2 = \"#9ece6a\"\ncolor3 = \"#e0af68\"\ncolor4 = \"#7aa2f7\"\ncolor5 = \"#ad8ee6\"\ncolor6 = \"#449dab\"\ncolor7 = \"#787c99\"\ncolor8 = \"#444b6a\"\ncolor9 = \"#ff7a93\"\ncolor10 = \"#b9f27c\"\ncolor11 = \"#ff9e64\"\ncolor12 = \"#7da6ff\"\ncolor13 = \"#bb9af7\"\ncolor14 = \"#0db9d7\"\ncolor15 = \"#acb0d0\"\n```\n</example>\n\n<example title=\"Light Theme (Catppuccin Latte)\">\n```toml\n# Note: Create empty light.mode file for light themes\naccent = \"#1e66f5\"\ncursor = \"#dc8a78\"\nforeground = \"#4c4f69\"\nbackground = \"#eff1f5\"\nselection_foreground = \"#eff1f5\"\nselection_background = \"#dc8a78\"\n\ncolor0 = \"#bcc0cc\"\ncolor1 = \"#d20f39\"\ncolor2 = \"#40a02b\"\ncolor3 = \"#df8e1d\"\ncolor4 = \"#1e66f5\"\ncolor5 = \"#ea76cb\"\ncolor6 = \"#179299\"\ncolor7 = \"#5c5f77\"\ncolor8 = \"#acb0be\"\ncolor9 = \"#d20f39\"\ncolor10 = \"#40a02b\"\ncolor11 = \"#df8e1d\"\ncolor12 = \"#1e66f5\"\ncolor13 = \"#ea76cb\"\ncolor14 = \"#179299\"\ncolor15 = \"#6c6f85\"\n```\n</example>\n\n<example title=\"neovim.lua\">\n```lua\nreturn {\n    { \"folke/tokyonight.nvim\", priority = 1000 },\n    { \"LazyVim/LazyVim\", opts = { colorscheme = \"tokyonight\" } },\n}\n```\n</example>\n\n<example title=\"vscode.json\">\n```json\n{ \"name\": \"Tokyo Night\", \"extension\": \"enkia.tokyo-night\" }\n```\n</example>\n\n## Theme Commands\n\n```bash\nomarchy-theme-set my-theme      # Apply theme\nomarchy-theme-current           # Show current theme\nomarchy-theme-list              # List available themes\nomarchy-theme-install <git-url> # Install from git\nomarchy-theme-remove my-theme   # Remove theme\nomarchy-theme-update            # Update git themes\nomarchy-theme-bg-next           # Cycle wallpaper\n```\n\n## Troubleshooting\n\n<troubleshooting>\n**Colors not applying:**\n- Verify all 22 variables defined\n- Check HEX format (`#RRGGBB`)\n- Run `omarchy-theme-set` to regenerate\n\n**App not themed:**\n- Place static config in theme folder to override template\n- Check variable names match colors.toml keys\n\n**yq errors:**\n```bash\nsudo pacman -S yq\n```\n</troubleshooting>"
              }
            ]
          }
        ]
      }
    }
  ]
}