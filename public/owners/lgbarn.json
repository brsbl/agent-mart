{
  "owner": {
    "id": "lgbarn",
    "display_name": "Luther Barnum",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/4458104?u=26f5eea3df0f20d9e9d88f391e94a5817120410f&v=4",
    "url": "https://github.com/lgbarn",
    "bio": null,
    "stats": {
      "total_repos": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 3,
      "total_stars": 1,
      "total_forks": 2
    }
  },
  "repos": [
    {
      "full_name": "lgbarn/trading-indicator-plugins",
      "url": "https://github.com/lgbarn/trading-indicator-plugins",
      "description": "Claude Code plugin marketplace for trading indicator development (Pine Script, NinjaScript, Tradovate)",
      "homepage": null,
      "signals": {
        "stars": 1,
        "forks": 2,
        "pushed_at": "2025-12-22T16:36:13Z",
        "created_at": "2025-12-22T02:11:09Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 429
        },
        {
          "path": ".gitignore",
          "type": "blob",
          "size": 220
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 13631
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 198
        },
        {
          "path": "plugins/trading-indicators/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators/agents/code-reviewer.md",
          "type": "blob",
          "size": 2621
        },
        {
          "path": "plugins/trading-indicators/agents/converter.md",
          "type": "blob",
          "size": 3855
        },
        {
          "path": "plugins/trading-indicators/agents/debugger.md",
          "type": "blob",
          "size": 3530
        },
        {
          "path": "plugins/trading-indicators/agents/doc-researcher.md",
          "type": "blob",
          "size": 2125
        },
        {
          "path": "plugins/trading-indicators/agents/documentation-generator.md",
          "type": "blob",
          "size": 2845
        },
        {
          "path": "plugins/trading-indicators/agents/ninjascript-expert.md",
          "type": "blob",
          "size": 2165
        },
        {
          "path": "plugins/trading-indicators/agents/performance-analyzer.md",
          "type": "blob",
          "size": 3095
        },
        {
          "path": "plugins/trading-indicators/agents/pine-expert.md",
          "type": "blob",
          "size": 2274
        },
        {
          "path": "plugins/trading-indicators/agents/testing-agent.md",
          "type": "blob",
          "size": 3498
        },
        {
          "path": "plugins/trading-indicators/agents/tradovate-expert.md",
          "type": "blob",
          "size": 6100
        },
        {
          "path": "plugins/trading-indicators/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators/commands/ninja",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators/commands/ninja/add-feature.md",
          "type": "blob",
          "size": 1740
        },
        {
          "path": "plugins/trading-indicators/commands/ninja/cleanup.md",
          "type": "blob",
          "size": 2470
        },
        {
          "path": "plugins/trading-indicators/commands/ninja/compare.md",
          "type": "blob",
          "size": 2268
        },
        {
          "path": "plugins/trading-indicators/commands/ninja/convert.md",
          "type": "blob",
          "size": 3478
        },
        {
          "path": "plugins/trading-indicators/commands/ninja/debug.md",
          "type": "blob",
          "size": 2679
        },
        {
          "path": "plugins/trading-indicators/commands/ninja/document.md",
          "type": "blob",
          "size": 2439
        },
        {
          "path": "plugins/trading-indicators/commands/ninja/explain.md",
          "type": "blob",
          "size": 2333
        },
        {
          "path": "plugins/trading-indicators/commands/ninja/new-indicator.md",
          "type": "blob",
          "size": 1593
        },
        {
          "path": "plugins/trading-indicators/commands/ninja/refactor.md",
          "type": "blob",
          "size": 4117
        },
        {
          "path": "plugins/trading-indicators/commands/ninja/test.md",
          "type": "blob",
          "size": 2589
        },
        {
          "path": "plugins/trading-indicators/commands/ninja/validate.md",
          "type": "blob",
          "size": 1733
        },
        {
          "path": "plugins/trading-indicators/commands/pine",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators/commands/pine/add-feature.md",
          "type": "blob",
          "size": 1487
        },
        {
          "path": "plugins/trading-indicators/commands/pine/cleanup.md",
          "type": "blob",
          "size": 2268
        },
        {
          "path": "plugins/trading-indicators/commands/pine/compare.md",
          "type": "blob",
          "size": 2130
        },
        {
          "path": "plugins/trading-indicators/commands/pine/convert.md",
          "type": "blob",
          "size": 3293
        },
        {
          "path": "plugins/trading-indicators/commands/pine/debug.md",
          "type": "blob",
          "size": 2626
        },
        {
          "path": "plugins/trading-indicators/commands/pine/document.md",
          "type": "blob",
          "size": 2610
        },
        {
          "path": "plugins/trading-indicators/commands/pine/explain.md",
          "type": "blob",
          "size": 2009
        },
        {
          "path": "plugins/trading-indicators/commands/pine/new-indicator.md",
          "type": "blob",
          "size": 1674
        },
        {
          "path": "plugins/trading-indicators/commands/pine/refactor.md",
          "type": "blob",
          "size": 3307
        },
        {
          "path": "plugins/trading-indicators/commands/pine/test.md",
          "type": "blob",
          "size": 2536
        },
        {
          "path": "plugins/trading-indicators/commands/pine/validate.md",
          "type": "blob",
          "size": 1673
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate/add-feature.md",
          "type": "blob",
          "size": 1683
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate/cleanup.md",
          "type": "blob",
          "size": 2378
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate/compare.md",
          "type": "blob",
          "size": 2147
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate/convert.md",
          "type": "blob",
          "size": 3226
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate/debug.md",
          "type": "blob",
          "size": 2443
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate/document.md",
          "type": "blob",
          "size": 2551
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate/explain.md",
          "type": "blob",
          "size": 2240
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate/new-indicator.md",
          "type": "blob",
          "size": 1699
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate/refactor.md",
          "type": "blob",
          "size": 4745
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate/test.md",
          "type": "blob",
          "size": 2328
        },
        {
          "path": "plugins/trading-indicators/commands/tradovate/validate.md",
          "type": "blob",
          "size": 1582
        },
        {
          "path": "plugins/trading-indicators/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators/skills/ninja-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators/skills/ninja-patterns/SKILL.md",
          "type": "blob",
          "size": 6181
        },
        {
          "path": "plugins/trading-indicators/skills/pine-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators/skills/pine-patterns/SKILL.md",
          "type": "blob",
          "size": 5180
        },
        {
          "path": "plugins/trading-indicators/skills/tradovate-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/trading-indicators/skills/tradovate-patterns/SKILL.md",
          "type": "blob",
          "size": 6927
        }
      ],
      "marketplace": {
        "name": "local-plugins",
        "version": null,
        "description": null,
        "owner_info": {
          "name": "Luther Barnum"
        },
        "keywords": [],
        "plugins": [
          {
            "name": "trading-indicators",
            "description": "Trading indicator development for TradingView, NinjaTrader, and Tradovate",
            "source": "./plugins/trading-indicators",
            "category": null,
            "version": "1.0.0",
            "author": null,
            "install_commands": [
              "/plugin marketplace add lgbarn/trading-indicator-plugins",
              "/plugin install trading-indicators@local-plugins"
            ],
            "signals": {
              "stars": 1,
              "forks": 2,
              "pushed_at": "2025-12-22T16:36:13Z",
              "created_at": "2025-12-22T02:11:09Z",
              "license": null
            },
            "commands": [],
            "skills": [
              {
                "name": "ninja-patterns",
                "description": "NinjaTrader 8 NinjaScript indicator scaffold and patterns. Provides C# structure guidance and triggers doc-researcher for API verification. Use when developing NinjaTrader indicators.",
                "path": "plugins/trading-indicators/skills/ninja-patterns/SKILL.md",
                "frontmatter": {
                  "name": "ninja-patterns",
                  "description": "NinjaTrader 8 NinjaScript indicator scaffold and patterns. Provides C# structure guidance and triggers doc-researcher for API verification. Use when developing NinjaTrader indicators."
                },
                "content": "# NinjaScript Patterns\n\nLightweight scaffold for NinjaTrader 8 NinjaScript/C# indicator development.\n\n## Before Generating Code\n\nALWAYS use doc-researcher agent or Ref MCP tools to verify:\n- NinjaTrader 8 API methods\n- Property attribute usage\n- Drawing object APIs\n\n## File Conventions\n\n- File naming: `*LB.cs`\n- Author: `// Author: Luther Barnum`\n\n## Namespace & Class\n\n```csharp\nnamespace NinjaTrader.NinjaScript.Indicators.LB\n{\n    public class [Name]LB : Indicator\n    {\n        // Implementation\n    }\n}\n```\n\n## Lifecycle Methods\n\n### OnStateChange()\n```csharp\nprotected override void OnStateChange()\n{\n    if (State == State.SetDefaults)\n    {\n        Description = \"Indicator description\";\n        Name = \"IndicatorName\";\n        // Set property defaults\n    }\n    else if (State == State.Configure)\n    {\n        AddPlot(Brushes.Blue, \"PlotName\");\n    }\n    else if (State == State.DataLoaded)\n    {\n        // Initialize Series objects\n    }\n}\n```\n\n### OnBarUpdate()\n```csharp\nprotected override void OnBarUpdate()\n{\n    if (CurrentBar < BarsRequiredToPlot) return;\n    // Calculations\n}\n```\n\n## Property Attributes\n\n```csharp\n[NinjaScriptProperty]\n[Display(Name = \"Period\", Order = 1, GroupName = \"Parameters\")]\n[Range(1, int.MaxValue)]\npublic int Period { get; set; }\n```\n\n## Session Detection\n\n```csharp\nif (Bars.IsFirstBarOfSession)\n{\n    // Reset session values\n}\n```\n\n## Series Objects\n\n```csharp\nprivate Series<double> myValues;\n\n// In State.DataLoaded:\nmyValues = new Series<double>(this);\n```\n\n## Drawing Objects\n\n```csharp\nDraw.Rectangle(this, \"tag\", startBar, startPrice, endBar, endPrice, Brushes.Blue);\nDraw.Line(this, \"tag\", startBar, startPrice, endBar, endPrice, Brushes.Red);\nDraw.Text(this, \"tag\", \"Label\", 0, High[0] + TickSize, Brushes.White);\n```\n\n## Complete Example\n\nReference: `/Users/lgbarn/Personal/Indicators/Ninjatrader/PEMA.cs`\n\n```csharp\n#region Using declarations\nusing System;\nusing System.ComponentModel;\nusing System.ComponentModel.DataAnnotations;\nusing System.Windows.Media;\nusing NinjaTrader.Gui.Chart;\nusing NinjaTrader.NinjaScript.DrawingTools;\n#endregion\n\n// Author: Luther Barnum\n\nnamespace NinjaTrader.NinjaScript.Indicators.LB\n{\n    public class SimpleMALB : Indicator\n    {\n        private EMA fastEma;\n        private SMA slowSma;\n\n        protected override void OnStateChange()\n        {\n            if (State == State.SetDefaults)\n            {\n                Description = \"Simple MA Crossover Indicator\";\n                Name = \"SimpleMALB\";\n                Calculate = Calculate.OnBarClose;\n                IsOverlay = true;\n\n                // Default parameters\n                FastPeriod = 9;\n                SlowPeriod = 21;\n\n                // Add plots\n                AddPlot(Brushes.Cyan, \"FastMA\");\n                AddPlot(Brushes.Orange, \"SlowMA\");\n\n                Plots[0].Width = 2;\n                Plots[1].Width = 2;\n            }\n            else if (State == State.DataLoaded)\n            {\n                fastEma = EMA(Close, FastPeriod);\n                slowSma = SMA(Close, SlowPeriod);\n            }\n        }\n\n        protected override void OnBarUpdate()\n        {\n            if (CurrentBar < SlowPeriod)\n                return;\n\n            FastMA[0] = fastEma[0];\n            SlowMA[0] = slowSma[0];\n        }\n\n        #region Properties\n        [NinjaScriptProperty]\n        [Range(1, int.MaxValue)]\n        [Display(Name = \"Fast Period\", Order = 1, GroupName = \"Parameters\")]\n        public int FastPeriod { get; set; }\n\n        [NinjaScriptProperty]\n        [Range(1, int.MaxValue)]\n        [Display(Name = \"Slow Period\", Order = 2, GroupName = \"Parameters\")]\n        public int SlowPeriod { get; set; }\n\n        [Browsable(false)]\n        [XmlIgnore]\n        public Series<double> FastMA { get { return Values[0]; } }\n\n        [Browsable(false)]\n        [XmlIgnore]\n        public Series<double> SlowMA { get { return Values[1]; } }\n        #endregion\n    }\n}\n```\n\n## VWAP Calculation Pattern\n\n```csharp\nprivate double cumVolume;\nprivate double cumVwap;\nprivate double cumVwap2;\n\nprotected override void OnBarUpdate()\n{\n    if (Bars.IsFirstBarOfSession)\n    {\n        cumVolume = 0;\n        cumVwap = 0;\n        cumVwap2 = 0;\n    }\n\n    double typicalPrice = (High[0] + Low[0] + Close[0]) / 3.0;\n    cumVolume += Volume[0];\n    cumVwap += Volume[0] * typicalPrice;\n    cumVwap2 += Volume[0] * typicalPrice * typicalPrice;\n\n    if (cumVolume > 0)\n    {\n        double vwap = cumVwap / cumVolume;\n        double variance = (cumVwap2 / cumVolume) - (vwap * vwap);\n        double stdev = variance > 0 ? Math.Sqrt(variance) : 0;\n\n        VWAP[0] = vwap;\n        UpperBand[0] = vwap + stdev;\n        LowerBand[0] = vwap - stdev;\n    }\n}\n```\n\n## Error Handling Patterns\n\n### Check bar history\n```csharp\nprotected override void OnBarUpdate()\n{\n    // Ensure enough bars for calculation\n    if (CurrentBar < BarsRequiredToPlot)\n        return;\n\n    // Or use specific period\n    if (CurrentBar < Period - 1)\n        return;\n}\n```\n\n### Null/zero checks\n```csharp\n// Safe division\ndouble divisor = High[0] - Low[0];\ndouble result = divisor != 0 ? (Close[0] - Low[0]) / divisor : 0.5;\n\n// Check indicator values\nif (myIndicator[0] != 0 && !double.IsNaN(myIndicator[0]))\n{\n    // Safe to use\n}\n```\n\n### Validate parameters\n```csharp\nif (State == State.SetDefaults)\n{\n    // Use [Range] attribute for validation\n}\nelse if (State == State.Configure)\n{\n    // Additional validation\n    if (SlowPeriod <= FastPeriod)\n        SlowPeriod = FastPeriod + 1;\n}\n```\n\n### Historical data access\n```csharp\n// Safe access to previous bars\nif (CurrentBar >= barsAgo)\n{\n    double previousValue = Close[barsAgo];\n}\n```\n\n## Trading Context\n\n- Focus: /ES, /NQ futures\n- Timeframe: 5-minute\n- Key concepts: VWAP+bands, IB, Pivots\n- Location: `/Users/lgbarn/Personal/Indicators/Ninjatrader/`\n\n## Documentation Sources\n\nUse Ref MCP to search:\n- NinjaTrader 8 Help Guide\n- NinjaScript Reference"
              },
              {
                "name": "pine-patterns",
                "description": "Pine Script v5/v6 indicator scaffold and patterns. Provides structure guidance and triggers doc-researcher for current syntax verification. Use when developing TradingView indicators.",
                "path": "plugins/trading-indicators/skills/pine-patterns/SKILL.md",
                "frontmatter": {
                  "name": "pine-patterns",
                  "description": "Pine Script v5/v6 indicator scaffold and patterns. Provides structure guidance and triggers doc-researcher for current syntax verification. Use when developing TradingView indicators."
                },
                "content": "# Pine Script Patterns\n\nLightweight scaffold for Pine Script v5/v6 indicator development.\n\n## Before Generating Code\n\nALWAYS use doc-researcher agent or Ref MCP tools to verify:\n- Current function signatures\n- v5 vs v6 syntax differences\n- Deprecated functions\n\n## File Conventions\n\n- Version header: `//@version=6` (prefer v6)\n- License: Mozilla Public License 2.0\n- File naming: `LB_*.pine`\n- Author: Luther Barnum\n\n## Input Group Structure\n\nStandard groups (use `group=` parameter):\n```\n\"Feature Toggles\"     - Master enable/disable switches\n\"VWAP Settings\"       - VWAP configuration\n\"VWAP Bands\"          - Standard deviation band settings\n\"Session Settings\"    - Time-based parameters\n\"Initial Balance\"     - IB configuration\n\"Opening Range\"       - OR settings\n\"Pivot Points\"        - Pivot configuration\n\"Display Options\"     - Visual settings\n\"Colors\"              - Color configuration\n```\n\n## Session Defaults\n\n- RTH: 9:30 AM - 4:00 PM ET\n- Timezone: America/New_York\n- Detection: `time(timeframe.period, sessionString)`\n\n## Resource Limits\n\nSet appropriately:\n- `max_bars_back` - Historical data access\n- `max_labels_count` - Label objects (default 500)\n- `max_lines_count` - Line objects (default 500)\n\n## Complete Example\n\nReference: `/Users/lgbarn/Personal/Indicators/Tradingview/LB_RH_MAs.pine`\n\n```pinescript\n//@version=6\n// This Pine Script® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/\n// © lgbarn\n\nindicator('LB Simple MA Crossover', shorttitle='LB_MACross', overlay=true)\n\n// === INPUTS ===\nfastLength = input.int(9, \"Fast MA Length\", minval=1, group=\"MA Settings\")\nslowLength = input.int(21, \"Slow MA Length\", minval=1, group=\"MA Settings\")\nuseLightTheme = input.bool(false, \"Light Theme\", group=\"Display\")\n\n// === CALCULATIONS ===\nfastMA = ta.ema(close, fastLength)\nslowMA = ta.sma(close, slowLength)\n\n// === COLORS ===\nfastColor = useLightTheme ? color.new(#0000FF, 0) : color.new(#00FFFF, 0)\nslowColor = useLightTheme ? color.new(#FF0000, 0) : color.new(#FF6600, 0)\n\n// === PLOTS ===\nplot(fastMA, title=\"Fast MA\", color=fastColor, linewidth=2)\nplot(slowMA, title=\"Slow MA\", color=slowColor, linewidth=2)\n```\n\n## Key Patterns\n\n### Persistent State (Session Reset)\n```pinescript\nvar float cumulativeValue = 0.0\nvar float sessionHigh = na\nvar float sessionLow = na\n\nif ta.change(time(\"D\")) != 0\n    cumulativeValue := 0.0\n    sessionHigh := high\n    sessionLow := low\n```\n\n### Session Detection\n```pinescript\n// Check if in RTH session\nisSessionTime = time(timeframe.period, \"0930-1600:23456\")\n\n// Detect new session start\nisNewSession = ta.change(time(\"D\")) != 0\n\n// Session with timezone\nisRTH = not na(time(timeframe.period, \"0930-1600\", \"America/New_York\"))\n```\n\n### Theme Colors\n```pinescript\nuseLightTheme = input.bool(false, \"Light Theme\", group=\"Display\")\nlineColor = useLightTheme ? color.new(#000000, 0) : color.lime\nfillColor = useLightTheme ? color.new(#000000, 90) : color.new(color.lime, 90)\n```\n\n### VWAP Calculation Pattern\n```pinescript\nvar float cumVolume = 0.0\nvar float cumVwap = 0.0\nvar float cumVwap2 = 0.0\n\nif isNewSession\n    cumVolume := 0.0\n    cumVwap := 0.0\n    cumVwap2 := 0.0\n\ncumVolume += volume\ncumVwap += volume * hlc3\ncumVwap2 += volume * hlc3 * hlc3\n\nvwapValue = cumVolume > 0 ? cumVwap / cumVolume : na\nvariance = cumVolume > 0 ? cumVwap2 / cumVolume - vwapValue * vwapValue : na\nstdev = variance > 0 ? math.sqrt(variance) : na\n\nupperBand = vwapValue + stdev\nlowerBand = vwapValue - stdev\n```\n\n### Moving Average Patterns\n```pinescript\n// Simple Moving Average\nsmaValue = ta.sma(close, length)\n\n// Exponential Moving Average\nemaValue = ta.ema(close, length)\n\n// Weighted Moving Average\nwmaValue = ta.wma(close, length)\n\n// Hull Moving Average\nhmaValue = ta.hma(close, length)\n```\n\n## Error Handling Patterns\n\n### Check for NA values\n```pinescript\n// Use nz() to replace NA with default\nsafeValue = nz(calculatedValue, 0.0)\n\n// Check if value is valid before use\nif not na(vwapValue)\n    plot(vwapValue, color=color.blue)\n```\n\n### Validate inputs\n```pinescript\n// Ensure slow > fast\nvalidatedSlow = math.max(slowLength, fastLength + 1)\n```\n\n### Handle division by zero\n```pinescript\ndivisor = high - low\nresult = divisor != 0 ? (close - low) / divisor : 0.5\n```\n\n### Check bar history\n```pinescript\n// Ensure enough bars for calculation\nif bar_index >= length - 1\n    // Safe to calculate\n    value = ta.sma(close, length)\n```\n\n### Runtime errors (v6)\n```pinescript\nif period < 1\n    runtime.error(\"Period must be >= 1\")\n```\n\n## Trading Context\n\n- Focus: /ES, /NQ futures\n- Timeframe: 5-minute\n- Key concepts: VWAP+1SD, TWAP, IB, Classic Pivots\n- Approach: Institutional over retail patterns\n\n## External Libraries\n\nAvailable imports:\n- `import jmosullivan/SessionVolumeProfile/12 as SVP`\n- `import jmosullivan/Session/5 as Session`\n\n## Documentation Sources\n\nUse Ref MCP to search:\n- TradingView Pine Script Reference\n- Pine Script User Manual"
              },
              {
                "name": "tradovate-patterns",
                "description": "Tradovate JavaScript indicator scaffold and patterns. Provides class structure and export guidance. Use when developing Tradovate indicators.",
                "path": "plugins/trading-indicators/skills/tradovate-patterns/SKILL.md",
                "frontmatter": {
                  "name": "tradovate-patterns",
                  "description": "Tradovate JavaScript indicator scaffold and patterns. Provides class structure and export guidance. Use when developing Tradovate indicators."
                },
                "content": "# Tradovate Patterns\n\nLightweight scaffold for Tradovate JavaScript indicator development.\n\n## File Conventions\n\n- File naming: `*LB.js` or `*ProLB.js`\n- Tags: Must include \"Luther Barnum\"\n\n## Dependencies\n\n```javascript\nconst predef = require(\"./tools/predef\");\nconst meta = require(\"./tools/meta\");\nconst { ParamType } = meta;\n```\n\n## Class Structure\n\n```javascript\nclass IndicatorName {\n    init() {\n        // One-time initialization\n        this.cumulativeValue = 0;\n    }\n\n    map(d, i, history) {\n        // d = current bar { open, high, low, close, volume, timestamp }\n        // i = bar index\n        // history = historical data access\n\n        const result = {};\n        result.plotName = calculatedValue;\n        return result;\n    }\n\n    filter() {\n        // Optional validation\n        return true;\n    }\n}\n```\n\n## Export Pattern\n\n```javascript\nmodule.exports = {\n    name: \"indicator-name\",\n    description: \"Description of indicator\",\n    calculator: IndicatorName,\n    params: {\n        period: predef.paramSpecs.period(14),\n        multiplier: {\n            type: ParamType.NUMBER,\n            def: 1.0,\n            step: 0.1,\n            min: 0.1,\n            max: 10.0\n        }\n    },\n    plots: {\n        value: { title: \"Value\" },\n        upperBand: { title: \"Upper Band\" }\n    },\n    inputType: meta.InputType.BARS,\n    tags: [\"Luther Barnum\", \"vwap\", \"trading\"],\n    schemeStyles: {\n        dark: {\n            value: predef.styles.plot({ color: \"#00FF00\" })\n        }\n    }\n};\n```\n\n## Session Types\n\nAccess via `this.props.type`:\n- `\"chart\"` - Reset per trading day\n- `\"session\"` - Reset at specific time\n- `\"rolling\"` - Reset per N-bar window\n\n## History Access\n\n```javascript\n// Previous bar\nconst prevBar = history.prior();\n\n// Specific historical bar\nconst bar = history.get(i - 5);\n\n// Direct array access\nconst data = history.data[i];\n```\n\n## Session Detection\n\n```javascript\nmap(d, i, history) {\n    const tradeDate = d.tradeDate();\n\n    if (tradeDate !== this.lastTradeDate) {\n        // New session - reset values\n        this.cumulativeValue = 0;\n        this.lastTradeDate = tradeDate;\n    }\n}\n```\n\n## Helper Functions\n\n```javascript\nfunction number(defValue, step, min, max) {\n    return { type: ParamType.NUMBER, def: defValue, step, min, max };\n}\n```\n\n## Complete Example\n\nReference: `/Users/lgbarn/Personal/Indicators/Tradovate/LRBMACD.js`\n\n```javascript\nconst predef = require(\"./tools/predef\");\nconst meta = require(\"./tools/meta\");\nconst SMA = require(\"./tools/SMA\");\n\nclass SimpleMACD {\n    init() {\n        this.fastSMA = SMA(this.props.fast);\n        this.slowSMA = SMA(this.props.slow);\n        this.signalSMA = SMA(this.props.signal);\n    }\n\n    map(d, i) {\n        const value = d.value();\n        const macd = this.fastSMA(value) - this.slowSMA(value);\n\n        let signal;\n        let histogram;\n\n        if (i >= this.props.slow - 1) {\n            signal = this.signalSMA(macd);\n            histogram = macd - signal;\n        }\n\n        return { macd, signal, histogram, zero: 0 };\n    }\n\n    filter(d) {\n        return predef.filters.isNumber(d.histogram);\n    }\n}\n\nmodule.exports = {\n    name: \"simple-macd-lb\",\n    description: \"Simple MACD Indicator\",\n    calculator: SimpleMACD,\n    params: {\n        fast: predef.paramSpecs.period(3),\n        slow: predef.paramSpecs.period(10),\n        signal: predef.paramSpecs.period(16)\n    },\n    validate(obj) {\n        if (obj.slow < obj.fast) {\n            return meta.error(\"slow\", \"Slow must be >= fast\");\n        }\n    },\n    inputType: meta.InputType.BARS,\n    plots: {\n        macd: { title: \"MACD\" },\n        signal: { title: \"Signal\" },\n        histogram: { title: \"Histogram\" },\n        zero: { displayOnly: true }\n    },\n    tags: [\"Luther Barnum\", predef.tags.Oscillators],\n    schemeStyles: {\n        dark: {\n            macd: predef.styles.plot(\"#FFA500\"),\n            signal: predef.styles.plot(\"#0000FF\"),\n            histogram: predef.styles.plot(\"#FF3300\"),\n            zero: predef.styles.plot({ color: \"#B5BAC2\", lineStyle: 3 })\n        }\n    }\n};\n```\n\n## VWAP Calculation Pattern\n\n```javascript\nclass SessionVWAP {\n    init() {\n        this.cumVolume = 0;\n        this.cumVwap = 0;\n        this.cumVwap2 = 0;\n        this.lastTradeDate = null;\n    }\n\n    map(d, i, history) {\n        const currentDate = d.tradeDate();\n\n        // Reset on new session\n        if (currentDate !== this.lastTradeDate) {\n            this.cumVolume = 0;\n            this.cumVwap = 0;\n            this.cumVwap2 = 0;\n            this.lastTradeDate = currentDate;\n        }\n\n        const typicalPrice = (d.high() + d.low() + d.close()) / 3;\n        const volume = d.volume();\n\n        this.cumVolume += volume;\n        this.cumVwap += volume * typicalPrice;\n        this.cumVwap2 += volume * typicalPrice * typicalPrice;\n\n        if (this.cumVolume === 0) {\n            return { vwap: undefined, upper: undefined, lower: undefined };\n        }\n\n        const vwap = this.cumVwap / this.cumVolume;\n        const variance = (this.cumVwap2 / this.cumVolume) - (vwap * vwap);\n        const stdev = variance > 0 ? Math.sqrt(variance) : 0;\n\n        return {\n            vwap,\n            upper: vwap + stdev,\n            lower: vwap - stdev\n        };\n    }\n}\n```\n\n## Error Handling Patterns\n\n### Validation function\n```javascript\nvalidate(obj) {\n    if (obj.period < 1) {\n        return meta.error(\"period\", \"Period must be >= 1\");\n    }\n    if (obj.slow <= obj.fast) {\n        return meta.error(\"slow\", \"Slow must be greater than fast\");\n    }\n}\n```\n\n### Check history in map()\n```javascript\nmap(d, i, history) {\n    // Not enough history\n    if (i < this.props.period - 1) {\n        return { value: undefined };\n    }\n\n    // Check previous bar exists\n    const prev = history.prior();\n    if (!prev) {\n        return { value: undefined };\n    }\n}\n```\n\n### Safe division\n```javascript\nconst divisor = d.high() - d.low();\nconst result = divisor === 0 ? 0 : (d.close() - d.low()) / divisor;\n```\n\n### Filter invalid data\n```javascript\nfilter(d) {\n    return predef.filters.isNumber(d.value);\n}\n\n// Or multiple checks\nfilter(d) {\n    return predef.filters.isNumber(d.value) &&\n           predef.filters.isNumber(d.signal);\n}\n```\n\n### Undefined checks\n```javascript\nmap(d, i, history) {\n    const prev = history.prior();\n    const prevClose = prev ? prev.close() : d.close();\n}\n```\n\n## Trading Context\n\n- Focus: /ES, /NQ futures\n- Timeframe: 5-minute\n- Key concepts: VWAP, Session detection, Cumulative calculations\n- Location: `/Users/lgbarn/Personal/Indicators/Tradovate/`\n\n## Documentation Sources\n\nUse WebSearch to find Tradovate indicator documentation:\n- Tradovate Community Forum (community.tradovate.com)\n- Tradovate Indicator API examples"
              }
            ]
          }
        ]
      }
    }
  ]
}