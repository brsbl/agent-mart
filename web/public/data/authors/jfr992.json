{
  "author": {
    "id": "jfr992",
    "display_name": "Juan Reyes Marles",
    "avatar_url": "https://avatars.githubusercontent.com/u/68261131?v=4"
  },
  "marketplaces": [
    {
      "name": "jfr992",
      "version": "1.3.0",
      "description": "Terragrunt infrastructure-as-code patterns with OpenTofu/Terraform - stacks, units, catalog patterns, CI/CD pipelines",
      "repo_full_name": "jfr992/terragrunt-skill",
      "repo_url": "https://github.com/jfr992/terragrunt-skill",
      "repo_description": null,
      "signals": {
        "stars": 14,
        "forks": 0,
        "pushed_at": "2026-01-22T12:57:24Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"jfr992\",\n  \"owner\": {\n    \"name\": \"jfr992\"\n  },\n  \"version\": \"1.3.0\",\n  \"metadata\": {\n    \"description\": \"Terragrunt infrastructure-as-code patterns with OpenTofu/Terraform - stacks, units, catalog patterns, CI/CD pipelines\",\n    \"repository\": \"https://github.com/jfr992/terragrunt-skill\",\n    \"license\": \"Apache-2.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"terragrunt-skill\",\n      \"description\": \"Use when working with Terragrunt - creating stacks, units, catalog patterns, setting up CI/CD pipelines (GitLab CI, GitHub Actions), configuring AWS/GCP OIDC authentication, optimizing performance with provider caching, or managing multi-account deployments\",\n      \"source\": \"./\",\n      \"category\": \"development\",\n      \"keywords\": [\n        \"terragrunt\",\n        \"opentofu\",\n        \"terraform\",\n        \"infrastructure-as-code\",\n        \"stacks\",\n        \"units\",\n        \"aws\",\n        \"gcp\",\n        \"ci-cd\"\n      ],\n      \"version\": \"1.3.0\"\n    }\n  ]\n}\n",
        "README.md": "# Terragrunt Skill for Claude Code\n\nA Claude Code skill providing best practices guidance for Terragrunt infrastructure-as-code with OpenTofu/Terraform.\n\n## Architecture\n\n> **Important:** Catalog and Live repositories should be **separate Git repositories**. The live repo consumes units and stacks from the catalog via Git URLs.\n\n### Option A: Modules in Separate Repos\n\n```\n┌─────────────────────────────────────────────────────────────────────┐\n│                        SEPARATE REPOSITORIES                         │\n├─────────────────────────┬─────────────────────────┬─────────────────┤\n│   Module Repos          │   Catalog Repo          │   Live Repo     │\n│   (terraform-aws-*)     │   (infrastructure-      │   (infrastructure-\n│                         │    <org>-catalog)       │    <org>-live)  │\n├─────────────────────────┼─────────────────────────┼─────────────────┤\n│ • OpenTofu modules      │ • units/ (wrappers)     │ • root.hcl      │\n│ • Semantic versioning   │ • stacks/ (templates)   │ • account.hcl   │\n│ • Terratest             │ • References modules    │ • Deployments   │\n│ • Pre-commit hooks      │   via Git URLs          │ • Consumes      │\n│                         │                         │   catalog       │\n└─────────────────────────┴─────────────────────────┴─────────────────┘\n         ▲                         ▲                        │\n         │                         │                        │\n         └─────────────────────────┴────────────────────────┘\n                    Live repo references both via Git URLs\n```\n\n### Option B: Modules in Catalog\n\n```\n┌───────────────────────────────────────────────────────────────┐\n│                    SEPARATE REPOSITORIES                       │\n├─────────────────────────────────┬─────────────────────────────┤\n│   Catalog Repo                  │   Live Repo                 │\n│   (infrastructure-<org>-catalog)│   (infrastructure-<org>-live)\n├─────────────────────────────────┼─────────────────────────────┤\n│ • modules/ (OpenTofu modules)   │ • root.hcl                  │\n│ • units/ (module wrappers)      │ • account.hcl               │\n│ • stacks/ (unit compositions)   │ • Deployments               │\n│ • Discovered via `tg catalog`   │ • Consumes catalog via Git  │\n│ • Single versioning strategy    │ • `tg scaffold` for new     │\n└─────────────────────────────────┴─────────────────────────────┘\n                ▲                              │\n                └──────────────────────────────┘\n                  Live repo references catalog\n```\n\n**Trade-offs:**\n\n| Aspect | Option A (Separate Module Repos) | Option B (Modules in Catalog) |\n|--------|----------------------------------|-------------------------------|\n| Versioning | Independent per module | Single catalog version |\n| CI/CD | Dedicated pipeline per module | One pipeline for all |\n| Complexity | More repos to manage | Simpler structure |\n| Team ownership | Clear boundaries | Shared ownership |\n| `terragrunt catalog` | Discovers units/stacks | Discovers modules too |\n\n## Features\n\n### Catalog & Live Pattern\n- **Infrastructure Catalog**: Reusable units and template stacks (separate repo)\n- **Infrastructure Live**: Environment-specific deployments consuming the catalog\n- **Module Repos**: Separate repositories with semantic versioning\n\n### Unit & Stack Patterns\n- Values pattern for configuration injection\n- Reference resolution (`\"../unit\"` → dependency outputs)\n- Unit interdependencies with mock outputs\n- Conditional dependencies with `enabled` and `skip_outputs`\n\n### CI/CD Pipelines\n- GitLab CI with reusable templates\n- GitHub Actions workflows\n- AWS OIDC authentication (`assume-role-with-web-identity`)\n- GCP Workload Identity Federation\n- SSH-based Git access (recommended over HTTPS)\n\n### Performance Optimization\n- Provider caching (`--provider-cache`)\n- Two-layer caching architecture (local + network mirror)\n- Benchmarking tools (Hyperfine, boring-registry)\n- Explicit stacks for 2x faster runs\n\n### Multi-Account Deployments\n- Cross-account role assumption\n- Environment-based state bucket separation\n- Hierarchical configuration (root.hcl → account.hcl → region.hcl → env.hcl)\n\n## Installation\n\nThis skill is distributed via Claude Code marketplace using `.claude-plugin/marketplace.json`.\n\n### Claude Code (Recommended)\n\n```bash\n/plugin marketplace add jfr992/terragrunt-skill\n/plugin install terragrunt-skill@jfr992\n```\n\n### Manual Installation\n\n```bash\n# Clone to Claude skills directory\ngit clone https://github.com/jfr992/terragrunt-skill.git ~/.claude/skills/terragrunt-skill\n```\n\n### Verify Installation\n\nAfter installation, try:\n```\n\"Create a Terragrunt stack for a serverless API with Lambda, DynamoDB, and S3\"\n```\n\nClaude will automatically use the skill when working with Terragrunt code.\n\n## Quick Start\n\n### 1. Create a Catalog Repository\n\n```bash\n# Ask Claude to scaffold a new catalog\n\"Create a new infrastructure catalog with units for S3, DynamoDB, and Lambda\"\n```\n\nThis generates:\n```\ninfrastructure-catalog/\n├── units/\n│   ├── s3/terragrunt.hcl           # Wraps terraform-aws-s3 module\n│   ├── dynamodb/terragrunt.hcl     # Wraps terraform-aws-dynamodb module\n│   └── lambda/terragrunt.hcl       # Wraps terraform-aws-lambda module\n└── stacks/\n    └── serverless-api/terragrunt.stack.hcl  # Combines units\n```\n\n### 2. Create a Live Repository\n\n```bash\n# Ask Claude to scaffold a live repo\n\"Create a live infrastructure repo for AWS with staging environment\"\n```\n\nThis generates:\n```\ninfrastructure-live/\n├── root.hcl                        # Provider, backend, catalog config\n├── non-prod/\n│   ├── account.hcl                 # AWS account config\n│   └── us-east-1/\n│       ├── region.hcl\n│       └── staging/\n│           ├── env.hcl             # Environment config\n│           └── my-api/\n│               └── terragrunt.stack.hcl  # Deployment (references catalog)\n```\n\n### 3. Deploy\n\n```bash\ncd infrastructure-live/non-prod/us-east-1/staging/my-api\n\n# Plan the stack\nterragrunt stack run plan\n\n# Apply the stack\nterragrunt stack run apply\n\n# Target specific unit using filters (recommended)\nterragrunt stack run apply --filter '.terragrunt-stack/dynamodb'\n\n# Target unit and its dependencies\nterragrunt stack run apply --filter '.terragrunt-stack/lambda...'\n```\n\nSee [Terragrunt Filters](https://terragrunt.gruntwork.io/docs/features/filter/) for advanced filtering options.\n\n## Usage\n\nThe skill activates when working with:\n- `terragrunt.hcl` files (units)\n- `terragrunt.stack.hcl` files (stacks)\n- `root.hcl` configuration\n- Terragrunt CLI commands\n\n### Example Prompts\n- \"Create a new EKS stack with Karpenter and ArgoCD registration\"\n- \"Set up a serverless API with Lambda, DynamoDB, and S3\"\n- \"Add GitLab CI pipeline with GCP Workload Identity\"\n- \"Optimize Terragrunt performance with provider caching\"\n\n## Test Output (Examples)\n\nThe `test-output/` directory contains example files generated using this skill, demonstrating the recommended patterns:\n\n```\ntest-output/\n├── catalog/                    # Example catalog repo structure\n│   ├── units/\n│   │   ├── s3/terragrunt.hcl\n│   │   ├── dynamodb/terragrunt.hcl\n│   │   └── lambda/terragrunt.hcl\n│   └── stacks/\n│       ├── serverless-api/terragrunt.stack.hcl\n│       └── eks-cluster/terragrunt.stack.hcl\n└── live/                       # Example live repo structure\n    ├── root.hcl\n    └── non-prod/\n        ├── account.hcl\n        └── us-east-1/\n            ├── region.hcl\n            └── staging/\n                ├── env.hcl\n                └── my-api/terragrunt.stack.hcl\n```\n\n> **Note:** In production, `catalog/` and `live/` would be **separate Git repositories**. They are combined here for demonstration purposes only.\n\n## Documentation Structure\n\n| File | Description |\n|------|-------------|\n| `SKILL.md` | Core skill documentation |\n| `test-output/` | Example output generated by this skill |\n| `references/cicd-pipelines.md` | GitLab CI & GitHub Actions templates |\n| `references/patterns.md` | Repository separation, pre-commit, semantic-release |\n| `references/performance.md` | Caching, benchmarking, optimization |\n| `references/state-management.md` | S3/DynamoDB backend patterns |\n| `references/multi-account.md` | Cross-account deployment patterns |\n\n## Compatibility\n\n- Terragrunt 0.68+\n- OpenTofu 1.6+ / Terraform 1.5+\n- AWS, GCP (authentication patterns)\n\n## Contributing\n\nSee [CLAUDE.md](CLAUDE.md) for contributor guidelines and repository architecture.\n\n## State Backend Bootstrap\n\nTerragrunt can automatically create state backend resources (S3 bucket + DynamoDB table) when you run any command:\n\n```hcl\n# root.hcl\nremote_state {\n  backend = \"s3\"\n  config = {\n    bucket         = \"tfstate-${local.account_name}-${local.aws_region}\"\n    key            = \"${path_relative_to_include()}/terraform.tfstate\"\n    region         = local.aws_region\n    encrypt        = true\n    dynamodb_table = \"tfstate-locks-${local.account_name}-${local.aws_region}\"\n  }\n  generate = {\n    path      = \"backend.tf\"\n    if_exists = \"overwrite_terragrunt\"\n  }\n}\n```\n\nTerragrunt automatically provisions the S3 bucket (with versioning, encryption, access logging) and DynamoDB table (with encryption) if they don't exist.\n\nSee [State Backend](https://terragrunt.gruntwork.io/docs/features/state-backend/) for details.\n\n> **Note:** The `scripts/setup-state-backend.sh` in this repo provides an alternative manual approach with more control over bucket configuration.\n\n## Platform Engineering & Self-Service\n\n### Catalog Discovery\n\nThe `terragrunt catalog` command enables self-service infrastructure by letting teams browse and scaffold from your catalog:\n\n```bash\n# Browse available modules, units, and stacks\nterragrunt catalog\n\n# Scaffold a specific unit\nterragrunt scaffold git@github.com:YOUR_ORG/infrastructure-catalog.git//units/rds\n```\n\n### Boilerplate Templates\n\n[Boilerplate](https://github.com/gruntwork-io/boilerplate) powers the scaffolding with interactive prompts:\n\n```yaml\n# units/rds/boilerplate.yml\nvariables:\n  - name: instance_class\n    description: \"RDS instance class\"\n    type: string\n    default: \"db.t3.medium\"\n\n  - name: engine_version\n    description: \"Database engine version\"\n    type: string\n    default: \"15.4\"\n```\n\nWhen users run `terragrunt scaffold`, they're prompted for these values, generating a pre-configured `terragrunt.hcl`.\n\n### Self-Service Portal Integration\n\nThe scaffold command can be integrated with internal developer platforms:\n\n```bash\n# API endpoint calls scaffold with predefined values\nterragrunt scaffold \\\n  git@github.com:YOUR_ORG/infrastructure-catalog.git//units/rds \\\n  --var instance_class=db.r5.large \\\n  --var engine_version=15.4 \\\n  --output-folder /deployments/team-a/rds\n```\n\nThis enables:\n- **Standardized deployments** across teams\n- **Governance** via catalog-level policies\n- **Reduced toil** through automated configuration\n- **Version control** with automatic Git tag resolution\n\n## References\n\n- [Terragrunt Documentation](https://terragrunt.gruntwork.io/docs/)\n- [Terragrunt Stacks](https://terragrunt.gruntwork.io/docs/features/stacks/)\n- [Terragrunt Filters](https://terragrunt.gruntwork.io/docs/features/filter/)\n- [Terragrunt State Backend](https://terragrunt.gruntwork.io/docs/features/state-backend/)\n- [Boilerplate](https://github.com/gruntwork-io/boilerplate) - Template generation tool\n- [Terragrunt Cache Benchmark](https://github.com/jfr992/terragrunt-cache-test)\n- [OpenTofu Documentation](https://opentofu.org/docs/)\n\n## License\n\nApache 2.0\n"
      },
      "plugins": [
        {
          "name": "terragrunt-skill",
          "description": "Use when working with Terragrunt - creating stacks, units, catalog patterns, setting up CI/CD pipelines (GitLab CI, GitHub Actions), configuring AWS/GCP OIDC authentication, optimizing performance with provider caching, or managing multi-account deployments",
          "source": "./",
          "category": "development",
          "keywords": [
            "terragrunt",
            "opentofu",
            "terraform",
            "infrastructure-as-code",
            "stacks",
            "units",
            "aws",
            "gcp",
            "ci-cd"
          ],
          "version": "1.3.0",
          "categories": [
            "aws",
            "ci-cd",
            "development",
            "gcp",
            "infrastructure-as-code",
            "opentofu",
            "stacks",
            "terraform",
            "terragrunt",
            "units"
          ],
          "install_commands": [
            "/plugin marketplace add jfr992/terragrunt-skill",
            "/plugin install terragrunt-skill@jfr992"
          ]
        }
      ]
    }
  ]
}