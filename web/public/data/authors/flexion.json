{
  "author": {
    "id": "flexion",
    "display_name": "Flexion Inc.",
    "avatar_url": "https://avatars.githubusercontent.com/u/2545311?v=4"
  },
  "marketplaces": [
    {
      "name": "claude-domestique",
      "version": null,
      "description": "Session persistence - persist context across conversation resets with branch-based session tracking",
      "repo_full_name": "flexion/claude-domestique",
      "repo_url": "https://github.com/flexion/claude-domestique",
      "repo_description": "Claude Code plugin for strategic session workflow management - like a cycling domestique for your development process",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-27T20:59:16Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"claude-domestique\",\n  \"owner\": {\n    \"name\": \"Flexion\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"memento\",\n      \"source\": \"./memento\",\n      \"description\": \"Session persistence - persist context across conversation resets with branch-based session tracking\",\n      \"version\": \"0.3.8\"\n    },\n    {\n      \"name\": \"mantra\",\n      \"source\": \"./mantra\",\n      \"description\": \"Context refresh - periodic re-injection of behavioral guidance to prevent context drift\",\n      \"version\": \"0.4.2\"\n    },\n    {\n      \"name\": \"onus\",\n      \"source\": \"./onus\",\n      \"description\": \"Work-item automation - fetches issues, generates commits/PRs, syncs progress\",\n      \"version\": \"0.3.5\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"domestique\",\n  \"version\": \"0.1.0\",\n  \"description\": \"Claude Domestique - Your strategic coding partner. Marketplace for memento, mantra, and onus plugins.\",\n  \"author\": {\n    \"name\": \"David Puglielli\"\n  },\n  \"repository\": \"https://github.com/flexion/claude-domestique\",\n  \"homepage\": \"https://github.com/flexion/claude-domestique\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"marketplace\", \"session\", \"context\", \"work-items\"],\n  \"marketplace\": true\n}\n",
        "README.md": "# Claude Domestique\n\n**Your strategic coding partner.**\n\nLike a cycling domestique, it carries the water, stays focused on your goals, and handles the unglamorous work you don't want to do.\n\n---\n\n## The Plugins\n\n### [memento](./memento) ‚Äî Session Persistence\n\n> \"Remember Sammy Jankis.\"\n\nLike Leonard in *Memento*, Claude can't form long-term memories. Context window fills up, conversation resets, everything vanishes. **memento** gives Claude its tattoos‚Äîsession files that persist decisions, progress, and context across resets.\n\nHelps developers embody Flexion fundamentals across conversation boundaries:\n- **Lead by example** ‚Äî Persists decisions and progress so nothing is lost to \"fixed bug\" amnesia\n- **Empower customers to adapt** ‚Äî Enables team handoffs with full context of what was done and why\n- **Design as you go** ‚Äî Captures evolving understanding as key details emerge during work\n\n### [mantra](./mantra) ‚Äî Behavioral Rules\n\n> \"I told you. You agreed. You forgot. Repeat.\"\n\nYou've written the perfect CLAUDE.md. Claude reads it. Claude agrees. By turn 47, Claude ignores half of it. **mantra** provides curated behavioral rules that are automatically loaded via Claude Code's native `.claude/rules/` mechanism‚Äîensuring consistent behavior from turn 1 to turn 100.\n\nHelps developers embody Flexion fundamentals throughout long sessions:\n- **Be skeptical and curious** ‚Äî Keeps Claude questioning assumptions and seeking evidence, not pattern-matching\n- **Never compromise on quality** ‚Äî Maintains consistent standards from turn 1 to turn 100\n- **Listen with humility** ‚Äî Enforces peer-not-subordinate stance, deferring to evidence over agreement\n\n### [onus](./onus) ‚Äî Work-Item Automation\n\n> \"The burden is mine now.\"\n\nJIRA tickets, Azure DevOps work items, commit messages, PR descriptions. The awful-but-important work that kills your flow. **onus** handles the project management bureaucracy so you can code.\n\nSupports **GitHub Issues** (default, zero-config), **JIRA**, and **Azure DevOps** work items.\n\nHelps developers embody Flexion fundamentals while staying in flow:\n- **Never compromise on quality** ‚Äî Ensures proper commit messages, ticket updates, and PR descriptions\n- **Lead by example** ‚Äî Handles PM accountability work so it actually gets done\n- **Empower customers to adapt** ‚Äî Keeps stakeholders informed via trackers without breaking developer focus\n\n---\n\n## How They Work Together\n\n```\nExternal (GitHub/JIRA/Azure DevOps)\n        ‚îÇ\n        ‚ñº fetch issue details\n    [onus]\n        ‚îÇ\n        ‚ñº populate session file\n    [memento] ‚Üê‚îÄ‚îÄ \"What's next?\" lookup\n        ‚îÇ\n        ‚ñº read session context\n    [mantra] ‚îÄ‚îÄ‚ñ∫ native rules auto-loaded\n```\n\nEach plugin works standalone but gains enhanced behavior when used together.\n\n![All three plugins working together](images/plugins-in-action.png)\n\n*Session resumption showing mantra (context refresh counter), onus (issue tracking), and memento (session file) working together. Claude reads the session file and picks up exactly where the previous conversation left off.*\n\n---\n\n## Requirements\n\n### Required\n\n| Tool | Version | Used By | Purpose |\n|------|---------|---------|---------|\n| [Claude Code](https://claude.ai/code) | 2.0.12+ | All | Plugin host (plugin system introduced in v2.0.12) |\n| [Node.js](https://nodejs.org/) | 18+ | All | Runtime for hooks and scripts |\n| [git](https://git-scm.com/) | 2.x | All | Branch detection, commits, session tracking |\n\n### Platform-Specific (onus)\n\nWhen using `/onus:fetch`, Claude will use these tools to retrieve work items:\n\n| Tool | Platform | Purpose |\n|------|----------|---------|\n| [GitHub CLI (gh)](https://cli.github.com/) | GitHub | Fetch issues, create PRs (recommended) |\n| Claude's WebFetch | JIRA, Azure DevOps | Built-in HTTP tool for API calls |\n\n> **Note**: For JIRA/Azure DevOps, Claude uses its built-in WebFetch capability. No additional tools required.\n\n### Environment Variables (for onus)\n\n| Variable | Platform | How to Get |\n|----------|----------|------------|\n| `GITHUB_TOKEN` | GitHub | [Create PAT](https://github.com/settings/tokens) with `repo` scope |\n| `JIRA_TOKEN` | JIRA | `echo -n \"email:api_token\" \\| base64` ([Get API token](https://id.atlassian.com/manage-profile/security/api-tokens)) |\n| `AZURE_DEVOPS_TOKEN` | Azure DevOps | `echo -n \":pat\" \\| base64` ([Create PAT](https://dev.azure.com/_usersSettings/tokens) with Work Items Read) |\n\n### Verification\n\n```bash\n# Check required tools\ngit --version          # git version 2.x\nnode --version         # v18.x or higher\nclaude --version       # Claude Code 2.x\n\n# Check GitHub CLI (optional, for onus with GitHub)\ngh --version           # gh version 2.x\ngh auth status         # Verify authentication\n```\n\n---\n\n## Installation\n\n### Add the Marketplace\n\n```bash\n/plugin marketplace add flexion/claude-domestique\n```\n\n### Install Plugins\n\n```bash\n# Install all three\n/plugin install memento@claude-domestique\n/plugin install mantra@claude-domestique\n/plugin install onus@claude-domestique\n\n# Or just the ones you need\n/plugin install mantra@claude-domestique\n```\n\nThat's it. No initialization required‚Äîall plugins use hook-based injection that works automatically.\n\n---\n\n## How Context Injection Works\n\nAll three plugins use Claude Code's hook system for zero-config context injection:\n\n| Hook | When | What Gets Injected |\n|------|------|-------------------|\n| **SessionStart** | New conversation | Full context: rules, session file, work item details |\n| **UserPromptSubmit** | Every prompt | Status line + periodic refresh (every 10 prompts) |\n\nThis means:\n- **mantra** injects behavioral rules automatically‚Äîno copying files to `.claude/rules/`\n- **memento** creates session files on first prompt for feature branches\n- **onus** detects issue numbers from branch names and injects work item context\n\n### Status Line\n\nEach prompt shows plugin status:\n```\nüìç Mantra: #3 ‚úì | üìÇ Memento: session.md | üìã Onus: #42\n```\n\n---\n\n## Commands\n\n| Plugin | Command | Description |\n|--------|---------|-------------|\n| memento | `/memento:start` | Start new work - creates branch and session together |\n| memento | `/memento:session` | Show current session status or create new session |\n| mantra | `/mantra:make-rule` | Create compact frontmatter rule from verbose markdown |\n| onus | `/onus:init` | Initialize project config (detects commit patterns) |\n| onus | `/onus:fetch` | Fetch issue details from tracker |\n| onus | `/onus:create` | Create new work item |\n| onus | `/onus:update` | Update work item (comment, status, fields) |\n| onus | `/onus:close` | Close a work item |\n| onus | `/onus:commit` | Create a commit with validation and format guidance |\n| onus | `/onus:pr` | Create a pull request with validation and format guidance |\n\n---\n\n## Development\n\n### Version Management\n\nBump plugin versions consistently across all config files:\n\n```bash\nnode scripts/bump-version.js <plugin> <patch|minor|major>\n\n# Examples:\nnode scripts/bump-version.js memento patch   # 0.1.10 ‚Üí 0.1.11\nnode scripts/bump-version.js mantra minor    # 0.1.5 ‚Üí 0.2.0\n```\n\nThis updates `package.json`, `plugin.json`, and `marketplace.json` atomically.\n\n### Testing\n\nEach plugin has its own test suite:\n\n```bash\ncd mantra && npm test   # Jest\ncd memento && npm test  # Node test runner\ncd onus && npm test     # Jest\n```\n\n---\n\n## Shared Conventions\n\nAll plugins agree on this mapping:\n\n```\nIssue #42 (tracker)\n    ‚Üì\nBranch: issue/feature-42/description\n    ‚Üì\nMetadata: .claude/branches/issue-feature-42-description\n    ‚Üì\nSession: .claude/sessions/issue-feature-42-description.md\n```\n\n---\n\n## Rules System\n\nmantra injects behavioral rules via hooks‚Äîno file copying required. Rules are frontmatter-only markdown files with compact YAML, injected directly into Claude's context.\n\n### What mantra Provides\n\nOn every session start, mantra injects:\n\n| Rule | Purpose |\n|------|---------|\n| `behavior.md` | AI behavior (skeptical-first, evidence-based) |\n| `context-format.md` | Context module format spec |\n| `format-guide.md` | Compact YAML conventions |\n| `test.md` | Testing conventions (TDD workflow) |\n| `git.md` | Git workflow (commits, PRs, branches) |\n| `sessions.md` | Session management conventions |\n| `work-items.md` | Work item integration |\n\nRules from sibling plugins (memento, onus) are automatically included when installed together.\n\n### Creating Custom Rules\n\nUse `/mantra:make-rule` to create your own rules:\n\n1. Write a verbose, human-readable markdown file\n2. Run `/mantra:make-rule your-guide.md`\n3. Claude converts it to token-efficient frontmatter\n4. Identify which rules are CRITICAL (used sparingly)\n5. Save to `.claude/rules/your-rule.md`\n\n### Rule File Format\n\nEach rule file is a **frontmatter-only markdown file**:\n\n```markdown\n---\n# Project conventions - Compact Reference\ncompanion: project-guide.md\n\n## Git Workflow\nbranch: WorkItemID-desc | chore/desc\ncommit: \"WorkItemID - verb desc\" (HEREDOC format)\ntest-before: ./gradlew test\n\n## Testing\npyramid: unit > integration > e2e\nrun-before-commit: unit-tests\nrun-before-PR: integration-tests\n---\n```\n\nNo markdown body‚Äîjust frontmatter containing compact YAML.\n\n### Emphasis Markers\n\nUse sparingly for critical rules:\n\n| Marker | Use When |\n|--------|----------|\n| `MANDATORY-REREAD:` | Must re-read before specific actions |\n| `## SECTION (BLOCKING REQUIREMENT)` | Entire section is non-negotiable |\n| `required-before:` | Must happen before an action |\n| `never:` | Absolute prohibitions |\n| `enforcement:` | If‚Üíthen trigger rules |\n\n### File Format\n\nRules use compact YAML optimized for Claude:\n\n| Pattern | Meaning | Example |\n|---------|---------|---------|\n| `‚Üí` | Flow/sequence | `implement ‚Üí test ‚Üí commit` |\n| `>` | Priority | `unit > integration > e2e` |\n| `\\|` | Alternatives | `issue/feature-N/desc \\| chore/desc` |\n| `:` | Key-value | `language: typescript` |\n\nKeep files compact: 10-30 lines, no prose, one fact per line.\n\n---\n\n## License\n\nMIT\n",
        "memento/README.md": "# memento\n\n> \"Remember Sammy Jankis.\"\n\nLike Leonard in *Memento*, Claude can't form long-term memories. memento gives Claude its tattoos‚Äîsession files that persist decisions, progress, and context across conversation resets.\n\n### Flexion Fundamentals\n\nmemento helps developers embody Flexion fundamentals across conversation boundaries:\n\n- **Design as you go** ‚Äî Session files are **living design documents** that evolve from requirements through implementation\n- **Lead by example** ‚Äî Persists decisions and design rationale so nothing is lost to \"fixed bug\" amnesia\n- **Empower customers to adapt** ‚Äî Enables team handoffs with full design context and history\n\n## The Problem\n\nIn Christopher Nolan's *Memento* (2000), Leonard Shelby suffers from anterograde amnesia‚Äîhe can't form new memories. Every few minutes, his slate wipes clean. To function, he tattoos critical facts on his body and leaves himself Polaroids and notes.\n\nClaude has the same problem. Context window fills up, conversation resets, and everything learned‚Äîdecisions made, approaches tried, dead ends discovered‚Äîvanishes.\n\n## The Solution\n\nmemento is Leonard's system for Claude: persistent session files that survive the reset, letting Claude wake up, read its own notes, and pick up exactly where it left off.\n\n## Key Concepts\n\n- **1 Session = 1 Issue = 1 Branch** - Clean mapping between work units\n- **Atomic commits** - Session file versions WITH the code it describes\n- **Progress checkpointing** - Update throughout work, not just at the end\n\n## Features\n\n- **Branch metadata files** - Compact lookup to find session from current branch\n- **Session templates** - Standardized structure for feature vs chore sessions\n- **Automatic context restoration** - Branch ‚Üí session ‚Üí next steps lookup\n- **Branch switch detection** - Detects when you switch branches mid-conversation and guides session handling\n- **Start work command** - Interactive `/memento:start` to create branch + session together\n- **Session population triggers** - Automatic reminders when todos change, plans approved, or context filling up\n- **Misnamed file handling** - Detects sessions that reference wrong branch and offers rename\n- **Session log** - Chronological record of what was done, when, and why\n- **Key decisions documentation** - Captures WHY, not just WHAT\n- **Learnings capture** - What surprised you, what would you do differently\n- **Files changed tracking** - Inventory of modified files for handoff\n- **Blockers documentation** - Capture what's blocking before stepping away\n\n## Use Cases\n\n- **Survives conversation resets** - Context window fills up, start new chat, read session, continue\n- **Survives context compaction** - When Claude summarizes, session file has the real details\n- **Team handoffs** - Teammate checks out branch, reads session, has full context\n\n## Plugin Family\n\nmemento is part of a plugin family that works together:\n\n| Plugin | Purpose | Layer |\n|--------|---------|-------|\n| **[memento](../memento)** | Session persistence | Persistence |\n| **[mantra](../mantra)** | Context refresh | Injection |\n| **[onus](../onus)** | Work-item automation | Integration |\n\n### How They Work Together\n\n```\nExternal (GitHub/JIRA/Azure DevOps)\n        ‚îÇ\n        ‚ñº fetch issue details\n    [onus]\n        ‚îÇ\n        ‚ñº populate session file\n    [memento] ‚Üê‚îÄ‚îÄ \"What's next?\" lookup\n        ‚îÇ\n        ‚ñº read session context\n    [mantra] ‚îÄ‚îÄ‚ñ∫ rules injected via hooks\n```\n\n### Shared Naming Convention\n\nAll three plugins agree on this mapping:\n\n```\nIssue #42 (tracker)\n    ‚Üì\nBranch: issue/feature-42/description\n    ‚Üì\nMetadata: .claude/branches/issue-feature-42-description\n    ‚Üì\nSession: .claude/sessions/issue-feature-42-description.md\n```\n\n### Interoperability\n\n- **onus ‚Üí memento**: Onus fetches issue details and populates the session file that memento manages\n- **memento ‚Üí mantra**: Session files live alongside context files; mantra can refresh session-aware context\n- **mantra ‚Üí memento**: Mantra keeps behavioral rules fresh; memento persists the actual work state\n\nEach plugin works standalone but gains enhanced behavior when used together.\n\n## Installation\n\n```bash\n# Add the marketplace\n/plugin marketplace add flexion/claude-domestique\n\n# Install the plugin\n/plugin install memento@claude-domestique\n```\n\nThat's it. Session management works automatically‚Äîno initialization required.\n\n## How It Works\n\nmemento uses Claude Code's hook system for automatic session management:\n\n| Hook | When | What Happens |\n|------|------|--------------|\n| **SessionStart** | New conversation | Creates session file for feature branches, injects session context |\n| **UserPromptSubmit** | Every prompt | Detects branch switches, session triggers, shows status |\n\n### Automatic Session Creation\n\nWhen you start a conversation on a feature branch like `issue/feature-42/add-auth`:\n1. memento detects the branch name\n2. Creates `.claude/sessions/issue-feature-42-add-auth.md` if it doesn't exist\n3. Injects session file path into Claude's context\n4. Claude reads the session and picks up where you left off\n\n### Branch Switch Detection\n\nWhen you switch branches mid-conversation:\n1. memento detects the branch changed on next prompt\n2. Looks for existing session for the new branch\n3. If no exact match, finds possible sessions by scoring issue number and description\n4. Guides Claude to read existing session, rename mismatched file, or create new\n\n### Session Population Triggers\n\nmemento detects events that warrant session updates:\n- **Todos changed** - Reminds to update Session Log and Next Steps\n- **Plan approved** - Prompts immediate update of Approach section\n- **Context checkpoint** - Warns when context > 80% full, prompts state save\n\n## Usage\n\n### Start Working (Recommended)\n\nUse the start command to create branch and session together:\n\n```bash\n/memento:start\n```\n\nClaude will:\n1. Ask if this is an issue or chore\n2. Help find the issue number (if needed)\n3. Create the branch with correct format\n4. Create session file primed with issue details\n\n### Start Working (Manual)\n\n```bash\n# Create a branch for your work\ngit checkout -b issue/feature-42/add-auth\n\n# Start Claude Code - session is created automatically\nclaude\n```\n\n### Status Line\n\nEvery prompt shows session status:\n\n```\nüìÇ Memento: #3 ‚úì\nüìÇ Session: /path/to/.claude/sessions/issue-feature-42-add-auth.md\n```\n\n### Check Session Status\n\n```\n/memento:session\n```\n\nShows current session details:\n```\nSession: issue-feature-42-add-auth.md\nBranch: issue/feature-42/add-auth\nType: feature\nIssue: #42\nStatus: in-progress\n\nNext Steps:\n1. First pending task\n2. Second pending task\n```\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `/memento:start` | Start new work - creates branch and session together |\n| `/memento:session` | Show current session status or create new session |\n\n## Skills\n\nSkills are proactively invoked by Claude when context matches:\n\n| Skill | Triggers |\n|-------|----------|\n| `resume` | \"what's next?\", \"where was I?\", resuming work after break |\n\n## Requirements\n\n- Node.js (required by Claude CLI)\n- All tools written in JavaScript\n\n## License\n\nMIT\n",
        "mantra/README.md": "# mantra\n\n> I told you. You agreed. You forgot. Repeat.\n\nBehavioral rules plugin for Claude Code sessions.\n\nClaude is brilliant. Claude is helpful. Claude also has the memory of a goldfish in a context window. You've written the perfect CLAUDE.md. You've carefully documented your project conventions. Claude reads it. Claude agrees. Claude then proceeds to ignore half of it by turn 47.\n\n**mantra** solves this by providing curated behavioral rules that are automatically loaded via Claude Code's native `.claude/rules/` mechanism‚Äîensuring consistent behavior from turn 1 to turn 100.\n\n### Flexion Fundamentals\n\nmantra helps developers embody Flexion fundamentals throughout long sessions:\n\n- **Be skeptical and curious** ‚Äî Keeps Claude questioning assumptions and seeking evidence, not pattern-matching\n- **Never compromise on quality** ‚Äî Maintains consistent standards from turn 1 to turn 100\n- **Listen with humility** ‚Äî Enforces peer-not-subordinate stance, deferring to evidence over agreement\n\n## Features\n\n- **Zero config** - Rules injected automatically via hooks, no setup required\n- **Token efficient** - Compact YAML frontmatter (~89% token reduction vs prose)\n- **Status indicator** - Shows rules loaded and context freshness on every prompt\n- **Curated rules** - Ships with behavior, testing, git, and format conventions\n- **Periodic refresh** - Re-injects rules every 10 prompts to prevent drift\n- **Plugin family aware** - Automatically loads rules from sibling plugins (memento, onus)\n- **Easy customization** - Create your own rules with `/mantra:make-rule`\n- **On-demand details** - Companion files provide elaboration when needed\n\n## Installation\n\n```bash\n# Add the marketplace\n/plugin marketplace add flexion/claude-domestique\n\n# Install the plugin\n/plugin install mantra@claude-domestique\n```\n\nThat's it. Rules are injected automatically on every session start‚Äîno initialization required.\n\n## How It Works\n\nmantra uses Claude Code's hook system for automatic context injection:\n\n| Hook | When | What Happens |\n|------|------|--------------|\n| **SessionStart** | New conversation | Injects all rules + companion docs path |\n| **UserPromptSubmit** | Every prompt | Shows status line, refreshes context every 10 prompts |\n\n### What Gets Injected\n\nOn session start, mantra injects:\n\n| Rule | Purpose |\n|------|---------|\n| `behavior.md` | AI behavior (skeptical-first, evidence-based) |\n| `context-format.md` | Context module format spec |\n| `format-guide.md` | Compact YAML conventions |\n| `test.md` | Testing conventions (TDD workflow) |\n\nWhen sibling plugins are installed (memento, onus), their rules are also loaded:\n- `git.md` - Git workflow (from onus)\n- `sessions.md` - Session management (from memento)\n- `work-items.md` - Work item integration (from onus)\n\n### Status Line\n\nEvery prompt shows mantra status:\n\n```\nüìç Mantra: #3 ‚úì\n```\n\n**Components:**\n- **#N** - Prompt counter since session start\n- **‚úì** - Context injection successful\n\n**IDE Compatibility:**\n\n| Environment | Status Line |\n|-------------|-------------|\n| Terminal/CLI | Full support |\n| VS Code Integrated Terminal | Full support |\n| VS Code Extension (GUI panel) | Not supported |\n| JetBrains IDEs | Full support (uses CLI) |\n\nThe status line is a CLI feature. In VS Code, use Claude Code from the integrated terminal (`` Ctrl+` ``) to see the status line.\n\n### Commands\n\n| Command | Description |\n|---------|-------------|\n| `/mantra:make-rule` | Create compact frontmatter rule from verbose markdown |\n| `/mantra:assess` | Structured critical assessment (correctness, architecture, alternatives, risks) |\n| `/mantra:troubleshoot` | Evidence-based debugging (requires 3+ documented examples) |\n\n### Creating Custom Rules\n\nUse `/mantra:make-rule` to create your own rules:\n\n1. Write a verbose, human-readable markdown file (e.g., `docs/code-review.md`)\n2. Run `/mantra:make-rule docs/code-review.md`\n3. Claude converts it to token-efficient frontmatter\n4. Identify which rules are CRITICAL (used sparingly)\n5. Save compact version to `.claude/rules/code-review.md`\n\n**What happens to the source?** The original verbose file is preserved as a \"companion\" - the compact rule references it via `companion: docs/code-review.md`. Claude loads the compact rules automatically but can read the companion file on-demand for detailed examples or clarification.\n\n## Rule File Format\n\nEach rule file is a **frontmatter-only markdown file**:\n\n```markdown\n---\n# AI-managed context file - optimized for token efficiency\ncompanion: behavior.md\n\nMANDATORY-REREAD: before-implementation-proposal-response (use-thinking-block)\n\n## CRITICAL ASSESSMENT (BLOCKING REQUIREMENT)\nassess-first: correctness, architecture, alternatives, risks\nstance: skeptical-default, find-problems-not-agreement\nnever: eager-agreement, sycophantic-tone, yes-without-analysis\n\n## IMPLEMENTATION BEHAVIOR\nmode: discuss-approach-first (non-trivial), build-first (trivial)\nimplement: minimal-working, fix-actual-errors (not speculative-fixes)\n---\n```\n\nNo markdown body‚Äîjust frontmatter containing compact YAML rules.\n\n### Emphasis Markers\n\nUse sparingly for critical rules:\n\n| Marker | Use When |\n|--------|----------|\n| `MANDATORY-REREAD:` | Must re-read before specific actions |\n| `## SECTION (BLOCKING REQUIREMENT)` | Entire section is non-negotiable |\n| `required-before:` | Must happen before an action |\n| `never:` | Absolute prohibitions |\n| `enforcement:` | If‚Üíthen trigger rules |\n\n## Default Behavior Overrides\n\nMantra isn't just about remembering project conventions. It's about **overriding Claude's default tendencies** that make it less useful as a coding partner.\n\n### Anti-Sycophancy\n\n| Default Claude | Mantra Override |\n|----------------|-----------------|\n| Eager agreement (\"Great idea!\") | Skeptical assessment first |\n| Yes without analysis | Assess correctness, architecture, risks before agreeing |\n| Subordinate tone | Peer-not-subordinate stance |\n| Validate user's approach | Find problems, challenge assumptions |\n\n### Evidence-Based Troubleshooting\n\n| Default Claude | Mantra Override |\n|----------------|-----------------|\n| Pattern-match from training data | Evidence-based only, NO guessing |\n| Jump to common solutions | Require 3+ documented examples |\n| Single-source answers | Cross-reference multiple sources |\n| Fill gaps with speculation | Research until gaps filled |\n\n### Implementation Discipline\n\n| Default Claude | Mantra Override |\n|----------------|-----------------|\n| Dive into code immediately | Discuss approach first (non-trivial) |\n| Speculative fixes | Fix actual errors only |\n| Snippets without context | Complete blocks with imports |\n| Over-engineer | Minimal working implementation |\n\n**The core insight**: Claude's default mode is helpful-subordinate. Mantra retrains it to be skeptical-peer.\n\n## Development\n\n```bash\nnpm install\nnpm test    # Run Jest tests (28 specs)\n```\n\n## Why \"mantra\"?\n\nA mantra is a phrase repeated to focus the mind. Claude's mind wanders. This brings it back.\n\n## Plugin Family\n\nmantra is part of a plugin family that works together:\n\n| Plugin | Purpose | Layer |\n|--------|---------|-------|\n| **[memento](../memento)** | Session persistence | Persistence |\n| **[mantra](../mantra)** | Behavioral rules | Rules |\n| **[onus](../onus)** | Work-item automation | Integration |\n\n### How They Work Together\n\n```\nExternal (GitHub/JIRA/Azure DevOps)\n        ‚îÇ\n        ‚ñº fetch issue details\n    [onus]\n        ‚îÇ\n        ‚ñº populate session file\n    [memento] ‚Üê‚îÄ‚îÄ \"What's next?\" lookup\n        ‚îÇ\n        ‚ñº read session context\n    [mantra] ‚îÄ‚îÄ‚ñ∫ rules injected via hooks\n```\n\nEach plugin works standalone but gains enhanced behavior when used together.\n\n## License\n\nMIT\n",
        "onus/README.md": "# onus\n\n> \"The burden is mine now.\"\n\nThe awful-but-important work that developers hate: JIRA tickets, Azure DevOps work items, commit messages, PR descriptions. Someone has to carry this load. Now Claude does.\n\n### Flexion Fundamentals\n\nonus helps developers embody Flexion fundamentals while staying in flow:\n\n- **Never compromise on quality** ‚Äî Ensures proper commit messages, ticket updates, and PR descriptions\n- **Lead by example** ‚Äî Handles PM accountability work so it actually gets done\n- **Empower customers to adapt** ‚Äî Keeps stakeholders informed via trackers without breaking developer focus\n\n## The Problem\n\nYou're in flow. You've just solved an elegant problem. Now you need to:\n\n1. Update the JIRA ticket with what you did\n2. Write a commit message that references the ticket\n3. Create a PR description that satisfies the template\n4. Link it all together so PMs can track progress\n\nYou groan. The context switch kills your momentum. You write \"fixed bug\" and move on. The PM asks for details. Rinse, repeat.\n\n## The Solution\n\nonus handles the project management bureaucracy:\n\n- **Fetches work items** from GitHub Issues, JIRA, Azure DevOps\n- **Auto-populates sessions** with issue details (integrates with [memento](../memento))\n- **Generates commit messages** that reference tickets properly\n- **Creates PR descriptions** from your session and work item\n- **Updates work items** with progress (bidirectional sync)\n\nYou code. Claude carries the burden.\n\n## Features\n\n- **Multi-platform support** - GitHub Issues, JIRA, Azure DevOps\n- **Issue-to-session bridge** - Fetches requirements, acceptance criteria, links\n- **Commit message formatting** - `#123 - verb description` with proper linking\n- **PR description generation** - Pulls from session log, maps to acceptance criteria\n- **Work item updates** - Push status, comments, links back to the tracker\n- **Branch naming** - Suggests `issue/feature-N/description` from work item\n\n## Plugin Family\n\nonus is part of a plugin family that works together:\n\n| Plugin | Purpose | Layer |\n|--------|---------|-------|\n| **[memento](../memento)** | Session persistence | Persistence |\n| **[mantra](../mantra)** | Context refresh | Injection |\n| **[onus](../onus)** | Work-item automation | Integration |\n\n### How They Work Together\n\n```\nExternal (GitHub/JIRA/Azure DevOps)\n        ‚îÇ\n        ‚ñº fetch issue details\n    [onus]\n        ‚îÇ\n        ‚ñº populate session file\n    [memento] ‚Üê‚îÄ‚îÄ \"What's next?\" lookup\n        ‚îÇ\n        ‚ñº read session context\n    [mantra] ‚îÄ‚îÄ‚ñ∫ rules injected via hooks\n```\n\n### Shared Naming Convention\n\nAll three plugins agree on this mapping:\n\n```\nIssue #42 (tracker)\n    ‚Üì\nBranch: issue/feature-42/description\n    ‚Üì\nMetadata: .claude/branches/issue-feature-42-description\n    ‚Üì\nSession: .claude/sessions/issue-feature-42-description.md\n```\n\n### Interoperability\n\n- **onus ‚Üí memento**: Onus fetches issue details and populates the session file that memento manages\n- **memento ‚Üí mantra**: Session files live alongside context files; mantra can refresh session-aware context\n- **mantra ‚Üí memento**: Mantra keeps behavioral rules fresh; memento persists the actual work state\n\nEach plugin works standalone but gains enhanced behavior when used together.\n\n## Companion Plugins\n\nThese external plugins complement onus workflows:\n\n| Plugin | Purpose | When to Use |\n|--------|---------|-------------|\n| **[pr-review-toolkit](https://github.com/anthropics/claude-code/tree/main/plugins/pr-review-toolkit)** | Code quality review | Before creating PRs |\n\n### pr-review-toolkit\n\nOfficial Anthropic plugin with 6 specialized review agents (comment accuracy, test coverage, error handling, type design, code review, simplification). Install it for thorough code review before PR creation:\n\n```bash\n/plugins\n# Search for \"pr-review-toolkit\" and install\n```\n\nWhen onus generates a PR, consider running a review first:\n```\n# Review before PR\n/pr-review-toolkit:review-pr\n\n# Then create PR with onus\n```\n\n## Installation\n\n```bash\n# Add the marketplace\n/plugin marketplace add flexion/claude-domestique\n\n# Install the plugin\n/plugin install onus@claude-domestique\n```\n\nThat's it. Work item detection works automatically‚Äîno initialization required.\n\n## Configuration\n\nonus works zero-config by default (GitHub Issues). Use `/onus:init` to create configuration:\n\n```bash\n/onus:init                    # Auto-detect from git remote\n/onus:init --platform jira    # Use JIRA\n/onus:init --force            # Overwrite existing config\n```\n\nThe init command:\n1. Analyzes recent commits to detect existing patterns\n2. Creates `.claude/config.json` with detected or default formats\n3. Auto-detects GitHub owner/repo from git remote\n\n### Generated Config\n\n```json\n{\n  \"onus\": {\n    \"platform\": \"github\",\n    \"github\": {\n      \"owner\": \"your-org\",\n      \"repo\": \"your-repo\"\n    },\n    \"commitFormat\": {\n      \"issue\": \"{number} - {verb} {description}\",\n      \"chore\": \"chore - {description}\"\n    },\n    \"branchFormat\": {\n      \"issue\": \"issue/{type}-{number}/{slug}\",\n      \"chore\": \"chore/{slug}\"\n    }\n  }\n}\n```\n\n### Supported Platforms\n\n| Platform | Config Key | Required Fields |\n|----------|------------|-----------------|\n| GitHub Issues | `github` | `owner`, `repo` (auto-detected from git remote) |\n| JIRA | `jira` | `host`, `project` |\n| Azure DevOps | `azure` | `org`, `project` |\n\n### Programmatic Configuration\n\nFor scripts or automation, use the init module:\n\n```javascript\nconst { init, detectGitRemote, buildDefaultConfig } = require('@claude-domestique/onus');\n\n// Auto-detect from git remote (defaults to GitHub Issues)\ninit(projectPath);\n\n// Explicit platform\ninit(projectPath, {\n  platform: 'jira',\n  overrides: { jiraHost: 'company.atlassian.net', jiraProject: 'PROJ' }\n});\n\n// Force overwrite existing config\ninit(projectPath, { platform: 'azure', force: true });\n```\n\n## How It Works\n\nonus uses Claude Code's hook system for automatic work item detection:\n\n| Hook | When | What Happens |\n|------|------|--------------|\n| **SessionStart** | New conversation | Detects issue number from branch, injects work item context |\n| **UserPromptSubmit** | Every prompt | Shows issue number in status line |\n\n### Automatic Issue Detection\n\nWhen you're on a branch like `issue/feature-42/add-auth`:\n1. onus extracts issue number `42` from the branch name\n2. Shows `üìã Issue: 42` in status line\n3. Use `/onus:fetch 42` to load full issue details\n\n### Status Line\n\nEvery prompt shows issue status:\n\n```\nüìã Onus: #3 ‚úì\nüìã Issue: 42\n```\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `/onus:init` | Initialize project config (detects commit patterns) |\n| `/onus:fetch` | Fetch issue details from tracker |\n| `/onus:create` | Create new work item |\n| `/onus:update` | Update work item (comment, status, fields) |\n| `/onus:close` | Close a work item |\n| `/onus:commit` | Create a commit with validation and format guidance |\n| `/onus:pr` | Create a pull request with validation and format guidance |\n| `/onus:status` | Show work item dashboard (issue, session, git state) |\n| `/onus:validate-criteria` | Check acceptance criteria completion before commit/PR |\n\n## Why \"onus\"?\n\n*Onus* (Latin): a burden, duty, or responsibility.\n\n\"The onus is on you to update the ticket.\"\n\"The onus of keeping JIRA in sync falls on someone.\"\n\nIt's the weight you carry. Now Claude carries it for you.\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "memento",
          "source": "./memento",
          "description": "Session persistence - persist context across conversation resets with branch-based session tracking",
          "version": "0.3.8",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add flexion/claude-domestique",
            "/plugin install memento@claude-domestique"
          ]
        },
        {
          "name": "mantra",
          "source": "./mantra",
          "description": "Context refresh - periodic re-injection of behavioral guidance to prevent context drift",
          "version": "0.4.2",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add flexion/claude-domestique",
            "/plugin install mantra@claude-domestique"
          ]
        },
        {
          "name": "onus",
          "source": "./onus",
          "description": "Work-item automation - fetches issues, generates commits/PRs, syncs progress",
          "version": "0.3.5",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add flexion/claude-domestique",
            "/plugin install onus@claude-domestique"
          ]
        }
      ]
    }
  ]
}