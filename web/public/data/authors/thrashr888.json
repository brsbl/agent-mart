{
  "author": {
    "id": "thrashr888",
    "display_name": "Paul Thrasher",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/10213?v=4",
    "url": "https://github.com/thrashr888",
    "bio": "Building many websites.",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 38,
      "total_skills": 0,
      "total_stars": 1,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "allbeads-marketplace",
      "version": null,
      "description": "Multi-repo orchestration for AI agent workflows",
      "owner_info": {
        "name": "Paul Thrasher",
        "url": "https://github.com/thrashr888"
      },
      "keywords": [],
      "repo_full_name": "thrashr888/AllBeads",
      "repo_url": "https://github.com/thrashr888/AllBeads",
      "repo_description": "A Boss Repository Architecture for Multi-Repo AI Agent Orchestration",
      "homepage": "https://allbeads.co/",
      "signals": {
        "stars": 1,
        "forks": 0,
        "pushed_at": "2026-01-20T03:40:14Z",
        "created_at": "2026-01-09T21:17:18Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/agents/governance-agent.md",
          "type": "blob",
          "size": 2210
        },
        {
          "path": ".claude-plugin/agents/onboarding-agent.md",
          "type": "blob",
          "size": 3617
        },
        {
          "path": ".claude-plugin/agents/planning-agent.md",
          "type": "blob",
          "size": 2882
        },
        {
          "path": ".claude-plugin/agents/task-agent.md",
          "type": "blob",
          "size": 2747
        },
        {
          "path": ".claude-plugin/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/commands/agents.md",
          "type": "blob",
          "size": 960
        },
        {
          "path": ".claude-plugin/commands/blocked.md",
          "type": "blob",
          "size": 453
        },
        {
          "path": ".claude-plugin/commands/context-new.md",
          "type": "blob",
          "size": 4007
        },
        {
          "path": ".claude-plugin/commands/context.md",
          "type": "blob",
          "size": 1178
        },
        {
          "path": ".claude-plugin/commands/create.md",
          "type": "blob",
          "size": 2280
        },
        {
          "path": ".claude-plugin/commands/governance.md",
          "type": "blob",
          "size": 1081
        },
        {
          "path": ".claude-plugin/commands/handoff.md",
          "type": "blob",
          "size": 5935
        },
        {
          "path": ".claude-plugin/commands/list.md",
          "type": "blob",
          "size": 408
        },
        {
          "path": ".claude-plugin/commands/mail.md",
          "type": "blob",
          "size": 3750
        },
        {
          "path": ".claude-plugin/commands/onboard-repo.md",
          "type": "blob",
          "size": 4220
        },
        {
          "path": ".claude-plugin/commands/prime.md",
          "type": "blob",
          "size": 1247
        },
        {
          "path": ".claude-plugin/commands/project-new.md",
          "type": "blob",
          "size": 3088
        },
        {
          "path": ".claude-plugin/commands/ready.md",
          "type": "blob",
          "size": 524
        },
        {
          "path": ".claude-plugin/commands/scan.md",
          "type": "blob",
          "size": 1058
        },
        {
          "path": ".claude-plugin/commands/show.md",
          "type": "blob",
          "size": 418
        },
        {
          "path": ".claude-plugin/commands/stats.md",
          "type": "blob",
          "size": 559
        },
        {
          "path": ".claude-plugin/commands/sync.md",
          "type": "blob",
          "size": 577
        },
        {
          "path": ".claude-plugin/commands/tui.md",
          "type": "blob",
          "size": 569
        },
        {
          "path": ".claude-plugin/commands/workflow.md",
          "type": "blob",
          "size": 2117
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 473
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 776
        },
        {
          "path": ".claude-plugin/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/skills/allbeads",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/skills/allbeads/skill.md",
          "type": "blob",
          "size": 11450
        },
        {
          "path": "claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-plugin/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-plugin/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 776
        },
        {
          "path": "claude-plugin/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-plugin/agents/governance-agent.md",
          "type": "blob",
          "size": 2210
        },
        {
          "path": "claude-plugin/agents/onboarding-agent.md",
          "type": "blob",
          "size": 3617
        },
        {
          "path": "claude-plugin/agents/planning-agent.md",
          "type": "blob",
          "size": 2882
        },
        {
          "path": "claude-plugin/agents/task-agent.md",
          "type": "blob",
          "size": 2747
        },
        {
          "path": "claude-plugin/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-plugin/commands/agents.md",
          "type": "blob",
          "size": 960
        },
        {
          "path": "claude-plugin/commands/blocked.md",
          "type": "blob",
          "size": 453
        },
        {
          "path": "claude-plugin/commands/context-new.md",
          "type": "blob",
          "size": 4007
        },
        {
          "path": "claude-plugin/commands/context.md",
          "type": "blob",
          "size": 1178
        },
        {
          "path": "claude-plugin/commands/create.md",
          "type": "blob",
          "size": 2280
        },
        {
          "path": "claude-plugin/commands/governance.md",
          "type": "blob",
          "size": 1081
        },
        {
          "path": "claude-plugin/commands/handoff.md",
          "type": "blob",
          "size": 5935
        },
        {
          "path": "claude-plugin/commands/list.md",
          "type": "blob",
          "size": 408
        },
        {
          "path": "claude-plugin/commands/mail.md",
          "type": "blob",
          "size": 3750
        },
        {
          "path": "claude-plugin/commands/onboard-repo.md",
          "type": "blob",
          "size": 4220
        },
        {
          "path": "claude-plugin/commands/prime.md",
          "type": "blob",
          "size": 1247
        },
        {
          "path": "claude-plugin/commands/project-new.md",
          "type": "blob",
          "size": 3088
        },
        {
          "path": "claude-plugin/commands/ready.md",
          "type": "blob",
          "size": 524
        },
        {
          "path": "claude-plugin/commands/scan.md",
          "type": "blob",
          "size": 1058
        },
        {
          "path": "claude-plugin/commands/show.md",
          "type": "blob",
          "size": 418
        },
        {
          "path": "claude-plugin/commands/stats.md",
          "type": "blob",
          "size": 559
        },
        {
          "path": "claude-plugin/commands/sync.md",
          "type": "blob",
          "size": 577
        },
        {
          "path": "claude-plugin/commands/tui.md",
          "type": "blob",
          "size": 569
        },
        {
          "path": "claude-plugin/commands/workflow.md",
          "type": "blob",
          "size": 2117
        },
        {
          "path": "claude-plugin/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-plugin/skills/allbeads",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-plugin/skills/allbeads/skill.md",
          "type": "blob",
          "size": 11450
        }
      ],
      "files": {
        ".claude-plugin/agents/governance-agent.md": "---\ndescription: Agent that enforces governance policies across managed repositories\n---\n\n# Governance Agent\n\nScans and enforces governance policies across AllBeads-managed repositories.\n\n## Workflow\n\n1. **Scan Repositories**\n   ```bash\n   ab governance check            # Check all managed repos\n   ab governance check --repo=X   # Check specific repo\n   ```\n\n2. **Review Violations**\n   - Policy violations are reported with severity levels\n   - Advisory: Recommendations, no blocking\n   - Soft Mandatory: Should fix, can override with reason\n   - Hard Mandatory: Must fix, blocks operations\n\n3. **Create Remediation Issues**\n   For each violation:\n   ```bash\n   bd create --title=\"Policy: <violation>\" --type=task --priority=2\n   bd comments add <id> \"Violation details and remediation steps\"\n   ```\n\n4. **Track Agent Coverage**\n   ```bash\n   ab agents list                 # List agents across contexts\n   ab agents summary              # Adoption statistics\n   ab scan github <user>          # Find unmanaged repos\n   ```\n\n5. **Onboard Unmanaged Repos**\n   For repos without AllBeads:\n   ```bash\n   ab onboard <repo-url>          # Full onboarding\n   # Or just scan:\n   ab scan github <user> --all\n   ```\n\n## Governance Policies\n\n### Agent Configuration\n- All managed repos should have AI agent configs\n- CLAUDE.md required for Claude Code\n- .cursorrules for Cursor\n- Check with `ab agents detect`\n\n### Beads Tracking\n- All repos should have .beads/ initialized\n- Regular sync with remote\n- No stale in_progress issues\n\n### Security\n- No secrets in committed files\n- .env files in .gitignore\n- License file present\n\n## Reporting\n\nGenerate governance reports:\n```bash\nab governance status           # Summary across all repos\nab governance violations       # List all violations\nab governance audit            # Audit log\n```\n\n## Exemptions\n\nSome repos may be exempt:\n```bash\nab governance exempt <repo> <policy> --reason=\"...\"\nab governance unexempt <repo> <policy>\n```\n\n## Important Guidelines\n\n- Run governance checks regularly\n- Create issues for violations, don't just report them\n- Track remediation progress through beads\n- Respect exemptions with valid reasons\n- Focus on high-value policies first\n",
        ".claude-plugin/agents/onboarding-agent.md": "---\ndescription: Agent that helps onboard repositories into AllBeads\n---\n\n# Onboarding Agent\n\nHelps onboard new and existing repositories into the AllBeads ecosystem.\n\n## Workflow\n\n### For Existing Repositories\n\n1. **Identify Target**\n   ```bash\n   # Scan user's GitHub for unmanaged repos\n   ab scan github <username> --all\n\n   # Or specify a repo directly\n   ab scan repo github.com/user/repo\n   ```\n\n2. **Assess Onboarding Priority**\n   Consider:\n   - Recent activity (last push date)\n   - Stars / usage\n   - Language match with other managed repos\n   - Existing agent configurations\n\n3. **Run Onboarding**\n   ```bash\n   ab onboard <repo-url>\n   # Or for local:\n   ab onboard /path/to/repo\n   ```\n\n4. **Verify Configuration**\n   ```bash\n   ab agents detect /path/to/repo\n   ab context list | grep <repo>\n   ```\n\n### For New Repositories\n\n1. **Create with Full Setup**\n   ```bash\n   ab context new <name> \\\n     --private \\\n     --gitignore <lang> \\\n     --license MIT \\\n     --init-agents claude,cursor\n   ```\n\n2. **Verify Creation**\n   - Check GitHub for repo\n   - Verify local clone\n   - Confirm beads initialized\n   - Check agent configs created\n\n### Batch Onboarding\n\nFor multiple repos:\n```bash\n# Scan first\nab scan github <user> --all\n\n# Then use TUI picker\nab tui  # Tab to GitHub picker, select repos\n```\n\n## Onboarding Checklist\n\nFor each repo:\n- [ ] Beads initialized (.beads/ exists)\n- [ ] CLAUDE.md created with project guidance\n- [ ] Added to AllBeads contexts\n- [ ] Git hooks installed (optional)\n- [ ] Initial sync completed\n- [ ] README updated if needed\n\n## Incremental Onboarding\n\nRepos can be partially onboarded. Check status:\n```bash\nab context onboarding\n```\n\nTo complete partial onboarding:\n```bash\nab onboard <path> --skip-clone  # Already cloned\n```\n\n## Troubleshooting\n\n### Clone Failures\n```bash\n# Check SSH keys\nssh -T git@github.com\n\n# Try HTTPS instead\nab onboard https://github.com/user/repo\n```\n\n### Beads Init Failures\n```bash\n# Run manually\ncd /path/to/repo\nbd init\n```\n\n### Context Add Failures\n```bash\n# Add manually\nab context add /path/to/repo --name <name>\n```\n\n## Important Guidelines\n\n- Start with high-priority repos (active, important)\n- Verify each step before proceeding\n- Create beads for any issues discovered\n- Don't force onboarding on archived repos\n- Respect private repo visibility\n\n## Safety Checks\n\nAllBeads enforces safety checks before onboarding existing repositories:\n\n1. **Clean Working Directory**: Refuses to onboard if there are uncommitted changes (excluding `.beads/` and `.claude/` directories)\n2. **Main Branch**: Refuses to onboard if not on `main` or `master` branch\n\nThese prevent accidental commits of unrelated work during onboarding.\n\n```bash\n# If you see safety check errors:\ngit stash                    # Stash uncommitted changes\ngit checkout main            # Switch to main branch\nab onboard .                 # Now onboard\ngit stash pop                # Restore changes after\n```\n\n## Batch Onboarding Best Practices\n\nWhen onboarding multiple repos:\n\n1. **Filter for git repos with GitHub remotes** - Skip non-git folders and repos without remotes\n2. **Run onboarding in parallel** where possible\n3. **Create issues for repos that fail safety checks** - Don't skip silently\n4. **The epic depends on tasks** - Use `bd dep add <epic> <task>` so tasks are ready, epic is blocked\n\n## Dependency Direction\n\nWhen onboarding creates an epic with tasks:\n- **Correct**: Epic depends on tasks (`bd dep add epic-id task-id`)\n- **Incorrect**: Tasks depend on epic (this blocks the tasks!)\n\nThe tasks should appear as \"ready\" for agents to pick up.\n",
        ".claude-plugin/agents/planning-agent.md": "---\ndescription: Agent that plans new projects without implementing code\n---\n\n# Planning Agent\n\nPlans new projects by creating repositories and beads, but does NOT write implementation code.\n\n## Workflow\n\n1. **Gather Requirements**\n   - Discuss the project idea with the user\n   - Ask clarifying questions about:\n     - Language/framework preferences\n     - Key features needed\n     - Scope and priorities\n\n2. **Create Specification**\n   - Write a detailed spec document\n   - Include:\n     - Project overview\n     - Use cases\n     - Technical approach\n     - Data sources/APIs\n     - Implementation phases\n   - Save to `specs/<project>-spec.md` in AllBeads\n\n3. **Create Repository**\n   ```bash\n   ab context new <project-name> \\\n     --private \\\n     --description \"...\" \\\n     --gitignore <lang> \\\n     --license <license>\n   ```\n\n4. **Create README**\n   Write README.md with:\n   - Project overview\n   - Status: \"Planning Phase\"\n   - Planned features table\n   - Example usage (planned)\n\n5. **Create Phase Epics**\n   ```bash\n   bd create --title=\"[Phase 1] ...\" --type=epic --priority=1\n   bd create --title=\"[Phase 2] ...\" --type=epic --priority=2\n   # etc.\n   ```\n\n6. **Add Specs to Beads**\n   For each epic:\n   ```bash\n   bd comments add <id> \"<detailed spec>\"\n   ```\n   Include:\n   - Goals\n   - Deliverables\n   - API endpoints / interfaces\n   - Acceptance criteria\n\n7. **STOP**\n   - Do NOT create source code files\n   - Do NOT set up build infrastructure\n   - Do NOT implement any features\n\n## What Gets Created\n\n```\n<project>/\n‚îú‚îÄ‚îÄ README.md           # Project overview, planning status\n‚îú‚îÄ‚îÄ CLAUDE.md           # Agent guidance (from ab context new)\n‚îú‚îÄ‚îÄ .beads/             # Issue tracking (from bd init)\n‚îú‚îÄ‚îÄ specs/              # Copy of spec document\n‚îî‚îÄ‚îÄ (no source code!)\n```\n\n## Handoff\n\nAfter planning, implementation can begin via:\n- User manually starting: `bd update <id> --status=in_progress`\n- Handoff workflow: `/handoff` command\n- Another agent: Task Agent picks up from `bd ready`\n\n## Important Guidelines\n\n- NEVER write source code in this phase\n- Focus on clear, detailed specifications\n- Break work into logical phases\n- Each bead should be independently implementable\n- Include acceptance criteria so completion is clear\n- Copy spec to both AllBeads and the new repo\n\n## Example Session\n\n```\nUser: I want a CLI that converts markdown to PDF\n\nAgent: Let me plan this project...\n\n1. Questions:\n   - Language preference? (Go/Rust/Python)\n   - Theme support needed?\n   - Special features? (TOC, headers)\n\n2. Creating spec...\n3. Creating repo: ab context new md2pdf --private\n4. Creating README with \"Planning Phase\" status\n5. Creating epics:\n   - Phase 1: CLI structure\n   - Phase 2: Markdown parsing\n   - Phase 3: PDF generation\n   - Phase 4: Theme support\n6. Adding specs to beads\n\nDone! Ready for implementation via bd ready.\n```\n",
        ".claude-plugin/agents/task-agent.md": "---\ndescription: Autonomous agent that finds and completes ready tasks across contexts\n---\n\n# Task Agent\n\nAutonomous agent for completing work across AllBeads-managed repositories.\n\n## Workflow\n\n1. **Find Ready Work**\n   ```bash\n   ab ready                    # Get unblocked tasks across all contexts\n   ab ready -C <context>       # Filter to specific context\n   ```\n   - Prefer higher priority tasks (P0 > P1 > P2 > P3 > P4)\n   - If no ready tasks, report completion\n\n2. **Claim the Task**\n   ```bash\n   ab show <id>                # Get full task details\n   ab update <id> --status=in_progress\n   ```\n   - Report what you're working on\n   - Note the context (which repo this task is in)\n\n3. **Navigate to Context**\n   ```bash\n   ab context list             # Find the repo path\n   cd /path/to/repo            # Work in the correct context\n   ```\n\n4. **Execute the Task**\n   - Read the task description and any comments\n   - Use available tools to complete the work\n   - Follow best practices from CLAUDE.md\n   - Run tests if applicable\n\n5. **Track Discoveries**\n   If you find bugs, TODOs, or related work:\n   ```bash\n   bd create --title=\"Found: ...\" --type=bug\n   bd dep add <new-id> <current-id>   # Link as discovered-from\n   ```\n\n6. **Complete the Task**\n   ```bash\n   cargo test                  # Verify tests pass\n   cargo clippy                # Check linter\n   git add -A && git commit    # Commit changes\n   ab close <id> --reason=\"Implemented X, added tests\"\n   git push\n   ```\n\n7. **Continue**\n   ```bash\n   ab ready                    # Check for newly unblocked work\n   ```\n   Repeat the cycle.\n\n## Important Guidelines\n\n- Always update issue status when starting and finishing\n- Link discovered work with dependencies\n- Don't close issues unless work is actually complete\n- If blocked, set status to `blocked` and explain why\n- Push changes before reporting completion\n- Work in the correct repository context\n\n## Cross-Context Considerations\n\nAllBeads manages multiple repositories. When working:\n- Check which context the bead belongs to\n- Navigate to that repo before making changes\n- Use `ab` for cross-context operations\n- Use `bd` for single-repo operations\n\n## Available Commands\n\n```bash\n# AllBeads (cross-context)\nab ready              # Find ready work across contexts\nab show <id>          # Show bead details\nab update <id>        # Update bead\nab close <id>         # Close bead\nab stats              # View statistics\n\n# Beads (single repo)\nbd list               # List issues in current repo\nbd create             # Create new issue\nbd dep add            # Add dependency\nbd sync               # Sync with remote\n```\n\nYou are autonomous but should communicate your progress clearly. Start by finding ready work!\n",
        ".claude-plugin/commands/agents.md": "---\ndescription: Detect and track AI agent usage across repositories\n---\n\nDetect AI agents and track adoption metrics.\n\nSubcommands:\n- `allbeads agents detect` - Detect AI agents in current directory\n- `allbeads agents track --context <name> --path <path>` - Record scan to metrics\n- `allbeads agents stats` - View adoption statistics\n- `allbeads agents stats --days <n>` - Stats for specific time period\n- `allbeads agents stats --json` - Output as JSON\n\nDetects 14 AI agent types via config files:\n- Claude Code (CLAUDE.md, .claude/)\n- GitHub Copilot (.github/copilot-instructions.md)\n- Cursor (.cursorrules, .cursor/)\n- Aider (.aider.conf.yml)\n- Kiro (.kiro/)\n- And more...\n\nDetection confidence levels:\n- **High**: Primary config file found\n- **Medium**: Secondary indicators\n- **Low**: Indirect evidence\n\nUsage tracking stores metrics in SQLite for trend analysis:\n- Adoption rate over time\n- Agent distribution across repos\n- Scan history per repository\n",
        ".claude-plugin/commands/blocked.md": "---\ndescription: Show blocked issues across all contexts\n---\n\nShow beads that are blocked by dependencies across all AllBeads contexts.\n\nRun `allbeads blocked` to find issues that cannot proceed due to blockers.\n\nFor each blocked issue, show:\n- Bead ID and title\n- What it's blocked by\n- Context (repository)\n\nThis helps identify:\n- Cross-repo blocking relationships\n- Bottlenecks in the workflow\n- Issues that need attention to unblock downstream work\n",
        ".claude-plugin/commands/context-new.md": "---\ndescription: Create a new GitHub repository with AllBeads pre-configured\n---\n\nCreate a brand new GitHub repository and set it up with AllBeads from the start.\n\nThis command provides a streamlined workflow similar to GitHub's \"New Repository\" form but adds:\n- Automatic beads initialization\n- AI agent configuration (CLAUDE.md, .cursorrules, etc.)\n- Automatic addition to AllBeads contexts\n\nUsage:\n```bash\n# Interactive mode (recommended for first-time use)\nab context new\n\n# With arguments\nab context new myproject --private --description \"My new project\"\n\n# Non-interactive mode\nab context new myproject --non-interactive --private\n\n# Full specification\nab context new myproject \\\n  --private \\\n  --description \"Project description\" \\\n  --license MIT \\\n  --gitignore Rust \\\n  --init-agents claude,cursor\n```\n\n## Options:\n\n| Option | Description |\n|--------|-------------|\n| `--description` | Repository description |\n| `--private` | Create as private repository |\n| `--org <ORG>` | Create in an organization |\n| `--gitignore <TEMPLATE>` | .gitignore template (Rust, Node, Python, Go, etc.) |\n| `--license <LICENSE>` | License (MIT, Apache-2.0, GPL-3.0, etc.) |\n| `--init-agents <LIST>` | Comma-separated agents to configure (default: claude) |\n| `--path <PATH>` | Custom local clone path |\n| `--no-clone` | Create on GitHub only, don't clone locally |\n| `--wizard` | Use interactive TUI wizard |\n| `--non-interactive` | Use defaults without prompts |\n\n## Workflow:\n\n1. **Input Collection** - Name, visibility, description via prompts or CLI args\n2. **GitHub Creation** - Creates repository using `gh` CLI\n3. **Clone** - Clones repository to local workspace\n4. **Beads Init** - Runs `bd init` to set up issue tracking\n5. **Agent Config** - Creates CLAUDE.md and other agent files\n6. **Git Push** - Commits and pushes configuration\n7. **Context Add** - Adds to AllBeads config\n\n## Requirements:\n\n- GitHub CLI (`gh`) must be installed and authenticated\n- Run `gh auth login` if not already authenticated\n- Token needs `repo` scope for repository creation\n\n## Example Session:\n\n```bash\n$ ab context new\n\nCreate a new repository\n\n  Repository name: my-awesome-project\n  Description (optional): A new project with AllBeads\n  Private repository? [Y/n]: n\n  Organization (leave empty for personal account):\n\nCommon .gitignore templates: Rust, Node, Python, Go, Java\n  .gitignore template: Rust\n\nCommon licenses: MIT, Apache-2.0, GPL-3.0, BSD-3-Clause\n  License: MIT\n\nAllBeads Configuration\n  Initialize beads? [Y/n]: y\n\nAvailable agents: claude, cursor, copilot, aider\n  Agents to configure (comma-separated) [claude]: claude,cursor\n\nSummary\n  Name:        my-awesome-project\n  Visibility:  Public\n  .gitignore:  Rust\n  License:     MIT\n  Beads:       Yes\n  Agents:      claude, cursor\n\n  Create repository? [Y/n]: y\n\nCreating repository on GitHub...\n‚úì Created https://github.com/thrashr888/my-awesome-project\n‚Üí Cloning to /Users/me/Workspace/my-awesome-project...\n‚úì Cloned to /Users/me/Workspace/my-awesome-project\n‚Üí Initializing beads...\n‚úì Beads initialized\n‚Üí Configuring agents...\n‚úì Configured: claude, cursor\n‚Üí Committing configuration...\n‚úì Pushed to GitHub\n\n‚úì Added context 'my-awesome-project' to AllBeads config\n\nRepository Created Successfully\n  Name:   my-awesome-project\n  URL:    https://github.com/thrashr888/my-awesome-project\n  Path:   /Users/me/Workspace/my-awesome-project\n  Beads:  initialized\n  Agents: claude, cursor\n```\n\n## Compared to `ab onboard`:\n\n| Feature | `ab context new` | `ab onboard` |\n|---------|------------------|--------------|\n| Creates GitHub repo | ‚úì | ‚úó |\n| Clones existing repo | ‚úì (after creating) | ‚úì |\n| Initializes beads | ‚úì | ‚úì |\n| Configures agents | ‚úì | ‚úì |\n| Adds to contexts | ‚úì | ‚úì |\n\nUse `ab context new` for brand new projects.\nUse `ab onboard` for existing repositories.\n\n## See also:\n\n- `/onboard` - Onboard an existing repository\n- `/context` - Manage AllBeads contexts\n- `/agents` - Detect and configure AI agents\n",
        ".claude-plugin/commands/context.md": "---\ndescription: Manage AllBeads contexts (repositories)\n---\n\nManage the repositories (contexts) that AllBeads tracks.\n\nSubcommands:\n- `allbeads context list` - Show all configured contexts\n- `allbeads context add <path>` - Add a repository as a context\n- `allbeads context add <path> --name <name>` - Add with explicit name\n- `allbeads context remove <name>` - Remove a context\n- `allbeads context new <name>` - Create a new GitHub repository with AllBeads pre-configured\n- `allbeads context onboarding` - Show onboarding status for all contexts\n\nWhen adding a context, AllBeads will:\n1. Detect the repository name from the folder\n2. Find the git remote URL\n3. Determine the authentication strategy (SSH or PAT)\n\nAfter adding, run `allbeads sync <name>` to fetch beads from the remote.\n\n## Creating New Repositories\n\nUse `allbeads context new` to create a brand new GitHub repository:\n\n```bash\n# Interactive mode\nab context new\n\n# With arguments\nab context new myproject --private --description \"My project\"\n```\n\nThis creates the GitHub repo, clones it locally, initializes beads, configures AI agents, and adds it to AllBeads contexts.\n\nSee `/context-new` for detailed usage.\n",
        ".claude-plugin/commands/create.md": "---\ndescription: Create a bead in a specific context (cross-repo task handoff)\n---\n\nCreate a new bead (issue/task) in any AllBeads context. This enables cross-repository task handoff - creating work items in other repos for other agents to pick up.\n\n## Usage\n\n```bash\n# Create in a specific context\nab create --context=<context-name> --title=\"<title>\" --type=<type> --priority=<priority>\n\n# Examples\nab create --context=AllBeadsWeb --title=\"Add new API endpoint\" --type=feature --priority=2\nab create --context=AllBeadsApp --title=\"Fix menu bar icon\" --type=bug --priority=1\nab create --context=QDOS --title=\"Implement parser\" --type=task\n```\n\n## Parameters\n\n| Parameter | Required | Description |\n|-----------|----------|-------------|\n| `--context` | Yes | Target context name (e.g., AllBeadsWeb, AllBeadsApp) |\n| `--title` | Yes | Title of the bead |\n| `--type` | No | Type: bug, feature, task, epic, chore (default: task) |\n| `--priority` | No | Priority: P0-P4 or 0-4 (default: P2) |\n\n## Cross-Repo Task Handoff\n\nThis is the primary mechanism for distributing work across the AllBeads ecosystem:\n\n1. **Identify work for another repo**: While working, discover something that belongs elsewhere\n2. **Create the bead**: `ab create --context=AllBeadsWeb --title=\"...\" --type=feature`\n3. **Agent in target repo picks it up**: They run `bd ready` and see the task\n4. **Work flows naturally**: Each repo's agent handles its own work\n\n## Common Handoff Targets\n\n| Context | What goes there |\n|---------|-----------------|\n| `AllBeadsWeb` | Web UI features, API endpoints, dashboard work |\n| `AllBeadsApp` | macOS app features, native UI, menu bar items |\n| `AllBeads` | CLI features, core library, Rust code |\n\n## Workflow Example\n\n```bash\n# Working in AllBeads CLI, realize we need a web endpoint\nab create --context=AllBeadsWeb \\\n  --title=\"Add /api/beads/import endpoint\" \\\n  --type=feature \\\n  --priority=2\n\n# The bead appears in AllBeadsWeb\nab list -C AllBeadsWeb\n\n# Agent in AllBeadsWeb picks it up\ncd ../AllBeadsWeb\nbd ready\nbd update abw-xxx --status=in_progress\n# ... implement ...\nbd close abw-xxx\n```\n\n## See Also\n\n- `/allbeads:ready` - Find work across all contexts\n- `/allbeads:list` - List beads with context filtering\n- `/allbeads:handoff` - Hand off bead to an agent\n",
        ".claude-plugin/commands/governance.md": "---\ndescription: Check and enforce governance policies for AI agent adoption\n---\n\nManage governance policies for AI agent adoption across repositories.\n\nSubcommands:\n- `allbeads governance check` - Run policy checks against current repository\n- `allbeads governance status` - View loaded policies and exemptions\n- `allbeads governance violations` - List all policy violations\n- `allbeads governance exempt <repo> <policy> --reason \"...\"` - Exempt a repo\n- `allbeads governance unexempt <repo> <policy>` - Remove exemption\n\nPolicy enforcement levels (HCP Terraform-inspired):\n- **Advisory**: Warn but don't block\n- **SoftMandatory**: Block unless exempted\n- **HardMandatory**: Always block, no exemptions\n\nBuilt-in policy checks:\n- `FileExists` - Required files (README, LICENSE, etc.)\n- `FileExistsAny` - At least one of several files\n- `OnboardingScore` - Minimum onboarding completeness\n- `AgentAllowlist` - Permitted/denied agent types\n- `PatternAbsent` - Ensure patterns don't exist in files\n\nConfigure policies in `.beads/policies.yaml` or `~/.config/allbeads/policies.yaml`.\n",
        ".claude-plugin/commands/handoff.md": "---\ndescription: Hand off a bead to an AI agent for implementation\n---\n\nFire-and-forget delegation to AI agents. Launches the agent with full bead context (title, description, dependencies) and moves on.\n\n## Usage\n\n```bash\n# Hand off a specific bead to Claude (default agent)\nab handoff <bead-id>\n\n# Hand off to a specific agent\nab handoff <bead-id> --agent <agent>\n\n# Hand off in an isolated worktree\nab handoff <bead-id> --worktree\n\n# Queue work for a running agent via Agent Mail (instead of spawning new)\nab handoff <bead-id> --queue\nab handoff <bead-id> --queue --agent claude\n\n# Show beads that have been handed off\nab handoff --list\n\n# Show ready beads that could be handed off\nab handoff --ready\n\n# Dry run - see what would happen without launching\nab handoff <bead-id> --dry-run\n\n# Show available agents (detected on system)\nab handoff --agents\n```\n\n## Agent Preferences\n\nOn first use, you'll be prompted to select your preferred agent from the detected installed agents. Your choice is saved to `.beads/config.yaml` and used for subsequent handoffs.\n\nTo override the saved preference, use `--agent`:\n```bash\nab handoff ab-xyz --agent gemini    # Use Gemini instead of preferred\n```\n\n## Supported Agents\n\n### Terminal Agents (CLI)\n- `claude` - Claude Code (default)\n- `opencode` - OpenCode\n- `codex` - OpenAI Codex\n- `gemini` - Gemini CLI\n- `aider` - Aider\n- `cody` - Sourcegraph Cody\n\n### IDE Agents\n- `cursor` - Cursor\n- `kiro` - Kiro (AWS)\n- `antigravity` - Antigravity\n- `copilot` - VS Code Copilot\n\n### Web Agents\n- `jules` - Jules (Google) - opens browser\n- `chatgpt-codex` - ChatGPT Codex - opens browser\n\n## What Happens\n\n1. Bead context is loaded (title, description, dependencies, labels)\n2. A prompt is generated from the bead content with workflow instructions\n3. Bead status is updated to `in_progress`\n4. Handoff is recorded (comment + `handed-off` label)\n5. If `--worktree` is used, a git worktree is created in `.worktrees/`\n6. Agent is launched with the prompt\n   - CLI agents: launched with prompt argument (use `codex exec --full-auto` for non-interactive)\n   - IDE agents: launched with chat command\n   - Web agents: browser opened with deep-link URL\n\n## Agent Workflow (What the Agent Does)\n\nThe handoff prompt instructs the agent to:\n\n1. **Create a branch** for the work: `git checkout -b bead/<id>`\n2. **Do the work** described in the bead\n3. **Commit changes**: `git add -A && git commit -m \"feat(<id>): <description>\"`\n4. **Close the bead**: `bd close <id>` (use `--force` if blocked by an epic)\n5. **Sync and push**: `bd sync && git push -u origin bead/<id>`\n\nThis ensures clean git history and proper bead tracking.\n\n### Sandboxed Agents (Codex)\n\nSome agents run in sandboxes that prevent git operations (e.g., OpenAI Codex with `workspace-write` sandbox). AllBeads handles this automatically:\n\n1. **Pre-creates the branch** before launching (`git checkout -b bead/<id>`)\n2. **Provides simplified workflow prompt** (skip git operations)\n3. **User handles commit/push** after agent completes\n\nThe sandboxed prompt tells the agent:\n- Focus on the work, not git operations\n- The branch already exists\n- Just close the bead when done\n\nAfter a sandboxed agent completes:\n```bash\n# Commit the agent's work\ngit add -A\ngit commit -m \"feat(<bead-id>): <description>\"\n\n# Sync and push\nbd sync\ngit push -u origin bead/<bead-id>\n```\n\n## Queue Mode (--queue)\n\nUse `--queue` to send work to a **running agent** via Agent Mail instead of spawning a new process:\n\n```bash\nab handoff ab-xyz --queue\nab handoff ab-xyz --queue --agent claude\n```\n\nThis is ideal when:\n- An agent is already running (e.g., in another terminal)\n- You want to batch multiple tasks to the same agent\n- The agent supports runtime task intake via mail\n\n**What happens:**\n1. Bead context is loaded\n2. A NOTIFY message is sent via Agent Mail to `{agent}@{context}`\n3. Bead status is updated to `in_progress`\n4. `queued` label is added to the bead\n5. A comment records the queue action\n\nThe running agent checks its mail (either manually via `ab mail inbox` or automatically if running with `--mail-poll`) and picks up the task.\n\n**Difference from normal handoff:**\n| Normal | Queue Mode |\n|--------|------------|\n| Spawns new agent process | Sends mail to existing agent |\n| Agent starts immediately | Agent picks up when ready |\n| One agent per bead | Batched to running agent |\n\n## Worktrees\n\nUse `--worktree` for isolated development:\n```bash\nab handoff ab-xyz --worktree\n```\n\nThis creates a git worktree at `.worktrees/ab-xyz/` with a branch `ab/ab-xyz`. The agent runs in the worktree, keeping your main branch clean. Useful for:\n- Parallel work on multiple beads\n- Risky changes that might need to be discarded\n- Keeping main stable while experimenting\n\n## Environment\n\nThe `AB_ACTIVE_BEAD` environment variable is set to the bead ID when launching CLI agents, allowing the agent to know which bead it's working on.\n\n## Workflow\n\n### Starting Work\n```bash\nab handoff --ready              # See what's available\nab handoff ab-xyz               # Hand off to Claude\nab handoff ab-xyz --agent gemini  # Hand off to Gemini\n```\n\n### Tracking Handed-off Work\n```bash\nab handoff --list               # See what's in progress\nab show ab-xyz                  # View bead details + handoff info\nbd show ab-xyz                  # View raw bead details and comments\n```\n\nHandoff info (agent, time, task URL) is automatically shown when viewing a handed-off bead with `ab show`.\n\n### Completing Work\nAfter the agent finishes:\n```bash\nbd close ab-xyz --reason=\"Implemented feature X\"\nbd sync\ngit push\n```\n\n## Philosophy\n\n\"Hand-off, not ownership\" - We fire and forget. The agent takes over and works asynchronously. We don't poll for status. The work will get done.\n\n## See Also\n\n- `ab ready` - Show unblocked work\n- `ab list --status=in_progress` - All in-progress work\n- `/release` - Ship a new version\n- `specs/SPEC-handoff.md` - Full specification\n",
        ".claude-plugin/commands/list.md": "---\ndescription: List beads across all contexts\n---\n\nList beads aggregated from all configured AllBeads contexts.\n\nRun `allbeads list` to show all beads. Supports filtering:\n- `allbeads list --status open` - Filter by status\n- `allbeads list --priority P1` - Filter by priority\n- `allbeads list --context myproject` - Filter by context\n\nPresent results grouped by context when showing multiple repositories.\n",
        ".claude-plugin/commands/mail.md": "---\ndescription: Agent Mail for real-time coordination between agents\n---\n\nAgent Mail provides real-time messaging between agents. Use it alongside beads for coordinating work handoffs.\n\n## When to Use Mail vs Beads\n\n| Use Mail | Use Beads |\n|----------|-----------|\n| Real-time notifications | Persistent tasks |\n| Request immediate input | Work that spans sessions |\n| Announce status changes | Trackable deliverables |\n| Coordinate handoffs | Dependencies between work |\n\n**Best practice**: Create a bead for the work AND send mail to notify the receiving agent.\n\n## Commands\n\n```bash\n# Send a message to a context or actor\nab mail send --to AllBeadsWeb \"New feature ready for review\"\nab mail send --to agent@AllBeadsWeb \"Task completed\"\n\n# Send different message types\nab mail send --to AllBeadsWeb --message-type notify \"Build completed\"\nab mail send --to AllBeadsWeb --message-type request \"Please approve deployment\"\nab mail send --to AllBeadsWeb --message-type broadcast \"System maintenance at 5pm\"\n\n# Specify sender\nab mail send --to AllBeadsWeb --from \"build-bot\" \"CI passed\"\n\n# Check inbox\nab mail inbox\n\n# Check unread count\nab mail unread\n\n# Send test messages (for verification)\nab mail test \"Your message here\"\n\n# Mark messages as read\nab mail read <message-id>    # Mark one as read\nab mail read --all           # Mark all as read\n\n# Archive messages\nab mail archive <message-id> # Archive one message\nab mail archive --all        # Archive all read messages\n\n# Delete messages\nab mail delete <message-id>  # Permanently delete\n```\n\n## Agent Handoff Workflow\n\nWhen handing off work to another agent or repo:\n\n### 1. Create the Bead (Persistent Task)\n```bash\nab create --context=AllBeadsWeb --title=\"Implement /api/beads/import\" --type=feature --priority=2\n```\n\n### 2. Send Mail Notification (Real-time Alert)\n```bash\nab mail test \"New task created: Implement /api/beads/import endpoint for CLI sync. See abw-079.\"\n```\n\n### 3. Receiving Agent Picks Up\nThe agent in the target repo:\n```bash\nab mail inbox          # Sees the notification\nbd ready               # Finds the task\nbd update abw-079 --status=in_progress\n```\n\n## Viewing Mail\n\nWhen logged in (`ab login`), mail syncs to the web dashboard:\n- **CLI**: `ab mail inbox`\n- **Web**: https://allbeads.co/dashboard/mail\n- **TUI**: `ab tui` (Tab to Mail view)\n\n## Message Types\n\n| Type | Purpose | Example |\n|------|---------|---------|\n| NOTIFY | Inform about events | \"Build completed successfully\" |\n| REQUEST | Ask for input/approval | \"Approve deployment to production?\" |\n| BROADCAST | Announce to all agents | \"API rate limit reached, pausing\" |\n| LOCK/UNLOCK | File coordination | \"Locking src/auth.rs for refactor\" |\n| HEARTBEAT | Agent status | \"Status: working on ab-123\" |\n\n## Managing Your Inbox\n\nKeep your inbox clean with this workflow:\n\n```bash\n# 1. Check inbox at session start\nab mail inbox\n\n# 2. Process messages, then mark as read\nab mail read --all\n\n# 3. Archive when done\nab mail archive --all\n```\n\n## Best Practices\n\n1. **Always create a bead** for trackable work - mail is ephemeral\n2. **Reference bead IDs** in mail messages for context\n3. **Use mail for urgency** - immediate attention needed\n4. **Check inbox regularly** when starting work sessions\n5. **Send completion notifications** when finishing handed-off work\n6. **Clean up regularly** - archive processed messages to reduce noise\n\n## Integration with TUI\n\nThe TUI dashboard shows both Kanban (beads) and Mail views:\n```bash\nab tui\n# Tab - switch between Kanban and Mail\n# j/k - navigate messages\n# Enter - view details\n# q - quit\n```\n\n## See Also\n\n- `/allbeads:create` - Create beads for cross-repo handoff\n- `/allbeads:handoff` - Full handoff workflow\n- `/allbeads:tui` - Dashboard with mail view\n",
        ".claude-plugin/commands/onboard-repo.md": "---\ndescription: Interactive onboarding for a repository into AllBeads\n---\n\nOnboard the current repository (or a specified repository) into the AllBeads ecosystem.\n\nThis command runs an interactive workflow that:\n1. Initializes beads tracking (`bd init`)\n2. Creates a CLAUDE.md file with project guidance\n3. Adds the repository to AllBeads contexts\n4. Optionally runs janitor to discover existing issues\n5. Sets up CI/CD recommendations\n\nUsage:\n```bash\n# Onboard current directory\nallbeads onboard-repo\n\n# Onboard specific directory\nallbeads onboard-repo /path/to/repo\n\n# Non-interactive mode (use defaults)\nallbeads onboard-repo --yes\n\n# Skip specific steps\nallbeads onboard-repo --skip-init      # Skip bd init\nallbeads onboard-repo --skip-claude    # Skip CLAUDE.md creation\nallbeads onboard-repo --skip-context   # Skip adding to contexts\n```\n\n## What gets set up:\n\n### 1. Beads Tracking (.beads/ directory)\n- Runs `bd init` to create the `.beads/` directory\n- Initializes `issues.jsonl` for issue tracking\n- Sets up local SQLite database\n\n### 2. CLAUDE.md\n- Creates a template CLAUDE.md file\n- Includes project overview section\n- Pre-fills common development commands\n- Documents the project structure\n- Provides guidance for AI agents\n\n### 3. AllBeads Context\n- Adds the repository to `~/.config/allbeads/config.yaml`\n- Detects git remote URL automatically\n- Auto-configures authentication strategy (SSH vs HTTPS)\n- Makes the repo visible in `ab context list`\n\n### 4. Optional: Janitor Analysis\n- Scans codebase for potential issues\n- Creates beads for TODO comments\n- Identifies security concerns\n- Detects code smells and technical debt\n\n## After onboarding:\n\nThe repository will be ready for:\n- Issue tracking with `bd create/list/update/close`\n- Multi-context aggregation via `ab list/stats`\n- TUI visualization with `ab tui`\n- Agent coordination with AllBeads Mail\n- Cross-repository dependency tracking\n\nCheck onboarding status:\n```bash\nab context onboarding\n```\n\n## Example session:\n\n```bash\n$ cd ~/projects/my-app\n$ allbeads onboard-repo\n\nüöÄ AllBeads Repository Onboarding\n\nRepository: my-app\nPath: /Users/me/projects/my-app\nRemote: git@github.com:me/my-app.git\n\nüì¶ Step 1: Initialize Beads Tracking\n  Initialize beads tracking in this repository? [Y/n]: y\n  Running: bd init\n  ‚úì Beads initialized successfully\n\nüìù Step 2: Setup CLAUDE.md\n  Create a starter CLAUDE.md file? [Y/n]: y\n  ‚úì Created CLAUDE.md\n  ‚Ñπ  Edit CLAUDE.md to add project-specific guidance\n\nüîó Step 3: Add to AllBeads Contexts\n  Add this repository to AllBeads contexts? [Y/n]: y\n  ‚úì Added to AllBeads contexts as 'my-app'\n\nüìö Next Steps:\n\n1. Create your first issue:\n   cd /Users/me/projects/my-app\n   bd create --title=\"Initial setup\" --type=task --priority=2\n\n2. View your issues in the TUI:\n   ab tui\n\n3. Check onboarding status:\n   ab context onboarding\n\n‚úÖ Onboarding complete!\n```\n\n## Safety Checks\n\nBefore onboarding existing repositories, AllBeads verifies:\n\n1. **Clean working directory** - No uncommitted changes (excludes `.beads/` and `.claude/`)\n2. **Main branch** - Must be on `main` or `master` branch\n\nIf either check fails, onboarding is refused with a clear error message:\n```\nError: Repository has uncommitted changes:\n  M src/main.rs\n  ?? new-file.txt\n\nPlease commit or stash changes before onboarding.\n```\n\n```\nError: Repository is on branch 'feature-x', not main/master.\n\nPlease switch to the main branch before onboarding:\n  git checkout main\n```\n\n## Dependency Direction\n\nWhen onboarding creates beads (epic + tasks):\n- **Epic depends on tasks**: `bd dep add <epic> <task>`\n- Tasks appear as \"ready\" for agents to pick up\n- Epic appears as \"blocked\" until all tasks are done\n\n**Anti-pattern**: Don't make tasks depend on epic (this blocks the tasks!)\n\n## Plugin Configuration\n\nOnboarding auto-enables only core plugins:\n- `beads@beads-marketplace`\n- `allbeads@allbeads-marketplace`\n\nAn informational bead is created suggesting other available marketplace plugins for the user to review and enable manually.\n\n## See also:\n\n- `/context` - Manage AllBeads contexts\n- `/stats` - View aggregated statistics\n- `/tui` - Launch the AllBeads dashboard\n- `/handoff` - Hand off onboarding tasks to agents\n",
        ".claude-plugin/commands/prime.md": "---\ndescription: Prime agent memory with project context\n---\n\nLoad project context into agent memory for effective work.\n\n## Usage\n\n```bash\nab prime                    # Prime with all contexts\nab prime -C <context>       # Prime specific context\n```\n\n## What Gets Loaded\n\n1. **Project Overview**\n   - Active contexts and paths\n   - Repository status (beads, agents)\n\n2. **Ready Work**\n   - Unblocked beads ready to implement\n   - Priority-sorted task list\n\n3. **Recent Activity**\n   - Recently modified beads\n   - Recent commits\n\n4. **Statistics**\n   - Open/closed/blocked counts\n   - Work distribution\n\n## When to Use\n\n- Start of new session\n- After conversation compaction\n- Switching between contexts\n- Before starting complex work\n\n## Output\n\n```\n# AllBeads Context Priming\n\n## Active Contexts\n- AllBeads: /Users/me/Workspace/AllBeads (174 beads)\n- rookery: /Users/me/Workspace/rookery (23 beads)\n\n## Ready Work (5 tasks)\n1. ab-xyz [P1] - Implement feature X\n2. rk-123 [P2] - Fix bug in auth\n\n## Recent Activity\n- 3 beads closed today\n- 2 beads created today\n\n## Statistics\n- Open: 45, In Progress: 3, Blocked: 2, Closed: 124\n```\n\n## See Also\n\n- `/ready` - Just show ready work\n- `/stats` - Just show statistics\n- `/list` - Full bead listing\n",
        ".claude-plugin/commands/project-new.md": "---\ndescription: Plan a new project - create repo and beads, but don't code yet\n---\n\nCreate a new GitHub repository with AllBeads and plan the work using beads issues. **Does not write code** - just sets up the project structure and creates the implementation plan.\n\n## Workflow\n\n1. **Gather Requirements** - Discuss the project idea with the user\n2. **Create Spec** - Write a detailed specification document\n3. **Create Repo** - Use `ab context new` to create GitHub repo\n4. **Create README** - Add README.md with project overview and status\n5. **Create Beads** - Create epic issues with specs embedded in descriptions\n6. **STOP** - Do not write implementation code\n\nThe implementation will be handled later by:\n- User manually starting work\n- `/handoff` workflow (ab-vlq) triggering agent work\n- Another session picking up from `bd ready`\n\n## Why This Workflow?\n\n- **Separation of Concerns** - Planning and implementation are distinct phases\n- **Better Handoffs** - Beads contain all context needed for implementation\n- **Interruptible** - Work can be picked up across sessions\n- **Agent-Friendly** - Any agent can implement from the beads\n\n## Usage\n\nWhen the user describes a new project idea:\n\n1. Ask clarifying questions about requirements\n2. Write a spec document (can be in AllBeads/specs/ or in the new repo)\n3. Create the repo:\n   ```bash\n   ab context new <project-name> --private --gitignore <lang> --license <license>\n   ```\n4. Create README.md with:\n   - Project overview\n   - Status: \"Planning Phase\"\n   - Planned features table\n   - Example usage (planned)\n5. Create beads epics for each phase:\n   ```bash\n   bd create --title=\"[Phase 1] ...\" --type=epic --priority=1\n   ```\n6. Add detailed descriptions to beads (specs, requirements, acceptance criteria)\n\n## What NOT to Do\n\n- Do NOT create source code files\n- Do NOT set up build/test infrastructure\n- Do NOT create CI/CD pipelines\n- Do NOT implement any features\n\nAll implementation should wait for the handoff workflow or explicit user request.\n\n## Example Session\n\n```\nUser: I want to build a CLI tool that converts markdown to PDF\n\nAgent: Great idea! Let me ask some questions:\n- What language? (Go, Rust, Python?)\n- Should it support themes/styles?\n- Any specific PDF features (TOC, headers/footers)?\n\nUser: Go, yes to themes, and TOC would be nice\n\nAgent: Perfect. Let me plan this project...\n\n1. Creating spec document...\n2. Creating repo with `ab context new md2pdf --private --gitignore Go --license MIT`\n3. Adding README.md with project overview\n4. Creating beads:\n   - [Phase 1] Core CLI structure\n   - [Phase 2] Markdown parsing\n   - [Phase 3] PDF generation\n   - [Phase 4] Theme support\n   - [Phase 5] TOC generation\n\nProject planned! The beads contain full specs. Implementation can begin via:\n- `bd ready` to see available work\n- `/handoff` to trigger agent implementation\n- Or start manually: `bd update md2pdf-xxx --status=in_progress`\n```\n\n## See Also\n\n- `/context-new` - Just create a repo (no planning)\n- `/handoff` - Trigger agent to work on planned beads\n- `bd ready` - See what's ready to implement",
        ".claude-plugin/commands/ready.md": "---\ndescription: Find ready-to-work tasks across all contexts\n---\n\nFind beads that are ready to work on (no blocking dependencies) across all AllBeads contexts.\n\nRun `allbeads ready` to get a list of unblocked issues from all repositories. Present them showing:\n- Bead ID\n- Title\n- Priority\n- Context (repository)\n\nIf there are ready tasks, ask the user which one they'd like to work on.\n\nIf there are no ready tasks, suggest:\n- Check `/allbeads:blocked` to see what's blocking work\n- Check individual repos with `bd ready`\n",
        ".claude-plugin/commands/scan.md": "---\ndescription: Scan GitHub repositories for AI agent onboarding opportunities\n---\n\nScan GitHub user or organization repositories to identify onboarding opportunities.\n\nSubcommands:\n- `allbeads scan user <username>` - Scan a user's repositories\n- `allbeads scan org <org-name>` - Scan an organization's repositories\n- `allbeads scan compare` - Compare scanned repos with managed contexts\n\nOptions:\n- `--language <lang>` - Filter by programming language\n- `--min-stars <n>` - Minimum star count\n- `--include-archived` - Include archived repositories\n- `--include-forks` - Include forked repositories\n\nThe scanner detects 14 AI agent types:\n- Claude Code, GitHub Copilot, Cursor, Aider, Kiro\n- OpenAI Codex, Google Gemini, Amazon CodeWhisperer\n- Tabnine, Codeium, Sourcegraph Cody, Replit AI\n- JetBrains AI, Windsurf\n\nEach repo is assigned an onboarding priority (High, Medium, Low, Skip) based on:\n- Number of stars and recent activity\n- Existing agent configurations\n- Language and project type\n\nRequires `GITHUB_TOKEN` environment variable for API access.\n",
        ".claude-plugin/commands/show.md": "---\ndescription: Show detailed information about a bead\n---\n\nShow detailed information about a specific bead.\n\nRun `allbeads show <bead-id>` to display:\n- Full title and description\n- Status and priority\n- Context (repository)\n- Dependencies (blocks/blocked-by)\n- Creation and update timestamps\n- Comments (if any)\n\nThis provides complete context for understanding a piece of work, including cross-repo relationships.\n",
        ".claude-plugin/commands/stats.md": "---\ndescription: Show aggregated statistics across all contexts\n---\n\nDisplay statistics aggregated across all AllBeads contexts.\n\nRun `allbeads stats` to retrieve project metrics and present them clearly:\n- Total beads by status (open, in_progress, blocked, closed)\n- Breakdown by context (repository)\n- Ready-to-work count\n- Cache status\n\nSuggest actions based on the stats:\n- High number of blocked issues? Run `/allbeads:blocked` to investigate\n- No in_progress work? Run `/allbeads:ready` to find tasks\n- Stale cache? Run `allbeads sync --all` to refresh\n",
        ".claude-plugin/commands/sync.md": "---\ndescription: Synchronize contexts with git remotes\n---\n\nSynchronize AllBeads contexts with their git remotes.\n\nCommands:\n- `allbeads sync` - Sync the AllBeads config (if in git)\n- `allbeads sync --all` - Sync all context beads\n- `allbeads sync <context>` - Sync a specific context\n- `allbeads sync --status` - Check sync status without syncing\n\nThis fetches the latest beads from each repository's remote and updates the local cache.\n\nRun this:\n- At the start of a session to get latest state\n- After making changes in multiple repos\n- Before generating cross-repo reports\n",
        ".claude-plugin/commands/tui.md": "---\ndescription: Launch interactive TUI dashboard\n---\n\nLaunch the AllBeads terminal user interface for interactive navigation.\n\nRun `allbeads tui` to open the dashboard with:\n- **Kanban view**: Visual board with Open, In Progress, and Closed columns\n- **Mail view**: Agent messages and notifications\n\nKeyboard shortcuts:\n- `Tab` - Switch between Kanban and Mail views\n- `j/k` or `Up/Down` - Move up/down\n- `h/l` or `Left/Right` - Switch columns (Kanban)\n- `Enter` - View details\n- `Esc` - Back\n- `q` - Quit\n\nThis provides a visual overview of work across all contexts.\n",
        ".claude-plugin/commands/workflow.md": "---\ndescription: Show the AllBeads workflow guide\n---\n\n# AllBeads Workflow Guide\n\n## The Big Picture\n\n```\n[GitHub Repos] ‚Üí [ab scan] ‚Üí [ab onboard] ‚Üí [AllBeads Contexts]\n                                                    ‚Üì\n[ab context new] ‚Üí [New Repo] ‚Üí [bd init] ‚Üí [Managed Context]\n                                                    ‚Üì\n[Planning] ‚Üí [bd create epics] ‚Üí [Add specs] ‚Üí [Ready for work]\n                                                    ‚Üì\n[ab ready] ‚Üí [Claim task] ‚Üí [Implement] ‚Üí [ab close] ‚Üí [Push]\n```\n\n## Workflow Phases\n\n### 1. Discovery\nFind repos to manage:\n```bash\nab scan github <username>      # Your repos\nab scan github <org>           # Org repos\nab context list               # Already managed\n```\n\n### 2. Onboarding\nBring repos into AllBeads:\n```bash\n# Existing repo\nab onboard <repo-url>\n\n# New repo\nab context new <name> --private\n```\n\n### 3. Planning\nCreate work items with specs:\n```bash\nbd create --title=\"...\" --type=epic\nbd comments add <id> \"<spec>\"\n```\n\n### 4. Execution\nComplete the work:\n```bash\nab ready                      # Find work\nab update <id> --status=in_progress\n# ... implement ...\nab close <id>\ngit push\n```\n\n### 5. Governance\nMaintain quality:\n```bash\nab governance check           # Policy compliance\nab agents list               # Agent coverage\nab stats                     # Health metrics\n```\n\n## Key Commands by Phase\n\n| Phase | Command | Purpose |\n|-------|---------|---------|\n| Discovery | `ab scan github` | Find repos |\n| Onboarding | `ab onboard` | Add to AllBeads |\n| Planning | `ab context new` | Create new repo |\n| Planning | `bd create` | Create work items |\n| Execution | `ab ready` | Find work |\n| Execution | `ab close` | Complete work |\n| Governance | `ab governance check` | Verify policies |\n\n## Session Protocol\n\nEvery session should:\n1. `ab prime` - Load context\n2. `ab ready` - Find work\n3. Work on tasks\n4. `bd sync` - Save beads\n5. `git push` - Push changes\n\n## See Also\n\n- `AGENTS.md` - Quick agent reference\n- `CLAUDE.md` - Full project guide\n- `/prime` - Context priming\n- `/ready` - Ready work\n",
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"allbeads-marketplace\",\n  \"description\": \"Multi-repo orchestration for AI agent workflows\",\n  \"owner\": {\n    \"name\": \"Paul Thrasher\",\n    \"url\": \"https://github.com/thrashr888\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"allbeads\",\n      \"source\": \"./claude-plugin\",\n      \"description\": \"Multi-repo orchestration for AI agent workflows. Aggregate beads across repositories, manage contexts, and coordinate distributed work.\",\n      \"version\": \"0.2.2\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"allbeads\",\n  \"description\": \"Multi-repo orchestration for AI agent workflows. Aggregate beads across repositories, manage contexts, and coordinate distributed work.\",\n  \"version\": \"0.2.1\",\n  \"author\": {\n    \"name\": \"Paul Thrasher\",\n    \"url\": \"https://github.com/thrashr888\"\n  },\n  \"repository\": \"https://github.com/thrashr888/AllBeads\",\n  \"license\": \"MIT\",\n  \"homepage\": \"https://github.com/thrashr888/AllBeads\",\n  \"keywords\": [\n    \"multi-repo\",\n    \"orchestration\",\n    \"agent-workflow\",\n    \"beads\",\n    \"federated\"\n  ],\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"allbeads sync --status 2>/dev/null || true\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        ".claude-plugin/skills/allbeads/skill.md": "---\nname: allbeads\ndescription: >\n  Multi-repo orchestration for AI agent workflows. Aggregate beads across\n  repositories, manage contexts, and coordinate distributed work across\n  microservices and polyrepo architectures.\nallowed-tools: \"Read,Bash(allbeads:*)\"\nversion: \"0.2.1\"\nauthor: \"Paul Thrasher <https://github.com/thrashr888>\"\nlicense: \"MIT\"\n---\n\n# AllBeads - Multi-Repo Agent Orchestration\n\nAllBeads implements the \"Boss Repository\" pattern - a control plane that federates issue tracking (beads) across multiple git repositories, enabling AI agents to coordinate work across distributed microservices.\n\n## AllBeads vs bd (beads)\n\n| allbeads (multi-repo) | bd (single-repo) |\n|----------------------|------------------|\n| Aggregates across repos | Single repository |\n| Context-based filtering | Local .beads only |\n| Cross-repo dependencies | Local dependencies |\n| Federated dashboard | Single project view |\n\n**Decision test**: \"Does my work span multiple repositories?\" ‚Üí YES = allbeads\n\n**When to use allbeads**:\n- Work spans multiple microservices/repos\n- Need unified view across polyrepo architecture\n- Cross-repository dependencies exist\n- Managing work across team contexts (@work, @personal)\n- Enterprise integration (JIRA, GitHub Issues)\n\n**When to use bd**:\n- Single repository work\n- Local issue tracking\n- No cross-repo dependencies needed\n\n## Prerequisites\n\n```bash\nallbeads --version  # Requires v0.2.0+\n```\n\n- **allbeads CLI** installed (`brew install thrashr888/allbeads/allbeads`)\n- **bd CLI** installed for underlying beads operations\n- **Contexts configured**: `allbeads context add .`\n\n## Session Start Checklist\n\nWhen starting a work session, check for handoffs from other agents:\n\n```bash\nab mail inbox        # Check for messages from other agents\nab ready             # See what work is available\nbd ready             # Local repo ready tasks\n```\n\n**Why check mail?** Other agents may have completed work and handed off follow-up tasks. The mail often contains context about what was done and what's expected next.\n\n## Core Commands\n\n### Viewing Aggregated Work\n\n```bash\n# Show statistics across all contexts\nallbeads stats\n\n# List all beads across contexts\nallbeads list\n\n# Filter by status\nallbeads list --status open\n\n# Show ready-to-work beads (no blockers)\nallbeads ready\n\n# Show blocked beads\nallbeads blocked\n\n# Search across all contexts\nallbeads search \"query\"\n```\n\n### Context Management\n\n```bash\n# Add current repo as context\nallbeads context add .\n\n# Add with explicit name\nallbeads context add /path/to/repo --name myproject\n\n# List contexts\nallbeads context list\n\n# Remove context\nallbeads context remove myproject\n```\n\n### Synchronization\n\n```bash\n# Sync all contexts with remotes\nallbeads sync --all\n\n# Check sync status\nallbeads sync --status\n\n# Sync specific context\nallbeads sync mycontext\n```\n\n### Interactive Dashboard\n\n```bash\n# Launch TUI (Kanban + Mail views)\nallbeads tui\n\n# Keyboard shortcuts:\n#   Tab           - Switch views\n#   j/k or Up/Down - Navigate\n#   Enter         - View details\n#   q             - Quit\n```\n\n## Key Concepts\n\n### Contexts\nA context is a git repository that AllBeads tracks. Each context has its own `.beads/` directory and can be filtered independently or viewed in aggregate.\n\n### Shadow Beads\nWhen working with cross-repo Epics, AllBeads creates \"Shadow Beads\" in the Boss repository that point to native beads in member repositories, enabling dependency tracking across repo boundaries.\n\n### Federated Graph\nAllBeads maintains a unified dependency graph across all contexts, allowing you to see how work in one repository blocks or enables work in another.\n\n## Cross-Repo Task Handoff\n\nAllBeads enables seamless task handoff between repositories using **beads** (persistent tasks) and **mail** (real-time notifications).\n\n### Beads + Mail: The Complete Handoff\n\n```bash\n# 1. Create the persistent task (bead)\nab create --context=AllBeadsWeb --title=\"Add /api/beads/import endpoint\" --type=feature\n\n# 2. Send real-time notification (mail)\nab mail send --to AllBeadsWeb \"New task: Add /api/beads/import endpoint. See bd ready.\"\n\n# 3. Target agent picks up\n# In AllBeadsWeb:\nab mail inbox    # Sees notification\nbd ready         # Finds task\n```\n\n### When to Use Each\n\n| Use Beads | Use Mail |\n|-----------|----------|\n| Trackable tasks | Real-time alerts |\n| Work spanning sessions | Immediate attention needed |\n| Dependencies | Status updates |\n| Persistent record | Coordination messages |\n\n**Best practice**: Create a bead AND send mail for important handoffs.\n\n### Common Handoff Targets\n\n| Context | Purpose |\n|---------|---------|\n| `AllBeadsWeb` | Web UI, API endpoints, dashboard |\n| `AllBeadsApp` | macOS native app, menu bar |\n| `AllBeads` | CLI, core Rust library |\n\n## Agent Mail\n\nAgent Mail enables real-time communication between agents across repositories.\n\n```bash\n# Send a message to another context/agent\nab mail send --to AllBeadsWeb \"Feature ready for review\"\nab mail send --to AllBeadsWeb --message-type request \"Approve deployment?\"\n\n# Check your inbox\nab mail inbox\n\n# Check unread count\nab mail unread\n\n# Send test messages\nab mail test \"Build completed for ab-123. Ready for review.\"\n```\n\n### Mail in the Dashboard\n\nView mail in multiple ways:\n- **CLI**: `ab mail inbox`\n- **TUI**: `ab tui` then Tab to Mail view\n- **Web**: https://allbeads.co/dashboard/mail (when logged in)\n\n### Message Types\n\n| Type | Use For |\n|------|---------|\n| **NOTIFY** | Status updates, completions, FYIs |\n| **REQUEST** | Approval needed, input required |\n| **BROADCAST** | Announcements to all agents |\n| **LOCK/UNLOCK** | File coordination |\n| **HEARTBEAT** | Agent liveness signals |\n\n### Managing Your Inbox\n\n```bash\n# Mark messages as read\nab mail read <message-id>    # Mark specific message\nab mail read --all           # Mark all as read\n\n# Archive old messages\nab mail archive <message-id> # Archive specific message\nab mail archive --all        # Archive all read messages\n\n# Delete messages\nab mail delete <message-id>  # Permanently delete\n```\n\n**Workflow**: Check inbox ‚Üí Process messages ‚Üí Mark read ‚Üí Archive when done.\n\n### Mail Best Practices\n\n1. **Reference bead IDs** in messages for context\n2. **Check inbox** when starting work sessions\n3. **Send completion notices** after finishing handed-off work\n4. **Use mail for urgency**, beads for tracking\n5. **Clean up regularly** with `ab mail read --all && ab mail archive --all`\n\n## Common Workflows\n\n**Starting cross-repo work:**\n```bash\nallbeads ready           # Find available work across all repos\nallbeads show <id>       # Review issue details\nbd update <id> --status=in_progress  # Claim it (in the local repo)\n```\n\n**Checking project health:**\n```bash\nallbeads stats           # Overview across all contexts\nallbeads blocked         # Find blocked issues\nallbeads sync --status   # Check sync state\n```\n\n**Adding a new repository:**\n```bash\ncd /path/to/new-repo\nallbeads context add . --name new-project\nallbeads sync new-project\n```\n\n**Creating a brand new project:**\n```bash\nab context new myproject --private --gitignore Go --license MIT\n```\nThis creates GitHub repo, clones locally, initializes beads, and adds to AllBeads.\n\n**Planning a project (no code yet):**\n```bash\nab context new myproject --private\nbd create --title=\"[Phase 1] ...\" --type=epic\nbd comments add <id> \"<spec details>\"\n# STOP - let handoff workflow implement\n```\n\n## Golden Workflow: Onboard ‚Üí Handoff ‚Üí Complete\n\nThe recommended workflow for managing work across repositories:\n\n### 1. Onboard Repositories\n```bash\n# Onboard existing repo (safety checks: clean git, main branch)\nab onboard /path/to/repo\n\n# Creates: .beads/, .claude/settings.json, adds to AllBeads config\n# Creates: Epic + task beads for onboarding work\n```\n\n### 2. Find Ready Work\n```bash\nab ready                 # Show unblocked tasks across all repos\nab show <bead-id>        # Review task details\n```\n\n### 3. Hand Off to Agent\n```bash\n# Hand off to your preferred agent (spawns new process)\nab handoff <bead-id>\n\n# Or specify agent explicitly\nab handoff <bead-id> --agent codex\nab handoff <bead-id> --agent gemini\n\n# Queue to a running agent via Agent Mail (no new process)\nab handoff <bead-id> --queue\nab handoff <bead-id> --queue --agent claude\n```\n\n### 4. Agent Completes Work\nThe agent:\n1. Creates branch (or uses pre-created for sandboxed agents)\n2. Does the work\n3. Closes the bead: `bd close <bead-id>`\n\n### 5. Commit and Push (if sandboxed agent)\nFor sandboxed agents like Codex that can't do git operations:\n```bash\ngit add -A\ngit commit -m \"feat(<bead-id>): <description>\"\nbd sync\ngit push -u origin bead/<bead-id>\n```\n\n### 6. Repeat\n```bash\nab ready                 # Find next task\nab handoff <bead-id>     # Hand off\n```\n\n## Key Learnings\n\n### Onboarding\n- **Safety checks**: Clean git workspace, main/master branch required\n- **Dependency direction**: Epic depends on tasks (tasks ready, epic blocked)\n- **Plugins**: Only beads + allbeads auto-enabled\n\n### Handoff\n- **Sandboxed agents**: Codex can't write to `.git/` - branch pre-created\n- **Codex command**: Uses `codex exec --full-auto` for non-interactive mode\n- **After sandboxed agent**: User commits and pushes the work\n- **Queue mode (`--queue`)**: Sends work via Agent Mail to a running agent instead of spawning new process\n\n## Agents\n\nAllBeads provides specialized agents:\n\n| Agent | Purpose |\n|-------|---------|\n| **task-agent** | Autonomous task completion across contexts |\n| **governance-agent** | Policy enforcement and compliance |\n| **planning-agent** | Project planning without implementation |\n| **onboarding-agent** | Repository onboarding assistance |\n\n## Commands Reference\n\n| Command | Purpose |\n|---------|---------|\n| `/create` | Create bead in any context (cross-repo handoff) |\n| `/mail` | Agent mail for real-time coordination |\n| `/ready` | Show unblocked work |\n| `/list` | List all beads |\n| `/show` | Show bead details |\n| `/stats` | Aggregated statistics |\n| `/sync` | Sync with remotes |\n| `/context` | Manage contexts |\n| `/context-new` | Create new GitHub repo |\n| `/project-new` | Plan new project (no code) |\n| `/handoff` | Hand off to implementation |\n| `/workflow` | Workflow guide |\n| `/prime` | Prime agent context |\n| `/scan` | Scan GitHub for repos |\n| `/governance` | Check policies |\n| `/agents` | Manage AI agents |\n| `/onboard-repo` | Onboard repository |\n| `/blocked` | Show blocked work |\n| `/tui` | Launch dashboard |\n\n## Quick Reference\n\n```bash\n# Discovery\nab scan github <user>         # Find repos\n\n# Onboarding\nab onboard <url>              # Onboard existing\nab context new <name>         # Create new\n\n# Work\nab ready                      # Find work\nab update <id> --status=...   # Update status\nab close <id>                 # Complete\n\n# Cross-Repo Handoff\nab create --context=AllBeadsWeb --title=\"...\" --type=feature\nab mail send --to AllBeadsWeb \"New task: see bd ready\"\n\n# Mail\nab mail send --to <context> \"message\"  # Send to context/agent\nab mail inbox                 # Check messages\nab mail unread                # Unread count\n\n# Sync\nab sync --all                 # Sync everything\nbd sync                       # Sync current repo\n\n# Governance\nab governance check           # Check policies\nab agents list               # List agents\n```\n\n## See Also\n\n- `AGENTS.md` - Quick reference for agents\n- `CLAUDE.md` - Full project guide\n- `specs/PRD-00.md` - Architecture specification\n",
        "claude-plugin/.claude-plugin/plugin.json": "{\n  \"name\": \"allbeads\",\n  \"description\": \"Multi-repo orchestration for AI agent workflows. Aggregate beads across repositories, manage contexts, and coordinate distributed work.\",\n  \"version\": \"0.2.2\",\n  \"author\": {\n    \"name\": \"Paul Thrasher\",\n    \"url\": \"https://github.com/thrashr888\"\n  },\n  \"repository\": \"https://github.com/thrashr888/AllBeads\",\n  \"license\": \"MIT\",\n  \"homepage\": \"https://github.com/thrashr888/AllBeads\",\n  \"keywords\": [\n    \"multi-repo\",\n    \"orchestration\",\n    \"agent-workflow\",\n    \"beads\",\n    \"federated\"\n  ],\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"allbeads sync --status 2>/dev/null || true\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "claude-plugin/agents/governance-agent.md": "---\ndescription: Agent that enforces governance policies across managed repositories\n---\n\n# Governance Agent\n\nScans and enforces governance policies across AllBeads-managed repositories.\n\n## Workflow\n\n1. **Scan Repositories**\n   ```bash\n   ab governance check            # Check all managed repos\n   ab governance check --repo=X   # Check specific repo\n   ```\n\n2. **Review Violations**\n   - Policy violations are reported with severity levels\n   - Advisory: Recommendations, no blocking\n   - Soft Mandatory: Should fix, can override with reason\n   - Hard Mandatory: Must fix, blocks operations\n\n3. **Create Remediation Issues**\n   For each violation:\n   ```bash\n   bd create --title=\"Policy: <violation>\" --type=task --priority=2\n   bd comments add <id> \"Violation details and remediation steps\"\n   ```\n\n4. **Track Agent Coverage**\n   ```bash\n   ab agents list                 # List agents across contexts\n   ab agents summary              # Adoption statistics\n   ab scan github <user>          # Find unmanaged repos\n   ```\n\n5. **Onboard Unmanaged Repos**\n   For repos without AllBeads:\n   ```bash\n   ab onboard <repo-url>          # Full onboarding\n   # Or just scan:\n   ab scan github <user> --all\n   ```\n\n## Governance Policies\n\n### Agent Configuration\n- All managed repos should have AI agent configs\n- CLAUDE.md required for Claude Code\n- .cursorrules for Cursor\n- Check with `ab agents detect`\n\n### Beads Tracking\n- All repos should have .beads/ initialized\n- Regular sync with remote\n- No stale in_progress issues\n\n### Security\n- No secrets in committed files\n- .env files in .gitignore\n- License file present\n\n## Reporting\n\nGenerate governance reports:\n```bash\nab governance status           # Summary across all repos\nab governance violations       # List all violations\nab governance audit            # Audit log\n```\n\n## Exemptions\n\nSome repos may be exempt:\n```bash\nab governance exempt <repo> <policy> --reason=\"...\"\nab governance unexempt <repo> <policy>\n```\n\n## Important Guidelines\n\n- Run governance checks regularly\n- Create issues for violations, don't just report them\n- Track remediation progress through beads\n- Respect exemptions with valid reasons\n- Focus on high-value policies first\n",
        "claude-plugin/agents/onboarding-agent.md": "---\ndescription: Agent that helps onboard repositories into AllBeads\n---\n\n# Onboarding Agent\n\nHelps onboard new and existing repositories into the AllBeads ecosystem.\n\n## Workflow\n\n### For Existing Repositories\n\n1. **Identify Target**\n   ```bash\n   # Scan user's GitHub for unmanaged repos\n   ab scan github <username> --all\n\n   # Or specify a repo directly\n   ab scan repo github.com/user/repo\n   ```\n\n2. **Assess Onboarding Priority**\n   Consider:\n   - Recent activity (last push date)\n   - Stars / usage\n   - Language match with other managed repos\n   - Existing agent configurations\n\n3. **Run Onboarding**\n   ```bash\n   ab onboard <repo-url>\n   # Or for local:\n   ab onboard /path/to/repo\n   ```\n\n4. **Verify Configuration**\n   ```bash\n   ab agents detect /path/to/repo\n   ab context list | grep <repo>\n   ```\n\n### For New Repositories\n\n1. **Create with Full Setup**\n   ```bash\n   ab context new <name> \\\n     --private \\\n     --gitignore <lang> \\\n     --license MIT \\\n     --init-agents claude,cursor\n   ```\n\n2. **Verify Creation**\n   - Check GitHub for repo\n   - Verify local clone\n   - Confirm beads initialized\n   - Check agent configs created\n\n### Batch Onboarding\n\nFor multiple repos:\n```bash\n# Scan first\nab scan github <user> --all\n\n# Then use TUI picker\nab tui  # Tab to GitHub picker, select repos\n```\n\n## Onboarding Checklist\n\nFor each repo:\n- [ ] Beads initialized (.beads/ exists)\n- [ ] CLAUDE.md created with project guidance\n- [ ] Added to AllBeads contexts\n- [ ] Git hooks installed (optional)\n- [ ] Initial sync completed\n- [ ] README updated if needed\n\n## Incremental Onboarding\n\nRepos can be partially onboarded. Check status:\n```bash\nab context onboarding\n```\n\nTo complete partial onboarding:\n```bash\nab onboard <path> --skip-clone  # Already cloned\n```\n\n## Troubleshooting\n\n### Clone Failures\n```bash\n# Check SSH keys\nssh -T git@github.com\n\n# Try HTTPS instead\nab onboard https://github.com/user/repo\n```\n\n### Beads Init Failures\n```bash\n# Run manually\ncd /path/to/repo\nbd init\n```\n\n### Context Add Failures\n```bash\n# Add manually\nab context add /path/to/repo --name <name>\n```\n\n## Important Guidelines\n\n- Start with high-priority repos (active, important)\n- Verify each step before proceeding\n- Create beads for any issues discovered\n- Don't force onboarding on archived repos\n- Respect private repo visibility\n\n## Safety Checks\n\nAllBeads enforces safety checks before onboarding existing repositories:\n\n1. **Clean Working Directory**: Refuses to onboard if there are uncommitted changes (excluding `.beads/` and `.claude/` directories)\n2. **Main Branch**: Refuses to onboard if not on `main` or `master` branch\n\nThese prevent accidental commits of unrelated work during onboarding.\n\n```bash\n# If you see safety check errors:\ngit stash                    # Stash uncommitted changes\ngit checkout main            # Switch to main branch\nab onboard .                 # Now onboard\ngit stash pop                # Restore changes after\n```\n\n## Batch Onboarding Best Practices\n\nWhen onboarding multiple repos:\n\n1. **Filter for git repos with GitHub remotes** - Skip non-git folders and repos without remotes\n2. **Run onboarding in parallel** where possible\n3. **Create issues for repos that fail safety checks** - Don't skip silently\n4. **The epic depends on tasks** - Use `bd dep add <epic> <task>` so tasks are ready, epic is blocked\n\n## Dependency Direction\n\nWhen onboarding creates an epic with tasks:\n- **Correct**: Epic depends on tasks (`bd dep add epic-id task-id`)\n- **Incorrect**: Tasks depend on epic (this blocks the tasks!)\n\nThe tasks should appear as \"ready\" for agents to pick up.\n",
        "claude-plugin/agents/planning-agent.md": "---\ndescription: Agent that plans new projects without implementing code\n---\n\n# Planning Agent\n\nPlans new projects by creating repositories and beads, but does NOT write implementation code.\n\n## Workflow\n\n1. **Gather Requirements**\n   - Discuss the project idea with the user\n   - Ask clarifying questions about:\n     - Language/framework preferences\n     - Key features needed\n     - Scope and priorities\n\n2. **Create Specification**\n   - Write a detailed spec document\n   - Include:\n     - Project overview\n     - Use cases\n     - Technical approach\n     - Data sources/APIs\n     - Implementation phases\n   - Save to `specs/<project>-spec.md` in AllBeads\n\n3. **Create Repository**\n   ```bash\n   ab context new <project-name> \\\n     --private \\\n     --description \"...\" \\\n     --gitignore <lang> \\\n     --license <license>\n   ```\n\n4. **Create README**\n   Write README.md with:\n   - Project overview\n   - Status: \"Planning Phase\"\n   - Planned features table\n   - Example usage (planned)\n\n5. **Create Phase Epics**\n   ```bash\n   bd create --title=\"[Phase 1] ...\" --type=epic --priority=1\n   bd create --title=\"[Phase 2] ...\" --type=epic --priority=2\n   # etc.\n   ```\n\n6. **Add Specs to Beads**\n   For each epic:\n   ```bash\n   bd comments add <id> \"<detailed spec>\"\n   ```\n   Include:\n   - Goals\n   - Deliverables\n   - API endpoints / interfaces\n   - Acceptance criteria\n\n7. **STOP**\n   - Do NOT create source code files\n   - Do NOT set up build infrastructure\n   - Do NOT implement any features\n\n## What Gets Created\n\n```\n<project>/\n‚îú‚îÄ‚îÄ README.md           # Project overview, planning status\n‚îú‚îÄ‚îÄ CLAUDE.md           # Agent guidance (from ab context new)\n‚îú‚îÄ‚îÄ .beads/             # Issue tracking (from bd init)\n‚îú‚îÄ‚îÄ specs/              # Copy of spec document\n‚îî‚îÄ‚îÄ (no source code!)\n```\n\n## Handoff\n\nAfter planning, implementation can begin via:\n- User manually starting: `bd update <id> --status=in_progress`\n- Handoff workflow: `/handoff` command\n- Another agent: Task Agent picks up from `bd ready`\n\n## Important Guidelines\n\n- NEVER write source code in this phase\n- Focus on clear, detailed specifications\n- Break work into logical phases\n- Each bead should be independently implementable\n- Include acceptance criteria so completion is clear\n- Copy spec to both AllBeads and the new repo\n\n## Example Session\n\n```\nUser: I want a CLI that converts markdown to PDF\n\nAgent: Let me plan this project...\n\n1. Questions:\n   - Language preference? (Go/Rust/Python)\n   - Theme support needed?\n   - Special features? (TOC, headers)\n\n2. Creating spec...\n3. Creating repo: ab context new md2pdf --private\n4. Creating README with \"Planning Phase\" status\n5. Creating epics:\n   - Phase 1: CLI structure\n   - Phase 2: Markdown parsing\n   - Phase 3: PDF generation\n   - Phase 4: Theme support\n6. Adding specs to beads\n\nDone! Ready for implementation via bd ready.\n```\n",
        "claude-plugin/agents/task-agent.md": "---\ndescription: Autonomous agent that finds and completes ready tasks across contexts\n---\n\n# Task Agent\n\nAutonomous agent for completing work across AllBeads-managed repositories.\n\n## Workflow\n\n1. **Find Ready Work**\n   ```bash\n   ab ready                    # Get unblocked tasks across all contexts\n   ab ready -C <context>       # Filter to specific context\n   ```\n   - Prefer higher priority tasks (P0 > P1 > P2 > P3 > P4)\n   - If no ready tasks, report completion\n\n2. **Claim the Task**\n   ```bash\n   ab show <id>                # Get full task details\n   ab update <id> --status=in_progress\n   ```\n   - Report what you're working on\n   - Note the context (which repo this task is in)\n\n3. **Navigate to Context**\n   ```bash\n   ab context list             # Find the repo path\n   cd /path/to/repo            # Work in the correct context\n   ```\n\n4. **Execute the Task**\n   - Read the task description and any comments\n   - Use available tools to complete the work\n   - Follow best practices from CLAUDE.md\n   - Run tests if applicable\n\n5. **Track Discoveries**\n   If you find bugs, TODOs, or related work:\n   ```bash\n   bd create --title=\"Found: ...\" --type=bug\n   bd dep add <new-id> <current-id>   # Link as discovered-from\n   ```\n\n6. **Complete the Task**\n   ```bash\n   cargo test                  # Verify tests pass\n   cargo clippy                # Check linter\n   git add -A && git commit    # Commit changes\n   ab close <id> --reason=\"Implemented X, added tests\"\n   git push\n   ```\n\n7. **Continue**\n   ```bash\n   ab ready                    # Check for newly unblocked work\n   ```\n   Repeat the cycle.\n\n## Important Guidelines\n\n- Always update issue status when starting and finishing\n- Link discovered work with dependencies\n- Don't close issues unless work is actually complete\n- If blocked, set status to `blocked` and explain why\n- Push changes before reporting completion\n- Work in the correct repository context\n\n## Cross-Context Considerations\n\nAllBeads manages multiple repositories. When working:\n- Check which context the bead belongs to\n- Navigate to that repo before making changes\n- Use `ab` for cross-context operations\n- Use `bd` for single-repo operations\n\n## Available Commands\n\n```bash\n# AllBeads (cross-context)\nab ready              # Find ready work across contexts\nab show <id>          # Show bead details\nab update <id>        # Update bead\nab close <id>         # Close bead\nab stats              # View statistics\n\n# Beads (single repo)\nbd list               # List issues in current repo\nbd create             # Create new issue\nbd dep add            # Add dependency\nbd sync               # Sync with remote\n```\n\nYou are autonomous but should communicate your progress clearly. Start by finding ready work!\n",
        "claude-plugin/commands/agents.md": "---\ndescription: Detect and track AI agent usage across repositories\n---\n\nDetect AI agents and track adoption metrics.\n\nSubcommands:\n- `allbeads agents detect` - Detect AI agents in current directory\n- `allbeads agents track --context <name> --path <path>` - Record scan to metrics\n- `allbeads agents stats` - View adoption statistics\n- `allbeads agents stats --days <n>` - Stats for specific time period\n- `allbeads agents stats --json` - Output as JSON\n\nDetects 14 AI agent types via config files:\n- Claude Code (CLAUDE.md, .claude/)\n- GitHub Copilot (.github/copilot-instructions.md)\n- Cursor (.cursorrules, .cursor/)\n- Aider (.aider.conf.yml)\n- Kiro (.kiro/)\n- And more...\n\nDetection confidence levels:\n- **High**: Primary config file found\n- **Medium**: Secondary indicators\n- **Low**: Indirect evidence\n\nUsage tracking stores metrics in SQLite for trend analysis:\n- Adoption rate over time\n- Agent distribution across repos\n- Scan history per repository\n",
        "claude-plugin/commands/blocked.md": "---\ndescription: Show blocked issues across all contexts\n---\n\nShow beads that are blocked by dependencies across all AllBeads contexts.\n\nRun `allbeads blocked` to find issues that cannot proceed due to blockers.\n\nFor each blocked issue, show:\n- Bead ID and title\n- What it's blocked by\n- Context (repository)\n\nThis helps identify:\n- Cross-repo blocking relationships\n- Bottlenecks in the workflow\n- Issues that need attention to unblock downstream work\n",
        "claude-plugin/commands/context-new.md": "---\ndescription: Create a new GitHub repository with AllBeads pre-configured\n---\n\nCreate a brand new GitHub repository and set it up with AllBeads from the start.\n\nThis command provides a streamlined workflow similar to GitHub's \"New Repository\" form but adds:\n- Automatic beads initialization\n- AI agent configuration (CLAUDE.md, .cursorrules, etc.)\n- Automatic addition to AllBeads contexts\n\nUsage:\n```bash\n# Interactive mode (recommended for first-time use)\nab context new\n\n# With arguments\nab context new myproject --private --description \"My new project\"\n\n# Non-interactive mode\nab context new myproject --non-interactive --private\n\n# Full specification\nab context new myproject \\\n  --private \\\n  --description \"Project description\" \\\n  --license MIT \\\n  --gitignore Rust \\\n  --init-agents claude,cursor\n```\n\n## Options:\n\n| Option | Description |\n|--------|-------------|\n| `--description` | Repository description |\n| `--private` | Create as private repository |\n| `--org <ORG>` | Create in an organization |\n| `--gitignore <TEMPLATE>` | .gitignore template (Rust, Node, Python, Go, etc.) |\n| `--license <LICENSE>` | License (MIT, Apache-2.0, GPL-3.0, etc.) |\n| `--init-agents <LIST>` | Comma-separated agents to configure (default: claude) |\n| `--path <PATH>` | Custom local clone path |\n| `--no-clone` | Create on GitHub only, don't clone locally |\n| `--wizard` | Use interactive TUI wizard |\n| `--non-interactive` | Use defaults without prompts |\n\n## Workflow:\n\n1. **Input Collection** - Name, visibility, description via prompts or CLI args\n2. **GitHub Creation** - Creates repository using `gh` CLI\n3. **Clone** - Clones repository to local workspace\n4. **Beads Init** - Runs `bd init` to set up issue tracking\n5. **Agent Config** - Creates CLAUDE.md and other agent files\n6. **Git Push** - Commits and pushes configuration\n7. **Context Add** - Adds to AllBeads config\n\n## Requirements:\n\n- GitHub CLI (`gh`) must be installed and authenticated\n- Run `gh auth login` if not already authenticated\n- Token needs `repo` scope for repository creation\n\n## Example Session:\n\n```bash\n$ ab context new\n\nCreate a new repository\n\n  Repository name: my-awesome-project\n  Description (optional): A new project with AllBeads\n  Private repository? [Y/n]: n\n  Organization (leave empty for personal account):\n\nCommon .gitignore templates: Rust, Node, Python, Go, Java\n  .gitignore template: Rust\n\nCommon licenses: MIT, Apache-2.0, GPL-3.0, BSD-3-Clause\n  License: MIT\n\nAllBeads Configuration\n  Initialize beads? [Y/n]: y\n\nAvailable agents: claude, cursor, copilot, aider\n  Agents to configure (comma-separated) [claude]: claude,cursor\n\nSummary\n  Name:        my-awesome-project\n  Visibility:  Public\n  .gitignore:  Rust\n  License:     MIT\n  Beads:       Yes\n  Agents:      claude, cursor\n\n  Create repository? [Y/n]: y\n\nCreating repository on GitHub...\n‚úì Created https://github.com/thrashr888/my-awesome-project\n‚Üí Cloning to /Users/me/Workspace/my-awesome-project...\n‚úì Cloned to /Users/me/Workspace/my-awesome-project\n‚Üí Initializing beads...\n‚úì Beads initialized\n‚Üí Configuring agents...\n‚úì Configured: claude, cursor\n‚Üí Committing configuration...\n‚úì Pushed to GitHub\n\n‚úì Added context 'my-awesome-project' to AllBeads config\n\nRepository Created Successfully\n  Name:   my-awesome-project\n  URL:    https://github.com/thrashr888/my-awesome-project\n  Path:   /Users/me/Workspace/my-awesome-project\n  Beads:  initialized\n  Agents: claude, cursor\n```\n\n## Compared to `ab onboard`:\n\n| Feature | `ab context new` | `ab onboard` |\n|---------|------------------|--------------|\n| Creates GitHub repo | ‚úì | ‚úó |\n| Clones existing repo | ‚úì (after creating) | ‚úì |\n| Initializes beads | ‚úì | ‚úì |\n| Configures agents | ‚úì | ‚úì |\n| Adds to contexts | ‚úì | ‚úì |\n\nUse `ab context new` for brand new projects.\nUse `ab onboard` for existing repositories.\n\n## See also:\n\n- `/onboard` - Onboard an existing repository\n- `/context` - Manage AllBeads contexts\n- `/agents` - Detect and configure AI agents\n",
        "claude-plugin/commands/context.md": "---\ndescription: Manage AllBeads contexts (repositories)\n---\n\nManage the repositories (contexts) that AllBeads tracks.\n\nSubcommands:\n- `allbeads context list` - Show all configured contexts\n- `allbeads context add <path>` - Add a repository as a context\n- `allbeads context add <path> --name <name>` - Add with explicit name\n- `allbeads context remove <name>` - Remove a context\n- `allbeads context new <name>` - Create a new GitHub repository with AllBeads pre-configured\n- `allbeads context onboarding` - Show onboarding status for all contexts\n\nWhen adding a context, AllBeads will:\n1. Detect the repository name from the folder\n2. Find the git remote URL\n3. Determine the authentication strategy (SSH or PAT)\n\nAfter adding, run `allbeads sync <name>` to fetch beads from the remote.\n\n## Creating New Repositories\n\nUse `allbeads context new` to create a brand new GitHub repository:\n\n```bash\n# Interactive mode\nab context new\n\n# With arguments\nab context new myproject --private --description \"My project\"\n```\n\nThis creates the GitHub repo, clones it locally, initializes beads, configures AI agents, and adds it to AllBeads contexts.\n\nSee `/context-new` for detailed usage.\n",
        "claude-plugin/commands/create.md": "---\ndescription: Create a bead in a specific context (cross-repo task handoff)\n---\n\nCreate a new bead (issue/task) in any AllBeads context. This enables cross-repository task handoff - creating work items in other repos for other agents to pick up.\n\n## Usage\n\n```bash\n# Create in a specific context\nab create --context=<context-name> --title=\"<title>\" --type=<type> --priority=<priority>\n\n# Examples\nab create --context=AllBeadsWeb --title=\"Add new API endpoint\" --type=feature --priority=2\nab create --context=AllBeadsApp --title=\"Fix menu bar icon\" --type=bug --priority=1\nab create --context=QDOS --title=\"Implement parser\" --type=task\n```\n\n## Parameters\n\n| Parameter | Required | Description |\n|-----------|----------|-------------|\n| `--context` | Yes | Target context name (e.g., AllBeadsWeb, AllBeadsApp) |\n| `--title` | Yes | Title of the bead |\n| `--type` | No | Type: bug, feature, task, epic, chore (default: task) |\n| `--priority` | No | Priority: P0-P4 or 0-4 (default: P2) |\n\n## Cross-Repo Task Handoff\n\nThis is the primary mechanism for distributing work across the AllBeads ecosystem:\n\n1. **Identify work for another repo**: While working, discover something that belongs elsewhere\n2. **Create the bead**: `ab create --context=AllBeadsWeb --title=\"...\" --type=feature`\n3. **Agent in target repo picks it up**: They run `bd ready` and see the task\n4. **Work flows naturally**: Each repo's agent handles its own work\n\n## Common Handoff Targets\n\n| Context | What goes there |\n|---------|-----------------|\n| `AllBeadsWeb` | Web UI features, API endpoints, dashboard work |\n| `AllBeadsApp` | macOS app features, native UI, menu bar items |\n| `AllBeads` | CLI features, core library, Rust code |\n\n## Workflow Example\n\n```bash\n# Working in AllBeads CLI, realize we need a web endpoint\nab create --context=AllBeadsWeb \\\n  --title=\"Add /api/beads/import endpoint\" \\\n  --type=feature \\\n  --priority=2\n\n# The bead appears in AllBeadsWeb\nab list -C AllBeadsWeb\n\n# Agent in AllBeadsWeb picks it up\ncd ../AllBeadsWeb\nbd ready\nbd update abw-xxx --status=in_progress\n# ... implement ...\nbd close abw-xxx\n```\n\n## See Also\n\n- `/allbeads:ready` - Find work across all contexts\n- `/allbeads:list` - List beads with context filtering\n- `/allbeads:handoff` - Hand off bead to an agent\n",
        "claude-plugin/commands/governance.md": "---\ndescription: Check and enforce governance policies for AI agent adoption\n---\n\nManage governance policies for AI agent adoption across repositories.\n\nSubcommands:\n- `allbeads governance check` - Run policy checks against current repository\n- `allbeads governance status` - View loaded policies and exemptions\n- `allbeads governance violations` - List all policy violations\n- `allbeads governance exempt <repo> <policy> --reason \"...\"` - Exempt a repo\n- `allbeads governance unexempt <repo> <policy>` - Remove exemption\n\nPolicy enforcement levels (HCP Terraform-inspired):\n- **Advisory**: Warn but don't block\n- **SoftMandatory**: Block unless exempted\n- **HardMandatory**: Always block, no exemptions\n\nBuilt-in policy checks:\n- `FileExists` - Required files (README, LICENSE, etc.)\n- `FileExistsAny` - At least one of several files\n- `OnboardingScore` - Minimum onboarding completeness\n- `AgentAllowlist` - Permitted/denied agent types\n- `PatternAbsent` - Ensure patterns don't exist in files\n\nConfigure policies in `.beads/policies.yaml` or `~/.config/allbeads/policies.yaml`.\n",
        "claude-plugin/commands/handoff.md": "---\ndescription: Hand off a bead to an AI agent for implementation\n---\n\nFire-and-forget delegation to AI agents. Launches the agent with full bead context (title, description, dependencies) and moves on.\n\n## Usage\n\n```bash\n# Hand off a specific bead to Claude (default agent)\nab handoff <bead-id>\n\n# Hand off to a specific agent\nab handoff <bead-id> --agent <agent>\n\n# Hand off in an isolated worktree\nab handoff <bead-id> --worktree\n\n# Queue work for a running agent via Agent Mail (instead of spawning new)\nab handoff <bead-id> --queue\nab handoff <bead-id> --queue --agent claude\n\n# Show beads that have been handed off\nab handoff --list\n\n# Show ready beads that could be handed off\nab handoff --ready\n\n# Dry run - see what would happen without launching\nab handoff <bead-id> --dry-run\n\n# Show available agents (detected on system)\nab handoff --agents\n```\n\n## Agent Preferences\n\nOn first use, you'll be prompted to select your preferred agent from the detected installed agents. Your choice is saved to `.beads/config.yaml` and used for subsequent handoffs.\n\nTo override the saved preference, use `--agent`:\n```bash\nab handoff ab-xyz --agent gemini    # Use Gemini instead of preferred\n```\n\n## Supported Agents\n\n### Terminal Agents (CLI)\n- `claude` - Claude Code (default)\n- `opencode` - OpenCode\n- `codex` - OpenAI Codex\n- `gemini` - Gemini CLI\n- `aider` - Aider\n- `cody` - Sourcegraph Cody\n\n### IDE Agents\n- `cursor` - Cursor\n- `kiro` - Kiro (AWS)\n- `antigravity` - Antigravity\n- `copilot` - VS Code Copilot\n\n### Web Agents\n- `jules` - Jules (Google) - opens browser\n- `chatgpt-codex` - ChatGPT Codex - opens browser\n\n## What Happens\n\n1. Bead context is loaded (title, description, dependencies, labels)\n2. A prompt is generated from the bead content with workflow instructions\n3. Bead status is updated to `in_progress`\n4. Handoff is recorded (comment + `handed-off` label)\n5. If `--worktree` is used, a git worktree is created in `.worktrees/`\n6. Agent is launched with the prompt\n   - CLI agents: launched with prompt argument (use `codex exec --full-auto` for non-interactive)\n   - IDE agents: launched with chat command\n   - Web agents: browser opened with deep-link URL\n\n## Agent Workflow (What the Agent Does)\n\nThe handoff prompt instructs the agent to:\n\n1. **Create a branch** for the work: `git checkout -b bead/<id>`\n2. **Do the work** described in the bead\n3. **Commit changes**: `git add -A && git commit -m \"feat(<id>): <description>\"`\n4. **Close the bead**: `bd close <id>` (use `--force` if blocked by an epic)\n5. **Sync and push**: `bd sync && git push -u origin bead/<id>`\n\nThis ensures clean git history and proper bead tracking.\n\n### Sandboxed Agents (Codex)\n\nSome agents run in sandboxes that prevent git operations (e.g., OpenAI Codex with `workspace-write` sandbox). AllBeads handles this automatically:\n\n1. **Pre-creates the branch** before launching (`git checkout -b bead/<id>`)\n2. **Provides simplified workflow prompt** (skip git operations)\n3. **User handles commit/push** after agent completes\n\nThe sandboxed prompt tells the agent:\n- Focus on the work, not git operations\n- The branch already exists\n- Just close the bead when done\n\nAfter a sandboxed agent completes:\n```bash\n# Commit the agent's work\ngit add -A\ngit commit -m \"feat(<bead-id>): <description>\"\n\n# Sync and push\nbd sync\ngit push -u origin bead/<bead-id>\n```\n\n## Queue Mode (--queue)\n\nUse `--queue` to send work to a **running agent** via Agent Mail instead of spawning a new process:\n\n```bash\nab handoff ab-xyz --queue\nab handoff ab-xyz --queue --agent claude\n```\n\nThis is ideal when:\n- An agent is already running (e.g., in another terminal)\n- You want to batch multiple tasks to the same agent\n- The agent supports runtime task intake via mail\n\n**What happens:**\n1. Bead context is loaded\n2. A NOTIFY message is sent via Agent Mail to `{agent}@{context}`\n3. Bead status is updated to `in_progress`\n4. `queued` label is added to the bead\n5. A comment records the queue action\n\nThe running agent checks its mail (either manually via `ab mail inbox` or automatically if running with `--mail-poll`) and picks up the task.\n\n**Difference from normal handoff:**\n| Normal | Queue Mode |\n|--------|------------|\n| Spawns new agent process | Sends mail to existing agent |\n| Agent starts immediately | Agent picks up when ready |\n| One agent per bead | Batched to running agent |\n\n## Worktrees\n\nUse `--worktree` for isolated development:\n```bash\nab handoff ab-xyz --worktree\n```\n\nThis creates a git worktree at `.worktrees/ab-xyz/` with a branch `ab/ab-xyz`. The agent runs in the worktree, keeping your main branch clean. Useful for:\n- Parallel work on multiple beads\n- Risky changes that might need to be discarded\n- Keeping main stable while experimenting\n\n## Environment\n\nThe `AB_ACTIVE_BEAD` environment variable is set to the bead ID when launching CLI agents, allowing the agent to know which bead it's working on.\n\n## Workflow\n\n### Starting Work\n```bash\nab handoff --ready              # See what's available\nab handoff ab-xyz               # Hand off to Claude\nab handoff ab-xyz --agent gemini  # Hand off to Gemini\n```\n\n### Tracking Handed-off Work\n```bash\nab handoff --list               # See what's in progress\nab show ab-xyz                  # View bead details + handoff info\nbd show ab-xyz                  # View raw bead details and comments\n```\n\nHandoff info (agent, time, task URL) is automatically shown when viewing a handed-off bead with `ab show`.\n\n### Completing Work\nAfter the agent finishes:\n```bash\nbd close ab-xyz --reason=\"Implemented feature X\"\nbd sync\ngit push\n```\n\n## Philosophy\n\n\"Hand-off, not ownership\" - We fire and forget. The agent takes over and works asynchronously. We don't poll for status. The work will get done.\n\n## See Also\n\n- `ab ready` - Show unblocked work\n- `ab list --status=in_progress` - All in-progress work\n- `/release` - Ship a new version\n- `specs/SPEC-handoff.md` - Full specification\n",
        "claude-plugin/commands/list.md": "---\ndescription: List beads across all contexts\n---\n\nList beads aggregated from all configured AllBeads contexts.\n\nRun `allbeads list` to show all beads. Supports filtering:\n- `allbeads list --status open` - Filter by status\n- `allbeads list --priority P1` - Filter by priority\n- `allbeads list --context myproject` - Filter by context\n\nPresent results grouped by context when showing multiple repositories.\n",
        "claude-plugin/commands/mail.md": "---\ndescription: Agent Mail for real-time coordination between agents\n---\n\nAgent Mail provides real-time messaging between agents. Use it alongside beads for coordinating work handoffs.\n\n## When to Use Mail vs Beads\n\n| Use Mail | Use Beads |\n|----------|-----------|\n| Real-time notifications | Persistent tasks |\n| Request immediate input | Work that spans sessions |\n| Announce status changes | Trackable deliverables |\n| Coordinate handoffs | Dependencies between work |\n\n**Best practice**: Create a bead for the work AND send mail to notify the receiving agent.\n\n## Commands\n\n```bash\n# Send a message to a context or actor\nab mail send --to AllBeadsWeb \"New feature ready for review\"\nab mail send --to agent@AllBeadsWeb \"Task completed\"\n\n# Send different message types\nab mail send --to AllBeadsWeb --message-type notify \"Build completed\"\nab mail send --to AllBeadsWeb --message-type request \"Please approve deployment\"\nab mail send --to AllBeadsWeb --message-type broadcast \"System maintenance at 5pm\"\n\n# Specify sender\nab mail send --to AllBeadsWeb --from \"build-bot\" \"CI passed\"\n\n# Check inbox\nab mail inbox\n\n# Check unread count\nab mail unread\n\n# Send test messages (for verification)\nab mail test \"Your message here\"\n\n# Mark messages as read\nab mail read <message-id>    # Mark one as read\nab mail read --all           # Mark all as read\n\n# Archive messages\nab mail archive <message-id> # Archive one message\nab mail archive --all        # Archive all read messages\n\n# Delete messages\nab mail delete <message-id>  # Permanently delete\n```\n\n## Agent Handoff Workflow\n\nWhen handing off work to another agent or repo:\n\n### 1. Create the Bead (Persistent Task)\n```bash\nab create --context=AllBeadsWeb --title=\"Implement /api/beads/import\" --type=feature --priority=2\n```\n\n### 2. Send Mail Notification (Real-time Alert)\n```bash\nab mail test \"New task created: Implement /api/beads/import endpoint for CLI sync. See abw-079.\"\n```\n\n### 3. Receiving Agent Picks Up\nThe agent in the target repo:\n```bash\nab mail inbox          # Sees the notification\nbd ready               # Finds the task\nbd update abw-079 --status=in_progress\n```\n\n## Viewing Mail\n\nWhen logged in (`ab login`), mail syncs to the web dashboard:\n- **CLI**: `ab mail inbox`\n- **Web**: https://allbeads.co/dashboard/mail\n- **TUI**: `ab tui` (Tab to Mail view)\n\n## Message Types\n\n| Type | Purpose | Example |\n|------|---------|---------|\n| NOTIFY | Inform about events | \"Build completed successfully\" |\n| REQUEST | Ask for input/approval | \"Approve deployment to production?\" |\n| BROADCAST | Announce to all agents | \"API rate limit reached, pausing\" |\n| LOCK/UNLOCK | File coordination | \"Locking src/auth.rs for refactor\" |\n| HEARTBEAT | Agent status | \"Status: working on ab-123\" |\n\n## Managing Your Inbox\n\nKeep your inbox clean with this workflow:\n\n```bash\n# 1. Check inbox at session start\nab mail inbox\n\n# 2. Process messages, then mark as read\nab mail read --all\n\n# 3. Archive when done\nab mail archive --all\n```\n\n## Best Practices\n\n1. **Always create a bead** for trackable work - mail is ephemeral\n2. **Reference bead IDs** in mail messages for context\n3. **Use mail for urgency** - immediate attention needed\n4. **Check inbox regularly** when starting work sessions\n5. **Send completion notifications** when finishing handed-off work\n6. **Clean up regularly** - archive processed messages to reduce noise\n\n## Integration with TUI\n\nThe TUI dashboard shows both Kanban (beads) and Mail views:\n```bash\nab tui\n# Tab - switch between Kanban and Mail\n# j/k - navigate messages\n# Enter - view details\n# q - quit\n```\n\n## See Also\n\n- `/allbeads:create` - Create beads for cross-repo handoff\n- `/allbeads:handoff` - Full handoff workflow\n- `/allbeads:tui` - Dashboard with mail view\n",
        "claude-plugin/commands/onboard-repo.md": "---\ndescription: Interactive onboarding for a repository into AllBeads\n---\n\nOnboard the current repository (or a specified repository) into the AllBeads ecosystem.\n\nThis command runs an interactive workflow that:\n1. Initializes beads tracking (`bd init`)\n2. Creates a CLAUDE.md file with project guidance\n3. Adds the repository to AllBeads contexts\n4. Optionally runs janitor to discover existing issues\n5. Sets up CI/CD recommendations\n\nUsage:\n```bash\n# Onboard current directory\nallbeads onboard-repo\n\n# Onboard specific directory\nallbeads onboard-repo /path/to/repo\n\n# Non-interactive mode (use defaults)\nallbeads onboard-repo --yes\n\n# Skip specific steps\nallbeads onboard-repo --skip-init      # Skip bd init\nallbeads onboard-repo --skip-claude    # Skip CLAUDE.md creation\nallbeads onboard-repo --skip-context   # Skip adding to contexts\n```\n\n## What gets set up:\n\n### 1. Beads Tracking (.beads/ directory)\n- Runs `bd init` to create the `.beads/` directory\n- Initializes `issues.jsonl` for issue tracking\n- Sets up local SQLite database\n\n### 2. CLAUDE.md\n- Creates a template CLAUDE.md file\n- Includes project overview section\n- Pre-fills common development commands\n- Documents the project structure\n- Provides guidance for AI agents\n\n### 3. AllBeads Context\n- Adds the repository to `~/.config/allbeads/config.yaml`\n- Detects git remote URL automatically\n- Auto-configures authentication strategy (SSH vs HTTPS)\n- Makes the repo visible in `ab context list`\n\n### 4. Optional: Janitor Analysis\n- Scans codebase for potential issues\n- Creates beads for TODO comments\n- Identifies security concerns\n- Detects code smells and technical debt\n\n## After onboarding:\n\nThe repository will be ready for:\n- Issue tracking with `bd create/list/update/close`\n- Multi-context aggregation via `ab list/stats`\n- TUI visualization with `ab tui`\n- Agent coordination with AllBeads Mail\n- Cross-repository dependency tracking\n\nCheck onboarding status:\n```bash\nab context onboarding\n```\n\n## Example session:\n\n```bash\n$ cd ~/projects/my-app\n$ allbeads onboard-repo\n\nüöÄ AllBeads Repository Onboarding\n\nRepository: my-app\nPath: /Users/me/projects/my-app\nRemote: git@github.com:me/my-app.git\n\nüì¶ Step 1: Initialize Beads Tracking\n  Initialize beads tracking in this repository? [Y/n]: y\n  Running: bd init\n  ‚úì Beads initialized successfully\n\nüìù Step 2: Setup CLAUDE.md\n  Create a starter CLAUDE.md file? [Y/n]: y\n  ‚úì Created CLAUDE.md\n  ‚Ñπ  Edit CLAUDE.md to add project-specific guidance\n\nüîó Step 3: Add to AllBeads Contexts\n  Add this repository to AllBeads contexts? [Y/n]: y\n  ‚úì Added to AllBeads contexts as 'my-app'\n\nüìö Next Steps:\n\n1. Create your first issue:\n   cd /Users/me/projects/my-app\n   bd create --title=\"Initial setup\" --type=task --priority=2\n\n2. View your issues in the TUI:\n   ab tui\n\n3. Check onboarding status:\n   ab context onboarding\n\n‚úÖ Onboarding complete!\n```\n\n## Safety Checks\n\nBefore onboarding existing repositories, AllBeads verifies:\n\n1. **Clean working directory** - No uncommitted changes (excludes `.beads/` and `.claude/`)\n2. **Main branch** - Must be on `main` or `master` branch\n\nIf either check fails, onboarding is refused with a clear error message:\n```\nError: Repository has uncommitted changes:\n  M src/main.rs\n  ?? new-file.txt\n\nPlease commit or stash changes before onboarding.\n```\n\n```\nError: Repository is on branch 'feature-x', not main/master.\n\nPlease switch to the main branch before onboarding:\n  git checkout main\n```\n\n## Dependency Direction\n\nWhen onboarding creates beads (epic + tasks):\n- **Epic depends on tasks**: `bd dep add <epic> <task>`\n- Tasks appear as \"ready\" for agents to pick up\n- Epic appears as \"blocked\" until all tasks are done\n\n**Anti-pattern**: Don't make tasks depend on epic (this blocks the tasks!)\n\n## Plugin Configuration\n\nOnboarding auto-enables only core plugins:\n- `beads@beads-marketplace`\n- `allbeads@allbeads-marketplace`\n\nAn informational bead is created suggesting other available marketplace plugins for the user to review and enable manually.\n\n## See also:\n\n- `/context` - Manage AllBeads contexts\n- `/stats` - View aggregated statistics\n- `/tui` - Launch the AllBeads dashboard\n- `/handoff` - Hand off onboarding tasks to agents\n",
        "claude-plugin/commands/prime.md": "---\ndescription: Prime agent memory with project context\n---\n\nLoad project context into agent memory for effective work.\n\n## Usage\n\n```bash\nab prime                    # Prime with all contexts\nab prime -C <context>       # Prime specific context\n```\n\n## What Gets Loaded\n\n1. **Project Overview**\n   - Active contexts and paths\n   - Repository status (beads, agents)\n\n2. **Ready Work**\n   - Unblocked beads ready to implement\n   - Priority-sorted task list\n\n3. **Recent Activity**\n   - Recently modified beads\n   - Recent commits\n\n4. **Statistics**\n   - Open/closed/blocked counts\n   - Work distribution\n\n## When to Use\n\n- Start of new session\n- After conversation compaction\n- Switching between contexts\n- Before starting complex work\n\n## Output\n\n```\n# AllBeads Context Priming\n\n## Active Contexts\n- AllBeads: /Users/me/Workspace/AllBeads (174 beads)\n- rookery: /Users/me/Workspace/rookery (23 beads)\n\n## Ready Work (5 tasks)\n1. ab-xyz [P1] - Implement feature X\n2. rk-123 [P2] - Fix bug in auth\n\n## Recent Activity\n- 3 beads closed today\n- 2 beads created today\n\n## Statistics\n- Open: 45, In Progress: 3, Blocked: 2, Closed: 124\n```\n\n## See Also\n\n- `/ready` - Just show ready work\n- `/stats` - Just show statistics\n- `/list` - Full bead listing\n",
        "claude-plugin/commands/project-new.md": "---\ndescription: Plan a new project - create repo and beads, but don't code yet\n---\n\nCreate a new GitHub repository with AllBeads and plan the work using beads issues. **Does not write code** - just sets up the project structure and creates the implementation plan.\n\n## Workflow\n\n1. **Gather Requirements** - Discuss the project idea with the user\n2. **Create Spec** - Write a detailed specification document\n3. **Create Repo** - Use `ab context new` to create GitHub repo\n4. **Create README** - Add README.md with project overview and status\n5. **Create Beads** - Create epic issues with specs embedded in descriptions\n6. **STOP** - Do not write implementation code\n\nThe implementation will be handled later by:\n- User manually starting work\n- `/handoff` workflow (ab-vlq) triggering agent work\n- Another session picking up from `bd ready`\n\n## Why This Workflow?\n\n- **Separation of Concerns** - Planning and implementation are distinct phases\n- **Better Handoffs** - Beads contain all context needed for implementation\n- **Interruptible** - Work can be picked up across sessions\n- **Agent-Friendly** - Any agent can implement from the beads\n\n## Usage\n\nWhen the user describes a new project idea:\n\n1. Ask clarifying questions about requirements\n2. Write a spec document (can be in AllBeads/specs/ or in the new repo)\n3. Create the repo:\n   ```bash\n   ab context new <project-name> --private --gitignore <lang> --license <license>\n   ```\n4. Create README.md with:\n   - Project overview\n   - Status: \"Planning Phase\"\n   - Planned features table\n   - Example usage (planned)\n5. Create beads epics for each phase:\n   ```bash\n   bd create --title=\"[Phase 1] ...\" --type=epic --priority=1\n   ```\n6. Add detailed descriptions to beads (specs, requirements, acceptance criteria)\n\n## What NOT to Do\n\n- Do NOT create source code files\n- Do NOT set up build/test infrastructure\n- Do NOT create CI/CD pipelines\n- Do NOT implement any features\n\nAll implementation should wait for the handoff workflow or explicit user request.\n\n## Example Session\n\n```\nUser: I want to build a CLI tool that converts markdown to PDF\n\nAgent: Great idea! Let me ask some questions:\n- What language? (Go, Rust, Python?)\n- Should it support themes/styles?\n- Any specific PDF features (TOC, headers/footers)?\n\nUser: Go, yes to themes, and TOC would be nice\n\nAgent: Perfect. Let me plan this project...\n\n1. Creating spec document...\n2. Creating repo with `ab context new md2pdf --private --gitignore Go --license MIT`\n3. Adding README.md with project overview\n4. Creating beads:\n   - [Phase 1] Core CLI structure\n   - [Phase 2] Markdown parsing\n   - [Phase 3] PDF generation\n   - [Phase 4] Theme support\n   - [Phase 5] TOC generation\n\nProject planned! The beads contain full specs. Implementation can begin via:\n- `bd ready` to see available work\n- `/handoff` to trigger agent implementation\n- Or start manually: `bd update md2pdf-xxx --status=in_progress`\n```\n\n## See Also\n\n- `/context-new` - Just create a repo (no planning)\n- `/handoff` - Trigger agent to work on planned beads\n- `bd ready` - See what's ready to implement",
        "claude-plugin/commands/ready.md": "---\ndescription: Find ready-to-work tasks across all contexts\n---\n\nFind beads that are ready to work on (no blocking dependencies) across all AllBeads contexts.\n\nRun `allbeads ready` to get a list of unblocked issues from all repositories. Present them showing:\n- Bead ID\n- Title\n- Priority\n- Context (repository)\n\nIf there are ready tasks, ask the user which one they'd like to work on.\n\nIf there are no ready tasks, suggest:\n- Check `/allbeads:blocked` to see what's blocking work\n- Check individual repos with `bd ready`\n",
        "claude-plugin/commands/scan.md": "---\ndescription: Scan GitHub repositories for AI agent onboarding opportunities\n---\n\nScan GitHub user or organization repositories to identify onboarding opportunities.\n\nSubcommands:\n- `allbeads scan user <username>` - Scan a user's repositories\n- `allbeads scan org <org-name>` - Scan an organization's repositories\n- `allbeads scan compare` - Compare scanned repos with managed contexts\n\nOptions:\n- `--language <lang>` - Filter by programming language\n- `--min-stars <n>` - Minimum star count\n- `--include-archived` - Include archived repositories\n- `--include-forks` - Include forked repositories\n\nThe scanner detects 14 AI agent types:\n- Claude Code, GitHub Copilot, Cursor, Aider, Kiro\n- OpenAI Codex, Google Gemini, Amazon CodeWhisperer\n- Tabnine, Codeium, Sourcegraph Cody, Replit AI\n- JetBrains AI, Windsurf\n\nEach repo is assigned an onboarding priority (High, Medium, Low, Skip) based on:\n- Number of stars and recent activity\n- Existing agent configurations\n- Language and project type\n\nRequires `GITHUB_TOKEN` environment variable for API access.\n",
        "claude-plugin/commands/show.md": "---\ndescription: Show detailed information about a bead\n---\n\nShow detailed information about a specific bead.\n\nRun `allbeads show <bead-id>` to display:\n- Full title and description\n- Status and priority\n- Context (repository)\n- Dependencies (blocks/blocked-by)\n- Creation and update timestamps\n- Comments (if any)\n\nThis provides complete context for understanding a piece of work, including cross-repo relationships.\n",
        "claude-plugin/commands/stats.md": "---\ndescription: Show aggregated statistics across all contexts\n---\n\nDisplay statistics aggregated across all AllBeads contexts.\n\nRun `allbeads stats` to retrieve project metrics and present them clearly:\n- Total beads by status (open, in_progress, blocked, closed)\n- Breakdown by context (repository)\n- Ready-to-work count\n- Cache status\n\nSuggest actions based on the stats:\n- High number of blocked issues? Run `/allbeads:blocked` to investigate\n- No in_progress work? Run `/allbeads:ready` to find tasks\n- Stale cache? Run `allbeads sync --all` to refresh\n",
        "claude-plugin/commands/sync.md": "---\ndescription: Synchronize contexts with git remotes\n---\n\nSynchronize AllBeads contexts with their git remotes.\n\nCommands:\n- `allbeads sync` - Sync the AllBeads config (if in git)\n- `allbeads sync --all` - Sync all context beads\n- `allbeads sync <context>` - Sync a specific context\n- `allbeads sync --status` - Check sync status without syncing\n\nThis fetches the latest beads from each repository's remote and updates the local cache.\n\nRun this:\n- At the start of a session to get latest state\n- After making changes in multiple repos\n- Before generating cross-repo reports\n",
        "claude-plugin/commands/tui.md": "---\ndescription: Launch interactive TUI dashboard\n---\n\nLaunch the AllBeads terminal user interface for interactive navigation.\n\nRun `allbeads tui` to open the dashboard with:\n- **Kanban view**: Visual board with Open, In Progress, and Closed columns\n- **Mail view**: Agent messages and notifications\n\nKeyboard shortcuts:\n- `Tab` - Switch between Kanban and Mail views\n- `j/k` or `Up/Down` - Move up/down\n- `h/l` or `Left/Right` - Switch columns (Kanban)\n- `Enter` - View details\n- `Esc` - Back\n- `q` - Quit\n\nThis provides a visual overview of work across all contexts.\n",
        "claude-plugin/commands/workflow.md": "---\ndescription: Show the AllBeads workflow guide\n---\n\n# AllBeads Workflow Guide\n\n## The Big Picture\n\n```\n[GitHub Repos] ‚Üí [ab scan] ‚Üí [ab onboard] ‚Üí [AllBeads Contexts]\n                                                    ‚Üì\n[ab context new] ‚Üí [New Repo] ‚Üí [bd init] ‚Üí [Managed Context]\n                                                    ‚Üì\n[Planning] ‚Üí [bd create epics] ‚Üí [Add specs] ‚Üí [Ready for work]\n                                                    ‚Üì\n[ab ready] ‚Üí [Claim task] ‚Üí [Implement] ‚Üí [ab close] ‚Üí [Push]\n```\n\n## Workflow Phases\n\n### 1. Discovery\nFind repos to manage:\n```bash\nab scan github <username>      # Your repos\nab scan github <org>           # Org repos\nab context list               # Already managed\n```\n\n### 2. Onboarding\nBring repos into AllBeads:\n```bash\n# Existing repo\nab onboard <repo-url>\n\n# New repo\nab context new <name> --private\n```\n\n### 3. Planning\nCreate work items with specs:\n```bash\nbd create --title=\"...\" --type=epic\nbd comments add <id> \"<spec>\"\n```\n\n### 4. Execution\nComplete the work:\n```bash\nab ready                      # Find work\nab update <id> --status=in_progress\n# ... implement ...\nab close <id>\ngit push\n```\n\n### 5. Governance\nMaintain quality:\n```bash\nab governance check           # Policy compliance\nab agents list               # Agent coverage\nab stats                     # Health metrics\n```\n\n## Key Commands by Phase\n\n| Phase | Command | Purpose |\n|-------|---------|---------|\n| Discovery | `ab scan github` | Find repos |\n| Onboarding | `ab onboard` | Add to AllBeads |\n| Planning | `ab context new` | Create new repo |\n| Planning | `bd create` | Create work items |\n| Execution | `ab ready` | Find work |\n| Execution | `ab close` | Complete work |\n| Governance | `ab governance check` | Verify policies |\n\n## Session Protocol\n\nEvery session should:\n1. `ab prime` - Load context\n2. `ab ready` - Find work\n3. Work on tasks\n4. `bd sync` - Save beads\n5. `git push` - Push changes\n\n## See Also\n\n- `AGENTS.md` - Quick agent reference\n- `CLAUDE.md` - Full project guide\n- `/prime` - Context priming\n- `/ready` - Ready work\n",
        "claude-plugin/skills/allbeads/skill.md": "---\nname: allbeads\ndescription: >\n  Multi-repo orchestration for AI agent workflows. Aggregate beads across\n  repositories, manage contexts, and coordinate distributed work across\n  microservices and polyrepo architectures.\nallowed-tools: \"Read,Bash(allbeads:*)\"\nversion: \"0.2.1\"\nauthor: \"Paul Thrasher <https://github.com/thrashr888>\"\nlicense: \"MIT\"\n---\n\n# AllBeads - Multi-Repo Agent Orchestration\n\nAllBeads implements the \"Boss Repository\" pattern - a control plane that federates issue tracking (beads) across multiple git repositories, enabling AI agents to coordinate work across distributed microservices.\n\n## AllBeads vs bd (beads)\n\n| allbeads (multi-repo) | bd (single-repo) |\n|----------------------|------------------|\n| Aggregates across repos | Single repository |\n| Context-based filtering | Local .beads only |\n| Cross-repo dependencies | Local dependencies |\n| Federated dashboard | Single project view |\n\n**Decision test**: \"Does my work span multiple repositories?\" ‚Üí YES = allbeads\n\n**When to use allbeads**:\n- Work spans multiple microservices/repos\n- Need unified view across polyrepo architecture\n- Cross-repository dependencies exist\n- Managing work across team contexts (@work, @personal)\n- Enterprise integration (JIRA, GitHub Issues)\n\n**When to use bd**:\n- Single repository work\n- Local issue tracking\n- No cross-repo dependencies needed\n\n## Prerequisites\n\n```bash\nallbeads --version  # Requires v0.2.0+\n```\n\n- **allbeads CLI** installed (`brew install thrashr888/allbeads/allbeads`)\n- **bd CLI** installed for underlying beads operations\n- **Contexts configured**: `allbeads context add .`\n\n## Session Start Checklist\n\nWhen starting a work session, check for handoffs from other agents:\n\n```bash\nab mail inbox        # Check for messages from other agents\nab ready             # See what work is available\nbd ready             # Local repo ready tasks\n```\n\n**Why check mail?** Other agents may have completed work and handed off follow-up tasks. The mail often contains context about what was done and what's expected next.\n\n## Core Commands\n\n### Viewing Aggregated Work\n\n```bash\n# Show statistics across all contexts\nallbeads stats\n\n# List all beads across contexts\nallbeads list\n\n# Filter by status\nallbeads list --status open\n\n# Show ready-to-work beads (no blockers)\nallbeads ready\n\n# Show blocked beads\nallbeads blocked\n\n# Search across all contexts\nallbeads search \"query\"\n```\n\n### Context Management\n\n```bash\n# Add current repo as context\nallbeads context add .\n\n# Add with explicit name\nallbeads context add /path/to/repo --name myproject\n\n# List contexts\nallbeads context list\n\n# Remove context\nallbeads context remove myproject\n```\n\n### Synchronization\n\n```bash\n# Sync all contexts with remotes\nallbeads sync --all\n\n# Check sync status\nallbeads sync --status\n\n# Sync specific context\nallbeads sync mycontext\n```\n\n### Interactive Dashboard\n\n```bash\n# Launch TUI (Kanban + Mail views)\nallbeads tui\n\n# Keyboard shortcuts:\n#   Tab           - Switch views\n#   j/k or Up/Down - Navigate\n#   Enter         - View details\n#   q             - Quit\n```\n\n## Key Concepts\n\n### Contexts\nA context is a git repository that AllBeads tracks. Each context has its own `.beads/` directory and can be filtered independently or viewed in aggregate.\n\n### Shadow Beads\nWhen working with cross-repo Epics, AllBeads creates \"Shadow Beads\" in the Boss repository that point to native beads in member repositories, enabling dependency tracking across repo boundaries.\n\n### Federated Graph\nAllBeads maintains a unified dependency graph across all contexts, allowing you to see how work in one repository blocks or enables work in another.\n\n## Cross-Repo Task Handoff\n\nAllBeads enables seamless task handoff between repositories using **beads** (persistent tasks) and **mail** (real-time notifications).\n\n### Beads + Mail: The Complete Handoff\n\n```bash\n# 1. Create the persistent task (bead)\nab create --context=AllBeadsWeb --title=\"Add /api/beads/import endpoint\" --type=feature\n\n# 2. Send real-time notification (mail)\nab mail send --to AllBeadsWeb \"New task: Add /api/beads/import endpoint. See bd ready.\"\n\n# 3. Target agent picks up\n# In AllBeadsWeb:\nab mail inbox    # Sees notification\nbd ready         # Finds task\n```\n\n### When to Use Each\n\n| Use Beads | Use Mail |\n|-----------|----------|\n| Trackable tasks | Real-time alerts |\n| Work spanning sessions | Immediate attention needed |\n| Dependencies | Status updates |\n| Persistent record | Coordination messages |\n\n**Best practice**: Create a bead AND send mail for important handoffs.\n\n### Common Handoff Targets\n\n| Context | Purpose |\n|---------|---------|\n| `AllBeadsWeb` | Web UI, API endpoints, dashboard |\n| `AllBeadsApp` | macOS native app, menu bar |\n| `AllBeads` | CLI, core Rust library |\n\n## Agent Mail\n\nAgent Mail enables real-time communication between agents across repositories.\n\n```bash\n# Send a message to another context/agent\nab mail send --to AllBeadsWeb \"Feature ready for review\"\nab mail send --to AllBeadsWeb --message-type request \"Approve deployment?\"\n\n# Check your inbox\nab mail inbox\n\n# Check unread count\nab mail unread\n\n# Send test messages\nab mail test \"Build completed for ab-123. Ready for review.\"\n```\n\n### Mail in the Dashboard\n\nView mail in multiple ways:\n- **CLI**: `ab mail inbox`\n- **TUI**: `ab tui` then Tab to Mail view\n- **Web**: https://allbeads.co/dashboard/mail (when logged in)\n\n### Message Types\n\n| Type | Use For |\n|------|---------|\n| **NOTIFY** | Status updates, completions, FYIs |\n| **REQUEST** | Approval needed, input required |\n| **BROADCAST** | Announcements to all agents |\n| **LOCK/UNLOCK** | File coordination |\n| **HEARTBEAT** | Agent liveness signals |\n\n### Managing Your Inbox\n\n```bash\n# Mark messages as read\nab mail read <message-id>    # Mark specific message\nab mail read --all           # Mark all as read\n\n# Archive old messages\nab mail archive <message-id> # Archive specific message\nab mail archive --all        # Archive all read messages\n\n# Delete messages\nab mail delete <message-id>  # Permanently delete\n```\n\n**Workflow**: Check inbox ‚Üí Process messages ‚Üí Mark read ‚Üí Archive when done.\n\n### Mail Best Practices\n\n1. **Reference bead IDs** in messages for context\n2. **Check inbox** when starting work sessions\n3. **Send completion notices** after finishing handed-off work\n4. **Use mail for urgency**, beads for tracking\n5. **Clean up regularly** with `ab mail read --all && ab mail archive --all`\n\n## Common Workflows\n\n**Starting cross-repo work:**\n```bash\nallbeads ready           # Find available work across all repos\nallbeads show <id>       # Review issue details\nbd update <id> --status=in_progress  # Claim it (in the local repo)\n```\n\n**Checking project health:**\n```bash\nallbeads stats           # Overview across all contexts\nallbeads blocked         # Find blocked issues\nallbeads sync --status   # Check sync state\n```\n\n**Adding a new repository:**\n```bash\ncd /path/to/new-repo\nallbeads context add . --name new-project\nallbeads sync new-project\n```\n\n**Creating a brand new project:**\n```bash\nab context new myproject --private --gitignore Go --license MIT\n```\nThis creates GitHub repo, clones locally, initializes beads, and adds to AllBeads.\n\n**Planning a project (no code yet):**\n```bash\nab context new myproject --private\nbd create --title=\"[Phase 1] ...\" --type=epic\nbd comments add <id> \"<spec details>\"\n# STOP - let handoff workflow implement\n```\n\n## Golden Workflow: Onboard ‚Üí Handoff ‚Üí Complete\n\nThe recommended workflow for managing work across repositories:\n\n### 1. Onboard Repositories\n```bash\n# Onboard existing repo (safety checks: clean git, main branch)\nab onboard /path/to/repo\n\n# Creates: .beads/, .claude/settings.json, adds to AllBeads config\n# Creates: Epic + task beads for onboarding work\n```\n\n### 2. Find Ready Work\n```bash\nab ready                 # Show unblocked tasks across all repos\nab show <bead-id>        # Review task details\n```\n\n### 3. Hand Off to Agent\n```bash\n# Hand off to your preferred agent (spawns new process)\nab handoff <bead-id>\n\n# Or specify agent explicitly\nab handoff <bead-id> --agent codex\nab handoff <bead-id> --agent gemini\n\n# Queue to a running agent via Agent Mail (no new process)\nab handoff <bead-id> --queue\nab handoff <bead-id> --queue --agent claude\n```\n\n### 4. Agent Completes Work\nThe agent:\n1. Creates branch (or uses pre-created for sandboxed agents)\n2. Does the work\n3. Closes the bead: `bd close <bead-id>`\n\n### 5. Commit and Push (if sandboxed agent)\nFor sandboxed agents like Codex that can't do git operations:\n```bash\ngit add -A\ngit commit -m \"feat(<bead-id>): <description>\"\nbd sync\ngit push -u origin bead/<bead-id>\n```\n\n### 6. Repeat\n```bash\nab ready                 # Find next task\nab handoff <bead-id>     # Hand off\n```\n\n## Key Learnings\n\n### Onboarding\n- **Safety checks**: Clean git workspace, main/master branch required\n- **Dependency direction**: Epic depends on tasks (tasks ready, epic blocked)\n- **Plugins**: Only beads + allbeads auto-enabled\n\n### Handoff\n- **Sandboxed agents**: Codex can't write to `.git/` - branch pre-created\n- **Codex command**: Uses `codex exec --full-auto` for non-interactive mode\n- **After sandboxed agent**: User commits and pushes the work\n- **Queue mode (`--queue`)**: Sends work via Agent Mail to a running agent instead of spawning new process\n\n## Agents\n\nAllBeads provides specialized agents:\n\n| Agent | Purpose |\n|-------|---------|\n| **task-agent** | Autonomous task completion across contexts |\n| **governance-agent** | Policy enforcement and compliance |\n| **planning-agent** | Project planning without implementation |\n| **onboarding-agent** | Repository onboarding assistance |\n\n## Commands Reference\n\n| Command | Purpose |\n|---------|---------|\n| `/create` | Create bead in any context (cross-repo handoff) |\n| `/mail` | Agent mail for real-time coordination |\n| `/ready` | Show unblocked work |\n| `/list` | List all beads |\n| `/show` | Show bead details |\n| `/stats` | Aggregated statistics |\n| `/sync` | Sync with remotes |\n| `/context` | Manage contexts |\n| `/context-new` | Create new GitHub repo |\n| `/project-new` | Plan new project (no code) |\n| `/handoff` | Hand off to implementation |\n| `/workflow` | Workflow guide |\n| `/prime` | Prime agent context |\n| `/scan` | Scan GitHub for repos |\n| `/governance` | Check policies |\n| `/agents` | Manage AI agents |\n| `/onboard-repo` | Onboard repository |\n| `/blocked` | Show blocked work |\n| `/tui` | Launch dashboard |\n\n## Quick Reference\n\n```bash\n# Discovery\nab scan github <user>         # Find repos\n\n# Onboarding\nab onboard <url>              # Onboard existing\nab context new <name>         # Create new\n\n# Work\nab ready                      # Find work\nab update <id> --status=...   # Update status\nab close <id>                 # Complete\n\n# Cross-Repo Handoff\nab create --context=AllBeadsWeb --title=\"...\" --type=feature\nab mail send --to AllBeadsWeb \"New task: see bd ready\"\n\n# Mail\nab mail send --to <context> \"message\"  # Send to context/agent\nab mail inbox                 # Check messages\nab mail unread                # Unread count\n\n# Sync\nab sync --all                 # Sync everything\nbd sync                       # Sync current repo\n\n# Governance\nab governance check           # Check policies\nab agents list               # List agents\n```\n\n## See Also\n\n- `AGENTS.md` - Quick reference for agents\n- `CLAUDE.md` - Full project guide\n- `specs/PRD-00.md` - Architecture specification\n"
      },
      "plugins": [
        {
          "name": "allbeads",
          "source": "./claude-plugin",
          "description": "Multi-repo orchestration for AI agent workflows. Aggregate beads across repositories, manage contexts, and coordinate distributed work.",
          "version": "0.2.2",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add thrashr888/AllBeads",
            "/plugin install allbeads@allbeads-marketplace"
          ]
        }
      ]
    }
  ]
}