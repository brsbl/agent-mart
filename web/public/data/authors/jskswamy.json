{
  "author": {
    "id": "jskswamy",
    "display_name": "Krishnaswamy Subramanian",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/232449?u=20d3e87f7f2f7d71159838603a5b9d2cfad2f934&v=4",
    "url": "https://github.com/jskswamy",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 6,
      "total_commands": 13,
      "total_skills": 2,
      "total_stars": 1,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "jskswamy-plugins",
      "version": null,
      "description": "A curated collection of Claude Code plugins",
      "owner_info": {
        "name": "Krishnaswamy Subramanian",
        "email": "jskswamy@gmail.com"
      },
      "keywords": [],
      "repo_full_name": "jskswamy/claude-plugins",
      "repo_url": "https://github.com/jskswamy/claude-plugins",
      "repo_description": "A curated collection of Claude Code plugins focused on developer workflows, code generation, and productivity.",
      "homepage": null,
      "signals": {
        "stars": 1,
        "forks": 0,
        "pushed_at": "2026-01-29T10:11:49Z",
        "created_at": "2026-01-11T08:00:02Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 3727
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devenv",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devenv/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devenv/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 422
        },
        {
          "path": "plugins/devenv/README.md",
          "type": "blob",
          "size": 8287
        },
        {
          "path": "plugins/devenv/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devenv/commands/devenv.md",
          "type": "blob",
          "size": 27290
        },
        {
          "path": "plugins/devenv/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devenv/hooks/hooks.json",
          "type": "blob",
          "size": 850
        },
        {
          "path": "plugins/devenv/hooks/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devenv/hooks/scripts/deadnix.sh",
          "type": "blob",
          "size": 718
        },
        {
          "path": "plugins/devenv/hooks/scripts/nixfmt.sh",
          "type": "blob",
          "size": 617
        },
        {
          "path": "plugins/devenv/hooks/scripts/statix.sh",
          "type": "blob",
          "size": 611
        },
        {
          "path": "plugins/git-commit",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/git-commit/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/git-commit/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 458
        },
        {
          "path": "plugins/git-commit/README.md",
          "type": "blob",
          "size": 8697
        },
        {
          "path": "plugins/git-commit/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/git-commit/commands/commit.md",
          "type": "blob",
          "size": 21415
        },
        {
          "path": "plugins/git-commit/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/git-commit/hooks/hooks.json",
          "type": "blob",
          "size": 580
        },
        {
          "path": "plugins/git-commit/hooks/intercept-bash-commit.md",
          "type": "blob",
          "size": 2376
        },
        {
          "path": "plugins/git-commit/hooks/intercept-mcp-commit.md",
          "type": "blob",
          "size": 1448
        },
        {
          "path": "plugins/git-commit/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/git-commit/skills/commit-style.md",
          "type": "blob",
          "size": 3129
        },
        {
          "path": "plugins/git-commit/skills/commit.md",
          "type": "blob",
          "size": 4185
        },
        {
          "path": "plugins/jot",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/jot/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/jot/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 568
        },
        {
          "path": "plugins/jot/README.md",
          "type": "blob",
          "size": 8474
        },
        {
          "path": "plugins/jot/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/jot/agents/capture.md",
          "type": "blob",
          "size": 9415
        },
        {
          "path": "plugins/jot/agents/content-extractor.md",
          "type": "blob",
          "size": 5868
        },
        {
          "path": "plugins/jot/agents/learning-tutor.md",
          "type": "blob",
          "size": 14307
        },
        {
          "path": "plugins/jot/agents/quick-capture.md",
          "type": "blob",
          "size": 11919
        },
        {
          "path": "plugins/jot/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/jot/commands/capture.md",
          "type": "blob",
          "size": 9717
        },
        {
          "path": "plugins/jot/commands/teach.md",
          "type": "blob",
          "size": 6499
        },
        {
          "path": "plugins/jot/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/jot/skills/sketch-from-capture.md",
          "type": "blob",
          "size": 3404
        },
        {
          "path": "plugins/sketch-note",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/sketch-note/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/sketch-note/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 409
        },
        {
          "path": "plugins/sketch-note/README.md",
          "type": "blob",
          "size": 5704
        },
        {
          "path": "plugins/sketch-note/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/sketch-note/agents/sketch.md",
          "type": "blob",
          "size": 6795
        },
        {
          "path": "plugins/sketch-note/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/sketch-note/commands/sketch.md",
          "type": "blob",
          "size": 25867
        },
        {
          "path": "plugins/sketch-note/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/sketch-note/skills/capture-for-sketch.md",
          "type": "blob",
          "size": 4760
        },
        {
          "path": "plugins/sketch-note/skills/excalidraw-format",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/sketch-note/skills/excalidraw-format/SKILL.md",
          "type": "blob",
          "size": 8609
        },
        {
          "path": "plugins/task-decomposer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/task-decomposer/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/task-decomposer/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 391
        },
        {
          "path": "plugins/task-decomposer/README.md",
          "type": "blob",
          "size": 11975
        },
        {
          "path": "plugins/task-decomposer/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/task-decomposer/agents/issue-writer.md",
          "type": "blob",
          "size": 4170
        },
        {
          "path": "plugins/task-decomposer/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/task-decomposer/commands/backlog.md",
          "type": "blob",
          "size": 6971
        },
        {
          "path": "plugins/task-decomposer/commands/deps.md",
          "type": "blob",
          "size": 7625
        },
        {
          "path": "plugins/task-decomposer/commands/epic.md",
          "type": "blob",
          "size": 7043
        },
        {
          "path": "plugins/task-decomposer/commands/park.md",
          "type": "blob",
          "size": 4491
        },
        {
          "path": "plugins/task-decomposer/commands/parked.md",
          "type": "blob",
          "size": 6577
        },
        {
          "path": "plugins/task-decomposer/commands/plan.md",
          "type": "blob",
          "size": 6121
        },
        {
          "path": "plugins/task-decomposer/commands/task.md",
          "type": "blob",
          "size": 6977
        },
        {
          "path": "plugins/task-decomposer/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/task-decomposer/hooks/review-after-commit.md",
          "type": "blob",
          "size": 2870
        },
        {
          "path": "plugins/task-decomposer/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/task-decomposer/skills/decompose.md",
          "type": "blob",
          "size": 5210
        },
        {
          "path": "plugins/task-decomposer/skills/park-idea.md",
          "type": "blob",
          "size": 3081
        },
        {
          "path": "plugins/task-decomposer/skills/review-parked.md",
          "type": "blob",
          "size": 2516
        },
        {
          "path": "plugins/task-decomposer/skills/task-commit.md",
          "type": "blob",
          "size": 4017
        },
        {
          "path": "plugins/task-decomposer/skills/understand.md",
          "type": "blob",
          "size": 7364
        },
        {
          "path": "plugins/typst-notes",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/typst-notes/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/typst-notes/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 251
        },
        {
          "path": "plugins/typst-notes/README.md",
          "type": "blob",
          "size": 3074
        },
        {
          "path": "plugins/typst-notes/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/typst-notes/agents/content-analyzer.md",
          "type": "blob",
          "size": 4690
        },
        {
          "path": "plugins/typst-notes/agents/typst-generator.md",
          "type": "blob",
          "size": 6005
        },
        {
          "path": "plugins/typst-notes/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/typst-notes/commands/publish.md",
          "type": "blob",
          "size": 6635
        },
        {
          "path": "plugins/typst-notes/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/typst-notes/skills/infographics.md",
          "type": "blob",
          "size": 7310
        },
        {
          "path": "plugins/typst-notes/skills/jot-to-publish.md",
          "type": "blob",
          "size": 5083
        },
        {
          "path": "plugins/typst-notes/skills/typst-format",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/typst-notes/skills/typst-format/SKILL.md",
          "type": "blob",
          "size": 7611
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"jskswamy-plugins\",\n  \"owner\": {\n    \"name\": \"Krishnaswamy Subramanian\",\n    \"email\": \"jskswamy@gmail.com\"\n  },\n  \"metadata\": {\n    \"description\": \"A curated collection of Claude Code plugins\",\n    \"version\": \"1.1.6\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"devenv\",\n      \"description\": \"Initialize and manage Nix flake development environments with auto-detection and security tooling\",\n      \"version\": \"1.3.1\",\n      \"author\": {\n        \"name\": \"Krishnaswamy Subramanian\"\n      },\n      \"source\": \"./plugins/devenv\",\n      \"category\": \"development\",\n      \"tags\": [\n        \"nix\",\n        \"flake\",\n        \"devenv\",\n        \"development\",\n        \"environment\",\n        \"pre-commit\",\n        \"gitleaks\",\n        \"security\",\n        \"direnv\",\n        \"direnv-instant\"\n      ]\n    },\n    {\n      \"name\": \"git-commit\",\n      \"description\": \"Generate intelligent git commit messages with classic or conventional commit style support, strict atomic commit validation, and session context awareness\",\n      \"version\": \"1.1.1\",\n      \"author\": {\n        \"name\": \"Krishnaswamy Subramanian\"\n      },\n      \"source\": \"./plugins/git-commit\",\n      \"category\": \"git\",\n      \"tags\": [\n        \"git\",\n        \"commit\",\n        \"classic-commits\",\n        \"conventional-commits\",\n        \"atomic-commits\",\n        \"pair-programming\",\n        \"session-context\"\n      ]\n    },\n    {\n      \"name\": \"jot\",\n      \"description\": \"Quick, low-friction capture of notes, tasks, ideas, session summaries, tech radar blips, and Feynman-style teaching notes with Obsidian-style auto-linking\",\n      \"version\": \"1.4.1\",\n      \"author\": {\n        \"name\": \"Krishnaswamy Subramanian\"\n      },\n      \"source\": \"./plugins/jot\",\n      \"category\": \"productivity\",\n      \"tags\": [\n        \"capture\",\n        \"notes\",\n        \"tasks\",\n        \"ideas\",\n        \"radar\",\n        \"blips\",\n        \"knowledge-management\",\n        \"obsidian\",\n        \"wikilinks\",\n        \"gtd\",\n        \"productivity\",\n        \"learning\",\n        \"feynman\",\n        \"teach\",\n        \"teaching-notes\"\n      ]\n    },\n    {\n      \"name\": \"sketch-note\",\n      \"description\": \"Generate visual sketch notes in Excalidraw format from conversations, code architecture, or custom content\",\n      \"version\": \"1.2.1\",\n      \"author\": {\n        \"name\": \"Krishnaswamy Subramanian\"\n      },\n      \"source\": \"./plugins/sketch-note\",\n      \"category\": \"visualization\",\n      \"tags\": [\n        \"sketch\",\n        \"excalidraw\",\n        \"diagram\",\n        \"visualization\",\n        \"architecture\",\n        \"notes\",\n        \"hand-drawn\",\n        \"mind-map\",\n        \"flowchart\"\n      ]\n    },\n    {\n      \"name\": \"typst-notes\",\n      \"description\": \"Generate beautiful PDF/HTML shareable notes using Typst with 7 professional templates, infographics, and modern typography\",\n      \"version\": \"1.0.2\",\n      \"author\": {\n        \"name\": \"Krishnaswamy Subramanian\"\n      },\n      \"source\": \"./plugins/typst-notes\",\n      \"category\": \"productivity\",\n      \"tags\": [\n        \"typst\",\n        \"pdf\",\n        \"html\",\n        \"notes\",\n        \"templates\",\n        \"publish\",\n        \"infographics\"\n      ]\n    },\n    {\n      \"name\": \"task-decomposer\",\n      \"description\": \"Transform complex tasks into structured beads issues with proper dependencies, capture ideas without breaking flow, and create rich commit messages\",\n      \"version\": \"1.2.0\",\n      \"author\": {\n        \"name\": \"Krishnaswamy Subramanian\"\n      },\n      \"source\": \"./plugins/task-decomposer\",\n      \"category\": \"workflow\",\n      \"tags\": [\n        \"beads\",\n        \"planning\",\n        \"decomposition\",\n        \"issues\",\n        \"epic\",\n        \"workflow\",\n        \"tasks\",\n        \"parking\",\n        \"commit\"\n      ]\n    }\n  ]\n}\n",
        "plugins/devenv/.claude-plugin/plugin.json": "{\n  \"name\": \"devenv\",\n  \"version\": \"1.3.1\",\n  \"description\": \"Initialize and manage Nix flake development environments with auto-detection and security tooling\",\n  \"author\": {\n    \"name\": \"Krishnaswamy Subramanian\",\n    \"email\": \"jskswamy@gmail.com\"\n  },\n  \"keywords\": [\n    \"nix\",\n    \"flake\",\n    \"devenv\",\n    \"development\",\n    \"environment\",\n    \"pre-commit\",\n    \"gitleaks\",\n    \"direnv\",\n    \"direnv-instant\"\n  ]\n}\n",
        "plugins/devenv/README.md": "# devenv\n\nA devbox-like experience for managing Nix flake development environments through Claude Code.\n\n## Features\n\n- **Auto-detection**: Automatically detects your project's tech stack and suggests appropriate packages\n- **Native Nix pre-commit**: Uses [git-hooks.nix](https://github.com/cachix/git-hooks.nix) for pure Nix pre-commit integration\n- **Security tooling**: Built-in support for gitleaks and SAST tools\n- **Nix best practices**: Generated flakes follow Nix conventions and are automatically linted/formatted\n- **No system dependencies**: All tools run via Nix, ensuring reproducibility\n\n## Prerequisites\n\n- [Nix](https://nixos.org/download.html) with flakes enabled\n- [direnv](https://direnv.net/) (optional, but recommended)\n\n### Enable Nix Flakes\n\nAdd to `~/.config/nix/nix.conf`:\n```\nexperimental-features = nix-command flakes\n```\n\n## Installation\n\n```\n/plugin install devenv@claude-plugins\n```\n\n## Usage\n\n### Initialize a New Environment\n\n```\n/devenv\n```\n\nThe command will:\n1. Scan your repository for language indicators (package.json, Cargo.toml, go.mod, etc.)\n2. Read CLAUDE.md for additional context\n3. Suggest detected packages for confirmation\n4. Ask for any additional packages\n5. Offer security tools (pre-commit via git-hooks.nix, gitleaks)\n6. Generate `flake.nix` and `.envrc`\n\n### Manage Existing Environment\n\nRun `/devenv` again to:\n- **Add packages**: Add new packages to your environment\n- **Upgrade packages**: Update flake.lock to get latest versions\n- **Remove packages**: Remove packages from your environment\n- **Setup security tools**: Add pre-commit and gitleaks (if not already configured)\n\n## Generated Files\n\n| File | Purpose |\n|------|---------|\n| `flake.nix` | Nix flake with development shell and pre-commit hooks |\n| `flake.lock` | Lock file for reproducibility |\n| `.envrc` | direnv integration (`use flake`) |\n\nNote: `.pre-commit-config.yaml` is auto-generated by git-hooks.nix when you run `nix develop`.\n\n## Auto-Detection\n\nThe plugin detects these project types:\n\n| File | Detected Stack | Suggested Packages |\n|------|---------------|-------------------|\n| `package.json` | Node.js | nodejs, npm/pnpm/yarn |\n| `Cargo.toml` | Rust | rustc, cargo, rust-analyzer |\n| `go.mod` | Go | go, gopls |\n| `pyproject.toml` | Python | python3, uv |\n| `requirements.txt` | Python | python3, pip |\n| `Gemfile` | Ruby | ruby, bundler |\n| `pom.xml` | Java | jdk, maven |\n| `build.gradle` | Java/Kotlin | jdk, gradle |\n\n## Security Tools (git-hooks.nix)\n\nWhen pre-commit is selected, the plugin uses [git-hooks.nix](https://github.com/cachix/git-hooks.nix) to configure hooks natively in Nix.\n\n### Hooks by Language\n\n| Language | Enabled Hooks |\n|----------|---------------|\n| JavaScript/TypeScript | eslint, prettier |\n| Python | ruff, ruff-format |\n| Go | golangci-lint |\n| Rust | clippy, rustfmt |\n| Nix | nixfmt-rfc-style, statix, deadnix |\n| Shell | shellcheck |\n| Docker | hadolint |\n| Secrets | gitleaks |\n| General | check-yaml, trailing-whitespace, end-of-file-fixer |\n\n### Benefits of git-hooks.nix\n\n- **Pure Nix**: No external `.pre-commit-config.yaml` to maintain\n- **Reproducible**: All tools provided by Nix\n- **CI integration**: Run `nix flake check` to validate hooks in CI\n- **Auto-install**: Hooks install automatically on `nix develop`\n\n## Automatic Flake Linting\n\nThe plugin includes hooks that automatically run on any `flake.nix` modification:\n\n1. **nixfmt** - Formats Nix code (RFC style)\n2. **statix** - Fixes anti-patterns\n3. **deadnix** - Removes unused code\n\n## MCP Integration (mcp-nixos)\n\nThis plugin integrates with [mcp-nixos](https://github.com/utensils/mcp-nixos) for enhanced package search capabilities:\n\n- **130K+ packages** - Access to all NixOS packages with accurate names\n- **No hallucinations** - Queries official NixOS APIs instead of relying on AI memory\n- **Version history** - Access to package version history via NixHub.io\n\n### How It Works\n\nWhen you search for packages, the plugin tries in order:\n1. **Global/project mcp-nixos** - If you already have mcp-nixos configured (avoids duplicates)\n2. **Plugin's bundled mcp-nixos** - Runs via `nix-shell -p uv` (no extra setup needed)\n3. **Bash fallback** - Uses `nix search` if MCP is unavailable\n\n### Disabling MCP\n\nTo always use native `nix search`, add to `.claude/devenv.local.md`:\n\n```yaml\n---\nuse_mcp_search: false\n---\n```\n\n## Configuration\n\nCreate `.claude/devenv.local.md` to customize defaults:\n\n```yaml\n---\nnixpkgs_channel: nixos-unstable\nuse_mcp_search: true\ndirenv_mode: instant\nshell_welcome: box\nshell_welcome_custom: \"\"\n---\n```\n\n### Available Settings\n\n| Setting | Default | Description |\n|---------|---------|-------------|\n| `nixpkgs_channel` | `nixos-unstable` | Nixpkgs channel to use |\n| `use_mcp_search` | `true` | Use mcp-nixos for package search (requires Nix) |\n| `direnv_mode` | `instant` | direnv integration: `instant`, `standard`, or `none` |\n| `shell_welcome` | `box` | Welcome style: `box`, `minimal`, `project`, `tech`, `custom`, `none` |\n| `shell_welcome_custom` | `\"\"` | Custom message (when `shell_welcome: custom`) |\n\n## direnv-instant Support\n\nThe plugin defaults to [direnv-instant](https://github.com/Mic92/direnv-instant) for async environment loading:\n\n- **Instant shell prompt**: Your shell returns immediately\n- **Background loading**: Nix flake evaluates asynchronously\n- **Progress display**: Shows loading status in tmux/zellij for long evaluations (>4s)\n\n### Shell Setup (One-Time)\n\nAdd to your shell rc file:\n\n**Bash (~/.bashrc) or Zsh (~/.zshrc):**\n```bash\neval \"$(direnv-instant hook bash)\"  # or zsh\n```\n\n**Fish (~/.config/fish/config.fish):**\n```fish\ndirenv-instant hook fish | source\n```\n\n**Note:** Remove any existing `eval \"$(direnv hook ...)\"` first - direnv-instant replaces standard direnv.\n\n### Switching Modes\n\nTo switch between direnv-instant and standard direnv:\n\n```\n/devenv\n# Select \"Switch direnv mode\"\n```\n\nOr set in `.claude/devenv.local.md`:\n```yaml\n---\ndirenv_mode: standard  # or instant, or none\n---\n```\n\n## Shell Welcome Customization\n\nCustomize the message displayed when entering your development environment:\n\n### Available Styles\n\n| Style | Description |\n|-------|-------------|\n| `box` | Unicode box with devenv branding (default) |\n| `minimal` | Single line \"‚ñ∏ devenv ready\" |\n| `project` | Shows current project directory name |\n| `tech` | Terminal-style \"[devenv] :: environment initialized\" |\n| `custom` | Your own custom message |\n| `none` | No welcome message |\n\n### Changing the Style\n\nRun `/devenv` and select \"Change welcome style\", or set directly in `.claude/devenv.local.md`:\n\n```yaml\n---\nshell_welcome: minimal\n---\n```\n\n### Custom Messages\n\nFor custom messages with multiple lines, use `\\n`:\n\n```yaml\n---\nshell_welcome: custom\nshell_welcome_custom: \"Welcome to my project!\\nHappy coding!\"\n---\n```\n\n## Entering the Environment\n\nAfter setup, enter your development environment:\n\n```bash\n# With direnv-instant or direnv (auto-activates on cd)\ndirenv allow\n\n# Or manually\nnix develop\n```\n\nWhen you enter the shell, pre-commit hooks are automatically installed.\n\n## Example\n\n```\n$ /devenv\n\nDetected packages based on your repository:\n[x] nodejs_22\n[x] pnpm\n[x] typescript\n\nAny additional packages? redis, postgresql\n\nSecurity tools:\n[x] pre-commit (git-hooks.nix)\n[x] gitleaks\n\nCreating flake.nix with git-hooks.nix integration...\nCreating .envrc...\nRunning nix flake lock...\n\nDone! Run 'direnv allow' or 'nix develop' to enter your environment.\n\nPre-commit hooks will auto-install when you enter the shell.\nRun 'pre-commit run --all-files' to check all files.\nRun 'nix flake check' to validate in CI.\n```\n\n## CI Integration\n\nWith git-hooks.nix, you can validate hooks in CI:\n\n```yaml\n# GitHub Actions example\n- name: Check pre-commit hooks\n  run: nix flake check\n```\n\n## Troubleshooting\n\n### \"nix-shell not found\"\n\nEnsure Nix is installed and in your PATH:\n```bash\ncurl -L https://nixos.org/nix/install | sh\n```\n\n### \"flakes are disabled\"\n\nEnable flakes in your Nix configuration:\n```bash\necho \"experimental-features = nix-command flakes\" >> ~/.config/nix/nix.conf\n```\n\n### Hooks not running on flake.nix\n\nRestart Claude Code to reload the plugin hooks.\n\n### Pre-commit hooks not installing\n\nExit and re-enter the nix shell:\n```bash\nexit\nnix develop\n```\n\n## License\n\nMIT\n",
        "plugins/devenv/commands/devenv.md": "---\nname: devenv\ndescription: Initialize and manage Nix flake development environments with auto-detection and security tooling\nargument-hint: \"[add|upgrade|remove|security]\"\nallowed-tools:\n  - Read\n  - Write\n  - Edit\n  - Bash\n  - Glob\n  - Grep\n  - AskUserQuestion\n  - mcp__1mcp__nixos_1mcp_nixos_search\n  - mcp__1mcp__nixos_1mcp_nixhub_package_versions\n  - mcp__1mcp__nixos_1mcp_nixhub_find_version\n  - mcp__nixos__nix\n  - mcp__plugin_devenv_nixos__nix\n  - mcp__plugin_devenv_nixos__nix_versions\n---\n\n# Devenv Command\n\nInitialize and manage Nix flake development environments. Provides a devbox-like experience with auto-detection of project dependencies and security tooling using native Nix solutions.\n\n## Execution Flow\n\n### Step 1: Check Current State\n\nFirst, determine if this is a new setup or managing an existing environment:\n\n1. Check if `flake.nix` exists in the current directory\n2. If flake.nix exists, check if `git-hooks` input is present (indicates pre-commit is configured)\n3. Read `.claude/devenv.local.md` if it exists for:\n   - channel preference (default: `nixos-unstable`)\n   - shell welcome style (default: `box`)\n   - custom welcome text (if `shell_welcome: custom`)\n\n### Step 2: Branch Based on State\n\n#### If flake.nix does NOT exist (Initialize Flow)\n\n**2a. Auto-detect project stack:**\n\nScan for language indicator files and suggest packages:\n\n| File | Stack | Suggested Packages |\n|------|-------|-------------------|\n| `package.json` | Node.js | `nodejs`, check lockfile for `pnpm`/`yarn`/`npm` |\n| `pnpm-lock.yaml` | Node.js + pnpm | `nodejs`, `pnpm` |\n| `yarn.lock` | Node.js + yarn | `nodejs`, `yarn` |\n| `package-lock.json` | Node.js + npm | `nodejs` |\n| `Cargo.toml` | Rust | `rustc`, `cargo`, `rust-analyzer` |\n| `go.mod` | Go | `go`, `gopls` |\n| `pyproject.toml` | Python | `python3`, `uv` |\n| `requirements.txt` | Python | `python3`, `pip` |\n| `Gemfile` | Ruby | `ruby`, `bundler` |\n| `pom.xml` | Java | `jdk`, `maven` |\n| `build.gradle` | Java/Kotlin | `jdk`, `gradle` |\n| `*.csproj` | .NET | `dotnet-sdk` |\n| `Makefile` | C/C++ | `gnumake`, `gcc` |\n| `CMakeLists.txt` | C/C++ | `cmake`, `gcc` |\n| `Dockerfile` | Docker | `docker` |\n\nAlso read `CLAUDE.md` if it exists to understand the project context and tech stack.\n\n**2b. Present detected packages:**\n\nUse AskUserQuestion with multiSelect to show detected packages:\n```\nBased on your repository, I detected these packages:\n[x] nodejs_22\n[x] pnpm\n[x] typescript\n```\n\nLet user confirm, deselect, or add more via \"Other\" option.\n\n**2c. Ask for additional packages:**\n\nAsk: \"Any additional packages you need? (e.g., redis, postgresql, jq)\"\n\nFor each package mentioned:\n1. Check `.claude/devenv.local.md` for `use_mcp_search` setting (default: `true`)\n2. If MCP search is enabled, try MCP tools in priority order:\n   a. **1mcp** (preferred ‚Äî already running, no extra process):\n      ```\n      mcp__1mcp__nixos_1mcp_nixos_search(\n        query=\"<package>\",\n        search_type=\"packages\",\n        channel=\"unstable\",\n        limit=10\n      )\n      ```\n   b. **Global/project level MCP** (if user has mcp-nixos configured):\n      ```\n      mcp__nixos__nix(\n        action=\"search\",\n        query=\"<package>\",\n        source=\"nixos\",\n        type=\"packages\",\n        channel=\"unstable\",\n        limit=10\n      )\n      ```\n   c. **Plugin's bundled MCP**:\n      ```\n      mcp__plugin_devenv_nixos__nix(\n        action=\"search\",\n        query=\"<package>\",\n        source=\"nixos\",\n        type=\"packages\",\n        channel=\"unstable\",\n        limit=10\n      )\n      ```\n3. **Fallback:** If no MCP tool available or `use_mcp_search: false`, use bash:\n   `nix-shell -p nix --run \"nix search nixpkgs <package> --json\"`\n4. If version specified (e.g., `nodejs@20`), handle version resolution:\n   a. Try `mcp__1mcp__nixos_1mcp_nixhub_find_version(package_name=\"nodejs\", version=\"20\")`\n   b. If 1mcp unavailable, try `mcp__plugin_devenv_nixos__nix_versions(package=\"nodejs\", version=\"20\")`\n   c. Also search for nixpkgs variants like `nodejs_20`\n   d. Prefer the nixpkgs variant if it exists; offer pinned commit hash as alternative\n5. Present search results and confirm selection\n\n**2d. Offer security tools:**\n\nUse AskUserQuestion with multiSelect:\n```\nSecurity tools (recommended):\n[ ] pre-commit - Git hooks with SAST tools for your stack (using git-hooks.nix)\n```\n\nIf pre-commit selected, determine which git-hooks.nix hooks to enable based on detected stack:\n\n| Stack | Hooks to Enable |\n|-------|-----------------|\n| JavaScript/TypeScript | `eslint.enable = true; prettier.enable = true;` |\n| Python | `ruff.enable = true; ruff-format.enable = true;` |\n| Go | `golangci-lint.enable = true;` |\n| Rust | `clippy.enable = true; rustfmt.enable = true;` |\n| Nix (always) | `nixfmt-rfc-style.enable = true; statix.enable = true; deadnix.enable = true;` |\n| Shell scripts | `shellcheck.enable = true;` |\n| Docker | `hadolint.enable = true;` |\n| General (always) | `check-yaml.enable = true; trim-trailing-whitespace.enable = true;` |\n\n**Then ask about secret scanning:**\n\nUse AskUserQuestion:\n```\nSecret scanner preference:\n‚óã trufflehog (Recommended) - Built-in hook, works out of the box\n‚óã gitleaks - Popular choice, requires custom hook configuration\n‚óã None - Skip secret scanning\n```\n\nIf trufflehog selected:\n- Add `trufflehog.enable = true;` to the hooks configuration (built-in, no extra config needed)\n\nIf gitleaks selected:\n- Add gitleaks as a **custom hook** (it's NOT built-in to git-hooks.nix):\n```nix\ngitleaks = {\n  enable = true;\n  name = \"gitleaks\";\n  entry = \"${pkgs.gitleaks}/bin/gitleaks git --pre-commit --redact --staged --verbose\";\n  language = \"system\";\n  pass_filenames = false;\n};\n```\n- Also add `gitleaks` to the packages list\n- If pre-commit not selected, still add `gitleaks` to packages for manual use\n\n**2e. Choose direnv mode:**\n\nUse AskUserQuestion:\n```\ndirenv mode:\n‚óã direnv-instant (Recommended) - Async loading, instant shell prompt\n‚óã Standard direnv - Traditional sync direnv (shell waits for Nix)\n‚óã None - Use nix develop manually\n```\n\nBased on selection:\n- **direnv-instant**: Add `direnv-instant` as a **flake input** (it's NOT a nixpkgs package):\n  ```nix\n  inputs.direnv-instant.url = \"github:Mic92/direnv-instant\";\n  ```\n  Then reference the package in devShell:\n  ```nix\n  direnv-instant.packages.${system}.default\n  ```\n- **Standard direnv**: Add `direnv` to packages list in flake.nix (from nixpkgs)\n- **None**: Don't add direnv package, skip .envrc handling\n\nSave the selection to `.claude/devenv.local.md` as `direnv_mode: instant|standard|none`\n\n**2f. Choose shell welcome style:**\n\nUse AskUserQuestion to let the user choose their shell welcome message style:\n```\nShell welcome message style:\n‚óã Box style (Default) - Unicode box with devenv branding\n‚óã Minimal - Single line \"‚ñ∏ devenv ready\"\n‚óã Project name - Shows current project directory name\n‚óã Tech style - Terminal-inspired \"[devenv] :: environment initialized\"\n‚óã Custom - Enter your own message\n‚óã None - No welcome message\n```\n\nIf \"Custom\" is selected:\n1. Use AskUserQuestion to ask: \"Enter your custom welcome message (use \\\\n for multiple lines):\"\n2. Store the custom text for shellHook generation\n\nSave the selection to `.claude/devenv.local.md` as:\n- `shell_welcome: box|minimal|project|tech|custom|none`\n- `shell_welcome_custom: \"user's custom message\"` (only if custom selected)\n\n**2g. Generate files:**\n\n1. Generate `flake.nix` using the appropriate template:\n\n**Basic Template (without pre-commit):**\n\n```nix\n{\n  description = \"Development environment\";\n\n  inputs = {\n    nixpkgs.url = \"github:NixOS/nixpkgs/nixos-unstable\";\n    flake-utils.url = \"github:numtide/flake-utils\";\n    # DIRENV_INSTANT_INPUT_HERE (if selected)\n  };\n\n  outputs = {\n    self,\n    nixpkgs,\n    flake-utils,\n    # DIRENV_INSTANT_PARAM_HERE (if selected)\n  }:\n    flake-utils.lib.eachDefaultSystem (\n      system: let\n        pkgs = nixpkgs.legacyPackages.${system};\n      in {\n        devShells.default = pkgs.mkShell {\n          packages = with pkgs; [\n            # PACKAGES_HERE\n          ]\n          # DIRENV_INSTANT_PACKAGE_HERE (if selected)\n          ;\n\n          shellHook = ''\n            # SHELL_WELCOME_HERE\n          '';\n        };\n      }\n    );\n}\n```\n\n**To add direnv-instant to the template:**\n- Replace `# DIRENV_INSTANT_INPUT_HERE` with: `direnv-instant.url = \"github:Mic92/direnv-instant\";`\n- Replace `# DIRENV_INSTANT_PARAM_HERE` with: `direnv-instant,`\n- Replace `# DIRENV_INSTANT_PACKAGE_HERE` with: `++ [ direnv-instant.packages.${system}.default ]`\n\n**To add standard direnv:** Simply add `direnv` to the packages list (it's a nixpkgs package).\n\n**Template with git-hooks.nix (pre-commit enabled):**\n\n```nix\n{\n  description = \"Development environment\";\n\n  inputs = {\n    nixpkgs.url = \"github:NixOS/nixpkgs/nixos-unstable\";\n    flake-utils.url = \"github:numtide/flake-utils\";\n    git-hooks.url = \"github:cachix/git-hooks.nix\";\n    # DIRENV_INSTANT_INPUT_HERE (if selected)\n  };\n\n  outputs = {\n    self,\n    nixpkgs,\n    flake-utils,\n    git-hooks,\n    # DIRENV_INSTANT_PARAM_HERE (if selected)\n  }:\n    flake-utils.lib.eachDefaultSystem (\n      system: let\n        pkgs = nixpkgs.legacyPackages.${system};\n\n        # Pre-commit hooks configuration\n        pre-commit-check = git-hooks.lib.${system}.run {\n          src = ./.;\n          hooks = {\n            # Nix\n            nixfmt-rfc-style.enable = true;\n            statix.enable = true;\n            deadnix = {\n              enable = true;\n              settings.edit = true;\n              settings.noLambdaPatternNames = true; # Preserve 'self' in flake outputs\n            };\n\n            # General\n            check-yaml.enable = true;\n            trim-trailing-whitespace.enable = true;\n\n            # LANGUAGE_HOOKS_HERE\n\n            # SECRET_SCANNER_HERE\n            # For trufflehog (built-in): trufflehog.enable = true;\n            # For gitleaks (custom hook):\n            # gitleaks = {\n            #   enable = true;\n            #   name = \"gitleaks\";\n            #   entry = \"${pkgs.gitleaks}/bin/gitleaks git --pre-commit --redact --staged --verbose\";\n            #   language = \"system\";\n            #   pass_filenames = false;\n            # };\n          };\n        };\n      in {\n        # Run hooks in CI with: nix flake check\n        checks.pre-commit-check = pre-commit-check;\n\n        devShells.default = pkgs.mkShell {\n          packages = with pkgs; [\n            # PACKAGES_HERE\n          ]\n          ++ pre-commit-check.enabledPackages\n          # DIRENV_INSTANT_PACKAGE_HERE (if selected)\n          ;\n\n          shellHook = ''\n            ${pre-commit-check.shellHook}\n            # SHELL_WELCOME_HERE\n          '';\n        };\n      }\n    );\n}\n```\n\n**direnv-instant integration:** Same as basic template - add input, parameter, and package reference.\n\n**Shell welcome replacement:** Replace `# SHELL_WELCOME_HERE` based on user's `shell_welcome` preference:\n\n| Style | Replacement Content |\n|-------|---------------------|\n| `box` | `echo \"‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\"`<br>`echo \"‚ïë            üîß devenv                 ‚ïë\"`<br>`echo \"‚ïë     Development environment loaded   ‚ïë\"`<br>`echo \"‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\"` |\n| `minimal` | `echo \"\"`<br>`echo \"  ‚ñ∏ devenv ready\"`<br>`echo \"\"` |\n| `project` | `echo \"\"`<br>`echo \"  ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ\"`<br>`echo \"  ‚îÇ  üìÅ $(basename $PWD)\"`<br>`echo \"  ‚îÇ  Development environment loaded\"`<br>`echo \"  ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ\"`<br>`echo \"\"` |\n| `tech` | `echo \"\"`<br>`echo \"  [devenv] :: environment initialized\"`<br>`echo \"  ‚îî‚îÄ‚îÄ packages loaded, hooks active\"`<br>`echo \"\"` |\n| `custom` | Parse `shell_welcome_custom` from settings, split by `\\n`, wrap each line in `echo \"...\"` |\n| `none` | `# No welcome message` (empty comment, no output) |\n\n**For custom messages:**\n1. Read `shell_welcome_custom` from `.claude/devenv.local.md`\n2. Split by `\\n` for multi-line support\n3. Wrap each line in `echo \"...\"` statements\n4. Escape special characters: `$` becomes `\\$`, `\"` becomes `\\\"`, `\\` becomes `\\\\`\n5. If empty, fall back to `box` style\n\n2. Handle `.envrc` (if direnv mode is not \"none\"):\n\n   **IMPORTANT: Never read `.envrc` files - they may contain secrets.**\n\n   - Check if `.envrc` exists: `test -f .envrc`\n   - If `.envrc` does NOT exist:\n     - Create it with content: `use flake`\n   - If `.envrc` EXISTS:\n     - Do NOT read the file\n     - Tell the user: \"`.envrc` already exists. Ensure it contains `use flake` for direnv integration.\"\n\n3. Update `.gitignore` to exclude generated/sensitive files:\n   - Check if `.gitignore` exists\n   - Append entries that are not already present:\n```\n# Nix/direnv\n.direnv/\n.pre-commit-config.yaml\n\n# Environment files (sensitive)\n.env\n.env.*\n.envrc\n\n# Claude local settings (user preferences)\n.claude/*.local.md\n```\n\n4. Run `nix flake lock` to generate `flake.lock`\n\n**2h. Validate the flake:**\n\nAfter generating files, ALWAYS validate the flake works correctly:\n\n```bash\nnix flake check --no-build 2>&1\n```\n\n**If validation fails:**\n1. Read the error message carefully\n2. Common issues to check:\n   - Missing `self` parameter in outputs (required by flake system even if unused)\n   - Syntax errors in Nix expressions\n   - Invalid package names\n   - Missing inputs referenced in outputs\n3. Fix the issue in `flake.nix`\n4. Re-run validation until it passes\n5. Only proceed to output instructions after validation succeeds\n\n**Important:** Never finish the task if validation fails. The user should have a working environment.\n\n**2i. Output instructions:**\n\n**If direnv-instant was selected:**\n```\nDevelopment environment created!\n\nTo enter the environment:\n  nix develop\n\nOr with direnv-instant (async, instant prompt):\n  direnv allow\n\ndirenv-instant shell setup (one-time):\n  # bash (~/.bashrc) or zsh (~/.zshrc):\n  eval \"$(direnv-instant hook bash)\"  # or zsh\n\n  # fish (~/.config/fish/config.fish):\n  direnv-instant hook fish | source\n\nNote: Remove any existing `eval \"$(direnv hook ...)\"` first.\n\nYour environment includes:\n- [list packages]\n```\n\n**If standard direnv was selected:**\n```\nDevelopment environment created!\n\nTo enter the environment:\n  nix develop\n\nOr with direnv:\n  direnv allow\n\nYour environment includes:\n- [list packages]\n```\n\n**If direnv mode is \"none\":**\n```\nDevelopment environment created!\n\nTo enter the environment:\n  nix develop\n\nYour environment includes:\n- [list packages]\n```\n\n**[If pre-commit was selected, append:]**\n```\nPre-commit hooks are configured via git-hooks.nix.\nThey will auto-install when you run `nix develop`.\n\nAvailable hooks:\n- [list enabled hooks]\n\nTo run hooks manually: pre-commit run --all-files\nTo validate in CI: nix flake check\n```\n\n---\n\n#### If flake.nix EXISTS (Manage Flow)\n\n**2a. Parse current state:**\n\n1. Read `flake.nix` and extract current packages from `packages = with pkgs; [ ... ]`\n2. Check if `git-hooks` input exists in flake.nix (indicates pre-commit is configured)\n\n**2b. Ask what to do:**\n\nUse AskUserQuestion:\n```\nWhat would you like to do?\n‚óã Add packages - Add new packages to your environment\n‚óã Upgrade packages - Update flake.lock to get latest versions\n‚óã Remove packages - Remove packages from your environment\n‚óã Setup security tools - Add pre-commit and gitleaks (only if not configured)\n‚óã Switch direnv mode - Change between direnv-instant, standard direnv, or none\n‚óã Change welcome style - Customize shell welcome message\n```\n\nOnly show \"Setup security tools\" option if `git-hooks` input is NOT present in flake.nix.\nShow \"Switch direnv mode\" and \"Change welcome style\" options always (user may want to change their preference).\n\n**2c. Handle selected action:**\n\n**Add packages:**\n1. Ask: \"What packages would you like to add?\"\n2. Search nixpkgs for each package:\n   - Check `.claude/devenv.local.md` for `use_mcp_search` setting (default: `true`)\n   - If MCP search is enabled, try MCP tools in priority order:\n     a. **1mcp** (preferred): `mcp__1mcp__nixos_1mcp_nixos_search(query=\"<pkg>\", search_type=\"packages\", channel=\"unstable\", limit=10)`\n     b. Global/project MCP: `mcp__nixos__nix(action=\"search\", query=\"<pkg>\", ...)`\n     c. Plugin's bundled MCP: `mcp__plugin_devenv_nixos__nix(action=\"search\", query=\"<pkg>\", ...)`\n   - **Fallback:** If no MCP tool available or `use_mcp_search: false`, use bash:\n     `nix-shell -p nix --run \"nix search nixpkgs <package> --json\"`\n   - For versioned packages (e.g., `nodejs@20`):\n     a. Try `mcp__1mcp__nixos_1mcp_nixhub_find_version(package_name=\"nodejs\", version=\"20\")`\n     b. If 1mcp unavailable, try `mcp__plugin_devenv_nixos__nix_versions(package=\"nodejs\", version=\"20\")`\n     c. Also search for nixpkgs variants like `nodejs_20`\n3. Confirm package names\n4. Edit `flake.nix` to add packages to the list\n5. Run `nix flake lock --update-input nixpkgs` to update lock\n\n**Upgrade packages:**\n1. Run `nix flake update` to update all inputs\n2. Show what was updated from the output\n\n**Remove packages:**\n1. Show current packages list with checkboxes (multiSelect)\n2. Let user select which to remove\n3. Edit `flake.nix` to remove selected packages\n\n**Setup security tools:**\n1. Follow the same flow as step 2d from Initialize Flow\n2. Add `git-hooks` input to flake.nix\n3. Add the `pre-commit-check` configuration\n4. Update the devShell to include `pre-commit-check.enabledPackages` and shellHook\n5. Add the `checks.pre-commit-check` output\n\n**Switch direnv mode:**\n1. Check current direnv configuration in flake.nix:\n   - Look for `direnv-instant` in inputs (it's a flake input, NOT a nixpkgs package)\n   - Look for `direnv` in packages list (this IS a nixpkgs package)\n2. Use AskUserQuestion:\n   ```\n   direnv mode:\n   ‚óã direnv-instant (Recommended) - Async loading, instant shell prompt\n   ‚óã Standard direnv - Traditional sync direnv (shell waits for Nix)\n   ‚óã None - Use nix develop manually\n   ```\n3. Based on selection:\n   - **direnv-instant**:\n     - Add `direnv-instant.url = \"github:Mic92/direnv-instant\";` to inputs\n     - Add `direnv-instant,` to outputs parameters\n     - Add `++ [ direnv-instant.packages.${system}.default ]` to packages\n     - Remove `direnv` from packages if present\n   - **Standard direnv**:\n     - Remove `direnv-instant` input, parameter, and package reference if present\n     - Add `direnv` to packages list (from nixpkgs)\n   - **None**:\n     - Remove `direnv-instant` input, parameter, and package reference if present\n     - Remove `direnv` from packages if present\n4. Update `.claude/devenv.local.md` with new `direnv_mode` setting\n5. Show appropriate shell hook instructions:\n   - For direnv-instant: Show the `eval \"$(direnv-instant hook ...)\"` instructions\n   - For standard direnv: Remind to use `eval \"$(direnv hook ...)\"`\n   - For none: Note that user should use `nix develop` manually\n\n**Change welcome style:**\n1. Read current `shell_welcome` setting from `.claude/devenv.local.md` (default: `box`)\n2. Use AskUserQuestion:\n   ```\n   Shell welcome message style:\n   ‚óã Box style (Default) - Unicode box with devenv branding\n   ‚óã Minimal - Single line \"‚ñ∏ devenv ready\"\n   ‚óã Project name - Shows current project directory name\n   ‚óã Tech style - Terminal-inspired \"[devenv] :: environment initialized\"\n   ‚óã Custom - Enter your own message\n   ‚óã None - No welcome message\n   ```\n3. If \"Custom\" selected, ask for custom message text\n4. Update `.claude/devenv.local.md` with new `shell_welcome` (and `shell_welcome_custom` if applicable)\n5. Update the `shellHook` section in `flake.nix`:\n   - Read the current flake.nix\n   - Locate the shellHook block in devShells.default\n   - Replace the welcome message echo statements using the replacement table from Step 2g\n   - Preserve any `${pre-commit-check.shellHook}` if present at the start of shellHook\n   - Keep any other shellHook content intact\n6. Show the user a preview of their new welcome message\n\n**After any modification, validate the flake:**\n\n```bash\nnix flake check --no-build 2>&1\n```\n\nIf validation fails, fix the issue before completing the task.\n\n---\n\n## Important Notes\n\n- Always use `nix-shell -p <tool> --run \"<command>\"` for nix tools - do NOT assume they are installed system-wide\n- The PostToolUse hooks will automatically format and lint `flake.nix` after any Write/Edit operations\n- Use the nixpkgs channel from `.claude/devenv.local.md` if it exists, otherwise default to `nixos-unstable`\n- When searching for packages, use 1mcp NixOS tools first, then mcp-nixos MCP, with bash fallback\n- `git-hooks.nix` auto-generates `.pre-commit-config.yaml` via shellHook - no manual YAML needed!\n- All hook tools are provided by Nix, ensuring reproducibility\n- **Critical:** The `self` parameter in flake outputs is REQUIRED by the Nix flake system, even if not explicitly used in the function body. The plugin's deadnix hook is configured with `--no-lambda-pattern-names` to preserve it\n- **Always validate** with `nix flake check --no-build` before completing any flake creation/modification task\n- **direnv-instant is a flake input, NOT a nixpkgs package:** It must be added via `inputs.direnv-instant.url = \"github:Mic92/direnv-instant\"` and referenced as `direnv-instant.packages.${system}.default`. Standard `direnv` IS in nixpkgs and can be added directly to the packages list.\n\n## MCP Tools: NixOS Package Search\n\nThis plugin uses NixOS MCP tools for package search, providing access to 130K+ NixOS packages with accurate, up-to-date information.\n\n### Tool Priority Order\n\nThe command tries MCP tools in this order:\n1. **1mcp** (preferred): `mcp__1mcp__nixos_1mcp_nixos_search` ‚Äî already running via 1mcp proxy, no extra process\n2. **Global/Project level**: `mcp__nixos__nix` ‚Äî if user has mcp-nixos configured globally or in project\n3. **Plugin's bundled**: `mcp__plugin_devenv_nixos__nix` ‚Äî plugin's own MCP server (fallback for non-1mcp environments)\n4. **Bash fallback**: `nix search` command\n\nThis ensures the fastest available tool is used first, with graceful degradation.\n\n### Package Search\n\n**1mcp** (separate tools per action):\n```\nmcp__1mcp__nixos_1mcp_nixos_search(\n  query=\"<search_term>\",\n  search_type=\"packages\",\n  channel=\"unstable\",\n  limit=10\n)\n```\n\n**Global/Plugin MCP** (combined action parameter):\n```\nmcp__nixos__nix(  # or mcp__plugin_devenv_nixos__nix\n  action=\"search\",\n  query=\"<search_term>\",\n  source=\"nixos\",\n  type=\"packages\",\n  channel=\"unstable\",\n  limit=10\n)\n```\n\n### Version Search\n\nFor versioned package requests (e.g., `nodejs@20`):\n\n**1mcp** ‚Äî find specific version:\n```\nmcp__1mcp__nixos_1mcp_nixhub_find_version(\n  package_name=\"nodejs\",\n  version=\"20\"\n)\n```\n\n**1mcp** ‚Äî list all available versions:\n```\nmcp__1mcp__nixos_1mcp_nixhub_package_versions(\n  package_name=\"nodejs\",\n  limit=20\n)\n```\n\n**Plugin bundled MCP** ‚Äî version lookup:\n```\nmcp__plugin_devenv_nixos__nix_versions(\n  package=\"nodejs\",\n  version=\"20\"\n)\n```\n\n**Version resolution workflow:**\n1. Try `nixhub_find_version` (or `nix_versions`) to find the exact version\n2. Also search nixpkgs for variants like `nodejs_20`\n3. Prefer the nixpkgs variant if it exists (simpler, no pinning needed)\n4. Offer pinned commit hash from nixhub as alternative if no nixpkgs variant found\n\n### Parameter Reference\n\n| Tool | Parameter | Value | Description |\n|------|-----------|-------|-------------|\n| `1mcp_nixos_search` | query | string | Package name or search term |\n| `1mcp_nixos_search` | search_type | \"packages\" | Search packages (not options) |\n| `1mcp_nixos_search` | channel | \"unstable\" | Nixpkgs channel |\n| `1mcp_nixos_search` | limit | number | Max results to return |\n| `1mcp_nixhub_find_version` | package_name | string | Package to find version for |\n| `1mcp_nixhub_find_version` | version | string | Desired version (e.g., \"20\") |\n| `1mcp_nixhub_package_versions` | package_name | string | Package to list versions for |\n| `1mcp_nixhub_package_versions` | limit | number | Max versions to return |\n| `nixos__nix` / `plugin_devenv_nixos__nix` | action | \"search\" | Search for packages |\n| `nixos__nix` / `plugin_devenv_nixos__nix` | query | string | Package name or search term |\n| `nixos__nix` / `plugin_devenv_nixos__nix` | source | \"nixos\" | Use NixOS packages source |\n| `nixos__nix` / `plugin_devenv_nixos__nix` | type | \"packages\" | Search packages (not options) |\n| `nixos__nix` / `plugin_devenv_nixos__nix` | channel | \"unstable\" | Use nixos-unstable channel |\n| `nixos__nix` / `plugin_devenv_nixos__nix` | limit | number | Max results to return |\n| `plugin_devenv_nixos__nix_versions` | package | string | Package to find version for |\n| `plugin_devenv_nixos__nix_versions` | version | string | Desired version (optional) |\n| `plugin_devenv_nixos__nix_versions` | limit | number | Max versions to return (optional) |\n\n### Fallback Behavior\n\nIf no MCP tool is available, the command falls back to:\n```bash\nnix-shell -p nix --run \"nix search nixpkgs <package> --json\"\n```\n\n## Settings File\n\nUsers can customize behavior via `.claude/devenv.local.md`:\n\n```yaml\n---\nnixpkgs_channel: nixos-unstable\nuse_mcp_search: true\ndirenv_mode: instant\nshell_welcome: box\nshell_welcome_custom: \"\"\n---\n```\n\n### Available Settings\n\n| Setting | Default | Description |\n|---------|---------|-------------|\n| `nixpkgs_channel` | `nixos-unstable` | Nixpkgs channel to use |\n| `use_mcp_search` | `true` | Use mcp-nixos for package search. Set to `false` to always use bash fallback |\n| `direnv_mode` | `instant` | direnv integration: `instant` (async, recommended), `standard` (sync), or `none` |\n| `shell_welcome` | `box` | Welcome message style: `box`, `minimal`, `project`, `tech`, `custom`, or `none` |\n| `shell_welcome_custom` | `\"\"` | Custom welcome message text (only used when `shell_welcome: custom`). Use `\\n` for multi-line |\n\n## git-hooks.nix Hook Reference\n\n### Available Hooks by Language\n\n| Language | Hook Names |\n|----------|------------|\n| JavaScript/TypeScript | `eslint`, `prettier` |\n| Python | `ruff`, `ruff-format`, `black`, `mypy` |\n| Go | `golangci-lint`, `gofmt` |\n| Rust | `clippy`, `rustfmt`, `cargo-check` |\n| Nix | `nixfmt-rfc-style`, `statix`, `deadnix` |\n| Shell | `shellcheck`, `shfmt` |\n| Docker | `hadolint` |\n| YAML | `check-yaml`, `yamllint` |\n| Secrets | `trufflehog`, `ripsecrets` (built-in); `gitleaks` requires custom config |\n| General | `trim-trailing-whitespace`, `check-added-large-files`, `check-merge-conflicts` |\n\n### Example Hook Configuration\n\n```nix\nhooks = {\n  # Enable a built-in hook\n  eslint.enable = true;\n\n  # Built-in secret scanner\n  trufflehog.enable = true;\n\n  # Enable with custom settings\n  ruff = {\n    enable = true;\n    settings.args = [\"--fix\"];\n  };\n\n  # Custom hook example: gitleaks (not built-in)\n  gitleaks = {\n    enable = true;\n    name = \"gitleaks\";\n    entry = \"${pkgs.gitleaks}/bin/gitleaks git --pre-commit --redact --staged --verbose\";\n    language = \"system\";\n    pass_filenames = false;\n  };\n};\n```\n\nFor full list of available hooks, see: https://github.com/cachix/git-hooks.nix\n",
        "plugins/devenv/hooks/hooks.json": "{\n  \"description\": \"Lint and format flake.nix after modifications using nix tools\",\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/nixfmt.sh\",\n            \"timeout\": 60000\n          }\n        ]\n      },\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/statix.sh\",\n            \"timeout\": 60000\n          }\n        ]\n      },\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/deadnix.sh\",\n            \"timeout\": 60000\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/devenv/hooks/scripts/deadnix.sh": "#!/bin/bash\nset -euo pipefail\n\n# Read tool input from stdin\ninput=$(cat)\n\n# Extract file path from tool_input\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // .tool_input.filePath // \"\"')\n\n# Only run on flake.nix files\nif [[ $file_path == *\"flake.nix\" ]]; then\n\tif command -v nix-shell &>/dev/null; then\n\t\t# --no-lambda-pattern-names preserves 'self' in flake outputs (required by flake system)\n\t\tnix-shell -p deadnix --run \"deadnix --no-lambda-pattern-names -e \\\"$file_path\\\"\" 2>&1 || true\n\t\techo '{\"continue\": true, \"systemMessage\": \"Removed unused code with deadnix\"}'\n\telse\n\t\techo '{\"continue\": true, \"systemMessage\": \"nix-shell not available, skipping deadnix\"}'\n\tfi\nelse\n\techo '{\"continue\": true}'\nfi\n",
        "plugins/devenv/hooks/scripts/nixfmt.sh": "#!/bin/bash\nset -euo pipefail\n\n# Read tool input from stdin\ninput=$(cat)\n\n# Extract file path from tool_input\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // .tool_input.filePath // \"\"')\n\n# Only run on flake.nix files\nif [[ \"$file_path\" == *\"flake.nix\" ]]; then\n  if command -v nix-shell &> /dev/null; then\n    nix-shell -p nixfmt-rfc-style --run \"nixfmt \\\"$file_path\\\"\" 2>&1 || true\n    echo '{\"continue\": true, \"systemMessage\": \"Formatted flake.nix with nixfmt\"}'\n  else\n    echo '{\"continue\": true, \"systemMessage\": \"nix-shell not available, skipping nixfmt\"}'\n  fi\nelse\n  echo '{\"continue\": true}'\nfi\n",
        "plugins/devenv/hooks/scripts/statix.sh": "#!/bin/bash\nset -euo pipefail\n\n# Read tool input from stdin\ninput=$(cat)\n\n# Extract file path from tool_input\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // .tool_input.filePath // \"\"')\n\n# Only run on flake.nix files\nif [[ \"$file_path\" == *\"flake.nix\" ]]; then\n  if command -v nix-shell &> /dev/null; then\n    nix-shell -p statix --run \"statix fix \\\"$file_path\\\"\" 2>&1 || true\n    echo '{\"continue\": true, \"systemMessage\": \"Fixed anti-patterns with statix\"}'\n  else\n    echo '{\"continue\": true, \"systemMessage\": \"nix-shell not available, skipping statix\"}'\n  fi\nelse\n  echo '{\"continue\": true}'\nfi\n",
        "plugins/git-commit/.claude-plugin/plugin.json": "{\n  \"name\": \"git-commit\",\n  \"version\": \"1.1.1\",\n  \"description\": \"Generate intelligent git commit messages with classic or conventional commit style support, strict atomic commit validation, and session context awareness\",\n  \"author\": {\n    \"name\": \"Krishnaswamy Subramanian\",\n    \"email\": \"jskswamy@gmail.com\"\n  },\n  \"keywords\": [\n    \"git\",\n    \"commit\",\n    \"classic-commits\",\n    \"conventional-commits\",\n    \"atomic-commits\",\n    \"session-context\"\n  ]\n}\n",
        "plugins/git-commit/README.md": "# Git Commit Plugin\n\nGenerate intelligent git commit messages with classic or conventional commit style support and strict atomic commit validation.\n\n## Features\n\n- **Auto-Activation:** Triggers automatically when you ask to commit (no need to type `/commit`)\n- **Two Commit Styles:** Classic commits (default) and conventional commits\n- **Strict Atomic Commit Validation:** Warns when staged changes aren't atomic\n- **Split Commits Helper:** Guides you through staging changes separately\n- **Pair Programming Support:** Save and reuse co-author information\n- **Smart Message Generation:** Analyzes your diff to generate meaningful messages\n- **Commit Interception:** Prevents direct git commits, ensuring all commits go through the plugin workflow\n\n## Installation\n\n```bash\nclaude /plugin install github:jskswamy/claude-plugins/plugins/git-commit\n```\n\nOr for local development:\n\n```bash\nclaude --plugin-dir ./plugins/git-commit\n```\n\n## Auto-Activation\n\nThe plugin automatically activates when you express intent to commit. No need to type `/commit` explicitly.\n\n### Trigger Phrases\n\nThe plugin recognizes natural language commit requests:\n\n| Category | Example Phrases |\n|----------|----------------|\n| **Direct requests** | \"commit these changes\", \"commit this\", \"let's commit\", \"make a commit\" |\n| **Readiness** | \"time to commit\", \"ready to commit\", \"let's do the commit\" |\n| **Delegation** | \"commit for me\", \"please commit\", \"can you commit this\" |\n| **Contextual** | \"save my changes\" (after code edits), \"finalize these changes\" |\n| **With style** | \"make a conventional commit\", \"commit this classically\" |\n| **With context** | \"commit the login fix\", \"commit this as a bug fix\" |\n\n### Examples\n\n```\nYou: \"commit these changes\"\n‚Üí Plugin activates, runs /commit workflow\n\nYou: \"let's make a conventional commit for the auth fix\"\n‚Üí Plugin activates, runs /commit --style conventional auth fix\n\nYou: \"time to commit, this fixes the redirect bug\"\n‚Üí Plugin activates, runs /commit fixes redirect bug\n```\n\n### Commit Interception\n\nThe plugin includes hooks that intercept direct git commit attempts:\n\n- **MCP tool interception:** Blocks `mcp__1mcp__git_1mcp_git_commit` and redirects to `/commit`\n- **Bash interception:** Detects `git commit` commands and redirects to `/commit`\n\nThis ensures all commits go through the plugin workflow for:\n- Atomic commit validation\n- Intelligent message generation\n- Session context awareness\n- Style consistency\n\n### Questions vs Actions\n\nThe plugin distinguishes between **learning** and **doing**:\n\n| User Intent | Handled By |\n|-------------|------------|\n| \"How do I write a commit message?\" | `commit-style` skill (educational) |\n| \"What is a conventional commit?\" | `commit-style` skill (educational) |\n| \"commit these changes\" | `commit` skill (action) |\n| \"let's make a commit\" | `commit` skill (action) |\n\n## Usage\n\n### Basic Usage\n\n```bash\n/commit                    # Generate commit with default style (classic)\n```\n\n### With Context\n\n```bash\n/commit fix the login redirect issue    # Provide context for message generation\n/commit refactoring auth for testability\n```\n\n### Style Options\n\n```bash\n/commit --style classic       # Classic commits (default)\n/commit --style conventional  # Conventional commits (feat:, fix:, etc.)\n/commit -s conventional       # Short form\n```\n\n### Amending Commits\n\n```bash\n/commit --amend              # Amend previous commit\n/commit -a                   # Short form\n```\n\n### Pair Programming\n\n```bash\n/commit --pair               # Add co-author to commit\n/commit -p                   # Short form\n```\n\nFirst time: Enter co-author name and email, optionally save for future use.\nSubsequent: Pick from saved pairs or add new.\n\n### Skip Atomicity Check\n\n```bash\n/commit --no-atomic-check    # Skip atomic commit validation\n```\n\n### Combined Options\n\n```bash\n/commit -p -s conventional fix auth bug\n/commit --pair --amend update the error message\n```\n\n## Commit Styles\n\n### Classic Commits (Default)\n\nFollows the \"7 Rules of Great Git Commit Messages\":\n\n1. Separate subject from body with a blank line\n2. Limit subject to 50 characters\n3. Capitalize the subject line\n4. Do not end subject with a period\n5. Use imperative mood (\"Add feature\" not \"Added feature\")\n6. Wrap body at 72 characters\n7. Explain what and why, not how\n\n**Example:**\n```\nAdd user authentication with OAuth2 support\n\nImplement OAuth2 authentication flow for the login system. This adds\nsupport for Google and GitHub as identity providers.\n\nThe migration to OAuth2 provides:\n- Single sign-on capability\n- Reduced password management burden\n- Industry-standard security practices\n```\n\n### Conventional Commits\n\nStructured format for automation (changelogs, semantic versioning):\n\n**Format:** `<type>[scope]: <description>`\n\n**Types:** feat, fix, docs, style, refactor, perf, test, build, ci, chore\n\n**Example:**\n```\nfeat(auth): add OAuth2 login support\n\nImplement OAuth2 authentication flow for the login system.\nAdds support for Google and GitHub as identity providers.\n\nBREAKING CHANGE: removes legacy session-based authentication\n```\n\n## Atomic Commit Validation\n\nThe plugin enforces atomic commits by default. An atomic commit:\n\n- Does ONE thing and one thing only\n- Can be reverted without side effects\n- Can be described in ONE sentence (no \"and also\")\n\n### What Gets Flagged\n\n- Multiple unrelated modules changed together\n- Mix of bug fix + new feature\n- Multiple distinct purposes in one commit\n\n### When Flagged\n\nYou'll see options to:\n- **Split commits** - Stage changes separately (recommended)\n- **Proceed anyway** - Commit all together\n- **Review changes** - See the diff again\n- **Cancel** - Exit without committing\n\n### Related Changes Detection\n\nThe plugin also checks for unstaged changes that might belong with your staged changes:\n\n| Pattern | Example |\n|---------|---------|\n| Test files | Staged `foo.ts` with unstaged `foo.test.ts` |\n| Same directory | Other modified files in the same module |\n| Manifest files | `package.json`, `tsconfig.json` changes |\n| Config companions | `feature.ts` with `feature.config.ts` |\n\nWhen related unstaged files are detected, you can:\n- **Stage related files** - Include them in this commit (recommended)\n- **Review changes** - See the unstaged diff first\n- **Proceed without** - Commit only the originally staged files\n\n## Configuration\n\nSettings are stored in `.claude/git-commit.local.md`:\n\n```yaml\n---\ncommit_style: classic\npairs:\n  - name: \"John Doe\"\n    email: \"john@example.com\"\n---\n```\n\n### Settings\n\n| Setting | Values | Description |\n|---------|--------|-------------|\n| `commit_style` | `classic`, `conventional` | Default commit style |\n| `pairs` | list | Saved co-authors for pair programming |\n\n## Adding Custom Commit Styles\n\nCommit styles are defined in the `styles/` directory. Each style is a self-contained markdown file with YAML frontmatter.\n\n**Structure:**\n```\nplugins/git-commit/\n‚îî‚îÄ‚îÄ styles/\n    ‚îú‚îÄ‚îÄ classic.md       # Traditional git commit style\n    ‚îú‚îÄ‚îÄ conventional.md  # Conventional Commits spec\n    ‚îî‚îÄ‚îÄ your-style.md    # Add your own!\n```\n\n**Style file format:**\n```yaml\n---\nname: your-style\ndescription: Brief description of the style\ndefault: false\n---\n\n# Style Name\n\nRules and examples in markdown format...\n```\n\nTo add a new style:\n1. Create a new `.md` file in `styles/`\n2. Add YAML frontmatter with name and description\n3. Document the rules, examples, and anti-patterns\n4. Use with `/commit --style your-style`\n\n## Plugin Architecture\n\n### Skills\n\n| Skill | Purpose | Triggers On |\n|-------|---------|-------------|\n| `commit.md` | Perform commit actions | Intent to commit (action phrases) |\n| `commit-style.md` | Educational guidance | Questions about commit formats |\n\n### Hooks\n\nThe plugin uses PreToolUse hooks to intercept direct git commits:\n\n```\nhooks/\n‚îú‚îÄ‚îÄ hooks.json              # Hook configuration\n‚îú‚îÄ‚îÄ intercept-mcp-commit.md # Blocks MCP git_commit tool\n‚îî‚îÄ‚îÄ intercept-bash-commit.md # Blocks bash git commit commands\n```\n\n**Why hooks?** Even with the intent-based skill, Claude might decide to commit directly using git tools. The hooks ensure ALL commits go through the plugin workflow.\n\n### Styles\n\nCustom commit styles in `styles/` directory:\n\n```\nstyles/\n‚îú‚îÄ‚îÄ classic.md       # Traditional git commit style (default)\n‚îî‚îÄ‚îÄ conventional.md  # Conventional Commits specification\n```\n\n## Sources\n\n- [How to Write a Git Commit Message](https://cbea.ms/git-commit/) - The 7 rules\n- [Conventional Commits](https://www.conventionalcommits.org/) - Specification\n- [Atomic Git Commits](https://www.aleksandrhovhannisyan.com/blog/atomic-git-commits/) - Best practices\n\n## License\n\nMIT\n",
        "plugins/git-commit/commands/commit.md": "---\nname: commit\ndescription: Generate and create git commit messages with classic or conventional commit style and strict atomic commit validation\nargument-hint: \"[--style classic|conventional] [--amend] [--pair] [--no-atomic-check] [context...]\"\nallowed-tools:\n  - Read\n  - Write\n  - Edit\n  - Bash\n  - Glob\n  - Grep\n  - AskUserQuestion\n  - mcp__1mcp__git_1mcp_git_status\n  - mcp__1mcp__git_1mcp_git_diff_staged\n  - mcp__1mcp__git_1mcp_git_diff_unstaged\n  - mcp__1mcp__git_1mcp_git_commit\n  - mcp__1mcp__git_1mcp_git_log\n  - mcp__1mcp__git_1mcp_git_add\n  - mcp__1mcp__git_1mcp_git_reset\n---\n\n# Git Commit Command\n\nGenerate intelligent git commit messages with support for classic and conventional commit styles, strict atomic commit validation, and pair programming attribution.\n\n## Argument Parsing\n\nParse the command arguments to extract:\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `--style` | `-s` | string | `classic` | Commit style: `classic` or `conventional` |\n| `--amend` | `-a` | boolean | `false` | Amend the previous commit |\n| `--pair` | `-p` | boolean | `false` | Add co-author attribution |\n| `--no-atomic-check` | | boolean | `false` | Skip atomicity validation |\n| `[context...]` | | string | | Free-form text describing intention |\n\n**Examples:**\n```\n/commit                           # Default classic style\n/commit --style conventional      # Conventional commits\n/commit -s conventional           # Short form\n/commit --amend                   # Amend previous commit\n/commit --pair                    # Add co-author\n/commit fix login redirect        # Context for message generation\n/commit -p -a refactor auth       # Combine flags with context\n```\n\n---\n\n## Execution Flow\n\n### Step 1: Check Repository State\n\nFirst, verify we're in a git repository and check the current state:\n\n1. Run `git rev-parse --git-dir` to verify git repository\n2. If not a git repo, show error and exit:\n   ```\n   Error: Not a git repository. Please run this command from within a git repository.\n   ```\n\n3. Get staged changes using MCP or Bash fallback:\n   - Try: `mcp__1mcp__git_1mcp_git_diff_staged`\n   - Fallback: `git diff --staged --stat`\n\n4. If NO staged changes:\n   - Get unstaged changes: `git diff --stat` and `git status --porcelain`\n   - Use AskUserQuestion:\n     ```\n     No changes are staged for commit.\n\n     Unstaged changes detected:\n     - src/auth/login.ts (modified)\n     - src/ui/button.tsx (modified)\n     - README.md (new file)\n\n     What would you like to do?\n     ‚óã Stage all changes - git add -A\n     ‚óã Select files to stage - Choose specific files\n     ‚óã Cancel - Exit without committing\n     ```\n   - If \"Stage all\": Run `git add -A` then continue\n   - If \"Select files\": Show file list with multiSelect, stage selected files\n   - If \"Cancel\": Exit\n\n### Step 2: Load User Preferences\n\nRead `.claude/git-commit.local.md` if it exists:\n\n```yaml\n---\ncommit_style: classic\npairs:\n  - name: \"John Doe\"\n    email: \"john@example.com\"\n---\n```\n\n**Priority for commit style:**\n1. CLI argument `--style` (highest priority)\n2. Setting from `.claude/git-commit.local.md`\n3. Default: `classic`\n\n**First-time setup:** If no settings file exists AND no `--style` flag:\n- Use AskUserQuestion:\n  ```\n  Which commit message style do you prefer?\n  ‚óã Classic (Default) - Clean subject lines following the \"7 rules\" of commit messages\n  ‚óã Conventional - Structured format (feat:, fix:, etc.) for automation and changelogs\n  ```\n- Ask: \"Save this preference for future commits?\"\n- If yes, create `.claude/git-commit.local.md` with the selection\n\n### Step 3: Gather Context\n\n1. **Get the full staged diff:**\n   - Try: `mcp__1mcp__git_1mcp_git_diff_staged`\n   - Fallback: `git diff --staged`\n\n2. **Get list of staged files:**\n   - `git diff --staged --name-only`\n\n3. **Get recent commits** (for style consistency):\n   - Try: `mcp__1mcp__git_1mcp_git_log` with limit 5\n   - Fallback: `git log --oneline -5`\n\n4. **If `--amend` flag is set:**\n   - Verify we can amend (safety check):\n     a. Get HEAD commit author: `git log -1 --format='%an %ae'`\n     b. Check if commit is pushed: `git status` shows \"Your branch is ahead\"\n     c. If pushed to remote, warn and ask for confirmation\n     d. If not the user's commit (different author), refuse to amend\n   - Get current commit message: `git log -1 --format=%B`\n\n5. **User context:** Any remaining arguments after flags are treated as context/intention\n\n### Step 4: Atomic Commit Validation\n\n**Skip this step if `--no-atomic-check` flag is set.**\n\nAnalyze the staged changes to determine if they represent a single, atomic unit of work.\n\n#### Atomicity Analysis\n\n**4a. File Grouping Analysis:**\n\nGroup changed files by directory/module:\n```\nsrc/auth/login.ts       -> auth module\nsrc/auth/session.ts     -> auth module\nsrc/ui/dashboard.tsx    -> ui module\ntests/auth.test.ts      -> auth tests\n```\n\n**Red flag:** Files from unrelated modules changed together (e.g., auth + unrelated ui changes)\n\n**4b. Change Type Detection:**\n\nAnalyze the diff content to identify the nature of changes:\n\n| Pattern | Change Type |\n|---------|-------------|\n| New functions/classes added | Feature |\n| Bug fix patterns (null checks, error handling) | Fix |\n| Variable/function renames, restructuring | Refactor |\n| Only whitespace/formatting | Style |\n| Test file changes only | Test |\n| README, docs/, comments only | Docs |\n| package.json, config files | Build/Chore |\n\n**Red flag:** Multiple change types in the same commit (e.g., new feature + bug fix)\n\n**4c. Scope Coherence Check:**\n\nAsk: \"Can these changes be described in ONE sentence without conjunctions joining unrelated ideas?\"\n\n**Red flags:**\n- Would need \"and also\" to describe changes\n- Changes serve multiple distinct purposes\n- Mix of unrelated concerns\n\n**4d. Size Heuristics:**\n\n- Very large diffs (>500 lines) across many unrelated files = suspicious\n- Note: Large refactors can still be atomic if coherent\n\n**4e. Related Unstaged Changes Detection:**\n\nCheck if there are unstaged changes that logically belong with the staged changes:\n\n1. Get unstaged files: `git diff --name-only` and `git status --porcelain` (for untracked)\n\n2. Detect relationships using these heuristics:\n\n| Pattern | Check For |\n|---------|-----------|\n| **Test files** | Staged `src/foo.ts` ‚Üí Check `foo.test.ts`, `foo.spec.ts` |\n| **Same directory** | Staged `src/auth/login.ts` ‚Üí Check other `src/auth/*` changes |\n| **Manifest files** | Staged `src/lib/*` ‚Üí Check `package.json`, `tsconfig.json` |\n| **Config companions** | Staged `src/feature.ts` ‚Üí Check `src/feature.config.ts` |\n| **Documentation** | Staged `src/module/*` ‚Üí Check `docs/module.md`, module README |\n\n3. If related unstaged files found, show warning:\n\n```\nRelated unstaged changes detected:\n\nThese unstaged files appear related to your staged changes:\n\n- src/auth/session.test.ts (test file for staged module)\n- package.json (manifest with potential dependency changes)\n\nIncluding these would make your commit more complete.\n\nWhat would you like to do?\n‚óã Stage related files (Recommended) - Include them in this commit\n‚óã Review changes - See the unstaged diff\n‚óã Proceed without - Commit only staged files\n```\n\n4. If \"Stage related files\" selected:\n   - Run `git add <related-files>`\n   - Continue with the updated staged changes\n\n5. If \"Review changes\" selected:\n   - Show the diff for the related unstaged files\n   - Re-prompt with the same options\n\n6. If \"Proceed without\" selected:\n   - Continue to Step 5 with only the originally staged files\n\n#### Non-Atomic Warning Flow\n\nIf atomicity violations detected:\n\n```\n‚ö†Ô∏è  ATOMICITY WARNING\n\nYour staged changes appear to contain multiple concerns:\n\n1. Bug fix in src/auth/login.ts (lines 45-67)\n   - Fixed null pointer exception in session validation\n\n2. New feature in src/ui/dashboard.tsx (lines 12-89)\n   - Added user metrics widget\n\n3. Style changes in src/styles/theme.css\n   - Updated color variables\n\nAtomic commits should contain a single, coherent unit of work.\nBenefits: easier code review, clean git history, safe git bisect\n\nWhat would you like to do?\n‚óã Split commits (Recommended) - I'll help you stage changes separately\n‚óã Proceed anyway - Commit all changes together (not recommended)\n‚óã Review changes - Show the full diff again\n‚óã Cancel - Exit without committing\n```\n\n**If \"Split commits\" selected:**\n\n1. Show grouped changes by concern:\n   ```\n   I've identified these separate concerns:\n\n   Concern 1: Bug fix in auth module\n   Files: src/auth/login.ts\n\n   Concern 2: New dashboard feature\n   Files: src/ui/dashboard.tsx\n\n   Concern 3: Style updates\n   Files: src/styles/theme.css\n\n   Which concern would you like to commit first?\n   ‚óã Bug fix in auth module\n   ‚óã New dashboard feature\n   ‚óã Style updates\n   ```\n\n2. Unstage other files:\n   ```bash\n   git reset HEAD <files-not-in-selected-concern>\n   ```\n\n3. Continue to Step 5 with only the selected files staged\n\n4. After commit completes, prompt:\n   ```\n   Commit created successfully!\n\n   Remaining unstaged changes:\n   - src/ui/dashboard.tsx (new feature)\n   - src/styles/theme.css (style updates)\n\n   Would you like to commit the next concern?\n   ‚óã Yes - Continue with next concern\n   ‚óã No - I'll handle the rest manually\n   ```\n\n5. If \"Yes\", stage the next concern's files and repeat from Step 4\n\n**If \"Proceed anyway\" selected:**\n- Log a note that user chose to bypass atomicity check\n- Continue to Step 5\n\n### Step 5: Load Commit Style Rules\n\nLoad the style rules from the plugin's `styles/` directory based on the selected style.\n\n**Style files location:** `${PLUGIN_ROOT}/styles/<style-name>.md`\n\n**Available styles:**\n- `classic.md` - Traditional git commit style (default)\n- `conventional.md` - Conventional Commits specification\n\n**Loading process:**\n1. Read the style file: `styles/{selected_style}.md`\n2. Parse the YAML frontmatter for metadata (name, description, default)\n3. Use the markdown content as the complete style guide\n\nThe style files contain comprehensive rules including:\n- Subject line formatting rules\n- Body formatting rules\n- Examples of good and bad commits\n- Anti-patterns to avoid\n\n**IMPORTANT:** Always read the full style file before generating a commit message. The style files are the single source of truth for formatting rules.\n\n### Step 6: Handle Pair Programming (--pair flag)\n\n**If `--pair` flag is set:**\n\n1. Read saved pairs from `.claude/git-commit.local.md`\n\n2. If pairs exist, show selection:\n   ```\n   Select co-author for this commit:\n   ‚óã John Doe <john@example.com>\n   ‚óã Jane Smith <jane@example.com>\n   ‚óã Add new pair - Enter new co-author details\n   ```\n\n3. If \"Add new pair\" selected OR no pairs saved:\n   ```\n   Enter co-author name:\n   > [user input]\n\n   Enter co-author email:\n   > [user input]\n\n   Save this pair for future use?\n   ‚óã Yes\n   ‚óã No\n   ```\n\n4. If saving, update `.claude/git-commit.local.md`:\n   ```yaml\n   ---\n   commit_style: classic\n   pairs:\n     - name: \"John Doe\"\n       email: \"john@example.com\"\n     - name: \"New Person\"\n       email: \"new@example.com\"\n   ---\n   ```\n\n5. Store selected co-author for commit message generation\n\n### Step 6b: Gather Session Context\n\n**CRITICAL:** Before generating the commit message, review the current conversation history to extract context about WHY these changes were made.\n\n**What to look for in the conversation:**\n\n| Context Type | What to Extract |\n|--------------|-----------------|\n| **User Intent** | What did the user originally ask for? What problem were they solving? |\n| **Decisions Made** | What approaches were discussed? Why was this implementation chosen? |\n| **Trade-offs** | What alternatives were considered and rejected? |\n| **Requirements** | Any specific constraints or requirements mentioned? |\n| **References** | Issue numbers, ticket IDs, PR references, or external links discussed? |\n\n**Extraction process:**\n\n1. **Identify the original request**\n   - Find the user's initial message that led to these changes\n   - Note the problem being solved or feature being added\n   - Capture any specific requirements stated\n\n2. **Trace key decisions**\n   - What implementation approaches were discussed?\n   - Why was the current approach chosen over alternatives?\n   - Were there any trade-offs mentioned?\n\n3. **Gather important context**\n   - Issue/ticket numbers mentioned (e.g., \"fixes #123\", \"JIRA-456\")\n   - Breaking changes or migration notes discussed\n   - Performance or security considerations\n   - Dependencies or prerequisites mentioned\n\n4. **Note user clarifications**\n   - Any follow-up questions and answers\n   - Scope adjustments or refinements\n   - Explicit preferences stated by the user\n\n**Example extraction:**\n\nIf the conversation included:\n> User: \"The login page crashes when users enter invalid emails. Can you add validation?\"\n> Claude: \"I'll add email validation with regex. Should I also add rate limiting?\"\n> User: \"Yes, add rate limiting too - we've been getting bot attacks\"\n\nExtract:\n- **Intent:** Fix login crash on invalid emails\n- **Decision:** Added email validation with regex\n- **Additional context:** Rate limiting added due to bot attacks\n- **Problem:** Users experiencing crashes, security concern with bots\n\n**Use this context to:**\n- Write a commit body that explains the \"why\" not just the \"what\"\n- Include relevant background that future developers need\n- Reference issues or decisions from the conversation\n- Capture the reasoning that would otherwise be lost\n\n### Step 7: Generate Commit Message\n\nUsing all gathered context, generate the commit message:\n\n**Inputs to consider:**\n- Staged diff content\n- User-provided context/intention (command arguments)\n- **Session context** (from Step 6b - conversation history)\n- Current commit message (if amending)\n- Recent commit messages (for style consistency)\n- Selected commit style rules\n- Co-author info (if `--pair` flag set)\n\n**Generation guidelines:**\n\n1. **Analyze the diff** to understand WHAT changed:\n   - What files were modified\n   - What the code changes do\n   - The technical impact of the changes\n\n2. **Use session context** to understand WHY (from Step 6b):\n   - Reference the original user request that led to these changes\n   - Include key decisions and reasoning from the conversation\n   - Mention trade-offs or alternatives that were considered\n   - Include issue/ticket references if mentioned in conversation\n\n3. **Prioritize context sources:**\n   - Explicit user arguments (command line) > Session context > Diff analysis\n   - If user provided context via arguments, prioritize it\n   - Session context fills in the \"why\" that arguments might miss\n\n4. **Apply the loaded style rules strictly** (from Step 5)\n   - Follow all formatting rules from the style file\n   - Use the examples as reference for good formatting\n   - Avoid the anti-patterns listed in the style file\n\n5. **Generate body text that explains:**\n   - WHAT: Summary of the changes (from diff analysis)\n   - WHY: Reason/motivation (from session context)\n   - CONTEXT: Important background (from conversation history)\n   - IMPACT: Any caveats, side effects, or breaking changes\n\n6. **CRITICAL:** Wrap ALL lines at 72 characters maximum\n   - Count characters carefully\n   - Break at natural word boundaries\n\n7. **Co-author handling:**\n   - Only append `Co-Authored-By:` if `--pair` flag was used AND a human co-author was selected in Step 6\n   - **NEVER add Claude Code, Claude Opus, Claude Sonnet, or any Anthropic-related co-author lines**\n   - If co-author selected via `--pair`, append:\n   ```\n\n   Co-Authored-By: Name <email>\n   ```\n\n**Example with session context:**\n\nIf the conversation was about \"fixing login crashes due to invalid emails and adding rate limiting for bot attacks\", the commit message should be:\n\n```\nAdd email validation and rate limiting to login\n\nUsers reported crashes when entering malformed email addresses. The\nprevious implementation passed raw input to the auth service without\nvalidation.\n\nChanges:\n- Add regex-based email validation before auth call\n- Implement rate limiting (5 attempts per minute per IP)\n- Add user-friendly error messages for validation failures\n\nRate limiting addresses the bot attack concern raised during\nimplementation discussion.\n```\n\nNOT just:\n```\nAdd validation to login\n\nAdd email validation and rate limiting.\n```\n\n### Step 8: Present and Confirm\n\nShow the generated commit message:\n\n```\nGenerated commit message:\n\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nAdd user session timeout handling\n\nImplement automatic session expiration after 30 minutes of inactivity.\nThe timeout duration is configurable via SESSION_TIMEOUT environment\nvariable.\n\nThis prevents unauthorized access when users forget to log out on\nshared machines. Sessions are validated on each authenticated request.\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\nWhat would you like to do?\n‚óã Commit - Create the commit with this message\n‚óã Edit message - Modify the message before committing\n‚óã Regenerate - Generate a new message (optionally provide more context)\n‚óã Cancel - Exit without committing\n```\n\n**If \"Edit message\" selected:**\n- Use AskUserQuestion with text input:\n  ```\n  Edit the commit message below:\n  (Use \\n for new lines, body starts after first blank line)\n\n  Current: Add user session timeout handling\\n\\nImplement automatic...\n  ```\n- Parse the edited message, preserving the user's formatting\n\n**If \"Regenerate\" selected:**\n- Ask: \"Any additional context to help generate a better message?\"\n- If provided, add to context and regenerate from Step 7\n\n### Step 9: Execute Commit\n\nBased on user selection:\n\n**Creating the commit:**\n\n```bash\n# Standard commit (no co-author)\ngit commit -m \"$(cat <<'EOF'\nSubject line here\n\nBody text here, wrapped at 72 characters as required by\nthe style guidelines.\nEOF\n)\"\n\n# Only if --pair flag was used and human co-author was selected:\ngit commit -m \"$(cat <<'EOF'\nSubject line here\n\nBody text here, wrapped at 72 characters as required by\nthe style guidelines.\n\nCo-Authored-By: Human Name <human@email.com>\nEOF\n)\"\n```\n\n**IMPORTANT:** Never add Claude/Anthropic-related Co-Authored-By lines.\n\n**If `--amend` flag:**\n\n```bash\ngit commit --amend -m \"$(cat <<'EOF'\n...\nEOF\n)\"\n```\n\n**After commit:**\n\n1. Verify commit was created: `git log -1 --oneline`\n2. Show success message:\n   ```\n   Commit created successfully!\n\n   abc1234 Add user session timeout handling\n\n   Files committed:\n   - src/auth/session.ts\n   - src/middleware/auth.ts\n   ```\n\n3. If there were remaining changes from split commits flow, prompt to continue\n\n---\n\n## Settings File: .claude/git-commit.local.md\n\n```yaml\n---\ncommit_style: classic\npairs:\n  - name: \"John Doe\"\n    email: \"john@example.com\"\n  - name: \"Jane Smith\"\n    email: \"jane@example.com\"\n---\n\n# Git Commit Plugin Settings\n\nThis file stores your preferences for the git-commit plugin.\n\n## Available Settings\n\n| Setting | Values | Description |\n|---------|--------|-------------|\n| commit_style | classic, conventional | Default commit message style |\n| pairs | list | Saved co-authors for pair programming |\n```\n\n---\n\n## Error Handling\n\n### Not a Git Repository\n```\nError: Not a git repository.\nRun this command from within a git repository.\n```\n\n### No Staged Changes (after user declines to stage)\n```\nNo changes to commit. Stage some changes first:\n  git add <files>\n  git add -A  # stage all\n```\n\n### Amend Safety Violations\n\n**Commit already pushed:**\n```\nWarning: This commit has already been pushed to the remote.\nAmending will require a force push, which can cause issues for collaborators.\n\nAre you sure you want to amend?\n‚óã Yes, I understand the implications\n‚óã No, create a new commit instead\n‚óã Cancel\n```\n\n**Not user's commit:**\n```\nError: Cannot amend this commit.\nThe commit was authored by someone else (John Doe <john@example.com>).\nOnly amend your own commits.\n```\n\n### MCP Tools Unavailable\nIf MCP git tools are unavailable, silently fall back to Bash commands.\nDo not show errors to the user - just use the fallback.\n\n---\n\n## Important Notes\n\n- **Strict atomicity by default:** Always check for atomic commits unless `--no-atomic-check` is passed\n- **72 character wrap is mandatory:** Every line in the body MUST be 72 characters or less\n- **Never skip validation:** If staged changes fail atomicity check, user must acknowledge\n- **Preserve user context:** When user provides context, incorporate it naturally, don't ignore it\n- **Co-author format:** Always use `Co-Authored-By: Name <email>` format (GitHub recognizes this)\n- **Amend safety:** Never amend commits that are pushed or authored by others\n- **MCP fallback:** Always have Bash fallbacks for MCP tools\n- **CRITICAL - No automatic Claude co-author:** Do NOT add \"Claude Code\", \"Claude Opus\", \"Claude Sonnet\", or any Claude/Anthropic-related Co-Authored-By lines. Only add co-author attribution when the `--pair` flag is explicitly used and a human co-author is selected. This plugin overrides any default Claude Code behavior regarding automatic co-author attribution.\n",
        "plugins/git-commit/hooks/hooks.json": "{\n  \"description\": \"Intercept direct git commit attempts and redirect to the /commit plugin workflow\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"mcp__1mcp__git_1mcp_git_commit\",\n        \"hooks\": [\n          {\n            \"type\": \"prompt\",\n            \"prompt\": \"${CLAUDE_PLUGIN_ROOT}/hooks/intercept-mcp-commit.md\"\n          }\n        ]\n      },\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"prompt\",\n            \"prompt\": \"${CLAUDE_PLUGIN_ROOT}/hooks/intercept-bash-commit.md\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/git-commit/hooks/intercept-bash-commit.md": "# Bash Git Commit Interception\n\nYou are about to execute a Bash command. Check if it contains a `git commit` operation.\n\n## Detection Logic\n\nExamine the command for git commit patterns:\n- `git commit`\n- `git commit -m`\n- `git commit -am`\n- `git commit --amend`\n- `git commit -a -m`\n- Any variation with `git` followed by `commit`\n\n**Exceptions - DO NOT intercept these:**\n- Commands that only READ commit info: `git log`, `git show`, `git rev-parse`\n- Commands checking commit status: `git status`\n- Commands in subshells that don't actually commit: `$(git log ...)`\n- The /commit command itself invoking git commit (check if already in commit workflow)\n\n## If Command Contains Git Commit\n\n**BLOCK this tool call** and redirect to the `/commit` plugin:\n\n### Why Direct Git Commit Should Be Avoided\n\nThe git-commit plugin provides critical features that direct `git commit` bypasses:\n\n1. **Atomic Commit Validation**\n   - Detects when staged changes mix unrelated concerns\n   - Helps split non-atomic changes into separate commits\n   - Checks for related unstaged files that should be included\n\n2. **Intelligent Message Generation**\n   - Analyzes the diff to understand WHAT changed\n   - Reviews conversation history to capture WHY\n   - Generates properly formatted messages (72-char wrap, style rules)\n\n3. **Style Enforcement**\n   - Classic style: Clean subject lines following \"7 rules of commit messages\"\n   - Conventional style: Structured format (feat:, fix:, etc.)\n\n4. **Safety Features**\n   - Amend safety checks (pushed commits, author verification)\n   - Prevents accidental commits of mixed concerns\n\n### Redirect Instructions\n\nInstead of running the git commit command directly, invoke:\n\n```\n/commit\n```\n\nAvailable options:\n- `/commit` - Default classic style with atomicity checks\n- `/commit --style conventional` - Use conventional commit format\n- `/commit --amend` - Safely amend the previous commit\n- `/commit --pair` - Add co-author attribution\n- `/commit --no-atomic-check` - Skip atomicity validation (use sparingly)\n- `/commit <context>` - Provide context for better message generation\n\n## If Command Does NOT Contain Git Commit\n\nAllow the command to proceed normally. This hook only intercepts git commit operations.\n\n---\n\n**Decision Logic:**\n- Contains `git commit` -> **BLOCK** and suggest `/commit`\n- Does not contain `git commit` -> **ALLOW** to proceed\n",
        "plugins/git-commit/hooks/intercept-mcp-commit.md": "# MCP Git Commit Interception\n\nYou are about to use the `mcp__1mcp__git_1mcp_git_commit` tool directly.\n\n## STOP - Use the /commit Plugin Instead\n\nThe git-commit plugin provides a comprehensive workflow for creating commits. Direct use of the MCP git commit tool bypasses important features:\n\n1. **Atomic Commit Validation** - Ensures commits represent single, coherent units of work\n2. **Intelligent Message Generation** - Creates well-formatted commit messages following style guidelines\n3. **Session Context Awareness** - Captures the \"why\" behind changes from conversation history\n4. **Style Consistency** - Supports classic and conventional commit formats\n5. **Pair Programming Attribution** - Proper co-author handling\n6. **Safety Checks** - Amend safety, push verification, and more\n\n## Required Action\n\n**BLOCK this tool call** and instead invoke the `/commit` command:\n\n```\n/commit\n```\n\nOr with options:\n```\n/commit --style conventional\n/commit --amend\n/commit --pair\n/commit <context about the changes>\n```\n\n## Why This Matters\n\nDirect git commits:\n- Skip atomicity validation (mixing unrelated changes)\n- Miss session context that explains WHY changes were made\n- May not follow the project's commit message style\n- Bypass safety checks for amending commits\n\nThe /commit plugin ensures high-quality, well-documented commit history.\n\n---\n\n**Decision: BLOCK** - Do not proceed with `mcp__1mcp__git_1mcp_git_commit`. Use `/commit` instead.\n",
        "plugins/git-commit/skills/commit-style.md": "---\nname: commit-style\ndescription: Provides educational guidance on writing good git commit messages. Activates when users ASK QUESTIONS about commit message formats, styles, conventional commits, classic commits, atomic commit principles, or git best practices. Does NOT activate when users want to PERFORM a commit (use the commit skill instead).\n---\n\n# Git Commit Message Guidelines\n\nThis skill provides **educational context** about writing effective git commit messages.\n\n## When to Activate\n\nActivate this skill when the user **asks questions** about:\n- How to write commit messages\n- Commit message formats or styles\n- Conventional commits vs classic commits\n- What makes a good commit message\n- Atomic commits\n- Git best practices for commits\n\n## When NOT to Activate\n\nDo NOT use this skill when the user wants to **perform a commit**. The following are handled by the `commit` skill:\n- \"commit these changes\"\n- \"let's commit\"\n- \"make a commit\"\n- \"commit this\"\n\nFor action requests, the `commit` skill invokes the `/commit` workflow.\n\n## Available Commit Styles\n\nThis plugin supports multiple commit styles. For detailed rules, examples, and anti-patterns, read the style files in the `styles/` directory:\n\n- **Classic** (`styles/classic.md`) - Traditional git commit style following the \"7 Rules\"\n- **Conventional** (`styles/conventional.md`) - Structured format for automation\n\n## Quick Reference\n\n| Aspect | Classic | Conventional |\n|--------|---------|--------------|\n| Subject case | Capitalized | lowercase |\n| Type prefix | No | Yes (feat:, fix:, etc.) |\n| Max subject | 50 chars | 50 chars (including type) |\n| Body wrap | 72 chars | 72 chars |\n| Mood | Imperative | Imperative |\n| Automation | Manual | Changelog/semver friendly |\n\n## Atomic Commits\n\nAn atomic commit represents a **single, complete, coherent unit of work**.\n\n### Principles\n\n1. **Single Responsibility:** One commit = one logical change\n2. **Reversibility:** Can be reverted without side effects\n3. **Completeness:** Leaves codebase in working state\n4. **Describable:** Can be explained in one sentence without \"and also\"\n\n### Red Flags (Non-Atomic)\n\n- Multiple unrelated concerns in one commit\n- Using \"and\" to connect separate ideas in message\n- Mix of bug fix + new feature\n- Changes across unrelated modules\n- Difficult to revert cleanly\n\n### Benefits\n\n- **Easier code review:** Reviewers understand each change\n- **Clean git history:** Meaningful, navigable history\n- **Safe git bisect:** Find bugs efficiently\n- **Simple reverts:** Undo specific changes without collateral damage\n\n## Recommendations\n\n- **Default to classic commits** for most projects\n- **Use conventional commits** when you need:\n  - Automated changelog generation\n  - Semantic version bumping\n  - Structured commit history for tooling\n- **Always write atomic commits** regardless of style\n- **Use `/commit`** to generate properly formatted messages\n\n## Detailed Style Guides\n\nFor comprehensive rules, examples, and anti-patterns for each style, read the corresponding file in the `styles/` directory. The style files are the authoritative source for formatting rules.\n",
        "plugins/git-commit/skills/commit.md": "---\nname: commit\ndescription: Triggers when user wants to PERFORM a git commit action. Activates on phrases like \"commit these changes\", \"commit this\", \"let's commit\", \"make a commit\", \"create a commit\", \"commit my work\", \"commit the changes\", \"time to commit\", \"ready to commit\", \"commit what I've done\", \"save my changes\" (git context), \"commit for me\", \"do the commit\", \"commit now\", \"go ahead and commit\", \"please commit\", \"can you commit\", \"would you commit\"\n---\n\n# Git Commit Action Skill\n\nThis skill recognizes when the user wants to **perform** a commit action (not just learn about commits) and invokes the full `/commit` workflow.\n\n## When to Activate\n\nActivate this skill when the user expresses **intent to commit**, such as:\n\n### Direct Commit Requests\n- \"commit these changes\"\n- \"commit this\"\n- \"let's commit\"\n- \"make a commit\"\n- \"create a commit\"\n- \"commit my work\"\n- \"commit the changes\"\n- \"commit now\"\n\n### Readiness Expressions\n- \"time to commit\"\n- \"ready to commit\"\n- \"I'm ready to commit\"\n- \"let's do the commit\"\n- \"go ahead and commit\"\n\n### Action Delegation\n- \"commit for me\"\n- \"do the commit\"\n- \"please commit\"\n- \"can you commit\"\n- \"would you commit this\"\n- \"commit what I've done\"\n\n### Contextual Git Phrases\n- \"save my changes\" (when in git context or after making code changes)\n- \"save this work\" (when in git context)\n- \"finalize these changes\"\n- \"wrap this up with a commit\"\n\n### With Style Preferences\n- \"commit with conventional style\"\n- \"make a conventional commit\"\n- \"commit this classically\"\n- \"commit using classic style\"\n\n### With Context\n- \"commit this as a bug fix\"\n- \"commit the auth changes\"\n- \"commit what we just did\"\n- \"commit the refactoring\"\n\n## What This Skill Does NOT Handle\n\nDo NOT activate for informational questions - those are handled by `commit-style.md`:\n- \"How do I write a commit message?\"\n- \"What is a conventional commit?\"\n- \"Explain atomic commits\"\n- \"What makes a good commit?\"\n\n## Action\n\nWhen this skill activates, invoke the `/commit` command workflow with any detected context.\n\n### Detecting Style Preference\n\nIf the user's request mentions a style preference, pass it to the command:\n\n| User Phrase | Style Flag |\n|-------------|------------|\n| \"conventional commit\", \"conventional style\", \"use conventional\" | `--style conventional` |\n| \"classic commit\", \"classic style\", \"use classic\" | `--style classic` |\n\n### Detecting Amend Intent\n\nIf the user wants to amend:\n- \"amend the commit\"\n- \"update the last commit\"\n- \"fix the previous commit message\"\n\nPass: `--amend`\n\n### Detecting Pair Programming\n\nIf user mentions pairing:\n- \"commit with pair attribution\"\n- \"add my pair\"\n- \"include co-author\"\n\nPass: `--pair`\n\n### Passing Context\n\nAny descriptive text the user provides should be passed as context to help generate a better commit message:\n\n**Example user input:** \"commit these auth changes as a security fix\"\n\n**Invoke as:** `/commit security fix for auth changes`\n\n## Workflow\n\n1. **Recognize** this is a commit ACTION request\n2. **Extract** any style preference, flags, or context from the user's message\n3. **Invoke** the `/commit` command with appropriate arguments\n4. **Let the command handle** all the complexity:\n   - Repository state checking\n   - Staging changes if needed\n   - Atomic commit validation\n   - Style-specific message generation\n   - User confirmation flow\n\n## Example Activations\n\n| User Says | Action |\n|-----------|--------|\n| \"commit these changes\" | Invoke `/commit` |\n| \"let's make a conventional commit\" | Invoke `/commit --style conventional` |\n| \"commit the login fix\" | Invoke `/commit login fix` |\n| \"time to commit, this fixes the auth bug\" | Invoke `/commit fixes auth bug` |\n| \"commit and add my pair\" | Invoke `/commit --pair` |\n| \"amend the last commit\" | Invoke `/commit --amend` |\n| \"save my changes\" (after editing code) | Invoke `/commit` |\n\n## Important\n\n- This skill **overrides** Claude's default commit behavior\n- Always use the full `/commit` workflow for proper atomic validation and style adherence\n- The `/commit` command handles all edge cases, user preferences, and error scenarios\n- Pass through any context the user provides to improve commit message quality\n",
        "plugins/jot/.claude-plugin/plugin.json": "{\n  \"name\": \"jot\",\n  \"version\": \"1.4.1\",\n  \"description\": \"Quick, low-friction capture of notes, tasks, ideas, session summaries, tech radar blips, and Feynman-style teaching notes with Obsidian-style auto-linking\",\n  \"author\": {\n    \"name\": \"Krishnaswamy Subramanian\",\n    \"email\": \"jskswamy@gmail.com\"\n  },\n  \"keywords\": [\n    \"capture\",\n    \"notes\",\n    \"tasks\",\n    \"ideas\",\n    \"radar\",\n    \"blips\",\n    \"knowledge-management\",\n    \"obsidian\",\n    \"wikilinks\",\n    \"gtd\",\n    \"productivity\",\n    \"learning\",\n    \"feynman\",\n    \"teach\",\n    \"teaching-notes\"\n  ]\n}\n",
        "plugins/jot/README.md": "# Jot\n\nQuick, low-friction capture of notes, tasks, ideas, tech radar blips, and Feynman-style learning teaching with Obsidian-style auto-linking.\n\n## Why Jot?\n\nCapture thoughts, tasks, and discoveries without switching context. Jot provides `/capture` for quick knowledge capture and `/teach` for deepening understanding using the Feynman Technique, automatically linking new notes to related content in your knowledge base.\n\n## Features\n\n- **Quick captures**: Task, note, idea, session, blip - minimal friction\n- **Full captures**: Article, video, blip (GitHub/tools), person, book, organisation, trove, research - URL-based extraction\n- **Feynman teaching**: Interactive `/teach` command for deepening understanding of papers, videos, articles, and concepts you've already studied\n- **Teaching notes**: Capture your learning journey with analogies, misconceptions, and applied scenarios\n- **Session summaries**: Capture Claude Code session outcomes with guided questions\n- **URL references**: Quick captures can reference URLs without triggering full extraction\n- **Type aliases**: `todo` for task, `thought` for note, `conversation` for session\n- **Context capture**: Every capture asks for discovery context\n- **Tech radar**: ThoughtWorks-style blips with quadrants (Tools, Techniques, Platforms, Languages & Frameworks) and rings (Adopt, Trial, Assess, Hold)\n- **Rich content**: Blips include features, installation, usage examples, pros/cons, and alternatives\n- **Auto-linking**: Obsidian-style wikilinks to related notes\n- **Central storage**: All captures go to your configured workbench path\n\n## Installation\n\n```bash\nclaude --plugin-dir ./plugins/jot\n```\n\nOr add to your Claude Code plugins.\n\n## Configuration\n\nCreate `.claude/jot.local.md` in your project or home directory:\n\n```yaml\n---\nworkbench_path: ~/workbench\n---\n```\n\n**Settings:**\n- `workbench_path`: Where to store captured notes (default: `~/workbench`)\n\n## Usage\n\n### Quick Captures (text-based)\n\n```\n/capture task Buy groceries\n/capture note Meeting notes about project X\n/capture idea What if we tried approach Y\n/capture blip Docker --ring adopt --quadrant platforms\n```\n\n### Session Captures\n\n```\n/capture session                    # Guided questions about this Claude session\n/capture conversation               # Alias for session\n```\n\n### Using Aliases\n\n```\n/capture todo Review Alice's PR     # Same as: /capture task\n/capture thought API seems slow     # Same as: /capture note\n```\n\n### Quick Captures with URL References\n\n```\n/capture todo use https://git-cliff.org/ to generate changelog\n```\n\nThis keeps it as a quick task (not full article extraction) with the URL as a reference.\n\n### Full Captures (URL-based)\n\n```\n/capture https://github.com/some/repo          # Auto-detects as blip\n/capture blip https://github.com/astral-sh/uv --ring trial --quadrant tools\n/capture article https://blog.com/post\n/capture video https://youtube.com/watch?v=xxx\n/capture person https://wikipedia.org/wiki/Person\n/capture book https://goodreads.com/book/show/123\n```\n\n### Blip Options\n\nBlips are for tracking technologies on your personal tech radar. All tools, frameworks, libraries, and platforms are captured as blips.\n\n- `--ring`: adopt, trial, assess, hold\n- `--quadrant`: tools, techniques, platforms, languages\n\n**Ring definitions:**\n- **Adopt**: Actively using in production, recommend for new projects\n- **Trial**: Testing in real scenarios, building experience\n- **Assess**: Worth exploring, researching, learning about\n- **Hold**: Not recommended, proceed with caution, or deprecating\n\n**Quadrant definitions:**\n- **Tools**: Development tools, utilities, applications (Docker, VS Code, Terraform)\n- **Techniques**: Methodologies, practices, patterns (TDD, Event Sourcing, GitOps)\n- **Platforms**: Infrastructure, runtime, hosting (Kubernetes, AWS, Vercel)\n- **Languages & Frameworks**: Programming languages, libraries, SDKs (Rust, React, FastAPI)\n\n## Storage Structure\n\n```\n[workbench_path]/\n‚îî‚îÄ‚îÄ notes/\n    ‚îú‚îÄ‚îÄ inbox/          # Quick captures (task, note, idea)\n    ‚îú‚îÄ‚îÄ sessions/       # Claude Code session summaries\n    ‚îú‚îÄ‚îÄ blips/          # Tech radar items (tools, technologies, frameworks)\n    ‚îú‚îÄ‚îÄ learned/        # Teaching notes from /teach\n    ‚îú‚îÄ‚îÄ articles/\n    ‚îú‚îÄ‚îÄ videos/\n    ‚îú‚îÄ‚îÄ people/\n    ‚îú‚îÄ‚îÄ books/\n    ‚îú‚îÄ‚îÄ organisations/\n    ‚îú‚îÄ‚îÄ troves/\n    ‚îî‚îÄ‚îÄ research/\n```\n\n---\n\n## The `/teach` Command\n\nTeach back content you've studied using the **Richard Feynman Iterative Learning Framework**.\n\n> Based on [The Richard Feynman Iterative Learning Framework](https://tools.eq4c.com/prompt/ai-prompt-the-richard-feynman-iterative-learning-framework/) prompt.\n\n### Philosophy: No Shortcuts to Learning\n\nThe `/teach` command implements the Feynman Technique - a method for **deepening** understanding, not acquiring it.\n\n**Prerequisites:**\n- You MUST have already engaged with the content (read the paper, watched the video, studied the concept)\n- This command tests and strengthens YOUR understanding through explanation\n\n**Why this matters:**\nThe Feynman Technique works because explaining reveals gaps. But you can't reveal gaps in knowledge you don't have. The command will ask if you've engaged with the material - be honest. Skipping the learning step only cheats yourself.\n\n**The real learning happens when you:**\n1. Read/watch/study the original content\n2. Struggle with difficult parts\n3. Make connections in your own mind\n4. THEN use `/teach` to test and deepen that understanding\n\n### The Feynman Technique\n\n0. **Prerequisite Check** - Confirm you've engaged with the content\n1. **Topic Assessment** - What do you already know?\n2. **Simplified Explanation** - Explain it like you're teaching a 12-year-old\n3. **Gap Identification** - Find what's missing or unclear\n4. **Guided Questioning** - Answer probing questions to deepen understanding\n5. **Iterative Refinement** - Explain again, simpler and clearer\n6. **Application Testing** - Apply to real-world scenarios\n7. **Teaching Note Creation** - Capture your understanding with analogies\n\n### Content Types\n\n| Type | Source | Auto-detect |\n|------|--------|-------------|\n| `paper` | Research papers, PDFs | arxiv.org, *.pdf |\n| `video` | YouTube videos | youtube.com, youtu.be |\n| `article` | Web articles | Other URLs |\n| `concept` | Plain topics | No URL |\n\n### Depth Levels\n\n| Depth | Iterations | Use when... |\n|-------|------------|-------------|\n| `shallow` | 1 | Quick check, familiar topics |\n| `standard` | 2 | Default, balanced teaching |\n| `deep` | 3 | Complex topics, want mastery |\n\n### Usage Examples\n\n```bash\n# Teach back of a paper you've read\n/teach paper https://arxiv.org/pdf/2512.24601\n\n# Teach back of a video you've watched\n/teach video https://youtube.com/watch?v=abc123\n\n# Teach back of an article you've read\n/teach article https://martinfowler.com/articles/microservices.html\n\n# Teach back of a concept you've studied\n/teach concept Event Sourcing\n\n# Auto-detect type from URL\n/teach https://arxiv.org/abs/2103.12345\n\n# Control depth\n/teach concept CQRS --depth deep\n/teach concept CAP Theorem --depth shallow\n```\n\n### Teaching Notes\n\nAfter the interactive session, a teaching note is saved to `notes/learned/` containing:\n\n- Your simplified explanation (in your own words)\n- Key insight (TL;DR)\n- Core concepts with simple definitions\n- Memorable analogies\n- Common misconceptions and corrections\n- Applied scenarios\n- Your learning journey (where you started, gaps filled, breakthrough moment)\n- Links to related notes\n\n### Interactive Session Flow\n\n1. **Prerequisite check**: \"Have you already engaged with this content?\"\n2. **Assessment**: \"What do you already know about [topic]?\"\n3. **First explanation**: \"Explain [topic] as if to a 12-year-old\"\n4. **Feedback**: Claude identifies gaps and strengths\n5. **Questions**: Probing questions to deepen understanding\n6. **Refined explanation**: Try again, addressing the gaps\n7. **Scenarios**: Apply to real-world situations\n8. **Analogy**: Create a memorable mental model\n9. **Save**: Teaching note written to your workbench\n\n---\n\n## Requirements\n\n- **For video captures**: `yt-dlp` must be installed\n  - macOS: `brew install yt-dlp`\n  - pip: `pip install yt-dlp`\n\n## Sources\n\n- [The Richard Feynman Iterative Learning Framework](https://tools.eq4c.com/prompt/ai-prompt-the-richard-feynman-iterative-learning-framework/) - The `/teach` command implementation\n\n## License\n\nMIT\n",
        "plugins/jot/agents/capture.md": "---\nname: capture\ndescription: Use this agent for URL-based content capture - extracting and saving articles, videos, blips (tools/technologies), people, books, organisations, troves, and research from web URLs. Handles content fetching, template-based extraction, context gathering, and auto-linking to related notes.\n\n<example>\nContext: User wants to save an article they found\nuser: \"capture https://martinfowler.com/articles/microservices.html\"\nassistant: \"I'll use the capture agent to extract and save this article.\"\n<commentary>\nURL-based capture requiring content fetching and extraction - this agent handles the full workflow.\n</commentary>\n</example>\n\n<example>\nContext: User found a GitHub tool they want to track on their radar\nuser: \"capture blip https://github.com/astral-sh/uv\"\nassistant: \"I'll capture this as a blip using the capture agent to extract the README and key information.\"\n<commentary>\nGitHub repos are captured as blips - tech radar items with rich documentation.\n</commentary>\n</example>\n\n<example>\nContext: User wants to capture a GitHub repo without specifying type\nuser: \"capture https://github.com/crate-ci/typos\"\nassistant: \"I'll capture this as a blip - GitHub repos are tracked on your tech radar.\"\n<commentary>\nAuto-detect: github.com URLs are captured as blips by default.\n</commentary>\n</example>\n\n<example>\nContext: User wants to save a YouTube video\nuser: \"capture video https://youtube.com/watch?v=abc123\"\nassistant: \"I'll use the capture agent to fetch the transcript and save this video.\"\n<commentary>\nVideo capture requires yt-dlp for transcript extraction - capture agent handles this.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: cyan\ntools:\n  - Read\n  - Write\n  - Glob\n  - Grep\n  - Bash\n  - WebFetch\n  - AskUserQuestion\n---\n\nYou are a specialized agent for capturing and extracting information from web URLs into structured markdown notes.\n\n**Your Core Responsibilities:**\n1. Fetch content from URLs (web pages, GitHub repos, videos)\n2. Ask user for discovery context before saving\n3. Extract and structure content using appropriate template\n4. Find and link related existing notes\n5. Save to the correct location in the workbench\n\n**Configuration:**\n\nRead settings from `.claude/jot.local.md`:\n```yaml\n---\nworkbench_path: ~/workbench\n---\n```\nDefault: `~/workbench` if not configured.\n\n**Capture Workflow:**\n\n### Step 1: Determine Content Type and Check for Existing Note\n\n**IMPORTANT:** Check for existing notes FIRST, before any user interaction.\n\n#### 1a. Auto-detect type from URL:\n- `youtube.com`, `youtu.be` ‚Üí video\n- `github.com` ‚Üí **blip** (tech radar item, NOT article)\n- `wikipedia.org/wiki/[Person]` ‚Üí person\n- `goodreads.com`, `amazon.com/book` ‚Üí book\n- `crunchbase.com`, `/about`, `/company` ‚Üí organisation\n- `substack.com`, newsletter sites ‚Üí trove\n- Default ‚Üí article\n\n**IMPORTANT**: The `tool` type is deprecated. All tools, technologies, libraries, and frameworks are captured as **blips**. If user specifies `tool`, treat as `blip`.\n\n#### 1b. Extract identifier from URL immediately (NO WebFetch yet):\n- **GitHub URLs**: Extract repository name from URL path\n  - `github.com/orhun/git-cliff` ‚Üí \"git-cliff\"\n  - `github.com/astral-sh/uv` ‚Üí \"uv\"\n- **YouTube URLs**: Extract video ID or use URL slug\n  - `youtube.com/watch?v=abc123` ‚Üí \"abc123\"\n- **Other URLs**: Extract last path segment or domain\n  - `martinfowler.com/articles/microservices.html` ‚Üí \"microservices\"\n  - `example.com/some-article` ‚Üí \"some-article\"\n\n#### 1c. Check if file exists BEFORE any user questions:\n```bash\nls \"${WORKBENCH_PATH}/notes/{folder}/slugified-name.md\" 2>/dev/null\n```\nWhere folder is: blips (GitHub), articles, videos, people, books, organisations, troves, research\n\n#### 1d. If existing note found:\n1. **Read the existing note immediately**\n2. **Show key info to user:**\n   - For blips: Title, Ring level, Last Updated\n   - For articles/videos: Title, Source, Last Updated\n   - For others: Title, Last Updated\n3. **Ask user with AskUserQuestion:**\n   - \"Update existing\" (Recommended) - Enhance the existing note\n   - \"View full note\" - Show complete content, then ask again\n   - \"Create new anyway\" - Continue with normal creation flow\n\n4. **If \"Update existing\":**\n   - Proceed to **Enhance Existing Note Workflow** (see below)\n   - The note content is already loaded - pass it to the enhance workflow\n\n5. **If \"View full note\":**\n   - Display the full note content\n   - Ask the same question again\n\n6. **If \"Create new anyway\":**\n   - Continue to Step 2\n\n#### 1e. If no existing note:\n- Continue to Step 2 (normal creation flow)\n\n### Step 2: Check Dependencies (Video Only)\n\n**Note:** Only reach this step if no existing note was found OR user chose \"Create new anyway\".\n\nFor videos, verify yt-dlp is installed:\n```bash\nwhich yt-dlp || command -v yt-dlp\n```\nIf not found, inform user: \"YouTube capture requires yt-dlp. Install with: `brew install yt-dlp` (macOS) or `pip install yt-dlp`\"\n\n### Step 3: Ask for Discovery Context\n\n**REQUIRED**: Before processing, ask the user:\n\"How did you discover this? What's the context?\"\n\nUse their exact response in italics at the top of the note.\n\n### Step 4: Additional Questions (Blips Only)\n\nFor blip captures (including GitHub repos), also ask:\n1. \"What is this and why is it on your radar?\" ‚Üí Summary section\n2. \"Why are you placing it at this ring level (Adopt/Trial/Assess/Hold)?\" ‚Üí Ring Rationale section\n\n### Step 5: Fetch Content\n\n- **Web pages**: Use WebFetch to retrieve content\n- **Videos**: Use yt-dlp to get transcript:\n  ```bash\n  yt-dlp --write-auto-sub --sub-lang en --skip-download -o \"%(title)s\" \"<URL>\"\n  ```\n- **GitHub (blips)**: Fetch README content, extract features, installation commands, usage examples\n\n### Step 6: Read Template\n\nRead the appropriate template from:\n`${CLAUDE_PLUGIN_ROOT}/templates/capture/[type].md`\n\nTypes: article, video, blip, person, book, organisation, trove, research\n\n**Note**: For GitHub URLs and all tools/technologies, use the `blip.md` template.\n\n### Step 7: Generate Note Content\n\nFollow the template structure:\n- Fill metadata (date, source URL, author if available)\n- Add discovery context in italics\n- For blips: Include user's Summary and Ring Rationale (their exact words)\n- For blips with URLs: Generate rich content:\n  - 6+ Key Features with bold names\n  - Installation commands\n  - 3+ Usage Examples\n  - 4 Strengths, 3 Considerations\n  - 3+ Alternatives with comparisons\n- Generate 5-7 relevant tags (lowercase, hyphenated)\n\n### Step 8: Find Related Notes\n\nSearch existing notes in the workbench:\n1. Extract tags and key terms from new note\n2. Glob for notes in `${WORKBENCH_PATH}/notes/`\n3. Grep for matching tags or topics\n4. Select top 3-5 most relevant matches\n5. Add [[wikilinks]] in Related Notes section\n\n### Step 9: Save the Note\n\n**Filename format** (all reference items use slugified names, no date prefix):\n- Articles: `slugified-title.md`\n- Videos: `slugified-title.md`\n- Blips: `slugified-name.md`\n- People: `slugified-name.md`\n- Books: `slugified-title.md`\n- Organisations: `slugified-name.md`\n- Troves: `slugified-name.md`\n- Research: `slugified-topic.md`\n\nSlugify: lowercase, hyphens for spaces, no special chars\n\n**Location:** `${WORKBENCH_PATH}/notes/[type]/`\n- articles/ | videos/ | blips/ | people/ | books/ | organisations/ | troves/ | research/\n\nCreate directory if it doesn't exist:\n```bash\nmkdir -p \"${WORKBENCH_PATH}/notes/[type]\"\n```\n\n### Step 10: Report Success\n\nTell user: \"Captured [type] to [full path]\"\nIf related notes found: \"Linked to [N] related notes\"\n\n**Quality Standards:**\n- Always ask for discovery context first\n- For blips: Always ask for Summary and Ring Rationale\n- Use emojis on headings exactly as in template\n- Generate meaningful tags (5-7)\n- Link to genuinely related notes only\n- For blips: Target 80-120+ lines of rich content\n- Preserve code examples with proper formatting\n- Note version numbers if mentioned\n\n---\n\n## Enhance Existing Note Workflow\n\nWhen user chooses to enhance an existing note (from Step 1b):\n\n### Step E1: Read Existing Note\nRead the full content of the existing note.\n\n### Step E2: Ask What to Enhance\nAsk user: \"What would you like to add or update in this note?\"\n\nSuggest options based on note type:\n- **Blip**: \"Update ring level\", \"Add new features\", \"Update usage examples\", \"Add alternatives\"\n- **Article/Video**: \"Add personal notes\", \"Update key takeaways\", \"Add related links\"\n- **Person/Organisation**: \"Update information\", \"Add notes\", \"Add related links\"\n- **Book**: \"Add reading notes\", \"Update status\", \"Add quotes\"\n- **Trove**: \"Add new items\", \"Update description\"\n- **Research**: \"Add new findings\", \"Update conclusions\"\n\n### Step E3: Gather New Context (if applicable)\nIf adding significant new content, ask for discovery context:\n\"How did you rediscover this? What's the new context?\"\n\n### Step E4: Merge Content\nIntelligently merge new content with existing:\n- Add new sections without duplicating existing content\n- Update metadata (Last Updated date)\n- For blips: Update ring level if changed, add to Movement History\n- Preserve user's original verbatim content in Summary/Ring Rationale\n\n### Step E5: Save Updated Note\n- Save to the **same path**, overwriting the existing file\n- Update \"Last Updated\" field to current date\n- Preserve original \"Created\" or \"Captured\" date\n\n### Step E6: Report Success\n\"Enhanced [type] at [path]\"\n",
        "plugins/jot/agents/content-extractor.md": "---\nname: content-extractor\ndescription: Use this agent to extract content from research papers (PDFs), YouTube videos, and web articles for the Feynman learning process. Handles PDF downloads, video transcripts, and web content fetching.\n\n<example>\nContext: User wants to learn from a research paper\nuser: \"explain https://arxiv.org/pdf/2512.24601\"\nassistant: \"I'll extract the content from this research paper for learning.\"\n<commentary>\nPDF URL - content extractor downloads and extracts text for the learning loop.\n</commentary>\n</example>\n\n<example>\nContext: User wants to learn from a YouTube video\nuser: \"explain video https://youtube.com/watch?v=abc123\"\nassistant: \"I'll extract the transcript from this video for learning.\"\n<commentary>\nYouTube URL - uses yt-dlp for transcript extraction.\n</commentary>\n</example>\n\n<example>\nContext: User wants to learn from an article\nuser: \"explain article https://martinfowler.com/bliki/CQRS.html\"\nassistant: \"I'll fetch and extract this article's content for learning.\"\n<commentary>\nWeb article - uses WebFetch to retrieve content.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: blue\ntools:\n  - Read\n  - Write\n  - Bash\n  - WebFetch\n  - AskUserQuestion\n---\n\nYou are a specialized agent for extracting content from various sources to prepare for Feynman-style learning.\n\n**Your Core Responsibilities:**\n1. Identify content type from URL\n2. Fetch and extract content appropriately\n3. Structure content for the learning process\n4. Return extracted content to the learning-tutor agent\n\n**Content Extraction Workflows:**\n\n## For Research Papers (PDFs)\n\n### Step 1: Detect PDF Source\n\nIdentify the source type:\n- `arxiv.org/abs/XXXX` ‚Üí Construct PDF URL: `https://arxiv.org/pdf/XXXX.pdf`\n- `arxiv.org/pdf/XXXX` ‚Üí Use directly\n- Direct `.pdf` URLs ‚Üí Use directly\n- DOI URLs ‚Üí Note: May need to resolve, but try direct fetch first\n\n### Step 2: Download PDF\n\n```bash\n# Create temp directory\nmkdir -p /tmp/feynman-learn\n\n# Download PDF\ncurl -L \"{pdf_url}\" -o /tmp/feynman-learn/paper.pdf\n```\n\n**For arxiv URLs:**\n- If URL is `arxiv.org/abs/2512.24601`, convert to `arxiv.org/pdf/2512.24601.pdf`\n- If URL is `arxiv.org/pdf/2512.24601`, append `.pdf` if missing\n\n### Step 3: Extract Text from PDF\n\nUse the Read tool to read the PDF directly:\n```\nRead /tmp/feynman-learn/paper.pdf\n```\n\nThe Read tool has native PDF support and will extract text content.\n\n### Step 4: Structure the Content\n\nExtract and organize:\n- **Title**: Usually at the top of the first page\n- **Authors**: Listed below the title\n- **Abstract**: Usually labeled, contains summary\n- **Sections**: Main headings and their content\n- **Conclusions**: Usually at the end\n\nReturn structured content to the learning-tutor agent.\n\n---\n\n## For YouTube Videos\n\n### Step 1: Check yt-dlp Installation\n\n```bash\nwhich yt-dlp || command -v yt-dlp\n```\n\nIf not found, inform user:\n\"YouTube transcript extraction requires yt-dlp. Install with: `brew install yt-dlp` (macOS) or `pip install yt-dlp`\"\n\n### Step 2: Get Video Metadata\n\n```bash\nyt-dlp --print title --print description --skip-download \"{url}\"\n```\n\n### Step 3: Get Transcript\n\n```bash\n# Create temp directory\nmkdir -p /tmp/feynman-learn\n\n# Download auto-generated subtitles\nyt-dlp --write-auto-sub --sub-lang en --skip-download --sub-format vtt -o \"/tmp/feynman-learn/video\" \"{url}\"\n```\n\n### Step 4: Read and Parse Transcript\n\n```bash\n# Find the subtitle file\nls /tmp/feynman-learn/*.vtt\n```\n\nRead the VTT file and clean it:\n- Remove timestamp lines\n- Remove formatting tags\n- Consolidate into readable paragraphs\n\n### Step 5: Structure the Content\n\nReturn:\n- **Title**: Video title\n- **Description**: Video description\n- **Transcript**: Cleaned transcript text\n- **Key Topics**: Extracted from description or transcript headings\n\n---\n\n## For Web Articles\n\n### Step 1: Fetch with WebFetch\n\n```\nWebFetch(url, \"Extract the complete article content including: title, author, publication date, all main text, key arguments, conclusions, and any code examples. Preserve the structure and headings.\")\n```\n\n### Step 2: Structure the Content\n\nOrganize the fetched content:\n- **Title**: Article title\n- **Author**: If available\n- **Date**: Publication date if available\n- **Main Content**: Full article text\n- **Key Sections**: Major headings and their content\n- **Conclusions**: Key takeaways\n\n---\n\n## Output Format\n\nReturn to the learning-tutor agent in this structure:\n\n```\nCONTENT EXTRACTION COMPLETE\n\n**Type:** [paper|video|article]\n**Title:** [Extracted title]\n**Source:** [URL]\n**Author:** [Author(s) if available, or \"Unknown\"]\n\n---\n\n## Content Summary\n\n[Brief 2-3 sentence summary of what this content is about]\n\n---\n\n## Full Extracted Content\n\n[Full text content, organized by sections if applicable]\n\n### [Section 1 Title]\n[Section content]\n\n### [Section 2 Title]\n[Section content]\n\n...\n\n---\n\n## Key Terms Identified\n\n- [Term 1]: [Brief context]\n- [Term 2]: [Brief context]\n- [Term 3]: [Brief context]\n\n---\n\nContent is ready for the Feynman learning process.\n```\n\n---\n\n## Error Handling\n\n### PDF Download Fails\n- Check if URL is accessible\n- Try alternate URL construction (abs vs pdf for arxiv)\n- Inform user if PDF cannot be retrieved\n\n### yt-dlp Not Installed\n- Provide clear installation instructions\n- Offer to continue with just video metadata if available via WebFetch\n\n### WebFetch Returns Partial Content\n- Note any truncation\n- Inform user if critical content may be missing\n- Suggest opening URL directly if needed\n\n### No Content Extracted\n- Report clearly what went wrong\n- Suggest alternatives (different URL, manual content paste)\n\n---\n\n## Quality Standards\n\n- Always report the source URL\n- Preserve technical terms accurately\n- Note if content was truncated or partially extracted\n- Identify key terms that will be important for learning\n- Structure content logically for the learning process\n",
        "plugins/jot/agents/learning-tutor.md": "---\nname: learning-tutor\ndescription: Use this agent to run the interactive Feynman learning loop for solidifying understanding. Confirms prior engagement with content, guides the user through explaining concepts simply, identifies gaps, asks probing questions, and iterates to mastery. Produces a teaching note capturing the refined understanding.\n\n<example>\nContext: User wants to solidify understanding of a concept they've studied\nuser: \"solidify concept Event Sourcing\"\nassistant: \"Before we begin, I need to confirm: have you already spent time studying Event Sourcing? The Feynman Technique requires prior engagement with the material.\"\n<commentary>\nAlways starts with prerequisite check - the user must have already engaged with the content.\n</commentary>\n</example>\n\n<example>\nContext: Content has been extracted from a paper user has read\nuser: \"[content from paper about attention mechanisms]\"\nassistant: \"I see you want to solidify your understanding of attention mechanisms. Have you already read through this paper? This technique works best when you've engaged with the material first.\"\n<commentary>\nPaper-based solidification - confirms engagement before proceeding.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: yellow\ntools:\n  - Read\n  - Write\n  - Glob\n  - Grep\n  - Bash\n  - AskUserQuestion\n---\n\nYou are a learning tutor implementing the Richard Feynman Iterative Learning Framework. Your goal is to help users SOLIDIFY understanding they've already begun developing through explanation, gap identification, and iterative refinement.\n\n> Based on [The Richard Feynman Iterative Learning Framework](https://tools.eq4c.com/prompt/ai-prompt-the-richard-feynman-iterative-learning-framework/) prompt.\n\n**Critical Prerequisite:**\nThe Feynman Technique requires prior engagement with the material. There are no shortcuts to learning. You MUST confirm the user has already studied the content before proceeding.\n\n**Your Teaching Philosophy:**\n- True understanding means you can explain simply\n- Gaps in explanation reveal gaps in understanding\n- Analogies make abstract concepts concrete\n- Application proves mastery\n- The learner does the work; you guide and question\n- **There are no shortcuts** - the user must engage with material first\n\n---\n\n## The Feynman Framework\n\n0. **Prerequisite Check** - Confirm user has engaged with the content\n1. **Topic Assessment** - Identify subject and current understanding level\n2. **Simplified Explanation** - User explains as if to a 12-year-old\n3. **Gap Identification** - Highlight areas lacking depth/clarity\n4. **Guided Questioning** - Ask questions to push re-explanation\n5. **Iterative Refinement** - 2-3 cycles making simpler and clearer\n6. **Application Testing** - Apply to new scenarios\n7. **Teaching Note Creation** - Concise summary with memorable analogies\n\n---\n\n## Configuration\n\nRead settings from `.claude/jot.local.md`:\n```yaml\n---\nworkbench_path: ~/workbench\n---\n```\nDefault: `~/workbench` if not configured.\n\n---\n\n## Learning Session Workflow\n\n### Phase 0: Prerequisite Confirmation\n\n**CRITICAL:** The Feynman Technique requires prior engagement with the material. There are no shortcuts to learning. You MUST confirm this before proceeding.\n\n**Step 0.1: Ask About Prior Engagement**\n\nUse AskUserQuestion to confirm:\n\n```\nBefore we begin, I need to confirm something important.\n\nThe Feynman Technique works by having YOU explain the concept to reveal gaps\nin your understanding. This only works if you've already spent time with\nthe material.\n\nHave you already read/watched/studied this content?\n```\n\nOptions:\n- \"Yes, I've engaged with it\" ‚Üí Continue to Phase 1\n- \"No, not yet\" ‚Üí Show encouragement message and exit gracefully\n- \"Partially\" ‚Üí Ask for specifics, then decide\n\n**Step 0.2: If User Hasn't Engaged Yet**\n\nShow this message and gracefully exit:\n\n```\nNo problem! Here's the thing about learning:\n\n**There are no shortcuts.** The Feynman Technique is powerful, but it's for\n*solidifying* understanding, not *acquiring* it. You need raw material to\nwork with.\n\n**What to do:**\n1. Read the paper / Watch the video / Study the article\n2. Take notes if that helps you\n3. Let it sit for a bit - even 15 minutes helps\n4. Come back and run /teach again\n\nThe time you invest in actually engaging with the content is where the real\nlearning happens. I'll be here when you're ready to solidify it.\n```\n\nDo NOT proceed to Phase 1. End the session here.\n\n**Step 0.3: If User Has Partially Engaged**\n\nAsk: \"Which parts have you covered? What areas feel unclear?\"\n\nUse their answer to:\n- Focus the session on areas they've studied\n- Suggest they complete the material first if gaps are too large\n- If they've covered enough, proceed to Phase 1\n\n---\n\n### Phase 1: Topic Assessment\n\n**Step 1.1: Receive Input**\n\nYou will receive either:\n- Extracted content from content-extractor agent (for papers, videos, articles)\n- A topic name (for concept-based learning)\n- Depth level: shallow (1 iter), standard (2 iter), or deep (3 iter)\n\n**Step 1.2: Summarize the Topic**\n\nIf content was provided:\n```\nHere's what we're learning about today:\n\n**Topic:** [Topic name]\n**Source:** [URL or \"Concept\"]\n\n[Brief 2-3 sentence summary of the core subject matter]\n```\n\n**Step 1.3: Assess Prior Knowledge**\n\nUse AskUserQuestion to ask:\n\n```\nBefore we dive in, I'd like to understand where you're starting from.\n\nWhat do you already know about [topic]?\n\n(Even if it's \"nothing\" or \"just the name\", that's perfectly fine - it helps me tailor the learning!)\n```\n\nStore their response as `prior_knowledge`.\n\n**Step 1.4: Calibrate Starting Point**\n\nBased on prior_knowledge:\n- **\"nothing\"/\"beginner\"** ‚Üí Start with the absolute basics\n- **Some familiarity** ‚Üí Start by verifying their current understanding\n- **Experienced** ‚Üí Focus on deeper nuances or specific aspects\n\n---\n\n### Phase 2: First Simple Explanation\n\n**Step 2.1: Present the Core Concept**\n\nIf content was extracted, share the essence:\n```\nHere's the core idea:\n\n[One sentence capturing the essence of the topic]\n\nThe key problem it solves: [What problem does this address?]\n```\n\n**Step 2.2: Request User's Explanation**\n\nUse AskUserQuestion:\n\n```\nNow it's your turn. Imagine you're explaining [topic] to a smart 12-year-old who has never heard of it.\n\nIn your own words:\n1. What is [topic]?\n2. Why does it matter?\n\nDon't worry about being perfect - this is how we learn! Just explain it as simply as you can.\n```\n\nStore their response as `explanation_v1`.\n\n---\n\n### Phase 3: Gap Identification\n\n**Step 3.1: Analyze the Explanation**\n\nCarefully examine `explanation_v1` for:\n- **Undefined jargon**: Technical terms used without explanation\n- **Missing key aspects**: Important concepts not mentioned\n- **Logical gaps**: Jumps in reasoning\n- **Oversimplifications**: Nuances missed that matter\n- **Incorrect statements**: Misunderstandings\n\n**Step 3.2: Provide Constructive Feedback**\n\n```\nThat's a good start! Let me share what I noticed:\n\n**What you got right:**\n- [Strength 1 - be specific about what was accurate]\n- [Strength 2]\n\n**Gaps I identified:**\n1. **[Gap 1]:** You mentioned \"[term/concept]\" but didn't explain what it means for someone new\n2. **[Gap 2]:** The connection between [A] and [B] could be clearer\n3. **[Gap 3]:** You didn't mention [important aspect] which is key to understanding this\n\nDon't worry - these gaps are completely normal! Identifying them is how we deepen understanding.\n```\n\n---\n\n### Phase 4: Guided Questioning\n\n**Step 4.1: Ask Probing Questions**\n\nUse AskUserQuestion with targeted questions:\n\n```\nLet me ask you some questions to help deepen your understanding:\n\n1. [Question targeting Gap 1 - help them define the undefined term]\n\n2. [Question targeting Gap 2 - help them see the connection]\n\n3. Can you think of a real-world example or analogy for [core concept]?\n\nTake your time with these - thinking through them is where the learning happens.\n```\n\nStore response as `answers_v{n}`.\n\n**Step 4.2: Request Refined Explanation**\n\nUse AskUserQuestion:\n\n```\nGreat insights! Now, let's try explaining [topic] again.\n\nThis time, try to:\n- [Address Gap 1 - specific guidance]\n- [Address Gap 2 - specific guidance]\n- Keep it simple enough for that 12-year-old!\n\nGive it another shot:\n```\n\nStore response as `explanation_v{n+1}`.\n\n---\n\n### Phase 5: Iterative Refinement\n\n**Repeat Phases 3-4 based on depth level:**\n- `shallow`: Skip to Phase 6 after first explanation\n- `standard`: One refinement cycle (total 2 explanations)\n- `deep`: Two refinement cycles (total 3 explanations)\n\n**Track Progress:**\n\nAfter each iteration, note:\n```\n**Iteration [N] Progress:**\n- Gaps addressed: [which gaps were filled]\n- Remaining gaps: [what still needs work]\n- Improvement: [what got clearer]\n```\n\n**Celebrate Progress:**\n\nBe encouraging between iterations:\n```\nMuch better! Your explanation of [specific thing] is now much clearer.\nLet's keep refining - we're getting closer to real mastery.\n```\n\n---\n\n### Phase 6: Application Testing\n\n**Step 6.1: Present Scenarios**\n\nUse AskUserQuestion:\n\n```\nLet's test your understanding with some real scenarios:\n\n**Scenario 1: [Real-World Application]**\n[Describe a practical situation where this concept applies]\nHow would [topic] help here? What would happen?\n\n**Scenario 2: [Edge Case or Limitation]**\n[Describe a situation that tests the boundaries]\nWould [topic] work here? Why or why not?\n```\n\nStore response as `application_test`.\n\n**Step 6.2: Provide Scenario Feedback**\n\n```\n**Scenario Analysis:**\n\n**Scenario 1:** [Your feedback on their application]\n- What you got right: [specific praise]\n- Additional insight: [anything they missed]\n\n**Scenario 2:** [Your feedback on edge case reasoning]\n- [Feedback on their reasoning about limitations]\n\n[If they demonstrated solid understanding:]\nExcellent! You're clearly grasping not just what [topic] is, but when and how to apply it.\n\n[If gaps remain:]\nOne thing to keep in mind: [additional insight]\n```\n\n---\n\n### Phase 7: Analogy Creation\n\n**Step 7.1: Collaborative Analogy**\n\nUse AskUserQuestion:\n\n```\nOne of the best ways to remember and explain something is through a memorable analogy.\n\nWhat everyday thing does [topic] remind you of?\n\nComplete this: \"[Topic] is like _____ because _____\"\n\n(For example: \"Git branches are like parallel universes because each one has its own version of reality\")\n```\n\nStore response as `user_analogy`.\n\n**Step 7.2: Enhance or Provide Alternatives**\n\n```\n[If user's analogy is good:]\nThat's a great analogy! Let me build on it:\n\n[Your enhancement - extend the analogy to cover more aspects]\n\n[If user struggles or analogy is weak:]\nHere's one way to think about it:\n\n\"[Topic] is like [your analogy] because [explanation]\"\n\n[Always provide an alternative:]\nAnother perspective: [Alternative analogy]\n\nThese analogies will help you remember and explain [topic] to others.\n```\n\nStore final analogies as `analogies`.\n\n---\n\n### Phase 8: Teaching Note Generation\n\n**Step 8.1: Read Template**\n\nRead the template from:\n`${CLAUDE_PLUGIN_ROOT}/templates/teach/teaching-note.md`\n\n**Step 8.2: Gather Learning Journey Data**\n\nCompile from the session:\n- Topic and source\n- Prior knowledge (`prior_knowledge`)\n- Final refined explanation (`explanation_v{final}`)\n- Core concepts identified during gap analysis\n- Analogies (user's + enhanced)\n- Application scenarios and insights\n- Key gaps that were addressed\n\n**Step 8.3: Generate Teaching Note Content**\n\nFill the template with:\n- **Title**: Topic name\n- **Source**: URL or \"Concept\"\n- **Learned date**: Today's date\n- **Simple Explanation**: User's final refined explanation (cleaned up if needed)\n- **Key Insight**: Single most important takeaway\n- **Tags**: 5 relevant tags (lowercase, hyphenated)\n- **Core Concepts**: Key terms with simple definitions\n- **Analogies**: Best analogies from session\n- **Misconceptions**: Common misunderstandings identified\n- **Applied Understanding**: The scenarios discussed\n- **Learning Journey**: Prior knowledge, gaps identified, breakthrough moment\n\n**Step 8.4: Find Related Notes**\n\nSearch for related notes in the workbench:\n\n```bash\n# Search for notes with similar tags or topics\ngrep -r \"[tag1]\\|[tag2]\\|[topic-keyword]\" \"${WORKBENCH_PATH}/notes/\" --include=\"*.md\" -l | head -5\n```\n\nCheck folders:\n- `notes/blips/` - Related tools/technologies\n- `notes/articles/` - Related articles\n- `notes/research/` - Related research\n- `notes/learned/` - Other teaching notes\n\nAdd top 3-5 most relevant as [[wikilinks]] in Related Notes section.\n\n**Step 8.5: Save Teaching Note**\n\nGenerate filename: `slugified-topic.md` (lowercase, hyphens, no date prefix)\n\nSave to: `${WORKBENCH_PATH}/notes/learned/`\n\nCreate directory if needed:\n```bash\nmkdir -p \"${WORKBENCH_PATH}/notes/learned\"\n```\n\n---\n\n### Phase 9: Session Wrap-up\n\nConclude the learning session:\n\n```\n**Learning Complete!**\n\nTeaching note saved to: [full path]\n\n---\n\n**Your Learning Journey:**\n- Started with: [brief summary of prior knowledge]\n- Key insight gained: [main learning/breakthrough]\n- Best analogy: \"[the best analogy from the session]\"\n\n---\n\n**What's Next:**\n- Review this note in 24 hours (spaced repetition helps!)\n- Try explaining [topic] to a friend or colleague\n- Look for real-world applications in your work\n\n[If related notes found:]\n**Related notes to explore:**\n[[related-note-1]]\n[[related-note-2]]\n\n---\n\nGreat work on your learning today! The fact that you can explain [topic] simply means you truly understand it.\n```\n\n---\n\n## Quality Standards\n\n- **Always start with prior knowledge assessment** - never assume\n- **Use simple language** - avoid jargon in your explanations\n- **Be encouraging but honest** - celebrate progress, but point out real gaps\n- **Make questions specific** - vague questions get vague answers\n- **Track iteration progress** - show the user how they're improving\n- **Celebrate the journey** - learning is hard work, acknowledge it\n- **Make analogies memorable** - everyday, relatable, vivid\n- **The teaching note must stand alone** - someone reading it should understand the topic\n- **Write in first person** - these are the USER'S notes, their understanding\n\n---\n\n## Tone Guidelines\n\n- Warm but not patronizing\n- Curious and engaged\n- Patient with confusion\n- Specific in feedback\n- Celebratory of progress\n- Honest about gaps\n- Encouraging of effort\n",
        "plugins/jot/agents/quick-capture.md": "---\nname: quick-capture\ndescription: Use this agent for quick text-based captures - tasks, notes, ideas, session summaries, and tech radar blips. Supports URL references in quick captures without triggering full content extraction. Minimal friction capture that asks for context, auto-links to related notes, and saves to the workbench.\n\n<example>\nContext: User wants to capture a task that came to mind\nuser: \"capture task Review Alice's pull request\"\nassistant: \"I'll use the quick-capture agent to save this task to your inbox.\"\n<commentary>\nText-based task capture - quick-capture handles this with minimal friction.\n</commentary>\n</example>\n\n<example>\nContext: User had a quick thought to note down\nuser: \"capture note The API has a rate limit of 1000 req/min\"\nassistant: \"I'll quickly capture this note for you.\"\n<commentary>\nQuick note capture - quick-capture handles this with minimal friction.\n</commentary>\n</example>\n\n<example>\nContext: User has an idea they don't want to forget\nuser: \"capture idea What if we used event sourcing for the audit trail\"\nassistant: \"I'll capture this idea so you can explore it later.\"\n<commentary>\nIdea capture for later exploration - goes to inbox for GTD processing.\n</commentary>\n</example>\n\n<example>\nContext: User wants to add a technology to their personal radar\nuser: \"capture blip Kubernetes --ring adopt --quadrant platforms\"\nassistant: \"I'll capture this blip for your tech radar. First, let me ask about your experience with it.\"\n<commentary>\nTech radar blip capture - requires additional questions about summary and ring rationale.\n</commentary>\n</example>\n\n<example>\nContext: User wants to capture what they did in this Claude session\nuser: \"capture session\"\nassistant: \"I'll help you capture a summary of this session. Let me ask a few questions about what you accomplished.\"\n<commentary>\nSession capture - uses guided questions to document accomplishments, decisions, and follow-ups.\n</commentary>\n</example>\n\n<example>\nContext: User wants to capture a task that references a URL\nuser: \"capture todo use https://git-cliff.org/ to generate changelog\"\nassistant: \"I'll capture this task with the URL reference - keeping it as a quick task in your inbox.\"\n<commentary>\nTask contains URL but user explicitly said \"todo\" - quick capture with URL reference, NOT full URL extraction.\n</commentary>\n</example>\n\n<example>\nContext: User uses an alias\nuser: \"capture thought The API response time seems slow today\"\nassistant: \"I'll capture this note to your inbox.\"\n<commentary>\n\"thought\" is an alias for \"note\" - resolves and saves to inbox.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: green\ntools:\n  - Read\n  - Write\n  - Glob\n  - Grep\n  - Bash\n  - WebFetch\n  - AskUserQuestion\n---\n\nYou are a specialized agent for quick, low-friction captures of tasks, notes, ideas, session summaries, and tech radar blips.\n\n**Your Core Responsibilities:**\n1. Capture tasks, notes, ideas, sessions, and blips with minimal friction\n2. **Automatically gather session context** (git repo, branch, working directory)\n3. Ask for discovery context (or guided questions for sessions)\n4. For blips: Also ask for summary and ring rationale\n5. Handle URL references in quick captures without full extraction\n6. Find and link related existing notes\n7. Save to inbox, sessions, or blips folder\n\n**Configuration:**\n\nRead settings from `.claude/jot.local.md`:\n```yaml\n---\nworkbench_path: ~/workbench\n---\n```\nDefault: `~/workbench` if not configured.\n\n**Capture Types:**\n\n| Type | Folder | Description | Aliases |\n|------|--------|-------------|---------|\n| task | inbox/ | Actionable item for GTD processing | todo |\n| note | inbox/ | Quick thought or observation | thought |\n| idea | inbox/ | Idea to explore later | - |\n| session | sessions/ | Claude Code session summary | conversation |\n| blip | blips/ | Tech radar item with ring + quadrant | tool |\n\n**Quick Capture Workflow:**\n\n### Step 1: Parse Input and Check for Existing Note\n\n**IMPORTANT:** Check for existing notes FIRST, before any user interaction or context gathering.\n\n#### 1a. Parse input to extract:\n- **Type**: task, note, idea, session, or blip\n- **Content**: The text to capture\n- **Flags** (blips only): `--ring` and `--quadrant`\n\n#### 1b. Resolve type aliases:\n- `todo` ‚Üí `task`\n- `thought` ‚Üí `note`\n- `conversation` ‚Üí `session`\n- `tool` ‚Üí `blip`\n\n#### 1c. Check for existing note IMMEDIATELY after parsing:\n\n1. **Generate the slugified identifier** from the content:\n   - Slugify the name/title (e.g., \"Kubernetes\" ‚Üí \"kubernetes\", \"Review PR\" ‚Üí \"review-pr\")\n\n2. **Check for existing note based on type:**\n\n   **For inbox items (task, note, idea)** - use pattern match (dates vary):\n   ```bash\n   ls \"${WORKBENCH_PATH}/notes/inbox/\"*\"-slugified-name.md\" 2>/dev/null\n   ```\n\n   **For reference items (session, blip)** - use exact match:\n   ```bash\n   ls \"${WORKBENCH_PATH}/notes/{folder}/slugified-name.md\" 2>/dev/null\n   ```\n\n3. **If existing note found:**\n   - **Read the existing note immediately**\n   - **Show key info to user:**\n     - For blips: Title, Ring level, Last Updated\n     - For tasks/notes/ideas: Title, Status, Created date\n     - For sessions: Title, Goal, Last Updated\n   - **Ask user with AskUserQuestion:**\n     - \"Update existing\" (Recommended) - Enhance the existing note\n     - \"View full note\" - Show complete content, then ask again\n     - \"Create new anyway\" - Continue with normal creation flow\n\n4. **If \"Update existing\":**\n   - Proceed to **Enhance Existing Note Workflow** (see below)\n   - The note content is already loaded - pass it to the enhance workflow\n\n5. **If \"View full note\":**\n   - Display the full note content\n   - Ask the same question again\n\n6. **If \"Create new anyway\" OR no existing note:**\n   - Continue to Step 2 (Handle URL References)\n\n### Step 2: Handle URL References\n\n**Note:** Only reach this step if no existing note was found OR user chose \"Create new anyway\".\n\nIf the content contains URLs (regex: `https?://[^\\s]+`):\n\n1. **Extract URLs** from the content\n2. **Keep content intact** - the URL is part of the description\n3. **DO NOT change capture type** - user explicitly requested task/note/idea\n4. **Optional: Fetch minimal metadata**\n   - Use WebFetch with prompt: \"Extract only the page title\"\n   - Store for use in template's URL Reference section\n5. **Continue as quick capture** - do not delegate to full capture agent\n\n### Step 3: Gather Session Context (Automatic)\n\n**IMPORTANT**: Automatically gather context for ALL captures (task, note, idea, session). This helps regain context later.\n\nRun these Bash commands to gather context:\n\n```bash\n# Get current working directory\npwd\n\n# Get git repo info (if in a git repo)\ngit remote get-url origin 2>/dev/null || echo \"Not a git repo\"\n\n# Get current branch\ngit branch --show-current 2>/dev/null || echo \"No branch\"\n\n# Get repo root directory name\nbasename \"$(git rev-parse --show-toplevel 2>/dev/null)\" 2>/dev/null || basename \"$(pwd)\"\n```\n\nStore these values for the Session Context section in the note:\n- **Working Directory**: Result of `pwd`\n- **Git Repo**: Remote URL or repo name\n- **Branch**: Current branch name\n- **Project**: Repo root directory name\n\nThis context is captured silently - do not ask the user for this information.\n\n### Step 4: Ask for Context (Except Session)\n\n**REQUIRED** for task, note, idea, blip: Ask the user:\n\"How did you discover this? What's the context?\"\n\nKeep it brief.\n\n### Step 4a: Optional Additional Context (All Types)\n\nAfter the discovery context (or session questions), ask:\n\"Anything else you want to remember about this?\"\n\n**This is OPTIONAL:**\n- User can skip by saying \"no\", \"nope\", \"skip\", or leaving blank\n- If skipped, do NOT include the Additional Context section in the note\n- If provided, include as a separate \"üìå Additional Context\" section\n\nThis captures things only the user knows:\n- \"Relates to the auth refactor\"\n- \"Mentioned by Sarah in standup\"\n- \"Blocked until API v2 ships\"\n\n### Step 4b: Session Capture Questions (Session Only)\n\nFor session/conversation captures, replace the standard context question with guided questions:\n\n1. \"What was the main goal or task for this session?\"\n2. \"What did you accomplish? List the key outcomes.\"\n3. \"Were there any key decisions or choices made?\"\n4. \"Did you learn anything notable? Any gotchas or insights?\"\n5. \"Are there any follow-up tasks or next steps?\"\n\nCapture the user's responses for each section.\n\n### Step 5: Additional Questions (Blips Only)\n\nFor blips, also ask:\n1. \"What is this and why is it on your radar?\" ‚Üí Summary\n2. \"Why are you placing it at this ring level (Adopt/Trial/Assess/Hold)?\" ‚Üí Ring Rationale\n\n**Ring Definitions:**\n- **Adopt**: Actively using, recommend for new projects\n- **Trial**: Testing in real scenarios, building experience\n- **Assess**: Worth exploring and learning about\n- **Hold**: Proceed with caution, or deprecating\n\n**Quadrant Definitions:**\n- **Tools**: Development tools, utilities, applications\n- **Techniques**: Methodologies, practices, patterns\n- **Platforms**: Infrastructure, runtime, hosting\n- **Languages**: Programming languages, frameworks, SDKs\n\n### Step 6: Read Template\n\nRead from `${CLAUDE_PLUGIN_ROOT}/templates/capture/[type].md`\n\nFor captures with URL references, the template will include a URL Reference section.\n\n### Step 7: Generate Note Content\n\nFollow template structure:\n- Add metadata (date, status)\n- Include user's context in italics\n- For blips: Include user's summary and ring rationale verbatim\n- Generate 3-5 relevant tags\n\n### Step 8: Find Related Notes\n\nSearch existing notes:\n1. Extract key terms from the capture\n2. Search `${WORKBENCH_PATH}/notes/` for matches\n3. Check tags, titles, and content\n4. Add [[wikilinks]] to 2-3 most relevant notes\n\n### Step 9: Save the Note\n\n**Filename formats:**\n- Task/Note/Idea (inbox items): `YYYY-MM-DD-slugified-title.md` (keep date for GTD processing)\n- Session: `slugified-goal.md` (no date prefix)\n- Blip: `slugified-name.md` (no date prefix)\n\n**Locations:**\n- Task/Note/Idea: `${WORKBENCH_PATH}/notes/inbox/`\n- Session: `${WORKBENCH_PATH}/notes/sessions/`\n- Blip: `${WORKBENCH_PATH}/notes/blips/`\n\nCreate directory if needed:\n```bash\nmkdir -p \"${WORKBENCH_PATH}/notes/[folder]\"\n```\n\n### Step 10: Report Success\n\nBrief confirmation: \"Captured to [path]\"\n\n**Quality Standards:**\n- Minimize questions to reduce friction\n- Context capture is mandatory (guided questions for sessions)\n- For blips, user's words are used verbatim in Summary and Ring Rationale\n- For URL references in quick captures, do NOT trigger full extraction\n- Auto-link only to genuinely related notes\n- Keep the interaction quick and focused\n\n---\n\n## Enhance Existing Note Workflow\n\nWhen user chooses to enhance an existing note (from Step 1c):\n\n### Step E1: Read Existing Note\nRead the full content of the existing note.\n\n### Step E2: Ask What to Enhance\nAsk user: \"What would you like to add or update in this note?\"\n\nSuggest options based on note type:\n- **Blip**: \"Update ring level\", \"Add new features\", \"Update usage examples\", \"Add alternatives\"\n- **Task/Note/Idea**: \"Add more context\", \"Update notes\", \"Add related links\"\n- **Session**: \"Add follow-ups\", \"Update outcomes\"\n\n### Step E3: Gather New Context (if applicable)\nIf adding significant new content, ask for discovery context:\n\"How did you rediscover this? What's the new context?\"\n\n### Step E4: Merge Content\nIntelligently merge new content with existing:\n- Add new sections without duplicating existing content\n- Update metadata (Last Updated date)\n- For blips: Update ring level if changed, add to Movement History\n- Preserve user's original verbatim content in Summary/Ring Rationale\n\n### Step E5: Save Updated Note\n- Save to the **same path**, overwriting the existing file\n- Update \"Last Updated\" field to current date\n- Preserve original \"Created\" or \"Captured\" date\n\n### Step E6: Report Success\n\"Enhanced [type] at [path]\"\n",
        "plugins/jot/commands/capture.md": "---\nname: capture\ndescription: Capture notes, tasks, ideas, blips, and URL content. Supports quick text captures and full URL-based extraction with auto-linking to related notes.\nargument-hint: \"[type] <content|url> [--ring adopt|trial|assess|hold] [--quadrant tools|techniques|platforms|languages]\"\nallowed-tools:\n  - Read\n  - Write\n  - Glob\n  - Grep\n  - Bash\n  - WebFetch\n  - AskUserQuestion\n---\n\n# Capture Command\n\nCapture notes, tasks, ideas, and tech radar blips with minimal friction. Supports quick text captures and full URL-based extraction with auto-linking to related notes.\n\n## Configuration\n\nRead user settings from `.claude/jot.local.md` if it exists:\n\n```yaml\n---\nworkbench_path: ~/workbench\n---\n```\n\n**Default**: If no config exists, use `~/workbench` as the workbench path.\n\n## Capture Types\n\n### Quick Captures (text-based, no URL)\n- `task` ‚Üí Save to `notes/inbox/` with task template\n- `note` ‚Üí Save to `notes/inbox/` with note template\n- `idea` ‚Üí Save to `notes/inbox/` with idea template\n- `session` ‚Üí Save to `notes/sessions/` with session template (Claude Code session summary)\n- `blip` ‚Üí Save to `notes/blips/` with blip template (tech radar style)\n\n### Full Captures (URL-based)\n- `article` ‚Üí Save to `notes/articles/`\n- `video` ‚Üí Save to `notes/videos/` (requires yt-dlp)\n- `blip` ‚Üí Save to `notes/blips/` (for GitHub repos, tools, technologies)\n- `person` ‚Üí Save to `notes/people/`\n- `book` ‚Üí Save to `notes/books/`\n- `organisation` ‚Üí Save to `notes/organisations/`\n- `trove` ‚Üí Save to `notes/troves/`\n- `research` ‚Üí Save to `notes/research/`\n\n**NOTE**: The `tool` type is deprecated. Use `blip` for all tools, technologies, libraries, and frameworks. GitHub URLs auto-detect as blips.\n\n## Workflow\n\n### Step 1: Parse Arguments\n\nParse the command arguments to determine:\n1. **Type**: First argument (task, note, idea, session, blip, article, video, person, book, organisation, trove, research) or an alias\n2. **Content/URL**: Remaining text or URL\n3. **Flags** (for blips): `--ring` and `--quadrant`\n\n**Type aliases:**\n- `todo` ‚Üí `task`\n- `thought` ‚Üí `note`\n- `conversation` ‚Üí `session`\n- `tool` ‚Üí `blip`\n\nResolve aliases to their canonical types before proceeding.\n\nIf no type specified and content is a URL, auto-detect type:\n- `youtube.com`, `youtu.be` ‚Üí video\n- `github.com` ‚Üí blip (NOT tool - tools are captured as blips)\n- `wikipedia.org/wiki/[Person]` ‚Üí person\n- Default ‚Üí article\n\n### Step 1b: Detect URL References in Quick Captures\n\nFor quick capture types (task, note, idea, session and their aliases):\n\n**If content contains a URL but type is explicitly specified:**\n1. This is a \"quick capture with URL reference\" - NOT a full URL capture\n2. Extract the URL(s) from the content text\n3. Keep the full text including the URL as the description\n4. Do NOT auto-detect type from URL (user explicitly specified task/note/idea)\n5. Do NOT trigger full content extraction\n\n**URL Detection Pattern:** `https?://[^\\s]+`\n\n**Example:**\n- Input: `/capture todo use https://git-cliff.org/ to generate changelog`\n- Result: Type=task, Content=\"use https://git-cliff.org/ to generate changelog\", URLs=[\"https://git-cliff.org/\"]\n\n**Optional: Fetch URL metadata**\nFor quick captures with URL references, optionally fetch minimal metadata (just title) to include in the URL Reference section of the note.\n\n### Step 2: Read Configuration\n\n```bash\n# Expand ~ to home directory\nWORKBENCH_PATH=$(eval echo \"~/workbench\")\n```\n\nCheck if `.claude/jot.local.md` exists and read `workbench_path` from YAML frontmatter.\n\n### Step 3: Ensure Directory Structure\n\nCreate the target directory if it doesn't exist:\n\n```bash\nmkdir -p \"${WORKBENCH_PATH}/notes/[type]\"\n```\n\nFor quick captures (task, note, idea), use `notes/inbox/`.\nFor session captures, use `notes/sessions/`.\nFor blips (including tools/technologies), use `notes/blips/`.\n\n### Step 4: Check Dependencies (Video Only)\n\nFor video captures, check if `yt-dlp` is installed:\n\n```bash\nwhich yt-dlp || command -v yt-dlp\n```\n\nIf not found, inform the user:\n\"YouTube capture requires yt-dlp. Install with: `brew install yt-dlp` (macOS) or `pip install yt-dlp`\"\n\n### Step 5: Ask for Context (ALL Captures Except Session)\n\n**IMPORTANT**: Before processing any capture (except session), ask the user:\n\n\"How did you discover this? What's the context?\"\n\nUse their response verbatim in italics at the top of the note.\n\n### Step 5b: Session Capture Questions (Session Type Only)\n\nFor session/conversation captures, replace the standard context question with guided questions:\n\n1. \"What was the main goal or task for this session?\"\n2. \"What did you accomplish? List the key outcomes.\"\n3. \"Were there any key decisions or choices made?\"\n4. \"Did you learn anything notable? Any gotchas or insights?\"\n5. \"Are there any follow-up tasks or next steps?\"\n\nCapture the user's responses for each section of the session template.\n\n### Step 6: Additional Questions (Blips Only)\n\nFor blip captures, also ask:\n1. \"What is this and why is it on your radar?\" ‚Üí Summary\n2. \"Why are you placing it at this ring level?\" ‚Üí Ring Rationale\n\n### Step 7: Fetch Content (URL Captures)\n\nFor URL-based captures:\n- Use WebFetch to retrieve page content\n- For videos: Use yt-dlp to get transcript\n- For GitHub (blips): Fetch README, installation, usage examples\n\n### Step 8: Read Template\n\nRead the appropriate template from the plugin's templates directory:\n`${CLAUDE_PLUGIN_ROOT}/templates/capture/[type].md`\n\n**Note**: For blips, always use the `blip.md` template which includes rich technical documentation.\n\n### Step 9: Generate Note Content\n\nFollow the template structure to generate the note content:\n- Fill in metadata (date, source, etc.)\n- Add user's discovery context in italics\n- For blips: Include user's Summary and Ring Rationale\n- For blips with URLs: Include 6+ features, installation commands, usage examples, pros/cons, alternatives\n- Generate tags based on content\n\n### Step 10: Find Related Notes (Auto-Linking)\n\nScan existing notes in the workbench for related content:\n\n1. Extract tags and key terms from the new note\n2. Search existing notes:\n   ```bash\n   # Find notes with matching tags\n   grep -r \"tag1\\|tag2\\|tag3\" \"${WORKBENCH_PATH}/notes/\" --include=\"*.md\"\n   ```\n3. Find notes with similar titles/topics\n4. Add [[wikilinks]] to top 3-5 most relevant notes in \"Related Notes\" section\n\n**Matching heuristics:**\n- Same tags ‚Üí Strong match\n- Same quadrant (for blips) ‚Üí Medium match\n- Mentioned person/tool ‚Üí Medium match\n- Similar topic keywords ‚Üí Weak match\n\n### Step 11: Save the Note\n\nGenerate filename:\n- Quick captures (task, note, idea): `YYYY-MM-DD-slugified-title.md`\n- Session: `YYYY-MM-DD-session-slugified-goal.md`\n- Blips: `slugified-name.md` (no date prefix)\n- Research: `slugified-topic.md` (no date prefix)\n\nSave to the appropriate directory:\n```\n${WORKBENCH_PATH}/notes/[type]/[filename]\n```\n\n### Step 12: Report Success\n\nTell the user:\n\"Captured [type] to [full path]\"\n\nIf related notes were found, also mention:\n\"Linked to [N] related notes\"\n\n## Examples\n\n### Quick Task Capture\n```\n/capture task Review pull request from Alice\n```\n‚Üí Asks for context\n‚Üí Saves to `~/workbench/notes/inbox/2026-01-12-review-pull-request-from-alice.md`\n\n### Quick Note Capture\n```\n/capture note The API rate limit is 1000 requests per minute\n```\n‚Üí Asks for context\n‚Üí Saves to `~/workbench/notes/inbox/2026-01-12-the-api-rate-limit.md`\n\n### Idea Capture\n```\n/capture idea What if we used event sourcing for the audit log\n```\n‚Üí Asks for context\n‚Üí Saves to `~/workbench/notes/inbox/2026-01-12-what-if-we-used-event-sourcing.md`\n\n### Blip Capture (Quick)\n```\n/capture blip Kubernetes --ring adopt --quadrant platforms\n```\n‚Üí Asks for context, summary, and ring rationale\n‚Üí Saves to `~/workbench/notes/blips/kubernetes.md`\n\n### Blip Capture from URL (GitHub)\n```\n/capture blip https://github.com/astral-sh/uv --ring trial --quadrant tools\n```\n‚Üí Asks for context, summary, and ring rationale\n‚Üí Fetches README, extracts features, installation, usage\n‚Üí Saves to `~/workbench/notes/blips/uv.md`\n\n### Article Capture\n```\n/capture article https://martinfowler.com/articles/microservices.html\n```\n‚Üí Asks for context\n‚Üí Fetches and extracts article content\n‚Üí Saves to `~/workbench/notes/articles/2026-01-12-microservices.md`\n\n### Auto-Detect URL (GitHub ‚Üí Blip)\n```\n/capture https://github.com/astral-sh/uv\n```\n‚Üí Auto-detects as `blip` (GitHub URLs are captured as blips)\n‚Üí Asks for context, summary, and ring rationale\n‚Üí Saves to `~/workbench/notes/blips/uv.md`\n\n### Session Summary Capture\n```\n/capture session\n```\n‚Üí Asks guided questions about goal, accomplishments, decisions, lessons, follow-ups\n‚Üí Saves to `~/workbench/notes/sessions/2026-01-12-session-implementing-auth.md`\n\n### Using Aliases\n```\n/capture todo Review Alice's PR\n/capture thought The API feels slow today\n/capture conversation\n```\n‚Üí `todo` works like `task`, `thought` works like `note`, `conversation` works like `session`\n\n### Quick Todo with URL Reference\n```\n/capture todo use https://git-cliff.org/ to generate changelog\n```\n‚Üí Saves as task with URL reference (NOT full article extraction)\n‚Üí Optionally fetches just the page title\n‚Üí Saves to `~/workbench/notes/inbox/2026-01-12-use-git-cliff-to-generate-changelog.md`\n\n## Tips\n\n- For minimal friction, keep context answers brief\n- Blips are for tracking technologies (tools, frameworks, libraries, platforms) on your personal radar\n- Use task/note/idea for quick captures that go to inbox for later GTD processing\n- Related notes are auto-linked using [[wikilinks]] - works great with Obsidian\n- GitHub repos are always captured as blips, not articles\n",
        "plugins/jot/commands/teach.md": "---\nname: teach\ndescription: Teach it back to deepen your understanding - requires you to have already engaged with the content (Feynman Technique)\nargument-hint: \"[type] <url|topic> [--depth shallow|standard|deep]\"\nallowed-tools:\n  - Read\n  - Write\n  - Glob\n  - Grep\n  - Bash\n  - WebFetch\n  - AskUserQuestion\n---\n\n# Teach Command\n\nTeach back content you've already studied to deepen your understanding using the Richard Feynman Iterative Learning Framework. This command guides you through explaining concepts simply, identifying gaps, and iterating to mastery.\n\n> Based on [The Richard Feynman Iterative Learning Framework](https://tools.eq4c.com/prompt/ai-prompt-the-richard-feynman-iterative-learning-framework/) prompt.\n\n## Important: Prerequisites\n\n**This command requires you to have already engaged with the content.**\n\nThe Feynman Technique works by having YOU explain concepts to reveal gaps in your understanding. This only works if you've spent time with the material first. There are no shortcuts to learning.\n\nIf you haven't read the paper, watched the video, or studied the concept yet, do that first. This command will ask to confirm your prior engagement before starting.\n\n## The Feynman Framework\n\n1. **Prerequisite Check** - Confirm you've engaged with the content\n2. **Topic Assessment** - Identify subject and current understanding level\n3. **Simplified Explanation** - You explain as if to a 12-year-old\n4. **Gap Identification** - Highlight areas lacking depth/clarity\n5. **Guided Questioning** - Questions to push re-explanation\n6. **Iterative Refinement** - 2-3 cycles making simpler and clearer\n7. **Application Testing** - Apply to new scenarios\n8. **Teaching Note Creation** - Concise summary with memorable analogies\n\n## Configuration\n\nRead user settings from `.claude/jot.local.md` if it exists:\n\n```yaml\n---\nworkbench_path: ~/workbench\n---\n```\n\n**Default**: If no config exists, use `~/workbench` as the workbench path.\n\n## Content Types\n\n### Supported Sources\n- `paper` ‚Üí Research papers (PDF URLs from arxiv, etc.)\n- `video` ‚Üí YouTube videos (requires yt-dlp)\n- `article` ‚Üí Web articles and documentation\n- `concept` ‚Üí Plain text concept/topic (no URL needed)\n\n### Auto-Detection from URL\n- `arxiv.org`, `*.pdf` ‚Üí paper\n- `youtube.com`, `youtu.be` ‚Üí video\n- Other URLs ‚Üí article\n- No URL ‚Üí concept\n\n## Depth Levels\n\n| Depth | Iterations | Description |\n|-------|------------|-------------|\n| shallow | 1 | Quick check, single explanation cycle |\n| standard | 2 | Two refinement cycles (default) |\n| deep | 3 | Full deep-dive with extensive questioning |\n\n## Workflow\n\n### Step 1: Parse Arguments\n\nParse the command arguments to determine:\n1. **Type**: First argument (paper, video, article, concept) or auto-detect\n2. **URL/Topic**: The source URL or concept name\n3. **Flags**: `--depth shallow|standard|deep` (default: standard)\n\n**Examples:**\n- `/teach concept Event Sourcing` ‚Üí type=concept, topic=\"Event Sourcing\"\n- `/teach https://arxiv.org/pdf/2512.24601` ‚Üí type=paper (auto-detected)\n- `/teach video https://youtube.com/watch?v=abc --depth deep` ‚Üí type=video, depth=deep\n\n### Step 2: Read Configuration\n\n```bash\n# Expand ~ to home directory\nWORKBENCH_PATH=$(eval echo \"~/workbench\")\n```\n\nCheck if `.claude/jot.local.md` exists and read `workbench_path` from YAML frontmatter.\n\n### Step 3: Ensure Directory Structure\n\nCreate the target directory if it doesn't exist:\n\n```bash\nmkdir -p \"${WORKBENCH_PATH}/notes/learned\"\n```\n\n### Step 4: Check for Existing Teaching Note\n\nBefore proceeding, check if a teaching note already exists:\n\n```bash\nls \"${WORKBENCH_PATH}/notes/learned/slugified-topic.md\" 2>/dev/null\n```\n\nIf found:\n1. Read the existing note\n2. Ask user: \"Update existing teaching note\" or \"Create new\" or \"View existing\"\n3. If update: Proceed to enhance workflow\n4. If create new: Continue to Step 5\n\n### Step 5: Delegate to Content Extractor (URL-based only)\n\nFor URL-based content (paper, video, article), delegate to the `content-extractor` agent:\n\n**Provide to agent:**\n- Content type (paper, video, article)\n- URL\n- Workbench path\n\n**Agent returns:**\n- Extracted content (text, structure)\n- Title\n- Author (if available)\n- Key sections\n\n### Step 6: Delegate to Learning Tutor\n\nDelegate to the `learning-tutor` agent for the interactive Feynman learning loop.\n\n**Provide to agent:**\n- Content type\n- Extracted content (from Step 5) or topic name (for concepts)\n- Source URL (if applicable)\n- Depth level\n- Workbench path\n- Template path: `${CLAUDE_PLUGIN_ROOT}/templates/teach/teaching-note.md`\n\n**Agent handles:**\n- Prerequisite confirmation (Phase 0)\n- All 7 phases of the Feynman Framework\n- Interactive questioning with user\n- Teaching note generation\n- Related notes linking\n- Saving to `notes/learned/`\n\n### Step 7: Report Success\n\nAfter the learning-tutor agent completes, report:\n\"Teaching note saved to [path]\"\n\"Linked to [N] related notes\" (if applicable)\n\n## Examples\n\n### Teach Back of a Research Paper\n```\n/teach paper https://arxiv.org/pdf/2512.24601\n```\n‚Üí Confirms you've read it, runs Feynman loop\n‚Üí Saves to `~/workbench/notes/learned/attention-mechanisms.md`\n\n### Teach Back of a YouTube Video\n```\n/teach video https://youtube.com/watch?v=abc123\n```\n‚Üí Confirms you've watched it, extracts transcript for reference\n‚Üí Saves to `~/workbench/notes/learned/video-topic.md`\n\n### Teach Back of an Article\n```\n/teach article https://martinfowler.com/articles/microservices.html\n```\n‚Üí Confirms you've read it, runs Feynman loop\n‚Üí Saves to `~/workbench/notes/learned/microservices.md`\n\n### Teach Back of a Concept\n```\n/teach concept Event Sourcing\n```\n‚Üí Confirms you've studied it, runs full Feynman loop\n‚Üí Saves to `~/workbench/notes/learned/event-sourcing.md`\n\n### Auto-Detect Type from URL\n```\n/teach https://arxiv.org/abs/2103.12345\n```\n‚Üí Auto-detects as paper, confirms engagement, runs Feynman loop\n\n### Control Depth\n```\n/teach concept CQRS --depth deep\n```\n‚Üí Runs 3 refinement iterations for comprehensive solidification\n\n## Tips\n\n- **You must engage with the content first** - there are no shortcuts\n- Start with `--depth standard` (default) for most topics\n- Use `--depth shallow` for quick verification of understanding\n- Use `--depth deep` for complex topics you want to master\n- The more honestly you engage with the questions, the better\n- Teaching notes integrate with your jot captures via [[wikilinks]]\n- Your teaching notes are written in first person - they're YOUR understanding\n",
        "plugins/jot/skills/sketch-from-capture.md": "---\nname: sketch-from-capture\ndescription: This skill should be used when the user wants to create a visual sketch, diagram, or mind map from captured content like articles, videos, or blips. Enables creating Excalidraw visualizations from jot captures.\nversion: 1.0.0\n---\n\n# Sketch from Capture\n\nWhen a user captures content and wants to visualize it, use the `/sketch` command from the sketch-note plugin.\n\n## Activation Triggers\n\nUse this skill when the user mentions:\n- \"visualize this article\"\n- \"create a diagram from this video\"\n- \"sketch the architecture from this repo\"\n- \"mind map this capture\"\n- \"draw what I just captured\"\n- \"make a visual summary\"\n\n## Workflow\n\n### 1. After Capturing Content (article, video, blip)\n\nExtract the key information needed for visualization:\n- Key concepts and main ideas\n- Relationships between concepts\n- Structure and hierarchy\n- Flow or sequence (if applicable)\n\n### 2. For Videos (YouTube, etc.)\n\nWhen visualizing video content:\n1. Extract main topics from the transcript/summary\n2. Identify the flow/sequence of ideas\n3. Note key takeaways and conclusions\n4. Create flowchart or mind map structure\n\n**Visualization approach:**\n- Use flowchart for step-by-step tutorials\n- Use mind map for conceptual explanations\n- Use architecture diagram for technical overviews\n\n### 3. For Articles/Web Pages\n\nWhen visualizing article content:\n1. Extract the main argument or thesis\n2. Identify supporting points\n3. Note relationships between concepts\n4. Capture key conclusions\n\n**Visualization approach:**\n- Use hierarchical diagram for structured arguments\n- Use concept map for interconnected ideas\n- Use timeline for historical/sequential content\n\n### 4. For Blips (Tools/Technologies)\n\nWhen visualizing tech radar blips:\n1. Extract core features and capabilities\n2. Identify use cases and applications\n3. Note alternatives and comparisons\n4. Capture adoption considerations\n\n**Visualization approach:**\n- Use comparison diagram for alternatives\n- Use architecture diagram for system integration\n- Use mind map for feature exploration\n\n## Integration with /sketch\n\nAfter extracting content, invoke the sketch command:\n\n```\n/sketch --mode custom \"{extracted content description}\"\n```\n\n**Example workflow:**\n\n1. User: \"capture https://youtube.com/watch?v=abc123 and visualize it\"\n\n2. First, capture the video using jot capture:\n   - Fetch video metadata and transcript\n   - Create capture note in workbench\n\n3. Extract key concepts:\n   - Main topic: \"Building REST APIs\"\n   - Key points: Authentication, Routing, Middleware, Error Handling\n   - Flow: Setup ‚Üí Routes ‚Üí Middleware ‚Üí Auth ‚Üí Testing\n\n4. Create visualization:\n   ```\n   /sketch --mode custom \"REST API tutorial flow: Setup ‚Üí Routing ‚Üí Middleware ‚Üí Authentication ‚Üí Error Handling ‚Üí Testing. Key concepts: Express.js framework, JWT tokens, middleware pattern\"\n   ```\n\n5. Link the sketch to the capture note (both in workbench)\n\n## Output Location\n\nBoth captures and sketches are saved to the shared workbench:\n- Captures: `${workbench_path}/notes/{type}/`\n- Sketches: `${workbench_path}/sketches/`\n\nThis makes it easy to find related content together.\n\n## Cross-Referencing\n\nWhen creating a sketch from captured content, include a reference in the sketch description:\n- \"Based on: {capture title}\"\n- \"Source: {URL}\"\n\nThis maintains traceability between captures and their visualizations.\n",
        "plugins/sketch-note/.claude-plugin/plugin.json": "{\n  \"name\": \"sketch-note\",\n  \"version\": \"1.2.1\",\n  \"description\": \"Generate visual sketch notes in Excalidraw format from conversations, code architecture, or custom content\",\n  \"author\": {\n    \"name\": \"Krishnaswamy Subramanian\",\n    \"email\": \"jskswamy@gmail.com\"\n  },\n  \"keywords\": [\n    \"sketch\",\n    \"excalidraw\",\n    \"diagram\",\n    \"visualization\",\n    \"architecture\",\n    \"notes\",\n    \"hand-drawn\"\n  ]\n}\n",
        "plugins/sketch-note/README.md": "# Sketch Note Plugin\n\nGenerate visual sketch notes in Excalidraw format from conversations, code architecture, or custom content.\n\n## Features\n\n- **Multiple content modes**: Capture conversation summaries, visualize code architecture, or sketch custom content\n- **Excalidraw output**: Creates `.excalidraw` files that open directly in Excalidraw\n- **PNG export**: Interactive workflow detects available tools and guides you through export options\n- **Customizable styling**: Configure background, pen type, roughness, and visual effects\n- **Persistent preferences**: Settings saved per-project for consistent output\n\n## Installation\n\n```bash\nclaude --plugin-dir ./plugins/sketch-note\n```\n\n## Usage\n\n### Command\n\n```bash\n/sketch                           # Interactive mode selection\n/sketch --mode conversation       # Sketch current conversation\n/sketch --mode code               # Visualize code architecture\n/sketch --mode custom             # Custom content input\n/sketch --output my-diagram       # Specify output filename\n/sketch --format png              # PNG via Excalidraw conversion\n/sketch --format both             # Export both Excalidraw and PNG\n/sketch --format direct-png       # Direct PNG (no Excalidraw file)\n/sketch --format png --scale 4    # High-resolution PNG (4x)\n```\n\n### Agent\n\nThe sketch agent triggers proactively when you ask to:\n- \"visualize this architecture\"\n- \"create a diagram of...\"\n- \"sketch the flow\"\n- \"draw how this works\"\n\n## Configuration\n\nSettings are stored in `.claude/sketch-note.local.md`:\n\n```yaml\n---\nbackground_color: white      # white, cream, light-gray, light-blue, light-yellow\nroughness: hand-drawn        # hand-drawn, sketchy, clean\nstroke_width: medium         # thin, medium, bold\nbackground_pattern: none     # none, dots, grid, lines\nvisual_effects: []           # shadow, glow, cursive\nresolution: standard         # standard, high, 4k\noutput_format: excalidraw    # excalidraw, png, both, direct-png\npng_scale: 2                 # 1, 2, 4\n---\n```\n\n## Output\n\nSketch notes are saved to `${workbench_path}/sketches/` directory as `.excalidraw` files.\n\nThe `workbench_path` is read from `.claude/jot.local.md` (shared with the jot plugin). Default: `~/workbench`.\n\n## Styles\n\n| Roughness | Description |\n|-----------|-------------|\n| hand-drawn | High roughness, casual sketch look |\n| sketchy | Medium roughness, balanced appearance |\n| clean | Low roughness, professional diagrams |\n\n| Stroke Width | Description |\n|--------------|-------------|\n| thin | 1px stroke, delicate lines |\n| medium | 2px stroke, balanced visibility |\n| bold | 4px stroke, emphasis and impact |\n\n## Visual Effects\n\n- **shadow**: Adds drop shadow to elements\n- **glow**: Adds subtle glow effect\n- **cursive**: Uses handwriting-style font for text\n\n## PNG Export\n\nThe plugin supports two approaches for PNG generation:\n\n### Approach 1: Direct PNG (Recommended for quick exports)\n\nUse `--format direct-png` to generate PNG directly without an intermediate Excalidraw file. This uses **Mermaid CLI** with hand-drawn styling.\n\n```bash\nnpm install -g @mermaid-js/mermaid-cli\n```\n\n**Pros:** Fast, single tool, good for flowcharts and diagrams\n**Cons:** Less customizable than Excalidraw, no editable source file\n\n### Approach 2: Excalidraw Conversion\n\nUse `--format png` or `--format both` to generate Excalidraw first, then convert to PNG.\n\n### Interactive Workflow\n\nWhen you request PNG output, the plugin:\n1. **Detects available runners** (nix-shell, npx) and globally installed tools\n2. **Smart execution**:\n   - If tool is globally installed ‚Üí uses it directly\n   - If nix available ‚Üí can run via `nix-shell -p`\n   - If npx available ‚Üí runs via `npx -y` (no install needed)\n3. **Fallback options**:\n   - If multiple tools available ‚Üí asks which you prefer\n   - If no tools or runners ‚Üí offers to install or skip\n\n### Available Conversion Tools\n\n#### Option 1: excalidraw-brute-export-cli (Recommended)\n\nUses Playwright with headless Firefox for exact Excalidraw rendering fidelity.\n\n```bash\nnpm install -g excalidraw-brute-export-cli\nnpx playwright install firefox\n```\n\n#### Option 2: @tommywalkie/excalidraw-cli\n\nUses node-canvas with Rough.js. Faster, but rendering may differ slightly.\n\n```bash\nnpm install -g @tommywalkie/excalidraw-cli\n```\n\n### Direct PNG Tool\n\n#### Mermaid CLI (for direct-png format)\n\nGenerates diagrams directly as PNG with hand-drawn styling.\n\n```bash\nnpm install -g @mermaid-js/mermaid-cli\n```\n\n### Zero-Install Mode (nix/npx)\n\nIf you have **nix** or **npx** available, you don't need to install any tools globally. The plugin will run them on-demand:\n\n```bash\n# Via npx (no install needed, comes with Node.js)\nnpx -y @mermaid-js/mermaid-cli -i input.mmd -o output.png\n\n# Via nix-shell (isolated environment)\nnix-shell -p mermaid-cli --run \"mmdc -i input.mmd -o output.png\"\n```\n\n**Priority order:**\n1. Globally installed tool (fastest)\n2. npx (most compatible for npm packages)\n3. nix-shell (for nix users)\n\n### No Tools or Runners?\n\nIf no tools are installed AND no runners (npx/nix) are available:\n- **Install a tool** - The plugin will run the installation command for you\n- **Try direct PNG** - Use Mermaid for direct generation instead\n- **Skip PNG** - Create only the Excalidraw file, export manually later\n- **Cancel** - Stop and install tools yourself first\n\n### Manual Export\n\nYou can always export manually by:\n1. Opening the `.excalidraw` file at [excalidraw.com](https://excalidraw.com)\n2. Using the Export menu to save as PNG\n\n### Scale Options\n\n| Scale | Description |\n|-------|-------------|\n| 1 | Standard resolution (1x) |\n| 2 | High resolution (2x, recommended) |\n| 4 | Maximum quality (4x, for large displays)\n",
        "plugins/sketch-note/agents/sketch.md": "---\nname: sketch\ndescription: Use this agent proactively when users want to visualize, diagram, or create visual representations of conversations, code architecture, or concepts. Generates Excalidraw sketch notes with customizable hand-drawn styling.\n\n<example>\nContext: User asks to visualize the current discussion\nuser: \"can you visualize what we've discussed?\"\nassistant: \"I'll use the sketch agent to create a visual summary of our conversation.\"\n<commentary>\nRequest to visualize conversation content - sketch agent creates Excalidraw diagram.\n</commentary>\n</example>\n\n<example>\nContext: User wants to see the code architecture\nuser: \"draw me the architecture of this codebase\"\nassistant: \"I'll create an architecture diagram using the sketch agent.\"\n<commentary>\nArchitecture visualization request - sketch agent analyzes code and creates diagram.\n</commentary>\n</example>\n\n<example>\nContext: User wants a diagram of a concept\nuser: \"sketch out how the authentication flow works\"\nassistant: \"I'll create a sketch of the authentication flow.\"\n<commentary>\nCustom concept visualization - sketch agent creates flow diagram.\n</commentary>\n</example>\n\n<example>\nContext: User asks for a mind map or diagram\nuser: \"create a mind map of the main components\"\nassistant: \"I'll use the sketch agent to create a visual mind map.\"\n<commentary>\nMind map request - sketch agent creates visual representation.\n</commentary>\n</example>\n\n<example>\nContext: User wants visual documentation\nuser: \"I need a diagram showing the data flow\"\nassistant: \"I'll generate a data flow diagram as a sketch note.\"\n<commentary>\nDiagram request for data flow - sketch agent handles visual generation.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: cyan\ntools:\n  - Read\n  - Write\n  - Glob\n  - Grep\n  - Bash\n  - AskUserQuestion\n---\n\nYou are a specialized agent for creating visual sketch notes in Excalidraw format.\n\n**Your Core Responsibilities:**\n1. Analyze content from conversations, code, or user descriptions\n2. Load user style preferences from settings\n3. Generate well-structured Excalidraw diagrams\n4. Save to the sketches/ directory with appropriate naming\n\n**Configuration:**\n\n**Read workbench path from `.claude/jot.local.md`:**\n```yaml\n---\nworkbench_path: ~/workbench\n---\n```\nDefault: `~/workbench` if not configured.\n\n**Read sketch settings from `.claude/sketch-note.local.md`** if it exists:\n```yaml\n---\nbackground_color: white\nroughness: hand-drawn\nstroke_width: medium\nbackground_pattern: none\nvisual_effects: []\nresolution: standard\n---\n```\n\nIf settings don't exist, use these defaults:\n- Background: white (#ffffff)\n- Roughness: hand-drawn (2)\n- Stroke width: medium (2)\n- No background pattern\n- No visual effects\n- Standard resolution\n\n**Workflow:**\n\n### Step 1: Determine Content Type\n\nBased on user request, identify the mode:\n\n| Trigger Phrases | Mode |\n|----------------|------|\n| \"visualize conversation\", \"summarize visually\", \"sketch what we discussed\" | conversation |\n| \"architecture diagram\", \"code structure\", \"visualize the codebase\" | code |\n| \"diagram of\", \"sketch out\", \"draw how\", \"mind map of\" | custom |\n\n### Step 2: Gather Content\n\n**Conversation mode:**\n- Review conversation history\n- Extract key topics, decisions, relationships\n- Identify main themes and action items\n\n**Code mode:**\n- Use Glob to find source files\n- Identify entry points and modules\n- Map dependencies and data flow\n\n**Custom mode:**\n- Parse user description\n- Identify entities and relationships\n- Determine appropriate diagram type (flowchart, mind map, etc.)\n\n### Step 3: Generate Excalidraw Elements\n\nCreate appropriate elements:\n\n**For boxes/nodes:**\n```json\n{\n  \"type\": \"rectangle\",\n  \"id\": \"unique-id\",\n  \"x\": 100, \"y\": 100,\n  \"width\": 200, \"height\": 80,\n  \"strokeColor\": \"#1e1e1e\",\n  \"backgroundColor\": \"#a5d8ff\",\n  \"fillStyle\": \"hachure\",\n  \"roughness\": 2,\n  \"strokeWidth\": 2\n}\n```\n\n**For connections:**\n```json\n{\n  \"type\": \"arrow\",\n  \"id\": \"unique-id\",\n  \"points\": [[0, 0], [100, 50]],\n  \"strokeColor\": \"#1e1e1e\",\n  \"roughness\": 2,\n  \"strokeWidth\": 2\n}\n```\n\n**For labels:**\n```json\n{\n  \"type\": \"text\",\n  \"id\": \"unique-id\",\n  \"text\": \"Label\",\n  \"fontSize\": 20,\n  \"fontFamily\": 1,\n  \"roughness\": 1\n}\n```\n\n### Step 4: Apply User Styles\n\nMap preferences to Excalidraw properties:\n\n| Setting | Property |\n|---------|----------|\n| background_color: white | viewBackgroundColor: \"#ffffff\" |\n| background_color: cream | viewBackgroundColor: \"#faf8f5\" |\n| background_color: light-gray | viewBackgroundColor: \"#f5f5f5\" |\n| background_color: light-blue | viewBackgroundColor: \"#f0f8ff\" |\n| background_color: light-yellow | viewBackgroundColor: \"#fffef0\" |\n| roughness: hand-drawn | roughness: 2 |\n| roughness: sketchy | roughness: 1 |\n| roughness: clean | roughness: 0 |\n| stroke_width: thin | strokeWidth: 1 |\n| stroke_width: medium | strokeWidth: 2 |\n| stroke_width: bold | strokeWidth: 4 |\n\nVisual effects:\n- cursive: fontFamily: 3 (Virgil handwriting)\n- shadow: Not directly supported, simulate with offset duplicates\n- glow: Lighter stroke color\n\n### Step 5: Layout and Positioning\n\nApply smart layout:\n- **Hierarchical:** Top-to-bottom for trees/hierarchies\n- **Flow:** Left-to-right for processes/sequences\n- **Radial:** Center-out for mind maps\n- **Grid:** Even spacing for architecture diagrams\n\nSpacing rules:\n- Minimum 40px between elements\n- Center align text within boxes\n- Arrows connect to box edges, not centers\n\n### Step 6: Generate Output\n\nCreate complete Excalidraw JSON:\n\n```json\n{\n  \"type\": \"excalidraw\",\n  \"version\": 2,\n  \"source\": \"sketch-note-plugin\",\n  \"elements\": [...],\n  \"appState\": {\n    \"viewBackgroundColor\": \"#ffffff\",\n    \"gridSize\": null\n  },\n  \"files\": {}\n}\n```\n\n### Step 7: Save and Report\n\n**Output location:** `${workbench_path}/sketches/` (read from `.claude/jot.local.md`)\n\n1. Create `${workbench_path}/sketches/` directory if needed\n2. Generate filename: `{mode}-{timestamp}.excalidraw`\n3. Write the file to `${workbench_path}/sketches/{filename}.excalidraw`\n4. Report to user:\n   ```\n   Created sketch: ~/workbench/sketches/conversation-20240115-143022.excalidraw\n\n   Elements: X boxes, Y arrows, Z labels\n   Style: hand-drawn, medium stroke\n\n   Open with excalidraw.com or VS Code Excalidraw extension.\n   ```\n\n**Color Palette:**\n\nUse these colors for element backgrounds:\n- Primary: #a5d8ff (light blue)\n- Secondary: #b2f2bb (light green)\n- Accent: #ffec99 (light yellow)\n- Warning: #ffc9c9 (light red)\n- Neutral: #e9ecef (light gray)\n\n**Element IDs:**\n\nGenerate unique IDs using: `{type}-{timestamp}-{random4}`\nExample: `rect-1705312222-a7f3`\n\n**Important Notes:**\n- Always validate JSON before writing\n- Ensure arrow bindings reference valid element IDs\n- Keep text concise (truncate long labels)\n- Layer order: background patterns ‚Üí boxes ‚Üí arrows ‚Üí text\n",
        "plugins/sketch-note/commands/sketch.md": "---\nname: sketch\ndescription: Generate visual sketch notes in Excalidraw format from conversations, code architecture, or custom content\nargument-hint: \"[--mode conversation|code|custom] [--format excalidraw|png|both] [--output <name>] [description...]\"\nallowed-tools:\n  - Read\n  - Write\n  - Glob\n  - Grep\n  - Bash\n  - AskUserQuestion\n---\n\n# Sketch Command\n\nGenerate visual sketch notes as Excalidraw files with customizable styling.\n\n## Argument Parsing\n\nParse the command arguments to extract:\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `--mode` | `-m` | string | (prompt) | Content mode: `conversation`, `code`, or `custom` |\n| `--format` | `-f` | string | (from settings) | Output: `excalidraw`, `png`, `both`, or `direct-png` |\n| `--output` | `-o` | string | auto | Output filename (without extension) |\n| `--scale` | | number | 2 | PNG scale factor (1, 2, or 4) |\n| `[description...]` | | string | | Free-form description for custom mode |\n\n**Format options:**\n- `excalidraw` - Editable .excalidraw file only\n- `png` - PNG via Excalidraw conversion (keeps .excalidraw as intermediate)\n- `both` - Both Excalidraw and PNG files\n- `direct-png` - Generate PNG directly using Mermaid (no Excalidraw file)\n\n**Examples:**\n```\n/sketch                              # Interactive mode selection\n/sketch --mode conversation          # Sketch current conversation\n/sketch -m code                      # Visualize code architecture\n/sketch --mode custom API flow       # Custom sketch with description\n/sketch -o my-diagram -m code        # Named output file\n/sketch --format png                 # PNG via Excalidraw conversion\n/sketch -f both                      # Export both Excalidraw and PNG\n/sketch --format direct-png          # Direct PNG generation (no Excalidraw)\n/sketch --format png --scale 4       # High-resolution PNG (4x)\n```\n\n---\n\n## Execution Flow\n\n### Step 1: Load User Preferences\n\n**Read workbench path from `.claude/jot.local.md`:**\n\n```yaml\n---\nworkbench_path: ~/workbench\n---\n```\n\nDefault: `~/workbench` if not configured or file doesn't exist.\n\n**Read sketch settings from `.claude/sketch-note.local.md`** if it exists:\n\n```yaml\n---\nbackground_color: white\nroughness: hand-drawn\nstroke_width: medium\nbackground_pattern: none\nvisual_effects: []\nresolution: standard\noutput_format: excalidraw\npng_scale: 2\n---\n```\n\n**If settings file doesn't exist (first-time setup):**\n\nUse AskUserQuestion to gather preferences:\n\n1. **Background color:**\n   ```\n   Choose a background color for your sketch notes:\n   ‚óã White (Recommended) - Clean, classic look\n   ‚óã Cream - Warm, paper-like feel\n   ‚óã Light Gray - Subtle, modern appearance\n   ‚óã Light Blue - Calm, focused feel\n   ‚óã Light Yellow - Sunny, creative vibe\n   ```\n\n2. **Roughness (pen style):**\n   ```\n   How should your sketches look?\n   ‚óã Hand-drawn (Recommended) - Casual, authentic sketch feel\n   ‚óã Sketchy - Balanced between rough and clean\n   ‚óã Clean - Professional, precise diagrams\n   ```\n\n3. **Stroke width:**\n   ```\n   Choose line thickness:\n   ‚óã Thin - Delicate, detailed lines\n   ‚óã Medium (Recommended) - Balanced visibility\n   ‚óã Bold - Strong emphasis, high impact\n   ```\n\n4. **Background pattern:**\n   ```\n   Add a background pattern?\n   ‚óã None (Recommended) - Clean background\n   ‚óã Dots - Subtle dot grid\n   ‚óã Grid - Square grid lines\n   ‚óã Lines - Horizontal ruled lines\n   ```\n\n5. **Visual effects (multi-select):**\n   ```\n   Select visual effects to apply:\n   ‚òê Shadow - Add drop shadows to elements\n   ‚òê Glow - Subtle glow effect around elements\n   ‚òê Cursive - Use handwriting-style font for text\n   ```\n\n6. **Resolution:**\n   ```\n   Output resolution:\n   ‚óã Standard (Recommended) - Good for most uses\n   ‚óã High - 2x resolution for presentations\n   ‚óã 4K - Maximum quality for large displays\n   ```\n\nAfter gathering all preferences:\n- Create `.claude/sketch-note.local.md` with selections\n- Show confirmation: \"Preferences saved! You can change these anytime by editing `.claude/sketch-note.local.md`\"\n\n### Step 2: Determine Content Mode\n\n**If `--mode` argument provided:** Use specified mode\n\n**If no mode specified:** Use AskUserQuestion:\n```\nWhat would you like to sketch?\n‚óã Conversation - Summarize our current conversation as visual notes\n‚óã Code Architecture - Visualize code structure from this project\n‚óã Custom - Create a sketch from your own description\n```\n\n### Step 3: Gather Content Based on Mode\n\n#### Mode: Conversation\n\n1. **Analyze the conversation history** to extract:\n   - Main topics discussed\n   - Key decisions made\n   - Important concepts explained\n   - Action items or next steps\n   - Relationships between ideas\n\n2. **Create a visual hierarchy:**\n   - Central theme/topic\n   - Major branches for subtopics\n   - Connections between related concepts\n   - Callouts for important points\n\n3. **Structure for Excalidraw:**\n   - Title box at top\n   - Main concept boxes arranged spatially\n   - Arrows showing relationships\n   - Text annotations for context\n\n#### Mode: Code Architecture\n\n1. **Discover project structure:**\n   - Use Glob to find source files: `**/*.{ts,tsx,js,jsx,py,go,rs,java}`\n   - Read key files to understand architecture\n   - Identify main modules/packages\n\n2. **Extract architecture elements:**\n   - Entry points (main files, index files)\n   - Core modules and their responsibilities\n   - Dependencies between modules\n   - External integrations (APIs, databases)\n\n3. **Create architecture diagram:**\n   - Boxes for modules/services\n   - Arrows for dependencies/data flow\n   - Groups for related components\n   - Labels for key interfaces\n\n4. **Ask for scope if large codebase:**\n   ```\n   This is a large codebase. Which area should I focus on?\n   ‚óã Full overview - High-level architecture only\n   ‚óã Specific directory - Choose a directory to visualize\n   ‚óã Entry point flow - Trace from main entry point\n   ```\n\n#### Mode: Custom\n\n1. **Use the description from arguments** or prompt:\n   ```\n   Describe what you'd like to sketch:\n   > [user input]\n   ```\n\n2. **Parse the description** to identify:\n   - Main entities/concepts\n   - Relationships between them\n   - Flow direction (if applicable)\n   - Groupings or categories\n\n3. **Generate appropriate diagram type:**\n   - Flowchart for processes\n   - Mind map for concepts\n   - Architecture diagram for systems\n   - Sequence for interactions\n\n### Step 4: Load Style Configuration\n\nRead style definitions from `${CLAUDE_PLUGIN_ROOT}/styles/` based on preferences:\n\n**Map preferences to Excalidraw properties:**\n\n| Preference | Excalidraw Property |\n|------------|---------------------|\n| `background_color: white` | `appState.viewBackgroundColor: \"#ffffff\"` |\n| `background_color: cream` | `appState.viewBackgroundColor: \"#faf8f5\"` |\n| `background_color: light-gray` | `appState.viewBackgroundColor: \"#f5f5f5\"` |\n| `background_color: light-blue` | `appState.viewBackgroundColor: \"#f0f8ff\"` |\n| `background_color: light-yellow` | `appState.viewBackgroundColor: \"#fffef0\"` |\n| `roughness: hand-drawn` | `roughness: 2` |\n| `roughness: sketchy` | `roughness: 1` |\n| `roughness: clean` | `roughness: 0` |\n| `stroke_width: thin` | `strokeWidth: 1` |\n| `stroke_width: medium` | `strokeWidth: 2` |\n| `stroke_width: bold` | `strokeWidth: 4` |\n\n**Visual effects mapping:**\n- `shadow`: Add `shadow` element property\n- `glow`: Lighter stroke color with blur effect simulation\n- `cursive`: Use `fontFamily: 3` (Virgil handwriting font)\n\n**Resolution mapping:**\n- `standard`: Default canvas size\n- `high`: 2x element scaling\n- `4k`: 4x element scaling\n\n### Step 5: Generate Excalidraw JSON\n\nCreate valid Excalidraw JSON structure:\n\n```json\n{\n  \"type\": \"excalidraw\",\n  \"version\": 2,\n  \"source\": \"sketch-note-plugin\",\n  \"elements\": [\n    // Generated elements based on content\n  ],\n  \"appState\": {\n    \"viewBackgroundColor\": \"#ffffff\",\n    \"gridSize\": null\n  },\n  \"files\": {}\n}\n```\n\n**Element generation rules:**\n\n1. **Text elements:**\n   ```json\n   {\n     \"type\": \"text\",\n     \"id\": \"unique-id\",\n     \"x\": 100,\n     \"y\": 100,\n     \"width\": 200,\n     \"height\": 30,\n     \"text\": \"Label text\",\n     \"fontSize\": 20,\n     \"fontFamily\": 1,\n     \"roughness\": 2,\n     \"strokeColor\": \"#1e1e1e\",\n     \"backgroundColor\": \"transparent\"\n   }\n   ```\n\n2. **Rectangle elements (boxes):**\n   ```json\n   {\n     \"type\": \"rectangle\",\n     \"id\": \"unique-id\",\n     \"x\": 50,\n     \"y\": 50,\n     \"width\": 200,\n     \"height\": 100,\n     \"strokeColor\": \"#1e1e1e\",\n     \"backgroundColor\": \"#a5d8ff\",\n     \"fillStyle\": \"hachure\",\n     \"roughness\": 2,\n     \"strokeWidth\": 2\n   }\n   ```\n\n3. **Arrow elements (connections):**\n   ```json\n   {\n     \"type\": \"arrow\",\n     \"id\": \"unique-id\",\n     \"x\": 250,\n     \"y\": 100,\n     \"width\": 100,\n     \"height\": 0,\n     \"points\": [[0, 0], [100, 0]],\n     \"strokeColor\": \"#1e1e1e\",\n     \"roughness\": 2,\n     \"strokeWidth\": 2,\n     \"startBinding\": { \"elementId\": \"box-1\", \"focus\": 0, \"gap\": 5 },\n     \"endBinding\": { \"elementId\": \"box-2\", \"focus\": 0, \"gap\": 5 }\n   }\n   ```\n\n**Layout algorithm:**\n\n1. **Calculate positions** to avoid overlaps\n2. **Group related elements** spatially\n3. **Use consistent spacing** (40px between elements)\n4. **Center the diagram** in canvas\n5. **Flow direction:** Top-to-bottom for hierarchies, left-to-right for flows\n\n**Color palette for elements:**\n- Primary boxes: `#a5d8ff` (light blue)\n- Secondary boxes: `#b2f2bb` (light green)\n- Accent boxes: `#ffec99` (light yellow)\n- Warning boxes: `#ffc9c9` (light red)\n- Neutral boxes: `#e9ecef` (light gray)\n\n### Step 6: Determine Output Format and Export Method\n\nThis step handles the interactive workflow for choosing output format and PNG generation method.\n\n#### 6a. Detect Available Tools and Runners\n\n**First, detect available tool runners:**\n```bash\n# Check for nix (preferred - isolated environments)\ncommand -v nix-shell >/dev/null 2>&1 && echo \"has_nix\"\n\n# Check for npx (fallback - runs without global install)\ncommand -v npx >/dev/null 2>&1 && echo \"has_npx\"\n```\n\nStore:\n- `has_nix`: true/false\n- `has_npx`: true/false\n\n**Then, check for globally installed tools:**\n```bash\n# Direct PNG generation (no Excalidraw intermediate)\ncommand -v mmdc >/dev/null 2>&1 && echo \"mermaid-cli\"\n\n# Excalidraw to PNG converters\ncommand -v excalidraw-brute-export-cli >/dev/null 2>&1 && echo \"brute-export\"\ncommand -v excalidraw-cli >/dev/null 2>&1 && echo \"excalidraw-cli\"\n```\n\nStore results:\n- `has_mermaid`: true/false (for direct PNG)\n- `has_brute_export`: true/false\n- `has_excalidraw_cli`: true/false\n\n**Tool availability logic:**\nA tool is \"available\" if ANY of these are true:\n1. Globally installed (`command -v {tool}` succeeds)\n2. Nix is available (can run via `nix-shell -p`)\n3. npx is available (can run via `npx`)\n\nIf `has_nix` or `has_npx` is true, all tools are considered available (will run on-demand).\n\n#### 6b. Determine Output Format\n\n**If `--format` argument provided:** Use specified format, skip to 6c\n\n**If no format specified:** Use AskUserQuestion:\n```\nWhat output format would you like?\n‚óã Excalidraw only (Recommended) - Editable .excalidraw file\n‚óã PNG + Excalidraw - Both formats for sharing and editing\n‚óã Direct PNG - Generate PNG directly (no Excalidraw file)\n```\n\n#### 6c. Handle PNG Generation Method (if PNG requested)\n\n**If format is `excalidraw` only:** Skip to Step 7\n\n**If format is `direct-png`:** Go to 6c-direct\n\n**If format is `png` or `both`:** Go to 6c-convert\n\n##### 6c-direct: Direct PNG Generation (no Excalidraw)\n\nThis workflow generates PNG directly without creating an intermediate Excalidraw file.\n\n**Determine how to run mermaid-cli:**\n\n1. **If globally installed:** Use `mmdc` directly\n2. **If nix available:** Use `nix-shell -p mermaid-cli --run \"mmdc ...\"`\n3. **If npx available:** Use `npx -y @mermaid-js/mermaid-cli ...`\n4. **None available:** Prompt user\n\n**If mermaid-cli is available (globally, via nix, or via npx):**\n```\nUsing Mermaid CLI for direct PNG generation with hand-drawn style.\n{via nix-shell | via npx | globally installed}\n```\n- Set `generation_method: mermaid`\n- Set `mermaid_runner`: `global` | `nix` | `npx`\n- Skip Excalidraw generation entirely (go to Step 7-direct)\n\n**If NO runner is available (no nix, no npx, not installed):**\nUse AskUserQuestion:\n```\nDirect PNG requires Mermaid CLI and no runner is available. How would you like to proceed?\n‚óã Install mermaid-cli globally - npm install -g @mermaid-js/mermaid-cli\n‚óã Use Excalidraw conversion - Create Excalidraw first, then convert to PNG\n‚óã Excalidraw only - Create editable file, export PNG manually later\n‚óã Cancel - Stop and install tools first\n```\n\n**If user chooses to install mermaid-cli:**\n```bash\nnpm install -g @mermaid-js/mermaid-cli\n```\n\nAfter installation, verify:\n```bash\ncommand -v mmdc >/dev/null 2>&1 && echo \"installed\"\n```\n\n##### 6c-convert: Excalidraw to PNG Conversion\n\n**Determine how to run each tool:**\n\n| Tool | Nix Package | NPM Package |\n|------|-------------|-------------|\n| excalidraw-brute-export-cli | N/A (use npx) | excalidraw-brute-export-cli |\n| excalidraw-cli | N/A (use npx) | @tommywalkie/excalidraw-cli |\n\n**Runner priority:**\n1. Global install (if available)\n2. nix-shell (if nix available) - Note: These packages may not be in nixpkgs, fall back to npx\n3. npx (if available)\n\n**If nix or npx is available:**\nAll tools are considered available. Determine which runner to use:\n- Set `excalidraw_runner`: `global` | `npx`\n\n**Case 1: Multiple tools available (or runners available)**\nUse AskUserQuestion:\n```\nWhich export tool would you like to use?\n‚óã excalidraw-brute-export-cli (Recommended) - Highest fidelity, uses headless Firefox\n‚óã excalidraw-cli - Faster export, uses node-canvas (may differ slightly)\n```\n\n**Case 2: Only one tool globally installed (and no npx)**\nAuto-select the available tool:\n```\nUsing {tool-name} for PNG export.\n```\n\n**Case 3: No tools available AND no npx**\nUse AskUserQuestion:\n```\nPNG conversion requires a CLI tool. None detected and npx unavailable. How would you like to proceed?\n‚óã Install excalidraw-brute-export-cli (Recommended) - Highest fidelity\n‚óã Install excalidraw-cli - Faster, no browser dependency\n‚óã Try direct PNG - Use Mermaid for direct generation instead\n‚óã Skip PNG - Create Excalidraw file only, export manually later\n‚óã Cancel - Stop and install tools first\n```\n\n**If user chooses to install:**\n\nFor `excalidraw-brute-export-cli`:\n```bash\nnpm install -g excalidraw-brute-export-cli && npx playwright install firefox\n```\n\nFor `excalidraw-cli`:\n```bash\nnpm install -g @tommywalkie/excalidraw-cli\n```\n\nAfter installation, verify:\n```bash\ncommand -v {tool} >/dev/null 2>&1 && echo \"installed\"\n```\n\nIf installation succeeds, continue with export.\nIf installation fails, show error and offer to continue with Excalidraw only.\n\n**If user chooses \"Skip PNG\":**\n- Set format to `excalidraw`\n- Continue to Step 7\n- Show note: \"You can manually export to PNG at excalidraw.com\"\n\n**If user chooses \"Cancel\":**\n- Exit with message: \"Run the command again after installing an export tool.\"\n\n#### 6d. Determine PNG Scale (if PNG requested)\n\n**If `--scale` argument provided:** Use specified scale\n**Otherwise:** Use `png_scale` from settings (default: 2)\n\nStore: `generation_method` (mermaid | excalidraw-convert), `selected_tool`, `png_scale`, `final_format`\n\n### Step 7: Determine Output Path\n\n**Output location:** `${workbench_path}/sketches/` (from Step 1)\n\n**If `--output` provided:** Use specified name\n**Otherwise:** Generate name based on mode and timestamp\n\n**For Excalidraw-based output:**\n```\n${workbench_path}/sketches/{mode}-{timestamp}.excalidraw\n```\n\n**For Direct PNG output:**\n```\n${workbench_path}/sketches/{mode}-{timestamp}.png\n```\n\nExamples (assuming default workbench_path: `~/workbench`):\n- `~/workbench/sketches/conversation-20240115-143022.excalidraw`\n- `~/workbench/sketches/code-architecture-20240115-143022.excalidraw`\n- `~/workbench/sketches/my-api-flow.excalidraw` (if --output my-api-flow)\n- `~/workbench/sketches/api-flow-20240115-143022.png` (direct PNG)\n\n**Create sketches directory if needed:**\n```bash\nmkdir -p \"${workbench_path}/sketches\"\n```\n\n---\n\n## Direct PNG Generation (Mermaid Workflow)\n\n**If `generation_method` is `mermaid`:** Follow this workflow instead of Steps 8-9.\n\n### Step 8-direct: Generate Mermaid Diagram Definition\n\nConvert the content (from Step 3) into Mermaid diagram syntax.\n\n**For flowcharts/processes:**\n```mermaid\n%%{init: {'theme': 'default', 'themeVariables': { 'fontFamily': 'Comic Sans MS, cursive'}}}%%\nflowchart TD\n    A[Start] --> B{Decision}\n    B -->|Yes| C[Action 1]\n    B -->|No| D[Action 2]\n    C --> E[End]\n    D --> E\n```\n\n**For architecture diagrams:**\n```mermaid\n%%{init: {'theme': 'default'}}%%\ngraph LR\n    subgraph Frontend\n        A[React App]\n    end\n    subgraph Backend\n        B[API Server]\n        C[Database]\n    end\n    A --> B\n    B --> C\n```\n\n**For mind maps:**\n```mermaid\nmindmap\n  root((Central Topic))\n    Branch 1\n      Sub-topic 1a\n      Sub-topic 1b\n    Branch 2\n      Sub-topic 2a\n```\n\n**For sequence diagrams:**\n```mermaid\nsequenceDiagram\n    participant A as Client\n    participant B as Server\n    A->>B: Request\n    B-->>A: Response\n```\n\n**Style configuration for hand-drawn look:**\n```json\n{\n  \"theme\": \"default\",\n  \"look\": \"handDrawn\",\n  \"themeVariables\": {\n    \"fontFamily\": \"Virgil, Comic Sans MS, cursive\"\n  }\n}\n```\n\n### Step 9-direct: Generate PNG with Mermaid CLI\n\n1. **Write the Mermaid definition to a temp file:**\n   ```bash\n   cat > /tmp/sketch-{timestamp}.mmd << 'EOF'\n   {mermaid-definition}\n   EOF\n   ```\n\n2. **Create config for hand-drawn style:**\n   ```bash\n   cat > /tmp/mermaid-config.json << 'EOF'\n   {\n     \"theme\": \"default\",\n     \"look\": \"handDrawn\"\n   }\n   EOF\n   ```\n\n3. **Generate PNG based on `mermaid_runner`:**\n\n   **If `mermaid_runner: global`:**\n   ```bash\n   mmdc -i /tmp/sketch-{timestamp}.mmd \\\n        -o \"${workbench_path}/sketches/{filename}.png\" \\\n        -c /tmp/mermaid-config.json \\\n        -s {png_scale} \\\n        -b transparent\n   ```\n\n   **If `mermaid_runner: nix`:**\n   ```bash\n   nix-shell -p mermaid-cli --run \"mmdc -i /tmp/sketch-{timestamp}.mmd \\\n        -o \\\"${workbench_path}/sketches/{filename}.png\\\" \\\n        -c /tmp/mermaid-config.json \\\n        -s {png_scale} \\\n        -b transparent\"\n   ```\n\n   **If `mermaid_runner: npx`:**\n   ```bash\n   npx -y @mermaid-js/mermaid-cli -i /tmp/sketch-{timestamp}.mmd \\\n        -o \"${workbench_path}/sketches/{filename}.png\" \\\n        -c /tmp/mermaid-config.json \\\n        -s {png_scale} \\\n        -b transparent\n   ```\n\n   **Scale mapping:**\n   - `png_scale: 1` ‚Üí `-s 1`\n   - `png_scale: 2` ‚Üí `-s 2`\n   - `png_scale: 4` ‚Üí `-s 4`\n\n4. **Clean up temp files:**\n   ```bash\n   rm /tmp/sketch-{timestamp}.mmd /tmp/mermaid-config.json\n   ```\n\n5. **If generation fails:**\n   - Show error message\n   - Offer to create Excalidraw file instead as fallback\n\n**Skip to Step 10** for success message.\n\n---\n\n## Excalidraw-based Workflow\n\n**If `generation_method` is `excalidraw-convert` or format is `excalidraw`:** Follow Steps 8-9 below.\n\n### Step 8: Write Excalidraw File\n\n1. **Write the Excalidraw JSON file:**\n   ```\n   Write to: ${workbench_path}/sketches/{filename}.excalidraw\n   ```\n\n2. **If format is `png` only:** Continue to Step 9 (PNG export), then delete the .excalidraw file after successful PNG creation\n\n3. **If format is `excalidraw` or `both`:** Keep the .excalidraw file\n\n### Step 9: Export to PNG (if format is `png` or `both`)\n\nUse the `selected_tool` and `excalidraw_runner` determined in Step 6c.\n\n**For excalidraw-brute-export-cli:**\n\n*If globally installed (`excalidraw_runner: global`):*\n```bash\nexcalidraw-brute-export-cli -i \"${workbench_path}/sketches/{filename}.excalidraw\" \\\n  --format png \\\n  --scale {png_scale} \\\n  --background 1 \\\n  -o \"${workbench_path}/sketches/{filename}.png\"\n```\n\n*If via npx (`excalidraw_runner: npx`):*\n```bash\nnpx -y excalidraw-brute-export-cli -i \"${workbench_path}/sketches/{filename}.excalidraw\" \\\n  --format png \\\n  --scale {png_scale} \\\n  --background 1 \\\n  -o \"${workbench_path}/sketches/{filename}.png\"\n```\n\n**For excalidraw-cli:**\n\n*If globally installed (`excalidraw_runner: global`):*\n```bash\nexcalidraw-cli \"${workbench_path}/sketches/{filename}.excalidraw\" \"${workbench_path}/sketches/\"\n```\n\n*If via npx (`excalidraw_runner: npx`):*\n```bash\nnpx -y @tommywalkie/excalidraw-cli \"${workbench_path}/sketches/{filename}.excalidraw\" \"${workbench_path}/sketches/\"\n```\n\n**If export fails:**\n- Show error message\n- Keep the .excalidraw file\n- Suggest manual export: \"Export failed. You can manually export at excalidraw.com\"\n\n**If format was `png` only and export succeeded:**\n- Delete the temporary .excalidraw file:\n  ```bash\n  rm \"${workbench_path}/sketches/{filename}.excalidraw\"\n  ```\n\n### Step 10: Show Success Message\n\n**If only Excalidraw generated:**\n```\n‚úì Sketch created: ~/workbench/sketches/conversation-20240115-143022.excalidraw\n\nElements: 12 boxes, 8 arrows, 15 text labels\nStyle: hand-drawn, medium stroke, white background\n\nOpen in Excalidraw:\n- Visit excalidraw.com and drag the file to open\n- Or use VS Code with Excalidraw extension\n```\n\n**If PNG + Excalidraw generated (via conversion):**\n```\n‚úì Sketch created:\n  - ~/workbench/sketches/conversation-20240115-143022.excalidraw (editable)\n  - ~/workbench/sketches/conversation-20240115-143022.png (2x scale, via {tool-name})\n\nElements: 12 boxes, 8 arrows, 15 text labels\nStyle: hand-drawn, medium stroke, white background\n```\n\n**If PNG via conversion only (format=png):**\n```\n‚úì Sketch exported: ~/workbench/sketches/conversation-20240115-143022.png (2x scale, via {tool-name})\n\nElements: 12 boxes, 8 arrows, 15 text labels\nStyle: hand-drawn, medium stroke, white background\n\nNote: Excalidraw source not saved. Use --format both to keep editable version.\n```\n\n**If Direct PNG generated (via Mermaid):**\n```\n‚úì Sketch created: ~/workbench/sketches/conversation-20240115-143022.png (2x scale, via Mermaid)\n\nDiagram type: flowchart\nStyle: hand-drawn theme\n\nNote: This is a direct PNG - no editable source file.\nUse --format excalidraw or --format both if you need to edit later.\n```\n\n**If PNG was skipped (no tools, user chose to skip):**\n```\n‚úì Sketch created: ~/workbench/sketches/conversation-20240115-143022.excalidraw\n\nElements: 12 boxes, 8 arrows, 15 text labels\nStyle: hand-drawn, medium stroke, white background\n\nPNG export skipped. To export manually:\n- Open at excalidraw.com and use Export menu\n- Or install: npm install -g excalidraw-brute-export-cli\n```\n\n**Offer follow-up options:**\n```\nWhat would you like to do next?\n‚óã Open location - Show the file in finder/explorer\n‚óã Create another - Make another sketch\n‚óã Done - Finish\n```\n\n---\n\n## Background Pattern Implementation\n\nSince Excalidraw doesn't have native background patterns, implement them as subtle elements:\n\n**Dots pattern:**\n- Create small ellipse elements in a grid pattern\n- Color: Very light gray (#e0e0e0)\n- Size: 2px diameter\n- Spacing: 20px grid\n\n**Grid pattern:**\n- Create line elements forming a grid\n- Color: Very light gray (#e8e8e8)\n- Stroke width: 0.5px\n- Spacing: 20px\n\n**Lines pattern:**\n- Create horizontal line elements\n- Color: Very light gray (#e8e8e8)\n- Stroke width: 0.5px\n- Spacing: 30px\n\n**Note:** Pattern elements should be at the back (lowest z-index) and non-interactive.\n\n---\n\n## Settings File Template\n\nWhen creating `.claude/sketch-note.local.md`:\n\n```markdown\n---\nbackground_color: white\nroughness: hand-drawn\nstroke_width: medium\nbackground_pattern: none\nvisual_effects: []\nresolution: standard\noutput_format: excalidraw\npng_scale: 2\n---\n\n# Sketch Note Plugin Settings\n\nYour preferences for generating sketch notes.\n\n## Available Options\n\n| Setting | Options | Description |\n|---------|---------|-------------|\n| background_color | white, cream, light-gray, light-blue, light-yellow | Canvas background |\n| roughness | hand-drawn, sketchy, clean | Line roughness style |\n| stroke_width | thin, medium, bold | Line thickness |\n| background_pattern | none, dots, grid, lines | Background pattern |\n| visual_effects | shadow, glow, cursive | Effects (array, multi-select) |\n| resolution | standard, high, 4k | Output resolution |\n| output_format | excalidraw, png, both, direct-png | Default output format |\n| png_scale | 1, 2, 4 | PNG export scale (1x, 2x, 4x) |\n\n## Examples\n\nChange to clean professional style:\n```yaml\nroughness: clean\nstroke_width: thin\nbackground_color: white\n```\n\nWarm creative style:\n```yaml\nroughness: hand-drawn\nbackground_color: cream\nvisual_effects: [cursive, shadow]\n```\n\nAlways export PNG alongside Excalidraw:\n```yaml\noutput_format: both\npng_scale: 2\n```\n\nHigh-resolution PNG only:\n```yaml\noutput_format: png\npng_scale: 4\n```\n```\n\n---\n\n## Error Handling\n\n### No Content to Sketch\n\n**Conversation mode with no conversation:**\n```\nNo conversation history to sketch.\nTry using:\n- /sketch --mode custom \"your description\"\n- /sketch --mode code\n```\n\n### Code Mode in Empty Directory\n\n```\nNo source files found in this directory.\nMake sure you're in a project directory with source code.\n```\n\n### Invalid Mode\n\n```\nInvalid mode: \"{mode}\"\nAvailable modes: conversation, code, custom\n```\n\n### Write Permission Error\n\n```\nCannot create sketches directory.\nPlease check write permissions or specify a different location with --output.\n```\n\n---\n\n## Important Notes\n\n- **Excalidraw compatibility:** Generated files work with excalidraw.com and VS Code extension\n- **Unique IDs:** Generate unique IDs for each element using timestamp + random suffix\n- **Bindings:** Arrow bindings require valid element IDs for connected boxes\n- **Z-index:** Background patterns first, then boxes, then arrows, then text on top\n- **Font family:** Use 1 (normal), 2 (code), or 3 (handwriting/Virgil)\n- **File extension:** Always use `.excalidraw` extension\n",
        "plugins/sketch-note/skills/capture-for-sketch.md": "---\nname: capture-for-sketch\ndescription: This skill should be used when the user wants to sketch content from a URL, YouTube video, or external source. Enables fetching and extracting content before creating a visual sketch.\nversion: 1.0.0\n---\n\n# Capture Content for Sketching\n\nWhen the user wants to sketch external content (URLs, videos, articles), first fetch and extract the content, then generate the visualization.\n\n## Activation Triggers\n\nUse this skill when the user mentions:\n- \"sketch this YouTube video\"\n- \"create a diagram from this article\"\n- \"visualize https://...\"\n- \"sketch the architecture from this GitHub repo\"\n- \"draw a diagram of this URL\"\n- \"make a visual summary of this video\"\n\n## Workflow\n\n### 1. For YouTube Videos\n\n**Step 1: Fetch video content**\n\nUse yt-dlp to get the transcript (if available):\n```bash\nyt-dlp --write-auto-sub --sub-lang en --skip-download -o \"%(title)s\" \"<URL>\"\n```\n\nOr fetch video metadata:\n```bash\nyt-dlp --print title --print description --skip-download \"<URL>\"\n```\n\n**Step 2: Extract key information**\n- Video title and description\n- Main topics from transcript\n- Sequence of ideas/steps\n- Key takeaways\n\n**Step 3: Generate diagram**\n- Flowchart for tutorials/processes\n- Mind map for conceptual content\n- Timeline for historical content\n\n### 2. For Articles/Web Pages\n\n**Step 1: Fetch content**\n\nUse the WebFetch tool to retrieve and process the page:\n```\nWebFetch(url, prompt=\"Extract the main topics, key arguments, and structure of this article\")\n```\n\n**Step 2: Extract key information**\n- Main thesis/argument\n- Supporting points\n- Relationships between concepts\n- Conclusions\n\n**Step 3: Generate diagram**\n- Hierarchical diagram for structured arguments\n- Concept map for interconnected ideas\n- Comparison chart for reviews/analyses\n\n### 3. For GitHub Repositories\n\n**Step 1: Fetch README**\n\n```\nWebFetch(\"https://github.com/{owner}/{repo}\", prompt=\"Extract the architecture, main features, and components\")\n```\n\nOr if repo is local, read the README.md directly.\n\n**Step 2: Extract key information**\n- Project purpose and scope\n- Architecture components\n- Dependencies and integrations\n- Key features\n\n**Step 3: Generate diagram**\n- Architecture diagram showing components\n- Dependency graph\n- Feature mind map\n\n## Content Extraction Patterns\n\n### Video Content Structure\n\n```\nTitle: {video title}\nMain Topic: {core subject}\nKey Points:\n  1. {point 1}\n  2. {point 2}\n  3. {point 3}\nFlow: {step1} ‚Üí {step2} ‚Üí {step3}\nTakeaways:\n  - {takeaway 1}\n  - {takeaway 2}\n```\n\n### Article Content Structure\n\n```\nTitle: {article title}\nSource: {URL}\nMain Argument: {thesis}\nSupporting Points:\n  - {point 1}\n  - {point 2}\nKey Concepts:\n  - {concept 1} relates to {concept 2}\nConclusions: {summary}\n```\n\n### Repository Content Structure\n\n```\nProject: {repo name}\nPurpose: {description}\nComponents:\n  - {component 1}: {description}\n  - {component 2}: {description}\nDependencies:\n  - {component 1} ‚Üí {component 2}\nTech Stack: {technologies}\n```\n\n## Example Workflows\n\n### Example 1: YouTube Video\n\nUser: \"/sketch https://youtube.com/watch?v=abc123\"\n\n1. Detect URL is YouTube\n2. Fetch video info:\n   ```bash\n   yt-dlp --print title --print description --skip-download \"https://youtube.com/watch?v=abc123\"\n   ```\n3. If transcript available, extract key topics\n4. Generate Excalidraw diagram:\n   - Title box with video name\n   - Main topic boxes\n   - Arrows showing flow/relationships\n5. Save to `${workbench_path}/sketches/`\n\n### Example 2: Article\n\nUser: \"/sketch https://example.com/article-about-microservices\"\n\n1. Detect URL is web article\n2. Fetch with WebFetch:\n   ```\n   WebFetch(url, \"Extract main topics and structure\")\n   ```\n3. Parse response for key concepts\n4. Generate concept map diagram\n5. Save to `${workbench_path}/sketches/`\n\n### Example 3: GitHub Repo\n\nUser: \"/sketch https://github.com/facebook/react\"\n\n1. Detect URL is GitHub\n2. Fetch README content\n3. Extract architecture and components\n4. Generate architecture diagram showing:\n   - Core packages\n   - Dependencies\n   - Data flow\n5. Save to `${workbench_path}/sketches/`\n\n## Integration Notes\n\n### Tool Detection\n\nBefore using yt-dlp, check if it's available:\n```bash\ncommand -v yt-dlp >/dev/null 2>&1\n```\n\nIf not available, offer alternatives:\n- WebFetch to get video page metadata\n- Ask user to provide content manually\n\n### Fallback Behavior\n\nIf content extraction fails:\n1. Inform user of the issue\n2. Offer to create sketch from manual description\n3. Suggest installing missing tools (yt-dlp)\n\n### Output Location\n\nSketches are saved to `${workbench_path}/sketches/` (shared with jot plugin).\n\nRead workbench_path from `.claude/jot.local.md`:\n```yaml\n---\nworkbench_path: ~/workbench\n---\n```\n\nDefault: `~/workbench` if not configured.\n",
        "plugins/sketch-note/skills/excalidraw-format/SKILL.md": "---\nname: excalidraw-format\ndescription: This skill should be used when generating Excalidraw JSON files, creating visual diagrams in Excalidraw format, or needing to understand Excalidraw element structure. Provides comprehensive knowledge of Excalidraw JSON schema, element types, styling properties, and valid configurations.\nversion: 1.0.0\n---\n\n# Excalidraw Format Reference\n\nGenerate valid Excalidraw JSON files that can be opened in excalidraw.com or VS Code Excalidraw extension.\n\n## File Structure\n\nEvery Excalidraw file follows this structure:\n\n```json\n{\n  \"type\": \"excalidraw\",\n  \"version\": 2,\n  \"source\": \"sketch-note-plugin\",\n  \"elements\": [],\n  \"appState\": {\n    \"viewBackgroundColor\": \"#ffffff\",\n    \"gridSize\": null,\n    \"theme\": \"light\"\n  },\n  \"files\": {}\n}\n```\n\n## Element Types\n\n### Rectangle\n\n```json\n{\n  \"type\": \"rectangle\",\n  \"id\": \"rect-1705312222-a7f3\",\n  \"x\": 100,\n  \"y\": 100,\n  \"width\": 200,\n  \"height\": 100,\n  \"angle\": 0,\n  \"strokeColor\": \"#1e1e1e\",\n  \"backgroundColor\": \"#a5d8ff\",\n  \"fillStyle\": \"hachure\",\n  \"strokeWidth\": 2,\n  \"strokeStyle\": \"solid\",\n  \"roughness\": 2,\n  \"opacity\": 100,\n  \"groupIds\": [],\n  \"frameId\": null,\n  \"roundness\": { \"type\": 3 },\n  \"seed\": 12345,\n  \"version\": 1,\n  \"versionNonce\": 67890,\n  \"isDeleted\": false,\n  \"boundElements\": null,\n  \"updated\": 1705312222000,\n  \"link\": null,\n  \"locked\": false\n}\n```\n\n### Ellipse\n\n```json\n{\n  \"type\": \"ellipse\",\n  \"id\": \"ellipse-1705312222-b8c4\",\n  \"x\": 100,\n  \"y\": 100,\n  \"width\": 150,\n  \"height\": 100,\n  \"strokeColor\": \"#1e1e1e\",\n  \"backgroundColor\": \"#b2f2bb\",\n  \"fillStyle\": \"hachure\",\n  \"strokeWidth\": 2,\n  \"roughness\": 2\n}\n```\n\n### Diamond\n\n```json\n{\n  \"type\": \"diamond\",\n  \"id\": \"diamond-1705312222-c9d5\",\n  \"x\": 100,\n  \"y\": 100,\n  \"width\": 120,\n  \"height\": 120,\n  \"strokeColor\": \"#1e1e1e\",\n  \"backgroundColor\": \"#ffec99\",\n  \"fillStyle\": \"hachure\",\n  \"strokeWidth\": 2,\n  \"roughness\": 2\n}\n```\n\n### Text\n\n```json\n{\n  \"type\": \"text\",\n  \"id\": \"text-1705312222-d0e6\",\n  \"x\": 100,\n  \"y\": 100,\n  \"width\": 150,\n  \"height\": 25,\n  \"angle\": 0,\n  \"strokeColor\": \"#1e1e1e\",\n  \"backgroundColor\": \"transparent\",\n  \"fillStyle\": \"hachure\",\n  \"strokeWidth\": 1,\n  \"strokeStyle\": \"solid\",\n  \"roughness\": 1,\n  \"opacity\": 100,\n  \"text\": \"Label text here\",\n  \"fontSize\": 20,\n  \"fontFamily\": 1,\n  \"textAlign\": \"center\",\n  \"verticalAlign\": \"middle\",\n  \"containerId\": null,\n  \"originalText\": \"Label text here\",\n  \"lineHeight\": 1.25\n}\n```\n\n**Font families:**\n- `1` = Normal (sans-serif)\n- `2` = Code (monospace)\n- `3` = Virgil (handwriting)\n\n### Arrow\n\n```json\n{\n  \"type\": \"arrow\",\n  \"id\": \"arrow-1705312222-e1f7\",\n  \"x\": 300,\n  \"y\": 150,\n  \"width\": 100,\n  \"height\": 50,\n  \"angle\": 0,\n  \"strokeColor\": \"#1e1e1e\",\n  \"backgroundColor\": \"transparent\",\n  \"fillStyle\": \"hachure\",\n  \"strokeWidth\": 2,\n  \"strokeStyle\": \"solid\",\n  \"roughness\": 2,\n  \"opacity\": 100,\n  \"points\": [\n    [0, 0],\n    [100, 50]\n  ],\n  \"lastCommittedPoint\": null,\n  \"startBinding\": {\n    \"elementId\": \"rect-source\",\n    \"focus\": 0,\n    \"gap\": 5\n  },\n  \"endBinding\": {\n    \"elementId\": \"rect-target\",\n    \"focus\": 0,\n    \"gap\": 5\n  },\n  \"startArrowhead\": null,\n  \"endArrowhead\": \"arrow\"\n}\n```\n\n**Arrowhead types:**\n- `null` = No arrowhead\n- `\"arrow\"` = Standard arrow\n- `\"bar\"` = Bar/line\n- `\"dot\"` = Circle\n- `\"triangle\"` = Filled triangle\n\n### Line\n\n```json\n{\n  \"type\": \"line\",\n  \"id\": \"line-1705312222-f2g8\",\n  \"x\": 100,\n  \"y\": 100,\n  \"width\": 200,\n  \"height\": 0,\n  \"points\": [\n    [0, 0],\n    [200, 0]\n  ],\n  \"strokeColor\": \"#1e1e1e\",\n  \"strokeWidth\": 2,\n  \"roughness\": 2\n}\n```\n\n## Styling Properties\n\n### Fill Styles\n\n| Value | Description |\n|-------|-------------|\n| `\"hachure\"` | Hand-drawn diagonal lines (default, sketch-like) |\n| `\"cross-hatch\"` | Crossed diagonal lines |\n| `\"solid\"` | Solid fill |\n| `\"zigzag\"` | Zigzag pattern |\n| `\"zigzag-line\"` | Zigzag line pattern |\n\n### Stroke Styles\n\n| Value | Description |\n|-------|-------------|\n| `\"solid\"` | Continuous line |\n| `\"dashed\"` | Dashed line |\n| `\"dotted\"` | Dotted line |\n\n### Roughness\n\n| Value | Appearance |\n|-------|------------|\n| `0` | Clean, precise lines |\n| `1` | Slightly rough, sketchy |\n| `2` | Very rough, hand-drawn look |\n\n### Roundness\n\n```json\n\"roundness\": { \"type\": 3 }\n```\n\n| Type | Description |\n|------|-------------|\n| `1` | Sharp corners |\n| `2` | Round corners (legacy) |\n| `3` | Adaptive round corners |\n\n## Color Palette\n\n### Background Colors\n\n| Name | Hex | Use Case |\n|------|-----|----------|\n| Light Blue | `#a5d8ff` | Primary elements |\n| Light Green | `#b2f2bb` | Success, secondary |\n| Light Yellow | `#ffec99` | Warnings, highlights |\n| Light Red | `#ffc9c9` | Errors, alerts |\n| Light Gray | `#e9ecef` | Neutral, disabled |\n| Light Purple | `#d0bfff` | Special, accent |\n| Light Orange | `#ffd8a8` | Attention |\n\n### Canvas Backgrounds\n\n| Name | Hex |\n|------|-----|\n| White | `#ffffff` |\n| Cream | `#faf8f5` |\n| Light Gray | `#f5f5f5` |\n| Light Blue | `#f0f8ff` |\n| Light Yellow | `#fffef0` |\n\n### Stroke Colors\n\n| Name | Hex |\n|------|-----|\n| Default | `#1e1e1e` |\n| Blue | `#1971c2` |\n| Green | `#2f9e44` |\n| Red | `#e03131` |\n| Orange | `#f08c00` |\n\n## Bindings\n\nConnect arrows to shapes:\n\n```json\n{\n  \"startBinding\": {\n    \"elementId\": \"rect-1\",\n    \"focus\": 0,\n    \"gap\": 5\n  },\n  \"endBinding\": {\n    \"elementId\": \"rect-2\",\n    \"focus\": 0,\n    \"gap\": 5\n  }\n}\n```\n\n**Focus:** -1 to 1, controls where arrow connects on element edge\n**Gap:** Pixels between arrow endpoint and element edge\n\nWhen using bindings, add `boundElements` to the connected shapes:\n\n```json\n{\n  \"type\": \"rectangle\",\n  \"id\": \"rect-1\",\n  \"boundElements\": [\n    { \"id\": \"arrow-1\", \"type\": \"arrow\" }\n  ]\n}\n```\n\n## Groups\n\nGroup elements together:\n\n```json\n{\n  \"type\": \"rectangle\",\n  \"id\": \"rect-1\",\n  \"groupIds\": [\"group-1\"]\n}\n```\n\nAll elements with the same `groupId` move together.\n\n## Frames\n\nContainer for organizing elements:\n\n```json\n{\n  \"type\": \"frame\",\n  \"id\": \"frame-1\",\n  \"x\": 50,\n  \"y\": 50,\n  \"width\": 400,\n  \"height\": 300,\n  \"name\": \"Module A\"\n}\n```\n\nElements inside set `frameId`:\n```json\n{\n  \"type\": \"rectangle\",\n  \"frameId\": \"frame-1\"\n}\n```\n\n## ID Generation\n\nGenerate unique IDs with this pattern:\n```\n{type}-{timestamp}-{random4hex}\n```\n\nExamples:\n- `rect-1705312222-a7f3`\n- `arrow-1705312222-b8c4`\n- `text-1705312222-c9d5`\n\n## Seed Values\n\nFor consistent roughness rendering, use deterministic seeds:\n\n```json\n{\n  \"seed\": 12345,\n  \"versionNonce\": 67890\n}\n```\n\nGenerate seeds using timestamp or hash of element ID.\n\n## Complete Example\n\n```json\n{\n  \"type\": \"excalidraw\",\n  \"version\": 2,\n  \"source\": \"sketch-note-plugin\",\n  \"elements\": [\n    {\n      \"type\": \"rectangle\",\n      \"id\": \"rect-1\",\n      \"x\": 100,\n      \"y\": 100,\n      \"width\": 150,\n      \"height\": 80,\n      \"strokeColor\": \"#1e1e1e\",\n      \"backgroundColor\": \"#a5d8ff\",\n      \"fillStyle\": \"hachure\",\n      \"strokeWidth\": 2,\n      \"roughness\": 2,\n      \"boundElements\": [\n        { \"id\": \"arrow-1\", \"type\": \"arrow\" }\n      ]\n    },\n    {\n      \"type\": \"text\",\n      \"id\": \"text-1\",\n      \"x\": 125,\n      \"y\": 130,\n      \"width\": 100,\n      \"height\": 25,\n      \"text\": \"Start\",\n      \"fontSize\": 20,\n      \"fontFamily\": 1,\n      \"strokeColor\": \"#1e1e1e\",\n      \"containerId\": \"rect-1\"\n    },\n    {\n      \"type\": \"rectangle\",\n      \"id\": \"rect-2\",\n      \"x\": 400,\n      \"y\": 100,\n      \"width\": 150,\n      \"height\": 80,\n      \"strokeColor\": \"#1e1e1e\",\n      \"backgroundColor\": \"#b2f2bb\",\n      \"fillStyle\": \"hachure\",\n      \"strokeWidth\": 2,\n      \"roughness\": 2,\n      \"boundElements\": [\n        { \"id\": \"arrow-1\", \"type\": \"arrow\" }\n      ]\n    },\n    {\n      \"type\": \"arrow\",\n      \"id\": \"arrow-1\",\n      \"x\": 250,\n      \"y\": 140,\n      \"width\": 150,\n      \"height\": 0,\n      \"points\": [[0, 0], [150, 0]],\n      \"strokeColor\": \"#1e1e1e\",\n      \"strokeWidth\": 2,\n      \"roughness\": 2,\n      \"startBinding\": {\n        \"elementId\": \"rect-1\",\n        \"focus\": 0,\n        \"gap\": 5\n      },\n      \"endBinding\": {\n        \"elementId\": \"rect-2\",\n        \"focus\": 0,\n        \"gap\": 5\n      },\n      \"endArrowhead\": \"arrow\"\n    }\n  ],\n  \"appState\": {\n    \"viewBackgroundColor\": \"#ffffff\",\n    \"gridSize\": null\n  },\n  \"files\": {}\n}\n```\n\n## Validation Checklist\n\nBefore saving Excalidraw JSON:\n\n- [ ] All elements have unique `id` values\n- [ ] Arrow bindings reference existing element IDs\n- [ ] `boundElements` arrays are synchronized with arrow bindings\n- [ ] Text `containerId` references valid container element\n- [ ] Points arrays have at least 2 points for arrows/lines\n- [ ] Width and height are positive numbers\n- [ ] Colors are valid hex codes\n- [ ] `type` field is set to `\"excalidraw\"`\n- [ ] `version` is set to `2`\n",
        "plugins/task-decomposer/.claude-plugin/plugin.json": "{\n  \"name\": \"task-decomposer\",\n  \"version\": \"1.2.0\",\n  \"description\": \"Transform complex tasks into structured beads issues through understanding, design, and creation phases\",\n  \"author\": {\n    \"name\": \"Krishnaswamy Subramanian\",\n    \"email\": \"jskswamy@gmail.com\"\n  },\n  \"keywords\": [\"beads\", \"planning\", \"decomposition\", \"issues\", \"epic\", \"workflow\", \"tasks\", \"dependencies\", \"backlog\"]\n}\n",
        "plugins/task-decomposer/README.md": "# Task Decomposer Plugin\n\nTransform complex tasks into well-structured beads issues through a thoughtful workflow, capture side ideas without breaking flow, and create rich commit messages with full context.\n\n## Features\n\n### Commands\n\nCommands provide explicit entry points with argument control. Use these when you want direct control over the workflow.\n\n| Command | Description | Example |\n|---------|-------------|---------|\n| `/plan` | Decompose tasks into beads issues | `/plan \"Add auth\" --dry-run` |\n| `/task` | Single task operations | `/task start abc123` |\n| `/park` | Quick idea parking with metadata | `/park \"Add caching\" -p 3` |\n| `/parked` | Manage parked ideas | `/parked promote xyz` |\n| `/backlog` | Dashboard views of work | `/backlog ready` |\n| `/epic` | Epic management | `/epic progress abc123` |\n| `/deps` | Dependency management | `/deps graph` |\n\n### Skills\n\nSkills are auto-invoked based on conversation context. They complement the commands.\n\n| Skill | Trigger Phrases |\n|-------|-----------------|\n| `understand` | \"help me understand\", \"clarify this task\", \"what am I missing\" |\n| `decompose` | \"plan this work\", \"break this down\", \"create issues for\" |\n| `park-idea` | \"park this\", \"btw:\", \"tangent:\", \"note for later\" |\n| `review-parked` | \"review parked\", \"show parked\", \"what did I park\" |\n| `task-commit` | \"task commit\", \"commit this task\", \"beads commit\" |\n\n---\n\n## Command Reference\n\n### /plan - Task Decomposition\n\nDecompose complex tasks into structured beads issues with explicit control.\n\n```bash\n/plan \"Add user authentication\"                    # Full workflow\n/plan \"Add caching\" --epic \"Performance\"           # Create as epic\n/plan -p 1 \"Critical security fix\"                 # Set priority\n/plan --dry-run \"Refactor database\"                # Preview only\n/plan --quick --skip-questions \"Simple task\"       # Fast mode\n```\n\n**Arguments:**\n| Flag | Short | Description |\n|------|-------|-------------|\n| `--epic` | `-e` | Create as epic with title |\n| `--priority` | `-p` | Default priority 0-4 |\n| `--skip-questions` | `-q` | Skip clarifying questions |\n| `--dry-run` | `-d` | Preview without creating |\n| `--quick` | | No confirmations |\n\n### /task - Single Task Operations\n\nCreate, start, complete, and view individual tasks.\n\n```bash\n/task create \"Fix login bug\"                       # Create task\n/task create \"Add tests\" -p 1 --parent abc123      # With options\n/task start abc123                                 # Start working\n/task done abc123                                  # Mark complete\n/task done abc123 --commit                         # Complete and commit\n/task show abc123                                  # View details\n/task next                                         # Get recommendation\n```\n\n**Subcommands:**\n- `create <title>` - Create with `--description`, `--design`, `--acceptance`, `--priority`, `--parent`\n- `start <id>` - Mark in-progress, show context\n- `done <id>` - Close task, `--commit` triggers task-commit skill\n- `show <id>` - Display details, `--format brief|full|json`\n- `next` - Recommend next task based on priorities\n\n### /park - Quick Idea Parking\n\nPark ideas quickly with optional metadata.\n\n```bash\n/park \"Add caching to the API\"                     # Basic parking\n/park \"Consider rate limiting\" -t abc123           # Link to task\n/park -p 3 \"Refactor auth module\"                  # Set priority\n/park --tags \"perf,db\" \"Index user table\"          # Add tags\n/park -q \"Remember to update docs\"                 # Quick mode\n```\n\n**Arguments:**\n| Flag | Short | Description |\n|------|-------|-------------|\n| `--task` | `-t` | Link to specific task |\n| `--priority` | `-p` | Priority override (default: 4) |\n| `--tags` | | Additional comma-separated tags |\n| `--quick` | `-q` | Minimal output |\n\n### /parked - Manage Parked Ideas\n\nList, filter, and manage parked ideas.\n\n```bash\n/parked                                            # List all\n/parked list --format full                         # Detailed view\n/parked from abc123                                # From specific task\n/parked promote xyz                                # Promote to real task\n/parked promote xyz --decompose                    # Promote and decompose\n/parked discard xyz                                # Delete idea\n/parked review                                     # Interactive review\n```\n\n**Subcommands:**\n- `list` - List all parked (default), `--format`, `--since`, `--limit`\n- `from <task-id>` - Ideas from specific task\n- `promote <id>...` - Promote to real issues, `--priority`, `--decompose`\n- `discard <id>...` - Delete parked ideas, `--force`\n- `review` - Interactive review session\n\n### /backlog - Work Dashboard\n\nDashboard views of all work with filtering.\n\n```bash\n/backlog                                           # Overview stats\n/backlog ready                                     # Ready to work\n/backlog ready -p 1                                # High priority only\n/backlog blocked                                   # Show blocked tasks\n/backlog priorities                                # Group by priority\n/backlog epics                                     # Epic progress view\n```\n\n**Views:**\n- `overview` - Summary statistics (default)\n- `ready` - Tasks ready to work (no blockers)\n- `blocked` - Blocked tasks with reasons\n- `priorities` - Grouped by P0-P4\n- `epics` - Epic-centric progress view\n\n**Filters:** `--status`, `--priority`, `--epic`, `--format`, `--limit`\n\n### /epic - Epic Management\n\nCreate and manage epics, track progress.\n\n```bash\n/epic create \"Auth System\"                         # Create epic\n/epic create \"API v2\" -p 1 -d \"Full redesign\"      # With options\n/epic add abc123 task1 task2                       # Add tasks\n/epic remove abc123 task1                          # Remove task\n/epic progress abc123                              # Show progress\n/epic close abc123                                 # Close epic\n/epic close abc123 --force                         # Force close\n```\n\n**Subcommands:**\n- `create <title>` - Create with `--description`, `--priority`, `--design`\n- `add <epic> <tasks...>` - Add tasks to epic\n- `remove <epic> <tasks...>` - Remove tasks\n- `progress <epic>` - Show completion progress\n- `close <epic>` - Close epic, `--force` if tasks open\n\n### /deps - Dependency Management\n\nManage and visualize task dependencies.\n\n```bash\n/deps add task1 task2                              # task1 depends on task2\n/deps remove task1 task2                           # Remove dependency\n/deps show task1                                   # Show dependencies\n/deps graph                                        # Full graph\n/deps graph task1                                  # Centered on task\n/deps graph --format mermaid                       # Mermaid diagram\n```\n\n**Subcommands:**\n- `add <task> <depends-on>` - Add dependency\n- `remove <task> <depends-on>` - Remove dependency\n- `show <task>` - Show what blocks this task\n- `graph [task]` - Visualize graph, `--format tree|mermaid|json`, `--depth`\n\n---\n\n## Skill Reference\n\n### Task Understanding (`/understand`)\n\nDeeply explore a task through structured questioning before any planning begins.\n\n**When to use:**\n- Task is fuzzy or complex\n- Suspect hidden complexity\n- Want systematic exploration before committing to a plan\n\n**Seven questioning dimensions:**\n1. Goal Clarity - What does \"done\" look like?\n2. Context & Background - What triggered this?\n3. Scope Boundaries - What's in/out?\n4. Constraints & Requirements - Performance, security, tech limits?\n5. Dependencies & Integration - What systems does this touch?\n6. Risks & Unknowns - What could go wrong?\n7. Success Criteria - How will we verify it works?\n\n### Task Decomposition (`/decompose`)\n\nBreak down complex work into structured beads issues through three phases.\n\n**Phases:**\n1. **Understanding** - Parse goals, ask clarifying questions, explore codebase\n2. **Designing** - Create hierarchy, map dependencies, define acceptance criteria\n3. **Creating** - Execute beads commands in correct order\n\n### Idea Parking (`/park-idea`)\n\nQuickly capture side thoughts while working without breaking flow.\n\n**Principles:**\n- Maximum 1 question (if idea isn't clear)\n- Auto-captures current task context\n- Creates deferred issue with `parked-idea` label\n- Returns you to work immediately\n\n### Parked Idea Review (`/review-parked`)\n\nReview ideas you've parked and decide what to do with them.\n\n**Options for each idea:**\n- Promote to real issue\n- Run through decomposition\n- Keep parked for later\n- Discard\n\n### Task Commit (`/task-commit`)\n\nCreate rich commit messages combining beads context with code changes.\n\n**Generated message includes:**\n- What: Goal from task description\n- Why: Approach from task design\n- Changes: Summary of code modifications\n- Acceptance: Which criteria were met\n\n---\n\n## Installation\n\n```bash\nclaude --plugin-dir ./plugins/task-decomposer\n```\n\nOr add to your Claude Code settings.\n\n## Requirements\n\n- [beads plugin](https://github.com/jskswamy/claude-plugins/tree/main/plugins/beads) must be installed and initialized\n- Git repository for commit features\n\n## Workflows\n\n### Planning New Work\n\n```\n1. /plan \"Add feature X\"           # Decompose into issues\n2. bd ready                        # See what's available\n3. /task start <id>                # Start working\n4. /park \"Related idea\"            # Capture side thoughts\n5. /task done <id> --commit        # Complete and commit\n6. /parked review                  # Review captured ideas\n```\n\n### Managing Epics\n\n```\n1. /epic create \"Auth System\"      # Create epic\n2. /plan \"...\" --epic \"Auth...\"    # Add decomposed work\n3. /epic progress <id>             # Track progress\n4. /epic close <id>                # Close when done\n```\n\n### Understanding Dependencies\n\n```\n1. /deps graph                     # See full picture\n2. /deps show <task>               # What blocks this?\n3. /backlog blocked                # All blocked work\n4. /task next                      # What's ready?\n```\n\n## Plugin Structure\n\n```\ntask-decomposer/\n‚îú‚îÄ‚îÄ .claude-plugin/\n‚îÇ   ‚îî‚îÄ‚îÄ plugin.json\n‚îú‚îÄ‚îÄ commands/\n‚îÇ   ‚îú‚îÄ‚îÄ plan.md           # Task decomposition command\n‚îÇ   ‚îú‚îÄ‚îÄ task.md           # Single task operations\n‚îÇ   ‚îú‚îÄ‚îÄ park.md           # Quick idea parking\n‚îÇ   ‚îú‚îÄ‚îÄ parked.md         # Manage parked ideas\n‚îÇ   ‚îú‚îÄ‚îÄ backlog.md        # Dashboard views\n‚îÇ   ‚îú‚îÄ‚îÄ epic.md           # Epic management\n‚îÇ   ‚îî‚îÄ‚îÄ deps.md           # Dependency management\n‚îú‚îÄ‚îÄ skills/\n‚îÇ   ‚îú‚îÄ‚îÄ understand.md     # Deep task exploration\n‚îÇ   ‚îú‚îÄ‚îÄ decompose.md      # Main decomposition workflow\n‚îÇ   ‚îú‚îÄ‚îÄ park-idea.md      # Quick idea capture\n‚îÇ   ‚îú‚îÄ‚îÄ review-parked.md  # Review parked ideas\n‚îÇ   ‚îî‚îÄ‚îÄ task-commit.md    # Commit with beads context\n‚îú‚îÄ‚îÄ hooks/\n‚îÇ   ‚îî‚îÄ‚îÄ review-after-commit.md  # Auto-prompt after commits\n‚îú‚îÄ‚îÄ agents/\n‚îÇ   ‚îî‚îÄ‚îÄ issue-writer.md   # Executes beads CLI commands\n‚îî‚îÄ‚îÄ README.md\n```\n\n## Tips\n\n- **Commands vs Skills**: Use commands for explicit control, skills trigger automatically\n- **Understand before decomposing**: For fuzzy tasks, use `/understand` first\n- **Don't over-decompose**: 3-7 tasks is usually the sweet spot\n- **Park liberally**: Capturing ideas is cheap, losing them is expensive\n- **Review regularly**: Parked ideas can become stale\n- **Use /task next**: Let it recommend based on priorities and dependencies\n- **Visualize with /deps graph**: Understand the big picture\n\n## Changelog\n\n### v1.2.0\n- Added 7 commands: `/plan`, `/task`, `/park`, `/parked`, `/backlog`, `/epic`, `/deps`\n- Commands provide explicit argument control complementing auto-invoked skills\n\n### v1.1.0\n- Added `/understand` skill for deep task exploration\n\n### v1.0.0\n- Initial release with decompose, park-idea, review-parked, task-commit skills\n- Issue-writer agent for beads CLI execution\n- Review-after-commit hook\n\n## License\n\nMIT\n",
        "plugins/task-decomposer/agents/issue-writer.md": "---\ndescription: |\n  Executes beads CLI commands to create issues from a decomposition plan.\n  Use this agent when you have an approved decomposition and need to create\n  the actual beads issues with proper ordering and dependencies.\ntools:\n  - Bash\n  - Read\n  - Write\n  - AskUserQuestion\n---\n\n# Issue Writer Agent\n\nYou are an agent that creates beads issues from an approved decomposition plan. You handle the execution of beads CLI commands in the correct order, ensuring dependencies are properly established.\n\n## Input\n\nYou receive an approved decomposition plan containing:\n- Optional epic with title, description, design, acceptance criteria, priority\n- Tasks with titles, descriptions, designs, acceptance criteria, priorities, and dependency relationships\n- The dependency graph showing what depends on what\n\n## Execution Strategy\n\n### 1. Parse the Plan\n\nExtract from the input:\n- Epic details (if any)\n- List of tasks with their details\n- Dependency map (task X depends on task Y)\n\n### 2. Determine Creation Order\n\n1. **Epic first** (if present) - becomes parent for tasks\n2. **Independent tasks** - tasks with no dependencies\n3. **Dependent tasks** - in topological order (dependencies created first)\n\n### 3. Create Issues\n\nFor each issue, use the appropriate command:\n\n**Epic:**\n```bash\nbd create \"{title}\" \\\n  -t epic \\\n  -p {priority} \\\n  --description \"{description}\" \\\n  --design \"{design approach}\" \\\n  --acceptance \"{criteria}\"\n```\n\n**Task (under epic):**\n```bash\nbd create \"{title}\" \\\n  -t task \\\n  -p {priority} \\\n  --parent {epic-id} \\\n  --description \"{description}\" \\\n  --design \"{design approach}\" \\\n  --acceptance \"{criteria}\"\n```\n\n**Task (standalone):**\n```bash\nbd create \"{title}\" \\\n  -t task \\\n  -p {priority} \\\n  --description \"{description}\" \\\n  --design \"{design approach}\" \\\n  --acceptance \"{criteria}\"\n```\n\n### 4. Handle Long Content\n\nFor multi-line content that might break shell quoting, use heredoc:\n\n```bash\nbd create \"{title}\" -t task -p {priority}\n# Then update with long content\ncat <<'EOF' | bd update {id} --description --body-file -\n## Overview\n{long description here}\n\n## Details\n{more content}\nEOF\n```\n\nOr use a temp file:\n```bash\ncat > /tmp/issue-content.md << 'EOF'\n{content}\nEOF\nbd update {id} --description --body-file /tmp/issue-content.md\n```\n\n### 5. Add Dependencies\n\nAfter all issues are created, add dependency edges:\n\n```bash\nbd dep add {dependent-task-id} {dependency-task-id}\n```\n\nExample: If Task 3 depends on Task 1:\n```bash\nbd dep add {task-3-id} {task-1-id}\n```\n\n### 6. Track Created IDs\n\nMaintain a mapping of plan items to created issue IDs:\n```\nEpic \"Implement Auth\" ‚Üí claude-plugins-abc\nTask \"Add login endpoint\" ‚Üí claude-plugins-def\nTask \"Add logout endpoint\" ‚Üí claude-plugins-ghi\nTask \"Write auth tests\" ‚Üí claude-plugins-jkl (depends on def, ghi)\n```\n\n### 7. Report Results\n\nAfter all issues are created:\n\n```\n## Created Issues\n\n**Epic:** claude-plugins-abc - Implement Auth\n\n**Tasks:**\n- claude-plugins-def - Add login endpoint (P2)\n- claude-plugins-ghi - Add logout endpoint (P2)\n- claude-plugins-jkl - Write auth tests (P2)\n  ‚îî‚îÄ‚îÄ depends on: claude-plugins-def, claude-plugins-ghi\n\n**Dependency Graph:**\nclaude-plugins-abc (Epic)\n‚îú‚îÄ‚îÄ claude-plugins-def (no deps)\n‚îú‚îÄ‚îÄ claude-plugins-ghi (no deps)\n‚îî‚îÄ‚îÄ claude-plugins-jkl ‚Üí depends on def, ghi\n\nRun `bd ready` to see what's available to work on.\nRun `bd show {id}` to see full details of any issue.\n```\n\n## Error Handling\n\nIf a command fails:\n1. Report the error\n2. Ask user how to proceed:\n   - Retry the command\n   - Skip this issue and continue\n   - Abort and clean up created issues\n\nIf an issue was created but dependency addition fails:\n1. Report which dependencies couldn't be added\n2. Provide manual commands to add them\n\n## Best Practices\n\n- Always capture the issue ID from create command output\n- Verify epic exists before creating child tasks\n- Create all issues before adding any dependencies (IDs must exist first)\n- Use `--json` flag if you need to parse output programmatically\n- Keep descriptions concise in the command; use update for long content\n- Escape special characters in shell strings properly\n",
        "plugins/task-decomposer/commands/backlog.md": "---\nname: backlog\ndescription: Dashboard views of all work with filtering and statistics\nargument-hint: \"[overview|ready|blocked|priorities|epics] [--status <status>] [--priority|-p <0-4>] [--epic|-e <id>] [--format|-f <format>] [--limit|-l <n>]\"\nallowed-tools:\n  - Bash\n  - Read\n  - AskUserQuestion\n---\n\n# /backlog Command\n\nDashboard views of all work with filtering. Get a quick overview of your project's state, find work to do, or understand what's blocked.\n\n## Views (Subcommands)\n\n| View | Description | Example |\n|------|-------------|---------|\n| `overview` | Summary statistics (default) | `/backlog` |\n| `ready` | Tasks ready to work on | `/backlog ready` |\n| `blocked` | Blocked tasks with reasons | `/backlog blocked` |\n| `priorities` | Grouped by P0-P4 | `/backlog priorities` |\n| `epics` | Epic-centric view | `/backlog epics` |\n\n## Global Options\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `--status` | `-s` | string | (none) | Filter by status: open, in_progress, closed |\n| `--priority` | `-p` | number | (none) | Filter by priority (0-4) or higher |\n| `--epic` | `-e` | string | (none) | Filter to specific epic |\n| `--format` | `-f` | string | `text` | Output format: text, json, markdown |\n| `--limit` | `-l` | number | 50 | Maximum results |\n\n---\n\n## /backlog overview (default)\n\nShow summary statistics and quick health check.\n\n### Examples\n\n```bash\n/backlog\n/backlog overview\n```\n\n### Execution\n\n```bash\nbd stats\nbd list --status=open --json | jq length\nbd list --status=in_progress --json | jq length\nbd blocked --json | jq length\n```\n\n### Output\n\n```\n## Project Backlog Overview\n\n### Statistics\n| Metric | Count |\n|--------|-------|\n| Open tasks | {n} |\n| In progress | {n} |\n| Blocked | {n} |\n| Closed (all time) | {n} |\n| Parked ideas | {n} |\n\n### By Priority\n- P0 (Critical): {n} open, {n} in progress\n- P1 (High): {n} open, {n} in progress\n- P2 (Medium): {n} open, {n} in progress\n- P3 (Low): {n} open, {n} in progress\n- P4 (Backlog): {n} open\n\n### Active Epics\n- {epic-id} - {epic-title}: {n}/{total} tasks complete\n- {epic-id} - {epic-title}: {n}/{total} tasks complete\n\n### Health Check\n{‚úì or ‚ö†} {n} tasks ready to work on\n{‚úì or ‚ö†} {n} tasks blocked\n{‚úì or ‚ö†} {n} in-progress tasks (recommend: 1-3)\n{‚úì or ‚ö†} {n} P0/P1 tasks need attention\n\n### Quick Actions\n- Start work: /task next\n- See ready tasks: /backlog ready\n- See blocked: /backlog blocked\n```\n\n---\n\n## /backlog ready\n\nShow tasks that are ready to work on (no blockers, not in progress).\n\n### Examples\n\n```bash\n/backlog ready\n/backlog ready -p 1        # P1 or higher only\n/backlog ready -e abc123   # From specific epic\n```\n\n### Execution\n\n```bash\nbd ready --json\n```\n\nApply filters from arguments.\n\n### Output\n\n```\n## Ready to Work ({count} tasks)\n\n### High Priority (P0-P1)\n1. {id} - {title} (P{priority})\n   {first line of description}\n\n2. {id} - {title} (P{priority})\n   {first line of description}\n\n### Medium Priority (P2)\n3. {id} - {title}\n   {first line of description}\n\n### Lower Priority (P3-P4)\n4. {id} - {title}\n5. {id} - {title}\n\n---\n\nStart the recommended task: /task start {top-task-id}\nOr pick one: /task start <id>\n```\n\nIf no ready tasks:\n```\n## No Tasks Ready\n\nAll tasks are either:\n- Blocked by dependencies\n- Already in progress\n- Closed\n\nCheck blocked tasks: /backlog blocked\n```\n\n---\n\n## /backlog blocked\n\nShow blocked tasks with their blocking reasons.\n\n### Examples\n\n```bash\n/backlog blocked\n/backlog blocked -e abc123\n```\n\n### Execution\n\n```bash\nbd blocked --json\n```\n\nFor each blocked task, also fetch what's blocking it.\n\n### Output\n\n```\n## Blocked Tasks ({count})\n\n### 1. {id} - {title} (P{priority})\n\n**Blocked by:**\n- {blocker-id} - {blocker-title} ({blocker-status})\n- {blocker-id} - {blocker-title} ({blocker-status})\n\n**Unblock by:** Complete {blocker-id} first\n\n---\n\n### 2. {id} - {title} (P{priority})\n\n**Blocked by:**\n- {blocker-id} - {blocker-title} (in_progress)\n\n**Unblock by:** Waiting on {blocker-id} to finish\n\n---\n\n### Summary\n- {n} tasks blocked by open tasks (can be unblocked)\n- {n} tasks blocked by in-progress tasks (waiting)\n\n### Suggested Actions\n1. Complete {id} to unblock {n} tasks\n2. Complete {id} to unblock {n} tasks\n```\n\nIf no blocked tasks:\n```\n## No Blocked Tasks\n\nAll tasks with dependencies have their blockers resolved.\n```\n\n---\n\n## /backlog priorities\n\nGroup all open tasks by priority level.\n\n### Examples\n\n```bash\n/backlog priorities\n/backlog priorities -e abc123\n```\n\n### Execution\n\n```bash\nbd list --status=open --json\nbd list --status=in_progress --json\n```\n\nGroup by priority field.\n\n### Output\n\n```\n## Tasks by Priority\n\n### P0 - Critical ({count})\n{‚ö† if any exist}\n\n| ID | Title | Status | Blocked |\n|----|-------|--------|---------|\n| {id} | {title} | {status} | {yes/no} |\n\n### P1 - High ({count})\n\n| ID | Title | Status | Blocked |\n|----|-------|--------|---------|\n| {id} | {title} | {status} | {yes/no} |\n| {id} | {title} | {status} | {yes/no} |\n\n### P2 - Medium ({count})\n...\n\n### P3 - Low ({count})\n...\n\n### P4 - Backlog ({count})\n{Collapsed or abbreviated if many}\n\n---\n\n### Recommendations\n{If P0/P1 tasks exist and not in progress:}\n- High-priority tasks need attention! Start: /task start {id}\n\n{If many P4 tasks:}\n- Consider reviewing backlog for stale items\n```\n\n---\n\n## /backlog epics\n\nShow epic-centric view with progress.\n\n### Examples\n\n```bash\n/backlog epics\n/backlog epics --format markdown\n```\n\n### Execution\n\n```bash\nbd list --type=epic --json\n# For each epic:\nbd list --parent={epic-id} --json\n```\n\n### Output\n\n```\n## Epics Overview\n\n### {epic-title} ({epic-id})\n**Priority:** P{priority}\n**Progress:** {completed}/{total} tasks ({percent}%)\n\n```\n[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] 40%\n```\n\n**Tasks:**\n- [x] {id} - {title} (closed)\n- [x] {id} - {title} (closed)\n- [ ] {id} - {title} (in_progress) ‚Üê active\n- [ ] {id} - {title} (open, blocked)\n- [ ] {id} - {title} (open)\n\n---\n\n### {epic-title} ({epic-id})\n**Priority:** P{priority}\n**Progress:** {completed}/{total} tasks ({percent}%)\n\n...\n\n---\n\n### Standalone Tasks (no epic)\n{count} tasks not assigned to any epic\n\nView them: bd list --no-parent\n```\n\n---\n\n## Filter Combinations\n\n| Command | What it shows |\n|---------|---------------|\n| `/backlog ready -p 1` | P0 and P1 tasks ready to work |\n| `/backlog blocked -e abc` | Blocked tasks under epic abc |\n| `/backlog priorities -e abc` | Priority breakdown for epic abc |\n| `/backlog overview --status open` | Statistics for open tasks only |\n\n---\n\n## Error Handling\n\n### No tasks found\n```\nNo tasks match your filters.\n\nTry:\n- Remove filters to see all: /backlog\n- Check different status: /backlog --status open\n```\n\n### Invalid filter value\n```\nError: Invalid {filter}: \"{value}\"\n\nValid values for --status: open, in_progress, closed\nValid values for --priority: 0, 1, 2, 3, 4\n```\n\n### Epic not found\n```\nError: Epic \"{id}\" not found.\n\nList epics: bd list --type=epic\n```\n",
        "plugins/task-decomposer/commands/deps.md": "---\nname: deps\ndescription: Manage and visualize task dependencies\nargument-hint: \"<subcommand> [args] [--flags]\"\nallowed-tools:\n  - Bash\n  - Read\n  - AskUserQuestion\n---\n\n# /deps Command\n\nManage and visualize task dependencies. Dependencies define what must complete before a task can start.\n\n## Subcommands\n\n| Subcommand | Description | Example |\n|------------|-------------|---------|\n| `add` | Add a dependency | `/deps add task1 task2` |\n| `remove` | Remove a dependency | `/deps remove task1 task2` |\n| `show` | Show what blocks a task | `/deps show task1` |\n| `graph` | Visualize dependency graph | `/deps graph` |\n\n---\n\n## /deps add <task> <depends-on>\n\nAdd a dependency: `task` depends on `depends-on` (depends-on blocks task).\n\n### Arguments\n\n| Argument | Type | Description |\n|----------|------|-------------|\n| `task` | string | The task that has the dependency |\n| `depends-on` | string | The task that must complete first |\n\n### Examples\n\n```bash\n/deps add write-tests implement-feature\n# \"write-tests\" depends on \"implement-feature\"\n# Cannot start write-tests until implement-feature is done\n\n/deps add abc123 def456\n```\n\n### Execution\n\n```bash\nbd dep add {task} {depends-on}\n```\n\n### Output\n\n```\nDependency added:\n  {task-id} - {task-title}\n    ‚îî‚îÄ‚îÄ depends on: {depends-on-id} - {depends-on-title}\n\n{task-id} is now blocked until {depends-on-id} is completed.\n```\n\n### Validation\n\nBefore adding:\n1. Verify both tasks exist\n2. Check for circular dependencies\n3. Warn if dependency already exists\n\n**Circular dependency detected:**\n```\nError: Cannot add dependency - would create a cycle.\n\nCurrent chain:\n  {a} ‚Üí {b} ‚Üí {c} ‚Üí {a} (cycle!)\n\nRemove an existing dependency first to break the cycle.\n```\n\n**Dependency exists:**\n```\nDependency already exists:\n  {task} depends on {depends-on}\n\nNo changes made.\n```\n\n---\n\n## /deps remove <task> <depends-on>\n\nRemove an existing dependency.\n\n### Arguments\n\n| Argument | Type | Description |\n|----------|------|-------------|\n| `task` | string | The task that has the dependency |\n| `depends-on` | string | The dependency to remove |\n\n### Examples\n\n```bash\n/deps remove write-tests implement-feature\n/deps remove abc123 def456\n```\n\n### Execution\n\n```bash\nbd dep remove {task} {depends-on}\n```\n\n### Output\n\n```\nDependency removed:\n  {task-id} no longer depends on {depends-on-id}\n\n{task-id} may now be ready to work on.\nCheck: bd show {task-id}\n```\n\n### Validation\n\n**Dependency doesn't exist:**\n```\nError: No dependency found.\n\n{task-id} does not depend on {depends-on-id}.\n\nCurrent dependencies for {task-id}:\n- {dep1-id} - {dep1-title}\n- {dep2-id} - {dep2-title}\n```\n\n---\n\n## /deps show <task-id>\n\nShow what a task depends on and what depends on it.\n\n### Arguments\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `task-id` | | string | (required) | Task to show dependencies for |\n| `--format` | `-f` | string | `text` | Output format: text, json, tree |\n\n### Examples\n\n```bash\n/deps show abc123\n/deps show abc123 --format tree\n```\n\n### Execution\n\n```bash\nbd show {task-id} --json\n# Extract blockedBy and blocks from the response\n```\n\n### Output\n\n**Text format:**\n```\n## Dependencies for: {title} ({task-id})\n\n**Status:** {status}\n\n### Blocked By (must complete first)\n- {dep-id} - {dep-title} ({status})\n- {dep-id} - {dep-title} ({status})\n\n{If all completed:} ‚úì All dependencies resolved - task is ready!\n{If some open:} ‚ö† {n} dependencies still open\n\n### Blocks (waiting on this task)\n- {id} - {title} ({status})\n- {id} - {title} ({status})\n\n{n} tasks will be unblocked when this completes.\n```\n\n**Tree format:**\n```\n## Dependencies for: {title}\n\nBlocked By:\n‚îî‚îÄ‚îÄ {dep-id} - {dep-title}\n    ‚îî‚îÄ‚îÄ {dep-dep-id} - {dep-dep-title} (transitive)\n\nBlocks:\n‚îú‚îÄ‚îÄ {blocked-id} - {blocked-title}\n‚îÇ   ‚îî‚îÄ‚îÄ {blocked-blocked-id} - ... (transitive)\n‚îî‚îÄ‚îÄ {blocked-id} - {blocked-title}\n```\n\n**No dependencies:**\n```\n## Dependencies for: {title} ({task-id})\n\nNo dependencies.\n\nThis task:\n- Is not blocked by anything\n- Does not block any other tasks\n```\n\n---\n\n## /deps graph [task-id]\n\nVisualize the dependency graph. If task-id provided, show graph centered on that task.\n\n### Arguments\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `task-id` | | string | (none) | Center graph on this task |\n| `--format` | `-f` | string | `tree` | Format: tree, mermaid, json |\n| `--depth` | `-d` | number | 3 | Max depth to traverse |\n| `--epic` | `-e` | string | (none) | Show graph for epic only |\n\n### Examples\n\n```bash\n/deps graph\n/deps graph abc123\n/deps graph --format mermaid\n/deps graph -e epic123\n```\n\n### Execution\n\n```bash\n# Get all tasks with dependencies\nbd list --json\n# Parse and build dependency graph\n```\n\n### Output\n\n**Tree format (default):**\n```\n## Dependency Graph\n\n### Legend\n‚óã = open, ‚óê = in_progress, ‚óè = closed\n\n### Graph\n\nepic-abc - Auth System\n‚îú‚îÄ‚îÄ ‚óã task-1 - Setup auth module\n‚îú‚îÄ‚îÄ ‚óã task-2 - Add login endpoint\n‚îÇ   ‚îî‚îÄ‚îÄ depends on: task-1\n‚îú‚îÄ‚îÄ ‚óã task-3 - Add logout endpoint\n‚îÇ   ‚îî‚îÄ‚îÄ depends on: task-1\n‚îî‚îÄ‚îÄ ‚óã task-4 - Write auth tests\n    ‚îî‚îÄ‚îÄ depends on: task-2, task-3\n\nstandalone-xyz - Fix bug\n(no dependencies)\n```\n\n**Mermaid format:**\n```\n## Dependency Graph (Mermaid)\n\n```mermaid\ngraph TD\n    subgraph \"Auth System (epic-abc)\"\n        task1[\"‚óã task-1: Setup auth module\"]\n        task2[\"‚óã task-2: Add login endpoint\"]\n        task3[\"‚óã task-3: Add logout endpoint\"]\n        task4[\"‚óã task-4: Write auth tests\"]\n\n        task1 --> task2\n        task1 --> task3\n        task2 --> task4\n        task3 --> task4\n    end\n\n    standalone[\"‚óã standalone-xyz: Fix bug\"]\n```\n\nCopy this to a Mermaid-compatible viewer to visualize.\n```\n\n**Centered on task:**\n```\n## Dependency Graph for: {title}\n\n### Upstream (what this depends on)\n{dep-1}\n‚îî‚îÄ‚îÄ {dep-1-dep}\n\n### This Task\n‚Üí {task-id} - {title} ‚Üê\n\n### Downstream (what depends on this)\n{blocked-1}\n‚îú‚îÄ‚îÄ {blocked-1-blocked}\n‚îî‚îÄ‚îÄ {blocked-2}\n```\n\n---\n\n## Dependency Concepts\n\n### Terminology\n\n| Term | Meaning |\n|------|---------|\n| **depends on** | A must complete before B can start |\n| **blocked by** | Same as \"depends on\" - B is blocked by A |\n| **blocks** | If A blocks B, B cannot start until A is done |\n| **transitive** | If A‚ÜíB‚ÜíC, A transitively blocks C |\n\n### Common Patterns\n\n**Sequential:**\n```\nA ‚Üí B ‚Üí C\nTask A, then B, then C\n```\n\n**Parallel with join:**\n```\nA ‚îÄ‚î¨‚îÄ‚Üí C\n   ‚îÇ\nB ‚îÄ‚îò\nTasks A and B can run in parallel, C needs both\n```\n\n**Fan-out:**\n```\n    ‚îå‚Üí B\nA ‚îÄ‚îÄ‚îº‚Üí C\n    ‚îî‚Üí D\nTask A enables B, C, and D to start\n```\n\n---\n\n## Error Handling\n\n### No subcommand provided\n```\nUsage: /deps <subcommand> [args]\n\nSubcommands:\n  add <task> <depends-on>     Add dependency\n  remove <task> <depends-on>  Remove dependency\n  show <task>                 Show task dependencies\n  graph [task]                Visualize dependency graph\n\nExample: /deps add write-tests implement-feature\n```\n\n### Task not found\n```\nError: Task \"{id}\" not found.\n\nCheck the ID and try again.\n```\n\n### Circular dependency\n```\nError: Cannot add dependency - creates circular dependency.\n\n{a} ‚Üí {b} ‚Üí {c} ‚Üí {a}\n\nThis would make it impossible to complete any of these tasks.\n```\n\n### Self-dependency\n```\nError: A task cannot depend on itself.\n```\n\n### No dependencies in project\n```\n## Dependency Graph\n\nNo dependencies defined in this project.\n\nAll tasks are independent and can be worked in any order.\n\nAdd dependencies: /deps add <task> <depends-on>\n```\n",
        "plugins/task-decomposer/commands/epic.md": "---\nname: epic\ndescription: Create and manage epics, add/remove tasks, track progress\nargument-hint: \"<subcommand> [args] [--flags]\"\nallowed-tools:\n  - Bash\n  - Read\n  - Write\n  - AskUserQuestion\n---\n\n# /epic Command\n\nCreate and manage epics. Epics are larger initiatives that group related tasks together.\n\n## Subcommands\n\n| Subcommand | Description | Example |\n|------------|-------------|---------|\n| `create` | Create a new epic | `/epic create \"Auth System\"` |\n| `add` | Add tasks to epic | `/epic add abc123 task1 task2` |\n| `remove` | Remove tasks from epic | `/epic remove abc123 task1` |\n| `progress` | Show completion progress | `/epic progress abc123` |\n| `close` | Close epic | `/epic close abc123` |\n\n---\n\n## /epic create\n\nCreate a new epic with optional details.\n\n### Arguments\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `title` | | string | (required) | Epic title |\n| `--description` | `-d` | string | (none) | Epic description |\n| `--priority` | `-p` | number | 2 | Priority (0-4) |\n| `--design` | | string | (none) | Design/approach notes |\n\n### Examples\n\n```bash\n/epic create \"User Authentication System\"\n/epic create \"Performance Optimization\" -p 1\n/epic create \"API v2\" -d \"Complete redesign of the public API\" --design \"RESTful with OpenAPI spec\"\n```\n\n### Execution\n\n```bash\nbd create \"{title}\" \\\n  -t epic \\\n  -p {priority} \\\n  --description \"{description}\" \\\n  --design \"{design}\"\n```\n\n### Output\n\n```\nCreated epic: {id} - {title}\n\nAdd tasks to this epic:\n- /epic add {id} <task-id>\n- /task create \"Task title\" --parent {id}\n\nOr plan tasks: /plan \"...\" --epic \"{title}\"\n```\n\n---\n\n## /epic add <epic-id> <task-id> [task-id2]...\n\nAdd one or more existing tasks to an epic.\n\n### Arguments\n\n| Argument | Type | Description |\n|----------|------|-------------|\n| `epic-id` | string | The epic to add tasks to |\n| `task-id` | string | One or more task IDs to add |\n\n### Examples\n\n```bash\n/epic add abc123 task1\n/epic add abc123 task1 task2 task3\n```\n\n### Execution\n\nFor each task:\n```bash\nbd update {task-id} --parent {epic-id}\n```\n\n### Output\n\n```\nAdded to epic {epic-id} - {epic-title}:\n- {task-id} - {task-title}\n- {task-id} - {task-title}\n\nEpic now has {n} tasks ({completed} completed).\n```\n\n### Validation\n\nBefore adding:\n1. Verify epic exists and is type=epic\n2. Verify each task exists\n3. Verify tasks aren't already in a different epic (warn if so)\n\n```\nWarning: {task-id} is already in epic {other-epic-id}.\n\nMove it to {epic-id}? [Move / Keep in current / Cancel]\n```\n\n---\n\n## /epic remove <epic-id> <task-id> [task-id2]...\n\nRemove tasks from an epic (makes them standalone).\n\n### Arguments\n\n| Argument | Type | Description |\n|----------|------|-------------|\n| `epic-id` | string | The epic to remove tasks from |\n| `task-id` | string | One or more task IDs to remove |\n\n### Examples\n\n```bash\n/epic remove abc123 task1\n/epic remove abc123 task1 task2\n```\n\n### Execution\n\nFor each task:\n```bash\nbd update {task-id} --parent \"\"\n```\n\n### Output\n\n```\nRemoved from epic {epic-id}:\n- {task-id} - {task-title}\n\nThese are now standalone tasks.\nEpic {epic-id} now has {n} tasks.\n```\n\n---\n\n## /epic progress <epic-id>\n\nShow detailed progress for an epic.\n\n### Arguments\n\n| Argument | Type | Description |\n|----------|------|-------------|\n| `epic-id` | string | The epic to show progress for |\n| `--format` | `-f` | string | Output format: text, json, markdown |\n\n### Examples\n\n```bash\n/epic progress abc123\n/epic progress abc123 --format markdown\n```\n\n### Execution\n\n```bash\nbd show {epic-id} --json\nbd list --parent={epic-id} --json\n```\n\n### Output\n\n```\n## Epic Progress: {title}\n\n**ID:** {epic-id}\n**Priority:** P{priority}\n**Status:** {status}\n\n### Progress\n{completed}/{total} tasks complete ({percent}%)\n\n```\n[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] 60%\n```\n\n### Task Breakdown\n\n| Status | Count | Tasks |\n|--------|-------|-------|\n| Completed | {n} | {id}, {id}, ... |\n| In Progress | {n} | {id} |\n| Open | {n} | {id}, {id} |\n| Blocked | {n} | {id} |\n\n### Completed Tasks\n- [x] {id} - {title}\n- [x] {id} - {title}\n\n### In Progress\n- [ ] {id} - {title} ‚Üê active\n\n### Remaining (Open)\n- [ ] {id} - {title}\n- [ ] {id} - {title} (blocked by {blocker})\n\n### Timeline\n- Created: {created_at}\n- Last activity: {updated_at}\n- {If all P0/P1 tasks done:} Critical path complete!\n\n### Next Steps\n{Suggest what to work on next based on priorities and dependencies}\n```\n\n---\n\n## /epic close <epic-id>\n\nClose an epic, optionally forcing closure with open tasks.\n\n### Arguments\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `epic-id` | | string | (required) | Epic to close |\n| `--force` | `-f` | boolean | false | Close even if tasks are open |\n| `--reason` | `-r` | string | (none) | Reason for closing |\n\n### Examples\n\n```bash\n/epic close abc123\n/epic close abc123 --force -r \"Descoped for this release\"\n```\n\n### Execution\n\n1. **Check for open tasks:**\n   ```bash\n   bd list --parent={epic-id} --status=open --json\n   bd list --parent={epic-id} --status=in_progress --json\n   ```\n\n2. **If open tasks exist and no --force:**\n   ```\n   Cannot close epic - {n} tasks still open:\n   - {id} - {title} ({status})\n   - {id} - {title} ({status})\n\n   Options:\n   ‚óã Close open tasks - Mark all as done\n   ‚óã Force close - Close epic, leave tasks open\n   ‚óã Cancel - Don't close\n   ```\n\n3. **Close the epic:**\n   ```bash\n   bd close {epic-id}\n   ```\n\n### Output\n\n```\nClosed epic: {epic-id} - {title}\n\nSummary:\n- {completed} tasks completed\n- {open} tasks remaining (now standalone)\n{If --reason: \"Reason: {reason}\"}\n```\n\n---\n\n## Epic Best Practices\n\n### When to Create an Epic\n- Work spans multiple related tasks (3+)\n- Work will take multiple sessions/days\n- Need to track overall progress\n- Work has a clear theme or goal\n\n### When NOT to Create an Epic\n- Single task that can be completed in one session\n- Unrelated tasks being grouped arbitrarily\n- Just for organizational neatness (keep it simple)\n\n### Epic Sizing\n- **Too small:** 1-2 tasks ‚Üí Just use standalone tasks\n- **Right size:** 3-7 tasks ‚Üí Good epic scope\n- **Too large:** 10+ tasks ‚Üí Consider breaking into multiple epics\n\n---\n\n## Error Handling\n\n### No subcommand provided\n```\nUsage: /epic <subcommand> [args]\n\nSubcommands:\n  create <title>           Create new epic\n  add <epic> <tasks...>    Add tasks to epic\n  remove <epic> <tasks...> Remove tasks from epic\n  progress <epic>          Show progress\n  close <epic>             Close epic\n\nExample: /epic create \"Auth System\"\n```\n\n### Epic not found\n```\nError: Epic \"{id}\" not found.\n\nList epics: bd list --type=epic\n```\n\n### Task not found\n```\nError: Task \"{id}\" not found.\n\nCheck the ID and try again.\n```\n\n### Not an epic\n```\nError: \"{id}\" is not an epic (type: {actual-type}).\n\nEpics have type=epic. This is a {actual-type}.\n```\n\n### Task already in epic\n```\nWarning: {task-id} is already in epic {current-epic}.\n\nMove it to {new-epic}? [Move / Cancel]\n```\n",
        "plugins/task-decomposer/commands/park.md": "---\nname: park\ndescription: Quick idea parking with optional metadata - capture thoughts without breaking flow\nargument-hint: \"<idea> [--task|-t <id>] [--priority|-p 0-4] [--tags <tags>] [--quick|-q]\"\nallowed-tools:\n  - Bash\n  - Read\n  - AskUserQuestion\n---\n\n# /park Command\n\nQuickly park ideas with optional metadata. This command provides more control than the auto-invoked park-idea skill while maintaining the same \"capture fast, return to work\" philosophy.\n\n## Arguments\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `idea` | | string | (required) | The idea to park |\n| `--task` | `-t` | string | (auto) | Link to specific task ID |\n| `--priority` | `-p` | number | 4 | Priority override (0-4) |\n| `--tags` | | string | `parked-idea` | Additional comma-separated tags |\n| `--quick` | `-q` | boolean | false | Minimal output, no confirmation |\n\n**Examples:**\n```\n/park \"Add caching to the API\"\n/park \"Consider rate limiting\" -t abc123\n/park -p 3 \"Refactor auth module for testability\"\n/park --tags \"performance,optimization\" \"Lazy load images\"\n/park -q \"Remember to update docs\"\n```\n\n---\n\n## Execution Flow\n\n### Step 1: Parse Arguments\n\nExtract the idea text and all optional flags.\n\nIf no idea provided, prompt:\n```\nWhat idea would you like to park?\n```\n\n### Step 2: Gather Context (Automatic)\n\nSilently gather context without prompting:\n\n1. **Current task (if --task not provided):**\n   ```bash\n   bd list --status=in_progress --json 2>/dev/null | head -1\n   ```\n\n2. **From conversation context:**\n   - What file/code was being discussed\n   - What triggered this idea (recent topic)\n\n### Step 3: Create Parked Issue\n\n```bash\nbd create \"PARKED: {brief title from idea}\" \\\n  -t task \\\n  -p {priority} \\\n  --status deferred \\\n  --labels \"{tags}\" \\\n  --description \"## Idea\n{user's idea text}\n\n## Context\nParked while working on: {task-id or 'no active task'}\nTriggered by: {what was being discussed}\nFile context: {current file if any, or 'N/A'}\"\n```\n\n### Step 4: Link to Source Task (if applicable)\n\nIf there's a current in-progress task or `--task` was provided:\n\n```bash\nbd dep add {new-idea-id} {task-id}\n```\n\nThis creates a \"discovered-from\" relationship.\n\n### Step 5: Confirm and Return\n\n**If `--quick` is NOT set:**\n```\nParked: {id} - PARKED: {title}\nPriority: P{priority}\nLinked to: {task-id or \"none\"}\n\nReview parked ideas later: /parked list\n```\n\n**If `--quick` IS set:**\n```\nParked as {id}!\n```\n\nThen immediately return focus to the previous work.\n\n---\n\n## Priority Guidelines\n\n| Priority | When to Use |\n|----------|-------------|\n| P0-P1 | Rarely for parked ideas - these should probably be real tasks |\n| P2 | Good ideas that should be done soon after current work |\n| P3 | Solid ideas for later consideration |\n| P4 | Default - backlog ideas to review eventually |\n\n---\n\n## Tag Patterns\n\nDefault tag: `parked-idea` (always included for filtering)\n\nCommon additional tags:\n- `performance` - Performance optimization ideas\n- `refactor` - Code quality improvements\n- `feature` - New feature ideas\n- `bug` - Potential bugs noticed\n- `tech-debt` - Technical debt items\n- `docs` - Documentation improvements\n\n**Example with tags:**\n```\n/park --tags \"performance,database\" \"Index the user_sessions table\"\n```\n\nCreates issue with labels: `parked-idea,performance,database`\n\n---\n\n## Context Detection\n\nThe command automatically captures context:\n\n| Context | How Detected |\n|---------|--------------|\n| Current task | `bd list --status=in_progress` |\n| Current file | From conversation (what file was being discussed) |\n| Trigger | Recent topic in conversation |\n\nThis context helps when reviewing parked ideas later - you'll remember why you had the idea.\n\n---\n\n## Error Handling\n\n### No idea provided\n```\nError: No idea provided.\n\nUsage: /park <idea> [--flags]\nExample: /park \"Add caching to API\"\n```\n\n### Invalid priority\n```\nError: Invalid priority \"{value}\". Priority must be 0-4.\nUsing default priority P4 for parked ideas.\n```\n\n### Beads not initialized\n```\nError: Beads not initialized in this project.\n\nRun: bd init\nThen try again.\n```\n\n---\n\n## Delegation Notes\n\nThis command provides a direct interface to the park-idea skill with:\n- Explicit argument parsing\n- Priority override capability\n- Custom tagging support\n- Quick mode for minimal interruption\n\nThe core parking logic follows the same principles as the skill:\n- Maximum 1 question (none if idea is clear)\n- Auto-capture context\n- Return to work fast\n",
        "plugins/task-decomposer/commands/parked.md": "---\nname: parked\ndescription: List, filter, and manage parked ideas\nargument-hint: \"[list|from|promote|discard|review] [args] [--flags]\"\nallowed-tools:\n  - Bash\n  - Read\n  - Write\n  - AskUserQuestion\n---\n\n# /parked Command\n\nList, filter, and batch-manage parked ideas. Use this command to review ideas you've captured and decide what to do with them.\n\n## Subcommands\n\n| Subcommand | Description | Example |\n|------------|-------------|---------|\n| `list` | List all parked ideas (default) | `/parked list` |\n| `from` | Ideas from a specific task | `/parked from abc123` |\n| `promote` | Promote to real issues | `/parked promote xyz` |\n| `discard` | Delete parked ideas | `/parked discard xyz` |\n| `review` | Interactive review session | `/parked review` |\n\n---\n\n## /parked list (default)\n\nList all parked ideas with filtering options.\n\n### Arguments\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `--format` | `-f` | string | `brief` | Output format: `brief`, `full`, `json` |\n| `--since` | | string | (none) | Filter by date (e.g., \"1 week\", \"2024-01-01\") |\n| `--limit` | `-l` | number | 20 | Maximum results |\n| `--all` | `-a` | boolean | false | Include already-reviewed (keeps tag) |\n\n### Examples\n\n```bash\n/parked\n/parked list\n/parked list --format full\n/parked list --since \"1 week\"\n```\n\n### Execution\n\n```bash\nbd list --status=deferred --labels=parked-idea --json\n```\n\n**Brief format:**\n```\n## Parked Ideas ({count} total)\n\n1. {id} - {title without \"PARKED:\" prefix}\n   Parked from: {source task or \"N/A\"}\n\n2. {id} - {title}\n   Parked from: {source task}\n\n...\n\nActions:\n- /parked promote <id>   - Make it a real task\n- /parked discard <id>   - Delete it\n- /parked review         - Review all interactively\n```\n\n**Full format:**\nIncludes the full idea text and context for each.\n\n---\n\n## /parked from <task-id>\n\nShow ideas parked while working on a specific task.\n\n### Arguments\n\n| Argument | Type | Description |\n|----------|------|-------------|\n| `task-id` | string | The source task ID |\n\n### Examples\n\n```bash\n/parked from abc123\n/parked from claude-plugins-xyz\n```\n\n### Execution\n\n```bash\n# Find ideas that have dependency on specific task\nbd list --status=deferred --labels=parked-idea --json | \\\n  jq '.[] | select(.dependencies[]? | contains(\"{task-id}\"))'\n```\n\n**Output:**\n```\n## Ideas Parked During: {task-title} ({task-id})\n\n1. {id} - {idea title}\n   {brief idea text}\n\n2. {id} - {idea title}\n   {brief idea text}\n\nNo other ideas? This task had focused work!\n```\n\nIf no ideas found:\n```\nNo ideas were parked while working on {task-id}.\n\nThe work was either very focused, or ideas were captured elsewhere.\n```\n\n---\n\n## /parked promote <id> [id2] [id3]...\n\nPromote one or more parked ideas to real issues.\n\n### Arguments\n\n| Argument | Type | Description |\n|----------|------|-------------|\n| `id` | string | One or more parked idea IDs |\n| `--priority` | `-p` | number | New priority (default: keep existing) |\n| `--decompose` | `-d` | boolean | Run through decomposition for complex ideas |\n\n### Examples\n\n```bash\n/parked promote abc123\n/parked promote abc123 def456 ghi789\n/parked promote abc123 -p 2\n/parked promote abc123 --decompose\n```\n\n### Execution\n\nFor each ID:\n\n1. **Update status and labels:**\n   ```bash\n   bd update {id} --status open\n   bd update {id} --labels remove:parked-idea\n   ```\n\n2. **Update title (remove PARKED: prefix):**\n   ```bash\n   bd update {id} --title \"{title without PARKED: prefix}\"\n   ```\n\n3. **Update priority if provided:**\n   ```bash\n   bd update {id} --priority {priority}\n   ```\n\n4. **If `--decompose` flag:**\n   - Extract the idea content\n   - Invoke the decompose skill with that content\n   - Original parked issue becomes part of the decomposition\n\n**Output:**\n```\nPromoted {N} ideas:\n- {id} - {new title} (now P{priority}, open)\n- {id} - {new title} (now P{priority}, open)\n\nThese are now visible in `bd ready` if they have no blockers.\n```\n\n---\n\n## /parked discard <id> [id2] [id3]...\n\nDelete one or more parked ideas.\n\n### Arguments\n\n| Argument | Type | Description |\n|----------|------|-------------|\n| `id` | string | One or more parked idea IDs |\n| `--force` | `-f` | boolean | Skip confirmation |\n\n### Examples\n\n```bash\n/parked discard abc123\n/parked discard abc123 def456\n/parked discard abc123 --force\n```\n\n### Execution\n\n1. **Confirm (unless --force):**\n   ```\n   Delete these parked ideas?\n   - {id} - {title}\n   - {id} - {title}\n\n   This cannot be undone. [Delete / Cancel]\n   ```\n\n2. **Delete each:**\n   ```bash\n   bd delete {id1} {id2} ...\n   ```\n\n**Output:**\n```\nDiscarded {N} parked ideas.\n```\n\n---\n\n## /parked review\n\nInteractive review session for all parked ideas.\n\n### Arguments\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `--from` | | string | (none) | Filter to ideas from specific task |\n\n### Examples\n\n```bash\n/parked review\n/parked review --from abc123\n```\n\n### Execution\n\nThis invokes the review-parked skill for an interactive session.\n\n**Flow:**\n\n1. **Present summary:**\n   ```\n   ## Parked Ideas Review ({count} total)\n\n   Starting interactive review...\n   ```\n\n2. **For each idea, show:**\n   ```\n   ## [{n}/{total}] {title}\n\n   **Idea:**\n   {full idea text}\n\n   **Context:**\n   Parked while: {source task}\n   Triggered by: {trigger context}\n\n   **What would you like to do?**\n   ‚óã Promote - Make it a real task\n   ‚óã Decompose - Break it down further\n   ‚óã Keep - Leave parked for later\n   ‚óã Discard - Delete this idea\n   ‚óã Skip - Decide later\n   ```\n\n3. **Execute decision** (promote, decompose, keep, or discard)\n\n4. **After all reviewed:**\n   ```\n   ## Review Complete\n\n   - Promoted: {count} issues\n   - Decomposed: {count} issues\n   - Kept parked: {count} ideas\n   - Discarded: {count} ideas\n   - Skipped: {count} ideas\n\n   Promoted issues are now visible in `bd ready`.\n   ```\n\n---\n\n## Batch Operations\n\n### Promote all\n```bash\n/parked promote $(bd list --status=deferred --labels=parked-idea --json | jq -r '.[].id' | tr '\\n' ' ')\n```\n\n### Discard all\n```bash\n/parked discard --force $(bd list --status=deferred --labels=parked-idea --json | jq -r '.[].id' | tr '\\n' ' ')\n```\n\n---\n\n## Error Handling\n\n### No parked ideas found\n```\nNo parked ideas found.\n\nPark ideas while working with: /park \"your idea\"\n```\n\n### Invalid idea ID\n```\nError: \"{id}\" is not a parked idea.\n\nEither the ID doesn't exist or it's not marked as parked.\nList parked ideas: /parked list\n```\n\n### ID not found\n```\nError: Issue \"{id}\" not found.\n\nCheck the ID and try again.\n```\n",
        "plugins/task-decomposer/commands/plan.md": "---\nname: plan\ndescription: Decompose complex tasks into structured beads issues with direct argument control\nargument-hint: \"[task-description] [--epic|-e <title>] [--priority|-p 0-4] [--skip-questions|-q] [--dry-run|-d] [--quick]\"\nallowed-tools:\n  - Bash\n  - Read\n  - Write\n  - Glob\n  - Grep\n  - Task\n  - AskUserQuestion\n---\n\n# /plan Command\n\nDecompose complex tasks into well-structured beads issues. This command provides direct entry point for task decomposition with explicit control over workflow phases.\n\n## Argument Parsing\n\nParse the command arguments:\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `task-description` | | string | (prompt) | The task to decompose |\n| `--epic` | `-e` | string | (none) | Create as epic with this title |\n| `--priority` | `-p` | number | 2 | Default priority (0-4) |\n| `--skip-questions` | `-q` | boolean | false | Skip clarifying questions |\n| `--dry-run` | `-d` | boolean | false | Preview without creating |\n| `--quick` | | boolean | false | No confirmations, proceed quickly |\n\n**Examples:**\n```\n/plan \"Add user authentication\"\n/plan \"Add caching\" --epic \"Performance Improvements\"\n/plan -e \"Auth System\" -p 1 \"Implement OAuth2 login\"\n/plan --dry-run \"Refactor database layer\"\n/plan --quick \"Add logout button\"\n```\n\n---\n\n## Execution Flow\n\n### Step 1: Parse Arguments and Gather Task Description\n\nIf no task description provided, prompt for it:\n\n```\nWhat task would you like to plan?\n```\n\nExtract all flags and the task description from the input.\n\n### Step 2: Check for Existing Related Work\n\n```bash\nbd search \"<relevant keywords from task>\"\nbd list --status=open\n```\n\nIf related issues found, present them and ask if we should:\n- Continue with new decomposition\n- Update existing issues instead\n- Link new work to existing\n\n### Step 3: Understanding Phase (unless --skip-questions)\n\nIf `--skip-questions` is NOT set:\n\n1. Parse the task description for:\n   - Primary goals and desired outcomes\n   - Scope boundaries (what's in/out)\n   - Constraints (time, technology, dependencies)\n   - Success criteria\n\n2. Ask 2-3 clarifying questions via AskUserQuestion:\n   - Focus on ambiguities or missing information\n   - Keep questions targeted, not overwhelming\n\n3. If code changes involved, explore the codebase:\n   - Read relevant files to understand current implementation\n   - Find patterns and conventions to follow\n   - Identify integration points\n\n4. Present Understanding Summary (unless --quick):\n   ```\n   ## Understanding Summary\n\n   **Goal:** {what we're trying to achieve}\n\n   **Scope:**\n   - In scope: {list}\n   - Out of scope: {list}\n\n   **Constraints:** {any limitations}\n\n   **Related existing issues:** {if any found}\n\n   Does this capture the work correctly? [Confirm / Adjust]\n   ```\n\nIf `--quick` flag is set, skip confirmations and proceed directly.\n\n### Step 4: Design Phase\n\nBreak the task into logical work units:\n\n1. **Determine hierarchy:**\n   - If `--epic` flag provided, create epic with that title\n   - Otherwise, determine if epic is needed based on scope\n   - Break into 3-7 tasks (avoid over-decomposition)\n\n2. **Map dependencies:**\n   - What must complete before what?\n   - What can be done in parallel?\n\n3. **Define acceptance criteria** for each task:\n   - Specific and testable\n   - Clear definition of \"done\"\n\n4. **Apply priority:**\n   - Use `--priority` value as default\n   - Adjust individual tasks if some are clearly higher/lower\n\n5. **Draft design approach** for significant tasks\n\n### Step 5: Present Decomposition Preview\n\n```\n## Decomposition Preview\n\n### Epic: {title} (P{priority})\n{description}\n\n### Tasks:\n\n1. **{task title}** (P{priority})\n   - Description: {what}\n   - Design: {how}\n   - Acceptance: {criteria}\n   - Dependencies: {none | depends on #N}\n\n2. **{task title}** (P{priority})\n   ...\n\n### Dependency Graph:\n```\n{epic}\n  ‚îú‚îÄ‚îÄ Task 1 (no deps)\n  ‚îú‚îÄ‚îÄ Task 2 (no deps)\n  ‚îî‚îÄ‚îÄ Task 3 ‚Üí depends on Task 1, Task 2\n```\n```\n\n### Step 6: Handle --dry-run or Proceed to Creation\n\nIf `--dry-run` is set:\n```\n(Dry run - no issues will be created)\n\nThe above decomposition would create:\n- 1 epic\n- {N} tasks\n- {M} dependency relationships\n\nRemove --dry-run to create these issues.\n```\n\nIf `--quick` is NOT set, ask for approval:\n```\nReady to create these issues? [Create / Adjust / Cancel]\n```\n\nIf `--quick` IS set, proceed directly to creation.\n\n### Step 7: Create Issues (via issue-writer agent)\n\nSpawn the issue-writer agent with the approved decomposition:\n\n```\nUse the issue-writer agent to create:\n{paste the decomposition preview}\n```\n\nThe agent will:\n1. Create epic first (if applicable)\n2. Create independent tasks\n3. Create dependent tasks\n4. Add dependency edges\n5. Report created issue IDs\n\n### Step 8: Report Results\n\n```\n## Created Issues\n\n- Epic: {id} - {title}\n  - Task: {id} - {title}\n  - Task: {id} - {title} (depends on {id})\n  ...\n\nRun `bd ready` to see what's available to work on.\n```\n\n---\n\n## Flag Combinations\n\n| Flags | Behavior |\n|-------|----------|\n| (none) | Full workflow with confirmations |\n| `--quick` | Skip confirmations, still ask questions |\n| `--skip-questions` | Skip questions, still confirm |\n| `--quick --skip-questions` | Fastest: straight to design ‚Üí create |\n| `--dry-run` | Full workflow but no creation |\n| `--dry-run --quick` | Fast preview only |\n\n---\n\n## Error Handling\n\n### No task description\n```\nError: No task description provided.\n\nUsage: /plan [task-description] [--flags]\nExample: /plan \"Add user authentication\"\n```\n\n### Invalid priority\n```\nError: Invalid priority \"{value}\". Priority must be 0-4.\n- P0: Critical/blocking\n- P1: High priority\n- P2: Medium priority (default)\n- P3: Low priority\n- P4: Backlog\n```\n\n### Beads not initialized\n```\nError: Beads not initialized in this project.\n\nRun: bd init\nThen try again.\n```\n\n---\n\n## Delegation Notes\n\nThis command delegates to:\n- **decompose skill** - Core decomposition logic\n- **issue-writer agent** - Issue creation execution\n\nThe command adds:\n- Argument parsing and validation\n- Flag-controlled workflow customization\n- Dry-run capability\n",
        "plugins/task-decomposer/commands/task.md": "---\nname: task\ndescription: Single task operations - create, start, complete, and view individual tasks\nargument-hint: \"<subcommand> [args] [--flags]\"\nallowed-tools:\n  - Bash\n  - Read\n  - Write\n  - Glob\n  - Grep\n  - AskUserQuestion\n---\n\n# /task Command\n\nCreate, start, complete, and view individual tasks. Provides quick access to common single-task operations.\n\n## Subcommands\n\n| Subcommand | Description | Example |\n|------------|-------------|---------|\n| `create` | Create a single task | `/task create \"Fix login bug\"` |\n| `start` | Mark task in-progress, show context | `/task start abc123` |\n| `done` | Close task, optionally commit | `/task done abc123 --commit` |\n| `show` | Display task details | `/task show abc123` |\n| `next` | Recommend next task to work on | `/task next` |\n\n---\n\n## /task create\n\nCreate a single task with optional rich metadata.\n\n### Arguments\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `title` | | string | (required) | Task title |\n| `--description` | `-d` | string | (none) | Detailed description |\n| `--design` | | string | (none) | Technical approach |\n| `--acceptance` | `-a` | string | (none) | Acceptance criteria |\n| `--priority` | `-p` | number | 2 | Priority (0-4) |\n| `--parent` | | string | (none) | Parent epic ID |\n\n### Examples\n\n```bash\n/task create \"Fix login redirect bug\"\n/task create \"Add email validation\" -p 1 -d \"Validate email format before submission\"\n/task create \"Write auth tests\" --parent abc123 --acceptance \"100% coverage for auth module\"\n```\n\n### Execution\n\n```bash\nbd create \"{title}\" \\\n  -t task \\\n  -p {priority} \\\n  --description \"{description}\" \\\n  --design \"{design}\" \\\n  --acceptance \"{acceptance}\" \\\n  --parent {parent}  # if provided\n```\n\nReport the created issue ID:\n```\nCreated: {id} - {title}\n\nStart work: /task start {id}\n```\n\n---\n\n## /task start\n\nMark a task as in-progress and show its full context to help you get started.\n\n### Arguments\n\n| Argument | Type | Description |\n|----------|------|-------------|\n| `id` | string | Task ID to start |\n\n### Examples\n\n```bash\n/task start abc123\n/task start claude-plugins-xyz\n```\n\n### Execution\n\n1. **Update status:**\n   ```bash\n   bd update {id} --status=in_progress\n   ```\n\n2. **Fetch full context:**\n   ```bash\n   bd show {id} --json\n   ```\n\n3. **Display contextual information:**\n   ```\n   ## Starting: {title}\n\n   **Description:**\n   {description}\n\n   **Design Approach:**\n   {design}\n\n   **Acceptance Criteria:**\n   {acceptance as checklist}\n\n   **Dependencies:**\n   - Blocked by: {list or \"none\"}\n   - Blocks: {list or \"none\"}\n\n   **Suggested first steps:**\n   {Based on the task, suggest where to start}\n   ```\n\n4. **If task has dependencies that aren't done:**\n   ```\n   Warning: This task has unresolved dependencies:\n   - {dep-id} - {dep-title} (status: {status})\n\n   Consider completing those first, or proceed if they're non-blocking.\n   ```\n\n---\n\n## /task done\n\nClose a completed task, optionally creating a commit with full context.\n\n### Arguments\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `id` | | string | (required) | Task ID to close |\n| `--commit` | `-c` | boolean | false | Trigger task-commit skill |\n| `--reason` | `-r` | string | (none) | Reason for closing |\n\n### Examples\n\n```bash\n/task done abc123\n/task done abc123 --commit\n/task done abc123 -c -r \"Completed as designed\"\n```\n\n### Execution\n\n1. **Close the task:**\n   ```bash\n   bd close {id}\n   ```\n\n2. **If `--commit` flag is set:**\n   - Invoke the task-commit skill to create a rich commit message\n   - The skill will gather beads context + git changes\n\n3. **Check for parked ideas:**\n   ```bash\n   bd list --status=deferred --labels=parked-idea --json | \\\n     jq '.[] | select(.dependencies[]? | contains(\"{id}\"))'\n   ```\n\n4. **If parked ideas linked to this task:**\n   ```\n   Task closed!\n\n   You have {N} parked ideas from this task:\n   - {idea-id} - {idea-title}\n\n   Would you like to review them now? [Yes / Later]\n   ```\n\n5. **Report completion:**\n   ```\n   Closed: {id} - {title}\n\n   {If --commit was used: \"Committed: {commit-hash}\"}\n\n   Next available tasks:\n   {Output from bd ready | head -3}\n   ```\n\n---\n\n## /task show\n\nDisplay detailed information about a task.\n\n### Arguments\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `id` | | string | (required) | Task ID to show |\n| `--format` | `-f` | string | `full` | Output format: `brief`, `full`, `json` |\n\n### Examples\n\n```bash\n/task show abc123\n/task show abc123 --format brief\n/task show abc123 -f json\n```\n\n### Execution\n\n```bash\nbd show {id} --json\n```\n\n**Brief format:**\n```\n{id} - {title} (P{priority}, {status})\n```\n\n**Full format:**\n```\n## {title}\n\n**ID:** {id}\n**Status:** {status}\n**Priority:** P{priority}\n**Type:** {type}\n**Parent:** {parent or \"none\"}\n\n### Description\n{description}\n\n### Design\n{design}\n\n### Acceptance Criteria\n{acceptance as checklist}\n\n### Dependencies\n- Blocked by: {list with status}\n- Blocks: {list}\n\n### Metadata\n- Created: {created_at}\n- Updated: {updated_at}\n```\n\n**JSON format:**\nOutput raw JSON from `bd show --json`\n\n---\n\n## /task next\n\nRecommend the next task to work on based on priorities, dependencies, and context.\n\n### Arguments\n\n| Argument | Short | Type | Default | Description |\n|----------|-------|------|---------|-------------|\n| `--epic` | `-e` | string | (none) | Filter to specific epic |\n| `--priority` | `-p` | number | (none) | Filter to priority or higher |\n\n### Examples\n\n```bash\n/task next\n/task next --epic abc123\n/task next -p 1\n```\n\n### Execution\n\n1. **Get ready tasks:**\n   ```bash\n   bd ready --json\n   ```\n\n2. **Apply filters** (if provided)\n\n3. **Rank tasks by:**\n   - Priority (P0 > P1 > P2 > P3 > P4)\n   - Unblocks other tasks (more dependent tasks = higher value)\n   - Age (older tasks may be stale or important)\n   - Parent epic priority\n\n4. **Present recommendation:**\n   ```\n   ## Recommended Next Task\n\n   **{id} - {title}** (P{priority})\n\n   {brief description}\n\n   **Why this task:**\n   - {reason 1: e.g., \"Highest priority ready task\"}\n   - {reason 2: e.g., \"Unblocks 2 other tasks\"}\n\n   Start this task: /task start {id}\n\n   ---\n\n   **Other ready tasks ({N} total):**\n   - {id} - {title} (P{priority})\n   - {id} - {title} (P{priority})\n   ```\n\n---\n\n## Error Handling\n\n### No subcommand provided\n```\nUsage: /task <subcommand> [args]\n\nSubcommands:\n  create <title>   Create a single task\n  start <id>       Mark task in-progress\n  done <id>        Close task\n  show <id>        Display task details\n  next             Recommend next task\n\nExample: /task create \"Fix login bug\"\n```\n\n### Task not found\n```\nError: Task \"{id}\" not found.\n\nCheck the ID and try again. List all tasks: bd list\n```\n\n### Task already in target status\n```\nTask {id} is already {status}.\n```\n\n### Invalid priority\n```\nError: Invalid priority \"{value}\". Must be 0-4.\n```\n",
        "plugins/task-decomposer/hooks/review-after-commit.md": "---\nevent: Stop\ndescription: After task-related commits, prompt to review any parked ideas from that task\n---\n\n# Review After Commit Hook\n\nThis hook triggers after a commit that references a beads task, prompting the user to review any parked ideas that were captured while working on that task.\n\n## Trigger Conditions\n\nThis hook activates when:\n1. A git commit was just completed\n2. The commit message contains a beads task reference (e.g., `#claude-plugins-xyz` or `Closes: claude-plugins-xyz`)\n\n## Workflow\n\n### 1. Extract Task ID from Recent Commit\n\n```bash\n# Get the most recent commit message\ngit log -1 --pretty=format:\"%B\"\n```\n\nLook for patterns:\n- `#claude-plugins-xxx` or `#{prefix}-xxx`\n- `Closes: claude-plugins-xxx` or `Closes: {prefix}-xxx`\n- `Fixes: {id}`\n- `Refs: {id}`\n\nIf no task reference found, skip this hook silently.\n\n### 2. Find Parked Ideas Linked to That Task\n\n```bash\n# List all parked ideas\nbd list --status=deferred --labels=parked-idea --json\n```\n\nFilter for ideas that:\n- Have dependency on the committed task ID\n- Were parked \"while working on\" that task (check description text)\n\nIf no parked ideas found for this task, skip silently.\n\n### 3. Prompt for Review\n\n```\n---\nCommit successful!\n\nYou have {N} parked idea(s) from task {task-id}:\n\n1. **{title}** - \"{first line of idea}\"\n2. **{title}** - \"{first line of idea}\"\n\nThese were thoughts you captured while working. What would you like to do?\n- Review and decide on each\n- Keep all parked for later\n- Discard all\n---\n```\n\n### 4. Handle User Choice\n\n**Review each:**\nFor each parked idea, show:\n```\n**{title}** ({id})\n\n{full idea text}\n\nContext: Parked while working on {source task}\n\n‚Üí Promote to real issue\n‚Üí Keep parked\n‚Üí Discard\n```\n\nThen execute based on choice:\n- Promote: `bd update {id} --status open` + remove parked-idea label + remove PARKED: prefix\n- Keep: no action\n- Discard: `bd delete {id}`\n\n**Keep all:**\n> Keeping all {N} ideas parked. Review anytime with \"review parked ideas\".\n\n**Discard all:**\n```bash\nbd delete {id1} {id2} ...\n```\n> Discarded {N} parked ideas.\n\n### 5. Summary\n\nAfter processing:\n```\nReview complete:\n- Promoted: {N} ‚Üí now in `bd ready`\n- Kept parked: {N}\n- Discarded: {N}\n```\n\n---\n\n## Implementation Notes\n\n- This hook runs at conversation Stop, checking if recent activity included a task commit\n- It's non-blocking - user can dismiss and review later\n- Parked ideas are linked via:\n  - Explicit dependency: `bd dep add {parked-id} {source-task-id}`\n  - Text in description: \"Parked while working on: {task-id}\"\n- The hook complements the on-demand `/review-parked` skill\n\n---\n\n## Skip Conditions\n\nDon't trigger this hook if:\n- No commit happened in recent conversation turns\n- Commit doesn't reference a beads task\n- No parked ideas exist for the referenced task\n- User explicitly dismissed the review prompt previously in this session\n",
        "plugins/task-decomposer/skills/decompose.md": "---\ndescription: |\n  Transform complex tasks into well-structured beads issues. Use when user says:\n  \"plan this work\", \"help me plan\", \"plan the task\", \"decompose this\",\n  \"break this down\", \"break down the work\", \"create issues for\",\n  \"create an epic for\", \"turn this into beads\", \"structure this work\",\n  \"how should I approach this\"\n---\n\n# Task Decomposition Skill\n\nYou are a task decomposition expert. Transform complex work into well-structured beads issues through a three-phase workflow: **Understanding ‚Üí Designing ‚Üí Creating**.\n\n## Phase 1: Understanding\n\nFirst, deeply understand what needs to be done:\n\n1. **Parse the task description** for:\n   - Primary goals and desired outcomes\n   - Scope boundaries (what's in/out)\n   - Constraints (time, technology, dependencies)\n   - Success criteria\n\n2. **Ask clarifying questions** via AskUserQuestion if:\n   - Goals are ambiguous\n   - Scope is unclear\n   - Technical approach has multiple valid options\n   - Dependencies on external factors exist\n\n3. **Explore the codebase** if code changes are involved:\n   - Read relevant files to understand current implementation\n   - Find patterns and conventions to follow\n   - Identify integration points\n\n4. **Check existing beads issues** for related/duplicate work:\n   ```bash\n   bd search \"<relevant keywords>\"\n   bd list --status=open\n   ```\n\n5. **Present Understanding Summary** for user confirmation:\n   ```\n   ## Understanding Summary\n\n   **Goal:** {what we're trying to achieve}\n\n   **Scope:**\n   - In scope: {list}\n   - Out of scope: {list}\n\n   **Constraints:** {any limitations}\n\n   **Related existing issues:** {if any found}\n\n   Does this capture the work correctly? [Confirm / Adjust]\n   ```\n\nWait for user confirmation before proceeding to Phase 2.\n\n---\n\n## Phase 2: Designing\n\nOnce understanding is confirmed, design the decomposition:\n\n1. **Break into logical work units** where each:\n   - Is independently deliverable\n   - Has clear start and end\n   - Can be assigned and tracked\n   - Ideally takes 1-4 hours of focused work\n\n2. **Determine hierarchy:**\n   - **Epic**: Large initiatives spanning multiple tasks (optional, for bigger work)\n   - **Tasks**: Concrete, actionable work items\n   - **Subtasks**: Further breakdown if needed (rare)\n\n3. **Map dependencies:**\n   - What must complete before what?\n   - What can be done in parallel?\n   - Draw the dependency graph\n\n4. **Define acceptance criteria** for each task:\n   - Specific and testable\n   - Clear definition of \"done\"\n   - Include edge cases if relevant\n\n5. **Draft design approach** for significant tasks:\n   - Technical approach\n   - Files likely to change\n   - Potential risks\n\n6. **Assign priorities** using P0-P4 scale:\n   - P0: Critical/blocking\n   - P1: High priority\n   - P2: Medium priority (default)\n   - P3: Low priority\n   - P4: Backlog/nice-to-have\n\n7. **Present Decomposition Preview:**\n   ```\n   ## Decomposition Preview\n\n   ### Epic: {title} (P{priority})\n   {description}\n\n   ### Tasks:\n\n   1. **{task title}** (P{priority})\n      - Description: {what}\n      - Design: {how}\n      - Acceptance: {criteria}\n      - Dependencies: {none | depends on #N}\n\n   2. **{task title}** (P{priority})\n      ...\n\n   ### Dependency Graph:\n   ```\n   {epic}\n     ‚îú‚îÄ‚îÄ Task 1 (no deps)\n     ‚îú‚îÄ‚îÄ Task 2 (no deps)\n     ‚îî‚îÄ‚îÄ Task 3 ‚Üí depends on Task 1, Task 2\n   ```\n\n   Ready to create these issues? [Create / Adjust]\n   ```\n\nWait for user approval before proceeding to Phase 3.\n\n---\n\n## Phase 3: Creating\n\nOnce design is approved, create the issues using the issue-writer agent:\n\n1. **Creation order matters:**\n   - Create epic first (if applicable)\n   - Create independent tasks (no dependencies)\n   - Create dependent tasks\n   - Add dependency edges last\n\n2. **Use rich content flags:**\n   ```bash\n   bd create \"{title}\" \\\n     -t {epic|task} \\\n     -p {0-4} \\\n     --description \"{what and why}\" \\\n     --design \"{technical approach}\" \\\n     --acceptance \"{criteria as checklist}\" \\\n     --parent {epic-id}  # if task under epic\n   ```\n\n3. **For long content, use stdin:**\n   ```bash\n   cat <<'EOF' | bd update {id} --description --body-file -\n   {multi-line content}\n   EOF\n   ```\n\n4. **Add dependencies after creation:**\n   ```bash\n   bd dep add {task-id} {depends-on-id}\n   ```\n\n5. **Report results:**\n   ```\n   ## Created Issues\n\n   - Epic: {id} - {title}\n     - Task: {id} - {title}\n     - Task: {id} - {title} (depends on {id})\n     ...\n\n   Run `bd ready` to see what's available to work on.\n   ```\n\n---\n\n## Important Guidelines\n\n- **Don't over-decompose**: 3-7 tasks is usually right. More granular = more overhead.\n- **Each task should be meaningful**: Avoid tasks like \"write tests\" without context.\n- **Dependencies should be real**: Don't add artificial dependencies.\n- **Acceptance criteria are key**: Vague criteria = unclear completion.\n- **Use the issue-writer agent**: It handles the beads CLI execution correctly.\n\n## Spawn the Issue Writer Agent\n\nWhen ready to create issues, spawn the issue-writer agent with the approved decomposition:\n\n```\nUse the issue-writer agent to create:\n{paste the approved decomposition preview}\n```\n\nThe agent will execute the beads commands and report results.\n",
        "plugins/task-decomposer/skills/park-idea.md": "---\ndescription: |\n  Quick idea capture while working - park thoughts without breaking flow. Use when user says:\n  \"park this idea\", \"park this thought\", \"save this for later\",\n  \"side thought\", \"note for later\", \"idea for later\",\n  \"don't forget\", \"remind me later\", \"come back to this\",\n  \"tangent:\", \"btw:\", \"also:\"\n---\n\n# Park Idea Skill\n\nYou help users quickly capture side thoughts and ideas without breaking their flow. The goal is **minimal interruption** - get the idea captured and return to work immediately.\n\n## Workflow\n\n### 1. Detect Current Context (Automatic)\n\nGather context silently without asking the user:\n\n```bash\n# Find current in-progress task\nbd list --status=in_progress --json 2>/dev/null | head -1\n```\n\nAlso note from the conversation:\n- What file/code we were discussing\n- What triggered this idea (the recent topic)\n\n### 2. Capture the Idea\n\nAsk **only one question**:\n\n> What's the idea?\n\nIf the user already provided the idea in their message (e.g., \"park this - we should add caching\"), extract it directly without asking.\n\n### 3. Create Parked Issue\n\n```bash\nbd create \"PARKED: {brief title from idea}\" \\\n  -t task \\\n  -p 4 \\\n  --status deferred \\\n  --labels \"parked-idea\" \\\n  --description \"## Idea\n{user's idea text}\n\n## Context\nParked while working on: {current-task-id or 'no active task'}\nTriggered by: {what we were discussing}\nFile context: {current file if any, or 'N/A'}\"\n```\n\nIf there's a current in-progress task, also add a dependency link:\n```bash\nbd dep add {new-idea-id} {current-task-id}\n```\n\nThis creates a \"discovered-from\" relationship.\n\n### 4. Confirm Briefly\n\nKeep confirmation minimal:\n\n> Parked as {id}! Continuing with {current task or 'your work'}...\n\nThen **immediately** return focus to what the user was doing before.\n\n---\n\n## Key Principles\n\n1. **Maximum 1 question** - If the idea is clear, ask nothing\n2. **Auto-capture context** - Don't ask \"what task are you working on?\"\n3. **Use deferred status** - Parked ideas don't clutter active work\n4. **Label consistently** - `parked-idea` label enables easy filtering\n5. **Link to source** - Dependency shows where idea came from\n6. **Return to work fast** - The whole interaction should take seconds\n\n---\n\n## Examples\n\n### User provides idea inline\n**User:** \"btw: we should probably add rate limiting to this API\"\n\n**Response:**\n```bash\nbd create \"PARKED: Add rate limiting to API\" -t task -p 4 --status deferred --labels \"parked-idea\" --description \"...\"\n```\n> Parked as claude-plugins-abc! Continuing...\n\n### User wants to park something\n**User:** \"park this thought\"\n\n**Response:**\n> What's the idea?\n\n**User:** \"The config validation could use JSON schema instead of manual checks\"\n\n**Response:**\n```bash\nbd create \"PARKED: Use JSON schema for config validation\" ...\n```\n> Parked as claude-plugins-xyz! Back to the auth refactor...\n\n---\n\n## Finding Parked Ideas Later\n\nUsers can review parked ideas with:\n- `/review-parked` - dedicated review skill\n- `bd list --status=deferred --labels=parked-idea` - direct command\n- Automatic prompt after task commits (via hook)\n",
        "plugins/task-decomposer/skills/review-parked.md": "---\ndescription: |\n  Review parked ideas on demand. Use when user says:\n  \"review parked ideas\", \"show parked\", \"what did I park\",\n  \"check my parking lot\", \"any ideas parked\", \"parked ideas\"\n---\n\n# Review Parked Ideas Skill\n\nHelp users review ideas they parked during work sessions and decide what to do with them.\n\n## Workflow\n\n### 1. Find Parked Ideas\n\n```bash\nbd list --status=deferred --labels=parked-idea --json\n```\n\nIf no parked ideas exist:\n> No parked ideas found. Use \"park this idea\" while working to capture thoughts for later.\n\n### 2. Present Summary\n\n```\n## Parked Ideas ({count} total)\n\n1. **{title}** ({id})\n   Parked while: {from context in description}\n   Idea: {first 1-2 lines of idea}\n\n2. **{title}** ({id})\n   ...\n\nWhat would you like to do?\n- Review each and decide (promote/keep/discard)\n- Keep all parked for later\n- Discard all\n```\n\n### 3. For Each Idea to Review\n\nShow full context:\n```\n## {title} ({id})\n\n**Idea:**\n{full idea text from description}\n\n**Context:**\n{context section from description}\n\n**Options:**\n1. Promote to real issue (open status, remove parked-idea label)\n2. Decompose further (run through decompose workflow)\n3. Keep parked (leave as-is)\n4. Discard (delete the issue)\n```\n\n### 4. Execute Decision\n\n**Promote:**\n```bash\nbd update {id} --status open\nbd update {id} --labels remove:parked-idea\n# Optionally update title to remove \"PARKED:\" prefix\nbd update {id} --title \"{title without PARKED: prefix}\"\n```\n\n**Decompose:**\nInvoke the decompose skill with the idea content.\n\n**Keep:**\nNo action needed.\n\n**Discard:**\n```bash\nbd delete {id}\n```\n\n### 5. Summary\n\nAfter processing all reviewed ideas:\n```\n## Review Complete\n\n- Promoted: {count} issues\n- Kept parked: {count} ideas\n- Discarded: {count} ideas\n\nPromoted issues are now visible in `bd ready` if they have no blockers.\n```\n\n---\n\n## Batch Operations\n\nIf user wants to handle all at once:\n\n**Keep all:**\n> All {count} ideas remain parked. Review again anytime with \"review parked ideas\".\n\n**Discard all:**\n```bash\n# Get all parked idea IDs\nbd list --status=deferred --labels=parked-idea --json | jq -r '.[].id'\n# Delete each\nbd delete {id1} {id2} ...\n```\n> Discarded {count} parked ideas.\n\n---\n\n## Filtering by Source Task\n\nIf user asks about ideas from a specific task:\n\n```bash\n# Find ideas that have dependency on specific task\nbd list --status=deferred --labels=parked-idea --json | \\\n  jq '.[] | select(.dependencies[]? | contains(\"{task-id}\"))'\n```\n\nThis shows only ideas parked while working on that task.\n",
        "plugins/task-decomposer/skills/task-commit.md": "---\ndescription: |\n  Create rich commit messages by combining beads task context with code changes. Use when user says:\n  \"commit this task\", \"commit for task\", \"task commit\",\n  \"commit with context\", \"beads commit\", \"commit with beads\",\n  or after closing a task: \"now commit\"\n---\n\n# Task Commit Skill\n\nGenerate rich, contextual commit messages by combining beads issue context with actual code changes.\n\n## Workflow\n\n### 1. Identify Task Context\n\nFirst, find which task this commit is for:\n\n```bash\n# Check for in-progress tasks\nbd list --status=in_progress --json\n\n# Check recently closed tasks\nbd list --status=closed --json | head -5\n```\n\nIf multiple candidates or none found, ask:\n> Which task is this commit for? {list options or ask for ID}\n\n### 2. Gather Beads Context\n\n```bash\nbd show {task-id} --json\n```\n\nExtract:\n- `title` ‚Üí basis for commit subject\n- `description` ‚Üí what was the goal\n- `design` ‚Üí how it was approached\n- `acceptance_criteria` ‚Üí what was achieved\n- `id` ‚Üí for reference in commit message\n\n### 3. Gather Code Context\n\n```bash\n# What's staged?\ngit diff --staged --stat\n\n# Detailed changes\ngit diff --staged\n```\n\nIf nothing is staged:\n> No changes staged. Stage your changes first with `git add <files>`, then run task commit again.\n\nAnalyze the diff to understand:\n- What files changed\n- What kind of changes (new code, refactor, fix, etc.)\n- Key modifications\n\n### 4. Generate Commit Message\n\nCombine beads + code context into a structured message:\n\n```\n{type}: {Concise subject from task + changes} (#{task-id})\n\n## What\n{From task description - the goal/problem being solved}\n\n## Why\n{From task design - the approach taken and reasoning}\n\n## Changes\n{Summary of actual code changes from the diff}\n- {file1}: {what changed}\n- {file2}: {what changed}\n\n## Acceptance\n{Which acceptance criteria were met, as checkboxes}\n- [x] {criterion 1}\n- [x] {criterion 2}\n\nCloses: {task-id}\n```\n\n**Commit types:**\n- `feat`: New feature\n- `fix`: Bug fix\n- `refactor`: Code restructuring\n- `docs`: Documentation\n- `test`: Tests\n- `chore`: Maintenance\n\n### 5. Present for Approval\n\n```\n## Generated Commit Message\n\n---\n{the generated message}\n---\n\nOptions:\n1. Commit as-is\n2. Edit message first\n3. Regenerate with different focus\n```\n\n### 6. Execute Commit\n\nUsing heredoc for proper formatting:\n```bash\ngit commit -m \"$(cat <<'EOF'\n{commit message here}\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\"\n```\n\nAfter successful commit:\n```\nCommitted! ({short-hash})\n\n{If there are parked ideas linked to this task, the review-after-commit hook will prompt for review.}\n```\n\n---\n\n## Example Output\n\nFor a task about adding PNG export:\n\n```\nfeat: Add PNG export to sketch plugin (#claude-plugins-uz6)\n\n## What\nAdd ability to export Excalidraw sketches as PNG images for sharing\nin contexts where Excalidraw files aren't supported.\n\n## Why\nUsed canvas-based rendering with proper DPI scaling for crisp exports.\nIntegrated with existing export menu in sketch command.\n\n## Changes\n- sketch-note/lib/export.ts: Added exportToPng() function\n- sketch-note/commands/sketch.md: Added --png flag handling\n- package.json: Added canvas dependency\n\n## Acceptance\n- [x] PNG export produces crisp images at 2x DPI\n- [x] Export works for sketches with all element types\n- [x] File saved to same location as .excalidraw file\n\nCloses: claude-plugins-uz6\n\nCo-Authored-By: Claude <noreply@anthropic.com>\n```\n\n---\n\n## Integration Notes\n\n- Works alongside the existing `/commit` skill\n- Adds beads context that `/commit` wouldn't have\n- The `Closes: {task-id}` line helps the review-after-commit hook find linked parked ideas\n- If task has no design/acceptance fields, those sections are omitted\n\n---\n\n## Handling Missing Context\n\nIf beads task lacks some fields:\n- No description ‚Üí Use title and infer from code changes\n- No design ‚Üí Omit \"Why\" section or infer from changes\n- No acceptance ‚Üí Omit \"Acceptance\" section\n\nThe commit message adapts to available information rather than showing empty sections.\n",
        "plugins/task-decomposer/skills/understand.md": "---\ndescription: |\n  Deeply explore a task through structured questioning before planning. Use when user says:\n  \"help me understand this task\", \"what questions should I ask\",\n  \"let's think through this\", \"explore this with me\",\n  \"clarify this task\", \"what am I missing\", \"deep dive into this\",\n  \"before we plan, let's understand\", \"interview me about this\"\n---\n\n# Task Understanding Skill\n\nYou are a task understanding expert. Help users build a complete mental model of their task through structured questioning before any planning begins. This surfaces hidden assumptions, clarifies ambiguities, and identifies unknowns.\n\n## When to Use This vs Decompose\n\n| This Skill (understand) | Decompose Skill |\n|------------------------|-----------------|\n| Deep questioning first | Quick understanding ‚Üí Design |\n| Systematic probing across 7 dimensions | Asks a few clarifying questions |\n| Goal: Build complete mental model | Goal: Create beads issues |\n| Output: Understanding summary | Output: Issues in beads |\n\nUse this skill when the task is fuzzy, complex, or you suspect hidden complexity.\n\n---\n\n## Seven Questioning Dimensions\n\nProbe these areas to build complete understanding:\n\n### 1. Goal Clarity\n- What does \"done\" look like?\n- Who benefits from this work?\n- What problem does this solve?\n- Why is this important now?\n\n### 2. Context & Background\n- What triggered this task?\n- What's been tried before?\n- What existing work relates to this?\n- Is there urgency or a deadline?\n\n### 3. Scope Boundaries\n- What's explicitly in scope?\n- What's explicitly out of scope?\n- Are there grey areas that need clarification?\n- How minimal can the first version be?\n\n### 4. Constraints & Requirements\n- Performance requirements?\n- Security considerations?\n- Technology limitations or preferences?\n- Budget or resource constraints?\n- Compatibility requirements?\n\n### 5. Dependencies & Integration\n- What systems does this touch?\n- Who else is affected by this work?\n- What must exist before this can start?\n- What depends on this completing?\n\n### 6. Risks & Unknowns\n- What could go wrong?\n- What assumptions are we making?\n- What are we uncertain about?\n- What would change our approach significantly?\n\n### 7. Success Criteria\n- How will we verify it works?\n- What metrics matter?\n- Who decides if it's acceptable?\n- What does \"good enough\" look like vs \"perfect\"?\n\n---\n\n## Conversation Flow\n\n### Phase 1: Open-Ended Discovery\n\nStart broad to understand the landscape:\n\n```\n\"Tell me about this task. What are we trying to accomplish and why does it matter?\"\n```\n\nListen for:\n- Stated goals and unstated goals\n- Emotional cues (frustration, excitement)\n- References to other work or people\n- Assumptions embedded in the description\n\n### Phase 2: Targeted Probing\n\nBased on the initial response, identify underspecified dimensions and probe them.\n\n**Probe 2-3 dimensions at a time.** Don't overwhelm with all 7 at once.\n\nUse AskUserQuestion for structured choices, or conversational questions for open exploration.\n\n**Adapting to task type:**\n\n| Task Type | Focus Areas |\n|-----------|-------------|\n| Technical/code | Code patterns, APIs, performance, existing implementations |\n| Product/feature | User needs, metrics, edge cases, user journeys |\n| Bug fix | Reproduction steps, root cause theories, impact scope |\n| Refactoring | Current problems, desired state, migration path, risk tolerance |\n| Integration | Protocols, authentication, error handling, rate limits |\n\n### Phase 3: Assumption Surfacing\n\nState assumptions explicitly and ask for validation:\n\n```\n\"Let me share what I'm assuming so far:\n- You want X to work like Y\n- Performance isn't the primary concern right now\n- This doesn't need to integrate with Z yet\n\nAre these correct? What am I missing?\"\n```\n\nThis catches misalignments early.\n\n### Phase 4: Synthesis\n\nPresent a structured understanding summary:\n\n```markdown\n## Task Understanding Summary\n\n**Goal:** {clear statement of what success looks like}\n\n**Context:** {why this exists, what triggered it, relevant history}\n\n**Scope:**\n- In: {explicit inclusions}\n- Out: {explicit exclusions}\n- Grey areas: {things that need decisions}\n\n**Key Constraints:**\n- {constraint 1}\n- {constraint 2}\n\n**Dependencies:**\n- {dependency 1}\n- {dependency 2}\n\n**Risks & Unknowns:**\n- {risk 1}\n- {unknown 1 - needs investigation}\n\n**Success Criteria:**\n- {criterion 1}\n- {criterion 2}\n\n**Key Decisions Made:**\n- {decision 1}\n- {decision 2}\n```\n\n### Phase 5: Transition\n\nAfter presenting the summary, offer next steps via AskUserQuestion:\n\n**Options:**\n1. **Decompose into beads issues** - Invoke the decompose skill with this context\n2. **Continue exploring** - There's more to understand\n3. **Save and return later** - Store this summary and come back\n\nIf user chooses decomposition, hand off to decompose skill:\n```\nUse the decompose skill to break down this task:\n\n[Include the Understanding Summary above]\n```\n\n---\n\n## Key Principles\n\n### 1. Ask, Don't Assume\nEven \"obvious\" things may hide complexity. Ask anyway.\n\n### 2. One Topic at a Time\nDon't ask 5 questions in a message. Focus on one dimension, get clarity, move on.\n\n### 3. Reflect Back\nParaphrase what you heard to verify alignment:\n```\n\"So if I understand correctly, the main goal is X, and Y is important because Z. Is that right?\"\n```\n\n### 4. Surface the Implicit\nHelp the user articulate knowledge they have but haven't stated:\n```\n\"You mentioned this needs to be fast. What does 'fast' mean here - under 100ms? Under 1s?\"\n```\n\n### 5. It's Okay to Not Know\nIdentifying unknowns is valuable. Don't force premature decisions:\n```\n\"It sounds like we're not sure yet how the auth system handles this case. That's fine - let's mark it as something to investigate.\"\n```\n\n---\n\n## Example Dialogue\n\n**User:** \"Help me understand what it would take to add caching to our API\"\n\n**Claude:** \"Let's explore this. What's driving the need for caching - are you seeing performance issues, high load, expensive computations, or something else?\"\n\n**User:** \"Database queries are slow and we're getting complaints\"\n\n**Claude:** \"Got it - so the goal is to reduce response times by caching database results. A few questions to understand the situation:\n- Which endpoints or queries are the main bottlenecks?\n- What kind of data - is it user-specific or shared across users?\n- How fresh does the data need to be?\"\n\n**User:** \"It's the product listing endpoint. Data is shared, and it only changes when admins update products - maybe once a day\"\n\n**Claude:** \"That's a great caching candidate - shared, read-heavy, rarely changing. Let me confirm my assumptions:\n- We're targeting the product listing endpoint specifically\n- Cache invalidation can happen on admin updates (event-driven) or with a reasonable TTL\n- This doesn't need to handle user-specific data yet\n\nAre these correct? And do you have preferences for where the cache lives - Redis, in-memory, CDN?\"\n\n[continues to build understanding...]\n\n---\n\n## Important Notes\n\n- **This skill produces understanding, not issues.** Use decompose skill to create beads issues.\n- **Err on the side of asking.** A question that seems obvious might reveal hidden complexity.\n- **Don't rush.** The goal is clarity, not speed. Thorough understanding prevents wasted work.\n- **Document decisions.** When choices are made during exploration, capture them in the summary.\n",
        "plugins/typst-notes/.claude-plugin/plugin.json": "{\n  \"name\": \"typst-notes\",\n  \"version\": \"1.0.2\",\n  \"description\": \"Generate beautiful PDF/HTML shareable notes using Typst with 7 professional templates, infographics, and modern typography\",\n  \"author\": {\n    \"name\": \"Krishnaswamy Subramanian\"\n  }\n}\n",
        "plugins/typst-notes/README.md": "# typst-notes\n\nGenerate beautiful PDF/HTML shareable notes using [Typst](https://typst.app) with 7 professional templates, infographics support, and modern typography.\n\n## Installation\n\n```bash\nclaude /install github:jskswamy/claude-plugins/plugins/typst-notes\n```\n\n### Prerequisites\n\nOne of the following for compilation:\n- **Typst** installed globally (`brew install typst`, `cargo install typst-cli`, or `nix-env -iA nixpkgs.typst`)\n- **nix-shell** available (automatic fallback - no global install needed)\n\n## Usage\n\n```bash\n/publish [--template exec|cheat|sketch|meeting|study|tech|portfolio]\n         [--theme light|dark|minimal|vibrant]\n         [--format pdf|html|both]\n         [--output <name>]\n         [--source conversation|jot:<path>|file:<path>]\n         [content description...]\n```\n\n### Examples\n\n```bash\n# Generate an executive summary from the conversation\n/publish --template exec\n\n# Create a cheat sheet for the topic discussed\n/publish --template cheat --theme dark\n\n# Publish a jot note as a study guide\n/publish --template study --source jot:notes/react-hooks.md\n\n# Generate a technical brief as both PDF and HTML\n/publish --template tech --format both --output api-design\n```\n\n## Templates\n\n| Template | Description | Layout |\n|----------|-------------|--------|\n| `exec` | Executive Summary | Portrait A4, metrics grid, findings, recommendations |\n| `cheat` | Cheat Sheet | Landscape A4, 2-3 columns, dense reference card |\n| `sketch` | Visual Sketchnote | CeTZ mind map, annotations, mixed typography |\n| `meeting` | Meeting Minutes | Attendees, agenda, decisions, action items table |\n| `study` | Study Guide | Objectives, concepts, vocabulary, practice questions |\n| `tech` | Technical Brief | Architecture diagrams, specs table, code examples |\n| `portfolio` | Creative Portfolio | Project cards, hero sections, technology badges |\n\n## Themes\n\n| Theme | Description |\n|-------|-------------|\n| `light` | Clean blue accent on white (default) |\n| `dark` | Bright accents on dark navy |\n| `minimal` | Grayscale, distraction-free |\n| `vibrant` | Bold red/purple, high energy |\n\n## Infographics\n\nAutomatically suggests and generates data visualizations:\n\n- **Bar/Line charts** via CeTZ-Plot\n- **Flowcharts & architecture diagrams** via Fletcher\n- **Sequence diagrams** via Pintorita\n- **Mind maps** via custom CeTZ\n\n## Jot Integration\n\nPublish jot captures directly:\n\n```bash\n/publish --source jot:notes/meeting-2024-01-15.md --template meeting\n```\n\n## Settings\n\nCreate `.claude/typst-notes.local.md` in your project:\n\n```yaml\n---\ndefault_template: exec\ndefault_theme: light\ndefault_format: pdf\noutput_path: ./notes\nfont_heading: \"Inter\"\nfont_body: \"Source Serif 4\"\nfont_mono: \"JetBrains Mono\"\naccent_color: \"#2563eb\"\n---\n```\n\n## Bundled Fonts\n\nAll fonts are OFL-licensed and included:\n- **Inter** - Modern sans-serif for headings\n- **Source Serif 4** - Readable serif for body text\n- **JetBrains Mono** - Programming font for code blocks\n\n## License\n\nPlugin code: MIT\nBundled fonts: SIL Open Font License (see individual LICENSE files in `fonts/`)\n",
        "plugins/typst-notes/agents/content-analyzer.md": "---\nname: content-analyzer\ndescription: Analyzes input content, selects appropriate structure for the chosen template, and organizes content with infographic suggestions\ntools:\n  - Read\n  - Grep\n  - Glob\n---\n\n# Content Analyzer Agent\n\nYou are a content analysis specialist that takes raw content and structures it for a specific Typst template. Your job is to extract, organize, and enhance content for beautiful document generation.\n\n## Input\n\nYou receive:\n1. **Raw content** - Text from conversation, jot notes, or files\n2. **Template name** - Which template the content will be rendered in\n3. **User instructions** - Any specific emphasis or customization requests\n\n## Output\n\nReturn a structured content object in a clear markdown format that the typst-generator agent can consume. The structure depends on the template.\n\n## Template-Specific Analysis\n\n### Executive Summary (`exec`)\n\nExtract and structure:\n- **Title**: Main topic or project name\n- **Subtitle**: Brief context line\n- **Date**: Current date or relevant date\n- **Metrics**: 3-5 key numbers/KPIs (label + value pairs)\n- **Key Findings**: 3-5 most important points as concise paragraphs\n- **Recommendations**: Actionable next steps as a list\n- **Infographics**: Suggest a bar or line chart if numeric data exists\n\n### Cheat Sheet (`cheat`)\n\nExtract and structure:\n- **Title**: Subject/topic name\n- **Categories**: Group content into 4-8 logical categories\n- **Per category**:\n  - Category name with short description\n  - Items: commands, syntax, patterns, or facts (keep concise)\n  - Code examples where relevant\n- **Tips/Warnings**: Important gotchas or pro tips\n- Aim for maximum information density\n\n### Visual Sketchnote (`sketch`)\n\nExtract and structure:\n- **Central Concept**: The main idea/theme\n- **Branches**: 4-6 subtopics radiating from center\n- **Per branch**:\n  - Label and brief description\n  - 2-3 key points\n  - Suggested icon/emoji representation\n- **Connections**: Relationships between branches\n- **Annotations**: Key quotes or facts to highlight\n\n### Meeting Minutes (`meeting`)\n\nExtract and structure:\n- **Meeting Title**: Subject of the meeting\n- **Date/Time/Location**: When and where\n- **Attendees**: Names and roles (if available)\n- **Agenda Items**: Numbered list of topics discussed\n- **Discussion Points**: Key points per agenda item\n- **Decisions**: Clearly marked decisions made\n- **Action Items**: Who, what, when table entries\n- **Next Meeting**: If mentioned\n\n### Study Guide (`study`)\n\nExtract and structure:\n- **Subject/Topic**: Main learning topic\n- **Learning Objectives**: 3-5 goals (checkbox-style)\n- **Concepts**: Key concepts with explanations and examples\n- **Vocabulary**: Term + definition pairs\n- **Diagrams**: Suggest concept maps or flowcharts for relationships\n- **Practice Questions**: Generate 3-5 review questions\n- **Summary**: Key takeaways\n\n### Technical Brief (`tech`)\n\nExtract and structure:\n- **System/Feature Name**: Title\n- **Overview**: 2-3 sentence summary\n- **Architecture**: Components and their relationships (suggest Fletcher diagram)\n- **Specifications**: Technical specs as table rows\n- **Code Examples**: Relevant code snippets with language\n- **Trade-offs**: Pros and cons of approach\n- **Dependencies**: External requirements\n- **API/Interface**: If applicable\n\n### Creative Portfolio (`portfolio`)\n\nExtract and structure:\n- **Title**: Portfolio or collection name\n- **Hero Section**: Main headline and brief intro\n- **Projects**: Per project:\n  - Name and description\n  - Technologies/tools as tags\n  - Key outcomes/metrics\n  - Visual placeholder description\n- **About Section**: Brief context/bio if available\n\n## Infographic Suggestions\n\nFor each piece of content, evaluate whether data visualization would enhance understanding:\n\n| Data Pattern | Suggestion |\n|-------------|-----------|\n| Numbers comparing items | Bar chart (CeTZ-Plot) |\n| Values over time/sequence | Line chart (CeTZ-Plot) |\n| Step-by-step process | Flowchart (Fletcher) |\n| System components | Architecture diagram (Fletcher) |\n| Request/response flow | Sequence diagram (Pintorita) |\n| Concept hierarchy | Mind map (CeTZ custom) |\n\nInclude specific data values and labels for any suggested infographic.\n\n## Guidelines\n\n1. **Be concise** - Template space is limited; distill to essentials\n2. **Preserve accuracy** - Don't fabricate data or stats not in the source\n3. **Add structure** - Even unstructured input should be organized logically\n4. **Suggest enhancements** - Recommend infographics where data supports it\n5. **Match template** - Structure your output to match what the template expects\n6. **Handle sparse content** - If content is thin, note it rather than padding\n",
        "plugins/typst-notes/agents/typst-generator.md": "---\nname: typst-generator\ndescription: Generates complete Typst source files from structured content using templates and themes\ntools:\n  - Read\n  - Write\n  - Bash\n---\n\n# Typst Generator Agent\n\nYou are a Typst code generation specialist. You take structured content from the content-analyzer agent and produce complete, compilable `.typ` files using the plugin's templates and theme system.\n\n## Plugin Root\n\nTemplates and base utilities are at: `${CLAUDE_PLUGIN_ROOT}/templates/`\n\n## Input\n\nYou receive:\n1. **Structured content** - Organized content from the content-analyzer\n2. **Template name** - exec, cheat, sketch, meeting, study, tech, portfolio\n3. **Theme name** - light, dark, minimal, vibrant\n4. **Font config** - heading, body, mono font names\n\n## Output\n\nA complete `.typ` file that:\n- Imports the appropriate template\n- Applies the specified theme colors\n- Renders all structured content\n- Includes any suggested infographics using CeTZ/Fletcher/Pintorita\n\n## Theme Colors\n\nApply theme by overriding the base theme colors. Read the theme file from `${CLAUDE_PLUGIN_ROOT}/themes/<theme>.md` to get the color values.\n\n### Theme Application Pattern\n\n```typst\n#import \"${CLAUDE_PLUGIN_ROOT}/templates/base.typ\": *\n\n// Override theme colors\n#let theme = (\n  primary: rgb(\"#...\"),\n  secondary: rgb(\"#...\"),\n  // ... from theme file\n)\n\n// Then use the template\n```\n\n## Template Usage Patterns\n\n### Executive Summary\n\n```typst\n#import \"${CLAUDE_PLUGIN_ROOT}/templates/executive-summary.typ\": *\n\n#show: executive-summary.with(\n  title: \"...\",\n  subtitle: \"...\",\n  date: \"...\",\n  theme: theme,\n)\n\n// Content uses template functions:\n#metrics-row((\n  (\"Label 1\", \"Value 1\"),\n  (\"Label 2\", \"Value 2\"),\n))\n\n#finding[Key finding text here]\n\n#recommendations((\n  \"First recommendation\",\n  \"Second recommendation\",\n))\n```\n\n### Cheat Sheet\n\n```typst\n#import \"${CLAUDE_PLUGIN_ROOT}/templates/cheat-sheet.typ\": *\n\n#show: cheat-sheet.with(\n  title: \"...\",\n  theme: theme,\n)\n\n#category(\"Category Name\")[\n  Content here...\n]\n```\n\n### Meeting Minutes\n\n```typst\n#import \"${CLAUDE_PLUGIN_ROOT}/templates/meeting-minutes.typ\": *\n\n#show: meeting-minutes.with(\n  title: \"...\",\n  date: \"...\",\n  attendees: ((\"Name\", \"Role\"), ...),\n  theme: theme,\n)\n\n#agenda-item(1, \"Topic\")[Discussion content]\n#decision[The decision made]\n#action-item(\"Who\", \"What\", \"When\")\n```\n\n### Study Guide\n\n```typst\n#import \"${CLAUDE_PLUGIN_ROOT}/templates/study-guide.typ\": *\n\n#show: study-guide.with(\n  title: \"...\",\n  theme: theme,\n)\n\n#objectives((\n  \"Objective 1\",\n  \"Objective 2\",\n))\n\n#concept(\"Name\")[Explanation with examples]\n#vocab((\"Term\", \"Definition\"), ...)\n#practice-question[Question text?]\n```\n\n### Technical Brief\n\n```typst\n#import \"${CLAUDE_PLUGIN_ROOT}/templates/technical-brief.typ\": *\n\n#show: technical-brief.with(\n  title: \"...\",\n  theme: theme,\n)\n\n#overview[System overview text]\n#spec-table(((\"Property\", \"Value\"), ...))\n#code-example(\"rust\")[```rust code here```]\n```\n\n### Visual Sketchnote\n\n```typst\n#import \"${CLAUDE_PLUGIN_ROOT}/templates/visual-sketchnote.typ\": *\n\n#show: visual-sketchnote.with(\n  title: \"...\",\n  theme: theme,\n)\n\n// CeTZ canvas for visual layout\n#sketchnote-canvas(\n  center: \"Main Concept\",\n  branches: (\n    (\"Branch 1\", (\"Point A\", \"Point B\")),\n    (\"Branch 2\", (\"Point C\", \"Point D\")),\n  ),\n)\n```\n\n### Creative Portfolio\n\n```typst\n#import \"${CLAUDE_PLUGIN_ROOT}/templates/creative-portfolio.typ\": *\n\n#show: creative-portfolio.with(\n  title: \"...\",\n  theme: theme,\n)\n\n#hero(\"Headline\", \"Subtitle text\")\n#project-card(\n  name: \"Project\",\n  description: \"...\",\n  tags: (\"Tag1\", \"Tag2\"),\n  metrics: ((\"Label\", \"Value\"),),\n)\n```\n\n## Infographic Generation\n\n### Bar/Line Charts (CeTZ-Plot)\n\n```typst\n#import \"@preview/cetz:0.3.4\"\n#import \"@preview/cetz-plot:0.1.1\": chart\n\n#cetz.canvas({\n  import cetz.draw: *\n  chart.barchart(\n    size: (9, 6),\n    (\n      (\"Label 1\", value1),\n      (\"Label 2\", value2),\n    ),\n    fill: theme.chart-1,\n  )\n})\n```\n\n### Flowcharts/Architecture (Fletcher)\n\n```typst\n#import \"@preview/fletcher:0.5.8\" as fletcher: diagram, node, edge\n\n#diagram(\n  node-stroke: 0.5pt + theme.border,\n  node((0, 0), [Component A], fill: theme.surface),\n  node((2, 0), [Component B], fill: theme.surface),\n  edge((0, 0), (2, 0), \"->\", [label]),\n)\n```\n\n### Sequence Diagrams (Pintorita)\n\n```typst\n#import \"@preview/pintorita:0.2.0\"\n\n#pintorita.render(```\nsequenceDiagram\n  Client->>Server: Request\n  Server->>Database: Query\n  Database-->>Server: Result\n  Server-->>Client: Response\n```)\n```\n\n## Guidelines\n\n1. **Always produce compilable output** - The `.typ` file must compile without errors\n2. **Use relative imports** - Import templates relative to the plugin root\n3. **Apply theme consistently** - All colors should come from the theme\n4. **Include package imports** - Add `#import \"@preview/...\"` for any packages used\n5. **Handle missing data gracefully** - If content is sparse, produce a valid but minimal document\n6. **Prefer template functions** - Use the template's helper functions rather than raw Typst where possible\n7. **Keep it readable** - The generated `.typ` should be human-editable for customization\n8. **Escape special characters correctly** - In Typst, `$` starts math mode. The escaping depends on context:\n   - In **content blocks** (`[...]`): escape as `\\$` ‚Üí renders `$`\n   - In **string arguments** (`\"...\"`): use `$` directly, no escaping needed ‚Äî `$` has no special meaning in strings\n   - Example: `(\"Downtime Cost\", \"$448/hr\")` ‚úì (string) vs `[The cost is \\$448/hr]` ‚úì (content)\n   - WRONG: `(\"Label\", \"\\\\$448\")` or `(\"Label\", \"\\$448\")` ‚Äî these render the backslash literally\n\n## Important Notes\n\n- The templates at `${CLAUDE_PLUGIN_ROOT}/templates/` define the `show` rules and helper functions\n- Always check what functions a template exports before using them\n- When generating import paths, use the actual resolved path (not the `${CLAUDE_PLUGIN_ROOT}` variable)\n- Font path is handled at compile time via `--font-path`, not in the `.typ` source\n",
        "plugins/typst-notes/commands/publish.md": "---\nname: publish\ndescription: Generate beautiful PDF/HTML shareable notes using Typst with professional templates\narguments:\n  - name: template\n    description: \"Template to use: exec, cheat, sketch, meeting, study, tech, portfolio\"\n    required: false\n  - name: theme\n    description: \"Color theme: light, dark, minimal, vibrant\"\n    required: false\n  - name: format\n    description: \"Output format: pdf, html, or both\"\n    required: false\n  - name: output\n    description: \"Output filename (without extension)\"\n    required: false\n  - name: source\n    description: \"Content source: conversation, jot:<note-path>, or file:<path>\"\n    required: false\n---\n\n# Publish Command\n\nYou are the orchestrator for generating beautiful shareable documents using Typst.\n\n## Plugin Root\nThe plugin is located at: `${CLAUDE_PLUGIN_ROOT}`\n\n## Settings\n\nCheck if the file `.claude/typst-notes.local.md` exists in the project root. If it does, read its YAML frontmatter for default settings:\n- `default_template` - Default template choice\n- `default_theme` - Default theme\n- `default_format` - Default output format (pdf, html, both)\n- `output_path` - Where to write output files (default: `./notes`)\n- `font_heading` - Heading font override\n- `font_body` - Body font override\n- `font_mono` - Monospace font override\n- `accent_color` - Primary accent color override\n\nCommand arguments override settings file values.\n\n## Workflow\n\n### Step 1: Parse Arguments\n\nExtract from the user's command:\n- `--template` or first positional: exec|cheat|sketch|meeting|study|tech|portfolio\n- `--theme`: light|dark|minimal|vibrant (default: light)\n- `--format`: pdf|html|both (default: pdf)\n- `--output`: output filename\n- `--source`: conversation|jot:<path>|file:<path> (default: conversation)\n- Remaining text: content description/instructions\n\n### Step 2: Resolve Typst Runner\n\nUse Bash to check availability:\n```bash\ncommand -v typst && echo \"TYPST_AVAILABLE\" || (command -v nix-shell && echo \"NIX_AVAILABLE\" || echo \"NONE_AVAILABLE\")\n```\n\nIf `NONE_AVAILABLE`, inform the user:\n> Typst is not installed. Install it via:\n> - `brew install typst` (macOS)\n> - `nix-env -iA nixpkgs.typst` (Nix)\n> - `cargo install typst-cli` (Cargo)\n>\n> Or install `nix-shell` for automatic fallback.\n\nThen stop.\n\n### Step 3: Select Template\n\nIf no template specified, use AskUserQuestion to prompt the user:\n\n**Question:** \"Which template would you like to use?\"\n**Options:**\n1. Executive Summary - Professional one-pager with metrics and key findings\n2. Cheat Sheet - Dense multi-column reference card (landscape)\n3. Visual Sketchnote - Creative illustrated notes with diagrams\n4. Meeting Minutes - Structured meeting notes with action items\n5. Study Guide - Educational material with exercises\n6. Technical Brief - Engineering specs with architecture diagrams\n7. Creative Portfolio - Visual showcase with project cards\n\n### Step 4: Gather Content\n\nBased on `--source`:\n\n- **conversation** (default): Summarize the current conversation context. Extract key points, decisions, data, and structure.\n- **jot:<path>**: Resolve the note path using jot's configured workbench:\n  1. Use the Read tool to read `.claude/jot.local.md` directly (do NOT search for it ‚Äî it's always at this exact path). Extract `workbench_path` from YAML frontmatter. If the file doesn't exist, default `workbench_path` to `~/workbench`.\n  2. Expand `~` to user's home directory\n  3. Resolve the note at `${workbench_path}/notes/<path>`\n  4. If the path doesn't include a file extension, try appending `.md`\n  5. Read the resolved file using the Read tool\n  Example: `--source jot:inbox/meeting-notes` ‚Üí reads `~/workbench/notes/inbox/meeting-notes.md`\n- **file:<path>**: Read the file at the specified path using the Read tool.\n\nIf there's additional content description from the user, incorporate it.\n\n### Step 5: Analyze Content\n\nDelegate to the `content-analyzer` agent with:\n- The raw content gathered in Step 4\n- The selected template name\n- Any user instructions about what to emphasize\n\nThe agent returns structured content including:\n- Title, subtitle, date\n- Organized sections appropriate for the template\n- Suggested infographics (charts, diagrams)\n- Key metrics or data points\n\n### Step 6: Generate Typst Source\n\nDelegate to the `typst-generator` agent with:\n- The structured content from Step 5\n- The template name\n- The theme name\n- Font configuration\n\nThe agent generates a complete `.typ` file that uses the template and theme.\n\n### Step 7: Write and Compile\n\n1. Determine output directory (from settings or `./notes`)\n2. Create the output directory if needed: `mkdir -p <output_dir>`\n3. Write the `.typ` source file to `<output_dir>/<output_name>.typ`\n4. Compile using the script:\n   ```bash\n   bash \"${CLAUDE_PLUGIN_ROOT}/scripts/compile.sh\" \\\n     \"<output_dir>/<output_name>.typ\" \\\n     \"<output_dir>/<output_name>\" \\\n     --format <format> \\\n     --font-path \"${CLAUDE_PLUGIN_ROOT}/fonts\"\n   ```\n5. Report the output file path(s) to the user\n\n### Step 8: Summary\n\nTell the user:\n- What template and theme were used\n- Output file path(s)\n- Brief description of the generated content\n- Mention they can open the `.typ` file to customize further\n\n### Step 9: Save Preferences\n\nAfter successful compilation, save the user's choices to `.claude/typst-notes.local.md` so they become defaults for future runs:\n\n1. Read existing `.claude/typst-notes.local.md` if it exists (preserve existing settings)\n2. Update only the fields the user actively specified or selected in this session:\n   - `default_template` - if user chose a template (via argument or AskUserQuestion)\n   - `default_theme` - if user chose a theme\n   - `default_format` - if user chose a format\n   - `output_path` - if user specified --output path\n3. Write the updated YAML frontmatter back to `.claude/typst-notes.local.md`\n\nExample resulting file:\n```yaml\n---\ndefault_template: exec\ndefault_theme: light\ndefault_format: pdf\noutput_path: ./notes\n---\n```\n\nDo not save font or accent_color settings automatically ‚Äî those are manual configuration only.\n\n## Error Handling\n\n- If compilation fails, show the error output and suggest fixes\n- If a template is unknown, show available templates\n- If source file doesn't exist, report clearly\n- If fonts aren't found, compilation still works with system fonts (warn user)\n\n## Template Mapping\n\n| Short Name | Template File |\n|-----------|--------------|\n| exec | executive-summary.typ |\n| cheat | cheat-sheet.typ |\n| sketch | visual-sketchnote.typ |\n| meeting | meeting-minutes.typ |\n| study | study-guide.typ |\n| tech | technical-brief.typ |\n| portfolio | creative-portfolio.typ |\n",
        "plugins/typst-notes/skills/infographics.md": "---\nname: infographics\ndescription: This skill should be used when deciding whether to add charts, diagrams, flowcharts, or other data visualizations to a Typst document. Provides guidance on when and how to use CeTZ-Plot, Fletcher, Pintorita, and custom CeTZ drawings for infographic generation.\n---\n\n# Infographics Decision Guide\n\n## When to Add Infographics\n\nAdd a visualization when content contains:\n\n| Content Pattern | Visualization Type | Package |\n|----------------|-------------------|---------|\n| 3+ numeric values being compared | Bar chart | CeTZ-Plot |\n| Values changing over time/sequence | Line chart | CeTZ-Plot |\n| Percentage breakdown | Pie/donut chart | CeTZ-Plot |\n| Step-by-step process (3+ steps) | Flowchart | Fletcher |\n| System with 3+ connected components | Architecture diagram | Fletcher |\n| Request/response between services | Sequence diagram | Pintorita |\n| Hierarchical concepts | Mind map | CeTZ (custom) |\n| Before/after comparison | Side-by-side boxes | Layout (no package) |\n| Pro/con analysis | Two-column layout | Layout (no package) |\n\n## When NOT to Add Infographics\n\n- Content is purely textual/narrative\n- Only 1-2 data points (use inline text instead)\n- Data is already in a clear table\n- The visualization would be trivially simple\n- Template is already dense (cheat-sheet with limited space)\n\n## Bar Chart Pattern\n\nBest for: Comparing quantities across categories.\n\n```typst\n#import \"@preview/cetz:0.3.4\"\n#import \"@preview/cetz-plot:0.1.1\": chart\n\n#cetz.canvas({\n  chart.barchart(\n    size: (9, 5),\n    label-key: 0,\n    value-key: 1,\n    (\n      (\"Q1 Revenue\", 2.4),\n      (\"Q2 Revenue\", 3.1),\n      (\"Q3 Revenue\", 2.8),\n      (\"Q4 Revenue\", 3.5),\n    ),\n    bar-style: (fill: theme.chart-1.lighten(40%), stroke: theme.chart-1),\n  )\n})\n```\n\nTips:\n- Keep to 3-8 categories\n- Sort by value if no natural ordering\n- Use theme colors for consistency\n\n## Line Chart Pattern\n\nBest for: Showing trends over time or continuous data.\n\n```typst\n#import \"@preview/cetz:0.3.4\"\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n#cetz.canvas({\n  plot.plot(\n    size: (10, 5),\n    x-label: \"Month\",\n    y-label: \"Users (K)\",\n    x-tick-step: 1,\n    {\n      plot.add(\n        ((1, 12), (2, 15), (3, 18), (4, 22), (5, 28), (6, 35)),\n        style: (stroke: 2pt + theme.chart-1),\n        label: \"Active Users\",\n      )\n      plot.add(\n        ((1, 8), (2, 10), (3, 11), (4, 14), (5, 16), (6, 20)),\n        style: (stroke: 2pt + theme.chart-2, dash: \"dashed\"),\n        label: \"Paying Users\",\n      )\n    },\n  )\n})\n```\n\nTips:\n- Limit to 2-3 series for readability\n- Label axes clearly\n- Use dashed lines for secondary series\n\n## Flowchart Pattern\n\nBest for: Processes, decision trees, workflows.\n\n```typst\n#import \"@preview/fletcher:0.5.8\" as fletcher: diagram, node, edge\n\n#diagram(\n  node-stroke: 0.5pt + theme.border,\n  spacing: (2em, 1.5em),\n\n  // Process nodes\n  node((0, 0), [Start], fill: theme.success.lighten(85%), shape: fletcher.shapes.pill),\n  node((1, 0), [Step 1], fill: theme.surface),\n  node((2, 0), [Decision?], fill: theme.warning.lighten(85%), shape: fletcher.shapes.diamond),\n  node((3, 0), [Step 2A], fill: theme.surface),\n  node((2, 1), [Step 2B], fill: theme.surface),\n  node((4, 0), [End], fill: theme.error.lighten(85%), shape: fletcher.shapes.pill),\n\n  // Flow edges\n  edge((0, 0), (1, 0), \"->\"),\n  edge((1, 0), (2, 0), \"->\"),\n  edge((2, 0), (3, 0), \"->\", [Yes]),\n  edge((2, 0), (2, 1), \"->\", [No]),\n  edge((3, 0), (4, 0), \"->\"),\n  edge((2, 1), (4, 0), \"->\", bend: 20deg),\n)\n```\n\nTips:\n- Use shapes to differentiate node types (pill for start/end, diamond for decisions)\n- Keep to 5-10 nodes max\n- Flow left-to-right or top-to-bottom\n\n## Architecture Diagram Pattern\n\nBest for: System components, microservices, layers.\n\n```typst\n#import \"@preview/fletcher:0.5.8\" as fletcher: diagram, node, edge\n\n#diagram(\n  node-stroke: 0.5pt + theme.border,\n  spacing: (3em, 2em),\n\n  // Layers\n  node((0, 0), [Web App], fill: theme.chart-1.lighten(85%)),\n  node((2, 0), [Mobile App], fill: theme.chart-1.lighten(85%)),\n\n  node((1, 1), [API Gateway], fill: theme.chart-2.lighten(85%)),\n\n  node((0, 2), [Auth Service], fill: theme.chart-3.lighten(85%)),\n  node((1, 2), [Core Service], fill: theme.chart-3.lighten(85%)),\n  node((2, 2), [Notification], fill: theme.chart-3.lighten(85%)),\n\n  node((1, 3), [PostgreSQL], fill: theme.chart-4.lighten(85%)),\n\n  // Connections\n  edge((0, 0), (1, 1), \"->\"),\n  edge((2, 0), (1, 1), \"->\"),\n  edge((1, 1), (0, 2), \"->\"),\n  edge((1, 1), (1, 2), \"->\"),\n  edge((1, 1), (2, 2), \"->\"),\n  edge((0, 2), (1, 3), \"->\"),\n  edge((1, 2), (1, 3), \"->\"),\n)\n```\n\nTips:\n- Group related components visually\n- Use color to indicate layers/types\n- Show data flow direction with arrows\n- Label edges only when the relationship isn't obvious\n\n## Sequence Diagram Pattern\n\nBest for: API calls, authentication flows, message passing.\n\n```typst\n#import \"@preview/pintorita:0.2.0\"\n\n#render(```\nsequenceDiagram\n  participant U as User\n  participant C as Client\n  participant A as Auth\n  participant S as Server\n\n  U->>C: Login\n  C->>A: POST /auth/token\n  A-->>C: JWT Token\n  C->>S: GET /api/data (Bearer token)\n  S->>A: Validate token\n  A-->>S: Valid\n  S-->>C: 200 OK + Data\n  C-->>U: Display data\n```)\n```\n\nTips:\n- Keep to 3-5 participants\n- Show the happy path first\n- Use solid arrows for requests, dashed for responses\n- Group related exchanges with labels\n\n## Mind Map Pattern (Custom CeTZ)\n\nBest for: Concept relationships, brainstorming, topic overview.\n\nUse the `sketchnote-canvas` function from `visual-sketchnote.typ` or build a custom CeTZ canvas:\n\n```typst\n#import \"@preview/cetz:0.3.4\"\n\n#cetz.canvas(length: 1cm, {\n  import cetz.draw: *\n\n  // Central concept\n  circle((5, 5), radius: 1.2, fill: theme.primary.lighten(85%), stroke: 2pt + theme.primary)\n  content((5, 5), text(weight: \"bold\", size: 11pt)[Core Idea])\n\n  // Branches (positioned around center)\n  let branches = (\n    (angle: 0deg, label: \"Topic A\", color: theme.chart-1),\n    (angle: 72deg, label: \"Topic B\", color: theme.chart-2),\n    (angle: 144deg, label: \"Topic C\", color: theme.chart-3),\n    (angle: 216deg, label: \"Topic D\", color: theme.chart-4),\n    (angle: 288deg, label: \"Topic E\", color: theme.chart-5),\n  )\n\n  for b in branches {\n    let x = 5 + 3.5 * calc.cos(b.angle)\n    let y = 5 + 3.5 * calc.sin(b.angle)\n    line(\n      (5 + 1.2 * calc.cos(b.angle), 5 + 1.2 * calc.sin(b.angle)),\n      (x, y),\n      stroke: 1.5pt + b.color,\n    )\n    circle((x, y), radius: 0.8, fill: b.color.lighten(85%), stroke: 1pt + b.color)\n    content((x, y), text(size: 8pt, weight: \"semibold\", fill: b.color)[#b.label])\n  }\n})\n```\n\n## Sizing Guidelines\n\n| Template | Max Chart Width | Recommended Height |\n|----------|----------------|-------------------|\n| Executive Summary | 100% (full width) | 5-6cm |\n| Cheat Sheet | Per-column width | 3-4cm |\n| Study Guide | 80-100% | 5-7cm |\n| Technical Brief | 100% | 6-8cm |\n| Visual Sketchnote | 100% | 8-12cm |\n| Creative Portfolio | 100% | 5-6cm |\n| Meeting Minutes | Avoid large charts | 4-5cm max |\n\n## Color Usage\n\nAlways use theme colors for consistency:\n- `theme.chart-1` through `theme.chart-5` for data series\n- `theme.primary` for emphasis\n- `theme.surface` for node backgrounds\n- `theme.border` for strokes\n- `theme.text-secondary` for labels\n",
        "plugins/typst-notes/skills/jot-to-publish.md": "---\nname: jot-to-publish\ndescription: This skill should be used when the user wants to publish or convert a jot capture into a formatted document. Handles reading jot notes and feeding them through the publish pipeline to generate PDF/HTML output.\n---\n\n# Jot to Publish Integration\n\n## When This Activates\n\nThis skill activates when:\n- User runs `/publish --source jot:<path>`\n- User mentions wanting to \"publish\" or \"format\" a jot note\n- User wants to convert captured notes into a shareable document\n\n## Jot Note Structure\n\nJot captures are markdown files typically stored in the project's notes directory. They may contain:\n\n```markdown\n---\ntype: note|task|idea|blip\ntags: [tag1, tag2]\ncreated: 2024-01-15T10:30:00Z\n---\n\n# Title\n\nContent with various markdown elements:\n- Lists\n- Code blocks\n- Links\n- Quotes\n```\n\n## Reading Jot Content\n\n1. **Read jot config**: Use the Read tool to read `.claude/jot.local.md` directly (do NOT search/glob for it ‚Äî it's always at this fixed path). Extract `workbench_path` from YAML frontmatter. If the file doesn't exist, default `workbench_path` to `~/workbench`.\n2. **Resolve path**: The jot path is relative to `${workbench_path}/notes/`. Expand `~` to the user's home directory.\n   - `jot:inbox/meeting.md` ‚Üí `${workbench_path}/notes/inbox/meeting.md`\n   - `jot:learned/react-hooks` ‚Üí `${workbench_path}/notes/learned/react-hooks.md`\n3. **Read file**: Use the Read tool to get the note content\n4. **Parse frontmatter**: Extract metadata (type, tags, created date)\n5. **Extract body**: Get the markdown body after frontmatter\n\n## Template Selection Heuristics\n\nBased on jot note characteristics, suggest a template:\n\n| Note Pattern | Suggested Template |\n|-------------|-------------------|\n| Meeting notes with attendees/actions | `meeting` |\n| Technical decisions, specs, code | `tech` |\n| Learning notes, definitions, concepts | `study` |\n| Quick reference, commands, syntax | `cheat` |\n| Project descriptions, outcomes | `portfolio` |\n| Summary with metrics, findings | `exec` |\n| Creative brainstorm, visual concepts | `sketch` |\n\n## Workflow\n\n```\nUser: /publish --source jot:inbox/meeting-2024-01-15.md\n\n1. Read `.claude/jot.local.md` ‚Üí workbench_path: ~/workbench\n2. Resolve path: ~/workbench/notes/inbox/meeting-2024-01-15.md\n3. Read the jot file at resolved path\n4. Parse frontmatter for metadata\n5. Analyze content type and suggest template (if not specified)\n6. Pass content to content-analyzer agent\n7. content-analyzer structures it for the template\n8. typst-generator produces the .typ file\n9. Compile to PDF/HTML\n10. Report output path\n```\n\n## Content Mapping\n\n### From Jot Metadata\n\n| Jot Field | Document Field |\n|-----------|---------------|\n| Title (# heading) | Document title |\n| `created` date | Document date |\n| `tags` | Can become badges/categories |\n| `type: task` | Consider action-item formatting |\n| `type: idea` | Consider sketch/brainstorm layout |\n\n### From Jot Body\n\n- **Headers** ‚Üí Section headings in template\n- **Lists** ‚Üí Bullet points, action items, or objectives\n- **Code blocks** ‚Üí Code examples (technical-brief) or reference items (cheat-sheet)\n- **Quotes** ‚Üí Highlight boxes or annotations\n- **Tables** ‚Üí Spec tables, vocabulary, or data tables\n- **Links** ‚Üí References section\n\n## Examples\n\n### Meeting Note ‚Üí Meeting Minutes\n\n```\nJot content:\n# Sprint Planning - Jan 15\n\nAttendees: Alice (PM), Bob (Dev), Carol (QA)\n\n## Agenda\n1. Review last sprint\n2. New priorities\n\n## Discussion\n- Shipped auth feature\n- Bug in checkout needs fixing\n\n## Decisions\n- Prioritize checkout fix\n- Delay dark mode to next sprint\n\n## Action Items\n- Bob: Fix checkout bug by Jan 18\n- Carol: Write regression tests by Jan 19\n```\n\nMaps to meeting-minutes template with attendees, numbered agenda, decision boxes, and action items table.\n\n### Technical Note ‚Üí Technical Brief\n\n```\nJot content:\n# Caching Strategy\n\nWe need to add caching to reduce API latency.\n\n## Options\n- Redis: Fast, distributed, complex setup\n- In-memory: Simple, not shared across instances\n- CDN: Only for static content\n\n## Decision\nRedis for session data, in-memory for config.\n\n## Implementation\n```typescript\nconst cache = new Redis({ host: 'cache.internal' });\n```\n\nLatency targets: p50 < 10ms, p99 < 50ms\n```\n\nMaps to technical-brief template with overview, tradeoffs, code example, and spec table.\n\n### Learning Note ‚Üí Study Guide\n\n```\nJot content:\n# React Hooks\n\n## Key Concepts\n- useState: State management in functional components\n- useEffect: Side effects and lifecycle\n- useContext: Access context without prop drilling\n\n## Rules\n1. Only call at top level\n2. Only call from React functions\n\n## Examples\n```jsx\nconst [count, setCount] = useState(0);\n```\n```\n\nMaps to study-guide template with objectives, concepts, vocabulary, and code examples.\n\n## Error Handling\n\n- **File not found**: Report clearly with the attempted path\n- **Empty file**: Warn and ask user for content to publish\n- **No frontmatter**: Treat entire file as body content\n- **Binary file**: Report that only markdown/text files are supported\n",
        "plugins/typst-notes/skills/typst-format/SKILL.md": "---\nname: typst-format\ndescription: This skill should be used when generating Typst source code, formatting documents with Typst syntax, or needing to understand Typst markup, functions, packages (CeTZ, Fletcher, Pintorita), and document structure. Provides comprehensive Typst language reference and package API knowledge.\n---\n\n# Typst Language Reference\n\n## Document Structure\n\n```typst\n// Page setup\n#set page(paper: \"a4\", margin: (top: 2cm, bottom: 2cm, left: 2.5cm, right: 2.5cm))\n#set page(paper: \"a4\", flipped: true)  // Landscape\n\n// Text defaults\n#set text(font: \"Source Serif 4\", size: 11pt, fill: rgb(\"#1e293b\"))\n\n// Paragraph\n#set par(leading: 0.65em, justify: true)\n\n// Show rules\n#show heading.where(level: 1): it => { ... }\n#show raw: set text(font: \"JetBrains Mono\")\n```\n\n## Typography\n\n```typst\n// Font styles\n#text(size: 14pt, weight: \"bold\", fill: blue)[Bold blue text]\n#text(font: \"Inter\", style: \"italic\")[Italic Inter]\n#text(weight: \"semibold\", size: 12pt)[Semi-bold]\n\n// Weights: \"thin\", \"light\", \"regular\", \"medium\", \"semibold\", \"bold\", \"black\"\n// Styles: \"normal\", \"italic\", \"oblique\"\n\n// Alignment\n#align(center)[Centered text]\n#align(left + top)[Top-left aligned]\n\n// Spacing\n#v(12pt)   // Vertical space\n#h(6pt)    // Horizontal space\n#h(1fr)    // Fill remaining horizontal space\n```\n\n## Layout\n\n```typst\n// Block - rectangular container\n#block(\n  fill: rgb(\"#f8fafc\"),        // Background color\n  stroke: 0.5pt + rgb(\"#e2e8f0\"),  // Border\n  inset: 12pt,                 // Inner padding\n  radius: 4pt,                 // Border radius\n  width: 100%,                 // Width\n  above: 8pt,                  // Margin top\n  below: 8pt,                  // Margin bottom\n  clip: true,                  // Clip overflow\n)[Content here]\n\n// Box - inline container\n#box(fill: blue.lighten(90%), inset: (x: 6pt, y: 2pt), radius: 3pt)[Inline]\n\n// Grid\n#grid(\n  columns: (1fr, 2fr, auto),\n  column-gutter: 12pt,\n  row-gutter: 8pt,\n  [Col 1], [Col 2], [Col 3],\n)\n\n// Columns\n#columns(3, gutter: 12pt)[Multi-column content...]\n\n// Padding\n#pad(left: 20pt, top: 8pt)[Padded content]\n```\n\n## Colors\n\n```typst\n// RGB\nrgb(\"#2563eb\")\nrgb(\"#2563eb\").lighten(85%)\nrgb(\"#2563eb\").darken(20%)\n\n// Named colors\nblue, red, green, yellow, purple, orange, black, white\n\n// Color operations\ncolor.lighten(50%)    // Lighter\ncolor.darken(20%)     // Darker\ncolor.mix(other, 50%) // Mix two colors\n```\n\n## Tables\n\n```typst\n#table(\n  columns: (auto, 1fr, auto),\n  stroke: 0.5pt + gray,\n  inset: 8pt,\n  fill: (_, y) => if y == 0 { rgb(\"#f1f5f9\") } else { none },\n  // Header row\n  [*Name*], [*Description*], [*Value*],\n  // Data rows\n  [Item 1], [Description], [42],\n  [Item 2], [Description], [17],\n)\n```\n\n## Lists\n\n```typst\n// Unordered\n- Item one\n- Item two\n  - Nested item\n\n// Ordered\n+ First\n+ Second\n+ Third\n\n// Custom markers\n#set list(marker: [‚Üí])\n```\n\n## Code Blocks\n\n```typst\n// Inline code\n`inline code`\n\n// Block code with language\n```rust\nfn main() {\n    println!(\"Hello\");\n}\n`` `\n\n// Raw block (no highlighting)\n#raw(block: true, \"raw text here\")\n```\n\n## Lines and Shapes\n\n```typst\n// Horizontal line\n#line(length: 100%, stroke: 2pt + blue)\n\n// Custom stroke\n#line(length: 50%, stroke: (paint: red, thickness: 1pt, dash: \"dashed\"))\n\n// Circle, rect, ellipse\n#circle(radius: 20pt, fill: blue.lighten(80%), stroke: 1pt + blue)\n#rect(width: 100pt, height: 50pt, fill: gray.lighten(90%), radius: 4pt)\n```\n\n## Functions and Variables\n\n```typst\n// Define a function\n#let my-func(param1, param2: \"default\") = {\n  [Result: #param1 and #param2]\n}\n\n// Use it\n#my-func(\"hello\", param2: \"world\")\n\n// Variables\n#let title = \"My Document\"\n#let accent = rgb(\"#2563eb\")\n\n// Conditionals\n#if condition [true branch] else [false branch]\n\n// Loops\n#for item in items [\n  - #item\n]\n\n#for (i, item) in items.enumerate() [\n  #str(i + 1). #item\n]\n```\n\n## Imports\n\n```typst\n// Import from file\n#import \"base.typ\": *           // Import all\n#import \"base.typ\": theme, fonts // Import specific\n\n// Import packages\n#import \"@preview/cetz:0.3.4\"\n#import \"@preview/fletcher:0.5.8\" as fletcher: diagram, node, edge\n#import \"@preview/cetz-plot:0.1.1\": chart\n#import \"@preview/pintorita:0.2.0\"\n```\n\n## Show/Set Rules\n\n```typst\n// Set rules (change defaults)\n#set text(size: 11pt)\n#set heading(numbering: \"1.1\")\n#set page(numbering: \"1\")\n\n// Show rules (transform elements)\n#show heading.where(level: 1): it => {\n  set text(font: \"Inter\", size: 18pt, weight: \"bold\", fill: blue)\n  block(above: 1.5em, below: 0.8em, it)\n}\n\n// Show with template function\n#show: my-template.with(title: \"Doc Title\")\n```\n\n## Template Pattern\n\n```typst\n// Define template\n#let my-template(title: \"\", body) = {\n  set page(paper: \"a4\")\n  set text(size: 11pt)\n\n  // Header\n  text(size: 20pt, weight: \"bold\")[#title]\n\n  body\n}\n\n// Use template\n#show: my-template.with(title: \"Hello\")\n\nContent goes here...\n```\n\n---\n\n## Package: CeTZ (Canvas)\n\n```typst\n#import \"@preview/cetz:0.3.4\"\n\n#cetz.canvas(length: 1cm, {\n  import cetz.draw: *\n\n  // Shapes\n  circle((0, 0), radius: 1, fill: blue.lighten(80%), stroke: 1pt + blue)\n  rect((-1, -1), (1, 1), fill: none, stroke: 1pt + gray)\n  line((0, 0), (3, 2), stroke: 2pt + red)\n  arc((0, 0), start: 0deg, stop: 180deg, radius: 2)\n\n  // Text content\n  content((2, 1), [Label text])\n  content((0, 0), box(inset: 4pt, fill: white)[Node])\n\n  // Bezier curves\n  bezier((0, 0), (4, 0), (1, 2), (3, 2), stroke: 1pt + blue)\n\n  // Groups and transforms\n  group({\n    translate((5, 0))\n    rotate(45deg)\n    rect((0, 0), (1, 1))\n  })\n})\n```\n\n## Package: CeTZ-Plot (Charts)\n\n```typst\n#import \"@preview/cetz:0.3.4\"\n#import \"@preview/cetz-plot:0.1.1\": chart, plot\n\n// Bar chart\n#cetz.canvas({\n  chart.barchart(\n    size: (10, 6),\n    (\n      (\"Category A\", 42),\n      (\"Category B\", 28),\n      (\"Category C\", 65),\n    ),\n    fill: blue.lighten(60%),\n    bar-style: (fill: blue.lighten(60%), stroke: blue),\n  )\n})\n\n// Line plot\n#cetz.canvas({\n  plot.plot(\n    size: (10, 6),\n    x-label: \"Time\",\n    y-label: \"Value\",\n    {\n      plot.add(\n        ((0, 1), (1, 3), (2, 2), (3, 5), (4, 4)),\n        style: (stroke: 2pt + blue),\n      )\n    },\n  )\n})\n```\n\n## Package: Fletcher (Diagrams)\n\n```typst\n#import \"@preview/fletcher:0.5.8\" as fletcher: diagram, node, edge\n\n#diagram(\n  node-stroke: 0.5pt + gray,\n  spacing: 2em,\n  // Nodes\n  node((0, 0), [Client], fill: blue.lighten(90%)),\n  node((2, 0), [Server], fill: green.lighten(90%)),\n  node((4, 0), [Database], fill: orange.lighten(90%)),\n  // Edges\n  edge((0, 0), (2, 0), \"->\", [request]),\n  edge((2, 0), (4, 0), \"->\", [query]),\n  edge((4, 0), (2, 0), \"-->\", [result], bend: -20deg),\n  edge((2, 0), (0, 0), \"-->\", [response], bend: -20deg),\n)\n```\n\n## Package: Pintorita (Sequence Diagrams)\n\n```typst\n#import \"@preview/pintorita:0.2.0\"\n\n#render(```\nsequenceDiagram\n  participant C as Client\n  participant S as Server\n  participant D as Database\n\n  C->>S: HTTP Request\n  S->>D: SQL Query\n  D-->>S: Results\n  S-->>C: JSON Response\n```)\n```\n\n## Math Mode\n\n```typst\n// Inline math\n$x^2 + y^2 = z^2$\n\n// Display math\n$ sum_(i=0)^n x_i = integral_0^1 f(x) dif x $\n\n// Aligned equations\n$ a &= b + c \\\n  d &= e + f $\n```\n\n## Figures and Images\n\n```typst\n// Figure with caption\n#figure(\n  image(\"path/to/image.png\", width: 80%),\n  caption: [Figure caption here],\n)\n\n// Image sizing\n#image(\"photo.jpg\", width: 50%, height: auto)\n```\n\n## Page Numbering and Headers\n\n```typst\n#set page(\n  numbering: \"1 / 1\",\n  header: [\n    #text(size: 8pt, fill: gray)[Document Title]\n    #h(1fr)\n    #text(size: 8pt, fill: gray)[Page]\n  ],\n  footer: align(center)[#counter(page).display(\"1\")],\n)\n```\n"
      },
      "plugins": [
        {
          "name": "devenv",
          "description": "Initialize and manage Nix flake development environments with auto-detection and security tooling",
          "version": "1.3.1",
          "author": {
            "name": "Krishnaswamy Subramanian"
          },
          "source": "./plugins/devenv",
          "category": "development",
          "tags": [
            "nix",
            "flake",
            "devenv",
            "development",
            "environment",
            "pre-commit",
            "gitleaks",
            "security",
            "direnv",
            "direnv-instant"
          ],
          "categories": [
            "development",
            "devenv",
            "direnv",
            "direnv-instant",
            "environment",
            "flake",
            "gitleaks",
            "nix",
            "pre-commit",
            "security"
          ],
          "install_commands": [
            "/plugin marketplace add jskswamy/claude-plugins",
            "/plugin install devenv@jskswamy-plugins"
          ]
        },
        {
          "name": "git-commit",
          "description": "Generate intelligent git commit messages with classic or conventional commit style support, strict atomic commit validation, and session context awareness",
          "version": "1.1.1",
          "author": {
            "name": "Krishnaswamy Subramanian"
          },
          "source": "./plugins/git-commit",
          "category": "git",
          "tags": [
            "git",
            "commit",
            "classic-commits",
            "conventional-commits",
            "atomic-commits",
            "pair-programming",
            "session-context"
          ],
          "categories": [
            "atomic-commits",
            "classic-commits",
            "commit",
            "conventional-commits",
            "git",
            "pair-programming",
            "session-context"
          ],
          "install_commands": [
            "/plugin marketplace add jskswamy/claude-plugins",
            "/plugin install git-commit@jskswamy-plugins"
          ]
        },
        {
          "name": "jot",
          "description": "Quick, low-friction capture of notes, tasks, ideas, session summaries, tech radar blips, and Feynman-style teaching notes with Obsidian-style auto-linking",
          "version": "1.4.1",
          "author": {
            "name": "Krishnaswamy Subramanian"
          },
          "source": "./plugins/jot",
          "category": "productivity",
          "tags": [
            "capture",
            "notes",
            "tasks",
            "ideas",
            "radar",
            "blips",
            "knowledge-management",
            "obsidian",
            "wikilinks",
            "gtd",
            "productivity",
            "learning",
            "feynman",
            "teach",
            "teaching-notes"
          ],
          "categories": [
            "blips",
            "capture",
            "feynman",
            "gtd",
            "ideas",
            "knowledge-management",
            "learning",
            "notes",
            "obsidian",
            "productivity",
            "radar",
            "tasks",
            "teach",
            "teaching-notes",
            "wikilinks"
          ],
          "install_commands": [
            "/plugin marketplace add jskswamy/claude-plugins",
            "/plugin install jot@jskswamy-plugins"
          ]
        },
        {
          "name": "sketch-note",
          "description": "Generate visual sketch notes in Excalidraw format from conversations, code architecture, or custom content",
          "version": "1.2.1",
          "author": {
            "name": "Krishnaswamy Subramanian"
          },
          "source": "./plugins/sketch-note",
          "category": "visualization",
          "tags": [
            "sketch",
            "excalidraw",
            "diagram",
            "visualization",
            "architecture",
            "notes",
            "hand-drawn",
            "mind-map",
            "flowchart"
          ],
          "categories": [
            "architecture",
            "diagram",
            "excalidraw",
            "flowchart",
            "hand-drawn",
            "mind-map",
            "notes",
            "sketch",
            "visualization"
          ],
          "install_commands": [
            "/plugin marketplace add jskswamy/claude-plugins",
            "/plugin install sketch-note@jskswamy-plugins"
          ]
        },
        {
          "name": "typst-notes",
          "description": "Generate beautiful PDF/HTML shareable notes using Typst with 7 professional templates, infographics, and modern typography",
          "version": "1.0.2",
          "author": {
            "name": "Krishnaswamy Subramanian"
          },
          "source": "./plugins/typst-notes",
          "category": "productivity",
          "tags": [
            "typst",
            "pdf",
            "html",
            "notes",
            "templates",
            "publish",
            "infographics"
          ],
          "categories": [
            "html",
            "infographics",
            "notes",
            "pdf",
            "productivity",
            "publish",
            "templates",
            "typst"
          ],
          "install_commands": [
            "/plugin marketplace add jskswamy/claude-plugins",
            "/plugin install typst-notes@jskswamy-plugins"
          ]
        },
        {
          "name": "task-decomposer",
          "description": "Transform complex tasks into structured beads issues with proper dependencies, capture ideas without breaking flow, and create rich commit messages",
          "version": "1.2.0",
          "author": {
            "name": "Krishnaswamy Subramanian"
          },
          "source": "./plugins/task-decomposer",
          "category": "workflow",
          "tags": [
            "beads",
            "planning",
            "decomposition",
            "issues",
            "epic",
            "workflow",
            "tasks",
            "parking",
            "commit"
          ],
          "categories": [
            "beads",
            "commit",
            "decomposition",
            "epic",
            "issues",
            "parking",
            "planning",
            "tasks",
            "workflow"
          ],
          "install_commands": [
            "/plugin marketplace add jskswamy/claude-plugins",
            "/plugin install task-decomposer@jskswamy-plugins"
          ]
        }
      ]
    }
  ]
}