{
  "author": {
    "id": "Blockchain-Oracle",
    "display_name": "Blockchain Oracle",
    "avatar_url": "https://avatars.githubusercontent.com/u/111399725?u=5e6147762d8d0569f713b53bb638263bfdc04d71&v=4"
  },
  "marketplaces": [
    {
      "name": "smart-router-marketplace",
      "version": null,
      "description": "Plugin discovery and context-aware routing system for Claude Code",
      "repo_full_name": "Blockchain-Oracle/smart-router",
      "repo_url": "https://github.com/Blockchain-Oracle/smart-router",
      "repo_description": "Plugin discovery and context-aware routing system for Claude Code",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2025-12-22T13:00:56Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"smart-router-marketplace\",\n  \"owner\": {\n    \"name\": \"Blockchain Oracle\",\n    \"email\": \"BlockchainOracle.dev@gmail.com\"\n  },\n  \"metadata\": {\n    \"description\": \"Plugin discovery and context-aware routing system for Claude Code\",\n    \"version\": \"0.1.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"smart-router\",\n      \"description\": \"Plugin discovery and context-aware routing system. Automatically discovers installed plugins and intelligently routes to the best tool based on task context and user preferences.\",\n      \"version\": \"0.1.0\",\n      \"author\": {\n        \"name\": \"Blockchain Oracle\"\n      },\n      \"source\": \"./\",\n      \"category\": \"productivity\",\n      \"tags\": [\"routing\", \"discovery\", \"automation\", \"orchestration\", \"plugin-management\"],\n      \"keywords\": [\"routing\", \"discovery\", \"orchestration\", \"plugin-management\", \"context-aware\", \"automation\", \"workflow\"]\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"smart-router\",\n  \"description\": \"Plugin discovery and context-aware routing system. Automatically discovers installed plugins and intelligently routes to the best tool based on task context and user preferences.\",\n  \"version\": \"0.1.0\",\n  \"author\": {\n    \"name\": \"Blockchain Oracle\",\n    \"email\": \"BlockchainOracle.dev@gmail.com\"\n  },\n  \"homepage\": \"https://github.com/Blockchain-Oracle/smart-router\",\n  \"repository\": \"https://github.com/Blockchain-Oracle/smart-router\",\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"routing\",\n    \"discovery\",\n    \"orchestration\",\n    \"plugin-management\",\n    \"context-aware\"\n  ]\n}\n",
        "README.md": "# Smart Router\n\nPlugin discovery and context-aware routing system for Claude Code.\n\n## Overview\n\nSmart Router solves the problem of having many installed plugins without knowing which one to use. It automatically discovers all your installed plugins (21+ in most setups) and intelligently routes you to the best tool based on your task context and preferences.\n\n## Problem It Solves\n\nWhen you have multiple plugins installed:\n- **3+ code review agents** - Which one should you use?\n- **Multiple brainstorming skills** - Which fits your task?\n- **Various testing tools** - What's best for this situation?\n\nWithout Smart Router, Claude Code may not consistently use your installed tools, or you have to manually remember and select them each time.\n\n## How It Works\n\n1. **Smart Router Skill** - On first use, scans your plugins and builds a registry\n2. **Smart Caching** - Registry cached using hash-based invalidation (rebuilds only when plugins change)\n3. **Context-Aware Routing** - Ranks options by context, specialty, and user preferences\n\n## Features\n\n- ✅ **Auto-discovery** - Scans `~/.claude/plugins/` and `.claude/commands/`\n- ✅ **Smart caching** - Hash-based invalidation, rebuilds only when plugins change\n- ✅ **Context-aware** - Routes based on file types, project structure\n- ✅ **User preferences** - Auto-route, show menu, or context-based (configurable)\n- ✅ **Lightweight** - Fast registry lookup, minimal overhead\n\n## Installation\n\n### From Marketplace (Recommended)\n\n**Step 1: Add the marketplace**\n```bash\n/plugin marketplace add Blockchain-Oracle/smart-router\n```\n\n**Step 2: Install the plugin**\n```bash\n/plugin install smart-router@smart-router-marketplace\n```\n\nThat's it! Smart Router is now active and will automatically discover your plugins on the next session.\n\n### Alternative: Direct Git Clone\n```bash\n# Clone directly to your global plugins directory\ngit clone https://github.com/Blockchain-Oracle/smart-router ~/.claude/plugins/smart-router\n```\n\n### Local Development\n```bash\n# Test locally before installing\ncd /path/to/smart-router\nclaude --plugin-dir .\n```\n\n## Configuration\n\n### Quick Setup (Recommended)\n\nUse the interactive configuration command:\n\n```bash\n/smart-router:configure\n```\n\nThis will guide you through setting up your preferences with questions and validation.\n\n### Manual Setup\n\nAlternatively, create `.claude/smart-router.local.md` manually:\n\n```yaml\n---\nroutingMode: auto          # auto | ask | context\nshowReasoning: true        # Show why tool was chosen\nexcludePlugins:            # Plugins to ignore\n  - plugin-name\npriorityOrder:             # Override default ranking\n  - superpowers\n  - pr-review-toolkit\n---\n```\n\n### Routing Modes\n\n- **`auto`** - Automatically picks best tool, no questions asked (fastest)\n- **`ask`** - Shows menu of options, lets you choose (most control)\n- **`context`** - Uses file context to decide automatically (balanced, recommended)\n\n## Usage\n\n### Automatic Routing\n\nJust work normally! Smart Router runs in the background:\n\n```\nYou: \"I need a code review\"\n→ Smart Router detects need\n→ Auto-routes to best code review tool\n→ Review happens seamlessly\n```\n\n### Configuration Setup\n\nSet up your routing preferences interactively:\n\n```bash\n/smart-router:configure\n```\n\nGuides you through:\n- Routing mode selection (auto/ask/context)\n- Display preferences (show reasoning)\n- Priority order (preferred plugins)\n- Exclusions (plugins to ignore)\n\n### Manual Registry Rebuild\n\nForce rebuild the plugin registry:\n\n```bash\n/smart-router:rebuild\n```\n\nUseful after:\n- Installing new plugins\n- Updating existing plugins\n- Debugging routing issues\n\n## How Registry Works\n\n### Build Process (On-Demand)\n\nThe registry is built automatically when the Smart Router skill is invoked:\n\n1. **Check if registry exists** - If `.claude/.cache/agent-registry.json` doesn't exist → build it\n2. **Hash-based cache invalidation** - Compute hash of plugin mtimes, compare to cached hash\n3. **Rebuild if needed** - Only rebuilds when plugins changed (added/updated/removed)\n4. **Scan sources:**\n   - `~/.claude/plugins/cache/` for installed plugins\n   - `.claude/commands/` for local commands (e.g., BMAD workflows)\n   - `~/.claude.json` for global MCPs\n   - Plugin-provided MCPs (from plugin.json mcpServers field)\n5. **Extract capabilities** from descriptions using keyword matching\n6. **Write registry** to `.claude/.cache/agent-registry.json`\n\n**Performance:** Registry builds in <3 seconds, cached for entire session\n\n### Registry Format\n\n```json\n{\n  \"version\": \"1.0\",\n  \"lastBuilt\": \"2025-12-19T12:00:00Z\",\n  \"hash\": \"abc123...\",\n  \"capabilities\": {\n    \"code-review\": [\n      {\n        \"plugin\": \"superpowers\",\n        \"type\": \"skill\",\n        \"entry\": \"skills/code-reviewer/SKILL.md\",\n        \"description\": \"General code review with TDD focus\"\n      }\n    ]\n  }\n}\n```\n\n### Ranking Logic\n\nTools are ranked by (in order of priority):\n1. **User Priority Order** (Highest) - From `.claude/smart-router.local.md` priorityOrder setting\n2. **Tool Specialty** (High) - How well tool description matches the task keywords\n3. **File Context** (Medium) - Game files prefer game-dev agents, etc.\n4. **Tool Type** (Low) - Skills > Agents > Commands > Workflows\n5. **Alphabetical** - Tie-breaker for equal scores\n\n## Examples\n\n### Example 1: Code Review\n\n```\nYou: \"Review this PR\"\n\nSmart Router:\n- Detects: code-review capability needed\n- Finds: 3 matching tools\n- Context: Backend API files\n- Routes to: pr-review-toolkit (specialized for PRs)\n```\n\n### Example 2: Brainstorming\n\n```\nYou: \"Help me design this feature\"\n\nSmart Router:\n- Detects: brainstorming capability needed\n- Finds: 2 matching tools\n- User preference: auto mode\n- Routes to: superpowers:brainstorming (highest priority)\n```\n\n### Example 3: Multiple Specializations\n\n```\nYou: \"Build a game with backend API\"\n\nSmart Router:\n- Detects: Multiple specializations needed\n- Suggests: Use git3 workflow for parallel agents\n- Routes to: dispatching-parallel-agents skill\n- Result: game-dev + backend-dev agents work concurrently\n```\n\n## Architecture\n\n```\n┌─────────────────────────────────────────┐\n│      User: \"I need code review\"         │\n└─────────────────────────────────────────┘\n                    │\n                    ▼\n┌─────────────────────────────────────────┐\n│       Smart Router Skill Invoked        │\n│   (Step 0: Build/Update Registry)       │\n└─────────────────────────────────────────┘\n                    │\n                    ▼\n┌─────────────────────────────────────────┐\n│   Check Registry Cache                  │\n│   - Registry exists?                    │\n│   - Hash matches? (plugins unchanged)   │\n└─────────────────────────────────────────┘\n           │                    │\n      No changes           Plugins changed\n           │                    │\n           ▼                    ▼\n┌─────────────────┐   ┌─────────────────────┐\n│  Use Cached     │   │  Rebuild Registry   │\n│  Registry       │   │  - Scan plugins     │\n│                 │   │  - Extract caps     │\n│                 │   │  - Compute hash     │\n│                 │   │  - Write cache      │\n└─────────────────┘   └─────────────────────┘\n           │                    │\n           └──────────┬─────────┘\n                      ▼\n┌─────────────────────────────────────────┐\n│      .claude/.cache/                    │\n│        agent-registry.json              │\n│   (Cached Plugin Capabilities)          │\n└─────────────────────────────────────────┘\n                    │\n                    ▼\n┌─────────────────────────────────────────┐\n│       Smart Router Skill                │\n│   (Rank, Select, Route)                 │\n│   - Collect matching tools              │\n│   - Rank by context & preferences       │\n│   - Route to best tool                  │\n└─────────────────────────────────────────┘\n```\n\n## Development\n\n### Prerequisites\n\n- Claude Code\n- pnpm (optional, for local development)\n\n### Testing Smart Router\n\nTo test the Smart Router skill:\n\n1. **Install the plugin:**\n```bash\n/plugin marketplace add Blockchain-Oracle/smart-router\n/plugin install smart-router@smart-router-marketplace\n```\n\n2. **Configure preferences:**\n```bash\n/smart-router:configure\n```\n\n3. **Test routing with a request:**\n```bash\n\"I need a code review\"\n```\n\nThe Smart Router skill will:\n- Build/update the registry on first use\n- Scan your plugins and capabilities\n- Show you matching tools and route to the best one\n\n4. **Verify registry was built:**\n```bash\ncat .claude/.cache/agent-registry.json\n```\n\nYou should see a JSON file with discovered plugins and capabilities.\n\n### Manual Registry Rebuild\n\nTo force a registry rebuild for testing:\n\n```bash\n/smart-router:rebuild\n```\n\nOr simply invoke the smart-router skill - it will detect changes and rebuild automatically.\n\n## Troubleshooting\n\n**Registry not building:**\n- Check `.claude/.cache/` directory exists and is writable\n- Try invoking smart-router skill to trigger rebuild\n- Verify plugin directories are readable (`~/.claude/plugins/cache/`)\n- Check permissions on `~/.claude.json` (for MCP discovery)\n\n**Tools not being suggested:**\n- Verify plugins are installed and enabled in `~/.claude/settings.json`\n- Check `.claude/smart-router.local.md` excludePlugins setting\n- Ensure plugin descriptions contain capability keywords (code-review, testing, etc.)\n- Run `/smart-router:rebuild` to force registry refresh\n\n**Wrong tool being selected:**\n- Adjust `priorityOrder` in `.claude/smart-router.local.md` settings\n- Switch `routingMode` to `ask` to see all available options\n- Check file context detection (are you in the right directory?)\n- Verify tool descriptions match your task\n\n**Registry seems stale:**\n- Smart Router uses hash-based cache invalidation\n- Registry automatically rebuilds when plugins change\n- To force rebuild: invoke smart-router skill or run `/smart-router:rebuild`\n\n## Contributing\n\nThis plugin is designed to work with the broader Claude Code plugin ecosystem. To add support for new capability types or improve ranking logic, see `skills/smart-router/references/` for architecture details.\n\n## License\n\nMIT\n\n## Author\n\n**Blockchain Oracle**\nEmail: BlockchainOracle.dev@gmail.com\n"
      },
      "plugins": [
        {
          "name": "smart-router",
          "description": "Plugin discovery and context-aware routing system. Automatically discovers installed plugins and intelligently routes to the best tool based on task context and user preferences.",
          "version": "0.1.0",
          "author": {
            "name": "Blockchain Oracle"
          },
          "source": "./",
          "category": "productivity",
          "tags": [
            "routing",
            "discovery",
            "automation",
            "orchestration",
            "plugin-management"
          ],
          "keywords": [
            "routing",
            "discovery",
            "orchestration",
            "plugin-management",
            "context-aware",
            "automation",
            "workflow"
          ],
          "categories": [
            "automation",
            "context-aware",
            "discovery",
            "orchestration",
            "plugin-management",
            "productivity",
            "routing",
            "workflow"
          ],
          "install_commands": [
            "/plugin marketplace add Blockchain-Oracle/smart-router",
            "/plugin install smart-router@smart-router-marketplace"
          ]
        }
      ]
    }
  ]
}