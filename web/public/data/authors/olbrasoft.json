{
  "author": {
    "id": "Olbrasoft",
    "display_name": "JiÅ™Ã­ TÅ¯ma",
    "avatar_url": "https://avatars.githubusercontent.com/u/35496927?u=7ee821360f3d19606ac98f028f8262084d3f60ca&v=4"
  },
  "marketplaces": [
    {
      "name": "ClaudeCode",
      "version": null,
      "description": "Loads pending tasks from VirtualAssistant database on session start and saves results on session stop",
      "repo_full_name": "Olbrasoft/ClaudeCode",
      "repo_url": "https://github.com/Olbrasoft/ClaudeCode",
      "repo_description": "TypeScript plugins for Claude Code integration - task dispatch, notifications, and automation",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2025-12-20T07:52:18Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"ClaudeCode\",\n  \"owner\": {\n    \"name\": \"Olbrasoft\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"task-dispatch\",\n      \"source\": \"./plugins/task-dispatch\",\n      \"description\": \"Loads pending tasks from VirtualAssistant database on session start and saves results on session stop\"\n    },\n    {\n      \"name\": \"notify\",\n      \"source\": \"./plugins/notify-plugin\",\n      \"description\": \"Send notifications to VirtualAssistant database\"\n    }\n  ]\n}\n",
        "README.md": "# ClaudeCode\n\nTypeScript MCP server pro integraci Claude Code s VirtualAssistant systÃ©mem.\n\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n\n## ğŸ“– Dokumentace\n\nKompletnÃ­ dokumentace je k dispozici v [docs/](./docs/) sloÅ¾ce:\n\n- **[Home](./docs/Home.md)** - Ãšvod a pÅ™ehled projektu\n- **[Architektura](./docs/Architecture.md)** - Jak systÃ©m funguje, diagramy\n- **[Instalace](./docs/Installation.md)** - NÃ¡vod na instalaci a konfiguraci\n- **[PouÅ¾itÃ­](./docs/Usage.md)** - Jak pouÅ¾Ã­vat MCP nÃ¡stroje\n- **[API Reference](./docs/API-Reference.md)** - Dokumentace MCP tools\n- **[Troubleshooting](./docs/Troubleshooting.md)** - Å˜eÅ¡enÃ­ problÃ©mÅ¯\n\n## ğŸ¯ Co to dÄ›lÃ¡?\n\nClaudeCode poskytuje MCP (Model Context Protocol) server, kterÃ½ umoÅ¾Åˆuje Claude Code:\n\n- ğŸ“¥ **PÅ™ijÃ­mat Ãºkoly** z fronty VirtualAssistant\n- âœ… **Reportovat dokonÄenÃ­** ÃºkolÅ¯ zpÄ›t do systÃ©mu  \n- ğŸ”— **Propojit** GitHub issues s Claude Code session\n\n## ğŸ—ï¸ Architektura\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                   ARCHITEKT (ÄlovÄ›k)                    â”‚\nâ”‚  VytvoÅ™Ã­ GitHub Issue â†’ label \"agent:claude\"            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                            â”‚\n                            â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚              VIRTUALASSISTANT (C# .NET)                 â”‚\nâ”‚  PostgreSQL â—„â”€â”€ REST API â—„â”€â”€ Webhook Handler            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                            â”‚\n                            â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    CLAUDE CODE                          â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚\nâ”‚  â”‚     MCP Server (TypeScript)                â”‚        â”‚\nâ”‚  â”‚  â€¢ get_pending_task                        â”‚        â”‚\nâ”‚  â”‚  â€¢ complete_task                           â”‚        â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚\nâ”‚                       â”‚                                 â”‚\nâ”‚                       â–¼                                 â”‚\nâ”‚              Claude AI Agent                            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## ğŸš€ RychlÃ½ start\n\n```bash\n# KlonovÃ¡nÃ­\ngit clone https://github.com/Olbrasoft/ClaudeCode.git\ncd ClaudeCode/mcp-task-dispatch\n\n# Instalace a build\nnpm install\nnpm run build\n\n# Konfigurace Claude Code (~/.claude/settings.json)\n# Viz docs/Installation.md\n```\n\n## ğŸ“‹ MCP Tools\n\n| Tool | Popis |\n|------|-------|\n| `get_pending_task` | NaÄte nejstarÅ¡Ã­ pending Ãºkol z fronty |\n| `complete_task` | OznaÄÃ­ Ãºkol jako dokonÄenÃ½ s vÃ½sledkem |\n\n## ğŸ“¦ Struktura projektu\n\n```\nClaudeCode/\nâ”œâ”€â”€ docs/                    # ğŸ“– Dokumentace (wiki)\nâ”‚   â”œâ”€â”€ Home.md\nâ”‚   â”œâ”€â”€ Architecture.md\nâ”‚   â”œâ”€â”€ Installation.md\nâ”‚   â”œâ”€â”€ Usage.md\nâ”‚   â”œâ”€â”€ API-Reference.md\nâ”‚   â””â”€â”€ Troubleshooting.md\nâ”œâ”€â”€ mcp-task-dispatch/       # ğŸ”§ MCP Server (TypeScript)\nâ”‚   â”œâ”€â”€ src/\nâ”‚   â”‚   â”œâ”€â”€ index.ts         # Entry point\nâ”‚   â”‚   â”œâ”€â”€ api-client.ts    # VirtualAssistant API client\nâ”‚   â”‚   â””â”€â”€ types.ts         # TypeScript interfaces\nâ”‚   â”œâ”€â”€ package.json\nâ”‚   â””â”€â”€ tsconfig.json\nâ””â”€â”€ README.md\n```\n\n## ğŸ”— SouvisejÃ­cÃ­ projekty\n\n- [VirtualAssistant](https://github.com/Olbrasoft/VirtualAssistant) - Backend systÃ©m pro sprÃ¡vu AI agentÅ¯\n- [Claude Code](https://claude.ai/code) - Anthropic CLI pro Claude\n\n## ğŸ“Š Status\n\nğŸš§ **Ve vÃ½voji** - Viz [Issue #7](https://github.com/Olbrasoft/ClaudeCode/issues/7) pro aktuÃ¡lnÃ­ stav.\n\n### Sub-tasks\n\n- [ ] #8 Project Setup\n- [ ] #9 API Client\n- [ ] #10 get_pending_task tool\n- [ ] #11 complete_task tool\n- [ ] #12 MCP Server integration\n- [ ] #13 Configuration & Testing\n\n## ğŸ“„ License\n\nMIT\n",
        "plugins/task-dispatch/README.md": "# Task Dispatch Plugin\n\nIntegrates Claude Code with VirtualAssistant task queue using hooks.\n\n## Architecture\n\n```\n~/.claude/plugins/task-dispatch/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â””â”€â”€ plugin.json          # Plugin manifest\nâ”œâ”€â”€ hooks/\nâ”‚   â””â”€â”€ hooks.json           # SessionStart + Stop hooks\nâ”œâ”€â”€ scripts/\nâ”‚   â”œâ”€â”€ load-task.sh         # Query DB â†’ output task context\nâ”‚   â””â”€â”€ save-result.sh       # Update DB with result\nâ””â”€â”€ .env                     # Database connection settings\n```\n\n## Flow\n\n1. **Session Start** â†’ `load-task.sh` â†’ loads pending task from DB â†’ injects into Claude's context\n2. **Claude works** on the task\n3. **Session Stop** â†’ `save-result.sh` â†’ saves result to DB, notifies TTS\n\n## Hooks\n\n| Event | Script | Purpose |\n|-------|--------|---------|\n| SessionStart | load-task.sh | Load pending task for Claude agent |\n| Stop | save-result.sh | Save session result, mark task completed |\n\n## Database Schema\n\nUses VirtualAssistant's PostgreSQL database:\n\n**Table: `agent_tasks`**\n- `id` - Task ID\n- `github_issue_url` - Full GitHub issue URL\n- `github_issue_number` - Issue number\n- `summary` - Task description\n- `target_agent_id` - Claude's agent ID\n- `status` - pending/approved/notified/sent/completed/cancelled\n- `result` - Completion summary\n- `claude_session_id` - Session ID for tracking\n- `sent_at`, `completed_at` - Timestamps\n\n## Installation\n\n1. Copy plugin to Claude plugins directory:\n```bash\ncp -r plugins/task-dispatch ~/.claude/plugins/\n```\n\n2. Configure database connection in `.env`:\n```bash\nDB_HOST=localhost\nDB_PORT=5432\nDB_NAME=virtual_assistant\nDB_USER=postgres\nDB_PASSWORD=postgres\n```\n\n3. Ensure `jq` and `psql` are installed:\n```bash\nsudo apt install jq postgresql-client\n```\n\n## Usage\n\nWhen Claude Code starts with a pending task:\n- The task description is automatically injected into context\n- Task status changes from \"pending/approved\" to \"sent\"\n- `claude_session_id` is set for tracking\n\nWhen Claude Code session ends:\n- Result is extracted from transcript\n- Task status changes to \"completed\"\n- TTS notification is sent (optional)\n\n## Manual Testing\n\nTest load script:\n```bash\necho '{\"session_id\": \"test-123\", \"cwd\": \"/home/user\"}' | ./scripts/load-task.sh\n```\n\nTest save script:\n```bash\necho '{\"session_id\": \"test-123\", \"transcript_path\": \"/tmp/test.jsonl\"}' | ./scripts/save-result.sh\n```\n\n## Requirements\n\n- PostgreSQL client (`psql`)\n- `jq` for JSON parsing\n- VirtualAssistant database running\n- Agent \"claude\" registered in `agents` table\n\n## Related Issues\n\n- [Issue #1](https://github.com/Olbrasoft/ClaudeCode/issues/1) - PoC: Task Dispatch Plugin\n- [Issue #2](https://github.com/Olbrasoft/ClaudeCode/issues/2) - Plugin skeleton with hooks.json\n- [Issue #3](https://github.com/Olbrasoft/ClaudeCode/issues/3) - SessionStart hook\n- [Issue #4](https://github.com/Olbrasoft/ClaudeCode/issues/4) - Stop hook\n",
        "plugins/notify-plugin/README.md": "# Notify Plugin for Claude Code\n\nPlugin that provides a `/notify` command to send notifications to VirtualAssistant database.\n\n## Installation\n\n### 1. Add marketplace (if not already added)\n```bash\n/plugin marketplace add /home/jirka/GitHub/Olbrasoft/ClaudeCode\n```\n\n### 2. Install the plugin\n```bash\n/plugin install notify@ClaudeCode\n```\n\n### 3. Restart Claude Code\nRestart to apply changes.\n\n## Usage\n\n```\n/notify <message>\n```\n\n### Examples\n```\n/notify Zahajuji praci na issue #255\n/notify Vytvoril jsem Notification entitu\n/notify Dokoncil jsem issue #255\n```\n\n## API Endpoint\n\nThe plugin sends notifications to:\n- **URL**: `http://localhost:5055/api/notifications`\n- **Method**: POST\n- **Headers**: `Content-Type: application/json`\n- **Body**: `{\"agentId\": \"Claude Code\", \"text\": \"<message>\"}`\n\n## Requirements\n\n- VirtualAssistant service running on localhost:5055\n- `/api/notifications` endpoint available\n"
      },
      "plugins": [
        {
          "name": "task-dispatch",
          "source": "./plugins/task-dispatch",
          "description": "Loads pending tasks from VirtualAssistant database on session start and saves results on session stop",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Olbrasoft/ClaudeCode",
            "/plugin install task-dispatch@ClaudeCode"
          ]
        },
        {
          "name": "notify",
          "source": "./plugins/notify-plugin",
          "description": "Send notifications to VirtualAssistant database",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Olbrasoft/ClaudeCode",
            "/plugin install notify@ClaudeCode"
          ]
        }
      ]
    }
  ]
}