{
  "author": {
    "id": "shihwesley",
    "display_name": "Wesley Shih",
    "avatar_url": "https://avatars.githubusercontent.com/u/10120704?v=4"
  },
  "marketplaces": [
    {
      "name": "mercator-ai",
      "version": null,
      "description": "Merkle-enhanced codebase mapping for AI agents with O(1) change detection",
      "repo_full_name": "shihwesley/mercator-ai",
      "repo_url": "https://github.com/shihwesley/mercator-ai",
      "repo_description": "Merkle-enhanced codebase mapping for AI agents. O(1) change detection, zero-token staleness prevention.",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-02-06T20:17:39Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"mercator-ai\",\n  \"owner\": {\n    \"name\": \"shihwesley\",\n    \"url\": \"https://github.com/shihwesley\"\n  },\n  \"metadata\": {\n    \"description\": \"Merkle-enhanced codebase mapping for AI agents with O(1) change detection\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"mercator-ai\",\n      \"source\": \"./plugins/mercator-ai\",\n      \"description\": \"Merkle-enhanced codebase mapping for AI agents. O(1) change detection, zero-token staleness prevention, parallel subagent analysis. Creates docs/CODEBASE_MAP.md and docs/.mercator.json merkle manifest.\",\n      \"version\": \"1.0.0\",\n      \"category\": \"developer tools\",\n      \"keywords\": [\"codebase\", \"architecture\", \"documentation\", \"mapping\", \"merkle-tree\", \"change-detection\", \"subagents\", \"onboarding\"],\n      \"license\": \"MIT\",\n      \"repository\": \"https://github.com/shihwesley/mercator-ai\"\n    }\n  ]\n}\n",
        "README.md": "# Mercator AI\n\nMerkle-enhanced codebase mapping for AI agents. Maps codebases of any size using parallel subagents, with O(1) change detection and zero-token staleness prevention.\n\n> Built upon [Bootoshi's Cartographer](https://github.com/kingbootoshi/cartographer), enhanced with Merkle tree change detection, post-commit hooks, and a map-first exploration protocol.\n\n## What's Different from Cartographer?\n\n| Feature | Cartographer | Mercator AI |\n|---------|-------------|-------------|\n| Codebase scanning | Token counting | Token counting + SHA-256 hashing |\n| Change detection | `git log --since` | Merkle tree O(1) root hash comparison |\n| Update mode | Re-scan entire codebase | `--diff` against manifest, only re-explore changed files |\n| Staleness prevention | Manual re-run | Post-commit hook auto-refreshes manifest (zero tokens) |\n| Manifest | None | `docs/.mercator.json` with full merkle tree |\n| TLDR integration | None | Auto-invalidates cached summaries for changed files |\n| Exploration protocol | None | Map-first protocol documentation for agents |\n| Git dependency | Required for updates | Optional — hash-based diff works without git |\n\n## Install\n\n### Add the marketplace and install\n\n```\n/plugin marketplace add shihwesley/mercator-ai\n/plugin install mercator-ai@mercator-ai\n```\n\nOr via CLI:\n\n```bash\nclaude plugin marketplace add shihwesley/mercator-ai\nclaude plugin install mercator-ai@mercator-ai\n```\n\n### Manual (GitHub)\n\n```bash\ngit clone https://github.com/shihwesley/mercator-ai.git ~/.claude/plugins/mercator-ai\n```\n\n### Dependencies\n\nThe scanner requires tiktoken. With UV (recommended), it's automatic:\n\n```bash\nuv run scan-codebase.py  # tiktoken auto-installed\n```\n\nWithout UV:\n```bash\npip install tiktoken\n```\n\n## Usage\n\n### Map a codebase\n\n```\n/mercator-ai\n```\n\nOr say: \"map this codebase\", \"create codebase map\", \"document the architecture\"\n\nThis creates:\n- `docs/CODEBASE_MAP.md` — Architecture documentation with diagrams, module guides, data flows\n- `docs/.mercator.json` — Merkle manifest for change tracking\n\n### Check for changes (O(1))\n\n```bash\nuv run scan-codebase.py . --diff docs/.mercator.json\n```\n\nReturns instantly: `has_changes: true/false` with lists of changed/added/removed files.\n\n### Auto-refresh on commit\n\nThe post-commit hook (`hooks/mercator-auto-refresh.sh`) automatically:\n1. Detects git commits\n2. Runs `--diff` against the manifest\n3. Refreshes hashes for changed files (~2s, zero tokens)\n4. Invalidates TLDR cache entries (if present)\n5. Flags structural changes that need a full `/mercator-ai` run\n\n**Cost: ~2 seconds of Python. No API calls. No tokens.**\n\n## How It Works\n\n```\n/mercator-ai invoked\n        |\n        v\n+---------------------------------------+\n|  1. Run scan-codebase.py              |\n|     - Recursive file tree             |\n|     - Token count + SHA-256 per file  |\n|     - Merkle tree with root hash      |\n|     - Respects .gitignore             |\n+---------------------------------------+\n        |\n        v\n+---------------------------------------+\n|  2. Plan subagent assignments         |\n|     - Group files by module           |\n|     - Balance token budgets           |\n|     - Skip unchanged modules (diff)   |\n+---------------------------------------+\n        |\n        v\n+---------------------------------------+\n|  3. Spawn Sonnet subagents PARALLEL   |\n|     - Each reads assigned files       |\n|     - Analyzes purpose, dependencies  |\n|     - Returns structured summary      |\n+---------------------------------------+\n        |\n        v\n+---------------------------------------+\n|  4. Synthesize all reports            |\n|     - Merge subagent outputs          |\n|     - Build architecture diagram      |\n|     - Create navigation guides        |\n+---------------------------------------+\n        |\n        v\n+---------------------------------------+\n|  5. Write outputs                     |\n|     - docs/CODEBASE_MAP.md            |\n|     - docs/.mercator.json (manifest)  |\n|     - Update CLAUDE.md with summary   |\n+---------------------------------------+\n        |\n        v\n+---------------------------------------+\n|  6. Post-commit hook keeps it fresh   |\n|     - Auto-refresh manifest on commit |\n|     - Zero tokens, ~2 seconds         |\n+---------------------------------------+\n```\n\n## Scanner CLI\n\n```bash\n# Full scan with merkle tree (JSON)\nuv run scan-codebase.py .\n\n# Human-readable tree with token counts\nuv run scan-codebase.py . --format tree\n\n# Tree with file hashes visible\nuv run scan-codebase.py . --format tree --show-hash\n\n# Just the merkle tree (for manifest storage)\nuv run scan-codebase.py . --format merkle\n\n# Compact: files sorted by token count\nuv run scan-codebase.py . --format compact\n\n# Diff against previous manifest\nuv run scan-codebase.py . --diff docs/.mercator.json\n```\n\n## Map-First Exploration Protocol\n\nSee [docs/MAP_FIRST_PROTOCOL.md](docs/MAP_FIRST_PROTOCOL.md) for the full protocol.\n\n**TL;DR:** Always read `docs/CODEBASE_MAP.md` before Glob/Grep. Use the manifest to skip unchanged files. Target specific files based on the map.\n\n| Task | Blind Scan | Map-First |\n|------|-----------|-----------|\n| \"Where is auth?\" | ~15k tokens | ~2k tokens |\n| \"Understand API layer\" | ~8k tokens | ~1.5k tokens |\n| \"Any changes?\" | ~15k tokens | ~50 tokens |\n\n## Merkle Tree\n\nThe `.mercator.json` manifest contains a hierarchical merkle tree:\n\n```\nroot_hash: \"a1b2c3d4e5f6\"        <- O(1) \"anything changed?\"\n├── src/: \"f1e2d3c4b5a6\"          <- O(1) \"src/ changed?\"\n│   ├── api/: \"...\"               <- drill to changed module\n│   │   ├── routes.ts: \"...\"      <- individual file hash\n│   │   └── auth.ts: \"...\"\n│   └── lib/: \"...\"\n└── tests/: \"...\"\n```\n\n- **O(1) staleness check**: Compare root hash\n- **O(log n) change localization**: Walk down tree to find changed modules\n- **Works without git**: Pure hash-based comparison\n\n## Output Structure\n\nThe generated `docs/CODEBASE_MAP.md` includes:\n\n- **System Overview** — Mermaid architecture diagram\n- **Directory Structure** — Annotated file tree\n- **Module Guide** — Per-module documentation with purpose, exports, dependencies\n- **Data Flow** — Mermaid sequence diagrams for key flows\n- **Conventions** — Naming, patterns, style\n- **Gotchas** — Non-obvious behaviors and warnings\n- **Navigation Guide** — How to add features, modify systems\n\n## Updating\n\n### Enable auto-updates (recommended)\n\nAfter installing, enable auto-updates so you get new versions automatically at startup:\n\n1. Run `/plugin` to open the plugin manager\n2. Go to the **Marketplaces** tab\n3. Select **mercator-ai**\n4. Select **Enable auto-update**\n\nClaude Code will check for updates on every startup and notify you when a new version is available.\n\n### Manual update\n\n```\n/plugin marketplace update mercator-ai\n/plugin update mercator-ai@mercator-ai\n```\n\n### For maintainers\n\nUse the release script to publish updates:\n\n```bash\n./scripts/release.sh patch    # 1.0.0 → 1.0.1 (bug fix)\n./scripts/release.sh minor    # 1.0.0 → 1.1.0 (new feature)\n./scripts/release.sh major    # 1.0.0 → 2.0.0 (breaking change)\n```\n\n## Attribution\n\nMercator AI is built upon [Cartographer](https://github.com/kingbootoshi/cartographer) by [Bootoshi](https://github.com/kingbootoshi). See [ATTRIBUTION.md](ATTRIBUTION.md) for details on what came from the original and what was added.\n\n## License\n\nMIT — See [LICENSE](LICENSE) for dual copyright notice.\n"
      },
      "plugins": [
        {
          "name": "mercator-ai",
          "source": "./plugins/mercator-ai",
          "description": "Merkle-enhanced codebase mapping for AI agents. O(1) change detection, zero-token staleness prevention, parallel subagent analysis. Creates docs/CODEBASE_MAP.md and docs/.mercator.json merkle manifest.",
          "version": "1.0.0",
          "category": "developer tools",
          "keywords": [
            "codebase",
            "architecture",
            "documentation",
            "mapping",
            "merkle-tree",
            "change-detection",
            "subagents",
            "onboarding"
          ],
          "license": "MIT",
          "repository": "https://github.com/shihwesley/mercator-ai",
          "categories": [
            "architecture",
            "change-detection",
            "codebase",
            "developer-tools",
            "documentation",
            "mapping",
            "merkle-tree",
            "onboarding",
            "subagents"
          ],
          "install_commands": [
            "/plugin marketplace add shihwesley/mercator-ai",
            "/plugin install mercator-ai@mercator-ai"
          ]
        }
      ]
    }
  ]
}