{
  "author": {
    "id": "shihwesley",
    "display_name": "Wesley Shih",
    "avatar_url": "https://avatars.githubusercontent.com/u/10120704?v=4"
  },
  "marketplaces": [
    {
      "name": "shihwesley-plugins",
      "version": null,
      "description": "Merkle-enhanced codebase mapping for AI agents with O(1) change detection",
      "repo_full_name": "shihwesley/mercator-ai",
      "repo_url": "https://github.com/shihwesley/mercator-ai",
      "repo_description": "Merkle-enhanced codebase mapping for AI agents. O(1) change detection, zero-token staleness prevention.",
      "signals": {
        "stars": 1,
        "forks": 0,
        "pushed_at": "2026-02-13T20:10:38Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"shihwesley-plugins\",\n  \"owner\": {\n    \"name\": \"shihwesley\",\n    \"email\": \"shih.wesley@gmail.com\",\n    \"url\": \"https://github.com/shihwesley\"\n  },\n  \"metadata\": {\n    \"description\": \"Merkle-enhanced codebase mapping for AI agents with O(1) change detection\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"mercator-ai\",\n      \"source\": \"./plugins/mercator-ai\",\n      \"description\": \"Merkle-enhanced codebase mapping for AI agents. O(1) change detection, zero-token staleness prevention, parallel subagent analysis. Creates docs/CODEBASE_MAP.md and docs/.mercator.json merkle manifest.\",\n      \"version\": \"1.0.0\",\n      \"category\": \"developer tools\",\n      \"keywords\": [\"codebase\", \"architecture\", \"documentation\", \"mapping\", \"merkle-tree\", \"change-detection\", \"subagents\", \"onboarding\"],\n      \"license\": \"MIT\",\n      \"repository\": \"https://github.com/shihwesley/shihwesley-plugins\"\n    }\n  ]\n}\n",
        "README.md": "# Mercator AI\n\nMerkle-enhanced codebase mapping for AI agents. Maps codebases of any size using parallel subagents, with O(1) change detection and zero-token staleness prevention.\n\n> Built upon [Bootoshi's Cartographer](https://github.com/kingbootoshi/cartographer), enhanced with Merkle tree change detection, post-commit hooks, and a map-first exploration protocol.\n\n## Table of Contents\n\n- [What's Different from Cartographer?](#whats-different-from-cartographer)\n- [Install](#install)\n- [Usage](#usage)\n- [How It Works](#how-it-works)\n- [Scanner CLI](#scanner-cli)\n- [Map-First Exploration Protocol](#map-first-exploration-protocol)\n- [Merkle Tree](#merkle-tree)\n- [Output Structure](#output-structure)\n- [Updating](#updating)\n- [Attribution](#attribution)\n- [License](#license)\n\n## What's Different from Cartographer?\n\n[Cartographer](https://github.com/kingbootoshi/cartographer) is a Claude Code plugin by Bootoshi that maps codebases using parallel subagents and token counting. Mercator AI started as a fork and adds merkle-based change detection so you don't re-scan files that haven't changed.\n\n| Feature | Cartographer | Mercator AI |\n|---------|-------------|-------------|\n| Codebase scanning | Token counting | Token counting + SHA-256 hashing |\n| Change detection | `git log --since` | Merkle tree O(1) root hash comparison |\n| Update mode | Re-scan entire codebase | `--diff` against manifest, only re-explore changed files |\n| Staleness prevention | Manual re-run | Post-commit hook auto-refreshes manifest (zero tokens) |\n| Manifest | None | `docs/.mercator.json` with full merkle tree |\n| TLDR integration | None | Auto-invalidates cached summaries for changed files |\n| Exploration protocol | None | Map-first protocol documentation for agents |\n| Git dependency | Required for updates | Optional — hash-based diff works without git |\n\n## Install\n\n### Add the marketplace and install\n\n```\n/plugin marketplace add shihwesley/shihwesley-plugins\n/plugin install mercator-ai@shihwesley-plugins\n```\n\nOr via CLI:\n\n```bash\nclaude plugin marketplace add shihwesley/shihwesley-plugins\nclaude plugin install mercator-ai@shihwesley-plugins\n```\n\n### Manual (GitHub)\n\n```bash\ngit clone https://github.com/shihwesley/shihwesley-plugins.git ~/.claude/plugins/mercator-ai\n```\n\n### Dependencies\n\nThe scanner requires tiktoken. With UV (recommended), it's automatic:\n\n```bash\nuv run scan-codebase.py  # tiktoken auto-installed\n```\n\nWithout UV:\n```bash\npip install tiktoken\n```\n\n## Usage\n\n### Map a codebase\n\n```\n/mercator-ai\n```\n\nOr say: \"map this codebase\", \"create codebase map\", \"document the architecture\"\n\nThis creates:\n- `docs/CODEBASE_MAP.md` — Architecture documentation with diagrams, module guides, data flows\n- `docs/.mercator.json` — Merkle manifest for change tracking\n\n### Check for changes (O(1))\n\n```bash\nuv run scan-codebase.py . --diff docs/.mercator.json\n```\n\nReturns instantly: `has_changes: true/false` with lists of changed/added/removed files.\n\n### Auto-refresh on commit\n\nThe post-commit hook (`hooks/mercator-auto-refresh.sh`) automatically:\n1. Detects git commits\n2. Runs `--diff` against the manifest\n3. Refreshes hashes for changed files (~2s, zero tokens)\n4. Invalidates TLDR cache entries (if present)\n5. Flags structural changes that need a full `/mercator-ai` run\n\n**Cost: ~2 seconds of Python. No API calls. No tokens.**\n\n## How It Works\n\n```mermaid\nflowchart TD\n    A[\"/mercator-ai invoked\"] --> B[\"1. scan-codebase.py<br>Recursive file tree<br>Token count + SHA-256<br>Merkle tree + root hash\"]\n    B --> C[\"2. Plan subagent assignments<br>Group files by module<br>Balance token budgets<br>Skip unchanged modules\"]\n    C --> D[\"3. Spawn Sonnet subagents<br>(parallel — one per module group)<br>Read files, analyze dependencies<br>Return structured summaries\"]\n    D --> E[\"4. Synthesize reports<br>Merge subagent outputs<br>Build architecture diagrams<br>Create navigation guides\"]\n    E --> F[\"5. Write outputs<br>docs/CODEBASE_MAP.md<br>docs/.mercator.json<br>Update CLAUDE.md\"]\n    F --> G[\"6. Post-commit hook<br>Auto-refresh manifest on commit<br>Zero tokens, ~2 seconds\"]\n```\n\n\n## Map-First Exploration Protocol\n\nSee [docs/MAP_FIRST_PROTOCOL.md](docs/MAP_FIRST_PROTOCOL.md) for the full protocol.\n\n**TL;DR:** Always read `docs/CODEBASE_MAP.md` before Glob/Grep. Use the manifest to skip unchanged files. Target specific files based on the map.\n\n| Task | Blind Scan | Map-First |\n|------|-----------|-----------|\n| \"Where is auth?\" | ~15k tokens | ~2k tokens |\n| \"Understand API layer\" | ~8k tokens | ~1.5k tokens |\n| \"Any changes?\" | ~15k tokens | ~50 tokens |\n\n## Merkle Tree\n\nThe `.mercator.json` manifest contains a hierarchical merkle tree:\n\n```\nroot_hash: \"a1b2c3d4e5f6\"        <- O(1) \"anything changed?\"\n├── src/: \"f1e2d3c4b5a6\"          <- O(1) \"src/ changed?\"\n│   ├── api/: \"...\"               <- drill to changed module\n│   │   ├── routes.ts: \"...\"      <- individual file hash\n│   │   └── auth.ts: \"...\"\n│   └── lib/: \"...\"\n└── tests/: \"...\"\n```\n\n- **O(1) staleness check**: Compare root hash\n- **O(log n) change localization**: Walk down tree to find changed modules\n- **Works without git**: Pure hash-based comparison\n\n## Output Structure\n\nThe generated `docs/CODEBASE_MAP.md` includes:\n\n- **System Overview** — Mermaid architecture diagram\n- **Directory Structure** — Annotated file tree\n- **Module Guide** — Per-module documentation with purpose, exports, dependencies\n- **Data Flow** — Mermaid sequence diagrams for key flows\n- **Conventions** — Naming, patterns, style\n- **Gotchas** — Non-obvious behaviors and warnings\n- **Navigation Guide** — How to add features, modify systems\n\n## Updating\n\n### Enable auto-updates (recommended)\n\nAfter installing, enable auto-updates so you get new versions automatically at startup:\n\n1. Run `/plugin` to open the plugin manager\n2. Go to the **Marketplaces** tab\n3. Select **mercator-ai**\n4. Select **Enable auto-update**\n\nClaude Code will check for updates on every startup and notify you when a new version is available.\n\n### Manual update\n\n```\n/plugin marketplace update mercator-ai\n/plugin update mercator-ai@mercator-ai\n```\n\n### For maintainers\n\nUse the release script to publish updates:\n\n```bash\n./scripts/release.sh patch    # 1.0.0 → 1.0.1 (bug fix)\n./scripts/release.sh minor    # 1.0.0 → 1.1.0 (new feature)\n./scripts/release.sh major    # 1.0.0 → 2.0.0 (breaking change)\n```\n\n## Attribution\n\nMercator AI is built upon [Cartographer](https://github.com/kingbootoshi/cartographer) by [Bootoshi](https://github.com/kingbootoshi). See [ATTRIBUTION.md](ATTRIBUTION.md) for details on what came from the original and what was added.\n\n## License\n\nMIT — See [LICENSE](LICENSE) for dual copyright notice.\n"
      },
      "plugins": [
        {
          "name": "mercator-ai",
          "source": "./plugins/mercator-ai",
          "description": "Merkle-enhanced codebase mapping for AI agents. O(1) change detection, zero-token staleness prevention, parallel subagent analysis. Creates docs/CODEBASE_MAP.md and docs/.mercator.json merkle manifest.",
          "version": "1.0.0",
          "category": "developer tools",
          "keywords": [
            "codebase",
            "architecture",
            "documentation",
            "mapping",
            "merkle-tree",
            "change-detection",
            "subagents",
            "onboarding"
          ],
          "license": "MIT",
          "repository": "https://github.com/shihwesley/shihwesley-plugins",
          "categories": [
            "architecture",
            "change-detection",
            "codebase",
            "developer-tools",
            "documentation",
            "mapping",
            "merkle-tree",
            "onboarding",
            "subagents"
          ],
          "install_commands": [
            "/plugin marketplace add shihwesley/mercator-ai",
            "/plugin install mercator-ai@shihwesley-plugins"
          ]
        }
      ]
    }
  ]
}