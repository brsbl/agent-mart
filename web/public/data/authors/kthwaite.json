{
  "author": {
    "id": "kthwaite",
    "display_name": "Kit Thwaite",
    "avatar_url": "https://avatars.githubusercontent.com/u/28732700?u=2333423b14eec7635df0a37d4b900fa8f6b9d741&v=4"
  },
  "marketplaces": [
    {
      "name": "tak",
      "version": null,
      "description": "Git-native task management plugins for agentic workflows",
      "repo_full_name": "kthwaite/tak",
      "repo_url": "https://github.com/kthwaite/tak",
      "repo_description": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-02-11T01:02:26Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n\t\"name\": \"tak\",\n\t\"owner\": {\n\t\t\"name\": \"Kit Thwaite\"\n\t},\n\t\"metadata\": {\n\t\t\"description\": \"Git-native task management plugins for agentic workflows\"\n\t},\n\t\"plugins\": [\n\t\t{\n\t\t\t\"name\": \"tak\",\n\t\t\t\"source\": \"./claude-plugin\",\n\t\t\t\"description\": \"Git-native task management for agentic workflows. Provides skills for task tracking, epic planning, and multi-agent coordination via the tak CLI.\",\n\t\t\t\"version\": \"0.1.0\",\n\t\t\t\"keywords\": [\"task-management\", \"agentic\", \"git-native\", \"multi-agent\"]\n\t\t}\n\t]\n}\n",
        "README.md": "# tak\n\nGit-native **stigmergic** task manager for agentic workflows.\n\nTak is built around a **bottom-up, society-of-agents** model: specialized workers coordinate through shared artifacts (tasks, dependencies, reservations, and coordination notes) instead of waiting on a central planner. Tasks live as JSON files in `.tak/tasks/`, committed alongside your code. A gitignored SQLite index provides fast queries, while mesh + blackboard runtime data supports live multi-agent coordination.\n\n## Install\n\n```bash\ncargo install --path .\n```\n\n## Quick Start\n\n```bash\n# Initialize in a git repository\ntak init\n\n# Create tasks\ntak create \"Set up database\" --kind task\ntak create \"Refine epic scope\" --kind meta\ntak create \"Write API endpoints\" --depends-on 0000000000000001\ntak create \"Add tests\" --depends-on 0000000000000002\n\n# See the dependency tree\ntak tree --format pretty\n\n# Preview available work\ntak next\n\n# Claim and complete a task (atomic: finds + starts in one step)\ntak claim --assignee agent-1\ntak finish 0000000000000001\n\n# Reassign a stale in-progress task safely\ntak takeover 0000000000000001 --assignee agent-2 --inactive-secs 1800\n\n# Check what's unblocked\ntak list --available\n\n# Or run the CLI-native work loop\n# (default action is start/resume)\ntak work --assignee agent-1\ntak work status --assignee agent-1\ntak work done --assignee agent-1 --pause\ntak work stop --assignee agent-1\n```\n\n**Task ID input forms:** every `<task-id>` argument accepts a full canonical 16-char hex ID, a unique hex prefix (case-insensitive), or a legacy decimal ID. Resolution is exact-match first, then unique prefix; ambiguous prefixes error.\n\nExamples:\n- `tak show ef94`\n- `tak depend b48b --on ef94`\n\n**Task ID output defaults (phase-2):** human-facing pretty/minimal/work-loop surfaces now default to canonical 16-char hex task IDs. JSON output remains machine-stable (task-id fields are canonical hex; existing error codes/contracts are unchanged).\n\nMigration tip: scripts should parse JSON fields (`id`, `parent`, `depends_on[*].id`, etc.) instead of scraping pretty/minimal text output.\n\n### `tak work done` closeout helper\n\nUse `tak work done` when you want one command to close the current unit and clean up loop state.\n\n```bash\n# Finish current task + release your reservations, keep loop active for next claim\ntak work done --assignee agent-1\n\n# Finish + release + pause loop (no auto-claim until you restart)\ntak work done --assignee agent-1 --pause\n```\n\nTroubleshooting:\n\n- If no current task is attached, `tak work done` is idempotent and reports a `no_current_task` transition.\n- If loop state points at a stale/non-owned task, it reports `detached_without_finish`, clears the stale pointer, and still releases reservations.\n- If reservation release fails, JSON output includes `done.reservation_release.error` for follow-up.\n\n### `tak takeover` stale-owner transfer helper\n\nUse `tak takeover` when a task is still `in_progress` but the current owner appears stale.\n\n```bash\n# Only take over when owner inactivity meets threshold\ntak takeover <task-id> --assignee agent-2 --inactive-secs 1800\n\n# Emergency override (bypass inactivity guardrail)\ntak takeover <task-id> --assignee agent-2 --force\n```\n\nGuardrails and rollback:\n\n- Default safety path requires stale ownership evidence (`inactive-secs` or default mesh registration TTL).\n- Success output includes `previous_owner`, `decision`, and resulting assignment/state in json/pretty/minimal modes.\n- If you took ownership too early, hand it back immediately:\n  - `tak handoff <task-id> --summary \"takeover reverted; owner still active\"`\n  - or `tak unassign <task-id>` and coordinate via blackboard.\n\n## Stigmergic Coordination Model\n\nTak is optimized for **coordination through shared state** in a Minsky-style \"society of mind\": many narrow specialists, one shared memory.\n\n- **Tasks + dependencies** (`.tak/tasks/*.json`) are the durable plan and execution truth.\n- **Mesh runtime** (`tak mesh ...`) handles live presence, short-lived signals, and file-path reservations.\n- **Blackboard notes** (`tak blackboard ...`) capture durable team-level context, blockers, and handoffs.\n- **Task sidecars** (`tak context`, `tak log`) preserve local implementation context and lifecycle history.\n\nBottom-up principles:\n- **Local decisions first:** agents choose and execute the next viable move from current context.\n- **Global order emerges:** priority + dependencies + availability produce system-level flow.\n- **Coordination is environmental:** progress signals live in artifacts, not in a central conductor.\n\nIn practice: claim work, reserve paths, post meaningful updates in shared channels, run learnings closeout, then finish/handoff and release reservations.\n\n## Commands\n\nTask ID arguments across commands accept canonical hex, unique hex prefixes, and legacy decimal IDs.\n\n| Command | Description |\n|---------|-------------|\n| `tak init` | Initialize `.tak/` in the current repository |\n| `tak create <title>` | Create a task (`--kind`, `--parent`, `--depends-on`, contract + planning flags) |\n| `tak import <source>` | Import strict YAML v2 plans (`epic` + `features` + `tasks`; `--dry-run` previews without writing) |\n| `tak show <task-id>` / `tak list` / `tak tree [task-id]` | Query tasks and hierarchy |\n| `tak edit <task-id>` | Update task metadata (`--title`, `--kind`, tags, contract/planning, `--pr`) |\n| `tak claim` / `tak start <task-id>` | Start work (atomic claim preferred in multi-agent mode) |\n| `tak takeover <task-id>` | Transfer stale in-progress ownership with guardrails (`--inactive-secs`, `--force`) |\n| `tak work [start\\|status\\|stop\\|done]` | CLI-native work loop controller (resume/claim, inspect state, stop loop, or finish+release with optional pause) |\n| `tak finish <task-id>` / `tak handoff <task-id>` / `tak cancel <task-id>` | Close, hand off, or cancel execution |\n| `tak reopen <task-id>` / `tak unassign <task-id>` | Reopen or clear assignment |\n| `tak depend` / `tak undepend` / `tak reparent` / `tak orphan` | Manage dependency + parent-child edges (including bulk reparent via `tak reparent <id1,id2,...> --to <parent-id>`) |\n| `tak wait` | Deterministically wait for reservation/path or dependency blockers to clear (`--path` or `--on-task`, optional `--timeout`) |\n| `tak context <task-id>` / `tak log <task-id>` / `tak verify <task-id>` | Task sidecars: notes, history, verification |\n| `tak learn <subcommand>` | Manage learnings + suggestions |\n| `tak mesh <subcommand>` | Agent presence + coordination ops (`join/list/send/inbox`, lease upkeep `heartbeat/cleanup`, reservation diagnostics `blockers/reservations`, `reserve/release/feed`) |\n| `tak blackboard <subcommand>` | Shared coordination notes (`post/list/show/close/reopen`), including structured `post --template blocker\\|handoff\\|status`, delta refs (`--since-note`, `--no-change-since`), and sensitive-text lint warnings |\n| `tak therapist <subcommand>` | Workflow diagnosis (`offline`, `online`, `log`) |\n| `tak metrics <burndown\\|completion-time\\|tui>` | Metrics trends + dashboard (`--from/--to`, `--bucket day\\|week`, filters; completion-time `--metric lead\\|cycle`; `--include-cancelled` for burndown/TUI only) |\n| `tak tui` | Interactive cross-domain explorer for tasks/learnings/blackboard/mesh/feed with in-UI search + detail panes (`--focus`, `--query`) |\n| `tak migrate-ids [--dry-run\\|--apply]` | Task ID migration workflow (preflight/apply rewrite + audit map + config bump) |\n| `tak delete <task-id>` | Delete task (`--force` to cascade orphan/removal behavior) |\n| `tak reindex` | Rebuild SQLite index from task files |\n| `tak setup` / `tak doctor` | Install/check integrations and environment health |\n\n### Import v2 (strict YAML plan materializer)\n\n`tak import` now accepts one canonical YAML schema: top-level `epic`, nested `features`, and nested `tasks`.\n\n> Breaking change: legacy import payloads (for example top-level `tasks:` list/JSON wrappers from older versions) are no longer accepted.\n\n```yaml\nepic: Agentic Chat\ndescription: Claude Code for writers\ntags: [agentic-chat]\npriority: high\n\nfeatures:\n  - &infra\n    alias: infra\n    title: Tool Infrastructure\n    priority: high\n    tasks:\n      - &schemas\n        alias: schemas\n        title: Define tool schemas in server/src/tools/\n        tags: [backend]\n        estimate: m\n\n      - title: Add agentMode flag to ChatCompletionRequest\n        depends_on: [*schemas]\n\n  - &read\n    alias: read\n    title: Read Tools\n    depends_on: [*infra]\n    tasks:\n      - title: Wire up get_outline and read_scene handlers\n\n  - title: Write Tools and Approval Gates\n    depends_on: [*read]\n    tasks:\n      - &approval\n        alias: approval\n        title: Build approval gate UI component\n        estimate: l\n\n      - title: Wire up edit_scene tool with diff view\n        depends_on: [*approval, *schemas]\n```\n\nSymbolic dependency references are document-scoped and resolved during import (no hex ID juggling needed).\n\n```bash\n# Validate + preview hierarchy/dependencies/metadata without writes\ntak import plan.yaml --dry-run\n\n# Materialize the full plan in one command\ntak import plan.yaml\n```\n\nSee [`docs/how/import-v2.md`](docs/how/import-v2.md) for schema details and migration notes.\n\n### Bulk reparent example\n\n```bash\n# Bundle multiple tasks under one parent in a single command\n# (all-or-nothing validation: if any ID is invalid or cyclic, nothing is changed)\ntak reparent 00000000000000a1,00000000000000a2,00000000000000a3 --to 00000000000000ff\n\n# Optional quiet mode for scripts\n# (suppresses mutation output)\ntak reparent 00a1,00a2 --to 00ff --quiet\n```\n\n### Metrics quick examples\n\n```bash\n# Burndown trend by week (last month window can be overridden)\ntak metrics burndown --bucket week --from 2026-01-01 --to 2026-02-10 --tag metrics\n\n# Completion-time trend (cycle time by default; use lead for end-to-end)\ntak metrics completion-time --metric lead --bucket week --kind task\n\n# Human-readable summaries\ntak --format pretty metrics burndown --bucket day\ntak --format minimal metrics completion-time --metric cycle\n\n# Interactive dashboard\ntak metrics tui --bucket day --metric cycle\n\n# Cross-domain explorer (tasks + learnings + coordination runtime)\ntak tui --focus tasks --query blocker\n```\n\nOption semantics:\n- Default window is the last 30 days (`--to` defaults to today, `--from` defaults to 30 days earlier).\n- `--include-cancelled` is supported for `metrics burndown` and `metrics tui`; `metrics completion-time --include-cancelled` is rejected with `metrics_invalid_query`.\n- `--from` must be on or before `--to`; invalid combinations return structured `metrics_invalid_query` errors.\n\nAll commands output JSON by default. Use `--format pretty` for human-readable output or `--format minimal` for tabular summaries.\n\n### Epic close hygiene gate (tak source repository)\n\nWhen finishing an **epic** in the tak source repository and the epic's commit range changes tak functionality (`src/`, `pi-plugin/`, `claude-plugin/`, `Cargo.toml`/`Cargo.lock`), `tak finish` enforces a close-out gate:\n\n- docs were updated in-range (`README.md`, `CLAUDE.md`, `docs/`, or skill docs),\n- the running `tak` binary is built from current `HEAD`,\n- project-local `.pi` integration is synced with `pi-plugin/`.\n\nIf blocked, follow the guided actions from the error (typically `cargo install --path .` and `tak setup --pi`) before retrying `tak finish`.\n\n## Task IDs and Migration\n\nCanonical task IDs are 16-character lowercase hex strings (for example `000000000000002a`).\n\nNew task IDs are allocated from OS-backed CSPRNG entropy (counterless allocation). On create, tak retries on filename collision under a task-ID allocation lock.\n\nWhen a command expects a task ID, tak resolves input as:\n1. exact canonical hex or legacy decimal match,\n2. otherwise a unique hex prefix match (case-insensitive).\n\nPrefix examples:\n- `tak show ef94`\n- `tak depend b48b --on ef94`\n\nIf your repository still has legacy numeric filenames (`.tak/tasks/1.json`, etc.), run:\n\n```bash\n# Preview preflight checks (dry-run is default when --apply is omitted)\ntak migrate-ids --dry-run --format pretty\n\n# Apply migration once preflight is clean\ntak migrate-ids --apply --format pretty\n\n# Optionally re-key already-canonical repositories to fresh random IDs\ntak migrate-ids --apply --rekey-random --format pretty\n\n# Refresh derived index metadata\ntak reindex\n```\n\n`tak migrate-ids --apply` rewrites task + sidecar filenames, updates learning task links, bumps `.tak/config.json` to version 3, and writes an audit map under `.tak/migrations/task-id-map-<timestamp>.json`.\n\nAdding `--rekey-random` remaps all task IDs (including already-canonical repositories) to fresh random IDs while preserving parent/dependency/learnings/sidecar references.\n\n## Data Model\n\n**Task kinds:** `epic`, `feature`, `task`, `bug`, `meta`\n\n**Statuses:** `pending` → `in_progress` → `done` / `cancelled`\n\n**Two relationship types:**\n- **Parent-child** (structural): epics contain tasks, tasks contain subtasks\n- **Depends-on** (scheduling): task B cannot start until task A is done\n\n**Blocked** is derived, never stored. A task is blocked when any of its dependencies are unfinished.\n\n## Storage\n\n```\n.tak/\n  config.json                         # Repository configuration\n  task-id.lock                        # Task ID allocation lock file (created on first task create)\n  tasks/*.json                        # Task source of truth (16-char lowercase hex filenames)\n  context/{task_id}.md                # Task notes sidecars (committed)\n  history/{task_id}.jsonl             # Lifecycle history sidecars (committed)\n  verification_results/{task_id}.json # Verification outputs (gitignored)\n  artifacts/{task_id}/                # Task artifacts (gitignored)\n  learnings/*.json                    # Learning records (committed)\n  migrations/task-id-map-*.json       # ID migration audit logs (written by migrate-ids --apply)\n  runtime/coordination.db             # Coordination runtime DB (WAL, gitignored)\n  runtime/coordination.db-wal         # SQLite WAL sidecar (gitignored)\n  runtime/coordination.db-shm         # SQLite shared-memory sidecar (gitignored)\n  runtime/work/states/*.json          # Per-agent work-loop state (gitignored)\n  therapist/observations.jsonl        # Workflow observations (committed)\n  index.db                            # SQLite index (gitignored, rebuilt on demand)\n```\n\nTask files are the source of truth. The SQLite index is derived and rebuilt automatically when missing (e.g., after a fresh clone).\n\nCoordination state is runtime-only and now backed by `.tak/runtime/coordination.db`. Legacy `.tak/runtime/mesh/` and `.tak/runtime/blackboard/` directories are inert after migration; `tak doctor --fix` can clean them up.\n\n## Stigmergic Multi-Agent Workflow\n\nThe default loop is bottom-up and stigmergic: agents coordinate through shared task state, reservations, and notes instead of ad-hoc direct pings or top-down command routing.\n\n```bash\n# 1) Claim next available work (ordered by priority, then age)\ntak claim --assignee agent-1\n\n# 2) Reserve the paths you will touch before major edits\ntak mesh reserve --name agent-1 --path src/store/coordination_db.rs --reason task-0000000000000003\n\n# 3) Publish durable team context / blockers\ntak blackboard post --from agent-1 --template status --task 0000000000000003 --message \"Reservation diagnostics in progress\"\n\n# 4) Keep task-local notes close to execution\ntak context 0000000000000003 --set \"Need overlap checks for parent/child paths\"\n\n# 5) Finish (or handoff), then release reservations\ntak finish 0000000000000003\n# tak handoff 0000000000000003 --summary \"Parser done; tests remain\"\ntak mesh release --name agent-1 --path src/store/coordination_db.rs\n```\n\n### Implementation-cycle learnings closeout (required)\n\nBefore you end a cycle (`finish`, `handoff`, or `cancel`), do a learnings pass:\n\n1. Capture reusable insight/pitfall/pattern with `tak learn add ... --task <id>` (or `tak learn edit ... --add-task <id>`).\n2. Ensure `.tak/learnings/*.json` (and any linked task JSON updates) are committed in the same implementation cycle.\n3. Do not defer learning commits to a later unrelated change.\n\nTemplate shortcuts for consistent high-signal notes:\n\nStructured template notes serialize as line-based `key: value` fields (`template`, `summary`, `status`, `scope`, `owner`, `verification`, `blocker`, `next`; blocker adds `requested_action`).\n\n```bash\ntak blackboard post --from agent-1 --template blocker --task 0000000000000003 --message \"Blocked on reservation conflict\"\ntak blackboard post --from agent-1 --template handoff --task 0000000000000003 --message \"Handing off after parser pass\"\ntak blackboard post --from agent-1 --template status --task 0000000000000003 --message \"Verification pass complete\"\n\n# Delta-style follow-up to avoid repeating unchanged context\n# (references B42 and marks no material changes)\ntak blackboard post --from agent-1 --template status --task 0000000000000003 --since-note 42 --no-change-since --message \"Waiting on owner confirmation\"\n```\n\nUnstructured mode remains supported: omit `--template` to post plain free-text notes exactly as before.\n\n`tak blackboard post` also emits non-blocking warnings when text looks like a secret/token. Redact sensitive values before posting (for example `sk-...abcd` -> `<redacted:...abcd>`).\n\n`tak claim` is atomic and avoids TOCTOU races that can happen with `tak next` + `tak start`. For concurrent work, prefer claim-first execution plus explicit reservation management.\n\n## Isolated Verification Fallback\n\nDefault practice is to run verification in the shared working tree.\n\nIf unrelated in-progress edits make shared-tree verification noisy, use a temporary detached `git worktree` for targeted verification, then clean it up. Always note this in blackboard/task updates so evidence provenance is explicit.\n\nSee: [`docs/how/isolated-verification.md`](./docs/how/isolated-verification.md).\n\n## Claude Code Integration\n\nTak ships as a Claude Code plugin. Enable it to get:\n\n- **Task management skill**: Full CLI + coordination reference (tasks, mesh, blackboard, learnings, therapist)\n- **Epic planning skill**: Guided decomposition of features into task hierarchies and dependency graphs\n- **Task execution skill**: Agent workflow for claiming/executing/completing tasks, centered on CLI-native `tak work`, `tak work status`, `tak work done`, and `tak work stop` (with `/tak work*` chat aliases)\n- **Session lifecycle hooks**: Auto-reindex + auto-join mesh on session start, auto-leave mesh on stop\n\n> Note: Prefer invoking `tak work` commands directly. Claude `/tak work*` prompts are shorthand that run the same CLI-first flow; pi additionally layers extension runtime guardrails.\n\n```bash\n# Run from your git repo root\n# Install SessionStart + Stop hooks into .claude/settings.local.json\ntak setup\n\n# Also write plugin files under .claude/plugins/tak\ntak setup --plugin\n\n# Install only Claude skills under .claude/skills/\ntak setup --skills\n```\n\n## Pi Integration\n\nTak also ships a pi package under [`pi-plugin/`](./pi-plugin):\n\n- `/tak` task picker with filtering (`ready`, `blocked`, `all`, `mine`, `in_progress`) and default **urgent → oldest** ordering\n- `tak_cli` tool for structured task/mesh/blackboard command execution\n- Mesh + blackboard integration (`/tak mesh`, `/tak inbox`, `/tak blackboard`)\n- Guard inputs are CLI-backed (`tak mesh reservations`, `tak mesh list`) rather than direct runtime file reads\n- Auto `tak reindex` + mesh join/leave lifecycle behavior\n- System-prompt augmentation that enforces active tak usage and cross-agent coordination\n- Fail-safe guard behavior: when reservation snapshots are unavailable, guarded write/verify paths block with actionable remediation guidance\n\nInstall project-local pi integration from the repo root:\n\n```bash\ntak setup --pi\n```\n\n(Use `tak setup --global --pi` to install into `~/.pi/agent/` instead.)\n\nYou can also install the package manually:\n\n```bash\npi install ./pi-plugin -l\n```\n\nThen run `pi` in this repository and use `/tak`.\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "tak",
          "source": "./claude-plugin",
          "description": "Git-native task management for agentic workflows. Provides skills for task tracking, epic planning, and multi-agent coordination via the tak CLI.",
          "version": "0.1.0",
          "keywords": [
            "task-management",
            "agentic",
            "git-native",
            "multi-agent"
          ],
          "categories": [
            "agentic",
            "git-native",
            "multi-agent",
            "task-management"
          ],
          "install_commands": [
            "/plugin marketplace add kthwaite/tak",
            "/plugin install tak@tak"
          ]
        }
      ]
    }
  ]
}