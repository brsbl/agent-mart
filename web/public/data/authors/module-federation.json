{
  "author": {
    "id": "module-federation",
    "display_name": "Module Federation",
    "avatar_url": "https://avatars.githubusercontent.com/u/61727377?v=4"
  },
  "marketplaces": [
    {
      "name": "side-effect-analyzer-plugins",
      "version": "1.0.0",
      "description": "Side effect analyzer that warns about potential side effects when editing files, including command injection, XSS, and unsafe code patterns",
      "repo_full_name": "module-federation/side-effect-scaner",
      "repo_url": "https://github.com/module-federation/side-effect-scaner",
      "repo_description": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-28T08:23:36Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n  \"version\": \"1.0.0\",\n  \"name\": \"side-effect-analyzer-plugins\",\n  \"owner\": {\n    \"name\": \"2heal1\",\n    \"email\": \"hanric.zhang@gmail.com\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"side-effect-analyzer\",\n      \"description\": \"Side effect analyzer that warns about potential side effects when editing files, including command injection, XSS, and unsafe code patterns\",\n      \"source\": \"./plugins/side-effect-analyzer\"\n    }\n  ]\n}\n",
        "README.md": "# Side Effect Scanner\n\nA frontend engineering side effect scanning tool for detecting CSS, global variables, and global event listener side effects.\n\n# Detecting Project Side Effects\n\nWe provide a CLI tool to help detect side effects including CSS, global variables, and global event listeners.\n\n## Quick Start\n\n### Installation\n\n```bash\nnpm install @module-federation/side-effect-scanner\n```\n\n### Usage Examples\n\n#### Scan Built Artifacts (Recommended)\n\nFor complex projects, we recommend scanning the built artifacts directly to get the most accurate results.\n\n```bash\nnpx se-scan --dir dist\n```\n\n#### Scan Entry Files and Dependencies\n\nSpecify the source entry file, and the tool will automatically compile its dependencies and identify side effects.\n\n```bash\nnpx se-scan --entry src/index.ts\n```\n\n#### Use Complex Configuration\n\n```bash\nnpx se-scan --entry src/index.ts --alias '{\"@\": \"./src\"}' --max-depth 5\n```\n\n#### Use Configuration File\n\n```bash\nnpx se-scan --config .serc.ts\n```\n\n## CLI Command Details\n\n| Option                                  | Description                                                                                                                                                                                             | Default                 |\n| --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |\n| `-c, --config <path>`                   | Configuration file path                                                                                                                                                                                 | `.serc.ts`              |\n| `-e, --entry <file>`                    | Entry file path. When specified, scanning will start from this file and all its dependencies                                                                                                            | `index.ts`              |\n| `-d, --dir <dir>`                       | Specify the directory to scan. When set, all files in the directory will be scanned. Suitable for projects with complex build configurations, directly scanning artifacts for the most accurate results | -                       |\n| `--max-depth <number>`                  | Maximum dependency resolution depth                                                                                                                                                                     | `Infinity`              |\n| `--alias <aliases>`                     | Path alias configuration, formatted as JSON string, e.g., `'{\"@\":\"./src\"}'`                                                                                                                             | `{}`                    |\n| `--compile`                             | Whether to compile entry files                                                                                                                                                                          | `true`                  |\n| `-o, --output <path>`                   | Output report filename                                                                                                                                                                                  | `side-effect-report.md` |\n| `-f, --format <format>`                 | Output format (md, json, console)                                                                                                                                                                       | `md`                    |\n| `--ignored-global-vars <vars>`          | Global variables to ignore, comma-separated                                                                                                                                                             | `''`                    |\n| `-i, --ignore <patterns>`               | File patterns to ignore, comma-separated                                                                                                                                                                | `webpackChunk_*`        |\n| `-u, --unknown-dir <dir>`               | Unknown directory shown in the report                                                                                                                                                                   | `dist`                  |\n| `-v, --verbose`                         | Show detailed output                                                                                                                                                                                    | `false`                 |\n| `--exclude-global-selector-after-class` | Exclude global selectors after specified class names                                                                                                                                                    | `true`                  |\n| `--exclude-important-rule`              | Exclude !important rules                                                                                                                                                                                | `true`                  |\n| `--high-risk-css-property`              | Whether to collect high-risk CSS properties, e.g., position: fixed                                                                                                                                      | `false`                 |\n| `--un-removed-event-listener`           | Whether to collect unremoved event listeners                                                                                                                                                            | `true`                  |\n| `--anonymous-event-handler`             | Whether to collect anonymous event handler functions                                                                                                                                                    | `true`                  |\n| `--dynamic-element-append`              | Whether to collect dynamic element append events: appendChild                                                                                                                                           | `false`                 |\n| `--dynamic-element-remove`              | Whether to collect dynamic element remove events: removeChild                                                                                                                                           | `false`                 |\n| `--dynamic-element-insert`              | Whether to collect dynamic element insert events: insertBefore                                                                                                                                          | `false`                 |\n| `--untracked-dynamic-element`           | Whether to collect other dynamic element events: createTextNode, innerHTML, outerHTML, insertAdjacentHTML                                                                                               | `false`                 |\n| `--global-var-declaration`              | Whether to collect global variable declarations                                                                                                                                                         | `true`                  |\n| `--built-in-override`                   | Whether to collect built-in object overrides                                                                                                                                                            | `true`                  |\n| `--critical-global-style`               | Whether to collect risky styles for global elements                                                                                                                                                     | `true`                  |\n| `--global-selector`                     | Whether to collect global selectors                                                                                                                                                                     | `true`                  |\n| `--complex-selector`                    | Whether to collect style rules with complex selectors                                                                                                                                                   | `false`                 |\n| `--important-declaration`               | Whether to collect style rules with !important declarations                                                                                                                                             | `false`                 |\n| `--duplicate-rule`                      | Whether to collect duplicate style rules                                                                                                                                                                | `true`                  |\n| `--global-style-side-effect`            | Whether to collect high-risk CSS properties, e.g., position: fixed                                                                                                                                      | `false`                 |\n\n## Configuration Options\n\nYou can create a `.serc.ts` configuration file to customize scanning options.\n\nConfiguration options type:\n\n```ts\ninterface ScanOptions {\n  config?: string;\n  entry?: string;\n  dir?: string;\n  output?: string;\n  format?: 'console' | 'json' | 'md';\n  ignore?: Array<string | { file: string; lines?: number[] }>;\n  verbose?: boolean;\n  maxDepth?: number;\n  compile?: boolean;\n  alias?: Record<string, string>;\n  adapter?: string | [adapterPath: string, adapterOptions?: AdapterOptions];\n  excludeGlobalSelectorAfterClass?: boolean;\n  excludeImportantRule?: boolean;\n  highRiskCssProperty?: boolean;\n  ignoredGlobalVars?: string[];\n  unRemovedEventListener?: boolean;\n  anonymousEventHandler?: boolean;\n  dynamicElementAppend?: boolean;\n  dynamicElementRemove?: boolean;\n  dynamicElementInsert?: boolean;\n  untrackedDynamicElement?: boolean;\n  globalVarDeclaration?: boolean;\n  builtInOverride?: boolean;\n  criticalGlobalStyle?: boolean;\n  globalSelector?: boolean;\n  complexSelector?: boolean;\n  importantDeclaration?: boolean;\n  duplicateRule?: boolean;\n  globalStyleSideEffect?: boolean;\n}\n```\n\n## Output\n\nAfter successful scanning, a `side-effect-report.md` file will be generated containing the scan results. The format is as follows:\n\n## Advanced Usage\n\n### Compile Mode\n\nWhen using the `--compile` option (enabled by default), the tool will use Rsbuild to compile entry files and their dependencies, then scan the compiled code. This ensures that even when using TypeScript, JSX, or other syntax that requires compilation, side effects can be correctly identified.\n\nIf the `--compile` option is disabled, the tool will directly scan source files, which may not correctly handle syntax that requires compilation.\n\n> Note: When using the `--dir` option, the `--compile` option will be automatically disabled.\n\n### Custom Adapters\n\nWhen using `--compile` mode but encountering build errors, you can specify a custom adapter via the `adapter` option to handle specific build tool configurations. An adapter is a function that receives scan options and optional adapter configuration parameters, returning an Rsbuild configuration object.\n\n```ts\nimport { createScanConfig } from '@module-federation/side-effect-scanner';\n\nexport default createScanConfig({\n  entry: 'src/index.ts',\n  adapter: './my-adapter.js',\n});\n```\n\n#### Adapter Formats\n\nAdapters can be string paths or array format:\n\n- **String format**: `\"./my-adapter.js\"` - uses default configuration\n- **Array format**: `[\"./my-adapter.js\", { customOption: true }]` - passes custom configuration\n\n#### Adapter Function Signature\n\n```typescript\ninterface Adapter {\n  (scanOptions: ScanOptions, adapterOptions?: any): RsbuildConfig;\n}\n```\n\n#### Creating Custom Adapters\n\nCreate a `my-adapter.js` file:\n\n```javascript\nmodule.exports = function myAdapter(scanOptions, adapterOptions = {}) {\n  // Return Rsbuild configuration based on scan options and adapter configuration\n  return {\n    source: {\n      entry: {\n        index: scanOptions.entry,\n      },\n    },\n    output: {\n      distPath: {\n        root: './.temp-dist',\n      },\n    },\n    tools: {\n      rspack: {\n        resolve: {\n          alias: scanOptions.alias || {},\n        },\n      },\n    },\n    // Conditional configuration based on adapterOptions\n    ...(adapterOptions.enableSourceMap && {\n      output: {\n        sourceMap: true,\n      },\n    }),\n  };\n};\n```\n\n#### Using Custom Adapters\n\n**CLI usage:**\n\n```bash\nnpx se-scan --entry src/index.ts --adapter ./my-adapter.js\n```\n\n**Configuration file usage:**\n\n```typescript\n// .serc.ts\nimport { createScanConfig } from '@module-federation/side-effect-scanner';\n\nexport default createScanConfig({\n  entry: 'src/index.ts',\n  adapter: './my-adapter.js',\n});\n```\n\n#### Built-in Adapters\n\nThe project provides the following built-in adapters:\n\n- `@module-federation/side-effect-modernjs-adapter` - suitable for Modern.js projects (version > 2.63.0)\n\nUsage example:\n\n```bash\nnpx se-scan --entry src/index.ts --adapter <require.resolve('@module-federation/side-effect-modernjs-adapter')>\n```\n\n### Ignoring Specific Code Segments\n\nUse the `ignore` option to ignore specific files or specific lines within files.\n\n#### Configuration Formats\n\nThe `ignore` configuration supports the following two formats:\n\n##### 1. String Array (file paths or glob patterns)\n\n```typescript\n// .serc.ts\nimport { createScanConfig } from '@module-federation/side-effect-scanner';\n\nexport default createScanConfig({\n  ignore: [\n    '**/@modern-js/runtime/**', // ignore @modern-js/runtime dependencies\n    '**/react*/**', // ignore all dependencies starting with react\n    '**/lib-router*.js', // ignore all JS files starting with lib-router\n    'src/utils/vendor/**', // ignore entire directory\n    'src/test/**/*.test.js', // ignore all test files\n    'src/legacy/old-code.js', // ignore specific file\n  ],\n});\n```\n\n##### 2. Object Array (precise control)\n\n```typescript\n// .serc.ts\nimport { createScanConfig } from '@module-federation/side-effect-scanner';\n\nexport default createScanConfig({\n  ignore: [\n    // ignore entire file\n    'src/utils/vendor.js',\n\n    // ignore specific lines in file\n    {\n      file: 'src/components/legacy.js',\n      lines: [10, 15, 20, 25], // ignore lines 10, 15, 20, 25\n    },\n\n    // use glob pattern to ignore specific lines in files\n    {\n      pattern: 'src/styles/*.css',\n      lines: [1, 2, 3], // ignore first 3 lines of CSS files\n    },\n  ],\n});\n```\n\n### Path Aliases\n\nWhen scanning source files, you can set the `alias` option to configure path aliases, ensuring correct module dependency resolution.\n\n### Scan Depth Control\n\nUse the `maxDepth` option to control the maximum depth of dependency resolution, avoiding excessive dependency parsing that may impact performance.\n\n```markdown\n# üìä Frontend Project Side Effect Scan Report\n\n## üìã Report Overview\n\n| Type           | Details            |\n| -------------- | ------------------ |\n| **Scan Entry** | `dist`             |\n| **File Count** | 9 file count       |\n| **Scan Time**  | 2025/8/26 11:04:39 |\n\n## üìà Issue Statistics\n\n| Type                             | Count | Status |\n| -------------------------------- | ----- | ------ |\n| **CSS Side Effects**             | 7 7   | ‚ùå     |\n| **Global Variable Side Effects** | 10 10 | ‚ùå     |\n| **Event Listener Side Effects**  | 2 2   | ‚ö†Ô∏è     |\n| **Dynamic Element Side Effects** | 0 0   | ‚úÖ     |\n| **Total**                        | 19 19 | ‚ùå     |\n\n---\n\n## üìù Source Files (3)\n\n### src/routes/index.css (3)\n\n#### üé® CSS Side Effects (3)\n\n## ‚ùì Unknown Files (3)\n\n### dist/static/js/lib-router.5404ac00.js (1)\n\n#### üåç Global Variable Side Effects (1)\n\n## üì¶ Third-party Packages (node_modules) (4)\n\n### modernjs-test\n\n- üü° Global Variable Declaration (1)\n\n[View Details](./node_modules/.se/modernjs-test.md)\n\n## üí° How to Fix\n\nReference documentation: https://lf3-static.bytednsdoc.com/obj/eden-cn/shloeh7nuhonuhog/FIX-GUIDE-zh.md\n\n---\n\n_Generated at: 2025/8/26 11:04:39_\n_Frontend Project Side Effect Scan Tool v0.0.8_\n```\n\n## Common Issues\n\n### Incorrect Source File Information?\n\nRefer to the following configurations to achieve the best file positioning:\n\n- Set devtool value to 'source-map', if using Rsbuild, set `output.sourcemap` to `true`\n- Set `output.devtoolModuleFilenameTemplate` to `[resource-path]`\n- For Rsbuild projects, set `tools.lightningcssLoader` to `false`\n- For Rsbuild projects, set `output.legalComments` to `'none'`\n\n### Using CSS Modules but Still Recognized as Side Effects?\n\nCSS Modules will hash class names, causing the scanner to fail to recognize class name usage, thus identifying them as side effects.\n\nYou can set the format of CSS Module class names to prevent the scanner from recognizing them as side effects.\n\nThe Scanner exports a `CSS_MODULE_LOCAL_IDENT_NAME` constant for configuring CSS Module class name format. You can add this constant prefix to the name in your build configuration, so the Scanner will recognize it as a CSS Module class name and avoid identifying it as a side effect.\n\nExample: Set `output.cssModules.localIdentName` to `${CSS_MODULE_LOCAL_IDENT_NAME}-[local]-[hash:base64:6]`.\n\n```typescript\nimport { CSS_MODULE_LOCAL_IDENT_NAME } from '@module-federation/side-effect-scanner';\n\nexport default {\n  output: {\n    cssModules: {\n      localIdentName: `${CSS_MODULE_LOCAL_IDENT_NAME}-[local]-[hash:base64:6]`,\n    },\n  },\n};\n```\n\n## How to fix side effects\n\nRefer to the [Fix Guide](./FIX-GUIDE.md) for specific steps to fix side effects.\n"
      },
      "plugins": [
        {
          "name": "side-effect-analyzer",
          "description": "Side effect analyzer that warns about potential side effects when editing files, including command injection, XSS, and unsafe code patterns",
          "source": "./plugins/side-effect-analyzer",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add module-federation/side-effect-scaner",
            "/plugin install side-effect-analyzer@side-effect-analyzer-plugins"
          ]
        }
      ]
    }
  ]
}