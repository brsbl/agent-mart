{
  "author": {
    "id": "angreal",
    "display_name": "angreal",
    "type": "Organization",
    "avatar_url": "https://avatars.githubusercontent.com/u/45580675?v=4",
    "url": "https://github.com/angreal",
    "bio": "Angreal and \"official\" templates.",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 8,
      "total_stars": 10,
      "total_forks": 4
    }
  },
  "marketplaces": [
    {
      "name": "angreal-angreal",
      "version": null,
      "description": "Task automation skills for angreal projects. Focused skills for running tasks, authoring tasks, arguments, ToolDescriptions, project setup, creating templates, and development patterns.",
      "owner_info": {
        "name": "angreal",
        "email": "support@angreal.dev"
      },
      "keywords": [],
      "repo_full_name": "angreal/angreal",
      "repo_url": "https://github.com/angreal/angreal",
      "repo_description": "  Task automation and project templating tool. Define reusable commands in Python, scaffold projects from templates, and let tasks travel with your codebase. Rust core, Python API.",
      "homepage": "https://angreal.github.io/angreal",
      "signals": {
        "stars": 10,
        "forks": 4,
        "pushed_at": "2026-01-28T02:23:08Z",
        "created_at": "2018-06-19T13:26:18Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 428
        },
        {
          "path": "plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 475
        },
        {
          "path": "plugin/README.md",
          "type": "blob",
          "size": 3840
        },
        {
          "path": "plugin/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/hooks/hooks.json",
          "type": "blob",
          "size": 584
        },
        {
          "path": "plugin/hooks/pre-compact.sh",
          "type": "blob",
          "size": 2028
        },
        {
          "path": "plugin/hooks/session-start.sh",
          "type": "blob",
          "size": 2211
        },
        {
          "path": "plugin/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/skills/angreal-arguments",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/skills/angreal-arguments/SKILL.md",
          "type": "blob",
          "size": 8117
        },
        {
          "path": "plugin/skills/angreal-authoring",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/skills/angreal-authoring/SKILL.md",
          "type": "blob",
          "size": 4334
        },
        {
          "path": "plugin/skills/angreal-init",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/skills/angreal-init/SKILL.md",
          "type": "blob",
          "size": 6720
        },
        {
          "path": "plugin/skills/angreal-integrations",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/skills/angreal-integrations/SKILL.md",
          "type": "blob",
          "size": 19303
        },
        {
          "path": "plugin/skills/angreal-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/skills/angreal-patterns/SKILL.md",
          "type": "blob",
          "size": 8597
        },
        {
          "path": "plugin/skills/angreal-templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/skills/angreal-templates/SKILL.md",
          "type": "blob",
          "size": 13907
        },
        {
          "path": "plugin/skills/angreal-tool-descriptions",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/skills/angreal-tool-descriptions/SKILL.md",
          "type": "blob",
          "size": 6015
        },
        {
          "path": "plugin/skills/angreal-usage",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/skills/angreal-usage/SKILL.md",
          "type": "blob",
          "size": 3205
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"angreal-angreal\",\n  \"owner\": {\n    \"name\": \"angreal\",\n    \"email\": \"support@angreal.dev\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"angreal\",\n      \"source\": \"./plugin\",\n      \"description\": \"Task automation skills for angreal projects. Focused skills for running tasks, authoring tasks, arguments, ToolDescriptions, project setup, creating templates, and development patterns.\",\n      \"version\": \"2.9.0\"\n    }\n  ]\n}\n",
        "plugin/.claude-plugin/plugin.json": "{\n  \"name\": \"angreal\",\n  \"version\": \"2.9.0\",\n  \"description\": \"Task automation skills for angreal projects. Focused skills for running tasks, authoring tasks, arguments, ToolDescriptions, project setup, creating templates, and development patterns.\",\n  \"author\": {\n    \"name\": \"angreal\",\n    \"email\": \"support@angreal.dev\"\n  },\n  \"repository\": \"https://github.com/angreal/angreal\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"angreal\", \"task-automation\", \"cli\", \"developer-tools\"]\n}\n",
        "plugin/README.md": "# Angreal Plugin for Claude Code\n\nTask automation skills for angreal projects. Focused skills for each job to be done.\n\n## Skills\n\n| Skill | Trigger Phrases | Purpose |\n|-------|-----------------|---------|\n| `angreal-usage` | \"run angreal\", \"discover tasks\", \"angreal tree\" | Running and discovering tasks |\n| `angreal-authoring` | \"create a task\", \"write task file\", \"@angreal.command\" | Creating task files in existing projects |\n| `angreal-arguments` | \"add arguments\", \"@angreal.argument\", \"add flags\" | The @argument decorator |\n| `angreal-tool-descriptions` | \"write ToolDescription\", \"AI guidance\", \"risk level\" | Writing AI-friendly task descriptions |\n| `angreal-init` | \"initialize angreal\", \"add angreal to project\" | Adding angreal to existing projects |\n| `angreal-templates` | \"create a template\", \"angreal.toml\", \"Tera templating\" | Creating reusable templates for others |\n| `angreal-patterns` | \"test tasks\", \"best practices\", \"error handling\" | Testing, development, and documentation patterns |\n| `angreal-integrations` | \"use Git in task\", \"create venv\", \"docker-compose\", \"render template\" | Built-in Git, VirtualEnv, Docker, and Tera templating |\n\n## Auto-Activation\n\nSkills automatically activate for projects containing a `.angreal/` directory.\n\n## Installation\n\n### Via Claude Code Plugin System\n\n```bash\nclaude plugins add angreal\n```\n\n### Local Development\n\n```bash\nclaude --plugin-dir /path/to/angreal/skill\n```\n\n## Skill Details\n\n### angreal-usage\nFor AI agents running tasks:\n- Discovering available tasks with `angreal tree`\n- Running tasks with proper arguments\n- Understanding task output and exit codes\n- Common multi-task workflows\n\n### angreal-authoring\nFor developers creating tasks:\n- Task file structure (`task_*.py` in `.angreal/`)\n- The `@command` decorator\n- Command groups with `command_group()`\n- Naming conventions and organization\n\n### angreal-arguments\nFor adding CLI arguments:\n- The `@argument` decorator\n- Flags, required args, defaults\n- Type conversion with `python_type`\n- Multiple values\n\n### angreal-tool-descriptions\nFor AI-friendly tasks:\n- Writing `ToolDescription` prose\n- Risk levels (safe, read_only, destructive)\n- Structuring guidance for AI agents\n- Best practices for discoverability\n\n### angreal-init\nFor adding angreal to existing projects:\n- Creating `.angreal/` directory structure\n- Starter task file templates\n- Migrating from Makefile/scripts\n- Project setup best practices\n\n### angreal-templates\nFor creating reusable templates others can consume:\n- Template structure (`angreal.toml`, templated files)\n- Tera templating engine (variables, conditionals, loops)\n- Post-initialization scripts (`.angreal/init.py`)\n- Publishing and sharing templates\n\n### angreal-patterns\nFor implementation patterns:\n- Unit testing task functions\n- Mocking `angreal.get_root()`\n- Verbose/quiet/dry-run modes\n- Subprocess handling\n- Error handling patterns\n\n### angreal-integrations\nFor built-in tool integrations:\n- `angreal.render_template()` / `angreal.render_directory()` - Tera templating for file scaffolding\n- `angreal.integrations.git.Git` - Repository operations\n- `angreal.integrations.venv.VirtualEnv` - Virtual environment management\n- `angreal.integrations.docker.DockerCompose` - Docker Compose operations\n- `@venv_required` decorator for automatic venv handling\n\n## Quick Reference\n\n### Basic Task\n\n```python\nimport angreal\n\n@angreal.command(name=\"build\", about=\"Build the project\")\n@angreal.argument(name=\"release\", long=\"release\", is_flag=True, takes_value=False)\ndef build(release=False):\n    project_root = angreal.get_root().parent  # .angreal/ -> project root\n    # Implementation\n    return 0\n```\n\n### Task Discovery\n\n```bash\nangreal tree           # List all commands\nangreal tree --long    # Include ToolDescription prose\n```\n\n## Version\n\n2.8.0\n\n## License\n\nMIT\n",
        "plugin/hooks/hooks.json": "{\n  \"description\": \"Angreal project detection and context injection\",\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"matcher\": \"*\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/session-start.sh\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ],\n    \"PreCompact\": [\n      {\n        \"matcher\": \"*\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/pre-compact.sh\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugin/hooks/pre-compact.sh": "#!/bin/bash\n# PreCompact hook for angreal projects\n# Re-injects essential context before compaction to ensure authoritative guidance persists\n\n# Exit silently if not in an angreal project\nif [ ! -d \"$CLAUDE_PROJECT_DIR/.angreal\" ]; then\n    exit 0\nfi\n\n# Check if angreal is installed\nif ! command -v angreal &> /dev/null; then\n    exit 0\nfi\n\n# Get the command tree (run from project directory)\ncd \"$CLAUDE_PROJECT_DIR\" || exit 0\nTREE_OUTPUT=$(angreal tree --long 2>/dev/null)\n\n# Build comprehensive context to preserve through compaction\nread -r -d '' CONTEXT << EOF\n## Angreal Project Context (PRESERVE THIS)\n\nThis is an angreal project with predefined automation tasks.\n\n### Critical Rule: ALWAYS Use Angreal Tasks\n\n**NEVER run manual equivalents when an angreal task exists.** Use \\`angreal <task>\\` because tasks encode:\n- Project-specific configuration and flags\n- Correct environment setup and dependencies\n- Proper sequencing of operations\n- Tested, reliable workflows\n\n**Decision Framework:**\n1. Before running ANY build/test/docs/deploy command, check available tasks below\n2. If an angreal task exists for the operation, USE IT\n3. Only use manual commands when no angreal task covers the need\n4. Pay attention to risk levels: safe, read_only, or destructive\n\n### Available Commands (with ToolDescriptions)\n\n\\`\\`\\`\n${TREE_OUTPUT}\n\\`\\`\\`\n\n### Quick Reference\n- \\`angreal tree\\` - List all commands (short form)\n- \\`angreal <command> --help\\` - Help for specific command\n\n### Skills for Angreal Development\n- \\`/angreal-authoring\\` - Creating tasks\n- \\`/angreal-arguments\\` - Adding arguments\n- \\`/angreal-integrations\\` - VirtualEnv, Git, Docker, Flox\n- \\`/angreal-patterns\\` - Best practices\nEOF\n\n# Escape the context for JSON\nESCAPED_CONTEXT=$(printf '%s' \"$CONTEXT\" | python3 -c 'import json,sys; print(json.dumps(sys.stdin.read()))')\n\n# Output JSON for Claude\ncat << ENDJSON\n{\n    \"hookSpecificOutput\": {\n        \"hookEventName\": \"PreCompact\",\n        \"additionalContext\": ${ESCAPED_CONTEXT}\n    }\n}\nENDJSON\n\nexit 0\n",
        "plugin/hooks/session-start.sh": "#!/bin/bash\n# SessionStart hook for angreal projects\n# Detects .angreal directory and provides authoritative guidance on using angreal\n\n# Exit silently if not in an angreal project\nif [ ! -d \"$CLAUDE_PROJECT_DIR/.angreal\" ]; then\n    exit 0\nfi\n\n# Check if angreal is installed\nif ! command -v angreal &> /dev/null; then\n    cat << 'ENDJSON'\n{\n    \"hookSpecificOutput\": {\n        \"hookEventName\": \"SessionStart\",\n        \"additionalContext\": \"WARNING: This is an angreal project (`.angreal` directory found) but the `angreal` command is not installed or not in PATH. Install it with: `pip install angreal` or `uv pip install angreal`\"\n    }\n}\nENDJSON\n    exit 0\nfi\n\n# Get the command tree (run from project directory)\ncd \"$CLAUDE_PROJECT_DIR\" || exit 0\nTREE_OUTPUT=$(angreal tree --long 2>/dev/null)\n\n# Build authoritative context message\nread -r -d '' CONTEXT << EOF\nThis is an **angreal project** (detected \\`.angreal\\` directory).\n\n## Critical Rule: Use Angreal Tasks\n\n**ALWAYS prefer \\`angreal <task>\\` over manual equivalents.** Angreal tasks encode project-specific knowledge:\n- Correct flags, paths, and environment setup\n- Proper sequencing of dependent operations\n- Project conventions and best practices\n\n**Examples:**\n- Use \\`angreal test\\` instead of running pytest/cargo test directly\n- Use \\`angreal build\\` instead of manual build commands\n- Use \\`angreal docs\\` instead of manual documentation builds\n\n## Available Commands (with ToolDescriptions)\n\n\\`\\`\\`\n${TREE_OUTPUT}\n\\`\\`\\`\n\n## Available Skills\nWhen authoring or working with angreal tasks:\n- \\`/angreal-authoring\\` - Creating tasks and commands\n- \\`/angreal-arguments\\` - Adding arguments to tasks\n- \\`/angreal-integrations\\` - Using VirtualEnv, Git, Docker, Flox integrations\n- \\`/angreal-patterns\\` - Development best practices\n- \\`/angreal-usage\\` - Running and discovering tasks\nEOF\n\n# Escape the context for JSON (handle newlines and quotes)\nESCAPED_CONTEXT=$(printf '%s' \"$CONTEXT\" | python3 -c 'import json,sys; print(json.dumps(sys.stdin.read()))')\n\n# Output JSON for Claude\ncat << ENDJSON\n{\n    \"hookSpecificOutput\": {\n        \"hookEventName\": \"SessionStart\",\n        \"additionalContext\": ${ESCAPED_CONTEXT}\n    }\n}\nENDJSON\n\nexit 0\n",
        "plugin/skills/angreal-arguments/SKILL.md": "---\nname: angreal-arguments\ndescription: This skill should be used when the user asks to \"add arguments to a task\", \"use @angreal.argument\", \"add flags to command\", \"make argument required\", \"add optional parameter\", \"use python_type\", \"handle multiple values\", or needs guidance on the @argument decorator, argument types, flags, default values, or CLI argument handling in angreal tasks.\nversion: 2.8.0\n---\n\n# Angreal Arguments\n\nAdd command-line arguments to angreal tasks using the `@argument` decorator.\n\n## Basic Usage\n\n```python\nimport angreal\n\n@angreal.command(name=\"greet\", about=\"Greet someone\")\n@angreal.argument(name=\"name\", long=\"name\", help=\"Name to greet\")\ndef greet(name=\"World\"):\n    print(f\"Hello, {name}!\")\n```\n\nCLI: `angreal greet --name Alice`\n\n## Decorator Order\n\n**Critical**: `@argument` must come AFTER `@command`:\n\n```python\n# Correct\n@angreal.command(name=\"build\", about=\"Build project\")\n@angreal.argument(name=\"release\", long=\"release\", is_flag=True, takes_value=False)\ndef build(release=False):\n    pass\n\n# Wrong - will fail\n@angreal.argument(name=\"release\", is_flag=True)  # Error!\n@angreal.command(name=\"build\", about=\"Build project\")\ndef build(release=False):\n    pass\n```\n\n## The @argument Decorator\n\n```python\n@angreal.argument(\n    name,                   # Required: must match function parameter\n    short=None,             # Short flag: \"v\" for -v\n    long=None,              # Long flag: \"verbose\" for --verbose\n    help=None,              # Help text for --help\n    long_help=None,         # Extended help text (shown with --help)\n    required=None,          # Is argument required?\n    default_value=None,     # Default (must be string)\n    takes_value=True,       # Takes a value? (default True)\n    is_flag=False,          # Boolean flag? (default False)\n    python_type=\"str\",      # Type: \"str\", \"int\", \"float\"\n    multiple_values=None,   # Can be repeated?\n    require_equals=None,    # Require --arg=value syntax\n    number_of_values=None,  # Exact number of values required\n    min_values=None,        # Minimum values when multiple\n    max_values=None,        # Maximum values when multiple\n)\n```\n\n### Parameter Details\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `name` | str | **Required**. Must match function parameter name |\n| `short` | str | Single character for short flag (e.g., `\"v\"` for `-v`) |\n| `long` | str | Long flag name (e.g., `\"verbose\"` for `--verbose`) |\n| `help` | str | Brief help text shown in `--help` output |\n| `long_help` | str | Extended help text for detailed documentation |\n| `required` | bool | Whether the argument must be provided |\n| `default_value` | str | Default value (always a string, converted by `python_type`) |\n| `takes_value` | bool | Whether argument accepts a value (default: `True`) |\n| `is_flag` | bool | Boolean flag mode (default: `False`) |\n| `python_type` | str | Type conversion: `\"str\"`, `\"int\"`, `\"float\"` |\n| `multiple_values` | bool | Allow repeating the argument |\n| `require_equals` | bool | Require `--arg=value` instead of `--arg value` |\n| `number_of_values` | int | Exact number of values required |\n| `min_values` | int | Minimum number of values (with `multiple_values`) |\n| `max_values` | int | Maximum number of values (with `multiple_values`) |\n\n## Argument Types\n\n### String Arguments\n\n```python\n@angreal.command(name=\"echo\", about=\"Echo message\")\n@angreal.argument(name=\"message\", long=\"message\", help=\"Message to display\")\ndef echo(message=\"default\"):\n    print(message)\n```\n\n### Integer Arguments\n\n```python\n@angreal.command(name=\"repeat\", about=\"Repeat N times\")\n@angreal.argument(name=\"count\", long=\"count\", python_type=\"int\", help=\"Iterations\")\ndef repeat(count=1):\n    for i in range(int(count)):\n        print(i)\n```\n\n### Boolean Flags\n\nUse `is_flag=True` with `takes_value=False`:\n\n```python\n@angreal.command(name=\"build\", about=\"Build project\")\n@angreal.argument(\n    name=\"verbose\",\n    short=\"v\",\n    long=\"verbose\",\n    is_flag=True,\n    takes_value=False,\n    help=\"Enable verbose output\"\n)\ndef build(verbose=False):\n    if verbose:\n        print(\"Verbose mode enabled\")\n```\n\nCLI: `angreal build --verbose` or `angreal build -v`\n\n### Required Arguments\n\n```python\n@angreal.command(name=\"deploy\", about=\"Deploy application\")\n@angreal.argument(\n    name=\"target\",\n    long=\"target\",\n    required=True,\n    help=\"Deployment target (required)\"\n)\ndef deploy(target):\n    print(f\"Deploying to {target}\")\n```\n\n### Multiple Values\n\n```python\n@angreal.command(name=\"compile\", about=\"Compile files\")\n@angreal.argument(\n    name=\"file\",\n    long=\"file\",\n    multiple_values=True,\n    help=\"Files to process\"\n)\ndef compile(file=None):\n    files = file or []\n    for f in files:\n        print(f\"Processing {f}\")\n```\n\nCLI: `angreal compile --file a.txt --file b.txt`\n\n## Complete Example\n\n```python\nimport angreal\n\n@angreal.command(name=\"build\", about=\"Build the project\")\n@angreal.argument(\n    name=\"target\",\n    long=\"target\",\n    default_value=\"debug\",\n    help=\"Build target (debug or release)\"\n)\n@angreal.argument(\n    name=\"verbose\",\n    short=\"v\",\n    long=\"verbose\",\n    is_flag=True,\n    takes_value=False,\n    help=\"Verbose output\"\n)\n@angreal.argument(\n    name=\"jobs\",\n    short=\"j\",\n    long=\"jobs\",\n    python_type=\"int\",\n    default_value=\"4\",\n    help=\"Parallel jobs\"\n)\ndef build(target=\"debug\", verbose=False, jobs=4):\n    if verbose:\n        print(f\"Building {target} with {jobs} jobs\")\n```\n\nCLI: `angreal build --target release -v -j 8`\n\n## Common Patterns\n\n### Environment Selection\n\n```python\n@angreal.argument(\n    name=\"env\",\n    short=\"e\",\n    long=\"env\",\n    default_value=\"development\",\n    help=\"Environment: development, staging, production\"\n)\n```\n\n### Dry Run Mode\n\n```python\n@angreal.argument(\n    name=\"dry_run\",\n    short=\"n\",\n    long=\"dry-run\",\n    is_flag=True,\n    takes_value=False,\n    help=\"Show what would be done without making changes\"\n)\n```\n\n### File I/O\n\n```python\n@angreal.argument(\n    name=\"input\",\n    short=\"i\",\n    long=\"input\",\n    required=True,\n    help=\"Input file path\"\n)\n@angreal.argument(\n    name=\"output\",\n    short=\"o\",\n    long=\"output\",\n    help=\"Output file path (default: stdout)\"\n)\n```\n\n## Function Signature Matching\n\nParameter names must match argument `name` values:\n\n```python\n@angreal.command(name=\"cmd\", about=\"Example\")\n@angreal.argument(name=\"target\", long=\"target\", required=True)\n@angreal.argument(name=\"verbose\", long=\"verbose\", is_flag=True, takes_value=False)\ndef cmd(target, verbose=False):  # Names match!\n    pass\n```\n\n## Help Text Best Practices\n\n```python\n# Good - includes default and constraints\n@angreal.argument(\n    name=\"workers\",\n    long=\"workers\",\n    python_type=\"int\",\n    default_value=\"4\",\n    help=\"Number of worker processes (1-16, default: 4)\"\n)\n```\n\n## Advanced Parameters\n\n### Long Help Text\n\nUse `long_help` for extended documentation:\n\n```python\n@angreal.argument(\n    name=\"format\",\n    long=\"format\",\n    help=\"Output format\",\n    long_help=\"\"\"Output format for the generated report.\n\nSupported formats:\n  - json: Machine-readable JSON output\n  - csv: Comma-separated values\n  - table: Human-readable table (default)\n\nExample: --format=json\"\"\"\n)\n```\n\n### Require Equals Syntax\n\nForce `--arg=value` instead of `--arg value`:\n\n```python\n@angreal.argument(\n    name=\"config\",\n    long=\"config\",\n    require_equals=True,\n    help=\"Config file (use --config=path)\"\n)\n```\n\nCLI: `angreal cmd --config=settings.toml` (not `--config settings.toml`)\n\n### Exact Number of Values\n\nRequire exactly N values:\n\n```python\n@angreal.argument(\n    name=\"point\",\n    long=\"point\",\n    number_of_values=2,\n    help=\"X Y coordinates\"\n)\ndef plot(point):\n    x, y = point  # Always receives exactly 2 values\n```\n\nCLI: `angreal plot --point 10 20`\n\n### Value Count Constraints\n\nLimit how many values can be provided:\n\n```python\n@angreal.argument(\n    name=\"tags\",\n    long=\"tag\",\n    multiple_values=True,\n    min_values=1,\n    max_values=5,\n    help=\"Tags (1-5 required)\"\n)\ndef tag(tags):\n    for t in tags:\n        print(f\"Tag: {t}\")\n```\n\nCLI: `angreal tag --tag foo --tag bar --tag baz`\n",
        "plugin/skills/angreal-authoring/SKILL.md": "---\nname: angreal-authoring\ndescription: This skill should be used when the user asks to \"create an angreal task\", \"write a task file\", \"add a command to angreal\", \"make a new task\", \"organize tasks with groups\", \"use @angreal.command\", \"use command_group\", or needs guidance on task file structure, the @command decorator, command groups, naming conventions, or task organization within an existing angreal project.\nversion: 2.8.0\n---\n\n# Authoring Angreal Tasks\n\nCreate task files within an existing angreal project. For initializing new projects, see the angreal-init skill.\n\n## Task File Location\n\nTask files live in `.angreal/` at your project root:\n\n```\nmy-project/\n├── .angreal/\n│   ├── task_dev.py       # Development tasks\n│   ├── task_test.py      # Testing tasks\n│   ├── task_docs.py      # Documentation tasks\n│   └── utils.py          # Shared utilities (optional)\n├── src/\n└── ...\n```\n\n**Naming convention**: Files must be named `task_*.py` to be discovered.\n\n## The @command Decorator\n\nEvery task needs the `@command` decorator:\n\n```python\nimport angreal\n\n@angreal.command(\n    name=\"build\",              # Command name (kebab-case)\n    about=\"Build the project\"  # Short description for --help\n)\ndef build():\n    print(\"Building...\")\n    return 0  # Success\n```\n\n### Name Inference\n\nIf you omit `name`, it derives from the function:\n\n```python\n@angreal.command(about=\"Check dependencies\")\ndef check_deps():  # Creates command \"check-deps\"\n    pass\n```\n\n## Command Groups\n\nOrganize related commands with groups:\n\n```python\nimport angreal\n\n# Create reusable group decorator\ntest = angreal.command_group(name=\"test\", about=\"Testing commands\")\n\n@test()  # Group decorator FIRST\n@angreal.command(name=\"all\", about=\"Run all tests\")\ndef test_all():\n    pass\n\n@test()\n@angreal.command(name=\"unit\", about=\"Run unit tests\")\ndef test_unit():\n    pass\n```\n\nCreates: `angreal test all`, `angreal test unit`\n\n### Nested Groups\n\n```python\ndocker = angreal.command_group(name=\"docker\", about=\"Docker commands\")\ncompose = angreal.command_group(name=\"compose\", about=\"Compose commands\")\n\n@docker()\n@compose()\n@angreal.command(name=\"up\", about=\"Start services\")\ndef docker_compose_up():\n    pass\n```\n\nCreates: `angreal docker compose up`\n\n## Getting Project Root\n\n**Important**: `get_root()` returns `.angreal/` directory, not project root:\n\n```python\nimport angreal\n\n@angreal.command(name=\"build\", about=\"Build project\")\ndef build():\n    angreal_dir = angreal.get_root()        # .angreal/ directory\n    project_root = angreal_dir.parent       # Actual project root\n    # Use project_root for file operations\n```\n\n## Shared Modules\n\nCreate shared utilities in `.angreal/`:\n\n```python\n# .angreal/utils.py\nimport angreal\n\ndef get_project_root():\n    return angreal.get_root().parent\n\ndef run_in_project(cmd):\n    import subprocess\n    return subprocess.run(cmd, cwd=get_project_root())\n```\n\n```python\n# .angreal/task_build.py\nimport angreal\nfrom utils import run_in_project\n\n@angreal.command(name=\"build\", about=\"Build project\")\ndef build():\n    result = run_in_project([\"cargo\", \"build\"])\n    return result.returncode\n```\n\n## Best Practices\n\n### Naming Conventions\n\n| Type | Convention | Example |\n|------|------------|---------|\n| Task files | `task_<domain>.py` | `task_test.py` |\n| Commands | kebab-case | `check-deps` |\n| Functions | snake_case | `check_deps` |\n| Groups | short nouns/verbs | `test`, `dev`, `docs` |\n\n### Error Handling\n\n```python\n@angreal.command(name=\"build\", about=\"Build project\")\ndef build():\n    project_root = angreal.get_root().parent\n\n    # Check prerequisites first\n    if not (project_root / \"Cargo.toml\").exists():\n        print(\"Error: Cargo.toml not found\")\n        return 1\n\n    # Attempt operation\n    try:\n        do_build()\n        print(\"Build succeeded!\")\n        return 0\n    except Exception as e:\n        print(f\"Build failed: {e}\")\n        return 1\n```\n\n### Return Codes\n\n| Code | Meaning |\n|------|---------|\n| `0` or `None` | Success |\n| `1` | General failure |\n| `2` | Invalid arguments |\n\n### Organization\n\n- **One domain per file**: `task_test.py`, `task_build.py`\n- **Group related commands**: Use `command_group` for related tasks\n- **Limit nesting**: Two group levels maximum\n- **Single responsibility**: Each task does one thing well\n",
        "plugin/skills/angreal-init/SKILL.md": "---\nname: angreal-init\ndescription: This skill should be used when the user asks to \"create an angreal project\", \"initialize angreal\", \"set up angreal\", \"add angreal to project\", \"start new angreal project\", \"create .angreal directory\", or needs guidance on setting up angreal in a new or existing project, project templates, or initial task file structure.\nversion: 2.8.0\n---\n\n# Initializing Angreal Projects\n\nSet up angreal task automation in a new or existing project.\n\n## What is an Angreal Project?\n\nAn angreal project is any directory containing a `.angreal/` subdirectory with task files. Angreal provides development task automation - think of it as your project's `make` or `npm run`.\n\n## Quick Setup\n\n### 1. Create the .angreal Directory\n\n```bash\nmkdir .angreal\n```\n\n### 2. Create Your First Task File\n\n```python\n# .angreal/task_dev.py\nimport angreal\n\n@angreal.command(name=\"hello\", about=\"Test angreal setup\")\ndef hello():\n    print(\"Angreal is working!\")\n    return 0\n```\n\n### 3. Verify Setup\n\n```bash\nangreal tree    # Should show: hello - Test angreal setup\nangreal hello   # Should print: Angreal is working!\n```\n\n## Recommended Project Structure\n\n### Minimal Setup\n\n```\nmy-project/\n├── .angreal/\n│   └── task_dev.py      # Start with one task file\n├── src/\n└── ...\n```\n\n### Standard Setup\n\n```\nmy-project/\n├── .angreal/\n│   ├── task_dev.py      # Development utilities\n│   ├── task_test.py     # Testing commands\n│   ├── task_build.py    # Build commands\n│   └── task_docs.py     # Documentation commands\n├── src/\n└── ...\n```\n\n### With Shared Utilities\n\n```\nmy-project/\n├── .angreal/\n│   ├── utils.py         # Shared helper functions\n│   ├── task_dev.py\n│   ├── task_test.py\n│   └── task_build.py\n├── src/\n└── ...\n```\n\n## Starter Templates\n\n### Development Utilities\n\n```python\n# .angreal/task_dev.py\nimport angreal\nimport subprocess\nimport os\n\n@angreal.command(name=\"check-deps\", about=\"Verify development tools\")\ndef check_deps():\n    \"\"\"Check that required tools are installed.\"\"\"\n    tools = [\"python\", \"git\"]\n    missing = []\n\n    for tool in tools:\n        result = subprocess.run(\n            [\"which\", tool],\n            capture_output=True\n        )\n        if result.returncode != 0:\n            missing.append(tool)\n\n    if missing:\n        print(f\"Missing tools: {', '.join(missing)}\")\n        return 1\n\n    print(\"All tools available!\")\n    return 0\n\n@angreal.command(name=\"setup\", about=\"Set up development environment\")\ndef setup():\n    \"\"\"Initialize development environment.\"\"\"\n    project_root = angreal.get_root().parent\n\n    # Example: Create virtual environment\n    venv_path = project_root / \".venv\"\n    if not venv_path.exists():\n        print(\"Creating virtual environment...\")\n        subprocess.run([\"python\", \"-m\", \"venv\", str(venv_path)])\n\n    print(\"Development environment ready!\")\n    return 0\n```\n\n### Testing Commands\n\n```python\n# .angreal/task_test.py\nimport angreal\nimport subprocess\n\ntest = angreal.command_group(name=\"test\", about=\"Testing commands\")\n\n@test()\n@angreal.command(name=\"all\", about=\"Run all tests\")\ndef test_all():\n    project_root = angreal.get_root().parent\n    result = subprocess.run(\n        [\"pytest\", \"-v\"],\n        cwd=project_root\n    )\n    return result.returncode\n\n@test()\n@angreal.command(name=\"unit\", about=\"Run unit tests only\")\ndef test_unit():\n    project_root = angreal.get_root().parent\n    result = subprocess.run(\n        [\"pytest\", \"tests/unit\", \"-v\"],\n        cwd=project_root\n    )\n    return result.returncode\n```\n\n### Build Commands\n\n```python\n# .angreal/task_build.py\nimport angreal\nimport subprocess\n\n@angreal.command(\n    name=\"build\",\n    about=\"Build the project\",\n    tool=angreal.ToolDescription(\"\"\"\n        Build project artifacts.\n\n        ## When to use\n        - Before releasing\n        - Testing production builds\n\n        ## Examples\n        ```\n        angreal build\n        angreal build --release\n        ```\n        \"\"\", risk_level=\"safe\")\n)\n@angreal.argument(\n    name=\"release\",\n    long=\"release\",\n    is_flag=True,\n    takes_value=False,\n    help=\"Build in release mode\"\n)\ndef build(release=False):\n    project_root = angreal.get_root().parent\n    cmd = [\"python\", \"-m\", \"build\"]\n\n    print(f\"Building {'release' if release else 'debug'}...\")\n    result = subprocess.run(cmd, cwd=project_root)\n    return result.returncode\n```\n\n## Shared Utilities Module\n\n```python\n# .angreal/utils.py\nimport angreal\nimport subprocess\nfrom pathlib import Path\n\ndef get_project_root() -> Path:\n    \"\"\"Return the project root directory.\"\"\"\n    return angreal.get_root().parent\n\ndef run_command(cmd, check=True, capture=False):\n    \"\"\"Run a command in the project root.\"\"\"\n    result = subprocess.run(\n        cmd,\n        cwd=get_project_root(),\n        capture_output=capture,\n        text=True\n    )\n    if check and result.returncode != 0:\n        raise subprocess.CalledProcessError(\n            result.returncode, cmd\n        )\n    return result\n\ndef file_exists(relative_path: str) -> bool:\n    \"\"\"Check if a file exists relative to project root.\"\"\"\n    return (get_project_root() / relative_path).exists()\n```\n\n## Adding Angreal to Existing Projects\n\n1. Create `.angreal/` directory at project root\n2. Add task files for existing workflows\n3. Migrate shell scripts or Makefile targets to angreal tasks\n4. Add `.angreal/` to version control\n\n### Migrating from Makefile\n\n**Before (Makefile):**\n```makefile\ntest:\n    pytest tests/\n\nbuild:\n    python -m build\n```\n\n**After (.angreal/task_build.py):**\n```python\nimport angreal\nimport subprocess\n\n@angreal.command(name=\"test\", about=\"Run tests\")\ndef test():\n    return subprocess.run([\"pytest\", \"tests/\"]).returncode\n\n@angreal.command(name=\"build\", about=\"Build package\")\ndef build():\n    return subprocess.run([\"python\", \"-m\", \"build\"]).returncode\n```\n\n## Best Practices\n\n### File Naming\n\n- Use `task_<domain>.py` pattern\n- One domain per file: `task_test.py`, `task_build.py`\n- Shared code in `utils.py` or `helpers.py`\n\n### Initial Tasks to Create\n\n1. **check-deps** - Verify development tools are installed\n2. **setup** - Initialize development environment\n3. **test** - Run the test suite\n4. **build** - Build artifacts\n\n### Version Control\n\nAdd to `.gitignore`:\n```\n# Don't ignore .angreal/ - it should be versioned\n# But ignore any generated files within it\n.angreal/__pycache__/\n.angreal/*.pyc\n```\n\n## Verification Checklist\n\nAfter setup, verify:\n\n- [ ] `angreal tree` shows your commands\n- [ ] `angreal <command>` executes correctly\n- [ ] Tasks find project files using `angreal.get_root().parent`\n- [ ] Task files are in version control\n",
        "plugin/skills/angreal-integrations/SKILL.md": "---\nname: angreal-integrations\ndescription: This skill should be used when the user asks to \"use Git in a task\", \"manage virtual environments\", \"use Docker Compose\", \"clone a repository\", \"create a venv\", \"run docker-compose\", \"use angreal.integrations\", \"render a template\", \"scaffold files\", \"generate files from template\", \"use render_template\", \"use render_directory\", \"use Flox\", \"flox environment\", \"cross-language environment\", \"flox services\", \"@flox_required\", or needs guidance on the built-in Git, VirtualEnv, Docker, Flox, or Tera templating integrations available in angreal tasks.\nversion: 2.8.1\n---\n\n# Angreal Integrations\n\nAngreal provides built-in integrations for common development tools: Git, virtual environments, Docker Compose, Flox environments, and Tera templating.\n\n## Tera Templating\n\nGenerate files and directories using the Tera template engine. Useful for scaffolding code, configs, or any structured files within tasks.\n\n### Import\n\n```python\nimport angreal\n```\n\n### render_template()\n\nRender a template string with variable substitution:\n\n```python\nimport angreal\n\n# Simple variable substitution\ntemplate = \"Hello {{ name }}!\"\nresult = angreal.render_template(template, {\"name\": \"World\"})\n# result == \"Hello World!\"\n\n# With conditionals and loops\ntemplate = \"\"\"\n# {{ project_name }}\n\n{% if use_docker %}\n## Docker Setup\nRun `docker-compose up` to start.\n{% endif %}\n\n## Dependencies\n{% for dep in dependencies %}\n- {{ dep }}\n{% endfor %}\n\"\"\"\n\nresult = angreal.render_template(template, {\n    \"project_name\": \"My App\",\n    \"use_docker\": True,\n    \"dependencies\": [\"requests\", \"click\"]\n})\n```\n\n**Signature**: `angreal.render_template(template: str, context: dict) -> str`\n\n### render_directory()\n\nRender an entire directory tree, processing both file contents and file/directory names:\n\n```python\nimport angreal\n\n# Source directory structure:\n# templates/\n#   {{ module_name }}/\n#     __init__.py\n#     {{ module_name }}.py\n\nrendered_files = angreal.render_directory(\n    \"templates\",           # src: source directory\n    \"output\",              # dst: destination directory\n    False,                 # force: overwrite existing files?\n    {\"module_name\": \"mymodule\"}  # context: template variables\n)\n\n# Creates:\n# output/\n#   mymodule/\n#     __init__.py\n#     mymodule.py\n\nprint(f\"Created {len(rendered_files)} files\")\n\n# Context is optional - copy without templating\nangreal.render_directory(\"static_files\", \"output\", False, None)\n```\n\n**Signature**: `angreal.render_directory(src: str, dst: str, force: bool, context: dict | None) -> list[str]`\n\nReturns a list of created file paths.\n\n### generate_context()\n\nLoad variables from a TOML file, optionally prompting the user:\n\n```python\nimport angreal\n\n# Load from TOML without prompting\ncontext = angreal.generate_context(\"config.toml\", take_input=False)\n\n# Load and prompt user for values\ncontext = angreal.generate_context(\"config.toml\", take_input=True)\n```\n\n**Signature**: `angreal.generate_context(path: str, take_input: bool) -> dict`\n\n### get_context()\n\nGet the context from the current project's `.angreal/angreal.toml`:\n\n```python\nimport angreal\n\n# Returns dict from .angreal/angreal.toml or empty dict if not found\ncontext = angreal.get_context()\nproject_name = context.get(\"project_name\", \"unknown\")\n```\n\n**Signature**: `angreal.get_context() -> dict`\n\n### Tera Syntax Quick Reference\n\n```jinja2\n{# Comments #}\n\n{{ variable }}                    {# Variable substitution #}\n{{ name | upper }}                {# Filters: upper, lower, title, trim #}\n{{ items | length }}              {# Get length #}\n{{ value | default(\"fallback\") }} {# Default value #}\n\n{% if condition %}                {# Conditionals #}\n{% elif other %}\n{% else %}\n{% endif %}\n\n{% for item in items %}           {# Loops #}\n  {{ loop.index }}: {{ item }}\n{% endfor %}\n\n{% raw %}{{ not processed }}{% endraw %}  {# Escape template syntax #}\n```\n\n### Complete Scaffolding Example\n\n```python\nimport angreal\nimport os\n\n@angreal.command(name=\"scaffold\", about=\"Generate a new module\")\n@angreal.argument(name=\"name\", long=\"name\", required=True, help=\"Module name\")\n@angreal.argument(name=\"with_tests\", long=\"with-tests\", is_flag=True, takes_value=False)\ndef scaffold(name, with_tests=False):\n    project_root = angreal.get_root().parent\n\n    # Template for module file\n    module_template = '''\"\"\"{{ name }} module.\"\"\"\n\nclass {{ name | title }}:\n    \"\"\"{{ description }}\"\"\"\n\n    def __init__(self):\n        pass\n'''\n\n    # Template for test file\n    test_template = '''\"\"\"Tests for {{ name }}.\"\"\"\nimport pytest\nfrom {{ name }} import {{ name | title }}\n\ndef test_{{ name }}_init():\n    instance = {{ name | title }}()\n    assert instance is not None\n'''\n\n    context = {\n        \"name\": name,\n        \"description\": f\"The {name} module\"\n    }\n\n    # Create module\n    module_content = angreal.render_template(module_template, context)\n    module_path = os.path.join(project_root, \"src\", f\"{name}.py\")\n    os.makedirs(os.path.dirname(module_path), exist_ok=True)\n    with open(module_path, \"w\") as f:\n        f.write(module_content)\n    print(f\"Created {module_path}\")\n\n    # Create test if requested\n    if with_tests:\n        test_content = angreal.render_template(test_template, context)\n        test_path = os.path.join(project_root, \"tests\", f\"test_{name}.py\")\n        os.makedirs(os.path.dirname(test_path), exist_ok=True)\n        with open(test_path, \"w\") as f:\n            f.write(test_content)\n        print(f\"Created {test_path}\")\n\n    return 0\n```\n\n## Git Integration\n\nFull-featured Git wrapper for repository operations.\n\n### Import\n\n```python\nfrom angreal.integrations.git import Git, clone\n```\n\n### Basic Usage\n\n```python\nfrom angreal.integrations.git import Git\n\n# Initialize with working directory (default: current directory)\ngit = Git()\ngit = Git(\"/path/to/repo\")\n\n# All methods return (exit_code, stderr, stdout) tuples\nexit_code, stderr, stdout = git.status()\n```\n\n### Git Class Methods\n\n| Method | Signature | Description |\n|--------|-----------|-------------|\n| `init` | `init(bare=False)` | Initialize a new repository |\n| `add` | `add(*paths)` | Stage files for commit |\n| `commit` | `commit(message, all=False)` | Create a commit |\n| `push` | `push(remote=None, branch=None)` | Push to remote |\n| `pull` | `pull(remote=None, branch=None)` | Pull from remote |\n| `status` | `status(short=False)` | Show working tree status |\n| `branch` | `branch(name=None, delete=False)` | List or manage branches |\n| `checkout` | `checkout(branch, create=False)` | Switch branches |\n| `tag` | `tag(name, message=None)` | Create a tag |\n\n### Callable Interface\n\nThe Git object is callable for arbitrary git commands:\n\n```python\ngit = Git()\n\n# Call any git command\nexit_code, stderr, stdout = git(\"log\", \"--oneline\", \"-5\")\nexit_code, stderr, stdout = git(\"diff\", \"HEAD~1\")\nexit_code, stderr, stdout = git(\"stash\", \"pop\")\n```\n\n### Clone Function\n\n```python\nfrom angreal.integrations.git import clone\n\n# Clone a repository\npath = clone(\"https://github.com/user/repo.git\")\npath = clone(\"https://github.com/user/repo.git\", \"/custom/destination\")\n```\n\n### Complete Example\n\n```python\nimport angreal\nfrom angreal.integrations.git import Git\n\n@angreal.command(name=\"release\", about=\"Create a release\")\n@angreal.argument(name=\"version\", long=\"version\", required=True, help=\"Version tag\")\ndef release(version):\n    git = Git()\n\n    # Check for clean working tree\n    exit_code, stderr, stdout = git.status(short=True)\n    if stdout.strip():\n        print(\"Error: Working tree not clean\")\n        return 1\n\n    # Create and push tag\n    git.tag(version, message=f\"Release {version}\")\n    git.push(\"origin\", version)\n\n    print(f\"Released {version}\")\n    return 0\n```\n\n## VirtualEnv Integration\n\nManage Python virtual environments with automatic activation.\n\n### Import\n\n```python\nfrom angreal.integrations.venv import VirtualEnv, venv_required\n```\n\n### Creating Virtual Environments\n\n```python\nfrom angreal.integrations.venv import VirtualEnv\n\n# Create venv (default path: .venv, created immediately)\nvenv = VirtualEnv()\n\n# Custom path\nvenv = VirtualEnv(\"/path/to/venv\")\n\n# Defer creation\nvenv = VirtualEnv(\".venv\", now=False)\nvenv.create()  # Create manually later\n\n# With requirements\nvenv = VirtualEnv(\".venv\", requirements=\"requirements.txt\")\nvenv = VirtualEnv(\".venv\", requirements=[\"requests\", \"click\"])\n```\n\n### VirtualEnv Constructor\n\n```python\nVirtualEnv(\n    path=\".venv\",           # Path to virtual environment\n    python=None,            # Python version (e.g., \"3.11\")\n    requirements=None,      # Requirements file or package list\n    now=True,               # Create immediately if True\n)\n```\n\n### VirtualEnv Methods\n\n| Method | Description |\n|--------|-------------|\n| `create()` | Create the virtual environment |\n| `activate()` | Activate the venv in current process |\n| `deactivate()` | Deactivate the venv |\n| `install(packages)` | Install packages (string, list, or requirements file) |\n| `install_requirements()` | Install requirements passed to constructor |\n| `remove()` | Delete the virtual environment |\n\n### VirtualEnv Properties\n\n| Property | Type | Description |\n|----------|------|-------------|\n| `path` | Path | Absolute path to venv directory |\n| `name` | str | Name of the venv |\n| `python_executable` | Path | Path to Python interpreter |\n| `exists` | bool | Whether the venv exists |\n\n### Context Manager Usage\n\n```python\nfrom angreal.integrations.venv import VirtualEnv\n\n# Automatically activate and deactivate\nwith VirtualEnv(\".venv\") as venv:\n    # venv is activated here\n    import subprocess\n    subprocess.run([\"python\", \"-c\", \"import sys; print(sys.prefix)\"])\n# venv is deactivated here\n```\n\n### The @venv_required Decorator\n\nAutomatically manage venv lifecycle for a task:\n\n```python\nimport angreal\nfrom angreal.integrations.venv import venv_required\n\n@angreal.command(name=\"test\", about=\"Run tests in venv\")\n@venv_required(\".venv\", requirements=[\"pytest\"])\ndef test():\n    import subprocess\n    # Runs inside activated venv\n    subprocess.run([\"pytest\", \"tests/\"])\n```\n\n### Complete Example\n\n```python\nimport angreal\nfrom angreal.integrations.venv import VirtualEnv\n\n@angreal.command(name=\"setup\", about=\"Setup development environment\")\ndef setup():\n    venv = VirtualEnv(\".venv\", requirements=\"requirements-dev.txt\")\n    venv.install_requirements()\n\n    print(f\"Virtual environment created at {venv.path}\")\n    print(f\"Activate with: source {venv.path}/bin/activate\")\n    return 0\n```\n\n## Docker Compose Integration\n\nManage Docker Compose services from tasks.\n\n### Import\n\n```python\nfrom angreal.integrations.docker import DockerCompose, compose\n```\n\n### Basic Usage\n\n```python\nfrom angreal.integrations.docker import DockerCompose\n\n# Create instance from compose file\ndc = DockerCompose(\"docker-compose.yml\")\ndc = DockerCompose(\"docker-compose.yml\", project_name=\"myproject\")\n\n# Or use the convenience function\nfrom angreal.integrations.docker import compose\ndc = compose(\"docker-compose.yml\")\n```\n\n### DockerCompose Methods\n\nAll methods return a `ComposeResult` object with: `success`, `exit_code`, `stdout`, `stderr`.\n\n#### Service Lifecycle\n\n```python\n# Start services\nresult = dc.up(detach=True)\nresult = dc.up(detach=True, build=True, services=[\"web\", \"db\"])\n\n# Stop and remove\nresult = dc.down(volumes=True, remove_orphans=True)\n\n# Start/stop without removing\nresult = dc.start(services=[\"web\"])\nresult = dc.stop(services=[\"web\"], timeout=\"30s\")\n\n# Restart\nresult = dc.restart(services=[\"web\"])\n```\n\n#### Build and Pull\n\n```python\n# Build images\nresult = dc.build(no_cache=True, parallel=True)\nresult = dc.build(services=[\"web\"])\n\n# Pull images\nresult = dc.pull(services=[\"db\"])\n```\n\n#### Inspection\n\n```python\n# List services\nresult = dc.ps(all=True)\n\n# View logs\nresult = dc.logs(services=[\"web\"], follow=False, tail=\"100\")\n\n# Validate config\nresult = dc.config(quiet=True)\n```\n\n#### Execute Commands\n\n```python\n# Run command in service container\nresult = dc.exec(\n    \"web\",\n    [\"python\", \"manage.py\", \"migrate\"],\n    user=\"app\",\n    workdir=\"/app\"\n)\n```\n\n### Method Signatures\n\n#### up()\n```python\ndc.up(\n    detach=True,           # Run in background\n    build=False,           # Build images before starting\n    remove_orphans=False,  # Remove containers for undefined services\n    force_recreate=False,  # Recreate even if unchanged\n    no_recreate=False,     # Don't recreate existing containers\n    services=None,         # List of services to start\n)\n```\n\n#### down()\n```python\ndc.down(\n    volumes=False,         # Remove named volumes\n    remove_orphans=False,  # Remove undefined service containers\n    timeout=None,          # Shutdown timeout (e.g., \"30s\")\n)\n```\n\n#### logs()\n```python\ndc.logs(\n    services=None,         # Services to show logs for\n    follow=False,          # Follow log output\n    timestamps=False,      # Show timestamps\n    tail=None,             # Number of lines (e.g., \"100\")\n    since=None,            # Show logs since timestamp\n)\n```\n\n#### exec()\n```python\ndc.exec(\n    service,               # Service name\n    command,               # Command as list of strings\n    detach=False,          # Run in background\n    tty=True,              # Allocate pseudo-TTY\n    user=None,             # Run as user\n    workdir=None,          # Working directory\n    env=None,              # Environment variables dict\n)\n```\n\n### Static Methods\n\n```python\n# Check if Docker Compose is available\nif DockerCompose.is_available():\n    dc = DockerCompose(\"docker-compose.yml\")\n```\n\n### Properties\n\n| Property | Type | Description |\n|----------|------|-------------|\n| `compose_file` | str | Path to compose file |\n| `working_dir` | str | Working directory |\n| `project_name` | str | Project name (if set) |\n\n### Complete Example\n\n```python\nimport angreal\nfrom angreal.integrations.docker import DockerCompose\n\n@angreal.command(name=\"dev\", about=\"Start development environment\")\n@angreal.argument(name=\"build\", long=\"build\", is_flag=True, takes_value=False)\ndef dev(build=False):\n    dc = DockerCompose(\"docker-compose.yml\", project_name=\"myapp\")\n\n    if not DockerCompose.is_available():\n        print(\"Error: Docker Compose not found\")\n        return 1\n\n    result = dc.up(detach=True, build=build)\n    if not result.success:\n        print(f\"Failed: {result.stderr}\")\n        return 1\n\n    print(\"Services started:\")\n    dc.ps()\n    return 0\n\n@angreal.command(name=\"logs\", about=\"View service logs\")\n@angreal.argument(name=\"service\", long=\"service\", help=\"Service name\")\n@angreal.argument(name=\"follow\", short=\"f\", long=\"follow\", is_flag=True, takes_value=False)\ndef logs(service=None, follow=False):\n    dc = DockerCompose(\"docker-compose.yml\")\n    services = [service] if service else None\n    result = dc.logs(services=services, follow=follow, tail=\"100\")\n    print(result.stdout)\n    return 0\n```\n\n## Flox Integration\n\nCross-language development environment and services management using Flox (Nix-based).\n\n### When to Use Flox vs VirtualEnv vs Docker\n\n| Use Case | Best Integration |\n|----------|------------------|\n| Python-only project | VirtualEnv (simplest) |\n| Multi-language project | **Flox** (cross-language) |\n| Need containerized services | Docker Compose |\n| Need lightweight services | **Flox** (process-based) |\n| Team-wide consistency | **Flox** (manifest.toml) |\n\n### Import\n\n```python\nfrom angreal.integrations.flox import Flox, FloxServices, flox_required\n```\n\n### The @flox_required Decorator\n\nAutomatically manage Flox environment and services for a task:\n\n```python\nimport angreal\nfrom angreal.integrations.flox import flox_required\n\n@angreal.command(name=\"test\", about=\"Run tests with database\")\n@flox_required(\".\", services=[\"postgres\"])\ndef run_tests():\n    import subprocess\n    subprocess.run([\"pytest\", \"-v\"])\n\n# Without services\n@angreal.command(name=\"build\", about=\"Build in Flox environment\")\n@flox_required(\".\")\ndef build():\n    import subprocess\n    subprocess.run([\"npm\", \"run\", \"build\"])\n```\n\n### Flox Class\n\n```python\nfrom angreal.integrations.flox import Flox\n\n# Create instance\nflox = Flox(\".\")\n\n# Check availability\nif not Flox.is_available():\n    print(\"Install Flox: curl -fsSL https://flox.dev/install | bash\")\n\n# Check environment\nprint(f\"Exists: {flox.exists}\")\nprint(f\"Has manifest: {flox.has_manifest}\")\nprint(f\"Version: {Flox.version()}\")\n```\n\n### Flox Methods\n\n| Method | Description |\n|--------|-------------|\n| `activate()` | Activate environment in current process |\n| `deactivate()` | Restore original environment |\n| `run(cmd, args)` | Execute command in Flox environment |\n\n### Context Manager Usage\n\n```python\nfrom angreal.integrations.flox import Flox\n\nwith Flox(\".\") as flox:\n    # Environment is activated\n    exit_code, stdout, stderr = flox.run(\"node\", [\"--version\"])\n    print(f\"Node version: {stdout}\")\n# Environment is automatically deactivated\n```\n\n### Flox Services\n\n```python\nfrom angreal.integrations.flox import Flox\n\nflox = Flox(\".\")\n\n# Start services\nhandle = flox.services.start(\"postgres\", \"redis\")\n\n# Check status\nfor svc in flox.services.status():\n    print(f\"{svc.name}: {svc.status} (PID: {svc.pid})\")\n\n# View logs\nlogs = flox.services.logs(\"postgres\", tail=50)\n\n# Stop services\nhandle.stop()\n```\n\n### Cross-Session Service Management\n\n```python\nimport angreal\nfrom angreal.integrations.flox import Flox, FloxServiceHandle\n\n@angreal.command(name=\"dev-start\", about=\"Start dev services\")\ndef start_dev():\n    flox = Flox(\".\")\n    handle = flox.services.start(\"postgres\", \"redis\")\n    handle.save()  # Persists to .flox-services.json\n    print(\"Development services started\")\n\n@angreal.command(name=\"dev-stop\", about=\"Stop dev services\")\ndef stop_dev():\n    handle = FloxServiceHandle.load()\n    handle.stop()\n    print(\"Development services stopped\")\n```\n\n### Complete Flox Example\n\n```python\nimport angreal\nfrom angreal.integrations.flox import Flox, flox_required\n\n@angreal.command(name=\"status\", about=\"Show environment status\")\ndef status():\n    flox = Flox(\".\")\n    print(f\"Flox version: {Flox.version()}\")\n    print(f\"Environment: {flox.path}\")\n    print(f\"Exists: {flox.exists}\")\n    print(\"\\nServices:\")\n    for svc in flox.services.status():\n        pid_info = f\"PID {svc.pid}\" if svc.pid else \"stopped\"\n        print(f\"  {svc.name}: {svc.status} ({pid_info})\")\n\n@angreal.command(name=\"test\", about=\"Run tests\")\n@flox_required(\".\", services=[\"postgres\"])\ndef test():\n    import subprocess\n    return subprocess.run([\"pytest\", \"-v\"]).returncode\n```\n\n## Combining Integrations\n\n```python\nimport angreal\nfrom angreal.integrations.git import Git\nfrom angreal.integrations.docker import DockerCompose\nfrom angreal.integrations.venv import VirtualEnv\n\n@angreal.command(name=\"ci\", about=\"Run CI pipeline locally\")\ndef ci():\n    git = Git()\n\n    # Ensure clean state\n    _, _, status = git.status(short=True)\n    if status.strip():\n        print(\"Commit or stash changes first\")\n        return 1\n\n    # Start services\n    dc = DockerCompose(\"docker-compose.test.yml\")\n    dc.up(detach=True, build=True)\n\n    try:\n        # Run tests in venv\n        with VirtualEnv(\".venv\", requirements=\"requirements-test.txt\") as venv:\n            import subprocess\n            result = subprocess.run([\"pytest\", \"-v\"])\n            return result.returncode\n    finally:\n        dc.down(volumes=True)\n```\n",
        "plugin/skills/angreal-patterns/SKILL.md": "---\nname: angreal-patterns\ndescription: This skill should be used when the user asks to \"test angreal tasks\", \"mock angreal\", \"document tasks\", \"angreal best practices\", \"error handling in tasks\", \"subprocess patterns\", \"dry run mode\", \"verbose mode\", or needs guidance on testing patterns, development workflows, documentation strategies, or common implementation patterns for angreal tasks.\nversion: 2.8.0\n---\n\n# Angreal Patterns\n\nCommon patterns for testing, documenting, and developing angreal tasks.\n\n## Testing Patterns\n\n### Unit Testing Task Functions\n\n```python\n# tests/test_build.py\nimport sys\nsys.path.insert(0, \".angreal\")\nfrom task_build import build\n\ndef test_build_debug_mode():\n    result = build(release=False)\n    assert result == 0\n\ndef test_build_release_mode():\n    result = build(release=True)\n    assert result == 0\n```\n\n### Mocking External Commands\n\n```python\nfrom unittest.mock import patch, MagicMock\n\ndef test_run_tests_success():\n    with patch(\"subprocess.run\") as mock_run:\n        mock_run.return_value = MagicMock(returncode=0)\n        from task_test import run_tests\n        result = run_tests()\n        assert result == 0\n```\n\n### Mocking angreal.get_root()\n\n```python\n# tests/conftest.py\nimport pytest\nfrom pathlib import Path\n\n@pytest.fixture\ndef temp_project(tmp_path):\n    \"\"\"Create temporary project structure.\"\"\"\n    angreal_dir = tmp_path / \".angreal\"\n    angreal_dir.mkdir()\n    (tmp_path / \"src\").mkdir()\n    return tmp_path\n\n@pytest.fixture\ndef mock_root(temp_project, monkeypatch):\n    \"\"\"Mock get_root() to return .angreal/ directory.\"\"\"\n    import angreal\n    angreal_dir = temp_project / \".angreal\"\n    monkeypatch.setattr(angreal, \"get_root\", lambda: angreal_dir)\n    return temp_project  # Return project root for assertions\n```\n\n### Testing Output\n\n```python\ndef test_task_output(capsys):\n    from task_status import status\n    status()\n    captured = capsys.readouterr()\n    assert \"Project Status\" in captured.out\n```\n\n## Development Patterns\n\n### Verbose Mode\n\n```python\nimport angreal\n\n@angreal.command(name=\"build\", about=\"Build project\")\n@angreal.argument(name=\"verbose\", short=\"v\", long=\"verbose\",\n                  is_flag=True, takes_value=False)\ndef build(verbose=False):\n    if verbose:\n        print(\"Starting build...\")\n\n    do_build()\n\n    if verbose:\n        print(\"Build complete!\")\n```\n\n### Quiet Mode\n\n```python\n@angreal.command(name=\"check\", about=\"Run checks\")\n@angreal.argument(name=\"quiet\", short=\"q\", long=\"quiet\",\n                  is_flag=True, takes_value=False)\ndef check(quiet=False):\n    issues = run_checks()\n\n    if not issues:\n        if not quiet:\n            print(\"All checks passed!\")\n        return 0\n\n    if not quiet:\n        for issue in issues:\n            print(f\"  - {issue}\")\n    return 1\n```\n\n### Dry Run Mode\n\n```python\nimport angreal\nimport shutil\nimport os\n\n@angreal.command(name=\"clean\", about=\"Clean build artifacts\")\n@angreal.argument(name=\"dry_run\", short=\"n\", long=\"dry-run\",\n                  is_flag=True, takes_value=False)\ndef clean(dry_run=False):\n    project_root = angreal.get_root().parent\n    targets = [\"dist/\", \"build/\", \".cache/\"]\n\n    for target in targets:\n        path = project_root / target\n        if path.exists():\n            if dry_run:\n                print(f\"Would remove: {path}\")\n            else:\n                print(f\"Removing: {path}\")\n                shutil.rmtree(path)\n\n    if dry_run:\n        print(\"\\nDry run - no changes made.\")\n```\n\n### Progress Indicators\n\n```python\n@angreal.command(name=\"test\", about=\"Run tests\")\ndef test():\n    tests = discover_tests()\n    for i, test in enumerate(tests, 1):\n        print(f\"[{i}/{len(tests)}] Running {test}...\")\n        run_test(test)\n    print(\"All tests complete!\")\n```\n\n## Subprocess Patterns\n\n### Running Commands in Project Root\n\n```python\nimport subprocess\nimport angreal\n\ndef run_in_project(cmd, **kwargs):\n    \"\"\"Run command in project root.\"\"\"\n    project_root = angreal.get_root().parent\n    defaults = {\n        \"cwd\": project_root,\n        \"capture_output\": True,\n        \"text\": True\n    }\n    defaults.update(kwargs)\n    return subprocess.run(cmd, **defaults)\n```\n\n### Streaming Output\n\n```python\n@angreal.command(name=\"test\", about=\"Run tests\")\ndef test():\n    project_root = angreal.get_root().parent\n\n    process = subprocess.Popen(\n        [\"pytest\", \"-v\"],\n        cwd=project_root,\n        stdout=subprocess.PIPE,\n        stderr=subprocess.STDOUT,\n        text=True\n    )\n\n    for line in process.stdout:\n        print(line, end=\"\")\n\n    return process.wait()\n```\n\n### Handling Failures\n\n```python\ndef run_or_fail(cmd, error_msg):\n    \"\"\"Run command, exit on failure.\"\"\"\n    result = subprocess.run(cmd, capture_output=True, text=True)\n\n    if result.returncode != 0:\n        print(f\"Error: {error_msg}\")\n        if result.stderr:\n            print(result.stderr)\n        return 1\n\n    return 0\n```\n\n## Error Handling Patterns\n\n### Fail Fast\n\n```python\n@angreal.command(name=\"deploy\", about=\"Deploy application\")\ndef deploy():\n    # Check all prerequisites first\n    if not check_credentials():\n        print(\"Error: Missing credentials\")\n        return 1\n\n    if not check_build_exists():\n        print(\"Error: No build. Run 'angreal build' first.\")\n        return 1\n\n    # Only proceed if everything ready\n    do_deploy()\n    return 0\n```\n\n### Informative Error Messages\n\n```python\ndef validate_env(env):\n    valid = [\"development\", \"staging\", \"production\"]\n\n    if env not in valid:\n        print(f\"Error: Invalid environment '{env}'\")\n        print(f\"Valid options: {', '.join(valid)}\")\n        return False\n\n    return True\n```\n\n### Environment Variable Checking\n\n```python\nimport os\n\n@angreal.command(name=\"deploy\", about=\"Deploy\")\ndef deploy():\n    required = [\"AWS_ACCESS_KEY_ID\", \"AWS_SECRET_ACCESS_KEY\"]\n    missing = [v for v in required if not os.environ.get(v)]\n\n    if missing:\n        print(\"Error: Missing environment variables:\")\n        for var in missing:\n            print(f\"  - {var}\")\n        return 1\n\n    do_deploy()\n    return 0\n```\n\n## Documentation Patterns\n\n### Documentation Layers\n\n| Layer | Audience | Location |\n|-------|----------|----------|\n| `about` | CLI users | `--help` output |\n| `long_about` | CLI users | Detailed help |\n| `help` (args) | CLI users | Argument help |\n| `ToolDescription` | AI agents | `angreal tree --long` |\n| Docstrings | Developers | Source code |\n\n### Consistent Structure\n\n```python\n@angreal.command(\n    name=\"deploy\",\n    about=\"Deploy to environment\",  # Short for listings\n    long_about=\"\"\"\n    Deploy the application to a specified environment.\n\n    Handles: building, uploading, migrations, health checks.\n\n    Supported environments: development, staging, production\n    \"\"\",  # Detailed for --help\n    tool=angreal.ToolDescription(\"\"\"\n        Deploy application to environment.\n\n        ## When to use\n        - After tests pass\n        - When release is approved\n\n        ## Examples\n        ```\n        angreal deploy --env staging\n        ```\n        \"\"\", risk_level=\"destructive\")  # For AI agents\n)\ndef deploy():\n    \"\"\"Deploy application. (For developers reading code)\"\"\"\n    pass\n```\n\n## Anti-Patterns to Avoid\n\n### Don't Hardcode Paths\n\n```python\n# Bad\nconfig = open(\"/Users/me/project/config.yaml\")\n\n# Good\nproject_root = angreal.get_root().parent\nconfig = open(project_root / \"config.yaml\")\n```\n\n### Don't Ignore Return Codes\n\n```python\n# Bad\nsubprocess.run([\"npm\", \"install\"])\nsubprocess.run([\"npm\", \"test\"])  # Runs even if install failed\n\n# Good\nresult = subprocess.run([\"npm\", \"install\"])\nif result.returncode != 0:\n    return 1\nsubprocess.run([\"npm\", \"test\"])\n```\n\n### Don't Swallow Exceptions\n\n```python\n# Bad\ntry:\n    do_something()\nexcept:\n    pass\n\n# Good\ntry:\n    do_something()\nexcept SpecificError as e:\n    print(f\"Error: {e}\")\n    return 1\n```\n\n### Don't Require Interactive Input\n\n```python\n# Bad - breaks CI/automation\nname = input(\"Enter name: \")\n\n# Good - use arguments\n@angreal.argument(name=\"name\", long=\"name\", required=True)\ndef cmd(name):\n    pass\n```\n\n## Composing Tasks\n\n### Calling Other Task Functions\n\n```python\nfrom task_test import test_all\nfrom task_lint import lint_check\n\n@angreal.command(name=\"ci\", about=\"Run CI pipeline\")\ndef ci():\n    print(\"Running linter...\")\n    if lint_check() != 0:\n        return 1\n\n    print(\"Running tests...\")\n    if test_all() != 0:\n        return 1\n\n    print(\"CI passed!\")\n    return 0\n```\n\n## pytest.ini Configuration\n\n```ini\n[pytest]\ntestpaths = tests\npythonpath = .angreal\n\nmarkers =\n    unit: Unit tests\n    integration: Integration tests\n```\n",
        "plugin/skills/angreal-templates/SKILL.md": "---\nname: angreal-templates\ndescription: This skill should be used when the user asks to \"create an angreal template\", \"make a project template\", \"build a reusable template\", \"share a template\", \"write angreal.toml\", \"use Tera templating\", \"template variables\", \"conditional templates\", or needs guidance on creating templates that others can consume via `angreal init`, template configuration, Tera syntax, or publishing templates.\nversion: 2.8.0\n---\n\n# Creating Angreal Templates\n\nCreate reusable project templates that others can consume via `angreal init <template>`.\n\n## What Templates Are For\n\nTemplates let you create reusable project scaffolds. Users initialize new projects with:\n\n```bash\nangreal init https://github.com/user/my-template\nangreal init /path/to/local/template\n```\n\nThis is different from `angreal-init` (adding angreal to existing projects) - templates create entirely new projects from scratch.\n\n## Template Structure\n\nEvery angreal template follows this structure:\n\n```\nmy-template/\n├── angreal.toml              # Template configuration (required)\n├── {{ project_name }}/       # Templated directories\n│   ├── src/\n│   └── tests/\n├── README.md                 # Templated files\n├── static_file.txt           # Static files (copied as-is)\n└── .angreal/                 # Optional: post-init tasks\n    ├── init.py               # Post-initialization script\n    └── task_*.py             # Template-specific tasks\n```\n\n## Template Configuration (angreal.toml)\n\nThe `angreal.toml` file defines template variables at the root level:\n\n```toml\n# Variables with defaults - users will be prompted for these\nproject_name = \"my-project\"\nauthor_name = \"Anonymous\"\ndescription = \"A new project\"\nlicense = \"MIT\"\nuse_docker = false\npython_version = \"3.11\"\n\n# Optional: Custom prompts for better UX\n[prompt]\nproject_name = \"Enter your project name\"\nauthor_name = \"Enter your name\"\nlicense = \"Choose a license (MIT, Apache-2.0, GPL-3.0)\"\n\n# Optional: Validation rules\n[validation]\nproject_name.not_empty = true\nproject_name.length_min = 3\nlicense.allowed_values = [\"MIT\", \"Apache-2.0\", \"GPL-3.0\"]\n```\n\n### Variable Types\n\n```toml\n# String variables\nproject_name = \"default-name\"\nauthor = \"Your Name\"\n\n# Boolean variables\nuse_docker = false\ninclude_tests = true\n\n# Numeric variables\nport = 8080\n\n# List variables\ndependencies = [\"requests\", \"click\", \"pydantic\"]\n```\n\n### Custom Prompts ([prompt] section)\n\nCustomize what users see when providing values:\n\n```toml\n[prompt]\nproject_name = \"Enter your project name (lowercase, no spaces)\"\nauthor_email = \"Your email address\"\nuse_docker = \"Include Docker support? (y/n)\"\n```\n\n### Validation Rules ([validation] section)\n\nValidate user input with these options:\n\n```toml\n[validation]\n# Required field\nproject_name.not_empty = true\n\n# String length\nusername.length_min = 3\nusername.length_max = 20\n\n# Numeric range\nport.type = \"integer\"\nport.min = 1024\nport.max = 65535\n\n# Allowed values\nlicense.allowed_values = [\"MIT\", \"Apache-2.0\", \"GPL-3.0\"]\n\n# Regex pattern\nemail.regex_match = \"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}$\"\n```\n\n## Tera Templating Engine\n\nAngreal uses [Tera](https://keats.github.io/tera/docs/) (similar to Jinja2) for templating.\n\n### Variable Substitution\n\n```markdown\n# {{ project_name }}\n\n{{ description }}\n\nCreated by {{ author_name }}\n```\n\n### Conditionals\n\n```markdown\n# {{ project_name }}\n\n{% if use_docker %}\n## Docker\n\nBuild and run with Docker:\n\n```bash\ndocker build -t {{ project_name }} .\ndocker run {{ project_name }}\n```\n{% endif %}\n\n{% if include_tests %}\n## Testing\n\n```bash\npytest tests/\n```\n{% endif %}\n```\n\n### Loops\n\n```python\n# requirements.txt\n{% for dep in dependencies %}\n{{ dep }}\n{% endfor %}\n```\n\n### Filters\n\n```markdown\n# {{ project_name | title }}\n\nPackage: {{ project_name | lower | replace(from=\" \", to=\"-\") }}\nClass: {{ project_name | title | replace(from=\" \", to=\"\") }}\n```\n\nCommon filters:\n- `upper` / `lower` - Change case\n- `title` - Title case\n- `replace(from=\"x\", to=\"y\")` - Replace text\n- `trim` - Remove whitespace\n\n## Templated Names\n\n### Directory Names\n\n```\nmy-template/\n└── {{ project_name }}/\n    ├── {{ project_name }}/\n    │   └── __init__.py\n    └── tests/\n```\n\nWith `project_name = \"my-app\"` creates:\n```\nmy-app/\n├── my-app/\n│   └── __init__.py\n└── tests/\n```\n\n### File Names\n\n```\n{{ project_name }}.py\ntest_{{ project_name }}.py\n```\n\n## Escaping Template Syntax\n\nUse `{% raw %}` to preserve template syntax in output files:\n\n```\n{% raw %}\n{\n  \"name\": \"{{ package_name }}\",\n  \"scripts\": {\n    \"test\": \"jest\"\n  }\n}\n{% endraw %}\n```\n\nThis outputs the literal `{{ package_name }}` without substitution. Use for:\n- JSON files with curly braces\n- Jinja/Tera templates you want to include in generated projects\n- Documentation showing template examples\n\n## Conditional File/Directory Creation\n\nControl which files and directories are created based on template variables.\n\n### Conditional File Content (Empty = No File)\n\nCreate files that are empty (and thus effectively skipped) when conditions aren't met:\n\n```\n{# Dockerfile - only has content if use_docker is true #}\n{% if use_docker %}\nFROM python:{{ python_version }}\nWORKDIR /app\nCOPY . .\nRUN pip install -e .\nCMD [\"python\", \"-m\", \"{{ project_name }}\"]\n{% endif %}\n```\n\n### Conditional Directories via Post-Init Script\n\nUse `.angreal/init.py` to create or remove directories based on variables:\n\n```python\n# .angreal/init.py\nimport shutil\nimport os\nimport angreal\n\ndef init():\n    context = angreal.get_context()\n    project = context.get('project_name', 'project')\n\n    # Conditionally create directories\n    if context.get('include_docs', False):\n        os.makedirs(f\"{project}/docs\", exist_ok=True)\n\n    # Remove directories if feature not selected\n    if not context.get('use_docker', False):\n        docker_path = f\"{project}/docker\"\n        if os.path.exists(docker_path):\n            shutil.rmtree(docker_path)\n\n    # Remove optional files\n    if not context.get('include_ci', False):\n        ci_file = f\"{project}/.github/workflows/ci.yml\"\n        if os.path.exists(ci_file):\n            os.remove(ci_file)\n```\n\n### Pattern: Optional Feature Directories\n\nStructure your template with optional feature directories:\n\n```\nmy-template/\n├── angreal.toml\n├── {{ project_name }}/\n│   ├── src/                    # Always included\n│   ├── tests/                  # Always included\n│   ├── docker/                 # Removed if use_docker=false\n│   │   ├── Dockerfile\n│   │   └── docker-compose.yml\n│   ├── docs/                   # Removed if include_docs=false\n│   │   └── index.md\n│   └── .github/                # Removed if include_ci=false\n│       └── workflows/\n│           └── ci.yml\n└── .angreal/\n    └── init.py                 # Handles conditional removal\n```\n\n```toml\n# angreal.toml\nproject_name = \"my-project\"\nuse_docker = false\ninclude_docs = true\ninclude_ci = true\n\n[prompt]\nuse_docker = \"Include Docker support? (y/n)\"\ninclude_docs = \"Include documentation? (y/n)\"\ninclude_ci = \"Include CI/CD config? (y/n)\"\n```\n\n### Pattern: Conditional Config Files\n\nInclude config files only when needed:\n\n```python\n# .angreal/init.py\nimport os\nimport angreal\n\ndef init():\n    context = angreal.get_context()\n    project = context.get('project_name')\n\n    # Create pytest.ini only if using pytest\n    if context.get('use_pytest', False):\n        with open(f\"{project}/pytest.ini\", 'w') as f:\n            f.write(\"[pytest]\\ntestpaths = tests\\n\")\n\n    # Create .env.example only if using env vars\n    if context.get('use_env_vars', False):\n        env_vars = context.get('env_vars', ['DEBUG', 'API_KEY'])\n        with open(f\"{project}/.env.example\", 'w') as f:\n            for var in env_vars:\n                f.write(f\"{var}=\\n\")\n```\n\n### Pattern: Choose Between Alternatives\n\nLet users choose between mutually exclusive options:\n\n```toml\n# angreal.toml\nproject_name = \"my-app\"\nweb_framework = \"flask\"\n\n[prompt]\nweb_framework = \"Choose web framework (flask, fastapi, django)\"\n\n[validation]\nweb_framework.allowed_values = [\"flask\", \"fastapi\", \"django\"]\n```\n\n```python\n# .angreal/init.py\nimport shutil\nimport os\nimport angreal\n\ndef init():\n    context = angreal.get_context()\n    project = context.get('project_name')\n    framework = context.get('web_framework', 'flask')\n\n    # Template includes all framework options\n    frameworks = ['flask', 'fastapi', 'django']\n\n    # Remove non-selected framework files\n    for fw in frameworks:\n        if fw != framework:\n            fw_dir = f\"{project}/templates/{fw}\"\n            if os.path.exists(fw_dir):\n                shutil.rmtree(fw_dir)\n\n    # Rename selected framework dir\n    selected = f\"{project}/templates/{framework}\"\n    if os.path.exists(selected):\n        # Move contents up and remove framework dir\n        for item in os.listdir(selected):\n            shutil.move(f\"{selected}/{item}\", f\"{project}/{item}\")\n        os.rmdir(selected)\n        os.rmdir(f\"{project}/templates\")\n```\n\n## Post-Initialization Script\n\nCreate `.angreal/init.py` to run code after template rendering:\n\n```python\n\"\"\"Post-initialization script.\"\"\"\nimport subprocess\nimport angreal\n\ndef init():\n    \"\"\"Run after template is rendered.\"\"\"\n    context = angreal.get_context()\n    project_name = context.get('project_name', 'project')\n\n    print(f\"Initializing {project_name}...\")\n\n    # Initialize git\n    subprocess.run(['git', 'init'], cwd=project_name)\n\n    # Install dependencies if requested\n    if context.get('install_dependencies', False):\n        subprocess.run(\n            ['pip', 'install', '-r', 'requirements.txt'],\n            cwd=project_name\n        )\n\n    print(f\"Done! Next steps:\")\n    print(f\"  cd {project_name}\")\n    print(f\"  angreal tree\")\n```\n\n## Template-Specific Tasks\n\nAdd tasks useful for projects created from your template:\n\n```python\n# .angreal/task_setup.py\nimport angreal\nimport subprocess\n\n@angreal.command(name=\"setup\", about=\"Set up development environment\")\ndef setup():\n    \"\"\"Initialize the development environment.\"\"\"\n    project_root = angreal.get_root().parent\n\n    print(\"Creating virtual environment...\")\n    subprocess.run(['python', '-m', 'venv', '.venv'], cwd=project_root)\n\n    print(\"Installing dependencies...\")\n    subprocess.run(\n        ['.venv/bin/pip', 'install', '-r', 'requirements.txt'],\n        cwd=project_root\n    )\n\n    print(\"Setup complete!\")\n    return 0\n```\n\n## Complete Template Example\n\n### Directory Structure\n\n```\npython-template/\n├── angreal.toml\n├── {{ project_name }}/\n│   ├── {{ project_name }}/\n│   │   └── __init__.py\n│   ├── tests/\n│   │   └── test_main.py\n│   ├── README.md\n│   ├── pyproject.toml\n│   └── .gitignore\n└── .angreal/\n    ├── init.py\n    └── task_dev.py\n```\n\n### angreal.toml\n\n```toml\n# Variables at root level\nproject_name = \"my-project\"\nauthor = \"Your Name\"\nemail = \"you@example.com\"\ndescription = \"A Python project\"\npython_version = \"3.11\"\nuse_pytest = true\n\n# Custom prompts\n[prompt]\nproject_name = \"Enter your project name\"\nauthor = \"Your full name\"\nemail = \"Your email address\"\n\n# Validation\n[validation]\nproject_name.not_empty = true\nproject_name.length_min = 3\nemail.regex_match = \"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}$\"\n```\n\n### {{ project_name }}/README.md\n\n```markdown\n# {{ project_name }}\n\n{{ description }}\n\n## Installation\n\n```bash\npip install -e .\n```\n\n{% if use_pytest %}\n## Testing\n\n```bash\npytest\n```\n{% endif %}\n\n## Author\n\n{{ author }} <{{ email }}>\n```\n\n### {{ project_name }}/pyproject.toml\n\n```toml\n[project]\nname = \"{{ project_name }}\"\nversion = \"0.1.0\"\ndescription = \"{{ description }}\"\nauthors = [\n    {name = \"{{ author }}\", email = \"{{ email }}\"}\n]\nrequires-python = \">={{ python_version }}\"\n\n{% if use_pytest %}\n[project.optional-dependencies]\ndev = [\"pytest\"]\n{% endif %}\n```\n\n## Publishing Templates\n\n### GitHub\n\n1. Create a repository with your template\n2. Users consume via: `angreal init https://github.com/user/template`\n\n### Local Sharing\n\n1. Share template directory\n2. Users consume via: `angreal init /path/to/template`\n\n### Best Practices\n\n1. **Include a README** - Document variables and what the template creates\n2. **Sensible defaults** - All variables should have reasonable defaults\n3. **Minimal prompts** - Don't ask for too many variables\n4. **Include .gitignore** - Template should create git-ready projects\n5. **Add setup task** - Include `.angreal/` with dev setup commands\n6. **Test your template** - Run `angreal init` on your own template\n\n## Template API Functions\n\nFor advanced use in tasks:\n\n```python\nimport angreal\n\n# Render a template STRING (not a file!)\n# Takes a template string and returns the rendered result\ntemplate = \"Hello {{ name }}!\"\nresult = angreal.render_template(template, {\"name\": \"World\"})\n# result == \"Hello World!\"\n\n# Render entire directory (positional args: src, dst, force, context)\nrendered_files = angreal.render_directory(\n    \"templates/project\",\n    \"my-project\",\n    False,\n    {\"project_name\": \"My Project\"}\n)\n# Returns list of created file paths\n\n# Generate context from angreal.toml\n# Parameters: path, take_input\ncontext = angreal.generate_context(\n    path=\"angreal.toml\",\n    take_input=True  # Prompt user for values\n)\n\n# Get current template context (during template initialization)\ncontext = angreal.get_context()\n```\n\n### Function Signatures\n\n```python\n# Render a template string\nangreal.render_template(template: str, context: dict) -> str\n\n# Render a templated directory (context is optional)\nangreal.render_directory(src: str, dst: str, force: bool, context: dict | None) -> list[str]\n\n# Generate context from TOML file\nangreal.generate_context(path: str, take_input: bool) -> dict\n```\n",
        "plugin/skills/angreal-tool-descriptions/SKILL.md": "---\nname: angreal-tool-descriptions\ndescription: This skill should be used when the user asks to \"write a ToolDescription\", \"add AI guidance to task\", \"document task for AI\", \"set risk level\", \"write tool description prose\", \"guide AI agents\", or needs guidance on angreal.ToolDescription, risk_level, writing effective descriptions for AI agent consumption, or making tasks AI-friendly.\nversion: 2.8.0\n---\n\n# Angreal ToolDescriptions\n\nWrite effective ToolDescription prose to guide AI agents using your tasks.\n\n## Why ToolDescriptions Matter\n\nWhen AI agents discover tasks via `angreal tree --long`, they see:\n- Command name and arguments\n- **Your ToolDescription**\n\nThe ToolDescription is the primary guidance for AI agents deciding whether and how to use your task. Think of it as a mini-prompt that teaches agents when and how to use your tool.\n\n## Basic Usage\n\n```python\nimport angreal\n\n@angreal.command(\n    name=\"deploy\",\n    about=\"Deploy to environment\",\n    tool=angreal.ToolDescription(\n        \"\"\"\n        Deploy the application to a specified environment.\n\n        ## When to use\n        - After successful build and tests pass\n        - When user explicitly requests deployment\n\n        ## When NOT to use\n        - Directly from feature branches\n        - Without running tests first\n\n        ## Examples\n        ```\n        angreal deploy --env staging\n        angreal deploy --env production --version v1.2.3\n        ```\n        \"\"\",\n        risk_level=\"destructive\"\n    )\n)\ndef deploy(env, version=None):\n    pass\n```\n\n## ToolDescription Constructor\n\n```python\nangreal.ToolDescription(\n    description,          # Prose description (required)\n    risk_level=\"safe\"     # \"safe\", \"read_only\", or \"destructive\"\n)\n```\n\n## Risk Levels\n\n| Level | Meaning | Use When |\n|-------|---------|----------|\n| `safe` | No destructive effects | Default. Build, test, lint tasks |\n| `read_only` | Only reads/reports | Status checks, info gathering |\n| `destructive` | May modify or delete | Deploy, clean, database migrations |\n\n## Structuring Descriptions\n\nUse consistent markdown sections:\n\n```python\ntool=angreal.ToolDescription(\n    \"\"\"\n    One-line summary of what the tool does.\n\n    ## When to use\n    - Scenario 1\n    - Scenario 2\n\n    ## When NOT to use\n    - Anti-pattern 1\n    - Anti-pattern 2\n\n    ## Examples\n    Concrete invocation examples with real arguments\n\n    ## Preconditions\n    What must be true before running\n\n    ## Output\n    What to expect from the tool\n    \"\"\",\n    risk_level=\"safe\"\n)\n```\n\n## Writing Effective Descriptions\n\n### Be Specific About Context\n\n**Bad:**\n```python\ntool=angreal.ToolDescription(\"Runs tests\")\n```\n\n**Good:**\n```python\ntool=angreal.ToolDescription(\n    \"\"\"\n    Run the complete test suite including unit and integration tests.\n\n    ## When to use\n    - Before committing changes\n    - After pulling changes to verify environment\n    - As part of CI/CD validation\n\n    ## Output\n    Returns exit code 0 if all tests pass, non-zero otherwise.\n    \"\"\"\n)\n```\n\n### Include Concrete Examples\n\n```python\ntool=angreal.ToolDescription(\n    \"\"\"\n    Build documentation from source.\n\n    ## Examples\n    ```\n    # Build to default output\n    angreal docs build\n\n    # Build with specific output path\n    angreal docs build --output ./site\n\n    # Build in watch mode\n    angreal docs build --watch\n    ```\n    \"\"\"\n)\n```\n\n### Document Failure Modes\n\n```python\ntool=angreal.ToolDescription(\n    \"\"\"\n    Install project dependencies.\n\n    ## Common Failures\n    - **Network error**: Check internet connectivity\n    - **Permission denied**: May need sudo or virtual environment\n    - **Version conflict**: Check requirements.txt\n\n    ## Recovery\n    If installation fails:\n    1. Clear cache: `angreal dev clean-cache`\n    2. Retry installation\n    \"\"\"\n)\n```\n\n### Describe Relationships\n\n```python\ntool=angreal.ToolDescription(\n    \"\"\"\n    Run unit tests only (fast).\n\n    ## Related Tasks\n    - `test.integration` - Integration tests (slower)\n    - `test.all` - Complete test suite\n    - `lint.check` - Check style (run before tests)\n\n    ## Typical Workflow\n    1. `angreal lint check`\n    2. `angreal test unit` - Fast feedback\n    3. `angreal test all` - Full validation\n    \"\"\"\n)\n```\n\n## Examples by Task Type\n\n### Build Task\n\n```python\ntool=angreal.ToolDescription(\n    \"\"\"\n    Build the project for release distribution.\n\n    ## When to use\n    - Creating a release build\n    - Before running deployment tasks\n\n    ## Preconditions\n    - Dependencies installed (`angreal dev check-deps`)\n    - Source compiles without errors\n\n    ## Output\n    - Artifacts written to `dist/`\n    - Returns 0 on success\n    \"\"\",\n    risk_level=\"safe\"\n)\n```\n\n### Database Migration\n\n```python\ntool=angreal.ToolDescription(\n    \"\"\"\n    Apply pending database migrations.\n\n    ## When to use\n    - After pulling changes with new migrations\n    - During deployment to update schema\n\n    ## When NOT to use\n    - On production without backup\n    - Without reviewing migration contents\n\n    ## Recovery\n    If migration fails:\n    1. Check migration logs\n    2. Run `angreal db rollback`\n    3. Fix and retry\n    \"\"\",\n    risk_level=\"destructive\"\n)\n```\n\n### Status Check\n\n```python\ntool=angreal.ToolDescription(\n    \"\"\"\n    Check project status and health.\n\n    ## When to use\n    - Starting work to understand state\n    - Debugging to gather context\n    - Verifying environment setup\n\n    ## Output\n    Reports on git branch, dependencies, build state, test summary.\n    \"\"\",\n    risk_level=\"read_only\"\n)\n```\n\n## Best Practices\n\n### Do\n\n- Write from the agent's perspective\n- Include specific, actionable guidance\n- Use markdown formatting for structure\n- Document preconditions and postconditions\n- Show example invocations with realistic arguments\n- Explain error scenarios and recovery\n\n### Don't\n\n- Write generic descriptions\n- Assume the agent knows project context\n- Leave out critical preconditions\n- Skip risk_level for destructive operations\n- Write walls of text without structure\n",
        "plugin/skills/angreal-usage/SKILL.md": "---\nname: angreal-usage\ndescription: This skill should be used when the user asks to \"run an angreal task\", \"execute angreal command\", \"discover angreal tasks\", \"list angreal commands\", \"use angreal tree\", \"find available tasks\", \"what tasks are available\", or needs guidance on running tasks, interpreting task output, task workflows, or choosing the right task for a job.\nversion: 2.8.0\n---\n\n# Using Angreal Tasks\n\nLearn to discover, run, and chain angreal tasks effectively.\n\n## Prerequisites\n\n- Working within an angreal project (has `.angreal/` directory)\n- `angreal` CLI installed and available\n\n## Discovering Tasks\n\n### Quick Discovery\n\n```bash\nangreal tree\n```\n\nShows all commands with arguments and short descriptions:\n\n```\ndev: development utilities\n  check-deps - Verify required development tools are installed\ntest: commands for testing the application\n  all - Run complete test suite\n  rust [--unit-only] - Run Rust tests\ndocs: commands for documentation\n  build [--draft] - Build documentation site\n```\n\n### Detailed Discovery (AI Guidance)\n\n```bash\nangreal tree --long\n```\n\nIncludes full ToolDescription prose for each command:\n- **When to use** - Appropriate scenarios\n- **When NOT to use** - Situations to avoid\n- **Examples** - Concrete invocations\n- **Risk level** - safe, read_only, or destructive\n\n### Traditional Help\n\n```bash\nangreal --help              # List all commands\nangreal test rust --help    # Help for specific command\n```\n\n## Running Tasks\n\n### Basic Invocation\n\n```bash\nangreal <group> <command> [arguments]\n\n# Examples\nangreal test all\nangreal test rust --unit-only\nangreal build --release\nangreal docs serve --prod\n```\n\n### Arguments\n\n**Flags** (boolean switches):\n```bash\nangreal build --release\nangreal test rust --unit-only\n```\n\n**Value arguments**:\n```bash\nangreal deploy --version v1.2.3\nangreal test completion --shell=bash\n```\n\n## Output and Exit Codes\n\n- Exit code `0` = success\n- Non-zero exit code = failure\n\n```bash\nangreal test all && angreal deploy  # Chain with &&\n```\n\n## Common Workflows\n\n### Before Committing\n\n```bash\nangreal test unit      # Fast unit tests first\nangreal test all       # Full suite if units pass\nangreal lint check     # Check code style\n```\n\n### Release Process\n\n```bash\nangreal test all           # Ensure tests pass\nangreal build --release    # Create release build\nangreal docs build         # Update documentation\nangreal deploy staging     # Deploy to staging\n```\n\n### Debugging\n\n```bash\nangreal test <specific-test> --verbose  # Verbose output\n# Check stdout/stderr for error details\n# Fix issue, re-run specific test\nangreal test all                        # Verify no regressions\n```\n\n## Task Groups\n\nTasks are organized by function:\n\n| Group | Purpose |\n|-------|---------|\n| `dev` | Development utilities |\n| `test` | Testing commands |\n| `docs` | Documentation |\n| `build` | Build and compilation |\n| `deploy` | Deployment and release |\n\nGroups can nest: `angreal docker compose up`\n\n## Choosing the Right Task\n\n1. Run `angreal tree` to see available commands\n2. Use `angreal tree --long` for detailed guidance\n3. Start with read-only tasks to explore safely\n4. Trust ToolDescriptions - they're written to guide you\n"
      },
      "plugins": [
        {
          "name": "angreal",
          "source": "./plugin",
          "description": "Task automation skills for angreal projects. Focused skills for running tasks, authoring tasks, arguments, ToolDescriptions, project setup, creating templates, and development patterns.",
          "version": "2.9.0",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add angreal/angreal",
            "/plugin install angreal@angreal-angreal"
          ]
        }
      ]
    }
  ]
}