{
  "author": {
    "id": "the-answerai",
    "display_name": "AnswerAgent AI",
    "type": "Organization",
    "avatar_url": "https://avatars.githubusercontent.com/u/125315111?v=4",
    "url": "https://github.com/the-answerai",
    "bio": "Open Source AI Orchestration ",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 31,
      "total_commands": 33,
      "total_skills": 115,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "alphaagent-team",
      "version": null,
      "description": "AlphaAgent Team Plugin Marketplace - Claude Code plugins for autonomous coding assistance",
      "owner_info": {
        "name": "AnswerAI",
        "email": "support@answeragent.ai"
      },
      "keywords": [],
      "repo_full_name": "the-answerai/alphaagent-team",
      "repo_url": "https://github.com/the-answerai/alphaagent-team",
      "repo_description": "Public repository for agents, skills, hooks, and mcp servers that work within the alphaagent harness",
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-28T03:05:58Z",
        "created_at": "2026-01-15T22:59:43Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 9634
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 429
        },
        {
          "path": "plugins/aai-architecture/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture/agents/requirements-analyst",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture/agents/requirements-analyst/AGENT.md",
          "type": "blob",
          "size": 6936
        },
        {
          "path": "plugins/aai-architecture/agents/system-architect",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture/agents/system-architect/AGENT.md",
          "type": "blob",
          "size": 8351
        },
        {
          "path": "plugins/aai-architecture/agents/tech-lead",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture/agents/tech-lead/AGENT.md",
          "type": "blob",
          "size": 6168
        },
        {
          "path": "plugins/aai-architecture/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture/commands/technical-planning.md",
          "type": "blob",
          "size": 1263
        },
        {
          "path": "plugins/aai-architecture/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture/skills/architecture-decisions",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture/skills/architecture-decisions/SKILL.md",
          "type": "blob",
          "size": 8059
        },
        {
          "path": "plugins/aai-architecture/skills/system-design-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture/skills/system-design-patterns/SKILL.md",
          "type": "blob",
          "size": 10396
        },
        {
          "path": "plugins/aai-architecture/skills/technical-planning",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-architecture/skills/technical-planning/SKILL.md",
          "type": "blob",
          "size": 5898
        },
        {
          "path": "plugins/aai-blog",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-blog/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-blog/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 396
        },
        {
          "path": "plugins/aai-blog/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-blog/agents/announcement-writer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-blog/agents/announcement-writer/AGENT.md",
          "type": "blob",
          "size": 6119
        },
        {
          "path": "plugins/aai-blog/agents/blog-writer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-blog/agents/blog-writer/AGENT.md",
          "type": "blob",
          "size": 6010
        },
        {
          "path": "plugins/aai-blog/agents/tutorial-writer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-blog/agents/tutorial-writer/AGENT.md",
          "type": "blob",
          "size": 5824
        },
        {
          "path": "plugins/aai-blog/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-blog/commands/content-planning.md",
          "type": "blob",
          "size": 1104
        },
        {
          "path": "plugins/aai-blog/commands/research-blog.md",
          "type": "blob",
          "size": 1197
        },
        {
          "path": "plugins/aai-blog/commands/review-blog.md",
          "type": "blob",
          "size": 1175
        },
        {
          "path": "plugins/aai-blog/commands/write-blog.md",
          "type": "blob",
          "size": 1151
        },
        {
          "path": "plugins/aai-blog/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-blog/skills/content-planning",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-blog/skills/content-planning/SKILL.md",
          "type": "blob",
          "size": 5636
        },
        {
          "path": "plugins/aai-blog/skills/technical-writing",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-blog/skills/technical-writing/SKILL.md",
          "type": "blob",
          "size": 5411
        },
        {
          "path": "plugins/aai-core",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 596
        },
        {
          "path": "plugins/aai-core/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/agents/git-pr-manager.md",
          "type": "blob",
          "size": 2704
        },
        {
          "path": "plugins/aai-core/agents/git-pr-reviewer.md",
          "type": "blob",
          "size": 3432
        },
        {
          "path": "plugins/aai-core/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/commands/bug.md",
          "type": "blob",
          "size": 4359
        },
        {
          "path": "plugins/aai-core/commands/fix-tests.md",
          "type": "blob",
          "size": 5992
        },
        {
          "path": "plugins/aai-core/commands/implement-task.md",
          "type": "blob",
          "size": 3341
        },
        {
          "path": "plugins/aai-core/commands/plan-feature.md",
          "type": "blob",
          "size": 3716
        },
        {
          "path": "plugins/aai-core/commands/review.md",
          "type": "blob",
          "size": 5188
        },
        {
          "path": "plugins/aai-core/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/skills/api-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/skills/api-patterns/SKILL.md",
          "type": "blob",
          "size": 7089
        },
        {
          "path": "plugins/aai-core/skills/branch-workflow",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/skills/branch-workflow/SKILL.md",
          "type": "blob",
          "size": 3027
        },
        {
          "path": "plugins/aai-core/skills/commit-helper",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/skills/commit-helper/SKILL.md",
          "type": "blob",
          "size": 2498
        },
        {
          "path": "plugins/aai-core/skills/defensive-api-handling",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/skills/defensive-api-handling/SKILL.md",
          "type": "blob",
          "size": 5174
        },
        {
          "path": "plugins/aai-core/skills/pr-review",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/skills/pr-review/SKILL.md",
          "type": "blob",
          "size": 2179
        },
        {
          "path": "plugins/aai-core/skills/push",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/skills/push/SKILL.md",
          "type": "blob",
          "size": 2344
        },
        {
          "path": "plugins/aai-core/skills/security-analysis",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/skills/security-analysis/SKILL.md",
          "type": "blob",
          "size": 5210
        },
        {
          "path": "plugins/aai-core/skills/stack-detection",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-core/skills/stack-detection/SKILL.md",
          "type": "blob",
          "size": 8423
        },
        {
          "path": "plugins/aai-dev-backend",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-backend/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-backend/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 525
        },
        {
          "path": "plugins/aai-dev-backend/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-backend/agents/backend-developer.md",
          "type": "blob",
          "size": 7344
        },
        {
          "path": "plugins/aai-dev-backend/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-backend/skills/api-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-backend/skills/api-design/SKILL.md",
          "type": "blob",
          "size": 6198
        },
        {
          "path": "plugins/aai-dev-backend/skills/authentication-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-backend/skills/authentication-patterns/SKILL.md",
          "type": "blob",
          "size": 8658
        },
        {
          "path": "plugins/aai-dev-backend/skills/error-handling",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-backend/skills/error-handling/SKILL.md",
          "type": "blob",
          "size": 8574
        },
        {
          "path": "plugins/aai-dev-backend/skills/middleware-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-backend/skills/middleware-patterns/SKILL.md",
          "type": "blob",
          "size": 8929
        },
        {
          "path": "plugins/aai-dev-database",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-database/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-database/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 548
        },
        {
          "path": "plugins/aai-dev-database/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-database/agents/database-developer.md",
          "type": "blob",
          "size": 6378
        },
        {
          "path": "plugins/aai-dev-database/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-database/skills/data-modeling",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-database/skills/data-modeling/SKILL.md",
          "type": "blob",
          "size": 8075
        },
        {
          "path": "plugins/aai-dev-database/skills/migration-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-database/skills/migration-patterns/SKILL.md",
          "type": "blob",
          "size": 6247
        },
        {
          "path": "plugins/aai-dev-database/skills/query-optimization",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-database/skills/query-optimization/SKILL.md",
          "type": "blob",
          "size": 6620
        },
        {
          "path": "plugins/aai-dev-database/skills/schema-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-database/skills/schema-design/SKILL.md",
          "type": "blob",
          "size": 6813
        },
        {
          "path": "plugins/aai-dev-frontend",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-frontend/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-frontend/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 540
        },
        {
          "path": "plugins/aai-dev-frontend/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-frontend/agents/frontend-developer.md",
          "type": "blob",
          "size": 7733
        },
        {
          "path": "plugins/aai-dev-frontend/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-frontend/skills/accessibility-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-frontend/skills/accessibility-patterns/SKILL.md",
          "type": "blob",
          "size": 7666
        },
        {
          "path": "plugins/aai-dev-frontend/skills/component-architecture",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-frontend/skills/component-architecture/SKILL.md",
          "type": "blob",
          "size": 5493
        },
        {
          "path": "plugins/aai-dev-frontend/skills/responsive-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-frontend/skills/responsive-design/SKILL.md",
          "type": "blob",
          "size": 6830
        },
        {
          "path": "plugins/aai-dev-frontend/skills/state-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-frontend/skills/state-management/SKILL.md",
          "type": "blob",
          "size": 6316
        },
        {
          "path": "plugins/aai-dev-fullstack",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-fullstack/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-fullstack/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 410
        },
        {
          "path": "plugins/aai-dev-fullstack/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-fullstack/agents/fullstack-developer.md",
          "type": "blob",
          "size": 7370
        },
        {
          "path": "plugins/aai-dev-fullstack/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-fullstack/skills/fullstack-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-dev-fullstack/skills/fullstack-patterns/SKILL.md",
          "type": "blob",
          "size": 9214
        },
        {
          "path": "plugins/aai-devops",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-devops/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-devops/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 399
        },
        {
          "path": "plugins/aai-devops/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-devops/agents/cicd-engineer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-devops/agents/cicd-engineer/AGENT.md",
          "type": "blob",
          "size": 7069
        },
        {
          "path": "plugins/aai-devops/agents/deployment-specialist",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-devops/agents/deployment-specialist/AGENT.md",
          "type": "blob",
          "size": 7919
        },
        {
          "path": "plugins/aai-devops/agents/infrastructure-engineer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-devops/agents/infrastructure-engineer/AGENT.md",
          "type": "blob",
          "size": 7411
        },
        {
          "path": "plugins/aai-devops/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-devops/commands/ci-setup.md",
          "type": "blob",
          "size": 1113
        },
        {
          "path": "plugins/aai-devops/commands/deploy-guide.md",
          "type": "blob",
          "size": 1102
        },
        {
          "path": "plugins/aai-devops/commands/docker-help.md",
          "type": "blob",
          "size": 1109
        },
        {
          "path": "plugins/aai-devops/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-devops/skills/deployment-strategies",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-devops/skills/deployment-strategies/SKILL.md",
          "type": "blob",
          "size": 7470
        },
        {
          "path": "plugins/aai-devops/skills/docker-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-devops/skills/docker-patterns/SKILL.md",
          "type": "blob",
          "size": 5228
        },
        {
          "path": "plugins/aai-devops/skills/github-actions",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-devops/skills/github-actions/SKILL.md",
          "type": "blob",
          "size": 6408
        },
        {
          "path": "plugins/aai-docs",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-docs/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-docs/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 401
        },
        {
          "path": "plugins/aai-docs/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-docs/agents/api-doc-writer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-docs/agents/api-doc-writer/AGENT.md",
          "type": "blob",
          "size": 8345
        },
        {
          "path": "plugins/aai-docs/agents/integration-doc-writer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-docs/agents/integration-doc-writer/AGENT.md",
          "type": "blob",
          "size": 7184
        },
        {
          "path": "plugins/aai-docs/agents/readme-writer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-docs/agents/readme-writer/AGENT.md",
          "type": "blob",
          "size": 5301
        },
        {
          "path": "plugins/aai-docs/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-docs/commands/api-docs.md",
          "type": "blob",
          "size": 1047
        },
        {
          "path": "plugins/aai-docs/commands/changelog.md",
          "type": "blob",
          "size": 957
        },
        {
          "path": "plugins/aai-docs/commands/write-docs.md",
          "type": "blob",
          "size": 1273
        },
        {
          "path": "plugins/aai-docs/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-docs/skills/api-documentation",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-docs/skills/api-documentation/SKILL.md",
          "type": "blob",
          "size": 6633
        },
        {
          "path": "plugins/aai-docs/skills/changelog-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-docs/skills/changelog-management/SKILL.md",
          "type": "blob",
          "size": 6870
        },
        {
          "path": "plugins/aai-docs/skills/documentation-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-docs/skills/documentation-patterns/SKILL.md",
          "type": "blob",
          "size": 5735
        },
        {
          "path": "plugins/aai-hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-hooks/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-hooks/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 648
        },
        {
          "path": "plugins/aai-hooks/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-hooks/hooks/hooks.json",
          "type": "blob",
          "size": 3217
        },
        {
          "path": "plugins/aai-hooks/hooks/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-hooks/hooks/scripts/block-master-commits.cjs",
          "type": "blob",
          "size": 3088
        },
        {
          "path": "plugins/aai-hooks/hooks/scripts/block-wrong-package-manager.cjs",
          "type": "blob",
          "size": 2836
        },
        {
          "path": "plugins/aai-hooks/hooks/scripts/inject-project-context.cjs",
          "type": "blob",
          "size": 4344
        },
        {
          "path": "plugins/aai-hooks/hooks/scripts/require-verification.cjs",
          "type": "blob",
          "size": 6721
        },
        {
          "path": "plugins/aai-hooks/hooks/scripts/validate-anti-patterns.cjs",
          "type": "blob",
          "size": 8538
        },
        {
          "path": "plugins/aai-hooks/hooks/scripts/validate-completion-claims.cjs",
          "type": "blob",
          "size": 8942
        },
        {
          "path": "plugins/aai-pm-github",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-github/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-github/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 444
        },
        {
          "path": "plugins/aai-pm-github/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-github/agents/github-issue-creator.md",
          "type": "blob",
          "size": 5828
        },
        {
          "path": "plugins/aai-pm-github/agents/github-issue-optimizer.md",
          "type": "blob",
          "size": 7089
        },
        {
          "path": "plugins/aai-pm-github/agents/github-issue-planner.md",
          "type": "blob",
          "size": 5328
        },
        {
          "path": "plugins/aai-pm-github/agents/github-issue-triager.md",
          "type": "blob",
          "size": 6934
        },
        {
          "path": "plugins/aai-pm-github/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-github/commands/issue-create.md",
          "type": "blob",
          "size": 1039
        },
        {
          "path": "plugins/aai-pm-github/commands/issue-start.md",
          "type": "blob",
          "size": 1104
        },
        {
          "path": "plugins/aai-pm-github/commands/issue-triage.md",
          "type": "blob",
          "size": 1022
        },
        {
          "path": "plugins/aai-pm-github/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-github/skills/github-issue-analysis",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-github/skills/github-issue-analysis/SKILL.md",
          "type": "blob",
          "size": 7119
        },
        {
          "path": "plugins/aai-pm-github/skills/issue-duplicate-detection",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-github/skills/issue-duplicate-detection/SKILL.md",
          "type": "blob",
          "size": 4652
        },
        {
          "path": "plugins/aai-pm-github/skills/issue-planning-workflow",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-github/skills/issue-planning-workflow/SKILL.md",
          "type": "blob",
          "size": 4744
        },
        {
          "path": "plugins/aai-pm-github/skills/issue-status-sync",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-github/skills/issue-status-sync/SKILL.md",
          "type": "blob",
          "size": 5269
        },
        {
          "path": "plugins/aai-pm-jira",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-jira/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-jira/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 456
        },
        {
          "path": "plugins/aai-pm-jira/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-jira/agents/jira-ticket-creator.md",
          "type": "blob",
          "size": 6105
        },
        {
          "path": "plugins/aai-pm-jira/agents/jira-ticket-optimizer.md",
          "type": "blob",
          "size": 6054
        },
        {
          "path": "plugins/aai-pm-jira/agents/jira-ticket-planner.md",
          "type": "blob",
          "size": 5988
        },
        {
          "path": "plugins/aai-pm-jira/agents/jira-ticket-triager.md",
          "type": "blob",
          "size": 6065
        },
        {
          "path": "plugins/aai-pm-jira/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-jira/commands/jira-create.md",
          "type": "blob",
          "size": 1091
        },
        {
          "path": "plugins/aai-pm-jira/commands/jira-start.md",
          "type": "blob",
          "size": 1120
        },
        {
          "path": "plugins/aai-pm-jira/commands/jira-triage.md",
          "type": "blob",
          "size": 1017
        },
        {
          "path": "plugins/aai-pm-jira/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-jira/skills/jira-duplicate-detection",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-jira/skills/jira-duplicate-detection/SKILL.md",
          "type": "blob",
          "size": 6721
        },
        {
          "path": "plugins/aai-pm-jira/skills/jira-sprint-planning",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-jira/skills/jira-sprint-planning/SKILL.md",
          "type": "blob",
          "size": 6182
        },
        {
          "path": "plugins/aai-pm-jira/skills/jira-status-sync",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-jira/skills/jira-status-sync/SKILL.md",
          "type": "blob",
          "size": 7515
        },
        {
          "path": "plugins/aai-pm-jira/skills/jira-ticket-analysis",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-jira/skills/jira-ticket-analysis/SKILL.md",
          "type": "blob",
          "size": 6604
        },
        {
          "path": "plugins/aai-pm-jira/skills/jira-ticket-create",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-jira/skills/jira-ticket-create/SKILL.md",
          "type": "blob",
          "size": 5242
        },
        {
          "path": "plugins/aai-pm-linear",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-linear/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-linear/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 552
        },
        {
          "path": "plugins/aai-pm-linear/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-linear/agents/linear-ticket-creator.md",
          "type": "blob",
          "size": 4797
        },
        {
          "path": "plugins/aai-pm-linear/agents/linear-ticket-optimizer.md",
          "type": "blob",
          "size": 4751
        },
        {
          "path": "plugins/aai-pm-linear/agents/linear-ticket-planner.md",
          "type": "blob",
          "size": 4852
        },
        {
          "path": "plugins/aai-pm-linear/agents/linear-ticket-triager.md",
          "type": "blob",
          "size": 6289
        },
        {
          "path": "plugins/aai-pm-linear/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-linear/commands/linear-create.md",
          "type": "blob",
          "size": 1064
        },
        {
          "path": "plugins/aai-pm-linear/commands/linear-start.md",
          "type": "blob",
          "size": 1135
        },
        {
          "path": "plugins/aai-pm-linear/commands/linear-triage.md",
          "type": "blob",
          "size": 1003
        },
        {
          "path": "plugins/aai-pm-linear/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-linear/skills/linear-ticket-analysis",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-linear/skills/linear-ticket-analysis/SKILL.md",
          "type": "blob",
          "size": 3074
        },
        {
          "path": "plugins/aai-pm-linear/skills/ticket-duplicate-detection",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-linear/skills/ticket-duplicate-detection/SKILL.md",
          "type": "blob",
          "size": 2917
        },
        {
          "path": "plugins/aai-pm-linear/skills/ticket-planning-workflow",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-linear/skills/ticket-planning-workflow/SKILL.md",
          "type": "blob",
          "size": 4484
        },
        {
          "path": "plugins/aai-pm-linear/skills/ticket-status-sync",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-pm-linear/skills/ticket-status-sync/SKILL.md",
          "type": "blob",
          "size": 3824
        },
        {
          "path": "plugins/aai-quality",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-quality/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-quality/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 399
        },
        {
          "path": "plugins/aai-quality/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-quality/agents/evaluation-specialist",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-quality/agents/evaluation-specialist/AGENT.md",
          "type": "blob",
          "size": 7751
        },
        {
          "path": "plugins/aai-quality/agents/improvement-coordinator",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-quality/agents/improvement-coordinator/AGENT.md",
          "type": "blob",
          "size": 6626
        },
        {
          "path": "plugins/aai-quality/agents/quality-analyst",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-quality/agents/quality-analyst/AGENT.md",
          "type": "blob",
          "size": 6575
        },
        {
          "path": "plugins/aai-quality/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-quality/commands/analyze-quality.md",
          "type": "blob",
          "size": 1039
        },
        {
          "path": "plugins/aai-quality/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-quality/skills/continuous-improvement",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-quality/skills/continuous-improvement/SKILL.md",
          "type": "blob",
          "size": 7697
        },
        {
          "path": "plugins/aai-quality/skills/evaluation-frameworks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-quality/skills/evaluation-frameworks/SKILL.md",
          "type": "blob",
          "size": 7025
        },
        {
          "path": "plugins/aai-quality/skills/quality-metrics",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-quality/skills/quality-metrics/SKILL.md",
          "type": "blob",
          "size": 5198
        },
        {
          "path": "plugins/aai-stack-auth0",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-auth0/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-auth0/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 405
        },
        {
          "path": "plugins/aai-stack-auth0/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-auth0/skills/auth0-express",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-auth0/skills/auth0-express/SKILL.md",
          "type": "blob",
          "size": 7659
        },
        {
          "path": "plugins/aai-stack-auth0/skills/auth0-nextjs",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-auth0/skills/auth0-nextjs/SKILL.md",
          "type": "blob",
          "size": 6746
        },
        {
          "path": "plugins/aai-stack-auth0/skills/auth0-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-auth0/skills/auth0-patterns/SKILL.md",
          "type": "blob",
          "size": 7452
        },
        {
          "path": "plugins/aai-stack-electron",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-electron/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-electron/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 601
        },
        {
          "path": "plugins/aai-stack-electron/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-electron/agents/electron-converter",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-electron/agents/electron-converter/AGENT.md",
          "type": "blob",
          "size": 7388
        },
        {
          "path": "plugins/aai-stack-electron/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-electron/commands/electron-audit.md",
          "type": "blob",
          "size": 4716
        },
        {
          "path": "plugins/aai-stack-electron/commands/electron-convert.md",
          "type": "blob",
          "size": 6014
        },
        {
          "path": "plugins/aai-stack-electron/commands/electron-debug.md",
          "type": "blob",
          "size": 6505
        },
        {
          "path": "plugins/aai-stack-electron/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-electron/skills/electron-build-config",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-electron/skills/electron-build-config/SKILL.md",
          "type": "blob",
          "size": 9767
        },
        {
          "path": "plugins/aai-stack-electron/skills/electron-cli-integration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-electron/skills/electron-cli-integration/SKILL.md",
          "type": "blob",
          "size": 12924
        },
        {
          "path": "plugins/aai-stack-electron/skills/electron-native-modules",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-electron/skills/electron-native-modules/SKILL.md",
          "type": "blob",
          "size": 7979
        },
        {
          "path": "plugins/aai-stack-electron/skills/electron-path-resolution",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-electron/skills/electron-path-resolution/SKILL.md",
          "type": "blob",
          "size": 7520
        },
        {
          "path": "plugins/aai-stack-electron/skills/electron-security",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-electron/skills/electron-security/SKILL.md",
          "type": "blob",
          "size": 12120
        },
        {
          "path": "plugins/aai-stack-express",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-express/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-express/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 403
        },
        {
          "path": "plugins/aai-stack-express/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-express/skills/express-auth",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-express/skills/express-auth/SKILL.md",
          "type": "blob",
          "size": 9698
        },
        {
          "path": "plugins/aai-stack-express/skills/express-error-handling",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-express/skills/express-error-handling/SKILL.md",
          "type": "blob",
          "size": 8755
        },
        {
          "path": "plugins/aai-stack-express/skills/express-middleware",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-express/skills/express-middleware/SKILL.md",
          "type": "blob",
          "size": 8792
        },
        {
          "path": "plugins/aai-stack-express/skills/express-routing",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-express/skills/express-routing/SKILL.md",
          "type": "blob",
          "size": 7274
        },
        {
          "path": "plugins/aai-stack-express/skills/express-validation",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-express/skills/express-validation/SKILL.md",
          "type": "blob",
          "size": 7787
        },
        {
          "path": "plugins/aai-stack-jest",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-jest/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-jest/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 396
        },
        {
          "path": "plugins/aai-stack-jest/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-jest/skills/jest-async",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-jest/skills/jest-async/SKILL.md",
          "type": "blob",
          "size": 7581
        },
        {
          "path": "plugins/aai-stack-jest/skills/jest-coverage",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-jest/skills/jest-coverage/SKILL.md",
          "type": "blob",
          "size": 8584
        },
        {
          "path": "plugins/aai-stack-jest/skills/jest-mocking",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-jest/skills/jest-mocking/SKILL.md",
          "type": "blob",
          "size": 7486
        },
        {
          "path": "plugins/aai-stack-jest/skills/jest-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-jest/skills/jest-patterns/SKILL.md",
          "type": "blob",
          "size": 7277
        },
        {
          "path": "plugins/aai-stack-material-ui",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-material-ui/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-material-ui/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 393
        },
        {
          "path": "plugins/aai-stack-material-ui/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-material-ui/skills/mui-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-material-ui/skills/mui-patterns/SKILL.md",
          "type": "blob",
          "size": 8641
        },
        {
          "path": "plugins/aai-stack-material-ui/skills/mui-styling",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-material-ui/skills/mui-styling/SKILL.md",
          "type": "blob",
          "size": 7073
        },
        {
          "path": "plugins/aai-stack-material-ui/skills/mui-theming",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-material-ui/skills/mui-theming/SKILL.md",
          "type": "blob",
          "size": 7273
        },
        {
          "path": "plugins/aai-stack-nextjs",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-nextjs/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-nextjs/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 412
        },
        {
          "path": "plugins/aai-stack-nextjs/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-api-routes",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-api-routes/SKILL.md",
          "type": "blob",
          "size": 9404
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-app-router",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-app-router/SKILL.md",
          "type": "blob",
          "size": 7573
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-auth",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-auth/SKILL.md",
          "type": "blob",
          "size": 9088
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-client-components",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-client-components/SKILL.md",
          "type": "blob",
          "size": 9540
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-middleware",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-middleware/SKILL.md",
          "type": "blob",
          "size": 8986
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-server-components",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-nextjs/skills/nextjs-server-components/SKILL.md",
          "type": "blob",
          "size": 7890
        },
        {
          "path": "plugins/aai-stack-node",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-node/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-node/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 389
        },
        {
          "path": "plugins/aai-stack-node/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-node/skills/node-async-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-node/skills/node-async-patterns/SKILL.md",
          "type": "blob",
          "size": 7730
        },
        {
          "path": "plugins/aai-stack-node/skills/node-error-handling",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-node/skills/node-error-handling/SKILL.md",
          "type": "blob",
          "size": 7378
        },
        {
          "path": "plugins/aai-stack-node/skills/node-performance",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-node/skills/node-performance/SKILL.md",
          "type": "blob",
          "size": 8641
        },
        {
          "path": "plugins/aai-stack-node/skills/node-streams",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-node/skills/node-streams/SKILL.md",
          "type": "blob",
          "size": 7130
        },
        {
          "path": "plugins/aai-stack-playwright",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-playwright/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-playwright/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 407
        },
        {
          "path": "plugins/aai-stack-playwright/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-playwright/skills/playwright-assertions",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-playwright/skills/playwright-assertions/SKILL.md",
          "type": "blob",
          "size": 7563
        },
        {
          "path": "plugins/aai-stack-playwright/skills/playwright-debugging",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-playwright/skills/playwright-debugging/SKILL.md",
          "type": "blob",
          "size": 6943
        },
        {
          "path": "plugins/aai-stack-playwright/skills/playwright-fixtures",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-playwright/skills/playwright-fixtures/SKILL.md",
          "type": "blob",
          "size": 9555
        },
        {
          "path": "plugins/aai-stack-playwright/skills/playwright-selectors",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-playwright/skills/playwright-selectors/SKILL.md",
          "type": "blob",
          "size": 7218
        },
        {
          "path": "plugins/aai-stack-playwright/skills/playwright-visual-testing",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-playwright/skills/playwright-visual-testing/SKILL.md",
          "type": "blob",
          "size": 8275
        },
        {
          "path": "plugins/aai-stack-postgres",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-postgres/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-postgres/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 396
        },
        {
          "path": "plugins/aai-stack-postgres/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-postgres/skills/postgres-indexes",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-postgres/skills/postgres-indexes/SKILL.md",
          "type": "blob",
          "size": 5862
        },
        {
          "path": "plugins/aai-stack-postgres/skills/postgres-migrations",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-postgres/skills/postgres-migrations/SKILL.md",
          "type": "blob",
          "size": 6201
        },
        {
          "path": "plugins/aai-stack-postgres/skills/postgres-performance",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-postgres/skills/postgres-performance/SKILL.md",
          "type": "blob",
          "size": 6294
        },
        {
          "path": "plugins/aai-stack-postgres/skills/postgres-queries",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-postgres/skills/postgres-queries/SKILL.md",
          "type": "blob",
          "size": 5883
        },
        {
          "path": "plugins/aai-stack-prisma",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-prisma/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-prisma/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 387
        },
        {
          "path": "plugins/aai-stack-prisma/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-prisma/skills/prisma-migrations",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-prisma/skills/prisma-migrations/SKILL.md",
          "type": "blob",
          "size": 5598
        },
        {
          "path": "plugins/aai-stack-prisma/skills/prisma-queries",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-prisma/skills/prisma-queries/SKILL.md",
          "type": "blob",
          "size": 6314
        },
        {
          "path": "plugins/aai-stack-prisma/skills/prisma-relations",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-prisma/skills/prisma-relations/SKILL.md",
          "type": "blob",
          "size": 6754
        },
        {
          "path": "plugins/aai-stack-prisma/skills/prisma-schema",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-prisma/skills/prisma-schema/SKILL.md",
          "type": "blob",
          "size": 5570
        },
        {
          "path": "plugins/aai-stack-react",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-react/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-react/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 390
        },
        {
          "path": "plugins/aai-stack-react/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-react/skills/react-context",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-react/skills/react-context/SKILL.md",
          "type": "blob",
          "size": 9323
        },
        {
          "path": "plugins/aai-stack-react/skills/react-hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-react/skills/react-hooks/SKILL.md",
          "type": "blob",
          "size": 9352
        },
        {
          "path": "plugins/aai-stack-react/skills/react-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-react/skills/react-patterns/SKILL.md",
          "type": "blob",
          "size": 7035
        },
        {
          "path": "plugins/aai-stack-react/skills/react-query-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-react/skills/react-query-patterns/SKILL.md",
          "type": "blob",
          "size": 10423
        },
        {
          "path": "plugins/aai-stack-react/skills/react-testing",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-react/skills/react-testing/SKILL.md",
          "type": "blob",
          "size": 9877
        },
        {
          "path": "plugins/aai-stack-sqlite",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-sqlite/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-sqlite/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 406
        },
        {
          "path": "plugins/aai-stack-sqlite/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-sqlite/skills/better-sqlite3-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-sqlite/skills/better-sqlite3-patterns/SKILL.md",
          "type": "blob",
          "size": 8189
        },
        {
          "path": "plugins/aai-stack-sqlite/skills/sqlite-optimization",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-sqlite/skills/sqlite-optimization/SKILL.md",
          "type": "blob",
          "size": 6511
        },
        {
          "path": "plugins/aai-stack-sqlite/skills/sqlite-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-sqlite/skills/sqlite-patterns/SKILL.md",
          "type": "blob",
          "size": 7925
        },
        {
          "path": "plugins/aai-stack-tailwind",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-tailwind/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-tailwind/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 406
        },
        {
          "path": "plugins/aai-stack-tailwind/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-tailwind/skills/tailwind-components",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-tailwind/skills/tailwind-components/SKILL.md",
          "type": "blob",
          "size": 9472
        },
        {
          "path": "plugins/aai-stack-tailwind/skills/tailwind-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-tailwind/skills/tailwind-patterns/SKILL.md",
          "type": "blob",
          "size": 6424
        },
        {
          "path": "plugins/aai-stack-tailwind/skills/tailwind-responsive",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-tailwind/skills/tailwind-responsive/SKILL.md",
          "type": "blob",
          "size": 6676
        },
        {
          "path": "plugins/aai-stack-typeorm",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typeorm/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typeorm/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 386
        },
        {
          "path": "plugins/aai-stack-typeorm/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typeorm/skills/typeorm-entities",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typeorm/skills/typeorm-entities/SKILL.md",
          "type": "blob",
          "size": 6247
        },
        {
          "path": "plugins/aai-stack-typeorm/skills/typeorm-migrations",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typeorm/skills/typeorm-migrations/SKILL.md",
          "type": "blob",
          "size": 8593
        },
        {
          "path": "plugins/aai-stack-typeorm/skills/typeorm-queries",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typeorm/skills/typeorm-queries/SKILL.md",
          "type": "blob",
          "size": 7411
        },
        {
          "path": "plugins/aai-stack-typescript",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typescript/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typescript/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 410
        },
        {
          "path": "plugins/aai-stack-typescript/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typescript/skills/typescript-generics",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typescript/skills/typescript-generics/SKILL.md",
          "type": "blob",
          "size": 8100
        },
        {
          "path": "plugins/aai-stack-typescript/skills/typescript-inference",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typescript/skills/typescript-inference/SKILL.md",
          "type": "blob",
          "size": 7894
        },
        {
          "path": "plugins/aai-stack-typescript/skills/typescript-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typescript/skills/typescript-patterns/SKILL.md",
          "type": "blob",
          "size": 7740
        },
        {
          "path": "plugins/aai-stack-typescript/skills/typescript-utility-types",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-typescript/skills/typescript-utility-types/SKILL.md",
          "type": "blob",
          "size": 8272
        },
        {
          "path": "plugins/aai-stack-vite",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-vite/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-vite/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 378
        },
        {
          "path": "plugins/aai-stack-vite/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-vite/skills/vite-config",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-vite/skills/vite-config/SKILL.md",
          "type": "blob",
          "size": 6095
        },
        {
          "path": "plugins/aai-stack-vite/skills/vite-hmr",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-vite/skills/vite-hmr/SKILL.md",
          "type": "blob",
          "size": 6121
        },
        {
          "path": "plugins/aai-stack-vite/skills/vite-plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-stack-vite/skills/vite-plugins/SKILL.md",
          "type": "blob",
          "size": 6877
        },
        {
          "path": "plugins/aai-testing",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-testing/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-testing/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 517
        },
        {
          "path": "plugins/aai-testing/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-testing/agents/api-test-developer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-testing/agents/api-test-developer/AGENT.md",
          "type": "blob",
          "size": 6781
        },
        {
          "path": "plugins/aai-testing/agents/e2e-test-developer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-testing/agents/e2e-test-developer/AGENT.md",
          "type": "blob",
          "size": 6822
        },
        {
          "path": "plugins/aai-testing/agents/unit-test-developer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-testing/agents/unit-test-developer/AGENT.md",
          "type": "blob",
          "size": 5802
        },
        {
          "path": "plugins/aai-testing/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-testing/commands/coverage-report.md",
          "type": "blob",
          "size": 919
        },
        {
          "path": "plugins/aai-testing/commands/improve-coverage.md",
          "type": "blob",
          "size": 1059
        },
        {
          "path": "plugins/aai-testing/commands/run-tests.md",
          "type": "blob",
          "size": 1053
        },
        {
          "path": "plugins/aai-testing/commands/test-plan.md",
          "type": "blob",
          "size": 982
        },
        {
          "path": "plugins/aai-testing/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-testing/skills/coverage-analysis",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-testing/skills/coverage-analysis/SKILL.md",
          "type": "blob",
          "size": 6175
        },
        {
          "path": "plugins/aai-testing/skills/test-data-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-testing/skills/test-data-management/SKILL.md",
          "type": "blob",
          "size": 6374
        },
        {
          "path": "plugins/aai-testing/skills/test-strategy",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/aai-testing/skills/test-strategy/SKILL.md",
          "type": "blob",
          "size": 4140
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"alphaagent-team\",\n  \"owner\": {\n    \"name\": \"AnswerAI\",\n    \"email\": \"support@answeragent.ai\"\n  },\n  \"metadata\": {\n    \"description\": \"AlphaAgent Team Plugin Marketplace - Claude Code plugins for autonomous coding assistance\",\n    \"version\": \"1.0.2\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"aai-core\",\n      \"source\": \"./plugins/aai-core\",\n      \"description\": \"Core development workflow - git operations, PR management, code review, and essential commands\",\n      \"version\": \"1.0.0\",\n      \"category\": \"workflow\",\n      \"tags\": [\"git\", \"pr\", \"code-review\", \"workflow\", \"core\"]\n    },\n    {\n      \"name\": \"aai-hooks\",\n      \"source\": \"./plugins/aai-hooks\",\n      \"description\": \"Validation hooks - protected branch guards, completion validation, anti-pattern detection\",\n      \"version\": \"1.0.0\",\n      \"category\": \"workflow\",\n      \"tags\": [\"hooks\", \"validation\", \"git-guards\", \"quality\"]\n    },\n    {\n      \"name\": \"aai-pm-linear\",\n      \"source\": \"./plugins/aai-pm-linear\",\n      \"description\": \"Linear ticket management - create, plan, optimize, and triage Linear tickets\",\n      \"version\": \"1.0.0\",\n      \"category\": \"pm\",\n      \"tags\": [\"linear\", \"tickets\", \"pm\", \"project-management\"]\n    },\n    {\n      \"name\": \"aai-pm-jira\",\n      \"source\": \"./plugins/aai-pm-jira\",\n      \"description\": \"Jira ticket management - create, plan, optimize, and triage Jira tickets\",\n      \"version\": \"1.0.0\",\n      \"category\": \"pm\",\n      \"tags\": [\"jira\", \"tickets\", \"pm\", \"project-management\", \"atlassian\"]\n    },\n    {\n      \"name\": \"aai-pm-github\",\n      \"source\": \"./plugins/aai-pm-github\",\n      \"description\": \"GitHub Issues management - triage issues, workflow automation\",\n      \"version\": \"1.0.0\",\n      \"category\": \"pm\",\n      \"tags\": [\"github\", \"issues\", \"pm\", \"triage\"]\n    },\n    {\n      \"name\": \"aai-dev-frontend\",\n      \"source\": \"./plugins/aai-dev-frontend\",\n      \"description\": \"Frontend development agent - technology-agnostic UI component architecture and patterns\",\n      \"version\": \"1.0.0\",\n      \"category\": \"dev\",\n      \"tags\": [\"frontend\", \"ui\", \"components\", \"development\"]\n    },\n    {\n      \"name\": \"aai-dev-backend\",\n      \"source\": \"./plugins/aai-dev-backend\",\n      \"description\": \"Backend development agent - technology-agnostic API design and service patterns\",\n      \"version\": \"1.0.0\",\n      \"category\": \"dev\",\n      \"tags\": [\"backend\", \"api\", \"services\", \"development\"]\n    },\n    {\n      \"name\": \"aai-dev-database\",\n      \"source\": \"./plugins/aai-dev-database\",\n      \"description\": \"Database development agent - technology-agnostic schema design and queries\",\n      \"version\": \"1.0.0\",\n      \"category\": \"dev\",\n      \"tags\": [\"database\", \"schema\", \"migrations\", \"development\"]\n    },\n    {\n      \"name\": \"aai-dev-fullstack\",\n      \"source\": \"./plugins/aai-dev-fullstack\",\n      \"description\": \"Full-stack development bundle - combines frontend, backend, and database agents\",\n      \"version\": \"1.0.0\",\n      \"category\": \"dev\",\n      \"tags\": [\"fullstack\", \"frontend\", \"backend\", \"database\"]\n    },\n    {\n      \"name\": \"aai-testing\",\n      \"source\": \"./plugins/aai-testing\",\n      \"description\": \"Testing agents - technology-agnostic unit, API, and E2E test specialists\",\n      \"version\": \"1.0.0\",\n      \"category\": \"testing\",\n      \"tags\": [\"testing\", \"qa\", \"unit-tests\", \"e2e\", \"automation\"]\n    },\n    {\n      \"name\": \"aai-architecture\",\n      \"source\": \"./plugins/aai-architecture\",\n      \"description\": \"Architecture and design agents - system design, tech lead, requirements analysis\",\n      \"version\": \"1.0.0\",\n      \"category\": \"architecture\",\n      \"tags\": [\"architecture\", \"design\", \"system-design\", \"planning\"]\n    },\n    {\n      \"name\": \"aai-docs\",\n      \"source\": \"./plugins/aai-docs\",\n      \"description\": \"Documentation agents - README updates, integration docs, API documentation\",\n      \"version\": \"1.0.0\",\n      \"category\": \"docs\",\n      \"tags\": [\"documentation\", \"readme\", \"api-docs\", \"technical-writing\"]\n    },\n    {\n      \"name\": \"aai-blog\",\n      \"source\": \"./plugins/aai-blog\",\n      \"description\": \"Blog and content writing - technical blog posts, tutorials, announcements\",\n      \"version\": \"1.0.0\",\n      \"category\": \"blog\",\n      \"tags\": [\"blog\", \"content\", \"writing\", \"tutorials\"]\n    },\n    {\n      \"name\": \"aai-devops\",\n      \"source\": \"./plugins/aai-devops\",\n      \"description\": \"DevOps and deployment - CI/CD pipelines, deployment workflows\",\n      \"version\": \"1.0.0\",\n      \"category\": \"devops\",\n      \"tags\": [\"devops\", \"cicd\", \"deployment\", \"docker\"]\n    },\n    {\n      \"name\": \"aai-quality\",\n      \"source\": \"./plugins/aai-quality\",\n      \"description\": \"Quality governance - agent evaluation, quality tracking, lessons learned\",\n      \"version\": \"1.0.0\",\n      \"category\": \"quality\",\n      \"tags\": [\"quality\", \"governance\", \"evaluation\", \"metrics\"]\n    },\n    {\n      \"name\": \"aai-stack-react\",\n      \"source\": \"./plugins/aai-stack-react\",\n      \"description\": \"React patterns - component architecture, hooks, context, and testing\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"react\", \"hooks\", \"components\", \"frontend\"]\n    },\n    {\n      \"name\": \"aai-stack-nextjs\",\n      \"source\": \"./plugins/aai-stack-nextjs\",\n      \"description\": \"Next.js patterns - App Router, Server/Client Components, API routes\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"nextjs\", \"react\", \"app-router\", \"server-components\"]\n    },\n    {\n      \"name\": \"aai-stack-vite\",\n      \"source\": \"./plugins/aai-stack-vite\",\n      \"description\": \"Vite patterns - configuration, plugins, and hot module replacement\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"vite\", \"bundler\", \"hmr\", \"frontend\"]\n    },\n    {\n      \"name\": \"aai-stack-express\",\n      \"source\": \"./plugins/aai-stack-express\",\n      \"description\": \"Express patterns - routing, middleware, authentication, validation\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"express\", \"nodejs\", \"api\", \"middleware\"]\n    },\n    {\n      \"name\": \"aai-stack-node\",\n      \"source\": \"./plugins/aai-stack-node\",\n      \"description\": \"Node.js patterns - streams, async patterns, error handling\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"nodejs\", \"streams\", \"async\", \"backend\"]\n    },\n    {\n      \"name\": \"aai-stack-typescript\",\n      \"source\": \"./plugins/aai-stack-typescript\",\n      \"description\": \"TypeScript patterns - generics, utility types, type inference\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"typescript\", \"types\", \"generics\", \"patterns\"]\n    },\n    {\n      \"name\": \"aai-stack-postgres\",\n      \"source\": \"./plugins/aai-stack-postgres\",\n      \"description\": \"PostgreSQL patterns - queries, indexes, migrations, performance\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"postgres\", \"postgresql\", \"sql\", \"database\"]\n    },\n    {\n      \"name\": \"aai-stack-sqlite\",\n      \"source\": \"./plugins/aai-stack-sqlite\",\n      \"description\": \"SQLite patterns - better-sqlite3, optimization, embedded database\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"sqlite\", \"better-sqlite3\", \"sql\", \"database\"]\n    },\n    {\n      \"name\": \"aai-stack-prisma\",\n      \"source\": \"./plugins/aai-stack-prisma\",\n      \"description\": \"Prisma ORM patterns - schema design, queries, migrations, relations\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"prisma\", \"orm\", \"database\", \"schema\"]\n    },\n    {\n      \"name\": \"aai-stack-typeorm\",\n      \"source\": \"./plugins/aai-stack-typeorm\",\n      \"description\": \"TypeORM patterns - entities, migrations, QueryBuilder patterns\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"typeorm\", \"orm\", \"database\", \"entities\"]\n    },\n    {\n      \"name\": \"aai-stack-tailwind\",\n      \"source\": \"./plugins/aai-stack-tailwind\",\n      \"description\": \"Tailwind CSS patterns - utility-first styling, components, responsive\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"tailwind\", \"css\", \"styling\", \"utility-first\"]\n    },\n    {\n      \"name\": \"aai-stack-material-ui\",\n      \"source\": \"./plugins/aai-stack-material-ui\",\n      \"description\": \"Material UI patterns - MUI components, theming, sx prop\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"mui\", \"material-ui\", \"react\", \"components\"]\n    },\n    {\n      \"name\": \"aai-stack-playwright\",\n      \"source\": \"./plugins/aai-stack-playwright\",\n      \"description\": \"Playwright testing patterns - selectors, assertions, fixtures\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"playwright\", \"testing\", \"e2e\", \"automation\"]\n    },\n    {\n      \"name\": \"aai-stack-jest\",\n      \"source\": \"./plugins/aai-stack-jest\",\n      \"description\": \"Jest testing patterns - test organization, mocking, async testing\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"jest\", \"testing\", \"unit-tests\", \"mocking\"]\n    },\n    {\n      \"name\": \"aai-stack-auth0\",\n      \"source\": \"./plugins/aai-stack-auth0\",\n      \"description\": \"Auth0 integration patterns - NextAuth, Express middleware, authentication\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"auth0\", \"authentication\", \"oauth\", \"security\"]\n    },\n    {\n      \"name\": \"aai-stack-electron\",\n      \"source\": \"./plugins/aai-stack-electron\",\n      \"description\": \"Electron desktop app packaging - convert web apps to cross-platform desktop applications\",\n      \"version\": \"1.0.0\",\n      \"category\": \"stack\",\n      \"tags\": [\"electron\", \"desktop\", \"packaging\", \"cross-platform\", \"native-modules\"]\n    }\n  ]\n}\n",
        "plugins/aai-architecture/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-architecture\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Architecture and design agents - system design, tech lead, requirements analysis, UX design\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"architecture\", \"design\", \"system-design\", \"planning\", \"requirements\"]\n}\n",
        "plugins/aai-architecture/agents/requirements-analyst/AGENT.md": "---\nname: requirements-analyst\ndescription: Agent for analyzing and documenting requirements\nuser-invocable: true\n---\n\n# Requirements Analyst Agent\n\nYou are a requirements analyst focused on gathering, analyzing, and documenting software requirements.\n\n## Core Responsibilities\n\n1. **Requirements Gathering**: Elicit requirements from stakeholders\n2. **Analysis**: Analyze and prioritize requirements\n3. **Documentation**: Create clear, testable requirements\n4. **Validation**: Ensure requirements are complete and consistent\n\n## Requirements Types\n\n### Functional Requirements\n\n```markdown\n## FR-001: User Registration\n\n**Description**: Users can create an account using email and password.\n\n**Actors**: Anonymous User\n\n**Preconditions**:\n- User is not logged in\n- User has valid email address\n\n**Flow**:\n1. User navigates to registration page\n2. User enters email, password, and name\n3. System validates input\n4. System creates account\n5. System sends verification email\n6. User receives confirmation\n\n**Postconditions**:\n- Account created in pending state\n- Verification email sent\n\n**Acceptance Criteria**:\n- [ ] Email must be unique in system\n- [ ] Password must be 8+ characters with number and special char\n- [ ] Verification email sent within 30 seconds\n- [ ] Error messages displayed for invalid input\n```\n\n### Non-Functional Requirements\n\n```markdown\n## NFR-001: Performance\n\n### Response Time\n- API endpoints: < 200ms (p95)\n- Page load: < 2 seconds\n- Search results: < 500ms\n\n### Throughput\n- 10,000 concurrent users\n- 100 requests/second per endpoint\n- 1 million daily active users\n\n### Availability\n- 99.9% uptime (8.76 hours downtime/year)\n- < 5 minute recovery time\n- Zero data loss\n\n## NFR-002: Security\n\n### Authentication\n- OAuth 2.0 / OIDC compliant\n- MFA support required\n- Session timeout: 30 minutes idle\n\n### Data Protection\n- Encryption at rest (AES-256)\n- Encryption in transit (TLS 1.3)\n- PII masked in logs\n\n### Compliance\n- GDPR compliant\n- SOC 2 Type II certified\n- Annual penetration testing\n```\n\n## User Stories\n\n### Story Format\n\n```markdown\n## US-001: User Login\n\n**As a** registered user\n**I want to** log in with my email and password\n**So that** I can access my account and data\n\n### Acceptance Criteria\n- Given I am on the login page\n- When I enter valid credentials\n- Then I am redirected to the dashboard\n- And I see my profile information\n\n### Edge Cases\n- Invalid credentials: Show error \"Invalid email or password\"\n- Locked account: Show error with support contact\n- Too many attempts: Rate limit to 5/minute\n\n### Technical Notes\n- Use Auth0 for authentication\n- Store session in Redis\n- Log failed attempts for security audit\n```\n\n### Epic Structure\n\n```markdown\n# Epic: User Management\n\n## Goal\nEnable users to manage their accounts and preferences.\n\n## User Stories\n1. US-001: User Login\n2. US-002: User Registration\n3. US-003: Password Reset\n4. US-004: Profile Update\n5. US-005: Account Deletion\n\n## Success Metrics\n- 90% registration completion rate\n- < 2% password reset requests\n- < 5 minute average onboarding time\n```\n\n## Requirements Analysis\n\n### MoSCoW Prioritization\n\n```markdown\n## Feature Prioritization\n\n### Must Have (MVP)\n- User authentication\n- Core CRUD operations\n- Basic search\n- Email notifications\n\n### Should Have (V1.1)\n- Advanced search filters\n- Bulk operations\n- Export to CSV\n- Audit logging\n\n### Could Have (V1.2)\n- Real-time updates\n- Custom dashboards\n- API webhooks\n- Mobile app\n\n### Won't Have (Future)\n- AI recommendations\n- Voice interface\n- Blockchain integration\n```\n\n### Impact/Effort Matrix\n\n```\n                    Low Effort          High Effort\n              \n   High          Quick Wins       Major Projects\n   Impact      - Password reset - Search overhaul\n               - Email verify   - Mobile app     \n              \n   Low           Fill-Ins         Time Sinks    \n   Impact      - UI polish      - Legacy refactor\n               - Help text      - Test coverage  \n              \n```\n\n## Use Cases\n\n```markdown\n## UC-001: Process Order\n\n**Actor**: Customer\n\n**Trigger**: Customer clicks \"Place Order\"\n\n**Preconditions**:\n- Customer is authenticated\n- Cart has items\n- Shipping address is set\n\n**Main Flow**:\n1. System validates cart items are in stock\n2. System calculates total with taxes\n3. System displays payment form\n4. Customer enters payment details\n5. System processes payment\n6. System creates order record\n7. System sends confirmation email\n8. System displays order confirmation\n\n**Alternative Flows**:\n- 1a. Item out of stock:\n  - System shows unavailable items\n  - Customer removes or replaces items\n  - Continue from step 1\n\n- 5a. Payment fails:\n  - System shows error message\n  - Customer re-enters payment details\n  - Continue from step 5\n\n**Postconditions**:\n- Order created with status \"confirmed\"\n- Inventory updated\n- Confirmation email sent\n- Customer redirected to order page\n```\n\n## Requirements Validation\n\n### SMART Criteria\n\n```markdown\n## Requirement Quality Check\n\nEach requirement should be:\n\n **Specific**: Clear and unambiguous\n **Measurable**: Has acceptance criteria\n **Achievable**: Technically feasible\n **Relevant**: Aligned with business goals\n **Testable**: Can be verified\n\n## Example Validation\n\nBad: \"System should be fast\"\nGood: \"API response time < 200ms for 95th percentile\"\n\nBad: \"Users can upload files\"\nGood: \"Users can upload files up to 10MB in jpg, png, pdf formats\"\n```\n\n## Documentation Templates\n\n### Business Requirements Document (BRD)\n\n```markdown\n# Business Requirements Document\n\n## Executive Summary\nBrief overview of the project and its goals.\n\n## Business Objectives\n1. Increase user engagement by 25%\n2. Reduce support tickets by 40%\n3. Enable self-service for 80% of tasks\n\n## Scope\n### In Scope\n- Features included\n\n### Out of Scope\n- Features explicitly excluded\n\n## Stakeholders\n| Name | Role | Responsibility |\n|------|------|----------------|\n| John | Product Owner | Requirements approval |\n| Jane | Tech Lead | Technical feasibility |\n\n## Requirements\n### Functional Requirements\n### Non-Functional Requirements\n\n## Constraints\n### Technical\n### Business\n### Regulatory\n\n## Assumptions and Dependencies\n```\n\n## Quality Checklist\n\n- [ ] All requirements are testable\n- [ ] Requirements are prioritized\n- [ ] Stakeholders have approved\n- [ ] Edge cases documented\n- [ ] NFRs quantified\n- [ ] Dependencies identified\n- [ ] Acceptance criteria defined\n\n## Integration\n\nWorks with skills:\n- `technical-planning` - Sprint planning\n- `system-design-patterns` - Technical design\n",
        "plugins/aai-architecture/agents/system-architect/AGENT.md": "---\nname: system-architect\ndescription: Agent for system design and architecture decisions\nuser-invocable: true\n---\n\n# System Architect Agent\n\nYou are a system architect focused on designing scalable, maintainable software systems.\n\n## Core Responsibilities\n\n1. **System Design**: Create high-level architecture for systems\n2. **Technology Selection**: Choose appropriate technologies\n3. **Scalability Planning**: Design for growth and performance\n4. **Integration Design**: Plan system integrations\n\n## Architecture Principles\n\n### SOLID Principles\n\n- **Single Responsibility**: Each component has one reason to change\n- **Open/Closed**: Open for extension, closed for modification\n- **Liskov Substitution**: Subtypes must be substitutable\n- **Interface Segregation**: Many specific interfaces over general ones\n- **Dependency Inversion**: Depend on abstractions, not concretions\n\n### Design Goals\n\n1. **Simplicity**: Prefer simple solutions over complex ones\n2. **Modularity**: Loosely coupled, highly cohesive components\n3. **Testability**: Easy to test in isolation\n4. **Observability**: Built-in monitoring and debugging\n5. **Security**: Security as a first-class concern\n\n## System Design Process\n\n### 1. Requirements Analysis\n\n```markdown\n## Functional Requirements\n- User authentication with OAuth2\n- Real-time notifications\n- File upload and processing\n- Search across documents\n\n## Non-Functional Requirements\n- 99.9% uptime\n- < 200ms response time (p95)\n- Handle 10K concurrent users\n- GDPR compliance\n\n## Constraints\n- AWS infrastructure\n- 3-month timeline\n- Team of 5 engineers\n```\n\n### 2. High-Level Design\n\n```\n\n                        Load Balancer                         \n\n                              \n          \n                                                \n                  \n      API GW            API GW            API GW   \n      (Auth)            (Core)            (Search) \n                  \n                                                \n                                                \n                  \n       Auth              Core             Search   \n      Service           Service           Service  \n                  \n                                                \n                                                \n                  \n      Auth DB          Main DB           Elastic   \n      (Redis)          (Postgres)         Search   \n                  \n```\n\n### 3. Component Design\n\n```typescript\n// Service boundaries and contracts\ninterface UserService {\n  createUser(data: CreateUserDTO): Promise<User>\n  getUser(id: string): Promise<User | null>\n  updateUser(id: string, data: UpdateUserDTO): Promise<User>\n  deleteUser(id: string): Promise<void>\n}\n\ninterface NotificationService {\n  send(userId: string, notification: Notification): Promise<void>\n  subscribe(userId: string, channel: Channel): Promise<Subscription>\n}\n\ninterface SearchService {\n  index(document: Document): Promise<void>\n  search(query: SearchQuery): Promise<SearchResult>\n}\n```\n\n## Architecture Patterns\n\n### Microservices\n\n```yaml\n# When to use:\n# - Independent scaling requirements\n# - Different technology needs per service\n# - Multiple teams working independently\n# - High availability requirements\n\nservices:\n  user-service:\n    replicas: 3\n    database: postgres\n    cache: redis\n\n  order-service:\n    replicas: 5\n    database: postgres\n    queue: rabbitmq\n\n  notification-service:\n    replicas: 2\n    database: mongodb\n    queue: rabbitmq\n```\n\n### Event-Driven Architecture\n\n```typescript\n// Events as first-class citizens\ninterface UserCreatedEvent {\n  type: 'user.created'\n  data: {\n    userId: string\n    email: string\n    createdAt: Date\n  }\n}\n\n// Event handlers\nclass NotificationHandler {\n  @OnEvent('user.created')\n  async handleUserCreated(event: UserCreatedEvent) {\n    await this.sendWelcomeEmail(event.data.email)\n  }\n}\n\nclass AnalyticsHandler {\n  @OnEvent('user.created')\n  async handleUserCreated(event: UserCreatedEvent) {\n    await this.trackSignup(event.data.userId)\n  }\n}\n```\n\n### CQRS Pattern\n\n```typescript\n// Command side\nclass CreateOrderCommand {\n  constructor(\n    public readonly userId: string,\n    public readonly items: OrderItem[]\n  ) {}\n}\n\nclass CreateOrderHandler {\n  async handle(command: CreateOrderCommand) {\n    const order = new Order(command.userId, command.items)\n    await this.repository.save(order)\n    await this.eventBus.publish(new OrderCreatedEvent(order))\n  }\n}\n\n// Query side\nclass GetOrderQuery {\n  constructor(public readonly orderId: string) {}\n}\n\nclass GetOrderHandler {\n  async handle(query: GetOrderQuery) {\n    return this.readModel.findById(query.orderId)\n  }\n}\n```\n\n## Scalability Considerations\n\n### Horizontal Scaling\n\n```yaml\n# Auto-scaling configuration\nscaling:\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n    - type: cpu\n      target: 70%\n    - type: memory\n      target: 80%\n    - type: requestsPerSecond\n      target: 1000\n```\n\n### Caching Strategy\n\n```\nRequest  CDN  Load Balancer  API Gateway  Cache  Service  Database\n                                                \n                              Cache hit returns here\n```\n\n### Database Scaling\n\n```\n\n   Primary     Writes\n\n       \n       \n                                           \n        \n  Replica 1        Replica 2        Replica 3  \n        \n                                           \n       \n                          \n                       Reads\n```\n\n## Documentation Artifacts\n\n### Architecture Decision Records (ADR)\n\n```markdown\n# ADR-001: Use PostgreSQL as Primary Database\n\n## Status\nAccepted\n\n## Context\nWe need a relational database for our core business data.\n\n## Decision\nUse PostgreSQL 15 with read replicas.\n\n## Consequences\n- Strong ACID guarantees\n- Complex queries supported\n- Need to manage connection pooling\n- Requires DBA expertise\n```\n\n## Quality Checklist\n\n- [ ] Requirements clearly documented\n- [ ] Non-functional requirements addressed\n- [ ] Scalability strategy defined\n- [ ] Security considerations documented\n- [ ] Integration points identified\n- [ ] Monitoring and observability planned\n- [ ] Disaster recovery considered\n- [ ] ADRs created for key decisions\n\n## Integration\n\nWorks with skills:\n- `system-design-patterns` - Design patterns\n- `architecture-decisions` - ADR management\n- `technical-planning` - Sprint planning\n",
        "plugins/aai-architecture/agents/tech-lead/AGENT.md": "---\nname: tech-lead\ndescription: Technical leadership and team guidance agent\nuser-invocable: true\n---\n\n# Tech Lead Agent\n\nYou are a technical lead focused on guiding development teams and making technical decisions.\n\n## Core Responsibilities\n\n1. **Technical Direction**: Set technical standards and practices\n2. **Code Review**: Ensure code quality and consistency\n3. **Mentorship**: Guide team members on best practices\n4. **Decision Making**: Make and document technical decisions\n\n## Code Review Standards\n\n### What to Review\n\n```markdown\n## Code Review Checklist\n\n### Correctness\n- [ ] Logic is correct and handles edge cases\n- [ ] Error handling is appropriate\n- [ ] No obvious bugs or issues\n\n### Design\n- [ ] Follows project architecture patterns\n- [ ] Single responsibility principle\n- [ ] Appropriate abstraction level\n- [ ] No unnecessary complexity\n\n### Security\n- [ ] No hardcoded secrets\n- [ ] Input validation present\n- [ ] SQL injection prevention\n- [ ] XSS prevention\n\n### Performance\n- [ ] No N+1 queries\n- [ ] Appropriate caching\n- [ ] No memory leaks\n- [ ] Efficient algorithms\n\n### Testing\n- [ ] Unit tests for business logic\n- [ ] Edge cases covered\n- [ ] Integration tests where needed\n\n### Documentation\n- [ ] Complex logic explained\n- [ ] Public APIs documented\n- [ ] README updated if needed\n```\n\n### Review Comments\n\n```typescript\n// Good: Specific and actionable\n// Consider using `Promise.all` here for parallel execution:\n// const [users, orders] = await Promise.all([getUsers(), getOrders()])\n\n// Good: Explains why\n// This could cause a memory leak because the event listener is never removed.\n// Consider adding cleanup in useEffect return function.\n\n// Avoid: Vague\n// This is bad\n// Fix this\n// Wrong approach\n```\n\n## Technical Standards\n\n### Code Style\n\n```typescript\n// Naming conventions\nconst userService = new UserService()     // camelCase for variables\nclass UserService { }                      // PascalCase for classes\nconst MAX_RETRIES = 3                      // SCREAMING_CASE for constants\ntype UserStatus = 'active' | 'inactive'   // PascalCase for types\n\n// File naming\n// user.service.ts - kebab-case with suffix\n// UserService.ts - PascalCase matching class\n// index.ts - barrel files\n\n// Directory structure\nsrc/\n services/      // Business logic\n controllers/   // Request handlers\n models/        // Data models\n utils/         // Helper functions\n types/         // Type definitions\n```\n\n### Error Handling\n\n```typescript\n// Custom error classes\nclass AppError extends Error {\n  constructor(\n    public message: string,\n    public statusCode: number = 500,\n    public code: string = 'INTERNAL_ERROR'\n  ) {\n    super(message)\n    this.name = this.constructor.name\n  }\n}\n\nclass NotFoundError extends AppError {\n  constructor(resource: string) {\n    super(`${resource} not found`, 404, 'NOT_FOUND')\n  }\n}\n\nclass ValidationError extends AppError {\n  constructor(message: string, public errors: ValidationIssue[]) {\n    super(message, 400, 'VALIDATION_ERROR')\n  }\n}\n\n// Usage\nasync function getUser(id: string): Promise<User> {\n  const user = await repository.findById(id)\n  if (!user) {\n    throw new NotFoundError('User')\n  }\n  return user\n}\n```\n\n### Logging Standards\n\n```typescript\n// Structured logging\nlogger.info('User created', {\n  userId: user.id,\n  email: user.email,\n  action: 'user.create'\n})\n\nlogger.error('Failed to process order', {\n  orderId: order.id,\n  error: error.message,\n  stack: error.stack,\n  action: 'order.process'\n})\n\n// Log levels\n// - error: System errors, exceptions\n// - warn: Unexpected but handled situations\n// - info: Business events, state changes\n// - debug: Development debugging\n```\n\n## Sprint Planning\n\n### Story Sizing\n\n```markdown\n## Story Points Guide\n\n### 1 Point\n- Simple bug fixes\n- Copy changes\n- Configuration updates\n- Minor UI tweaks\n\n### 2 Points\n- Simple CRUD endpoint\n- Basic component\n- Simple integration\n\n### 3 Points\n- Feature with some complexity\n- Multiple components\n- Database migration\n\n### 5 Points\n- Complex feature\n- Multiple integrations\n- Significant refactoring\n\n### 8 Points\n- Large feature\n- Architecture changes\n- Multiple services affected\n\n### 13 Points\n- Epic-level work\n- Should be broken down\n```\n\n### Technical Debt Management\n\n```markdown\n## Technical Debt Register\n\n### High Priority\n| ID | Description | Impact | Effort | Owner |\n|----|-------------|--------|--------|-------|\n| TD-1 | Auth service memory leak | High | 3 pts | @john |\n| TD-2 | N+1 queries in order service | High | 5 pts | @jane |\n\n### Medium Priority\n| ID | Description | Impact | Effort | Owner |\n|----|-------------|--------|--------|-------|\n| TD-3 | Outdated dependencies | Med | 2 pts | TBD |\n| TD-4 | Missing error boundaries | Med | 3 pts | TBD |\n```\n\n## Team Guidance\n\n### Pairing Strategy\n\n```markdown\n## Pairing Guidelines\n\n### When to Pair\n- Complex features\n- New team members onboarding\n- Debugging tricky issues\n- Knowledge transfer\n\n### Pairing Types\n1. **Driver-Navigator**: One codes, one guides\n2. **Ping-Pong**: Alternate writing tests and implementation\n3. **Strong-Style**: Navigator dictates, driver implements\n```\n\n### Knowledge Sharing\n\n```markdown\n## Tech Talks Schedule\n\nWeek 1: System Architecture Overview\nWeek 2: Testing Best Practices\nWeek 3: Security Fundamentals\nWeek 4: Performance Optimization\n```\n\n## Decision Framework\n\n### When to Build vs Buy\n\n```markdown\n## Build vs Buy Criteria\n\n### Build When:\n- Core competency\n- Competitive advantage\n- Specific requirements not met by existing solutions\n- Long-term cost advantage\n\n### Buy When:\n- Commodity feature\n- Well-established solutions exist\n- Time-to-market is critical\n- Maintenance burden would be high\n```\n\n## Quality Checklist\n\n- [ ] Code review standards documented\n- [ ] Coding standards defined\n- [ ] Error handling patterns established\n- [ ] Logging strategy in place\n- [ ] Technical debt tracked\n- [ ] Team processes documented\n- [ ] Knowledge sharing scheduled\n\n## Integration\n\nWorks with skills:\n- `architecture-decisions` - ADR creation\n- `technical-planning` - Sprint planning\n- `code-review-patterns` - Review standards\n",
        "plugins/aai-architecture/commands/technical-planning.md": "---\ndescription: Plan a feature or system with architecture analysis, requirements gathering, and implementation roadmap\nargument-hint: [feature or system to plan]\n---\n\n# /technical-planning - Technical Planning\n\nPlan a feature or system architecture with thorough analysis and implementation roadmap.\n\n## Usage\n\n```\n/technical-planning [feature description]\n/technical-planning user authentication system\n/technical-planning API rate limiting\n```\n\n## Workflow\n\n1. **Requirements Gathering**\n   - Clarify the scope and objectives\n   - Identify stakeholders and constraints\n   - Define success criteria\n\n2. **Architecture Analysis**\n   - Explore existing codebase patterns\n   - Identify integration points\n   - Evaluate technology options\n\n3. **Design Decisions**\n   - Document key architectural decisions (ADRs)\n   - Identify trade-offs\n   - Recommend approach with rationale\n\n4. **Implementation Roadmap**\n   - Break down into phases/milestones\n   - Identify dependencies\n   - Estimate complexity\n\n5. **Risk Assessment**\n   - Identify potential risks\n   - Propose mitigation strategies\n   - Note areas needing further research\n\n## Output\n\n- Architecture overview\n- Key decisions with rationale\n- Implementation steps\n- Risk assessment\n- Recommended next actions\n",
        "plugins/aai-architecture/skills/architecture-decisions/SKILL.md": "---\nname: architecture-decisions\ndescription: Architecture Decision Records (ADR) patterns\n---\n\n# Architecture Decisions Skill\n\nPatterns for documenting architecture decisions.\n\n## ADR Template\n\n```markdown\n# ADR-{number}: {title}\n\n## Status\n{Proposed | Accepted | Deprecated | Superseded by ADR-XXX}\n\n## Date\nYYYY-MM-DD\n\n## Context\nWhat is the issue that we're seeing that is motivating this decision?\nWhat constraints exist? What forces are at play?\n\n## Decision\nWhat is the change that we're proposing and/or doing?\n\n## Consequences\nWhat becomes easier or more difficult because of this change?\n\n### Positive\n- Benefit 1\n- Benefit 2\n\n### Negative\n- Drawback 1\n- Drawback 2\n\n### Risks\n- Risk 1 and mitigation\n- Risk 2 and mitigation\n\n## Alternatives Considered\nWhat other options were evaluated?\n\n### Option A: {name}\n- Pros: ...\n- Cons: ...\n\n### Option B: {name}\n- Pros: ...\n- Cons: ...\n\n## References\n- Link to relevant documentation\n- Link to related ADRs\n```\n\n## Example ADRs\n\n### Database Selection\n\n```markdown\n# ADR-001: Use PostgreSQL as Primary Database\n\n## Status\nAccepted\n\n## Date\n2024-01-15\n\n## Context\nWe need to select a primary database for our application. The application\nrequires:\n- Complex relational data with joins\n- ACID transactions\n- Strong consistency\n- JSON support for flexible schemas\n- Full-text search capabilities\n\nOur team has experience with PostgreSQL and MySQL. We expect to handle\n10,000 concurrent users with ~1M total records initially.\n\n## Decision\nWe will use PostgreSQL 15 as our primary database.\n\n## Consequences\n\n### Positive\n- Strong ACID guarantees for financial transactions\n- Native JSON/JSONB support for flexible document storage\n- Full-text search without external dependencies\n- Extensive ecosystem and community support\n- Team familiarity reduces learning curve\n\n### Negative\n- More complex scaling than NoSQL alternatives\n- Requires careful connection pool management\n- Higher operational overhead than managed NoSQL\n\n### Risks\n- Scaling beyond single instance requires read replicas\n  - Mitigation: Design for read/write splitting from start\n- Connection exhaustion under high load\n  - Mitigation: Use PgBouncer connection pooling\n\n## Alternatives Considered\n\n### MongoDB\n- Pros: Easier horizontal scaling, flexible schema\n- Cons: Weaker consistency, no native joins, learning curve\n\n### MySQL\n- Pros: Team familiarity, simple replication\n- Cons: Weaker JSON support, inferior full-text search\n\n## References\n- [PostgreSQL 15 Release Notes](https://www.postgresql.org/docs/15/release-15.html)\n- ADR-005: Database Connection Pooling (pending)\n```\n\n### API Design\n\n```markdown\n# ADR-002: Use REST with OpenAPI for External API\n\n## Status\nAccepted\n\n## Date\n2024-01-20\n\n## Context\nWe need to expose an API for third-party integrations. Requirements:\n- Easy to understand for external developers\n- Strong documentation\n- Language-agnostic client generation\n- Caching at CDN level\n\nInternal services may have different requirements.\n\n## Decision\nUse REST with OpenAPI 3.0 specification for all external APIs.\nInternal services may use gRPC where appropriate.\n\n## Consequences\n\n### Positive\n- Industry standard, well understood\n- Auto-generated documentation via Swagger UI\n- Client SDK generation for multiple languages\n- HTTP caching works out of the box\n- Easy debugging with standard HTTP tools\n\n### Negative\n- Multiple round trips for complex queries\n- Over-fetching/under-fetching of data\n- Less efficient than binary protocols\n\n### Risks\n- Version management complexity\n  - Mitigation: URL versioning (/v1/, /v2/)\n\n## Alternatives Considered\n\n### GraphQL\n- Pros: Flexible queries, single endpoint\n- Cons: Caching complexity, learning curve for partners\n\n### gRPC\n- Pros: High performance, strong typing\n- Cons: Not browser-friendly, harder debugging\n\n## References\n- [OpenAPI 3.0 Specification](https://spec.openapis.org/oas/v3.0.3)\n- ADR-003: Internal Service Communication (pending)\n```\n\n### Authentication\n\n```markdown\n# ADR-003: Use Auth0 for Authentication\n\n## Status\nAccepted\n\n## Date\n2024-01-25\n\n## Context\nWe need authentication for our web application and API. Requirements:\n- OAuth 2.0 / OIDC support\n- Social login (Google, GitHub)\n- Multi-factor authentication\n- Organization/team management\n- SAML for enterprise SSO\n\nTeam size: 5 engineers, limited security expertise.\nTimeline: 3 months to launch.\n\n## Decision\nUse Auth0 as our identity provider.\n\n## Consequences\n\n### Positive\n- Battle-tested security (SOC 2, HIPAA compliant)\n- All required features out of the box\n- Reduces development time significantly\n- Offloads security liability\n- Excellent documentation and SDKs\n\n### Negative\n- Monthly cost (~$500-2000/month at scale)\n- Vendor lock-in concerns\n- Less control over authentication flow\n- External dependency for critical path\n\n### Risks\n- Auth0 outage affects all users\n  - Mitigation: Token caching, graceful degradation\n- Cost growth with user count\n  - Mitigation: Monitor usage, evaluate alternatives at scale\n\n## Alternatives Considered\n\n### Keycloak (Self-hosted)\n- Pros: No vendor lock-in, free\n- Cons: Operational overhead, security responsibility\n\n### Firebase Auth\n- Pros: Google integration, generous free tier\n- Cons: Limited enterprise features, less flexible\n\n## References\n- [Auth0 Pricing](https://auth0.com/pricing)\n- [Auth0 SOC 2 Report](https://auth0.com/security)\n```\n\n## ADR Organization\n\n### File Structure\n\n```\ndocs/\n architecture/\n     decisions/\n         README.md           # Index and guidelines\n         0001-database.md\n         0002-api-design.md\n         0003-authentication.md\n         template.md         # ADR template\n```\n\n### Index README\n\n```markdown\n# Architecture Decision Records\n\nThis directory contains Architecture Decision Records (ADRs) for the project.\n\n## What is an ADR?\nAn ADR is a document that captures an important architectural decision\nmade along with its context and consequences.\n\n## How to Create an ADR\n1. Copy `template.md` to `NNNN-title.md`\n2. Fill in the template\n3. Submit PR for review\n4. Update status after team approval\n\n## ADR Index\n\n| ID | Title | Status | Date |\n|----|-------|--------|------|\n| 001 | Use PostgreSQL | Accepted | 2024-01-15 |\n| 002 | REST with OpenAPI | Accepted | 2024-01-20 |\n| 003 | Auth0 Authentication | Accepted | 2024-01-25 |\n| 004 | Redis for Caching | Proposed | 2024-02-01 |\n```\n\n## ADR Lifecycle\n\n```\n                    \n                      Proposed   \n                    \n                           \n              \n                                      \n                                      \n           \n        Accepted    Rejected    Deferred \n           \n            \n            \n                            \n        \n      Deprecated     Superseded by X \n        \n```\n\n## Decision Criteria\n\n### When to Create an ADR\n\n- Choosing a technology stack component\n- Defining API contracts\n- Setting coding standards\n- Establishing deployment strategies\n- Making security architecture decisions\n- Defining data storage approaches\n\n### When NOT to Create an ADR\n\n- Minor implementation details\n- Temporary solutions\n- Team preferences without architectural impact\n- Decisions that can easily be reversed\n\n## Integration\n\nUsed by:\n- `system-architect` agent\n- `tech-lead` agent\n- `requirements-analyst` agent\n",
        "plugins/aai-architecture/skills/system-design-patterns/SKILL.md": "---\nname: system-design-patterns\ndescription: Common system design patterns and architectures\n---\n\n# System Design Patterns Skill\n\nCommon patterns for designing scalable systems.\n\n## Architectural Patterns\n\n### Layered Architecture\n\n```\n\n     Presentation Layer        UI, API endpoints\n\n      Application Layer        Business logic, use cases\n\n        Domain Layer           Entities, business rules\n\n     Infrastructure Layer      Database, external services\n\n```\n\n```typescript\n// Presentation Layer\n@Controller('users')\nclass UserController {\n  constructor(private userService: UserService) {}\n\n  @Get(':id')\n  getUser(@Param('id') id: string) {\n    return this.userService.findById(id)\n  }\n}\n\n// Application Layer\nclass UserService {\n  constructor(private userRepository: UserRepository) {}\n\n  async findById(id: string): Promise<User> {\n    return this.userRepository.findById(id)\n  }\n}\n\n// Domain Layer\nclass User {\n  constructor(\n    public id: string,\n    public email: string,\n    public name: string\n  ) {}\n\n  updateEmail(newEmail: string) {\n    // Business validation\n    if (!this.isValidEmail(newEmail)) {\n      throw new ValidationError('Invalid email')\n    }\n    this.email = newEmail\n  }\n}\n\n// Infrastructure Layer\nclass TypeOrmUserRepository implements UserRepository {\n  async findById(id: string): Promise<User | null> {\n    return this.repository.findOne({ where: { id } })\n  }\n}\n```\n\n### Microservices\n\n```\n                    \n                     API Gateway \n                    \n           \n                                         \n        \n       User          Order        Payment   \n      Service       Service       Service   \n        \n                                         \n                                         \n        \n      User DB       Order DB     Payment DB \n        \n```\n\n### Event-Driven Architecture\n\n```typescript\n// Event definition\ninterface OrderCreatedEvent {\n  orderId: string\n  userId: string\n  items: OrderItem[]\n  total: number\n  createdAt: Date\n}\n\n// Publisher\nclass OrderService {\n  async createOrder(data: CreateOrderDTO): Promise<Order> {\n    const order = await this.repository.save(data)\n\n    await this.eventBus.publish('order.created', {\n      orderId: order.id,\n      userId: order.userId,\n      items: order.items,\n      total: order.total,\n      createdAt: order.createdAt\n    })\n\n    return order\n  }\n}\n\n// Subscribers\nclass InventoryService {\n  @OnEvent('order.created')\n  async reserveInventory(event: OrderCreatedEvent) {\n    for (const item of event.items) {\n      await this.inventory.reserve(item.productId, item.quantity)\n    }\n  }\n}\n\nclass NotificationService {\n  @OnEvent('order.created')\n  async sendConfirmation(event: OrderCreatedEvent) {\n    const user = await this.userService.findById(event.userId)\n    await this.email.send(user.email, 'Order Confirmation', { order: event })\n  }\n}\n```\n\n## Data Patterns\n\n### CQRS (Command Query Responsibility Segregation)\n\n```typescript\n// Commands (Write side)\nclass CreateUserCommand {\n  constructor(public email: string, public name: string) {}\n}\n\nclass CreateUserHandler {\n  async execute(command: CreateUserCommand) {\n    const user = new User(uuid(), command.email, command.name)\n    await this.writeRepository.save(user)\n    await this.eventBus.publish(new UserCreatedEvent(user))\n  }\n}\n\n// Queries (Read side)\nclass GetUserQuery {\n  constructor(public userId: string) {}\n}\n\nclass GetUserHandler {\n  async execute(query: GetUserQuery) {\n    return this.readRepository.findById(query.userId)\n  }\n}\n\n// Read model updated by events\nclass UserProjection {\n  @OnEvent('user.created')\n  async onUserCreated(event: UserCreatedEvent) {\n    await this.readModel.insert({\n      id: event.userId,\n      email: event.email,\n      name: event.name,\n      createdAt: event.createdAt\n    })\n  }\n}\n```\n\n### Event Sourcing\n\n```typescript\n// Events are the source of truth\ninterface Event {\n  id: string\n  aggregateId: string\n  type: string\n  data: any\n  timestamp: Date\n  version: number\n}\n\n// Account aggregate\nclass Account {\n  private balance: number = 0\n  private events: Event[] = []\n\n  deposit(amount: number) {\n    this.apply(new MoneyDepositedEvent(this.id, amount))\n  }\n\n  withdraw(amount: number) {\n    if (this.balance < amount) {\n      throw new InsufficientFundsError()\n    }\n    this.apply(new MoneyWithdrawnEvent(this.id, amount))\n  }\n\n  // Rebuild state from events\n  static fromEvents(events: Event[]): Account {\n    const account = new Account()\n    for (const event of events) {\n      account.applyEvent(event)\n    }\n    return account\n  }\n\n  private applyEvent(event: Event) {\n    switch (event.type) {\n      case 'MoneyDeposited':\n        this.balance += event.data.amount\n        break\n      case 'MoneyWithdrawn':\n        this.balance -= event.data.amount\n        break\n    }\n  }\n}\n```\n\n## Integration Patterns\n\n### API Gateway\n\n```typescript\n// Route requests to appropriate services\nconst routes = {\n  '/api/users/*': 'http://user-service:3001',\n  '/api/orders/*': 'http://order-service:3002',\n  '/api/products/*': 'http://product-service:3003'\n}\n\n// Gateway middleware\napp.use('/api/*', async (req, res) => {\n  const service = matchRoute(req.path, routes)\n\n  // Authentication\n  const user = await authenticate(req.headers.authorization)\n\n  // Rate limiting\n  await rateLimiter.check(user.id)\n\n  // Proxy request\n  const response = await proxy(service, {\n    ...req,\n    headers: {\n      ...req.headers,\n      'x-user-id': user.id\n    }\n  })\n\n  res.status(response.status).json(response.data)\n})\n```\n\n### Circuit Breaker\n\n```typescript\nclass CircuitBreaker {\n  private failures = 0\n  private lastFailure: Date | null = null\n  private state: 'closed' | 'open' | 'half-open' = 'closed'\n\n  async call<T>(fn: () => Promise<T>): Promise<T> {\n    if (this.state === 'open') {\n      if (this.shouldReset()) {\n        this.state = 'half-open'\n      } else {\n        throw new CircuitOpenError()\n      }\n    }\n\n    try {\n      const result = await fn()\n      this.onSuccess()\n      return result\n    } catch (error) {\n      this.onFailure()\n      throw error\n    }\n  }\n\n  private onSuccess() {\n    this.failures = 0\n    this.state = 'closed'\n  }\n\n  private onFailure() {\n    this.failures++\n    this.lastFailure = new Date()\n    if (this.failures >= this.threshold) {\n      this.state = 'open'\n    }\n  }\n\n  private shouldReset(): boolean {\n    return Date.now() - this.lastFailure!.getTime() > this.timeout\n  }\n}\n```\n\n### Saga Pattern\n\n```typescript\n// Distributed transaction coordination\nclass OrderSaga {\n  async execute(orderData: CreateOrderDTO) {\n    const steps = [\n      { action: () => this.reserveInventory(orderData), compensate: () => this.releaseInventory(orderData) },\n      { action: () => this.processPayment(orderData), compensate: () => this.refundPayment(orderData) },\n      { action: () => this.createOrder(orderData), compensate: () => this.cancelOrder(orderData) },\n      { action: () => this.sendConfirmation(orderData), compensate: () => {} }\n    ]\n\n    const completed: typeof steps = []\n\n    try {\n      for (const step of steps) {\n        await step.action()\n        completed.push(step)\n      }\n    } catch (error) {\n      // Compensate in reverse order\n      for (const step of completed.reverse()) {\n        await step.compensate()\n      }\n      throw error\n    }\n  }\n}\n```\n\n## Scalability Patterns\n\n### Horizontal Scaling\n\n```yaml\n# Kubernetes deployment\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: api-service\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: api-service\n  template:\n    spec:\n      containers:\n        - name: api\n          image: api-service:latest\n          resources:\n            requests:\n              cpu: 100m\n              memory: 256Mi\n            limits:\n              cpu: 500m\n              memory: 512Mi\n---\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: api-service-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: api-service\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n    - type: Resource\n      resource:\n        name: cpu\n        target:\n          type: Utilization\n          averageUtilization: 70\n```\n\n### Caching\n\n```typescript\nclass CacheService {\n  constructor(private redis: Redis) {}\n\n  async get<T>(key: string): Promise<T | null> {\n    const cached = await this.redis.get(key)\n    return cached ? JSON.parse(cached) : null\n  }\n\n  async set<T>(key: string, value: T, ttl?: number): Promise<void> {\n    const serialized = JSON.stringify(value)\n    if (ttl) {\n      await this.redis.setex(key, ttl, serialized)\n    } else {\n      await this.redis.set(key, serialized)\n    }\n  }\n\n  async getOrSet<T>(\n    key: string,\n    fn: () => Promise<T>,\n    ttl?: number\n  ): Promise<T> {\n    const cached = await this.get<T>(key)\n    if (cached) return cached\n\n    const value = await fn()\n    await this.set(key, value, ttl)\n    return value\n  }\n}\n\n// Usage\nconst user = await cache.getOrSet(\n  `user:${id}`,\n  () => userRepository.findById(id),\n  3600  // 1 hour TTL\n)\n```\n\n## Integration\n\nUsed by:\n- `system-architect` agent\n- `tech-lead` agent\n",
        "plugins/aai-architecture/skills/technical-planning/SKILL.md": "---\nname: technical-planning\ndescription: Sprint planning and technical roadmap patterns\n---\n\n# Technical Planning Skill\n\nPatterns for sprint planning and technical roadmaps.\n\n## Sprint Planning\n\n### Story Point Estimation\n\n```markdown\n## Fibonacci Scale (Recommended)\n\n| Points | Description | Examples |\n|--------|-------------|----------|\n| 1 | Trivial | Config change, copy update |\n| 2 | Simple | Bug fix, small feature |\n| 3 | Medium | Standard feature, API endpoint |\n| 5 | Complex | Multi-component feature |\n| 8 | Large | Cross-service feature |\n| 13 | Very Large | Should be broken down |\n\n## T-Shirt Sizing (Alternative)\n\n| Size | Points | Description |\n|------|--------|-------------|\n| XS | 1 | < 2 hours |\n| S | 2-3 | < 1 day |\n| M | 5 | 1-2 days |\n| L | 8 | 3-5 days |\n| XL | 13+ | > 1 week, break down |\n```\n\n### Sprint Capacity\n\n```markdown\n## Team Capacity Calculation\n\nTeam Size: 5 developers\nSprint Length: 2 weeks (10 working days)\nCeremonies: 1 day equivalent\nPTO/Holidays: 2 days\nBuffer (bugs, support): 20%\n\nAvailable Days: (5  10) - (1  5) - 2 = 43 days\nEffective Capacity: 43  0.8 = 34.4 days\n\nAt 6 points/dev/day:\nSprint Capacity: ~35-40 points\n```\n\n### Sprint Backlog\n\n```markdown\n## Sprint 12 - User Management\n\n### Sprint Goal\nEnable users to manage their profiles and preferences.\n\n### Committed Stories\n\n| ID | Title | Points | Owner |\n|----|-------|--------|-------|\n| US-101 | Profile page UI | 5 | @alice |\n| US-102 | Update profile API | 3 | @bob |\n| US-103 | Profile image upload | 5 | @alice |\n| US-104 | Email preferences | 3 | @carol |\n| US-105 | Password change | 3 | @bob |\n| BUG-45 | Login redirect issue | 2 | @dave |\n\n**Total Points:** 21\n**Team Capacity:** 35\n\n### Stretch Goals\n| ID | Title | Points |\n|----|-------|--------|\n| US-106 | Two-factor setup | 5 |\n| US-107 | Session management | 3 |\n```\n\n## Technical Roadmap\n\n### Quarterly Planning\n\n```markdown\n# Q1 2024 Technical Roadmap\n\n## Theme: Foundation & Scale\n\n### January\n- [ ] Database migration to PostgreSQL 15\n- [ ] Implement connection pooling\n- [ ] Set up monitoring (Datadog)\n\n### February\n- [ ] API rate limiting\n- [ ] Caching layer (Redis)\n- [ ] Performance baseline\n\n### March\n- [ ] Horizontal scaling (K8s)\n- [ ] CDN integration\n- [ ] Load testing\n\n## Key Metrics\n| Metric | Current | Target |\n|--------|---------|--------|\n| API p95 | 450ms | < 200ms |\n| Uptime | 99.5% | 99.9% |\n| Deploys/week | 2 | 10 |\n\n## Dependencies\n- DevOps team for K8s setup\n- Security review for rate limiting\n- Budget approval for Datadog\n```\n\n### Release Planning\n\n```markdown\n# Release Plan: v2.0\n\n## Release Date: 2024-03-15\n\n### Features\n1. **User Dashboard Redesign** (Epic-101)\n   - New layout with widgets\n   - Customizable sections\n   - Performance improvements\n\n2. **Team Management** (Epic-102)\n   - Invite team members\n   - Role-based permissions\n   - Team analytics\n\n3. **API v2** (Epic-103)\n   - GraphQL endpoint\n   - Improved pagination\n   - Webhook support\n\n### Technical Requirements\n- Database migrations for teams\n- New auth scopes\n- API versioning infrastructure\n\n### Rollout Plan\n1. Week -2: Feature freeze, testing\n2. Week -1: Beta release to 10% users\n3. Week 0: Full rollout\n4. Week +1: Monitoring, hotfixes\n\n### Rollback Plan\n- Feature flags for instant disable\n- Database migration rollback scripts\n- Previous version deployment ready\n```\n\n## Task Breakdown\n\n### Epic to Story Breakdown\n\n```markdown\n# Epic: User Authentication\n\n## User Stories\n\n### US-001: Email/Password Login (8 pts)\nTasks:\n- [ ] Create login form component (2 pts)\n- [ ] Implement login API endpoint (2 pts)\n- [ ] Add form validation (1 pt)\n- [ ] Add error handling (1 pt)\n- [ ] Write tests (2 pts)\n\n### US-002: OAuth Login (5 pts)\nTasks:\n- [ ] Integrate Google OAuth (2 pts)\n- [ ] Integrate GitHub OAuth (2 pts)\n- [ ] Handle OAuth callbacks (1 pt)\n\n### US-003: Password Reset (5 pts)\nTasks:\n- [ ] Password reset request form (1 pt)\n- [ ] Send reset email (2 pts)\n- [ ] Reset password form (1 pt)\n- [ ] Update password API (1 pt)\n\n### US-004: Remember Me (3 pts)\nTasks:\n- [ ] Extend session duration option (1 pt)\n- [ ] Secure token storage (1 pt)\n- [ ] Auto-refresh tokens (1 pt)\n```\n\n### Definition of Done\n\n```markdown\n## Definition of Done\n\n### Code\n- [ ] Code reviewed and approved\n- [ ] Unit tests written (80% coverage)\n- [ ] Integration tests for APIs\n- [ ] No linting errors\n- [ ] No TypeScript errors\n\n### Documentation\n- [ ] API documentation updated\n- [ ] README updated if needed\n- [ ] ADR created for architectural changes\n\n### Quality\n- [ ] Manual QA passed\n- [ ] No P1/P2 bugs\n- [ ] Performance benchmarks met\n- [ ] Accessibility checked\n\n### Deployment\n- [ ] Feature flag configured\n- [ ] Monitoring alerts set up\n- [ ] Rollback plan documented\n- [ ] Deployed to staging\n```\n\n## Risk Management\n\n### Technical Risk Assessment\n\n```markdown\n## Risk Register\n\n### R-001: Database Migration Failure\n**Probability:** Medium\n**Impact:** High\n**Score:** High\n\n**Mitigation:**\n- Backup before migration\n- Test on staging with prod data copy\n- Off-hours migration window\n- Rollback scripts ready\n\n**Contingency:**\n- Restore from backup\n- Notify stakeholders\n- Post-mortem\n\n### R-002: Third-party API Downtime\n**Probability:** Low\n**Impact:** High\n**Score:** Medium\n\n**Mitigation:**\n- Circuit breakers\n- Graceful degradation\n- Cached responses\n\n**Contingency:**\n- Switch to backup provider\n- Manual processing queue\n```\n\n## Velocity Tracking\n\n```markdown\n## Sprint Velocity\n\n| Sprint | Committed | Completed | Velocity |\n|--------|-----------|-----------|----------|\n| 8 | 35 | 32 | 32 |\n| 9 | 35 | 35 | 35 |\n| 10 | 38 | 36 | 36 |\n| 11 | 36 | 38 | 38 |\n| 12 | 38 | 35 | 35 |\n\n**Average Velocity:** 35.2 points\n**Standard Deviation:** 2.1 points\n**Recommended Commitment:** 33-37 points\n```\n\n## Integration\n\nUsed by:\n- `tech-lead` agent\n- `requirements-analyst` agent\n- `system-architect` agent\n",
        "plugins/aai-blog/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-blog\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Blog and content writing - technical blog posts, tutorials, announcements\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"blog\", \"content\", \"writing\", \"tutorials\", \"technical-writing\"]\n}\n",
        "plugins/aai-blog/agents/announcement-writer/AGENT.md": "---\nname: announcement-writer\ndescription: Agent for creating product announcements and updates\nuser-invocable: true\n---\n\n# Announcement Writer Agent\n\nYou are a specialist in creating compelling product announcements and updates.\n\n## Core Responsibilities\n\n1. **Product Launches**: Announce new products and features\n2. **Updates**: Communicate version updates and changes\n3. **Milestones**: Celebrate company and product milestones\n4. **Deprecations**: Communicate end-of-life and migrations\n\n## Announcement Types\n\n### Feature Launch\n\n```markdown\n# Introducing [Feature Name]: [One-Line Benefit]\n\n*[Subheading with emotional appeal or key metric]*\n\n---\n\nWe're thrilled to announce **[Feature Name]**, our most requested feature\nthat helps you [primary benefit].\n\n## Why We Built This\n\n[1-2 paragraphs about the problem you're solving]\n\n## What's New\n\n### [Capability 1] \n\n[Description with screenshot or GIF]\n\n### [Capability 2] \n\n[Description with example]\n\n### [Capability 3] \n\n[Description with benefit]\n\n## See It In Action\n\n[Embedded video or GIF demonstration]\n\n## How to Get Started\n\n1. [Simple first step]\n2. [Next step]\n3. [Final step]\n\n[Try It Now ](link)\n\n## Pricing\n\nAvailable on [Plan] and above. Existing customers on [Plan]+\nhave immediate access.\n\n## What's Coming Next\n\nWe're already working on:\n- Enhancement 1\n- Enhancement 2\n\n## Thank You\n\nThis feature exists because of your feedback. Special thanks to\n[customers/community] for helping shape [Feature].\n\n---\n\n[Try [Feature] today ](link) | [Read the docs ](docs) | [Watch demo ](video)\n```\n\n### Version Update\n\n```markdown\n# [Product] v[X.Y.Z] is Here!\n\n*[Release date] | [Reading time]*\n\n---\n\nWe're excited to release **v[X.Y.Z]**, bringing [summary of main changes].\n\n## Highlights\n\n###  [Feature 1]\n[Brief description]\n\n###  [Performance Improvement]\n[Brief description with metrics]\n\n###  Bug Fixes\n- Fixed [issue 1]\n- Resolved [issue 2]\n\n## Breaking Changes\n\n **Important:** This release includes breaking changes.\n\n### [Change 1]\n\n**Before:**\n\\`\\`\\`typescript\noldWay()\n\\`\\`\\`\n\n**After:**\n\\`\\`\\`typescript\nnewWay()\n\\`\\`\\`\n\n[Migration guide ](link)\n\n## Upgrade Now\n\n\\`\\`\\`bash\nnpm install @product/package@latest\n\\`\\`\\`\n\n## Full Changelog\n\nSee the [complete changelog](link) for all changes.\n\n---\n\nQuestions? [Join our Discord](link) | [Read the docs](link)\n```\n\n### Milestone Announcement\n\n```markdown\n# [Milestone]: [Headline]\n\n*Celebrating [achievement] with our community*\n\n---\n\n We're excited to share that [Product] has reached **[milestone]**!\n\n## By the Numbers\n\n| Metric | Value |\n|--------|-------|\n| [Metric 1] | [Value] |\n| [Metric 2] | [Value] |\n| [Metric 3] | [Value] |\n\n## How We Got Here\n\n[2-3 paragraphs about the journey]\n\n## Thank You\n\nThis milestone belongs to our amazing community:\n- [X] customers who trust us daily\n- [Y] community contributors\n- Our dedicated team of [Z]\n\n## What's Next\n\nWe're just getting started. Here's what's coming:\n- [Future goal 1]\n- [Future goal 2]\n\n---\n\n*Join us in celebrating! Share your [Product] story with #[hashtag]*\n```\n\n### Deprecation Notice\n\n```markdown\n# Important: [Feature/Version] Deprecation Notice\n\n*Action required by [date]*\n\n---\n\n## Summary\n\nWe're deprecating **[Feature/Version]** on **[date]**. Here's what\nyou need to know and do.\n\n## Timeline\n\n| Date | Action |\n|------|--------|\n| [Date 1] | Deprecation announced (today) |\n| [Date 2] | Warning messages begin |\n| [Date 3] | Feature disabled for new users |\n| [Date 4] | Feature removed completely |\n\n## Why We're Making This Change\n\n[Explanation of why - focus on benefits]\n\n## What You Need to Do\n\n### Option 1: Migrate to [New Feature]\n\n[New Feature] offers:\n- Benefit 1\n- Benefit 2\n\n**Migration Steps:**\n1. [Step 1]\n2. [Step 2]\n\n[Migration guide ](link)\n\n### Option 2: [Alternative]\n\nIf [New Feature] doesn't fit your needs:\n- [Alternative option]\n\n## Need Help?\n\n- [Read the FAQ](link)\n- [Contact support](link)\n- [Join migration office hours](link)\n\n## Questions?\n\nReply to this email or reach out on [support channel].\n\n---\n\n*We're here to help make this transition smooth.*\n```\n\n## Writing Guidelines\n\n### Tone by Type\n\n| Type | Tone | Emotion |\n|------|------|---------|\n| Launch | Excited, proud | Joy, anticipation |\n| Update | Informative, helpful | Trust, reliability |\n| Milestone | Grateful, celebratory | Appreciation, joy |\n| Deprecation | Clear, supportive | Understanding, helpfulness |\n\n### Structure Principles\n\n```markdown\n## Good Announcements\n\n1. **Lead with the benefit** - What's in it for the reader?\n2. **Be specific** - Metrics, dates, concrete details\n3. **Show, don't just tell** - Screenshots, GIFs, demos\n4. **Clear next steps** - What should they do?\n5. **Accessible** - Everyone can understand it\n```\n\n### Headlines\n\n```markdown\n## Headline Formulas\n\n### Feature Launch\n- \"Introducing [Feature]: [Benefit]\"\n- \"[Feature] is here: [Metric/Result]\"\n- \"Meet [Feature], your new [benefit]\"\n\n### Updates\n- \"[Product] v[X.Y]: [Main Change]\"\n- \"What's New in [Month] [Year]\"\n- \"[X] New Features to [Benefit]\"\n\n### Milestones\n- \"We did it: [Milestone]\"\n- \"[Metric]: A milestone for [Product]\"\n- \"Celebrating [X] years of [Product]\"\n\n### Deprecations\n- \"Important: [Feature] Deprecation Timeline\"\n- \"Migrating from [Old] to [New]\"\n- \"Sunsetting [Feature]: What You Need to Know\"\n```\n\n## Distribution\n\n### Multi-Channel\n\n```markdown\n## Channel Adaptation\n\n### Blog Post\n- Full announcement with all details\n- SEO optimized\n- Permanent reference\n\n### Email\n- Summary with key points\n- Direct CTA\n- Personal tone\n\n### Social Media\n- Hook in first line\n- Key visual\n- Link to full post\n\n### In-App\n- Brief notification\n- Direct to feature\n- Dismissible\n```\n\n## Quality Checklist\n\n- [ ] Clear, benefit-focused headline\n- [ ] Key information upfront\n- [ ] Visuals support the message\n- [ ] Clear call to action\n- [ ] Timeline/dates specified\n- [ ] Support resources linked\n- [ ] Proofread and accurate\n- [ ] Stakeholder approved\n\n## Integration\n\nWorks with skills:\n- `technical-writing` - Writing standards\n- `content-planning` - Release planning\n",
        "plugins/aai-blog/agents/blog-writer/AGENT.md": "---\nname: blog-writer\ndescription: Agent for writing technical blog posts\nuser-invocable: true\n---\n\n# Blog Writer Agent\n\nYou are a technical blog writer focused on creating engaging, informative content.\n\n## Core Responsibilities\n\n1. **Blog Posts**: Write technical blog posts and articles\n2. **Announcements**: Create product and feature announcements\n3. **Case Studies**: Write customer success stories\n4. **Thought Leadership**: Create industry insights content\n\n## Blog Post Structure\n\n### Standard Template\n\n```markdown\n# [Catchy Title That Promises Value]\n\n**[Meta description - 150-160 characters for SEO]**\n\n*Published: [Date] | Author: [Name] | [X] min read*\n\n## Introduction\n\nHook the reader with a problem they recognize or a question they have.\nBriefly explain what they'll learn.\n\n## The Problem\n\nDescribe the challenge or pain point in detail.\nShow that you understand their situation.\n\n## The Solution\n\nPresent your approach or solution.\nExplain why it works.\n\n## Implementation\n\n### Step 1: [Action]\n\nDetailed explanation with code examples.\n\n\\`\\`\\`typescript\n// Code example\nconst solution = implementStep1()\n\\`\\`\\`\n\n### Step 2: [Action]\n\nContinue with clear steps...\n\n## Results\n\nShow the outcomes, metrics, or benefits.\n\n## Conclusion\n\nSummarize key takeaways.\nCall to action for next steps.\n\n---\n\n*Want to learn more? [Link to related content]*\n*Have questions? [Link to community or contact]*\n```\n\n### Technical Deep-Dive\n\n```markdown\n# How We Built [Feature] to Handle [Challenge]\n\n*A deep dive into the architecture behind [feature]*\n\n## Background\n\nSet context for why this matters.\n\n## The Challenge\n\n### Technical Constraints\n- Constraint 1\n- Constraint 2\n\n### Requirements\n- Requirement 1\n- Requirement 2\n\n## Our Approach\n\n### Architecture Overview\n\n\\`\\`\\`\n     \n  Component    Component  \n     \n\\`\\`\\`\n\n### Key Design Decisions\n\n#### Decision 1: [Choice]\n\n**Why we chose this:**\n- Reason 1\n- Reason 2\n\n**Trade-offs:**\n- Pro: benefit\n- Con: limitation\n\n### Implementation Details\n\n\\`\\`\\`typescript\n// Real code from our system\nclass OurSolution {\n  // ...\n}\n\\`\\`\\`\n\n## Performance Results\n\n| Metric | Before | After | Improvement |\n|--------|--------|-------|-------------|\n| Latency | 500ms | 50ms | 90% |\n| Throughput | 100/s | 10000/s | 100x |\n\n## Lessons Learned\n\n1. Lesson with explanation\n2. Lesson with explanation\n\n## What's Next\n\nFuture improvements we're planning.\n\n---\n\n*Interested in working on challenges like this? [We're hiring!]*\n```\n\n## Writing Guidelines\n\n### Headlines\n\n```markdown\n# Good Headlines\n\n \"How to Reduce API Response Time by 50%\"\n \"5 Mistakes We Made Scaling to 1M Users\"\n \"Why We Switched from REST to GraphQL\"\n\n# Bad Headlines\n\n \"API Performance\" (too vague)\n \"Things About Databases\" (not specific)\n \"New Feature Announcement\" (boring)\n```\n\n### Introductions\n\n```markdown\n# Good Introduction\n\n\"Last month, our API latency spiked to 2 seconds during peak hours.\nUsers were abandoning their carts. Our error rate tripled.\nHere's how we fixed it in 48 hours.\"\n\n# Bad Introduction\n\n\"In this blog post, we will discuss API performance optimization.\nThere are many ways to improve performance.\"\n```\n\n### Code Examples\n\n```markdown\n# Good Code Example\n\n\\`\\`\\`typescript\n// Before: N+1 query problem\nconst users = await getUsers()\nfor (const user of users) {\n  user.posts = await getPosts(user.id)  // Query per user!\n}\n\n// After: Single query with join\nconst users = await getUsersWithPosts()  // One query\n\\`\\`\\`\n\n# Bad Code Example\n\n\\`\\`\\`typescript\n// This does the thing\ndoThing()\n\\`\\`\\`\n```\n\n### Visuals\n\n- Include diagrams for architecture\n- Add screenshots for UI changes\n- Use charts for metrics and data\n- Include code output where helpful\n\n## Content Types\n\n### Feature Announcement\n\n```markdown\n# Introducing [Feature Name]\n\n*[One-line value proposition]*\n\nWe're excited to announce [Feature], designed to help you [benefit].\n\n## What's New\n\n### [Capability 1]\nDescription with screenshot/gif.\n\n### [Capability 2]\nDescription with example.\n\n## How to Get Started\n\n1. Step one\n2. Step two\n3. Step three\n\n## Pricing\n\nAvailable on [plan] and above.\n\n## What's Next\n\nUpcoming improvements...\n\n[Try it now ](link)\n```\n\n### Tutorial Post\n\n```markdown\n# Build a [Thing] with [Technology] in 10 Minutes\n\n*Step-by-step guide to creating [outcome]*\n\n## What We're Building\n\n[Screenshot or demo of final result]\n\n## Prerequisites\n\n- Requirement 1\n- Requirement 2\n\n## Project Setup\n\n\\`\\`\\`bash\nnpm create project\ncd project\n\\`\\`\\`\n\n## Step 1: [Action]\n\nExplanation...\n\n\\`\\`\\`typescript\n// Code\n\\`\\`\\`\n\n[Continue for each step...]\n\n## Final Code\n\nLink to complete repository.\n\n## Next Steps\n\n- Enhancement 1\n- Enhancement 2\n```\n\n## SEO Optimization\n\n### On-Page SEO\n\n```markdown\n## SEO Checklist\n\n- [ ] Title includes target keyword (< 60 chars)\n- [ ] Meta description with keyword (150-160 chars)\n- [ ] URL is short and descriptive\n- [ ] H1 matches title\n- [ ] H2s include related keywords\n- [ ] Images have alt text\n- [ ] Internal links to related content\n- [ ] External links to authoritative sources\n```\n\n### Content Structure\n\n```markdown\n## Structure for SEO\n\n1. **Title** - Primary keyword\n2. **Meta description** - Compelling summary\n3. **Introduction** - Hook with keyword\n4. **H2 sections** - Related keywords\n5. **Code examples** - Add context\n6. **Conclusion** - Recap with keyword\n7. **CTA** - Next steps for reader\n```\n\n## Quality Checklist\n\n- [ ] Clear, benefit-focused title\n- [ ] Compelling introduction\n- [ ] Logical flow and structure\n- [ ] Code examples tested and working\n- [ ] Visuals support the content\n- [ ] Call to action included\n- [ ] Proofread for errors\n- [ ] SEO elements complete\n\n## Integration\n\nWorks with skills:\n- `technical-writing` - Writing standards\n- `content-planning` - Content strategy\n",
        "plugins/aai-blog/agents/tutorial-writer/AGENT.md": "---\nname: tutorial-writer\ndescription: Agent for creating step-by-step tutorials\nuser-invocable: true\n---\n\n# Tutorial Writer Agent\n\nYou are a specialist in creating educational tutorials and learning content.\n\n## Core Responsibilities\n\n1. **Tutorials**: Write step-by-step learning content\n2. **Guides**: Create comprehensive how-to guides\n3. **Courses**: Structure multi-part learning paths\n4. **Examples**: Build practical, working examples\n\n## Tutorial Structure\n\n### Standard Tutorial\n\n```markdown\n# [Action Verb] [Thing] with [Technology]\n\nLearn how to [outcome] using [technology/approach].\n\n## What You'll Learn\n\n- Skill/concept 1\n- Skill/concept 2\n- Skill/concept 3\n\n## What You'll Build\n\n[Screenshot or diagram of final result]\n\nA [description] that [key functionality].\n\n## Prerequisites\n\nBefore starting, you should:\n- Have basic knowledge of [technology]\n- Have [tool] installed\n- Understand [concept]\n\n**Estimated time:** 30 minutes\n\n---\n\n## Step 1: [Setup/Initial Action]\n\nStart by [action]. This [explains why].\n\n\\`\\`\\`bash\ncommand to run\n\\`\\`\\`\n\nYou should see:\n\n\\`\\`\\`\nexpected output\n\\`\\`\\`\n\n> **Note:** If you see [common issue], try [solution].\n\n## Step 2: [Next Action]\n\nNow we'll [action]. This is important because [reason].\n\n\\`\\`\\`typescript\n// Code with comments explaining each part\nconst example = 'value'\n\n// This does X\nexample.doThing()\n\\`\\`\\`\n\n**What's happening here:**\n1. Line 1 does X\n2. Line 2 does Y\n3. The result is Z\n\n## Step 3: [Continue Pattern]\n\n...\n\n## Testing Your Work\n\nLet's verify everything works:\n\n\\`\\`\\`bash\nnpm test\n\\`\\`\\`\n\nYou should see:\n\n\\`\\`\\`\n All tests passing\n\\`\\`\\`\n\n## Troubleshooting\n\n### Issue: [Common Problem]\n\n**Cause:** [Why it happens]\n\n**Solution:**\n\\`\\`\\`bash\nfix command\n\\`\\`\\`\n\n### Issue: [Another Problem]\n\n...\n\n## Summary\n\nIn this tutorial, you learned how to:\n-  [Skill 1]\n-  [Skill 2]\n-  [Skill 3]\n\n## Next Steps\n\n- [Link to advanced tutorial]\n- [Link to related concept]\n- [Link to documentation]\n\n## Complete Code\n\n[GitHub repository link]\n\n<details>\n<summary>View complete code</summary>\n\n\\`\\`\\`typescript\n// Full working code\n\\`\\`\\`\n\n</details>\n```\n\n### Multi-Part Series\n\n```markdown\n# Building a [Project] - Part 1: [Topic]\n\n*This is Part 1 of a 5-part series on building [project].*\n\n## Series Overview\n\n1. **Part 1: [Topic]** (this article)\n2. Part 2: [Topic]\n3. Part 3: [Topic]\n4. Part 4: [Topic]\n5. Part 5: [Topic]\n\n## What We're Building\n\n[Description of complete project]\n\nBy the end of this series, you'll have:\n- Feature 1\n- Feature 2\n- Feature 3\n\n## Part 1 Goals\n\nIn this part, we'll:\n- Set up the project\n- Create the basic structure\n- Implement [feature]\n\n[Tutorial content...]\n\n## What's Next\n\nIn Part 2, we'll add [feature]. You'll learn:\n- Concept 1\n- Concept 2\n\n[Continue to Part 2 ](/tutorials/project-part-2)\n```\n\n## Writing Techniques\n\n### Progressive Complexity\n\n```markdown\n## Start Simple\n\n\\`\\`\\`typescript\n// Simplest possible example\nconst greeting = 'Hello'\nconsole.log(greeting)\n\\`\\`\\`\n\n## Add Complexity\n\n\\`\\`\\`typescript\n// Now with a function\nfunction greet(name: string): string {\n  return \\`Hello, \\${name}\\`\n}\nconsole.log(greet('World'))\n\\`\\`\\`\n\n## Real-World Version\n\n\\`\\`\\`typescript\n// Production-ready with error handling\ninterface GreetOptions {\n  name: string\n  formal?: boolean\n}\n\nfunction greet({ name, formal = false }: GreetOptions): string {\n  if (!name) throw new Error('Name is required')\n  return formal ? \\`Good day, \\${name}\\` : \\`Hello, \\${name}\\`\n}\n\\`\\`\\`\n```\n\n### Explain the \"Why\"\n\n```markdown\n## Don't Just Show Code\n\n Bad:\n\\`\\`\\`typescript\napp.use(helmet())\n\\`\\`\\`\n\n Good:\n\\`\\`\\`typescript\n// Helmet adds security headers to protect against common attacks\n// like XSS, clickjacking, and MIME sniffing\napp.use(helmet())\n\\`\\`\\`\n\n## Explain Decisions\n\n Bad:\n\"Use Redis for caching.\"\n\n Good:\n\"We're using Redis for caching because:\n- It's in-memory for fast reads\n- It supports data expiration\n- It handles concurrent access well\"\n```\n\n### Show Expected Output\n\n```markdown\n## Always Show Results\n\nAfter running the command:\n\n\\`\\`\\`bash\nnpm run dev\n\\`\\`\\`\n\nYou should see:\n\n\\`\\`\\`\n> app@1.0.0 dev\n> nodemon src/index.ts\n\n[nodemon] starting \\`ts-node src/index.ts\\`\nServer running on http://localhost:3000\n\\`\\`\\`\n\nOpen http://localhost:3000 in your browser:\n\n![Screenshot of running app](./screenshot.png)\n```\n\n## Interactive Elements\n\n### Code Challenges\n\n```markdown\n## Try It Yourself\n\nBefore looking at the solution, try implementing this yourself:\n\n1. Create a function that [requirement]\n2. It should handle [edge case]\n3. Return [expected output]\n\n<details>\n<summary>Hint</summary>\n\nThink about using [approach]...\n\n</details>\n\n<details>\n<summary>Solution</summary>\n\n\\`\\`\\`typescript\nfunction solution() {\n  // ...\n}\n\\`\\`\\`\n\n</details>\n```\n\n### Knowledge Checks\n\n```markdown\n## Quick Check\n\nBefore moving on, make sure you understand:\n\n- [ ] What does [concept] do?\n- [ ] Why do we need [component]?\n- [ ] How would you [task]?\n\nIf you're unsure, review the [relevant section](#section) above.\n```\n\n## Best Practices\n\n### Consistency\n\n- Use the same naming across examples\n- Keep code style consistent\n- Follow the same structure in each step\n\n### Accessibility\n\n- Provide alt text for images\n- Use semantic headings\n- Include text descriptions of diagrams\n\n### Maintenance\n\n- Test all code examples\n- Include version numbers\n- Date the tutorial\n- Link to changelog for updates\n\n## Quality Checklist\n\n- [ ] Clear learning objectives\n- [ ] Prerequisites specified\n- [ ] Time estimate provided\n- [ ] All code tested and working\n- [ ] Common issues addressed\n- [ ] Complete code available\n- [ ] Next steps suggested\n- [ ] Accessible formatting\n\n## Integration\n\nWorks with skills:\n- `technical-writing` - Writing standards\n- `tutorial-patterns` - Structure patterns\n",
        "plugins/aai-blog/commands/content-planning.md": "---\ndescription: Plan blog content strategy including topics, outlines, and publishing schedule\nargument-hint: [topic or theme]\n---\n\n# /content-planning - Plan Blog Content\n\nPlan blog content with topic research, outlines, and publishing strategy.\n\n## Usage\n\n```\n/content-planning [topic or theme]\n/content-planning React performance optimization\n/content-planning monthly content calendar\n```\n\n## Workflow\n\n1. **Topic Research**\n   - Analyze target audience\n   - Research trending topics\n   - Identify content gaps\n\n2. **Content Strategy**\n   - Define content goals\n   - Map topics to audience needs\n   - Plan content types (tutorial, guide, opinion)\n\n3. **Outline Creation**\n   - Structure main sections\n   - Identify key points to cover\n   - Plan examples and code samples\n\n4. **SEO Considerations**\n   - Suggest keywords\n   - Recommend title variations\n   - Plan internal linking\n\n5. **Publishing Plan**\n   - Suggest publishing schedule\n   - Identify promotion channels\n   - Plan content series if applicable\n\n## Output\n\n- Content brief\n- Detailed outline\n- SEO recommendations\n- Publishing timeline\n",
        "plugins/aai-blog/commands/research-blog.md": "---\ndescription: Research a topic for blog writing including trends, examples, and competitive analysis\nargument-hint: <topic>\n---\n\n# /research-blog - Research Blog Topic\n\nResearch a topic thoroughly before writing, including trends, examples, and what others have written.\n\n## Usage\n\n```\n/research-blog <topic>\n/research-blog \"Next.js 14 App Router patterns\"\n/research-blog \"microservices vs monolith\"\n```\n\n## Research Areas\n\n1. **Topic Deep Dive**\n   - Core concepts and terminology\n   - Recent developments and updates\n   - Common misconceptions\n\n2. **Codebase Analysis**\n   - Find relevant examples in the codebase\n   - Identify patterns being used\n   - Note lessons learned\n\n3. **Competitive Analysis**\n   - What others have written on this topic\n   - Gaps in existing content\n   - Unique angles to explore\n\n4. **Audience Research**\n   - Common questions people ask\n   - Pain points and challenges\n   - Skill level considerations\n\n5. **Resource Gathering**\n   - Official documentation\n   - Authoritative sources\n   - Real-world case studies\n\n## Output\n\n- Topic summary\n- Key points to cover\n- Unique angle recommendations\n- Code examples from codebase\n- Resource links\n- Content gaps to fill\n",
        "plugins/aai-blog/commands/review-blog.md": "---\ndescription: Review a blog post for technical accuracy, clarity, engagement, and SEO\nargument-hint: <file-path>\n---\n\n# /review-blog - Review Blog Post\n\nReview a technical blog post for quality, accuracy, and engagement.\n\n## Usage\n\n```\n/review-blog <file-path>\n/review-blog posts/react-hooks-guide.md\n```\n\n## Review Criteria\n\n1. **Technical Accuracy**\n   - Verify code examples are correct\n   - Check facts and claims\n   - Ensure best practices are followed\n\n2. **Clarity & Structure**\n   - Clear introduction and conclusion\n   - Logical flow between sections\n   - Appropriate heading hierarchy\n\n3. **Engagement**\n   - Hook in the introduction\n   - Practical, relatable examples\n   - Clear value proposition\n\n4. **Code Quality**\n   - Examples are complete and runnable\n   - Proper syntax highlighting\n   - Comments where helpful\n\n5. **SEO & Discoverability**\n   - Title effectiveness\n   - Meta description quality\n   - Keyword usage\n\n6. **Readability**\n   - Sentence length variety\n   - Technical jargon explained\n   - Appropriate for target audience\n\n## Output\n\n- Overall assessment\n- Specific issues with line references\n- Suggested improvements\n- Strengths to maintain\n",
        "plugins/aai-blog/commands/write-blog.md": "---\ndescription: Write a technical blog post with proper structure, code examples, and engaging content\nargument-hint: [topic or outline]\n---\n\n# /write-blog - Write Technical Blog Post\n\nWrite a complete technical blog post with proper structure and engaging content.\n\n## Usage\n\n```\n/write-blog [topic]\n/write-blog \"Getting Started with React Server Components\"\n/write-blog --outline outline.md\n```\n\n## Workflow\n\n1. **Understand the Topic**\n   - Clarify the target audience\n   - Define the key takeaways\n   - Determine technical depth\n\n2. **Research & Gather Material**\n   - Explore codebase for real examples\n   - Research best practices\n   - Identify common pitfalls\n\n3. **Write the Post**\n   - Engaging introduction with hook\n   - Clear, structured body sections\n   - Practical code examples\n   - Actionable conclusion\n\n4. **Technical Review**\n   - Verify code examples work\n   - Check technical accuracy\n   - Ensure completeness\n\n5. **Polish**\n   - Add transitions\n   - Improve readability\n   - Suggest images/diagrams\n\n## Output\n\n- Complete blog post in markdown\n- Code examples (tested)\n- Suggested meta description\n- Recommended tags/categories\n",
        "plugins/aai-blog/skills/content-planning/SKILL.md": "---\nname: content-planning\ndescription: Content strategy and planning patterns\n---\n\n# Content Planning Skill\n\nPatterns for content strategy and editorial planning.\n\n## Content Calendar\n\n### Monthly Planning\n\n```markdown\n# Content Calendar - [Month] [Year]\n\n## Theme: [Monthly Focus]\n\n### Week 1\n\n| Day | Type | Title | Author | Status |\n|-----|------|-------|--------|--------|\n| Mon | Blog | [Title] | @author | Draft |\n| Wed | Tutorial | [Title] | @author | Planned |\n| Fri | Social | [Topic] | @author | Scheduled |\n\n### Week 2\n\n| Day | Type | Title | Author | Status |\n|-----|------|-------|--------|--------|\n| Tue | Feature Launch | [Title] | @author | Planned |\n| Thu | Case Study | [Title] | @author | In Review |\n\n### Week 3\n\n...\n\n### Week 4\n\n...\n\n## Upcoming\n- [Title 1] - needs research\n- [Title 2] - waiting on data\n```\n\n### Content Pipeline\n\n```markdown\n## Content Pipeline\n\n### Backlog (Prioritized)\n1. [Topic] - High demand, medium effort\n2. [Topic] - Product launch tie-in\n3. [Topic] - SEO opportunity\n\n### In Progress\n\n| Title | Stage | Author | Due |\n|-------|-------|--------|-----|\n| [Title] | Writing | @jane | Jan 15 |\n| [Title] | Review | @john | Jan 12 |\n| [Title] | Design | @sara | Jan 14 |\n\n### Scheduled\n\n| Title | Publish Date | Channels |\n|-------|-------------|----------|\n| [Title] | Jan 20 | Blog, Email |\n| [Title] | Jan 25 | Blog, Social |\n\n### Published This Month\n- [Title] - [Date] - [Metrics]\n```\n\n## Content Types\n\n### Content Mix\n\n```markdown\n## Recommended Mix\n\n### By Purpose (Monthly)\n- 40% Educational (tutorials, guides)\n- 30% Product (features, updates)\n- 20% Thought Leadership (insights, trends)\n- 10% Community (case studies, spotlights)\n\n### By Format\n- 60% Blog posts\n- 20% Tutorials\n- 10% Videos\n- 10% Infographics\n\n### By Funnel Stage\n- 40% Awareness (SEO, social)\n- 35% Consideration (comparisons, deep dives)\n- 25% Decision (case studies, demos)\n```\n\n### Content Templates\n\n```markdown\n## Template Library\n\n### Tutorial Template\n- Time: 2-4 hours to write\n- Word count: 1500-2500\n- Structure: What/Why/How\n- Assets: Screenshots, code\n\n### Feature Announcement\n- Time: 1-2 hours\n- Word count: 500-800\n- Structure: Problem/Solution/CTA\n- Assets: GIFs, screenshots\n\n### Technical Deep Dive\n- Time: 4-8 hours\n- Word count: 2500-4000\n- Structure: Problem/Approach/Results\n- Assets: Diagrams, code\n\n### Case Study\n- Time: 3-5 hours\n- Word count: 1000-1500\n- Structure: Challenge/Solution/Results\n- Assets: Quotes, metrics\n```\n\n## Topic Research\n\n### Idea Generation\n\n```markdown\n## Topic Sources\n\n### Internal\n- Product roadmap features\n- Support ticket themes\n- Sales objections\n- Team expertise\n\n### External\n- Competitor content\n- Industry trends\n- Community questions\n- Search trends\n\n### User Research\n- Survey feedback\n- Interview insights\n- Feature requests\n- Community discussions\n```\n\n### Topic Prioritization\n\n```markdown\n## Prioritization Matrix\n\n### Criteria (1-5 each)\n- Business Impact: Does it drive goals?\n- Audience Interest: Is there demand?\n- Competitive Gap: Is it differentiated?\n- Effort Required: Can we execute?\n- Timeliness: Is there urgency?\n\n### Example Evaluation\n\n| Topic | Impact | Interest | Gap | Effort | Time | Score |\n|-------|--------|----------|-----|--------|------|-------|\n| [Topic A] | 5 | 4 | 3 | 3 | 4 | 19 |\n| [Topic B] | 3 | 5 | 4 | 4 | 2 | 18 |\n| [Topic C] | 4 | 3 | 5 | 2 | 3 | 17 |\n```\n\n## Editorial Workflow\n\n### Stages\n\n```markdown\n## Content Workflow\n\n### 1. Ideation\n- Topic proposal\n- Outline draft\n- Stakeholder input\n Approval required\n\n### 2. Creation\n- First draft\n- Asset creation\n- Code examples\n Self-review\n\n### 3. Review\n- Peer review\n- Technical review\n- Legal review (if needed)\n Feedback incorporated\n\n### 4. Polish\n- Copy editing\n- SEO optimization\n- Asset finalization\n Final approval\n\n### 5. Publish\n- CMS upload\n- Schedule/publish\n- Distribution\n Promotion begins\n\n### 6. Measure\n- Track metrics\n- Gather feedback\n- Update as needed\n Learnings captured\n```\n\n### Review Checklist\n\n```markdown\n## Review Checklist\n\n### Technical Review\n- [ ] Code examples work\n- [ ] Technical accuracy verified\n- [ ] API/version references correct\n- [ ] Security best practices followed\n\n### Editorial Review\n- [ ] Clear and well-structured\n- [ ] Grammar and spelling correct\n- [ ] Consistent terminology\n- [ ] Links verified\n\n### SEO Review\n- [ ] Target keyword in title\n- [ ] Meta description compelling\n- [ ] Headers include keywords\n- [ ] Internal links added\n\n### Brand Review\n- [ ] Tone matches brand voice\n- [ ] Visuals on-brand\n- [ ] Legal requirements met\n```\n\n## Metrics\n\n### Key Metrics\n\n```markdown\n## Content Metrics\n\n### Traffic\n- Page views\n- Unique visitors\n- Time on page\n- Bounce rate\n\n### Engagement\n- Scroll depth\n- Social shares\n- Comments\n- Backlinks\n\n### Conversion\n- Email signups\n- Trial starts\n- Demo requests\n- Documentation visits\n\n### SEO\n- Keyword rankings\n- Organic traffic\n- SERP features\n- Domain authority\n```\n\n### Reporting Template\n\n```markdown\n## Monthly Content Report\n\n### Summary\n- Articles published: X\n- Total views: X\n- Top performer: [Title]\n\n### Performance by Type\n\n| Type | Count | Avg Views | Avg Time |\n|------|-------|-----------|----------|\n| Tutorial | 4 | 2,500 | 5:30 |\n| Feature | 2 | 1,200 | 2:15 |\n| Blog | 6 | 800 | 3:00 |\n\n### Top Performers\n\n1. [Title] - 5,000 views\n2. [Title] - 3,200 views\n3. [Title] - 2,800 views\n\n### Learnings\n- [What worked]\n- [What to improve]\n- [Opportunities identified]\n\n### Next Month Focus\n- [Priority 1]\n- [Priority 2]\n```\n\n## Integration\n\nUsed by:\n- `blog-writer` agent\n- `tutorial-writer` agent\n- `announcement-writer` agent\n",
        "plugins/aai-blog/skills/technical-writing/SKILL.md": "---\nname: technical-writing\ndescription: Technical writing standards and best practices\n---\n\n# Technical Writing Skill\n\nStandards and best practices for technical writing.\n\n## Writing Principles\n\n### Clarity\n\n```markdown\n## Be Clear\n\n \"Utilize the aforementioned methodology to facilitate optimal outcomes.\"\n\n \"Use this method to get the best results.\"\n\n## Rules:\n- Use simple words\n- One idea per sentence\n- Active voice over passive\n- Specific over vague\n```\n\n### Conciseness\n\n```markdown\n## Be Concise\n\n \"In order to effectively and efficiently process the data,\n    it is necessary that the system must first initialize.\"\n\n \"The system must initialize before processing data.\"\n\n## Cut:\n- Unnecessary words (\"very\", \"really\", \"actually\")\n- Redundant phrases (\"end result\", \"future plans\")\n- Filler phrases (\"it should be noted that\")\n```\n\n### Consistency\n\n```markdown\n## Be Consistent\n\n### Terminology\nPick one term and stick with it:\n- \"user\" or \"customer\" (not both)\n- \"click\" or \"select\" (not both)\n- \"app\" or \"application\" (not both)\n\n### Formatting\n- Code: `backticks`\n- UI elements: **bold**\n- File paths: `code`\n- First mention of terms: *italics*\n```\n\n## Style Guide\n\n### Voice and Tone\n\n```markdown\n## Voice Characteristics\n\n### Professional but Friendly\n \"One must ensure that...\"\n \"Make sure you...\"\n\n \"Heyyy! Super excited to show you...\"\n \"We're excited to introduce...\"\n\n### Direct and Helpful\n \"You might want to consider...\"\n \"We recommend...\"\n\n \"There are several ways to...\"\n \"Do this by...\"\n```\n\n### Sentence Structure\n\n```markdown\n## Sentence Guidelines\n\n### Lead with Action\n \"To create a new user, click the Create button.\"\n \"Click Create to add a new user.\"\n\n### One Action per Step\n \"Click Settings, then Security, then API Keys.\"\n \"1. Click Settings\n    2. Select Security\n    3. Click API Keys\"\n\n### Front-Load Key Information\n \"If you're using Docker, skip this step.\"\n \"Skip this step if you're using Docker.\"\n```\n\n### Technical Terms\n\n```markdown\n## Handling Technical Terms\n\n### Define on First Use\n\"The API uses *webhooks* (HTTP callbacks triggered by events)\nto notify your server of changes.\"\n\n### Use Consistently\nIf you introduce \"webhook,\" don't later call it:\n- \"HTTP callback\"\n- \"event notification\"\n- \"push notification\"\n\n### Know Your Audience\n**Beginner audience:** Define all terms\n**Expert audience:** Use standard terminology\n**Mixed audience:** Link to glossary\n```\n\n## Formatting Standards\n\n### Headings\n\n```markdown\n## Heading Guidelines\n\n### Use Sentence Case\n \"Getting started with APIs\"\n \"Getting Started With APIs\"\n\n### Be Descriptive\n \"Install dependencies\"\n \"Step 1\"\n\n### Heading Hierarchy\n- H1: Page title only\n- H2: Main sections\n- H3: Subsections\n- H4: Use sparingly\n```\n\n### Lists\n\n```markdown\n## List Guidelines\n\n### Use Bullets For:\n- Unordered items\n- Features or benefits\n- Requirements\n\n### Use Numbers For:\n1. Sequential steps\n2. Ordered processes\n3. Rankings\n\n### List Formatting\n- Parallel structure\n- Complete sentences or fragments (not both)\n- 2-7 items ideally\n```\n\n### Code\n\n```markdown\n## Code Guidelines\n\n### Inline Code\nUse for:\n- Function names: \\`createUser()\\`\n- File paths: \\`src/index.ts\\`\n- Commands: \\`npm install\\`\n- Values: \\`true\\`, \\`null\\`\n\n### Code Blocks\n\\`\\`\\`typescript\n// Always specify language\n// Include comments for complex code\n// Use realistic examples\nconst user = await createUser({\n  email: 'john@example.com'\n})\n\\`\\`\\`\n\n### Show Expected Output\n\\`\\`\\`\n$ npm test\n 42 tests passed\n\\`\\`\\`\n```\n\n## Common Patterns\n\n### Procedures\n\n```markdown\n## Procedure Template\n\n### Prerequisites\nBefore you begin:\n- Requirement 1\n- Requirement 2\n\n### Steps\n\n1. **[Action verb]** the [object].\n\n   [Additional details if needed]\n\n   \\`\\`\\`bash\n   command\n   \\`\\`\\`\n\n2. **[Next action]** the [object].\n\n3. **Verify** that [expected result].\n\n### Result\nYou have now [completed task].\n```\n\n### Warnings and Notes\n\n```markdown\n## Callout Types\n\n> **Note:** Additional information that's helpful but not critical.\n\n> **Tip:** Helpful suggestion or best practice.\n\n> **Important:** Information the reader needs to know.\n\n> **Warning:** Potential for data loss or security issues.\n\n> **Caution:** Action that can't be undone.\n```\n\n### Examples\n\n```markdown\n## Example Structure\n\n### Good Example Includes:\n1. Context - why you'd use this\n2. Complete, runnable code\n3. Expected output\n4. Common variations\n\n### Example\n\\`\\`\\`typescript\n// Create a user with minimal required fields\nconst user = await createUser({\n  email: 'john@example.com'\n})\n// Output: { id: 'usr_123', email: 'john@example.com' }\n\n// Create a user with all fields\nconst fullUser = await createUser({\n  email: 'jane@example.com',\n  name: 'Jane Doe',\n  role: 'admin'\n})\n\\`\\`\\`\n```\n\n## Review Checklist\n\n```markdown\n## Before Publishing\n\n### Content\n- [ ] Accurate and up-to-date\n- [ ] Complete (no missing steps)\n- [ ] Tested (code works)\n- [ ] Audience-appropriate\n\n### Writing\n- [ ] Clear and concise\n- [ ] Active voice\n- [ ] Consistent terminology\n- [ ] No jargon unexplained\n\n### Formatting\n- [ ] Proper heading hierarchy\n- [ ] Code has syntax highlighting\n- [ ] Links work\n- [ ] Images have alt text\n\n### Polish\n- [ ] Spell-checked\n- [ ] Grammar-checked\n- [ ] Read aloud for flow\n```\n\n## Integration\n\nUsed by:\n- `blog-writer` agent\n- `tutorial-writer` agent\n- `announcement-writer` agent\n",
        "plugins/aai-core/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-core\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Core development workflow - git operations, PR management, code review, security analysis, API patterns, and branch lifecycle\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"homepage\": \"https://github.com/the-answerai/alphaagent-team#readme\",\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"git\", \"pr\", \"code-review\", \"workflow\", \"core\", \"security\", \"api\", \"stack-detection\"],\n  \"skills\": \"./skills/\",\n  \"commands\": \"./commands/\"\n}\n",
        "plugins/aai-core/agents/git-pr-manager.md": "---\nname: git-pr-manager\ndescription: Use this agent when the user has completed work and needs to commit, push, and create a pull request. Handles the complete git workflow from commit to PR creation.\nmodel: sonnet\n---\n\nYou are an expert Git workflow specialist with deep knowledge of conventional commits, semantic versioning, and CI/CD practices. Your role is managing the complete git workflow from commit to pull request creation.\n\n## Core Responsibilities\n\nUse the `commit-helper` and `branch-workflow` skills for implementation patterns.\n\n### 1. Validate Branch\n- NEVER allow operations on protected branches (main, master, staging, production, develop)\n- Verify current branch follows naming convention\n- Extract ticket ID if present in branch name\n\n### 2. Analyze Changes\n- Review `git status` and `git diff`\n- Understand what has been modified\n- Determine commit type (feat, fix, chore, docs, refactor, test)\n\n### 3. Create Semantic Commits\n- Format: `type(scope): short description`\n- Types: feat (feature), fix (bug fix), chore, docs, refactor, test, style, perf, ci, build\n- Use imperative mood (\"add\" not \"added\")\n- Subject line 72 characters\n\n### 4. Execute Git Operations\n- Stage appropriate files (prefer specific files over `git add .`)\n- Avoid staging sensitive files (.env, credentials)\n- Commit with proper message\n- Push to remote\n\n### 5. Create Pull Requests\n- Use `gh pr create` command\n- Target appropriate base branch (usually staging or develop)\n- Generate descriptive PR title from commits\n- Create comprehensive PR description with:\n  - Summary of changes\n  - Testing instructions\n  - Related issues/tickets\n\n### 6. Quality Checks Before Commit\n- No hardcoded secrets or API keys\n- No debug console.log statements left\n- No TODO comments for critical functionality\n- Tests pass (if applicable)\n\n## Commit Message Format\n\n```\ntype(scope): description\n\n[optional body with details]\n\n[optional footer with references]\n\nCo-Authored-By: Claude <noreply@anthropic.com>\n```\n\n## Decision Framework\n\n1. **Check branch**: Ensure not on protected branch\n2. **Assess changes**: Determine commit type and scope\n3. **Craft message**: Follow conventional commits\n4. **Execute**: Stage, commit, push\n5. **Create PR**: Target appropriate branch\n6. **Report**: Provide PR URL and summary\n\n## Important Rules\n\n- **NEVER commit to protected branches** (main, master, staging, production)\n- Always use conventional commit format\n- Prefer staging/develop as PR target (not main/master)\n- Never run database migrations automatically\n- Use short, descriptive commit messages\n- Ensure commits are atomic and complete\n\nWhen uncertain about changes or target branch, ask the user for clarification.\n",
        "plugins/aai-core/agents/git-pr-reviewer.md": "---\nname: git-pr-reviewer\ndescription: Use when reviewing PRs. Conducts security, architecture, and quality checks on pull requests.\nmodel: sonnet\n---\n\nYou are an elite Pull Request Review Specialist with expertise in code quality, software architecture, and security. Your mission is to conduct thorough, constructive PR reviews that improve code quality.\n\n## Core Responsibilities\n\n1. Analyze PR diffs using the GitHub CLI (gh)\n2. Identify issues: correctness, security, performance, maintainability\n3. Create actionable, constructive review comments\n4. Post comments directly to the PR through gh CLI\n5. Focus on changes in the PR diff, not the entire codebase\n\n## Review Methodology\n\n### Step 1: Gather Context\n\n```bash\n# Get PR metadata\ngh pr view <number> --json title,body,author,files,additions,deletions\n\n# Get the diff\ngh pr diff <number>\n```\n\nAssess:\n- PR size and complexity\n- PR type (feature/fix/chore)\n- Files changed\n\n### Step 2: Systematic Analysis\n\n**A. Correctness & Logic**\n- Null safety and edge cases\n- Error handling completeness\n- Async/await usage\n- Return value handling\n\n**B. Security Vulnerabilities**\n- Input validation\n- SQL injection risks\n- XSS vulnerabilities\n- Hardcoded secrets\n- Authentication/authorization gaps\n\n**C. Performance**\n- N+1 query patterns\n- Algorithm complexity\n- Memory leaks\n- Resource cleanup\n\n**D. Maintainability**\n- Function complexity (< 20 lines ideal)\n- Clear naming\n- DRY principles\n- Proper error messages\n\n### Step 3: Structure Review Comments\n\n```markdown\n**Location**: `file:line`\n**Severity**: Critical | Major | Minor | Suggestion\n**Issue**: [Description]\n**Why**: [Impact]\n**Suggestion**: [Code example]\n```\n\n### Step 4: Post Review\n\n```bash\n# Add review with comments\ngh pr review <number> --comment --body \"review content\"\n\n# Or request changes\ngh pr review <number> --request-changes --body \"review content\"\n\n# Or approve\ngh pr review <number> --approve --body \"LGTM!\"\n```\n\n## Review Checklist\n\n- [ ] Logic correctness verified\n- [ ] Error handling complete\n- [ ] Security concerns addressed\n- [ ] Performance acceptable\n- [ ] Code readable and maintainable\n- [ ] Tests adequate (if applicable)\n- [ ] Documentation updated (if needed)\n\n## Working Principles\n\n**Be Collaborative**: Work WITH the user, ask questions, get input.\n\n**Be Constructive**: Use \"Consider...\" not \"You should...\". Acknowledge good practices.\n\n**Be Specific**: Provide concrete examples and suggestions.\n\n**Be Thorough**: Look for subtle bugs, security issues, and maintainability problems.\n\n**Focus on the Diff**: Only review actual changes, not existing code.\n\n## Output Format\n\n```markdown\n## PR Review: [Title]\n\n**Summary**: Brief overview and overall assessment\n\n### Critical Issues\n[Problems that must be fixed before merge]\n\n### Major Concerns\n[Significant issues to address]\n\n### Minor Issues & Suggestions\n[Smaller improvements]\n\n### Positive Observations\n[Good practices and well-written code]\n\n### Verdict\n[ ] Approve\n[ ] Request Changes\n[ ] Comment only\n\n### Next Steps\n[What should be done with this feedback]\n```\n\n## Quality Assurance\n\nBefore finalizing:\n- Reviewed ALL changed files?\n- Comments are constructive and actionable?\n- Suggestions would actually work?\n- Acknowledged good practices?\n- Prioritized issues (critical vs. minor)?\n\nYour goal: improve code quality while maintaining positive, collaborative atmosphere. Be thorough but kind, critical but constructive.\n",
        "plugins/aai-core/commands/bug.md": "---\ndescription: Investigate, diagnose, and fix a bug with thorough research and validation\nargument-hint: <bug-description>\nallowed-tools: Task, Bash, Read, Grep, Glob, Edit, Write, AskUserQuestion\n---\n\n# Bug Investigation & Fix Workflow\n\nThoroughly investigate a bug report, trace the code path, and implement a validated fix.\n\n## Context\n\n- Current branch: !`git branch --show-current`\n- Uncommitted changes: !`git status --short`\n\n## Bug Reference\n\nInvestigate: $ARGUMENTS\n\n## Workflow\n\nExecute these phases in order:\n\n### Phase 1: Bug Intake & Clarification\n\n1. **Parse the bug report** - Extract:\n   - What is the expected behavior?\n   - What is the actual behavior?\n   - Steps to reproduce\n   - Affected component(s)\n\n2. **Clarify ambiguities** - Use AskUserQuestion if:\n   - Reproduction steps are unclear\n   - Expected behavior has multiple interpretations\n   - Scope of the fix needs definition\n\n### Phase 2: Research & Wire Tracing\n\nPerform deep investigation by \"following the wire\":\n\n1. **Trace the data flow**:\n   - Component/function that triggers the action\n   - API endpoint called (if applicable)\n   - Server-side handler\n   - Database operations\n   - Response flow back\n   - State updates\n\n2. **Identify each connection point**:\n   - Where does data enter the system?\n   - What transformations occur?\n   - Where could the bug be introduced?\n   - What assumptions does each layer make?\n\n3. **Gather evidence**:\n   - Read relevant source files\n   - Search for related code patterns\n   - Check test coverage for the affected path\n   - Look for similar bugs/fixes in git history\n\n### Phase 3: Hypothesis Formation\n\n1. **Challenge assumptions**:\n   - Is the reported behavior actually a bug or expected?\n   - Could this be a symptom of a deeper issue?\n   - Are there edge cases not considered?\n\n2. **Form hypotheses**:\n   - List 2-3 possible root causes\n   - Rank by likelihood\n   - Identify how to test each hypothesis\n\n3. **Design validation approach**:\n   - How will we know the fix works?\n   - What tests should pass/fail?\n   - What manual verification steps are needed?\n\n### Phase 4: Fix Implementation\n\nBased on investigation:\n\n1. Make the minimal fix that addresses root cause\n2. Follow existing code patterns\n3. Add appropriate error handling\n4. Consider edge cases\n\n**Provide with implementation**:\n1. Root cause analysis summary\n2. Specific files modified\n3. Validation criteria (how to prove it's fixed)\n\n### Phase 5: Validation\n\n**CRITICAL - Do not skip this phase**\n\n1. **Run automated checks**:\n   ```bash\n   # Build must succeed\n   # Tests must pass\n   ```\n\n2. **Verify the specific fix**:\n   - Can you reproduce the original bug? (Should fail before fix)\n   - Does the fix resolve it? (Should pass after fix)\n   - Are there regression risks?\n\n3. **Add regression test**:\n   - Write a test that would have caught this bug\n   - Verify no regressions in related functionality\n\n### Phase 6: Documentation & Closure\n\n1. **Summarize for user**:\n   - What was the root cause?\n   - What was changed?\n   - How was it validated?\n   - Any follow-up items?\n\n## Investigation Checklist\n\nUse this checklist to ensure thorough investigation:\n\n### Frontend Path\n- [ ] Component that renders the affected UI\n- [ ] Event handlers (onClick, onChange, etc.)\n- [ ] State management (useState, context, etc.)\n- [ ] API call construction\n- [ ] Response handling and error states\n\n### API Path\n- [ ] Route definition\n- [ ] Request validation\n- [ ] Business logic / service layer\n- [ ] Database queries\n- [ ] Response construction\n\n### Data Path\n- [ ] Database schema\n- [ ] Data transformations\n- [ ] Type definitions\n- [ ] Null/undefined handling\n\n### State Path\n- [ ] Initial state\n- [ ] State updates\n- [ ] Side effects\n- [ ] Cache/stale data issues\n\n## Anti-Patterns to Avoid\n\n1. **Jumping to conclusions** - Always trace the full path first\n2. **Fixing symptoms** - Address root cause, not just visible issue\n3. **Untested fixes** - Every fix must be validated\n4. **Breaking other things** - Check for regressions\n5. **Missing documentation** - Add test to prevent regression\n\n## Success Criteria\n\n- [ ] Bug root cause identified with evidence\n- [ ] Fix implemented following project patterns\n- [ ] Build succeeds\n- [ ] Tests pass\n- [ ] Manual reproduction confirms fix\n- [ ] Regression test added\n- [ ] User informed of fix and any follow-up items\n",
        "plugins/aai-core/commands/fix-tests.md": "---\ndescription: Comprehensive test fixing workflow that analyzes, categorizes, and fixes all failing tests\nargument-hint: [unit|api|e2e|all] [--report-only]\nallowed-tools: Task, Bash, Read, Grep, Glob, Edit, Write, AskUserQuestion\n---\n\n# /fix-tests - Comprehensive Test Fixing Workflow\n\nFix all failing tests through intelligent analysis and systematic repair.\n\n## Context\n\n- Current branch: !`git branch --show-current`\n\n## Scope\n\nTest scope: $ARGUMENTS (defaults to `all` if empty)\n\n---\n\n## Phase 1: Test Discovery & Initial Run\n\n### 1.1 Run Tests and Capture Results\n\nFirst, detect the project's test framework and commands, then execute tests:\n\n```bash\n# Detect package manager and test command\n# Run tests and capture output\n```\n\n### 1.2 Parse Failure Count\n\nExtract from each test run:\n- Total tests\n- Passed tests\n- Failed tests\n- Skipped tests\n- Test duration\n\n### 1.3 Create Fix Plan\n\nList each failing test for systematic fixing.\n\n---\n\n## Phase 2: Failure Analysis & Categorization\n\nFor EACH failing test, analyze and categorize:\n\n### Category A: Test Setup Problems\n\n**Indicators:**\n- `Cannot find module` errors\n- `is not a function` on setup utilities\n- Missing mocks or fixtures\n- Database connection errors\n- Missing environment variables\n\n**Analysis approach:**\n1. Check imports and module resolution\n2. Verify mock files exist\n3. Check test setup configuration\n4. Verify database initialization\n\n### Category B: Mocking Problems\n\n**Indicators:**\n- `TypeError: X is not a function` on mocked modules\n- Unexpected real API calls\n- Mock not being applied\n- Mock ordering issues\n\n**Analysis approach:**\n1. Check mock implementation matches interface\n2. Verify mock is hoisted correctly\n3. Check for ESM vs CJS mock issues\n4. Review test configuration\n\n### Category C: Business Logic Issues\n\n#### C1: Bug in Application Code\n**Indicators:**\n- Test expectations match requirements but code fails\n- Multiple tests fail on same functionality\n- Recent code change broke existing tests\n\n#### C2: Bug in Test Code\n**Indicators:**\n- Test expectations don't match documented behavior\n- Test uses wrong selectors/assertions\n- Test has race conditions\n- Test data doesn't match schema\n\n### Category D: Outdated Tests\n\n**Indicators:**\n- Feature was refactored/removed\n- API endpoint changed\n- Component renamed or restructured\n- Schema migration changed data shape\n\n---\n\n## Phase 3: Systematic Fixing\n\n### Fixing Order\n\nFix tests in this order (fastest feedback first):\n\n1. **Category A** (Setup) - Fixes often unblock multiple tests\n2. **Category B** (Mocking) - Module-level fixes cascade\n3. **Category D** (Outdated) - Quick deletions or updates\n4. **Category C** (Logic) - Requires most investigation\n\n### Fix-Verify Loop\n\nFor EACH failing test:\n\n```\n1. Identify ONE specific failure\n2. Hypothesize root cause\n3. Make minimal fix\n4. Run the specific test immediately\n5. Verify result:\n   - PASS  Document and move to next\n   - FAIL  New hypothesis, repeat\n```\n\n### Investigation Protocol for Logic Bugs\n\nWhen encountering Category C (logic) failures:\n\n1. **Read the failing test** - Understand what it expects\n2. **Read the implementation** - Understand what it does\n3. **Compare with requirements** - Check documentation\n4. **Determine truth**:\n   - Is the test correct and code wrong?  Fix code\n   - Is the code correct and test wrong?  Fix test\n   - Both ambiguous?  Ask user for clarification\n\n```\nUse AskUserQuestion when:\n- Test and code disagree, both seem valid\n- Requirements are ambiguous\n- Fix would change user-facing behavior\n- Multiple valid interpretations exist\n```\n\n---\n\n## Phase 4: Skipped Test Audit\n\n### Find All Skipped Tests\n\n```bash\n# Jest/Vitest skipped tests\ngrep -rn \"\\.skip\\|xit\\|xdescribe\\|it\\.todo\\|test\\.todo\" src/ tests/ --include=\"*.test.ts\" --include=\"*.test.tsx\"\n\n# Playwright skipped tests\ngrep -rn \"\\.skip\\|test\\.fixme\" tests/ --include=\"*.spec.ts\"\n```\n\n### Categorize Each Skip\n\nFor each skipped test, determine:\n\n1. **Skip Reason**:\n   - `FLAKY` - Test is non-deterministic\n   - `BLOCKED` - Waiting on external dependency\n   - `WIP` - Work in progress\n   - `DEPRECATED` - Feature removed\n   - `UNKNOWN` - No documented reason\n\n2. **Action Required**:\n   - `UNSKIP` - Fix and enable\n   - `DELETE` - Remove deprecated test\n   - `DOCUMENT` - Add reason comment\n   - `ESCALATE` - Needs user decision\n\n---\n\n## Phase 5: Continuous Fixing Loop\n\n**Continue until all tests pass:**\n\n```\nwhile (failing_tests > 0) {\n  1. Run full test suite\n  2. Pick highest-impact failure\n  3. Analyze and categorize\n  4. Apply fix\n  5. Verify fix works\n  6. Loop\n}\n```\n\n### Exit Criteria\n\n**Success** (can stop):\n- All tests pass (100% pass rate)\n- No failing tests remain\n- Skipped tests documented with reasons\n\n**Blocked** (need user input):\n- Ambiguous requirements\n- External dependency unavailable\n- Breaking change needs approval\n\n---\n\n## Phase 6: Final Report\n\nGenerate comprehensive report:\n\n```markdown\n# Test Fix Report\n\n**Final Status**: [PASS/FAIL/BLOCKED]\n\n## Summary\n\n| Category | Before | After | Fixed |\n|----------|--------|-------|-------|\n| Tests | X/Y | A/B | Z |\n\n## Fixes Applied\n\n### Category A: Test Setup\n1. [Description]\n\n### Category B: Mocking\n1. [Description]\n\n### Category C: Business Logic\n1. [Description]\n\n### Category D: Outdated\n1. [Description]\n\n## Skipped Tests Audit\n\n[Summary of skipped tests and their status]\n\n## Recommendations\n\n1. [Recommendation]\n```\n\n---\n\n## Anti-Patterns to Avoid\n\n1. **Skipping tests to pass** - Never add `.skip` to make suite pass\n2. **Deleting tests without analysis** - Understand why before removing\n3. **Fixing tests without verification** - Always run after changes\n4. **Ignoring root causes** - Fix underlying issue, not symptoms\n5. **Mass changes** - Fix one test at a time, verify each\n\n## Success Criteria\n\n- [ ] All tests pass\n- [ ] No new skipped tests added\n- [ ] All skipped tests documented with reasons\n- [ ] Final report generated\n- [ ] User informed of any blocking issues\n",
        "plugins/aai-core/commands/implement-task.md": "---\ndescription: Execute a full implementation cycle with planning, agent delegation, testing, and code review\nargument-hint: <requirements-or-task-description>\nallowed-tools: Task, Bash, Read, Grep, Glob, Edit, Write, AskUserQuestion\n---\n\n# Implement Task\n\nExecute a complete implementation workflow for a feature or task.\n\n## Context\n\n- Current branch: !`git branch --show-current`\n- Uncommitted changes: !`git status --short`\n- Recent commits: !`git log --oneline -5`\n\n## Task Description\n\nImplement: $ARGUMENTS\n\n## Workflow\n\nExecute these phases in order:\n\n### Phase 1: Planning & Analysis\n\n**MANDATORY FIRST STEP** - Before writing any code:\n\n1. **Analyze the task requirements** thoroughly\n2. **Explore the codebase** to understand existing patterns\n3. **Identify affected components** and their relationships\n4. **Detect the project's technology stack** (use stack-detection skill)\n5. **Flag any ambiguities** that need user clarification\n\n**If clarification is needed**: Use AskUserQuestion to get answers BEFORE proceeding. Do NOT assume or guess.\n\n### Phase 2: Implementation Planning\n\nCreate a detailed implementation plan:\n\n1. Break down into specific tasks with clear acceptance criteria\n2. Identify which components/files will be modified\n3. Determine task dependencies (what must complete before what)\n4. Identify test requirements\n\n### Phase 3: Implementation\n\n**Critical: Technology Detection First**\n\nBefore writing any code, detect the project's technology stack:\n- Frontend: React, Vue, Angular, Svelte, etc.\n- Backend: Express, Fastify, NestJS, etc.\n- Database: Prisma, TypeORM, Drizzle, Sequelize, etc.\n- Testing: Jest, Vitest, Playwright, Cypress, etc.\n\n**Write code that matches the detected stack and existing patterns.**\n\nImplementation approach:\n- Follow existing code patterns and conventions\n- Write tests alongside implementation\n- Make incremental, verifiable changes\n\n### Phase 4: Quality Gates\n\nAfter implementation, verify all quality gates pass:\n\n```bash\n# Detect and run appropriate build command\n# npm run build / pnpm build / yarn build\n\n# Detect and run appropriate test command\n# npm test / pnpm test / yarn test\n```\n\n**If any check fails**:\n1. Identify the root cause\n2. Fix the issue\n3. Re-run checks until all pass\n\n### Phase 5: Code Review\n\nSelf-review the changes:\n\n1. Review all changes for quality, security, and standards\n2. Check for security vulnerabilities\n3. Verify test coverage is adequate\n4. Ensure code follows project patterns\n\n**If issues found**:\n1. Prioritize by severity (security > bugs > style)\n2. Fix issues\n3. Re-run review after fixes\n\n### Phase 6: Completion\n\nWhen all phases pass:\n\n1. Summarize what was implemented\n2. List any follow-up items or known limitations\n3. Present final status to user\n\n## Success Criteria\n\n- [ ] Task requirements fully analyzed\n- [ ] User clarifications obtained before implementation\n- [ ] Implementation complete following project patterns\n- [ ] Build succeeds\n- [ ] Tests pass\n- [ ] Self code review complete\n- [ ] Summary provided to user\n\n## Important Notes\n\n- **NEVER skip planning** - This catches issues early\n- **NEVER guess at ambiguous requirements** - Ask the user\n- **NEVER proceed if build or tests fail** - Fix first\n- **ALWAYS detect technology stack** before writing code\n- **ALWAYS follow existing patterns** in the codebase\n",
        "plugins/aai-core/commands/plan-feature.md": "---\ndescription: Gather detailed requirements for a new feature through systematic analysis and clarification\nargument-hint: <feature description>\nallowed-tools: Read, Grep, Glob, AskUserQuestion\n---\n\n# Plan Feature Command\n\nGather comprehensive requirements for a new feature before implementation.\n\n## Usage\n\n```\n/plan-feature User authentication with social login\n```\n\n## What This Command Does\n\n1. **Analyzes the feature request** for completeness\n2. **Explores the codebase** to understand existing patterns\n3. **Identifies gaps and ambiguities** in the description\n4. **Asks clarifying questions** using the AskUserQuestion tool\n5. **Documents complete requirements** in structured format\n6. **Creates acceptance criteria** that can be used for testing\n7. **Outputs a requirements document** ready for implementation\n\n## Output Format\n\nThe command produces a complete requirements document with:\n\n- **User Story** (As a X, I want Y, so that Z)\n- **Acceptance Criteria** (measurable, testable)\n- **Technical Considerations** (database, API, UI needs)\n- **Open Questions** (needs user decisions)\n- **Testing Approach** (how to verify the feature works)\n\n## Example\n\n### Input:\n```\n/plan-feature Add commenting system for blog posts\n```\n\n### Output:\n```markdown\n## Feature Requirements: Blog Post Comments\n\n### User Story\nAs a logged-in user, I want to leave comments on blog posts so that I can engage with content and discuss with other readers.\n\n### Acceptance Criteria\n- [ ] User can write comment (max 1000 characters) on any published blog post\n- [ ] User can edit their own comments within 24 hours\n- [ ] User can delete their own comments anytime\n- [ ] Comments display author name, timestamp, and content\n- [ ] Comments ordered newest first\n- [ ] Comment form validates: not empty, under character limit\n\n### Technical Considerations\n\n**Database**:\n- Table: comments (id, post_id, user_id, content, created_at, updated_at)\n- Foreign keys: post_id -> posts.id, user_id -> users.id\n- Index on post_id for fast lookups\n\n**API Endpoints**:\n- GET /api/posts/:id/comments - List comments for post\n- POST /api/posts/:id/comments - Create comment (auth required)\n- PUT /api/comments/:id - Edit comment (auth + ownership check)\n- DELETE /api/comments/:id - Delete comment (auth + ownership check)\n\n**UI Components**:\n- CommentList (displays all comments)\n- CommentForm (textarea, submit button, character counter)\n- CommentItem (shows comment with edit/delete buttons if owned)\n\n### Open Questions\n1. Should users be able to reply to comments (nested threads)?\n   - Impact: Requires parent_comment_id field, more complex UI\n   - Recommended: Start flat, add threading later if needed\n\n2. Should there be comment moderation?\n   - Options: Auto-publish, require approval, spam filter\n   - Recommended: Auto-publish with \"report abuse\" button\n\n### Testing Approach\n- Unit tests for validation logic\n- API tests for CRUD operations\n- E2E test for comment submission flow\n- Authorization tests for edit/delete permissions\n```\n\n## When to Use\n\n- **Before implementing vague features** - Get clarity first\n- **When requirements are incomplete** - Fill in the gaps\n- **For complex features** - Break down into manageable pieces\n- **When stakeholder input needed** - Generate good questions to ask\n\n## Next Steps After Planning\n\n1. **Review the requirements document**\n2. **Answer any open questions** raised\n3. **Begin implementation** using the /implement-task command\n\n## Tips\n\n- **Be as specific as possible** in your initial description\n- **Mention constraints** (budget, timeline, dependencies)\n- **Reference existing features** if similar functionality exists\n- **Answer questions promptly** to keep momentum going\n",
        "plugins/aai-core/commands/review.md": "---\ndescription: Perform a comprehensive code review of changes with security, quality, and standards checking\nargument-hint: [--staged | --branch <branch> | <file-path>]\nallowed-tools: Bash, Read, Grep, Glob, AskUserQuestion\n---\n\n# Code Review Command\n\nPerform a comprehensive code review of code changes.\n\n## Context\n\n- Current branch: !`git branch --show-current`\n- Staged changes: !`git diff --cached --name-only | head -20`\n\n## Review Target\n\nTarget: $ARGUMENTS (defaults to staged changes if empty)\n\n---\n\n## Review Process\n\n### Phase 1: Gather Changes\n\nDetermine what to review based on arguments:\n\n```bash\n# Staged changes (default)\ngit diff --cached\n\n# Specific branch comparison\ngit diff main...feature-branch\n\n# Specific files\n# Review provided file paths\n```\n\n### Phase 2: High-Level Analysis\n\n1. **Understand the change**:\n   - What is the purpose of this change?\n   - What components are affected?\n   - Is the scope appropriate?\n\n2. **Check for completeness**:\n   - Are all necessary files included?\n   - Are tests included for new functionality?\n   - Is documentation updated if needed?\n\n### Phase 3: Security Review\n\n**Critical - Check for OWASP Top 10 vulnerabilities:**\n\n| Vulnerability | What to Look For |\n|---------------|------------------|\n| Injection | User input in SQL, commands, queries |\n| Broken Auth | Missing auth checks, weak tokens |\n| Sensitive Data | Secrets in code, unencrypted data |\n| XXE | XML parsing without protection |\n| Access Control | Missing authorization checks |\n| Misconfiguration | Debug mode, default credentials |\n| XSS | Unescaped user content |\n| Deserialization | Untrusted data deserialization |\n| Components | Outdated/vulnerable dependencies |\n| Logging | Insufficient logging, exposed secrets |\n\n**Scan Commands**:\n```bash\n# Find potential SQL injection\ngrep -rn \"query.*\\${\" <files>\n\n# Find hardcoded secrets\ngrep -rn \"password\\s*=\\s*['\\\"]\" <files>\n\n# Find command execution\ngrep -rn \"exec\\|spawn\\|execSync\" <files>\n```\n\n### Phase 4: Quality Review\n\n**Code Quality Checklist**:\n\n- [ ] **Readability**: Code is clear and self-documenting\n- [ ] **Naming**: Variables/functions have meaningful names\n- [ ] **DRY**: No unnecessary duplication\n- [ ] **SOLID**: Follows design principles where applicable\n- [ ] **Error Handling**: Errors are caught and handled appropriately\n- [ ] **Edge Cases**: Boundary conditions are handled\n- [ ] **Comments**: Complex logic is documented\n- [ ] **Types**: Types are appropriate and accurate (if TypeScript)\n\n### Phase 5: Standards Review\n\n**Project Standards**:\n\n- [ ] **Formatting**: Code follows project style (Prettier, ESLint)\n- [ ] **File Structure**: Files are in correct locations\n- [ ] **Naming Conventions**: Follows project conventions\n- [ ] **Import Order**: Imports are organized correctly\n- [ ] **Test Coverage**: New code has appropriate tests\n\n### Phase 6: Architecture Review\n\n**For significant changes**:\n\n- [ ] **Separation of Concerns**: Logic is properly organized\n- [ ] **Dependencies**: New dependencies are justified\n- [ ] **Performance**: No obvious performance issues\n- [ ] **Scalability**: Solution scales appropriately\n- [ ] **Maintainability**: Code is easy to maintain\n\n---\n\n## Review Output Format\n\n```markdown\n# Code Review: [Brief Description]\n\n## Summary\n\n**Overall Assessment**:  Approve /  Request Changes /  Block\n\n**Files Reviewed**: X files, Y lines changed\n\n## Findings\n\n###  Critical (Must Fix)\n1. **[File:Line]** - [Issue description]\n   - Why: [Explanation]\n   - Fix: [Suggested fix]\n\n###  Important (Should Fix)\n1. **[File:Line]** - [Issue description]\n   - Why: [Explanation]\n   - Suggestion: [Recommended approach]\n\n###  Suggestions (Consider)\n1. **[File:Line]** - [Suggestion]\n   - Benefit: [Why this would improve the code]\n\n###  Good Practices Observed\n- [Positive observation 1]\n- [Positive observation 2]\n\n## Security Scan Results\n\n- [ ] No injection vulnerabilities\n- [ ] No hardcoded secrets\n- [ ] Authentication checks present\n- [ ] Authorization verified\n\n## Test Coverage\n\n- [ ] Unit tests included\n- [ ] Edge cases tested\n- [ ] Error scenarios covered\n\n## Recommendations\n\n1. [High-level recommendation]\n2. [High-level recommendation]\n\n## Questions for Author\n\n1. [Clarifying question]\n```\n\n---\n\n## Severity Levels\n\n| Level | Description | Action |\n|-------|-------------|--------|\n|  Critical | Security vulnerability, data loss risk, major bug | Must fix before merge |\n|  Important | Code quality issue, potential bugs, missing tests | Should fix before merge |\n|  Suggestion | Style improvement, optimization, enhancement | Consider for future |\n\n---\n\n## Anti-Patterns to Flag\n\n1. **Large functions** (>50 lines)\n2. **Deep nesting** (>3 levels)\n3. **Magic numbers/strings**\n4. **Console.log in production code**\n5. **Commented-out code**\n6. **TODO without tracking**\n7. **Catch without handling**\n8. **Any type (in TypeScript)**\n9. **Hardcoded credentials**\n10. **Missing error handling**\n\n---\n\n## Success Criteria\n\n- [ ] All critical issues identified\n- [ ] Security scan completed\n- [ ] Quality assessment provided\n- [ ] Clear feedback for author\n- [ ] Approval/changes requested decision made\n",
        "plugins/aai-core/skills/api-patterns/SKILL.md": "---\nname: api-patterns\ndescription: REST API best practices including request validation, error handling, authentication, rate limiting, and documentation. Use when building backend APIs.\n---\n\n# API Patterns Skill\n\n## Quick Reference\n\n**Use when**: Building REST APIs, implementing authentication, handling errors, validating inputs\n\n**Key Patterns**:\n- Request validation\n- Standardized error responses\n- Authentication middleware\n- Rate limiting\n- Pagination\n- API documentation\n\n---\n\n## 1. Request Validation\n\n**Always validate incoming requests at the boundary.**\n\nPattern with schema validation:\n```typescript\n// Define schema for expected input\nconst CreateUserSchema = {\n  email: 'string, email format, required',\n  password: 'string, min 12 chars, required',\n  name: 'string, 2-100 chars, required',\n  age: 'number, integer, min 18, optional'\n};\n\n// Validate in route handler\nfunction createUserHandler(req, res) {\n  const validation = validateSchema(CreateUserSchema, req.body);\n\n  if (!validation.success) {\n    return res.status(400).json({\n      error: 'Validation failed',\n      details: validation.errors\n    });\n  }\n\n  // Proceed with validated data\n  const user = await createUser(validation.data);\n  res.status(201).json(user);\n}\n```\n\n**Key Points**:\n- Validate at API boundary, not deep in business logic\n- Return specific error messages\n- Use 400 status code for validation failures\n\n---\n\n## 2. Standardized Error Responses\n\n**Use consistent error format across all endpoints.**\n\n```typescript\n// Error response structure\ninterface ErrorResponse {\n  error: string;        // Human-readable message\n  code?: string;        // Machine-readable error code\n  details?: unknown;    // Additional context (validation errors, etc.)\n}\n\n// Custom error class\nclass AppError extends Error {\n  constructor(\n    message: string,\n    public statusCode: number = 500,\n    public code?: string,\n    public details?: unknown\n  ) {\n    super(message);\n  }\n}\n\n// Usage\nthrow new AppError('User not found', 404, 'USER_NOT_FOUND');\nthrow new AppError('Validation failed', 400, 'VALIDATION_ERROR', errors);\n```\n\n**Error Handler Pattern**:\n```typescript\nfunction errorHandler(err, req, res, next) {\n  // Known application errors\n  if (err instanceof AppError) {\n    return res.status(err.statusCode).json({\n      error: err.message,\n      code: err.code,\n      details: err.details\n    });\n  }\n\n  // Log unexpected errors (don't expose to user)\n  console.error('Unexpected error:', err);\n\n  res.status(500).json({\n    error: 'Internal server error'\n  });\n}\n```\n\n---\n\n## 3. Authentication Middleware\n\n**Protect routes with authentication middleware.**\n\n```typescript\n// Auth middleware pattern\nfunction requireAuth(req, res, next) {\n  const token = req.headers.authorization?.replace('Bearer ', '');\n\n  if (!token) {\n    throw new AppError('Authentication required', 401, 'NO_TOKEN');\n  }\n\n  try {\n    const decoded = verifyToken(token);\n    req.userId = decoded.userId;\n    next();\n  } catch (err) {\n    throw new AppError('Invalid token', 401, 'INVALID_TOKEN');\n  }\n}\n\n// Optional auth (for routes that work with or without auth)\nfunction optionalAuth(req, res, next) {\n  const token = req.headers.authorization?.replace('Bearer ', '');\n\n  if (token) {\n    try {\n      const decoded = verifyToken(token);\n      req.userId = decoded.userId;\n    } catch {\n      // Ignore invalid tokens in optional auth\n    }\n  }\n\n  next();\n}\n\n// Usage\nrouter.get('/api/profile', requireAuth, getProfileHandler);\nrouter.get('/api/posts', optionalAuth, getPostsHandler);\n```\n\n---\n\n## 4. Rate Limiting\n\n**Protect endpoints from abuse.**\n\n```typescript\n// General rate limit\nconst generalLimiter = {\n  windowMs: 15 * 60 * 1000,  // 15 minutes\n  max: 100                    // 100 requests per window\n};\n\n// Strict limit for auth endpoints\nconst authLimiter = {\n  windowMs: 15 * 60 * 1000,  // 15 minutes\n  max: 5,                     // Only 5 attempts\n  skipSuccessfulRequests: true\n};\n\n// Apply to routes\napp.use('/api/', rateLimitMiddleware(generalLimiter));\nrouter.post('/api/auth/login', rateLimitMiddleware(authLimiter), loginHandler);\n```\n\n---\n\n## 5. Pagination\n\n**Standard pagination for list endpoints.**\n\n```typescript\n// Pagination parameters\nconst DEFAULT_PAGE = 1;\nconst DEFAULT_LIMIT = 20;\nconst MAX_LIMIT = 100;\n\nfunction parsePagination(query) {\n  const page = Math.max(1, parseInt(query.page) || DEFAULT_PAGE);\n  const limit = Math.min(MAX_LIMIT, Math.max(1, parseInt(query.limit) || DEFAULT_LIMIT));\n  const offset = (page - 1) * limit;\n\n  return { page, limit, offset };\n}\n\n// Response format\nfunction paginatedResponse(data, total, page, limit) {\n  return {\n    data,\n    pagination: {\n      page,\n      limit,\n      total,\n      totalPages: Math.ceil(total / limit),\n      hasNext: page < Math.ceil(total / limit),\n      hasPrev: page > 1\n    }\n  };\n}\n\n// Usage in handler\nasync function listUsersHandler(req, res) {\n  const { page, limit, offset } = parsePagination(req.query);\n\n  const [users, total] = await Promise.all([\n    db.users.findMany({ skip: offset, take: limit }),\n    db.users.count()\n  ]);\n\n  res.json(paginatedResponse(users, total, page, limit));\n}\n```\n\n---\n\n## 6. API Response Format\n\n**Use consistent response structure.**\n\n```typescript\n// Success response\n{\n  data: T,                    // The requested resource(s)\n  meta?: {\n    pagination?: {...},       // For lists\n    timestamp: string         // ISO timestamp\n  }\n}\n\n// Error response\n{\n  error: string,              // Human-readable message\n  code?: string,              // Machine-readable code\n  details?: unknown           // Additional context\n}\n```\n\n---\n\n## 7. HTTP Status Codes\n\nUse appropriate status codes:\n\n| Code | Meaning | When to Use |\n|------|---------|-------------|\n| 200 | OK | Successful GET, PUT, PATCH |\n| 201 | Created | Successful POST (resource created) |\n| 204 | No Content | Successful DELETE |\n| 400 | Bad Request | Validation errors, malformed request |\n| 401 | Unauthorized | Missing or invalid authentication |\n| 403 | Forbidden | Authenticated but not authorized |\n| 404 | Not Found | Resource doesn't exist |\n| 409 | Conflict | Resource conflict (duplicate, etc.) |\n| 429 | Too Many Requests | Rate limit exceeded |\n| 500 | Internal Error | Unexpected server error |\n\n---\n\n## 8. RESTful Resource Naming\n\nFollow conventions:\n- `GET /api/resources` - List all (with pagination)\n- `GET /api/resources/:id` - Get one\n- `POST /api/resources` - Create new\n- `PUT /api/resources/:id` - Replace entirely\n- `PATCH /api/resources/:id` - Partial update\n- `DELETE /api/resources/:id` - Delete\n\nNested resources:\n- `GET /api/users/:userId/posts` - User's posts\n- `POST /api/users/:userId/posts` - Create post for user\n\n---\n\n## Checklist for New Endpoints\n\n- [ ] Input validation with schema\n- [ ] Authentication check (if protected)\n- [ ] Authorization check (if resource-specific)\n- [ ] Rate limiting configured\n- [ ] Error handling with appropriate codes\n- [ ] Consistent response format\n- [ ] Pagination for lists\n- [ ] Documentation/comments\n- [ ] Tests covering success and error cases\n",
        "plugins/aai-core/skills/branch-workflow/SKILL.md": "---\nname: branch-workflow\ndescription: Patterns for branch naming, validation, and lifecycle management. Used by git-pr-manager agent.\nuser-invocable: false\n---\n\n# Branch Workflow Patterns\n\nReference patterns for branch naming, validation, and protection.\n\n## Branch Naming Convention\n\n```\n{type}/{ticket-id}-{description}\n```\n\n### Branch Types\n| Type | Description | Example |\n|------|-------------|---------|\n| `feature` | New functionality | `feature/AUTH-123-oauth-login` |\n| `fix` | Bug fixes | `fix/AUTH-456-token-expiry` |\n| `chore` | Maintenance tasks | `chore/DEP-789-update-deps` |\n| `docs` | Documentation | `docs/README-updates` |\n| `refactor` | Code restructure | `refactor/API-101-cleanup` |\n| `test` | Test additions | `test/AUTH-202-unit-tests` |\n\n### Description Guidelines\n- Use lowercase with hyphens\n- Keep short but descriptive\n- No spaces or special characters\n\n## Protected Branches\n\nThese branches are PROTECTED - never commit directly:\n\n| Branch | Purpose |\n|--------|---------|\n| `main` | Production code |\n| `master` | Production code (legacy) |\n| `production` | Production deployment |\n| `staging` | Pre-production testing |\n| `develop` | Development integration |\n\n## Branch Validation\n\n### Check Current Branch\n```bash\ngit branch --show-current\n```\n\n### Validate Not Protected\n```javascript\nconst PROTECTED = ['main', 'master', 'production', 'staging', 'develop'];\nconst current = getCurrentBranch();\nif (PROTECTED.includes(current.toLowerCase())) {\n  throw new Error(`Cannot operate on protected branch: ${current}`);\n}\n```\n\n### Extract Ticket ID\n```javascript\n// Pattern: type/TICKET-123-description\nconst match = branchName.match(/^[a-z]+\\/([A-Z]+-\\d+)/);\nconst ticketId = match ? match[1] : null;\n```\n\n## PR Target Rules\n\n| Source Branch | Target Branch |\n|---------------|---------------|\n| `feature/*` | `staging` or `develop` |\n| `fix/*` | `staging` or `develop` |\n| `chore/*` | `staging` or `develop` |\n| `staging` | `production` or `main` |\n\n**NEVER target main/master directly from feature branches.**\n\n## Branch Lifecycle\n\n1. **Create**: Branch from staging/develop\n2. **Develop**: Make changes, commit frequently\n3. **Push**: Push to remote\n4. **PR**: Create PR targeting staging\n5. **Review**: Address feedback\n6. **Merge**: Squash or merge to staging\n7. **Delete**: Remove merged branch\n\n## Commands Reference\n\n### Create Branch\n```bash\ngit checkout staging\ngit pull origin staging\ngit checkout -b feature/TICKET-123-description\n```\n\n### Check Remote Tracking\n```bash\ngit branch -vv\n```\n\n### Push New Branch\n```bash\ngit push -u origin feature/TICKET-123-description\n```\n\n### Delete Merged Branch\n```bash\n# Local\ngit branch -d feature/TICKET-123-description\n\n# Remote\ngit push origin --delete feature/TICKET-123-description\n```\n\n## Anti-Patterns\n\n- Committing directly to main/master\n- Branches without ticket IDs (when applicable)\n- Long-lived feature branches (merge frequently)\n- Branches with spaces or special characters\n- Multiple developers on same branch without coordination\n",
        "plugins/aai-core/skills/commit-helper/SKILL.md": "---\nname: commit-helper\ndescription: Patterns for creating conventional commits with proper formatting and validation. Used by git-pr-manager agent.\nuser-invocable: false\n---\n\n# Commit Helper Patterns\n\nReference patterns for creating semantic, conventional commits.\n\n## Conventional Commit Format\n\n```\ntype(scope): short description\n\n[optional body]\n\n[optional footer]\n\nCo-Authored-By: Claude <noreply@anthropic.com>\n```\n\n## Commit Types\n\n| Type | Description | Semver Impact |\n|------|-------------|---------------|\n| `feat` | New feature | MINOR |\n| `fix` | Bug fix | PATCH |\n| `docs` | Documentation only | - |\n| `style` | Formatting, no code change | - |\n| `refactor` | Code restructure, no behavior change | - |\n| `perf` | Performance improvement | PATCH |\n| `test` | Adding/updating tests | - |\n| `chore` | Build process, dependencies | - |\n| `ci` | CI/CD configuration | - |\n| `build` | Build system changes | - |\n\n## Rules\n\n### Subject Line\n- Use imperative mood: \"add\" not \"added\" or \"adds\"\n- Start with lowercase\n- Maximum 72 characters\n- No period at end\n\n### Scope (optional)\n- Lowercase\n- Use component/area name: `auth`, `api`, `ui`, `db`\n- Keep consistent within project\n\n### Body (optional)\n- Explain what and why, not how\n- Wrap at 72 characters\n- Separate from subject with blank line\n\n### Footer (optional)\n- Reference issues: `Closes #123`\n- Note breaking changes: `BREAKING CHANGE: description`\n\n## Examples\n\n### Feature\n```\nfeat(auth): add OAuth2 token refresh\n\nImplement automatic token refresh when access token expires.\nUses refresh token stored in secure cookie.\n\nCloses #234\n```\n\n### Bug Fix\n```\nfix(api): handle null response from external service\n\nThe weather API sometimes returns null for temperature.\nAdded null check with fallback to cached value.\n```\n\n### Chore\n```\nchore(deps): update dependencies to latest versions\n\n- Updated React to 18.2.0\n- Updated TypeScript to 5.3.0\n- Updated ESLint to 8.56.0\n```\n\n## Pre-Commit Checks\n\nBefore committing, verify:\n\n1. **No secrets**: No API keys, passwords, or tokens\n2. **No debug code**: No console.log, debugger statements\n3. **No TODOs for critical paths**: Address or create ticket\n4. **Tests pass**: Run test suite if available\n5. **Lint passes**: No linting errors\n6. **Proper staging**: Only intended files staged\n\n## Anti-Patterns\n\n- \"WIP\" or \"work in progress\" commits\n- \"Fixed stuff\" or vague messages\n- Mixing unrelated changes in one commit\n- Committing generated/build files\n- Committing .env or credentials\n",
        "plugins/aai-core/skills/defensive-api-handling/SKILL.md": "---\nname: defensive-api-handling\ndescription: Safely handles API responses to prevent crashes from malformed JSON, HTML error pages, or unexpected response types. Use any time calling API endpoints.\n---\n\n# Defensive API Handling\n\n**Purpose**: Safely handle API responses to prevent crashes\n\n**When to Use**: Any time you call an API endpoint (in tests or production code)\n\n---\n\n## Never Assume API Returns JSON\n\nAPIs can return:\n- JSON (expected)\n- HTML error pages\n- Empty responses\n- Malformed JSON\n- Non-200 status codes\n\n**Your code must handle ALL of these safely.**\n\n---\n\n## Pattern 1: Safe JSON Parsing\n\n```typescript\nasync function safeJsonParse(response: Response): Promise<unknown | null> {\n  // 1. Check status code\n  if (!response.ok) {\n    console.warn(`API returned ${response.status} ${response.statusText}`);\n    return null;\n  }\n\n  // 2. Check content type\n  const contentType = response.headers.get('content-type');\n  if (!contentType?.includes('application/json')) {\n    console.warn(`Expected JSON, got ${contentType}`);\n    const text = await response.text();\n    console.warn(`Response body: ${text.slice(0, 200)}`);\n    return null;\n  }\n\n  // 3. Try to parse\n  try {\n    return await response.json();\n  } catch (error) {\n    console.warn('Failed to parse JSON:', error.message);\n    return null;\n  }\n}\n```\n\n---\n\n## Pattern 2: Fetch with Timeout\n\n```typescript\nasync function fetchWithTimeout(\n  url: string,\n  options: RequestInit = {},\n  timeoutMs: number = 10000\n): Promise<Response> {\n  const controller = new AbortController();\n  const timeout = setTimeout(() => controller.abort(), timeoutMs);\n\n  try {\n    const response = await fetch(url, {\n      ...options,\n      signal: controller.signal\n    });\n    return response;\n  } finally {\n    clearTimeout(timeout);\n  }\n}\n```\n\n---\n\n## Pattern 3: Retry Logic\n\n```typescript\nasync function fetchWithRetry(\n  url: string,\n  options: RequestInit = {},\n  maxRetries: number = 3,\n  delayMs: number = 1000\n): Promise<Response | null> {\n  for (let attempt = 1; attempt <= maxRetries; attempt++) {\n    try {\n      const response = await fetchWithTimeout(url, options);\n\n      // Retry on 5xx errors\n      if (response.status >= 500 && attempt < maxRetries) {\n        console.warn(`Attempt ${attempt} failed with ${response.status}, retrying...`);\n        await new Promise(resolve => setTimeout(resolve, delayMs * attempt));\n        continue;\n      }\n\n      return response;\n    } catch (error) {\n      if (attempt === maxRetries) {\n        console.error(`All ${maxRetries} attempts failed:`, error.message);\n        return null;\n      }\n      await new Promise(resolve => setTimeout(resolve, delayMs * attempt));\n    }\n  }\n  return null;\n}\n```\n\n---\n\n## Pattern 4: Type-Safe API Responses\n\n```typescript\n// Define expected response types\ninterface ApiResponse<T> {\n  data?: T;\n  error?: string;\n}\n\n// Type guard function\nfunction isApiResponse<T>(\n  value: unknown,\n  dataGuard: (v: unknown) => v is T\n): value is ApiResponse<T> {\n  if (typeof value !== 'object' || value === null) return false;\n  const obj = value as Record<string, unknown>;\n\n  if ('error' in obj && typeof obj.error !== 'string') return false;\n  if ('data' in obj && !dataGuard(obj.data)) return false;\n\n  return true;\n}\n\n// Safe API call with type checking\nasync function safeApiCall<T>(\n  url: string,\n  dataGuard: (v: unknown) => v is T\n): Promise<T | null> {\n  const response = await fetchWithRetry(url);\n  if (!response) return null;\n\n  const json = await safeJsonParse(response);\n  if (!json) return null;\n\n  if (!isApiResponse(json, dataGuard)) {\n    console.warn('Unexpected response structure:', json);\n    return null;\n  }\n\n  if (json.error) {\n    console.warn('API returned error:', json.error);\n    return null;\n  }\n\n  return json.data ?? null;\n}\n```\n\n---\n\n## Pattern 5: Error Boundary for API Calls\n\n```typescript\nasync function withApiErrorBoundary<T>(\n  operation: () => Promise<T>,\n  context: string,\n  fallback: T\n): Promise<T> {\n  try {\n    return await operation();\n  } catch (error) {\n    console.error(`[${context}] API error:`, error.message);\n\n    // Log additional context\n    if (error instanceof TypeError && error.message.includes('fetch')) {\n      console.error(`Network error - check connectivity`);\n    }\n\n    return fallback;\n  }\n}\n\n// Usage\nconst users = await withApiErrorBoundary(\n  () => fetchUsers(),\n  'fetchUsers',\n  [] // fallback to empty array\n);\n```\n\n---\n\n## Anti-Patterns to Avoid\n\n```typescript\n//  BAD: Assumes JSON, no error handling\nconst data = await fetch('/api/users').then(r => r.json());\n\n//  BAD: No timeout\nconst response = await fetch('/api/slow-endpoint');\n\n//  BAD: Trusts response structure\nconst users = data.users.map(u => u.name);\n\n//  BAD: Silent failures\ntry {\n  return await fetch('/api/users').then(r => r.json());\n} catch {\n  return [];  // Caller doesn't know it failed\n}\n```\n\n---\n\n## Success Criteria\n\n- Zero `SyntaxError: Unexpected token '<'` errors\n- Zero `Cannot read property of undefined` errors\n- Cleanup hooks never cause test suite to crash\n- Tests skip gracefully when API unavailable\n- All API calls have timeouts\n- Errors are logged with context\n",
        "plugins/aai-core/skills/pr-review/SKILL.md": "---\nname: pr-review\ndescription: Conduct comprehensive pull request reviews with security, architecture, and quality checks. Use when user wants to review a PR.\ndisable-model-invocation: true\n---\n\n# /pr-review - Pull Request Review\n\nConducts comprehensive code review of a pull request using the `git-pr-reviewer` agent.\n\n## Workflow\n\n### 1. Identify PR to Review\n\nIf user provided PR number/URL:\n```bash\ngh pr view <number> --json title,body,author,files\n```\n\nIf no argument provided:\n```bash\n# Find PR for current branch\ngh pr list --head $(git branch --show-current)\n```\n\nIf no PR found: Error and suggest using `/push` first.\n\n### 2. Launch git-pr-reviewer Agent\n\nUse the Task tool to launch `git-pr-reviewer` agent with the PR number.\n\n### 3. The Agent Will\n\nFetch PR details and diff:\n```bash\ngh pr view <number> --json title,body,author,files,additions,deletions\ngh pr diff <number>\n```\n\nAnalyze changes for:\n- **Security**: secrets, SQL injection, XSS, authentication gaps\n- **Correctness**: null safety, error handling, edge cases\n- **Performance**: N+1 queries, complexity, memory leaks\n- **Maintainability**: readability, naming, DRY violations\n- **Test coverage**: adequate tests for changes\n\nGenerate structured review:\n- Critical issues (must fix)\n- Major concerns (should address)\n- Minor suggestions (nice to have)\n- Positive observations (good practices)\n\nPost review to GitHub (with permission).\n\n### 4. After Review\n\nProvide:\n- Summary of findings\n- Review status (Approve/Request Changes/Comment)\n- Suggested next steps\n\n## Usage\n\n```\n/pr-review         # Review PR for current branch\n/pr-review 123     # Review specific PR number\n/pr-review #456    # Review specific PR\n```\n\n## Review Categories\n\n### Critical Issues\n- Security vulnerabilities\n- Data loss risks\n- Authentication/authorization gaps\n- Breaking changes\n\n### Major Concerns\n- Logic errors\n- Missing error handling\n- Performance problems\n- Incomplete implementation\n\n### Minor Suggestions\n- Code style improvements\n- Refactoring opportunities\n- Documentation gaps\n- Test coverage\n\n### Positive Observations\n- Clean code patterns\n- Good error handling\n- Comprehensive tests\n- Clear documentation\n",
        "plugins/aai-core/skills/push/SKILL.md": "---\nname: push\ndescription: Intelligent workflow orchestrator that commits, pushes, and creates/updates PRs automatically. Use when user wants to save their work or create a PR.\ndisable-model-invocation: true\n---\n\n# /push - Git Workflow Orchestrator\n\nHandles the complete git workflow: commit  push  create/update PR.\n\n## Workflow\n\n### 1. Validate Current Branch (CRITICAL - do first)\n```bash\ngit branch --show-current\n```\n\n- If on staging/main/production/master: **STOP and error** - cannot commit to protected branches\n- If on feature branch: Continue\n\n### 2. Handle Uncommitted Changes\n\nCheck for changes:\n```bash\ngit status\n```\n\nIf changes exist:\n1. Review what files changed\n2. Stage appropriate files (prefer specific files over `git add .`)\n3. Create commit with conventional format:\n   - `feat(scope): description` - new feature\n   - `fix(scope): description` - bug fix\n   - `chore(scope): description` - maintenance\n   - `docs(scope): description` - documentation\n   - `refactor(scope): description` - code restructure\n   - `test(scope): description` - tests\n\nRun pre-commit checks:\n- No secrets/API keys in code\n- No debug console.log statements\n- No commented-out code blocks\n\n### 3. Push to Remote\n```bash\n# Check for unpushed commits\ngit log origin/$(git branch --show-current)..HEAD\n\n# Push (set upstream if new branch)\ngit push origin $(git branch --show-current)\n# or for new branches:\ngit push -u origin $(git branch --show-current)\n```\n\n### 4. Handle Pull Request\n\nCheck if PR exists:\n```bash\ngh pr list --head $(git branch --show-current)\n```\n\n**If no PR exists**: Launch `git-pr-manager` agent to create PR\n- Target staging/develop (not main/master)\n- Generate description from commits\n- Include summary and test instructions\n\n**If PR exists**: Report that PR was updated with new commits\n\n### 5. Provide Summary\n\nReport:\n- What was committed\n- What was pushed\n- PR status (created/updated)\n- PR URL\n- Next steps\n\n## Usage\n\n```\n/push                    # Commit all changes with auto-generated message\n/push \"add auth feature\" # Commit with specific message\n```\n\n## Important Rules\n\n- **NEVER commit to protected branches** (staging, main, production, master)\n- Always validate branch first\n- Use conventional commit format\n- Target staging/develop for PRs (not main)\n- Don't stage sensitive files (.env, credentials)\n",
        "plugins/aai-core/skills/security-analysis/SKILL.md": "---\nname: security-analysis\ndescription: Security vulnerability scanning and OWASP Top 10 compliance checking. Use when reviewing code for security issues, validating authentication/authorization, or ensuring security best practices.\n---\n\n# Security Analysis Skill\n\n## Quick Reference\n\nUse this skill when:\n- Reviewing code for security vulnerabilities\n- Implementing authentication/authorization\n- Validating input handling\n- Checking for common security flaws\n- Ensuring OWASP Top 10 compliance\n\n---\n\n## Security Checklist (OWASP Top 10)\n\n### 1. Broken Access Control\n\n**Check for**:\n- Missing authorization checks on protected routes\n- Insecure direct object references (IDOR)\n- Privilege escalation vulnerabilities\n\n**Pattern**:\n```\n# Find routes without auth middleware - adjust pattern for your framework\ngrep -rn \"router\\.\\(get\\|post\\|put\\|delete\\|patch\\)\" src/routes/ | \\\n  grep -v \"requireAuth\\|isAuthenticated\\|checkPermission\" | \\\n  grep -v \"public\"\n```\n\n---\n\n### 2. Cryptographic Failures\n\n**Check for**:\n- Passwords stored in plain text\n- Weak hashing algorithms (MD5, SHA1)\n- Hardcoded secrets or API keys\n- Insufficient bcrypt rounds (<10)\n\n**Patterns to Scan**:\n```bash\n# Find weak crypto usage\ngrep -rn \"md5\\|sha1\\|createHash('sha1')\" src/\n\n# Find hardcoded secrets\ngrep -rn \"api[_-]?key\\s*=\\s*['\\\"][a-zA-Z0-9]\" src/\n\n# Find potential password issues\ngrep -rn \"password\\s*=\\s*['\\\"]\" src/\n```\n\n---\n\n### 3. Injection Vulnerabilities\n\n**Check for**:\n- SQL injection (unparameterized queries)\n- NoSQL injection (unvalidated queries)\n- Command injection (shell commands with user input)\n- XSS (unescaped user content)\n\n**Patterns to Scan**:\n```bash\n# Find potential SQL injection (template literals in queries)\ngrep -rn \"query.*\\${\" src/\n\n# Find command execution\ngrep -rn \"exec\\|spawn\\|execSync\" src/\n\n# Find eval usage\ngrep -rn \"eval(\" src/\n```\n\n---\n\n### 4. Insecure Design\n\n**Check for**:\n- Missing rate limiting on sensitive endpoints\n- No CSRF protection\n- Insecure session management\n- Missing security headers\n\n---\n\n### 5. Security Misconfiguration\n\n**Check for**:\n- Debug mode enabled in production\n- Default credentials\n- Verbose error messages exposing internals\n\n**Patterns to Scan**:\n```bash\n# Find debug code\ngrep -rn \"console\\.log\\|debugger\" src/\n\n# Find exposed secrets in errors\ngrep -rn \"throw.*password\\|throw.*token\\|throw.*secret\" src/\n```\n\n---\n\n### 6. Vulnerable Components\n\n**Check for**:\n- Outdated packages with known vulnerabilities\n\n**Scan Commands**:\n```bash\n# NPM\nnpm audit --audit-level=moderate\n\n# PNPM\npnpm audit --audit-level=moderate\n\n# Yarn\nyarn audit --level moderate\n```\n\n---\n\n### 7. Authentication Failures\n\n**Check for**:\n- Weak password requirements\n- Session fixation vulnerabilities\n- Insufficient session timeout\n\n---\n\n### 8. Data Integrity Failures\n\n**Check for**:\n- Unsigned/unverified packages\n- No integrity checks on uploaded files\n- Insecure deserialization\n\n---\n\n### 9. Logging Failures\n\n**Check for**:\n- No audit logging for sensitive operations\n- Logging sensitive data (passwords, tokens)\n\n---\n\n### 10. SSRF Vulnerabilities\n\n**Check for**:\n- Unvalidated URL fetching\n- Internal network access from user input\n- Open redirects\n\n---\n\n## Automated Security Scan\n\nCreate a security scan script appropriate for your project:\n\n```bash\n#!/bin/bash\necho \"Running Security Scan...\"\n\n# 1. Check dependencies\necho \"1. Checking dependencies...\"\nnpm audit --audit-level=moderate 2>/dev/null || \\\n  pnpm audit --audit-level=moderate 2>/dev/null || \\\n  yarn audit --level moderate 2>/dev/null\n\n# 2. Find hardcoded secrets\necho \"2. Scanning for hardcoded secrets...\"\ngrep -rn \"password\\s*=\\s*['\\\"]\" src/ --exclude-dir=node_modules || echo \"No hardcoded passwords found\"\n\n# 3. Find weak crypto\necho \"3. Checking for weak cryptography...\"\ngrep -rn \"md5\\|sha1\" src/ --exclude-dir=node_modules || echo \"No weak crypto found\"\n\n# 4. Find SQL injection risks\necho \"4. Checking for SQL injection risks...\"\ngrep -rn \"query.*\\${\" src/ --exclude-dir=node_modules || echo \"No obvious injection risks\"\n\n# 5. Check for eval\necho \"5. Checking for eval usage...\"\ngrep -rn \"eval(\" src/ --exclude-dir=node_modules || echo \"No eval usage found\"\n\necho \"Security scan complete\"\n```\n\n---\n\n## Secure Code Patterns\n\n### Input Validation\n\nAlways validate and sanitize user input:\n- Use schema validation (Zod, Yup, Joi)\n- Escape HTML for display\n- Parameterize database queries\n\n### Authentication\n\n- Hash passwords with bcrypt (12+ rounds)\n- Use secure session configuration (httpOnly, secure, sameSite)\n- Implement rate limiting on auth endpoints\n\n### Authorization\n\n- Check permissions on every protected endpoint\n- Use principle of least privilege\n- Log access attempts\n\n### Error Handling\n\n- Never expose stack traces in production\n- Log errors with context but without secrets\n- Return generic error messages to users\n\n---\n\n## Key Principles\n\n1. **Trust nothing from users** - Validate all input\n2. **Defense in depth** - Multiple security layers\n3. **Least privilege** - Minimal permissions\n4. **Audit everything** - Log security events\n5. **Keep updated** - Regular dependency audits\n6. **HTTPS everywhere** - Encrypt in transit\n7. **Hash, don't encrypt passwords** - Use bcrypt\n",
        "plugins/aai-core/skills/stack-detection/SKILL.md": "---\nname: stack-detection\ndescription: Detect project technology stack from package.json, config files, and code patterns. Use this skill FIRST before writing any technology-specific code to prevent hallucinations.\nauto_load: all\npriority: high\n---\n\n# Stack Detection Skill\n\nThis skill provides patterns for detecting a project's technology stack to ensure agents use the correct technology-specific patterns.\n\n## Why Stack Detection Matters\n\n**Problem**: Agents with hardcoded technology examples will hallucinate incorrect code for projects using different technologies.\n\n**Solution**: Always detect the project's actual technology stack BEFORE writing any code.\n\n## Detection Process\n\n### Step 1: Read package.json\n\n```bash\n# Check for package.json\ncat package.json 2>/dev/null || echo \"No package.json found\"\n```\n\n### Step 2: Parse Dependencies\n\nExamine `dependencies` and `devDependencies` for technology indicators.\n\n### Step 3: Check Config Files\n\nLook for framework-specific configuration files.\n\n### Step 4: Examine Existing Code\n\nCheck existing patterns in the codebase.\n\n---\n\n## Frontend Framework Detection\n\n### React\n```\nIndicators:\n- package.json: \"react\", \"react-dom\"\n- Files: jsx/tsx extensions, React imports\n- Config: None required (bundler handles it)\n\nSub-frameworks:\n- \"next\"  Next.js (App Router if app/ exists, Pages Router if pages/)\n- \"gatsby\"  Gatsby\n- \"remix\"  Remix\n- \"@tanstack/react-router\"  TanStack Router\n```\n\n### Vue\n```\nIndicators:\n- package.json: \"vue\"\n- Files: .vue extensions\n- Config: vite.config with Vue plugin, or vue.config.js\n\nSub-frameworks:\n- \"nuxt\"  Nuxt 3\n- \"nuxt-bridge\"  Nuxt Bridge\n```\n\n### Angular\n```\nIndicators:\n- package.json: \"@angular/core\"\n- Files: .component.ts, .module.ts, .service.ts\n- Config: angular.json\n```\n\n### Svelte\n```\nIndicators:\n- package.json: \"svelte\"\n- Files: .svelte extensions\n- Config: svelte.config.js\n\nSub-frameworks:\n- \"@sveltejs/kit\"  SvelteKit\n```\n\n### SolidJS\n```\nIndicators:\n- package.json: \"solid-js\"\n- Config: vite.config with Solid plugin\n```\n\n---\n\n## Backend Framework Detection\n\n### Express\n```\nIndicators:\n- package.json: \"express\"\n- Files: app.use(), app.get(), Router()\n```\n\n### Fastify\n```\nIndicators:\n- package.json: \"fastify\"\n- Files: fastify.register(), fastify.get()\n```\n\n### NestJS\n```\nIndicators:\n- package.json: \"@nestjs/core\"\n- Files: @Controller(), @Injectable(), @Module() decorators\n- Config: nest-cli.json\n```\n\n### Hono\n```\nIndicators:\n- package.json: \"hono\"\n- Files: new Hono(), app.get()\n```\n\n### Koa\n```\nIndicators:\n- package.json: \"koa\"\n- Files: new Koa(), ctx.body\n```\n\n### Next.js API Routes\n```\nIndicators:\n- package.json: \"next\"\n- Files: app/api/*/route.ts (App Router) or pages/api/*.ts (Pages Router)\n```\n\n---\n\n## Database & ORM Detection\n\n### Prisma\n```\nIndicators:\n- package.json: \"prisma\", \"@prisma/client\"\n- Files: prisma/schema.prisma\n- Config: prisma/schema.prisma\n\nUsage patterns:\n- prisma.model.findMany()\n- PrismaClient import\n```\n\n### TypeORM\n```\nIndicators:\n- package.json: \"typeorm\"\n- Files: @Entity(), @Column() decorators\n- Config: ormconfig.json, data-source.ts\n\nUsage patterns:\n- getRepository()\n- createQueryBuilder()\n```\n\n### Drizzle\n```\nIndicators:\n- package.json: \"drizzle-orm\"\n- Files: drizzle/ directory, *.schema.ts\n- Config: drizzle.config.ts\n\nUsage patterns:\n- db.select().from()\n- pgTable(), mysqlTable()\n```\n\n### Sequelize\n```\nIndicators:\n- package.json: \"sequelize\"\n- Files: Model.define(), sequelize.define()\n- Config: .sequelizerc\n```\n\n### Knex\n```\nIndicators:\n- package.json: \"knex\"\n- Config: knexfile.js, knexfile.ts\n\nUsage patterns:\n- knex('table').select()\n- knex.schema.createTable()\n```\n\n### Database Type\n```\nPostgreSQL:\n- DATABASE_URL contains \"postgresql://\" or \"postgres://\"\n- package.json: \"pg\"\n\nMySQL:\n- DATABASE_URL contains \"mysql://\"\n- package.json: \"mysql2\"\n\nSQLite:\n- DATABASE_URL contains \"file:\" or \".db\"\n- package.json: \"better-sqlite3\", \"sqlite3\"\n- Files: *.db, *.sqlite files\n\nMongoDB:\n- DATABASE_URL contains \"mongodb://\"\n- package.json: \"mongodb\", \"mongoose\"\n```\n\n---\n\n## State Management Detection\n\n### React State Libraries\n```\nRedux:\n- package.json: \"@reduxjs/toolkit\", \"redux\"\n- Files: createSlice(), configureStore()\n\nZustand:\n- package.json: \"zustand\"\n- Files: create() from zustand\n\nJotai:\n- package.json: \"jotai\"\n- Files: atom(), useAtom()\n\nTanStack Query:\n- package.json: \"@tanstack/react-query\"\n- Files: useQuery(), useMutation()\n\nRecoil:\n- package.json: \"recoil\"\n- Files: atom(), selector(), useRecoilState()\n```\n\n### Vue State Libraries\n```\nPinia:\n- package.json: \"pinia\"\n- Files: defineStore()\n\nVuex:\n- package.json: \"vuex\"\n- Files: createStore(), mapState()\n```\n\n---\n\n## Styling Detection\n\n### Tailwind CSS\n```\nIndicators:\n- package.json: \"tailwindcss\"\n- Config: tailwind.config.js, tailwind.config.ts\n- Files: className with utility classes (flex, p-4, text-lg)\n```\n\n### CSS-in-JS\n```\nStyled Components:\n- package.json: \"styled-components\"\n- Files: styled.div``, css``\n\nEmotion:\n- package.json: \"@emotion/react\", \"@emotion/styled\"\n- Files: css``, styled()\n```\n\n### Component Libraries\n```\nMaterial UI:\n- package.json: \"@mui/material\"\n\nChakra UI:\n- package.json: \"@chakra-ui/react\"\n\nRadix UI:\n- package.json: \"@radix-ui/*\"\n\nshadcn/ui:\n- Files: components/ui/ directory with Radix-based components\n\nAnt Design:\n- package.json: \"antd\"\n```\n\n### CSS Modules\n```\nIndicators:\n- Files: *.module.css, *.module.scss\n- Imports: import styles from './Component.module.css'\n```\n\n---\n\n## Testing Framework Detection\n\n### Unit Testing\n```\nJest:\n- package.json: \"jest\"\n- Config: jest.config.js, jest.config.ts\n- Files: *.test.ts, *.spec.ts with describe/it/expect\n\nVitest:\n- package.json: \"vitest\"\n- Config: vitest.config.ts\n- Files: Same as Jest but often in vitest-specific config\n\nMocha:\n- package.json: \"mocha\"\n- Config: .mocharc.js, .mocharc.json\n- Often with \"chai\" for assertions\n```\n\n### E2E Testing\n```\nPlaywright:\n- package.json: \"@playwright/test\"\n- Config: playwright.config.ts\n- Files: *.spec.ts in e2e/ or tests/\n\nCypress:\n- package.json: \"cypress\"\n- Config: cypress.config.ts, cypress.json\n- Files: cypress/ directory with e2e/, support/\n```\n\n---\n\n## Validation Library Detection\n\n```\nZod:\n- package.json: \"zod\"\n- Files: z.object(), z.string()\n\nYup:\n- package.json: \"yup\"\n- Files: yup.object(), yup.string()\n\nJoi:\n- package.json: \"joi\"\n- Files: Joi.object(), Joi.string()\n\nclass-validator (NestJS):\n- package.json: \"class-validator\"\n- Files: @IsString(), @IsEmail() decorators\n```\n\n---\n\n## Build Tool Detection\n\n```\nVite:\n- package.json: \"vite\"\n- Config: vite.config.ts\n\nWebpack:\n- package.json: \"webpack\"\n- Config: webpack.config.js\n\nesbuild:\n- package.json: \"esbuild\"\n- Often used through other tools\n\nTurbopack:\n- Next.js 13+ with --turbo flag\n```\n\n---\n\n## Detection Script\n\nRun this detection process before writing code:\n\n```markdown\n## Stack Detection Checklist\n\n1. [ ] Read package.json dependencies\n2. [ ] Check for framework config files\n3. [ ] Examine existing code patterns\n4. [ ] Document detected stack:\n   - Frontend: _______________\n   - Backend: _______________\n   - Database/ORM: _______________\n   - Testing: _______________\n   - Styling: _______________\n   - Validation: _______________\n5. [ ] Use ONLY detected technology patterns\n```\n\n---\n\n## Usage in Agents\n\n### Before Writing Code\n\n```\n1. Read package.json\n2. Identify all relevant technologies\n3. Load appropriate technology-specific skills\n4. Use ONLY patterns from detected stack\n5. NEVER assume technology - verify first\n```\n\n### If Technology Not Detected\n\n```\n1. Ask user to clarify technology stack\n2. Check for alternative indicators\n3. Default to minimal assumptions\n4. Explain any assumptions made\n```\n\n---\n\n## Common Mistakes to Avoid\n\n1. **Assuming React** - Check first, could be Vue/Angular/Svelte\n2. **Assuming Prisma** - Check first, could be TypeORM/Drizzle/raw SQL\n3. **Assuming Jest** - Check first, could be Vitest/Mocha\n4. **Assuming Tailwind** - Check first, could be CSS modules/styled-components\n5. **Assuming Express** - Check first, could be Fastify/NestJS/Hono\n\n---\n\n## Related Skills\n\nLoad technology-specific skills after detection:\n- `react-patterns` for React projects\n- `vue-patterns` for Vue projects\n- `prisma-patterns` for Prisma projects\n- `typeorm-patterns` for TypeORM projects\n- `jest-patterns` for Jest projects\n- `playwright-patterns` for Playwright projects\n- `tailwind-patterns` for Tailwind projects\n",
        "plugins/aai-dev-backend/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-dev-backend\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Backend development agent - technology-agnostic API design, service architecture, and patterns. Auto-detects project stack.\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"homepage\": \"https://github.com/the-answerai/alphaagent-team#readme\",\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"backend\", \"api\", \"services\", \"development\", \"stack-detection\"]\n}\n",
        "plugins/aai-dev-backend/agents/backend-developer.md": "---\nname: backend-developer\ndescription: Expert backend developer specializing in server-side architecture, APIs, and services. Use for API design, authentication, database integration, and backend best practices.\nmodel: sonnet\ntools: Read, Write, Edit, Glob, Grep, Bash\nskills:\n  - api-design\n  - authentication-patterns\n  - error-handling\n  - middleware-patterns\n---\n\n# Backend Developer Agent\n\nYou are an expert backend developer with deep expertise in server-side technologies, API design, and distributed systems. You build secure, scalable, and maintainable backend services.\n\n## Critical: Technology Detection\n\n**BEFORE writing any backend code, you MUST detect the project's technology stack:**\n\n1. Check for Framework:\n   - `express` in package.json  Express.js\n   - `fastify` in package.json  Fastify\n   - `@nestjs/core` in package.json  NestJS\n   - `hono` in package.json  Hono\n   - `koa` in package.json  Koa\n   - `next` with API routes  Next.js API Routes\n\n2. Check for ORM (coordinate with database-developer):\n   - Look for prisma, typeorm, drizzle, sequelize, knex\n\n3. Check for Validation Library:\n   - `zod`  Zod schemas\n   - `joi`  Joi schemas\n   - `yup`  Yup schemas\n   - `class-validator`  Class-validator decorators (NestJS)\n\n4. **Use the detected technology's patterns exclusively.**\n\n## Core Expertise\n\n### API Design Principles (Technology-Agnostic)\n- **REST**: Resource-oriented design, proper HTTP methods, meaningful status codes\n- **GraphQL**: Schema design, resolvers, dataloaders for N+1 prevention\n- **WebSockets**: Real-time bidirectional communication\n- **RPC**: gRPC for high-performance inter-service communication\n\n### Security Fundamentals\n- **Authentication**: Token-based (JWT), session-based, API keys, OAuth2\n- **Authorization**: RBAC (Role-Based), ABAC (Attribute-Based), resource ownership\n- **Input Validation**: Sanitize all inputs, validate against schemas\n- **Security Headers**: CORS, CSP, rate limiting, HTTPS\n\n### Architecture Patterns\n- **Layered Architecture**: Routes  Controllers  Services  Repositories\n- **Dependency Injection**: Loose coupling, testability\n- **Middleware**: Cross-cutting concerns (auth, logging, error handling)\n- **Repository Pattern**: Abstract data access layer\n\n## Working Approach\n\n### 1. Understand Requirements\n- Clarify API contracts and data models\n- Identify authentication/authorization requirements\n- Understand performance and scalability needs\n- Note integration points with external services\n\n### 2. Detect Project Technology\n```\nRead package.json for framework and dependencies\nCheck for existing route/controller patterns\nIdentify validation and ORM libraries\nFollow established project conventions\n```\n\n### 3. Design API Structure\n- Define resource endpoints following REST conventions\n- Plan request/response schemas\n- Design consistent error handling strategy\n- Consider API versioning approach\n\n### 4. Implement Using Project's Framework\n- Follow the detected framework's conventions\n- Use the project's existing patterns for consistency\n- Reference the appropriate stack skill for implementation details\n\n### 5. Ensure Quality\n- Write unit tests for services/business logic\n- Write integration tests for API endpoints\n- Security audit for OWASP Top 10 vulnerabilities\n- Load test critical endpoints\n\n## API Design Guidelines\n\n### REST Conventions\n- `GET /resources` - List resources\n- `GET /resources/:id` - Get single resource\n- `POST /resources` - Create resource\n- `PUT /resources/:id` - Replace resource\n- `PATCH /resources/:id` - Partial update\n- `DELETE /resources/:id` - Delete resource\n\n### HTTP Status Codes\n- `200` - Success\n- `201` - Created\n- `204` - No Content (successful delete)\n- `400` - Bad Request (validation error)\n- `401` - Unauthorized (not authenticated)\n- `403` - Forbidden (not authorized)\n- `404` - Not Found\n- `409` - Conflict (duplicate, constraint violation)\n- `422` - Unprocessable Entity (semantic error)\n- `500` - Internal Server Error\n\n### Error Response Format\n```json\n{\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Human-readable message\",\n    \"details\": { \"field\": [\"error1\", \"error2\"] }\n  }\n}\n```\n\n## Layered Architecture Guidelines\n\n### Routes/Controllers\n- Handle HTTP concerns only\n- Parse and validate request input\n- Call appropriate service methods\n- Format and send response\n\n### Services\n- Contain business logic\n- Orchestrate multiple repository calls\n- Handle transactions\n- Throw domain-specific errors\n\n### Repositories\n- Data access only\n- No business logic\n- Abstract database operations\n- Return domain objects\n\n## Security Guidelines\n\n### Input Validation\n- Validate all inputs at API boundary\n- Use schema validation (Zod, Joi, etc.)\n- Sanitize data before storage\n- Never trust client-side validation alone\n\n### Authentication\n- Use secure token storage (httpOnly cookies for web)\n- Implement token refresh mechanisms\n- Hash passwords with bcrypt/argon2 (never store plain text)\n- Implement account lockout after failed attempts\n\n### Authorization\n- Check permissions at service layer\n- Implement resource ownership checks\n- Use middleware for common auth patterns\n- Log authorization failures for security monitoring\n\n### Rate Limiting\n- Implement per-user/per-IP rate limits\n- Different limits for authenticated vs anonymous\n- Return 429 with Retry-After header\n- Consider endpoint-specific limits\n\n## Error Handling Guidelines\n\n### Custom Error Classes\n- Create hierarchy: `AppError`  `ValidationError`, `NotFoundError`, etc.\n- Include error codes for client consumption\n- Include details for debugging (dev only)\n- Make errors serializable to JSON\n\n### Global Error Handler\n- Catch all unhandled errors\n- Log unexpected errors with stack traces\n- Never expose internal details in production\n- Return consistent error format\n\n### Operational vs Programming Errors\n- Operational: Expected errors (validation, not found) - handle gracefully\n- Programming: Bugs (null reference, type errors) - log and crash/restart\n\n## Code Quality Standards\n\n### TypeScript\n- Strict mode enabled\n- Interface-first design for DTOs\n- Proper error types\n- No implicit any\n\n### Testing\n- Unit tests for services (mock repositories)\n- Integration tests for API endpoints\n- Test error paths, not just happy paths\n- Aim for 80%+ coverage on business logic\n\n### Logging\n- Structured logging (JSON format)\n- Request correlation IDs\n- Log levels: error, warn, info, debug\n- Never log sensitive data (passwords, tokens, PII)\n\n## Communication Style\n\n- Explain architectural decisions and tradeoffs\n- Document API contracts clearly\n- Point out security considerations\n- Recommend performance optimizations\n- Reference relevant standards (REST, OAuth, etc.)\n\n## Integration\n\nWorks with skills:\n- `api-design` - REST/GraphQL patterns\n- `authentication-patterns` - Auth implementation\n- `error-handling` - Error handling patterns\n- `middleware-patterns` - Middleware design\n\nTechnology-specific skills (load based on detection):\n- `express-*` skills for Express projects\n- `fastify-*` skills for Fastify projects\n- `nestjs-*` skills for NestJS projects\n- `node-*` skills for general Node.js\n\nCoordinates with:\n- `frontend-developer` - API contracts, data formats\n- `database-developer` - Data models, queries\n- `devops-engineer` - Deployment, scaling, monitoring\n",
        "plugins/aai-dev-backend/skills/api-design/SKILL.md": "---\nname: api-design\ndescription: Patterns for designing RESTful and GraphQL APIs\nuser-invocable: false\n---\n\n# API Design Skill\n\nPatterns for designing clean, consistent, and developer-friendly APIs.\n\n## REST API Design\n\n### URL Structure\n\n```\n# Collection endpoints\nGET    /api/v1/users           # List users\nPOST   /api/v1/users           # Create user\n\n# Resource endpoints\nGET    /api/v1/users/:id       # Get user\nPUT    /api/v1/users/:id       # Update user\nDELETE /api/v1/users/:id       # Delete user\n\n# Nested resources\nGET    /api/v1/users/:id/posts # Get user's posts\nPOST   /api/v1/users/:id/posts # Create post for user\n\n# Actions (when CRUD doesn't fit)\nPOST   /api/v1/users/:id/activate\nPOST   /api/v1/orders/:id/cancel\n```\n\n### HTTP Methods\n\n| Method | Usage | Idempotent | Safe |\n|--------|-------|------------|------|\n| GET | Read resource | Yes | Yes |\n| POST | Create resource | No | No |\n| PUT | Replace resource | Yes | No |\n| PATCH | Partial update | No | No |\n| DELETE | Remove resource | Yes | No |\n\n### Status Codes\n\n```typescript\n// Success\n200 OK              // Successful GET, PUT, PATCH, DELETE\n201 Created         // Successful POST (resource created)\n204 No Content      // Successful DELETE (no body)\n\n// Redirection\n301 Moved Permanently\n304 Not Modified    // Cache valid\n\n// Client Errors\n400 Bad Request     // Invalid input\n401 Unauthorized    // Not authenticated\n403 Forbidden       // Not authorized\n404 Not Found       // Resource doesn't exist\n409 Conflict        // State conflict (duplicate)\n422 Unprocessable   // Validation failed\n429 Too Many Requests // Rate limited\n\n// Server Errors\n500 Internal Error  // Unexpected error\n502 Bad Gateway     // Upstream error\n503 Unavailable     // Temporarily down\n```\n\n### Request/Response Format\n\n```typescript\n// Standard response envelope\ninterface ApiResponse<T> {\n  data: T;\n  meta?: {\n    pagination?: Pagination;\n    timestamp: string;\n  };\n}\n\n// List response with pagination\ninterface ListResponse<T> {\n  data: T[];\n  meta: {\n    pagination: {\n      page: number;\n      limit: number;\n      total: number;\n      totalPages: number;\n    };\n  };\n}\n\n// Error response\ninterface ErrorResponse {\n  error: {\n    code: string;\n    message: string;\n    details?: Record<string, string[]>;\n  };\n}\n```\n\n### Query Parameters\n\n```\n# Pagination\nGET /api/v1/users?page=1&limit=20\n\n# Filtering\nGET /api/v1/users?status=active&role=admin\n\n# Sorting\nGET /api/v1/users?sort=createdAt&order=desc\n\n# Field selection\nGET /api/v1/users?fields=id,name,email\n\n# Search\nGET /api/v1/users?q=john\n\n# Complex filters\nGET /api/v1/products?price[gte]=10&price[lte]=100\nGET /api/v1/orders?createdAt[gte]=2024-01-01\n```\n\n### Versioning\n\n```typescript\n// URL versioning (recommended)\napp.use('/api/v1', v1Router);\napp.use('/api/v2', v2Router);\n\n// Header versioning\n// Accept: application/vnd.myapp.v1+json\n\n// Query parameter\n// GET /api/users?version=1\n```\n\n## GraphQL Design\n\n### Schema Design\n\n```graphql\ntype Query {\n  user(id: ID!): User\n  users(filter: UserFilter, pagination: PaginationInput): UserConnection!\n}\n\ntype Mutation {\n  createUser(input: CreateUserInput!): CreateUserPayload!\n  updateUser(id: ID!, input: UpdateUserInput!): UpdateUserPayload!\n  deleteUser(id: ID!): DeleteUserPayload!\n}\n\ntype User {\n  id: ID!\n  email: String!\n  name: String!\n  posts(first: Int, after: String): PostConnection!\n  createdAt: DateTime!\n}\n\ninput CreateUserInput {\n  email: String!\n  name: String!\n  password: String!\n}\n\ntype CreateUserPayload {\n  user: User\n  errors: [Error!]\n}\n\ntype Error {\n  field: String\n  message: String!\n}\n```\n\n### Pagination (Relay-style)\n\n```graphql\ntype UserConnection {\n  edges: [UserEdge!]!\n  pageInfo: PageInfo!\n  totalCount: Int!\n}\n\ntype UserEdge {\n  node: User!\n  cursor: String!\n}\n\ntype PageInfo {\n  hasNextPage: Boolean!\n  hasPreviousPage: Boolean!\n  startCursor: String\n  endCursor: String\n}\n```\n\n### Error Handling\n\n```graphql\n# Return errors in payload, not as GraphQL errors\ntype CreateUserPayload {\n  user: User\n  userErrors: [UserError!]!\n}\n\ntype UserError {\n  field: [String!]\n  message: String!\n  code: ErrorCode!\n}\n\nenum ErrorCode {\n  INVALID_INPUT\n  NOT_FOUND\n  UNAUTHORIZED\n  CONFLICT\n}\n```\n\n## API Documentation\n\n### OpenAPI (Swagger)\n\n```yaml\nopenapi: 3.0.0\ninfo:\n  title: User API\n  version: 1.0.0\n\npaths:\n  /users:\n    get:\n      summary: List users\n      parameters:\n        - name: page\n          in: query\n          schema:\n            type: integer\n            default: 1\n        - name: limit\n          in: query\n          schema:\n            type: integer\n            default: 20\n            maximum: 100\n      responses:\n        '200':\n          description: Success\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/UserListResponse'\n\ncomponents:\n  schemas:\n    User:\n      type: object\n      properties:\n        id:\n          type: string\n          format: uuid\n        email:\n          type: string\n          format: email\n        name:\n          type: string\n      required:\n        - id\n        - email\n        - name\n```\n\n## Rate Limiting\n\n```typescript\n// Express rate limiter\nimport rateLimit from 'express-rate-limit';\n\nconst apiLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100, // 100 requests per window\n  message: {\n    error: 'Too many requests, please try again later',\n  },\n  standardHeaders: true, // Return rate limit info in headers\n  legacyHeaders: false,\n});\n\napp.use('/api/', apiLimiter);\n\n// Per-user rate limiting\nconst userLimiter = rateLimit({\n  windowMs: 60 * 1000, // 1 minute\n  max: 30,\n  keyGenerator: (req) => req.user?.id || req.ip,\n});\n```\n\n## Caching\n\n```typescript\n// Cache headers\nres.set({\n  'Cache-Control': 'public, max-age=300', // 5 minutes\n  'ETag': generateETag(data),\n});\n\n// Conditional requests\napp.get('/users/:id', (req, res) => {\n  const user = getUser(req.params.id);\n  const etag = generateETag(user);\n\n  if (req.headers['if-none-match'] === etag) {\n    return res.status(304).end();\n  }\n\n  res.set('ETag', etag);\n  res.json({ data: user });\n});\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- Express/Node.js stack skills\n",
        "plugins/aai-dev-backend/skills/authentication-patterns/SKILL.md": "---\nname: authentication-patterns\ndescription: Patterns for implementing authentication and authorization in backend applications\nuser-invocable: false\n---\n\n# Authentication Patterns Skill\n\nPatterns for implementing secure authentication and authorization.\n\n## Authentication Methods\n\n### JWT (JSON Web Tokens)\n\n```typescript\nimport jwt from 'jsonwebtoken';\n\nconst JWT_SECRET = process.env.JWT_SECRET!;\nconst JWT_EXPIRES_IN = '15m';\nconst REFRESH_TOKEN_EXPIRES_IN = '7d';\n\n// Generate tokens\nfunction generateTokens(userId: string) {\n  const accessToken = jwt.sign(\n    { userId, type: 'access' },\n    JWT_SECRET,\n    { expiresIn: JWT_EXPIRES_IN }\n  );\n\n  const refreshToken = jwt.sign(\n    { userId, type: 'refresh' },\n    JWT_SECRET,\n    { expiresIn: REFRESH_TOKEN_EXPIRES_IN }\n  );\n\n  return { accessToken, refreshToken };\n}\n\n// Verify token\nfunction verifyToken(token: string): JwtPayload {\n  return jwt.verify(token, JWT_SECRET) as JwtPayload;\n}\n\n// Refresh token endpoint\napp.post('/auth/refresh', async (req, res) => {\n  const { refreshToken } = req.body;\n\n  try {\n    const payload = verifyToken(refreshToken);\n\n    if (payload.type !== 'refresh') {\n      throw new Error('Invalid token type');\n    }\n\n    // Check if refresh token is still valid in database\n    const storedToken = await getStoredRefreshToken(refreshToken);\n    if (!storedToken || storedToken.revoked) {\n      throw new Error('Token revoked');\n    }\n\n    // Generate new tokens\n    const tokens = generateTokens(payload.userId);\n\n    // Revoke old refresh token\n    await revokeRefreshToken(refreshToken);\n\n    // Store new refresh token\n    await storeRefreshToken(tokens.refreshToken, payload.userId);\n\n    res.json(tokens);\n  } catch (error) {\n    res.status(401).json({ error: 'Invalid refresh token' });\n  }\n});\n```\n\n### API Keys\n\n```typescript\n// Generate API key\nfunction generateApiKey(): string {\n  return `sk_${crypto.randomBytes(32).toString('hex')}`;\n}\n\n// Hash API key for storage\nfunction hashApiKey(key: string): string {\n  return crypto.createHash('sha256').update(key).digest('hex');\n}\n\n// Validate API key\nasync function validateApiKey(key: string) {\n  const hash = hashApiKey(key);\n  const apiKey = await prisma.apiKey.findUnique({\n    where: { hash },\n    include: { user: true },\n  });\n\n  if (!apiKey || apiKey.revoked || apiKey.expiresAt < new Date()) {\n    return null;\n  }\n\n  // Update last used\n  await prisma.apiKey.update({\n    where: { id: apiKey.id },\n    data: { lastUsedAt: new Date() },\n  });\n\n  return apiKey;\n}\n\n// API key middleware\nasync function authenticateApiKey(req: Request, res: Response, next: NextFunction) {\n  const key = req.headers['x-api-key'] as string;\n\n  if (!key) {\n    return res.status(401).json({ error: 'API key required' });\n  }\n\n  const apiKey = await validateApiKey(key);\n\n  if (!apiKey) {\n    return res.status(401).json({ error: 'Invalid API key' });\n  }\n\n  req.user = apiKey.user;\n  req.apiKey = apiKey;\n  next();\n}\n```\n\n### OAuth2\n\n```typescript\nimport passport from 'passport';\nimport { Strategy as GoogleStrategy } from 'passport-google-oauth20';\n\npassport.use(new GoogleStrategy({\n  clientID: process.env.GOOGLE_CLIENT_ID!,\n  clientSecret: process.env.GOOGLE_CLIENT_SECRET!,\n  callbackURL: '/auth/google/callback',\n}, async (accessToken, refreshToken, profile, done) => {\n  try {\n    // Find or create user\n    let user = await prisma.user.findUnique({\n      where: { googleId: profile.id },\n    });\n\n    if (!user) {\n      user = await prisma.user.create({\n        data: {\n          googleId: profile.id,\n          email: profile.emails?.[0].value,\n          name: profile.displayName,\n        },\n      });\n    }\n\n    done(null, user);\n  } catch (error) {\n    done(error);\n  }\n}));\n\n// Routes\napp.get('/auth/google',\n  passport.authenticate('google', { scope: ['profile', 'email'] })\n);\n\napp.get('/auth/google/callback',\n  passport.authenticate('google', { session: false }),\n  (req, res) => {\n    const tokens = generateTokens(req.user.id);\n    res.redirect(`/auth/callback?token=${tokens.accessToken}`);\n  }\n);\n```\n\n## Authorization Patterns\n\n### Role-Based Access Control (RBAC)\n\n```typescript\n// Define roles and permissions\nconst PERMISSIONS = {\n  admin: ['read', 'write', 'delete', 'manage-users'],\n  editor: ['read', 'write'],\n  viewer: ['read'],\n} as const;\n\ntype Role = keyof typeof PERMISSIONS;\ntype Permission = (typeof PERMISSIONS)[Role][number];\n\n// Check permission middleware\nfunction requirePermission(permission: Permission) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const userRole = req.user?.role as Role;\n\n    if (!userRole || !PERMISSIONS[userRole]?.includes(permission)) {\n      return res.status(403).json({ error: 'Insufficient permissions' });\n    }\n\n    next();\n  };\n}\n\n// Usage\napp.delete('/users/:id',\n  authenticate,\n  requirePermission('delete'),\n  userController.delete\n);\n```\n\n### Attribute-Based Access Control (ABAC)\n\n```typescript\n// Policy definition\ninterface Policy {\n  action: string;\n  resource: string;\n  condition: (user: User, resource: any) => boolean;\n}\n\nconst policies: Policy[] = [\n  {\n    action: 'update',\n    resource: 'post',\n    condition: (user, post) => post.authorId === user.id || user.role === 'admin',\n  },\n  {\n    action: 'delete',\n    resource: 'post',\n    condition: (user, post) => post.authorId === user.id || user.role === 'admin',\n  },\n];\n\n// Check policy\nfunction can(user: User, action: string, resource: string, resourceData?: any): boolean {\n  const policy = policies.find(p => p.action === action && p.resource === resource);\n\n  if (!policy) {\n    return false;\n  }\n\n  return policy.condition(user, resourceData);\n}\n\n// Middleware\nfunction authorize(action: string, resource: string, getResource: (req: Request) => Promise<any>) {\n  return async (req: Request, res: Response, next: NextFunction) => {\n    const resourceData = await getResource(req);\n\n    if (!can(req.user, action, resource, resourceData)) {\n      return res.status(403).json({ error: 'Access denied' });\n    }\n\n    req.resource = resourceData;\n    next();\n  };\n}\n\n// Usage\napp.put('/posts/:id',\n  authenticate,\n  authorize('update', 'post', (req) => prisma.post.findUnique({ where: { id: req.params.id } })),\n  postController.update\n);\n```\n\n### Resource Ownership\n\n```typescript\n// Check ownership middleware\nasync function checkOwnership(req: Request, res: Response, next: NextFunction) {\n  const resource = await prisma.post.findUnique({\n    where: { id: req.params.id },\n  });\n\n  if (!resource) {\n    return res.status(404).json({ error: 'Resource not found' });\n  }\n\n  // Allow if owner or admin\n  if (resource.userId !== req.user.id && req.user.role !== 'admin') {\n    return res.status(403).json({ error: 'Access denied' });\n  }\n\n  req.resource = resource;\n  next();\n}\n```\n\n## Security Best Practices\n\n### Password Hashing\n\n```typescript\nimport bcrypt from 'bcrypt';\n\nconst SALT_ROUNDS = 12;\n\nasync function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, SALT_ROUNDS);\n}\n\nasync function verifyPassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n```\n\n### Secure Headers\n\n```typescript\nimport helmet from 'helmet';\n\napp.use(helmet());\napp.use(helmet.contentSecurityPolicy({\n  directives: {\n    defaultSrc: [\"'self'\"],\n    styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n    scriptSrc: [\"'self'\"],\n    imgSrc: [\"'self'\", 'data:', 'https:'],\n  },\n}));\n```\n\n### CORS Configuration\n\n```typescript\nimport cors from 'cors';\n\napp.use(cors({\n  origin: process.env.ALLOWED_ORIGINS?.split(',') || 'http://localhost:3000',\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'X-API-Key'],\n}));\n```\n\n### Rate Limiting by User\n\n```typescript\nimport rateLimit from 'express-rate-limit';\n\nconst authLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 5, // 5 attempts\n  message: { error: 'Too many login attempts' },\n  keyGenerator: (req) => req.body.email || req.ip,\n});\n\napp.post('/auth/login', authLimiter, authController.login);\n```\n\n## Session Management\n\n```typescript\n// Secure session configuration\nimport session from 'express-session';\nimport RedisStore from 'connect-redis';\n\napp.use(session({\n  store: new RedisStore({ client: redisClient }),\n  secret: process.env.SESSION_SECRET!,\n  resave: false,\n  saveUninitialized: false,\n  cookie: {\n    secure: process.env.NODE_ENV === 'production',\n    httpOnly: true,\n    maxAge: 24 * 60 * 60 * 1000, // 24 hours\n    sameSite: 'strict',\n  },\n}));\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- All backend stack skills\n",
        "plugins/aai-dev-backend/skills/error-handling/SKILL.md": "---\nname: error-handling\ndescription: Patterns for consistent error handling in backend applications\nuser-invocable: false\n---\n\n# Error Handling Skill\n\nPatterns for implementing robust error handling in backend applications.\n\n## Error Class Hierarchy\n\n```typescript\n// Base application error\nclass AppError extends Error {\n  constructor(\n    public statusCode: number,\n    public message: string,\n    public code: string,\n    public isOperational = true,\n    public details?: Record<string, any>\n  ) {\n    super(message);\n    this.name = this.constructor.name;\n    Error.captureStackTrace(this, this.constructor);\n  }\n\n  toJSON() {\n    return {\n      error: {\n        code: this.code,\n        message: this.message,\n        ...(this.details && { details: this.details }),\n      },\n    };\n  }\n}\n\n// Specific error types\nclass ValidationError extends AppError {\n  constructor(details: Record<string, string[]>) {\n    super(400, 'Validation failed', 'VALIDATION_ERROR', true, details);\n  }\n}\n\nclass NotFoundError extends AppError {\n  constructor(resource: string, id?: string) {\n    const message = id ? `${resource} with id '${id}' not found` : `${resource} not found`;\n    super(404, message, 'NOT_FOUND', true);\n  }\n}\n\nclass UnauthorizedError extends AppError {\n  constructor(message = 'Authentication required') {\n    super(401, message, 'UNAUTHORIZED', true);\n  }\n}\n\nclass ForbiddenError extends AppError {\n  constructor(message = 'Access denied') {\n    super(403, message, 'FORBIDDEN', true);\n  }\n}\n\nclass ConflictError extends AppError {\n  constructor(message: string) {\n    super(409, message, 'CONFLICT', true);\n  }\n}\n\nclass RateLimitError extends AppError {\n  constructor(retryAfter: number) {\n    super(429, 'Too many requests', 'RATE_LIMIT_EXCEEDED', true, { retryAfter });\n  }\n}\n\nclass InternalError extends AppError {\n  constructor(message = 'Internal server error') {\n    super(500, message, 'INTERNAL_ERROR', false);\n  }\n}\n```\n\n## Error Handler Middleware\n\n```typescript\nimport { Request, Response, NextFunction } from 'express';\nimport { logger } from '../utils/logger';\n\ninterface ErrorResponse {\n  error: {\n    code: string;\n    message: string;\n    details?: Record<string, any>;\n    requestId?: string;\n  };\n}\n\nfunction errorHandler(\n  err: Error,\n  req: Request,\n  res: Response<ErrorResponse>,\n  next: NextFunction\n) {\n  // Generate request ID for tracking\n  const requestId = req.headers['x-request-id'] || generateRequestId();\n\n  // Log error\n  if (err instanceof AppError && err.isOperational) {\n    logger.warn({\n      type: 'operational_error',\n      requestId,\n      code: err.code,\n      message: err.message,\n      statusCode: err.statusCode,\n      path: req.path,\n      method: req.method,\n    });\n  } else {\n    logger.error({\n      type: 'unexpected_error',\n      requestId,\n      message: err.message,\n      stack: err.stack,\n      path: req.path,\n      method: req.method,\n    });\n  }\n\n  // Send response\n  if (err instanceof AppError) {\n    return res.status(err.statusCode).json({\n      ...err.toJSON(),\n      error: {\n        ...err.toJSON().error,\n        requestId,\n      },\n    });\n  }\n\n  // Handle known library errors\n  if (err.name === 'JsonWebTokenError') {\n    return res.status(401).json({\n      error: {\n        code: 'INVALID_TOKEN',\n        message: 'Invalid authentication token',\n        requestId,\n      },\n    });\n  }\n\n  if (err.name === 'TokenExpiredError') {\n    return res.status(401).json({\n      error: {\n        code: 'TOKEN_EXPIRED',\n        message: 'Authentication token has expired',\n        requestId,\n      },\n    });\n  }\n\n  // Prisma errors\n  if (err.name === 'PrismaClientKnownRequestError') {\n    const prismaError = err as any;\n\n    if (prismaError.code === 'P2002') {\n      return res.status(409).json({\n        error: {\n          code: 'DUPLICATE_ENTRY',\n          message: 'A record with this value already exists',\n          requestId,\n        },\n      });\n    }\n\n    if (prismaError.code === 'P2025') {\n      return res.status(404).json({\n        error: {\n          code: 'NOT_FOUND',\n          message: 'Record not found',\n          requestId,\n        },\n      });\n    }\n  }\n\n  // Generic error (don't expose details in production)\n  res.status(500).json({\n    error: {\n      code: 'INTERNAL_ERROR',\n      message: process.env.NODE_ENV === 'production'\n        ? 'An unexpected error occurred'\n        : err.message,\n      requestId,\n    },\n  });\n}\n\nexport { errorHandler };\n```\n\n## Async Handler Wrapper\n\n```typescript\n// Wrap async route handlers to catch errors\nfunction asyncHandler(\n  fn: (req: Request, res: Response, next: NextFunction) => Promise<any>\n) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    Promise.resolve(fn(req, res, next)).catch(next);\n  };\n}\n\n// Usage\napp.get('/users/:id', asyncHandler(async (req, res) => {\n  const user = await userService.findById(req.params.id);\n\n  if (!user) {\n    throw new NotFoundError('User', req.params.id);\n  }\n\n  res.json({ data: user });\n}));\n```\n\n## Validation Error Handling\n\n```typescript\nimport { z } from 'zod';\n\nfunction validateRequest(schema: z.ZodSchema) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    try {\n      req.body = schema.parse(req.body);\n      next();\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        const details: Record<string, string[]> = {};\n\n        error.errors.forEach((err) => {\n          const path = err.path.join('.');\n          if (!details[path]) {\n            details[path] = [];\n          }\n          details[path].push(err.message);\n        });\n\n        throw new ValidationError(details);\n      }\n      next(error);\n    }\n  };\n}\n```\n\n## Error Response Format\n\n```typescript\n// Standard error response\ninterface ErrorResponse {\n  error: {\n    code: string;        // Machine-readable error code\n    message: string;     // Human-readable message\n    details?: {          // Optional validation details\n      [field: string]: string[];\n    };\n    requestId?: string;  // For support/debugging\n  };\n}\n\n// Examples\n// 400 Bad Request\n{\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Validation failed\",\n    \"details\": {\n      \"email\": [\"Invalid email format\"],\n      \"password\": [\"Must be at least 8 characters\"]\n    },\n    \"requestId\": \"req_abc123\"\n  }\n}\n\n// 404 Not Found\n{\n  \"error\": {\n    \"code\": \"NOT_FOUND\",\n    \"message\": \"User with id 'xyz' not found\",\n    \"requestId\": \"req_abc123\"\n  }\n}\n\n// 401 Unauthorized\n{\n  \"error\": {\n    \"code\": \"UNAUTHORIZED\",\n    \"message\": \"Authentication required\",\n    \"requestId\": \"req_abc123\"\n  }\n}\n```\n\n## Logging Best Practices\n\n```typescript\nimport pino from 'pino';\n\nconst logger = pino({\n  level: process.env.LOG_LEVEL || 'info',\n  transport: process.env.NODE_ENV === 'development'\n    ? { target: 'pino-pretty' }\n    : undefined,\n});\n\n// Request logging middleware\nfunction requestLogger(req: Request, res: Response, next: NextFunction) {\n  const start = Date.now();\n  const requestId = req.headers['x-request-id'] || generateRequestId();\n\n  req.requestId = requestId;\n  res.setHeader('X-Request-ID', requestId);\n\n  res.on('finish', () => {\n    const duration = Date.now() - start;\n\n    logger.info({\n      type: 'http_request',\n      requestId,\n      method: req.method,\n      path: req.path,\n      statusCode: res.statusCode,\n      duration,\n      userAgent: req.headers['user-agent'],\n      userId: req.user?.id,\n    });\n  });\n\n  next();\n}\n```\n\n## Graceful Shutdown\n\n```typescript\nfunction setupGracefulShutdown(server: http.Server) {\n  const shutdown = async (signal: string) => {\n    logger.info({ type: 'shutdown', signal }, 'Received shutdown signal');\n\n    // Stop accepting new connections\n    server.close(() => {\n      logger.info('HTTP server closed');\n    });\n\n    // Close database connections\n    await prisma.$disconnect();\n    logger.info('Database connections closed');\n\n    // Close Redis\n    await redisClient.quit();\n    logger.info('Redis connection closed');\n\n    process.exit(0);\n  };\n\n  process.on('SIGTERM', () => shutdown('SIGTERM'));\n  process.on('SIGINT', () => shutdown('SIGINT'));\n\n  // Handle uncaught exceptions\n  process.on('uncaughtException', (error) => {\n    logger.fatal({ type: 'uncaught_exception', error }, 'Uncaught exception');\n    process.exit(1);\n  });\n\n  // Handle unhandled promise rejections\n  process.on('unhandledRejection', (reason) => {\n    logger.fatal({ type: 'unhandled_rejection', reason }, 'Unhandled rejection');\n    process.exit(1);\n  });\n}\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- All backend stack skills\n",
        "plugins/aai-dev-backend/skills/middleware-patterns/SKILL.md": "---\nname: middleware-patterns\ndescription: Patterns for designing and implementing Express middleware\nuser-invocable: false\n---\n\n# Middleware Patterns Skill\n\nPatterns for designing reusable middleware in Express applications.\n\n## Middleware Basics\n\n```typescript\nimport { Request, Response, NextFunction } from 'express';\n\n// Basic middleware signature\ntype Middleware = (req: Request, res: Response, next: NextFunction) => void | Promise<void>;\n\n// Middleware types\n// 1. Application-level: app.use(middleware)\n// 2. Router-level: router.use(middleware)\n// 3. Route-level: app.get('/path', middleware, handler)\n// 4. Error-handling: (err, req, res, next) => {}\n```\n\n## Common Middleware Patterns\n\n### Request Logging\n\n```typescript\nfunction requestLogger(options: { level?: string } = {}) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const start = Date.now();\n\n    res.on('finish', () => {\n      const duration = Date.now() - start;\n      logger.log({\n        level: options.level || 'info',\n        method: req.method,\n        path: req.path,\n        statusCode: res.statusCode,\n        duration: `${duration}ms`,\n        userAgent: req.get('user-agent'),\n      });\n    });\n\n    next();\n  };\n}\n\napp.use(requestLogger());\n```\n\n### Request ID\n\n```typescript\nimport { v4 as uuid } from 'uuid';\n\nfunction requestId() {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const id = req.headers['x-request-id'] as string || uuid();\n    req.id = id;\n    res.setHeader('X-Request-ID', id);\n    next();\n  };\n}\n\n// Extend Request type\ndeclare global {\n  namespace Express {\n    interface Request {\n      id: string;\n    }\n  }\n}\n```\n\n### Response Time\n\n```typescript\nfunction responseTime() {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const start = process.hrtime();\n\n    res.on('finish', () => {\n      const [seconds, nanoseconds] = process.hrtime(start);\n      const ms = seconds * 1000 + nanoseconds / 1000000;\n      res.setHeader('X-Response-Time', `${ms.toFixed(2)}ms`);\n    });\n\n    next();\n  };\n}\n```\n\n### Validation Middleware\n\n```typescript\nimport { z } from 'zod';\n\ninterface ValidationSchemas {\n  body?: z.ZodSchema;\n  query?: z.ZodSchema;\n  params?: z.ZodSchema;\n}\n\nfunction validate(schemas: ValidationSchemas) {\n  return async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      if (schemas.body) {\n        req.body = await schemas.body.parseAsync(req.body);\n      }\n      if (schemas.query) {\n        req.query = await schemas.query.parseAsync(req.query);\n      }\n      if (schemas.params) {\n        req.params = await schemas.params.parseAsync(req.params);\n      }\n      next();\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({\n          error: {\n            code: 'VALIDATION_ERROR',\n            message: 'Validation failed',\n            details: error.errors.map(e => ({\n              path: e.path.join('.'),\n              message: e.message,\n            })),\n          },\n        });\n      }\n      next(error);\n    }\n  };\n}\n\n// Usage\nconst createUserSchema = z.object({\n  email: z.string().email(),\n  name: z.string().min(1),\n});\n\napp.post('/users',\n  validate({ body: createUserSchema }),\n  userController.create\n);\n```\n\n### Authentication\n\n```typescript\ninterface AuthOptions {\n  required?: boolean;\n  roles?: string[];\n}\n\nfunction authenticate(options: AuthOptions = { required: true }) {\n  return async (req: Request, res: Response, next: NextFunction) => {\n    const token = req.headers.authorization?.replace('Bearer ', '');\n\n    if (!token) {\n      if (options.required) {\n        return res.status(401).json({\n          error: { code: 'UNAUTHORIZED', message: 'Authentication required' },\n        });\n      }\n      return next();\n    }\n\n    try {\n      const payload = verifyToken(token);\n      const user = await userService.findById(payload.userId);\n\n      if (!user) {\n        return res.status(401).json({\n          error: { code: 'UNAUTHORIZED', message: 'User not found' },\n        });\n      }\n\n      // Check roles if specified\n      if (options.roles && !options.roles.includes(user.role)) {\n        return res.status(403).json({\n          error: { code: 'FORBIDDEN', message: 'Insufficient permissions' },\n        });\n      }\n\n      req.user = user;\n      next();\n    } catch (error) {\n      res.status(401).json({\n        error: { code: 'UNAUTHORIZED', message: 'Invalid token' },\n      });\n    }\n  };\n}\n\n// Usage\napp.get('/profile', authenticate(), profileController.get);\napp.get('/admin', authenticate({ roles: ['admin'] }), adminController.dashboard);\n```\n\n### Rate Limiting\n\n```typescript\ninterface RateLimitOptions {\n  windowMs: number;\n  max: number;\n  keyGenerator?: (req: Request) => string;\n  message?: string;\n}\n\nfunction rateLimit(options: RateLimitOptions) {\n  const requests = new Map<string, { count: number; resetTime: number }>();\n\n  return (req: Request, res: Response, next: NextFunction) => {\n    const key = options.keyGenerator?.(req) || req.ip;\n    const now = Date.now();\n\n    const record = requests.get(key);\n\n    if (!record || now > record.resetTime) {\n      requests.set(key, { count: 1, resetTime: now + options.windowMs });\n      return next();\n    }\n\n    if (record.count >= options.max) {\n      const retryAfter = Math.ceil((record.resetTime - now) / 1000);\n      res.setHeader('Retry-After', retryAfter);\n      return res.status(429).json({\n        error: {\n          code: 'RATE_LIMIT_EXCEEDED',\n          message: options.message || 'Too many requests',\n          retryAfter,\n        },\n      });\n    }\n\n    record.count++;\n    next();\n  };\n}\n```\n\n### Caching\n\n```typescript\ninterface CacheOptions {\n  ttl: number;\n  key?: (req: Request) => string;\n}\n\nfunction cache(options: CacheOptions) {\n  return async (req: Request, res: Response, next: NextFunction) => {\n    // Only cache GET requests\n    if (req.method !== 'GET') {\n      return next();\n    }\n\n    const key = options.key?.(req) || `cache:${req.originalUrl}`;\n\n    try {\n      const cached = await redis.get(key);\n      if (cached) {\n        res.setHeader('X-Cache', 'HIT');\n        return res.json(JSON.parse(cached));\n      }\n\n      // Store original json method\n      const originalJson = res.json.bind(res);\n\n      // Override json to cache response\n      res.json = (body: any) => {\n        redis.setex(key, options.ttl, JSON.stringify(body));\n        res.setHeader('X-Cache', 'MISS');\n        return originalJson(body);\n      };\n\n      next();\n    } catch (error) {\n      next(); // Fail open - continue without cache\n    }\n  };\n}\n\n// Usage\napp.get('/products', cache({ ttl: 300 }), productController.list);\n```\n\n### Request Timeout\n\n```typescript\nfunction timeout(ms: number) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const timer = setTimeout(() => {\n      if (!res.headersSent) {\n        res.status(503).json({\n          error: { code: 'TIMEOUT', message: 'Request timeout' },\n        });\n      }\n    }, ms);\n\n    res.on('finish', () => clearTimeout(timer));\n    next();\n  };\n}\n\napp.use(timeout(30000)); // 30 second timeout\n```\n\n## Middleware Organization\n\n```typescript\n// middleware/index.ts\nexport { requestId } from './requestId';\nexport { requestLogger } from './requestLogger';\nexport { authenticate } from './authenticate';\nexport { validate } from './validate';\nexport { rateLimit } from './rateLimit';\nexport { errorHandler } from './errorHandler';\n\n// app.ts\nimport * as middleware from './middleware';\n\n// Order matters!\napp.use(middleware.requestId());\napp.use(middleware.requestLogger());\napp.use(helmet());\napp.use(cors());\napp.use(express.json());\n\n// Routes\napp.use('/api', apiRouter);\n\n// Error handler last\napp.use(middleware.errorHandler());\n```\n\n## Conditional Middleware\n\n```typescript\nfunction conditionalMiddleware(\n  condition: (req: Request) => boolean,\n  middleware: Middleware\n) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    if (condition(req)) {\n      return middleware(req, res, next);\n    }\n    next();\n  };\n}\n\n// Only authenticate API routes\napp.use(conditionalMiddleware(\n  (req) => req.path.startsWith('/api'),\n  authenticate()\n));\n```\n\n## Composing Middleware\n\n```typescript\nfunction compose(...middlewares: Middleware[]) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const dispatch = (index: number): void => {\n      if (index >= middlewares.length) {\n        return next();\n      }\n\n      const middleware = middlewares[index];\n      middleware(req, res, (err?: any) => {\n        if (err) return next(err);\n        dispatch(index + 1);\n      });\n    };\n\n    dispatch(0);\n  };\n}\n\n// Usage\nconst secureRoute = compose(\n  authenticate(),\n  rateLimit({ windowMs: 60000, max: 10 }),\n  validate({ body: schema })\n);\n\napp.post('/sensitive', secureRoute, handler);\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- Express/Node.js stack skills\n",
        "plugins/aai-dev-database/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-dev-database\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Database development agent - technology-agnostic schema design, queries, migrations, and data modeling. Auto-detects ORM and database type.\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"homepage\": \"https://github.com/the-answerai/alphaagent-team#readme\",\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"database\", \"schema\", \"migrations\", \"development\", \"stack-detection\"]\n}\n",
        "plugins/aai-dev-database/agents/database-developer.md": "---\nname: database-developer\ndescription: Expert database developer specializing in schema design, query optimization, and data modeling. Use for database architecture, migrations, performance tuning, and data layer best practices.\nmodel: sonnet\ntools: Read, Write, Edit, Glob, Grep, Bash\nskills:\n  - schema-design\n  - query-optimization\n  - migration-patterns\n  - data-modeling\n---\n\n# Database Developer Agent\n\nYou are an expert database developer with deep expertise in relational databases, query optimization, and data modeling. You design efficient, scalable, and maintainable data layers.\n\n## Critical: Technology Detection\n\n**BEFORE writing any database code, you MUST detect the project's technology stack:**\n\n1. Check for ORM/Query Builder:\n   - `prisma/schema.prisma`  Prisma\n   - `src/entities/*.ts` with `@Entity()` decorators  TypeORM\n   - `drizzle.config.ts` or `drizzle/` directory  Drizzle\n   - `knexfile.js` or `knexfile.ts`  Knex.js\n   - `sequelize.config.js` or models with `sequelize.define`  Sequelize\n   - No ORM  Raw SQL with database driver\n\n2. Check for Database:\n   - `.env` with `DATABASE_URL` containing `postgresql://`  PostgreSQL\n   - `.env` with `DATABASE_URL` containing `mysql://`  MySQL\n   - `*.db` files or `sqlite` in connection string  SQLite\n   - `mongodb://` in connection string  MongoDB\n\n3. Use the detected technology's patterns exclusively. **Never mix patterns from different ORMs.**\n\n## Core Expertise\n\n### Database Fundamentals (Technology-Agnostic)\n- **Normalization**: 1NF through BCNF, when to denormalize for performance\n- **Indexing**: B-trees, hash indexes, composite indexes, partial indexes\n- **Transactions**: ACID properties, isolation levels, deadlock prevention\n- **Scaling**: Sharding strategies, replication, connection pooling\n- **Data Types**: Choosing appropriate types for storage efficiency\n\n### Design Principles\n- **Single Source of Truth**: Avoid data duplication across tables\n- **Referential Integrity**: Always define foreign key constraints\n- **Audit Trails**: Consider `createdAt`, `updatedAt`, `deletedAt` (soft deletes)\n- **UUID vs Auto-increment**: UUIDs for distributed systems, auto-increment for simplicity\n\n## Working Approach\n\n### 1. Understand Data Requirements\n- Identify all entities and their attributes\n- Map relationships (1:1, 1:N, M:N)\n- Document query patterns and access patterns\n- Note scalability and performance requirements\n- Consider data integrity constraints\n\n### 2. Detect Project Technology\n```\nRead package.json for database dependencies\nCheck for ORM config files (prisma/schema.prisma, drizzle.config.ts, etc.)\nIdentify existing patterns in the codebase\n```\n\n### 3. Design Schema\n- Model entities with appropriate data types\n- Define relationships with proper constraints\n- Plan indexes based on query patterns\n- Consider future extensibility without over-engineering\n\n### 4. Implement Using Project's ORM/Database\n- Follow the detected ORM's conventions and best practices\n- Use the project's existing patterns for consistency\n- Reference the appropriate stack skill for implementation details\n\n### 5. Ensure Quality\n- Write reversible migration scripts\n- Add indexes for frequently queried columns\n- Test query performance with realistic data volumes\n- Document schema decisions in code comments or ADRs\n\n## Index Strategy Guidelines\n\n### When to Create Indexes\n- Primary keys (automatic)\n- Foreign keys (always index manually if ORM doesn't)\n- Columns in WHERE clauses\n- Columns in ORDER BY clauses\n- Columns in JOIN conditions\n\n### When NOT to Index\n- Low-cardinality columns (boolean, status with few values)\n- Tables with heavy write operations and few reads\n- Small tables (< 1000 rows)\n\n### Composite Index Rules\n- Order columns by selectivity (most selective first)\n- Consider query patterns - index supports leftmost prefix queries only\n\n## Query Optimization Guidelines\n\n### Avoid N+1 Queries\n- Use eager loading / includes when fetching related data\n- Batch queries when possible\n- Consider denormalization for read-heavy access patterns\n\n### Pagination\n- Cursor-based pagination for large datasets (more efficient)\n- Offset pagination for small datasets or when random access needed\n\n### Transactions\n- Keep transactions short\n- Avoid user interaction within transactions\n- Use appropriate isolation levels\n\n## Migration Best Practices\n\n### Safe Migrations\n- Always make migrations reversible\n- Separate data migrations from schema migrations\n- Test migrations on production-like data volumes\n- Never drop columns/tables without deprecation period\n\n### Deployment Strategy\n- Add new columns as nullable first\n- Backfill data in separate migration\n- Add NOT NULL constraint after backfill\n- Remove old columns only after code no longer references them\n\n## Code Quality Standards\n\n### Naming Conventions\n- Tables: `snake_case`, plural (e.g., `user_profiles`)\n- Columns: `snake_case` (e.g., `created_at`)\n- Foreign keys: `<singular_table>_id` (e.g., `user_id`)\n- Indexes: `idx_<table>_<columns>` (e.g., `idx_users_email`)\n\n### Data Types\n- Use appropriate precision for numbers\n- Use TEXT for unbounded strings, VARCHAR(n) for bounded\n- Use TIMESTAMP WITH TIME ZONE for timestamps\n- Use UUID for distributed-safe identifiers\n\n### Security\n- Parameterized queries always (ORMs handle this)\n- Encrypt sensitive data at rest\n- Implement row-level security where needed\n- Audit logging for sensitive operations\n\n## Communication Style\n\n- Explain schema design decisions and tradeoffs\n- Document relationship choices and constraints\n- Point out performance considerations\n- Recommend indexing strategies based on query patterns\n- Reference the project's ORM documentation when relevant\n\n## Integration\n\nWorks with skills:\n- `schema-design` - Database modeling patterns\n- `query-optimization` - Performance tuning techniques\n- `migration-patterns` - Safe migration practices\n- `data-modeling` - Entity relationship design\n\nTechnology-specific skills (load based on detection):\n- `prisma-*` skills for Prisma projects\n- `typeorm-*` skills for TypeORM projects\n- `postgres-*` skills for PostgreSQL\n- `sqlite-*` skills for SQLite\n- `mongodb-*` skills for MongoDB\n\nCoordinates with:\n- `backend-developer` - ORM integration, service layer\n- `frontend-developer` - API data requirements\n- `devops-engineer` - Database deployment, backups, scaling\n",
        "plugins/aai-dev-database/skills/data-modeling/SKILL.md": "---\nname: data-modeling\ndescription: Patterns for entity relationship design and data modeling\nuser-invocable: false\n---\n\n# Data Modeling Skill\n\nPatterns for designing effective data models.\n\n## Entity-Relationship Design\n\n### Identifying Entities\n\n```\nQuestions to ask:\n1. What are the core \"things\" in the system?\n2. What data needs to be persisted?\n3. What has its own identity/lifecycle?\n\nExamples:\n- User (has identity, persisted)\n- Order (has identity, persisted)\n- Session token (temporary, maybe not entity)\n```\n\n### Defining Relationships\n\n```prisma\n// One-to-One: Each user has exactly one profile\nmodel User {\n  profile Profile?\n}\nmodel Profile {\n  userId String @unique\n  user   User   @relation(fields: [userId], references: [id])\n}\n\n// One-to-Many: User has many posts\nmodel User {\n  posts Post[]\n}\nmodel Post {\n  authorId String\n  author   User   @relation(fields: [authorId], references: [id])\n}\n\n// Many-to-Many: Posts have many tags, tags have many posts\nmodel Post {\n  tags Tag[]\n}\nmodel Tag {\n  posts Post[]\n}\n```\n\n### Cardinality Decisions\n\n| Relationship | When to Use | Example |\n|--------------|-------------|---------|\n| 1:1 | Optional extension data | User -> Profile |\n| 1:N | Parent owns children | Order -> OrderItems |\n| M:N | Independent association | Post <-> Tag |\n\n## Common Domain Models\n\n### User/Auth Model\n\n```prisma\nmodel User {\n  id            String    @id @default(uuid())\n  email         String    @unique\n  passwordHash  String\n  emailVerified Boolean   @default(false)\n\n  // Profile data\n  name          String?\n  avatarUrl     String?\n\n  // Auth\n  sessions      Session[]\n  apiKeys       ApiKey[]\n\n  // Audit\n  createdAt     DateTime  @default(now())\n  updatedAt     DateTime  @updatedAt\n  lastLoginAt   DateTime?\n}\n\nmodel Session {\n  id        String   @id @default(uuid())\n  userId    String\n  token     String   @unique\n  expiresAt DateTime\n  userAgent String?\n  ipAddress String?\n\n  user User @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  @@index([userId])\n  @@index([token])\n}\n```\n\n### E-Commerce Model\n\n```prisma\nmodel Product {\n  id          String   @id @default(uuid())\n  name        String\n  description String   @db.Text\n  price       Decimal  @db.Decimal(10, 2)\n  sku         String   @unique\n\n  categoryId  String\n  category    Category @relation(fields: [categoryId], references: [id])\n\n  orderItems  OrderItem[]\n  inventory   Inventory?\n\n  createdAt   DateTime @default(now())\n  updatedAt   DateTime @updatedAt\n}\n\nmodel Order {\n  id         String      @id @default(uuid())\n  status     OrderStatus @default(PENDING)\n  total      Decimal     @db.Decimal(10, 2)\n\n  userId     String\n  user       User        @relation(fields: [userId], references: [id])\n\n  items      OrderItem[]\n  payments   Payment[]\n  shipments  Shipment[]\n\n  createdAt  DateTime    @default(now())\n  updatedAt  DateTime    @updatedAt\n}\n\nmodel OrderItem {\n  id        String  @id @default(uuid())\n  quantity  Int\n  unitPrice Decimal @db.Decimal(10, 2)\n\n  orderId   String\n  order     Order   @relation(fields: [orderId], references: [id])\n\n  productId String\n  product   Product @relation(fields: [productId], references: [id])\n\n  @@unique([orderId, productId])\n}\n```\n\n### Content/CMS Model\n\n```prisma\nmodel Post {\n  id          String    @id @default(uuid())\n  slug        String    @unique\n  title       String\n  content     String    @db.Text\n  excerpt     String?\n  published   Boolean   @default(false)\n  publishedAt DateTime?\n\n  authorId    String\n  author      User      @relation(fields: [authorId], references: [id])\n\n  categoryId  String?\n  category    Category? @relation(fields: [categoryId], references: [id])\n\n  tags        Tag[]\n  comments    Comment[]\n\n  createdAt   DateTime  @default(now())\n  updatedAt   DateTime  @updatedAt\n\n  @@index([authorId])\n  @@index([published, publishedAt])\n}\n\nmodel Comment {\n  id        String   @id @default(uuid())\n  content   String   @db.Text\n  approved  Boolean  @default(false)\n\n  postId    String\n  post      Post     @relation(fields: [postId], references: [id])\n\n  authorId  String\n  author    User     @relation(fields: [authorId], references: [id])\n\n  // Self-referential for replies\n  parentId  String?\n  parent    Comment? @relation(\"CommentReplies\", fields: [parentId], references: [id])\n  replies   Comment[] @relation(\"CommentReplies\")\n\n  createdAt DateTime @default(now())\n}\n```\n\n## Design Patterns\n\n### Polymorphic Associations\n\n```prisma\n// Activity feed for different entity types\nmodel Activity {\n  id         String   @id @default(uuid())\n  action     String   // \"created\", \"updated\", \"deleted\"\n  targetType String   // \"Post\", \"Comment\", \"User\"\n  targetId   String\n\n  userId     String\n  user       User     @relation(fields: [userId], references: [id])\n\n  metadata   Json?    // Flexible extra data\n\n  createdAt  DateTime @default(now())\n\n  @@index([targetType, targetId])\n  @@index([userId])\n}\n```\n\n### Event Sourcing\n\n```prisma\nmodel Event {\n  id          String   @id @default(uuid())\n  aggregateId String\n  type        String\n  version     Int\n  data        Json\n  metadata    Json?\n\n  createdAt   DateTime @default(now())\n\n  @@unique([aggregateId, version])\n  @@index([aggregateId])\n  @@index([type])\n}\n\n// Rebuild state from events\nasync function getOrderState(orderId: string) {\n  const events = await prisma.event.findMany({\n    where: { aggregateId: orderId },\n    orderBy: { version: 'asc' },\n  });\n\n  return events.reduce((state, event) => {\n    switch (event.type) {\n      case 'OrderCreated':\n        return { ...event.data, items: [] };\n      case 'ItemAdded':\n        return { ...state, items: [...state.items, event.data] };\n      case 'OrderCompleted':\n        return { ...state, status: 'completed' };\n      default:\n        return state;\n    }\n  }, {} as Order);\n}\n```\n\n### Audit Trail\n\n```prisma\nmodel AuditLog {\n  id         String   @id @default(uuid())\n  tableName  String\n  recordId   String\n  action     String   // INSERT, UPDATE, DELETE\n  oldData    Json?\n  newData    Json?\n\n  userId     String?\n  user       User?    @relation(fields: [userId], references: [id])\n\n  ipAddress  String?\n  userAgent  String?\n\n  createdAt  DateTime @default(now())\n\n  @@index([tableName, recordId])\n  @@index([userId])\n  @@index([createdAt])\n}\n```\n\n### Temporal Data (Slowly Changing Dimensions)\n\n```prisma\n// Type 2: Keep history\nmodel PriceHistory {\n  id        String   @id @default(uuid())\n  productId String\n  price     Decimal  @db.Decimal(10, 2)\n  validFrom DateTime @default(now())\n  validTo   DateTime?\n\n  product   Product  @relation(fields: [productId], references: [id])\n\n  @@index([productId, validFrom])\n}\n\n// Get current price\nasync function getCurrentPrice(productId: string) {\n  return prisma.priceHistory.findFirst({\n    where: {\n      productId,\n      validFrom: { lte: new Date() },\n      OR: [\n        { validTo: null },\n        { validTo: { gt: new Date() } },\n      ],\n    },\n    orderBy: { validFrom: 'desc' },\n  });\n}\n```\n\n## Anti-Patterns to Avoid\n\n### God Tables\n\n```prisma\n// Bad: One table for everything\nmodel Entity {\n  id   String @id\n  type String\n  data Json   // Untyped, unindexed mess\n}\n\n// Good: Specific models\nmodel User { ... }\nmodel Post { ... }\nmodel Order { ... }\n```\n\n### Too Much Normalization\n\n```prisma\n// Bad: Over-normalized address\nmodel Street { ... }\nmodel City { ... }\nmodel State { ... }\nmodel Country { ... }\n\n// Good: Denormalized where appropriate\nmodel Address {\n  id      String @id\n  line1   String\n  line2   String?\n  city    String\n  state   String\n  country String\n  postal  String\n}\n```\n\n### Missing Constraints\n\n```prisma\n// Bad: No constraints\nmodel OrderItem {\n  id        String @id\n  orderId   String\n  productId String\n  quantity  Int    // Can be negative?\n}\n\n// Good: Proper constraints\nmodel OrderItem {\n  id        String @id\n  orderId   String\n  productId String\n  quantity  Int    // Add check constraint in SQL\n\n  @@unique([orderId, productId]) // Prevent duplicates\n}\n```\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- All database and ORM stack skills\n",
        "plugins/aai-dev-database/skills/migration-patterns/SKILL.md": "---\nname: migration-patterns\ndescription: Patterns for safe database migrations in production environments\nuser-invocable: false\n---\n\n# Migration Patterns Skill\n\nPatterns for safe, reversible database migrations.\n\n## Migration Principles\n\n1. **Always reversible**: Every migration should have a down/rollback\n2. **Atomic changes**: One logical change per migration\n3. **Non-blocking**: Avoid long locks on production tables\n4. **Tested**: Run on production-like data before deploying\n5. **Versioned**: Track all migrations in source control\n\n## Prisma Migrations\n\n### Basic Workflow\n\n```bash\n# Create migration from schema changes\nnpx prisma migrate dev --name add_user_role\n\n# Apply migrations in production\nnpx prisma migrate deploy\n\n# Reset database (development only!)\nnpx prisma migrate reset\n```\n\n### Migration File Structure\n\n```\nprisma/\n schema.prisma\n migrations/\n     20240101000000_init/\n        migration.sql\n     20240102000000_add_user_role/\n        migration.sql\n     migration_lock.toml\n```\n\n## Safe Migration Patterns\n\n### Adding Columns\n\n```sql\n-- Safe: Add nullable column\nALTER TABLE users ADD COLUMN phone VARCHAR(20);\n\n-- Safe: Add column with default\nALTER TABLE users ADD COLUMN role VARCHAR(20) DEFAULT 'user';\n\n-- Then backfill if needed\nUPDATE users SET role = 'admin' WHERE is_admin = true;\n```\n\n### Removing Columns\n\n```sql\n-- Step 1: Stop reading the column in code\n-- Step 2: Stop writing to the column\n-- Step 3: Deploy code changes\n-- Step 4: Drop the column\n\nALTER TABLE users DROP COLUMN legacy_field;\n```\n\n### Renaming Columns\n\n```sql\n-- Step 1: Add new column\nALTER TABLE users ADD COLUMN full_name VARCHAR(255);\n\n-- Step 2: Backfill data\nUPDATE users SET full_name = name;\n\n-- Step 3: Update code to read/write both\n-- Step 4: Deploy and verify\n-- Step 5: Drop old column\nALTER TABLE users DROP COLUMN name;\n```\n\n### Adding NOT NULL Constraint\n\n```sql\n-- Step 1: Add nullable column\nALTER TABLE users ADD COLUMN email VARCHAR(255);\n\n-- Step 2: Backfill existing rows\nUPDATE users SET email = 'unknown@example.com' WHERE email IS NULL;\n\n-- Step 3: Add constraint\nALTER TABLE users ALTER COLUMN email SET NOT NULL;\n```\n\n### Adding Foreign Keys\n\n```sql\n-- Step 1: Add column without constraint\nALTER TABLE posts ADD COLUMN author_id UUID;\n\n-- Step 2: Backfill data\nUPDATE posts SET author_id = (SELECT id FROM users WHERE users.name = posts.author_name);\n\n-- Step 3: Add foreign key (with NOT VALID for large tables)\nALTER TABLE posts\nADD CONSTRAINT fk_posts_author\nFOREIGN KEY (author_id) REFERENCES users(id)\nNOT VALID;\n\n-- Step 4: Validate in background\nALTER TABLE posts VALIDATE CONSTRAINT fk_posts_author;\n```\n\n### Adding Indexes\n\n```sql\n-- CONCURRENTLY prevents table lock (PostgreSQL)\nCREATE INDEX CONCURRENTLY idx_users_email ON users(email);\n\n-- For large tables, do this during low traffic\n-- Index creation can take time but won't block reads/writes\n```\n\n### Removing Indexes\n\n```sql\n-- Always CONCURRENTLY in production\nDROP INDEX CONCURRENTLY idx_old_index;\n```\n\n## Large Table Migrations\n\n### Batched Updates\n\n```typescript\nasync function backfillInBatches(batchSize = 1000) {\n  let lastId = '';\n  let updated = 0;\n\n  while (true) {\n    const result = await prisma.$executeRaw`\n      UPDATE users\n      SET status = 'active'\n      WHERE id > ${lastId}\n        AND status IS NULL\n      ORDER BY id\n      LIMIT ${batchSize}\n      RETURNING id\n    `;\n\n    if (result === 0) break;\n\n    updated += result;\n    console.log(`Updated ${updated} rows`);\n\n    // Get last ID for next batch\n    const lastRow = await prisma.user.findFirst({\n      where: { status: 'active' },\n      orderBy: { id: 'desc' },\n    });\n    lastId = lastRow?.id || '';\n\n    // Small delay to reduce load\n    await sleep(100);\n  }\n}\n```\n\n### Online Schema Changes (pt-online-schema-change)\n\n```bash\n# For MySQL large table changes\npt-online-schema-change \\\n  --alter \"ADD COLUMN new_field VARCHAR(255)\" \\\n  --execute \\\n  D=mydb,t=users\n```\n\n## Data Migrations\n\n### Separate from Schema Migrations\n\n```typescript\n// migrations/20240101_add_user_status.sql\nALTER TABLE users ADD COLUMN status VARCHAR(20);\n\n// data_migrations/20240101_backfill_user_status.ts\nasync function up() {\n  await prisma.user.updateMany({\n    where: { status: null },\n    data: { status: 'active' },\n  });\n}\n\nasync function down() {\n  // Usually no-op or set back to null\n}\n```\n\n### Idempotent Migrations\n\n```sql\n-- Check before inserting\nINSERT INTO settings (key, value)\nSELECT 'feature_flag', 'enabled'\nWHERE NOT EXISTS (\n  SELECT 1 FROM settings WHERE key = 'feature_flag'\n);\n\n-- Use upsert\nINSERT INTO settings (key, value)\nVALUES ('feature_flag', 'enabled')\nON CONFLICT (key) DO UPDATE SET value = EXCLUDED.value;\n```\n\n## Rollback Strategies\n\n### Automatic Rollbacks\n\n```typescript\n// Transaction-based rollback\nasync function migrate() {\n  await prisma.$transaction(async (tx) => {\n    await tx.$executeRaw`ALTER TABLE users ADD COLUMN temp VARCHAR(20)`;\n    await tx.$executeRaw`UPDATE users SET temp = 'value'`;\n    // If anything fails, entire transaction rolls back\n  });\n}\n```\n\n### Manual Rollback Scripts\n\n```sql\n-- migrations/20240101_add_feature/up.sql\nALTER TABLE users ADD COLUMN feature_enabled BOOLEAN DEFAULT false;\n\n-- migrations/20240101_add_feature/down.sql\nALTER TABLE users DROP COLUMN feature_enabled;\n```\n\n## Migration Testing\n\n### Test with Production Data\n\n```bash\n# 1. Create sanitized copy of production\npg_dump production_db | pg_restore -d test_db\n\n# 2. Run migration\nnpx prisma migrate deploy\n\n# 3. Verify\npsql test_db -c \"SELECT COUNT(*) FROM users\"\n```\n\n### Migration Dry Run\n\n```bash\n# Prisma: Create migration without applying\nnpx prisma migrate dev --create-only\n\n# Review generated SQL before applying\ncat prisma/migrations/*/migration.sql\n```\n\n## Deployment Checklist\n\n- [ ] Migration tested on production-like data\n- [ ] Rollback script exists and tested\n- [ ] No long-running locks (use CONCURRENTLY)\n- [ ] Backup taken before migration\n- [ ] Monitoring in place for errors\n- [ ] Low-traffic window for major changes\n- [ ] Code deployed before/after as needed\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- Prisma/TypeORM stack skills\n",
        "plugins/aai-dev-database/skills/query-optimization/SKILL.md": "---\nname: query-optimization\ndescription: Patterns for optimizing database query performance\nuser-invocable: false\n---\n\n# Query Optimization Skill\n\nPatterns for improving database query performance.\n\n## Understanding Query Performance\n\n### EXPLAIN ANALYZE\n\n```sql\n-- PostgreSQL\nEXPLAIN ANALYZE\nSELECT u.*, COUNT(p.id) as post_count\nFROM users u\nLEFT JOIN posts p ON p.author_id = u.id\nWHERE u.role = 'ADMIN'\nGROUP BY u.id;\n\n-- Key metrics to watch:\n-- - Seq Scan vs Index Scan\n-- - Actual rows vs Estimated rows\n-- - Sort operations\n-- - Nested loops vs Hash joins\n```\n\n### Query Plan Reading\n\n```\nSeq Scan         -- Full table scan (often bad)\nIndex Scan       -- Using index (good)\nIndex Only Scan  -- All data from index (best)\nBitmap Scan      -- Multiple index matches\nHash Join        -- Good for large joins\nNested Loop      -- Good for small inner table\nSort             -- May use disk if large\n```\n\n## Indexing Strategies\n\n### When to Index\n\n```sql\n-- Index: Foreign keys (always)\nCREATE INDEX idx_posts_author_id ON posts(author_id);\n\n-- Index: Frequently filtered columns\nCREATE INDEX idx_users_role ON users(role);\n\n-- Index: Columns in ORDER BY\nCREATE INDEX idx_posts_created_at ON posts(created_at DESC);\n\n-- Index: Columns in JOIN conditions\nCREATE INDEX idx_comments_post_id ON comments(post_id);\n```\n\n### Composite Indexes\n\n```sql\n-- Order matters! Most selective first\nCREATE INDEX idx_posts_status_date\nON posts(published, published_at DESC);\n\n-- Covers queries like:\nSELECT * FROM posts WHERE published = true ORDER BY published_at DESC;\nSELECT * FROM posts WHERE published = true AND published_at > '2024-01-01';\n\n-- Does NOT help:\nSELECT * FROM posts WHERE published_at > '2024-01-01'; -- Needs leading column\n```\n\n### Partial Indexes\n\n```sql\n-- Only index active records\nCREATE INDEX idx_active_users_email\nON users(email)\nWHERE deleted_at IS NULL;\n\n-- Only index specific values\nCREATE INDEX idx_pending_orders\nON orders(created_at)\nWHERE status = 'pending';\n```\n\n### Covering Indexes\n\n```sql\n-- Include all needed columns to avoid table lookup\nCREATE INDEX idx_users_covering\nON users(email) INCLUDE (name, role);\n\n-- Query can be satisfied entirely from index:\nSELECT email, name, role FROM users WHERE email = 'test@example.com';\n```\n\n## Query Patterns\n\n### Avoid N+1 Queries\n\n```typescript\n// Bad: N+1 queries\nconst users = await prisma.user.findMany();\nfor (const user of users) {\n  user.posts = await prisma.post.findMany({\n    where: { authorId: user.id },\n  });\n}\n\n// Good: Eager loading\nconst users = await prisma.user.findMany({\n  include: { posts: true },\n});\n\n// Good: Separate batch query\nconst users = await prisma.user.findMany();\nconst posts = await prisma.post.findMany({\n  where: { authorId: { in: users.map(u => u.id) } },\n});\n```\n\n### Efficient Pagination\n\n```typescript\n// Offset pagination (slow for large offsets)\nconst users = await prisma.user.findMany({\n  skip: 10000,\n  take: 20,\n  orderBy: { createdAt: 'desc' },\n});\n\n// Cursor pagination (consistent performance)\nconst users = await prisma.user.findMany({\n  take: 20,\n  cursor: { id: lastUserId },\n  orderBy: { createdAt: 'desc' },\n});\n\n// Keyset pagination (fastest for sorted data)\nconst users = await prisma.user.findMany({\n  where: {\n    createdAt: { lt: lastCreatedAt },\n  },\n  take: 20,\n  orderBy: { createdAt: 'desc' },\n});\n```\n\n### Selective Field Loading\n\n```typescript\n// Bad: Load everything\nconst users = await prisma.user.findMany();\n\n// Good: Only needed fields\nconst users = await prisma.user.findMany({\n  select: {\n    id: true,\n    name: true,\n    email: true,\n  },\n});\n```\n\n### Bulk Operations\n\n```typescript\n// Bad: Individual inserts\nfor (const item of items) {\n  await prisma.item.create({ data: item });\n}\n\n// Good: Batch insert\nawait prisma.item.createMany({\n  data: items,\n  skipDuplicates: true,\n});\n\n// Good: Batch update\nawait prisma.item.updateMany({\n  where: { status: 'pending' },\n  data: { status: 'processed' },\n});\n```\n\n## Common Optimizations\n\n### Avoid SELECT *\n\n```sql\n-- Bad\nSELECT * FROM users WHERE id = 1;\n\n-- Good\nSELECT id, name, email FROM users WHERE id = 1;\n```\n\n### Use EXISTS vs IN\n\n```sql\n-- IN (loads all values into memory)\nSELECT * FROM users\nWHERE id IN (SELECT author_id FROM posts WHERE published = true);\n\n-- EXISTS (stops at first match)\nSELECT * FROM users u\nWHERE EXISTS (SELECT 1 FROM posts p WHERE p.author_id = u.id AND p.published = true);\n```\n\n### Optimize OR Conditions\n\n```sql\n-- Bad (may not use index)\nSELECT * FROM users WHERE email = 'a@b.com' OR name = 'John';\n\n-- Better (union uses indexes)\nSELECT * FROM users WHERE email = 'a@b.com'\nUNION\nSELECT * FROM users WHERE name = 'John';\n```\n\n### Use Appropriate JOINs\n\n```sql\n-- INNER JOIN: Only matching rows (most selective)\nSELECT u.*, p.title\nFROM users u\nINNER JOIN posts p ON p.author_id = u.id;\n\n-- LEFT JOIN: All from left, matching from right\nSELECT u.*, p.title\nFROM users u\nLEFT JOIN posts p ON p.author_id = u.id;\n\n-- Avoid: Cartesian products\nSELECT * FROM users, posts; -- Bad!\n```\n\n## Caching Strategies\n\n### Query Result Caching\n\n```typescript\nasync function getPopularPosts(): Promise<Post[]> {\n  const cacheKey = 'popular-posts';\n  const cached = await redis.get(cacheKey);\n\n  if (cached) {\n    return JSON.parse(cached);\n  }\n\n  const posts = await prisma.post.findMany({\n    where: { published: true },\n    orderBy: { viewCount: 'desc' },\n    take: 10,\n  });\n\n  await redis.setex(cacheKey, 300, JSON.stringify(posts)); // 5 min TTL\n  return posts;\n}\n```\n\n### Materialized Views\n\n```sql\n-- Create materialized view for expensive aggregations\nCREATE MATERIALIZED VIEW post_stats AS\nSELECT\n  author_id,\n  COUNT(*) as post_count,\n  SUM(view_count) as total_views,\n  MAX(published_at) as last_published\nFROM posts\nWHERE published = true\nGROUP BY author_id;\n\n-- Refresh periodically\nREFRESH MATERIALIZED VIEW post_stats;\n\n-- Or refresh concurrently (no lock)\nREFRESH MATERIALIZED VIEW CONCURRENTLY post_stats;\n```\n\n## Monitoring Queries\n\n### Slow Query Log\n\n```sql\n-- PostgreSQL: Enable slow query logging\nALTER SYSTEM SET log_min_duration_statement = 1000; -- Log queries > 1s\n\n-- View slow queries\nSELECT query, calls, mean_time, total_time\nFROM pg_stat_statements\nORDER BY mean_time DESC\nLIMIT 10;\n```\n\n### Connection Pooling\n\n```typescript\n// Prisma with connection pool\ndatasource db {\n  provider = \"postgresql\"\n  url      = env(\"DATABASE_URL\")\n  // Pool settings\n  connectionLimit = 10\n}\n\n// Or external pooler (PgBouncer)\nDATABASE_URL=\"postgres://user:pass@pgbouncer:6432/db?pgbouncer=true\"\n```\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- All database stack skills\n",
        "plugins/aai-dev-database/skills/schema-design/SKILL.md": "---\nname: schema-design\ndescription: Patterns for designing database schemas with proper normalization and relationships\nuser-invocable: false\n---\n\n# Schema Design Skill\n\nPatterns for designing effective database schemas.\n\n## Core Principles\n\n### 1. Choose Appropriate Primary Keys\n\n```sql\n-- UUID (recommended for distributed systems)\nCREATE TABLE users (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  ...\n);\n\n-- ULID (sortable, URL-safe)\nCREATE TABLE posts (\n  id CHAR(26) PRIMARY KEY,\n  ...\n);\n\n-- Auto-increment (simple, sequential)\nCREATE TABLE logs (\n  id SERIAL PRIMARY KEY,\n  ...\n);\n```\n\n### 2. Define Clear Relationships\n\n```prisma\n// One-to-One\nmodel User {\n  id      String   @id @default(uuid())\n  profile Profile?\n}\n\nmodel Profile {\n  id     String @id @default(uuid())\n  userId String @unique\n  user   User   @relation(fields: [userId], references: [id])\n}\n\n// One-to-Many\nmodel User {\n  id    String @id @default(uuid())\n  posts Post[]\n}\n\nmodel Post {\n  id       String @id @default(uuid())\n  authorId String\n  author   User   @relation(fields: [authorId], references: [id])\n}\n\n// Many-to-Many\nmodel Post {\n  id   String @id @default(uuid())\n  tags Tag[]\n}\n\nmodel Tag {\n  id    String @id @default(uuid())\n  posts Post[]\n}\n\n// Explicit join table (when you need extra fields)\nmodel PostTag {\n  postId    String\n  tagId     String\n  createdAt DateTime @default(now())\n\n  post Post @relation(fields: [postId], references: [id])\n  tag  Tag  @relation(fields: [tagId], references: [id])\n\n  @@id([postId, tagId])\n}\n```\n\n### 3. Use Appropriate Data Types\n\n```sql\n-- Text\nVARCHAR(255)  -- Names, emails, short text\nTEXT          -- Long content, descriptions\nCHAR(2)       -- Country codes, fixed-length\n\n-- Numbers\nINTEGER       -- Counts, IDs\nBIGINT        -- Large numbers, timestamps\nDECIMAL(10,2) -- Money, precise decimals\nREAL/FLOAT    -- Scientific (avoid for money!)\n\n-- Date/Time\nTIMESTAMP     -- Date + time with timezone\nDATE          -- Date only\nINTERVAL      -- Time periods\n\n-- Binary\nBYTEA         -- Binary data, files\nUUID          -- Universally unique identifiers\n\n-- JSON\nJSONB         -- Flexible data, preferences\n```\n\n### 4. Add Standard Fields\n\n```prisma\nmodel BaseEntity {\n  // Primary key\n  id        String   @id @default(uuid())\n\n  // Timestamps\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  // Soft delete\n  deletedAt DateTime?\n\n  // Audit (optional)\n  createdBy String?\n  updatedBy String?\n}\n```\n\n## Normalization\n\n### First Normal Form (1NF)\n- No repeating groups\n- Atomic values in each column\n\n```sql\n-- Bad: Multiple values in one column\nCREATE TABLE users (\n  id INT,\n  phone_numbers VARCHAR(255) -- \"123-456, 789-012\"\n);\n\n-- Good: Separate table\nCREATE TABLE users (\n  id INT PRIMARY KEY\n);\n\nCREATE TABLE user_phones (\n  id INT PRIMARY KEY,\n  user_id INT REFERENCES users(id),\n  phone_number VARCHAR(20)\n);\n```\n\n### Second Normal Form (2NF)\n- Must be in 1NF\n- No partial dependencies on composite keys\n\n```sql\n-- Bad: Partial dependency\nCREATE TABLE order_items (\n  order_id INT,\n  product_id INT,\n  product_name VARCHAR(255), -- Depends only on product_id\n  quantity INT,\n  PRIMARY KEY (order_id, product_id)\n);\n\n-- Good: Separate tables\nCREATE TABLE products (\n  id INT PRIMARY KEY,\n  name VARCHAR(255)\n);\n\nCREATE TABLE order_items (\n  order_id INT,\n  product_id INT REFERENCES products(id),\n  quantity INT,\n  PRIMARY KEY (order_id, product_id)\n);\n```\n\n### Third Normal Form (3NF)\n- Must be in 2NF\n- No transitive dependencies\n\n```sql\n-- Bad: Transitive dependency\nCREATE TABLE employees (\n  id INT PRIMARY KEY,\n  department_id INT,\n  department_name VARCHAR(255) -- Depends on department_id, not employee\n);\n\n-- Good: Separate tables\nCREATE TABLE departments (\n  id INT PRIMARY KEY,\n  name VARCHAR(255)\n);\n\nCREATE TABLE employees (\n  id INT PRIMARY KEY,\n  department_id INT REFERENCES departments(id)\n);\n```\n\n### When to Denormalize\n\n- **Read-heavy workloads**: Cache computed values\n- **Reporting**: Pre-aggregate data\n- **Performance**: Avoid expensive joins\n- **Audit trails**: Snapshot data at point in time\n\n```sql\n-- Denormalized for performance\nCREATE TABLE orders (\n  id INT PRIMARY KEY,\n  user_id INT,\n  -- Snapshot at order time\n  user_email VARCHAR(255),\n  user_name VARCHAR(255),\n  -- Cached totals\n  item_count INT,\n  total_amount DECIMAL(10,2)\n);\n```\n\n## Common Patterns\n\n### Polymorphic Relations\n\n```prisma\n// Option 1: Separate tables\nmodel Comment {\n  id        String @id @default(uuid())\n  content   String\n  postId    String?\n  articleId String?\n\n  post    Post?    @relation(fields: [postId], references: [id])\n  article Article? @relation(fields: [articleId], references: [id])\n}\n\n// Option 2: Type column + ID\nmodel Comment {\n  id            String @id @default(uuid())\n  content       String\n  targetType    String // \"post\" | \"article\"\n  targetId      String\n\n  @@index([targetType, targetId])\n}\n```\n\n### Self-Referential Relations\n\n```prisma\n// Hierarchical data (categories, org chart)\nmodel Category {\n  id       String     @id @default(uuid())\n  name     String\n  parentId String?\n  parent   Category?  @relation(\"CategoryHierarchy\", fields: [parentId], references: [id])\n  children Category[] @relation(\"CategoryHierarchy\")\n}\n\n// User relationships (followers)\nmodel User {\n  id        String @id @default(uuid())\n  following Follow[] @relation(\"Following\")\n  followers Follow[] @relation(\"Followers\")\n}\n\nmodel Follow {\n  followerId  String\n  followingId String\n  createdAt   DateTime @default(now())\n\n  follower  User @relation(\"Following\", fields: [followerId], references: [id])\n  following User @relation(\"Followers\", fields: [followingId], references: [id])\n\n  @@id([followerId, followingId])\n}\n```\n\n### Enums vs Lookup Tables\n\n```prisma\n// Enum (fixed, small set)\nenum Role {\n  USER\n  ADMIN\n  MODERATOR\n}\n\nmodel User {\n  role Role @default(USER)\n}\n\n// Lookup table (dynamic, many values)\nmodel Status {\n  id   Int    @id @default(autoincrement())\n  name String @unique\n  orders Order[]\n}\n\nmodel Order {\n  statusId Int\n  status   Status @relation(fields: [statusId], references: [id])\n}\n```\n\n## Multi-Tenant Patterns\n\n### Column-Based Isolation\n\n```prisma\nmodel Tenant {\n  id   String @id @default(uuid())\n  name String\n}\n\nmodel User {\n  id       String @id @default(uuid())\n  tenantId String\n\n  tenant Tenant @relation(fields: [tenantId], references: [id])\n\n  @@index([tenantId])\n}\n\n// Always filter by tenant\nconst users = await prisma.user.findMany({\n  where: { tenantId: currentTenant.id },\n});\n```\n\n### Schema-Based Isolation\n\n```sql\n-- One schema per tenant\nCREATE SCHEMA tenant_123;\nCREATE TABLE tenant_123.users (...);\n\n-- Dynamic schema selection\nSET search_path TO tenant_123;\nSELECT * FROM users;\n```\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- Prisma/TypeORM stack skills\n",
        "plugins/aai-dev-frontend/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-dev-frontend\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Frontend development agent - technology-agnostic UI component architecture, state management, and patterns. Auto-detects project stack.\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"homepage\": \"https://github.com/the-answerai/alphaagent-team#readme\",\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"frontend\", \"ui\", \"components\", \"development\", \"stack-detection\"]\n}\n",
        "plugins/aai-dev-frontend/agents/frontend-developer.md": "---\nname: frontend-developer\ndescription: Expert frontend developer specializing in modern web frameworks and UI/UX implementation. Use for component architecture, state management, styling, and frontend best practices.\nmodel: sonnet\ntools: Read, Write, Edit, Glob, Grep, Bash\nskills:\n  - component-architecture\n  - state-management\n  - responsive-design\n  - accessibility-patterns\n---\n\n# Frontend Developer Agent\n\nYou are an expert frontend developer with deep expertise in modern web technologies, component architecture, and user experience best practices. You build maintainable, accessible, and performant user interfaces.\n\n## Critical: Technology Detection\n\n**BEFORE writing any frontend code, you MUST detect the project's technology stack:**\n\n1. Check for Framework:\n   - `react` or `react-dom` in package.json  React\n   - `vue` in package.json  Vue.js\n   - `@angular/core` in package.json  Angular\n   - `svelte` in package.json  Svelte\n   - `solid-js` in package.json  SolidJS\n   - `next` in package.json  Next.js (React-based)\n   - `nuxt` in package.json  Nuxt (Vue-based)\n\n2. Check for State Management:\n   - `@reduxjs/toolkit` or `redux`  Redux\n   - `zustand`  Zustand\n   - `jotai`  Jotai\n   - `@tanstack/react-query`  TanStack Query\n   - `pinia`  Pinia (Vue)\n   - `@ngrx/store`  NgRx (Angular)\n\n3. Check for Styling:\n   - `tailwindcss` in package.json  Tailwind CSS\n   - `@mui/material`  Material UI\n   - `@chakra-ui/react`  Chakra UI\n   - `styled-components`  Styled Components\n   - `@emotion/react`  Emotion\n   - `sass`  SCSS/Sass\n\n4. **Use the detected technology's patterns exclusively. Never mix framework patterns.**\n\n## Core Expertise\n\n### Component Design Principles (Technology-Agnostic)\n- **Composition over Inheritance**: Build complex UIs from simple, reusable pieces\n- **Single Responsibility**: Each component does one thing well\n- **Props Interface Design**: Clear, typed, well-documented props\n- **Sensible Defaults**: Components work out of the box\n\n### UI/UX Fundamentals\n- **Responsive Design**: Mobile-first, fluid layouts, breakpoints\n- **Accessibility**: WCAG 2.1 compliance, keyboard navigation, screen readers\n- **Performance**: Core Web Vitals, lazy loading, code splitting\n- **User Feedback**: Loading states, error states, success states\n\n### Architecture Patterns\n- **Container/Presenter**: Separate logic from presentation\n- **Compound Components**: Flexible, composable APIs\n- **Custom Hooks/Composables**: Extract and reuse stateful logic\n- **Render Props/Slots**: Share behavior between components\n\n## Working Approach\n\n### 1. Understand Requirements\n- Clarify user stories and acceptance criteria\n- Identify design specifications (Figma, mockups, wireframes)\n- Understand data requirements and API contracts\n- Note accessibility and performance requirements\n\n### 2. Detect Project Technology\n```\nRead package.json for framework and dependencies\nCheck for existing component patterns in src/\nIdentify styling approach from config files\nFollow established project conventions\n```\n\n### 3. Plan Component Architecture\n- Break down UI into component hierarchy\n- Identify shared/reusable components\n- Plan state management strategy\n- Consider data fetching patterns\n\n### 4. Implement Using Project's Framework\n- Follow the detected framework's conventions\n- Use the project's existing patterns for consistency\n- Reference the appropriate stack skill for implementation details\n\n### 5. Ensure Quality\n- Write unit tests for components\n- Add integration tests for user flows\n- Test accessibility with screen readers\n- Verify responsive behavior across devices\n\n## Component Design Guidelines\n\n### Props Design\n- Use descriptive prop names\n- Provide sensible defaults\n- Document prop types with TypeScript\n- Use discriminated unions for complex variants\n\n### Component Size\n- If > 200 lines, consider splitting\n- If > 5 props, consider composition\n- If complex logic, extract to hook/composable\n\n### File Organization\n```\ncomponents/\n ui/           # Generic, reusable (Button, Input, Modal)\n features/     # Feature-specific (UserProfile, ProductCard)\n layouts/      # Page layouts (Header, Sidebar, Footer)\n pages/        # Page components (if not using file-based routing)\n```\n\n## State Management Guidelines\n\n### When to Use What\n- **Local State**: UI-only concerns (open/closed, form inputs)\n- **Lifted State**: Shared between siblings, lift to common ancestor\n- **Context/Providers**: App-wide settings (theme, auth, locale)\n- **External Store**: Complex state, time-travel debugging\n- **Server State**: Data from APIs (use query libraries)\n\n### State Patterns\n- Prefer derived/computed state over synced state\n- Keep state close to where it's used\n- URL state for shareable/bookmarkable views\n- Form state often needs special handling\n\n## Data Fetching Guidelines\n\n### Patterns\n- Use dedicated query/fetch hooks (not useEffect for fetching)\n- Implement loading, error, and success states\n- Consider optimistic updates for better UX\n- Prefetch data for anticipated navigation\n\n### Caching\n- Cache server data appropriately\n- Invalidate cache on mutations\n- Consider stale-while-revalidate pattern\n\n## Accessibility Guidelines\n\n### Semantic HTML\n- Use correct heading hierarchy (h1  h2  h3)\n- Use semantic elements (nav, main, article, aside)\n- Use buttons for actions, links for navigation\n\n### Keyboard Navigation\n- All interactive elements must be focusable\n- Visible focus indicators\n- Logical tab order\n- Keyboard shortcuts for power users\n\n### Screen Readers\n- Alt text for images\n- ARIA labels where HTML semantics insufficient\n- Live regions for dynamic content\n- Form labels and error messages\n\n### Color and Contrast\n- 4.5:1 contrast ratio for normal text\n- 3:1 for large text\n- Don't rely on color alone for information\n\n## Performance Guidelines\n\n### Initial Load\n- Code split routes/pages\n- Lazy load below-the-fold content\n- Optimize images (WebP, responsive sizes)\n- Minimize JavaScript bundle size\n\n### Runtime\n- Memoize expensive computations\n- Virtualize long lists\n- Debounce/throttle expensive operations\n- Avoid layout thrashing\n\n### Metrics to Track\n- Largest Contentful Paint (LCP) < 2.5s\n- First Input Delay (FID) < 100ms\n- Cumulative Layout Shift (CLS) < 0.1\n\n## Code Quality Standards\n\n### TypeScript\n- Strict mode enabled\n- No `any` types (use `unknown` if needed)\n- Proper generics for reusable components\n- Export prop types for documentation\n\n### Testing\n- Unit tests for utility functions\n- Component tests for user interactions\n- Integration tests for user flows\n- Visual regression tests for UI\n\n### Styling\n- Consistent spacing scale\n- Design tokens for colors, typography\n- Mobile-first responsive approach\n- Avoid inline styles (except dynamic values)\n\n## Communication Style\n\n- Explain component design decisions\n- Suggest alternatives when appropriate\n- Point out potential accessibility issues\n- Recommend performance optimizations\n- Reference framework documentation when relevant\n\n## Integration\n\nWorks with skills:\n- `component-architecture` - Component design patterns\n- `state-management` - State management approaches\n- `responsive-design` - Responsive/mobile patterns\n- `accessibility-patterns` - A11y best practices\n\nTechnology-specific skills (load based on detection):\n- `react-*` skills for React projects\n- `vue-*` skills for Vue projects\n- `nextjs-*` skills for Next.js projects\n- `tailwind-*` skills for Tailwind CSS\n- `typescript-*` skills for TypeScript patterns\n\nCoordinates with:\n- `backend-developer` - API contracts, data formats\n- `database-developer` - Data modeling considerations\n- `ux-designer` - Design implementation fidelity\n",
        "plugins/aai-dev-frontend/skills/accessibility-patterns/SKILL.md": "---\nname: accessibility-patterns\ndescription: Patterns for building accessible web applications following WCAG guidelines\nuser-invocable: false\n---\n\n# Accessibility Patterns Skill\n\nPatterns for building accessible web applications that work for all users.\n\n## Core Principles (POUR)\n\n- **Perceivable**: Content can be perceived by all senses\n- **Operable**: Interface can be operated by all users\n- **Understandable**: Content and operation are clear\n- **Robust**: Works with current and future technologies\n\n## Semantic HTML\n\n### Use Appropriate Elements\n\n```html\n<!-- Bad: Div soup -->\n<div class=\"header\">\n  <div class=\"nav\">\n    <div class=\"link\">Home</div>\n  </div>\n</div>\n\n<!-- Good: Semantic elements -->\n<header>\n  <nav aria-label=\"Main navigation\">\n    <a href=\"/\">Home</a>\n  </nav>\n</header>\n```\n\n### Heading Hierarchy\n\n```html\n<!-- Maintain proper heading order -->\n<h1>Page Title</h1>\n  <h2>Section</h2>\n    <h3>Subsection</h3>\n  <h2>Another Section</h2>\n    <h3>Subsection</h3>\n\n<!-- Never skip levels -->\n<!-- Bad: h1  h3 -->\n<!-- Good: h1  h2  h3 -->\n```\n\n### Landmarks\n\n```html\n<header role=\"banner\">\n  <nav role=\"navigation\" aria-label=\"Main\">...</nav>\n</header>\n\n<main role=\"main\">\n  <article>...</article>\n  <aside role=\"complementary\">...</aside>\n</main>\n\n<footer role=\"contentinfo\">...</footer>\n```\n\n## Keyboard Navigation\n\n### Focus Management\n\n```typescript\nfunction Modal({ isOpen, onClose, children }) {\n  const modalRef = useRef<HTMLDivElement>(null);\n  const previousFocus = useRef<HTMLElement | null>(null);\n\n  useEffect(() => {\n    if (isOpen) {\n      // Store current focus\n      previousFocus.current = document.activeElement as HTMLElement;\n      // Focus modal\n      modalRef.current?.focus();\n    } else {\n      // Restore focus on close\n      previousFocus.current?.focus();\n    }\n  }, [isOpen]);\n\n  // Trap focus inside modal\n  const handleKeyDown = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      onClose();\n    }\n    if (e.key === 'Tab') {\n      // Focus trap logic\n    }\n  };\n\n  return (\n    <div\n      ref={modalRef}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      tabIndex={-1}\n      onKeyDown={handleKeyDown}\n    >\n      {children}\n    </div>\n  );\n}\n```\n\n### Skip Links\n\n```typescript\nfunction SkipLink() {\n  return (\n    <a\n      href=\"#main-content\"\n      className=\"\n        sr-only focus:not-sr-only\n        focus:absolute focus:top-4 focus:left-4\n        focus:z-50 focus:p-4\n        focus:bg-white focus:text-black\n      \"\n    >\n      Skip to main content\n    </a>\n  );\n}\n```\n\n### Focus Visible\n\n```css\n/* Custom focus styles */\n:focus-visible {\n  outline: 2px solid var(--focus-color);\n  outline-offset: 2px;\n}\n\n/* Remove default only if custom is applied */\n:focus:not(:focus-visible) {\n  outline: none;\n}\n```\n\n## ARIA Patterns\n\n### Buttons\n\n```typescript\n// Interactive element that looks like text\n<button\n  type=\"button\"\n  aria-pressed={isActive}  // Toggle button\n  aria-expanded={isOpen}   // Disclosure button\n  aria-haspopup=\"menu\"     // Menu button\n  aria-label=\"Close\"       // Icon-only button\n>\n  <CloseIcon aria-hidden=\"true\" />\n</button>\n```\n\n### Form Controls\n\n```typescript\nfunction TextField({ label, error, hint, ...props }) {\n  const id = useId();\n  const errorId = `${id}-error`;\n  const hintId = `${id}-hint`;\n\n  return (\n    <div>\n      <label htmlFor={id}>{label}</label>\n\n      {hint && (\n        <span id={hintId} className=\"text-sm text-gray-500\">\n          {hint}\n        </span>\n      )}\n\n      <input\n        id={id}\n        aria-describedby={`${hint ? hintId : ''} ${error ? errorId : ''}`}\n        aria-invalid={!!error}\n        {...props}\n      />\n\n      {error && (\n        <span id={errorId} role=\"alert\" className=\"text-red-600\">\n          {error}\n        </span>\n      )}\n    </div>\n  );\n}\n```\n\n### Live Regions\n\n```typescript\n// Announce dynamic content changes\nfunction Notification({ message }) {\n  return (\n    <div\n      role=\"status\"\n      aria-live=\"polite\"  // Waits for pause\n      aria-atomic=\"true\"  // Announces entire region\n    >\n      {message}\n    </div>\n  );\n}\n\n// For urgent messages\nfunction Alert({ message }) {\n  return (\n    <div\n      role=\"alert\"\n      aria-live=\"assertive\"  // Interrupts immediately\n    >\n      {message}\n    </div>\n  );\n}\n```\n\n### Tabs\n\n```typescript\nfunction Tabs({ tabs, activeTab, onChange }) {\n  return (\n    <div>\n      <div role=\"tablist\" aria-label=\"Content tabs\">\n        {tabs.map((tab, index) => (\n          <button\n            key={tab.id}\n            role=\"tab\"\n            id={`tab-${tab.id}`}\n            aria-selected={activeTab === tab.id}\n            aria-controls={`panel-${tab.id}`}\n            tabIndex={activeTab === tab.id ? 0 : -1}\n            onClick={() => onChange(tab.id)}\n            onKeyDown={(e) => handleArrowKeys(e, index)}\n          >\n            {tab.label}\n          </button>\n        ))}\n      </div>\n\n      {tabs.map(tab => (\n        <div\n          key={tab.id}\n          role=\"tabpanel\"\n          id={`panel-${tab.id}`}\n          aria-labelledby={`tab-${tab.id}`}\n          hidden={activeTab !== tab.id}\n          tabIndex={0}\n        >\n          {tab.content}\n        </div>\n      ))}\n    </div>\n  );\n}\n```\n\n## Color & Contrast\n\n### Minimum Contrast Ratios\n\n- **Normal text**: 4.5:1\n- **Large text (18px+ or 14px+ bold)**: 3:1\n- **UI components and graphics**: 3:1\n\n### Don't Rely on Color Alone\n\n```typescript\n// Bad: Color only indicates error\n<input className={error ? 'border-red-500' : 'border-gray-300'} />\n\n// Good: Color + icon + text\n<div>\n  <input\n    className={error ? 'border-red-500' : 'border-gray-300'}\n    aria-invalid={!!error}\n    aria-describedby={error ? 'error-message' : undefined}\n  />\n  {error && (\n    <span id=\"error-message\" className=\"text-red-600 flex items-center gap-1\">\n      <ErrorIcon aria-hidden=\"true\" />\n      {error}\n    </span>\n  )}\n</div>\n```\n\n## Images & Media\n\n### Alt Text\n\n```html\n<!-- Informative images -->\n<img src=\"chart.png\" alt=\"Sales increased 25% in Q4 2024\" />\n\n<!-- Decorative images -->\n<img src=\"decoration.png\" alt=\"\" aria-hidden=\"true\" />\n\n<!-- Complex images -->\n<figure>\n  <img src=\"diagram.png\" alt=\"System architecture diagram\" />\n  <figcaption>\n    Detailed description of the architecture...\n  </figcaption>\n</figure>\n```\n\n### Video Captions\n\n```html\n<video controls>\n  <source src=\"video.mp4\" type=\"video/mp4\" />\n  <track\n    kind=\"captions\"\n    src=\"captions.vtt\"\n    srclang=\"en\"\n    label=\"English\"\n    default\n  />\n  <track\n    kind=\"descriptions\"\n    src=\"descriptions.vtt\"\n    srclang=\"en\"\n    label=\"Audio descriptions\"\n  />\n</video>\n```\n\n## Testing Accessibility\n\n### Automated Tools\n\n```bash\n# Install axe-core for React\nnpm install @axe-core/react\n\n# Add to development\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nif (process.env.NODE_ENV !== 'production') {\n  import('@axe-core/react').then(axe => {\n    axe.default(React, ReactDOM, 1000);\n  });\n}\n```\n\n### Manual Testing Checklist\n\n- [ ] Navigate with keyboard only (Tab, Enter, Escape, Arrow keys)\n- [ ] Test with screen reader (VoiceOver, NVDA)\n- [ ] Check color contrast (WebAIM Contrast Checker)\n- [ ] Zoom to 200% - content still usable\n- [ ] Disable images - content still understandable\n- [ ] Disable CSS - content still readable\n\n## Common Mistakes\n\n1. **Missing alt text** on images\n2. **Non-focusable interactive elements** (div with onClick)\n3. **Missing form labels**\n4. **Low color contrast**\n5. **Missing skip links**\n6. **Keyboard traps** in modals\n7. **Auto-playing media** without controls\n8. **Time limits** without extensions\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- All frontend stack skills\n",
        "plugins/aai-dev-frontend/skills/component-architecture/SKILL.md": "---\nname: component-architecture\ndescription: Patterns for designing component hierarchies, composition, and reusable UI elements\nuser-invocable: false\n---\n\n# Component Architecture Skill\n\nPatterns for designing maintainable, reusable component architectures in React and modern frameworks.\n\n## Component Design Principles\n\n### Single Responsibility\nEach component should do one thing well.\n\n```typescript\n// Bad: Component does too much\nfunction UserDashboard() {\n  // Fetches data, handles auth, renders UI, manages state...\n}\n\n// Good: Separate concerns\nfunction UserDashboard() {\n  return (\n    <DashboardLayout>\n      <UserHeader />\n      <UserStats />\n      <RecentActivity />\n    </DashboardLayout>\n  );\n}\n```\n\n### Composition Over Inheritance\nBuild complex UIs by composing simple components.\n\n```typescript\n// Compound component pattern\n<Card>\n  <Card.Header>\n    <Card.Title>Settings</Card.Title>\n  </Card.Header>\n  <Card.Body>\n    <SettingsForm />\n  </Card.Body>\n  <Card.Footer>\n    <Button>Save</Button>\n  </Card.Footer>\n</Card>\n```\n\n### Props Interface Design\n\n```typescript\ninterface ButtonProps {\n  // Required props first\n  children: React.ReactNode;\n\n  // Optional with sensible defaults\n  variant?: 'primary' | 'secondary' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n\n  // Boolean props (default false)\n  isLoading?: boolean;\n  isDisabled?: boolean;\n\n  // Event handlers\n  onClick?: (event: React.MouseEvent) => void;\n\n  // Spread native props\n  ...rest: React.ButtonHTMLAttributes<HTMLButtonElement>;\n}\n```\n\n## Component Patterns\n\n### Container/Presenter Pattern\n\n**Container** (logic):\n```typescript\nfunction UserListContainer() {\n  const { data, isLoading } = useUsers();\n  const handleDelete = useDeleteUser();\n\n  return (\n    <UserList\n      users={data}\n      isLoading={isLoading}\n      onDelete={handleDelete}\n    />\n  );\n}\n```\n\n**Presenter** (UI):\n```typescript\nfunction UserList({ users, isLoading, onDelete }) {\n  if (isLoading) return <Skeleton />;\n\n  return (\n    <ul>\n      {users.map(user => (\n        <UserItem key={user.id} user={user} onDelete={onDelete} />\n      ))}\n    </ul>\n  );\n}\n```\n\n### Compound Components\n\n```typescript\nconst Card = ({ children }) => (\n  <div className=\"card\">{children}</div>\n);\n\nCard.Header = ({ children }) => (\n  <div className=\"card-header\">{children}</div>\n);\n\nCard.Body = ({ children }) => (\n  <div className=\"card-body\">{children}</div>\n);\n\nCard.Footer = ({ children }) => (\n  <div className=\"card-footer\">{children}</div>\n);\n```\n\n### Render Props\n\n```typescript\nfunction MouseTracker({ render }) {\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n\n  useEffect(() => {\n    const handleMove = (e) => setPosition({ x: e.clientX, y: e.clientY });\n    window.addEventListener('mousemove', handleMove);\n    return () => window.removeEventListener('mousemove', handleMove);\n  }, []);\n\n  return render(position);\n}\n\n// Usage\n<MouseTracker render={({ x, y }) => <Tooltip x={x} y={y} />} />\n```\n\n### Custom Hooks\n\n```typescript\nfunction useLocalStorage<T>(key: string, initialValue: T) {\n  const [value, setValue] = useState<T>(() => {\n    const stored = localStorage.getItem(key);\n    return stored ? JSON.parse(stored) : initialValue;\n  });\n\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(value));\n  }, [key, value]);\n\n  return [value, setValue] as const;\n}\n```\n\n## Component Organization\n\n### File Structure\n\n```\ncomponents/\n ui/                    # Primitive UI components\n    Button/\n       Button.tsx\n       Button.test.tsx\n       index.ts\n    Input/\n features/              # Feature-specific components\n    auth/\n       LoginForm.tsx\n       SignupForm.tsx\n    dashboard/\n layout/                # Layout components\n    Header.tsx\n    Sidebar.tsx\n    Footer.tsx\n shared/                # Shared/cross-cutting\n     ErrorBoundary.tsx\n     LoadingSpinner.tsx\n```\n\n### Naming Conventions\n\n- **Components**: PascalCase (`UserProfile.tsx`)\n- **Hooks**: camelCase with `use` prefix (`useAuth.ts`)\n- **Utilities**: camelCase (`formatDate.ts`)\n- **Constants**: SCREAMING_SNAKE_CASE (`API_ENDPOINTS.ts`)\n\n## Reusability Guidelines\n\n### When to Extract a Component\n\n1. **Used in 3+ places** - Extract to shared component\n2. **Complex logic** - Extract hook or container\n3. **Clear abstraction** - Natural boundary exists\n4. **Testing in isolation** - Easier to test separately\n\n### When NOT to Extract\n\n1. **Premature abstraction** - Used only once\n2. **Too generic** - Prop explosion, complex API\n3. **Tight coupling** - Only makes sense in context\n\n## Performance Patterns\n\n### Memoization\n\n```typescript\n// Memoize expensive components\nconst MemoizedList = React.memo(ExpensiveList);\n\n// Memoize callbacks\nconst handleClick = useCallback(() => {\n  doSomething(id);\n}, [id]);\n\n// Memoize computed values\nconst sortedItems = useMemo(() => {\n  return items.sort((a, b) => a.name.localeCompare(b.name));\n}, [items]);\n```\n\n### Code Splitting\n\n```typescript\n// Lazy load routes\nconst Dashboard = React.lazy(() => import('./Dashboard'));\n\n// Lazy load heavy components\nconst Chart = React.lazy(() => import('./Chart'));\n\n// With Suspense\n<Suspense fallback={<Skeleton />}>\n  <Chart data={data} />\n</Suspense>\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- React/Vue/Next.js stack skills\n",
        "plugins/aai-dev-frontend/skills/responsive-design/SKILL.md": "---\nname: responsive-design\ndescription: Patterns for building responsive, mobile-first user interfaces\nuser-invocable: false\n---\n\n# Responsive Design Skill\n\nPatterns for building responsive user interfaces that work across all device sizes.\n\n## Mobile-First Approach\n\nDesign for mobile first, then enhance for larger screens.\n\n```css\n/* Mobile first (default) */\n.container {\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n}\n\n/* Tablet and up */\n@media (min-width: 768px) {\n  .container {\n    padding: 2rem;\n    flex-direction: row;\n  }\n}\n\n/* Desktop and up */\n@media (min-width: 1024px) {\n  .container {\n    max-width: 1200px;\n    margin: 0 auto;\n  }\n}\n```\n\n## Breakpoint System\n\n### Standard Breakpoints\n\n```typescript\nconst breakpoints = {\n  sm: '640px',   // Small phones\n  md: '768px',   // Tablets\n  lg: '1024px',  // Small laptops\n  xl: '1280px',  // Desktops\n  '2xl': '1536px' // Large screens\n};\n```\n\n### Tailwind CSS Usage\n\n```html\n<!-- Mobile: stack, Tablet: 2 columns, Desktop: 3 columns -->\n<div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n  <Card />\n  <Card />\n  <Card />\n</div>\n\n<!-- Hide on mobile, show on tablet+ -->\n<nav class=\"hidden md:block\">\n  <DesktopNavigation />\n</nav>\n\n<!-- Show on mobile, hide on tablet+ -->\n<button class=\"md:hidden\">\n  <MenuIcon />\n</button>\n```\n\n## Responsive Patterns\n\n### Responsive Grid\n\n```typescript\n// CSS Grid with auto-fit\nfunction ResponsiveGrid({ children, minWidth = '300px' }) {\n  return (\n    <div\n      style={{\n        display: 'grid',\n        gridTemplateColumns: `repeat(auto-fit, minmax(${minWidth}, 1fr))`,\n        gap: '1rem',\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n```\n\n### Responsive Typography\n\n```css\n/* Fluid typography */\n.heading {\n  font-size: clamp(1.5rem, 4vw, 3rem);\n  line-height: 1.2;\n}\n\n/* Responsive scale */\n:root {\n  --text-base: 1rem;\n  --text-lg: 1.125rem;\n  --text-xl: 1.25rem;\n}\n\n@media (min-width: 768px) {\n  :root {\n    --text-base: 1.125rem;\n    --text-lg: 1.25rem;\n    --text-xl: 1.5rem;\n  }\n}\n```\n\n### Responsive Navigation\n\n```typescript\nfunction Navigation() {\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <nav>\n      {/* Mobile menu button */}\n      <button\n        className=\"md:hidden\"\n        onClick={() => setIsOpen(!isOpen)}\n        aria-expanded={isOpen}\n        aria-label=\"Toggle menu\"\n      >\n        {isOpen ? <CloseIcon /> : <MenuIcon />}\n      </button>\n\n      {/* Navigation links */}\n      <div className={`\n        ${isOpen ? 'block' : 'hidden'}\n        md:block\n        absolute md:relative\n        top-full left-0 right-0\n        bg-white md:bg-transparent\n      `}>\n        <NavLinks />\n      </div>\n    </nav>\n  );\n}\n```\n\n### Responsive Images\n\n```typescript\nfunction ResponsiveImage({ src, alt, sizes }) {\n  return (\n    <picture>\n      {/* WebP for modern browsers */}\n      <source\n        type=\"image/webp\"\n        srcSet={`\n          ${src}?w=400&format=webp 400w,\n          ${src}?w=800&format=webp 800w,\n          ${src}?w=1200&format=webp 1200w\n        `}\n        sizes={sizes}\n      />\n      {/* Fallback */}\n      <img\n        src={`${src}?w=800`}\n        srcSet={`\n          ${src}?w=400 400w,\n          ${src}?w=800 800w,\n          ${src}?w=1200 1200w\n        `}\n        sizes={sizes}\n        alt={alt}\n        loading=\"lazy\"\n      />\n    </picture>\n  );\n}\n\n// Usage\n<ResponsiveImage\n  src=\"/hero.jpg\"\n  alt=\"Hero image\"\n  sizes=\"(max-width: 768px) 100vw, 50vw\"\n/>\n```\n\n## Layout Patterns\n\n### Sidebar Layout\n\n```typescript\nfunction SidebarLayout({ sidebar, content }) {\n  return (\n    <div className=\"flex flex-col md:flex-row min-h-screen\">\n      {/* Sidebar: Full width on mobile, fixed width on desktop */}\n      <aside className=\"w-full md:w-64 lg:w-80 shrink-0\">\n        {sidebar}\n      </aside>\n\n      {/* Content: Takes remaining space */}\n      <main className=\"flex-1 p-4 md:p-6 lg:p-8\">\n        {content}\n      </main>\n    </div>\n  );\n}\n```\n\n### Card Grid\n\n```typescript\nfunction CardGrid({ items }) {\n  return (\n    <div className=\"\n      grid gap-4\n      grid-cols-1\n      sm:grid-cols-2\n      lg:grid-cols-3\n      xl:grid-cols-4\n    \">\n      {items.map(item => (\n        <Card key={item.id} {...item} />\n      ))}\n    </div>\n  );\n}\n```\n\n### Hero Section\n\n```typescript\nfunction Hero() {\n  return (\n    <section className=\"\n      min-h-[50vh] md:min-h-[70vh]\n      flex items-center justify-center\n      px-4 md:px-8 lg:px-16\n      text-center\n    \">\n      <div className=\"max-w-3xl\">\n        <h1 className=\"\n          text-3xl md:text-5xl lg:text-6xl\n          font-bold\n          mb-4 md:mb-6\n        \">\n          Welcome\n        </h1>\n        <p className=\"\n          text-lg md:text-xl\n          text-gray-600\n          mb-6 md:mb-8\n        \">\n          Description text\n        </p>\n        <div className=\"\n          flex flex-col sm:flex-row\n          gap-4\n          justify-center\n        \">\n          <Button size=\"lg\">Primary</Button>\n          <Button size=\"lg\" variant=\"outline\">Secondary</Button>\n        </div>\n      </div>\n    </section>\n  );\n}\n```\n\n## Responsive Hooks\n\n### useMediaQuery\n\n```typescript\nfunction useMediaQuery(query: string): boolean {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    const media = window.matchMedia(query);\n    setMatches(media.matches);\n\n    const listener = (e: MediaQueryListEvent) => setMatches(e.matches);\n    media.addEventListener('change', listener);\n    return () => media.removeEventListener('change', listener);\n  }, [query]);\n\n  return matches;\n}\n\n// Usage\nfunction Component() {\n  const isMobile = useMediaQuery('(max-width: 768px)');\n  const isDesktop = useMediaQuery('(min-width: 1024px)');\n\n  return isMobile ? <MobileView /> : <DesktopView />;\n}\n```\n\n### useBreakpoint\n\n```typescript\nfunction useBreakpoint() {\n  const isSm = useMediaQuery('(min-width: 640px)');\n  const isMd = useMediaQuery('(min-width: 768px)');\n  const isLg = useMediaQuery('(min-width: 1024px)');\n  const isXl = useMediaQuery('(min-width: 1280px)');\n\n  if (isXl) return 'xl';\n  if (isLg) return 'lg';\n  if (isMd) return 'md';\n  if (isSm) return 'sm';\n  return 'xs';\n}\n```\n\n## Touch Considerations\n\n```css\n/* Larger touch targets on mobile */\n.button {\n  min-height: 44px;\n  min-width: 44px;\n  padding: 0.75rem 1rem;\n}\n\n/* Disable hover effects on touch */\n@media (hover: none) {\n  .button:hover {\n    background-color: inherit;\n  }\n}\n\n/* Smooth scrolling */\n.scroll-container {\n  -webkit-overflow-scrolling: touch;\n  scroll-behavior: smooth;\n}\n```\n\n## Testing Responsive Designs\n\n1. **Browser DevTools**: Test all breakpoints\n2. **Real Devices**: Test on actual phones/tablets\n3. **Viewport Units**: Test with different font sizes\n4. **Orientation**: Test landscape and portrait\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- All frontend stack skills\n",
        "plugins/aai-dev-frontend/skills/state-management/SKILL.md": "---\nname: state-management\ndescription: Patterns for managing application state - local, global, server, and URL state\nuser-invocable: false\n---\n\n# State Management Skill\n\nPatterns for choosing and implementing state management strategies in frontend applications.\n\n## State Categories\n\n### 1. Local UI State\nState that only affects a single component.\n\n```typescript\n// Form input values\nconst [value, setValue] = useState('');\n\n// Toggle states\nconst [isOpen, setIsOpen] = useState(false);\n\n// Loading/error states\nconst [status, setStatus] = useState<'idle' | 'loading' | 'error'>('idle');\n```\n\n### 2. Shared UI State\nState shared between components (lift state up or use context).\n\n```typescript\n// Theme context\nconst ThemeContext = createContext<Theme>('light');\n\nfunction ThemeProvider({ children }) {\n  const [theme, setTheme] = useState<Theme>('light');\n\n  return (\n    <ThemeContext.Provider value={{ theme, setTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n```\n\n### 3. Server State\nData from external sources (use TanStack Query, SWR, or similar).\n\n```typescript\n// TanStack Query\nconst { data, isLoading, error } = useQuery({\n  queryKey: ['users'],\n  queryFn: fetchUsers,\n  staleTime: 5 * 60 * 1000, // 5 minutes\n});\n\n// Mutations\nconst mutation = useMutation({\n  mutationFn: createUser,\n  onSuccess: () => {\n    queryClient.invalidateQueries({ queryKey: ['users'] });\n  },\n});\n```\n\n### 4. URL State\nState that should be shareable/bookmarkable.\n\n```typescript\n// Next.js App Router\nimport { useSearchParams, useRouter } from 'next/navigation';\n\nfunction FilteredList() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n\n  const filter = searchParams.get('filter') || 'all';\n\n  const setFilter = (value: string) => {\n    const params = new URLSearchParams(searchParams);\n    params.set('filter', value);\n    router.push(`?${params.toString()}`);\n  };\n\n  return <Filters value={filter} onChange={setFilter} />;\n}\n```\n\n## State Management Libraries\n\n### When to Use What\n\n| Use Case | Solution |\n|----------|----------|\n| Simple local state | `useState` |\n| Complex local state | `useReducer` |\n| Cross-component state | Context API |\n| Global app state | Zustand, Redux Toolkit |\n| Server state | TanStack Query, SWR |\n| Form state | React Hook Form, Formik |\n| URL state | Router params/search params |\n\n### Zustand (Recommended for Global State)\n\n```typescript\nimport { create } from 'zustand';\n\ninterface AppState {\n  user: User | null;\n  setUser: (user: User | null) => void;\n  notifications: Notification[];\n  addNotification: (notification: Notification) => void;\n  removeNotification: (id: string) => void;\n}\n\nconst useAppStore = create<AppState>((set) => ({\n  user: null,\n  setUser: (user) => set({ user }),\n  notifications: [],\n  addNotification: (notification) =>\n    set((state) => ({\n      notifications: [...state.notifications, notification],\n    })),\n  removeNotification: (id) =>\n    set((state) => ({\n      notifications: state.notifications.filter((n) => n.id !== id),\n    })),\n}));\n```\n\n### TanStack Query (Server State)\n\n```typescript\n// Query configuration\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 60 * 1000, // 1 minute\n      gcTime: 5 * 60 * 1000, // 5 minutes\n      retry: 3,\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n\n// Custom hook for domain logic\nfunction useUsers(filters: UserFilters) {\n  return useQuery({\n    queryKey: ['users', filters],\n    queryFn: () => fetchUsers(filters),\n    select: (data) => data.users,\n  });\n}\n```\n\n## State Patterns\n\n### Derived State\nCompute values instead of storing them.\n\n```typescript\n// Bad: Synced state\nconst [items, setItems] = useState([]);\nconst [total, setTotal] = useState(0);\n\nuseEffect(() => {\n  setTotal(items.reduce((sum, item) => sum + item.price, 0));\n}, [items]);\n\n// Good: Derived state\nconst [items, setItems] = useState([]);\nconst total = useMemo(\n  () => items.reduce((sum, item) => sum + item.price, 0),\n  [items]\n);\n```\n\n### State Machines\nFor complex state transitions.\n\n```typescript\ntype Status = 'idle' | 'loading' | 'success' | 'error';\n\nfunction useAsync<T>() {\n  const [state, setState] = useState<{\n    status: Status;\n    data: T | null;\n    error: Error | null;\n  }>({\n    status: 'idle',\n    data: null,\n    error: null,\n  });\n\n  const execute = async (promise: Promise<T>) => {\n    setState({ status: 'loading', data: null, error: null });\n    try {\n      const data = await promise;\n      setState({ status: 'success', data, error: null });\n    } catch (error) {\n      setState({ status: 'error', data: null, error: error as Error });\n    }\n  };\n\n  return { ...state, execute };\n}\n```\n\n### Optimistic Updates\n\n```typescript\nconst mutation = useMutation({\n  mutationFn: updateTodo,\n  onMutate: async (newTodo) => {\n    // Cancel outgoing refetches\n    await queryClient.cancelQueries({ queryKey: ['todos'] });\n\n    // Snapshot previous value\n    const previousTodos = queryClient.getQueryData(['todos']);\n\n    // Optimistically update\n    queryClient.setQueryData(['todos'], (old) =>\n      old.map((t) => (t.id === newTodo.id ? newTodo : t))\n    );\n\n    return { previousTodos };\n  },\n  onError: (err, newTodo, context) => {\n    // Rollback on error\n    queryClient.setQueryData(['todos'], context.previousTodos);\n  },\n  onSettled: () => {\n    // Always refetch after error or success\n    queryClient.invalidateQueries({ queryKey: ['todos'] });\n  },\n});\n```\n\n## Anti-Patterns\n\n### Avoid These\n\n1. **Prop Drilling**: Use context or state management library\n2. **State Syncing**: Derive state instead of syncing\n3. **Storing Derived Data**: Compute on render\n4. **Global State for Local Concerns**: Keep state close\n5. **Mutating State Directly**: Always use setter functions\n\n## Decision Framework\n\n```\nIs the state...\n\n1. Used by only this component?\n    useState/useReducer\n\n2. Shared by a few nearby components?\n    Lift state up to common ancestor\n\n3. Used across many unrelated components?\n    Context or global store\n\n4. From an external API?\n    TanStack Query/SWR\n\n5. Should be in the URL?\n    Router state (params/search)\n\n6. Complex with many transitions?\n    State machine (XState, useReducer)\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- React/Next.js stack skills\n",
        "plugins/aai-dev-fullstack/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-dev-fullstack\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Full-stack development bundle - combines frontend, backend, and database agents\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"fullstack\", \"frontend\", \"backend\", \"database\", \"development\"]\n}\n",
        "plugins/aai-dev-fullstack/agents/fullstack-developer.md": "---\nname: fullstack-developer\ndescription: Expert fullstack developer combining frontend, backend, and database expertise. Use for end-to-end feature implementation, system architecture, and cross-layer coordination.\nmodel: sonnet\ntools: Read, Write, Edit, Glob, Grep, Bash\nskills:\n  - component-architecture\n  - state-management\n  - api-design\n  - authentication-patterns\n  - schema-design\n  - query-optimization\n  - fullstack-patterns\n---\n\n# Fullstack Developer Agent\n\nYou are an expert fullstack developer with comprehensive expertise across the entire web stack. You design and implement complete features from database to UI, ensuring cohesive architecture and seamless integration.\n\n## Critical: Technology Detection\n\n**BEFORE writing any code, you MUST detect the project's complete technology stack:**\n\n### Frontend Detection\n1. Check for Framework:\n   - `react` or `next`  React/Next.js\n   - `vue` or `nuxt`  Vue/Nuxt\n   - `@angular/core`  Angular\n   - `svelte` or `sveltekit`  Svelte/SvelteKit\n\n2. Check for Styling:\n   - `tailwindcss`  Tailwind CSS\n   - `@mui/material`  Material UI\n   - `styled-components`  Styled Components\n\n3. Check for State Management:\n   - `@tanstack/react-query`, `zustand`, `redux`, `pinia`, etc.\n\n### Backend Detection\n1. Check for Framework:\n   - `express`  Express.js\n   - `fastify`  Fastify\n   - `@nestjs/core`  NestJS\n   - `hono`  Hono\n   - Next.js/Nuxt API routes\n\n2. Check for Validation:\n   - `zod`, `joi`, `yup`, `class-validator`\n\n### Database Detection\n1. Check for ORM:\n   - `prisma`  Prisma\n   - `typeorm`  TypeORM\n   - `drizzle-orm`  Drizzle\n   - `sequelize`  Sequelize\n   - `knex`  Knex.js\n\n2. Check for Database:\n   - PostgreSQL, MySQL, SQLite, MongoDB from connection strings\n\n**Use ONLY the detected technologies. Never assume or mix patterns.**\n\n## Core Expertise\n\n### Cross-Layer Architecture (Technology-Agnostic)\n- **Data Flow**: User Action  Frontend  API  Service  Database  Response\n- **Type Safety**: Shared types/schemas across all layers\n- **Consistency**: Same naming conventions, error formats, patterns\n\n### Integration Principles\n- **API Contracts**: Frontend and backend agree on request/response shapes\n- **Error Handling**: Consistent error format from DB to UI\n- **Authentication**: Token flow from login through protected resources\n- **Real-time**: WebSocket/SSE patterns for live updates\n\n## Working Approach\n\n### 1. Understand the Full Picture\n- Clarify requirements across all layers\n- Identify data flow from UI to database and back\n- Consider authentication and authorization at each layer\n- Plan API contracts between frontend and backend\n\n### 2. Detect All Technologies\n```\nRead package.json for all dependencies\nCheck for config files (prisma/schema.prisma, tailwind.config.js, etc.)\nIdentify patterns in existing code across all layers\nDocument the complete stack before writing code\n```\n\n### 3. Design Top-Down, Implement Bottom-Up\n\n**Design Order** (User-first thinking):\n1. User interface and interactions\n2. API endpoints and contracts\n3. Business logic and services\n4. Data models and schema\n\n**Implementation Order** (Dependency-first):\n1. Database schema and migrations\n2. Backend services and APIs\n3. Frontend components and state\n4. Integration and E2E tests\n\n### 4. Maintain Cross-Layer Consistency\n\n**Naming Conventions:**\n- Database: `snake_case` (e.g., `user_profiles`)\n- Backend: `camelCase` (e.g., `userProfile`)\n- Frontend: `camelCase` (e.g., `userProfile`)\n- API: `camelCase` (e.g., `userProfile`)\n\n**Type Sharing:**\n- Define types once, share across layers\n- Consider generating types from schema (Prisma generates, OpenAPI, etc.)\n- Never duplicate type definitions manually\n\n### 5. Implement Features End-to-End\n- Start with database schema\n- Build API endpoint\n- Create frontend component\n- Wire everything together\n- Test the complete flow\n\n## Cross-Layer Patterns\n\n### Data Flow Architecture\n```\nUser Action\n    \nFrontend Component (UI state, validation)\n    \nAPI Client (HTTP request, auth headers)\n    \nBackend Route (parse request, auth check)\n    \nController (validate input, call service)\n    \nService (business logic, orchestration)\n    \nRepository/ORM (data access)\n    \nDatabase (storage, constraints)\n```\n\n### Error Handling Across Layers\n\n**Principle**: Errors should flow up with consistent format.\n\n1. **Database Layer**: Constraint violations, connection errors\n2. **Service Layer**: Business rule violations, not found\n3. **Controller Layer**: Validation errors, auth errors\n4. **API Response**: Consistent JSON format\n5. **Frontend**: Display appropriate user message\n\n**Error Format** (use across all layers):\n```json\n{\n  \"error\": {\n    \"code\": \"RESOURCE_NOT_FOUND\",\n    \"message\": \"User not found\",\n    \"details\": { \"userId\": \"123\" }\n  }\n}\n```\n\n### Authentication Flow\n\n1. **Login**: Frontend sends credentials  Backend validates  Returns tokens\n2. **Storage**: Frontend stores token securely (httpOnly cookie preferred)\n3. **Requests**: Frontend attaches token to API requests\n4. **Verification**: Backend middleware verifies token on protected routes\n5. **Refresh**: Backend refreshes token before expiry\n\n### Real-Time Updates\n\n1. **Backend**: Emit events on data changes\n2. **Transport**: WebSocket or Server-Sent Events\n3. **Frontend**: Subscribe to relevant channels\n4. **State**: Update local state/cache on events\n\n## Quality Standards\n\n### Code Organization\n- Clear separation of concerns at each layer\n- Shared types/schemas in common location\n- Consistent file/folder structure\n\n### Testing Strategy\n- **Unit tests**: Business logic, utilities, pure functions\n- **Integration tests**: API endpoints with database\n- **Component tests**: UI interactions\n- **E2E tests**: Critical user flows (login, checkout, etc.)\n\n### Performance\n- Database: Proper indexes, efficient queries\n- Backend: Connection pooling, caching, pagination\n- Frontend: Code splitting, lazy loading, memoization\n\n### Security\n- Input validation at every boundary\n- Parameterized queries (ORMs handle this)\n- Proper authentication and authorization\n- Rate limiting on sensitive endpoints\n- Security headers (CORS, CSP, etc.)\n\n## Communication Style\n\n- Explain cross-layer decisions and tradeoffs\n- Document API contracts clearly\n- Point out integration considerations\n- Consider impact on all layers when making changes\n- Recommend testing strategies for full coverage\n\n## Integration\n\nCoordinates all development skills:\n- `component-architecture` - Frontend component patterns\n- `state-management` - Frontend state patterns\n- `api-design` - API patterns\n- `authentication-patterns` - Auth implementation\n- `schema-design` - Database modeling\n- `query-optimization` - Database performance\n\nUses `fullstack-patterns` skill for:\n- End-to-end feature implementation\n- Cross-layer data flow\n- Integration patterns\n\nTechnology-specific skills (load based on detection):\n- Frontend: `react-*`, `vue-*`, `nextjs-*`, `tailwind-*`\n- Backend: `express-*`, `fastify-*`, `nestjs-*`\n- Database: `prisma-*`, `typeorm-*`, `postgres-*`, `sqlite-*`\n\nCoordinates with:\n- `frontend-developer` - When frontend needs deep expertise\n- `backend-developer` - When backend needs deep expertise\n- `database-developer` - When database needs deep expertise\n- `devops-engineer` - Deployment, infrastructure\n",
        "plugins/aai-dev-fullstack/skills/fullstack-patterns/SKILL.md": "---\nname: fullstack-patterns\ndescription: Patterns for implementing end-to-end features across frontend, backend, and database\nuser-invocable: false\n---\n\n# Fullstack Patterns Skill\n\nPatterns for building complete features across all application layers.\n\n## End-to-End Feature Implementation\n\n### Feature: User Profile Management\n\n**Step 1: Database Schema**\n\n```prisma\nmodel Profile {\n  id        String   @id @default(uuid())\n  userId    String   @unique\n  bio       String?  @db.Text\n  website   String?\n  location  String?\n  avatarUrl String?\n\n  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n}\n```\n\n**Step 2: Shared Types**\n\n```typescript\n// shared/types/profile.ts\nexport interface Profile {\n  id: string;\n  userId: string;\n  bio: string | null;\n  website: string | null;\n  location: string | null;\n  avatarUrl: string | null;\n}\n\nexport interface UpdateProfileInput {\n  bio?: string;\n  website?: string;\n  location?: string;\n}\n```\n\n**Step 3: Validation Schema**\n\n```typescript\n// shared/schemas/profile.ts\nimport { z } from 'zod';\n\nexport const updateProfileSchema = z.object({\n  bio: z.string().max(500).optional(),\n  website: z.string().url().optional().or(z.literal('')),\n  location: z.string().max(100).optional(),\n});\n\nexport type UpdateProfileInput = z.infer<typeof updateProfileSchema>;\n```\n\n**Step 4: Backend Service**\n\n```typescript\n// backend/services/profile.ts\nexport const profileService = {\n  async getByUserId(userId: string): Promise<Profile | null> {\n    return prisma.profile.findUnique({\n      where: { userId },\n    });\n  },\n\n  async upsert(userId: string, data: UpdateProfileInput): Promise<Profile> {\n    return prisma.profile.upsert({\n      where: { userId },\n      create: { userId, ...data },\n      update: data,\n    });\n  },\n};\n```\n\n**Step 5: Backend Controller**\n\n```typescript\n// backend/controllers/profile.ts\nexport const profileController = {\n  async get(req: Request, res: Response) {\n    const profile = await profileService.getByUserId(req.user.id);\n    res.json({ data: profile });\n  },\n\n  async update(req: Request, res: Response) {\n    const profile = await profileService.upsert(req.user.id, req.body);\n    res.json({ data: profile });\n  },\n};\n```\n\n**Step 6: Backend Routes**\n\n```typescript\n// backend/routes/profile.ts\nimport { Router } from 'express';\nimport { authenticate } from '../middleware/auth';\nimport { validate } from '../middleware/validate';\nimport { profileController } from '../controllers/profile';\nimport { updateProfileSchema } from '../../shared/schemas/profile';\n\nconst router = Router();\n\nrouter.get('/', authenticate, profileController.get);\nrouter.put('/', authenticate, validate(updateProfileSchema), profileController.update);\n\nexport default router;\n```\n\n**Step 7: Frontend API Client**\n\n```typescript\n// frontend/api/profile.ts\nimport { api } from './client';\nimport { Profile, UpdateProfileInput } from '@/shared/types/profile';\n\nexport const profileApi = {\n  get: () => api.get<Profile>('/profile'),\n  update: (data: UpdateProfileInput) => api.put<Profile>('/profile', data),\n};\n```\n\n**Step 8: Frontend Hooks**\n\n```typescript\n// frontend/hooks/useProfile.ts\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { profileApi } from '@/api/profile';\n\nexport function useProfile() {\n  return useQuery({\n    queryKey: ['profile'],\n    queryFn: profileApi.get,\n  });\n}\n\nexport function useUpdateProfile() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: profileApi.update,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['profile'] });\n    },\n  });\n}\n```\n\n**Step 9: Frontend Component**\n\n```typescript\n// frontend/components/ProfileForm.tsx\n'use client';\n\nimport { useProfile, useUpdateProfile } from '@/hooks/useProfile';\nimport { updateProfileSchema } from '@/shared/schemas/profile';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\n\nexport function ProfileForm() {\n  const { data: profile, isLoading } = useProfile();\n  const mutation = useUpdateProfile();\n\n  const form = useForm({\n    resolver: zodResolver(updateProfileSchema),\n    defaultValues: profile,\n  });\n\n  const onSubmit = form.handleSubmit((data) => {\n    mutation.mutate(data, {\n      onSuccess: () => toast.success('Profile updated'),\n      onError: (error) => toast.error(error.message),\n    });\n  });\n\n  if (isLoading) return <Skeleton />;\n\n  return (\n    <form onSubmit={onSubmit}>\n      <TextField label=\"Bio\" {...form.register('bio')} />\n      <TextField label=\"Website\" {...form.register('website')} />\n      <TextField label=\"Location\" {...form.register('location')} />\n      <Button type=\"submit\" isLoading={mutation.isPending}>\n        Save\n      </Button>\n    </form>\n  );\n}\n```\n\n## Cross-Layer Data Flow\n\n### Optimistic Updates\n\n```typescript\n// Frontend: Optimistic update with rollback\nconst mutation = useMutation({\n  mutationFn: updateProfile,\n  onMutate: async (newData) => {\n    await queryClient.cancelQueries({ queryKey: ['profile'] });\n    const previousData = queryClient.getQueryData(['profile']);\n    queryClient.setQueryData(['profile'], (old) => ({ ...old, ...newData }));\n    return { previousData };\n  },\n  onError: (err, newData, context) => {\n    queryClient.setQueryData(['profile'], context.previousData);\n  },\n  onSettled: () => {\n    queryClient.invalidateQueries({ queryKey: ['profile'] });\n  },\n});\n```\n\n### File Upload Flow\n\n```typescript\n// Frontend: Upload with progress\nasync function uploadAvatar(file: File) {\n  const formData = new FormData();\n  formData.append('avatar', file);\n\n  const { data } = await api.post('/profile/avatar', formData, {\n    onUploadProgress: (progress) => {\n      setUploadProgress(Math.round((progress.loaded / progress.total) * 100));\n    },\n  });\n\n  return data.url;\n}\n\n// Backend: Handle upload\nrouter.post('/avatar',\n  authenticate,\n  upload.single('avatar'),\n  async (req, res) => {\n    const url = await storageService.upload(req.file);\n    await profileService.updateAvatar(req.user.id, url);\n    res.json({ data: { url } });\n  }\n);\n```\n\n### Real-Time Sync\n\n```typescript\n// Backend: Emit on change\nasync function updateProfile(userId: string, data: UpdateProfileInput) {\n  const profile = await prisma.profile.update({\n    where: { userId },\n    data,\n  });\n\n  // Notify connected clients\n  io.to(`user:${userId}`).emit('profile:updated', profile);\n\n  return profile;\n}\n\n// Frontend: Subscribe to updates\nuseEffect(() => {\n  socket.on('profile:updated', (profile) => {\n    queryClient.setQueryData(['profile'], profile);\n  });\n\n  return () => {\n    socket.off('profile:updated');\n  };\n}, []);\n```\n\n## Testing Across Layers\n\n### Unit Tests (Service)\n\n```typescript\ndescribe('profileService', () => {\n  it('should create profile if not exists', async () => {\n    const result = await profileService.upsert('user-1', { bio: 'Hello' });\n    expect(result.bio).toBe('Hello');\n  });\n});\n```\n\n### Integration Tests (API)\n\n```typescript\ndescribe('GET /profile', () => {\n  it('should return user profile', async () => {\n    const res = await request(app)\n      .get('/profile')\n      .set('Authorization', `Bearer ${token}`);\n\n    expect(res.status).toBe(200);\n    expect(res.body.data).toHaveProperty('bio');\n  });\n});\n```\n\n### Component Tests (UI)\n\n```typescript\ndescribe('ProfileForm', () => {\n  it('should submit updated profile', async () => {\n    render(<ProfileForm />);\n\n    await userEvent.type(screen.getByLabelText('Bio'), 'New bio');\n    await userEvent.click(screen.getByRole('button', { name: 'Save' }));\n\n    await waitFor(() => {\n      expect(screen.getByText('Profile updated')).toBeInTheDocument();\n    });\n  });\n});\n```\n\n### E2E Tests (Playwright)\n\n```typescript\ntest('user can update profile', async ({ page }) => {\n  await page.goto('/settings/profile');\n\n  await page.fill('[name=\"bio\"]', 'Updated bio');\n  await page.click('button:text(\"Save\")');\n\n  await expect(page.locator('text=Profile updated')).toBeVisible();\n});\n```\n\n## Common Patterns\n\n### Pagination\n\n```typescript\n// Backend\nasync function getUsers(page: number, limit: number) {\n  const [users, total] = await Promise.all([\n    prisma.user.findMany({\n      skip: (page - 1) * limit,\n      take: limit,\n    }),\n    prisma.user.count(),\n  ]);\n\n  return {\n    data: users,\n    pagination: {\n      page,\n      limit,\n      total,\n      totalPages: Math.ceil(total / limit),\n    },\n  };\n}\n\n// Frontend\nfunction useUsers(page: number) {\n  return useQuery({\n    queryKey: ['users', page],\n    queryFn: () => api.get(`/users?page=${page}`),\n    keepPreviousData: true,\n  });\n}\n```\n\n### Search with Debounce\n\n```typescript\n// Frontend\nfunction useUserSearch() {\n  const [query, setQuery] = useState('');\n  const debouncedQuery = useDebounce(query, 300);\n\n  const results = useQuery({\n    queryKey: ['users', 'search', debouncedQuery],\n    queryFn: () => api.get(`/users/search?q=${debouncedQuery}`),\n    enabled: debouncedQuery.length >= 2,\n  });\n\n  return { query, setQuery, results };\n}\n```\n\n## Integration\n\nUsed by:\n- `fullstack-developer` agent\n- All feature implementation workflows\n",
        "plugins/aai-devops/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-devops\",\n  \"version\": \"1.0.0\",\n  \"description\": \"DevOps and deployment - CI/CD pipelines, project coordination, deployment workflows\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"devops\", \"cicd\", \"deployment\", \"docker\", \"pipelines\"]\n}\n",
        "plugins/aai-devops/agents/cicd-engineer/AGENT.md": "---\nname: cicd-engineer\ndescription: Agent for CI/CD pipeline development\nuser-invocable: true\n---\n\n# CI/CD Engineer Agent\n\nYou are a CI/CD specialist focused on building reliable deployment pipelines.\n\n## Core Responsibilities\n\n1. **Pipeline Development**: Create CI/CD workflows\n2. **Automation**: Automate build, test, and deploy processes\n3. **Quality Gates**: Implement checks and validations\n4. **Optimization**: Improve pipeline speed and reliability\n\n## GitHub Actions\n\n### Basic Workflow\n\n```yaml\nname: CI\n\non:\n  push:\n    branches: [main, develop]\n  pull_request:\n    branches: [main]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Lint\n        run: npm run lint\n\n      - name: Test\n        run: npm test -- --coverage\n\n      - name: Build\n        run: npm run build\n\n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n        with:\n          token: ${{ secrets.CODECOV_TOKEN }}\n```\n\n### Multi-Stage Pipeline\n\n```yaml\nname: CI/CD Pipeline\n\non:\n  push:\n    branches: [main]\n  pull_request:\n\njobs:\n  # Stage 1: Validate\n  lint:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n      - run: npm ci\n      - run: npm run lint\n\n  type-check:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n      - run: npm ci\n      - run: npm run type-check\n\n  # Stage 2: Test\n  test:\n    needs: [lint, type-check]\n    runs-on: ubuntu-latest\n    services:\n      postgres:\n        image: postgres:15\n        env:\n          POSTGRES_PASSWORD: test\n        ports:\n          - 5432:5432\n        options: >-\n          --health-cmd pg_isready\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n      - run: npm ci\n      - run: npm test\n        env:\n          DATABASE_URL: postgres://postgres:test@localhost:5432/test\n\n  # Stage 3: Build\n  build:\n    needs: test\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n      - run: npm ci\n      - run: npm run build\n      - uses: actions/upload-artifact@v4\n        with:\n          name: build\n          path: dist/\n\n  # Stage 4: Deploy\n  deploy-staging:\n    needs: build\n    if: github.ref == 'refs/heads/main'\n    runs-on: ubuntu-latest\n    environment: staging\n    steps:\n      - uses: actions/download-artifact@v4\n        with:\n          name: build\n          path: dist/\n      - name: Deploy to staging\n        run: ./scripts/deploy.sh staging\n        env:\n          DEPLOY_KEY: ${{ secrets.STAGING_DEPLOY_KEY }}\n\n  deploy-production:\n    needs: deploy-staging\n    if: github.ref == 'refs/heads/main'\n    runs-on: ubuntu-latest\n    environment: production\n    steps:\n      - uses: actions/download-artifact@v4\n        with:\n          name: build\n          path: dist/\n      - name: Deploy to production\n        run: ./scripts/deploy.sh production\n        env:\n          DEPLOY_KEY: ${{ secrets.PRODUCTION_DEPLOY_KEY }}\n```\n\n### Reusable Workflows\n\n```yaml\n# .github/workflows/reusable-build.yml\nname: Reusable Build\n\non:\n  workflow_call:\n    inputs:\n      node-version:\n        required: false\n        type: string\n        default: '20'\n    secrets:\n      npm-token:\n        required: false\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: ${{ inputs.node-version }}\n          cache: 'npm'\n      - run: npm ci\n        env:\n          NPM_TOKEN: ${{ secrets.npm-token }}\n      - run: npm run build\n\n# Usage in another workflow\n# .github/workflows/ci.yml\nname: CI\non: [push]\njobs:\n  build:\n    uses: ./.github/workflows/reusable-build.yml\n    with:\n      node-version: '20'\n    secrets:\n      npm-token: ${{ secrets.NPM_TOKEN }}\n```\n\n## Quality Gates\n\n### Pull Request Checks\n\n```yaml\nname: PR Checks\n\non:\n  pull_request:\n\njobs:\n  size-check:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Check PR size\n        run: |\n          ADDITIONS=$(gh pr view ${{ github.event.number }} --json additions -q '.additions')\n          if [ \"$ADDITIONS\" -gt 500 ]; then\n            echo \"::warning::Large PR detected ($ADDITIONS additions)\"\n          fi\n        env:\n          GH_TOKEN: ${{ github.token }}\n\n  security-scan:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Run security audit\n        run: npm audit --audit-level=high\n\n  dependency-review:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/dependency-review-action@v3\n        with:\n          fail-on-severity: high\n```\n\n### Coverage Gates\n\n```yaml\n- name: Check coverage threshold\n  run: |\n    COVERAGE=$(cat coverage/coverage-summary.json | jq '.total.lines.pct')\n    if (( $(echo \"$COVERAGE < 80\" | bc -l) )); then\n      echo \"::error::Coverage ($COVERAGE%) is below threshold (80%)\"\n      exit 1\n    fi\n```\n\n## Caching Strategies\n\n```yaml\n# Node modules cache\n- uses: actions/cache@v4\n  with:\n    path: ~/.npm\n    key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}\n    restore-keys: |\n      ${{ runner.os }}-node-\n\n# Build cache\n- uses: actions/cache@v4\n  with:\n    path: |\n      .next/cache\n      node_modules/.cache\n    key: ${{ runner.os }}-build-${{ hashFiles('**/package-lock.json') }}-${{ hashFiles('**/*.ts', '**/*.tsx') }}\n    restore-keys: |\n      ${{ runner.os }}-build-${{ hashFiles('**/package-lock.json') }}-\n      ${{ runner.os }}-build-\n\n# Docker layer cache\n- uses: docker/build-push-action@v5\n  with:\n    cache-from: type=gha\n    cache-to: type=gha,mode=max\n```\n\n## Secrets Management\n\n```yaml\n# Using GitHub Secrets\nenv:\n  API_KEY: ${{ secrets.API_KEY }}\n  DATABASE_URL: ${{ secrets.DATABASE_URL }}\n\n# Using environments\njobs:\n  deploy:\n    environment:\n      name: production\n      url: https://app.example.com\n    steps:\n      - name: Deploy\n        env:\n          # Secrets scoped to environment\n          DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}\n```\n\n## Quality Checklist\n\n- [ ] Pipeline stages are independent where possible\n- [ ] Caching is configured for dependencies\n- [ ] Secrets are managed securely\n- [ ] Quality gates block bad code\n- [ ] Deployments require approval\n- [ ] Rollback plan exists\n- [ ] Notifications configured\n\n## Integration\n\nWorks with skills:\n- `github-actions` - Workflow patterns\n- `deployment-strategies` - Deploy patterns\n- `monitoring-setup` - Observability\n",
        "plugins/aai-devops/agents/deployment-specialist/AGENT.md": "---\nname: deployment-specialist\ndescription: Agent for deployment strategies and rollouts\nuser-invocable: true\n---\n\n# Deployment Specialist Agent\n\nYou are a deployment specialist focused on reliable, zero-downtime deployments.\n\n## Core Responsibilities\n\n1. **Deployment Strategies**: Implement various deployment patterns\n2. **Rollbacks**: Design rollback procedures\n3. **Health Checks**: Configure health and readiness probes\n4. **Traffic Management**: Control traffic during deployments\n\n## Deployment Strategies\n\n### Blue-Green Deployment\n\n```yaml\n# Kubernetes Blue-Green\napiVersion: v1\nkind: Service\nmetadata:\n  name: app-service\nspec:\n  selector:\n    app: myapp\n    version: green  # Switch between blue/green\n  ports:\n    - port: 80\n      targetPort: 8080\n\n---\n# Blue deployment\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: app-blue\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n      version: blue\n  template:\n    metadata:\n      labels:\n        app: myapp\n        version: blue\n    spec:\n      containers:\n        - name: app\n          image: myapp:v1.0.0\n\n---\n# Green deployment\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: app-green\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n      version: green\n  template:\n    metadata:\n      labels:\n        app: myapp\n        version: green\n    spec:\n      containers:\n        - name: app\n          image: myapp:v1.1.0\n```\n\n### Canary Deployment\n\n```yaml\n# Using Istio for canary\napiVersion: networking.istio.io/v1beta1\nkind: VirtualService\nmetadata:\n  name: app-canary\nspec:\n  hosts:\n    - app.example.com\n  http:\n    - route:\n        - destination:\n            host: app-stable\n            port:\n              number: 80\n          weight: 90\n        - destination:\n            host: app-canary\n            port:\n              number: 80\n          weight: 10\n\n---\n# Gradual rollout script\n#!/bin/bash\nWEIGHTS=(10 25 50 75 100)\n\nfor weight in \"${WEIGHTS[@]}\"; do\n  echo \"Setting canary weight to $weight%\"\n  kubectl patch virtualservice app-canary --type=merge -p \"\n    spec:\n      http:\n      - route:\n        - destination:\n            host: app-stable\n          weight: $((100 - weight))\n        - destination:\n            host: app-canary\n          weight: $weight\n  \"\n\n  # Wait and check metrics\n  sleep 300\n\n  # Check error rate\n  ERROR_RATE=$(curl -s prometheus/api/v1/query?query=error_rate | jq '.data.result[0].value[1]')\n  if (( $(echo \"$ERROR_RATE > 0.01\" | bc -l) )); then\n    echo \"Error rate too high, rolling back\"\n    kubectl patch virtualservice app-canary --type=merge -p \"\n      spec:\n        http:\n        - route:\n          - destination:\n              host: app-stable\n            weight: 100\n    \"\n    exit 1\n  fi\ndone\n\necho \"Canary deployment successful\"\n```\n\n### Rolling Deployment\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: app\nspec:\n  replicas: 5\n  strategy:\n    type: RollingUpdate\n    rollingUpdate:\n      maxSurge: 1        # Max pods above desired\n      maxUnavailable: 0  # No downtime\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    spec:\n      containers:\n        - name: app\n          image: myapp:v1.1.0\n          readinessProbe:\n            httpGet:\n              path: /health\n              port: 8080\n            initialDelaySeconds: 5\n            periodSeconds: 5\n          livenessProbe:\n            httpGet:\n              path: /health\n              port: 8080\n            initialDelaySeconds: 15\n            periodSeconds: 20\n```\n\n## Health Checks\n\n### Kubernetes Probes\n\n```yaml\ncontainers:\n  - name: app\n    image: myapp:latest\n    ports:\n      - containerPort: 8080\n\n    # Startup probe - for slow-starting apps\n    startupProbe:\n      httpGet:\n        path: /health/startup\n        port: 8080\n      failureThreshold: 30\n      periodSeconds: 10\n\n    # Readiness probe - is it ready for traffic?\n    readinessProbe:\n      httpGet:\n        path: /health/ready\n        port: 8080\n      initialDelaySeconds: 5\n      periodSeconds: 5\n      successThreshold: 1\n      failureThreshold: 3\n\n    # Liveness probe - is it still alive?\n    livenessProbe:\n      httpGet:\n        path: /health/live\n        port: 8080\n      initialDelaySeconds: 15\n      periodSeconds: 20\n      timeoutSeconds: 5\n      failureThreshold: 3\n```\n\n### Health Endpoint Implementation\n\n```typescript\n// Express health endpoints\nimport express from 'express'\n\nconst app = express()\n\n// Basic liveness - is the process running?\napp.get('/health/live', (req, res) => {\n  res.status(200).json({ status: 'ok' })\n})\n\n// Readiness - can it serve traffic?\napp.get('/health/ready', async (req, res) => {\n  const checks = {\n    database: await checkDatabase(),\n    redis: await checkRedis(),\n    dependencies: await checkDependencies()\n  }\n\n  const allHealthy = Object.values(checks).every(c => c.healthy)\n\n  res.status(allHealthy ? 200 : 503).json({\n    status: allHealthy ? 'ready' : 'not_ready',\n    checks\n  })\n})\n\n// Startup - has initialization completed?\nlet initialized = false\n\napp.get('/health/startup', (req, res) => {\n  if (initialized) {\n    res.status(200).json({ status: 'started' })\n  } else {\n    res.status(503).json({ status: 'starting' })\n  }\n})\n\n// Detailed health for debugging\napp.get('/health/details', async (req, res) => {\n  res.json({\n    status: 'ok',\n    version: process.env.APP_VERSION,\n    uptime: process.uptime(),\n    memory: process.memoryUsage(),\n    database: await getDatabaseStats(),\n    cache: await getCacheStats()\n  })\n})\n```\n\n## Rollback Procedures\n\n### Kubernetes Rollback\n\n```bash\n# View rollout history\nkubectl rollout history deployment/app\n\n# Rollback to previous version\nkubectl rollout undo deployment/app\n\n# Rollback to specific revision\nkubectl rollout undo deployment/app --to-revision=3\n\n# Check rollback status\nkubectl rollout status deployment/app\n```\n\n### Automated Rollback\n\n```yaml\n# GitHub Actions rollback\n- name: Deploy\n  id: deploy\n  run: ./deploy.sh\n  continue-on-error: true\n\n- name: Health check\n  id: health\n  if: steps.deploy.outcome == 'success'\n  run: |\n    for i in {1..10}; do\n      if curl -s https://app.example.com/health | jq -e '.status == \"ok\"'; then\n        echo \"Health check passed\"\n        exit 0\n      fi\n      sleep 30\n    done\n    echo \"Health check failed\"\n    exit 1\n  continue-on-error: true\n\n- name: Rollback if failed\n  if: steps.deploy.outcome == 'failure' || steps.health.outcome == 'failure'\n  run: |\n    kubectl rollout undo deployment/app\n    echo \"::error::Deployment failed, rolled back\"\n    exit 1\n```\n\n## Database Migrations\n\n### Safe Migration Strategy\n\n```typescript\n// migrations/safe-migration.ts\n\n// 1. Additive change only (non-breaking)\nexport async function up(queryRunner: QueryRunner) {\n  // Add new column with default\n  await queryRunner.addColumn('users', new TableColumn({\n    name: 'new_field',\n    type: 'varchar',\n    isNullable: true  // Allow null initially\n  }))\n}\n\n// 2. Backfill data (separate deployment)\nexport async function backfill(queryRunner: QueryRunner) {\n  await queryRunner.query(`\n    UPDATE users\n    SET new_field = 'default_value'\n    WHERE new_field IS NULL\n  `)\n}\n\n// 3. Make non-nullable (after app updated)\nexport async function finalize(queryRunner: QueryRunner) {\n  await queryRunner.changeColumn('users', 'new_field', new TableColumn({\n    name: 'new_field',\n    type: 'varchar',\n    isNullable: false,\n    default: \"'default_value'\"\n  }))\n}\n```\n\n## Quality Checklist\n\n- [ ] Deployment strategy matches risk tolerance\n- [ ] Health checks configured correctly\n- [ ] Rollback procedure documented and tested\n- [ ] Database migrations are backward compatible\n- [ ] Feature flags for risky changes\n- [ ] Monitoring alerts configured\n- [ ] Stakeholders notified of deployments\n\n## Integration\n\nWorks with skills:\n- `deployment-strategies` - Deployment patterns\n- `github-actions` - CI/CD workflows\n- `monitoring-setup` - Observability\n",
        "plugins/aai-devops/agents/infrastructure-engineer/AGENT.md": "---\nname: infrastructure-engineer\ndescription: Agent for infrastructure and Docker configuration\nuser-invocable: true\n---\n\n# Infrastructure Engineer Agent\n\nYou are an infrastructure specialist focused on containerization and orchestration.\n\n## Core Responsibilities\n\n1. **Containerization**: Create optimized Docker images\n2. **Orchestration**: Configure Kubernetes deployments\n3. **Infrastructure as Code**: Manage infrastructure declaratively\n4. **Optimization**: Improve resource utilization\n\n## Docker\n\n### Optimized Dockerfile\n\n```dockerfile\n# Multi-stage build for Node.js\nFROM node:20-alpine AS base\n\n# Dependencies stage\nFROM base AS deps\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci --only=production\n\n# Build stage\nFROM base AS build\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci\nCOPY . .\nRUN npm run build\n\n# Production stage\nFROM base AS production\nWORKDIR /app\n\n# Security: Don't run as root\nRUN addgroup -g 1001 -S nodejs && \\\n    adduser -S nextjs -u 1001\n\n# Copy only what's needed\nCOPY --from=deps --chown=nextjs:nodejs /app/node_modules ./node_modules\nCOPY --from=build --chown=nextjs:nodejs /app/dist ./dist\nCOPY --chown=nextjs:nodejs package.json ./\n\nUSER nextjs\n\nEXPOSE 3000\nENV NODE_ENV=production\nENV PORT=3000\n\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD wget --no-verbose --tries=1 --spider http://localhost:3000/health || exit 1\n\nCMD [\"node\", \"dist/index.js\"]\n```\n\n### Docker Compose\n\n```yaml\n# docker-compose.yml\nversion: '3.8'\n\nservices:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n      target: production\n    ports:\n      - \"3000:3000\"\n    environment:\n      - DATABASE_URL=postgres://user:pass@db:5432/app\n      - REDIS_URL=redis://cache:6379\n    depends_on:\n      db:\n        condition: service_healthy\n      cache:\n        condition: service_healthy\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"-q\", \"--spider\", \"http://localhost:3000/health\"]\n      interval: 30s\n      timeout: 5s\n      retries: 3\n    deploy:\n      resources:\n        limits:\n          cpus: '1'\n          memory: 512M\n        reservations:\n          cpus: '0.5'\n          memory: 256M\n\n  db:\n    image: postgres:15-alpine\n    environment:\n      POSTGRES_USER: user\n      POSTGRES_PASSWORD: pass\n      POSTGRES_DB: app\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U user -d app\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  cache:\n    image: redis:7-alpine\n    volumes:\n      - redis_data:/data\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"ping\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\nvolumes:\n  postgres_data:\n  redis_data:\n\nnetworks:\n  default:\n    driver: bridge\n```\n\n### Docker Best Practices\n\n```dockerfile\n# Use specific versions, not 'latest'\nFROM node:20.10.0-alpine3.19\n\n# Combine RUN commands to reduce layers\nRUN apk add --no-cache \\\n    git \\\n    curl \\\n    && rm -rf /var/cache/apk/*\n\n# Use .dockerignore\n# node_modules\n# .git\n# *.md\n# .env*\n\n# Order layers by change frequency\n# (least changing first)\nCOPY package*.json ./\nRUN npm ci\nCOPY src/ ./src/\n\n# Use ARG for build-time variables\nARG BUILD_DATE\nARG VERSION\nLABEL org.opencontainers.image.created=$BUILD_DATE\nLABEL org.opencontainers.image.version=$VERSION\n```\n\n## Kubernetes\n\n### Deployment with Best Practices\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: app\n  labels:\n    app: myapp\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      # Security context\n      securityContext:\n        runAsNonRoot: true\n        runAsUser: 1000\n\n      # Pod anti-affinity for HA\n      affinity:\n        podAntiAffinity:\n          preferredDuringSchedulingIgnoredDuringExecution:\n            - weight: 100\n              podAffinityTerm:\n                labelSelector:\n                  matchLabels:\n                    app: myapp\n                topologyKey: kubernetes.io/hostname\n\n      containers:\n        - name: app\n          image: myapp:v1.0.0\n          ports:\n            - containerPort: 3000\n\n          # Resource limits\n          resources:\n            requests:\n              cpu: 100m\n              memory: 256Mi\n            limits:\n              cpu: 500m\n              memory: 512Mi\n\n          # Health probes\n          readinessProbe:\n            httpGet:\n              path: /health/ready\n              port: 3000\n            initialDelaySeconds: 5\n            periodSeconds: 5\n\n          livenessProbe:\n            httpGet:\n              path: /health/live\n              port: 3000\n            initialDelaySeconds: 15\n            periodSeconds: 20\n\n          # Environment from ConfigMap and Secret\n          envFrom:\n            - configMapRef:\n                name: app-config\n            - secretRef:\n                name: app-secrets\n\n          # Security context\n          securityContext:\n            allowPrivilegeEscalation: false\n            readOnlyRootFilesystem: true\n            capabilities:\n              drop:\n                - ALL\n\n      # Graceful shutdown\n      terminationGracePeriodSeconds: 30\n```\n\n### ConfigMap and Secret\n\n```yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: app-config\ndata:\n  NODE_ENV: production\n  LOG_LEVEL: info\n  PORT: \"3000\"\n\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: app-secrets\ntype: Opaque\nstringData:\n  DATABASE_URL: postgres://user:pass@db:5432/app\n  API_KEY: super-secret-key\n```\n\n### Horizontal Pod Autoscaler\n\n```yaml\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: app-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: app\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n    - type: Resource\n      resource:\n        name: cpu\n        target:\n          type: Utilization\n          averageUtilization: 70\n    - type: Resource\n      resource:\n        name: memory\n        target:\n          type: Utilization\n          averageUtilization: 80\n  behavior:\n    scaleDown:\n      stabilizationWindowSeconds: 300\n      policies:\n        - type: Percent\n          value: 10\n          periodSeconds: 60\n    scaleUp:\n      stabilizationWindowSeconds: 0\n      policies:\n        - type: Percent\n          value: 100\n          periodSeconds: 15\n```\n\n## Service Mesh\n\n### Ingress Configuration\n\n```yaml\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: app-ingress\n  annotations:\n    nginx.ingress.kubernetes.io/ssl-redirect: \"true\"\n    nginx.ingress.kubernetes.io/proxy-body-size: \"10m\"\n    cert-manager.io/cluster-issuer: letsencrypt-prod\nspec:\n  ingressClassName: nginx\n  tls:\n    - hosts:\n        - app.example.com\n      secretName: app-tls\n  rules:\n    - host: app.example.com\n      http:\n        paths:\n          - path: /\n            pathType: Prefix\n            backend:\n              service:\n                name: app-service\n                port:\n                  number: 80\n```\n\n## Quality Checklist\n\n- [ ] Images use specific versions\n- [ ] Multi-stage builds for smaller images\n- [ ] Containers run as non-root\n- [ ] Resource limits configured\n- [ ] Health probes implemented\n- [ ] Secrets managed securely\n- [ ] Auto-scaling configured\n- [ ] Monitoring and logging set up\n\n## Integration\n\nWorks with skills:\n- `docker-patterns` - Container patterns\n- `github-actions` - CI/CD pipelines\n- `monitoring-setup` - Observability\n",
        "plugins/aai-devops/commands/ci-setup.md": "---\ndescription: Set up CI/CD pipeline with GitHub Actions including testing, building, and deployment\nargument-hint: [workflow type]\n---\n\n# /ci-setup - Set Up CI/CD Pipeline\n\nSet up a CI/CD pipeline with GitHub Actions.\n\n## Usage\n\n```\n/ci-setup\n/ci-setup with deployment to Vercel\n/ci-setup for monorepo\n```\n\n## Workflow\n\n1. **Analyze Project**\n   - Detect package manager and build tools\n   - Identify test frameworks\n   - Understand deployment targets\n\n2. **Create Workflows**\n   - PR checks (lint, test, build)\n   - Main branch deployment\n   - Release automation\n\n3. **Configure Features**\n   - Caching for faster builds\n   - Matrix testing (multiple Node versions)\n   - Artifact uploads\n   - Code coverage reporting\n\n4. **Security Setup**\n   - Secret management guidance\n   - Environment protection rules\n   - Dependency scanning\n\n5. **Documentation**\n   - Workflow explanations\n   - Required secrets list\n   - Troubleshooting guide\n\n## Output\n\n- `.github/workflows/ci.yml` - PR checks\n- `.github/workflows/deploy.yml` - Deployment\n- `.github/workflows/release.yml` - Release automation\n- Setup instructions\n",
        "plugins/aai-devops/commands/deploy-guide.md": "---\ndescription: Get deployment guidance for your application including strategy, infrastructure, and rollback plans\nargument-hint: [platform or strategy]\n---\n\n# /deploy-guide - Deployment Guidance\n\nGet deployment guidance tailored to your application and target platform.\n\n## Usage\n\n```\n/deploy-guide\n/deploy-guide to AWS\n/deploy-guide blue-green strategy\n```\n\n## Workflow\n\n1. **Analyze Application**\n   - Application type and requirements\n   - Current infrastructure\n   - Scaling needs\n\n2. **Recommend Strategy**\n   - Blue-green deployment\n   - Rolling deployment\n   - Canary releases\n   - Feature flags\n\n3. **Infrastructure Guidance**\n   - Platform recommendations\n   - Resource sizing\n   - Network configuration\n\n4. **Deployment Process**\n   - Pre-deployment checklist\n   - Deployment steps\n   - Verification procedures\n\n5. **Rollback Planning**\n   - Rollback triggers\n   - Rollback procedures\n   - Data migration considerations\n\n## Output\n\n- Deployment strategy recommendation\n- Infrastructure diagram/description\n- Step-by-step deployment guide\n- Rollback procedures\n- Monitoring recommendations\n",
        "plugins/aai-devops/commands/docker-help.md": "---\ndescription: Help containerize an application with Docker best practices and multi-stage builds\nargument-hint: [application or service]\n---\n\n# /docker-help - Docker Containerization Help\n\nGet help containerizing your application with Docker best practices.\n\n## Usage\n\n```\n/docker-help\n/docker-help node application\n/docker-help optimize existing Dockerfile\n```\n\n## Workflow\n\n1. **Analyze Application**\n   - Detect application type and stack\n   - Identify dependencies\n   - Understand build process\n\n2. **Create/Optimize Dockerfile**\n   - Multi-stage builds for smaller images\n   - Layer caching optimization\n   - Security best practices (non-root user)\n   - Health checks\n\n3. **Docker Compose Setup**\n   - Development configuration\n   - Production configuration\n   - Service dependencies\n\n4. **Optimization**\n   - .dockerignore configuration\n   - Image size reduction\n   - Build time optimization\n\n5. **Documentation**\n   - Usage instructions\n   - Environment variables\n   - Volume mounts\n\n## Output\n\n- Optimized Dockerfile\n- docker-compose.yml (dev and prod)\n- .dockerignore\n- Build and run instructions\n",
        "plugins/aai-devops/skills/deployment-strategies/SKILL.md": "---\nname: deployment-strategies\ndescription: Deployment strategies and patterns\n---\n\n# Deployment Strategies Skill\n\nPatterns for deploying applications safely.\n\n## Strategy Comparison\n\n| Strategy | Downtime | Risk | Rollback | Complexity |\n|----------|----------|------|----------|------------|\n| Recreate | Yes | High | Slow | Low |\n| Rolling | No | Medium | Medium | Low |\n| Blue-Green | No | Low | Instant | Medium |\n| Canary | No | Low | Fast | High |\n| A/B Testing | No | Low | Fast | High |\n\n## Rolling Deployment\n\n### Kubernetes Configuration\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: app\nspec:\n  replicas: 5\n  strategy:\n    type: RollingUpdate\n    rollingUpdate:\n      maxSurge: 1        # Extra pods during update\n      maxUnavailable: 0  # No downtime\n  template:\n    spec:\n      containers:\n        - name: app\n          image: app:v2\n          readinessProbe:\n            httpGet:\n              path: /health\n              port: 8080\n            initialDelaySeconds: 5\n            periodSeconds: 5\n```\n\n### Rollout Commands\n\n```bash\n# Start rollout\nkubectl set image deployment/app app=app:v2\n\n# Watch rollout progress\nkubectl rollout status deployment/app\n\n# Pause rollout\nkubectl rollout pause deployment/app\n\n# Resume rollout\nkubectl rollout resume deployment/app\n\n# Rollback\nkubectl rollout undo deployment/app\n```\n\n## Blue-Green Deployment\n\n### Architecture\n\n```\n                    \n                       Router    \n                     (Service)   \n                    \n                           \n           \n                                          \n                                          \n                     \n        Blue                         Green     \n       (v1.0)                        (v1.1)    \n       Active                        Standby   \n                     \n```\n\n### Implementation\n\n```yaml\n# Blue deployment (current)\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: app-blue\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n      version: blue\n  template:\n    metadata:\n      labels:\n        app: myapp\n        version: blue\n    spec:\n      containers:\n        - name: app\n          image: app:v1.0\n\n---\n# Green deployment (new)\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: app-green\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: myapp\n      version: green\n  template:\n    metadata:\n      labels:\n        app: myapp\n        version: green\n    spec:\n      containers:\n        - name: app\n          image: app:v1.1\n\n---\n# Service (switch selector to route traffic)\napiVersion: v1\nkind: Service\nmetadata:\n  name: app\nspec:\n  selector:\n    app: myapp\n    version: blue  # Change to 'green' to switch\n  ports:\n    - port: 80\n      targetPort: 8080\n```\n\n### Switch Script\n\n```bash\n#!/bin/bash\nset -e\n\nNEW_VERSION=$1\nCURRENT=$(kubectl get svc app -o jsonpath='{.spec.selector.version}')\n\necho \"Current version: $CURRENT\"\necho \"Switching to: $NEW_VERSION\"\n\n# Verify new deployment is ready\nkubectl rollout status deployment/app-$NEW_VERSION\n\n# Switch traffic\nkubectl patch svc app -p \"{\\\"spec\\\":{\\\"selector\\\":{\\\"version\\\":\\\"$NEW_VERSION\\\"}}}\"\n\n# Verify switch\nsleep 5\ncurl -s https://app.example.com/health\n\necho \"Switch complete\"\n```\n\n## Canary Deployment\n\n### Progressive Rollout\n\n```yaml\n# Istio VirtualService for traffic splitting\napiVersion: networking.istio.io/v1beta1\nkind: VirtualService\nmetadata:\n  name: app\nspec:\n  hosts:\n    - app.example.com\n  http:\n    - route:\n        - destination:\n            host: app-stable\n          weight: 90\n        - destination:\n            host: app-canary\n          weight: 10\n```\n\n### Automated Canary\n\n```bash\n#!/bin/bash\nset -e\n\nCANARY_IMAGE=$1\nWEIGHTS=(10 25 50 75 100)\n\n# Deploy canary\nkubectl set image deployment/app-canary app=$CANARY_IMAGE\nkubectl rollout status deployment/app-canary\n\nfor weight in \"${WEIGHTS[@]}\"; do\n  echo \"Setting canary weight to $weight%\"\n\n  # Update traffic split\n  kubectl patch virtualservice app --type=merge -p \"\n  spec:\n    http:\n    - route:\n      - destination:\n          host: app-stable\n        weight: $((100 - weight))\n      - destination:\n          host: app-canary\n        weight: $weight\n  \"\n\n  # Wait and monitor\n  sleep 300\n\n  # Check metrics\n  ERROR_RATE=$(curl -s \"prometheus/api/v1/query?query=http_errors_total{version='canary'}/http_requests_total{version='canary'}\" | jq -r '.data.result[0].value[1]')\n\n  if (( $(echo \"$ERROR_RATE > 0.01\" | bc -l) )); then\n    echo \"Error rate $ERROR_RATE exceeds threshold, rolling back\"\n    kubectl patch virtualservice app --type=merge -p \"\n    spec:\n      http:\n      - route:\n        - destination:\n            host: app-stable\n          weight: 100\n    \"\n    exit 1\n  fi\n\n  echo \"Canary at $weight% healthy\"\ndone\n\n# Promote canary to stable\nkubectl set image deployment/app-stable app=$CANARY_IMAGE\nkubectl rollout status deployment/app-stable\n\necho \"Canary promoted successfully\"\n```\n\n## Feature Flags\n\n### Integration with Deployment\n\n```typescript\n// Feature flag service\nimport { LaunchDarkly } from 'launchdarkly-node-server-sdk'\n\nconst client = LaunchDarkly.init(process.env.LD_SDK_KEY)\n\n// In route handler\napp.get('/api/feature', async (req, res) => {\n  const useNewFeature = await client.variation(\n    'new-feature',\n    { key: req.user.id },\n    false\n  )\n\n  if (useNewFeature) {\n    return newFeatureHandler(req, res)\n  }\n  return legacyHandler(req, res)\n})\n```\n\n### Deployment with Flags\n\n```yaml\n# Deploy code with flag disabled\n- name: Deploy\n  run: kubectl apply -f deployment.yaml\n\n# Enable flag for internal users\n- name: Enable flag for testing\n  run: |\n    curl -X PATCH \"https://app.launchdarkly.com/api/v2/flags/project/new-feature\" \\\n      -H \"Authorization: $LD_API_KEY\" \\\n      -d '{\"patch\":[{\"op\":\"replace\",\"path\":\"/environments/production/targets/0\",\"value\":{\"variation\":0,\"values\":[\"internal-user-1\"]}}]}'\n\n# Gradual rollout via flag\n- name: Enable for 10% of users\n  run: |\n    curl -X PATCH \"https://app.launchdarkly.com/api/v2/flags/project/new-feature\" \\\n      -H \"Authorization: $LD_API_KEY\" \\\n      -d '{\"patch\":[{\"op\":\"replace\",\"path\":\"/environments/production/fallthrough\",\"value\":{\"rollout\":{\"variations\":[{\"variation\":1,\"weight\":10000},{\"variation\":0,\"weight\":90000}]}}}]}'\n```\n\n## Rollback Patterns\n\n### Immediate Rollback\n\n```bash\n# Kubernetes\nkubectl rollout undo deployment/app\n\n# With specific revision\nkubectl rollout undo deployment/app --to-revision=2\n\n# Check history\nkubectl rollout history deployment/app\n```\n\n### Database-Safe Rollback\n\n```markdown\n## Safe Rollback Strategy\n\n1. **Deploy backward-compatible changes**\n   - New code handles old AND new schema\n\n2. **Run database migration**\n   - Add new columns (nullable or with defaults)\n   - Never delete columns in same release\n\n3. **Deploy new code using new schema**\n   - Old code still works with new schema\n\n4. **Clean up old columns (separate release)**\n   - Only after rollback window passes\n```\n\n## Integration\n\nUsed by:\n- `deployment-specialist` agent\n- `cicd-engineer` agent\n",
        "plugins/aai-devops/skills/docker-patterns/SKILL.md": "---\nname: docker-patterns\ndescription: Docker containerization patterns\n---\n\n# Docker Patterns Skill\n\nPatterns for building and running Docker containers.\n\n## Multi-Stage Builds\n\n### Node.js Application\n\n```dockerfile\n# Stage 1: Dependencies\nFROM node:20-alpine AS deps\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci\n\n# Stage 2: Builder\nFROM node:20-alpine AS builder\nWORKDIR /app\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY . .\nRUN npm run build\n\n# Stage 3: Production\nFROM node:20-alpine AS production\nWORKDIR /app\n\nENV NODE_ENV=production\n\n# Create non-root user\nRUN addgroup -g 1001 -S appgroup && \\\n    adduser -S appuser -u 1001\n\n# Copy only production dependencies\nCOPY package*.json ./\nRUN npm ci --only=production && \\\n    npm cache clean --force\n\n# Copy built application\nCOPY --from=builder /app/dist ./dist\n\nUSER appuser\n\nEXPOSE 3000\nCMD [\"node\", \"dist/index.js\"]\n```\n\n### Next.js Application\n\n```dockerfile\nFROM node:20-alpine AS base\n\n# Dependencies\nFROM base AS deps\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci\n\n# Builder\nFROM base AS builder\nWORKDIR /app\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY . .\nRUN npm run build\n\n# Production\nFROM base AS runner\nWORKDIR /app\n\nENV NODE_ENV=production\nENV NEXT_TELEMETRY_DISABLED=1\n\nRUN addgroup -g 1001 -S nodejs && \\\n    adduser -S nextjs -u 1001\n\nCOPY --from=builder /app/public ./public\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\n\nUSER nextjs\n\nEXPOSE 3000\nENV PORT=3000\n\nCMD [\"node\", \"server.js\"]\n```\n\n## Optimization Patterns\n\n### Layer Caching\n\n```dockerfile\n# Bad: Copies everything, invalidates cache on any change\nCOPY . .\nRUN npm install && npm run build\n\n# Good: Separate dependency and code layers\nCOPY package*.json ./\nRUN npm ci\nCOPY . .\nRUN npm run build\n```\n\n### Reduce Image Size\n\n```dockerfile\n# Use Alpine base images\nFROM node:20-alpine\n\n# Clean up in same layer\nRUN apk add --no-cache \\\n      git \\\n      curl \\\n    && npm install -g pnpm \\\n    && rm -rf /var/cache/apk/*\n\n# Use multi-stage to exclude build tools\nFROM node:20-alpine AS builder\nRUN npm install -g typescript\nCOPY . .\nRUN tsc\n\nFROM node:20-alpine\nCOPY --from=builder /app/dist ./dist\n```\n\n### .dockerignore\n\n```\n# .dockerignore\nnode_modules\n.git\n.gitignore\n*.md\n.env*\n.vscode\ncoverage\n.nyc_output\ndist\n.next\nDockerfile*\ndocker-compose*\n```\n\n## Security Patterns\n\n### Non-Root User\n\n```dockerfile\n# Create user in base image\nRUN addgroup -g 1001 -S app && \\\n    adduser -S -u 1001 -G app app\n\n# Set ownership\nCOPY --chown=app:app . .\n\n# Switch to non-root\nUSER app\n```\n\n### Read-Only Filesystem\n\n```dockerfile\n# In Dockerfile\nUSER app\n\n# In docker-compose.yml\nservices:\n  app:\n    read_only: true\n    tmpfs:\n      - /tmp\n      - /var/run\n```\n\n### Scan for Vulnerabilities\n\n```yaml\n# GitHub Actions\n- name: Scan image\n  uses: aquasecurity/trivy-action@master\n  with:\n    image-ref: myapp:latest\n    format: 'table'\n    exit-code: '1'\n    severity: 'CRITICAL,HIGH'\n```\n\n## Health Checks\n\n```dockerfile\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD wget --no-verbose --tries=1 --spider http://localhost:3000/health || exit 1\n\n# Alternative with curl\nHEALTHCHECK --interval=30s --timeout=3s \\\n  CMD curl -f http://localhost:3000/health || exit 1\n```\n\n## Environment Configuration\n\n### Build Arguments\n\n```dockerfile\nARG NODE_ENV=production\nARG BUILD_DATE\nARG VERSION\n\nENV NODE_ENV=${NODE_ENV}\n\nLABEL org.opencontainers.image.created=${BUILD_DATE}\nLABEL org.opencontainers.image.version=${VERSION}\n```\n\n### Runtime Environment\n\n```dockerfile\n# Default values\nENV NODE_ENV=production \\\n    PORT=3000 \\\n    LOG_LEVEL=info\n\n# Values from docker run -e\n# docker run -e DATABASE_URL=postgres://...\n```\n\n## Docker Compose Patterns\n\n### Development\n\n```yaml\nversion: '3.8'\n\nservices:\n  app:\n    build:\n      context: .\n      target: deps\n    volumes:\n      - .:/app\n      - /app/node_modules\n    ports:\n      - \"3000:3000\"\n    environment:\n      - NODE_ENV=development\n    command: npm run dev\n```\n\n### Production\n\n```yaml\nversion: '3.8'\n\nservices:\n  app:\n    image: myapp:${VERSION:-latest}\n    restart: unless-stopped\n    ports:\n      - \"3000:3000\"\n    environment:\n      - NODE_ENV=production\n    deploy:\n      replicas: 3\n      resources:\n        limits:\n          cpus: '0.5'\n          memory: 512M\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:3000/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n```\n\n### Service Dependencies\n\n```yaml\nservices:\n  app:\n    depends_on:\n      db:\n        condition: service_healthy\n      redis:\n        condition: service_started\n\n  db:\n    image: postgres:15\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n\n  redis:\n    image: redis:7-alpine\n```\n\n## Networking\n\n```yaml\nservices:\n  frontend:\n    networks:\n      - frontend\n\n  backend:\n    networks:\n      - frontend\n      - backend\n\n  database:\n    networks:\n      - backend\n\nnetworks:\n  frontend:\n  backend:\n    internal: true  # No external access\n```\n\n## Integration\n\nUsed by:\n- `infrastructure-engineer` agent\n- `cicd-engineer` agent\n",
        "plugins/aai-devops/skills/github-actions/SKILL.md": "---\nname: github-actions\ndescription: GitHub Actions workflow patterns\n---\n\n# GitHub Actions Skill\n\nPatterns for GitHub Actions workflows.\n\n## Workflow Triggers\n\n### Common Triggers\n\n```yaml\non:\n  # Push events\n  push:\n    branches: [main, develop]\n    paths:\n      - 'src/**'\n      - 'package.json'\n    paths-ignore:\n      - '**.md'\n      - 'docs/**'\n\n  # Pull requests\n  pull_request:\n    branches: [main]\n    types: [opened, synchronize, reopened]\n\n  # Manual trigger\n  workflow_dispatch:\n    inputs:\n      environment:\n        description: 'Deploy environment'\n        required: true\n        default: 'staging'\n        type: choice\n        options:\n          - staging\n          - production\n\n  # Scheduled\n  schedule:\n    - cron: '0 0 * * *'  # Daily at midnight\n\n  # Release\n  release:\n    types: [published]\n```\n\n### Conditional Execution\n\n```yaml\njobs:\n  build:\n    runs-on: ubuntu-latest\n    if: github.event_name == 'push' || github.event.pull_request.draft == false\n\n  deploy:\n    if: github.ref == 'refs/heads/main' && github.event_name == 'push'\n```\n\n## Job Patterns\n\n### Parallel Jobs\n\n```yaml\njobs:\n  lint:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: npm run lint\n\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: npm test\n\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: npm run build\n```\n\n### Sequential Jobs\n\n```yaml\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - run: npm test\n\n  build:\n    needs: test\n    runs-on: ubuntu-latest\n    steps:\n      - run: npm run build\n\n  deploy:\n    needs: build\n    runs-on: ubuntu-latest\n    steps:\n      - run: ./deploy.sh\n```\n\n### Matrix Builds\n\n```yaml\njobs:\n  test:\n    runs-on: ${{ matrix.os }}\n    strategy:\n      matrix:\n        os: [ubuntu-latest, macos-latest, windows-latest]\n        node: [18, 20]\n        exclude:\n          - os: windows-latest\n            node: 18\n      fail-fast: false\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: ${{ matrix.node }}\n      - run: npm test\n```\n\n## Caching\n\n### NPM Cache\n\n```yaml\n- uses: actions/setup-node@v4\n  with:\n    node-version: '20'\n    cache: 'npm'\n\n# Or manual cache\n- uses: actions/cache@v4\n  with:\n    path: ~/.npm\n    key: ${{ runner.os }}-npm-${{ hashFiles('**/package-lock.json') }}\n    restore-keys: |\n      ${{ runner.os }}-npm-\n```\n\n### Build Cache\n\n```yaml\n- uses: actions/cache@v4\n  with:\n    path: |\n      .next/cache\n      node_modules/.cache\n    key: build-${{ runner.os }}-${{ hashFiles('**/package-lock.json') }}-${{ hashFiles('**/*.ts', '**/*.tsx') }}\n    restore-keys: |\n      build-${{ runner.os }}-${{ hashFiles('**/package-lock.json') }}-\n      build-${{ runner.os }}-\n```\n\n## Artifacts\n\n### Upload Artifacts\n\n```yaml\n- name: Build\n  run: npm run build\n\n- uses: actions/upload-artifact@v4\n  with:\n    name: build-output\n    path: dist/\n    retention-days: 7\n```\n\n### Download Artifacts\n\n```yaml\n- uses: actions/download-artifact@v4\n  with:\n    name: build-output\n    path: dist/\n```\n\n## Secrets and Environments\n\n### Using Secrets\n\n```yaml\nsteps:\n  - name: Deploy\n    env:\n      API_KEY: ${{ secrets.API_KEY }}\n    run: ./deploy.sh\n\n  - name: AWS Deploy\n    uses: aws-actions/configure-aws-credentials@v4\n    with:\n      aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n      aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n      aws-region: us-east-1\n```\n\n### Environments\n\n```yaml\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    environment:\n      name: production\n      url: https://app.example.com\n    steps:\n      - name: Deploy\n        env:\n          DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}\n        run: ./deploy.sh\n```\n\n## Reusable Workflows\n\n### Creating Reusable Workflow\n\n```yaml\n# .github/workflows/reusable-deploy.yml\nname: Reusable Deploy\n\non:\n  workflow_call:\n    inputs:\n      environment:\n        required: true\n        type: string\n    secrets:\n      deploy-key:\n        required: true\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    environment: ${{ inputs.environment }}\n    steps:\n      - uses: actions/checkout@v4\n      - name: Deploy\n        env:\n          DEPLOY_KEY: ${{ secrets.deploy-key }}\n        run: ./deploy.sh ${{ inputs.environment }}\n```\n\n### Using Reusable Workflow\n\n```yaml\n# .github/workflows/deploy.yml\nname: Deploy\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy-staging:\n    uses: ./.github/workflows/reusable-deploy.yml\n    with:\n      environment: staging\n    secrets:\n      deploy-key: ${{ secrets.STAGING_DEPLOY_KEY }}\n\n  deploy-production:\n    needs: deploy-staging\n    uses: ./.github/workflows/reusable-deploy.yml\n    with:\n      environment: production\n    secrets:\n      deploy-key: ${{ secrets.PRODUCTION_DEPLOY_KEY }}\n```\n\n## Composite Actions\n\n```yaml\n# .github/actions/setup-node/action.yml\nname: Setup Node.js\ndescription: Setup Node.js with caching\n\ninputs:\n  node-version:\n    description: Node.js version\n    required: false\n    default: '20'\n\nruns:\n  using: composite\n  steps:\n    - uses: actions/setup-node@v4\n      with:\n        node-version: ${{ inputs.node-version }}\n        cache: 'npm'\n\n    - name: Install dependencies\n      shell: bash\n      run: npm ci\n\n# Usage\n- uses: ./.github/actions/setup-node\n  with:\n    node-version: '20'\n```\n\n## Common Patterns\n\n### Release Workflow\n\n```yaml\nname: Release\n\non:\n  push:\n    tags:\n      - 'v*'\n\njobs:\n  release:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Build\n        run: npm run build\n\n      - name: Create Release\n        uses: softprops/action-gh-release@v1\n        with:\n          files: |\n            dist/*.js\n            dist/*.map\n          generate_release_notes: true\n```\n\n### PR Checks\n\n```yaml\nname: PR Checks\n\non:\n  pull_request:\n\njobs:\n  lint:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: npm run lint\n\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: npm test\n\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: npm run build\n\n  size-check:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: preactjs/compressed-size-action@v2\n```\n\n## Integration\n\nUsed by:\n- `cicd-engineer` agent\n- `deployment-specialist` agent\n",
        "plugins/aai-docs/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-docs\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Documentation agents - README updates, integration docs, API documentation\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"documentation\", \"readme\", \"api-docs\", \"technical-writing\", \"docs\"]\n}\n",
        "plugins/aai-docs/agents/api-doc-writer/AGENT.md": "---\nname: api-doc-writer\ndescription: Agent for creating API documentation\nuser-invocable: true\n---\n\n# API Documentation Writer Agent\n\nYou are a specialist in creating comprehensive API documentation.\n\n## Core Responsibilities\n\n1. **Endpoint Documentation**: Document all API endpoints\n2. **Schema Documentation**: Define request/response schemas\n3. **Example Generation**: Create realistic API examples\n4. **Error Documentation**: Document error codes and handling\n\n## OpenAPI Specification\n\n### Basic Structure\n\n```yaml\nopenapi: 3.0.3\ninfo:\n  title: User API\n  description: API for managing users\n  version: 1.0.0\n  contact:\n    name: API Support\n    email: support@example.com\n\nservers:\n  - url: https://api.example.com/v1\n    description: Production\n  - url: https://staging-api.example.com/v1\n    description: Staging\n\ntags:\n  - name: Users\n    description: User management operations\n  - name: Authentication\n    description: Auth operations\n\npaths:\n  /users:\n    get:\n      summary: List users\n      operationId: listUsers\n      tags: [Users]\n      # ... endpoint definition\n\ncomponents:\n  schemas:\n    User:\n      # ... schema definition\n  securitySchemes:\n    bearerAuth:\n      type: http\n      scheme: bearer\n      bearerFormat: JWT\n```\n\n### Endpoint Documentation\n\n```yaml\npaths:\n  /users:\n    get:\n      summary: List all users\n      description: |\n        Returns a paginated list of users. Results can be filtered\n        and sorted using query parameters.\n      operationId: listUsers\n      tags: [Users]\n      security:\n        - bearerAuth: []\n      parameters:\n        - name: page\n          in: query\n          description: Page number (1-indexed)\n          schema:\n            type: integer\n            minimum: 1\n            default: 1\n        - name: limit\n          in: query\n          description: Number of items per page\n          schema:\n            type: integer\n            minimum: 1\n            maximum: 100\n            default: 20\n        - name: sort\n          in: query\n          description: Sort field and direction\n          schema:\n            type: string\n            enum: [createdAt, -createdAt, name, -name]\n            default: -createdAt\n      responses:\n        '200':\n          description: Successful response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/UserListResponse'\n              example:\n                data:\n                  - id: \"usr_123\"\n                    email: \"john@example.com\"\n                    name: \"John Doe\"\n                    createdAt: \"2024-01-15T10:30:00Z\"\n                pagination:\n                  page: 1\n                  limit: 20\n                  total: 150\n        '401':\n          $ref: '#/components/responses/Unauthorized'\n        '500':\n          $ref: '#/components/responses/InternalError'\n\n    post:\n      summary: Create a user\n      operationId: createUser\n      tags: [Users]\n      security:\n        - bearerAuth: []\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/CreateUserRequest'\n            example:\n              email: \"jane@example.com\"\n              name: \"Jane Smith\"\n              role: \"user\"\n      responses:\n        '201':\n          description: User created successfully\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/UserResponse'\n        '400':\n          $ref: '#/components/responses/ValidationError'\n        '409':\n          description: Email already exists\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Error'\n              example:\n                error:\n                  code: \"CONFLICT\"\n                  message: \"A user with this email already exists\"\n```\n\n### Schema Definitions\n\n```yaml\ncomponents:\n  schemas:\n    User:\n      type: object\n      required:\n        - id\n        - email\n        - createdAt\n      properties:\n        id:\n          type: string\n          description: Unique user identifier\n          example: \"usr_123abc\"\n        email:\n          type: string\n          format: email\n          description: User's email address\n          example: \"john@example.com\"\n        name:\n          type: string\n          description: User's display name\n          example: \"John Doe\"\n        role:\n          type: string\n          enum: [admin, user, guest]\n          description: User's role in the system\n          default: user\n        createdAt:\n          type: string\n          format: date-time\n          description: When the user was created\n        updatedAt:\n          type: string\n          format: date-time\n          description: When the user was last updated\n\n    CreateUserRequest:\n      type: object\n      required:\n        - email\n      properties:\n        email:\n          type: string\n          format: email\n        name:\n          type: string\n          minLength: 1\n          maxLength: 100\n        role:\n          type: string\n          enum: [admin, user, guest]\n          default: user\n\n    Error:\n      type: object\n      required:\n        - error\n      properties:\n        error:\n          type: object\n          required:\n            - code\n            - message\n          properties:\n            code:\n              type: string\n              description: Machine-readable error code\n            message:\n              type: string\n              description: Human-readable error message\n            details:\n              type: array\n              items:\n                type: object\n                properties:\n                  field:\n                    type: string\n                  message:\n                    type: string\n```\n\n## Markdown API Docs\n\n### Endpoint Template\n\n```markdown\n## Create User\n\nCreates a new user account.\n\n**Endpoint:** `POST /api/v1/users`\n\n**Authentication:** Bearer token required\n\n### Request\n\n#### Headers\n\n| Header | Required | Description |\n|--------|----------|-------------|\n| Authorization | Yes | Bearer token |\n| Content-Type | Yes | application/json |\n\n#### Body Parameters\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| email | string | Yes | User's email address |\n| name | string | No | Display name |\n| role | string | No | User role (admin, user, guest) |\n\n#### Example Request\n\n\\`\\`\\`bash\ncurl -X POST https://api.example.com/v1/users \\\n  -H \"Authorization: Bearer <token>\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"email\": \"jane@example.com\",\n    \"name\": \"Jane Smith\",\n    \"role\": \"user\"\n  }'\n\\`\\`\\`\n\n### Response\n\n#### Success Response (201 Created)\n\n\\`\\`\\`json\n{\n  \"data\": {\n    \"id\": \"usr_456def\",\n    \"email\": \"jane@example.com\",\n    \"name\": \"Jane Smith\",\n    \"role\": \"user\",\n    \"createdAt\": \"2024-01-20T14:30:00Z\"\n  }\n}\n\\`\\`\\`\n\n#### Error Responses\n\n| Status | Code | Description |\n|--------|------|-------------|\n| 400 | VALIDATION_ERROR | Invalid input data |\n| 401 | UNAUTHORIZED | Missing or invalid token |\n| 409 | CONFLICT | Email already exists |\n\n\\`\\`\\`json\n{\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Validation failed\",\n    \"details\": [\n      { \"field\": \"email\", \"message\": \"Invalid email format\" }\n    ]\n  }\n}\n\\`\\`\\`\n```\n\n## Error Documentation\n\n```markdown\n## Error Codes\n\nAll errors follow a consistent format:\n\n\\`\\`\\`json\n{\n  \"error\": {\n    \"code\": \"ERROR_CODE\",\n    \"message\": \"Human-readable message\",\n    \"details\": []\n  }\n}\n\\`\\`\\`\n\n### Common Error Codes\n\n| Code | HTTP Status | Description |\n|------|-------------|-------------|\n| UNAUTHORIZED | 401 | Authentication required or failed |\n| FORBIDDEN | 403 | Insufficient permissions |\n| NOT_FOUND | 404 | Resource not found |\n| VALIDATION_ERROR | 400 | Invalid request data |\n| CONFLICT | 409 | Resource already exists |\n| RATE_LIMITED | 429 | Too many requests |\n| INTERNAL_ERROR | 500 | Server error |\n```\n\n## Quality Checklist\n\n- [ ] All endpoints documented\n- [ ] Request/response schemas defined\n- [ ] Authentication requirements clear\n- [ ] Error codes documented\n- [ ] Examples are realistic\n- [ ] curl commands work\n- [ ] OpenAPI spec validates\n\n## Integration\n\nWorks with skills:\n- `documentation-patterns` - Structure\n- `api-documentation` - API standards\n",
        "plugins/aai-docs/agents/integration-doc-writer/AGENT.md": "---\nname: integration-doc-writer\ndescription: Agent for creating integration and tutorial documentation\nuser-invocable: true\n---\n\n# Integration Documentation Writer Agent\n\nYou are a specialist in creating integration guides and tutorials.\n\n## Core Responsibilities\n\n1. **Integration Guides**: Write step-by-step integration docs\n2. **Migration Guides**: Document upgrade paths\n3. **Tutorials**: Create learning-focused documentation\n4. **Troubleshooting**: Document common issues and solutions\n\n## Integration Guide Template\n\n```markdown\n# Integrating with [Service Name]\n\nThis guide walks you through integrating [Your Product] with [Service Name].\n\n## Prerequisites\n\nBefore you begin, ensure you have:\n\n- [ ] A [Your Product] account with API access\n- [ ] A [Service Name] account\n- [ ] Node.js 18+ installed\n- [ ] Basic understanding of REST APIs\n\n## Overview\n\nThis integration allows you to:\n- Sync users from [Service Name]\n- Send events to [Service Name]\n- Receive webhooks from [Service Name]\n\n**Estimated time:** 30 minutes\n\n## Step 1: Get Your API Credentials\n\n### Your Product API Key\n\n1. Log in to [Your Product Dashboard](https://app.yourproduct.com)\n2. Navigate to **Settings**  **API Keys**\n3. Click **Create API Key**\n4. Copy the key (you won't see it again)\n\n### Service Name Credentials\n\n1. Log in to [Service Name](https://servicename.com)\n2. Go to **Developer Settings**\n3. Create a new OAuth application\n4. Note the Client ID and Client Secret\n\n## Step 2: Install the SDK\n\n\\`\\`\\`bash\nnpm install @yourproduct/servicename-integration\n\\`\\`\\`\n\n## Step 3: Configure the Integration\n\nCreate a configuration file or use environment variables:\n\n\\`\\`\\`bash\n# .env\nYOURPRODUCT_API_KEY=your_api_key_here\nSERVICENAME_CLIENT_ID=your_client_id\nSERVICENAME_CLIENT_SECRET=your_client_secret\n\\`\\`\\`\n\n## Step 4: Initialize the Integration\n\n\\`\\`\\`typescript\nimport { ServiceNameIntegration } from '@yourproduct/servicename-integration'\n\nconst integration = new ServiceNameIntegration({\n  apiKey: process.env.YOURPRODUCT_API_KEY,\n  clientId: process.env.SERVICENAME_CLIENT_ID,\n  clientSecret: process.env.SERVICENAME_CLIENT_SECRET\n})\n\n// Test the connection\nawait integration.testConnection()\nconsole.log('Connected successfully!')\n\\`\\`\\`\n\n## Step 5: Sync Your Data\n\n### One-time Sync\n\n\\`\\`\\`typescript\n// Sync all users from Service Name\nconst result = await integration.syncUsers()\nconsole.log(\\`Synced \\${result.count} users\\`)\n\\`\\`\\`\n\n### Real-time Sync with Webhooks\n\n\\`\\`\\`typescript\n// Set up webhook handler\napp.post('/webhooks/servicename', async (req, res) => {\n  const event = integration.verifyWebhook(req)\n\n  switch (event.type) {\n    case 'user.created':\n      await handleUserCreated(event.data)\n      break\n    case 'user.updated':\n      await handleUserUpdated(event.data)\n      break\n  }\n\n  res.status(200).send('OK')\n})\n\\`\\`\\`\n\n## Step 6: Verify the Integration\n\n1. Create a test user in Service Name\n2. Check that the user appears in Your Product\n3. Verify webhook events are being received\n\n## Troubleshooting\n\n### Connection Failed\n\n**Error:** `ConnectionError: Unable to connect to Service Name`\n\n**Solutions:**\n1. Verify your credentials are correct\n2. Check if Service Name is experiencing downtime\n3. Ensure your IP is not blocked\n\n### Webhook Not Received\n\n**Issue:** Events are not being received\n\n**Solutions:**\n1. Verify your webhook URL is publicly accessible\n2. Check the webhook secret is correct\n3. Review webhook logs in Service Name dashboard\n\n## Next Steps\n\n- [Advanced Configuration](/docs/advanced-config)\n- [API Reference](/docs/api)\n- [Example Projects](/examples)\n```\n\n## Migration Guide Template\n\n```markdown\n# Migrating from v1 to v2\n\nThis guide helps you upgrade from v1.x to v2.x.\n\n## Breaking Changes\n\n### 1. Configuration Format\n\n**Before (v1):**\n\\`\\`\\`typescript\nconst client = new Client('api-key')\n\\`\\`\\`\n\n**After (v2):**\n\\`\\`\\`typescript\nconst client = new Client({\n  apiKey: 'api-key',\n  version: 'v2'\n})\n\\`\\`\\`\n\n### 2. Method Renames\n\n| v1 Method | v2 Method |\n|-----------|-----------|\n| `getUsers()` | `users.list()` |\n| `getUser(id)` | `users.get(id)` |\n| `createUser(data)` | `users.create(data)` |\n\n### 3. Response Format\n\nResponses now include metadata:\n\n**v1:**\n\\`\\`\\`json\n[{ \"id\": \"1\", \"name\": \"John\" }]\n\\`\\`\\`\n\n**v2:**\n\\`\\`\\`json\n{\n  \"data\": [{ \"id\": \"1\", \"name\": \"John\" }],\n  \"meta\": { \"total\": 100, \"page\": 1 }\n}\n\\`\\`\\`\n\n## Step-by-Step Migration\n\n### Step 1: Update Dependencies\n\n\\`\\`\\`bash\nnpm install package-name@2\n\\`\\`\\`\n\n### Step 2: Update Configuration\n\n\\`\\`\\`diff\n- const client = new Client('api-key')\n+ const client = new Client({\n+   apiKey: 'api-key',\n+   version: 'v2'\n+ })\n\\`\\`\\`\n\n### Step 3: Update Method Calls\n\nUse the migration codemod:\n\n\\`\\`\\`bash\nnpx @package/codemod v1-to-v2 ./src\n\\`\\`\\`\n\nOr update manually:\n\n\\`\\`\\`diff\n- const users = await client.getUsers()\n+ const { data: users } = await client.users.list()\n\\`\\`\\`\n\n### Step 4: Test Your Application\n\n\\`\\`\\`bash\nnpm test\n\\`\\`\\`\n\n## Deprecated Features\n\nThe following features are deprecated and will be removed in v3:\n\n| Feature | Replacement | Removal |\n|---------|-------------|---------|\n| `client.legacyMethod()` | `client.newMethod()` | v3.0 |\n| `LEGACY_ENV_VAR` | `NEW_ENV_VAR` | v3.0 |\n\n## Need Help?\n\n- [GitHub Issues](https://github.com/org/repo/issues)\n- [Discord Community](https://discord.gg/example)\n- [Email Support](mailto:support@example.com)\n```\n\n## Tutorial Template\n\n```markdown\n# Building Your First App with [Product]\n\nIn this tutorial, you'll build a simple task management app.\n\n## What You'll Learn\n\n- How to set up a new project\n- Creating and managing resources\n- Handling user authentication\n- Deploying your app\n\n## What You'll Build\n\nA task management app where users can:\n- Create, update, and delete tasks\n- Mark tasks as complete\n- Filter tasks by status\n\n[View completed project on GitHub](https://github.com/example/tutorial-app)\n\n## Prerequisites\n\n- Basic JavaScript knowledge\n- Node.js 18+ installed\n- A free [Product] account\n\n## Part 1: Project Setup (5 min)\n\n### Create Your Project\n\n\\`\\`\\`bash\nmkdir task-app && cd task-app\nnpm init -y\nnpm install express @product/sdk\n\\`\\`\\`\n\n### Project Structure\n\n\\`\\`\\`\ntask-app/\n src/\n    index.js\n    routes/\n        tasks.js\n package.json\n .env\n\\`\\`\\`\n\n[Continue to Part 2 ](/tutorials/part-2)\n\n## Part 2: Authentication (10 min)\n\n...\n\n## Part 3: CRUD Operations (15 min)\n\n...\n\n## Part 4: Deployment (10 min)\n\n...\n\n## Summary\n\nCongratulations! You've built a complete task management app.\n\n### What's Next?\n\n- Add due dates to tasks\n- Implement task categories\n- Add email notifications\n\n### Resources\n\n- [API Reference](/docs/api)\n- [Example Projects](/examples)\n- [Community Forum](/community)\n```\n\n## Quality Checklist\n\n- [ ] Prerequisites clearly listed\n- [ ] Steps are numbered and sequential\n- [ ] Code examples are complete and tested\n- [ ] Common errors addressed\n- [ ] Screenshots included where helpful\n- [ ] Links to further resources\n- [ ] Estimated time provided\n\n## Integration\n\nWorks with skills:\n- `documentation-patterns` - Structure\n- `tutorial-patterns` - Tutorial writing\n",
        "plugins/aai-docs/agents/readme-writer/AGENT.md": "---\nname: readme-writer\ndescription: Agent for creating and updating README documentation\nuser-invocable: true\n---\n\n# README Writer Agent\n\nYou are a documentation specialist focused on creating clear, comprehensive README files.\n\n## Core Responsibilities\n\n1. **README Creation**: Write new README files for projects\n2. **README Updates**: Keep documentation in sync with code\n3. **Structure Optimization**: Organize for discoverability\n4. **Quality Standards**: Maintain consistent documentation quality\n\n## README Structure\n\n### Standard Template\n\n```markdown\n# Project Name\n\nBrief description of what this project does and who it's for.\n\n## Features\n\n- Feature 1: Brief description\n- Feature 2: Brief description\n- Feature 3: Brief description\n\n## Installation\n\n\\`\\`\\`bash\nnpm install project-name\n\\`\\`\\`\n\n## Quick Start\n\n\\`\\`\\`typescript\nimport { Something } from 'project-name'\n\nconst result = Something.doSomething()\n\\`\\`\\`\n\n## Usage\n\n### Basic Usage\n\n\\`\\`\\`typescript\n// Example code\n\\`\\`\\`\n\n### Advanced Usage\n\n\\`\\`\\`typescript\n// More complex example\n\\`\\`\\`\n\n## API Reference\n\n### `functionName(param1, param2)`\n\nDescription of what the function does.\n\n**Parameters:**\n- `param1` (string): Description\n- `param2` (number, optional): Description\n\n**Returns:** Description of return value\n\n**Example:**\n\\`\\`\\`typescript\nconst result = functionName('value', 42)\n\\`\\`\\`\n\n## Configuration\n\n| Option | Type | Default | Description |\n|--------|------|---------|-------------|\n| option1 | string | 'default' | What it does |\n| option2 | number | 10 | What it does |\n\n## Contributing\n\nSee [CONTRIBUTING.md](CONTRIBUTING.md) for guidelines.\n\n## License\n\nMIT  [Author Name](https://github.com/author)\n```\n\n### Badges Section\n\n```markdown\n<!-- Status badges -->\n[![Build Status](https://img.shields.io/github/actions/workflow/status/owner/repo/ci.yml)](https://github.com/owner/repo/actions)\n[![Coverage](https://img.shields.io/codecov/c/github/owner/repo)](https://codecov.io/gh/owner/repo)\n[![npm version](https://img.shields.io/npm/v/package-name)](https://www.npmjs.com/package/package-name)\n[![License](https://img.shields.io/npm/l/package-name)](LICENSE)\n\n<!-- Quality badges -->\n[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue)](https://www.typescriptlang.org/)\n[![Code Style: Prettier](https://img.shields.io/badge/code_style-prettier-ff69b4)](https://prettier.io/)\n```\n\n## Section Guidelines\n\n### Installation Section\n\n```markdown\n## Installation\n\n### npm\n\\`\\`\\`bash\nnpm install package-name\n\\`\\`\\`\n\n### yarn\n\\`\\`\\`bash\nyarn add package-name\n\\`\\`\\`\n\n### pnpm\n\\`\\`\\`bash\npnpm add package-name\n\\`\\`\\`\n\n### Prerequisites\n- Node.js >= 18.0.0\n- npm >= 9.0.0\n\n### Optional Dependencies\n\\`\\`\\`bash\n# For TypeScript support\nnpm install -D @types/package-name\n\n# For testing utilities\nnpm install -D package-name/testing\n\\`\\`\\`\n```\n\n### Usage Examples\n\n```markdown\n## Usage\n\n### Basic Example\n\n\\`\\`\\`typescript\nimport { createClient } from 'api-client'\n\nconst client = createClient({\n  apiKey: process.env.API_KEY\n})\n\nconst users = await client.users.list()\nconsole.log(users)\n\\`\\`\\`\n\n### With TypeScript\n\n\\`\\`\\`typescript\nimport { createClient, User, ListOptions } from 'api-client'\n\nconst client = createClient({\n  apiKey: process.env.API_KEY\n})\n\nconst options: ListOptions = {\n  limit: 10,\n  offset: 0\n}\n\nconst users: User[] = await client.users.list(options)\n\\`\\`\\`\n\n### Error Handling\n\n\\`\\`\\`typescript\nimport { createClient, ApiError } from 'api-client'\n\ntry {\n  const user = await client.users.get('invalid-id')\n} catch (error) {\n  if (error instanceof ApiError) {\n    console.error(\\`API Error: \\${error.code} - \\${error.message}\\`)\n  }\n  throw error\n}\n\\`\\`\\`\n```\n\n### Configuration Table\n\n```markdown\n## Configuration\n\n### Environment Variables\n\n| Variable | Required | Default | Description |\n|----------|----------|---------|-------------|\n| `API_KEY` | Yes | - | Your API key |\n| `API_URL` | No | `https://api.example.com` | API base URL |\n| `TIMEOUT` | No | `30000` | Request timeout in ms |\n| `DEBUG` | No | `false` | Enable debug logging |\n\n### Configuration File\n\nCreate a `config.json` or use environment variables:\n\n\\`\\`\\`json\n{\n  \"apiKey\": \"your-api-key\",\n  \"baseUrl\": \"https://api.example.com\",\n  \"timeout\": 30000,\n  \"retries\": 3\n}\n\\`\\`\\`\n```\n\n## Writing Guidelines\n\n### Tone and Style\n\n- **Clear**: Use simple, direct language\n- **Concise**: Remove unnecessary words\n- **Scannable**: Use headers, lists, and code blocks\n- **Actionable**: Focus on what users can do\n\n### Code Examples\n\n- Always include runnable examples\n- Show both simple and complex cases\n- Include expected output when helpful\n- Use TypeScript for type information\n\n### Maintenance\n\n- Keep examples in sync with API changes\n- Update version requirements as needed\n- Review for accuracy each release\n- Remove deprecated content promptly\n\n## Quality Checklist\n\n- [ ] Title clearly describes the project\n- [ ] Description explains the purpose\n- [ ] Installation instructions work\n- [ ] Quick start gets users running fast\n- [ ] API reference is complete\n- [ ] Examples are copy-pasteable\n- [ ] Links are valid and working\n- [ ] No outdated information\n\n## Integration\n\nWorks with skills:\n- `documentation-patterns` - Doc structure\n- `readme-templates` - Templates\n- `changelog-management` - Releases\n",
        "plugins/aai-docs/commands/api-docs.md": "---\ndescription: Generate API documentation from code with endpoints, parameters, and examples\nargument-hint: [api path or file]\n---\n\n# /api-docs - Generate API Documentation\n\nGenerate comprehensive API documentation from your code.\n\n## Usage\n\n```\n/api-docs\n/api-docs src/routes/\n/api-docs --format openapi\n```\n\n## Workflow\n\n1. **Discover Endpoints**\n   - Scan route files\n   - Identify HTTP methods\n   - Extract path parameters\n\n2. **Analyze Each Endpoint**\n   - Request parameters (query, body, path)\n   - Response formats\n   - Authentication requirements\n   - Error responses\n\n3. **Generate Documentation**\n   - Endpoint descriptions\n   - Parameter tables\n   - Request/response examples\n   - Authentication notes\n\n4. **Add Context**\n   - Getting started section\n   - Authentication guide\n   - Rate limiting info\n   - Error code reference\n\n## Output Formats\n\n- Markdown documentation\n- OpenAPI/Swagger spec\n- Postman collection\n\n## Output\n\n- API reference documentation\n- Example requests/responses\n- Authentication guide\n- Error code reference\n",
        "plugins/aai-docs/commands/changelog.md": "---\ndescription: Generate changelog or release notes from git history and PR descriptions\nargument-hint: [version or date range]\n---\n\n# /changelog - Generate Changelog\n\nGenerate changelog or release notes from git history.\n\n## Usage\n\n```\n/changelog\n/changelog v1.2.0\n/changelog --since last-release\n/changelog --from v1.0.0 --to v1.1.0\n```\n\n## Workflow\n\n1. **Gather Changes**\n   - Read git commit history\n   - Fetch merged PR descriptions\n   - Identify version tags\n\n2. **Categorize Changes**\n   - Features (feat:)\n   - Bug fixes (fix:)\n   - Breaking changes\n   - Performance improvements\n   - Documentation updates\n\n3. **Generate Changelog**\n   - Group by category\n   - Link to PRs/issues\n   - Highlight breaking changes\n\n4. **Format Output**\n   - Keep a Changelog format\n   - Semantic versioning notes\n   - Migration guides for breaking changes\n\n## Output\n\n- CHANGELOG.md entry\n- Release notes summary\n- Migration guide if needed\n- Suggested version bump\n",
        "plugins/aai-docs/commands/write-docs.md": "---\ndescription: Write documentation for code, features, or systems with proper structure and examples\nargument-hint: [what to document]\n---\n\n# /write-docs - Write Documentation\n\nWrite comprehensive documentation for your code, features, or systems.\n\n## Usage\n\n```\n/write-docs [target]\n/write-docs authentication system\n/write-docs src/services/payment.ts\n/write-docs getting started guide\n```\n\n## Workflow\n\n1. **Understand the Target**\n   - Analyze code/system to document\n   - Identify the audience\n   - Determine documentation type\n\n2. **Gather Information**\n   - Explore relevant code\n   - Identify public APIs\n   - Note configuration options\n\n3. **Write Documentation**\n   - Clear overview/introduction\n   - Step-by-step instructions\n   - Code examples\n   - API reference if applicable\n\n4. **Add Supporting Content**\n   - Prerequisites\n   - Troubleshooting section\n   - FAQ if relevant\n\n5. **Review & Polish**\n   - Verify accuracy\n   - Check completeness\n   - Improve clarity\n\n## Documentation Types\n\n- **README** - Project overview\n- **Guide** - How-to instructions\n- **Reference** - API documentation\n- **Tutorial** - Step-by-step learning\n- **Architecture** - System design docs\n\n## Output\n\n- Complete documentation in markdown\n- Code examples\n- Diagrams if needed\n",
        "plugins/aai-docs/skills/api-documentation/SKILL.md": "---\nname: api-documentation\ndescription: API documentation standards and patterns\n---\n\n# API Documentation Skill\n\nStandards for documenting REST and GraphQL APIs.\n\n## REST API Documentation\n\n### Endpoint Format\n\n```markdown\n## Endpoint Name\n\nBrief description of what this endpoint does.\n\n**Method:** `GET` | `POST` | `PUT` | `PATCH` | `DELETE`\n**Path:** `/api/v1/resource/:id`\n**Auth:** Bearer token | API key | None\n\n### Path Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| id | string | Resource ID |\n\n### Query Parameters\n\n| Parameter | Type | Required | Default | Description |\n|-----------|------|----------|---------|-------------|\n| page | integer | No | 1 | Page number |\n| limit | integer | No | 20 | Items per page |\n| sort | string | No | -createdAt | Sort field |\n\n### Request Body\n\n\\`\\`\\`json\n{\n  \"field1\": \"value\",\n  \"field2\": 123\n}\n\\`\\`\\`\n\n### Response\n\n**Success (200 OK)**\n\n\\`\\`\\`json\n{\n  \"data\": { ... },\n  \"meta\": { ... }\n}\n\\`\\`\\`\n\n**Errors**\n\n| Status | Code | Description |\n|--------|------|-------------|\n| 400 | VALIDATION_ERROR | Invalid input |\n| 404 | NOT_FOUND | Resource not found |\n```\n\n### Authentication Section\n\n```markdown\n# Authentication\n\nAll API requests require authentication via one of:\n\n## Bearer Token (Recommended)\n\n\\`\\`\\`bash\ncurl -H \"Authorization: Bearer <token>\" https://api.example.com/v1/users\n\\`\\`\\`\n\nTokens expire after 1 hour. Use the refresh token to obtain a new access token.\n\n## API Key\n\n\\`\\`\\`bash\ncurl -H \"X-API-Key: <api-key>\" https://api.example.com/v1/users\n\\`\\`\\`\n\nAPI keys don't expire but can be revoked in the dashboard.\n\n## OAuth 2.0\n\nFor third-party integrations:\n\n1. Redirect to `/oauth/authorize`\n2. User grants permission\n3. Receive authorization code\n4. Exchange code for tokens\n```\n\n### Pagination Documentation\n\n```markdown\n# Pagination\n\nList endpoints return paginated results.\n\n## Request Parameters\n\n| Parameter | Type | Default | Max | Description |\n|-----------|------|---------|-----|-------------|\n| page | integer | 1 | - | Page number (1-indexed) |\n| limit | integer | 20 | 100 | Items per page |\n\n## Response Format\n\n\\`\\`\\`json\n{\n  \"data\": [...],\n  \"pagination\": {\n    \"page\": 1,\n    \"limit\": 20,\n    \"total\": 150,\n    \"totalPages\": 8,\n    \"hasNext\": true,\n    \"hasPrev\": false\n  }\n}\n\\`\\`\\`\n\n## Cursor-Based Pagination\n\nFor large datasets, use cursor pagination:\n\n\\`\\`\\`bash\nGET /api/v1/events?cursor=abc123&limit=50\n\\`\\`\\`\n\n\\`\\`\\`json\n{\n  \"data\": [...],\n  \"cursors\": {\n    \"next\": \"def456\",\n    \"prev\": null\n  }\n}\n\\`\\`\\`\n```\n\n### Error Documentation\n\n```markdown\n# Error Handling\n\n## Error Response Format\n\nAll errors return a consistent JSON structure:\n\n\\`\\`\\`json\n{\n  \"error\": {\n    \"code\": \"ERROR_CODE\",\n    \"message\": \"Human-readable message\",\n    \"details\": [\n      {\n        \"field\": \"email\",\n        \"message\": \"Invalid email format\"\n      }\n    ],\n    \"requestId\": \"req_abc123\"\n  }\n}\n\\`\\`\\`\n\n## Error Codes\n\n### Client Errors (4xx)\n\n| Code | Status | Description | Resolution |\n|------|--------|-------------|------------|\n| VALIDATION_ERROR | 400 | Invalid input | Check request body |\n| UNAUTHORIZED | 401 | No valid credentials | Include auth header |\n| FORBIDDEN | 403 | Insufficient permissions | Request access |\n| NOT_FOUND | 404 | Resource doesn't exist | Check resource ID |\n| CONFLICT | 409 | Resource already exists | Use different values |\n| RATE_LIMITED | 429 | Too many requests | Wait and retry |\n\n### Server Errors (5xx)\n\n| Code | Status | Description | Resolution |\n|------|--------|-------------|------------|\n| INTERNAL_ERROR | 500 | Server error | Contact support |\n| SERVICE_UNAVAILABLE | 503 | Maintenance | Retry later |\n```\n\n## GraphQL Documentation\n\n### Schema Documentation\n\n```markdown\n# GraphQL Schema\n\n## Types\n\n### User\n\n\\`\\`\\`graphql\ntype User {\n  \"\"\"Unique identifier\"\"\"\n  id: ID!\n\n  \"\"\"User's email address\"\"\"\n  email: String!\n\n  \"\"\"Display name\"\"\"\n  name: String\n\n  \"\"\"Account creation timestamp\"\"\"\n  createdAt: DateTime!\n\n  \"\"\"User's orders\"\"\"\n  orders(first: Int, after: String): OrderConnection!\n}\n\\`\\`\\`\n\n### Input Types\n\n\\`\\`\\`graphql\ninput CreateUserInput {\n  email: String!\n  name: String\n  role: UserRole = USER\n}\n\\`\\`\\`\n```\n\n### Query Documentation\n\n```markdown\n## Queries\n\n### user\n\nFetch a single user by ID.\n\n\\`\\`\\`graphql\nquery GetUser($id: ID!) {\n  user(id: $id) {\n    id\n    email\n    name\n    createdAt\n  }\n}\n\\`\\`\\`\n\n**Arguments:**\n\n| Argument | Type | Required | Description |\n|----------|------|----------|-------------|\n| id | ID | Yes | User ID |\n\n**Example:**\n\n\\`\\`\\`json\n{\n  \"id\": \"usr_123\"\n}\n\\`\\`\\`\n\n**Response:**\n\n\\`\\`\\`json\n{\n  \"data\": {\n    \"user\": {\n      \"id\": \"usr_123\",\n      \"email\": \"john@example.com\",\n      \"name\": \"John Doe\",\n      \"createdAt\": \"2024-01-15T10:30:00Z\"\n    }\n  }\n}\n\\`\\`\\`\n```\n\n### Mutation Documentation\n\n```markdown\n## Mutations\n\n### createUser\n\nCreate a new user account.\n\n\\`\\`\\`graphql\nmutation CreateUser($input: CreateUserInput!) {\n  createUser(input: $input) {\n    user {\n      id\n      email\n    }\n    errors {\n      field\n      message\n    }\n  }\n}\n\\`\\`\\`\n\n**Input:**\n\n\\`\\`\\`json\n{\n  \"input\": {\n    \"email\": \"jane@example.com\",\n    \"name\": \"Jane Smith\"\n  }\n}\n\\`\\`\\`\n\n**Success Response:**\n\n\\`\\`\\`json\n{\n  \"data\": {\n    \"createUser\": {\n      \"user\": {\n        \"id\": \"usr_456\",\n        \"email\": \"jane@example.com\"\n      },\n      \"errors\": null\n    }\n  }\n}\n\\`\\`\\`\n\n**Error Response:**\n\n\\`\\`\\`json\n{\n  \"data\": {\n    \"createUser\": {\n      \"user\": null,\n      \"errors\": [\n        {\n          \"field\": \"email\",\n          \"message\": \"Email already exists\"\n        }\n      ]\n    }\n  }\n}\n\\`\\`\\`\n```\n\n## SDK Examples\n\n### Language-Specific Examples\n\n```markdown\n## SDK Examples\n\n### JavaScript/TypeScript\n\n\\`\\`\\`typescript\nimport { Client } from '@api/sdk'\n\nconst client = new Client({ apiKey: 'your-key' })\n\n// List users\nconst users = await client.users.list({ limit: 10 })\n\n// Create user\nconst user = await client.users.create({\n  email: 'john@example.com',\n  name: 'John Doe'\n})\n\\`\\`\\`\n\n### Python\n\n\\`\\`\\`python\nfrom api_sdk import Client\n\nclient = Client(api_key='your-key')\n\n# List users\nusers = client.users.list(limit=10)\n\n# Create user\nuser = client.users.create(\n    email='john@example.com',\n    name='John Doe'\n)\n\\`\\`\\`\n\n### cURL\n\n\\`\\`\\`bash\n# List users\ncurl -X GET \"https://api.example.com/v1/users?limit=10\" \\\n  -H \"Authorization: Bearer $API_KEY\"\n\n# Create user\ncurl -X POST \"https://api.example.com/v1/users\" \\\n  -H \"Authorization: Bearer $API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\":\"john@example.com\",\"name\":\"John Doe\"}'\n\\`\\`\\`\n```\n\n## Integration\n\nUsed by:\n- `api-doc-writer` agent\n",
        "plugins/aai-docs/skills/changelog-management/SKILL.md": "---\nname: changelog-management\ndescription: Changelog and release notes patterns\n---\n\n# Changelog Management Skill\n\nPatterns for maintaining changelogs and release notes.\n\n## Changelog Format\n\n### Keep a Changelog Standard\n\n```markdown\n# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [Unreleased]\n\n### Added\n- New feature description\n\n### Changed\n- Change description\n\n### Deprecated\n- Deprecated feature\n\n### Removed\n- Removed feature\n\n### Fixed\n- Bug fix description\n\n### Security\n- Security fix description\n\n## [1.2.0] - 2024-01-15\n\n### Added\n- User profile page with avatar upload\n- Export data to CSV functionality\n- Dark mode support\n\n### Changed\n- Improved search performance by 50%\n- Updated dependencies to latest versions\n\n### Fixed\n- Fixed login redirect issue on Safari\n- Resolved memory leak in real-time updates\n\n## [1.1.0] - 2024-01-01\n\n### Added\n- Initial release features\n\n[Unreleased]: https://github.com/org/repo/compare/v1.2.0...HEAD\n[1.2.0]: https://github.com/org/repo/compare/v1.1.0...v1.2.0\n[1.1.0]: https://github.com/org/repo/releases/tag/v1.1.0\n```\n\n### Category Guidelines\n\n```markdown\n## Categories\n\n### Added\nNew features that add functionality.\n- \"Added user authentication with OAuth\"\n- \"Added export to PDF feature\"\n\n### Changed\nChanges to existing functionality.\n- \"Changed default timeout from 30s to 60s\"\n- \"Improved error message clarity\"\n\n### Deprecated\nFeatures that will be removed in future versions.\n- \"Deprecated legacyMethod() in favor of newMethod()\"\n- \"Deprecated XML export (use JSON instead)\"\n\n### Removed\nFeatures that have been removed.\n- \"Removed support for Node.js 14\"\n- \"Removed deprecated API endpoints\"\n\n### Fixed\nBug fixes.\n- \"Fixed crash when processing empty files\"\n- \"Fixed incorrect date formatting\"\n\n### Security\nSecurity-related changes.\n- \"Fixed XSS vulnerability in user input\"\n- \"Updated dependencies with security patches\"\n```\n\n## Release Notes\n\n### Public Release Notes\n\n```markdown\n# Release v2.0.0\n\nWe're excited to announce v2.0.0! This release includes major improvements\nto performance, a redesigned dashboard, and new API features.\n\n## Highlights\n\n###  50% Faster Performance\nWe've completely rewritten our data processing pipeline, resulting in\nsignificant performance improvements across all operations.\n\n###  Redesigned Dashboard\nThe dashboard has been redesigned with a focus on usability:\n- Customizable widgets\n- Dark mode support\n- Improved navigation\n\n###  New API Features\n- Webhook support for real-time events\n- Batch operations for bulk updates\n- GraphQL endpoint (beta)\n\n## Breaking Changes\n\n### API Changes\n- `GET /users` now returns paginated results\n- Authentication header changed from `X-Auth-Token` to `Authorization`\n\n### Configuration\n- `config.json` format has changed (see [migration guide](/docs/migration))\n\n## Migration Guide\n\n### Step 1: Update API Calls\n\n\\`\\`\\`diff\n- fetch('/api/users')\n+ fetch('/api/users?page=1&limit=20')\n\\`\\`\\`\n\n### Step 2: Update Authentication\n\n\\`\\`\\`diff\n- headers: { 'X-Auth-Token': token }\n+ headers: { 'Authorization': 'Bearer ' + token }\n\\`\\`\\`\n\n## Full Changelog\n\nSee [CHANGELOG.md](CHANGELOG.md) for complete details.\n\n## Thank You\n\nThanks to everyone who contributed to this release!\n\n@contributor1, @contributor2, @contributor3\n```\n\n### Internal Release Notes\n\n```markdown\n# Release Notes v2.0.0 (Internal)\n\n**Release Date:** 2024-01-15\n**Release Manager:** @john\n**Status:** Production\n\n## Deployment Information\n\n### Pre-requisites\n- [ ] Database migration (migration #45)\n- [ ] Redis cache flush required\n- [ ] Feature flag `new_dashboard` enabled\n\n### Deployment Steps\n1. Deploy database migrations\n2. Deploy backend services\n3. Deploy frontend\n4. Enable feature flags\n5. Monitor error rates\n\n### Rollback Plan\n1. Disable feature flags\n2. Rollback frontend\n3. Rollback backend\n4. Rollback migrations (script: `rollback_45.sql`)\n\n## Known Issues\n\n| Issue | Severity | Workaround |\n|-------|----------|------------|\n| IE11 layout issues | Low | Use Chrome/Firefox |\n| Slow initial load | Medium | Caching in progress |\n\n## Metrics to Monitor\n\n- Error rate (target: < 0.1%)\n- API latency p95 (target: < 200ms)\n- Memory usage (baseline: 512MB)\n\n## Contacts\n\n- Engineering: @eng-team\n- On-call: @john (primary), @jane (secondary)\n```\n\n## Conventional Commits\n\n### Commit Format\n\n```\n<type>(<scope>): <description>\n\n[optional body]\n\n[optional footer(s)]\n```\n\n### Types\n\n```markdown\n## Commit Types\n\n| Type | Description | Changelog Section |\n|------|-------------|------------------|\n| feat | New feature | Added |\n| fix | Bug fix | Fixed |\n| docs | Documentation | - |\n| style | Formatting | - |\n| refactor | Code change | Changed |\n| perf | Performance | Changed |\n| test | Tests | - |\n| chore | Maintenance | - |\n| revert | Revert commit | Removed |\n| security | Security fix | Security |\n```\n\n### Examples\n\n```bash\n# Feature\nfeat(auth): add OAuth2 login support\n\n# Bug fix\nfix(api): resolve null pointer in user endpoint\n\nFixes #123\n\n# Breaking change\nfeat(api)!: change response format to JSON:API\n\nBREAKING CHANGE: API responses now follow JSON:API specification.\nSee migration guide for details.\n\n# Multiple footers\nfix(ui): correct button alignment on mobile\n\nFixes #456\nReviewed-by: @jane\nCo-authored-by: @bob\n```\n\n## Automated Changelog\n\n### Using Conventional Changelog\n\n```javascript\n// .versionrc.js\nmodule.exports = {\n  types: [\n    { type: 'feat', section: 'Features' },\n    { type: 'fix', section: 'Bug Fixes' },\n    { type: 'perf', section: 'Performance' },\n    { type: 'revert', section: 'Reverts' },\n    { type: 'docs', hidden: true },\n    { type: 'style', hidden: true },\n    { type: 'chore', hidden: true },\n    { type: 'refactor', hidden: true },\n    { type: 'test', hidden: true }\n  ],\n  commitUrlFormat: '{{host}}/{{owner}}/{{repository}}/commit/{{hash}}',\n  compareUrlFormat: '{{host}}/{{owner}}/{{repository}}/compare/{{previousTag}}...{{currentTag}}'\n}\n```\n\n### Release Workflow\n\n```yaml\n# .github/workflows/release.yml\nname: Release\non:\n  push:\n    branches: [main]\n\njobs:\n  release:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n        with:\n          fetch-depth: 0\n\n      - name: Create Release\n        run: |\n          npx standard-version\n          git push --follow-tags\n\n      - name: Publish Release Notes\n        uses: actions/github-script@v6\n        with:\n          script: |\n            const fs = require('fs')\n            const changelog = fs.readFileSync('CHANGELOG.md', 'utf8')\n            // Extract latest version notes\n            // Create GitHub release\n```\n\n## Integration\n\nUsed by:\n- `readme-writer` agent\n- `integration-doc-writer` agent\n",
        "plugins/aai-docs/skills/documentation-patterns/SKILL.md": "---\nname: documentation-patterns\ndescription: Documentation structure and organization patterns\n---\n\n# Documentation Patterns Skill\n\nPatterns for organizing and structuring documentation.\n\n## Documentation Types\n\n### Reference Documentation\n\nTechnical specifications and API details.\n\n```markdown\n## Function: createUser\n\nCreates a new user in the system.\n\n### Signature\n\n\\`\\`\\`typescript\nfunction createUser(data: CreateUserData): Promise<User>\n\\`\\`\\`\n\n### Parameters\n\n| Name | Type | Required | Description |\n|------|------|----------|-------------|\n| data.email | string | Yes | User's email address |\n| data.name | string | No | Display name |\n| data.role | UserRole | No | Default: \"user\" |\n\n### Returns\n\n`Promise<User>` - The created user object\n\n### Throws\n\n- `ValidationError` - If email format is invalid\n- `ConflictError` - If email already exists\n\n### Example\n\n\\`\\`\\`typescript\nconst user = await createUser({\n  email: 'john@example.com',\n  name: 'John Doe'\n})\n\\`\\`\\`\n```\n\n### Conceptual Documentation\n\nExplains concepts and architecture.\n\n```markdown\n# Authentication Architecture\n\n## Overview\n\nThe authentication system uses JWT tokens for stateless authentication.\n\n## Components\n\n### Token Service\n\nResponsible for generating and validating tokens.\n\n### Session Manager\n\nManages user sessions and refresh tokens.\n\n## Flow\n\n1. User submits credentials\n2. Server validates credentials\n3. Server generates JWT token\n4. Client stores token\n5. Client sends token with requests\n6. Server validates token on each request\n\n## Security Considerations\n\n- Tokens expire after 1 hour\n- Refresh tokens valid for 30 days\n- Tokens are signed with RS256\n```\n\n### Procedural Documentation\n\nStep-by-step instructions.\n\n```markdown\n# Setting Up Local Development\n\n## Prerequisites\n\n- Node.js 18+\n- PostgreSQL 15\n- Redis 7\n\n## Steps\n\n### 1. Clone the Repository\n\n\\`\\`\\`bash\ngit clone https://github.com/org/repo.git\ncd repo\n\\`\\`\\`\n\n### 2. Install Dependencies\n\n\\`\\`\\`bash\nnpm install\n\\`\\`\\`\n\n### 3. Configure Environment\n\n\\`\\`\\`bash\ncp .env.example .env\n# Edit .env with your settings\n\\`\\`\\`\n\n### 4. Start Services\n\n\\`\\`\\`bash\ndocker-compose up -d\nnpm run dev\n\\`\\`\\`\n\n### 5. Verify Setup\n\nOpen http://localhost:3000 and log in.\n```\n\n## Documentation Structure\n\n### Project Documentation\n\n```\ndocs/\n README.md                 # Project overview\n getting-started/\n    installation.md      # Setup instructions\n    quick-start.md       # First steps\n    configuration.md     # Config options\n guides/\n    authentication.md    # Auth guide\n    api-usage.md         # API patterns\n    best-practices.md    # Recommendations\n api/\n    overview.md          # API introduction\n    endpoints/           # Endpoint docs\n    schemas.md           # Data schemas\n reference/\n    configuration.md     # Config reference\n    environment.md       # Env variables\n    cli.md               # CLI reference\n contributing/\n     development.md       # Dev setup\n     testing.md           # Test guide\n     releasing.md         # Release process\n```\n\n### API Documentation\n\n```\napi-docs/\n overview.md\n authentication.md\n rate-limiting.md\n errors.md\n endpoints/\n    users/\n       list.md\n       create.md\n       get.md\n       update.md\n       delete.md\n    orders/\n       ...\n    products/\n        ...\n webhooks/\n     overview.md\n     events.md\n     security.md\n```\n\n## Writing Patterns\n\n### Inverted Pyramid\n\nStart with the most important information:\n\n```markdown\n# Feature X\n\nFeature X allows you to do Y. Use it when you need Z.\n\n## Quick Start\n\n\\`\\`\\`typescript\n// Most common usage\ndoFeatureX()\n\\`\\`\\`\n\n## Details\n\nMore detailed explanation...\n\n## Advanced Usage\n\nEdge cases and advanced scenarios...\n```\n\n### Progressive Disclosure\n\nLayer information from simple to complex:\n\n```markdown\n# Configuration\n\n## Basic Configuration\n\n\\`\\`\\`json\n{\n  \"apiKey\": \"your-key\"\n}\n\\`\\`\\`\n\n## Standard Options\n\n| Option | Type | Default |\n|--------|------|---------|\n| timeout | number | 30000 |\n| retries | number | 3 |\n\n## Advanced Options\n\nFor fine-grained control...\n\n## Expert Configuration\n\nFor specialized use cases...\n```\n\n### Task-Oriented\n\nOrganize around what users want to accomplish:\n\n```markdown\n# User Management\n\n## Common Tasks\n\n### Add a New User\n...\n\n### Update User Permissions\n...\n\n### Remove a User\n...\n\n### Reset User Password\n...\n```\n\n## Formatting Guidelines\n\n### Code Blocks\n\n```markdown\n\\`\\`\\`typescript\n// Always specify the language\nconst example = true\n\\`\\`\\`\n\n\\`\\`\\`bash\n# Use bash for shell commands\nnpm install package\n\\`\\`\\`\n\n\\`\\`\\`json\n{\n  \"use\": \"json for config\"\n}\n\\`\\`\\`\n```\n\n### Tables\n\n```markdown\n| Column 1 | Column 2 | Column 3 |\n|----------|----------|----------|\n| Left     | Center   | Right    |\n| aligned  | aligned  | aligned  |\n```\n\n### Callouts\n\n```markdown\n> **Note:** Important information\n\n> **Warning:** Potential issues\n\n> **Tip:** Helpful suggestion\n\n> **Caution:** Dangerous action\n```\n\n### Links\n\n```markdown\n<!-- Relative links for internal docs -->\nSee [Configuration](../reference/configuration.md)\n\n<!-- Absolute links for external resources -->\nVisit [GitHub](https://github.com)\n\n<!-- Anchor links for same page -->\nSee [Installation](#installation)\n```\n\n## Integration\n\nUsed by:\n- `readme-writer` agent\n- `api-doc-writer` agent\n- `integration-doc-writer` agent\n",
        "plugins/aai-hooks/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-hooks\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Standard hook scripts for development workflows - package manager enforcement, protected branch guards, code formatting, anti-pattern detection, and completion claim validation\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"homepage\": \"https://github.com/the-answerai/alphaagent-team#readme\",\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"hooks\", \"validation\", \"formatting\", \"git-guards\", \"workflow\", \"anti-patterns\", \"completion-verification\"],\n  \"hooks\": \"./hooks/hooks.json\"\n}\n",
        "plugins/aai-hooks/hooks/hooks.json": "{\n  \"description\": \"Standard development workflow hooks - branch protection, package manager enforcement, code formatting, and validation\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"script\",\n            \"script\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/inject-project-context.cjs\",\n            \"timeout\": 3000,\n            \"description\": \"Inject PROJECT_CONTEXT with package manager, paths, commands, and stack info\"\n          }\n        ]\n      },\n      {\n        \"matcher\": \"Bash\",\n        \"pattern\": \"npm \",\n        \"hooks\": [\n          {\n            \"type\": \"script\",\n            \"script\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/block-wrong-package-manager.cjs\",\n            \"timeout\": 1000,\n            \"description\": \"Block npm commands when pnpm/yarn/bun is the project's package manager\"\n          }\n        ]\n      },\n      {\n        \"matcher\": \"Bash\",\n        \"pattern\": \"git commit\",\n        \"hooks\": [\n          {\n            \"type\": \"script\",\n            \"script\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/block-master-commits.cjs\",\n            \"timeout\": 2000,\n            \"description\": \"Block direct commits to master/main branches - must use feature branches\"\n          },\n          {\n            \"type\": \"script\",\n            \"script\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/validate-completion-claims.cjs\",\n            \"timeout\": 65000,\n            \"description\": \"Validate test count and completion claims in commit messages\"\n          },\n          {\n            \"type\": \"script\",\n            \"script\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/require-verification.cjs\",\n            \"timeout\": 35000,\n            \"description\": \"Require verification evidence for completion claims\"\n          }\n        ]\n      },\n      {\n        \"matcher\": \"Bash\",\n        \"pattern\": \"git push\",\n        \"hooks\": [\n          {\n            \"type\": \"script\",\n            \"script\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/block-master-commits.cjs\",\n            \"timeout\": 2000,\n            \"description\": \"Block direct pushes to master/main branches\"\n          }\n        ]\n      },\n      {\n        \"matcher\": \"Bash\",\n        \"pattern\": \"git merge\",\n        \"hooks\": [\n          {\n            \"type\": \"script\",\n            \"script\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/block-master-commits.cjs\",\n            \"timeout\": 2000,\n            \"description\": \"Block merges while on master/main\"\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"npx prettier --write \\\"$FILE\\\" 2>/dev/null || true\",\n            \"timeout\": 5000,\n            \"description\": \"Auto-format files after edits (if prettier is available)\"\n          }\n        ]\n      }\n    ],\n    \"SubagentStop\": [\n      {\n        \"matcher\": \".*\",\n        \"hooks\": [\n          {\n            \"type\": \"script\",\n            \"script\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/validate-anti-patterns.cjs\",\n            \"timeout\": 10000,\n            \"description\": \"Check for backup files, console.log in production, and other anti-patterns\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/aai-hooks/hooks/scripts/block-master-commits.cjs": "#!/usr/bin/env node\n/**\n * Block Master/Main Branch Commits Hook\n *\n * Prevents direct commits to protected branches (main, master, production, develop).\n * Only allows commits on feature branches.\n *\n * Usage:\n *   Automatically triggered by Claude Code hooks system when:\n *   - Event: PreToolUse\n *   - Matcher: Bash\n *   - Pattern: \"git commit\" | \"git push\" | \"git merge\"\n *\n * Exit codes:\n *   0 - Allow (on feature branch)\n *   2 - Block (on protected branch) - exit code 2 blocks and provides feedback\n */\n\nconst { execSync } = require('child_process');\n\n// Protected branch patterns - configurable via environment\nconst PROTECTED_BRANCHES = (process.env.PROTECTED_BRANCHES || 'main,master,production,develop')\n  .split(',')\n  .map(b => b.trim().toLowerCase());\n\n/**\n * Get current git branch name\n */\nfunction getCurrentBranch(cwd) {\n  try {\n    return execSync('git rev-parse --abbrev-ref HEAD', {\n      cwd,\n      encoding: 'utf-8',\n      stdio: 'pipe',\n    }).trim();\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Check if branch is protected\n */\nfunction isProtectedBranch(branchName) {\n  if (!branchName) return false;\n  const lowerBranch = branchName.toLowerCase();\n  return PROTECTED_BRANCHES.some(\n    (protected) => lowerBranch === protected || lowerBranch === `origin/${protected}`\n  );\n}\n\n/**\n * Read stdin for hook context\n */\nasync function readStdin() {\n  return new Promise((resolve) => {\n    let data = '';\n    process.stdin.setEncoding('utf8');\n    process.stdin.on('readable', () => {\n      let chunk;\n      while ((chunk = process.stdin.read()) !== null) {\n        data += chunk;\n      }\n    });\n    process.stdin.on('end', () => {\n      resolve(data);\n    });\n    setTimeout(() => resolve(data), 100);\n  });\n}\n\n/**\n * Main hook function\n */\nasync function main() {\n  const stdinData = await readStdin();\n  let context = {};\n\n  if (stdinData.trim()) {\n    try {\n      context = JSON.parse(stdinData);\n    } catch {\n      // Use default context\n    }\n  }\n\n  const command = context?.tool_input?.command || '';\n  const cwd = context?.cwd || process.cwd();\n\n  // Only check git commands\n  if (!command.match(/git\\s+(commit|push|merge)/)) {\n    process.exit(0);\n  }\n\n  // Get current branch\n  const currentBranch = getCurrentBranch(cwd);\n\n  if (!currentBranch) {\n    // Can't determine branch - allow but warn\n    console.error('[block-master] Warning: Could not determine current branch');\n    process.exit(0);\n  }\n\n  // Check if on protected branch\n  if (isProtectedBranch(currentBranch)) {\n    const message = `\n BLOCKED: Cannot operate directly on '${currentBranch}'\n\nThis is a protected branch. Direct commits/pushes/merges are not allowed.\n\nREQUIRED: Create a feature branch first:\n\n  git checkout -b feature/your-feature-name\n  # or\n  git checkout -b fix/your-fix-name\n\nThen make your changes on the feature branch.\n\nProtected branches: ${PROTECTED_BRANCHES.join(', ')}\n`;\n\n    console.error(message);\n    // Exit code 2 blocks the operation and sends feedback to Claude\n    process.exit(2);\n  }\n\n  // On feature branch - allow\n  process.exit(0);\n}\n\nmain();\n",
        "plugins/aai-hooks/hooks/scripts/block-wrong-package-manager.cjs": "#!/usr/bin/env node\n/**\n * Block Wrong Package Manager Hook\n *\n * Detects the project's package manager from lock files and blocks\n * npm commands when pnpm, yarn, or bun should be used instead.\n *\n * Usage:\n *   Automatically triggered by Claude Code hooks system when:\n *   - Tool: Bash\n *   - Pattern: \"npm \" (note the space to avoid matching \"pnpm\")\n *\n * Exit codes:\n *   0 - Allow (npm is correct or not a package management command)\n *   2 - Block (wrong package manager detected)\n */\n\nconst fs = require('fs');\n\n/**\n * Read stdin for hook input\n */\nfunction readStdin() {\n  return new Promise((resolve) => {\n    let data = '';\n    process.stdin.setEncoding('utf8');\n    process.stdin.on('readable', () => {\n      let chunk;\n      while ((chunk = process.stdin.read()) !== null) {\n        data += chunk;\n      }\n    });\n    process.stdin.on('end', () => {\n      resolve(data);\n    });\n    setTimeout(() => resolve(data), 100);\n  });\n}\n\n/**\n * Main hook execution\n */\nasync function main() {\n  try {\n    const stdinData = await readStdin();\n    let command = '';\n\n    try {\n      const input = JSON.parse(stdinData);\n      command = input.tool_input?.command || '';\n    } catch {\n      command = stdinData || '';\n    }\n\n    // Check if this is an npm command (but not npx which is fine)\n    const isNpmCommand = /\\bnpm\\s+(install|i|add|remove|rm|uninstall|run|test|start|build|ci)\\b/.test(command);\n\n    if (!isNpmCommand) {\n      // Not an npm package management command, allow\n      process.exit(0);\n    }\n\n    // Check if using npm when pnpm is the project's package manager\n    if (fs.existsSync('pnpm-lock.yaml')) {\n      console.error(` BLOCKED: This project uses pnpm (pnpm-lock.yaml exists).\n\nUse pnpm instead of npm:\n  npm install   pnpm install\n  npm test      pnpm test\n  npm run X     pnpm X\n  npm i pkg     pnpm add pkg\n`);\n      process.exit(2);\n    }\n\n    // Check if using npm when yarn is the package manager\n    if (fs.existsSync('yarn.lock')) {\n      console.error(` BLOCKED: This project uses yarn (yarn.lock exists).\n\nUse yarn instead of npm:\n  npm install   yarn install\n  npm test      yarn test\n  npm run X     yarn X\n  npm i pkg     yarn add pkg\n`);\n      process.exit(2);\n    }\n\n    // Check if using npm when bun is the package manager\n    if (fs.existsSync('bun.lockb')) {\n      console.error(` BLOCKED: This project uses bun (bun.lockb exists).\n\nUse bun instead of npm:\n  npm install   bun install\n  npm test      bun test\n  npm run X     bun X\n  npm i pkg     bun add pkg\n`);\n      process.exit(2);\n    }\n\n    // npm is correct or no lock file exists\n    process.exit(0);\n  } catch (error) {\n    // Don't block on hook errors, just continue\n    console.error(`[block-wrong-package-manager] Warning: ${error.message}`);\n    process.exit(0);\n  }\n}\n\nmain();\n",
        "plugins/aai-hooks/hooks/scripts/inject-project-context.cjs": "#!/usr/bin/env node\n/**\n * Project Context Injection Hook\n *\n * Detects project configuration and provides it to Claude.\n * Eliminates redundant package.json reads and npm vs pnpm confusion.\n *\n * Usage:\n *   Automatically triggered by Claude Code hooks system when:\n *   - Event: PreToolUse (Bash commands)\n *\n * Output:\n *   Returns context summary for agent consumption via stdout JSON\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n/**\n * Detects the package manager used by the project\n */\nfunction detectPackageManager() {\n  // Check lock files (most reliable)\n  if (fs.existsSync('pnpm-lock.yaml')) return 'pnpm';\n  if (fs.existsSync('yarn.lock')) return 'yarn';\n  if (fs.existsSync('bun.lockb')) return 'bun';\n  if (fs.existsSync('package-lock.json')) return 'npm';\n\n  // Check package.json packageManager field\n  try {\n    const pkg = JSON.parse(fs.readFileSync('package.json', 'utf-8'));\n    if (pkg.packageManager) {\n      if (pkg.packageManager.startsWith('pnpm')) return 'pnpm';\n      if (pkg.packageManager.startsWith('yarn')) return 'yarn';\n      if (pkg.packageManager.startsWith('bun')) return 'bun';\n    }\n  } catch {\n    // package.json doesn't exist or is invalid\n  }\n\n  return 'npm'; // Default fallback\n}\n\n/**\n * Gets the current git branch\n */\nfunction getCurrentBranch() {\n  try {\n    return execSync('git branch --show-current', { encoding: 'utf-8', stdio: 'pipe' }).trim();\n  } catch {\n    return 'unknown';\n  }\n}\n\n/**\n * Gets the repository name from git\n */\nfunction getRepoName() {\n  try {\n    const repoPath = execSync('git rev-parse --show-toplevel', { encoding: 'utf-8', stdio: 'pipe' }).trim();\n    return path.basename(repoPath);\n  } catch {\n    return path.basename(process.cwd());\n  }\n}\n\n/**\n * Checks if git working directory is clean\n */\nfunction isGitClean() {\n  try {\n    const status = execSync('git status --porcelain', { encoding: 'utf-8', stdio: 'pipe' });\n    return status.trim() === '';\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Detects the technology stack from package.json\n */\nfunction detectStack() {\n  try {\n    const pkg = JSON.parse(fs.readFileSync('package.json', 'utf-8'));\n    const deps = { ...pkg.dependencies, ...pkg.devDependencies };\n\n    return {\n      frontend: deps['react'] ? 'React' : deps['vue'] ? 'Vue' : deps['svelte'] ? 'Svelte' : deps['angular'] ? 'Angular' : null,\n      backend: deps['express'] ? 'Express' : deps['fastify'] ? 'Fastify' : deps['hono'] ? 'Hono' : deps['koa'] ? 'Koa' : null,\n      testing: {\n        unit: deps['jest'] ? 'Jest' : deps['vitest'] ? 'Vitest' : deps['mocha'] ? 'Mocha' : null,\n        e2e: deps['@playwright/test'] ? 'Playwright' : deps['cypress'] ? 'Cypress' : null,\n      },\n      database: deps['prisma'] ? 'Prisma' : deps['typeorm'] ? 'TypeORM' : deps['better-sqlite3'] ? 'SQLite' : deps['pg'] ? 'PostgreSQL' : deps['mongodb'] ? 'MongoDB' : null,\n      typescript: !!deps['typescript'],\n      nextjs: !!deps['next'],\n      tailwind: !!deps['tailwindcss'],\n    };\n  } catch {\n    return {};\n  }\n}\n\n/**\n * Detects and builds the full project context\n */\nfunction detectProjectContext() {\n  const projectRoot = process.cwd();\n  const packageManager = detectPackageManager();\n\n  return {\n    packageManager,\n    commands: {\n      install: `${packageManager} install`,\n      test: `${packageManager} test`,\n      build: `${packageManager} build`,\n      lint: `${packageManager} lint`,\n      dev: `${packageManager} dev`,\n    },\n    paths: {\n      projectRoot,\n    },\n    git: {\n      branch: getCurrentBranch(),\n      repoName: getRepoName(),\n      isClean: isGitClean(),\n    },\n    stack: detectStack(),\n    detectedAt: new Date().toISOString(),\n  };\n}\n\n/**\n * Main hook execution\n */\nfunction main() {\n  try {\n    const context = detectProjectContext();\n\n    // Output context summary for agent consumption\n    const summary = {\n      decision: 'continue',\n      PROJECT_CONTEXT: {\n        packageManager: context.packageManager,\n        commands: context.commands,\n        git: context.git,\n        stack: context.stack,\n      },\n    };\n\n    console.log(JSON.stringify(summary));\n  } catch (error) {\n    // Don't block on errors\n    console.log(JSON.stringify({\n      decision: 'continue',\n      warning: `Context detection failed: ${error.message}`,\n    }));\n  }\n}\n\nmain();\n",
        "plugins/aai-hooks/hooks/scripts/require-verification.cjs": "#!/usr/bin/env node\n\n/**\n * Pre-Commit Hook: Require Verification\n *\n * Blocks git commits that claim completion without verification evidence.\n *\n * This prevents \"Optimism Debt\" where agents claim tasks are complete\n * without providing proof (git diff, build status, test results).\n *\n * Usage:\n *   Automatically triggered by Claude Code hooks system when:\n *   - Tool: Bash\n *   - Pattern: \"git commit\"\n *\n * Validation:\n *   - Detects completion keywords in commit message\n *   - Requires task-completion-evidence.md OR passes basic checks\n *   - Validates evidence file contains required sections\n *\n * Note: This hook can be bypassed by including \"[skip-verify]\" in commit message\n * for WIP commits or other legitimate cases.\n */\n\nconst { existsSync, readFileSync } = require('fs');\nconst { execSync } = require('child_process');\nconst path = require('path');\n\n/**\n * Validates git commit command for verification requirements\n * @param {Object} context - Hook context\n * @param {string} context.command - The bash command being executed\n * @param {string} context.cwd - Current working directory\n * @returns {Object} - { block: boolean, message?: string }\n */\nfunction requireVerification(context) {\n  const command = context.command || '';\n  const cwd = context.cwd || process.cwd();\n\n  // Only check git commit commands\n  if (!command.includes('git commit')) {\n    return { block: false };\n  }\n\n  // Extract commit message\n  const messageMatch = command.match(/-m [\"'](.+?)[\"']/);\n  if (!messageMatch) {\n    // No -m flag, likely interactive commit - allow\n    return { block: false };\n  }\n\n  const message = messageMatch[1];\n\n  // Allow bypass with [skip-verify]\n  if (message.includes('[skip-verify]')) {\n    console.log('[require-verification] Skipping due to [skip-verify] flag');\n    return { block: false };\n  }\n\n  // Check for completion claims (using word boundaries to avoid false positives)\n  const completionKeywords = [\n    'complete', 'completed', 'done', 'finished', 'implemented',\n    'added', 'created', 'fixed', 'updated',\n    'implement', 'finish'\n  ];\n\n  // Use word boundaries on both sides to match whole words only\n  const hasCompletionClaim = completionKeywords.some(keyword => {\n    const regex = new RegExp(`\\\\b${keyword}\\\\b`, 'i');\n    return regex.test(message);\n  });\n\n  if (!hasCompletionClaim) {\n    // No completion claim - allow commit\n    return { block: false };\n  }\n\n  // Completion claim detected - check for evidence\n  const evidenceFile = path.join(cwd, 'task-completion-evidence.md');\n  const hasEvidenceFile = existsSync(evidenceFile);\n\n  // If evidence file exists, validate it\n  if (hasEvidenceFile) {\n    const evidence = readFileSync(evidenceFile, 'utf-8');\n\n    const requiredSections = [\n      'Files Modified',\n      'Changes Summary',\n      'Build Status',\n      'Test Status'\n    ];\n\n    const missingSections = requiredSections.filter(section =>\n      !evidence.includes(section)\n    );\n\n    if (missingSections.length > 0) {\n      return {\n        block: true,\n        message: `\n BLOCKED: Incomplete verification evidence\n\nEvidence file exists but missing sections:\n${missingSections.map(s => `  - ${s}`).join('\\n')}\n\nEither:\n1. Update task-completion-evidence.md with missing sections\n2. Add [skip-verify] to commit message for WIP commits\n        `\n      };\n    }\n\n    // Evidence complete - allow commit\n    console.log('[require-verification]  Verification evidence found');\n    return { block: false };\n  }\n\n  // No evidence file - do basic verification\n  const basicCheck = performBasicVerification(cwd);\n\n  if (!basicCheck.passed) {\n    return {\n      block: true,\n      message: `\n BLOCKED: Completion claim without verification\n\nCommit message: \"${message}\"\n\nThis message contains a completion claim but verification failed:\n${basicCheck.reason}\n\nOptions:\n1. Run tests and ensure they pass\n2. Create task-completion-evidence.md with:\n   - Files Modified\n   - Changes Summary\n   - Build Status\n   - Test Status\n3. Add [skip-verify] to commit message for WIP commits\n\nCRITICAL: Do NOT claim completion without verification.\nThis prevents \"Optimism Debt\" where agents claim completion without proof.\n      `\n    };\n  }\n\n  console.log('[require-verification]  Basic verification passed');\n  return { block: false };\n}\n\n/**\n * Perform basic verification checks\n */\nfunction performBasicVerification(cwd) {\n  // Check 1: Are there actually staged changes?\n  try {\n    const stagedFiles = execSync('git diff --cached --name-only', {\n      cwd,\n      encoding: 'utf-8',\n      timeout: 5000\n    }).trim();\n\n    if (!stagedFiles) {\n      return {\n        passed: false,\n        reason: 'No files staged for commit'\n      };\n    }\n  } catch (error) {\n    return {\n      passed: false,\n      reason: 'Failed to check staged files: ' + error.message\n    };\n  }\n\n  // Check 2: Does TypeScript compile (if applicable)?\n  const tsconfigPath = path.join(cwd, 'tsconfig.json');\n  if (existsSync(tsconfigPath)) {\n    try {\n      execSync('npx tsc --noEmit 2>&1', {\n        cwd,\n        encoding: 'utf-8',\n        timeout: 30000,\n        stdio: 'pipe'\n      });\n    } catch (error) {\n      const output = error.stdout || error.message;\n      if (output.includes('error TS')) {\n        return {\n          passed: false,\n          reason: 'TypeScript compilation errors exist'\n        };\n      }\n    }\n  }\n\n  return { passed: true };\n}\n\n// Export for Claude Code hooks system\nmodule.exports = requireVerification;\n\n// Allow running directly for testing\nif (require.main === module) {\n  const testCases = [\n    {\n      name: 'Should block: completion claim without evidence',\n      command: 'git commit -m \"Implemented feature X\"',\n      expectedBlock: true\n    },\n    {\n      name: 'Should allow: no completion keywords',\n      command: 'git commit -m \"WIP: working on feature\"',\n      expectedBlock: false\n    },\n    {\n      name: 'Should allow: skip-verify flag',\n      command: 'git commit -m \"Added feature [skip-verify]\"',\n      expectedBlock: false\n    },\n    {\n      name: 'Should allow: non-commit command',\n      command: 'git status',\n      expectedBlock: false\n    }\n  ];\n\n  console.log('Testing require-verification hook...\\n');\n\n  testCases.forEach(testCase => {\n    const result = requireVerification({ command: testCase.command, cwd: process.cwd() });\n    const passed = result.block === testCase.expectedBlock;\n\n    console.log(`${passed ? '' : ''} ${testCase.name}`);\n    console.log(`  Command: ${testCase.command}`);\n    console.log(`  Expected block: ${testCase.expectedBlock}, Got: ${result.block}`);\n    if (result.message) {\n      console.log(`  Message: ${result.message.substring(0, 80)}...`);\n    }\n    console.log();\n  });\n}\n",
        "plugins/aai-hooks/hooks/scripts/validate-anti-patterns.cjs": "#!/usr/bin/env node\n\n/**\n * SubagentStop Hook: Validate Anti-Patterns\n *\n * Lightweight validation that runs after every subagent completes.\n * Checks for common anti-patterns WITHOUT running tests (fast).\n *\n * Validates:\n * 1. No backup/temp test files committed (*.bak, *.fixmock, etc.)\n * 2. No console.log in production code (configurable)\n * 3. No staged backup files\n *\n * Usage:\n *   Automatically triggered by Claude Code hooks system when:\n *   - Event: SubagentStop\n *\n * This prevents anti-patterns from being introduced during agent work.\n */\n\nconst { execSync } = require('child_process');\nconst { existsSync, readdirSync } = require('fs');\nconst path = require('path');\n\n// Patterns for backup/temp files that should NEVER be committed\nconst BACKUP_FILE_PATTERNS = [\n  /\\.bak\\d*$/,\n  /\\.fixmock$/,\n  /\\.final$/,\n  /\\.prefinal$/,\n  /\\.broken$/,\n  /\\.backup$/,\n  /\\.new$/,\n  /\\.old$/,\n  /\\.orig$/,\n  /\\.tmp$/\n];\n\n// Default directories to check (can be customized per project)\nconst DEFAULT_CHECK_DIRS = ['src', 'lib', 'app'];\n\n// Excluded patterns for console.log check (legitimate uses)\nconst CONSOLE_LOG_EXCLUSIONS = [\n  'logger.ts',\n  'logger.js',\n  'logging.ts',\n  'logging.js',\n  '.test.ts',\n  '.test.js',\n  '.spec.ts',\n  '.spec.js',\n  '__tests__/',\n  '__mocks__/',\n  '.md',\n  'node_modules/'\n];\n\n/**\n * Main validation function\n */\nfunction validateAntiPatterns(context) {\n  const issues = [];\n  const warnings = [];\n  const cwd = context?.cwd || process.cwd();\n\n  console.log('[anti-patterns] Running anti-pattern validation...');\n\n  // 1. Check for backup/temp files\n  const backupFiles = findBackupFiles(cwd);\n  if (backupFiles.length > 0) {\n    issues.push({\n      type: 'BACKUP_FILES',\n      severity: 'error',\n      message: `Found ${backupFiles.length} backup/temp files that should be deleted`,\n      files: backupFiles.slice(0, 10),\n      fix: 'Delete these files: rm ' + backupFiles.slice(0, 5).join(' ')\n    });\n  }\n\n  // 2. Check for console.log in production code (warning only)\n  const consoleLogFiles = findConsoleLogViolations(cwd);\n  if (consoleLogFiles.length > 0) {\n    warnings.push({\n      type: 'CONSOLE_LOG',\n      severity: 'warning',\n      message: `Found console.log in ${consoleLogFiles.length} production files`,\n      files: consoleLogFiles.slice(0, 10),\n      fix: 'Consider using a structured logger instead'\n    });\n  }\n\n  // 3. Check for staged backup files (about to be committed)\n  const stagedBackupFiles = findStagedBackupFiles(cwd);\n  if (stagedBackupFiles.length > 0) {\n    issues.push({\n      type: 'STAGED_BACKUP_FILES',\n      severity: 'error',\n      message: `${stagedBackupFiles.length} backup files are staged for commit`,\n      files: stagedBackupFiles,\n      fix: 'Unstage and delete: git reset HEAD -- ' + stagedBackupFiles.join(' ')\n    });\n  }\n\n  // Generate report\n  const report = generateReport(issues, warnings);\n\n  // Determine if we should block\n  const hasErrors = issues.length > 0;\n\n  if (hasErrors) {\n    console.log('[anti-patterns]  Validation FAILED');\n    return {\n      block: true,\n      message: report\n    };\n  } else if (warnings.length > 0) {\n    console.log(`[anti-patterns]   ${warnings.length} warnings (not blocking)`);\n    // Don't block on warnings, but log them\n    console.log(report);\n    return { block: false };\n  } else {\n    console.log('[anti-patterns]  All checks passed');\n    return { block: false };\n  }\n}\n\n/**\n * Find backup/temp files in the codebase\n */\nfunction findBackupFiles(cwd) {\n  const backupFiles = [];\n\n  try {\n    // Check common directories for backup files\n    const dirsToCheck = [...DEFAULT_CHECK_DIRS, 'tests', '.claude'];\n\n    for (const dir of dirsToCheck) {\n      const fullPath = path.join(cwd, dir);\n      if (existsSync(fullPath)) {\n        const files = findFilesRecursive(fullPath, file =>\n          BACKUP_FILE_PATTERNS.some(pattern => pattern.test(file))\n        );\n        backupFiles.push(...files.map(f => path.relative(cwd, f)));\n      }\n    }\n  } catch (error) {\n    console.error('[anti-patterns] Error finding backup files:', error.message);\n  }\n\n  return backupFiles;\n}\n\n/**\n * Find console.log violations in production code\n */\nfunction findConsoleLogViolations(cwd) {\n  const violations = [];\n\n  // Only check if src/ exists\n  const srcDir = path.join(cwd, 'src');\n  if (!existsSync(srcDir)) {\n    return violations;\n  }\n\n  try {\n    // Use grep to find console.log in src/ (fast)\n    const result = execSync(\n      'grep -rn \"console\\\\.log\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" --include=\"*.jsx\" 2>/dev/null || true',\n      { cwd, encoding: 'utf-8', maxBuffer: 1024 * 1024 }\n    );\n\n    const lines = result.split('\\n').filter(line => line.trim());\n\n    for (const line of lines) {\n      const [filePath] = line.split(':');\n      if (filePath && !isExcluded(filePath, CONSOLE_LOG_EXCLUSIONS)) {\n        if (!violations.includes(filePath)) {\n          violations.push(filePath);\n        }\n      }\n    }\n  } catch (error) {\n    // Grep might fail if no matches - that's OK\n  }\n\n  return violations;\n}\n\n/**\n * Find backup files that are staged for commit\n */\nfunction findStagedBackupFiles(cwd) {\n  const stagedBackups = [];\n\n  try {\n    const result = execSync('git diff --cached --name-only 2>/dev/null || true', {\n      cwd,\n      encoding: 'utf-8'\n    });\n\n    const stagedFiles = result.split('\\n').filter(f => f.trim());\n\n    for (const file of stagedFiles) {\n      if (BACKUP_FILE_PATTERNS.some(pattern => pattern.test(file))) {\n        stagedBackups.push(file);\n      }\n    }\n  } catch (error) {\n    // Git might not be available\n  }\n\n  return stagedBackups;\n}\n\n/**\n * Recursively find files matching a predicate\n */\nfunction findFilesRecursive(dir, predicate, files = []) {\n  try {\n    const entries = readdirSync(dir, { withFileTypes: true });\n\n    for (const entry of entries) {\n      const fullPath = path.join(dir, entry.name);\n\n      if (entry.isDirectory()) {\n        if (entry.name !== 'node_modules' && entry.name !== 'dist' && entry.name !== 'coverage' && entry.name !== '.git') {\n          findFilesRecursive(fullPath, predicate, files);\n        }\n      } else if (entry.isFile() && predicate(entry.name)) {\n        files.push(fullPath);\n      }\n    }\n  } catch (error) {\n    // Directory might not be readable\n  }\n\n  return files;\n}\n\n/**\n * Check if a file path is excluded\n */\nfunction isExcluded(filePath, exclusions) {\n  return exclusions.some(excl => filePath.includes(excl));\n}\n\n/**\n * Generate a formatted report\n */\nfunction generateReport(issues, warnings) {\n  const lines = [];\n\n  lines.push('\\n' + '='.repeat(60));\n  lines.push('ANTI-PATTERN VALIDATION REPORT');\n  lines.push('='.repeat(60));\n\n  if (issues.length > 0) {\n    lines.push('\\n ERRORS (must fix before proceeding):');\n    lines.push('-'.repeat(40));\n\n    for (const issue of issues) {\n      lines.push(`\\n[${issue.type}] ${issue.message}`);\n      if (issue.files && issue.files.length > 0) {\n        lines.push('  Files:');\n        for (const file of issue.files) {\n          lines.push(`    - ${file}`);\n        }\n        if (issue.files.length === 10) {\n          lines.push('    ... (showing first 10)');\n        }\n      }\n      if (issue.fix) {\n        lines.push(`  Fix: ${issue.fix}`);\n      }\n    }\n  }\n\n  if (warnings.length > 0) {\n    lines.push('\\n  WARNINGS (should fix when possible):');\n    lines.push('-'.repeat(40));\n\n    for (const warning of warnings) {\n      lines.push(`\\n[${warning.type}] ${warning.message}`);\n      if (warning.files && warning.files.length > 0) {\n        lines.push('  Files:');\n        for (const file of warning.files.slice(0, 5)) {\n          lines.push(`    - ${file}`);\n        }\n        if (warning.files.length > 5) {\n          lines.push(`    ... and ${warning.files.length - 5} more`);\n        }\n      }\n      if (warning.fix) {\n        lines.push(`  Fix: ${warning.fix}`);\n      }\n    }\n  }\n\n  if (issues.length === 0 && warnings.length === 0) {\n    lines.push('\\n All anti-pattern checks passed!');\n  }\n\n  lines.push('\\n' + '='.repeat(60) + '\\n');\n\n  return lines.join('\\n');\n}\n\n// Export for Claude Code hooks system\nmodule.exports = validateAntiPatterns;\n\n// Allow running directly for testing\nif (require.main === module) {\n  const result = validateAntiPatterns({ cwd: process.cwd() });\n\n  if (result.block) {\n    console.log('\\nValidation would BLOCK with message:');\n    console.log(result.message);\n    process.exit(1);\n  } else {\n    console.log('\\nValidation would PASS');\n    process.exit(0);\n  }\n}\n",
        "plugins/aai-hooks/hooks/scripts/validate-completion-claims.cjs": "#!/usr/bin/env node\n\n/**\n * Pre-Commit Hook: Validate Completion Claims\n *\n * Validates that completion claims match reality:\n * - Test count claims match actual test results\n * - \"All tests passing\" verified\n * - File modification claims verified\n *\n * This prevents false claims like:\n * - \"127/127 tests passing\" when actually 120/127\n * - \"All tests passing\" when tests are failing\n * - \"Fixed all console.log\" when 0 files modified\n *\n * Usage:\n *   Automatically triggered by Claude Code hooks system when:\n *   - Tool: Bash\n *   - Pattern: \"git commit\"\n *\n * Validation:\n *   - Runs tests to verify claims\n *   - Compares claimed counts vs actual\n *   - Blocks commits with false claims\n */\n\nconst { execSync } = require('child_process');\nconst { existsSync, readFileSync } = require('fs');\nconst path = require('path');\n\n/**\n * Detect the project's test command\n */\nfunction detectTestCommand(cwd) {\n  const packageJsonPath = path.join(cwd, 'package.json');\n\n  if (!existsSync(packageJsonPath)) {\n    return null;\n  }\n\n  try {\n    const packageJson = JSON.parse(readFileSync(packageJsonPath, 'utf-8'));\n\n    // Check for test script\n    if (packageJson.scripts?.test) {\n      // Detect package manager\n      if (existsSync(path.join(cwd, 'pnpm-lock.yaml'))) {\n        return 'pnpm test';\n      } else if (existsSync(path.join(cwd, 'yarn.lock'))) {\n        return 'yarn test';\n      } else if (existsSync(path.join(cwd, 'bun.lockb'))) {\n        return 'bun test';\n      } else {\n        return 'npm test';\n      }\n    }\n  } catch (error) {\n    // Ignore parse errors\n  }\n\n  return null;\n}\n\n/**\n * Validates completion claims in git commit messages\n * @param {Object} context - Hook context\n * @param {string} context.command - The bash command being executed\n * @param {string} context.cwd - Current working directory\n * @returns {Object} - { block: boolean, message?: string }\n */\nfunction validateCompletionClaims(context) {\n  const command = context.command || '';\n  const cwd = context.cwd || process.cwd();\n\n  if (!command.includes('git commit')) {\n    return { block: false };\n  }\n\n  const messageMatch = command.match(/-m [\"'](.+?)[\"']/);\n  if (!messageMatch) {\n    return { block: false };\n  }\n\n  const message = messageMatch[1];\n\n  // Check for test count claims (e.g., \"127/127 tests passing\")\n  const testCountMatch = message.match(/(\\d+)\\/(\\d+)\\s+tests?\\s+passing/i);\n  if (testCountMatch) {\n    return validateTestCount(testCountMatch[1], testCountMatch[2], cwd);\n  }\n\n  // Check for \"all tests passing\" claim\n  if (message.match(/all\\s+tests?\\s+passing/i)) {\n    return validateAllTestsPassing(cwd);\n  }\n\n  // Check for file modification claims\n  if (message.match(/removed|deleted|fixed|cleaned/i)) {\n    return validateFileModifications(message, cwd);\n  }\n\n  return { block: false };\n}\n\n/**\n * Validates test count claims match actual results\n */\nfunction validateTestCount(claimedPassing, claimedTotal, cwd) {\n  const claimed = {\n    passing: parseInt(claimedPassing, 10),\n    total: parseInt(claimedTotal, 10)\n  };\n\n  const testCommand = detectTestCommand(cwd);\n  if (!testCommand) {\n    console.log('[validate-claims] No test command found, skipping validation');\n    return { block: false };\n  }\n\n  try {\n    const testOutput = execSync(`${testCommand} 2>&1`, {\n      encoding: 'utf-8',\n      timeout: 60000,\n      stdio: 'pipe',\n      cwd\n    });\n\n    // Try multiple patterns for different test frameworks\n    let actual = { passing: 0, failing: 0, total: 0 };\n\n    // Jest/Vitest pattern: \"X passed, Y failed\"\n    const jestPassMatch = testOutput.match(/(\\d+)\\s+passed/);\n    const jestFailMatch = testOutput.match(/(\\d+)\\s+failed/);\n\n    // Mocha pattern: \"X passing\", \"Y failing\"\n    const mochaPassMatch = testOutput.match(/(\\d+)\\s+passing/);\n    const mochaFailMatch = testOutput.match(/(\\d+)\\s+failing/);\n\n    if (jestPassMatch) {\n      actual.passing = parseInt(jestPassMatch[1], 10);\n      actual.failing = jestFailMatch ? parseInt(jestFailMatch[1], 10) : 0;\n    } else if (mochaPassMatch) {\n      actual.passing = parseInt(mochaPassMatch[1], 10);\n      actual.failing = mochaFailMatch ? parseInt(mochaFailMatch[1], 10) : 0;\n    }\n\n    actual.total = actual.passing + actual.failing;\n\n    if (claimed.passing !== actual.passing || claimed.total !== actual.total) {\n      return {\n        block: true,\n        message: `\n BLOCKED: Test count mismatch\n\nCommit claims: ${claimed.passing}/${claimed.total} tests passing\nActual results: ${actual.passing}/${actual.total} tests passing\n\nDo NOT commit false claims. Update commit message with actual test results.\n\nEvidence required:\n  - Run: ${testCommand}\n  - Verify counts match\n  - Update commit message\n        `\n      };\n    }\n\n    console.log('[validate-claims]  Test count verified');\n    return { block: false };\n\n  } catch (error) {\n    return {\n      block: true,\n      message: `\n BLOCKED: Cannot verify test claims\n\nCommit claims test results but tests failed to run.\n\nError: ${error.message}\n\nFix tests before committing claims about test results.\n\nRun: ${testCommand}\n      `\n    };\n  }\n}\n\n/**\n * Validates \"all tests passing\" claim\n */\nfunction validateAllTestsPassing(cwd) {\n  const testCommand = detectTestCommand(cwd);\n  if (!testCommand) {\n    console.log('[validate-claims] No test command found, skipping validation');\n    return { block: false };\n  }\n\n  try {\n    const testOutput = execSync(`${testCommand} 2>&1`, {\n      encoding: 'utf-8',\n      timeout: 60000,\n      stdio: 'pipe',\n      cwd\n    });\n\n    // Check for failures in output\n    if (testOutput.match(/(\\d+)\\s+fail/i)) {\n      const failingMatch = testOutput.match(/(\\d+)\\s+fail/i);\n      const failingCount = failingMatch ? failingMatch[1] : 'some';\n\n      return {\n        block: true,\n        message: `\n BLOCKED: False \"all tests passing\" claim\n\nCommit claims \"all tests passing\" but ${failingCount} tests are failing.\n\nRun '${testCommand}' to see failures.\n\nDo NOT commit false claims. Either:\n1. Fix failing tests\n2. Update commit message to reflect reality\n        `\n      };\n    }\n\n    console.log('[validate-claims]  All tests passing verified');\n    return { block: false };\n\n  } catch (error) {\n    return {\n      block: true,\n      message: `\n BLOCKED: Cannot verify \"all tests passing\" claim\n\nTests failed to run.\n\nError: ${error.message}\n\nFix tests before claiming \"all tests passing\".\n      `\n    };\n  }\n}\n\n/**\n * Validates file modification claims\n */\nfunction validateFileModifications(message, cwd) {\n  try {\n    const gitStatus = execSync('git status --short', {\n      encoding: 'utf-8',\n      timeout: 5000,\n      cwd\n    });\n\n    const modifiedCount = gitStatus.split('\\n').filter(line => line.trim()).length;\n\n    if (modifiedCount === 0) {\n      // Extract what was claimed to be modified\n      const claimMatch = message.match(/(?:removed|deleted|fixed|cleaned)\\s+(.+?)(?:\\.|$)/i);\n      const claimed = claimMatch ? claimMatch[1] : 'items';\n\n      return {\n        block: true,\n        message: `\n BLOCKED: File modification claim without changes\n\nCommit claims to have modified: ${claimed}\n\nBut git status shows 0 files modified.\n\nThis is likely agent hallucination.\n\nEvidence required:\n  - Run: git status\n  - Verify files were actually modified\n  - Provide git diff output\n        `\n      };\n    }\n\n    console.log(`[validate-claims]  File modifications verified (${modifiedCount} files)`);\n    return { block: false };\n\n  } catch (error) {\n    console.error('[validate-claims] Error checking git status:', error.message);\n    // Don't block if we can't check - allow commit\n    return { block: false };\n  }\n}\n\n// Export for Claude Code hooks system\nmodule.exports = validateCompletionClaims;\n\n// Allow running directly for testing\nif (require.main === module) {\n  const testCases = [\n    {\n      name: 'Should validate test count',\n      command: 'git commit -m \"All features complete: 127/127 tests passing\"',\n      expectedValidation: true\n    },\n    {\n      name: 'Should validate \"all tests passing\"',\n      command: 'git commit -m \"All tests passing\"',\n      expectedValidation: true\n    },\n    {\n      name: 'Should check file modifications',\n      command: 'git commit -m \"Removed all console.log statements\"',\n      expectedValidation: true\n    },\n    {\n      name: 'Should skip non-claim commits',\n      command: 'git commit -m \"WIP: working on feature\"',\n      expectedValidation: false\n    }\n  ];\n\n  console.log('Testing validate-completion-claims hook...\\n');\n\n  testCases.forEach(testCase => {\n    console.log(`Testing: ${testCase.name}`);\n    console.log(`  Command: ${testCase.command}`);\n    console.log(`  Will validate: ${testCase.expectedValidation}`);\n    console.log();\n  });\n\n  console.log('Note: Actual validation results depend on:');\n  console.log('  - Test suite state');\n  console.log('  - Git working directory state (git status)');\n  console.log('  - Accuracy of claims in commit message');\n}\n",
        "plugins/aai-pm-github/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-pm-github\",\n  \"version\": \"1.0.0\",\n  \"description\": \"GitHub Issues management - create, plan, optimize, and triage GitHub issues with codebase exploration and duplicate detection\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"github\", \"issues\", \"pm\", \"triage\", \"workflow\", \"git\"]\n}\n",
        "plugins/aai-pm-github/agents/github-issue-creator.md": "---\nname: github-issue-creator\ndescription: Creates well-researched GitHub issues with codebase exploration and duplicate detection. Use when user wants to create an issue, file a bug, or request a feature on GitHub.\nmodel: sonnet\ntools: Read, Glob, Grep, Bash\nskills:\n  - issue-create\n  - issue-duplicate-detection\n---\n\n# GitHub Issue Creator Agent\n\nYou are an expert at creating clear, actionable GitHub issues. Your role is to transform user requests into comprehensive, well-researched issues that enable efficient development.\n\n## Core Responsibilities\n\n**Use the `issue-duplicate-detection` skill FIRST before creating any issue.**\n\n1. **Duplicate Detection** (REQUIRED FIRST STEP)\n   - Search existing issues BEFORE exploring codebase\n   - Present potential duplicates to user\n   - Get user decision before proceeding\n\n2. **Codebase Exploration**\n   - Explore relevant codebase sections\n   - Understand existing implementations\n   - Identify related code and files\n   - Document findings with file paths\n\n3. **Intelligent Questioning**\n   - Ask 2-4 targeted questions per iteration\n   - Present options with clear tradeoffs\n   - Clarify requirements and scope\n\n4. **Issue Composition**\n   - Create clear, actionable issues\n   - Follow GitHub best practices\n   - Use issue templates if available\n\n## GitHub CLI Usage\n\n### Check for Duplicates\n```bash\n# Search open issues\ngh issue list --state open --search \"keyword1 keyword2\"\n\n# Search all issues\ngh issue list --state all --search \"keyword1 keyword2\" --limit 20\n```\n\n### Check Issue Templates\n```bash\n# See if templates exist\nls .github/ISSUE_TEMPLATE/ 2>/dev/null || echo \"No templates\"\n```\n\n### Create Issue\n```bash\ngh issue create \\\n  --title \"Brief, descriptive title\" \\\n  --body \"$(cat <<'EOF'\n## Summary\nBrief description of the issue\n\n## Current Behavior\nWhat happens now\n\n## Expected Behavior\nWhat should happen\n\n## Steps to Reproduce (if bug)\n1. Step 1\n2. Step 2\n3. Step 3\n\n## Additional Context\n- Relevant files: `path/to/file.ts`\n- Related to: #123\n\n## Acceptance Criteria\n- [ ] Criteria 1\n- [ ] Criteria 2\nEOF\n)\" \\\n  --label \"bug\" \\\n  --assignee \"@me\"\n```\n\n## Issue Templates\n\n### Bug Report Template\n\n```markdown\n## Bug Description\n[Clear, concise description of the bug]\n\n## Steps to Reproduce\n1. Go to '...'\n2. Click on '...'\n3. Scroll down to '...'\n4. See error\n\n## Expected Behavior\n[What you expected to happen]\n\n## Actual Behavior\n[What actually happened]\n\n## Screenshots\n[If applicable, add screenshots]\n\n## Environment\n- OS: [e.g., macOS 14.0]\n- Browser: [e.g., Chrome 120]\n- Version: [e.g., 1.2.3]\n\n## Additional Context\n[Any other relevant information]\n```\n\n### Feature Request Template\n\n```markdown\n## Feature Description\n[Clear description of the feature]\n\n## Problem Statement\n[What problem does this solve?]\n\n## Proposed Solution\n[How should this work?]\n\n## Alternatives Considered\n[Other approaches you've considered]\n\n## Additional Context\n[Screenshots, mockups, examples]\n\n## Acceptance Criteria\n- [ ] Criteria 1\n- [ ] Criteria 2\n```\n\n### Technical Task Template\n\n```markdown\n## Objective\n[What needs to be done]\n\n## Background\n[Why this is needed]\n\n## Technical Approach\n[High-level approach]\n\n## Files to Modify\n- `path/to/file1.ts`\n- `path/to/file2.ts`\n\n## Testing\n- [ ] Unit tests\n- [ ] Integration tests\n\n## Definition of Done\n- [ ] Code complete\n- [ ] Tests passing\n- [ ] Documentation updated\n```\n\n## Label Guidelines\n\n### Standard Labels\n\n| Label | When to Use |\n|-------|-------------|\n| `bug` | Something is broken |\n| `enhancement` | New feature or improvement |\n| `documentation` | Docs only changes |\n| `good first issue` | Good for newcomers |\n| `help wanted` | Extra attention needed |\n| `question` | Needs clarification |\n| `wontfix` | Won't be worked on |\n| `duplicate` | Duplicate of another issue |\n\n### Priority Labels (if used)\n- `priority: critical`\n- `priority: high`\n- `priority: medium`\n- `priority: low`\n\n### Component Labels (if used)\n- `area: frontend`\n- `area: backend`\n- `area: api`\n- `area: docs`\n\n## Decision-Making Framework\n\n1. **Duplicate Detection Phase** (FIRST):\n   - Use `gh issue list --search` to find similar issues\n   - Present findings if duplicates found\n   - Get explicit approval to create new issue\n\n2. **Exploration Phase**:\n   - Use Read tool to examine relevant code\n   - Identify patterns and conventions\n   - Map dependencies and affected areas\n\n3. **Clarification Phase**:\n   - Present multiple options when uncertainty exists\n   - Ask short, direct questions\n   - Validate assumptions about scope\n\n4. **Composition Phase**:\n   - Write for the developer who will implement\n   - Balance completeness with brevity\n   - Reference but never paste large code blocks\n\n## Quality Control\n\n- **Self-verify**: Does this issue have everything needed to start work?\n- **Clear scope**: Is the scope well-defined?\n- **Testable**: Are acceptance criteria measurable?\n- **Linked**: Are related issues referenced?\n\n## Best Practices\n\n### DO\n- Check for existing issues first\n- Use issue templates when available\n- Add relevant labels\n- Reference related issues with #123\n- Include reproduction steps for bugs\n- Add acceptance criteria\n\n### DON'T\n- Create duplicate issues\n- Write vague descriptions\n- Skip the search step\n- Assign without checking availability\n- Include sensitive information\n\n## Communication Style\n\n- Be concise and direct\n- Present options clearly\n- Use technical language appropriately\n- Always respond in focused messages\n\n## Integration\n\nThis agent is invoked by:\n- `/github-create` command\n- Direct user requests to create GitHub issues\n\nUses these skills:\n- `issue-create`: GitHub issue structure and formatting\n- `issue-duplicate-detection`: Check for similar issues\n\nAfter successful creation:\n- Provide issue URL\n- Offer to start work immediately\n- Suggest related actions\n",
        "plugins/aai-pm-github/agents/github-issue-optimizer.md": "---\nname: github-issue-optimizer\ndescription: Improves GitHub issue quality by analyzing and enhancing descriptions, acceptance criteria, and labels. Use when issues need refinement.\nmodel: sonnet\ntools: Read, Glob, Grep, Bash\nskills:\n  - github-issue-analysis\n---\n\n# GitHub Issue Optimizer Agent\n\nYou are a GitHub issue quality specialist focused on transforming vague, incomplete, or poorly structured issues into well-defined, actionable work items.\n\n## Core Responsibilities\n\n1. **Quality Analysis**: Identify issues that need improvement\n2. **Content Enhancement**: Improve descriptions and acceptance criteria\n3. **Label Management**: Ensure proper categorization\n4. **Duplicate Detection**: Find and link related issues\n\n## GitHub CLI for Issue Management\n\n### Fetch Issues Needing Optimization\n\n```bash\n# Issues without labels\ngh issue list --state open --limit 50 --json number,title,labels | jq '.[] | select(.labels | length == 0)'\n\n# Old issues without recent activity\ngh issue list --state open --search \"created:<2024-01-01 comments:0\"\n\n# Issues with \"needs-info\" label\ngh issue list --state open --label \"needs-info\"\n```\n\n### Analyze Single Issue\n\n```bash\n# Get full details\ngh issue view {number} --json title,body,labels,comments,createdAt,updatedAt,author\n\n# Get with comments\ngh issue view {number} --comments\n```\n\n### Update Issue\n\n```bash\n# Update body (description)\ngh issue edit {number} --body \"$(cat <<'EOF'\n[New improved description]\nEOF\n)\"\n\n# Add labels\ngh issue edit {number} --add-label \"enhancement,frontend\"\n\n# Remove labels\ngh issue edit {number} --remove-label \"needs-triage\"\n\n# Add comment with improvements\ngh issue comment {number} --body \"Improved issue description for clarity.\"\n```\n\n## Quality Dimensions\n\n### 1. Clarity (1-5)\n- Is the goal obvious?\n- Is it jargon-free?\n- Would a new contributor understand?\n\n### 2. Completeness (1-5)\n- Are acceptance criteria defined?\n- Is scope clear?\n- Are dependencies listed?\n\n### 3. Actionability (1-5)\n- Can work start immediately?\n- Are blockers identified?\n- Are success criteria measurable?\n\n### 4. Context (1-5)\n- Is the \"why\" explained?\n- Are related issues linked?\n- Is technical background provided?\n\n## Quality Assessment Process\n\n### Step 1: Fetch and Analyze\n\n```bash\ngh issue view {number} --json title,body,labels,comments\n```\n\n### Step 2: Score Dimensions\n\n| Dimension | Score | Issues |\n|-----------|-------|--------|\n| Clarity | X/5 | [specific issues] |\n| Completeness | X/5 | [specific issues] |\n| Actionability | X/5 | [specific issues] |\n| Context | X/5 | [specific issues] |\n| **Overall** | **X/5** | |\n\n### Step 3: Generate Improvements\n\nFor each issue identified:\n- What's wrong\n- How to fix it\n- Example improved text\n\n## Common Improvements\n\n### Improving Titles\n\n**Before**: \"Fix bug\"\n**After**: \"Fix checkout failure when cart contains out-of-stock item\"\n\n**Pattern**: `[Action verb] [specific thing] [context/condition]`\n\n### Improving Descriptions\n\n**Before**:\n```\nThe page is slow.\n```\n\n**After**:\n```markdown\n## Problem\nThe product listing page takes 5+ seconds to load, causing users to abandon before the page renders.\n\n## Expected Behavior\nPage should load within 2 seconds on standard broadband connections.\n\n## Current Behavior\n- Initial load: 5-8 seconds\n- Subsequent loads: 3-4 seconds (some caching)\n\n## Possible Causes\n- Large unoptimized images\n- No pagination on product list\n- Missing database indexes\n\n## Acceptance Criteria\n- [ ] Page loads in < 2 seconds\n- [ ] Lighthouse performance score > 80\n- [ ] No layout shift during load\n```\n\n### Adding Acceptance Criteria\n\n**Before**:\n```\nAdd search functionality.\n```\n\n**After**:\n```markdown\n## Acceptance Criteria\n- [ ] Search input visible in header\n- [ ] Search returns results within 500ms\n- [ ] Results show product name, price, and thumbnail\n- [ ] \"No results\" state shown when appropriate\n- [ ] Search works with partial matches\n- [ ] Mobile-friendly search UI\n```\n\n### Adding Technical Context\n\nAfter codebase exploration:\n```markdown\n## Technical Notes\n**Relevant Files:**\n- `src/components/ProductList.tsx` - Main component\n- `src/hooks/useProducts.ts` - Data fetching\n- `src/api/products.ts` - API calls\n\n**Patterns to Follow:**\n- Use existing `useInfiniteQuery` pattern\n- Follow component structure in `src/components/`\n\n**Dependencies:**\n- Requires #234 (API pagination) to be complete first\n```\n\n## Batch Optimization Workflow\n\n### Step 1: Query Issues\n\n```bash\n# Get issues needing work\ngh issue list --state open --json number,title,body,labels \\\n  --jq '.[] | select(.body | length < 100) | {number, title}'\n```\n\n### Step 2: Present Batch\n\n```markdown\n## Issues Needing Optimization\n\n| # | Title | Score | Main Issues |\n|---|-------|-------|-------------|\n| 123 | Add auth | 2/5 | No AC, vague scope |\n| 456 | Fix bug | 1/5 | No description |\n| 789 | Improve perf | 3/5 | Missing context |\n\nWhich would you like to optimize?\n```\n\n### Step 3: Deep Dive on Selected\n\nFor each selected issue:\n1. Analyze current state\n2. Explore codebase for context\n3. Generate improvements\n4. Apply updates with user approval\n\n## Label Management\n\n### Recommended Label Structure\n\n**Type Labels:**\n- `bug` - Something broken\n- `enhancement` - New feature\n- `documentation` - Docs changes\n- `chore` - Maintenance\n\n**Status Labels:**\n- `needs-triage` - Needs review\n- `needs-info` - Needs clarification\n- `in progress` - Being worked on\n- `blocked` - Blocked by something\n\n**Priority Labels:**\n- `priority: high`\n- `priority: medium`\n- `priority: low`\n\n**Area Labels:**\n- `area: frontend`\n- `area: backend`\n- `area: devops`\n\n### Label Recommendations\n\nBased on content analysis:\n```bash\n# Bug with frontend component\ngh issue edit {number} --add-label \"bug,area: frontend\"\n\n# Feature request, low priority\ngh issue edit {number} --add-label \"enhancement,priority: low\"\n\n# Needs more information\ngh issue edit {number} --add-label \"needs-info\"\n```\n\n## Integration\n\nThis agent is invoked by:\n- `/github-optimize {number}` command\n- `/github-optimize --batch` for batch review\n- Direct user requests\n\nUses skills:\n- `github-issue-analysis`: Quality analysis methodology\n\nAfter optimization:\n- Update issue in GitHub\n- Add comment explaining changes\n- Update labels appropriately\n- Link related issues found\n\n## Communication Style\n\n- Be specific about problems and fixes\n- Provide before/after examples\n- Explain the benefit of each improvement\n- Prioritize fixes by impact\n\n## Output Format\n\n```markdown\n## Issue Analysis: #123\n\n### Current Quality: 2/5\n\n### Issues Found\n1. **Vague title** - Doesn't describe actual work\n2. **Missing acceptance criteria** - Can't verify completion\n3. **No technical context** - Developer needs to explore\n\n### Recommended Improvements\n\n#### 1. Updated Title\n**Current**: \"Fix bug\"\n**Improved**: \"Fix checkout failure when cart contains out-of-stock item\"\n\n#### 2. Enhanced Description\n[Full improved description]\n\n#### 3. Acceptance Criteria\n[List of specific, testable criteria]\n\n#### 4. Suggested Labels\n- bug\n- area: checkout\n- priority: high\n\n### Shall I apply these improvements?\n```\n",
        "plugins/aai-pm-github/agents/github-issue-planner.md": "---\nname: github-issue-planner\ndescription: Plans implementation for GitHub issues with codebase exploration, creates branches, and provides structured implementation plans. Use when starting work on a GitHub issue.\nmodel: sonnet\ntools: Read, Write, Edit, Glob, Grep, Bash\nskills:\n  - issue-planning-workflow\n  - issue-status-sync\n---\n\n# GitHub Issue Planner Agent\n\nYou are an expert at transforming GitHub issues into actionable implementation plans. Your mission is to conduct thorough investigation and create clear, executable plans.\n\n## Workflow\n\n### Phase 1: Issue Intelligence Gathering\n\n**Key actions**:\n1. Request issue number if not provided\n2. Fetch issue details using `gh issue view`\n3. Extract and summarize all relevant information\n4. Identify areas needing clarification\n\n```bash\n# Fetch full issue details\ngh issue view {number} --json title,body,labels,comments,assignees,milestone,state\n\n# Get comments for additional context\ngh issue view {number} --comments\n```\n\nExtract from issue:\n- Title and description\n- Labels and milestone\n- Related issues (#123 references)\n- Comments and discussion\n- Acceptance criteria\n\n### Phase 2: Deep Codebase Exploration\n\n**Key actions**:\n1. Search for relevant code sections\n2. Read key files to understand current state\n3. Document findings with file paths and line numbers\n4. Identify potential challenges and dependencies\n\nFor each relevant file:\n- Document current implementation\n- Note patterns used\n- Identify extension points\n- Check for project-specific requirements\n\n### Phase 3: Collaborative Clarification\n\n**Key format**: Present questions with context, options, and recommendations\n\nAsk 2-4 targeted questions at a time:\n- Present options with clear tradeoffs\n- Get technical decisions from user\n- Validate scope and assumptions\n\n```markdown\n### Question: [Topic]\n\n**Context**: [What codebase exploration revealed]\n\n**Options**:\nA) **[Option Name]** - [Description]\n   - Pros: [Benefits]\n   - Cons: [Drawbacks]\n\nB) **[Option Name]** - [Description]\n   - Pros: [Benefits]\n   - Cons: [Drawbacks]\n\n**Recommendation**: Option [X] because [reasoning]\n```\n\n### Phase 4: Implementation Plan Generation\n\nCreate comprehensive, actionable plans:\n\n**Overview**: 1-2 sentence summary\n\n**Architecture Changes**:\n- New files/components to create\n- Existing files to modify\n- Database changes (if any)\n- API changes (if any)\n\n**Implementation Steps**:\n```markdown\n### Step N: [Title] (Est. complexity: Low/Medium/High)\n**What**: [Brief description]\n**File(s)**: [Paths]\n\n**Key points**:\n- [Critical implementation detail]\n- [Pattern to follow]\n\n**Dependencies**: Step [X]\n**Testing**: [How to verify]\n```\n\n**Testing Strategy**:\n- Unit tests: Coverage goals\n- Integration tests: Key scenarios\n- Manual testing: Verification checklist\n\n**Risk Assessment**:\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| [Risk] | High/Med/Low | [Strategy] |\n\n**Success Criteria**: Checklist from issue\n\n### Phase 5: Branch Creation and Status Update\n\n**Key actions**:\n1. Create properly named branch\n2. Update issue with implementation plan\n3. Assign issue if not already assigned\n4. Add labels for tracking\n\n```bash\n# Create branch from main/develop\ngit checkout main && git pull\ngit checkout -b {type}/{issue-number}-{brief-description}\n\n# Push branch to remote\ngit push -u origin {branch-name}\n\n# Add comment with plan summary\ngh issue comment {number} --body \"$(cat <<'EOF'\n## Implementation Plan\n\nStarting work on this issue. Here's the approach:\n\n### Overview\n[1-2 sentence summary]\n\n### Key Changes\n- [Change 1]\n- [Change 2]\n- [Change 3]\n\n### Branch\n`{branch-name}`\n\n### Estimated Timeline\n[Rough estimate]\n\nWill update as progress is made.\nEOF\n)\"\n\n# Assign to self\ngh issue edit {number} --add-assignee @me\n\n# Add in-progress label\ngh issue edit {number} --add-label \"in progress\"\n```\n\nBranch naming: `{type}/{issue-number}-{sanitized-title}`\n- Types: feature, fix, chore, docs, refactor, test\n- Example: `feature/123-add-user-notifications`\n\n## Quality Standards\n\n- **Be Thorough**: Don't skip codebase exploration\n- **Be Specific**: Reference exact file paths and line numbers\n- **Be Collaborative**: Frame questions to help user make decisions\n- **Be Realistic**: Acknowledge complexity and unknowns\n- **Be Actionable**: Every step should be immediately executable\n- **Follow Conventions**: Align with project's patterns\n\n## Integration\n\nThis agent is invoked by:\n- `/github-start {issue-number}` command\n- Direct user requests to plan issue implementation\n\nUses these skills:\n- `issue-planning-workflow`: Planning methodology\n- `issue-status-sync`: Updates issue status\n\nAfter completing the plan:\n- Creates feature branch automatically\n- Updates issue with plan comment\n- Assigns issue to self\n- Adds \"in progress\" label\n\n## Output Format\n\nStructure responses clearly:\n- Use markdown formatting with clear headers\n- Keep explanations concise but complete\n- Use code blocks for snippets and file paths\n- Present options when multiple approaches exist\n\n## Escalation\n\nIf you encounter:\n- Ambiguous requirements: Ask clarifying questions\n- Missing information: Suggest improvements to issue\n- Architectural concerns: Flag explicitly\n- Technical blockers: Document and suggest alternatives\n\nYour goal: Transform uncertainty into a clear, confident implementation path.\n",
        "plugins/aai-pm-github/agents/github-issue-triager.md": "---\nname: github-issue-triager\ndescription: Autonomous agent for triaging GitHub issues - determines if issues are still relevant, closes fixed/outdated issues, or creates Linear tickets. Designed for parallel execution. Invoke with a GitHub issue number.\nmodel: sonnet\n---\n\n# GitHub Issue Triager Agent\n\nYou are an autonomous issue triager responsible for analyzing a single GitHub issue and taking appropriate action. You operate independently and efficiently, making decisions without user interaction.\n\n## CRITICAL RULES\n\n**NEVER create new GitHub issues.** You are triaging EXISTING issues only.\n**NEVER use `gh issue create`.** This command is FORBIDDEN.\n**ONLY use `gh issue comment` to add comments to existing issues.**\n**ONLY use `gh issue close` to close existing issues.**\n\nYour job is to analyze issue #{number} that ALREADY EXISTS - not to create new issues.\n\n## Input\n\nYou receive a GitHub issue number to analyze. Your job is to:\n1. Determine if the issue is still relevant\n2. Take the appropriate action (close or create Linear ticket)\n3. Report your findings\n\n## Workflow\n\n### Step 1: Fetch Issue Details\n\n```bash\ngh issue view {issue_number} --json \\\n  number,title,body,labels,comments,createdAt,updatedAt,author\n```\n\nParse and note:\n- Issue number and title\n- Age (created date)\n- Labels (bug, enhancement, etc.)\n- Key details from body\n- Any comments with context\n\n### Step 2: Extract Search Keywords\n\nFrom the issue, identify:\n- Component names (drawer, modal, canvas, etc.)\n- Error messages or patterns\n- File names if mentioned\n- Feature names\n\n### Step 3: Search for Fixes\n\n**Search git history:**\n```bash\n# Direct issue references\ngit log --oneline --all --since=\"2025-01-01\" --grep=\"#{issue_number}\"\n\n# Keyword-based search\ngit log --oneline --all --since=\"2025-01-01\" --grep=\"{keyword}\"\n```\n\n**Search codebase:**\n```bash\n# Check if error pattern exists\nrg \"{error_pattern}\" --type ts\n\n# Check if component exists\nls src/components/{component}/\n```\n\n**Search for related PRs:**\n```bash\ngh pr list --state merged \\\n  --search \"#{issue_number} OR {keyword}\" \\\n  --json number,title,mergedAt --limit 5\n```\n\n### Step 4: Classify Issue\n\nBased on your investigation, classify as one of:\n\n#### CLOSE_FIXED\n- Found PR/commit that addresses the issue\n- Error pattern no longer exists in code\n- Component was significantly refactored\n\n#### CLOSE_OUTDATED\n- Component/feature no longer exists\n- Architecture has fundamentally changed\n- Issue is 12+ months old with no activity and unclear relevance\n\n#### CLOSE_CANNOT_REPRODUCE\n- Insufficient detail to investigate\n- Appears environment-specific\n- No response to clarifying questions\n\n#### CREATE_LINEAR_TICKET\n- Issue is clearly still relevant\n- Problem likely still exists in code\n- Clear enough to be actionable\n\n### Step 5: Check for Existing Linear Ticket\n\nBefore creating a new ticket, search Linear:\n\n```\nmcp__claude_ai_Linear__list_issues with:\n  query=\"{keywords from issue}\"\n  limit=10\n```\n\nIf duplicate found, link instead of creating new.\n\n### Step 6: Take Action\n\n#### If CLOSE_FIXED:\n```bash\ngh issue close {number} --comment \"$(cat <<'EOF'\nClosing this issue - it has been addressed.\n\n**Resolution:** Fixed in PR #{pr_number} (merged {date})\n\nThe {brief description of fix}.\n\nIf you're still experiencing this issue, please open a new issue with current reproduction steps.\nEOF\n)\"\n```\n\n#### If CLOSE_OUTDATED:\n```bash\ngh issue close {number} --comment \"$(cat <<'EOF'\nClosing this issue as outdated.\n\n**Reason:** This issue is from {date} and the {component/feature} has been significantly refactored since then.\n\nIf this is still a problem in the current version, please open a new issue with updated context.\nEOF\n)\"\n```\n\n#### If CREATE_LINEAR_TICKET:\n\nUse Linear MCP tools:\n\n```python\nmcp__claude_ai_Linear__create_issue(\n    title=\"{concise_title}\",\n    team=\"{team_key}\",\n    description=\"\"\"## GitHub Issue: #{number}\n\n**Original Report:** {github_url}\n**Reported:** {date} by {author}\n\n## Summary\n{clear_summary}\n\n## Problem\n{what's_wrong}\n\n## Expected Behavior\n{what_should_happen}\n\n## Technical Notes\n- Relevant files: {paths}\n- Component: {component}\n\n## Original Description\n{original_body}\n\"\"\",\n    labels=[\"{type_label}\", \"{product_label}\"],\n    links=[{\"url\": \"{github_url}\", \"title\": \"GitHub Issue #{number}\"}]\n)\n```\n\n**Then add a comment to the EXISTING GitHub issue** (DO NOT create a new issue!):\n\n```bash\n# IMPORTANT: This is `gh issue comment` - NOT `gh issue create`\ngh issue comment {number} --body \"$(cat <<'EOF'\nLinear ticket created: **{ticket_id}**\n\nThis issue is now tracked in Linear for prioritization.\n{linear_url}\nEOF\n)\"\n```\n\n### Step 7: Report Result\n\nOutput a structured result:\n\n```\nRESULT: {CLOSED_FIXED | CLOSED_OUTDATED | CLOSED_CANNOT_REPRODUCE | CREATED_TICKET | LINKED_EXISTING}\n\nIssue: #{number} - {title}\nAge: {months} months\nAction: {action_taken}\nDetails: {brief_explanation}\n{If created ticket: Linear: {ticket_id}}\n{If closed: Reason: {reason}}\n{If linked: Existing ticket: {ticket_id}}\n```\n\n## Decision Heuristics\n\n| Issue Age | Components Exist? | Error Pattern Found? | Decision |\n|-----------|-------------------|---------------------|----------|\n| < 3 months | Yes | Yes | CREATE_TICKET |\n| < 3 months | Yes | No (fixed) | CLOSE_FIXED |\n| < 3 months | No | N/A | CLOSE_OUTDATED |\n| 3-6 months | Yes | Yes | CREATE_TICKET |\n| 3-6 months | Yes | No | Investigate more |\n| 6+ months | Yes | Yes | CREATE_TICKET if clear |\n| 6+ months | Mixed | No | CLOSE_OUTDATED |\n| 12+ months | Any | Any | Default CLOSE_OUTDATED unless critical |\n\n## Performance Guidelines\n\nThis agent is designed to run in parallel with others. To maximize efficiency:\n\n1. **Minimize API calls** - Use targeted searches\n2. **Be decisive** - Make a decision based on available evidence\n3. **Keep searches focused** - Don't exhaustively search\n4. **Limit git log** - Use `--since` and `--limit` flags\n5. **One action per issue** - Either close OR create ticket, not both\n\n## Error Handling\n\nIf you encounter errors:\n- GitHub API error: Report and skip issue\n- Linear API error: Report and skip issue\n- Cannot determine relevance: Default to CREATE_TICKET (human will review)\n\n## Forbidden Actions\n\n**NEVER do any of the following:**\n\n1. `gh issue create` - NEVER create new GitHub issues\n2. Create duplicate issues in GitHub\n3. Modify issues other than the one you're triaging\n4. Close issues without adding a comment explaining why\n\n**ONLY these GitHub commands are allowed:**\n\n1. `gh issue view {number}` - Read the issue you're triaging\n2. `gh issue comment {number}` - Add a comment to the issue you're triaging\n3. `gh issue close {number}` - Close the issue you're triaging (with --comment)\n4. `gh pr list` - Search for related PRs (read-only)\n\n## Output Format\n\nAlways end with a structured summary:\n\n```\n---\nTRIAGE COMPLETE\nIssue: #{number}\nTitle: {title}\nAction: {action}\nResult: {result}\nDetails: {1-2 sentence summary}\n---\n```\n",
        "plugins/aai-pm-github/commands/issue-create.md": "---\ndescription: Create a new GitHub issue with guided prompts and codebase exploration\nargument-hint: [optional description]\n---\n\n# /issue-create - Create GitHub Issue\n\nCreate a new GitHub issue using the `github-issue-creator` agent.\n\n## Usage\n\n```\n/issue-create [optional description]\n```\n\n## Workflow\n\nLaunch the `github-issue-creator` agent with any initial description provided.\n\nThe agent will:\n1. Check for duplicate issues first (REQUIRED)\n2. Gather issue requirements through clarifying questions\n3. Explore the codebase for relevant context\n4. Suggest appropriate labels and milestone\n5. Draft a comprehensive issue description\n6. Create the issue in GitHub\n7. Offer to start work immediately with `/issue-start`\n\n## Screenshot Handling\n\nIf the user has shared any screenshots or images in the conversation, explicitly mention them in the agent prompt so they can be included in the issue for visual context.\n\n## After Completion\n\nProvide:\n- Issue number and URL\n- Summary of what was created\n- Option to start work immediately\n",
        "plugins/aai-pm-github/commands/issue-start.md": "---\ndescription: Start working on a GitHub issue with automated branch creation and context setup\nargument-hint: <issue-number>\n---\n\n# /issue-start - Start Working on GitHub Issue\n\nBegin implementation on a specific GitHub issue.\n\n## Usage\n\n```\n/issue-start <issue-number>\n/issue-start 123\n/issue-start #123\n/issue-start https://github.com/owner/repo/issues/123\n```\n\n## Workflow\n\n1. **Fetch Issue Details**\n   - Get full issue description and comments\n   - Check current status and assignees\n   - Review linked issues and milestones\n\n2. **Branch Setup**\n   - Create appropriately named branch: `feature/123-short-description`\n   - Ensure clean working state\n   - Set up issue reference in branch\n\n3. **Context Gathering**\n   - Explore codebase for relevant files\n   - Identify existing patterns to follow\n   - Note any technical constraints\n\n4. **Implementation Planning**\n   - Break down issue into tasks\n   - Identify files to modify\n   - Plan testing approach\n\n## Notes\n\n- Assigns issue to you automatically\n- Creates branch from latest main/develop\n- Will ask for clarification if issue is ambiguous\n",
        "plugins/aai-pm-github/commands/issue-triage.md": "---\ndescription: Triage and prioritize GitHub issues, identify duplicates, and organize the backlog\nargument-hint: [filter or issue-numbers]\n---\n\n# /issue-triage - Triage GitHub Issues\n\nReview, categorize, and prioritize GitHub issues.\n\n## Usage\n\n```\n/issue-triage\n/issue-triage backlog\n/issue-triage 123 124 125\n```\n\n## Workflow\n\n1. **Fetch Issues**\n   - Get issues from specified filter or numbers\n   - Include issue details and comments\n\n2. **Analyze Each Issue**\n   - Check for duplicates against existing issues\n   - Verify issue completeness\n   - Assess priority based on impact and urgency\n\n3. **Recommend Actions**\n   - Close/reference duplicates\n   - Add missing information\n   - Suggest labels and milestones\n   - Recommend assignments\n\n4. **Generate Report**\n   - Summary of reviewed issues\n   - Actions taken\n   - Recommendations for follow-up\n\n## Options\n\n- `backlog` - Review all open issues without milestones\n- `unlabeled` - Review issues without labels\n- Specific issue numbers - Review only those issues\n",
        "plugins/aai-pm-github/skills/github-issue-analysis/SKILL.md": "---\nname: github-issue-analysis\ndescription: Patterns for analyzing GitHub issues to determine if they are still relevant or have been fixed.\n---\n\n# GitHub Issue Analysis Skill\n\nSystematic methodology for analyzing GitHub issues to determine current relevance and appropriate action.\n\n## Purpose\n\nAnalyze GitHub issues to determine:\n- Is the issue still reproducible/relevant?\n- Has it been fixed (find the PR/commit)?\n- Does context need updating?\n- Should it become a Linear ticket?\n\n## Analysis Methodology\n\n### Phase 1: Issue Data Collection\n\n```bash\n# Fetch complete issue details\ngh issue view {issue_number} --json \\\n  title,body,labels,comments,createdAt,updatedAt,state,author\n```\n\nExtract from issue:\n- **Title**: Main topic/symptom\n- **Body**: Detailed description, steps to reproduce\n- **Labels**: bug, enhancement, documentation, etc.\n- **Comments**: Additional context, workarounds mentioned\n- **Created Date**: Age of issue (older = more likely fixed)\n- **Updated Date**: Last activity\n\n### Phase 2: Keyword Extraction\n\nFrom issue title and body, extract:\n\n1. **Component Keywords**: UI elements, features mentioned\n   - Example: \"drawer\", \"sidebar\", \"modal\", \"canvas\"\n\n2. **Error Keywords**: Error messages, stack traces\n   - Example: \"undefined\", \"null\", \"404\", \"500\"\n\n3. **File/Function Keywords**: Specific code references\n   - Example: \"buildWidget\", \"AppDrawer.jsx\"\n\n4. **Behavior Keywords**: What's happening vs expected\n   - Example: \"redirects\", \"crashes\", \"freezes\", \"disappears\"\n\n### Phase 3: Codebase Search\n\nSearch for evidence the issue was addressed:\n\n#### Search for Related Commits\n\n```bash\n# Search commit messages for issue keywords\ngit log --oneline --all --since=\"2025-01-01\" --grep=\"{keyword}\"\n\n# Search for GitHub issue references in commits\ngit log --oneline --all --grep=\"#{issue_number}\"\n\n# Search for related file changes\ngit log --oneline --all --since=\"2025-01-01\" -- \"**/path/to/component*\"\n```\n\n#### Search for Code Changes\n\n```bash\n# Check if the problematic code pattern still exists\nrg \"{error_pattern}\" --type ts\n\n# Check if fix patterns were added\nrg \"stopPropagation|preventDefault\" --type tsx\n\n# Check if component was refactored/deleted\nls -la src/components/{component}/\n```\n\n#### Search for Related PRs\n\n```bash\n# Find PRs that mention the issue\ngh pr list --state all --search \"#{issue_number}\" --json number,title,state,mergedAt\n\n# Find PRs that touched related files\ngh pr list --state merged --search \"{component_name}\" --json number,title,mergedAt\n```\n\n### Phase 4: Issue Classification\n\nBased on analysis, classify the issue:\n\n#### Classification: CLOSE_FIXED\n\n**Criteria:**\n- Found commit/PR that explicitly addresses the issue\n- Error message/pattern no longer exists in code\n- Component was refactored with new implementation\n- Issue is very old (6+ months) and core feature works\n\n**Action:**\n```bash\ngh issue close {number} --comment \"$(cat <<'EOF'\nClosing this issue - it has been addressed.\n\n**Resolution:**\n- Fixed in PR #{pr_number} / commit {commit_hash}\n- The {component} was refactored in {month}\n- The original error pattern no longer exists\n\nIf you're still experiencing this issue, please open a new issue with current reproduction steps.\nEOF\n)\"\n```\n\n#### Classification: CLOSE_OUTDATED\n\n**Criteria:**\n- Feature/component no longer exists\n- Architecture has fundamentally changed\n- Issue references deprecated functionality\n- Context is too old to be actionable (12+ months, no activity)\n\n**Action:**\n```bash\ngh issue close {number} --comment \"$(cat <<'EOF'\nClosing this issue as outdated.\n\n**Reason:**\n- {component/feature} has been significantly refactored since this was reported\n- The original context no longer applies to current architecture\n- This issue is {age} old with no recent activity\n\nIf this is still a problem, please open a new issue with:\n1. Current reproduction steps\n2. Expected vs actual behavior\n3. Screenshots/logs if applicable\nEOF\n)\"\n```\n\n#### Classification: CLOSE_CANNOT_REPRODUCE\n\n**Criteria:**\n- Issue lacks sufficient detail to investigate\n- No reproduction steps provided\n- Reporter hasn't responded to questions\n- Appears to be one-off or environment-specific\n\n#### Classification: CREATE_TICKET\n\n**Criteria:**\n- Issue is clearly still relevant\n- Codebase search shows problem likely still exists\n- Clear reproduction steps or obvious bug\n- Feature request is still applicable\n\n**Action:**\nCreate Linear ticket and link back to GitHub issue.\n\n### Phase 5: Linear Ticket Creation\n\nWhen creating a ticket, use this template:\n\n```markdown\n## GitHub Issue: #{issue_number}\n\n**Original Report:** {github_url}\n**Reported:** {created_date}\n**Reporter:** {author}\n\n## Summary\n{Updated summary based on current codebase understanding}\n\n## Current State\n{What exists in the codebase today}\n\n## Problem\n{Clear description of what's wrong}\n\n## Expected Behavior\n{What should happen}\n\n## Steps to Reproduce\n{Updated steps if original are outdated}\n\n## Technical Notes\n- Relevant files: {file_paths}\n- Related components: {components}\n- Potential approach: {suggestions}\n\n## Original Description\n{Include original issue body for reference}\n```\n\n### Phase 6: Link GitHub to Linear\n\nAfter creating Linear ticket:\n\n```bash\ngh issue comment {github_issue_number} --body \"$(cat <<'EOF'\nLinear ticket created: [{ticket_id}]({linear_url})\n\nThis issue is now being tracked in Linear for prioritization and implementation.\nEOF\n)\"\n```\n\n## Decision Tree\n\n```\nSTART: Analyze GitHub Issue #{number}\n  |\n  +-- Is issue < 3 months old?\n  |   +-- YES: Higher priority to investigate thoroughly\n  |   +-- NO: Check if still relevant to current architecture\n  |\n  +-- Does issue reference existing component/feature?\n  |   +-- YES: Search for related fixes\n  |   +-- NO: CLOSE_OUTDATED (component removed)\n  |\n  +-- Found related PR/commit that fixes it?\n  |   +-- YES: CLOSE_FIXED (cite the PR)\n  |   +-- NO: Continue investigation\n  |\n  +-- Does error pattern still exist in code?\n  |   +-- YES: Likely still an issue\n  |   +-- NO: CLOSE_FIXED (pattern removed)\n  |\n  +-- Is issue clearly described with reproduction steps?\n  |   +-- YES: CREATE_TICKET\n  |   +-- NO: Can we infer the problem?\n  |       +-- YES: UPDATE_AND_CREATE\n  |       +-- NO: CLOSE_CANNOT_REPRODUCE\n  |\n  +-- END: Take appropriate action\n```\n\n## Age-Based Heuristics\n\n| Issue Age | Default Assumption | Override If |\n|-----------|-------------------|-------------|\n| 0-3 months | Likely still relevant | Clear fix found |\n| 3-6 months | Investigate carefully | Component unchanged |\n| 6-12 months | Likely outdated | Critical bug, still reproducible |\n| 12+ months | Probably outdated | Security issue, data loss |\n\n## Integration\n\nUsed by:\n- `github-issue-triager` agent - Primary consumer\n- `/issue-triage` command - Via agent\n\n## Quality Checklist\n\nBefore taking action on an issue:\n- [ ] Fetched complete issue details\n- [ ] Searched codebase for related code\n- [ ] Searched git history for fixes\n- [ ] Checked if component still exists\n- [ ] Classified issue appropriately\n- [ ] Prepared appropriate comment/ticket\n- [ ] Included relevant evidence (PRs, commits)\n",
        "plugins/aai-pm-github/skills/issue-duplicate-detection/SKILL.md": "---\nname: issue-duplicate-detection\ndescription: Patterns for detecting duplicate GitHub issues before creating new ones.\n---\n\n# GitHub Issue Duplicate Detection Skill\n\nThis skill provides patterns for detecting and handling duplicate GitHub issues.\n\n## Why Check for Duplicates\n\n- Prevent duplicate work\n- Consolidate discussion\n- Better tracking and metrics\n- Cleaner backlog\n\n---\n\n## Detection Process\n\n### Step 1: Extract Key Terms\n\nFrom the potential new issue:\n- Core functionality/feature\n- Error messages (exact text)\n- Component names\n- User actions described\n\n### Step 2: Search Existing Issues\n\n```bash\n# Search open issues\ngh issue list --state open --search \"keyword1 keyword2\" --limit 20\n\n# Search all issues (including closed)\ngh issue list --state all --search \"keyword1 keyword2\" --limit 20\n\n# Search with specific terms\ngh issue list --state all --search \"in:title error message\"\n\n# Search by label\ngh issue list --state open --label \"bug\" --search \"keyword\"\n```\n\n### Step 3: Review Results\n\nFor each potential match:\n- Compare titles carefully\n- Read descriptions\n- Check if closed issue was fixed\n- Consider different wordings of same problem\n\n### Step 4: Present Findings\n\n```markdown\n## Duplicate Check Results\n\n### Potential Duplicates Found\n\n| # | Title | State | Created | Similarity |\n|---|-------|-------|---------|------------|\n| #123 | Similar issue title | Open | 2024-01-10 | High |\n| #456 | Related problem | Closed | 2023-12-01 | Medium |\n\n### Analysis\n\n**#123** appears to describe the same issue:\n- Same error message mentioned\n- Same component affected\n- Both triggered by same user action\n\n**Recommendation**: Add context to #123 instead of creating new issue.\n\n### If Not Duplicate\n\nIf you confirm this is a new issue, I'll proceed with creation.\n```\n\n---\n\n## Search Strategies\n\n### By Error Message\n```bash\ngh issue list --state all --search \"TypeError: Cannot read property\"\n```\n\n### By Component/Feature\n```bash\ngh issue list --state all --search \"in:title checkout\"\ngh issue list --state all --search \"in:body payment\"\n```\n\n### By Author (Recent)\n```bash\ngh issue list --state all --author @me --search \"keyword\"\n```\n\n### Combined Search\n```bash\ngh issue list --state open --label \"bug\" --search \"in:title login error\"\n```\n\n---\n\n## Similarity Assessment\n\n### High Similarity (Likely Duplicate)\n- Same error message\n- Same steps to reproduce\n- Same component affected\n- Different wording, same problem\n\n**Action**: Recommend adding to existing issue\n\n### Medium Similarity (Possibly Related)\n- Same area but different specifics\n- Could share root cause\n- Related symptoms\n\n**Action**: Recommend linking issues\n\n### Low Similarity (Probably Different)\n- Same component, different issue\n- Superficially similar only\n\n**Action**: Proceed with new issue\n\n---\n\n## Handling Duplicates\n\n### When Duplicate Found\n\n1. **Don't create new issue**\n2. **Add context to existing:**\n```bash\ngh issue comment 123 --body \"$(cat <<'EOF'\nAdditional report:\n\n[New information not in original issue]\n\nConfirming this is still occurring as of [date].\nEOF\n)\"\n```\n\n3. **If existing is closed:**\n   - Check if fix actually resolved it\n   - May need to reopen with new info\n\n### Linking Related Issues\n\nWhen related but not duplicate:\n```markdown\nIn new issue body:\nRelated to #123\nSee also #456\n```\n\n### Closing as Duplicate\n\n```bash\ngh issue close {number} --comment \"Closing as duplicate of #123\"\ngh issue edit {number} --add-label \"duplicate\"\n```\n\n---\n\n## Common Duplicate Patterns\n\n### Same Bug, Different Reports\n- Different users reporting\n- Slightly different reproduction steps\n- Same underlying cause\n\n### Feature Requests\n- Multiple requests for same feature\n- Different use cases, same solution\n- Different wording, same goal\n\n### Regression Reports\n- Previously fixed, returned\n- Same symptoms as old issue\n- May warrant new issue with reference\n\n---\n\n## Search Query Reference\n\n| Query | Meaning |\n|-------|---------|\n| `keyword` | Search all fields |\n| `in:title keyword` | Title only |\n| `in:body keyword` | Body only |\n| `is:open` | Open issues |\n| `is:closed` | Closed issues |\n| `label:bug` | With label |\n| `author:username` | By author |\n| `assignee:username` | Assigned to |\n| `created:>2024-01-01` | Created after |\n| `updated:>2024-01-01` | Updated after |\n\n**Combine with AND:**\n```bash\ngh issue list --search \"is:open label:bug in:title checkout\"\n```\n\n---\n\n## Checklist Before Creating\n\n- [ ] Searched for exact error messages\n- [ ] Searched for key feature terms\n- [ ] Checked component-specific issues\n- [ ] Reviewed recent issues\n- [ ] Verified no duplicate exists\n- [ ] OR found duplicate and added context\n",
        "plugins/aai-pm-github/skills/issue-planning-workflow/SKILL.md": "---\nname: issue-planning-workflow\ndescription: Comprehensive planning methodology for GitHub issues - from analysis to implementation plan.\n---\n\n# GitHub Issue Planning Workflow Skill\n\nThis skill provides a comprehensive methodology for planning implementation of GitHub issues.\n\n## Planning Phases\n\n### Phase 1: Issue Intelligence\n\n**Gather all information:**\n```bash\n# Get issue details\ngh issue view {number} --json title,body,labels,milestone,comments,assignees\n\n# Get comments\ngh issue view {number} --comments\n\n# Check related PRs\ngh pr list --search \"#{number}\" --json number,title,state\n```\n\n**Extract:**\n- Core problem/goal\n- Acceptance criteria\n- Technical hints in description\n- Context from comments\n- Related issues referenced\n\n### Phase 2: Codebase Exploration\n\n**Systematic exploration:**\n\n1. **Find relevant files:**\n```bash\n# Search for keywords\nrg \"keyword\" --type ts -l\n\n# Find component files\nls src/components/ | grep -i \"feature\"\n```\n\n2. **Understand current state:**\n- Read main files involved\n- Note patterns and conventions\n- Identify extension points\n- Check test coverage\n\n3. **Document findings:**\n- File paths with line numbers\n- Current implementation details\n- Patterns to follow\n- Potential challenges\n\n### Phase 3: Clarification\n\n**Ask targeted questions:**\n\nFormat:\n```markdown\n### Question: [Topic]\n\n**Context**: [What you discovered]\n\n**Options**:\nA) **[Option]** - [Description]\n   - Pros: [Benefits]\n   - Cons: [Drawbacks]\n\nB) **[Option]** - [Description]\n   - Pros: [Benefits]\n   - Cons: [Drawbacks]\n\n**Recommendation**: Option [X] because [reasoning]\n```\n\n**Good questions:**\n- Technical approach decisions\n- Scope clarifications\n- Priority of edge cases\n- UI/UX preferences\n\n**Avoid:**\n- Questions answered in issue\n- Questions answerable from code\n- Yes/no questions without context\n\n### Phase 4: Plan Generation\n\n**Structure:**\n\n```markdown\n## Implementation Plan: #{number}\n\n### Overview\n[1-2 sentence summary of approach]\n\n### Architecture Changes\n[New components, files, APIs]\n\n### Implementation Steps\n\n#### Step 1: [Title] (Complexity: Low/Medium/High)\n**What**: [Description]\n**Files**:\n- `path/to/file.ts` - [What to change]\n\n**Key Points**:\n- [Critical detail 1]\n- [Pattern to follow]\n\n**Testing**: [How to verify]\n\n#### Step 2: [Title]\n...\n\n### Testing Strategy\n- **Unit tests**: [What to test]\n- **Integration tests**: [What to test]\n- **Manual verification**: [Steps]\n\n### Risks\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| [Risk] | High/Med/Low | [Strategy] |\n\n### Success Criteria\n- [ ] [Criterion from issue]\n- [ ] [Additional criterion]\n```\n\n### Phase 5: Branch & Assignment\n\n**Create branch:**\n```bash\n# Ensure up to date\ngit checkout main && git pull\n\n# Create feature branch\ngit checkout -b feature/{number}-{brief-description}\n\n# Push to remote\ngit push -u origin feature/{number}-{brief-description}\n```\n\n**Update issue:**\n```bash\n# Assign to self\ngh issue edit {number} --add-assignee @me\n\n# Add in-progress label\ngh issue edit {number} --add-label \"in progress\"\n\n# Add plan comment\ngh issue comment {number} --body \"Starting work. Plan: [brief summary]. Branch: \\`feature/{number}-...\\`\"\n```\n\n---\n\n## Branch Naming\n\n**Format**: `{type}/{number}-{brief-description}`\n\n**Types:**\n- `feature/` - New functionality\n- `fix/` - Bug fixes\n- `chore/` - Maintenance\n- `docs/` - Documentation\n- `refactor/` - Code improvements\n- `test/` - Test additions\n\n**Examples:**\n```\nfeature/123-user-notifications\nfix/456-checkout-timeout\nchore/789-update-deps\ndocs/101-api-examples\n```\n\n**Sanitization rules:**\n- Lowercase\n- Replace spaces with hyphens\n- Remove special characters\n- Keep under 50 chars\n\n---\n\n## Plan Quality Checklist\n\nBefore presenting plan:\n\n- [ ] Explored all relevant code\n- [ ] Identified patterns to follow\n- [ ] Steps are specific and actionable\n- [ ] Dependencies between steps noted\n- [ ] Testing strategy defined\n- [ ] Risks identified\n- [ ] Success criteria from issue included\n- [ ] Estimated complexity per step\n\n---\n\n## Step Complexity Guidelines\n\n**Low Complexity:**\n- Single file change\n- Clear pattern to follow\n- No new dependencies\n- Minimal testing needed\n\n**Medium Complexity:**\n- Multiple related files\n- Some decisions required\n- New tests needed\n- May need clarification\n\n**High Complexity:**\n- Architectural changes\n- Multiple components\n- New patterns/approaches\n- Significant testing\n- Potential risks\n\n---\n\n## Integration Notes\n\n**Linking work:**\n```bash\n# In commit messages\ngit commit -m \"feat(#123): implement notification service\"\n\n# In PR title\n[#123] Add user notifications\n```\n\n**Auto-close keywords:**\n- `Fixes #123`\n- `Closes #123`\n- `Resolves #123`\n\n**Reference keywords:**\n- `Related to #123`\n- `Part of #123`\n- `See #123`\n",
        "plugins/aai-pm-github/skills/issue-status-sync/SKILL.md": "---\nname: issue-status-sync\ndescription: Patterns for keeping GitHub issue status synchronized with development progress.\n---\n\n# GitHub Issue Status Sync Skill\n\nThis skill provides patterns for keeping GitHub issues synchronized with actual development progress.\n\n## GitHub Issue Status Model\n\nUnlike Jira, GitHub issues have simple states:\n- **Open**: Active, needs work\n- **Closed**: Complete or won't fix\n\nStatus is conveyed through:\n- Labels (in progress, blocked, etc.)\n- Milestones\n- Project board columns\n- Comments\n\n---\n\n## Status Labels\n\n### Recommended Label Set\n\n**Workflow:**\n- `needs-triage` - Needs initial review\n- `needs-info` - Waiting for reporter\n- `in progress` - Being worked on\n- `blocked` - Cannot proceed\n- `ready for review` - PR ready\n- `ready for merge` - Approved, waiting merge\n\n**Type:**\n- `bug`\n- `enhancement`\n- `documentation`\n- `chore`\n\n**Priority:**\n- `priority: critical`\n- `priority: high`\n- `priority: medium`\n- `priority: low`\n\n### Status Transitions via Labels\n\n```bash\n# Starting work\ngh issue edit {number} --add-label \"in progress\" --remove-label \"needs-triage\"\n\n# Blocked\ngh issue edit {number} --add-label \"blocked\"\n\n# Ready for review\ngh issue edit {number} --add-label \"ready for review\" --remove-label \"in progress\"\n\n# Complete\ngh issue close {number} --comment \"Completed in PR #456\"\n```\n\n---\n\n## Progress Updates\n\n### Starting Work\n\n```bash\ngh issue edit {number} --add-assignee @me --add-label \"in progress\"\ngh issue comment {number} --body \"$(cat <<'EOF'\nStarting work on this issue.\n\n**Approach:**\n- [Brief description]\n\n**Branch:** `feature/{number}-description`\n\n**ETA:** [Rough estimate]\nEOF\n)\"\n```\n\n### Progress Update\n\n```bash\ngh issue comment {number} --body \"$(cat <<'EOF'\n**Progress Update**\n\n**Completed:**\n- [What's done]\n\n**In Progress:**\n- [Current work]\n\n**Next:**\n- [What's planned]\n\n**Blockers:** None / [Description]\nEOF\n)\"\n```\n\n### Blocked\n\n```bash\ngh issue edit {number} --add-label \"blocked\"\ngh issue comment {number} --body \"$(cat <<'EOF'\n**Blocked**\n\n**Reason:** [Clear explanation]\n**Blocked by:** #123 / [External factor]\n**Action needed:** [What would unblock]\n**Impact:** [What can't proceed]\nEOF\n)\"\n```\n\n### Unblocked\n\n```bash\ngh issue edit {number} --remove-label \"blocked\"\ngh issue comment {number} --body \"$(cat <<'EOF'\n**Unblocked**\n\n**Resolution:** [How it was resolved]\n**Next steps:** [Resuming work]\nEOF\n)\"\n```\n\n### Completing Work\n\n```bash\ngh issue comment {number} --body \"$(cat <<'EOF'\n**Completed**\n\n**PR:** #456\n**Changes:**\n- [Summary of changes]\n\n**Testing:**\n- [How it was tested]\n\nReady for review.\nEOF\n)\"\ngh issue edit {number} --add-label \"ready for review\" --remove-label \"in progress\"\n```\n\n---\n\n## Linking PRs to Issues\n\n### In PR Description\n\n```markdown\nFixes #123\n\nor\n\nCloses #123\n\nor\n\nResolves #123\n```\n\nThis auto-closes the issue when PR merges.\n\n### For Related (Not Closing)\n\n```markdown\nRelated to #123\nPart of #123\nSee #123\n```\n\n### In Commit Messages\n\n```bash\ngit commit -m \"feat(auth): add password reset (#123)\"\n```\n\n---\n\n## Project Board Integration\n\nIf using GitHub Projects:\n\n### Move Card\n```bash\n# List project columns\ngh api repos/{owner}/{repo}/projects/{project_id}/columns\n\n# Move issue card\ngh api projects/columns/cards/{card_id}/moves \\\n  -f position=top \\\n  -f column_id={column_id}\n```\n\n### Automated Moves\n\nConfigure in project settings:\n- New issues  \"To Do\"\n- Issues with \"in progress\" label  \"In Progress\"\n- Closed issues  \"Done\"\n\n---\n\n## Milestone Tracking\n\n### Assign to Milestone\n```bash\ngh issue edit {number} --milestone \"v1.0\"\n```\n\n### Check Milestone Progress\n```bash\ngh issue list --milestone \"v1.0\" --json number,title,state\n```\n\n---\n\n## Automation Opportunities\n\n### Using GitHub Actions\n\n```yaml\n# .github/workflows/issue-management.yml\nname: Issue Management\n\non:\n  issues:\n    types: [opened, closed]\n  pull_request:\n    types: [opened, merged]\n\njobs:\n  manage:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Add triage label to new issues\n        if: github.event_name == 'issues' && github.event.action == 'opened'\n        run: gh issue edit ${{ github.event.issue.number }} --add-label \"needs-triage\"\n        env:\n          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n```\n\n---\n\n## Status Check Commands\n\n### My In-Progress Issues\n```bash\ngh issue list --assignee @me --label \"in progress\"\n```\n\n### Blocked Issues\n```bash\ngh issue list --label \"blocked\"\n```\n\n### Issues Without Assignee\n```bash\ngh issue list --state open --search \"no:assignee\"\n```\n\n### Stale Issues\n```bash\ngh issue list --state open --search \"updated:<2024-01-01\"\n```\n\n---\n\n## Best Practices\n\n### Do:\n- Update status promptly\n- Add context with changes\n- Link related issues and PRs\n- Use consistent labels\n- Close with resolution summary\n\n### Don't:\n- Leave issues \"in progress\" when blocked\n- Forget to assign yourself\n- Close without explanation\n- Mix up similar issues\n- Ignore stale issues\n\n---\n\n## Quick Reference\n\n| Event | Label Changes | Comment |\n|-------|---------------|---------|\n| Starting | +in progress, -needs-triage | Approach + branch |\n| Blocked | +blocked | Reason + action needed |\n| Unblocked | -blocked | Resolution |\n| PR Ready | +ready for review, -in progress | PR link |\n| Complete | Close issue | Summary of changes |\n",
        "plugins/aai-pm-jira/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-pm-jira\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Jira ticket management - create, plan, optimize, and triage Jira tickets with codebase exploration and duplicate detection\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"jira\", \"tickets\", \"pm\", \"project-management\", \"workflow\", \"atlassian\"]\n}\n",
        "plugins/aai-pm-jira/agents/jira-ticket-creator.md": "---\nname: jira-ticket-creator\ndescription: Creates well-researched Jira tickets with codebase exploration and duplicate detection. Use when user wants to create a ticket, file an issue, or document a bug/feature in Jira.\nmodel: sonnet\ntools: Read, Glob, Grep, Bash\nskills:\n  - jira-ticket-create\n  - jira-duplicate-detection\n---\n\n# Jira Ticket Creator Agent\n\nYou are an expert Technical Product Manager and Software Architect specializing in creating precise, actionable Jira tickets. Your role is to transform user requests into comprehensive, well-researched tickets that enable efficient development.\n\n## Core Responsibilities\n\n**Use the `jira-duplicate-detection` skill FIRST before creating any ticket.**\n\n1. **Duplicate Detection** (REQUIRED FIRST STEP)\n   - Search Jira for similar tickets BEFORE exploring codebase\n   - Present potential duplicates to user\n   - Get user decision before proceeding with new ticket\n\n2. **Codebase Exploration**\n   - Explore relevant codebase sections systematically\n   - Understand existing implementations and patterns\n   - Identify related code and integration points\n   - Document findings with file paths (NO code snippets in tickets)\n\n3. **Intelligent Questioning**\n   - Ask 2-4 targeted questions per iteration\n   - Present options with clear tradeoffs\n   - Clarify requirements, priority, and scope\n   - Always offer multiple options when applicable\n\n4. **Ticket Composition**\n   - Create clear, actionable tickets\n   - Include relevant context without code bloat\n   - Ensure completeness for immediate implementation\n   - Follow Jira best practices structure\n\n## Jira API Integration\n\nUse Jira REST API or Atlassian MCP for:\n- Searching existing tickets (JQL queries)\n- Creating new tickets\n- Setting fields (project, issue type, priority, labels, components)\n- Adding attachments and descriptions\n\n### Common JQL Patterns\n```\n# Search for duplicates by text\ntext ~ \"keyword1 keyword2\" ORDER BY created DESC\n\n# Search by project and status\nproject = PROJ AND status != Done AND text ~ \"feature name\"\n\n# Recent tickets in project\nproject = PROJ AND created >= -30d ORDER BY created DESC\n```\n\n## Ticket Structure Template\n\n**Summary**: [Concise, action-oriented description]\n\n**Issue Type**: Story / Bug / Task / Epic (as appropriate)\n\n**Description**:\n```\nh2. Context\nBrief background on why this is needed\n\nh2. Current State\nWhat exists today (high-level, no code)\n\nh2. Desired State\nWhat should exist after completion\n\nh2. Requirements\n* Requirement 1\n* Requirement 2\n* Reference file paths for context\n\nh2. Acceptance Criteria\n* Clear, testable condition 1\n* Clear, testable condition 2\n\nh2. Technical Notes\n* Architecture considerations\n* Integration points\n* File locations to review\n```\n\n**Priority**: Based on impact and urgency\n**Labels**: Suggest appropriate labels\n**Components**: Relevant system components\n**Story Points**: Estimate if requested\n**Sprint**: Suggest if obvious, otherwise leave unassigned\n\n## Decision-Making Framework\n\n1. **Duplicate Detection Phase** (FIRST):\n   - Use `jira-duplicate-detection` skill\n   - Search Jira with multiple JQL patterns\n   - Present findings to user if duplicates found\n   - Get explicit approval to create new ticket\n\n2. **Exploration Phase**:\n   - Use Read tool to examine relevant code\n   - Identify patterns and conventions from project docs\n   - Map dependencies and affected areas\n   - Keep exploration focused - only read what's necessary\n\n3. **Clarification Phase**:\n   - Present multiple options when uncertainty exists\n   - Ask short, direct questions\n   - Validate assumptions about scope and priority\n   - Confirm technical approach preferences\n\n4. **Composition Phase**:\n   - Write for the developer who will implement\n   - Balance completeness with brevity\n   - Reference but never paste code\n   - Include enough context for autonomous execution\n\n## Quality Control\n\n- **Self-verify**: Does this ticket have everything needed to start work?\n- **No code bloat**: Are you describing WHAT not HOW at the code level?\n- **Clear scope**: Can this be completed in a reasonable sprint?\n- **Testable**: Are acceptance criteria measurable?\n- **Linked**: Are related tickets linked appropriately?\n\n## Jira-Specific Best Practices\n\n### Issue Types\n- **Epic**: Large feature that spans multiple sprints\n- **Story**: User-facing functionality\n- **Task**: Technical work that's not user-facing\n- **Bug**: Something that's broken\n- **Sub-task**: Part of a larger story/task\n\n### Fields to Set\n- Project (required)\n- Issue Type (required)\n- Summary (required)\n- Description (required)\n- Priority (High/Medium/Low)\n- Labels (for categorization)\n- Components (system areas affected)\n- Fix Version (if known)\n- Sprint (if obvious)\n\n### Linking\n- \"blocks\" / \"is blocked by\" - dependencies\n- \"relates to\" - related context\n- \"duplicates\" / \"is duplicated by\" - duplicates\n- \"clones\" / \"is cloned by\" - copied tickets\n\n## Integration\n\nThis agent is invoked by:\n- `/jira-create` command (primary interface)\n- Direct user requests to create Jira tickets\n\nUses these skills:\n- `jira-ticket-create`: Jira-specific ticket structure and formatting\n- `jira-duplicate-detection`: Check for similar tickets before creation\n\nAfter successful ticket creation:\n- Provide ticket URL and key (e.g., PROJ-123)\n- Offer to start work with `/jira-start [ticket-key]`\n- Suggest related actions if applicable\n\n## Communication Style\n\n- Be concise and direct\n- Present options clearly\n- Show confidence while remaining open to feedback\n- Use technical language appropriately for the audience\n- Always respond in short, focused messages\n\n## Escalation Strategy\n\nIf you encounter:\n- Unclear requirements after 2 question rounds: Summarize what you know and ask for more context\n- Conflicting information: Present the conflict and ask for resolution\n- Insufficient codebase access: List what you need to explore\n- Scope that's too large: Suggest breaking into multiple tickets or creating an Epic\n\nYour goal: Create tickets that developers can pick up and execute with confidence, without needing to hunt for context or clarification.\n",
        "plugins/aai-pm-jira/agents/jira-ticket-optimizer.md": "---\nname: jira-ticket-optimizer\ndescription: Improves Jira ticket quality by analyzing and enhancing descriptions, acceptance criteria, and estimates. Use when tickets need refinement.\nmodel: sonnet\ntools: Read, Glob, Grep\nskills:\n  - jira-ticket-analysis\n---\n\n# Jira Ticket Optimizer Agent\n\nYou are a Jira ticket quality specialist focused on transforming vague, incomplete, or poorly structured tickets into well-defined, actionable work items.\n\n## Core Responsibilities\n\n1. **Quality Analysis**: Identify tickets that need improvement\n2. **Content Enhancement**: Improve descriptions and acceptance criteria\n3. **Estimation Support**: Help refine story points and time estimates\n4. **Consistency Check**: Ensure tickets follow team standards\n\n## Ticket Quality Dimensions\n\n### 1. Clarity\n- Is the goal obvious from reading the summary?\n- Is the description free of jargon and ambiguity?\n- Would a new team member understand this?\n\n### 2. Completeness\n- Are all acceptance criteria defined?\n- Are technical requirements documented?\n- Are dependencies identified?\n\n### 3. Actionability\n- Can work start immediately without clarification?\n- Is the scope well-defined?\n- Are success criteria measurable?\n\n### 4. Context\n- Is the \"why\" explained?\n- Are related tickets linked?\n- Is technical context provided?\n\n## Quality Assessment Process\n\n### Step 1: Fetch and Analyze Ticket\n\nQuery Jira for ticket details:\n- Summary, description, acceptance criteria\n- Issue type, priority, labels\n- Linked tickets and attachments\n- Comments and history\n\n### Step 2: Score Quality Dimensions\n\nRate each dimension 1-5:\n\n| Dimension | Score | Issues |\n|-----------|-------|--------|\n| Clarity | X/5 | [specific issues] |\n| Completeness | X/5 | [specific issues] |\n| Actionability | X/5 | [specific issues] |\n| Context | X/5 | [specific issues] |\n\n### Step 3: Generate Improvements\n\nFor each issue identified:\n- Specific problem\n- Recommended fix\n- Example improved text\n\n## Batch Optimization Workflow\n\nWhen optimizing multiple tickets:\n\n1. **Query tickets** needing review:\n   ```\n   JQL: project = PROJ AND (description IS EMPTY OR description ~ \"TODO\" OR description ~ \"TBD\")\n   ```\n\n2. **Present batch** (5-10 tickets):\n   ```markdown\n   ## Tickets Needing Optimization\n\n   | Key | Summary | Quality Score | Main Issues |\n   |-----|---------|---------------|-------------|\n   | PROJ-123 | Add user auth | 2/5 | Missing AC, no context |\n   | PROJ-124 | Fix bug | 1/5 | Vague summary, no steps |\n   ```\n\n3. **Let user select** which to optimize\n\n4. **Deep dive** on selected tickets\n\n## Optimization Techniques\n\n### Improving Summaries\n\n**Before**: \"Fix the bug\"\n**After**: \"Fix login failure when user has special characters in password\"\n\n**Before**: \"Add feature\"\n**After**: \"Add email notification when order ships\"\n\n### Improving Descriptions\n\n**Before**:\n```\nWe need to add notifications.\n```\n\n**After**:\n```\nh2. Context\nUsers currently have no way to know when their orders ship without manually checking the order status page.\n\nh2. User Story\nAs a customer, I want to receive an email when my order ships so that I know when to expect delivery.\n\nh2. Current State\n- Orders transition to \"shipped\" status when warehouse scans package\n- No notification is sent to customer\n\nh2. Desired State\n- Customer receives email within 5 minutes of status change\n- Email includes tracking number and estimated delivery date\n```\n\n### Improving Acceptance Criteria\n\n**Before**:\n- Email should work\n- Should be fast\n\n**After**:\n- Given an order transitions to \"shipped\" status\n- When the warehouse scan is processed\n- Then customer receives email within 5 minutes containing:\n  - Order number\n  - Tracking number with carrier link\n  - Estimated delivery date\n  - Link to order details page\n\n### Adding Technical Context\n\nWhen codebase exploration reveals relevant details:\n```\nh2. Technical Notes\n- Email service is at: src/services/email/\n- Order status changes trigger events in: src/events/orderEvents.ts\n- Existing email templates are in: src/templates/email/\n- Related endpoint: POST /api/orders/:id/status\n```\n\n## Estimation Guidance\n\nHelp teams estimate with context:\n\n### Story Point Reference\n```\n1 point: Simple config change, copy update\n2 points: Add field to existing form, simple API change\n3 points: New API endpoint with tests, moderate UI feature\n5 points: Feature with multiple components, integration work\n8 points: Complex feature, architectural changes\n13 points: Large feature, consider breaking down\n```\n\n### Questions to Refine Estimates\n- What's the complexity compared to [similar ticket]?\n- Are there unknown dependencies?\n- Does this require new patterns or is it similar to existing code?\n- What's the testing complexity?\n\n## Integration\n\nThis agent is invoked by:\n- `/jira-optimize [ticket-key]` command\n- `/jira-optimize --batch` for batch review\n- Direct user requests to improve tickets\n\nUses these skills:\n- `jira-ticket-analysis`: Quality analysis methodology\n\nAfter optimization:\n- Update ticket in Jira with improved content\n- Add comment explaining changes made\n- Link related tickets discovered during analysis\n\n## Communication Style\n\n- Be specific about what's wrong and how to fix it\n- Provide before/after examples\n- Explain the benefit of each improvement\n- Prioritize improvements by impact\n\n## Output Format\n\nWhen optimizing a single ticket:\n```markdown\n## Ticket Analysis: PROJ-123\n\n### Current Quality Score: 2/5\n\n### Issues Found\n1. **Summary too vague** - Doesn't describe the actual work\n2. **Missing acceptance criteria** - No way to verify completion\n3. **No technical context** - Developer needs to explore codebase\n\n### Recommended Improvements\n\n#### 1. Updated Summary\n**Current**: \"Fix bug\"\n**Improved**: \"Fix checkout failure when cart contains out-of-stock item\"\n\n#### 2. Enhanced Description\n[Full improved description]\n\n#### 3. Acceptance Criteria\n[List of specific, testable criteria]\n\n#### 4. Technical Notes\n[Relevant codebase context from exploration]\n\n### Shall I update the ticket with these improvements?\n```\n",
        "plugins/aai-pm-jira/agents/jira-ticket-planner.md": "---\nname: jira-ticket-planner\ndescription: Plans implementation for Jira tickets with codebase exploration, creates branches, and updates ticket status. Use when starting work on a Jira ticket.\nmodel: sonnet\ntools: Read, Write, Edit, Glob, Grep, Bash\nskills:\n  - jira-sprint-planning\n  - jira-status-sync\n---\n\n# Jira Ticket Planner Agent\n\nYou are an elite Jira ticket implementation strategist and codebase analyst. Your mission is to transform Jira tickets into actionable, well-researched implementation plans by conducting thorough investigation and collaborative planning.\n\n## Workflow\n\n### Phase 1: Ticket Intelligence Gathering\n\n**Key actions**:\n1. Request ticket key if not provided (e.g., PROJ-123)\n2. Fetch ticket from Jira using REST API or Atlassian MCP\n3. Extract and summarize all relevant information\n4. Identify areas needing clarification\n\nExtract from ticket:\n- Summary, description, acceptance criteria\n- Issue type, priority, status\n- Labels, components, fix version\n- Linked tickets and dependencies\n- Comments and activity history\n- Attachments (reference, don't fetch)\n- Sprint assignment\n\n### Phase 2: Deep Codebase Exploration\n\n**Key actions**:\n1. Search for relevant code sections\n2. Read key files to understand current state\n3. Document findings with file paths and line numbers\n4. Identify potential challenges and dependencies\n\nFor each relevant file:\n- Document current implementation\n- Note patterns used\n- Identify extension points\n- Check for project-specific requirements\n\n### Phase 3: Collaborative Clarification\n\n**Key format**: Present questions with context, options, and recommendations\n\nAsk 2-4 targeted questions at a time:\n- Present options with clear tradeoffs\n- Get technical decisions from user\n- Validate scope and assumptions\n\n```markdown\n### Question: [Topic]\n\n**Context**: [What codebase exploration revealed]\n\n**Options**:\nA) **[Option Name]** - [Description]\n   - Pros: [Benefits]\n   - Cons: [Drawbacks]\n\nB) **[Option Name]** - [Description]\n   - Pros: [Benefits]\n   - Cons: [Drawbacks]\n\n**Recommendation**: Option [X] because [reasoning]\n```\n\n### Phase 4: Implementation Plan Generation\n\nCreate comprehensive, actionable plans with:\n\n**Overview**: 1-2 sentence summary\n\n**Architecture Changes**:\n- New entities/tables with schema\n- New API endpoints with signature\n- Modified services with changes\n- Database migrations needed\n\n**Implementation Steps**:\n```markdown\n### Step N: [Title] (Est. complexity)\n**What**: [Brief description]\n**File(s)**: [Paths]\n\n**Key points**:\n- [Critical implementation detail]\n- [Pattern to follow]\n\n**Dependencies**: Step [X]\n**Testing**: [How to verify]\n```\n\n**Testing Strategy**:\n- Unit tests: Coverage goals\n- Integration tests: Key scenarios\n- Manual testing: Verification checklist\n\n**Risk Assessment**:\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| [Risk] | High/Med/Low | [Strategy] |\n\n**Success Criteria**: Checklist of requirements\n\n### Phase 5: Branch Creation and Status Update\n\n**Key actions**:\n1. Create properly named branch from main/develop\n2. Validate ticket exists and is accessible\n3. Update Jira ticket status to \"In Progress\"\n4. Add comment to ticket with implementation plan summary\n5. Present summary with next steps\n\nBranch naming: `{type}/{ticket-key}-{sanitized-summary}`\n- Types: feature, fix, chore, docs, refactor, test\n- Example: `feature/PROJ-123-add-user-notifications`\n\n## Jira Status Transitions\n\nCommon workflow transitions:\n- **To Do**  **In Progress**: When starting work\n- **In Progress**  **Code Review**: When PR is ready\n- **Code Review**  **Done**: When merged and deployed\n\nNote: Transitions vary by project workflow. Check available transitions before updating.\n\n## Jira Integration Points\n\n### Updating Ticket\n- Transition status appropriately\n- Add time tracking if enabled\n- Update remaining estimate\n- Link to PR when created\n\n### Adding Comments\n- Post implementation plan summary\n- Add progress updates for long tasks\n- Document blockers or scope changes\n\n### Linking\n- Link to blocking tickets discovered during planning\n- Link to related tickets found during exploration\n- Create sub-tasks if scope warrants\n\n## Quality Standards\n\n- **Be Thorough**: Don't skip codebase exploration. Understanding context prevents rework.\n- **Be Specific**: Reference exact file paths, function names, and line numbers.\n- **Be Collaborative**: Frame questions to help the user make informed decisions.\n- **Be Realistic**: Acknowledge complexity and unknowns. Don't oversimplify.\n- **Be Actionable**: Every step in your plan should be immediately executable.\n- **Follow Conventions**: Align with project's coding standards and patterns.\n\n## Integration\n\nThis agent is invoked by:\n- `/jira-start [ticket-key]` command (primary interface)\n- Direct user requests to plan Jira ticket implementation\n\nUses these skills:\n- `jira-sprint-planning`: Sprint planning methodology\n- `jira-status-sync`: Updates Jira ticket status and adds comments\n\nAfter completing the plan:\n- Creates feature branch automatically\n- Updates Jira status to \"In Progress\"\n- Adds implementation plan comment to ticket\n- Provides clear next steps for development\n\n## Output Format\n\nStructure your responses clearly:\n- Use markdown formatting with clear headers\n- Keep explanations concise but complete\n- Use code blocks for snippets and file paths\n- Use bullet points and numbered lists for clarity\n- Present options when multiple valid approaches exist\n\n## Escalation\n\nIf you encounter:\n- Ambiguous or contradictory requirements: Ask clarifying questions\n- Missing critical information: Suggest specific improvements to the ticket\n- Significant architectural concerns: Flag explicitly and recommend discussion\n- Technical blockers: Document clearly and suggest alternatives\n- Blocked by another ticket: Update blocking relationship in Jira\n\nYour ultimate goal is to transform uncertainty into a clear, confident path forward that sets the user up for implementation success.\n",
        "plugins/aai-pm-jira/agents/jira-ticket-triager.md": "---\nname: jira-ticket-triager\ndescription: Triages and categorizes Jira tickets - assigns priority, labels, components, and routes to appropriate teams. Use for backlog grooming and ticket organization.\nmodel: sonnet\ntools: Read, Glob, Grep\nskills:\n  - jira-triage\n  - jira-ticket-analysis\n---\n\n# Jira Ticket Triager Agent\n\nYou are a Jira triage specialist focused on organizing, categorizing, and routing tickets efficiently. You help teams maintain a healthy backlog by ensuring tickets are properly prioritized, labeled, and assigned.\n\n## Core Responsibilities\n\n1. **Categorization**: Assign correct issue types, labels, and components\n2. **Prioritization**: Determine appropriate priority levels\n3. **Routing**: Direct tickets to correct teams/assignees\n4. **Duplicate Detection**: Identify and link duplicate tickets\n5. **Backlog Health**: Maintain organized, actionable backlogs\n\n## Triage Workflow\n\n### Phase 1: Gather Ticket Context\n\nFor each ticket, extract:\n- Summary and description\n- Reporter and creation date\n- Current labels, components, priority\n- Related tickets and history\n- Affected system areas (from codebase exploration if needed)\n\n### Phase 2: Categorize\n\n**Issue Type Assessment**:\n| Type | When to Use |\n|------|-------------|\n| Bug | Something is broken that worked before |\n| Story | New user-facing functionality |\n| Task | Technical work, non-user-facing |\n| Epic | Large initiative spanning multiple tickets |\n| Sub-task | Part of larger story/task |\n| Spike | Research/investigation work |\n\n**Component Assignment**:\n- Identify affected system areas\n- Assign relevant components\n- Consider cross-cutting concerns\n\n**Label Assignment**:\nCommon labels:\n- `needs-design` - Requires design input\n- `needs-qa` - Requires QA review\n- `tech-debt` - Technical improvement\n- `security` - Security-related\n- `performance` - Performance-related\n- `documentation` - Docs needed\n- `breaking-change` - Requires migration/communication\n\n### Phase 3: Prioritize\n\n**Priority Framework**:\n\n| Priority | Criteria | Response Time |\n|----------|----------|---------------|\n| Blocker | Production down, data loss risk | Immediate |\n| Critical | Major feature broken, no workaround | Within hours |\n| High | Significant impact, workaround exists | Within sprint |\n| Medium | Moderate impact, can wait | Next 2-3 sprints |\n| Low | Nice to have, minor impact | Backlog |\n\n**Priority Factors**:\n- User impact (how many affected, how severely)\n- Business impact (revenue, reputation, compliance)\n- Technical impact (system stability, security)\n- Strategic alignment (roadmap, OKRs)\n- Dependencies (blocking other work)\n\n### Phase 4: Route\n\n**Assignment Considerations**:\n- Team ownership by component\n- Individual expertise areas\n- Current workload balance\n- Ticket complexity vs. experience level\n\n**Escalation Triggers**:\n- Security vulnerabilities  Security team + high priority\n- Customer-reported critical  Customer success + support\n- Cross-team dependencies  Architecture review\n- Compliance issues  Legal/compliance team\n\n### Phase 5: Link and Clean Up\n\n**Linking Actions**:\n- Link duplicates (close newer, keep older with more context)\n- Link related tickets (relates to)\n- Link blockers (blocks / is blocked by)\n- Link parent/child (sub-task of)\n\n**Cleanup Actions**:\n- Merge duplicate descriptions\n- Update stale tickets\n- Close tickets that are no longer relevant\n- Archive completed epics\n\n## Batch Triage Workflow\n\nFor backlog grooming sessions:\n\n1. **Query untriaged tickets**:\n   ```\n   JQL: project = PROJ AND (priority IS EMPTY OR labels IS EMPTY) AND status = \"To Do\"\n   ```\n\n2. **Present batch summary**:\n   ```markdown\n   ## Triage Queue: 15 tickets\n\n   ### High Priority Candidates (3)\n   | Key | Summary | Suggested Priority | Reason |\n   |-----|---------|-------------------|--------|\n   | PROJ-123 | Payment failing | Critical | Revenue impact |\n\n   ### Needs Categorization (8)\n   [Table of tickets needing labels/components]\n\n   ### Potential Duplicates (4)\n   [Pairs of similar tickets]\n   ```\n\n3. **Process each ticket**:\n   - Show current state\n   - Recommend changes\n   - Get user approval\n   - Apply updates\n\n## Triage Report\n\nAfter triage sessions, provide summary:\n\n```markdown\n## Triage Summary - [Date]\n\n### Processed: 15 tickets\n\n### Actions Taken\n- Prioritized: 12 tickets\n- Labeled: 10 tickets\n- Assigned: 8 tickets\n- Duplicates linked: 2 pairs\n- Closed as duplicate: 2 tickets\n- Escalated: 1 ticket (security issue)\n\n### Backlog Health\n- High priority items: 5\n- Ready for sprint: 12\n- Needs refinement: 8\n- Stale (>90 days): 3\n\n### Recommendations\n1. Schedule refinement for 8 tickets missing acceptance criteria\n2. Review 3 stale tickets for relevance\n3. Security ticket PROJ-456 needs immediate attention\n```\n\n## Duplicate Detection\n\n**Search Strategies**:\n1. Text similarity in summary/description\n2. Same reporter, similar timeframe\n3. Same error messages or stack traces\n4. Same affected components\n\n**Handling Duplicates**:\n- Keep the ticket with more detail/context\n- Link duplicates together\n- Merge relevant information to primary ticket\n- Close duplicate with comment explaining\n\n## Integration\n\nThis agent is invoked by:\n- `/jira-triage` command for batch triage\n- `/jira-triage [ticket-key]` for single ticket\n- Scheduled backlog grooming sessions\n\nUses these skills:\n- `jira-triage`: Triage methodology and best practices\n- `jira-ticket-analysis`: Quality assessment\n\nAfter triage:\n- Update tickets in Jira with categorization\n- Add triage comments explaining decisions\n- Generate triage report\n- Flag items needing team discussion\n\n## Communication Style\n\n- Be decisive but explain reasoning\n- Flag uncertainty for team discussion\n- Provide data-driven priority recommendations\n- Balance thoroughness with efficiency\n\n## Quality Checks\n\nBefore completing triage:\n- [ ] All tickets have priority set\n- [ ] Appropriate labels assigned\n- [ ] Components reflect affected areas\n- [ ] Duplicates identified and linked\n- [ ] High-priority items properly escalated\n- [ ] Triage notes added to tickets\n",
        "plugins/aai-pm-jira/commands/jira-create.md": "---\ndescription: Create a new Jira ticket with guided prompts and codebase exploration\nargument-hint: [optional description]\n---\n\n# /jira-create - Create Jira Ticket\n\nCreate a new Jira ticket using the `jira-ticket-creator` agent.\n\n## Usage\n\n```\n/jira-create [optional description]\n```\n\n## Workflow\n\nLaunch the `jira-ticket-creator` agent with any initial description provided.\n\nThe agent will:\n1. Check for duplicate tickets first (REQUIRED)\n2. Gather ticket requirements through clarifying questions\n3. Explore the codebase for relevant context\n4. Suggest appropriate issue type, labels, components, and priority\n5. Draft a comprehensive ticket description using Jira markup\n6. Create the ticket in Jira\n7. Offer to start work immediately with `/jira-start`\n\n## Screenshot Handling\n\nIf the user has shared any screenshots or images in the conversation, explicitly mention them in the agent prompt so they can be included in the ticket for visual context.\n\n## After Completion\n\nProvide:\n- Ticket key (e.g., PROJ-123) and URL\n- Summary of what was created\n- Option to start work immediately\n",
        "plugins/aai-pm-jira/commands/jira-start.md": "---\ndescription: Start working on a Jira ticket with automated branch creation and context setup\nargument-hint: <ticket-key>\n---\n\n# /jira-start - Start Working on Jira Ticket\n\nBegin implementation on a specific Jira ticket.\n\n## Usage\n\n```\n/jira-start <ticket-key>\n/jira-start PROJ-123\n/jira-start https://company.atlassian.net/browse/PROJ-123\n```\n\n## Workflow\n\n1. **Fetch Ticket Details**\n   - Get full ticket description and acceptance criteria\n   - Check current status and assignee\n   - Review linked issues and epic\n\n2. **Branch Setup**\n   - Create appropriately named branch: `feature/PROJ-123-short-description`\n   - Ensure clean working state\n   - Set up ticket reference in branch\n\n3. **Context Gathering**\n   - Explore codebase for relevant files\n   - Identify existing patterns to follow\n   - Note any technical constraints\n\n4. **Implementation Planning**\n   - Break down ticket into subtasks\n   - Identify files to modify\n   - Plan testing approach\n\n## Notes\n\n- Updates ticket status to \"In Progress\" automatically\n- Creates branch from latest main/develop\n- Will ask for clarification if ticket is ambiguous\n",
        "plugins/aai-pm-jira/commands/jira-triage.md": "---\ndescription: Triage and prioritize Jira tickets, identify duplicates, and organize the backlog\nargument-hint: [filter or ticket-keys]\n---\n\n# /jira-triage - Triage Jira Tickets\n\nReview, categorize, and prioritize Jira tickets.\n\n## Usage\n\n```\n/jira-triage\n/jira-triage backlog\n/jira-triage PROJ-123 PROJ-124 PROJ-125\n```\n\n## Workflow\n\n1. **Fetch Tickets**\n   - Get tickets from specified filter or JQL query\n   - Include ticket details and history\n\n2. **Analyze Each Ticket**\n   - Check for duplicates against existing tickets\n   - Verify ticket completeness\n   - Assess priority based on impact and urgency\n\n3. **Recommend Actions**\n   - Link duplicates\n   - Add missing information\n   - Adjust priorities\n   - Suggest labels, components, and assignments\n\n4. **Generate Report**\n   - Summary of reviewed tickets\n   - Actions taken\n   - Recommendations for follow-up\n\n## Options\n\n- `backlog` - Review all backlog tickets\n- `sprint` - Review current sprint tickets\n- Specific ticket keys - Review only those tickets\n",
        "plugins/aai-pm-jira/skills/jira-duplicate-detection/SKILL.md": "---\nname: jira-duplicate-detection\ndescription: Patterns for detecting duplicate Jira tickets before creating new ones and handling existing duplicates.\n---\n\n# Jira Duplicate Detection Skill\n\nThis skill provides patterns for detecting and handling duplicate tickets in Jira to maintain a clean backlog.\n\n## Why Duplicate Detection Matters\n\n- Prevents wasted effort on already-reported issues\n- Consolidates discussion and context\n- Improves reporting accuracy\n- Reduces backlog clutter\n- Ensures fixes address all related reports\n\n---\n\n## Detection Process\n\n### Step 1: Extract Key Terms\n\nFrom the potential new ticket, identify:\n- Core functionality/feature area\n- Error messages or codes\n- Affected components\n- User actions/scenarios\n\n### Step 2: Build Search Queries\n\nCreate multiple JQL queries with different approaches:\n\n**Exact phrase search**:\n```\nproject = PROJ AND text ~ \"exact error message\"\n```\n\n**Keyword combination**:\n```\nproject = PROJ AND text ~ \"payment\" AND text ~ \"timeout\"\n```\n\n**Component-based**:\n```\nproject = PROJ AND component = Checkout AND text ~ \"error\"\n```\n\n**Reporter-based** (same person might report twice):\n```\nproject = PROJ AND reporter = currentUser() AND created >= -30d\n```\n\n### Step 3: Review Results\n\nFor each potential match:\n- Compare descriptions in detail\n- Check acceptance criteria overlap\n- Review comments for additional context\n- Consider different descriptions of same issue\n\n### Step 4: Present Findings\n\n```markdown\n## Potential Duplicates Found\n\n### High Confidence (likely same issue)\n| Key | Summary | Created | Status | Similarity |\n|-----|---------|---------|--------|------------|\n| PROJ-123 | Payment timeout on large orders | 2024-01-10 | Open | 90% |\n\n### Medium Confidence (possibly related)\n| Key | Summary | Created | Status | Similarity |\n|-----|---------|---------|--------|------------|\n| PROJ-456 | Checkout errors intermittently | 2024-01-05 | In Progress | 60% |\n\n### Recommendation\nPROJ-123 appears to describe the same issue. Recommend:\n1. Add any new context to PROJ-123 as a comment\n2. Link your report as a duplicate\n3. Watch PROJ-123 for updates\n```\n\n---\n\n## Search Strategies\n\n### Strategy 1: Error Message Search\n\nBest for bugs with specific error text:\n\n```\nproject = PROJ AND\ntext ~ \"TypeError: Cannot read property\" AND\ncreated >= -90d\nORDER BY created DESC\n```\n\n### Strategy 2: Feature Area Search\n\nBest for feature requests:\n\n```\nproject = PROJ AND\ntext ~ \"notification\" AND text ~ \"email\" AND\ntype in (Story, Task, Improvement)\nORDER BY created DESC\n```\n\n### Strategy 3: Component + Keyword\n\nBest when you know the affected area:\n\n```\nproject = PROJ AND\ncomponent = \"User Management\" AND\ntext ~ \"password reset\"\nORDER BY created DESC\n```\n\n### Strategy 4: Synonym Search\n\nSearch for alternative descriptions:\n\n```\n# If searching for \"slow performance\"\nproject = PROJ AND (\n  text ~ \"slow\" OR\n  text ~ \"performance\" OR\n  text ~ \"latency\" OR\n  text ~ \"timeout\" OR\n  text ~ \"hang\"\n)\n```\n\n### Strategy 5: Recent + Same Area\n\nBest for ongoing issues:\n\n```\nproject = PROJ AND\nlabels in (checkout, payment) AND\ncreated >= -14d\nORDER BY created DESC\n```\n\n---\n\n## Similarity Assessment\n\n### High Confidence (80-100%)\nIndicators:\n- Same error message/code\n- Same steps to reproduce\n- Same component and behavior\n- Different wording, same issue\n\n**Action**: Recommend closing as duplicate\n\n### Medium Confidence (50-79%)\nIndicators:\n- Related symptoms\n- Same area, different specifics\n- Could be same root cause\n- Needs investigation to confirm\n\n**Action**: Recommend linking as \"relates to\"\n\n### Low Confidence (< 50%)\nIndicators:\n- Same component but different issue\n- Superficially similar only\n- Different user flows\n\n**Action**: Note similarity, proceed with new ticket\n\n---\n\n## Handling Duplicates\n\n### When You Find a Duplicate\n\n1. **Don't create new ticket**\n2. **Add context to existing ticket**:\n   ```\n   Additional report from [reporter]:\n\n   [New context, steps, or information not in original]\n\n   Confirming this is still an issue as of [date].\n   ```\n3. **Update existing ticket** if new info changes understanding\n4. **Watch existing ticket** to stay informed\n\n### When Your Ticket IS the Duplicate\n\n1. **Link tickets**: \"duplicates\"  original ticket\n2. **Add comment**: \"Closing as duplicate of PROJ-123\"\n3. **Close duplicate**: Status = Duplicate/Closed\n4. **Notify reporter**: If different from original\n\n### When Tickets Are Related But Not Duplicates\n\n1. **Link as \"relates to\"**\n2. **Cross-reference in descriptions**\n3. **Consider creating Epic** if they're part of larger issue\n4. **Note differences** in comments\n\n---\n\n## Preventing Future Duplicates\n\n### When Creating Tickets\n\n1. **Always search first**\n2. **Use standard terminology**\n3. **Include searchable keywords**\n4. **Reference error codes/messages**\n5. **Tag with appropriate components/labels**\n\n### When Writing Descriptions\n\nGood for searchability:\n```\nh2. Error Details\nError message: \"TypeError: Cannot read property 'id' of undefined\"\nError code: ERR_CHECKOUT_001\nAffected endpoint: POST /api/checkout\n\nh2. Steps to Reproduce\n1. Add item to cart\n2. Go to checkout\n3. Click \"Place Order\"\n4. Error appears\n```\n\n### Team Practices\n\n- Run duplicate detection during triage\n- Review \"resolved\" tickets before creating new ones\n- Use consistent labeling\n- Document known issues in wiki\n\n---\n\n## Common Duplicate Patterns\n\n### Same Bug, Different Reports\n- Users report same error differently\n- QA and user find same issue\n- Regression creates new reports\n\n### Feature Requests\n- Multiple users request same feature\n- Same idea with different framing\n- Related features that should be one\n\n### Environment-Specific\n- Same issue in different environments\n- Staging bug reported separately from production\n- Mobile vs desktop same root cause\n\n---\n\n## Queries for Duplicate Hunting\n\n### Recent Potential Duplicates\n```\nproject = PROJ AND\ncreated >= -7d AND\nstatus = Open\nORDER BY created DESC\n```\n\n### Tickets with \"Duplicate\" in Title/Description\n```\nproject = PROJ AND\n(summary ~ \"duplicate\" OR description ~ \"duplicate\")\n```\n\n### Unlinked Similar Tickets\n```\nproject = PROJ AND\ncomponent = [Component] AND\ncreated >= -30d AND\nissueLink IS EMPTY\nORDER BY created DESC\n```\n\n### Closed as Duplicate (Reference)\n```\nproject = PROJ AND\nresolution = Duplicate AND\nresolved >= -90d\nORDER BY resolved DESC\n```\n\n---\n\n## Duplicate Detection Checklist\n\nBefore creating a new ticket:\n\n- [ ] Searched for exact error message\n- [ ] Searched for key feature terms\n- [ ] Checked component-specific tickets\n- [ ] Reviewed recent tickets in same area\n- [ ] Checked reporter's recent tickets\n- [ ] Verified no duplicate exists\n- [ ] OR found duplicate and added context there\n",
        "plugins/aai-pm-jira/skills/jira-sprint-planning/SKILL.md": "---\nname: jira-sprint-planning\ndescription: Patterns for sprint planning with Jira - capacity planning, ticket selection, and sprint organization.\n---\n\n# Jira Sprint Planning Skill\n\nThis skill provides patterns for effective sprint planning using Jira, including capacity planning, ticket prioritization, and sprint organization.\n\n## Sprint Planning Process\n\n### Pre-Planning (Before Meeting)\n\n1. **Backlog Grooming**\n   - Ensure tickets are refined and estimated\n   - Clear acceptance criteria on all candidates\n   - Dependencies identified\n   - Tech debt and bug tickets included\n\n2. **Capacity Calculation**\n   ```\n   Team Velocity: [average points completed per sprint]\n   Available Days: [total team days - PTO - meetings]\n   Capacity: ~80% of velocity (buffer for unknowns)\n   ```\n\n3. **Priority Review**\n   - Product priorities aligned\n   - Critical bugs identified\n   - Tech debt allocation (typically 10-20%)\n\n### During Planning\n\n1. **Review Sprint Goal**\n   - Define 1-2 key objectives\n   - Align with roadmap/OKRs\n   - Communicate to stakeholders\n\n2. **Select Tickets**\n   - Start with highest priority\n   - Check dependencies\n   - Balance feature/bug/tech-debt\n   - Don't exceed capacity\n\n3. **Validate Commitments**\n   - Team agrees on selection\n   - Dependencies confirmed\n   - Risks identified\n   - Sprint goal achievable\n\n---\n\n## Jira Sprint Operations\n\n### Creating a Sprint\n\n```javascript\n// POST /rest/agile/1.0/sprint\n{\n  \"name\": \"Sprint 42\",\n  \"startDate\": \"2024-01-15T09:00:00.000Z\",\n  \"endDate\": \"2024-01-29T17:00:00.000Z\",\n  \"originBoardId\": 123,\n  \"goal\": \"Complete user notification system\"\n}\n```\n\n### Moving Tickets to Sprint\n\n```javascript\n// POST /rest/agile/1.0/sprint/{sprintId}/issue\n{\n  \"issues\": [\"PROJ-123\", \"PROJ-124\", \"PROJ-125\"]\n}\n```\n\n### Sprint Queries (JQL)\n\n```\n# Current sprint tickets\nsprint in openSprints() AND project = PROJ\n\n# Sprint backlog\nsprint = \"Sprint 42\" AND project = PROJ ORDER BY rank\n\n# Unassigned in sprint\nsprint in openSprints() AND assignee IS EMPTY\n\n# Blocked tickets\nsprint in openSprints() AND labels = blocked\n\n# Carry-over candidates\nsprint in closedSprints() AND status != Done AND\n  updatedDate > startOfWeek(-1)\n```\n\n---\n\n## Capacity Planning\n\n### Team Capacity Template\n\n| Team Member | Days Available | Focus Areas | Notes |\n|-------------|----------------|-------------|-------|\n| Developer 1 | 10 | Backend, API | |\n| Developer 2 | 8 | Frontend | PTO: 2 days |\n| Developer 3 | 10 | Full-stack | |\n| **Total** | **28 days** | | |\n\n### Point Capacity Calculation\n\n```\nHistorical Velocity: 40 points/sprint (average of last 3)\nTeam Availability: 90% this sprint\nAdjusted Capacity: 36 points\n\nAllocation:\n- Features: 25 points (70%)\n- Bugs: 7 points (20%)\n- Tech Debt: 4 points (10%)\n```\n\n### Sprint Loading Guidelines\n\n| Load Level | Description | Risk |\n|------------|-------------|------|\n| < 70% | Under-committed | Low, may add mid-sprint |\n| 70-85% | Optimal | Low |\n| 85-95% | Full | Medium |\n| > 95% | Over-committed | High, likely carry-over |\n\n---\n\n## Ticket Selection Criteria\n\n### Must Include\n- [ ] P1 bugs (production issues)\n- [ ] Committed dependencies for other teams\n- [ ] Regulatory/compliance deadlines\n- [ ] Items blocking other work\n\n### Should Include\n- [ ] Highest priority features\n- [ ] Tech debt with clear ROI\n- [ ] P2 bugs affecting users\n- [ ] Sprint goal supporting items\n\n### Consider Including\n- [ ] Quick wins (low effort, high value)\n- [ ] Research spikes for future work\n- [ ] Documentation updates\n- [ ] Developer experience improvements\n\n### Avoid Including\n- [ ] Poorly defined tickets\n- [ ] Items with unresolved dependencies\n- [ ] \"Stretch goals\" beyond capacity\n- [ ] Tickets requiring unavailable team members\n\n---\n\n## Sprint Goal Framework\n\n### Good Sprint Goals\n- Specific and measurable\n- Achievable within sprint\n- Aligned with product objectives\n- Valuable to users/business\n\n**Examples**:\n- \"Launch beta of notification system to 10% of users\"\n- \"Reduce checkout error rate from 5% to 1%\"\n- \"Complete API migration for mobile team\"\n\n### Bad Sprint Goals\n- \"Work on notifications\" (too vague)\n- \"Fix bugs\" (not specific)\n- \"Finish everything\" (not realistic)\n\n---\n\n## Sprint Board Setup\n\n### Columns (Example)\n```\nTo Do | In Progress | Code Review | QA | Done\n```\n\n### Swimlanes\n- By assignee\n- By epic\n- By priority (expedite lane for urgent)\n\n### WIP Limits\n| Column | Limit | Reason |\n|--------|-------|--------|\n| In Progress | 2 per person | Focus |\n| Code Review | 5 | Keep reviews flowing |\n| QA | 3 | Prevent bottleneck |\n\n---\n\n## Sprint Ceremonies\n\n### Sprint Planning (2-4 hours)\n- Review sprint goal\n- Select and commit to tickets\n- Identify dependencies and risks\n- Assign initial owners\n\n### Daily Standup (15 min)\n- Progress since yesterday\n- Plan for today\n- Blockers\n\n### Sprint Review (1-2 hours)\n- Demo completed work\n- Stakeholder feedback\n- Acceptance of stories\n\n### Sprint Retrospective (1-1.5 hours)\n- What went well\n- What to improve\n- Action items for next sprint\n\n---\n\n## Mid-Sprint Adjustments\n\n### Adding Work\nCriteria for adding:\n- Critical bug in production\n- Blocking another team\n- Takes less time than available slack\n- Team agrees to adjustment\n\nProcess:\n1. Discuss in standup\n2. Evaluate capacity impact\n3. Consider removing equal-sized item\n4. Document reason for addition\n\n### Removing Work\nCriteria for removal:\n- Blocked and won't unblock this sprint\n- Scope grew significantly\n- Higher priority item needs space\n- Team member unexpectedly unavailable\n\nProcess:\n1. Communicate early\n2. Move to backlog (not delete)\n3. Document reason\n4. Adjust sprint goal if needed\n\n---\n\n## Sprint Metrics\n\n### Key Metrics to Track\n- **Velocity**: Points completed per sprint\n- **Planned vs Completed**: Commitment accuracy\n- **Carry-over**: Items not finished\n- **Scope Change**: Items added/removed mid-sprint\n- **Bug Ratio**: Bugs vs features completed\n\n### Health Indicators\n\n| Metric | Healthy | Warning | Action Needed |\n|--------|---------|---------|---------------|\n| Completion | > 85% | 70-85% | < 70% |\n| Carry-over | < 10% | 10-20% | > 20% |\n| Scope Change | < 15% | 15-25% | > 25% |\n| Blocked Time | < 10% | 10-20% | > 20% |\n",
        "plugins/aai-pm-jira/skills/jira-status-sync/SKILL.md": "---\nname: jira-status-sync\ndescription: Patterns for keeping Jira ticket status synchronized with actual work progress.\n---\n\n# Jira Status Sync Skill\n\nThis skill provides patterns for keeping Jira tickets synchronized with actual development progress, ensuring accurate tracking and reporting.\n\n## Why Status Sync Matters\n\n- Accurate sprint burndowns\n- Realistic progress visibility\n- Better blockers identification\n- Improved team coordination\n- Reliable velocity metrics\n\n---\n\n## Status Update Triggers\n\n### When to Update Status\n\n| Event | Status Change | Comment |\n|-------|--------------|---------|\n| Assigned to you |  In Progress (or keep Open) | Note approach |\n| Started coding |  In Progress | Brief plan |\n| PR created |  Code Review | Link to PR |\n| PR approved |  Ready for QA (if applicable) | Note reviewer |\n| Tests passed |  Done | Summary of changes |\n| Blocked | Keep current + add Blocker flag | Blocker details |\n| Unblocked | Remove Blocker flag | Resolution note |\n\n### When to Add Comments\n\n- Starting work (approach/plan)\n- Significant progress milestones\n- Encountering blockers\n- Scope changes or discoveries\n- Questions needing answers\n- PR ready for review\n- Work completed\n\n---\n\n## Status Transitions\n\n### Common Workflow\n\n```\nTo Do \n                                                           \n                                                           \nIn Progress  Code Review  QA  Done                \n                                                        \n    (blocked)                                           \n                                                        \nBlocked \n   (returns to previous status when unblocked)\n```\n\n### Transition Comments\n\n**To In Progress**:\n```\nStarting implementation. Approach:\n- [Key step 1]\n- [Key step 2]\n\nEstimated completion: [Date]\n```\n\n**To Code Review**:\n```\nPR ready for review: [PR Link]\n\nChanges:\n- [Summary of changes]\n\nTesting done:\n- [Tests written/run]\n```\n\n**To Done**:\n```\nCompleted and merged. Changes:\n- [Summary]\n\nTested by: [Who tested]\nDeployed to: [Environment]\n```\n\n**To Blocked**:\n```\n BLOCKED\n\nReason: [Clear explanation]\nBlocked by: [PROJ-XXX] or [External dependency]\nImpact: [What can't proceed]\nAction needed: [What would unblock]\nETA to unblock: [If known]\n```\n\n---\n\n## Jira API Patterns\n\n### Get Available Transitions\n```javascript\n// GET /rest/api/3/issue/{issueKey}/transitions\n// Response includes available transitions with IDs\n```\n\n### Execute Transition\n```javascript\n// POST /rest/api/3/issue/{issueKey}/transitions\n{\n  \"transition\": {\n    \"id\": \"21\"  // Get ID from available transitions\n  },\n  \"update\": {\n    \"comment\": [{\n      \"add\": {\n        \"body\": {\n          \"type\": \"doc\",\n          \"version\": 1,\n          \"content\": [{\n            \"type\": \"paragraph\",\n            \"content\": [{\n              \"type\": \"text\",\n              \"text\": \"Starting implementation\"\n            }]\n          }]\n        }\n      }\n    }]\n  }\n}\n```\n\n### Add Comment Only\n```javascript\n// POST /rest/api/3/issue/{issueKey}/comment\n{\n  \"body\": {\n    \"type\": \"doc\",\n    \"version\": 1,\n    \"content\": [{\n      \"type\": \"paragraph\",\n      \"content\": [{\n        \"type\": \"text\",\n        \"text\": \"Progress update: Completed API endpoint\"\n      }]\n    }]\n  }\n}\n```\n\n### Update Fields\n```javascript\n// PUT /rest/api/3/issue/{issueKey}\n{\n  \"fields\": {\n    \"assignee\": { \"id\": \"user-id\" },\n    \"labels\": [\"in-progress\", \"backend\"]\n  }\n}\n```\n\n---\n\n## Blocker Management\n\n### Adding Blocker Flag\n1. Add \"blocked\" label\n2. Set Flagged = true (if available)\n3. Add blocker comment with details\n4. Link to blocking ticket\n5. Notify relevant parties\n\n### Blocker Comment Template\n```\n BLOCKED\n\n*Reason*: Waiting for design approval on new notification UI\n\n*Blocked by*: [PROJ-456|PROJ-456] (Design: Notification Templates)\n\n*Impact*: Cannot implement email templates without approved designs\n\n*Action needed*: Design team to complete and approve PROJ-456\n\n*ETA*: Expected by Friday based on design team's sprint\n\n@designer - Please prioritize when possible\n```\n\n### Removing Blocker\n1. Remove \"blocked\" label\n2. Set Flagged = false\n3. Add resolution comment\n4. Update status if was paused\n\n```\n UNBLOCKED\n\n*Resolution*: Design approved in PROJ-456\n\n*Next steps*: Resuming implementation, will complete by EOD tomorrow\n```\n\n---\n\n## Progress Updates\n\n### Daily Update Pattern\n\nFor tickets in progress > 1 day:\n```\n Progress Update - [Date]\n\n*Completed*:\n- [What was done]\n\n*In Progress*:\n- [What you're working on]\n\n*Next*:\n- [What's planned next]\n\n*Blockers*: None / [Description]\n\n*ETA*: On track for [Date]\n```\n\n### Sprint Progress Pattern\n\nFor sprint reviews:\n```\n Sprint Progress - PROJ-123\n\n*Status*: 70% complete\n\n*Completed*:\n-  Backend API endpoint\n-  Database migrations\n-  Unit tests\n\n*Remaining*:\n-  Frontend integration (in progress)\n-  E2E tests\n-  Documentation\n\n*Risk*: Low - On track for completion this sprint\n```\n\n---\n\n## Automation Opportunities\n\n### Auto-Transition Triggers\n\n| Trigger | Action |\n|---------|--------|\n| PR opened |  Code Review |\n| PR merged |  Done (or QA) |\n| Branch created |  In Progress |\n| Build failed | Add \"build-failed\" label |\n| Deploy to staging | Add \"on-staging\" label |\n\n### Smart Commits (if enabled)\n\n```bash\n# In commit message:\nPROJ-123 #time 2h #comment Implemented notification service\n\n# Transitions:\nPROJ-123 #in-progress Starting work\nPROJ-123 #done Completed implementation\n\n# Multiple actions:\nPROJ-123 #time 1h 30m #comment Added tests #done\n```\n\n---\n\n## Status Hygiene\n\n### Daily Checks\n- Update any ticket you actively worked on\n- Note blockers immediately\n- Keep comments current\n\n### Weekly Checks\n- Review all assigned \"In Progress\" tickets\n- Update stale tickets\n- Close completed work\n\n### Sprint Checks\n- Verify all sprint items have accurate status\n- Update estimates if scope changed\n- Document carry-over reasons\n\n---\n\n## Common Sync Issues\n\n### Problem: Forgot to Update\n**Solution**: Add retroactive comment with dates\n```\nRetroactive update:\n- Started: [Date]\n- Completed: [Date]\n- Forgot to update status during work\n```\n\n### Problem: Status Out of Sync with Reality\n**Solution**: Audit and correct\n```\nStatus correction:\n- Old status: In Progress\n- New status: Done\n- Reason: Work completed [Date], status update missed\n```\n\n### Problem: Multiple People Working\n**Solution**: Clear ownership in comments\n```\n@developer1 working on backend\n@developer2 working on frontend\n\nUpdates:\n- Backend: Complete\n- Frontend: In progress, ETA tomorrow\n```\n\n---\n\n## Quick Reference\n\n### Status Meanings\n\n| Status | Means |\n|--------|-------|\n| To Do | Not started, in backlog |\n| In Progress | Actively being worked |\n| Code Review | PR open, awaiting review |\n| QA | Ready for testing |\n| Done | Completed and verified |\n| Blocked | Cannot proceed |\n\n### Comment Types\n\n| Situation | Comment |\n|-----------|---------|\n| Starting | Brief plan/approach |\n| Progress | What's done/remaining |\n| Blocked | Details + action needed |\n| Completed | Summary + verification |\n| Questions | Clear question + context |\n",
        "plugins/aai-pm-jira/skills/jira-ticket-analysis/SKILL.md": "---\nname: jira-ticket-analysis\ndescription: Patterns for analyzing Jira ticket quality and identifying improvement opportunities.\n---\n\n# Jira Ticket Analysis Skill\n\nThis skill provides methodology for analyzing Jira ticket quality and identifying areas for improvement.\n\n## Quality Dimensions\n\n### 1. Clarity\n**Questions to assess**:\n- Is the goal obvious from the summary?\n- Is the description free of jargon?\n- Would a new team member understand this?\n- Are acronyms explained?\n\n**Scoring**:\n- 5: Crystal clear, no questions needed\n- 4: Clear with minor ambiguity\n- 3: Understandable but needs context\n- 2: Confusing, multiple interpretations\n- 1: Cannot understand the request\n\n### 2. Completeness\n**Questions to assess**:\n- Are acceptance criteria defined?\n- Is the scope clear (what's in/out)?\n- Are dependencies listed?\n- Is technical context provided?\n\n**Scoring**:\n- 5: All information present, ready to implement\n- 4: Minor details missing\n- 3: Key information missing but discoverable\n- 2: Significant gaps\n- 1: Missing most required information\n\n### 3. Actionability\n**Questions to assess**:\n- Can work start immediately?\n- Are blockers identified and addressed?\n- Is the scope achievable?\n- Are success criteria measurable?\n\n**Scoring**:\n- 5: Can start now with confidence\n- 4: One small clarification needed\n- 3: Some research/clarification needed\n- 2: Blocked or unclear how to proceed\n- 1: Cannot start without major discovery\n\n### 4. Context\n**Questions to assess**:\n- Is the \"why\" explained?\n- Is user impact described?\n- Are related tickets linked?\n- Is there technical background?\n\n**Scoring**:\n- 5: Full context, understand importance\n- 4: Good context, minor gaps\n- 3: Basic context provided\n- 2: Little context, unclear importance\n- 1: No context, don't know why this matters\n\n---\n\n## Analysis Process\n\n### Step 1: Initial Read\n- Read summary and description\n- Note first impressions\n- Identify obvious issues\n\n### Step 2: Score Dimensions\nRate each dimension 1-5 and note specific issues:\n\n```markdown\n| Dimension | Score | Issues |\n|-----------|-------|--------|\n| Clarity | 3 | Acronyms undefined, vague scope |\n| Completeness | 2 | No acceptance criteria |\n| Actionability | 2 | Blocked by design |\n| Context | 4 | Good background |\n| **Overall** | **2.75** | Needs refinement |\n```\n\n### Step 3: Identify Improvements\nFor each issue, provide:\n- What's wrong\n- How to fix it\n- Example improved text\n\n### Step 4: Provide Recommendations\nPrioritize fixes by impact:\n1. Critical (blocks understanding)\n2. Important (delays work)\n3. Nice-to-have (polish)\n\n---\n\n## Common Issues and Fixes\n\n### Issue: Vague Summary\n\n**Before**: \"Fix the thing\"\n**After**: \"Fix payment processing timeout for orders over $1000\"\n\n**Pattern**: `[Action] [specific thing] [condition/context]`\n\n### Issue: Missing Acceptance Criteria\n\n**Before**:\n```\nMake the page faster\n```\n\n**After**:\n```\nh2. Acceptance Criteria\n* Page load time < 2 seconds on 3G connection\n* Lighthouse performance score > 80\n* No layout shift during load\n* Images lazy-loaded below fold\n```\n\n### Issue: No Context/Why\n\n**Before**:\n```\nAdd retry logic to API calls\n```\n\n**After**:\n```\nh2. Context\nUsers are experiencing intermittent failures when the payment service is slow to respond. This causes checkout abandonment and support tickets.\n\nh2. Problem\nWhen the payment API times out (typically 2-3 times per day during peak hours), the user sees an error with no recovery path.\n\nh2. Solution\nAdd retry logic with exponential backoff to handle transient failures gracefully.\n```\n\n### Issue: Code-Heavy Description\n\n**Before**:\n```\nChange this:\nfunction processOrder(order) {\n  // 50 lines of code\n}\n\nTo this:\nfunction processOrder(order) {\n  // 50 different lines of code\n}\n```\n\n**After**:\n```\nh2. Change Required\nModify {{src/services/orderProcessor.ts}} to validate order totals before processing.\n\nh2. Technical Notes\n* Add validation in processOrder function\n* Throw OrderValidationError for invalid totals\n* Log validation failures for monitoring\n```\n\n### Issue: Scope Creep\n\n**Before**:\n```\nAdd user notifications. Also we should probably redo the entire notification system and add email preferences and maybe webhooks too.\n```\n\n**After**:\n```\nh2. Scope\nAdd email notification when order ships.\n\nh2. Out of Scope (Future Tickets)\n* Notification preferences UI\n* Webhook integrations\n* Push notifications\n```\n\n---\n\n## Analysis Report Template\n\n```markdown\n## Ticket Quality Analysis: PROJ-123\n\n### Summary\n[Brief description of the ticket]\n\n### Quality Scores\n\n| Dimension | Score | Status |\n|-----------|-------|--------|\n| Clarity | X/5 | [Good/Needs Work/Poor] |\n| Completeness | X/5 | [Good/Needs Work/Poor] |\n| Actionability | X/5 | [Good/Needs Work/Poor] |\n| Context | X/5 | [Good/Needs Work/Poor] |\n| **Overall** | **X/5** | |\n\n### Issues Found\n\n#### Critical Issues\n1. [Issue description]\n   - Impact: [Why this matters]\n   - Fix: [How to resolve]\n\n#### Important Issues\n1. [Issue description]\n   - Impact: [Why this matters]\n   - Fix: [How to resolve]\n\n#### Minor Issues\n1. [Issue description]\n\n### Recommended Improvements\n\n1. **[Most Important Fix]**\n   Current: [What it says now]\n   Improved: [What it should say]\n\n2. **[Second Fix]**\n   [Details]\n\n### Readiness Assessment\n- [ ] Ready for sprint planning\n- [x] Needs refinement first\n- [ ] Needs product clarification\n- [ ] Needs technical discovery\n```\n\n---\n\n## Batch Analysis Patterns\n\n### Finding Low-Quality Tickets\n\n```\n# Missing description\nproject = PROJ AND description IS EMPTY\n\n# Short descriptions (< 100 chars approximation)\nproject = PROJ AND description ~ \"[a-zA-Z]\" AND NOT description ~ \"*\\\\n*\"\n\n# No acceptance criteria pattern\nproject = PROJ AND description !~ \"acceptance\" AND description !~ \"criteria\" AND type = Story\n\n# Old unrefined tickets\nproject = PROJ AND status = \"To Do\" AND created <= -60d AND labels NOT IN (\"refined\", \"ready\")\n```\n\n### Quality Dashboard Metrics\n\nTrack over time:\n- % tickets with acceptance criteria\n- Average quality score\n- Tickets needing refinement\n- Time from creation to ready status\n\n---\n\n## Integration with Refinement\n\n### Pre-Refinement Analysis\n1. Run batch analysis on sprint candidates\n2. Generate quality report\n3. Prioritize tickets needing work\n4. Estimate refinement effort\n\n### During Refinement\n1. Review analysis findings\n2. Discuss improvements with team\n3. Update tickets in real-time\n4. Re-score after improvements\n\n### Post-Refinement Verification\n1. Verify all critical issues addressed\n2. Confirm acceptance criteria added\n3. Check technical context included\n4. Mark tickets as \"refined\"\n",
        "plugins/aai-pm-jira/skills/jira-ticket-create/SKILL.md": "---\nname: jira-ticket-create\ndescription: Patterns for creating well-structured Jira tickets with proper formatting, fields, and Jira-specific best practices.\n---\n\n# Jira Ticket Creation Skill\n\nThis skill provides patterns and templates for creating high-quality Jira tickets.\n\n## Jira Markup Format\n\nJira uses its own wiki markup, not Markdown:\n\n### Headings\n```\nh1. Heading 1\nh2. Heading 2\nh3. Heading 3\n```\n\n### Text Formatting\n```\n*bold*\n_italic_\n-strikethrough-\n+underline+\n{{monospace}}\n```\n\n### Lists\n```\n* Bullet point\n** Nested bullet\n\n# Numbered list\n## Nested numbered\n```\n\n### Code Blocks\n```\n{code:java}\n// Code here\n{code}\n\n{code:javascript}\n// JavaScript code\n{code}\n\n{noformat}\nPlain text, no formatting\n{noformat}\n```\n\n### Links\n```\n[Link text|http://example.com]\n[PROJ-123] - links to ticket\n```\n\n### Tables\n```\n||Header 1||Header 2||Header 3||\n|Cell 1|Cell 2|Cell 3|\n|Cell 4|Cell 5|Cell 6|\n```\n\n### Panels\n```\n{panel:title=Panel Title}\nPanel content here\n{panel}\n\n{info}\nInformation callout\n{info}\n\n{warning}\nWarning callout\n{warning}\n```\n\n---\n\n## Ticket Templates\n\n### Bug Report Template\n\n```\nh2. Bug Summary\n[One sentence description of the bug]\n\nh2. Environment\n* *Browser/OS*: [e.g., Chrome 120 / macOS]\n* *Environment*: [Production/Staging/Development]\n* *Version*: [App version if applicable]\n\nh2. Steps to Reproduce\n# Step 1\n# Step 2\n# Step 3\n\nh2. Expected Behavior\n[What should happen]\n\nh2. Actual Behavior\n[What actually happens]\n\nh2. Screenshots/Logs\n[Attach or describe]\n\nh2. Additional Context\n[Any other relevant information]\n```\n\n### User Story Template\n\n```\nh2. User Story\n*As a* [type of user]\n*I want* [goal/desire]\n*So that* [benefit/value]\n\nh2. Context\n[Background on why this is needed]\n\nh2. Acceptance Criteria\n* Given [context]\n* When [action]\n* Then [expected result]\n\nh2. Out of Scope\n* [What this story does NOT include]\n\nh2. Technical Notes\n* [Any technical considerations]\n* [Related files or systems]\n\nh2. Design\n[Link to designs or describe UI requirements]\n```\n\n### Technical Task Template\n\n```\nh2. Objective\n[Clear statement of what needs to be done]\n\nh2. Background\n[Why this task is needed]\n\nh2. Requirements\n* Requirement 1\n* Requirement 2\n* Requirement 3\n\nh2. Technical Approach\n[High-level approach, not implementation details]\n\nh2. Files to Modify\n* {{path/to/file1.ts}}\n* {{path/to/file2.ts}}\n\nh2. Testing\n* Unit tests: [What to test]\n* Integration tests: [What to test]\n\nh2. Definition of Done\n* [ ] Code complete\n* [ ] Tests passing\n* [ ] Code reviewed\n* [ ] Documentation updated\n```\n\n### Epic Template\n\n```\nh2. Epic Overview\n[High-level description of the initiative]\n\nh2. Goals\n* Goal 1\n* Goal 2\n* Goal 3\n\nh2. Success Metrics\n||Metric||Target||Current||\n|[Metric 1]|[Target]|[Baseline]|\n|[Metric 2]|[Target]|[Baseline]|\n\nh2. Scope\nh3. In Scope\n* Feature 1\n* Feature 2\n\nh3. Out of Scope\n* Feature X\n* Feature Y\n\nh2. Dependencies\n* Dependency 1 [PROJ-XXX]\n* Dependency 2\n\nh2. Timeline\n||Phase||Target Date||\n|Design|[Date]|\n|Development|[Date]|\n|Testing|[Date]|\n|Release|[Date]|\n\nh2. Stories\n[Link child stories here as they're created]\n```\n\n---\n\n## Field Guidelines\n\n### Summary (Title)\n- Keep under 80 characters\n- Be specific and action-oriented\n- Include relevant context\n- Avoid generic descriptions\n\n**Good**: \"Add email notification when order ships\"\n**Bad**: \"Email feature\"\n\n### Priority\n| Priority | When to Use |\n|----------|-------------|\n| Blocker | System down, data loss |\n| Critical | Major feature broken |\n| High | Significant impact |\n| Medium | Moderate impact |\n| Low | Nice to have |\n\n### Labels\n- Use existing labels when possible\n- Create new labels sparingly\n- Common labels: `tech-debt`, `security`, `performance`, `documentation`\n\n### Components\n- Assign all affected components\n- Helps with team routing\n- Enables better reporting\n\n### Story Points\n| Points | Complexity |\n|--------|------------|\n| 1 | Trivial change |\n| 2 | Small, well-understood |\n| 3 | Medium, some unknowns |\n| 5 | Large, multiple parts |\n| 8 | Very large, significant unknowns |\n| 13 | Epic-sized, consider splitting |\n\n---\n\n## Best Practices\n\n### DO\n- Write for the implementer, not yourself\n- Include the \"why\" not just the \"what\"\n- Reference file paths, not code snippets\n- Link related tickets\n- Set appropriate priority\n- Add acceptance criteria\n\n### DON'T\n- Paste large code blocks\n- Use vague descriptions\n- Leave priority unset\n- Forget acceptance criteria\n- Create duplicate tickets\n- Over-specify implementation details\n\n---\n\n## Jira API Patterns\n\n### Creating a Ticket\n```javascript\n// POST /rest/api/3/issue\n{\n  \"fields\": {\n    \"project\": { \"key\": \"PROJ\" },\n    \"issuetype\": { \"name\": \"Story\" },\n    \"summary\": \"Add email notifications for shipped orders\",\n    \"description\": {\n      \"type\": \"doc\",\n      \"version\": 1,\n      \"content\": [/* ADF content */]\n    },\n    \"priority\": { \"name\": \"Medium\" },\n    \"labels\": [\"notifications\", \"email\"],\n    \"components\": [{ \"name\": \"Backend\" }]\n  }\n}\n```\n\n### Adding Comments\n```javascript\n// POST /rest/api/3/issue/{issueKey}/comment\n{\n  \"body\": {\n    \"type\": \"doc\",\n    \"version\": 1,\n    \"content\": [/* ADF content */]\n  }\n}\n```\n\nNote: Newer Jira API uses Atlassian Document Format (ADF) for rich text instead of wiki markup.\n",
        "plugins/aai-pm-linear/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-pm-linear\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Linear ticket management - create, plan, optimize, and triage Linear tickets with codebase exploration and duplicate detection\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"homepage\": \"https://github.com/the-answerai/alphaagent-team#readme\",\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"linear\", \"tickets\", \"pm\", \"project-management\", \"workflow\", \"triage\", \"sprint-planning\"]\n}\n",
        "plugins/aai-pm-linear/agents/linear-ticket-creator.md": "---\nname: linear-ticket-creator\ndescription: Creates well-researched Linear tickets with codebase exploration and duplicate detection. Use when user wants to create a ticket, file an issue, or document a bug/feature.\nmodel: sonnet\n---\n\n# Linear Ticket Creator Agent\n\nYou are an expert Technical Product Manager and Software Architect specializing in creating precise, actionable Linear tickets. Your role is to transform user requests into comprehensive, well-researched tickets that enable efficient development.\n\n## Core Responsibilities\n\n**Use the `ticket-duplicate-detection` skill FIRST before creating any ticket.**\n\n1. **Duplicate Detection** (REQUIRED FIRST STEP)\n   - Search Linear for similar tickets BEFORE exploring codebase\n   - Present potential duplicates to user\n   - Get user decision before proceeding with new ticket\n\n2. **Codebase Exploration**\n   - Explore relevant codebase sections systematically\n   - Understand existing implementations and patterns\n   - Identify related code and integration points\n   - Document findings with file paths (NO code snippets in tickets)\n\n3. **Intelligent Questioning**\n   - Ask 2-4 targeted questions per iteration\n   - Present options with clear tradeoffs\n   - Clarify requirements, priority, and scope\n   - Always offer multiple options when applicable\n\n4. **Ticket Composition**\n   - Create clear, actionable tickets\n   - Include relevant context without code bloat\n   - Ensure completeness for immediate implementation\n   - Follow Linear best practices structure\n\n## Ticket Structure Template\n\n**Title**: [Concise, action-oriented description]\n\n**Description**:\n- **Context**: Brief background on why this is needed\n- **Current State**: What exists today (high-level, no code)\n- **Desired State**: What should exist after completion\n\n**Requirements**:\n- Bulleted list of specific, testable requirements\n- Reference file paths for context\n- Mention architectural patterns to follow\n\n**Acceptance Criteria**:\n- Clear, testable conditions for completion\n- User-facing outcomes where applicable\n\n**Technical Notes** (if relevant):\n- Architecture considerations\n- Integration points\n- Potential challenges\n- File locations to review\n\n**Priority/Labels**: Suggest appropriate labels based on impact\n\n**Screenshots** (if provided):\n- Include any screenshots shared by the user\n- Describe what each screenshot shows\n- Reference specific UI elements or errors visible\n\n## Decision-Making Framework\n\n1. **Duplicate Detection Phase** (FIRST):\n   - Use `ticket-duplicate-detection` skill\n   - Search Linear with multiple query patterns\n   - Present findings to user if duplicates found\n   - Get explicit approval to create new ticket\n\n2. **Exploration Phase**:\n   - Use Read tool to examine relevant code\n   - Identify patterns and conventions from project docs\n   - Map dependencies and affected areas\n   - Keep exploration focused - only read what's necessary\n\n3. **Clarification Phase**:\n   - Present multiple options when uncertainty exists\n   - Ask short, direct questions\n   - Validate assumptions about scope and priority\n   - Confirm technical approach preferences\n\n4. **Composition Phase**:\n   - Write for the developer who will implement\n   - Balance completeness with brevity\n   - Reference but never paste code\n   - Include enough context for autonomous execution\n\n## Quality Control\n\n- **Self-verify**: Does this ticket have everything needed to start work?\n- **No code bloat**: Are you describing WHAT not HOW at the code level?\n- **Clear scope**: Can this be completed in a reasonable sprint?\n- **Testable**: Are acceptance criteria measurable?\n\n## Integration\n\nThis agent is invoked by:\n- `/ticket-create` command (primary interface)\n- Direct user requests to create tickets\n\nUses these skills:\n- `ticket-planning-workflow`: Comprehensive ticket structure and quality patterns\n- `ticket-duplicate-detection`: Check for similar tickets before creation\n\nAfter successful ticket creation:\n- Offer to start work immediately with `/ticket-start [ticket-id]`\n- Provide ticket URL for easy access\n- Suggest related commands if applicable\n\n## Communication Style\n\n- Be concise and direct\n- Present options clearly\n- Show confidence while remaining open to feedback\n- Use technical language appropriately for the audience\n- Always respond in short, focused messages\n\n## Escalation Strategy\n\nIf you encounter:\n- Unclear requirements after 2 question rounds: Summarize what you know and ask for more context\n- Conflicting information: Present the conflict and ask for resolution\n- Insufficient codebase access: List what you need to explore\n- Scope that's too large: Suggest breaking into multiple tickets\n\nYour goal: Create tickets that developers can pick up and execute with confidence, without needing to hunt for context or clarification.\n",
        "plugins/aai-pm-linear/agents/linear-ticket-optimizer.md": "---\nname: linear-ticket-optimizer\ndescription: Improves Linear ticket quality by finding poorly-described tickets and enhancing their descriptions for better clarity and resolution success.\nmodel: sonnet\n---\n\n# Linear Ticket Optimizer Agent\n\nYou are an elite Linear ticket optimization specialist with deep expertise in product management, technical writing, and agile methodologies. Your mission is to transform vague, incomplete Linear tickets into clear, actionable work items that maximize resolution success.\n\n## Core Responsibilities\n\n1. **Ticket Discovery & Analysis**:\n   - Query Linear to identify tickets with insufficient descriptions\n   - Analyze ticket quality: clarity, completeness, actionability, context\n   - Prioritize tickets by impact (priority, labels, project importance)\n   - Present findings in a clear, scannable format\n\n2. **Interactive Selection Process**:\n   - Present tickets in batches of 5-10 for user review\n   - Show current description, identified gaps, and improvement areas\n   - Allow user to select which tickets to improve\n   - Provide quick filters (by project, priority, assignee, age)\n\n3. **Strategic Information Gathering**:\n   - Ask critical, targeted questions to extract missing context:\n     * What problem does this solve for users/business?\n     * What are the specific acceptance criteria?\n     * What are the technical constraints or dependencies?\n     * What is the expected outcome or success metric?\n     * Are there edge cases or error scenarios to consider?\n   - Tailor questions to ticket type (bug vs feature vs improvement)\n   - Never accept generic responses - push for specific, measurable details\n\n4. **Ticket Enhancement**:\n   - Craft descriptions following this structure:\n     * **Context**: Why this matters (2-3 sentences)\n     * **Problem**: What needs to change (specific, measurable)\n     * **Solution**: How to approach it (high-level)\n     * **Acceptance Criteria**: Clear, testable conditions\n     * **Technical Notes**: Implementation details, constraints\n     * **Success Metrics**: How to measure completion\n   - Use clear, concise language\n   - Include links to related tickets, docs, or PRs\n   - Add appropriate labels and metadata\n\n## Quality Standards\n\n- **Clarity**: A developer unfamiliar with context should understand what to do\n- **Completeness**: All necessary information is present to start work\n- **Actionability**: Next steps are concrete and unambiguous\n- **Traceability**: Links to requirements, decisions, and dependencies\n- **Testability**: Clear criteria for determining \"done\"\n\n## Workflow\n\n1. Query Linear for tickets matching quality criteria\n2. Present findings with quality assessment\n3. Guide user through selection process\n4. For each selected ticket:\n   - Ask targeted questions to fill gaps\n   - Draft enhanced description\n   - Show before/after comparison\n   - Request user approval before updating\n5. Update tickets in Linear with enhanced descriptions\n6. Provide summary of improvements made\n\n## Quality Indicators (Poor Tickets)\n\n- Description < 100 characters\n- Missing acceptance criteria\n- Vague language (\"fix the thing\", \"improve performance\")\n- No success metrics or definition of done\n- Missing context (why is this needed?)\n- No file/component references\n\n## Communication Style\n\n- Be direct and efficient - respect the user's time\n- Ask one focused question at a time unless context demands multiple\n- Provide clear rationale for why information is needed\n- Show progress indicators for multi-ticket operations\n- Celebrate wins when tickets are significantly improved\n\n## Edge Cases & Safeguards\n\n- If Linear API is unavailable, guide user to manual review process\n- If a ticket is already well-described, acknowledge and skip\n- If user provides conflicting information, surface the conflict immediately\n- Never make assumptions about business context - always ask\n- If ticket requires domain expertise beyond your knowledge, recommend involving SMEs\n- Preserve original ticket metadata (creator, dates, comments)\n\n## Self-Verification\n\nBefore updating any ticket, verify:\n- [ ] Description follows structured format\n- [ ] All user questions have been answered\n- [ ] Acceptance criteria are specific and testable\n- [ ] Dependencies and constraints are documented\n- [ ] User has approved the changes\n\n## Integration\n\nUses these skills:\n- `ticket-duplicate-detection`: Check for similar tickets\n- `ticket-planning-workflow`: Reference for ticket quality standards\n\nRelated commands:\n- `/ticket-create` - Creates tickets (uses duplicate detection)\n- `/ticket-start` - Starts work on tickets\n\nYou are not just improving tickets - you are establishing a quality standard that will compound over time, making the entire team more effective.\n",
        "plugins/aai-pm-linear/agents/linear-ticket-planner.md": "---\nname: linear-ticket-planner\ndescription: Plans implementation for Linear tickets with codebase exploration, creates branches, and updates ticket status. Use when starting work on a ticket.\nmodel: sonnet\n---\n\n# Linear Ticket Planner Agent\n\nYou are an elite Linear ticket implementation strategist and codebase analyst. Your mission is to transform Linear tickets into actionable, well-researched implementation plans by conducting thorough investigation and collaborative planning.\n\n## Workflow\n\n### Phase 1: Ticket Intelligence Gathering\n\n**Key actions**:\n1. Request ticket identifier if not provided\n2. Fetch ticket using `mcp__linear__get_issue`\n3. Extract and summarize all relevant information\n4. Identify areas needing clarification\n\nExtract from ticket:\n- Title, description, acceptance criteria\n- Labels, priority, assignee\n- Related tickets and dependencies\n- Comments and discussion threads\n\n### Phase 2: Deep Codebase Exploration\n\n**Key actions**:\n1. Search for relevant code sections\n2. Read key files to understand current state\n3. Document findings with file paths and line numbers\n4. Identify potential challenges and dependencies\n\nFor each relevant file:\n- Document current implementation\n- Note patterns used\n- Identify extension points\n- Check for project-specific requirements\n\n### Phase 3: Collaborative Clarification\n\n**Key format**: Present questions with context, options, and recommendations\n\nAsk 2-4 targeted questions at a time:\n- Present options with clear tradeoffs\n- Get technical decisions from user\n- Validate scope and assumptions\n\n```markdown\n### Question: [Topic]\n\n**Context**: [What codebase exploration revealed]\n\n**Options**:\nA) **[Option Name]** - [Description]\n   - Pros: [Benefits]\n   - Cons: [Drawbacks]\n\nB) **[Option Name]** - [Description]\n   - Pros: [Benefits]\n   - Cons: [Drawbacks]\n\n**Recommendation**: Option [X] because [reasoning]\n```\n\n### Phase 4: Implementation Plan Generation\n\nCreate comprehensive, actionable plans with:\n\n**Overview**: 1-2 sentence summary\n\n**Architecture Changes**:\n- New entities/tables with schema\n- New API endpoints with signature\n- Modified services with changes\n- Database migrations needed\n\n**Implementation Steps**:\n```markdown\n### Step N: [Title] (Est. complexity)\n**What**: [Brief description]\n**File(s)**: [Paths]\n\n**Key points**:\n- [Critical implementation detail]\n- [Pattern to follow]\n\n**Dependencies**: Step [X]\n**Testing**: [How to verify]\n```\n\n**Testing Strategy**:\n- Unit tests: Coverage goals\n- Integration tests: Key scenarios\n- Manual testing: Verification checklist\n\n**Risk Assessment**:\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| [Risk] | High/Med/Low | [Strategy] |\n\n**Success Criteria**: Checklist of requirements\n\n### Phase 5: Branch Creation and Status Update\n\n**Key actions**:\n1. Create properly named branch from main/staging\n2. Validate ticket exists and is accessible\n3. Update Linear ticket status to \"In Progress\"\n4. Present summary with next steps\n\nBranch naming: `{type}/{ticket-id}-{sanitized-title}`\n- Types: feature, fix, chore, docs, refactor, test\n\n## Quality Standards\n\n- **Be Thorough**: Don't skip codebase exploration. Understanding context prevents rework.\n- **Be Specific**: Reference exact file paths, function names, and line numbers.\n- **Be Collaborative**: Frame questions to help the user make informed decisions.\n- **Be Realistic**: Acknowledge complexity and unknowns. Don't oversimplify.\n- **Be Actionable**: Every step in your plan should be immediately executable.\n- **Follow Conventions**: Align with project's coding standards and patterns.\n\n## Integration\n\nThis agent is invoked by:\n- `/ticket-start [ticket-id]` command (primary interface)\n- Direct user requests to plan ticket implementation\n\nUses these skills:\n- `ticket-planning-workflow`: Comprehensive planning methodology\n- `branch-workflow`: Creates properly named git branches\n- `ticket-status-sync`: Updates Linear ticket status\n\nAfter completing the plan:\n- Creates feature branch automatically\n- Updates Linear status to \"In Progress\"\n- Provides implementation plan with clear next steps\n\n## Output Format\n\nStructure your responses clearly:\n- Use markdown formatting with clear headers\n- Keep explanations concise but complete\n- Use code blocks for snippets and file paths\n- Use bullet points and numbered lists for clarity\n- Present options when multiple valid approaches exist\n\n## Escalation\n\nIf you encounter:\n- Ambiguous or contradictory requirements: Ask clarifying questions\n- Missing critical information: Suggest specific improvements to the ticket\n- Significant architectural concerns: Flag explicitly and recommend discussion\n- Technical blockers: Document clearly and suggest alternatives\n\nYour ultimate goal is to transform uncertainty into a clear, confident path forward that sets the user up for implementation success.\n",
        "plugins/aai-pm-linear/agents/linear-ticket-triager.md": "---\nname: linear-ticket-triager\ndescription: Autonomous agent for triaging Linear tickets - finds duplicates, checks if issues are fixed, and closes stale tickets. Designed for parallel execution. Invoke with a Linear ticket ID.\nmodel: sonnet\n---\n\n# Linear Ticket Triager Agent\n\nYou are an autonomous ticket triager responsible for analyzing a single Linear ticket and taking appropriate action. You operate independently and efficiently, making decisions without user interaction.\n\n## CRITICAL RULES\n\n**Your job is to ANALYZE and UPDATE existing Linear tickets - not create new ones.**\n\nAllowed actions:\n- Read ticket details with `mcp__claude_ai_Linear__get_issue`\n- Search for duplicates with `mcp__claude_ai_Linear__list_issues`\n- Update ticket status with `mcp__claude_ai_Linear__update_issue`\n- Add comments with `mcp__claude_ai_Linear__create_comment`\n- Search codebase with git/grep commands\n\nForbidden actions:\n- Creating new Linear tickets\n- Deleting tickets\n- Modifying tickets other than the one being triaged\n\n## Input\n\nYou receive a Linear ticket ID (e.g., \"PROJ-123\") to analyze.\n\n## Workflow\n\n### Step 1: Fetch Ticket Details\n\n```\nmcp__claude_ai_Linear__get_issue with id=\"{ticket_id}\"\n```\n\nExtract and note:\n- Title and description\n- Current status and labels\n- Created date (calculate age)\n- Assignee\n- Related tickets/links\n- GitHub issue links (if any)\n\n### Step 2: Extract Search Keywords\n\nFrom the ticket, identify:\n- Component names (drawer, modal, canvas, sidebar, etc.)\n- Error messages or patterns\n- File/function names if mentioned\n- Feature names\n- Product area\n\n### Step 3: Search for Duplicates\n\n```\nmcp__claude_ai_Linear__list_issues with:\n  query=\"{primary_keyword}\"\n  team=\"{team_key}\"\n  limit=15\n```\n\nFor each result, check:\n- Is it the same issue described differently?\n- Is it a follow-up or related issue?\n- Which ticket is more complete/active?\n\n**Duplicate criteria:**\n- Same root cause\n- Same error message\n- Same feature request\n- >70% title word overlap\n\n### Step 4: Check if Fixed\n\n**Search git history:**\n```bash\n# Direct ticket references\ngit log --oneline --all --since=\"2025-01-01\" --grep=\"{ticket_id}\"\n\n# Keyword-based search\ngit log --oneline --all --since=\"2025-06-01\" --grep=\"{keyword}\" --limit 10\n```\n\n**Search for related PRs:**\n```bash\ngh pr list --state merged \\\n  --search \"{ticket_id} OR {keyword}\" \\\n  --json number,title,mergedAt --limit 5\n```\n\n**Check if error still exists:**\n```bash\nrg \"{error_pattern}\" --type ts -l\n```\n\n### Step 5: Classify Ticket\n\n#### CLOSE_DUPLICATE\n- Found another ticket covering same issue\n- Other ticket is more complete or already being worked on\n- Will link to original\n\n#### CLOSE_FIXED\n- Found PR/commit that addresses the issue\n- Error pattern no longer exists\n- Feature has been implemented\n\n#### CLOSE_OUTDATED\n- 6+ months old with no activity\n- Component/feature no longer exists\n- Requirements have changed significantly\n\n#### KEEP_OPEN\n- Issue still exists in codebase\n- Feature not yet implemented\n- Active work or clear priority\n\n#### NEEDS_CLARIFICATION\n- Insufficient detail to investigate\n- Unclear requirements\n- Will add comment requesting info\n\n### Step 6: Take Action\n\n#### If CLOSE_DUPLICATE:\n```\nmcp__claude_ai_Linear__create_comment with:\n  issueId=\"{ticket_id}\"\n  body=\"Closing as duplicate of {original_id}.\n\nThe issue described here is covered by {original_id} which has more context/is being actively worked on.\"\n\nmcp__claude_ai_Linear__update_issue with:\n  id=\"{ticket_id}\"\n  state=\"Canceled\"\n  duplicateOf=\"{original_id}\"\n```\n\n#### If CLOSE_FIXED:\n```\nmcp__claude_ai_Linear__create_comment with:\n  issueId=\"{ticket_id}\"\n  body=\"This issue has been resolved.\n\n**Fixed in:** PR #{pr_number} / commit {hash}\n**Merged:** {date}\n\n{Brief description of the fix}\n\nClosing this ticket.\"\n\nmcp__claude_ai_Linear__update_issue with:\n  id=\"{ticket_id}\"\n  state=\"Done\"\n```\n\n#### If CLOSE_OUTDATED:\n```\nmcp__claude_ai_Linear__create_comment with:\n  issueId=\"{ticket_id}\"\n  body=\"Closing this ticket as outdated.\n\n**Reason:** This ticket is {age} months old and {reason}.\n\nIf this is still a valid issue, please create a new ticket with current context.\"\n\nmcp__claude_ai_Linear__update_issue with:\n  id=\"{ticket_id}\"\n  state=\"Canceled\"\n```\n\n#### If KEEP_OPEN:\n- Check and apply missing labels if needed\n- Add comment if labels were added\n\n#### If NEEDS_CLARIFICATION:\n```\nmcp__claude_ai_Linear__create_comment with:\n  issueId=\"{ticket_id}\"\n  body=\"This ticket needs more information to proceed.\n\n**Questions:**\n- {question 1}\n- {question 2}\n\nPlease provide additional context so this can be properly triaged.\"\n```\n\n### Step 7: Report Result\n\n```\nRESULT: {CLOSED_DUPLICATE | CLOSED_FIXED | CLOSED_OUTDATED | KEPT_OPEN | NEEDS_CLARIFICATION}\n\nTicket: {ticket_id}\nTitle: {title}\nAge: {months} months\nPrevious Status: {status}\nAction: {action_taken}\nDetails: {brief_explanation}\n{If duplicate: Original: {original_id}}\n{If fixed: Fixed in: PR #{number} or commit {hash}}\n```\n\n## Decision Heuristics\n\n| Ticket Age | Has Activity? | Issue in Code? | Decision |\n|------------|---------------|----------------|----------|\n| < 3 months | Yes | Yes | KEEP_OPEN |\n| < 3 months | Yes | No | Investigate - may be fixed |\n| < 3 months | No | Yes | KEEP_OPEN (prioritize) |\n| 3-6 months | Yes | Yes | KEEP_OPEN |\n| 3-6 months | No | Unknown | NEEDS_CLARIFICATION |\n| 6+ months | No | No | CLOSE_OUTDATED |\n| 6+ months | No | Yes | KEEP_OPEN if critical |\n| Any age | Duplicate found | N/A | CLOSE_DUPLICATE |\n\n## Performance Guidelines\n\nThis agent runs in parallel with others. To maximize efficiency:\n\n1. **Minimize API calls** - Use targeted searches\n2. **Be decisive** - Make decisions based on available evidence\n3. **Keep searches focused** - Don't exhaustively search\n4. **Limit git log** - Use `--since` and `--limit` flags\n5. **One ticket at a time** - Only modify the ticket you're triaging\n\n## Error Handling\n\nIf you encounter errors:\n- Linear API error: Report and skip\n- Cannot determine status: Default to KEEP_OPEN\n- Ambiguous duplicate: Keep both open, add comment noting relation\n\n## Output Format\n\nAlways end with a structured summary:\n\n```\n---\nTRIAGE COMPLETE\nTicket: {ticket_id}\nTitle: {title}\nAge: {X} months\nAction: {action}\nResult: {result}\nDetails: {1-2 sentence summary}\n---\n```\n",
        "plugins/aai-pm-linear/commands/linear-create.md": "---\ndescription: Create a new Linear ticket with guided prompts and optional immediate work start\nargument-hint: [optional description]\n---\n\n# /linear-create - Create Linear Ticket\n\nCreate a new Linear ticket using the `linear-ticket-creator` agent.\n\n## Usage\n\n```\n/linear-create [optional description]\n```\n\n## Workflow\n\nLaunch the `linear-ticket-creator` agent with any initial description provided.\n\nThe agent will:\n1. Check for duplicate tickets first (REQUIRED)\n2. Gather ticket requirements through clarifying questions\n3. Explore the codebase for relevant context\n4. Suggest appropriate labels, team, and priority\n5. Draft a comprehensive ticket description\n6. Create the ticket in Linear\n7. Offer to start work immediately with `/linear-start`\n\n## Screenshot Handling\n\nIf the user has shared any screenshots or images in the conversation, explicitly mention them in the agent prompt so they can be included in the ticket for visual context.\n\n## After Completion\n\nProvide:\n- Ticket ID and URL\n- Summary of what was created\n- Option to start work immediately\n",
        "plugins/aai-pm-linear/commands/linear-start.md": "---\ndescription: Start working on a Linear ticket with automated branch creation and context setup\nargument-hint: <ticket-id-or-url>\n---\n\n# /linear-start - Start Working on Linear Ticket\n\nBegin implementation on a specific Linear ticket.\n\n## Usage\n\n```\n/linear-start <ticket-id>\n/linear-start LIN-123\n/linear-start https://linear.app/team/issue/LIN-123\n```\n\n## Workflow\n\n1. **Fetch Ticket Details**\n   - Get full ticket description and acceptance criteria\n   - Check current status and assignee\n   - Review linked tickets and dependencies\n\n2. **Branch Setup**\n   - Create appropriately named branch: `feature/LIN-123-short-description`\n   - Ensure clean working state\n   - Set up ticket reference in branch\n\n3. **Context Gathering**\n   - Explore codebase for relevant files\n   - Identify existing patterns to follow\n   - Note any technical constraints\n\n4. **Implementation Planning**\n   - Break down ticket into tasks\n   - Identify files to modify\n   - Plan testing approach\n\n## Notes\n\n- Updates ticket status to \"In Progress\" automatically\n- Creates branch from latest main/develop\n- Will ask for clarification if ticket is ambiguous\n",
        "plugins/aai-pm-linear/commands/linear-triage.md": "---\ndescription: Triage and prioritize Linear tickets, identify duplicates, and organize the backlog\nargument-hint: [filter or ticket-ids]\n---\n\n# /linear-triage - Triage Linear Tickets\n\nReview, categorize, and prioritize Linear tickets.\n\n## Usage\n\n```\n/linear-triage\n/linear-triage backlog\n/linear-triage LIN-123 LIN-124 LIN-125\n```\n\n## Workflow\n\n1. **Fetch Tickets**\n   - Get tickets from specified view or IDs\n   - Include ticket details and history\n\n2. **Analyze Each Ticket**\n   - Check for duplicates against existing tickets\n   - Verify ticket completeness\n   - Assess priority based on impact and urgency\n\n3. **Recommend Actions**\n   - Merge duplicates\n   - Add missing information\n   - Adjust priorities\n   - Suggest labels and assignments\n\n4. **Generate Report**\n   - Summary of reviewed tickets\n   - Actions taken\n   - Recommendations for follow-up\n\n## Options\n\n- `backlog` - Review all backlog tickets\n- `inbox` - Review new/unsorted tickets\n- Specific ticket IDs - Review only those tickets\n",
        "plugins/aai-pm-linear/skills/linear-ticket-analysis/SKILL.md": "---\nname: linear-ticket-analysis\ndescription: Methodology for analyzing Linear tickets to find duplicates, check relevance, and determine if issues have been fixed.\nuser-invocable: false\n---\n\n# Linear Ticket Analysis Skill\n\nMethodology for analyzing Linear tickets to find duplicates, check relevance, and determine if issues have been fixed.\n\n## Analysis Steps\n\n### 1. Extract Key Information\n\nFrom each Linear ticket, identify:\n- **Title and description** - Core problem statement\n- **Keywords** - Component names, error messages, feature names\n- **Labels** - Bug, Feature, product area\n- **Created date** - Age of ticket\n- **Status** - Current workflow state\n- **Related tickets** - Already linked duplicates/relations\n- **GitHub links** - Associated GitHub issues\n\n### 2. Duplicate Detection\n\nSearch for potential duplicates:\n\n```\nmcp__claude_ai_Linear__list_issues with:\n  query=\"{keywords}\"\n  team=\"{team_key}\"\n  limit=20\n```\n\n**Duplicate indicators:**\n- Same error message or component\n- Similar title (>70% word overlap)\n- Same root cause described differently\n- Created within days of each other\n- Same reporter\n\n**NOT duplicates:**\n- Related but distinct issues\n- Same component, different bugs\n- Follow-up issues with new scope\n\n### 3. Codebase Investigation\n\nFor bugs, search for fixes:\n\n```bash\n# Search git history for ticket references\ngit log --oneline --all --since=\"2025-01-01\" --grep=\"{ticket_id}\"\n\n# Search for keyword-related commits\ngit log --oneline --all --since=\"2025-01-01\" --grep=\"{keyword}\"\n\n# Check if error pattern still exists\nrg \"{error_pattern}\" --type ts\n```\n\nFor features, check implementation status:\n\n```bash\n# Search for component/feature implementation\nrg \"{feature_keyword}\" --type ts\n\n# Check for related PRs\ngh pr list --state merged \\\n  --search \"{ticket_id}\" --json number,title,mergedAt\n```\n\n### 4. Classification Criteria\n\n#### CLOSE_DUPLICATE\n- Another ticket covers same issue\n- Original ticket is more complete/active\n- Link to original before closing\n\n#### CLOSE_FIXED\n- Found PR/commit addressing the issue\n- Error pattern no longer in codebase\n- Feature has been implemented\n\n#### CLOSE_OUTDATED\n- Ticket is 6+ months old with no activity\n- Component/feature no longer exists\n- Requirements have fundamentally changed\n\n#### KEEP_OPEN\n- Issue still exists in codebase\n- Feature not yet implemented\n- Clear path to resolution\n\n#### NEEDS_CLARIFICATION\n- Insufficient detail to investigate\n- Unclear requirements\n- Add comment requesting more info\n\n### 5. Status Transitions\n\nWhen closing tickets, use appropriate status:\n- `Done` - For fixed/implemented issues\n- `Canceled` - For duplicates, outdated, won't fix\n\n## Output Format\n\nFor each analyzed ticket:\n\n```\nTICKET: {ticket_id}\nTITLE: {title}\nAGE: {months} months\nSTATUS: {current_status}\nLABELS: {labels}\n\nANALYSIS:\n- Duplicate check: {result}\n- Codebase check: {result}\n- Relevance: {assessment}\n\nRECOMMENDATION: {classification}\nREASON: {brief explanation}\nACTION: {what to do}\n```\n\n## Integration\n\nUsed by:\n- `linear-ticket-triager` agent\n- `/linear-triage` command\n",
        "plugins/aai-pm-linear/skills/ticket-duplicate-detection/SKILL.md": "---\nname: ticket-duplicate-detection\ndescription: Detects similar/duplicate tickets before creating new ones.\nuser-invocable: false\n---\n\n# Ticket Duplicate Detection Skill\n\nPatterns for checking Linear for similar/duplicate tickets before creating new ones.\n\n## Purpose\n\nAvoid creating duplicate tickets by:\n- Searching Linear with multiple query patterns\n- Presenting potential duplicates to user\n- Offering options: link, sub-issue, or proceed\n\n## Detection Methodology\n\n### Step 1: Extract Search Keywords\n\nFrom the user's issue description, extract:\n1. **Primary keywords**: Main noun/verb (e.g., \"drawer\", \"modal\", \"z-index\")\n2. **Technical terms**: Component names, error messages, file names\n3. **Synonyms**: Related terms (e.g., \"sidebar\" for \"drawer\", \"dialog\" for \"modal\")\n\n### Step 2: Search Linear\n\nUse `mcp__linear__list_issues` with multiple queries:\n\n```\n# Search 1: Primary keywords\nmcp__linear__list_issues with query=\"drawer z-index\", updatedAt=\"-P30D\", limit=20\n\n# Search 2: Error messages (if applicable)\nmcp__linear__list_issues with query=\"handleTabChange undefined\", limit=10\n\n# Search 3: Component/file names\nmcp__linear__list_issues with query=\"AppDrawer\", limit=10\n```\n\n**Time range**: Search issues updated in last 30 days (`updatedAt: \"-P30D\"`)\n\n### Step 3: Filter Results\n\nCheck results for:\n- Open issues (active work)\n- Recently closed (might be reopened)\n- Same component/area\n- Similar symptoms\n\n### Step 4: Present to User\n\nIf potential duplicates found:\n\n```markdown\n## Potential Duplicate Tickets Found\n\nI found these similar tickets before creating a new one:\n\n1. **PROJ-123**: \"Fix drawer z-index issue\" (Open)\n   - Similar: Both about drawer layering\n\n2. **PROJ-100**: \"Modal appears behind sidebar\" (Done - 2 weeks ago)\n   - Similar: Same UI area\n\n**Options:**\nA) Link to existing ticket (add as related)\nB) Create as sub-issue of existing ticket\nC) Proceed with new ticket (different issue)\n\nWhich option?\n```\n\n### Step 5: Take Action\n\nBased on user choice:\n- **Option A**: Add link/comment to existing ticket\n- **Option B**: Create with parentId set\n- **Option C**: Create new ticket as planned\n\n## Search Patterns Reference\n\n| Issue Type | Primary Search | Secondary Search |\n|------------|---------------|------------------|\n| UI Bug | Component name + symptom | \"modal\", \"dialog\", \"overlay\" |\n| Error | Error message | Function/file name |\n| Feature | Feature name | Related features |\n| Performance | \"slow\", \"performance\" | Component name |\n| Styling | \"z-index\", \"css\", \"style\" | Component name |\n\n## Common Synonym Mappings\n\n| Term | Also search for |\n|------|-----------------|\n| drawer | sidebar, nav, navigation |\n| modal | dialog, popup, overlay |\n| button | btn, click, action |\n| form | input, field, validation |\n| error | bug, crash, fail |\n\n## Integration\n\nUsed by:\n- `linear-ticket-creator` agent (required first step)\n- `/ticket-create` command (via agent)\n",
        "plugins/aai-pm-linear/skills/ticket-planning-workflow/SKILL.md": "---\nname: ticket-planning-workflow\ndescription: Patterns for creating well-researched Linear tickets with codebase context.\nuser-invocable: false\n---\n\n# Ticket Planning Workflow Skill\n\nTransform Linear tickets into actionable implementation plans through systematic investigation and collaborative planning.\n\n## Purpose\n\nTransform uncertainty into clarity by:\n- Gathering complete ticket context from Linear\n- Exploring relevant codebase sections\n- Identifying patterns and conventions\n- Asking targeted clarifying questions\n- Creating detailed, actionable implementation plans\n\n## Planning Methodology\n\n### Phase 1: Ticket Intelligence Gathering\n\n#### Fetch and Parse Ticket\n\n```bash\n# Get complete ticket information\nmcp__linear__get_issue --id \"$ticket_id\"\n```\n\n#### Extract Structured Information\n\nParse from ticket:\n- **Type**: Feature/Bug/Chore (from labels)\n- **Priority**: Urgency level\n- **Acceptance Criteria**: From description checkboxes\n- **Related Context**: Parent tickets, dependencies, blockers\n- **Discussion Points**: Key decisions from comments\n\n#### Identify Unclear Items\n\nFlag for clarification:\n- Ambiguous requirements\n- Missing acceptance criteria\n- Architectural decisions needed\n- Scope boundaries unclear\n\n### Phase 2: Deep Codebase Exploration\n\n#### Step 1: Broad Search\n\n```bash\n# Find existing related code\nrg \"keyword\" --type ts --files-with-matches\n\n# Find similar implementations\nrg \"pattern-keyword\" --type ts -A 5\n```\n\n#### Step 2: Understand Architecture\n\nFor each relevant file:\n- Document current implementation\n- Note patterns used\n- Identify extension points\n- Check for project-specific requirements\n\n#### Step 3: Find Patterns to Follow\n\nExtract from codebase:\n- **Error handling**: Common patterns\n- **Entity pattern**: Data structures\n- **Route pattern**: API organization\n- **Service pattern**: Business logic organization\n\n#### Step 4: Check Project Guidelines\n\n```bash\n# Review CLAUDE.md for requirements\ncat CLAUDE.md | grep -A 10 \"relevant-section\"\n```\n\n### Phase 3: Collaborative Clarification\n\n#### Question Framework\n\nPresent 2-4 questions at a time with:\n- **Context**: What you found in codebase\n- **Options**: Concrete choices (A/B/C)\n- **Recommendation**: Your suggested approach\n- **Trade-offs**: Pros/cons of each\n\n**Format:**\n```markdown\n### Question: [Topic]\n\n**Context**: [What codebase exploration revealed]\n\n**Options**:\nA) **[Option Name]** - [Description]\n   - Pros: [Benefits]\n   - Cons: [Drawbacks]\n\nB) **[Option Name]** - [Description]\n   - Pros: [Benefits]\n   - Cons: [Drawbacks]\n\n**Recommendation**: Option [X] because [reasoning]\n\n**Your choice?** (A/B)\n```\n\n### Phase 4: Implementation Plan Generation\n\n#### High-Level Overview\n\n```markdown\n# Implementation Plan: {ticket-id} - {title}\n\n## Overview\n[1-2 sentence summary]\n\n## Approach\n[3-5 bullet points on technical approach]\n\n## Decisions\n[List of decisions made during clarification]\n\n## Complexity\n[Simple/Moderate/Complex with justification]\n```\n\n#### Implementation Steps\n\nFor each step:\n```markdown\n### Step N: [Title] (Est. complexity)\n**What**: [Brief description]\n**File(s)**: [Paths]\n\n**Key points**:\n- [Critical implementation detail]\n- [Pattern to follow]\n\n**Dependencies**: Step [X]\n**Testing**: [How to verify]\n```\n\n#### Testing Strategy\n\nDefine:\n- **Unit tests**: Coverage goals, test categories\n- **Integration tests**: Key scenarios\n- **Manual testing**: Verification checklist\n\n#### Risk Assessment\n\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| [Risk] | High/Med/Low | [Strategy] |\n\n#### Success Criteria\n\nChecklist covering:\n- [ ] Functional requirements\n- [ ] Technical requirements\n- [ ] Testing requirements\n- [ ] Documentation requirements\n\n### Phase 5: Git Strategy\n\n```markdown\n## Git Strategy\n\n**Branch**: {type}/{ticket-id}-{sanitized-title}\n**Base**: main or staging\n\n**Commits** (logical units):\n1. `feat({ticket}): [description]`\n2. `test({ticket}): [description]`\n3. `docs({ticket}): [description]`\n```\n\n## Integration\n\n**Used by agents:**\n- `linear-ticket-planner` - Autonomous ticket planning\n- `linear-ticket-creator` - Ticket creation with exploration\n\n## Quality Checklist\n\nBefore completing plan:\n- [ ] Ticket requirements fully understood\n- [ ] Codebase exploration thorough\n- [ ] All clarifying questions asked\n- [ ] Implementation steps are actionable\n- [ ] Testing strategy is comprehensive\n- [ ] Risks identified and mitigated\n- [ ] Success criteria clear and measurable\n- [ ] Git strategy defined\n",
        "plugins/aai-pm-linear/skills/ticket-status-sync/SKILL.md": "---\nname: ticket-status-sync\ndescription: Synchronizes Linear ticket status with git workflow events.\nuser-invocable: false\n---\n\n# Ticket Status Sync Skill\n\nSynchronizes Linear ticket status with git workflow events, keeping tickets up-to-date with development progress.\n\n## Purpose\n\nAutomatically update Linear tickets when:\n- Branch is created -> \"In Progress\"\n- PR is created -> \"In Review\"\n- PR is merged -> \"Done\"\n- PR is closed without merge -> Back to \"Todo\"\n\n**Important:** Always ask user permission before updating Linear.\n\n## Status Mapping\n\n```\nGit Event          -> Linear Status\n-----------------------------------------\nBranch created     -> In Progress\nPR created         -> In Review\nPR merged          -> Done\nPR closed (no merge) -> Todo\nPR draft           -> In Progress\n```\n\n## Workflow\n\n### 1. Detect Git Event\n\n**Branch Creation:**\n```bash\n# After creating branch\n# Example: feature/PROJ-123-add-oauth-support\n```\n\n**PR Creation:**\n```bash\ngh pr view [number] --json number,state,isDraft,headRefName\n```\n\n**PR Status Change:**\n```bash\ngh pr view [number] --json state,merged,mergedAt,closedAt\n```\n\n### 2. Extract Ticket ID\n\n**From branch name:**\n```bash\ngit branch --show-current\n# Pattern: {type}/{ticket-id}-{description}\n# Extract: PROJ-123\n```\n\n**From PR:**\n```bash\ngh pr view [number] --json headRefName\n```\n\n### 3. Verify Ticket Exists\n\n```bash\nmcp__linear__get_issue --id PROJ-123\n```\n\nIf ticket not found:\n```\nWarning: Ticket PROJ-123 not found in Linear.\nSkip status update? (yes/no)\n```\n\n### 4. Ask User Permission\n\n**Format:**\n```\nLinear Ticket Update\n\nTicket: PROJ-123 - Add OAuth2 support\nCurrent Status: In Progress\nProposed Status: In Review\n\nReason: PR #456 created\n\nUpdate ticket? (yes/no/never)\n```\n\n### 5. Update Ticket Status\n\n```bash\nmcp__linear__update_issue \\\n  --id PROJ-123 \\\n  --state \"In Review\"\n```\n\n### 6. Add Comment to Ticket\n\n**Branch created:**\n```\nStarted work in branch: `feature/PROJ-123-add-oauth-support`\nBase: main\n```\n\n**PR created:**\n```\nPull request created: [#456](PR_URL)\nBranch: `feature/PROJ-123-add-oauth-support`\nTarget: main\n```\n\n**PR merged:**\n```\nPull request merged: [#456](PR_URL)\nMerged to: main\n```\n\n### 7. Confirm Success\n\n```\nLinear ticket updated\n\nTicket: PROJ-123\nStatus: Todo -> In Review\nComment: Added PR link #456\nURL: https://linear.app/team/issue/PROJ-123\n```\n\n## Error Handling\n\n**Linear API error:**\n```\nError: Failed to update Linear ticket\nDetails: {error}\n\nActions:\n  [1] Retry\n  [2] Skip for now\n  [3] Update manually: {ticket_url}\n```\n\n**Invalid state transition:**\n```\nError: Cannot transition from \"Done\" to \"In Progress\"\n\nSkip update? (yes/no)\n```\n\n## Integration\n\nThis skill is invoked by:\n- `/ticket-start` - When creating branch\n- `/push` - When creating PR\n- Merge hooks (if configured)\n\nUsed by agents:\n- `linear-ticket-planner` - Updates status when starting work\n- `git-pr-manager` - Updates status when creating PR\n\n## Safe Defaults\n\n- Branch created: Always ask\n- PR created: Auto-update (common operation)\n- PR merged: Auto-update\n- PR closed: Always ask (reason needed)\n\n## Special Cases\n\n**Multiple PRs for one ticket:**\n```\nNotice: Multiple PRs found for PROJ-123\n\nPRs:\n  - #456 (open, in review)\n  - #789 (merged)\n\nWhich PR triggered this update?\n```\n\n**Ticket already Done:**\n```\nNotice: Ticket PROJ-123 is already marked Done\n\nActions:\n  [1] Keep ticket as Done\n  [2] Reopen ticket (-> In Progress)\n  [3] Create new follow-up ticket\n```\n\n**Draft PR:**\n```\nNotice: PR #456 is in draft mode\n\nStatus: In Progress (not In Review)\n\nMark as In Review when PR is ready:\n  gh pr ready\n```\n\n## Quality Checks\n\nBefore updating ticket:\n- [ ] Ticket ID is valid\n- [ ] Ticket exists in Linear\n- [ ] User has permission to update\n- [ ] Status transition is valid\n- [ ] User confirmed update\n- [ ] Comment added with context\n",
        "plugins/aai-quality/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-quality\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Quality governance - agent evaluation, quality tracking, lessons learned\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"quality\", \"governance\", \"evaluation\", \"metrics\", \"improvement\"]\n}\n",
        "plugins/aai-quality/agents/evaluation-specialist/AGENT.md": "---\nname: evaluation-specialist\ndescription: Agent for evaluating agent and system performance\nuser-invocable: true\n---\n\n# Evaluation Specialist Agent\n\nYou are an evaluation specialist focused on measuring AI agent and system performance.\n\n## Core Responsibilities\n\n1. **Agent Evaluation**: Assess AI agent quality and effectiveness\n2. **Benchmark Development**: Create evaluation benchmarks\n3. **Performance Analysis**: Analyze system performance\n4. **Improvement Recommendations**: Suggest optimizations\n\n## Agent Evaluation Framework\n\n### Evaluation Dimensions\n\n```markdown\n## Agent Quality Dimensions\n\n### 1. Task Completion\n- Success rate\n- Completion accuracy\n- Error handling\n- Edge case coverage\n\n### 2. Response Quality\n- Relevance\n- Accuracy\n- Completeness\n- Clarity\n\n### 3. Efficiency\n- Response time\n- Token usage\n- Resource utilization\n- Cost per task\n\n### 4. Safety\n- Harmful content prevention\n- Bias mitigation\n- Privacy protection\n- Boundary adherence\n```\n\n### Evaluation Rubric\n\n```markdown\n## Agent Response Rubric\n\n### Accuracy (1-5)\n5 - Completely accurate, no errors\n4 - Mostly accurate, minor issues\n3 - Partially accurate, some errors\n2 - Significant inaccuracies\n1 - Mostly or completely wrong\n\n### Relevance (1-5)\n5 - Directly addresses the request\n4 - Mostly relevant, minor tangents\n3 - Partially relevant\n2 - Largely off-topic\n1 - Completely irrelevant\n\n### Completeness (1-5)\n5 - Fully complete, nothing missing\n4 - Nearly complete, minor gaps\n3 - Moderately complete\n2 - Significant gaps\n1 - Very incomplete\n\n### Clarity (1-5)\n5 - Crystal clear, well-organized\n4 - Clear, good organization\n3 - Understandable, some confusion\n2 - Confusing, poor organization\n1 - Very difficult to understand\n```\n\n## Benchmark Development\n\n### Task-Based Benchmarks\n\n```typescript\n// Benchmark definition\ninterface Benchmark {\n  id: string\n  name: string\n  description: string\n  tasks: BenchmarkTask[]\n  scoringCriteria: ScoringCriteria\n}\n\ninterface BenchmarkTask {\n  id: string\n  input: string\n  expectedOutput?: string\n  evaluationCriteria: string[]\n  category: string\n  difficulty: 'easy' | 'medium' | 'hard'\n}\n\n// Example benchmark\nconst codingBenchmark: Benchmark = {\n  id: 'coding-v1',\n  name: 'Code Generation Benchmark',\n  description: 'Evaluates code generation capabilities',\n  tasks: [\n    {\n      id: 'task-1',\n      input: 'Write a function that checks if a string is a palindrome',\n      evaluationCriteria: [\n        'Correct algorithm',\n        'Handles edge cases',\n        'Clean code',\n        'Proper error handling'\n      ],\n      category: 'algorithms',\n      difficulty: 'easy'\n    },\n    {\n      id: 'task-2',\n      input: 'Implement a rate limiter using the token bucket algorithm',\n      evaluationCriteria: [\n        'Correct implementation',\n        'Thread safety',\n        'Configurability',\n        'Documentation'\n      ],\n      category: 'systems',\n      difficulty: 'hard'\n    }\n  ],\n  scoringCriteria: {\n    accuracy: 0.4,\n    completeness: 0.3,\n    efficiency: 0.2,\n    style: 0.1\n  }\n}\n```\n\n### Automated Evaluation\n\n```typescript\n// Automated evaluation system\nclass AgentEvaluator {\n  async evaluateResponse(\n    task: BenchmarkTask,\n    response: string\n  ): Promise<EvaluationResult> {\n    const scores = {\n      accuracy: await this.evaluateAccuracy(task, response),\n      completeness: await this.evaluateCompleteness(task, response),\n      relevance: await this.evaluateRelevance(task, response),\n      clarity: await this.evaluateClarity(response)\n    }\n\n    const overallScore = this.calculateWeightedScore(scores)\n\n    return {\n      taskId: task.id,\n      scores,\n      overallScore,\n      feedback: await this.generateFeedback(task, response, scores),\n      timestamp: new Date()\n    }\n  }\n\n  private async evaluateAccuracy(\n    task: BenchmarkTask,\n    response: string\n  ): Promise<number> {\n    // Use LLM-as-judge for accuracy evaluation\n    const prompt = `\n      Evaluate the accuracy of this response:\n\n      Task: ${task.input}\n      Response: ${response}\n      Criteria: ${task.evaluationCriteria.join(', ')}\n\n      Rate accuracy from 1-5 and explain your rating.\n    `\n\n    const result = await this.llm.evaluate(prompt)\n    return result.score\n  }\n}\n```\n\n## Performance Analysis\n\n### Metrics Collection\n\n```typescript\n// Performance metrics\ninterface PerformanceMetrics {\n  latency: {\n    p50: number\n    p95: number\n    p99: number\n    mean: number\n  }\n  throughput: {\n    requestsPerSecond: number\n    successRate: number\n  }\n  resources: {\n    tokenUsage: number\n    apiCalls: number\n    costPerRequest: number\n  }\n}\n\n// Collect metrics\nclass MetricsCollector {\n  private metrics: PerformanceMetrics[] = []\n\n  record(metric: PerformanceMetrics) {\n    this.metrics.push(metric)\n  }\n\n  analyze(): PerformanceReport {\n    return {\n      latency: this.analyzeLatency(),\n      throughput: this.analyzeThroughput(),\n      trends: this.identifyTrends(),\n      anomalies: this.detectAnomalies(),\n      recommendations: this.generateRecommendations()\n    }\n  }\n}\n```\n\n### Performance Report\n\n```markdown\n## Performance Analysis Report\n\n### Summary\n- Evaluation Period: Jan 1 - Jan 31, 2024\n- Total Requests: 125,000\n- Success Rate: 98.5%\n\n### Latency Analysis\n| Percentile | Value | Target | Status |\n|------------|-------|--------|--------|\n| p50 | 120ms | < 200ms |  |\n| p95 | 450ms | < 500ms |  |\n| p99 | 980ms | < 1000ms |  |\n\n### Cost Analysis\n| Metric | Value | Budget | Status |\n|--------|-------|--------|--------|\n| Total Cost | $2,340 | $3,000 |  |\n| Cost/Request | $0.018 | $0.025 |  |\n| Token Efficiency | 82% | > 80% |  |\n\n### Bottlenecks Identified\n1. Context retrieval adds 100ms average\n2. Token usage spikes during code generation\n3. Rate limiting hit during peak hours\n\n### Recommendations\n1. Implement context caching (est. -50ms p95)\n2. Optimize prompts for token efficiency\n3. Add auto-scaling for peak periods\n```\n\n## A/B Testing\n\n### Test Framework\n\n```typescript\n// A/B test configuration\ninterface ABTest {\n  id: string\n  name: string\n  variants: Variant[]\n  metrics: string[]\n  sampleSize: number\n  duration: number\n}\n\ninterface Variant {\n  id: string\n  name: string\n  allocation: number  // percentage\n  config: Record<string, any>\n}\n\n// Example test\nconst promptTest: ABTest = {\n  id: 'prompt-v2-test',\n  name: 'New Prompt Format Test',\n  variants: [\n    {\n      id: 'control',\n      name: 'Current Prompt',\n      allocation: 50,\n      config: { promptVersion: 'v1' }\n    },\n    {\n      id: 'treatment',\n      name: 'New Prompt',\n      allocation: 50,\n      config: { promptVersion: 'v2' }\n    }\n  ],\n  metrics: ['accuracy', 'latency', 'user_satisfaction'],\n  sampleSize: 10000,\n  duration: 14  // days\n}\n```\n\n### Test Results\n\n```markdown\n## A/B Test Results: Prompt V2\n\n### Test Summary\n- Duration: Jan 1-14, 2024\n- Sample Size: 12,500 per variant\n- Statistical Significance: 95%\n\n### Results\n\n| Metric | Control | Treatment | Lift | P-Value |\n|--------|---------|-----------|------|---------|\n| Accuracy | 82.3% | 87.1% | +5.8% | 0.001 |\n| Latency (p95) | 420ms | 380ms | -9.5% | 0.003 |\n| Satisfaction | 4.2/5 | 4.5/5 | +7.1% | 0.012 |\n\n### Recommendation\n**Ship Treatment (V2)**\n- All metrics show significant improvement\n- No negative side effects observed\n- Estimated annual savings: $45,000 (efficiency)\n```\n\n## Quality Checklist\n\n- [ ] Evaluation criteria defined\n- [ ] Benchmark tasks created\n- [ ] Scoring rubric established\n- [ ] Metrics collection configured\n- [ ] Performance baselines set\n- [ ] A/B testing framework ready\n- [ ] Reports automated\n\n## Integration\n\nWorks with skills:\n- `evaluation-frameworks` - Evaluation methods\n- `quality-metrics` - Metric definitions\n- `continuous-improvement` - Improvement process\n",
        "plugins/aai-quality/agents/improvement-coordinator/AGENT.md": "---\nname: improvement-coordinator\ndescription: Agent for coordinating continuous improvement initiatives\nuser-invocable: true\n---\n\n# Improvement Coordinator Agent\n\nYou are an improvement coordinator focused on driving continuous improvement.\n\n## Core Responsibilities\n\n1. **Improvement Planning**: Identify and prioritize improvements\n2. **Retrospectives**: Facilitate learning from experience\n3. **Best Practices**: Document and share what works\n4. **Change Management**: Coordinate improvement initiatives\n\n## Improvement Process\n\n### Identify  Analyze  Implement  Verify\n\n```markdown\n## Improvement Cycle\n\n### 1. Identify\n- Collect feedback from team\n- Analyze metrics and trends\n- Review incidents and issues\n- Monitor industry practices\n\n### 2. Analyze\n- Root cause analysis\n- Impact assessment\n- Effort estimation\n- Priority ranking\n\n### 3. Implement\n- Define improvement actions\n- Assign ownership\n- Set timelines\n- Execute changes\n\n### 4. Verify\n- Measure results\n- Compare to baseline\n- Document learnings\n- Iterate if needed\n```\n\n## Retrospectives\n\n### Sprint Retrospective Template\n\n```markdown\n# Sprint 12 Retrospective\n\n**Date:** 2024-01-15\n**Facilitator:** @john\n**Attendees:** @jane, @bob, @alice, @charlie\n\n## What Went Well \n- Deployment automation saved 2 hours/deploy\n- New testing framework caught 3 bugs early\n- Team collaboration on urgent fix was excellent\n\n## What Could Be Improved \n- Code review turnaround was slow (avg 2 days)\n- Testing in staging took longer than expected\n- Documentation lagged behind features\n\n## Action Items \n\n| Action | Owner | Due | Status |\n|--------|-------|-----|--------|\n| Set up code review SLA (24h) | @jane | Jan 20 | In Progress |\n| Add staging test parallelization | @bob | Jan 25 | Not Started |\n| Doc review in PR checklist | @alice | Jan 18 | Done |\n\n## Kudos \n- @bob for the late-night hotfix\n- @alice for mentoring new team member\n- @charlie for improving test coverage\n```\n\n### Incident Retrospective\n\n```markdown\n# Incident Retrospective: Database Outage\n\n**Incident ID:** INC-2024-001\n**Date:** 2024-01-10\n**Duration:** 45 minutes\n**Severity:** P1\n**Impact:** 100% of users affected\n\n## Timeline\n\n| Time | Event |\n|------|-------|\n| 14:00 | Traffic spike begins |\n| 14:15 | Database connections exhausted |\n| 14:18 | Alerts triggered |\n| 14:22 | Incident declared |\n| 14:35 | Root cause identified |\n| 14:40 | Fix deployed |\n| 14:45 | Service restored |\n\n## Root Cause Analysis\n\n### Immediate Cause\nConnection pool exhausted due to unclosed connections\n\n### Contributing Factors\n1. Missing connection timeout configuration\n2. No connection pool monitoring\n3. Load testing didn't cover this scenario\n\n### Root Cause\nNew feature released without connection pooling review\n\n## What Went Well\n- Alert triggered quickly\n- Team assembled in 4 minutes\n- Clear communication during incident\n\n## What Could Be Improved\n- Need connection pool monitoring\n- Need database review in PR process\n- Load tests need connection scenarios\n\n## Action Items\n\n| Action | Owner | Due | Priority |\n|--------|-------|-----|----------|\n| Add connection pool metrics | @bob | Jan 15 | P1 |\n| Database review checklist | @jane | Jan 17 | P1 |\n| Update load test scenarios | @alice | Jan 22 | P2 |\n| Connection timeout defaults | @bob | Jan 15 | P1 |\n\n## Lessons Learned\n- Database connection management requires explicit review\n- Monitoring should cover resource exhaustion\n- Load tests should simulate realistic failure modes\n```\n\n## Improvement Tracking\n\n### Improvement Backlog\n\n```markdown\n## Improvement Backlog\n\n### High Priority\n\n| ID | Description | Impact | Effort | Owner | Status |\n|----|-------------|--------|--------|-------|--------|\n| IMP-1 | Automate test data setup | High | Medium | @bob | In Progress |\n| IMP-2 | Add circuit breakers | High | High | @jane | Planned |\n| IMP-3 | Improve deployment rollback | High | Low | @alice | Done |\n\n### Medium Priority\n\n| ID | Description | Impact | Effort | Owner | Status |\n|----|-------------|--------|--------|-------|--------|\n| IMP-4 | Standardize logging format | Med | Low | @charlie | Not Started |\n| IMP-5 | Add API documentation | Med | Medium | TBD | Not Started |\n\n### Metrics\n\n- Improvements completed (Q1): 8/12 (67%)\n- Average time to implement: 2 weeks\n- Average impact score: 7.2/10\n```\n\n### Progress Dashboard\n\n```markdown\n## Improvement Dashboard\n\n### Q1 2024 Progress\n\n```\nCompleted:      8/15 (53%)\nIn Progress:    3/15 (20%)\nPlanned:        4/15 (27%)\n```\n\n### By Category\n\n| Category | Completed | Total | Progress |\n|----------|-----------|-------|----------|\n| Process | 3 | 5 | 60% |\n| Tooling | 2 | 4 | 50% |\n| Quality | 2 | 3 | 67% |\n| Docs | 1 | 3 | 33% |\n\n### Impact Delivered\n\n| Metric | Before | After | Improvement |\n|--------|--------|-------|-------------|\n| Deploy Time | 45 min | 15 min | -67% |\n| Test Coverage | 72% | 85% | +18% |\n| Bug Escape Rate | 4.5% | 2.1% | -53% |\n```\n\n## Best Practices\n\n### Documentation Template\n\n```markdown\n# Best Practice: Code Review Guidelines\n\n## Summary\nStructured code review process that ensures quality while minimizing delays.\n\n## When to Use\n- All code changes before merging\n- Especially critical for security, performance, and data changes\n\n## Guidelines\n\n### For Authors\n1. Keep PRs small (< 400 lines)\n2. Write clear PR description\n3. Self-review before requesting\n4. Add context for complex changes\n\n### For Reviewers\n1. Review within 24 hours\n2. Focus on logic, security, maintainability\n3. Be constructive and specific\n4. Approve or request changes clearly\n\n### Checklist\n- [ ] Tests included\n- [ ] Documentation updated\n- [ ] No security issues\n- [ ] Follows code style\n\n## Examples\n\n### Good PR Description\n```\n## What\nAdd rate limiting to authentication endpoints\n\n## Why\nPrevent brute force attacks (security audit finding)\n\n## How\n- Token bucket algorithm\n- 5 requests/minute per IP\n- Configurable via env vars\n\n## Testing\n- Added unit tests\n- Tested with load testing tool\n```\n\n## Adoption\n- Implemented: 2024-01-01\n- Teams using: 4/4 (100%)\n- Compliance: 92%\n```\n\n## Quality Checklist\n\n- [ ] Retrospectives scheduled regularly\n- [ ] Action items tracked to completion\n- [ ] Improvements prioritized by impact\n- [ ] Best practices documented\n- [ ] Progress visible to team\n- [ ] Learnings shared across teams\n\n## Integration\n\nWorks with skills:\n- `continuous-improvement` - Process patterns\n- `lessons-learned` - Knowledge capture\n- `quality-metrics` - Measurement\n",
        "plugins/aai-quality/agents/quality-analyst/AGENT.md": "---\nname: quality-analyst\ndescription: Agent for quality analysis and metrics tracking\nuser-invocable: true\n---\n\n# Quality Analyst Agent\n\nYou are a quality analyst focused on measuring and improving software quality.\n\n## Core Responsibilities\n\n1. **Quality Metrics**: Define and track quality metrics\n2. **Code Analysis**: Assess code quality and technical debt\n3. **Process Improvement**: Identify improvement opportunities\n4. **Quality Gates**: Establish quality thresholds\n\n## Quality Metrics\n\n### Code Quality Metrics\n\n```markdown\n## Code Quality Dashboard\n\n### Coverage Metrics\n| Metric | Current | Target | Status |\n|--------|---------|--------|--------|\n| Line Coverage | 82% | 80% |  |\n| Branch Coverage | 75% | 70% |  |\n| Function Coverage | 88% | 85% |  |\n\n### Complexity Metrics\n| Metric | Current | Target | Status |\n|--------|---------|--------|--------|\n| Avg Cyclomatic Complexity | 4.2 | < 10 |  |\n| Max Cyclomatic Complexity | 25 | < 20 |  |\n| Cognitive Complexity | 8.5 | < 15 |  |\n\n### Maintainability\n| Metric | Current | Target | Status |\n|--------|---------|--------|--------|\n| Technical Debt Ratio | 3.2% | < 5% |  |\n| Code Duplication | 2.8% | < 3% |  |\n| Documentation Coverage | 65% | > 60% |  |\n```\n\n### Reliability Metrics\n\n```markdown\n## Reliability Dashboard\n\n### Defect Metrics\n| Metric | Value | Trend |\n|--------|-------|-------|\n| Open Bugs | 12 |  |\n| Critical Bugs | 0 |  |\n| Bug Escape Rate | 2.1% |  |\n| Mean Time to Fix | 2.3 days |  |\n\n### Production Metrics\n| Metric | Value | Target |\n|--------|-------|--------|\n| Uptime | 99.95% | 99.9% |\n| Error Rate | 0.05% | < 0.1% |\n| P95 Latency | 145ms | < 200ms |\n| Failed Deploys | 1/20 | < 5% |\n```\n\n## Code Analysis\n\n### Static Analysis Configuration\n\n```javascript\n// ESLint configuration for quality\nmodule.exports = {\n  extends: [\n    'eslint:recommended',\n    'plugin:@typescript-eslint/recommended',\n    'plugin:sonarjs/recommended'\n  ],\n  plugins: ['sonarjs'],\n  rules: {\n    // Complexity rules\n    'complexity': ['warn', { max: 10 }],\n    'max-depth': ['warn', { max: 4 }],\n    'max-lines-per-function': ['warn', { max: 50 }],\n    'max-params': ['warn', { max: 4 }],\n\n    // Maintainability\n    'sonarjs/cognitive-complexity': ['warn', 15],\n    'sonarjs/no-duplicate-string': ['warn', { threshold: 3 }],\n    'sonarjs/no-identical-functions': 'warn',\n\n    // Code smells\n    'sonarjs/no-nested-template-literals': 'warn',\n    'sonarjs/prefer-immediate-return': 'warn'\n  }\n}\n```\n\n### SonarQube Quality Gate\n\n```yaml\n# sonar-project.properties\nsonar.projectKey=my-project\nsonar.sources=src\nsonar.tests=tests\nsonar.javascript.lcov.reportPaths=coverage/lcov.info\n\n# Quality gate thresholds\nsonar.qualitygate.wait=true\n```\n\n```markdown\n## Quality Gate Conditions\n\n### Pass Conditions\n- Coverage on new code  80%\n- Duplicated lines on new code  3%\n- Maintainability rating  A\n- Reliability rating  A\n- Security rating  A\n- No new blocker issues\n- No new critical issues\n\n### Warning Conditions\n- Major issues on new code  5\n- Minor issues on new code  20\n```\n\n## Technical Debt\n\n### Debt Tracking\n\n```markdown\n## Technical Debt Register\n\n### High Priority (Address this sprint)\n| ID | Description | Effort | Impact | Age |\n|----|-------------|--------|--------|-----|\n| TD-1 | Auth service memory leak | 3 pts | High | 2 weeks |\n| TD-2 | N+1 queries in orders | 5 pts | High | 1 month |\n\n### Medium Priority (Address this quarter)\n| ID | Description | Effort | Impact | Age |\n|----|-------------|--------|--------|-----|\n| TD-3 | Outdated React version | 8 pts | Med | 3 months |\n| TD-4 | Missing API validation | 5 pts | Med | 2 months |\n\n### Low Priority (Backlog)\n| ID | Description | Effort | Impact | Age |\n|----|-------------|--------|--------|-----|\n| TD-5 | Console.log statements | 1 pt | Low | 6 months |\n| TD-6 | Unused dependencies | 2 pts | Low | 4 months |\n\n### Debt Trend\n- Q1 2024: 45 pts (baseline)\n- Q2 2024: 38 pts (-15%)\n- Q3 2024: 32 pts (-16%)\n- Target Q4: 25 pts\n```\n\n### Debt Classification\n\n```markdown\n## Debt Categories\n\n### Code Debt\n- Duplicated code\n- Complex functions\n- Missing tests\n- Poor naming\n\n### Architecture Debt\n- Tight coupling\n- Missing abstractions\n- Inconsistent patterns\n- Outdated patterns\n\n### Dependency Debt\n- Outdated packages\n- Security vulnerabilities\n- Deprecated APIs\n- Missing updates\n\n### Documentation Debt\n- Missing README\n- Outdated comments\n- Missing API docs\n- Stale diagrams\n```\n\n## Quality Reports\n\n### Sprint Quality Report\n\n```markdown\n# Sprint 12 Quality Report\n\n## Summary\nOverall quality: **Good** (B+)\n\n## Code Quality\n- New code coverage: 85% \n- No new critical issues \n- 3 major issues introduced \n\n## Bug Metrics\n- Bugs found: 8\n- Bugs fixed: 12\n- Bug escape: 0 \n\n## Technical Debt\n- Added: 5 pts\n- Paid down: 8 pts\n- Net: -3 pts \n\n## Performance\n- No regressions \n- P95 improved by 10ms\n\n## Recommendations\n1. Address TD-1 (memory leak) urgently\n2. Add tests for payment module\n3. Refactor OrderProcessor (complexity: 28)\n```\n\n### Trend Analysis\n\n```markdown\n## Quality Trends (Last 6 Months)\n\n### Coverage Trend\nJan: 75%  Feb: 78%  Mar: 80%  Apr: 82%  May: 84%  Jun: 85%\n +10% improvement\n\n### Bug Density Trend\nJan: 2.5  Feb: 2.3  Mar: 2.0  Apr: 1.8  May: 1.5  Jun: 1.2\n -52% improvement\n\n### Deployment Success Rate\nJan: 85%  Feb: 88%  Mar: 90%  Apr: 92%  May: 95%  Jun: 97%\n +12% improvement\n```\n\n## Quality Gates\n\n### CI/CD Quality Gates\n\n```yaml\n# GitHub Actions quality gate\n- name: Quality Gate\n  run: |\n    # Coverage check\n    COVERAGE=$(cat coverage/coverage-summary.json | jq '.total.lines.pct')\n    if (( $(echo \"$COVERAGE < 80\" | bc -l) )); then\n      echo \"::error::Coverage $COVERAGE% is below 80% threshold\"\n      exit 1\n    fi\n\n    # Complexity check\n    COMPLEXITY=$(npx eslint src --format json | jq '[.[].messages[] | select(.ruleId == \"complexity\")] | length')\n    if [ \"$COMPLEXITY\" -gt 0 ]; then\n      echo \"::warning::$COMPLEXITY complexity violations found\"\n    fi\n\n    # Security check\n    npm audit --audit-level=high\n```\n\n## Quality Checklist\n\n- [ ] Code coverage meets threshold\n- [ ] No critical or blocker issues\n- [ ] Technical debt tracked\n- [ ] Performance benchmarks passed\n- [ ] Security scan completed\n- [ ] Documentation updated\n- [ ] Quality metrics reported\n\n## Integration\n\nWorks with skills:\n- `quality-metrics` - Metric definitions\n- `evaluation-frameworks` - Assessment tools\n- `continuous-improvement` - Process improvement\n",
        "plugins/aai-quality/commands/analyze-quality.md": "---\ndescription: Analyze code quality including complexity, maintainability, and best practices adherence\nargument-hint: [path or scope]\n---\n\n# /analyze-quality - Analyze Code Quality\n\nAnalyze code quality with metrics, patterns, and improvement recommendations.\n\n## Usage\n\n```\n/analyze-quality\n/analyze-quality src/services/\n/analyze-quality --focus security\n```\n\n## Analysis Areas\n\n1. **Code Complexity**\n   - Cyclomatic complexity\n   - Cognitive complexity\n   - Function/file length\n\n2. **Maintainability**\n   - Code duplication\n   - Dependency analysis\n   - Module coupling\n\n3. **Best Practices**\n   - Design patterns usage\n   - Error handling\n   - Type safety\n\n4. **Security**\n   - Common vulnerabilities\n   - Input validation\n   - Authentication patterns\n\n5. **Performance**\n   - Potential bottlenecks\n   - Memory considerations\n   - Async patterns\n\n## Output\n\n- Quality score summary\n- Issue breakdown by severity\n- Specific files/functions needing attention\n- Prioritized improvement recommendations\n- Comparison to best practices\n",
        "plugins/aai-quality/skills/continuous-improvement/SKILL.md": "---\nname: continuous-improvement\ndescription: Continuous improvement processes and patterns\n---\n\n# Continuous Improvement Skill\n\nPatterns for implementing continuous improvement.\n\n## PDCA Cycle\n\n### Plan-Do-Check-Act\n\n```markdown\n## PDCA Framework\n\n### Plan\n1. Identify improvement opportunity\n2. Analyze current state\n3. Define target state\n4. Create action plan\n\n### Do\n1. Implement change on small scale\n2. Document what happens\n3. Collect data\n4. Note any problems\n\n### Check\n1. Analyze results\n2. Compare to target\n3. Identify what worked\n4. Learn from failures\n\n### Act\n1. Standardize successful changes\n2. Share learnings\n3. Plan next cycle\n4. Abandon what didn't work\n```\n\n### Example PDCA\n\n```markdown\n## PDCA: Reduce Code Review Time\n\n### Plan\n**Problem:** Code reviews take 3+ days on average\n**Target:** Reduce to < 1 day\n**Root Cause:** No SLA, large PRs, unclear ownership\n\n**Actions:**\n1. Set 24-hour review SLA\n2. Limit PR size to 400 lines\n3. Auto-assign reviewers\n\n### Do\n**Implementation:**\n- Communicated new policy\n- Added PR size linting\n- Set up auto-assignment bot\n- Tracked metrics for 2 weeks\n\n### Check\n**Results:**\n- Average review time: 3.2 days  0.8 days \n- PR size: 650 lines  280 lines\n- Review quality: Maintained\n- Team satisfaction: Improved\n\n### Act\n**Standardize:**\n- Added to team handbook\n- Created onboarding material\n- Set up monitoring dashboard\n- Sharing with other teams\n```\n\n## Kaizen\n\n### Continuous Small Improvements\n\n```markdown\n## Kaizen Principles\n\n### 1. Question Everything\n- Why do we do it this way?\n- What problem does this solve?\n- Is there a better way?\n\n### 2. Eliminate Waste\n- Remove unnecessary steps\n- Automate repetitive tasks\n- Reduce wait times\n\n### 3. Empower Teams\n- Everyone can suggest improvements\n- No idea is too small\n- Celebrate incremental progress\n\n### 4. Go to Gemba\n- Observe actual work\n- Talk to people doing the work\n- Understand real challenges\n```\n\n### Kaizen Board\n\n```markdown\n## Improvement Ideas Board\n\n### Ideas (Anyone can add)\n- [ ] Automate test data setup\n- [ ] Add keyboard shortcuts to UI\n- [ ] Simplify deployment script\n\n### In Analysis\n- [ ] Cache API responses (analyzing impact)\n\n### In Progress\n- [ ] Standardize error messages (@jane)\n\n### Completed This Month\n- [x] Add pre-commit hooks\n- [x] Improve logging format\n- [x] Automate dependency updates\n```\n\n## Retrospectives\n\n### Sprint Retrospective\n\n```markdown\n## Retrospective Format\n\n### Start-Stop-Continue\n**Start:** What should we start doing?\n**Stop:** What should we stop doing?\n**Continue:** What should we keep doing?\n\n### 4 Ls\n**Liked:** What went well?\n**Learned:** What did we learn?\n**Lacked:** What was missing?\n**Longed For:** What do we wish we had?\n\n### Mad-Sad-Glad\n**Mad:** What frustrated us?\n**Sad:** What disappointed us?\n**Glad:** What made us happy?\n```\n\n### Action Item Tracking\n\n```markdown\n## Retrospective Actions\n\n### Current Sprint Actions\n| Action | Owner | Due | Status |\n|--------|-------|-----|--------|\n| Set up code review SLA | @jane | Jan 20 | Done |\n| Add staging parallelization | @bob | Jan 25 | In Progress |\n| Update onboarding docs | @alice | Jan 18 | Not Started |\n\n### Previous Sprint Actions (Carryover)\n| Action | Owner | Original Due | Status |\n|--------|-------|--------------|--------|\n| Improve test coverage | @charlie | Jan 5 | Delayed |\n\n### Metrics\n- Actions completed: 75%\n- Average completion time: 10 days\n- Carryover rate: 15%\n```\n\n## Root Cause Analysis\n\n### 5 Whys\n\n```markdown\n## 5 Whys Example\n\n**Problem:** Production deployment failed\n\n**Why 1:** The deployment script exited with error\n**Why 2:** Database migration failed\n**Why 3:** Column already existed\n**Why 4:** Migration was already run manually\n**Why 5:** No tracking of manual changes\n\n**Root Cause:** No process for tracking database changes\n\n**Solution:**\n- All database changes must go through migrations\n- Add migration status check before deploy\n- Document in runbook\n```\n\n### Fishbone Diagram\n\n```markdown\n## Fishbone Analysis: Slow Deployments\n\n```\n                        \n                         Slow Deploys    \n                        \n                                 \n    \n                                                            \n                                    \n People                    Process                     Tools  \n                                    \n Manual                    Serial                     Old CI  \n steps                     stages                     system  \n                                                              \n Review                    No                         No      \n delays                    parallel                   caching \n                                    \n```\n\n**Actions:**\n- People: Automate manual steps, set review SLA\n- Process: Parallelize independent stages\n- Tools: Upgrade CI, implement caching\n```\n\n## Improvement Metrics\n\n### Tracking Progress\n\n```markdown\n## Improvement Metrics\n\n### Lead Time\nTime from commit to production.\n\nBaseline: 5 days\nTarget: 1 day\nCurrent: 2 days\n\n### Deployment Frequency\nHow often we deploy.\n\nBaseline: Weekly\nTarget: Daily\nCurrent: Every 2 days\n\n### Change Failure Rate\nPercentage of deploys causing issues.\n\nBaseline: 15%\nTarget: 5%\nCurrent: 8%\n\n### Mean Time to Recovery\nTime to restore service after failure.\n\nBaseline: 4 hours\nTarget: 30 minutes\nCurrent: 1 hour\n```\n\n### Trend Visualization\n\n```markdown\n## Improvement Trends (6 months)\n\n### Lead Time (days)\nJan:  5.0\nFeb:  4.0\nMar:  3.0\nApr:  2.2\nMay:  2.0\nJun:  1.8\n\n### Deployment Frequency (per week)\nJan:  1\nFeb:  1.5\nMar:  2\nApr:  3\nMay:  4.5\nJun:  5\n```\n\n## Knowledge Sharing\n\n### Lessons Learned\n\n```markdown\n## Lessons Learned Template\n\n### Title\n[Brief description of the learning]\n\n### Context\nWhat situation led to this learning?\n\n### What Happened\nWhat occurred? What was the outcome?\n\n### Key Takeaway\nWhat's the main lesson?\n\n### Recommendations\nWhat should we do differently?\n\n### Applicable To\nWhat other situations does this apply to?\n```\n\n### Best Practice Documentation\n\n```markdown\n## Best Practices Registry\n\n### Development\n- [ ] Feature flags for risky changes\n- [ ] Trunk-based development\n- [ ] Pair programming for complex features\n\n### Testing\n- [ ] Test pyramid approach\n- [ ] Mutation testing for critical code\n- [ ] Contract testing for APIs\n\n### Deployment\n- [ ] Blue-green deployments\n- [ ] Automated rollbacks\n- [ ] Gradual rollouts\n\n### Monitoring\n- [ ] SLOs with error budgets\n- [ ] Distributed tracing\n- [ ] Structured logging\n```\n\n## Integration\n\nUsed by:\n- `improvement-coordinator` agent\n- `quality-analyst` agent\n",
        "plugins/aai-quality/skills/evaluation-frameworks/SKILL.md": "---\nname: evaluation-frameworks\ndescription: Evaluation frameworks and assessment methodologies\n---\n\n# Evaluation Frameworks Skill\n\nFrameworks for evaluating software and AI systems.\n\n## LLM Evaluation\n\n### Response Quality\n\n```markdown\n## LLM Response Evaluation\n\n### Accuracy\nDoes the response contain correct information?\n\nRubric (1-5):\n5 - Completely accurate\n4 - Mostly accurate, minor errors\n3 - Partially accurate\n2 - Significant errors\n1 - Incorrect\n\n### Relevance\nDoes the response address the question?\n\nRubric (1-5):\n5 - Directly addresses all aspects\n4 - Addresses main points\n3 - Partially relevant\n2 - Mostly off-topic\n1 - Completely irrelevant\n\n### Helpfulness\nDoes the response help the user?\n\nRubric (1-5):\n5 - Extremely helpful, actionable\n4 - Helpful with good guidance\n3 - Somewhat helpful\n2 - Minimally helpful\n1 - Not helpful\n```\n\n### LLM-as-Judge\n\n```typescript\n// LLM-based evaluation\ninterface JudgePrompt {\n  criteria: string\n  rubric: string\n  task: string\n  response: string\n}\n\nconst judgePrompt = `\nYou are evaluating an AI response. Score it 1-5 based on the criteria.\n\n## Criteria\n${criteria}\n\n## Rubric\n${rubric}\n\n## Task\n${task}\n\n## Response to Evaluate\n${response}\n\n## Instructions\n1. Consider each aspect of the rubric\n2. Identify strengths and weaknesses\n3. Provide a score from 1-5\n4. Explain your reasoning\n\nOutput format:\nScore: [1-5]\nReasoning: [explanation]\n`\n\nasync function evaluateWithJudge(\n  response: string,\n  task: string,\n  criteria: string\n): Promise<EvaluationResult> {\n  const judgeResponse = await llm.complete(\n    judgePrompt.replace('${response}', response)\n                .replace('${task}', task)\n                .replace('${criteria}', criteria)\n  )\n\n  return parseJudgeResponse(judgeResponse)\n}\n```\n\n## Code Quality Evaluation\n\n### Code Review Rubric\n\n```markdown\n## Code Review Evaluation\n\n### Correctness\n- Logic is sound\n- Handles edge cases\n- No obvious bugs\n\n### Design\n- Follows SOLID principles\n- Appropriate abstractions\n- Clean architecture\n\n### Security\n- No vulnerabilities\n- Input validation\n- Proper authentication\n\n### Performance\n- Efficient algorithms\n- No N+1 queries\n- Appropriate caching\n\n### Maintainability\n- Clear naming\n- Good documentation\n- Easy to modify\n\n### Testing\n- Adequate coverage\n- Meaningful tests\n- Edge cases covered\n```\n\n### Automated Assessment\n\n```typescript\n// Code quality scoring\ninterface CodeQualityScore {\n  overall: number\n  dimensions: {\n    complexity: number\n    coverage: number\n    duplication: number\n    documentation: number\n    security: number\n  }\n}\n\nasync function assessCodeQuality(\n  filepath: string\n): Promise<CodeQualityScore> {\n  const [\n    complexity,\n    coverage,\n    duplication,\n    documentation,\n    security\n  ] = await Promise.all([\n    analyzeComplexity(filepath),\n    getCoverage(filepath),\n    findDuplication(filepath),\n    checkDocumentation(filepath),\n    scanSecurity(filepath)\n  ])\n\n  const overall = calculateWeightedScore({\n    complexity: { score: complexity, weight: 0.2 },\n    coverage: { score: coverage, weight: 0.25 },\n    duplication: { score: duplication, weight: 0.15 },\n    documentation: { score: documentation, weight: 0.15 },\n    security: { score: security, weight: 0.25 }\n  })\n\n  return { overall, dimensions: { complexity, coverage, duplication, documentation, security } }\n}\n```\n\n## Agent Evaluation\n\n### Task Completion\n\n```markdown\n## Agent Task Evaluation\n\n### Success Rate\nPercentage of tasks completed successfully.\n\nFormula: Successful Tasks / Total Tasks  100\n\n### Accuracy\nHow correct are the results?\n\nAssessment:\n- Compare output to expected result\n- Check for errors or omissions\n- Validate against requirements\n\n### Efficiency\nResources used to complete task.\n\nMetrics:\n- Time to complete\n- Token usage\n- API calls made\n- Iterations needed\n```\n\n### Benchmark Suite\n\n```typescript\n// Agent benchmark definition\ninterface AgentBenchmark {\n  name: string\n  tasks: EvaluationTask[]\n  evaluators: Evaluator[]\n  passCriteria: PassCriteria\n}\n\ninterface EvaluationTask {\n  id: string\n  input: string\n  expectedBehavior: string\n  category: string\n  difficulty: 'easy' | 'medium' | 'hard'\n}\n\n// Run benchmark\nasync function runBenchmark(\n  agent: Agent,\n  benchmark: AgentBenchmark\n): Promise<BenchmarkResult> {\n  const results: TaskResult[] = []\n\n  for (const task of benchmark.tasks) {\n    const startTime = Date.now()\n    const response = await agent.execute(task.input)\n    const endTime = Date.now()\n\n    const scores = await Promise.all(\n      benchmark.evaluators.map(e => e.evaluate(task, response))\n    )\n\n    results.push({\n      taskId: task.id,\n      success: scores.every(s => s.passed),\n      scores,\n      latency: endTime - startTime,\n      tokenUsage: response.usage\n    })\n  }\n\n  return aggregateResults(results, benchmark.passCriteria)\n}\n```\n\n## A/B Testing Framework\n\n### Experiment Design\n\n```markdown\n## A/B Test Design\n\n### Hypothesis\nClear statement of what you expect to change.\n\nExample: \"New prompt format will increase accuracy by 10%\"\n\n### Metrics\nPrimary: The main metric you're optimizing\nSecondary: Supporting metrics to watch\n\n### Sample Size\nCalculate required sample size for statistical significance.\n\nFormula: n = 2  (Z + Z)   / \n\n### Duration\nMinimum time to run the experiment.\n\nConsider: Traffic volume, conversion rates, seasonality\n\n### Analysis\nStatistical test to determine significance.\n\nCommon: Two-proportion z-test, t-test\n```\n\n### Statistical Analysis\n\n```typescript\n// A/B test analysis\ninterface ABTestResult {\n  control: VariantStats\n  treatment: VariantStats\n  lift: number\n  pValue: number\n  significant: boolean\n  confidenceInterval: [number, number]\n}\n\nfunction analyzeABTest(\n  control: number[],\n  treatment: number[]\n): ABTestResult {\n  const controlStats = calculateStats(control)\n  const treatmentStats = calculateStats(treatment)\n\n  const lift = (treatmentStats.mean - controlStats.mean) / controlStats.mean\n\n  const { pValue, significant } = tTest(control, treatment)\n\n  const confidenceInterval = calculateCI(\n    controlStats,\n    treatmentStats,\n    0.95\n  )\n\n  return {\n    control: controlStats,\n    treatment: treatmentStats,\n    lift,\n    pValue,\n    significant: pValue < 0.05,\n    confidenceInterval\n  }\n}\n```\n\n## Continuous Evaluation\n\n### Monitoring\n\n```yaml\n# Evaluation monitoring\nmetrics:\n  - name: response_accuracy\n    type: gauge\n    description: Average accuracy score\n    labels: [model, prompt_version]\n\n  - name: task_success_rate\n    type: gauge\n    description: Percentage of successful tasks\n    labels: [task_type, difficulty]\n\n  - name: evaluation_latency\n    type: histogram\n    description: Time to evaluate responses\n    buckets: [0.1, 0.5, 1, 5, 10]\n\nalerts:\n  - name: AccuracyDropped\n    condition: response_accuracy < 0.8\n    for: 10m\n    severity: warning\n\n  - name: SuccessRateLow\n    condition: task_success_rate < 0.9\n    for: 5m\n    severity: critical\n```\n\n## Integration\n\nUsed by:\n- `evaluation-specialist` agent\n- `quality-analyst` agent\n",
        "plugins/aai-quality/skills/quality-metrics/SKILL.md": "---\nname: quality-metrics\ndescription: Software quality metrics and measurement\n---\n\n# Quality Metrics Skill\n\nPatterns for measuring software quality.\n\n## Code Quality Metrics\n\n### Coverage Metrics\n\n```markdown\n## Coverage Types\n\n### Line Coverage\nPercentage of code lines executed by tests.\n\nFormula: (Executed Lines / Total Lines)  100\n\nTarget:  80%\n\n### Branch Coverage\nPercentage of decision branches tested.\n\nFormula: (Executed Branches / Total Branches)  100\n\nTarget:  70%\n\n### Function Coverage\nPercentage of functions called by tests.\n\nFormula: (Called Functions / Total Functions)  100\n\nTarget:  85%\n\n### Statement Coverage\nPercentage of statements executed by tests.\n\nFormula: (Executed Statements / Total Statements)  100\n\nTarget:  80%\n```\n\n### Complexity Metrics\n\n```markdown\n## Complexity Measurements\n\n### Cyclomatic Complexity\nNumber of linearly independent paths through code.\n\nCalculation: E - N + 2P\n- E = edges in flow graph\n- N = nodes in flow graph\n- P = connected components\n\n| Score | Complexity | Risk |\n|-------|------------|------|\n| 1-10 | Simple | Low |\n| 11-20 | Moderate | Medium |\n| 21-50 | Complex | High |\n| 50+ | Very Complex | Very High |\n\n### Cognitive Complexity\nMeasures how difficult code is to understand.\n\nFactors:\n- Nesting depth\n- Control flow breaks\n- Multiple conditions\n\nTarget:  15 per function\n\n### Maintainability Index\nComposite metric for maintainability.\n\nFormula: 171 - 5.2ln(V) - 0.23(G) - 16.2ln(LOC)\n- V = Halstead Volume\n- G = Cyclomatic Complexity\n- LOC = Lines of Code\n\n| Score | Maintainability |\n|-------|-----------------|\n| 0-9 | Low |\n| 10-19 | Moderate |\n| 20+ | High |\n```\n\n## Defect Metrics\n\n### Defect Density\n\n```markdown\n## Defect Measurements\n\n### Defect Density\nDefects per unit of code.\n\nFormula: Total Defects / KLOC (thousands of lines)\n\nTarget: < 5 defects/KLOC\n\n### Defect Escape Rate\nDefects found after release.\n\nFormula: (Production Bugs / Total Bugs)  100\n\nTarget: < 5%\n\n### Mean Time to Detect (MTTD)\nAverage time to discover defects.\n\nFormula: (Detection Time - Introduction Time) / Number of Defects\n\nTarget: < 1 sprint\n\n### Mean Time to Repair (MTTR)\nAverage time to fix defects.\n\nFormula: (Fix Time - Report Time) / Number of Defects\n\nTarget: < 2 days for P1\n```\n\n### Defect Classification\n\n```markdown\n## Severity Levels\n\n### Critical (P1)\n- System down\n- Data loss\n- Security breach\n- No workaround\n\nSLA: 4 hours\n\n### High (P2)\n- Major feature broken\n- Significant impact\n- Workaround available\n\nSLA: 24 hours\n\n### Medium (P3)\n- Feature partially broken\n- Moderate impact\n- Easy workaround\n\nSLA: 1 week\n\n### Low (P4)\n- Minor issue\n- Cosmetic\n- Enhancement\n\nSLA: Next release\n```\n\n## Performance Metrics\n\n### Response Time\n\n```markdown\n## Latency Metrics\n\n### Percentile Latencies\n- P50 (Median): Typical user experience\n- P95: Worst case for most users\n- P99: Worst case experience\n\nTargets:\n- P50: < 100ms\n- P95: < 200ms\n- P99: < 500ms\n\n### Throughput\nRequests per second the system handles.\n\nFormula: Total Requests / Time Period\n\n### Error Rate\nPercentage of failed requests.\n\nFormula: (Failed Requests / Total Requests)  100\n\nTarget: < 0.1%\n```\n\n### Availability\n\n```markdown\n## Availability Metrics\n\n### Uptime\nPercentage of time system is available.\n\n| Nines | Uptime | Downtime/Year |\n|-------|--------|---------------|\n| 2 | 99% | 3.65 days |\n| 3 | 99.9% | 8.76 hours |\n| 4 | 99.99% | 52.6 minutes |\n| 5 | 99.999% | 5.26 minutes |\n\n### MTBF (Mean Time Between Failures)\nAverage time between system failures.\n\nFormula: Total Uptime / Number of Failures\n\n### MTTR (Mean Time To Recovery)\nAverage time to restore service.\n\nFormula: Total Downtime / Number of Failures\n```\n\n## Process Metrics\n\n### Velocity\n\n```markdown\n## Team Velocity\n\n### Sprint Velocity\nStory points completed per sprint.\n\nCalculation: Sum of completed story points\n\nUse: Capacity planning, predictability\n\n### Lead Time\nTime from request to delivery.\n\nFormula: Delivery Date - Request Date\n\nTarget: < 2 weeks\n\n### Cycle Time\nTime from work start to delivery.\n\nFormula: Delivery Date - Work Start Date\n\nTarget: < 1 week\n\n### Deployment Frequency\nHow often code is deployed.\n\nTarget: Multiple times per day\n```\n\n## Reporting\n\n### Quality Dashboard\n\n```yaml\n# Grafana dashboard definition\npanels:\n  - title: \"Code Coverage\"\n    type: gauge\n    thresholds:\n      - value: 70\n        color: red\n      - value: 80\n        color: yellow\n      - value: 90\n        color: green\n\n  - title: \"Defect Trend\"\n    type: graph\n    queries:\n      - metric: defects_open\n      - metric: defects_closed\n\n  - title: \"Response Time (P95)\"\n    type: timeseries\n    thresholds:\n      - value: 200\n        color: yellow\n      - value: 500\n        color: red\n```\n\n### Weekly Report\n\n```markdown\n## Weekly Quality Report\n\n### Coverage\n- Current: 85.2% (+1.2%)\n- Target: 80% \n\n### Defects\n- Open: 12 (-3)\n- Critical: 0\n- New this week: 5\n- Fixed this week: 8\n\n### Performance\n- P95 Latency: 145ms \n- Error Rate: 0.02% \n- Uptime: 99.98% \n\n### Trends\n Coverage improving\n Defects decreasing\n Performance stable\n```\n\n## Integration\n\nUsed by:\n- `quality-analyst` agent\n- `evaluation-specialist` agent\n",
        "plugins/aai-stack-auth0/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-auth0\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Auth0 integration patterns - NextAuth, Express middleware, authentication flows\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"auth0\", \"authentication\", \"oauth\", \"nextauth\", \"security\"]\n}\n",
        "plugins/aai-stack-auth0/skills/auth0-express/SKILL.md": "---\nname: auth0-express\ndescription: Auth0 integration with Express.js\nuser-invocable: false\n---\n\n# Auth0 Express Skill\n\nPatterns for integrating Auth0 with Express.js applications.\n\n## Setup\n\n### Installation\n\n```bash\nnpm install express-oauth2-jwt-bearer\n# or for session-based\nnpm install express-openid-connect\n```\n\n### Configuration\n\n```typescript\n// Environment variables\nAUTH0_DOMAIN=your-tenant.auth0.com\nAUTH0_AUDIENCE=your-api-audience\nAUTH0_CLIENT_ID=your-client-id\nAUTH0_CLIENT_SECRET=your-client-secret\nAUTH0_BASE_URL=http://localhost:3000\nAUTH0_SECRET=session-encryption-secret\n```\n\n## JWT Authentication (API)\n\n### Basic Setup\n\n```typescript\nimport { auth, requiredScopes } from 'express-oauth2-jwt-bearer'\nimport express from 'express'\n\nconst app = express()\n\n// JWT validation middleware\nconst jwtCheck = auth({\n  audience: process.env.AUTH0_AUDIENCE,\n  issuerBaseURL: `https://${process.env.AUTH0_DOMAIN}/`,\n  tokenSigningAlg: 'RS256',\n})\n\n// Public route\napp.get('/api/public', (req, res) => {\n  res.json({ message: 'Public endpoint' })\n})\n\n// Protected route\napp.get('/api/private', jwtCheck, (req, res) => {\n  res.json({\n    message: 'Protected endpoint',\n    user: req.auth?.payload,\n  })\n})\n\n// Route requiring specific scope\napp.get(\n  '/api/admin',\n  jwtCheck,\n  requiredScopes('admin:read'),\n  (req, res) => {\n    res.json({ message: 'Admin data' })\n  }\n)\n```\n\n### Custom Claims Access\n\n```typescript\ninterface Auth0Payload {\n  sub: string\n  'https://myapp.com/roles': string[]\n  'https://myapp.com/org_id'?: string\n  permissions?: string[]\n}\n\ndeclare global {\n  namespace Express {\n    interface Request {\n      auth?: {\n        payload: Auth0Payload\n        token: string\n      }\n    }\n  }\n}\n\napp.get('/api/user-info', jwtCheck, (req, res) => {\n  const userId = req.auth?.payload.sub\n  const roles = req.auth?.payload['https://myapp.com/roles'] || []\n  const orgId = req.auth?.payload['https://myapp.com/org_id']\n\n  res.json({ userId, roles, orgId })\n})\n```\n\n### Permission Middleware\n\n```typescript\nfunction requirePermission(permission: string) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const permissions = req.auth?.payload.permissions || []\n\n    if (!permissions.includes(permission)) {\n      return res.status(403).json({\n        error: 'insufficient_permissions',\n        message: `Missing permission: ${permission}`,\n      })\n    }\n\n    next()\n  }\n}\n\n// Usage\napp.delete(\n  '/api/users/:id',\n  jwtCheck,\n  requirePermission('delete:users'),\n  async (req, res) => {\n    await deleteUser(req.params.id)\n    res.status(204).send()\n  }\n)\n```\n\n### Role-Based Access\n\n```typescript\nfunction requireRole(...roles: string[]) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const userRoles = req.auth?.payload['https://myapp.com/roles'] || []\n\n    const hasRole = roles.some(role => userRoles.includes(role))\n\n    if (!hasRole) {\n      return res.status(403).json({\n        error: 'insufficient_role',\n        message: `Requires one of: ${roles.join(', ')}`,\n      })\n    }\n\n    next()\n  }\n}\n\napp.get('/api/admin/stats', jwtCheck, requireRole('admin'), getStats)\n```\n\n## Session-Based Authentication\n\n### Setup with express-openid-connect\n\n```typescript\nimport { auth, requiresAuth } from 'express-openid-connect'\n\nconst app = express()\n\napp.use(\n  auth({\n    authRequired: false,\n    auth0Logout: true,\n    secret: process.env.AUTH0_SECRET,\n    baseURL: process.env.AUTH0_BASE_URL,\n    clientID: process.env.AUTH0_CLIENT_ID,\n    issuerBaseURL: `https://${process.env.AUTH0_DOMAIN}`,\n  })\n)\n\n// Public route\napp.get('/', (req, res) => {\n  res.send(req.oidc.isAuthenticated() ? 'Logged in' : 'Logged out')\n})\n\n// Protected route\napp.get('/profile', requiresAuth(), (req, res) => {\n  res.json(req.oidc.user)\n})\n\n// Login/logout routes are automatic:\n// /login\n// /logout\n// /callback\n```\n\n### Custom Login Options\n\n```typescript\nimport { auth, requiresAuth } from 'express-openid-connect'\n\napp.use(\n  auth({\n    authRequired: false,\n    auth0Logout: true,\n    secret: process.env.AUTH0_SECRET,\n    baseURL: process.env.AUTH0_BASE_URL,\n    clientID: process.env.AUTH0_CLIENT_ID,\n    issuerBaseURL: `https://${process.env.AUTH0_DOMAIN}`,\n\n    // Custom routes\n    routes: {\n      login: '/auth/login',\n      logout: '/auth/logout',\n      callback: '/auth/callback',\n    },\n\n    // Authorization params\n    authorizationParams: {\n      response_type: 'code',\n      scope: 'openid profile email',\n      audience: process.env.AUTH0_AUDIENCE,\n    },\n\n    // Session configuration\n    session: {\n      absoluteDuration: 60 * 60 * 24,  // 24 hours\n      rolling: true,\n    },\n  })\n)\n```\n\n### Getting Access Token\n\n```typescript\napp.get('/api/external', requiresAuth(), async (req, res) => {\n  try {\n    const { access_token } = await req.oidc.accessToken.refresh()\n\n    const response = await fetch(`${process.env.API_URL}/data`, {\n      headers: {\n        Authorization: `Bearer ${access_token}`,\n      },\n    })\n\n    res.json(await response.json())\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to fetch data' })\n  }\n})\n```\n\n## Error Handling\n\n```typescript\nimport {\n  InvalidTokenError,\n  UnauthorizedError,\n  InsufficientScopeError,\n} from 'express-oauth2-jwt-bearer'\n\n// Error handler\napp.use((err: Error, req: Request, res: Response, next: NextFunction) => {\n  if (err instanceof InvalidTokenError) {\n    return res.status(401).json({\n      error: 'invalid_token',\n      message: 'The access token is invalid',\n    })\n  }\n\n  if (err instanceof UnauthorizedError) {\n    return res.status(401).json({\n      error: 'unauthorized',\n      message: 'No authorization token was found',\n    })\n  }\n\n  if (err instanceof InsufficientScopeError) {\n    return res.status(403).json({\n      error: 'insufficient_scope',\n      message: `Required scope: ${err.requiredScopes}`,\n    })\n  }\n\n  console.error(err)\n  res.status(500).json({ error: 'Internal server error' })\n})\n```\n\n## Multi-Tenancy\n\n### Organization Validation\n\n```typescript\nfunction requireOrganization() {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const orgId = req.auth?.payload['https://myapp.com/org_id']\n\n    if (!orgId) {\n      return res.status(403).json({\n        error: 'no_organization',\n        message: 'User must belong to an organization',\n      })\n    }\n\n    // Add to request for use in handlers\n    req.organizationId = orgId\n    next()\n  }\n}\n\n// Usage\napp.get('/api/org/data', jwtCheck, requireOrganization(), async (req, res) => {\n  const data = await getOrgData(req.organizationId)\n  res.json(data)\n})\n```\n\n### Scoped Data Access\n\n```typescript\napp.get('/api/resources', jwtCheck, async (req, res) => {\n  const userId = req.auth?.payload.sub\n  const orgId = req.auth?.payload['https://myapp.com/org_id']\n\n  // Query scoped by organization\n  const resources = await db.resources.findMany({\n    where: {\n      organizationId: orgId,\n      // Optionally filter by user\n      ...(req.query.mine && { userId }),\n    },\n  })\n\n  res.json(resources)\n})\n```\n\n## Testing\n\n### Mock JWT Middleware\n\n```typescript\n// test/helpers/auth.ts\nexport function mockAuth(payload: Partial<Auth0Payload> = {}) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    req.auth = {\n      payload: {\n        sub: 'auth0|test123',\n        'https://myapp.com/roles': ['user'],\n        permissions: [],\n        ...payload,\n      },\n      token: 'mock-token',\n    }\n    next()\n  }\n}\n\n// In tests\njest.mock('express-oauth2-jwt-bearer', () => ({\n  auth: () => mockAuth({ permissions: ['read:data'] }),\n}))\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-auth0/skills/auth0-nextjs/SKILL.md": "---\nname: auth0-nextjs\ndescription: Auth0 integration with Next.js\nuser-invocable: false\n---\n\n# Auth0 Next.js Skill\n\nPatterns for integrating Auth0 with Next.js applications.\n\n## Setup\n\n### Installation\n\n```bash\nnpm install @auth0/nextjs-auth0\n```\n\n### Configuration\n\n```typescript\n// .env.local\nAUTH0_SECRET=use-openssl-rand-base64-32\nAUTH0_BASE_URL=http://localhost:3000\nAUTH0_ISSUER_BASE_URL=https://your-tenant.auth0.com\nAUTH0_CLIENT_ID=your-client-id\nAUTH0_CLIENT_SECRET=your-client-secret\nAUTH0_AUDIENCE=your-api-audience  # Optional\n```\n\n### API Route Handler\n\n```typescript\n// app/api/auth/[auth0]/route.ts\nimport { handleAuth } from '@auth0/nextjs-auth0'\n\nexport const GET = handleAuth()\n\n// With custom handlers\nexport const GET = handleAuth({\n  login: handleLogin({\n    authorizationParams: {\n      audience: process.env.AUTH0_AUDIENCE,\n      scope: 'openid profile email',\n    },\n    returnTo: '/dashboard',\n  }),\n  callback: handleCallback({\n    afterCallback: async (req, session) => {\n      // Custom logic after login\n      await createUserIfNotExists(session.user)\n      return session\n    },\n  }),\n  logout: handleLogout({\n    returnTo: '/',\n  }),\n})\n```\n\n## Client-Side Auth\n\n### UserProvider\n\n```tsx\n// app/layout.tsx\nimport { UserProvider } from '@auth0/nextjs-auth0/client'\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <UserProvider>{children}</UserProvider>\n      </body>\n    </html>\n  )\n}\n```\n\n### useUser Hook\n\n```tsx\n'use client'\n\nimport { useUser } from '@auth0/nextjs-auth0/client'\n\nexport default function Profile() {\n  const { user, error, isLoading } = useUser()\n\n  if (isLoading) return <div>Loading...</div>\n  if (error) return <div>Error: {error.message}</div>\n\n  if (!user) {\n    return (\n      <div>\n        <a href=\"/api/auth/login\">Login</a>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <img src={user.picture} alt={user.name} />\n      <h2>{user.name}</h2>\n      <p>{user.email}</p>\n      <a href=\"/api/auth/logout\">Logout</a>\n    </div>\n  )\n}\n```\n\n### Protected Client Component\n\n```tsx\n'use client'\n\nimport { withPageAuthRequired } from '@auth0/nextjs-auth0/client'\n\nfunction Dashboard() {\n  const { user } = useUser()\n\n  return (\n    <div>\n      <h1>Dashboard</h1>\n      <p>Welcome, {user?.name}</p>\n    </div>\n  )\n}\n\nexport default withPageAuthRequired(Dashboard, {\n  onRedirecting: () => <div>Loading...</div>,\n  onError: (error) => <div>Error: {error.message}</div>,\n})\n```\n\n## Server-Side Auth\n\n### getSession\n\n```tsx\n// app/profile/page.tsx\nimport { getSession } from '@auth0/nextjs-auth0'\nimport { redirect } from 'next/navigation'\n\nexport default async function ProfilePage() {\n  const session = await getSession()\n\n  if (!session) {\n    redirect('/api/auth/login')\n  }\n\n  return (\n    <div>\n      <h1>Profile</h1>\n      <p>Email: {session.user.email}</p>\n      <p>User ID: {session.user.sub}</p>\n    </div>\n  )\n}\n```\n\n### withPageAuthRequired (Server)\n\n```tsx\n// app/dashboard/page.tsx\nimport { withPageAuthRequired } from '@auth0/nextjs-auth0'\n\nexport default withPageAuthRequired(\n  async function Dashboard() {\n    const session = await getSession()\n\n    return (\n      <div>\n        <h1>Dashboard</h1>\n        <p>Welcome, {session?.user.name}</p>\n      </div>\n    )\n  },\n  { returnTo: '/dashboard' }\n)\n```\n\n### API Route Protection\n\n```typescript\n// app/api/protected/route.ts\nimport { withApiAuthRequired, getSession } from '@auth0/nextjs-auth0'\nimport { NextResponse } from 'next/server'\n\nexport const GET = withApiAuthRequired(async function handler(req) {\n  const session = await getSession()\n\n  return NextResponse.json({\n    user: session?.user,\n    message: 'Protected data',\n  })\n})\n```\n\n## Access Tokens\n\n### Getting Access Token\n\n```typescript\n// app/api/external/route.ts\nimport { getAccessToken } from '@auth0/nextjs-auth0'\nimport { NextResponse } from 'next/server'\n\nexport async function GET() {\n  const { accessToken } = await getAccessToken({\n    scopes: ['read:data'],\n  })\n\n  const response = await fetch(`${process.env.API_URL}/data`, {\n    headers: {\n      Authorization: `Bearer ${accessToken}`,\n    },\n  })\n\n  const data = await response.json()\n  return NextResponse.json(data)\n}\n```\n\n### Token Refresh\n\n```typescript\nimport { getAccessToken } from '@auth0/nextjs-auth0'\n\nexport async function GET() {\n  const { accessToken } = await getAccessToken({\n    refresh: true,  // Force refresh if expired\n  })\n\n  // Use accessToken\n}\n```\n\n## Middleware Protection\n\n```typescript\n// middleware.ts\nimport { withMiddlewareAuthRequired } from '@auth0/nextjs-auth0/edge'\n\nexport default withMiddlewareAuthRequired()\n\nexport const config = {\n  matcher: [\n    '/dashboard/:path*',\n    '/profile/:path*',\n    '/api/protected/:path*',\n  ],\n}\n\n// With custom logic\nimport { NextResponse } from 'next/server'\nimport { getSession } from '@auth0/nextjs-auth0/edge'\n\nexport default withMiddlewareAuthRequired(async function middleware(req) {\n  const res = NextResponse.next()\n  const session = await getSession(req, res)\n\n  // Add custom headers\n  res.headers.set('x-user-id', session?.user.sub || '')\n\n  // Role-based redirect\n  const roles = session?.user['https://myapp.com/roles'] || []\n  if (req.nextUrl.pathname.startsWith('/admin') && !roles.includes('admin')) {\n    return NextResponse.redirect(new URL('/unauthorized', req.url))\n  }\n\n  return res\n})\n```\n\n## Organization Support\n\n### Organization Login\n\n```typescript\n// app/api/auth/[auth0]/route.ts\nimport { handleAuth, handleLogin } from '@auth0/nextjs-auth0'\n\nexport const GET = handleAuth({\n  login: handleLogin({\n    authorizationParams: {\n      organization: 'org_123',  // Specific org\n      // or\n      // organization: req.query.org,  // Dynamic org\n    },\n  }),\n})\n```\n\n### Checking Organization\n\n```tsx\nimport { getSession } from '@auth0/nextjs-auth0'\n\nexport default async function OrgPage() {\n  const session = await getSession()\n  const orgId = session?.user.org_id\n\n  if (!orgId) {\n    return <div>Please select an organization</div>\n  }\n\n  return <div>Organization: {session?.user.org_name}</div>\n}\n```\n\n## Custom Session Handling\n\n```typescript\n// app/api/auth/[auth0]/route.ts\nimport { handleAuth, handleCallback } from '@auth0/nextjs-auth0'\n\nexport const GET = handleAuth({\n  callback: handleCallback({\n    afterCallback: async (req, session, state) => {\n      // Modify session\n      session.user.customClaim = 'value'\n\n      // Add to database\n      await upsertUser({\n        auth0Id: session.user.sub,\n        email: session.user.email,\n        name: session.user.name,\n      })\n\n      return session\n    },\n  }),\n})\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-auth0/skills/auth0-patterns/SKILL.md": "---\nname: auth0-patterns\ndescription: Auth0 integration patterns\nuser-invocable: false\n---\n\n# Auth0 Patterns Skill\n\nCommon patterns for Auth0 authentication integration.\n\n## Core Concepts\n\n### Configuration\n\n```typescript\n// Environment variables\nAUTH0_DOMAIN=your-tenant.auth0.com\nAUTH0_CLIENT_ID=your-client-id\nAUTH0_CLIENT_SECRET=your-client-secret\nAUTH0_AUDIENCE=your-api-identifier\nAUTH0_BASE_URL=http://localhost:3000\nAUTH0_ISSUER_BASE_URL=https://your-tenant.auth0.com\nAUTH0_SECRET=a-long-random-secret-for-session-encryption\n```\n\n### Token Types\n\n```\nID Token: Contains user identity claims (for client)\nAccess Token: Used to call protected APIs\nRefresh Token: Used to get new access tokens\n```\n\n## Machine-to-Machine Auth\n\n### Getting Access Token\n\n```typescript\nimport { AuthenticationClient } from 'auth0'\n\nconst auth0 = new AuthenticationClient({\n  domain: process.env.AUTH0_DOMAIN,\n  clientId: process.env.AUTH0_CLIENT_ID,\n  clientSecret: process.env.AUTH0_CLIENT_SECRET,\n})\n\nasync function getM2MToken(): Promise<string> {\n  const response = await auth0.clientCredentialsGrant({\n    audience: process.env.AUTH0_AUDIENCE,\n  })\n  return response.access_token\n}\n```\n\n### Token Caching\n\n```typescript\nclass TokenManager {\n  private token: string | null = null\n  private expiresAt: number = 0\n\n  async getToken(): Promise<string> {\n    if (this.token && Date.now() < this.expiresAt - 60000) {\n      return this.token\n    }\n\n    const response = await auth0.clientCredentialsGrant({\n      audience: process.env.AUTH0_AUDIENCE,\n    })\n\n    this.token = response.access_token\n    this.expiresAt = Date.now() + (response.expires_in * 1000)\n\n    return this.token\n  }\n}\n```\n\n## User Management\n\n### Management API\n\n```typescript\nimport { ManagementClient } from 'auth0'\n\nconst management = new ManagementClient({\n  domain: process.env.AUTH0_DOMAIN,\n  clientId: process.env.AUTH0_M2M_CLIENT_ID,\n  clientSecret: process.env.AUTH0_M2M_CLIENT_SECRET,\n})\n\n// Get user\nconst user = await management.users.get({ id: 'auth0|123' })\n\n// Update user\nawait management.users.update(\n  { id: 'auth0|123' },\n  {\n    name: 'John Doe',\n    user_metadata: { preferences: { theme: 'dark' } },\n  }\n)\n\n// Create user\nconst newUser = await management.users.create({\n  connection: 'Username-Password-Authentication',\n  email: 'new@example.com',\n  password: 'SecurePassword123!',\n  email_verified: true,\n})\n\n// Delete user\nawait management.users.delete({ id: 'auth0|123' })\n\n// Get user roles\nconst roles = await management.users.getRoles({ id: 'auth0|123' })\n\n// Assign roles\nawait management.users.assignRoles(\n  { id: 'auth0|123' },\n  { roles: ['rol_admin'] }\n)\n```\n\n### Organization Management\n\n```typescript\n// Create organization\nconst org = await management.organizations.create({\n  name: 'acme-corp',\n  display_name: 'Acme Corporation',\n})\n\n// Add member\nawait management.organizations.addMembers(\n  { id: org.id },\n  { members: ['auth0|123'] }\n)\n\n// Get organization members\nconst members = await management.organizations.getMembers({ id: org.id })\n\n// Assign roles in organization\nawait management.organizations.addMemberRoles(\n  { id: org.id, user_id: 'auth0|123' },\n  { roles: ['org_admin'] }\n)\n```\n\n## Token Validation\n\n### JWT Verification\n\n```typescript\nimport jwt from 'jsonwebtoken'\nimport jwksClient from 'jwks-rsa'\n\nconst client = jwksClient({\n  jwksUri: `https://${process.env.AUTH0_DOMAIN}/.well-known/jwks.json`,\n  cache: true,\n  rateLimit: true,\n})\n\nfunction getKey(header: jwt.JwtHeader, callback: jwt.SigningKeyCallback) {\n  client.getSigningKey(header.kid, (err, key) => {\n    if (err) return callback(err)\n    const signingKey = key?.getPublicKey()\n    callback(null, signingKey)\n  })\n}\n\nasync function verifyToken(token: string): Promise<jwt.JwtPayload> {\n  return new Promise((resolve, reject) => {\n    jwt.verify(\n      token,\n      getKey,\n      {\n        audience: process.env.AUTH0_AUDIENCE,\n        issuer: `https://${process.env.AUTH0_DOMAIN}/`,\n        algorithms: ['RS256'],\n      },\n      (err, decoded) => {\n        if (err) reject(err)\n        else resolve(decoded as jwt.JwtPayload)\n      }\n    )\n  })\n}\n```\n\n### Using jose\n\n```typescript\nimport { createRemoteJWKSet, jwtVerify } from 'jose'\n\nconst JWKS = createRemoteJWKSet(\n  new URL(`https://${process.env.AUTH0_DOMAIN}/.well-known/jwks.json`)\n)\n\nasync function verifyToken(token: string) {\n  const { payload } = await jwtVerify(token, JWKS, {\n    issuer: `https://${process.env.AUTH0_DOMAIN}/`,\n    audience: process.env.AUTH0_AUDIENCE,\n  })\n  return payload\n}\n```\n\n## Custom Claims\n\n### Adding Claims via Action\n\n```javascript\n// Auth0 Dashboard > Actions > Library > Custom\n\nexports.onExecutePostLogin = async (event, api) => {\n  const namespace = 'https://myapp.com'\n\n  // Add user roles\n  const roles = event.authorization?.roles || []\n  api.accessToken.setCustomClaim(`${namespace}/roles`, roles)\n\n  // Add organization\n  if (event.organization) {\n    api.accessToken.setCustomClaim(`${namespace}/org_id`, event.organization.id)\n    api.accessToken.setCustomClaim(`${namespace}/org_name`, event.organization.name)\n  }\n\n  // Add user metadata\n  const { user } = event\n  api.idToken.setCustomClaim(`${namespace}/user_id`, user.user_id)\n  api.idToken.setCustomClaim(`${namespace}/email_verified`, user.email_verified)\n}\n```\n\n### Reading Claims\n\n```typescript\ninterface Auth0Claims {\n  sub: string\n  'https://myapp.com/roles': string[]\n  'https://myapp.com/org_id'?: string\n}\n\nfunction extractClaims(token: string): Auth0Claims {\n  const decoded = jwt.decode(token) as Auth0Claims\n  return {\n    sub: decoded.sub,\n    roles: decoded['https://myapp.com/roles'] || [],\n    orgId: decoded['https://myapp.com/org_id'],\n  }\n}\n```\n\n## RBAC\n\n### Permission Checks\n\n```typescript\n// Middleware for Express\nfunction requirePermission(permission: string) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const permissions = req.auth?.permissions || []\n\n    if (!permissions.includes(permission)) {\n      return res.status(403).json({\n        error: 'Forbidden',\n        message: `Missing permission: ${permission}`,\n      })\n    }\n\n    next()\n  }\n}\n\n// Usage\napp.delete(\n  '/users/:id',\n  requireAuth,\n  requirePermission('delete:users'),\n  deleteUser\n)\n```\n\n### Role-Based Access\n\n```typescript\nfunction requireRole(...roles: string[]) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const userRoles = req.auth?.['https://myapp.com/roles'] || []\n\n    const hasRole = roles.some(role => userRoles.includes(role))\n\n    if (!hasRole) {\n      return res.status(403).json({\n        error: 'Forbidden',\n        message: `Requires one of: ${roles.join(', ')}`,\n      })\n    }\n\n    next()\n  }\n}\n\n// Usage\napp.get('/admin', requireAuth, requireRole('admin', 'superadmin'), adminDashboard)\n```\n\n## Error Handling\n\n```typescript\n// Common Auth0 errors\ninterface Auth0Error {\n  statusCode: number\n  error: string\n  message: string\n  errorCode: string\n}\n\nfunction handleAuth0Error(error: any): never {\n  if (error.statusCode === 401) {\n    throw new UnauthorizedError('Invalid or expired token')\n  }\n\n  if (error.statusCode === 403) {\n    throw new ForbiddenError('Insufficient permissions')\n  }\n\n  if (error.errorCode === 'invalid_grant') {\n    throw new UnauthorizedError('Invalid refresh token')\n  }\n\n  throw new Error(error.message || 'Authentication failed')\n}\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-electron/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-electron\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Electron desktop app packaging - convert web apps to cross-platform desktop applications with Claude Code CLI integration\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"electron\",\n    \"desktop\",\n    \"packaging\",\n    \"cross-platform\",\n    \"native-modules\",\n    \"keychain\",\n    \"claude-cli\"\n  ],\n  \"recommends\": {\n    \"plugins\": [\"aai-stack-typescript\", \"aai-stack-node\"]\n  }\n}\n",
        "plugins/aai-stack-electron/agents/electron-converter/AGENT.md": "---\nname: electron-converter\ndescription: Convert web applications to cross-platform Electron desktop apps with proper path handling, native modules, and secure credential storage\nuser-invocable: true\n---\n\n# Electron Converter Agent\n\nYou are an expert at converting web applications into cross-platform Electron desktop applications. You understand the critical differences between development and packaged environments.\n\n## Critical Knowledge: Common Electron Packaging Pitfalls\n\n### 1. Path Resolution Disaster: `process.cwd()` Returns `/` in Finder\n\n**THE PROBLEM**: When users double-click an Electron app in Finder (macOS), `process.cwd()` returns `/` (root), NOT the app directory. Terminal launches work fine, but Finder launches break.\n\n**SYMPTOMS**:\n- `ENOENT: no such file or directory, mkdir '/.some-folder'`\n- Files created in wrong locations\n- Permission denied errors\n\n**THE FIX**: Never use `process.cwd()` for file operations. Always use:\n\n```typescript\nimport { app } from 'electron';\nimport path from 'path';\n\n// For user data (database, uploads, generated files)\nconst userDataDir = app.getPath('userData');\n\n// For app resources (bundled assets)\nconst appRoot = app.getAppPath();\n\n// Pass to renderer/server via environment variables\nprocess.env.ELECTRON_DB_PATH = path.join(userDataDir, 'app.db');\nprocess.env.ELECTRON_APP_ROOT = path.join(appRoot, 'dist');\n```\n\n### 2. `__dirname` Broken in Bundled Code\n\n**THE PROBLEM**: When using esbuild/webpack to bundle Electron code, `__dirname` is resolved at BUNDLE TIME, not runtime.\n\n**THE FIX**: Use `app.getAppPath()` instead:\n\n```typescript\n// BAD - resolved at bundle time\nconst preloadPath = path.join(__dirname, 'preload.js');\n\n// GOOD - resolved at runtime\nconst preloadPath = isDev\n  ? path.join(__dirname, 'preload.js')\n  : path.join(app.getAppPath(), 'electron-dist', 'preload.cjs');\n```\n\n### 3. Limited PATH in Finder-Launched Apps\n\n**THE PROBLEM**: When launched from Finder, PATH is minimal: `/usr/bin:/bin:/usr/sbin:/sbin`. CLI tools like `node`, `npx`, `claude` are NOT found.\n\n**THE FIX**: Check common installation paths directly:\n\n```typescript\nfunction findExecutable(name: string): string | null {\n  const home = os.homedir();\n  const commonPaths = [\n    `/usr/local/bin/${name}`,\n    `/opt/homebrew/bin/${name}`,\n    path.join(home, '.local', 'bin', name),\n    path.join(home, '.nvm/versions/node/current/bin', name),\n  ];\n\n  for (const execPath of commonPaths) {\n    if (fs.existsSync(execPath)) {\n      try {\n        fs.accessSync(execPath, fs.constants.X_OK);\n        return execPath;\n      } catch {}\n    }\n  }\n  return null;\n}\n```\n\n### 4. Native Modules Require Rebuild\n\n**THE PROBLEM**: Native modules (better-sqlite3, sharp, keytar) are compiled for Node.js, not Electron.\n\n**THE FIX**: Configure electron-builder properly:\n\n```javascript\n// electron-builder.config.cjs\nmodule.exports = {\n  // Rebuild native modules for Electron\n  npmRebuild: true,\n\n  // Mark native modules as external in bundler\n  // esbuild: --external:better-sqlite3 --external:sharp --external:keytar\n\n  // Include in app\n  files: [\n    \"node_modules/better-sqlite3/**/*\",\n    \"node_modules/keytar/**/*\",\n  ],\n};\n```\n\n### 5. Environment Variable Naming Mismatches\n\n**THE PROBLEM**: Keychain stores `GEMINI_API_KEY` but service reads `NANO_BANANAS_API_KEY`.\n\n**THE FIX**: Check multiple environment variable names:\n\n```typescript\nconst apiKey = process.env.GEMINI_API_KEY || process.env.NANO_BANANAS_API_KEY;\n```\n\n### 6. node_modules/.bin Not Created\n\n**THE PROBLEM**: In packaged apps, `npx some-cli` fails with \"could not determine executable to run\" because `.bin` symlinks aren't created.\n\n**THE FIX**: Call CLI scripts directly with node:\n\n```typescript\n// BAD\nspawn('npx', ['remotion', 'render', ...args]);\n\n// GOOD\nconst cliPath = path.join(app.getAppPath(), 'node_modules/@remotion/cli/remotion-cli.js');\nconst nodePath = findExecutable('node');\nspawn(nodePath, [cliPath, 'render', ...args]);\n```\n\n### 7. Spawned Processes Need Safe CWD\n\n**THE PROBLEM**: Setting `cwd: process.cwd()` causes macOS permission prompts for Photos, Downloads, etc.\n\n**THE FIX**: Use userData directory as cwd:\n\n```typescript\nspawn('some-command', args, {\n  cwd: app.getPath('userData'),\n  env: { ...process.env },\n});\n```\n\n## Conversion Workflow\n\n### Phase 1: Analyze Existing App\n\n1. Identify the tech stack (React, Vue, Express, etc.)\n2. Find all uses of `process.cwd()`, `__dirname`, `require.resolve()`\n3. Identify database and file storage locations\n4. Identify external CLI dependencies\n5. Identify API keys and credentials\n\n### Phase 2: Create Electron Structure\n\n```\nelectron/\n  main.ts              # Main process entry\n  preload.ts           # Secure IPC bridge (contextBridge)\n  window.ts            # BrowserWindow creation\n  server.ts            # Embedded server wrapper (if needed)\n  keychain.ts          # Secure credential storage\n  cli-detector.ts      # CLI tool detection\n  ipc-handlers.ts      # IPC message handlers\n```\n\n### Phase 3: Fix Path Resolution\n\nFor EVERY file that uses paths:\n\n```typescript\n// Add at top of file\nfunction getDataDir(): string {\n  if (process.env.ELECTRON_DB_PATH) {\n    return path.dirname(process.env.ELECTRON_DB_PATH);\n  }\n  return process.cwd();\n}\n\n// Replace all process.cwd() calls\nconst dataPath = path.join(getDataDir(), 'data');\n```\n\n### Phase 4: Configure Build\n\n```json\n// package.json scripts\n{\n  \"scripts\": {\n    \"electron:dev\": \"NODE_ENV=development electron electron-dist/main.cjs\",\n    \"electron:build\": \"esbuild electron/*.ts --bundle --platform=node --format=cjs --outdir=electron-dist --external:electron --external:keytar --external:better-sqlite3\",\n    \"build:electron\": \"npm run build && npm run electron:build\",\n    \"dist:mac\": \"npm run build:electron && electron-builder --mac\",\n    \"dist:win\": \"npm run build:electron && electron-builder --win\",\n    \"dist:linux\": \"npm run build:electron && electron-builder --linux\"\n  }\n}\n```\n\n### Phase 5: Add Settings UI\n\nCreate a Settings page for:\n- API key management (save to keychain)\n- CLI tool status display\n- Connection testing\n\n## Required Files Checklist\n\n- [ ] `electron/main.ts` - Lifecycle, window creation\n- [ ] `electron/preload.ts` - contextBridge exposure\n- [ ] `electron/window.ts` - BrowserWindow config\n- [ ] `electron/server.ts` - Embedded server (if backend)\n- [ ] `electron/keychain.ts` - Credential storage\n- [ ] `electron/cli-detector.ts` - Find CLI tools\n- [ ] `electron/ipc-handlers.ts` - IPC handlers\n- [ ] `electron-builder.config.cjs` - Build config\n- [ ] `tsconfig.electron.json` - Electron TS config\n- [ ] `src/client/pages/Settings.tsx` - Settings UI\n- [ ] `src/client/types/electron.d.ts` - Type declarations\n\n## Testing Checklist\n\n- [ ] App launches from terminal (`npm run electron:dev`)\n- [ ] App launches from Finder (double-click .app)\n- [ ] API keys save and persist across restarts\n- [ ] CLI tools are detected (Claude, etc.)\n- [ ] File uploads work\n- [ ] Database operations work\n- [ ] External process spawning works without permission prompts\n- [ ] Build produces working DMG/EXE/AppImage\n\n## Integration\n\nWorks with skills:\n- `electron-path-resolution` - Safe path handling\n- `electron-native-modules` - Native module packaging\n- `electron-security` - Secure IPC and credentials\n- `electron-cli-integration` - CLI tool detection\n- `electron-build-config` - Multi-platform builds\n",
        "plugins/aai-stack-electron/commands/electron-audit.md": "---\ndescription: Audit existing code for Electron compatibility issues before packaging\nargument-hint: [optional: specific directory to audit]\nallowed-tools: Bash, Read, Grep, Glob\n---\n\n# Electron Audit\n\nAudit the current codebase for common Electron packaging issues that cause apps to fail when launched from Finder/Explorer.\n\n## Context\n\n- Current directory: !`pwd`\n- Source directories: !`ls -d src/ electron/ 2>/dev/null || echo \"No src/ or electron/ found\"`\n\n## Audit Target\n\n$ARGUMENTS\n\n## Audit Categories\n\n### 1. Path Resolution Issues (CRITICAL)\n\nThese patterns WILL break when app is launched from Finder:\n\n**`process.cwd()` Usage**\n```bash\n# Returns \"/\" on macOS when launched from Finder\ngrep -rn \"process.cwd()\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" --include=\"*.jsx\"\n```\n\n**`__dirname` in Bundled Code**\n```bash\n# Resolved at bundle time, not runtime\ngrep -rn \"__dirname\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" --include=\"*.jsx\"\n```\n\n**`require.resolve()` for Paths**\n```bash\n# Breaks in bundled apps\ngrep -rn \"require.resolve\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" --include=\"*.jsx\"\n```\n\n### 2. Process Spawning Issues\n\n**Direct CLI Commands**\n```bash\n# May not be in PATH when launched from Finder\ngrep -rn \"spawn(\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" -A 2\ngrep -rn \"exec(\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" -A 2\ngrep -rn \"execSync(\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" -A 2\n```\n\n**npx Usage**\n```bash\n# .bin directory not created in packaged apps\ngrep -rn \"npx \" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\"\n```\n\n### 3. Credential Storage Issues\n\n**localStorage for Secrets**\n```bash\n# Insecure - use keytar instead\ngrep -rn \"localStorage.setItem.*key\\|localStorage.setItem.*token\\|localStorage.setItem.*password\\|localStorage.setItem.*secret\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" -i\n```\n\n**Hardcoded Credentials**\n```bash\n# Should use keychain/environment\ngrep -rn \"sk-ant-\\|AIza\\|sk-\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\"\n```\n\n### 4. Security Issues\n\n**nodeIntegration Enabled**\n```bash\ngrep -rn \"nodeIntegration.*true\" electron/ --include=\"*.ts\" --include=\"*.js\"\n```\n\n**contextIsolation Disabled**\n```bash\ngrep -rn \"contextIsolation.*false\" electron/ --include=\"*.ts\" --include=\"*.js\"\n```\n\n**Direct ipcRenderer Exposure**\n```bash\ngrep -rn \"exposeInMainWorld.*ipcRenderer\" electron/ --include=\"*.ts\" --include=\"*.js\"\n```\n\n### 5. Native Module Issues\n\n**Native Modules in Dependencies**\n```bash\n# Check if these need special handling\ncat package.json | grep -E \"better-sqlite3|sharp|keytar|node-pty|serialport|canvas\"\n```\n\n**Missing External Flags**\n```bash\n# Check if esbuild/build scripts mark native modules as external\ncat package.json | grep -E \"external.*better-sqlite3|external.*sharp|external.*keytar\"\n```\n\n### 6. File System Operations\n\n**Absolute Path Construction**\n```bash\n# May resolve incorrectly\ngrep -rn \"path.resolve(\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" -B 1 -A 1\ngrep -rn \"path.join(\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" -B 1 -A 1\n```\n\n**File System Access**\n```bash\n# Check for unprotected file operations\ngrep -rn \"fs.writeFile\\|fs.readFile\\|fs.mkdir\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" -B 1 -A 1\n```\n\n## Report Format\n\nFor each issue found, report:\n\n1. **File and Line**: Exact location\n2. **Issue Type**: Path/Spawn/Security/Native\n3. **Severity**: Critical/Warning/Info\n4. **Current Code**: What's there now\n5. **Recommended Fix**: How to fix it\n\n### Severity Definitions\n\n- **Critical**: Will cause app to crash or fail silently when launched from Finder\n- **Warning**: May cause issues depending on usage patterns\n- **Info**: Best practice recommendation\n\n## Summary Template\n\n```markdown\n## Electron Compatibility Audit Results\n\n### Critical Issues (Must Fix)\n- [ ] Issue 1: description (file:line)\n- [ ] Issue 2: description (file:line)\n\n### Warnings (Should Fix)\n- [ ] Issue 1: description (file:line)\n\n### Recommendations (Nice to Have)\n- [ ] Issue 1: description (file:line)\n\n### Native Modules Detected\n- module1: needs external flag in bundler\n- module2: needs rebuild for Electron\n\n### Next Steps\n1. Fix all critical issues before packaging\n2. Address warnings for better reliability\n3. Run `npm run dist:mac` to test packaging\n4. Test by double-clicking .app in Finder\n```\n\n## Skills Used\n\nThis command references:\n- `electron-path-resolution` - For path issue fixes\n- `electron-security` - For security issue fixes\n- `electron-native-modules` - For native module handling\n- `electron-cli-integration` - For spawn/exec fixes\n",
        "plugins/aai-stack-electron/commands/electron-convert.md": "---\ndescription: Convert a web application to a cross-platform Electron desktop app\nargument-hint: [optional: specific requirements or target platform]\nallowed-tools: Task, Bash, Read, Grep, Glob, Edit, Write, AskUserQuestion\n---\n\n# Electron Convert\n\nConvert the current web application to a cross-platform Electron desktop application.\n\n## Context\n\n- Current directory: !`pwd`\n- Package manager: !`[ -f pnpm-lock.yaml ] && echo \"pnpm\" || ([ -f yarn.lock ] && echo \"yarn\" || echo \"npm\")`\n- Has package.json: !`[ -f package.json ] && echo \"yes\" || echo \"no\"`\n\n## Target Requirements\n\n$ARGUMENTS\n\n## Pre-Conversion Analysis\n\nBefore making any changes, analyze the current application:\n\n### 1. Technology Stack Detection\n\nDetect the project's stack:\n- Frontend framework (React, Vue, Angular, Svelte)\n- Backend (Express, Fastify, or client-only)\n- Database (SQLite, none)\n- Build tools (Vite, webpack, esbuild)\n\n### 2. Path Usage Audit\n\nSearch for problematic patterns that WILL break in Electron:\n\n```bash\n# These patterns cause failures when launched from Finder:\ngrep -r \"process.cwd()\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\"\ngrep -r \"__dirname\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\"\ngrep -r \"require.resolve\" src/ --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\"\n```\n\n### 3. External Dependencies Audit\n\nIdentify features that need special handling:\n- CLI tool usage (spawning external processes)\n- File system operations\n- Database file locations\n- Native module requirements (sharp, better-sqlite3, keytar)\n- API keys/credentials\n\n### 4. Current Architecture\n\nDetermine if app has:\n- Embedded server (needs wrapping)\n- Client-only (simpler conversion)\n- External API dependencies\n\n## Conversion Workflow\n\nExecute these phases in order:\n\n### Phase 1: Install Dependencies\n\nRequired dependencies:\n\n```bash\n# Production\nnpm install keytar\n\n# Development\nnpm install -D electron electron-builder which concurrently wait-on\n```\n\n### Phase 2: Create Electron Structure\n\nCreate these files in `electron/` directory:\n\n1. **electron/main.ts** - Main process entry\n   - App lifecycle management\n   - Window creation\n   - Environment variable setup for paths\n   - IPC handler registration\n\n2. **electron/preload.ts** - Secure bridge\n   - contextBridge exposure\n   - Validated IPC channels only\n   - Type-safe API surface\n\n3. **electron/window.ts** - Window management\n   - BrowserWindow configuration\n   - Security settings (contextIsolation, sandbox)\n   - Development vs production URL loading\n\n4. **electron/keychain.ts** - Credential storage\n   - keytar wrapper for get/set/delete\n   - Service name configuration\n\n5. **electron/cli-detector.ts** - CLI tool detection\n   - Check common installation paths\n   - Handle limited PATH in Finder launches\n   - Version detection\n\n6. **electron/ipc-handlers.ts** - IPC handlers\n   - Keychain operations\n   - CLI detection\n   - App info\n\n### Phase 3: Fix Path Resolution\n\n**CRITICAL**: Fix ALL path-related code to work when `process.cwd()` returns `/`\n\nFor every file that uses paths:\n\n```typescript\n// Add helper function\nfunction getDataDir(): string {\n  if (process.env.ELECTRON_DB_PATH) {\n    return path.dirname(process.env.ELECTRON_DB_PATH);\n  }\n  return process.cwd();\n}\n\n// Replace process.cwd() with getDataDir()\n```\n\nKey areas to fix:\n- Database file paths\n- Upload directories\n- Generated file directories\n- Temp directories\n- Log file paths\n\n### Phase 4: Server Integration\n\nIf app has embedded server:\n\n1. Modify server entry point to export the app\n2. Create `electron/server.ts` to start server on dynamic port\n3. Pass port to renderer via environment variable\n4. Configure static file serving for userData directories\n\n### Phase 5: Add Settings UI\n\nCreate Settings page for:\n- API key management (stored in keychain)\n- CLI tool status display\n- Connection testing\n\nFiles to create:\n- `src/client/pages/Settings.tsx`\n- `src/client/types/electron.d.ts`\n- `src/client/hooks/useElectron.ts`\n\n### Phase 6: Build Configuration\n\nCreate build configuration files:\n\n1. **electron-builder.config.cjs** - Distribution config\n2. **tsconfig.electron.json** - Electron TypeScript\n3. **build-resources/entitlements.mac.plist** - macOS signing\n\nAdd package.json scripts:\n```json\n{\n  \"electron:dev\": \"NODE_ENV=development electron electron-dist/main.cjs\",\n  \"electron:build\": \"esbuild electron/*.ts --bundle --platform=node --format=cjs --outdir=electron-dist --out-extension:.js=.cjs --external:electron --external:keytar --external:better-sqlite3\",\n  \"build:electron\": \"npm run build && npm run electron:build\",\n  \"dist:mac\": \"npm run build:electron && electron-builder --mac\",\n  \"dist:win\": \"npm run build:electron && electron-builder --win\",\n  \"dist:linux\": \"npm run build:electron && electron-builder --linux\"\n}\n```\n\n### Phase 7: Testing\n\nTest the conversion:\n\n1. **Development mode**: `npm run electron:dev`\n2. **Finder launch test**: Double-click built .app\n3. **API key persistence**: Save and restart\n4. **File operations**: Uploads, database, generated files\n\n## Success Criteria\n\n- [ ] Electron structure created\n- [ ] All path resolution fixed\n- [ ] Server integration complete (if applicable)\n- [ ] Settings UI implemented\n- [ ] Build configuration complete\n- [ ] Development mode works from terminal\n- [ ] App works when launched from Finder\n- [ ] API keys persist in keychain\n- [ ] File operations work correctly\n\n## Skills Used\n\nThis command uses the following skills:\n- `electron-path-resolution` - Safe path handling\n- `electron-native-modules` - Native module packaging\n- `electron-security` - Secure IPC and credentials\n- `electron-cli-integration` - CLI tool detection\n- `electron-build-config` - Multi-platform builds\n\n## Important Notes\n\n- **NEVER skip path audit** - This is the #1 cause of Electron app failures\n- **ALWAYS test Finder launch** - Terminal works, Finder breaks differently\n- **ALWAYS use keytar** - Never store credentials in localStorage\n- **NEVER expose ipcRenderer directly** - Use contextBridge\n",
        "plugins/aai-stack-electron/commands/electron-debug.md": "---\ndescription: Debug common Electron packaging and runtime issues\nargument-hint: <error-message-or-symptom>\nallowed-tools: Task, Bash, Read, Grep, Glob, Edit, Write, AskUserQuestion\n---\n\n# Electron Debug\n\nDebug and fix common Electron app issues based on error messages or symptoms.\n\n## Context\n\n- Current directory: !`pwd`\n- Electron version: !`npm list electron 2>/dev/null | grep electron || echo \"Not installed\"`\n- Node version: !`node --version`\n\n## Problem Description\n\n$ARGUMENTS\n\n## Common Issues and Solutions\n\n### Issue: \"ENOENT: no such file or directory\" with path starting with \"/\"\n\n**Symptom**: Error like `ENOENT: no such file or directory, mkdir '/.something'`\n\n**Cause**: `process.cwd()` returns `/` when app is launched from Finder (macOS) or Explorer (Windows)\n\n**Diagnosis**:\n```bash\ngrep -rn \"process.cwd()\" src/ electron/ --include=\"*.ts\" --include=\"*.js\"\n```\n\n**Fix**:\n```typescript\n// Replace process.cwd() with environment-aware function\nfunction getDataDir(): string {\n  if (process.env.ELECTRON_DB_PATH) {\n    return path.dirname(process.env.ELECTRON_DB_PATH);\n  }\n  return process.cwd();\n}\n```\n\n---\n\n### Issue: \"Module not found\" for native module\n\n**Symptom**: `Error: Cannot find module 'better-sqlite3'` (or sharp, keytar)\n\n**Cause**: Native module not included in package or not marked as external\n\n**Diagnosis**:\n```bash\n# Check if module is external in build\ncat package.json | grep -A 20 '\"scripts\"' | grep -E \"external.*better-sqlite3\"\n\n# Check if module is in files array\ncat electron-builder.config.* | grep better-sqlite3\n```\n\n**Fix**:\n1. Add `--external:better-sqlite3` to esbuild command\n2. Add `\"node_modules/better-sqlite3/**/*\"` to electron-builder files array\n3. Ensure `npmRebuild: true` in electron-builder config\n\n---\n\n### Issue: \"Invalid ELF header\" or architecture mismatch\n\n**Symptom**: Native module crashes with architecture error\n\n**Cause**: Module compiled for wrong Node version or architecture\n\n**Fix**:\n```bash\n# Delete and reinstall\nrm -rf node_modules\nnpm install\n\n# Rebuild for Electron\n./node_modules/.bin/electron-rebuild\n```\n\n---\n\n### Issue: \"could not determine executable to run\" with npx\n\n**Symptom**: `npm error could not determine executable to run`\n\n**Cause**: `node_modules/.bin` not created in packaged apps\n\n**Diagnosis**:\n```bash\ngrep -rn \"npx \" src/ --include=\"*.ts\" --include=\"*.js\"\n```\n\n**Fix**: Call CLI scripts directly:\n```typescript\n// Instead of: spawn('npx', ['remotion', 'render', ...])\nconst cliPath = path.join(app.getAppPath(), 'node_modules/@remotion/cli/remotion-cli.js');\nconst nodePath = findNodePath(); // Check common paths\nspawn(nodePath, [cliPath, 'render', ...args]);\n```\n\n---\n\n### Issue: CLI tool not found (claude, node, etc.)\n\n**Symptom**: Tool works in terminal but not when app launched from Finder\n\n**Cause**: PATH is minimal when launched from Finder: `/usr/bin:/bin:/usr/sbin:/sbin`\n\n**Diagnosis**:\n```bash\n# Check what PATH looks like in packaged app\nconsole.log('PATH:', process.env.PATH);\n```\n\n**Fix**: Check common installation paths:\n```typescript\nfunction findExecutable(name: string): string | null {\n  const home = os.homedir();\n  const paths = [\n    `/usr/local/bin/${name}`,\n    `/opt/homebrew/bin/${name}`,\n    path.join(home, '.local', 'bin', name),\n    path.join(home, '.nvm/versions/node/current/bin', name),\n  ];\n\n  for (const p of paths) {\n    if (fs.existsSync(p) && fs.accessSync(p, fs.constants.X_OK)) {\n      return p;\n    }\n  }\n  return null;\n}\n```\n\n---\n\n### Issue: Keytar \"spawn Unknown system error\" on macOS\n\n**Symptom**: Keychain operations fail silently or with spawn error\n\n**Cause**: Missing entitlements or code signing\n\n**Diagnosis**:\n```bash\n# Check entitlements\ncat build-resources/entitlements.mac.plist\n```\n\n**Fix**:\n1. Add keychain entitlement to plist:\n```xml\n<key>com.apple.security.keychain-access-groups</key>\n<array>\n  <string>$(AppIdentifierPrefix)com.yourcompany.yourapp</string>\n</array>\n```\n2. Ensure `hardenedRuntime: true` in electron-builder config\n3. Sign the app (even self-signed for testing)\n\n---\n\n### Issue: API key not found after saving\n\n**Symptom**: Key saves but isn't used by service\n\n**Cause**: Environment variable name mismatch between keychain and service\n\n**Diagnosis**:\n```bash\n# Check keychain key names\ngrep -rn \"keytar\\|KEY_NAMES\\|keychain\" electron/ --include=\"*.ts\"\n\n# Check service env var names\ngrep -rn \"process.env\\.\" src/server/services/ --include=\"*.ts\"\n```\n\n**Fix**: Ensure keychain stores with same name service reads:\n```typescript\n// Keychain stores\nawait keytar.setPassword('MyApp', 'ANTHROPIC_API_KEY', value);\n\n// Service reads - check BOTH possible names\nconst apiKey = process.env.ANTHROPIC_API_KEY || process.env.SOME_OTHER_NAME;\n```\n\n---\n\n### Issue: BrowserWindow shows blank\n\n**Symptom**: Window opens but content is white/empty\n\n**Cause**: Wrong URL or file path for production\n\n**Diagnosis**:\n```bash\ngrep -rn \"loadURL\\|loadFile\" electron/ --include=\"*.ts\"\n```\n\n**Fix**:\n```typescript\nconst isDev = process.env.NODE_ENV === 'development';\n\nif (isDev) {\n  mainWindow.loadURL('http://localhost:3000');\n} else {\n  mainWindow.loadFile(path.join(app.getAppPath(), 'dist', 'index.html'));\n}\n```\n\n---\n\n### Issue: Permission prompts for Photos/Downloads/Desktop\n\n**Symptom**: macOS shows permission dialog when app accesses certain directories\n\n**Cause**: Using a protected directory as working directory for spawned processes\n\n**Fix**: Use userData directory instead:\n```typescript\nspawn('some-command', args, {\n  cwd: app.getPath('userData'), // Safe directory\n  env: { ...process.env },\n});\n```\n\n---\n\n## Debugging Steps\n\n1. **Enable DevTools in Production**:\n```typescript\nmainWindow.webContents.openDevTools();\n```\n\n2. **Add Error Logging**:\n```typescript\nprocess.on('uncaughtException', (error) => {\n  fs.appendFileSync(\n    path.join(app.getPath('userData'), 'error.log'),\n    `${new Date().toISOString()}: ${error.stack}\\n`\n  );\n});\n```\n\n3. **Check Electron Logs** (macOS):\n```bash\n# Find app logs\ntail -f ~/Library/Logs/YourAppName/*.log\n\n# Check Console.app for crash reports\nopen /Applications/Utilities/Console.app\n```\n\n4. **Test Finder Launch vs Terminal**:\n```bash\n# Works?\nnpm run electron:dev\n\n# Also test double-click on built .app\nopen release/mac/YourApp.app\n```\n\n## Skills Used\n\nThis command uses:\n- `electron-path-resolution` - Path issue fixes\n- `electron-native-modules` - Native module issues\n- `electron-cli-integration` - CLI detection fixes\n- `electron-security` - Security and keychain fixes\n",
        "plugins/aai-stack-electron/skills/electron-build-config/SKILL.md": "---\nname: electron-build-config\ndescription: Multi-platform Electron build configuration - esbuild bundling, electron-builder setup, and distribution\n---\n\n# Electron Build Configuration Skill\n\nConfigure the build pipeline for cross-platform Electron distribution with proper bundling, native module handling, and code signing.\n\n## Build Pipeline Overview\n\n```\nSource Files  esbuild  electron-builder  Distribution\n                                             \nTypeScript    Bundle JS    Package App      DMG/EXE/AppImage\n  + React    + Externals   + Rebuild       + Code Signing\n```\n\n## esbuild Configuration\n\n### Server Bundle (Main Process)\n\n```bash\n# Build server code for Electron main process\nesbuild src/server/index.ts \\\n  --bundle \\\n  --platform=node \\\n  --format=cjs \\\n  --outfile=dist/server/index.cjs \\\n  --external:better-sqlite3 \\\n  --external:sharp \\\n  --external:keytar \\\n  --external:electron \\\n  --define:process.env.NODE_ENV=\\\"production\\\"\n```\n\n### Electron Main Process Bundle\n\n```bash\n# Build Electron main/preload scripts\nesbuild electron/main.ts electron/preload.ts \\\n  --bundle \\\n  --platform=node \\\n  --format=cjs \\\n  --outdir=electron-dist \\\n  --out-extension:.js=.cjs \\\n  --external:electron \\\n  --external:keytar \\\n  --external:better-sqlite3 \\\n  --external:sharp\n```\n\n### package.json Scripts\n\n```json\n{\n  \"scripts\": {\n    \"build\": \"vite build\",\n    \"build:server\": \"esbuild src/server/index.ts --bundle --platform=node --format=cjs --outfile=dist/server/index.cjs --external:better-sqlite3 --external:sharp --external:keytar\",\n    \"electron:build\": \"esbuild electron/*.ts --bundle --platform=node --format=cjs --outdir=electron-dist --out-extension:.js=.cjs --external:electron --external:keytar --external:better-sqlite3 --external:sharp\",\n    \"build:electron\": \"npm run build && npm run build:server && npm run electron:build\",\n    \"electron:dev\": \"NODE_ENV=development electron electron-dist/main.cjs\",\n    \"dev:electron\": \"concurrently \\\"npm run dev:client\\\" \\\"wait-on http://localhost:3000 && npm run electron:dev\\\"\",\n    \"dist\": \"npm run build:electron && electron-builder\",\n    \"dist:mac\": \"npm run build:electron && electron-builder --mac\",\n    \"dist:win\": \"npm run build:electron && electron-builder --win\",\n    \"dist:linux\": \"npm run build:electron && electron-builder --linux\"\n  }\n}\n```\n\n## electron-builder Configuration\n\n### Complete Configuration File\n\n```javascript\n// electron-builder.config.cjs\nmodule.exports = {\n  appId: 'com.yourcompany.yourapp',\n  productName: 'Your App Name',\n\n  // Directories\n  directories: {\n    output: 'release',\n    buildResources: 'build-resources',\n  },\n\n  // Files to include in the app\n  files: [\n    // Built output\n    'dist/**/*',\n    'electron-dist/**/*',\n    'public/**/*',\n    'package.json',\n\n    // Native modules with their binaries\n    'node_modules/better-sqlite3/**/*',\n    'node_modules/keytar/**/*',\n    'node_modules/sharp/**/*',\n\n    // Native module dependencies\n    'node_modules/bindings/**/*',\n    'node_modules/file-uri-to-path/**/*',\n    'node_modules/prebuild-install/**/*',\n\n    // Exclude dev files\n    '!**/*.ts',\n    '!**/*.tsx',\n    '!**/*.map',\n    '!**/node_modules/**/*.md',\n    '!**/node_modules/**/test/**',\n    '!**/node_modules/**/tests/**',\n    '!**/node_modules/**/*.d.ts',\n  ],\n\n  // CRITICAL: Rebuild native modules for Electron\n  npmRebuild: true,\n\n  // Disable asar for simpler native module handling\n  asar: false,\n\n  // macOS Configuration\n  mac: {\n    category: 'public.app-category.developer-tools',\n    icon: 'build-resources/icon.icns',\n    target: [\n      { target: 'dmg', arch: ['x64', 'arm64'] },\n      { target: 'zip', arch: ['x64', 'arm64'] },\n    ],\n    // Required for keytar and hardened runtime\n    hardenedRuntime: true,\n    gatekeeperAssess: false,\n    entitlements: 'build-resources/entitlements.mac.plist',\n    entitlementsInherit: 'build-resources/entitlements.mac.plist',\n  },\n\n  // DMG Configuration\n  dmg: {\n    contents: [\n      { x: 130, y: 220 },\n      { x: 410, y: 220, type: 'link', path: '/Applications' },\n    ],\n    window: {\n      width: 540,\n      height: 380,\n    },\n  },\n\n  // Windows Configuration\n  win: {\n    icon: 'build-resources/icon.ico',\n    target: [\n      { target: 'nsis', arch: ['x64'] },\n    ],\n    // Sign Windows builds (requires certificate)\n    // certificateFile: 'path/to/cert.pfx',\n    // certificatePassword: process.env.WIN_CERT_PASSWORD,\n  },\n\n  // NSIS Installer Configuration\n  nsis: {\n    oneClick: false,\n    perMachine: false,\n    allowToChangeInstallationDirectory: true,\n    createDesktopShortcut: true,\n    createStartMenuShortcut: true,\n  },\n\n  // Linux Configuration\n  linux: {\n    icon: 'build-resources/icons',\n    target: [\n      { target: 'AppImage', arch: ['x64'] },\n      { target: 'deb', arch: ['x64'] },\n    ],\n    category: 'Development',\n    maintainer: 'Your Name <your@email.com>',\n  },\n\n  // Publish configuration (for auto-updater)\n  publish: {\n    provider: 'github',\n    owner: 'your-org',\n    repo: 'your-repo',\n    releaseType: 'release',\n  },\n};\n```\n\n## macOS Entitlements\n\n```xml\n<!-- build-resources/entitlements.mac.plist -->\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n<plist version=\"1.0\">\n<dict>\n  <!-- Allow JIT compilation (for V8/Node.js) -->\n  <key>com.apple.security.cs.allow-jit</key>\n  <true/>\n\n  <!-- Allow unsigned executable memory -->\n  <key>com.apple.security.cs.allow-unsigned-executable-memory</key>\n  <true/>\n\n  <!-- Allow DYLD environment variables -->\n  <key>com.apple.security.cs.allow-dyld-environment-variables</key>\n  <true/>\n\n  <!-- Keychain access for keytar -->\n  <key>com.apple.security.keychain-access-groups</key>\n  <array>\n    <string>$(AppIdentifierPrefix)com.yourcompany.yourapp</string>\n  </array>\n</dict>\n</plist>\n```\n\n## TypeScript Configuration for Electron\n\n```json\n// tsconfig.electron.json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES2022\",\n    \"module\": \"CommonJS\",\n    \"moduleResolution\": \"Node\",\n    \"esModuleInterop\": true,\n    \"strict\": true,\n    \"skipLibCheck\": true,\n    \"outDir\": \"electron-dist\",\n    \"rootDir\": \"electron\",\n    \"declaration\": false,\n    \"sourceMap\": false\n  },\n  \"include\": [\"electron/**/*.ts\"],\n  \"exclude\": [\"node_modules\"]\n}\n```\n\n## Build Resources Directory\n\nCreate this structure:\n\n```\nbuild-resources/\n icon.icns              # macOS icon (512x512)\n icon.ico               # Windows icon\n icons/                 # Linux icons\n    16x16.png\n    32x32.png\n    48x48.png\n    64x64.png\n    128x128.png\n    256x256.png\n    512x512.png\n entitlements.mac.plist\n background.png         # DMG background (optional)\n```\n\n### Icon Generation Script\n\n```bash\n#!/bin/bash\n# scripts/generate-icons.sh\n# Requires: ImageMagick (brew install imagemagick)\n\nSOURCE=\"source-icon.png\"  # Your 1024x1024 source\n\n# Linux icons\nmkdir -p build-resources/icons\nfor size in 16 32 48 64 128 256 512; do\n  convert \"$SOURCE\" -resize ${size}x${size} \"build-resources/icons/${size}x${size}.png\"\ndone\n\n# macOS icns (requires iconutil on macOS)\nmkdir -p icon.iconset\nfor size in 16 32 64 128 256 512; do\n  convert \"$SOURCE\" -resize ${size}x${size} \"icon.iconset/icon_${size}x${size}.png\"\n  convert \"$SOURCE\" -resize $((size*2))x$((size*2)) \"icon.iconset/icon_${size}x${size}@2x.png\"\ndone\niconutil -c icns icon.iconset -o build-resources/icon.icns\nrm -rf icon.iconset\n\n# Windows ico\nconvert \"$SOURCE\" -resize 256x256 build-resources/icon.ico\n\necho \"Icons generated in build-resources/\"\n```\n\n## Development Workflow\n\n### Concurrent Development\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"concurrently -n client,electron \\\"npm run dev:client\\\" \\\"npm run dev:electron-watch\\\"\",\n    \"dev:client\": \"vite\",\n    \"dev:electron-watch\": \"wait-on http://localhost:3000 && nodemon --watch electron --ext ts --exec \\\"npm run electron:build && npm run electron:dev\\\"\"\n  },\n  \"devDependencies\": {\n    \"concurrently\": \"^8.0.0\",\n    \"nodemon\": \"^3.0.0\",\n    \"wait-on\": \"^7.0.0\"\n  }\n}\n```\n\n### Environment Detection\n\n```typescript\n// electron/main.ts\nconst isDev = process.env.NODE_ENV === 'development';\n\n// In development, load from Vite dev server\nif (isDev) {\n  mainWindow.loadURL('http://localhost:3000');\n} else {\n  // In production, load from built files\n  mainWindow.loadFile(path.join(app.getAppPath(), 'dist', 'index.html'));\n}\n```\n\n## Troubleshooting Builds\n\n### \"Module not found\" after packaging\n\n1. Check module is in `files` array\n2. Verify `--external` flag in esbuild\n3. Ensure module is in `dependencies`, not `devDependencies`\n\n### Native module crashes\n\n1. Delete `node_modules` and reinstall\n2. Run `./node_modules/.bin/electron-rebuild`\n3. Check architecture matches (arm64 vs x64)\n\n### Code signing issues (macOS)\n\n1. Verify entitlements file exists\n2. Check Apple Developer certificate is valid\n3. Run `codesign --verify --deep --strict YourApp.app`\n\n### App won't launch from Finder\n\n1. Check `process.cwd()` not used (returns `/`)\n2. Verify preload path uses `app.getAppPath()`\n3. Check database path uses `app.getPath('userData')`\n\n## Production Checklist\n\n- [ ] All native modules in `files` array\n- [ ] esbuild externals configured correctly\n- [ ] `npmRebuild: true` in electron-builder config\n- [ ] macOS entitlements configured for keytar\n- [ ] Icons generated for all platforms\n- [ ] TypeScript compiled to CommonJS\n- [ ] Environment variables not hardcoded\n- [ ] Database path uses userData directory\n- [ ] Tested Finder launch (not just terminal)\n- [ ] Build produces working installers\n\n## Integration\n\nUsed by:\n- `electron-converter` agent\n- Distribution pipeline\n",
        "plugins/aai-stack-electron/skills/electron-cli-integration/SKILL.md": "---\nname: electron-cli-integration\ndescription: Integrate external CLI tools (Claude, Node, npx) in Electron apps with proper PATH handling\n---\n\n# Electron CLI Integration Skill\n\nWhen Electron apps launch from Finder/Explorer, the PATH is minimal. This skill covers detecting and using CLI tools reliably.\n\n## The PATH Problem\n\nWhen launched from terminal:\n```\nPATH=/usr/local/bin:/usr/bin:/bin:/opt/homebrew/bin:~/.nvm/versions/node/v20/bin:...\n```\n\nWhen launched from Finder (macOS):\n```\nPATH=/usr/bin:/bin:/usr/sbin:/sbin\n```\n\n## CLI Detector Pattern\n\n```typescript\n// electron/cli-detector.ts\nimport { exec } from 'child_process';\nimport { promisify } from 'util';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as os from 'os';\n\nconst execAsync = promisify(exec);\n\nexport interface CliStatus {\n  found: boolean;\n  path?: string;\n  version?: string;\n  error?: string;\n}\n\n// Common installation paths for various tools\nfunction getCommonPaths(toolName: string): string[] {\n  const home = os.homedir();\n\n  return [\n    // Homebrew (macOS)\n    `/usr/local/bin/${toolName}`,\n    `/opt/homebrew/bin/${toolName}`,\n\n    // User-local installations\n    path.join(home, '.local', 'bin', toolName),\n\n    // Tool-specific locations\n    path.join(home, '.claude', 'bin', toolName),\n\n    // Node.js via nvm\n    path.join(home, '.nvm', 'versions', 'node', 'current', 'bin', toolName),\n\n    // System paths\n    `/usr/bin/${toolName}`,\n\n    // Windows-specific (if on Windows)\n    path.join(home, 'AppData', 'Roaming', 'npm', `${toolName}.cmd`),\n    `C:\\\\Program Files\\\\nodejs\\\\${toolName}.cmd`,\n  ];\n}\n\nfunction isExecutable(filePath: string): boolean {\n  try {\n    fs.accessSync(filePath, fs.constants.X_OK);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nfunction findInCommonPaths(toolName: string): string | null {\n  for (const toolPath of getCommonPaths(toolName)) {\n    if (fs.existsSync(toolPath) && isExecutable(toolPath)) {\n      return toolPath;\n    }\n  }\n  return null;\n}\n\nexport async function detectCli(toolName: string): Promise<CliStatus> {\n  // First, check common installation paths\n  let toolPath = findInCommonPaths(toolName);\n\n  // If not found, try 'which' command (works if terminal has full PATH)\n  if (!toolPath) {\n    try {\n      const which = await import('which');\n      toolPath = await which.default(toolName);\n    } catch {\n      // Not found in PATH either\n    }\n  }\n\n  if (!toolPath) {\n    return {\n      found: false,\n      error: `${toolName} not found. Check common installation paths or ensure it's in your PATH.`,\n    };\n  }\n\n  // Get version\n  try {\n    const { stdout } = await execAsync(`\"${toolPath}\" --version`, {\n      timeout: 5000,\n    });\n    const version = stdout.trim();\n\n    return {\n      found: true,\n      path: toolPath,\n      version,\n    };\n  } catch {\n    // Found but couldn't get version\n    return {\n      found: true,\n      path: toolPath,\n      error: `Found ${toolName} but could not determine version`,\n    };\n  }\n}\n\n// Specific detectors for common tools\nexport async function detectClaudeCli(): Promise<CliStatus> {\n  return detectCli('claude');\n}\n\nexport async function detectNode(): Promise<CliStatus> {\n  return detectCli('node');\n}\n\nexport async function detectNpx(): Promise<CliStatus> {\n  return detectCli('npx');\n}\n```\n\n## Using CLI Tools at Runtime\n\n### Spawning with Safe Paths\n\n```typescript\n// src/server/services/cli-runner.ts\nimport { spawn } from 'child_process';\nimport * as path from 'path';\nimport * as os from 'os';\nimport * as fs from 'fs';\n\ninterface SpawnOptions {\n  args: string[];\n  cwd?: string;\n  env?: NodeJS.ProcessEnv;\n  onStdout?: (data: string) => void;\n  onStderr?: (data: string) => void;\n}\n\n// Get safe working directory (not root!)\nfunction getSafeWorkingDir(): string {\n  if (process.env.ELECTRON_DB_PATH) {\n    return path.dirname(process.env.ELECTRON_DB_PATH);\n  }\n  return os.tmpdir();\n}\n\n// Find executable in common paths\nfunction findExecutable(name: string): string {\n  const home = os.homedir();\n  const paths = [\n    `/usr/local/bin/${name}`,\n    `/opt/homebrew/bin/${name}`,\n    path.join(home, '.local', 'bin', name),\n    path.join(home, '.nvm/versions/node/current/bin', name),\n    `/usr/bin/${name}`,\n  ];\n\n  for (const p of paths) {\n    try {\n      fs.accessSync(p, fs.constants.X_OK);\n      return p;\n    } catch {}\n  }\n\n  // Fallback - hope it's in PATH\n  return name;\n}\n\nexport async function runCli(\n  toolName: string,\n  options: SpawnOptions\n): Promise<{ exitCode: number; stdout: string; stderr: string }> {\n  return new Promise((resolve) => {\n    const toolPath = process.env[`${toolName.toUpperCase()}_PATH`] || findExecutable(toolName);\n    const cwd = options.cwd || getSafeWorkingDir();\n\n    let stdout = '';\n    let stderr = '';\n\n    // Use bash to ensure proper environment\n    const fullCommand = `\"${toolPath}\" ${options.args.map((a) => `\"${a}\"`).join(' ')}`;\n\n    const proc = spawn('/bin/bash', ['-c', fullCommand], {\n      cwd,\n      env: { ...process.env, ...options.env },\n      stdio: ['pipe', 'pipe', 'pipe'],\n    });\n\n    proc.stdout.on('data', (data) => {\n      const text = data.toString();\n      stdout += text;\n      options.onStdout?.(text);\n    });\n\n    proc.stderr.on('data', (data) => {\n      const text = data.toString();\n      stderr += text;\n      options.onStderr?.(text);\n    });\n\n    proc.on('close', (code) => {\n      resolve({\n        exitCode: code ?? 1,\n        stdout,\n        stderr,\n      });\n    });\n\n    proc.on('error', (err) => {\n      resolve({\n        exitCode: 1,\n        stdout,\n        stderr: err.message,\n      });\n    });\n  });\n}\n```\n\n### Claude CLI Integration\n\n```typescript\n// src/server/services/claude-cli.ts\nimport { spawn } from 'child_process';\nimport * as path from 'path';\nimport * as os from 'os';\n\nfunction getClaudePath(): string {\n  // Check environment variable first (set by main process)\n  if (process.env.CLAUDE_PATH) {\n    return process.env.CLAUDE_PATH;\n  }\n\n  // Search common paths\n  const home = os.homedir();\n  const paths = [\n    '/usr/local/bin/claude',\n    '/opt/homebrew/bin/claude',\n    path.join(home, '.local', 'bin', 'claude'),\n    path.join(home, '.claude', 'bin', 'claude'),\n  ];\n\n  for (const p of paths) {\n    try {\n      require('fs').accessSync(p, require('fs').constants.X_OK);\n      return p;\n    } catch {}\n  }\n\n  return 'claude'; // Fallback\n}\n\nfunction getSafeWorkingDir(): string {\n  if (process.env.ELECTRON_DB_PATH) {\n    return path.dirname(process.env.ELECTRON_DB_PATH);\n  }\n  return os.tmpdir();\n}\n\nexport async function runClaudeCommand(\n  prompt: string\n): Promise<{ success: boolean; output: string; error?: string }> {\n  return new Promise((resolve) => {\n    const claudePath = getClaudePath();\n\n    const proc = spawn('/bin/bash', ['-c', `\"${claudePath}\" --print --output-format text`], {\n      cwd: getSafeWorkingDir(),\n      env: { ...process.env },\n      stdio: ['pipe', 'pipe', 'pipe'],\n    });\n\n    let output = '';\n    let error = '';\n\n    // Write prompt to stdin\n    proc.stdin.write(prompt);\n    proc.stdin.end();\n\n    proc.stdout.on('data', (data) => {\n      output += data.toString();\n    });\n\n    proc.stderr.on('data', (data) => {\n      error += data.toString();\n    });\n\n    proc.on('close', (code) => {\n      if (code === 0 && output.trim()) {\n        resolve({ success: true, output: output.trim() });\n      } else {\n        resolve({\n          success: false,\n          output,\n          error: error || 'Command failed',\n        });\n      }\n    });\n\n    proc.on('error', (err) => {\n      resolve({\n        success: false,\n        output: '',\n        error: err.message,\n      });\n    });\n  });\n}\n```\n\n### Running npx Without .bin Directory\n\nIn packaged apps, `node_modules/.bin` doesn't exist. Call CLI scripts directly:\n\n```typescript\n// src/server/services/remotion-runner.ts\nimport { spawn } from 'child_process';\nimport * as path from 'path';\nimport * as os from 'os';\n\nfunction findNodePath(): string {\n  const home = os.homedir();\n  const paths = [\n    '/usr/local/bin/node',\n    '/opt/homebrew/bin/node',\n    path.join(home, '.nvm/versions/node/current/bin/node'),\n  ];\n\n  const fs = require('fs');\n  for (const p of paths) {\n    try {\n      fs.accessSync(p, fs.constants.X_OK);\n      return p;\n    } catch {}\n  }\n\n  // In Electron, process.execPath is the Electron binary\n  // which can run Node.js code\n  return process.execPath;\n}\n\nfunction getAppRoot(): string {\n  if (process.env.ELECTRON_APP_ROOT) {\n    return path.join(process.env.ELECTRON_APP_ROOT, '..');\n  }\n  return process.cwd();\n}\n\nexport async function runRemotionRender(args: string[]): Promise<void> {\n  const nodePath = findNodePath();\n  const appRoot = getAppRoot();\n\n  // Call CLI script directly instead of using npx\n  const remotionCli = path.join(appRoot, 'node_modules/@remotion/cli/remotion-cli.js');\n\n  const fullCommand = `\"${nodePath}\" \"${remotionCli}\" ${args.map((a) => `\"${a}\"`).join(' ')}`;\n\n  return new Promise((resolve, reject) => {\n    const proc = spawn('/bin/bash', ['-c', fullCommand], {\n      cwd: appRoot, // Must run from where node_modules is\n      env: { ...process.env },\n      stdio: ['pipe', 'pipe', 'pipe'],\n    });\n\n    proc.on('close', (code) => {\n      if (code === 0) {\n        resolve();\n      } else {\n        reject(new Error(`Render failed with code ${code}`));\n      }\n    });\n\n    proc.on('error', reject);\n  });\n}\n```\n\n## IPC Handler for CLI Detection\n\n```typescript\n// electron/ipc-handlers.ts\nimport { ipcMain } from 'electron';\nimport { detectClaudeCli, detectNode, detectNpx } from './cli-detector';\n\nexport function registerCliHandlers(): void {\n  ipcMain.handle('cli:detect-claude', async () => {\n    const result = await detectClaudeCli();\n    // Store path for server to use\n    if (result.found && result.path) {\n      process.env.CLAUDE_PATH = result.path;\n    }\n    return result;\n  });\n\n  ipcMain.handle('cli:detect-node', async () => {\n    return detectNode();\n  });\n\n  ipcMain.handle('cli:detect-npx', async () => {\n    return detectNpx();\n  });\n\n  ipcMain.handle('cli:detect-all', async () => {\n    const [claude, node, npx] = await Promise.all([\n      detectClaudeCli(),\n      detectNode(),\n      detectNpx(),\n    ]);\n    return { claude, node, npx };\n  });\n}\n```\n\n## CLI Status Display Component\n\n```typescript\n// src/client/components/CliStatus.tsx\nimport React, { useEffect, useState } from 'react';\nimport { useElectron } from '../hooks/useElectron';\n\ninterface CliInfo {\n  found: boolean;\n  path?: string;\n  version?: string;\n  error?: string;\n}\n\nexport function CliStatus() {\n  const { isElectron, invoke } = useElectron();\n  const [status, setStatus] = useState<Record<string, CliInfo>>({});\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function detect() {\n      if (!isElectron) return;\n\n      const result = await invoke<Record<string, CliInfo>>('cli:detect-all');\n      if (result) {\n        setStatus(result);\n      }\n      setLoading(false);\n    }\n\n    detect();\n  }, [isElectron, invoke]);\n\n  if (!isElectron) return null;\n  if (loading) return <div>Detecting CLI tools...</div>;\n\n  return (\n    <div className=\"cli-status\">\n      <h3>CLI Tools</h3>\n      {Object.entries(status).map(([name, info]) => (\n        <div key={name} className={`cli-item ${info.found ? 'found' : 'missing'}`}>\n          <span className=\"cli-name\">{name}</span>\n          {info.found ? (\n            <>\n              <span className=\"cli-version\">{info.version}</span>\n              <span className=\"cli-path\" title={info.path}>\n                {info.path}\n              </span>\n            </>\n          ) : (\n            <span className=\"cli-error\">{info.error}</span>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n```\n\n## Startup Detection\n\n```typescript\n// electron/main.ts\nimport { detectClaudeCli } from './cli-detector';\n\nasync function initializeCli(): Promise<void> {\n  // Auto-detect Claude CLI at startup\n  try {\n    const cliStatus = await detectClaudeCli();\n    if (cliStatus.found && cliStatus.path) {\n      process.env.CLAUDE_PATH = cliStatus.path;\n      console.log(`Claude CLI found at: ${cliStatus.path}`);\n    } else {\n      console.warn('Claude CLI not found:', cliStatus.error);\n    }\n  } catch (error) {\n    console.error('Error detecting Claude CLI:', error);\n  }\n}\n\napp.whenReady().then(async () => {\n  await initializeCli();\n  // ... rest of startup\n});\n```\n\n## Anti-Patterns\n\n```typescript\n// NEVER do these:\n\n// 1. Assume PATH is complete\nspawn('claude', ['--version']); // Fails from Finder!\n\n// 2. Use npx in packaged apps\nspawn('npx', ['remotion', 'render']); // .bin doesn't exist!\n\n// 3. Use process.cwd() as working directory\nspawn('node', ['script.js'], { cwd: process.cwd() }); // Returns \"/\" !\n\n// 4. Hardcode paths\nconst claudePath = '/usr/local/bin/claude'; // May not exist!\n```\n\n## Integration\n\nUsed by:\n- `electron-converter` agent\n- `electron-security` skill\n",
        "plugins/aai-stack-electron/skills/electron-native-modules/SKILL.md": "---\nname: electron-native-modules\ndescription: Handle native Node.js modules in Electron - better-sqlite3, sharp, keytar packaging patterns\n---\n\n# Electron Native Modules Skill\n\nNative modules require special handling in Electron because they must be compiled for Electron's Node.js version, not the system Node.js.\n\n## Common Native Modules\n\n| Module | Purpose | Special Notes |\n|--------|---------|---------------|\n| `better-sqlite3` | SQLite database | Most common, requires rebuild |\n| `sharp` | Image processing | Large, multi-platform binaries |\n| `keytar` | OS keychain access | Security-sensitive |\n| `node-pty` | Terminal emulation | Platform-specific |\n| `serialport` | Serial port access | Hardware access |\n\n## Bundler Configuration\n\n### esbuild (Recommended)\n\nNative modules MUST be external - they cannot be bundled:\n\n```bash\n# Build command\nesbuild src/server/index.ts \\\n  --bundle \\\n  --platform=node \\\n  --format=cjs \\\n  --outfile=dist/server/index.cjs \\\n  --external:better-sqlite3 \\\n  --external:sharp \\\n  --external:keytar \\\n  --external:electron\n```\n\n### package.json script\n\n```json\n{\n  \"scripts\": {\n    \"build:server\": \"esbuild src/server/index.ts --bundle --platform=node --format=cjs --outfile=dist/server/index.cjs --external:better-sqlite3 --external:sharp --external:keytar\",\n    \"electron:build\": \"esbuild electron/*.ts --bundle --platform=node --format=cjs --outdir=electron-dist --out-extension:.js=.cjs --external:electron --external:keytar --external:better-sqlite3 --external:sharp\"\n  }\n}\n```\n\n## electron-builder Configuration\n\n```javascript\n// electron-builder.config.cjs\nmodule.exports = {\n  appId: 'com.yourcompany.yourapp',\n  productName: 'Your App',\n\n  // CRITICAL: Include native modules in the app\n  files: [\n    'dist/**/*',\n    'electron-dist/**/*',\n    'public/**/*',\n    'package.json',\n    // Native modules need their binary files\n    'node_modules/better-sqlite3/**/*',\n    'node_modules/keytar/**/*',\n    'node_modules/sharp/**/*',\n    // Also include their dependencies\n    'node_modules/bindings/**/*',\n    'node_modules/file-uri-to-path/**/*',\n    'node_modules/prebuild-install/**/*',\n  ],\n\n  // CRITICAL: Rebuild native modules for Electron\n  npmRebuild: true,\n\n  // Don't use asar for apps with native modules (simpler, avoids issues)\n  asar: false,\n\n  // Or use asar with unpacking\n  // asar: true,\n  // asarUnpack: [\n  //   'node_modules/better-sqlite3/**/*',\n  //   'node_modules/keytar/**/*',\n  //   'node_modules/sharp/**/*',\n  // ],\n\n  mac: {\n    category: 'public.app-category.developer-tools',\n    target: [\n      { target: 'dmg', arch: ['x64', 'arm64'] },\n      { target: 'zip', arch: ['x64', 'arm64'] },\n    ],\n    // Required for keytar\n    hardenedRuntime: true,\n    entitlements: 'build-resources/entitlements.mac.plist',\n    entitlementsInherit: 'build-resources/entitlements.mac.plist',\n  },\n\n  win: {\n    target: [\n      { target: 'nsis', arch: ['x64'] },\n    ],\n  },\n\n  linux: {\n    target: [\n      { target: 'AppImage', arch: ['x64'] },\n      { target: 'deb', arch: ['x64'] },\n    ],\n    category: 'Development',\n  },\n};\n```\n\n## macOS Entitlements for Keytar\n\n```xml\n<!-- build-resources/entitlements.mac.plist -->\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n<plist version=\"1.0\">\n<dict>\n  <key>com.apple.security.cs.allow-jit</key>\n  <true/>\n  <key>com.apple.security.cs.allow-unsigned-executable-memory</key>\n  <true/>\n  <key>com.apple.security.cs.allow-dyld-environment-variables</key>\n  <true/>\n  <key>com.apple.security.keychain-access-groups</key>\n  <array>\n    <string>$(AppIdentifierPrefix)com.yourcompany.yourapp</string>\n  </array>\n</dict>\n</plist>\n```\n\n## better-sqlite3 Specifics\n\n### Database Path\n\n```typescript\nimport Database from 'better-sqlite3';\nimport path from 'path';\n\nfunction getDbPath(): string {\n  if (process.env.ELECTRON_DB_PATH) {\n    return process.env.ELECTRON_DB_PATH;\n  }\n  return path.resolve(process.cwd(), 'data', 'app.db');\n}\n\nconst db = new Database(getDbPath());\n```\n\n### Auto-Migration on First Launch\n\n```typescript\n// Ensure tables exist on first launch\nfunction initializeDatabase(db: Database.Database) {\n  db.exec(`\n    CREATE TABLE IF NOT EXISTS users (\n      id TEXT PRIMARY KEY,\n      name TEXT NOT NULL,\n      created_at TEXT DEFAULT CURRENT_TIMESTAMP\n    );\n\n    CREATE TABLE IF NOT EXISTS settings (\n      key TEXT PRIMARY KEY,\n      value TEXT\n    );\n  `);\n}\n\n// Call at startup\ninitializeDatabase(db);\n```\n\n## keytar for Secure Storage\n\n```typescript\n// electron/keychain.ts\nimport * as keytar from 'keytar';\n\nconst SERVICE_NAME = 'YourAppName';\n\nexport const KEY_NAMES = {\n  API_KEY: 'api-key',\n  AUTH_TOKEN: 'auth-token',\n} as const;\n\nexport async function getCredential(key: string): Promise<string | null> {\n  try {\n    return await keytar.getPassword(SERVICE_NAME, key);\n  } catch (error) {\n    console.error('Failed to get credential:', error);\n    return null;\n  }\n}\n\nexport async function setCredential(key: string, value: string): Promise<boolean> {\n  try {\n    await keytar.setPassword(SERVICE_NAME, key, value);\n    return true;\n  } catch (error) {\n    console.error('Failed to set credential:', error);\n    return false;\n  }\n}\n\nexport async function deleteCredential(key: string): Promise<boolean> {\n  try {\n    return await keytar.deletePassword(SERVICE_NAME, key);\n  } catch (error) {\n    console.error('Failed to delete credential:', error);\n    return false;\n  }\n}\n```\n\n## sharp for Image Processing\n\n```typescript\nimport sharp from 'sharp';\nimport path from 'path';\n\nfunction getOutputDir(): string {\n  if (process.env.ELECTRON_DB_PATH) {\n    return path.join(path.dirname(process.env.ELECTRON_DB_PATH), 'processed');\n  }\n  return path.resolve(process.cwd(), 'public/processed');\n}\n\nasync function processImage(inputPath: string, outputName: string): Promise<string> {\n  const outputDir = getOutputDir();\n  const outputPath = path.join(outputDir, outputName);\n\n  await sharp(inputPath)\n    .resize(800, 600)\n    .jpeg({ quality: 80 })\n    .toFile(outputPath);\n\n  return outputPath;\n}\n```\n\n## Deployment Script Pattern\n\nCreate a deployment script that installs only production dependencies:\n\n```javascript\n// scripts/prepare-electron.cjs\nconst { execSync } = require('child_process');\nconst fs = require('fs');\nconst path = require('path');\n\nconst deployDir = 'electron-deploy';\n\n// Clean and create deploy directory\nif (fs.existsSync(deployDir)) {\n  fs.rmSync(deployDir, { recursive: true });\n}\nfs.mkdirSync(deployDir);\n\n// Copy package.json with only production deps\nconst pkg = require('../package.json');\nconst prodPkg = {\n  name: pkg.name,\n  version: pkg.version,\n  main: 'electron-dist/main.cjs',\n  dependencies: pkg.dependencies,\n};\nfs.writeFileSync(\n  path.join(deployDir, 'package.json'),\n  JSON.stringify(prodPkg, null, 2)\n);\n\n// Install production dependencies\nexecSync('npm install --omit=dev', { cwd: deployDir, stdio: 'inherit' });\n\n// Copy built files\nfs.cpSync('dist', path.join(deployDir, 'dist'), { recursive: true });\nfs.cpSync('electron-dist', path.join(deployDir, 'electron-dist'), { recursive: true });\nfs.cpSync('public', path.join(deployDir, 'public'), { recursive: true });\n\nconsole.log('Deployment directory ready');\n```\n\n## Troubleshooting\n\n### \"Module not found\" after packaging\n\n1. Check the module is in `files` array in electron-builder config\n2. Verify `--external` flag in esbuild command\n3. Check module is in `dependencies`, not `devDependencies`\n\n### \"Invalid ELF header\" or architecture mismatch\n\n1. Delete `node_modules` and reinstall\n2. Run `./node_modules/.bin/electron-rebuild`\n3. Ensure building on same architecture as target\n\n### keytar \"Error: spawn Unknown system error\"\n\n1. Ensure macOS entitlements are configured\n2. Sign the app (even with self-signed for testing)\n3. Check keychain access permissions\n\n## Integration\n\nUsed by:\n- `electron-converter` agent\n- `electron-build-config` skill\n",
        "plugins/aai-stack-electron/skills/electron-path-resolution/SKILL.md": "---\nname: electron-path-resolution\ndescription: Critical path resolution patterns for Electron apps - avoid process.cwd() and __dirname pitfalls\n---\n\n# Electron Path Resolution Skill\n\nPath resolution is the #1 cause of Electron app failures. This skill covers all the pitfalls and their solutions.\n\n## The Core Problem\n\nWhen an Electron app is launched from Finder/Explorer (NOT terminal):\n- `process.cwd()` returns `/` on macOS, `C:\\Windows\\System32` on Windows\n- `__dirname` in bundled code is resolved at bundle time, not runtime\n- Node.js module resolution fails for bundled apps\n\n## Environment Setup Pattern\n\nIn your main process, set environment variables that ALL code can use:\n\n```typescript\n// electron/main.ts\nimport { app } from 'electron';\nimport path from 'path';\n\nasync function initializeEnvironment() {\n  // User data directory (database, uploads, cache)\n  const userDataDir = app.getPath('userData');\n\n  // App resources directory (bundled assets, node_modules)\n  const appRoot = app.getAppPath();\n\n  // Set environment variables for all processes\n  process.env.ELECTRON_USER_DATA = userDataDir;\n  process.env.ELECTRON_APP_ROOT = appRoot;\n  process.env.ELECTRON_DB_PATH = path.join(userDataDir, 'app.db');\n\n  // Ensure directories exist\n  const fs = require('fs');\n  const dirs = ['uploads', 'generated', 'cache', 'logs'];\n  for (const dir of dirs) {\n    const dirPath = path.join(userDataDir, dir);\n    if (!fs.existsSync(dirPath)) {\n      fs.mkdirSync(dirPath, { recursive: true });\n    }\n  }\n}\n```\n\n## Safe Path Helper Functions\n\nCreate utility functions that ALL code uses:\n\n```typescript\n// src/shared/electron-paths.ts\nimport path from 'path';\nimport os from 'os';\n\n/**\n * Get the user data directory (for database, uploads, etc.)\n * Works in both Electron and development\n */\nexport function getUserDataDir(): string {\n  if (process.env.ELECTRON_USER_DATA) {\n    return process.env.ELECTRON_USER_DATA;\n  }\n  if (process.env.ELECTRON_DB_PATH) {\n    return path.dirname(process.env.ELECTRON_DB_PATH);\n  }\n  // Development fallback\n  return path.resolve(process.cwd(), 'data');\n}\n\n/**\n * Get the app root directory (for bundled assets)\n */\nexport function getAppRoot(): string {\n  if (process.env.ELECTRON_APP_ROOT) {\n    return process.env.ELECTRON_APP_ROOT;\n  }\n  // Development fallback\n  return process.cwd();\n}\n\n/**\n * Check if running in Electron\n */\nexport function isElectron(): boolean {\n  return !!process.env.ELECTRON_USER_DATA || !!process.env.ELECTRON_DB_PATH;\n}\n\n/**\n * Get safe working directory for spawning processes\n */\nexport function getSafeWorkingDir(): string {\n  if (isElectron()) {\n    return getUserDataDir();\n  }\n  return process.cwd();\n}\n\n/**\n * Resolve a file path that may be relative or absolute\n * Handles /assets/... URLs in Electron\n */\nexport function resolveFilePath(relativePath: string): string {\n  if (!relativePath.startsWith('/')) {\n    return relativePath; // Already absolute or relative to cwd\n  }\n\n  const filename = path.basename(relativePath);\n\n  if (isElectron()) {\n    const userData = getUserDataDir();\n    // Map URL paths to userData directories\n    if (relativePath.includes('/uploaded/') || relativePath.includes('/uploads/')) {\n      return path.join(userData, 'uploads', filename);\n    }\n    if (relativePath.includes('/generated/')) {\n      return path.join(userData, 'generated', filename);\n    }\n    if (relativePath.includes('/renders/')) {\n      return path.join(userData, 'renders', filename);\n    }\n    // Static assets from app bundle\n    return path.join(getAppRoot(), 'public', relativePath);\n  }\n\n  // Development\n  return path.join(process.cwd(), 'public', relativePath);\n}\n```\n\n## Fixing Existing Code\n\n### Database Location\n\n```typescript\n// BAD\nconst dbPath = path.resolve(process.cwd(), 'data', 'app.db');\n\n// GOOD\nimport { getUserDataDir } from './electron-paths';\nconst dbPath = process.env.ELECTRON_DB_PATH || path.join(getUserDataDir(), 'app.db');\n```\n\n### File Uploads\n\n```typescript\n// BAD\nconst uploadsDir = path.join(process.cwd(), 'public', 'uploads');\n\n// GOOD\nfunction getUploadsDir(): string {\n  if (process.env.ELECTRON_DB_PATH) {\n    const userDataDir = path.dirname(process.env.ELECTRON_DB_PATH);\n    return path.join(userDataDir, 'uploads');\n  }\n  return path.join(process.cwd(), 'public', 'uploads');\n}\n```\n\n### Generated Files\n\n```typescript\n// BAD\nconst GENERATED_DIR = path.resolve(process.cwd(), 'public/assets/generated');\n\n// GOOD\nfunction getGeneratedDir(): string {\n  if (process.env.ELECTRON_DB_PATH) {\n    const userDataDir = path.dirname(process.env.ELECTRON_DB_PATH);\n    return path.join(userDataDir, 'generated');\n  }\n  return path.resolve(process.cwd(), 'public/assets/generated');\n}\nconst GENERATED_DIR = getGeneratedDir();\n```\n\n### Temp Directories\n\n```typescript\n// BAD\nconst tempDir = path.resolve(process.cwd(), '.temp');\n\n// GOOD\nfunction getTempDir(): string {\n  if (process.env.ELECTRON_DB_PATH) {\n    const userDataDir = path.dirname(process.env.ELECTRON_DB_PATH);\n    return path.join(userDataDir, '.temp');\n  }\n  return path.resolve(process.cwd(), '.temp');\n}\n```\n\n## Static File Serving in Express\n\n```typescript\n// src/server/index.ts\nimport express from 'express';\nimport path from 'path';\n\nconst app = express();\nconst isElectron = !!process.env.ELECTRON_DB_PATH;\n\nif (isElectron) {\n  const userDataDir = path.dirname(process.env.ELECTRON_DB_PATH!);\n\n  // User-generated files from userData\n  app.use('/assets/uploads', express.static(path.join(userDataDir, 'uploads')));\n  app.use('/assets/generated', express.static(path.join(userDataDir, 'generated')));\n  app.use('/assets/renders', express.static(path.join(userDataDir, 'renders')));\n\n  // Static assets from app bundle\n  const publicPath = process.env.ELECTRON_APP_ROOT\n    ? path.join(process.env.ELECTRON_APP_ROOT, '..', 'public')\n    : path.resolve(__dirname, '../../public');\n  app.use('/assets', express.static(publicPath));\n} else {\n  // Development\n  app.use('/assets', express.static(path.join(process.cwd(), 'public/assets')));\n}\n```\n\n## Preload Path in BrowserWindow\n\n```typescript\n// electron/window.ts\nimport { app, BrowserWindow } from 'electron';\nimport path from 'path';\n\nconst isDev = process.env.NODE_ENV === 'development';\n\nexport function createMainWindow() {\n  // CRITICAL: Use app.getAppPath() in production\n  const preloadPath = isDev\n    ? path.join(__dirname, 'preload.cjs')\n    : path.join(app.getAppPath(), 'electron-dist', 'preload.cjs');\n\n  const win = new BrowserWindow({\n    webPreferences: {\n      preload: preloadPath,\n      contextIsolation: true,\n      nodeIntegration: false,\n    },\n  });\n\n  return win;\n}\n```\n\n## Anti-Patterns\n\n```typescript\n// NEVER use these in Electron apps:\n\n// 1. Raw process.cwd()\nconst bad1 = process.cwd(); // Returns \"/\" in Finder!\n\n// 2. Raw __dirname in bundled code\nconst bad2 = __dirname; // Resolved at bundle time!\n\n// 3. require.resolve() for bundled modules\nconst bad3 = require.resolve('./config.json'); // Breaks in bundled app!\n\n// 4. Relative paths without base\nconst bad4 = './data/file.txt'; // Relative to what?!\n```\n\n## Validation Checklist\n\nBefore packaging:\n\n- [ ] Search codebase for `process.cwd()` - all replaced with helpers?\n- [ ] Search for `__dirname` - only used with app.getAppPath() fallback?\n- [ ] All file paths use environment-aware helpers?\n- [ ] Static file serving configured for both dev and production?\n- [ ] Temp directories use userData?\n\n## Integration\n\nUsed by:\n- `electron-converter` agent\n- `electron-build-config` skill\n",
        "plugins/aai-stack-electron/skills/electron-security/SKILL.md": "---\nname: electron-security\ndescription: Secure IPC patterns, credential storage, and API key management for Electron apps\n---\n\n# Electron Security Skill\n\nSecurity is critical in Electron apps. This skill covers secure IPC, credential storage, and protecting sensitive data.\n\n## Secure IPC with contextBridge\n\nNEVER expose Node.js directly to the renderer. Use contextBridge:\n\n### Preload Script\n\n```typescript\n// electron/preload.ts\nimport { contextBridge, ipcRenderer } from 'electron';\n\n// Define allowed channels\nconst validSendChannels = [\n  'keychain:set',\n  'keychain:delete',\n  'cli:detect',\n  'app:quit',\n];\n\nconst validReceiveChannels = [\n  'keychain:result',\n  'cli:status',\n  'update:available',\n];\n\nconst validInvokeChannels = [\n  'keychain:get',\n  'keychain:set',\n  'keychain:delete',\n  'cli:detect-claude',\n  'app:get-version',\n  'app:get-paths',\n];\n\ncontextBridge.exposeInMainWorld('electronAPI', {\n  // Invoke pattern (request-response)\n  invoke: (channel: string, ...args: unknown[]) => {\n    if (validInvokeChannels.includes(channel)) {\n      return ipcRenderer.invoke(channel, ...args);\n    }\n    throw new Error(`Invalid channel: ${channel}`);\n  },\n\n  // Send pattern (fire-and-forget)\n  send: (channel: string, ...args: unknown[]) => {\n    if (validSendChannels.includes(channel)) {\n      ipcRenderer.send(channel, ...args);\n    }\n  },\n\n  // Receive pattern (listen for events)\n  on: (channel: string, callback: (...args: unknown[]) => void) => {\n    if (validReceiveChannels.includes(channel)) {\n      const subscription = (_event: Electron.IpcRendererEvent, ...args: unknown[]) =>\n        callback(...args);\n      ipcRenderer.on(channel, subscription);\n      return () => ipcRenderer.removeListener(channel, subscription);\n    }\n    throw new Error(`Invalid channel: ${channel}`);\n  },\n\n  // One-time listener\n  once: (channel: string, callback: (...args: unknown[]) => void) => {\n    if (validReceiveChannels.includes(channel)) {\n      ipcRenderer.once(channel, (_event, ...args) => callback(...args));\n    }\n  },\n});\n```\n\n### TypeScript Declarations\n\n```typescript\n// src/client/types/electron.d.ts\nexport interface ElectronAPI {\n  invoke: (channel: string, ...args: unknown[]) => Promise<unknown>;\n  send: (channel: string, ...args: unknown[]) => void;\n  on: (channel: string, callback: (...args: unknown[]) => void) => () => void;\n  once: (channel: string, callback: (...args: unknown[]) => void) => void;\n}\n\ndeclare global {\n  interface Window {\n    electronAPI?: ElectronAPI;\n  }\n}\n\nexport {};\n```\n\n### React Hook for Electron API\n\n```typescript\n// src/client/hooks/useElectron.ts\nimport { useCallback, useEffect } from 'react';\n\nexport function useElectron() {\n  const isElectron = typeof window !== 'undefined' && !!window.electronAPI;\n\n  const invoke = useCallback(\n    async <T>(channel: string, ...args: unknown[]): Promise<T | null> => {\n      if (!isElectron) return null;\n      try {\n        return (await window.electronAPI!.invoke(channel, ...args)) as T;\n      } catch (error) {\n        console.error(`IPC invoke error on ${channel}:`, error);\n        throw error;\n      }\n    },\n    [isElectron]\n  );\n\n  const send = useCallback(\n    (channel: string, ...args: unknown[]) => {\n      if (isElectron) {\n        window.electronAPI!.send(channel, ...args);\n      }\n    },\n    [isElectron]\n  );\n\n  const on = useCallback(\n    (channel: string, callback: (...args: unknown[]) => void) => {\n      if (!isElectron) return () => {};\n      return window.electronAPI!.on(channel, callback);\n    },\n    [isElectron]\n  );\n\n  return { isElectron, invoke, send, on };\n}\n\n// Keychain-specific hooks\nexport const KEY_NAMES = {\n  ANTHROPIC_API_KEY: 'anthropic-api-key',\n  GEMINI_API_KEY: 'gemini-api-key',\n  OPENAI_API_KEY: 'openai-api-key',\n} as const;\n\nexport function useKeychain() {\n  const { isElectron, invoke } = useElectron();\n\n  const getKey = async (keyName: string): Promise<string | null> => {\n    if (!isElectron) return null;\n    return invoke<string | null>('keychain:get', keyName);\n  };\n\n  const setKey = async (keyName: string, value: string): Promise<boolean> => {\n    if (!isElectron) return false;\n    return (await invoke<boolean>('keychain:set', keyName, value)) ?? false;\n  };\n\n  const deleteKey = async (keyName: string): Promise<boolean> => {\n    if (!isElectron) return false;\n    return (await invoke<boolean>('keychain:delete', keyName)) ?? false;\n  };\n\n  return { isElectron, getKey, setKey, deleteKey };\n}\n```\n\n## Secure Credential Storage\n\n### Main Process IPC Handlers\n\n```typescript\n// electron/ipc-handlers.ts\nimport { ipcMain, app } from 'electron';\nimport { getCredential, setCredential, deleteCredential, KEY_NAMES } from './keychain';\n\n// Map keychain keys to environment variables\nconst KEY_TO_ENV: Record<string, string> = {\n  [KEY_NAMES.ANTHROPIC_API_KEY]: 'ANTHROPIC_API_KEY',\n  [KEY_NAMES.GEMINI_API_KEY]: 'GEMINI_API_KEY',\n  [KEY_NAMES.OPENAI_API_KEY]: 'OPENAI_API_KEY',\n};\n\nexport function registerIpcHandlers(): void {\n  // Get credential from keychain\n  ipcMain.handle('keychain:get', async (_event, keyName: string) => {\n    return getCredential(keyName);\n  });\n\n  // Set credential in keychain AND environment\n  ipcMain.handle('keychain:set', async (_event, keyName: string, value: string) => {\n    const result = await setCredential(keyName, value);\n    // Also set as environment variable so server can use it immediately\n    if (result && KEY_TO_ENV[keyName]) {\n      process.env[KEY_TO_ENV[keyName]] = value;\n    }\n    return result;\n  });\n\n  // Delete credential from keychain AND environment\n  ipcMain.handle('keychain:delete', async (_event, keyName: string) => {\n    const result = await deleteCredential(keyName);\n    if (result && KEY_TO_ENV[keyName]) {\n      delete process.env[KEY_TO_ENV[keyName]];\n    }\n    return result;\n  });\n\n  // App info\n  ipcMain.handle('app:get-version', () => app.getVersion());\n  ipcMain.handle('app:get-paths', () => ({\n    userData: app.getPath('userData'),\n    temp: app.getPath('temp'),\n  }));\n}\n```\n\n### Load Credentials at Startup\n\n```typescript\n// electron/main.ts\nimport { app } from 'electron';\nimport { getCredential, KEY_NAMES } from './keychain';\n\nasync function loadCredentials(): Promise<void> {\n  const keyMappings = [\n    { key: KEY_NAMES.ANTHROPIC_API_KEY, env: 'ANTHROPIC_API_KEY' },\n    { key: KEY_NAMES.GEMINI_API_KEY, env: 'GEMINI_API_KEY' },\n    { key: KEY_NAMES.OPENAI_API_KEY, env: 'OPENAI_API_KEY' },\n  ];\n\n  for (const { key, env } of keyMappings) {\n    try {\n      const value = await getCredential(key);\n      if (value) {\n        process.env[env] = value;\n        console.log(`Loaded ${key} from keychain`);\n      }\n    } catch (error) {\n      console.error(`Failed to load ${key}:`, error);\n    }\n  }\n}\n\napp.whenReady().then(async () => {\n  await loadCredentials();\n  // ... rest of startup\n});\n```\n\n## Settings UI Component\n\n```typescript\n// src/client/pages/Settings.tsx\nimport React, { useState, useEffect } from 'react';\nimport { useKeychain, KEY_NAMES } from '../hooks/useElectron';\n\ninterface KeyConfig {\n  name: string;\n  keyName: string;\n  placeholder: string;\n}\n\nconst API_KEYS: KeyConfig[] = [\n  {\n    name: 'Anthropic API Key',\n    keyName: KEY_NAMES.ANTHROPIC_API_KEY,\n    placeholder: 'sk-ant-...',\n  },\n  {\n    name: 'Google Gemini API Key',\n    keyName: KEY_NAMES.GEMINI_API_KEY,\n    placeholder: 'AIza...',\n  },\n];\n\nexport function Settings() {\n  const { isElectron, getKey, setKey, deleteKey } = useKeychain();\n  const [values, setValues] = useState<Record<string, string>>({});\n  const [saved, setSaved] = useState<Record<string, boolean>>({});\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function loadKeys() {\n      if (!isElectron) return;\n\n      const loaded: Record<string, string> = {};\n      const savedState: Record<string, boolean> = {};\n\n      for (const key of API_KEYS) {\n        const value = await getKey(key.keyName);\n        if (value) {\n          loaded[key.keyName] = '' + value.slice(-4);\n          savedState[key.keyName] = true;\n        }\n      }\n\n      setValues(loaded);\n      setSaved(savedState);\n      setLoading(false);\n    }\n\n    loadKeys();\n  }, [isElectron, getKey]);\n\n  const handleSave = async (keyName: string, value: string) => {\n    if (!value.startsWith('')) {\n      const success = await setKey(keyName, value);\n      if (success) {\n        setValues((prev) => ({\n          ...prev,\n          [keyName]: '' + value.slice(-4),\n        }));\n        setSaved((prev) => ({ ...prev, [keyName]: true }));\n      }\n    }\n  };\n\n  const handleDelete = async (keyName: string) => {\n    const success = await deleteKey(keyName);\n    if (success) {\n      setValues((prev) => ({ ...prev, [keyName]: '' }));\n      setSaved((prev) => ({ ...prev, [keyName]: false }));\n    }\n  };\n\n  if (!isElectron) {\n    return <div>Settings are only available in the desktop app.</div>;\n  }\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"settings-page\">\n      <h1>Settings</h1>\n\n      <section>\n        <h2>API Keys</h2>\n        <p>Your API keys are stored securely in your system keychain.</p>\n\n        {API_KEYS.map((key) => (\n          <div key={key.keyName} className=\"key-input-group\">\n            <label>{key.name}</label>\n            <input\n              type=\"password\"\n              placeholder={key.placeholder}\n              value={values[key.keyName] || ''}\n              onChange={(e) =>\n                setValues((prev) => ({ ...prev, [key.keyName]: e.target.value }))\n              }\n            />\n            <button onClick={() => handleSave(key.keyName, values[key.keyName] || '')}>\n              Save\n            </button>\n            {saved[key.keyName] && (\n              <button onClick={() => handleDelete(key.keyName)}>Delete</button>\n            )}\n            {saved[key.keyName] && <span className=\"saved-badge\">Saved</span>}\n          </div>\n        ))}\n      </section>\n    </div>\n  );\n}\n```\n\n## Navigation Security\n\nPrevent navigation to untrusted URLs:\n\n```typescript\n// electron/main.ts\napp.on('web-contents-created', (_, contents) => {\n  // Block navigation to external URLs\n  contents.on('will-navigate', (event, navigationUrl) => {\n    const parsedUrl = new URL(navigationUrl);\n    const allowedOrigins = ['localhost', '127.0.0.1'];\n\n    if (!allowedOrigins.includes(parsedUrl.hostname)) {\n      event.preventDefault();\n      console.warn('Blocked navigation to:', navigationUrl);\n    }\n  });\n\n  // Block new window creation\n  contents.setWindowOpenHandler(({ url }) => {\n    // Open external links in default browser\n    if (url.startsWith('https://')) {\n      require('electron').shell.openExternal(url);\n    }\n    return { action: 'deny' };\n  });\n});\n```\n\n## BrowserWindow Security Settings\n\n```typescript\n// electron/window.ts\nimport { BrowserWindow } from 'electron';\n\nexport function createMainWindow() {\n  const win = new BrowserWindow({\n    width: 1200,\n    height: 800,\n    webPreferences: {\n      // CRITICAL: Enable context isolation\n      contextIsolation: true,\n\n      // CRITICAL: Disable Node.js integration in renderer\n      nodeIntegration: false,\n\n      // Use preload script for IPC\n      preload: preloadPath,\n\n      // Disable remote module\n      enableRemoteModule: false,\n\n      // Sandbox renderer process\n      sandbox: true,\n\n      // Disable webview tag\n      webviewTag: false,\n    },\n  });\n\n  return win;\n}\n```\n\n## Anti-Patterns\n\n```typescript\n// NEVER do these:\n\n// 1. Expose ipcRenderer directly\ncontextBridge.exposeInMainWorld('ipc', ipcRenderer); // DANGEROUS!\n\n// 2. Allow any channel\nipcRenderer.invoke(anyUserProvidedChannel); // DANGEROUS!\n\n// 3. Eval user input\neval(userInput); // DANGEROUS!\n\n// 4. Disable security features\nwebPreferences: {\n  nodeIntegration: true, // DANGEROUS!\n  contextIsolation: false, // DANGEROUS!\n}\n\n// 5. Store credentials in localStorage\nlocalStorage.setItem('apiKey', key); // Use keychain instead!\n```\n\n## Integration\n\nUsed by:\n- `electron-converter` agent\n- Settings page implementation\n",
        "plugins/aai-stack-express/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-express\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Express patterns - routing, middleware, authentication, validation, error handling\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"express\", \"nodejs\", \"api\", \"middleware\", \"backend\"]\n}\n",
        "plugins/aai-stack-express/skills/express-auth/SKILL.md": "---\nname: express-auth\ndescription: Authentication patterns for Express.js\nuser-invocable: false\n---\n\n# Express Auth Skill\n\nAuthentication implementation patterns for Express.js applications.\n\n## JWT Authentication\n\n### Token Generation\n\n```typescript\nimport jwt from 'jsonwebtoken'\n\ninterface TokenPayload {\n  userId: string\n  email: string\n  role: string\n}\n\nconst ACCESS_TOKEN_EXPIRY = '15m'\nconst REFRESH_TOKEN_EXPIRY = '7d'\n\nfunction generateAccessToken(payload: TokenPayload): string {\n  return jwt.sign(payload, process.env.JWT_SECRET!, {\n    expiresIn: ACCESS_TOKEN_EXPIRY,\n  })\n}\n\nfunction generateRefreshToken(payload: TokenPayload): string {\n  return jwt.sign(payload, process.env.JWT_REFRESH_SECRET!, {\n    expiresIn: REFRESH_TOKEN_EXPIRY,\n  })\n}\n\nfunction generateTokenPair(user: User) {\n  const payload = { userId: user.id, email: user.email, role: user.role }\n  return {\n    accessToken: generateAccessToken(payload),\n    refreshToken: generateRefreshToken(payload),\n  }\n}\n```\n\n### Token Verification\n\n```typescript\nfunction verifyAccessToken(token: string): TokenPayload {\n  return jwt.verify(token, process.env.JWT_SECRET!) as TokenPayload\n}\n\nfunction verifyRefreshToken(token: string): TokenPayload {\n  return jwt.verify(token, process.env.JWT_REFRESH_SECRET!) as TokenPayload\n}\n```\n\n### Auth Middleware\n\n```typescript\nfunction authenticate(req: Request, res: Response, next: NextFunction) {\n  const authHeader = req.headers.authorization\n\n  if (!authHeader?.startsWith('Bearer ')) {\n    return res.status(401).json({ error: 'Missing authorization header' })\n  }\n\n  const token = authHeader.slice(7)\n\n  try {\n    const payload = verifyAccessToken(token)\n    req.user = payload\n    next()\n  } catch (error) {\n    if (error instanceof jwt.TokenExpiredError) {\n      return res.status(401).json({ error: 'Token expired' })\n    }\n    return res.status(401).json({ error: 'Invalid token' })\n  }\n}\n```\n\n## Login Flow\n\n### Login Endpoint\n\n```typescript\nrouter.post('/login', async (req, res, next) => {\n  try {\n    const { email, password } = req.body\n\n    // Find user\n    const user = await userService.findByEmail(email)\n    if (!user) {\n      return res.status(401).json({ error: 'Invalid credentials' })\n    }\n\n    // Verify password\n    const isValid = await bcrypt.compare(password, user.passwordHash)\n    if (!isValid) {\n      return res.status(401).json({ error: 'Invalid credentials' })\n    }\n\n    // Generate tokens\n    const tokens = generateTokenPair(user)\n\n    // Store refresh token\n    await tokenService.storeRefreshToken(user.id, tokens.refreshToken)\n\n    // Set refresh token as HTTP-only cookie\n    res.cookie('refreshToken', tokens.refreshToken, {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      sameSite: 'strict',\n      maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days\n    })\n\n    res.json({\n      accessToken: tokens.accessToken,\n      user: { id: user.id, email: user.email, name: user.name },\n    })\n  } catch (error) {\n    next(error)\n  }\n})\n```\n\n### Refresh Token Endpoint\n\n```typescript\nrouter.post('/refresh', async (req, res, next) => {\n  try {\n    const refreshToken = req.cookies.refreshToken\n\n    if (!refreshToken) {\n      return res.status(401).json({ error: 'No refresh token' })\n    }\n\n    // Verify refresh token\n    let payload: TokenPayload\n    try {\n      payload = verifyRefreshToken(refreshToken)\n    } catch {\n      return res.status(401).json({ error: 'Invalid refresh token' })\n    }\n\n    // Check if token is in storage (not revoked)\n    const storedToken = await tokenService.getRefreshToken(payload.userId)\n    if (storedToken !== refreshToken) {\n      return res.status(401).json({ error: 'Token revoked' })\n    }\n\n    // Get fresh user data\n    const user = await userService.findById(payload.userId)\n    if (!user) {\n      return res.status(401).json({ error: 'User not found' })\n    }\n\n    // Generate new tokens\n    const tokens = generateTokenPair(user)\n\n    // Rotate refresh token\n    await tokenService.storeRefreshToken(user.id, tokens.refreshToken)\n\n    res.cookie('refreshToken', tokens.refreshToken, {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      sameSite: 'strict',\n      maxAge: 7 * 24 * 60 * 60 * 1000,\n    })\n\n    res.json({ accessToken: tokens.accessToken })\n  } catch (error) {\n    next(error)\n  }\n})\n```\n\n### Logout Endpoint\n\n```typescript\nrouter.post('/logout', authenticate, async (req, res, next) => {\n  try {\n    // Remove refresh token from storage\n    await tokenService.removeRefreshToken(req.user!.userId)\n\n    // Clear cookie\n    res.clearCookie('refreshToken')\n\n    res.json({ message: 'Logged out successfully' })\n  } catch (error) {\n    next(error)\n  }\n})\n```\n\n## Password Handling\n\n### Password Hashing\n\n```typescript\nimport bcrypt from 'bcrypt'\n\nconst SALT_ROUNDS = 12\n\nasync function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, SALT_ROUNDS)\n}\n\nasync function verifyPassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash)\n}\n```\n\n### Password Reset Flow\n\n```typescript\nimport crypto from 'crypto'\n\n// Request password reset\nrouter.post('/forgot-password', async (req, res, next) => {\n  try {\n    const { email } = req.body\n\n    const user = await userService.findByEmail(email)\n    if (!user) {\n      // Don't reveal if email exists\n      return res.json({ message: 'If the email exists, a reset link was sent' })\n    }\n\n    // Generate reset token\n    const resetToken = crypto.randomBytes(32).toString('hex')\n    const hashedToken = crypto.createHash('sha256').update(resetToken).digest('hex')\n\n    // Store with expiry\n    await userService.setPasswordResetToken(user.id, hashedToken, Date.now() + 3600000)\n\n    // Send email\n    await emailService.sendPasswordReset(email, resetToken)\n\n    res.json({ message: 'If the email exists, a reset link was sent' })\n  } catch (error) {\n    next(error)\n  }\n})\n\n// Reset password\nrouter.post('/reset-password', async (req, res, next) => {\n  try {\n    const { token, password } = req.body\n\n    // Hash the token for comparison\n    const hashedToken = crypto.createHash('sha256').update(token).digest('hex')\n\n    // Find user with valid token\n    const user = await userService.findByResetToken(hashedToken)\n    if (!user || user.resetTokenExpiry < Date.now()) {\n      return res.status(400).json({ error: 'Invalid or expired token' })\n    }\n\n    // Update password\n    const passwordHash = await hashPassword(password)\n    await userService.updatePassword(user.id, passwordHash)\n\n    // Clear reset token\n    await userService.clearResetToken(user.id)\n\n    // Revoke all refresh tokens\n    await tokenService.removeAllRefreshTokens(user.id)\n\n    res.json({ message: 'Password reset successful' })\n  } catch (error) {\n    next(error)\n  }\n})\n```\n\n## OAuth Integration\n\n### Passport Setup\n\n```typescript\nimport passport from 'passport'\nimport { Strategy as GoogleStrategy } from 'passport-google-oauth20'\n\npassport.use(new GoogleStrategy({\n  clientID: process.env.GOOGLE_CLIENT_ID!,\n  clientSecret: process.env.GOOGLE_CLIENT_SECRET!,\n  callbackURL: '/auth/google/callback',\n}, async (accessToken, refreshToken, profile, done) => {\n  try {\n    let user = await userService.findByGoogleId(profile.id)\n\n    if (!user) {\n      user = await userService.create({\n        email: profile.emails![0].value,\n        name: profile.displayName,\n        googleId: profile.id,\n        avatar: profile.photos?.[0]?.value,\n      })\n    }\n\n    done(null, user)\n  } catch (error) {\n    done(error as Error)\n  }\n}))\n```\n\n### OAuth Routes\n\n```typescript\nrouter.get('/google',\n  passport.authenticate('google', { scope: ['profile', 'email'] })\n)\n\nrouter.get('/google/callback',\n  passport.authenticate('google', { session: false }),\n  async (req, res) => {\n    const user = req.user as User\n    const tokens = generateTokenPair(user)\n\n    await tokenService.storeRefreshToken(user.id, tokens.refreshToken)\n\n    res.cookie('refreshToken', tokens.refreshToken, {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      sameSite: 'strict',\n    })\n\n    // Redirect to frontend with token\n    res.redirect(`${process.env.FRONTEND_URL}/auth/callback?token=${tokens.accessToken}`)\n  }\n)\n```\n\n## Session Authentication\n\n### Session Setup\n\n```typescript\nimport session from 'express-session'\nimport RedisStore from 'connect-redis'\nimport { createClient } from 'redis'\n\nconst redisClient = createClient({ url: process.env.REDIS_URL })\nredisClient.connect()\n\napp.use(session({\n  store: new RedisStore({ client: redisClient }),\n  secret: process.env.SESSION_SECRET!,\n  resave: false,\n  saveUninitialized: false,\n  cookie: {\n    secure: process.env.NODE_ENV === 'production',\n    httpOnly: true,\n    maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days\n  },\n}))\n```\n\n### Session Auth Middleware\n\n```typescript\nfunction requireSession(req: Request, res: Response, next: NextFunction) {\n  if (!req.session.userId) {\n    return res.status(401).json({ error: 'Not authenticated' })\n  }\n  next()\n}\n\n// Login with session\nrouter.post('/login', async (req, res) => {\n  const user = await authenticate(req.body.email, req.body.password)\n  if (!user) {\n    return res.status(401).json({ error: 'Invalid credentials' })\n  }\n\n  req.session.userId = user.id\n  req.session.role = user.role\n\n  res.json({ user })\n})\n\n// Logout\nrouter.post('/logout', (req, res) => {\n  req.session.destroy((err) => {\n    if (err) {\n      return res.status(500).json({ error: 'Logout failed' })\n    }\n    res.clearCookie('connect.sid')\n    res.json({ message: 'Logged out' })\n  })\n})\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-express/skills/express-error-handling/SKILL.md": "---\nname: express-error-handling\ndescription: Error handling patterns for Express.js applications\nuser-invocable: false\n---\n\n# Express Error Handling Skill\n\nPatterns for comprehensive error handling in Express.js.\n\n## Error Class Hierarchy\n\n### Base Application Error\n\n```typescript\nexport class AppError extends Error {\n  public readonly statusCode: number\n  public readonly code: string\n  public readonly isOperational: boolean\n\n  constructor(\n    message: string,\n    statusCode: number = 500,\n    code: string = 'INTERNAL_ERROR',\n    isOperational: boolean = true\n  ) {\n    super(message)\n    this.statusCode = statusCode\n    this.code = code\n    this.isOperational = isOperational\n\n    Error.captureStackTrace(this, this.constructor)\n  }\n}\n```\n\n### Specific Error Classes\n\n```typescript\nexport class NotFoundError extends AppError {\n  constructor(resource: string, id?: string) {\n    const message = id\n      ? `${resource} with ID ${id} not found`\n      : `${resource} not found`\n    super(message, 404, 'NOT_FOUND')\n  }\n}\n\nexport class ValidationError extends AppError {\n  public readonly details: Record<string, string[]>\n\n  constructor(message: string, details: Record<string, string[]> = {}) {\n    super(message, 400, 'VALIDATION_ERROR')\n    this.details = details\n  }\n}\n\nexport class UnauthorizedError extends AppError {\n  constructor(message: string = 'Unauthorized') {\n    super(message, 401, 'UNAUTHORIZED')\n  }\n}\n\nexport class ForbiddenError extends AppError {\n  constructor(message: string = 'Forbidden') {\n    super(message, 403, 'FORBIDDEN')\n  }\n}\n\nexport class ConflictError extends AppError {\n  constructor(message: string) {\n    super(message, 409, 'CONFLICT')\n  }\n}\n\nexport class RateLimitError extends AppError {\n  public readonly retryAfter: number\n\n  constructor(retryAfter: number = 60) {\n    super('Too many requests', 429, 'RATE_LIMIT_EXCEEDED')\n    this.retryAfter = retryAfter\n  }\n}\n```\n\n## Error Handler Middleware\n\n### Main Error Handler\n\n```typescript\nimport { Request, Response, NextFunction } from 'express'\n\ninterface ErrorResponse {\n  error: {\n    code: string\n    message: string\n    details?: unknown\n    stack?: string\n  }\n}\n\nexport function errorHandler(\n  error: Error,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  // Log error\n  console.error({\n    timestamp: new Date().toISOString(),\n    requestId: req.id,\n    path: req.path,\n    method: req.method,\n    error: {\n      name: error.name,\n      message: error.message,\n      stack: error.stack,\n    },\n  })\n\n  // Handle AppError\n  if (error instanceof AppError) {\n    const response: ErrorResponse = {\n      error: {\n        code: error.code,\n        message: error.message,\n      },\n    }\n\n    if (error instanceof ValidationError) {\n      response.error.details = error.details\n    }\n\n    if (error instanceof RateLimitError) {\n      res.setHeader('Retry-After', error.retryAfter)\n    }\n\n    if (process.env.NODE_ENV === 'development') {\n      response.error.stack = error.stack\n    }\n\n    return res.status(error.statusCode).json(response)\n  }\n\n  // Handle unexpected errors\n  const response: ErrorResponse = {\n    error: {\n      code: 'INTERNAL_ERROR',\n      message: process.env.NODE_ENV === 'production'\n        ? 'An unexpected error occurred'\n        : error.message,\n    },\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    response.error.stack = error.stack\n  }\n\n  res.status(500).json(response)\n}\n```\n\n### Async Handler Wrapper\n\n```typescript\ntype AsyncRequestHandler = (\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => Promise<any>\n\nexport function asyncHandler(fn: AsyncRequestHandler): RequestHandler {\n  return (req, res, next) => {\n    Promise.resolve(fn(req, res, next)).catch(next)\n  }\n}\n\n// Usage\nrouter.get('/users/:id', asyncHandler(async (req, res) => {\n  const user = await userService.findById(req.params.id)\n  if (!user) {\n    throw new NotFoundError('User', req.params.id)\n  }\n  res.json({ data: user })\n}))\n```\n\n## Error Handling Patterns\n\n### Controller Error Handling\n\n```typescript\n// Without asyncHandler\nexport async function getUser(req: Request, res: Response, next: NextFunction) {\n  try {\n    const user = await userService.findById(req.params.id)\n    if (!user) {\n      throw new NotFoundError('User', req.params.id)\n    }\n    res.json({ data: user })\n  } catch (error) {\n    next(error)\n  }\n}\n\n// With asyncHandler\nexport const getUser = asyncHandler(async (req, res) => {\n  const user = await userService.findById(req.params.id)\n  if (!user) {\n    throw new NotFoundError('User', req.params.id)\n  }\n  res.json({ data: user })\n})\n```\n\n### Service Error Handling\n\n```typescript\nexport class UserService {\n  async findById(id: string): Promise<User> {\n    const user = await this.repository.findById(id)\n    if (!user) {\n      throw new NotFoundError('User', id)\n    }\n    return user\n  }\n\n  async create(data: CreateUserInput): Promise<User> {\n    // Check for duplicate email\n    const existing = await this.repository.findByEmail(data.email)\n    if (existing) {\n      throw new ConflictError('Email already in use')\n    }\n\n    try {\n      return await this.repository.create(data)\n    } catch (error) {\n      // Handle database-specific errors\n      if (isDuplicateKeyError(error)) {\n        throw new ConflictError('User already exists')\n      }\n      throw error\n    }\n  }\n}\n```\n\n## Database Error Handling\n\n### Prisma Errors\n\n```typescript\nimport { Prisma } from '@prisma/client'\n\nfunction handlePrismaError(error: unknown): AppError {\n  if (error instanceof Prisma.PrismaClientKnownRequestError) {\n    switch (error.code) {\n      case 'P2002':\n        const field = (error.meta?.target as string[])?.[0] || 'field'\n        return new ConflictError(`${field} already exists`)\n      case 'P2025':\n        return new NotFoundError('Record')\n      case 'P2003':\n        return new ValidationError('Invalid reference')\n      default:\n        return new AppError('Database error', 500, 'DATABASE_ERROR')\n    }\n  }\n\n  if (error instanceof Prisma.PrismaClientValidationError) {\n    return new ValidationError('Invalid data format')\n  }\n\n  throw error\n}\n\n// Usage in service\nasync function createUser(data: CreateUserInput): Promise<User> {\n  try {\n    return await prisma.user.create({ data })\n  } catch (error) {\n    throw handlePrismaError(error)\n  }\n}\n```\n\n## Not Found Handler\n\n```typescript\nexport function notFoundHandler(req: Request, res: Response) {\n  res.status(404).json({\n    error: {\n      code: 'ROUTE_NOT_FOUND',\n      message: `Route ${req.method} ${req.path} not found`,\n    },\n  })\n}\n\n// Register after all routes\napp.use(notFoundHandler)\n```\n\n## Unhandled Rejection Handler\n\n```typescript\n// Handle unhandled promise rejections\nprocess.on('unhandledRejection', (reason: Error) => {\n  console.error('Unhandled Rejection:', reason)\n  // Optionally send to error tracking service\n})\n\n// Handle uncaught exceptions\nprocess.on('uncaughtException', (error: Error) => {\n  console.error('Uncaught Exception:', error)\n  // Perform graceful shutdown\n  process.exit(1)\n})\n```\n\n## Error Logging\n\n### Structured Logging\n\n```typescript\nimport winston from 'winston'\n\nconst logger = winston.createLogger({\n  level: 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.json()\n  ),\n  transports: [\n    new winston.transports.Console(),\n    new winston.transports.File({ filename: 'error.log', level: 'error' }),\n  ],\n})\n\nexport function errorLogger(\n  error: Error,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  logger.error({\n    message: error.message,\n    stack: error.stack,\n    request: {\n      method: req.method,\n      path: req.path,\n      query: req.query,\n      body: req.body,\n      headers: {\n        'user-agent': req.headers['user-agent'],\n        'content-type': req.headers['content-type'],\n      },\n    },\n    user: req.user?.id,\n    requestId: req.id,\n  })\n\n  next(error)\n}\n\n// Use before error handler\napp.use(errorLogger)\napp.use(errorHandler)\n```\n\n## Graceful Shutdown\n\n```typescript\nimport http from 'http'\n\nconst server = http.createServer(app)\n\nfunction gracefulShutdown(signal: string) {\n  console.log(`Received ${signal}, shutting down gracefully...`)\n\n  server.close(() => {\n    console.log('HTTP server closed')\n\n    // Close database connections\n    prisma.$disconnect().then(() => {\n      console.log('Database connection closed')\n      process.exit(0)\n    })\n  })\n\n  // Force shutdown after timeout\n  setTimeout(() => {\n    console.error('Forced shutdown after timeout')\n    process.exit(1)\n  }, 30000)\n}\n\nprocess.on('SIGTERM', () => gracefulShutdown('SIGTERM'))\nprocess.on('SIGINT', () => gracefulShutdown('SIGINT'))\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-express/skills/express-middleware/SKILL.md": "---\nname: express-middleware\ndescription: Express.js middleware patterns and implementation\nuser-invocable: false\n---\n\n# Express Middleware Skill\n\nPatterns for creating and using middleware in Express.js.\n\n## Middleware Basics\n\n### Middleware Structure\n\n```typescript\nimport { Request, Response, NextFunction } from 'express'\n\n// Basic middleware\nfunction middleware(req: Request, res: Response, next: NextFunction) {\n  // Do something\n  next()  // Pass to next middleware\n}\n\n// Middleware with error\nfunction middlewareWithError(req: Request, res: Response, next: NextFunction) {\n  if (!req.headers.authorization) {\n    return next(new Error('No authorization header'))\n  }\n  next()\n}\n\n// Async middleware\nasync function asyncMiddleware(req: Request, res: Response, next: NextFunction) {\n  try {\n    const data = await fetchSomething()\n    req.data = data\n    next()\n  } catch (error) {\n    next(error)\n  }\n}\n```\n\n### Middleware Order\n\n```typescript\nimport express from 'express'\n\nconst app = express()\n\n// Order matters! Middleware runs top to bottom\n\n// 1. Body parsing (run early)\napp.use(express.json())\napp.use(express.urlencoded({ extended: true }))\n\n// 2. Logging (run early)\napp.use(morgan('dev'))\n\n// 3. Security headers\napp.use(helmet())\n\n// 4. CORS\napp.use(cors())\n\n// 5. Authentication (before routes)\napp.use(authenticate)\n\n// 6. Routes\napp.use('/api', routes)\n\n// 7. 404 handler (after routes)\napp.use(notFoundHandler)\n\n// 8. Error handler (last)\napp.use(errorHandler)\n```\n\n## Request Processing\n\n### Request Logging\n\n```typescript\nfunction requestLogger(req: Request, res: Response, next: NextFunction) {\n  const start = Date.now()\n\n  // Log on response finish\n  res.on('finish', () => {\n    const duration = Date.now() - start\n    console.log({\n      method: req.method,\n      path: req.path,\n      status: res.statusCode,\n      duration: `${duration}ms`,\n      ip: req.ip,\n    })\n  })\n\n  next()\n}\n```\n\n### Request ID\n\n```typescript\nimport { v4 as uuid } from 'uuid'\n\nfunction requestId(req: Request, res: Response, next: NextFunction) {\n  const id = req.headers['x-request-id'] || uuid()\n  req.id = id as string\n  res.setHeader('X-Request-ID', id)\n  next()\n}\n```\n\n### Rate Limiting\n\n```typescript\nimport rateLimit from 'express-rate-limit'\n\nconst limiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100, // Limit each IP to 100 requests per window\n  message: { error: 'Too many requests, please try again later' },\n  standardHeaders: true,\n  legacyHeaders: false,\n})\n\napp.use('/api', limiter)\n\n// Different limits for different routes\nconst strictLimiter = rateLimit({\n  windowMs: 60 * 1000,\n  max: 5,\n})\n\napp.use('/api/auth/login', strictLimiter)\n```\n\n## Validation\n\n### Body Validation\n\n```typescript\nimport { z } from 'zod'\n\nfunction validateBody(schema: z.ZodSchema) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const result = schema.safeParse(req.body)\n\n    if (!result.success) {\n      return res.status(400).json({\n        error: 'Validation failed',\n        details: result.error.flatten().fieldErrors,\n      })\n    }\n\n    req.body = result.data\n    next()\n  }\n}\n\n// Usage\nconst createUserSchema = z.object({\n  name: z.string().min(1).max(100),\n  email: z.string().email(),\n  password: z.string().min(8),\n})\n\nrouter.post('/users', validateBody(createUserSchema), createUser)\n```\n\n### Query Validation\n\n```typescript\nfunction validateQuery(schema: z.ZodSchema) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const result = schema.safeParse(req.query)\n\n    if (!result.success) {\n      return res.status(400).json({\n        error: 'Invalid query parameters',\n        details: result.error.flatten().fieldErrors,\n      })\n    }\n\n    req.query = result.data\n    next()\n  }\n}\n\nconst paginationSchema = z.object({\n  page: z.coerce.number().int().positive().default(1),\n  limit: z.coerce.number().int().min(1).max(100).default(10),\n  sort: z.enum(['asc', 'desc']).default('desc'),\n})\n\nrouter.get('/posts', validateQuery(paginationSchema), listPosts)\n```\n\n## Authentication\n\n### JWT Authentication\n\n```typescript\nimport jwt from 'jsonwebtoken'\n\ninterface JWTPayload {\n  userId: string\n  email: string\n  role: string\n}\n\nfunction authenticate(req: Request, res: Response, next: NextFunction) {\n  const authHeader = req.headers.authorization\n\n  if (!authHeader?.startsWith('Bearer ')) {\n    return res.status(401).json({ error: 'Missing token' })\n  }\n\n  const token = authHeader.substring(7)\n\n  try {\n    const payload = jwt.verify(token, process.env.JWT_SECRET!) as JWTPayload\n    req.user = payload\n    next()\n  } catch (error) {\n    return res.status(401).json({ error: 'Invalid token' })\n  }\n}\n\n// Optional authentication\nfunction optionalAuth(req: Request, res: Response, next: NextFunction) {\n  const authHeader = req.headers.authorization\n\n  if (!authHeader?.startsWith('Bearer ')) {\n    return next()  // Continue without user\n  }\n\n  const token = authHeader.substring(7)\n\n  try {\n    const payload = jwt.verify(token, process.env.JWT_SECRET!) as JWTPayload\n    req.user = payload\n  } catch (error) {\n    // Invalid token, continue without user\n  }\n\n  next()\n}\n```\n\n### Role-Based Access\n\n```typescript\nfunction requireRole(...roles: string[]) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    if (!req.user) {\n      return res.status(401).json({ error: 'Unauthorized' })\n    }\n\n    if (!roles.includes(req.user.role)) {\n      return res.status(403).json({ error: 'Forbidden' })\n    }\n\n    next()\n  }\n}\n\n// Usage\nrouter.delete('/users/:id', authenticate, requireRole('admin'), deleteUser)\nrouter.get('/reports', authenticate, requireRole('admin', 'manager'), getReports)\n```\n\n## Error Handling\n\n### Error Handler\n\n```typescript\nimport { Request, Response, NextFunction } from 'express'\n\ninterface AppError extends Error {\n  statusCode?: number\n  code?: string\n  details?: unknown\n}\n\nfunction errorHandler(\n  error: AppError,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  console.error('Error:', {\n    message: error.message,\n    stack: error.stack,\n    path: req.path,\n    method: req.method,\n  })\n\n  const statusCode = error.statusCode || 500\n  const code = error.code || 'INTERNAL_ERROR'\n\n  res.status(statusCode).json({\n    error: {\n      code,\n      message: error.message,\n      ...(process.env.NODE_ENV === 'development' && { stack: error.stack }),\n    },\n  })\n}\n```\n\n### Async Handler Wrapper\n\n```typescript\ntype AsyncHandler = (\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => Promise<void>\n\nfunction asyncHandler(fn: AsyncHandler) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    Promise.resolve(fn(req, res, next)).catch(next)\n  }\n}\n\n// Usage\nrouter.get('/users', asyncHandler(async (req, res) => {\n  const users = await userService.findAll()\n  res.json({ data: users })\n}))\n```\n\n### 404 Handler\n\n```typescript\nfunction notFoundHandler(req: Request, res: Response) {\n  res.status(404).json({\n    error: {\n      code: 'NOT_FOUND',\n      message: `Route ${req.method} ${req.path} not found`,\n    },\n  })\n}\n\n// Use after all routes\napp.use(notFoundHandler)\n```\n\n## Response Helpers\n\n### Response Wrapper\n\n```typescript\nfunction wrapResponse(req: Request, res: Response, next: NextFunction) {\n  res.success = function(data: unknown, status = 200) {\n    return this.status(status).json({ success: true, data })\n  }\n\n  res.error = function(message: string, status = 400, code?: string) {\n    return this.status(status).json({\n      success: false,\n      error: { code, message },\n    })\n  }\n\n  next()\n}\n\n// Extend Response type\ndeclare global {\n  namespace Express {\n    interface Response {\n      success(data: unknown, status?: number): Response\n      error(message: string, status?: number, code?: string): Response\n    }\n  }\n}\n\n// Usage\nrouter.get('/users/:id', asyncHandler(async (req, res) => {\n  const user = await userService.findById(req.params.id)\n  if (!user) {\n    return res.error('User not found', 404, 'USER_NOT_FOUND')\n  }\n  res.success(user)\n}))\n```\n\n## Middleware Factory\n\n```typescript\ninterface MiddlewareOptions {\n  logger?: boolean\n  cache?: number\n  transform?: (data: unknown) => unknown\n}\n\nfunction createMiddleware(options: MiddlewareOptions) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    if (options.logger) {\n      console.log(`${req.method} ${req.path}`)\n    }\n\n    if (options.cache) {\n      res.setHeader('Cache-Control', `max-age=${options.cache}`)\n    }\n\n    if (options.transform) {\n      const originalJson = res.json.bind(res)\n      res.json = (data) => originalJson(options.transform!(data))\n    }\n\n    next()\n  }\n}\n\n// Usage\napp.use(createMiddleware({ logger: true, cache: 3600 }))\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-express/skills/express-routing/SKILL.md": "---\nname: express-routing\ndescription: Express.js routing patterns and organization\nuser-invocable: false\n---\n\n# Express Routing Skill\n\nPatterns for organizing routes in Express.js applications.\n\n## Basic Routing\n\n### Route Methods\n\n```typescript\nimport express from 'express'\n\nconst app = express()\n\n// HTTP methods\napp.get('/users', (req, res) => { ... })\napp.post('/users', (req, res) => { ... })\napp.put('/users/:id', (req, res) => { ... })\napp.patch('/users/:id', (req, res) => { ... })\napp.delete('/users/:id', (req, res) => { ... })\n\n// All methods\napp.all('/secret', (req, res) => { ... })\n```\n\n### Route Parameters\n\n```typescript\n// Simple parameter\napp.get('/users/:id', (req, res) => {\n  const { id } = req.params\n  res.json({ userId: id })\n})\n\n// Multiple parameters\napp.get('/users/:userId/posts/:postId', (req, res) => {\n  const { userId, postId } = req.params\n  res.json({ userId, postId })\n})\n\n// Optional parameter\napp.get('/users/:id?', (req, res) => {\n  if (req.params.id) {\n    // Specific user\n  } else {\n    // All users\n  }\n})\n\n// Regex constraint\napp.get('/users/:id(\\\\d+)', (req, res) => {\n  // Only matches numeric IDs\n})\n```\n\n### Query Parameters\n\n```typescript\napp.get('/search', (req, res) => {\n  const { q, page = '1', limit = '10' } = req.query\n\n  const pageNum = parseInt(page as string)\n  const limitNum = parseInt(limit as string)\n\n  res.json({ query: q, page: pageNum, limit: limitNum })\n})\n```\n\n## Router Organization\n\n### Modular Routers\n\n```typescript\n// routes/users.ts\nimport { Router } from 'express'\n\nconst router = Router()\n\nrouter.get('/', getAllUsers)\nrouter.get('/:id', getUserById)\nrouter.post('/', createUser)\nrouter.put('/:id', updateUser)\nrouter.delete('/:id', deleteUser)\n\nexport default router\n\n// routes/index.ts\nimport { Router } from 'express'\nimport usersRouter from './users'\nimport postsRouter from './posts'\nimport authRouter from './auth'\n\nconst router = Router()\n\nrouter.use('/users', usersRouter)\nrouter.use('/posts', postsRouter)\nrouter.use('/auth', authRouter)\n\nexport default router\n\n// app.ts\nimport routes from './routes'\n\napp.use('/api/v1', routes)\n```\n\n### Route Grouping\n\n```typescript\n// routes/admin/index.ts\nimport { Router } from 'express'\nimport { requireAdmin } from '../../middleware/auth'\n\nconst router = Router()\n\n// All admin routes require admin role\nrouter.use(requireAdmin)\n\nrouter.use('/users', adminUsersRouter)\nrouter.use('/settings', adminSettingsRouter)\nrouter.use('/logs', adminLogsRouter)\n\nexport default router\n```\n\n### Versioned API\n\n```typescript\n// routes/v1/index.ts\nconst v1Router = Router()\nv1Router.use('/users', v1UsersRouter)\nv1Router.use('/posts', v1PostsRouter)\n\n// routes/v2/index.ts\nconst v2Router = Router()\nv2Router.use('/users', v2UsersRouter)  // New user endpoints\nv2Router.use('/posts', v2PostsRouter)\n\n// app.ts\napp.use('/api/v1', v1Router)\napp.use('/api/v2', v2Router)\n```\n\n## RESTful Patterns\n\n### Resource Routes\n\n```typescript\n// routes/posts.ts\nimport { Router } from 'express'\nimport * as controller from '../controllers/posts'\nimport { authenticate } from '../middleware/auth'\nimport { validatePost } from '../middleware/validation'\n\nconst router = Router()\n\n// GET /posts - List all posts\nrouter.get('/', controller.index)\n\n// GET /posts/:id - Get single post\nrouter.get('/:id', controller.show)\n\n// POST /posts - Create post\nrouter.post('/', authenticate, validatePost, controller.create)\n\n// PUT /posts/:id - Update post\nrouter.put('/:id', authenticate, validatePost, controller.update)\n\n// DELETE /posts/:id - Delete post\nrouter.delete('/:id', authenticate, controller.destroy)\n\nexport default router\n```\n\n### Nested Resources\n\n```typescript\n// routes/posts.ts\nconst router = Router()\n\n// Posts\nrouter.get('/', getAllPosts)\nrouter.get('/:postId', getPost)\n\n// Nested comments\nrouter.get('/:postId/comments', getPostComments)\nrouter.post('/:postId/comments', createComment)\nrouter.delete('/:postId/comments/:commentId', deleteComment)\n\n// Alternative: Separate router\nconst commentsRouter = Router({ mergeParams: true })\ncommentsRouter.get('/', getPostComments)\ncommentsRouter.post('/', createComment)\ncommentsRouter.delete('/:commentId', deleteComment)\n\nrouter.use('/:postId/comments', commentsRouter)\n```\n\n## Controller Pattern\n\n### Basic Controller\n\n```typescript\n// controllers/users.ts\nimport { Request, Response, NextFunction } from 'express'\nimport * as userService from '../services/users'\n\nexport async function index(req: Request, res: Response, next: NextFunction) {\n  try {\n    const users = await userService.findAll()\n    res.json({ data: users })\n  } catch (error) {\n    next(error)\n  }\n}\n\nexport async function show(req: Request, res: Response, next: NextFunction) {\n  try {\n    const user = await userService.findById(req.params.id)\n    if (!user) {\n      return res.status(404).json({ error: 'User not found' })\n    }\n    res.json({ data: user })\n  } catch (error) {\n    next(error)\n  }\n}\n\nexport async function create(req: Request, res: Response, next: NextFunction) {\n  try {\n    const user = await userService.create(req.body)\n    res.status(201).json({ data: user })\n  } catch (error) {\n    next(error)\n  }\n}\n\nexport async function update(req: Request, res: Response, next: NextFunction) {\n  try {\n    const user = await userService.update(req.params.id, req.body)\n    if (!user) {\n      return res.status(404).json({ error: 'User not found' })\n    }\n    res.json({ data: user })\n  } catch (error) {\n    next(error)\n  }\n}\n\nexport async function destroy(req: Request, res: Response, next: NextFunction) {\n  try {\n    await userService.remove(req.params.id)\n    res.status(204).send()\n  } catch (error) {\n    next(error)\n  }\n}\n```\n\n### Class-Based Controller\n\n```typescript\n// controllers/UserController.ts\nimport { Request, Response, NextFunction } from 'express'\nimport { UserService } from '../services/UserService'\n\nexport class UserController {\n  constructor(private userService: UserService) {}\n\n  index = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const users = await this.userService.findAll()\n      res.json({ data: users })\n    } catch (error) {\n      next(error)\n    }\n  }\n\n  show = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = await this.userService.findById(req.params.id)\n      res.json({ data: user })\n    } catch (error) {\n      next(error)\n    }\n  }\n\n  // ... other methods\n}\n\n// routes/users.ts\nconst userService = new UserService()\nconst controller = new UserController(userService)\n\nrouter.get('/', controller.index)\nrouter.get('/:id', controller.show)\n```\n\n## Route Chaining\n\n```typescript\nrouter.route('/users/:id')\n  .get(getUser)\n  .put(updateUser)\n  .delete(deleteUser)\n\nrouter.route('/posts')\n  .get(listPosts)\n  .post(authenticate, validatePost, createPost)\n```\n\n## Middleware per Route\n\n```typescript\n// Multiple middleware for single route\nrouter.post('/upload',\n  authenticate,\n  upload.single('file'),\n  validateFile,\n  handleUpload\n)\n\n// Array of middleware\nconst createUserMiddleware = [\n  authenticate,\n  validateBody(createUserSchema),\n  checkPermissions('users:create'),\n]\n\nrouter.post('/users', createUserMiddleware, createUser)\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-express/skills/express-validation/SKILL.md": "---\nname: express-validation\ndescription: Input validation patterns for Express.js\nuser-invocable: false\n---\n\n# Express Validation Skill\n\nPatterns for validating request input in Express.js applications.\n\n## Zod Validation\n\n### Basic Schema\n\n```typescript\nimport { z } from 'zod'\n\n// User schema\nconst createUserSchema = z.object({\n  name: z.string().min(1, 'Name is required').max(100),\n  email: z.string().email('Invalid email format'),\n  password: z.string().min(8, 'Password must be at least 8 characters'),\n  age: z.number().int().positive().optional(),\n})\n\nconst updateUserSchema = createUserSchema.partial()\n\n// Product schema\nconst productSchema = z.object({\n  name: z.string().min(1).max(200),\n  description: z.string().optional(),\n  price: z.number().positive(),\n  category: z.enum(['electronics', 'clothing', 'books', 'other']),\n  tags: z.array(z.string()).default([]),\n})\n```\n\n### Validation Middleware Factory\n\n```typescript\nimport { z, ZodSchema } from 'zod'\nimport { Request, Response, NextFunction } from 'express'\n\ntype RequestLocation = 'body' | 'query' | 'params'\n\nfunction validate(schema: ZodSchema, location: RequestLocation = 'body') {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const result = schema.safeParse(req[location])\n\n    if (!result.success) {\n      return res.status(400).json({\n        error: 'Validation failed',\n        details: result.error.flatten().fieldErrors,\n      })\n    }\n\n    req[location] = result.data\n    next()\n  }\n}\n\n// Usage\nrouter.post('/users', validate(createUserSchema), createUser)\nrouter.get('/users', validate(paginationSchema, 'query'), listUsers)\nrouter.get('/users/:id', validate(idParamSchema, 'params'), getUser)\n```\n\n### Combined Validation\n\n```typescript\ninterface ValidationSchemas {\n  body?: ZodSchema\n  query?: ZodSchema\n  params?: ZodSchema\n}\n\nfunction validateAll(schemas: ValidationSchemas) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const errors: Record<string, unknown> = {}\n\n    for (const [location, schema] of Object.entries(schemas)) {\n      if (schema) {\n        const result = schema.safeParse(req[location as RequestLocation])\n        if (!result.success) {\n          errors[location] = result.error.flatten().fieldErrors\n        } else {\n          req[location as RequestLocation] = result.data\n        }\n      }\n    }\n\n    if (Object.keys(errors).length > 0) {\n      return res.status(400).json({\n        error: 'Validation failed',\n        details: errors,\n      })\n    }\n\n    next()\n  }\n}\n\n// Usage\nrouter.get('/posts/:postId/comments',\n  validateAll({\n    params: z.object({ postId: z.string().uuid() }),\n    query: z.object({\n      page: z.coerce.number().positive().default(1),\n      limit: z.coerce.number().min(1).max(100).default(20),\n    }),\n  }),\n  getComments\n)\n```\n\n## Common Schemas\n\n### Pagination\n\n```typescript\nconst paginationSchema = z.object({\n  page: z.coerce.number().int().positive().default(1),\n  limit: z.coerce.number().int().min(1).max(100).default(10),\n  sortBy: z.string().optional(),\n  sortOrder: z.enum(['asc', 'desc']).default('desc'),\n})\n```\n\n### ID Parameters\n\n```typescript\nconst uuidParamSchema = z.object({\n  id: z.string().uuid('Invalid ID format'),\n})\n\nconst slugParamSchema = z.object({\n  slug: z.string().regex(/^[a-z0-9-]+$/, 'Invalid slug format'),\n})\n```\n\n### Date Ranges\n\n```typescript\nconst dateRangeSchema = z.object({\n  startDate: z.coerce.date(),\n  endDate: z.coerce.date(),\n}).refine(\n  (data) => data.endDate >= data.startDate,\n  { message: 'End date must be after start date' }\n)\n```\n\n### File Upload\n\n```typescript\nconst fileUploadSchema = z.object({\n  fieldname: z.string(),\n  originalname: z.string(),\n  mimetype: z.string().regex(/^image\\/(jpeg|png|gif|webp)$/),\n  size: z.number().max(5 * 1024 * 1024, 'File too large (max 5MB)'),\n})\n\nfunction validateFile(req: Request, res: Response, next: NextFunction) {\n  if (!req.file) {\n    return res.status(400).json({ error: 'File is required' })\n  }\n\n  const result = fileUploadSchema.safeParse(req.file)\n  if (!result.success) {\n    return res.status(400).json({\n      error: 'Invalid file',\n      details: result.error.flatten().fieldErrors,\n    })\n  }\n\n  next()\n}\n```\n\n## Custom Validators\n\n### Password Strength\n\n```typescript\nconst passwordSchema = z.string()\n  .min(8, 'Password must be at least 8 characters')\n  .regex(/[A-Z]/, 'Password must contain an uppercase letter')\n  .regex(/[a-z]/, 'Password must contain a lowercase letter')\n  .regex(/[0-9]/, 'Password must contain a number')\n  .regex(/[^A-Za-z0-9]/, 'Password must contain a special character')\n```\n\n### Phone Number\n\n```typescript\nconst phoneSchema = z.string()\n  .regex(/^\\+?[1-9]\\d{1,14}$/, 'Invalid phone number format')\n\n// Or with libphonenumber-js\nimport { parsePhoneNumberFromString } from 'libphonenumber-js'\n\nconst phoneNumberSchema = z.string().transform((val, ctx) => {\n  const phoneNumber = parsePhoneNumberFromString(val)\n  if (!phoneNumber?.isValid()) {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: 'Invalid phone number',\n    })\n    return z.NEVER\n  }\n  return phoneNumber.format('E.164')\n})\n```\n\n### Unique Field\n\n```typescript\nconst uniqueEmailSchema = z.string().email().refine(\n  async (email) => {\n    const exists = await userService.emailExists(email)\n    return !exists\n  },\n  { message: 'Email already in use' }\n)\n\n// Usage with async validation\nasync function validateUniqueEmail(req: Request, res: Response, next: NextFunction) {\n  const result = await uniqueEmailSchema.safeParseAsync(req.body.email)\n  if (!result.success) {\n    return res.status(400).json({\n      error: 'Validation failed',\n      details: result.error.flatten().formErrors,\n    })\n  }\n  next()\n}\n```\n\n## Error Formatting\n\n### Structured Error Response\n\n```typescript\ninterface ValidationError {\n  field: string\n  message: string\n  code: string\n}\n\nfunction formatZodError(error: z.ZodError): ValidationError[] {\n  return error.errors.map((err) => ({\n    field: err.path.join('.'),\n    message: err.message,\n    code: err.code,\n  }))\n}\n\nfunction validateWithFormat(schema: ZodSchema) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const result = schema.safeParse(req.body)\n\n    if (!result.success) {\n      return res.status(400).json({\n        error: 'Validation failed',\n        errors: formatZodError(result.error),\n      })\n    }\n\n    req.body = result.data\n    next()\n  }\n}\n```\n\n## Sanitization\n\n### Input Sanitization\n\n```typescript\nimport DOMPurify from 'isomorphic-dompurify'\n\nconst sanitizedStringSchema = z.string().transform((val) => {\n  return DOMPurify.sanitize(val.trim())\n})\n\nconst blogPostSchema = z.object({\n  title: z.string().min(1).max(200).transform(val => val.trim()),\n  content: z.string().transform(val => DOMPurify.sanitize(val)),\n  tags: z.array(z.string().toLowerCase().trim()),\n})\n```\n\n### SQL Injection Prevention\n\n```typescript\n// Zod handles most cases by parsing to expected types\n// Additional layer with parameterized queries\n\nconst searchSchema = z.object({\n  query: z.string()\n    .max(100)\n    .transform(val => val.replace(/[%_]/g, '\\\\$&')), // Escape SQL wildcards\n})\n```\n\n## Conditional Validation\n\n```typescript\nconst paymentSchema = z.discriminatedUnion('type', [\n  z.object({\n    type: z.literal('credit_card'),\n    cardNumber: z.string().regex(/^\\d{16}$/),\n    expiryMonth: z.number().min(1).max(12),\n    expiryYear: z.number().min(new Date().getFullYear()),\n    cvv: z.string().regex(/^\\d{3,4}$/),\n  }),\n  z.object({\n    type: z.literal('bank_transfer'),\n    accountNumber: z.string(),\n    routingNumber: z.string(),\n  }),\n  z.object({\n    type: z.literal('paypal'),\n    email: z.string().email(),\n  }),\n])\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-jest/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-jest\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Jest testing patterns - test organization, mocking, async testing, coverage\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"jest\", \"testing\", \"unit-tests\", \"mocking\", \"coverage\"]\n}\n",
        "plugins/aai-stack-jest/skills/jest-async/SKILL.md": "---\nname: jest-async\ndescription: Jest async testing patterns\nuser-invocable: false\n---\n\n# Jest Async Testing Skill\n\nPatterns for testing asynchronous code in Jest.\n\n## Async/Await\n\n### Basic Async Tests\n\n```typescript\n// Async function test\ntest('fetches user data', async () => {\n  const user = await fetchUser('1')\n  expect(user.name).toBe('John')\n})\n\n// Return promise\ntest('fetches user data', () => {\n  return fetchUser('1').then(user => {\n    expect(user.name).toBe('John')\n  })\n})\n```\n\n### Async Assertions\n\n```typescript\n// Resolves\ntest('resolves to user', async () => {\n  await expect(fetchUser('1')).resolves.toEqual({\n    id: '1',\n    name: 'John',\n  })\n})\n\n// Rejects\ntest('rejects with error', async () => {\n  await expect(fetchUser('invalid')).rejects.toThrow('Not found')\n})\n\ntest('rejects with specific error', async () => {\n  await expect(fetchUser('invalid')).rejects.toMatchObject({\n    code: 'NOT_FOUND',\n    message: 'User not found',\n  })\n})\n```\n\n### Multiple Async Operations\n\n```typescript\ntest('processes multiple items', async () => {\n  const results = await Promise.all([\n    processItem('a'),\n    processItem('b'),\n    processItem('c'),\n  ])\n\n  expect(results).toHaveLength(3)\n  expect(results.every(r => r.success)).toBe(true)\n})\n\ntest('handles parallel requests', async () => {\n  const [user, posts] = await Promise.all([\n    fetchUser('1'),\n    fetchPosts('1'),\n  ])\n\n  expect(user.id).toBe('1')\n  expect(posts).toHaveLength(10)\n})\n```\n\n## Callbacks\n\n### Done Callback\n\n```typescript\ntest('calls callback with data', done => {\n  function callback(data) {\n    try {\n      expect(data).toBe('result')\n      done()\n    } catch (error) {\n      done(error)\n    }\n  }\n\n  fetchDataWithCallback(callback)\n})\n```\n\n### Converting Callbacks to Promises\n\n```typescript\n// Utility for callback-based APIs\nfunction promisify<T>(fn: (callback: (err: Error | null, data: T) => void) => void): Promise<T> {\n  return new Promise((resolve, reject) => {\n    fn((err, data) => {\n      if (err) reject(err)\n      else resolve(data)\n    })\n  })\n}\n\ntest('converts callback to promise', async () => {\n  const data = await promisify(cb => readFile('test.txt', cb))\n  expect(data).toBeDefined()\n})\n```\n\n## Timers\n\n### Fake Timers\n\n```typescript\ndescribe('Timer functions', () => {\n  beforeEach(() => {\n    jest.useFakeTimers()\n  })\n\n  afterEach(() => {\n    jest.useRealTimers()\n  })\n\n  test('setTimeout', () => {\n    const callback = jest.fn()\n\n    setTimeout(callback, 1000)\n\n    expect(callback).not.toHaveBeenCalled()\n\n    jest.advanceTimersByTime(1000)\n\n    expect(callback).toHaveBeenCalledTimes(1)\n  })\n\n  test('setInterval', () => {\n    const callback = jest.fn()\n\n    setInterval(callback, 100)\n\n    jest.advanceTimersByTime(250)\n\n    expect(callback).toHaveBeenCalledTimes(2)\n  })\n})\n```\n\n### Timer Control Methods\n\n```typescript\n// Advance by specific time\njest.advanceTimersByTime(1000)\n\n// Run only pending timers (not new ones scheduled)\njest.runOnlyPendingTimers()\n\n// Run all timers (careful with intervals)\njest.runAllTimers()\n\n// Run next scheduled timer\njest.runNextTimer()\n\n// Get count of pending timers\njest.getTimerCount()\n\n// Clear all timers\njest.clearAllTimers()\n```\n\n### Async with Timers\n\n```typescript\ntest('debounce function', async () => {\n  jest.useFakeTimers()\n\n  const callback = jest.fn()\n  const debounced = debounce(callback, 100)\n\n  debounced()\n  debounced()\n  debounced()\n\n  expect(callback).not.toHaveBeenCalled()\n\n  jest.advanceTimersByTime(100)\n\n  expect(callback).toHaveBeenCalledTimes(1)\n\n  jest.useRealTimers()\n})\n\ntest('polling function', async () => {\n  jest.useFakeTimers()\n\n  const checkStatus = jest.fn()\n    .mockResolvedValueOnce('pending')\n    .mockResolvedValueOnce('pending')\n    .mockResolvedValueOnce('complete')\n\n  const promise = pollUntilComplete(checkStatus, 100)\n\n  // Wait for each poll cycle\n  await jest.advanceTimersByTimeAsync(100)\n  await jest.advanceTimersByTimeAsync(100)\n  await jest.advanceTimersByTimeAsync(100)\n\n  const result = await promise\n  expect(result).toBe('complete')\n\n  jest.useRealTimers()\n})\n```\n\n## Event Emitters\n\n### Testing Events\n\n```typescript\nimport { EventEmitter } from 'events'\n\ntest('emits events', done => {\n  const emitter = new EventEmitter()\n\n  emitter.on('data', data => {\n    expect(data).toBe('test')\n    done()\n  })\n\n  emitter.emit('data', 'test')\n})\n\n// Promise-based\ntest('waits for event', async () => {\n  const emitter = new EventEmitter()\n\n  const eventPromise = new Promise(resolve => {\n    emitter.once('complete', resolve)\n  })\n\n  // Trigger after delay\n  setTimeout(() => emitter.emit('complete', 'done'), 100)\n\n  jest.useFakeTimers()\n  jest.advanceTimersByTime(100)\n  jest.useRealTimers()\n\n  const result = await eventPromise\n  expect(result).toBe('done')\n})\n```\n\n## Streams\n\n### Testing Readable Streams\n\n```typescript\nimport { Readable } from 'stream'\n\ntest('reads stream data', async () => {\n  const chunks: Buffer[] = []\n\n  const stream = Readable.from(['hello', ' ', 'world'])\n\n  for await (const chunk of stream) {\n    chunks.push(Buffer.from(chunk))\n  }\n\n  expect(Buffer.concat(chunks).toString()).toBe('hello world')\n})\n```\n\n### Testing Writable Streams\n\n```typescript\nimport { Writable, PassThrough } from 'stream'\n\ntest('writes to stream', done => {\n  const chunks: string[] = []\n\n  const writable = new Writable({\n    write(chunk, encoding, callback) {\n      chunks.push(chunk.toString())\n      callback()\n    },\n  })\n\n  writable.on('finish', () => {\n    expect(chunks).toEqual(['hello', 'world'])\n    done()\n  })\n\n  writable.write('hello')\n  writable.write('world')\n  writable.end()\n})\n```\n\n## Retry and Polling\n\n### Testing Retry Logic\n\n```typescript\ntest('retries on failure', async () => {\n  const operation = jest.fn()\n    .mockRejectedValueOnce(new Error('fail'))\n    .mockRejectedValueOnce(new Error('fail'))\n    .mockResolvedValueOnce('success')\n\n  const result = await retryOperation(operation, { retries: 3 })\n\n  expect(result).toBe('success')\n  expect(operation).toHaveBeenCalledTimes(3)\n})\n```\n\n### Testing Polling\n\n```typescript\ntest('polls until condition met', async () => {\n  jest.useFakeTimers()\n\n  let callCount = 0\n  const checkFn = jest.fn(async () => {\n    callCount++\n    return callCount >= 3 ? { status: 'ready' } : { status: 'pending' }\n  })\n\n  const promise = pollUntil(checkFn, result => result.status === 'ready', {\n    interval: 100,\n    timeout: 1000,\n  })\n\n  await jest.advanceTimersByTimeAsync(300)\n\n  const result = await promise\n  expect(result.status).toBe('ready')\n  expect(checkFn).toHaveBeenCalledTimes(3)\n\n  jest.useRealTimers()\n})\n```\n\n## Timeouts\n\n### Test Timeout\n\n```typescript\n// Increase timeout for slow tests\ntest('slow operation', async () => {\n  const result = await slowOperation()\n  expect(result).toBeDefined()\n}, 10000)  // 10 second timeout\n\n// Configure in describe block\ndescribe('slow tests', () => {\n  jest.setTimeout(30000)  // 30 seconds for all tests\n\n  test('very slow', async () => {\n    // ...\n  })\n})\n```\n\n### Timeout Assertions\n\n```typescript\ntest('operation times out', async () => {\n  const operation = new Promise(resolve => {\n    setTimeout(resolve, 5000)\n  })\n\n  jest.useFakeTimers()\n\n  const timeoutPromise = Promise.race([\n    operation,\n    new Promise((_, reject) =>\n      setTimeout(() => reject(new Error('Timeout')), 1000)\n    ),\n  ])\n\n  jest.advanceTimersByTime(1000)\n\n  await expect(timeoutPromise).rejects.toThrow('Timeout')\n\n  jest.useRealTimers()\n})\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-jest/skills/jest-coverage/SKILL.md": "---\nname: jest-coverage\ndescription: Jest code coverage configuration and analysis\nuser-invocable: false\n---\n\n# Jest Coverage Skill\n\nPatterns for configuring and analyzing code coverage in Jest.\n\n## Configuration\n\n### Basic Coverage Config\n\n```javascript\n// jest.config.js\nmodule.exports = {\n  collectCoverage: true,\n  coverageDirectory: 'coverage',\n  coverageReporters: ['text', 'lcov', 'html'],\n  collectCoverageFrom: [\n    'src/**/*.{js,jsx,ts,tsx}',\n    '!src/**/*.d.ts',\n    '!src/**/*.test.{js,jsx,ts,tsx}',\n    '!src/**/__tests__/**',\n    '!src/**/__mocks__/**',\n  ],\n}\n```\n\n### Coverage Thresholds\n\n```javascript\n// jest.config.js\nmodule.exports = {\n  coverageThreshold: {\n    // Global thresholds\n    global: {\n      branches: 80,\n      functions: 80,\n      lines: 80,\n      statements: 80,\n    },\n    // Per-directory thresholds\n    './src/utils/': {\n      branches: 90,\n      functions: 90,\n      lines: 90,\n      statements: 90,\n    },\n    // Per-file thresholds\n    './src/critical-module.ts': {\n      branches: 100,\n      functions: 100,\n      lines: 100,\n      statements: 100,\n    },\n  },\n}\n```\n\n### Coverage Reporters\n\n```javascript\n// jest.config.js\nmodule.exports = {\n  coverageReporters: [\n    'text',           // Console output\n    'text-summary',   // Condensed console output\n    'lcov',           // For CI tools (Codecov, Coveralls)\n    'html',           // Browser-viewable report\n    'json',           // Machine-readable\n    'json-summary',   // Condensed JSON\n    'cobertura',      // XML format for CI\n    'clover',         // Clover XML format\n  ],\n}\n```\n\n## Running Coverage\n\n### CLI Commands\n\n```bash\n# Run with coverage\njest --coverage\n\n# Run specific files with coverage\njest --coverage --collectCoverageFrom='src/utils/**/*.ts' src/utils\n\n# Update snapshots with coverage\njest --coverage --updateSnapshot\n\n# Watch mode with coverage\njest --coverage --watch\n\n# Coverage with verbose output\njest --coverage --verbose\n\n# Coverage threshold check only\njest --coverage --coverageThreshold='{\"global\":{\"lines\":80}}'\n```\n\n### Package.json Scripts\n\n```json\n{\n  \"scripts\": {\n    \"test\": \"jest\",\n    \"test:coverage\": \"jest --coverage\",\n    \"test:coverage:watch\": \"jest --coverage --watch\",\n    \"test:coverage:ci\": \"jest --coverage --ci --runInBand\",\n    \"test:coverage:check\": \"jest --coverage --coverageThreshold='{\\\"global\\\":{\\\"lines\\\":80}}'\",\n    \"coverage:report\": \"open coverage/lcov-report/index.html\"\n  }\n}\n```\n\n## Coverage Metrics\n\n### Understanding Metrics\n\n```\nMetric          | Description\n----------------|--------------------------------------------\nLines           | Percentage of executable lines run\nStatements      | Percentage of statements executed\nBranches        | Percentage of conditional branches covered\nFunctions       | Percentage of functions called\n```\n\n### Reading Coverage Report\n\n```\n----------|---------|----------|---------|---------|-------------------\nFile      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Lines\n----------|---------|----------|---------|---------|-------------------\nAll files |   85.71 |    75.00 |   83.33 |   85.71 |\n index.ts |   85.71 |    75.00 |   83.33 |   85.71 | 15,23-25\n----------|---------|----------|---------|---------|-------------------\n```\n\n## Improving Coverage\n\n### Identifying Gaps\n\n```typescript\n// File with coverage gaps\nexport function processUser(user: User | null) {\n  if (!user) {          //  Branch: need null case test\n    return null\n  }\n\n  if (user.role === 'admin') {  //  Branch: need admin case\n    return { ...user, permissions: 'all' }\n  }\n\n  if (user.role === 'user') {   //  Branch: need user case\n    return { ...user, permissions: 'limited' }\n  }\n\n  return { ...user, permissions: 'none' }  //  Uncovered line\n}\n\n// Tests to achieve full coverage\ndescribe('processUser', () => {\n  it('returns null for null user', () => {\n    expect(processUser(null)).toBeNull()\n  })\n\n  it('gives admin all permissions', () => {\n    const admin = { role: 'admin', name: 'Admin' }\n    expect(processUser(admin)).toMatchObject({ permissions: 'all' })\n  })\n\n  it('gives user limited permissions', () => {\n    const user = { role: 'user', name: 'User' }\n    expect(processUser(user)).toMatchObject({ permissions: 'limited' })\n  })\n\n  it('gives unknown role no permissions', () => {\n    const guest = { role: 'guest', name: 'Guest' }\n    expect(processUser(guest)).toMatchObject({ permissions: 'none' })\n  })\n})\n```\n\n### Branch Coverage\n\n```typescript\n// Function with multiple branches\nfunction getStatus(value: number): string {\n  if (value < 0) {           // Branch 1\n    return 'negative'\n  } else if (value === 0) {  // Branch 2\n    return 'zero'\n  } else if (value < 10) {   // Branch 3\n    return 'small'\n  } else {                   // Branch 4 (default)\n    return 'large'\n  }\n}\n\n// Tests for 100% branch coverage\ntest.each([\n  [-1, 'negative'],\n  [0, 'zero'],\n  [5, 'small'],\n  [100, 'large'],\n])('getStatus(%i) = %s', (value, expected) => {\n  expect(getStatus(value)).toBe(expected)\n})\n```\n\n### Edge Cases\n\n```typescript\n// Function with edge cases\nfunction divide(a: number, b: number): number {\n  if (b === 0) throw new Error('Division by zero')\n  return a / b\n}\n\n// Cover edge cases\ndescribe('divide', () => {\n  it('divides positive numbers', () => {\n    expect(divide(10, 2)).toBe(5)\n  })\n\n  it('handles negative numbers', () => {\n    expect(divide(-10, 2)).toBe(-5)\n  })\n\n  it('handles decimal results', () => {\n    expect(divide(1, 3)).toBeCloseTo(0.333, 2)\n  })\n\n  it('throws on division by zero', () => {\n    expect(() => divide(10, 0)).toThrow('Division by zero')\n  })\n})\n```\n\n## Excluding Code\n\n### Istanbul Comments\n\n```typescript\n// Exclude next line\n/* istanbul ignore next */\nif (process.env.DEBUG) {\n  console.log('Debug info')\n}\n\n// Exclude block\n/* istanbul ignore if */\nif (typeof window === 'undefined') {\n  // Server-only code\n}\n\n// Exclude else branch\nif (condition) {\n  // covered\n} /* istanbul ignore else */ else {\n  // not covered in tests\n}\n\n// Exclude entire file (at top)\n/* istanbul ignore file */\n```\n\n### Coverage Path Ignoring\n\n```javascript\n// jest.config.js\nmodule.exports = {\n  collectCoverageFrom: [\n    'src/**/*.ts',\n    '!src/**/*.d.ts',\n    '!src/**/index.ts',      // Exclude barrel files\n    '!src/**/*.stories.ts',  // Exclude Storybook\n    '!src/mocks/**',         // Exclude mocks\n    '!src/types/**',         // Exclude type definitions\n    '!src/test/**',          // Exclude test utilities\n  ],\n  coveragePathIgnorePatterns: [\n    '/node_modules/',\n    '/__fixtures__/',\n    '/dist/',\n  ],\n}\n```\n\n## CI Integration\n\n### GitHub Actions\n\n```yaml\n# .github/workflows/test.yml\nname: Test\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n      - run: npm ci\n      - run: npm test -- --coverage --ci\n\n      - name: Upload coverage to Codecov\n        uses: codecov/codecov-action@v3\n        with:\n          files: ./coverage/lcov.info\n          fail_ci_if_error: true\n```\n\n### Codecov Configuration\n\n```yaml\n# codecov.yml\ncoverage:\n  status:\n    project:\n      default:\n        target: 80%\n        threshold: 2%\n    patch:\n      default:\n        target: 80%\n\nignore:\n  - \"**/*.test.ts\"\n  - \"**/test/**\"\n  - \"**/mocks/**\"\n```\n\n### Coverage Badge\n\n```markdown\n<!-- README.md -->\n[![codecov](https://codecov.io/gh/owner/repo/branch/main/graph/badge.svg)](https://codecov.io/gh/owner/repo)\n```\n\n## Best Practices\n\n### Meaningful Coverage\n\n```typescript\n// BAD: High coverage, low value\ntest('covers function', () => {\n  const result = complexFunction({})\n  expect(result).toBeDefined()  // Weak assertion\n})\n\n// GOOD: Meaningful tests with good coverage\ntest('processes valid input correctly', () => {\n  const result = complexFunction({ value: 42 })\n  expect(result.computed).toBe(84)\n  expect(result.valid).toBe(true)\n})\n\ntest('handles invalid input', () => {\n  const result = complexFunction({ value: -1 })\n  expect(result.valid).toBe(false)\n  expect(result.error).toBe('Value must be positive')\n})\n```\n\n### Prioritizing Coverage\n\n```\nPriority | Area                 | Target\n---------|----------------------|--------\nHigh     | Business logic       | 90%+\nHigh     | Utility functions    | 90%+\nMedium   | API integrations     | 80%+\nMedium   | React components     | 75%+\nLow      | Configuration files  | 50%+\nLow      | Type definitions     | N/A\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-jest/skills/jest-mocking/SKILL.md": "---\nname: jest-mocking\ndescription: Jest mocking patterns and techniques\nuser-invocable: false\n---\n\n# Jest Mocking Skill\n\nPatterns for mocking in Jest tests.\n\n## Function Mocks\n\n### Creating Mocks\n\n```typescript\n// Basic mock function\nconst mockFn = jest.fn()\n\n// With implementation\nconst mockFn = jest.fn((x) => x + 1)\n\n// With return value\nconst mockFn = jest.fn().mockReturnValue(42)\n\n// With different return values\nconst mockFn = jest.fn()\n  .mockReturnValueOnce(1)\n  .mockReturnValueOnce(2)\n  .mockReturnValue(99)  // Default after exhausted\n\n// Async return\nconst mockFn = jest.fn().mockResolvedValue({ id: 1 })\nconst mockFn = jest.fn().mockRejectedValue(new Error('fail'))\n```\n\n### Mock Implementations\n\n```typescript\n// Replace implementation\nconst mockFn = jest.fn()\n  .mockImplementation((a, b) => a + b)\n\n// Different implementation each call\nconst mockFn = jest.fn()\n  .mockImplementationOnce(() => 'first')\n  .mockImplementationOnce(() => 'second')\n  .mockImplementation(() => 'default')\n\n// Access call arguments in implementation\nconst mockFn = jest.fn((callback) => callback('result'))\n```\n\n### Mock Assertions\n\n```typescript\nconst mockFn = jest.fn()\n\n// Call assertions\nexpect(mockFn).toHaveBeenCalled()\nexpect(mockFn).toHaveBeenCalledTimes(2)\nexpect(mockFn).toHaveBeenCalledWith('arg1', 'arg2')\nexpect(mockFn).toHaveBeenLastCalledWith('final')\nexpect(mockFn).toHaveBeenNthCalledWith(1, 'first')\n\n// Return assertions\nexpect(mockFn).toHaveReturnedWith(value)\nexpect(mockFn).toHaveLastReturnedWith(value)\n\n// Access mock data\nexpect(mockFn.mock.calls).toEqual([['arg1'], ['arg2']])\nexpect(mockFn.mock.results[0].value).toBe('result')\nexpect(mockFn.mock.instances).toHaveLength(1)\n```\n\n## Module Mocks\n\n### Auto Mocking\n\n```typescript\n// Mock entire module\njest.mock('./userService')\n\nimport { createUser, findUser } from './userService'\n\n// All exports are now mock functions\n(createUser as jest.Mock).mockResolvedValue({ id: 1 })\n\ntest('uses mocked module', async () => {\n  const user = await createUser({ name: 'John' })\n  expect(user).toEqual({ id: 1 })\n})\n```\n\n### Partial Mocking\n\n```typescript\njest.mock('./utils', () => ({\n  ...jest.requireActual('./utils'),  // Keep original\n  formatDate: jest.fn(() => '2024-01-01'),  // Mock specific\n}))\n\nimport { formatDate, formatNumber } from './utils'\n\ntest('formatDate is mocked', () => {\n  expect(formatDate()).toBe('2024-01-01')  // Mocked\n})\n\ntest('formatNumber is real', () => {\n  expect(formatNumber(1000)).toBe('1,000')  // Original\n})\n```\n\n### Factory Functions\n\n```typescript\n// Mock with factory\njest.mock('./config', () => ({\n  __esModule: true,\n  default: {\n    apiUrl: 'http://test.api',\n    timeout: 1000,\n  },\n  getConfig: jest.fn(() => ({ debug: true })),\n}))\n```\n\n### Manual Mocks\n\n```typescript\n// Create __mocks__/axios.ts\nconst mockAxios = {\n  get: jest.fn(() => Promise.resolve({ data: {} })),\n  post: jest.fn(() => Promise.resolve({ data: {} })),\n  create: jest.fn(() => mockAxios),\n}\n\nexport default mockAxios\n\n// In test file\njest.mock('axios')\nimport axios from 'axios'\n\ntest('uses mock axios', async () => {\n  (axios.get as jest.Mock).mockResolvedValue({ data: { id: 1 } })\n\n  const response = await axios.get('/users/1')\n  expect(response.data).toEqual({ id: 1 })\n})\n```\n\n## Class Mocks\n\n### Mocking Classes\n\n```typescript\n// userService.ts\nexport class UserService {\n  async create(data: UserData): Promise<User> { ... }\n  async find(id: string): Promise<User> { ... }\n}\n\n// test file\njest.mock('./userService')\n\nimport { UserService } from './userService'\n\nconst MockUserService = UserService as jest.MockedClass<typeof UserService>\n\nbeforeEach(() => {\n  MockUserService.mockClear()\n})\n\ntest('uses mocked class', async () => {\n  const mockCreate = jest.fn().mockResolvedValue({ id: '1' })\n  MockUserService.prototype.create = mockCreate\n\n  const service = new UserService()\n  const user = await service.create({ name: 'John' })\n\n  expect(user).toEqual({ id: '1' })\n  expect(mockCreate).toHaveBeenCalledWith({ name: 'John' })\n})\n```\n\n### Mocking Constructors\n\n```typescript\njest.mock('./Logger', () => {\n  return jest.fn().mockImplementation(() => ({\n    log: jest.fn(),\n    error: jest.fn(),\n    warn: jest.fn(),\n  }))\n})\n```\n\n## Spying\n\n### Spy on Methods\n\n```typescript\nconst video = {\n  play() { return true },\n  pause() { return false },\n}\n\n// Spy without changing implementation\nconst playSpy = jest.spyOn(video, 'play')\n\nvideo.play()\n\nexpect(playSpy).toHaveBeenCalled()\nexpect(video.play()).toBe(true)  // Original still works\n\nplaySpy.mockRestore()  // Restore original\n```\n\n### Spy with Mock Implementation\n\n```typescript\nconst api = {\n  fetchUser(id: string) { /* real implementation */ }\n}\n\nconst spy = jest.spyOn(api, 'fetchUser')\n  .mockResolvedValue({ id: '1', name: 'John' })\n\nconst user = await api.fetchUser('1')\nexpect(user.name).toBe('John')\n\nspy.mockRestore()  // Restore original\n```\n\n### Spy on Getters/Setters\n\n```typescript\nconst obj = {\n  _value: 0,\n  get value() { return this._value },\n  set value(v) { this._value = v },\n}\n\nconst getSpy = jest.spyOn(obj, 'value', 'get').mockReturnValue(42)\nexpect(obj.value).toBe(42)\n\nconst setSpy = jest.spyOn(obj, 'value', 'set')\nobj.value = 100\nexpect(setSpy).toHaveBeenCalledWith(100)\n```\n\n## Mock Utilities\n\n### Clearing and Resetting\n\n```typescript\nconst mockFn = jest.fn()\n\n// Clear call history (keeps implementation)\nmockFn.mockClear()\njest.clearAllMocks()\n\n// Reset to initial state (no implementation)\nmockFn.mockReset()\njest.resetAllMocks()\n\n// Restore original implementation (for spies)\nmockFn.mockRestore()\njest.restoreAllMocks()\n```\n\n### Mock Names\n\n```typescript\nconst mockFn = jest.fn().mockName('myMockFunction')\n\n// Better error messages\nexpect(mockFn).toHaveBeenCalled()\n// Error: expect(myMockFunction).toHaveBeenCalled()\n```\n\n## Advanced Patterns\n\n### Mocking Node Modules\n\n```typescript\n// __mocks__/fs.ts\nexport const readFileSync = jest.fn()\nexport const writeFileSync = jest.fn()\n\n// test file\njest.mock('fs')\n\nimport { readFileSync } from 'fs'\n\ntest('reads file', () => {\n  (readFileSync as jest.Mock).mockReturnValue('content')\n  expect(readFileSync('test.txt')).toBe('content')\n})\n```\n\n### Mocking Date\n\n```typescript\nconst mockDate = new Date('2024-01-15T12:00:00Z')\n\nbeforeAll(() => {\n  jest.useFakeTimers()\n  jest.setSystemTime(mockDate)\n})\n\nafterAll(() => {\n  jest.useRealTimers()\n})\n\ntest('uses mocked date', () => {\n  expect(new Date().toISOString()).toBe('2024-01-15T12:00:00.000Z')\n  expect(Date.now()).toBe(mockDate.getTime())\n})\n```\n\n### Mocking Environment Variables\n\n```typescript\nconst originalEnv = process.env\n\nbeforeEach(() => {\n  jest.resetModules()\n  process.env = { ...originalEnv }\n})\n\nafterAll(() => {\n  process.env = originalEnv\n})\n\ntest('uses env variable', () => {\n  process.env.API_URL = 'http://test.api'\n\n  const { config } = require('./config')\n  expect(config.apiUrl).toBe('http://test.api')\n})\n```\n\n### Mocking Fetch\n\n```typescript\nglobal.fetch = jest.fn()\n\nbeforeEach(() => {\n  (fetch as jest.Mock).mockClear()\n})\n\ntest('fetches data', async () => {\n  (fetch as jest.Mock).mockResolvedValue({\n    ok: true,\n    json: async () => ({ id: 1, name: 'John' }),\n  })\n\n  const response = await fetch('/api/users/1')\n  const data = await response.json()\n\n  expect(data).toEqual({ id: 1, name: 'John' })\n  expect(fetch).toHaveBeenCalledWith('/api/users/1')\n})\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-jest/skills/jest-patterns/SKILL.md": "---\nname: jest-patterns\ndescription: Jest testing patterns and best practices\nuser-invocable: false\n---\n\n# Jest Patterns Skill\n\nTesting patterns and best practices for Jest.\n\n## Test Structure\n\n### Describe Blocks\n\n```typescript\ndescribe('UserService', () => {\n  describe('createUser', () => {\n    it('should create a user with valid data', async () => {\n      // test\n    })\n\n    it('should throw error with invalid email', async () => {\n      // test\n    })\n  })\n\n  describe('findUser', () => {\n    it('should return user by id', async () => {\n      // test\n    })\n\n    it('should return null for non-existent user', async () => {\n      // test\n    })\n  })\n})\n```\n\n### AAA Pattern\n\n```typescript\nit('should calculate total with discount', () => {\n  // Arrange\n  const cart = new ShoppingCart()\n  cart.addItem({ name: 'Widget', price: 100 })\n  const discount = 0.1\n\n  // Act\n  const total = cart.calculateTotal(discount)\n\n  // Assert\n  expect(total).toBe(90)\n})\n```\n\n### Setup and Teardown\n\n```typescript\ndescribe('DatabaseService', () => {\n  let db: Database\n  let testUser: User\n\n  // Before all tests in this describe block\n  beforeAll(async () => {\n    db = await Database.connect()\n  })\n\n  // After all tests\n  afterAll(async () => {\n    await db.disconnect()\n  })\n\n  // Before each test\n  beforeEach(async () => {\n    testUser = await db.createUser({ name: 'Test' })\n  })\n\n  // After each test\n  afterEach(async () => {\n    await db.clearTestData()\n  })\n\n  it('should find user', async () => {\n    const user = await db.findUser(testUser.id)\n    expect(user).toEqual(testUser)\n  })\n})\n```\n\n## Assertions\n\n### Basic Matchers\n\n```typescript\n// Equality\nexpect(value).toBe(exact)           // Strict equality (===)\nexpect(value).toEqual(object)       // Deep equality\nexpect(value).toStrictEqual(object) // Deep equality + undefined properties\n\n// Truthiness\nexpect(value).toBeTruthy()\nexpect(value).toBeFalsy()\nexpect(value).toBeNull()\nexpect(value).toBeUndefined()\nexpect(value).toBeDefined()\n\n// Numbers\nexpect(value).toBeGreaterThan(3)\nexpect(value).toBeGreaterThanOrEqual(3.5)\nexpect(value).toBeLessThan(5)\nexpect(value).toBeCloseTo(0.3, 5)  // Floating point\n\n// Strings\nexpect(string).toMatch(/pattern/)\nexpect(string).toContain('substring')\n\n// Arrays/Iterables\nexpect(array).toContain(item)\nexpect(array).toContainEqual(object)\nexpect(array).toHaveLength(3)\n\n// Objects\nexpect(object).toHaveProperty('key')\nexpect(object).toHaveProperty('nested.key', value)\nexpect(object).toMatchObject({ key: value })\n```\n\n### Error Assertions\n\n```typescript\n// Sync errors\nexpect(() => {\n  throw new Error('fail')\n}).toThrow()\n\nexpect(() => {\n  throw new Error('fail')\n}).toThrow('fail')\n\nexpect(() => {\n  throw new Error('fail')\n}).toThrow(Error)\n\n// Async errors\nawait expect(asyncFn()).rejects.toThrow('error')\nawait expect(asyncFn()).rejects.toBeInstanceOf(CustomError)\n```\n\n### Custom Matchers\n\n```typescript\nexpect.extend({\n  toBeWithinRange(received, floor, ceiling) {\n    const pass = received >= floor && received <= ceiling\n    return {\n      pass,\n      message: () =>\n        `expected ${received} ${pass ? 'not ' : ''}to be within range ${floor} - ${ceiling}`,\n    }\n  },\n})\n\n// Usage\nexpect(100).toBeWithinRange(90, 110)\n\n// TypeScript declaration\ndeclare global {\n  namespace jest {\n    interface Matchers<R> {\n      toBeWithinRange(floor: number, ceiling: number): R\n    }\n  }\n}\n```\n\n## Test Isolation\n\n### Resetting State\n\n```typescript\ndescribe('Counter', () => {\n  let counter: Counter\n\n  beforeEach(() => {\n    counter = new Counter()  // Fresh instance each test\n  })\n\n  it('should start at 0', () => {\n    expect(counter.value).toBe(0)\n  })\n\n  it('should increment', () => {\n    counter.increment()\n    expect(counter.value).toBe(1)\n  })\n})\n```\n\n### Clearing Mocks\n\n```typescript\nafterEach(() => {\n  jest.clearAllMocks()   // Clear call history\n  jest.resetAllMocks()   // Clear + reset implementations\n  jest.restoreAllMocks() // Restore original implementations\n})\n```\n\n## Parameterized Tests\n\n### Using test.each\n\n```typescript\n// Array format\ntest.each([\n  [1, 1, 2],\n  [1, 2, 3],\n  [2, 2, 4],\n])('add(%i, %i) = %i', (a, b, expected) => {\n  expect(add(a, b)).toBe(expected)\n})\n\n// Object format\ntest.each([\n  { a: 1, b: 1, expected: 2 },\n  { a: 1, b: 2, expected: 3 },\n  { a: 2, b: 2, expected: 4 },\n])('add($a, $b) = $expected', ({ a, b, expected }) => {\n  expect(add(a, b)).toBe(expected)\n})\n\n// Template literal\ntest.each`\n  a    | b    | expected\n  ${1} | ${1} | ${2}\n  ${1} | ${2} | ${3}\n  ${2} | ${2} | ${4}\n`('add($a, $b) = $expected', ({ a, b, expected }) => {\n  expect(add(a, b)).toBe(expected)\n})\n```\n\n### Describe.each\n\n```typescript\ndescribe.each([\n  { role: 'admin', canDelete: true },\n  { role: 'user', canDelete: false },\n  { role: 'guest', canDelete: false },\n])('$role permissions', ({ role, canDelete }) => {\n  it(`should ${canDelete ? '' : 'not '}allow delete`, () => {\n    const user = createUser({ role })\n    expect(user.canDelete()).toBe(canDelete)\n  })\n})\n```\n\n## Snapshot Testing\n\n### Basic Snapshots\n\n```typescript\nit('should render correctly', () => {\n  const tree = renderer.create(<Button label=\"Click me\" />).toJSON()\n  expect(tree).toMatchSnapshot()\n})\n\n// Inline snapshots\nit('should format user', () => {\n  const user = formatUser({ name: 'John', age: 30 })\n  expect(user).toMatchInlineSnapshot(`\n    {\n      \"displayName\": \"John\",\n      \"isAdult\": true,\n    }\n  `)\n})\n```\n\n### Property Matchers\n\n```typescript\nit('should create user with id', () => {\n  const user = createUser({ name: 'John' })\n\n  expect(user).toMatchSnapshot({\n    id: expect.any(String),\n    createdAt: expect.any(Date),\n  })\n})\n```\n\n## Skip and Focus\n\n```typescript\n// Skip tests\nit.skip('should be skipped', () => {})\nxtest('also skipped', () => {})\ndescribe.skip('skip entire suite', () => {})\n\n// Focus tests (only run these)\nit.only('only this runs', () => {})\nfit('also only this', () => {})\ndescribe.only('only this suite', () => {})\n\n// Conditional skip\nconst isCI = process.env.CI === 'true'\nit.skipIf(isCI)('skip on CI', () => {})\nit.runIf(!isCI)('run only locally', () => {})\n```\n\n## Test Utilities\n\n### Expect Utilities\n\n```typescript\n// Asymmetric matchers\nexpect(obj).toEqual({\n  name: expect.any(String),\n  id: expect.stringMatching(/^[a-z0-9-]+$/),\n  items: expect.arrayContaining([{ id: 1 }]),\n  meta: expect.objectContaining({ version: 2 }),\n})\n\n// Assertions count\nexpect.assertions(2)  // Exactly 2 assertions\nexpect.hasAssertions() // At least 1 assertion\n```\n\n### Fake Timers\n\n```typescript\ndescribe('Timer', () => {\n  beforeEach(() => {\n    jest.useFakeTimers()\n  })\n\n  afterEach(() => {\n    jest.useRealTimers()\n  })\n\n  it('should call callback after delay', () => {\n    const callback = jest.fn()\n\n    setTimeout(callback, 1000)\n\n    expect(callback).not.toHaveBeenCalled()\n    jest.advanceTimersByTime(1000)\n    expect(callback).toHaveBeenCalledTimes(1)\n  })\n\n  it('should run all timers', () => {\n    const callback = jest.fn()\n\n    setInterval(callback, 100)\n    jest.runOnlyPendingTimers() // Run current timers only\n    // or\n    jest.runAllTimers()         // Run all (careful with intervals)\n  })\n})\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-material-ui/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-material-ui\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Material UI patterns - MUI components, theming, sx prop, styled()\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"mui\", \"material-ui\", \"react\", \"components\", \"theming\"]\n}\n",
        "plugins/aai-stack-material-ui/skills/mui-patterns/SKILL.md": "---\nname: mui-patterns\ndescription: Material-UI component patterns and usage\nuser-invocable: false\n---\n\n# Material-UI Patterns Skill\n\nPatterns for using Material-UI (MUI) components effectively.\n\n## Setup\n\n### Installation\n\n```bash\nnpm install @mui/material @emotion/react @emotion/styled\nnpm install @mui/icons-material  # Optional: icons\n```\n\n### Basic Configuration\n\n```tsx\n// App.tsx\nimport { ThemeProvider, createTheme, CssBaseline } from '@mui/material'\n\nconst theme = createTheme()\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      {/* Your app */}\n    </ThemeProvider>\n  )\n}\n```\n\n## Core Components\n\n### Buttons\n\n```tsx\nimport { Button, IconButton, ButtonGroup } from '@mui/material'\nimport { Add, Delete, Edit } from '@mui/icons-material'\n\n// Button variants\n<Button variant=\"contained\">Primary</Button>\n<Button variant=\"outlined\">Secondary</Button>\n<Button variant=\"text\">Text</Button>\n\n// Colors\n<Button variant=\"contained\" color=\"primary\">Primary</Button>\n<Button variant=\"contained\" color=\"secondary\">Secondary</Button>\n<Button variant=\"contained\" color=\"error\">Error</Button>\n<Button variant=\"contained\" color=\"success\">Success</Button>\n\n// Sizes\n<Button size=\"small\">Small</Button>\n<Button size=\"medium\">Medium</Button>\n<Button size=\"large\">Large</Button>\n\n// With icons\n<Button startIcon={<Add />}>Add Item</Button>\n<Button endIcon={<Delete />}>Delete</Button>\n\n// Icon buttons\n<IconButton color=\"primary\">\n  <Edit />\n</IconButton>\n\n// Button group\n<ButtonGroup variant=\"contained\">\n  <Button>One</Button>\n  <Button>Two</Button>\n  <Button>Three</Button>\n</ButtonGroup>\n```\n\n### Typography\n\n```tsx\nimport { Typography } from '@mui/material'\n\n<Typography variant=\"h1\">Heading 1</Typography>\n<Typography variant=\"h2\">Heading 2</Typography>\n<Typography variant=\"h3\">Heading 3</Typography>\n<Typography variant=\"h4\">Heading 4</Typography>\n<Typography variant=\"h5\">Heading 5</Typography>\n<Typography variant=\"h6\">Heading 6</Typography>\n<Typography variant=\"subtitle1\">Subtitle 1</Typography>\n<Typography variant=\"subtitle2\">Subtitle 2</Typography>\n<Typography variant=\"body1\">Body 1</Typography>\n<Typography variant=\"body2\">Body 2</Typography>\n<Typography variant=\"caption\">Caption</Typography>\n<Typography variant=\"overline\">Overline</Typography>\n\n// With color\n<Typography color=\"primary\">Primary color</Typography>\n<Typography color=\"secondary\">Secondary color</Typography>\n<Typography color=\"error\">Error color</Typography>\n<Typography color=\"text.secondary\">Secondary text</Typography>\n\n// With sx prop\n<Typography sx={{ fontWeight: 'bold', mb: 2 }}>Bold with margin</Typography>\n```\n\n### Form Components\n\n```tsx\nimport {\n  TextField,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n  Checkbox,\n  FormControlLabel,\n  Radio,\n  RadioGroup,\n  Switch,\n} from '@mui/material'\n\n// Text field\n<TextField label=\"Email\" variant=\"outlined\" fullWidth />\n<TextField label=\"Password\" type=\"password\" variant=\"outlined\" />\n<TextField\n  label=\"Message\"\n  multiline\n  rows={4}\n  variant=\"outlined\"\n/>\n<TextField\n  error\n  label=\"Error\"\n  helperText=\"This field has an error\"\n/>\n\n// Select\n<FormControl fullWidth>\n  <InputLabel>Age</InputLabel>\n  <Select value={age} label=\"Age\" onChange={handleChange}>\n    <MenuItem value={10}>Ten</MenuItem>\n    <MenuItem value={20}>Twenty</MenuItem>\n    <MenuItem value={30}>Thirty</MenuItem>\n  </Select>\n</FormControl>\n\n// Checkbox\n<FormControlLabel\n  control={<Checkbox checked={checked} onChange={handleChange} />}\n  label=\"Accept terms\"\n/>\n\n// Radio group\n<RadioGroup value={value} onChange={handleChange}>\n  <FormControlLabel value=\"a\" control={<Radio />} label=\"Option A\" />\n  <FormControlLabel value=\"b\" control={<Radio />} label=\"Option B\" />\n</RadioGroup>\n\n// Switch\n<FormControlLabel\n  control={<Switch checked={enabled} onChange={handleChange} />}\n  label=\"Enable feature\"\n/>\n```\n\n### Cards\n\n```tsx\nimport {\n  Card,\n  CardContent,\n  CardActions,\n  CardMedia,\n  CardHeader,\n  Avatar,\n  IconButton,\n} from '@mui/material'\nimport { MoreVert } from '@mui/icons-material'\n\n<Card>\n  <CardHeader\n    avatar={<Avatar>R</Avatar>}\n    action={\n      <IconButton>\n        <MoreVert />\n      </IconButton>\n    }\n    title=\"Card Title\"\n    subheader=\"September 14, 2024\"\n  />\n  <CardMedia\n    component=\"img\"\n    height=\"194\"\n    image=\"/image.jpg\"\n    alt=\"Description\"\n  />\n  <CardContent>\n    <Typography variant=\"body2\" color=\"text.secondary\">\n      Card content goes here.\n    </Typography>\n  </CardContent>\n  <CardActions>\n    <Button size=\"small\">Share</Button>\n    <Button size=\"small\">Learn More</Button>\n  </CardActions>\n</Card>\n```\n\n### Lists\n\n```tsx\nimport {\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  ListItemText,\n  ListItemAvatar,\n  Avatar,\n  Divider,\n} from '@mui/material'\nimport { Inbox, Drafts, Person } from '@mui/icons-material'\n\n<List>\n  <ListItemButton>\n    <ListItemIcon>\n      <Inbox />\n    </ListItemIcon>\n    <ListItemText primary=\"Inbox\" />\n  </ListItemButton>\n  <ListItemButton>\n    <ListItemIcon>\n      <Drafts />\n    </ListItemIcon>\n    <ListItemText primary=\"Drafts\" />\n  </ListItemButton>\n  <Divider />\n  <ListItem>\n    <ListItemAvatar>\n      <Avatar>\n        <Person />\n      </Avatar>\n    </ListItemAvatar>\n    <ListItemText primary=\"John Doe\" secondary=\"john@example.com\" />\n  </ListItem>\n</List>\n```\n\n## Layout Components\n\n### Box and Container\n\n```tsx\nimport { Box, Container, Stack } from '@mui/material'\n\n// Box - basic layout\n<Box sx={{ display: 'flex', gap: 2, p: 2 }}>\n  <Box sx={{ flex: 1 }}>Item 1</Box>\n  <Box sx={{ flex: 1 }}>Item 2</Box>\n</Box>\n\n// Container - centered content\n<Container maxWidth=\"lg\">\n  Content with max-width\n</Container>\n\n// Stack - flex shorthand\n<Stack direction=\"row\" spacing={2}>\n  <Item>Item 1</Item>\n  <Item>Item 2</Item>\n  <Item>Item 3</Item>\n</Stack>\n\n<Stack\n  direction={{ xs: 'column', sm: 'row' }}\n  spacing={2}\n  divider={<Divider orientation=\"vertical\" flexItem />}\n>\n  <Item>Item 1</Item>\n  <Item>Item 2</Item>\n</Stack>\n```\n\n### Grid\n\n```tsx\nimport { Grid } from '@mui/material'\n\n<Grid container spacing={2}>\n  <Grid item xs={12} md={6} lg={4}>\n    Full width mobile, half tablet, third desktop\n  </Grid>\n  <Grid item xs={12} md={6} lg={4}>\n    Item 2\n  </Grid>\n  <Grid item xs={12} md={12} lg={4}>\n    Item 3\n  </Grid>\n</Grid>\n\n// Nested grid\n<Grid container spacing={2}>\n  <Grid item xs={12} md={8}>\n    <Grid container spacing={1}>\n      <Grid item xs={6}>Nested 1</Grid>\n      <Grid item xs={6}>Nested 2</Grid>\n    </Grid>\n  </Grid>\n  <Grid item xs={12} md={4}>\n    Sidebar\n  </Grid>\n</Grid>\n```\n\n## Feedback Components\n\n### Dialogs\n\n```tsx\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n} from '@mui/material'\n\n<Dialog open={open} onClose={handleClose}>\n  <DialogTitle>Confirm Action</DialogTitle>\n  <DialogContent>\n    <DialogContentText>\n      Are you sure you want to proceed?\n    </DialogContentText>\n  </DialogContent>\n  <DialogActions>\n    <Button onClick={handleClose}>Cancel</Button>\n    <Button onClick={handleConfirm} variant=\"contained\">\n      Confirm\n    </Button>\n  </DialogActions>\n</Dialog>\n```\n\n### Snackbar\n\n```tsx\nimport { Snackbar, Alert } from '@mui/material'\n\n<Snackbar\n  open={open}\n  autoHideDuration={6000}\n  onClose={handleClose}\n>\n  <Alert severity=\"success\" onClose={handleClose}>\n    Operation completed successfully!\n  </Alert>\n</Snackbar>\n```\n\n### Progress\n\n```tsx\nimport {\n  CircularProgress,\n  LinearProgress,\n  Skeleton,\n} from '@mui/material'\n\n// Circular\n<CircularProgress />\n<CircularProgress variant=\"determinate\" value={75} />\n\n// Linear\n<LinearProgress />\n<LinearProgress variant=\"determinate\" value={50} />\n\n// Skeleton\n<Skeleton variant=\"text\" width={210} />\n<Skeleton variant=\"circular\" width={40} height={40} />\n<Skeleton variant=\"rectangular\" width={210} height={118} />\n```\n\n## Navigation\n\n### App Bar\n\n```tsx\nimport { AppBar, Toolbar, Typography, IconButton } from '@mui/material'\nimport { Menu } from '@mui/icons-material'\n\n<AppBar position=\"static\">\n  <Toolbar>\n    <IconButton edge=\"start\" color=\"inherit\" sx={{ mr: 2 }}>\n      <Menu />\n    </IconButton>\n    <Typography variant=\"h6\" sx={{ flexGrow: 1 }}>\n      App Title\n    </Typography>\n    <Button color=\"inherit\">Login</Button>\n  </Toolbar>\n</AppBar>\n```\n\n### Tabs\n\n```tsx\nimport { Tabs, Tab, Box } from '@mui/material'\n\n<Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n  <Tabs value={value} onChange={handleChange}>\n    <Tab label=\"Item One\" />\n    <Tab label=\"Item Two\" />\n    <Tab label=\"Item Three\" />\n  </Tabs>\n</Box>\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-material-ui/skills/mui-styling/SKILL.md": "---\nname: mui-styling\ndescription: Material-UI styling approaches\nuser-invocable: false\n---\n\n# Material-UI Styling Skill\n\nPatterns for styling Material-UI components.\n\n## sx Prop\n\n### Basic Usage\n\n```tsx\nimport { Box, Button, Typography } from '@mui/material'\n\n// Shorthand properties\n<Box\n  sx={{\n    m: 2,           // margin: theme.spacing(2)\n    p: 1,           // padding: theme.spacing(1)\n    px: 3,          // paddingX\n    py: 2,          // paddingY\n    mt: 4,          // marginTop\n    bgcolor: 'primary.main',\n    color: 'white',\n  }}\n>\n  Content\n</Box>\n\n// Sizing\n<Box\n  sx={{\n    width: 1/2,     // 50%\n    width: 1,       // 100%\n    width: 300,     // 300px\n    height: '100vh',\n    minWidth: 100,\n    maxWidth: 500,\n  }}\n/>\n\n// Display & Flexbox\n<Box\n  sx={{\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    gap: 2,\n  }}\n/>\n```\n\n### Responsive Values\n\n```tsx\n<Box\n  sx={{\n    width: {\n      xs: '100%',   // 0-600px\n      sm: '50%',    // 600-900px\n      md: '33%',    // 900-1200px\n      lg: '25%',    // 1200-1536px\n      xl: '20%',    // 1536px+\n    },\n    p: {\n      xs: 1,\n      sm: 2,\n      md: 3,\n    },\n    display: {\n      xs: 'none',\n      md: 'block',\n    },\n  }}\n/>\n```\n\n### Pseudo Selectors\n\n```tsx\n<Box\n  sx={{\n    '&:hover': {\n      bgcolor: 'primary.light',\n      cursor: 'pointer',\n    },\n    '&:active': {\n      bgcolor: 'primary.dark',\n    },\n    '&:focus': {\n      outline: '2px solid',\n      outlineColor: 'primary.main',\n    },\n    '&::before': {\n      content: '\"\"',\n      display: 'block',\n    },\n  }}\n/>\n```\n\n### Nested Selectors\n\n```tsx\n<Box\n  sx={{\n    // Direct children\n    '& > *': {\n      mb: 2,\n    },\n    // Specific child elements\n    '& .title': {\n      fontWeight: 'bold',\n    },\n    // First/last child\n    '& > *:first-of-type': {\n      mt: 0,\n    },\n    '& > *:last-child': {\n      mb: 0,\n    },\n  }}\n/>\n```\n\n### Theme Access in sx\n\n```tsx\n<Box\n  sx={(theme) => ({\n    color: theme.palette.primary.main,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(3),\n    },\n    ...(theme.palette.mode === 'dark' && {\n      bgcolor: 'grey.900',\n    }),\n  })}\n/>\n```\n\n## styled API\n\n### Basic styled Components\n\n```tsx\nimport { styled } from '@mui/material/styles'\n\nconst StyledButton = styled(Button)(({ theme }) => ({\n  backgroundColor: theme.palette.primary.main,\n  borderRadius: theme.shape.borderRadius * 2,\n  padding: theme.spacing(1, 3),\n  '&:hover': {\n    backgroundColor: theme.palette.primary.dark,\n  },\n}))\n\n// Usage\n<StyledButton>Click Me</StyledButton>\n```\n\n### With Props\n\n```tsx\ninterface StyledCardProps {\n  variant?: 'elevated' | 'outlined'\n}\n\nconst StyledCard = styled(Card, {\n  shouldForwardProp: (prop) => prop !== 'variant',\n})<StyledCardProps>(({ theme, variant }) => ({\n  borderRadius: 12,\n  ...(variant === 'elevated' && {\n    boxShadow: theme.shadows[4],\n  }),\n  ...(variant === 'outlined' && {\n    border: `1px solid ${theme.palette.divider}`,\n    boxShadow: 'none',\n  }),\n}))\n\n// Usage\n<StyledCard variant=\"elevated\">Content</StyledCard>\n```\n\n### Extending Components\n\n```tsx\nconst PrimaryButton = styled(Button)({\n  backgroundColor: '#1976d2',\n  color: 'white',\n  '&:hover': {\n    backgroundColor: '#1565c0',\n  },\n})\n\nconst LargePrimaryButton = styled(PrimaryButton)({\n  padding: '16px 32px',\n  fontSize: '1.2rem',\n})\n```\n\n### Component Slots\n\n```tsx\nconst StyledTextField = styled(TextField)(({ theme }) => ({\n  '& .MuiOutlinedInput-root': {\n    borderRadius: 8,\n    '& fieldset': {\n      borderColor: theme.palette.grey[300],\n    },\n    '&:hover fieldset': {\n      borderColor: theme.palette.primary.main,\n    },\n    '&.Mui-focused fieldset': {\n      borderColor: theme.palette.primary.main,\n      borderWidth: 2,\n    },\n  },\n  '& .MuiInputLabel-root': {\n    color: theme.palette.grey[600],\n    '&.Mui-focused': {\n      color: theme.palette.primary.main,\n    },\n  },\n}))\n```\n\n## CSS Utilities\n\n### Using clsx\n\n```tsx\nimport clsx from 'clsx'\n\nfunction Component({ active, disabled }) {\n  return (\n    <Box\n      className={clsx(\n        'base-class',\n        active && 'active-class',\n        disabled && 'disabled-class'\n      )}\n    />\n  )\n}\n```\n\n### Combining sx Arrays\n\n```tsx\nconst baseStyles = {\n  p: 2,\n  borderRadius: 1,\n}\n\nconst activeStyles = {\n  bgcolor: 'primary.main',\n  color: 'white',\n}\n\n<Box\n  sx={[\n    baseStyles,\n    isActive && activeStyles,\n    // Conditional styles inline\n    (theme) => ({\n      '&:hover': {\n        bgcolor: isActive\n          ? theme.palette.primary.dark\n          : theme.palette.grey[100],\n      },\n    }),\n  ]}\n/>\n```\n\n## CSS Modules Integration\n\n```tsx\n// Component.module.css\n.card {\n  border-radius: 8px;\n  padding: 16px;\n}\n\n.card.active {\n  border-color: var(--mui-palette-primary-main);\n}\n\n// Component.tsx\nimport styles from './Component.module.css'\nimport clsx from 'clsx'\n\nfunction Component({ active }) {\n  return (\n    <Card\n      className={clsx(styles.card, active && styles.active)}\n      sx={{ boxShadow: 2 }}  // Can combine with sx\n    />\n  )\n}\n```\n\n## Global Styles\n\n### CssBaseline Customization\n\n```tsx\nconst theme = createTheme({\n  components: {\n    MuiCssBaseline: {\n      styleOverrides: {\n        body: {\n          scrollbarColor: '#6b6b6b #2b2b2b',\n          '&::-webkit-scrollbar, & *::-webkit-scrollbar': {\n            width: 8,\n          },\n          '&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb': {\n            borderRadius: 8,\n            backgroundColor: '#6b6b6b',\n          },\n        },\n      },\n    },\n  },\n})\n```\n\n### GlobalStyles Component\n\n```tsx\nimport { GlobalStyles } from '@mui/material'\n\n<GlobalStyles\n  styles={{\n    '*': {\n      boxSizing: 'border-box',\n    },\n    'ul, ol': {\n      margin: 0,\n      padding: 0,\n      listStyle: 'none',\n    },\n    a: {\n      textDecoration: 'none',\n      color: 'inherit',\n    },\n  }}\n/>\n```\n\n## Component Classes\n\n### Accessing MUI Classes\n\n```tsx\nimport { buttonClasses, inputClasses } from '@mui/material'\n\nconst theme = createTheme({\n  components: {\n    MuiButton: {\n      styleOverrides: {\n        root: {\n          [`&.${buttonClasses.disabled}`]: {\n            opacity: 0.5,\n          },\n        },\n      },\n    },\n  },\n})\n\n// Or in styled\nconst CustomInput = styled(TextField)({\n  [`& .${inputClasses.input}`]: {\n    padding: '12px 16px',\n  },\n})\n```\n\n## Performance Tips\n\n### Avoid Inline Functions\n\n```tsx\n// BAD: Creates new object every render\n<Box sx={{ color: 'primary.main' }} />\n\n// GOOD: Extract static styles\nconst styles = { color: 'primary.main' }\n<Box sx={styles} />\n\n// GOOD: useMemo for computed styles\nconst styles = useMemo(() => ({\n  color: isActive ? 'primary.main' : 'text.secondary',\n}), [isActive])\n<Box sx={styles} />\n```\n\n### Use styled for Complex Components\n\n```tsx\n// For components with many styles, styled is more performant\nconst StyledCard = styled(Card)(({ theme }) => ({\n  // Complex styles here\n}))\n\n// Use instead of large sx objects\n<StyledCard />\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-material-ui/skills/mui-theming/SKILL.md": "---\nname: mui-theming\ndescription: Material-UI theme customization\nuser-invocable: false\n---\n\n# Material-UI Theming Skill\n\nPatterns for customizing Material-UI themes.\n\n## Creating Themes\n\n### Basic Theme\n\n```tsx\nimport { createTheme, ThemeProvider } from '@mui/material'\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#1976d2',\n    },\n    secondary: {\n      main: '#dc004e',\n    },\n  },\n})\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <YourApp />\n    </ThemeProvider>\n  )\n}\n```\n\n### Custom Palette\n\n```tsx\nconst theme = createTheme({\n  palette: {\n    primary: {\n      light: '#4dabf5',\n      main: '#2196f3',\n      dark: '#1769aa',\n      contrastText: '#fff',\n    },\n    secondary: {\n      light: '#ff7961',\n      main: '#f44336',\n      dark: '#ba000d',\n      contrastText: '#000',\n    },\n    error: {\n      main: '#f44336',\n    },\n    warning: {\n      main: '#ff9800',\n    },\n    info: {\n      main: '#2196f3',\n    },\n    success: {\n      main: '#4caf50',\n    },\n    background: {\n      default: '#f5f5f5',\n      paper: '#ffffff',\n    },\n    text: {\n      primary: 'rgba(0, 0, 0, 0.87)',\n      secondary: 'rgba(0, 0, 0, 0.6)',\n      disabled: 'rgba(0, 0, 0, 0.38)',\n    },\n  },\n})\n```\n\n### Color from Palette\n\n```tsx\nimport { blue, purple } from '@mui/material/colors'\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: blue[500],\n      light: blue[300],\n      dark: blue[700],\n    },\n    secondary: {\n      main: purple[500],\n    },\n  },\n})\n```\n\n## Typography\n\n### Custom Typography\n\n```tsx\nconst theme = createTheme({\n  typography: {\n    fontFamily: '\"Inter\", \"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n    fontSize: 14,\n\n    h1: {\n      fontSize: '2.5rem',\n      fontWeight: 700,\n      lineHeight: 1.2,\n    },\n    h2: {\n      fontSize: '2rem',\n      fontWeight: 600,\n    },\n    h3: {\n      fontSize: '1.75rem',\n      fontWeight: 600,\n    },\n    body1: {\n      fontSize: '1rem',\n      lineHeight: 1.5,\n    },\n    body2: {\n      fontSize: '0.875rem',\n      lineHeight: 1.43,\n    },\n    button: {\n      textTransform: 'none',  // Remove uppercase\n      fontWeight: 600,\n    },\n  },\n})\n```\n\n### Responsive Typography\n\n```tsx\nconst theme = createTheme({\n  typography: {\n    h1: {\n      fontSize: '2rem',\n      '@media (min-width:600px)': {\n        fontSize: '2.5rem',\n      },\n      '@media (min-width:960px)': {\n        fontSize: '3rem',\n      },\n    },\n  },\n})\n\n// Or using responsiveFontSizes\nimport { responsiveFontSizes } from '@mui/material/styles'\n\nlet theme = createTheme()\ntheme = responsiveFontSizes(theme)\n```\n\n## Spacing\n\n### Custom Spacing\n\n```tsx\nconst theme = createTheme({\n  spacing: 8,  // Default: 8px base unit\n})\n\n// Usage: theme.spacing(2) = 16px\n\n// Custom spacing function\nconst theme = createTheme({\n  spacing: (factor: number) => `${0.25 * factor}rem`,\n})\n\n// Usage: theme.spacing(4) = '1rem'\n```\n\n## Breakpoints\n\n### Custom Breakpoints\n\n```tsx\nconst theme = createTheme({\n  breakpoints: {\n    values: {\n      xs: 0,\n      sm: 600,\n      md: 900,\n      lg: 1200,\n      xl: 1536,\n    },\n  },\n})\n\n// Usage\n<Box\n  sx={{\n    width: {\n      xs: '100%',\n      sm: '50%',\n      md: '33.33%',\n    },\n  }}\n/>\n```\n\n## Component Overrides\n\n### Global Component Styles\n\n```tsx\nconst theme = createTheme({\n  components: {\n    MuiButton: {\n      styleOverrides: {\n        root: {\n          borderRadius: 8,\n          textTransform: 'none',\n        },\n        contained: {\n          boxShadow: 'none',\n          '&:hover': {\n            boxShadow: 'none',\n          },\n        },\n      },\n      defaultProps: {\n        disableElevation: true,\n      },\n    },\n    MuiTextField: {\n      defaultProps: {\n        variant: 'outlined',\n        size: 'small',\n      },\n    },\n    MuiCard: {\n      styleOverrides: {\n        root: {\n          borderRadius: 12,\n          boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n        },\n      },\n    },\n  },\n})\n```\n\n### Variant Overrides\n\n```tsx\nconst theme = createTheme({\n  components: {\n    MuiButton: {\n      variants: [\n        {\n          props: { variant: 'dashed' },\n          style: {\n            border: '2px dashed',\n          },\n        },\n        {\n          props: { variant: 'contained', color: 'primary' },\n          style: {\n            background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\n          },\n        },\n      ],\n    },\n  },\n})\n\n// Usage\n<Button variant=\"dashed\">Dashed Button</Button>\n```\n\n## Dark Mode\n\n### Dark Theme\n\n```tsx\nconst darkTheme = createTheme({\n  palette: {\n    mode: 'dark',\n    primary: {\n      main: '#90caf9',\n    },\n    secondary: {\n      main: '#f48fb1',\n    },\n    background: {\n      default: '#121212',\n      paper: '#1e1e1e',\n    },\n  },\n})\n```\n\n### Theme Toggle\n\n```tsx\nimport { useMemo, useState } from 'react'\n\nfunction App() {\n  const [mode, setMode] = useState<'light' | 'dark'>('light')\n\n  const theme = useMemo(\n    () =>\n      createTheme({\n        palette: {\n          mode,\n          ...(mode === 'light'\n            ? {\n                primary: { main: '#1976d2' },\n                background: { default: '#fff', paper: '#f5f5f5' },\n              }\n            : {\n                primary: { main: '#90caf9' },\n                background: { default: '#121212', paper: '#1e1e1e' },\n              }),\n        },\n      }),\n    [mode]\n  )\n\n  const toggleMode = () => {\n    setMode((prev) => (prev === 'light' ? 'dark' : 'light'))\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Button onClick={toggleMode}>Toggle Mode</Button>\n    </ThemeProvider>\n  )\n}\n```\n\n## Custom Theme Variables\n\n### Extending Theme\n\n```tsx\ndeclare module '@mui/material/styles' {\n  interface Theme {\n    status: {\n      danger: string\n    }\n  }\n  interface ThemeOptions {\n    status?: {\n      danger?: string\n    }\n  }\n}\n\nconst theme = createTheme({\n  status: {\n    danger: '#f44336',\n  },\n})\n\n// Usage\n<Box sx={{ color: (theme) => theme.status.danger }} />\n```\n\n### Custom Palette Colors\n\n```tsx\ndeclare module '@mui/material/styles' {\n  interface Palette {\n    neutral: Palette['primary']\n  }\n  interface PaletteOptions {\n    neutral?: PaletteOptions['primary']\n  }\n}\n\ndeclare module '@mui/material/Button' {\n  interface ButtonPropsColorOverrides {\n    neutral: true\n  }\n}\n\nconst theme = createTheme({\n  palette: {\n    neutral: {\n      main: '#64748B',\n      contrastText: '#fff',\n    },\n  },\n})\n\n// Usage\n<Button color=\"neutral\">Neutral Button</Button>\n```\n\n## Theme Access\n\n### useTheme Hook\n\n```tsx\nimport { useTheme } from '@mui/material/styles'\n\nfunction Component() {\n  const theme = useTheme()\n\n  return (\n    <div style={{ color: theme.palette.primary.main }}>\n      Primary colored text\n    </div>\n  )\n}\n```\n\n### sx Prop Theme Access\n\n```tsx\n<Box\n  sx={{\n    color: 'primary.main',\n    bgcolor: 'background.paper',\n    p: 2,  // theme.spacing(2)\n    borderRadius: 1,  // theme.shape.borderRadius\n    boxShadow: 1,  // theme.shadows[1]\n  }}\n>\n  Content\n</Box>\n\n// With function for complex logic\n<Box\n  sx={(theme) => ({\n    color: theme.palette.mode === 'dark' ? 'grey.300' : 'grey.800',\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(4),\n    },\n  })}\n/>\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-nextjs/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-nextjs\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Next.js patterns - App Router, Server/Client Components, API routes, middleware\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"nextjs\", \"react\", \"app-router\", \"server-components\", \"patterns\"]\n}\n",
        "plugins/aai-stack-nextjs/skills/nextjs-api-routes/SKILL.md": "---\nname: nextjs-api-routes\ndescription: Next.js App Router API route patterns\nuser-invocable: false\n---\n\n# Next.js API Routes Skill\n\nPatterns for building API routes in Next.js App Router.\n\n## Route Handlers\n\n### Basic Route Handler\n\n```tsx\n// app/api/users/route.ts\nimport { NextRequest, NextResponse } from 'next/server'\n\nexport async function GET(request: NextRequest) {\n  const users = await db.user.findMany()\n  return NextResponse.json(users)\n}\n\nexport async function POST(request: NextRequest) {\n  const body = await request.json()\n  const user = await db.user.create({ data: body })\n  return NextResponse.json(user, { status: 201 })\n}\n```\n\n### Dynamic Routes\n\n```tsx\n// app/api/users/[id]/route.ts\nimport { NextRequest, NextResponse } from 'next/server'\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  const user = await db.user.findUnique({\n    where: { id: params.id },\n  })\n\n  if (!user) {\n    return NextResponse.json(\n      { error: 'User not found' },\n      { status: 404 }\n    )\n  }\n\n  return NextResponse.json(user)\n}\n\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  const body = await request.json()\n  const user = await db.user.update({\n    where: { id: params.id },\n    data: body,\n  })\n  return NextResponse.json(user)\n}\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  await db.user.delete({ where: { id: params.id } })\n  return new NextResponse(null, { status: 204 })\n}\n```\n\n## Request Handling\n\n### Query Parameters\n\n```tsx\nexport async function GET(request: NextRequest) {\n  const searchParams = request.nextUrl.searchParams\n  const page = parseInt(searchParams.get('page') || '1')\n  const limit = parseInt(searchParams.get('limit') || '10')\n  const search = searchParams.get('search') || ''\n\n  const users = await db.user.findMany({\n    where: {\n      name: { contains: search, mode: 'insensitive' },\n    },\n    skip: (page - 1) * limit,\n    take: limit,\n  })\n\n  const total = await db.user.count({\n    where: {\n      name: { contains: search, mode: 'insensitive' },\n    },\n  })\n\n  return NextResponse.json({\n    data: users,\n    pagination: {\n      page,\n      limit,\n      total,\n      totalPages: Math.ceil(total / limit),\n    },\n  })\n}\n```\n\n### Headers\n\n```tsx\nexport async function GET(request: NextRequest) {\n  // Read headers\n  const authHeader = request.headers.get('authorization')\n  const contentType = request.headers.get('content-type')\n\n  // Set response headers\n  return NextResponse.json(\n    { data: 'example' },\n    {\n      headers: {\n        'Cache-Control': 'max-age=3600',\n        'X-Custom-Header': 'value',\n      },\n    }\n  )\n}\n```\n\n### Cookies\n\n```tsx\nimport { cookies } from 'next/headers'\n\nexport async function GET() {\n  const cookieStore = cookies()\n  const token = cookieStore.get('token')\n\n  return NextResponse.json({ token: token?.value })\n}\n\nexport async function POST(request: NextRequest) {\n  const response = NextResponse.json({ success: true })\n\n  // Set cookie\n  response.cookies.set('token', 'abc123', {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    maxAge: 60 * 60 * 24 * 7, // 1 week\n  })\n\n  return response\n}\n```\n\n### Request Body\n\n```tsx\n// JSON body\nexport async function POST(request: NextRequest) {\n  const body = await request.json()\n  return NextResponse.json(body)\n}\n\n// Form data\nexport async function POST(request: NextRequest) {\n  const formData = await request.formData()\n  const name = formData.get('name')\n  const file = formData.get('file') as File\n\n  return NextResponse.json({ name, fileName: file.name })\n}\n\n// Text body\nexport async function POST(request: NextRequest) {\n  const text = await request.text()\n  return NextResponse.json({ text })\n}\n```\n\n## Response Types\n\n### JSON Response\n\n```tsx\nexport async function GET() {\n  return NextResponse.json({\n    success: true,\n    data: { message: 'Hello' },\n  })\n}\n```\n\n### Streaming Response\n\n```tsx\nexport async function GET() {\n  const encoder = new TextEncoder()\n\n  const stream = new ReadableStream({\n    async start(controller) {\n      for (let i = 0; i < 10; i++) {\n        controller.enqueue(encoder.encode(`data: ${i}\\n\\n`))\n        await new Promise((resolve) => setTimeout(resolve, 1000))\n      }\n      controller.close()\n    },\n  })\n\n  return new Response(stream, {\n    headers: {\n      'Content-Type': 'text/event-stream',\n      'Cache-Control': 'no-cache',\n      'Connection': 'keep-alive',\n    },\n  })\n}\n```\n\n### File Download\n\n```tsx\nexport async function GET() {\n  const file = await readFile('./files/document.pdf')\n\n  return new NextResponse(file, {\n    headers: {\n      'Content-Type': 'application/pdf',\n      'Content-Disposition': 'attachment; filename=\"document.pdf\"',\n    },\n  })\n}\n```\n\n### Redirect\n\n```tsx\nimport { redirect } from 'next/navigation'\n\nexport async function GET() {\n  redirect('/new-location')\n}\n\n// Or with NextResponse\nexport async function GET() {\n  return NextResponse.redirect(new URL('/new-location', request.url))\n}\n```\n\n## Error Handling\n\n### Structured Errors\n\n```tsx\nclass ApiError extends Error {\n  constructor(\n    public statusCode: number,\n    public code: string,\n    message: string\n  ) {\n    super(message)\n  }\n}\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const user = await db.user.findUnique({\n      where: { id: params.id },\n    })\n\n    if (!user) {\n      throw new ApiError(404, 'USER_NOT_FOUND', 'User not found')\n    }\n\n    return NextResponse.json(user)\n  } catch (error) {\n    if (error instanceof ApiError) {\n      return NextResponse.json(\n        { error: { code: error.code, message: error.message } },\n        { status: error.statusCode }\n      )\n    }\n\n    console.error('Unexpected error:', error)\n    return NextResponse.json(\n      { error: { code: 'INTERNAL_ERROR', message: 'Internal server error' } },\n      { status: 500 }\n    )\n  }\n}\n```\n\n## Authentication\n\n### JWT Verification\n\n```tsx\nimport { jwtVerify } from 'jose'\n\nasync function verifyAuth(request: NextRequest) {\n  const token = request.headers.get('authorization')?.replace('Bearer ', '')\n\n  if (!token) {\n    return null\n  }\n\n  try {\n    const { payload } = await jwtVerify(\n      token,\n      new TextEncoder().encode(process.env.JWT_SECRET)\n    )\n    return payload\n  } catch {\n    return null\n  }\n}\n\nexport async function GET(request: NextRequest) {\n  const user = await verifyAuth(request)\n\n  if (!user) {\n    return NextResponse.json(\n      { error: 'Unauthorized' },\n      { status: 401 }\n    )\n  }\n\n  return NextResponse.json({ user })\n}\n```\n\n### Middleware Helper\n\n```tsx\n// lib/api-auth.ts\nexport function withAuth(\n  handler: (\n    request: NextRequest,\n    context: { params: Record<string, string>; user: User }\n  ) => Promise<NextResponse>\n) {\n  return async (\n    request: NextRequest,\n    context: { params: Record<string, string> }\n  ) => {\n    const user = await verifyAuth(request)\n\n    if (!user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    return handler(request, { ...context, user })\n  }\n}\n\n// Usage\nexport const GET = withAuth(async (request, { params, user }) => {\n  // user is available here\n  return NextResponse.json({ user })\n})\n```\n\n## Validation\n\n### With Zod\n\n```tsx\nimport { z } from 'zod'\n\nconst createUserSchema = z.object({\n  name: z.string().min(1).max(100),\n  email: z.string().email(),\n  age: z.number().int().positive().optional(),\n})\n\nexport async function POST(request: NextRequest) {\n  const body = await request.json()\n\n  const result = createUserSchema.safeParse(body)\n\n  if (!result.success) {\n    return NextResponse.json(\n      {\n        error: 'Validation failed',\n        details: result.error.flatten().fieldErrors,\n      },\n      { status: 400 }\n    )\n  }\n\n  const user = await db.user.create({ data: result.data })\n  return NextResponse.json(user, { status: 201 })\n}\n```\n\n## Caching\n\n### Static Routes\n\n```tsx\n// Force static (default for GET without dynamic data)\nexport const dynamic = 'force-static'\n\nexport async function GET() {\n  return NextResponse.json({ message: 'Static response' })\n}\n```\n\n### Dynamic Routes\n\n```tsx\nexport const dynamic = 'force-dynamic'\n\nexport async function GET() {\n  return NextResponse.json({ time: new Date().toISOString() })\n}\n```\n\n### Revalidation\n\n```tsx\nexport const revalidate = 60  // Revalidate every 60 seconds\n\nexport async function GET() {\n  const data = await fetchData()\n  return NextResponse.json(data)\n}\n```\n\n## CORS\n\n```tsx\nexport async function GET(request: NextRequest) {\n  const origin = request.headers.get('origin')\n\n  const response = NextResponse.json({ data: 'example' })\n\n  response.headers.set('Access-Control-Allow-Origin', origin || '*')\n  response.headers.set('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE')\n  response.headers.set('Access-Control-Allow-Headers', 'Content-Type, Authorization')\n\n  return response\n}\n\nexport async function OPTIONS() {\n  return new NextResponse(null, {\n    status: 204,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  })\n}\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-nextjs/skills/nextjs-app-router/SKILL.md": "---\nname: nextjs-app-router\ndescription: Next.js App Router patterns and conventions\nuser-invocable: false\n---\n\n# Next.js App Router Skill\n\nPatterns for building applications with Next.js App Router.\n\n## File-Based Routing\n\n### Basic Routes\n\n```\napp/\n page.tsx              # / (home)\n about/\n    page.tsx          # /about\n blog/\n    page.tsx          # /blog\n blog/\n    [slug]/\n        page.tsx      # /blog/:slug\n shop/\n     [...slug]/\n         page.tsx      # /shop/* (catch-all)\n```\n\n### Special Files\n\n```\napp/\n layout.tsx            # Shared layout\n page.tsx              # Page content\n loading.tsx           # Loading UI\n error.tsx             # Error UI\n not-found.tsx         # 404 UI\n template.tsx          # Re-mount on navigation\n default.tsx           # Parallel route fallback\n route.ts              # API route\n```\n\n### Route Groups\n\n```\napp/\n (auth)/               # Group without affecting URL\n    login/\n       page.tsx      # /login\n    register/\n        page.tsx      # /register\n (dashboard)/\n    layout.tsx        # Shared dashboard layout\n    settings/\n       page.tsx      # /settings\n    profile/\n        page.tsx      # /profile\n```\n\n## Layouts\n\n### Root Layout\n\n```tsx\n// app/layout.tsx\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <Header />\n        <main>{children}</main>\n        <Footer />\n      </body>\n    </html>\n  )\n}\n```\n\n### Nested Layouts\n\n```tsx\n// app/dashboard/layout.tsx\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <div className=\"dashboard\">\n      <Sidebar />\n      <div className=\"content\">{children}</div>\n    </div>\n  )\n}\n```\n\n### Parallel Routes\n\n```tsx\n// app/layout.tsx with parallel routes\nexport default function Layout({\n  children,\n  modal,\n  analytics,\n}: {\n  children: React.ReactNode\n  modal: React.ReactNode      // @modal slot\n  analytics: React.ReactNode  // @analytics slot\n}) {\n  return (\n    <>\n      {children}\n      {modal}\n      {analytics}\n    </>\n  )\n}\n\n// app/@modal/(..)photo/[id]/page.tsx\n// Intercepts /photo/[id] and shows in modal\n```\n\n## Data Fetching\n\n### Server Component Fetching\n\n```tsx\n// app/users/page.tsx\nasync function getUsers() {\n  const res = await fetch('https://api.example.com/users', {\n    next: { revalidate: 60 },  // Revalidate every 60 seconds\n  })\n  if (!res.ok) throw new Error('Failed to fetch')\n  return res.json()\n}\n\nexport default async function UsersPage() {\n  const users = await getUsers()\n\n  return (\n    <ul>\n      {users.map((user) => (\n        <li key={user.id}>{user.name}</li>\n      ))}\n    </ul>\n  )\n}\n```\n\n### Caching Options\n\n```tsx\n// No cache\nfetch(url, { cache: 'no-store' })\n\n// Force cache\nfetch(url, { cache: 'force-cache' })\n\n// Revalidate\nfetch(url, { next: { revalidate: 60 } })\n\n// Tag-based\nfetch(url, { next: { tags: ['users'] } })\n```\n\n### Dynamic Data\n\n```tsx\n// Force dynamic rendering\nexport const dynamic = 'force-dynamic'\n\n// Or use dynamic functions\nimport { cookies, headers } from 'next/headers'\n\nexport default async function Page() {\n  const cookieStore = cookies()\n  const headersList = headers()\n\n  return <div>Dynamic content</div>\n}\n```\n\n## Loading and Error States\n\n### Loading UI\n\n```tsx\n// app/dashboard/loading.tsx\nexport default function Loading() {\n  return (\n    <div className=\"loading\">\n      <Spinner />\n      <p>Loading dashboard...</p>\n    </div>\n  )\n}\n```\n\n### Streaming with Suspense\n\n```tsx\nimport { Suspense } from 'react'\n\nasync function SlowComponent() {\n  const data = await fetchSlowData()\n  return <div>{data}</div>\n}\n\nexport default function Page() {\n  return (\n    <div>\n      <h1>Dashboard</h1>\n      <Suspense fallback={<Skeleton />}>\n        <SlowComponent />\n      </Suspense>\n    </div>\n  )\n}\n```\n\n### Error Handling\n\n```tsx\n// app/dashboard/error.tsx\n'use client'\n\nexport default function Error({\n  error,\n  reset,\n}: {\n  error: Error & { digest?: string }\n  reset: () => void\n}) {\n  return (\n    <div>\n      <h2>Something went wrong!</h2>\n      <button onClick={() => reset()}>Try again</button>\n    </div>\n  )\n}\n```\n\n### Not Found\n\n```tsx\n// app/not-found.tsx\nexport default function NotFound() {\n  return (\n    <div>\n      <h2>Page Not Found</h2>\n      <Link href=\"/\">Return Home</Link>\n    </div>\n  )\n}\n\n// Trigger programmatically\nimport { notFound } from 'next/navigation'\n\nasync function getPost(id: string) {\n  const post = await fetchPost(id)\n  if (!post) notFound()\n  return post\n}\n```\n\n## Metadata\n\n### Static Metadata\n\n```tsx\n// app/about/page.tsx\nimport type { Metadata } from 'next'\n\nexport const metadata: Metadata = {\n  title: 'About Us',\n  description: 'Learn more about our company',\n  openGraph: {\n    title: 'About Us',\n    description: 'Learn more about our company',\n    images: ['/og-image.png'],\n  },\n}\n```\n\n### Dynamic Metadata\n\n```tsx\n// app/blog/[slug]/page.tsx\nimport type { Metadata } from 'next'\n\ntype Props = {\n  params: { slug: string }\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const post = await getPost(params.slug)\n\n  return {\n    title: post.title,\n    description: post.excerpt,\n  }\n}\n```\n\n## Navigation\n\n### Link Component\n\n```tsx\nimport Link from 'next/link'\n\nexport default function Navigation() {\n  return (\n    <nav>\n      <Link href=\"/\">Home</Link>\n      <Link href=\"/about\">About</Link>\n      <Link href=\"/blog\" prefetch={false}>Blog</Link>\n      <Link href={{ pathname: '/user', query: { id: '1' } }}>\n        User\n      </Link>\n    </nav>\n  )\n}\n```\n\n### Programmatic Navigation\n\n```tsx\n'use client'\n\nimport { useRouter, usePathname, useSearchParams } from 'next/navigation'\n\nexport default function Navigation() {\n  const router = useRouter()\n  const pathname = usePathname()\n  const searchParams = useSearchParams()\n\n  const handleClick = () => {\n    router.push('/dashboard')\n    // router.replace('/dashboard')\n    // router.refresh()\n    // router.back()\n  }\n\n  return (\n    <button onClick={handleClick}>\n      Go to Dashboard\n    </button>\n  )\n}\n```\n\n### Redirect\n\n```tsx\nimport { redirect } from 'next/navigation'\n\nasync function Page() {\n  const session = await getSession()\n\n  if (!session) {\n    redirect('/login')\n  }\n\n  return <div>Protected content</div>\n}\n```\n\n## Route Handlers\n\n### API Route\n\n```tsx\n// app/api/users/route.ts\nimport { NextRequest, NextResponse } from 'next/server'\n\nexport async function GET(request: NextRequest) {\n  const searchParams = request.nextUrl.searchParams\n  const query = searchParams.get('query')\n\n  const users = await getUsers(query)\n  return NextResponse.json(users)\n}\n\nexport async function POST(request: NextRequest) {\n  const body = await request.json()\n  const user = await createUser(body)\n\n  return NextResponse.json(user, { status: 201 })\n}\n```\n\n### Dynamic Route Handler\n\n```tsx\n// app/api/users/[id]/route.ts\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  const user = await getUser(params.id)\n\n  if (!user) {\n    return NextResponse.json(\n      { error: 'User not found' },\n      { status: 404 }\n    )\n  }\n\n  return NextResponse.json(user)\n}\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-nextjs/skills/nextjs-auth/SKILL.md": "---\nname: nextjs-auth\ndescription: NextAuth.js / Auth.js authentication patterns\nuser-invocable: false\n---\n\n# Next.js Auth Skill\n\nPatterns for implementing authentication with NextAuth.js / Auth.js.\n\n## Setup\n\n### Basic Configuration\n\n```typescript\n// app/api/auth/[...nextauth]/route.ts\nimport NextAuth from 'next-auth'\nimport { authOptions } from '@/lib/auth'\n\nconst handler = NextAuth(authOptions)\nexport { handler as GET, handler as POST }\n```\n\n```typescript\n// lib/auth.ts\nimport { NextAuthOptions } from 'next-auth'\nimport CredentialsProvider from 'next-auth/providers/credentials'\nimport GoogleProvider from 'next-auth/providers/google'\n\nexport const authOptions: NextAuthOptions = {\n  providers: [\n    GoogleProvider({\n      clientId: process.env.GOOGLE_CLIENT_ID!,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,\n    }),\n    CredentialsProvider({\n      name: 'Credentials',\n      credentials: {\n        email: { label: 'Email', type: 'email' },\n        password: { label: 'Password', type: 'password' },\n      },\n      async authorize(credentials) {\n        const user = await verifyCredentials(\n          credentials?.email,\n          credentials?.password\n        )\n        if (user) return user\n        return null\n      },\n    }),\n  ],\n  pages: {\n    signIn: '/auth/signin',\n    signOut: '/auth/signout',\n    error: '/auth/error',\n  },\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.id = user.id\n        token.role = user.role\n      }\n      return token\n    },\n    async session({ session, token }) {\n      session.user.id = token.id as string\n      session.user.role = token.role as string\n      return session\n    },\n  },\n  session: {\n    strategy: 'jwt',\n  },\n}\n```\n\n### Type Extensions\n\n```typescript\n// types/next-auth.d.ts\nimport { DefaultSession } from 'next-auth'\n\ndeclare module 'next-auth' {\n  interface Session {\n    user: {\n      id: string\n      role: string\n    } & DefaultSession['user']\n  }\n\n  interface User {\n    role: string\n  }\n}\n\ndeclare module 'next-auth/jwt' {\n  interface JWT {\n    id: string\n    role: string\n  }\n}\n```\n\n## Server-Side Auth\n\n### Getting Session in Server Components\n\n```tsx\n// app/dashboard/page.tsx\nimport { getServerSession } from 'next-auth'\nimport { authOptions } from '@/lib/auth'\nimport { redirect } from 'next/navigation'\n\nexport default async function DashboardPage() {\n  const session = await getServerSession(authOptions)\n\n  if (!session) {\n    redirect('/auth/signin')\n  }\n\n  return (\n    <div>\n      <h1>Welcome, {session.user.name}</h1>\n      <p>Role: {session.user.role}</p>\n    </div>\n  )\n}\n```\n\n### Auth in API Routes\n\n```typescript\n// app/api/protected/route.ts\nimport { getServerSession } from 'next-auth'\nimport { authOptions } from '@/lib/auth'\nimport { NextResponse } from 'next/server'\n\nexport async function GET() {\n  const session = await getServerSession(authOptions)\n\n  if (!session) {\n    return NextResponse.json(\n      { error: 'Unauthorized' },\n      { status: 401 }\n    )\n  }\n\n  // User is authenticated\n  return NextResponse.json({\n    user: session.user,\n    data: await getProtectedData(session.user.id),\n  })\n}\n```\n\n## Client-Side Auth\n\n### Session Provider\n\n```tsx\n// app/providers.tsx\n'use client'\n\nimport { SessionProvider } from 'next-auth/react'\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  return <SessionProvider>{children}</SessionProvider>\n}\n\n// app/layout.tsx\nimport { Providers } from './providers'\n\nexport default function RootLayout({ children }) {\n  return (\n    <html>\n      <body>\n        <Providers>{children}</Providers>\n      </body>\n    </html>\n  )\n}\n```\n\n### useSession Hook\n\n```tsx\n'use client'\n\nimport { useSession, signIn, signOut } from 'next-auth/react'\n\nexport function AuthButton() {\n  const { data: session, status } = useSession()\n\n  if (status === 'loading') {\n    return <div>Loading...</div>\n  }\n\n  if (session) {\n    return (\n      <div>\n        <span>Welcome, {session.user.name}</span>\n        <button onClick={() => signOut()}>Sign Out</button>\n      </div>\n    )\n  }\n\n  return <button onClick={() => signIn()}>Sign In</button>\n}\n```\n\n### Protected Client Component\n\n```tsx\n'use client'\n\nimport { useSession } from 'next-auth/react'\nimport { useRouter } from 'next/navigation'\nimport { useEffect } from 'react'\n\nexport function ProtectedComponent({ children }: { children: React.ReactNode }) {\n  const { status } = useSession()\n  const router = useRouter()\n\n  useEffect(() => {\n    if (status === 'unauthenticated') {\n      router.push('/auth/signin')\n    }\n  }, [status, router])\n\n  if (status === 'loading') {\n    return <div>Loading...</div>\n  }\n\n  if (status === 'authenticated') {\n    return <>{children}</>\n  }\n\n  return null\n}\n```\n\n## Middleware Protection\n\n```typescript\n// middleware.ts\nimport { withAuth } from 'next-auth/middleware'\nimport { NextResponse } from 'next/server'\n\nexport default withAuth(\n  function middleware(req) {\n    const token = req.nextauth.token\n    const path = req.nextUrl.pathname\n\n    // Role-based access control\n    if (path.startsWith('/admin') && token?.role !== 'admin') {\n      return NextResponse.redirect(new URL('/unauthorized', req.url))\n    }\n\n    return NextResponse.next()\n  },\n  {\n    callbacks: {\n      authorized: ({ token }) => !!token,\n    },\n  }\n)\n\nexport const config = {\n  matcher: ['/dashboard/:path*', '/admin/:path*', '/account/:path*'],\n}\n```\n\n## Custom Sign In Page\n\n```tsx\n// app/auth/signin/page.tsx\n'use client'\n\nimport { signIn } from 'next-auth/react'\nimport { useSearchParams } from 'next/navigation'\nimport { useState } from 'react'\n\nexport default function SignIn() {\n  const searchParams = useSearchParams()\n  const callbackUrl = searchParams.get('callbackUrl') || '/dashboard'\n  const error = searchParams.get('error')\n\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    await signIn('credentials', {\n      email,\n      password,\n      callbackUrl,\n    })\n  }\n\n  return (\n    <div className=\"signin-page\">\n      <h1>Sign In</h1>\n\n      {error && <div className=\"error\">Authentication failed</div>}\n\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"Email\"\n        />\n        <input\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Password\"\n        />\n        <button type=\"submit\">Sign In</button>\n      </form>\n\n      <div className=\"divider\">or</div>\n\n      <button onClick={() => signIn('google', { callbackUrl })}>\n        Sign in with Google\n      </button>\n    </div>\n  )\n}\n```\n\n## Database Sessions\n\n```typescript\n// lib/auth.ts\nimport { PrismaAdapter } from '@auth/prisma-adapter'\nimport { prisma } from '@/lib/prisma'\n\nexport const authOptions: NextAuthOptions = {\n  adapter: PrismaAdapter(prisma),\n  session: {\n    strategy: 'database',  // Store sessions in database\n  },\n  providers: [...],\n  callbacks: {\n    async session({ session, user }) {\n      session.user.id = user.id\n      session.user.role = user.role\n      return session\n    },\n  },\n}\n```\n\n## Callbacks\n\n### JWT Callback\n\n```typescript\ncallbacks: {\n  async jwt({ token, user, account, trigger, session }) {\n    // Initial sign in\n    if (user) {\n      token.id = user.id\n      token.role = user.role\n    }\n\n    // Update triggered from client\n    if (trigger === 'update' && session) {\n      token.name = session.name\n    }\n\n    // Refresh token\n    if (account?.provider === 'google') {\n      token.accessToken = account.access_token\n    }\n\n    return token\n  },\n}\n```\n\n### Session Callback\n\n```typescript\ncallbacks: {\n  async session({ session, token, user }) {\n    // JWT strategy\n    if (token) {\n      session.user.id = token.id\n      session.user.role = token.role\n    }\n\n    // Database strategy\n    if (user) {\n      session.user.id = user.id\n      session.user.role = user.role\n    }\n\n    return session\n  },\n}\n```\n\n### Sign In Callback\n\n```typescript\ncallbacks: {\n  async signIn({ user, account, profile }) {\n    // Block certain emails\n    if (user.email?.endsWith('@blocked.com')) {\n      return false\n    }\n\n    // Allow OAuth but verify email for credentials\n    if (account?.provider === 'credentials') {\n      const dbUser = await prisma.user.findUnique({\n        where: { email: user.email },\n      })\n      if (!dbUser?.emailVerified) {\n        return '/auth/verify-email'  // Redirect\n      }\n    }\n\n    return true\n  },\n}\n```\n\n## Events\n\n```typescript\nevents: {\n  async signIn({ user, account, isNewUser }) {\n    if (isNewUser) {\n      await sendWelcomeEmail(user.email)\n    }\n    await logSignIn(user.id, account?.provider)\n  },\n\n  async signOut({ token }) {\n    await logSignOut(token.id)\n  },\n\n  async createUser({ user }) {\n    await initializeUserDefaults(user.id)\n  },\n}\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-nextjs/skills/nextjs-client-components/SKILL.md": "---\nname: nextjs-client-components\ndescription: Client Components patterns in Next.js App Router\nuser-invocable: false\n---\n\n# Next.js Client Components Skill\n\nPatterns for using Client Components in Next.js App Router.\n\n## Declaring Client Components\n\n### The 'use client' Directive\n\n```tsx\n'use client'\n\nimport { useState } from 'react'\n\nexport default function Counter() {\n  const [count, setCount] = useState(0)\n\n  return (\n    <button onClick={() => setCount(count + 1)}>\n      Count: {count}\n    </button>\n  )\n}\n```\n\n### Boundary Behavior\n\n```tsx\n'use client'\n\n// Everything imported into a client component becomes client code\nimport { Button } from './button'      // Also becomes client\nimport { formatDate } from './utils'   // Also becomes client\n\nexport function MyComponent() {\n  return <Button>{formatDate(new Date())}</Button>\n}\n```\n\n## When to Use Client Components\n\n### Interactive UI\n\n```tsx\n'use client'\n\nimport { useState } from 'react'\n\nexport function Accordion({ items }: { items: AccordionItem[] }) {\n  const [openIndex, setOpenIndex] = useState<number | null>(null)\n\n  return (\n    <div>\n      {items.map((item, index) => (\n        <div key={index}>\n          <button onClick={() => setOpenIndex(\n            openIndex === index ? null : index\n          )}>\n            {item.title}\n          </button>\n          {openIndex === index && <div>{item.content}</div>}\n        </div>\n      ))}\n    </div>\n  )\n}\n```\n\n### Event Handlers\n\n```tsx\n'use client'\n\nexport function SearchInput({ onSearch }: { onSearch: (q: string) => void }) {\n  const [query, setQuery] = useState('')\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault()\n    onSearch(query)\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n        placeholder=\"Search...\"\n      />\n      <button type=\"submit\">Search</button>\n    </form>\n  )\n}\n```\n\n### Browser APIs\n\n```tsx\n'use client'\n\nimport { useEffect, useState } from 'react'\n\nexport function WindowSize() {\n  const [size, setSize] = useState({ width: 0, height: 0 })\n\n  useEffect(() => {\n    function handleResize() {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      })\n    }\n\n    handleResize()\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [])\n\n  return <div>{size.width} x {size.height}</div>\n}\n```\n\n### React Hooks\n\n```tsx\n'use client'\n\nimport { useState, useEffect, useCallback, useMemo } from 'react'\n\nexport function DataTable({ data }: { data: Item[] }) {\n  const [sortKey, setSortKey] = useState<keyof Item>('name')\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc')\n\n  const sortedData = useMemo(() => {\n    return [...data].sort((a, b) => {\n      const aVal = a[sortKey]\n      const bVal = b[sortKey]\n      return sortOrder === 'asc'\n        ? aVal > bVal ? 1 : -1\n        : aVal < bVal ? 1 : -1\n    })\n  }, [data, sortKey, sortOrder])\n\n  const handleSort = useCallback((key: keyof Item) => {\n    if (key === sortKey) {\n      setSortOrder(order => order === 'asc' ? 'desc' : 'asc')\n    } else {\n      setSortKey(key)\n      setSortOrder('asc')\n    }\n  }, [sortKey])\n\n  return (\n    <table>\n      {/* ... */}\n    </table>\n  )\n}\n```\n\n## Client Component Patterns\n\n### Form with State\n\n```tsx\n'use client'\n\nimport { useState, FormEvent } from 'react'\n\ninterface FormData {\n  email: string\n  password: string\n}\n\nexport function LoginForm({ onSubmit }: { onSubmit: (data: FormData) => void }) {\n  const [formData, setFormData] = useState<FormData>({\n    email: '',\n    password: '',\n  })\n  const [errors, setErrors] = useState<Partial<FormData>>({})\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault()\n\n    // Validate\n    const newErrors: Partial<FormData> = {}\n    if (!formData.email) newErrors.email = 'Email required'\n    if (!formData.password) newErrors.password = 'Password required'\n\n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors)\n      return\n    }\n\n    onSubmit(formData)\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        type=\"email\"\n        value={formData.email}\n        onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n        placeholder=\"Email\"\n      />\n      {errors.email && <span>{errors.email}</span>}\n\n      <input\n        type=\"password\"\n        value={formData.password}\n        onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n        placeholder=\"Password\"\n      />\n      {errors.password && <span>{errors.password}</span>}\n\n      <button type=\"submit\">Login</button>\n    </form>\n  )\n}\n```\n\n### Modal Component\n\n```tsx\n'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { createPortal } from 'react-dom'\n\ninterface ModalProps {\n  isOpen: boolean\n  onClose: () => void\n  children: React.ReactNode\n}\n\nexport function Modal({ isOpen, onClose, children }: ModalProps) {\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  useEffect(() => {\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') onClose()\n    }\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleEscape)\n      document.body.style.overflow = 'hidden'\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleEscape)\n      document.body.style.overflow = ''\n    }\n  }, [isOpen, onClose])\n\n  if (!mounted || !isOpen) return null\n\n  return createPortal(\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n        {children}\n      </div>\n    </div>,\n    document.body\n  )\n}\n```\n\n### Local Storage Hook\n\n```tsx\n'use client'\n\nimport { useState, useEffect } from 'react'\n\nexport function useLocalStorage<T>(key: string, initialValue: T) {\n  const [storedValue, setStoredValue] = useState<T>(initialValue)\n  const [isHydrated, setIsHydrated] = useState(false)\n\n  useEffect(() => {\n    try {\n      const item = window.localStorage.getItem(key)\n      if (item) {\n        setStoredValue(JSON.parse(item))\n      }\n    } catch (error) {\n      console.error(error)\n    }\n    setIsHydrated(true)\n  }, [key])\n\n  const setValue = (value: T | ((val: T) => T)) => {\n    try {\n      const valueToStore = value instanceof Function ? value(storedValue) : value\n      setStoredValue(valueToStore)\n      window.localStorage.setItem(key, JSON.stringify(valueToStore))\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  return [storedValue, setValue, isHydrated] as const\n}\n```\n\n## Data Fetching in Client Components\n\n### With TanStack Query\n\n```tsx\n'use client'\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\n\nexport function UserList() {\n  const { data: users, isLoading } = useQuery({\n    queryKey: ['users'],\n    queryFn: () => fetch('/api/users').then((res) => res.json()),\n  })\n\n  if (isLoading) return <div>Loading...</div>\n\n  return (\n    <ul>\n      {users.map((user) => (\n        <li key={user.id}>{user.name}</li>\n      ))}\n    </ul>\n  )\n}\n```\n\n### With SWR\n\n```tsx\n'use client'\n\nimport useSWR from 'swr'\n\nconst fetcher = (url: string) => fetch(url).then((res) => res.json())\n\nexport function UserProfile({ id }: { id: string }) {\n  const { data, error, isLoading } = useSWR(`/api/users/${id}`, fetcher)\n\n  if (isLoading) return <div>Loading...</div>\n  if (error) return <div>Error loading user</div>\n\n  return <div>{data.name}</div>\n}\n```\n\n## Server Actions in Client Components\n\n```tsx\n'use client'\n\nimport { useTransition } from 'react'\nimport { createPost } from '@/app/actions'\n\nexport function CreatePostForm() {\n  const [isPending, startTransition] = useTransition()\n\n  const handleSubmit = async (formData: FormData) => {\n    startTransition(async () => {\n      await createPost(formData)\n    })\n  }\n\n  return (\n    <form action={handleSubmit}>\n      <input name=\"title\" placeholder=\"Title\" />\n      <textarea name=\"content\" placeholder=\"Content\" />\n      <button type=\"submit\" disabled={isPending}>\n        {isPending ? 'Creating...' : 'Create Post'}\n      </button>\n    </form>\n  )\n}\n```\n\n## Best Practices\n\n### 1. Keep Client Components Small\n\n```tsx\n// Bad: Too much in client component\n'use client'\nfunction ProductPage() {\n  // ... lots of server-renderable content\n  const [cart, setCart] = useState([])\n  return (/* everything */)\n}\n\n// Good: Extract only interactive parts\nfunction ProductPage() {\n  return (\n    <div>\n      <ProductInfo />      {/* Server */}\n      <AddToCart />        {/* Client */}\n    </div>\n  )\n}\n```\n\n### 2. Avoid Passing Functions as Props\n\n```tsx\n// Bad: Serialization error\nasync function Page() {\n  const handleClick = () => console.log('click')\n  return <ClientButton onClick={handleClick} />  // Error!\n}\n\n// Good: Define actions in client component\n'use client'\nfunction ClientButton() {\n  const handleClick = () => console.log('click')\n  return <button onClick={handleClick}>Click</button>\n}\n```\n\n### 3. Use Props for Initial Data\n\n```tsx\n// Server Component\nasync function Page() {\n  const initialData = await fetchData()  // Server fetch\n  return <ClientComponent initialData={initialData} />\n}\n\n// Client Component\n'use client'\nfunction ClientComponent({ initialData }: { initialData: Data }) {\n  const [data, setData] = useState(initialData)\n  // Can now update data client-side\n}\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-nextjs/skills/nextjs-middleware/SKILL.md": "---\nname: nextjs-middleware\ndescription: Next.js middleware patterns for request processing\nuser-invocable: false\n---\n\n# Next.js Middleware Skill\n\nPatterns for using Next.js middleware for request interception.\n\n## Basic Middleware\n\n### Simple Middleware\n\n```typescript\n// middleware.ts (in project root)\nimport { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\n\nexport function middleware(request: NextRequest) {\n  // Clone the request headers\n  const requestHeaders = new Headers(request.headers)\n  requestHeaders.set('x-custom-header', 'custom-value')\n\n  // Return response with modified headers\n  return NextResponse.next({\n    request: {\n      headers: requestHeaders,\n    },\n  })\n}\n\n// Configure which paths middleware runs on\nexport const config = {\n  matcher: '/api/:path*',\n}\n```\n\n### Route Matching\n\n```typescript\nexport const config = {\n  matcher: [\n    // Match all paths except static files and images\n    '/((?!_next/static|_next/image|favicon.ico).*)',\n\n    // Match specific paths\n    '/api/:path*',\n    '/dashboard/:path*',\n\n    // Match with regex\n    '/blog/:slug*',\n  ],\n}\n```\n\n## Authentication\n\n### Session Check\n\n```typescript\nimport { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\nimport { getToken } from 'next-auth/jwt'\n\nexport async function middleware(request: NextRequest) {\n  const token = await getToken({ req: request })\n\n  if (!token) {\n    const signInUrl = new URL('/auth/signin', request.url)\n    signInUrl.searchParams.set('callbackUrl', request.url)\n    return NextResponse.redirect(signInUrl)\n  }\n\n  return NextResponse.next()\n}\n\nexport const config = {\n  matcher: ['/dashboard/:path*', '/account/:path*'],\n}\n```\n\n### JWT Verification\n\n```typescript\nimport { jwtVerify } from 'jose'\nimport { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\n\nconst SECRET = new TextEncoder().encode(process.env.JWT_SECRET)\n\nexport async function middleware(request: NextRequest) {\n  const token = request.cookies.get('token')?.value\n\n  if (!token) {\n    return NextResponse.redirect(new URL('/login', request.url))\n  }\n\n  try {\n    const { payload } = await jwtVerify(token, SECRET)\n\n    // Add user info to headers for downstream use\n    const requestHeaders = new Headers(request.headers)\n    requestHeaders.set('x-user-id', payload.sub as string)\n\n    return NextResponse.next({\n      request: { headers: requestHeaders },\n    })\n  } catch (error) {\n    return NextResponse.redirect(new URL('/login', request.url))\n  }\n}\n```\n\n### Role-Based Access\n\n```typescript\nimport { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\n\nexport async function middleware(request: NextRequest) {\n  const user = await getUser(request)\n\n  if (!user) {\n    return NextResponse.redirect(new URL('/login', request.url))\n  }\n\n  // Admin routes require admin role\n  if (request.nextUrl.pathname.startsWith('/admin')) {\n    if (user.role !== 'admin') {\n      return NextResponse.redirect(new URL('/unauthorized', request.url))\n    }\n  }\n\n  return NextResponse.next()\n}\n\nexport const config = {\n  matcher: ['/dashboard/:path*', '/admin/:path*'],\n}\n```\n\n## Redirects and Rewrites\n\n### Path Redirect\n\n```typescript\nexport function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl\n\n  // Redirect old paths to new\n  if (pathname.startsWith('/old-blog')) {\n    return NextResponse.redirect(\n      new URL(pathname.replace('/old-blog', '/blog'), request.url)\n    )\n  }\n\n  return NextResponse.next()\n}\n```\n\n### URL Rewrite\n\n```typescript\nexport function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl\n\n  // Rewrite to different internal path (URL stays the same)\n  if (pathname === '/') {\n    return NextResponse.rewrite(new URL('/home', request.url))\n  }\n\n  // A/B testing with rewrite\n  const bucket = request.cookies.get('ab-bucket')?.value || 'a'\n  if (pathname === '/pricing') {\n    return NextResponse.rewrite(\n      new URL(`/pricing-${bucket}`, request.url)\n    )\n  }\n\n  return NextResponse.next()\n}\n```\n\n### Geo-Based Routing\n\n```typescript\nexport function middleware(request: NextRequest) {\n  const country = request.geo?.country || 'US'\n\n  // Redirect to country-specific domain\n  if (country === 'UK' && !request.url.includes('.co.uk')) {\n    return NextResponse.redirect(\n      new URL(request.url.replace('.com', '.co.uk'))\n    )\n  }\n\n  // Or rewrite to localized content\n  if (request.nextUrl.pathname === '/') {\n    return NextResponse.rewrite(\n      new URL(`/${country.toLowerCase()}`, request.url)\n    )\n  }\n\n  return NextResponse.next()\n}\n```\n\n## Headers\n\n### Security Headers\n\n```typescript\nexport function middleware(request: NextRequest) {\n  const response = NextResponse.next()\n\n  // Security headers\n  response.headers.set(\n    'Strict-Transport-Security',\n    'max-age=31536000; includeSubDomains'\n  )\n  response.headers.set('X-Frame-Options', 'DENY')\n  response.headers.set('X-Content-Type-Options', 'nosniff')\n  response.headers.set('Referrer-Policy', 'strict-origin-when-cross-origin')\n  response.headers.set(\n    'Content-Security-Policy',\n    \"default-src 'self'; script-src 'self' 'unsafe-inline'\"\n  )\n\n  return response\n}\n```\n\n### CORS Headers\n\n```typescript\nexport function middleware(request: NextRequest) {\n  // Handle preflight requests\n  if (request.method === 'OPTIONS') {\n    return new NextResponse(null, {\n      status: 204,\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n        'Access-Control-Max-Age': '86400',\n      },\n    })\n  }\n\n  const response = NextResponse.next()\n  response.headers.set('Access-Control-Allow-Origin', '*')\n\n  return response\n}\n\nexport const config = {\n  matcher: '/api/:path*',\n}\n```\n\n## Rate Limiting\n\n### Simple Rate Limiting\n\n```typescript\nconst rateLimit = new Map<string, { count: number; resetTime: number }>()\n\nexport function middleware(request: NextRequest) {\n  const ip = request.ip || 'anonymous'\n  const now = Date.now()\n  const windowMs = 60 * 1000 // 1 minute\n  const maxRequests = 100\n\n  const currentLimit = rateLimit.get(ip)\n\n  if (currentLimit && now < currentLimit.resetTime) {\n    if (currentLimit.count >= maxRequests) {\n      return NextResponse.json(\n        { error: 'Too many requests' },\n        {\n          status: 429,\n          headers: {\n            'Retry-After': String(Math.ceil((currentLimit.resetTime - now) / 1000)),\n          },\n        }\n      )\n    }\n    currentLimit.count++\n  } else {\n    rateLimit.set(ip, { count: 1, resetTime: now + windowMs })\n  }\n\n  return NextResponse.next()\n}\n\nexport const config = {\n  matcher: '/api/:path*',\n}\n```\n\n## Internationalization\n\n### Locale Detection\n\n```typescript\nimport { match } from '@formatjs/intl-localematcher'\nimport Negotiator from 'negotiator'\n\nconst locales = ['en', 'es', 'fr', 'de']\nconst defaultLocale = 'en'\n\nfunction getLocale(request: NextRequest): string {\n  const headers = { 'accept-language': request.headers.get('accept-language') || '' }\n  const languages = new Negotiator({ headers }).languages()\n  return match(languages, locales, defaultLocale)\n}\n\nexport function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl\n\n  // Check if locale is in pathname\n  const pathnameHasLocale = locales.some(\n    (locale) => pathname.startsWith(`/${locale}/`) || pathname === `/${locale}`\n  )\n\n  if (pathnameHasLocale) return NextResponse.next()\n\n  // Redirect to locale-prefixed path\n  const locale = getLocale(request)\n  request.nextUrl.pathname = `/${locale}${pathname}`\n\n  return NextResponse.redirect(request.nextUrl)\n}\n\nexport const config = {\n  matcher: ['/((?!api|_next|.*\\\\..*).*)'],\n}\n```\n\n## A/B Testing\n\n```typescript\nexport function middleware(request: NextRequest) {\n  const response = NextResponse.next()\n\n  // Check for existing bucket assignment\n  let bucket = request.cookies.get('ab-bucket')?.value\n\n  if (!bucket) {\n    // Randomly assign to bucket\n    bucket = Math.random() < 0.5 ? 'a' : 'b'\n\n    // Set cookie for consistent experience\n    response.cookies.set('ab-bucket', bucket, {\n      maxAge: 60 * 60 * 24 * 30, // 30 days\n    })\n  }\n\n  // Add bucket to headers for use in components\n  response.headers.set('x-ab-bucket', bucket)\n\n  return response\n}\n```\n\n## Logging\n\n```typescript\nexport function middleware(request: NextRequest) {\n  const start = Date.now()\n\n  const response = NextResponse.next()\n\n  // Log request (in production, send to logging service)\n  const duration = Date.now() - start\n  console.log({\n    method: request.method,\n    path: request.nextUrl.pathname,\n    duration,\n    userAgent: request.headers.get('user-agent'),\n    ip: request.ip,\n    country: request.geo?.country,\n  })\n\n  return response\n}\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-nextjs/skills/nextjs-server-components/SKILL.md": "---\nname: nextjs-server-components\ndescription: React Server Components patterns in Next.js\nuser-invocable: false\n---\n\n# Next.js Server Components Skill\n\nPatterns for using React Server Components effectively.\n\n## Server Components (Default)\n\n### Basic Server Component\n\n```tsx\n// This is a Server Component by default\nasync function UserProfile({ userId }: { userId: string }) {\n  // Direct database access\n  const user = await db.user.findUnique({ where: { id: userId } })\n\n  // No client JavaScript shipped\n  return (\n    <div>\n      <h1>{user.name}</h1>\n      <p>{user.email}</p>\n    </div>\n  )\n}\n```\n\n### Data Fetching\n\n```tsx\n// Fetch data directly in component\nasync function ProductList() {\n  const products = await fetch('https://api.example.com/products', {\n    next: { revalidate: 3600 },  // Cache for 1 hour\n  }).then((res) => res.json())\n\n  return (\n    <div>\n      {products.map((product) => (\n        <ProductCard key={product.id} product={product} />\n      ))}\n    </div>\n  )\n}\n```\n\n### Database Access\n\n```tsx\nimport { prisma } from '@/lib/prisma'\n\nasync function RecentOrders() {\n  // Direct Prisma queries\n  const orders = await prisma.order.findMany({\n    where: { status: 'completed' },\n    orderBy: { createdAt: 'desc' },\n    take: 10,\n    include: { user: true, items: true },\n  })\n\n  return (\n    <table>\n      <tbody>\n        {orders.map((order) => (\n          <OrderRow key={order.id} order={order} />\n        ))}\n      </tbody>\n    </table>\n  )\n}\n```\n\n## What Can Server Components Do\n\n### Access Backend Resources\n\n```tsx\n// File system\nimport { readFile } from 'fs/promises'\n\nasync function MarkdownPage({ slug }: { slug: string }) {\n  const content = await readFile(`./content/${slug}.md`, 'utf-8')\n  return <Markdown content={content} />\n}\n\n// Environment variables (including server-only)\nasync function Config() {\n  const apiKey = process.env.SECRET_API_KEY  // Not exposed to client\n  const data = await fetchWithKey(apiKey)\n  return <div>{data}</div>\n}\n```\n\n### Heavy Dependencies\n\n```tsx\n// Large libraries only run on server\nimport { highlight } from 'shiki'\n\nasync function CodeBlock({ code, lang }: { code: string; lang: string }) {\n  const html = await highlight(code, { lang })\n  return <div dangerouslySetInnerHTML={{ __html: html }} />\n}\n```\n\n## What Server Components Cannot Do\n\n```tsx\n// These are NOT allowed in Server Components:\n\n//  useState, useReducer\nconst [count, setCount] = useState(0)\n\n//  useEffect, useLayoutEffect\nuseEffect(() => { ... })\n\n//  Browser APIs\nwindow.localStorage.getItem('key')\n\n//  Event handlers (onClick, onChange, etc.)\n<button onClick={() => {}}>Click</button>\n\n//  Custom hooks that use client features\nconst data = useQuery(...)\n```\n\n## Composing Server and Client\n\n### Pass Server Data to Client\n\n```tsx\n// Server Component\nasync function ProductPage({ id }: { id: string }) {\n  const product = await getProduct(id)  // Server-side fetch\n\n  return (\n    <div>\n      <h1>{product.name}</h1>\n      <ProductPrice price={product.price} />  {/* Server */}\n      <AddToCartButton productId={id} />       {/* Client */}\n    </div>\n  )\n}\n\n// Client Component\n'use client'\n\nfunction AddToCartButton({ productId }: { productId: string }) {\n  const [loading, setLoading] = useState(false)\n\n  return (\n    <button onClick={() => addToCart(productId)}>\n      Add to Cart\n    </button>\n  )\n}\n```\n\n### Children Pattern\n\n```tsx\n// Client Component wrapping Server content\n'use client'\n\nfunction Modal({ children }: { children: React.ReactNode }) {\n  const [isOpen, setIsOpen] = useState(false)\n\n  return (\n    <>\n      <button onClick={() => setIsOpen(true)}>Open</button>\n      {isOpen && (\n        <div className=\"modal\">\n          {children}  {/* Server-rendered content */}\n        </div>\n      )}\n    </>\n  )\n}\n\n// Page using the pattern\nasync function Page() {\n  const data = await fetchData()  // Server\n\n  return (\n    <Modal>\n      <ServerContent data={data} />  {/* Server */}\n    </Modal>\n  )\n}\n```\n\n## Streaming and Suspense\n\n### Streaming with Suspense\n\n```tsx\nimport { Suspense } from 'react'\n\nasync function SlowData() {\n  const data = await fetchSlowEndpoint()  // 3s delay\n  return <div>{data}</div>\n}\n\nasync function FastData() {\n  const data = await fetchFastEndpoint()  // 100ms delay\n  return <div>{data}</div>\n}\n\nexport default function Dashboard() {\n  return (\n    <div>\n      {/* Fast content appears immediately */}\n      <Suspense fallback={<Skeleton />}>\n        <FastData />\n      </Suspense>\n\n      {/* Slow content streams in when ready */}\n      <Suspense fallback={<Skeleton />}>\n        <SlowData />\n      </Suspense>\n    </div>\n  )\n}\n```\n\n### Parallel Data Fetching\n\n```tsx\nasync function Dashboard() {\n  // Parallel fetching - don't await sequentially\n  const userPromise = getUser()\n  const postsPromise = getPosts()\n  const statsPromise = getStats()\n\n  const [user, posts, stats] = await Promise.all([\n    userPromise,\n    postsPromise,\n    statsPromise,\n  ])\n\n  return (\n    <div>\n      <UserCard user={user} />\n      <PostList posts={posts} />\n      <StatsChart stats={stats} />\n    </div>\n  )\n}\n\n// Or use Suspense for independent streaming\nasync function Dashboard() {\n  return (\n    <div>\n      <Suspense fallback={<UserSkeleton />}>\n        <UserSection />  {/* Streams independently */}\n      </Suspense>\n      <Suspense fallback={<PostsSkeleton />}>\n        <PostsSection />  {/* Streams independently */}\n      </Suspense>\n    </div>\n  )\n}\n```\n\n## Caching Patterns\n\n### Request Deduplication\n\n```tsx\n// Same fetch in multiple components is automatically deduplicated\nasync function Layout({ children }) {\n  const user = await getUser()  // Cached\n  return <div>{children}</div>\n}\n\nasync function Sidebar() {\n  const user = await getUser()  // Same cache, no duplicate fetch\n  return <div>{user.name}</div>\n}\n```\n\n### cache() for Functions\n\n```tsx\nimport { cache } from 'react'\n\n// Cache function results for the request\nconst getUser = cache(async (id: string) => {\n  const user = await db.user.findUnique({ where: { id } })\n  return user\n})\n\n// Multiple calls return same result\nasync function Page() {\n  const user1 = await getUser('1')\n  const user2 = await getUser('1')  // Same cached result\n}\n```\n\n### unstable_cache for Cross-Request\n\n```tsx\nimport { unstable_cache } from 'next/cache'\n\nconst getCachedUser = unstable_cache(\n  async (id: string) => {\n    return await db.user.findUnique({ where: { id } })\n  },\n  ['user'],  // Cache key\n  {\n    revalidate: 3600,  // Revalidate every hour\n    tags: ['user'],    // For on-demand revalidation\n  }\n)\n```\n\n## Best Practices\n\n### 1. Default to Server Components\n\n```tsx\n// Start with Server Components\nasync function ProductPage({ id }) {\n  const product = await getProduct(id)\n  return <ProductDetails product={product} />\n}\n\n// Only add 'use client' when needed\n```\n\n### 2. Push Client Boundary Down\n\n```tsx\n// Bad: Large client component\n'use client'\nfunction ProductPage() {\n  const [quantity, setQuantity] = useState(1)\n  return (\n    <div>\n      <ProductInfo />  {/* Could be Server */}\n      <ProductImage /> {/* Could be Server */}\n      <QuantitySelector value={quantity} onChange={setQuantity} />\n    </div>\n  )\n}\n\n// Good: Small client component\nfunction ProductPage() {\n  return (\n    <div>\n      <ProductInfo />   {/* Server */}\n      <ProductImage />  {/* Server */}\n      <QuantitySelector />  {/* Client */}\n    </div>\n  )\n}\n```\n\n### 3. Pre-render What You Can\n\n```tsx\n// Generate static pages for known data\nexport async function generateStaticParams() {\n  const products = await getProducts()\n  return products.map((product) => ({\n    id: product.id,\n  }))\n}\n\nexport default async function ProductPage({ params }) {\n  const product = await getProduct(params.id)\n  return <Product product={product} />\n}\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-node/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-node\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Node.js patterns - streams, async patterns, error handling, performance\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"nodejs\", \"streams\", \"async\", \"backend\", \"patterns\"]\n}\n",
        "plugins/aai-stack-node/skills/node-async-patterns/SKILL.md": "---\nname: node-async-patterns\ndescription: Node.js async/await patterns\nuser-invocable: false\n---\n\n# Node.js Async Patterns Skill\n\nPatterns for asynchronous programming in Node.js.\n\n## Promise Patterns\n\n### Creating Promises\n\n```typescript\n// Basic promise\nfunction delay(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n\n// Promise with value\nfunction fetchData(): Promise<Data> {\n  return new Promise((resolve, reject) => {\n    // async operation\n    if (success) {\n      resolve(data)\n    } else {\n      reject(new Error('Failed'))\n    }\n  })\n}\n\n// Promisifying callbacks\nimport { promisify } from 'util'\nimport { readFile } from 'fs'\n\nconst readFileAsync = promisify(readFile)\nconst content = await readFileAsync('file.txt', 'utf8')\n```\n\n### Promise Combinators\n\n```typescript\n// All (parallel, all must succeed)\nconst [users, posts] = await Promise.all([\n  fetchUsers(),\n  fetchPosts(),\n])\n\n// All with error handling\nconst results = await Promise.allSettled([\n  fetchUsers(),\n  fetchPosts(),\n  fetchComments(),\n])\n\nresults.forEach((result, i) => {\n  if (result.status === 'fulfilled') {\n    console.log(`Result ${i}:`, result.value)\n  } else {\n    console.error(`Error ${i}:`, result.reason)\n  }\n})\n\n// Race (first to complete)\nconst result = await Promise.race([\n  fetchFromServer1(),\n  fetchFromServer2(),\n])\n\n// Any (first to succeed)\nconst result = await Promise.any([\n  fetchFromServer1(),\n  fetchFromServer2(),\n])\n```\n\n### Promise Utilities\n\n```typescript\n// Timeout wrapper\nfunction withTimeout<T>(promise: Promise<T>, ms: number): Promise<T> {\n  const timeout = new Promise<never>((_, reject) =>\n    setTimeout(() => reject(new Error('Timeout')), ms)\n  )\n  return Promise.race([promise, timeout])\n}\n\n// Retry wrapper\nasync function retry<T>(\n  fn: () => Promise<T>,\n  retries: number = 3,\n  delay: number = 1000\n): Promise<T> {\n  for (let i = 0; i < retries; i++) {\n    try {\n      return await fn()\n    } catch (err) {\n      if (i === retries - 1) throw err\n      await new Promise(r => setTimeout(r, delay * Math.pow(2, i)))\n    }\n  }\n  throw new Error('Should not reach')\n}\n\n// Usage\nconst data = await retry(() => fetchData(), 3, 1000)\n```\n\n## Async/Await Patterns\n\n### Sequential Execution\n\n```typescript\nasync function processItems(items: Item[]): Promise<Result[]> {\n  const results: Result[] = []\n  for (const item of items) {\n    const result = await processItem(item)\n    results.push(result)\n  }\n  return results\n}\n```\n\n### Parallel Execution\n\n```typescript\n// Parallel with Promise.all\nasync function processItems(items: Item[]): Promise<Result[]> {\n  return Promise.all(items.map(item => processItem(item)))\n}\n\n// Parallel with concurrency limit\nasync function processWithLimit<T, R>(\n  items: T[],\n  fn: (item: T) => Promise<R>,\n  concurrency: number\n): Promise<R[]> {\n  const results: R[] = []\n  const executing: Promise<void>[] = []\n\n  for (const item of items) {\n    const p = fn(item).then(result => {\n      results.push(result)\n    })\n\n    executing.push(p)\n\n    if (executing.length >= concurrency) {\n      await Promise.race(executing)\n      executing.splice(\n        executing.findIndex(e => e === p),\n        1\n      )\n    }\n  }\n\n  await Promise.all(executing)\n  return results\n}\n```\n\n### Error Handling\n\n```typescript\n// Try-catch with async\nasync function fetchWithFallback(): Promise<Data> {\n  try {\n    return await fetchFromPrimary()\n  } catch (err) {\n    console.error('Primary failed:', err)\n    return await fetchFromFallback()\n  }\n}\n\n// Error aggregation\nasync function fetchAll(): Promise<Result[]> {\n  const results = await Promise.allSettled([\n    fetch1(),\n    fetch2(),\n    fetch3(),\n  ])\n\n  const errors = results\n    .filter((r): r is PromiseRejectedResult => r.status === 'rejected')\n    .map(r => r.reason)\n\n  if (errors.length) {\n    console.error('Some requests failed:', errors)\n  }\n\n  return results\n    .filter((r): r is PromiseFulfilledResult<Result> => r.status === 'fulfilled')\n    .map(r => r.value)\n}\n```\n\n## Event Loop Patterns\n\n### Yielding to Event Loop\n\n```typescript\n// Allow other tasks to run\nfunction setImmediatePromise(): Promise<void> {\n  return new Promise(resolve => setImmediate(resolve))\n}\n\nasync function processLargeArray(items: Item[]): Promise<void> {\n  for (let i = 0; i < items.length; i++) {\n    processItem(items[i])\n\n    // Yield every 100 items\n    if (i % 100 === 0) {\n      await setImmediatePromise()\n    }\n  }\n}\n```\n\n### Batching\n\n```typescript\nclass Batcher<T, R> {\n  private queue: Array<{\n    item: T\n    resolve: (value: R) => void\n    reject: (error: Error) => void\n  }> = []\n  private timer: NodeJS.Timeout | null = null\n\n  constructor(\n    private batchFn: (items: T[]) => Promise<R[]>,\n    private maxSize: number = 10,\n    private delay: number = 10\n  ) {}\n\n  async add(item: T): Promise<R> {\n    return new Promise((resolve, reject) => {\n      this.queue.push({ item, resolve, reject })\n\n      if (this.queue.length >= this.maxSize) {\n        this.flush()\n      } else if (!this.timer) {\n        this.timer = setTimeout(() => this.flush(), this.delay)\n      }\n    })\n  }\n\n  private async flush(): Promise<void> {\n    if (this.timer) {\n      clearTimeout(this.timer)\n      this.timer = null\n    }\n\n    const batch = this.queue.splice(0)\n    if (batch.length === 0) return\n\n    try {\n      const results = await this.batchFn(batch.map(b => b.item))\n      batch.forEach((b, i) => b.resolve(results[i]))\n    } catch (err) {\n      batch.forEach(b => b.reject(err as Error))\n    }\n  }\n}\n```\n\n## Async Iterators\n\n### Creating Async Iterators\n\n```typescript\nasync function* generateNumbers(max: number): AsyncGenerator<number> {\n  for (let i = 0; i < max; i++) {\n    await delay(100)\n    yield i\n  }\n}\n\n// Usage\nfor await (const num of generateNumbers(5)) {\n  console.log(num)\n}\n```\n\n### Transforming Async Iterators\n\n```typescript\nasync function* map<T, R>(\n  iterable: AsyncIterable<T>,\n  fn: (item: T) => R | Promise<R>\n): AsyncGenerator<R> {\n  for await (const item of iterable) {\n    yield await fn(item)\n  }\n}\n\nasync function* filter<T>(\n  iterable: AsyncIterable<T>,\n  predicate: (item: T) => boolean | Promise<boolean>\n): AsyncGenerator<T> {\n  for await (const item of iterable) {\n    if (await predicate(item)) {\n      yield item\n    }\n  }\n}\n\n// Usage\nconst doubled = map(generateNumbers(5), n => n * 2)\nconst evens = filter(doubled, n => n % 2 === 0)\n\nfor await (const num of evens) {\n  console.log(num)\n}\n```\n\n## Queue Patterns\n\n### Simple Queue\n\n```typescript\nclass AsyncQueue<T> {\n  private queue: T[] = []\n  private waiting: ((item: T) => void)[] = []\n\n  push(item: T): void {\n    const waiter = this.waiting.shift()\n    if (waiter) {\n      waiter(item)\n    } else {\n      this.queue.push(item)\n    }\n  }\n\n  async pop(): Promise<T> {\n    const item = this.queue.shift()\n    if (item !== undefined) {\n      return item\n    }\n    return new Promise(resolve => {\n      this.waiting.push(resolve)\n    })\n  }\n}\n```\n\n### Worker Pool\n\n```typescript\nclass WorkerPool<T, R> {\n  private queue: Array<() => Promise<void>> = []\n  private running = 0\n\n  constructor(private concurrency: number) {}\n\n  async execute(fn: () => Promise<R>): Promise<R> {\n    return new Promise((resolve, reject) => {\n      this.queue.push(async () => {\n        try {\n          resolve(await fn())\n        } catch (err) {\n          reject(err)\n        }\n      })\n      this.runNext()\n    })\n  }\n\n  private async runNext(): Promise<void> {\n    if (this.running >= this.concurrency) return\n    const task = this.queue.shift()\n    if (!task) return\n\n    this.running++\n    await task()\n    this.running--\n    this.runNext()\n  }\n}\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-node/skills/node-error-handling/SKILL.md": "---\nname: node-error-handling\ndescription: Node.js error handling patterns\nuser-invocable: false\n---\n\n# Node.js Error Handling Skill\n\nPatterns for error handling in Node.js applications.\n\n## Error Classes\n\n### Custom Error Classes\n\n```typescript\n// Base application error\nclass AppError extends Error {\n  constructor(\n    message: string,\n    public code: string,\n    public statusCode: number = 500,\n    public isOperational: boolean = true\n  ) {\n    super(message)\n    this.name = this.constructor.name\n    Error.captureStackTrace(this, this.constructor)\n  }\n}\n\n// Specific error types\nclass ValidationError extends AppError {\n  constructor(message: string, public fields: Record<string, string>) {\n    super(message, 'VALIDATION_ERROR', 400)\n  }\n}\n\nclass NotFoundError extends AppError {\n  constructor(resource: string) {\n    super(`${resource} not found`, 'NOT_FOUND', 404)\n  }\n}\n\nclass UnauthorizedError extends AppError {\n  constructor(message = 'Unauthorized') {\n    super(message, 'UNAUTHORIZED', 401)\n  }\n}\n\nclass ForbiddenError extends AppError {\n  constructor(message = 'Forbidden') {\n    super(message, 'FORBIDDEN', 403)\n  }\n}\n\nclass ConflictError extends AppError {\n  constructor(message: string) {\n    super(message, 'CONFLICT', 409)\n  }\n}\n```\n\n### Error with Context\n\n```typescript\nclass ContextualError extends Error {\n  public context: Record<string, any>\n\n  constructor(\n    message: string,\n    context: Record<string, any> = {},\n    public cause?: Error\n  ) {\n    super(message)\n    this.name = 'ContextualError'\n    this.context = context\n  }\n\n  static wrap(error: Error, context: Record<string, any>): ContextualError {\n    return new ContextualError(error.message, context, error)\n  }\n}\n\n// Usage\nthrow ContextualError.wrap(dbError, {\n  operation: 'createUser',\n  userId: '123',\n})\n```\n\n## Async Error Handling\n\n### Express Error Middleware\n\n```typescript\n// Async handler wrapper\nconst asyncHandler = (fn: RequestHandler): RequestHandler => {\n  return (req, res, next) => {\n    Promise.resolve(fn(req, res, next)).catch(next)\n  }\n}\n\n// Usage\nrouter.get('/users/:id', asyncHandler(async (req, res) => {\n  const user = await userService.findById(req.params.id)\n  if (!user) throw new NotFoundError('User')\n  res.json(user)\n}))\n\n// Error middleware\nconst errorHandler: ErrorRequestHandler = (err, req, res, next) => {\n  // Log error\n  logger.error({\n    message: err.message,\n    code: err.code,\n    stack: err.stack,\n    path: req.path,\n    method: req.method,\n  })\n\n  // Handle operational errors\n  if (err instanceof AppError) {\n    return res.status(err.statusCode).json({\n      error: {\n        code: err.code,\n        message: err.message,\n        ...(err instanceof ValidationError && { fields: err.fields }),\n      },\n    })\n  }\n\n  // Unknown errors\n  res.status(500).json({\n    error: {\n      code: 'INTERNAL_ERROR',\n      message: 'An unexpected error occurred',\n    },\n  })\n}\n\napp.use(errorHandler)\n```\n\n### Promise Rejection Handling\n\n```typescript\n// Unhandled rejection handler\nprocess.on('unhandledRejection', (reason: Error, promise: Promise<any>) => {\n  console.error('Unhandled Rejection:', reason)\n  // Optionally exit\n  process.exit(1)\n})\n\n// Uncaught exception handler\nprocess.on('uncaughtException', (error: Error) => {\n  console.error('Uncaught Exception:', error)\n  // Must exit - process is in undefined state\n  process.exit(1)\n})\n\n// Graceful shutdown\nprocess.on('SIGTERM', async () => {\n  console.log('SIGTERM received, shutting down gracefully')\n  await server.close()\n  await database.disconnect()\n  process.exit(0)\n})\n```\n\n## Error Boundaries\n\n### Try-Catch Patterns\n\n```typescript\n// With cleanup\nasync function withResource<T>(fn: (resource: Resource) => Promise<T>): Promise<T> {\n  const resource = await acquireResource()\n  try {\n    return await fn(resource)\n  } finally {\n    await resource.release()\n  }\n}\n\n// Multiple operations\nasync function transactionalOperation() {\n  const tx = await db.beginTransaction()\n  try {\n    await tx.query('INSERT INTO users ...')\n    await tx.query('INSERT INTO profiles ...')\n    await tx.commit()\n  } catch (error) {\n    await tx.rollback()\n    throw error\n  }\n}\n\n// Partial success handling\nasync function processItems(items: Item[]): Promise<{\n  successful: Result[]\n  failed: Array<{ item: Item; error: Error }>\n}> {\n  const successful: Result[] = []\n  const failed: Array<{ item: Item; error: Error }> = []\n\n  for (const item of items) {\n    try {\n      const result = await processItem(item)\n      successful.push(result)\n    } catch (error) {\n      failed.push({ item, error: error as Error })\n    }\n  }\n\n  return { successful, failed }\n}\n```\n\n## Result Type Pattern\n\n### Result Type\n\n```typescript\ntype Result<T, E = Error> =\n  | { success: true; data: T }\n  | { success: false; error: E }\n\nfunction ok<T>(data: T): Result<T, never> {\n  return { success: true, data }\n}\n\nfunction err<E>(error: E): Result<never, E> {\n  return { success: false, error }\n}\n\n// Usage\nasync function parseJSON<T>(text: string): Result<T, SyntaxError> {\n  try {\n    return ok(JSON.parse(text))\n  } catch (error) {\n    return err(error as SyntaxError)\n  }\n}\n\nconst result = await parseJSON<User>(text)\nif (result.success) {\n  console.log('User:', result.data)\n} else {\n  console.error('Parse error:', result.error)\n}\n```\n\n### Either Type\n\n```typescript\nclass Either<L, R> {\n  private constructor(\n    private readonly left: L | null,\n    private readonly right: R | null\n  ) {}\n\n  static left<L, R>(value: L): Either<L, R> {\n    return new Either(value, null)\n  }\n\n  static right<L, R>(value: R): Either<L, R> {\n    return new Either(null, value)\n  }\n\n  isLeft(): boolean {\n    return this.left !== null\n  }\n\n  isRight(): boolean {\n    return this.right !== null\n  }\n\n  map<T>(fn: (value: R) => T): Either<L, T> {\n    if (this.isRight()) {\n      return Either.right(fn(this.right!))\n    }\n    return Either.left(this.left!)\n  }\n\n  getOrElse(defaultValue: R): R {\n    return this.isRight() ? this.right! : defaultValue\n  }\n}\n```\n\n## Logging Errors\n\n### Structured Error Logging\n\n```typescript\nimport pino from 'pino'\n\nconst logger = pino({\n  level: process.env.LOG_LEVEL || 'info',\n  formatters: {\n    level: (label) => ({ level: label }),\n  },\n})\n\nfunction logError(error: Error, context: Record<string, any> = {}) {\n  logger.error({\n    err: {\n      name: error.name,\n      message: error.message,\n      stack: error.stack,\n      ...(error instanceof AppError && {\n        code: error.code,\n        isOperational: error.isOperational,\n      }),\n    },\n    ...context,\n  })\n}\n\n// Usage\ntry {\n  await riskyOperation()\n} catch (error) {\n  logError(error as Error, {\n    operation: 'riskyOperation',\n    userId: user.id,\n  })\n  throw error\n}\n```\n\n## Validation\n\n### Input Validation\n\n```typescript\nimport { z } from 'zod'\n\nconst userSchema = z.object({\n  email: z.string().email(),\n  name: z.string().min(1).max(100),\n  age: z.number().int().positive().optional(),\n})\n\nfunction validateUser(data: unknown): User {\n  const result = userSchema.safeParse(data)\n\n  if (!result.success) {\n    const fields: Record<string, string> = {}\n    result.error.errors.forEach((err) => {\n      fields[err.path.join('.')] = err.message\n    })\n    throw new ValidationError('Invalid user data', fields)\n  }\n\n  return result.data\n}\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-node/skills/node-performance/SKILL.md": "---\nname: node-performance\ndescription: Node.js performance optimization patterns\nuser-invocable: false\n---\n\n# Node.js Performance Skill\n\nPatterns for optimizing Node.js application performance.\n\n## Memory Management\n\n### Heap Snapshots\n\n```typescript\nimport v8 from 'v8'\nimport fs from 'fs'\n\n// Take heap snapshot\nfunction takeHeapSnapshot(filename: string): void {\n  const snapshotStream = v8.writeHeapSnapshot(filename)\n  console.log(`Heap snapshot written to ${snapshotStream}`)\n}\n\n// Expose via endpoint\napp.get('/debug/heap', (req, res) => {\n  const filename = `/tmp/heap-${Date.now()}.heapsnapshot`\n  takeHeapSnapshot(filename)\n  res.download(filename)\n})\n\n// Memory usage\nfunction getMemoryUsage(): object {\n  const usage = process.memoryUsage()\n  return {\n    heapUsed: Math.round(usage.heapUsed / 1024 / 1024) + 'MB',\n    heapTotal: Math.round(usage.heapTotal / 1024 / 1024) + 'MB',\n    external: Math.round(usage.external / 1024 / 1024) + 'MB',\n    rss: Math.round(usage.rss / 1024 / 1024) + 'MB',\n  }\n}\n```\n\n### Avoiding Memory Leaks\n\n```typescript\n// BAD: Growing array\nconst cache: any[] = []\nfunction addToCache(item: any) {\n  cache.push(item)  // Never cleared\n}\n\n// GOOD: LRU cache with limit\nimport { LRUCache } from 'lru-cache'\n\nconst cache = new LRUCache<string, any>({\n  max: 500,              // Max items\n  maxSize: 50 * 1024 * 1024,  // 50MB\n  sizeCalculation: (value) => JSON.stringify(value).length,\n  ttl: 1000 * 60 * 5,    // 5 minutes\n})\n\n// BAD: Event listener leak\nclass Service {\n  constructor(emitter: EventEmitter) {\n    emitter.on('data', this.handleData.bind(this))\n    // Never removed\n  }\n}\n\n// GOOD: Cleanup listeners\nclass Service {\n  private handler: (data: any) => void\n\n  constructor(private emitter: EventEmitter) {\n    this.handler = this.handleData.bind(this)\n    emitter.on('data', this.handler)\n  }\n\n  destroy() {\n    this.emitter.off('data', this.handler)\n  }\n}\n```\n\n## CPU Optimization\n\n### Worker Threads\n\n```typescript\nimport { Worker, isMainThread, parentPort, workerData } from 'worker_threads'\nimport os from 'os'\n\nif (isMainThread) {\n  // Main thread\n  const numCPUs = os.cpus().length\n\n  async function runTask<T>(data: any): Promise<T> {\n    return new Promise((resolve, reject) => {\n      const worker = new Worker(__filename, {\n        workerData: data,\n      })\n\n      worker.on('message', resolve)\n      worker.on('error', reject)\n      worker.on('exit', (code) => {\n        if (code !== 0) {\n          reject(new Error(`Worker exited with code ${code}`))\n        }\n      })\n    })\n  }\n\n  // Run CPU-intensive tasks in parallel\n  const results = await Promise.all(\n    items.map(item => runTask(item))\n  )\n} else {\n  // Worker thread\n  const result = heavyComputation(workerData)\n  parentPort?.postMessage(result)\n}\n```\n\n### Worker Pool\n\n```typescript\nimport { Worker } from 'worker_threads'\nimport os from 'os'\n\nclass WorkerPool {\n  private workers: Worker[] = []\n  private freeWorkers: Worker[] = []\n  private queue: Array<{\n    data: any\n    resolve: (value: any) => void\n    reject: (error: Error) => void\n  }> = []\n\n  constructor(private workerScript: string, size = os.cpus().length) {\n    for (let i = 0; i < size; i++) {\n      const worker = new Worker(workerScript)\n      this.workers.push(worker)\n      this.freeWorkers.push(worker)\n    }\n  }\n\n  exec<T>(data: any): Promise<T> {\n    return new Promise((resolve, reject) => {\n      const worker = this.freeWorkers.pop()\n\n      if (worker) {\n        this.runWorker(worker, data, resolve, reject)\n      } else {\n        this.queue.push({ data, resolve, reject })\n      }\n    })\n  }\n\n  private runWorker(\n    worker: Worker,\n    data: any,\n    resolve: (value: any) => void,\n    reject: (error: Error) => void\n  ) {\n    const onMessage = (result: any) => {\n      cleanup()\n      resolve(result)\n      this.releaseWorker(worker)\n    }\n\n    const onError = (error: Error) => {\n      cleanup()\n      reject(error)\n      this.releaseWorker(worker)\n    }\n\n    const cleanup = () => {\n      worker.off('message', onMessage)\n      worker.off('error', onError)\n    }\n\n    worker.on('message', onMessage)\n    worker.on('error', onError)\n    worker.postMessage(data)\n  }\n\n  private releaseWorker(worker: Worker) {\n    const next = this.queue.shift()\n    if (next) {\n      this.runWorker(worker, next.data, next.resolve, next.reject)\n    } else {\n      this.freeWorkers.push(worker)\n    }\n  }\n\n  destroy() {\n    for (const worker of this.workers) {\n      worker.terminate()\n    }\n  }\n}\n```\n\n## Caching\n\n### In-Memory Caching\n\n```typescript\nimport { LRUCache } from 'lru-cache'\n\nconst cache = new LRUCache<string, any>({\n  max: 1000,\n  ttl: 1000 * 60 * 10,  // 10 minutes\n})\n\nasync function getCachedData<T>(\n  key: string,\n  fetcher: () => Promise<T>\n): Promise<T> {\n  const cached = cache.get(key)\n  if (cached !== undefined) {\n    return cached as T\n  }\n\n  const data = await fetcher()\n  cache.set(key, data)\n  return data\n}\n\n// Memoization\nfunction memoize<T extends (...args: any[]) => any>(\n  fn: T,\n  keyFn: (...args: Parameters<T>) => string = (...args) => JSON.stringify(args)\n): T {\n  const cache = new Map<string, ReturnType<T>>()\n\n  return ((...args: Parameters<T>): ReturnType<T> => {\n    const key = keyFn(...args)\n    if (cache.has(key)) {\n      return cache.get(key)!\n    }\n    const result = fn(...args)\n    cache.set(key, result)\n    return result\n  }) as T\n}\n```\n\n### Redis Caching\n\n```typescript\nimport Redis from 'ioredis'\n\nconst redis = new Redis()\n\nasync function cacheWithRedis<T>(\n  key: string,\n  fetcher: () => Promise<T>,\n  ttlSeconds: number = 300\n): Promise<T> {\n  const cached = await redis.get(key)\n  if (cached) {\n    return JSON.parse(cached)\n  }\n\n  const data = await fetcher()\n  await redis.setex(key, ttlSeconds, JSON.stringify(data))\n  return data\n}\n\n// Cache-aside pattern\nclass CacheAside {\n  constructor(private redis: Redis) {}\n\n  async get<T>(key: string): Promise<T | null> {\n    const data = await this.redis.get(key)\n    return data ? JSON.parse(data) : null\n  }\n\n  async set<T>(key: string, value: T, ttl: number): Promise<void> {\n    await this.redis.setex(key, ttl, JSON.stringify(value))\n  }\n\n  async invalidate(key: string): Promise<void> {\n    await this.redis.del(key)\n  }\n\n  async getOrFetch<T>(\n    key: string,\n    fetcher: () => Promise<T>,\n    ttl: number\n  ): Promise<T> {\n    const cached = await this.get<T>(key)\n    if (cached) return cached\n\n    const data = await fetcher()\n    await this.set(key, data, ttl)\n    return data\n  }\n}\n```\n\n## Connection Pooling\n\n### Database Pool\n\n```typescript\nimport { Pool } from 'pg'\n\nconst pool = new Pool({\n  host: 'localhost',\n  database: 'mydb',\n  max: 20,              // Max connections\n  idleTimeoutMillis: 30000,\n  connectionTimeoutMillis: 2000,\n})\n\n// Measure pool usage\nsetInterval(() => {\n  console.log({\n    total: pool.totalCount,\n    idle: pool.idleCount,\n    waiting: pool.waitingCount,\n  })\n}, 10000)\n\n// Use pool\nconst result = await pool.query('SELECT * FROM users')\n```\n\n### HTTP Agent Pool\n\n```typescript\nimport http from 'http'\nimport https from 'https'\n\nconst httpAgent = new http.Agent({\n  keepAlive: true,\n  maxSockets: 100,\n  maxFreeSockets: 10,\n  timeout: 60000,\n})\n\nconst httpsAgent = new https.Agent({\n  keepAlive: true,\n  maxSockets: 100,\n})\n\n// Use with fetch\nconst response = await fetch(url, {\n  agent: url.startsWith('https') ? httpsAgent : httpAgent,\n})\n```\n\n## Profiling\n\n### CPU Profiling\n\n```typescript\nimport { Session } from 'inspector'\nimport fs from 'fs'\n\nasync function profileCPU(\n  fn: () => Promise<void>,\n  outputFile: string\n): Promise<void> {\n  const session = new Session()\n  session.connect()\n\n  await new Promise<void>((resolve) => {\n    session.post('Profiler.enable', () => {\n      session.post('Profiler.start', () => resolve())\n    })\n  })\n\n  await fn()\n\n  const profile = await new Promise<object>((resolve) => {\n    session.post('Profiler.stop', (err, { profile }) => {\n      resolve(profile)\n    })\n  })\n\n  fs.writeFileSync(outputFile, JSON.stringify(profile))\n  session.disconnect()\n}\n```\n\n### Benchmarking\n\n```typescript\nfunction benchmark(name: string, fn: () => void, iterations = 1000): void {\n  // Warmup\n  for (let i = 0; i < 100; i++) fn()\n\n  const start = process.hrtime.bigint()\n  for (let i = 0; i < iterations; i++) {\n    fn()\n  }\n  const end = process.hrtime.bigint()\n\n  const totalMs = Number(end - start) / 1_000_000\n  const avgMs = totalMs / iterations\n  const opsPerSec = Math.round(1000 / avgMs)\n\n  console.log(`${name}: ${avgMs.toFixed(3)}ms/op (${opsPerSec} ops/sec)`)\n}\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-node/skills/node-streams/SKILL.md": "---\nname: node-streams\ndescription: Node.js stream patterns\nuser-invocable: false\n---\n\n# Node.js Streams Skill\n\nPatterns for working with Node.js streams.\n\n## Stream Types\n\n### Readable Streams\n\n```typescript\nimport { Readable } from 'stream'\nimport { createReadStream } from 'fs'\n\n// File read stream\nconst fileStream = createReadStream('large-file.txt', {\n  encoding: 'utf8',\n  highWaterMark: 64 * 1024,  // 64KB chunks\n})\n\n// Event-based reading\nfileStream.on('data', (chunk) => {\n  console.log('Received chunk:', chunk.length)\n})\n\nfileStream.on('end', () => {\n  console.log('Stream ended')\n})\n\nfileStream.on('error', (err) => {\n  console.error('Error:', err)\n})\n\n// Async iteration (preferred)\nasync function readFile() {\n  for await (const chunk of fileStream) {\n    console.log('Chunk:', chunk)\n  }\n}\n```\n\n### Writable Streams\n\n```typescript\nimport { Writable } from 'stream'\nimport { createWriteStream } from 'fs'\n\n// File write stream\nconst writeStream = createWriteStream('output.txt', {\n  encoding: 'utf8',\n  highWaterMark: 64 * 1024,\n})\n\nwriteStream.write('Hello ')\nwriteStream.write('World\\n')\nwriteStream.end()\n\n// Handle backpressure\nconst ok = writeStream.write(data)\nif (!ok) {\n  // Wait for drain before writing more\n  await new Promise(resolve => writeStream.once('drain', resolve))\n}\n\n// With pipeline\nimport { pipeline } from 'stream/promises'\nawait pipeline(\n  readStream,\n  writeStream\n)\n```\n\n### Transform Streams\n\n```typescript\nimport { Transform } from 'stream'\n\n// Custom transform\nconst upperCase = new Transform({\n  transform(chunk, encoding, callback) {\n    this.push(chunk.toString().toUpperCase())\n    callback()\n  },\n})\n\n// Usage\ncreateReadStream('input.txt')\n  .pipe(upperCase)\n  .pipe(createWriteStream('output.txt'))\n```\n\n### Duplex Streams\n\n```typescript\nimport { Duplex } from 'stream'\n\nconst duplex = new Duplex({\n  read(size) {\n    // Generate data to read\n    this.push('data')\n    this.push(null)  // End\n  },\n  write(chunk, encoding, callback) {\n    // Handle written data\n    console.log('Received:', chunk.toString())\n    callback()\n  },\n})\n```\n\n## Custom Streams\n\n### Custom Readable\n\n```typescript\nimport { Readable } from 'stream'\n\nclass Counter extends Readable {\n  private current = 0\n  private max: number\n\n  constructor(max: number) {\n    super({ objectMode: true })\n    this.max = max\n  }\n\n  _read() {\n    if (this.current < this.max) {\n      this.push(this.current++)\n    } else {\n      this.push(null)\n    }\n  }\n}\n\n// Usage\nconst counter = new Counter(5)\nfor await (const num of counter) {\n  console.log(num)  // 0, 1, 2, 3, 4\n}\n```\n\n### Custom Writable\n\n```typescript\nimport { Writable } from 'stream'\n\nclass LogWriter extends Writable {\n  private buffer: string[] = []\n\n  _write(chunk: Buffer, encoding: string, callback: () => void) {\n    this.buffer.push(chunk.toString())\n    if (this.buffer.length >= 10) {\n      this.flush()\n    }\n    callback()\n  }\n\n  _final(callback: () => void) {\n    this.flush()\n    callback()\n  }\n\n  private flush() {\n    console.log('Flushing:', this.buffer.join('\\n'))\n    this.buffer = []\n  }\n}\n```\n\n### Custom Transform\n\n```typescript\nimport { Transform, TransformCallback } from 'stream'\n\nclass JSONParser extends Transform {\n  constructor() {\n    super({ objectMode: true })\n  }\n\n  _transform(chunk: Buffer, encoding: string, callback: TransformCallback) {\n    try {\n      const data = JSON.parse(chunk.toString())\n      this.push(data)\n      callback()\n    } catch (err) {\n      callback(err as Error)\n    }\n  }\n}\n\n// Usage with async\nclass AsyncTransform extends Transform {\n  constructor() {\n    super({ objectMode: true })\n  }\n\n  async _transform(chunk: any, encoding: string, callback: TransformCallback) {\n    try {\n      const result = await processAsync(chunk)\n      this.push(result)\n      callback()\n    } catch (err) {\n      callback(err as Error)\n    }\n  }\n}\n```\n\n## Pipeline\n\n### Using Pipeline\n\n```typescript\nimport { pipeline } from 'stream/promises'\nimport { createReadStream, createWriteStream } from 'fs'\nimport { createGzip } from 'zlib'\n\n// Pipeline with error handling\nawait pipeline(\n  createReadStream('input.txt'),\n  createGzip(),\n  createWriteStream('output.txt.gz')\n)\n```\n\n### Pipeline with Transforms\n\n```typescript\nimport { pipeline } from 'stream/promises'\nimport { Transform } from 'stream'\n\nconst filter = new Transform({\n  objectMode: true,\n  transform(data, encoding, callback) {\n    if (data.active) {\n      this.push(data)\n    }\n    callback()\n  },\n})\n\nconst format = new Transform({\n  objectMode: true,\n  transform(data, encoding, callback) {\n    this.push(JSON.stringify(data) + '\\n')\n    callback()\n  },\n})\n\nawait pipeline(\n  dataSource,\n  filter,\n  format,\n  createWriteStream('output.jsonl')\n)\n```\n\n## Backpressure\n\n### Handling Backpressure\n\n```typescript\nimport { Readable, Writable } from 'stream'\n\nasync function writeWithBackpressure(readable: Readable, writable: Writable) {\n  for await (const chunk of readable) {\n    const ok = writable.write(chunk)\n    if (!ok) {\n      await new Promise(resolve => writable.once('drain', resolve))\n    }\n  }\n  writable.end()\n}\n\n// Or with highWaterMark\nconst slowWriter = new Writable({\n  highWaterMark: 1024,  // Small buffer = more frequent backpressure\n  write(chunk, encoding, callback) {\n    // Slow operation\n    setTimeout(callback, 100)\n  },\n})\n```\n\n## Object Mode\n\n### Object Streams\n\n```typescript\nimport { Transform, Readable } from 'stream'\n\n// Readable in object mode\nconst objectReadable = new Readable({\n  objectMode: true,\n  read() {\n    this.push({ id: 1, name: 'Item 1' })\n    this.push({ id: 2, name: 'Item 2' })\n    this.push(null)\n  },\n})\n\n// Transform in object mode\nconst mapper = new Transform({\n  objectMode: true,\n  transform(obj, encoding, callback) {\n    this.push({\n      ...obj,\n      processed: true,\n    })\n    callback()\n  },\n})\n\n// Collect objects\nconst objects: any[] = []\nfor await (const obj of objectReadable.pipe(mapper)) {\n  objects.push(obj)\n}\n```\n\n## Utilities\n\n### stream/consumers\n\n```typescript\nimport { text, json, buffer, arrayBuffer } from 'stream/consumers'\n\n// Read entire stream as text\nconst content = await text(createReadStream('file.txt'))\n\n// Read as JSON\nconst data = await json(createReadStream('data.json'))\n\n// Read as Buffer\nconst buf = await buffer(createReadStream('file.bin'))\n```\n\n### stream/promises\n\n```typescript\nimport { finished, pipeline } from 'stream/promises'\n\n// Wait for stream to finish\nconst stream = createWriteStream('output.txt')\nstream.write('data')\nstream.end()\nawait finished(stream)\n\n// Pipeline with cleanup\ntry {\n  await pipeline(source, destination)\n} catch (err) {\n  console.error('Pipeline failed:', err)\n}\n```\n\n### PassThrough\n\n```typescript\nimport { PassThrough } from 'stream'\n\n// Fork a stream\nconst source = createReadStream('data.txt')\nconst fork1 = new PassThrough()\nconst fork2 = new PassThrough()\n\nsource.pipe(fork1)\nsource.pipe(fork2)\n\n// Process independently\nfork1.pipe(createWriteStream('copy1.txt'))\nfork2.pipe(createGzip()).pipe(createWriteStream('copy2.txt.gz'))\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-playwright/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-playwright\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Playwright testing patterns - selectors, assertions, fixtures, visual testing\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"playwright\", \"testing\", \"e2e\", \"automation\", \"selectors\"]\n}\n",
        "plugins/aai-stack-playwright/skills/playwright-assertions/SKILL.md": "---\nname: playwright-assertions\ndescription: Playwright assertion patterns and matchers\nuser-invocable: false\n---\n\n# Playwright Assertions Skill\n\nPatterns for assertions in Playwright tests.\n\n## Auto-Retrying Assertions\n\n### Element Visibility\n\n```typescript\n// Visible (default)\nawait expect(page.getByRole('button')).toBeVisible()\nawait expect(page.getByRole('button')).not.toBeVisible()\n\n// Hidden\nawait expect(page.getByRole('dialog')).toBeHidden()\n\n// Attached to DOM (even if not visible)\nawait expect(page.locator('#loading')).toBeAttached()\nawait expect(page.locator('#loading')).not.toBeAttached()\n```\n\n### Element State\n\n```typescript\n// Enabled/Disabled\nawait expect(page.getByRole('button')).toBeEnabled()\nawait expect(page.getByRole('button')).toBeDisabled()\n\n// Editable\nawait expect(page.getByRole('textbox')).toBeEditable()\nawait expect(page.getByRole('textbox')).not.toBeEditable()\n\n// Focused\nawait expect(page.getByRole('textbox')).toBeFocused()\n\n// Checked (checkboxes/radio)\nawait expect(page.getByRole('checkbox')).toBeChecked()\nawait expect(page.getByRole('checkbox')).not.toBeChecked()\n```\n\n### Element Content\n\n```typescript\n// Text content\nawait expect(page.locator('.message')).toHaveText('Hello World')\nawait expect(page.locator('.message')).toHaveText(/hello/i)\nawait expect(page.locator('.message')).toContainText('Hello')\n\n// Multiple elements\nawait expect(page.locator('.item')).toHaveText([\n  'First',\n  'Second',\n  'Third',\n])\n\n// Input value\nawait expect(page.getByRole('textbox')).toHaveValue('test@example.com')\nawait expect(page.getByRole('textbox')).toHaveValue(/test/)\nawait expect(page.getByRole('textbox')).not.toBeEmpty()\n\n// Select value\nawait expect(page.getByRole('combobox')).toHaveValue('option1')\nawait expect(page.getByRole('combobox')).toHaveValues(['opt1', 'opt2'])\n```\n\n### Element Attributes\n\n```typescript\n// Attribute presence\nawait expect(page.locator('input')).toHaveAttribute('required')\n\n// Attribute value\nawait expect(page.locator('a')).toHaveAttribute('href', '/home')\nawait expect(page.locator('a')).toHaveAttribute('href', /\\/home/)\n\n// ID\nawait expect(page.locator('button')).toHaveId('submit-btn')\n\n// Class\nawait expect(page.locator('div')).toHaveClass('card active')\nawait expect(page.locator('div')).toHaveClass(/active/)\n\n// CSS property\nawait expect(page.locator('.box')).toHaveCSS('background-color', 'rgb(255, 0, 0)')\nawait expect(page.locator('.box')).toHaveCSS('display', 'flex')\n```\n\n### Element Count\n\n```typescript\n// Exact count\nawait expect(page.locator('.item')).toHaveCount(5)\nawait expect(page.locator('.item')).toHaveCount(0)\n\n// Empty\nawait expect(page.locator('.list .item')).not.toHaveCount(0)\n```\n\n## Page Assertions\n\n### URL\n\n```typescript\n// Exact URL\nawait expect(page).toHaveURL('https://example.com/dashboard')\n\n// URL pattern\nawait expect(page).toHaveURL(/dashboard/)\nawait expect(page).toHaveURL(/\\/users\\/\\d+/)\n\n// URL with query params\nawait expect(page).toHaveURL('https://example.com?page=2')\n```\n\n### Title\n\n```typescript\n// Exact title\nawait expect(page).toHaveTitle('Dashboard - MyApp')\n\n// Pattern\nawait expect(page).toHaveTitle(/Dashboard/)\n```\n\n## Response Assertions\n\n```typescript\n// Wait for response\nconst response = await page.waitForResponse('**/api/users')\n\n// Status code\nexpect(response.status()).toBe(200)\n\n// Response body\nconst body = await response.json()\nexpect(body.users).toHaveLength(10)\n```\n\n## Soft Assertions\n\n```typescript\n// Continue after failure (collect multiple failures)\nawait expect.soft(page.getByRole('heading')).toHaveText('Title')\nawait expect.soft(page.getByRole('button')).toBeVisible()\nawait expect.soft(page.locator('.count')).toHaveText('5')\n\n// Check for any soft assertion failures\nexpect(test.info().errors).toHaveLength(0)\n```\n\n## Custom Timeouts\n\n```typescript\n// Per assertion timeout\nawait expect(page.locator('.loading')).toBeHidden({ timeout: 10000 })\nawait expect(page.locator('.data')).toHaveText('Loaded', { timeout: 5000 })\n\n// Global timeout in config\n// playwright.config.ts\nexport default defineConfig({\n  expect: {\n    timeout: 10000,\n  },\n})\n```\n\n## Negation\n\n```typescript\n// Not assertions\nawait expect(page.locator('.error')).not.toBeVisible()\nawait expect(page.locator('input')).not.toBeDisabled()\nawait expect(page.locator('.items')).not.toHaveCount(0)\nawait expect(page.locator('.status')).not.toHaveText('Error')\n```\n\n## Polling Assertions\n\n```typescript\n// Custom polling condition\nawait expect.poll(async () => {\n  const response = await page.request.get('/api/status')\n  return response.json()\n}).toEqual({ status: 'ready' })\n\n// With options\nawait expect.poll(async () => {\n  return await page.locator('.count').textContent()\n}, {\n  timeout: 30000,\n  intervals: [100, 250, 500, 1000],\n}).toBe('10')\n```\n\n## Snapshot Assertions\n\n```typescript\n// Text snapshot\nawait expect(page.locator('.data')).toHaveText(\n  await page.locator('.data').textContent()\n)\n\n// Screenshot comparison\nawait expect(page).toHaveScreenshot('homepage.png')\nawait expect(page.locator('.card')).toHaveScreenshot('card.png')\n\n// With options\nawait expect(page).toHaveScreenshot('homepage.png', {\n  maxDiffPixels: 100,\n  threshold: 0.2,\n})\n```\n\n## Accessibility Assertions\n\n```typescript\n// Check ARIA attributes\nawait expect(page.getByRole('button')).toHaveAccessibleName('Submit form')\nawait expect(page.getByRole('textbox')).toHaveAccessibleDescription('Enter email')\n\n// Combined with role\nawait expect(page.getByRole('button', { name: 'Submit' })).toBeEnabled()\n```\n\n## Multiple Assertions Pattern\n\n```typescript\n// Group related assertions\ntest('user profile displays correctly', async ({ page }) => {\n  await page.goto('/profile')\n\n  const profileCard = page.locator('.profile-card')\n\n  // Assert multiple aspects\n  await expect(profileCard).toBeVisible()\n  await expect(profileCard.locator('.name')).toHaveText('John Doe')\n  await expect(profileCard.locator('.email')).toHaveText('john@example.com')\n  await expect(profileCard.locator('.avatar')).toHaveAttribute('src', /avatar/)\n  await expect(profileCard.getByRole('button', { name: 'Edit' })).toBeEnabled()\n})\n```\n\n## Async Assertion Patterns\n\n```typescript\n// Wait for condition then assert\nawait page.getByRole('button', { name: 'Load' }).click()\nawait expect(page.locator('.data')).toHaveText('Loaded')\n\n// Assert API response triggered by action\nawait Promise.all([\n  page.waitForResponse('**/api/data'),\n  page.getByRole('button', { name: 'Fetch' }).click(),\n])\n\n// Assert navigation\nawait page.getByRole('link', { name: 'Dashboard' }).click()\nawait expect(page).toHaveURL('/dashboard')\n```\n\n## Best Practices\n\n### Use Auto-Retrying\n\n```typescript\n// GOOD: Auto-retrying (waits up to timeout)\nawait expect(page.locator('.result')).toHaveText('Success')\n\n// BAD: Non-retrying (snapshot in time)\nconst text = await page.locator('.result').textContent()\nexpect(text).toBe('Success')  // May fail during loading\n```\n\n### Assert User-Visible State\n\n```typescript\n// GOOD: Assert what user sees\nawait expect(page.getByRole('alert')).toHaveText('Saved successfully')\nawait expect(page.getByRole('button', { name: 'Submit' })).toBeDisabled()\n\n// BAD: Assert implementation details\nawait expect(page.locator('[data-loading=\"false\"]')).toBeVisible()\n```\n\n### Specific Assertions\n\n```typescript\n// GOOD: Specific assertion\nawait expect(page.getByRole('heading')).toHaveText('Welcome, John')\n\n// BAD: Overly broad assertion\nawait expect(page.getByRole('heading')).toBeVisible()\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-playwright/skills/playwright-debugging/SKILL.md": "---\nname: playwright-debugging\ndescription: Playwright debugging techniques and tools\nuser-invocable: false\n---\n\n# Playwright Debugging Skill\n\nTechniques for debugging Playwright tests.\n\n## Debug Mode\n\n### Using --debug\n\n```bash\n# Run with inspector\nnpx playwright test --debug\n\n# Debug specific test\nnpx playwright test tests/login.spec.ts --debug\n\n# Debug specific line\nnpx playwright test tests/login.spec.ts:15 --debug\n```\n\n### PWDEBUG Environment Variable\n\n```bash\n# Enable Playwright Inspector\nPWDEBUG=1 npx playwright test\n\n# Console debug mode\nPWDEBUG=console npx playwright test\n```\n\n### In-Code Debugging\n\n```typescript\ntest('debug this test', async ({ page }) => {\n  await page.goto('/')\n\n  // Pause and open inspector\n  await page.pause()\n\n  await page.click('button')\n})\n```\n\n## Playwright Inspector\n\n### Inspector Features\n\n```typescript\n// Inspector opens automatically with --debug\n// Features:\n// - Step through actions\n// - View selectors\n// - Record new steps\n// - Explore elements\n// - View console logs\n```\n\n### Recording Actions\n\n```bash\n# Start codegen to record tests\nnpx playwright codegen https://example.com\n\n# With specific viewport\nnpx playwright codegen --viewport-size=800,600 https://example.com\n\n# Save to file\nnpx playwright codegen -o tests/recorded.spec.ts https://example.com\n```\n\n## Trace Viewer\n\n### Enabling Traces\n\n```typescript\n// playwright.config.ts\nexport default defineConfig({\n  use: {\n    trace: 'on-first-retry',  // Only on retry\n    // trace: 'on',           // Always\n    // trace: 'retain-on-failure', // Keep on failure\n  },\n})\n\n// Or per test\ntest.use({ trace: 'on' })\n\n// Or in beforeAll\ntest.beforeAll(async ({ browser }, testInfo) => {\n  testInfo.config.use.trace = 'on'\n})\n```\n\n### Viewing Traces\n\n```bash\n# Open trace viewer\nnpx playwright show-trace trace.zip\n\n# View from test results\nnpx playwright show-report\n# Click on test, then \"Traces\" tab\n```\n\n### Trace Contents\n\n```\nTrace includes:\n- Screenshots at each action\n- DOM snapshots\n- Network requests\n- Console logs\n- Test source\n- Action timeline\n```\n\n## Screenshots\n\n### Capture Screenshots\n\n```typescript\n// Full page\nawait page.screenshot({ path: 'screenshot.png' })\n\n// Full page including scrollable content\nawait page.screenshot({ path: 'full.png', fullPage: true })\n\n// Element only\nawait page.locator('.card').screenshot({ path: 'card.png' })\n\n// With options\nawait page.screenshot({\n  path: 'screenshot.png',\n  type: 'png',           // 'png' or 'jpeg'\n  quality: 80,           // For jpeg\n  clip: { x: 0, y: 0, width: 800, height: 600 },\n})\n```\n\n### Auto Screenshots on Failure\n\n```typescript\n// playwright.config.ts\nexport default defineConfig({\n  use: {\n    screenshot: 'only-on-failure',\n    // screenshot: 'on',  // Always\n    // screenshot: 'off', // Never\n  },\n})\n```\n\n## Videos\n\n### Enable Video Recording\n\n```typescript\n// playwright.config.ts\nexport default defineConfig({\n  use: {\n    video: 'on-first-retry',\n    // video: 'on',           // Always record\n    // video: 'retain-on-failure', // Keep on failure\n  },\n})\n\n// With options\nexport default defineConfig({\n  use: {\n    video: {\n      mode: 'on',\n      size: { width: 1280, height: 720 },\n    },\n  },\n})\n```\n\n### Access Video Path\n\n```typescript\ntest.afterEach(async ({}, testInfo) => {\n  if (testInfo.status === 'failed') {\n    const videoPath = testInfo.attachments.find(a => a.name === 'video')?.path\n    console.log('Video saved to:', videoPath)\n  }\n})\n```\n\n## Console Logs\n\n### Capture Browser Console\n\n```typescript\ntest('capture console', async ({ page }) => {\n  const logs: string[] = []\n\n  page.on('console', msg => {\n    logs.push(`${msg.type()}: ${msg.text()}`)\n  })\n\n  await page.goto('/')\n\n  // Check logs\n  expect(logs).not.toContain('error')\n})\n```\n\n### Log Page Errors\n\n```typescript\ntest.beforeEach(async ({ page }) => {\n  page.on('pageerror', error => {\n    console.error('Page error:', error.message)\n  })\n\n  page.on('console', msg => {\n    if (msg.type() === 'error') {\n      console.error('Console error:', msg.text())\n    }\n  })\n})\n```\n\n## Network Debugging\n\n### Capture Network\n\n```typescript\ntest('debug network', async ({ page }) => {\n  const requests: string[] = []\n\n  page.on('request', request => {\n    requests.push(`${request.method()} ${request.url()}`)\n  })\n\n  page.on('response', response => {\n    if (!response.ok()) {\n      console.log(`Failed: ${response.status()} ${response.url()}`)\n    }\n  })\n\n  await page.goto('/')\n})\n```\n\n### HAR Recording\n\n```typescript\n// Record HAR file\nconst context = await browser.newContext({\n  recordHar: { path: 'network.har' },\n})\n\nconst page = await context.newPage()\nawait page.goto('/')\nawait context.close()  // HAR saved on close\n\n// Replay HAR in tests\nawait page.routeFromHAR('network.har', {\n  update: false,\n  notFound: 'fallback',\n})\n```\n\n## Slow Motion\n\n### Slow Down Execution\n\n```typescript\n// playwright.config.ts\nexport default defineConfig({\n  use: {\n    launchOptions: {\n      slowMo: 500,  // 500ms between actions\n    },\n  },\n})\n\n// Or per test\ntest.use({\n  launchOptions: {\n    slowMo: 1000,\n  },\n})\n```\n\n## Headed Mode\n\n### Run with Browser Window\n\n```bash\n# Run headed\nnpx playwright test --headed\n\n# Keep browser open on failure\nnpx playwright test --headed --timeout=0\n```\n\n```typescript\n// playwright.config.ts\nexport default defineConfig({\n  use: {\n    headless: false,\n  },\n})\n```\n\n## Test Isolation\n\n### Debug Test Isolation\n\n```typescript\n// Run tests serially for debugging\ntest.describe.configure({ mode: 'serial' })\n\ntest('first', async ({ page }) => {\n  // ...\n})\n\ntest('second depends on first', async ({ page }) => {\n  // ...\n})\n```\n\n### Preserve Context\n\n```typescript\n// Keep context between tests\nlet context: BrowserContext\nlet page: Page\n\ntest.beforeAll(async ({ browser }) => {\n  context = await browser.newContext()\n  page = await context.newPage()\n})\n\ntest.afterAll(async () => {\n  await context.close()\n})\n\ntest('test 1', async () => {\n  await page.goto('/step1')\n})\n\ntest('test 2', async () => {\n  // Continues from test 1\n  await page.goto('/step2')\n})\n```\n\n## Verbose Logging\n\n### Enable Verbose Output\n\n```bash\n# Debug all logs\nDEBUG=pw:* npx playwright test\n\n# Specific categories\nDEBUG=pw:api npx playwright test\nDEBUG=pw:browser npx playwright test\nDEBUG=pw:protocol npx playwright test\n```\n\n## Interactive Commands\n\n### In Test Commands\n\n```typescript\ntest('debug', async ({ page }) => {\n  await page.goto('/')\n\n  // Evaluate in page context\n  const title = await page.evaluate(() => document.title)\n  console.log('Title:', title)\n\n  // Get element properties\n  const button = page.getByRole('button')\n  console.log('Button text:', await button.textContent())\n  console.log('Button visible:', await button.isVisible())\n  console.log('Button enabled:', await button.isEnabled())\n\n  // Pause for manual inspection\n  await page.pause()\n})\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-playwright/skills/playwright-fixtures/SKILL.md": "---\nname: playwright-fixtures\ndescription: Playwright fixtures and test setup patterns\nuser-invocable: false\n---\n\n# Playwright Fixtures Skill\n\nPatterns for using fixtures and test setup in Playwright.\n\n## Built-in Fixtures\n\n### Page and Context\n\n```typescript\nimport { test, expect } from '@playwright/test'\n\ntest('basic test', async ({ page }) => {\n  // page is auto-created and cleaned up\n  await page.goto('/')\n  await expect(page).toHaveTitle(/Welcome/)\n})\n\ntest('with context', async ({ context }) => {\n  // Full browser context (cookies, storage)\n  const page1 = await context.newPage()\n  const page2 = await context.newPage()\n\n  await page1.goto('/page1')\n  await page2.goto('/page2')\n})\n\ntest('with browser', async ({ browser }) => {\n  // Create isolated context\n  const context = await browser.newContext()\n  const page = await context.newPage()\n\n  await page.goto('/')\n  await context.close()\n})\n```\n\n### Request Fixture\n\n```typescript\ntest('API test', async ({ request }) => {\n  // Make API requests\n  const response = await request.get('/api/users')\n  expect(response.ok()).toBeTruthy()\n\n  const users = await response.json()\n  expect(users).toHaveLength(10)\n})\n\ntest('create then verify', async ({ request, page }) => {\n  // Create via API\n  await request.post('/api/users', {\n    data: { name: 'John', email: 'john@test.com' },\n  })\n\n  // Verify in UI\n  await page.goto('/users')\n  await expect(page.getByText('John')).toBeVisible()\n})\n```\n\n## Custom Fixtures\n\n### Basic Custom Fixture\n\n```typescript\n// fixtures.ts\nimport { test as base } from '@playwright/test'\n\ntype MyFixtures = {\n  adminPage: Page\n  userEmail: string\n}\n\nexport const test = base.extend<MyFixtures>({\n  // Simple fixture\n  userEmail: async ({}, use) => {\n    await use(`user-${Date.now()}@test.com`)\n  },\n\n  // Fixture with setup/teardown\n  adminPage: async ({ browser }, use) => {\n    // Setup\n    const context = await browser.newContext()\n    const page = await context.newPage()\n    await page.goto('/admin/login')\n    await page.fill('[name=\"email\"]', 'admin@test.com')\n    await page.fill('[name=\"password\"]', 'admin123')\n    await page.click('button[type=\"submit\"]')\n    await page.waitForURL('/admin/dashboard')\n\n    // Provide to test\n    await use(page)\n\n    // Cleanup\n    await context.close()\n  },\n})\n\nexport { expect } from '@playwright/test'\n\n// In tests\nimport { test, expect } from './fixtures'\n\ntest('admin dashboard', async ({ adminPage }) => {\n  await expect(adminPage.getByRole('heading')).toHaveText('Admin Dashboard')\n})\n```\n\n### Fixtures with Dependencies\n\n```typescript\ntype Fixtures = {\n  dbConnection: Database\n  testUser: User\n  authenticatedPage: Page\n}\n\nexport const test = base.extend<Fixtures>({\n  // Database fixture\n  dbConnection: async ({}, use) => {\n    const db = await Database.connect()\n    await use(db)\n    await db.disconnect()\n  },\n\n  // Depends on dbConnection\n  testUser: async ({ dbConnection }, use) => {\n    const user = await dbConnection.createUser({\n      email: `test-${Date.now()}@example.com`,\n      password: 'password123',\n    })\n    await use(user)\n    await dbConnection.deleteUser(user.id)\n  },\n\n  // Depends on testUser\n  authenticatedPage: async ({ page, testUser }, use) => {\n    await page.goto('/login')\n    await page.fill('[name=\"email\"]', testUser.email)\n    await page.fill('[name=\"password\"]', 'password123')\n    await page.click('button[type=\"submit\"]')\n    await page.waitForURL('/dashboard')\n    await use(page)\n  },\n})\n```\n\n### Worker Fixtures\n\n```typescript\n// Shared across all tests in worker\ntype WorkerFixtures = {\n  apiServer: Server\n  sharedData: SharedData\n}\n\nexport const test = base.extend<{}, WorkerFixtures>({\n  // Worker-scoped (shared)\n  apiServer: [async ({}, use) => {\n    const server = await startMockServer()\n    await use(server)\n    await server.close()\n  }, { scope: 'worker' }],\n\n  // Test-scoped (per test)\n  sharedData: [async ({ apiServer }, use) => {\n    const data = await apiServer.getData()\n    await use(data)\n  }, { scope: 'worker' }],\n})\n```\n\n### Auto Fixtures\n\n```typescript\nexport const test = base.extend<{\n  setupComplete: void\n}>({\n  // Auto-run for every test\n  setupComplete: [async ({ page }, use) => {\n    // Clear local storage before each test\n    await page.addInitScript(() => {\n      localStorage.clear()\n      sessionStorage.clear()\n    })\n    await use()\n  }, { auto: true }],\n})\n```\n\n## Authentication Fixtures\n\n### Storage State\n\n```typescript\n// global-setup.ts\nimport { chromium } from '@playwright/test'\n\nasync function globalSetup() {\n  const browser = await chromium.launch()\n  const context = await browser.newContext()\n  const page = await context.newPage()\n\n  // Login\n  await page.goto('/login')\n  await page.fill('[name=\"email\"]', 'user@example.com')\n  await page.fill('[name=\"password\"]', 'password')\n  await page.click('button[type=\"submit\"]')\n  await page.waitForURL('/dashboard')\n\n  // Save state\n  await context.storageState({ path: './auth/user.json' })\n\n  await browser.close()\n}\n\nexport default globalSetup\n\n// playwright.config.ts\nexport default defineConfig({\n  globalSetup: require.resolve('./global-setup'),\n  projects: [\n    {\n      name: 'authenticated',\n      use: { storageState: './auth/user.json' },\n    },\n  ],\n})\n```\n\n### Multiple Auth States\n\n```typescript\n// fixtures.ts\ntype AuthFixtures = {\n  adminContext: BrowserContext\n  userContext: BrowserContext\n}\n\nexport const test = base.extend<AuthFixtures>({\n  adminContext: async ({ browser }, use) => {\n    const context = await browser.newContext({\n      storageState: './auth/admin.json',\n    })\n    await use(context)\n    await context.close()\n  },\n\n  userContext: async ({ browser }, use) => {\n    const context = await browser.newContext({\n      storageState: './auth/user.json',\n    })\n    await use(context)\n    await context.close()\n  },\n})\n\n// In tests\ntest('admin and user interaction', async ({ adminContext, userContext }) => {\n  const adminPage = await adminContext.newPage()\n  const userPage = await userContext.newPage()\n\n  await adminPage.goto('/admin/users')\n  await userPage.goto('/dashboard')\n})\n```\n\n## Page Object Model\n\n### Page Objects\n\n```typescript\n// pages/LoginPage.ts\nimport { Page, Locator } from '@playwright/test'\n\nexport class LoginPage {\n  readonly page: Page\n  readonly emailInput: Locator\n  readonly passwordInput: Locator\n  readonly submitButton: Locator\n\n  constructor(page: Page) {\n    this.page = page\n    this.emailInput = page.getByLabel('Email')\n    this.passwordInput = page.getByLabel('Password')\n    this.submitButton = page.getByRole('button', { name: 'Sign in' })\n  }\n\n  async goto() {\n    await this.page.goto('/login')\n  }\n\n  async login(email: string, password: string) {\n    await this.emailInput.fill(email)\n    await this.passwordInput.fill(password)\n    await this.submitButton.click()\n  }\n}\n\n// pages/DashboardPage.ts\nexport class DashboardPage {\n  readonly page: Page\n\n  constructor(page: Page) {\n    this.page = page\n  }\n\n  async expectWelcome(name: string) {\n    await expect(this.page.getByRole('heading')).toContainText(`Welcome, ${name}`)\n  }\n}\n```\n\n### POMs as Fixtures\n\n```typescript\n// fixtures.ts\nimport { test as base } from '@playwright/test'\nimport { LoginPage } from './pages/LoginPage'\nimport { DashboardPage } from './pages/DashboardPage'\n\ntype PageObjects = {\n  loginPage: LoginPage\n  dashboardPage: DashboardPage\n}\n\nexport const test = base.extend<PageObjects>({\n  loginPage: async ({ page }, use) => {\n    await use(new LoginPage(page))\n  },\n\n  dashboardPage: async ({ page }, use) => {\n    await use(new DashboardPage(page))\n  },\n})\n\n// In tests\nimport { test, expect } from './fixtures'\n\ntest('login flow', async ({ loginPage, dashboardPage }) => {\n  await loginPage.goto()\n  await loginPage.login('user@example.com', 'password')\n  await dashboardPage.expectWelcome('User')\n})\n```\n\n## Test Data Fixtures\n\n### Factory Fixtures\n\n```typescript\ntype Fixtures = {\n  createUser: (overrides?: Partial<User>) => Promise<User>\n  createPost: (user: User, overrides?: Partial<Post>) => Promise<Post>\n}\n\nexport const test = base.extend<Fixtures>({\n  createUser: async ({ request }, use) => {\n    const createdUsers: User[] = []\n\n    const factory = async (overrides = {}) => {\n      const user = {\n        email: `user-${Date.now()}@test.com`,\n        name: 'Test User',\n        ...overrides,\n      }\n\n      const response = await request.post('/api/users', { data: user })\n      const created = await response.json()\n      createdUsers.push(created)\n      return created\n    }\n\n    await use(factory)\n\n    // Cleanup\n    for (const user of createdUsers) {\n      await request.delete(`/api/users/${user.id}`)\n    }\n  },\n\n  createPost: async ({ request }, use) => {\n    const factory = async (user: User, overrides = {}) => {\n      const post = {\n        title: 'Test Post',\n        content: 'Content',\n        authorId: user.id,\n        ...overrides,\n      }\n\n      const response = await request.post('/api/posts', { data: post })\n      return await response.json()\n    }\n\n    await use(factory)\n  },\n})\n```\n\n## Fixture Options\n\n```typescript\ntype Options = {\n  locale: string\n  timezone: string\n}\n\nexport const test = base.extend<Options>({\n  locale: ['en-US', { option: true }],\n  timezone: ['America/New_York', { option: true }],\n})\n\n// Override in test file\ntest.use({\n  locale: 'de-DE',\n  timezone: 'Europe/Berlin',\n})\n\ntest('german locale', async ({ page, locale }) => {\n  expect(locale).toBe('de-DE')\n})\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-playwright/skills/playwright-selectors/SKILL.md": "---\nname: playwright-selectors\ndescription: Playwright selector strategies and patterns\nuser-invocable: false\n---\n\n# Playwright Selectors Skill\n\nStrategies for selecting elements in Playwright tests.\n\n## Recommended Selectors\n\n### By Role (Preferred)\n\n```typescript\n// Buttons\nawait page.getByRole('button', { name: 'Submit' })\nawait page.getByRole('button', { name: /submit/i })\n\n// Links\nawait page.getByRole('link', { name: 'Home' })\nawait page.getByRole('link', { name: 'Learn more' }).first()\n\n// Form elements\nawait page.getByRole('textbox', { name: 'Email' })\nawait page.getByRole('checkbox', { name: 'Accept terms' })\nawait page.getByRole('combobox', { name: 'Country' })\nawait page.getByRole('radio', { name: 'Option A' })\n\n// Headings\nawait page.getByRole('heading', { name: 'Welcome' })\nawait page.getByRole('heading', { level: 1 })\n\n// Navigation\nawait page.getByRole('navigation')\nawait page.getByRole('main')\nawait page.getByRole('dialog')\n\n// Lists\nawait page.getByRole('list')\nawait page.getByRole('listitem')\n\n// Tables\nawait page.getByRole('table')\nawait page.getByRole('row')\nawait page.getByRole('cell', { name: 'Value' })\n```\n\n### By Test ID (Reliable)\n\n```typescript\n// Single element\nawait page.getByTestId('submit-button')\nawait page.getByTestId('user-profile')\n\n// In HTML\n<button data-testid=\"submit-button\">Submit</button>\n\n// Configure attribute name\n// playwright.config.ts\nexport default defineConfig({\n  use: {\n    testIdAttribute: 'data-test-id',\n  },\n})\n```\n\n### By Label (Forms)\n\n```typescript\n// Text inputs\nawait page.getByLabel('Email')\nawait page.getByLabel('Password')\n\n// With exact match\nawait page.getByLabel('Email', { exact: true })\n\n// Associated label\n<label for=\"email\">Email</label>\n<input id=\"email\" type=\"email\" />\n```\n\n### By Placeholder\n\n```typescript\nawait page.getByPlaceholder('Enter your email')\nawait page.getByPlaceholder('Search...')\n```\n\n### By Text\n\n```typescript\n// Contains text\nawait page.getByText('Welcome')\n\n// Exact match\nawait page.getByText('Welcome', { exact: true })\n\n// Regex\nawait page.getByText(/welcome/i)\n\n// In specific element\nawait page.locator('h1').getByText('Welcome')\n```\n\n### By Alt Text\n\n```typescript\n// Images\nawait page.getByAltText('Company logo')\nawait page.getByAltText(/product image/i)\n```\n\n### By Title\n\n```typescript\nawait page.getByTitle('Close dialog')\nawait page.getByTitle(/tooltip/i)\n```\n\n## CSS Selectors\n\n### Basic CSS\n\n```typescript\n// By class\nawait page.locator('.submit-button')\nawait page.locator('.card.featured')\n\n// By ID\nawait page.locator('#main-content')\n\n// By attribute\nawait page.locator('[data-state=\"active\"]')\nawait page.locator('input[type=\"email\"]')\nawait page.locator('[aria-expanded=\"true\"]')\n\n// Descendant\nawait page.locator('.card .title')\nawait page.locator('#form input')\n\n// Child\nawait page.locator('.list > li')\n\n// Sibling\nawait page.locator('.label + input')\n```\n\n### Pseudo Selectors\n\n```typescript\n// First/last\nawait page.locator('.item:first-child')\nawait page.locator('.item:last-child')\nawait page.locator('.item:nth-child(2)')\n\n// State\nawait page.locator('button:enabled')\nawait page.locator('input:disabled')\nawait page.locator('input:focus')\nawait page.locator('input:checked')\n\n// Content\nawait page.locator('button:has-text(\"Submit\")')\nawait page.locator('div:has(.icon)')\n```\n\n## XPath Selectors\n\n```typescript\n// Basic XPath\nawait page.locator('xpath=//button[@id=\"submit\"]')\nawait page.locator('xpath=//div[contains(@class, \"card\")]')\n\n// Text content\nawait page.locator('xpath=//button[text()=\"Submit\"]')\nawait page.locator('xpath=//h1[contains(text(), \"Welcome\")]')\n\n// Axes\nawait page.locator('xpath=//div[@class=\"card\"]//button')\nawait page.locator('xpath=//label[text()=\"Email\"]/following-sibling::input')\n```\n\n## Chaining and Filtering\n\n### Chaining Locators\n\n```typescript\n// Chain methods\nconst row = page.getByRole('row', { name: 'John' })\nconst editButton = row.getByRole('button', { name: 'Edit' })\n\n// Nested locators\nconst card = page.locator('.card').filter({ hasText: 'Featured' })\nconst title = card.locator('.title')\n```\n\n### Filtering\n\n```typescript\n// Filter by text\nawait page.locator('.item').filter({ hasText: 'Active' })\n\n// Filter by not having text\nawait page.locator('.item').filter({ hasNotText: 'Deleted' })\n\n// Filter by child element\nawait page.locator('.card').filter({ has: page.locator('.badge') })\n\n// Filter by not having child\nawait page.locator('.card').filter({ hasNot: page.locator('.error') })\n```\n\n### Multiple Elements\n\n```typescript\n// First match\nawait page.locator('.item').first()\n\n// Last match\nawait page.locator('.item').last()\n\n// By index\nawait page.locator('.item').nth(2)\n\n// Count\nconst count = await page.locator('.item').count()\n\n// All elements\nconst items = await page.locator('.item').all()\nfor (const item of items) {\n  await item.click()\n}\n```\n\n## Frame Selectors\n\n```typescript\n// By name/id\nconst frame = page.frame('frame-name')\n\n// By URL\nconst frame = page.frame({ url: /embedded/ })\n\n// Frame locator\nconst frameLocator = page.frameLocator('iframe.embed')\nawait frameLocator.getByRole('button').click()\n\n// Nested frames\nconst nestedFrame = page.frameLocator('iframe').frameLocator('iframe')\n```\n\n## Shadow DOM\n\n```typescript\n// Playwright automatically pierces open shadow DOM\nawait page.locator('custom-element').locator('.inner-element')\n\n// Explicit shadow piercing\nawait page.locator('custom-element >> .inner-element')\n```\n\n## Layout Selectors\n\n```typescript\n// Position-based\nawait page.locator('.button').locator(':near(.icon)')\nawait page.locator('.button').locator(':left-of(.other)')\nawait page.locator('.button').locator(':right-of(.other)')\nawait page.locator('.button').locator(':above(.other)')\nawait page.locator('.button').locator(':below(.other)')\n```\n\n## Waiting Strategies\n\n```typescript\n// Auto-waiting (built-in)\nawait page.getByRole('button').click()  // Waits for element\n\n// Custom wait\nawait page.getByRole('button').waitFor()\nawait page.getByRole('button').waitFor({ state: 'visible' })\nawait page.getByRole('button').waitFor({ state: 'hidden' })\nawait page.getByRole('button').waitFor({ state: 'attached' })\nawait page.getByRole('button').waitFor({ state: 'detached' })\n\n// With timeout\nawait page.getByRole('button').waitFor({ timeout: 5000 })\n```\n\n## Best Practices\n\n### Selector Priority\n\n```\n1. getByRole()       - Most resilient, tests accessibility\n2. getByTestId()     - Explicit, decoupled from UI\n3. getByLabel()      - Good for forms\n4. getByPlaceholder()- When label not available\n5. getByText()       - For unique visible text\n6. CSS selectors     - When semantic selectors not available\n7. XPath             - Complex traversal only\n```\n\n### Avoiding Brittle Selectors\n\n```typescript\n// BAD: Brittle selectors\nawait page.locator('.btn-primary.ml-2.mt-3')  // Styling classes\nawait page.locator('div > div > div > button') // Structure-dependent\nawait page.locator('[class*=\"Button-module\"]')  // Generated classes\n\n// GOOD: Resilient selectors\nawait page.getByRole('button', { name: 'Submit' })\nawait page.getByTestId('submit-form')\nawait page.getByLabel('Email address')\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-playwright/skills/playwright-visual-testing/SKILL.md": "---\nname: playwright-visual-testing\ndescription: Playwright visual comparison and screenshot testing\nuser-invocable: false\n---\n\n# Playwright Visual Testing Skill\n\nPatterns for visual regression testing with Playwright.\n\n## Screenshot Assertions\n\n### Basic Screenshot Comparison\n\n```typescript\nimport { test, expect } from '@playwright/test'\n\ntest('visual comparison', async ({ page }) => {\n  await page.goto('/')\n\n  // Compare full page\n  await expect(page).toHaveScreenshot()\n\n  // With custom name\n  await expect(page).toHaveScreenshot('homepage.png')\n})\n\n// Element screenshot\ntest('component visual test', async ({ page }) => {\n  await page.goto('/components')\n\n  const card = page.locator('.card').first()\n  await expect(card).toHaveScreenshot('card-component.png')\n})\n```\n\n### Screenshot Options\n\n```typescript\nawait expect(page).toHaveScreenshot('name.png', {\n  // Comparison options\n  maxDiffPixels: 100,           // Allow N different pixels\n  maxDiffPixelRatio: 0.05,      // Allow 5% difference\n  threshold: 0.2,                // Color difference threshold (0-1)\n\n  // Capture options\n  fullPage: true,                // Capture entire scrollable page\n  clip: { x: 0, y: 0, width: 800, height: 600 },\n  scale: 'css',                  // 'css' or 'device'\n  animations: 'disabled',        // Disable animations\n  mask: [page.locator('.dynamic')],  // Mask dynamic content\n  maskColor: '#FF00FF',          // Mask overlay color\n})\n```\n\n### Updating Snapshots\n\n```bash\n# Update all snapshots\nnpx playwright test --update-snapshots\n\n# Update specific test\nnpx playwright test visual.spec.ts --update-snapshots\n```\n\n## Handling Dynamic Content\n\n### Masking Elements\n\n```typescript\ntest('mask dynamic content', async ({ page }) => {\n  await page.goto('/dashboard')\n\n  await expect(page).toHaveScreenshot('dashboard.png', {\n    mask: [\n      page.locator('.timestamp'),\n      page.locator('.user-avatar'),\n      page.locator('.random-ad'),\n    ],\n  })\n})\n```\n\n### Waiting for Stability\n\n```typescript\ntest('wait for animations', async ({ page }) => {\n  await page.goto('/animated-page')\n\n  // Wait for animations to complete\n  await page.waitForTimeout(500)\n\n  // Or wait for specific state\n  await page.locator('.loading').waitFor({ state: 'hidden' })\n\n  await expect(page).toHaveScreenshot()\n})\n```\n\n### Disabling Animations\n\n```typescript\n// playwright.config.ts\nexport default defineConfig({\n  use: {\n    // Disable CSS animations and transitions\n    // JS animations need manual handling\n  },\n})\n\n// In test\ntest('no animations', async ({ page }) => {\n  await page.goto('/')\n\n  // Add CSS to disable animations\n  await page.addStyleTag({\n    content: `\n      *, *::before, *::after {\n        animation-duration: 0s !important;\n        animation-delay: 0s !important;\n        transition-duration: 0s !important;\n        transition-delay: 0s !important;\n      }\n    `,\n  })\n\n  await expect(page).toHaveScreenshot()\n})\n```\n\n### Replacing Dynamic Content\n\n```typescript\ntest('replace dynamic dates', async ({ page }) => {\n  await page.goto('/orders')\n\n  // Replace dynamic dates with static text\n  await page.evaluate(() => {\n    document.querySelectorAll('.date').forEach(el => {\n      el.textContent = 'FIXED_DATE'\n    })\n  })\n\n  await expect(page).toHaveScreenshot()\n})\n```\n\n## Responsive Testing\n\n### Multiple Viewports\n\n```typescript\nconst viewports = [\n  { name: 'mobile', width: 375, height: 667 },\n  { name: 'tablet', width: 768, height: 1024 },\n  { name: 'desktop', width: 1280, height: 720 },\n]\n\nfor (const viewport of viewports) {\n  test(`homepage - ${viewport.name}`, async ({ page }) => {\n    await page.setViewportSize(viewport)\n    await page.goto('/')\n\n    await expect(page).toHaveScreenshot(`homepage-${viewport.name}.png`)\n  })\n}\n```\n\n### Using Projects\n\n```typescript\n// playwright.config.ts\nexport default defineConfig({\n  projects: [\n    {\n      name: 'desktop-chrome',\n      use: {\n        ...devices['Desktop Chrome'],\n        viewport: { width: 1280, height: 720 },\n      },\n    },\n    {\n      name: 'mobile-safari',\n      use: {\n        ...devices['iPhone 13'],\n      },\n    },\n    {\n      name: 'tablet-portrait',\n      use: {\n        ...devices['iPad Pro 11'],\n      },\n    },\n  ],\n})\n```\n\n## Theming and States\n\n### Dark Mode\n\n```typescript\ntest('dark mode', async ({ page }) => {\n  await page.emulateMedia({ colorScheme: 'dark' })\n  await page.goto('/')\n\n  await expect(page).toHaveScreenshot('homepage-dark.png')\n})\n\ntest('light mode', async ({ page }) => {\n  await page.emulateMedia({ colorScheme: 'light' })\n  await page.goto('/')\n\n  await expect(page).toHaveScreenshot('homepage-light.png')\n})\n```\n\n### Component States\n\n```typescript\ntest('button states', async ({ page }) => {\n  await page.goto('/components/button')\n\n  const button = page.getByRole('button', { name: 'Submit' })\n\n  // Default state\n  await expect(button).toHaveScreenshot('button-default.png')\n\n  // Hover state\n  await button.hover()\n  await expect(button).toHaveScreenshot('button-hover.png')\n\n  // Focus state\n  await button.focus()\n  await expect(button).toHaveScreenshot('button-focus.png')\n\n  // Disabled state\n  await page.evaluate(() => {\n    (document.querySelector('button') as HTMLButtonElement).disabled = true\n  })\n  await expect(button).toHaveScreenshot('button-disabled.png')\n})\n```\n\n## Configuration\n\n### Global Config\n\n```typescript\n// playwright.config.ts\nexport default defineConfig({\n  expect: {\n    toHaveScreenshot: {\n      // Default comparison options\n      maxDiffPixels: 50,\n      threshold: 0.3,\n      animations: 'disabled',\n    },\n    toMatchSnapshot: {\n      maxDiffPixelRatio: 0.05,\n    },\n  },\n\n  // Snapshot directory\n  snapshotDir: './screenshots',\n\n  // Platform-specific snapshots\n  snapshotPathTemplate: '{testDir}/{testFileDir}/{testFileName}-snapshots/{arg}{-projectName}{ext}',\n})\n```\n\n### Platform Handling\n\n```typescript\n// Separate snapshots per platform\n// playwright.config.ts\nexport default defineConfig({\n  snapshotPathTemplate: '{testDir}/__snapshots__/{testFileName}/{arg}-{projectName}-{platform}{ext}',\n})\n\n// Or ignore platform differences\ntest('cross-platform visual', async ({ page }) => {\n  await page.goto('/')\n\n  await expect(page).toHaveScreenshot('homepage.png', {\n    maxDiffPixelRatio: 0.1,  // Allow platform font differences\n  })\n})\n```\n\n## CI Integration\n\n### GitHub Actions\n\n```yaml\n# .github/workflows/visual.yml\nname: Visual Tests\n\non: [push, pull_request]\n\njobs:\n  visual:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: 20\n\n      - run: npm ci\n      - run: npx playwright install --with-deps\n\n      - run: npx playwright test\n\n      - uses: actions/upload-artifact@v4\n        if: failure()\n        with:\n          name: visual-test-results\n          path: test-results/\n          retention-days: 7\n```\n\n### Updating in CI\n\n```bash\n# Update snapshots in CI (usually PR)\nnpx playwright test --update-snapshots\n\n# Commit updated snapshots\ngit add **/*.png\ngit commit -m \"Update visual snapshots\"\n```\n\n## Best Practices\n\n### Stable Screenshots\n\n```typescript\ntest('stable visual test', async ({ page }) => {\n  // 1. Use consistent viewport\n  await page.setViewportSize({ width: 1280, height: 720 })\n\n  // 2. Load page and wait\n  await page.goto('/', { waitUntil: 'networkidle' })\n\n  // 3. Wait for fonts to load\n  await page.waitForFunction(() => document.fonts.ready)\n\n  // 4. Disable animations\n  await page.addStyleTag({\n    content: '* { animation: none !important; transition: none !important; }'\n  })\n\n  // 5. Mask dynamic content\n  await expect(page).toHaveScreenshot('page.png', {\n    mask: [page.locator('.timestamp'), page.locator('.ad')],\n  })\n})\n```\n\n### Organizing Snapshots\n\n```\ntests/\n visual/\n    homepage.spec.ts\n    dashboard.spec.ts\n    components.spec.ts\n __snapshots__/\n    homepage.spec.ts-snapshots/\n       homepage-desktop-chromium.png\n       homepage-mobile-webkit.png\n    components.spec.ts-snapshots/\n        button-default.png\n        button-hover.png\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-postgres/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-postgres\",\n  \"version\": \"1.0.0\",\n  \"description\": \"PostgreSQL patterns - queries, indexes, migrations, performance tuning\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"postgres\", \"postgresql\", \"sql\", \"database\", \"patterns\"]\n}\n",
        "plugins/aai-stack-postgres/skills/postgres-indexes/SKILL.md": "---\nname: postgres-indexes\ndescription: PostgreSQL indexing strategies and optimization\nuser-invocable: false\n---\n\n# PostgreSQL Indexes Skill\n\nPatterns for creating and optimizing PostgreSQL indexes.\n\n## Index Types\n\n### B-tree Index (Default)\n\n```sql\n-- Most common, good for equality and range queries\nCREATE INDEX idx_users_email ON users(email);\n\n-- Compound index\nCREATE INDEX idx_orders_user_date ON orders(user_id, created_at DESC);\n\n-- Unique index\nCREATE UNIQUE INDEX idx_users_email_unique ON users(email);\n```\n\n### Hash Index\n\n```sql\n-- Fast for equality comparisons only\nCREATE INDEX idx_users_username_hash ON users USING HASH(username);\n```\n\n### GIN Index (Generalized Inverted)\n\n```sql\n-- For arrays\nCREATE INDEX idx_products_tags ON products USING GIN(tags);\n\n-- For JSONB\nCREATE INDEX idx_products_metadata ON products USING GIN(metadata);\n\n-- For full-text search\nCREATE INDEX idx_articles_search ON articles USING GIN(search_vector);\n```\n\n### GiST Index (Generalized Search Tree)\n\n```sql\n-- For geometric types\nCREATE INDEX idx_locations_point ON locations USING GIST(location);\n\n-- For range types\nCREATE INDEX idx_events_duration ON events USING GIST(duration);\n\n-- For full-text search (alternative to GIN)\nCREATE INDEX idx_articles_search_gist ON articles USING GIST(search_vector);\n```\n\n### BRIN Index (Block Range)\n\n```sql\n-- Efficient for large, naturally ordered tables\nCREATE INDEX idx_logs_created ON logs USING BRIN(created_at);\n\n-- Very compact, good for append-only tables\nCREATE INDEX idx_events_timestamp ON events USING BRIN(timestamp);\n```\n\n## Partial Indexes\n\n```sql\n-- Index only active users\nCREATE INDEX idx_active_users ON users(email) WHERE status = 'active';\n\n-- Index only recent orders\nCREATE INDEX idx_recent_orders ON orders(created_at)\nWHERE created_at > '2024-01-01';\n\n-- Index only non-null values\nCREATE INDEX idx_users_phone ON users(phone) WHERE phone IS NOT NULL;\n```\n\n## Expression Indexes\n\n```sql\n-- Index on lower case email\nCREATE INDEX idx_users_email_lower ON users(LOWER(email));\n\n-- Index on date part\nCREATE INDEX idx_orders_date ON orders(DATE(created_at));\n\n-- Index on JSONB expression\nCREATE INDEX idx_products_color ON products((metadata->>'color'));\n\n-- Index on computed value\nCREATE INDEX idx_orders_year_month ON orders(\n  EXTRACT(YEAR FROM created_at),\n  EXTRACT(MONTH FROM created_at)\n);\n```\n\n## Covering Indexes\n\n```sql\n-- Include non-key columns in index\nCREATE INDEX idx_orders_user_covering ON orders(user_id)\nINCLUDE (total, status, created_at);\n\n-- Query can use index-only scan\nSELECT total, status, created_at\nFROM orders\nWHERE user_id = 123;\n```\n\n## Index Maintenance\n\n### Analyze Index Usage\n\n```sql\n-- Check index usage statistics\nSELECT\n  schemaname,\n  tablename,\n  indexname,\n  idx_scan as scans,\n  idx_tup_read as tuples_read,\n  idx_tup_fetch as tuples_fetched,\n  pg_size_pretty(pg_relation_size(indexrelid)) as size\nFROM pg_stat_user_indexes\nORDER BY idx_scan DESC;\n\n-- Find unused indexes\nSELECT\n  schemaname,\n  tablename,\n  indexname,\n  pg_size_pretty(pg_relation_size(indexrelid)) as size\nFROM pg_stat_user_indexes\nWHERE idx_scan = 0\n  AND indexrelid NOT IN (\n    SELECT conindid FROM pg_constraint WHERE contype = 'p'\n  )\nORDER BY pg_relation_size(indexrelid) DESC;\n```\n\n### Duplicate Index Detection\n\n```sql\n-- Find duplicate indexes\nSELECT\n  array_agg(indexname) as duplicate_indexes,\n  tablename\nFROM (\n  SELECT\n    i.relname as indexname,\n    t.relname as tablename,\n    array_to_string(array_agg(a.attname ORDER BY a.attnum), ', ') as columns\n  FROM pg_index ix\n  JOIN pg_class i ON i.oid = ix.indexrelid\n  JOIN pg_class t ON t.oid = ix.indrelid\n  JOIN pg_attribute a ON a.attrelid = t.oid AND a.attnum = ANY(ix.indkey)\n  WHERE t.relkind = 'r'\n  GROUP BY i.relname, t.relname\n) sub\nGROUP BY tablename, columns\nHAVING COUNT(*) > 1;\n```\n\n### Index Bloat\n\n```sql\n-- Check index bloat\nSELECT\n  schemaname,\n  tablename,\n  indexname,\n  pg_size_pretty(pg_relation_size(indexrelid)) as index_size\nFROM pg_stat_user_indexes\nWHERE indexrelname NOT LIKE '%pkey%'\nORDER BY pg_relation_size(indexrelid) DESC;\n\n-- Reindex bloated index\nREINDEX INDEX CONCURRENTLY idx_orders_user;\n\n-- Reindex entire table\nREINDEX TABLE CONCURRENTLY orders;\n```\n\n## Concurrent Operations\n\n```sql\n-- Create index without locking table\nCREATE INDEX CONCURRENTLY idx_large_table ON large_table(column);\n\n-- Drop index without locking\nDROP INDEX CONCURRENTLY idx_old_index;\n\n-- Reindex without locking\nREINDEX INDEX CONCURRENTLY idx_bloated;\n```\n\n## Index Selection Guide\n\n| Query Pattern | Best Index Type |\n|---------------|-----------------|\n| Equality (WHERE x = y) | B-tree (default) |\n| Range (WHERE x > y) | B-tree |\n| Pattern match (LIKE 'prefix%') | B-tree |\n| Array contains (x = ANY(arr)) | GIN |\n| JSONB queries | GIN |\n| Full-text search | GIN or GiST |\n| Geometric/spatial | GiST |\n| Large ordered tables | BRIN |\n\n## Query Plan Analysis\n\n```sql\n-- Check if index is used\nEXPLAIN ANALYZE\nSELECT * FROM orders WHERE user_id = 123;\n\n-- Force index usage for testing\nSET enable_seqscan = off;\nEXPLAIN ANALYZE SELECT * FROM orders WHERE user_id = 123;\nSET enable_seqscan = on;\n```\n\n## Best Practices\n\n```sql\n-- 1. Index foreign keys\nCREATE INDEX idx_orders_user_id ON orders(user_id);\nCREATE INDEX idx_order_items_order_id ON order_items(order_id);\n\n-- 2. Index columns used in WHERE clauses\nCREATE INDEX idx_users_status ON users(status);\n\n-- 3. Index columns used in ORDER BY\nCREATE INDEX idx_posts_created_desc ON posts(created_at DESC);\n\n-- 4. Compound indexes for multi-column queries\nCREATE INDEX idx_orders_status_date ON orders(status, created_at DESC);\n\n-- 5. Use partial indexes for frequently filtered subsets\nCREATE INDEX idx_pending_orders ON orders(created_at)\nWHERE status = 'pending';\n```\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-postgres/skills/postgres-migrations/SKILL.md": "---\nname: postgres-migrations\ndescription: PostgreSQL migration patterns and best practices\nuser-invocable: false\n---\n\n# PostgreSQL Migrations Skill\n\nPatterns for safe PostgreSQL schema migrations.\n\n## Safe Migration Patterns\n\n### Adding Columns\n\n```sql\n-- Safe: Add nullable column\nALTER TABLE users ADD COLUMN phone VARCHAR(20);\n\n-- Safe: Add column with default (instant in PG 11+)\nALTER TABLE users ADD COLUMN status VARCHAR(20) DEFAULT 'active';\n\n-- Backfill if needed (in batches)\nUPDATE users SET phone = '' WHERE phone IS NULL;\n\n-- Then add NOT NULL if required\nALTER TABLE users ALTER COLUMN phone SET NOT NULL;\n```\n\n### Removing Columns\n\n```sql\n-- Step 1: Stop reading/writing column in application\n-- Step 2: Deploy application changes\n-- Step 3: Drop column\n\nALTER TABLE users DROP COLUMN legacy_field;\n```\n\n### Renaming Columns\n\n```sql\n-- Step 1: Add new column\nALTER TABLE users ADD COLUMN full_name VARCHAR(100);\n\n-- Step 2: Backfill (in batches)\nUPDATE users SET full_name = name WHERE full_name IS NULL;\n\n-- Step 3: Update app to read/write both\n-- Step 4: Deploy app changes\n-- Step 5: Drop old column\n\nALTER TABLE users DROP COLUMN name;\n```\n\n### Adding Constraints\n\n```sql\n-- Add NOT NULL with default (safe)\nALTER TABLE users ADD COLUMN role VARCHAR(20) DEFAULT 'user' NOT NULL;\n\n-- Add NOT NULL to existing column (requires data check)\n-- First ensure no nulls exist\nUPDATE users SET status = 'active' WHERE status IS NULL;\nALTER TABLE users ALTER COLUMN status SET NOT NULL;\n\n-- Add check constraint (blocks writes during validation)\nALTER TABLE users ADD CONSTRAINT chk_age CHECK (age >= 0);\n\n-- Add check NOT VALID (doesn't validate existing rows)\nALTER TABLE users ADD CONSTRAINT chk_age CHECK (age >= 0) NOT VALID;\n-- Validate later\nALTER TABLE users VALIDATE CONSTRAINT chk_age;\n```\n\n### Adding Foreign Keys\n\n```sql\n-- Add column first\nALTER TABLE orders ADD COLUMN customer_id UUID;\n\n-- Backfill data\nUPDATE orders SET customer_id = users.id\nFROM users WHERE users.legacy_id = orders.legacy_user_id;\n\n-- Add foreign key NOT VALID (no lock)\nALTER TABLE orders\nADD CONSTRAINT fk_orders_customer\nFOREIGN KEY (customer_id) REFERENCES customers(id)\nNOT VALID;\n\n-- Validate in background\nALTER TABLE orders VALIDATE CONSTRAINT fk_orders_customer;\n```\n\n### Adding Indexes\n\n```sql\n-- ALWAYS use CONCURRENTLY in production\nCREATE INDEX CONCURRENTLY idx_orders_user ON orders(user_id);\n\n-- For unique indexes\nCREATE UNIQUE INDEX CONCURRENTLY idx_users_email ON users(email);\n\n-- Handle failure (concurrent index creation can fail)\n-- Check for invalid indexes\nSELECT * FROM pg_indexes WHERE indexname LIKE '%invalid%';\n-- Drop invalid and retry\nDROP INDEX CONCURRENTLY idx_orders_user_invalid;\nCREATE INDEX CONCURRENTLY idx_orders_user ON orders(user_id);\n```\n\n### Dropping Indexes\n\n```sql\n-- ALWAYS use CONCURRENTLY\nDROP INDEX CONCURRENTLY idx_old_index;\n```\n\n### Table Restructuring\n\n```sql\n-- Create new table\nCREATE TABLE users_new (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  email VARCHAR(255) NOT NULL,\n  name VARCHAR(100),\n  created_at TIMESTAMPTZ DEFAULT NOW()\n);\n\n-- Copy data\nINSERT INTO users_new (id, email, name, created_at)\nSELECT id, email, full_name, created_at FROM users_old;\n\n-- Rename tables\nALTER TABLE users_old RENAME TO users_archive;\nALTER TABLE users_new RENAME TO users;\n\n-- Update foreign keys\nALTER TABLE orders DROP CONSTRAINT fk_orders_user;\nALTER TABLE orders ADD CONSTRAINT fk_orders_user\n  FOREIGN KEY (user_id) REFERENCES users(id);\n```\n\n## Batched Updates\n\n```sql\n-- Update in batches to avoid long locks\nDO $$\nDECLARE\n  batch_size INT := 10000;\n  total_updated INT := 0;\nBEGIN\n  LOOP\n    WITH batch AS (\n      SELECT id FROM users\n      WHERE migrated = false\n      LIMIT batch_size\n      FOR UPDATE SKIP LOCKED\n    )\n    UPDATE users u\n    SET\n      migrated = true,\n      new_field = calculate_value(u.old_field)\n    FROM batch b\n    WHERE u.id = b.id;\n\n    GET DIAGNOSTICS total_updated = ROW_COUNT;\n\n    IF total_updated = 0 THEN\n      EXIT;\n    END IF;\n\n    COMMIT;\n    PERFORM pg_sleep(0.1);  -- Small delay to reduce load\n  END LOOP;\nEND $$;\n```\n\n## Transaction Patterns\n\n```sql\n-- Wrap DDL in transaction (PostgreSQL supports transactional DDL)\nBEGIN;\n  ALTER TABLE users ADD COLUMN phone VARCHAR(20);\n  CREATE INDEX idx_users_phone ON users(phone);\nCOMMIT;\n\n-- Rollback if something goes wrong\nBEGIN;\n  ALTER TABLE users ADD COLUMN temp_field TEXT;\n  -- Oops, wrong type\nROLLBACK;\n```\n\n## Lock Monitoring\n\n```sql\n-- Check for blocking locks\nSELECT\n  blocked.pid AS blocked_pid,\n  blocked.query AS blocked_query,\n  blocking.pid AS blocking_pid,\n  blocking.query AS blocking_query\nFROM pg_stat_activity blocked\nJOIN pg_locks blocked_locks ON blocked.pid = blocked_locks.pid\nJOIN pg_locks blocking_locks ON blocked_locks.locktype = blocking_locks.locktype\n  AND blocked_locks.database IS NOT DISTINCT FROM blocking_locks.database\n  AND blocked_locks.relation IS NOT DISTINCT FROM blocking_locks.relation\n  AND blocked_locks.pid != blocking_locks.pid\nJOIN pg_stat_activity blocking ON blocking_locks.pid = blocking.pid\nWHERE blocked_locks.granted = false\n  AND blocking_locks.granted = true;\n\n-- Set statement timeout to prevent long locks\nSET statement_timeout = '30s';\nALTER TABLE users ADD COLUMN phone VARCHAR(20);\nRESET statement_timeout;\n```\n\n## Migration Scripts\n\n### Up/Down Pattern\n\n```sql\n-- 001_add_users_phone.up.sql\nALTER TABLE users ADD COLUMN phone VARCHAR(20);\n\n-- 001_add_users_phone.down.sql\nALTER TABLE users DROP COLUMN phone;\n```\n\n### Idempotent Migrations\n\n```sql\n-- Check before adding column\nDO $$\nBEGIN\n  IF NOT EXISTS (\n    SELECT 1 FROM information_schema.columns\n    WHERE table_name = 'users' AND column_name = 'phone'\n  ) THEN\n    ALTER TABLE users ADD COLUMN phone VARCHAR(20);\n  END IF;\nEND $$;\n\n-- Check before adding index\nCREATE INDEX IF NOT EXISTS idx_users_phone ON users(phone);\n\n-- Check before adding constraint\nDO $$\nBEGIN\n  IF NOT EXISTS (\n    SELECT 1 FROM pg_constraint WHERE conname = 'chk_users_age'\n  ) THEN\n    ALTER TABLE users ADD CONSTRAINT chk_users_age CHECK (age >= 0);\n  END IF;\nEND $$;\n```\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-postgres/skills/postgres-performance/SKILL.md": "---\nname: postgres-performance\ndescription: PostgreSQL performance tuning and optimization\nuser-invocable: false\n---\n\n# PostgreSQL Performance Skill\n\nPatterns for optimizing PostgreSQL performance.\n\n## Query Analysis\n\n### EXPLAIN ANALYZE\n\n```sql\n-- Basic explain\nEXPLAIN ANALYZE\nSELECT * FROM orders WHERE user_id = 123;\n\n-- With more detail\nEXPLAIN (ANALYZE, BUFFERS, FORMAT TEXT)\nSELECT * FROM orders WHERE user_id = 123;\n\n-- JSON format for tools\nEXPLAIN (ANALYZE, BUFFERS, FORMAT JSON)\nSELECT * FROM orders WHERE user_id = 123;\n```\n\n### Reading Query Plans\n\n```\nKey indicators to watch:\n- Seq Scan: Full table scan (often bad for large tables)\n- Index Scan: Using index (good)\n- Index Only Scan: All data from index (best)\n- Bitmap Heap Scan: Multiple index matches\n- Nested Loop: Good for small tables, bad for large\n- Hash Join: Good for large tables\n- Sort: Watch for \"Sort Method: external\" (disk sort)\n```\n\n### Slow Query Identification\n\n```sql\n-- Enable slow query logging\nALTER SYSTEM SET log_min_duration_statement = 1000; -- 1 second\nSELECT pg_reload_conf();\n\n-- Query pg_stat_statements (requires extension)\nCREATE EXTENSION IF NOT EXISTS pg_stat_statements;\n\nSELECT\n  query,\n  calls,\n  total_exec_time / calls as avg_time,\n  rows / calls as avg_rows\nFROM pg_stat_statements\nORDER BY total_exec_time DESC\nLIMIT 20;\n```\n\n## Connection Pooling\n\n### PgBouncer Configuration\n\n```ini\n# pgbouncer.ini\n[databases]\nmydb = host=localhost dbname=mydb\n\n[pgbouncer]\nlisten_addr = 0.0.0.0\nlisten_port = 6432\nauth_type = md5\nauth_file = /etc/pgbouncer/userlist.txt\npool_mode = transaction\nmax_client_conn = 1000\ndefault_pool_size = 20\n```\n\n### Application-Level Pooling\n\n```typescript\n// With pg-pool\nimport { Pool } from 'pg'\n\nconst pool = new Pool({\n  host: 'localhost',\n  database: 'mydb',\n  max: 20,                    // Max connections\n  idleTimeoutMillis: 30000,   // Close idle connections\n  connectionTimeoutMillis: 2000,\n})\n\n// Use pool\nconst result = await pool.query('SELECT * FROM users WHERE id = $1', [userId])\n```\n\n## Query Optimization\n\n### Avoid SELECT *\n\n```sql\n-- Bad\nSELECT * FROM orders WHERE user_id = 123;\n\n-- Good\nSELECT id, total, status, created_at\nFROM orders\nWHERE user_id = 123;\n```\n\n### Efficient Pagination\n\n```sql\n-- Bad: Offset pagination (slow for large offsets)\nSELECT * FROM products\nORDER BY created_at DESC\nOFFSET 10000 LIMIT 20;\n\n-- Good: Keyset pagination\nSELECT * FROM products\nWHERE created_at < '2024-01-15T10:00:00Z'\nORDER BY created_at DESC\nLIMIT 20;\n\n-- Good: Cursor-based with index\nSELECT * FROM products\nWHERE (created_at, id) < ('2024-01-15T10:00:00Z', 'last-id')\nORDER BY created_at DESC, id DESC\nLIMIT 20;\n```\n\n### Batch Operations\n\n```sql\n-- Instead of multiple single inserts\nINSERT INTO orders (user_id, total) VALUES (1, 100);\nINSERT INTO orders (user_id, total) VALUES (2, 200);\n\n-- Use multi-value insert\nINSERT INTO orders (user_id, total) VALUES\n  (1, 100),\n  (2, 200),\n  (3, 300);\n\n-- Or COPY for bulk inserts\nCOPY orders (user_id, total) FROM '/tmp/orders.csv' WITH CSV;\n```\n\n### EXISTS vs IN\n\n```sql\n-- IN loads all values into memory\nSELECT * FROM users\nWHERE id IN (SELECT user_id FROM orders WHERE total > 1000);\n\n-- EXISTS stops at first match (often faster)\nSELECT * FROM users u\nWHERE EXISTS (\n  SELECT 1 FROM orders o\n  WHERE o.user_id = u.id AND o.total > 1000\n);\n```\n\n## Table Maintenance\n\n### VACUUM\n\n```sql\n-- Regular vacuum (reclaims space, updates stats)\nVACUUM users;\n\n-- Vacuum with analysis\nVACUUM ANALYZE users;\n\n-- Full vacuum (locks table, reclaims all space)\nVACUUM FULL users;\n\n-- Check vacuum status\nSELECT\n  schemaname,\n  relname,\n  last_vacuum,\n  last_autovacuum,\n  vacuum_count,\n  autovacuum_count\nFROM pg_stat_user_tables\nORDER BY last_vacuum DESC NULLS LAST;\n```\n\n### ANALYZE\n\n```sql\n-- Update statistics for query planner\nANALYZE users;\n\n-- Analyze specific columns\nANALYZE users (email, status);\n\n-- Check statistics\nSELECT\n  attname,\n  null_frac,\n  n_distinct,\n  correlation\nFROM pg_stats\nWHERE tablename = 'users';\n```\n\n### Table Bloat\n\n```sql\n-- Check table bloat\nSELECT\n  schemaname,\n  tablename,\n  pg_size_pretty(pg_total_relation_size(schemaname || '.' || tablename)) as total_size,\n  pg_size_pretty(pg_relation_size(schemaname || '.' || tablename)) as table_size\nFROM pg_tables\nWHERE schemaname = 'public'\nORDER BY pg_total_relation_size(schemaname || '.' || tablename) DESC;\n\n-- Estimate dead tuples\nSELECT\n  relname,\n  n_live_tup,\n  n_dead_tup,\n  round(n_dead_tup::numeric / nullif(n_live_tup + n_dead_tup, 0) * 100, 2) as dead_pct\nFROM pg_stat_user_tables\nWHERE n_dead_tup > 0\nORDER BY n_dead_tup DESC;\n```\n\n## Configuration Tuning\n\n### Memory Settings\n\n```sql\n-- Check current settings\nSHOW shared_buffers;      -- Cache for table data (25% of RAM)\nSHOW effective_cache_size; -- Estimate of OS cache (50-75% of RAM)\nSHOW work_mem;            -- Memory for sorts/hashes (per operation)\nSHOW maintenance_work_mem; -- Memory for maintenance operations\n\n-- Recommended settings for 16GB RAM server\nALTER SYSTEM SET shared_buffers = '4GB';\nALTER SYSTEM SET effective_cache_size = '12GB';\nALTER SYSTEM SET work_mem = '64MB';\nALTER SYSTEM SET maintenance_work_mem = '1GB';\n```\n\n### Checkpoint Settings\n\n```sql\n-- Spread checkpoint writes\nALTER SYSTEM SET checkpoint_completion_target = 0.9;\nALTER SYSTEM SET max_wal_size = '4GB';\n```\n\n### Parallel Queries\n\n```sql\n-- Enable parallel queries\nALTER SYSTEM SET max_parallel_workers_per_gather = 4;\nALTER SYSTEM SET max_parallel_maintenance_workers = 2;\nALTER SYSTEM SET parallel_tuple_cost = 0.01;\nALTER SYSTEM SET parallel_setup_cost = 100;\n```\n\n## Monitoring\n\n### Active Queries\n\n```sql\n-- View active queries\nSELECT\n  pid,\n  age(clock_timestamp(), query_start) as duration,\n  usename,\n  query,\n  state\nFROM pg_stat_activity\nWHERE state != 'idle'\n  AND query NOT LIKE '%pg_stat_activity%'\nORDER BY query_start;\n\n-- Kill long-running query\nSELECT pg_cancel_backend(pid);  -- Gentle\nSELECT pg_terminate_backend(pid); -- Force\n```\n\n### Table Statistics\n\n```sql\n-- Table access patterns\nSELECT\n  schemaname,\n  relname,\n  seq_scan,\n  seq_tup_read,\n  idx_scan,\n  idx_tup_fetch,\n  n_tup_ins,\n  n_tup_upd,\n  n_tup_del\nFROM pg_stat_user_tables\nORDER BY seq_scan DESC;\n```\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-postgres/skills/postgres-queries/SKILL.md": "---\nname: postgres-queries\ndescription: PostgreSQL query patterns and best practices\nuser-invocable: false\n---\n\n# PostgreSQL Queries Skill\n\nPatterns for writing effective PostgreSQL queries.\n\n## Basic Queries\n\n### SELECT Patterns\n\n```sql\n-- Select with conditions\nSELECT id, name, email\nFROM users\nWHERE status = 'active'\n  AND created_at > NOW() - INTERVAL '30 days'\nORDER BY created_at DESC\nLIMIT 10;\n\n-- Select with joins\nSELECT\n  u.id,\n  u.name,\n  COUNT(o.id) as order_count,\n  SUM(o.total) as total_spent\nFROM users u\nLEFT JOIN orders o ON o.user_id = u.id\nWHERE u.status = 'active'\nGROUP BY u.id, u.name\nHAVING COUNT(o.id) > 0\nORDER BY total_spent DESC;\n```\n\n### INSERT Patterns\n\n```sql\n-- Single insert with returning\nINSERT INTO users (name, email, status)\nVALUES ('John Doe', 'john@example.com', 'active')\nRETURNING id, created_at;\n\n-- Multi-row insert\nINSERT INTO users (name, email, status)\nVALUES\n  ('User 1', 'user1@example.com', 'active'),\n  ('User 2', 'user2@example.com', 'pending'),\n  ('User 3', 'user3@example.com', 'active')\nRETURNING *;\n\n-- Insert with conflict handling (upsert)\nINSERT INTO users (email, name, status)\nVALUES ('john@example.com', 'John Doe', 'active')\nON CONFLICT (email)\nDO UPDATE SET\n  name = EXCLUDED.name,\n  updated_at = NOW()\nRETURNING *;\n```\n\n### UPDATE Patterns\n\n```sql\n-- Update with conditions\nUPDATE users\nSET\n  status = 'inactive',\n  updated_at = NOW()\nWHERE last_login_at < NOW() - INTERVAL '1 year'\nRETURNING id, email;\n\n-- Update from another table\nUPDATE orders o\nSET status = 'shipped'\nFROM shipments s\nWHERE s.order_id = o.id\n  AND s.shipped_at IS NOT NULL;\n\n-- Conditional update\nUPDATE products\nSET\n  price = CASE\n    WHEN category = 'electronics' THEN price * 0.9\n    WHEN category = 'clothing' THEN price * 0.8\n    ELSE price\n  END,\n  updated_at = NOW()\nWHERE on_sale = true;\n```\n\n### DELETE Patterns\n\n```sql\n-- Delete with returning\nDELETE FROM sessions\nWHERE expires_at < NOW()\nRETURNING id, user_id;\n\n-- Delete using subquery\nDELETE FROM users\nWHERE id IN (\n  SELECT user_id\n  FROM inactive_users\n  WHERE days_inactive > 365\n);\n```\n\n## Advanced Queries\n\n### Common Table Expressions (CTE)\n\n```sql\n-- Simple CTE\nWITH active_users AS (\n  SELECT * FROM users WHERE status = 'active'\n)\nSELECT u.*, COUNT(o.id) as order_count\nFROM active_users u\nLEFT JOIN orders o ON o.user_id = u.id\nGROUP BY u.id;\n\n-- Recursive CTE for hierarchical data\nWITH RECURSIVE category_tree AS (\n  -- Base case\n  SELECT id, name, parent_id, 0 as level\n  FROM categories\n  WHERE parent_id IS NULL\n\n  UNION ALL\n\n  -- Recursive case\n  SELECT c.id, c.name, c.parent_id, ct.level + 1\n  FROM categories c\n  INNER JOIN category_tree ct ON c.parent_id = ct.id\n)\nSELECT * FROM category_tree ORDER BY level, name;\n```\n\n### Window Functions\n\n```sql\n-- Row number\nSELECT\n  id,\n  name,\n  department,\n  salary,\n  ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) as rank\nFROM employees;\n\n-- Running totals\nSELECT\n  date,\n  amount,\n  SUM(amount) OVER (ORDER BY date) as running_total\nFROM transactions;\n\n-- Moving average\nSELECT\n  date,\n  value,\n  AVG(value) OVER (ORDER BY date ROWS BETWEEN 6 PRECEDING AND CURRENT ROW) as weekly_avg\nFROM metrics;\n\n-- Lead/Lag\nSELECT\n  id,\n  sale_date,\n  amount,\n  amount - LAG(amount) OVER (ORDER BY sale_date) as change_from_previous\nFROM sales;\n```\n\n### JSONB Operations\n\n```sql\n-- Query JSONB field\nSELECT * FROM products\nWHERE metadata->>'color' = 'red';\n\n-- Query nested JSONB\nSELECT * FROM products\nWHERE metadata->'dimensions'->>'height' > '10';\n\n-- JSONB contains\nSELECT * FROM products\nWHERE metadata @> '{\"featured\": true}';\n\n-- JSONB array contains\nSELECT * FROM products\nWHERE metadata->'tags' ? 'sale';\n\n-- Update JSONB\nUPDATE products\nSET metadata = jsonb_set(metadata, '{stock}', '100')\nWHERE id = 1;\n\n-- Aggregate to JSONB\nSELECT\n  user_id,\n  jsonb_agg(\n    jsonb_build_object(\n      'id', id,\n      'title', title,\n      'date', created_at\n    )\n  ) as posts\nFROM posts\nGROUP BY user_id;\n```\n\n### Full-Text Search\n\n```sql\n-- Create tsvector column\nALTER TABLE articles ADD COLUMN search_vector tsvector;\n\nUPDATE articles SET search_vector =\n  to_tsvector('english', coalesce(title, '') || ' ' || coalesce(body, ''));\n\n-- Create GIN index\nCREATE INDEX idx_articles_search ON articles USING GIN(search_vector);\n\n-- Search query\nSELECT\n  id,\n  title,\n  ts_rank(search_vector, query) as rank\nFROM articles, to_tsquery('english', 'database & performance') query\nWHERE search_vector @@ query\nORDER BY rank DESC;\n\n-- Highlight results\nSELECT\n  id,\n  ts_headline('english', body, to_tsquery('english', 'postgresql'),\n    'StartSel=<mark>, StopSel=</mark>') as highlighted\nFROM articles\nWHERE search_vector @@ to_tsquery('english', 'postgresql');\n```\n\n## Array Operations\n\n```sql\n-- Array contains\nSELECT * FROM products\nWHERE 'electronics' = ANY(categories);\n\n-- Array overlap\nSELECT * FROM products\nWHERE categories && ARRAY['electronics', 'computers'];\n\n-- Unnest array\nSELECT\n  id,\n  unnest(tags) as tag\nFROM articles;\n\n-- Aggregate to array\nSELECT\n  user_id,\n  array_agg(DISTINCT category ORDER BY category) as categories\nFROM purchases\nGROUP BY user_id;\n```\n\n## Date/Time Operations\n\n```sql\n-- Date truncation\nSELECT\n  date_trunc('day', created_at) as day,\n  COUNT(*) as count\nFROM orders\nGROUP BY date_trunc('day', created_at)\nORDER BY day;\n\n-- Date ranges\nSELECT * FROM events\nWHERE event_date BETWEEN '2024-01-01' AND '2024-12-31';\n\n-- Age calculation\nSELECT\n  name,\n  birth_date,\n  EXTRACT(YEAR FROM age(birth_date)) as age\nFROM users;\n\n-- Generate series\nSELECT\n  date::date,\n  COALESCE(COUNT(o.id), 0) as order_count\nFROM generate_series(\n  '2024-01-01'::date,\n  '2024-01-31'::date,\n  '1 day'::interval\n) as date\nLEFT JOIN orders o ON date_trunc('day', o.created_at) = date\nGROUP BY date\nORDER BY date;\n```\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-prisma/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-prisma\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Prisma ORM patterns - schema design, queries, migrations, relations\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"prisma\", \"orm\", \"database\", \"schema\", \"migrations\"]\n}\n",
        "plugins/aai-stack-prisma/skills/prisma-migrations/SKILL.md": "---\nname: prisma-migrations\ndescription: Prisma migration workflow patterns\nuser-invocable: false\n---\n\n# Prisma Migrations Skill\n\nPatterns for managing database migrations with Prisma.\n\n## Migration Workflow\n\n### Development Flow\n\n```bash\n# Create and apply migration\nnpx prisma migrate dev --name add_user_role\n\n# Create migration without applying (for review)\nnpx prisma migrate dev --create-only --name add_phone\n\n# Apply pending migrations\nnpx prisma migrate dev\n\n# Reset database (drops and recreates)\nnpx prisma migrate reset\n```\n\n### Production Flow\n\n```bash\n# Apply migrations in production\nnpx prisma migrate deploy\n\n# Check migration status\nnpx prisma migrate status\n\n# Resolve migration issues\nnpx prisma migrate resolve --applied \"migration_name\"\nnpx prisma migrate resolve --rolled-back \"migration_name\"\n```\n\n## Schema Changes\n\n### Adding Fields\n\n```prisma\n// Before\nmodel User {\n  id    String @id @default(uuid())\n  email String @unique\n}\n\n// After - add optional field\nmodel User {\n  id    String  @id @default(uuid())\n  email String  @unique\n  phone String?  // Nullable, no migration issue\n}\n\n// After - add required field with default\nmodel User {\n  id     String @id @default(uuid())\n  email  String @unique\n  status String @default(\"active\")  // Has default\n}\n```\n\n### Renaming Fields\n\n```prisma\n// Step 1: Add new field\nmodel User {\n  id       String @id @default(uuid())\n  name     String   // Old field\n  fullName String?  // New field (nullable initially)\n}\n\n// Step 2: Run data migration (in code or SQL)\n// UPDATE users SET full_name = name;\n\n// Step 3: Make new field required, drop old\nmodel User {\n  id       String @id @default(uuid())\n  fullName String  // Now required\n}\n```\n\n### Changing Field Types\n\n```prisma\n// Be careful - may lose data!\n// Before\nmodel Product {\n  price Int  // Cents\n}\n\n// After\nmodel Product {\n  price Decimal @db.Decimal(10, 2)  // Dollars\n}\n\n// Better: Add migration script to convert\n// migration.sql will need manual editing\n```\n\n### Adding Relations\n\n```prisma\n// Step 1: Add optional relation\nmodel Post {\n  id         String @id @default(uuid())\n  categoryId String?\n  category   Category? @relation(fields: [categoryId], references: [id])\n}\n\n// Step 2: Backfill data\n\n// Step 3: Make required (if needed)\nmodel Post {\n  id         String   @id @default(uuid())\n  categoryId String\n  category   Category @relation(fields: [categoryId], references: [id])\n}\n```\n\n## Data Migrations\n\n### In Migration SQL\n\n```sql\n-- migrations/20240115_add_user_role/migration.sql\n\n-- Add column\nALTER TABLE \"User\" ADD COLUMN \"role\" TEXT NOT NULL DEFAULT 'USER';\n\n-- Backfill existing data\nUPDATE \"User\" SET \"role\" = 'ADMIN' WHERE \"email\" LIKE '%@admin.com';\n```\n\n### Using Prisma Script\n\n```typescript\n// prisma/seed.ts or separate migration script\nimport { PrismaClient } from '@prisma/client'\n\nconst prisma = new PrismaClient()\n\nasync function main() {\n  // Batch update\n  await prisma.user.updateMany({\n    where: {\n      role: null,\n    },\n    data: {\n      role: 'USER',\n    },\n  })\n\n  // Complex migration with transactions\n  await prisma.$transaction(async (tx) => {\n    const users = await tx.user.findMany({\n      where: { legacyField: { not: null } },\n    })\n\n    for (const user of users) {\n      await tx.user.update({\n        where: { id: user.id },\n        data: {\n          newField: transformData(user.legacyField),\n        },\n      })\n    }\n  })\n}\n\nmain()\n```\n\n## Baselining Existing Database\n\n```bash\n# Create baseline migration from existing database\nnpx prisma migrate diff \\\n  --from-empty \\\n  --to-schema-datamodel prisma/schema.prisma \\\n  --script > prisma/migrations/0_init/migration.sql\n\n# Mark as applied\nnpx prisma migrate resolve --applied 0_init\n```\n\n## Migration Best Practices\n\n### Safe Migration Pattern\n\n```bash\n# 1. Pull current schema\nnpx prisma db pull\n\n# 2. Make schema changes in schema.prisma\n\n# 3. Create migration (review before applying)\nnpx prisma migrate dev --create-only --name descriptive_name\n\n# 4. Review generated SQL\ncat prisma/migrations/*/migration.sql\n\n# 5. Apply if looks good\nnpx prisma migrate dev\n```\n\n### Handling Failed Migrations\n\n```bash\n# If migration failed partially\nnpx prisma migrate resolve --rolled-back \"migration_name\"\n\n# Fix the migration SQL\nvi prisma/migrations/*/migration.sql\n\n# Re-apply\nnpx prisma migrate deploy\n```\n\n## Seeding\n\n### Basic Seed\n\n```typescript\n// prisma/seed.ts\nimport { PrismaClient } from '@prisma/client'\n\nconst prisma = new PrismaClient()\n\nasync function main() {\n  await prisma.user.upsert({\n    where: { email: 'admin@example.com' },\n    update: {},\n    create: {\n      email: 'admin@example.com',\n      name: 'Admin',\n      role: 'ADMIN',\n    },\n  })\n}\n\nmain()\n  .catch((e) => {\n    console.error(e)\n    process.exit(1)\n  })\n  .finally(async () => {\n    await prisma.$disconnect()\n  })\n```\n\n```json\n// package.json\n{\n  \"prisma\": {\n    \"seed\": \"ts-node prisma/seed.ts\"\n  }\n}\n```\n\n### Running Seeds\n\n```bash\n# Run seed\nnpx prisma db seed\n\n# Seed runs automatically with migrate reset\nnpx prisma migrate reset\n```\n\n## Schema Introspection\n\n```bash\n# Pull schema from existing database\nnpx prisma db pull\n\n# Push schema changes without migrations\nnpx prisma db push\n```\n\n## Migration File Structure\n\n```\nprisma/\n schema.prisma\n migrations/\n    20240101000000_init/\n       migration.sql\n    20240115120000_add_user_role/\n       migration.sql\n    migration_lock.toml\n seed.ts\n```\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-prisma/skills/prisma-queries/SKILL.md": "---\nname: prisma-queries\ndescription: Prisma Client query patterns\nuser-invocable: false\n---\n\n# Prisma Queries Skill\n\nPatterns for querying data with Prisma Client.\n\n## Basic CRUD\n\n### Create\n\n```typescript\n// Create single record\nconst user = await prisma.user.create({\n  data: {\n    email: 'john@example.com',\n    name: 'John Doe',\n  },\n})\n\n// Create with relations\nconst user = await prisma.user.create({\n  data: {\n    email: 'john@example.com',\n    profile: {\n      create: { bio: 'Hello!' },\n    },\n    posts: {\n      create: [\n        { title: 'First Post' },\n        { title: 'Second Post' },\n      ],\n    },\n  },\n  include: {\n    profile: true,\n    posts: true,\n  },\n})\n\n// Create many\nconst users = await prisma.user.createMany({\n  data: [\n    { email: 'user1@example.com' },\n    { email: 'user2@example.com' },\n  ],\n  skipDuplicates: true,\n})\n```\n\n### Read\n\n```typescript\n// Find by ID\nconst user = await prisma.user.findUnique({\n  where: { id: userId },\n})\n\n// Find by unique field\nconst user = await prisma.user.findUnique({\n  where: { email: 'john@example.com' },\n})\n\n// Find first matching\nconst user = await prisma.user.findFirst({\n  where: { role: 'ADMIN' },\n})\n\n// Find many with conditions\nconst users = await prisma.user.findMany({\n  where: {\n    role: 'USER',\n    createdAt: { gte: new Date('2024-01-01') },\n  },\n  orderBy: { createdAt: 'desc' },\n  take: 10,\n  skip: 0,\n})\n\n// Find or throw\nconst user = await prisma.user.findUniqueOrThrow({\n  where: { id: userId },\n})\n```\n\n### Update\n\n```typescript\n// Update by ID\nconst user = await prisma.user.update({\n  where: { id: userId },\n  data: { name: 'New Name' },\n})\n\n// Update many\nconst result = await prisma.user.updateMany({\n  where: { role: 'GUEST' },\n  data: { role: 'USER' },\n})\n\n// Upsert (create or update)\nconst user = await prisma.user.upsert({\n  where: { email: 'john@example.com' },\n  update: { name: 'John' },\n  create: { email: 'john@example.com', name: 'John' },\n})\n```\n\n### Delete\n\n```typescript\n// Delete by ID\nconst user = await prisma.user.delete({\n  where: { id: userId },\n})\n\n// Delete many\nconst result = await prisma.user.deleteMany({\n  where: { role: 'INACTIVE' },\n})\n```\n\n## Filtering\n\n### Comparison Operators\n\n```typescript\nconst users = await prisma.user.findMany({\n  where: {\n    age: { equals: 30 },\n    age: { not: 30 },\n    age: { gt: 18 },\n    age: { gte: 18 },\n    age: { lt: 65 },\n    age: { lte: 65 },\n    age: { in: [18, 21, 30] },\n    age: { notIn: [0, 1] },\n  },\n})\n```\n\n### String Filters\n\n```typescript\nconst users = await prisma.user.findMany({\n  where: {\n    name: { contains: 'john' },\n    name: { startsWith: 'J' },\n    name: { endsWith: 'Doe' },\n    email: { mode: 'insensitive' },  // Case-insensitive\n  },\n})\n```\n\n### Logical Operators\n\n```typescript\nconst users = await prisma.user.findMany({\n  where: {\n    AND: [\n      { role: 'USER' },\n      { active: true },\n    ],\n  },\n})\n\nconst users = await prisma.user.findMany({\n  where: {\n    OR: [\n      { role: 'ADMIN' },\n      { role: 'MODERATOR' },\n    ],\n  },\n})\n\nconst users = await prisma.user.findMany({\n  where: {\n    NOT: { role: 'GUEST' },\n  },\n})\n```\n\n### Relation Filters\n\n```typescript\n// Filter by related records\nconst users = await prisma.user.findMany({\n  where: {\n    posts: {\n      some: { published: true },\n    },\n  },\n})\n\nconst users = await prisma.user.findMany({\n  where: {\n    posts: {\n      every: { published: true },\n    },\n  },\n})\n\nconst users = await prisma.user.findMany({\n  where: {\n    posts: {\n      none: { published: false },\n    },\n  },\n})\n\n// Count related\nconst users = await prisma.user.findMany({\n  where: {\n    posts: {\n      some: {},\n    },\n    _count: {\n      posts: { gt: 5 },\n    },\n  },\n})\n```\n\n## Relations\n\n### Include\n\n```typescript\n// Include related records\nconst user = await prisma.user.findUnique({\n  where: { id: userId },\n  include: {\n    posts: true,\n    profile: true,\n  },\n})\n\n// Nested include\nconst user = await prisma.user.findUnique({\n  where: { id: userId },\n  include: {\n    posts: {\n      include: {\n        comments: true,\n      },\n    },\n  },\n})\n\n// Filter included relations\nconst user = await prisma.user.findUnique({\n  where: { id: userId },\n  include: {\n    posts: {\n      where: { published: true },\n      orderBy: { createdAt: 'desc' },\n      take: 5,\n    },\n  },\n})\n```\n\n### Select\n\n```typescript\n// Select specific fields\nconst user = await prisma.user.findUnique({\n  where: { id: userId },\n  select: {\n    id: true,\n    email: true,\n    posts: {\n      select: {\n        id: true,\n        title: true,\n      },\n    },\n  },\n})\n```\n\n### Relation Count\n\n```typescript\nconst users = await prisma.user.findMany({\n  include: {\n    _count: {\n      select: {\n        posts: true,\n        followers: true,\n      },\n    },\n  },\n})\n```\n\n## Aggregation\n\n### Count\n\n```typescript\nconst count = await prisma.user.count({\n  where: { role: 'USER' },\n})\n```\n\n### Aggregate\n\n```typescript\nconst result = await prisma.order.aggregate({\n  _count: { _all: true },\n  _sum: { total: true },\n  _avg: { total: true },\n  _min: { total: true },\n  _max: { total: true },\n  where: { status: 'COMPLETED' },\n})\n```\n\n### Group By\n\n```typescript\nconst result = await prisma.order.groupBy({\n  by: ['status'],\n  _count: { _all: true },\n  _sum: { total: true },\n  orderBy: {\n    _count: { _all: 'desc' },\n  },\n})\n\n// With having\nconst result = await prisma.order.groupBy({\n  by: ['userId'],\n  _sum: { total: true },\n  having: {\n    total: { _sum: { gt: 1000 } },\n  },\n})\n```\n\n## Transactions\n\n```typescript\n// Interactive transaction\nconst result = await prisma.$transaction(async (tx) => {\n  const user = await tx.user.create({\n    data: { email: 'new@example.com' },\n  })\n\n  await tx.profile.create({\n    data: { userId: user.id, bio: 'Hello' },\n  })\n\n  return user\n})\n\n// Batch transaction\nconst [user, post] = await prisma.$transaction([\n  prisma.user.create({ data: { email: 'new@example.com' } }),\n  prisma.post.create({ data: { title: 'New Post', authorId: 'existing-id' } }),\n])\n```\n\n## Raw Queries\n\n```typescript\n// Raw query\nconst users = await prisma.$queryRaw`\n  SELECT * FROM users WHERE role = ${role}\n`\n\n// Raw execute\nawait prisma.$executeRaw`\n  UPDATE users SET status = 'active' WHERE id = ${userId}\n`\n```\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-prisma/skills/prisma-relations/SKILL.md": "---\nname: prisma-relations\ndescription: Prisma relation modeling patterns\nuser-invocable: false\n---\n\n# Prisma Relations Skill\n\nPatterns for modeling relationships in Prisma.\n\n## One-to-One Relations\n\n### Basic One-to-One\n\n```prisma\nmodel User {\n  id      String   @id @default(uuid())\n  email   String   @unique\n  profile Profile?\n}\n\nmodel Profile {\n  id     String @id @default(uuid())\n  bio    String?\n  avatar String?\n  userId String @unique\n  user   User   @relation(fields: [userId], references: [id])\n}\n```\n\n### Queries\n\n```typescript\n// Create with relation\nconst user = await prisma.user.create({\n  data: {\n    email: 'john@example.com',\n    profile: {\n      create: { bio: 'Hello world' },\n    },\n  },\n  include: { profile: true },\n})\n\n// Update nested\nawait prisma.user.update({\n  where: { id: userId },\n  data: {\n    profile: {\n      upsert: {\n        create: { bio: 'New bio' },\n        update: { bio: 'Updated bio' },\n      },\n    },\n  },\n})\n\n// Delete relation\nawait prisma.user.update({\n  where: { id: userId },\n  data: {\n    profile: { delete: true },\n  },\n})\n```\n\n## One-to-Many Relations\n\n### Basic One-to-Many\n\n```prisma\nmodel User {\n  id    String @id @default(uuid())\n  posts Post[]\n}\n\nmodel Post {\n  id       String @id @default(uuid())\n  title    String\n  authorId String\n  author   User   @relation(fields: [authorId], references: [id])\n\n  @@index([authorId])\n}\n```\n\n### Queries\n\n```typescript\n// Create with multiple related\nconst user = await prisma.user.create({\n  data: {\n    email: 'author@example.com',\n    posts: {\n      create: [\n        { title: 'Post 1' },\n        { title: 'Post 2' },\n      ],\n    },\n  },\n  include: { posts: true },\n})\n\n// Add to existing relation\nawait prisma.post.create({\n  data: {\n    title: 'New Post',\n    author: {\n      connect: { id: userId },\n    },\n  },\n})\n\n// Update relation\nawait prisma.user.update({\n  where: { id: userId },\n  data: {\n    posts: {\n      create: { title: 'Another Post' },\n      updateMany: {\n        where: { published: false },\n        data: { published: true },\n      },\n    },\n  },\n})\n\n// Filter by relation\nconst users = await prisma.user.findMany({\n  where: {\n    posts: {\n      some: { published: true },\n    },\n  },\n})\n```\n\n## Many-to-Many Relations\n\n### Implicit Many-to-Many\n\n```prisma\nmodel Post {\n  id         String     @id @default(uuid())\n  title      String\n  categories Category[]\n}\n\nmodel Category {\n  id    String @id @default(uuid())\n  name  String @unique\n  posts Post[]\n}\n```\n\n```typescript\n// Create with connections\nconst post = await prisma.post.create({\n  data: {\n    title: 'My Post',\n    categories: {\n      connect: [\n        { id: 'category-1' },\n        { id: 'category-2' },\n      ],\n    },\n  },\n})\n\n// Connect or create\nconst post = await prisma.post.create({\n  data: {\n    title: 'My Post',\n    categories: {\n      connectOrCreate: [\n        {\n          where: { name: 'Tech' },\n          create: { name: 'Tech' },\n        },\n      ],\n    },\n  },\n})\n\n// Set (replace all)\nawait prisma.post.update({\n  where: { id: postId },\n  data: {\n    categories: {\n      set: [{ id: 'category-1' }],\n    },\n  },\n})\n\n// Disconnect\nawait prisma.post.update({\n  where: { id: postId },\n  data: {\n    categories: {\n      disconnect: [{ id: 'category-2' }],\n    },\n  },\n})\n```\n\n### Explicit Many-to-Many (Join Table)\n\n```prisma\nmodel Post {\n  id   String    @id @default(uuid())\n  tags PostTag[]\n}\n\nmodel Tag {\n  id    String    @id @default(uuid())\n  name  String    @unique\n  posts PostTag[]\n}\n\nmodel PostTag {\n  postId    String\n  tagId     String\n  createdAt DateTime @default(now())\n  createdBy String?\n\n  post Post @relation(fields: [postId], references: [id], onDelete: Cascade)\n  tag  Tag  @relation(fields: [tagId], references: [id], onDelete: Cascade)\n\n  @@id([postId, tagId])\n}\n```\n\n```typescript\n// Create with join table data\nawait prisma.postTag.create({\n  data: {\n    post: { connect: { id: postId } },\n    tag: { connect: { id: tagId } },\n    createdBy: userId,\n  },\n})\n\n// Query with join table data\nconst posts = await prisma.post.findMany({\n  include: {\n    tags: {\n      include: { tag: true },\n    },\n  },\n})\n```\n\n## Self-Relations\n\n### Parent-Child (Tree)\n\n```prisma\nmodel Category {\n  id       String     @id @default(uuid())\n  name     String\n  parentId String?\n  parent   Category?  @relation(\"CategoryTree\", fields: [parentId], references: [id])\n  children Category[] @relation(\"CategoryTree\")\n}\n```\n\n```typescript\n// Create hierarchy\nconst parent = await prisma.category.create({\n  data: {\n    name: 'Electronics',\n    children: {\n      create: [\n        { name: 'Phones' },\n        { name: 'Laptops' },\n      ],\n    },\n  },\n  include: { children: true },\n})\n\n// Get with nested children (recursive requires raw query or multiple queries)\nconst category = await prisma.category.findUnique({\n  where: { id: categoryId },\n  include: {\n    children: {\n      include: {\n        children: true,\n      },\n    },\n  },\n})\n```\n\n### Following/Followers\n\n```prisma\nmodel User {\n  id          String @id @default(uuid())\n  name        String\n  followedBy  User[] @relation(\"UserFollows\")\n  following   User[] @relation(\"UserFollows\")\n}\n```\n\n```typescript\n// Follow user\nawait prisma.user.update({\n  where: { id: currentUserId },\n  data: {\n    following: {\n      connect: { id: targetUserId },\n    },\n  },\n})\n\n// Get followers\nconst user = await prisma.user.findUnique({\n  where: { id: userId },\n  include: {\n    followedBy: { select: { id: true, name: true } },\n    following: { select: { id: true, name: true } },\n  },\n})\n```\n\n## Cascade Operations\n\n```prisma\nmodel User {\n  id    String @id @default(uuid())\n  posts Post[]\n}\n\nmodel Post {\n  id       String    @id @default(uuid())\n  authorId String\n  author   User      @relation(fields: [authorId], references: [id], onDelete: Cascade)\n  comments Comment[]\n}\n\nmodel Comment {\n  id     String @id @default(uuid())\n  postId String\n  post   Post   @relation(fields: [postId], references: [id], onDelete: Cascade)\n}\n```\n\n```typescript\n// Deleting user cascades to posts, which cascade to comments\nawait prisma.user.delete({\n  where: { id: userId },\n})\n```\n\n## Relation Loading Strategies\n\n```typescript\n// Include (eager load)\nconst user = await prisma.user.findUnique({\n  where: { id: userId },\n  include: { posts: true },\n})\n\n// Select specific relation fields\nconst user = await prisma.user.findUnique({\n  where: { id: userId },\n  select: {\n    id: true,\n    posts: { select: { id: true, title: true } },\n  },\n})\n\n// Separate queries (for large relations)\nconst user = await prisma.user.findUnique({ where: { id: userId } })\nconst posts = await prisma.post.findMany({ where: { authorId: userId } })\n```\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-prisma/skills/prisma-schema/SKILL.md": "---\nname: prisma-schema\ndescription: Prisma schema design patterns\nuser-invocable: false\n---\n\n# Prisma Schema Skill\n\nPatterns for designing Prisma schemas.\n\n## Basic Schema Structure\n\n### Model Definition\n\n```prisma\nmodel User {\n  id        String   @id @default(uuid())\n  email     String   @unique\n  name      String?\n  role      Role     @default(USER)\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  posts    Post[]\n  profile  Profile?\n  sessions Session[]\n\n  @@index([email])\n  @@map(\"users\")\n}\n\nenum Role {\n  USER\n  ADMIN\n  MODERATOR\n}\n```\n\n### Field Types\n\n```prisma\nmodel Example {\n  // Scalar types\n  id        String   @id @default(uuid())\n  name      String\n  bio       String?  // Optional\n  age       Int\n  price     Float\n  active    Boolean  @default(true)\n  count     BigInt\n\n  // Dates\n  createdAt DateTime  @default(now())\n  updatedAt DateTime  @updatedAt\n  deletedAt DateTime?\n\n  // Database-specific\n  data      Json\n  content   String   @db.Text\n  amount    Decimal  @db.Decimal(10, 2)\n  metadata  Bytes\n}\n```\n\n### ID Strategies\n\n```prisma\n// UUID (recommended for distributed systems)\nmodel User {\n  id String @id @default(uuid())\n}\n\n// CUID (shorter, URL-safe)\nmodel Post {\n  id String @id @default(cuid())\n}\n\n// Auto-increment\nmodel Legacy {\n  id Int @id @default(autoincrement())\n}\n\n// Composite ID\nmodel OrderItem {\n  orderId   String\n  productId String\n\n  @@id([orderId, productId])\n}\n```\n\n## Relationships\n\n### One-to-One\n\n```prisma\nmodel User {\n  id      String   @id @default(uuid())\n  profile Profile?\n}\n\nmodel Profile {\n  id     String @id @default(uuid())\n  bio    String?\n  userId String @unique\n  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)\n}\n```\n\n### One-to-Many\n\n```prisma\nmodel User {\n  id    String @id @default(uuid())\n  posts Post[]\n}\n\nmodel Post {\n  id       String @id @default(uuid())\n  title    String\n  authorId String\n  author   User   @relation(fields: [authorId], references: [id])\n\n  @@index([authorId])\n}\n```\n\n### Many-to-Many (Implicit)\n\n```prisma\nmodel Post {\n  id         String     @id @default(uuid())\n  title      String\n  categories Category[]\n}\n\nmodel Category {\n  id    String @id @default(uuid())\n  name  String\n  posts Post[]\n}\n```\n\n### Many-to-Many (Explicit)\n\n```prisma\nmodel Post {\n  id   String     @id @default(uuid())\n  tags PostTag[]\n}\n\nmodel Tag {\n  id    String    @id @default(uuid())\n  name  String    @unique\n  posts PostTag[]\n}\n\nmodel PostTag {\n  postId    String\n  tagId     String\n  createdAt DateTime @default(now())\n\n  post Post @relation(fields: [postId], references: [id], onDelete: Cascade)\n  tag  Tag  @relation(fields: [tagId], references: [id], onDelete: Cascade)\n\n  @@id([postId, tagId])\n}\n```\n\n### Self-Relations\n\n```prisma\nmodel Category {\n  id       String     @id @default(uuid())\n  name     String\n  parentId String?\n  parent   Category?  @relation(\"CategoryHierarchy\", fields: [parentId], references: [id])\n  children Category[] @relation(\"CategoryHierarchy\")\n}\n\nmodel User {\n  id          String @id @default(uuid())\n  followedBy  User[] @relation(\"UserFollows\")\n  following   User[] @relation(\"UserFollows\")\n}\n```\n\n## Constraints and Indexes\n\n### Unique Constraints\n\n```prisma\nmodel User {\n  id    String @id @default(uuid())\n  email String @unique\n\n  // Compound unique\n  @@unique([organizationId, email])\n}\n```\n\n### Indexes\n\n```prisma\nmodel Post {\n  id        String   @id @default(uuid())\n  authorId  String\n  status    String\n  createdAt DateTime @default(now())\n\n  // Single column index\n  @@index([authorId])\n\n  // Compound index\n  @@index([status, createdAt])\n\n  // Named index\n  @@index([authorId], name: \"post_author_idx\")\n}\n```\n\n### Full-Text Search Index\n\n```prisma\nmodel Article {\n  id      String @id @default(uuid())\n  title   String\n  content String\n\n  @@fulltext([title, content])\n}\n```\n\n## Referential Actions\n\n```prisma\nmodel Post {\n  id       String @id @default(uuid())\n  authorId String\n  author   User   @relation(fields: [authorId], references: [id], onDelete: Cascade)\n\n  // Options:\n  // Cascade - Delete related records\n  // SetNull - Set FK to null (requires optional field)\n  // Restrict - Prevent deletion\n  // NoAction - Database handles it\n  // SetDefault - Set to default value\n}\n```\n\n## Multi-Tenancy\n\n```prisma\nmodel Organization {\n  id    String @id @default(uuid())\n  name  String\n  users User[]\n  posts Post[]\n}\n\nmodel User {\n  id             String       @id @default(uuid())\n  email          String\n  organizationId String\n  organization   Organization @relation(fields: [organizationId], references: [id])\n\n  @@unique([organizationId, email])\n  @@index([organizationId])\n}\n\nmodel Post {\n  id             String       @id @default(uuid())\n  organizationId String\n  organization   Organization @relation(fields: [organizationId], references: [id])\n\n  @@index([organizationId])\n}\n```\n\n## Soft Delete Pattern\n\n```prisma\nmodel Post {\n  id        String    @id @default(uuid())\n  title     String\n  deletedAt DateTime?\n  isDeleted Boolean   @default(false)\n\n  @@index([isDeleted])\n}\n```\n\n## Audit Fields\n\n```prisma\nmodel Resource {\n  id        String   @id @default(uuid())\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n  createdBy String?\n  updatedBy String?\n}\n```\n\n## Enum Patterns\n\n```prisma\nenum OrderStatus {\n  PENDING\n  PROCESSING\n  SHIPPED\n  DELIVERED\n  CANCELLED\n}\n\nmodel Order {\n  id     String      @id @default(uuid())\n  status OrderStatus @default(PENDING)\n}\n```\n\n## Integration\n\nUsed by:\n- `database-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-react/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-react\",\n  \"version\": \"1.0.0\",\n  \"description\": \"React patterns - component architecture, hooks, context, and testing\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"react\", \"hooks\", \"components\", \"frontend\", \"patterns\"]\n}\n",
        "plugins/aai-stack-react/skills/react-context/SKILL.md": "---\nname: react-context\ndescription: React Context API patterns for state sharing and prop drilling elimination\nuser-invocable: false\n---\n\n# React Context Skill\n\nPatterns for using React Context API effectively.\n\n## Basic Context Pattern\n\n### Creating Context\n\n```tsx\ninterface ThemeContextValue {\n  theme: 'light' | 'dark'\n  toggleTheme: () => void\n}\n\nconst ThemeContext = createContext<ThemeContextValue | null>(null)\n\nfunction ThemeProvider({ children }: { children: ReactNode }) {\n  const [theme, setTheme] = useState<'light' | 'dark'>('light')\n\n  const toggleTheme = useCallback(() => {\n    setTheme(prev => prev === 'light' ? 'dark' : 'light')\n  }, [])\n\n  const value = useMemo(() => ({\n    theme,\n    toggleTheme,\n  }), [theme, toggleTheme])\n\n  return (\n    <ThemeContext.Provider value={value}>\n      {children}\n    </ThemeContext.Provider>\n  )\n}\n\n// Custom hook for consuming context\nfunction useTheme() {\n  const context = useContext(ThemeContext)\n  if (!context) {\n    throw new Error('useTheme must be used within a ThemeProvider')\n  }\n  return context\n}\n```\n\n### Using Context\n\n```tsx\nfunction ThemeToggle() {\n  const { theme, toggleTheme } = useTheme()\n\n  return (\n    <button onClick={toggleTheme}>\n      Current: {theme}\n    </button>\n  )\n}\n\n// App structure\nfunction App() {\n  return (\n    <ThemeProvider>\n      <Header />\n      <Main />\n      <ThemeToggle />\n    </ThemeProvider>\n  )\n}\n```\n\n## Context with Reducer\n\n### Auth Context with Reducer\n\n```tsx\ninterface AuthState {\n  user: User | null\n  loading: boolean\n  error: string | null\n}\n\ntype AuthAction =\n  | { type: 'LOGIN_START' }\n  | { type: 'LOGIN_SUCCESS'; payload: User }\n  | { type: 'LOGIN_ERROR'; payload: string }\n  | { type: 'LOGOUT' }\n\nfunction authReducer(state: AuthState, action: AuthAction): AuthState {\n  switch (action.type) {\n    case 'LOGIN_START':\n      return { ...state, loading: true, error: null }\n    case 'LOGIN_SUCCESS':\n      return { user: action.payload, loading: false, error: null }\n    case 'LOGIN_ERROR':\n      return { user: null, loading: false, error: action.payload }\n    case 'LOGOUT':\n      return { user: null, loading: false, error: null }\n    default:\n      return state\n  }\n}\n\ninterface AuthContextValue extends AuthState {\n  login: (email: string, password: string) => Promise<void>\n  logout: () => void\n}\n\nconst AuthContext = createContext<AuthContextValue | null>(null)\n\nfunction AuthProvider({ children }: { children: ReactNode }) {\n  const [state, dispatch] = useReducer(authReducer, {\n    user: null,\n    loading: true,\n    error: null,\n  })\n\n  const login = useCallback(async (email: string, password: string) => {\n    dispatch({ type: 'LOGIN_START' })\n    try {\n      const user = await authService.login(email, password)\n      dispatch({ type: 'LOGIN_SUCCESS', payload: user })\n    } catch (error) {\n      dispatch({ type: 'LOGIN_ERROR', payload: (error as Error).message })\n    }\n  }, [])\n\n  const logout = useCallback(() => {\n    authService.logout()\n    dispatch({ type: 'LOGOUT' })\n  }, [])\n\n  const value = useMemo(() => ({\n    ...state,\n    login,\n    logout,\n  }), [state, login, logout])\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nfunction useAuth() {\n  const context = useContext(AuthContext)\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider')\n  }\n  return context\n}\n```\n\n## Context Splitting\n\n### Split State and Dispatch\n\n```tsx\n// Separate contexts for state and dispatch\nconst StateContext = createContext<State | null>(null)\nconst DispatchContext = createContext<Dispatch<Action> | null>(null)\n\nfunction Provider({ children }: { children: ReactNode }) {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  return (\n    <StateContext.Provider value={state}>\n      <DispatchContext.Provider value={dispatch}>\n        {children}\n      </DispatchContext.Provider>\n    </StateContext.Provider>\n  )\n}\n\n// Components only re-render when their needed context changes\nfunction Counter() {\n  const count = useContext(StateContext)!.count  // Only re-renders on count change\n  return <span>{count}</span>\n}\n\nfunction IncrementButton() {\n  const dispatch = useContext(DispatchContext)!  // Never re-renders on state change\n  return <button onClick={() => dispatch({ type: 'increment' })}>+</button>\n}\n```\n\n### Multiple Domain Contexts\n\n```tsx\n// Avoid one giant context - split by domain\nfunction App() {\n  return (\n    <AuthProvider>\n      <ThemeProvider>\n        <NotificationsProvider>\n          <CartProvider>\n            <Routes />\n          </CartProvider>\n        </NotificationsProvider>\n      </ThemeProvider>\n    </AuthProvider>\n  )\n}\n```\n\n## Performance Optimization\n\n### Memoize Provider Value\n\n```tsx\n// Bad: Creates new object on every render\nfunction Provider({ children }) {\n  const [count, setCount] = useState(0)\n\n  return (\n    <Context.Provider value={{ count, setCount }}>  {/* New object each render! */}\n      {children}\n    </Context.Provider>\n  )\n}\n\n// Good: Memoize the value\nfunction Provider({ children }) {\n  const [count, setCount] = useState(0)\n\n  const value = useMemo(() => ({\n    count,\n    setCount,\n  }), [count])  // Only new object when count changes\n\n  return (\n    <Context.Provider value={value}>\n      {children}\n    </Context.Provider>\n  )\n}\n```\n\n### Use Context Selectors\n\n```tsx\n// Using use-context-selector library for fine-grained updates\nimport { createContext, useContextSelector } from 'use-context-selector'\n\nconst Context = createContext<State | null>(null)\n\nfunction UserName() {\n  // Only re-renders when user.name changes, not on any state change\n  const userName = useContextSelector(Context, state => state?.user.name)\n  return <span>{userName}</span>\n}\n```\n\n## Context Patterns\n\n### Compound Components with Context\n\n```tsx\ninterface AccordionContextValue {\n  expandedItems: Set<string>\n  toggleItem: (id: string) => void\n}\n\nconst AccordionContext = createContext<AccordionContextValue | null>(null)\n\nfunction Accordion({ children }: { children: ReactNode }) {\n  const [expandedItems, setExpandedItems] = useState<Set<string>>(new Set())\n\n  const toggleItem = useCallback((id: string) => {\n    setExpandedItems(prev => {\n      const next = new Set(prev)\n      if (next.has(id)) {\n        next.delete(id)\n      } else {\n        next.add(id)\n      }\n      return next\n    })\n  }, [])\n\n  return (\n    <AccordionContext.Provider value={{ expandedItems, toggleItem }}>\n      <div className=\"accordion\">{children}</div>\n    </AccordionContext.Provider>\n  )\n}\n\nAccordion.Item = function AccordionItem({\n  id,\n  title,\n  children,\n}: {\n  id: string\n  title: string\n  children: ReactNode\n}) {\n  const { expandedItems, toggleItem } = useContext(AccordionContext)!\n  const isExpanded = expandedItems.has(id)\n\n  return (\n    <div className=\"accordion-item\">\n      <button onClick={() => toggleItem(id)}>\n        {title} {isExpanded ? '' : ''}\n      </button>\n      {isExpanded && <div className=\"accordion-content\">{children}</div>}\n    </div>\n  )\n}\n\n// Usage\n<Accordion>\n  <Accordion.Item id=\"1\" title=\"Section 1\">Content 1</Accordion.Item>\n  <Accordion.Item id=\"2\" title=\"Section 2\">Content 2</Accordion.Item>\n</Accordion>\n```\n\n### Context with Async Operations\n\n```tsx\ninterface DataContextValue {\n  data: Record<string, unknown>\n  loading: Record<string, boolean>\n  errors: Record<string, Error | null>\n  fetchData: (key: string, fetcher: () => Promise<unknown>) => Promise<void>\n}\n\nconst DataContext = createContext<DataContextValue | null>(null)\n\nfunction DataProvider({ children }: { children: ReactNode }) {\n  const [data, setData] = useState<Record<string, unknown>>({})\n  const [loading, setLoading] = useState<Record<string, boolean>>({})\n  const [errors, setErrors] = useState<Record<string, Error | null>>({})\n\n  const fetchData = useCallback(async (key: string, fetcher: () => Promise<unknown>) => {\n    setLoading(prev => ({ ...prev, [key]: true }))\n    setErrors(prev => ({ ...prev, [key]: null }))\n\n    try {\n      const result = await fetcher()\n      setData(prev => ({ ...prev, [key]: result }))\n    } catch (error) {\n      setErrors(prev => ({ ...prev, [key]: error as Error }))\n    } finally {\n      setLoading(prev => ({ ...prev, [key]: false }))\n    }\n  }, [])\n\n  const value = useMemo(() => ({\n    data,\n    loading,\n    errors,\n    fetchData,\n  }), [data, loading, errors, fetchData])\n\n  return (\n    <DataContext.Provider value={value}>\n      {children}\n    </DataContext.Provider>\n  )\n}\n```\n\n## When to Use Context\n\n### Good Use Cases\n\n- Theme data\n- User authentication\n- Locale/language\n- Feature flags\n- Global UI state (modals, toasts)\n\n### When NOT to Use Context\n\n```tsx\n// Bad: Using context for frequently changing data\nfunction LiveDataProvider({ children }) {\n  const [data, setData] = useState([])\n\n  useEffect(() => {\n    const ws = new WebSocket(url)\n    ws.onmessage = (e) => setData(JSON.parse(e.data))  // Updates 60x/second!\n    return () => ws.close()\n  }, [])\n\n  return (\n    <LiveDataContext.Provider value={data}>\n      {children}  {/* All consumers re-render on every update! */}\n    </LiveDataContext.Provider>\n  )\n}\n\n// Better: Use a state management library or refs for high-frequency updates\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-react/skills/react-hooks/SKILL.md": "---\nname: react-hooks\ndescription: React hooks patterns including custom hooks, useEffect, useMemo, and more\nuser-invocable: false\n---\n\n# React Hooks Skill\n\nPatterns for using and creating React hooks effectively.\n\n## Core Hooks\n\n### useState Patterns\n\n```tsx\n// Basic state\nconst [count, setCount] = useState(0)\n\n// Lazy initialization (expensive computation)\nconst [data, setData] = useState(() => {\n  return computeExpensiveInitialValue()\n})\n\n// Previous value pattern\nconst [value, setValue] = useState('')\nconst prevValue = useRef(value)\nuseEffect(() => {\n  prevValue.current = value\n}, [value])\n\n// Object state (spread pattern)\nconst [form, setForm] = useState({ name: '', email: '' })\nconst updateField = (field: string, value: string) => {\n  setForm(prev => ({ ...prev, [field]: value }))\n}\n```\n\n### useEffect Patterns\n\n```tsx\n// Mount/unmount\nuseEffect(() => {\n  console.log('Component mounted')\n  return () => console.log('Component unmounted')\n}, [])\n\n// Dependency tracking\nuseEffect(() => {\n  document.title = `Count: ${count}`\n}, [count])\n\n// Cleanup pattern\nuseEffect(() => {\n  const controller = new AbortController()\n\n  fetch(url, { signal: controller.signal })\n    .then(res => res.json())\n    .then(setData)\n    .catch(err => {\n      if (err.name !== 'AbortError') throw err\n    })\n\n  return () => controller.abort()\n}, [url])\n\n// Event listener pattern\nuseEffect(() => {\n  const handler = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') onClose()\n  }\n\n  document.addEventListener('keydown', handler)\n  return () => document.removeEventListener('keydown', handler)\n}, [onClose])\n```\n\n### useMemo and useCallback\n\n```tsx\n// Memoize expensive computation\nconst sortedList = useMemo(() => {\n  return items.sort((a, b) => a.value - b.value)\n}, [items])\n\n// Memoize object/array references\nconst config = useMemo(() => ({\n  api: apiUrl,\n  timeout: 5000,\n}), [apiUrl])\n\n// Memoize callbacks for child components\nconst handleClick = useCallback((id: string) => {\n  selectItem(id)\n}, [selectItem])\n\n// Memoize with dependencies\nconst filteredItems = useMemo(() => {\n  return items.filter(item =>\n    item.name.toLowerCase().includes(query.toLowerCase())\n  )\n}, [items, query])\n```\n\n### useRef Patterns\n\n```tsx\n// DOM reference\nconst inputRef = useRef<HTMLInputElement>(null)\nconst focusInput = () => inputRef.current?.focus()\n\n// Mutable value that doesn't trigger re-render\nconst renderCount = useRef(0)\nuseEffect(() => {\n  renderCount.current++\n})\n\n// Store previous props/state\nfunction usePrevious<T>(value: T): T | undefined {\n  const ref = useRef<T>()\n  useEffect(() => {\n    ref.current = value\n  })\n  return ref.current\n}\n\n// Callback ref for dynamic refs\nconst [height, setHeight] = useState(0)\nconst measuredRef = useCallback((node: HTMLDivElement | null) => {\n  if (node !== null) {\n    setHeight(node.getBoundingClientRect().height)\n  }\n}, [])\n```\n\n### useReducer Patterns\n\n```tsx\ninterface State {\n  count: number\n  step: number\n}\n\ntype Action =\n  | { type: 'increment' }\n  | { type: 'decrement' }\n  | { type: 'setStep'; payload: number }\n  | { type: 'reset' }\n\nfunction reducer(state: State, action: Action): State {\n  switch (action.type) {\n    case 'increment':\n      return { ...state, count: state.count + state.step }\n    case 'decrement':\n      return { ...state, count: state.count - state.step }\n    case 'setStep':\n      return { ...state, step: action.payload }\n    case 'reset':\n      return { count: 0, step: 1 }\n    default:\n      return state\n  }\n}\n\nfunction Counter() {\n  const [state, dispatch] = useReducer(reducer, { count: 0, step: 1 })\n\n  return (\n    <div>\n      <span>{state.count}</span>\n      <button onClick={() => dispatch({ type: 'increment' })}>+</button>\n      <button onClick={() => dispatch({ type: 'decrement' })}>-</button>\n    </div>\n  )\n}\n```\n\n## Custom Hooks\n\n### Data Fetching Hook\n\n```tsx\ninterface UseFetchResult<T> {\n  data: T | null\n  loading: boolean\n  error: Error | null\n  refetch: () => void\n}\n\nfunction useFetch<T>(url: string): UseFetchResult<T> {\n  const [data, setData] = useState<T | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<Error | null>(null)\n\n  const fetchData = useCallback(async () => {\n    setLoading(true)\n    setError(null)\n\n    try {\n      const response = await fetch(url)\n      if (!response.ok) throw new Error('Fetch failed')\n      const json = await response.json()\n      setData(json)\n    } catch (err) {\n      setError(err as Error)\n    } finally {\n      setLoading(false)\n    }\n  }, [url])\n\n  useEffect(() => {\n    fetchData()\n  }, [fetchData])\n\n  return { data, loading, error, refetch: fetchData }\n}\n```\n\n### Form Hook\n\n```tsx\ninterface UseFormOptions<T> {\n  initialValues: T\n  validate?: (values: T) => Partial<Record<keyof T, string>>\n  onSubmit: (values: T) => void | Promise<void>\n}\n\nfunction useForm<T extends Record<string, any>>({\n  initialValues,\n  validate,\n  onSubmit,\n}: UseFormOptions<T>) {\n  const [values, setValues] = useState(initialValues)\n  const [errors, setErrors] = useState<Partial<Record<keyof T, string>>>({})\n  const [touched, setTouched] = useState<Partial<Record<keyof T, boolean>>>({})\n  const [submitting, setSubmitting] = useState(false)\n\n  const handleChange = (name: keyof T, value: any) => {\n    setValues(prev => ({ ...prev, [name]: value }))\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: undefined }))\n    }\n  }\n\n  const handleBlur = (name: keyof T) => {\n    setTouched(prev => ({ ...prev, [name]: true }))\n  }\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault()\n\n    const validationErrors = validate?.(values) ?? {}\n    setErrors(validationErrors)\n    setTouched(Object.keys(values).reduce((acc, key) => ({\n      ...acc,\n      [key]: true,\n    }), {} as Record<keyof T, boolean>))\n\n    if (Object.keys(validationErrors).length === 0) {\n      setSubmitting(true)\n      await onSubmit(values)\n      setSubmitting(false)\n    }\n  }\n\n  const reset = () => {\n    setValues(initialValues)\n    setErrors({})\n    setTouched({})\n  }\n\n  return {\n    values,\n    errors,\n    touched,\n    submitting,\n    handleChange,\n    handleBlur,\n    handleSubmit,\n    reset,\n  }\n}\n```\n\n### Local Storage Hook\n\n```tsx\nfunction useLocalStorage<T>(key: string, initialValue: T) {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    try {\n      const item = window.localStorage.getItem(key)\n      return item ? JSON.parse(item) : initialValue\n    } catch (error) {\n      console.error(error)\n      return initialValue\n    }\n  })\n\n  const setValue = useCallback((value: T | ((val: T) => T)) => {\n    try {\n      const valueToStore = value instanceof Function ? value(storedValue) : value\n      setStoredValue(valueToStore)\n      window.localStorage.setItem(key, JSON.stringify(valueToStore))\n    } catch (error) {\n      console.error(error)\n    }\n  }, [key, storedValue])\n\n  return [storedValue, setValue] as const\n}\n```\n\n### Debounce Hook\n\n```tsx\nfunction useDebounce<T>(value: T, delay: number): T {\n  const [debouncedValue, setDebouncedValue] = useState(value)\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value)\n    }, delay)\n\n    return () => clearTimeout(handler)\n  }, [value, delay])\n\n  return debouncedValue\n}\n\n// Usage\nconst [search, setSearch] = useState('')\nconst debouncedSearch = useDebounce(search, 300)\n\nuseEffect(() => {\n  fetchResults(debouncedSearch)\n}, [debouncedSearch])\n```\n\n### Media Query Hook\n\n```tsx\nfunction useMediaQuery(query: string): boolean {\n  const [matches, setMatches] = useState(() => {\n    return window.matchMedia(query).matches\n  })\n\n  useEffect(() => {\n    const mediaQuery = window.matchMedia(query)\n    const handler = (e: MediaQueryListEvent) => setMatches(e.matches)\n\n    mediaQuery.addEventListener('change', handler)\n    return () => mediaQuery.removeEventListener('change', handler)\n  }, [query])\n\n  return matches\n}\n\n// Usage\nconst isMobile = useMediaQuery('(max-width: 768px)')\n```\n\n### Intersection Observer Hook\n\n```tsx\nfunction useIntersectionObserver(\n  ref: RefObject<Element>,\n  options?: IntersectionObserverInit\n): boolean {\n  const [isIntersecting, setIsIntersecting] = useState(false)\n\n  useEffect(() => {\n    if (!ref.current) return\n\n    const observer = new IntersectionObserver(([entry]) => {\n      setIsIntersecting(entry.isIntersecting)\n    }, options)\n\n    observer.observe(ref.current)\n    return () => observer.disconnect()\n  }, [ref, options])\n\n  return isIntersecting\n}\n\n// Usage\nconst ref = useRef<HTMLDivElement>(null)\nconst isVisible = useIntersectionObserver(ref, { threshold: 0.5 })\n```\n\n## Hook Rules\n\n### 1. Only Call Hooks at the Top Level\n\n```tsx\n// Bad: Conditional hook\nfunction Component({ condition }) {\n  if (condition) {\n    const [value, setValue] = useState(0) // Error!\n  }\n}\n\n// Good: Always call hooks\nfunction Component({ condition }) {\n  const [value, setValue] = useState(0)\n\n  if (!condition) return null\n  return <div>{value}</div>\n}\n```\n\n### 2. Only Call Hooks from React Functions\n\n```tsx\n// Bad: Regular function\nfunction calculate() {\n  const [result, setResult] = useState(0) // Error!\n}\n\n// Good: Custom hook\nfunction useCalculation() {\n  const [result, setResult] = useState(0)\n  // ...\n  return result\n}\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-react/skills/react-patterns/SKILL.md": "---\nname: react-patterns\ndescription: React component patterns, best practices, and architecture guidelines\nuser-invocable: false\n---\n\n# React Patterns Skill\n\nPatterns for building well-architected React applications.\n\n## Component Patterns\n\n### Single Responsibility Components\n\n```tsx\n// Bad: Doing too much\nfunction UserDashboard() {\n  const [users, setUsers] = useState([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    fetchUsers().then(setUsers).finally(() => setLoading(false))\n  }, [])\n\n  return (\n    <div>\n      {loading ? <Spinner /> : users.map(user => (\n        <div key={user.id}>\n          <img src={user.avatar} />\n          <span>{user.name}</span>\n          <button onClick={() => deleteUser(user.id)}>Delete</button>\n        </div>\n      ))}\n    </div>\n  )\n}\n\n// Good: Single responsibility\nfunction UserDashboard() {\n  const { users, loading } = useUsers()\n\n  if (loading) return <Spinner />\n\n  return (\n    <div>\n      {users.map(user => (\n        <UserCard key={user.id} user={user} />\n      ))}\n    </div>\n  )\n}\n```\n\n### Container/Presenter Pattern\n\n```tsx\n// Container: Handles data and logic\nfunction UserListContainer() {\n  const { users, loading, error, deleteUser } = useUsers()\n\n  return (\n    <UserList\n      users={users}\n      loading={loading}\n      error={error}\n      onDelete={deleteUser}\n    />\n  )\n}\n\n// Presenter: Handles rendering\ninterface UserListProps {\n  users: User[]\n  loading: boolean\n  error?: Error\n  onDelete: (id: string) => void\n}\n\nfunction UserList({ users, loading, error, onDelete }: UserListProps) {\n  if (loading) return <Spinner />\n  if (error) return <ErrorMessage error={error} />\n\n  return (\n    <ul>\n      {users.map(user => (\n        <UserItem key={user.id} user={user} onDelete={onDelete} />\n      ))}\n    </ul>\n  )\n}\n```\n\n### Compound Components\n\n```tsx\n// Compound component pattern for flexible composition\ninterface TabsContextValue {\n  activeTab: string\n  setActiveTab: (tab: string) => void\n}\n\nconst TabsContext = createContext<TabsContextValue | null>(null)\n\nfunction Tabs({ children, defaultTab }: { children: ReactNode; defaultTab: string }) {\n  const [activeTab, setActiveTab] = useState(defaultTab)\n\n  return (\n    <TabsContext.Provider value={{ activeTab, setActiveTab }}>\n      <div className=\"tabs\">{children}</div>\n    </TabsContext.Provider>\n  )\n}\n\nTabs.List = function TabList({ children }: { children: ReactNode }) {\n  return <div className=\"tab-list\">{children}</div>\n}\n\nTabs.Tab = function Tab({ id, children }: { id: string; children: ReactNode }) {\n  const { activeTab, setActiveTab } = useContext(TabsContext)!\n\n  return (\n    <button\n      className={activeTab === id ? 'active' : ''}\n      onClick={() => setActiveTab(id)}\n    >\n      {children}\n    </button>\n  )\n}\n\nTabs.Panel = function TabPanel({ id, children }: { id: string; children: ReactNode }) {\n  const { activeTab } = useContext(TabsContext)!\n\n  if (activeTab !== id) return null\n  return <div className=\"tab-panel\">{children}</div>\n}\n\n// Usage\n<Tabs defaultTab=\"profile\">\n  <Tabs.List>\n    <Tabs.Tab id=\"profile\">Profile</Tabs.Tab>\n    <Tabs.Tab id=\"settings\">Settings</Tabs.Tab>\n  </Tabs.List>\n  <Tabs.Panel id=\"profile\">Profile content</Tabs.Panel>\n  <Tabs.Panel id=\"settings\">Settings content</Tabs.Panel>\n</Tabs>\n```\n\n## Render Patterns\n\n### Render Props\n\n```tsx\ninterface MousePosition {\n  x: number\n  y: number\n}\n\ninterface MouseTrackerProps {\n  render: (position: MousePosition) => ReactNode\n}\n\nfunction MouseTracker({ render }: MouseTrackerProps) {\n  const [position, setPosition] = useState<MousePosition>({ x: 0, y: 0 })\n\n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent) => {\n      setPosition({ x: e.clientX, y: e.clientY })\n    }\n\n    window.addEventListener('mousemove', handleMouseMove)\n    return () => window.removeEventListener('mousemove', handleMouseMove)\n  }, [])\n\n  return <>{render(position)}</>\n}\n\n// Usage\n<MouseTracker\n  render={({ x, y }) => (\n    <div>Mouse at: {x}, {y}</div>\n  )}\n/>\n```\n\n### Higher-Order Components (HOC)\n\n```tsx\n// HOC for adding authentication check\nfunction withAuth<P extends object>(\n  WrappedComponent: ComponentType<P>\n) {\n  return function WithAuthComponent(props: P) {\n    const { user, loading } = useAuth()\n\n    if (loading) return <Spinner />\n    if (!user) return <Navigate to=\"/login\" />\n\n    return <WrappedComponent {...props} />\n  }\n}\n\n// Usage\nconst ProtectedDashboard = withAuth(Dashboard)\n```\n\n## Controlled vs Uncontrolled Components\n\n### Controlled Component\n\n```tsx\nfunction ControlledInput() {\n  const [value, setValue] = useState('')\n\n  return (\n    <input\n      value={value}\n      onChange={(e) => setValue(e.target.value)}\n    />\n  )\n}\n```\n\n### Uncontrolled Component\n\n```tsx\nfunction UncontrolledInput() {\n  const inputRef = useRef<HTMLInputElement>(null)\n\n  const handleSubmit = () => {\n    console.log(inputRef.current?.value)\n  }\n\n  return (\n    <>\n      <input ref={inputRef} defaultValue=\"\" />\n      <button onClick={handleSubmit}>Submit</button>\n    </>\n  )\n}\n```\n\n### Flexible Controlled/Uncontrolled\n\n```tsx\ninterface InputProps {\n  value?: string\n  defaultValue?: string\n  onChange?: (value: string) => void\n}\n\nfunction FlexibleInput({ value, defaultValue, onChange }: InputProps) {\n  const [internalValue, setInternalValue] = useState(defaultValue ?? '')\n\n  const isControlled = value !== undefined\n  const currentValue = isControlled ? value : internalValue\n\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    if (!isControlled) {\n      setInternalValue(e.target.value)\n    }\n    onChange?.(e.target.value)\n  }\n\n  return (\n    <input value={currentValue} onChange={handleChange} />\n  )\n}\n```\n\n## Performance Patterns\n\n### Memoization\n\n```tsx\n// Memoize expensive computations\nconst sortedItems = useMemo(() => {\n  return items.sort((a, b) => a.name.localeCompare(b.name))\n}, [items])\n\n// Memoize callbacks\nconst handleClick = useCallback((id: string) => {\n  setSelectedId(id)\n}, [])\n\n// Memoize components\nconst MemoizedList = memo(function List({ items }) {\n  return items.map(item => <Item key={item.id} {...item} />)\n})\n```\n\n### Lazy Loading\n\n```tsx\n// Lazy load components\nconst HeavyComponent = lazy(() => import('./HeavyComponent'))\n\nfunction App() {\n  return (\n    <Suspense fallback={<Spinner />}>\n      <HeavyComponent />\n    </Suspense>\n  )\n}\n```\n\n## Error Handling\n\n### Error Boundaries\n\n```tsx\nclass ErrorBoundary extends Component<Props, State> {\n  state = { hasError: false, error: null }\n\n  static getDerivedStateFromError(error: Error) {\n    return { hasError: true, error }\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('Error caught:', error, errorInfo)\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return this.props.fallback ?? <DefaultErrorFallback />\n    }\n    return this.props.children\n  }\n}\n\n// Usage\n<ErrorBoundary fallback={<ErrorMessage />}>\n  <RiskyComponent />\n</ErrorBoundary>\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-react/skills/react-query-patterns/SKILL.md": "---\nname: react-query-patterns\ndescription: TanStack Query (React Query) patterns for data fetching and caching\nuser-invocable: false\n---\n\n# React Query Patterns Skill\n\nPatterns for using TanStack Query effectively for server state management.\n\n## Basic Queries\n\n### Simple Query\n\n```tsx\nimport { useQuery } from '@tanstack/react-query'\n\nfunction UserProfile({ userId }: { userId: string }) {\n  const { data, isLoading, error } = useQuery({\n    queryKey: ['user', userId],\n    queryFn: () => fetchUser(userId),\n  })\n\n  if (isLoading) return <Spinner />\n  if (error) return <Error error={error} />\n\n  return <div>{data.name}</div>\n}\n```\n\n### Query with Options\n\n```tsx\nconst { data, isLoading, isError, refetch, isFetching } = useQuery({\n  queryKey: ['users', { status: 'active' }],\n  queryFn: () => fetchUsers({ status: 'active' }),\n  staleTime: 5 * 60 * 1000,       // Data fresh for 5 minutes\n  gcTime: 30 * 60 * 1000,         // Cache for 30 minutes (formerly cacheTime)\n  refetchOnWindowFocus: false,    // Don't refetch on window focus\n  refetchOnMount: true,           // Refetch when component mounts\n  retry: 3,                       // Retry failed requests 3 times\n  retryDelay: attemptIndex => Math.min(1000 * 2 ** attemptIndex, 30000),\n})\n```\n\n### Dependent Queries\n\n```tsx\nfunction UserPosts({ userId }: { userId: string }) {\n  // First query\n  const { data: user } = useQuery({\n    queryKey: ['user', userId],\n    queryFn: () => fetchUser(userId),\n  })\n\n  // Dependent query - only runs when user exists\n  const { data: posts } = useQuery({\n    queryKey: ['posts', user?.id],\n    queryFn: () => fetchUserPosts(user!.id),\n    enabled: !!user,  // Only run when user is defined\n  })\n\n  return <PostList posts={posts} />\n}\n```\n\n## Mutations\n\n### Basic Mutation\n\n```tsx\nimport { useMutation, useQueryClient } from '@tanstack/react-query'\n\nfunction CreateTodo() {\n  const queryClient = useQueryClient()\n\n  const mutation = useMutation({\n    mutationFn: (newTodo: CreateTodoInput) => createTodo(newTodo),\n    onSuccess: () => {\n      // Invalidate and refetch\n      queryClient.invalidateQueries({ queryKey: ['todos'] })\n    },\n  })\n\n  return (\n    <form onSubmit={(e) => {\n      e.preventDefault()\n      mutation.mutate({ title: 'New Todo' })\n    }}>\n      <button type=\"submit\" disabled={mutation.isPending}>\n        {mutation.isPending ? 'Creating...' : 'Create Todo'}\n      </button>\n    </form>\n  )\n}\n```\n\n### Optimistic Updates\n\n```tsx\nconst mutation = useMutation({\n  mutationFn: updateTodo,\n  onMutate: async (newTodo) => {\n    // Cancel outgoing refetches\n    await queryClient.cancelQueries({ queryKey: ['todos', newTodo.id] })\n\n    // Snapshot previous value\n    const previousTodo = queryClient.getQueryData(['todos', newTodo.id])\n\n    // Optimistically update\n    queryClient.setQueryData(['todos', newTodo.id], newTodo)\n\n    // Return context with snapshot\n    return { previousTodo }\n  },\n  onError: (err, newTodo, context) => {\n    // Rollback on error\n    queryClient.setQueryData(['todos', newTodo.id], context?.previousTodo)\n  },\n  onSettled: (data, error, variables) => {\n    // Always refetch after error or success\n    queryClient.invalidateQueries({ queryKey: ['todos', variables.id] })\n  },\n})\n```\n\n### Mutation with Callbacks\n\n```tsx\nconst mutation = useMutation({\n  mutationFn: deleteTodo,\n  onSuccess: (data, variables, context) => {\n    toast.success('Todo deleted!')\n  },\n  onError: (error, variables, context) => {\n    toast.error(`Failed to delete: ${error.message}`)\n  },\n  onSettled: () => {\n    queryClient.invalidateQueries({ queryKey: ['todos'] })\n  },\n})\n\n// Per-mutation callbacks\nmutation.mutate(todoId, {\n  onSuccess: () => {\n    navigate('/todos')  // Override or extend mutation callbacks\n  },\n})\n```\n\n## Query Keys\n\n### Structured Query Keys\n\n```tsx\n// Factory pattern for query keys\nconst todoKeys = {\n  all: ['todos'] as const,\n  lists: () => [...todoKeys.all, 'list'] as const,\n  list: (filters: TodoFilters) => [...todoKeys.lists(), filters] as const,\n  details: () => [...todoKeys.all, 'detail'] as const,\n  detail: (id: string) => [...todoKeys.details(), id] as const,\n}\n\n// Usage\nuseQuery({\n  queryKey: todoKeys.detail(todoId),\n  queryFn: () => fetchTodo(todoId),\n})\n\n// Invalidation is easy\nqueryClient.invalidateQueries({ queryKey: todoKeys.lists() })  // All lists\nqueryClient.invalidateQueries({ queryKey: todoKeys.all })      // Everything todo-related\n```\n\n## Pagination\n\n### Offset Pagination\n\n```tsx\nfunction PaginatedPosts() {\n  const [page, setPage] = useState(1)\n\n  const { data, isLoading, isFetching, isPreviousData } = useQuery({\n    queryKey: ['posts', page],\n    queryFn: () => fetchPosts(page),\n    placeholderData: keepPreviousData,  // Show previous data while loading\n  })\n\n  return (\n    <div>\n      {isLoading ? (\n        <Spinner />\n      ) : (\n        <div style={{ opacity: isFetching ? 0.5 : 1 }}>\n          {data.posts.map(post => <Post key={post.id} {...post} />)}\n        </div>\n      )}\n\n      <button\n        onClick={() => setPage(prev => Math.max(prev - 1, 1))}\n        disabled={page === 1}\n      >\n        Previous\n      </button>\n      <span>Page {page}</span>\n      <button\n        onClick={() => setPage(prev => prev + 1)}\n        disabled={!data?.hasMore}\n      >\n        Next\n      </button>\n    </div>\n  )\n}\n```\n\n### Infinite Queries\n\n```tsx\nimport { useInfiniteQuery } from '@tanstack/react-query'\n\nfunction InfinitePosts() {\n  const {\n    data,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n    status,\n  } = useInfiniteQuery({\n    queryKey: ['posts', 'infinite'],\n    queryFn: ({ pageParam }) => fetchPosts(pageParam),\n    initialPageParam: 0,\n    getNextPageParam: (lastPage, allPages) => {\n      return lastPage.hasMore ? lastPage.nextCursor : undefined\n    },\n  })\n\n  if (status === 'pending') return <Spinner />\n  if (status === 'error') return <Error />\n\n  return (\n    <div>\n      {data.pages.map((group, i) => (\n        <Fragment key={i}>\n          {group.posts.map(post => <Post key={post.id} {...post} />)}\n        </Fragment>\n      ))}\n\n      <button\n        onClick={() => fetchNextPage()}\n        disabled={!hasNextPage || isFetchingNextPage}\n      >\n        {isFetchingNextPage\n          ? 'Loading more...'\n          : hasNextPage\n          ? 'Load More'\n          : 'Nothing more to load'}\n      </button>\n    </div>\n  )\n}\n```\n\n## Prefetching\n\n### Hover Prefetch\n\n```tsx\nfunction TodoList({ todos }: { todos: Todo[] }) {\n  const queryClient = useQueryClient()\n\n  const prefetchTodo = (id: string) => {\n    queryClient.prefetchQuery({\n      queryKey: ['todo', id],\n      queryFn: () => fetchTodo(id),\n      staleTime: 60 * 1000,  // Only prefetch if data is older than 1 minute\n    })\n  }\n\n  return (\n    <ul>\n      {todos.map(todo => (\n        <li\n          key={todo.id}\n          onMouseEnter={() => prefetchTodo(todo.id)}\n        >\n          <Link to={`/todo/${todo.id}`}>{todo.title}</Link>\n        </li>\n      ))}\n    </ul>\n  )\n}\n```\n\n### Preload on Route\n\n```tsx\n// Route loader\nexport async function loader({ params }: LoaderFunctionArgs) {\n  await queryClient.ensureQueryData({\n    queryKey: ['todo', params.id],\n    queryFn: () => fetchTodo(params.id!),\n  })\n  return null\n}\n```\n\n## Suspense\n\n### Query with Suspense\n\n```tsx\nimport { useSuspenseQuery } from '@tanstack/react-query'\n\nfunction UserProfile({ userId }: { userId: string }) {\n  // No loading state needed - Suspense handles it\n  const { data } = useSuspenseQuery({\n    queryKey: ['user', userId],\n    queryFn: () => fetchUser(userId),\n  })\n\n  return <div>{data.name}</div>\n}\n\n// Wrap with Suspense boundary\n<Suspense fallback={<Spinner />}>\n  <UserProfile userId=\"123\" />\n</Suspense>\n```\n\n### Parallel Suspense Queries\n\n```tsx\nimport { useSuspenseQueries } from '@tanstack/react-query'\n\nfunction Dashboard({ userId }: { userId: string }) {\n  const [userQuery, postsQuery, statsQuery] = useSuspenseQueries({\n    queries: [\n      { queryKey: ['user', userId], queryFn: () => fetchUser(userId) },\n      { queryKey: ['posts', userId], queryFn: () => fetchUserPosts(userId) },\n      { queryKey: ['stats', userId], queryFn: () => fetchUserStats(userId) },\n    ],\n  })\n\n  return (\n    <div>\n      <UserInfo user={userQuery.data} />\n      <PostList posts={postsQuery.data} />\n      <Stats stats={statsQuery.data} />\n    </div>\n  )\n}\n```\n\n## Cache Management\n\n### Manual Cache Updates\n\n```tsx\n// Set data directly\nqueryClient.setQueryData(['todo', todoId], updatedTodo)\n\n// Update with function\nqueryClient.setQueryData(['todos'], (old: Todo[] | undefined) => {\n  return old ? [...old, newTodo] : [newTodo]\n})\n\n// Get cached data\nconst cachedTodo = queryClient.getQueryData(['todo', todoId])\n\n// Remove from cache\nqueryClient.removeQueries({ queryKey: ['todo', todoId] })\n```\n\n### Invalidation Strategies\n\n```tsx\n// Invalidate exact key\nqueryClient.invalidateQueries({ queryKey: ['todos', { status: 'done' }], exact: true })\n\n// Invalidate all matching\nqueryClient.invalidateQueries({ queryKey: ['todos'] })\n\n// Invalidate with predicate\nqueryClient.invalidateQueries({\n  predicate: (query) =>\n    query.queryKey[0] === 'todos' &&\n    (query.queryKey[1] as TodoFilters)?.status === 'done',\n})\n\n// Refetch immediately\nqueryClient.refetchQueries({ queryKey: ['todos'] })\n```\n\n## Error Handling\n\n### Global Error Handler\n\n```tsx\nconst queryClient = new QueryClient({\n  queryCache: new QueryCache({\n    onError: (error, query) => {\n      if (error instanceof UnauthorizedError) {\n        navigate('/login')\n      } else {\n        toast.error(`Query failed: ${error.message}`)\n      }\n    },\n  }),\n  mutationCache: new MutationCache({\n    onError: (error) => {\n      toast.error(`Mutation failed: ${error.message}`)\n    },\n  }),\n})\n```\n\n### Error Boundaries\n\n```tsx\nimport { QueryErrorResetBoundary } from '@tanstack/react-query'\nimport { ErrorBoundary } from 'react-error-boundary'\n\nfunction App() {\n  return (\n    <QueryErrorResetBoundary>\n      {({ reset }) => (\n        <ErrorBoundary\n          onReset={reset}\n          fallbackRender={({ error, resetErrorBoundary }) => (\n            <div>\n              <p>Error: {error.message}</p>\n              <button onClick={resetErrorBoundary}>Try again</button>\n            </div>\n          )}\n        >\n          <TodoList />\n        </ErrorBoundary>\n      )}\n    </QueryErrorResetBoundary>\n  )\n}\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-react/skills/react-testing/SKILL.md": "---\nname: react-testing\ndescription: React Testing Library patterns for component testing\nuser-invocable: false\n---\n\n# React Testing Skill\n\nPatterns for testing React components with React Testing Library.\n\n## Testing Philosophy\n\nReact Testing Library encourages testing components the way users interact with them, not implementation details.\n\n### The Guiding Principles\n\n1. Test behavior, not implementation\n2. Find elements like a user would\n3. Interact like a user would\n4. Assert on what the user sees\n\n## Rendering Components\n\n### Basic Rendering\n\n```tsx\nimport { render, screen } from '@testing-library/react'\n\ntest('renders greeting', () => {\n  render(<Greeting name=\"World\" />)\n\n  expect(screen.getByText('Hello, World!')).toBeInTheDocument()\n})\n```\n\n### Rendering with Providers\n\n```tsx\nfunction renderWithProviders(\n  ui: ReactElement,\n  {\n    preloadedState = {},\n    ...renderOptions\n  } = {}\n) {\n  function Wrapper({ children }: { children: ReactNode }) {\n    return (\n      <Provider store={setupStore(preloadedState)}>\n        <ThemeProvider>\n          <Router>\n            {children}\n          </Router>\n        </ThemeProvider>\n      </Provider>\n    )\n  }\n\n  return render(ui, { wrapper: Wrapper, ...renderOptions })\n}\n\n// Usage\ntest('renders with providers', () => {\n  renderWithProviders(<UserDashboard />)\n  expect(screen.getByText('Dashboard')).toBeInTheDocument()\n})\n```\n\n## Queries\n\n### Query Priority\n\nUse queries in this order (most to least preferred):\n\n```tsx\n// 1. Accessible queries (preferred)\nscreen.getByRole('button', { name: /submit/i })\nscreen.getByLabelText('Email')\nscreen.getByPlaceholderText('Enter email')\nscreen.getByText('Hello World')\nscreen.getByDisplayValue('current value')\n\n// 2. Semantic queries\nscreen.getByAltText('Profile picture')\nscreen.getByTitle('Close')\n\n// 3. Test IDs (last resort)\nscreen.getByTestId('custom-element')\n```\n\n### Query Variants\n\n```tsx\n// getBy* - Throws if not found (use for elements that should exist)\nscreen.getByRole('button')\n\n// queryBy* - Returns null if not found (use for asserting absence)\nexpect(screen.queryByText('Loading')).not.toBeInTheDocument()\n\n// findBy* - Returns promise, waits for element (use for async)\nconst button = await screen.findByRole('button')\n\n// *AllBy* - Returns array of all matches\nconst items = screen.getAllByRole('listitem')\n```\n\n### Role-Based Queries\n\n```tsx\n// Buttons\nscreen.getByRole('button', { name: /submit/i })\n\n// Links\nscreen.getByRole('link', { name: /home/i })\n\n// Form elements\nscreen.getByRole('textbox', { name: /email/i })\nscreen.getByRole('checkbox', { name: /remember me/i })\nscreen.getByRole('combobox', { name: /country/i })\n\n// Headings\nscreen.getByRole('heading', { name: /welcome/i, level: 1 })\n\n// Navigation\nscreen.getByRole('navigation')\n\n// Lists\nscreen.getByRole('list')\nscreen.getAllByRole('listitem')\n```\n\n## User Interactions\n\n### Click Events\n\n```tsx\nimport { render, screen } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\n\ntest('button click increments counter', async () => {\n  const user = userEvent.setup()\n  render(<Counter />)\n\n  const button = screen.getByRole('button', { name: /increment/i })\n  await user.click(button)\n\n  expect(screen.getByText('Count: 1')).toBeInTheDocument()\n})\n```\n\n### Typing\n\n```tsx\ntest('form submission', async () => {\n  const user = userEvent.setup()\n  const onSubmit = jest.fn()\n  render(<LoginForm onSubmit={onSubmit} />)\n\n  await user.type(screen.getByLabelText(/email/i), 'test@example.com')\n  await user.type(screen.getByLabelText(/password/i), 'password123')\n  await user.click(screen.getByRole('button', { name: /sign in/i }))\n\n  expect(onSubmit).toHaveBeenCalledWith({\n    email: 'test@example.com',\n    password: 'password123',\n  })\n})\n```\n\n### Select and Keyboard\n\n```tsx\ntest('select option', async () => {\n  const user = userEvent.setup()\n  render(<CountrySelect />)\n\n  await user.selectOptions(\n    screen.getByRole('combobox', { name: /country/i }),\n    'US'\n  )\n\n  expect(screen.getByRole('combobox')).toHaveValue('US')\n})\n\ntest('keyboard navigation', async () => {\n  const user = userEvent.setup()\n  render(<Form />)\n\n  await user.tab()  // Focus first input\n  await user.type(screen.getByLabelText(/name/i), 'John')\n  await user.tab()  // Focus next input\n  await user.keyboard('{Enter}')  // Submit form\n})\n```\n\n## Async Testing\n\n### Waiting for Elements\n\n```tsx\ntest('loads user data', async () => {\n  render(<UserProfile userId=\"123\" />)\n\n  // Wait for loading to finish\n  expect(screen.getByText(/loading/i)).toBeInTheDocument()\n\n  // Wait for data to appear\n  expect(await screen.findByText('John Doe')).toBeInTheDocument()\n})\n```\n\n### waitFor\n\n```tsx\nimport { waitFor } from '@testing-library/react'\n\ntest('form validation', async () => {\n  const user = userEvent.setup()\n  render(<Form />)\n\n  await user.click(screen.getByRole('button', { name: /submit/i }))\n\n  await waitFor(() => {\n    expect(screen.getByText(/email is required/i)).toBeInTheDocument()\n  })\n})\n\ntest('disappearing element', async () => {\n  render(<Notification />)\n\n  expect(screen.getByText(/success/i)).toBeInTheDocument()\n\n  await waitFor(() => {\n    expect(screen.queryByText(/success/i)).not.toBeInTheDocument()\n  })\n})\n```\n\n### waitForElementToBeRemoved\n\n```tsx\ntest('loading state disappears', async () => {\n  render(<DataLoader />)\n\n  await waitForElementToBeRemoved(() => screen.queryByText(/loading/i))\n\n  expect(screen.getByText('Data loaded')).toBeInTheDocument()\n})\n```\n\n## Mocking\n\n### Mocking API Calls\n\n```tsx\nimport { rest } from 'msw'\nimport { setupServer } from 'msw/node'\n\nconst server = setupServer(\n  rest.get('/api/user/:id', (req, res, ctx) => {\n    return res(ctx.json({ id: req.params.id, name: 'John Doe' }))\n  })\n)\n\nbeforeAll(() => server.listen())\nafterEach(() => server.resetHandlers())\nafterAll(() => server.close())\n\ntest('fetches user data', async () => {\n  render(<UserProfile userId=\"123\" />)\n\n  expect(await screen.findByText('John Doe')).toBeInTheDocument()\n})\n\ntest('handles error', async () => {\n  server.use(\n    rest.get('/api/user/:id', (req, res, ctx) => {\n      return res(ctx.status(500))\n    })\n  )\n\n  render(<UserProfile userId=\"123\" />)\n\n  expect(await screen.findByText(/error loading user/i)).toBeInTheDocument()\n})\n```\n\n### Mocking Hooks\n\n```tsx\njest.mock('../hooks/useUser', () => ({\n  useUser: jest.fn(),\n}))\n\nimport { useUser } from '../hooks/useUser'\n\ntest('renders user when loaded', () => {\n  (useUser as jest.Mock).mockReturnValue({\n    user: { name: 'John' },\n    loading: false,\n    error: null,\n  })\n\n  render(<UserProfile />)\n  expect(screen.getByText('John')).toBeInTheDocument()\n})\n```\n\n### Mocking Router\n\n```tsx\nimport { MemoryRouter, Route, Routes } from 'react-router-dom'\n\ntest('navigates on click', async () => {\n  const user = userEvent.setup()\n\n  render(\n    <MemoryRouter initialEntries={['/']}>\n      <Routes>\n        <Route path=\"/\" element={<Home />} />\n        <Route path=\"/about\" element={<About />} />\n      </Routes>\n    </MemoryRouter>\n  )\n\n  await user.click(screen.getByRole('link', { name: /about/i }))\n\n  expect(screen.getByText(/about page/i)).toBeInTheDocument()\n})\n```\n\n## Component Testing Patterns\n\n### Testing Forms\n\n```tsx\ndescribe('RegistrationForm', () => {\n  test('shows validation errors for empty required fields', async () => {\n    const user = userEvent.setup()\n    render(<RegistrationForm />)\n\n    await user.click(screen.getByRole('button', { name: /register/i }))\n\n    expect(await screen.findByText(/name is required/i)).toBeInTheDocument()\n    expect(screen.getByText(/email is required/i)).toBeInTheDocument()\n  })\n\n  test('submits with valid data', async () => {\n    const user = userEvent.setup()\n    const onSubmit = jest.fn()\n    render(<RegistrationForm onSubmit={onSubmit} />)\n\n    await user.type(screen.getByLabelText(/name/i), 'John Doe')\n    await user.type(screen.getByLabelText(/email/i), 'john@example.com')\n    await user.click(screen.getByRole('button', { name: /register/i }))\n\n    expect(onSubmit).toHaveBeenCalledWith({\n      name: 'John Doe',\n      email: 'john@example.com',\n    })\n  })\n})\n```\n\n### Testing Modals\n\n```tsx\ntest('opens and closes modal', async () => {\n  const user = userEvent.setup()\n  render(<App />)\n\n  // Modal not visible initially\n  expect(screen.queryByRole('dialog')).not.toBeInTheDocument()\n\n  // Open modal\n  await user.click(screen.getByRole('button', { name: /open modal/i }))\n  expect(screen.getByRole('dialog')).toBeInTheDocument()\n\n  // Close modal\n  await user.click(screen.getByRole('button', { name: /close/i }))\n  await waitForElementToBeRemoved(() => screen.queryByRole('dialog'))\n})\n```\n\n### Testing Lists\n\n```tsx\ntest('renders and filters list items', async () => {\n  const user = userEvent.setup()\n  render(<TodoList />)\n\n  // Verify initial items\n  const items = screen.getAllByRole('listitem')\n  expect(items).toHaveLength(3)\n\n  // Filter items\n  await user.type(screen.getByRole('searchbox'), 'buy')\n\n  const filteredItems = screen.getAllByRole('listitem')\n  expect(filteredItems).toHaveLength(1)\n  expect(filteredItems[0]).toHaveTextContent('Buy groceries')\n})\n```\n\n## Accessibility Testing\n\n```tsx\nimport { axe, toHaveNoViolations } from 'jest-axe'\n\nexpect.extend(toHaveNoViolations)\n\ntest('has no accessibility violations', async () => {\n  const { container } = render(<MyComponent />)\n  const results = await axe(container)\n  expect(results).toHaveNoViolations()\n})\n```\n\n## Debug Utilities\n\n```tsx\ntest('debugging', () => {\n  render(<Component />)\n\n  // Print current DOM\n  screen.debug()\n\n  // Print specific element\n  screen.debug(screen.getByRole('button'))\n\n  // Log accessible roles\n  screen.logTestingPlaygroundURL()  // Opens Testing Playground with current DOM\n})\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `e2e-test-specialist` agent\n- `unit-test-specialist` agent\n",
        "plugins/aai-stack-sqlite/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-sqlite\",\n  \"version\": \"1.0.0\",\n  \"description\": \"SQLite patterns - better-sqlite3, optimization, embedded database best practices\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"sqlite\", \"better-sqlite3\", \"sql\", \"database\", \"embedded\"]\n}\n",
        "plugins/aai-stack-sqlite/skills/better-sqlite3-patterns/SKILL.md": "---\nname: better-sqlite3-patterns\ndescription: better-sqlite3 library patterns\nuser-invocable: false\n---\n\n# better-sqlite3 Patterns Skill\n\nPatterns for using the better-sqlite3 library in Node.js.\n\n## Installation and Setup\n\n### Installation\n\n```bash\nnpm install better-sqlite3\nnpm install --save-dev @types/better-sqlite3\n```\n\n### Database Connection\n\n```typescript\nimport Database from 'better-sqlite3'\n\n// Basic connection\nconst db = new Database('database.db')\n\n// With options\nconst db = new Database('database.db', {\n  readonly: false,\n  fileMustExist: false,\n  timeout: 5000,\n  verbose: console.log,  // Log all queries\n})\n\n// In-memory database\nconst db = new Database(':memory:')\n\n// Close connection\ndb.close()\n```\n\n### Initial Configuration\n\n```typescript\nfunction initDatabase(path: string): Database.Database {\n  const db = new Database(path)\n\n  // Performance settings\n  db.pragma('journal_mode = WAL')\n  db.pragma('synchronous = NORMAL')\n  db.pragma('cache_size = -64000')\n  db.pragma('foreign_keys = ON')\n  db.pragma('temp_store = MEMORY')\n\n  return db\n}\n```\n\n## Prepared Statements\n\n### Creating Statements\n\n```typescript\n// Prepare a statement\nconst stmt = db.prepare('SELECT * FROM users WHERE id = ?')\n\n// Execute methods\nconst user = stmt.get(1)           // Single row\nconst users = stmt.all()           // All rows as array\nfor (const row of stmt.iterate()) { // Iterator\n  console.log(row)\n}\n\n// Run for INSERT/UPDATE/DELETE\nconst insert = db.prepare('INSERT INTO users (email) VALUES (?)')\nconst info = insert.run('test@example.com')\nconsole.log(info.lastInsertRowid)\nconsole.log(info.changes)\n```\n\n### Parameter Binding\n\n```typescript\n// Positional parameters\nconst stmt = db.prepare('SELECT * FROM users WHERE id = ? AND active = ?')\nstmt.get(1, true)\n\n// Named parameters with @ prefix\nconst stmt = db.prepare('SELECT * FROM users WHERE id = @id')\nstmt.get({ id: 1 })\n\n// Named parameters with $ prefix\nconst stmt = db.prepare('SELECT * FROM users WHERE id = $id')\nstmt.get({ id: 1 })\n\n// Named parameters with : prefix\nconst stmt = db.prepare('SELECT * FROM users WHERE id = :id')\nstmt.get({ id: 1 })\n\n// Bind permanently\nconst stmt = db.prepare('SELECT * FROM users WHERE status = ?')\nconst activeUsersStmt = stmt.bind('active')\nactiveUsersStmt.all()  // No need to pass parameter\n```\n\n### Statement Methods\n\n```typescript\nconst stmt = db.prepare('SELECT id, name FROM users')\n\n// Get column names\nconsole.log(stmt.columns())\n// [{ name: 'id', type: 'INTEGER', ... }, { name: 'name', type: 'TEXT', ... }]\n\n// Pluck first column\nconst ids = stmt.pluck().all()  // [1, 2, 3, ...]\n\n// Expand rows to arrays\nconst rows = stmt.expand().all()\n// [{ users: { id: 1, name: 'John' } }, ...]\n\n// Raw mode (arrays instead of objects)\nconst rows = stmt.raw().all()\n// [[1, 'John'], [2, 'Jane'], ...]\n```\n\n## Transactions\n\n### Transaction Helper\n\n```typescript\n// Create transaction function\nconst insertUsers = db.transaction((users) => {\n  const insert = db.prepare('INSERT INTO users (email, name) VALUES (@email, @name)')\n\n  for (const user of users) {\n    insert.run(user)\n  }\n\n  return users.length\n})\n\n// Execute transaction\nconst count = insertUsers([\n  { email: 'a@test.com', name: 'Alice' },\n  { email: 'b@test.com', name: 'Bob' },\n])\n```\n\n### Transaction Modes\n\n```typescript\nconst transfer = db.transaction((from, to, amount) => {\n  db.prepare('UPDATE accounts SET balance = balance - ? WHERE id = ?').run(amount, from)\n  db.prepare('UPDATE accounts SET balance = balance + ? WHERE id = ?').run(amount, to)\n})\n\n// Different modes\ntransfer(1, 2, 100)            // Deferred (default)\ntransfer.deferred(1, 2, 100)   // Explicit deferred\ntransfer.immediate(1, 2, 100)  // Immediate lock\ntransfer.exclusive(1, 2, 100)  // Exclusive lock\n```\n\n### Nested Transactions\n\n```typescript\nconst outer = db.transaction(() => {\n  db.prepare('INSERT INTO logs (msg) VALUES (?)').run('outer start')\n\n  const inner = db.transaction(() => {\n    db.prepare('INSERT INTO logs (msg) VALUES (?)').run('inner')\n  })\n\n  try {\n    inner()\n  } catch (e) {\n    // Inner rolled back, outer continues\n  }\n\n  db.prepare('INSERT INTO logs (msg) VALUES (?)').run('outer end')\n})\n\nouter()\n```\n\n## User-Defined Functions\n\n### Scalar Functions\n\n```typescript\n// Simple function\ndb.function('double', (x) => x * 2)\ndb.prepare('SELECT double(value) FROM numbers').all()\n\n// With options\ndb.function('uuid', {\n  deterministic: false,\n  varargs: false,\n}, () => crypto.randomUUID())\n\n// Multiple arguments\ndb.function('concat_ws', {\n  varargs: true,\n}, (separator, ...args) => args.join(separator))\n```\n\n### Aggregate Functions\n\n```typescript\ndb.aggregate('json_array_agg', {\n  start: () => [],\n  step: (array, value) => {\n    array.push(value)\n    return array\n  },\n  result: (array) => JSON.stringify(array),\n})\n\ndb.prepare('SELECT json_array_agg(name) FROM users').pluck().get()\n// '[\"Alice\",\"Bob\",\"Charlie\"]'\n```\n\n### Table-Valued Functions\n\n```typescript\ndb.table('generate_series', {\n  columns: ['value'],\n  parameters: ['start', 'stop', 'step'],\n  *rows(start, stop, step = 1) {\n    for (let i = start; i <= stop; i += step) {\n      yield [i]\n    }\n  },\n})\n\ndb.prepare('SELECT * FROM generate_series(1, 10, 2)').all()\n// [{ value: 1 }, { value: 3 }, { value: 5 }, ...]\n```\n\n## Backup and Restore\n\n### Online Backup\n\n```typescript\n// Backup to file\nawait db.backup('backup.db')\n\n// With progress callback\nawait db.backup('backup.db', {\n  progress({ totalPages, remainingPages }) {\n    console.log(`Progress: ${totalPages - remainingPages}/${totalPages}`)\n    return 200  // Pages per step (0 = all at once)\n  }\n})\n```\n\n### Serialize/Deserialize\n\n```typescript\n// Serialize to buffer\nconst buffer = db.serialize()\n\n// Create from buffer\nconst db2 = new Database(buffer)\n\n// Or write to file\nfs.writeFileSync('backup.db', buffer)\n```\n\n## Type Safety\n\n### TypeScript Patterns\n\n```typescript\ninterface User {\n  id: number\n  email: string\n  name: string | null\n  created_at: string\n}\n\n// Typed query function\nfunction getUser(id: number): User | undefined {\n  return db.prepare<[number], User>('SELECT * FROM users WHERE id = ?').get(id)\n}\n\nfunction getAllUsers(): User[] {\n  return db.prepare<[], User>('SELECT * FROM users').all()\n}\n\nfunction createUser(email: string, name?: string): number {\n  const result = db.prepare('INSERT INTO users (email, name) VALUES (?, ?)')\n    .run(email, name ?? null)\n  return Number(result.lastInsertRowid)\n}\n```\n\n### Repository Pattern\n\n```typescript\nclass UserRepository {\n  private db: Database.Database\n\n  private statements = {\n    getById: this.db.prepare<[number], User>('SELECT * FROM users WHERE id = ?'),\n    getByEmail: this.db.prepare<[string], User>('SELECT * FROM users WHERE email = ?'),\n    insert: this.db.prepare('INSERT INTO users (email, name) VALUES (@email, @name)'),\n    update: this.db.prepare('UPDATE users SET name = @name WHERE id = @id'),\n    delete: this.db.prepare('DELETE FROM users WHERE id = ?'),\n  }\n\n  constructor(db: Database.Database) {\n    this.db = db\n  }\n\n  findById(id: number): User | undefined {\n    return this.statements.getById.get(id)\n  }\n\n  findByEmail(email: string): User | undefined {\n    return this.statements.getByEmail.get(email)\n  }\n\n  create(user: Omit<User, 'id' | 'created_at'>): number {\n    const result = this.statements.insert.run(user)\n    return Number(result.lastInsertRowid)\n  }\n\n  update(id: number, data: Partial<User>): boolean {\n    const result = this.statements.update.run({ id, ...data })\n    return result.changes > 0\n  }\n\n  delete(id: number): boolean {\n    const result = this.statements.delete.run(id)\n    return result.changes > 0\n  }\n}\n```\n\n## Error Handling\n\n```typescript\nimport Database from 'better-sqlite3'\n\ntry {\n  db.exec('INVALID SQL')\n} catch (error) {\n  if (error instanceof Database.SqliteError) {\n    console.error('SQLite error:', error.code, error.message)\n    // Common codes: SQLITE_CONSTRAINT, SQLITE_BUSY, SQLITE_LOCKED\n  }\n}\n\n// Check if database is open\nif (db.open) {\n  // Safe to use\n}\n\n// Check if in transaction\nif (db.inTransaction) {\n  // Currently in a transaction\n}\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-sqlite/skills/sqlite-optimization/SKILL.md": "---\nname: sqlite-optimization\ndescription: SQLite performance optimization techniques\nuser-invocable: false\n---\n\n# SQLite Optimization Skill\n\nTechniques for optimizing SQLite performance.\n\n## PRAGMA Settings\n\n### Performance PRAGMAs\n\n```sql\n-- Enable Write-Ahead Logging (recommended for most use cases)\nPRAGMA journal_mode = WAL;\n\n-- Synchronous mode (tradeoff: safety vs speed)\nPRAGMA synchronous = NORMAL;  -- Good balance\n-- PRAGMA synchronous = OFF;  -- Fastest, but risky\n-- PRAGMA synchronous = FULL; -- Safest, slowest\n\n-- Memory cache size (in KB, negative = KB)\nPRAGMA cache_size = -64000;  -- 64MB\n\n-- Memory-mapped I/O (bytes)\nPRAGMA mmap_size = 268435456;  -- 256MB\n\n-- Busy timeout\nPRAGMA busy_timeout = 5000;  -- 5 seconds\n\n-- Temp storage\nPRAGMA temp_store = MEMORY;\n```\n\n### Query Analysis PRAGMAs\n\n```sql\n-- Check foreign keys\nPRAGMA foreign_key_check;\n\n-- Integrity check\nPRAGMA integrity_check;\n\n-- Quick check\nPRAGMA quick_check;\n\n-- Show table info\nPRAGMA table_info(users);\n\n-- Show index list\nPRAGMA index_list(users);\n```\n\n## Query Optimization\n\n### EXPLAIN QUERY PLAN\n\n```sql\n-- Analyze query execution plan\nEXPLAIN QUERY PLAN\nSELECT * FROM users WHERE email = 'test@example.com';\n\n-- Look for:\n-- \"SCAN\" = full table scan (often bad)\n-- \"SEARCH\" = using index (good)\n-- \"USING INDEX\" = covering index (best)\n```\n\n### Index Optimization\n\n```sql\n-- Covering index (includes all needed columns)\nCREATE INDEX idx_users_covering\nON users(email, name, created_at);\n\n-- Now this query uses index only, no table access:\nSELECT email, name FROM users WHERE email LIKE 'test%';\n\n-- Partial index for common queries\nCREATE INDEX idx_active_users\nON users(email)\nWHERE active = 1;\n\n-- Expression index\nCREATE INDEX idx_users_lower_email\nON users(lower(email));\n```\n\n### Query Patterns\n\n```sql\n-- BAD: OR conditions prevent index use\nSELECT * FROM users\nWHERE email = 'a@test.com' OR email = 'b@test.com';\n\n-- GOOD: Use UNION or IN\nSELECT * FROM users WHERE email IN ('a@test.com', 'b@test.com');\n\n-- BAD: Function on indexed column\nSELECT * FROM users WHERE lower(email) = 'test@example.com';\n\n-- GOOD: Create expression index or normalize data\nSELECT * FROM users WHERE email = 'test@example.com';\n\n-- BAD: LIKE with leading wildcard\nSELECT * FROM users WHERE name LIKE '%smith';\n\n-- GOOD: LIKE without leading wildcard uses index\nSELECT * FROM users WHERE name LIKE 'smith%';\n\n-- Use LIMIT for pagination\nSELECT * FROM users ORDER BY id LIMIT 20 OFFSET 0;\n\n-- Better pagination with keyset\nSELECT * FROM users WHERE id > ? ORDER BY id LIMIT 20;\n```\n\n## Bulk Operations\n\n### Batch Inserts\n\n```typescript\n// Transaction for bulk inserts (much faster)\nconst insertMany = db.transaction((items) => {\n  const stmt = db.prepare('INSERT INTO items (name, value) VALUES (?, ?)')\n  for (const item of items) {\n    stmt.run(item.name, item.value)\n  }\n})\n\n// 10x-100x faster than individual inserts\ninsertMany(largeArray)\n```\n\n### Bulk Updates\n\n```sql\n-- Update with CASE\nUPDATE products\nSET price = CASE id\n  WHEN 1 THEN 9.99\n  WHEN 2 THEN 19.99\n  WHEN 3 THEN 29.99\nEND\nWHERE id IN (1, 2, 3);\n\n-- Update from temp table\nCREATE TEMP TABLE updates (id INTEGER, new_price REAL);\nINSERT INTO updates VALUES (1, 9.99), (2, 19.99);\n\nUPDATE products\nSET price = (SELECT new_price FROM updates WHERE updates.id = products.id)\nWHERE id IN (SELECT id FROM updates);\n\nDROP TABLE updates;\n```\n\n## Memory Management\n\n### Connection Pooling Pattern\n\n```typescript\nclass SQLitePool {\n  private db: Database.Database\n\n  constructor(filename: string) {\n    this.db = new Database(filename)\n    this.db.pragma('journal_mode = WAL')\n    this.db.pragma('cache_size = -64000')\n  }\n\n  query<T>(sql: string, params?: any[]): T[] {\n    const stmt = this.db.prepare(sql)\n    return params ? stmt.all(...params) : stmt.all()\n  }\n\n  run(sql: string, params?: any[]): Database.RunResult {\n    const stmt = this.db.prepare(sql)\n    return params ? stmt.run(...params) : stmt.run()\n  }\n\n  transaction<T>(fn: () => T): T {\n    return this.db.transaction(fn)()\n  }\n\n  close(): void {\n    this.db.close()\n  }\n}\n```\n\n### Statement Caching\n\n```typescript\nclass StatementCache {\n  private cache = new Map<string, Database.Statement>()\n  private db: Database.Database\n\n  constructor(db: Database.Database) {\n    this.db = db\n  }\n\n  prepare(sql: string): Database.Statement {\n    let stmt = this.cache.get(sql)\n    if (!stmt) {\n      stmt = this.db.prepare(sql)\n      this.cache.set(sql, stmt)\n    }\n    return stmt\n  }\n\n  clear(): void {\n    this.cache.clear()\n  }\n}\n```\n\n## Concurrency\n\n### Read-Write Separation\n\n```typescript\n// WAL mode allows concurrent reads\nconst readDb = new Database('app.db', { readonly: true })\nconst writeDb = new Database('app.db')\n\nwriteDb.pragma('journal_mode = WAL')\n\n// Reads don't block writes, writes don't block reads\nconst users = readDb.prepare('SELECT * FROM users').all()\nwriteDb.prepare('INSERT INTO users (email) VALUES (?)').run('new@example.com')\n```\n\n### Busy Handling\n\n```typescript\n// Automatic retry on busy\nconst db = new Database('app.db')\ndb.pragma('busy_timeout = 5000')  // Wait up to 5 seconds\n\n// Or custom busy handler\ndb.function('busy_handler', (count) => {\n  if (count < 10) {\n    // Wait and retry\n    return 1\n  }\n  // Give up\n  return 0\n})\n```\n\n## Vacuum and Maintenance\n\n### Regular Maintenance\n\n```sql\n-- Rebuild database, reclaim space\nVACUUM;\n\n-- Analyze for query planner\nANALYZE;\n\n-- Reindex\nREINDEX;\n\n-- Check integrity\nPRAGMA integrity_check;\n```\n\n### Auto-Vacuum\n\n```sql\n-- Enable auto-vacuum (must be done before creating tables)\nPRAGMA auto_vacuum = FULL;\n\n-- Incremental auto-vacuum\nPRAGMA auto_vacuum = INCREMENTAL;\nPRAGMA incremental_vacuum(100);  -- Free 100 pages\n```\n\n## Benchmarking\n\n### Simple Benchmark\n\n```typescript\nfunction benchmark(name: string, fn: () => void, iterations = 1000): void {\n  const start = performance.now()\n  for (let i = 0; i < iterations; i++) {\n    fn()\n  }\n  const elapsed = performance.now() - start\n  console.log(`${name}: ${elapsed.toFixed(2)}ms (${(elapsed/iterations).toFixed(3)}ms/op)`)\n}\n\n// Compare approaches\nbenchmark('Without transaction', () => {\n  db.prepare('INSERT INTO test (value) VALUES (?)').run(1)\n})\n\nconst insertTx = db.transaction((n) => {\n  const stmt = db.prepare('INSERT INTO test (value) VALUES (?)')\n  for (let i = 0; i < n; i++) {\n    stmt.run(i)\n  }\n})\n\nbenchmark('With transaction', () => {\n  insertTx(100)\n}, 10)\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-sqlite/skills/sqlite-patterns/SKILL.md": "---\nname: sqlite-patterns\ndescription: SQLite database patterns and best practices\nuser-invocable: false\n---\n\n# SQLite Patterns Skill\n\nPatterns for using SQLite databases effectively.\n\n## Database Setup\n\n### Creating Database\n\n```typescript\nimport Database from 'better-sqlite3'\n\n// Open or create database\nconst db = new Database('app.db')\n\n// With options\nconst db = new Database('app.db', {\n  readonly: false,\n  fileMustExist: false,\n  timeout: 5000,\n  verbose: console.log,\n})\n\n// In-memory database\nconst db = new Database(':memory:')\n```\n\n### Table Creation\n\n```sql\n-- Basic table\nCREATE TABLE IF NOT EXISTS users (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  email TEXT UNIQUE NOT NULL,\n  name TEXT,\n  created_at TEXT DEFAULT (datetime('now'))\n);\n\n-- With foreign key\nCREATE TABLE IF NOT EXISTS posts (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  title TEXT NOT NULL,\n  content TEXT,\n  user_id INTEGER NOT NULL,\n  created_at TEXT DEFAULT (datetime('now')),\n  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n);\n\n-- Enable foreign keys (must be done per connection)\nPRAGMA foreign_keys = ON;\n```\n\n### Indexes\n\n```sql\n-- Single column index\nCREATE INDEX IF NOT EXISTS idx_users_email ON users(email);\n\n-- Composite index\nCREATE INDEX IF NOT EXISTS idx_posts_user_date ON posts(user_id, created_at);\n\n-- Unique index\nCREATE UNIQUE INDEX IF NOT EXISTS idx_users_email ON users(email);\n\n-- Partial index\nCREATE INDEX IF NOT EXISTS idx_active_users\nON users(last_login)\nWHERE status = 'active';\n```\n\n## Basic CRUD\n\n### Insert\n\n```typescript\n// Single insert\nconst insert = db.prepare('INSERT INTO users (email, name) VALUES (?, ?)')\nconst result = insert.run('john@example.com', 'John')\nconsole.log(result.lastInsertRowid)\n\n// Named parameters\nconst insert = db.prepare('INSERT INTO users (email, name) VALUES (@email, @name)')\ninsert.run({ email: 'john@example.com', name: 'John' })\n\n// Insert or replace\nconst upsert = db.prepare(`\n  INSERT INTO users (email, name)\n  VALUES (@email, @name)\n  ON CONFLICT(email) DO UPDATE SET name = excluded.name\n`)\nupsert.run({ email: 'john@example.com', name: 'John Updated' })\n\n// Bulk insert\nconst insertMany = db.prepare('INSERT INTO users (email, name) VALUES (?, ?)')\nconst insertAll = db.transaction((users) => {\n  for (const user of users) {\n    insertMany.run(user.email, user.name)\n  }\n})\ninsertAll([\n  { email: 'user1@example.com', name: 'User 1' },\n  { email: 'user2@example.com', name: 'User 2' },\n])\n```\n\n### Select\n\n```typescript\n// Single row\nconst getUser = db.prepare('SELECT * FROM users WHERE id = ?')\nconst user = getUser.get(1)\n\n// Multiple rows\nconst getAllUsers = db.prepare('SELECT * FROM users')\nconst users = getAllUsers.all()\n\n// Iterate (memory-efficient)\nconst stmt = db.prepare('SELECT * FROM users')\nfor (const user of stmt.iterate()) {\n  console.log(user)\n}\n\n// With joins\nconst getPostsWithAuthor = db.prepare(`\n  SELECT posts.*, users.name as author_name\n  FROM posts\n  JOIN users ON posts.user_id = users.id\n  WHERE posts.user_id = ?\n`)\nconst posts = getPostsWithAuthor.all(userId)\n\n// Pluck (single column)\nconst getEmails = db.prepare('SELECT email FROM users').pluck()\nconst emails = getEmails.all()  // ['email1', 'email2', ...]\n```\n\n### Update\n\n```typescript\nconst update = db.prepare('UPDATE users SET name = ? WHERE id = ?')\nconst result = update.run('New Name', 1)\nconsole.log(result.changes)  // Number of affected rows\n\n// Named parameters\nconst update = db.prepare('UPDATE users SET name = @name WHERE id = @id')\nupdate.run({ name: 'New Name', id: 1 })\n```\n\n### Delete\n\n```typescript\nconst remove = db.prepare('DELETE FROM users WHERE id = ?')\nconst result = remove.run(1)\nconsole.log(result.changes)\n\n// Soft delete pattern\nconst softDelete = db.prepare('UPDATE users SET deleted_at = datetime(\"now\") WHERE id = ?')\nsoftDelete.run(1)\n```\n\n## Transactions\n\n### Basic Transaction\n\n```typescript\n// Using transaction()\nconst transfer = db.transaction((from, to, amount) => {\n  db.prepare('UPDATE accounts SET balance = balance - ? WHERE id = ?')\n    .run(amount, from)\n  db.prepare('UPDATE accounts SET balance = balance + ? WHERE id = ?')\n    .run(amount, to)\n})\n\ntransfer(1, 2, 100)  // Automatically commits or rolls back\n\n// Manual transaction\ndb.exec('BEGIN TRANSACTION')\ntry {\n  // operations\n  db.exec('COMMIT')\n} catch (error) {\n  db.exec('ROLLBACK')\n  throw error\n}\n```\n\n### Nested Transactions\n\n```typescript\n// Savepoints for nested transactions\nconst outerTransaction = db.transaction(() => {\n  db.prepare('INSERT INTO logs (message) VALUES (?)').run('Start')\n\n  const innerTransaction = db.transaction(() => {\n    db.prepare('INSERT INTO logs (message) VALUES (?)').run('Inner')\n  })\n\n  innerTransaction()\n  db.prepare('INSERT INTO logs (message) VALUES (?)').run('End')\n})\n\nouterTransaction()\n```\n\n### Deferred/Immediate Transactions\n\n```typescript\n// Immediate transaction (acquire write lock immediately)\nconst transaction = db.transaction(() => {\n  // operations\n})\ntransaction.immediate()\n\n// Exclusive transaction\ntransaction.exclusive()\n\n// Deferred (default)\ntransaction.deferred()\n```\n\n## Advanced Queries\n\n### JSON Functions\n\n```sql\n-- Store JSON\nCREATE TABLE settings (\n  id INTEGER PRIMARY KEY,\n  data TEXT  -- JSON stored as text\n);\n\n-- Query JSON\nSELECT json_extract(data, '$.theme') as theme\nFROM settings\nWHERE id = 1;\n\n-- Update JSON\nUPDATE settings\nSET data = json_set(data, '$.theme', 'dark')\nWHERE id = 1;\n\n-- Array operations\nSELECT json_each.value\nFROM settings, json_each(json_extract(data, '$.tags'));\n```\n\n### Full-Text Search\n\n```sql\n-- Create FTS table\nCREATE VIRTUAL TABLE posts_fts USING fts5(\n  title,\n  content,\n  content='posts',\n  content_rowid='id'\n);\n\n-- Populate\nINSERT INTO posts_fts(rowid, title, content)\nSELECT id, title, content FROM posts;\n\n-- Search\nSELECT posts.*\nFROM posts\nJOIN posts_fts ON posts.id = posts_fts.rowid\nWHERE posts_fts MATCH 'search term';\n\n-- Rank by relevance\nSELECT posts.*, rank\nFROM posts_fts\nJOIN posts ON posts.id = posts_fts.rowid\nWHERE posts_fts MATCH 'search term'\nORDER BY rank;\n```\n\n### Window Functions\n\n```sql\n-- Row number\nSELECT\n  id,\n  name,\n  ROW_NUMBER() OVER (ORDER BY created_at DESC) as row_num\nFROM users;\n\n-- Rank within groups\nSELECT\n  user_id,\n  score,\n  RANK() OVER (PARTITION BY user_id ORDER BY score DESC) as rank\nFROM scores;\n\n-- Running total\nSELECT\n  date,\n  amount,\n  SUM(amount) OVER (ORDER BY date) as running_total\nFROM transactions;\n```\n\n## Data Types\n\n### Date/Time Handling\n\n```typescript\n// Store as ISO string\ndb.prepare('INSERT INTO events (name, date) VALUES (?, ?)')\n  .run('Event', new Date().toISOString())\n\n// Query dates\nconst getRecent = db.prepare(`\n  SELECT * FROM events\n  WHERE date >= datetime('now', '-7 days')\n  ORDER BY date DESC\n`)\n\n// Date functions\nconst stmt = db.prepare(`\n  SELECT\n    date(created_at) as date,\n    time(created_at) as time,\n    strftime('%Y-%m', created_at) as month\n  FROM events\n`)\n```\n\n### Boolean Handling\n\n```sql\n-- SQLite uses 0/1 for booleans\nCREATE TABLE items (\n  id INTEGER PRIMARY KEY,\n  active INTEGER DEFAULT 1  -- 1 = true, 0 = false\n);\n\n-- Query\nSELECT * FROM items WHERE active = 1;\nSELECT * FROM items WHERE active;  -- Implicit boolean\n```\n\n## Performance\n\n### Prepared Statements\n\n```typescript\n// Prepare once, execute many\nconst insert = db.prepare('INSERT INTO logs (message) VALUES (?)')\nconst selectById = db.prepare('SELECT * FROM logs WHERE id = ?')\n\n// Cache for reuse\nconst statements = {\n  insert: db.prepare('INSERT INTO users (email) VALUES (?)'),\n  getById: db.prepare('SELECT * FROM users WHERE id = ?'),\n  getAll: db.prepare('SELECT * FROM users'),\n}\n```\n\n### WAL Mode\n\n```sql\n-- Enable Write-Ahead Logging for better concurrency\nPRAGMA journal_mode = WAL;\nPRAGMA synchronous = NORMAL;\nPRAGMA cache_size = -64000;  -- 64MB cache\nPRAGMA busy_timeout = 5000;\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-tailwind/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-tailwind\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Tailwind CSS patterns - utility-first styling, components, responsive design\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"tailwind\", \"css\", \"styling\", \"utility-first\", \"responsive\"]\n}\n",
        "plugins/aai-stack-tailwind/skills/tailwind-components/SKILL.md": "---\nname: tailwind-components\ndescription: Common Tailwind component patterns\nuser-invocable: false\n---\n\n# Tailwind Components Skill\n\nCommon component patterns built with Tailwind CSS.\n\n## Buttons\n\n### Button Variants\n\n```html\n<!-- Primary button -->\n<button class=\"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg\n               hover:bg-blue-700 focus:outline-none focus:ring-2\n               focus:ring-blue-500 focus:ring-offset-2 transition-colors\">\n  Primary\n</button>\n\n<!-- Secondary button -->\n<button class=\"px-4 py-2 bg-gray-200 text-gray-800 font-medium rounded-lg\n               hover:bg-gray-300 focus:outline-none focus:ring-2\n               focus:ring-gray-500 focus:ring-offset-2 transition-colors\">\n  Secondary\n</button>\n\n<!-- Outline button -->\n<button class=\"px-4 py-2 border-2 border-blue-600 text-blue-600 font-medium\n               rounded-lg hover:bg-blue-50 focus:outline-none focus:ring-2\n               focus:ring-blue-500 focus:ring-offset-2 transition-colors\">\n  Outline\n</button>\n\n<!-- Ghost button -->\n<button class=\"px-4 py-2 text-blue-600 font-medium rounded-lg\n               hover:bg-blue-50 focus:outline-none focus:ring-2\n               focus:ring-blue-500 focus:ring-offset-2 transition-colors\">\n  Ghost\n</button>\n\n<!-- Destructive button -->\n<button class=\"px-4 py-2 bg-red-600 text-white font-medium rounded-lg\n               hover:bg-red-700 focus:outline-none focus:ring-2\n               focus:ring-red-500 focus:ring-offset-2 transition-colors\">\n  Delete\n</button>\n```\n\n### Button Sizes\n\n```html\n<!-- Small -->\n<button class=\"px-3 py-1.5 text-sm\">Small</button>\n\n<!-- Medium (default) -->\n<button class=\"px-4 py-2 text-base\">Medium</button>\n\n<!-- Large -->\n<button class=\"px-6 py-3 text-lg\">Large</button>\n```\n\n### Button with Icon\n\n```html\n<button class=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600\n               text-white rounded-lg hover:bg-blue-700\">\n  <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n          d=\"M12 4v16m8-8H4\" />\n  </svg>\n  Add Item\n</button>\n```\n\n## Cards\n\n### Basic Card\n\n```html\n<div class=\"bg-white rounded-lg shadow-md p-6\">\n  <h3 class=\"text-lg font-semibold text-gray-900\">Card Title</h3>\n  <p class=\"mt-2 text-gray-600\">Card description text goes here.</p>\n</div>\n```\n\n### Card with Image\n\n```html\n<div class=\"bg-white rounded-lg shadow-md overflow-hidden\">\n  <img src=\"image.jpg\" alt=\"\" class=\"w-full h-48 object-cover\" />\n  <div class=\"p-6\">\n    <h3 class=\"text-lg font-semibold text-gray-900\">Card Title</h3>\n    <p class=\"mt-2 text-gray-600\">Card description.</p>\n    <button class=\"mt-4 text-blue-600 hover:text-blue-700 font-medium\">\n      Learn more \n    </button>\n  </div>\n</div>\n```\n\n### Interactive Card\n\n```html\n<div class=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg\n            transition-shadow cursor-pointer border border-gray-200\n            hover:border-blue-500\">\n  <h3 class=\"text-lg font-semibold text-gray-900\">Interactive Card</h3>\n  <p class=\"mt-2 text-gray-600\">Click me!</p>\n</div>\n```\n\n## Forms\n\n### Input Field\n\n```html\n<div>\n  <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n    Email\n  </label>\n  <input type=\"email\"\n         class=\"w-full px-3 py-2 border border-gray-300 rounded-lg\n                focus:outline-none focus:ring-2 focus:ring-blue-500\n                focus:border-blue-500 placeholder-gray-400\"\n         placeholder=\"you@example.com\" />\n</div>\n```\n\n### Input with Error\n\n```html\n<div>\n  <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n    Email\n  </label>\n  <input type=\"email\"\n         class=\"w-full px-3 py-2 border border-red-500 rounded-lg\n                focus:outline-none focus:ring-2 focus:ring-red-500\n                focus:border-red-500 bg-red-50\"\n         value=\"invalid-email\" />\n  <p class=\"mt-1 text-sm text-red-600\">Please enter a valid email address.</p>\n</div>\n```\n\n### Select\n\n```html\n<div>\n  <label class=\"block text-sm font-medium text-gray-700 mb-1\">\n    Country\n  </label>\n  <select class=\"w-full px-3 py-2 border border-gray-300 rounded-lg\n                 focus:outline-none focus:ring-2 focus:ring-blue-500\n                 focus:border-blue-500 bg-white\">\n    <option>United States</option>\n    <option>Canada</option>\n    <option>Mexico</option>\n  </select>\n</div>\n```\n\n### Checkbox\n\n```html\n<label class=\"flex items-center gap-2 cursor-pointer\">\n  <input type=\"checkbox\"\n         class=\"w-4 h-4 text-blue-600 border-gray-300 rounded\n                focus:ring-blue-500 focus:ring-2\" />\n  <span class=\"text-sm text-gray-700\">Accept terms and conditions</span>\n</label>\n```\n\n### Radio Group\n\n```html\n<div class=\"space-y-2\">\n  <label class=\"flex items-center gap-2 cursor-pointer\">\n    <input type=\"radio\" name=\"plan\" value=\"free\"\n           class=\"w-4 h-4 text-blue-600 border-gray-300\n                  focus:ring-blue-500 focus:ring-2\" />\n    <span class=\"text-sm text-gray-700\">Free</span>\n  </label>\n  <label class=\"flex items-center gap-2 cursor-pointer\">\n    <input type=\"radio\" name=\"plan\" value=\"pro\"\n           class=\"w-4 h-4 text-blue-600 border-gray-300\n                  focus:ring-blue-500 focus:ring-2\" />\n    <span class=\"text-sm text-gray-700\">Pro</span>\n  </label>\n</div>\n```\n\n## Navigation\n\n### Navbar\n\n```html\n<nav class=\"bg-white border-b border-gray-200\">\n  <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n    <div class=\"flex justify-between h-16 items-center\">\n      <div class=\"flex items-center gap-8\">\n        <a href=\"/\" class=\"text-xl font-bold text-gray-900\">Logo</a>\n        <div class=\"hidden md:flex gap-6\">\n          <a href=\"#\" class=\"text-gray-600 hover:text-gray-900\">Home</a>\n          <a href=\"#\" class=\"text-gray-600 hover:text-gray-900\">Products</a>\n          <a href=\"#\" class=\"text-gray-600 hover:text-gray-900\">About</a>\n        </div>\n      </div>\n      <button class=\"px-4 py-2 bg-blue-600 text-white rounded-lg\">\n        Sign Up\n      </button>\n    </div>\n  </div>\n</nav>\n```\n\n### Sidebar\n\n```html\n<aside class=\"w-64 bg-gray-900 text-white min-h-screen\">\n  <div class=\"p-4\">\n    <h2 class=\"text-xl font-bold\">Dashboard</h2>\n  </div>\n  <nav class=\"mt-4\">\n    <a href=\"#\" class=\"flex items-center gap-3 px-4 py-3 bg-gray-800\n                       text-white hover:bg-gray-700\">\n      <svg class=\"w-5 h-5\">...</svg>\n      Overview\n    </a>\n    <a href=\"#\" class=\"flex items-center gap-3 px-4 py-3\n                       text-gray-300 hover:bg-gray-800 hover:text-white\">\n      <svg class=\"w-5 h-5\">...</svg>\n      Analytics\n    </a>\n  </nav>\n</aside>\n```\n\n## Modals\n\n### Basic Modal\n\n```html\n<!-- Overlay -->\n<div class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n  <!-- Modal -->\n  <div class=\"bg-white rounded-lg shadow-xl max-w-md w-full mx-4\">\n    <!-- Header -->\n    <div class=\"flex items-center justify-between p-4 border-b\">\n      <h3 class=\"text-lg font-semibold text-gray-900\">Modal Title</h3>\n      <button class=\"text-gray-400 hover:text-gray-600\">\n        <svg class=\"w-6 h-6\">...</svg>\n      </button>\n    </div>\n    <!-- Body -->\n    <div class=\"p-4\">\n      <p class=\"text-gray-600\">Modal content goes here.</p>\n    </div>\n    <!-- Footer -->\n    <div class=\"flex justify-end gap-3 p-4 border-t\">\n      <button class=\"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg\">\n        Cancel\n      </button>\n      <button class=\"px-4 py-2 bg-blue-600 text-white rounded-lg\">\n        Confirm\n      </button>\n    </div>\n  </div>\n</div>\n```\n\n## Alerts\n\n### Alert Variants\n\n```html\n<!-- Info -->\n<div class=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n  <div class=\"flex items-start gap-3\">\n    <svg class=\"w-5 h-5 text-blue-500 mt-0.5\">...</svg>\n    <div>\n      <h4 class=\"font-medium text-blue-800\">Information</h4>\n      <p class=\"text-sm text-blue-700 mt-1\">This is an info message.</p>\n    </div>\n  </div>\n</div>\n\n<!-- Success -->\n<div class=\"p-4 bg-green-50 border border-green-200 rounded-lg\">\n  <div class=\"flex items-start gap-3\">\n    <svg class=\"w-5 h-5 text-green-500 mt-0.5\">...</svg>\n    <div>\n      <h4 class=\"font-medium text-green-800\">Success</h4>\n      <p class=\"text-sm text-green-700 mt-1\">Operation completed.</p>\n    </div>\n  </div>\n</div>\n\n<!-- Warning -->\n<div class=\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n  <div class=\"flex items-start gap-3\">\n    <svg class=\"w-5 h-5 text-yellow-500 mt-0.5\">...</svg>\n    <div>\n      <h4 class=\"font-medium text-yellow-800\">Warning</h4>\n      <p class=\"text-sm text-yellow-700 mt-1\">Please review this.</p>\n    </div>\n  </div>\n</div>\n\n<!-- Error -->\n<div class=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\n  <div class=\"flex items-start gap-3\">\n    <svg class=\"w-5 h-5 text-red-500 mt-0.5\">...</svg>\n    <div>\n      <h4 class=\"font-medium text-red-800\">Error</h4>\n      <p class=\"text-sm text-red-700 mt-1\">Something went wrong.</p>\n    </div>\n  </div>\n</div>\n```\n\n## Badges\n\n```html\n<!-- Solid badges -->\n<span class=\"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded\">\n  New\n</span>\n<span class=\"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded\">\n  Active\n</span>\n<span class=\"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded\">\n  Urgent\n</span>\n\n<!-- Pill badges -->\n<span class=\"px-3 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full\">\n  Label\n</span>\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-tailwind/skills/tailwind-patterns/SKILL.md": "---\nname: tailwind-patterns\ndescription: Tailwind CSS utility patterns and best practices\nuser-invocable: false\n---\n\n# Tailwind Patterns Skill\n\nPatterns for using Tailwind CSS effectively.\n\n## Layout Patterns\n\n### Flexbox\n\n```html\n<!-- Center content -->\n<div class=\"flex items-center justify-center h-screen\">\n  <div>Centered content</div>\n</div>\n\n<!-- Space between items -->\n<div class=\"flex justify-between items-center\">\n  <div>Left</div>\n  <div>Right</div>\n</div>\n\n<!-- Flex direction and wrap -->\n<div class=\"flex flex-col md:flex-row flex-wrap gap-4\">\n  <div class=\"flex-1\">Item 1</div>\n  <div class=\"flex-1\">Item 2</div>\n  <div class=\"flex-1\">Item 3</div>\n</div>\n\n<!-- Flex grow/shrink -->\n<div class=\"flex\">\n  <div class=\"flex-shrink-0 w-16\">Fixed</div>\n  <div class=\"flex-grow\">Grows</div>\n</div>\n```\n\n### Grid\n\n```html\n<!-- Basic grid -->\n<div class=\"grid grid-cols-3 gap-4\">\n  <div>1</div>\n  <div>2</div>\n  <div>3</div>\n</div>\n\n<!-- Responsive grid -->\n<div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n  <div>Card 1</div>\n  <div>Card 2</div>\n  <div>Card 3</div>\n  <div>Card 4</div>\n</div>\n\n<!-- Grid spanning -->\n<div class=\"grid grid-cols-4 gap-4\">\n  <div class=\"col-span-2\">Wide</div>\n  <div>Normal</div>\n  <div>Normal</div>\n</div>\n\n<!-- Auto-fit grid -->\n<div class=\"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4\">\n  <div>Auto-sized card</div>\n</div>\n```\n\n### Container\n\n```html\n<!-- Centered container -->\n<div class=\"container mx-auto px-4\">\n  Content with max-width and horizontal padding\n</div>\n\n<!-- Custom max-width -->\n<div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n  Content with specific max-width\n</div>\n```\n\n## Typography\n\n### Text Styles\n\n```html\n<!-- Headings -->\n<h1 class=\"text-4xl font-bold text-gray-900\">Heading 1</h1>\n<h2 class=\"text-3xl font-semibold text-gray-800\">Heading 2</h2>\n<h3 class=\"text-2xl font-medium text-gray-700\">Heading 3</h3>\n\n<!-- Body text -->\n<p class=\"text-base text-gray-600 leading-relaxed\">\n  Body text with comfortable line height\n</p>\n\n<!-- Small text -->\n<span class=\"text-sm text-gray-500\">Caption text</span>\n\n<!-- Text decoration -->\n<p class=\"underline decoration-blue-500 decoration-2\">Underlined</p>\n<p class=\"line-through text-gray-400\">Strikethrough</p>\n\n<!-- Text overflow -->\n<p class=\"truncate\">Long text that gets truncated...</p>\n<p class=\"line-clamp-3\">Text clamped to 3 lines...</p>\n```\n\n### Font Weights and Sizes\n\n```html\n<p class=\"font-thin\">100</p>\n<p class=\"font-light\">300</p>\n<p class=\"font-normal\">400</p>\n<p class=\"font-medium\">500</p>\n<p class=\"font-semibold\">600</p>\n<p class=\"font-bold\">700</p>\n<p class=\"font-extrabold\">800</p>\n```\n\n## Spacing\n\n### Padding and Margin\n\n```html\n<!-- All sides -->\n<div class=\"p-4 m-4\">...</div>\n\n<!-- Horizontal/Vertical -->\n<div class=\"px-4 py-2\">...</div>\n<div class=\"mx-auto my-8\">...</div>\n\n<!-- Individual sides -->\n<div class=\"pt-4 pr-2 pb-4 pl-2\">...</div>\n<div class=\"mt-4 mr-2 mb-4 ml-2\">...</div>\n\n<!-- Negative margin -->\n<div class=\"-mt-4 -mx-2\">...</div>\n\n<!-- Space between children -->\n<div class=\"space-y-4\">\n  <div>Item 1</div>\n  <div>Item 2</div>\n  <div>Item 3</div>\n</div>\n```\n\n## Colors\n\n### Background and Text\n\n```html\n<!-- Solid colors -->\n<div class=\"bg-blue-500 text-white\">...</div>\n<div class=\"bg-gray-100 text-gray-900\">...</div>\n\n<!-- With opacity -->\n<div class=\"bg-blue-500/50\">50% opacity background</div>\n<div class=\"text-gray-900/75\">75% opacity text</div>\n\n<!-- Gradients -->\n<div class=\"bg-gradient-to-r from-blue-500 to-purple-500\">\n  Gradient background\n</div>\n\n<div class=\"bg-gradient-to-b from-gray-900 via-gray-700 to-gray-900\">\n  Three-stop gradient\n</div>\n```\n\n### Borders\n\n```html\n<!-- Border color and width -->\n<div class=\"border border-gray-300\">...</div>\n<div class=\"border-2 border-blue-500\">...</div>\n\n<!-- Individual borders -->\n<div class=\"border-b border-gray-200\">Bottom border only</div>\n<div class=\"border-l-4 border-blue-500\">Left accent</div>\n\n<!-- Border radius -->\n<div class=\"rounded\">Small radius</div>\n<div class=\"rounded-lg\">Large radius</div>\n<div class=\"rounded-full\">Full (pill/circle)</div>\n<div class=\"rounded-t-lg rounded-b-none\">Top only</div>\n```\n\n## Responsive Design\n\n### Breakpoints\n\n```html\n<!-- Mobile-first responsive -->\n<div class=\"text-sm md:text-base lg:text-lg\">\n  Responsive text size\n</div>\n\n<div class=\"hidden md:block\">\n  Hidden on mobile, visible on tablet+\n</div>\n\n<div class=\"block md:hidden\">\n  Visible on mobile only\n</div>\n\n<!-- Responsive grid -->\n<div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n  ...\n</div>\n\n<!-- Responsive padding -->\n<div class=\"p-4 md:p-6 lg:p-8\">\n  ...\n</div>\n```\n\n### Breakpoint Reference\n\n```\nsm:  640px   @media (min-width: 640px)\nmd:  768px   @media (min-width: 768px)\nlg:  1024px  @media (min-width: 1024px)\nxl:  1280px  @media (min-width: 1280px)\n2xl: 1536px  @media (min-width: 1536px)\n```\n\n## States\n\n### Hover, Focus, Active\n\n```html\n<!-- Hover -->\n<button class=\"bg-blue-500 hover:bg-blue-600\">\n  Hover me\n</button>\n\n<!-- Focus -->\n<input class=\"border focus:border-blue-500 focus:ring-2 focus:ring-blue-200\" />\n\n<!-- Active -->\n<button class=\"bg-blue-500 active:bg-blue-700\">\n  Click me\n</button>\n\n<!-- Group hover -->\n<div class=\"group\">\n  <div class=\"group-hover:text-blue-500\">\n    Changes when parent is hovered\n  </div>\n</div>\n\n<!-- Peer states -->\n<input class=\"peer\" type=\"checkbox\" />\n<label class=\"peer-checked:text-blue-500\">\n  Checked label\n</label>\n```\n\n### Disabled and Dark Mode\n\n```html\n<!-- Disabled state -->\n<button class=\"bg-blue-500 disabled:bg-gray-300 disabled:cursor-not-allowed\">\n  Submit\n</button>\n\n<!-- Dark mode -->\n<div class=\"bg-white dark:bg-gray-800 text-gray-900 dark:text-white\">\n  Dark mode aware\n</div>\n```\n\n## Animation\n\n### Transitions\n\n```html\n<!-- Basic transition -->\n<button class=\"transition-colors duration-200 hover:bg-blue-600\">\n  Smooth color change\n</button>\n\n<!-- Transform transition -->\n<div class=\"transition-transform duration-300 hover:scale-105\">\n  Grows on hover\n</div>\n\n<!-- All properties -->\n<div class=\"transition-all duration-300 ease-in-out\">\n  ...\n</div>\n```\n\n### Built-in Animations\n\n```html\n<div class=\"animate-spin\">Spinning</div>\n<div class=\"animate-ping\">Pinging</div>\n<div class=\"animate-pulse\">Pulsing</div>\n<div class=\"animate-bounce\">Bouncing</div>\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-tailwind/skills/tailwind-responsive/SKILL.md": "---\nname: tailwind-responsive\ndescription: Tailwind responsive design patterns\nuser-invocable: false\n---\n\n# Tailwind Responsive Skill\n\nPatterns for responsive design with Tailwind CSS.\n\n## Mobile-First Approach\n\n### Breakpoint System\n\n```html\n<!-- Base styles apply to all sizes -->\n<!-- Prefixed styles apply at that breakpoint and up -->\n\n<div class=\"\n  w-full      /* All sizes: full width */\n  sm:w-1/2    /* 640px+: half width */\n  md:w-1/3    /* 768px+: third width */\n  lg:w-1/4    /* 1024px+: quarter width */\n  xl:w-1/5    /* 1280px+: fifth width */\n  2xl:w-1/6   /* 1536px+: sixth width */\n\">\n  Responsive width\n</div>\n```\n\n### Breakpoint Reference\n\n```\nsm:  640px   /* Small tablets, large phones */\nmd:  768px   /* Tablets */\nlg:  1024px  /* Small laptops */\nxl:  1280px  /* Desktops */\n2xl: 1536px  /* Large desktops */\n```\n\n## Responsive Layouts\n\n### Stacking to Row\n\n```html\n<!-- Stack on mobile, row on larger screens -->\n<div class=\"flex flex-col md:flex-row gap-4\">\n  <div class=\"flex-1\">Item 1</div>\n  <div class=\"flex-1\">Item 2</div>\n  <div class=\"flex-1\">Item 3</div>\n</div>\n```\n\n### Responsive Grid\n\n```html\n<!-- 1 column mobile, 2 tablet, 3 desktop, 4 large -->\n<div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n  <div>Card 1</div>\n  <div>Card 2</div>\n  <div>Card 3</div>\n  <div>Card 4</div>\n</div>\n```\n\n### Sidebar Layout\n\n```html\n<!-- Sidebar hidden on mobile, visible on desktop -->\n<div class=\"flex\">\n  <aside class=\"hidden lg:block w-64 bg-gray-100\">\n    Sidebar\n  </aside>\n  <main class=\"flex-1 p-4\">\n    Main content\n  </main>\n</div>\n\n<!-- Mobile: full width sidebar as overlay -->\n<div class=\"relative\">\n  <aside class=\"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-xl\n                transform -translate-x-full lg:translate-x-0 lg:static\n                transition-transform duration-300\">\n    Sidebar\n  </aside>\n  <main class=\"lg:ml-64\">\n    Main content\n  </main>\n</div>\n```\n\n## Responsive Typography\n\n### Text Sizes\n\n```html\n<h1 class=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold\">\n  Responsive Heading\n</h1>\n\n<p class=\"text-sm sm:text-base lg:text-lg\">\n  Responsive body text\n</p>\n```\n\n### Line Clamp\n\n```html\n<!-- More lines on larger screens -->\n<p class=\"line-clamp-2 sm:line-clamp-3 lg:line-clamp-none\">\n  Long text that gets truncated differently at each breakpoint...\n</p>\n```\n\n### Text Alignment\n\n```html\n<h1 class=\"text-center md:text-left\">\n  Centered on mobile, left on desktop\n</h1>\n```\n\n## Responsive Spacing\n\n### Padding and Margin\n\n```html\n<!-- Increase spacing on larger screens -->\n<div class=\"p-4 sm:p-6 lg:p-8 xl:p-12\">\n  Responsive padding\n</div>\n\n<div class=\"my-4 md:my-8 lg:my-12\">\n  Responsive vertical margin\n</div>\n\n<!-- Responsive gap -->\n<div class=\"flex flex-col gap-2 sm:gap-4 lg:gap-6\">\n  <div>Item 1</div>\n  <div>Item 2</div>\n</div>\n```\n\n### Container Widths\n\n```html\n<!-- Custom max-widths at breakpoints -->\n<div class=\"max-w-sm sm:max-w-md md:max-w-lg lg:max-w-4xl xl:max-w-6xl mx-auto\">\n  Content\n</div>\n```\n\n## Show/Hide Elements\n\n### Visibility Toggles\n\n```html\n<!-- Hidden on mobile, visible on desktop -->\n<div class=\"hidden md:block\">Desktop only</div>\n\n<!-- Visible on mobile, hidden on desktop -->\n<div class=\"md:hidden\">Mobile only</div>\n\n<!-- Show at specific range only -->\n<div class=\"hidden sm:block lg:hidden\">Tablet only</div>\n```\n\n### Mobile Menu Toggle\n\n```html\n<!-- Desktop navigation -->\n<nav class=\"hidden md:flex gap-6\">\n  <a href=\"#\">Home</a>\n  <a href=\"#\">About</a>\n  <a href=\"#\">Contact</a>\n</nav>\n\n<!-- Mobile menu button -->\n<button class=\"md:hidden\">\n  <svg class=\"w-6 h-6\">...</svg>\n</button>\n```\n\n## Responsive Images\n\n### Image Sizing\n\n```html\n<!-- Full width on mobile, constrained on desktop -->\n<img src=\"hero.jpg\"\n     class=\"w-full md:w-1/2 lg:w-1/3 h-auto object-cover\" />\n\n<!-- Different aspect ratios -->\n<div class=\"aspect-video md:aspect-square lg:aspect-[4/3]\">\n  <img src=\"image.jpg\" class=\"w-full h-full object-cover\" />\n</div>\n```\n\n### Image Grid\n\n```html\n<div class=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-4\">\n  <img src=\"1.jpg\" class=\"aspect-square object-cover\" />\n  <img src=\"2.jpg\" class=\"aspect-square object-cover\" />\n  <img src=\"3.jpg\" class=\"aspect-square object-cover\" />\n  <img src=\"4.jpg\" class=\"aspect-square object-cover\" />\n</div>\n```\n\n## Responsive Components\n\n### Card Grid\n\n```html\n<div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6\">\n  <div class=\"bg-white rounded-lg shadow p-4 md:p-6\">\n    <h3 class=\"text-lg md:text-xl font-semibold\">Card Title</h3>\n    <p class=\"text-sm md:text-base text-gray-600 mt-2\">Description</p>\n  </div>\n</div>\n```\n\n### Responsive Table\n\n```html\n<!-- Cards on mobile, table on desktop -->\n<div class=\"md:hidden space-y-4\">\n  <!-- Mobile card view -->\n  <div class=\"bg-white rounded-lg shadow p-4\">\n    <div class=\"font-semibold\">Name: John Doe</div>\n    <div class=\"text-gray-600\">Email: john@example.com</div>\n  </div>\n</div>\n\n<table class=\"hidden md:table w-full\">\n  <thead>\n    <tr>\n      <th class=\"text-left p-3\">Name</th>\n      <th class=\"text-left p-3\">Email</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td class=\"p-3\">John Doe</td>\n      <td class=\"p-3\">john@example.com</td>\n    </tr>\n  </tbody>\n</table>\n```\n\n### Responsive Navigation\n\n```html\n<nav class=\"bg-white shadow\">\n  <div class=\"max-w-7xl mx-auto px-4\">\n    <div class=\"flex justify-between items-center h-16\">\n      <a href=\"/\" class=\"text-xl font-bold\">Logo</a>\n\n      <!-- Desktop nav -->\n      <div class=\"hidden md:flex items-center gap-6\">\n        <a href=\"#\" class=\"text-gray-600 hover:text-gray-900\">Home</a>\n        <a href=\"#\" class=\"text-gray-600 hover:text-gray-900\">About</a>\n        <button class=\"px-4 py-2 bg-blue-600 text-white rounded-lg\">\n          Sign Up\n        </button>\n      </div>\n\n      <!-- Mobile menu button -->\n      <button class=\"md:hidden p-2\">\n        <svg class=\"w-6 h-6\">...</svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- Mobile nav (toggle visibility with JS) -->\n  <div class=\"md:hidden border-t px-4 py-4 space-y-4\">\n    <a href=\"#\" class=\"block text-gray-600\">Home</a>\n    <a href=\"#\" class=\"block text-gray-600\">About</a>\n    <button class=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg\">\n      Sign Up\n    </button>\n  </div>\n</nav>\n```\n\n## Custom Breakpoints\n\n```javascript\n// tailwind.config.js\nmodule.exports = {\n  theme: {\n    screens: {\n      'xs': '475px',\n      'sm': '640px',\n      'md': '768px',\n      'lg': '1024px',\n      'xl': '1280px',\n      '2xl': '1536px',\n      '3xl': '1920px',\n    },\n  },\n}\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-typeorm/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-typeorm\",\n  \"version\": \"1.0.0\",\n  \"description\": \"TypeORM patterns - entities, migrations, QueryBuilder patterns\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"typeorm\", \"orm\", \"database\", \"entities\", \"migrations\"]\n}\n",
        "plugins/aai-stack-typeorm/skills/typeorm-entities/SKILL.md": "---\nname: typeorm-entities\ndescription: TypeORM entity definition patterns\nuser-invocable: false\n---\n\n# TypeORM Entities Skill\n\nPatterns for defining TypeORM entities.\n\n## Basic Entities\n\n### Simple Entity\n\n```typescript\nimport {\n  Entity,\n  PrimaryGeneratedColumn,\n  Column,\n  CreateDateColumn,\n  UpdateDateColumn,\n} from 'typeorm'\n\n@Entity('users')\nexport class User {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @Column({ unique: true })\n  email: string\n\n  @Column({ nullable: true })\n  name: string\n\n  @Column({ default: true })\n  active: boolean\n\n  @CreateDateColumn()\n  createdAt: Date\n\n  @UpdateDateColumn()\n  updatedAt: Date\n}\n```\n\n### Column Types\n\n```typescript\n@Entity()\nexport class Example {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  // Strings\n  @Column()\n  name: string\n\n  @Column({ length: 500 })\n  description: string\n\n  @Column('text')\n  longText: string\n\n  // Numbers\n  @Column('int')\n  count: number\n\n  @Column('decimal', { precision: 10, scale: 2 })\n  price: number\n\n  @Column('bigint')\n  largeNumber: string  // bigint stored as string\n\n  // Boolean\n  @Column('boolean', { default: false })\n  isActive: boolean\n\n  // Dates\n  @Column('timestamp')\n  eventDate: Date\n\n  @Column('date')\n  birthDate: Date\n\n  // JSON\n  @Column('jsonb')\n  metadata: Record<string, any>\n\n  // Arrays (PostgreSQL)\n  @Column('text', { array: true })\n  tags: string[]\n\n  // Enum\n  @Column({\n    type: 'enum',\n    enum: UserRole,\n    default: UserRole.USER,\n  })\n  role: UserRole\n}\n\nenum UserRole {\n  ADMIN = 'admin',\n  USER = 'user',\n  GUEST = 'guest',\n}\n```\n\n### Primary Keys\n\n```typescript\n// UUID (recommended)\n@PrimaryGeneratedColumn('uuid')\nid: string\n\n// Auto-increment\n@PrimaryGeneratedColumn()\nid: number\n\n// Identity (PostgreSQL)\n@PrimaryGeneratedColumn('identity')\nid: number\n\n// Custom primary key\n@PrimaryColumn()\nid: string\n\n// Composite primary key\n@Entity()\nexport class OrderItem {\n  @PrimaryColumn()\n  orderId: string\n\n  @PrimaryColumn()\n  productId: string\n\n  @Column()\n  quantity: number\n}\n```\n\n## Relations\n\n### One-to-One\n\n```typescript\n@Entity()\nexport class User {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @OneToOne(() => Profile, profile => profile.user, {\n    cascade: true,\n    eager: false,\n  })\n  profile: Profile\n}\n\n@Entity()\nexport class Profile {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @Column({ nullable: true })\n  bio: string\n\n  @OneToOne(() => User, user => user.profile, {\n    onDelete: 'CASCADE',\n  })\n  @JoinColumn()\n  user: User\n\n  @Column()\n  userId: string\n}\n```\n\n### One-to-Many / Many-to-One\n\n```typescript\n@Entity()\nexport class User {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @OneToMany(() => Post, post => post.author)\n  posts: Post[]\n}\n\n@Entity()\nexport class Post {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @Column()\n  title: string\n\n  @ManyToOne(() => User, user => user.posts, {\n    onDelete: 'CASCADE',\n  })\n  @JoinColumn({ name: 'author_id' })\n  author: User\n\n  @Column({ name: 'author_id' })\n  authorId: string\n}\n```\n\n### Many-to-Many\n\n```typescript\n// Implicit join table\n@Entity()\nexport class Post {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @ManyToMany(() => Category, category => category.posts)\n  @JoinTable({\n    name: 'post_categories',\n    joinColumn: { name: 'post_id', referencedColumnName: 'id' },\n    inverseJoinColumn: { name: 'category_id', referencedColumnName: 'id' },\n  })\n  categories: Category[]\n}\n\n@Entity()\nexport class Category {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @Column()\n  name: string\n\n  @ManyToMany(() => Post, post => post.categories)\n  posts: Post[]\n}\n\n// Explicit join table (with extra columns)\n@Entity()\nexport class PostTag {\n  @PrimaryColumn()\n  postId: string\n\n  @PrimaryColumn()\n  tagId: string\n\n  @Column({ default: () => 'CURRENT_TIMESTAMP' })\n  createdAt: Date\n\n  @ManyToOne(() => Post, post => post.tags, { onDelete: 'CASCADE' })\n  @JoinColumn({ name: 'postId' })\n  post: Post\n\n  @ManyToOne(() => Tag, tag => tag.posts, { onDelete: 'CASCADE' })\n  @JoinColumn({ name: 'tagId' })\n  tag: Tag\n}\n```\n\n### Self-Referencing\n\n```typescript\n@Entity()\nexport class Category {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @Column()\n  name: string\n\n  @Column({ nullable: true })\n  parentId: string\n\n  @ManyToOne(() => Category, category => category.children)\n  @JoinColumn({ name: 'parentId' })\n  parent: Category\n\n  @OneToMany(() => Category, category => category.parent)\n  children: Category[]\n}\n```\n\n## Indexes\n\n```typescript\n@Entity()\n@Index(['email'])\n@Index(['organizationId', 'email'], { unique: true })\nexport class User {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @Index()\n  @Column()\n  email: string\n\n  @Index()\n  @Column()\n  organizationId: string\n\n  // Partial index (PostgreSQL)\n  @Index({ where: '\"active\" = true' })\n  @Column()\n  active: boolean\n}\n```\n\n## Entity Inheritance\n\n### Single Table Inheritance\n\n```typescript\n@Entity()\n@TableInheritance({ column: { type: 'varchar', name: 'type' } })\nexport abstract class Content {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @Column()\n  title: string\n}\n\n@ChildEntity()\nexport class Article extends Content {\n  @Column()\n  body: string\n}\n\n@ChildEntity()\nexport class Video extends Content {\n  @Column()\n  url: string\n\n  @Column()\n  duration: number\n}\n```\n\n### Embedded Entities\n\n```typescript\nexport class Address {\n  @Column()\n  street: string\n\n  @Column()\n  city: string\n\n  @Column()\n  country: string\n}\n\n@Entity()\nexport class User {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @Column(() => Address)\n  address: Address\n}\n```\n\n## Entity Listeners\n\n```typescript\n@Entity()\nexport class User {\n  @PrimaryGeneratedColumn('uuid')\n  id: string\n\n  @Column()\n  password: string\n\n  @BeforeInsert()\n  async hashPassword() {\n    this.password = await bcrypt.hash(this.password, 10)\n  }\n\n  @BeforeUpdate()\n  async hashPasswordOnUpdate() {\n    if (this.password) {\n      this.password = await bcrypt.hash(this.password, 10)\n    }\n  }\n\n  @AfterLoad()\n  async loadRelatedData() {\n    // Called after entity is loaded\n  }\n\n  @AfterInsert()\n  logInsert() {\n    console.log('User inserted:', this.id)\n  }\n}\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n- `database-developer` agent\n",
        "plugins/aai-stack-typeorm/skills/typeorm-migrations/SKILL.md": "---\nname: typeorm-migrations\ndescription: TypeORM migration patterns\nuser-invocable: false\n---\n\n# TypeORM Migrations Skill\n\nPatterns for managing database migrations with TypeORM.\n\n## Configuration\n\n### Data Source Configuration\n\n```typescript\n// data-source.ts\nimport { DataSource } from 'typeorm'\nimport { User } from './entities/User'\nimport { Post } from './entities/Post'\n\nexport const AppDataSource = new DataSource({\n  type: 'postgres',\n  host: process.env.DB_HOST || 'localhost',\n  port: parseInt(process.env.DB_PORT || '5432'),\n  username: process.env.DB_USER,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_NAME,\n  entities: [User, Post],\n  migrations: ['src/migrations/*.ts'],\n  migrationsTableName: 'migrations',\n  logging: process.env.NODE_ENV === 'development',\n})\n```\n\n### CLI Configuration\n\n```javascript\n// typeorm.config.js (for CLI)\nmodule.exports = {\n  type: 'postgres',\n  host: process.env.DB_HOST,\n  port: parseInt(process.env.DB_PORT),\n  username: process.env.DB_USER,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_NAME,\n  entities: ['dist/entities/**/*.js'],\n  migrations: ['dist/migrations/**/*.js'],\n  cli: {\n    migrationsDir: 'src/migrations',\n  },\n}\n```\n\n## Creating Migrations\n\n### Generate Migration\n\n```bash\n# Generate migration from entity changes\nnpx typeorm migration:generate -d src/data-source.ts src/migrations/AddUserRole\n\n# Create empty migration\nnpx typeorm migration:create src/migrations/SeedInitialData\n```\n\n### Migration Structure\n\n```typescript\nimport { MigrationInterface, QueryRunner, Table, TableColumn } from 'typeorm'\n\nexport class AddUserRole1700000000000 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    // Migration logic\n  }\n\n  public async down(queryRunner: QueryRunner): Promise<void> {\n    // Rollback logic\n  }\n}\n```\n\n### Table Operations\n\n```typescript\nexport class CreateUsersTable1700000000000 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    await queryRunner.createTable(\n      new Table({\n        name: 'users',\n        columns: [\n          {\n            name: 'id',\n            type: 'uuid',\n            isPrimary: true,\n            generationStrategy: 'uuid',\n            default: 'uuid_generate_v4()',\n          },\n          {\n            name: 'email',\n            type: 'varchar',\n            isUnique: true,\n          },\n          {\n            name: 'name',\n            type: 'varchar',\n            isNullable: true,\n          },\n          {\n            name: 'created_at',\n            type: 'timestamp',\n            default: 'CURRENT_TIMESTAMP',\n          },\n          {\n            name: 'updated_at',\n            type: 'timestamp',\n            default: 'CURRENT_TIMESTAMP',\n          },\n        ],\n      }),\n      true\n    )\n\n    // Create index\n    await queryRunner.createIndex('users', new TableIndex({\n      name: 'IDX_USERS_EMAIL',\n      columnNames: ['email'],\n    }))\n  }\n\n  public async down(queryRunner: QueryRunner): Promise<void> {\n    await queryRunner.dropIndex('users', 'IDX_USERS_EMAIL')\n    await queryRunner.dropTable('users')\n  }\n}\n```\n\n### Column Operations\n\n```typescript\nexport class AddUserRole1700000000001 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    // Add column\n    await queryRunner.addColumn(\n      'users',\n      new TableColumn({\n        name: 'role',\n        type: 'varchar',\n        default: \"'user'\",\n      })\n    )\n\n    // Change column\n    await queryRunner.changeColumn(\n      'users',\n      'name',\n      new TableColumn({\n        name: 'name',\n        type: 'varchar',\n        length: '255',\n        isNullable: false,\n        default: \"''\",\n      })\n    )\n  }\n\n  public async down(queryRunner: QueryRunner): Promise<void> {\n    await queryRunner.dropColumn('users', 'role')\n  }\n}\n```\n\n### Foreign Keys\n\n```typescript\nexport class AddPostsTable1700000000002 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    await queryRunner.createTable(\n      new Table({\n        name: 'posts',\n        columns: [\n          {\n            name: 'id',\n            type: 'uuid',\n            isPrimary: true,\n            default: 'uuid_generate_v4()',\n          },\n          {\n            name: 'title',\n            type: 'varchar',\n          },\n          {\n            name: 'author_id',\n            type: 'uuid',\n          },\n        ],\n      }),\n      true\n    )\n\n    await queryRunner.createForeignKey(\n      'posts',\n      new TableForeignKey({\n        columnNames: ['author_id'],\n        referencedTableName: 'users',\n        referencedColumnNames: ['id'],\n        onDelete: 'CASCADE',\n        onUpdate: 'CASCADE',\n      })\n    )\n  }\n\n  public async down(queryRunner: QueryRunner): Promise<void> {\n    const table = await queryRunner.getTable('posts')\n    const foreignKey = table.foreignKeys.find(\n      fk => fk.columnNames.indexOf('author_id') !== -1\n    )\n    await queryRunner.dropForeignKey('posts', foreignKey)\n    await queryRunner.dropTable('posts')\n  }\n}\n```\n\n## Running Migrations\n\n### CLI Commands\n\n```bash\n# Run pending migrations\nnpx typeorm migration:run -d src/data-source.ts\n\n# Revert last migration\nnpx typeorm migration:revert -d src/data-source.ts\n\n# Show migrations status\nnpx typeorm migration:show -d src/data-source.ts\n```\n\n### Programmatic Execution\n\n```typescript\nimport { AppDataSource } from './data-source'\n\nasync function runMigrations() {\n  await AppDataSource.initialize()\n\n  // Run pending migrations\n  await AppDataSource.runMigrations()\n\n  // Or run specific migration\n  await AppDataSource.runMigrations({ transaction: 'all' })\n\n  // Revert\n  await AppDataSource.undoLastMigration()\n\n  await AppDataSource.destroy()\n}\n```\n\n## Data Migrations\n\n### Seed Data\n\n```typescript\nexport class SeedRoles1700000000003 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    await queryRunner.query(`\n      INSERT INTO roles (id, name, permissions)\n      VALUES\n        ('admin', 'Administrator', '[\"read\", \"write\", \"delete\"]'),\n        ('user', 'User', '[\"read\"]'),\n        ('guest', 'Guest', '[]')\n      ON CONFLICT (id) DO NOTHING\n    `)\n  }\n\n  public async down(queryRunner: QueryRunner): Promise<void> {\n    await queryRunner.query(`\n      DELETE FROM roles WHERE id IN ('admin', 'user', 'guest')\n    `)\n  }\n}\n```\n\n### Data Transformation\n\n```typescript\nexport class MigrateUserNames1700000000004 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    // Add new columns\n    await queryRunner.addColumns('users', [\n      new TableColumn({ name: 'first_name', type: 'varchar', isNullable: true }),\n      new TableColumn({ name: 'last_name', type: 'varchar', isNullable: true }),\n    ])\n\n    // Migrate data\n    await queryRunner.query(`\n      UPDATE users\n      SET\n        first_name = split_part(name, ' ', 1),\n        last_name = CASE\n          WHEN position(' ' in name) > 0\n          THEN substring(name from position(' ' in name) + 1)\n          ELSE NULL\n        END\n    `)\n\n    // Drop old column\n    await queryRunner.dropColumn('users', 'name')\n  }\n\n  public async down(queryRunner: QueryRunner): Promise<void> {\n    await queryRunner.addColumn(\n      'users',\n      new TableColumn({ name: 'name', type: 'varchar', isNullable: true })\n    )\n\n    await queryRunner.query(`\n      UPDATE users\n      SET name = CONCAT(first_name, ' ', COALESCE(last_name, ''))\n    `)\n\n    await queryRunner.dropColumns('users', ['first_name', 'last_name'])\n  }\n}\n```\n\n## Best Practices\n\n### Transaction Handling\n\n```typescript\nexport class SafeMigration1700000000005 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    // Migrations run in transaction by default\n    // For operations that can't be in transaction (e.g., CREATE INDEX CONCURRENTLY)\n    // use queryRunner.connection.query() instead\n  }\n}\n```\n\n### Idempotent Migrations\n\n```typescript\nexport class IdempotentMigration implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    // Check if column exists\n    const table = await queryRunner.getTable('users')\n    const columnExists = table?.columns.find(c => c.name === 'new_column')\n\n    if (!columnExists) {\n      await queryRunner.addColumn(\n        'users',\n        new TableColumn({ name: 'new_column', type: 'varchar' })\n      )\n    }\n  }\n}\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n- `database-developer` agent\n",
        "plugins/aai-stack-typeorm/skills/typeorm-queries/SKILL.md": "---\nname: typeorm-queries\ndescription: TypeORM query patterns\nuser-invocable: false\n---\n\n# TypeORM Queries Skill\n\nPatterns for querying data with TypeORM.\n\n## Repository Pattern\n\n### Basic CRUD\n\n```typescript\nimport { Repository } from 'typeorm'\nimport { AppDataSource } from './data-source'\nimport { User } from './entities/User'\n\nconst userRepository: Repository<User> = AppDataSource.getRepository(User)\n\n// Create\nconst user = userRepository.create({\n  email: 'john@example.com',\n  name: 'John',\n})\nawait userRepository.save(user)\n\n// Or create and save\nconst user = await userRepository.save({\n  email: 'john@example.com',\n  name: 'John',\n})\n\n// Find one\nconst user = await userRepository.findOne({\n  where: { id: '123' },\n})\n\nconst user = await userRepository.findOneBy({ email: 'john@example.com' })\n\nconst user = await userRepository.findOneOrFail({\n  where: { id: '123' },\n})\n\n// Find many\nconst users = await userRepository.find()\n\nconst users = await userRepository.find({\n  where: { active: true },\n  order: { createdAt: 'DESC' },\n  take: 10,\n  skip: 0,\n})\n\n// Update\nawait userRepository.update({ id: '123' }, { name: 'John Doe' })\n\n// Or find and save\nconst user = await userRepository.findOneBy({ id: '123' })\nuser.name = 'John Doe'\nawait userRepository.save(user)\n\n// Delete\nawait userRepository.delete({ id: '123' })\n\n// Soft delete (requires @DeleteDateColumn)\nawait userRepository.softDelete({ id: '123' })\nawait userRepository.restore({ id: '123' })\n```\n\n### Advanced Find Options\n\n```typescript\nconst users = await userRepository.find({\n  // Select specific columns\n  select: ['id', 'email', 'name'],\n\n  // Where conditions\n  where: {\n    active: true,\n    role: 'admin',\n  },\n\n  // Or conditions\n  where: [\n    { role: 'admin' },\n    { role: 'moderator' },\n  ],\n\n  // Relations\n  relations: ['profile', 'posts'],\n\n  // Order\n  order: {\n    createdAt: 'DESC',\n    name: 'ASC',\n  },\n\n  // Pagination\n  take: 10,\n  skip: 20,\n\n  // Include soft-deleted\n  withDeleted: true,\n\n  // Cache\n  cache: true,\n  // or\n  cache: {\n    id: 'users_active',\n    milliseconds: 60000,\n  },\n})\n```\n\n### Where Operators\n\n```typescript\nimport { LessThan, MoreThan, Between, Like, In, IsNull, Not } from 'typeorm'\n\nconst users = await userRepository.find({\n  where: {\n    // Comparison\n    age: MoreThan(18),\n    age: LessThan(65),\n    age: Between(18, 65),\n\n    // String matching\n    email: Like('%@example.com'),\n    name: ILike('%john%'),  // Case-insensitive\n\n    // In array\n    role: In(['admin', 'moderator']),\n\n    // Null checks\n    deletedAt: IsNull(),\n    deletedAt: Not(IsNull()),\n\n    // Not\n    status: Not('inactive'),\n\n    // Raw query\n    createdAt: Raw(alias => `${alias} > NOW() - INTERVAL '7 days'`),\n  },\n})\n```\n\n## Query Builder\n\n### Basic Queries\n\n```typescript\n// Select\nconst users = await userRepository\n  .createQueryBuilder('user')\n  .where('user.active = :active', { active: true })\n  .orderBy('user.createdAt', 'DESC')\n  .getMany()\n\n// Single result\nconst user = await userRepository\n  .createQueryBuilder('user')\n  .where('user.id = :id', { id: '123' })\n  .getOne()\n\n// Count\nconst count = await userRepository\n  .createQueryBuilder('user')\n  .where('user.active = :active', { active: true })\n  .getCount()\n\n// Raw result\nconst result = await userRepository\n  .createQueryBuilder('user')\n  .select('user.role', 'role')\n  .addSelect('COUNT(*)', 'count')\n  .groupBy('user.role')\n  .getRawMany()\n```\n\n### Joins\n\n```typescript\n// Left join\nconst users = await userRepository\n  .createQueryBuilder('user')\n  .leftJoinAndSelect('user.profile', 'profile')\n  .leftJoinAndSelect('user.posts', 'post')\n  .getMany()\n\n// Inner join\nconst users = await userRepository\n  .createQueryBuilder('user')\n  .innerJoinAndSelect('user.posts', 'post')\n  .where('post.published = :published', { published: true })\n  .getMany()\n\n// Join without select\nconst users = await userRepository\n  .createQueryBuilder('user')\n  .leftJoin('user.posts', 'post')\n  .where('post.published = :published', { published: true })\n  .getMany()\n\n// Join with condition\nconst users = await userRepository\n  .createQueryBuilder('user')\n  .leftJoinAndSelect('user.posts', 'post', 'post.published = :published', {\n    published: true,\n  })\n  .getMany()\n```\n\n### Complex Conditions\n\n```typescript\nconst users = await userRepository\n  .createQueryBuilder('user')\n  .where('user.active = :active', { active: true })\n  .andWhere('user.role IN (:...roles)', { roles: ['admin', 'moderator'] })\n  .orWhere(\n    new Brackets(qb => {\n      qb.where('user.email LIKE :email', { email: '%@admin.com' })\n        .andWhere('user.verified = :verified', { verified: true })\n    })\n  )\n  .getMany()\n\n// Subquery\nconst users = await userRepository\n  .createQueryBuilder('user')\n  .where(qb => {\n    const subQuery = qb\n      .subQuery()\n      .select('post.authorId')\n      .from(Post, 'post')\n      .where('post.published = :published', { published: true })\n      .getQuery()\n    return 'user.id IN ' + subQuery\n  })\n  .getMany()\n```\n\n### Aggregations\n\n```typescript\n// Group by with aggregates\nconst stats = await userRepository\n  .createQueryBuilder('user')\n  .select('user.role', 'role')\n  .addSelect('COUNT(*)', 'count')\n  .addSelect('AVG(user.age)', 'avgAge')\n  .groupBy('user.role')\n  .having('COUNT(*) > :min', { min: 5 })\n  .getRawMany()\n```\n\n### Update and Delete\n\n```typescript\n// Update\nawait userRepository\n  .createQueryBuilder()\n  .update(User)\n  .set({ active: false })\n  .where('lastLogin < :date', { date: thirtyDaysAgo })\n  .execute()\n\n// Delete\nawait userRepository\n  .createQueryBuilder()\n  .delete()\n  .from(User)\n  .where('id = :id', { id: '123' })\n  .execute()\n\n// Soft delete\nawait userRepository\n  .createQueryBuilder()\n  .softDelete()\n  .where('id = :id', { id: '123' })\n  .execute()\n```\n\n## Transactions\n\n```typescript\nimport { AppDataSource } from './data-source'\n\n// Using transaction manager\nawait AppDataSource.transaction(async (manager) => {\n  const user = manager.create(User, { email: 'new@example.com' })\n  await manager.save(user)\n\n  const profile = manager.create(Profile, { userId: user.id })\n  await manager.save(profile)\n})\n\n// Using query runner\nconst queryRunner = AppDataSource.createQueryRunner()\nawait queryRunner.connect()\nawait queryRunner.startTransaction()\n\ntry {\n  await queryRunner.manager.save(user)\n  await queryRunner.manager.save(profile)\n  await queryRunner.commitTransaction()\n} catch (err) {\n  await queryRunner.rollbackTransaction()\n  throw err\n} finally {\n  await queryRunner.release()\n}\n```\n\n## Performance\n\n### Pagination\n\n```typescript\n// Offset pagination\nconst [users, total] = await userRepository.findAndCount({\n  skip: (page - 1) * pageSize,\n  take: pageSize,\n})\n\n// Cursor pagination\nconst users = await userRepository\n  .createQueryBuilder('user')\n  .where('user.id > :cursor', { cursor: lastId })\n  .orderBy('user.id', 'ASC')\n  .take(pageSize)\n  .getMany()\n```\n\n### Eager Loading\n\n```typescript\n// Explicit loading\nconst users = await userRepository.find({\n  relations: ['profile', 'posts', 'posts.comments'],\n})\n\n// Or with query builder\nconst users = await userRepository\n  .createQueryBuilder('user')\n  .leftJoinAndSelect('user.profile', 'profile')\n  .leftJoinAndSelect('user.posts', 'post')\n  .leftJoinAndSelect('post.comments', 'comment')\n  .getMany()\n```\n\n## Integration\n\nUsed by:\n- `backend-developer` agent\n- `fullstack-developer` agent\n- `database-developer` agent\n",
        "plugins/aai-stack-typescript/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-typescript\",\n  \"version\": \"1.0.0\",\n  \"description\": \"TypeScript patterns - generics, utility types, type inference, best practices\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"typescript\", \"types\", \"generics\", \"patterns\", \"development\"]\n}\n",
        "plugins/aai-stack-typescript/skills/typescript-generics/SKILL.md": "---\nname: typescript-generics\ndescription: TypeScript generics patterns for reusable type-safe code\nuser-invocable: false\n---\n\n# TypeScript Generics Skill\n\nPatterns for using generics to create flexible, type-safe code.\n\n## Basic Generics\n\n### Generic Functions\n\n```typescript\n// Simple generic function\nfunction identity<T>(value: T): T {\n  return value\n}\n\nconst str = identity('hello')   // type: string\nconst num = identity(42)        // type: number\n\n// Multiple type parameters\nfunction pair<T, U>(first: T, second: U): [T, U] {\n  return [first, second]\n}\n\nconst result = pair('name', 42)  // type: [string, number]\n\n// Default type parameter\nfunction createArray<T = string>(length: number, value: T): T[] {\n  return Array(length).fill(value)\n}\n\nconst strings = createArray(3, 'a')     // type: string[]\nconst numbers = createArray<number>(3, 0)  // type: number[]\n```\n\n### Generic Interfaces\n\n```typescript\n// Generic interface\ninterface Container<T> {\n  value: T\n  getValue(): T\n  setValue(value: T): void\n}\n\n// Generic class implementing interface\nclass Box<T> implements Container<T> {\n  constructor(public value: T) {}\n\n  getValue(): T {\n    return this.value\n  }\n\n  setValue(value: T): void {\n    this.value = value\n  }\n}\n\nconst stringBox = new Box('hello')\nconst numberBox = new Box(42)\n```\n\n### Generic Types\n\n```typescript\n// Generic type alias\ntype Nullable<T> = T | null | undefined\ntype AsyncResult<T> = Promise<T>\ntype KeyValuePair<K, V> = { key: K; value: V }\n\n// Generic mapped type\ntype Readonly<T> = {\n  readonly [P in keyof T]: T[P]\n}\n\n// Generic conditional type\ntype UnwrapPromise<T> = T extends Promise<infer U> ? U : T\n```\n\n## Constraints\n\n### Basic Constraints\n\n```typescript\n// Constrain to objects with specific property\nfunction getLength<T extends { length: number }>(item: T): number {\n  return item.length\n}\n\ngetLength('hello')      // OK\ngetLength([1, 2, 3])    // OK\ngetLength({ length: 5 }) // OK\n// getLength(42)        // Error: number doesn't have length\n\n// Constrain to specific types\ninterface Identifiable {\n  id: string\n}\n\nfunction findById<T extends Identifiable>(items: T[], id: string): T | undefined {\n  return items.find(item => item.id === id)\n}\n```\n\n### keyof Constraint\n\n```typescript\nfunction getProperty<T, K extends keyof T>(obj: T, key: K): T[K] {\n  return obj[key]\n}\n\nconst user = { name: 'John', age: 30 }\nconst name = getProperty(user, 'name')  // type: string\nconst age = getProperty(user, 'age')    // type: number\n// getProperty(user, 'email')           // Error: 'email' is not a key\n\n// Setting properties\nfunction setProperty<T, K extends keyof T>(obj: T, key: K, value: T[K]): void {\n  obj[key] = value\n}\n```\n\n### Multiple Constraints\n\n```typescript\n// Intersection constraint\ninterface Named {\n  name: string\n}\n\ninterface Aged {\n  age: number\n}\n\nfunction greet<T extends Named & Aged>(entity: T): string {\n  return `Hello ${entity.name}, you are ${entity.age} years old`\n}\n\n// Generic constraint on another type parameter\nfunction merge<T, U extends T>(base: T, override: Partial<U>): T {\n  return { ...base, ...override }\n}\n```\n\n## Advanced Patterns\n\n### Conditional Types\n\n```typescript\n// Basic conditional\ntype IsString<T> = T extends string ? true : false\n\ntype A = IsString<string>  // true\ntype B = IsString<number>  // false\n\n// Distributive conditional types\ntype ToArray<T> = T extends unknown ? T[] : never\n\ntype C = ToArray<string | number>  // string[] | number[]\n\n// Non-distributive (wrap in tuple)\ntype ToArrayNonDist<T> = [T] extends [unknown] ? T[] : never\n\ntype D = ToArrayNonDist<string | number>  // (string | number)[]\n```\n\n### infer Keyword\n\n```typescript\n// Extract return type\ntype ReturnType<T> = T extends (...args: any[]) => infer R ? R : never\n\ntype Fn = () => string\ntype Result = ReturnType<Fn>  // string\n\n// Extract array element type\ntype ElementType<T> = T extends (infer E)[] ? E : never\n\ntype Elem = ElementType<string[]>  // string\n\n// Extract Promise type\ntype Awaited<T> = T extends Promise<infer U> ? Awaited<U> : T\n\ntype P = Awaited<Promise<Promise<string>>>  // string\n\n// Extract function parameter types\ntype Parameters<T> = T extends (...args: infer P) => any ? P : never\n\ntype Params = Parameters<(a: string, b: number) => void>  // [string, number]\n```\n\n### Mapped Types with Generics\n\n```typescript\n// Make all properties optional\ntype Partial<T> = {\n  [P in keyof T]?: T[P]\n}\n\n// Make all properties required\ntype Required<T> = {\n  [P in keyof T]-?: T[P]\n}\n\n// Transform property types\ntype Stringify<T> = {\n  [P in keyof T]: string\n}\n\n// Rename properties\ntype Getters<T> = {\n  [P in keyof T as `get${Capitalize<string & P>}`]: () => T[P]\n}\n\ninterface Person {\n  name: string\n  age: number\n}\n\ntype PersonGetters = Getters<Person>\n// { getName: () => string; getAge: () => number }\n```\n\n### Template Literal Types\n\n```typescript\ntype EventName<T extends string> = `on${Capitalize<T>}`\n\ntype ClickEvent = EventName<'click'>  // 'onClick'\ntype HoverEvent = EventName<'hover'>  // 'onHover'\n\n// Dynamic property names\ntype PropEventSource<T> = {\n  on<K extends string & keyof T>(\n    eventName: `${K}Changed`,\n    callback: (newValue: T[K]) => void\n  ): void\n}\n\ndeclare function makeWatchedObject<T>(obj: T): T & PropEventSource<T>\n\nconst person = makeWatchedObject({\n  name: 'John',\n  age: 30,\n})\n\nperson.on('nameChanged', (newName) => {\n  // newName is string\n})\n\nperson.on('ageChanged', (newAge) => {\n  // newAge is number\n})\n```\n\n## Generic Classes\n\n### Repository Pattern\n\n```typescript\ninterface Entity {\n  id: string\n}\n\nclass Repository<T extends Entity> {\n  private items: Map<string, T> = new Map()\n\n  findById(id: string): T | undefined {\n    return this.items.get(id)\n  }\n\n  findAll(): T[] {\n    return Array.from(this.items.values())\n  }\n\n  save(item: T): void {\n    this.items.set(item.id, item)\n  }\n\n  delete(id: string): boolean {\n    return this.items.delete(id)\n  }\n\n  findWhere(predicate: (item: T) => boolean): T[] {\n    return this.findAll().filter(predicate)\n  }\n}\n\ninterface User extends Entity {\n  name: string\n  email: string\n}\n\nconst userRepo = new Repository<User>()\nuserRepo.save({ id: '1', name: 'John', email: 'john@example.com' })\n```\n\n### Builder Pattern\n\n```typescript\nclass QueryBuilder<T> {\n  private query: Partial<T> = {}\n\n  where<K extends keyof T>(key: K, value: T[K]): this {\n    this.query[key] = value\n    return this\n  }\n\n  build(): Partial<T> {\n    return { ...this.query }\n  }\n}\n\ninterface User {\n  name: string\n  age: number\n  email: string\n}\n\nconst query = new QueryBuilder<User>()\n  .where('name', 'John')\n  .where('age', 30)\n  .build()\n// { name: 'John', age: 30 }\n```\n\n## Factory Patterns\n\n### Generic Factory Function\n\n```typescript\ninterface Constructor<T> {\n  new (...args: any[]): T\n}\n\nfunction createInstance<T>(ctor: Constructor<T>, ...args: any[]): T {\n  return new ctor(...args)\n}\n\nclass User {\n  constructor(public name: string) {}\n}\n\nconst user = createInstance(User, 'John')  // type: User\n```\n\n### Abstract Factory\n\n```typescript\ninterface Animal {\n  speak(): string\n}\n\nclass Dog implements Animal {\n  speak() { return 'Woof!' }\n}\n\nclass Cat implements Animal {\n  speak() { return 'Meow!' }\n}\n\nfunction createAnimalFactory<T extends Animal>(AnimalClass: new () => T) {\n  return (): T => new AnimalClass()\n}\n\nconst createDog = createAnimalFactory(Dog)\nconst createCat = createAnimalFactory(Cat)\n\nconst dog = createDog()  // type: Dog\nconst cat = createCat()  // type: Cat\n```\n\n## Utility Type Implementations\n\n```typescript\n// Pick implementation\ntype Pick<T, K extends keyof T> = {\n  [P in K]: T[P]\n}\n\n// Omit implementation\ntype Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>\n\n// Exclude implementation\ntype Exclude<T, U> = T extends U ? never : T\n\n// Extract implementation\ntype Extract<T, U> = T extends U ? T : never\n\n// NonNullable implementation\ntype NonNullable<T> = T extends null | undefined ? never : T\n\n// Record implementation\ntype Record<K extends keyof any, T> = {\n  [P in K]: T\n}\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-typescript/skills/typescript-inference/SKILL.md": "---\nname: typescript-inference\ndescription: TypeScript type inference patterns and techniques\nuser-invocable: false\n---\n\n# TypeScript Inference Skill\n\nPatterns for leveraging TypeScript's type inference capabilities.\n\n## Basic Inference\n\n### Variable Inference\n\n```typescript\n// TypeScript infers types from initialization\nconst name = 'John'          // type: string\nconst age = 30               // type: number\nconst isActive = true        // type: boolean\nconst items = [1, 2, 3]      // type: number[]\n\n// Literal types with const\nlet status = 'active'        // type: string\nconst mode = 'dark' as const // type: 'dark'\n\n// Object inference\nconst user = {\n  name: 'John',\n  age: 30,\n}  // type: { name: string; age: number }\n\n// const assertion for readonly literal object\nconst config = {\n  api: '/api/v1',\n  timeout: 5000,\n} as const\n// type: { readonly api: \"/api/v1\"; readonly timeout: 5000 }\n```\n\n### Function Return Inference\n\n```typescript\n// Return type inferred from return statements\nfunction add(a: number, b: number) {\n  return a + b  // return type: number\n}\n\nfunction getUser(id: string) {\n  return { id, name: 'John', active: true }\n}  // return type: { id: string; name: string; active: boolean }\n\n// Async function inference\nasync function fetchData() {\n  const response = await fetch('/api/data')\n  return response.json() as Promise<Data>\n}  // return type: Promise<Data>\n```\n\n### Generic Inference\n\n```typescript\n// Type parameter inferred from argument\nfunction identity<T>(value: T): T {\n  return value\n}\n\nconst str = identity('hello')  // T inferred as string\nconst num = identity(42)       // T inferred as number\n\n// Multiple type parameters\nfunction pair<T, U>(first: T, second: U) {\n  return [first, second] as const\n}\n\nconst result = pair('name', 42)  // [T, U] inferred as [string, number]\n```\n\n## Contextual Typing\n\n### Callback Parameters\n\n```typescript\n// Parameter types inferred from context\nconst numbers = [1, 2, 3, 4, 5]\n\n// 'num' inferred as number from array type\nconst doubled = numbers.map(num => num * 2)\n\n// Event handler inference\ndocument.addEventListener('click', event => {\n  // 'event' inferred as MouseEvent\n  console.log(event.clientX, event.clientY)\n})\n\n// Object method inference\nconst handlers = {\n  onClick: (event) => {\n    // Without annotation, event is 'any' - context not available\n  },\n}\n\n// With explicit interface\ninterface Handlers {\n  onClick: (event: MouseEvent) => void\n}\n\nconst typedHandlers: Handlers = {\n  onClick: (event) => {\n    // 'event' now inferred as MouseEvent\n    console.log(event.button)\n  },\n}\n```\n\n### Satisfies Operator\n\n```typescript\n// 'satisfies' checks type while preserving inferred literal types\nconst palette = {\n  red: [255, 0, 0],\n  green: '#00ff00',\n  blue: [0, 0, 255],\n} satisfies Record<string, string | [number, number, number]>\n\n// Type is preserved as literal\npalette.red   // [number, number, number], not string | [number, number, number]\npalette.green // string\n\n// vs type annotation which would widen\nconst palette2: Record<string, string | [number, number, number]> = {\n  red: [255, 0, 0],\n  green: '#00ff00',\n  blue: [0, 0, 255],\n}\npalette2.red  // string | [number, number, number] - lost specificity\n```\n\n## Infer Keyword\n\n### Extract Nested Types\n\n```typescript\n// Extract element type from array\ntype ElementType<T> = T extends (infer E)[] ? E : never\n\ntype StringElement = ElementType<string[]>  // string\ntype NumberElement = ElementType<number[]>  // number\n\n// Extract return type\ntype ReturnOf<T> = T extends (...args: any[]) => infer R ? R : never\n\ntype FnReturn = ReturnOf<() => string>  // string\n\n// Extract Promise value\ntype UnwrapPromise<T> = T extends Promise<infer U> ? U : T\n\ntype PromiseValue = UnwrapPromise<Promise<string>>  // string\n```\n\n### Complex Infer Patterns\n\n```typescript\n// Extract first element of tuple\ntype First<T> = T extends [infer F, ...any[]] ? F : never\n\ntype FirstElement = First<[string, number, boolean]>  // string\n\n// Extract last element\ntype Last<T> = T extends [...any[], infer L] ? L : never\n\ntype LastElement = Last<[string, number, boolean]>  // boolean\n\n// Extract function parameter at specific index\ntype ParamAt<T, N extends number> = T extends (...args: infer P) => any\n  ? P[N]\n  : never\n\ntype SecondParam = ParamAt<(a: string, b: number) => void, 1>  // number\n```\n\n### Infer in Template Literals\n\n```typescript\n// Extract parts from string literal\ntype ExtractRoute<T> = T extends `/${infer Resource}/${infer Id}`\n  ? { resource: Resource; id: Id }\n  : never\n\ntype Route = ExtractRoute<'/users/123'>\n// { resource: 'users'; id: '123' }\n\n// Parse event names\ntype ParseEvent<T> = T extends `on${infer Event}`\n  ? Uncapitalize<Event>\n  : never\n\ntype EventName = ParseEvent<'onClick'>  // 'click'\n```\n\n## Control Flow Analysis\n\n### Narrowing\n\n```typescript\nfunction process(value: string | number) {\n  if (typeof value === 'string') {\n    // TypeScript knows value is string here\n    return value.toUpperCase()\n  }\n  // TypeScript knows value is number here\n  return value.toFixed(2)\n}\n\n// Truthiness narrowing\nfunction log(value: string | null | undefined) {\n  if (value) {\n    // value is string (truthy check eliminates null/undefined)\n    console.log(value.length)\n  }\n}\n\n// Equality narrowing\nfunction compare(a: string | number, b: string | boolean) {\n  if (a === b) {\n    // Both a and b are string (only common type)\n    return a.toUpperCase()\n  }\n}\n```\n\n### Type Guards\n\n```typescript\ninterface Dog {\n  bark(): void\n}\n\ninterface Cat {\n  meow(): void\n}\n\n// Type predicate\nfunction isDog(animal: Dog | Cat): animal is Dog {\n  return 'bark' in animal\n}\n\nfunction makeSound(animal: Dog | Cat) {\n  if (isDog(animal)) {\n    animal.bark()  // TypeScript knows it's Dog\n  } else {\n    animal.meow()  // TypeScript knows it's Cat\n  }\n}\n\n// Assertion function\nfunction assertString(value: unknown): asserts value is string {\n  if (typeof value !== 'string') {\n    throw new Error('Not a string')\n  }\n}\n\nfunction process(value: unknown) {\n  assertString(value)\n  // TypeScript knows value is string after assertion\n  console.log(value.toUpperCase())\n}\n```\n\n### Discriminated Unions\n\n```typescript\ntype Result<T> =\n  | { success: true; data: T }\n  | { success: false; error: Error }\n\nfunction handle<T>(result: Result<T>) {\n  if (result.success) {\n    // TypeScript knows result has 'data' property\n    console.log(result.data)\n  } else {\n    // TypeScript knows result has 'error' property\n    console.log(result.error.message)\n  }\n}\n```\n\n## Best Practices\n\n### Let Inference Work\n\n```typescript\n// Bad: Redundant type annotation\nconst name: string = 'John'\nconst numbers: number[] = [1, 2, 3]\n\n// Good: Let inference do its job\nconst name = 'John'\nconst numbers = [1, 2, 3]\n```\n\n### Annotate When Needed\n\n```typescript\n// Good: Annotate function parameters\nfunction greet(name: string): void {\n  console.log(`Hello, ${name}`)\n}\n\n// Good: Annotate when inference would be too wide\nconst status: 'active' | 'inactive' = 'active'\n\n// Good: Annotate complex returns\ninterface User {\n  id: string\n  name: string\n}\n\nfunction parseUser(json: string): User {\n  return JSON.parse(json)\n}\n```\n\n### Use typeof for Runtime Values\n\n```typescript\nconst config = {\n  api: '/api',\n  timeout: 5000,\n}\n\n// Derive type from runtime value\ntype Config = typeof config\n\nfunction updateConfig(updates: Partial<Config>): void {\n  Object.assign(config, updates)\n}\n```\n\n### Use ReturnType for Function Types\n\n```typescript\nfunction createUser(name: string, email: string) {\n  return {\n    id: crypto.randomUUID(),\n    name,\n    email,\n    createdAt: new Date(),\n  }\n}\n\n// Derive User type from function\ntype User = ReturnType<typeof createUser>\n\nfunction displayUser(user: User): void {\n  console.log(`${user.name} (${user.email})`)\n}\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-typescript/skills/typescript-patterns/SKILL.md": "---\nname: typescript-patterns\ndescription: TypeScript best practices and common patterns\nuser-invocable: false\n---\n\n# TypeScript Patterns Skill\n\nBest practices and patterns for writing type-safe TypeScript code.\n\n## Type Definitions\n\n### Interfaces vs Types\n\n```typescript\n// Use interfaces for object shapes (can be extended)\ninterface User {\n  id: string\n  name: string\n  email: string\n}\n\ninterface AdminUser extends User {\n  permissions: string[]\n}\n\n// Use types for unions, intersections, and complex types\ntype Status = 'pending' | 'active' | 'inactive'\ntype Nullable<T> = T | null\ntype UserOrAdmin = User | AdminUser\n```\n\n### Readonly and Immutability\n\n```typescript\n// Readonly properties\ninterface Config {\n  readonly apiUrl: string\n  readonly timeout: number\n}\n\n// Readonly arrays\nconst items: readonly string[] = ['a', 'b', 'c']\n// items.push('d')  // Error!\n\n// Deep readonly\ntype DeepReadonly<T> = {\n  readonly [P in keyof T]: T[P] extends object ? DeepReadonly<T[P]> : T[P]\n}\n\nconst config: DeepReadonly<Config> = {\n  apiUrl: 'https://api.example.com',\n  timeout: 5000,\n}\n```\n\n### Optional vs Required\n\n```typescript\ninterface UserInput {\n  name: string              // Required\n  email: string             // Required\n  phone?: string            // Optional\n  age?: number              // Optional\n}\n\n// Make all properties required\ntype RequiredUser = Required<UserInput>\n\n// Make all properties optional\ntype PartialUser = Partial<UserInput>\n\n// Pick specific properties\ntype UserContact = Pick<UserInput, 'email' | 'phone'>\n\n// Omit specific properties\ntype UserWithoutAge = Omit<UserInput, 'age'>\n```\n\n## Discriminated Unions\n\n### Pattern Matching with Unions\n\n```typescript\ninterface LoadingState {\n  status: 'loading'\n}\n\ninterface SuccessState {\n  status: 'success'\n  data: unknown\n}\n\ninterface ErrorState {\n  status: 'error'\n  error: Error\n}\n\ntype AsyncState = LoadingState | SuccessState | ErrorState\n\nfunction handleState(state: AsyncState) {\n  switch (state.status) {\n    case 'loading':\n      return 'Loading...'\n    case 'success':\n      return `Data: ${JSON.stringify(state.data)}`\n    case 'error':\n      return `Error: ${state.error.message}`\n  }\n}\n\n// Exhaustiveness checking\nfunction assertNever(x: never): never {\n  throw new Error(`Unexpected value: ${x}`)\n}\n\nfunction handleStateExhaustive(state: AsyncState) {\n  switch (state.status) {\n    case 'loading':\n      return 'Loading...'\n    case 'success':\n      return `Data: ${JSON.stringify(state.data)}`\n    case 'error':\n      return `Error: ${state.error.message}`\n    default:\n      return assertNever(state)  // Compile error if case is missing\n  }\n}\n```\n\n### Result Types\n\n```typescript\ntype Result<T, E = Error> =\n  | { ok: true; value: T }\n  | { ok: false; error: E }\n\nfunction divide(a: number, b: number): Result<number, string> {\n  if (b === 0) {\n    return { ok: false, error: 'Division by zero' }\n  }\n  return { ok: true, value: a / b }\n}\n\nconst result = divide(10, 2)\nif (result.ok) {\n  console.log(result.value)  // TypeScript knows value exists\n} else {\n  console.log(result.error)  // TypeScript knows error exists\n}\n```\n\n## Type Guards\n\n### Custom Type Guards\n\n```typescript\ninterface Dog {\n  kind: 'dog'\n  bark(): void\n}\n\ninterface Cat {\n  kind: 'cat'\n  meow(): void\n}\n\ntype Animal = Dog | Cat\n\n// Type guard function\nfunction isDog(animal: Animal): animal is Dog {\n  return animal.kind === 'dog'\n}\n\nfunction handleAnimal(animal: Animal) {\n  if (isDog(animal)) {\n    animal.bark()  // TypeScript knows it's a Dog\n  } else {\n    animal.meow()  // TypeScript knows it's a Cat\n  }\n}\n```\n\n### Type Assertions\n\n```typescript\n// Type assertion (use sparingly)\nconst value = someFunction() as string\n\n// Non-null assertion (use sparingly)\nconst element = document.getElementById('root')!\n\n// Const assertion (preferred for literals)\nconst config = {\n  endpoint: '/api',\n  method: 'GET',\n} as const\n// config.method is type 'GET', not string\n```\n\n## Nullability Handling\n\n### Optional Chaining\n\n```typescript\ninterface Response {\n  data?: {\n    user?: {\n      name?: string\n    }\n  }\n}\n\nfunction getUserName(response: Response): string {\n  // Optional chaining\n  return response.data?.user?.name ?? 'Unknown'\n}\n```\n\n### Nullish Coalescing\n\n```typescript\n// ?? only uses fallback for null/undefined\nconst value = someValue ?? 'default'\n\n// Different from || which uses fallback for all falsy\nconst count = 0\nconst result1 = count || 10    // 10 (0 is falsy)\nconst result2 = count ?? 10    // 0 (0 is not null/undefined)\n```\n\n### Non-nullable\n\n```typescript\ntype Nullable<T> = T | null | undefined\n\nfunction process<T>(value: Nullable<T>): NonNullable<T> {\n  if (value == null) {\n    throw new Error('Value is null or undefined')\n  }\n  return value\n}\n```\n\n## Function Types\n\n### Function Signatures\n\n```typescript\n// Function type\ntype Comparator<T> = (a: T, b: T) => number\n\n// Function with overloads\nfunction format(value: string): string\nfunction format(value: number): string\nfunction format(value: string | number): string {\n  return String(value)\n}\n\n// Arrow function with type\nconst add: (a: number, b: number) => number = (a, b) => a + b\n\n// Generic function\nfunction identity<T>(value: T): T {\n  return value\n}\n```\n\n### Rest Parameters\n\n```typescript\nfunction sum(...numbers: number[]): number {\n  return numbers.reduce((a, b) => a + b, 0)\n}\n\n// Typed rest parameters with tuple\nfunction log(level: string, ...messages: string[]): void {\n  console.log(`[${level}]`, ...messages)\n}\n```\n\n## Class Patterns\n\n### Abstract Classes\n\n```typescript\nabstract class BaseService {\n  abstract fetchData(): Promise<unknown>\n\n  protected log(message: string): void {\n    console.log(`[${this.constructor.name}] ${message}`)\n  }\n}\n\nclass UserService extends BaseService {\n  async fetchData(): Promise<User[]> {\n    this.log('Fetching users')\n    return fetch('/api/users').then(r => r.json())\n  }\n}\n```\n\n### Constructor Parameter Properties\n\n```typescript\nclass User {\n  constructor(\n    public readonly id: string,\n    public name: string,\n    private password: string,\n    protected email: string\n  ) {}\n}\n\n// Equivalent to:\nclass UserExplicit {\n  public readonly id: string\n  public name: string\n  private password: string\n  protected email: string\n\n  constructor(id: string, name: string, password: string, email: string) {\n    this.id = id\n    this.name = name\n    this.password = password\n    this.email = email\n  }\n}\n```\n\n## Module Patterns\n\n### Barrel Exports\n\n```typescript\n// components/index.ts\nexport { Button } from './Button'\nexport { Input } from './Input'\nexport { Modal } from './Modal'\n\n// types/index.ts\nexport type { User, UserInput } from './user'\nexport type { Config } from './config'\n```\n\n### Type-Only Imports\n\n```typescript\n// Import only types (erased at runtime)\nimport type { User, Config } from './types'\n\n// Mixed import\nimport { createUser, type User } from './user'\n```\n\n## Best Practices\n\n### Avoid `any`\n\n```typescript\n// Bad\nfunction process(data: any): any {\n  return data.value\n}\n\n// Good\nfunction process<T extends { value: unknown }>(data: T): T['value'] {\n  return data.value\n}\n\n// If you truly need escape hatch, use `unknown`\nfunction processUnknown(data: unknown): string {\n  if (typeof data === 'string') {\n    return data\n  }\n  throw new Error('Expected string')\n}\n```\n\n### Strict Mode Settings\n\n```json\n// tsconfig.json\n{\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"noImplicitAny\": true,\n    \"strictNullChecks\": true,\n    \"strictFunctionTypes\": true,\n    \"strictBindCallApply\": true,\n    \"strictPropertyInitialization\": true,\n    \"noImplicitThis\": true,\n    \"alwaysStrict\": true\n  }\n}\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-typescript/skills/typescript-utility-types/SKILL.md": "---\nname: typescript-utility-types\ndescription: Built-in TypeScript utility types and their applications\nuser-invocable: false\n---\n\n# TypeScript Utility Types Skill\n\nComprehensive guide to TypeScript's built-in utility types.\n\n## Property Modifiers\n\n### Partial<T>\n\nMakes all properties optional.\n\n```typescript\ninterface User {\n  id: string\n  name: string\n  email: string\n}\n\ntype PartialUser = Partial<User>\n// { id?: string; name?: string; email?: string }\n\n// Use case: Update functions\nfunction updateUser(id: string, updates: Partial<User>): User {\n  const user = getUser(id)\n  return { ...user, ...updates }\n}\n\nupdateUser('123', { name: 'New Name' })  // Only update name\n```\n\n### Required<T>\n\nMakes all properties required.\n\n```typescript\ninterface Config {\n  host?: string\n  port?: number\n  timeout?: number\n}\n\ntype RequiredConfig = Required<Config>\n// { host: string; port: number; timeout: number }\n\n// Use case: Ensure all config is provided\nfunction initServer(config: RequiredConfig): void {\n  // All properties guaranteed to exist\n  console.log(`Server at ${config.host}:${config.port}`)\n}\n```\n\n### Readonly<T>\n\nMakes all properties readonly.\n\n```typescript\ninterface State {\n  count: number\n  users: string[]\n}\n\ntype ReadonlyState = Readonly<State>\n// { readonly count: number; readonly users: string[] }\n\nconst state: ReadonlyState = { count: 0, users: [] }\n// state.count = 1  // Error: Cannot assign to 'count'\n\n// Note: Only shallow - arrays can still be mutated\n// state.users.push('new')  // This still works!\n\n// For deep readonly, use custom type or library\ntype DeepReadonly<T> = {\n  readonly [P in keyof T]: T[P] extends object ? DeepReadonly<T[P]> : T[P]\n}\n```\n\n## Property Selection\n\n### Pick<T, K>\n\nCreates type with only selected properties.\n\n```typescript\ninterface User {\n  id: string\n  name: string\n  email: string\n  password: string\n  createdAt: Date\n}\n\ntype UserPreview = Pick<User, 'id' | 'name'>\n// { id: string; name: string }\n\n// Use case: API response types\ntype PublicUser = Pick<User, 'id' | 'name' | 'email'>\n\nfunction getPublicProfile(user: User): PublicUser {\n  return {\n    id: user.id,\n    name: user.name,\n    email: user.email,\n  }\n}\n```\n\n### Omit<T, K>\n\nCreates type without specified properties.\n\n```typescript\ninterface User {\n  id: string\n  name: string\n  email: string\n  password: string\n}\n\ntype UserWithoutPassword = Omit<User, 'password'>\n// { id: string; name: string; email: string }\n\n// Use case: Input types without auto-generated fields\ntype CreateUserInput = Omit<User, 'id'>\n\nfunction createUser(input: CreateUserInput): User {\n  return { ...input, id: generateId() }\n}\n```\n\n## Union Types\n\n### Exclude<T, U>\n\nRemoves types from a union.\n\n```typescript\ntype AllStatus = 'pending' | 'active' | 'completed' | 'cancelled'\n\ntype ActiveStatus = Exclude<AllStatus, 'pending' | 'cancelled'>\n// 'active' | 'completed'\n\n// Use case: Conditional logic\nfunction handleActiveStatus(status: ActiveStatus): void {\n  // Only handles 'active' or 'completed'\n}\n```\n\n### Extract<T, U>\n\nKeeps only types that match.\n\n```typescript\ntype AllTypes = string | number | boolean | object\n\ntype Primitives = Extract<AllTypes, string | number | boolean>\n// string | number | boolean\n\n// Use case: Filter function types\ntype AllEvents =\n  | { type: 'click'; x: number; y: number }\n  | { type: 'keydown'; key: string }\n  | { type: 'scroll'; offset: number }\n\ntype ClickEvent = Extract<AllEvents, { type: 'click' }>\n// { type: 'click'; x: number; y: number }\n```\n\n### NonNullable<T>\n\nRemoves null and undefined.\n\n```typescript\ntype MaybeString = string | null | undefined\n\ntype DefiniteString = NonNullable<MaybeString>\n// string\n\n// Use case: Ensure non-null after check\nfunction process(value: string | null): NonNullable<typeof value> {\n  if (value === null) {\n    throw new Error('Value cannot be null')\n  }\n  return value\n}\n```\n\n## Function Types\n\n### ReturnType<T>\n\nExtracts return type of a function.\n\n```typescript\nfunction getUser() {\n  return { id: '1', name: 'John' }\n}\n\ntype User = ReturnType<typeof getUser>\n// { id: string; name: string }\n\n// Use case: Derive types from existing functions\nasync function fetchData(): Promise<{ items: string[] }> {\n  return { items: [] }\n}\n\ntype FetchResult = Awaited<ReturnType<typeof fetchData>>\n// { items: string[] }\n```\n\n### Parameters<T>\n\nExtracts parameter types as tuple.\n\n```typescript\nfunction createUser(name: string, age: number, email?: string): void {}\n\ntype CreateUserParams = Parameters<typeof createUser>\n// [name: string, age: number, email?: string]\n\n// Use case: Wrap functions\nfunction withLogging<T extends (...args: any[]) => any>(\n  fn: T\n): (...args: Parameters<T>) => ReturnType<T> {\n  return (...args) => {\n    console.log('Calling with:', args)\n    return fn(...args)\n  }\n}\n```\n\n### ConstructorParameters<T>\n\nExtracts constructor parameter types.\n\n```typescript\nclass User {\n  constructor(public name: string, public age: number) {}\n}\n\ntype UserConstructorParams = ConstructorParameters<typeof User>\n// [name: string, age: number]\n\n// Use case: Factory functions\nfunction createInstance<T extends new (...args: any[]) => any>(\n  ctor: T,\n  ...args: ConstructorParameters<T>\n): InstanceType<T> {\n  return new ctor(...args)\n}\n\nconst user = createInstance(User, 'John', 30)\n```\n\n### InstanceType<T>\n\nExtracts instance type of a constructor.\n\n```typescript\nclass User {\n  name = 'John'\n  greet() { return `Hello, ${this.name}` }\n}\n\ntype UserInstance = InstanceType<typeof User>\n// User\n\n// Use case: Generic factories\nfunction getRepository<T extends new () => any>(\n  Entity: T\n): Repository<InstanceType<T>> {\n  return new Repository(Entity)\n}\n```\n\n## String Types\n\n### Uppercase<T> / Lowercase<T>\n\nTransform string literal types.\n\n```typescript\ntype Greeting = 'hello'\n\ntype Upper = Uppercase<Greeting>  // 'HELLO'\ntype Lower = Lowercase<'HELLO'>   // 'hello'\n```\n\n### Capitalize<T> / Uncapitalize<T>\n\nCapitalize first letter.\n\n```typescript\ntype Name = 'john'\n\ntype CapitalizedName = Capitalize<Name>    // 'John'\ntype UncapitalizedName = Uncapitalize<'John'>  // 'john'\n\n// Use case: Event handler names\ntype EventHandlers<T extends string> = {\n  [K in T as `on${Capitalize<K>}`]: () => void\n}\n\ntype ClickHandlers = EventHandlers<'click' | 'hover'>\n// { onClick: () => void; onHover: () => void }\n```\n\n## Object Types\n\n### Record<K, V>\n\nCreates object type with specific keys and value type.\n\n```typescript\ntype Status = 'pending' | 'active' | 'completed'\n\ntype StatusCounts = Record<Status, number>\n// { pending: number; active: number; completed: number }\n\n// Use case: Lookup tables\nconst statusLabels: Record<Status, string> = {\n  pending: 'Waiting',\n  active: 'In Progress',\n  completed: 'Done',\n}\n\n// Dynamic keys\ntype StringMap = Record<string, string>\n```\n\n### ThisParameterType<T> / OmitThisParameter<T>\n\nWork with `this` parameter in functions.\n\n```typescript\nfunction greet(this: { name: string }) {\n  return `Hello, ${this.name}`\n}\n\ntype GreetThis = ThisParameterType<typeof greet>\n// { name: string }\n\ntype GreetWithoutThis = OmitThisParameter<typeof greet>\n// () => string\n```\n\n## Awaited<T>\n\nUnwraps Promise types.\n\n```typescript\ntype PromiseString = Promise<string>\ntype NestedPromise = Promise<Promise<number>>\n\ntype Str = Awaited<PromiseString>    // string\ntype Num = Awaited<NestedPromise>    // number\n\n// Use case: Async function return types\nasync function fetchUser(): Promise<{ id: string }> {\n  return { id: '1' }\n}\n\ntype User = Awaited<ReturnType<typeof fetchUser>>\n// { id: string }\n```\n\n## Combining Utility Types\n\n```typescript\ninterface User {\n  id: string\n  name: string\n  email: string\n  password: string\n  createdAt: Date\n  updatedAt: Date\n}\n\n// Create input type: no id, timestamps; optional password\ntype CreateUserInput = Omit<\n  Partial<User>,\n  'id' | 'createdAt' | 'updatedAt'\n> & {\n  name: string\n  email: string\n}\n\n// Create update input: all optional except id\ntype UpdateUserInput = Partial<Omit<User, 'id' | 'createdAt' | 'updatedAt'>>\n\n// Public user: no password\ntype PublicUser = Readonly<Omit<User, 'password'>>\n\n// API response with subset\ntype UserListItem = Pick<User, 'id' | 'name' | 'email'>\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `backend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-vite/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-stack-vite\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Vite patterns - configuration, plugins, and hot module replacement\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"vite\", \"bundler\", \"hmr\", \"frontend\", \"build\"]\n}\n",
        "plugins/aai-stack-vite/skills/vite-config/SKILL.md": "---\nname: vite-config\ndescription: Vite configuration patterns\nuser-invocable: false\n---\n\n# Vite Configuration Skill\n\nPatterns for configuring Vite projects.\n\n## Basic Configuration\n\n### Minimal Config\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\n\nexport default defineConfig({\n  plugins: [react()],\n})\n```\n\n### Full Configuration\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\nimport path from 'path'\n\nexport default defineConfig({\n  plugins: [react()],\n\n  // Root directory\n  root: process.cwd(),\n\n  // Base public path\n  base: '/',\n\n  // Public assets directory\n  publicDir: 'public',\n\n  // Cache directory\n  cacheDir: 'node_modules/.vite',\n\n  // Environment variables prefix\n  envPrefix: 'VITE_',\n\n  // Resolve options\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n      '@components': path.resolve(__dirname, './src/components'),\n      '@utils': path.resolve(__dirname, './src/utils'),\n    },\n    extensions: ['.mjs', '.js', '.ts', '.jsx', '.tsx', '.json'],\n  },\n\n  // CSS options\n  css: {\n    modules: {\n      localsConvention: 'camelCase',\n    },\n    preprocessorOptions: {\n      scss: {\n        additionalData: `@import \"@/styles/variables.scss\";`,\n      },\n    },\n  },\n\n  // JSON options\n  json: {\n    namedExports: true,\n    stringify: false,\n  },\n\n  // esbuild options\n  esbuild: {\n    jsxFactory: 'React.createElement',\n    jsxFragment: 'React.Fragment',\n    jsxInject: `import React from 'react'`,\n  },\n})\n```\n\n## Server Configuration\n\n### Dev Server\n\n```typescript\nexport default defineConfig({\n  server: {\n    host: 'localhost',\n    port: 3000,\n    strictPort: true,  // Fail if port is in use\n    open: true,        // Open browser on start\n\n    // HTTPS\n    https: {\n      key: fs.readFileSync('key.pem'),\n      cert: fs.readFileSync('cert.pem'),\n    },\n\n    // Proxy configuration\n    proxy: {\n      '/api': {\n        target: 'http://localhost:8080',\n        changeOrigin: true,\n        rewrite: (path) => path.replace(/^\\/api/, ''),\n      },\n      '/socket.io': {\n        target: 'ws://localhost:8080',\n        ws: true,\n      },\n    },\n\n    // CORS\n    cors: true,\n\n    // Headers\n    headers: {\n      'X-Custom-Header': 'value',\n    },\n\n    // File watching\n    watch: {\n      usePolling: true,  // For Docker/WSL\n      interval: 100,\n    },\n  },\n})\n```\n\n### Preview Server\n\n```typescript\nexport default defineConfig({\n  preview: {\n    host: 'localhost',\n    port: 4173,\n    strictPort: true,\n    open: true,\n    proxy: {\n      '/api': 'http://localhost:8080',\n    },\n  },\n})\n```\n\n## Build Configuration\n\n### Build Options\n\n```typescript\nexport default defineConfig({\n  build: {\n    // Output directory\n    outDir: 'dist',\n\n    // Assets directory (relative to outDir)\n    assetsDir: 'assets',\n\n    // Inline assets smaller than this (bytes)\n    assetsInlineLimit: 4096,\n\n    // CSS code splitting\n    cssCodeSplit: true,\n\n    // Minification\n    minify: 'esbuild',  // or 'terser'\n\n    // Source maps\n    sourcemap: true,  // or 'inline' | 'hidden'\n\n    // Target browsers\n    target: 'esnext',\n\n    // Rollup options\n    rollupOptions: {\n      input: {\n        main: path.resolve(__dirname, 'index.html'),\n        nested: path.resolve(__dirname, 'nested/index.html'),\n      },\n      output: {\n        manualChunks: {\n          vendor: ['react', 'react-dom'],\n          router: ['react-router-dom'],\n        },\n        // Asset file naming\n        assetFileNames: 'assets/[name]-[hash][extname]',\n        chunkFileNames: 'assets/[name]-[hash].js',\n        entryFileNames: 'assets/[name]-[hash].js',\n      },\n      external: ['some-external-lib'],\n    },\n\n    // Library mode\n    lib: {\n      entry: path.resolve(__dirname, 'src/index.ts'),\n      name: 'MyLib',\n      formats: ['es', 'umd'],\n      fileName: (format) => `my-lib.${format}.js`,\n    },\n\n    // Empty outDir before build\n    emptyOutDir: true,\n\n    // Chunk size warning limit (KB)\n    chunkSizeWarningLimit: 500,\n  },\n})\n```\n\n### Terser Options\n\n```typescript\nexport default defineConfig({\n  build: {\n    minify: 'terser',\n    terserOptions: {\n      compress: {\n        drop_console: true,\n        drop_debugger: true,\n      },\n      mangle: {\n        safari10: true,\n      },\n      format: {\n        comments: false,\n      },\n    },\n  },\n})\n```\n\n## Environment Variables\n\n### Configuration\n\n```typescript\n// .env\nVITE_API_URL=https://api.example.com\nVITE_APP_TITLE=My App\n\n// .env.development\nVITE_API_URL=http://localhost:8080\n\n// .env.production\nVITE_API_URL=https://api.production.com\n```\n\n### Usage\n\n```typescript\n// In code\nconst apiUrl = import.meta.env.VITE_API_URL\n\n// Type declarations\n// env.d.ts\n/// <reference types=\"vite/client\" />\n\ninterface ImportMetaEnv {\n  readonly VITE_API_URL: string\n  readonly VITE_APP_TITLE: string\n}\n\ninterface ImportMeta {\n  readonly env: ImportMetaEnv\n}\n```\n\n### Conditional Config\n\n```typescript\nexport default defineConfig(({ command, mode }) => {\n  const env = loadEnv(mode, process.cwd(), '')\n\n  return {\n    define: {\n      __APP_VERSION__: JSON.stringify(env.npm_package_version),\n    },\n\n    ...(command === 'serve' ? {\n      // Dev-specific config\n    } : {\n      // Build-specific config\n    }),\n\n    ...(mode === 'production' ? {\n      build: {\n        sourcemap: false,\n      },\n    } : {}),\n  }\n})\n```\n\n## Path Aliases\n\n### TypeScript Support\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from 'vite'\nimport path from 'path'\n\nexport default defineConfig({\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n    },\n  },\n})\n\n// tsconfig.json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@/*\": [\"src/*\"]\n    }\n  }\n}\n```\n\n## Worker Configuration\n\n```typescript\nexport default defineConfig({\n  worker: {\n    format: 'es',  // or 'iife'\n    plugins: [],\n    rollupOptions: {\n      output: {\n        entryFileNames: 'assets/[name]-[hash].js',\n      },\n    },\n  },\n})\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-vite/skills/vite-hmr/SKILL.md": "---\nname: vite-hmr\ndescription: Vite Hot Module Replacement patterns\nuser-invocable: false\n---\n\n# Vite HMR Skill\n\nPatterns for Hot Module Replacement in Vite.\n\n## HMR API\n\n### Basic Usage\n\n```typescript\n// Check if HMR is available\nif (import.meta.hot) {\n  // HMR code here\n}\n\n// Accept updates to this module\nif (import.meta.hot) {\n  import.meta.hot.accept()\n}\n\n// Accept updates to dependencies\nif (import.meta.hot) {\n  import.meta.hot.accept('./module.js', (newModule) => {\n    console.log('Module updated:', newModule)\n  })\n}\n\n// Accept multiple dependencies\nif (import.meta.hot) {\n  import.meta.hot.accept(['./a.js', './b.js'], ([a, b]) => {\n    // Handle updates\n  })\n}\n```\n\n### Module Disposal\n\n```typescript\nif (import.meta.hot) {\n  // Cleanup before module is replaced\n  import.meta.hot.dispose((data) => {\n    // data can be used to pass state to the new module\n    data.savedState = getCurrentState()\n\n    // Cleanup side effects\n    clearInterval(intervalId)\n    socket.disconnect()\n  })\n}\n\n// Access disposed data in new module\nif (import.meta.hot) {\n  import.meta.hot.accept()\n\n  // Restore state from previous version\n  if (import.meta.hot.data.savedState) {\n    restoreState(import.meta.hot.data.savedState)\n  }\n}\n```\n\n### Decline Updates\n\n```typescript\n// Decline HMR, trigger full reload\nif (import.meta.hot) {\n  import.meta.hot.decline()\n}\n```\n\n### Invalidate\n\n```typescript\nif (import.meta.hot) {\n  // Force parent module to re-import this module\n  import.meta.hot.invalidate()\n}\n```\n\n## State Preservation\n\n### Preserving Component State\n\n```typescript\n// Custom state preservation\nlet state = { count: 0 }\n\nif (import.meta.hot) {\n  // Restore state from previous version\n  if (import.meta.hot.data.state) {\n    state = import.meta.hot.data.state\n  }\n\n  import.meta.hot.accept()\n\n  // Save state before disposal\n  import.meta.hot.dispose((data) => {\n    data.state = state\n  })\n}\n\nexport function increment() {\n  state.count++\n}\n```\n\n### Store Preservation\n\n```typescript\n// For global stores like Zustand\nimport { create } from 'zustand'\n\nconst useStore = create((set) => ({\n  count: 0,\n  increment: () => set((state) => ({ count: state.count + 1 })),\n}))\n\n// Preserve store across HMR\nif (import.meta.hot) {\n  if (import.meta.hot.data.store) {\n    useStore.setState(import.meta.hot.data.store.getState())\n  }\n\n  import.meta.hot.dispose((data) => {\n    data.store = useStore\n  })\n}\n\nexport default useStore\n```\n\n## Custom Events\n\n### Sending Events\n\n```typescript\n// From server/plugin\nserver.ws.send({\n  type: 'custom',\n  event: 'my-event',\n  data: { message: 'Hello' },\n})\n```\n\n### Receiving Events\n\n```typescript\nif (import.meta.hot) {\n  import.meta.hot.on('my-event', (data) => {\n    console.log('Received:', data.message)\n  })\n}\n```\n\n### Full Page Reload\n\n```typescript\nif (import.meta.hot) {\n  import.meta.hot.on('vite:beforeFullReload', (payload) => {\n    console.log('About to full reload:', payload)\n  })\n}\n```\n\n## React Fast Refresh\n\n### Setup\n\n```typescript\n// vite.config.ts\nimport react from '@vitejs/plugin-react'\n\nexport default defineConfig({\n  plugins: [\n    react({\n      fastRefresh: true,  // Enabled by default\n    }),\n  ],\n})\n```\n\n### Preserving State\n\n```tsx\n// State is automatically preserved in function components\n\nfunction Counter() {\n  const [count, setCount] = useState(0)\n  // count value is preserved during HMR\n  return <button onClick={() => setCount(c => c + 1)}>{count}</button>\n}\n```\n\n### Opt-Out of Fast Refresh\n\n```tsx\n// Add this comment to prevent Fast Refresh\n// @refresh reset\n\nfunction Component() {\n  // Component will fully remount on changes\n}\n```\n\n## HMR Boundaries\n\n### Understanding Boundaries\n\n```typescript\n// Parent.tsx imports Child.tsx\n// When Child.tsx changes:\n// 1. Vite tries to apply HMR to Child.tsx\n// 2. If Child accepts, only Child updates\n// 3. If not, Parent is checked\n// 4. Chain continues until boundary is found\n// 5. If no boundary, full reload\n\n// React Fast Refresh creates boundaries at component level\n```\n\n### Custom Boundaries\n\n```typescript\n// Mark module as HMR boundary\nif (import.meta.hot) {\n  import.meta.hot.accept((newModule) => {\n    // Handle update manually\n    updateComponent(newModule.default)\n  })\n}\n```\n\n## Debugging HMR\n\n### Verbose Logging\n\n```typescript\n// In browser console\nlocalStorage.debug = 'vite:*'\n\n// Or specific\nlocalStorage.debug = 'vite:hmr'\n```\n\n### HMR Events\n\n```typescript\nif (import.meta.hot) {\n  // Before update is applied\n  import.meta.hot.on('vite:beforeUpdate', (payload) => {\n    console.log('Before update:', payload)\n  })\n\n  // After update is applied\n  import.meta.hot.on('vite:afterUpdate', (payload) => {\n    console.log('After update:', payload)\n  })\n\n  // Before full reload\n  import.meta.hot.on('vite:beforeFullReload', (payload) => {\n    console.log('Before reload:', payload)\n  })\n\n  // Before prune (unused modules removed)\n  import.meta.hot.on('vite:beforePrune', (payload) => {\n    console.log('Before prune:', payload)\n  })\n\n  // Invalidate\n  import.meta.hot.on('vite:invalidate', (payload) => {\n    console.log('Invalidate:', payload)\n  })\n\n  // Error\n  import.meta.hot.on('vite:error', (payload) => {\n    console.error('HMR error:', payload)\n  })\n}\n```\n\n## Common Issues\n\n### State Reset\n\n```typescript\n// Issue: State resets on save\n// Solution: Ensure proper HMR boundaries\n\n// BAD: Anonymous arrow functions\nexport default () => <div />\n\n// GOOD: Named function components\nexport default function MyComponent() {\n  return <div />\n}\n```\n\n### Side Effects\n\n```typescript\n// Issue: Side effects run multiple times\n// Solution: Cleanup in dispose\n\nlet interval: number\n\nfunction startPolling() {\n  interval = setInterval(fetchData, 1000)\n}\n\nif (import.meta.hot) {\n  import.meta.hot.dispose(() => {\n    clearInterval(interval)\n  })\n}\n\nstartPolling()\n```\n\n### CSS Not Updating\n\n```typescript\n// Issue: CSS changes not reflecting\n// Vite handles CSS HMR automatically\n// If issues, check for:\n// 1. CSS modules naming\n// 2. PostCSS config errors\n// 3. Imported in multiple places\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-stack-vite/skills/vite-plugins/SKILL.md": "---\nname: vite-plugins\ndescription: Vite plugins and ecosystem\nuser-invocable: false\n---\n\n# Vite Plugins Skill\n\nPatterns for using and creating Vite plugins.\n\n## Official Plugins\n\n### React Plugin\n\n```bash\nnpm install @vitejs/plugin-react\n```\n\n```typescript\nimport react from '@vitejs/plugin-react'\n\nexport default defineConfig({\n  plugins: [\n    react({\n      // Babel options\n      babel: {\n        plugins: ['@emotion/babel-plugin'],\n      },\n      // Fast Refresh options\n      fastRefresh: true,\n      // JSX runtime\n      jsxRuntime: 'automatic',\n    }),\n  ],\n})\n```\n\n### Legacy Browser Support\n\n```bash\nnpm install @vitejs/plugin-legacy\n```\n\n```typescript\nimport legacy from '@vitejs/plugin-legacy'\n\nexport default defineConfig({\n  plugins: [\n    legacy({\n      targets: ['defaults', 'not IE 11'],\n      additionalLegacyPolyfills: ['regenerator-runtime/runtime'],\n      polyfills: ['es.promise', 'es.array.iterator'],\n    }),\n  ],\n})\n```\n\n## Community Plugins\n\n### SVG as Components\n\n```bash\nnpm install vite-plugin-svgr\n```\n\n```typescript\nimport svgr from 'vite-plugin-svgr'\n\nexport default defineConfig({\n  plugins: [\n    svgr({\n      svgrOptions: {\n        icon: true,\n      },\n    }),\n  ],\n})\n\n// Usage\nimport { ReactComponent as Logo } from './logo.svg'\n// or\nimport Logo from './logo.svg?react'\n```\n\n### Auto Import\n\n```bash\nnpm install unplugin-auto-import\n```\n\n```typescript\nimport AutoImport from 'unplugin-auto-import/vite'\n\nexport default defineConfig({\n  plugins: [\n    AutoImport({\n      imports: ['react', 'react-router-dom'],\n      dts: './src/auto-imports.d.ts',\n    }),\n  ],\n})\n```\n\n### Component Auto Import\n\n```bash\nnpm install unplugin-react-components\n```\n\n```typescript\nimport Components from 'unplugin-react-components/vite'\n\nexport default defineConfig({\n  plugins: [\n    Components({\n      dirs: ['src/components'],\n      dts: './src/components.d.ts',\n    }),\n  ],\n})\n```\n\n### PWA Plugin\n\n```bash\nnpm install vite-plugin-pwa\n```\n\n```typescript\nimport { VitePWA } from 'vite-plugin-pwa'\n\nexport default defineConfig({\n  plugins: [\n    VitePWA({\n      registerType: 'autoUpdate',\n      manifest: {\n        name: 'My App',\n        short_name: 'App',\n        theme_color: '#ffffff',\n        icons: [\n          {\n            src: '/icon-192.png',\n            sizes: '192x192',\n            type: 'image/png',\n          },\n        ],\n      },\n      workbox: {\n        globPatterns: ['**/*.{js,css,html,ico,png,svg}'],\n      },\n    }),\n  ],\n})\n```\n\n### Environment Variables\n\n```bash\nnpm install vite-plugin-env-compatible\n```\n\n```typescript\nimport envCompatible from 'vite-plugin-env-compatible'\n\nexport default defineConfig({\n  plugins: [\n    envCompatible({\n      prefix: 'REACT_APP',  // Support CRA env vars\n    }),\n  ],\n})\n```\n\n### Compression\n\n```bash\nnpm install vite-plugin-compression\n```\n\n```typescript\nimport compression from 'vite-plugin-compression'\n\nexport default defineConfig({\n  plugins: [\n    compression({\n      algorithm: 'gzip',\n      ext: '.gz',\n    }),\n    compression({\n      algorithm: 'brotliCompress',\n      ext: '.br',\n    }),\n  ],\n})\n```\n\n### Bundle Analyzer\n\n```bash\nnpm install rollup-plugin-visualizer\n```\n\n```typescript\nimport { visualizer } from 'rollup-plugin-visualizer'\n\nexport default defineConfig({\n  plugins: [\n    visualizer({\n      filename: 'stats.html',\n      open: true,\n      gzipSize: true,\n      brotliSize: true,\n    }),\n  ],\n})\n```\n\n## Creating Custom Plugins\n\n### Plugin Structure\n\n```typescript\nimport type { Plugin } from 'vite'\n\nfunction myPlugin(): Plugin {\n  return {\n    name: 'my-plugin',\n\n    // Plugin hooks\n\n    // Called when config is resolved\n    configResolved(config) {\n      console.log('Config resolved:', config)\n    },\n\n    // Transform source code\n    transform(code, id) {\n      if (id.endsWith('.custom')) {\n        return {\n          code: transformCustomFile(code),\n          map: null,\n        }\n      }\n    },\n\n    // Handle virtual modules\n    resolveId(id) {\n      if (id === 'virtual:my-module') {\n        return '\\0virtual:my-module'\n      }\n    },\n\n    load(id) {\n      if (id === '\\0virtual:my-module') {\n        return 'export default \"Hello from virtual module\"'\n      }\n    },\n\n    // Modify HTML\n    transformIndexHtml(html) {\n      return html.replace(\n        '</head>',\n        '<script>console.log(\"injected\")</script></head>'\n      )\n    },\n  }\n}\n\nexport default defineConfig({\n  plugins: [myPlugin()],\n})\n```\n\n### Hooks Reference\n\n```typescript\ninterface Plugin {\n  // Vite-specific hooks\n  config?: (config, env) => UserConfig | null | void\n  configResolved?: (config) => void\n  configureServer?: (server) => void | (() => void)\n  configurePreviewServer?: (server) => void | (() => void)\n  transformIndexHtml?: (html, ctx) => string | HtmlTagDescriptor[]\n  handleHotUpdate?: (ctx) => ModuleNode[] | void\n\n  // Rollup hooks (build-time)\n  options?: (options) => InputOptions | null\n  buildStart?: (options) => void\n  resolveId?: (source, importer) => ResolveIdResult\n  load?: (id) => LoadResult\n  transform?: (code, id) => TransformResult\n  buildEnd?: (error?) => void\n  closeBundle?: () => void\n\n  // Rollup hooks (output generation)\n  outputOptions?: (options) => OutputOptions | null\n  renderStart?: (outputOptions, inputOptions) => void\n  augmentChunkHash?: (chunkInfo) => string | void\n  renderChunk?: (code, chunk, options) => RenderChunkResult\n  generateBundle?: (options, bundle) => void\n  writeBundle?: (options, bundle) => void\n}\n```\n\n### Dev Server Middleware\n\n```typescript\nfunction apiMockPlugin(): Plugin {\n  return {\n    name: 'api-mock',\n\n    configureServer(server) {\n      server.middlewares.use('/api/mock', (req, res, next) => {\n        if (req.method === 'GET') {\n          res.setHeader('Content-Type', 'application/json')\n          res.end(JSON.stringify({ mock: true }))\n          return\n        }\n        next()\n      })\n    },\n  }\n}\n```\n\n### Hot Module Replacement\n\n```typescript\nfunction hmrPlugin(): Plugin {\n  return {\n    name: 'hmr-plugin',\n\n    handleHotUpdate({ file, server, modules }) {\n      if (file.endsWith('.config.json')) {\n        server.ws.send({\n          type: 'custom',\n          event: 'config-update',\n          data: { file },\n        })\n        return []  // Don't trigger default HMR\n      }\n    },\n  }\n}\n\n// Client-side\nif (import.meta.hot) {\n  import.meta.hot.on('config-update', (data) => {\n    console.log('Config updated:', data.file)\n    location.reload()\n  })\n}\n```\n\n## Plugin Ordering\n\n```typescript\nexport default defineConfig({\n  plugins: [\n    // Plugins run in order\n    // Use enforce to control order\n\n    { ...myPlugin(), enforce: 'pre' },   // Run before core plugins\n    react(),                              // Normal order\n    { ...otherPlugin(), enforce: 'post' }, // Run after core plugins\n  ],\n})\n```\n\n## Integration\n\nUsed by:\n- `frontend-developer` agent\n- `fullstack-developer` agent\n",
        "plugins/aai-testing/.claude-plugin/plugin.json": "{\n  \"name\": \"aai-testing\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Testing agents and QA - technology-agnostic unit, API, and E2E test specialists. Auto-detects testing framework.\",\n  \"author\": {\n    \"name\": \"AnswerAI\",\n    \"url\": \"https://github.com/the-answerai\"\n  },\n  \"homepage\": \"https://github.com/the-answerai/alphaagent-team#readme\",\n  \"repository\": \"https://github.com/the-answerai/alphaagent-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"testing\", \"qa\", \"unit-tests\", \"e2e\", \"automation\", \"stack-detection\"]\n}\n",
        "plugins/aai-testing/agents/api-test-developer/AGENT.md": "---\nname: api-test-developer\ndescription: Specialized agent for API testing - REST, GraphQL, and WebSocket endpoints. Use for contract testing, load testing, and API integration tests.\nmodel: sonnet\nmodel_configurable: true\nuser-invocable: true\ntools:\n  - Read\n  - Write\n  - Edit\n  - Glob\n  - Grep\n  - Bash\nskills:\n  - test-strategy\n  - test-data-management\n  - coverage-analysis\n---\n\n# API Test Developer Agent\n\nYou are a specialized agent focused on API testing for backend services.\n\n## Critical: Technology Detection\n\n**BEFORE writing any API test code, you MUST detect the project's testing framework:**\n\n1. Check package.json for API testing dependencies:\n   - `supertest`  Supertest (Node.js)\n   - `@playwright/test` with API testing  Playwright API\n   - `vitest` or `jest`  Test runner (use with fetch/axios)\n   - `pactum`  PactumJS\n   - `k6`  k6 (load testing)\n\n2. Check for existing API test patterns:\n   - Look in `tests/api/`, `tests/integration/`, `__tests__/api/`\n   - Check imports in existing test files\n\n3. Identify the API framework being tested:\n   - Express, Fastify, NestJS, Hono, Next.js API routes\n\n4. **Use the detected framework's syntax and patterns exclusively.**\n\n## Core Responsibilities\n\n1. **Contract Testing**: Verify API contracts (request/response schemas)\n2. **Integration Testing**: Test API endpoints with real or test database\n3. **Load Testing**: Performance testing for critical endpoints\n4. **Security Testing**: Authentication, authorization, input validation\n\n## API Testing Philosophy\n\n### Test the Contract, Not Implementation\n\nFocus on:\n- Request format (method, path, headers, body)\n- Response format (status, headers, body shape)\n- Error responses for invalid inputs\n- Edge cases in business logic\n\nAvoid:\n- Testing internal implementation details\n- Coupling tests to database schema\n- Over-mocking (test real behavior when possible)\n\n## Test Categories\n\n### 1. Happy Path Tests\n\nTest successful operations:\n- Create resource returns 201\n- Read resource returns correct data\n- Update resource persists changes\n- Delete resource removes data\n\n### 2. Validation Tests\n\nTest input validation:\n- Missing required fields  400\n- Invalid data types  400\n- Out of range values  400\n- Malformed JSON  400\n\n### 3. Authentication Tests\n\nTest auth requirements:\n- No token  401\n- Invalid token  401\n- Expired token  401\n- Valid token  success\n\n### 4. Authorization Tests\n\nTest permissions:\n- User accessing own resource  success\n- User accessing another's resource  403\n- Admin accessing any resource  success\n- Role-based restrictions\n\n### 5. Error Handling Tests\n\nTest error scenarios:\n- Resource not found  404\n- Duplicate resource  409\n- Rate limit exceeded  429\n- Server error handling  500\n\n## Test Organization\n\n```\ntests/\n api/\n    users/\n       create-user.test.ts\n       get-user.test.ts\n       update-user.test.ts\n       delete-user.test.ts\n    auth/\n       login.test.ts\n       refresh-token.test.ts\n    products/\n        ...\n fixtures/\n    api-responses.ts\n helpers/\n     api-client.ts\n     auth-helpers.ts\n```\n\n## Response Validation\n\n### Schema Validation\n\nValidate response structure:\n- Required fields present\n- Correct data types\n- Nested object shapes\n- Array contents\n\n### Status Code Verification\n\n```\n200 - OK (GET, PUT, PATCH success)\n201 - Created (POST success)\n204 - No Content (DELETE success)\n400 - Bad Request (validation error)\n401 - Unauthorized (auth required)\n403 - Forbidden (no permission)\n404 - Not Found (resource doesn't exist)\n409 - Conflict (duplicate, constraint violation)\n422 - Unprocessable Entity (semantic error)\n429 - Too Many Requests (rate limited)\n500 - Internal Server Error (unexpected error)\n```\n\n### Header Verification\n\nCheck important headers:\n- Content-Type\n- Cache-Control\n- Rate limit headers\n- CORS headers\n\n## Test Data Management\n\n### Database State\n\nOptions for test database:\n1. **In-memory database**: Fast, isolated (SQLite)\n2. **Docker container**: Real database, isolated\n3. **Shared test database**: Reset between tests\n4. **Transaction rollback**: Wrap tests in transactions\n\n### Test Fixtures\n\n- Create factory functions for test data\n- Use realistic but deterministic data\n- Clean up after tests\n- Avoid hardcoded IDs\n\n## Authentication in Tests\n\n### Test User Setup\n\n```\n// Create test users with known credentials\n// Store tokens for authenticated requests\n// Use different users for authorization tests\n// Reset auth state between tests\n```\n\n### Token Management\n\n- Generate tokens for test users\n- Test token expiration handling\n- Test refresh token flows\n- Test invalid token scenarios\n\n## Performance Testing\n\n### Load Testing Considerations\n\n- Test under expected load\n- Test peak load scenarios\n- Identify bottlenecks\n- Measure response times\n\n### Metrics to Track\n\n- Response time (p50, p95, p99)\n- Throughput (requests/second)\n- Error rate under load\n- Resource utilization\n\n## Quality Checklist\n\nBefore completing API test development:\n\n- [ ] All endpoints have tests\n- [ ] Happy paths covered\n- [ ] Error cases tested\n- [ ] Authentication tested\n- [ ] Authorization tested\n- [ ] Input validation tested\n- [ ] Response schemas validated\n- [ ] Status codes verified\n- [ ] Test data properly managed\n- [ ] Tests are independent\n\n## Anti-Patterns to Avoid\n\n1. **Testing through UI**: Use direct API calls\n2. **Shared mutable state**: Each test should be independent\n3. **Hardcoded URLs**: Use configuration\n4. **Ignoring response body**: Validate actual data\n5. **Only testing success**: Error paths are critical\n6. **Manual cleanup**: Use automatic teardown\n7. **Testing framework internals**: Test your API, not Express\n\n## Working Approach\n\n1. **Map API endpoints**: List all routes to test\n2. **Detect test framework**: Check package.json and config\n3. **Set up test database**: Configure isolated database\n4. **Create test utilities**: Auth helpers, API client\n5. **Write tests by endpoint**: Group related tests\n6. **Add error scenarios**: Test all failure modes\n7. **Verify in CI**: Ensure tests run in pipeline\n\n## Integration\n\nWorks with skills:\n- `test-strategy` - Test organization and planning\n- `test-data-management` - Fixtures and factories\n- `coverage-analysis` - Endpoint coverage\n\nTechnology-specific skills (load based on detection):\n- `supertest-*` skills for Supertest\n- `jest-*` or `vitest-*` skills for test runners\n\nCoordinates with:\n- `unit-test-developer` - For service-level tests\n- `e2e-test-developer` - For full-stack tests\n- `backend-developer` - For understanding API structure\n",
        "plugins/aai-testing/agents/e2e-test-developer/AGENT.md": "---\nname: e2e-test-developer\ndescription: Specialized agent for end-to-end testing of web applications. Use for testing complete user flows, cross-browser compatibility, visual regression, and accessibility testing.\nmodel: sonnet\nmodel_configurable: true\nuser-invocable: true\ntools:\n  - Read\n  - Write\n  - Edit\n  - Glob\n  - Grep\n  - Bash\nskills:\n  - test-strategy\n  - test-data-management\n  - coverage-analysis\n---\n\n# E2E Test Developer Agent\n\nYou are a specialized agent focused on end-to-end testing for web applications.\n\n## Critical: Technology Detection\n\n**BEFORE writing any E2E test code, you MUST detect the project's testing framework:**\n\n1. Check package.json for E2E dependencies:\n   - `@playwright/test`  Playwright\n   - `cypress`  Cypress\n   - `webdriverio`  WebDriverIO\n   - `puppeteer`  Puppeteer\n   - `selenium-webdriver`  Selenium\n\n2. Check for configuration files:\n   - `playwright.config.ts/js`  Playwright\n   - `cypress.config.ts/js` or `cypress.json`  Cypress\n   - `wdio.conf.js`  WebDriverIO\n\n3. Check for existing E2E test patterns in `e2e/`, `cypress/`, `tests/`\n\n4. **Use the detected framework's syntax and patterns exclusively.**\n\n## Core Responsibilities\n\n1. **User Flow Testing**: Test complete user journeys through the application\n2. **Cross-Browser Testing**: Ensure compatibility across browsers\n3. **Visual Testing**: Catch visual regressions\n4. **Accessibility Testing**: Verify a11y compliance\n\n## E2E Testing Philosophy\n\n### Test Critical Paths First\n\nPrioritize tests for:\n1. Core business flows (signup, login, checkout)\n2. Revenue-impacting features\n3. High-traffic user journeys\n4. Features with complex state\n\n### Page Object Model\n\nRegardless of framework, use Page Object pattern:\n\n```\npages/\n LoginPage.ts      # Login page interactions\n DashboardPage.ts  # Dashboard interactions\n BasePage.ts       # Shared functionality\n```\n\nBenefits:\n- Centralized selectors\n- Reusable actions\n- Easier maintenance\n- Better test readability\n\n## Selector Strategy\n\n### Priority Order (Most to Least Preferred)\n\n1. **data-testid attributes**: `[data-testid=\"login-button\"]`\n2. **Accessible roles**: `button`, `link`, `textbox`\n3. **Text content**: \"Sign In\", \"Submit\"\n4. **Labels**: Form labels, aria-labels\n5. **CSS classes**: Only for stable, semantic classes\n6. **XPath**: Last resort, avoid if possible\n\n### Why data-testid?\n\n- Decoupled from styling and structure\n- Explicit intent for testing\n- Stable across refactors\n- No impact on production (can be stripped)\n\n## Test Organization\n\n```\ne2e/\n tests/\n    auth/\n       login.spec.ts\n       logout.spec.ts\n       password-reset.spec.ts\n    checkout/\n       add-to-cart.spec.ts\n       complete-purchase.spec.ts\n    smoke/\n        critical-paths.spec.ts\n pages/\n    LoginPage.ts\n    CheckoutPage.ts\n fixtures/\n    users.ts\n support/\n     commands.ts\n```\n\n## Authentication Handling\n\n### Patterns for Test Authentication\n\n1. **API Login**: Skip UI, authenticate via API (fastest)\n2. **Shared Auth State**: Login once, reuse session\n3. **Test Users**: Dedicated accounts for testing\n4. **Auth Fixtures**: Pre-authenticated state files\n\n### Security Considerations\n\n- Never commit real credentials\n- Use environment variables for test credentials\n- Rotate test account passwords regularly\n- Use minimal permissions for test accounts\n\n## User Flow Testing Principles\n\n### Complete Flows\n\nTest the entire journey, not fragments:\n- Start from realistic entry point\n- Include all steps a user would take\n- Verify final state completely\n- Clean up test data after\n\n### Realistic Scenarios\n\n- Use realistic test data\n- Simulate real user behavior (typing speed, pauses)\n- Test with realistic screen sizes\n- Include error recovery paths\n\n## Visual Testing\n\n### When to Use\n\n- Design systems and component libraries\n- Landing pages and marketing sites\n- After major CSS/styling changes\n- Cross-browser consistency checks\n\n### Best Practices\n\n- Establish stable baselines\n- Handle dynamic content (dates, random data)\n- Set appropriate diff thresholds\n- Review failures manually before updating baselines\n\n## Accessibility Testing\n\n### Automated Checks\n\n- Run axe-core or similar on each page\n- Test keyboard navigation\n- Verify focus management\n- Check color contrast\n\n### Manual Verification\n\n- Screen reader testing for critical flows\n- Keyboard-only navigation\n- Reduced motion preferences\n- High contrast mode\n\n## Quality Checklist\n\nBefore completing E2E test development:\n\n- [ ] Critical user flows covered\n- [ ] Authentication flows tested\n- [ ] Form validation tested\n- [ ] Error states handled\n- [ ] Cross-browser testing configured\n- [ ] Visual regression tests for key pages\n- [ ] Accessibility tests passing\n- [ ] Tests are stable (no flakiness)\n- [ ] Tests run in reasonable time\n- [ ] CI/CD pipeline integration working\n\n## Anti-Patterns to Avoid\n\n1. **Testing implementation details**: Test user outcomes, not DOM structure\n2. **Overly specific selectors**: Brittle tests break on minor changes\n3. **Long test files**: Split into focused test suites\n4. **No cleanup**: Leave test data in clean state\n5. **Hardcoded waits**: Use proper wait mechanisms\n6. **Ignoring flaky tests**: Fix or remove, never skip permanently\n7. **Testing everything E2E**: Unit/integration tests are more efficient for logic\n\n## Handling Flaky Tests\n\n### Causes\n\n- Network timing variability\n- Animation/transition timing\n- Shared test data\n- Race conditions\n- External service dependencies\n\n### Solutions\n\n- Use proper wait mechanisms (for elements, network)\n- Retry flaky operations (not whole tests)\n- Isolate test data\n- Mock external services\n- Run tests sequentially if needed\n\n## Working Approach\n\n1. **Understand the flow**: Map out the user journey\n2. **Detect E2E framework**: Check package.json and config\n3. **Plan test structure**: Identify page objects needed\n4. **Write tests**: Use framework-appropriate syntax\n5. **Handle auth**: Set up authentication efficiently\n6. **Verify stability**: Run multiple times to catch flakiness\n7. **Add to CI**: Ensure tests run in pipeline\n\n## Integration\n\nWorks with skills:\n- `test-strategy` - Test organization and planning\n- `test-data-management` - Fixtures and test users\n- `coverage-analysis` - Critical path coverage\n\nTechnology-specific skills (load based on detection):\n- `playwright-*` skills for Playwright projects\n- `cypress-*` skills for Cypress projects\n\nCoordinates with:\n- `unit-test-developer` - For unit test coverage\n- `api-test-developer` - For API contract tests\n- `frontend-developer` - For selector strategies and app structure\n",
        "plugins/aai-testing/agents/unit-test-developer/AGENT.md": "---\nname: unit-test-developer\ndescription: Specialized agent for writing comprehensive unit tests. Use for testing functions, classes, modules, and services with proper mocking strategies.\nmodel: sonnet\nmodel_configurable: true\nuser-invocable: true\ntools:\n  - Read\n  - Write\n  - Edit\n  - Glob\n  - Grep\n  - Bash\nskills:\n  - test-strategy\n  - test-data-management\n  - coverage-analysis\n---\n\n# Unit Test Developer Agent\n\nYou are a specialized agent focused on writing comprehensive, maintainable unit tests.\n\n## Critical: Technology Detection\n\n**BEFORE writing any test code, you MUST detect the project's testing framework:**\n\n1. Check package.json for testing dependencies:\n   - `jest`  Jest\n   - `vitest`  Vitest\n   - `mocha`  Mocha (often with chai)\n   - `ava`  AVA\n   - `@testing-library/*`  Testing Library\n\n2. Check for configuration files:\n   - `jest.config.js/ts`  Jest\n   - `vitest.config.js/ts`  Vitest\n   - `.mocharc.js`  Mocha\n   - `ava.config.js`  AVA\n\n3. Check for existing test patterns in `__tests__/`, `*.test.ts`, `*.spec.ts`\n\n4. **Use the detected framework's syntax and patterns exclusively.**\n\n## Core Responsibilities\n\n1. **Test Creation**: Write unit tests for functions, classes, and modules\n2. **Coverage Analysis**: Identify untested code paths and edge cases\n3. **Test Refactoring**: Improve existing tests for clarity and coverage\n4. **Mock Design**: Create effective mocks and stubs for dependencies\n\n## Testing Philosophy\n\n### Arrange-Act-Assert Pattern\n\nStructure every test with clear phases:\n\n```\n// Arrange - Set up test data and dependencies\n// Act - Execute the code under test\n// Assert - Verify the expected outcome\n```\n\nThe specific syntax depends on the detected framework.\n\n### Test Naming Convention\n\nUse descriptive names that explain what is being tested:\n\n```\nPattern: should [expected behavior] when [condition]\n\nExamples:\n- should throw ValidationError when email is invalid\n- should return empty array when no users match criteria\n- should retry 3 times when network fails\n```\n\n## Edge Case Coverage\n\nAlways test:\n\n1. **Happy path**: Normal successful operation\n2. **Empty inputs**: null, undefined, empty strings, empty arrays\n3. **Boundary conditions**: min/max values, off-by-one errors\n4. **Error conditions**: Invalid inputs, network failures, timeouts\n5. **Concurrent operations**: Race conditions (where applicable)\n\n## Mocking Strategy\n\n### When to Mock\n\n- External services (APIs, databases)\n- Time-dependent operations\n- Random number generators\n- File system operations\n- Network requests\n- Third-party libraries with side effects\n\n### When NOT to Mock\n\n- Pure functions with no side effects\n- Simple data transformations\n- Value objects\n- Your own code that should be tested together\n\n### Mock Principles\n\n1. Mock at the boundary (external dependencies)\n2. Keep mocks minimal and focused\n3. Verify mock interactions when behavior matters\n4. Reset mocks between tests to prevent leakage\n\n## Test Organization\n\n```\ntests/\n unit/\n    services/\n       UserService.test.ts\n       AuthService.test.ts\n    utils/\n       validators.test.ts\n    models/\n        User.test.ts\n fixtures/\n    users.ts\n helpers/\n     testUtils.ts\n```\n\n### Grouping Tests\n\n- Group related tests in describe blocks\n- One describe per function/method\n- Nested describes for different scenarios\n- Share setup with beforeEach when appropriate\n\n## Quality Checklist\n\nBefore completing test development:\n\n- [ ] All public methods have tests\n- [ ] Edge cases are covered\n- [ ] Error paths are tested\n- [ ] Mocks are minimal and focused\n- [ ] Tests are independent (no shared mutable state)\n- [ ] Test names clearly describe behavior\n- [ ] No flaky tests (deterministic results)\n- [ ] Coverage meets project threshold\n- [ ] Tests run fast (< 5s for unit test suite)\n\n## Common Testing Patterns\n\n### Testing Async Code\n\n- Use async/await for readability\n- Test both success and failure paths\n- Verify promises resolve/reject correctly\n- Handle timeouts appropriately\n\n### Testing Error Handling\n\n- Test that errors are thrown when expected\n- Verify error messages and types\n- Test error recovery behavior\n- Don't swallow errors in tests\n\n### Testing with Dependencies\n\n- Inject dependencies for testability\n- Use factories for test data\n- Reset state between tests\n- Avoid global state pollution\n\n## Anti-Patterns to Avoid\n\n1. **Testing implementation details**: Test behavior, not internals\n2. **Brittle tests**: Don't over-specify assertions\n3. **Slow tests**: Mock expensive operations\n4. **Coupled tests**: Each test should be independent\n5. **No assertions**: Every test must assert something\n6. **Console.log debugging**: Use debugger or proper assertions\n7. **Commented-out tests**: Delete or fix, never comment\n\n## Working Approach\n\n1. **Understand the code**: Read the module being tested\n2. **Detect test framework**: Check package.json and config\n3. **Identify test cases**: List happy paths and edge cases\n4. **Write tests**: Use framework-appropriate syntax\n5. **Verify coverage**: Check coverage report for gaps\n6. **Refactor if needed**: Ensure tests are maintainable\n\n## Integration\n\nWorks with skills:\n- `test-strategy` - Test organization and planning\n- `test-data-management` - Fixtures and factories\n- `coverage-analysis` - Coverage improvement strategies\n\nTechnology-specific skills (load based on detection):\n- `jest-*` skills for Jest projects\n- `vitest-*` skills for Vitest projects\n- `mocha-*` skills for Mocha projects\n\nCoordinates with:\n- `api-test-developer` - For API integration tests\n- `e2e-test-developer` - For end-to-end tests\n- `backend-developer` - For understanding code to test\n",
        "plugins/aai-testing/commands/coverage-report.md": "---\ndescription: Analyze test coverage and identify gaps in testing\nargument-hint: [path or scope]\n---\n\n# /coverage-report - Analyze Test Coverage\n\nAnalyze test coverage and identify gaps.\n\n## Usage\n\n```\n/coverage-report\n/coverage-report src/services/\n/coverage-report --threshold 80\n```\n\n## Workflow\n\n1. **Run Coverage Analysis**\n   - Execute test suite with coverage\n   - Collect coverage metrics\n   - Identify uncovered code\n\n2. **Analyze Results**\n   - Line coverage breakdown\n   - Branch coverage analysis\n   - Function coverage\n\n3. **Identify Gaps**\n   - Uncovered files/functions\n   - Partially covered branches\n   - Critical paths without tests\n\n4. **Prioritize Improvements**\n   - High-risk uncovered code\n   - Business-critical paths\n   - Easy wins\n\n## Output\n\n- Coverage summary by directory\n- Uncovered critical paths\n- Specific line/branch gaps\n- Prioritized recommendations\n- Commands to improve coverage\n",
        "plugins/aai-testing/commands/improve-coverage.md": "---\ndescription: Improve test coverage by writing tests for uncovered code paths\nargument-hint: [file or function]\n---\n\n# /improve-coverage - Improve Test Coverage\n\nWrite tests to improve coverage for specific code paths.\n\n## Usage\n\n```\n/improve-coverage\n/improve-coverage src/services/auth.ts\n/improve-coverage --target 80%\n```\n\n## Workflow\n\n1. **Identify Gaps**\n   - Analyze current coverage\n   - Find uncovered functions\n   - Identify missing branch coverage\n\n2. **Prioritize**\n   - Critical business logic first\n   - Error handling paths\n   - Edge cases\n\n3. **Write Tests**\n   - Unit tests for uncovered functions\n   - Branch coverage for conditionals\n   - Error path testing\n\n4. **Verify Improvement**\n   - Run coverage again\n   - Confirm gaps are filled\n   - Check for regressions\n\n## Test Types Written\n\n- Unit tests for pure functions\n- Integration tests for services\n- Mock-based tests for dependencies\n- Error scenario tests\n\n## Output\n\n- New test files\n- Coverage improvement summary\n- Remaining gaps (if any)\n- Suggestions for further improvement\n",
        "plugins/aai-testing/commands/run-tests.md": "---\ndescription: Run tests with smart filtering, watch mode, and failure analysis\nargument-hint: [test pattern or path]\n---\n\n# /run-tests - Run Tests\n\nRun tests with smart filtering and analysis of failures.\n\n## Usage\n\n```\n/run-tests\n/run-tests auth\n/run-tests src/services/payment.test.ts\n/run-tests --watch\n/run-tests --failed-only\n```\n\n## Workflow\n\n1. **Detect Test Framework**\n   - Jest, Vitest, Mocha, etc.\n   - Find configuration\n   - Identify test patterns\n\n2. **Run Tests**\n   - Execute matching tests\n   - Capture output and results\n   - Track timing\n\n3. **Analyze Failures**\n   - Parse error messages\n   - Identify root causes\n   - Suggest fixes\n\n4. **Report Results**\n   - Pass/fail summary\n   - Slow test identification\n   - Coverage if enabled\n\n## Options\n\n- `--watch` - Watch mode for development\n- `--failed-only` - Re-run only failed tests\n- `--coverage` - Include coverage report\n- `--verbose` - Detailed output\n\n## Output\n\n- Test results summary\n- Failure analysis with suggestions\n- Slow test warnings\n- Coverage summary (if enabled)\n",
        "plugins/aai-testing/commands/test-plan.md": "---\ndescription: Create a comprehensive test strategy and plan for a feature or system\nargument-hint: [feature or scope]\n---\n\n# /test-plan - Create Test Plan\n\nCreate a comprehensive test strategy and plan.\n\n## Usage\n\n```\n/test-plan\n/test-plan user authentication\n/test-plan src/services/payment/\n```\n\n## Workflow\n\n1. **Analyze Scope**\n   - Understand the feature/system\n   - Identify critical paths\n   - Note edge cases\n\n2. **Test Strategy**\n   - Unit test coverage goals\n   - Integration test needs\n   - E2E test scenarios\n\n3. **Test Cases**\n   - Happy path scenarios\n   - Error scenarios\n   - Edge cases\n   - Security considerations\n\n4. **Prioritization**\n   - P0: Critical functionality\n   - P1: Important features\n   - P2: Nice to have\n\n5. **Implementation Plan**\n   - Test file structure\n   - Mocking strategy\n   - Test data needs\n\n## Output\n\n- Test strategy document\n- Prioritized test cases\n- Suggested test file structure\n- Coverage targets\n- Implementation recommendations\n",
        "plugins/aai-testing/skills/coverage-analysis/SKILL.md": "---\nname: coverage-analysis\ndescription: Code coverage analysis and improvement patterns\n---\n\n# Coverage Analysis Skill\n\nPatterns for analyzing and improving code coverage.\n\n## Coverage Configuration\n\n### Jest Configuration\n\n```typescript\n// jest.config.ts\nexport default {\n  collectCoverage: true,\n  collectCoverageFrom: [\n    'src/**/*.{ts,tsx}',\n    '!src/**/*.d.ts',\n    '!src/**/*.test.{ts,tsx}',\n    '!src/**/__tests__/**',\n    '!src/**/index.ts',\n    '!src/types/**'\n  ],\n  coverageDirectory: 'coverage',\n  coverageReporters: ['text', 'lcov', 'html', 'json-summary'],\n  coverageThreshold: {\n    global: {\n      branches: 80,\n      functions: 80,\n      lines: 80,\n      statements: 80\n    },\n    './src/services/': {\n      branches: 90,\n      functions: 90,\n      lines: 90\n    },\n    './src/utils/': {\n      branches: 85,\n      functions: 85,\n      lines: 85\n    }\n  }\n}\n```\n\n### NYC (Istanbul) Configuration\n\n```javascript\n// .nycrc.json\n{\n  \"extends\": \"@istanbuljs/nyc-config-typescript\",\n  \"all\": true,\n  \"include\": [\"src/**/*.ts\"],\n  \"exclude\": [\n    \"**/*.test.ts\",\n    \"**/*.spec.ts\",\n    \"**/test/**\",\n    \"**/types/**\"\n  ],\n  \"reporter\": [\"text\", \"lcov\", \"html\"],\n  \"check-coverage\": true,\n  \"branches\": 80,\n  \"lines\": 80,\n  \"functions\": 80,\n  \"statements\": 80\n}\n```\n\n## Coverage Types\n\n### Statement Coverage\n\n```typescript\nfunction calculate(a: number, b: number): number {\n  const sum = a + b     // Line 1 - covered if function called\n  const product = a * b // Line 2 - covered if function called\n  return sum + product  // Line 3 - covered if function called\n}\n\n// 100% statement coverage with one test\ntest('calculate', () => {\n  expect(calculate(2, 3)).toBe(11)\n})\n```\n\n### Branch Coverage\n\n```typescript\nfunction getStatus(score: number): string {\n  if (score >= 90) {        // Branch 1\n    return 'A'\n  } else if (score >= 80) { // Branch 2\n    return 'B'\n  } else if (score >= 70) { // Branch 3\n    return 'C'\n  } else {                  // Branch 4\n    return 'F'\n  }\n}\n\n// 100% branch coverage requires 4 tests\ntest('returns A for 90+', () => expect(getStatus(95)).toBe('A'))\ntest('returns B for 80-89', () => expect(getStatus(85)).toBe('B'))\ntest('returns C for 70-79', () => expect(getStatus(75)).toBe('C'))\ntest('returns F for below 70', () => expect(getStatus(60)).toBe('F'))\n```\n\n### Function Coverage\n\n```typescript\nclass UserService {\n  create() { }    // Function 1\n  update() { }    // Function 2\n  delete() { }    // Function 3\n  findById() { }  // Function 4\n}\n\n// 50% function coverage - only 2 of 4 tested\ntest('create user', () => service.create())\ntest('find user', () => service.findById())\n```\n\n## Identifying Coverage Gaps\n\n### Uncovered Branches Pattern\n\n```typescript\n// Before - Branch not covered\nfunction process(data: Data | null): Result {\n  if (!data) {\n    return { error: 'No data' }  //  Often missed\n  }\n  return processData(data)\n}\n\n// Add test for null case\ntest('returns error when data is null', () => {\n  expect(process(null)).toEqual({ error: 'No data' })\n})\n```\n\n### Error Path Coverage\n\n```typescript\n// Common uncovered paths\nasync function fetchUser(id: string): Promise<User> {\n  try {\n    const response = await api.get(`/users/${id}`)\n    return response.data\n  } catch (error) {\n    if (error.status === 404) {\n      throw new NotFoundError('User not found')  //  Test this\n    }\n    throw new ApiError('Failed to fetch user')   //  And this\n  }\n}\n\n// Tests for error paths\ntest('throws NotFoundError for 404', async () => {\n  api.get.mockRejectedValue({ status: 404 })\n  await expect(fetchUser('123')).rejects.toThrow(NotFoundError)\n})\n\ntest('throws ApiError for other errors', async () => {\n  api.get.mockRejectedValue({ status: 500 })\n  await expect(fetchUser('123')).rejects.toThrow(ApiError)\n})\n```\n\n## Coverage Reports\n\n### Reading HTML Report\n\n```\nFile         | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s\n-------------|---------|----------|---------|---------|-------------------\nAll files    |   85.5  |   78.2   |   82.1  |   85.5  |\n services/   |   92.3  |   88.5   |   90.0  |   92.3  |\n  user.ts    |   95.0  |   90.0   |  100.0  |   95.0  | 45-47\n  auth.ts    |   89.5  |   87.0   |   80.0  |   89.5  | 23,67-72\n utils/      |   78.2  |   68.0   |   74.3  |   78.2  |\n  helpers.ts |   78.2  |   68.0   |   74.3  |   78.2  | 12-18,34,56-60\n```\n\n### CI Integration\n\n```yaml\n# .github/workflows/test.yml\nname: Tests\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n\n      - run: npm ci\n      - run: npm test -- --coverage\n\n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n        with:\n          files: ./coverage/lcov.info\n          fail_ci_if_error: true\n\n      - name: Check coverage threshold\n        run: |\n          COVERAGE=$(cat coverage/coverage-summary.json | jq '.total.lines.pct')\n          if (( $(echo \"$COVERAGE < 80\" | bc -l) )); then\n            echo \"Coverage $COVERAGE% is below threshold\"\n            exit 1\n          fi\n```\n\n## Coverage Anti-Patterns\n\n### Don't Chase 100%\n\n```typescript\n// Not worth testing - simple getter\nget name(): string {\n  return this._name\n}\n\n// Not worth testing - trivial logic\nisEmpty(): boolean {\n  return this.items.length === 0\n}\n```\n\n### Avoid Coverage for Coverage's Sake\n\n```typescript\n// Bad: Testing implementation, not behavior\ntest('calls internal method', () => {\n  const spy = jest.spyOn(service, '_internalMethod')\n  service.publicMethod()\n  expect(spy).toHaveBeenCalled()  // Brittle, tests implementation\n})\n\n// Good: Testing behavior\ntest('returns processed result', () => {\n  const result = service.publicMethod()\n  expect(result).toMatchObject({ processed: true })\n})\n```\n\n## Focus Areas\n\n### High Coverage Priority\n\n- Business logic and calculations\n- API endpoints and handlers\n- Authentication and authorization\n- Data validation\n- State management\n\n### Lower Coverage Priority\n\n- Simple CRUD operations\n- Configuration files\n- Type definitions\n- Generated code\n- Third-party integrations\n\n## Integration\n\nUsed by:\n- `unit-test-developer` agent\n- `api-test-developer` agent\n",
        "plugins/aai-testing/skills/test-data-management/SKILL.md": "---\nname: test-data-management\ndescription: Test data creation and management patterns\n---\n\n# Test Data Management Skill\n\nPatterns for creating and managing test data.\n\n## Factory Pattern\n\n### Basic Factory\n\n```typescript\n// factories/user.factory.ts\nimport { faker } from '@faker-js/faker'\n\ninterface User {\n  id: string\n  email: string\n  name: string\n  role: 'user' | 'admin'\n  createdAt: Date\n}\n\nexport function createUser(overrides: Partial<User> = {}): User {\n  return {\n    id: faker.string.uuid(),\n    email: faker.internet.email(),\n    name: faker.person.fullName(),\n    role: 'user',\n    createdAt: faker.date.past(),\n    ...overrides\n  }\n}\n\n// Create multiple\nexport function createUsers(count: number, overrides: Partial<User> = {}): User[] {\n  return Array.from({ length: count }, () => createUser(overrides))\n}\n```\n\n### Factory with Traits\n\n```typescript\n// factories/user.factory.ts\ntype UserTrait = 'admin' | 'verified' | 'unverified' | 'premium'\n\nconst traits: Record<UserTrait, Partial<User>> = {\n  admin: { role: 'admin' },\n  verified: { emailVerified: true, verifiedAt: new Date() },\n  unverified: { emailVerified: false, verifiedAt: null },\n  premium: { plan: 'premium', planExpiresAt: faker.date.future() }\n}\n\nexport function createUser(\n  overrides: Partial<User> = {},\n  ...userTraits: UserTrait[]\n): User {\n  const traitOverrides = userTraits.reduce(\n    (acc, trait) => ({ ...acc, ...traits[trait] }),\n    {}\n  )\n\n  return {\n    id: faker.string.uuid(),\n    email: faker.internet.email(),\n    name: faker.person.fullName(),\n    role: 'user',\n    emailVerified: false,\n    createdAt: faker.date.past(),\n    ...traitOverrides,\n    ...overrides\n  }\n}\n\n// Usage\nconst adminUser = createUser({}, 'admin', 'verified')\nconst premiumUser = createUser({ name: 'John' }, 'premium', 'verified')\n```\n\n### Related Factories\n\n```typescript\n// factories/order.factory.ts\nimport { createUser } from './user.factory'\nimport { createProduct } from './product.factory'\n\nexport function createOrder(overrides: Partial<Order> = {}): Order {\n  const user = overrides.user || createUser()\n  const items = overrides.items || [\n    { product: createProduct(), quantity: 1 }\n  ]\n\n  return {\n    id: faker.string.uuid(),\n    user,\n    items,\n    total: items.reduce((sum, item) => sum + item.product.price * item.quantity, 0),\n    status: 'pending',\n    createdAt: new Date(),\n    ...overrides\n  }\n}\n\n// Usage\nconst order = createOrder({\n  user: createUser({}, 'premium'),\n  items: [\n    { product: createProduct({ price: 100 }), quantity: 2 }\n  ]\n})\n```\n\n## Fixture Pattern\n\n### Static Fixtures\n\n```typescript\n// fixtures/users.ts\nexport const fixtures = {\n  validUser: {\n    id: '550e8400-e29b-41d4-a716-446655440000',\n    email: 'john@example.com',\n    name: 'John Doe',\n    role: 'user'\n  },\n\n  adminUser: {\n    id: '550e8400-e29b-41d4-a716-446655440001',\n    email: 'admin@example.com',\n    name: 'Admin User',\n    role: 'admin'\n  },\n\n  invalidUsers: {\n    missingEmail: { name: 'No Email' },\n    invalidEmail: { email: 'not-an-email', name: 'Bad' }\n  }\n}\n```\n\n### Database Seeding\n\n```typescript\n// fixtures/seed.ts\nimport { AppDataSource } from '../data-source'\nimport { User } from '../entities/User'\nimport { createUser, createUsers } from './factories/user.factory'\n\nexport async function seedDatabase() {\n  const userRepository = AppDataSource.getRepository(User)\n\n  // Create admin\n  const admin = createUser({}, 'admin', 'verified')\n  await userRepository.save(admin)\n\n  // Create regular users\n  const users = createUsers(10, {}, 'verified')\n  await userRepository.save(users)\n\n  return { admin, users }\n}\n\nexport async function clearDatabase() {\n  const entities = AppDataSource.entityMetadatas\n\n  for (const entity of entities) {\n    const repository = AppDataSource.getRepository(entity.name)\n    await repository.query(`TRUNCATE \"${entity.tableName}\" CASCADE`)\n  }\n}\n```\n\n## Builder Pattern\n\n```typescript\n// builders/user.builder.ts\nclass UserBuilder {\n  private user: Partial<User> = {}\n\n  withEmail(email: string): this {\n    this.user.email = email\n    return this\n  }\n\n  withName(name: string): this {\n    this.user.name = name\n    return this\n  }\n\n  asAdmin(): this {\n    this.user.role = 'admin'\n    return this\n  }\n\n  verified(): this {\n    this.user.emailVerified = true\n    this.user.verifiedAt = new Date()\n    return this\n  }\n\n  withPlan(plan: 'free' | 'premium'): this {\n    this.user.plan = plan\n    return this\n  }\n\n  build(): User {\n    return createUser(this.user)\n  }\n}\n\nexport const userBuilder = () => new UserBuilder()\n\n// Usage\nconst user = userBuilder()\n  .withEmail('john@example.com')\n  .asAdmin()\n  .verified()\n  .build()\n```\n\n## Database Test Helpers\n\n### Transaction Rollback\n\n```typescript\n// helpers/database.ts\nimport { DataSource, QueryRunner } from 'typeorm'\n\nexport class DatabaseTestHelper {\n  private queryRunner: QueryRunner\n\n  constructor(private dataSource: DataSource) {}\n\n  async startTransaction() {\n    this.queryRunner = this.dataSource.createQueryRunner()\n    await this.queryRunner.connect()\n    await this.queryRunner.startTransaction()\n  }\n\n  async rollback() {\n    await this.queryRunner.rollbackTransaction()\n    await this.queryRunner.release()\n  }\n\n  get manager() {\n    return this.queryRunner.manager\n  }\n}\n\n// Usage in tests\ndescribe('UserService', () => {\n  let dbHelper: DatabaseTestHelper\n\n  beforeEach(async () => {\n    dbHelper = new DatabaseTestHelper(dataSource)\n    await dbHelper.startTransaction()\n  })\n\n  afterEach(async () => {\n    await dbHelper.rollback()\n  })\n\n  it('should create user', async () => {\n    const user = await dbHelper.manager.save(User, createUser())\n    expect(user.id).toBeDefined()\n  })\n})\n```\n\n## API Response Mocking\n\n```typescript\n// mocks/api-responses.ts\nexport const mockResponses = {\n  users: {\n    list: {\n      data: createUsers(5),\n      pagination: { page: 1, limit: 10, total: 5 }\n    },\n    single: {\n      data: createUser()\n    },\n    error: {\n      error: { code: 'NOT_FOUND', message: 'User not found' }\n    }\n  }\n}\n\n// Usage with MSW\nimport { rest } from 'msw'\nimport { setupServer } from 'msw/node'\n\nconst server = setupServer(\n  rest.get('/api/users', (req, res, ctx) => {\n    return res(ctx.json(mockResponses.users.list))\n  })\n)\n```\n\n## Integration\n\nUsed by:\n- `unit-test-developer` agent\n- `api-test-developer` agent\n- `e2e-test-developer` agent\n",
        "plugins/aai-testing/skills/test-strategy/SKILL.md": "---\nname: test-strategy\ndescription: Test planning and strategy patterns\n---\n\n# Test Strategy Skill\n\nPatterns for planning and organizing test suites.\n\n## Testing Pyramid\n\n```\n        \n           E2E     Few - Slow, Expensive\n        \n          Integ    Some - Medium\n        \n          Unit     Many - Fast, Cheap\n        \n```\n\n### Recommended Ratios\n\n- **Unit Tests**: 70% - Fast, isolated, cheap\n- **Integration Tests**: 20% - API and service integration\n- **E2E Tests**: 10% - Critical user flows only\n\n## Test Organization\n\n### By Feature\n\n```\ntests/\n auth/\n    login.test.ts\n    logout.test.ts\n    register.test.ts\n    password-reset.test.ts\n users/\n    create-user.test.ts\n    update-user.test.ts\n    delete-user.test.ts\n orders/\n     create-order.test.ts\n     order-flow.e2e.ts\n```\n\n### By Type\n\n```\ntests/\n unit/\n    services/\n    utils/\n    models/\n integration/\n    api/\n    database/\n e2e/\n     flows/\n     pages/\n```\n\n## What to Test\n\n### Always Test\n\n- Public API methods\n- Business logic and calculations\n- Error handling and edge cases\n- Security-sensitive operations\n- Data validation\n- State transitions\n\n### Consider Testing\n\n- Complex private methods\n- Performance-critical code\n- Integration points\n- Configuration loading\n\n### Avoid Testing\n\n- Third-party library internals\n- Simple getters/setters\n- Framework code\n- Auto-generated code\n\n## Test Prioritization\n\n### P0 - Critical Path\n\nTests that must never fail:\n\n- Authentication/authorization\n- Payment processing\n- Core business workflows\n- Data integrity operations\n\n### P1 - High Priority\n\nTests for important features:\n\n- CRUD operations\n- Search and filtering\n- Notifications\n- User preferences\n\n### P2 - Normal Priority\n\nTests for auxiliary features:\n\n- UI customization\n- Report generation\n- Export/import\n\n## Test Naming\n\n### Pattern\n\n```typescript\n// should [expected behavior] when [condition]\nit('should return empty array when no users exist')\nit('should throw ValidationError when email is invalid')\nit('should update user when data is valid')\n```\n\n### Grouping\n\n```typescript\ndescribe('UserService', () => {\n  describe('createUser', () => {\n    describe('with valid data', () => {\n      it('should create user')\n      it('should send welcome email')\n    })\n\n    describe('with invalid data', () => {\n      it('should throw ValidationError for missing email')\n      it('should throw ValidationError for invalid email format')\n    })\n  })\n})\n```\n\n## Test Data Management\n\n### Fixtures\n\n```typescript\n// fixtures/users.ts\nexport const validUser = {\n  email: 'test@example.com',\n  name: 'Test User',\n  role: 'user'\n}\n\nexport const adminUser = {\n  email: 'admin@example.com',\n  name: 'Admin User',\n  role: 'admin'\n}\n\nexport const invalidUsers = {\n  missingEmail: { name: 'No Email' },\n  invalidEmail: { email: 'not-an-email', name: 'Bad Email' }\n}\n```\n\n### Factories\n\n```typescript\n// factories/user.factory.ts\nimport { faker } from '@faker-js/faker'\n\nexport function createUser(overrides = {}) {\n  return {\n    id: faker.string.uuid(),\n    email: faker.internet.email(),\n    name: faker.person.fullName(),\n    createdAt: faker.date.past(),\n    ...overrides\n  }\n}\n\n// Usage\nconst user = createUser({ role: 'admin' })\nconst users = Array.from({ length: 10 }, () => createUser())\n```\n\n## Coverage Strategy\n\n### Minimum Thresholds\n\n```json\n{\n  \"coverageThreshold\": {\n    \"global\": {\n      \"branches\": 80,\n      \"functions\": 80,\n      \"lines\": 80,\n      \"statements\": 80\n    },\n    \"./src/services/\": {\n      \"branches\": 90,\n      \"lines\": 90\n    }\n  }\n}\n```\n\n### Focus Areas\n\n- Business logic: 90%+\n- API handlers: 80%+\n- Utilities: 80%+\n- UI components: 60%+\n\n## Integration\n\nUsed by:\n- `unit-test-developer` agent\n- `api-test-developer` agent\n- `e2e-test-developer` agent\n"
      },
      "plugins": [
        {
          "name": "aai-core",
          "source": "./plugins/aai-core",
          "description": "Core development workflow - git operations, PR management, code review, and essential commands",
          "version": "1.0.0",
          "category": "workflow",
          "tags": [
            "git",
            "pr",
            "code-review",
            "workflow",
            "core"
          ],
          "categories": [
            "code-review",
            "core",
            "git",
            "pr",
            "workflow"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-core@alphaagent-team"
          ]
        },
        {
          "name": "aai-hooks",
          "source": "./plugins/aai-hooks",
          "description": "Validation hooks - protected branch guards, completion validation, anti-pattern detection",
          "version": "1.0.0",
          "category": "workflow",
          "tags": [
            "hooks",
            "validation",
            "git-guards",
            "quality"
          ],
          "categories": [
            "git-guards",
            "hooks",
            "quality",
            "validation",
            "workflow"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-hooks@alphaagent-team"
          ]
        },
        {
          "name": "aai-pm-linear",
          "source": "./plugins/aai-pm-linear",
          "description": "Linear ticket management - create, plan, optimize, and triage Linear tickets",
          "version": "1.0.0",
          "category": "pm",
          "tags": [
            "linear",
            "tickets",
            "pm",
            "project-management"
          ],
          "categories": [
            "linear",
            "pm",
            "project-management",
            "tickets"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-pm-linear@alphaagent-team"
          ]
        },
        {
          "name": "aai-pm-jira",
          "source": "./plugins/aai-pm-jira",
          "description": "Jira ticket management - create, plan, optimize, and triage Jira tickets",
          "version": "1.0.0",
          "category": "pm",
          "tags": [
            "jira",
            "tickets",
            "pm",
            "project-management",
            "atlassian"
          ],
          "categories": [
            "atlassian",
            "jira",
            "pm",
            "project-management",
            "tickets"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-pm-jira@alphaagent-team"
          ]
        },
        {
          "name": "aai-pm-github",
          "source": "./plugins/aai-pm-github",
          "description": "GitHub Issues management - triage issues, workflow automation",
          "version": "1.0.0",
          "category": "pm",
          "tags": [
            "github",
            "issues",
            "pm",
            "triage"
          ],
          "categories": [
            "github",
            "issues",
            "pm",
            "triage"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-pm-github@alphaagent-team"
          ]
        },
        {
          "name": "aai-dev-frontend",
          "source": "./plugins/aai-dev-frontend",
          "description": "Frontend development agent - technology-agnostic UI component architecture and patterns",
          "version": "1.0.0",
          "category": "dev",
          "tags": [
            "frontend",
            "ui",
            "components",
            "development"
          ],
          "categories": [
            "components",
            "dev",
            "development",
            "frontend",
            "ui"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-dev-frontend@alphaagent-team"
          ]
        },
        {
          "name": "aai-dev-backend",
          "source": "./plugins/aai-dev-backend",
          "description": "Backend development agent - technology-agnostic API design and service patterns",
          "version": "1.0.0",
          "category": "dev",
          "tags": [
            "backend",
            "api",
            "services",
            "development"
          ],
          "categories": [
            "api",
            "backend",
            "dev",
            "development",
            "services"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-dev-backend@alphaagent-team"
          ]
        },
        {
          "name": "aai-dev-database",
          "source": "./plugins/aai-dev-database",
          "description": "Database development agent - technology-agnostic schema design and queries",
          "version": "1.0.0",
          "category": "dev",
          "tags": [
            "database",
            "schema",
            "migrations",
            "development"
          ],
          "categories": [
            "database",
            "dev",
            "development",
            "migrations",
            "schema"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-dev-database@alphaagent-team"
          ]
        },
        {
          "name": "aai-dev-fullstack",
          "source": "./plugins/aai-dev-fullstack",
          "description": "Full-stack development bundle - combines frontend, backend, and database agents",
          "version": "1.0.0",
          "category": "dev",
          "tags": [
            "fullstack",
            "frontend",
            "backend",
            "database"
          ],
          "categories": [
            "backend",
            "database",
            "dev",
            "frontend",
            "fullstack"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-dev-fullstack@alphaagent-team"
          ]
        },
        {
          "name": "aai-testing",
          "source": "./plugins/aai-testing",
          "description": "Testing agents - technology-agnostic unit, API, and E2E test specialists",
          "version": "1.0.0",
          "category": "testing",
          "tags": [
            "testing",
            "qa",
            "unit-tests",
            "e2e",
            "automation"
          ],
          "categories": [
            "automation",
            "e2e",
            "qa",
            "testing",
            "unit-tests"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-testing@alphaagent-team"
          ]
        },
        {
          "name": "aai-architecture",
          "source": "./plugins/aai-architecture",
          "description": "Architecture and design agents - system design, tech lead, requirements analysis",
          "version": "1.0.0",
          "category": "architecture",
          "tags": [
            "architecture",
            "design",
            "system-design",
            "planning"
          ],
          "categories": [
            "architecture",
            "design",
            "planning",
            "system-design"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-architecture@alphaagent-team"
          ]
        },
        {
          "name": "aai-docs",
          "source": "./plugins/aai-docs",
          "description": "Documentation agents - README updates, integration docs, API documentation",
          "version": "1.0.0",
          "category": "docs",
          "tags": [
            "documentation",
            "readme",
            "api-docs",
            "technical-writing"
          ],
          "categories": [
            "api-docs",
            "docs",
            "documentation",
            "readme",
            "technical-writing"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-docs@alphaagent-team"
          ]
        },
        {
          "name": "aai-blog",
          "source": "./plugins/aai-blog",
          "description": "Blog and content writing - technical blog posts, tutorials, announcements",
          "version": "1.0.0",
          "category": "blog",
          "tags": [
            "blog",
            "content",
            "writing",
            "tutorials"
          ],
          "categories": [
            "blog",
            "content",
            "tutorials",
            "writing"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-blog@alphaagent-team"
          ]
        },
        {
          "name": "aai-devops",
          "source": "./plugins/aai-devops",
          "description": "DevOps and deployment - CI/CD pipelines, deployment workflows",
          "version": "1.0.0",
          "category": "devops",
          "tags": [
            "devops",
            "cicd",
            "deployment",
            "docker"
          ],
          "categories": [
            "ci-cd",
            "deployment",
            "devops",
            "docker"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-devops@alphaagent-team"
          ]
        },
        {
          "name": "aai-quality",
          "source": "./plugins/aai-quality",
          "description": "Quality governance - agent evaluation, quality tracking, lessons learned",
          "version": "1.0.0",
          "category": "quality",
          "tags": [
            "quality",
            "governance",
            "evaluation",
            "metrics"
          ],
          "categories": [
            "evaluation",
            "governance",
            "metrics",
            "quality"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-quality@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-react",
          "source": "./plugins/aai-stack-react",
          "description": "React patterns - component architecture, hooks, context, and testing",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "react",
            "hooks",
            "components",
            "frontend"
          ],
          "categories": [
            "components",
            "frontend",
            "hooks",
            "react",
            "stack"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-react@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-nextjs",
          "source": "./plugins/aai-stack-nextjs",
          "description": "Next.js patterns - App Router, Server/Client Components, API routes",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "nextjs",
            "react",
            "app-router",
            "server-components"
          ],
          "categories": [
            "app-router",
            "nextjs",
            "react",
            "server-components",
            "stack"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-nextjs@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-vite",
          "source": "./plugins/aai-stack-vite",
          "description": "Vite patterns - configuration, plugins, and hot module replacement",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "vite",
            "bundler",
            "hmr",
            "frontend"
          ],
          "categories": [
            "bundler",
            "frontend",
            "hmr",
            "stack",
            "vite"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-vite@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-express",
          "source": "./plugins/aai-stack-express",
          "description": "Express patterns - routing, middleware, authentication, validation",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "express",
            "nodejs",
            "api",
            "middleware"
          ],
          "categories": [
            "api",
            "express",
            "middleware",
            "nodejs",
            "stack"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-express@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-node",
          "source": "./plugins/aai-stack-node",
          "description": "Node.js patterns - streams, async patterns, error handling",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "nodejs",
            "streams",
            "async",
            "backend"
          ],
          "categories": [
            "async",
            "backend",
            "nodejs",
            "stack",
            "streams"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-node@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-typescript",
          "source": "./plugins/aai-stack-typescript",
          "description": "TypeScript patterns - generics, utility types, type inference",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "typescript",
            "types",
            "generics",
            "patterns"
          ],
          "categories": [
            "generics",
            "patterns",
            "stack",
            "types",
            "typescript"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-typescript@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-postgres",
          "source": "./plugins/aai-stack-postgres",
          "description": "PostgreSQL patterns - queries, indexes, migrations, performance",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "postgres",
            "postgresql",
            "sql",
            "database"
          ],
          "categories": [
            "database",
            "postgres",
            "postgresql",
            "sql",
            "stack"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-postgres@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-sqlite",
          "source": "./plugins/aai-stack-sqlite",
          "description": "SQLite patterns - better-sqlite3, optimization, embedded database",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "sqlite",
            "better-sqlite3",
            "sql",
            "database"
          ],
          "categories": [
            "better-sqlite3",
            "database",
            "sql",
            "sqlite",
            "stack"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-sqlite@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-prisma",
          "source": "./plugins/aai-stack-prisma",
          "description": "Prisma ORM patterns - schema design, queries, migrations, relations",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "prisma",
            "orm",
            "database",
            "schema"
          ],
          "categories": [
            "database",
            "orm",
            "prisma",
            "schema",
            "stack"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-prisma@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-typeorm",
          "source": "./plugins/aai-stack-typeorm",
          "description": "TypeORM patterns - entities, migrations, QueryBuilder patterns",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "typeorm",
            "orm",
            "database",
            "entities"
          ],
          "categories": [
            "database",
            "entities",
            "orm",
            "stack",
            "typeorm"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-typeorm@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-tailwind",
          "source": "./plugins/aai-stack-tailwind",
          "description": "Tailwind CSS patterns - utility-first styling, components, responsive",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "tailwind",
            "css",
            "styling",
            "utility-first"
          ],
          "categories": [
            "css",
            "stack",
            "styling",
            "tailwind",
            "utility-first"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-tailwind@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-material-ui",
          "source": "./plugins/aai-stack-material-ui",
          "description": "Material UI patterns - MUI components, theming, sx prop",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "mui",
            "material-ui",
            "react",
            "components"
          ],
          "categories": [
            "components",
            "material-ui",
            "mui",
            "react",
            "stack"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-material-ui@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-playwright",
          "source": "./plugins/aai-stack-playwright",
          "description": "Playwright testing patterns - selectors, assertions, fixtures",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "playwright",
            "testing",
            "e2e",
            "automation"
          ],
          "categories": [
            "automation",
            "e2e",
            "playwright",
            "stack",
            "testing"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-playwright@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-jest",
          "source": "./plugins/aai-stack-jest",
          "description": "Jest testing patterns - test organization, mocking, async testing",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "jest",
            "testing",
            "unit-tests",
            "mocking"
          ],
          "categories": [
            "jest",
            "mocking",
            "stack",
            "testing",
            "unit-tests"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-jest@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-auth0",
          "source": "./plugins/aai-stack-auth0",
          "description": "Auth0 integration patterns - NextAuth, Express middleware, authentication",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "auth0",
            "authentication",
            "oauth",
            "security"
          ],
          "categories": [
            "auth0",
            "authentication",
            "oauth",
            "security",
            "stack"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-auth0@alphaagent-team"
          ]
        },
        {
          "name": "aai-stack-electron",
          "source": "./plugins/aai-stack-electron",
          "description": "Electron desktop app packaging - convert web apps to cross-platform desktop applications",
          "version": "1.0.0",
          "category": "stack",
          "tags": [
            "electron",
            "desktop",
            "packaging",
            "cross-platform",
            "native-modules"
          ],
          "categories": [
            "cross-platform",
            "desktop",
            "electron",
            "native-modules",
            "packaging",
            "stack"
          ],
          "install_commands": [
            "/plugin marketplace add the-answerai/alphaagent-team",
            "/plugin install aai-stack-electron@alphaagent-team"
          ]
        }
      ]
    }
  ]
}