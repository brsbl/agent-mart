{
  "author": {
    "id": "kazuph",
    "display_name": "Kazuhiro Homma",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/849165?v=4",
    "url": "https://github.com/kazuph",
    "bio": "Creator of Akerun, Co-Founder \r\n at Photosynth Inc.\r\n",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 18,
      "total_commands": 0,
      "total_skills": 14,
      "total_stars": 14,
      "total_forks": 2
    }
  },
  "marketplaces": [
    {
      "name": "kazuph-dotfiles",
      "version": "2.0.0",
      "description": "kazuph's personal Claude Code plugins - MCP servers and skills",
      "owner_info": {
        "name": "kazuph",
        "email": "kazuph@gmail.com"
      },
      "keywords": [],
      "repo_full_name": "kazuph/dotfiles",
      "repo_url": "https://github.com/kazuph/dotfiles",
      "repo_description": null,
      "homepage": "",
      "signals": {
        "stars": 14,
        "forks": 2,
        "pushed_at": "2026-01-29T02:54:22Z",
        "created_at": "2012-03-21T13:44:52Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 3513
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 373
        },
        {
          "path": "plugins/kazuph-dotfiles/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/agent-browser",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/agent-browser/SKILL.md",
          "type": "blob",
          "size": 4901
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/another-ai",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/another-ai/SKILL.md",
          "type": "blob",
          "size": 2036
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/code-coupling-analysis",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/code-coupling-analysis/SKILL.md",
          "type": "blob",
          "size": 6352
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/env-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/env-setup/SKILL.md",
          "type": "blob",
          "size": 7082
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/figma",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/figma/SKILL.md",
          "type": "blob",
          "size": 3697
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/hono-vite-ssr",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/hono-vite-ssr/SKILL.md",
          "type": "blob",
          "size": 7257
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/hono-vite-ssr/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/hono-vite-ssr/references/workers-deployment.md",
          "type": "blob",
          "size": 4037
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/jotai-react-mastery",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/jotai-react-mastery/SKILL.md",
          "type": "blob",
          "size": 7823
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/magi",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/magi/SKILL.md",
          "type": "blob",
          "size": 7434
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/magi/docs",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/magi/docs/CHECKLIST.md",
          "type": "blob",
          "size": 1342
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/magi/docs/OUTPUT_TEMPLATE.md",
          "type": "blob",
          "size": 1612
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/magi/docs/PLAYBOOK.md",
          "type": "blob",
          "size": 4048
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-luna-ui",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/CLOUDFLARE-DEPLOY.md",
          "type": "blob",
          "size": 6557
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/ECOSYSTEM.md",
          "type": "blob",
          "size": 11894
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/ISLAND-COMPONENTS.md",
          "type": "blob",
          "size": 7235
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/MOONBIT-FFI.md",
          "type": "blob",
          "size": 25117
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/PERFORMANCE.md",
          "type": "blob",
          "size": 6715
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/SERVER-ACTIONS.md",
          "type": "blob",
          "size": 4774
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/SKILL.md",
          "type": "blob",
          "size": 12567
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/SOL-ROUTING.md",
          "type": "blob",
          "size": 6555
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/SKILL.md",
          "type": "blob",
          "size": 5966
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/assets",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/assets/AGENTS.md",
          "type": "blob",
          "size": 1724
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/agents.md",
          "type": "blob",
          "size": 44289
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/ide.md",
          "type": "blob",
          "size": 4970
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/performance.md",
          "type": "blob",
          "size": 4664
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/private_configuration.md",
          "type": "blob",
          "size": 3388
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/private_ffi.md",
          "type": "blob",
          "size": 4223
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/private_refactor.md",
          "type": "blob",
          "size": 2740
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/stdlib.md",
          "type": "blob",
          "size": 6976
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/testing.md",
          "type": "blob",
          "size": 4456
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/obsidian-knowledge-synthesizer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/obsidian-knowledge-synthesizer/SKILL.md",
          "type": "blob",
          "size": 4208
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/obsidian-knowledge-synthesizer/docs",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/obsidian-knowledge-synthesizer/docs/NOTE_TEMPLATE.md",
          "type": "blob",
          "size": 700
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/obsidian-knowledge-synthesizer/docs/WORKFLOW.md",
          "type": "blob",
          "size": 2910
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/qwen-tts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/qwen-tts/EXAMPLES.md",
          "type": "blob",
          "size": 8041
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/qwen-tts/PARAMETERS.md",
          "type": "blob",
          "size": 5030
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/qwen-tts/REMOTION.md",
          "type": "blob",
          "size": 6257
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/qwen-tts/SKILL.md",
          "type": "blob",
          "size": 4984
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/qwen-tts/WEB-UI.md",
          "type": "blob",
          "size": 12698
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/react-router-v7-mastery",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/react-router-v7-mastery/SKILL.md",
          "type": "blob",
          "size": 3386
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/react-router-v7-mastery/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/react-router-v7-mastery/references/auto-routes-guide.md",
          "type": "blob",
          "size": 15258
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/react-router-v7-mastery/references/cohesion-patterns.md",
          "type": "blob",
          "size": 17970
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/react-router-v7-mastery/references/with-hono.md",
          "type": "blob",
          "size": 5656
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/reporting-and-tmux",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kazuph-dotfiles/skills/reporting-and-tmux/SKILL.md",
          "type": "blob",
          "size": 3199
        },
        {
          "path": "plugins/mcp-browser-tabs",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-browser-tabs/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-browser-tabs/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 367
        },
        {
          "path": "plugins/mcp-chrome-devtools",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-chrome-devtools/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-chrome-devtools/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 378
        },
        {
          "path": "plugins/mcp-fetch",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-fetch/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-fetch/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 406
        },
        {
          "path": "plugins/mcp-github-pera1",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-github-pera1/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-github-pera1/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 374
        },
        {
          "path": "plugins/mcp-gmail-gas",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-gmail-gas/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-gmail-gas/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 359
        },
        {
          "path": "plugins/mcp-google-image-search",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-google-image-search/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-google-image-search/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 474
        },
        {
          "path": "plugins/mcp-limitless",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-limitless/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-limitless/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 315
        },
        {
          "path": "plugins/mcp-linear",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-linear/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-linear/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 304
        },
        {
          "path": "plugins/mcp-obsidian",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-obsidian/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-obsidian/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 374
        },
        {
          "path": "plugins/mcp-pera1-remote",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-pera1-remote/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-pera1-remote/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 320
        },
        {
          "path": "plugins/mcp-playwright",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-playwright/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-playwright/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 363
        },
        {
          "path": "plugins/mcp-raindrop",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-raindrop/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-raindrop/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 377
        },
        {
          "path": "plugins/mcp-screenshot",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-screenshot/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-screenshot/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 356
        },
        {
          "path": "plugins/mcp-slack",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-slack/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-slack/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 382
        },
        {
          "path": "plugins/mcp-taskmanager",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-taskmanager/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-taskmanager/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 334
        },
        {
          "path": "plugins/mcp-tmux",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-tmux/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-tmux/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 340
        },
        {
          "path": "plugins/mcp-youtube",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-youtube/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-youtube/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 375
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n  \"name\": \"kazuph-dotfiles\",\n  \"version\": \"2.0.0\",\n  \"description\": \"kazuph's personal Claude Code plugins - MCP servers and skills\",\n  \"owner\": {\n    \"name\": \"kazuph\",\n    \"email\": \"kazuph@gmail.com\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"kazuph-dotfiles\",\n      \"description\": \"All kazuph's skills: MAGI, MoonBit, env-setup, figma, and more\",\n      \"category\": \"development\",\n      \"source\": \"./plugins/kazuph-dotfiles\"\n    },\n    {\n      \"name\": \"mcp-browser-tabs\",\n      \"description\": \"Chrome browser tabs info for Claude\",\n      \"category\": \"development\",\n      \"source\": \"./plugins/mcp-browser-tabs\"\n    },\n    {\n      \"name\": \"mcp-chrome-devtools\",\n      \"description\": \"Chrome DevTools Protocol MCP for browser automation\",\n      \"category\": \"development\",\n      \"source\": \"./plugins/mcp-chrome-devtools\"\n    },\n    {\n      \"name\": \"mcp-fetch\",\n      \"description\": \"HTTP fetch MCP server\",\n      \"category\": \"development\",\n      \"source\": \"./plugins/mcp-fetch\"\n    },\n    {\n      \"name\": \"mcp-github-pera1\",\n      \"description\": \"GitHub code extraction via Pera1 (local)\",\n      \"category\": \"development\",\n      \"source\": \"./plugins/mcp-github-pera1\"\n    },\n    {\n      \"name\": \"mcp-gmail-gas\",\n      \"description\": \"Gmail via Google Apps Script MCP\",\n      \"category\": \"productivity\",\n      \"source\": \"./plugins/mcp-gmail-gas\"\n    },\n    {\n      \"name\": \"mcp-google-image-search\",\n      \"description\": \"Google image search MCP\",\n      \"category\": \"development\",\n      \"source\": \"./plugins/mcp-google-image-search\"\n    },\n    {\n      \"name\": \"mcp-limitless\",\n      \"description\": \"Limitless AI pendant lifelogs MCP (SSE)\",\n      \"category\": \"productivity\",\n      \"source\": \"./plugins/mcp-limitless\"\n    },\n    {\n      \"name\": \"mcp-linear\",\n      \"description\": \"Linear issue tracking MCP (SSE)\",\n      \"category\": \"productivity\",\n      \"source\": \"./plugins/mcp-linear\"\n    },\n    {\n      \"name\": \"mcp-obsidian\",\n      \"description\": \"Obsidian vault MCP server\",\n      \"category\": \"productivity\",\n      \"source\": \"./plugins/mcp-obsidian\"\n    },\n    {\n      \"name\": \"mcp-pera1-remote\",\n      \"description\": \"GitHub code extraction via Pera1 remote service (SSE)\",\n      \"category\": \"development\",\n      \"source\": \"./plugins/mcp-pera1-remote\"\n    },\n    {\n      \"name\": \"mcp-playwright\",\n      \"description\": \"Playwright browser automation MCP\",\n      \"category\": \"development\",\n      \"source\": \"./plugins/mcp-playwright\"\n    },\n    {\n      \"name\": \"mcp-raindrop\",\n      \"description\": \"Raindrop.io bookmark manager MCP\",\n      \"category\": \"productivity\",\n      \"source\": \"./plugins/mcp-raindrop\"\n    },\n    {\n      \"name\": \"mcp-screenshot\",\n      \"description\": \"Screenshot capture MCP\",\n      \"category\": \"development\",\n      \"source\": \"./plugins/mcp-screenshot\"\n    },\n    {\n      \"name\": \"mcp-slack\",\n      \"description\": \"Slack messaging MCP\",\n      \"category\": \"productivity\",\n      \"source\": \"./plugins/mcp-slack\"\n    },\n    {\n      \"name\": \"mcp-taskmanager\",\n      \"description\": \"Task manager MCP\",\n      \"category\": \"productivity\",\n      \"source\": \"./plugins/mcp-taskmanager\"\n    },\n    {\n      \"name\": \"mcp-tmux\",\n      \"description\": \"Tmux session management MCP\",\n      \"category\": \"development\",\n      \"source\": \"./plugins/mcp-tmux\"\n    },\n    {\n      \"name\": \"mcp-youtube\",\n      \"description\": \"YouTube video information MCP\",\n      \"category\": \"development\",\n      \"source\": \"./plugins/mcp-youtube\"\n    }\n  ]\n}\n",
        "plugins/kazuph-dotfiles/.claude-plugin/plugin.json": "{\n  \"name\": \"kazuph-dotfiles\",\n  \"version\": \"1.0.0\",\n  \"description\": \"kazuph's personal skills collection - MAGI system, env management, MoonBit, and more\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"email\": \"kazuph@gmail.com\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"kazuph\", \"skills\", \"magi\", \"dotfiles\"],\n  \"skills\": \"./skills/\"\n}\n",
        "plugins/kazuph-dotfiles/skills/agent-browser/SKILL.md": "---\nname: agent-browser\ndescription: Automates browser interactions for web testing, form filling, screenshots, and data extraction. Use when the user needs to navigate websites, interact with web pages, fill forms, take screenshots, test web applications, or extract information from web pages.\n---\n\n# Browser Automation with agent-browser\n\n## Browser Configuration (Chrome Canary Required)\n\n**This skill uses Chrome Canary exclusively.**\n\n```bash\n# Set environment variable before running commands\nexport AGENT_BROWSER_EXECUTABLE_PATH=\"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary\"\n```\n\nOr specify per-command:\n```bash\nagent-browser --executable-path \"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary\" open <url>\n```\n\n> **Note**: If you change `--executable-path`, run `agent-browser close` first to restart the daemon with the new browser.\n\n## Quick start\n\n```bash\nagent-browser open <url>        # Navigate to page\nagent-browser snapshot -i       # Get interactive elements with refs\nagent-browser click @e1         # Click element by ref\nagent-browser fill @e2 \"text\"   # Fill input by ref\nagent-browser close             # Close browser\n```\n\n## Core workflow\n\n1. Navigate: `agent-browser open <url>`\n2. Snapshot: `agent-browser snapshot -i` (returns elements with refs like `@e1`, `@e2`)\n3. Interact using refs from the snapshot\n4. Re-snapshot after navigation or significant DOM changes\n\n## Commands\n\n### Navigation\n```bash\nagent-browser open <url>      # Navigate to URL\nagent-browser back            # Go back\nagent-browser forward         # Go forward  \nagent-browser reload          # Reload page\nagent-browser close           # Close browser\n```\n\n### Snapshot (page analysis)\n```bash\nagent-browser snapshot        # Full accessibility tree\nagent-browser snapshot -i     # Interactive elements only (recommended)\nagent-browser snapshot -c     # Compact output\nagent-browser snapshot -d 3   # Limit depth to 3\n```\n\n### Interactions (use @refs from snapshot)\n```bash\nagent-browser click @e1           # Click\nagent-browser dblclick @e1        # Double-click\nagent-browser fill @e2 \"text\"     # Clear and type\nagent-browser type @e2 \"text\"     # Type without clearing\nagent-browser press Enter         # Press key\nagent-browser press Control+a     # Key combination\nagent-browser hover @e1           # Hover\nagent-browser check @e1           # Check checkbox\nagent-browser uncheck @e1         # Uncheck checkbox\nagent-browser select @e1 \"value\"  # Select dropdown\nagent-browser scroll down 500     # Scroll page\nagent-browser scrollintoview @e1  # Scroll element into view\n```\n\n### Get information\n```bash\nagent-browser get text @e1        # Get element text\nagent-browser get value @e1       # Get input value\nagent-browser get title           # Get page title\nagent-browser get url             # Get current URL\n```\n\n### Screenshots\n```bash\nagent-browser screenshot          # Screenshot to stdout\nagent-browser screenshot path.png # Save to file\nagent-browser screenshot --full   # Full page\n```\n\n### Wait\n```bash\nagent-browser wait @e1                     # Wait for element\nagent-browser wait 2000                    # Wait milliseconds\nagent-browser wait --text \"Success\"        # Wait for text\nagent-browser wait --load networkidle      # Wait for network idle\n```\n\n### Semantic locators (alternative to refs)\n```bash\nagent-browser find role button click --name \"Submit\"\nagent-browser find text \"Sign In\" click\nagent-browser find label \"Email\" fill \"user@test.com\"\n```\n\n## Example: Form submission\n\n```bash\nagent-browser open https://example.com/form\nagent-browser snapshot -i\n# Output shows: textbox \"Email\" [ref=e1], textbox \"Password\" [ref=e2], button \"Submit\" [ref=e3]\n\nagent-browser fill @e1 \"user@example.com\"\nagent-browser fill @e2 \"password123\"\nagent-browser click @e3\nagent-browser wait --load networkidle\nagent-browser snapshot -i  # Check result\n```\n\n## Example: Authentication with saved state\n\n```bash\n# Login once\nagent-browser open https://app.example.com/login\nagent-browser snapshot -i\nagent-browser fill @e1 \"username\"\nagent-browser fill @e2 \"password\"\nagent-browser click @e3\nagent-browser wait --url \"**/dashboard\"\nagent-browser state save auth.json\n\n# Later sessions: load saved state\nagent-browser state load auth.json\nagent-browser open https://app.example.com/dashboard\n```\n\n## Sessions (parallel browsers)\n\n```bash\nagent-browser --session test1 open site-a.com\nagent-browser --session test2 open site-b.com\nagent-browser session list\n```\n\n## JSON output (for parsing)\n\nAdd `--json` for machine-readable output:\n```bash\nagent-browser snapshot -i --json\nagent-browser get text @e1 --json\n```\n\n## Debugging\n\n```bash\nagent-browser open example.com --headed  # Show browser window\nagent-browser console                    # View console messages\nagent-browser errors                     # View page errors\n```\n",
        "plugins/kazuph-dotfiles/skills/another-ai/SKILL.md": "---\nname: another-ai\ndescription: è¿½åŠ ã®AIã‚’TTYä»˜ãã®ç´ ã®CLIã§å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ãƒŸãƒ‹æ‰‹é †ã€‚è©³ç´°ã¯æœ¬æ–‡å‚ç…§ã€‚\nallowed-tools: Shell\n---\n\n# another-ai Skill\n\n## ãƒã‚¤ãƒ³ãƒˆ\n- **TTYå¿…é ˆ**: `script -q /dev/null ...` ã§ãƒ©ãƒƒãƒ—ã—ã€ç–‘ä¼¼TTYã‚’ç¢ºä¿ã™ã‚‹ã€‚\n- **ãƒ©ãƒƒãƒ‘ãƒ¼ä¸è¦**: any-scriptçµŒç”±ã«ã›ãšã€CLIã‚’ç›´æ¥å‘¼ã¶ã€‚\n- **å®‰å…¨ãƒ•ãƒ©ã‚°**: codexã¯ä¿¡é ¼ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒã‚§ãƒƒã‚¯å›é¿ã®ãŸã‚ `--skip-git-repo-check` ã‚’ä»˜ã‘ã‚‹ã€‚\n- **å‡ºåŠ›æŠ‘åˆ¶ + ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å›é¿**: `--sandbox workspace-write --config sandbox_workspace_write.network_access=true --dangerously-bypass-approvals-and-sandbox` ã‚’æ¯å›ä»˜ã‘ã€`-o` ã§æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã ã‘ãƒ•ã‚¡ã‚¤ãƒ«ã«åã `cat` ã§å–ã‚Šå‡ºã™ï¼ˆã‚¨ã‚¤ãƒªã‚¢ã‚¹éä¾å­˜ãƒ»ãƒ­ã‚°æŠ‘åˆ¶ï¼‰ã€‚\n\n## å®Ÿè¡Œä¾‹\n- claude Code CLIï¼ˆå˜ç´”ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå‡ºåŠ›ï¼‰  \n  ```bash\n  script -q /dev/null claude --dangerously-skip-permissions --print \"yes\"\n  ```\n- codexï¼ˆç ”ç©¶ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼CLIãƒ»èª­ã¿å–ã‚Šå°‚ç”¨ãƒ»æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿å–å¾—ï¼‰\n  ```bash\n  outfile=$(mktemp -t codex)\n  script -q /dev/null codex \\\n    --sandbox workspace-write \\\n    --config sandbox_workspace_write.network_access=true \\\n    --dangerously-bypass-approvals-and-sandbox \\\n    exec --skip-git-repo-check -o \"$outfile\" \"hi\" >/dev/null 2>&1\n  cat \"$outfile\"\n  ```\n- codexï¼ˆæ›¸ãè¾¼ã¿æœ‰åŠ¹ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’è¨±å¯ãƒ»æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿å–å¾—ï¼‰\n  ```bash\n  outfile=$(mktemp -t codex)\n  script -q /dev/null codex \\\n    --sandbox workspace-write \\\n    --config sandbox_workspace_write.network_access=true \\\n    --dangerously-bypass-approvals-and-sandbox \\\n    exec --skip-git-repo-check --full-auto -o \"$outfile\" \"hi\" >/dev/null 2>&1\n  cat \"$outfile\"\n  ```\n\n## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆ\n- `tcgetattr/ioctl: Operation not supported on socket` ãŒå‡ºã‚‹å ´åˆã€å®Ÿè¡Œç’°å¢ƒã«TTYãŒãªã„ã€‚`script -q /dev/null` ã§åŒ…ã‚“ã§å†å®Ÿè¡Œã™ã‚‹ã€‚\n- any-scriptçµŒç”±ã§åŒã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆã¯ã€ç›´æ¥ä¸Šè¨˜ã‚³ãƒãƒ³ãƒ‰ã§è©¦ã™ã€‚\n",
        "plugins/kazuph-dotfiles/skills/code-coupling-analysis/SKILL.md": "---\nname: code-coupling-analysis\ndescription: |\n  Analyze code coupling using Vlad Khononov's Balanced Coupling framework.\n  Generates interactive HTML reports with D3.js dependency graphs.\n  Use when analyzing architecture health, identifying risky dependencies,\n  or preparing for refactoring decisions. Language-agnostic design.\nallowed-tools:\n  - Read\n  - Write\n  - Bash\n  - Glob\n  - Grep\n---\n\n# Coupling Analysis Skill\n\nAnalyze code coupling across three dimensions and generate actionable HTML reports.\n\n## Framework: Balanced Coupling (Vlad Khononov)\n\nThree key dimensions determine coupling risk:\n\n### 1. Integration Strength (How tightly modules connect)\n| Level | Score | Detection Pattern |\n|-------|-------|-------------------|\n| Intrusive | 1.00 | Direct property access, internal state manipulation |\n| Functional | 0.75 | Function/component usage, hooks, methods |\n| Model | 0.50 | Data type imports, interfaces used as data |\n| Contract | 0.25 | Pure interface/type imports |\n\n### 2. Distance (Where dependencies live)\n| Level | Score | Detection Pattern |\n|-------|-------|-------------------|\n| Same Module | 0.25 | Same directory (`./Component`) |\n| Sibling Module | 0.50 | Sibling directory (`../utils`) |\n| Distant Module | 0.75 | Different top-level (`@/contexts`, `~/lib`) |\n| External | 1.00 | External packages (`react`, `lodash`) |\n\n### 3. Volatility (Change frequency from Git history)\n| Level | Score | Changes (6 months) |\n|-------|-------|-------------------|\n| Low | 0.00 | 0-2 changes |\n| Medium | 0.50 | 3-10 changes |\n| High | 1.00 | 11+ changes |\n\n### Balance Score Formula\n```\nbalance = (strength Ã— volatility) Ã— 0.6 + |strength - (1 - distance)| Ã— 0.4\n```\n\n**Interpretation:**\n- 0.0 - 0.2: Well balanced (ideal)\n- 0.2 - 0.4: Acceptable\n- 0.4 - 0.6: Needs attention\n- 0.6+: Risky, consider refactoring\n\n## Execution Steps\n\n### Step 1: Identify Target Directory and Language\n\nDetermine the primary language by checking for:\n- `tsconfig.json` or `*.ts`/`*.tsx` â†’ TypeScript\n- `pyproject.toml` or `*.py` â†’ Python\n- `go.mod` or `*.go` â†’ Go\n- `Cargo.toml` or `*.rs` â†’ Rust\n- `package.json` with `*.js`/`*.jsx` â†’ JavaScript\n\n### Step 2: Gather File List\n\n```bash\n# TypeScript/JavaScript\nfind . -type f \\( -name \"*.ts\" -o -name \"*.tsx\" -o -name \"*.js\" -o -name \"*.jsx\" \\) \\\n  -not -path \"*/node_modules/*\" \\\n  -not -path \"*/.git/*\" \\\n  -not -name \"*.d.ts\" \\\n  -not -name \"*.stories.*\" \\\n  -not -name \"*.test.*\" \\\n  -not -name \"*.spec.*\"\n\n# Python\nfind . -type f -name \"*.py\" \\\n  -not -path \"*/.venv/*\" \\\n  -not -path \"*/venv/*\" \\\n  -not -path \"*/__pycache__/*\" \\\n  -not -name \"*_test.py\" \\\n  -not -name \"test_*.py\"\n\n# Go\nfind . -type f -name \"*.go\" \\\n  -not -path \"*/vendor/*\" \\\n  -not -name \"*_test.go\"\n```\n\n### Step 3: Extract Import Dependencies\n\nFor each source file, extract imports using language-specific patterns:\n\n**TypeScript/JavaScript:**\n```regex\nimport\\s+(?:(?:\\{[^}]+\\}|\\*\\s+as\\s+\\w+|\\w+)\\s+from\\s+)?['\"]([^'\"]+)['\"]\n```\n\n**Python:**\n```regex\n(?:from\\s+(\\S+)\\s+import|import\\s+(\\S+))\n```\n\n**Go:**\n```regex\nimport\\s+(?:\\w+\\s+)?[\"']([^\"']+)[\"']\n```\n\n### Step 4: Calculate Git Volatility\n\n```bash\n# Get change count for each file (last 6 months)\ngit log --since=\"6 months ago\" --name-only --pretty=format: -- \"*.ts\" \"*.tsx\" | \\\n  grep -v '^$' | sort | uniq -c | sort -rn\n```\n\n### Step 5: Analyze Each Coupling\n\nFor each import relationship:\n1. Determine **strength** from import pattern\n2. Calculate **distance** from file paths\n3. Look up **volatility** from git history\n4. Compute **balance score**\n\n### Step 6: Generate HTML Report\n\nThe report MUST include these sections:\n\n#### Summary Statistics Card\n- Total files analyzed\n- Total couplings found\n- Average strength, distance, volatility\n- Overall balance score with color indicator\n\n#### Most Frequently Changed Files\n- Top 10 files by change count\n- Badge indicating volatility level (High/Medium/Low)\n\n#### Two-Column Layout\n\n**Left Column:**\n- Risky Couplings (score â‰¥ 0.4) with:\n  - Score badge\n  - Volatility indicator\n  - Strength type\n  - File path â†’ dependency path\n  - Warning box explaining WHY it's risky\n  - Action box with specific refactoring suggestions\n\n- Well-Balanced Couplings (score < 0.2) with:\n  - Score badge\n  - Pattern explanation\n\n**Right Column:**\n- D3.js Force-Directed Dependency Graph:\n  - Nodes colored by volatility (red=high, yellow=medium, green=low)\n  - Node size by dependency count\n  - Edges showing coupling relationships\n  - Filters for strength and volatility\n  - Zoom and pan support\n\n#### Legend Section\n- Strength levels with scores\n- Distance levels with scores\n- Balance score interpretation guide\n\n### Step 7: Provide \"So What?\" Context\n\nEvery metric MUST include explanatory text:\n\n**BAD (raw numbers only):**\n```\nAverage Strength: 0.74\n```\n\n**GOOD (with context):**\n```\nAverage Strength: 0.74\nâ†’ Component usage is central (Functional level)\nâ†’ Most dependencies are function/hook calls, not loose contracts\n```\n\n## Output Location\n\nSave the HTML report to:\n```\n<project-root>/coupling-analysis.html\n```\n\nOr if analyzing a specific package:\n```\n<package-dir>/coupling-analysis.html\n```\n\n## Example Insights to Include\n\nFor AuthContext-like patterns (high volatility + many dependents):\n```\nâš ï¸ Warning: AuthContextã¯16å›å¤‰æ›´ã•ã‚Œã¦ãŠã‚Šã€12ä»¥ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¾å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚\nå¤‰æ›´ã®ãŸã³ã«åºƒç¯„å›²ã«å½±éŸ¿ãŒåŠã¶ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚\n\nğŸ’¡ Action:\n- èªè¨¼çŠ¶æ…‹ï¼ˆisAuthenticatedï¼‰ã¨èªè¨¼æ“ä½œï¼ˆsignIn/signOutï¼‰ã‚’åˆ†é›¢æ¤œè¨\n- çŠ¶æ…‹ã®ã¿ã®useAuthStateã¨æ“ä½œã®ã¿ã®useAuthActionsã«åˆ†å‰²\n- ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã§å¿…è¦ãªéƒ¨åˆ†ã ã‘ã‚’å…¬é–‹\n```\n\n## Anti-Patterns to Detect\n\n1. **God Module**: Single file with 10+ dependents AND high volatility\n2. **Shotgun Surgery**: One change requires modifying many files\n3. **Distant Intrusive**: High strength (0.75+) combined with high distance (0.75+)\n4. **Volatile Core**: Core utilities with 10+ changes in 6 months\n\n## Report Quality Checklist\n\n- [ ] Two-column responsive layout\n- [ ] D3.js interactive graph with filters\n- [ ] Every metric has \"So What?\" explanation\n- [ ] Risky couplings have Warning + Action boxes\n- [ ] Color-coded badges (red/yellow/green)\n- [ ] Dark theme (GitHub-style)\n- [ ] Japanese explanations for Japanese codebases\n- [ ] Mobile-responsive design\n",
        "plugins/kazuph-dotfiles/skills/env-setup/SKILL.md": "---\nname: env-setup\ndescription: Set up secure environment variable management using dotenvx + direnv + git worktree. Use when user asks to set up env management, wants to encrypt .env files, or needs to configure environment variables for worktree-based development. Also use when setting up a new project that needs secure env handling.\nallowed-tools: Read, Write, Edit, Bash, Glob, Grep\nuser-invocable: true\n---\n\n# Environment Setup Skill (dotenvx + direnv + worktree)\n\nGit worktreeã‚’ä½¿ã£ãŸä¸¦åˆ—é–‹ç™ºã§ã€ç’°å¢ƒå¤‰æ•°ã‚’å®‰å…¨ã‹ã¤åŠ¹ç‡çš„ã«ç®¡ç†ã™ã‚‹ç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚\n\n## Core Principle\n\n**æš—å·åŒ–ã¯å¸¸æ™‚ç¶­æŒ**: ãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã¯æš—å·åŒ–ã€ãƒ¡ãƒ¢ãƒªä¸Šã®ã¿å¾©å·ã€‚å¾©å·ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œã‚‰ã‚Œã‚‹ã“ã¨ã¯ãªã„ã€‚\n\n```\nãƒ‡ã‚£ã‚¹ã‚¯ä¸Š          ãƒ¡ãƒ¢ãƒªä¸Šï¼ˆå®Ÿè¡Œæ™‚ã®ã¿ï¼‰\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ .env        â”‚     â”‚ DATABASE_URL=xxx â”‚\nâ”‚ (æš—å·åŒ–)    â”‚ â”€â”€â†’ â”‚ API_KEY=yyy      â”‚\nâ”‚ xxxxxxxxxx  â”‚     â”‚ (å¾©å·æ¸ˆã¿)       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n     â†‘                    â†‘\n  å¸¸ã«ã“ã®çŠ¶æ…‹        ãƒ—ãƒ­ã‚»ã‚¹å®Ÿè¡Œä¸­ã®ã¿\n```\n\n## Tool Stack\n\n| ãƒ„ãƒ¼ãƒ« | å½¹å‰² | ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« |\n|--------|------|-------------|\n| **git-wt** | Git worktreeç®¡ç† | `brew install k1LoW/tap/git-wt` |\n| **direnv** | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå˜ä½ã§ç’°å¢ƒå¤‰æ•°ã‚’è‡ªå‹•èª­ã¿è¾¼ã¿ | `brew install direnv` |\n| **dotenvx** | .envãƒ•ã‚¡ã‚¤ãƒ«ã®æš—å·åŒ–ç®¡ç† | `npm install -g @dotenvx/dotenvx` |\n\n## Setup Instructions\n\nä»¥ä¸‹ã®æ‰‹é †ã§ç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚\n\n### Step 1: Check Prerequisites\n\nã¾ãšå¿…è¦ãªãƒ„ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª:\n\n```bash\n# Check direnv\nwhich direnv || echo \"direnv not installed\"\n\n# Check dotenvx\nwhich dotenvx || npm list -g @dotenvx/dotenvx || echo \"dotenvx not installed\"\n\n# Check git-wt (optional but recommended)\ngit wt --version || echo \"git-wt not installed (optional)\"\n```\n\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ¡ˆå†…ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ä¿ƒã™ã€‚\n\n### Step 2: Create/Encrypt .env File\n\næ—¢å­˜ã®.envãŒã‚ã‚Œã°æš—å·åŒ–ã€ãªã‘ã‚Œã°ã‚µãƒ³ãƒ—ãƒ«ã‚’ä½œæˆ:\n\n```bash\n# If .env exists\ndotenvx encrypt\n\n# The .env.keys file will be generated with DOTENV_PRIVATE_KEY\n# Extract the key for .envrc\n```\n\n### Step 3: Create .envrc\n\nä»¥ä¸‹ã®å†…å®¹ã§.envrcã‚’ä½œæˆ:\n\n```bash\n# .envrc\nexport DOTENV_PRIVATE_KEY=\"<key from .env.keys>\"\neval \"$(dotenvx decrypt --stdout --format shell)\"\n```\n\n**é‡è¦**: .env.keysã‹ã‚‰DOTENV_PRIVATE_KEYã®å€¤ã‚’è»¢è¨˜å¾Œã€.env.keysã¯å‰Šé™¤å¯èƒ½ã€‚\n\n### Step 4: Update .gitignore\n\nä»¥ä¸‹ã‚’.gitignoreã«è¿½åŠ ï¼ˆæœªè¿½åŠ ã®å ´åˆï¼‰:\n\n```\n.worktree\n.artifacts\n.envrc\n.env.keys\n```\n\n### Step 5: Activate direnv\n\n```bash\ndirenv allow\n```\n\n### Step 6: (Optional) Configure git-wt\n\n> **Note:** git-wtã¯**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ­ãƒ¼ã‚«ãƒ«ãª.worktree/**ã«é…ç½®ã™ã‚‹è¨­è¨ˆã§ã™ã€‚\n\n.gitconfigã§è¨­å®š:\n\n```bash\ngit config --global wt.basedir \".worktree\"\ngit config --global wt.copyignored true\ngit config --global --add wt.hook \"npm install || pnpm install || yarn install || true\"\n```\n\n**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ :**\n```\nmyproject/\nâ”œâ”€â”€ .worktree/\nâ”‚   â””â”€â”€ feature-auth/    # git wt feature-auth ã§ä½œæˆ\nâ”œâ”€â”€ .envrc               # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®ç’°å¢ƒå¤‰æ•°\nâ””â”€â”€ .env                 # æš—å·åŒ–æ¸ˆã¿\n```\n\ndirenvã¯è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®`.envrc`ã‚’ç¶™æ‰¿ã™ã‚‹ãŸã‚ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãŠã‘ã°ã€worktreeã§ã‚‚åŒã˜ç’°å¢ƒå¤‰æ•°ãŒè‡ªå‹•é©ç”¨ã•ã‚Œã¾ã™ã€‚\n\n## Multi-Environment Setup\n\nè¤‡æ•°ç’°å¢ƒã‚’ç®¡ç†ã™ã‚‹å ´åˆ:\n\n### Encrypt Each Environment\n\n```bash\ndotenvx encrypt -f .env.development\ndotenvx encrypt -f .env.staging\ndotenvx encrypt -f .env.production\n```\n\n### Enhanced .envrc for Multiple Environments\n\n```bash\n# .envrc\nexport DOTENV_PRIVATE_KEY_DEVELOPMENT=\"xxx\"\nexport DOTENV_PRIVATE_KEY_STAGING=\"yyy\"\n# DOTENV_PRIVATE_KEY_PRODUCTION ã¯é–‹ç™ºè€…ã«ã¯æ¸¡ã•ãªã„\n\n# APP_ENVã«å¿œã˜ã¦èª­ã¿è¾¼ã‚€ç’°å¢ƒã‚’æ±ºå®š\nENV_FILE=\".env.${APP_ENV:-development}\"\n\nif [[ -f \"$ENV_FILE\" ]]; then\n  eval \"$(dotenvx decrypt -f \"$ENV_FILE\" --stdout --format shell)\"\nfi\n```\n\n## CI/CD Integration\n\nGitHub Actions example:\n\n```yaml\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Run tests\n        env:\n          DOTENV_PRIVATE_KEY: ${{ secrets.DOTENV_PRIVATE_KEY }}\n        run: npx dotenvx run -- npm test\n```\n\n## Command Reference\n\n### dotenvx\n\n| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |\n|---------|------|\n| `dotenvx encrypt` | .envã‚’æš—å·åŒ– |\n| `dotenvx encrypt -f .env.production` | ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æš—å·åŒ– |\n| `dotenvx decrypt --stdout` | å¾©å·ã—ã¦æ¨™æº–å‡ºåŠ› |\n| `dotenvx decrypt --stdout --format shell` | ã‚·ã‚§ãƒ«å½¢å¼ã§å‡ºåŠ› |\n| `dotenvx set KEY=\"value\"` | å¤‰æ•°ã‚’è¿½åŠ /æ›´æ–°ï¼ˆè‡ªå‹•å†æš—å·åŒ–ï¼‰ |\n| `dotenvx get KEY` | å¤‰æ•°ã®å€¤ã‚’å–å¾— |\n| `dotenvx run -- <command>` | ç’°å¢ƒå¤‰æ•°ã‚’æ³¨å…¥ã—ã¦ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ |\n\n### git-wt\n\n| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |\n|---------|------|\n| `git wt <branch>` | worktreeä½œæˆ |\n| `git wt` | worktreeä¸€è¦§ |\n| `git wt -d <branch>` | worktreeå‰Šé™¤ |\n\n### direnv\n\n| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ |\n|---------|------|\n| `direnv allow` | .envrcã‚’è¨±å¯ |\n| `direnv reload` | å†èª­ã¿è¾¼ã¿ |\n\n## Worktree Behavior\n\nworktreeã§ã‚‚è‡ªå‹•ã§å‹•ä½œã™ã‚‹ç†ç”±:\n\n**git-wtï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰ã®å ´åˆ:**\n1. `.worktree/` ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª\n2. direnvã¯è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® `.envrc` ã‚’è‡ªå‹•ç¶™æ‰¿\n3. `.env` ã¯gitç®¡ç†ãªã®ã§worktreeã«ã‚‚å­˜åœ¨\n4. çµæœã€worktreeã§ã‚‚è‡ªå‹•ã§å¾©å·ã•ã‚Œã‚‹\n\n### Modifying .env in Worktree\n\n```bash\n# git-wtã§ä½œæˆã—ãŸworktreeã«ç§»å‹•\ncd .worktree/feature-x/\n\n# ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ /å¤‰æ›´ï¼ˆè‡ªå‹•ã§å†æš—å·åŒ–ã•ã‚Œã‚‹ï¼‰\ndotenvx set NEW_API_KEY=\"xxx\"\n\n# ã‚³ãƒŸãƒƒãƒˆ\ngit add .env\ngit commit -m \"feat: add NEW_API_KEY\"\n```\n\n**é‡è¦**: `dotenvx set` ã¯è‡ªå‹•ã§å†æš—å·åŒ–ã€‚.envã‚’ç›´æ¥ç·¨é›†ã—ãªã„ã€‚\n\n## Benefits Summary\n\n| é …ç›® | åŠ¹æœ |\n|------|------|\n| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ | .envã¯å¸¸ã«æš—å·åŒ–ã€ãƒ‡ã‚£ã‚¹ã‚¯ä¸Šã«å¹³æ–‡ãªã— |\n| gitç®¡ç† | æš—å·åŒ–æ¸ˆã¿.envã‚’ã‚³ãƒŸãƒƒãƒˆå¯èƒ½ |\n| ãƒãƒ¼ãƒ å…±æœ‰ | éµã ã‘å…±æœ‰ã™ã‚Œã°å³å‹•ä½œ |\n| worktree | è¦ªã®.envrcã‚’è‡ªå‹•ç¶™æ‰¿ã€è¨­å®šä¸è¦ |\n| CI/CD | ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ1ã¤ã§å…¨ç’°å¢ƒå¤‰æ•°ã‚’ç®¡ç† |\n| æ¨©é™åˆ†é›¢ | ç’°å¢ƒã”ã¨ã«éµã‚’åˆ†ã‘ã¦æ¨©é™åˆ¶å¾¡å¯èƒ½ |\n\n## Execution Flow\n\nã“ã®ã‚¹ã‚­ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹éš›:\n\n1. **ç¾çŠ¶ç¢ºèª**: æ—¢å­˜ã®.env, .envrc, .gitignoreã‚’ç¢ºèª\n2. **ãƒ„ãƒ¼ãƒ«ç¢ºèª**: direnv, dotenvxã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«çŠ¶æ…‹ã‚’ç¢ºèª\n3. **ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Ÿè¡Œ**: Step 1-6ã‚’é †ç•ªã«å®Ÿè¡Œ\n4. **æ¤œè¨¼**: `direnv allow`å¾Œã€ç’°å¢ƒå¤‰æ•°ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ã‹ç¢ºèª\n\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªãŒå¿…è¦ãªå ´åˆï¼ˆæ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šæ›¸ããªã©ï¼‰ã¯å¿…ãšç¢ºèªã‚’å–ã‚‹ã€‚\n",
        "plugins/kazuph-dotfiles/skills/figma/SKILL.md": "---\nname: figma\ndescription: Figma design ingestion and fidelity enforcement. Use when extracting designs via Figma CLI, implementing UI components, or validating design compliance.\nallowed-tools: Bash, Write, Read\n---\n\n# Figma Design Workflow\n\n## Triggers\n\n- \"Figma\", \"ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜å–å¾—\", \"ç”»é¢ä»•æ§˜\", \"ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæŠ½å‡º\", \"Figma CLI\", \"ãƒãƒ¼ãƒ‰è§£æ\"\n- UIå®Ÿè£…æ™‚ã®Figmaæº–æ‹ ç¢ºèª\n- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…å‰ã®ãƒ‡ã‚¶ã‚¤ãƒ³æ¤œè¨¼\n\n---\n\n## Part 1: Design Ingestion (Figma CLI)\n\n### Goal\n- Figma URLã‹ã‚‰`fileKey`ã¨`node-id`ã‚’æŠ½å‡ºã—ã€`figma` CLIã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ‡ãƒ¼ã‚¿ã¨ã‚¢ã‚»ãƒƒãƒˆã‚’å–å¾—\n- YAML/JSONã¨ã—ã¦æ•´ç†ã—ã€ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜ãƒ»æ–‡è¨€ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‚ç…§å¯èƒ½ã«ã™ã‚‹\n\n### Pre-flight Checks\n1. èªè¨¼ç¢ºèª: `figma auth --show`\n2. CLIãƒãƒ¼ã‚¸ãƒ§ãƒ³: `figma --version`\n3. `node-id`ã¯`-`åŒºåˆ‡ã‚Šã®å ´åˆã€`9614-2398 â†’ 9614:2398`ã¸å¤‰æ›ãŒå¿…è¦ãªå ´åˆã‚ã‚Š\n\n### Workflow\n\n#### 1. URLè§£æ\n```\nhttps://www.figma.com/design/<fileKey>/...?...node-id=<nodeId>\n```\n- `nodeId`çœç•¥æ™‚ã¯`figma get-data <fileKey>`ã§ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«æ§‹é€ ã‚’ç¢ºèª\n\n#### 2. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ‡ãƒ¼ã‚¿å–å¾—\n```bash\nfigma get-data <FILE_KEY> <NODE_ID> --format yaml > /tmp/figma_screen.yaml\n```\n- `--depth`ã¯æƒ…å ±æ¬ è½ã‚’æ‹›ããŸã‚æ¥µåŠ›ä½¿ã‚ãªã„\n- è©³ç´°ãƒ­ã‚°ã¯`--verbose`ã§å–å¾—\n\n#### 3. ä»•æ§˜æŠ½å‡º\n```bash\n# æ–‡è¨€æŠ½å‡º\nyq '.. | select(has(\"text\")) | .text' /tmp/figma_screen.yaml\n\n# è‰²ä¸€è¦§\nyq '.. | select(has(\"fills\")) | .fills[]' /tmp/figma_screen.yaml | sort -u\n\n# ç‰¹å®šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ\nyq '.. | select(.name? | test(\"(?i)button\")) | .layout' /tmp/figma_screen.yaml\n```\n\n#### 4. ã‚¢ã‚»ãƒƒãƒˆå–å¾—ï¼ˆå¿…è¦æ™‚ï¼‰\n```bash\ntmp_dir=$(mktemp -d)\nfigma download-images <FILE_KEY> \"$tmp_dir\" --nodes '[{\"nodeId\":\"<NODE_ID>\",\"fileName\":\"asset.png\"}]'\n```\n\n#### 5. æˆæœæ•´ç†\n- YAML/JSON/ã‚¢ã‚»ãƒƒãƒˆã®ä¿å­˜å…ˆã‚’å ±å‘Š\n- æŠ½å‡ºã‚³ãƒãƒ³ãƒ‰ã¨ãƒ‘ã‚¹ã‚’æ˜è¨˜\n\n---\n\n## Part 2: Design Fidelity Enforcement\n\n### Core Principle\n\n**Storybook Components = Figma Components**\n\nFigmaã«å­˜åœ¨ã—ãªã„UIè¦ç´ ã¯å®Ÿè£…ã—ã¦ã¯ãªã‚‰ãªã„ã€‚\n\n### Implementation Rules\n\n#### Before Creating Any Component\n1. Figmaã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å­˜åœ¨ã‚’ç¢ºèª\n2. Figmaã‹ã‚‰ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å–å¾—\n3. `docs/reference/figma_screenshots/`ã«ä¿å­˜\n\n#### Component + Story Creation\n1. Figmaã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã«åŸºã¥ã„ã¦å®Ÿè£…\n2. `.stories.tsx`ã‚’åŒæ™‚ä½œæˆ\n3. Storybookãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨Figmaã‚’æ¯”è¼ƒ\n4. å·®ç•°ãŒã‚ã‚Œã°å³åº§ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–\n\n### Color Compliance\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®`constants/Colors.ts`ï¼ˆã¾ãŸã¯åŒç­‰ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã§FigmaæŒ‡å®šã®è‰²ã®ã¿ã‚’å®šç¾©ã€‚\n\nãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è‰²ï¼ˆExpoã®ç´« #6366F1 ãªã©ï¼‰ãŒæ®‹ã£ã¦ã„ãªã„ã‹ç¢ºèªï¼š\n```bash\ngrep -r \"#6366F1\" components/\n```\n\n### Critical Reminders\n\n1. **No Figma = No Component** - Figmaã«ãªã„ã‚‚ã®ã¯ä½œã‚‰ãªã„\n2. **Storybook Required** - å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«`.stories.tsx`å¿…é ˆ\n3. **Screenshot Evidence** - å®Ÿè£…å‰ã«Figmaã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆä¿å­˜\n4. **Color Compliance** - Figmaå®šç¾©ã®è‰²ã®ã¿ä½¿ç”¨\n5. **Verify Framework Defaults** - ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè‰²ã®æ··å…¥ã‚’é˜²ã\n\n---\n\n## Best Practices\n\n- å¤§è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯å¿…è¦ãªãƒãƒ¼ãƒ‰ã®ã¿æŒ‡å®šã—ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§çµã‚‹\n- `node-id`æ¢ç´¢å›°é›£æ™‚ã¯`figma get-data <FILE_KEY>`ã§ä¸Šä½æ§‹é€ ã‚’ç¢ºèª\n- å¤šè¨€èªUIã¯ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºå¾Œã«è¨€èªã‚¿ã‚°ãƒ»ãƒ•ã‚©ãƒ³ãƒˆæƒ…å ±ã‚‚ä½µè¨˜\n- `figma download-images`çµæœã¯`/tmp`ã§å—ã‘ã€å¿…è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¸ç§»å‹•\n- ã‚¨ãƒ©ãƒ¼æ™‚ã¯`--verbose`ã§APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç¢ºèª\n",
        "plugins/kazuph-dotfiles/skills/hono-vite-ssr/SKILL.md": "---\nname: hono-vite-ssr\ndescription: Hono + Vite SSRé–‹ç™ºã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã‚¬ã‚¤ãƒ‰ã€‚ã‚µãƒ¼ãƒãƒ¼/ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ2ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã§TypeScript JSXã‚’ä½¿ç”¨ã€‚vite-ssr-componentsã§Script/Link/ViteClientã‚’æä¾›ã€‚Cloudflare Workerså¯¾å¿œã€‚Webã‚¢ãƒ—ãƒªä½œæˆæ™‚ã‚„Hono SSRãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç«‹ã¡ä¸Šã’æ™‚ã«ä½¿ç”¨ã€‚\n---\n\n# Hono + Vite SSR Development\n\nHono + Viteã®çµ„ã¿åˆã‚ã›ã§ã€æœ€å°é™ã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã§SSRå¯¾å¿œã®Webã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚\n\n## ç‰¹å¾´\n\n- ã‚µãƒ¼ãƒãƒ¼/ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®2ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆï¼ˆ+ style.cssï¼‰\n- ã‚µãƒ¼ãƒãƒ¼å´ã‹ã‚‰Scriptã‚¿ã‚°ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®š\n- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§JSXãŒæ›¸ã‘ã‚‹ï¼ˆhono/jsx/domï¼‰\n- èµ·å‹•ã¯ `vite` (dev) / `vite build` (prod)\n- Cloudflare Workersç’°å¢ƒã‚’å†ç¾å¯èƒ½\n\n## Cloudflare Workers å¯¾å¿œ\n`vite-ssr-components` ã¯ Pages ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦ã„ã¾ã™ãŒã€å˜ä¸€ Worker ã¨ã—ã¦ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚‚å¯èƒ½ã§ã™ã€‚\nè©³ç´°ã¯ [Cloudflare Workers Deployment](references/workers-deployment.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚\n\n## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ \n\n```\nmy-app/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ index.tsx      # ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ¼ãƒ‰\nâ”‚   â”œâ”€â”€ client.tsx     # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰\nâ”‚   â””â”€â”€ style.css      # ã‚¹ã‚¿ã‚¤ãƒ«\nâ”œâ”€â”€ public/            # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ tsconfig.json\nâ”œâ”€â”€ vite.config.ts\nâ””â”€â”€ wrangler.jsonc     # Cloudflare Workersè¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰\n```\n\n## ä¾å­˜é–¢ä¿‚\n\n```json\n{\n  \"dependencies\": {\n    \"hono\": \"^4.x\"\n  },\n  \"devDependencies\": {\n    \"@cloudflare/workers-types\": \"^4.x\",\n    \"@hono/vite-cloudflare-pages\": \"^0.x\",\n    \"@hono/vite-dev-server\": \"^0.x\",\n    \"vite\": \"^6.x\",\n    \"vite-ssr-components\": \"^0.x\",\n    \"wrangler\": \"^4.x\"\n  }\n}\n```\n\n## ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ï¼ˆsrc/index.tsxï¼‰\n\n```tsx\nimport { Hono } from 'hono'\nimport { Link, Script, ViteClient } from 'vite-ssr-components/hono'\n\nconst app = new Hono()\n\napp.get('/', (c) => {\n  return c.html(\n    <html>\n      <head>\n        <ViteClient />\n        <Script src=\"/src/client\" />\n        <Link href=\"/src/style.css\" rel=\"stylesheet\" />\n      </head>\n      <body>\n        <div id=\"app\"></div>\n      </body>\n    </html>\n  )\n})\n\n// APIä¾‹\napp.get('/api/data', (c) => {\n  return c.json({ message: 'Hello from API' })\n})\n\nexport default app\n```\n\n### é‡è¦ãƒã‚¤ãƒ³ãƒˆ\n\n- `ViteClient`: Vite HMRç”¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ³¨å…¥\n- `Script src=\"/src/client\"`: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆæ‹¡å¼µå­ä¸è¦ï¼‰\n- `Link href=\"/src/style.css\"`: CSSãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿\n- `export default app`: Cloudflare Workers / Vite dev serverç”¨\n\n## ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ï¼ˆsrc/client.tsxï¼‰\n\n```tsx\nimport { render } from 'hono/jsx/dom'\n\nfunction App() {\n  return <h1>Hello World</h1>\n}\n\nrender(<App />, document.getElementById('app')!)\n```\n\n### ã‚ˆã‚Šå®Ÿç”¨çš„ãªä¾‹\n\n```tsx\nimport { render } from 'hono/jsx/dom'\nimport { useState, useEffect } from 'hono/jsx'\n\nfunction App() {\n  const [count, setCount] = useState(0)\n  const [data, setData] = useState<{ message: string } | null>(null)\n\n  useEffect(() => {\n    fetch('/api/data')\n      .then(res => res.json())\n      .then(setData)\n  }, [])\n\n  return (\n    <div>\n      <h1>Hono + Vite SSR</h1>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(c => c + 1)}>Increment</button>\n      {data && <p>API Response: {data.message}</p>}\n    </div>\n  )\n}\n\nrender(<App />, document.getElementById('app')!)\n```\n\n## Viteè¨­å®šï¼ˆvite.config.tsï¼‰\n\n```ts\nimport { defineConfig } from 'vite'\nimport devServer from '@hono/vite-dev-server'\nimport cloudflareAdapter from '@hono/vite-cloudflare-pages'\n\nexport default defineConfig({\n  plugins: [\n    devServer({\n      entry: 'src/index.tsx',\n    }),\n    cloudflareAdapter(),\n  ],\n})\n```\n\n### ãƒ“ãƒ«ãƒ‰åˆ†é›¢è¨­å®šï¼ˆæœ¬ç•ªç”¨ï¼‰\n\n```ts\nimport { defineConfig } from 'vite'\nimport devServer from '@hono/vite-dev-server'\nimport cloudflareAdapter from '@hono/vite-cloudflare-pages'\nimport { ssrBuild } from 'vite-ssr-components'\n\nexport default defineConfig(({ mode }) => {\n  if (mode === 'client') {\n    return {\n      build: {\n        rollupOptions: {\n          input: ['./src/client.tsx', './src/style.css'],\n          output: { dir: './dist/static', entryFileNames: 'static/[name].js' },\n        },\n      },\n    }\n  }\n  return {\n    plugins: [\n      devServer({ entry: 'src/index.tsx' }),\n      cloudflareAdapter(),\n      ssrBuild(),\n    ],\n  }\n})\n```\n\n## TypeScriptè¨­å®šï¼ˆtsconfig.jsonï¼‰\n\n```json\n{\n  \"compilerOptions\": {\n    \"target\": \"ESNext\",\n    \"module\": \"ESNext\",\n    \"moduleResolution\": \"bundler\",\n    \"strict\": true,\n    \"jsx\": \"react-jsx\",\n    \"jsxImportSource\": \"hono/jsx\",\n    \"types\": [\"vite/client\", \"@cloudflare/workers-types\"],\n    \"skipLibCheck\": true\n  },\n  \"include\": [\"src/**/*\"]\n}\n```\n\n## Cloudflareè¨­å®šï¼ˆwrangler.jsoncï¼‰\n\n```jsonc\n{\n  \"name\": \"my-app\",\n  \"compatibility_date\": \"2025-01-01\",\n  \"pages_build_output_dir\": \"./dist\"\n}\n```\n\n## npm scripts\n\n```json\n{\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"vite build --mode client && vite build\",\n    \"preview\": \"wrangler pages dev dist\",\n    \"deploy\": \"wrangler pages deploy dist\"\n  }\n}\n```\n\n## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ‰‹é †\n\n```bash\n# 1. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ\nmkdir my-app && cd my-app\n\n# 2. package.jsonåˆæœŸåŒ–\nnpm init -y\n\n# 3. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\nnpm install hono\nnpm install -D vite @hono/vite-dev-server @hono/vite-cloudflare-pages \\\n  vite-ssr-components wrangler @cloudflare/workers-types\n\n# 4. srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ\nmkdir src\n\n# 5. ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆä¸Šè¨˜ã®index.tsx, client.tsx, style.cssï¼‰\n\n# 6. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•\nnpm run dev\n```\n\n## é–‹ç™ºãƒ•ãƒ­ãƒ¼\n\n1. `npm run dev` ã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆhttp://localhost:5173ï¼‰\n2. ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ¼ãƒ‰å¤‰æ›´ â†’ è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰\n3. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰å¤‰æ›´ â†’ HMR\n4. `npm run build` ã§ãƒ“ãƒ«ãƒ‰\n5. `npm run preview` ã§ãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼\n6. `npm run deploy` ã§Cloudflare Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤\n\n## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹\n\n### ã‚µãƒ¼ãƒãƒ¼/ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆ†é›¢\n\n- ã‚µãƒ¼ãƒãƒ¼å´ï¼ˆindex.tsxï¼‰: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€APIã€HTMLã‚·ã‚§ãƒ«\n- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ï¼ˆclient.tsxï¼‰: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–UIã€çŠ¶æ…‹ç®¡ç†\n\n### å‹å…±æœ‰\n\n```tsx\n// src/types.ts\nexport interface User {\n  id: string\n  name: string\n}\n\n// ã‚µãƒ¼ãƒãƒ¼ãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¸¡æ–¹ã§importå¯èƒ½\n```\n\n### ç’°å¢ƒå¤‰æ•°\n\n```tsx\n// ã‚µãƒ¼ãƒãƒ¼å´ï¼ˆCloudflare Bindingsï¼‰\napp.get('/api/secret', (c) => {\n  const secret = c.env.SECRET_KEY\n  return c.json({ hasSecret: !!secret })\n})\n\n// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ï¼ˆViteç’°å¢ƒå¤‰æ•°ï¼‰\nconst apiUrl = import.meta.env.VITE_API_URL\n```\n\n## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°\n\n### HMRãŒåŠ¹ã‹ãªã„\n\n- `ViteClient` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒheadå†…ã«ã‚ã‚‹ã‹ç¢ºèª\n- vite.config.ts ã® `entry` ãƒ‘ã‚¹ãŒæ­£ã—ã„ã‹ç¢ºèª\n\n### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆJSãŒèª­ã¿è¾¼ã¾ã‚Œãªã„\n\n- `Script src` ã®ãƒ‘ã‚¹ãŒ `/src/client` ï¼ˆæ‹¡å¼µå­ãªã—ï¼‰ã‹ç¢ºèª\n- ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ãƒ–ã§ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª\n\n### Cloudflareãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«å‹•ã‹ãªã„\n\n- `pages_build_output_dir` ãŒ `./dist` ã‚’æŒ‡ã—ã¦ã„ã‚‹ã‹ç¢ºèª\n- ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰ãŒæ­£ã—ãå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª\n",
        "plugins/kazuph-dotfiles/skills/hono-vite-ssr/references/workers-deployment.md": "# Cloudflare Workers Deployment for Hono SSR\n\n`create-cloudflare` (C3) ã‚„ `create-hono` ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ Cloudflare Pages ã‚’æƒ³å®šã—ã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ãŒã€Cloudflare Workers ã® Assets Binding ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€å˜ä¸€ã® Worker ã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½ã§ã™ã€‚\n\n## æ§‹æˆã®å¤‰æ›´ç‚¹ (Pages -> Workers)\n\n### 1. Vite è¨­å®š (`vite.config.ts`)\n\nPages ç”¨ã®ã‚¢ãƒ€ãƒ—ã‚¿ã‚’å‰Šé™¤ã—ã€Workers ç”¨ã®ãƒ“ãƒ«ãƒ‰è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚\n\n```typescript\nimport { defineConfig } from 'vite'\nimport devServer from '@hono/vite-dev-server'\nimport ssrBuild from 'vite-ssr-components/plugin' // æ³¨æ„: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ\n\nexport default defineConfig(({ mode }) => {\n  if (mode === 'client') {\n    return {\n      build: {\n        rollupOptions: {\n          input: ['./src/client.tsx'],\n          // ãƒãƒƒã‚·ãƒ¥ä»˜ããƒ•ã‚¡ã‚¤ãƒ«åã‚’é¿ã‘ã‚‹å ´åˆã¯å›ºå®šåã‚’æŒ‡å®š\n          output: { dir: './dist/static', entryFileNames: '[name].js' },\n        },\n      },\n    }\n  }\n  return {\n    server: { port: 25174 },\n    plugins: [\n      devServer({ entry: 'src/index.tsx' }),\n      ssrBuild(),\n    ],\n    // Workersç”¨ã®ãƒ“ãƒ«ãƒ‰è¨­å®š\n    build: {\n      target: 'esnext',\n      emptyOutDir: false, // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ“ãƒ«ãƒ‰(dist/static)ã‚’æ¶ˆã•ãªã„\n      ssr: 'src/index.tsx', // SSRã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ\n      rollupOptions: {\n        output: {\n          entryFileNames: '_worker.js', // Workersã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ\n          dir: 'dist',\n          format: 'esm',\n        }\n      }\n    }\n  }\n})\n```\n\n### 2. Wrangler è¨­å®š (`wrangler.jsonc`)\n\n`pages_build_output_dir` ã‚’å‰Šé™¤ã—ã€`main` ã¨ `assets` ã‚’è¨­å®šã—ã¾ã™ã€‚\n\n```jsonc\n{\n  \"name\": \"hono-todo\",\n  \"main\": \"./dist/_worker.js\",\n  \"compatibility_date\": \"2025-04-03\",\n  \"assets\": {\n    \"binding\": \"ASSETS\",\n    \"directory\": \"./dist/static\"\n  },\n  // ...\n}\n```\n\n### 3. é™çš„ã‚¢ã‚»ãƒƒãƒˆé…ä¿¡ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ (`src/index.tsx`)\n\nWorkers ç’°å¢ƒã§ã¯ã€é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚‚ Worker ãŒãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã€æ˜ç¤ºçš„ã« `env.ASSETS` ã‚’å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\n**é‡è¦**: `POST` ç­‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãƒœãƒ‡ã‚£ã‚’æ¶ˆè²»ã—ãªã„ã‚ˆã†ã€ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒƒã‚¯ã‚„ `clone()` ã‚’è¡Œã†ã“ã¨ã€‚\n\n```typescript\napp.use('*', async (c, next) => {\n  // GET/HEAD ä»¥å¤–ã¯ã‚¹ã‚­ãƒƒãƒ— (POSTãƒœãƒ‡ã‚£æ¶ˆè²»å›é¿)\n  if (c.req.method !== 'GET' && c.req.method !== 'HEAD') {\n    return await next()\n  }\n  \n  // @ts-ignore\n  if (c.env.ASSETS) {\n    // ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ clone ã—ã¦æ¸¡ã™ã®ãŒå®‰å…¨\n    // @ts-ignore\n    const res = await c.env.ASSETS.fetch(c.req.raw.clone())\n    if (res.status < 400) {\n      return res\n    }\n  }\n  await next()\n})\n```\n\n### 4. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èª­ã¿è¾¼ã¿\n\n`vite-ssr-components` ã® `<Script />` ã¯ä¾¿åˆ©ã§ã™ãŒã€Workers ç’°å¢ƒã§ã®ãƒ‘ã‚¹è§£æ±ºãŒé›£ã—ã„å ´åˆã€Vite ã®å‡ºåŠ›ã«åˆã‚ã›ã¦æ‰‹å‹•ã§ `<script>` ã‚¿ã‚°ã‚’æ›¸ãæ–¹ãŒç¢ºå®Ÿãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚\n\n```tsx\n<head>\n  {import.meta.env.PROD ? (\n    <script type=\"module\" src=\"/client.js\"></script>\n  ) : (\n    <>\n      <ViteClient />\n      <Script src=\"/src/client.tsx\" />\n    </>\n  )}\n</head>\n```\n\n## å‹å®‰å…¨ãªAPIé€šä¿¡ (`hono-typed-rest`)\n\nã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ (`src/client.tsx`) ã‹ã‚‰ã‚µãƒ¼ãƒãƒ¼ (`src/index.tsx` ã¾ãŸã¯ `src/api.ts`) ã® API ã‚’å‘¼ã³å‡ºã™éš›ã¯ã€`hono-typed-rest` ã‚’åˆ©ç”¨ã—ã¦å‹å®‰å…¨æ€§ã‚’ç¢ºä¿ã—ã¾ã™ã€‚\n\n### API å®šç¾© (`src/api.ts`)\n\n```typescript\nconst api = new Hono()\n  .get('/todos', ...)\n  .post('/todos', ...)\n\nexport default api\nexport type AppType = typeof api\n```\n\n### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£… (`src/client.tsx`)\n\n```typescript\nimport { createRestClient } from 'hono-typed-rest'\nimport type { AppType } from './api'\n\nconst client = createRestClient<AppType>({\n  baseUrl: window.location.origin + '/api'\n})\n\n// ä½¿ç”¨ä¾‹\nconst todos = await client.get('/todos')\n```\n\n## ãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰\n\n```bash\nnpm run build\nnpx wrangler deploy # pages deploy ã§ã¯ãªã„\n```\n",
        "plugins/kazuph-dotfiles/skills/jotai-react-mastery/SKILL.md": "---\nname: jotai-react-mastery\ndescription: Jotaiã¨React Suspense/Transitionã‚’çµ„ã¿åˆã‚ã›ãŸãƒ¢ãƒ€ãƒ³ãªçŠ¶æ…‹ç®¡ç†ãƒ»éåŒæœŸå‡¦ç†ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹é›†ã€‚uhyoæ°ã®ã€Œjotaiã«ã‚ˆã‚‹Reactå†å…¥é–€ã€ã«åŸºã¥ãã€‚\nallowed-tools:\n  - Shell\n  - Read\n  - Write\n  - Edit\n  - Glob\n  - Grep\n---\n\n# Jotai React Mastery Skill\n\n## æ¦‚è¦\nJotaiã‚’ç”¨ã„ãŸReactã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆã€ç‰¹ã«Suspenseã€Concurrent featuresï¼ˆTransitionï¼‰ã€éåŒæœŸå‡¦ç†ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«é–¢ã™ã‚‹ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’æä¾›ã™ã‚‹ã‚¹ã‚­ãƒ«ã§ã™ã€‚\nã€Œjotaiã«ã‚ˆã‚‹Reactå†å…¥é–€ã€ã®å†…å®¹ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€å®£è¨€çš„UIã®åŸå‰‡ã«å¾“ã£ãŸå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æç¤ºã—ã¾ã™ã€‚\n\n## åˆ©ç”¨ã‚·ãƒ¼ãƒ³\n- Jotaiã‚’ç”¨ã„ãŸçŠ¶æ…‹ç®¡ç†ã®è¨­è¨ˆæ™‚\n- React Suspenseã‚’åˆ©ç”¨ã—ãŸéåŒæœŸãƒ‡ãƒ¼ã‚¿å–å¾—ã®å®Ÿè£…æ™‚\n- `useTransition` ã‚’ç”¨ã„ãŸUXæ”¹å–„ï¼ˆã¡ã‚‰ã¤ãé˜²æ­¢ã€ãƒšãƒ³ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºï¼‰\n- éåŒæœŸå‡¦ç†ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒªãƒˆãƒ©ã‚¤æ©Ÿæ§‹ã®å®Ÿè£…\n- `jotai-eager` ã‚’ç”¨ã„ãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–\n\n## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ & ãƒ‘ã‚¿ãƒ¼ãƒ³\n\n### 1. Jotaiã®åŸºæœ¬åŸå‰‡\n- **å®šç¾©ã¨åˆ©ç”¨ã®åˆ†é›¢**: `atom`ã§ã‚¹ãƒ†ãƒ¼ãƒˆã‚’å®šç¾©ã—ã€`useAtom`ã§åˆ©ç”¨ã™ã‚‹ã€‚`useState`ã®å½¹å‰²ã‚’åˆ†å‰²ãƒ»æ‹¡å¼µã™ã‚‹ã€‚\n- **æ´¾ç”Ÿatomã«ã‚ˆã‚‹ã‚«ãƒ—ã‚»ãƒ«åŒ–**: ç”Ÿã®atomï¼ˆPrimitive Atomï¼‰ã‚’éš è”½ã—ã€èª­ã¿å–ã‚Šå°‚ç”¨ã¾ãŸã¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç”¨ï¼ˆæ›¸ãè¾¼ã¿å°‚ç”¨ï¼‰ã®æ´¾ç”Ÿatomï¼ˆDerived Atomï¼‰ã®ã¿ã‚’å…¬é–‹ã™ã‚‹ã“ã¨ã§ã€æ„å›³ã—ãªã„ã‚¹ãƒ†ãƒ¼ãƒˆå¤‰æ›´ã‚’é˜²ãã€‚\n- **æœ€å°é™ã®API**: è¤‡é›‘ãªæ“ä½œã¯ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã§ã¯ãªãã€æ›¸ãè¾¼ã¿å¯èƒ½ãªæ´¾ç”Ÿatomï¼ˆAction Atomï¼‰ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã€‚å¼•æ•°ã‚’å–ã‚‹æ›¸ãè¾¼ã¿é–¢æ•°ã‚’æ´»ç”¨ã™ã‚‹ã€‚\n\n### 2. Suspenseã¨éåŒæœŸå‡¦ç† (Render-as-You-Fetch)\nSuspenseã‚’æ­£ã—ãå‹•ä½œã•ã›ã‚‹ãŸã‚ã€Promiseã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ï¼ˆuseEffectã‚„useMemoå†…ï¼‰ã§ã¯ãªãã€**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å¤–ï¼ˆAtomï¼‰**ã§ç®¡ç†ã™ã‚‹ã€‚\n\n#### åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³\n```ts\n// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤–ã§Promiseã‚’ä¿æŒã™ã‚‹\nconst userAtom = atom(async () => {\n  const user = await fetchUser();\n  return user;\n});\n\n// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…\nconst UserProfile = () => {\n  // atomã®å€¤ãŒPromiseã®å ´åˆã€è§£æ±ºã™ã‚‹ã¾ã§è‡ªå‹•çš„ã«ã‚µã‚¹ãƒšãƒ³ãƒ‰ã™ã‚‹\n  const user = useAtomValue(userAtom); \n  return <div>{user.name}</div>;\n};\n```\n\n#### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ãã‚¯ã‚¨ãƒª\nIDã”ã¨ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ã«ã¯ä»¥ä¸‹ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã„åˆ†ã‘ã‚‹ã€‚\n\n1. **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¾å­˜atom**ï¼ˆå˜ä¸€ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ã¿æ‰±ã†å ´åˆï¼‰\n   ```ts\n   const userIdAtom = atom<string | null>(null);\n   const userAtom = atom(async (get) => {\n     const id = get(userIdAtom);\n     if (!id) return null;\n     return fetchUser(id);\n   });\n   ```\n\n2. **Atom Family**ï¼ˆè¤‡æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’åŒæ™‚ã«æ‰±ã†ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒå¿…è¦ãªå ´åˆï¼‰\n   ```ts\n   import { atomFamily } from 'jotai/utils';\n\n   const userAtomFamily = atomFamily((id: string) =>\n     atom(async () => fetchUser(id))\n   );\n\n   const UserProfile = ({ id }) => {\n     const user = useAtomValue(userAtomFamily(id));\n     // ...\n   };\n   ```\n\n### 3. å†èª­ã¿è¾¼ã¿ã¨UIãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°\nãƒ‡ãƒ¼ã‚¿ã®å†å–å¾—ï¼ˆRefetchï¼‰ã¯ã€Œæ‰‹ç¶šãçš„ãªå†å®Ÿè¡Œã€ã§ã¯ãªãã€ã€ŒUIãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆã‚­ãƒ¼ï¼‰ã®æ›´æ–°ã«ã‚ˆã‚‹ã‚¹ãƒ†ãƒ¼ãƒˆã®å†è©•ä¾¡ã€ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã€‚ã“ã‚Œã¯ã€Œãƒ‡ãƒ¼ã‚¿å–å¾—ã‚‚UIã®è¨ˆç®—ã®ä¸€éƒ¨ã€ã¨ã„ã†å®£è¨€çš„UIã®æ€æƒ³ã«åŸºã¥ãã€‚\n\n#### createReloadableAtom ãƒ‘ã‚¿ãƒ¼ãƒ³\n```ts\nimport { atom, type Getter } from \"jotai\";\n\nfunction createReloadableAtom<T>(getter: (get: Getter) => T) {\n  const refetchKeyAtom = atom(0);\n  return atom(\n    (get) => {\n      get(refetchKeyAtom); // ä¾å­˜ã‚’ä½œæˆ\n      return getter(get);\n    },\n    (get, set) => {\n      // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¦å†è©•ä¾¡ã‚’ãƒˆãƒªã‚¬ãƒ¼\n      set(refetchKeyAtom, (c) => c + 1);\n    }\n  );\n}\n\n// ä½¿ç”¨ä¾‹\nconst userListAtom = createReloadableAtom(async () => fetchUsers());\n\n// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ã®ä½¿ç”¨\nconst UserList = () => {\n  const users = useAtomValue(userListAtom);\n  const reload = useSetAtom(userListAtom); // å®Ÿè¡Œã™ã‚‹ã¨å†å–å¾—\n  // ...\n};\n```\n\n### 4. ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ (Transitions)\nSuspenseã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡¨ç¤ºï¼ˆãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼‰ã®ã¡ã‚‰ã¤ãã‚’é˜²ãã€ã€Œå¤ã„UIã€ã‚’ç¶­æŒã—ã¤ã¤è£ã§èª­ã¿è¾¼ã‚€ã€‚\n\n- **`useTransition` / `startTransition`**: ã‚¹ãƒ†ãƒ¼ãƒˆæ›´æ–°ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã€Œå„ªå…ˆåº¦ã®ä½ã„æ›´æ–°ã€ã¨ã™ã‚‹ã€‚\n- **2ã¤ã®ä¸–ç•Œã®ä¸¦å­˜**: ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ä¸­ã¯ã€Œæ–°ã—ã„ã‚¹ãƒ†ãƒ¼ãƒˆã®ä¸–ç•Œï¼ˆè£ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ä¸­ï¼‰ã€ã¨ã€Œå¤ã„ã‚¹ãƒ†ãƒ¼ãƒˆã®ä¸–ç•Œï¼ˆè¡¨ç¤ºä¸­ï¼‰ã€ãŒåŒæ™‚ã«å­˜åœ¨ã™ã‚‹ã€‚\n- **ãƒšãƒ³ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹**: `isPending` ã‚’åˆ©ç”¨ã—ã¦ã€å¤ã„UIãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹é–“ã«ã€Œèª­ã¿è¾¼ã¿ä¸­...ã€ãªã©ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å³åº§ã«è¿”ã™ã€‚\n\n```ts\nconst [isPending, startTransition] = useTransition();\n\nconst handleChange = (nextId) => {\n  startTransition(() => {\n    setUserId(nextId); // ã“ã®æ›´æ–°ã«ã‚ˆã‚‹ã‚µã‚¹ãƒšãƒ³ãƒ‰ã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’è¡¨ç¤ºã›ãšã€å¤ã„UIã‚’ç¶­æŒã™ã‚‹\n  });\n};\n\n// UIå´: isPendingã‚’ç”¨ã„ã¦å¿œç­”æ€§ã‚’ç¢ºä¿\n<div style={{ opacity: isPending ? 0.5 : 1 }}>\n  <Suspense fallback={<Spinner />}>\n    <UserProfile id={userId} />\n  </Suspense>\n</div>\n```\n\n#### æ³¨æ„ç‚¹\n- **åˆ¶å¾¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: inputã®onChangeãªã©ã€å³åº§ã«DOMã«åæ˜ ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚‹æ›´æ–°ã¯ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã«ã—ã¦ã¯ã„ã‘ãªã„ã€‚\n- **ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆ**: å¤ã„UIã‚’ç¶­æŒã—ãŸããªã„å ´åˆï¼ˆç”»é¢é·ç§»ãªã©ï¼‰ã¯ã€`Suspense` ã« `key` ã‚’ä¸ãˆã‚‹ã‹ã€æ¡ä»¶ä»˜ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§æ–°ã—ã„ `Suspense` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã§ã€å¼·åˆ¶çš„ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’è¡¨ç¤ºã•ã›ã‚‹ã€‚\n\n### 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– (jotai-eager)\nåˆæœŸãƒ­ãƒ¼ãƒ‰æ™‚ã¯éåŒæœŸï¼ˆPromiseï¼‰ã ãŒã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒã‚ã‚‹å ´åˆã¯åŒæœŸçš„ã«å€¤ã‚’è¿”ã—ãŸã„å ´åˆã« `jotai-eager` ã‚’ä½¿ç”¨ã™ã‚‹ã€‚ç„¡é§„ãªã‚µã‚¹ãƒšãƒ³ãƒ‰ï¼ˆä¸€ç¬ã®Loadingè¡¨ç¤ºï¼‰ã‚’é˜²ãã€‚\n\n```ts\nimport { eagerAtom } from 'jotai-eager';\n\n// å†…éƒ¨çŠ¶æ…‹ãŒnullï¼ˆåˆæœŸçŠ¶æ…‹ï¼‰ã®ã¨ãã ã‘éåŒæœŸã€ãã‚Œä»¥å¤–ã¯åŒæœŸ\nconst valueAtom = eagerAtom((get) => {\n  const internalVal = get(internalAtom);\n  if (internalVal !== null) {\n    return internalVal; // åŒæœŸçš„ã«è¿”ã™\n  }\n  // éåŒæœŸèª­ã¿è¾¼ã¿\n  const data = get(asyncDataAtom); \n  return data; // Promiseã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹\n});\n```\n`eagerAtom` ã¯ã€`get`ã§Promiseã‚’å–å¾—ã—ãŸã¨ãã®ã¿è‡ªèº«ã‚‚Promiseã‚’è¿”ã—ã€ãã‚Œä»¥å¤–ã¯å€¤ã‚’ãã®ã¾ã¾è¿”ã™ï¼ˆåŒæœŸï¼‰ã€‚\n\n### 6. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° (Error Boundary)\néåŒæœŸatomã®PromiseãŒrejectã•ã‚ŒãŸå ´åˆã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚¨ãƒ©ãƒ¼ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚‹ã€‚\n\n- **Error Boundary**: ã‚µã‚¹ãƒšãƒ³ãƒ‰ã¨åŒæ§˜ã€ã‚¨ãƒ©ãƒ¼å¢ƒç•Œã‚’è¨­ã‘ã¦æ•æ‰ã™ã‚‹ã€‚`react-error-boundary` ã®åˆ©ç”¨ã‚’æ¨å¥¨ã€‚\n- **ãƒªãƒˆãƒ©ã‚¤ã®å®Ÿè£…**: Error Boundaryã®ãƒªã‚»ãƒƒãƒˆ (`resetErrorBoundary`) ã¨ã€Atomã®å†èª­ã¿è¾¼ã¿ (`reloadAtom`) ã‚’ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³å†…ã§åŒæ™‚ã«è¡Œã†ã€‚\n\n#### ãƒªãƒˆãƒ©ã‚¤å®Ÿè£…ä¾‹\n```tsx\nconst UserListErrorFallback = ({ error, resetErrorBoundary }) => {\n  const reloadUserList = useSetAtom(userListAtom); // createReloadableAtomã§ä½œæˆã—ãŸã‚‚ã®\n  \n  const handleRetry = () => {\n    startTransition(() => {\n      resetErrorBoundary(); // Error Boundaryã®çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ\n      reloadUserList();    // Atomã®å†è©•ä¾¡ãƒˆãƒªã‚¬ãƒ¼\n    });\n  };\n\n  return (\n    <div>\n      <p>Error: {error.message}</p>\n      <button onClick={handleRetry}>Retry</button>\n    </div>\n  );\n};\n```\n\n### 7. å‚è€ƒãƒªã‚½ãƒ¼ã‚¹\n- æ›¸ç±: [jotaiã«ã‚ˆã‚‹Reactå†å…¥é–€](https://zenn.dev/uhyo/books/learn-react-with-jotai)\n- å…¬å¼: [Jotai Docs](https://jotai.org/)\n",
        "plugins/kazuph-dotfiles/skills/magi/SKILL.md": "---\nname: magi\ndescription: Multi-AI (Claude/Codex/Gemini) deliberation skill with strict availability checks and structured outputs.\nallowed-tools:\n  - Task\n  - Bash\n  - Read\n  - Write\n  - Glob\n  - Grep\nuser-invocable: true\n---\n\n# MAGI System Orchestrator Skill\n\n## é‡è¦: å¿…ãšå°‚ç”¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨\n\n**MAGIã‚’ä½¿ã†å ´åˆã¯ã€ç¾åœ¨ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ç›´æ¥å®Ÿè¡Œã—ãªã„ã§ãã ã•ã„ã€‚**\n\nå¿…ãš `Task` ãƒ„ãƒ¼ãƒ«ã§ `magi-system-orchestrator` ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’èµ·å‹•ã—ã¦ãã ã•ã„ï¼š\n\n```\nTask(subagent_type=\"magi-system-orchestrator\", prompt=\"<ä¾é ¼å†…å®¹>\")\n```\n\nç†ç”±:\n- ç¾åœ¨ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§å®Ÿè¡Œã™ã‚‹ã¨ã€å¤§é‡ã®CLIå‡ºåŠ›ã§ãƒˆãƒ¼ã‚¯ãƒ³ãŒçˆ†ç™ºã™ã‚‹\n- å°‚ç”¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãªã‚‰ã€å®Œäº†å¾Œã«è¦ç´„ã ã‘ã‚’ãƒ¡ã‚¤ãƒ³ã¸è¿”ã›ã‚‹\n- ä¸¦åˆ—CLIå®Ÿè¡Œã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãŒå®‰å®šã™ã‚‹\n\n## ClaudeCodeã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ–¹é‡\n- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: å¿…é ˆï¼ˆClaudeCodeã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§èµ·å‹•ï¼‰\n- ç†ç”±: Codex/Gemini/Claudeã®å¤šè¦–ç‚¹å”èª¿ã‚’è¡Œã†éš›ã«å¤§é‡ã®CLIã¨ãƒ­ã‚°ã‚’ä¸¦åˆ—ã§æ‰±ã†ãŸã‚ã€å°‚ç”¨ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å›ºå®šã—ãªã„ã¨æ‰‹é †å´©å£Šã«ã¤ãªãŒã‚‹ã€‚\n- ãƒ¡ãƒ¢: ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå†…ã§å¯ç”¨æ€§ãƒã‚§ãƒƒã‚¯â†’ãƒšãƒ«ã‚½ãƒŠæŠ•å…¥â†’çµ±åˆâ†’ãƒ­ã‚°æ•´ç†ã¾ã§ã‚’ãƒ¯ãƒ³ã‚»ãƒƒãƒˆã¨ã—ã¦æ‰±ã„ã€å®Œäº†å¾Œã«è¦ç´„ã ã‘ã‚’ãƒ¡ã‚¤ãƒ³ã¸è¿”ã™ã€‚\n\n## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•æ™‚ã®å¿…é ˆäº‹é …\n\n**magi-system-orchestratorã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã—ã¦èµ·å‹•ã•ã‚ŒãŸå ´åˆã€ã“ã®ã‚¹ã‚­ãƒ«ã®å†…å®¹ã«å¾“ã£ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã€‚**\n\nã‚¹ã‚­ãƒ«ã‚’èª­ã¾ãšã«å®Ÿè¡Œã™ã‚‹ã¨ã€CLIãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„ãƒˆãƒ¼ã‚¯ãƒ³å‰Šæ¸›æ‰‹æ³•ãŒé©ç”¨ã•ã‚Œãšã€éåŠ¹ç‡ãªå®Ÿè¡Œã«ãªã‚‹ã€‚\n\nMAGIã¯è¤‡é›‘ãªæ„æ€æ±ºå®šã‚„å¤šè¦–ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãŸã‚ã®æ¨™æº–ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ã“ã®Skillã‚’å‚ç…§ã—ã€é•·æ–‡ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ã®ä»£ã‚ã‚Šã«ã“ã“ã§å®šç¾©ã•ã‚ŒãŸæ‰‹é †ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’èª­ã¿è¾¼ã‚“ã§ãã ã•ã„ã€‚\n\n## ä½¿ã†ã¹ãã‚±ãƒ¼ã‚¹\n\n- å¤§è¦æ¨¡ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é¸å®šãƒ»æŠ•è³‡åˆ¤æ–­ãƒ»è¤‡æ•°æ¡ˆæ¯”è¼ƒã®ã‚ˆã†ã«ã€å˜ç‹¬ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã¯åã‚ŠãŒå‡ºã‚‹ã‚¿ã‚¹ã‚¯ã€‚\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã€ŒMAGIã€ã€Œå¤šè¦–ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã€ŒCodex/Geminiã‚‚å·»ãè¾¼ã‚“ã§ã€ãªã©ã®æ˜ç¤ºçš„ãªä¾é ¼ãŒã‚ã‚‹ã¨ãã€‚\n- å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚ºã§ã‚‚æ ¹æœ¬æ–¹é‡ã‚’ä¼´ã†å ´åˆï¼ˆå˜ç´”ãªbugfixãªã‚‰é€šå¸¸Claudeã§ååˆ†ï¼‰ã€‚\n\n## å®Ÿè¡Œãƒ•ãƒ­ãƒ¼æ¦‚è¦\n\n1. **ã‚´ãƒ¼ãƒ«æŠŠæ¡**: äºˆç®—/åˆ¶ç´„/æˆåŠŸæŒ‡æ¨™ã‚’èãå‡ºã—ã€æƒã‚ãªã‘ã‚Œã° Stop-if-Unclear ã‚’ç™ºå‹•ã€‚\n2. **å¯ç”¨æ€§ãƒã‚§ãƒƒã‚¯**: Codex/GPT-5ã¨Geminiã®CLIã‚’åŒæ™‚ã«ç«‹ã¡ä¸Šã’ã‚‰ã‚Œã‚‹ã‹ç–é€šï¼ˆ`docs/PLAYBOOK.md`å‚ç…§ï¼‰ã€‚å¿…ãš `script -q /dev/null` ã§ç–‘ä¼¼TTYã‚’ç¢ºä¿ã—ã¦å®Ÿè¡Œã™ã‚‹ï¼ˆTTYç„¡ã—ã¯å¤±æ•—ã™ã‚‹ï¼‰ã€‚\n3. **ãƒ•ã‚§ãƒ¼ã‚º1**: 3ãƒšãƒ«ã‚½ãƒŠã‚’ä¸¦åˆ—å®Ÿè¡Œã—ã€äº’ã„ã«å‚ç…§ã•ã›ãšã«åˆæœŸã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’å–å¾—ã€‚\n4. **ãƒ•ã‚§ãƒ¼ã‚º2**: GeminiãŒçµ±åˆãƒ—ãƒ©ãƒ³ã‚’ã¾ã¨ã‚ã€å…±é€šç‚¹ãƒ»ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ãƒ»ãƒªã‚¹ã‚¯ãƒ»ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ã‚’æ•´ç†ã€‚\n5. **ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯**: `docs/CHECKLIST.md`ã«æ²¿ã£ã¦æ¤œè¨¼ã—ã€æº€ãŸã›ãªã„å ´åˆã¯ç†ç”±ã‚’å ±å‘Šã€‚\n\nè©³ç´°æ‰‹é †ãƒ»CLIãƒ«ãƒ¼ãƒ«ã¯ `docs/PLAYBOOK.md` ã‚’å‚ç…§ã€‚\n\n## CLIãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ\n\n| Persona | ã‚³ãƒãƒ³ãƒ‰ä¾‹ |\n| --- | --- |\n| Codex/GPT-5 | `outfile=$(mktemp -t codex); script -q /dev/null codex --sandbox workspace-write --config sandbox_workspace_write.network_access=true --dangerously-bypass-approvals-and-sandbox exec --skip-git-repo-check -o \"$outfile\" \"<prompt>\" >/dev/null 2>&1; cat \"$outfile\"` |\n| Codex/GPT-5 (æ›¸è¾¼ã¿æœ‰) | `outfile=$(mktemp -t codex); script -q /dev/null codex --sandbox workspace-write --config sandbox_workspace_write.network_access=true --dangerously-bypass-approvals-and-sandbox exec --skip-git-repo-check --full-auto -o \"$outfile\" \"<prompt>\" >/dev/null 2>&1; cat \"$outfile\"` |\n| Gemini | `script -q /dev/null /opt/homebrew/bin/mise exec -- gemini --approval-mode=yolo -p \"<prompt>\"` |\n| Claude (ã‚´ãƒ¼ãƒ«æ•´å‚™) | `script -q /dev/null claude --dangerously-skip-permissions --print \"<prompt>\"` |\nâ€» any-scriptç­‰ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã¯ä½¿ã‚ãšã€TTYä»˜ãã§ç›´æ¥å©ãã€‚æ¨™æº–å‡ºåŠ›ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œã—ã€ä¼šè©±çŠ¶æ…‹ã¯æœŸå¾…ã—ãªã„ã“ã¨ã€‚\n\n- 2ç³»çµ±ä»¥ä¸Šã®CLIçµŒè·¯ã‚’æº–å‚™ã—ã€ã„ãšã‚Œã‹ãŒè½ã¡ãŸã‚‰å³æ™‚Abortã€‚\n- åŒæœŸå‡¦ç†ã¯ç¦æ­¢ã€‚ã™ã¹ã¦ä¸¦åˆ—ã¾ãŸã¯ã§ãã‚‹ã ã‘åŒæ™‚ã«èµ°ã‚‰ã›ã‚‹ã€‚\n\n## ãƒˆãƒ¼ã‚¯ãƒ³å‰Šæ¸›ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæ¨å¥¨ï¼‰\n\nCodex execã®å‡ºåŠ›ã¯å¤§é‡ã®ãƒ­ã‚°ã‚’å«ã‚€ãŸã‚ã€**æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿å–å¾—**ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ï¼š\n\n```bash\n# Codex: -o ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ï¼ˆã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å®Œå…¨ãƒã‚¤ãƒ‘ã‚¹ï¼‰\noutfile=$(mktemp -t codex)\nscript -q /dev/null codex \\\n  --sandbox workspace-write \\\n  --config sandbox_workspace_write.network_access=true \\\n  --dangerously-bypass-approvals-and-sandbox \\\n  exec --skip-git-repo-check -o \"$outfile\" \"<prompt>\" >/dev/null 2>&1\ncat \"$outfile\"\n# ãƒ•ã‚¡ã‚¤ãƒ«ã¯ /var/folders é…ä¸‹ã«ä½œæˆã•ã‚Œã€macOSãŒè‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹ãŸã‚ rm ä¸è¦\n```\n\n**åˆ©ç‚¹:**\n- è¿”å´ãƒˆãƒ¼ã‚¯ãƒ³ = æœ€çµ‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ï¼ˆãƒ­ã‚°ãƒ»é€”ä¸­çµŒéã‚’é™¤å¤–ï¼‰\n- `mktemp -t` ã§ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªãƒ•ã‚¡ã‚¤ãƒ«åã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ä¸¦åˆ—å®Ÿè¡Œã§ã‚‚å®‰å…¨\n- `rm` ä¸è¦ï¼ˆèªè¨¼ãƒ€ã‚¤ã‚¢ãƒ­ã‚°å›é¿ã€macOSã®è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã«ä»»ã›ã‚‹ï¼‰\n\n**æ³¨æ„:** Gemini CLIã«ã¯åŒç­‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒãªã„ãŸã‚ã€å¾“æ¥é€šã‚Š `| tail` ç­‰ã§å¯¾å¿œã™ã‚‹ã€‚\n\n## å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n\nå¿…ãš `docs/OUTPUT_TEMPLATE.md` ã®é››å½¢ã‚’ä½¿ã„ã€ä»¥ä¸‹ã‚’æº€ãŸã—ã¦ãã ã•ã„ã€‚\n\n- Situation Snapshotã«ã‚´ãƒ¼ãƒ«/åˆ¶ç´„/æˆåŠŸæŒ‡æ¨™ã‚’æ˜è¨˜ã€‚\n- å„ãƒšãƒ«ã‚½ãƒŠã®Actionable Insightsã¯3ä»¶ã€`Action â€“ Tool/Owner â€“ Success Check`å½¢å¼ã€‚\n- Unified Action Planã¯3ã‚¹ãƒ†ãƒƒãƒ—ä»¥ä¸Šã§ã€å„ã‚¹ãƒ†ãƒƒãƒ—ã«ETAã¨æ¤œè¨¼æ–¹æ³•ã‚’ä»˜ä¸ã€‚\n- ãƒªã‚¹ã‚¯1ä»¶ãƒ»ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—è³ªå•1ä»¶ã€‚\n\n## å®Ÿè£…ã‚¿ã‚¹ã‚¯æ™‚ã®ãƒ«ãƒ¼ãƒ«\n\n- Codex/Geminiã¯å¿…è¦ãªdiffã‚„ãƒ†ã‚¹ãƒˆãƒ­ã‚°ã‚’ãã®å ´ã§æç¤ºã™ã‚‹ã€‚\n- Claudeã¯ã‚´ãƒ¼ãƒ«æ•´å‚™ã¨æ•´åˆæ€§ç¢ºèªã«å°‚å¿µã€‚å¿…è¦ã«å¿œã˜ã¦Taskãƒ„ãƒ¼ãƒ«ã§è¿½åŠ ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã€‚\n\n## ãƒ­ã‚°ã¨è¨¼è·¡ã®æ‰±ã„\n\n- `runtime/` ä»¥ä¸‹ã« `magi-<timestamp>-<persona>.log` ãªã©ã®å½¢ã§å„å‡ºåŠ›ã‚’ä¿å­˜ã—ã¦ãŠãã¨å¾Œã‹ã‚‰å‚ç…§ã—ã‚„ã™ã„ã€‚\n- ãƒªãƒˆãƒ©ã‚¤ã‚„Abortç†ç”±ã¯ãƒ­ã‚°ã«å¿…ãšæ®‹ã—ã€æœ€çµ‚å ±å‘Šã§å¼•ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚\n\n## ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—æ‰‹é †ï¼ˆå¿…é ˆï¼‰\n\n1. å®Ÿè¡Œã«ä½¿ç”¨ã—ãŸCodex/GPT-5ãƒ»Gemini CLIãƒ—ãƒ­ã‚»ã‚¹ãŒæ®‹ã£ã¦ã„ãªã„ã‹ `ps` ã§ç¢ºèªã—ã€å¿…è¦ãªã‚‰å®‰å…¨ã«çµ‚äº†ã€‚\n2. `runtime/` ä»¥ä¸‹ã«æ®‹ã—ãŸãƒ­ã‚°ã§ä¸è¦ãªã‚‚ã®ãŒã‚ã‚Œã°æ˜ç¤ºçš„ã«å‰Šé™¤ã€‚\n   - é‡è¦ãƒ­ã‚°ã¯æ®‹ã™ã€‚å‰Šé™¤å¯¾è±¡ã‚’ç¢ºå®šã•ã›ã¦ã‹ã‚‰å‰Šé™¤ã‚’å®Ÿè¡Œã€‚\n3. tmuxã‚¿ã‚¤ãƒˆãƒ«ã‚„OSC 0ã‚’ãƒªã‚»ãƒƒãƒˆã—ã€MAGIå›ºæœ‰ã®ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãŒã‚ã‚Œã°åœæ­¢ã€‚\n\n## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°\n\n- **Codex or Gemini unreachable**: å³Abortã—ã€å†è©¦è¡Œã‚³ãƒãƒ³ãƒ‰ãƒ»ãƒ­ã‚°ã‚’æ·»ãˆã¦å ±å‘Šã€‚\n- **ãƒ†ãƒ³ãƒ—ãƒ¬é•å**: `docs/OUTPUT_TEMPLATE.md`ã‚’å†å‚ç…§ã—ã€ä¸è¶³è¦ç´ ã‚’è¿½è¨˜ã€‚\n- **ä¸¦åˆ—æ€§å´©å£Š**: å®Ÿè¡Œãƒ­ã‚°ã«ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æ®‹ã—ã¦ä¸¦åˆ—æ€§ã‚’ç¤ºã™ã€‚é›£ã—ã‘ã‚Œã°ã‚¿ã‚¹ã‚¯ã‚’ãƒªã‚¹ã‚±ã€‚\n\nã“ã®Skillã‚’èª­ã¿è¾¼ã‚€ã“ã¨ã§ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ã«éåº¦ãªãƒ†ã‚­ã‚¹ãƒˆã‚’æŒã¡è¾¼ã¾ãšã«MAGIé‹ç”¨ã‚’å†ç¾ã§ãã¾ã™ã€‚\n",
        "plugins/kazuph-dotfiles/skills/magi/docs/CHECKLIST.md": "# MAGI Self-Verification Checklist\n\næå‡ºå‰ã«ä»¥ä¸‹ã‚’é †ç•ªã«ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n1. [ ] Codex/GPT-5ã¨Geminiã®CLIã‚’äº‹å‰ç–é€šã—ã€ä¸¡è€…ã¨ã‚‚ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ãŸã€‚\n2. [ ] ã„ãšã‚Œã‹ã®CLIãŒå¤±æ•—ã—ãŸå ´åˆã€è¨±å¯æ¸ˆã¿ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å…¨ã¦è©¦ã—ã€ãã‚Œã§ã‚‚ä¸å¯ãªã‚‰ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¸­æ–­ã—ã¦å ±å‘Šã—ãŸã€‚\n3. [ ] 3ãƒšãƒ«ã‚½ãƒŠã®åˆ†æã‚’ä¸¦åˆ—ã§å®Ÿè¡Œã—ã€äº’ã„ã®å†…å®¹ã‚’å‚ç…§ã—ãªã„åˆæœŸå‡ºåŠ›ã‚’å–å¾—ã—ãŸã€‚\n4. [ ] å„ãƒšãƒ«ã‚½ãƒŠã®ã€ŒAction â€“ Tool/Owner â€“ Success Checkã€ç®‡æ¡æ›¸ããŒ3ã¤ãšã¤æƒã£ã¦ã„ã‚‹ã€‚\n5. [ ] Geminiä¸»å°ã§Unified Action Planï¼ˆæœ€ä½3ã‚¹ãƒ†ãƒƒãƒ—ã€å„ã‚¹ãƒ†ãƒƒãƒ—ã«æ¤œè¨¼æ–¹æ³•ä»˜ãï¼‰ã‚’ä½œæˆã—ãŸã€‚\n6. [ ] ãƒªã‚¹ã‚¯ã¯å…·ä½“çš„ãªãƒˆãƒªã‚¬ãƒ¼ã¨å¯¾ç­–ã®ãƒšã‚¢ã§è¨˜è¿°ã—ã€ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—è³ªå•ã¯1ä»¶ã«çµã£ãŸã€‚\n7. [ ] Situation Snapshotã«ã‚´ãƒ¼ãƒ«/åˆ¶ç´„/æˆåŠŸæŒ‡æ¨™ãŒæ˜è¨˜ã•ã‚Œã¦ã„ã‚‹ã€‚\n8. [ ] å¿…è¦ãªã‚‰è¿½åŠ å®Ÿè£…ã‚„ãƒ†ã‚¹ãƒˆçµæœã‚’è©²å½“ãƒšãƒ«ã‚½ãƒŠã§æç¤ºã—ã€ãƒ­ã‚°ã‚„diffã‚’æ·»ãˆãŸã€‚\n9. [ ] `runtime/` ä»¥ä¸‹ã®ãƒ­ã‚°ã‚„è£œåŠ©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ•´ç†ã—ã€ä¸è¦ã§ã‚ã‚Œã°å‰Šé™¤ã—ãŸï¼ˆè©³ç´°ã¯SKILL.mdã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‚ç…§ï¼‰ã€‚\n10. [ ] ä»¥ä¸Šã‚’æº€ãŸã—ãŸä¸Šã§ã€MAGI SYSTEM STATUSã‚’ã€ŒDELiberation COMPLETEã€ã¾ãŸã¯å¤±æ•—ç†ç”±ã«è¨­å®šã—ãŸã€‚\n",
        "plugins/kazuph-dotfiles/skills/magi/docs/OUTPUT_TEMPLATE.md": "```\nSituation Snapshot:\n- Goal: â€¦\n- Constraints: â€¦\n- Success Metric: â€¦\n\n## PHASE 1: INDEPENDENT MULTI-PERSPECTIVE ANALYSIS\n\n### MELCHIOR-01 (Claude) - Comprehensive Reasoning\n**Status**: ANALYSIS COMPLETE | **Approach**: Nuanced reasoning, ethics, long-term view\nActionable Insights:\n- Action â€“ Tool/Owner â€“ Success Check\n- Action â€“ Tool/Owner â€“ Success Check\n- Action â€“ Tool/Owner â€“ Success Check\n\n### BALTHASAR-02 (GPT-5/Codex) - Deep Research & Technical\n**Status**: ANALYSIS COMPLETE | **Approach**: Technical research, best practices\nActionable Insights:\n- Action â€“ Tool/Owner â€“ Success Check\n- Action â€“ Tool/Owner â€“ Success Check\n- Action â€“ Tool/Owner â€“ Success Check\n\n### CASPER-03 (Gemini) - Pattern Recognition & Synthesis\n**Status**: ANALYSIS COMPLETE | **Approach**: Pattern synthesis, alternative framing\nActionable Insights:\n- Action â€“ Tool/Owner â€“ Success Check\n- Action â€“ Tool/Owner â€“ Success Check\n- Action â€“ Tool/Owner â€“ Success Check\n\n## PHASE 2: FINAL SYNTHESIS & UNIFIED ACTION PLAN\n\n**Synthesis Engine**: CASPER-03 (Gemini) | **Integration Status**: COMPLETE\n\nUnified Action Plan:\n1. Step 1 â€“ Owner â€“ ETA â€“ Deliverable â€“ Verification method\n2. Step 2 â€“ Owner â€“ ETA â€“ Deliverable â€“ Verification method\n3. Step 3 â€“ Owner â€“ ETA â€“ Deliverable â€“ Verification method\n\nConsensus Highlights:\n- Shared agreement 1\n- Shared agreement 2\n\nConflicts / Trade-offs:\n- Issue â€“ MELCHIOR vs BALTHASAR vs CASPER â€“ Resolution / data needed\n\nRisk: Trigger â†’ Mitigation\nFollow-up Question: â€¦\n\nMAGI SYSTEM STATUS: DELIBERATION COMPLETE\n```\n",
        "plugins/kazuph-dotfiles/skills/magi/docs/PLAYBOOK.md": "# MAGI System Playbook\n\nMAGIã¯ Claude (MELCHIOR-01)ã€Codex/GPT-5 (BALTHASAR-02)ã€Gemini (CASPER-03) ã®3è¦–ç‚¹ã‚’åŒæ™‚ç¨¼åƒã•ã›ã€å¤šé¢çš„ãªåˆ†æã¨å®Ÿè£…ã‚’è¡Œã†ãŸã‚ã®é‹ç”¨æ‰‹é †ã§ã™ã€‚ã“ã“ã§ã¯ã‚¹ã‚­ãƒ«å…¨ä½“ã®è©³ç´°è¦ä»¶ã‚’ã¾ã¨ã‚ã¾ã™ã€‚\n\n## 1. ãƒšãƒ«ã‚½ãƒŠã¨å½¹å‰²\n\n| Persona | ã‚³ãƒ¼ãƒ«ã‚µã‚¤ãƒ³ | å¾—æ„åˆ†é‡ | ä»£è¡¨ã‚¿ã‚¹ã‚¯ |\n| --- | --- | --- | --- |\n| Claude | MELCHIOR-01 | å€«ç†è¦³ã‚’å«ã‚€åºƒç¾©ã®æ€è€ƒã€èª²é¡Œè¦ç´„ | ã‚´ãƒ¼ãƒ«æ•´ç†ã€åˆ¶ç´„æ˜è¨˜ã€æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ |\n| Codex / GPT-5 | BALTHASAR-02 | æŠ€è¡“èª¿æŸ»ã€æ¤œç´¢ã€å®Ÿè£…ã€ãƒ‡ãƒãƒƒã‚° | ãƒªã‚µãƒ¼ãƒã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã€æ¤œè¨¼ãƒ­ã‚°æç¤º |\n| Gemini | CASPER-03 | ãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜ã€çµ±åˆã€ä»£æ›¿æ¡ˆæç¤º | ç«¶åˆæ¡ˆæ¯”è¼ƒã€çµ±åˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³ç­–å®š |\n\n## 2. å®Ÿè¡Œãƒ•ãƒ­ãƒ¼\n\n1. **ã‚¤ãƒ³ãƒ†ãƒ³ãƒˆç¢ºèª**: äºˆç®—/åˆ¶ç´„/æˆåŠŸæŒ‡æ¨™ã‚’2æ–‡ã§ç¢ºèªã€‚æ¬ ã‘ã¦ã„ã‚Œã° Stop-if-Unclear ã§è³ªå•ã€‚\n2. **å¯ç”¨æ€§ãƒã‚§ãƒƒã‚¯**: Codex/GPT-5ç”¨ CLI ã¨ Gemini CLI ã‚’ä¸¦åˆ—èµ·å‹•ã§ãã‚‹ã‹äº‹å‰ã«ç–é€šç¢ºèªã€‚ï¼ˆã‚³ãƒãƒ³ãƒ‰ä¾‹ã¯å¾Œè¿°ï¼‰\n3. **ãƒ•ã‚§ãƒ¼ã‚º1 â€“ ç‹¬ç«‹åˆ†æ**:\n   - 3ãƒ¢ãƒ‡ãƒ«ã‚’åŒæ™‚ã«èµ°ã‚‰ã›ã€äº’ã„ã®çµæœã‚’å‚ç…§ã—ãªã„çŠ¶æ…‹ã§ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’å¾—ã‚‹ã€‚\n   - ãã‚Œãã‚Œã€ŒAction â€“ Tool/Owner â€“ Success Checkã€å½¢å¼ã®Bulletã‚’3ã¤ãšã¤æƒãˆã‚‹ã€‚\n4. **ãƒ•ã‚§ãƒ¼ã‚º2 â€“ çµ±åˆ**:\n   - GeminiãŒä¸­å¿ƒã¨ãªã‚Šã€å…±é€šç‚¹ã¨ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’è¨˜è¿°ã€‚\n   - æœ€ä½3ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’æŒã¤ã€ŒUnified Action Planã€ã‚’ä½œæˆã—ã€å„ã‚¹ãƒ†ãƒƒãƒ—ã«ETAã¨æ¤œè¨¼æ–¹æ³•ã‚’ç´ä»˜ã‘ã€‚\n5. **ãƒªã‚¹ã‚¯/ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—**: ãƒªã‚¹ã‚¯ã¯ã€Œãƒˆãƒªã‚¬ãƒ¼ â†’ å¯¾å¿œç­–ã€ã§1è¡Œã€ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—è³ªå•ã¯1ä»¶ã®ã¿ã€‚\n6. **ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯**: `docs/CHECKLIST.md`ã‚’å‚ç…§ã—ã¦æå‡ºå‰ã«å¿…ãšãƒã‚§ãƒƒã‚¯ã€‚\n\n## 3. Stop-if-Unclear ãƒ«ãƒ¼ãƒ«\n\n- ã‚´ãƒ¼ãƒ«/åˆ¶ç´„/æˆåŠŸæŒ‡æ¨™ã®ã„ãšã‚Œã‹ãŒæ¬ ã‘ã¦ã„ã‚‹å ´åˆã€å³åº§ã« `Need more detail` ã‚’è¿”ã—ã€æ¬ æé …ç›®ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’æç¤ºã€‚\n- æ›–æ˜§ã•ãŒè§£æ¶ˆã•ã‚Œã‚‹ã¾ã§ MAGI å®Ÿè¡Œã‚’é–‹å§‹ã—ãªã„ã€‚\n\n## 4. CLIèµ·å‹•ãƒ«ãƒ¼ãƒ«\n\n| Persona | ä»£è¡¨ã‚³ãƒãƒ³ãƒ‰ | å‚™è€ƒ |\n| --- | --- | --- |\n| Codex/GPT-5 | `outfile=$(mktemp -t codex); script -q /dev/null codex --sandbox workspace-write --config sandbox_workspace_write.network_access=true --dangerously-bypass-approvals-and-sandbox exec --skip-git-repo-check -o \"$outfile\" \"<prompt>\" >/dev/null 2>&1; cat \"$outfile\"` | å¤±æ•—ã—ãŸå ´åˆã¯è¨±å¯ã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ CLI ã‚’é€Ÿã‚„ã‹ã«å†å®Ÿè¡Œã—ã€ãã‚Œã§ã‚‚ä¸å¯ãªã‚‰ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­æ­¢ã€‚ |\n| Gemini | `mise exec -- gemini --approval-mode=yolo \"<prompt>\"` | CodexåŒæ§˜ã«è¤‡æ•°ãƒ‘ã‚¹ãŒæº–å‚™ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚ |\n\nä¸¡è€…ã®CLIã‚’åŒæ™‚èµ·å‹•ã—ã€ã‚·ãƒªã‚¢ãƒ«ãªé †ç•ªå¾…ã¡ã«ã—ãªã„ã€‚ã©ã¡ã‚‰ã‹ãŒè½ã¡ãŸã‚‰ MAGI å…¨ä½“ã‚’ä¸­æ–­ã—ã€çŠ¶æ³ã‚’å ±å‘Šã™ã‚‹ã€‚\n\n## 5. ã‚¿ã‚¹ã‚¯åˆ†é¡ã®åˆ¤æ–­åŸºæº–\n\n- **MAGIå¯¾è±¡**: å»ºç¯‰çš„æ„æ€æ±ºå®šã€è¤‡é›‘ãªæ¯”è¼ƒèª¿æŸ»ã€è¤‡æ•°ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ãŒé–¢ä¸ã™ã‚‹æ–¹é‡ç­–å®šã€‚\n- **éå¯¾è±¡**: å˜ç´”ãªQ&Aã€ãƒ†ãƒ³ãƒ—ãƒ¬åŸ‹ã‚ã€çŸ­ã„ã‚³ãƒ¼ãƒ‰ä¿®æ­£ï¼ˆâ†’é€šå¸¸Claudeã§å¯¾å¿œï¼‰ã€‚\n\n## 6. ãƒ­ã‚°ã¨è¨¼è·¡\n\n- ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å„å‡ºåŠ›ã¯ `runtime/magi-<timestamp>-persona.log` ã¸ä¿å­˜ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ï¼ˆä¿å­˜å…ˆã¯å„ã‚¿ã‚¹ã‚¯ã§é©å®œæ±ºã‚ã‚‹ï¼‰ã€‚\n- å®Œäº†å¾Œã¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³ã‚’å ±å‘Šã—ã€`docs/CHECKLIST.md`ã«å¾“ã£ãŸè‡ªå·±æ¤œè¨¼çµæœã‚’æ·»ãˆã‚‹ã€‚\n\n## 7. ãƒ•ã‚§ã‚¤ãƒ«ã‚ªãƒ¼ãƒãƒ¼\n\n- Codex ã¾ãŸã¯ Gemini ã©ã¡ã‚‰ã‹ä¸€æ–¹ã§ã‚‚æ°¸ç¶šä¸å¯ãªã‚‰å³ Abortã€‚ã€ŒClaudeå˜ç‹¬ã§ç¶™ç¶šã€ã¯ç¦æ­¢ã€‚\n- CLIãƒ­ã‚°ã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã”ã¨ã«ä¿å­˜ã—ã€å†è©¦è¡Œå›æ•°ã¨ç†ç”±ã‚’å ±å‘Šã™ã‚‹ã€‚\n\n## 8. é–‹ç™ºã‚¿ã‚¹ã‚¯æ™‚ã®ç‰¹å‰‡\n\n- ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ/ä¿®æ­£ã¯ã€è©²å½“ãƒšãƒ«ã‚½ãƒŠï¼ˆå¤šãã¯Codex/Geminiï¼‰ãŒ `apply_patch` ç­‰ã®å…·ä½“çš„ãªdiffã‚’å‡ºåŠ›ã€‚\n- ãƒ†ã‚¹ãƒˆã¯è©²å½“ãƒšãƒ«ã‚½ãƒŠãŒå®Ÿè¡Œã—ã€ãƒ­ã‚°ã‚’æ·»ä»˜ã€‚Claudeã¯ãƒ¬ãƒ“ãƒ¥ãƒ¼å½¹ã«å¾¹ã™ã‚‹ã€‚\n\nè©³ç´°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ `docs/OUTPUT_TEMPLATE.md` ã‚’å‚ç…§ã€‚\n",
        "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/CLOUDFLARE-DEPLOY.md": "# Cloudflare Workers ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰\n\nMoonBit + Luna UIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Cloudflare Workersã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ‰‹é †ã€‚\n\n## å‰ææ¡ä»¶\n\n- Cloudflareã‚¢ã‚«ã‚¦ãƒ³ãƒˆ\n- `wrangler` CLIï¼ˆ`pnpm add -D wrangler`ï¼‰\n- D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆå¿…è¦ãªå ´åˆï¼‰\n\n## wrangler.jsonè¨­å®š\n\n```json\n{\n  \"name\": \"my-app\",\n  \"main\": \"src/worker.ts\",\n  \"compatibility_date\": \"2024-12-01\",\n  \"compatibility_flags\": [\"nodejs_compat\"],\n  \"build\": {\n    \"command\": \"pnpm build\",\n    \"watch_dir\": [\"src\", \"app\"]\n  },\n  \"assets\": {\n    \"directory\": \"./static\"\n  },\n  \"d1_databases\": [\n    {\n      \"binding\": \"DB\",\n      \"database_name\": \"my-db\",\n      \"database_id\": \"your-database-id\"\n    }\n  ]\n}\n```\n\n### é‡è¦ãªè¨­å®š\n\n| é …ç›® | èª¬æ˜ |\n|-----|------|\n| `main` | Workerã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆTypeScriptï¼‰ |\n| `compatibility_flags` | `nodejs_compat` ã§Node.js APIä½¿ç”¨å¯èƒ½ã« |\n| `build.command` | ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰ |\n| `build.watch_dir` | é–‹ç™ºæ™‚ã®ç›£è¦–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª |\n| `assets.directory` | é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡å…ƒ |\n\n## Worker ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ\n\n```typescript\n// src/worker.ts\nimport { Hono } from 'hono';\nimport { basicAuth } from 'hono/basic-auth';\nimport { timingSafeEqual } from 'hono/utils/buffer';\nimport { configure_app } from '../target/js/release/build/__gen__/server/server.js';\n\ntype Env = {\n  DB: D1Database;\n  BASIC_AUTH_USER: string;\n  BASIC_AUTH_PASS: string;\n};\n\nconst app = new Hono<{ Bindings: Env }>();\n\n// Basic Authï¼ˆå¿…è¦ãªå ´åˆï¼‰\napp.use('/admin/*', basicAuth({\n  verifyUser: async (username, password, ctx) => {\n    const userMatch = await timingSafeEqual(username, ctx.env.BASIC_AUTH_USER);\n    const passMatch = await timingSafeEqual(password, ctx.env.BASIC_AUTH_PASS);\n    return userMatch && passMatch;\n  },\n}));\n\n// MoonBit/Lunaãƒ«ãƒ¼ãƒˆè¨­å®š\nconfigure_app(app);\n\nexport default {\n  fetch: async (request: Request, env: Env, ctx: ExecutionContext) => {\n    // D1ã‚’globalThisã«è¨­å®šï¼ˆMoonBit FFIã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ï¼‰\n    (globalThis as any).__D1_DB = env.DB;\n    return app.fetch(request, env, ctx);\n  }\n};\n```\n\n## ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹\n\n```bash\npnpm build\n```\n\nå†…éƒ¨ã§å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†ï¼š\n1. `sol generate` - `__gen__` ã¨ `.sol` ã‚’ç”Ÿæˆ\n2. `moon build --target js` - MoonBitã‚’JSã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«\n3. `patch-for-cloudflare.js` - CF Workersç”¨ã«ãƒ‘ãƒƒãƒ\n4. `bundle-client.js` - Island Componentsã‚’ãƒãƒ³ãƒ‰ãƒ«\n\n## D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹\n\n### ä½œæˆ\n\n```bash\nwrangler d1 create my-db\n```\n\n### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³\n\n```bash\n# ãƒ­ãƒ¼ã‚«ãƒ«\nwrangler d1 execute my-db --local --file=./migrations/001_init.sql\n\n# ãƒªãƒ¢ãƒ¼ãƒˆ\nwrangler d1 execute my-db --remote --file=./migrations/001_init.sql\n```\n\n### SQLãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¾‹\n\n```sql\n-- migrations/001_init.sql\nCREATE TABLE IF NOT EXISTS posts (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  title TEXT NOT NULL,\n  slug TEXT NOT NULL UNIQUE,\n  content TEXT NOT NULL,\n  content_html TEXT NOT NULL,\n  excerpt TEXT,\n  status TEXT DEFAULT 'draft',\n  published_at DATETIME,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE INDEX IF NOT EXISTS idx_posts_slug ON posts(slug);\nCREATE INDEX IF NOT EXISTS idx_posts_status ON posts(status);\n```\n\n## ç’°å¢ƒå¤‰æ•°\n\n### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ï¼ˆ.dev.varsï¼‰\n\n```\nBASIC_AUTH_USER=admin\nBASIC_AUTH_PASS=password123\n```\n\n### æœ¬ç•ªç”¨ï¼ˆCloudflare Dashboard ã¾ãŸã¯ CLIï¼‰\n\n```bash\nwrangler secret put BASIC_AUTH_USER\nwrangler secret put BASIC_AUTH_PASS\n```\n\n## ãƒ‡ãƒ—ãƒ­ã‚¤\n\n```bash\n# ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆãƒ†ã‚¹ãƒˆç”¨URLç™ºè¡Œï¼‰\nwrangler deploy --dry-run\n\n# æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤\nwrangler deploy\n```\n\n## é–‹ç™º\n\n```bash\n# ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚µãƒ¼ãƒãƒ¼\nwrangler dev\n\n# ãƒ“ãƒ«ãƒ‰ç›£è¦–ä»˜ã\nwrangler dev --local\n```\n\n## é™çš„ãƒ•ã‚¡ã‚¤ãƒ«\n\n`static/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã€‚\n\n```\nstatic/\nâ”œâ”€â”€ loader.js        # Island Componentãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ãƒ¼ãƒ€ãƒ¼\nâ”œâ”€â”€ sw.js            # Service Workerï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰\nâ”œâ”€â”€ _headers         # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š\nâ””â”€â”€ *.js             # ãƒãƒ³ãƒ‰ãƒ«ã•ã‚ŒãŸIsland Components\n```\n\n### _headersï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®šï¼‰\n\n```\n/*.js\n  Cache-Control: public, max-age=31536000, immutable\n\n/*.wasm\n  Cache-Control: public, max-age=31536000, immutable\n\n/*.css\n  Cache-Control: public, max-age=31536000, immutable\n```\n\n## .gitignoreè¨­å®š\n\n```\n# Sol/MoonBitç”Ÿæˆç‰©\n.sol/\napp/__gen__/\ntarget/\n\n# ãƒãƒ³ãƒ‰ãƒ«å‡ºåŠ›ï¼ˆãƒ“ãƒ«ãƒ‰æ™‚ã«ç”Ÿæˆï¼‰\nstatic/markdown_editor.js\nstatic/markdown_editor.js.map\n\n# Cloudflare\n.wrangler/\n\n# ç’°å¢ƒå¤‰æ•°\n.dev.vars\n```\n\n## ã‚ˆãã‚ã‚‹å•é¡Œ\n\n### ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ãƒ“ãƒ«ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œãªã„\n\n`wrangler.json` ã« `build.command` ã‚’è¨­å®šï¼š\n\n```json\n{\n  \"build\": {\n    \"command\": \"pnpm build\"\n  }\n}\n```\n\n### ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã‚¨ãƒ©ãƒ¼\n\nä¸€éƒ¨ã®NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯Cloudflare Workersã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—åˆ¶é™ã«å¼•ã£ã‹ã‹ã‚‹ã€‚\n\nå¯¾ç­–ï¼š\n- `scripts/patch-for-cloudflare.js` ã§ãƒ‘ãƒƒãƒ\n- å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆãƒãƒ³ãƒ‰ãƒ©å†…ã§ `await import()`ï¼‰\n- Lazy initialization\n\n### MIMEã‚¿ã‚¤ãƒ—ã‚¨ãƒ©ãƒ¼\n\n`worker.ts` ã§JSãƒ•ã‚¡ã‚¤ãƒ«ã®Content-Typeã‚’ä¿®æ­£ï¼š\n\n```typescript\nif (url.pathname.endsWith('.js')) {\n  const headers = new Headers(response.headers);\n  if (response.headers.get('content-type')?.includes('text/plain')) {\n    headers.set('content-type', 'application/javascript');\n  }\n  return new Response(response.body, { ...response, headers });\n}\n```\n\n### Server Actions 403ã‚¨ãƒ©ãƒ¼\n\n`action_registry()` ã® `allowed_origins` ã«æœ¬ç•ªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¿½åŠ ï¼š\n\n```moonbit\n@action.ActionRegistry::new(allowed_origins=[\n  \"http://localhost:8787\",\n  \"https://your-app.workers.dev\",  // â† è¿½åŠ \n])\n```\n\n## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–\n\n### Early Hints\n\n```typescript\nconst EARLY_HINTS_LINKS = [\n  '</loader.js>; rel=preload; as=script',\n  '<https://fonts.googleapis.com>; rel=preconnect',\n].join(', ');\n\n// HTMLãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«Linkãƒ˜ãƒƒãƒ€ãƒ¼è¿½åŠ \nif (response.headers.get('content-type')?.includes('text/html')) {\n  headers.set('Link', EARLY_HINTS_LINKS);\n}\n```\n\n### ãƒ•ã‚©ãƒ³ãƒˆãƒ—ãƒªãƒ­ãƒ¼ãƒ‰\n\nROOTãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ï¼š\n\n```html\n<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n<link rel=\"preload\" href=\"https://fonts.googleapis.com/css2?...\" as=\"style\">\n```\n\n### Service Worker\n\nã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨ã® `static/sw.js` ã‚’é…ç½®ã—ã€\nROOTãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ç™»éŒ²ï¼š\n\n```html\n<script>\nif('serviceWorker'in navigator)\n  navigator.serviceWorker.register('/sw.js')\n</script>\n```\n",
        "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/ECOSYSTEM.md": "# MoonBit ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‚¬ã‚¤ãƒ‰\n\nMoonBité–‹ç™ºã§åˆ©ç”¨å¯èƒ½ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ»ãƒ„ãƒ¼ãƒ«ã®é¸æŠã‚¬ã‚¤ãƒ‰ã€‚\n\n## é–‹ç™ºé–‹å§‹æ™‚ã«å¿…ãšå®Ÿè¡Œã™ã‚‹ã“ã¨\n\n**MoonBitã¯æ–°ã—ã„è¨€èªã®ãŸã‚ã€1-2é€±é–“ã§æ–°ã—ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒç™»å ´ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚**\n\n### æ¯å›ã®æ¤œç´¢ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ\n\né–‹ç™ºã‚’å§‹ã‚ã‚‹å‰ã«ã€ä»¥ä¸‹ã‚’æ¤œç´¢ã—ã¦ãã ã•ã„:\n\n```\n1. GitHub: \"moonbit\" language:moonbit (æœ€è¿‘æ›´æ–°é †)\n2. GitHub: mizchi ã®ãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§ (moonbitã§ãƒ•ã‚£ãƒ«ã‚¿)\n3. mooncakes.io (å…¬å¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ¬ã‚¸ã‚¹ãƒˆãƒª)\n4. awesome-moonbit ãƒªãƒã‚¸ãƒˆãƒª\n```\n\n### ä¸»è¦ãƒªã‚½ãƒ¼ã‚¹ï¼ˆ2026å¹´1æœˆæ™‚ç‚¹ï¼‰\n\n| ãƒªã‚½ãƒ¼ã‚¹ | URL | ã‚¹ã‚¿ãƒ¼æ•° | æœ€çµ‚æ›´æ–° | èª¬æ˜ |\n|---------|-----|---------|---------|------|\n| luna.mbt | https://github.com/mizchi/luna.mbt | 129 | 2026/1 | Luna UI / Sol Framework |\n| js.mbt | https://github.com/mizchi/js.mbt | 60 | 2026/1 | JS FFIãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚° |\n| npm_typed.mbt | https://github.com/mizchi/npm_typed.mbt | - | 2026/1 | NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°é›† |\n| moonyacc | https://github.com/mizchi/moonyacc | - | 2026/1/10 | LR(1)ãƒ‘ãƒ¼ã‚µãƒ¼ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ |\n| wasm5 | https://github.com/nicku33/wasm5 | - | 2026/1/1 | MoonBitè£½Wasm VM |\n| rabbit-tea | https://github.com/nicku33/rabbit-tea | - | - | TEA UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |\n| mizchiæ°ãƒªãƒã‚¸ãƒˆãƒª | https://github.com/mizchi?tab=repositories&q=moonbit | - | - | **æœ€é‡è¦** - å…¨ãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§ |\n| mooncakes.io | https://mooncakes.io/ | - | - | å…¬å¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ¬ã‚¸ã‚¹ãƒˆãƒª |\n| awesome-moonbit | https://github.com/moonbitlang/awesome-moonbit | - | - | ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚¹ãƒˆ |\n| MoonBitå…¬å¼ | https://github.com/moonbitlang | - | - | ã‚³ã‚¢ãƒ»æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª |\n\n### ãªãœmizchiæ°ã®ãƒªãƒã‚¸ãƒˆãƒªãŒé‡è¦ã‹\n\n- JS FFIãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆ`js.mbt`ï¼‰ã‚’æä¾› â†’ **FFIè‡ªå‰å®Ÿè£…ä¸è¦**\n- 50+ã®NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆ`npm_typed`ï¼‰â†’ **åˆ¥ãƒªãƒã‚¸ãƒˆãƒªã«åˆ†é›¢**\n- Viteçµ±åˆï¼ˆ`vite-plugin-moonbit`ï¼‰ã§HMRå¯¾å¿œ\n- Luna UI / Sol Frameworkã®é–‹ç™ºè€…\n- ç©æ¥µçš„ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ»æ–°æ©Ÿèƒ½è¿½åŠ ä¸­\n- **æ–°è¦**: moonyaccï¼ˆãƒ‘ãƒ¼ã‚µãƒ¼ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼‰ã€wasm5ï¼ˆWasm VMï¼‰ãªã©ä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ„ãƒ¼ãƒ«ã‚‚é–‹ç™º\n\n## mizchiæ°ã®ä¸»è¦ãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§\n\n### ã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n\n| ãƒªãƒã‚¸ãƒˆãƒª | èª¬æ˜ | ç”¨é€” |\n|-----------|------|------|\n| **js.mbt** | JS FFIãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚° | å…¨MoonBit JSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åŸºç›¤ |\n| **luna.mbt** | Luna UI / Sol Framework | Cloudflare Workerså‘ã‘ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ |\n| **npm_typed.mbt** | NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°é›† | 50+ã®NPMãƒ©ã‚¤ãƒ–ãƒ©ãƒªåˆ©ç”¨ |\n| **vite-plugin-moonbit** | Viteçµ±åˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ | HMRã€ãƒ“ãƒ«ãƒ‰æœ€é©åŒ– |\n\n### è¨€èªãƒ„ãƒ¼ãƒ«\n\n| ãƒªãƒã‚¸ãƒˆãƒª | èª¬æ˜ | ç”¨é€” |\n|-----------|------|------|\n| **moonyacc** | LR(1)ãƒ‘ãƒ¼ã‚µãƒ¼ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ | DSLãƒ»è¨€èªå®Ÿè£…ã€æ§‹æ–‡è§£æ |\n| **wasm5** | MoonBitè£½Wasm VM | Wasmãƒ©ãƒ³ã‚¿ã‚¤ãƒ å®Ÿè£… |\n| **core** | MoonBitã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ”¹å–„ | æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ‹¡å¼µ |\n\n### UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯\n\n| ãƒªãƒã‚¸ãƒˆãƒª | èª¬æ˜ | ç”¨é€” |\n|-----------|------|------|\n| **rabbit-tea** | TEA (The Elm Architecture) UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | ã‚·ãƒ³ãƒ—ãƒ«ãªçŠ¶æ…‹ç®¡ç†UI |\n\n## é–‹ç™ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®é¸æŠ\n\n### åˆ¤æ–­ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ\n\n```\nä½œã‚ŠãŸã„ã‚‚ã®ã¯ï¼Ÿ\nâ”œâ”€ Cloudflare Workerså°‚ç”¨ã‚¢ãƒ—ãƒª\nâ”‚   â””â”€ ãƒ•ãƒ«MoonBitã§æ›¸ããŸã„ï¼Ÿ\nâ”‚       â”œâ”€ Yes â†’ Luna UI (Sol Framework)\nâ”‚       â””â”€ No â†’ vite-plugin-moonbit + Hono\nâ”‚\nâ”œâ”€ æ—¢å­˜Viteãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®è¿½åŠ \nâ”‚   â””â”€ vite-plugin-moonbit\nâ”‚\nâ”œâ”€ React/Vueã¨ä½µç”¨\nâ”‚   â””â”€ vite-plugin-moonbit\nâ”‚\nâ”œâ”€ è¨€èªãƒ»DSLå®Ÿè£…\nâ”‚   â””â”€ moonyacc (ãƒ‘ãƒ¼ã‚µãƒ¼ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼)\nâ”‚\nâ”œâ”€ ã‚·ãƒ³ãƒ—ãƒ«ãªTEAã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£\nâ”‚   â””â”€ rabbit-tea\nâ”‚\nâ””â”€ WASM-GCã‚¿ãƒ¼ã‚²ãƒƒãƒˆå¿…é ˆ\n    â””â”€ vite-plugin-moonbit\n```\n\n### æ¯”è¼ƒè¡¨\n\n| è¦³ç‚¹ | vite-plugin-moonbit | Luna UI (Sol Framework) |\n|-----|---------------------|------------------------|\n| **ä½œè€…** | [mizchi](https://github.com/mizchi) | mizchi (MoonBitå…¬å¼å”åŠ›) |\n| **HMR** | Viteãƒã‚¤ãƒ†ã‚£ãƒ– | æ‰‹å‹•ãƒªãƒ“ãƒ«ãƒ‰ |\n| **ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ** | JS / WASM-GCä¸¡å¯¾å¿œ | JSï¼ˆCF Workerså‘ã‘ï¼‰ |\n| **SSR** | è‡ªå‰å®Ÿè£… | Solæä¾› |\n| **SSG** | è‡ªå‰å®Ÿè£… | Solæä¾› (2026æ–°æ©Ÿèƒ½) |\n| **ISR** | ãªã— | Solæä¾› (2026æ–°æ©Ÿèƒ½) |\n| **Island Architecture** | è‡ªå‰å®Ÿè£… | Luna UIæä¾› |\n| **å­¦ç¿’ã‚³ã‚¹ãƒˆ** | ä½ | é«˜ï¼ˆSolç‹¬è‡ªæ¦‚å¿µï¼‰ |\n| **ãƒ‡ãƒãƒƒã‚°** | å®¹æ˜“ | è¤‡é›‘ï¼ˆç”Ÿæˆã‚³ãƒ¼ãƒ‰å¤šã„ï¼‰ |\n\n## å¿…é ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n\n### mizchi/js ï¼ˆJS FFIãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼‰\n\n**ã“ã‚Œã‚’ä½¿ã‚ãªã„ã¨è»Šè¼ªã®å†ç™ºæ˜ã«ãªã‚‹ï¼**\n\n```bash\nmoon add mizchi/js\n```\n\næä¾›API:\n- **å‹ã‚·ã‚¹ãƒ†ãƒ **: `Any`, `Nullable[T]`, `Promise[T]`, `Union2-5`\n- **ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ“ä½œ**: ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚¢ã‚¯ã‚»ã‚¹ã€ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—\n- **éåŒæœŸ**: `run_async`, `suspend`, Promiseæ“ä½œ\n- **Web API**: fetch, Request/Response, URL, Blob, WebSocket\n- **DOM**: å®Œå…¨ãªDOMæ“ä½œAPI\n- **Node.js**: fs, path, process, child_process\n\nGitHub: https://github.com/mizchi/js.mbt\n\n### mizchi/npm_typed ï¼ˆNPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼‰\n\n**æ³¨æ„: 2025å¹´å¾ŒåŠã« js.mbt ã‹ã‚‰åˆ¥ãƒªãƒã‚¸ãƒˆãƒªã«åˆ†é›¢ã•ã‚Œã¾ã—ãŸã€‚**\n\n50ä»¥ä¸Šã®NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®MoonBitãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°:\n\n| ã‚«ãƒ†ã‚´ãƒª | ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ç”¨é€”ä¾‹ |\n|---------|----------|--------|\n| **Web Framework** | Hono, Better Auth | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° |\n| **AI/LLM** | Vercel AI SDK, **MCP SDK**, Claude Code SDK | AIçµ±åˆ |\n| **Database** | PGLite, DuckDB, Drizzle ORM, pg | ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ– |\n| **Validation** | **Zod**, AJV | ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |\n| **Testing** | **Vitest**, **Playwright**, Puppeteer | ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ– |\n| **UI** | **React**, Preact, Ink | UIãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° |\n| **Utilities** | date-fns, chalk, dotenv, yargs | æ±ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ |\n| **Build Tools** | esbuild, terser | ãƒ“ãƒ«ãƒ‰ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ |\n| **Cloudflare** | Workers types, D1, KV | CF Workersçµ±åˆ |\n\n#### ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ä½¿ç”¨ä¾‹\n\n```moonbit\n// Honoã‚’ä½¿ã£ãŸã‚µãƒ¼ãƒãƒ¼\nfn create_app() -> @hono.Hono {\n  let app = @hono.Hono::new()\n  app.get(\"/\", fn(c) { c.text(\"Hello from MoonBit!\") })\n  app\n}\n\n// Zodã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\nfn validate_user() -> Unit {\n  let schema = @zod.object({\n    \"name\": @zod.string().min(1),\n    \"email\": @zod.string().email(),\n  })\n  let result = schema.safeParse(input)\n}\n\n// Playwrightã§ãƒ†ã‚¹ãƒˆ\ntest \"e2e test\" {\n  let browser = @playwright.chromium.launch()\n  let page = browser.new_page()\n  page.goto(\"http://localhost:3000\")\n  page.click(\"button#submit\")\n}\n```\n\nGitHub: https://github.com/mizchi/npm_typed.mbt\n\n## Luna UI (luna.mbt)\n\nSolid.js/Qwikã«ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ã•ã‚ŒãŸãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª:\n\n### ã‚³ã‚¢æ©Ÿèƒ½\n\n- **Fine-Grained Reactivity**: Signal, effect, memo\n- **Island Architecture**: éƒ¨åˆ†ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³\n- **SSR**: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ\n- **ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥**: load, idle, visible, media\n\n### 2026å¹´æ–°æ©Ÿèƒ½\n\n| æ©Ÿèƒ½ | èª¬æ˜ |\n|------|------|\n| **SSG** | é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆ - ãƒ“ãƒ«ãƒ‰æ™‚ã«HTMLã‚’äº‹å‰ç”Ÿæˆ |\n| **ISR** | Incremental Static Regeneration - æ®µéšçš„ãªå†ç”Ÿæˆ |\n| **CSS Utilities** | ãƒ“ãƒ«ãƒˆã‚¤ãƒ³CSSãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹ |\n| **metaFiles** | sitemap.xml, feed.xml, llms.txt ã®è‡ªå‹•ç”Ÿæˆ |\n\n### Sol Frameworkæ§‹æˆ\n\n```\napp/\nâ”œâ”€â”€ server/\nâ”‚   â”œâ”€â”€ routes.mbt      # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©\nâ”‚   â”œâ”€â”€ middleware.mbt  # ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼ˆ@mwï¼‰\nâ”‚   â””â”€â”€ db.mbt          # D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ\nâ”œâ”€â”€ client/\nâ”‚   â”œâ”€â”€ islands/        # Island Components\nâ”‚   â””â”€â”€ components/     # å…±æœ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\nâ””â”€â”€ shared/\n    â””â”€â”€ types.mbt       # å…±æœ‰å‹å®šç¾©\n```\n\nGitHub: https://github.com/mizchi/luna.mbt\n\n## ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯\n\n### ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰\n\n```\n        /\\\n       /  \\   E2E Tests (Playwright)\n      /    \\  - ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•åŒ–\n     /------\\ - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªæ¤œè¨¼\n    /        \\\n   / Integration \\ Integration Tests\n  /    Tests      \\ - APIçµ±åˆãƒ†ã‚¹ãƒˆ\n /                 \\ - D1/KVã¨ã®çµåˆ\n/___________________\\\n      Unit Tests      Unit Tests (Vitest/moon test)\n                      - é–¢æ•°å˜ä½“ãƒ†ã‚¹ãƒˆ\n                      - ãƒ­ã‚¸ãƒƒã‚¯æ¤œè¨¼\n```\n\n### MoonBitã§ã®ãƒ†ã‚¹ãƒˆå®Ÿè£…\n\n#### Unit Test (moon test)\n\n```moonbit\ntest \"add function\" {\n  assert_eq!(add(1, 2), 3)\n}\n\ntest \"parse markdown\" {\n  let result = @markdown.parse(\"# Hello\")\n  assert_eq!(result.contains(\"<h1>\"), true)\n}\n```\n\n#### Integration Test (Vitest ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°)\n\n```moonbit\n// npm_typedã®Vitestãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’ä½¿ç”¨\nfn setup_test_suite() -> Unit {\n  @vitest.describe(\"API Tests\", fn() {\n    @vitest.it(\"should return user data\", async fn() {\n      let response = @fetch.fetch(\"/api/users/1\")\n      let data = response.json()\n      @vitest.expect(data.get(\"name\")).to_be_defined()\n    })\n  })\n}\n```\n\n#### E2E Test (Playwright ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°)\n\n```moonbit\n// npm_typedã®Playwrightãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’ä½¿ç”¨\nfn run_e2e_tests() -> Unit {\n  @playwright.test(\"user registration flow\", async fn(ctx) {\n    let page = ctx.page\n    page.goto(\"http://localhost:3000/register\")\n    page.fill(\"#email\", \"test@example.com\")\n    page.fill(\"#password\", \"password123\")\n    page.click(\"button[type=submit]\")\n    @playwright.expect(page).to_have_url(\"/dashboard\")\n  })\n}\n```\n\n### ãƒ†ã‚¹ãƒˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹\n\n| ãƒ¬ãƒ™ãƒ« | ãƒ„ãƒ¼ãƒ« | å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚° | ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ |\n|--------|--------|---------------|---------------|\n| Unit | moon test | ã‚³ãƒŸãƒƒãƒˆæ¯ | 80%+ |\n| Integration | Vitest | PRæ¯ | ä¸»è¦ãƒ‘ã‚¹ |\n| E2E | Playwright | ãƒ‡ãƒ—ãƒ­ã‚¤å‰ | ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹ |\n\n## vite-plugin-moonbit\n\n### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n```bash\nnpm install -D vite-plugin-moonbit\n```\n\n### è¨­å®š\n\n```typescript\n// vite.config.ts\nimport { defineConfig } from 'vite';\nimport { moonbit } from 'vite-plugin-moonbit';\n\nexport default defineConfig({\n  plugins: [\n    moonbit({\n      target: \"js\",  // ã¾ãŸã¯ \"wasm-gc\"\n      watch: true    // HMRæœ‰åŠ¹åŒ–\n    })\n  ],\n});\n```\n\n### ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ\n\n```bash\nnpx tiged github:mizchi/vite-plugin-moonbit/examples/luna_project myapp\ncd myapp\nmoon update && moon install\nnpm install\nnpx vite dev\n```\n\nGitHub: https://github.com/mizchi/vite-plugin-moonbit\nè§£èª¬è¨˜äº‹: https://zenn.dev/mizchi/articles/moonbit-vite-plugin\n\n## ã‚ˆãã‚ã‚‹å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³\n\n### FFIã‚’è‡ªå‰ã§æ›¸ã\n\n```moonbit\n// æ‚ªã„ä¾‹: è‡ªå‰ã§FFIå®šç¾©\nextern \"js\" fn fetch_json(url : String) -> @js.Any = #| ...\n```\n\n```moonbit\n// è‰¯ã„ä¾‹: mizchi/jsã‚’ä½¿ç”¨\nlet response = @js.fetch(url)\nlet json = response.json()\n```\n\n### Promiseã‚’è‡ªå‰å®Ÿè£…\n\n```moonbit\n// æ‚ªã„ä¾‹: Promiseå‹ã‚’è‡ªä½œ\ntype MyPromise\n```\n\n```moonbit\n// è‰¯ã„ä¾‹: mizchi/jsã®Promise[T]ã‚’ä½¿ã†\nlet result : @js.Promise[String] = async_operation()\n```\n\n### npm_typedã«ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å†å®Ÿè£…\n\n```moonbit\n// æ‚ªã„ä¾‹: Zodãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’è‡ªä½œ\nextern \"js\" fn zod_string() -> @js.Any = #| ...\n```\n\n```moonbit\n// è‰¯ã„ä¾‹: npm_typedã‚’ä½¿ã†\nmoon add mizchi/npm_typed\n// â†’ @zod, @hono, @vitest ç­‰ãŒä½¿ãˆã‚‹\n```\n\n## å‚è€ƒãƒªã‚½ãƒ¼ã‚¹\n\n- [mizchiæ°ã®MoonBitãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§](https://github.com/mizchi?tab=repositories&q=moonbit)\n- [awesome-moonbit](https://github.com/moonbitlang/awesome-moonbit)\n- [MoonBitå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.moonbitlang.com/)\n- [mizchiæ°ã®MoonBitçŸ¥è¦‹ã¾ã¨ã‚](https://gist.github.com/mizchi/aef3fa9977c8832148b00145a1d20f4b)\n- [Luna UI GitHubãƒªãƒã‚¸ãƒˆãƒª](https://github.com/mizchi/luna.mbt) (129 stars)\n- [js.mbt GitHubãƒªãƒã‚¸ãƒˆãƒª](https://github.com/mizchi/js.mbt) (60 stars)\n",
        "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/ISLAND-COMPONENTS.md": "# Island Components ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\nLuna UIã«ãŠã‘ã‚‹Island Architectureå®Ÿè£…ã®è©³ç´°ã‚¬ã‚¤ãƒ‰ã€‚\n\n## Island Architectureã¨ã¯\n\n- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆSSRï¼‰ãŒãƒ™ãƒ¼ã‚¹\n- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªéƒ¨åˆ†ã®ã¿ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³\n- æ®‹ã‚Šã¯é™çš„HTMLï¼ˆJSä¸è¦ï¼‰\n\n## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ\n\n```\napp/\nâ”œâ”€â”€ client/\nâ”‚   â”œâ”€â”€ _using.mbt       # å…±é€šã‚¤ãƒ³ãƒãƒ¼ãƒˆ\nâ”‚   â””â”€â”€ my_component.mbt # Island Componentå®šç¾©\nâ””â”€â”€ server/\n    â””â”€â”€ routes.mbt       # ã‚µãƒ¼ãƒãƒ¼å´ã§Islandã‚’åŸ‹ã‚è¾¼ã¿\n```\n\n## Island Componentå®šç¾©\n\n### åŸºæœ¬æ§‹é€ \n\n```moonbit\n///| Propså‹å®šç¾©ï¼ˆToJson, FromJsonãŒå¿…é ˆï¼‰\npub(all) struct MyComponentProps {\n  initial_value : String\n  action_url : String\n} derive(ToJson, FromJson)\n\n///| Componentæœ¬ä½“\npub fn my_component(props : MyComponentProps) -> DomNode {\n  // ã‚·ã‚°ãƒŠãƒ«ï¼ˆãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªçŠ¶æ…‹ï¼‰\n  let value = @signal.signal(props.initial_value)\n  let is_loading = @signal.signal(false)\n\n  // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©\n  let on_click : @element.ClickHandler = fn(_e) {\n    value.set(\"clicked!\")\n  }\n\n  // DOMæ§‹ç¯‰\n  div(class=\"my-component\", [\n    button(\n      on=events().click(on_click),\n      [text_of(value)]\n    ),\n  ])\n}\n```\n\n## ã‚·ã‚°ãƒŠãƒ«ï¼ˆSignalsï¼‰\n\nLuna UIã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚·ã‚¹ãƒ†ãƒ ã€‚\n\n### ã‚·ã‚°ãƒŠãƒ«ã®ä½œæˆ\n\n```moonbit\nlet count = @signal.signal(0)           // Int\nlet text = @signal.signal(\"\")           // String\nlet is_open = @signal.signal(false)     // Bool\n```\n\n### å€¤ã®å–å¾—ãƒ»è¨­å®š\n\n```moonbit\nlet current = count.get()  // ç¾åœ¨å€¤å–å¾—\ncount.set(current + 1)     // å€¤è¨­å®š\n```\n\n### ãƒ†ã‚­ã‚¹ãƒˆãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°\n\n```moonbit\n// ã‚·ã‚°ãƒŠãƒ«ã®å€¤ã‚’ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦è¡¨ç¤º\n[text_of(count)]\n\n// é™çš„ãƒ†ã‚­ã‚¹ãƒˆ\n[text(\"Hello\")]\n```\n\n### å‹•çš„å±æ€§\n\n```moonbit\ndiv(\n  dyn_class=fn() {\n    if is_active.get() { \"active\" } else { \"inactive\" }\n  },\n  dyn_attrs=[\n    (\"disabled\", @element.AttrValue::Dynamic(fn() {\n      if is_loading.get() { \"true\" } else { \"__remove__\" }\n    }))\n  ],\n  [...]\n)\n```\n\n`__remove__` ã‚’è¿”ã™ã¨å±æ€§ãŒå‰Šé™¤ã•ã‚Œã‚‹ã€‚\n\n## ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©\n\n### ã‚¯ãƒªãƒƒã‚¯\n\n```moonbit\nlet on_click : @element.ClickHandler = fn(_e) {\n  count.set(count.get() + 1)\n}\n\nbutton(\n  on=events().click(on_click),\n  [text(\"Click me\")]\n)\n```\n\n### å…¥åŠ›\n\n```moonbit\nlet on_input : @element.InputHandler = fn(e) {\n  let target : @js_dom.HTMLInputElement = e.target() |> @js.identity\n  value.set(target.value)\n}\n\ninput(\n  type_=\"text\",\n  on=events().input(on_input),\n)\n```\n\n### ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡\n\n```moonbit\nlet handle_submit : @element.FormHandler = fn(e) {\n  e.preventDefault()\n  // é€ä¿¡å‡¦ç†...\n}\n\nform(\n  on=events().submit(handle_submit),\n  [...]\n)\n```\n\n## æ¡ä»¶ä»˜ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°\n\n```moonbit\n@element.show(\n  fn() { is_visible.get() },  // æ¡ä»¶\n  fn() {                      // è¡¨ç¤ºã™ã‚‹è¦ç´ \n    div([text(\"Visible!\")])\n  }\n)\n```\n\n## ãƒªã‚¹ãƒˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°\n\nMoonBitã®foræ–‡ã§Arrayæ§‹ç¯‰ã€‚\n\n```moonbit\nlet items : Array[@luna.Node[Unit]] = []\nfor i = 0; i < len; i = i + 1 {\n  let item = array_get(data, i)\n  items.push(\n    li([text(get_str(item, \"name\"))])\n  )\n}\n\nul(items)\n```\n\n## selectè¦ç´ ã®æ‰±ã„\n\næ¨™æº–ã®selectè¦ç´ ã¯ `create_element` ã‚’ä½¿ç”¨ã€‚\n\n```moonbit\ncreate_element(\n  \"select\",\n  [\n    (\"id\", @element.AttrValue::Static(\"status\")),\n    (\"name\", @element.AttrValue::Static(\"status\")),\n    (\"oninput\", @element.AttrValue::Handler(fn(e) {\n      let target : @js_dom.HTMLSelectElement = @js.identity(e)\n      status.set(target.value)\n    })),\n  ],\n  [\n    create_element(\n      \"option\",\n      [\n        (\"value\", @element.AttrValue::Static(\"draft\")),\n        (\"selected\", @element.AttrValue::Static(\n          if props.initial_status == \"draft\" { \"true\" } else { \"\" }\n        )),\n      ],\n      [text(\"ä¸‹æ›¸ã\")],\n    ),\n    create_element(\n      \"option\",\n      [\n        (\"value\", @element.AttrValue::Static(\"published\")),\n      ],\n      [text(\"å…¬é–‹\")],\n    ),\n  ],\n)\n```\n\n## innerHTMLï¼ˆç”ŸHTMLæŒ¿å…¥ï¼‰\n\nMarkdownãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã©ã€HTMLã‚’ç›´æ¥æŒ¿å…¥ã™ã‚‹å ´åˆã€‚\n\n```moonbit\ndiv(\n  class=\"preview\",\n  dyn_attrs=[(\"__innerHTML\", @element.AttrValue::Dynamic(fn() {\n    let md = content.get()\n    if md == \"\" {\n      \"<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼...</p>\"\n    } else {\n      let result = @markdown.parse(md)\n      @markdown.render_html(result.document)\n    }\n  }))],\n  [],\n)\n```\n\n**æ³¨æ„**: `__innerHTML` ã¯ç‰¹æ®Šãªå±æ€§åã§ã€innerHTMLã¨ã—ã¦å‡¦ç†ã•ã‚Œã‚‹ã€‚\n\n## ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®åŸ‹ã‚è¾¼ã¿\n\n`@server_dom.client()` ã§Island Componentã‚’åŸ‹ã‚è¾¼ã¿ã€‚\n\n```moonbit\n// routes.mbt\nasync fn admin_new_post(_props : @router.PageProps) -> @server_dom.ServerNode {\n  @server_dom.ServerNode::sync(@luna.fragment([\n    h1([text(\"New Post\")]),\n    @server_dom.client(\n      @types.markdown_editor({\n        initial_content: \"\",\n        action_url: \"/_action/create-post\",\n        post_id: \"\",\n        initial_title: \"\",\n        initial_slug: \"\",\n        initial_status: \"draft\",\n      }),\n      [div([text(\"Loading...\")])],  // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆSSRæ™‚ã«è¡¨ç¤ºï¼‰\n    ),\n  ]))\n}\n```\n\n## Propså‹ã®è‡ªå‹•ç”Ÿæˆ\n\n`moon build` å¾Œã€`app/__gen__/types/types.mbt` ã«å‹å®šç¾©ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚\nã‚µãƒ¼ãƒãƒ¼å´ã§ã¯ `@types.component_name(props)` ã§ã‚¢ã‚¯ã‚»ã‚¹ã€‚\n\n## CSS ã‚¯ãƒ©ã‚¹åã®æ³¨æ„\n\nIsland Componentã§ä½¿ç”¨ã™ã‚‹CSSã‚¯ãƒ©ã‚¹ã¯ `routes.mbt` ã®ROOTãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…ã§å®šç¾©ãŒå¿…è¦ã€‚\n\n```moonbit\n// routes.mbt\nconst ROOT : String =\n  #|<style>\n  #|  .markdown-editor-island { ... }\n  #|  .editor-container { ... }\n  #|  .preview { ... }\n  #|</style>\n```\n\nã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®ã‚³ãƒ¼ãƒ‰ã¯ã‚µãƒ¼ãƒãƒ¼å´ã®CSSã‚’å‚ç…§ã™ã‚‹ãŸã‚ã€ã‚¯ãƒ©ã‚¹åã®ä¸€è‡´ãŒå¿…é ˆã€‚\n\n## JS FFIãƒ˜ãƒ«ãƒ‘ãƒ¼\n\nã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ã®ã¿ä½¿ç”¨ã§ãã‚‹FFIã€‚\n\n```moonbit\n///| ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿å–å¾—\nextern \"js\" fn get_form_data_from_form(e : @js_dom.FormEvent, post_id : String) -> @js.Any =\n  #| (e, postId) => {\n  #|   const form = e.target;\n  #|   const formData = new FormData(form);\n  #|   const data = {};\n  #|   formData.forEach((value, key) => { data[key] = value; });\n  #|   if (postId) { data.id = postId; }\n  #|   return data;\n  #| }\n\n///| ãƒšãƒ¼ã‚¸é·ç§»\nextern \"js\" fn redirect_to(url : String) -> Unit =\n  #| (url) => { window.location.href = url; }\n\n///| ã‚¹ãƒ©ãƒƒã‚°ç”Ÿæˆ\nextern \"js\" fn generate_slug(title : String) -> String =\n  #| (title) => title.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '')\n```\n\n## Server Actionã¨ã®é€£æº\n\nIsland Componentã‹ã‚‰ Server Action ã‚’å‘¼ã³å‡ºã™ã€‚\n\n```moonbit\n// Server Actionå‘¼ã³å‡ºã—\nlet handle_response : (@action.ActionResponse) -> Unit = fn(response) {\n  match response {\n    @action.ActionResponse::Success(data) => {\n      // æˆåŠŸæ™‚ã®å‡¦ç†\n    }\n    @action.ActionResponse::Error(_, error_msg) => {\n      // ã‚¨ãƒ©ãƒ¼æ™‚ã®å‡¦ç†\n    }\n    @action.ActionResponse::NetworkError(error_msg) => {\n      // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼\n    }\n    @action.ActionResponse::Redirect(url) => {\n      redirect_to(url)\n    }\n  }\n}\n\n@action.invoke_action(props.action_url, form_data, handle_response)\n```\n\nè©³ç´°ã¯ [SERVER-ACTIONS.md](SERVER-ACTIONS.md) ã‚’å‚ç…§ã€‚\n",
        "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/MOONBIT-FFI.md": "# MoonBit FFI ãƒ‘ã‚¿ãƒ¼ãƒ³é›†\n\nMoonBitã‹ã‚‰JavaScriptã‚’å‘¼ã³å‡ºã™FFIï¼ˆForeign Function Interfaceï¼‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚\n\n---\n\n## FFIå‰Šæ¸›ã‚¬ã‚¤ãƒ‰ï¼ˆæ¨å¥¨ï¼‰\n\n**åŸå‰‡**: MoonBitã§å®Ÿè£…ã§ãã‚‹ã‚‚ã®ã¯MoonBitã§æ›¸ãã€‚FFIã¯æœ€å°é™ã«ã€‚\n\n### å‰Šæ¸›å®Ÿç¸¾ï¼ˆmoonbit-lunaui-evalï¼‰\n\n| ã‚«ãƒ†ã‚´ãƒª | å‰Šæ¸›å‰ | å‰Šæ¸›å¾Œ | å‰Šæ¸›ç‡ |\n|---------|--------|--------|--------|\n| D1 SQLæ“ä½œ | 7 FFI | 1 FFI | **86%** |\n| ãƒ‡ãƒ¼ã‚¿ãƒ˜ãƒ«ãƒ‘ãƒ¼ | 6 FFI | 0 FFI | 100% |\n| æ–‡å­—åˆ—/JSON | 5 FFI | 0 FFI | 100% |\n| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯é€£æº | 3 FFI | 0 FFI | 100% |\n| ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆDOM | 5 FFI | 3 FFI | 40% |\n| ãã®ä»–(timestampç­‰) | 0 FFI | 2 FFI | - |\n| **åˆè¨ˆ** | **26 FFI** | **6 FFI** | **77%** |\n\n> **mizchi/cloudflare ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ¡ç”¨ã«ã‚ˆã‚Šå¤§å¹…å‰Šæ¸›ã‚’é”æˆ**\n\n---\n\n## mizchi/cloudflare ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆæ¨å¥¨ï¼‰\n\n**`mizchi/cloudflare` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€Cloudflare Workers ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’å‹å®‰å…¨ã«åˆ©ç”¨å¯èƒ½ã€‚**\n\n### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n```bash\nmoon add mizchi/cloudflare\n```\n\n### moon.pkg.json ã¸ã®è¿½åŠ \n\n```json\n{\n  \"import\": [\n    { \"path\": \"mizchi/cloudflare\", \"alias\": \"cloudflare\" }\n  ]\n}\n```\n\n### ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°å–å¾—ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå…±é€šï¼‰\n\nCloudflare Workers ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã¯ `env` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€\næœ€å°é™ã®FFIã§ globalThis çµŒç”±ã§å–å¾—ã™ã‚‹ã€‚\n\n```typescript\n// src/worker.ts\nexport default {\n  fetch: async (request: Request, env: Env, ctx: ExecutionContext) => {\n    (globalThis as any).__D1_DB = env.DB;\n    (globalThis as any).__KV = env.KV;\n    (globalThis as any).__R2 = env.R2;\n    (globalThis as any).__DO = env.DO;\n    // Sol Frameworkå‘¼ã³å‡ºã—...\n  }\n}\n```\n\n---\n\n### D1Databaseï¼ˆSQLiteï¼‰\n\n```moonbit\n///| D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å–å¾—ï¼ˆæœ€å°FFI - ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°å–å¾—ã®ã¿ï¼‰\nfn get_db() -> @cloudflare.D1Database {\n  let db_js : @core.Any = get_global_db()\n  @core.identity(db_js)\n}\n\nextern \"js\" fn get_global_db() -> @core.Any =\n  #| () => {\n  #|   const db = globalThis.__D1_DB;\n  #|   if (!db) throw new Error('D1 database not initialized');\n  #|   return db;\n  #| }\n\n///| å…¨è¨˜äº‹å–å¾—\npub async fn db_get_all_posts() -> @core.Any {\n  let db = get_db()\n  let result = db\n    .prepare(\"SELECT * FROM posts ORDER BY updated_at DESC\")\n    .all()\n  result.results_raw()\n}\n\n///| æ¡ä»¶ä»˜ãå–å¾— - bind1()ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‰\npub async fn db_get_post_by_slug(slug : String) -> @core.Any {\n  let db = get_db()\n  let row = db\n    .prepare(\"SELECT * FROM posts WHERE slug = ?\")\n    .bind1(@core.any(slug))\n    .first()\n  match row {\n    Some(r) => r\n    None => @core.null()\n  }\n}\n\n///| INSERT/UPDATE/DELETE - run()ã‚’ä½¿ç”¨\npub async fn db_delete_post(id : String) -> @cloudflare.D1Result {\n  let db = get_db()\n  db.prepare(\"DELETE FROM posts WHERE id = ?\")\n    .bind1(@core.any(id))\n    .run()\n}\n\n///| è¤‡æ•°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ - bind()ã§é…åˆ—ã‚’æ¸¡ã™\npub async fn db_create_post(\n  title : String,\n  slug : String,\n  content : String\n) -> @core.Any {\n  let db = get_db()\n  let row = db\n    .prepare(\"INSERT INTO posts (title, slug, content) VALUES (?, ?, ?) RETURNING *\")\n    .bind([\n      @core.any(title),\n      @core.any(slug),\n      @core.any(content),\n    ])\n    .first()\n  match row {\n    Some(r) => r\n    None => @core.null()\n  }\n}\n\n///| ãƒãƒƒãƒå‡¦ç†ï¼ˆãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ï¼‰\npub async fn db_batch_insert(items : Array[(String, String)]) -> Array[@cloudflare.D1Result] {\n  let db = get_db()\n  let stmts : Array[@cloudflare.D1PreparedStatement] = []\n  for item in items {\n    stmts.push(\n      db.prepare(\"INSERT INTO items (name, value) VALUES (?, ?)\")\n        .bind2(@core.any(item.0), @core.any(item.1))\n    )\n  }\n  db.batch(stmts)\n}\n```\n\n#### D1 API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\n| å‹ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |\n|----|---------|------|\n| `D1Database` | `prepare(query: String)` | PreparedStatementä½œæˆ |\n| `D1Database` | `exec(query: String)` | ç›´æ¥å®Ÿè¡Œï¼ˆDDLç”¨ï¼‰ |\n| `D1Database` | `batch(stmts: Array)` | ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ |\n| `D1Database` | `dump()` | DBå…¨ä½“ã‚’ãƒ€ãƒ³ãƒ— |\n| `D1PreparedStatement` | `bind(params: Array[@core.Any])` | è¤‡æ•°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‰ |\n| `D1PreparedStatement` | `bind1(param)` | 1ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‰ |\n| `D1PreparedStatement` | `bind2(p1, p2)` | 2ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‰ |\n| `D1PreparedStatement` | `bind3(p1, p2, p3)` | 3ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‰ |\n| `D1PreparedStatement` | `first()` | 1è¡Œå–å¾— (`Option[@core.Any]`) |\n| `D1PreparedStatement` | `first_col(col)` | 1ã‚«ãƒ©ãƒ å–å¾— |\n| `D1PreparedStatement` | `all()` | å…¨è¡Œå–å¾— (`D1Result`) |\n| `D1PreparedStatement` | `run()` | INSERT/UPDATE/DELETE |\n| `D1PreparedStatement` | `raw()` | ç”Ÿã®é…åˆ—å½¢å¼ã§å–å¾— |\n| `D1Result` | `results_raw()` | çµæœé…åˆ—å–å¾— |\n| `D1Result` | `get_results()` | å‹ä»˜ãçµæœå–å¾— |\n| `D1Result` | `success()` | æˆåŠŸãƒã‚§ãƒƒã‚¯ |\n| `D1Result` | `meta()` | ãƒ¡ã‚¿æƒ…å ±å–å¾— |\n| `D1Meta` | `duration()` | å®Ÿè¡Œæ™‚é–“(ms) |\n| `D1Meta` | `rows_read()` | èª­ã¿è¾¼ã¿è¡Œæ•° |\n| `D1Meta` | `rows_written()` | æ›¸ãè¾¼ã¿è¡Œæ•° |\n| `D1Meta` | `changes()` | å¤‰æ›´è¡Œæ•° |\n\n---\n\n### KVNamespaceï¼ˆKey-Value Storeï¼‰\n\n```moonbit\n///| KVå–å¾—ï¼ˆæœ€å°FFIï¼‰\nfn get_kv() -> @cloudflare.KVNamespace {\n  let kv_js : @core.Any = get_global_kv()\n  @core.identity(kv_js)\n}\n\nextern \"js\" fn get_global_kv() -> @core.Any =\n  #| () => globalThis.__KV\n\n///| å€¤ã®å–å¾—\npub async fn kv_get_value(key : String) -> String? {\n  let kv = get_kv()\n  kv.get(key)\n}\n\n///| JSONå€¤ã®å–å¾—\npub async fn kv_get_json(key : String) -> @core.Any? {\n  let kv = get_kv()\n  kv.get_json(key)\n}\n\n///| å€¤ã®ä¿å­˜ï¼ˆTTLä»˜ãï¼‰\npub async fn kv_set_value(key : String, value : String, ttl_seconds : Int) -> Unit {\n  let kv = get_kv()\n  kv.put(key, value, expirationTtl=ttl_seconds)\n}\n\n///| ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»˜ãä¿å­˜\npub async fn kv_set_with_metadata(\n  key : String,\n  value : String,\n  metadata : @core.Any\n) -> Unit {\n  let kv = get_kv()\n  kv.put_with_metadata(key, value, metadata)\n}\n\n///| å‰Šé™¤\npub async fn kv_delete(key : String) -> Unit {\n  let kv = get_kv()\n  kv.delete(key)\n}\n\n///| ã‚­ãƒ¼ä¸€è¦§å–å¾—\npub async fn kv_list_keys(prefix : String) -> @cloudflare.KVListResult {\n  let kv = get_kv()\n  kv.list(prefix=prefix, limit=100)\n}\n```\n\n#### KV API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\n| ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |\n|---------|------|\n| `get(key, type_?, cacheTtl?)` | å€¤å–å¾— |\n| `get_json(key)` | JSONå½¢å¼ã§å–å¾— |\n| `get_array_buffer(key)` | ArrayBufferå½¢å¼ã§å–å¾— |\n| `get_stream(key)` | Streamå½¢å¼ã§å–å¾— |\n| `get_with_metadata(key)` | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»˜ãã§å–å¾— |\n| `put(key, value, expiration?, expirationTtl?, metadata?)` | å€¤ä¿å­˜ |\n| `put_with_metadata(key, value, metadata)` | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»˜ãä¿å­˜ |\n| `delete(key)` | å‰Šé™¤ |\n| `list(prefix?, limit?, cursor?)` | ã‚­ãƒ¼ä¸€è¦§ |\n\n---\n\n### R2Bucketï¼ˆObject Storageï¼‰\n\n```moonbit\n///| R2å–å¾—ï¼ˆæœ€å°FFIï¼‰\nfn get_r2() -> @cloudflare.R2Bucket {\n  let r2_js : @core.Any = get_global_r2()\n  @core.identity(r2_js)\n}\n\nextern \"js\" fn get_global_r2() -> @core.Any =\n  #| () => globalThis.__R2\n\n///| ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå–å¾—\npub async fn r2_get_object(key : String) -> @cloudflare.R2Object? {\n  let r2 = get_r2()\n  r2.get(key)\n}\n\n///| ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦èª­ã¿è¾¼ã¿\npub async fn r2_get_text(key : String) -> String? {\n  let r2 = get_r2()\n  match r2.get(key) {\n    Some(obj) => Some(obj.text())\n    None => None\n  }\n}\n\n///| ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä¿å­˜\npub async fn r2_put_object(\n  key : String,\n  body : @core.Any,\n  content_type : String\n) -> @cloudflare.R2Object {\n  let r2 = get_r2()\n  let http_metadata : @cloudflare.R2HttpMetadata = {\n    contentType: Some(content_type),\n    contentLanguage: None,\n    contentDisposition: None,\n    contentEncoding: None,\n    cacheControl: None,\n    cacheExpiry: None,\n  }\n  r2.put(key, body, httpMetadata=http_metadata)\n}\n\n///| ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‰Šé™¤\npub async fn r2_delete_object(key : String) -> Unit {\n  let r2 = get_r2()\n  r2.delete(key)\n}\n\n///| ä¸€è¦§å–å¾—ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰\npub async fn r2_list_objects(prefix : String) -> @cloudflare.R2Objects {\n  let r2 = get_r2()\n  r2.list(prefix=prefix, limit=100)\n}\n```\n\n#### R2 API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\n| å‹ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |\n|----|---------|------|\n| `R2Bucket` | `get(key, onlyIf?, range?)` | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå–å¾— |\n| `R2Bucket` | `head(key)` | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ã¿å–å¾— |\n| `R2Bucket` | `put(key, value, httpMetadata?, customMetadata?)` | ä¿å­˜ |\n| `R2Bucket` | `delete(key)` | å‰Šé™¤ |\n| `R2Bucket` | `delete_multiple(keys)` | è¤‡æ•°å‰Šé™¤ |\n| `R2Bucket` | `list(limit?, prefix?, cursor?, delimiter?)` | ä¸€è¦§ |\n| `R2Bucket` | `create_multipart_upload(key)` | ãƒãƒ«ãƒãƒ‘ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é–‹å§‹ |\n| `R2Object` | `key()` | ã‚­ãƒ¼å |\n| `R2Object` | `size()` | ã‚µã‚¤ã‚º |\n| `R2Object` | `etag()` | ETag |\n| `R2Object` | `text()` | ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦èª­ã¿è¾¼ã¿ |\n| `R2Object` | `json()` | JSONã¨ã—ã¦èª­ã¿è¾¼ã¿ |\n| `R2Object` | `array_buffer()` | ArrayBufferã¨ã—ã¦èª­ã¿è¾¼ã¿ |\n| `R2Object` | `body()` | ReadableStreamã¨ã—ã¦å–å¾— |\n| `R2Objects` | `objects()` | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé…åˆ— |\n| `R2Objects` | `truncated()` | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ç¶™ç¶šæœ‰ç„¡ |\n| `R2Objects` | `cursor()` | æ¬¡ãƒšãƒ¼ã‚¸ã‚«ãƒ¼ã‚½ãƒ« |\n\n---\n\n### Durable Objectsï¼ˆStateful Workerï¼‰\n\n```moonbit\n///| DOãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹å–å¾—ï¼ˆæœ€å°FFIï¼‰\nfn get_do_namespace() -> @cloudflare.DurableObjectNamespace {\n  let do_js : @core.Any = get_global_do()\n  @core.identity(do_js)\n}\n\nextern \"js\" fn get_global_do() -> @core.Any =\n  #| () => globalThis.__DO\n\n///| åå‰ã‹ã‚‰ã‚¹ã‚¿ãƒ–å–å¾—\npub fn get_do_by_name(name : String) -> @cloudflare.DurableObjectStub {\n  let ns = get_do_namespace()\n  ns.get_by_name(name)\n}\n\n///| DOã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡\npub async fn do_fetch(name : String, url : String) -> @core.Any {\n  let stub = get_do_by_name(name)\n  stub.fetch_url(url)\n}\n\n///| DOã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ä»˜ãï¼‰\npub async fn do_fetch_with_body(\n  name : String,\n  url : String,\n  body : @core.Any\n) -> @core.Any {\n  let stub = get_do_by_name(name)\n  let init = @core.from_entries([\n    (\"method\", @core.any(\"POST\")),\n    (\"body\", @core.any(body)),\n  ])\n  stub.fetch_url_with_init(url, init)\n}\n```\n\n#### Durable Objects API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\n| å‹ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |\n|----|---------|------|\n| `DurableObjectNamespace` | `get(id)` | IDã‹ã‚‰ã‚¹ã‚¿ãƒ–å–å¾— |\n| `DurableObjectNamespace` | `get_by_name(name)` | åå‰ã‹ã‚‰ã‚¹ã‚¿ãƒ–å–å¾— |\n| `DurableObjectNamespace` | `new_unique_id()` | æ–°è¦ãƒ¦ãƒ‹ãƒ¼ã‚¯IDç”Ÿæˆ |\n| `DurableObjectNamespace` | `id_from_name(name)` | åå‰ã‹ã‚‰IDç”Ÿæˆ |\n| `DurableObjectNamespace` | `id_from_string(id)` | æ–‡å­—åˆ—ã‹ã‚‰IDç”Ÿæˆ |\n| `DurableObjectStub` | `fetch(request)` | ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ |\n| `DurableObjectStub` | `fetch_url(url)` | URLæŒ‡å®šã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆ |\n| `DurableObjectStub` | `fetch_url_with_init(url, init)` | ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆ |\n| `DurableObjectStorage` | `get(key)` | å€¤å–å¾— |\n| `DurableObjectStorage` | `put(key, value)` | å€¤ä¿å­˜ |\n| `DurableObjectStorage` | `delete(key)` | å‰Šé™¤ |\n| `DurableObjectStorage` | `list()` | ã‚­ãƒ¼ä¸€è¦§ |\n| `DurableObjectStorage` | `transaction(closure)` | ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ |\n| `DurableObjectStorage` | `sql()` | SQLiteã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ |\n| `SqlStorage` | `exec(query, bindings)` | SQLå®Ÿè¡Œ |\n| `SqlStorage` | `exec_raw(query)` | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—SQLå®Ÿè¡Œ |\n\n---\n\n## @core.Any ã¨ @js.Any ã®ä½¿ã„åˆ†ã‘\n\n**é‡è¦**: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ã¯ç•°ãªã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã€‚\n\n### åŸºæœ¬ãƒ«ãƒ¼ãƒ«\n\n| å ´æ‰€ | ä½¿ç”¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« | ç”¨é€” |\n|-----|---------------|------|\n| `app/server/*.mbt` | `@core.Any`, `@core.Promise[T]` | D1, KV, R2, Honoé€£æº |\n| `app/client/*.mbt` | `@js.Any`, `@js.Promise[T]` | DOMæ“ä½œ, ãƒ–ãƒ©ã‚¦ã‚¶ã‚¤ãƒ™ãƒ³ãƒˆ |\n\n### ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ï¼ˆ@coreï¼‰\n\n```moonbit\n// app/server/db.mbt\n\n///| ã‚µãƒ¼ãƒãƒ¼å´ã®JSã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ“ä½œ\npub fn get_str(obj : @core.Any, field : String) -> String {\n  if @core.is_nullish(obj) { return \"\" }\n  let val = obj._get(field)\n  if @core.is_nullish(val) { \"\" } else { val.to_string() }\n}\n\npub fn get_int(obj : @core.Any, field : String) -> Int {\n  if @core.is_nullish(obj) { return 0 }\n  let val = obj._get(field)\n  if @core.is_nullish(val) { 0 } else { val.cast() }\n}\n\n///| JSã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆ\nfn create_response(success : Bool, message : String) -> @core.Any {\n  @core.from_entries([\n    (\"success\", @core.any(success)),\n    (\"message\", @core.any(message)),\n  ])\n}\n\n///| Promiseå¾…æ©Ÿ\nasync fn fetch_data() -> @core.Any {\n  let result = db_get_all_posts()  // @core.Promise[@core.Any]\n  // .wait() ã¯ async fn å†…ã§æš—é»™çš„ã«å‘¼ã°ã‚Œã‚‹\n  result\n}\n```\n\n### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ï¼ˆ@jsï¼‰\n\n```moonbit\n// app/client/component.mbt\n\n///| ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®JSã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ“ä½œ\nfn get_message(data : @js.Any) -> String {\n  let val = data._get(\"message\")\n  if @js.is_nullish(val) { \"æˆåŠŸ\" } else { val.to_string() }\n}\n\nfn get_slug(data : @js.Any) -> String {\n  let val = data._get(\"slug\")\n  if @js.is_nullish(val) { \"\" } else { val.to_string() }\n}\n\n///| ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆ\nfn create_form_data() -> @js.Any {\n  @js.from_entries([\n    (\"title\", @js.any(\"ã‚¿ã‚¤ãƒˆãƒ«\")),\n    (\"content\", @js.any(\"æœ¬æ–‡\")),\n  ])\n}\n```\n\n### å‹å¤‰æ›ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹\n\n```moonbit\n// âŒ Bad: ã‚µãƒ¼ãƒãƒ¼ã§ @js.Any ã‚’ä½¿ç”¨\nfn bad_server_code(data : @js.Any) -> String { ... }\n\n// âœ… Good: ã‚µãƒ¼ãƒãƒ¼ã§ã¯ @core.Any ã‚’ä½¿ç”¨\nfn good_server_code(data : @core.Any) -> String { ... }\n\n// âŒ Bad: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ @core.Any ã‚’ä½¿ç”¨\nfn bad_client_code(data : @core.Any) -> String { ... }\n\n// âœ… Good: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã¯ @js.Any ã‚’ä½¿ç”¨\nfn good_client_code(data : @js.Any) -> String { ... }\n```\n\n### å…±é€šãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³\n\nåŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚µãƒ¼ãƒãƒ¼/ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¸¡æ–¹ã§ä½¿ã†å ´åˆã¯ã€åˆ¥ã€…ã«å®šç¾©ã™ã‚‹ã€‚\n\n```moonbit\n// app/server/helpers.mbt\npub fn server_get_str(obj : @core.Any, field : String) -> String {\n  if @core.is_nullish(obj) { return \"\" }\n  let val = obj._get(field)\n  if @core.is_nullish(val) { \"\" } else { val.to_string() }\n}\n\n// app/client/helpers.mbt\npub fn client_get_str(obj : @js.Any, field : String) -> String {\n  if @js.is_nullish(val) { return \"\" }\n  let val = obj._get(field)\n  if @js.is_nullish(val) { \"\" } else { val.to_string() }\n}\n```\n\n---\n\n## npm_typed ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ˆã‚‹FFIå‰Šæ¸›\n\n**`mizchi/npm_typed` ã¯ä¸»è¦ãªnpmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®MoonBitãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’æä¾›ã€‚**\n\n### Zod ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n\n```moonbit\n// moon.pkg.json\n{\n  \"import\": [\n    { \"path\": \"mizchi/npm_typed/zod\", \"alias\": \"zod\" }\n  ]\n}\n\n// ã‚¹ã‚­ãƒ¼ãƒå®šç¾©\nlet user_schema = @zod.object({\n  \"name\": @zod.string().min(1).max(100),\n  \"email\": @zod.string().email(),\n  \"age\": @zod.number().int().positive().optional(),\n})\n\n// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\nfn validate_user(data : @core.Any) -> Result[@core.Any, @zod.ZodError] {\n  user_schema.safeParse(data)\n}\n\n// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°\nfn handle_validation(data : @core.Any) -> @core.Any {\n  match user_schema.safeParse(data) {\n    Ok(validated) => create_success_response(validated)\n    Err(error) => {\n      let issues = error.issuesArray()\n      create_error_response(issues[0].message)\n    }\n  }\n}\n```\n\n#### Zod API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\n| é–¢æ•°/ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |\n|--------------|------|\n| `@zod.string()` | æ–‡å­—åˆ—ã‚¹ã‚­ãƒ¼ãƒ |\n| `@zod.number()` | æ•°å€¤ã‚¹ã‚­ãƒ¼ãƒ |\n| `@zod.boolean()` | çœŸå½å€¤ã‚¹ã‚­ãƒ¼ãƒ |\n| `@zod.object(shape)` | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚­ãƒ¼ãƒ |\n| `@zod.array(element)` | é…åˆ—ã‚¹ã‚­ãƒ¼ãƒ |\n| `@zod.union(options)` | ãƒ¦ãƒ‹ã‚ªãƒ³å‹ |\n| `@zod.enum_(values)` | åˆ—æŒ™å‹ |\n| `.min(n)` | æœ€å°å€¤/æœ€å°é•· |\n| `.max(n)` | æœ€å¤§å€¤/æœ€å¤§é•· |\n| `.email()` | ãƒ¡ãƒ¼ãƒ«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |\n| `.url()` | URLãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |\n| `.uuid()` | UUIDãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |\n| `.optional()` | ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«åŒ– |\n| `.nullable()` | nullè¨±å®¹ |\n| `.default_(value)` | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ |\n| `.transform(fn)` | å€¤å¤‰æ› |\n| `.refine(predicate)` | ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |\n| `.parse(data)` | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä¾‹å¤–ã‚ã‚Šï¼‰ |\n| `.safeParse(data)` | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆResultå‹ï¼‰ |\n\n### ãã®ä»–ã® npm_typed ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸\n\n| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ç”¨é€” |\n|-----------|------|\n| `mizchi/npm_typed/date_fns` | æ—¥ä»˜æ“ä½œ |\n| `mizchi/npm_typed/pino` | ãƒ­ã‚®ãƒ³ã‚° |\n| `mizchi/npm_typed/jose` | JWTå‡¦ç† |\n| `mizchi/npm_typed/chalk` | ã‚¿ãƒ¼ãƒŸãƒŠãƒ«è£…é£¾ |\n| `mizchi/npm_typed/playwright` | E2Eãƒ†ã‚¹ãƒˆ |\n| `mizchi/npm_typed/vitest` | ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |\n| `mizchi/npm_typed/helmet` | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ |\n\n---\n\n## å‰Šæ¸›ãƒ‘ã‚¿ãƒ¼ãƒ³\n\n### 1. ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ˜ãƒ«ãƒ‘ãƒ¼ â†’ `@core.Any` API\n\n```moonbit\n// âŒ Before: FFI\nextern \"js\" fn get_str(obj, field) -> String = #| (obj, field) => obj?.[field] ?? \"\"\n\n// âœ… After: MoonBit native\npub fn get_str(obj : @core.Any, field : String) -> String {\n  if @core.is_nullish(obj) { return \"\" }\n  let val = obj._get(field)\n  if @core.is_nullish(val) { \"\" } else { val.to_string() }\n}\n\n// âŒ Before: FFI\nextern \"js\" fn array_len(arr) -> Int = #| (arr) => arr?.length || 0\n\n// âœ… After: MoonBit native\npub fn array_len(arr : @core.Any) -> Int {\n  if @core.is_nullish(arr) { 0 }\n  else { arr._get(\"length\").cast() }\n}\n\n// âŒ Before: FFI\nextern \"js\" fn array_get(arr, idx) -> @core.Any = #| (arr, idx) => arr[idx]\n\n// âœ… After: MoonBit native\npub fn array_get(arr : @core.Any, idx : Int) -> @core.Any {\n  arr._get_by_index(idx)\n}\n```\n\n### 2. æ–‡å­—åˆ—æ“ä½œ â†’ MoonBit String API\n\n```moonbit\n// âŒ Before: FFI\nextern \"js\" fn safe_excerpt(content, maxLen) -> String = #| ...\n\n// âœ… After: MoonBit native\nfn safe_excerpt(content : String, max_len : Int) -> String {\n  let chars = content.to_array()\n  if chars.length() <= max_len { content }\n  else {\n    let result = StringBuilder::new()\n    for i = 0; i < max_len; i = i + 1 { result.write_char(chars[i]) }\n    result.write_string(\"...\")\n    result.to_string()\n  }\n}\n\n// âŒ Before: FFI (slugç”Ÿæˆ)\nextern \"js\" fn generate_slug(title) -> String = #| (title) => title.toLowerCase()...\n\n// âœ… After: MoonBit native\nfn generate_slug(title : String) -> String {\n  let result = StringBuilder::new()\n  let mut prev_hyphen = true\n  for c in title {\n    let lower = if c >= 'A' && c <= 'Z' {\n      (c.to_int() + 32).unsafe_to_char()\n    } else { c }\n    let is_alnum = (lower >= 'a' && lower <= 'z') || (lower >= '0' && lower <= '9')\n    if is_alnum {\n      result.write_char(lower)\n      prev_hyphen = false\n    } else if not(prev_hyphen) {\n      result.write_char('-')\n      prev_hyphen = true\n    }\n  }\n  result.to_string()\n}\n```\n\n### 3. JSONå‡¦ç† â†’ `@core` API\n\n```moonbit\n// âŒ Before: FFI\nextern \"js\" fn api_json_success(msg, slug) -> @core.Any = #| (msg, slug) => ({ success: true, message: msg, slug })\n\n// âœ… After: MoonBit native\nfn action_json_response(success : Bool, message : String, slug : String) -> @core.Any {\n  @core.from_entries([\n    (\"success\", @core.any(success)),\n    (\"message\", @core.any(message)),\n    (\"slug\", @core.any(slug)),\n  ])\n}\n\n// âŒ Before: FFI\nextern \"js\" fn parse_json(s) -> @core.Any = #| (s) => JSON.parse(s)\n\n// âœ… After: MoonBit native with error handling\nfn parse_json(s : String) -> @core.Any {\n  try { @core.try_sync(fn() { @core.json_parse(s) }) }\n  catch { @core.JsError(_) => @core.new_object() }\n}\n```\n\n### 4. ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç† â†’ Pure MoonBit\n\n```moonbit\n// âŒ Before: FFI\nextern \"js\" fn parse_form_urlencoded(s) -> @core.Any = #| (s) => ...\n\n// âœ… After: MoonBit native\nfn parse_form_urlencoded(s : String) -> @core.Any {\n  let result = @core.new_object()\n  if s == \"\" { return result }\n  let pairs = split_by_char(s, '&')\n  for pair in pairs {\n    if pair == \"\" { continue }\n    let chars = pair.to_array()\n    let mut eq_idx = -1\n    for i, c in chars {\n      if c == '=' { eq_idx = i; break }\n    }\n    if eq_idx >= 0 {\n      let key = safe_decode_uri(extract_substring(chars, 0, eq_idx))\n      let value = safe_decode_uri(extract_substring(chars, eq_idx + 1, chars.length()))\n      result._set(key, @core.any(value))\n    }\n  }\n  result\n}\n\nfn split_by_char(s : String, sep : Char) -> Array[String] { ... }\nfn extract_substring(chars : Array[Char], start : Int, end : Int) -> String { ... }\n```\n\n### 5. ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯é€£æº â†’ Sol Framework API\n\n```moonbit\n// âŒ Before: FFI\nextern \"js\" fn get_form_body_promise(props) -> @core.Promise[@core.Any] = #| async (props) => await props.ctx.req.parseBody()\n\n// âœ… After: Sol Framework native API\nasync fn api_handler(props : @router.PageProps) -> @core.Any {\n  let body = props.ctx.req.parseBody()  // ç›´æ¥å‘¼ã³å‡ºã—å¯èƒ½\n  // ...\n}\n\n// âŒ Before: FFI\nextern \"js\" fn hono_redirect(props, url) -> @core.Any = #| (props, url) => new Response(null, { status: 302, headers: { Location: url } })\n\n// âœ… After: Sol Framework native API\nasync fn api_delete(props : @router.PageProps) -> @core.Any {\n  @core.any(props.ctx.redirect(\"/admin\"))  // ç›´æ¥å‘¼ã³å‡ºã—å¯èƒ½\n}\n```\n\n---\n\n## éåŒæœŸå‡¦ç†ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹\n\n### åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³\n\n```moonbit\n///| async fn å†…ã§ã® Promise å¾…æ©Ÿ\nasync fn fetch_and_process() -> @core.Any {\n  // Promise ã¯ async fn å†…ã§è‡ªå‹•çš„ã« .wait() ã•ã‚Œã‚‹\n  let posts = db_get_all_posts()\n  let len = array_len(posts)\n\n  // å‡¦ç†çµæœã‚’è¿”ã™\n  @core.from_entries([\n    (\"count\", @core.any(len)),\n    (\"posts\", posts),\n  ])\n}\n```\n\n### è¤‡æ•° Promise ã®é †æ¬¡å‡¦ç†\n\n```moonbit\nasync fn process_sequentially() -> @core.Any {\n  // é †ç•ªã«å¾…æ©Ÿ\n  let user = db_get_user_by_id(\"123\")\n  let posts = db_get_posts_by_user_id(get_str(user, \"id\"))\n  let comments = db_get_comments_by_user_id(get_str(user, \"id\"))\n\n  @core.from_entries([\n    (\"user\", user),\n    (\"posts\", posts),\n    (\"comments\", comments),\n  ])\n}\n```\n\n### ServerNode ã§ã®éåŒæœŸå‡¦ç†\n\n```moonbit\nasync fn home_page(_props : @router.PageProps) -> @server_dom.ServerNode {\n  @server_dom.ServerNode::async_(async fn() {\n    // DBæ“ä½œãªã©ã®éåŒæœŸå‡¦ç†\n    let posts = db_get_published_posts()\n    let len = array_len(posts)\n\n    // UIæ§‹ç¯‰\n    let post_items : Array[@luna.Node[Unit]] = []\n    for i = 0; i < len; i = i + 1 {\n      let post = array_get(posts, i)\n      post_items.push(\n        article(class=\"post-card\", [\n          h2([text(get_str(post, \"title\"))]),\n        ])\n      )\n    }\n\n    @luna.fragment(post_items)\n  })\n}\n```\n\n### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°\n\n```moonbit\nasync fn safe_fetch() -> @core.Any {\n  try {\n    let result = db_get_post_by_slug(\"test\")\n    if is_null(result) {\n      @core.from_entries([(\"error\", @core.any(\"Not found\"))])\n    } else {\n      result\n    }\n  } catch {\n    @core.JsError(e) => {\n      @core.from_entries([\n        (\"error\", @core.any(\"Database error\")),\n        (\"details\", @core.any(e.to_string())),\n      ])\n    }\n  }\n}\n```\n\n---\n\n## å‰Šæ¸›ä¸å¯èƒ½ãªFFIï¼ˆå¿…é ˆï¼‰\n\nä»¥ä¸‹ã¯ãƒ–ãƒ©ã‚¦ã‚¶/ãƒ©ãƒ³ã‚¿ã‚¤ãƒ APIã®åˆ¶ç´„ã«ã‚ˆã‚Šæ®‹ã™å¿…è¦ãŒã‚ã‚‹ã€‚\n\n| FFI | å ´æ‰€ | ç†ç”± |\n|-----|------|------|\n| `get_global_db()` | server | D1ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°å–å¾— - globalThisçµŒç”±ã§ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ |\n| `get_timestamp()` | server | `new Date().toISOString()` - MoonBitã«æ—¥æ™‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã— |\n| `safe_decode_uri()` | server | `decodeURIComponent()` - ä¾‹å¤–å‡¦ç†ãŒå¿…è¦ |\n| `redirect_to(url)` | client | `window.location.href` - DOM API |\n| `confirm_delete()` | client | `window.confirm()` - ãƒ–ãƒ©ã‚¦ã‚¶ãƒ€ã‚¤ã‚¢ãƒ­ã‚° |\n| `get_form_data_from_form()` | client | FormData API - DOMã‚¢ã‚¯ã‚»ã‚¹å¿…è¦ |\n\n---\n\n## åŸºæœ¬æ§‹æ–‡\n\n```moonbit\nextern \"js\" fn function_name(arg1 : Type1, arg2 : Type2) -> ReturnType =\n  #| (arg1, arg2) => {\n  #|   // JavaScript code\n  #|   return result;\n  #| }\n```\n\n## å‹ãƒãƒƒãƒ”ãƒ³ã‚°\n\n| MoonBitå‹ | JavaScriptå‹ | ç”¨é€” |\n|----------|-------------|------|\n| `String` | `string` | æ–‡å­—åˆ— |\n| `Int` | `number` | æ•´æ•° |\n| `Double` | `number` | æµ®å‹•å°æ•°ç‚¹ |\n| `Bool` | `boolean` | çœŸå½å€¤ |\n| `@core.Any` | `any` | ã‚µãƒ¼ãƒãƒ¼å´ã®å‹•çš„å‹ |\n| `@core.Promise[T]` | `Promise<T>` | ã‚µãƒ¼ãƒãƒ¼å´ã®Promise |\n| `@js.Any` | `any` | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®å‹•çš„å‹ |\n| `@js.Promise[T]` | `Promise<T>` | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®Promise |\n| `Unit` | `undefined` | void |\n| `Bytes` | `Uint8Array` | ãƒã‚¤ãƒŠãƒª |\n\n## ã‚ˆãã‚ã‚‹å•é¡Œ\n\n### undefinedé–¢æ•°ã‚¨ãƒ©ãƒ¼\n\nFFIé–¢æ•°ã¯ãƒ“ãƒ«ãƒ‰æ™‚ã«JSã«å¤‰æ›ã•ã‚Œã‚‹ã€‚å®šç¾©å ´æ‰€ï¼ˆserver/clientï¼‰ã‚’ç¢ºèªã€‚\n\n### PromiseãŒè§£æ±ºã•ã‚Œãªã„\n\n`async fn` å†…ã§ã¯è‡ªå‹•çš„ã« `.wait()` ã•ã‚Œã‚‹ãŒã€é€šå¸¸ã® fn ã§ã¯æ˜ç¤ºçš„ã«å¿…è¦ã€‚\n\n```moonbit\n// âŒ NG (é€šå¸¸ã®fnå†…)\nlet posts = db_get_all_posts()  // Promiseæœªè§£æ±º\n\n// âœ… OK (async fnå†… - è‡ªå‹•å¾…æ©Ÿ)\nasync fn handler() {\n  let posts = db_get_all_posts()  // è‡ªå‹•çš„ã«å¾…æ©Ÿã•ã‚Œã‚‹\n}\n```\n\n### å‹ä¸ä¸€è‡´\n\n`@core.Any` ã¨ `@js.Any` ã¯ç•°ãªã‚‹å‹ã€‚ã‚µãƒ¼ãƒãƒ¼ã§ã¯ `@core`ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã¯ `@js` ã‚’ä½¿ç”¨ã€‚\n",
        "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/PERFORMANCE.md": "# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã‚¬ã‚¤ãƒ‰\n\nLuna UI + MoonBit + Cloudflare Workers ç’°å¢ƒã§ã®Lighthouseã‚¹ã‚³ã‚¢æœ€é©åŒ–ã€‚\n\n## ç›®æ¬¡\n\n1. [ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼å¯¾ç­–](#ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼å¯¾ç­–)\n2. [CLSï¼ˆCumulative Layout Shiftï¼‰æœ€é©åŒ–](#clsæœ€é©åŒ–)\n3. [TTFBæœ€é©åŒ–](#ttfbæœ€é©åŒ–)\n4. [CSSæœ€é©åŒ–](#cssæœ€é©åŒ–)\n\n---\n\n## ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼å¯¾ç­–\n\n### Luna UI ã® `luna:state` å±æ€§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å•é¡Œ\n\n**ç—‡çŠ¶**: ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã« `Cannot read properties of undefined` ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ\n\n**åŸå› **: Luna UIã® `escape_attr_to_internal` é–¢æ•°ãŒUTF-16ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ï¼ˆçµµæ–‡å­—ç­‰ï¼‰ã‚’æ­£ã—ãå‡¦ç†ã§ããªã„\n\n```javascript\n// Luna UIå†…éƒ¨ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†ï¼ˆå•é¡Œã‚ã‚Šï¼‰\n// ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã¯2ã¤ã®16ãƒ“ãƒƒãƒˆã‚³ãƒ¼ãƒ‰ãƒ¦ãƒ‹ãƒƒãƒˆã ãŒã€i += 1 ã§å‡¦ç†ã™ã‚‹ãŸã‚ä½ç½®ãŒãšã‚Œã‚‹\nfor (let i = 0; i < str.length; i++) {\n  const code = str.charCodeAt(i);\n  if (code === 34) { // \" â†’ &quot;\n    // ...\n  }\n  i = i + 1 | 0;  // â† ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã§ä½ç½®ãšã‚ŒãŒç™ºç”Ÿ\n}\n```\n\n**è§£æ±ºç­–**: `json_stringify` ã§éASCIIã‚’Unicodeã‚¨ã‚¹ã‚±ãƒ¼ãƒ—\n\n```moonbit\n// app/server/db.mbt\n///| JSON stringify helper - ASCII-safe to avoid Luna UI escape issues\nextern \"js\" fn json_stringify(obj : @core.Any) -> String =\n  #| (obj) => {\n  #|   const json = JSON.stringify(obj, null, 2);\n  #|   let result = '';\n  #|   for (let i = 0; i < json.length; i++) {\n  #|     const code = json.charCodeAt(i);\n  #|     if (code > 127) {\n  #|       result += '\\\\u' + ('0000' + code.toString(16)).slice(-4);\n  #|     } else {\n  #|       result += json[i];\n  #|     }\n  #|   }\n  #|   return result;\n  #| }\n```\n\n**å½±éŸ¿**: æ—¥æœ¬èªã‚„çµµæ–‡å­—ã‚’å«ã‚€ãƒ‡ãƒ¼ã‚¿ã‚’Island Componentã«æ¸¡ã™éš›ã«å¿…é ˆ\n\n---\n\n## CLSæœ€é©åŒ–\n\n### ã‚¹ã‚±ãƒ«ãƒˆãƒ³é«˜ã•ã®å‹•çš„èª¿æ•´\n\n**å•é¡Œ**: å›ºå®šé«˜ã•ã®ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã¨å®Ÿéš›ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚µã‚¤ã‚ºã®ä¸ä¸€è‡´ã§CLSãŒç™ºç”Ÿ\n\n**æ¸¬å®šæ–¹æ³•**:\n```python\n# Playwrightã§ Layout Shift ã‚’æ¤œå‡º\npage.add_init_script(\"\"\"\n    window.__layoutShifts = [];\n    new PerformanceObserver((list) => {\n        for (const entry of list.getEntries()) {\n            if (entry.entryType === 'layout-shift' && !entry.hadRecentInput) {\n                window.__layoutShifts.push({\n                    value: entry.value,\n                    sources: entry.sources?.map(s => ({\n                        node: s.node?.tagName,\n                        previousRect: s.previousRect,\n                        currentRect: s.currentRect\n                    }))\n                });\n            }\n        }\n    }).observe({type: 'layout-shift', buffered: true});\n\"\"\")\n```\n\n**è§£æ±ºç­–1**: å®Ÿãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãã‚¹ã‚±ãƒ«ãƒˆãƒ³é«˜ã•è¨ˆç®—\n\n```moonbit\n// 1ã‚¨ãƒ³ãƒˆãƒªãƒ¼ç´„21px + ä½™ç™½30px\n// 74ã‚¨ãƒ³ãƒˆãƒªãƒ¼ â†’ 74 * 21 + 30 â‰ˆ 1584px\n[div(class=\"animate-pulse h-[1600px] bg-muted/30 rounded-xl\", [])]\n```\n\n**è§£æ±ºç­–2**: Tailwindã®safelistã§å‹•çš„ã‚¯ãƒ©ã‚¹ã‚’æœ‰åŠ¹åŒ–\n\n```typescript\n// tailwind.config.ts\nconst config: Config = {\n  safelist: [\n    'h-[88px]',     // header skeleton\n    'h-[200px]',    // small content\n    'h-[1600px]',   // timeline skeleton (~76 entries)\n    'h-[2000px]',   // large content\n  ],\n  // ...\n}\n```\n\n**è§£æ±ºç­–3**: CSS containmentï¼ˆå°†æ¥çš„ãªã‚·ãƒ•ãƒˆé˜²æ­¢ï¼‰\n\n```css\n/* CSSã§ containment ã‚’é©ç”¨ */\n.timeline-section {\n  contain: layout;\n}\n```\n\n### CLSç›®æ¨™å€¤\n\n| ã‚°ãƒ¬ãƒ¼ãƒ‰ | CLSå€¤ |\n|---------|-------|\n| Good | < 0.1 |\n| Needs Improvement | 0.1 - 0.25 |\n| Poor | > 0.25 |\n\n---\n\n## TTFBæœ€é©åŒ–\n\n### Cloudflare Workers + D1 ã®ç‰¹æ€§\n\n**èª²é¡Œ**: D1ã‚¯ã‚¨ãƒªã¨Workerå‡¦ç†ã§TTFBãŒ1000msä»¥ä¸Šã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹\n\n**æ¸¬å®š**:\n```bash\nnpx lighthouse https://your-app.workers.dev \\\n  --output=json \\\n  --chrome-flags=\"--headless\" \\\n  --only-categories=performance \\\n  --extra-headers='{\"Authorization\":\"Basic ...\"}' 2>/dev/null\n\n# TTFBç¢ºèª\nnode -e \"\n  const d = require('/tmp/lh.json');\n  console.log('TTFB:', d.audits['server-response-time']?.numericValue + 'ms');\n\"\n```\n\n**æœ€é©åŒ–æˆ¦ç•¥**:\n\n1. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥APIåˆ©ç”¨**ï¼ˆçŸ­æœŸã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰\n```typescript\n// src/worker.ts\nconst cache = caches.default;\nconst cacheKey = new Request(url.toString(), request);\n\nconst cached = await cache.match(cacheKey);\nif (cached) return cached;\n\nconst response = await app.fetch(request, env, ctx);\n\n// 60ç§’ã‚­ãƒ£ãƒƒã‚·ãƒ¥\nconst cachedResponse = new Response(response.body, response);\ncachedResponse.headers.set('Cache-Control', 'public, max-age=60');\nctx.waitUntil(cache.put(cacheKey, cachedResponse.clone()));\n```\n\n2. **D1ã‚¯ã‚¨ãƒªæœ€é©åŒ–**\n```sql\n-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¿½åŠ \nCREATE INDEX idx_entries_date ON entries(date_label DESC);\n\n-- å¿…è¦ãªã‚«ãƒ©ãƒ ã®ã¿å–å¾—\nSELECT id, title, date_label FROM entries WHERE ...\n```\n\n3. **Smart Placement**\nCloudflare Workersã¯è‡ªå‹•ã§æœ€é©ãªãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹\n\n---\n\n## CSSæœ€é©åŒ–\n\n### Tailwind CDN â†’ ãƒ“ãƒ«ãƒ‰æ™‚ãƒãƒ³ãƒ‰ãƒ«\n\n**å•é¡Œ**: CDNèª­ã¿è¾¼ã¿ãŒrender-blockingã«ãªã‚‹\n\n**è§£æ±ºç­–**: ãƒ“ãƒ«ãƒ‰æ™‚ã«CSSã‚’ãƒãƒ³ãƒ‰ãƒ«\n\n```json\n// package.json scripts\n{\n  \"build:css\": \"tailwindcss -i styles/luna.css -o static/luna.css --minify\"\n}\n```\n\n```moonbit\n// routes.mbt - Critical CSSã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã€æ®‹ã‚Šã‚’link\n@luna.html([\n  @luna.head([\n    (\"link\", [(\"rel\", \"stylesheet\"), (\"href\", \"/luna.css\")]),\n  ]),\n  // ...\n])\n```\n\n### Critical CSSæŠ½å‡ºï¼ˆä¸Šç´šï¼‰\n\nFCPæ”¹å–„ã®ãŸã‚ã€Above-the-fold CSSã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–:\n\n```html\n<style>\n  /* Critical CSS - above the fold */\n  :root { --background: 0 0% 100%; ... }\n  body { margin: 0; font-family: ... }\n  .animate-pulse { animation: pulse 2s infinite; }\n</style>\n<link rel=\"stylesheet\" href=\"/luna.css\" media=\"print\" onload=\"this.media='all'\">\n```\n\n---\n\n## Lighthouseã‚¹ã‚³ã‚¢ç›®å®‰\n\n| ãƒ¡ãƒˆãƒªãƒƒã‚¯ | Good | ç›®æ¨™ |\n|-----------|------|------|\n| FCP | < 1.8s | < 1.5s |\n| LCP | < 2.5s | < 2.0s |\n| TBT | < 200ms | < 100ms |\n| CLS | < 0.1 | < 0.05 |\n| Speed Index | < 3.4s | < 3.0s |\n\n**ã‚¹ã‚³ã‚¢é”æˆä¾‹**ï¼ˆ2025å¹´1æœˆå®Ÿç¸¾ï¼‰:\n- Performance: 98-99\n- FCP: 1.3-1.4s\n- LCP: 1.7-1.8s\n- TBT: 90ms\n- CLS: 0.053\n\n## ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«\n\n```bash\n# Lighthouse CLI\nnpx lighthouse URL --output=json --only-categories=performance\n\n# Playwright + LayoutShiftæ¤œå‡º\npython /tmp/check-cls.py\n\n# æœ¬ç•ªæ¤œè¨¼\npython /tmp/verify-production.py\n```\n\n## ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ\n\n- [ ] `json_stringify` ã§ASCII-safeãªJSONç”Ÿæˆ\n- [ ] ã‚¹ã‚±ãƒ«ãƒˆãƒ³é«˜ã•ãŒã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨è¿‘ä¼¼\n- [ ] Tailwind safelistã«å‹•çš„é«˜ã•ã‚¯ãƒ©ã‚¹è¿½åŠ \n- [ ] CSSãŒãƒ“ãƒ«ãƒ‰æ™‚ãƒãƒ³ãƒ‰ãƒ«æ¸ˆã¿\n- [ ] D1ã‚¯ã‚¨ãƒªã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®š\n- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥æ¤œè¨ï¼ˆé »ç¹ã«æ›´æ–°ã•ã‚Œãªã„ãƒ‡ãƒ¼ã‚¿ï¼‰\n",
        "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/SERVER-ACTIONS.md": "# Server Actions ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\nLuna UIã«ãŠã‘ã‚‹Server Actionsã®è©³ç´°ã‚¬ã‚¤ãƒ‰ã€‚\nã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã‚µãƒ¼ãƒãƒ¼ã®é–¢æ•°ã‚’å®‰å…¨ã«å‘¼ã³å‡ºã™ä»•çµ„ã¿ã€‚\n\n## æ¦‚è¦\n\n- ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: `/_action/{action-name}`\n- CORSä¿è­·: `allowed_origins` ã§è¨±å¯ã‚ªãƒªã‚¸ãƒ³ã‚’æŒ‡å®š\n- å½¢å¼: JSON ã¾ãŸã¯ form-urlencoded\n\n## Action Registryå®šç¾©\n\n```moonbit\npub fn action_registry() -> @action.ActionRegistry {\n  @action.ActionRegistry::new(allowed_origins=[\n    \"http://localhost:3000\",\n    \"http://localhost:8787\",\n    \"https://your-app.workers.dev\",\n  ]).register(\n    @action.ActionDef::new(\"create-post\", create_action)\n      .with_require_json(false),  // form-urlencodedã‚‚è¨±å¯\n  ).register(\n    @action.ActionDef::new(\"update-post\", update_action)\n      .with_require_json(false),\n  )\n}\n```\n\n**é‡è¦**: `allowed_origins` ã«æœ¬ç•ªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å«ã‚ãªã„ã¨403ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚\n\n## Action Handlerå®šç¾©\n\n```moonbit\nlet create_action : @action.ActionHandler = @action.ActionHandler(async fn(ctx) {\n  // Content-Typeåˆ¤å®š\n  let content_type = ctx.get_header(\"Content-Type\").unwrap_or(\"\")\n  let is_form = content_type.contains(\"application/x-www-form-urlencoded\")\n\n  // ãƒœãƒ‡ã‚£è§£æ\n  let body = ctx.body\n  let (title, content) = if is_form {\n    let data = parse_form_urlencoded(body)\n    (get_str(data, \"title\"), get_str(data, \"content\"))\n  } else {\n    let data = parse_json(body)\n    (get_str(data, \"title\"), get_str(data, \"content\"))\n  }\n\n  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n  if title == \"\" {\n    return @action.ActionResult::bad_request(\"ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆã§ã™\")\n  }\n\n  // DBæ“ä½œãªã©\n  let _result = db_create(title, content).wait()\n\n  // æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹\n  @action.ActionResult::ok(\n    action_json_response(true, \"ä½œæˆã—ã¾ã—ãŸ\", \"slug-value\"),\n  )\n})\n```\n\n## ActionContext\n\n```moonbit\nctx.body          // ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ï¼ˆStringï¼‰\nctx.get_header(\"Content-Type\")  // ãƒ˜ãƒƒãƒ€ãƒ¼å–å¾—ï¼ˆOption[String]ï¼‰\n```\n\n## ActionResult\n\n### æˆåŠŸ\n\n```moonbit\n@action.ActionResult::ok(data)  // data: @core.Any\n```\n\n### ã‚¨ãƒ©ãƒ¼\n\n```moonbit\n@action.ActionResult::bad_request(\"ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\")  // 400\n```\n\n## ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®å‘¼ã³å‡ºã—\n\nIsland Componentã‹ã‚‰ `@action.invoke_action` ã‚’ä½¿ç”¨ã€‚\n\n```moonbit\n// ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿æº–å‚™\nlet form_data = get_form_data_from_form(e, post_id)\n\n// ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®šç¾©\nlet handle_response : (@action.ActionResponse) -> Unit = fn(response) {\n  match response {\n    @action.ActionResponse::Success(data) => {\n      let msg = get_message(data)\n      result_msg.set(msg)\n    }\n    @action.ActionResponse::Error(status_code, error_msg) => {\n      is_error.set(true)\n      result_msg.set(error_msg)\n    }\n    @action.ActionResponse::NetworkError(error_msg) => {\n      is_error.set(true)\n      result_msg.set(\"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼: \" + error_msg)\n    }\n    @action.ActionResponse::Redirect(url) => {\n      redirect_to(url)\n    }\n  }\n}\n\n// Actionå‘¼ã³å‡ºã—\n@action.invoke_action(\"/_action/create-post\", form_data, handle_response)\n```\n\n## ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼ˆFFIï¼‰\n\n```moonbit\n///| JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ\nextern \"js\" fn action_json_response(\n  success : Bool,\n  message : String,\n  slug : String,\n) -> @core.Any =\n  #| (success, message, slug) => ({ success, message, slug })\n\n///| JSONè§£æ\nextern \"js\" fn parse_json(s : String) -> @core.Any =\n  #| (s) => { try { return JSON.parse(s); } catch { return {}; } }\n\n///| form-urlencodedè§£æ\nextern \"js\" fn parse_form_urlencoded(s : String) -> @core.Any =\n  #| (s) => Object.fromEntries(new URLSearchParams(s))\n```\n\n## ã‚ˆãã‚ã‚‹å•é¡Œ\n\n### 403 Forbidden\n\n**åŸå› **: `allowed_origins` ã«ç¾åœ¨ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒå«ã¾ã‚Œã¦ã„ãªã„ã€‚\n\n**è§£æ±º**:\n```moonbit\n@action.ActionRegistry::new(allowed_origins=[\n  \"http://localhost:8787\",\n  \"https://your-app.workers.dev\",  // â† è¿½åŠ \n])\n```\n\n### ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ãŒç©º\n\n**åŸå› **: Content-TypeãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„ã€‚\n\n**è§£æ±º**: `with_require_json(false)` ã§form-urlencodedã‚’è¨±å¯ã™ã‚‹ã‹ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§JSONé€ä¿¡ã€‚\n\n### ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ããªã„\n\n**åŸå› **: ãƒ•ã‚©ãƒ¼ãƒ ã®nameå±æ€§ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã€ã¾ãŸã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã®ä¸ä¸€è‡´ã€‚\n\n**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**:\n- `<input name=\"title\">` ã®nameå±æ€§\n- `get_str(data, \"title\")` ã®ã‚­ãƒ¼å\n\n## API Route vs Server Action\n\n| ç‰¹å¾´ | API Route | Server Action |\n|-----|-----------|---------------|\n| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | `/api/*` | `/_action/*` |\n| å®šç¾©å ´æ‰€ | `routes()` | `action_registry()` |\n| CORS | æ‰‹å‹•è¨­å®š | `allowed_origins`ã§è‡ªå‹• |\n| ç”¨é€” | RESTful API | ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ãƒ»RPC |\n\nServer Actionã¯å˜ç´”ãªCRUDæ“ä½œã«é©ã—ã¦ã„ã‚‹ã€‚\nè¤‡é›‘ãªAPIã¯API Routeã§å®Ÿè£…ã€‚\n",
        "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/SKILL.md": "---\nname: moonbit-luna-ui\ndescription: MoonBit + Luna UI (Sol Framework) ã§ã®Webã‚¢ãƒ—ãƒªé–‹ç™ºã€‚MoonBitã‚³ãƒ¼ãƒ‰ã€Solãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€Island Componentsã€Server Actionsã€D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€Cloudflare Workersãƒ‡ãƒ—ãƒ­ã‚¤ã«ä½¿ç”¨\n---\n\n# MoonBit + Luna UI é–‹ç™ºã‚¬ã‚¤ãƒ‰\n\nMoonBitã¨Luna UI (Sol Framework) ã‚’ä½¿ç”¨ã—ãŸCloudflare Workerså‘ã‘Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®ãƒã‚¦ãƒã‚¦ã€‚\n\n## é–‹ç™ºã‚’å§‹ã‚ã‚‹å‰ã«å¿…èª­\n\n### ã‚¢ãƒ—ãƒ­ãƒ¼ãƒé¸æŠ\n\n**â†’ [ECOSYSTEM.md](./ECOSYSTEM.md)ã‚’å‚ç…§**\n\nLuna UI (Sol Framework) ä»¥å¤–ã«ã‚‚é¸æŠè‚¢ãŒã‚ã‚Šã¾ã™:\n- **vite-plugin-moonbit**: HMRå¯¾å¿œã€æ—¢å­˜Viteãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®çµ±åˆå‘ã‘\n- **mizchi/js**: JS FFIãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆ**å¿…é ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª**ï¼‰\n- **mizchi/npm_typed**: Hono, Playwrightç­‰50+ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°\n\n**FFIã‚’è‡ªå‰ã§æ›¸ãå‰ã«ã€å¿…ãšæ—¢å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚**\n\n### æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å¯¾è±¡\n\nã“ã®ã‚¹ã‚­ãƒ«ã¯ **Luna UI + Sol Framework** ã‚’ä½¿ã†å ´åˆã®ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚\nã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ—ãƒªã‚„æ—¢å­˜Viteãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ **vite-plugin-moonbit** ã‚’æ¨å¥¨ã—ã¾ã™ã€‚\n\n## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯æ¦‚è¦\n\n| æŠ€è¡“ | å½¹å‰² |\n|-----|------|\n| MoonBit | ãƒ¡ã‚¤ãƒ³è¨€èªï¼ˆWASMã‚¿ãƒ¼ã‚²ãƒƒãƒˆã€JSã‚¿ãƒ¼ã‚²ãƒƒãƒˆä¸¡å¯¾å¿œï¼‰ |\n| Luna UI | UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆIsland Architectureï¼‰ |\n| Sol Framework | ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ»SSRãƒ»Server Actions |\n| Cloudflare Workers | ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  |\n| D1 | SQLiteãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |\n| Hono | HTTPãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼ˆèªè¨¼ç­‰ï¼‰ |\n\n## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ\n\n```\nproject/\nâ”œâ”€â”€ app/\nâ”‚   â”œâ”€â”€ server/\nâ”‚   â”‚   â”œâ”€â”€ routes.mbt      # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ»ãƒšãƒ¼ã‚¸ãƒ»APIå®šç¾©\nâ”‚   â”‚   â”œâ”€â”€ db.mbt          # D1 FFIãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°\nâ”‚   â”‚   â””â”€â”€ _using.mbt      # å…±é€šã‚¤ãƒ³ãƒãƒ¼ãƒˆ\nâ”‚   â”œâ”€â”€ client/\nâ”‚   â”‚   â”œâ”€â”€ *.mbt           # Island Components\nâ”‚   â”‚   â””â”€â”€ _using.mbt\nâ”‚   â””â”€â”€ __gen__/            # è‡ªå‹•ç”Ÿæˆï¼ˆ.gitignoreæ¨å¥¨ï¼‰\nâ”œâ”€â”€ src/\nâ”‚   â””â”€â”€ worker.ts           # Cloudflare Workerã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ\nâ”œâ”€â”€ static/\nâ”‚   â””â”€â”€ loader.js           # Luna UIãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ãƒ¼ãƒ€ãƒ¼\nâ”œâ”€â”€ scripts/\nâ”‚   â”œâ”€â”€ patch-for-cloudflare.js  # CF Workersç”¨ãƒ‘ãƒƒãƒ\nâ”‚   â””â”€â”€ bundle-client.js         # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ«\nâ”œâ”€â”€ moon.mod.json           # MoonBitè¨­å®š\nâ”œâ”€â”€ wrangler.json           # Cloudflareè¨­å®š\nâ””â”€â”€ .sol/                   # Solç”Ÿæˆç‰©ï¼ˆ.gitignoreæ¨å¥¨ï¼‰\n```\n\n## é–‹ç™ºã‚³ãƒãƒ³ãƒ‰ï¼ˆjustï¼‰\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ `just` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦é–‹ç™ºã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚\n\n```bash\n# ä¸»è¦ã‚³ãƒãƒ³ãƒ‰\njust dev          # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆwrangler devï¼‰\njust build        # å®Œå…¨ãƒ“ãƒ«ãƒ‰\njust deploy       # Cloudflare Workersã«ãƒ‡ãƒ—ãƒ­ã‚¤\n\n# ãƒ“ãƒ«ãƒ‰é–¢é€£\njust generate     # sol generate å®Ÿè¡Œ\njust moon-build   # MoonBitãƒ“ãƒ«ãƒ‰\njust bundle       # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ«\njust clean        # ãƒ“ãƒ«ãƒ‰æˆæœç‰©å‰Šé™¤\n\n# ãƒ†ã‚¹ãƒˆé–¢é€£\njust test         # MoonBitå˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ\njust test-e2e     # E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œ\njust test-all     # å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ\n\n# SSGé–¢é€£\njust ssg          # SSGãƒ“ãƒ«ãƒ‰\njust ssg-preview  # SSGãƒ“ãƒ«ãƒ‰ + ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼\n\n# å‹ãƒã‚§ãƒƒã‚¯ãƒ»ãƒªãƒ³ãƒˆ\njust check        # moon check å®Ÿè¡Œ\njust fmt          # moon fmt å®Ÿè¡Œ\n```\n\n## ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹\n\n```bash\n# å®Œå…¨ãƒ“ãƒ«ãƒ‰\npnpm build\n# å†…éƒ¨ã§å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†:\n# 1. sol generate        - __gen__ã¨.solã‚’ç”Ÿæˆ\n# 2. moon build --target js  - MoonBitã‚’JSã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«\n# 3. patch-for-cloudflare.js - CF Workersç”¨ã«ãƒ‘ãƒƒãƒ\n# 4. bundle-client.js    - Island Componentsã‚’ãƒãƒ³ãƒ‰ãƒ«\n```\n\n### wrangler.jsonã§ã®è‡ªå‹•ãƒ“ãƒ«ãƒ‰è¨­å®š\n\n```json\n{\n  \"build\": {\n    \"command\": \"pnpm build\",\n    \"watch_dir\": [\"src\", \"app\"]\n  }\n}\n```\n\n## SSG/ISRæ©Ÿèƒ½\n\nSol Frameworkã¯é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆï¼ˆSSGï¼‰ã¨å¢—åˆ†é™çš„å†ç”Ÿæˆï¼ˆISRï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆã€‚\n\n### sol.config.jsonè¨­å®š\n\n```json\n{\n  \"ssg\": {\n    \"enabled\": true,\n    \"outDir\": \".sol/static\",\n    \"routes\": [\"/\", \"/about\", \"/posts/*\"]\n  },\n  \"isr\": {\n    \"enabled\": true,\n    \"revalidate\": 60\n  },\n  \"metaFiles\": {\n    \"sitemap\": true,\n    \"rss\": true,\n    \"llmsTxt\": true\n  }\n}\n```\n\n### SSGãƒ“ãƒ«ãƒ‰\n\n```bash\n# SSGãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ\nsol build --ssg\n\n# ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼\nwrangler pages dev .sol/static\n```\n\n### ãƒ«ãƒ¼ãƒˆåˆ¥ISRè¨­å®š\n\n```moonbit\npub fn routes() -> Array[@router.SolRoutes] {\n  [\n    @router.SolRoutes::Page(\n      path=\"/posts/:slug\",\n      handler=@router.PageHandler(post_page),\n      title=\"Post\",\n      meta=[],\n      revalidate=Some(60),  // 60ç§’ã”ã¨ã«å†ç”Ÿæˆ\n      cache=None,\n    ),\n  ]\n}\n```\n\n### ISRã®å‹•ä½œ\n\n1. åˆå›ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã—KVã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥\n2. revalidateæœŸé–“å†…: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰å³æ™‚å¿œç­”\n3. revalidateæœŸé–“å¾Œ: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å†ç”Ÿæˆã€å¤ã„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’è¿”å´\n4. å†ç”Ÿæˆå®Œäº†å¾Œ: æ–°ã—ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥\n\n## metaFilesæ©Ÿèƒ½\n\nè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ãƒ¡ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã€‚\n\n### sitemap.xml\n\n```json\n// sol.config.json\n{\n  \"metaFiles\": {\n    \"sitemap\": {\n      \"enabled\": true,\n      \"hostname\": \"https://example.com\",\n      \"exclude\": [\"/admin/*\", \"/api/*\"]\n    }\n  }\n}\n```\n\n### RSS feed (feed.xml)\n\n```json\n// sol.config.json\n{\n  \"metaFiles\": {\n    \"rss\": {\n      \"enabled\": true,\n      \"title\": \"My Blog\",\n      \"description\": \"æŠ€è¡“ãƒ–ãƒ­ã‚°\",\n      \"feedPath\": \"/feed.xml\"\n    }\n  }\n}\n```\n\n### llms.txt\n\n```json\n// sol.config.json\n{\n  \"metaFiles\": {\n    \"llmsTxt\": {\n      \"enabled\": true,\n      \"include\": [\"/docs/*\", \"/blog/*\"],\n      \"exclude\": [\"/admin/*\"]\n    }\n  }\n}\n```\n\nç”Ÿæˆä¾‹:\n```\n# My Site\n> ã‚µã‚¤ãƒˆã®èª¬æ˜\n\n## Docs\n- /docs/getting-started: Getting Started Guide\n- /docs/api: API Reference\n\n## Blog\n- /blog/post-1: è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«1\n- /blog/post-2: è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«2\n```\n\n## CSS Utilitiesæ©Ÿèƒ½\n\nSol Frameworkã®CSSæœ€é©åŒ–æ©Ÿèƒ½ã€‚\n\n### è‡ªå‹•CSSæŠ½å‡º\n\n```json\n// sol.config.json\n{\n  \"css\": {\n    \"extract\": true,\n    \"minify\": true,\n    \"purge\": true\n  }\n}\n```\n\n### ãƒšãƒ¼ã‚¸åˆ¥CSSåˆ†å‰²\n\n```json\n// sol.config.json\n{\n  \"css\": {\n    \"splitting\": true,\n    \"chunks\": {\n      \"/\": [\"base\", \"home\"],\n      \"/posts/*\": [\"base\", \"posts\", \"markdown\"]\n    }\n  }\n}\n```\n\n### ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–é–¾å€¤\n\n```json\n// sol.config.json\n{\n  \"css\": {\n    \"inlineThreshold\": 4096,  // 4KBæœªæº€ã¯ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–\n    \"criticalCss\": true       // Above-the-fold CSSã‚’æŠ½å‡º\n  }\n}\n```\n\nç”Ÿæˆã•ã‚Œã‚‹HTML:\n```html\n<head>\n  <!-- ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«CSSã¯ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ -->\n  <style>/* critical styles */</style>\n  <!-- éã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ã¯éåŒæœŸãƒ­ãƒ¼ãƒ‰ -->\n  <link rel=\"preload\" href=\"/styles/chunk-posts.css\" as=\"style\">\n</head>\n```\n\n## ãƒ†ã‚¹ãƒˆ\n\n### MoonBit Unit ãƒ†ã‚¹ãƒˆ\n\nãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ `*_test.mbt` ã®å‘½åè¦å‰‡ã€‚\n\n```moonbit\n// app/server/routes_test.mbt\ntest \"parse_slug extracts correct value\" {\n  let result = parse_slug(\"/posts/hello-world\")\n  assert_eq!(result, Some(\"hello-world\"))\n}\n\ntest \"home_page returns valid html\" {\n  let ctx = mock_page_context(\"/\")\n  let html = home_page(ctx)\n  assert_true!(html.contains(\"<h1>\"))\n}\n```\n\nå®Ÿè¡Œ:\n```bash\nmoon test\n# ã¾ãŸã¯\njust test\n```\n\n### Integration ãƒ†ã‚¹ãƒˆ\n\n```moonbit\n// app/server/integration_test.mbt\ntest \"api_create_post with valid data\" {\n  let ctx = mock_api_context(\n    method=\"POST\",\n    body=\"{\\\"title\\\": \\\"Test\\\", \\\"content\\\": \\\"Hello\\\"}\",\n  )\n  let result = api_create_post(ctx)\n  assert_eq!(result.status, 201)\n}\n```\n\n### E2E ãƒ†ã‚¹ãƒˆ\n\nPlaywrightã‚’ä½¿ç”¨ã€‚\n\n```typescript\n// e2e/posts.spec.ts\nimport { test, expect } from '@playwright/test';\n\ntest('create and view post', async ({ page }) => {\n  await page.goto('/posts/new');\n  await page.fill('[name=\"title\"]', 'Test Post');\n  await page.fill('[name=\"content\"]', 'Hello World');\n  await page.click('button[type=\"submit\"]');\n\n  await expect(page).toHaveURL(/\\/posts\\/test-post/);\n  await expect(page.locator('h1')).toContainText('Test Post');\n});\n```\n\nå®Ÿè¡Œ:\n```bash\npnpm test:e2e\n# ã¾ãŸã¯\njust test-e2e\n```\n\n## è©³ç´°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\n- ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨ãƒšãƒ¼ã‚¸å®šç¾© â†’ [SOL-ROUTING.md](SOL-ROUTING.md)\n- Island Components â†’ [ISLAND-COMPONENTS.md](ISLAND-COMPONENTS.md)\n- Server Actions â†’ [SERVER-ACTIONS.md](SERVER-ACTIONS.md)\n- MoonBit FFIãƒ‘ã‚¿ãƒ¼ãƒ³ â†’ [MOONBIT-FFI.md](MOONBIT-FFI.md)\n- Cloudflare Workersãƒ‡ãƒ—ãƒ­ã‚¤ â†’ [CLOUDFLARE-DEPLOY.md](CLOUDFLARE-DEPLOY.md)\n- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– â†’ [PERFORMANCE.md](PERFORMANCE.md)**\n\n## ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\n### ãƒ«ãƒ¼ãƒˆå®šç¾©ï¼ˆroutes.mbtï¼‰\n\n```moonbit\npub fn routes() -> Array[@router.SolRoutes] {\n  [\n    @router.SolRoutes::Page(\n      path=\"/\",\n      handler=@router.PageHandler(home_page),\n      title=\"Home\",\n      meta=[], revalidate=None, cache=None,\n    ),\n    @router.SolRoutes::Post(\n      path=\"/api/posts\",\n      handler=@router.ApiHandler(api_create_post),\n    ),\n  ]\n}\n```\n\n### Island Componentï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰\n\n```moonbit\npub fn my_component(props : MyProps) -> DomNode {\n  let count = @signal.signal(0)\n\n  div(class=\"container\", [\n    button(\n      on=events().click(fn(_) { count.set(count.get() + 1) }),\n      [text_of(count)]\n    )\n  ])\n}\n```\n\n### Server Action\n\n```moonbit\nlet create_action : @action.ActionHandler = @action.ActionHandler(async fn(ctx) {\n  let body = ctx.body\n  let data = parse_json(body)\n  // å‡¦ç†...\n  @action.ActionResult::ok({ message: \"Success\" })\n})\n\npub fn action_registry() -> @action.ActionRegistry {\n  @action.ActionRegistry::new(allowed_origins=[\n    \"http://localhost:8787\",\n    \"https://your-app.workers.dev\",\n  ]).register(\n    @action.ActionDef::new(\"create\", create_action)\n  )\n}\n```\n\n### D1 FFI\n\n```moonbit\nextern \"js\" fn db_query(sql : String) -> @core.Promise[@core.Any] =\n  #| async (sql) => {\n  #|   const db = globalThis.__D1_DB;\n  #|   return await db.prepare(sql).all();\n  #| }\n```\n\n## ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–\n\n### 403ã‚¨ãƒ©ãƒ¼ï¼ˆServer Actionsï¼‰\nâ†’ `action_registry()`ã®`allowed_origins`ã«æœ¬ç•ªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¿½åŠ \n\n### CSSãŒé©ç”¨ã•ã‚Œãªã„ï¼ˆIsland Componentï¼‰\nâ†’ CSSã‚¯ãƒ©ã‚¹åãŒroutes.mbtã®ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©ã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ç¢ºèª\n\n### ãƒ“ãƒ«ãƒ‰å¾Œã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼\nâ†’ `scripts/patch-for-cloudflare.js`ã§CF Workerséäº’æ›ã‚³ãƒ¼ãƒ‰ã‚’ãƒ‘ãƒƒãƒ\n\n### ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ãƒ“ãƒ«ãƒ‰ã•ã‚Œãªã„\nâ†’ `wrangler.json`ã«`build.command`ã‚’è¨­å®š\n\n### ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ï¼ˆentries_json undefinedç­‰ï¼‰\nâ†’ **é‡è¦**: æ—¥æœ¬èªã‚„çµµæ–‡å­—ã‚’å«ã‚€ãƒ‡ãƒ¼ã‚¿ã‚’Island Componentã«æ¸¡ã™å ´åˆã€`json_stringify`ã§ASCII-safeãªJSONç”ŸæˆãŒå¿…é ˆã€‚Luna UIã®`luna:state`å±æ€§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†ãŒUTF-16ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã‚’æ­£ã—ãå‡¦ç†ã§ããªã„ãŸã‚ã€‚è©³ç´°ã¯[PERFORMANCE.md](PERFORMANCE.md)å‚ç…§\n\n### CLSï¼ˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚·ãƒ•ãƒˆï¼‰ãŒé«˜ã„\nâ†’ ã‚¹ã‚±ãƒ«ãƒˆãƒ³ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰ã®é«˜ã•ã‚’å®Ÿéš›ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨è¿‘ä¼¼ã•ã›ã‚‹ã€‚è¨ˆç®—å¼: `ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ•° * 21px + 30px`ã€‚è©³ç´°ã¯[PERFORMANCE.md](PERFORMANCE.md)å‚ç…§\n\n### SSGãƒ“ãƒ«ãƒ‰ã§ãƒ«ãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„\nâ†’ `sol.config.json`ã®`ssg.routes`ã«ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ï¼ˆ`/posts/*`ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€å‹•çš„ãƒ«ãƒ¼ãƒˆã®ã‚¹ãƒ©ãƒƒã‚°ä¸€è¦§ã‚’è¿”ã™é–¢æ•°ãŒå¿…è¦\n```moonbit\npub fn get_static_paths() -> Array[String] {\n  // DBã¾ãŸã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å…¨ã‚¹ãƒ©ãƒƒã‚°ã‚’å–å¾—\n  [\"post-1\", \"post-2\", \"post-3\"]\n}\n```\n\n### SSGã§å‹•çš„ãƒ‡ãƒ¼ã‚¿ãŒå¤ã„\nâ†’ SSGã¯ãƒ“ãƒ«ãƒ‰æ™‚ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã€‚é »ç¹ã«æ›´æ–°ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã«ã¯ISRã‚’ä½¿ç”¨ã™ã‚‹ã‹ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ•ã‚§ãƒƒãƒã‚’çµ„ã¿åˆã‚ã›ã‚‹\n\n### ISRãŒå†ç”Ÿæˆã•ã‚Œãªã„\nâ†’ ç¢ºèªäº‹é …:\n1. `revalidate`ãŒãƒ«ãƒ¼ãƒˆå®šç¾©ã§è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹\n2. KVãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãŒ`wrangler.json`ã§è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹\n3. `sol.config.json`ã§`isr.enabled: true`ã‹\n\n### ISRã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ãŸã„\nâ†’ æ‰‹å‹•ã‚¯ãƒªã‚¢æ–¹æ³•:\n```bash\n# ç‰¹å®šãƒ«ãƒ¼ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤\nwrangler kv:key delete --binding=SOL_CACHE \"/posts/slug-name\"\n\n# å…¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢\nwrangler kv:bulk delete --binding=SOL_CACHE keys.json\n```\n\n### sitemap.xmlãŒç”Ÿæˆã•ã‚Œãªã„\nâ†’ `sol.config.json`ã§`metaFiles.sitemap.hostname`ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã€‚ãƒ›ã‚¹ãƒˆåãŒãªã„ã¨sitemapã¯ç”Ÿæˆã•ã‚Œãªã„\n\n### CSSãŒé‡è¤‡ã—ã¦ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹\nâ†’ `css.splitting`ãŒæœ‰åŠ¹ãªå ´åˆã€ãƒãƒ£ãƒ³ã‚¯å®šç¾©ãŒé‡è¤‡ã—ã¦ã„ãªã„ã‹ç¢ºèªã€‚å…±é€šã‚¹ã‚¿ã‚¤ãƒ«ã¯`base`ãƒãƒ£ãƒ³ã‚¯ã«ã¾ã¨ã‚ã‚‹\n",
        "plugins/kazuph-dotfiles/skills/moonbit-luna-ui/SOL-ROUTING.md": "# Sol Framework ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\nSol Frameworkã«ãŠã‘ã‚‹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©ã®è©³ç´°ã‚¬ã‚¤ãƒ‰ã€‚\n\n## ãƒ«ãƒ¼ãƒˆå®šç¾©ã®åŸºæœ¬æ§‹é€ \n\n```moonbit\npub fn routes() -> Array[@router.SolRoutes] {\n  [\n    // ãƒ«ãƒ¼ãƒˆå®šç¾©...\n  ]\n}\n```\n\n## ãƒ«ãƒ¼ãƒˆã‚¿ã‚¤ãƒ—\n\n### 1. Pageï¼ˆãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒˆï¼‰\n\nSSRãƒšãƒ¼ã‚¸ã‚’å®šç¾©ã€‚`PageHandler`ã§asyncé–¢æ•°ã‚’ãƒ©ãƒƒãƒ—ã€‚\n\n```moonbit\n@router.SolRoutes::Page(\n  path=\"/\",\n  handler=@router.PageHandler(home_page),\n  title=\"Home\",\n  meta=[],\n  revalidate=None,\n  cache=None,\n)\n```\n\n**ãƒãƒ³ãƒ‰ãƒ©ã®å‹ï¼š**\n```moonbit\nasync fn home_page(_props : @router.PageProps) -> @server_dom.ServerNode {\n  @server_dom.ServerNode::async_(async fn() {\n    // éåŒæœŸå‡¦ç†ï¼ˆDBå‘¼ã³å‡ºã—ç­‰ï¼‰\n    let data = db_get_data().wait()\n    @luna.fragment([...])\n  })\n}\n```\n\n### 2. Postï¼ˆAPIãƒ«ãƒ¼ãƒˆï¼‰\n\nPOSTãƒªã‚¯ã‚¨ã‚¹ãƒˆç”¨ã€‚ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚„APIå‘¼ã³å‡ºã—ã«ä½¿ç”¨ã€‚\n\n```moonbit\n@router.SolRoutes::Post(\n  path=\"/api/posts\",\n  handler=@router.ApiHandler(api_create_post),\n)\n```\n\n**ãƒãƒ³ãƒ‰ãƒ©ã®å‹ï¼š**\n```moonbit\nasync fn api_create_post(props : @router.PageProps) -> @core.Any {\n  let body = get_form_body_promise(props).wait()\n  // å‡¦ç†...\n  api_json_success(\"æˆåŠŸ\", \"slug-value\")\n}\n```\n\n### 3. Layoutï¼ˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰\n\nå­ãƒ«ãƒ¼ãƒˆã‚’å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§ãƒ©ãƒƒãƒ—ã€‚\n\n```moonbit\n@router.SolRoutes::Layout(\n  segment=\"\",         // ãƒ‘ã‚¹ã‚»ã‚°ãƒ¡ãƒ³ãƒˆï¼ˆç©º=ç¾åœ¨ã®ãƒ‘ã‚¹ï¼‰\n  layout=root_layout,\n  children=[\n    // å­ãƒ«ãƒ¼ãƒˆ...\n  ]\n)\n```\n\n**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆé–¢æ•°ï¼š**\n```moonbit\nfn root_layout(\n  _props : @router.PageProps,\n  content : @server_dom.ServerNode,\n) -> @server_dom.ServerNode raise Error {\n  @server_dom.ServerNode::async_(async fn() {\n    let inner = content.resolve()\n    @luna.fragment([\n      nav([...]),\n      div(class=\"content\", [inner]),\n    ])\n  })\n}\n```\n\n### 4. WithMiddlewareï¼ˆãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢é©ç”¨ï¼‰\n\nå­ãƒ«ãƒ¼ãƒˆã«ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’é©ç”¨ã€‚\n\n```moonbit\n@router.SolRoutes::WithMiddleware(\n  middleware=[@mw.logger(), @mw.security_headers_relaxed()],\n  children=[\n    // ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãŒé©ç”¨ã•ã‚Œã‚‹ãƒ«ãƒ¼ãƒˆ...\n  ]\n)\n```\n\n## å‹•çš„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿\n\nãƒ‘ã‚¹ã« `:param` å½¢å¼ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©ã€‚\n\n```moonbit\n@router.SolRoutes::Page(\n  path=\"/posts/:slug\",\n  handler=@router.PageHandler(post_detail),\n  ...\n)\n```\n\n**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å–å¾—ï¼š**\n```moonbit\nasync fn post_detail(props : @router.PageProps) -> @server_dom.ServerNode {\n  let slug = props.params.get_param(\"slug\").unwrap_or(\"\")\n  // ...\n}\n```\n\n## ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ«ãƒ¼ãƒˆ\n\nLayoutã¨childrenã‚’çµ„ã¿åˆã‚ã›ã¦ãƒã‚¹ãƒˆã€‚\n\n```moonbit\n@router.SolRoutes::Layout(segment=\"/admin\", layout=admin_layout, children=[\n  @router.SolRoutes::Page(\n    path=\"/\",                    // /admin\n    handler=@router.PageHandler(admin_index),\n    ...\n  ),\n  @router.SolRoutes::Page(\n    path=\"/posts/new\",           // /admin/posts/new\n    handler=@router.PageHandler(admin_new_post),\n    ...\n  ),\n  @router.SolRoutes::Page(\n    path=\"/posts/:id/edit\",      // /admin/posts/:id/edit\n    handler=@router.PageHandler(admin_edit_post),\n    ...\n  ),\n])\n```\n\n## RouterConfig\n\nHTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ãƒ­ãƒ¼ãƒ€ãƒ¼URLã‚’è¨­å®šã€‚\n\n```moonbit\npub fn config() -> @router.RouterConfig {\n  @router.RouterConfig::default()\n  .with_root_template(ROOT)      // HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡å­—åˆ—\n  .with_loader_url(\"/loader.js\") // Island Componentãƒ­ãƒ¼ãƒ€ãƒ¼\n}\n```\n\n### HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç‰¹æ®Šãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€\n\n| ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ | å½¹å‰² |\n|------------|------|\n| `__LUNA_TITLE__` | ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ« |\n| `__LUNA_HEAD__` | headå†…è¿½åŠ è¦ç´  |\n| `__LUNA_MAIN__` | ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ |\n\n### CSSã®å®šç¾©\n\nROOTãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…ã®`<style>`ã‚¿ã‚°ã§CSSå®šç¾©ã€‚\nIsland Componentã§ä½¿ç”¨ã™ã‚‹ã‚¯ãƒ©ã‚¹åã‚‚ã“ã“ã§å®šç¾©ãŒå¿…è¦ã€‚\n\n```moonbit\nconst ROOT : String =\n  #|<!DOCTYPE html>\n  #|<html>\n  #|<head>\n  #|  ...\n  #|  <style>\n  #|    .my-component { ... }\n  #|  </style>\n  #|  __LUNA_HEAD__\n  #|</head>\n  #|<body>\n  #|  <main id=\"__sol__\">__LUNA_MAIN__</main>\n  #|  <script src=\"/loader.js\"></script>\n  #|</body>\n  #|</html>\n```\n\n## ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç¨®åˆ¥\n\n### SSRãƒšãƒ¼ã‚¸\n\n`@server_dom.ServerNode` ã‚’è¿”ã™ã€‚\n\n```moonbit\n@luna.fragment([\n  h1([text(\"Title\")]),\n  p([text(\"Content\")]),\n])\n```\n\n### JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹\n\nAPIãƒãƒ³ãƒ‰ãƒ©ã‹ã‚‰ `@core.Any` ã‚’è¿”ã™ã€‚\n\n```moonbit\nextern \"js\" fn api_json_success(message : String, slug : String) -> @core.Any =\n  #| (message, slug) => ({ success: true, message, slug })\n```\n\n### ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ\n\nHTTP 302ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã€‚\n\n```moonbit\nextern \"js\" fn hono_redirect(_props : @router.PageProps, url : String) -> @core.Any =\n  #| (props, url) => new Response(null, {\n  #|   status: 302,\n  #|   headers: { 'Location': url }\n  #| })\n```\n\n## ã‚µãƒ¼ãƒãƒ¼å´ã®DOMè¦ç´ \n\n`app/server/elements.mbt` ã§å®šç¾©ã•ã‚ŒãŸè¦ç´ ã‚’ä½¿ç”¨ã€‚\n\n```moonbit\n// åŸºæœ¬è¦ç´ \ndiv(class=\"...\", [...])\np([text(\"...\")])\na(href=\"/path\", [...])\nspan([...])\n\n// ãƒ†ãƒ¼ãƒ–ãƒ«\ntable(class=\"...\", [thead([...]), tbody([...])])\ntr([td([...]), td([...])])\n\n// ãƒ•ã‚©ãƒ¼ãƒ \nform(http_method=\"POST\", action=\"/api/...\", [...])\nbutton(attrs=[(\"type\", @luna.attr_static(\"submit\"))], [...])\n\n// ç”ŸHTMLæŒ¿å…¥ï¼ˆMarkdownå¤‰æ›çµæœãªã©ï¼‰\n@luna.raw_html(html_string)\n```\n\n## ã‚ˆãã‚ã‚‹ãƒŸã‚¹\n\n### 1. asyncé–¢æ•°ã®ãƒ©ãƒƒãƒ—å¿˜ã‚Œ\n\n```moonbit\n// âŒ NG\nasync fn page(props : @router.PageProps) -> @server_dom.ServerNode {\n  @luna.fragment([...])  // asyncé–¢æ•°å†…ã§ç›´æ¥è¿”ã›ãªã„\n}\n\n// âœ… OK\nasync fn page(props : @router.PageProps) -> @server_dom.ServerNode {\n  @server_dom.ServerNode::async_(async fn() {\n    @luna.fragment([...])\n  })\n}\n```\n\n### 2. syncé–¢æ•°ã§éåŒæœŸå‡¦ç†\n\n```moonbit\n// âŒ NG - DBã‚¢ã‚¯ã‚»ã‚¹ãŒã‚ã‚‹å ´åˆ\nasync fn page(props : @router.PageProps) -> @server_dom.ServerNode {\n  @server_dom.ServerNode::sync(@luna.fragment([...]))\n}\n\n// âœ… OK\nasync fn page(props : @router.PageProps) -> @server_dom.ServerNode {\n  @server_dom.ServerNode::async_(async fn() {\n    let data = db_query().wait()\n    @luna.fragment([...])\n  })\n}\n```\n\n### 3. Island Componentã¸ã®ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—\n\nIsland Componentã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒãƒ¼å´ã®ãƒ‡ãƒ¼ã‚¿ã¯propsã§æ¸¡ã™å¿…è¦ãŒã‚ã‚‹ã€‚\n\n```moonbit\n@server_dom.client(\n  @types.markdown_editor({\n    initial_content: content,  // ã‚µãƒ¼ãƒãƒ¼ã§å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’propsã§æ¸¡ã™\n    action_url: \"/_action/update-post\",\n    post_id: id,\n    ...\n  }),\n  [div([text(\"Loading...\")])],  // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯\n)\n```\n",
        "plugins/kazuph-dotfiles/skills/moonbit-practice/SKILL.md": "---\nname: moonbit-practice\ndescription: MoonBit code generation best practices. Use when writing MoonBit code to avoid common AI mistakes with syntax, tests, and benchmarks.\n---\n\n# MoonBit Practice Guide\n\nBest practices for AI when generating MoonBit code.\nIf you don't understand something here, use `moonbit-docs` skill to search the official documentation.\n\n## Guidelines\n\n### Code Navigation: Prefer moon ide over Read/Grep\n\nIn MoonBit projects, **prefer `moon ide` commands over Read tool or grep**.\n\n```bash\n# âŒ Avoid: Reading files directly\nRead src/parser.mbt\n\n# âœ… Recommended: Find definitions from symbols\nmoon ide peek-def Parser::parse\nmoon ide goto-definition -tags 'pub fn' -query 'parse'\n\n# âŒ Avoid: Searching with grep\ngrep -r \"fn parse\" .\n\n# âœ… Recommended: Semantic search\nmoon ide find-references parse\nmoon ide outline src/parser.mbt\n```\n\n**Why:**\n- `moon ide` provides semantic search (distinguishes definitions from call sites)\n- grep picks up comments and strings\n- `moon doc` quickly reveals APIs\n\n### Other Rules\n\n- **Prefer `moon.pkg` over `moon.pkg.json`** - Use `NEW_MOON_PKG=1 moon fmt` to convert\n- Use `moon doc '<Type>'` to explore APIs before implementing\n- Check reference/configuration.md before editing moon.pkg / moon.mod.json\n- Check reference/agents.md when updating CLAUDE.md\n\n## Common Pitfalls\n\n- **Don't use uppercase for variables/functions** - compilation error\n- **`mut` is only for reassignment, not field mutation** - Array push doesn't need it\n- **`return` is unnecessary** - last expression is the return value\n- **Methods require `Type::` prefix**\n- **`++` `--` not supported** - use `i = i + 1` or `i += 1`\n- **No `try` needed for error propagation** - automatic (unlike Swift)\n- **No `await` keyword** - just declare with `async fn`\n- **Prefer range for over C-style** - `for i in 0..<n {...}`\n- **Legacy syntax**: `function_name!(...)` and `function_name(...)?` are deprecated\n\n## Common Syntax Mistakes by AI\n\n### Type Parameter Position\n\n```moonbit\n///| NG: fn identity[T] is old syntax\nfn identity[T](val: T) -> T { val }\n\n///| OK: Type parameter comes right after fn\nfn[T] identity(val: T) -> T { val }\n```\n\n### raise Syntax\n\n```moonbit\n///|\n/// NG: -> T!Error was removed\nfn parse(s: String) -> Int!Error { ... }\n\n///|\n/// OK: Use raise keyword\nfn parse(s: String) -> Int raise Error { ... }\n```\n\n`Int raise` is shorthand for `Int raise Error`.\nasync fn implicitly raises by default; use `noraise` to enforce no errors.\n\n### Macro Calls\n\n```moonbit\n///|\n/// NG: ! suffix was removed\nassert_true!(true)\n\n///|\n/// OK\nassert_true(true)\n```\n\n### Multi-line Text\n\n```moonbit\nlet text =\n  #|line 1\n  #|line 2\n```\n\n### Comments and Block Separators\n\n`///|` is a block separator. `///` comments attach to the following `///|` block.\n\n```moonbit\n///|\n/// This function is foo\nfn foo() -> Unit { ... }\n\n///|\n/// This function is bar\nfn bar() -> Unit { ... }\n```\n\nAvoid consecutive `///|` at the file beginning as they create separate blocks.\n\n## Snapshot Tests\n\n`moon test -u` auto-updates `content=\"\"` in `inspect(val)`.\n\n```moonbit\ntest \"snapshot\" {\n  inspect([1, 2, 3], content=\"\")  // auto-filled by moon test -u\n}\n```\n\nAfter running:\n\n```moonbit\ntest \"snapshot\" {\n  inspect([1, 2, 3], content=\"[1, 2, 3]\")\n}\n```\n\n## Doc Tests\n\nAvailable in `.mbt.md` files or `///|` inline comments.\n\n| Code Block | Behavior |\n|------------|----------|\n| ` ```mbt check ` | Checked by LSP |\n| ` ```mbt test ` | Executed as `test {...}` |\n| ` ```moonbit ` | Display only (not executed) |\n\nExample (inline comment):\n\n```moonbit\n\n///|\n/// Increment an integer by 1\n/// ```mbt test\n/// inspect(incr(41), content=\"42\")\n/// ```\npub fn incr(x : Int) -> Int {\n  x + 1\n}\n```\n\n## Pre-release Checklist\n\nRun before releasing:\n\n```bash\nmoon fmt   # Format code\nmoon info  # Generate type definition files\n```\n\n`pkg.generated.mbti` is auto-generated by `moon info`. Don't edit it directly.\n\n## Exploring Built-in Type Methods\n\n```bash\nmoon doc StringView   # StringView methods\nmoon doc Array        # Array methods\nmoon doc Map          # Map methods\n```\n\n## Quick Reference\n\n| Topic | Command | Details |\n|-------|---------|---------|\n| Test | `moon test` | https://docs.moonbitlang.com/en/stable/language/tests |\n| Update snapshots | `moon test -u` | Same as above |\n| Filtered test | `moon test --filter 'glob'` | Run specific tests |\n| Benchmark | `moon bench` | https://docs.moonbitlang.com/en/stable/language/benchmarks |\n| Doc Test | `moon check` / `moon test` | https://docs.moonbitlang.com/en/stable/language/docs |\n| Format | `moon fmt` | - |\n| Generate types | `moon info` | - |\n| Doc reference | `moon doc <Type>` | - |\n\n## moon ide Tools\n\nMore accurate than grep for code navigation. See `reference/ide.md` for details.\n\n```bash\n# Show symbol definition\nmoon ide peek-def Parser::read_u32_leb128\n\n# Package outline\nmoon ide outline .\n\n# Find references\nmoon ide find-references TranslationUnit\n\n# Jump to type definition (with location)\nmoon ide peek-def Parser -loc src/parse.mbt:46:4\n```\n\n## Functional for loop\n\nPrefer functional for loops whenever possible. More readable and easier to reason about.\n\n```moonbit\n// Functional for loop with state\nfor i = 0, sum = 0; i <= 10; {\n  continue i + 1, sum + i  // Update state\n} else {\n  sum  // Value at loop exit\n}\n\n// Range for (recommended)\nfor i in 0..<n { ... }\nfor i, v in array { ... }  // index and value\n```\n\n## Error Handling\n\nMoonBit uses checked errors. See `reference/ffi.md` for details.\n\n```moonbit\n///| Declare error type\nsuberror ParseError {\n  InvalidEof\n  InvalidChar(Char)\n}\n\n///| Declare with raise, auto-propagates\nfn parse(s: String) -> Int raise ParseError {\n  if s.is_empty() { raise ParseError::InvalidEof }\n  ...\n}\n\n///| Convert to Result\nlet result : Result[Int, ParseError] = try? parse(s)\n\n///| Handle with try-catch\nparse(s) catch {\n  ParseError::InvalidEof => -1\n  _ => 0\n}\n```\n\n## Assets\n\nassets/ci.yaml is a GitHub Actions workflow for CI\n",
        "plugins/kazuph-dotfiles/skills/moonbit-practice/assets/AGENTS.md": "# MoonBit Project\n\nThis is a [MoonBit](https://docs.moonbitlang.com) project.\n\n## Quick Commands\n\n```bash\njust           # check + test\njust fmt       # format code\njust check     # type check\njust test      # run tests\njust test-update  # update snapshot tests\njust run       # run main\njust info      # generate type definition files\n```\n\n## Project Structure\n\n- `moon.mod.json` - Module definition\n- `moon.pkg` - Package dependencies (per directory)\n- `*.mbt` - Source files\n- `*_test.mbt` - Blackbox test files\n- `*_wbtest.mbt` - Whitebox test files\n- `*.mbt.md` - Doc test files\n- `*.mbti` - Generated type interfaces (auto-generated by `moon info`)\n\n## Coding Convention\n\n- Each block is separated by `///|`\n- MoonBit code uses snake_case for variables/functions (lowercase only)\n\n## Code Navigation (IMPORTANT)\n\n**Always use `moon ide` and `moon doc` instead of grep/Read for code exploration.**\n\n### `moon ide` - Semantic Code Navigation\n\n```bash\n# Show symbol definition with source code\nmoon ide peek-def fib\nmoon ide peek-def Type::method\n\n# List symbols in a file\nmoon ide outline src/lib.mbt\n```\n\n### `moon doc` - Standard Library API Discovery\n\n```bash\nmoon doc 'String'         # List String methods\nmoon doc 'Array'          # List Array methods\nmoon doc '@json'          # List symbols in package\nmoon doc 'String::*rev*'  # Glob pattern search\n```\n\n## Tooling\n\n- `moon fmt` is used to format your code properly.\n- `moon info` is used to update the generated interface of the package.\n- `moon test` to check the test is passed. Use `moon test --update` to update snapshots.\n- `moon check` to check the code is linted correctly.\n\n## Before Commit\n\n```bash\njust release-check  # fmt + info + check + test\n```\n",
        "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/agents.md": "---\ntitle: MoonBit Project Layouts\n---\n\n# MoonBit Project Layouts\n\nYou have the ability to detect specific types of MoonBit projects and work with\nthem adaptively.\n\nMoonBit source files use the `.mbt` extension and interface files `.mbti`. At\nthe top-level of a MoonBit project there is a `moon.mod.json` file specifying\nthe metadata of the project. The project may contain multiple packages, each\nwith its own `moon.pkg.json` file.\n\nHere are some typical project layouts you may encounter:\n\n- **Module**: When you see a `moon.mod.json` file in the project directory, you\n  are already in a MoonBit project.\n  A MoonBit *module* is like a Go module.\n  It is a collection of packages, usually corresponding to a repository or project.\n  Module boundaries matter for dependency management and import paths.\n  A module contains many packages in subdirectories.\n\n- **Package**: When you see a `moon.pkg.json` file, but not a `moon.mod.json`\n  file, it means you are in a MoonBit package. All subcommands of `moon` will\n  still be executed in the directory of the module (where `moon.mod.json` is\n  located), not the current package.\n  A MoonBit *package* is the actual compilation unit (like a Go package).\n  All source files in the same package are concatenated into one unit.\n  The `package` name in the source defines the package, not the file name.\n  Imports refer to module + package paths, NEVER to file names.\n\n- **Files**:\n  A `.mbt` file is just a chunk of source inside a package.\n  File names do NOT create modules or namespaces.\n  You may freely split/merge/move declarations between files in the same package.\n  Any declaration in a package can reference any other declaration in that package, regardless of file.\n\n## Coding/layout rules you MUST follow:\n\n1. Prefer many small, cohesive files over one large file.\n   - Group related types and functions into focused files (e.g. http_client.mbt, router.mbt).\n   - If a file is getting large or unfocused, create a new file and move related declarations into it.\n\n2. You MAY freely move declarations between files inside the same package.\n   - Moving a function/struct/trait between files does not change semantics, as long as its name and pub-ness stay the same.\n   - It is safe to refactor by splitting or merging files inside a package.\n\n3. File names are purely organizational.\n   - Do NOT assume file names define modules, and do NOT use file names in type paths.\n   - Choose file names to describe a feature or responsibility, not to mirror type names rigidly.\n\n4. When adding new code:\n   - Prefer adding it to an existing file that matches the feature.\n   - If no good file exists, create a new file under the same package with a descriptive name.\n   - Avoid creating giant \"misc\" or \"util\" files.\n\n5. Tests:\n   - Place tests in dedicated test files (e.g. *_test.mbt) within the appropriate package.\n   - It is fineâ€”and encouragedâ€”to have multiple small test files.\n\n## `.mbti` Files - Package Interface Documentation\n\nMoonBit interface files (`pkg.generated.mbti`) are compiler-generated summaries of each package's public API surface. They provide a formal, concise overview of all exported types, functions, and traits without implementation details.\n\n**Standard library interfaces** are available in `~/.moon/lib/core`:\n\n```\n$ tree -P '*.mbti' -I 'internal' --prune ~/.moon/lib/core # ignore internal packages\n/Users/username/.moon/lib/core\nâ”œâ”€â”€ builtin\nâ”‚   â””â”€â”€ pkg.generated.mbti\nâ”œâ”€â”€ array\nâ”‚   â””â”€â”€ pkg.generated.mbti\nâ”œâ”€â”€ bench\nâ”‚   â””â”€â”€ pkg.generated.mbti\nâ”œâ”€â”€ bigint\nâ”‚   â””â”€â”€ pkg.generated.mbti\n.....\n```\n\n**When to use each approach**:\n- Use `moon doc` for interactive API discovery (preferred, see \"API Discovery with `moon doc`\" section below)\n- Read `.mbti` files directly when you need the complete API surface at once or when working offline\n\n**Reading `.mbti` files for API discovery**:\n- **Start with `builtin/pkg.generated.mbti`** - contains core types (String, Int, Array, etc.) and their fundamental APIs\n- **Note**: Some builtin types like `String` expose APIs in both `builtin` and their dedicated packages (e.g., `String`)\n- **Local dependencies**: Find `.mbti` files in the `.mooncakes` directory by searching for `pkg.generated.mbti`\n- **Your own packages**: After running `moon info`, check the generated `.mbti` in each package directory to verify public API changes\n# MoonBit Language Fundamentals\n\n## Core Facts\n\nCore facts that impact how you write and refactor code.\n\n- **Expressionâ€‘oriented**: `if`, `match`, loops return values; last expression is the return.\n- **References by default**: Arrays/Maps/structs mutate via reference; use `Ref[T]` for primitive mutability.\n- **Errors**: Functions declare `raise ...`; use `try?` for `Result` or `try { } catch { }` to handle.\n- **Blocks**: Separate topâ€‘level items with `///|`. Generate code blockâ€‘byâ€‘block.\n- **Visibility**: `fn` private by default; `pub` exposes read/construct as allowed; `pub(all)` allows external construction.\n- **Naming convention**: lower_snake for values/functions; UpperCamel for types/enums; enum variants start UpperCamel.\n- **Packages**: No `import` in code files; call via `@alias.fn`. Configure imports in `moon.pkg.json`.\n- **Placeholders**: `...` is a valid placeholder in MoonBit code for incomplete implementations.\n- **Global values**: immutable by default and generally require type annotations.\n- **Garbage collection**: MoonBit has a GC, there is no lifetime annotation, there's no ownership system.\n<Important> Delimit top-level items with `///|` comments so tools can split the file reliably.\n</Important>\n\nQuick reference:\n\n```mbt check\n///|\n/// comments doc string\npub fn sum(x : Int, y : Int) -> Int {\n  x + y\n}\n\n///|\n/// error declaration and usage\nsuberror MySubError\n\n///|\nfn risky() -> Int raise MySubError {\n  raise MySubError::MySubError\n}\n\n///|\nstruct Rect {\n  width : Int\n  height : Int\n}\n\n///|\nfn Rect::area(self : Rect) -> Int {\n  self.width * self.height\n}\n\n///|\npub impl Show for Rect with output(_self, logger) {\n  logger.write_string(\"Rect\")\n}\n\n///|\nenum MyOption {\n  MyNone\n  MySome(Int)\n} derive(Show, ToJson, Eq, Compare)\n\n///|\n///  match + loops are expressions\ntest \"everything is expression in MoonBit\" {\n  // tuple\n  let (n, opt) = (1, MySome(2))\n  // if expressions return values\n  let msg : String = if n > 0 { \"pos\" } else { \"non-pos\" }\n  let res = match opt {\n    MySome(x) => {\n      inspect(x, content=\"2\")\n      1\n    }\n    MyNone => 0\n  }\n  let status : Result[Int, String] = Ok(10)\n  // match expressions return values\n  let description = match status {\n    Ok(value) => \"Success: \\{value}\"\n    Err(error) => \"Error: \\{error}\"\n  }\n  let array = [1, 2, 3, 4, 5]\n  let mut i = 0 // mutable bindings (local only, globals are immutable)\n  let target = 3\n  // loops return values with 'break'\n  let found : Int? = while i < array.length() {\n    if array[i] == target {\n      break Some(i) // Exit with value\n    }\n    i = i + 1\n  } else { // Value when loop completes normally\n    None\n  }\n  assert_eq(found, Some(2)) // Found at index 2\n}\n\n///|\n/// global bindings\npub let my_name : String = \"MoonBit\"\n\n///|\npub const PI : Double = 3.14159 // constants use UPPER_SNAKE or PascalCase\n\n///|\npub fn maximum(xs : Array[Int]) -> Int raise {\n  // Toplevel functions are *mutually recursive* by default\n  // `raise` annotation means the function would raise any Error\n  //  Only add `raise XXError` when you do need track the specific error type\n  match xs {\n    [] => fail(\"Empty array\") // fail() is built-in for generic errors\n    [x] => x\n    // pattern match over array, the `.. rest` is a rest pattern\n    // it is of type `ArrayView[Int]` which is a slice\n    [x, .. rest] => {\n      let mut max_val = x // `mut` only allowed in local bindings\n      for y in rest {\n        if y > max_val {\n          max_val = y\n        }\n      }\n      max_val // return can be omitted if the last expression is the return value\n    }\n  }\n}\n\n///|\n/// pub(all) means it can be both read and created outside the package\npub(all) struct Point {\n  x : Int\n  mut y : Int\n} derive(Show, ToJson)\n\n///|\npub enum MyResult[T, E] {\n  MyOk(T) // semicolon `;` is optional when we have a newline\n  MyErr(E) // Enum variants must start uppercase\n} derive(Show, Eq, ToJson)\n// pub means it can only be pattern matched outside the package\n// but it can not be created outside the package, use `pub(all)` otherwise\n\n///|\n/// pub (open) means the trait can be implemented for outside packages\npub(open) trait Comparable {\n  compare(Self, Self) -> Int // `Self` refers to the implementing type\n}\n\n///|\ntest \"inspect test\" {\n  let result = sum(1, 2)\n  inspect(result, content=\"3\")\n  // The `content` can be auto-corrected by running `moon test --update`\n  let point = Point::{ x: 10, y: 20 }\n  // For complex structures, use @json.inspect for better readability:\n  @json.inspect(point, content={ \"x\": 10, \"y\": 20 })\n}\n```\n\n## Integers, Char\n\nMoonBit supports Byte, Int16, Int, UInt16, UInt, Int64, UInt64, etc. When the type is known,\nthe literal can be overloaded:\n\n```mbt check\ntest \"integer and char literal overloading disambiguation via type in the current context\" {\n  let a0 = 1 // a is Int by default\n  let (int, uint, uint16, int64, byte) : (Int, UInt, UInt16, Int64, Byte) = (\n    1, 1, 1, 1, 1,\n  )\n  assert_eq(int, uint16.to_int())\n  let a1 : Int = 'b' // this also works, a5 will be the unicode value\n  let a2 : Char = 'b'\n}\n```\n## Bytes\n\nBytes is immutable; Indexing (`b[i]`) returns a `Byte`.\n\n```mbt check\ntest \"bytes literals overloading and indexing\" {\n  let b0 : Bytes = b\"abcd\"\n  let b1 : Bytes = \"abcd\" // b\" prefix is optional, when we know the type\n  let b2 : Bytes = [0xff, 0x00, 0x01] // Array literal overloading\n  assert_eq(b0[0], b'a') // indexing returns Byte\n}\n```\n## Array\n\nMoonBit Array is resizable array, FixedArray is fixed size array.\n\n```mbt check\n///|\ntest \"array literals overloading: disambiguation via type in the current context\" {\n  let a0 : Array[Int] = [1, 2, 3] // resizable\n  let a1 : FixedArray[Int] = [1, 2, 3]\n  let a2 : ReadOnlyArray[Int] = [1, 2, 3]\n  let a3 : ArrayView[Int] = [1, 2, 3]\n\n}\n```\n\n## String\n\nMoonBit's String is immutable utf16 encoded, `s[i]` returns a code unit (UInt16),\n`s.get_char(i)` returns `Option[Char]`.\nSince MoonBit supports char literal overloading, you can write code snippets like this:\n\n```mbt check\n#warnings(\"-unused_value\")\ntest \"string indexing and utf8 encode/decode\" {\n  let s = \"hello world\"\n  let b0 : UInt16 = s[0]\n  assert_true(b0 is ('\\n' | 'h' | 'b' | 'a'..='z'))\n  // In check mode (expression with explicit type), ('\\n' : Int) is valid.\n  // Here the compiler knows `s[i]` is Int\n\n  // Using get_char for Option handling\n  let b1 : Char? = s.get_char(0)\n  assert_true(b1 is Some('a'..='z'))\n\n  // âš ï¸ Important: Variables won't work with direct indexing\n  let eq_char : Char = '='\n  // s[0] == eq_char // âŒ Won't compile - eq_char is not a literal, lhs is UInt while rhs is Char\n  // Use: s[0] == '=' or s.get_char(0) == Some(eq_char)\n  let bytes = @encoding/utf8.encode(\"ä¸­æ–‡\") // utf8 encode package is in stdlib\n  assert_true(bytes is [0xe4, 0xb8, 0xad, 0xe6, 0x96, 0x87])\n  let s2 : String = @encoding/utf8.decode(bytes) // decode utf8 bytes back to String\n  assert_true(s2 is \"ä¸­æ–‡\")\n}\n```\n\n#### String Interpolation\n\nMoonBit uses `\\{}` for string interpolation:\n\n```mbt check\ntest \"string interpolation basics\" {\n  let point : Point = { x: 10, y: 20 }\n  let name : String = \"Moon\"\n  let config = { \"cache\": 123 }\n  let version = 1.0\n  let message = \"Hello \\{name} v\\{version}\" // \"Hello Moon v1.0\"\n  let desc = \"Point at \\{point}\" // Uses point.to_string()\n  // Works with any type implementing Show\n\n  // âŒ Wrong - quotes inside interpolation not allowed:\n  // println(\"  - Checking if 'cache' section exists: \\{config[\"cache\"]}\")\n\n  // âœ… Correct - extract to variable first:\n  let has_key = config[\"cache\"] // `\"` not allowed in interpolation\n  println(\"  - Checking if 'cache' section exists: \\{has_key}\")\n}\n```\n\n<Important> expressions inside `\\{}` can only be basic expressions (no quotes, newlines, or nested interpolations). String literals are not allowed as it makes lexing too difficult.\n</Important>\n\n#### Multiple line strings\n\n```mbt check\n///|\ntest \"multi-line string literals\" {\n  let multi_line_string : String =\n    #|Hello\n    #|World\n    #|\n  inspect(\n    multi_line_string,\n    content=(\n      #|Hello\n      #|World\n      #|\n    ), // when multiple line string is passed as argument, `()` wrapper is required\n  )\n}\n```\n\n## Map\n\nA built-in `Map` type that preserves insertion order (like\nJavaScript's Map):\n\n```mbt check\n///|\ntest \"map literals and common operations\" {\n  // Map literal syntax\n  let map : Map[String, Int] = { \"a\": 1, \"b\": 2, \"c\": 3 }\n\n  // Empty map\n  let empty : Map[String, Int] = {}\n\n  // From array of pairs\n  let from_pairs : Map[String, Int] = Map::from_array([(\"x\", 1), (\"y\", 2)])\n\n  // Set/update value\n  map[\"new-key\"] = 3\n  map[\"a\"] = 10 // Updates existing key\n\n  // Get value - returns Option[T]\n  assert_eq(map.get(\"new-key\"), Some(3))\n  assert_eq(map.get(\"missing\"), None)\n\n  // Direct access (panics if key missing)\n  let value : Int = map[\"a\"] // value = 10\n\n  // Iteration preserves insertion order\n  for k, v in map {\n    println(\"\\{k}: \\{v}\") // Prints: a: 10, b: 2, c: 3, new-key: 3\n  }\n\n  // Other common operations\n  map.remove(\"b\")\n  assert_eq(map.contains(\"b\"), false)\n  assert_eq(map.length(), 3)\n}\n```\n\n## View Types\n\n**Key Concept**: View types (`StringView`, `BytesView`, `ArrayView[T]`) are zero-copy, non-owning read-only slices created with the `[:]` syntax. They don't allocate memory and are ideal for passing sub-sequences without copying data.\n\n- `String` â†’ `StringView` via `s[:]` or `s[start:end]`\n- `Bytes` â†’ `BytesView` via `b[:]` or `b[start:end]`\n- `Array[T]` â†’ `ArrayView[T]` via `a[:]` or `a[start:end]`\n\n**Important**: StringView slice is slightly different due to unicode safety:\n`s[a:b]` may raise an error at surrogate boundaries (UTF-16 encoding edge case). You have two options:\n\n- Use `try! s[a:b]` if you're certain the boundaries are valid (crashes on invalid boundaries)\n- Let the error propagate to the caller for proper handling\n\n**When to use views**:\n\n- Pattern matching with rest patterns (`[first, .. rest]`)\n- Passing slices to functions without allocation overhead\n- Avoiding unnecessary copies of large sequences\n\nConvert back with `.to_string()`, `.to_bytes()`, or `.to_array()` when you need ownership.\n\n## Complex Types\n\n```mbt check\n///|\ntype UserId = Int // Int is aliased to UserId - like symlink\n\n///|\n///  Tuple-struct for callback\nstruct Handler((String) -> Unit) // A newtype wrapper\n\n///|\n/// Tuple-struct syntax for single-field newtypes\nstruct Meters(Int) // Tuple-struct syntax\n\n///|\nlet distance : Meters = Meters(100)\n\n///|\nlet raw : Int = distance.0 // Access first field with .0\n\n///|\nstruct Addr {\n  host : String\n  port : Int\n} derive(Show, Eq, ToJson, FromJson)\n\n///|\n/// Structural types with literal syntax\nlet config : Addr = {\n  // `Type::` can be omitted if the type is already known\n  // otherwise `Type::{...}`\n  host: \"localhost\",\n  port: 8080,\n}\n\n///|\n/// Recursive enum for trees\nenum Tree[T] {\n  Leaf(T)\n  Node(left~ : Tree[T], T, right~ : Tree[T]) // enum can use labels\n}\n\n// Pattern match on enum variants\n\n///|\nfn sum_tree(tree : Tree[Int]) -> Int {\n  match tree {\n    Leaf(x) => x\n    Node(left~, x, right~) => sum_tree(left) + x + sum_tree(right)\n  }\n}\n```\n\n## Common Derivable Traits\n\nMost types can automatically derive standard traits using the `derive(...)` syntax:\n\n- **`Show`** - Enables `to_string()` and string interpolation with `\\{value}`\n- **`Eq`** - Enables `==` and `!=` equality operators\n- **`Compare`** - Enables `<`, `>`, `<=`, `>=` comparison operators\n- **`ToJson`** - Enables `@json.inspect()` for readable test output\n- **`Hash`** - Enables use as Map keys\n\n```mbt check\n///|\nstruct Coordinate {\n  x : Int\n  y : Int\n} derive(Show, Eq, ToJson)\n\n///|\nenum Status {\n  Active\n  Inactive\n} derive(Show, Eq, Compare)\n```\n\n**Best practice**: Always derive `Show` and `Eq` for data types. Add `ToJson` if you plan to test them with `@json.inspect()`.\n\n## Reference Semantics by Default\n\nMoonBit passes most types by reference semantically (the optimizer may copy\nimmutables):\n\n```mbt check\n///|\n///  Structs with 'mut' fields are always passed by reference\nstruct Counter {\n  mut value : Int\n}\n\n///|\nfn increment(c : Counter) -> Unit {\n  c.value += 1 // Modifies the original\n}\n\n///|\n/// Arrays and Maps are mutable references\nfn modify_array(arr : Array[Int]) -> Unit {\n  arr[0] = 999 // Modifies original array\n}\n\n///|\n///  Use Ref[T] for explicit mutable references to primitives\nfn swap_values(a : Ref[Int], b : Ref[Int]) -> Unit {\n  let temp = a.val\n  a.val = b.val\n  b.val = temp\n}\n\n///|\ntest \"ref swap\" {\n  let x : Ref[Int] = Ref::new(10)\n  let y : Ref[Int] = Ref::new(20)\n  swap_values(x, y) // x.val is now 20, y.val is now 10\n}\n```\n\n## Pattern Matching\n\nMoonBit's pattern matching is comprehensive and exhaustive:\n\n```mbt check\n///|\n/// Destructure arrays with rest patterns\nfn process_array(arr : Array[Int]) -> String {\n  match arr {\n    [] => \"empty\"\n    [single] => \"one: \\{single}\"\n    [first, .. _middle, last] => \"first: \\{first}, last: \\{last}\"\n    // middle is of type ArrayView[Int]\n  }\n}\n\n///|\nfn analyze_point(point : Point) -> String {\n  match point {\n    { x: 0, y: 0 } => \"origin\"\n    { x, y } if x == y => \"on diagonal\"\n    { x, .. } if x < 0 => \"left side\"\n    _ => \"other\"\n  }\n}\n\n///|\n/// StringView pattern matching for parsing\nfn is_palindrome(s : StringView) -> Bool {\n  loop s {\n    [] | [_] => true\n    [a, .. rest, b] if a == b => continue rest\n    // a is of type Char, rest is of type StringView\n    _ => false\n  }\n}\n```\n\n## Functional `loop` control flow\n\nThe `loop` construct is unique to MoonBit:\n\n```mbt check\n///|\n/// Functional loop with pattern matching on loop variables\n/// @list.List is from the standard library\nfn sum_list(list : @list.List[Int]) -> Int {\n  loop (list, 0) {\n    (Empty, acc) => acc // Base case returns accumulator\n    (More(x, tail=rest), acc) => continue (rest, x + acc) // Recurse with new values\n  }\n}\n\n///|\n///  Multiple loop variables with complex control flow\nfn find_pair(arr : Array[Int], target : Int) -> (Int, Int)? {\n  loop (0, arr.length() - 1) {\n    (i, j) if i >= j => None\n    (i, j) => {\n      let sum = arr[i] + arr[j]\n      if sum == target {\n        Some((i, j)) // Found pair\n      } else if sum < target {\n        continue (i + 1, j) // Move left pointer\n      } else {\n        continue (i, j - 1) // Move right pointer\n      }\n    }\n  }\n}\n```\n\n**Note**: You must provide a payload to `loop`. If you want an infinite loop, use `while true { ... }` instead. The syntax `loop { ... }` without arguments is invalid.\n\n## Functional `for` control flow\n\n`for` loops have unique MoonBit features:\n\n```mbt check\n///|\ntest \"functional for loop control flow\" {\n  // For loop with multiple loop variables,\n  // i and j are loop state\n  let sum_result : Int = for i = 0, sum = 0 {\n    if i <= 10 {\n      continue i + 1, sum + i\n      // update new loop state in a functional way\n    } else { // Continue with new values\n      break sum // Final value when loop completes normally\n    }\n  }\n  inspect(sum_result, content=\"55\")\n\n  // special form with condition and state update in the `for` header\n  let sum_result2 : Int = for i = 0, sum = 0; i <= 10; i = i + 1, sum = sum + i {\n\n  } else {\n    sum\n  }\n  inspect(sum_result2, content=\"55\")\n}\n```\n\n## Label and Optional Parameters\n\nGood example: Use labeled and optional parameters\n\n```mbt\nfn g(\n  positional : Int,\n  required~ : Int,\n  optional? : Int,\n  optional_with_default? : Int = 42,\n) -> String {\n  // make sure you understand the types of the arguments really is:\n  let _ : Int = positional\n  let _ : Int = required\n  // let _ : Option[Int] = optional\n  let _ : Int = optional_with_default\n  \"\\{positional},\\{required},\\{optional},\\{optional_with_default}\"\n}\n\ntest {\n  inspect(g(1, required=2), content=\"1,2,None,42\")\n  inspect(g(1, required=2, optional=3), content=\"1,2,Some(3),42\")\n  inspect(g(1, required=4, optional_with_default=100), content=\"1,4,None,100\")\n}\n```\n\nMisuse: `arg : Type?` is not an optional parameter\n\n```mbt\nfn with_config(a : Int?, b : Int?, c : Int) -> String {\n  // T? is syntactic sugar for Option[T]\n  \"\\{a},\\{b},\\{c}\"\n}\n\ntest {\n  inspect(with_config(None, None, 1), content=\"None,None,1\")\n  inspect(with_config(Some(5), Some(5), 1), content=\"Some(5),Some(5),1\")\n}\n```\n\nAnti pattern: `arg? : Type?`\n\n```mbt\n// How to fix: declare `(a? : Int, b? : Int = 1)` directly\nfn f(a? : Int?, b? : Int? = Some(1)) -> Unit {...}\ntest {\n  // How to fix: call `f(b=2)` directly\n  f(a=None, b=Some(2))\n}\n```\n\nBad example: `arg : APIOptions`\n\n```mbt\n// Do not use struct to group options.\nstruct APIOptions {\n  a : Int?\n}\n\nfn not_idiomatic(opts : APIOptions, arg : Int) -> Unit {\n  ...\n}\n\ntest {\n  // Hard to use in call site\n  not_idiomatic({ a: Some(5) }, 10)\n  not_idiomatic({ a: None }, 10)\n}\n```\n\n## Checked Errors\n\nMoonBit uses **checked** error-throwing functions, not unchecked exceptions,\nit is recommended to use `raise` for functions and use `Result` in testing.\n\n```mbt check\n///|\n///  Declare error types with 'suberror'\nsuberror ValueError String\n\n///|\nstruct Position(Int, Int) derive(ToJson, Show, Eq)\n\n///|\npub(all) suberror ParseError {\n  InvalidChar(Position, Char)\n  InvalidEof\n  InvalidNumber(Position, String)\n  InvalidIdentEscape(Position)\n} derive(Eq, ToJson, Show)\n\n///|\n/// Functions declare what they can throw\nfn parse_int(s : String) -> Int raise ParseError {\n  // 'raise' throws an error\n  if s.is_empty() {\n    raise ParseError::InvalidEof\n  }\n  ... // parsing logic\n}\n\n///|\nfn div(x : Int, y : Int) -> Int raise {\n  if y == 0 {\n    raise Failure(\"Division by zero\")\n  }\n  x / y\n}\n\n///|\ntest \"inspect raise function\" {\n  inspect(\n    try? div(1, 0),\n    content=(\n      #|Err(Failure(\"Division by zero\"))\n    ),\n  ) // Result[Int, MyError]\n}\n\n// Three ways to handle errors:\n\n///|\n/// Propagate automatically\nfn use_parse() -> Int raise ParseError {\n  let x = parse_int(\"123\")\n  // Error *auto* propagates by default.\n  // *unlike* Swift, you don't need mark `try` for functions that can raise errors,\n  // compiler infers it automatically. This makes error-handling code cleaner\n  // while still being type-safe and explicit about what errors can occur.\n  x * 2\n}\n\n///|\n///  Mark `raise` for all possible errors, don't care what error it is\n/// If you are doing a quick prototype, just mark it as raise is good enough.\nfn use_parse2() -> Int raise {\n  let x = parse_int(\"123\")\n  x * 2\n}\n\n///|\n///  Convert to Result with try?\nfn safe_parse(s : String) -> Result[Int, ParseError] {\n  let val1 : Result[_] = try? parse_int(s) // Returns Result[Int, ParseError]\n  // try! is rarely used - it panics on error, similar to unwrap() in Rust\n  // let val2 : Int = try! parse_int(s) // Returns Int otherwise crash\n\n  // Alternative explicit handling:\n  let val3 = try parse_int(s) catch {\n    err => Err(err)\n  } noraise { // noraise block is optional - handles the success case\n    v => Ok(v)\n  }\n  ...\n}\n\n///|\n///  3. Handle with try-catch\nfn handle_parse(s : String) -> Int {\n  parse_int(s) catch {\n    ParseError::InvalidEof => {\n      println(\"Parse failed: InvalidEof\")\n      -1 // Default value\n    }\n    _ => 2\n  }\n}\n```\n\n# Methods and Traits\n\nMethods use `Type::method_name` syntax, traits require explicit implementation:\n\n```mbt check\n///|\nstruct Rectangle {\n  width : Double\n  height : Double\n}\n\n///|\n// Methods are prefixed with Type::\nfn Rectangle::area(self : Rectangle) -> Double {\n  self.width * self.height\n}\n\n///|\n/// Static methods don't need self\nfn Rectangle::new(w : Double, h : Double) -> Rectangle {\n  { width: w, height: h }\n}\n\n///|\n/// Show trait now uses output(self, logger) for custom formatting\n/// to_string() is automatically derived from this\npub impl Show for Rectangle with output(self, logger) {\n  logger.write_string(\"Rectangle(\\{self.width}x\\{self.height})\")\n}\n\n///|\n/// Traits can have non-object-safe methods\ntrait Named {\n  name() -> String // No 'self' parameter - not object-safe\n}\n\n///|\n/// Trait bounds in generics\nfn[T : Show + Named] describe(value : T) -> String {\n  \"\\{T::name()}: \\{value.to_string()}\"\n}\n\n///|\n///  Trait implementation\nimpl Hash for Rectangle with hash_combine(self, hasher) {\n  hasher..combine(self.width)..combine(self.height)\n}\n```\n\n## Operator Overloading\n\nMoonBit supports operator overloading through traits:\n\n```mbt check\n///|\nstruct Vector(Int, Int)\n\n///|\n/// Implement arithmetic operators\npub impl Add for Vector with add(self, other) {\n  Vector(self.0 + other.0, self.1 + other.1)\n}\n\n///|\npub impl Mul for Vector with mul(self, other) {\n  Vector(self.0 * other.0, self.1 * other.1)\n}\n\n///|\nstruct Person {\n  age : Int\n} derive(Eq)\n\n///|\n/// Comparison operators\npub impl Compare for Person with compare(self, other) {\n  self.age.compare(other.age)\n}\n\n///|\ntest \"overloading\" {\n  let v1 : Vector = Vector(1, 2)\n  let v2 : Vector = Vector(3, 4)\n  let _v3 : Vector = v1 + v2\n\n}\n```\n\n## Access Control Modifiers\n\nMoonBit has fine-grained visibility control:\n\n```mbt check\n///|\n/// `fn` defaults to Private - only visible in current package\nfn internal_helper() -> Unit {\n  ...\n}\n\n///|\npub fn get_value() -> Int {\n  ...\n}\n\n///|\n// Struct (default) - type visible, implementation hidden\nstruct DataStructure {}\n\n///|\n/// `pub struct` defaults to readonly - can read, pattern match, but not create\npub struct Config {}\n\n///|\n///  Public all - full access\npub(all) struct Config2 {}\n\n///|\n/// Abstract trait (default) - cannot be implemented by\n/// types outside this package\npub trait MyTrait {}\n\n///|\n///  Open for extension\npub(open) trait Extendable {}\n```\n\n# Best Practices and Reference\n\n## Common Pitfalls to Avoid\n\n1. **Don't use uppercase for variables/functions** - compilation error\n2. **Don't forget `mut` for mutable fields** - immutable by default\n3. **Don't assume value semantics** - most types pass by reference\n4. **Don't ignore error handling** - errors must be explicitly handled\n5. **Don't use `return` unnecessarily** - last expression is the return value\n6. **Don't create methods without Type:: prefix** - methods need explicit type prefix\n7. Don't forget to handle array bounds - use get() for safe access\n8. Don't mix up String indexing (returns Int). Use `for char in s {...}` for char iteration\n9. Don't forget @package prefix when calling functions from other packages\n10. Don't use ++ or -- (not supported), use `i = i + 1` or `i += 1`\n11. **Don't add explicit `try` for error-raising functions** - errors propagate automatically (unlike Swift)\n12. **Legacy syntax**: Older code may use `function_name!(...)` or `function_name(...)?` - these are deprecated; use normal calls and `try?` for Result conversion\n\n# MoonBit Build System - Essential Guide\n\n## Idiomatic Project Structure\n\nMoonBit projects use `moon.mod.json` (module descriptor) and `moon.pkg.json`\n(package descriptor):\n\n```\nmy_module\nâ”œâ”€â”€ Agents.md                 # Guide to Agents\nâ”œâ”€â”€ README.mbt.md             # Markdown with tested code blocks (`test \"...\" { ... }`)\nâ”œâ”€â”€ README.md -> README.mbt.md\nâ”œâ”€â”€ cmd                       # Command line directory\nâ”‚   â””â”€â”€ main\nâ”‚       â”œâ”€â”€ main.mbt\nâ”‚       â””â”€â”€ moon.pkg.json     # executable package with {\"is_main\": true}\nâ”œâ”€â”€ liba/                     # Library packages\nâ”‚   â””â”€â”€ moon.pkg.json         # Referenced by other packages as `@username/my_module/liba`\nâ”‚   â””â”€â”€ libb/                 # Library packages\nâ”‚       â””â”€â”€ moon.pkg.json     # Referenced by other packages as `@username/my_module/liba/libb`\nâ”œâ”€â”€ moon.mod.json             # Module metadata, source field(optional) specifies the source directory of the module\nâ”œâ”€â”€ moon.pkg.json             # Package metadata (each directory is a package like Golang)\nâ”œâ”€â”€ user_pkg.mbt              # Root packages, referenced by other packages as `@username/my_module`\nâ”œâ”€â”€ user_pkg_wbtest.mbt       # White-box tests (only needed for testing internal private members, similar to Golang's package mypackage)\nâ””â”€â”€ user_pkg_test.mbt         # Black-box tests\nâ””â”€â”€ ...                       # More package files, symbols visible to current package (like Golang)\n```\n\n## Essential Commands\n\n- `moon new my_project` - Create new project\n- `moon run cmd/main` - Run main package\n- `moon build` - Build project\n- `moon check` - Type check without building, use it regularly\n- `moon check --target all` - Type check for all backends\n- `moon add package` - Add dependency\n- `moon remove package` - Remove dependency\n- `moon fmt` - Format code\n\n### Test Commands\n\n- `moon test` - Run all tests\n- `moon test --update`\n- `moon test -v` - Verbose output with test names\n- `moon test dirname` - Test specific directory\n- `moon test filename` - Test specific file in a directory\n- `moon coverage analyze` - Analyze coverage\n\n## Package Management\n\n### Adding Dependencies\n\n```bash\nmoon add moonbitlang/x        # Add latest version\nmoon add moonbitlang/x@0.4.6  # Add specific version\n```\n\n### Updating Dependencies\n\n```bash\nmoon update                   # Update package index\n```\n\n## Key Configuration\n\n### Module (`moon.mod.json`)\n\n```json\n{\n  \"name\": \"username/hello\", // Required format for published modules\n  \"version\": \"0.1.0\",\n  \"source\": \".\", // Source directory(optional, default: \".\")\n  \"repository\": \"\", // Git repository URL\n  \"keywords\": [], // Search keywords\n  \"description\": \"...\", // Module description\n  \"deps\": {\n    // Dependencies from mooncakes.io, using`moon add` to add dependencies\n    \"moonbitlang/x\": \"0.4.6\"\n  }\n}\n```\n\n### Package (`moon.pkg.json`)\n\n```json\n{\n  \"is_main\": true,                 // Creates executable when true\n  \"import\": [                      // Package dependencies\n    \"username/hello/liba\",         // Simple import, use @liba.foo() to call functions\n    {\n      \"path\": \"moonbitlang/x/encoding\",\n      \"alias\": \"libb\"              // Custom alias, use @libb.encode() to call functions\n    }\n  ],\n  \"test-import\": [...],            // Imports for black-box tests, similar to import\n  \"wbtest-import\": [...]           // Imports for white-box tests, similar to import (rarely used)\n}\n```\n\nPackages per directory, packages without `moon.pkg.json` are not recognized.\n\n## Package Importing (used in moon.pkg.json)\n\n- **Import format**: `\"module_name/package_path\"`\n- **Usage**: `@alias.function()` to call imported functions\n- **Default alias**: Last part of path (e.g., `liba` for `username/hello/liba`)\n- **Package reference**: Use `@packagename` in test files to reference the\n  tested package\n\n**Package Alias Rules**:\n\n- Import `\"username/hello/liba\"` â†’ use `@liba.function()` (default alias is last path segment)\n- Import with custom alias `{\"path\": \"moonbitlang/x/encoding\", \"alias\": \"enc\"}` â†’ use `@enc.function()`\n- In `_test.mbt` or `_wbtest.mbt` files, the package being tested is auto-imported\n\nExample:\n\n```mbt\n///|\n/// In main.mbt after importing \"username/hello/liba\" in `moon.pkg.json`\nfn main {\n  println(@liba.hello()) // Calls hello() from liba package\n}\n```\n\n## Using Standard Library (moonbitlang/core)\n\n**MoonBit standard library (moonbitlang/core) packages are automatically imported** - DO NOT add them to dependencies:\n\n- âŒ **DO NOT** use `moon add` to add standard library packages like `moonbitlang/core/strconv`\n- âŒ **DO NOT** add standard library packages to `\"deps\"` field of `moon.mod.json`\n- âŒ **DO NOT** add standard library packages to `\"import\"` field of `moon.pkg.json`\n- âœ… **DO** use them directly: `@strconv.parse_int()`, `@list.List`, `@array.fold()`, etc.\n\nIf you get an error like \"cannot import `moonbitlang/core/strconv`\", remove it from imports - it's automatically available.\n\n## Creating Packages\n\nTo add a new package `fib` under `.`:\n\n1. Create directory: `./fib/`\n2. Add `./fib/moon.pkg.json`: `{}` -- Minimal valid moon.pkg.json\n3. Add `.mbt` files with your code\n4. Import in dependent packages:\n\n   ```json\n   {\n     \"import\": [\n        \"username/hello/fib\",\n        ...\n     ]\n   }\n   ```\n\n## Conditional Compilation\n\nTarget specific backends/modes in `moon.pkg.json`:\n\n```json\n{\n  \"targets\": {\n    \"wasm_only.mbt\": [\"wasm\"],\n    \"js_only.mbt\": [\"js\"],\n    \"debug_only.mbt\": [\"debug\"],\n    \"wasm_or_js.mbt\": [\"wasm\", \"js\"], // for wasm or js backend\n    \"not_js.mbt\": [\"not\", \"js\"], // for nonjs backend\n    \"complex.mbt\": [\"or\", [\"and\", \"wasm\", \"release\"], [\"and\", \"js\", \"debug\"]] // more complex conditions\n  }\n}\n```\n\n**Available conditions:**\n\n- **Backends**: `\"wasm\"`, `\"wasm-gc\"`, `\"js\"`, `\"native\"`\n- **Build modes**: `\"debug\"`, `\"release\"`\n- **Logical operators**: `\"and\"`, `\"or\"`, `\"not\"`\n\n## Link Configuration\n\n### Basic Linking\n\n```json\n{\n  \"link\": true, // Enable linking for this package\n  // OR for advanced cases:\n  \"link\": {\n    \"wasm\": {\n      \"exports\": [\"hello\", \"foo:bar\"], // Export functions\n      \"heap-start-address\": 1024, // Memory layout\n      \"import-memory\": {\n        // Import external memory\n        \"module\": \"env\",\n        \"name\": \"memory\"\n      },\n      \"export-memory-name\": \"memory\" // Export memory with name\n    },\n    \"wasm-gc\": {\n      \"exports\": [\"hello\"],\n      \"use-js-builtin-string\": true, // JS String Builtin support\n      \"imported-string-constants\": \"_\" // String namespace\n    },\n    \"js\": {\n      \"exports\": [\"hello\"],\n      \"format\": \"esm\" // \"esm\", \"cjs\", or \"iife\"\n    },\n    \"native\": {\n      \"cc\": \"gcc\", // C compiler\n      \"cc-flags\": \"-O2 -DMOONBIT\", // Compile flags\n      \"cc-link-flags\": \"-s\" // Link flags\n    }\n  }\n}\n```\n\n## Warning Control\n\nDisable specific warnings in `moon.mod.json` or `moon.pkg.json`:\n\n```json\n{\n  \"warn-list\": \"-2-29\" // Disable unused variable (2) & unused package (29)\n}\n```\n\n**Common warning numbers:**\n\n- `1` - Unused function\n- `2` - Unused variable\n- `11` - Partial pattern matching\n- `12` - Unreachable code\n- `29` - Unused package\n\nUse `moonc build-package -warn-help` to see all available warnings.\n\n## Pre-build Commands\n\nEmbed external files as MoonBit code:\n\n```json\n{\n  \"pre-build\": [\n    {\n      \"input\": \"data.txt\",\n      \"output\": \"embedded.mbt\",\n      \"command\": \":embed -i $input -o $output --name data --text\"\n    },\n    ... // more embed commands\n  ]\n}\n```\n\nGenerated code example:\n\n```mbt check\n///|\nlet data : String =\n  #|hello,\n  #|world\n  #|\n```\n\n# Documentation\n\nWrite documentation using `///` comments (started with `///|` to delimit the\nblock code)\n\n```mbt check\n///|\n/// Get the largest element of a non-empty `Array`.\n///\n/// # Example\n/// ```mbt check\n/// test {\n///  inspect(sum_array([1, 2, 3, 4, 5, 6]), content=\"21\")\n/// }\n/// ```\n///\n/// # Panics\n/// Panics if the `xs` is empty.\npub fn sum_array(xs : Array[Int]) -> Int {\n  xs.fold(init=0, (a, b) => a + b)\n}\n```\n\nThe MoonBit code in docstring will be type checked and tested automatically.\n(using `moon test --update`)\n\n# Development Workflow\n\n## MoonBit Tips\n\n- MoonBit code is organized in files/block style.\n  A package is composed of a list of files, their order does not matter,\n  keep them separate so that it is easy to focus on critical parts.\n\n  Each block is separated by `///|`, the order of each block is irrelevant too. You can process\n  block by block independently.\n\n  You are encouraged to generate code in a block-by-block manner.\n\n  You are encouraged to search and replace block by block instead of\n  replacing the whole file.\n\n  You are encouraged to keep each file focused.\n\n- SPLIT the large file into small files, the order does not matter.\n\n- Try to keep deprecated blocks in file called `deprecated.mbt` in each\n  directory.\n\n- `moon fmt` is used to format your code properly.\n\n- `moon info` is used to update the generated interface of the package\n  **in current project**. Each package has a generated interface file `.mbti`,\n  it is a brief formal description of the package. If nothing in `.mbti`\n  changes, this means your change does not bring the visible changes to the\n  external package users, it is typically a safe refactoring.\n  **Note**: `moon info` will only work with packages in the current project, and\n  therefore you cannot use `moon info` to generate interface for dependencies\n  like standard library.\n\n- So in the last step, you typically run `moon info && moon fmt` to update the\n  interface and format the code. You also check the diffs of `.mbti` file to see\n  if the changes are expected.\n\n- You should run `moon test` to check the test is passed. MoonBit supports\n  snapshot testing, so in some cases, your changes indeed change the behavior of\n  the code, you should run `moon test --update` to update the snapshot.\n\n- You can run `moon check` to check the code is linted correctly, run it\n  regularly to ensure you are not in a messy state.\n\n- MoonBit packages are organized per directory; each directory has a\n  `moon.pkg.json` listing its dependencies. Each package has its files and\n  blackbox test files (common, ending in `_test.mbt`) and whitebox test files\n  (ending in `_wbtest.mbt`).\n\n- In the toplevel directory, there is a `moon.mod.json` file describing the\n  module and metadata.\n\n## MoonBit Package `README` Generation Guide\n\n- Output `README.mbt.md` in the package directory.\n  `*.mbt.md` file and docstring contents treats `mbt check` specially.\n  `mbt check` block will be included directly as code and also run by `moon check` and `moon test`.\n  In docstrings, `mbt check` should only contain test blocks.\n  If you are only referencing types from the package, you should use `mbt` which will only be syntax highlighted.\n  Symlink `README.mbt.md` to `README.md` to adapt to systems that expect `README.md`.\n- Aim to cover â‰¥90% of the public API with concise sections and examples.\n- Organize by feature: construction, consumption, transformation, and key usage tips.\n\n## MoonBit Testing Guide\n\nPractical testing guidance for MoonBit. Keep tests black-box by default and rely on snapshot `inspect(...)`.\n\n- Black-box by default: Call only public APIs via `@package.fn`. Use white-box tests only when private members matter.\n- **Snapshots**: Prefer `inspect(value, content=\"...\")`. If unknown, write `inspect(value)` and run `moon test --update` (or `moon test -u`).\n  - Use regular `inspect()` for simple values (uses `Show` trait)\n  - Use `@json.inspect()` for complex nested structures (uses `ToJson` trait, produces more readable output)\n  - It is encouraged to `inspect` or `@json.inspect` the whole return value of a function if\n    the whole return value is not huge, this makes test simple. You need `impl (Show|ToJson) for YourType` or `derive (Show, ToJson)`.\n- **Update workflow**: After changing code that affects output, run `moon test --update` to regenerate snapshots, then review the diffs in your test files (the `content=` parameter will be updated automatically).\n- Grouping: Combine related checks in one `test \"...\" { ... }` block for speed and clarity.\n- Panics: Name test with prefix `test \"panic ...\" {...}`; if the call returns a value, wrap it with `ignore(...)` to silence warnings.\n- Errors: Use `try? f()` to get `Result[...]` and `inspect` it when a function may raise.\n- Verify: Run `moon test` (or `-u` to update snapshots) and `moon fmt` afterwards.\n\n## Spec-driven Development\n\n- The spec can be written in a readonly `spec.mbt` file (name is conventional, not mandatory) with stub code marked as declarations:\n\n```mbt check\n#declaration_only\npub type Yaml\n#declaration_only\npub fn Yaml::to_string(y : Yaml) -> String raise {...}\n#declaration_only\npub fn parse_yaml(s : String) -> Yaml raise {...}\n```\n- Add `spec_easy_test.mbt`, `spec_difficult_test.mbt` etc to test the spec functions; everything will be type-checked.\n- The AI or students can implement the `declaration_only` functions in different files thanks to our package organization.\n- Run `moon test` to check everything is correct.\n\n- `#declaration_only` is supported for functions, methods, and types.\n- The `pub type Yaml` line is an intentionally opaque placeholder; the implementer chooses its representation.\n- Note the spec file can also contain normal code, not just declarations.\n\n# Semantics based CLI tools\n\n## API Discovery with `moon doc`\n\n**CRITICAL**: `moon doc '<query>'` is your PRIMARY tool for discovering available APIs, functions, types, and methods in MoonBit. It is **more powerful and accurate** than `grep_search`, `semantic_search`, or any file-based searching tools. Always prefer `moon doc` over other approaches when exploring what APIs are available.\n\n### Query Syntax\n\n`moon doc` uses a specialized query syntax designed for symbol lookup:\n- **Empty query**: `moon doc `\n\n  - In a module: shows all available packages in current module\n  - In a package: shows all symbols in current package\n  - Outside package: shows all available packages\n\n- **Function/value lookup**: `moon doc \"[@pkg.]sym\"`\n\n- **Type lookup**: `moon doc \"[@pkg.]Sym\"`\n\n- **Method/field lookup**: `moon doc \"[@pkg.]T::sym\"`\n\n- **Package exploration**: `moon doc \"@pkg\"`\n  - Show package `pkg` and list all its exported symbols\n  - Example: `moon doc \"@json\"` - explore entire `@json` package\n  - Example: `moon doc \"@encoding/utf8\"` - explore nested package\n\n### Workflow for API Discovery\n\n1. **Finding functions**: Use `moon doc \"@pkg.function_name\"` before grep searching\n2. **Exploring packages**: Use `moon doc \"@pkg\"` to see what's available in a package\n3. **Method discovery**: Use `moon doc \"Type::method\"` to find methods on types\n4. **Type inspection**: Use `moon doc \"TypeName\"` to see type definition and methods\n5. **Package exploration**: Use `moon doc \"\"` at module root to see all available packages, including dependencies and stdlib\n6. **Globbing**: Use `*` wildcard for partial matches, e.g. `moon doc \"String::*rev*\"` to find all String methods with \"rev\" in their name\n### Examples\n\n````bash\n# search for String methods in standard library:\n$ moon doc \"String\"\n\ntype String\n\n  pub fn String::add(String, String) -> String\n  pub fn String::at(String, Int) -> Int\n  # ... more methods omitted ...\n\n# list all symbols in a standard library package:\n$ moon doc \"@buffer\"\nmoonbitlang/core/buffer\n\nfn from_array(ArrayView[Byte]) -> Buffer\nfn from_bytes(Bytes) -> Buffer\n# ... more functions omitted ...\n\n# list the specific function in a package:\n$ moon doc \"@buffer.new\"\npackage \"moonbitlang/core/buffer\"\n\npub fn new(size_hint? : Int) -> Buffer\n  Creates a new extensible buffer with specified initial capacity. If the\n   initial capacity is less than 1, the buffer will be initialized with capacity\n   1.\n# ... more details omitted ...\n\n$ moon doc \"String::*rev*\"\npackage \"moonbitlang/core/string\"\n\npub fn String::rev(String) -> String\n  Returns a new string with the characters in reverse order. It respects\n   Unicode characters and surrogate pairs but not grapheme clusters.\n\npub fn String::rev_find(String, StringView) -> Int?\n  Returns the offset (charcode index) of the last occurrence of the given\n   substring. If the substring is not found, it returns None.\n\n# ... more details omitted ...\n\n**Best practice**: When implementing a feature, start with `moon doc` queries to discover available APIs before writing code. This is faster and more accurate than searching through files.\n\n````\n\n## `moon ide peek-def` for Definition Lookup\n\nUse this when you want inline context for a symbol without jumping files.\n\n``` file src/parse.mbt\nL45:|///|\nL46:|fn Parser::read_u32_leb128(self : Parser) -> UInt raise ParseError {\nL47:|  ...\n...:| }\n```\n\n```bash\n$ moon ide peek-def -symbol Parser -loc src/parse.mbt:46:4\nDefinition found at file src/parse.mbt\n  | ///|\n2 | priv struct Parser {\n  |             ^^^^^^\n  |   bytes : Bytes\n  |   mut pos : Int\n  | }\n  |\n  | ///|\n  | fn Parser::new(bytes : Bytes) -> Parser {\n  |   { bytes, pos: 0 }\n  | }\n  |\n  | ///|\n  | fn Parser::eof(self : Parser) -> Bool {\n  |   self.pos >= self.bytes.length()\n  | }\n  |\n```\nFor the `-loc` argument, the line number must be precise; the column can be approximate since `-symbol` helps locate the position.\n",
        "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/ide.md": "---\ntitle: \"moon ide\"\n---\n\n\n## Code Navigation with `moon ide`\n\n**ALWAYS use `moon ide` for code navigation in MoonBit projects instead of manual file searching, grep, or semantic search.**\n\nThis tool provides two essential commands for precise code exploration:\n\n### Core Commands\n\n- `moon ide goto-definition` - Find where a symbol is defined\n- `moon ide find-references` - Find all usages of a symbol\n\n### Query System\n\nSymbol lookup uses a two-part query system for precise results:\n\n#### 1. Symbol Name Query (`-query`)\n\nFuzzy search for symbol names with package filtering support:\n\n```bash\n# Find any symbol named 'symbol'\nmoon ide goto-definition -query 'symbol'\n\n# Find methods of a specific type\nmoon ide goto-definition -query 'Type::method'\n\n# Find trait method implementations\nmoon ide goto-definition -query 'Trait for Type with method'\n\n# Find symbol in specific package using @pkg prefix\nmoon ide goto-definition -query '@moonbitlang/x encode'\n\n# Find symbol in multiple packages (searches in pkg1 OR pkg2)\nmoon ide goto-definition -query '@username/mymodule/pkg1 @username/mymodule/pkg2 helper'\n\n# Find symbol in nested package\nmoon ide goto-definition -query '@username/mymodule/mypkg helper'\n```\n\n**Supported symbols**: functions, constants, let bindings, types, structs, enums, traits\n\n**Package filtering**: Prefix your query with `@package_name` to scope the search. Multiple `@pkg` prefixes create an OR condition.\n\n#### 2. Tag-based Filtering (`-tags`)\n\nPre-filter symbols by characteristics before name matching:\n\n**Visibility tags**:\n\n- `pub` - Public symbols\n- `pub all` - Public structs with all public fields\n- `pub open` - Public traits with all methods public\n- `priv` - Private symbols\n\n**Symbol type tags**:\n\n- `type` - Type definitions (struct, enum, typealias, abstract)\n- `error` - Error type definitions\n- `enum` - Enum definitions and variants\n- `struct` - Struct definitions\n- `alias` - Type/function/trait aliases\n- `let` - Top-level let bindings\n- `const` - Constant definitions\n- `fn` - Function definitions\n- `trait` - Trait definitions\n- `impl` - Trait implementations\n- `test` - Named test functions\n\n**Combine tags with logical operators**:\n\n```bash\n# Public functions only\nmoon ide goto-definition -tags 'pub fn' -query 'my_func'\n\n# Functions or constants\nmoon ide goto-definition -tags 'fn | const' -query 'helper'\n\n# Public functions or constants\nmoon ide goto-definition -tags 'pub (fn | const)' -query 'api'\n\n# Public types or traits\nmoon ide goto-definition -tags 'pub (type | trait)' -query 'MyType'\n```\n\n### Practical Examples\n\n```bash\n# Find public function definition\nmoon ide goto-definition -tags 'pub fn' -query 'maximum'\n\n# Find all references to a struct\nmoon ide find-references -tags 'struct' -query 'Rectangle'\n\n# Find trait implementations\nmoon ide goto-definition -tags 'impl' -query 'Show for MyType'\n\n# Find errors in specific package\nmoon ide goto-definition -tags 'error' -query '@mymodule/parser ParseError'\n\n# Find symbol across multiple packages\nmoon ide goto-definition -query '@moonbitlang/x @moonbitlang/core encode'\n\n# Combine package filtering with tags\nmoon ide goto-definition -tags 'pub fn' -query '@username/myapp helper'\n```\n\n### Query Processing\n\nThe tool processes queries in this order:\n\n1. Filter symbols by `-tags` conditions\n2. Extract package scope from `@pkg` prefixes in `-query`\n3. Fuzzy match remaining symbols by name\n4. Return top 3 best matches with location information\n\n**Best Practice**: Start with `-tags` to reduce noise, then use `@pkg` prefixes in `-query` to scope by package for precise navigation.\n\n## Additional IDE Commands\n\n### `moon ide peek-def`\n\nDisplay definitions inline. More accurate than grep (semantic search).\n\n```bash\n# Top-level symbol definition\n$ moon ide peek-def String::rev\nFound 1 symbols matching 'String::rev':\n`pub fn String::rev` in package moonbitlang/core/builtin at .../string_methods.mbt:1039-1044\n\n# Local symbol definition with location\n$ moon ide peek-def Parser -loc src/parse.mbt:46:4\nDefinition found at file src/parse.mbt\n  | ///|\n2 | priv struct Parser {\n  |             ^^^^^^\n  |   bytes : Bytes\n  |   mut pos : Int\n  | }\n```\n\n### `moon ide outline`\n\nList top-level symbols in a package or file.\n\n```bash\n# Directory (package) outline\n$ moon ide outline .\nspec.mbt:\n L003 | pub(all) enum CStandard {\n       ...\n L013 | pub(all) struct Position {\n       ...\n\n# Single file outline\n$ moon ide outline parser.mbt\n```\n\n### `moon ide find-references`\n\nFind all references to a symbol.\n\n```bash\n$ moon ide find-references TranslationUnit\n```\n\n## `moon doc` for API Discovery\n\n**CRITICAL**: `moon doc '<query>'` is the primary tool for API discovery. Faster and more accurate than grep.\n\n```bash\n# Empty query: list available packages\nmoon doc ''\n\n# List type methods\nmoon doc \"String\"\n\n# List symbols in a package\nmoon doc \"@buffer\"\n\n# Specific function details\nmoon doc \"@buffer.new\"\n\n# Glob pattern\nmoon doc \"String::*rev*\"\n```\n",
        "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/performance.md": "---\ntitle: \"MoonBit Performance Tuning\"\n---\n\n# MoonBit Performance Tuning\n\n## View Types Overview\n\nView types are **zero-copy, non-owning, read-only slices**. They don't allocate memory and are ideal for passing sub-sequences without copying data.\n\n| Original Type | View Type | Slice Syntax |\n|---------------|-----------|--------------|\n| `String` | `StringView` | `s[:]`, `s[start:end]` |\n| `Bytes` | `BytesView` | `b[:]`, `b[start:end]` |\n| `Array[T]` | `ArrayView[T]` | `a[:]`, `a[start:end]` |\n| `FixedArray[T]` | `ArrayView[T]` | `a[:]`, `a[start:end]` |\n\n## StringView\n\n### Creating StringView\n\n```moonbit\nlet s = \"hello world\"\nlet view : StringView = s[:]           // Entire string\nlet hello : StringView = s[0:5]        // \"hello\"\nlet world : StringView = s[6:]         // \"world\"\nlet partial : StringView = s[:5]       // \"hello\"\n```\n\n### StringView for Function Parameters\n\n```moonbit\n///|\n/// BAD: Takes ownership, may copy\nfn process_string(s : String) -> Unit {\n  // ...\n}\n\n///|\n/// Good: Zero-copy, no allocation\nfn process_string_view(s : StringView) -> Unit {\n  // ...\n}\n\n// Both work - implicit conversion\nprocess_string_view(\"hello\")\nprocess_string_view(some_string[:])\n```\n\n### Unicode Safety\n\nStringView slicing may raise at surrogate boundaries (UTF-16 edge case):\n\n```moonbit\nfn safe_slice(s : String, start : Int, end : Int) -> StringView raise {\n  s[start:end]  // May raise on invalid boundaries\n}\n\n// Or use try! if you're certain\nlet view = try! s[start:end]\n```\n\n### StringView Methods\n\n```bash\nmoon doc StringView\n```\n\nCommon operations:\n- `view.length()` - Length in code units\n- `view.to_string()` - Convert back to owned String\n- `view.iter()` - Iterate over characters\n\n## ArrayView\n\n### Creating ArrayView\n\n```moonbit\nlet arr = [1, 2, 3, 4, 5]\nlet view : ArrayView[Int] = arr[:]      // Entire array\nlet first3 : ArrayView[Int] = arr[0:3]  // [1, 2, 3]\nlet last2 : ArrayView[Int] = arr[3:]    // [4, 5]\n```\n\n### ArrayView for Function Parameters\n\n```moonbit\n///|\n/// BAD: Takes ownership\nfn sum_array(arr : Array[Int]) -> Int {\n  arr.fold(init=0, fn(a, b) { a + b })\n}\n\n///|\n/// Good: Zero-copy, accepts slices\nfn sum_view(arr : ArrayView[Int]) -> Int {\n  arr.fold(init=0, fn(a, b) { a + b })\n}\n\n// Both work\nsum_view([1, 2, 3])        // Array literal\nsum_view(arr[:])           // Full array\nsum_view(arr[1:4])         // Slice\n```\n\n### Pattern Matching with Views\n\n```moonbit\nfn process(view : ArrayView[Int]) -> Unit {\n  match view {\n    [] => println(\"empty\")\n    [x] => println(\"single: \\{x}\")\n    [first, ..rest] => {\n      println(\"first: \\{first}\")\n      process(rest)  // rest is ArrayView\n    }\n  }\n}\n```\n\n### ArrayView Methods\n\n```bash\nmoon doc ArrayView\n```\n\nCommon operations:\n- `view.length()` - Number of elements\n- `view[i]` - Index access\n- `view.iter()` - Iterator\n- `view.to_array()` - Convert to owned Array\n\n## BytesView\n\n### Creating BytesView\n\n```moonbit\nlet bytes : Bytes = b\"hello\"\nlet view : BytesView = bytes[:]\nlet first2 : BytesView = bytes[0:2]\n```\n\n### BytesView for Binary Data\n\n```moonbit\n///|\n/// Good: Zero-copy binary parsing\nfn parse_header(data : BytesView) -> Header raise ParseError {\n  guard data.length() >= 4 else { raise ParseError::TooShort }\n  let magic = data[0:2]\n  let version = data[2:4]\n  // ...\n}\n```\n\n## Performance Patterns\n\n### Avoid Unnecessary Allocations\n\n```moonbit\n///|\n/// BAD: Creates intermediate strings\nfn join_with_separator(parts : Array[String], sep : String) -> String {\n  let mut result = \"\"\n  for i, part in parts {\n    if i > 0 { result = result + sep }\n    result = result + part  // Allocates each time!\n  }\n  result\n}\n\n///|\n/// Good: Use StringBuilder\nfn join_with_separator(parts : Array[String], sep : String) -> String {\n  let sb = StringBuilder::new()\n  for i, part in parts {\n    if i > 0 { sb.write_string(sep) }\n    sb.write_string(part)\n  }\n  sb.to_string()\n}\n```\n\n### Use Views in Recursive Functions\n\n```moonbit\n///|\n/// Good: No copying in recursion\nfn binary_search(arr : ArrayView[Int], target : Int) -> Int? {\n  guard arr.length() > 0 else { None }\n  let mid = arr.length() / 2\n  if arr[mid] == target {\n    Some(mid)\n  } else if arr[mid] > target {\n    binary_search(arr[:mid], target)\n  } else {\n    binary_search(arr[mid + 1:], target).map(fn(i) { i + mid + 1 })\n  }\n}\n```\n\n## Converting Back to Owned Types\n\nWhen you need ownership:\n\n```moonbit\nlet string_view : StringView = \"hello\"[:]\nlet owned_string : String = string_view.to_string()\n\nlet array_view : ArrayView[Int] = [1, 2, 3][:]\nlet owned_array : Array[Int] = array_view.to_array()\n\nlet bytes_view : BytesView = b\"data\"[:]\nlet owned_bytes : Bytes = bytes_view.to_bytes()\n```\n",
        "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/private_configuration.md": "---\ntitle: \"MoonBit Configuration Reference\"\n---\n\n# MoonBit Configuration Reference\n\n## File Structure\n\n```\nmy-project/\nâ”œâ”€â”€ moon.mod.json    # Module configuration (project-wide)\nâ””â”€â”€ src/\n    â”œâ”€â”€ moon.pkg       # Package configuration (new format)\n    â””â”€â”€ main.mbt\n```\n\n## Migrating from moon.pkg.json to moon.pkg\n\n`moon.pkg.json` is being migrated to the custom syntax `moon.pkg`. Convert with:\n\n```bash\nNEW_MOON_PKG=1 moon fmt\n```\n\nThis converts `moon.pkg.json` to `moon.pkg`.\n\n## moon.pkg (New Format)\n\nCompared to JSON: supports comments, trailing commas, and more concise syntax.\n\n### Imports\n\n```moonbit\n// Basic import\nimport {\n  \"moonbitlang/async/io\",\n  \"path/to/pkg\" as @alias,\n}\n\n// Test imports\nimport \"test\" {\n  \"path/to/pkg5\",\n}\n\n// White-box test imports\nimport \"wbtest\" {\n  \"path/to/pkg7\",\n}\n```\n\n### Options\n\n```moonbit\noptions(\n  \"is-main\": true,\n  \"bin-name\": \"name\",\n  link: { \"native\": { \"cc\": \"gcc\" } },\n)\n```\n\n### Comparison with JSON\n\n| Feature | JSON Format | moon.pkg Format |\n|---------|-------------|-----------------|\n| Comments | âŒ Not supported | âœ… Supported |\n| Trailing comma | âŒ Not supported | âœ… Supported |\n| Readability | Low (verbose) | High (concise) |\n\n## moon.mod.json (Module Configuration)\n\n### Required Fields\n\n```json\n{\n  \"name\": \"username/project-name\",\n  \"version\": \"0.1.0\"\n}\n```\n\n### Dependencies\n\n```json\n{\n  \"deps\": {\n    \"moonbitlang/x\": \"0.4.6\",\n    \"username/other\": { \"path\": \"../other\" }\n  }\n}\n```\n\n### Metadata\n\n```json\n{\n  \"license\": \"MIT\",\n  \"repository\": \"https://github.com/...\",\n  \"description\": \"...\",\n  \"keywords\": [\"example\", \"test\"]\n}\n```\n\n### Source Directory\n\n```json\n{\n  \"source\": \"src\"\n}\n```\n\n### Target Specification\n\n```json\n{\n  \"preferred-target\": \"js\"\n}\n```\n\n### Warning Configuration\n\n```json\n{\n  \"warn-list\": \"-2-4\",\n  \"alert-list\": \"-alert_1\"\n}\n```\n\n## moon.pkg.json (Package Configuration)\n\n### Main Package\n\n```json\n{\n  \"is-main\": true\n}\n```\n\n### Dependencies\n\n```json\n{\n  \"import\": [\n    \"moonbitlang/quickcheck\",\n    { \"path\": \"moonbitlang/x/encoding\", \"alias\": \"lib\" }\n  ],\n  \"test-import\": [...],\n  \"wbtest-import\": [...]\n}\n```\n\n### Conditional Compilation\n\n```json\n{\n  \"targets\": {\n    \"only_js.mbt\": [\"js\"],\n    \"only_wasm.mbt\": [\"wasm\"],\n    \"not_js.mbt\": [\"not\", \"js\"],\n    \"debug_only.mbt\": [\"debug\"],\n    \"js_release.mbt\": [\"and\", [\"js\"], [\"release\"]]\n  }\n}\n```\n\nConditions: `wasm`, `wasm-gc`, `js`, `debug`, `release`\nOperators: `and`, `or`, `not`\n\n### Link Options\n\n#### JS Backend\n\n```json\n{\n  \"link\": {\n    \"js\": {\n      \"exports\": [\"hello\", \"foo:bar\"],\n      \"format\": \"esm\"\n    }\n  }\n}\n```\n\nformat: `esm` (default), `cjs`, `iife`\n\n#### Wasm Backend\n\n```json\n{\n  \"link\": {\n    \"wasm-gc\": {\n      \"exports\": [\"hello\"],\n      \"use-js-builtin-string\": true\n    }\n  }\n}\n```\n\n### Pre-build\n\n```json\n{\n  \"pre-build\": [\n    {\n      \"input\": \"a.txt\",\n      \"output\": \"a.mbt\",\n      \"command\": \":embed -i $input -o $output\"\n    }\n  ]\n}\n```\n\n`:embed` converts files to MoonBit source (`--text` or `--binary`)\n\n## Warning Numbers\n\nCommon ones:\n- `1` Unused function\n- `2` Unused variable\n- `11` Partial pattern matching\n- `12` Unreachable code\n- `27` Deprecated syntax\n\nCheck all: `moonc build-package -warn-help`\n\n## References\n\n- Module: https://docs.moonbitlang.com/en/stable/toolchain/moon/module\n- Package: https://docs.moonbitlang.com/en/stable/toolchain/moon/package\n",
        "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/private_ffi.md": "---\ntitle: \"MoonBit FFI Reference\"\n---\n\n# MoonBit FFI Reference\n\n## External Type Declaration\n\n```moonbit\n#external\ntype ExternalRef\n```\n\n- Wasm: `externref`\n- JS: `any`\n- C: `void*`\n\n## External Function Declaration\n\n### JavaScript Backend\n\n```moonbit\n///| Module.function format\nfn cos(d : Double) -> Double = \"Math\" \"cos\"\n\n///| Inline JavaScript\nextern \"js\" fn cos(d : Double) -> Double =\n  #|(d) => Math.cos(d)\n\n///| Multi-line\nextern \"js\" fn fetch_json(url : String) -> Value =\n  #|(url) => fetch(url).then(r => r.json())\n```\n\n### Wasm Backend\n\n```moonbit\n///| Import from host\nfn cos(d : Double) -> Double = \"math\" \"cos\"\n\n///| Inline Wasm\nextern \"wasm\" fn identity(d : Double) -> Double =\n  #|(func (param f64) (result f64))\n```\n\n### C Backend\n\n```moonbit\nextern \"C\" fn put_char(ch : UInt) = \"putchar\"\n```\n\n## Type Mapping\n\n### JavaScript\n\n| MoonBit | JavaScript |\n|---------|-----------|\n| `String` | `string` |\n| `Bool` | `boolean` |\n| `Int`, `Double` | `number` |\n| `BigInt` | `bigint` |\n| `Bytes` | `Uint8Array` |\n| `Array[T]` | `T[]` |\n| `#external type` | `any` |\n\n### Wasm\n\n| MoonBit | Wasm |\n|---------|------|\n| `Bool`, `Int` | `i32` |\n| `Int64` | `i64` |\n| `Float` | `f32` |\n| `Double` | `f64` |\n| `#external type` | `externref` |\n\n## JavaScript FFI Patterns\n\n### Handling undefined/null\n\n```moonbit\n#external\npub type Value\n\nextern \"js\" fn Value::undefined() -> Value = \"() => undefined\"\nextern \"js\" fn Value::null() -> Value = \"() => null\"\nextern \"js\" fn Value::is_undefined(self : Value) -> Bool =\n  #|(n) => Object.is(n, undefined)\n```\n\n### Type Cast (%identity)\n\n```moonbit\nfn[T] Value::cast_from(value : T) -> Value = \"%identity\"\nfn[T] Value::cast(self : Value) -> T = \"%identity\"\n```\n\n### Error Handling\n\n```moonbit\nextern \"js\" fn wrap_ffi(\n  op : () -> Value,\n  on_ok : (Value) -> Unit,\n  on_error : (Value) -> Unit,\n) -> Unit =\n  #|(op, on_ok, on_error) => {\n  #|  try { on_ok(op()); }\n  #|  catch (e) { on_error(e); }\n  #|}\n```\n\n### Loading Node.js Modules\n\n```moonbit\nextern \"js\" fn require_ffi(path : String) -> Value =\n  #|(path) => require(path)\n\n// Usage\nlet path_module = require_ffi(\"node:path\")\n```\n\n### ESM Import with #module (Recommended)\n\nThe `#module` attribute generates ESM `import` statements in the output JavaScript.\n\n```moonbit\n#module(\"node:fs\")\nextern \"js\" fn readFileSync(path : String, encoding : String) -> String = \"readFileSync\"\n\n#module(\"node:path\")\nextern \"js\" fn basename(path : String) -> String = \"basename\"\nextern \"js\" fn dirname(path : String) -> String = \"dirname\"\n```\n\nThis generates:\n\n```javascript\nimport { readFileSync } from \"node:fs\";\nimport { basename, dirname } from \"node:path\";\n```\n\n#### Default Export\n\nUse `default` as the function name to import the default export:\n\n```moonbit\n#module(\"lodash\")\nextern \"js\" fn lodash() -> Value = \"default\"\n```\n\nGenerates:\n\n```javascript\nimport lodash from \"lodash\";\n```\n\n#### npm Packages\n\nWorks with any npm package:\n\n```moonbit\n#module(\"zod\")\nextern \"js\" fn z() -> Value = \"z\"\n\n#module(\"marked\")\nextern \"js\" fn marked(input : String) -> String = \"marked\"\n```\n\n#### Requirements\n\n- Must use `\"format\": \"esm\"` in `moon.pkg.json` link config\n- Target must be JavaScript backend (`--target js`)\n\n#### Limitations\n\n- **Only functions can be imported** - classes and objects cannot be directly imported via `#module`\n- To use classes or objects, import them through a wrapper function:\n\n```moonbit\n#module(\"some-lib\")\nextern \"js\" fn get_some_class() -> Value = \"SomeClass\"\n\n// Then use it via Value operations\nlet cls = get_some_class()\n```\n\n## Exporting Functions\n\nConfigure in `moon.pkg.json`:\n\n```json\n{\n  \"link\": {\n    \"js\": {\n      \"exports\": [\"add\", \"fib:fibonacci\"],\n      \"format\": \"esm\"\n    }\n  }\n}\n```\n\n## Callbacks\n\n### FuncRef (No Closures)\n\n```moonbit\n///| Only functions without free variables\nfn register(callback : FuncRef[() -> Unit]) -> Unit\n```\n\n### Regular Closures\n\nIn JavaScript, closures are handled automatically.\n\n## Custom Enum Values\n\n```moonbit\nenum Flags {\n  Read = 1\n  Write = 2\n  ReadWrite = 3\n}\n```\n\nUseful for compatibility with C library flags.\n\n## References\n\n- FFI: https://docs.moonbitlang.com/en/stable/language/ffi\n- JS FFI Guide: https://www.moonbitlang.com/pearls/moonbit-jsffi\n",
        "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/private_refactor.md": "---\ntitle: \"MoonBit Refactoring Patterns\"\n---\n\n# MoonBit Refactoring Patterns\n\n## Prefer match-if Pattern for Two-way Branches with No-op\n\n```moonbit\nlet opt : Int? = Some(1)\n\n///|\n/// BAD\nmatch opt {\n  Some(v) => println(\"hello\")\n  None => ()\n}\n\n///|\n/// Good\nif opt is Some(v) {\n  println(\"hello\")\n}\n```\n\n## Prefer guard for Early Returns\n\nUse `guard` when you want to exit early if a condition is not met.\n\n```moonbit\n///|\n/// BAD: Deep nesting\nfn get_value(array : Array[Int], index : Int) -> Int? {\n  if index >= 0 && index < array.length() {\n    Some(array[index])\n  } else {\n    None\n  }\n}\n\n///|\n/// Good: Early return with guard\nfn get_value(array : Array[Int], index : Int) -> Int? {\n  guard index >= 0 && index < array.length() else { None }\n  Some(array[index])\n}\n```\n\nCombine with pattern matching:\n\n```moonbit\n///|\n/// BAD: Deep nesting with match\nfn process(resources : Map[String, Resource], path : String) -> String raise Error {\n  match resources.get(path) {\n    Some(resource) => {\n      match resource {\n        PlainText(text) => process(text)\n        _ => fail(\"\\{path} is not plain text\")\n      }\n    }\n    None => fail(\"\\{path} not found\")\n  }\n}\n\n///|\n/// Good: Flatten with guard is\nfn process(resources : Map[String, Resource], path : String) -> String raise Error {\n  guard resources.get(path) is Some(resource) else { fail(\"\\{path} not found\") }\n  guard resource is PlainText(text) else { fail(\"\\{path} is not plain text\") }\n  process(text)\n}\n```\n\n## Prefer StringView for String Performance\n\n```moonbit\n///|\n/// BAD: String concatenation creates new strings each time\nfn process_string(s : String) -> String {\n  ...\n}\n\n///|\n/// Good: StringView avoids copying\nfn process_string_view(s : StringView) -> Unit {\n  ...\n}\n```\n\n## Prefer for-in over C-style for\n\n```moonbit\n///|\n/// BAD: C-style for\nfor i = 0; i < items.length(); i = i + 1 {\n  println(items[i])\n}\n\n///|\n/// Good: for-in\nfor item in items {\n  println(item)\n}\n\n///|\n/// Good: When index is needed\nfor i, item in items {\n  println(\"\\{i}: \\{item}\")\n}\n```\n\n## Prefer Arrow Functions for Single Expressions\n\n```moonbit\n///|\n/// BAD: Verbose\nlet f = fn(x) { x + 1 }\narr.map(fn(x) { x * 2 })\n\n///|\n/// Good: Arrow function\nlet f = fn { x => x + 1 }\narr.map(fn { x => x * 2 })\n```\n\n## Use else with for Loops to Return Values\n\n```moonbit\n///|\n/// BAD: Using variable to hold result\nfn find_first(arr : Array[Int], target : Int) -> Int? {\n  let mut result : Int? = None\n  for i in arr {\n    if i == target {\n      result = Some(i)\n      break\n    }\n  }\n  result\n}\n\n///|\n/// Good: Return directly with for-else\nfn find_first(arr : Array[Int], target : Int) -> Int? {\n  for i in arr {\n    if i == target {\n      break Some(i)\n    }\n  } else {\n    None\n  }\n}\n```\n",
        "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/stdlib.md": "---\ntitle: \"MoonBit Standard Library and External Packages\"\n---\n\n# MoonBit Standard Library\n\nThe standard library (`moonbitlang/core`) is **automatically available** - no need to add it to dependencies.\n\n## Important Rules\n\n- âŒ **DO NOT** use `moon add moonbitlang/core/*`\n- âŒ **DO NOT** add to `\"deps\"` in `moon.mod.json`\n- âŒ **DO NOT** add to `\"import\"` in `moon.pkg.json`\n- âœ… **DO** use directly: `@strconv.parse_int()`, `@json.parse()`, etc.\n\n## Exploring the Standard Library\n\n```bash\n# List all available packages\nmoon doc ''\n\n# Explore specific package\nmoon doc \"@json\"\nmoon doc \"@buffer\"\nmoon doc \"@encoding/utf8\"\n\n# Find specific function\nmoon doc \"@strconv.parse_int\"\n\n# Search with glob\nmoon doc \"String::*find*\"\n```\n\n## Common Packages\n\n### @json - JSON Parsing and Serialization\n\n```moonbit\n// Parse JSON\nlet value : @json.JsonValue = @json.parse(\"{\\\"name\\\": \\\"Alice\\\"}\")!\n\n// Access fields\nmatch value {\n  { \"name\": String(name) } => println(name)\n  _ => ()\n}\n\n// Serialize to JSON (derive ToJson)\nstruct User { name: String; age: Int } derive(ToJson)\n\nlet user = { name: \"Bob\", age: 30 }\nlet json_str = user.to_json().stringify()\n```\n\n### @buffer - Mutable Byte Buffer\n\n```moonbit\nlet buf = @buffer.new()\nbuf.write_string(\"Hello\")\nbuf.write_byte(b' ')\nbuf.write_string(\"World\")\nlet result = buf.to_string()  // \"Hello World\"\n```\n\n### @strconv - String Conversion\n\n```moonbit\n// Parse integers\nlet n : Int = @strconv.parse_int(\"42\")!\nlet hex : Int = @strconv.parse_int(\"ff\", base=16)!\n\n// Parse floats\nlet f : Double = @strconv.parse_double(\"3.14\")!\n```\n\n### @encoding/utf8 - UTF-8 Encoding\n\n```moonbit\n// Encode string to UTF-8 bytes\nlet bytes : Bytes = @encoding/utf8.encode(\"Hello ä¸–ç•Œ\")\n\n// Decode UTF-8 bytes to string\nlet s : String = @encoding/utf8.decode(bytes)\n```\n\n### @hashmap - Hash Map (Alternative to Map)\n\n```moonbit\nlet map : @hashmap.HashMap[String, Int] = @hashmap.new()\nmap.set(\"a\", 1)\nmap.set(\"b\", 2)\nlet value = map.get(\"a\")  // Some(1)\n```\n\n### @hashset - Hash Set\n\n```moonbit\nlet set : @hashset.HashSet[Int] = @hashset.new()\nset.insert(1)\nset.insert(2)\nset.contains(1)  // true\n```\n\n### @sorted_map / @sorted_set - Sorted Collections\n\n```moonbit\n// Keys are kept in sorted order\nlet map : @sorted_map.T[String, Int] = @sorted_map.new()\nmap.insert(\"b\", 2)\nmap.insert(\"a\", 1)\n// Iteration: a, b (sorted)\n```\n\n### @random - Random Number Generation\n\n```moonbit\nlet rng = @random.new()\nlet n = rng.int()           // Random Int\nlet f = rng.double()        // Random Double [0, 1)\nlet arr = [1, 2, 3, 4, 5]\nrng.shuffle(arr)            // Shuffle in place\n```\n\n### @time - Time and Duration\n\n```moonbit\nlet now = @time.now()\nlet duration = @time.Duration::from_seconds(5)\n```\n\n### @result - Result Utilities\n\n```moonbit\nlet ok : Result[Int, String] = Ok(42)\nlet err : Result[Int, String] = Err(\"failed\")\n\n// Map over success\nok.map(fn(n) { n * 2 })  // Ok(84)\n\n// Unwrap with default\nerr.unwrap_or(0)  // 0\n```\n\n### @option - Option Utilities\n\n```moonbit\nlet some : Int? = Some(42)\nlet none : Int? = None\n\nsome.map(fn(n) { n * 2 })  // Some(84)\nsome.unwrap_or(0)          // 42\nnone.unwrap_or(0)          // 0\n```\n\n## Collections Overview\n\n| Type | Description | Use Case |\n|------|-------------|----------|\n| `Array[T]` | Resizable array | General purpose |\n| `FixedArray[T]` | Fixed-size array | Known size, no resize |\n| `Map[K, V]` | Ordered hash map | Key-value with insertion order |\n| `@hashmap.HashMap[K, V]` | Hash map | Fast lookup |\n| `@sorted_map.T[K, V]` | Sorted map | Ordered by keys |\n| `@list.T[T]` | Linked list | Functional programming |\n| `@deque.T[T]` | Double-ended queue | Queue/stack operations |\n\n## Traits in Standard Library\n\n### Show - String Representation\n\n```moonbit\nstruct Point { x: Int; y: Int } derive(Show)\n\nlet p = { x: 1, y: 2 }\nprintln(p.to_string())  // \"{x: 1, y: 2}\"\n```\n\n### ToJson / FromJson - JSON Serialization\n\n```moonbit\nstruct Config {\n  name: String\n  value: Int\n} derive(ToJson, FromJson)\n\nlet config : Config = @json.from_json(@json.parse(json_str)!)!\n```\n\n### Eq / Compare - Equality and Ordering\n\n```moonbit\nstruct Version { major: Int; minor: Int } derive(Eq, Compare)\n\nlet v1 = { major: 1, minor: 0 }\nlet v2 = { major: 1, minor: 1 }\nv1 < v2  // true\n```\n\n### Hash - Hashing\n\n```moonbit\nstruct Key { id: Int; name: String } derive(Hash, Eq)\n\n// Can be used as HashMap key\nlet map : @hashmap.HashMap[Key, String] = @hashmap.new()\n```\n\n### Default - Default Values\n\n```moonbit\nstruct Config {\n  timeout: Int\n  retries: Int\n} derive(Default)\n\nlet config = Config::default()  // { timeout: 0, retries: 0 }\n```\n\n## Iterators\n\n```moonbit\nlet arr = [1, 2, 3, 4, 5]\n\n// Map\narr.map(fn(x) { x * 2 })  // [2, 4, 6, 8, 10]\n\n// Filter\narr.filter(fn(x) { x % 2 == 0 })  // [2, 4]\n\n// Fold\narr.fold(init=0, fn(acc, x) { acc + x })  // 15\n\n// Find\narr.find(fn(x) { x > 3 })  // Some(4)\n\n// Any / All\narr.any(fn(x) { x > 3 })  // true\narr.all(fn(x) { x > 0 })  // true\n\n// Chaining\narr.filter(fn(x) { x % 2 == 0 })\n   .map(fn(x) { x * 2 })  // [4, 8]\n```\n\n## String Operations\n\n```moonbit\nlet s = \"hello world\"\n\ns.length()                    // 11\ns.contains(\"world\")           // true\ns.starts_with(\"hello\")        // true\ns.ends_with(\"world\")          // true\ns.split(\" \")                  // [\"hello\", \"world\"]\ns.replace(\"world\", \"MoonBit\") // \"hello MoonBit\"\ns.trim()                      // Remove whitespace\ns.to_upper()                  // \"HELLO WORLD\"\ns.to_lower()                  // \"hello world\"\n```\n\n## Discovering APIs\n\nAlways use `moon doc` to discover available APIs:\n\n```bash\n# What methods does Array have?\nmoon doc \"Array\"\n\n# What's in the json package?\nmoon doc \"@json\"\n\n# Find all parse functions\nmoon doc \"*parse*\"\n```\n\n---\n\n# External Packages\n\nUnlike `moonbitlang/core`, these packages require explicit installation.\n\n## moonbitlang/x - Extended Utilities\n\nExperimental and extended utilities not yet in core.\n\n### Installation\n\n```bash\nmoon add moonbitlang/x\n```\n\n### Common Packages\n\n```moonbit\n// @x/fs - File system operations (native/node backend)\nlet content = @x/fs.read_to_string(\"file.txt\")\n\n// @x/sys - System operations\nlet args = @x/sys.get_args()\nlet env = @x/sys.get_env()\n```\n\n### Exploring\n\n```bash\nmoon doc \"@x/fs\"\nmoon doc \"@x/sys\"\n```\n\n## moonbitlang/async - Asynchronous Programming\n\nAsync/await support for MoonBit.\n\n### Installation\n\n```bash\nmoon add moonbitlang/async\n```\n\n### Important: Import Required for async main/test\n\nTo use `async fn main` or `async test`, you **must** import `moonbitlang/async` in your `moon.pkg.json`:\n\n```json\n{\n  \"import\": [\n    \"moonbitlang/async\"\n  ]\n}\n```\n\nWithout this import, `async fn main` and `async test` will not work.\n\n### Basic Usage\n\n```moonbit\n// Define async function\nasync fn fetch_data(url : String) -> String raise {\n  // async operations\n}\n\n// Run async code\n@async.run(async fn() {\n  let data = fetch_data(\"https://example.com\")!\n  println(data)\n})\n```\n\n### Exploring\n\n```bash\nmoon doc \"@async\"\n```\n",
        "plugins/kazuph-dotfiles/skills/moonbit-practice/reference/testing.md": "---\ntitle: \"MoonBit Testing Reference\"\n---\n\n# MoonBit Testing Reference\n\n## Doc Tests\n\nDoc tests can be written in `.mbt.md` files or inline docstrings.\n\n### Code Block Types\n\n| Block | Behavior |\n|-------|----------|\n| ` ```mbt check ` | Type-checked by LSP and `moon check` |\n| ` ```mbt test ` | Executed as `test {...}` block |\n| ` ```moonbit ` | Display only (not executed) |\n\n### Inline Docstring Example\n\n````moonbit\n///|\n/// Get the largest element of a non-empty `Array`.\n///\n/// # Example\n/// ```mbt test\n/// test {\n///   inspect(sum_array([1, 2, 3, 4, 5, 6]), content=\"21\")\n/// }\n/// ```\n///\n/// # Panics\n/// Panics if the `xs` is empty.\npub fn sum_array(xs : Array[Int]) -> Int {\n  xs.fold(init=0, fn(a, b) { a + b })\n}\n````\n\n### README.mbt.md\n\nCreate `README.mbt.md` in your package directory with tested code examples:\n\n````markdown\n# My Package\n\n## Usage\n\n```mbt test\ntest {\n  inspect(@mypackage.hello(), content=\"Hello, World!\")\n}\n```\n````\n\nSymlink to `README.md` for GitHub compatibility:\n\n```bash\nln -s README.mbt.md README.md\n```\n\n## Snapshot Tests\n\nUse `inspect()` for snapshot testing. Run `moon test -u` to auto-update.\n\n```moonbit\ntest \"snapshot\" {\n  inspect([1, 2, 3], content=\"\")  // Empty initially\n}\n```\n\nAfter `moon test -u`:\n\n```moonbit\ntest \"snapshot\" {\n  inspect([1, 2, 3], content=\"[1, 2, 3]\")\n}\n```\n\n### inspect vs @json.inspect\n\n- `inspect()` - Uses `Show` trait, good for simple values\n- `@json.inspect()` - Uses `ToJson` trait, better for complex nested structures\n\n```moonbit\ntest \"complex structure\" {\n  let data = { \"name\": \"Alice\", \"scores\": [90, 85, 92] }\n  @json.inspect(data, content={\"name\":\"Alice\",\"scores\":[90,85,92]})\n}\n```\n\n## Benchmarks with moon bench\n\n### Basic Benchmark\n\n```moonbit\n///|\ntest \"array_sum benchmark\" (b : @bench.T) {\n  let arr = Array::make(1000, 1)\n  b.bench(fn() { arr.fold(init=0, fn(a, b) { a + b }) })\n}\n\n///|\ntest \"array_sum_iter benchmark\" (b : @bench.T) {\n  let arr = Array::make(1000, 1)\n  b.bench(fn() {\n    let mut sum = 0\n    for v in arr {\n      sum = sum + v\n    }\n    sum\n  })\n}\n```\n\n### Running Benchmarks\n\n```bash\nmoon bench                    # Run all benchmarks\nmoon bench --target js        # JS backend\nmoon bench --target wasm-gc   # Wasm backend\n```\n\n### Benchmark Best Practices\n\n1. **Isolate the operation**: Only measure the code you want to benchmark\n2. **Use realistic data sizes**: Small inputs may not reveal performance issues\n3. **Compare alternatives**: Benchmark multiple approaches side by side\n4. **Consider different backends**: Performance varies between JS, Wasm, and Native\n\n## QuickCheck (Property-Based Testing)\n\nQuickCheck generates random test inputs automatically.\n\n### Setup\n\nAdd to `moon.pkg.json`:\n\n```json\n{\n  \"test-import\": [\n    \"moonbitlang/quickcheck\"\n  ]\n}\n```\n\n### Basic Usage\n\n```moonbit\n///|\ntest \"reverse twice is identity\" {\n  @quickcheck.check(fn(arr : Array[Int]) {\n    arr.rev().rev() == arr\n  })\n}\n\n///|\ntest \"sort is idempotent\" {\n  @quickcheck.check(fn(arr : Array[Int]) {\n    let sorted = arr.copy()\n    sorted.sort()\n    let sorted_again = sorted.copy()\n    sorted_again.sort()\n    sorted == sorted_again\n  })\n}\n```\n\n### Custom Generators\n\n```moonbit\n///|\ntest \"custom generator\" {\n  // Generate positive integers only\n  @quickcheck.check(fn(n : Int) {\n    let positive = n.abs() + 1\n    positive > 0\n  })\n}\n```\n\n### Shrinking\n\nQuickCheck automatically shrinks failing inputs to find minimal counterexamples:\n\n```moonbit\n///|\ntest \"finds minimal counterexample\" {\n  // If this fails, QuickCheck will find the smallest failing input\n  @quickcheck.check(fn(arr : Array[Int]) {\n    arr.length() < 100  // Will fail and shrink to length=100\n  })\n}\n```\n\n## Test Organization\n\n### File Naming\n\n- `*_test.mbt` - Black-box tests (only public API)\n- `*_wbtest.mbt` - White-box tests (can access private members)\n- `*.mbt.md` - Documentation with tested examples\n\n### Test Filtering\n\n```bash\nmoon test --filter \"Array::*\"           # Run tests matching pattern\nmoon test src/parser_test.mbt           # Run specific file\nmoon test -v                            # Verbose output\n```\n\n### Panic Tests\n\nName tests with `panic` prefix:\n\n```moonbit\n///|\ntest \"panic on empty array\" {\n  ignore(@mypackage.head([]))  // Should panic\n}\n```\n\n### Error Tests\n\nUse `try?` to convert errors to `Result`:\n\n```moonbit\n///|\ntest \"parse error\" {\n  let result = try? parse(\"invalid\")\n  inspect(result, content=\"Err(ParseError::InvalidInput)\")\n}\n```\n",
        "plugins/kazuph-dotfiles/skills/obsidian-knowledge-synthesizer/SKILL.md": "---\nname: obsidian-knowledge-synthesizer\ndescription: Obsidian note creation, search, and management. Use when working with Obsidian vault, creating literature notes, searching knowledge base, or synthesizing research into Mermaid diagrams with Raindrop integration.\nallowed-tools:\n  - Read\n  - Write\n  - Bash\n  - mcp__raindrop__bookmark_recent\n  - mcp__fetch__imageFetch\n---\n\n# Obsidian Knowledge Synthesizer Skill\n\n## ClaudeCodeã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ–¹é‡\n- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âœ… å¿…é ˆï¼ˆClaudeCodeã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§èµ·å‹•ï¼‰\n- ç†ç”±: Obsidianãƒãƒ¼ãƒˆç”Ÿæˆã«ã¯Raindropé€£æºãƒ»Mermaid CLIæ¤œè¨¼ãƒ»æ·»ä»˜ç®¡ç†ãªã©å¤šæ•°ã®æ‰‹é †ãŒã‚ã‚Šã€ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§å®Œçµã•ã›ãªã„ã¨iCloudãƒ‘ã‚¹ã‚„ä¸¦åˆ—fetchã®çŠ¶æ…‹ãŒæ··ç·šã™ã‚‹ã€‚\n- ãƒ¡ãƒ¢: ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå†…ã§ãƒ‡ãƒ¼ã‚¿å–å¾—â†’ãƒãƒ¼ãƒˆç”Ÿæˆâ†’Mermaidæ¤œè¨¼â†’ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ã¾ã§çµ‚ãˆã¦ã‹ã‚‰ã€æˆæœãƒ‘ã‚¹ã¨`obsidian://` URIã ã‘ã‚’ãƒ¡ã‚¤ãƒ³ã«å ±å‘Šã™ã‚‹ã€‚\n\nç ”ç©¶çµæœã‚„èª¿æŸ»ãƒ¡ãƒ¢ã‚’Obsidianã«æ®‹ã™ã¨ãã¯ã“ã®Skillã‚’å‚ç…§ã—ã€è©³ç´°è¦ä»¶ã¯ `docs/WORKFLOW.md` ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n## ãƒˆãƒªã‚¬ãƒ¼\n\n- ã€ŒObsidianã€ã€Œæ–‡çŒ®ãƒãƒ¼ãƒˆã€ã€ŒMermaidå›³ã€ã€Œè¨˜éŒ²ã¨ã—ã¦æ®‹ã—ã¦ã€ç­‰ã®æŒ‡ç¤ºã€‚\n- èª¿æŸ»å®Œäº†å¾Œã«æˆæœã‚’ä½“ç³»åŒ–ã—ãŸã„å ´åˆã€‚\n\n## æ¨™æº–ãƒ•ãƒ­ãƒ¼ï¼ˆæ¦‚è¦ï¼‰\n\n1. **ãƒ‡ãƒ¼ã‚¿å–å¾—**: `mcp__raindrop__bookmark_recent`ã§æœ€æ–°5ä»¶ã‚’å–å¾—ã€‚æ‰‹å‹•URLã®å ´åˆã‚‚åŒã˜å½¢å¼ã¸æ•´å½¢ã€‚\n2. **ä¸¦åˆ—fetch**: 5æœ¬ã® `mcp__fetch__imageFetch` ã‚’ç‹¬ç«‹ã«èµ°ã‚‰ã›ã€æˆåŠŸ/å¤±æ•—ã‚’åˆ†é›¢ã€‚è©³ç´°ã¯ `docs/WORKFLOW.md`ã€‚\n3. **ãƒãƒ¼ãƒˆç”Ÿæˆ**:\n   - `docs/NOTE_TEMPLATE.md`ã‚’ãƒ™ãƒ¼ã‚¹ã«æ—¥æœ¬èªã§è¨˜è¿°ã€‚\n   - `date`ã‚³ãƒãƒ³ãƒ‰ã§ä½œæˆæ—¥æ™‚ã‚’å–å¾—ã—ã€Frontmatterã«è¨­å®šã€‚\n   - Mermaidå›³ã‚’ä½œæˆã— `npx -y @mermaid-js/mermaid-cli --check diagram.mmd` ç­‰ã§æ¤œè¨¼ã€‚\n4. **Obsidianä¿å­˜**: `/Users/kazuph/Library/Mobile Documents/iCloud~md~obsidian/Documents/Obsidian Vault/03_æ–‡çŒ®ãƒãƒ¼ãƒˆ/` ã« `YYYY-MM-DD-HHmm-<slug>.md` ã§æ›¸ãå‡ºã—ã€`obsidian://` URIã‚’çµæœã«å«ã‚ã‚‹ã€‚æ·»ä»˜ã¯ `attachment/<topic>/` é…ä¸‹ã«ã¾ã¨ã‚ã‚‹ã€‚\n5. **ãƒ¬ãƒãƒ¼ãƒˆ**: æˆåŠŸä»¶æ•°ã€å¤±æ•—ç†ç”±ã€ãƒãƒ¼ãƒˆURIã‚’æ—¥æœ¬èªã§å ±å‘Šã€‚\n\n## é‡è¦ãƒ«ãƒ¼ãƒ«\n\n- å‡ºåŠ›/ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã™ã¹ã¦æ—¥æœ¬èªã€‚\n- Mermaidå›³ã¯å¿…é ˆã€‚CLIãƒã‚§ãƒƒã‚¯ã«é€šã‚‰ãªã„å›³ã¯ä¿®æ­£ã—ã¦ã‹ã‚‰ä¿å­˜ã€‚\n- 1è¨˜äº‹ã”ã¨ã«ç‹¬ç«‹å‡¦ç†ã€‚å¤±æ•—ã—ã¦ã‚‚æ®‹ã‚Šã®ã‚¸ãƒ§ãƒ–ã¯ç¶™ç¶šã€‚\n- ãƒ©ãƒ³ãƒ€ãƒ ãªæ—¥ä»˜è¨˜å…¥ã¯ç¦æ­¢ã€‚å¿…ãš`date`ã‚³ãƒãƒ³ãƒ‰ã§å–å¾—ã€‚\n- TikZå›³ãŒå¿…è¦ãªå ´åˆã¯ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³TeXã§æãã€`pdflatex` â†’ `magick` ã§PNG/SVGåŒ–ã—ã¦ `attachment/<topic>/` ã«æ ¼ç´ã—ã€åŒã˜ç¯€ã«TikZã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã‚‚æ®‹ã™ï¼ˆObsidianã¯ç”ŸTikZã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ãªã„ãŸã‚ï¼‰ã€‚\n\n## å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\n\n- `docs/WORKFLOW.md`: Autoãƒ¢ãƒ¼ãƒ‰è©³ç´°ã€ä¸¦åˆ—å‡¦ç†ãƒ»Mermaidãƒ«ãƒ¼ãƒ«ã€‚\n- `docs/NOTE_TEMPLATE.md`: ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã¨æœ¬æ–‡ãƒ†ãƒ³ãƒ—ãƒ¬ã€‚\n\n## ãƒ­ã‚°ã¨ãƒ•ã‚¡ã‚¤ãƒ«\n\n- ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ•ã‚§ãƒƒãƒçµæœã¯ `obsidian-knowledge-synthesizer/runtime/` é…ä¸‹ã«ä¿å­˜ã—ã¦ã‚ˆã„ã€‚\n- è¨˜éŒ²ãŒä¸è¦ã«ãªã£ãŸå ´åˆã¯`rm runtime/<file>`ã§æ•´ç†ã™ã‚‹ãŒã€å‰Šé™¤å¯¾è±¡ã‚’ç¢ºèªã—ã¦ã‹ã‚‰å®Ÿè¡Œã€‚\n\n## ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—æ‰‹é †ï¼ˆå¿…é ˆï¼‰\n\n1. Mermaidæ¤œè¨¼ç”¨ã«ç”Ÿæˆã—ãŸä¸€æ™‚ `.mmd` / `.svg` / `/tmp/*` ãŒæ®‹ã£ã¦ã„ãªã„ã‹ç¢ºèªã—ã€ä¸è¦ãªã‚‰ `rm` ã§å‰Šé™¤ã€‚\n2. `runtime/` ä»¥ä¸‹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ (`bookmark-*.json` ãªã©) ã§ä¸è¦ãªã‚‚ã®ã‚’æ˜ç¤ºçš„ã«å‰Šé™¤ã€‚\n3. Obsidianã§é–‹ã„ãŸãƒãƒ¼ãƒˆãŒã‚ã‚Œã°ç¢ºèªã—ã€å¿…è¦ãªã‚‰ `obsidian://` ã§å¯¾è±¡ãƒãƒ¼ãƒˆã‚’è¡¨ç¤ºã—ã¦å†…å®¹ãƒã‚§ãƒƒã‚¯å¾Œã«é–‰ã˜ã‚‹ã€‚\n\n## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°\n\n- **Raindrop APIã‚¨ãƒ©ãƒ¼**: ãƒ¬ã‚¹ãƒãƒ³ã‚¹IDã¨ã‚¨ãƒ©ãƒ¼æ–‡ã‚’å ±å‘Šã—ã€æ‰‹å‹•URLãƒªã‚¹ãƒˆã§ä»£æ›¿ã€‚\n- **Mermaid CLIã«å¤±æ•—**: ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºã—ã€ä¿®æ­£å¾Œã«å†å®Ÿè¡Œã€‚ã©ã†ã—ã¦ã‚‚æã‘ãªã„å ´åˆã¯ç†ç”±ã‚’è¨˜è¼‰ã€‚\n- **iCloudãƒ‘ã‚¹æœªãƒã‚¦ãƒ³ãƒˆ**: `ls`ã§ç¢ºèªã—ã€æœªåŒæœŸãªã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åŒæœŸçŠ¶æ³ã‚’å•ã„åˆã›ã‚‹ã€‚\n\nã“ã®Skillã‚’ä½¿ã†ã“ã¨ã§é•·å¤§ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ã‚’å‚ç…§ã›ãšã«Obsidianãƒãƒ¼ãƒˆã‚’å®‰å®šç”Ÿæˆã§ãã¾ã™ã€‚\n",
        "plugins/kazuph-dotfiles/skills/obsidian-knowledge-synthesizer/docs/NOTE_TEMPLATE.md": "```markdown\n---\ntitle: <æ—¥æœ¬èªã‚¿ã‚¤ãƒˆãƒ«>\ncreated: \"<date '+%Y-%m-%d %H:%M:%S %z'>\"\ntags:\n  - obsidian\n  - literature-note\nread: false\nimportant: false\nsource: \"<URL>\"\n---\n\n## æ¦‚è¦\n- ä¸»é¡Œã®è¦ç´„ã‚’2ã€œ3æ–‡ã§è¨˜è¿°ã€‚\n\n## è©³ç´°å†…å®¹\n1. ç®‡æ¡æ›¸ãã§è«–ç‚¹ã‚’æ•´ç†ã€‚\n2. å¼•ç”¨ã‚„ãƒ‡ãƒ¼ã‚¿ã¯ç°¡æ½”ã«ã€‚\n\n## é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ\n- âœ… å…·ä½“çš„ãªæ°—ä»˜ã1\n- âœ… å…·ä½“çš„ãªæ°—ä»˜ã2\n\n## å®Ÿè·µçš„ãªæ´»ç”¨æ–¹æ³•\n- ç¾å ´é©ç”¨ã‚¢ã‚¤ãƒ‡ã‚¢\n- ãƒªã‚¹ã‚¯ã‚„æ³¨æ„ç‚¹\n\n## Mermaid\n```mermaid\ngraph TD\n    A[ğŸ§  èª¿æŸ»é–‹å§‹] --> B[ğŸ“š ä¸»å¼µ1]\n    A --> C[ğŸ›  ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ]\n    B --> D[âœ… æˆæœ]\n```\n(Mermaid CLIã§`--check`æ¸ˆã¿)\n\n## å‚è€ƒ\n- [å‡ºå…¸ã‚¿ã‚¤ãƒˆãƒ«](<URL>)\n```\n",
        "plugins/kazuph-dotfiles/skills/obsidian-knowledge-synthesizer/docs/WORKFLOW.md": "# Obsidian Knowledge Synthesizer Workflow\n\nã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã‚¹ã‚­ãƒ«å…¨ä½“ã®è©³ç´°æ‰‹é †ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚SKILL.mdã§æ¦‚è¦ã‚’æŠŠæ¡ã—ã€æœ¬æ›¸ã§å®Ÿè£…ãƒ¬ãƒ™ãƒ«ã®ãƒ•ãƒ­ãƒ¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n## 1. ãƒˆãƒªã‚¬ãƒ¼ã¨å‰æ\n\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ŒObsidianã€ã€Œæ–‡çŒ®ãƒãƒ¼ãƒˆã€ã€ŒMermaidå›³ã€ãªã©ã‚’è¦æ±‚ã€‚\n- Raindropã€Fetchã€Mermaid CLI ãŒåˆ©ç”¨å¯èƒ½ã€‚\n- ãƒãƒ¼ãƒˆä¿å­˜å…ˆ: `/Users/kazuph/Library/Mobile Documents/iCloud~md~obsidian/Documents/Obsidian Vault/03_æ–‡çŒ®ãƒãƒ¼ãƒˆ/`\n\n## 2. Autoãƒ¢ãƒ¼ãƒ‰æ‰‹é †\n\n1. `mcp__raindrop__bookmark_recent` ã§æœ€æ–°5ä»¶ã‚’å–å¾—ï¼ˆcount=5ï¼‰ã€‚\n2. 5ä»¶ã‚’ç‹¬ç«‹ã‚¸ãƒ§ãƒ–ã¨ã—ã¦ä¸¦åˆ—fetch: `mcp__fetch__imageFetch`ï¼ˆ`enableFetchImages=true`, `returnBase64=true`ï¼‰ã€‚\n3. å„è¨˜äº‹ã”ã¨ã«:\n   - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†æ â†’ è¦ç´„æŠ½å‡º\n   - Mermaidå›³è¨­è¨ˆ â†’ `npx -y @mermaid-js/mermaid-cli -i diagram.mmd -o /tmp/diagram.svg --check` ã§æ§‹æ–‡æ¤œè¨¼\n   - ãƒãƒ¼ãƒˆæœ¬æ–‡ç”Ÿæˆï¼ˆæ—¥æœ¬èªï¼‰\n   - Obsidianãƒ‘ã‚¹ã¸ä¿å­˜\n4. æˆåŠŸ/å¤±æ•—ã®çµæœã‚’é›†è¨ˆã—ã€Obsidian URIã¨ã¨ã‚‚ã«ãƒ¬ãƒãƒ¼ãƒˆã€‚\n\n## 3. Mermaidå›³ãƒ«ãƒ¼ãƒ«\n\n- ã™ã¹ã¦ã®ãƒãƒ¼ãƒˆã«æœ€ä½1å›³ã€‚\n- å›³è¨˜æ³•ã¯ `graph TD` ãªã©ç”¨é€”ã«å¿œã˜ã¦é¸æŠã—ã€ãƒãƒ¼ãƒ‰ãƒ†ã‚­ã‚¹ãƒˆã«ç°¡æ½”ãªçµµæ–‡å­—ãƒ©ãƒ™ãƒ«ã‚’ä»˜ä¸ã€‚\n- CLIãƒã‚§ãƒƒã‚¯ã«å¤±æ•—ã—ãŸå ´åˆã¯ä¿®æ­£ã—ã¦å†å®Ÿè¡Œã€‚æœ€çµ‚çš„ã«ãƒãƒªãƒ‡ãƒ¼ãƒˆæ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã€‚\n\n## 4. ãƒãƒ¼ãƒˆæ§‹æˆ\n\n1. YAML Frontmatter\n   - `title`\n   - `created`ï¼ˆ`date \"+%Y-%m-%d %H:%M:%S %z\"`ã§å–å¾—ï¼‰\n   - `tags`, `read`, `important`\n2. æœ¬æ–‡ã‚»ã‚¯ã‚·ãƒ§ãƒ³\n   - `## æ¦‚è¦`\n   - `## è©³ç´°å†…å®¹`\n   - `## é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ`\n   - `## å®Ÿè·µçš„ãªæ´»ç”¨æ–¹æ³•`\n   - `## Mermaid`\n3. ã‚½ãƒ¼ã‚¹URLã‚„é–¢é€£è³‡æ–™ã¸ã®ãƒªãƒ³ã‚¯ã¯æœ¬æ–‡æœ«å°¾ã€‚\n\nãƒ†ãƒ³ãƒ—ãƒ¬ã¯ `docs/NOTE_TEMPLATE.md` ã‚’å‚ç…§ã€‚\n\n## 5. ä¸¦åˆ—å‡¦ç†ã‚¬ã‚¤ãƒ‰\n\n- 5ã¤ã®è¨˜äº‹ã‚’å®Œå…¨ã«ç‹¬ç«‹æ‰±ã„ã—ã€å¤±æ•—ã—ã¦ã‚‚ä»–ã‚¸ãƒ§ãƒ–ã‚’ç¶™ç¶šã€‚\n- ä¸¦åˆ—å‡¦ç†ã‚’æ¨¡ã™å ´åˆã¯ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œã‚„åˆ¥Taskå‘¼ã³å‡ºã—ã‚’è¡Œã„ã€å®Œäº†ã¾ã§`wait`ã™ã‚‹ã€‚\n- å¤±æ•—è¨˜éŒ²ã¯ `runtime/obsidian-jobs/<timestamp>-<slug>.json` ãªã©ã¸ä¿å­˜å¯ã€‚\n\n## 6. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°\n\n- **Fetchå¤±æ•—**: URLãƒ»ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’è¨˜éŒ²ã—ã€ãƒãƒ¼ãƒˆã«ã¯å¤±æ•—ç†ç”±ã‚’æ›¸ã„ãŸç°¡æ˜“ãƒ†ãƒ³ãƒ—ãƒ¬ã‚’ä¿å­˜ã€‚\n- **Mermaidå¤±æ•—**: CLIãƒ­ã‚°ã‚’è²¼ã‚Šä»˜ã‘ãŸã†ãˆã§ä¿®æ­£ã‚’å†è©¦è¡Œã€‚æç”»ã‚’è«¦ã‚ã‚‹å ´åˆã¯ãã®æ—¨ã‚’æ˜è¨˜ï¼ˆåŸå‰‡é¿ã‘ã‚‹ï¼‰ã€‚\n- **ä¿å­˜å¤±æ•—**: åŒåãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹å ´åˆã¯é€£ç•ªã‚’ä»˜ä¸ã€‚\n\n## 7. æ—¥æœ¬èªé‹ç”¨\n\n- ã™ã¹ã¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»ãƒãƒ¼ãƒˆã‚’æ—¥æœ¬èªã§å‡ºåŠ›ã€‚\n- å¼•ç”¨ã‚½ãƒ¼ã‚¹ãŒè‹±èªã§ã‚‚ã€æœ¬æ–‡ã§ã¯å¯èƒ½ãªé™ã‚Šæ—¥æœ¬èªã§è¦ç´„ã™ã‚‹ã€‚\n\n## 8. ãƒ­ã‚°\n\n- `runtime/` ä»¥ä¸‹ã«å„ã‚¸ãƒ§ãƒ–ã®ãƒ•ã‚§ãƒƒãƒçµæœã‚„ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ã¨å†åˆ©ç”¨ã—ã‚„ã™ã„ã€‚\n- å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆã«ã¯ä½œæˆãƒãƒ¼ãƒˆã®Obsidian URIã‚’åˆ—æŒ™ã€‚\n",
        "plugins/kazuph-dotfiles/skills/qwen-tts/EXAMPLES.md": "# Qwen3-TTS ã‚³ãƒ¼ãƒ‰ä¾‹é›†\n\n## åŸºæœ¬çš„ãªä½¿ã„æ–¹\n\n### æœ€å°ã‚³ãƒ¼ãƒ‰\n\n```python\nfrom mlx_audio.tts import load\n\nmodel = load('mlx-community/Qwen3-TTS-12Hz-1.7B-VoiceDesign-4bit')\n\nresult = next(model.generate_voice_design(\n    text=\"ã“ã‚“ã«ã¡ã¯\",\n    instruct=\"è½ã¡ç€ã„ãŸå¥³æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=150,\n))\n\n# result.audio: numpy array\n# result.sample_rate: 24000\n```\n\n### éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜\n\n```python\nimport soundfile as sf\n\nsf.write(\"output.wav\", result.audio, result.sample_rate)\n```\n\n### MP3å¤‰æ›\n\n```python\nimport subprocess\nimport tempfile\nimport soundfile as sf\n\n# ã¾ãšWAVã§ä¿å­˜\nwith tempfile.NamedTemporaryFile(suffix='.wav', delete=False) as f:\n    wav_path = f.name\n    sf.write(wav_path, result.audio, result.sample_rate)\n\n# ffmpegã§MP3å¤‰æ›\nmp3_path = \"output.mp3\"\nsubprocess.run([\n    \"ffmpeg\", \"-y\", \"-i\", wav_path,\n    \"-codec:a\", \"libmp3lame\", \"-qscale:a\", \"2\",\n    mp3_path\n])\n```\n\n## å®‰å®šã—ãŸç”Ÿæˆè¨­å®š\n\n### æ¨å¥¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿\n\n```python\nresult = next(model.generate_voice_design(\n    text=\"ãƒ†ã‚­ã‚¹ãƒˆ\",\n    instruct=\"å£°è³ªã®èª¬æ˜\",\n    language=\"Japanese\",\n    max_tokens=150,           # ç´„12ç§’\n    temperature=0.65,         # å®‰å®šæ€§é‡è¦–\n    repetition_penalty=1.15,  # ç¹°ã‚Šè¿”ã—é˜²æ­¢\n    top_k=35,                 # é¸æŠè‚¢åˆ¶é™\n    top_p=0.92,               # ç¢ºç‡ã‚«ãƒƒãƒˆã‚ªãƒ•\n))\n```\n\n### é•·æ–‡ç”¨è¨­å®š\n\n```python\n# 40ç§’ç¨‹åº¦ã®éŸ³å£°ã‚’ç”Ÿæˆ\nresult = next(model.generate_voice_design(\n    text=\"é•·ã„ãƒ†ã‚­ã‚¹ãƒˆ...\",\n    instruct=\"è½ã¡ç€ã„ãŸå¥³æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=500,           # ç´„40ç§’\n    temperature=0.65,\n    repetition_penalty=1.15,\n    top_k=35,\n    top_p=0.92,\n))\n```\n\n## å£°è³ªãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³\n\n### å¥³æ€§å£°\n\n```python\n# è½ã¡ç€ã„ãŸå¥³æ€§\nnext(model.generate_voice_design(\n    text=\"æœ¬æ—¥ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’ãŠä¼ãˆã—ã¾ã™ã€‚\",\n    instruct=\"è½ã¡ç€ã„ãŸå¥³æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=150,\n))\n\n# æ˜ã‚‹ã„è‹¥ã„å¥³æ€§\nnext(model.generate_voice_design(\n    text=\"ã‚„ã£ãŸãƒ¼ï¼ä»Šæ—¥ã¯æ¥½ã—ã„ã­ï¼\",\n    instruct=\"æ˜ã‚‹ãå…ƒæ°—ãªè‹¥ã„å¥³æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=150,\n))\n\n# å„ªã—ã„å¥³æ€§\nnext(model.generate_voice_design(\n    text=\"å¤§ä¸ˆå¤«ã§ã™ã‚ˆã€ã‚†ã£ãã‚Šä¼‘ã‚“ã§ãã ã•ã„ã­ã€‚\",\n    instruct=\"å„ªã—ãç©ã‚„ã‹ãªå¥³æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=150,\n))\n\n# ã‚¯ãƒ¼ãƒ«ãªå¥³æ€§\nnext(model.generate_voice_design(\n    text=\"å ±å‘Šæ›¸ã¯æ˜æ—¥ã¾ã§ã«æå‡ºã—ã¦ãã ã•ã„ã€‚\",\n    instruct=\"çŸ¥çš„ã§ã‚¯ãƒ¼ãƒ«ãªå¥³æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=150,\n))\n```\n\n### ç”·æ€§å£°\n\n```python\n# è½ã¡ç€ã„ãŸç”·æ€§\nnext(model.generate_voice_design(\n    text=\"ãã‚Œã§ã¯ã€èª¬æ˜ã‚’å§‹ã‚ã¾ã™ã€‚\",\n    instruct=\"è½ã¡ç€ã„ãŸç”·æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=150,\n))\n\n# æ˜ã‚‹ã„è‹¥ã„ç”·æ€§\nnext(model.generate_voice_design(\n    text=\"ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼é ‘å¼µã‚Šã¾ã™ï¼\",\n    instruct=\"æ˜ã‚‹ãå…ƒæ°—ãªè‹¥ã„ç”·æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=150,\n))\n\n# æ¸‹ã„ç”·æ€§\nnext(model.generate_voice_design(\n    text=\"ã“ã®ä»¶ã«ã¤ã„ã¦ã¯ã€æ…é‡ã«æ¤œè¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\",\n    instruct=\"ä½ãæ¸‹ã„ç”·æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=150,\n))\n\n# å„ªã—ã„ç”·æ€§\nnext(model.generate_voice_design(\n    text=\"å›°ã£ãŸã“ã¨ãŒã‚ã‚Œã°ã€ã„ã¤ã§ã‚‚ç›¸è«‡ã—ã¦ãã ã•ã„ã€‚\",\n    instruct=\"ç©ã‚„ã‹ã§å„ªã—ã„ç”·æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=150,\n))\n```\n\n## ãƒãƒƒãƒå‡¦ç†\n\n### è¤‡æ•°ãƒ†ã‚­ã‚¹ãƒˆã‚’é †æ¬¡ç”Ÿæˆ\n\n```python\nfrom pathlib import Path\nimport soundfile as sf\n\ntexts = [\n    {\"id\": \"intro\", \"text\": \"ã“ã‚“ã«ã¡ã¯\", \"instruct\": \"æ˜ã‚‹ã„å¥³æ€§ã®å£°\"},\n    {\"id\": \"main\", \"text\": \"æœ¬é¡Œã«å…¥ã‚Šã¾ã™\", \"instruct\": \"è½ã¡ç€ã„ãŸç”·æ€§ã®å£°\"},\n    {\"id\": \"outro\", \"text\": \"ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ\", \"instruct\": \"å„ªã—ã„å¥³æ€§ã®å£°\"},\n]\n\noutput_dir = Path(\"outputs\")\noutput_dir.mkdir(exist_ok=True)\n\nfor item in texts:\n    result = next(model.generate_voice_design(\n        text=item[\"text\"],\n        instruct=item[\"instruct\"],\n        language=\"Japanese\",\n        max_tokens=150,\n        temperature=0.65,\n        repetition_penalty=1.15,\n        top_k=35,\n        top_p=0.92,\n    ))\n\n    output_path = output_dir / f\"{item['id']}.wav\"\n    sf.write(str(output_path), result.audio, result.sample_rate)\n    print(f\"Generated: {output_path}\")\n```\n\n## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬\n\n### RTFè¨ˆæ¸¬\n\n```python\nimport time\n\nstart = time.time()\n\nresult = next(model.generate_voice_design(\n    text=\"ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ†ã‚­ã‚¹ãƒˆã§ã™ã€‚\",\n    instruct=\"è½ã¡ç€ã„ãŸå¥³æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=150,\n))\n\ngeneration_time = time.time() - start\nduration = len(result.audio) / result.sample_rate\nrtf = generation_time / duration\n\nprint(f\"ç”Ÿæˆæ™‚é–“: {generation_time:.2f}ç§’\")\nprint(f\"éŸ³å£°é•·: {duration:.2f}ç§’\")\nprint(f\"RTF: {rtf:.3f}\")\nprint(f\"ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ : {'å¯èƒ½' if rtf <= 1.0 else 'ä¸å¯'}\")\n```\n\n### ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰æ™‚é–“è¨ˆæ¸¬\n\n```python\nimport time\n\nstart = time.time()\nmodel = load('mlx-community/Qwen3-TTS-12Hz-1.7B-VoiceDesign-4bit')\nload_time = time.time() - start\n\nprint(f\"ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰æ™‚é–“: {load_time:.2f}ç§’\")\n```\n\n## å†ç”Ÿé€Ÿåº¦èª¿æ•´ï¼ˆå†ç”Ÿæ™‚ï¼‰\n\nTTSã®è©±é€Ÿãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ãªã„ãŸã‚ã€å†ç”Ÿæ™‚ã«èª¿æ•´ã€‚\n\n### Pythonã§ã®å†ç”Ÿé€Ÿåº¦å¤‰æ›´\n\n```python\nfrom scipy import signal\nimport numpy as np\n\ndef change_speed(audio, sample_rate, speed=1.5):\n    \"\"\"å†ç”Ÿé€Ÿåº¦ã‚’å¤‰æ›´ï¼ˆãƒ”ãƒƒãƒã‚‚å¤‰ã‚ã‚‹ï¼‰\"\"\"\n    new_length = int(len(audio) / speed)\n    return signal.resample(audio, new_length)\n\n# 1.5å€é€Ÿ\nfast_audio = change_speed(result.audio, result.sample_rate, speed=1.5)\nsf.write(\"fast.wav\", fast_audio, result.sample_rate)\n```\n\n### ffmpegã§ã®é€Ÿåº¦å¤‰æ›´ï¼ˆãƒ”ãƒƒãƒç¶­æŒï¼‰\n\n```bash\n# 1.5å€é€Ÿï¼ˆãƒ”ãƒƒãƒç¶­æŒï¼‰\nffmpeg -i input.wav -filter:a \"atempo=1.5\" output.wav\n\n# 2å€é€Ÿï¼ˆãƒ”ãƒƒãƒç¶­æŒï¼‰\nffmpeg -i input.wav -filter:a \"atempo=2.0\" output.wav\n\n# 0.5å€é€Ÿï¼ˆãƒ”ãƒƒãƒç¶­æŒï¼‰\nffmpeg -i input.wav -filter:a \"atempo=0.5\" output.wav\n```\n\n## RTX 3090ï¼ˆCUDAï¼‰\n\n### Gradio APIçµŒç”±\n\n```python\nfrom gradio_client import Client\n\nclient = Client(\"http://192.168.1.64:8000\")\n\n# å˜ä¸€ç”Ÿæˆ\nresult = client.predict(\n    text=\"ã“ã‚“ã«ã¡ã¯\",\n    voice_description=\"æ˜ã‚‹ã„å¥³æ€§ã®å£°\",\n    language=\"Japanese\",\n    api_name=\"/generate_voice_design\"\n)\n\n# ãƒãƒƒãƒç”Ÿæˆï¼ˆã‚µã‚¤ã‚º3æ¨å¥¨ï¼‰\nbatch_texts = \"\"\"ãƒ†ã‚­ã‚¹ãƒˆ1\nãƒ†ã‚­ã‚¹ãƒˆ2\nãƒ†ã‚­ã‚¹ãƒˆ3\"\"\"\n\nresult = client.predict(\n    batch_input=batch_texts,\n    voice_description=\"è½ã¡ç€ã„ãŸå¥³æ€§ã®å£°\",\n    language=\"Japanese\",\n    api_name=\"/generate_batch_ui\"\n)\n```\n\n## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°\n\n### ç”Ÿæˆå¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤\n\n```python\nimport time\n\ndef generate_with_retry(model, text, instruct, max_retries=3):\n    for attempt in range(max_retries):\n        try:\n            result = next(model.generate_voice_design(\n                text=text,\n                instruct=instruct,\n                language=\"Japanese\",\n                max_tokens=150,\n                temperature=0.65,\n                repetition_penalty=1.15,\n                top_k=35,\n                top_p=0.92,\n            ))\n            return result\n        except Exception as e:\n            print(f\"Attempt {attempt + 1} failed: {e}\")\n            if attempt < max_retries - 1:\n                time.sleep(1)\n            else:\n                raise\n\nresult = generate_with_retry(model, \"ãƒ†ã‚­ã‚¹ãƒˆ\", \"å£°è³ªèª¬æ˜\")\n```\n\n### éŸ³å£°é•·ãƒã‚§ãƒƒã‚¯\n\n```python\nresult = next(model.generate_voice_design(...))\n\nduration = len(result.audio) / result.sample_rate\n\nif duration < 1.0:\n    print(\"è­¦å‘Š: éŸ³å£°ãŒçŸ­ã™ãã¾ã™ã€‚max_tokensã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚\")\nelif duration > 60.0:\n    print(\"è­¦å‘Š: éŸ³å£°ãŒé•·ã™ãã¾ã™ã€‚max_tokensã‚’æ¸›ã‚‰ã—ã¦ãã ã•ã„ã€‚\")\nelse:\n    print(f\"éŸ³å£°é•·: {duration:.2f}ç§’ (é©åˆ‡)\")\n```\n",
        "plugins/kazuph-dotfiles/skills/qwen-tts/PARAMETERS.md": "# Qwen3-TTS ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è©³ç´°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\n## generate_voice_design() ã®å…¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿\n\n```python\nresult = next(model.generate_voice_design(\n    text=\"èª­ã¿ä¸Šã’ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ\",\n    instruct=\"å£°è³ªã®èª¬æ˜\",\n    language=\"Japanese\",\n    max_tokens=150,\n    temperature=0.65,\n    repetition_penalty=1.15,\n    top_k=35,\n    top_p=0.92,\n))\n```\n\n## ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è©³ç´°\n\n### text (å¿…é ˆ)\nèª­ã¿ä¸Šã’ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã€‚\n\n- **å‹**: `str`\n- **æ¨å¥¨æœ€å¤§é•·**: 500æ–‡å­—ç¨‹åº¦\n- **æ³¨æ„**: é•·ã™ãã‚‹ã¨max_tokensã«é”ã—ã¦é€”ä¸­ã§åˆ‡ã‚Œã‚‹\n\n### instruct (å¿…é ˆ)\nå£°è³ªãƒ»è©±ã—æ–¹ã®èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆã€‚\n\n- **å‹**: `str`\n- **æ¨å¥¨æœ€å¤§é•·**: 200æ–‡å­—\n- **åŠ¹æœ**: å£°ã®é«˜ã•ã€ãƒˆãƒ¼ãƒ³ã€æ„Ÿæƒ…ãªã©ã‚’åˆ¶å¾¡\n- **åˆ¶é™**: è©±é€Ÿã¯åˆ¶å¾¡ä¸å¯ï¼ˆã€Œæ—©å£ã€ã€Œã‚†ã£ãã‚Šã€ã¯åŠ¹ã‹ãªã„ï¼‰\n\n#### instructä¾‹\n\n```python\n# åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³\n\"è½ã¡ç€ã„ãŸå¥³æ€§ã®å£°\"\n\"æ˜ã‚‹ãå…ƒæ°—ãªç”·æ€§ã®å£°\"\n\n# è©³ç´°ãƒ‘ã‚¿ãƒ¼ãƒ³\n\"20ä»£ã®æ˜ã‚‹ãå…ƒæ°—ãªå¥³æ€§ã®å£°ã€ã‚¢ãƒŠã‚¦ãƒ³ã‚µãƒ¼ã®ã‚ˆã†ã«èãã‚„ã™ã„\"\n\"40ä»£ã®è½ã¡ç€ã„ãŸç”·æ€§ã®å£°ã€ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚­ãƒ£ã‚¹ã‚¿ãƒ¼ã®ã‚ˆã†ãªè©±ã—æ–¹\"\n\n# æ„Ÿæƒ…ãƒ‘ã‚¿ãƒ¼ãƒ³\n\"å„ªã—ãç©ã‚„ã‹ãªå¥³æ€§ã®å£°\"\n\"çŸ¥çš„ã§ã‚¯ãƒ¼ãƒ«ãªå¥³æ€§ã®å£°\"\n\"åŠ›å¼·ãé ¼ã‚ŠãŒã„ã®ã‚ã‚‹ç”·æ€§ã®å£°\"\n```\n\n### language\nè¨€èªæŒ‡å®šã€‚\n\n- **å‹**: `str`\n- **å€¤**: `\"Japanese\"`, `\"English\"`, `\"Chinese\"` ç­‰\n- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**: ãªã—ï¼ˆæ˜ç¤ºçš„ã«æŒ‡å®šæ¨å¥¨ï¼‰\n\n### max_tokens\n\nç”Ÿæˆã™ã‚‹æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã€‚**éŸ³å£°é•·ã‚’ç›´æ¥åˆ¶å¾¡**ã™ã‚‹æœ€é‡è¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€‚\n\n- **å‹**: `int`\n- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**: `4096`ï¼ˆå±é™ºï¼ä½¿ç”¨éæ¨å¥¨ï¼‰\n- **æ¨å¥¨**: `150`ï¼ˆç´„12ç§’ï¼‰\n- **ç¯„å›²**: `50` ã€œ `2000`\n\n#### max_tokens ã¨éŸ³å£°é•·ã®é–¢ä¿‚\n\n**è¨ˆç®—å¼**: `éŸ³å£°é•·ï¼ˆç§’ï¼‰â‰ˆ max_tokens / 12.5`\n\n| max_tokens | éŸ³å£°é•· | ç”¨é€” |\n|------------|--------|------|\n| 50 | 4ç§’ | æŒ¨æ‹¶ã€ç›¸æ§Œ |\n| 75 | 6ç§’ | çŸ­æ–‡ |\n| 100 | 8ç§’ | 1-2æ–‡ |\n| **150** | **12ç§’** | **æ¨™æº–ï¼ˆæ¨å¥¨ï¼‰** |\n| 200 | 16ç§’ | é•·æ–‡ |\n| 300 | 24ç§’ | ãƒ‘ãƒ©ã‚°ãƒ©ãƒ• |\n| 500 | 40ç§’ | ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |\n| 1000 | 80ç§’ | é•·å°º |\n| 2000 | 160ç§’ | æœ€å¤§æ¨å¥¨ |\n| 4096 | 327ç§’ | ä½¿ç”¨ç¦æ­¢ |\n\n### temperature\n\nã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°æ¸©åº¦ã€‚å‡ºåŠ›ã®å¤šæ§˜æ€§ã‚’åˆ¶å¾¡ã€‚\n\n- **å‹**: `float`\n- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**: `0.9`\n- **æ¨å¥¨**: `0.65`\n- **ç¯„å›²**: `0.1` ã€œ `1.0`\n\n| å€¤ | åŠ¹æœ |\n|----|------|\n| 0.1-0.4 | éå¸¸ã«å®‰å®šã€å˜èª¿ã«ãªã‚ŠãŒã¡ |\n| 0.5-0.7 | å®‰å®šã—ã¤ã¤è‡ªç„¶ |\n| **0.65** | **æ¨å¥¨ãƒãƒ©ãƒ³ã‚¹** |\n| 0.8-0.9 | å¤šæ§˜ã ãŒä¸å®‰å®šã«ãªã‚Šã‚„ã™ã„ |\n| 1.0 | æœ€å¤§å¤šæ§˜æ€§ã€å“è³ªä½ä¸‹ãƒªã‚¹ã‚¯ |\n\n### repetition_penalty\n\nç¹°ã‚Šè¿”ã—ãƒšãƒŠãƒ«ãƒ†ã‚£ã€‚åŒã˜ãƒ•ãƒ¬ãƒ¼ã‚ºã®ç¹°ã‚Šè¿”ã—ã‚’æŠ‘åˆ¶ã€‚\n\n- **å‹**: `float`\n- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**: `1.05`\n- **æ¨å¥¨**: `1.15`\n- **ç¯„å›²**: `1.0` ã€œ `2.0`\n\n| å€¤ | åŠ¹æœ |\n|----|------|\n| 1.0 | ãƒšãƒŠãƒ«ãƒ†ã‚£ãªã— |\n| 1.05 | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆå¼±ã‚ï¼‰ |\n| **1.15** | **æ¨å¥¨** |\n| 1.3+ | å¼·ã™ãã‚‹ã¨ä¸è‡ªç„¶ã« |\n| 2.0 | æœ€å¤§ï¼ˆéå‰°æŠ‘åˆ¶ãƒªã‚¹ã‚¯ï¼‰ |\n\n### top_k\n\nãƒˆãƒƒãƒ—Kã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã€‚æ¬¡ãƒˆãƒ¼ã‚¯ãƒ³å€™è£œã‚’Kå€‹ã«åˆ¶é™ã€‚\n\n- **å‹**: `int`\n- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**: `50`\n- **æ¨å¥¨**: `35`\n- **ç¯„å›²**: `10` ã€œ `100`\n\n| å€¤ | åŠ¹æœ |\n|----|------|\n| 10-20 | éå¸¸ã«åˆ¶é™çš„ã€å®‰å®šã ãŒå˜èª¿ |\n| **35** | **æ¨å¥¨ãƒãƒ©ãƒ³ã‚¹** |\n| 50 | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |\n| 100 | å¤šæ§˜ã ãŒå“è³ªä½ä¸‹ãƒªã‚¹ã‚¯ |\n\n### top_p\n\nãƒˆãƒƒãƒ—Pã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼ˆnucleus samplingï¼‰ã€‚ç´¯ç©ç¢ºç‡ãŒPã«é”ã™ã‚‹ã¾ã§ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‹ã‚‰é¸æŠã€‚\n\n- **å‹**: `float`\n- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**: `1.0`\n- **æ¨å¥¨**: `0.92`\n- **ç¯„å›²**: `0.5` ã€œ `1.0`\n\n| å€¤ | åŠ¹æœ |\n|----|------|\n| 0.5-0.7 | éå¸¸ã«ä¿å®ˆçš„ |\n| 0.8-0.9 | å®‰å®š |\n| **0.92** | **æ¨å¥¨** |\n| 1.0 | åˆ¶é™ãªã—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ |\n\n## ç’°å¢ƒåˆ¥æœ€é©è¨­å®š\n\n### Mac M2 MLXï¼ˆæ¨å¥¨è¨­å®šï¼‰\n\n```python\nmax_tokens=150,\ntemperature=0.65,\nrepetition_penalty=1.15,\ntop_k=35,\ntop_p=0.92,\n```\n\n**çµæœ**: RTF 0.955ï¼ˆã»ã¼ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰\n\n### RTX 3090 CUDAï¼ˆãƒãƒƒãƒå‡¦ç†ï¼‰\n\nãƒãƒƒãƒã‚µã‚¤ã‚º3ãŒæœ€é©ã€‚\n\n```python\n# Gradio APIçµŒç”±\nbatch_texts = \"\"\"ãƒ†ã‚­ã‚¹ãƒˆ1\nãƒ†ã‚­ã‚¹ãƒˆ2\nãƒ†ã‚­ã‚¹ãƒˆ3\"\"\"\n```\n\n**çµæœ**: RTF 0.63ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚ˆã‚Šé€Ÿã„ï¼‰\n\n## ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ\n\n```\nå•é¡Œç™ºç”Ÿ\nâ”œâ”€â”€ éŸ³å£°ãŒé•·ã™ãã‚‹ â†’ max_tokens ã‚’ä¸‹ã’ã‚‹\nâ”œâ”€â”€ ç¹°ã‚Šè¿”ã—ãŒç™ºç”Ÿ â†’ repetition_penalty ã‚’ä¸Šã’ã‚‹ (1.15+)\nâ”œâ”€â”€ å£°è³ªãŒä¸å®‰å®š â†’ temperature ã‚’ä¸‹ã’ã‚‹ (0.65)\nâ”œâ”€â”€ å˜èª¿ã™ãã‚‹ â†’ temperature ã‚’ä¸Šã’ã‚‹ / top_k ã‚’ä¸Šã’ã‚‹\nâ””â”€â”€ å¤‰ãªç™ºéŸ³ â†’ temperature ã‚’ä¸‹ã’ã‚‹ / top_p ã‚’ä¸‹ã’ã‚‹\n```\n\n## æˆ»ã‚Šå€¤\n\n```python\nresult.audio        # numpy.ndarray - éŸ³å£°ãƒ‡ãƒ¼ã‚¿\nresult.sample_rate  # int - ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒ¼ãƒˆ (24000Hz)\n```\n\n### éŸ³å£°ä¿å­˜\n\n```python\nimport soundfile as sf\nsf.write(\"output.wav\", result.audio, result.sample_rate)\n```\n\n### éŸ³å£°é•·è¨ˆç®—\n\n```python\nduration = len(result.audio) / result.sample_rate\nprint(f\"éŸ³å£°é•·: {duration:.2f}ç§’\")\n```\n",
        "plugins/kazuph-dotfiles/skills/qwen-tts/REMOTION.md": "# Remotioné€£æºã‚¬ã‚¤ãƒ‰\n\nQwen3-TTSã¨Remotionã‚’çµ„ã¿åˆã‚ã›ãŸå‹•ç”»åˆ¶ä½œãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€‚\n\n## æ¦‚è¦\n\n```\n[ãƒ†ã‚­ã‚¹ãƒˆ] â†’ [Qwen3-TTS] â†’ [WAVãƒ•ã‚¡ã‚¤ãƒ«] â†’ [Remotion] â†’ [MP4å‹•ç”»]\n```\n\n## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ\n\n```\nproject/\nâ”œâ”€â”€ remotion-videos/\nâ”‚   â”œâ”€â”€ public/\nâ”‚   â”‚   â”œâ”€â”€ audio1.wav\nâ”‚   â”‚   â”œâ”€â”€ audio2.wav\nâ”‚   â”‚   â””â”€â”€ audio3.wav\nâ”‚   â”œâ”€â”€ src/\nâ”‚   â”‚   â”œâ”€â”€ Composition.tsx\nâ”‚   â”‚   â”œâ”€â”€ Root.tsx\nâ”‚   â”‚   â””â”€â”€ components/\nâ”‚   â”‚       â””â”€â”€ TalkingCharacter.tsx\nâ”‚   â”œâ”€â”€ out/\nâ”‚   â”‚   â””â”€â”€ *.mp4\nâ”‚   â”œâ”€â”€ package.json\nâ”‚   â””â”€â”€ remotion.config.ts\nâ””â”€â”€ scripts/\n    â””â”€â”€ generate_audio.py\n```\n\n## éŸ³å£°ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ\n\n### generate_audio.py\n\n```python\n#!/usr/bin/env python3\n\"\"\"Remotionç”¨éŸ³å£°ä¸€æ‹¬ç”Ÿæˆ\"\"\"\n\nimport time\nfrom pathlib import Path\nimport soundfile as sf\nfrom mlx_audio.tts import load\n\n# è¨­å®š\nOUTPUT_DIR = Path(\"remotion-videos/public\")\nOUTPUT_DIR.mkdir(parents=True, exist_ok=True)\n\n# ç”Ÿæˆã™ã‚‹éŸ³å£°ãƒ‡ãƒ¼ã‚¿\nVOICES = [\n    {\n        \"filename\": \"intro.wav\",\n        \"text\": \"ã“ã‚“ã«ã¡ã¯ï¼ä»Šæ—¥ã¯ç´ æ™´ã‚‰ã—ã„å¤©æ°—ã§ã™ã­ã€‚\",\n        \"instruct\": \"æ˜ã‚‹ãå…ƒæ°—ãªè‹¥ã„å¥³æ€§ã®å£°\",\n    },\n    {\n        \"filename\": \"main.wav\",\n        \"text\": \"ãã‚Œã§ã¯ã€æœ¬æ—¥ã®ãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚\",\n        \"instruct\": \"è½ã¡ç€ã„ãŸç”·æ€§ã®å£°\",\n    },\n    {\n        \"filename\": \"outro.wav\",\n        \"text\": \"ã”è¦–è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚ã¾ãŸæ¬¡å›ãŠä¼šã„ã—ã¾ã—ã‚‡ã†ï¼\",\n        \"instruct\": \"å„ªã—ãç©ã‚„ã‹ãªå¥³æ€§ã®å£°\",\n    },\n]\n\n# ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰\nprint(\"Loading Qwen3-TTS model...\")\nstart = time.time()\nmodel = load('mlx-community/Qwen3-TTS-12Hz-1.7B-VoiceDesign-4bit')\nprint(f\"Model loaded in {time.time() - start:.2f}s\")\n\n# éŸ³å£°ç”Ÿæˆ\nfor voice in VOICES:\n    print(f\"Generating {voice['filename']}...\")\n    gen_start = time.time()\n\n    result = next(model.generate_voice_design(\n        text=voice[\"text\"],\n        instruct=voice[\"instruct\"],\n        language=\"Japanese\",\n        max_tokens=150,\n        temperature=0.65,\n        repetition_penalty=1.15,\n        top_k=35,\n        top_p=0.92,\n    ))\n\n    duration = len(result.audio) / result.sample_rate\n    gen_time = time.time() - gen_start\n    rtf = gen_time / duration\n\n    output_path = OUTPUT_DIR / voice[\"filename\"]\n    sf.write(str(output_path), result.audio, result.sample_rate)\n\n    print(f\"  Duration: {duration:.2f}s, Gen time: {gen_time:.2f}s, RTF: {rtf:.3f}\")\n\nprint(f\"\\nTotal time: {time.time() - start:.2f}s\")\n```\n\n## Remotionè¨­å®š\n\n### package.json\n\n```json\n{\n  \"name\": \"tts-videos\",\n  \"scripts\": {\n    \"start\": \"remotion studio\",\n    \"render\": \"remotion render src/Root.tsx Composition out/video.mp4\",\n    \"render:all\": \"node scripts/render-all.js\"\n  },\n  \"dependencies\": {\n    \"@remotion/player\": \"^4.0.0\",\n    \"react\": \"^18.0.0\",\n    \"remotion\": \"^4.0.0\"\n  }\n}\n```\n\n### remotion.config.ts\n\n```typescript\nimport { Config } from '@remotion/cli/config';\n\nConfig.setVideoImageFormat('jpeg');\nConfig.setOverwriteOutput(true);\nConfig.setConcurrency(1);\n```\n\n### src/Root.tsx\n\n```tsx\nimport { Composition } from 'remotion';\nimport { TalkingVideo } from './Composition';\n\nexport const RemotionRoot: React.FC = () => {\n  return (\n    <>\n      <Composition\n        id=\"TalkingVideo\"\n        component={TalkingVideo}\n        durationInFrames={300}\n        fps={30}\n        width={1920}\n        height={1080}\n        defaultProps={{\n          audioFile: 'intro.wav',\n        }}\n      />\n    </>\n  );\n};\n```\n\n### src/Composition.tsx\n\n```tsx\nimport { Audio, useCurrentFrame, useVideoConfig, staticFile } from 'remotion';\n\ninterface Props {\n  audioFile: string;\n}\n\nexport const TalkingVideo: React.FC<Props> = ({ audioFile }) => {\n  const frame = useCurrentFrame();\n  const { fps } = useVideoConfig();\n\n  return (\n    <div style={{\n      flex: 1,\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n    }}>\n      <Audio src={staticFile(audioFile)} />\n\n      {/* ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚„ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º */}\n      <div style={{ color: 'white', fontSize: 48 }}>\n        Speaking...\n      </div>\n    </div>\n  );\n};\n```\n\n## å®Ÿè¡Œãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼\n\n### 1. éŸ³å£°ç”Ÿæˆ\n\n```bash\nsource .venv/bin/activate\npython scripts/generate_audio.py\n```\n\nå‡ºåŠ›:\n```\nLoading Qwen3-TTS model...\nModel loaded in 3.65s\nGenerating intro.wav...\n  Duration: 5.32s, Gen time: 6.21s, RTF: 1.167\nGenerating main.wav...\n  Duration: 8.45s, Gen time: 9.12s, RTF: 1.079\nGenerating outro.wav...\n  Duration: 6.78s, Gen time: 7.34s, RTF: 1.083\n\nTotal time: 26.32s\n```\n\n### 2. å‹•ç”»ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°\n\n```bash\ncd remotion-videos\nnpm run render\n```\n\n### 3. ä¸€æ‹¬ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°\n\n```bash\nnpm run render:all\n```\n\n## å®Ÿæ¸¬ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼ˆMac M2ï¼‰\n\n| ãƒ•ã‚§ãƒ¼ã‚º | æ™‚é–“ |\n|---------|------|\n| ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰ | 3.65ç§’ |\n| éŸ³å£°3ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ | 22.31ç§’ |\n| Remotionåˆå›ãƒ“ãƒ«ãƒ‰ | ~15ç§’ |\n| å‹•ç”»3æœ¬ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° | ~30ç§’ |\n| **åˆè¨ˆ** | **ç´„70ç§’** |\n\n## Tips\n\n### éŸ³å£°é•·ã‹ã‚‰ãƒ•ãƒ¬ãƒ¼ãƒ æ•°è¨ˆç®—\n\n```typescript\nimport { getAudioDurationInSeconds } from '@remotion/media-utils';\n\nconst duration = await getAudioDurationInSeconds(staticFile('audio.wav'));\nconst frames = Math.ceil(duration * fps);\n```\n\n### å£ãƒ‘ã‚¯åŒæœŸ\n\n```tsx\nimport { interpolate, useCurrentFrame } from 'remotion';\n\nconst mouthOpen = interpolate(\n  frame % 10,\n  [0, 5, 10],\n  [0, 1, 0],\n  { extrapolateRight: 'clamp' }\n);\n```\n\n### å­—å¹•è¡¨ç¤º\n\n```tsx\nconst subtitles = [\n  { start: 0, end: 3, text: 'ã“ã‚“ã«ã¡ã¯ï¼' },\n  { start: 3, end: 6, text: 'ä»Šæ—¥ã¯ç´ æ™´ã‚‰ã—ã„å¤©æ°—ã§ã™ã­ã€‚' },\n];\n\nconst currentSubtitle = subtitles.find(\n  s => frame >= s.start * fps && frame < s.end * fps\n);\n```\n\n## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°\n\n### éŸ³å£°ãŒè¦‹ã¤ã‹ã‚‰ãªã„\n\nâ†’ `public/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«WAVãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã‹ç¢ºèª\n\n### ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒé…ã„\n\nâ†’ `Config.setConcurrency(1)` ã§ä¸¦åˆ—æ•°ã‚’åˆ¶é™ï¼ˆãƒ¡ãƒ¢ãƒªç¯€ç´„ï¼‰\n\n### éŸ³å£°ã¨æ˜ åƒãŒãšã‚Œã‚‹\n\nâ†’ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆã¨ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒ¼ãƒˆã®è¨ˆç®—ã‚’ç¢ºèª\n",
        "plugins/kazuph-dotfiles/skills/qwen-tts/SKILL.md": "---\nname: qwen-tts\ndescription: Qwen3-TTS (VoiceDesign mode) ã‚’Mac MLXã§åŠ¹ç‡çš„ã«å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ã€‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–ã€RTFãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã€Web UIæ§‹ç¯‰ã€Remotioné€£æºã«ä½¿ç”¨\n---\n\n# Qwen3-TTS MLX ã‚¬ã‚¤ãƒ‰\n\nMac M2+ï¼ˆMLXï¼‰ã§Qwen3-TTS VoiceDesignãƒ¢ãƒ¼ãƒ‰ã‚’åŠ¹ç‡çš„ã«å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€‚\n\n## æœ€é‡è¦ãƒã‚¤ãƒ³ãƒˆ\n\n**è­¦å‘Š**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ `max_tokens=4096` ã¯ **327ç§’ã®éŸ³å£°** ã‚’ç”Ÿæˆã—ã¦ã—ã¾ã†ï¼\n\n**æ¨å¥¨è¨­å®š**:\n```python\nmax_tokens=150  # ç´„12ç§’ã®éŸ³å£°\n```\n\n## RTFï¼ˆReal-Time Factorï¼‰æ—©è¦‹è¡¨\n\n| æ„å‘³ | RTFå€¤ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |\n|------|------|----------|\n| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚ˆã‚Šé€Ÿã„ | < 1 | é…ä¿¡å¯èƒ½ |\n| ç­‰é€Ÿ | = 1 | ã‚®ãƒªã‚®ãƒªå¯èƒ½ |\n| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚ˆã‚Šé…ã„ | > 1 | äº‹å‰ç”Ÿæˆå‘ã‘ |\n\n**è¨ˆç®—å¼**: `RTF = ç”Ÿæˆæ™‚é–“ Ã· éŸ³å£°ã®é•·ã•`\n\n### ç’°å¢ƒåˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹\n\n| ç’°å¢ƒ | è¨­å®š | RTF | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  |\n|------|-----|-----|------------|\n| **Mac M2 MLX** | max_tokens=150 | **0.955** | ã»ã¼å¯èƒ½ |\n| Mac M2 MLX | max_tokens=4096 | 7.0 | ä¸å¯ |\n| RTX 3090 | ãƒãƒƒãƒ3 | 0.63 | å¯èƒ½ |\n| RTX 3090 | ãƒãƒƒãƒ1 | 1.9 | ä¸å¯ |\n\n## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ\n\n### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n```bash\npython3 -m venv .venv\nsource .venv/bin/activate\npip install mlx-audio soundfile\n```\n\n### æœ€å°ã‚³ãƒ¼ãƒ‰ï¼ˆå®‰å®šç‰ˆï¼‰\n\n```python\nfrom mlx_audio.tts import load\n\nmodel = load('mlx-community/Qwen3-TTS-12Hz-1.7B-VoiceDesign-4bit')\n\nresult = next(model.generate_voice_design(\n    text=\"ã“ã‚“ã«ã¡ã¯ã€ç§ã¯ã‚¯ã‚¨ãƒ³TTSã§ã™ã€‚\",\n    instruct=\"æ˜ã‚‹ãå…ƒæ°—ãªè‹¥ã„å¥³æ€§ã®å£°\",\n    language=\"Japanese\",\n    max_tokens=150,           # é‡è¦: ç´„12ç§’\n    temperature=0.65,         # å®‰å®šæ€§å‘ä¸Š\n    repetition_penalty=1.15,  # ç¹°ã‚Šè¿”ã—é˜²æ­¢\n    top_k=35,\n    top_p=0.92,\n))\n\n# result.audio: éŸ³å£°ãƒ‡ãƒ¼ã‚¿ (numpy array)\n# result.sample_rate: 24000Hz\n```\n\n### éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜\n\n```python\nimport soundfile as sf\nsf.write(\"output.wav\", result.audio, result.sample_rate)\n```\n\n## max_tokens ã¨éŸ³å£°é•·\n\n**è¨ˆç®—å¼**: `éŸ³å£°é•·ï¼ˆç§’ï¼‰â‰ˆ max_tokens / 12.5`\n\n| max_tokens | æƒ³å®šéŸ³å£°é•· | ç”¨é€” |\n|------------|----------|------|\n| 50 | ~4ç§’ | çŸ­ã„æŒ¨æ‹¶ |\n| 100 | ~8ç§’ | ã‚·ãƒ§ãƒ¼ãƒˆãƒ•ãƒ¬ãƒ¼ã‚º |\n| **150** | **~12ç§’** | **æ¨™æº–ï¼ˆæ¨å¥¨ï¼‰** |\n| 200 | ~16ç§’ | é•·ã‚ã®èª¬æ˜ |\n| 500 | ~40ç§’ | ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |\n| 2000 | ~160ç§’ | é•·æ–‡èª­ã¿ä¸Šã’ |\n| 4096 | ~327ç§’ | ä½¿ç”¨éæ¨å¥¨ |\n\n## ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\nè©³ç´°ã¯ [PARAMETERS.md](PARAMETERS.md) ã‚’å‚ç…§ã€‚\n\n| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | æ¨å¥¨ | åŠ¹æœ |\n|-----------|-----------|------|------|\n| max_tokens | 4096 | 150 | éŸ³å£°é•·åˆ¶å¾¡ |\n| temperature | 0.9 | 0.65 | å®‰å®šæ€§å‘ä¸Š |\n| repetition_penalty | 1.05 | 1.15 | ç¹°ã‚Šè¿”ã—é˜²æ­¢ |\n| top_k | 50 | 35 | é¸æŠè‚¢åˆ¶é™ |\n| top_p | 1.0 | 0.92 | ç¢ºç‡ã‚«ãƒƒãƒˆã‚ªãƒ• |\n\n## å£°è³ªãƒ—ãƒªã‚»ãƒƒãƒˆä¾‹\n\nVoiceDesignãƒ¢ãƒ¼ãƒ‰ã¯ `instruct` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ãƒ†ã‚­ã‚¹ãƒˆæŒ‡å®šï¼š\n\n```python\n# å¥³æ€§å£°\n\"è½ã¡ç€ã„ãŸå¥³æ€§ã®å£°\"\n\"æ˜ã‚‹ãå…ƒæ°—ãªè‹¥ã„å¥³æ€§ã®å£°\"\n\"å„ªã—ãç©ã‚„ã‹ãªå¥³æ€§ã®å£°\"\n\"çŸ¥çš„ã§ã‚¯ãƒ¼ãƒ«ãªå¥³æ€§ã®å£°\"\n\n# ç”·æ€§å£°\n\"è½ã¡ç€ã„ãŸç”·æ€§ã®å£°\"\n\"æ˜ã‚‹ãå…ƒæ°—ãªè‹¥ã„ç”·æ€§ã®å£°\"\n\"ä½ãæ¸‹ã„ç”·æ€§ã®å£°\"\n\"ç©ã‚„ã‹ã§å„ªã—ã„ç”·æ€§ã®å£°\"\n```\n\n**æ³¨æ„**: `instruct` ã§ã€Œæ—©å£ã€ã€Œã‚†ã£ãã‚Šã€ã‚’æŒ‡å®šã—ã¦ã‚‚è©±é€Ÿã¯å¤‰ã‚ã‚‰ãªã„ã€‚å†ç”Ÿé€Ÿåº¦ã§èª¿æ•´ã€‚\n\n## Web UI\n\nãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ã§ãã‚‹Web UIã®æ§‹ç¯‰æ–¹æ³•ã¯ [WEB-UI.md](WEB-UI.md) ã‚’å‚ç…§ã€‚\n\n### ä¸»ãªæ©Ÿèƒ½\n- ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´\n- å£°è³ªãƒ—ãƒªã‚»ãƒƒãƒˆï¼ˆ8ç¨®é¡ï¼‰\n- ã‚­ãƒ¥ãƒ¼ãƒ™ãƒ¼ã‚¹å‡¦ç†ï¼ˆè¤‡æ•°ãƒªã‚¯ã‚¨ã‚¹ãƒˆå¯¾å¿œï¼‰\n- å†ç”Ÿé€Ÿåº¦èª¿æ•´ï¼ˆ0.5xã€œ2xï¼‰\n- å±¥æ­´ä¿å­˜ãƒ»æ°¸ç¶šåŒ–\n\n## Remotioné€£æº\n\nå‹•ç”»åˆ¶ä½œãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ [REMOTION.md](REMOTION.md) ã‚’å‚ç…§ã€‚\n\n### å®Ÿæ¸¬æ™‚é–“ï¼ˆMac M2ï¼‰\n\n| ãƒ•ã‚§ãƒ¼ã‚º | æ™‚é–“ |\n|---------|------|\n| ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰ | 3.65ç§’ |\n| éŸ³å£°ç”Ÿæˆ (3ãƒ•ã‚¡ã‚¤ãƒ«) | 22.31ç§’ |\n| å‹•ç”»ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° (3å‹•ç”») | ~30ç§’ |\n| **åˆè¨ˆ** | **ç´„70ç§’** |\n\n## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°\n\n### éŸ³å£°ãŒé•·ã™ãã‚‹\nâ†’ `max_tokens` ã‚’ä¸‹ã’ã‚‹ï¼ˆ150æ¨å¥¨ï¼‰\n\n### ç¹°ã‚Šè¿”ã—ãŒç™ºç”Ÿã™ã‚‹\nâ†’ `repetition_penalty` ã‚’1.15ä»¥ä¸Šã«\n\n### å£°è³ªãŒå®‰å®šã—ãªã„\nâ†’ `temperature` ã‚’0.65ä»¥ä¸‹ã«\n\n### è©±é€Ÿã‚’å¤‰ãˆãŸã„\nâ†’ `instruct` ã§ã¯å¤‰ã‚ã‚‰ãªã„ã€‚å†ç”Ÿæ™‚ã« `audio.playbackRate` ã§èª¿æ•´\n\n## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\n\n- [PARAMETERS.md](PARAMETERS.md) - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è©³ç´°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n- [WEB-UI.md](WEB-UI.md) - FastAPI + HTML Web UIæ§‹ç¯‰\n- [REMOTION.md](REMOTION.md) - Remotionå‹•ç”»åˆ¶ä½œé€£æº\n- [EXAMPLES.md](EXAMPLES.md) - ã‚³ãƒ¼ãƒ‰ä¾‹é›†\n\n## å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹\n\n- [Qwen3-TTS å…¬å¼](https://github.com/QwenLM/Qwen3-TTS)\n- [mlx-audio](https://github.com/Blaizzy/mlx-audio)\n- [MLX Community Model](https://huggingface.co/mlx-community/Qwen3-TTS-12Hz-1.7B-VoiceDesign-4bit)\n",
        "plugins/kazuph-dotfiles/skills/qwen-tts/WEB-UI.md": "# TTS Web UI æ§‹ç¯‰ã‚¬ã‚¤ãƒ‰\n\nãƒ–ãƒ©ã‚¦ã‚¶ã§Qwen3-TTSã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’èª¿æ•´ã§ãã‚‹Web UIã®æ§‹ç¯‰æ–¹æ³•ã€‚\n\n## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     HTTP/JSON     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Frontend       â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  Backend         â”‚\nâ”‚  (HTML/JS)      â”‚                   â”‚  (FastAPI)       â”‚\nâ”‚                 â”‚                   â”‚                  â”‚\nâ”‚  - ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼   â”‚  POST /generate   â”‚  - ã‚­ãƒ¥ãƒ¼å‡¦ç†    â”‚\nâ”‚  - ãƒ—ãƒªã‚»ãƒƒãƒˆ   â”‚  GET /task/{id}   â”‚  - TTSç”Ÿæˆ       â”‚\nâ”‚  - å±¥æ­´è¡¨ç¤º     â”‚  GET /history     â”‚  - å±¥æ­´ä¿å­˜      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ\n\n```\nproject/\nâ”œâ”€â”€ backend/\nâ”‚   â”œâ”€â”€ main.py           # FastAPI ã‚µãƒ¼ãƒãƒ¼\nâ”‚   â””â”€â”€ requirements.txt\nâ”œâ”€â”€ frontend/\nâ”‚   â””â”€â”€ index.html        # ã‚·ãƒ³ã‚°ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«UI\nâ””â”€â”€ audio_history/        # ç”ŸæˆéŸ³å£°ä¿å­˜ï¼ˆè‡ªå‹•ä½œæˆï¼‰\n    â”œâ”€â”€ metadata.json\n    â””â”€â”€ *.wav\n```\n\n## ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆFastAPIï¼‰\n\n### requirements.txt\n\n```\nfastapi>=0.100.0\nuvicorn[standard]>=0.20.0\nsoundfile>=0.12.0\nmlx-audio>=0.1.0\n```\n\n### main.py åŸºæœ¬æ§‹é€ \n\n```python\n\"\"\"TTS Web API Server with Queue\"\"\"\n\nimport asyncio\nimport json\nimport time\nimport uuid\nfrom contextlib import asynccontextmanager\nfrom dataclasses import dataclass, field\nfrom datetime import datetime\nfrom enum import Enum\nfrom pathlib import Path\nfrom typing import Dict, List, Optional\n\nimport soundfile as sf\nfrom fastapi import FastAPI, HTTPException\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom fastapi.responses import FileResponse, HTMLResponse\nfrom pydantic import BaseModel, Field\n\n# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè¨­å®š\nBASE_DIR = Path(__file__).parent.parent\nFRONTEND_DIR = BASE_DIR / \"frontend\"\nAUDIO_DIR = BASE_DIR / \"audio_history\"\nMETADATA_FILE = AUDIO_DIR / \"metadata.json\"\n\nAUDIO_DIR.mkdir(exist_ok=True)\n\n# ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ¢ãƒ‡ãƒ«\ntts_model = None\n\n\nclass TaskStatus(str, Enum):\n    QUEUED = \"queued\"\n    PROCESSING = \"processing\"\n    COMPLETED = \"completed\"\n    FAILED = \"failed\"\n\n\n@dataclass\nclass TTSTask:\n    id: str\n    text: str\n    instruct: str\n    max_tokens: int\n    temperature: float\n    repetition_penalty: float\n    top_k: int\n    top_p: float\n    status: TaskStatus = TaskStatus.QUEUED\n    created_at: str = field(default_factory=lambda: datetime.now().isoformat())\n    duration: Optional[float] = None\n    generation_time: Optional[float] = None\n    rtf: Optional[float] = None\n    error: Optional[str] = None\n    queue_position: int = 0\n\n\n# ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼\ntask_queue: asyncio.Queue = None\ntasks: Dict[str, TTSTask] = {}\nprocessing_lock = asyncio.Lock()\n\n\nasync def process_queue():\n    \"\"\"ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚­ãƒ¥ãƒ¼å‡¦ç†\"\"\"\n    global tts_model\n    while True:\n        task_id = await task_queue.get()\n        task = tasks.get(task_id)\n\n        if not task or task.status != TaskStatus.QUEUED:\n            task_queue.task_done()\n            continue\n\n        async with processing_lock:\n            task.status = TaskStatus.PROCESSING\n\n            try:\n                start_time = time.time()\n\n                # TTSå®Ÿè¡Œï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ï¼‰\n                loop = asyncio.get_event_loop()\n                result = await loop.run_in_executor(\n                    None,\n                    lambda: next(tts_model.generate_voice_design(\n                        text=task.text,\n                        instruct=task.instruct,\n                        language=\"Japanese\",\n                        max_tokens=task.max_tokens,\n                        temperature=task.temperature,\n                        repetition_penalty=task.repetition_penalty,\n                        top_k=task.top_k,\n                        top_p=task.top_p,\n                    ))\n                )\n\n                generation_time = time.time() - start_time\n                duration = len(result.audio) / result.sample_rate\n                rtf = generation_time / duration if duration > 0 else 0\n\n                # éŸ³å£°ä¿å­˜\n                audio_path = AUDIO_DIR / f\"{task.id}.wav\"\n                sf.write(str(audio_path), result.audio, result.sample_rate)\n\n                task.status = TaskStatus.COMPLETED\n                task.duration = round(duration, 2)\n                task.generation_time = round(generation_time, 2)\n                task.rtf = round(rtf, 3)\n\n            except Exception as e:\n                task.status = TaskStatus.FAILED\n                task.error = str(e)\n\n            task_queue.task_done()\n\n\n@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    \"\"\"èµ·å‹•æ™‚ã«ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰\"\"\"\n    global tts_model, task_queue\n\n    print(\"Loading Qwen3-TTS model...\")\n    from mlx_audio.tts import load\n    tts_model = load('mlx-community/Qwen3-TTS-12Hz-1.7B-VoiceDesign-4bit')\n    print(\"Model loaded!\")\n\n    task_queue = asyncio.Queue()\n    processor = asyncio.create_task(process_queue())\n\n    yield\n\n    processor.cancel()\n    tts_model = None\n\n\napp = FastAPI(title=\"TTS Web API\", lifespan=lifespan)\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n\nclass TTSRequest(BaseModel):\n    text: str = Field(..., min_length=1, max_length=500)\n    instruct: str = Field(default=\"è½ã¡ç€ã„ãŸå¥³æ€§ã®å£°\", max_length=200)\n    max_tokens: int = Field(default=500, ge=300, le=2000)\n    temperature: float = Field(default=0.65, ge=0.1, le=1.0)\n    repetition_penalty: float = Field(default=1.15, ge=1.0, le=2.0)\n    top_k: int = Field(default=35, ge=10, le=100)\n    top_p: float = Field(default=0.92, ge=0.5, le=1.0)\n\n\n@app.get(\"/\", response_class=HTMLResponse)\nasync def serve_frontend():\n    html_path = FRONTEND_DIR / \"index.html\"\n    return html_path.read_text()\n\n\n@app.post(\"/api/generate\")\nasync def generate_tts(request: TTSRequest):\n    task_id = str(uuid.uuid4())[:8]\n    task = TTSTask(\n        id=task_id,\n        text=request.text,\n        instruct=request.instruct,\n        max_tokens=request.max_tokens,\n        temperature=request.temperature,\n        repetition_penalty=request.repetition_penalty,\n        top_k=request.top_k,\n        top_p=request.top_p,\n        queue_position=task_queue.qsize() + 1\n    )\n    tasks[task_id] = task\n    await task_queue.put(task_id)\n    return {\"id\": task_id, \"status\": task.status.value}\n\n\n@app.get(\"/api/task/{task_id}\")\nasync def get_task_status(task_id: str):\n    task = tasks.get(task_id)\n    if not task:\n        raise HTTPException(status_code=404, detail=\"Task not found\")\n    return {\n        \"id\": task.id,\n        \"status\": task.status.value,\n        \"duration\": task.duration,\n        \"generation_time\": task.generation_time,\n        \"rtf\": task.rtf,\n        \"error\": task.error,\n    }\n\n\n@app.get(\"/api/audio/{audio_id}\")\nasync def get_audio(audio_id: str):\n    audio_path = AUDIO_DIR / f\"{audio_id}.wav\"\n    if not audio_path.exists():\n        raise HTTPException(status_code=404, detail=\"Audio not found\")\n    return FileResponse(audio_path, media_type=\"audio/wav\")\n```\n\n### èµ·å‹•æ–¹æ³•\n\n```bash\ncd backend\nsource ../.venv/bin/activate\nuvicorn main:app --reload --port 8000\n```\n\n## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆHTML/JSï¼‰\n\n### ä¸»è¦æ©Ÿèƒ½\n\n1. **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼**\n   - max_tokens (300-2000)\n   - temperature (0.1-1.0)\n   - repetition_penalty (1.0-2.0)\n   - top_k (10-100)\n   - top_p (0.5-1.0)\n\n2. **å£°è³ªãƒ—ãƒªã‚»ãƒƒãƒˆ**\n   - è½ã¡ç€ã„ãŸå¥³æ€§/ç”·æ€§\n   - æ˜ã‚‹ãå…ƒæ°—ãªå¥³æ€§/ç”·æ€§\n   - å„ªã—ãç©ã‚„ã‹ãªå¥³æ€§/ç”·æ€§\n   - çŸ¥çš„ã§ã‚¯ãƒ¼ãƒ«ãªå¥³æ€§/ç”·æ€§\n\n3. **å†ç”Ÿé€Ÿåº¦èª¿æ•´**\n   - 0.5x, 0.7x, 1x, 1.2x, 1.5x, 2x\n   - `audio.playbackRate` ã§å®Ÿè£…\n\n4. **ã‚­ãƒ¥ãƒ¼çŠ¶æ…‹è¡¨ç¤º**\n   - å¾…æ©Ÿä¸­/å‡¦ç†ä¸­/å®Œäº†/å¤±æ•—\n   - ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ï¼ˆæ¨å®šå®Œäº†æ™‚é–“ï¼‰\n\n5. **å±¥æ­´æ°¸ç¶šåŒ–**\n   - LocalStorageã§ã¯ãªãã‚µãƒ¼ãƒãƒ¼å´ã§ä¿å­˜\n   - ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚‚å±¥æ­´ãŒæ®‹ã‚‹\n\n### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                     TTS Web UI                        â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                  â”‚                                    â”‚\nâ”‚  [Controls]      â”‚  [Timeline]                        â”‚\nâ”‚                  â”‚                                    â”‚\nâ”‚  Text Input      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  Voice Preset    â”‚  â”‚ éŸ³å£°ã‚«ãƒ¼ãƒ‰ 1               â”‚   â”‚\nâ”‚  Sliders         â”‚  â”‚ â–¶ [â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€] 0:12      â”‚   â”‚\nâ”‚                  â”‚  â”‚ 0.5x 1x 1.5x | RTF: 0.95   â”‚   â”‚\nâ”‚  [Generate â–¶]    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚  (sticky top)    â”‚                                    â”‚\nâ”‚                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚                  â”‚  â”‚ éŸ³å£°ã‚«ãƒ¼ãƒ‰ 2               â”‚   â”‚\nâ”‚                  â”‚  â”‚ ...                        â”‚   â”‚\nâ”‚                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                  â”‚                                    â”‚\nâ”‚  (scrollable)    â”‚  (scrollable independently)        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### ç‹¬ç«‹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«CSS\n\n```css\n.app {\n    display: flex;\n    height: 100vh;\n    overflow: hidden;\n}\n\n.controls-panel {\n    width: 380px;\n    height: 100vh;\n    overflow-y: auto;\n    flex-shrink: 0;\n}\n\n.timeline-panel {\n    flex: 1;\n    height: 100vh;\n    overflow-y: auto;\n}\n```\n\n### ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ¨å®š\n\n```javascript\n// æ¨å®šç”Ÿæˆæ™‚é–“ = (max_tokens / 12.5) * RTF\nconst estimatedDuration = (maxTokens / 12.5) * 1.5; // RTF 1.5æƒ³å®š\n\n// ãƒãƒ¼ãƒªãƒ³ã‚°ã§é€²æ—æ›´æ–°\nasync function pollTaskStatus(taskId, maxTokens) {\n    const startTime = Date.now();\n    const estimated = (maxTokens / 12.5) * 1.5 * 1000; // ms\n\n    while (true) {\n        const elapsed = Date.now() - startTime;\n        const progress = Math.min(95, (elapsed / estimated) * 100);\n\n        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°\n        progressBar.style.width = `${progress}%`;\n\n        const response = await fetch(`/api/task/${taskId}`);\n        const task = await response.json();\n\n        if (task.status === 'completed') {\n            progressBar.style.width = '100%';\n            break;\n        }\n        if (task.status === 'failed') {\n            throw new Error(task.error);\n        }\n\n        await new Promise(r => setTimeout(r, 500));\n    }\n}\n```\n\n### å†ç”Ÿé€Ÿåº¦ãƒœã‚¿ãƒ³\n\n```javascript\nfunction setPlaybackRate(audio, rate) {\n    audio.playbackRate = rate;\n\n    // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹æ›´æ–°\n    document.querySelectorAll('.speed-btn').forEach(btn => {\n        btn.classList.toggle('active', btn.dataset.rate === String(rate));\n    });\n}\n```\n\n## APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§\n\n| ãƒ¡ã‚½ãƒƒãƒ‰ | ãƒ‘ã‚¹ | èª¬æ˜ |\n|---------|------|------|\n| GET | `/` | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰HTML |\n| GET | `/api/health` | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ |\n| POST | `/api/generate` | TTSç”Ÿæˆé–‹å§‹ |\n| GET | `/api/task/{id}` | ã‚¿ã‚¹ã‚¯çŠ¶æ…‹å–å¾— |\n| GET | `/api/audio/{id}` | éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«å–å¾— |\n| GET | `/api/history` | å±¥æ­´ä¸€è¦§ |\n| DELETE | `/api/history/{id}` | å±¥æ­´å‰Šé™¤ |\n| GET | `/api/queue` | ã‚­ãƒ¥ãƒ¼çŠ¶æ…‹ |\n\n## å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ\n\n### 1. éåŒæœŸã‚­ãƒ¥ãƒ¼å‡¦ç†\n\nTTSç”Ÿæˆã¯CPU/GPUé›†ä¸­å‡¦ç†ã®ãŸã‚ã€`run_in_executor` ã§ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ã€‚\n\n```python\nloop = asyncio.get_event_loop()\nresult = await loop.run_in_executor(None, lambda: ...)\n```\n\n### 2. å±¥æ­´æ°¸ç¶šåŒ–\n\n`audio_history/metadata.json` ã«ä¿å­˜ã€‚LocalStorageã§ã¯ãªãã‚µãƒ¼ãƒãƒ¼å´ã§ç®¡ç†ã€‚\n\n### 3. Generateãƒœã‚¿ãƒ³å›ºå®š\n\nå·¦ãƒ‘ãƒãƒ«ã®ãƒˆãƒƒãƒ—ã«å›ºå®šé…ç½®ã—ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã‚‚å¸¸ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã€‚\n\n### 4. å·¦å³ç‹¬ç«‹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«\n\næ“ä½œãƒ‘ãƒãƒ«ã¨å±¥æ­´ãƒ‘ãƒãƒ«ã‚’å€‹åˆ¥ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã«ã€‚\n",
        "plugins/kazuph-dotfiles/skills/react-router-v7-mastery/SKILL.md": "---\nname: react-router-v7-mastery\ndescription: React Router v7ã®ãƒ¢ãƒ€ãƒ³ãªé–‹ç™ºæ‰‹æ³•ã‚’æä¾›ã™ã‚‹ã‚¹ã‚­ãƒ«ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°(auto-routes)ã€æ©Ÿèƒ½çš„å‡é›†ã¨ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€Honoçµ±åˆ(Cloudflare Workers)ã€å‹å®‰å…¨ãªãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ç­‰ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’å«ã‚€ã€‚\n---\n\n# React Router v7 Mastery\n\nReact Router v7ã®ãƒ¢ãƒ€ãƒ³ãªé–‹ç™ºæ‰‹æ³•ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’æä¾›ã™ã‚‹ã‚¹ã‚­ãƒ«ã€‚\n\n## æ ¸å¿ƒåŸå‰‡\n\n### 1. æ©Ÿèƒ½çš„å‡é›†ï¼ˆFunctional Cohesionï¼‰\nå˜ä¸€ã®æ˜ç¢ºãªå½¹å‰²ã«é›†ä¸­ã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆã«ã‚ˆã‚Šã€å¤‰æ›´è€æ€§ã¨ä¿å®ˆæ€§ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚\n\n### 2. ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆColocationï¼‰\né–¢é€£ã‚³ãƒ¼ãƒ‰ã‚’åŒã˜å ´æ‰€ã«é…ç½®ã—ã€äººç‚ºçš„ãªé–¢å¿ƒã®åˆ†é›¢ã‚’æ’é™¤ã™ã‚‹ã€‚\n\n### 3. è¦ç´„å„ªå…ˆè¨­å®šï¼ˆConvention over Configurationï¼‰\nãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ãŒãƒ«ãƒ¼ãƒˆå®šç¾©ã‚’è‡ªå‹•çš„ã«æ±ºå®šã—ã€ã‚¼ãƒ­ã‚³ãƒ³ãƒ•ã‚£ã‚°ã§å‹•ä½œã™ã‚‹ã€‚\n\n## Hono + React Router çµ±åˆ (Cloudflare Workers)\n\nHono ã‚’ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¨ã—ã€API ã¯ Honoã€UI ã¯ React Router ã§å‡¦ç†ã™ã‚‹ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ§‹æˆã€‚\nè©³ç´°ã¯ [references/with-hono.md](references/with-hono.md) ã‚’å‚ç…§ã€‚\n\n### æ§‹æˆæ¦‚è¦\n- **Entry**: `server/index.ts` ã§ Hono ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã€‚\n- **API**: `/api/*` ã¯ Hono ã® `app.route()` ã§å‡¦ç†ã€‚\n- **UI**: `*` ã‚’ React Router ã® `createRequestHandler` ã«å§”è­²ã€‚\n- **Context**: `AppLoadContext` ã‚’é€šã˜ã¦ Cloudflare Bindings (`env`, `cf`, `ctx`) ã‚’ Loader/Action ã«æ³¨å…¥ã€‚\n\n```typescript\n// server/index.ts\nimport { Hono } from \"hono\";\nimport { createRequestHandler } from \"react-router\";\n\nconst app = new Hono();\napp.route(\"/api\", apiRoutes); // APIã¯Honoã§\napp.all(\"*\", (c) => requestHandler(c.req.raw, getLoadContext(c))); // UIã¯React Routerã§\nexport default app;\n```\n\n## è‡ªå‹•ãƒ«ãƒ¼ãƒˆç”Ÿæˆï¼ˆreact-router-auto-routesï¼‰\n\nè©³ç´°ã¯ [references/auto-routes-guide.md](references/auto-routes-guide.md) ã‚’å‚ç…§ã€‚\n\n### åŸºæœ¬è¨­å®š\n```typescript\n// app/routes.ts\nimport { autoRoutes } from 'react-router-auto-routes'\n\nexport default autoRoutes({\n  routesDir: 'routes',\n  routeRegex: /\\.(ts|tsx|js|jsx)$/,\n})\n```\n\n## å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³\n\n### ãƒ­ãƒ¼ãƒ«åˆ¥ãƒ«ãƒ¼ãƒˆåˆ†é›¢\nåŒã˜ãƒªã‚½ãƒ¼ã‚¹ã§ã‚‚ãƒ­ãƒ¼ãƒ«ã«ã‚ˆã£ã¦è²¬å‹™ãŒç•°ãªã‚‹å ´åˆã¯ã€ãƒ«ãƒ¼ãƒˆã‚’åˆ†é›¢ã™ã‚‹ï¼ˆä¾‹: `_buyer+/products` vs `_seller+/products`ï¼‰ã€‚\n\n### + ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ï¼ˆã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰\n`+` ã§å§‹ã¾ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ•ã‚©ãƒ«ãƒ€ã¯ãƒ«ãƒ¼ãƒˆå‡¦ç†ã‹ã‚‰é™¤å¤–ã•ã‚Œã€ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚„ãƒ†ã‚¹ãƒˆã‚’å…±å­˜ã•ã›ã‚‰ã‚Œã‚‹ã€‚\n\n```\nroutes/\nâ”œâ”€â”€ dashboard/\nâ”‚   â”œâ”€â”€ route.tsx           â†’ /dashboard\nâ”‚   â”œâ”€â”€ +helpers.ts         # é™¤å¤–\nâ”‚   â””â”€â”€ +components/        # é™¤å¤–\n```\n\n### ts-pattern ã«ã‚ˆã‚‹å‹å®‰å…¨ãªå‡ºã—åˆ†ã‘\nãƒ«ãƒ¼ãƒˆåˆ†å²ã§ããªã„å ´åˆã€`ts-pattern` ã§å„ã‚±ãƒ¼ã‚¹ã‚’ç‹¬ç«‹ã•ã›ã‚‹ã€‚\n\n## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ è¦ç´„\n```\napp/routes/\nâ”œâ”€â”€ _buyer+/                    # è³¼å…¥è€…å‘ã‘\nâ”œâ”€â”€ _seller+/                   # å‡ºå“è€…å‘ã‘\nâ””â”€â”€ _shared/                    # å…±æœ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\n```\n\n## å‚è€ƒè³‡æ–™\n- [Honoçµ±åˆã‚¬ã‚¤ãƒ‰](references/with-hono.md) - Cloudflare Workersã§ã®Hono + RRv7æ§‹æˆ\n- [å‡é›†ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°](references/cohesion-patterns.md)\n- [è‡ªå‹•ãƒ«ãƒ¼ãƒˆç”Ÿæˆã‚¬ã‚¤ãƒ‰](references/auto-routes-guide.md)\n",
        "plugins/kazuph-dotfiles/skills/react-router-v7-mastery/references/auto-routes-guide.md": "# React Router Auto Routes è©³ç´°ã‚¬ã‚¤ãƒ‰\n\n## ç›®æ¬¡\n\n1. [æ¦‚è¦](#æ¦‚è¦)\n2. [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®š](#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®š)\n3. [ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¦ç´„](#ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¦ç´„)\n4. [ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿæ§‹](#ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿæ§‹)\n5. [ãƒ¢ãƒãƒ¬ãƒå¯¾å¿œ](#ãƒ¢ãƒãƒ¬ãƒå¯¾å¿œ)\n6. [é‡è¦ãªç§»è¡Œä¸Šã®ç•™æ„ç‚¹](#é‡è¦ãªç§»è¡Œä¸Šã®ç•™æ„ç‚¹)\n7. [å®Ÿè·µãƒ‘ã‚¿ãƒ¼ãƒ³](#å®Ÿè·µãƒ‘ã‚¿ãƒ¼ãƒ³)\n\n## æ¦‚è¦\n\n**React Router Auto Routes** ã¯ã€React Router v7+ å‘ã‘ã®è‡ªå‹•ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚\n\n### è¨­è¨ˆæ€æƒ³\n\n1. **è¦ç´„å„ªå…ˆè¨­å®šï¼ˆConvention over Configurationï¼‰**\n   - ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ãŒãƒ«ãƒ¼ãƒˆå®šç¾©ã‚’è‡ªå‹•çš„ã«æ±ºå®š\n   - ã‚¼ãƒ­ã‚³ãƒ³ãƒ•ã‚£ã‚°ã§å‹•ä½œã—ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚’å®Ÿç¾\n\n2. **ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³**\n   - \"Place code as close to where it's relevant as possible\" â€” Kent C. Dodds\n   - é–¢é€£ã‚³ãƒ¼ãƒ‰ã‚’åŒã˜å ´æ‰€ã«é…ç½®ã—ã€äººç‚ºçš„ãªé–¢å¿ƒã®åˆ†é›¢ã‚’æ’é™¤\n\n### ä¸»è¦æ©Ÿèƒ½\n\n| æ©Ÿèƒ½ | èª¬æ˜ |\n|------|------|\n| **æŸ”è»Ÿãªãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ** | ãƒ•ã‚©ãƒ«ãƒ€ãƒ™ãƒ¼ã‚¹ã¨ãƒ‰ãƒƒãƒˆåŒºåˆ‡ã‚Šè¨˜æ³•ã‚’æ··ç”¨å¯èƒ½ |\n| **+ ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹** | `+` ã§å§‹ã¾ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ«ãƒ¼ã‚¿ãƒ¼ãŒç„¡è¦–ï¼ˆãƒ˜ãƒ«ãƒ‘ãƒ¼ã€ãƒ†ã‚¹ãƒˆå…±å­˜ï¼‰ |\n| **ãƒ¢ãƒãƒ¬ãƒå¯¾å¿œ** | è¤‡æ•°ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ãƒ«ãƒ¼ãƒˆã‚’ãƒã‚¦ãƒ³ãƒˆå¯èƒ½ |\n| **ESMé™å®š** | æœ€æ–°ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³å‘ã‘ã«æœ€é©åŒ– |\n\n### è¦ä»¶\n\n- Node.js â‰¥ 20\n- React Router v7+\n\n## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®š\n\n### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n```bash\nnpm install -D react-router-auto-routes\n```\n\n### åŸºæœ¬è¨­å®š\n\n```typescript\n// app/routes.ts\nimport { autoRoutes } from 'react-router-auto-routes'\n\nexport default autoRoutes()\n```\n\n### ã‚«ã‚¹ã‚¿ãƒ è¨­å®š\n\n```typescript\n// app/routes.ts\nimport { autoRoutes } from 'react-router-auto-routes'\n\nexport default autoRoutes({\n  routesDir: 'routes',              // ã‚¹ã‚­ãƒ£ãƒ³å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 'routes'ï¼‰\n  ignoredRouteFiles: ['**/*.*'],     // ç„¡è¦–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³\n  paramChar: '$',                    // å‹•çš„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆè¨˜å·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: '$'ï¼‰\n  colocationChar: '+',               // ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨˜å·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: '+'ï¼‰\n  routeRegex: /\\.(ts|tsx|js|jsx)$/,  // ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«åˆ¤å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: TS/JSæ‹¡å¼µå­ï¼‰\n})\n```\n\n## ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¦ç´„\n\n### åŸºæœ¬çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³\n\n```\nroutes/\nâ”œâ”€â”€ index.tsx               â†’ /\nâ”œâ”€â”€ about.tsx               â†’ /about\nâ”œâ”€â”€ contact.tsx             â†’ /contact\nâ””â”€â”€ blog.tsx                â†’ /blog\n```\n\n### å‹•çš„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ\n\n`$` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã§å‹•çš„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’å®šç¾©ã€‚\n\n```\nroutes/\nâ”œâ”€â”€ users/\nâ”‚   â”œâ”€â”€ index.tsx           â†’ /users\nâ”‚   â””â”€â”€ $id.tsx             â†’ /users/:id\nâ””â”€â”€ posts/\n    â””â”€â”€ $slug.tsx           â†’ /posts/:slug\n```\n\n```tsx\n// routes/users/$id.tsx\nexport async function loader({ params }: Route.LoaderArgs) {\n  const user = await getUser(params.id)  // params.id ã«ã‚¢ã‚¯ã‚»ã‚¹\n  return { user }\n}\n```\n\n### ã‚­ãƒ£ãƒƒãƒã‚ªãƒ¼ãƒ«ãƒ«ãƒ¼ãƒˆ\n\n`$.tsx` ã§ã‚­ãƒ£ãƒƒãƒã‚ªãƒ¼ãƒ«ã‚’å®šç¾©ã€‚\n\n```\nroutes/\nâ”œâ”€â”€ index.tsx               â†’ /\nâ””â”€â”€ $.tsx                   â†’ /* (404ã¾ãŸã¯CMSå‹•çš„ãƒšãƒ¼ã‚¸)\n```\n\n```tsx\n// routes/$.tsx\nexport async function loader({ params }: Route.LoaderArgs) {\n  const page = await getCMSPage(params['*'])  // params['*'] ã«ãƒãƒƒãƒã—ãŸãƒ‘ã‚¹\n  if (!page) throw new Response(\"Not Found\", { status: 404 })\n  return { page }\n}\n\nexport default function CMSPage({ loaderData }: Route.ComponentProps) {\n  return <div dangerouslySetInnerHTML={{ __html: loaderData.page.content }} />\n}\n```\n\n### ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ\n\n`(segment)` ã§ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’å®šç¾©ã€‚\n\n```\nroutes/\nâ””â”€â”€ (lang)/\n    â””â”€â”€ about.tsx           â†’ /about ã¾ãŸã¯ /lang/about\n```\n\n### ãƒªãƒ†ãƒ©ãƒ«ãƒ‰ãƒƒãƒˆ\n\n`[.]` ã§ãƒªãƒ†ãƒ©ãƒ«ãƒ‰ãƒƒãƒˆã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å®šç¾©ã€‚\n\n```\nroutes/\nâ”œâ”€â”€ robots[.]txt.ts         â†’ /robots.txt\nâ””â”€â”€ sitemap[.]xml.ts        â†’ /sitemap.xml\n```\n\n```tsx\n// routes/robots[.]txt.ts\nexport function loader() {\n  return new Response(\n    `User-agent: *\\nAllow: /`,\n    { headers: { \"Content-Type\": \"text/plain\" } }\n  )\n}\n```\n\n### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ«ãƒ¼ãƒˆ\n\n`_layout.tsx` ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å®šç¾©ï¼ˆURLã«ç¾ã‚Œãªã„ï¼‰ã€‚\n\n```\nroutes/\nâ”œâ”€â”€ _layout.tsx             â†’ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆOutletå¿…é ˆï¼‰\nâ”œâ”€â”€ index.tsx               â†’ /\nâ””â”€â”€ about.tsx               â†’ /about\n```\n\n```tsx\n// routes/_layout.tsx\nimport { Outlet } from 'react-router'\n\nexport default function Layout() {\n  return (\n    <div>\n      <header>å…±é€šãƒ˜ãƒƒãƒ€ãƒ¼</header>\n      <main>\n        <Outlet />  {/* å­ãƒ«ãƒ¼ãƒˆãŒã“ã“ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° */}\n      </main>\n      <footer>å…±é€šãƒ•ãƒƒã‚¿ãƒ¼</footer>\n    </div>\n  )\n}\n```\n\n### ãƒã‚¹ãƒˆãƒ«ãƒ¼ãƒˆ\n\nãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã§ãƒã‚¹ãƒˆã‚’è¡¨ç¾ã€‚\n\n```\nroutes/\nâ”œâ”€â”€ dashboard/\nâ”‚   â”œâ”€â”€ index.tsx           â†’ /dashboard\nâ”‚   â”œâ”€â”€ settings.tsx        â†’ /dashboard/settings\nâ”‚   â””â”€â”€ users/\nâ”‚       â”œâ”€â”€ index.tsx       â†’ /dashboard/users\nâ”‚       â””â”€â”€ $id.tsx         â†’ /dashboard/users/:id\n```\n\n## ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿæ§‹\n\n### + ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®ä½¿ã„æ–¹\n\n`+` ã§å§‹ã¾ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ•ã‚©ãƒ«ãƒ€ã¯ãƒ«ãƒ¼ãƒˆå‡¦ç†ã‹ã‚‰é™¤å¤–ã•ã‚Œã€ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚„ãƒ†ã‚¹ãƒˆã‚’å…±å­˜ã•ã›ã‚‰ã‚Œã‚‹ã€‚\n\n```\nroutes/\nâ”œâ”€â”€ dashboard/\nâ”‚   â”œâ”€â”€ index.tsx           â†’ /dashboardï¼ˆãƒ«ãƒ¼ãƒˆï¼‰\nâ”‚   â”œâ”€â”€ +helpers.ts         # ãƒ«ãƒ¼ã‚¿ãƒ¼ãŒç„¡è¦–\nâ”‚   â”œâ”€â”€ +types.ts           # ãƒ«ãƒ¼ã‚¿ãƒ¼ãŒç„¡è¦–\nâ”‚   â”œâ”€â”€ +components/        # ãƒ«ãƒ¼ã‚¿ãƒ¼ãŒç„¡è¦–\nâ”‚   â”‚   â”œâ”€â”€ chart.tsx\nâ”‚   â”‚   â””â”€â”€ data-table.tsx\nâ”‚   â””â”€â”€ +__tests__/         # ãƒ«ãƒ¼ã‚¿ãƒ¼ãŒç„¡è¦–\nâ”‚       â””â”€â”€ index.test.tsx\n```\n\n### ç›¸å¯¾ã‚¤ãƒ³ãƒãƒ¼ãƒˆ\n\nåŒä¸€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã® `+` ãƒ•ã‚¡ã‚¤ãƒ«ã¯ç›¸å¯¾ãƒ‘ã‚¹ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€‚\n\n```tsx\n// routes/dashboard/index.tsx\nimport { formatNumber } from './+helpers'\nimport { DashboardData } from './+types'\nimport { Chart } from './+components/chart'\n\nexport async function loader() {\n  const data: DashboardData = await getDashboardData()\n  return { data }\n}\n\nexport default function Dashboard({ loaderData }: Route.ComponentProps) {\n  return (\n    <div>\n      <h1>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>\n      <Chart data={loaderData.data} />\n      <p>åˆè¨ˆ: {formatNumber(loaderData.data.total)}</p>\n    </div>\n  )\n}\n```\n\n### é‡è¦ãªåˆ¶ç´„\n\n**ãƒ«ãƒ¼ãƒ«ï¼š** `+` ã§å§‹ã¾ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ•ã‚©ãƒ«ãƒ€ã¯ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ï¼ˆ`routes/` ç›´ä¸‹ï¼‰ã«ã¯ç½®ã‘ãªã„ã€‚\n\n```\nroutes/\nâ”œâ”€â”€ +helpers.ts             âŒ è¨±å¯ã•ã‚Œãªã„\nâ””â”€â”€ _top/\n    â””â”€â”€ +helpers.ts         âœ… OK\n```\n\n**ç†ç”±ï¼š** ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã® `+` ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ«ãƒ¼ãƒˆæ§‹é€ ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€‚\n\n## ãƒ¢ãƒãƒ¬ãƒå¯¾å¿œ\n\n### è¤‡æ•°ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ãƒ«ãƒ¼ãƒˆã‚’ãƒã‚¦ãƒ³ãƒˆ\n\n```typescript\n// app/routes.ts\nimport { autoRoutes } from 'react-router-auto-routes'\n\nexport default autoRoutes({\n  routesDir: {\n    '/': 'app/routes',              // ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª\n    '/api': 'api/routes',            // API\n    '/docs': 'packages/docs/routes', // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\n    '/shop': 'packages/shop/routes', // ã‚·ãƒ§ãƒƒãƒ—\n  },\n})\n```\n\n### å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç‹¬ç«‹æ€§\n\nå„ãƒã‚¦ãƒ³ãƒˆã¯ç‹¬ç«‹ã—ã¦ãƒ«ãƒ¼ãƒˆè§£æ±ºã•ã‚Œã¾ã™ãŒã€æœ€çµ‚çš„ã«ã¯çµ±åˆã•ã‚Œã¾ã™ã€‚\n\n```\napp/routes/\nâ””â”€â”€ index.tsx               â†’ /\n\napi/routes/\nâ”œâ”€â”€ users/\nâ”‚   â””â”€â”€ index.ts            â†’ /api/users\nâ””â”€â”€ products/\n    â””â”€â”€ index.ts            â†’ /api/products\n\npackages/docs/routes/\nâ”œâ”€â”€ index.tsx               â†’ /docs\nâ””â”€â”€ getting-started.tsx     â†’ /docs/getting-started\n\npackages/shop/routes/\nâ”œâ”€â”€ index.tsx               â†’ /shop\nâ””â”€â”€ products/\n    â””â”€â”€ $id.tsx             â†’ /shop/products/:id\n```\n\n## é‡è¦ãªç§»è¡Œä¸Šã®ç•™æ„ç‚¹\n\n### ãƒã‚¹ãƒ†ã‚£ãƒ³ã‚° vs. ã‚·ãƒ–ãƒªãƒ³ã‚°\n\nReact Router v7 ã§ã¯ã€å…±é€šãƒ‘ã‚¹ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’æŒã¤ãƒ«ãƒ¼ãƒˆã¯**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒã‚¹ãƒˆã•ã‚Œã‚‹**ï¼ˆRemix ã¨ã¯ç•°ãªã‚‹ï¼‰ã€‚\n\n#### å•é¡Œã®ã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³\n\n```typescript\nroutes/\nâ”œâ”€â”€ users.$id.tsx           â†’ /users/:idï¼ˆè¦ªï¼‰\nâ””â”€â”€ users.$id.edit.tsx      â†’ /users/:id/editï¼ˆå­ã€users.$id ã®ä¸­ã«ãƒã‚¹ãƒˆï¼‰\n```\n\nã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ã€`users.$id.edit` ãŒ `users.$id` ã®å­ã¨ã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã€‚`users.$id` ã« `<Outlet />` ãŒãªã„å ´åˆã€`users.$id.edit` ã¯è¡¨ç¤ºã•ã‚Œãªã„ã€‚\n\n#### è§£æ±ºç­–ï¼šãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã§ã‚·ãƒ–ãƒªãƒ³ã‚°åŒ–\n\n```typescript\nroutes/users/$id/\nâ”œâ”€â”€ index.tsx               â†’ /users/:idï¼ˆç‹¬ç«‹ï¼‰\nâ””â”€â”€ edit.tsx                â†’ /users/:id/editï¼ˆç‹¬ç«‹ï¼‰\n```\n\nã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ã€ä¸¡æ–¹ã®ãƒ«ãƒ¼ãƒˆãŒåŒã˜éšå±¤ï¼ˆã‚·ãƒ–ãƒªãƒ³ã‚°ï¼‰ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ã€‚\n\n### ãƒã‚¹ãƒˆãŒå¿…è¦ãªå ´åˆ\n\nè¦ªãƒ«ãƒ¼ãƒˆã§å…±é€šãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€å­ãƒ«ãƒ¼ãƒˆã§æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹å ´åˆã¯ã€ãƒã‚¹ãƒˆã‚’æ´»ç”¨ã™ã‚‹ã€‚\n\n```typescript\nroutes/products/$id/\nâ”œâ”€â”€ route.tsx               â†’ /products/:idï¼ˆè¦ªã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰\nâ”œâ”€â”€ index.tsx               â†’ /products/:idï¼ˆè©³ç´°ï¼‰\nâ”œâ”€â”€ reviews.tsx             â†’ /products/:id/reviewsï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰\nâ””â”€â”€ specs.tsx               â†’ /products/:id/specsï¼ˆä»•æ§˜ï¼‰\n```\n\n```tsx\n// routes/products/$id/route.tsx\nexport async function loader({ params }: Route.LoaderArgs) {\n  const product = await getProduct(params.id)\n  return { product }\n}\n\nexport default function ProductLayout({ loaderData }: Route.ComponentProps) {\n  return (\n    <div>\n      <h1>{loaderData.product.name}</h1>\n      <nav>\n        <Link to=\".\">è©³ç´°</Link>\n        <Link to=\"reviews\">ãƒ¬ãƒ“ãƒ¥ãƒ¼</Link>\n        <Link to=\"specs\">ä»•æ§˜</Link>\n      </nav>\n      <Outlet />  {/* å­ãƒ«ãƒ¼ãƒˆãŒã“ã“ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° */}\n    </div>\n  )\n}\n\n// routes/products/$id/index.tsx\nexport default function ProductDetail() {\n  const { product } = useLoaderData()  // è¦ªã‹ã‚‰ç¶™æ‰¿\n  return <div>{product.description}</div>\n}\n```\n\n## å®Ÿè·µãƒ‘ã‚¿ãƒ¼ãƒ³\n\n### CMS/ã‚­ãƒ£ãƒƒãƒã‚ªãƒ¼ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³\n\nãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã¨ã‚­ãƒ£ãƒƒãƒã‚ªãƒ¼ãƒ«ã‚’åˆ†é›¢ã™ã‚‹ã€‚\n\n```typescript\nroutes/\nâ”œâ”€â”€ index.tsx               â†’ / ï¼ˆãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ï¼‰\nâ””â”€â”€ $.tsx                   â†’ /* ï¼ˆ404ã¾ãŸã¯CMSå‹•çš„ãƒšãƒ¼ã‚¸ï¼‰\n```\n\n**ç†ç”±ï¼š** React Router v7 ã§ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ« splatï¼ˆ`($)`ï¼‰ã§äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªå‹•ä½œãŒç”Ÿã˜ã‚‹ãŸã‚ã€‚\n\n```tsx\n// routes/index.tsx\nexport default function Home() {\n  return <h1>ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸</h1>\n}\n\n// routes/$.tsx\nexport async function loader({ params }: Route.LoaderArgs) {\n  const slug = params['*']\n  const page = await getCMSPage(slug)\n\n  if (!page) {\n    throw new Response(\"Not Found\", { status: 404 })\n  }\n\n  return { page }\n}\n\nexport default function CMSPage({ loaderData }: Route.ComponentProps) {\n  return (\n    <article>\n      <h1>{loaderData.page.title}</h1>\n      <div dangerouslySetInnerHTML={{ __html: loaderData.page.content }} />\n    </article>\n  )\n}\n```\n\n### èªè¨¼ãƒ«ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³\n\nèªè¨¼ãŒå¿…è¦ãªãƒ«ãƒ¼ãƒˆã¨ä¸è¦ãªãƒ«ãƒ¼ãƒˆã‚’åˆ†é›¢ã™ã‚‹ã€‚\n\n```typescript\nroutes/\nâ”œâ”€â”€ _public+/               # èªè¨¼ä¸è¦\nâ”‚   â”œâ”€â”€ index.tsx           â†’ /\nâ”‚   â”œâ”€â”€ login.tsx           â†’ /login\nâ”‚   â””â”€â”€ register.tsx        â†’ /register\nâ””â”€â”€ _auth+/                 # èªè¨¼å¿…é ˆ\n    â”œâ”€â”€ dashboard/\n    â”‚   â””â”€â”€ index.tsx       â†’ /dashboard\n    â””â”€â”€ settings/\n        â””â”€â”€ index.tsx       â†’ /settings\n```\n\n```tsx\n// routes/_auth+/route.tsxï¼ˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰\nexport async function loader({ request }: Route.LoaderArgs) {\n  const user = await requireAuth(request)\n  return { user }\n}\n\nexport default function AuthLayout({ loaderData }: Route.ComponentProps) {\n  return (\n    <div>\n      <header>\n        <p>ã‚ˆã†ã“ãã€{loaderData.user.name}ã•ã‚“</p>\n      </header>\n      <Outlet />\n    </div>\n  )\n}\n```\n\n### æ©Ÿèƒ½åˆ¥ãƒ«ãƒ¼ãƒˆæ§‹æˆ\n\næ©Ÿèƒ½å˜ä½ã§ãƒ«ãƒ¼ãƒˆã‚’æ•´ç†ã™ã‚‹ã€‚\n\n```typescript\nroutes/\nâ”œâ”€â”€ _buyer+/                # è³¼å…¥è€…å‘ã‘æ©Ÿèƒ½\nâ”‚   â”œâ”€â”€ products+/\nâ”‚   â”‚   â””â”€â”€ $id+/\nâ”‚   â”‚       â”œâ”€â”€ route.tsx\nâ”‚   â”‚       â””â”€â”€ +components/\nâ”‚   â””â”€â”€ orders+/\nâ”‚       â””â”€â”€ index.tsx\nâ”œâ”€â”€ _seller+/               # å‡ºå“è€…å‘ã‘æ©Ÿèƒ½\nâ”‚   â”œâ”€â”€ products+/\nâ”‚   â”‚   â””â”€â”€ $id+/\nâ”‚   â”‚       â”œâ”€â”€ route.tsx\nâ”‚   â”‚       â””â”€â”€ +components/\nâ”‚   â””â”€â”€ analytics+/\nâ”‚       â””â”€â”€ index.tsx\nâ””â”€â”€ _admin+/                # ç®¡ç†è€…å‘ã‘æ©Ÿèƒ½\n    â”œâ”€â”€ users+/\n    â”‚   â””â”€â”€ index.tsx\n    â””â”€â”€ settings+/\n        â””â”€â”€ index.tsx\n```\n\n### API ãƒ«ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³\n\nãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨APIã‚’åŒã˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç®¡ç†ã™ã‚‹ã€‚\n\n```typescript\nroutes/\nâ”œâ”€â”€ api/\nâ”‚   â”œâ”€â”€ users/\nâ”‚   â”‚   â”œâ”€â”€ index.ts        â†’ /api/users\nâ”‚   â”‚   â””â”€â”€ $id.ts          â†’ /api/users/:id\nâ”‚   â””â”€â”€ products/\nâ”‚       â”œâ”€â”€ index.ts        â†’ /api/products\nâ”‚       â””â”€â”€ $id.ts          â†’ /api/products/:id\nâ””â”€â”€ (ui)/\n    â”œâ”€â”€ index.tsx           â†’ /\n    â””â”€â”€ about.tsx           â†’ /about\n```\n\n```tsx\n// routes/api/users/index.ts\nexport async function loader() {\n  const users = await getUsers()\n  return Response.json({ users })\n}\n\nexport async function action({ request }: Route.ActionArgs) {\n  const data = await request.json()\n  const user = await createUser(data)\n  return Response.json({ user }, { status: 201 })\n}\n```\n\n### ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³\n\nãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã«ãƒ«ãƒ¼ãƒˆã‚’åˆ†é›¢ã™ã‚‹ã€‚\n\n```typescript\nroutes/\nâ”œâ”€â”€ $tenant/                # ãƒ†ãƒŠãƒ³ãƒˆå‹•çš„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ\nâ”‚   â”œâ”€â”€ index.tsx           â†’ /:tenant\nâ”‚   â”œâ”€â”€ dashboard/\nâ”‚   â”‚   â””â”€â”€ index.tsx       â†’ /:tenant/dashboard\nâ”‚   â””â”€â”€ settings/\nâ”‚       â””â”€â”€ index.tsx       â†’ /:tenant/settings\n```\n\n```tsx\n// routes/$tenant/route.tsxï¼ˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰\nexport async function loader({ params }: Route.LoaderArgs) {\n  const tenant = await getTenant(params.tenant)\n  if (!tenant) throw new Response(\"Not Found\", { status: 404 })\n  return { tenant }\n}\n\nexport default function TenantLayout({ loaderData }: Route.ComponentProps) {\n  return (\n    <div>\n      <header>\n        <h1>{loaderData.tenant.name}</h1>\n      </header>\n      <Outlet />\n    </div>\n  )\n}\n```\n\n## ã¾ã¨ã‚\n\nReact Router Auto Routes ã«ã‚ˆã‚Šï¼š\n\n1. **ã‚¼ãƒ­ã‚³ãƒ³ãƒ•ã‚£ã‚°** - ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ãŒãƒ«ãƒ¼ãƒˆå®šç¾©ã‚’è‡ªå‹•ç”Ÿæˆ\n2. **ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³** - `+` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã§é–¢é€£ã‚³ãƒ¼ãƒ‰ã‚’è¿‘ãã«é…ç½®\n3. **å‹å®‰å…¨** - TypeScript ã¨ã®çµ±åˆã§å‹æ¨è«–ãŒåŠ¹ã\n4. **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«** - ãƒ¢ãƒãƒ¬ãƒã‚„å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾å¿œ\n5. **æŸ”è»Ÿ** - ãƒã‚¹ãƒˆã€ã‚·ãƒ–ãƒªãƒ³ã‚°ã€ã‚­ãƒ£ãƒƒãƒã‚ªãƒ¼ãƒ«ãªã©å¤šæ§˜ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆ\n\nã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã«ã‚ˆã‚Šã€ã€Œè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã‹ãšã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‹ã‚‰è‡ªç„¶ã«ãƒ«ãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã€å¤‰æ›´å½±éŸ¿ç¯„å›²ãŒæ˜ç¢ºã€ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã‚’å®Ÿç¾ã§ãã‚‹ã€‚\n",
        "plugins/kazuph-dotfiles/skills/react-router-v7-mastery/references/cohesion-patterns.md": "# å‡é›†ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°ã‚¬ã‚¤ãƒ‰\n\n## ç›®æ¬¡\n\n1. [å‡é›†åº¦ã®æ¦‚å¿µ](#å‡é›†åº¦ã®æ¦‚å¿µ)\n2. [å‡é›†åº¦ã®æ®µéšçš„åˆ†é¡](#å‡é›†åº¦ã®æ®µéšçš„åˆ†é¡)\n3. [æ©Ÿèƒ½çš„å‡é›†ã®å®Ÿç¾æ–¹æ³•](#æ©Ÿèƒ½çš„å‡é›†ã®å®Ÿç¾æ–¹æ³•)\n4. [å®Ÿè·µçš„ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ä¾‹](#å®Ÿè·µçš„ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ä¾‹)\n5. [ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã¨è§£æ±ºç­–](#ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã¨è§£æ±ºç­–)\n\n## å‡é›†åº¦ã®æ¦‚å¿µ\n\n**å‡é›†åº¦ï¼ˆCohesionï¼‰** ã¯ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å†…ã®è¦ç´ ãŒã©ã‚Œã ã‘å¯†æ¥ã«é–¢é€£ã—ã¦ã„ã‚‹ã‹ã‚’ç¤ºã™æŒ‡æ¨™ã€‚1970å¹´ä»£ã«ç¢ºç«‹ã•ã‚ŒãŸæ¦‚å¿µã ãŒã€ç¾ä»£ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã§ã‚‚å¤‰æ›´è€æ€§ã¨ä¿å®ˆæ€§ã®å‘ä¸Šã«ç›´çµã™ã‚‹ã€‚\n\n### åˆ¤æ–­åŸºæº–\n\nã€Œã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä½•ã‚’ã™ã‚‹ã‚‚ã®ã§ã™ã‹ï¼Ÿã€ã¨å•ã„ã‹ã‘ã¦ã€**ä¸€æ–‡ã§ç­”ãˆã‚‰ã‚Œã‚‹ã‹ã©ã†ã‹**ãŒå‡é›†åº¦ã®åˆ¤æ–­åŸºæº–ã€‚\n\n- **ç­”ãˆã‚„ã™ã„** â†’ å‡é›†åº¦ãŒé«˜ã„ï¼ˆè‰¯ã„è¨­è¨ˆï¼‰\n- **ç­”ãˆã«ãã„** â†’ å‡é›†åº¦ãŒä½ã„ï¼ˆæ”¹å–„ã®ä½™åœ°ã‚ã‚Šï¼‰\n\n## å‡é›†åº¦ã®æ®µéšçš„åˆ†é¡\n\nä½ã„é †ã«4æ®µéšã§åˆ†é¡ï¼š\n\n### 1. å¶ç™ºçš„å‡é›†ï¼ˆCoincidental Cohesionï¼‰\n\n**ç‰¹å¾´ï¼š** é–¢é€£æ€§ã®ãªã„ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãŒãŸã¾ãŸã¾åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã«å­˜åœ¨ã™ã‚‹çŠ¶æ…‹ã€‚ã€Œã“ã“ã«ç½®ã„ã¨ãã‹ã€å‹ã€‚\n\n**å•é¡Œç‚¹ï¼š**\n- ãƒ•ã‚¡ã‚¤ãƒ«ã®ç›®çš„ãŒä¸æ˜ç¢º\n- å¤‰æ›´ã®å½±éŸ¿ç¯„å›²ãŒäºˆæ¸¬å›°é›£\n- ãƒ†ã‚¹ãƒˆãŒå›°é›£\n\n**ä¾‹ï¼š**\n\n```tsx\n// app/routes/profile+/edit+/route.tsx\n// æ”¹å–„å‰ï¼šãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ãƒšãƒ¼ã‚¸ã«æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°ãŒæ··åœ¨\nexport const formatDate = (d: Date) => d.toLocaleDateString(\"ja-JP\")\nexport const slugify = (s: string) => s.toLowerCase().replace(/\\s+/g, \"-\")\nexport const calculateAge = (birthDate: Date) => {\n  const today = new Date()\n  return today.getFullYear() - birthDate.getFullYear()\n}\n\nexport async function loader({ params }: Route.LoaderArgs) {\n  const profile = await getProfile(params.userId)\n  return { profile }\n}\n\nexport default function ProfileEdit({ loaderData }: Route.ComponentProps) {\n  return <ProfileForm profile={loaderData.profile} />\n}\n```\n\n**æ”¹å–„å¾Œï¼š**\n\n```tsx\n// utils/format.ts ã«ç§»å‹•\nexport const formatDate = (d: Date) => d.toLocaleDateString(\"ja-JP\")\nexport const slugify = (s: string) => s.toLowerCase().replace(/\\s+/g, \"-\")\nexport const calculateAge = (birthDate: Date) => {\n  const today = new Date()\n  return today.getFullYear() - birthDate.getFullYear()\n}\n\n// app/routes/profile+/edit+/route.tsx\nimport { formatDate, calculateAge } from '~/utils/format'\n\nexport async function loader({ params }: Route.LoaderArgs) {\n  const profile = await getProfile(params.userId)\n  return { profile }\n}\n\nexport default function ProfileEdit({ loaderData }: Route.ComponentProps) {\n  return <ProfileForm profile={loaderData.profile} />\n}\n```\n\n### 2. æ™‚é–“çš„å‡é›†ï¼ˆTemporal Cohesionï¼‰\n\n**ç‰¹å¾´ï¼š** åŒã˜ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã‚Œã‚‹ãŒç›®çš„ãŒç•°ãªã‚‹å‡¦ç†ãŒæ··åœ¨ã€‚ã€ŒåŒæ™‚ã«ã‚„ã‚‹ã‹ã‚‰ã€å‹ã€‚\n\n**å•é¡Œç‚¹ï¼š**\n- è²¬å‹™ã®å¢ƒç•ŒãŒä¸æ˜ç¢º\n- ä¸€éƒ¨ã®å‡¦ç†ã ã‘å†åˆ©ç”¨ã§ããªã„\n- ãƒ†ã‚¹ãƒˆæ™‚ã«ç„¡é–¢ä¿‚ãªå‡¦ç†ã‚‚ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒå¿…è¦\n\n**ä¾‹ï¼š**\n\n```tsx\n// æ”¹å–„å‰ï¼šãƒšãƒ¼ã‚¸è¡¨ç¤ºæ™‚ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ã¨ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹é€ä¿¡ãŒæ··åœ¨\nexport async function loader({ params }: Route.LoaderArgs) {\n  // ãƒ‡ãƒ¼ã‚¿å–å¾—\n  const profile = await fetch(`/api/profile/${params.userId}`).then(r => r.json())\n\n  // ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹é€ä¿¡ï¼ˆç›®çš„ãŒç•°ãªã‚‹ï¼‰\n  await fetch(\"/api/analytics\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      event: \"profile_view\",\n      userId: params.userId,\n      timestamp: new Date().toISOString()\n    }),\n  })\n\n  // è¨ªå•è€…æ•°ã‚«ã‚¦ãƒ³ãƒˆï¼ˆã“ã‚Œã‚‚ç›®çš„ãŒç•°ãªã‚‹ï¼‰\n  await fetch(`/api/profile/${params.userId}/increment-view`, {\n    method: \"POST\",\n  })\n\n  return { profile }\n}\n```\n\n**æ”¹å–„å¾Œï¼š**\n\n```tsx\n// app/routes/profile+/$userId+/route.tsx\nexport async function loader({ params }: Route.LoaderArgs) {\n  // ãƒ‡ãƒ¼ã‚¿å–å¾—ã®ã¿ã«é›†ä¸­\n  const profile = await getProfile(params.userId)\n  return { profile }\n}\n\n// ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã¯è¦ªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¾ãŸã¯ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ç®¡ç†\n// app/routes/profile+/route.tsx\nexport default function ProfileLayout() {\n  const location = useLocation()\n\n  useEffect(() => {\n    // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹é€ä¿¡\n    trackPageView(location.pathname)\n  }, [location])\n\n  return <Outlet />\n}\n```\n\n### 3. æ‰‹ç¶šãçš„å‡é›†ï¼ˆProcedural Cohesionï¼‰\n\n**ç‰¹å¾´ï¼š** è¤‡æ•°ã®ç›®çš„ã‚’æŒã¤å‡¦ç†ãŒé †åºã§é€£é–ã—ã¦ã„ã‚‹çŠ¶æ…‹ã€‚ã€Œä¸€é€£ã®æµã‚Œã ã‹ã‚‰ã€å‹ã€‚\n\n**å•é¡Œç‚¹ï¼š**\n- ä¸€ã¤ã®é–¢æ•°ãŒè¤‡æ•°ã®è²¬å‹™ã‚’æŒã¤\n- éƒ¨åˆ†çš„ãªå†åˆ©ç”¨ãŒå›°é›£\n- ãƒ†ã‚¹ãƒˆãŒè¤‡é›‘ã«ãªã‚‹\n\n**ä¾‹ï¼š**\n\n```tsx\n// æ”¹å–„å‰ï¼šãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³â†’ä¿å­˜â†’ç›£æŸ»ãƒ­ã‚°â†’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ãŒåŒã˜actionã«è©°ã‚è¾¼ã¾ã‚Œã‚‹\nexport async function action({ request, params }: Route.ActionArgs) {\n  const form = await request.formData()\n  const name = form.get(\"name\") as string\n  const email = form.get(\"email\") as string\n\n  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n  if (!name.trim()) {\n    return { error: \"åå‰ã¯å¿…é ˆã§ã™\" }\n  }\n  if (!email.includes(\"@\")) {\n    return { error: \"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒä¸æ­£ã§ã™\" }\n  }\n\n  // ä¿å­˜\n  const response = await fetch(`/api/profile/${params.userId}`, {\n    method: \"PUT\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ name, email }),\n  })\n\n  if (!response.ok) {\n    return { error: \"ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ\" }\n  }\n\n  // ç›£æŸ»ãƒ­ã‚°\n  await fetch(\"/api/audit\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      action: \"profile_update\",\n      userId: params.userId,\n      timestamp: new Date().toISOString(),\n    }),\n  })\n\n  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢\n  await fetch(\"/api/cache/clear\", {\n    method: \"POST\",\n    body: JSON.stringify({ key: `profile:${params.userId}` }),\n  })\n\n  return redirect(`/profile/${params.userId}`)\n}\n```\n\n**æ”¹å–„å¾Œï¼š**\n\n```tsx\n// features/profile/validation.ts\nexport function validateProfile(name: string, email: string) {\n  if (!name.trim()) return { error: \"åå‰ã¯å¿…é ˆã§ã™\" }\n  if (!email.includes(\"@\")) return { error: \"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒä¸æ­£ã§ã™\" }\n  return null\n}\n\n// features/profile/mutations.ts\nexport async function updateProfile(userId: string, data: { name: string; email: string }) {\n  const response = await fetch(`/api/profile/${userId}`, {\n    method: \"PUT\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(data),\n  })\n\n  if (!response.ok) {\n    throw new Error(\"ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ\")\n  }\n\n  return response.json()\n}\n\n// app/routes/profile+/$userId+/edit+/route.tsx\nimport { validateProfile } from '~/features/profile/validation'\nimport { updateProfile } from '~/features/profile/mutations'\n\nexport async function action({ request, params }: Route.ActionArgs) {\n  const form = await request.formData()\n  const name = form.get(\"name\") as string\n  const email = form.get(\"email\") as string\n\n  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n  const error = validateProfile(name, email)\n  if (error) return error\n\n  // ä¿å­˜ï¼ˆç›£æŸ»ãƒ­ã‚°ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ã¯APIã‚µãƒ¼ãƒãƒ¼å´ã§å‡¦ç†ï¼‰\n  try {\n    await updateProfile(params.userId, { name, email })\n  } catch (e) {\n    return { error: e.message }\n  }\n\n  return redirect(`/profile/${params.userId}`)\n}\n```\n\n### 4. æ©Ÿèƒ½çš„å‡é›†ï¼ˆFunctional Cohesionï¼‰\n\n**ç‰¹å¾´ï¼š** å˜ä¸€ã®æ˜ç¢ºãªå½¹å‰²ã«é›†ä¸­ã—ã¦ã„ã‚‹ç†æƒ³çš„ãªçŠ¶æ…‹ã€‚ã€Œã“ã‚Œã ã‘ã‚„ã‚‹ã€å‹ã€‚\n\n**åˆ©ç‚¹ï¼š**\n- è²¬å‹™ãŒæ˜ç¢º\n- å†åˆ©ç”¨ã—ã‚„ã™ã„\n- ãƒ†ã‚¹ãƒˆãŒå®¹æ˜“\n- å¤‰æ›´ã®å½±éŸ¿ç¯„å›²ãŒé™å®šçš„\n\n**ä¾‹ï¼š**\n\n```tsx\n// app/routes/products+/$productId+/reviews+/route.tsx\n// ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã®ã¿ã«é›†ä¸­\nexport async function loader({ params }: Route.LoaderArgs) {\n  const reviews = await getProductReviews(params.productId)\n  return { reviews }\n}\n\nexport default function ProductReviews({ loaderData }: Route.ComponentProps) {\n  return (\n    <div>\n      <h2>ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>\n      {loaderData.reviews.map(review => (\n        <ReviewCard key={review.id} review={review} />\n      ))}\n    </div>\n  )\n}\n\n// app/routes/products+/$productId+/reviews+/new+/route.tsx\n// ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿ã®ã¿ã«é›†ä¸­\nexport async function action({ request, params }: Route.ActionArgs) {\n  const form = await request.formData()\n  const rating = Number(form.get(\"rating\"))\n  const comment = form.get(\"comment\") as string\n\n  await createReview(params.productId, { rating, comment })\n  return redirect(`/products/${params.productId}/reviews`)\n}\n\nexport default function NewReview() {\n  return <ReviewForm />\n}\n```\n\n## æ©Ÿèƒ½çš„å‡é›†ã®å®Ÿç¾æ–¹æ³•\n\n### ãƒ­ãƒ¼ãƒ«åˆ¥ãƒ«ãƒ¼ãƒˆåˆ†é›¢\n\nåŒã˜ãƒªã‚½ãƒ¼ã‚¹ã§ã‚‚ãƒ­ãƒ¼ãƒ«ã«ã‚ˆã£ã¦è²¬å‹™ãŒç•°ãªã‚‹å ´åˆã¯ã€ãƒ«ãƒ¼ãƒˆã‚’åˆ†é›¢ã™ã‚‹ã€‚\n\n```tsx\n// è³¼å…¥è€…å‘ã‘: app/routes/_buyer+/products+/$productId+/route.tsx\nexport async function loader({ params }: Route.LoaderArgs) {\n  return {\n    product: await getProductForBuyer(params.productId),\n    purchaseHistory: await getPurchaseHistory(params.productId),\n  }\n}\n\nexport default function BuyerProductPage({ loaderData }: Route.ComponentProps) {\n  return (\n    <div>\n      <ProductInfo product={loaderData.product} />\n      <PurchaseButton />\n      <PurchaseHistory history={loaderData.purchaseHistory} />\n      <ReviewSection />\n    </div>\n  )\n}\n\n// å‡ºå“è€…å‘ã‘: app/routes/_seller+/products+/$productId+/route.tsx\nexport async function loader({ params }: Route.LoaderArgs) {\n  return {\n    product: await getProductForSeller(params.productId),\n    salesAnalytics: await getSalesAnalytics(params.productId),\n    inventory: await getInventory(params.productId),\n  }\n}\n\nexport async function action({ request, params }: Route.ActionArgs) {\n  const form = await request.formData()\n  await updateStock(params.productId, form)\n  return redirect('.')\n}\n\nexport default function SellerProductPage({ loaderData }: Route.ComponentProps) {\n  return (\n    <div>\n      <ProductInfo product={loaderData.product} />\n      <StockManagement inventory={loaderData.inventory} />\n      <SalesAnalytics data={loaderData.salesAnalytics} />\n      <OrderManagement />\n    </div>\n  )\n}\n```\n\n**åˆ©ç‚¹ï¼š**\n- è³¼å…¥è€…å‘ã‘æ©Ÿèƒ½ä¿®æ­£ãŒå‡ºå“è€…æ©Ÿèƒ½ã«å½±éŸ¿ã—ãªã„\n- å„ãƒ­ãƒ¼ãƒ«ã«å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã ã‘ã‚’å–å¾—\n- action ã®æœ‰ç„¡ãªã©ã€è²¬å‹™ã®é•ã„ãŒæ˜ç¢º\n\n### ä½œæˆãƒ»ç·¨é›†ãƒ«ãƒ¼ãƒˆã®åˆ†é›¢\n\nåŒã˜ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚‚ã€ãƒ«ãƒ¼ãƒˆã¯åˆ†ã‘ã‚‹ã€‚\n\n```\napp/routes/products+/\nâ”œâ”€â”€ _shared/components/product-form.tsx  # ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆå…±é€šï¼‰\nâ”œâ”€â”€ new+/route.tsx                        # ä½œæˆç”¨ï¼ˆloaderãªã—ã€actionã®ã¿ï¼‰\nâ””â”€â”€ $productId+/edit+/route.tsx           # ç·¨é›†ç”¨ï¼ˆloader + actionï¼‰\n```\n\n```tsx\n// app/routes/products+/new+/route.tsx\nexport async function action({ request }: Route.ActionArgs) {\n  const form = await request.formData()\n  const product = await createProduct(form)\n  return redirect(`/products/${product.id}`)\n}\n\nexport default function NewProduct() {\n  return <ProductForm mode=\"create\" />\n}\n\n// app/routes/products+/$productId+/edit+/route.tsx\nexport async function loader({ params }: Route.LoaderArgs) {\n  const product = await getProduct(params.productId)\n  return { product }\n}\n\nexport async function action({ request, params }: Route.ActionArgs) {\n  const form = await request.formData()\n  await updateProduct(params.productId, form)\n  return redirect(`/products/${params.productId}`)\n}\n\nexport default function EditProduct({ loaderData }: Route.ComponentProps) {\n  return <ProductForm mode=\"edit\" defaultValues={loaderData.product} />\n}\n```\n\n## å®Ÿè·µçš„ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ä¾‹\n\n### Before: è«–ç†çš„å‡é›†ï¼ˆæ¡ä»¶åˆ†å²ãŒæ•£ä¹±ï¼‰\n\n```tsx\n// app/routes/products+/$productId+/route.tsx\nfunction ProductDetailPage({ role }: { role: \"buyer\" | \"seller\" | \"admin\" }) {\n  const { product } = useLoaderData<typeof loader>()\n\n  return (\n    <div>\n      <h1>{product.name}</h1>\n\n      {role === \"buyer\" && (\n        <>\n          <PurchaseButton productId={product.id} />\n          <ReviewSection productId={product.id} />\n        </>\n      )}\n\n      {role === \"seller\" && (\n        <>\n          <EditButton productId={product.id} />\n          <StockManagement productId={product.id} />\n        </>\n      )}\n\n      {role === \"admin\" && (\n        <>\n          <DeleteButton productId={product.id} />\n          <AuditLog productId={product.id} />\n        </>\n      )}\n    </div>\n  )\n}\n```\n\n**å•é¡Œç‚¹ï¼š**\n- è³¼å…¥è€…å‘ã‘æ©Ÿèƒ½ä¿®æ­£ãŒå‡ºå“è€…æ©Ÿèƒ½ã«å½±éŸ¿ã™ã‚‹å¯èƒ½æ€§\n- æ¡ä»¶åˆ†å²ãŒæ•£ä¹±ã—ã€ã‚³ãƒ¼ãƒ‰ãŒè¤‡é›‘\n- ãƒ†ã‚¹ãƒˆãŒå›°é›£ï¼ˆå…¨ãƒ­ãƒ¼ãƒ«ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹å¿…è¦ï¼‰\n\n### After: æ©Ÿèƒ½çš„å‡é›†ï¼ˆãƒ­ãƒ¼ãƒ«åˆ¥åˆ†é›¢ï¼‰\n\n```tsx\n// app/routes/_buyer+/products+/$productId+/route.tsx\nexport async function loader({ params }: Route.LoaderArgs) {\n  return { product: await getProductForBuyer(params.productId) }\n}\n\nexport default function BuyerProductPage({ loaderData }: Route.ComponentProps) {\n  return (\n    <div>\n      <h1>{loaderData.product.name}</h1>\n      <PurchaseButton productId={loaderData.product.id} />\n      <ReviewSection productId={loaderData.product.id} />\n    </div>\n  )\n}\n\n// app/routes/_seller+/products+/$productId+/route.tsx\nexport async function loader({ params }: Route.LoaderArgs) {\n  return { product: await getProductForSeller(params.productId) }\n}\n\nexport default function SellerProductPage({ loaderData }: Route.ComponentProps) {\n  return (\n    <div>\n      <h1>{loaderData.product.name}</h1>\n      <EditButton productId={loaderData.product.id} />\n      <StockManagement productId={loaderData.product.id} />\n    </div>\n  )\n}\n\n// app/routes/_admin+/products+/$productId+/route.tsx\nexport async function loader({ params }: Route.LoaderArgs) {\n  return { product: await getProductForAdmin(params.productId) }\n}\n\nexport default function AdminProductPage({ loaderData }: Route.ComponentProps) {\n  return (\n    <div>\n      <h1>{loaderData.product.name}</h1>\n      <DeleteButton productId={loaderData.product.id} />\n      <AuditLog productId={loaderData.product.id} />\n    </div>\n  )\n}\n```\n\n**æ”¹å–„ç‚¹ï¼š**\n- å„ãƒ­ãƒ¼ãƒ«ã®æ©Ÿèƒ½ãŒå®Œå…¨ã«åˆ†é›¢\n- æ¡ä»¶åˆ†å²ãŒã‚¼ãƒ­\n- å¤‰æ›´ã®å½±éŸ¿ç¯„å›²ãŒæ˜ç¢º\n- ãƒ†ã‚¹ãƒˆãŒå®¹æ˜“ï¼ˆå„ãƒ­ãƒ¼ãƒ«ç‹¬ç«‹ã—ã¦ãƒ†ã‚¹ãƒˆå¯èƒ½ï¼‰\n\n## ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³ã¨è§£æ±ºç­–\n\n### ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³1: ç¥ãƒ«ãƒ¼ãƒˆï¼ˆGod Routeï¼‰\n\nä¸€ã¤ã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«å…¨ã¦ã®æ©Ÿèƒ½ã‚’è©°ã‚è¾¼ã‚€ã€‚\n\n```tsx\n// app/routes/dashboard+/route.tsx (1000è¡Œä»¥ä¸Š)\nexport async function loader() {\n  // 20å€‹ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‹ã‚‰å–å¾—\n  const [users, products, orders, analytics, ...] = await Promise.all([...])\n  return { users, products, orders, analytics, ... }\n}\n\nexport async function action() {\n  // 10å€‹ä»¥ä¸Šã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‡¦ç†\n  switch (action) {\n    case \"update-user\": ...\n    case \"delete-product\": ...\n    // ...\n  }\n}\n\nexport default function Dashboard() {\n  // è¤‡é›‘ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯\n}\n```\n\n**è§£æ±ºç­–ï¼š** ãƒã‚¹ãƒˆãƒ«ãƒ¼ãƒˆã§è²¬å‹™ã‚’åˆ†å‰²ã™ã‚‹ã€‚\n\n```\napp/routes/dashboard+/\nâ”œâ”€â”€ route.tsx                  # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ã¿\nâ”œâ”€â”€ index.tsx                  # æ¦‚è¦è¡¨ç¤º\nâ”œâ”€â”€ users+/route.tsx           # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†\nâ”œâ”€â”€ products+/route.tsx        # å•†å“ç®¡ç†\nâ””â”€â”€ analytics+/route.tsx       # åˆ†æ\n```\n\n### ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³2: æ—©ã™ãã‚‹å…±é€šåŒ–\n\n2ã¤ã®ãƒ«ãƒ¼ãƒˆã§ä¼¼ãŸã‚³ãƒ¼ãƒ‰ãŒã‚ã‚‹ã‹ã‚‰ã¨ã„ã£ã¦ã€ã™ãã«å…±é€šåŒ–ã™ã‚‹ã€‚\n\n```tsx\n// app/components/user-list.tsx\nexport function UserList({ mode }: { mode: \"admin\" | \"buyer\" }) {\n  if (mode === \"admin\") {\n    // ç®¡ç†è€…å‘ã‘ãƒ­ã‚¸ãƒƒã‚¯\n  } else {\n    // è³¼å…¥è€…å‘ã‘ãƒ­ã‚¸ãƒƒã‚¯\n  }\n}\n```\n\n**è§£æ±ºç­–ï¼š** 3å›ä½¿ã‚ã‚Œã‚‹ã¾ã§å¾…ã¤ã€‚\n\n```tsx\n// app/routes/_admin+/users+/route.tsx\nexport default function AdminUserList() {\n  // ç®¡ç†è€…å‘ã‘ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿\n}\n\n// app/routes/_buyer+/users+/route.tsx\nexport default function BuyerUserList() {\n  // è³¼å…¥è€…å‘ã‘ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿\n}\n```\n\n### ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³3: æ¡ä»¶åˆ†å²ã®é€£é–\n\nå‹å®‰å…¨æ€§ãŒãªãã€æ–°ã—ã„ã‚±ãƒ¼ã‚¹è¿½åŠ æ™‚ã«æ¼ã‚ŒãŒç™ºç”Ÿã—ã‚„ã™ã„ã€‚\n\n```tsx\nfunction NotificationItem({ notification }: { notification: any }) {\n  if (notification.type === \"order\") {\n    return <OrderNotification {...notification} />\n  } else if (notification.type === \"review\") {\n    return <ReviewNotification {...notification} />\n  } else if (notification.type === \"stock\") {\n    return <StockNotification {...notification} />\n  }\n  // æ–°ã—ã„ã‚¿ã‚¤ãƒ—è¿½åŠ æ™‚ã«æ¼ã‚Œã‚‹å¯èƒ½æ€§\n}\n```\n\n**è§£æ±ºç­–ï¼š** ts-pattern ã§å‹å®‰å…¨ã«ã€‚\n\n```tsx\nimport { match } from \"ts-pattern\"\n\ntype Notification =\n  | { type: \"order\"; orderId: string }\n  | { type: \"review\"; reviewId: string }\n  | { type: \"stock\"; productId: string }\n\nfunction NotificationItem({ notification }: { notification: Notification }) {\n  return match(notification)\n    .with({ type: \"order\" }, (n) => <OrderNotification orderId={n.orderId} />)\n    .with({ type: \"review\" }, (n) => <ReviewNotification reviewId={n.reviewId} />)\n    .with({ type: \"stock\" }, (n) => <StockNotification productId={n.productId} />)\n    .exhaustive()  // æ–°ã—ã„ã‚¿ã‚¤ãƒ—è¿½åŠ æ™‚ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼\n}\n```\n\n## ã¾ã¨ã‚\n\næ©Ÿèƒ½çš„å‡é›†ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®åŸå‰‡ï¼š\n\n1. **å˜ä¸€è²¬ä»»ã®åŸå‰‡** - ä¸€ã¤ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ä¸€ã¤ã®ã“ã¨ã ã‘ã‚’ã™ã‚‹\n2. **ãƒ­ãƒ¼ãƒ«åˆ¥åˆ†é›¢** - åŒã˜ãƒªã‚½ãƒ¼ã‚¹ã§ã‚‚ãƒ­ãƒ¼ãƒ«ã«ã‚ˆã£ã¦è²¬å‹™ãŒç•°ãªã‚‹å ´åˆã¯åˆ†é›¢\n3. **ä½œæˆãƒ»ç·¨é›†ã®åˆ†é›¢** - åŒã˜ãƒ•ã‚©ãƒ¼ãƒ ã§ã‚‚ãƒ«ãƒ¼ãƒˆã¯åˆ†ã‘ã‚‹\n4. **å…±é€šåŒ–ã¯æ…é‡ã«** - 3å›ä½¿ã‚ã‚Œã‚‹ã¾ã§å¾…ã¤\n5. **å‹å®‰å…¨ãªãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°** - æ¡ä»¶åˆ†å²ã‚ˆã‚Š ts-pattern ã‚’ä½¿ã†\n\nã“ã‚Œã‚‰ã®åŸå‰‡ã«ã‚ˆã‚Šã€ã€Œå¤‰æ›´ã®å½±éŸ¿ç¯„å›²ãŒæ˜ç¢ºã§ã€ãƒ†ã‚¹ãƒˆãŒå®¹æ˜“ã§ã€é•·æœŸçš„ã«ä¿å®ˆã—ã‚„ã™ã„ã€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã‚’å®Ÿç¾ã§ãã‚‹ã€‚\n",
        "plugins/kazuph-dotfiles/skills/react-router-v7-mastery/references/with-hono.md": "# Hono + React Router v7 Integration Guide\n\nReact Router v7 (æ—§ Remix) ã¨ Hono ã‚’çµ„ã¿åˆã‚ã›ã€Cloudflare Workers ä¸Šã§å‹•ä½œã•ã›ã‚‹ãŸã‚ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚\n\n## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦\n\n### æ§‹æˆå›³\n\n```mermaid\ngraph TD\n    Request[Client Request] --> Hono[Hono App (server/index.ts)]\n    Hono -->|Path: /api/*| API[Hono API Routes (server/api.ts)]\n    Hono -->|Path: *| RR[React Router Handler]\n    \n    subgraph Hono Context\n        Env[Cloudflare Env]\n    end\n    \n    subgraph React Router Loader/Action\n        Client[API Client (app/lib/api.server.ts)]\n    end\n    \n    RR --> Client\n    Client -.->|Direct Call (app.request)| API\n    API --> Env\n```\n\n### æ ¸å¿ƒåŸå‰‡\n\n1.  **Server Entry Point**: Hono ã‚’ã‚µãƒ¼ãƒãƒ¼ã®å”¯ä¸€ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¨ã™ã‚‹ã€‚\n2.  **Logic Separation**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã¯ Hono API (`server/api.ts`) ã«é›†ç´„ã™ã‚‹ã€‚React Router ã¯ UI ã¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«å°‚å¿µã™ã‚‹ã€‚\n3.  **RPC over Network**: Loader/Action ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ã¯ã€`hono-typed-rest` ã‚’ç”¨ã„ãŸ RPC ãƒ‘ã‚¿ãƒ¼ãƒ³ã§è¡Œã†ã€‚Worker å†…éƒ¨ã§ã¯ `app.request` ã‚’æ³¨å…¥ã—ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚’å›é¿ã™ã‚‹ã€‚\n\n## å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—\n\n### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ \n\n```\napp/\n  â”œâ”€â”€ lib/\n  â”‚   â””â”€â”€ api.server.ts # ã‚µãƒ¼ãƒãƒ¼å†…éƒ¨é€šä¿¡ç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ\nserver/\n  â”œâ”€â”€ index.ts          # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ\n  â”œâ”€â”€ api.ts            # Hono API å®šç¾© (ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯)\n  â””â”€â”€ load-context.ts   # ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå®šç¾©\nvite.config.ts\nwrangler.toml\n```\n\n### 2. Hono API å®šç¾© (`server/api.ts`)\n\nãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¯ã“ã“ã«è¨˜è¿°ã—ã¾ã™ã€‚\n\n```typescript\nimport { Hono } from \"hono\";\nimport { drizzle } from \"drizzle-orm/d1\";\nimport { todos } from \"../app/db/schema\";\nimport type { Env } from \"./load-context\";\n\nconst app = new Hono<{ Bindings: Env }>()\n  .get(\"/todos\", async (c) => {\n    const db = drizzle(c.env.DB);\n    const result = await db.select().from(todos);\n    return c.json({ todos: result });\n  })\n  // ... other routes\nexport default app;\n```\n\n### 3. ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ (`server/index.ts`)\n\né™çš„ã‚¢ã‚»ãƒƒãƒˆé…ä¿¡ã¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®çµ±åˆã‚’è¡Œã„ã¾ã™ã€‚\n\n```typescript\nimport { Hono } from \"hono\";\nimport { createRequestHandler } from \"react-router\";\n// @ts-ignore\nimport * as build from \"../build/server/index.js\";\nimport { getLoadContext, type Env } from \"./load-context\";\nimport apiRoutes from \"./api\";\n\nconst app = new Hono<{ Bindings: Env }>();\n\n// é™çš„ã‚¢ã‚»ãƒƒãƒˆé…ä¿¡ (Workerså¿…é ˆ)\n// POSTç­‰ã®ãƒœãƒ‡ã‚£æ¶ˆè²»ã‚’é˜²ããŸã‚ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã†\napp.use(\"*\", async (c, next) => {\n  if (c.req.method !== 'GET' && c.req.method !== 'HEAD') {\n    return await next();\n  }\n  // @ts-ignore\n  if (c.env.ASSETS) {\n    // @ts-ignore\n    const res = await c.env.ASSETS.fetch(c.req.raw.clone());\n    if (res.status < 400) return res;\n  }\n  await next();\n});\n\n// API ãƒã‚¦ãƒ³ãƒˆ\nconst routes = app.route(\"/api\", apiRoutes);\nexport type AppType = typeof routes;\n\n// React Router ãƒãƒ³ãƒ‰ãƒ©\napp.all(\"*\", async (c) => {\n  const requestHandler = createRequestHandler(build);\n  const loadContext = getLoadContext({\n    request: c.req.raw,\n    context: {\n      cloudflare: {\n        env: c.env,\n        cf: c.req.raw.cf,\n        ctx: c.executionCtx,\n        caches: caches,\n      }\n    }\n  });\n  return await requestHandler(c.req.raw, loadContext);\n});\n\nexport default app;\n```\n\n### 4. å†…éƒ¨é€šä¿¡ç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (`app/lib/api.server.ts`)\n\nLoader/Action ã‹ã‚‰å‘¼ã³å‡ºã™ãŸã‚ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã™ã€‚`app.fetch` ã¾ãŸã¯ `app.request` ã‚’æ³¨å…¥ã—ã¾ã™ã€‚\n\n```typescript\nimport { createRestClient } from 'hono-typed-rest';\nimport app, { type AppType } from '../../server/index';\n\n// Env ã‚’å—ã‘å–ã£ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹ãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°\nexport const getServerClient = (env: any) => createRestClient<AppType>({\n  fetch: async (input, init) => {\n    // app.fetch ã« env ã‚’æ¸¡ã™ã“ã¨ã§ Bindings ã‚’åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹\n    if (input instanceof Request) {\n        return app.fetch(input, env);\n    }\n    return app.request(input.toString(), init, env);\n  },\n  baseUrl: 'http://localhost' \n});\n```\n\n### 5. Loader ã§ã®åˆ©ç”¨ (`app/routes/home.tsx`)\n\n```typescript\nimport { getServerClient } from \"../lib/api.server\";\n\nexport async function loader({ context }: Route.LoaderArgs) {\n  // ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ Env ã‚’å–å¾—ã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆ\n  const client = getServerClient(context.cloudflare.env);\n  \n  // å‹å®‰å…¨ãªå‘¼ã³å‡ºã—\n  const { todos } = await client.get(\"/api/todos\");\n  return { todos };\n}\n```\n\n## ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š\n\n### Viteè¨­å®š (`vite.config.ts`)\nWorkers ç’°å¢ƒå‘ã‘ã« `react-dom/server` ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¨­å®šã—ã¾ã™ã€‚\n\n```typescript\nexport default defineConfig({\n  resolve: {\n    alias: {\n      \"react-dom/server\": \"react-dom/server.edge\",\n    },\n  },\n  // ...\n});\n```\n\n### ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (`package.json`)\n`react-router build` ã®å¾Œã« `esbuild` ã§ `server/index.ts` ã‚’ãƒãƒ³ãƒ‰ãƒ«ã—ã¾ã™ã€‚\n\n```json\n\"scripts\": {\n  \"build\": \"react-router build && esbuild server/index.ts --bundle --platform=neutral --target=es2022 --format=esm --outfile=dist/worker.js --main-fields=module,main --conditions=worker --alias:react-dom/server=react-dom/server.edge\",\n  \"deploy\": \"wrangler deploy\"\n}\n```\n\n### Wranglerè¨­å®š (`wrangler.toml`)\n`main` ã«ã¯ãƒãƒ³ãƒ‰ãƒ«å¾Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¾ã™ã€‚\n\n```toml\nmain = \"./dist/worker.js\"\nassets = { binding = \"ASSETS\", directory = \"./build/client\" }\n```\n",
        "plugins/kazuph-dotfiles/skills/reporting-and-tmux/SKILL.md": "---\nname: reporting-and-tmux\ndescription: ã€ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ã«å¿…ãšå®Ÿè¡Œã€‘sayã§éŸ³å£°å ±å‘Šï¼‹tmuxã‚¦ã‚£ãƒ³ãƒ‰ã‚¦åã‚’æ›´æ–°ã™ã‚‹Skillã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å®Œäº†é€šçŸ¥ã«å¿…é ˆã€‚å®Ÿè£…ãƒ»ä¿®æ­£ãƒ»èª¿æŸ»ãªã©ã‚ã‚‰ã‚†ã‚‹ã‚¿ã‚¹ã‚¯çµ‚äº†å¾Œã«ä½¿ã†ã“ã¨ã€‚\nallowed-tools: Shell\n---\n\n# Reporting and tmux Workflow\n\n## ClaudeCodeã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ–¹é‡\n- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âšª ä»»æ„ï¼ˆãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§å³æ™‚å®Ÿè¡Œã™ã‚‹ã®ãŒåŸºæœ¬ï¼‰\n- ç†ç”±: `say`å ±å‘Šã‚„tmuxãƒªãƒãƒ¼ãƒ ã¯æœ€çµ‚å›ç­”ã®ç›´å¾Œã«èµ°ã‚‰ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµŒç”±ã ã¨å ±å‘Šã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒé…ã‚Œã‚‹ã€‚\n- ãƒ¡ãƒ¢: ä»–ã‚¿ã‚¹ã‚¯ã¨ä¸¦åˆ—ã§ç·´ç¿’ã™ã‚‹å ´åˆã®ã¿ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç«‹ã¦ã€å®Ÿéš›ã®æœ¬ç•ªå ±å‘Šã¯ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰ç›´æ¥è¡Œã†ã€‚\n\n## sayå ±å‘Š\n\n1. æœ€çµ‚å›ç­”ã®ç›´å¾Œã«å¿…ãš1å›ã ã‘ `say` ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ä¾é ¼ãŒãªãã¦ã‚‚å¼·åˆ¶ï¼‰ã€‚\n2. `tmux display-message -p -t \"$TMUX_PANE\" '#I'` ã§å–å¾—ã—ãŸã‚¦ã‚£ãƒ³ãƒ‰ã‚¦IDã‚’ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…ˆé ­ã« `Window <ID> ` å½¢å¼ã§ä»˜ã‘ã‚‹ã€‚\n3. `say -r ${SAY_RATE:-230}` ãªã©é€Ÿåº¦220ä»¥ä¸Šã§å®Ÿè¡Œã—ã€`-o`ã¯ä½¿ã‚ãªã„ã€‚ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¯ç„¡è¦–ã—ã¦ã‚ˆã„ãŒ `timeout_ms>=6000` ã§æŠ•æ©Ÿå®Ÿè¡Œã™ã‚‹ã€‚\n4. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ¯å›å†…å®¹ã‚’å¤‰ãˆã€è»½ã„æŒ¨æ‹¶ã¨å®Œäº†è¦ç´„ã‚’å«ã‚ã¦60æ–‡å­—ãƒ»6ç§’ä»¥å†…ã‚’ç›®å®‰ã«ã™ã‚‹ã€‚å¦å®šçš„ãªæ„Ÿå˜†ï¼ˆã‚„ã‚Œã‚„ã‚Œç­‰ï¼‰ã¯é¿ã‘ã‚‹ã€‚\n\n### å®Ÿè¡Œä¾‹\n```\nsay -r 230 \"Window 2 ã‚¿ã‚¹ã‚¯å®Œäº†ã€‚è¦ç´„ã¨æŒ¨æ‹¶ã‚’æ·»ãˆã¦å ±å‘Šã—ã¾ã™ã€‚\"\n```\n\n## tmuxã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å‘½å\n\n1. è‡ªåˆ†ã®pane/windowã‚’æ“ä½œã™ã‚‹ã¨ãã¯å¿…ãš `-t \"$TMUX_PANE\"` ã‚’ä»˜ã‘ã€`tmux display-message -p -t \"$TMUX_PANE\" '#D'` ã§å–å¾—ã—ãŸãƒšã‚¤ãƒ³ID(%)ã‚’ä¸€åº¦ã ã‘å–å¾—ã—ã¦ä½¿ã†ã€‚\n2. ä½œæ¥­å®Œäº†æ™‚ã«`~/.claude/skills/reporting-and-tmux/rename_tmux_window.sh \"èª¿æŸ»å®Œäº†ğŸ”\"`ã®ã‚ˆã†ã«ã€Œæ¼¢å­—+çµµæ–‡å­—ã€ã®çŸ­ã„è­˜åˆ¥å­ã‚’æ¸¡ã—ã¦å®Ÿè¡Œã™ã‚‹ã€‚\n3. ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒ1éšå±¤ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‚’å–å¾—ã—ã€`[<dir>] <ãƒ©ãƒ™ãƒ«>`å½¢å¼ã¸çµ±ä¸€ã™ã‚‹ã€‚\n4. è§’æ‹¬å¼§ã‚„åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¿½åŠ ã—ãªã„ã€‚æŒ‡ç¤ºã•ã‚ŒãŸæ¼¢å­—ï¼‹çµµæ–‡å­—ã®ã¿ã‚’æœ«å°¾ã«æ¸¡ã™ã€‚\n\n### å‹•ä½œç¢ºèªã‚³ãƒãƒ³ãƒ‰\n```\nbash ~/.claude/skills/reporting-and-tmux/rename_tmux_window.sh \"æ¤œè¨¼å®Œäº†âœ¨\"\n```\n\n## OSC 0æ›´æ–°\n\n1. ä½œæ¥­ä¸­ã«ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ›´æ–°ã—ãŸã„å ´åˆã®ã¿OSC 0ã‚’é€ä¿¡ã—ã€tmuxã®pane/windowåã¯è§¦ã‚‰ãªã„ã€‚\n2. ç©ºé€ä¿¡ã¯ç¦æ­¢ã€‚å¿…ãšå†…å®¹ä»˜ãã§é€ã‚‹ã€‚\n3. **æœ«å°¾ã«ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒåã‚’ `(branch-name)` å½¢å¼ã§ä»˜ã‘ã‚‹**ã€‚ãƒ–ãƒ©ãƒ³ãƒåã¯ `git rev-parse --abbrev-ref HEAD 2>/dev/null` ã§å–å¾—ã€‚\n4. ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ã‚‚å†…å®¹ä»˜ãã§é€ä¿¡ã—ã€ç©ºã‚¯ãƒªã‚¢ã‚’è¡Œã‚ãªã„ã€‚\n\n### OSC 0é€ä¿¡ä¾‹\n```bash\npane_tty=$(tmux display-message -p -t \"$TMUX_PANE\" '#{pane_tty}')\nbranch=$(git rev-parse --abbrev-ref HEAD 2>/dev/null || echo \"no-git\")\nprintf '\\033]0;â—† Codex: çŠ¶æ³ (%s)\\007' \"$branch\" > \"$pane_tty\"\n```\n\n### å®Œäº†æ™‚ã®ä¾‹\n```bash\nprintf '\\033]0;â—† Codex: å®Œäº†ã‚µãƒãƒª (%s)\\007' \"$branch\" > \"$pane_tty\"\n```\n\nä¸Šè¨˜æ‰‹é †ã‚’å®ˆã‚‹ã“ã¨ã§å ±å‘Šã¨ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç®¡ç†ã‚’è‡ªå‹•åŒ–ã—ã¤ã¤ã€CLAUDE.mdæœ¬æ–‡ã‚’æœ€å°åŒ–ã™ã‚‹ã€‚\n",
        "plugins/mcp-browser-tabs/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-browser-tabs\",\n  \"version\": \"0.5.0\",\n  \"description\": \"Chrome browser tabs info for Claude - Get information about open browser tabs\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-browser-tabs\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"mcp\", \"browser\", \"chrome\", \"tabs\"]\n}\n",
        "plugins/mcp-chrome-devtools/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-chrome-devtools\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Chrome DevTools integration for Claude - browser automation, screenshots, console logs\",\n  \"author\": {\n    \"name\": \"Google\",\n    \"url\": \"https://github.com/anthropics/anthropic-quickstarts\"\n  },\n  \"license\": \"Apache-2.0\",\n  \"keywords\": [\"chrome\", \"devtools\", \"browser\", \"automation\", \"mcp\", \"claude\"]\n}\n",
        "plugins/mcp-fetch/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-fetch\",\n  \"version\": \"0.5.0\",\n  \"description\": \"Web content fetching with image support for Claude - Fetch web pages with automatic image saving\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-fetch\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"mcp\", \"fetch\", \"web\", \"content\", \"image processing\", \"claude\", \"ai\"]\n}\n",
        "plugins/mcp-github-pera1/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-github-pera1\",\n  \"version\": \"0.5.0\",\n  \"description\": \"GitHub code extraction via Pera1 for Claude - Extract code from GitHub repos\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-github-pera1\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"github\", \"code\", \"mcp\", \"claude\", \"pera1\"]\n}\n",
        "plugins/mcp-gmail-gas/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-gmail-gas\",\n  \"version\": \"0.5.0\",\n  \"description\": \"Gmail integration via GAS for Claude - Access Gmail through Google Apps Script\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-gmail-gas\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"gmail\", \"mcp\", \"claude\", \"gas\"]\n}\n",
        "plugins/mcp-google-image-search/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-google-image-search\",\n  \"version\": \"0.5.0\",\n  \"description\": \"Google Image Search for Claude - Search images via Google Custom Search or SerpAPI\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-google-image-search\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"mcp\", \"model-context-protocol\", \"google-images\", \"image-search\", \"search-api\", \"claude\", \"ai\", \"serpapi\", \"custom-search\"]\n}\n",
        "plugins/mcp-limitless/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-limitless\",\n  \"version\": \"1.0.1\",\n  \"description\": \"Limitless Pendant lifelogs and audio access via official MCP API\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"limitless\", \"pendant\", \"lifelogs\", \"audio\", \"mcp\", \"claude\"]\n}\n",
        "plugins/mcp-linear/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-linear\",\n  \"version\": \"1.0.1\",\n  \"description\": \"Linear issue tracking integration via official MCP endpoint\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"linear\", \"issues\", \"project-management\", \"mcp\", \"claude\"]\n}\n",
        "plugins/mcp-obsidian/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-obsidian\",\n  \"version\": \"0.5.0\",\n  \"description\": \"Obsidian vault management for Claude - Search and read notes from Obsidian vaults\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-obsidian\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"obsidian\", \"mcp\", \"claude\", \"notes\", \"vault\"]\n}\n",
        "plugins/mcp-pera1-remote/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-pera1-remote\",\n  \"version\": \"1.0.0\",\n  \"description\": \"GitHub code extraction via Pera1 remote service - Cloudflare Workers based\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"github\", \"code\", \"mcp\", \"claude\", \"pera1\", \"remote\"]\n}\n",
        "plugins/mcp-playwright/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-playwright\",\n  \"version\": \"0.5.0\",\n  \"description\": \"Playwright browser automation for Claude - Automate browser actions\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-playwright\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"mcp\", \"playwright\", \"browser\", \"automation\"]\n}\n",
        "plugins/mcp-raindrop/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-raindrop\",\n  \"version\": \"0.5.1\",\n  \"description\": \"Raindrop.io bookmark management for Claude - Access and manage your Raindrop bookmarks\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-raindrop\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"raindrop.io\", \"bookmarks\", \"mcp\", \"claude\"]\n}\n",
        "plugins/mcp-screenshot/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-screenshot\",\n  \"version\": \"0.5.0\",\n  \"description\": \"Screenshot and OCR capabilities for Claude - Take screenshots and extract text\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-screenshot\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"mcp\", \"screenshot\", \"ocr\"]\n}\n",
        "plugins/mcp-slack/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-slack\",\n  \"version\": \"0.5.0\",\n  \"description\": \"Slack workspace integration for Claude - Access Slack workspaces without admin approval\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-slack\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"mcp\", \"slack\", \"slack-api\", \"model context protocol\"]\n}\n",
        "plugins/mcp-taskmanager/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-taskmanager\",\n  \"version\": \"0.5.0\",\n  \"description\": \"Task management for Claude - Manage tasks with MCP\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-taskmanager\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"taskmanager\", \"mcp\", \"claude\"]\n}\n",
        "plugins/mcp-tmux/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-tmux\",\n  \"version\": \"0.5.0\",\n  \"description\": \"tmux session management for Claude - Interface with tmux sessions\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-tmux\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"mcp\", \"tmux\", \"claude\", \"terminal\"]\n}\n",
        "plugins/mcp-youtube/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-youtube\",\n  \"version\": \"0.5.0\",\n  \"description\": \"YouTube subtitle extraction for Claude - Extract subtitles from YouTube videos\",\n  \"author\": {\n    \"name\": \"kazuph\",\n    \"url\": \"https://github.com/kazuph\"\n  },\n  \"repository\": \"https://github.com/kazuph/mcp-youtube\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"youtube\", \"subtitles\", \"mcp\", \"claude\", \"captions\"]\n}\n"
      },
      "plugins": [
        {
          "name": "kazuph-dotfiles",
          "description": "All kazuph's skills: MAGI, MoonBit, env-setup, figma, and more",
          "category": "development",
          "source": "./plugins/kazuph-dotfiles",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install kazuph-dotfiles@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-browser-tabs",
          "description": "Chrome browser tabs info for Claude",
          "category": "development",
          "source": "./plugins/mcp-browser-tabs",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-browser-tabs@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-chrome-devtools",
          "description": "Chrome DevTools Protocol MCP for browser automation",
          "category": "development",
          "source": "./plugins/mcp-chrome-devtools",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-chrome-devtools@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-fetch",
          "description": "HTTP fetch MCP server",
          "category": "development",
          "source": "./plugins/mcp-fetch",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-fetch@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-github-pera1",
          "description": "GitHub code extraction via Pera1 (local)",
          "category": "development",
          "source": "./plugins/mcp-github-pera1",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-github-pera1@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-gmail-gas",
          "description": "Gmail via Google Apps Script MCP",
          "category": "productivity",
          "source": "./plugins/mcp-gmail-gas",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-gmail-gas@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-google-image-search",
          "description": "Google image search MCP",
          "category": "development",
          "source": "./plugins/mcp-google-image-search",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-google-image-search@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-limitless",
          "description": "Limitless AI pendant lifelogs MCP (SSE)",
          "category": "productivity",
          "source": "./plugins/mcp-limitless",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-limitless@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-linear",
          "description": "Linear issue tracking MCP (SSE)",
          "category": "productivity",
          "source": "./plugins/mcp-linear",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-linear@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-obsidian",
          "description": "Obsidian vault MCP server",
          "category": "productivity",
          "source": "./plugins/mcp-obsidian",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-obsidian@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-pera1-remote",
          "description": "GitHub code extraction via Pera1 remote service (SSE)",
          "category": "development",
          "source": "./plugins/mcp-pera1-remote",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-pera1-remote@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-playwright",
          "description": "Playwright browser automation MCP",
          "category": "development",
          "source": "./plugins/mcp-playwright",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-playwright@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-raindrop",
          "description": "Raindrop.io bookmark manager MCP",
          "category": "productivity",
          "source": "./plugins/mcp-raindrop",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-raindrop@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-screenshot",
          "description": "Screenshot capture MCP",
          "category": "development",
          "source": "./plugins/mcp-screenshot",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-screenshot@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-slack",
          "description": "Slack messaging MCP",
          "category": "productivity",
          "source": "./plugins/mcp-slack",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-slack@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-taskmanager",
          "description": "Task manager MCP",
          "category": "productivity",
          "source": "./plugins/mcp-taskmanager",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-taskmanager@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-tmux",
          "description": "Tmux session management MCP",
          "category": "development",
          "source": "./plugins/mcp-tmux",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-tmux@kazuph-dotfiles"
          ]
        },
        {
          "name": "mcp-youtube",
          "description": "YouTube video information MCP",
          "category": "development",
          "source": "./plugins/mcp-youtube",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add kazuph/dotfiles",
            "/plugin install mcp-youtube@kazuph-dotfiles"
          ]
        }
      ]
    }
  ]
}