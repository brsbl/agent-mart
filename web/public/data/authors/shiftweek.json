{
  "author": {
    "id": "shiftweek",
    "display_name": "shiftweek",
    "avatar_url": "https://avatars.githubusercontent.com/u/260824616?v=4"
  },
  "marketplaces": [
    {
      "name": "oape-ai-e2e",
      "version": null,
      "description": "AI-driven OpenShift operator development tools",
      "repo_full_name": "shiftweek/oape-ai-e2e",
      "repo_url": "https://github.com/shiftweek/oape-ai-e2e",
      "repo_description": "AI Driven Feature Development",
      "signals": {
        "stars": 0,
        "forks": 5,
        "pushed_at": "2026-02-17T06:40:49Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"oape-ai-e2e\",\n  \"description\": \"AI-driven OpenShift operator development tools\",\n  \"owner\": {\n    \"name\": \"oape\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"oape\",\n      \"source\": \"./plugins/oape\",\n      \"description\": \"AI-driven OpenShift operator development tools\"\n    }\n  ]\n}\n",
        "README.md": "# oape-ai-e2e\n\nAI-driven Feature Development tools.\n\n## Installation\n\nAdd the marketplace:\n```shell\n/plugin marketplace add shiftweek/oape-ai-e2e\n```\n\nInstall the plugin:\n```shell\n/plugin install oape@oape-ai-e2e\n```\n\nUse the commands:\n```shell\n/oape:api-generate https://github.com/openshift/enhancements/pull/1234\n```\n\n## Updating Plugins\n\nUpdate the marketplace (fetches latest plugin catalog):\n```shell\n/plugin marketplace update oape-ai-e2e\n```\n\nReinstall the plugin (downloads new version):\n```shell\n/plugin install oape@oape-ai-e2e\n```\n\n## Using Cursor\n\nCursor can discover the commands by symlinking this repo into your `~/.cursor/commands` directory:\n\n```bash\nmkdir -p ~/.cursor/commands\ngit clone git@github.com:shiftweek/oape-ai-e2e.git\nln -s oape-ai-e2e ~/.cursor/commands/oape-ai-e2e\n```\n\n## Available Plugins\n\n| Plugin | Description | Commands |\n| ------------------------- | ---------------------------------------------- | --------------------------------------------------------------------------- |\n| **[oape](plugins/oape/)** | AI-driven OpenShift operator development tools | `/oape:init`, `/oape:api-generate`, `/oape:api-generate-tests`, `/oape:api-implement`, `/oape:e2e-generate`, `/oape:review`, `/oape:implement-review-fixes` |\n\n## Commands\n\n### `/oape:init` -- Clone an Operator Repository\n\nClones an allowed OpenShift operator repository by short name into the current directory.\n\n```shell\n/oape:init cert-manager-operator\n```\n\n### `/oape:api-generate` -- Generate API Types from Enhancement Proposal\n\nReads an OpenShift enhancement proposal PR, extracts the required API changes, and generates compliant Go type definitions in the correct paths of the current OpenShift operator repository.\n\n```shell\n/oape:api-generate https://github.com/openshift/enhancements/pull/1234\n```\n\n### `/oape:api-generate-tests` -- Generate Integration Tests for API Types\n\nGenerates `.testsuite.yaml` integration test files for OpenShift API type definitions, covering create, update, validation, and error scenarios.\n\n```shell\n/oape:api-generate-tests api/v1alpha1/myresource_types.go\n```\n\n### `/oape:api-implement` -- Generate Controller Implementation from Enhancement Proposal\n\nReads an OpenShift enhancement proposal PR, extracts the required implementation logic, and generates complete controller/reconciler code following controller-runtime and operator-sdk conventions.\n\n```shell\n/oape:api-implement https://github.com/openshift/enhancements/pull/1234\n```\n\n### `/oape:e2e-generate` -- Generate E2E Test Artifacts\n\nGenerates e2e test artifacts by discovering the repo structure and analyzing the git diff from a base branch.\n\n```shell\n/oape:e2e-generate main\n```\n\n### `/oape:review` -- Code Review Against Jira Requirements\n\nPerforms a production-grade code review that verifies code changes against Jira requirements.\n\n```shell\n/oape:review OCPBUGS-12345\n/oape:review OCPBUGS-12345 origin/release-4.15\n```\n\n### `/oape:implement-review-fixes` -- Apply Fixes from Review Report\n\nAutomatically applies code fixes from a review report.\n\n```shell\n/oape:implement-review-fixes <report-path>\n```\n\n**Typical workflow:**\n```shell\n# Step 1: Clone the operator repository\n/oape:init cert-manager-operator\n\n# Step 2: Generate API types\n/oape:api-generate https://github.com/openshift/enhancements/pull/1234\n\n# Step 3: Generate integration tests\n/oape:api-generate-tests api/v1alpha1/\n\n# Step 4: Generate controller implementation\n/oape:api-implement https://github.com/openshift/enhancements/pull/1234\n\n# Step 5: Generate e2e tests for your changes\n/oape:e2e-generate main\n```\n\n### Adding a New Command\n\n1. Add a new markdown file under `plugins/oape/commands/`\n2. The command will be available as `/oape:<command-name>`\n3. Update the plugin `README.md` documenting the new command\n\n### Plugin Structure\n\n```text\nplugins/oape/\n├── ztwim-test-generator/   # ZTWIM fixtures, docs, skills (commands are in commands/)\n├── .claude-plugin/\n│   └── plugin.json           # Required: plugin metadata\n├── commands/\n│   └── <command-name>.md     # Slash commands\n├── skills/\n│   └── <skill-name>/\n│       └── SKILL.md          # Reusable agent skills (optional)\n└── README.md                 # Plugin documentation\n```\n",
        "plugins/oape/README.md": "# oape Plugin\n\nAI-driven OpenShift operator development tools, following OpenShift and Kubernetes API conventions.\n\n## Commands\n\n### `/oape:init`\n\nClones an allowed OpenShift operator repository by short name into the current directory so that subsequent `/oape:*` commands can operate immediately.\n\n**Usage:**\n```shell\n/oape:init cert-manager-operator\n```\n\n**What it does:**\n1. **Prechecks** -- Validates the short name argument, required tools (`git`, `gh`), and GitHub authentication.\n2. **Repository Resolution** -- Matches the short name against the allowlist (case-insensitive, with partial match disambiguation).\n3. **Clone** -- Runs `git clone --filter=blob:none` into the current working directory. If the directory already exists with the correct remote, reuses it.\n4. **Verify** -- Changes into the cloned directory and reports the Go module and detected framework.\n\n### `/oape:api-generate`\n\nReads an OpenShift enhancement proposal PR, extracts the required API changes, and generates compliant Go type definitions in the correct paths of the current OpenShift operator repository.\n\n**Usage:**\n```shell\n/oape:api-generate https://github.com/openshift/enhancements/pull/1234\n```\n\n**What it does:**\n1. **Prechecks** -- Validates the PR URL, required tools (`gh`, `go`, `git`), GitHub authentication, repository type (must be an OpenShift operator repo with `openshift/api` dependency), and PR accessibility. Fails immediately if any precheck fails.\n2. **Knowledge Refresh** -- Fetches and internalizes the latest OpenShift and Kubernetes API conventions before generating any code.\n3. **Enhancement Analysis** -- Reads the enhancement proposal to extract API group, version, kinds, fields, validation requirements, feature gate info, and whether it is a configuration or workload API.\n4. **Code Generation** -- Generates or modifies Go type definitions following conventions derived from the authoritative documents and patterns from the existing codebase.\n5. **FeatureGate Registration** -- Adds FeatureGate to `features.go` when applicable.\n\n### `/oape:api-generate-tests`\n\nGenerates `.testsuite.yaml` integration test files for OpenShift API type definitions. Reads Go types, CRD manifests, and validation markers to produce comprehensive test suites.\n\n**Usage:**\n```shell\n/oape:api-generate-tests api/v1alpha1/myresource_types.go\n```\n\n**What it does:**\n1. **Prechecks** -- Verifies the repository, identifies target API types, and checks for CRD manifests.\n2. **Type Analysis** -- Reads Go types to extract fields, validation markers, enums, unions, immutability rules, and feature gates.\n3. **Test Generation** -- Generates test cases covering: minimal valid create, valid/invalid field values, update scenarios, immutable fields, singleton name validation, discriminated unions, feature-gated fields, and status subresource tests.\n4. **File Output** -- Writes `.testsuite.yaml` files following the repo's existing naming and directory conventions.\n\n### `/oape:api-implement`\n\nReads an OpenShift enhancement proposal PR, extracts the required implementation logic, and generates complete controller/reconciler code following controller-runtime and operator-sdk conventions.\n\n**Usage:**\n```shell\n/oape:api-implement https://github.com/openshift/enhancements/pull/1234\n```\n\n**What it does:**\n1. **Prechecks** -- Validates the PR URL, required tools (`gh`, `go`, `git`, `make`), GitHub authentication, repository type (controller-runtime or library-go), and PR accessibility.\n2. **Knowledge Refresh** -- Fetches and internalizes the latest controller-runtime patterns and operator best practices.\n3. **Enhancement Analysis** -- Reads the enhancement proposal to extract business logic requirements, reconciliation workflow, conditions, events, and error handling.\n4. **Pattern Detection** -- Identifies the controller layout pattern used in the repository.\n5. **Code Generation** -- Generates complete Reconcile() logic, SetupWithManager, finalizer handling, status updates, and event recording.\n6. **Controller Registration** -- Adds the new controller to the manager.\n\n**Typical Workflow:**\n```shell\n# Clone the operator repository (if not already cloned)\n/oape:init cert-manager-operator\n\n# Generate the API types\n/oape:api-generate https://github.com/openshift/enhancements/pull/1234\n\n# Generate integration tests for the new types\n/oape:api-generate-tests api/v1alpha1/myresource_types.go\n\n# Generate the controller implementation\n/oape:api-implement https://github.com/openshift/enhancements/pull/1234\n```\n\n---\n\n### `/oape:review`\n\nPerforms a \"Principal Engineer\" level code review that verifies code changes against Jira requirements.\n\n**Usage:**\n```shell\n/oape:review OCPBUGS-12345\n/oape:review OCPBUGS-12345 origin/release-4.15\n```\n\n**What it does:**\n1. **Fetches Jira Issue** -- Retrieves the ticket details and acceptance criteria\n2. **Analyzes Git Diff** -- Gets changes between base ref and HEAD\n3. **Reviews Code** -- Applies four review modules:\n   - **Golang Logic & Safety**: Intent matching, execution traces, edge cases, context usage, concurrency, error handling\n   - **Bash Scripts**: Safety patterns, variable quoting, temp file handling\n   - **Operator Metadata (OLM)**: RBAC updates, finalizer handling\n   - **Build Consistency**: Generation drift detection\n4. **Generates Report** -- Returns structured JSON with verdict, issues, and fix prompts\n5. **Applies Fixes Automatically** -- When issues are found, invokes `implement-review-fixes.md` to apply the suggested code changes in severity order (CRITICAL first), then verifies the build still passes\n\n---\n\n### `/oape:e2e-generate`\n\nGenerates e2e test artifacts for any OpenShift operator repository by discovering the repo structure and analyzing the git diff from a base branch.\n\n**Usage:**\n```shell\n# Generate e2e tests for changes since main\n/oape:e2e-generate main\n\n# Use a specific base branch and custom output directory\n/oape:e2e-generate origin/release-4.18 --output .work\n```\n\n**What it does:**\n1. **Prechecks** -- Validates the base branch argument, required tools (`git`, `go`), repository type (must be an OpenShift operator repo with controller-runtime or library-go), and verifies a non-empty git diff.\n2. **Discovery** -- Detects framework (controller-runtime vs library-go), API types, CRDs, existing e2e test patterns, install mechanism (OLM or manual), operator namespace, and sample CRs.\n3. **Diff Analysis** -- Categorizes changed files (API types, controllers, CRDs, RBAC, samples) and reads diff hunks to understand specific changes.\n4. **Generation** -- Produces four files in `output/e2e_<repo-name>/`:\n   - `test-cases.md` -- Test scenarios with context, prerequisites, install, CR deployment, diff-specific tests, verification, cleanup\n   - `execution-steps.md` -- Step-by-step `oc` commands\n   - `e2e_test.go` or `e2e_test.sh` -- Go (Ginkgo) or bash test code matching the repo's existing e2e pattern\n   - `e2e-suggestions.md` -- Coverage recommendations\n\n**Supports:**\n- controller-runtime operators (Ginkgo e2e) -- e.g., cert-manager-operator, external-secrets-operator\n- library-go operators (bash e2e) -- e.g., secrets-store-csi-driver-operator\n- Operators with in-repo API types or external types from openshift/api\n\nSee [e2e-test-generator/](e2e-test-generator/) for fixture templates and pattern documentation.\n\n## Prerequisites\n\n- **go** -- Go toolchain\n- **git** -- Git\n- **gh** (GitHub CLI) -- installed and authenticated (for api-generate, api-implement, review)\n- **make** -- Make (for api-implement)\n- **curl** -- For fetching Jira issues (for review)\n- **oc** -- OpenShift CLI (recommended, for running generated execution steps)\n- Must be run from within an OpenShift operator repository\n\n## Conventions Enforced\n\n- [OpenShift API Conventions](https://github.com/openshift/enhancements/blob/master/dev-guide/api-conventions.md)\n- [Kubernetes API Conventions](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md)\n- [Kubebuilder Controller Patterns](https://book.kubebuilder.io/cronjob-tutorial/controller-implementation)\n- [Controller-Runtime Best Practices](https://pkg.go.dev/sigs.k8s.io/controller-runtime)\n"
      },
      "plugins": [
        {
          "name": "oape",
          "source": "./plugins/oape",
          "description": "AI-driven OpenShift operator development tools",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add shiftweek/oape-ai-e2e",
            "/plugin install oape@oape-ai-e2e"
          ]
        }
      ]
    }
  ]
}