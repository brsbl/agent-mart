{
  "author": {
    "id": "anthropics",
    "display_name": "Anthropic",
    "type": "Organization",
    "avatar_url": "https://avatars.githubusercontent.com/u/76263028?v=4",
    "url": "https://github.com/anthropics",
    "bio": null,
    "stats": {
      "total_marketplaces": 3,
      "total_plugins": 66,
      "total_commands": 33,
      "total_skills": 40,
      "total_stars": 125572,
      "total_forks": 10894
    }
  },
  "marketplaces": [
    {
      "name": "claude-code-plugins",
      "version": "1.0.0",
      "description": "Bundled plugins for Claude Code including Agent SDK development tools, PR review toolkit, and commit workflows",
      "owner_info": {
        "name": "Anthropic",
        "email": "support@anthropic.com"
      },
      "keywords": [],
      "repo_full_name": "anthropics/claude-code",
      "repo_url": "https://github.com/anthropics/claude-code",
      "repo_description": "Claude Code is an agentic coding tool that lives in your terminal, understands your codebase, and helps you code faster by executing routine tasks, explaining complex code, and handling git workflows - all through natural language commands.",
      "homepage": "https://code.claude.com/docs/en/overview",
      "signals": {
        "stars": 62183,
        "forks": 4656,
        "pushed_at": "2026-01-29T21:13:33Z",
        "created_at": "2025-02-22T17:41:21Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 5468
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 190
        },
        {
          "path": "plugins/agent-sdk-dev/README.md",
          "type": "blob",
          "size": 6397
        },
        {
          "path": "plugins/agent-sdk-dev/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/agents/agent-sdk-verifier-py.md",
          "type": "blob",
          "size": 5206
        },
        {
          "path": "plugins/agent-sdk-dev/agents/agent-sdk-verifier-ts.md",
          "type": "blob",
          "size": 5419
        },
        {
          "path": "plugins/agent-sdk-dev/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/commands/new-sdk-app.md",
          "type": "blob",
          "size": 7846
        },
        {
          "path": "plugins/claude-opus-4-5-migration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-opus-4-5-migration/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-opus-4-5-migration/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 234
        },
        {
          "path": "plugins/claude-opus-4-5-migration/README.md",
          "type": "blob",
          "size": 707
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/SKILL.md",
          "type": "blob",
          "size": 4746
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/references/effort.md",
          "type": "blob",
          "size": 1728
        },
        {
          "path": "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/references/prompt-snippets.md",
          "type": "blob",
          "size": 6139
        },
        {
          "path": "plugins/code-review",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-review/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-review/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 257
        },
        {
          "path": "plugins/code-review/README.md",
          "type": "blob",
          "size": 7703
        },
        {
          "path": "plugins/code-review/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-review/commands/code-review.md",
          "type": "blob",
          "size": 6967
        },
        {
          "path": "plugins/commit-commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/commit-commands/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/commit-commands/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 258
        },
        {
          "path": "plugins/commit-commands/README.md",
          "type": "blob",
          "size": 5908
        },
        {
          "path": "plugins/commit-commands/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/commit-commands/commands/clean_gone.md",
          "type": "blob",
          "size": 1865
        },
        {
          "path": "plugins/commit-commands/commands/commit-push-pr.md",
          "type": "blob",
          "size": 796
        },
        {
          "path": "plugins/commit-commands/commands/commit.md",
          "type": "blob",
          "size": 624
        },
        {
          "path": "plugins/explanatory-output-style",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/explanatory-output-style/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/explanatory-output-style/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 293
        },
        {
          "path": "plugins/explanatory-output-style/README.md",
          "type": "blob",
          "size": 2470
        },
        {
          "path": "plugins/explanatory-output-style/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/explanatory-output-style/hooks/hooks.json",
          "type": "blob",
          "size": 314
        },
        {
          "path": "plugins/feature-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 291
        },
        {
          "path": "plugins/feature-dev/README.md",
          "type": "blob",
          "size": 11697
        },
        {
          "path": "plugins/feature-dev/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/agents/code-architect.md",
          "type": "blob",
          "size": 2259
        },
        {
          "path": "plugins/feature-dev/agents/code-explorer.md",
          "type": "blob",
          "size": 2115
        },
        {
          "path": "plugins/feature-dev/agents/code-reviewer.md",
          "type": "blob",
          "size": 2994
        },
        {
          "path": "plugins/feature-dev/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/commands/feature-dev.md",
          "type": "blob",
          "size": 5097
        },
        {
          "path": "plugins/frontend-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 256
        },
        {
          "path": "plugins/frontend-design/README.md",
          "type": "blob",
          "size": 977
        },
        {
          "path": "plugins/frontend-design/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/skills/frontend-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/skills/frontend-design/SKILL.md",
          "type": "blob",
          "size": 4274
        },
        {
          "path": "plugins/hookify",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 234
        },
        {
          "path": "plugins/hookify/README.md",
          "type": "blob",
          "size": 7710
        },
        {
          "path": "plugins/hookify/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/agents/conversation-analyzer.md",
          "type": "blob",
          "size": 5478
        },
        {
          "path": "plugins/hookify/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/commands/configure.md",
          "type": "blob",
          "size": 2863
        },
        {
          "path": "plugins/hookify/commands/help.md",
          "type": "blob",
          "size": 4624
        },
        {
          "path": "plugins/hookify/commands/hookify.md",
          "type": "blob",
          "size": 7667
        },
        {
          "path": "plugins/hookify/commands/list.md",
          "type": "blob",
          "size": 2020
        },
        {
          "path": "plugins/hookify/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/hooks/hooks.json",
          "type": "blob",
          "size": 1020
        },
        {
          "path": "plugins/hookify/hooks/posttooluse.py",
          "type": "blob",
          "size": 1776
        },
        {
          "path": "plugins/hookify/hooks/pretooluse.py",
          "type": "blob",
          "size": 2205
        },
        {
          "path": "plugins/hookify/hooks/stop.py",
          "type": "blob",
          "size": 1557
        },
        {
          "path": "plugins/hookify/hooks/userpromptsubmit.py",
          "type": "blob",
          "size": 1543
        },
        {
          "path": "plugins/hookify/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/skills/writing-rules",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/skills/writing-rules/SKILL.md",
          "type": "blob",
          "size": 8423
        },
        {
          "path": "plugins/learning-output-style",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/learning-output-style/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/learning-output-style/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 296
        },
        {
          "path": "plugins/learning-output-style/README.md",
          "type": "blob",
          "size": 4687
        },
        {
          "path": "plugins/learning-output-style/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/learning-output-style/hooks/hooks.json",
          "type": "blob",
          "size": 311
        },
        {
          "path": "plugins/plugin-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/README.md",
          "type": "blob",
          "size": 14592
        },
        {
          "path": "plugins/plugin-dev/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/agents/agent-creator.md",
          "type": "blob",
          "size": 7437
        },
        {
          "path": "plugins/plugin-dev/agents/plugin-validator.md",
          "type": "blob",
          "size": 6623
        },
        {
          "path": "plugins/plugin-dev/agents/skill-reviewer.md",
          "type": "blob",
          "size": 6079
        },
        {
          "path": "plugins/plugin-dev/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/commands/create-plugin.md",
          "type": "blob",
          "size": 14950
        },
        {
          "path": "plugins/plugin-dev/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/SKILL.md",
          "type": "blob",
          "size": 10430
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/examples/agent-creation-prompt.md",
          "type": "blob",
          "size": 9390
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/examples/complete-agent-examples.md",
          "type": "blob",
          "size": 14117
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references/agent-creation-system-prompt.md",
          "type": "blob",
          "size": 8879
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references/system-prompt-design.md",
          "type": "blob",
          "size": 9998
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references/triggering-examples.md",
          "type": "blob",
          "size": 11613
        },
        {
          "path": "plugins/plugin-dev/skills/command-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/README.md",
          "type": "blob",
          "size": 7651
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/SKILL.md",
          "type": "blob",
          "size": 18941
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/examples/plugin-commands.md",
          "type": "blob",
          "size": 13989
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/examples/simple-commands.md",
          "type": "blob",
          "size": 8675
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/advanced-workflows.md",
          "type": "blob",
          "size": 13618
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/documentation-patterns.md",
          "type": "blob",
          "size": 14971
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/frontmatter-reference.md",
          "type": "blob",
          "size": 9162
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/interactive-commands.md",
          "type": "blob",
          "size": 20980
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/marketplace-considerations.md",
          "type": "blob",
          "size": 16437
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/plugin-features-reference.md",
          "type": "blob",
          "size": 14622
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/testing-strategies.md",
          "type": "blob",
          "size": 14803
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/SKILL.md",
          "type": "blob",
          "size": 16246
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references/advanced.md",
          "type": "blob",
          "size": 10148
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references/migration.md",
          "type": "blob",
          "size": 8299
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references/patterns.md",
          "type": "blob",
          "size": 7144
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/scripts/README.md",
          "type": "blob",
          "size": 3677
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/SKILL.md",
          "type": "blob",
          "size": 12519
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references/authentication.md",
          "type": "blob",
          "size": 10196
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references/server-types.md",
          "type": "blob",
          "size": 10613
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references/tool-usage.md",
          "type": "blob",
          "size": 11674
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/SKILL.md",
          "type": "blob",
          "size": 12101
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/examples/create-settings-command.md",
          "type": "blob",
          "size": 2177
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/examples/example-settings.md",
          "type": "blob",
          "size": 2930
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/references/parsing-techniques.md",
          "type": "blob",
          "size": 11513
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/references/real-world-examples.md",
          "type": "blob",
          "size": 9496
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/README.md",
          "type": "blob",
          "size": 3210
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/SKILL.md",
          "type": "blob",
          "size": 13796
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples/advanced-plugin.md",
          "type": "blob",
          "size": 18746
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples/minimal-plugin.md",
          "type": "blob",
          "size": 1731
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples/standard-plugin.md",
          "type": "blob",
          "size": 13310
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/references/component-patterns.md",
          "type": "blob",
          "size": 12086
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/references/manifest-reference.md",
          "type": "blob",
          "size": 12061
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development/SKILL.md",
          "type": "blob",
          "size": 22827
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development/references/skill-creator-original.md",
          "type": "blob",
          "size": 11547
        },
        {
          "path": "plugins/pr-review-toolkit",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 282
        },
        {
          "path": "plugins/pr-review-toolkit/README.md",
          "type": "blob",
          "size": 7528
        },
        {
          "path": "plugins/pr-review-toolkit/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/agents/code-reviewer.md",
          "type": "blob",
          "size": 3985
        },
        {
          "path": "plugins/pr-review-toolkit/agents/code-simplifier.md",
          "type": "blob",
          "size": 5230
        },
        {
          "path": "plugins/pr-review-toolkit/agents/comment-analyzer.md",
          "type": "blob",
          "size": 5725
        },
        {
          "path": "plugins/pr-review-toolkit/agents/pr-test-analyzer.md",
          "type": "blob",
          "size": 4985
        },
        {
          "path": "plugins/pr-review-toolkit/agents/silent-failure-hunter.md",
          "type": "blob",
          "size": 7807
        },
        {
          "path": "plugins/pr-review-toolkit/agents/type-design-analyzer.md",
          "type": "blob",
          "size": 5368
        },
        {
          "path": "plugins/pr-review-toolkit/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/commands/review-pr.md",
          "type": "blob",
          "size": 4997
        },
        {
          "path": "plugins/ralph-wiggum",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-wiggum/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-wiggum/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 353
        },
        {
          "path": "plugins/ralph-wiggum/README.md",
          "type": "blob",
          "size": 5201
        },
        {
          "path": "plugins/ralph-wiggum/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-wiggum/commands/cancel-ralph.md",
          "type": "blob",
          "size": 745
        },
        {
          "path": "plugins/ralph-wiggum/commands/help.md",
          "type": "blob",
          "size": 3229
        },
        {
          "path": "plugins/ralph-wiggum/commands/ralph-loop.md",
          "type": "blob",
          "size": 923
        },
        {
          "path": "plugins/ralph-wiggum/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-wiggum/hooks/hooks.json",
          "type": "blob",
          "size": 284
        },
        {
          "path": "plugins/ralph-wiggum/hooks/stop-hook.sh",
          "type": "blob",
          "size": 6564
        },
        {
          "path": "plugins/security-guidance",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/security-guidance/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/security-guidance/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 306
        },
        {
          "path": "plugins/security-guidance/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/security-guidance/hooks/hooks.json",
          "type": "blob",
          "size": 382
        },
        {
          "path": "plugins/security-guidance/hooks/security_reminder_hook.py",
          "type": "blob",
          "size": 10767
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n  \"name\": \"claude-code-plugins\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Bundled plugins for Claude Code including Agent SDK development tools, PR review toolkit, and commit workflows\",\n  \"owner\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"agent-sdk-dev\",\n      \"description\": \"Development kit for working with the Claude Agent SDK\",\n      \"source\": \"./plugins/agent-sdk-dev\",\n      \"category\": \"development\"\n    },\n    {\n      \"name\": \"claude-opus-4-5-migration\",\n      \"description\": \"Migrate your code and prompts from Sonnet 4.x and Opus 4.1 to Opus 4.5.\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"William Hu\",\n        \"email\": \"whu@anthropic.com\"\n      },\n      \"source\": \"./plugins/claude-opus-4-5-migration\",\n      \"category\": \"development\"\n    },\n    {\n      \"name\": \"code-review\",\n      \"description\": \"Automated code review for pull requests using multiple specialized agents with confidence-based scoring to filter false positives\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Boris Cherny\",\n        \"email\": \"boris@anthropic.com\"\n      },\n      \"source\": \"./plugins/code-review\",\n      \"category\": \"productivity\"\n    },\n    {\n      \"name\": \"commit-commands\",\n      \"description\": \"Commands for git commit workflows including commit, push, and PR creation\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/commit-commands\",\n      \"category\": \"productivity\"\n    },\n    {\n      \"name\": \"explanatory-output-style\",\n      \"description\": \"Adds educational insights about implementation choices and codebase patterns (mimics the deprecated Explanatory output style)\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Dickson Tsai\",\n        \"email\": \"dickson@anthropic.com\"\n      },\n      \"source\": \"./plugins/explanatory-output-style\",\n      \"category\": \"learning\"\n    },\n    {\n      \"name\": \"feature-dev\",\n      \"description\": \"Comprehensive feature development workflow with specialized agents for codebase exploration, architecture design, and quality review\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Siddharth Bidasaria\",\n        \"email\": \"sbidasaria@anthropic.com\"\n      },\n      \"source\": \"./plugins/feature-dev\",\n      \"category\": \"development\"\n    },\n    {\n      \"name\": \"frontend-design\",\n      \"description\": \"Create distinctive, production-grade frontend interfaces with high design quality. Generates creative, polished code that avoids generic AI aesthetics.\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Prithvi Rajasekaran & Alexander Bricken\",\n        \"email\": \"prithvi@anthropic.com\"\n      },\n      \"source\": \"./plugins/frontend-design\",\n      \"category\": \"development\"\n    },\n    {\n      \"name\": \"hookify\",\n      \"description\": \"Easily create custom hooks to prevent unwanted behaviors by analyzing conversation patterns or from explicit instructions. Define rules via simple markdown files.\",\n      \"version\": \"0.1.0\",\n      \"author\": {\n        \"name\": \"Daisy Hollman\",\n        \"email\": \"daisy@anthropic.com\"\n      },\n      \"source\": \"./plugins/hookify\",\n      \"category\": \"productivity\"\n    },\n    {\n      \"name\": \"learning-output-style\",\n      \"description\": \"Interactive learning mode that requests meaningful code contributions at decision points (mimics the unshipped Learning output style)\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Boris Cherny\",\n        \"email\": \"boris@anthropic.com\"\n      },\n      \"source\": \"./plugins/learning-output-style\",\n      \"category\": \"learning\"\n    },\n    {\n      \"name\": \"plugin-dev\",\n      \"description\": \"Comprehensive toolkit for developing Claude Code plugins. Includes 7 expert skills covering hooks, MCP integration, commands, agents, and best practices. AI-assisted plugin creation and validation.\",\n      \"version\": \"0.1.0\",\n      \"author\": {\n        \"name\": \"Daisy Hollman\",\n        \"email\": \"daisy@anthropic.com\"\n      },\n      \"source\": \"./plugins/plugin-dev\",\n      \"category\": \"development\"\n    },\n    {\n      \"name\": \"pr-review-toolkit\",\n      \"description\": \"Comprehensive PR review agents specializing in comments, tests, error handling, type design, code quality, and code simplification\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/pr-review-toolkit\",\n      \"category\": \"productivity\"\n    },\n    {\n      \"name\": \"ralph-wiggum\",\n      \"description\": \"Interactive self-referential AI loops for iterative development. Claude works on the same task repeatedly, seeing its previous work, until completion.\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Daisy Hollman\",\n        \"email\": \"daisy@anthropic.com\"\n      },\n      \"source\": \"./plugins/ralph-wiggum\",\n      \"category\": \"development\"\n    },\n    {\n      \"name\": \"security-guidance\",\n      \"description\": \"Security reminder hook that warns about potential security issues when editing files, including command injection, XSS, and unsafe code patterns\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"David Dworken\",\n        \"email\": \"dworken@anthropic.com\"\n      },\n      \"source\": \"./plugins/security-guidance\",\n      \"category\": \"security\"\n    }\n  ]\n}\n",
        "plugins/agent-sdk-dev/.claude-plugin/plugin.json": "{\n  \"name\": \"agent-sdk-dev\",\n  \"description\": \"Claude Agent SDK Development Plugin\",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"Ashwin Bhat\",\n    \"email\": \"ashwin@anthropic.com\"\n  }\n}\n",
        "plugins/agent-sdk-dev/README.md": "# Agent SDK Development Plugin\n\nA comprehensive plugin for creating and verifying Claude Agent SDK applications in Python and TypeScript.\n\n## Overview\n\nThe Agent SDK Development Plugin streamlines the entire lifecycle of building Agent SDK applications, from initial scaffolding to verification against best practices. It helps you quickly start new projects with the latest SDK versions and ensures your applications follow official documentation patterns.\n\n## Features\n\n### Command: `/new-sdk-app`\n\nInteractive command that guides you through creating a new Claude Agent SDK application.\n\n**What it does:**\n- Asks clarifying questions about your project (language, name, agent type, starting point)\n- Checks for and installs the latest SDK version\n- Creates all necessary project files and configuration\n- Sets up proper environment files (.env.example, .gitignore)\n- Provides a working example tailored to your use case\n- Runs type checking (TypeScript) or syntax validation (Python)\n- Automatically verifies the setup using the appropriate verifier agent\n\n**Usage:**\n```bash\n/new-sdk-app my-project-name\n```\n\nOr simply:\n```bash\n/new-sdk-app\n```\n\nThe command will interactively ask you:\n1. Language choice (TypeScript or Python)\n2. Project name (if not provided)\n3. Agent type (coding, business, custom)\n4. Starting point (minimal, basic, or specific example)\n5. Tooling preferences (npm/yarn/pnpm or pip/poetry)\n\n**Example:**\n```bash\n/new-sdk-app customer-support-agent\n# → Creates a new Agent SDK project for a customer support agent\n# → Sets up TypeScript or Python environment\n# → Installs latest SDK version\n# → Verifies the setup automatically\n```\n\n### Agent: `agent-sdk-verifier-py`\n\nThoroughly verifies Python Agent SDK applications for correct setup and best practices.\n\n**Verification checks:**\n- SDK installation and version\n- Python environment setup (requirements.txt, pyproject.toml)\n- Correct SDK usage and patterns\n- Agent initialization and configuration\n- Environment and security (.env, API keys)\n- Error handling and functionality\n- Documentation completeness\n\n**When to use:**\n- After creating a new Python SDK project\n- After modifying an existing Python SDK application\n- Before deploying a Python SDK application\n\n**Usage:**\nThe agent runs automatically after `/new-sdk-app` creates a Python project, or you can trigger it by asking:\n```\n\"Verify my Python Agent SDK application\"\n\"Check if my SDK app follows best practices\"\n```\n\n**Output:**\nProvides a comprehensive report with:\n- Overall status (PASS / PASS WITH WARNINGS / FAIL)\n- Critical issues that prevent functionality\n- Warnings about suboptimal patterns\n- List of passed checks\n- Specific recommendations with SDK documentation references\n\n### Agent: `agent-sdk-verifier-ts`\n\nThoroughly verifies TypeScript Agent SDK applications for correct setup and best practices.\n\n**Verification checks:**\n- SDK installation and version\n- TypeScript configuration (tsconfig.json)\n- Correct SDK usage and patterns\n- Type safety and imports\n- Agent initialization and configuration\n- Environment and security (.env, API keys)\n- Error handling and functionality\n- Documentation completeness\n\n**When to use:**\n- After creating a new TypeScript SDK project\n- After modifying an existing TypeScript SDK application\n- Before deploying a TypeScript SDK application\n\n**Usage:**\nThe agent runs automatically after `/new-sdk-app` creates a TypeScript project, or you can trigger it by asking:\n```\n\"Verify my TypeScript Agent SDK application\"\n\"Check if my SDK app follows best practices\"\n```\n\n**Output:**\nProvides a comprehensive report with:\n- Overall status (PASS / PASS WITH WARNINGS / FAIL)\n- Critical issues that prevent functionality\n- Warnings about suboptimal patterns\n- List of passed checks\n- Specific recommendations with SDK documentation references\n\n## Workflow Example\n\nHere's a typical workflow using this plugin:\n\n1. **Create a new project:**\n```bash\n/new-sdk-app code-reviewer-agent\n```\n\n2. **Answer the interactive questions:**\n```\nLanguage: TypeScript\nAgent type: Coding agent (code review)\nStarting point: Basic agent with common features\n```\n\n3. **Automatic verification:**\nThe command automatically runs `agent-sdk-verifier-ts` to ensure everything is correctly set up.\n\n4. **Start developing:**\n```bash\n# Set your API key\necho \"ANTHROPIC_API_KEY=your_key_here\" > .env\n\n# Run your agent\nnpm start\n```\n\n5. **Verify after changes:**\n```\n\"Verify my SDK application\"\n```\n\n## Installation\n\nThis plugin is included in the Claude Code repository. To use it:\n\n1. Ensure Claude Code is installed\n2. The plugin commands and agents are automatically available\n\n## Best Practices\n\n- **Always use the latest SDK version**: `/new-sdk-app` checks for and installs the latest version\n- **Verify before deploying**: Run the verifier agent before deploying to production\n- **Keep API keys secure**: Never commit `.env` files or hardcode API keys\n- **Follow SDK documentation**: The verifier agents check against official patterns\n- **Type check TypeScript projects**: Run `npx tsc --noEmit` regularly\n- **Test your agents**: Create test cases for your agent's functionality\n\n## Resources\n\n- [Agent SDK Overview](https://docs.claude.com/en/api/agent-sdk/overview)\n- [TypeScript SDK Reference](https://docs.claude.com/en/api/agent-sdk/typescript)\n- [Python SDK Reference](https://docs.claude.com/en/api/agent-sdk/python)\n- [Agent SDK Examples](https://docs.claude.com/en/api/agent-sdk/examples)\n\n## Troubleshooting\n\n### Type errors in TypeScript project\n\n**Issue**: TypeScript project has type errors after creation\n\n**Solution**:\n- The `/new-sdk-app` command runs type checking automatically\n- If errors persist, check that you're using the latest SDK version\n- Verify your `tsconfig.json` matches SDK requirements\n\n### Python import errors\n\n**Issue**: Cannot import from `claude_agent_sdk`\n\n**Solution**:\n- Ensure you've installed dependencies: `pip install -r requirements.txt`\n- Activate your virtual environment if using one\n- Check that the SDK is installed: `pip show claude-agent-sdk`\n\n### Verification fails with warnings\n\n**Issue**: Verifier agent reports warnings\n\n**Solution**:\n- Review the specific warnings in the report\n- Check the SDK documentation references provided\n- Warnings don't prevent functionality but indicate areas for improvement\n\n## Author\n\nAshwin Bhat (ashwin@anthropic.com)\n\n## Version\n\n1.0.0\n",
        "plugins/agent-sdk-dev/agents/agent-sdk-verifier-py.md": "---\nname: agent-sdk-verifier-py\ndescription: Use this agent to verify that a Python Agent SDK application is properly configured, follows SDK best practices and documentation recommendations, and is ready for deployment or testing. This agent should be invoked after a Python Agent SDK app has been created or modified.\nmodel: sonnet\n---\n\nYou are a Python Agent SDK application verifier. Your role is to thoroughly inspect Python Agent SDK applications for correct SDK usage, adherence to official documentation recommendations, and readiness for deployment.\n\n## Verification Focus\n\nYour verification should prioritize SDK functionality and best practices over general code style. Focus on:\n\n1. **SDK Installation and Configuration**:\n\n   - Verify `claude-agent-sdk` is installed (check requirements.txt, pyproject.toml, or pip list)\n   - Check that the SDK version is reasonably current (not ancient)\n   - Validate Python version requirements are met (typically Python 3.8+)\n   - Confirm virtual environment is recommended/documented if applicable\n\n2. **Python Environment Setup**:\n\n   - Check for requirements.txt or pyproject.toml\n   - Verify dependencies are properly specified\n   - Ensure Python version constraints are documented if needed\n   - Validate that the environment can be reproduced\n\n3. **SDK Usage and Patterns**:\n\n   - Verify correct imports from `claude_agent_sdk` (or appropriate SDK module)\n   - Check that agents are properly initialized according to SDK docs\n   - Validate that agent configuration follows SDK patterns (system prompts, models, etc.)\n   - Ensure SDK methods are called correctly with proper parameters\n   - Check for proper handling of agent responses (streaming vs single mode)\n   - Verify permissions are configured correctly if used\n   - Validate MCP server integration if present\n\n4. **Code Quality**:\n\n   - Check for basic syntax errors\n   - Verify imports are correct and available\n   - Ensure proper error handling\n   - Validate that the code structure makes sense for the SDK\n\n5. **Environment and Security**:\n\n   - Check that `.env.example` exists with `ANTHROPIC_API_KEY`\n   - Verify `.env` is in `.gitignore`\n   - Ensure API keys are not hardcoded in source files\n   - Validate proper error handling around API calls\n\n6. **SDK Best Practices** (based on official docs):\n\n   - System prompts are clear and well-structured\n   - Appropriate model selection for the use case\n   - Permissions are properly scoped if used\n   - Custom tools (MCP) are correctly integrated if present\n   - Subagents are properly configured if used\n   - Session handling is correct if applicable\n\n7. **Functionality Validation**:\n\n   - Verify the application structure makes sense for the SDK\n   - Check that agent initialization and execution flow is correct\n   - Ensure error handling covers SDK-specific errors\n   - Validate that the app follows SDK documentation patterns\n\n8. **Documentation**:\n   - Check for README or basic documentation\n   - Verify setup instructions are present (including virtual environment setup)\n   - Ensure any custom configurations are documented\n   - Confirm installation instructions are clear\n\n## What NOT to Focus On\n\n- General code style preferences (PEP 8 formatting, naming conventions, etc.)\n- Python-specific style choices (snake_case vs camelCase debates)\n- Import ordering preferences\n- General Python best practices unrelated to SDK usage\n\n## Verification Process\n\n1. **Read the relevant files**:\n\n   - requirements.txt or pyproject.toml\n   - Main application files (main.py, app.py, src/\\*, etc.)\n   - .env.example and .gitignore\n   - Any configuration files\n\n2. **Check SDK Documentation Adherence**:\n\n   - Use WebFetch to reference the official Python SDK docs: https://docs.claude.com/en/api/agent-sdk/python\n   - Compare the implementation against official patterns and recommendations\n   - Note any deviations from documented best practices\n\n3. **Validate Imports and Syntax**:\n\n   - Check that all imports are correct\n   - Look for obvious syntax errors\n   - Verify SDK is properly imported\n\n4. **Analyze SDK Usage**:\n   - Verify SDK methods are used correctly\n   - Check that configuration options match SDK documentation\n   - Validate that patterns follow official examples\n\n## Verification Report Format\n\nProvide a comprehensive report:\n\n**Overall Status**: PASS | PASS WITH WARNINGS | FAIL\n\n**Summary**: Brief overview of findings\n\n**Critical Issues** (if any):\n\n- Issues that prevent the app from functioning\n- Security problems\n- SDK usage errors that will cause runtime failures\n- Syntax errors or import problems\n\n**Warnings** (if any):\n\n- Suboptimal SDK usage patterns\n- Missing SDK features that would improve the app\n- Deviations from SDK documentation recommendations\n- Missing documentation or setup instructions\n\n**Passed Checks**:\n\n- What is correctly configured\n- SDK features properly implemented\n- Security measures in place\n\n**Recommendations**:\n\n- Specific suggestions for improvement\n- References to SDK documentation\n- Next steps for enhancement\n\nBe thorough but constructive. Focus on helping the developer build a functional, secure, and well-configured Agent SDK application that follows official patterns.\n",
        "plugins/agent-sdk-dev/agents/agent-sdk-verifier-ts.md": "---\nname: agent-sdk-verifier-ts\ndescription: Use this agent to verify that a TypeScript Agent SDK application is properly configured, follows SDK best practices and documentation recommendations, and is ready for deployment or testing. This agent should be invoked after a TypeScript Agent SDK app has been created or modified.\nmodel: sonnet\n---\n\nYou are a TypeScript Agent SDK application verifier. Your role is to thoroughly inspect TypeScript Agent SDK applications for correct SDK usage, adherence to official documentation recommendations, and readiness for deployment.\n\n## Verification Focus\n\nYour verification should prioritize SDK functionality and best practices over general code style. Focus on:\n\n1. **SDK Installation and Configuration**:\n\n   - Verify `@anthropic-ai/claude-agent-sdk` is installed\n   - Check that the SDK version is reasonably current (not ancient)\n   - Confirm package.json has `\"type\": \"module\"` for ES modules support\n   - Validate that Node.js version requirements are met (check package.json engines field if present)\n\n2. **TypeScript Configuration**:\n\n   - Verify tsconfig.json exists and has appropriate settings for the SDK\n   - Check module resolution settings (should support ES modules)\n   - Ensure target is modern enough for the SDK\n   - Validate that compilation settings won't break SDK imports\n\n3. **SDK Usage and Patterns**:\n\n   - Verify correct imports from `@anthropic-ai/claude-agent-sdk`\n   - Check that agents are properly initialized according to SDK docs\n   - Validate that agent configuration follows SDK patterns (system prompts, models, etc.)\n   - Ensure SDK methods are called correctly with proper parameters\n   - Check for proper handling of agent responses (streaming vs single mode)\n   - Verify permissions are configured correctly if used\n   - Validate MCP server integration if present\n\n4. **Type Safety and Compilation**:\n\n   - Run `npx tsc --noEmit` to check for type errors\n   - Verify that all SDK imports have correct type definitions\n   - Ensure the code compiles without errors\n   - Check that types align with SDK documentation\n\n5. **Scripts and Build Configuration**:\n\n   - Verify package.json has necessary scripts (build, start, typecheck)\n   - Check that scripts are correctly configured for TypeScript/ES modules\n   - Validate that the application can be built and run\n\n6. **Environment and Security**:\n\n   - Check that `.env.example` exists with `ANTHROPIC_API_KEY`\n   - Verify `.env` is in `.gitignore`\n   - Ensure API keys are not hardcoded in source files\n   - Validate proper error handling around API calls\n\n7. **SDK Best Practices** (based on official docs):\n\n   - System prompts are clear and well-structured\n   - Appropriate model selection for the use case\n   - Permissions are properly scoped if used\n   - Custom tools (MCP) are correctly integrated if present\n   - Subagents are properly configured if used\n   - Session handling is correct if applicable\n\n8. **Functionality Validation**:\n\n   - Verify the application structure makes sense for the SDK\n   - Check that agent initialization and execution flow is correct\n   - Ensure error handling covers SDK-specific errors\n   - Validate that the app follows SDK documentation patterns\n\n9. **Documentation**:\n   - Check for README or basic documentation\n   - Verify setup instructions are present if needed\n   - Ensure any custom configurations are documented\n\n## What NOT to Focus On\n\n- General code style preferences (formatting, naming conventions, etc.)\n- Whether developers use `type` vs `interface` or other TypeScript style choices\n- Unused variable naming conventions\n- General TypeScript best practices unrelated to SDK usage\n\n## Verification Process\n\n1. **Read the relevant files**:\n\n   - package.json\n   - tsconfig.json\n   - Main application files (index.ts, src/\\*, etc.)\n   - .env.example and .gitignore\n   - Any configuration files\n\n2. **Check SDK Documentation Adherence**:\n\n   - Use WebFetch to reference the official TypeScript SDK docs: https://docs.claude.com/en/api/agent-sdk/typescript\n   - Compare the implementation against official patterns and recommendations\n   - Note any deviations from documented best practices\n\n3. **Run Type Checking**:\n\n   - Execute `npx tsc --noEmit` to verify no type errors\n   - Report any compilation issues\n\n4. **Analyze SDK Usage**:\n   - Verify SDK methods are used correctly\n   - Check that configuration options match SDK documentation\n   - Validate that patterns follow official examples\n\n## Verification Report Format\n\nProvide a comprehensive report:\n\n**Overall Status**: PASS | PASS WITH WARNINGS | FAIL\n\n**Summary**: Brief overview of findings\n\n**Critical Issues** (if any):\n\n- Issues that prevent the app from functioning\n- Security problems\n- SDK usage errors that will cause runtime failures\n- Type errors or compilation failures\n\n**Warnings** (if any):\n\n- Suboptimal SDK usage patterns\n- Missing SDK features that would improve the app\n- Deviations from SDK documentation recommendations\n- Missing documentation\n\n**Passed Checks**:\n\n- What is correctly configured\n- SDK features properly implemented\n- Security measures in place\n\n**Recommendations**:\n\n- Specific suggestions for improvement\n- References to SDK documentation\n- Next steps for enhancement\n\nBe thorough but constructive. Focus on helping the developer build a functional, secure, and well-configured Agent SDK application that follows official patterns.\n",
        "plugins/agent-sdk-dev/commands/new-sdk-app.md": "---\ndescription: Create and setup a new Claude Agent SDK application\nargument-hint: [project-name]\n---\n\nYou are tasked with helping the user create a new Claude Agent SDK application. Follow these steps carefully:\n\n## Reference Documentation\n\nBefore starting, review the official documentation to ensure you provide accurate and up-to-date guidance. Use WebFetch to read these pages:\n\n1. **Start with the overview**: https://docs.claude.com/en/api/agent-sdk/overview\n2. **Based on the user's language choice, read the appropriate SDK reference**:\n   - TypeScript: https://docs.claude.com/en/api/agent-sdk/typescript\n   - Python: https://docs.claude.com/en/api/agent-sdk/python\n3. **Read relevant guides mentioned in the overview** such as:\n   - Streaming vs Single Mode\n   - Permissions\n   - Custom Tools\n   - MCP integration\n   - Subagents\n   - Sessions\n   - Any other relevant guides based on the user's needs\n\n**IMPORTANT**: Always check for and use the latest versions of packages. Use WebSearch or WebFetch to verify current versions before installation.\n\n## Gather Requirements\n\nIMPORTANT: Ask these questions one at a time. Wait for the user's response before asking the next question. This makes it easier for the user to respond.\n\nAsk the questions in this order (skip any that the user has already provided via arguments):\n\n1. **Language** (ask first): \"Would you like to use TypeScript or Python?\"\n\n   - Wait for response before continuing\n\n2. **Project name** (ask second): \"What would you like to name your project?\"\n\n   - If $ARGUMENTS is provided, use that as the project name and skip this question\n   - Wait for response before continuing\n\n3. **Agent type** (ask third, but skip if #2 was sufficiently detailed): \"What kind of agent are you building? Some examples:\n\n   - Coding agent (SRE, security review, code review)\n   - Business agent (customer support, content creation)\n   - Custom agent (describe your use case)\"\n   - Wait for response before continuing\n\n4. **Starting point** (ask fourth): \"Would you like:\n\n   - A minimal 'Hello World' example to start\n   - A basic agent with common features\n   - A specific example based on your use case\"\n   - Wait for response before continuing\n\n5. **Tooling choice** (ask fifth): Let the user know what tools you'll use, and confirm with them that these are the tools they want to use (for example, they may prefer pnpm or bun over npm). Respect the user's preferences when executing on the requirements.\n\nAfter all questions are answered, proceed to create the setup plan.\n\n## Setup Plan\n\nBased on the user's answers, create a plan that includes:\n\n1. **Project initialization**:\n\n   - Create project directory (if it doesn't exist)\n   - Initialize package manager:\n     - TypeScript: `npm init -y` and setup `package.json` with type: \"module\" and scripts (include a \"typecheck\" script)\n     - Python: Create `requirements.txt` or use `poetry init`\n   - Add necessary configuration files:\n     - TypeScript: Create `tsconfig.json` with proper settings for the SDK\n     - Python: Optionally create config files if needed\n\n2. **Check for Latest Versions**:\n\n   - BEFORE installing, use WebSearch or check npm/PyPI to find the latest version\n   - For TypeScript: Check https://www.npmjs.com/package/@anthropic-ai/claude-agent-sdk\n   - For Python: Check https://pypi.org/project/claude-agent-sdk/\n   - Inform the user which version you're installing\n\n3. **SDK Installation**:\n\n   - TypeScript: `npm install @anthropic-ai/claude-agent-sdk@latest` (or specify latest version)\n   - Python: `pip install claude-agent-sdk` (pip installs latest by default)\n   - After installation, verify the installed version:\n     - TypeScript: Check package.json or run `npm list @anthropic-ai/claude-agent-sdk`\n     - Python: Run `pip show claude-agent-sdk`\n\n4. **Create starter files**:\n\n   - TypeScript: Create an `index.ts` or `src/index.ts` with a basic query example\n   - Python: Create a `main.py` with a basic query example\n   - Include proper imports and basic error handling\n   - Use modern, up-to-date syntax and patterns from the latest SDK version\n\n5. **Environment setup**:\n\n   - Create a `.env.example` file with `ANTHROPIC_API_KEY=your_api_key_here`\n   - Add `.env` to `.gitignore`\n   - Explain how to get an API key from https://console.anthropic.com/\n\n6. **Optional: Create .claude directory structure**:\n   - Offer to create `.claude/` directory for agents, commands, and settings\n   - Ask if they want any example subagents or slash commands\n\n## Implementation\n\nAfter gathering requirements and getting user confirmation on the plan:\n\n1. Check for latest package versions using WebSearch or WebFetch\n2. Execute the setup steps\n3. Create all necessary files\n4. Install dependencies (always use latest stable versions)\n5. Verify installed versions and inform the user\n6. Create a working example based on their agent type\n7. Add helpful comments in the code explaining what each part does\n8. **VERIFY THE CODE WORKS BEFORE FINISHING**:\n   - For TypeScript:\n     - Run `npx tsc --noEmit` to check for type errors\n     - Fix ALL type errors until types pass completely\n     - Ensure imports and types are correct\n     - Only proceed when type checking passes with no errors\n   - For Python:\n     - Verify imports are correct\n     - Check for basic syntax errors\n   - **DO NOT consider the setup complete until the code verifies successfully**\n\n## Verification\n\nAfter all files are created and dependencies are installed, use the appropriate verifier agent to validate that the Agent SDK application is properly configured and ready for use:\n\n1. **For TypeScript projects**: Launch the **agent-sdk-verifier-ts** agent to validate the setup\n2. **For Python projects**: Launch the **agent-sdk-verifier-py** agent to validate the setup\n3. The agent will check SDK usage, configuration, functionality, and adherence to official documentation\n4. Review the verification report and address any issues\n\n## Getting Started Guide\n\nOnce setup is complete and verified, provide the user with:\n\n1. **Next steps**:\n\n   - How to set their API key\n   - How to run their agent:\n     - TypeScript: `npm start` or `node --loader ts-node/esm index.ts`\n     - Python: `python main.py`\n\n2. **Useful resources**:\n\n   - Link to TypeScript SDK reference: https://docs.claude.com/en/api/agent-sdk/typescript\n   - Link to Python SDK reference: https://docs.claude.com/en/api/agent-sdk/python\n   - Explain key concepts: system prompts, permissions, tools, MCP servers\n\n3. **Common next steps**:\n   - How to customize the system prompt\n   - How to add custom tools via MCP\n   - How to configure permissions\n   - How to create subagents\n\n## Important Notes\n\n- **ALWAYS USE LATEST VERSIONS**: Before installing any packages, check for the latest versions using WebSearch or by checking npm/PyPI directly\n- **VERIFY CODE RUNS CORRECTLY**:\n  - For TypeScript: Run `npx tsc --noEmit` and fix ALL type errors before finishing\n  - For Python: Verify syntax and imports are correct\n  - Do NOT consider the task complete until the code passes verification\n- Verify the installed version after installation and inform the user\n- Check the official documentation for any version-specific requirements (Node.js version, Python version, etc.)\n- Always check if directories/files already exist before creating them\n- Use the user's preferred package manager (npm, yarn, pnpm for TypeScript; pip, poetry for Python)\n- Ensure all code examples are functional and include proper error handling\n- Use modern syntax and patterns that are compatible with the latest SDK version\n- Make the experience interactive and educational\n- **ASK QUESTIONS ONE AT A TIME** - Do not ask multiple questions in a single response\n\nBegin by asking the FIRST requirement question only. Wait for the user's answer before proceeding to the next question.\n",
        "plugins/claude-opus-4-5-migration/.claude-plugin/plugin.json": "{\n  \"name\": \"claude-opus-4-5-migration\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Migrate your code and prompts from Sonnet 4.x and Opus 4.1 to Opus 4.5.\",\n  \"author\": {\n    \"name\": \"William Hu\",\n    \"email\": \"whu@anthropic.com\"\n  }\n}\n",
        "plugins/claude-opus-4-5-migration/README.md": "# Claude Opus 4.5 Migration Plugin\n\nMigrate your code and prompts from Sonnet 4.x and Opus 4.1 to Opus 4.5.\n\n## Overview\n\nThis skill updates your code and prompts to be compatible with Opus 4.5. It automates the migration process, handling model strings, beta headers, and other configuration details. If you run into any issues with Opus 4.5 after migration, you can continue using this skill to adjust your prompts.\n\n## Usage\n\n```\n\"Migrate my codebase to Opus 4.5\"\n```\n\n## Learn More\n\nRefer to our [prompting guide](https://platform.claude.com/docs/en/build-with-claude/prompt-engineering/claude-4-best-practices) for best practices on prompting Claude models.\n\n## Authors\n\nWilliam Hu (whu@anthropic.com)\n",
        "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/SKILL.md": "---\nname: claude-opus-4-5-migration\ndescription: Migrate prompts and code from Claude Sonnet 4.0, Sonnet 4.5, or Opus 4.1 to Opus 4.5. Use when the user wants to update their codebase, prompts, or API calls to use Opus 4.5. Handles model string updates and prompt adjustments for known Opus 4.5 behavioral differences. Does NOT migrate Haiku 4.5.\n---\n\n# Opus 4.5 Migration Guide\n\nOne-shot migration from Sonnet 4.0, Sonnet 4.5, or Opus 4.1 to Opus 4.5.\n\n## Migration Workflow\n\n1. Search codebase for model strings and API calls\n2. Update model strings to Opus 4.5 (see platform-specific strings below)\n3. Remove unsupported beta headers\n4. Add effort parameter set to `\"high\"` (see `references/effort.md`)\n5. Summarize all changes made\n6. Tell the user: \"If you encounter any issues with Opus 4.5, let me know and I can help adjust your prompts.\"\n\n## Model String Updates\n\nIdentify which platform the codebase uses, then replace model strings accordingly.\n\n### Unsupported Beta Headers\n\nRemove the `context-1m-2025-08-07` beta header if present—it is not yet supported with Opus 4.5. Leave a comment noting this:\n\n```python\n# Note: 1M context beta (context-1m-2025-08-07) not yet supported with Opus 4.5\n```\n\n### Target Model Strings (Opus 4.5)\n\n| Platform | Opus 4.5 Model String |\n|----------|----------------------|\n| Anthropic API (1P) | `claude-opus-4-5-20251101` |\n| AWS Bedrock | `anthropic.claude-opus-4-5-20251101-v1:0` |\n| Google Vertex AI | `claude-opus-4-5@20251101` |\n| Azure AI Foundry | `claude-opus-4-5-20251101` |\n\n### Source Model Strings to Replace\n\n| Source Model | Anthropic API (1P) | AWS Bedrock | Google Vertex AI |\n|--------------|-------------------|-------------|------------------|\n| Sonnet 4.0 | `claude-sonnet-4-20250514` | `anthropic.claude-sonnet-4-20250514-v1:0` | `claude-sonnet-4@20250514` |\n| Sonnet 4.5 | `claude-sonnet-4-5-20250929` | `anthropic.claude-sonnet-4-5-20250929-v1:0` | `claude-sonnet-4-5@20250929` |\n| Opus 4.1 | `claude-opus-4-1-20250422` | `anthropic.claude-opus-4-1-20250422-v1:0` | `claude-opus-4-1@20250422` |\n\n**Do NOT migrate**: Any Haiku models (e.g., `claude-haiku-4-5-20251001`).\n\n## Prompt Adjustments\n\nOpus 4.5 has known behavioral differences from previous models. **Only apply these fixes if the user explicitly requests them or reports a specific issue.** By default, just update model strings.\n\n**Integration guidelines**: When adding snippets, don't just append them to prompts. Integrate them thoughtfully:\n- Use XML tags (e.g., `<code_guidelines>`, `<tool_usage>`) to organize additions\n- Match the style and structure of the existing prompt\n- Place snippets in logical locations (e.g., coding guidelines near other coding instructions)\n- If the prompt already uses XML tags, add new content within appropriate existing tags or create consistent new ones\n\n### 1. Tool Overtriggering\n\nOpus 4.5 is more responsive to system prompts. Aggressive language that prevented undertriggering on previous models may now cause overtriggering.\n\n**Apply if**: User reports tools being called too frequently or unnecessarily.\n\n**Find and soften**:\n- `CRITICAL:` → remove or soften\n- `You MUST...` → `You should...`\n- `ALWAYS do X` → `Do X`\n- `NEVER skip...` → `Don't skip...`\n- `REQUIRED` → remove or soften\n\nOnly apply to tool-triggering instructions. Leave other uses of emphasis alone.\n\n### 2. Over-Engineering Prevention\n\nOpus 4.5 tends to create extra files, add unnecessary abstractions, or build unrequested flexibility.\n\n**Apply if**: User reports unwanted files, excessive abstraction, or unrequested features. Add the snippet from `references/prompt-snippets.md`.\n\n### 3. Code Exploration\n\nOpus 4.5 can be overly conservative about exploring code, proposing solutions without reading files.\n\n**Apply if**: User reports the model proposing fixes without inspecting relevant code. Add the snippet from `references/prompt-snippets.md`.\n\n### 4. Frontend Design\n\n**Apply if**: User requests improved frontend design quality or reports generic-looking outputs.\n\nAdd the frontend aesthetics snippet from `references/prompt-snippets.md`.\n\n### 5. Thinking Sensitivity\n\nWhen extended thinking is not enabled (the default), Opus 4.5 is particularly sensitive to the word \"think\" and its variants. Extended thinking is enabled only if the API request contains a `thinking` parameter.\n\n**Apply if**: User reports issues related to \"thinking\" while extended thinking is not enabled (no `thinking` parameter in request).\n\nReplace \"think\" with alternatives like \"consider,\" \"believe,\" or \"evaluate.\"\n\n## Reference\n\nSee `references/prompt-snippets.md` for the full text of each snippet to add.\n\nSee `references/effort.md` for configuring the effort parameter (only if user requests it).\n",
        "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/references/effort.md": "# Effort Parameter (Beta)\n\n**Add effort set to `\"high\"` during migration.** This is the default configuration for best performance with Opus 4.5.\n\n## Overview\n\nEffort controls how eagerly Claude spends tokens. It affects all tokens: thinking, text responses, and function calls.\n\n| Effort | Use Case |\n|--------|----------|\n| `high` | Best performance, deep reasoning (default) |\n| `medium` | Balance of cost/latency vs. performance |\n| `low` | Simple, high-volume queries; significant token savings |\n\n## Implementation\n\nRequires beta flag `effort-2025-11-24` in API calls.\n\n**Python SDK:**\n```python\nresponse = client.messages.create(\n    model=\"claude-opus-4-5-20251101\",\n    max_tokens=1024,\n    betas=[\"effort-2025-11-24\"],\n    output_config={\n        \"effort\": \"high\"  # or \"medium\" or \"low\"\n    },\n    messages=[...]\n)\n```\n\n**TypeScript SDK:**\n```typescript\nconst response = await client.messages.create({\n  model: \"claude-opus-4-5-20251101\",\n  max_tokens: 1024,\n  betas: [\"effort-2025-11-24\"],\n  output_config: {\n    effort: \"high\"  // or \"medium\" or \"low\"\n  },\n  messages: [...]\n});\n```\n\n**Raw API:**\n```json\n{\n  \"model\": \"claude-opus-4-5-20251101\",\n  \"max_tokens\": 1024,\n  \"anthropic-beta\": \"effort-2025-11-24\",\n  \"output_config\": {\n    \"effort\": \"high\"\n  },\n  \"messages\": [...]\n}\n```\n\n## Effort vs. Thinking Budget\n\nEffort is independent of thinking budget:\n\n- High effort + no thinking = more tokens, but no thinking tokens\n- High effort + 32k thinking = more tokens, but thinking capped at 32k\n\n## Recommendations\n\n1. First determine effort level, then set thinking budget\n2. Best performance: high effort + high thinking budget\n3. Cost/latency optimization: medium effort\n4. Simple high-volume queries: low effort\n",
        "plugins/claude-opus-4-5-migration/skills/claude-opus-4-5-migration/references/prompt-snippets.md": "# Prompt Snippets for Opus 4.5\n\nOnly apply these snippets if the user explicitly requests them or reports a specific issue. By default, the migration should only update model strings.\n\n## 1. Tool Overtriggering\n\n**Problem**: Prompts designed to reduce undertriggering on previous models may cause Opus 4.5 to overtrigger.\n\n**When to add**: User reports tools being called too frequently or unnecessarily.\n\n**Solution**: Replace aggressive language with normal phrasing.\n\n| Before | After |\n|--------|-------|\n| `CRITICAL: You MUST use this tool when...` | `Use this tool when...` |\n| `ALWAYS call the search function before...` | `Call the search function before...` |\n| `You are REQUIRED to...` | `You should...` |\n| `NEVER skip this step` | `Don't skip this step` |\n\n## 2. Over-Engineering Prevention\n\n**Problem**: Opus 4.5 may create extra files, add unnecessary abstractions, or build unrequested flexibility.\n\n**When to add**: User reports unwanted files, excessive abstraction, or unrequested features.\n\n**Snippet to add to system prompt**:\n\n```\n- Avoid over-engineering. Only make changes that are directly requested or clearly necessary. Keep solutions simple and focused.\n- Don't add features, refactor code, or make \"improvements\" beyond what was asked. A bug fix doesn't need surrounding code cleaned up. A simple feature doesn't need extra configurability.\n- Don't add error handling, fallbacks, or validation for scenarios that can't happen. Trust internal code and framework guarantees. Only validate at system boundaries (user input, external APIs). Don't use backwards-compatibility shims when you can just change the code.\n- Don't create helpers, utilities, or abstractions for one-time operations. Don't design for hypothetical future requirements. The right amount of complexity is the minimum needed for the current task. Reuse existing abstractions where possible and follow the DRY principle.\n```\n\n## 3. Code Exploration\n\n**Problem**: Opus 4.5 may propose solutions without reading code or make assumptions about unread files.\n\n**When to add**: User reports the model proposing fixes without inspecting relevant code.\n\n**Snippet to add to system prompt**:\n\n```\nALWAYS read and understand relevant files before proposing code edits. Do not speculate about code you have not inspected. If the user references a specific file/path, you MUST open and inspect it before explaining or proposing fixes. Be rigorous and persistent in searching code for key facts. Thoroughly review the style, conventions, and abstractions of the codebase before implementing new features or abstractions.\n```\n\n## 4. Frontend Design Quality\n\n**Problem**: Default frontend outputs may look generic (\"AI slop\" aesthetic).\n\n**When to add**: User requests improved frontend design quality or reports generic-looking outputs.\n\n**Snippet to add to system prompt**:\n\n```xml\n<frontend_aesthetics>\nYou tend to converge toward generic, \"on distribution\" outputs. In frontend design, this creates what users call the \"AI slop\" aesthetic. Avoid this: make creative, distinctive frontends that surprise and delight.\n\nFocus on:\n- Typography: Choose fonts that are beautiful, unique, and interesting. Avoid generic fonts like Arial and Inter; opt instead for distinctive choices that elevate the frontend's aesthetics.\n- Color & Theme: Commit to a cohesive aesthetic. Use CSS variables for consistency. Dominant colors with sharp accents outperform timid, evenly-distributed palettes. Draw from IDE themes and cultural aesthetics for inspiration.\n- Motion: Use animations for effects and micro-interactions. Prioritize CSS-only solutions for HTML. Use Motion library for React when available. Focus on high-impact moments: one well-orchestrated page load with staggered reveals (animation-delay) creates more delight than scattered micro-interactions.\n- Backgrounds: Create atmosphere and depth rather than defaulting to solid colors. Layer CSS gradients, use geometric patterns, or add contextual effects that match the overall aesthetic.\n\nAvoid generic AI-generated aesthetics:\n- Overused font families (Inter, Roboto, Arial, system fonts)\n- Clichéd color schemes (particularly purple gradients on white backgrounds)\n- Predictable layouts and component patterns\n- Cookie-cutter design that lacks context-specific character\n\nInterpret creatively and make unexpected choices that feel genuinely designed for the context. Vary between light and dark themes, different fonts, different aesthetics. You still tend to converge on common choices (Space Grotesk, for example) across generations. Avoid this: it is critical that you think outside the box!\n</frontend_aesthetics>\n```\n\n## 5. Thinking Sensitivity\n\n**Problem**: When extended thinking is not enabled (the default), Opus 4.5 is particularly sensitive to the word \"think\" and its variants.\n\nExtended thinking is not enabled by default. It is only enabled if the API request contains a `thinking` parameter:\n```json\n\"thinking\": {\n    \"type\": \"enabled\",\n    \"budget_tokens\": 10000\n}\n```\n\n**When to apply**: User reports issues related to \"thinking\" while extended thinking is not enabled (no `thinking` parameter in their request).\n\n**Solution**: Replace \"think\" with alternative words.\n\n| Before | After |\n|--------|-------|\n| `think about` | `consider` |\n| `think through` | `evaluate` |\n| `I think` | `I believe` |\n| `think carefully` | `consider carefully` |\n| `thinking` | `reasoning` / `considering` |\n\n## Usage Guidelines\n\n1. **Integrate thoughtfully** - Don't just append snippets; weave them into the existing prompt structure\n2. **Use XML tags** - Wrap additions in descriptive tags (e.g., `<coding_guidelines>`, `<tool_behavior>`) that match or complement existing prompt structure\n3. **Match prompt style** - If the prompt is concise, trim the snippet; if verbose, keep full detail\n4. **Place logically** - Put coding snippets near other coding instructions, tool guidance near tool definitions, etc.\n5. **Preserve existing content** - Insert snippets without removing functional content\n6. **Summarize changes** - After migration, list all model string updates and prompt modifications made\n",
        "plugins/code-review/.claude-plugin/plugin.json": "{\n  \"name\": \"code-review\",\n  \"description\": \"Automated code review for pull requests using multiple specialized agents with confidence-based scoring\",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"Boris Cherny\",\n    \"email\": \"boris@anthropic.com\"\n  }\n}\n\n",
        "plugins/code-review/README.md": "# Code Review Plugin\n\nAutomated code review for pull requests using multiple specialized agents with confidence-based scoring to filter false positives.\n\n## Overview\n\nThe Code Review Plugin automates pull request review by launching multiple agents in parallel to independently audit changes from different perspectives. It uses confidence scoring to filter out false positives, ensuring only high-quality, actionable feedback is posted.\n\n## Commands\n\n### `/code-review`\n\nPerforms automated code review on a pull request using multiple specialized agents.\n\n**What it does:**\n1. Checks if review is needed (skips closed, draft, trivial, or already-reviewed PRs)\n2. Gathers relevant CLAUDE.md guideline files from the repository\n3. Summarizes the pull request changes\n4. Launches 4 parallel agents to independently review:\n   - **Agents #1 & #2**: Audit for CLAUDE.md compliance\n   - **Agent #3**: Scan for obvious bugs in changes\n   - **Agent #4**: Analyze git blame/history for context-based issues\n5. Scores each issue 0-100 for confidence level\n6. Filters out issues below 80 confidence threshold\n7. Outputs review (to terminal by default, or as PR comment with `--comment` flag)\n\n**Usage:**\n```bash\n/code-review [--comment]\n```\n\n**Options:**\n- `--comment`: Post the review as a comment on the pull request (default: outputs to terminal only)\n\n**Example workflow:**\n```bash\n# On a PR branch, run locally (outputs to terminal):\n/code-review\n\n# Post review as PR comment:\n/code-review --comment\n\n# Claude will:\n# - Launch 4 review agents in parallel\n# - Score each issue for confidence\n# - Output issues ≥80 confidence (to terminal or PR depending on flag)\n# - Skip if no high-confidence issues found\n```\n\n**Features:**\n- Multiple independent agents for comprehensive review\n- Confidence-based scoring reduces false positives (threshold: 80)\n- CLAUDE.md compliance checking with explicit guideline verification\n- Bug detection focused on changes (not pre-existing issues)\n- Historical context analysis via git blame\n- Automatic skipping of closed, draft, or already-reviewed PRs\n- Links directly to code with full SHA and line ranges\n\n**Review comment format:**\n```markdown\n## Code review\n\nFound 3 issues:\n\n1. Missing error handling for OAuth callback (CLAUDE.md says \"Always handle OAuth errors\")\n\nhttps://github.com/owner/repo/blob/abc123.../src/auth.ts#L67-L72\n\n2. Memory leak: OAuth state not cleaned up (bug due to missing cleanup in finally block)\n\nhttps://github.com/owner/repo/blob/abc123.../src/auth.ts#L88-L95\n\n3. Inconsistent naming pattern (src/conventions/CLAUDE.md says \"Use camelCase for functions\")\n\nhttps://github.com/owner/repo/blob/abc123.../src/utils.ts#L23-L28\n```\n\n**Confidence scoring:**\n- **0**: Not confident, false positive\n- **25**: Somewhat confident, might be real\n- **50**: Moderately confident, real but minor\n- **75**: Highly confident, real and important\n- **100**: Absolutely certain, definitely real\n\n**False positives filtered:**\n- Pre-existing issues not introduced in PR\n- Code that looks like a bug but isn't\n- Pedantic nitpicks\n- Issues linters will catch\n- General quality issues (unless in CLAUDE.md)\n- Issues with lint ignore comments\n\n## Installation\n\nThis plugin is included in the Claude Code repository. The command is automatically available when using Claude Code.\n\n## Best Practices\n\n### Using `/code-review`\n- Maintain clear CLAUDE.md files for better compliance checking\n- Trust the 80+ confidence threshold - false positives are filtered\n- Run on all non-trivial pull requests\n- Review agent findings as a starting point for human review\n- Update CLAUDE.md based on recurring review patterns\n\n### When to use\n- All pull requests with meaningful changes\n- PRs touching critical code paths\n- PRs from multiple contributors\n- PRs where guideline compliance matters\n\n### When not to use\n- Closed or draft PRs (automatically skipped anyway)\n- Trivial automated PRs (automatically skipped)\n- Urgent hotfixes requiring immediate merge\n- PRs already reviewed (automatically skipped)\n\n## Workflow Integration\n\n### Standard PR review workflow:\n```bash\n# Create PR with changes\n# Run local review (outputs to terminal)\n/code-review\n\n# Review the automated feedback\n# Make any necessary fixes\n\n# Optionally post as PR comment\n/code-review --comment\n\n# Merge when ready\n```\n\n### As part of CI/CD:\n```bash\n# Trigger on PR creation or update\n# Use --comment flag to post review comments\n/code-review --comment\n# Skip if review already exists\n```\n\n## Requirements\n\n- Git repository with GitHub integration\n- GitHub CLI (`gh`) installed and authenticated\n- CLAUDE.md files (optional but recommended for guideline checking)\n\n## Troubleshooting\n\n### Review takes too long\n\n**Issue**: Agents are slow on large PRs\n\n**Solution**:\n- Normal for large changes - agents run in parallel\n- 4 independent agents ensure thoroughness\n- Consider splitting large PRs into smaller ones\n\n### Too many false positives\n\n**Issue**: Review flags issues that aren't real\n\n**Solution**:\n- Default threshold is 80 (already filters most false positives)\n- Make CLAUDE.md more specific about what matters\n- Consider if the flagged issue is actually valid\n\n### No review comment posted\n\n**Issue**: `/code-review` runs but no comment appears\n\n**Solution**:\nCheck if:\n- PR is closed (reviews skipped)\n- PR is draft (reviews skipped)\n- PR is trivial/automated (reviews skipped)\n- PR already has review (reviews skipped)\n- No issues scored ≥80 (no comment needed)\n\n### Link formatting broken\n\n**Issue**: Code links don't render correctly in GitHub\n\n**Solution**:\nLinks must follow this exact format:\n```\nhttps://github.com/owner/repo/blob/[full-sha]/path/file.ext#L[start]-L[end]\n```\n- Must use full SHA (not abbreviated)\n- Must use `#L` notation\n- Must include line range with at least 1 line of context\n\n### GitHub CLI not working\n\n**Issue**: `gh` commands fail\n\n**Solution**:\n- Install GitHub CLI: `brew install gh` (macOS) or see [GitHub CLI installation](https://cli.github.com/)\n- Authenticate: `gh auth login`\n- Verify repository has GitHub remote\n\n## Tips\n\n- **Write specific CLAUDE.md files**: Clear guidelines = better reviews\n- **Include context in PRs**: Helps agents understand intent\n- **Use confidence scores**: Issues ≥80 are usually correct\n- **Iterate on guidelines**: Update CLAUDE.md based on patterns\n- **Review automatically**: Set up as part of PR workflow\n- **Trust the filtering**: Threshold prevents noise\n\n## Configuration\n\n### Adjusting confidence threshold\n\nThe default threshold is 80. To adjust, modify the command file at `commands/code-review.md`:\n```markdown\nFilter out any issues with a score less than 80.\n```\n\nChange `80` to your preferred threshold (0-100).\n\n### Customizing review focus\n\nEdit `commands/code-review.md` to add or modify agent tasks:\n- Add security-focused agents\n- Add performance analysis agents\n- Add accessibility checking agents\n- Add documentation quality checks\n\n## Technical Details\n\n### Agent architecture\n- **2x CLAUDE.md compliance agents**: Redundancy for guideline checks\n- **1x bug detector**: Focused on obvious bugs in changes only\n- **1x history analyzer**: Context from git blame and history\n- **Nx confidence scorers**: One per issue for independent scoring\n\n### Scoring system\n- Each issue independently scored 0-100\n- Scoring considers evidence strength and verification\n- Threshold (default 80) filters low-confidence issues\n- For CLAUDE.md issues: verifies guideline explicitly mentions it\n\n### GitHub integration\nUses `gh` CLI for:\n- Viewing PR details and diffs\n- Fetching repository data\n- Reading git blame and history\n- Posting review comments\n\n## Author\n\nBoris Cherny (boris@anthropic.com)\n\n## Version\n\n1.0.0\n",
        "plugins/code-review/commands/code-review.md": "---\nallowed-tools: Bash(gh issue view:*), Bash(gh search:*), Bash(gh issue list:*), Bash(gh pr comment:*), Bash(gh pr diff:*), Bash(gh pr view:*), Bash(gh pr list:*), mcp__github_inline_comment__create_inline_comment\ndescription: Code review a pull request\n---\n\nProvide a code review for the given pull request.\n\n**Agent assumptions (applies to all agents and subagents):**\n- All tools are functional and will work without error. Do not test tools or make exploratory calls. Make sure this is clear to every subagent that is launched.\n- Only call a tool if it is required to complete the task. Every tool call should have a clear purpose.\n\nTo do this, follow these steps precisely:\n\n1. Launch a haiku agent to check if any of the following are true:\n   - The pull request is closed\n   - The pull request is a draft\n   - The pull request does not need code review (e.g. automated PR, trivial change that is obviously correct)\n   - Claude has already commented on this PR (check `gh pr view <PR> --comments` for comments left by claude)\n\n   If any condition is true, stop and do not proceed.\n\nNote: Still review Claude generated PR's.\n\n2. Launch a haiku agent to return a list of file paths (not their contents) for all relevant CLAUDE.md files including:\n   - The root CLAUDE.md file, if it exists\n   - Any CLAUDE.md files in directories containing files modified by the pull request\n\n3. Launch a sonnet agent to view the pull request and return a summary of the changes\n\n4. Launch 4 agents in parallel to independently review the changes. Each agent should return the list of issues, where each issue includes a description and the reason it was flagged (e.g. \"CLAUDE.md adherence\", \"bug\"). The agents should do the following:\n\n   Agents 1 + 2: CLAUDE.md compliance sonnet agents\n   Audit changes for CLAUDE.md compliance in parallel. Note: When evaluating CLAUDE.md compliance for a file, you should only consider CLAUDE.md files that share a file path with the file or parents.\n\n   Agent 3: Opus bug agent (parallel subagent with agent 4)\n   Scan for obvious bugs. Focus only on the diff itself without reading extra context. Flag only significant bugs; ignore nitpicks and likely false positives. Do not flag issues that you cannot validate without looking at context outside of the git diff.\n\n   Agent 4: Opus bug agent (parallel subagent with agent 3)\n   Look for problems that exist in the introduced code. This could be security issues, incorrect logic, etc. Only look for issues that fall within the changed code.\n\n   **CRITICAL: We only want HIGH SIGNAL issues.** Flag issues where:\n   - The code will fail to compile or parse (syntax errors, type errors, missing imports, unresolved references)\n   - The code will definitely produce wrong results regardless of inputs (clear logic errors)\n   - Clear, unambiguous CLAUDE.md violations where you can quote the exact rule being broken\n\n   Do NOT flag:\n   - Code style or quality concerns\n   - Potential issues that depend on specific inputs or state\n   - Subjective suggestions or improvements\n\n   If you are not certain an issue is real, do not flag it. False positives erode trust and waste reviewer time.\n\n   In addition to the above, each subagent should be told the PR title and description. This will help provide context regarding the author's intent.\n\n5. For each issue found in the previous step by agents 3 and 4, launch parallel subagents to validate the issue. These subagents should get the PR title and description along with a description of the issue. The agent's job is to review the issue to validate that the stated issue is truly an issue with high confidence. For example, if an issue such as \"variable is not defined\" was flagged, the subagent's job would be to validate that is actually true in the code. Another example would be CLAUDE.md issues. The agent should validate that the CLAUDE.md rule that was violated is scoped for this file and is actually violated. Use Opus subagents for bugs and logic issues, and sonnet agents for CLAUDE.md violations.\n\n6. Filter out any issues that were not validated in step 5. This step will give us our list of high signal issues for our review.\n\n7. If issues were found, skip to step 8 to post inline comments directly.\n\n   If NO issues were found, post a summary comment using `gh pr comment` (if `--comment` argument is provided):\n   \"No issues found. Checked for bugs and CLAUDE.md compliance.\"\n\n8. Create a list of all comments that you plan on leaving. This is only for you to make sure you are comfortable with the comments. Do not post this list anywhere.\n\n9. Post inline comments for each issue using `mcp__github_inline_comment__create_inline_comment`. For each comment:\n   - Provide a brief description of the issue\n   - For small, self-contained fixes, include a committable suggestion block\n   - For larger fixes (6+ lines, structural changes, or changes spanning multiple locations), describe the issue and suggested fix without a suggestion block\n   - Never post a committable suggestion UNLESS committing the suggestion fixes the issue entirely. If follow up steps are required, do not leave a committable suggestion.\n\n   **IMPORTANT: Only post ONE comment per unique issue. Do not post duplicate comments.**\n\nUse this list when evaluating issues in Steps 4 and 5 (these are false positives, do NOT flag):\n\n- Pre-existing issues\n- Something that appears to be a bug but is actually correct\n- Pedantic nitpicks that a senior engineer would not flag\n- Issues that a linter will catch (do not run the linter to verify)\n- General code quality concerns (e.g., lack of test coverage, general security issues) unless explicitly required in CLAUDE.md\n- Issues mentioned in CLAUDE.md but explicitly silenced in the code (e.g., via a lint ignore comment)\n\nNotes:\n\n- Use gh CLI to interact with GitHub (e.g., fetch pull requests, create comments). Do not use web fetch.\n- Create a todo list before starting.\n- You must cite and link each issue in inline comments (e.g., if referring to a CLAUDE.md, include a link to it).\n- If no issues are found, post a comment with the following format:\n\n---\n\n## Code review\n\nNo issues found. Checked for bugs and CLAUDE.md compliance.\n\n---\n\n- When linking to code in inline comments, follow the following format precisely, otherwise the Markdown preview won't render correctly: https://github.com/anthropics/claude-code/blob/c21d3c10bc8e898b7ac1a2d745bdc9bc4e423afe/package.json#L10-L15\n  - Requires full git sha\n  - You must provide the full sha. Commands like `https://github.com/owner/repo/blob/$(git rev-parse HEAD)/foo/bar` will not work, since your comment will be directly rendered in Markdown.\n  - Repo name must match the repo you're code reviewing\n  - # sign after the file name\n  - Line range format is L[start]-L[end]\n  - Provide at least 1 line of context before and after, centered on the line you are commenting about (eg. if you are commenting about lines 5-6, you should link to `L4-7`)\n",
        "plugins/commit-commands/.claude-plugin/plugin.json": "{\n  \"name\": \"commit-commands\",\n  \"description\": \"Streamline your git workflow with simple commands for committing, pushing, and creating pull requests\",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n\n",
        "plugins/commit-commands/README.md": "# Commit Commands Plugin\n\nStreamline your git workflow with simple commands for committing, pushing, and creating pull requests.\n\n## Overview\n\nThe Commit Commands Plugin automates common git operations, reducing context switching and manual command execution. Instead of running multiple git commands, use a single slash command to handle your entire workflow.\n\n## Commands\n\n### `/commit`\n\nCreates a git commit with an automatically generated commit message based on staged and unstaged changes.\n\n**What it does:**\n1. Analyzes current git status\n2. Reviews both staged and unstaged changes\n3. Examines recent commit messages to match your repository's style\n4. Drafts an appropriate commit message\n5. Stages relevant files\n6. Creates the commit\n\n**Usage:**\n```bash\n/commit\n```\n\n**Example workflow:**\n```bash\n# Make some changes to your code\n# Then simply run:\n/commit\n\n# Claude will:\n# - Review your changes\n# - Stage the files\n# - Create a commit with an appropriate message\n# - Show you the commit status\n```\n\n**Features:**\n- Automatically drafts commit messages that match your repo's style\n- Follows conventional commit practices\n- Avoids committing files with secrets (.env, credentials.json)\n- Includes Claude Code attribution in commit message\n\n### `/commit-push-pr`\n\nComplete workflow command that commits, pushes, and creates a pull request in one step.\n\n**What it does:**\n1. Creates a new branch (if currently on main)\n2. Stages and commits changes with an appropriate message\n3. Pushes the branch to origin\n4. Creates a pull request using `gh pr create`\n5. Provides the PR URL\n\n**Usage:**\n```bash\n/commit-push-pr\n```\n\n**Example workflow:**\n```bash\n# Make your changes\n# Then run:\n/commit-push-pr\n\n# Claude will:\n# - Create a feature branch (if needed)\n# - Commit your changes\n# - Push to remote\n# - Open a PR with summary and test plan\n# - Give you the PR URL to review\n```\n\n**Features:**\n- Analyzes all commits in the branch (not just the latest)\n- Creates comprehensive PR descriptions with:\n  - Summary of changes (1-3 bullet points)\n  - Test plan checklist\n  - Claude Code attribution\n- Handles branch creation automatically\n- Uses GitHub CLI (`gh`) for PR creation\n\n**Requirements:**\n- GitHub CLI (`gh`) must be installed and authenticated\n- Repository must have a remote named `origin`\n\n### `/clean_gone`\n\nCleans up local branches that have been deleted from the remote repository.\n\n**What it does:**\n1. Lists all local branches to identify [gone] status\n2. Identifies and removes worktrees associated with [gone] branches\n3. Deletes all branches marked as [gone]\n4. Provides feedback on removed branches\n\n**Usage:**\n```bash\n/clean_gone\n```\n\n**Example workflow:**\n```bash\n# After PRs are merged and remote branches are deleted\n/clean_gone\n\n# Claude will:\n# - Find all branches marked as [gone]\n# - Remove any associated worktrees\n# - Delete the stale local branches\n# - Report what was cleaned up\n```\n\n**Features:**\n- Handles both regular branches and worktree branches\n- Safely removes worktrees before deleting branches\n- Shows clear feedback about what was removed\n- Reports if no cleanup was needed\n\n**When to use:**\n- After merging and deleting remote branches\n- When your local branch list is cluttered with stale branches\n- During regular repository maintenance\n\n## Installation\n\nThis plugin is included in the Claude Code repository. The commands are automatically available when using Claude Code.\n\n## Best Practices\n\n### Using `/commit`\n- Review the staged changes before committing\n- Let Claude analyze your changes and match your repo's commit style\n- Trust the automated message, but verify it's accurate\n- Use for routine commits during development\n\n### Using `/commit-push-pr`\n- Use when you're ready to create a PR\n- Ensure all your changes are complete and tested\n- Claude will analyze the full branch history for the PR description\n- Review the PR description and edit if needed\n- Use when you want to minimize context switching\n\n### Using `/clean_gone`\n- Run periodically to keep your branch list clean\n- Especially useful after merging multiple PRs\n- Safe to run - only removes branches already deleted remotely\n- Helps maintain a tidy local repository\n\n## Workflow Integration\n\n### Quick commit workflow:\n```bash\n# Write code\n/commit\n# Continue development\n```\n\n### Feature branch workflow:\n```bash\n# Develop feature across multiple commits\n/commit  # First commit\n# More changes\n/commit  # Second commit\n# Ready to create PR\n/commit-push-pr\n```\n\n### Maintenance workflow:\n```bash\n# After several PRs are merged\n/clean_gone\n# Clean workspace ready for next feature\n```\n\n## Requirements\n\n- Git must be installed and configured\n- For `/commit-push-pr`: GitHub CLI (`gh`) must be installed and authenticated\n- Repository must be a git repository with a remote\n\n## Troubleshooting\n\n### `/commit` creates empty commit\n\n**Issue**: No changes to commit\n\n**Solution**:\n- Ensure you have unstaged or staged changes\n- Run `git status` to verify changes exist\n\n### `/commit-push-pr` fails to create PR\n\n**Issue**: `gh pr create` command fails\n\n**Solution**:\n- Install GitHub CLI: `brew install gh` (macOS) or see [GitHub CLI installation](https://cli.github.com/)\n- Authenticate: `gh auth login`\n- Ensure repository has a GitHub remote\n\n### `/clean_gone` doesn't find branches\n\n**Issue**: No branches marked as [gone]\n\n**Solution**:\n- Run `git fetch --prune` to update remote tracking\n- Branches must be deleted from the remote to show as [gone]\n\n## Tips\n\n- **Combine with other tools**: Use `/commit` during development, then `/commit-push-pr` when ready\n- **Let Claude draft messages**: The commit message analysis learns from your repo's style\n- **Regular cleanup**: Run `/clean_gone` weekly to maintain a clean branch list\n- **Review before pushing**: Always review the commit message and changes before pushing\n\n## Author\n\nAnthropic (support@anthropic.com)\n\n## Version\n\n1.0.0\n",
        "plugins/commit-commands/commands/clean_gone.md": "---\ndescription: Cleans up all git branches marked as [gone] (branches that have been deleted on the remote but still exist locally), including removing associated worktrees.\n---\n\n## Your Task\n\nYou need to execute the following bash commands to clean up stale local branches that have been deleted from the remote repository.\n\n## Commands to Execute\n\n1. **First, list branches to identify any with [gone] status**\n   Execute this command:\n   ```bash\n   git branch -v\n   ```\n   \n   Note: Branches with a '+' prefix have associated worktrees and must have their worktrees removed before deletion.\n\n2. **Next, identify worktrees that need to be removed for [gone] branches**\n   Execute this command:\n   ```bash\n   git worktree list\n   ```\n\n3. **Finally, remove worktrees and delete [gone] branches (handles both regular and worktree branches)**\n   Execute this command:\n   ```bash\n   # Process all [gone] branches, removing '+' prefix if present\n   git branch -v | grep '\\[gone\\]' | sed 's/^[+* ]//' | awk '{print $1}' | while read branch; do\n     echo \"Processing branch: $branch\"\n     # Find and remove worktree if it exists\n     worktree=$(git worktree list | grep \"\\\\[$branch\\\\]\" | awk '{print $1}')\n     if [ ! -z \"$worktree\" ] && [ \"$worktree\" != \"$(git rev-parse --show-toplevel)\" ]; then\n       echo \"  Removing worktree: $worktree\"\n       git worktree remove --force \"$worktree\"\n     fi\n     # Delete the branch\n     echo \"  Deleting branch: $branch\"\n     git branch -D \"$branch\"\n   done\n   ```\n\n## Expected Behavior\n\nAfter executing these commands, you will:\n\n- See a list of all local branches with their status\n- Identify and remove any worktrees associated with [gone] branches\n- Delete all branches marked as [gone]\n- Provide feedback on which worktrees and branches were removed\n\nIf no branches are marked as [gone], report that no cleanup was needed.\n\n",
        "plugins/commit-commands/commands/commit-push-pr.md": "---\nallowed-tools: Bash(git checkout --branch:*), Bash(git add:*), Bash(git status:*), Bash(git push:*), Bash(git commit:*), Bash(gh pr create:*)\ndescription: Commit, push, and open a PR\n---\n\n## Context\n\n- Current git status: !`git status`\n- Current git diff (staged and unstaged changes): !`git diff HEAD`\n- Current branch: !`git branch --show-current`\n\n## Your task\n\nBased on the above changes:\n\n1. Create a new branch if on main\n2. Create a single commit with an appropriate message\n3. Push the branch to origin\n4. Create a pull request using `gh pr create`\n5. You have the capability to call multiple tools in a single response. You MUST do all of the above in a single message. Do not use any other tools or do anything else. Do not send any other text or messages besides these tool calls.\n",
        "plugins/commit-commands/commands/commit.md": "---\nallowed-tools: Bash(git add:*), Bash(git status:*), Bash(git commit:*)\ndescription: Create a git commit\n---\n\n## Context\n\n- Current git status: !`git status`\n- Current git diff (staged and unstaged changes): !`git diff HEAD`\n- Current branch: !`git branch --show-current`\n- Recent commits: !`git log --oneline -10`\n\n## Your task\n\nBased on the above changes, create a single git commit.\n\nYou have the capability to call multiple tools in a single response. Stage and create the commit using a single message. Do not use any other tools or do anything else. Do not send any other text or messages besides these tool calls.\n",
        "plugins/explanatory-output-style/.claude-plugin/plugin.json": "{\n  \"name\": \"explanatory-output-style\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Adds educational insights about implementation choices and codebase patterns (mimics the deprecated Explanatory output style)\",\n  \"author\": {\n    \"name\": \"Dickson Tsai\",\n    \"email\": \"dickson@anthropic.com\"\n  }\n}\n",
        "plugins/explanatory-output-style/README.md": "# Explanatory Output Style Plugin\n\nThis plugin recreates the deprecated Explanatory output style as a SessionStart\nhook.\n\nWARNING: Do not install this plugin unless you are fine with incurring the token\ncost of this plugin's additional instructions and output.\n\n## What it does\n\nWhen enabled, this plugin automatically adds instructions at the start of each\nsession that encourage Claude to:\n\n1. Provide educational insights about implementation choices\n2. Explain codebase patterns and decisions\n3. Balance task completion with learning opportunities\n\n## How it works\n\nThe plugin uses a SessionStart hook to inject additional context into every\nsession. This context instructs Claude to provide brief educational explanations\nbefore and after writing code, formatted as:\n\n```\n`★ Insight ─────────────────────────────────────`\n[2-3 key educational points]\n`─────────────────────────────────────────────────`\n```\n\n## Usage\n\nOnce installed, the plugin activates automatically at the start of every\nsession. No additional configuration is needed.\n\nThe insights focus on:\n\n- Specific implementation choices for your codebase\n- Patterns and conventions in your code\n- Trade-offs and design decisions\n- Codebase-specific details rather than general programming concepts\n\n## Migration from Output Styles\n\nThis plugin replaces the deprecated \"Explanatory\" output style setting. If you\npreviously used:\n\n```json\n{\n  \"outputStyle\": \"Explanatory\"\n}\n```\n\nYou can now achieve the same behavior by installing this plugin instead.\n\nMore generally, this SessionStart hook pattern is roughly equivalent to\nCLAUDE.md, but it is more flexible and allows for distribution through plugins.\n\nNote: Output styles that involve tasks besides software development, are better\nexpressed as\n[subagents](https://docs.claude.com/en/docs/claude-code/sub-agents), not as\nSessionStart hooks. Subagents change the system prompt while SessionStart hooks\nadd to the default system prompt.\n\n## Managing changes\n\n- Disable the plugin - keep the code installed on your device\n- Uninstall the plugin - remove the code from your device\n- Update the plugin - create a local copy of this plugin to personalize this\n  plugin\n  - Hint: Ask Claude to read\n    https://docs.claude.com/en/docs/claude-code/plugins.md and set it up for\n    you!\n",
        "plugins/explanatory-output-style/hooks/hooks.json": "{\n  \"description\": \"Explanatory mode hook that adds educational insights instructions\",\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks-handlers/session-start.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/feature-dev/.claude-plugin/plugin.json": "{\n  \"name\": \"feature-dev\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Comprehensive feature development workflow with specialized agents for codebase exploration, architecture design, and quality review\",\n  \"author\": {\n    \"name\": \"Sid Bidasaria\",\n    \"email\": \"sbidasaria@anthropic.com\"\n  }\n}\n",
        "plugins/feature-dev/README.md": "# Feature Development Plugin\n\nA comprehensive, structured workflow for feature development with specialized agents for codebase exploration, architecture design, and quality review.\n\n## Overview\n\nThe Feature Development Plugin provides a systematic 7-phase approach to building new features. Instead of jumping straight into code, it guides you through understanding the codebase, asking clarifying questions, designing architecture, and ensuring quality—resulting in better-designed features that integrate seamlessly with your existing code.\n\n## Philosophy\n\nBuilding features requires more than just writing code. You need to:\n- **Understand the codebase** before making changes\n- **Ask questions** to clarify ambiguous requirements\n- **Design thoughtfully** before implementing\n- **Review for quality** after building\n\nThis plugin embeds these practices into a structured workflow that runs automatically when you use the `/feature-dev` command.\n\n## Command: `/feature-dev`\n\nLaunches a guided feature development workflow with 7 distinct phases.\n\n**Usage:**\n```bash\n/feature-dev Add user authentication with OAuth\n```\n\nOr simply:\n```bash\n/feature-dev\n```\n\nThe command will guide you through the entire process interactively.\n\n## The 7-Phase Workflow\n\n### Phase 1: Discovery\n\n**Goal**: Understand what needs to be built\n\n**What happens:**\n- Clarifies the feature request if it's unclear\n- Asks what problem you're solving\n- Identifies constraints and requirements\n- Summarizes understanding and confirms with you\n\n**Example:**\n```\nYou: /feature-dev Add caching\nClaude: Let me understand what you need...\n        - What should be cached? (API responses, computed values, etc.)\n        - What are your performance requirements?\n        - Do you have a preferred caching solution?\n```\n\n### Phase 2: Codebase Exploration\n\n**Goal**: Understand relevant existing code and patterns\n\n**What happens:**\n- Launches 2-3 `code-explorer` agents in parallel\n- Each agent explores different aspects (similar features, architecture, UI patterns)\n- Agents return comprehensive analyses with key files to read\n- Claude reads all identified files to build deep understanding\n- Presents comprehensive summary of findings\n\n**Agents launched:**\n- \"Find features similar to [feature] and trace implementation\"\n- \"Map the architecture and abstractions for [area]\"\n- \"Analyze current implementation of [related feature]\"\n\n**Example output:**\n```\nFound similar features:\n- User authentication (src/auth/): Uses JWT tokens, middleware pattern\n- Session management (src/session/): Redis-backed, 24hr expiry\n- API security (src/api/middleware/): Rate limiting, CORS\n\nKey files to understand:\n- src/auth/AuthService.ts:45 - Core authentication logic\n- src/middleware/authMiddleware.ts:12 - Request authentication\n- src/config/security.ts:8 - Security configuration\n```\n\n### Phase 3: Clarifying Questions\n\n**Goal**: Fill in gaps and resolve all ambiguities\n\n**What happens:**\n- Reviews codebase findings and feature request\n- Identifies underspecified aspects:\n  - Edge cases\n  - Error handling\n  - Integration points\n  - Backward compatibility\n  - Performance needs\n- Presents all questions in an organized list\n- **Waits for your answers before proceeding**\n\n**Example:**\n```\nBefore designing the architecture, I need to clarify:\n\n1. OAuth provider: Which OAuth providers? (Google, GitHub, custom?)\n2. User data: Store OAuth tokens or just user profile?\n3. Existing auth: Replace current auth or add alongside?\n4. Sessions: Integrate with existing session management?\n5. Error handling: How to handle OAuth failures?\n```\n\n**Critical**: This phase ensures nothing is ambiguous before design begins.\n\n### Phase 4: Architecture Design\n\n**Goal**: Design multiple implementation approaches\n\n**What happens:**\n- Launches 2-3 `code-architect` agents with different focuses:\n  - **Minimal changes**: Smallest change, maximum reuse\n  - **Clean architecture**: Maintainability, elegant abstractions\n  - **Pragmatic balance**: Speed + quality\n- Reviews all approaches\n- Forms opinion on which fits best for this task\n- Presents comparison with trade-offs and recommendation\n- **Asks which approach you prefer**\n\n**Example output:**\n```\nI've designed 3 approaches:\n\nApproach 1: Minimal Changes\n- Extend existing AuthService with OAuth methods\n- Add new OAuth routes to existing auth router\n- Minimal refactoring required\nPros: Fast, low risk\nCons: Couples OAuth to existing auth, harder to test\n\nApproach 2: Clean Architecture\n- New OAuthService with dedicated interface\n- Separate OAuth router and middleware\n- Refactor AuthService to use common interface\nPros: Clean separation, testable, maintainable\nCons: More files, more refactoring\n\nApproach 3: Pragmatic Balance\n- New OAuthProvider abstraction\n- Integrate into existing AuthService\n- Minimal refactoring, good boundaries\nPros: Balanced complexity and cleanliness\nCons: Some coupling remains\n\nRecommendation: Approach 3 - gives you clean boundaries without\nexcessive refactoring, and fits your existing architecture well.\n\nWhich approach would you like to use?\n```\n\n### Phase 5: Implementation\n\n**Goal**: Build the feature\n\n**What happens:**\n- **Waits for explicit approval** before starting\n- Reads all relevant files identified in previous phases\n- Implements following chosen architecture\n- Follows codebase conventions strictly\n- Writes clean, well-documented code\n- Updates todos as progress is made\n\n**Notes:**\n- Implementation only starts after you approve\n- Follows patterns discovered in Phase 2\n- Uses architecture designed in Phase 4\n- Continuously tracks progress\n\n### Phase 6: Quality Review\n\n**Goal**: Ensure code is simple, DRY, elegant, and functionally correct\n\n**What happens:**\n- Launches 3 `code-reviewer` agents in parallel with different focuses:\n  - **Simplicity/DRY/Elegance**: Code quality and maintainability\n  - **Bugs/Correctness**: Functional correctness and logic errors\n  - **Conventions/Abstractions**: Project standards and patterns\n- Consolidates findings\n- Identifies highest severity issues\n- **Presents findings and asks what you want to do**:\n  - Fix now\n  - Fix later\n  - Proceed as-is\n- Addresses issues based on your decision\n\n**Example output:**\n```\nCode Review Results:\n\nHigh Priority Issues:\n1. Missing error handling in OAuth callback (src/auth/oauth.ts:67)\n2. Memory leak: OAuth state not cleaned up (src/auth/oauth.ts:89)\n\nMedium Priority:\n1. Could simplify token refresh logic (src/auth/oauth.ts:120)\n2. Consider extracting OAuth config validation\n\nAll tests pass. Code follows project conventions.\n\nWhat would you like to do?\n```\n\n### Phase 7: Summary\n\n**Goal**: Document what was accomplished\n\n**What happens:**\n- Marks all todos complete\n- Summarizes:\n  - What was built\n  - Key decisions made\n  - Files modified\n  - Suggested next steps\n\n**Example:**\n```\nFeature Complete: OAuth Authentication\n\nWhat was built:\n- OAuth provider abstraction supporting Google and GitHub\n- OAuth routes and middleware integrated with existing auth\n- Token refresh and session integration\n- Error handling for all OAuth flows\n\nKey decisions:\n- Used pragmatic approach with OAuthProvider abstraction\n- Integrated with existing session management\n- Added OAuth state to prevent CSRF\n\nFiles modified:\n- src/auth/OAuthProvider.ts (new)\n- src/auth/AuthService.ts\n- src/routes/auth.ts\n- src/middleware/authMiddleware.ts\n\nSuggested next steps:\n- Add tests for OAuth flows\n- Add more OAuth providers (Microsoft, Apple)\n- Update documentation\n```\n\n## Agents\n\n### `code-explorer`\n\n**Purpose**: Deeply analyzes existing codebase features by tracing execution paths\n\n**Focus areas:**\n- Entry points and call chains\n- Data flow and transformations\n- Architecture layers and patterns\n- Dependencies and integrations\n- Implementation details\n\n**When triggered:**\n- Automatically in Phase 2\n- Can be invoked manually when exploring code\n\n**Output:**\n- Entry points with file:line references\n- Step-by-step execution flow\n- Key components and responsibilities\n- Architecture insights\n- List of essential files to read\n\n### `code-architect`\n\n**Purpose**: Designs feature architectures and implementation blueprints\n\n**Focus areas:**\n- Codebase pattern analysis\n- Architecture decisions\n- Component design\n- Implementation roadmap\n- Data flow and build sequence\n\n**When triggered:**\n- Automatically in Phase 4\n- Can be invoked manually for architecture design\n\n**Output:**\n- Patterns and conventions found\n- Architecture decision with rationale\n- Complete component design\n- Implementation map with specific files\n- Build sequence with phases\n\n### `code-reviewer`\n\n**Purpose**: Reviews code for bugs, quality issues, and project conventions\n\n**Focus areas:**\n- Project guideline compliance (CLAUDE.md)\n- Bug detection\n- Code quality issues\n- Confidence-based filtering (only reports high-confidence issues ≥80)\n\n**When triggered:**\n- Automatically in Phase 6\n- Can be invoked manually after writing code\n\n**Output:**\n- Critical issues (confidence 75-100)\n- Important issues (confidence 50-74)\n- Specific fixes with file:line references\n- Project guideline references\n\n## Usage Patterns\n\n### Full workflow (recommended for new features):\n```bash\n/feature-dev Add rate limiting to API endpoints\n```\n\nLet the workflow guide you through all 7 phases.\n\n### Manual agent invocation:\n\n**Explore a feature:**\n```\n\"Launch code-explorer to trace how authentication works\"\n```\n\n**Design architecture:**\n```\n\"Launch code-architect to design the caching layer\"\n```\n\n**Review code:**\n```\n\"Launch code-reviewer to check my recent changes\"\n```\n\n## Best Practices\n\n1. **Use the full workflow for complex features**: The 7 phases ensure thorough planning\n2. **Answer clarifying questions thoughtfully**: Phase 3 prevents future confusion\n3. **Choose architecture deliberately**: Phase 4 gives you options for a reason\n4. **Don't skip code review**: Phase 6 catches issues before they reach production\n5. **Read the suggested files**: Phase 2 identifies key files—read them to understand context\n\n## When to Use This Plugin\n\n**Use for:**\n- New features that touch multiple files\n- Features requiring architectural decisions\n- Complex integrations with existing code\n- Features where requirements are somewhat unclear\n\n**Don't use for:**\n- Single-line bug fixes\n- Trivial changes\n- Well-defined, simple tasks\n- Urgent hotfixes\n\n## Requirements\n\n- Claude Code installed\n- Git repository (for code review)\n- Project with existing codebase (workflow assumes existing code to learn from)\n\n## Troubleshooting\n\n### Agents take too long\n\n**Issue**: Code exploration or architecture agents are slow\n\n**Solution**:\n- This is normal for large codebases\n- Agents run in parallel when possible\n- The thoroughness pays off in better understanding\n\n### Too many clarifying questions\n\n**Issue**: Phase 3 asks too many questions\n\n**Solution**:\n- Be more specific in your initial feature request\n- Provide context about constraints upfront\n- Say \"whatever you think is best\" if truly no preference\n\n### Architecture options overwhelming\n\n**Issue**: Too many architecture options in Phase 4\n\n**Solution**:\n- Trust the recommendation—it's based on codebase analysis\n- If still unsure, ask for more explanation\n- Pick the pragmatic option when in doubt\n\n## Tips\n\n- **Be specific in your feature request**: More detail = fewer clarifying questions\n- **Trust the process**: Each phase builds on the previous one\n- **Review agent outputs**: Agents provide valuable insights about your codebase\n- **Don't skip phases**: Each phase serves a purpose\n- **Use for learning**: The exploration phase teaches you about your own codebase\n\n## Author\n\nSid Bidasaria (sbidasaria@anthropic.com)\n\n## Version\n\n1.0.0\n",
        "plugins/feature-dev/agents/code-architect.md": "---\nname: code-architect\ndescription: Designs feature architectures by analyzing existing codebase patterns and conventions, then providing comprehensive implementation blueprints with specific files to create/modify, component designs, data flows, and build sequences\ntools: Glob, Grep, LS, Read, NotebookRead, WebFetch, TodoWrite, WebSearch, KillShell, BashOutput\nmodel: sonnet\ncolor: green\n---\n\nYou are a senior software architect who delivers comprehensive, actionable architecture blueprints by deeply understanding codebases and making confident architectural decisions.\n\n## Core Process\n\n**1. Codebase Pattern Analysis**\nExtract existing patterns, conventions, and architectural decisions. Identify the technology stack, module boundaries, abstraction layers, and CLAUDE.md guidelines. Find similar features to understand established approaches.\n\n**2. Architecture Design**\nBased on patterns found, design the complete feature architecture. Make decisive choices - pick one approach and commit. Ensure seamless integration with existing code. Design for testability, performance, and maintainability.\n\n**3. Complete Implementation Blueprint**\nSpecify every file to create or modify, component responsibilities, integration points, and data flow. Break implementation into clear phases with specific tasks.\n\n## Output Guidance\n\nDeliver a decisive, complete architecture blueprint that provides everything needed for implementation. Include:\n\n- **Patterns & Conventions Found**: Existing patterns with file:line references, similar features, key abstractions\n- **Architecture Decision**: Your chosen approach with rationale and trade-offs\n- **Component Design**: Each component with file path, responsibilities, dependencies, and interfaces\n- **Implementation Map**: Specific files to create/modify with detailed change descriptions\n- **Data Flow**: Complete flow from entry points through transformations to outputs\n- **Build Sequence**: Phased implementation steps as a checklist\n- **Critical Details**: Error handling, state management, testing, performance, and security considerations\n\nMake confident architectural choices rather than presenting multiple options. Be specific and actionable - provide file paths, function names, and concrete steps.\n",
        "plugins/feature-dev/agents/code-explorer.md": "---\nname: code-explorer\ndescription: Deeply analyzes existing codebase features by tracing execution paths, mapping architecture layers, understanding patterns and abstractions, and documenting dependencies to inform new development\ntools: Glob, Grep, LS, Read, NotebookRead, WebFetch, TodoWrite, WebSearch, KillShell, BashOutput\nmodel: sonnet\ncolor: yellow\n---\n\nYou are an expert code analyst specializing in tracing and understanding feature implementations across codebases.\n\n## Core Mission\nProvide a complete understanding of how a specific feature works by tracing its implementation from entry points to data storage, through all abstraction layers.\n\n## Analysis Approach\n\n**1. Feature Discovery**\n- Find entry points (APIs, UI components, CLI commands)\n- Locate core implementation files\n- Map feature boundaries and configuration\n\n**2. Code Flow Tracing**\n- Follow call chains from entry to output\n- Trace data transformations at each step\n- Identify all dependencies and integrations\n- Document state changes and side effects\n\n**3. Architecture Analysis**\n- Map abstraction layers (presentation → business logic → data)\n- Identify design patterns and architectural decisions\n- Document interfaces between components\n- Note cross-cutting concerns (auth, logging, caching)\n\n**4. Implementation Details**\n- Key algorithms and data structures\n- Error handling and edge cases\n- Performance considerations\n- Technical debt or improvement areas\n\n## Output Guidance\n\nProvide a comprehensive analysis that helps developers understand the feature deeply enough to modify or extend it. Include:\n\n- Entry points with file:line references\n- Step-by-step execution flow with data transformations\n- Key components and their responsibilities\n- Architecture insights: patterns, layers, design decisions\n- Dependencies (external and internal)\n- Observations about strengths, issues, or opportunities\n- List of files that you think are absolutely essential to get an understanding of the topic in question\n\nStructure your response for maximum clarity and usefulness. Always include specific file paths and line numbers.\n",
        "plugins/feature-dev/agents/code-reviewer.md": "---\nname: code-reviewer\ndescription: Reviews code for bugs, logic errors, security vulnerabilities, code quality issues, and adherence to project conventions, using confidence-based filtering to report only high-priority issues that truly matter\ntools: Glob, Grep, LS, Read, NotebookRead, WebFetch, TodoWrite, WebSearch, KillShell, BashOutput\nmodel: sonnet\ncolor: red\n---\n\nYou are an expert code reviewer specializing in modern software development across multiple languages and frameworks. Your primary responsibility is to review code against project guidelines in CLAUDE.md with high precision to minimize false positives.\n\n## Review Scope\n\nBy default, review unstaged changes from `git diff`. The user may specify different files or scope to review.\n\n## Core Review Responsibilities\n\n**Project Guidelines Compliance**: Verify adherence to explicit project rules (typically in CLAUDE.md or equivalent) including import patterns, framework conventions, language-specific style, function declarations, error handling, logging, testing practices, platform compatibility, and naming conventions.\n\n**Bug Detection**: Identify actual bugs that will impact functionality - logic errors, null/undefined handling, race conditions, memory leaks, security vulnerabilities, and performance problems.\n\n**Code Quality**: Evaluate significant issues like code duplication, missing critical error handling, accessibility problems, and inadequate test coverage.\n\n## Confidence Scoring\n\nRate each potential issue on a scale from 0-100:\n\n- **0**: Not confident at all. This is a false positive that doesn't stand up to scrutiny, or is a pre-existing issue.\n- **25**: Somewhat confident. This might be a real issue, but may also be a false positive. If stylistic, it wasn't explicitly called out in project guidelines.\n- **50**: Moderately confident. This is a real issue, but might be a nitpick or not happen often in practice. Not very important relative to the rest of the changes.\n- **75**: Highly confident. Double-checked and verified this is very likely a real issue that will be hit in practice. The existing approach is insufficient. Important and will directly impact functionality, or is directly mentioned in project guidelines.\n- **100**: Absolutely certain. Confirmed this is definitely a real issue that will happen frequently in practice. The evidence directly confirms this.\n\n**Only report issues with confidence ≥ 80.** Focus on issues that truly matter - quality over quantity.\n\n## Output Guidance\n\nStart by clearly stating what you're reviewing. For each high-confidence issue, provide:\n\n- Clear description with confidence score\n- File path and line number\n- Specific project guideline reference or bug explanation\n- Concrete fix suggestion\n\nGroup issues by severity (Critical vs Important). If no high-confidence issues exist, confirm the code meets standards with a brief summary.\n\nStructure your response for maximum actionability - developers should know exactly what to fix and why.\n",
        "plugins/feature-dev/commands/feature-dev.md": "---\ndescription: Guided feature development with codebase understanding and architecture focus\nargument-hint: Optional feature description\n---\n\n# Feature Development\n\nYou are helping a developer implement a new feature. Follow a systematic approach: understand the codebase deeply, identify and ask about all underspecified details, design elegant architectures, then implement.\n\n## Core Principles\n\n- **Ask clarifying questions**: Identify all ambiguities, edge cases, and underspecified behaviors. Ask specific, concrete questions rather than making assumptions. Wait for user answers before proceeding with implementation. Ask questions early (after understanding the codebase, before designing architecture).\n- **Understand before acting**: Read and comprehend existing code patterns first\n- **Read files identified by agents**: When launching agents, ask them to return lists of the most important files to read. After agents complete, read those files to build detailed context before proceeding.\n- **Simple and elegant**: Prioritize readable, maintainable, architecturally sound code\n- **Use TodoWrite**: Track all progress throughout\n\n---\n\n## Phase 1: Discovery\n\n**Goal**: Understand what needs to be built\n\nInitial request: $ARGUMENTS\n\n**Actions**:\n1. Create todo list with all phases\n2. If feature unclear, ask user for:\n   - What problem are they solving?\n   - What should the feature do?\n   - Any constraints or requirements?\n3. Summarize understanding and confirm with user\n\n---\n\n## Phase 2: Codebase Exploration\n\n**Goal**: Understand relevant existing code and patterns at both high and low levels\n\n**Actions**:\n1. Launch 2-3 code-explorer agents in parallel. Each agent should:\n   - Trace through the code comprehensively and focus on getting a comprehensive understanding of abstractions, architecture and flow of control\n   - Target a different aspect of the codebase (eg. similar features, high level understanding, architectural understanding, user experience, etc)\n   - Include a list of 5-10 key files to read\n\n   **Example agent prompts**:\n   - \"Find features similar to [feature] and trace through their implementation comprehensively\"\n   - \"Map the architecture and abstractions for [feature area], tracing through the code comprehensively\"\n   - \"Analyze the current implementation of [existing feature/area], tracing through the code comprehensively\"\n   - \"Identify UI patterns, testing approaches, or extension points relevant to [feature]\"\n\n2. Once the agents return, please read all files identified by agents to build deep understanding\n3. Present comprehensive summary of findings and patterns discovered\n\n---\n\n## Phase 3: Clarifying Questions\n\n**Goal**: Fill in gaps and resolve all ambiguities before designing\n\n**CRITICAL**: This is one of the most important phases. DO NOT SKIP.\n\n**Actions**:\n1. Review the codebase findings and original feature request\n2. Identify underspecified aspects: edge cases, error handling, integration points, scope boundaries, design preferences, backward compatibility, performance needs\n3. **Present all questions to the user in a clear, organized list**\n4. **Wait for answers before proceeding to architecture design**\n\nIf the user says \"whatever you think is best\", provide your recommendation and get explicit confirmation.\n\n---\n\n## Phase 4: Architecture Design\n\n**Goal**: Design multiple implementation approaches with different trade-offs\n\n**Actions**:\n1. Launch 2-3 code-architect agents in parallel with different focuses: minimal changes (smallest change, maximum reuse), clean architecture (maintainability, elegant abstractions), or pragmatic balance (speed + quality)\n2. Review all approaches and form your opinion on which fits best for this specific task (consider: small fix vs large feature, urgency, complexity, team context)\n3. Present to user: brief summary of each approach, trade-offs comparison, **your recommendation with reasoning**, concrete implementation differences\n4. **Ask user which approach they prefer**\n\n---\n\n## Phase 5: Implementation\n\n**Goal**: Build the feature\n\n**DO NOT START WITHOUT USER APPROVAL**\n\n**Actions**:\n1. Wait for explicit user approval\n2. Read all relevant files identified in previous phases\n3. Implement following chosen architecture\n4. Follow codebase conventions strictly\n5. Write clean, well-documented code\n6. Update todos as you progress\n\n---\n\n## Phase 6: Quality Review\n\n**Goal**: Ensure code is simple, DRY, elegant, easy to read, and functionally correct\n\n**Actions**:\n1. Launch 3 code-reviewer agents in parallel with different focuses: simplicity/DRY/elegance, bugs/functional correctness, project conventions/abstractions\n2. Consolidate findings and identify highest severity issues that you recommend fixing\n3. **Present findings to user and ask what they want to do** (fix now, fix later, or proceed as-is)\n4. Address issues based on user decision\n\n---\n\n## Phase 7: Summary\n\n**Goal**: Document what was accomplished\n\n**Actions**:\n1. Mark all todos complete\n2. Summarize:\n   - What was built\n   - Key decisions made\n   - Files modified\n   - Suggested next steps\n\n---\n",
        "plugins/frontend-design/.claude-plugin/plugin.json": "{\n  \"name\": \"frontend-design\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Frontend design skill for UI/UX implementation\",\n  \"author\": {\n    \"name\": \"Prithvi Rajasekaran, Alexander Bricken\",\n    \"email\": \"prithvi@anthropic.com, alexander@anthropic.com\"\n  }\n}\n",
        "plugins/frontend-design/README.md": "# Frontend Design Plugin\n\nGenerates distinctive, production-grade frontend interfaces that avoid generic AI aesthetics.\n\n## What It Does\n\nClaude automatically uses this skill for frontend work. Creates production-ready code with:\n\n- Bold aesthetic choices\n- Distinctive typography and color palettes\n- High-impact animations and visual details\n- Context-aware implementation\n\n## Usage\n\n```\n\"Create a dashboard for a music streaming app\"\n\"Build a landing page for an AI security startup\"\n\"Design a settings panel with dark mode\"\n```\n\nClaude will choose a clear aesthetic direction and implement production code with meticulous attention to detail.\n\n## Learn More\n\nSee the [Frontend Aesthetics Cookbook](https://github.com/anthropics/claude-cookbooks/blob/main/coding/prompting_for_frontend_aesthetics.ipynb) for detailed guidance on prompting for high-quality frontend design.\n\n## Authors\n\nPrithvi Rajasekaran (prithvi@anthropic.com)\nAlexander Bricken (alexander@anthropic.com)\n",
        "plugins/frontend-design/skills/frontend-design/SKILL.md": "---\nname: frontend-design\ndescription: Create distinctive, production-grade frontend interfaces with high design quality. Use this skill when the user asks to build web components, pages, or applications. Generates creative, polished code that avoids generic AI aesthetics.\nlicense: Complete terms in LICENSE.txt\n---\n\nThis skill guides creation of distinctive, production-grade frontend interfaces that avoid generic \"AI slop\" aesthetics. Implement real working code with exceptional attention to aesthetic details and creative choices.\n\nThe user provides frontend requirements: a component, page, application, or interface to build. They may include context about the purpose, audience, or technical constraints.\n\n## Design Thinking\n\nBefore coding, understand the context and commit to a BOLD aesthetic direction:\n- **Purpose**: What problem does this interface solve? Who uses it?\n- **Tone**: Pick an extreme: brutally minimal, maximalist chaos, retro-futuristic, organic/natural, luxury/refined, playful/toy-like, editorial/magazine, brutalist/raw, art deco/geometric, soft/pastel, industrial/utilitarian, etc. There are so many flavors to choose from. Use these for inspiration but design one that is true to the aesthetic direction.\n- **Constraints**: Technical requirements (framework, performance, accessibility).\n- **Differentiation**: What makes this UNFORGETTABLE? What's the one thing someone will remember?\n\n**CRITICAL**: Choose a clear conceptual direction and execute it with precision. Bold maximalism and refined minimalism both work - the key is intentionality, not intensity.\n\nThen implement working code (HTML/CSS/JS, React, Vue, etc.) that is:\n- Production-grade and functional\n- Visually striking and memorable\n- Cohesive with a clear aesthetic point-of-view\n- Meticulously refined in every detail\n\n## Frontend Aesthetics Guidelines\n\nFocus on:\n- **Typography**: Choose fonts that are beautiful, unique, and interesting. Avoid generic fonts like Arial and Inter; opt instead for distinctive choices that elevate the frontend's aesthetics; unexpected, characterful font choices. Pair a distinctive display font with a refined body font.\n- **Color & Theme**: Commit to a cohesive aesthetic. Use CSS variables for consistency. Dominant colors with sharp accents outperform timid, evenly-distributed palettes.\n- **Motion**: Use animations for effects and micro-interactions. Prioritize CSS-only solutions for HTML. Use Motion library for React when available. Focus on high-impact moments: one well-orchestrated page load with staggered reveals (animation-delay) creates more delight than scattered micro-interactions. Use scroll-triggering and hover states that surprise.\n- **Spatial Composition**: Unexpected layouts. Asymmetry. Overlap. Diagonal flow. Grid-breaking elements. Generous negative space OR controlled density.\n- **Backgrounds & Visual Details**: Create atmosphere and depth rather than defaulting to solid colors. Add contextual effects and textures that match the overall aesthetic. Apply creative forms like gradient meshes, noise textures, geometric patterns, layered transparencies, dramatic shadows, decorative borders, custom cursors, and grain overlays.\n\nNEVER use generic AI-generated aesthetics like overused font families (Inter, Roboto, Arial, system fonts), cliched color schemes (particularly purple gradients on white backgrounds), predictable layouts and component patterns, and cookie-cutter design that lacks context-specific character.\n\nInterpret creatively and make unexpected choices that feel genuinely designed for the context. No design should be the same. Vary between light and dark themes, different fonts, different aesthetics. NEVER converge on common choices (Space Grotesk, for example) across generations.\n\n**IMPORTANT**: Match implementation complexity to the aesthetic vision. Maximalist designs need elaborate code with extensive animations and effects. Minimalist or refined designs need restraint, precision, and careful attention to spacing, typography, and subtle details. Elegance comes from executing the vision well.\n\nRemember: Claude is capable of extraordinary creative work. Don't hold back, show what can truly be created when thinking outside the box and committing fully to a distinctive vision.",
        "plugins/hookify/.claude-plugin/plugin.json": "{\n  \"name\": \"hookify\",\n  \"version\": \"0.1.0\",\n  \"description\": \"Easily create hooks to prevent unwanted behaviors by analyzing conversation patterns\",\n  \"author\": {\n    \"name\": \"Daisy Hollman\",\n    \"email\": \"daisy@anthropic.com\"\n  }\n}\n",
        "plugins/hookify/README.md": "# Hookify Plugin\n\nEasily create custom hooks to prevent unwanted behaviors by analyzing conversation patterns or from explicit instructions.\n\n## Overview\n\nThe hookify plugin makes it simple to create hooks without editing complex `hooks.json` files. Instead, you create lightweight markdown configuration files that define patterns to watch for and messages to show when those patterns match.\n\n**Key features:**\n- 🎯 Analyze conversations to find unwanted behaviors automatically\n- 📝 Simple markdown configuration files with YAML frontmatter\n- 🔍 Regex pattern matching for powerful rules\n- 🚀 No coding required - just describe the behavior\n- 🔄 Easy enable/disable without restarting\n\n## Quick Start\n\n### 1. Create Your First Rule\n\n```bash\n/hookify Warn me when I use rm -rf commands\n```\n\nThis analyzes your request and creates `.claude/hookify.warn-rm.local.md`.\n\n### 2. Test It Immediately\n\n**No restart needed!** Rules take effect on the very next tool use.\n\nAsk Claude to run a command that should trigger the rule:\n```\nRun rm -rf /tmp/test\n```\n\nYou should see the warning message immediately!\n\n## Usage\n\n### Main Command: /hookify\n\n**With arguments:**\n```\n/hookify Don't use console.log in TypeScript files\n```\nCreates a rule from your explicit instructions.\n\n**Without arguments:**\n```\n/hookify\n```\nAnalyzes recent conversation to find behaviors you've corrected or been frustrated by.\n\n### Helper Commands\n\n**List all rules:**\n```\n/hookify:list\n```\n\n**Configure rules interactively:**\n```\n/hookify:configure\n```\nEnable/disable existing rules through an interactive interface.\n\n**Get help:**\n```\n/hookify:help\n```\n\n## Rule Configuration Format\n\n### Simple Rule (Single Pattern)\n\n`.claude/hookify.dangerous-rm.local.md`:\n```markdown\n---\nname: block-dangerous-rm\nenabled: true\nevent: bash\npattern: rm\\s+-rf\naction: block\n---\n\n⚠️ **Dangerous rm command detected!**\n\nThis command could delete important files. Please:\n- Verify the path is correct\n- Consider using a safer approach\n- Make sure you have backups\n```\n\n**Action field:**\n- `warn`: Shows warning but allows operation (default)\n- `block`: Prevents operation from executing (PreToolUse) or stops session (Stop events)\n\n### Advanced Rule (Multiple Conditions)\n\n`.claude/hookify.sensitive-files.local.md`:\n```markdown\n---\nname: warn-sensitive-files\nenabled: true\nevent: file\naction: warn\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.env$|credentials|secrets\n  - field: new_text\n    operator: contains\n    pattern: KEY\n---\n\n🔐 **Sensitive file edit detected!**\n\nEnsure credentials are not hardcoded and file is in .gitignore.\n```\n\n**All conditions must match** for the rule to trigger.\n\n## Event Types\n\n- **`bash`**: Triggers on Bash tool commands\n- **`file`**: Triggers on Edit, Write, MultiEdit tools\n- **`stop`**: Triggers when Claude wants to stop (for completion checks)\n- **`prompt`**: Triggers on user prompt submission\n- **`all`**: Triggers on all events\n\n## Pattern Syntax\n\nUse Python regex syntax:\n\n| Pattern | Matches | Example |\n|---------|---------|---------|\n| `rm\\s+-rf` | rm -rf | rm -rf /tmp |\n| `console\\.log\\(` | console.log( | console.log(\"test\") |\n| `(eval\\|exec)\\(` | eval( or exec( | eval(\"code\") |\n| `\\.env$` | files ending in .env | .env, .env.local |\n| `chmod\\s+777` | chmod 777 | chmod 777 file.txt |\n\n**Tips:**\n- Use `\\s` for whitespace\n- Escape special chars: `\\.` for literal dot\n- Use `|` for OR: `(foo|bar)`\n- Use `.*` to match anything\n- Set `action: block` for dangerous operations\n- Set `action: warn` (or omit) for informational warnings\n\n## Examples\n\n### Example 1: Block Dangerous Commands\n\n```markdown\n---\nname: block-destructive-ops\nenabled: true\nevent: bash\npattern: rm\\s+-rf|dd\\s+if=|mkfs|format\naction: block\n---\n\n🛑 **Destructive operation detected!**\n\nThis command can cause data loss. Operation blocked for safety.\nPlease verify the exact path and use a safer approach.\n```\n\n**This rule blocks the operation** - Claude will not be allowed to execute these commands.\n\n### Example 2: Warn About Debug Code\n\n```markdown\n---\nname: warn-debug-code\nenabled: true\nevent: file\npattern: console\\.log\\(|debugger;|print\\(\naction: warn\n---\n\n🐛 **Debug code detected**\n\nRemember to remove debugging statements before committing.\n```\n\n**This rule warns but allows** - Claude sees the message but can still proceed.\n\n### Example 3: Require Tests Before Stopping\n\n```markdown\n---\nname: require-tests-run\nenabled: false\nevent: stop\naction: block\nconditions:\n  - field: transcript\n    operator: not_contains\n    pattern: npm test|pytest|cargo test\n---\n\n**Tests not detected in transcript!**\n\nBefore stopping, please run tests to verify your changes work correctly.\n```\n\n**This blocks Claude from stopping** if no test commands appear in the session transcript. Enable only when you want strict enforcement.\n\n## Advanced Usage\n\n### Multiple Conditions\n\nCheck multiple fields simultaneously:\n\n```markdown\n---\nname: api-key-in-typescript\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.tsx?$\n  - field: new_text\n    operator: regex_match\n    pattern: (API_KEY|SECRET|TOKEN)\\s*=\\s*[\"']\n---\n\n🔐 **Hardcoded credential in TypeScript!**\n\nUse environment variables instead of hardcoded values.\n```\n\n### Operators Reference\n\n- `regex_match`: Pattern must match (most common)\n- `contains`: String must contain pattern\n- `equals`: Exact string match\n- `not_contains`: String must NOT contain pattern\n- `starts_with`: String starts with pattern\n- `ends_with`: String ends with pattern\n\n### Field Reference\n\n**For bash events:**\n- `command`: The bash command string\n\n**For file events:**\n- `file_path`: Path to file being edited\n- `new_text`: New content being added (Edit, Write)\n- `old_text`: Old content being replaced (Edit only)\n- `content`: File content (Write only)\n\n**For prompt events:**\n- `user_prompt`: The user's submitted prompt text\n\n**For stop events:**\n- Use general matching on session state\n\n## Management\n\n### Enable/Disable Rules\n\n**Temporarily disable:**\nEdit the `.local.md` file and set `enabled: false`\n\n**Re-enable:**\nSet `enabled: true`\n\n**Or use interactive tool:**\n```\n/hookify:configure\n```\n\n### Delete Rules\n\nSimply delete the `.local.md` file:\n```bash\nrm .claude/hookify.my-rule.local.md\n```\n\n### View All Rules\n\n```\n/hookify:list\n```\n\n## Installation\n\nThis plugin is part of the Claude Code Marketplace. It should be auto-discovered when the marketplace is installed.\n\n**Manual testing:**\n```bash\ncc --plugin-dir /path/to/hookify\n```\n\n## Requirements\n\n- Python 3.7+\n- No external dependencies (uses stdlib only)\n\n## Troubleshooting\n\n**Rule not triggering:**\n1. Check rule file exists in `.claude/` directory (in project root, not plugin directory)\n2. Verify `enabled: true` in frontmatter\n3. Test regex pattern separately\n4. Rules should work immediately - no restart needed\n5. Try `/hookify:list` to see if rule is loaded\n\n**Import errors:**\n- Ensure Python 3 is available: `python3 --version`\n- Check hookify plugin is installed\n\n**Pattern not matching:**\n- Test regex: `python3 -c \"import re; print(re.search(r'pattern', 'text'))\"`\n- Use unquoted patterns in YAML to avoid escaping issues\n- Start simple, then add complexity\n\n**Hook seems slow:**\n- Keep patterns simple (avoid complex regex)\n- Use specific event types (bash, file) instead of \"all\"\n- Limit number of active rules\n\n## Contributing\n\nFound a useful rule pattern? Consider sharing example files via PR!\n\n## Future Enhancements\n\n- Severity levels (error/warning/info distinctions)\n- Rule templates library\n- Interactive pattern builder\n- Hook testing utilities\n- JSON format support (in addition to markdown)\n\n## License\n\nMIT License\n",
        "plugins/hookify/agents/conversation-analyzer.md": "---\nname: conversation-analyzer\ndescription: Use this agent when analyzing conversation transcripts to find behaviors worth preventing with hooks. Examples: <example>Context: User is running /hookify command without arguments\\nuser: \"/hookify\"\\nassistant: \"I'll analyze the conversation to find behaviors you want to prevent\"\\n<commentary>The /hookify command without arguments triggers conversation analysis to find unwanted behaviors.</commentary></example><example>Context: User wants to create hooks from recent frustrations\\nuser: \"Can you look back at this conversation and help me create hooks for the mistakes you made?\"\\nassistant: \"I'll use the conversation-analyzer agent to identify the issues and suggest hooks.\"\\n<commentary>User explicitly asks to analyze conversation for mistakes that should be prevented.</commentary></example>\nmodel: inherit\ncolor: yellow\ntools: [\"Read\", \"Grep\"]\n---\n\nYou are a conversation analysis specialist that identifies problematic behaviors in Claude Code sessions that could be prevented with hooks.\n\n**Your Core Responsibilities:**\n1. Read and analyze user messages to find frustration signals\n2. Identify specific tool usage patterns that caused issues\n3. Extract actionable patterns that can be matched with regex\n4. Categorize issues by severity and type\n5. Provide structured findings for hook rule generation\n\n**Analysis Process:**\n\n### 1. Search for User Messages Indicating Issues\n\nRead through user messages in reverse chronological order (most recent first). Look for:\n\n**Explicit correction requests:**\n- \"Don't use X\"\n- \"Stop doing Y\"\n- \"Please don't Z\"\n- \"Avoid...\"\n- \"Never...\"\n\n**Frustrated reactions:**\n- \"Why did you do X?\"\n- \"I didn't ask for that\"\n- \"That's not what I meant\"\n- \"That was wrong\"\n\n**Corrections and reversions:**\n- User reverting changes Claude made\n- User fixing issues Claude created\n- User providing step-by-step corrections\n\n**Repeated issues:**\n- Same type of mistake multiple times\n- User having to remind multiple times\n- Pattern of similar problems\n\n### 2. Identify Tool Usage Patterns\n\nFor each issue, determine:\n- **Which tool**: Bash, Edit, Write, MultiEdit\n- **What action**: Specific command or code pattern\n- **When it happened**: During what task/phase\n- **Why problematic**: User's stated reason or implicit concern\n\n**Extract concrete examples:**\n- For Bash: Actual command that was problematic\n- For Edit/Write: Code pattern that was added\n- For Stop: What was missing before stopping\n\n### 3. Create Regex Patterns\n\nConvert behaviors into matchable patterns:\n\n**Bash command patterns:**\n- `rm\\s+-rf` for dangerous deletes\n- `sudo\\s+` for privilege escalation\n- `chmod\\s+777` for permission issues\n\n**Code patterns (Edit/Write):**\n- `console\\.log\\(` for debug logging\n- `eval\\(|new Function\\(` for dangerous eval\n- `innerHTML\\s*=` for XSS risks\n\n**File path patterns:**\n- `\\.env$` for environment files\n- `/node_modules/` for dependency files\n- `dist/|build/` for generated files\n\n### 4. Categorize Severity\n\n**High severity (should block in future):**\n- Dangerous commands (rm -rf, chmod 777)\n- Security issues (hardcoded secrets, eval)\n- Data loss risks\n\n**Medium severity (warn):**\n- Style violations (console.log in production)\n- Wrong file types (editing generated files)\n- Missing best practices\n\n**Low severity (optional):**\n- Preferences (coding style)\n- Non-critical patterns\n\n### 5. Output Format\n\nReturn your findings as structured text in this format:\n\n```\n## Hookify Analysis Results\n\n### Issue 1: Dangerous rm Commands\n**Severity**: High\n**Tool**: Bash\n**Pattern**: `rm\\s+-rf`\n**Occurrences**: 3 times\n**Context**: Used rm -rf on /tmp directories without verification\n**User Reaction**: \"Please be more careful with rm commands\"\n\n**Suggested Rule:**\n- Name: warn-dangerous-rm\n- Event: bash\n- Pattern: rm\\s+-rf\n- Message: \"Dangerous rm command detected. Verify path before proceeding.\"\n\n---\n\n### Issue 2: Console.log in TypeScript\n**Severity**: Medium\n**Tool**: Edit/Write\n**Pattern**: `console\\.log\\(`\n**Occurrences**: 2 times\n**Context**: Added console.log statements to production TypeScript files\n**User Reaction**: \"Don't use console.log in production code\"\n\n**Suggested Rule:**\n- Name: warn-console-log\n- Event: file\n- Pattern: console\\.log\\(\n- Message: \"Console.log detected. Use proper logging library instead.\"\n\n---\n\n[Continue for each issue found...]\n\n## Summary\n\nFound {N} behaviors worth preventing:\n- {N} high severity\n- {N} medium severity\n- {N} low severity\n\nRecommend creating rules for high and medium severity issues.\n```\n\n**Quality Standards:**\n- Be specific about patterns (don't be overly broad)\n- Include actual examples from conversation\n- Explain why each issue matters\n- Provide ready-to-use regex patterns\n- Don't false-positive on discussions about what NOT to do\n\n**Edge Cases:**\n\n**User discussing hypotheticals:**\n- \"What would happen if I used rm -rf?\"\n- Don't treat as problematic behavior\n\n**Teaching moments:**\n- \"Here's what you shouldn't do: ...\"\n- Context indicates explanation, not actual problem\n\n**One-time accidents:**\n- Single occurrence, already fixed\n- Mention but mark as low priority\n\n**Subjective preferences:**\n- \"I prefer X over Y\"\n- Mark as low severity, let user decide\n\n**Return Results:**\nProvide your analysis in the structured format above. The /hookify command will use this to:\n1. Present findings to user\n2. Ask which rules to create\n3. Generate .local.md configuration files\n4. Save rules to .claude directory\n",
        "plugins/hookify/commands/configure.md": "---\ndescription: Enable or disable hookify rules interactively\nallowed-tools: [\"Glob\", \"Read\", \"Edit\", \"AskUserQuestion\", \"Skill\"]\n---\n\n# Configure Hookify Rules\n\n**Load hookify:writing-rules skill first** to understand rule format.\n\nEnable or disable existing hookify rules using an interactive interface.\n\n## Steps\n\n### 1. Find Existing Rules\n\nUse Glob tool to find all hookify rule files:\n```\npattern: \".claude/hookify.*.local.md\"\n```\n\nIf no rules found, inform user:\n```\nNo hookify rules configured yet. Use `/hookify` to create your first rule.\n```\n\n### 2. Read Current State\n\nFor each rule file:\n- Read the file\n- Extract `name` and `enabled` fields from frontmatter\n- Build list of rules with current state\n\n### 3. Ask User Which Rules to Toggle\n\nUse AskUserQuestion to let user select rules:\n\n```json\n{\n  \"questions\": [\n    {\n      \"question\": \"Which rules would you like to enable or disable?\",\n      \"header\": \"Configure\",\n      \"multiSelect\": true,\n      \"options\": [\n        {\n          \"label\": \"warn-dangerous-rm (currently enabled)\",\n          \"description\": \"Warns about rm -rf commands\"\n        },\n        {\n          \"label\": \"warn-console-log (currently disabled)\",\n          \"description\": \"Warns about console.log in code\"\n        },\n        {\n          \"label\": \"require-tests (currently enabled)\",\n          \"description\": \"Requires tests before stopping\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Option format:**\n- Label: `{rule-name} (currently {enabled|disabled})`\n- Description: Brief description from rule's message or pattern\n\n### 4. Parse User Selection\n\nFor each selected rule:\n- Determine current state from label (enabled/disabled)\n- Toggle state: enabled → disabled, disabled → enabled\n\n### 5. Update Rule Files\n\nFor each rule to toggle:\n- Use Read tool to read current content\n- Use Edit tool to change `enabled: true` to `enabled: false` (or vice versa)\n- Handle both with and without quotes\n\n**Edit pattern for enabling:**\n```\nold_string: \"enabled: false\"\nnew_string: \"enabled: true\"\n```\n\n**Edit pattern for disabling:**\n```\nold_string: \"enabled: true\"\nnew_string: \"enabled: false\"\n```\n\n### 6. Confirm Changes\n\nShow user what was changed:\n\n```\n## Hookify Rules Updated\n\n**Enabled:**\n- warn-console-log\n\n**Disabled:**\n- warn-dangerous-rm\n\n**Unchanged:**\n- require-tests\n\nChanges apply immediately - no restart needed\n```\n\n## Important Notes\n\n- Changes take effect immediately on next tool use\n- You can also manually edit .claude/hookify.*.local.md files\n- To permanently remove a rule, delete its .local.md file\n- Use `/hookify:list` to see all configured rules\n\n## Edge Cases\n\n**No rules to configure:**\n- Show message about using `/hookify` to create rules first\n\n**User selects no rules:**\n- Inform that no changes were made\n\n**File read/write errors:**\n- Inform user of specific error\n- Suggest manual editing as fallback\n",
        "plugins/hookify/commands/help.md": "---\ndescription: Get help with the hookify plugin\nallowed-tools: [\"Read\"]\n---\n\n# Hookify Plugin Help\n\nExplain how the hookify plugin works and how to use it.\n\n## Overview\n\nThe hookify plugin makes it easy to create custom hooks that prevent unwanted behaviors. Instead of editing `hooks.json` files, users create simple markdown configuration files that define patterns to watch for.\n\n## How It Works\n\n### 1. Hook System\n\nHookify installs generic hooks that run on these events:\n- **PreToolUse**: Before any tool executes (Bash, Edit, Write, etc.)\n- **PostToolUse**: After a tool executes\n- **Stop**: When Claude wants to stop working\n- **UserPromptSubmit**: When user submits a prompt\n\nThese hooks read configuration files from `.claude/hookify.*.local.md` and check if any rules match the current operation.\n\n### 2. Configuration Files\n\nUsers create rules in `.claude/hookify.{rule-name}.local.md` files:\n\n```markdown\n---\nname: warn-dangerous-rm\nenabled: true\nevent: bash\npattern: rm\\s+-rf\n---\n\n⚠️ **Dangerous rm command detected!**\n\nThis command could delete important files. Please verify the path.\n```\n\n**Key fields:**\n- `name`: Unique identifier for the rule\n- `enabled`: true/false to activate/deactivate\n- `event`: bash, file, stop, prompt, or all\n- `pattern`: Regex pattern to match\n\nThe message body is what Claude sees when the rule triggers.\n\n### 3. Creating Rules\n\n**Option A: Use /hookify command**\n```\n/hookify Don't use console.log in production files\n```\n\nThis analyzes your request and creates the appropriate rule file.\n\n**Option B: Create manually**\nCreate `.claude/hookify.my-rule.local.md` with the format above.\n\n**Option C: Analyze conversation**\n```\n/hookify\n```\n\nWithout arguments, hookify analyzes recent conversation to find behaviors you want to prevent.\n\n## Available Commands\n\n- **`/hookify`** - Create hooks from conversation analysis or explicit instructions\n- **`/hookify:help`** - Show this help (what you're reading now)\n- **`/hookify:list`** - List all configured hooks\n- **`/hookify:configure`** - Enable/disable existing hooks interactively\n\n## Example Use Cases\n\n**Prevent dangerous commands:**\n```markdown\n---\nname: block-chmod-777\nenabled: true\nevent: bash\npattern: chmod\\s+777\n---\n\nDon't use chmod 777 - it's a security risk. Use specific permissions instead.\n```\n\n**Warn about debugging code:**\n```markdown\n---\nname: warn-console-log\nenabled: true\nevent: file\npattern: console\\.log\\(\n---\n\nConsole.log detected. Remember to remove debug logging before committing.\n```\n\n**Require tests before stopping:**\n```markdown\n---\nname: require-tests\nenabled: true\nevent: stop\npattern: .*\n---\n\nDid you run tests before finishing? Make sure `npm test` or equivalent was executed.\n```\n\n## Pattern Syntax\n\nUse Python regex syntax:\n- `\\s` - whitespace\n- `\\.` - literal dot\n- `|` - OR\n- `+` - one or more\n- `*` - zero or more\n- `\\d` - digit\n- `[abc]` - character class\n\n**Examples:**\n- `rm\\s+-rf` - matches \"rm -rf\"\n- `console\\.log\\(` - matches \"console.log(\"\n- `(eval|exec)\\(` - matches \"eval(\" or \"exec(\"\n- `\\.env$` - matches files ending in .env\n\n## Important Notes\n\n**No Restart Needed**: Hookify rules (`.local.md` files) take effect immediately on the next tool use. The hookify hooks are already loaded and read your rules dynamically.\n\n**Block or Warn**: Rules can either `block` operations (prevent execution) or `warn` (show message but allow). Set `action: block` or `action: warn` in the rule's frontmatter.\n\n**Rule Files**: Keep rules in `.claude/hookify.*.local.md` - they should be git-ignored (add to .gitignore if needed).\n\n**Disable Rules**: Set `enabled: false` in frontmatter or delete the file.\n\n## Troubleshooting\n\n**Hook not triggering:**\n- Check rule file is in `.claude/` directory\n- Verify `enabled: true` in frontmatter\n- Confirm pattern is valid regex\n- Test pattern: `python3 -c \"import re; print(re.search('your_pattern', 'test_text'))\"`\n- Rules take effect immediately - no restart needed\n\n**Import errors:**\n- Check Python 3 is available: `python3 --version`\n- Verify hookify plugin is installed correctly\n\n**Pattern not matching:**\n- Test regex separately\n- Check for escaping issues (use unquoted patterns in YAML)\n- Try simpler pattern first, then refine\n\n## Getting Started\n\n1. Create your first rule:\n   ```\n   /hookify Warn me when I try to use rm -rf\n   ```\n\n2. Try to trigger it:\n   - Ask Claude to run `rm -rf /tmp/test`\n   - You should see the warning\n\n4. Refine the rule by editing `.claude/hookify.warn-rm.local.md`\n\n5. Create more rules as you encounter unwanted behaviors\n\nFor more examples, check the `${CLAUDE_PLUGIN_ROOT}/examples/` directory.\n",
        "plugins/hookify/commands/hookify.md": "---\ndescription: Create hooks to prevent unwanted behaviors from conversation analysis or explicit instructions\nargument-hint: Optional specific behavior to address\nallowed-tools: [\"Read\", \"Write\", \"AskUserQuestion\", \"Task\", \"Grep\", \"TodoWrite\", \"Skill\"]\n---\n\n# Hookify - Create Hooks from Unwanted Behaviors\n\n**FIRST: Load the hookify:writing-rules skill** using the Skill tool to understand rule file format and syntax.\n\nCreate hook rules to prevent problematic behaviors by analyzing the conversation or from explicit user instructions.\n\n## Your Task\n\nYou will help the user create hookify rules to prevent unwanted behaviors. Follow these steps:\n\n### Step 1: Gather Behavior Information\n\n**If $ARGUMENTS is provided:**\n- User has given specific instructions: `$ARGUMENTS`\n- Still analyze recent conversation (last 10-15 user messages) for additional context\n- Look for examples of the behavior happening\n\n**If $ARGUMENTS is empty:**\n- Launch the conversation-analyzer agent to find problematic behaviors\n- Agent will scan user prompts for frustration signals\n- Agent will return structured findings\n\n**To analyze conversation:**\nUse the Task tool to launch conversation-analyzer agent:\n```\n{\n  \"subagent_type\": \"general-purpose\",\n  \"description\": \"Analyze conversation for unwanted behaviors\",\n  \"prompt\": \"You are analyzing a Claude Code conversation to find behaviors the user wants to prevent.\n\nRead user messages in the current conversation and identify:\n1. Explicit requests to avoid something (\\\"don't do X\\\", \\\"stop doing Y\\\")\n2. Corrections or reversions (user fixing Claude's actions)\n3. Frustrated reactions (\\\"why did you do X?\\\", \\\"I didn't ask for that\\\")\n4. Repeated issues (same problem multiple times)\n\nFor each issue found, extract:\n- What tool was used (Bash, Edit, Write, etc.)\n- Specific pattern or command\n- Why it was problematic\n- User's stated reason\n\nReturn findings as a structured list with:\n- category: Type of issue\n- tool: Which tool was involved\n- pattern: Regex or literal pattern to match\n- context: What happened\n- severity: high/medium/low\n\nFocus on the most recent issues (last 20-30 messages). Don't go back further unless explicitly asked.\"\n}\n```\n\n### Step 2: Present Findings to User\n\nAfter gathering behaviors (from arguments or agent), present to user using AskUserQuestion:\n\n**Question 1: Which behaviors to hookify?**\n- Header: \"Create Rules\"\n- multiSelect: true\n- Options: List each detected behavior (max 4)\n  - Label: Short description (e.g., \"Block rm -rf\")\n  - Description: Why it's problematic\n\n**Question 2: For each selected behavior, ask about action:**\n- \"Should this block the operation or just warn?\"\n- Options:\n  - \"Just warn\" (action: warn - shows message but allows)\n  - \"Block operation\" (action: block - prevents execution)\n\n**Question 3: Ask for example patterns:**\n- \"What patterns should trigger this rule?\"\n- Show detected patterns\n- Allow user to refine or add more\n\n### Step 3: Generate Rule Files\n\nFor each confirmed behavior, create a `.claude/hookify.{rule-name}.local.md` file:\n\n**Rule naming convention:**\n- Use kebab-case\n- Be descriptive: `block-dangerous-rm`, `warn-console-log`, `require-tests-before-stop`\n- Start with action verb: block, warn, prevent, require\n\n**File format:**\n```markdown\n---\nname: {rule-name}\nenabled: true\nevent: {bash|file|stop|prompt|all}\npattern: {regex pattern}\naction: {warn|block}\n---\n\n{Message to show Claude when rule triggers}\n```\n\n**Action values:**\n- `warn`: Show message but allow operation (default)\n- `block`: Prevent operation or stop session\n\n**For more complex rules (multiple conditions):**\n```markdown\n---\nname: {rule-name}\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.env$\n  - field: new_text\n    operator: contains\n    pattern: API_KEY\n---\n\n{Warning message}\n```\n\n### Step 4: Create Files and Confirm\n\n**IMPORTANT**: Rule files must be created in the current working directory's `.claude/` folder, NOT the plugin directory.\n\nUse the current working directory (where Claude Code was started) as the base path.\n\n1. Check if `.claude/` directory exists in current working directory\n   - If not, create it first with: `mkdir -p .claude`\n\n2. Use Write tool to create each `.claude/hookify.{name}.local.md` file\n   - Use relative path from current working directory: `.claude/hookify.{name}.local.md`\n   - The path should resolve to the project's .claude directory, not the plugin's\n\n3. Show user what was created:\n   ```\n   Created 3 hookify rules:\n   - .claude/hookify.dangerous-rm.local.md\n   - .claude/hookify.console-log.local.md\n   - .claude/hookify.sensitive-files.local.md\n\n   These rules will trigger on:\n   - dangerous-rm: Bash commands matching \"rm -rf\"\n   - console-log: Edits adding console.log statements\n   - sensitive-files: Edits to .env or credentials files\n   ```\n\n4. Verify files were created in the correct location by listing them\n\n5. Inform user: **\"Rules are active immediately - no restart needed!\"**\n\n   The hookify hooks are already loaded and will read your new rules on the next tool use.\n\n## Event Types Reference\n\n- **bash**: Matches Bash tool commands\n- **file**: Matches Edit, Write, MultiEdit tools\n- **stop**: Matches when agent wants to stop (use for completion checks)\n- **prompt**: Matches when user submits prompts\n- **all**: Matches all events\n\n## Pattern Writing Tips\n\n**Bash patterns:**\n- Match dangerous commands: `rm\\s+-rf|chmod\\s+777|dd\\s+if=`\n- Match specific tools: `npm\\s+install\\s+|pip\\s+install`\n\n**File patterns:**\n- Match code patterns: `console\\.log\\(|eval\\(|innerHTML\\s*=`\n- Match file paths: `\\.env$|\\.git/|node_modules/`\n\n**Stop patterns:**\n- Check for missing steps: (check transcript or completion criteria)\n\n## Example Workflow\n\n**User says**: \"/hookify Don't use rm -rf without asking me first\"\n\n**Your response**:\n1. Analyze: User wants to prevent rm -rf commands\n2. Ask: \"Should I block this command or just warn you?\"\n3. User selects: \"Just warn\"\n4. Create `.claude/hookify.dangerous-rm.local.md`:\n   ```markdown\n   ---\n   name: warn-dangerous-rm\n   enabled: true\n   event: bash\n   pattern: rm\\s+-rf\n   ---\n\n   ⚠️ **Dangerous rm command detected**\n\n   You requested to be warned before using rm -rf.\n   Please verify the path is correct.\n   ```\n5. Confirm: \"Created hookify rule. It's active immediately - try triggering it!\"\n\n## Important Notes\n\n- **No restart needed**: Rules take effect immediately on the next tool use\n- **File location**: Create files in project's `.claude/` directory (current working directory), NOT the plugin's .claude/\n- **Regex syntax**: Use Python regex syntax (raw strings, no need to escape in YAML)\n- **Action types**: Rules can `warn` (default) or `block` operations\n- **Testing**: Test rules immediately after creating them\n\n## Troubleshooting\n\n**If rule file creation fails:**\n1. Check current working directory with pwd\n2. Ensure `.claude/` directory exists (create with mkdir if needed)\n3. Use absolute path if needed: `{cwd}/.claude/hookify.{name}.local.md`\n4. Verify file was created with Glob or ls\n\n**If rule doesn't trigger after creation:**\n1. Verify file is in project `.claude/` not plugin `.claude/`\n2. Check file with Read tool to ensure pattern is correct\n3. Test pattern with: `python3 -c \"import re; print(re.search(r'pattern', 'test text'))\"`\n4. Verify `enabled: true` in frontmatter\n5. Remember: Rules work immediately, no restart needed\n\n**If blocking seems too strict:**\n1. Change `action: block` to `action: warn` in the rule file\n2. Or adjust the pattern to be more specific\n3. Changes take effect on next tool use\n\nUse TodoWrite to track your progress through the steps.\n",
        "plugins/hookify/commands/list.md": "---\ndescription: List all configured hookify rules\nallowed-tools: [\"Glob\", \"Read\", \"Skill\"]\n---\n\n# List Hookify Rules\n\n**Load hookify:writing-rules skill first** to understand rule format.\n\nShow all configured hookify rules in the project.\n\n## Steps\n\n1. Use Glob tool to find all hookify rule files:\n   ```\n   pattern: \".claude/hookify.*.local.md\"\n   ```\n\n2. For each file found:\n   - Use Read tool to read the file\n   - Extract frontmatter fields: name, enabled, event, pattern\n   - Extract message preview (first 100 chars)\n\n3. Present results in a table:\n\n```\n## Configured Hookify Rules\n\n| Name | Enabled | Event | Pattern | File |\n|------|---------|-------|---------|------|\n| warn-dangerous-rm | ✅ Yes | bash | rm\\s+-rf | hookify.dangerous-rm.local.md |\n| warn-console-log | ✅ Yes | file | console\\.log\\( | hookify.console-log.local.md |\n| check-tests | ❌ No | stop | .* | hookify.require-tests.local.md |\n\n**Total**: 3 rules (2 enabled, 1 disabled)\n```\n\n4. For each rule, show a brief preview:\n```\n### warn-dangerous-rm\n**Event**: bash\n**Pattern**: `rm\\s+-rf`\n**Message**: \"⚠️ **Dangerous rm command detected!** This command could delete...\"\n\n**Status**: ✅ Active\n**File**: .claude/hookify.dangerous-rm.local.md\n```\n\n5. Add helpful footer:\n```\n---\n\nTo modify a rule: Edit the .local.md file directly\nTo disable a rule: Set `enabled: false` in frontmatter\nTo enable a rule: Set `enabled: true` in frontmatter\nTo delete a rule: Remove the .local.md file\nTo create a rule: Use `/hookify` command\n\n**Remember**: Changes take effect immediately - no restart needed\n```\n\n## If No Rules Found\n\nIf no hookify rules exist:\n\n```\n## No Hookify Rules Configured\n\nYou haven't created any hookify rules yet.\n\nTo get started:\n1. Use `/hookify` to analyze conversation and create rules\n2. Or manually create `.claude/hookify.my-rule.local.md` files\n3. See `/hookify:help` for documentation\n\nExample:\n```\n/hookify Warn me when I use console.log\n```\n\nCheck `${CLAUDE_PLUGIN_ROOT}/examples/` for example rule files.\n```\n",
        "plugins/hookify/hooks/hooks.json": "{\n  \"description\": \"Hookify plugin - User-configurable hooks from .local.md files\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/hooks/pretooluse.py\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/hooks/posttooluse.py\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ],\n    \"Stop\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/hooks/stop.py\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ],\n    \"UserPromptSubmit\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/hooks/userpromptsubmit.py\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/hookify/hooks/posttooluse.py": "#!/usr/bin/env python3\n\"\"\"PostToolUse hook executor for hookify plugin.\n\nThis script is called by Claude Code after a tool executes.\nIt reads .claude/hookify.*.local.md files and evaluates rules.\n\"\"\"\n\nimport os\nimport sys\nimport json\n\n# CRITICAL: Add plugin root to Python path for imports\nPLUGIN_ROOT = os.environ.get('CLAUDE_PLUGIN_ROOT')\nif PLUGIN_ROOT:\n    parent_dir = os.path.dirname(PLUGIN_ROOT)\n    if parent_dir not in sys.path:\n        sys.path.insert(0, parent_dir)\n    if PLUGIN_ROOT not in sys.path:\n        sys.path.insert(0, PLUGIN_ROOT)\n\ntry:\n    from hookify.core.config_loader import load_rules\n    from hookify.core.rule_engine import RuleEngine\nexcept ImportError as e:\n    error_msg = {\"systemMessage\": f\"Hookify import error: {e}\"}\n    print(json.dumps(error_msg), file=sys.stdout)\n    sys.exit(0)\n\n\ndef main():\n    \"\"\"Main entry point for PostToolUse hook.\"\"\"\n    try:\n        # Read input from stdin\n        input_data = json.load(sys.stdin)\n\n        # Determine event type based on tool\n        tool_name = input_data.get('tool_name', '')\n        event = None\n        if tool_name == 'Bash':\n            event = 'bash'\n        elif tool_name in ['Edit', 'Write', 'MultiEdit']:\n            event = 'file'\n\n        # Load rules\n        rules = load_rules(event=event)\n\n        # Evaluate rules\n        engine = RuleEngine()\n        result = engine.evaluate_rules(rules, input_data)\n\n        # Always output JSON (even if empty)\n        print(json.dumps(result), file=sys.stdout)\n\n    except Exception as e:\n        error_output = {\n            \"systemMessage\": f\"Hookify error: {str(e)}\"\n        }\n        print(json.dumps(error_output), file=sys.stdout)\n\n    finally:\n        # ALWAYS exit 0\n        sys.exit(0)\n\n\nif __name__ == '__main__':\n    main()\n",
        "plugins/hookify/hooks/pretooluse.py": "#!/usr/bin/env python3\n\"\"\"PreToolUse hook executor for hookify plugin.\n\nThis script is called by Claude Code before any tool executes.\nIt reads .claude/hookify.*.local.md files and evaluates rules.\n\"\"\"\n\nimport os\nimport sys\nimport json\n\n# CRITICAL: Add plugin root to Python path for imports\n# We need to add the parent of the plugin directory so Python can find \"hookify\" package\nPLUGIN_ROOT = os.environ.get('CLAUDE_PLUGIN_ROOT')\nif PLUGIN_ROOT:\n    # Add the parent directory of the plugin\n    parent_dir = os.path.dirname(PLUGIN_ROOT)\n    if parent_dir not in sys.path:\n        sys.path.insert(0, parent_dir)\n\n    # Also add PLUGIN_ROOT itself in case we have other scripts\n    if PLUGIN_ROOT not in sys.path:\n        sys.path.insert(0, PLUGIN_ROOT)\n\ntry:\n    from hookify.core.config_loader import load_rules\n    from hookify.core.rule_engine import RuleEngine\nexcept ImportError as e:\n    # If imports fail, allow operation and log error\n    error_msg = {\"systemMessage\": f\"Hookify import error: {e}\"}\n    print(json.dumps(error_msg), file=sys.stdout)\n    sys.exit(0)\n\n\ndef main():\n    \"\"\"Main entry point for PreToolUse hook.\"\"\"\n    try:\n        # Read input from stdin\n        input_data = json.load(sys.stdin)\n\n        # Determine event type for filtering\n        # For PreToolUse, we use tool_name to determine \"bash\" vs \"file\" event\n        tool_name = input_data.get('tool_name', '')\n\n        event = None\n        if tool_name == 'Bash':\n            event = 'bash'\n        elif tool_name in ['Edit', 'Write', 'MultiEdit']:\n            event = 'file'\n\n        # Load rules\n        rules = load_rules(event=event)\n\n        # Evaluate rules\n        engine = RuleEngine()\n        result = engine.evaluate_rules(rules, input_data)\n\n        # Always output JSON (even if empty)\n        print(json.dumps(result), file=sys.stdout)\n\n    except Exception as e:\n        # On any error, allow the operation and log\n        error_output = {\n            \"systemMessage\": f\"Hookify error: {str(e)}\"\n        }\n        print(json.dumps(error_output), file=sys.stdout)\n\n    finally:\n        # ALWAYS exit 0 - never block operations due to hook errors\n        sys.exit(0)\n\n\nif __name__ == '__main__':\n    main()\n",
        "plugins/hookify/hooks/stop.py": "#!/usr/bin/env python3\n\"\"\"Stop hook executor for hookify plugin.\n\nThis script is called by Claude Code when agent wants to stop.\nIt reads .claude/hookify.*.local.md files and evaluates stop rules.\n\"\"\"\n\nimport os\nimport sys\nimport json\n\n# CRITICAL: Add plugin root to Python path for imports\nPLUGIN_ROOT = os.environ.get('CLAUDE_PLUGIN_ROOT')\nif PLUGIN_ROOT:\n    parent_dir = os.path.dirname(PLUGIN_ROOT)\n    if parent_dir not in sys.path:\n        sys.path.insert(0, parent_dir)\n    if PLUGIN_ROOT not in sys.path:\n        sys.path.insert(0, PLUGIN_ROOT)\n\ntry:\n    from hookify.core.config_loader import load_rules\n    from hookify.core.rule_engine import RuleEngine\nexcept ImportError as e:\n    error_msg = {\"systemMessage\": f\"Hookify import error: {e}\"}\n    print(json.dumps(error_msg), file=sys.stdout)\n    sys.exit(0)\n\n\ndef main():\n    \"\"\"Main entry point for Stop hook.\"\"\"\n    try:\n        # Read input from stdin\n        input_data = json.load(sys.stdin)\n\n        # Load stop rules\n        rules = load_rules(event='stop')\n\n        # Evaluate rules\n        engine = RuleEngine()\n        result = engine.evaluate_rules(rules, input_data)\n\n        # Always output JSON (even if empty)\n        print(json.dumps(result), file=sys.stdout)\n\n    except Exception as e:\n        # On any error, allow the operation\n        error_output = {\n            \"systemMessage\": f\"Hookify error: {str(e)}\"\n        }\n        print(json.dumps(error_output), file=sys.stdout)\n\n    finally:\n        # ALWAYS exit 0\n        sys.exit(0)\n\n\nif __name__ == '__main__':\n    main()\n",
        "plugins/hookify/hooks/userpromptsubmit.py": "#!/usr/bin/env python3\n\"\"\"UserPromptSubmit hook executor for hookify plugin.\n\nThis script is called by Claude Code when user submits a prompt.\nIt reads .claude/hookify.*.local.md files and evaluates rules.\n\"\"\"\n\nimport os\nimport sys\nimport json\n\n# CRITICAL: Add plugin root to Python path for imports\nPLUGIN_ROOT = os.environ.get('CLAUDE_PLUGIN_ROOT')\nif PLUGIN_ROOT:\n    parent_dir = os.path.dirname(PLUGIN_ROOT)\n    if parent_dir not in sys.path:\n        sys.path.insert(0, parent_dir)\n    if PLUGIN_ROOT not in sys.path:\n        sys.path.insert(0, PLUGIN_ROOT)\n\ntry:\n    from hookify.core.config_loader import load_rules\n    from hookify.core.rule_engine import RuleEngine\nexcept ImportError as e:\n    error_msg = {\"systemMessage\": f\"Hookify import error: {e}\"}\n    print(json.dumps(error_msg), file=sys.stdout)\n    sys.exit(0)\n\n\ndef main():\n    \"\"\"Main entry point for UserPromptSubmit hook.\"\"\"\n    try:\n        # Read input from stdin\n        input_data = json.load(sys.stdin)\n\n        # Load user prompt rules\n        rules = load_rules(event='prompt')\n\n        # Evaluate rules\n        engine = RuleEngine()\n        result = engine.evaluate_rules(rules, input_data)\n\n        # Always output JSON (even if empty)\n        print(json.dumps(result), file=sys.stdout)\n\n    except Exception as e:\n        error_output = {\n            \"systemMessage\": f\"Hookify error: {str(e)}\"\n        }\n        print(json.dumps(error_output), file=sys.stdout)\n\n    finally:\n        # ALWAYS exit 0\n        sys.exit(0)\n\n\nif __name__ == '__main__':\n    main()\n",
        "plugins/hookify/skills/writing-rules/SKILL.md": "---\nname: Writing Hookify Rules\ndescription: This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"configure hookify\", \"add a hookify rule\", or needs guidance on hookify rule syntax and patterns.\nversion: 0.1.0\n---\n\n# Writing Hookify Rules\n\n## Overview\n\nHookify rules are markdown files with YAML frontmatter that define patterns to watch for and messages to show when those patterns match. Rules are stored in `.claude/hookify.{rule-name}.local.md` files.\n\n## Rule File Format\n\n### Basic Structure\n\n```markdown\n---\nname: rule-identifier\nenabled: true\nevent: bash|file|stop|prompt|all\npattern: regex-pattern-here\n---\n\nMessage to show Claude when this rule triggers.\nCan include markdown formatting, warnings, suggestions, etc.\n```\n\n### Frontmatter Fields\n\n**name** (required): Unique identifier for the rule\n- Use kebab-case: `warn-dangerous-rm`, `block-console-log`\n- Be descriptive and action-oriented\n- Start with verb: warn, prevent, block, require, check\n\n**enabled** (required): Boolean to activate/deactivate\n- `true`: Rule is active\n- `false`: Rule is disabled (won't trigger)\n- Can toggle without deleting rule\n\n**event** (required): Which hook event to trigger on\n- `bash`: Bash tool commands\n- `file`: Edit, Write, MultiEdit tools\n- `stop`: When agent wants to stop\n- `prompt`: When user submits a prompt\n- `all`: All events\n\n**action** (optional): What to do when rule matches\n- `warn`: Show message but allow operation (default)\n- `block`: Prevent operation (PreToolUse) or stop session (Stop events)\n- If omitted, defaults to `warn`\n\n**pattern** (simple format): Regex pattern to match\n- Used for simple single-condition rules\n- Matches against command (bash) or new_text (file)\n- Python regex syntax\n\n**Example:**\n```yaml\nevent: bash\npattern: rm\\s+-rf\n```\n\n### Advanced Format (Multiple Conditions)\n\nFor complex rules with multiple conditions:\n\n```markdown\n---\nname: warn-env-file-edits\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.env$\n  - field: new_text\n    operator: contains\n    pattern: API_KEY\n---\n\nYou're adding an API key to a .env file. Ensure this file is in .gitignore!\n```\n\n**Condition fields:**\n- `field`: Which field to check\n  - For bash: `command`\n  - For file: `file_path`, `new_text`, `old_text`, `content`\n- `operator`: How to match\n  - `regex_match`: Regex pattern matching\n  - `contains`: Substring check\n  - `equals`: Exact match\n  - `not_contains`: Substring must NOT be present\n  - `starts_with`: Prefix check\n  - `ends_with`: Suffix check\n- `pattern`: Pattern or string to match\n\n**All conditions must match for rule to trigger.**\n\n## Message Body\n\nThe markdown content after frontmatter is shown to Claude when the rule triggers.\n\n**Good messages:**\n- Explain what was detected\n- Explain why it's problematic\n- Suggest alternatives or best practices\n- Use formatting for clarity (bold, lists, etc.)\n\n**Example:**\n```markdown\n⚠️ **Console.log detected!**\n\nYou're adding console.log to production code.\n\n**Why this matters:**\n- Debug logs shouldn't ship to production\n- Console.log can expose sensitive data\n- Impacts browser performance\n\n**Alternatives:**\n- Use a proper logging library\n- Remove before committing\n- Use conditional debug builds\n```\n\n## Event Type Guide\n\n### bash Events\n\nMatch Bash command patterns:\n\n```markdown\n---\nevent: bash\npattern: sudo\\s+|rm\\s+-rf|chmod\\s+777\n---\n\nDangerous command detected!\n```\n\n**Common patterns:**\n- Dangerous commands: `rm\\s+-rf`, `dd\\s+if=`, `mkfs`\n- Privilege escalation: `sudo\\s+`, `su\\s+`\n- Permission issues: `chmod\\s+777`, `chown\\s+root`\n\n### file Events\n\nMatch Edit/Write/MultiEdit operations:\n\n```markdown\n---\nevent: file\npattern: console\\.log\\(|eval\\(|innerHTML\\s*=\n---\n\nPotentially problematic code pattern detected!\n```\n\n**Match on different fields:**\n```markdown\n---\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.tsx?$\n  - field: new_text\n    operator: regex_match\n    pattern: console\\.log\\(\n---\n\nConsole.log in TypeScript file!\n```\n\n**Common patterns:**\n- Debug code: `console\\.log\\(`, `debugger`, `print\\(`\n- Security risks: `eval\\(`, `innerHTML\\s*=`, `dangerouslySetInnerHTML`\n- Sensitive files: `\\.env$`, `credentials`, `\\.pem$`\n- Generated files: `node_modules/`, `dist/`, `build/`\n\n### stop Events\n\nMatch when agent wants to stop (completion checks):\n\n```markdown\n---\nevent: stop\npattern: .*\n---\n\nBefore stopping, verify:\n- [ ] Tests were run\n- [ ] Build succeeded\n- [ ] Documentation updated\n```\n\n**Use for:**\n- Reminders about required steps\n- Completion checklists\n- Process enforcement\n\n### prompt Events\n\nMatch user prompt content (advanced):\n\n```markdown\n---\nevent: prompt\nconditions:\n  - field: user_prompt\n    operator: contains\n    pattern: deploy to production\n---\n\nProduction deployment checklist:\n- [ ] Tests passing?\n- [ ] Reviewed by team?\n- [ ] Monitoring ready?\n```\n\n## Pattern Writing Tips\n\n### Regex Basics\n\n**Literal characters:** Most characters match themselves\n- `rm` matches \"rm\"\n- `console.log` matches \"console.log\"\n\n**Special characters need escaping:**\n- `.` (any char) → `\\.` (literal dot)\n- `(` `)` → `\\(` `\\)` (literal parens)\n- `[` `]` → `\\[` `\\]` (literal brackets)\n\n**Common metacharacters:**\n- `\\s` - whitespace (space, tab, newline)\n- `\\d` - digit (0-9)\n- `\\w` - word character (a-z, A-Z, 0-9, _)\n- `.` - any character\n- `+` - one or more\n- `*` - zero or more\n- `?` - zero or one\n- `|` - OR\n\n**Examples:**\n```\nrm\\s+-rf         Matches: rm -rf, rm  -rf\nconsole\\.log\\(   Matches: console.log(\n(eval|exec)\\(    Matches: eval( or exec(\nchmod\\s+777      Matches: chmod 777, chmod  777\nAPI_KEY\\s*=      Matches: API_KEY=, API_KEY =\n```\n\n### Testing Patterns\n\nTest regex patterns before using:\n\n```bash\npython3 -c \"import re; print(re.search(r'your_pattern', 'test text'))\"\n```\n\nOr use online regex testers (regex101.com with Python flavor).\n\n### Common Pitfalls\n\n**Too broad:**\n```yaml\npattern: log    # Matches \"log\", \"login\", \"dialog\", \"catalog\"\n```\nBetter: `console\\.log\\(|logger\\.`\n\n**Too specific:**\n```yaml\npattern: rm -rf /tmp  # Only matches exact path\n```\nBetter: `rm\\s+-rf`\n\n**Escaping issues:**\n- YAML quoted strings: `\"pattern\"` requires double backslashes `\\\\s`\n- YAML unquoted: `pattern: \\s` works as-is\n- **Recommendation**: Use unquoted patterns in YAML\n\n## File Organization\n\n**Location:** All rules in `.claude/` directory\n**Naming:** `.claude/hookify.{descriptive-name}.local.md`\n**Gitignore:** Add `.claude/*.local.md` to `.gitignore`\n\n**Good names:**\n- `hookify.dangerous-rm.local.md`\n- `hookify.console-log.local.md`\n- `hookify.require-tests.local.md`\n- `hookify.sensitive-files.local.md`\n\n**Bad names:**\n- `hookify.rule1.local.md` (not descriptive)\n- `hookify.md` (missing .local)\n- `danger.local.md` (missing hookify prefix)\n\n## Workflow\n\n### Creating a Rule\n\n1. Identify unwanted behavior\n2. Determine which tool is involved (Bash, Edit, etc.)\n3. Choose event type (bash, file, stop, etc.)\n4. Write regex pattern\n5. Create `.claude/hookify.{name}.local.md` file in project root\n6. Test immediately - rules are read dynamically on next tool use\n\n### Refining a Rule\n\n1. Edit the `.local.md` file\n2. Adjust pattern or message\n3. Test immediately - changes take effect on next tool use\n\n### Disabling a Rule\n\n**Temporary:** Set `enabled: false` in frontmatter\n**Permanent:** Delete the `.local.md` file\n\n## Examples\n\nSee `${CLAUDE_PLUGIN_ROOT}/examples/` for complete examples:\n- `dangerous-rm.local.md` - Block dangerous rm commands\n- `console-log-warning.local.md` - Warn about console.log\n- `sensitive-files-warning.local.md` - Warn about editing .env files\n\n## Quick Reference\n\n**Minimum viable rule:**\n```markdown\n---\nname: my-rule\nenabled: true\nevent: bash\npattern: dangerous_command\n---\n\nWarning message here\n```\n\n**Rule with conditions:**\n```markdown\n---\nname: my-rule\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.ts$\n  - field: new_text\n    operator: contains\n    pattern: any\n---\n\nWarning message\n```\n\n**Event types:**\n- `bash` - Bash commands\n- `file` - File edits\n- `stop` - Completion checks\n- `prompt` - User input\n- `all` - All events\n\n**Field options:**\n- Bash: `command`\n- File: `file_path`, `new_text`, `old_text`, `content`\n- Prompt: `user_prompt`\n\n**Operators:**\n- `regex_match`, `contains`, `equals`, `not_contains`, `starts_with`, `ends_with`\n",
        "plugins/learning-output-style/.claude-plugin/plugin.json": "{\n  \"name\": \"learning-output-style\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Interactive learning mode that requests meaningful code contributions at decision points (mimics the unshipped Learning output style)\",\n  \"author\": {\n    \"name\": \"Boris Cherny\",\n    \"email\": \"boris@anthropic.com\"\n  }\n}\n",
        "plugins/learning-output-style/README.md": "# Learning Style Plugin\n\nThis plugin combines the unshipped Learning output style with explanatory functionality as a SessionStart hook.\n\n**Note:** This plugin differs from the original unshipped Learning output style by also incorporating all functionality from the [explanatory-output-style plugin](https://github.com/anthropics/claude-code/tree/main/plugins/explanatory-output-style), providing both interactive learning and educational insights.\n\nWARNING: Do not install this plugin unless you are fine with incurring the token cost of this plugin's additional instructions and the interactive nature of learning mode.\n\n## What it does\n\nWhen enabled, this plugin automatically adds instructions at the start of each session that encourage Claude to:\n\n1. **Learning Mode:** Engage you in active learning by requesting meaningful code contributions at decision points\n2. **Explanatory Mode:** Provide educational insights about implementation choices and codebase patterns\n\nInstead of implementing everything automatically, Claude will:\n\n1. Identify opportunities where you can write 5-10 lines of meaningful code\n2. Focus on business logic and design choices where your input truly matters\n3. Prepare the context and location for your contribution\n4. Explain trade-offs and guide your implementation\n5. Provide educational insights before and after writing code\n\n## How it works\n\nThe plugin uses a SessionStart hook to inject additional context into every session. This context instructs Claude to adopt an interactive teaching approach where you actively participate in writing key parts of the code.\n\n## When Claude requests contributions\n\nClaude will ask you to write code for:\n- Business logic with multiple valid approaches\n- Error handling strategies\n- Algorithm implementation choices\n- Data structure decisions\n- User experience decisions\n- Design patterns and architecture choices\n\n## When Claude won't request contributions\n\nClaude will implement directly:\n- Boilerplate or repetitive code\n- Obvious implementations with no meaningful choices\n- Configuration or setup code\n- Simple CRUD operations\n\n## Example interaction\n\n**Claude:** I've set up the authentication middleware. The session timeout behavior is a security vs. UX trade-off - should sessions auto-extend on activity, or have a hard timeout?\n\nIn `auth/middleware.ts`, implement the `handleSessionTimeout()` function to define the timeout behavior.\n\nConsider: auto-extending improves UX but may leave sessions open longer; hard timeouts are more secure but might frustrate active users.\n\n**You:** [Write 5-10 lines implementing your preferred approach]\n\n## Educational insights\n\nIn addition to interactive learning, Claude will provide educational insights about implementation choices using this format:\n\n```\n`★ Insight ─────────────────────────────────────`\n[2-3 key educational points about the codebase or implementation]\n`─────────────────────────────────────────────────`\n```\n\nThese insights focus on:\n- Specific implementation choices for your codebase\n- Patterns and conventions in your code\n- Trade-offs and design decisions\n- Codebase-specific details rather than general programming concepts\n\n## Usage\n\nOnce installed, the plugin activates automatically at the start of every session. No additional configuration is needed.\n\n## Migration from Output Styles\n\nThis plugin combines the unshipped \"Learning\" output style with the deprecated \"Explanatory\" output style. It provides an interactive learning experience where you actively contribute code at meaningful decision points, while also receiving educational insights about implementation choices.\n\nIf you previously used the explanatory-output-style plugin, this learning plugin includes all of that functionality plus interactive learning features.\n\nThis SessionStart hook pattern is roughly equivalent to CLAUDE.md, but it is more flexible and allows for distribution through plugins.\n\n## Managing changes\n\n- Disable the plugin - keep the code installed on your device\n- Uninstall the plugin - remove the code from your device\n- Update the plugin - create a local copy of this plugin to personalize it\n  - Hint: Ask Claude to read https://docs.claude.com/en/docs/claude-code/plugins.md and set it up for you!\n\n## Philosophy\n\nLearning by doing is more effective than passive observation. This plugin transforms your interaction with Claude from \"watch and learn\" to \"build and understand,\" ensuring you develop practical skills through hands-on coding of meaningful logic.\n",
        "plugins/learning-output-style/hooks/hooks.json": "{\n  \"description\": \"Learning mode hook that adds interactive learning instructions\",\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks-handlers/session-start.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/plugin-dev/README.md": "# Plugin Development Toolkit\n\nA comprehensive toolkit for developing Claude Code plugins with expert guidance on hooks, MCP integration, plugin structure, and marketplace publishing.\n\n## Overview\n\nThe plugin-dev toolkit provides seven specialized skills to help you build high-quality Claude Code plugins:\n\n1. **Hook Development** - Advanced hooks API and event-driven automation\n2. **MCP Integration** - Model Context Protocol server integration\n3. **Plugin Structure** - Plugin organization and manifest configuration\n4. **Plugin Settings** - Configuration patterns using .claude/plugin-name.local.md files\n5. **Command Development** - Creating slash commands with frontmatter and arguments\n6. **Agent Development** - Creating autonomous agents with AI-assisted generation\n7. **Skill Development** - Creating skills with progressive disclosure and strong triggers\n\nEach skill follows best practices with progressive disclosure: lean core documentation, detailed references, working examples, and utility scripts.\n\n## Guided Workflow Command\n\n### /plugin-dev:create-plugin\n\nA comprehensive, end-to-end workflow command for creating plugins from scratch, similar to the feature-dev workflow.\n\n**8-Phase Process:**\n1. **Discovery** - Understand plugin purpose and requirements\n2. **Component Planning** - Determine needed skills, commands, agents, hooks, MCP\n3. **Detailed Design** - Specify each component and resolve ambiguities\n4. **Structure Creation** - Set up directories and manifest\n5. **Component Implementation** - Create each component using AI-assisted agents\n6. **Validation** - Run plugin-validator and component-specific checks\n7. **Testing** - Verify plugin works in Claude Code\n8. **Documentation** - Finalize README and prepare for distribution\n\n**Features:**\n- Asks clarifying questions at each phase\n- Loads relevant skills automatically\n- Uses agent-creator for AI-assisted agent generation\n- Runs validation utilities (validate-agent.sh, validate-hook-schema.sh, etc.)\n- Follows plugin-dev's own proven patterns\n- Guides through testing and verification\n\n**Usage:**\n```bash\n/plugin-dev:create-plugin [optional description]\n\n# Examples:\n/plugin-dev:create-plugin\n/plugin-dev:create-plugin A plugin for managing database migrations\n```\n\nUse this workflow for structured, high-quality plugin development from concept to completion.\n\n## Skills\n\n### 1. Hook Development\n\n**Trigger phrases:** \"create a hook\", \"add a PreToolUse hook\", \"validate tool use\", \"implement prompt-based hooks\", \"${CLAUDE_PLUGIN_ROOT}\", \"block dangerous commands\"\n\n**What it covers:**\n- Prompt-based hooks (recommended) with LLM decision-making\n- Command hooks for deterministic validation\n- All hook events: PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification\n- Hook output formats and JSON schemas\n- Security best practices and input validation\n- ${CLAUDE_PLUGIN_ROOT} for portable paths\n\n**Resources:**\n- Core SKILL.md (1,619 words)\n- 3 example hook scripts (validate-write, validate-bash, load-context)\n- 3 reference docs: patterns, migration, advanced techniques\n- 3 utility scripts: validate-hook-schema.sh, test-hook.sh, hook-linter.sh\n\n**Use when:** Creating event-driven automation, validating operations, or enforcing policies in your plugin.\n\n### 2. MCP Integration\n\n**Trigger phrases:** \"add MCP server\", \"integrate MCP\", \"configure .mcp.json\", \"Model Context Protocol\", \"stdio/SSE/HTTP server\", \"connect external service\"\n\n**What it covers:**\n- MCP server configuration (.mcp.json vs plugin.json)\n- All server types: stdio (local), SSE (hosted/OAuth), HTTP (REST), WebSocket (real-time)\n- Environment variable expansion (${CLAUDE_PLUGIN_ROOT}, user vars)\n- MCP tool naming and usage in commands/agents\n- Authentication patterns: OAuth, tokens, env vars\n- Integration patterns and performance optimization\n\n**Resources:**\n- Core SKILL.md (1,666 words)\n- 3 example configurations (stdio, SSE, HTTP)\n- 3 reference docs: server-types (~3,200w), authentication (~2,800w), tool-usage (~2,600w)\n\n**Use when:** Integrating external services, APIs, databases, or tools into your plugin.\n\n### 3. Plugin Structure\n\n**Trigger phrases:** \"plugin structure\", \"plugin.json manifest\", \"auto-discovery\", \"component organization\", \"plugin directory layout\"\n\n**What it covers:**\n- Standard plugin directory structure and auto-discovery\n- plugin.json manifest format and all fields\n- Component organization (commands, agents, skills, hooks)\n- ${CLAUDE_PLUGIN_ROOT} usage throughout\n- File naming conventions and best practices\n- Minimal, standard, and advanced plugin patterns\n\n**Resources:**\n- Core SKILL.md (1,619 words)\n- 3 example structures (minimal, standard, advanced)\n- 2 reference docs: component-patterns, manifest-reference\n\n**Use when:** Starting a new plugin, organizing components, or configuring the plugin manifest.\n\n### 4. Plugin Settings\n\n**Trigger phrases:** \"plugin settings\", \"store plugin configuration\", \".local.md files\", \"plugin state files\", \"read YAML frontmatter\", \"per-project plugin settings\"\n\n**What it covers:**\n- .claude/plugin-name.local.md pattern for configuration\n- YAML frontmatter + markdown body structure\n- Parsing techniques for bash scripts (sed, awk, grep patterns)\n- Temporarily active hooks (flag files and quick-exit)\n- Real-world examples from multi-agent-swarm and ralph-wiggum plugins\n- Atomic file updates and validation\n- Gitignore and lifecycle management\n\n**Resources:**\n- Core SKILL.md (1,623 words)\n- 3 examples (read-settings hook, create-settings command, templates)\n- 2 reference docs: parsing-techniques, real-world-examples\n- 2 utility scripts: validate-settings.sh, parse-frontmatter.sh\n\n**Use when:** Making plugins configurable, storing per-project state, or implementing user preferences.\n\n### 5. Command Development\n\n**Trigger phrases:** \"create a slash command\", \"add a command\", \"command frontmatter\", \"define command arguments\", \"organize commands\"\n\n**What it covers:**\n- Slash command structure and markdown format\n- YAML frontmatter fields (description, argument-hint, allowed-tools)\n- Dynamic arguments and file references\n- Bash execution for context\n- Command organization and namespacing\n- Best practices for command development\n\n**Resources:**\n- Core SKILL.md (1,535 words)\n- Examples and reference documentation\n- Command organization patterns\n\n**Use when:** Creating slash commands, defining command arguments, or organizing plugin commands.\n\n### 6. Agent Development\n\n**Trigger phrases:** \"create an agent\", \"add an agent\", \"write a subagent\", \"agent frontmatter\", \"when to use description\", \"agent examples\", \"autonomous agent\"\n\n**What it covers:**\n- Agent file structure (YAML frontmatter + system prompt)\n- All frontmatter fields (name, description, model, color, tools)\n- Description format with <example> blocks for reliable triggering\n- System prompt design patterns (analysis, generation, validation, orchestration)\n- AI-assisted agent generation using Claude Code's proven prompt\n- Validation rules and best practices\n- Complete production-ready agent examples\n\n**Resources:**\n- Core SKILL.md (1,438 words)\n- 2 examples: agent-creation-prompt (AI-assisted workflow), complete-agent-examples (4 full agents)\n- 3 reference docs: agent-creation-system-prompt (from Claude Code), system-prompt-design (~4,000w), triggering-examples (~2,500w)\n- 1 utility script: validate-agent.sh\n\n**Use when:** Creating autonomous agents, defining agent behavior, or implementing AI-assisted agent generation.\n\n### 7. Skill Development\n\n**Trigger phrases:** \"create a skill\", \"add a skill to plugin\", \"write a new skill\", \"improve skill description\", \"organize skill content\"\n\n**What it covers:**\n- Skill structure (SKILL.md with YAML frontmatter)\n- Progressive disclosure principle (metadata → SKILL.md → resources)\n- Strong trigger descriptions with specific phrases\n- Writing style (imperative/infinitive form, third person)\n- Bundled resources organization (references/, examples/, scripts/)\n- Skill creation workflow\n- Based on skill-creator methodology adapted for Claude Code plugins\n\n**Resources:**\n- Core SKILL.md (1,232 words)\n- References: skill-creator methodology, plugin-dev patterns\n- Examples: Study plugin-dev's own skills as templates\n\n**Use when:** Creating new skills for plugins or improving existing skill quality.\n\n\n## Installation\n\nInstall from claude-code-marketplace:\n\n```bash\n/plugin install plugin-dev@claude-code-marketplace\n```\n\nOr for development, use directly:\n\n```bash\ncc --plugin-dir /path/to/plugin-dev\n```\n\n## Quick Start\n\n### Creating Your First Plugin\n\n1. **Plan your plugin structure:**\n   - Ask: \"What's the best directory structure for a plugin with commands and MCP integration?\"\n   - The plugin-structure skill will guide you\n\n2. **Add MCP integration (if needed):**\n   - Ask: \"How do I add an MCP server for database access?\"\n   - The mcp-integration skill provides examples and patterns\n\n3. **Implement hooks (if needed):**\n   - Ask: \"Create a PreToolUse hook that validates file writes\"\n   - The hook-development skill gives working examples and utilities\n\n\n## Development Workflow\n\nThe plugin-dev toolkit supports your entire plugin development lifecycle:\n\n```\n┌─────────────────────┐\n│  Design Structure   │  → plugin-structure skill\n│  (manifest, layout) │\n└──────────┬──────────┘\n           │\n┌──────────▼──────────┐\n│  Add Components     │\n│  (commands, agents, │  → All skills provide guidance\n│   skills, hooks)    │\n└──────────┬──────────┘\n           │\n┌──────────▼──────────┐\n│  Integrate Services │  → mcp-integration skill\n│  (MCP servers)      │\n└──────────┬──────────┘\n           │\n┌──────────▼──────────┐\n│  Add Automation     │  → hook-development skill\n│  (hooks, validation)│     + utility scripts\n└──────────┬──────────┘\n           │\n┌──────────▼──────────┐\n│  Test & Validate    │  → hook-development utilities\n│                     │     validate-hook-schema.sh\n└──────────┬──────────┘     test-hook.sh\n           │                 hook-linter.sh\n```\n\n## Features\n\n### Progressive Disclosure\n\nEach skill uses a three-level disclosure system:\n1. **Metadata** (always loaded): Concise descriptions with strong triggers\n2. **Core SKILL.md** (when triggered): Essential API reference (~1,500-2,000 words)\n3. **References/Examples** (as needed): Detailed guides, patterns, and working code\n\nThis keeps Claude Code's context focused while providing deep knowledge when needed.\n\n### Utility Scripts\n\nThe hook-development skill includes production-ready utilities:\n\n```bash\n# Validate hooks.json structure\n./validate-hook-schema.sh hooks/hooks.json\n\n# Test hooks before deployment\n./test-hook.sh my-hook.sh test-input.json\n\n# Lint hook scripts for best practices\n./hook-linter.sh my-hook.sh\n```\n\n### Working Examples\n\nEvery skill provides working examples:\n- **Hook Development**: 3 complete hook scripts (bash, write validation, context loading)\n- **MCP Integration**: 3 server configurations (stdio, SSE, HTTP)\n- **Plugin Structure**: 3 plugin layouts (minimal, standard, advanced)\n- **Plugin Settings**: 3 examples (read-settings hook, create-settings command, templates)\n- **Command Development**: 10 complete command examples (review, test, deploy, docs, etc.)\n\n## Documentation Standards\n\nAll skills follow consistent standards:\n- Third-person descriptions (\"This skill should be used when...\")\n- Strong trigger phrases for reliable loading\n- Imperative/infinitive form throughout\n- Based on official Claude Code documentation\n- Security-first approach with best practices\n\n## Total Content\n\n- **Core Skills**: ~11,065 words across 7 SKILL.md files\n- **Reference Docs**: ~10,000+ words of detailed guides\n- **Examples**: 12+ working examples (hook scripts, MCP configs, plugin layouts, settings files)\n- **Utilities**: 6 production-ready validation/testing/parsing scripts\n\n## Use Cases\n\n### Building a Database Plugin\n\n```\n1. \"What's the structure for a plugin with MCP integration?\"\n   → plugin-structure skill provides layout\n\n2. \"How do I configure an stdio MCP server for PostgreSQL?\"\n   → mcp-integration skill shows configuration\n\n3. \"Add a Stop hook to ensure connections close properly\"\n   → hook-development skill provides pattern\n\n```\n\n### Creating a Validation Plugin\n\n```\n1. \"Create hooks that validate all file writes for security\"\n   → hook-development skill with examples\n\n2. \"Test my hooks before deploying\"\n   → Use validate-hook-schema.sh and test-hook.sh\n\n3. \"Organize my hooks and configuration files\"\n   → plugin-structure skill shows best practices\n\n```\n\n### Integrating External Services\n\n```\n1. \"Add Asana MCP server with OAuth\"\n   → mcp-integration skill covers SSE servers\n\n2. \"Use Asana tools in my commands\"\n   → mcp-integration tool-usage reference\n\n3. \"Structure my plugin with commands and MCP\"\n   → plugin-structure skill provides patterns\n```\n\n## Best Practices\n\nAll skills emphasize:\n\n✅ **Security First**\n- Input validation in hooks\n- HTTPS/WSS for MCP servers\n- Environment variables for credentials\n- Principle of least privilege\n\n✅ **Portability**\n- Use ${CLAUDE_PLUGIN_ROOT} everywhere\n- Relative paths only\n- Environment variable substitution\n\n✅ **Testing**\n- Validate configurations before deployment\n- Test hooks with sample inputs\n- Use debug mode (`claude --debug`)\n\n✅ **Documentation**\n- Clear README files\n- Documented environment variables\n- Usage examples\n\n## Contributing\n\nThis plugin is part of the claude-code-marketplace. To contribute improvements:\n\n1. Fork the marketplace repository\n2. Make changes to plugin-dev/\n3. Test locally with `cc --plugin-dir`\n4. Create PR following marketplace-publishing guidelines\n\n## Version\n\n0.1.0 - Initial release with seven comprehensive skills and three validation agents\n\n## Author\n\nDaisy Hollman (daisy@anthropic.com)\n\n## License\n\nMIT License - See repository for details\n\n---\n\n**Note:** This toolkit is designed to help you build high-quality plugins. The skills load automatically when you ask relevant questions, providing expert guidance exactly when you need it.\n",
        "plugins/plugin-dev/agents/agent-creator.md": "---\nname: agent-creator\ndescription: Use this agent when the user asks to \"create an agent\", \"generate an agent\", \"build a new agent\", \"make me an agent that...\", or describes agent functionality they need. Trigger when user wants to create autonomous agents for plugins. Examples:\n\n<example>\nContext: User wants to create a code review agent\nuser: \"Create an agent that reviews code for quality issues\"\nassistant: \"I'll use the agent-creator agent to generate the agent configuration.\"\n<commentary>\nUser requesting new agent creation, trigger agent-creator to generate it.\n</commentary>\n</example>\n\n<example>\nContext: User describes needed functionality\nuser: \"I need an agent that generates unit tests for my code\"\nassistant: \"I'll use the agent-creator agent to create a test generation agent.\"\n<commentary>\nUser describes agent need, trigger agent-creator to build it.\n</commentary>\n</example>\n\n<example>\nContext: User wants to add agent to plugin\nuser: \"Add an agent to my plugin that validates configurations\"\nassistant: \"I'll use the agent-creator agent to generate a configuration validator agent.\"\n<commentary>\nPlugin development with agent addition, trigger agent-creator.\n</commentary>\n</example>\n\nmodel: sonnet\ncolor: magenta\ntools: [\"Write\", \"Read\"]\n---\n\nYou are an elite AI agent architect specializing in crafting high-performance agent configurations. Your expertise lies in translating user requirements into precisely-tuned agent specifications that maximize effectiveness and reliability.\n\n**Important Context**: You may have access to project-specific instructions from CLAUDE.md files and other context that may include coding standards, project structure, and custom requirements. Consider this context when creating agents to ensure they align with the project's established patterns and practices.\n\nWhen a user describes what they want an agent to do, you will:\n\n1. **Extract Core Intent**: Identify the fundamental purpose, key responsibilities, and success criteria for the agent. Look for both explicit requirements and implicit needs. Consider any project-specific context from CLAUDE.md files. For agents that are meant to review code, you should assume that the user is asking to review recently written code and not the whole codebase, unless the user has explicitly instructed you otherwise.\n\n2. **Design Expert Persona**: Create a compelling expert identity that embodies deep domain knowledge relevant to the task. The persona should inspire confidence and guide the agent's decision-making approach.\n\n3. **Architect Comprehensive Instructions**: Develop a system prompt that:\n   - Establishes clear behavioral boundaries and operational parameters\n   - Provides specific methodologies and best practices for task execution\n   - Anticipates edge cases and provides guidance for handling them\n   - Incorporates any specific requirements or preferences mentioned by the user\n   - Defines output format expectations when relevant\n   - Aligns with project-specific coding standards and patterns from CLAUDE.md\n\n4. **Optimize for Performance**: Include:\n   - Decision-making frameworks appropriate to the domain\n   - Quality control mechanisms and self-verification steps\n   - Efficient workflow patterns\n   - Clear escalation or fallback strategies\n\n5. **Create Identifier**: Design a concise, descriptive identifier that:\n   - Uses lowercase letters, numbers, and hyphens only\n   - Is typically 2-4 words joined by hyphens\n   - Clearly indicates the agent's primary function\n   - Is memorable and easy to type\n   - Avoids generic terms like \"helper\" or \"assistant\"\n\n6. **Craft Triggering Examples**: Create 2-4 `<example>` blocks showing:\n   - Different phrasings for same intent\n   - Both explicit and proactive triggering\n   - Context, user message, assistant response, commentary\n   - Why the agent should trigger in each scenario\n   - Show assistant using the Agent tool to launch the agent\n\n**Agent Creation Process:**\n\n1. **Understand Request**: Analyze user's description of what agent should do\n\n2. **Design Agent Configuration**:\n   - **Identifier**: Create concise, descriptive name (lowercase, hyphens, 3-50 chars)\n   - **Description**: Write triggering conditions starting with \"Use this agent when...\"\n   - **Examples**: Create 2-4 `<example>` blocks with:\n     ```\n     <example>\n     Context: [Situation that should trigger agent]\n     user: \"[User message]\"\n     assistant: \"[Response before triggering]\"\n     <commentary>\n     [Why agent should trigger]\n     </commentary>\n     assistant: \"I'll use the [agent-name] agent to [what it does].\"\n     </example>\n     ```\n   - **System Prompt**: Create comprehensive instructions with:\n     - Role and expertise\n     - Core responsibilities (numbered list)\n     - Detailed process (step-by-step)\n     - Quality standards\n     - Output format\n     - Edge case handling\n\n3. **Select Configuration**:\n   - **Model**: Use `inherit` unless user specifies (sonnet for complex, haiku for simple)\n   - **Color**: Choose appropriate color:\n     - blue/cyan: Analysis, review\n     - green: Generation, creation\n     - yellow: Validation, caution\n     - red: Security, critical\n     - magenta: Transformation, creative\n   - **Tools**: Recommend minimal set needed, or omit for full access\n\n4. **Generate Agent File**: Use Write tool to create `agents/[identifier].md`:\n   ```markdown\n   ---\n   name: [identifier]\n   description: [Use this agent when... Examples: <example>...</example>]\n   model: inherit\n   color: [chosen-color]\n   tools: [\"Tool1\", \"Tool2\"]  # Optional\n   ---\n\n   [Complete system prompt]\n   ```\n\n5. **Explain to User**: Provide summary of created agent:\n   - What it does\n   - When it triggers\n   - Where it's saved\n   - How to test it\n   - Suggest running validation: `Use the plugin-validator agent to check the plugin structure`\n\n**Quality Standards:**\n- Identifier follows naming rules (lowercase, hyphens, 3-50 chars)\n- Description has strong trigger phrases and 2-4 examples\n- Examples show both explicit and proactive triggering\n- System prompt is comprehensive (500-3,000 words)\n- System prompt has clear structure (role, responsibilities, process, output)\n- Model choice is appropriate\n- Tool selection follows least privilege\n- Color choice matches agent purpose\n\n**Output Format:**\nCreate agent file, then provide summary:\n\n## Agent Created: [identifier]\n\n### Configuration\n- **Name:** [identifier]\n- **Triggers:** [When it's used]\n- **Model:** [choice]\n- **Color:** [choice]\n- **Tools:** [list or \"all tools\"]\n\n### File Created\n`agents/[identifier].md` ([word count] words)\n\n### How to Use\nThis agent will trigger when [triggering scenarios].\n\nTest it by: [suggest test scenario]\n\nValidate with: `scripts/validate-agent.sh agents/[identifier].md`\n\n### Next Steps\n[Recommendations for testing, integration, or improvements]\n\n**Edge Cases:**\n- Vague user request: Ask clarifying questions before generating\n- Conflicts with existing agents: Note conflict, suggest different scope/name\n- Very complex requirements: Break into multiple specialized agents\n- User wants specific tool access: Honor the request in agent configuration\n- User specifies model: Use specified model instead of inherit\n- First agent in plugin: Create agents/ directory first\n```\n\nThis agent automates agent creation using the proven patterns from Claude Code's internal implementation, making it easy for users to create high-quality autonomous agents.\n",
        "plugins/plugin-dev/agents/plugin-validator.md": "---\nname: plugin-validator\ndescription: Use this agent when the user asks to \"validate my plugin\", \"check plugin structure\", \"verify plugin is correct\", \"validate plugin.json\", \"check plugin files\", or mentions plugin validation. Also trigger proactively after user creates or modifies plugin components. Examples:\n\n<example>\nContext: User finished creating a new plugin\nuser: \"I've created my first plugin with commands and hooks\"\nassistant: \"Great! Let me validate the plugin structure.\"\n<commentary>\nPlugin created, proactively validate to catch issues early.\n</commentary>\nassistant: \"I'll use the plugin-validator agent to check the plugin.\"\n</example>\n\n<example>\nContext: User explicitly requests validation\nuser: \"Validate my plugin before I publish it\"\nassistant: \"I'll use the plugin-validator agent to perform comprehensive validation.\"\n<commentary>\nExplicit validation request triggers the agent.\n</commentary>\n</example>\n\n<example>\nContext: User modified plugin.json\nuser: \"I've updated the plugin manifest\"\nassistant: \"Let me validate the changes.\"\n<commentary>\nManifest modified, validate to ensure correctness.\n</commentary>\nassistant: \"I'll use the plugin-validator agent to check the manifest.\"\n</example>\n\nmodel: inherit\ncolor: yellow\ntools: [\"Read\", \"Grep\", \"Glob\", \"Bash\"]\n---\n\nYou are an expert plugin validator specializing in comprehensive validation of Claude Code plugin structure, configuration, and components.\n\n**Your Core Responsibilities:**\n1. Validate plugin structure and organization\n2. Check plugin.json manifest for correctness\n3. Validate all component files (commands, agents, skills, hooks)\n4. Verify naming conventions and file organization\n5. Check for common issues and anti-patterns\n6. Provide specific, actionable recommendations\n\n**Validation Process:**\n\n1. **Locate Plugin Root**:\n   - Check for `.claude-plugin/plugin.json`\n   - Verify plugin directory structure\n   - Note plugin location (project vs marketplace)\n\n2. **Validate Manifest** (`.claude-plugin/plugin.json`):\n   - Check JSON syntax (use Bash with `jq` or Read + manual parsing)\n   - Verify required field: `name`\n   - Check name format (kebab-case, no spaces)\n   - Validate optional fields if present:\n     - `version`: Semantic versioning format (X.Y.Z)\n     - `description`: Non-empty string\n     - `author`: Valid structure\n     - `mcpServers`: Valid server configurations\n   - Check for unknown fields (warn but don't fail)\n\n3. **Validate Directory Structure**:\n   - Use Glob to find component directories\n   - Check standard locations:\n     - `commands/` for slash commands\n     - `agents/` for agent definitions\n     - `skills/` for skill directories\n     - `hooks/hooks.json` for hooks\n   - Verify auto-discovery works\n\n4. **Validate Commands** (if `commands/` exists):\n   - Use Glob to find `commands/**/*.md`\n   - For each command file:\n     - Check YAML frontmatter present (starts with `---`)\n     - Verify `description` field exists\n     - Check `argument-hint` format if present\n     - Validate `allowed-tools` is array if present\n     - Ensure markdown content exists\n   - Check for naming conflicts\n\n5. **Validate Agents** (if `agents/` exists):\n   - Use Glob to find `agents/**/*.md`\n   - For each agent file:\n     - Use the validate-agent.sh utility from agent-development skill\n     - Or manually check:\n       - Frontmatter with `name`, `description`, `model`, `color`\n       - Name format (lowercase, hyphens, 3-50 chars)\n       - Description includes `<example>` blocks\n       - Model is valid (inherit/sonnet/opus/haiku)\n       - Color is valid (blue/cyan/green/yellow/magenta/red)\n       - System prompt exists and is substantial (>20 chars)\n\n6. **Validate Skills** (if `skills/` exists):\n   - Use Glob to find `skills/*/SKILL.md`\n   - For each skill directory:\n     - Verify `SKILL.md` file exists\n     - Check YAML frontmatter with `name` and `description`\n     - Verify description is concise and clear\n     - Check for references/, examples/, scripts/ subdirectories\n     - Validate referenced files exist\n\n7. **Validate Hooks** (if `hooks/hooks.json` exists):\n   - Use the validate-hook-schema.sh utility from hook-development skill\n   - Or manually check:\n     - Valid JSON syntax\n     - Valid event names (PreToolUse, PostToolUse, Stop, etc.)\n     - Each hook has `matcher` and `hooks` array\n     - Hook type is `command` or `prompt`\n     - Commands reference existing scripts with ${CLAUDE_PLUGIN_ROOT}\n\n8. **Validate MCP Configuration** (if `.mcp.json` or `mcpServers` in manifest):\n   - Check JSON syntax\n   - Verify server configurations:\n     - stdio: has `command` field\n     - sse/http/ws: has `url` field\n     - Type-specific fields present\n   - Check ${CLAUDE_PLUGIN_ROOT} usage for portability\n\n9. **Check File Organization**:\n   - README.md exists and is comprehensive\n   - No unnecessary files (node_modules, .DS_Store, etc.)\n   - .gitignore present if needed\n   - LICENSE file present\n\n10. **Security Checks**:\n    - No hardcoded credentials in any files\n    - MCP servers use HTTPS/WSS not HTTP/WS\n    - Hooks don't have obvious security issues\n    - No secrets in example files\n\n**Quality Standards:**\n- All validation errors include file path and specific issue\n- Warnings distinguished from errors\n- Provide fix suggestions for each issue\n- Include positive findings for well-structured components\n- Categorize by severity (critical/major/minor)\n\n**Output Format:**\n## Plugin Validation Report\n\n### Plugin: [name]\nLocation: [path]\n\n### Summary\n[Overall assessment - pass/fail with key stats]\n\n### Critical Issues ([count])\n- `file/path` - [Issue] - [Fix]\n\n### Warnings ([count])\n- `file/path` - [Issue] - [Recommendation]\n\n### Component Summary\n- Commands: [count] found, [count] valid\n- Agents: [count] found, [count] valid\n- Skills: [count] found, [count] valid\n- Hooks: [present/not present], [valid/invalid]\n- MCP Servers: [count] configured\n\n### Positive Findings\n- [What's done well]\n\n### Recommendations\n1. [Priority recommendation]\n2. [Additional recommendation]\n\n### Overall Assessment\n[PASS/FAIL] - [Reasoning]\n\n**Edge Cases:**\n- Minimal plugin (just plugin.json): Valid if manifest correct\n- Empty directories: Warn but don't fail\n- Unknown fields in manifest: Warn but don't fail\n- Multiple validation errors: Group by file, prioritize critical\n- Plugin not found: Clear error message with guidance\n- Corrupted files: Skip and report, continue validation\n```\n\nExcellent work! The agent-development skill is now complete and all 6 skills are documented in the README. Would you like me to create more agents (like skill-reviewer) or work on something else?",
        "plugins/plugin-dev/agents/skill-reviewer.md": "---\nname: skill-reviewer\ndescription: Use this agent when the user has created or modified a skill and needs quality review, asks to \"review my skill\", \"check skill quality\", \"improve skill description\", or wants to ensure skill follows best practices. Trigger proactively after skill creation. Examples:\n\n<example>\nContext: User just created a new skill\nuser: \"I've created a PDF processing skill\"\nassistant: \"Great! Let me review the skill quality.\"\n<commentary>\nSkill created, proactively trigger skill-reviewer to ensure it follows best practices.\n</commentary>\nassistant: \"I'll use the skill-reviewer agent to review the skill.\"\n</example>\n\n<example>\nContext: User requests skill review\nuser: \"Review my skill and tell me how to improve it\"\nassistant: \"I'll use the skill-reviewer agent to analyze the skill quality.\"\n<commentary>\nExplicit skill review request triggers the agent.\n</commentary>\n</example>\n\n<example>\nContext: User modified skill description\nuser: \"I updated the skill description, does it look good?\"\nassistant: \"I'll use the skill-reviewer agent to review the changes.\"\n<commentary>\nSkill description modified, review for triggering effectiveness.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: cyan\ntools: [\"Read\", \"Grep\", \"Glob\"]\n---\n\nYou are an expert skill architect specializing in reviewing and improving Claude Code skills for maximum effectiveness and reliability.\n\n**Your Core Responsibilities:**\n1. Review skill structure and organization\n2. Evaluate description quality and triggering effectiveness\n3. Assess progressive disclosure implementation\n4. Check adherence to skill-creator best practices\n5. Provide specific recommendations for improvement\n\n**Skill Review Process:**\n\n1. **Locate and Read Skill**:\n   - Find SKILL.md file (user should indicate path)\n   - Read frontmatter and body content\n   - Check for supporting directories (references/, examples/, scripts/)\n\n2. **Validate Structure**:\n   - Frontmatter format (YAML between `---`)\n   - Required fields: `name`, `description`\n   - Optional fields: `version`, `when_to_use` (note: deprecated, use description only)\n   - Body content exists and is substantial\n\n3. **Evaluate Description** (Most Critical):\n   - **Trigger Phrases**: Does description include specific phrases users would say?\n   - **Third Person**: Uses \"This skill should be used when...\" not \"Load this skill when...\"\n   - **Specificity**: Concrete scenarios, not vague\n   - **Length**: Appropriate (not too short <50 chars, not too long >500 chars for description)\n   - **Example Triggers**: Lists specific user queries that should trigger skill\n\n4. **Assess Content Quality**:\n   - **Word Count**: SKILL.md body should be 1,000-3,000 words (lean, focused)\n   - **Writing Style**: Imperative/infinitive form (\"To do X, do Y\" not \"You should do X\")\n   - **Organization**: Clear sections, logical flow\n   - **Specificity**: Concrete guidance, not vague advice\n\n5. **Check Progressive Disclosure**:\n   - **Core SKILL.md**: Essential information only\n   - **references/**: Detailed docs moved out of core\n   - **examples/**: Working code examples separate\n   - **scripts/**: Utility scripts if needed\n   - **Pointers**: SKILL.md references these resources clearly\n\n6. **Review Supporting Files** (if present):\n   - **references/**: Check quality, relevance, organization\n   - **examples/**: Verify examples are complete and correct\n   - **scripts/**: Check scripts are executable and documented\n\n7. **Identify Issues**:\n   - Categorize by severity (critical/major/minor)\n   - Note anti-patterns:\n     - Vague trigger descriptions\n     - Too much content in SKILL.md (should be in references/)\n     - Second person in description\n     - Missing key triggers\n     - No examples/references when they'd be valuable\n\n8. **Generate Recommendations**:\n   - Specific fixes for each issue\n   - Before/after examples when helpful\n   - Prioritized by impact\n\n**Quality Standards:**\n- Description must have strong, specific trigger phrases\n- SKILL.md should be lean (under 3,000 words ideally)\n- Writing style must be imperative/infinitive form\n- Progressive disclosure properly implemented\n- All file references work correctly\n- Examples are complete and accurate\n\n**Output Format:**\n## Skill Review: [skill-name]\n\n### Summary\n[Overall assessment and word counts]\n\n### Description Analysis\n**Current:** [Show current description]\n\n**Issues:**\n- [Issue 1 with description]\n- [Issue 2...]\n\n**Recommendations:**\n- [Specific fix 1]\n- Suggested improved description: \"[better version]\"\n\n### Content Quality\n\n**SKILL.md Analysis:**\n- Word count: [count] ([assessment: too long/good/too short])\n- Writing style: [assessment]\n- Organization: [assessment]\n\n**Issues:**\n- [Content issue 1]\n- [Content issue 2]\n\n**Recommendations:**\n- [Specific improvement 1]\n- Consider moving [section X] to references/[filename].md\n\n### Progressive Disclosure\n\n**Current Structure:**\n- SKILL.md: [word count]\n- references/: [count] files, [total words]\n- examples/: [count] files\n- scripts/: [count] files\n\n**Assessment:**\n[Is progressive disclosure effective?]\n\n**Recommendations:**\n[Suggestions for better organization]\n\n### Specific Issues\n\n#### Critical ([count])\n- [File/location]: [Issue] - [Fix]\n\n#### Major ([count])\n- [File/location]: [Issue] - [Recommendation]\n\n#### Minor ([count])\n- [File/location]: [Issue] - [Suggestion]\n\n### Positive Aspects\n- [What's done well 1]\n- [What's done well 2]\n\n### Overall Rating\n[Pass/Needs Improvement/Needs Major Revision]\n\n### Priority Recommendations\n1. [Highest priority fix]\n2. [Second priority]\n3. [Third priority]\n\n**Edge Cases:**\n- Skill with no description issues: Focus on content and organization\n- Very long skill (>5,000 words): Strongly recommend splitting into references\n- New skill (minimal content): Provide constructive building guidance\n- Perfect skill: Acknowledge quality and suggest minor enhancements only\n- Missing referenced files: Report errors clearly with paths\n```\n\nThis agent helps users create high-quality skills by applying the same standards used in plugin-dev's own skills.\n",
        "plugins/plugin-dev/commands/create-plugin.md": "---\ndescription: Guided end-to-end plugin creation workflow with component design, implementation, and validation\nargument-hint: Optional plugin description\nallowed-tools: [\"Read\", \"Write\", \"Grep\", \"Glob\", \"Bash\", \"TodoWrite\", \"AskUserQuestion\", \"Skill\", \"Task\"]\n---\n\n# Plugin Creation Workflow\n\nGuide the user through creating a complete, high-quality Claude Code plugin from initial concept to tested implementation. Follow a systematic approach: understand requirements, design components, clarify details, implement following best practices, validate, and test.\n\n## Core Principles\n\n- **Ask clarifying questions**: Identify all ambiguities about plugin purpose, triggering, scope, and components. Ask specific, concrete questions rather than making assumptions. Wait for user answers before proceeding with implementation.\n- **Load relevant skills**: Use the Skill tool to load plugin-dev skills when needed (plugin-structure, hook-development, agent-development, etc.)\n- **Use specialized agents**: Leverage agent-creator, plugin-validator, and skill-reviewer agents for AI-assisted development\n- **Follow best practices**: Apply patterns from plugin-dev's own implementation\n- **Progressive disclosure**: Create lean skills with references/examples\n- **Use TodoWrite**: Track all progress throughout all phases\n\n**Initial request:** $ARGUMENTS\n\n---\n\n## Phase 1: Discovery\n\n**Goal**: Understand what plugin needs to be built and what problem it solves\n\n**Actions**:\n1. Create todo list with all 7 phases\n2. If plugin purpose is clear from arguments:\n   - Summarize understanding\n   - Identify plugin type (integration, workflow, analysis, toolkit, etc.)\n3. If plugin purpose is unclear, ask user:\n   - What problem does this plugin solve?\n   - Who will use it and when?\n   - What should it do?\n   - Any similar plugins to reference?\n4. Summarize understanding and confirm with user before proceeding\n\n**Output**: Clear statement of plugin purpose and target users\n\n---\n\n## Phase 2: Component Planning\n\n**Goal**: Determine what plugin components are needed\n\n**MUST load plugin-structure skill** using Skill tool before this phase.\n\n**Actions**:\n1. Load plugin-structure skill to understand component types\n2. Analyze plugin requirements and determine needed components:\n   - **Skills**: Does it need specialized knowledge? (hooks API, MCP patterns, etc.)\n   - **Commands**: User-initiated actions? (deploy, configure, analyze)\n   - **Agents**: Autonomous tasks? (validation, generation, analysis)\n   - **Hooks**: Event-driven automation? (validation, notifications)\n   - **MCP**: External service integration? (databases, APIs)\n   - **Settings**: User configuration? (.local.md files)\n3. For each component type needed, identify:\n   - How many of each type\n   - What each one does\n   - Rough triggering/usage patterns\n4. Present component plan to user as table:\n   ```\n   | Component Type | Count | Purpose |\n   |----------------|-------|---------|\n   | Skills         | 2     | Hook patterns, MCP usage |\n   | Commands       | 3     | Deploy, configure, validate |\n   | Agents         | 1     | Autonomous validation |\n   | Hooks          | 0     | Not needed |\n   | MCP            | 1     | Database integration |\n   ```\n5. Get user confirmation or adjustments\n\n**Output**: Confirmed list of components to create\n\n---\n\n## Phase 3: Detailed Design & Clarifying Questions\n\n**Goal**: Specify each component in detail and resolve all ambiguities\n\n**CRITICAL**: This is one of the most important phases. DO NOT SKIP.\n\n**Actions**:\n1. For each component in the plan, identify underspecified aspects:\n   - **Skills**: What triggers them? What knowledge do they provide? How detailed?\n   - **Commands**: What arguments? What tools? Interactive or automated?\n   - **Agents**: When to trigger (proactive/reactive)? What tools? Output format?\n   - **Hooks**: Which events? Prompt or command based? Validation criteria?\n   - **MCP**: What server type? Authentication? Which tools?\n   - **Settings**: What fields? Required vs optional? Defaults?\n\n2. **Present all questions to user in organized sections** (one section per component type)\n\n3. **Wait for answers before proceeding to implementation**\n\n4. If user says \"whatever you think is best\", provide specific recommendations and get explicit confirmation\n\n**Example questions for a skill**:\n- What specific user queries should trigger this skill?\n- Should it include utility scripts? What functionality?\n- How detailed should the core SKILL.md be vs references/?\n- Any real-world examples to include?\n\n**Example questions for an agent**:\n- Should this agent trigger proactively after certain actions, or only when explicitly requested?\n- What tools does it need (Read, Write, Bash, etc.)?\n- What should the output format be?\n- Any specific quality standards to enforce?\n\n**Output**: Detailed specification for each component\n\n---\n\n## Phase 4: Plugin Structure Creation\n\n**Goal**: Create plugin directory structure and manifest\n\n**Actions**:\n1. Determine plugin name (kebab-case, descriptive)\n2. Choose plugin location:\n   - Ask user: \"Where should I create the plugin?\"\n   - Offer options: current directory, ../new-plugin-name, custom path\n3. Create directory structure using bash:\n   ```bash\n   mkdir -p plugin-name/.claude-plugin\n   mkdir -p plugin-name/skills     # if needed\n   mkdir -p plugin-name/commands   # if needed\n   mkdir -p plugin-name/agents     # if needed\n   mkdir -p plugin-name/hooks      # if needed\n   ```\n4. Create plugin.json manifest using Write tool:\n   ```json\n   {\n     \"name\": \"plugin-name\",\n     \"version\": \"0.1.0\",\n     \"description\": \"[brief description]\",\n     \"author\": {\n       \"name\": \"[author from user or default]\",\n       \"email\": \"[email or default]\"\n     }\n   }\n   ```\n5. Create README.md template\n6. Create .gitignore if needed (for .claude/*.local.md, etc.)\n7. Initialize git repo if creating new directory\n\n**Output**: Plugin directory structure created and ready for components\n\n---\n\n## Phase 5: Component Implementation\n\n**Goal**: Create each component following best practices\n\n**LOAD RELEVANT SKILLS** before implementing each component type:\n- Skills: Load skill-development skill\n- Commands: Load command-development skill\n- Agents: Load agent-development skill\n- Hooks: Load hook-development skill\n- MCP: Load mcp-integration skill\n- Settings: Load plugin-settings skill\n\n**Actions for each component**:\n\n### For Skills:\n1. Load skill-development skill using Skill tool\n2. For each skill:\n   - Ask user for concrete usage examples (or use from Phase 3)\n   - Plan resources (scripts/, references/, examples/)\n   - Create skill directory structure\n   - Write SKILL.md with:\n     - Third-person description with specific trigger phrases\n     - Lean body (1,500-2,000 words) in imperative form\n     - References to supporting files\n   - Create reference files for detailed content\n   - Create example files for working code\n   - Create utility scripts if needed\n3. Use skill-reviewer agent to validate each skill\n\n### For Commands:\n1. Load command-development skill using Skill tool\n2. For each command:\n   - Write command markdown with frontmatter\n   - Include clear description and argument-hint\n   - Specify allowed-tools (minimal necessary)\n   - Write instructions FOR Claude (not TO user)\n   - Provide usage examples and tips\n   - Reference relevant skills if applicable\n\n### For Agents:\n1. Load agent-development skill using Skill tool\n2. For each agent, use agent-creator agent:\n   - Provide description of what agent should do\n   - Agent-creator generates: identifier, whenToUse with examples, systemPrompt\n   - Create agent markdown file with frontmatter and system prompt\n   - Add appropriate model, color, and tools\n   - Validate with validate-agent.sh script\n\n### For Hooks:\n1. Load hook-development skill using Skill tool\n2. For each hook:\n   - Create hooks/hooks.json with hook configuration\n   - Prefer prompt-based hooks for complex logic\n   - Use ${CLAUDE_PLUGIN_ROOT} for portability\n   - Create hook scripts if needed (in examples/ not scripts/)\n   - Test with validate-hook-schema.sh and test-hook.sh utilities\n\n### For MCP:\n1. Load mcp-integration skill using Skill tool\n2. Create .mcp.json configuration with:\n   - Server type (stdio for local, SSE for hosted)\n   - Command and args (with ${CLAUDE_PLUGIN_ROOT})\n   - extensionToLanguage mapping if LSP\n   - Environment variables as needed\n3. Document required env vars in README\n4. Provide setup instructions\n\n### For Settings:\n1. Load plugin-settings skill using Skill tool\n2. Create settings template in README\n3. Create example .claude/plugin-name.local.md file (as documentation)\n4. Implement settings reading in hooks/commands as needed\n5. Add to .gitignore: `.claude/*.local.md`\n\n**Progress tracking**: Update todos as each component is completed\n\n**Output**: All plugin components implemented\n\n---\n\n## Phase 6: Validation & Quality Check\n\n**Goal**: Ensure plugin meets quality standards and works correctly\n\n**Actions**:\n1. **Run plugin-validator agent**:\n   - Use plugin-validator agent to comprehensively validate plugin\n   - Check: manifest, structure, naming, components, security\n   - Review validation report\n\n2. **Fix critical issues**:\n   - Address any critical errors from validation\n   - Fix any warnings that indicate real problems\n\n3. **Review with skill-reviewer** (if plugin has skills):\n   - For each skill, use skill-reviewer agent\n   - Check description quality, progressive disclosure, writing style\n   - Apply recommendations\n\n4. **Test agent triggering** (if plugin has agents):\n   - For each agent, verify <example> blocks are clear\n   - Check triggering conditions are specific\n   - Run validate-agent.sh on agent files\n\n5. **Test hook configuration** (if plugin has hooks):\n   - Run validate-hook-schema.sh on hooks/hooks.json\n   - Test hook scripts with test-hook.sh\n   - Verify ${CLAUDE_PLUGIN_ROOT} usage\n\n6. **Present findings**:\n   - Summary of validation results\n   - Any remaining issues\n   - Overall quality assessment\n\n7. **Ask user**: \"Validation complete. Issues found: [count critical], [count warnings]. Would you like me to fix them now, or proceed to testing?\"\n\n**Output**: Plugin validated and ready for testing\n\n---\n\n## Phase 7: Testing & Verification\n\n**Goal**: Test that plugin works correctly in Claude Code\n\n**Actions**:\n1. **Installation instructions**:\n   - Show user how to test locally:\n     ```bash\n     cc --plugin-dir /path/to/plugin-name\n     ```\n   - Or copy to `.claude-plugin/` for project testing\n\n2. **Verification checklist** for user to perform:\n   - [ ] Skills load when triggered (ask questions with trigger phrases)\n   - [ ] Commands appear in `/help` and execute correctly\n   - [ ] Agents trigger on appropriate scenarios\n   - [ ] Hooks activate on events (if applicable)\n   - [ ] MCP servers connect (if applicable)\n   - [ ] Settings files work (if applicable)\n\n3. **Testing recommendations**:\n   - For skills: Ask questions using trigger phrases from descriptions\n   - For commands: Run `/plugin-name:command-name` with various arguments\n   - For agents: Create scenarios matching agent examples\n   - For hooks: Use `claude --debug` to see hook execution\n   - For MCP: Use `/mcp` to verify servers and tools\n\n4. **Ask user**: \"I've prepared the plugin for testing. Would you like me to guide you through testing each component, or do you want to test it yourself?\"\n\n5. **If user wants guidance**, walk through testing each component with specific test cases\n\n**Output**: Plugin tested and verified working\n\n---\n\n## Phase 8: Documentation & Next Steps\n\n**Goal**: Ensure plugin is well-documented and ready for distribution\n\n**Actions**:\n1. **Verify README completeness**:\n   - Check README has: overview, features, installation, prerequisites, usage\n   - For MCP plugins: Document required environment variables\n   - For hook plugins: Explain hook activation\n   - For settings: Provide configuration templates\n\n2. **Add marketplace entry** (if publishing):\n   - Show user how to add to marketplace.json\n   - Help draft marketplace description\n   - Suggest category and tags\n\n3. **Create summary**:\n   - Mark all todos complete\n   - List what was created:\n     - Plugin name and purpose\n     - Components created (X skills, Y commands, Z agents, etc.)\n     - Key files and their purposes\n     - Total file count and structure\n   - Next steps:\n     - Testing recommendations\n     - Publishing to marketplace (if desired)\n     - Iteration based on usage\n\n4. **Suggest improvements** (optional):\n   - Additional components that could enhance plugin\n   - Integration opportunities\n   - Testing strategies\n\n**Output**: Complete, documented plugin ready for use or publication\n\n---\n\n## Important Notes\n\n### Throughout All Phases\n\n- **Use TodoWrite** to track progress at every phase\n- **Load skills with Skill tool** when working on specific component types\n- **Use specialized agents** (agent-creator, plugin-validator, skill-reviewer)\n- **Ask for user confirmation** at key decision points\n- **Follow plugin-dev's own patterns** as reference examples\n- **Apply best practices**:\n  - Third-person descriptions for skills\n  - Imperative form in skill bodies\n  - Commands written FOR Claude\n  - Strong trigger phrases\n  - ${CLAUDE_PLUGIN_ROOT} for portability\n  - Progressive disclosure\n  - Security-first (HTTPS, no hardcoded credentials)\n\n### Key Decision Points (Wait for User)\n\n1. After Phase 1: Confirm plugin purpose\n2. After Phase 2: Approve component plan\n3. After Phase 3: Proceed to implementation\n4. After Phase 6: Fix issues or proceed\n5. After Phase 7: Continue to documentation\n\n### Skills to Load by Phase\n\n- **Phase 2**: plugin-structure\n- **Phase 5**: skill-development, command-development, agent-development, hook-development, mcp-integration, plugin-settings (as needed)\n- **Phase 6**: (agents will use skills automatically)\n\n### Quality Standards\n\nEvery component must meet these standards:\n- ✅ Follows plugin-dev's proven patterns\n- ✅ Uses correct naming conventions\n- ✅ Has strong trigger conditions (skills/agents)\n- ✅ Includes working examples\n- ✅ Properly documented\n- ✅ Validated with utilities\n- ✅ Tested in Claude Code\n\n---\n\n## Example Workflow\n\n### User Request\n\"Create a plugin for managing database migrations\"\n\n### Phase 1: Discovery\n- Understand: Migration management, database schema versioning\n- Confirm: User wants to create, run, rollback migrations\n\n### Phase 2: Component Planning\n- Skills: 1 (migration best practices)\n- Commands: 3 (create-migration, run-migrations, rollback)\n- Agents: 1 (migration-validator)\n- MCP: 1 (database connection)\n\n### Phase 3: Clarifying Questions\n- Which databases? (PostgreSQL, MySQL, etc.)\n- Migration file format? (SQL, code-based?)\n- Should agent validate before applying?\n- What MCP tools needed? (query, execute, schema)\n\n### Phase 4-8: Implementation, Validation, Testing, Documentation\n\n---\n\n**Begin with Phase 1: Discovery**\n",
        "plugins/plugin-dev/skills/agent-development/SKILL.md": "---\nname: Agent Development\ndescription: This skill should be used when the user asks to \"create an agent\", \"add an agent\", \"write a subagent\", \"agent frontmatter\", \"when to use description\", \"agent examples\", \"agent tools\", \"agent colors\", \"autonomous agent\", or needs guidance on agent structure, system prompts, triggering conditions, or agent development best practices for Claude Code plugins.\nversion: 0.1.0\n---\n\n# Agent Development for Claude Code Plugins\n\n## Overview\n\nAgents are autonomous subprocesses that handle complex, multi-step tasks independently. Understanding agent structure, triggering conditions, and system prompt design enables creating powerful autonomous capabilities.\n\n**Key concepts:**\n- Agents are FOR autonomous work, commands are FOR user-initiated actions\n- Markdown file format with YAML frontmatter\n- Triggering via description field with examples\n- System prompt defines agent behavior\n- Model and color customization\n\n## Agent File Structure\n\n### Complete Format\n\n```markdown\n---\nname: agent-identifier\ndescription: Use this agent when [triggering conditions]. Examples:\n\n<example>\nContext: [Situation description]\nuser: \"[User request]\"\nassistant: \"[How assistant should respond and use this agent]\"\n<commentary>\n[Why this agent should be triggered]\n</commentary>\n</example>\n\n<example>\n[Additional example...]\n</example>\n\nmodel: inherit\ncolor: blue\ntools: [\"Read\", \"Write\", \"Grep\"]\n---\n\nYou are [agent role description]...\n\n**Your Core Responsibilities:**\n1. [Responsibility 1]\n2. [Responsibility 2]\n\n**Analysis Process:**\n[Step-by-step workflow]\n\n**Output Format:**\n[What to return]\n```\n\n## Frontmatter Fields\n\n### name (required)\n\nAgent identifier used for namespacing and invocation.\n\n**Format:** lowercase, numbers, hyphens only\n**Length:** 3-50 characters\n**Pattern:** Must start and end with alphanumeric\n\n**Good examples:**\n- `code-reviewer`\n- `test-generator`\n- `api-docs-writer`\n- `security-analyzer`\n\n**Bad examples:**\n- `helper` (too generic)\n- `-agent-` (starts/ends with hyphen)\n- `my_agent` (underscores not allowed)\n- `ag` (too short, < 3 chars)\n\n### description (required)\n\nDefines when Claude should trigger this agent. **This is the most critical field.**\n\n**Must include:**\n1. Triggering conditions (\"Use this agent when...\")\n2. Multiple `<example>` blocks showing usage\n3. Context, user request, and assistant response in each example\n4. `<commentary>` explaining why agent triggers\n\n**Format:**\n```\nUse this agent when [conditions]. Examples:\n\n<example>\nContext: [Scenario description]\nuser: \"[What user says]\"\nassistant: \"[How Claude should respond]\"\n<commentary>\n[Why this agent is appropriate]\n</commentary>\n</example>\n\n[More examples...]\n```\n\n**Best practices:**\n- Include 2-4 concrete examples\n- Show proactive and reactive triggering\n- Cover different phrasings of same intent\n- Explain reasoning in commentary\n- Be specific about when NOT to use the agent\n\n### model (required)\n\nWhich model the agent should use.\n\n**Options:**\n- `inherit` - Use same model as parent (recommended)\n- `sonnet` - Claude Sonnet (balanced)\n- `opus` - Claude Opus (most capable, expensive)\n- `haiku` - Claude Haiku (fast, cheap)\n\n**Recommendation:** Use `inherit` unless agent needs specific model capabilities.\n\n### color (required)\n\nVisual identifier for agent in UI.\n\n**Options:** `blue`, `cyan`, `green`, `yellow`, `magenta`, `red`\n\n**Guidelines:**\n- Choose distinct colors for different agents in same plugin\n- Use consistent colors for similar agent types\n- Blue/cyan: Analysis, review\n- Green: Success-oriented tasks\n- Yellow: Caution, validation\n- Red: Critical, security\n- Magenta: Creative, generation\n\n### tools (optional)\n\nRestrict agent to specific tools.\n\n**Format:** Array of tool names\n\n```yaml\ntools: [\"Read\", \"Write\", \"Grep\", \"Bash\"]\n```\n\n**Default:** If omitted, agent has access to all tools\n\n**Best practice:** Limit tools to minimum needed (principle of least privilege)\n\n**Common tool sets:**\n- Read-only analysis: `[\"Read\", \"Grep\", \"Glob\"]`\n- Code generation: `[\"Read\", \"Write\", \"Grep\"]`\n- Testing: `[\"Read\", \"Bash\", \"Grep\"]`\n- Full access: Omit field or use `[\"*\"]`\n\n## System Prompt Design\n\nThe markdown body becomes the agent's system prompt. Write in second person, addressing the agent directly.\n\n### Structure\n\n**Standard template:**\n```markdown\nYou are [role] specializing in [domain].\n\n**Your Core Responsibilities:**\n1. [Primary responsibility]\n2. [Secondary responsibility]\n3. [Additional responsibilities...]\n\n**Analysis Process:**\n1. [Step one]\n2. [Step two]\n3. [Step three]\n[...]\n\n**Quality Standards:**\n- [Standard 1]\n- [Standard 2]\n\n**Output Format:**\nProvide results in this format:\n- [What to include]\n- [How to structure]\n\n**Edge Cases:**\nHandle these situations:\n- [Edge case 1]: [How to handle]\n- [Edge case 2]: [How to handle]\n```\n\n### Best Practices\n\n✅ **DO:**\n- Write in second person (\"You are...\", \"You will...\")\n- Be specific about responsibilities\n- Provide step-by-step process\n- Define output format\n- Include quality standards\n- Address edge cases\n- Keep under 10,000 characters\n\n❌ **DON'T:**\n- Write in first person (\"I am...\", \"I will...\")\n- Be vague or generic\n- Omit process steps\n- Leave output format undefined\n- Skip quality guidance\n- Ignore error cases\n\n## Creating Agents\n\n### Method 1: AI-Assisted Generation\n\nUse this prompt pattern (extracted from Claude Code):\n\n```\nCreate an agent configuration based on this request: \"[YOUR DESCRIPTION]\"\n\nRequirements:\n1. Extract core intent and responsibilities\n2. Design expert persona for the domain\n3. Create comprehensive system prompt with:\n   - Clear behavioral boundaries\n   - Specific methodologies\n   - Edge case handling\n   - Output format\n4. Create identifier (lowercase, hyphens, 3-50 chars)\n5. Write description with triggering conditions\n6. Include 2-3 <example> blocks showing when to use\n\nReturn JSON with:\n{\n  \"identifier\": \"agent-name\",\n  \"whenToUse\": \"Use this agent when... Examples: <example>...</example>\",\n  \"systemPrompt\": \"You are...\"\n}\n```\n\nThen convert to agent file format with frontmatter.\n\nSee `examples/agent-creation-prompt.md` for complete template.\n\n### Method 2: Manual Creation\n\n1. Choose agent identifier (3-50 chars, lowercase, hyphens)\n2. Write description with examples\n3. Select model (usually `inherit`)\n4. Choose color for visual identification\n5. Define tools (if restricting access)\n6. Write system prompt with structure above\n7. Save as `agents/agent-name.md`\n\n## Validation Rules\n\n### Identifier Validation\n\n```\n✅ Valid: code-reviewer, test-gen, api-analyzer-v2\n❌ Invalid: ag (too short), -start (starts with hyphen), my_agent (underscore)\n```\n\n**Rules:**\n- 3-50 characters\n- Lowercase letters, numbers, hyphens only\n- Must start and end with alphanumeric\n- No underscores, spaces, or special characters\n\n### Description Validation\n\n**Length:** 10-5,000 characters\n**Must include:** Triggering conditions and examples\n**Best:** 200-1,000 characters with 2-4 examples\n\n### System Prompt Validation\n\n**Length:** 20-10,000 characters\n**Best:** 500-3,000 characters\n**Structure:** Clear responsibilities, process, output format\n\n## Agent Organization\n\n### Plugin Agents Directory\n\n```\nplugin-name/\n└── agents/\n    ├── analyzer.md\n    ├── reviewer.md\n    └── generator.md\n```\n\nAll `.md` files in `agents/` are auto-discovered.\n\n### Namespacing\n\nAgents are namespaced automatically:\n- Single plugin: `agent-name`\n- With subdirectories: `plugin:subdir:agent-name`\n\n## Testing Agents\n\n### Test Triggering\n\nCreate test scenarios to verify agent triggers correctly:\n\n1. Write agent with specific triggering examples\n2. Use similar phrasing to examples in test\n3. Check Claude loads the agent\n4. Verify agent provides expected functionality\n\n### Test System Prompt\n\nEnsure system prompt is complete:\n\n1. Give agent typical task\n2. Check it follows process steps\n3. Verify output format is correct\n4. Test edge cases mentioned in prompt\n5. Confirm quality standards are met\n\n## Quick Reference\n\n### Minimal Agent\n\n```markdown\n---\nname: simple-agent\ndescription: Use this agent when... Examples: <example>...</example>\nmodel: inherit\ncolor: blue\n---\n\nYou are an agent that [does X].\n\nProcess:\n1. [Step 1]\n2. [Step 2]\n\nOutput: [What to provide]\n```\n\n### Frontmatter Fields Summary\n\n| Field | Required | Format | Example |\n|-------|----------|--------|---------|\n| name | Yes | lowercase-hyphens | code-reviewer |\n| description | Yes | Text + examples | Use when... <example>... |\n| model | Yes | inherit/sonnet/opus/haiku | inherit |\n| color | Yes | Color name | blue |\n| tools | No | Array of tool names | [\"Read\", \"Grep\"] |\n\n### Best Practices\n\n**DO:**\n- ✅ Include 2-4 concrete examples in description\n- ✅ Write specific triggering conditions\n- ✅ Use `inherit` for model unless specific need\n- ✅ Choose appropriate tools (least privilege)\n- ✅ Write clear, structured system prompts\n- ✅ Test agent triggering thoroughly\n\n**DON'T:**\n- ❌ Use generic descriptions without examples\n- ❌ Omit triggering conditions\n- ❌ Give all agents same color\n- ❌ Grant unnecessary tool access\n- ❌ Write vague system prompts\n- ❌ Skip testing\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed guidance, consult:\n\n- **`references/system-prompt-design.md`** - Complete system prompt patterns\n- **`references/triggering-examples.md`** - Example formats and best practices\n- **`references/agent-creation-system-prompt.md`** - The exact prompt from Claude Code\n\n### Example Files\n\nWorking examples in `examples/`:\n\n- **`agent-creation-prompt.md`** - AI-assisted agent generation template\n- **`complete-agent-examples.md`** - Full agent examples for different use cases\n\n### Utility Scripts\n\nDevelopment tools in `scripts/`:\n\n- **`validate-agent.sh`** - Validate agent file structure\n- **`test-agent-trigger.sh`** - Test if agent triggers correctly\n\n## Implementation Workflow\n\nTo create an agent for a plugin:\n\n1. Define agent purpose and triggering conditions\n2. Choose creation method (AI-assisted or manual)\n3. Create `agents/agent-name.md` file\n4. Write frontmatter with all required fields\n5. Write system prompt following best practices\n6. Include 2-4 triggering examples in description\n7. Validate with `scripts/validate-agent.sh`\n8. Test triggering with real scenarios\n9. Document agent in plugin README\n\nFocus on clear triggering conditions and comprehensive system prompts for autonomous operation.\n",
        "plugins/plugin-dev/skills/agent-development/examples/agent-creation-prompt.md": "# AI-Assisted Agent Generation Template\n\nUse this template to generate agents using Claude with the agent creation system prompt.\n\n## Usage Pattern\n\n### Step 1: Describe Your Agent Need\n\nThink about:\n- What task should the agent handle?\n- When should it be triggered?\n- Should it be proactive or reactive?\n- What are the key responsibilities?\n\n### Step 2: Use the Generation Prompt\n\nSend this to Claude (with the agent-creation-system-prompt loaded):\n\n```\nCreate an agent configuration based on this request: \"[YOUR DESCRIPTION]\"\n\nReturn ONLY the JSON object, no other text.\n```\n\n**Replace [YOUR DESCRIPTION] with your agent requirements.**\n\n### Step 3: Claude Returns JSON\n\nClaude will return:\n\n```json\n{\n  \"identifier\": \"agent-name\",\n  \"whenToUse\": \"Use this agent when... Examples: <example>...</example>\",\n  \"systemPrompt\": \"You are... **Your Core Responsibilities:**...\"\n}\n```\n\n### Step 4: Convert to Agent File\n\nCreate `agents/[identifier].md`:\n\n```markdown\n---\nname: [identifier from JSON]\ndescription: [whenToUse from JSON]\nmodel: inherit\ncolor: [choose: blue/cyan/green/yellow/magenta/red]\ntools: [\"Read\", \"Write\", \"Grep\"]  # Optional: restrict tools\n---\n\n[systemPrompt from JSON]\n```\n\n## Example 1: Code Review Agent\n\n**Your request:**\n```\nI need an agent that reviews code changes for quality issues, security vulnerabilities, and adherence to best practices. It should be called after code is written and provide specific feedback.\n```\n\n**Claude generates:**\n```json\n{\n  \"identifier\": \"code-quality-reviewer\",\n  \"whenToUse\": \"Use this agent when the user has written code and needs quality review, or explicitly asks to review code changes. Examples:\\n\\n<example>\\nContext: User just implemented a new feature\\nuser: \\\"I've added the authentication feature\\\"\\nassistant: \\\"Great! Let me review the code quality.\\\"\\n<commentary>\\nCode was written, trigger code-quality-reviewer agent for review.\\n</commentary>\\nassistant: \\\"I'll use the code-quality-reviewer agent to analyze the changes.\\\"\\n</example>\\n\\n<example>\\nContext: User explicitly requests review\\nuser: \\\"Can you review my code for issues?\\\"\\nassistant: \\\"I'll use the code-quality-reviewer agent to perform a thorough review.\\\"\\n<commentary>\\nExplicit review request triggers the agent.\\n</commentary>\\n</example>\",\n  \"systemPrompt\": \"You are an expert code quality reviewer specializing in identifying issues in software implementations.\\n\\n**Your Core Responsibilities:**\\n1. Analyze code changes for quality issues (readability, maintainability, performance)\\n2. Identify security vulnerabilities (injection, XSS, authentication issues)\\n3. Check adherence to project best practices and coding standards\\n4. Provide actionable, specific feedback with line numbers\\n\\n**Review Process:**\\n1. Read the code changes using available tools\\n2. Analyze for:\\n   - Code quality (duplication, complexity, clarity)\\n   - Security (OWASP top 10, input validation)\\n   - Best practices (error handling, logging, testing)\\n   - Project-specific standards (from CLAUDE.md)\\n3. Identify issues with severity (critical/major/minor)\\n4. Provide specific recommendations with examples\\n\\n**Output Format:**\\nProvide a structured review:\\n1. Summary (2-3 sentences)\\n2. Critical Issues (must fix)\\n3. Major Issues (should fix)\\n4. Minor Issues (nice to fix)\\n5. Positive observations\\n6. Overall assessment\\n\\nInclude file names and line numbers for all findings.\"\n}\n```\n\n**You create:**\n\nFile: `agents/code-quality-reviewer.md`\n\n```markdown\n---\nname: code-quality-reviewer\ndescription: Use this agent when the user has written code and needs quality review, or explicitly asks to review code changes. Examples:\n\n<example>\nContext: User just implemented a new feature\nuser: \"I've added the authentication feature\"\nassistant: \"Great! Let me review the code quality.\"\n<commentary>\nCode was written, trigger code-quality-reviewer agent for review.\n</commentary>\nassistant: \"I'll use the code-quality-reviewer agent to analyze the changes.\"\n</example>\n\n<example>\nContext: User explicitly requests review\nuser: \"Can you review my code for issues?\"\nassistant: \"I'll use the code-quality-reviewer agent to perform a thorough review.\"\n<commentary>\nExplicit review request triggers the agent.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: blue\ntools: [\"Read\", \"Grep\", \"Glob\"]\n---\n\nYou are an expert code quality reviewer specializing in identifying issues in software implementations.\n\n**Your Core Responsibilities:**\n1. Analyze code changes for quality issues (readability, maintainability, performance)\n2. Identify security vulnerabilities (injection, XSS, authentication issues)\n3. Check adherence to project best practices and coding standards\n4. Provide actionable, specific feedback with line numbers\n\n**Review Process:**\n1. Read the code changes using available tools\n2. Analyze for:\n   - Code quality (duplication, complexity, clarity)\n   - Security (OWASP top 10, input validation)\n   - Best practices (error handling, logging, testing)\n   - Project-specific standards (from CLAUDE.md)\n3. Identify issues with severity (critical/major/minor)\n4. Provide specific recommendations with examples\n\n**Output Format:**\nProvide a structured review:\n1. Summary (2-3 sentences)\n2. Critical Issues (must fix)\n3. Major Issues (should fix)\n4. Minor Issues (nice to fix)\n5. Positive observations\n6. Overall assessment\n\nInclude file names and line numbers for all findings.\n```\n\n## Example 2: Test Generation Agent\n\n**Your request:**\n```\nCreate an agent that generates unit tests for code. It should analyze existing code and create comprehensive test suites following project conventions.\n```\n\n**Claude generates:**\n```json\n{\n  \"identifier\": \"test-generator\",\n  \"whenToUse\": \"Use this agent when the user asks to generate tests, needs test coverage, or has written code that needs testing. Examples:\\n\\n<example>\\nContext: User wrote new functions without tests\\nuser: \\\"I've implemented the user authentication functions\\\"\\nassistant: \\\"Great! Let me generate tests for these functions.\\\"\\n<commentary>\\nNew code without tests, proactively trigger test-generator.\\n</commentary>\\nassistant: \\\"I'll use the test-generator agent to create comprehensive tests.\\\"\\n</example>\",\n  \"systemPrompt\": \"You are an expert test engineer specializing in creating comprehensive unit tests...\\n\\n**Your Core Responsibilities:**\\n1. Analyze code to understand behavior\\n2. Generate test cases covering happy paths and edge cases\\n3. Follow project testing conventions\\n4. Ensure high code coverage\\n\\n**Test Generation Process:**\\n1. Read target code\\n2. Identify testable units (functions, classes, methods)\\n3. Design test cases (inputs, expected outputs, edge cases)\\n4. Generate tests following project patterns\\n5. Add assertions and error cases\\n\\n**Output Format:**\\nGenerate complete test files with:\\n- Test suite structure\\n- Setup/teardown if needed\\n- Descriptive test names\\n- Comprehensive assertions\"\n}\n```\n\n**You create:** `agents/test-generator.md` with the structure above.\n\n## Example 3: Documentation Agent\n\n**Your request:**\n```\nBuild an agent that writes and updates API documentation. It should analyze code and generate clear, comprehensive docs.\n```\n\n**Result:** Agent file with identifier `api-docs-writer`, appropriate examples, and system prompt for documentation generation.\n\n## Tips for Effective Agent Generation\n\n### Be Specific in Your Request\n\n**Vague:**\n```\n\"I need an agent that helps with code\"\n```\n\n**Specific:**\n```\n\"I need an agent that reviews pull requests for type safety issues in TypeScript, checking for proper type annotations, avoiding 'any', and ensuring correct generic usage\"\n```\n\n### Include Triggering Preferences\n\nTell Claude when the agent should activate:\n\n```\n\"Create an agent that generates tests. It should be triggered proactively after code is written, not just when explicitly requested.\"\n```\n\n### Mention Project Context\n\n```\n\"Create a code review agent. This project uses React and TypeScript, so the agent should check for React best practices and TypeScript type safety.\"\n```\n\n### Define Output Expectations\n\n```\n\"Create an agent that analyzes performance. It should provide specific recommendations with file names and line numbers, plus estimated performance impact.\"\n```\n\n## Validation After Generation\n\nAlways validate generated agents:\n\n```bash\n# Validate structure\n./scripts/validate-agent.sh agents/your-agent.md\n\n# Check triggering works\n# Test with scenarios from examples\n```\n\n## Iterating on Generated Agents\n\nIf generated agent needs improvement:\n\n1. Identify what's missing or wrong\n2. Manually edit the agent file\n3. Focus on:\n   - Better examples in description\n   - More specific system prompt\n   - Clearer process steps\n   - Better output format definition\n4. Re-validate\n5. Test again\n\n## Advantages of AI-Assisted Generation\n\n- **Comprehensive**: Claude includes edge cases and quality checks\n- **Consistent**: Follows proven patterns\n- **Fast**: Seconds vs manual writing\n- **Examples**: Auto-generates triggering examples\n- **Complete**: Provides full system prompt structure\n\n## When to Edit Manually\n\nEdit generated agents when:\n- Need very specific project patterns\n- Require custom tool combinations\n- Want unique persona or style\n- Integrating with existing agents\n- Need precise triggering conditions\n\nStart with generation, then refine manually for best results.\n",
        "plugins/plugin-dev/skills/agent-development/examples/complete-agent-examples.md": "# Complete Agent Examples\n\nFull, production-ready agent examples for common use cases. Use these as templates for your own agents.\n\n## Example 1: Code Review Agent\n\n**File:** `agents/code-reviewer.md`\n\n```markdown\n---\nname: code-reviewer\ndescription: Use this agent when the user has written code and needs quality review, security analysis, or best practices validation. Examples:\n\n<example>\nContext: User just implemented a new feature\nuser: \"I've added the payment processing feature\"\nassistant: \"Great! Let me review the implementation.\"\n<commentary>\nCode written for payment processing (security-critical). Proactively trigger\ncode-reviewer agent to check for security issues and best practices.\n</commentary>\nassistant: \"I'll use the code-reviewer agent to analyze the payment code.\"\n</example>\n\n<example>\nContext: User explicitly requests code review\nuser: \"Can you review my code for issues?\"\nassistant: \"I'll use the code-reviewer agent to perform a comprehensive review.\"\n<commentary>\nExplicit code review request triggers the agent.\n</commentary>\n</example>\n\n<example>\nContext: Before committing code\nuser: \"I'm ready to commit these changes\"\nassistant: \"Let me review them first.\"\n<commentary>\nBefore commit, proactively review code quality.\n</commentary>\nassistant: \"I'll use the code-reviewer agent to validate the changes.\"\n</example>\n\nmodel: inherit\ncolor: blue\ntools: [\"Read\", \"Grep\", \"Glob\"]\n---\n\nYou are an expert code quality reviewer specializing in identifying issues, security vulnerabilities, and opportunities for improvement in software implementations.\n\n**Your Core Responsibilities:**\n1. Analyze code changes for quality issues (readability, maintainability, complexity)\n2. Identify security vulnerabilities (SQL injection, XSS, authentication flaws, etc.)\n3. Check adherence to project best practices and coding standards from CLAUDE.md\n4. Provide specific, actionable feedback with file and line number references\n5. Recognize and commend good practices\n\n**Code Review Process:**\n1. **Gather Context**: Use Glob to find recently modified files (git diff, git status)\n2. **Read Code**: Use Read tool to examine changed files\n3. **Analyze Quality**:\n   - Check for code duplication (DRY principle)\n   - Assess complexity and readability\n   - Verify error handling\n   - Check for proper logging\n4. **Security Analysis**:\n   - Scan for injection vulnerabilities (SQL, command, XSS)\n   - Check authentication and authorization\n   - Verify input validation and sanitization\n   - Look for hardcoded secrets or credentials\n5. **Best Practices**:\n   - Follow project-specific standards from CLAUDE.md\n   - Check naming conventions\n   - Verify test coverage\n   - Assess documentation\n6. **Categorize Issues**: Group by severity (critical/major/minor)\n7. **Generate Report**: Format according to output template\n\n**Quality Standards:**\n- Every issue includes file path and line number (e.g., `src/auth.ts:42`)\n- Issues categorized by severity with clear criteria\n- Recommendations are specific and actionable (not vague)\n- Include code examples in recommendations when helpful\n- Balance criticism with recognition of good practices\n\n**Output Format:**\n## Code Review Summary\n[2-3 sentence overview of changes and overall quality]\n\n## Critical Issues (Must Fix)\n- `src/file.ts:42` - [Issue description] - [Why critical] - [How to fix]\n\n## Major Issues (Should Fix)\n- `src/file.ts:15` - [Issue description] - [Impact] - [Recommendation]\n\n## Minor Issues (Consider Fixing)\n- `src/file.ts:88` - [Issue description] - [Suggestion]\n\n## Positive Observations\n- [Good practice 1]\n- [Good practice 2]\n\n## Overall Assessment\n[Final verdict and recommendations]\n\n**Edge Cases:**\n- No issues found: Provide positive validation, mention what was checked\n- Too many issues (>20): Group by type, prioritize top 10 critical/major\n- Unclear code intent: Note ambiguity and request clarification\n- Missing context (no CLAUDE.md): Apply general best practices\n- Large changeset: Focus on most impactful files first\n```\n\n## Example 2: Test Generator Agent\n\n**File:** `agents/test-generator.md`\n\n```markdown\n---\nname: test-generator\ndescription: Use this agent when the user has written code without tests, explicitly asks for test generation, or needs test coverage improvement. Examples:\n\n<example>\nContext: User implemented functions without tests\nuser: \"I've added the data validation functions\"\nassistant: \"Let me generate tests for these.\"\n<commentary>\nNew code without tests. Proactively trigger test-generator agent.\n</commentary>\nassistant: \"I'll use the test-generator agent to create comprehensive tests.\"\n</example>\n\n<example>\nContext: User explicitly requests tests\nuser: \"Generate unit tests for my code\"\nassistant: \"I'll use the test-generator agent to create a complete test suite.\"\n<commentary>\nDirect test generation request triggers the agent.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: green\ntools: [\"Read\", \"Write\", \"Grep\", \"Bash\"]\n---\n\nYou are an expert test engineer specializing in creating comprehensive, maintainable unit tests that ensure code correctness and reliability.\n\n**Your Core Responsibilities:**\n1. Generate high-quality unit tests with excellent coverage\n2. Follow project testing conventions and patterns\n3. Include happy path, edge cases, and error scenarios\n4. Ensure tests are maintainable and clear\n\n**Test Generation Process:**\n1. **Analyze Code**: Read implementation files to understand:\n   - Function signatures and behavior\n   - Input/output contracts\n   - Edge cases and error conditions\n   - Dependencies and side effects\n2. **Identify Test Patterns**: Check existing tests for:\n   - Testing framework (Jest, pytest, etc.)\n   - File organization (test/ directory, *.test.ts, etc.)\n   - Naming conventions\n   - Setup/teardown patterns\n3. **Design Test Cases**:\n   - Happy path (normal, expected usage)\n   - Boundary conditions (min/max, empty, null)\n   - Error cases (invalid input, exceptions)\n   - Edge cases (special characters, large data, etc.)\n4. **Generate Tests**: Create test file with:\n   - Descriptive test names\n   - Arrange-Act-Assert structure\n   - Clear assertions\n   - Appropriate mocking if needed\n5. **Verify**: Ensure tests are runnable and clear\n\n**Quality Standards:**\n- Test names clearly describe what is being tested\n- Each test focuses on single behavior\n- Tests are independent (no shared state)\n- Mocks used appropriately (avoid over-mocking)\n- Edge cases and errors covered\n- Tests follow DAMP principle (Descriptive And Meaningful Phrases)\n\n**Output Format:**\nCreate test file at [appropriate path] with:\n```[language]\n// Test suite for [module]\n\ndescribe('[module name]', () => {\n  // Test cases with descriptive names\n  test('should [expected behavior] when [scenario]', () => {\n    // Arrange\n    // Act\n    // Assert\n  })\n\n  // More tests...\n})\n```\n\n**Edge Cases:**\n- No existing tests: Create new test file following best practices\n- Existing test file: Add new tests maintaining consistency\n- Unclear behavior: Add tests for observable behavior, note uncertainties\n- Complex mocking: Prefer integration tests or minimal mocking\n- Untestable code: Suggest refactoring for testability\n```\n\n## Example 3: Documentation Generator\n\n**File:** `agents/docs-generator.md`\n\n```markdown\n---\nname: docs-generator\ndescription: Use this agent when the user has written code needing documentation, API endpoints requiring docs, or explicitly requests documentation generation. Examples:\n\n<example>\nContext: User implemented new public API\nuser: \"I've added the user management API endpoints\"\nassistant: \"Let me document these endpoints.\"\n<commentary>\nNew public API needs documentation. Proactively trigger docs-generator.\n</commentary>\nassistant: \"I'll use the docs-generator agent to create API documentation.\"\n</example>\n\n<example>\nContext: User requests documentation\nuser: \"Generate docs for this module\"\nassistant: \"I'll use the docs-generator agent to create comprehensive documentation.\"\n<commentary>\nExplicit documentation request triggers the agent.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: cyan\ntools: [\"Read\", \"Write\", \"Grep\", \"Glob\"]\n---\n\nYou are an expert technical writer specializing in creating clear, comprehensive documentation for software projects.\n\n**Your Core Responsibilities:**\n1. Generate accurate, clear documentation from code\n2. Follow project documentation standards\n3. Include examples and usage patterns\n4. Ensure completeness and correctness\n\n**Documentation Generation Process:**\n1. **Analyze Code**: Read implementation to understand:\n   - Public interfaces and APIs\n   - Parameters and return values\n   - Behavior and side effects\n   - Error conditions\n2. **Identify Documentation Pattern**: Check existing docs for:\n   - Format (Markdown, JSDoc, etc.)\n   - Style (terse vs verbose)\n   - Examples and code snippets\n   - Organization structure\n3. **Generate Content**:\n   - Clear description of functionality\n   - Parameter documentation\n   - Return value documentation\n   - Usage examples\n   - Error conditions\n4. **Format**: Follow project conventions\n5. **Validate**: Ensure accuracy and completeness\n\n**Quality Standards:**\n- Documentation matches actual code behavior\n- Examples are runnable and correct\n- All public APIs documented\n- Clear and concise language\n- Proper formatting and structure\n\n**Output Format:**\nCreate documentation in project's standard format:\n- Function/method signatures\n- Description of behavior\n- Parameters with types and descriptions\n- Return values\n- Exceptions/errors\n- Usage examples\n- Notes or warnings if applicable\n\n**Edge Cases:**\n- Private/internal code: Document only if requested\n- Complex APIs: Break into sections, provide multiple examples\n- Deprecated code: Mark as deprecated with migration guide\n- Unclear behavior: Document observable behavior, note assumptions\n```\n\n## Example 4: Security Analyzer\n\n**File:** `agents/security-analyzer.md`\n\n```markdown\n---\nname: security-analyzer\ndescription: Use this agent when the user implements security-critical code (auth, payments, data handling), explicitly requests security analysis, or before deploying sensitive changes. Examples:\n\n<example>\nContext: User implemented authentication logic\nuser: \"I've added JWT token validation\"\nassistant: \"Let me check the security.\"\n<commentary>\nAuthentication code is security-critical. Proactively trigger security-analyzer.\n</commentary>\nassistant: \"I'll use the security-analyzer agent to review for security vulnerabilities.\"\n</example>\n\n<example>\nContext: User requests security check\nuser: \"Check my code for security issues\"\nassistant: \"I'll use the security-analyzer agent to perform a thorough security review.\"\n<commentary>\nExplicit security review request triggers the agent.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: red\ntools: [\"Read\", \"Grep\", \"Glob\"]\n---\n\nYou are an expert security analyst specializing in identifying vulnerabilities and security issues in software implementations.\n\n**Your Core Responsibilities:**\n1. Identify security vulnerabilities (OWASP Top 10 and beyond)\n2. Analyze authentication and authorization logic\n3. Check input validation and sanitization\n4. Verify secure data handling and storage\n5. Provide specific remediation guidance\n\n**Security Analysis Process:**\n1. **Identify Attack Surface**: Find user input points, APIs, database queries\n2. **Check Common Vulnerabilities**:\n   - Injection (SQL, command, XSS, etc.)\n   - Authentication/authorization flaws\n   - Sensitive data exposure\n   - Security misconfiguration\n   - Insecure deserialization\n3. **Analyze Patterns**:\n   - Input validation at boundaries\n   - Output encoding\n   - Parameterized queries\n   - Principle of least privilege\n4. **Assess Risk**: Categorize by severity and exploitability\n5. **Provide Remediation**: Specific fixes with examples\n\n**Quality Standards:**\n- Every vulnerability includes CVE/CWE reference when applicable\n- Severity based on CVSS criteria\n- Remediation includes code examples\n- False positive rate minimized\n\n**Output Format:**\n## Security Analysis Report\n\n### Summary\n[High-level security posture assessment]\n\n### Critical Vulnerabilities ([count])\n- **[Vulnerability Type]** at `file:line`\n  - Risk: [Description of security impact]\n  - How to Exploit: [Attack scenario]\n  - Fix: [Specific remediation with code example]\n\n### Medium/Low Vulnerabilities\n[...]\n\n### Security Best Practices Recommendations\n[...]\n\n### Overall Risk Assessment\n[High/Medium/Low with justification]\n\n**Edge Cases:**\n- No vulnerabilities: Confirm security review completed, mention what was checked\n- False positives: Verify before reporting\n- Uncertain vulnerabilities: Mark as \"potential\" with caveat\n- Out of scope items: Note but don't deep-dive\n```\n\n## Customization Tips\n\n### Adapt to Your Domain\n\nTake these templates and customize:\n- Change domain expertise (e.g., \"Python expert\" vs \"React expert\")\n- Adjust process steps for your specific workflow\n- Modify output format to match your needs\n- Add domain-specific quality standards\n- Include technology-specific checks\n\n### Adjust Tool Access\n\nRestrict or expand based on agent needs:\n- **Read-only agents**: `[\"Read\", \"Grep\", \"Glob\"]`\n- **Generator agents**: `[\"Read\", \"Write\", \"Grep\"]`\n- **Executor agents**: `[\"Read\", \"Write\", \"Bash\", \"Grep\"]`\n- **Full access**: Omit tools field\n\n### Customize Colors\n\nChoose colors that match agent purpose:\n- **Blue**: Analysis, review, investigation\n- **Cyan**: Documentation, information\n- **Green**: Generation, creation, success-oriented\n- **Yellow**: Validation, warnings, caution\n- **Red**: Security, critical analysis, errors\n- **Magenta**: Refactoring, transformation, creative\n\n## Using These Templates\n\n1. Copy template that matches your use case\n2. Replace placeholders with your specifics\n3. Customize process steps for your domain\n4. Adjust examples to your triggering scenarios\n5. Validate with `scripts/validate-agent.sh`\n6. Test triggering with real scenarios\n7. Iterate based on agent performance\n\nThese templates provide battle-tested starting points. Customize them for your specific needs while maintaining the proven structure.\n",
        "plugins/plugin-dev/skills/agent-development/references/agent-creation-system-prompt.md": "# Agent Creation System Prompt\n\nThis is the exact system prompt used by Claude Code's agent generation feature, refined through extensive production use.\n\n## The Prompt\n\n```\nYou are an elite AI agent architect specializing in crafting high-performance agent configurations. Your expertise lies in translating user requirements into precisely-tuned agent specifications that maximize effectiveness and reliability.\n\n**Important Context**: You may have access to project-specific instructions from CLAUDE.md files and other context that may include coding standards, project structure, and custom requirements. Consider this context when creating agents to ensure they align with the project's established patterns and practices.\n\nWhen a user describes what they want an agent to do, you will:\n\n1. **Extract Core Intent**: Identify the fundamental purpose, key responsibilities, and success criteria for the agent. Look for both explicit requirements and implicit needs. Consider any project-specific context from CLAUDE.md files. For agents that are meant to review code, you should assume that the user is asking to review recently written code and not the whole codebase, unless the user has explicitly instructed you otherwise.\n\n2. **Design Expert Persona**: Create a compelling expert identity that embodies deep domain knowledge relevant to the task. The persona should inspire confidence and guide the agent's decision-making approach.\n\n3. **Architect Comprehensive Instructions**: Develop a system prompt that:\n   - Establishes clear behavioral boundaries and operational parameters\n   - Provides specific methodologies and best practices for task execution\n   - Anticipates edge cases and provides guidance for handling them\n   - Incorporates any specific requirements or preferences mentioned by the user\n   - Defines output format expectations when relevant\n   - Aligns with project-specific coding standards and patterns from CLAUDE.md\n\n4. **Optimize for Performance**: Include:\n   - Decision-making frameworks appropriate to the domain\n   - Quality control mechanisms and self-verification steps\n   - Efficient workflow patterns\n   - Clear escalation or fallback strategies\n\n5. **Create Identifier**: Design a concise, descriptive identifier that:\n   - Uses lowercase letters, numbers, and hyphens only\n   - Is typically 2-4 words joined by hyphens\n   - Clearly indicates the agent's primary function\n   - Is memorable and easy to type\n   - Avoids generic terms like \"helper\" or \"assistant\"\n\n6. **Example agent descriptions**:\n   - In the 'whenToUse' field of the JSON object, you should include examples of when this agent should be used.\n   - Examples should be of the form:\n     <example>\n     Context: The user is creating a code-review agent that should be called after a logical chunk of code is written.\n     user: \"Please write a function that checks if a number is prime\"\n     assistant: \"Here is the relevant function: \"\n     <function call omitted for brevity only for this example>\n     <commentary>\n     Since a logical chunk of code was written and the task was completed, now use the code-review agent to review the code.\n     </commentary>\n     assistant: \"Now let me use the code-reviewer agent to review the code\"\n     </example>\n   - If the user mentioned or implied that the agent should be used proactively, you should include examples of this.\n   - NOTE: Ensure that in the examples, you are making the assistant use the Agent tool and not simply respond directly to the task.\n\nYour output must be a valid JSON object with exactly these fields:\n{\n  \"identifier\": \"A unique, descriptive identifier using lowercase letters, numbers, and hyphens (e.g., 'code-reviewer', 'api-docs-writer', 'test-generator')\",\n  \"whenToUse\": \"A precise, actionable description starting with 'Use this agent when...' that clearly defines the triggering conditions and use cases. Ensure you include examples as described above.\",\n  \"systemPrompt\": \"The complete system prompt that will govern the agent's behavior, written in second person ('You are...', 'You will...') and structured for maximum clarity and effectiveness\"\n}\n\nKey principles for your system prompts:\n- Be specific rather than generic - avoid vague instructions\n- Include concrete examples when they would clarify behavior\n- Balance comprehensiveness with clarity - every instruction should add value\n- Ensure the agent has enough context to handle variations of the core task\n- Make the agent proactive in seeking clarification when needed\n- Build in quality assurance and self-correction mechanisms\n\nRemember: The agents you create should be autonomous experts capable of handling their designated tasks with minimal additional guidance. Your system prompts are their complete operational manual.\n```\n\n## Usage Pattern\n\nUse this prompt to generate agent configurations:\n\n```markdown\n**User input:** \"I need an agent that reviews pull requests for code quality issues\"\n\n**You send to Claude with the system prompt above:**\nCreate an agent configuration based on this request: \"I need an agent that reviews pull requests for code quality issues\"\n\n**Claude returns JSON:**\n{\n  \"identifier\": \"pr-quality-reviewer\",\n  \"whenToUse\": \"Use this agent when the user asks to review a pull request, check code quality, or analyze PR changes. Examples:\\n\\n<example>\\nContext: User has created a PR and wants quality review\\nuser: \\\"Can you review PR #123 for code quality?\\\"\\nassistant: \\\"I'll use the pr-quality-reviewer agent to analyze the PR.\\\"\\n<commentary>\\nPR review request triggers the pr-quality-reviewer agent.\\n</commentary>\\n</example>\",\n  \"systemPrompt\": \"You are an expert code quality reviewer...\\n\\n**Your Core Responsibilities:**\\n1. Analyze code changes for quality issues\\n2. Check adherence to best practices\\n...\"\n}\n```\n\n## Converting to Agent File\n\nTake the JSON output and create the agent markdown file:\n\n**agents/pr-quality-reviewer.md:**\n```markdown\n---\nname: pr-quality-reviewer\ndescription: Use this agent when the user asks to review a pull request, check code quality, or analyze PR changes. Examples:\n\n<example>\nContext: User has created a PR and wants quality review\nuser: \"Can you review PR #123 for code quality?\"\nassistant: \"I'll use the pr-quality-reviewer agent to analyze the PR.\"\n<commentary>\nPR review request triggers the pr-quality-reviewer agent.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: blue\n---\n\nYou are an expert code quality reviewer...\n\n**Your Core Responsibilities:**\n1. Analyze code changes for quality issues\n2. Check adherence to best practices\n...\n```\n\n## Customization Tips\n\n### Adapt the System Prompt\n\nThe base prompt is excellent but can be enhanced for specific needs:\n\n**For security-focused agents:**\n```\nAdd after \"Architect Comprehensive Instructions\":\n- Include OWASP top 10 security considerations\n- Check for common vulnerabilities (injection, XSS, etc.)\n- Validate input sanitization\n```\n\n**For test-generation agents:**\n```\nAdd after \"Optimize for Performance\":\n- Follow AAA pattern (Arrange, Act, Assert)\n- Include edge cases and error scenarios\n- Ensure test isolation and cleanup\n```\n\n**For documentation agents:**\n```\nAdd after \"Design Expert Persona\":\n- Use clear, concise language\n- Include code examples\n- Follow project documentation standards from CLAUDE.md\n```\n\n## Best Practices from Internal Implementation\n\n### 1. Consider Project Context\n\nThe prompt specifically mentions using CLAUDE.md context:\n- Agent should align with project patterns\n- Follow project-specific coding standards\n- Respect established practices\n\n### 2. Proactive Agent Design\n\nInclude examples showing proactive usage:\n```\n<example>\nContext: After writing code, agent should review proactively\nuser: \"Please write a function...\"\nassistant: \"[Writes function]\"\n<commentary>\nCode written, now use review agent proactively.\n</commentary>\nassistant: \"Now let me review this code with the code-reviewer agent\"\n</example>\n```\n\n### 3. Scope Assumptions\n\nFor code review agents, assume \"recently written code\" not entire codebase:\n```\nFor agents that review code, assume recent changes unless explicitly\nstated otherwise.\n```\n\n### 4. Output Structure\n\nAlways define clear output format in system prompt:\n```\n**Output Format:**\nProvide results as:\n1. Summary (2-3 sentences)\n2. Detailed findings (bullet points)\n3. Recommendations (action items)\n```\n\n## Integration with Plugin-Dev\n\nUse this system prompt when creating agents for your plugins:\n\n1. Take user request for agent functionality\n2. Feed to Claude with this system prompt\n3. Get JSON output (identifier, whenToUse, systemPrompt)\n4. Convert to agent markdown file with frontmatter\n5. Validate with agent validation rules\n6. Test triggering conditions\n7. Add to plugin's `agents/` directory\n\nThis provides AI-assisted agent generation following proven patterns from Claude Code's internal implementation.\n",
        "plugins/plugin-dev/skills/agent-development/references/system-prompt-design.md": "# System Prompt Design Patterns\n\nComplete guide to writing effective agent system prompts that enable autonomous, high-quality operation.\n\n## Core Structure\n\nEvery agent system prompt should follow this proven structure:\n\n```markdown\nYou are [specific role] specializing in [specific domain].\n\n**Your Core Responsibilities:**\n1. [Primary responsibility - the main task]\n2. [Secondary responsibility - supporting task]\n3. [Additional responsibilities as needed]\n\n**[Task Name] Process:**\n1. [First concrete step]\n2. [Second concrete step]\n3. [Continue with clear steps]\n[...]\n\n**Quality Standards:**\n- [Standard 1 with specifics]\n- [Standard 2 with specifics]\n- [Standard 3 with specifics]\n\n**Output Format:**\nProvide results structured as:\n- [Component 1]\n- [Component 2]\n- [Include specific formatting requirements]\n\n**Edge Cases:**\nHandle these situations:\n- [Edge case 1]: [Specific handling approach]\n- [Edge case 2]: [Specific handling approach]\n```\n\n## Pattern 1: Analysis Agents\n\nFor agents that analyze code, PRs, or documentation:\n\n```markdown\nYou are an expert [domain] analyzer specializing in [specific analysis type].\n\n**Your Core Responsibilities:**\n1. Thoroughly analyze [what] for [specific issues]\n2. Identify [patterns/problems/opportunities]\n3. Provide actionable recommendations\n\n**Analysis Process:**\n1. **Gather Context**: Read [what] using available tools\n2. **Initial Scan**: Identify obvious [issues/patterns]\n3. **Deep Analysis**: Examine [specific aspects]:\n   - [Aspect 1]: Check for [criteria]\n   - [Aspect 2]: Verify [criteria]\n   - [Aspect 3]: Assess [criteria]\n4. **Synthesize Findings**: Group related issues\n5. **Prioritize**: Rank by [severity/impact/urgency]\n6. **Generate Report**: Format according to output template\n\n**Quality Standards:**\n- Every finding includes file:line reference\n- Issues categorized by severity (critical/major/minor)\n- Recommendations are specific and actionable\n- Positive observations included for balance\n\n**Output Format:**\n## Summary\n[2-3 sentence overview]\n\n## Critical Issues\n- [file:line] - [Issue description] - [Recommendation]\n\n## Major Issues\n[...]\n\n## Minor Issues\n[...]\n\n## Recommendations\n[...]\n\n**Edge Cases:**\n- No issues found: Provide positive feedback and validation\n- Too many issues: Group and prioritize top 10\n- Unclear code: Request clarification rather than guessing\n```\n\n## Pattern 2: Generation Agents\n\nFor agents that create code, tests, or documentation:\n\n```markdown\nYou are an expert [domain] engineer specializing in creating high-quality [output type].\n\n**Your Core Responsibilities:**\n1. Generate [what] that meets [quality standards]\n2. Follow [specific conventions/patterns]\n3. Ensure [correctness/completeness/clarity]\n\n**Generation Process:**\n1. **Understand Requirements**: Analyze what needs to be created\n2. **Gather Context**: Read existing [code/docs/tests] for patterns\n3. **Design Structure**: Plan [architecture/organization/flow]\n4. **Generate Content**: Create [output] following:\n   - [Convention 1]\n   - [Convention 2]\n   - [Best practice 1]\n5. **Validate**: Verify [correctness/completeness]\n6. **Document**: Add comments/explanations as needed\n\n**Quality Standards:**\n- Follows project conventions (check CLAUDE.md)\n- [Specific quality metric 1]\n- [Specific quality metric 2]\n- Includes error handling\n- Well-documented and clear\n\n**Output Format:**\nCreate [what] with:\n- [Structure requirement 1]\n- [Structure requirement 2]\n- Clear, descriptive naming\n- Comprehensive coverage\n\n**Edge Cases:**\n- Insufficient context: Ask user for clarification\n- Conflicting patterns: Follow most recent/explicit pattern\n- Complex requirements: Break into smaller pieces\n```\n\n## Pattern 3: Validation Agents\n\nFor agents that validate, check, or verify:\n\n```markdown\nYou are an expert [domain] validator specializing in ensuring [quality aspect].\n\n**Your Core Responsibilities:**\n1. Validate [what] against [criteria]\n2. Identify violations and issues\n3. Provide clear pass/fail determination\n\n**Validation Process:**\n1. **Load Criteria**: Understand validation requirements\n2. **Scan Target**: Read [what] needs validation\n3. **Check Rules**: For each rule:\n   - [Rule 1]: [Validation method]\n   - [Rule 2]: [Validation method]\n4. **Collect Violations**: Document each failure with details\n5. **Assess Severity**: Categorize issues\n6. **Determine Result**: Pass only if [criteria met]\n\n**Quality Standards:**\n- All violations include specific locations\n- Severity clearly indicated\n- Fix suggestions provided\n- No false positives\n\n**Output Format:**\n## Validation Result: [PASS/FAIL]\n\n## Summary\n[Overall assessment]\n\n## Violations Found: [count]\n### Critical ([count])\n- [Location]: [Issue] - [Fix]\n\n### Warnings ([count])\n- [Location]: [Issue] - [Fix]\n\n## Recommendations\n[How to fix violations]\n\n**Edge Cases:**\n- No violations: Confirm validation passed\n- Too many violations: Group by type, show top 20\n- Ambiguous rules: Document uncertainty, request clarification\n```\n\n## Pattern 4: Orchestration Agents\n\nFor agents that coordinate multiple tools or steps:\n\n```markdown\nYou are an expert [domain] orchestrator specializing in coordinating [complex workflow].\n\n**Your Core Responsibilities:**\n1. Coordinate [multi-step process]\n2. Manage [resources/tools/dependencies]\n3. Ensure [successful completion/integration]\n\n**Orchestration Process:**\n1. **Plan**: Understand full workflow and dependencies\n2. **Prepare**: Set up prerequisites\n3. **Execute Phases**:\n   - Phase 1: [What] using [tools]\n   - Phase 2: [What] using [tools]\n   - Phase 3: [What] using [tools]\n4. **Monitor**: Track progress and handle failures\n5. **Verify**: Confirm successful completion\n6. **Report**: Provide comprehensive summary\n\n**Quality Standards:**\n- Each phase completes successfully\n- Errors handled gracefully\n- Progress reported to user\n- Final state verified\n\n**Output Format:**\n## Workflow Execution Report\n\n### Completed Phases\n- [Phase]: [Result]\n\n### Results\n- [Output 1]\n- [Output 2]\n\n### Next Steps\n[If applicable]\n\n**Edge Cases:**\n- Phase failure: Attempt retry, then report and stop\n- Missing dependencies: Request from user\n- Timeout: Report partial completion\n```\n\n## Writing Style Guidelines\n\n### Tone and Voice\n\n**Use second person (addressing the agent):**\n```\n✅ You are responsible for...\n✅ You will analyze...\n✅ Your process should...\n\n❌ The agent is responsible for...\n❌ This agent will analyze...\n❌ I will analyze...\n```\n\n### Clarity and Specificity\n\n**Be specific, not vague:**\n```\n✅ Check for SQL injection by examining all database queries for parameterization\n❌ Look for security issues\n\n✅ Provide file:line references for each finding\n❌ Show where issues are\n\n✅ Categorize as critical (security), major (bugs), or minor (style)\n❌ Rate the severity of issues\n```\n\n### Actionable Instructions\n\n**Give concrete steps:**\n```\n✅ Read the file using the Read tool, then search for patterns using Grep\n❌ Analyze the code\n\n✅ Generate test file at test/path/to/file.test.ts\n❌ Create tests\n```\n\n## Common Pitfalls\n\n### ❌ Vague Responsibilities\n\n```markdown\n**Your Core Responsibilities:**\n1. Help the user with their code\n2. Provide assistance\n3. Be helpful\n```\n\n**Why bad:** Not specific enough to guide behavior.\n\n### ✅ Specific Responsibilities\n\n```markdown\n**Your Core Responsibilities:**\n1. Analyze TypeScript code for type safety issues\n2. Identify missing type annotations and improper 'any' usage\n3. Recommend specific type improvements with examples\n```\n\n### ❌ Missing Process Steps\n\n```markdown\nAnalyze the code and provide feedback.\n```\n\n**Why bad:** Agent doesn't know HOW to analyze.\n\n### ✅ Clear Process\n\n```markdown\n**Analysis Process:**\n1. Read code files using Read tool\n2. Scan for type annotations on all functions\n3. Check for 'any' type usage\n4. Verify generic type parameters\n5. List findings with file:line references\n```\n\n### ❌ Undefined Output\n\n```markdown\nProvide a report.\n```\n\n**Why bad:** Agent doesn't know what format to use.\n\n### ✅ Defined Output Format\n\n```markdown\n**Output Format:**\n## Type Safety Report\n\n### Summary\n[Overview of findings]\n\n### Issues Found\n- `file.ts:42` - Missing return type on `processData`\n- `utils.ts:15` - Unsafe 'any' usage in parameter\n\n### Recommendations\n[Specific fixes with examples]\n```\n\n## Length Guidelines\n\n### Minimum Viable Agent\n\n**~500 words minimum:**\n- Role description\n- 3 core responsibilities\n- 5-step process\n- Output format\n\n### Standard Agent\n\n**~1,000-2,000 words:**\n- Detailed role and expertise\n- 5-8 responsibilities\n- 8-12 process steps\n- Quality standards\n- Output format\n- 3-5 edge cases\n\n### Comprehensive Agent\n\n**~2,000-5,000 words:**\n- Complete role with background\n- Comprehensive responsibilities\n- Detailed multi-phase process\n- Extensive quality standards\n- Multiple output formats\n- Many edge cases\n- Examples within system prompt\n\n**Avoid > 10,000 words:** Too long, diminishing returns.\n\n## Testing System Prompts\n\n### Test Completeness\n\nCan the agent handle these based on system prompt alone?\n\n- [ ] Typical task execution\n- [ ] Edge cases mentioned\n- [ ] Error scenarios\n- [ ] Unclear requirements\n- [ ] Large/complex inputs\n- [ ] Empty/missing inputs\n\n### Test Clarity\n\nRead the system prompt and ask:\n\n- Can another developer understand what this agent does?\n- Are process steps clear and actionable?\n- Is output format unambiguous?\n- Are quality standards measurable?\n\n### Iterate Based on Results\n\nAfter testing agent:\n1. Identify where it struggled\n2. Add missing guidance to system prompt\n3. Clarify ambiguous instructions\n4. Add process steps for edge cases\n5. Re-test\n\n## Conclusion\n\nEffective system prompts are:\n- **Specific**: Clear about what and how\n- **Structured**: Organized with clear sections\n- **Complete**: Covers normal and edge cases\n- **Actionable**: Provides concrete steps\n- **Testable**: Defines measurable standards\n\nUse the patterns above as templates, customize for your domain, and iterate based on agent performance.\n",
        "plugins/plugin-dev/skills/agent-development/references/triggering-examples.md": "# Agent Triggering Examples: Best Practices\n\nComplete guide to writing effective `<example>` blocks in agent descriptions for reliable triggering.\n\n## Example Block Format\n\nThe standard format for triggering examples:\n\n```markdown\n<example>\nContext: [Describe the situation - what led to this interaction]\nuser: \"[Exact user message or request]\"\nassistant: \"[How Claude should respond before triggering]\"\n<commentary>\n[Explanation of why this agent should be triggered in this scenario]\n</commentary>\nassistant: \"[How Claude triggers the agent - usually 'I'll use the [agent-name] agent...']\"\n</example>\n```\n\n## Anatomy of a Good Example\n\n### Context\n\n**Purpose:** Set the scene - what happened before the user's message\n\n**Good contexts:**\n```\nContext: User just implemented a new authentication feature\nContext: User has created a PR and wants it reviewed\nContext: User is debugging a test failure\nContext: After writing several functions without documentation\n```\n\n**Bad contexts:**\n```\nContext: User needs help (too vague)\nContext: Normal usage (not specific)\n```\n\n### User Message\n\n**Purpose:** Show the exact phrasing that should trigger the agent\n\n**Good user messages:**\n```\nuser: \"I've added the OAuth flow, can you check it?\"\nuser: \"Review PR #123\"\nuser: \"Why is this test failing?\"\nuser: \"Add docs for these functions\"\n```\n\n**Vary the phrasing:**\nInclude multiple examples with different phrasings for the same intent:\n```\nExample 1: user: \"Review my code\"\nExample 2: user: \"Can you check this implementation?\"\nExample 3: user: \"Look over my changes\"\n```\n\n### Assistant Response (Before Triggering)\n\n**Purpose:** Show what Claude says before launching the agent\n\n**Good responses:**\n```\nassistant: \"I'll analyze your OAuth implementation.\"\nassistant: \"Let me review that PR for you.\"\nassistant: \"I'll investigate the test failure.\"\n```\n\n**Proactive example:**\n```\nassistant: \"Great! Now let me review the code quality.\"\n<commentary>\nCode was just written, proactively trigger review agent.\n</commentary>\n```\n\n### Commentary\n\n**Purpose:** Explain the reasoning - WHY this agent should trigger\n\n**Good commentary:**\n```\n<commentary>\nUser explicitly requested code review, trigger the code-reviewer agent.\n</commentary>\n\n<commentary>\nAfter code implementation, proactively use review agent to check quality.\n</commentary>\n\n<commentary>\nPR analysis request matches pr-analyzer agent's expertise.\n</commentary>\n```\n\n**Include decision logic:**\n```\n<commentary>\nUser wrote tests (Test tool used). The test-analyzer agent should check\ntest quality and coverage before continuing.\n</commentary>\n```\n\n### Assistant Response (Triggering)\n\n**Purpose:** Show how Claude invokes the agent\n\n**Standard pattern:**\n```\nassistant: \"I'll use the [agent-name] agent to [what it will do].\"\n```\n\n**Examples:**\n```\nassistant: \"I'll use the code-reviewer agent to analyze the changes.\"\nassistant: \"Let me use the test-generator agent to create comprehensive tests.\"\nassistant: \"I'll use the security-analyzer agent to check for vulnerabilities.\"\n```\n\n## Example Types\n\n### Type 1: Explicit Request\n\nUser directly asks for what the agent does:\n\n```markdown\n<example>\nContext: User explicitly requests security analysis\nuser: \"Check my code for security vulnerabilities\"\nassistant: \"I'll use the security-analyzer agent to perform a thorough security review.\"\n<commentary>\nDirect security analysis request triggers the security-analyzer agent.\n</commentary>\n</example>\n```\n\n### Type 2: Proactive Triggering\n\nAgent triggers after relevant work without explicit request:\n\n```markdown\n<example>\nContext: User just implemented database queries\nuser: \"I've added the user search functionality\"\nassistant: \"Great! Let me review it for security.\"\n<commentary>\nDatabase code written. Proactively trigger security-analyzer to check\nfor SQL injection and other database security issues.\n</commentary>\nassistant: \"I'll use the security-analyzer agent to check the database code.\"\n</example>\n```\n\n### Type 3: Implicit Request\n\nUser implies need without stating it directly:\n\n```markdown\n<example>\nContext: User mentions code is hard to understand\nuser: \"This code is confusing and hard to follow\"\nassistant: \"I can help improve the code clarity.\"\n<commentary>\nUser indicates complexity issues. Trigger code-simplifier agent to refactor\nfor better readability.\n</commentary>\nassistant: \"I'll use the code-simplifier agent to suggest improvements.\"\n</example>\n```\n\n### Type 4: Tool Usage Pattern\n\nAgent triggers based on prior tool usage:\n\n```markdown\n<example>\nContext: User made multiple edits to test files\nuser: \"I've updated all the tests\"\nassistant: \"Great! Let me verify test quality.\"\n<commentary>\nMultiple Edit tools used on test files. Proactively trigger test-quality-analyzer\nto ensure tests follow best practices.\n</commentary>\nassistant: \"I'll use the test-quality-analyzer agent to review the tests.\"\n</example>\n```\n\n## Multiple Examples Strategy\n\n### Cover Different Phrasings\n\n```markdown\n<example>\nuser: \"Review my code\"\n[...]\n</example>\n\n<example>\nuser: \"Can you check my implementation?\"\n[...]\n</example>\n\n<example>\nuser: \"Look over these changes\"\n[...]\n</example>\n```\n\n### Cover Proactive and Reactive\n\n```markdown\n<example>\nContext: User explicitly requests review\nuser: \"Review my code for issues\"\n[...]\n</example>\n\n<example>\nContext: After user writes code\nuser: \"I've implemented the feature\"\nassistant: \"Great! Now let me review it.\"\n<commentary>\nCode written, proactively review.\n</commentary>\n[...]\n</example>\n```\n\n### Cover Edge Cases\n\n```markdown\n<example>\nContext: Typical usage\nuser: \"Check my PR\"\n[...]\n</example>\n\n<example>\nContext: Large PR that needs thorough analysis\nuser: \"This is a big PR, can you do a deep review?\"\n[...]\n<commentary>\nLarge PR mentioned, use thorough analysis mode.\n</commentary>\n</example>\n```\n\n## Common Mistakes\n\n### ❌ Missing Context\n\n```markdown\n<example>\nuser: \"Review my code\"\nassistant: \"I'll use the code-reviewer agent.\"\n</example>\n```\n\n**Why bad:** No context about what led to this request.\n\n### ✅ With Context\n\n```markdown\n<example>\nContext: User just finished implementing authentication\nuser: \"Review my code\"\nassistant: \"I'll use the code-reviewer agent to analyze the auth implementation.\"\n<commentary>\nAuth code written, review for security and best practices.\n</commentary>\n</example>\n```\n\n### ❌ No Commentary\n\n```markdown\n<example>\nContext: User requests review\nuser: \"Check my changes\"\nassistant: \"I'll use the reviewer agent.\"\n</example>\n```\n\n**Why bad:** Doesn't explain WHY agent triggers.\n\n### ✅ With Commentary\n\n```markdown\n<example>\nContext: User requests review after making changes\nuser: \"Check my changes\"\nassistant: \"I'll use the code-reviewer agent to analyze the modifications.\"\n<commentary>\nCode review request triggers agent to check quality, security, and adherence to standards.\n</commentary>\n</example>\n```\n\n### ❌ Agent Responds Directly\n\n```markdown\n<example>\nuser: \"Review my code\"\nassistant: \"I found the following issues: [lists issues]\"\n</example>\n```\n\n**Why bad:** Shows agent's output, not triggering.\n\n### ✅ Shows Triggering\n\n```markdown\n<example>\nuser: \"Review my code\"\nassistant: \"I'll use the code-reviewer agent to perform the review.\"\n<commentary>\nReview request triggers the agent.\n</commentary>\n</example>\n```\n\n## How Many Examples?\n\n### Minimum: 2 Examples\n\nCover at least:\n1. Explicit request\n2. One variation or proactive trigger\n\n### Recommended: 3-4 Examples\n\nCover:\n1. Explicit request (direct ask)\n2. Implicit request (user implies need)\n3. Proactive trigger (after relevant work)\n4. Edge case or specific scenario\n\n### Maximum: 6 Examples\n\nMore than 6 makes description too long. Focus on most important scenarios.\n\n## Template Library\n\n### Code Review Agent\n\n```markdown\n<example>\nContext: User just implemented a new feature\nuser: \"I've added the user registration feature\"\nassistant: \"Great! Let me review the code quality.\"\n<commentary>\nCode written, proactively trigger code-reviewer agent.\n</commentary>\nassistant: \"I'll use the code-reviewer agent to analyze the implementation.\"\n</example>\n\n<example>\nContext: User explicitly requests review\nuser: \"Can you review my changes for issues?\"\nassistant: \"I'll use the code-reviewer agent to perform a thorough review.\"\n<commentary>\nExplicit review request triggers the agent.\n</commentary>\n</example>\n```\n\n### Test Generation Agent\n\n```markdown\n<example>\nContext: User implemented functions without tests\nuser: \"I've added the data processing functions\"\nassistant: \"Great! Let me generate tests for these.\"\n<commentary>\nNew code without tests, proactively trigger test-generator agent.\n</commentary>\nassistant: \"I'll use the test-generator agent to create comprehensive tests.\"\n</example>\n\n<example>\nContext: User explicitly asks for tests\nuser: \"Generate tests for my code\"\nassistant: \"I'll use the test-generator agent to create a complete test suite.\"\n<commentary>\nDirect test generation request triggers the agent.\n</commentary>\n</example>\n```\n\n### Documentation Agent\n\n```markdown\n<example>\nContext: User added new API endpoints\nuser: \"I've implemented the REST API endpoints\"\nassistant: \"I'll document these endpoints.\"\n<commentary>\nNew API code, proactively generate documentation.\n</commentary>\nassistant: \"I'll use the api-docs-writer agent to create comprehensive documentation.\"\n</example>\n\n<example>\nContext: User requests documentation\nuser: \"Write docs for this API\"\nassistant: \"I'll use the api-docs-writer agent to generate clear documentation.\"\n<commentary>\nDocumentation request triggers the agent.\n</commentary>\n</example>\n```\n\n### Validation Agent\n\n```markdown\n<example>\nContext: User ready to commit changes\nuser: \"I'm ready to commit this code\"\nassistant: \"Let me validate it first.\"\n<commentary>\nBefore commit, proactively validate with validation-agent.\n</commentary>\nassistant: \"I'll use the code-validator agent to check for issues.\"\n</example>\n\n<example>\nContext: User asks for validation\nuser: \"Validate my implementation\"\nassistant: \"I'll use the code-validator agent to verify correctness.\"\n<commentary>\nExplicit validation request triggers the agent.\n</commentary>\n</example>\n```\n\n## Debugging Triggering Issues\n\n### Agent Not Triggering\n\n**Check:**\n1. Examples include relevant keywords from user message\n2. Context matches actual usage scenarios\n3. Commentary explains triggering logic clearly\n4. Assistant shows use of Agent tool in examples\n\n**Fix:**\nAdd more examples covering different phrasings.\n\n### Agent Triggers Too Often\n\n**Check:**\n1. Examples are too broad or generic\n2. Triggering conditions overlap with other agents\n3. Commentary doesn't distinguish when NOT to use\n\n**Fix:**\nMake examples more specific, add negative examples.\n\n### Agent Triggers in Wrong Scenarios\n\n**Check:**\n1. Examples don't match actual intended use\n2. Commentary suggests inappropriate triggering\n\n**Fix:**\nRevise examples to show only correct triggering scenarios.\n\n## Best Practices Summary\n\n✅ **DO:**\n- Include 2-4 concrete, specific examples\n- Show both explicit and proactive triggering\n- Provide clear context for each example\n- Explain reasoning in commentary\n- Vary user message phrasing\n- Show Claude using Agent tool\n\n❌ **DON'T:**\n- Use generic, vague examples\n- Omit context or commentary\n- Show only one type of triggering\n- Skip the agent invocation step\n- Make examples too similar\n- Forget to explain why agent triggers\n\n## Conclusion\n\nWell-crafted examples are crucial for reliable agent triggering. Invest time in creating diverse, specific examples that clearly demonstrate when and why the agent should be used.\n",
        "plugins/plugin-dev/skills/command-development/README.md": "# Command Development Skill\n\nComprehensive guidance on creating Claude Code slash commands, including file format, frontmatter options, dynamic arguments, and best practices.\n\n## Overview\n\nThis skill provides knowledge about:\n- Slash command file format and structure\n- YAML frontmatter configuration fields\n- Dynamic arguments ($ARGUMENTS, $1, $2, etc.)\n- File references with @ syntax\n- Bash execution with !` syntax\n- Command organization and namespacing\n- Best practices for command development\n- Plugin-specific features (${CLAUDE_PLUGIN_ROOT}, plugin patterns)\n- Integration with plugin components (agents, skills, hooks)\n- Validation patterns and error handling\n\n## Skill Structure\n\n### SKILL.md (~2,470 words)\n\nCore skill content covering:\n\n**Fundamentals:**\n- Command basics and locations\n- File format (Markdown with optional frontmatter)\n- YAML frontmatter fields overview\n- Dynamic arguments ($ARGUMENTS and positional)\n- File references (@ syntax)\n- Bash execution (!` syntax)\n- Command organization patterns\n- Best practices and common patterns\n- Troubleshooting\n\n**Plugin-Specific:**\n- ${CLAUDE_PLUGIN_ROOT} environment variable\n- Plugin command discovery and organization\n- Plugin command patterns (configuration, template, multi-script)\n- Integration with plugin components (agents, skills, hooks)\n- Validation patterns (argument, file, resource, error handling)\n\n### References\n\nDetailed documentation:\n\n- **frontmatter-reference.md**: Complete YAML frontmatter field specifications\n  - All field descriptions with types and defaults\n  - When to use each field\n  - Examples and best practices\n  - Validation and common errors\n\n- **plugin-features-reference.md**: Plugin-specific command features\n  - Plugin command discovery and organization\n  - ${CLAUDE_PLUGIN_ROOT} environment variable usage\n  - Plugin command patterns (configuration, template, multi-script)\n  - Integration with plugin agents, skills, and hooks\n  - Validation patterns and error handling\n\n### Examples\n\nPractical command examples:\n\n- **simple-commands.md**: 10 complete command examples\n  - Code review commands\n  - Testing commands\n  - Deployment commands\n  - Documentation generators\n  - Git integration commands\n  - Analysis and research commands\n\n- **plugin-commands.md**: 10 plugin-specific command examples\n  - Simple plugin commands with scripts\n  - Multi-script workflows\n  - Template-based generation\n  - Configuration-driven deployment\n  - Agent and skill integration\n  - Multi-component workflows\n  - Validated input commands\n  - Environment-aware commands\n\n## When This Skill Triggers\n\nClaude Code activates this skill when users:\n- Ask to \"create a slash command\" or \"add a command\"\n- Need to \"write a custom command\"\n- Want to \"define command arguments\"\n- Ask about \"command frontmatter\" or YAML configuration\n- Need to \"organize commands\" or use namespacing\n- Want to create commands with file references\n- Ask about \"bash execution in commands\"\n- Need command development best practices\n\n## Progressive Disclosure\n\nThe skill uses progressive disclosure:\n\n1. **SKILL.md** (~2,470 words): Core concepts, common patterns, and plugin features overview\n2. **References** (~13,500 words total): Detailed specifications\n   - frontmatter-reference.md (~1,200 words)\n   - plugin-features-reference.md (~1,800 words)\n   - interactive-commands.md (~2,500 words)\n   - advanced-workflows.md (~1,700 words)\n   - testing-strategies.md (~2,200 words)\n   - documentation-patterns.md (~2,000 words)\n   - marketplace-considerations.md (~2,200 words)\n3. **Examples** (~6,000 words total): Complete working command examples\n   - simple-commands.md\n   - plugin-commands.md\n\nClaude loads references and examples as needed based on task.\n\n## Command Basics Quick Reference\n\n### File Format\n\n```markdown\n---\ndescription: Brief description\nargument-hint: [arg1] [arg2]\nallowed-tools: Read, Bash(git:*)\n---\n\nCommand prompt content with:\n- Arguments: $1, $2, or $ARGUMENTS\n- Files: @path/to/file\n- Bash: !`command here`\n```\n\n### Locations\n\n- **Project**: `.claude/commands/` (shared with team)\n- **Personal**: `~/.claude/commands/` (your commands)\n- **Plugin**: `plugin-name/commands/` (plugin-specific)\n\n### Key Features\n\n**Dynamic arguments:**\n- `$ARGUMENTS` - All arguments as single string\n- `$1`, `$2`, `$3` - Positional arguments\n\n**File references:**\n- `@path/to/file` - Include file contents\n\n**Bash execution:**\n- `!`command`` - Execute and include output\n\n## Frontmatter Fields Quick Reference\n\n| Field | Purpose | Example |\n|-------|---------|---------|\n| `description` | Brief description for /help | `\"Review code for issues\"` |\n| `allowed-tools` | Restrict tool access | `Read, Bash(git:*)` |\n| `model` | Specify model | `sonnet`, `opus`, `haiku` |\n| `argument-hint` | Document arguments | `[pr-number] [priority]` |\n| `disable-model-invocation` | Manual-only command | `true` |\n\n## Common Patterns\n\n### Simple Review Command\n\n```markdown\n---\ndescription: Review code for issues\n---\n\nReview this code for quality and potential bugs.\n```\n\n### Command with Arguments\n\n```markdown\n---\ndescription: Deploy to environment\nargument-hint: [environment] [version]\n---\n\nDeploy to $1 environment using version $2\n```\n\n### Command with File Reference\n\n```markdown\n---\ndescription: Document file\nargument-hint: [file-path]\n---\n\nGenerate documentation for @$1\n```\n\n### Command with Bash Execution\n\n```markdown\n---\ndescription: Show Git status\nallowed-tools: Bash(git:*)\n---\n\nCurrent status: !`git status`\nRecent commits: !`git log --oneline -5`\n```\n\n## Development Workflow\n\n1. **Design command:**\n   - Define purpose and scope\n   - Determine required arguments\n   - Identify needed tools\n\n2. **Create file:**\n   - Choose appropriate location\n   - Create `.md` file with command name\n   - Write basic prompt\n\n3. **Add frontmatter:**\n   - Start minimal (just description)\n   - Add fields as needed (allowed-tools, etc.)\n   - Document arguments with argument-hint\n\n4. **Test command:**\n   - Invoke with `/command-name`\n   - Verify arguments work\n   - Check bash execution\n   - Test file references\n\n5. **Refine:**\n   - Improve prompt clarity\n   - Handle edge cases\n   - Add examples in comments\n   - Document requirements\n\n## Best Practices Summary\n\n1. **Single responsibility**: One command, one clear purpose\n2. **Clear descriptions**: Make discoverable in `/help`\n3. **Document arguments**: Always use argument-hint\n4. **Minimal tools**: Use most restrictive allowed-tools\n5. **Test thoroughly**: Verify all features work\n6. **Add comments**: Explain complex logic\n7. **Handle errors**: Consider missing arguments/files\n\n## Status\n\n**Completed enhancements:**\n- ✓ Plugin command patterns (${CLAUDE_PLUGIN_ROOT}, discovery, organization)\n- ✓ Integration patterns (agents, skills, hooks coordination)\n- ✓ Validation patterns (input, file, resource validation, error handling)\n\n**Remaining enhancements (in progress):**\n- Advanced workflows (multi-step command sequences)\n- Testing strategies (how to test commands effectively)\n- Documentation patterns (command documentation best practices)\n- Marketplace considerations (publishing and distribution)\n\n## Maintenance\n\nTo update this skill:\n1. Keep SKILL.md focused on core fundamentals\n2. Move detailed specifications to references/\n3. Add new examples/ for different use cases\n4. Update frontmatter when new fields added\n5. Ensure imperative/infinitive form throughout\n6. Test examples work with current Claude Code\n\n## Version History\n\n**v0.1.0** (2025-01-15):\n- Initial release with basic command fundamentals\n- Frontmatter field reference\n- 10 simple command examples\n- Ready for plugin-specific pattern additions\n",
        "plugins/plugin-dev/skills/command-development/SKILL.md": "---\nname: Command Development\ndescription: This skill should be used when the user asks to \"create a slash command\", \"add a command\", \"write a custom command\", \"define command arguments\", \"use command frontmatter\", \"organize commands\", \"create command with file references\", \"interactive command\", \"use AskUserQuestion in command\", or needs guidance on slash command structure, YAML frontmatter fields, dynamic arguments, bash execution in commands, user interaction patterns, or command development best practices for Claude Code.\nversion: 0.2.0\n---\n\n# Command Development for Claude Code\n\n## Overview\n\nSlash commands are frequently-used prompts defined as Markdown files that Claude executes during interactive sessions. Understanding command structure, frontmatter options, and dynamic features enables creating powerful, reusable workflows.\n\n**Key concepts:**\n- Markdown file format for commands\n- YAML frontmatter for configuration\n- Dynamic arguments and file references\n- Bash execution for context\n- Command organization and namespacing\n\n## Command Basics\n\n### What is a Slash Command?\n\nA slash command is a Markdown file containing a prompt that Claude executes when invoked. Commands provide:\n- **Reusability**: Define once, use repeatedly\n- **Consistency**: Standardize common workflows\n- **Sharing**: Distribute across team or projects\n- **Efficiency**: Quick access to complex prompts\n\n### Critical: Commands are Instructions FOR Claude\n\n**Commands are written for agent consumption, not human consumption.**\n\nWhen a user invokes `/command-name`, the command content becomes Claude's instructions. Write commands as directives TO Claude about what to do, not as messages TO the user.\n\n**Correct approach (instructions for Claude):**\n```markdown\nReview this code for security vulnerabilities including:\n- SQL injection\n- XSS attacks\n- Authentication issues\n\nProvide specific line numbers and severity ratings.\n```\n\n**Incorrect approach (messages to user):**\n```markdown\nThis command will review your code for security issues.\nYou'll receive a report with vulnerability details.\n```\n\nThe first example tells Claude what to do. The second tells the user what will happen but doesn't instruct Claude. Always use the first approach.\n\n### Command Locations\n\n**Project commands** (shared with team):\n- Location: `.claude/commands/`\n- Scope: Available in specific project\n- Label: Shown as \"(project)\" in `/help`\n- Use for: Team workflows, project-specific tasks\n\n**Personal commands** (available everywhere):\n- Location: `~/.claude/commands/`\n- Scope: Available in all projects\n- Label: Shown as \"(user)\" in `/help`\n- Use for: Personal workflows, cross-project utilities\n\n**Plugin commands** (bundled with plugins):\n- Location: `plugin-name/commands/`\n- Scope: Available when plugin installed\n- Label: Shown as \"(plugin-name)\" in `/help`\n- Use for: Plugin-specific functionality\n\n## File Format\n\n### Basic Structure\n\nCommands are Markdown files with `.md` extension:\n\n```\n.claude/commands/\n├── review.md           # /review command\n├── test.md             # /test command\n└── deploy.md           # /deploy command\n```\n\n**Simple command:**\n```markdown\nReview this code for security vulnerabilities including:\n- SQL injection\n- XSS attacks\n- Authentication bypass\n- Insecure data handling\n```\n\nNo frontmatter needed for basic commands.\n\n### With YAML Frontmatter\n\nAdd configuration using YAML frontmatter:\n\n```markdown\n---\ndescription: Review code for security issues\nallowed-tools: Read, Grep, Bash(git:*)\nmodel: sonnet\n---\n\nReview this code for security vulnerabilities...\n```\n\n## YAML Frontmatter Fields\n\n### description\n\n**Purpose:** Brief description shown in `/help`\n**Type:** String\n**Default:** First line of command prompt\n\n```yaml\n---\ndescription: Review pull request for code quality\n---\n```\n\n**Best practice:** Clear, actionable description (under 60 characters)\n\n### allowed-tools\n\n**Purpose:** Specify which tools command can use\n**Type:** String or Array\n**Default:** Inherits from conversation\n\n```yaml\n---\nallowed-tools: Read, Write, Edit, Bash(git:*)\n---\n```\n\n**Patterns:**\n- `Read, Write, Edit` - Specific tools\n- `Bash(git:*)` - Bash with git commands only\n- `*` - All tools (rarely needed)\n\n**Use when:** Command requires specific tool access\n\n### model\n\n**Purpose:** Specify model for command execution\n**Type:** String (sonnet, opus, haiku)\n**Default:** Inherits from conversation\n\n```yaml\n---\nmodel: haiku\n---\n```\n\n**Use cases:**\n- `haiku` - Fast, simple commands\n- `sonnet` - Standard workflows\n- `opus` - Complex analysis\n\n### argument-hint\n\n**Purpose:** Document expected arguments for autocomplete\n**Type:** String\n**Default:** None\n\n```yaml\n---\nargument-hint: [pr-number] [priority] [assignee]\n---\n```\n\n**Benefits:**\n- Helps users understand command arguments\n- Improves command discovery\n- Documents command interface\n\n### disable-model-invocation\n\n**Purpose:** Prevent SlashCommand tool from programmatically calling command\n**Type:** Boolean\n**Default:** false\n\n```yaml\n---\ndisable-model-invocation: true\n---\n```\n\n**Use when:** Command should only be manually invoked\n\n## Dynamic Arguments\n\n### Using $ARGUMENTS\n\nCapture all arguments as single string:\n\n```markdown\n---\ndescription: Fix issue by number\nargument-hint: [issue-number]\n---\n\nFix issue #$ARGUMENTS following our coding standards and best practices.\n```\n\n**Usage:**\n```\n> /fix-issue 123\n> /fix-issue 456\n```\n\n**Expands to:**\n```\nFix issue #123 following our coding standards...\nFix issue #456 following our coding standards...\n```\n\n### Using Positional Arguments\n\nCapture individual arguments with `$1`, `$2`, `$3`, etc.:\n\n```markdown\n---\ndescription: Review PR with priority and assignee\nargument-hint: [pr-number] [priority] [assignee]\n---\n\nReview pull request #$1 with priority level $2.\nAfter review, assign to $3 for follow-up.\n```\n\n**Usage:**\n```\n> /review-pr 123 high alice\n```\n\n**Expands to:**\n```\nReview pull request #123 with priority level high.\nAfter review, assign to alice for follow-up.\n```\n\n### Combining Arguments\n\nMix positional and remaining arguments:\n\n```markdown\nDeploy $1 to $2 environment with options: $3\n```\n\n**Usage:**\n```\n> /deploy api staging --force --skip-tests\n```\n\n**Expands to:**\n```\nDeploy api to staging environment with options: --force --skip-tests\n```\n\n## File References\n\n### Using @ Syntax\n\nInclude file contents in command:\n\n```markdown\n---\ndescription: Review specific file\nargument-hint: [file-path]\n---\n\nReview @$1 for:\n- Code quality\n- Best practices\n- Potential bugs\n```\n\n**Usage:**\n```\n> /review-file src/api/users.ts\n```\n\n**Effect:** Claude reads `src/api/users.ts` before processing command\n\n### Multiple File References\n\nReference multiple files:\n\n```markdown\nCompare @src/old-version.js with @src/new-version.js\n\nIdentify:\n- Breaking changes\n- New features\n- Bug fixes\n```\n\n### Static File References\n\nReference known files without arguments:\n\n```markdown\nReview @package.json and @tsconfig.json for consistency\n\nEnsure:\n- TypeScript version matches\n- Dependencies are aligned\n- Build configuration is correct\n```\n\n## Bash Execution in Commands\n\nCommands can execute bash commands inline to dynamically gather context before Claude processes the command. This is useful for including repository state, environment information, or project-specific context.\n\n**When to use:**\n- Include dynamic context (git status, environment vars, etc.)\n- Gather project/repository state\n- Build context-aware workflows\n\n**Implementation details:**\nFor complete syntax, examples, and best practices, see `references/plugin-features-reference.md` section on bash execution. The reference includes the exact syntax and multiple working examples to avoid execution issues\n\n## Command Organization\n\n### Flat Structure\n\nSimple organization for small command sets:\n\n```\n.claude/commands/\n├── build.md\n├── test.md\n├── deploy.md\n├── review.md\n└── docs.md\n```\n\n**Use when:** 5-15 commands, no clear categories\n\n### Namespaced Structure\n\nOrganize commands in subdirectories:\n\n```\n.claude/commands/\n├── ci/\n│   ├── build.md        # /build (project:ci)\n│   ├── test.md         # /test (project:ci)\n│   └── lint.md         # /lint (project:ci)\n├── git/\n│   ├── commit.md       # /commit (project:git)\n│   └── pr.md           # /pr (project:git)\n└── docs/\n    ├── generate.md     # /generate (project:docs)\n    └── publish.md      # /publish (project:docs)\n```\n\n**Benefits:**\n- Logical grouping by category\n- Namespace shown in `/help`\n- Easier to find related commands\n\n**Use when:** 15+ commands, clear categories\n\n## Best Practices\n\n### Command Design\n\n1. **Single responsibility:** One command, one task\n2. **Clear descriptions:** Self-explanatory in `/help`\n3. **Explicit dependencies:** Use `allowed-tools` when needed\n4. **Document arguments:** Always provide `argument-hint`\n5. **Consistent naming:** Use verb-noun pattern (review-pr, fix-issue)\n\n### Argument Handling\n\n1. **Validate arguments:** Check for required arguments in prompt\n2. **Provide defaults:** Suggest defaults when arguments missing\n3. **Document format:** Explain expected argument format\n4. **Handle edge cases:** Consider missing or invalid arguments\n\n```markdown\n---\nargument-hint: [pr-number]\n---\n\n$IF($1,\n  Review PR #$1,\n  Please provide a PR number. Usage: /review-pr [number]\n)\n```\n\n### File References\n\n1. **Explicit paths:** Use clear file paths\n2. **Check existence:** Handle missing files gracefully\n3. **Relative paths:** Use project-relative paths\n4. **Glob support:** Consider using Glob tool for patterns\n\n### Bash Commands\n\n1. **Limit scope:** Use `Bash(git:*)` not `Bash(*)`\n2. **Safe commands:** Avoid destructive operations\n3. **Handle errors:** Consider command failures\n4. **Keep fast:** Long-running commands slow invocation\n\n### Documentation\n\n1. **Add comments:** Explain complex logic\n2. **Provide examples:** Show usage in comments\n3. **List requirements:** Document dependencies\n4. **Version commands:** Note breaking changes\n\n```markdown\n---\ndescription: Deploy application to environment\nargument-hint: [environment] [version]\n---\n\n<!--\nUsage: /deploy [staging|production] [version]\nRequires: AWS credentials configured\nExample: /deploy staging v1.2.3\n-->\n\nDeploy application to $1 environment using version $2...\n```\n\n## Common Patterns\n\n### Review Pattern\n\n```markdown\n---\ndescription: Review code changes\nallowed-tools: Read, Bash(git:*)\n---\n\nFiles changed: !`git diff --name-only`\n\nReview each file for:\n1. Code quality and style\n2. Potential bugs or issues\n3. Test coverage\n4. Documentation needs\n\nProvide specific feedback for each file.\n```\n\n### Testing Pattern\n\n```markdown\n---\ndescription: Run tests for specific file\nargument-hint: [test-file]\nallowed-tools: Bash(npm:*)\n---\n\nRun tests: !`npm test $1`\n\nAnalyze results and suggest fixes for failures.\n```\n\n### Documentation Pattern\n\n```markdown\n---\ndescription: Generate documentation for file\nargument-hint: [source-file]\n---\n\nGenerate comprehensive documentation for @$1 including:\n- Function/class descriptions\n- Parameter documentation\n- Return value descriptions\n- Usage examples\n- Edge cases and errors\n```\n\n### Workflow Pattern\n\n```markdown\n---\ndescription: Complete PR workflow\nargument-hint: [pr-number]\nallowed-tools: Bash(gh:*), Read\n---\n\nPR #$1 Workflow:\n\n1. Fetch PR: !`gh pr view $1`\n2. Review changes\n3. Run checks\n4. Approve or request changes\n```\n\n## Troubleshooting\n\n**Command not appearing:**\n- Check file is in correct directory\n- Verify `.md` extension present\n- Ensure valid Markdown format\n- Restart Claude Code\n\n**Arguments not working:**\n- Verify `$1`, `$2` syntax correct\n- Check `argument-hint` matches usage\n- Ensure no extra spaces\n\n**Bash execution failing:**\n- Check `allowed-tools` includes Bash\n- Verify command syntax in backticks\n- Test command in terminal first\n- Check for required permissions\n\n**File references not working:**\n- Verify `@` syntax correct\n- Check file path is valid\n- Ensure Read tool allowed\n- Use absolute or project-relative paths\n\n## Plugin-Specific Features\n\n### CLAUDE_PLUGIN_ROOT Variable\n\nPlugin commands have access to `${CLAUDE_PLUGIN_ROOT}`, an environment variable that resolves to the plugin's absolute path.\n\n**Purpose:**\n- Reference plugin files portably\n- Execute plugin scripts\n- Load plugin configuration\n- Access plugin templates\n\n**Basic usage:**\n\n```markdown\n---\ndescription: Analyze using plugin script\nallowed-tools: Bash(node:*)\n---\n\nRun analysis: !`node ${CLAUDE_PLUGIN_ROOT}/scripts/analyze.js $1`\n\nReview results and report findings.\n```\n\n**Common patterns:**\n\n```markdown\n# Execute plugin script\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/script.sh`\n\n# Load plugin configuration\n@${CLAUDE_PLUGIN_ROOT}/config/settings.json\n\n# Use plugin template\n@${CLAUDE_PLUGIN_ROOT}/templates/report.md\n\n# Access plugin resources\n@${CLAUDE_PLUGIN_ROOT}/docs/reference.md\n```\n\n**Why use it:**\n- Works across all installations\n- Portable between systems\n- No hardcoded paths needed\n- Essential for multi-file plugins\n\n### Plugin Command Organization\n\nPlugin commands discovered automatically from `commands/` directory:\n\n```\nplugin-name/\n├── commands/\n│   ├── foo.md              # /foo (plugin:plugin-name)\n│   ├── bar.md              # /bar (plugin:plugin-name)\n│   └── utils/\n│       └── helper.md       # /helper (plugin:plugin-name:utils)\n└── plugin.json\n```\n\n**Namespace benefits:**\n- Logical command grouping\n- Shown in `/help` output\n- Avoid name conflicts\n- Organize related commands\n\n**Naming conventions:**\n- Use descriptive action names\n- Avoid generic names (test, run)\n- Consider plugin-specific prefix\n- Use hyphens for multi-word names\n\n### Plugin Command Patterns\n\n**Configuration-based pattern:**\n\n```markdown\n---\ndescription: Deploy using plugin configuration\nargument-hint: [environment]\nallowed-tools: Read, Bash(*)\n---\n\nLoad configuration: @${CLAUDE_PLUGIN_ROOT}/config/$1-deploy.json\n\nDeploy to $1 using configuration settings.\nMonitor deployment and report status.\n```\n\n**Template-based pattern:**\n\n```markdown\n---\ndescription: Generate docs from template\nargument-hint: [component]\n---\n\nTemplate: @${CLAUDE_PLUGIN_ROOT}/templates/docs.md\n\nGenerate documentation for $1 following template structure.\n```\n\n**Multi-script pattern:**\n\n```markdown\n---\ndescription: Complete build workflow\nallowed-tools: Bash(*)\n---\n\nBuild: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh`\nTest: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/test.sh`\nPackage: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/package.sh`\n\nReview outputs and report workflow status.\n```\n\n**See `references/plugin-features-reference.md` for detailed patterns.**\n\n## Integration with Plugin Components\n\nCommands can integrate with other plugin components for powerful workflows.\n\n### Agent Integration\n\nLaunch plugin agents for complex tasks:\n\n```markdown\n---\ndescription: Deep code review\nargument-hint: [file-path]\n---\n\nInitiate comprehensive review of @$1 using the code-reviewer agent.\n\nThe agent will analyze:\n- Code structure\n- Security issues\n- Performance\n- Best practices\n\nAgent uses plugin resources:\n- ${CLAUDE_PLUGIN_ROOT}/config/rules.json\n- ${CLAUDE_PLUGIN_ROOT}/checklists/review.md\n```\n\n**Key points:**\n- Agent must exist in `plugin/agents/` directory\n- Claude uses Task tool to launch agent\n- Document agent capabilities\n- Reference plugin resources agent uses\n\n### Skill Integration\n\nLeverage plugin skills for specialized knowledge:\n\n```markdown\n---\ndescription: Document API with standards\nargument-hint: [api-file]\n---\n\nDocument API in @$1 following plugin standards.\n\nUse the api-docs-standards skill to ensure:\n- Complete endpoint documentation\n- Consistent formatting\n- Example quality\n- Error documentation\n\nGenerate production-ready API docs.\n```\n\n**Key points:**\n- Skill must exist in `plugin/skills/` directory\n- Mention skill name to trigger invocation\n- Document skill purpose\n- Explain what skill provides\n\n### Hook Coordination\n\nDesign commands that work with plugin hooks:\n- Commands can prepare state for hooks to process\n- Hooks execute automatically on tool events\n- Commands should document expected hook behavior\n- Guide Claude on interpreting hook output\n\nSee `references/plugin-features-reference.md` for examples of commands that coordinate with hooks\n\n### Multi-Component Workflows\n\nCombine agents, skills, and scripts:\n\n```markdown\n---\ndescription: Comprehensive review workflow\nargument-hint: [file]\nallowed-tools: Bash(node:*), Read\n---\n\nTarget: @$1\n\nPhase 1 - Static Analysis:\n!`node ${CLAUDE_PLUGIN_ROOT}/scripts/lint.js $1`\n\nPhase 2 - Deep Review:\nLaunch code-reviewer agent for detailed analysis.\n\nPhase 3 - Standards Check:\nUse coding-standards skill for validation.\n\nPhase 4 - Report:\nTemplate: @${CLAUDE_PLUGIN_ROOT}/templates/review.md\n\nCompile findings into report following template.\n```\n\n**When to use:**\n- Complex multi-step workflows\n- Leverage multiple plugin capabilities\n- Require specialized analysis\n- Need structured outputs\n\n## Validation Patterns\n\nCommands should validate inputs and resources before processing.\n\n### Argument Validation\n\n```markdown\n---\ndescription: Deploy with validation\nargument-hint: [environment]\n---\n\nValidate environment: !`echo \"$1\" | grep -E \"^(dev|staging|prod)$\" || echo \"INVALID\"`\n\nIf $1 is valid environment:\n  Deploy to $1\nOtherwise:\n  Explain valid environments: dev, staging, prod\n  Show usage: /deploy [environment]\n```\n\n### File Existence Checks\n\n```markdown\n---\ndescription: Process configuration\nargument-hint: [config-file]\n---\n\nCheck file exists: !`test -f $1 && echo \"EXISTS\" || echo \"MISSING\"`\n\nIf file exists:\n  Process configuration: @$1\nOtherwise:\n  Explain where to place config file\n  Show expected format\n  Provide example configuration\n```\n\n### Plugin Resource Validation\n\n```markdown\n---\ndescription: Run plugin analyzer\nallowed-tools: Bash(test:*)\n---\n\nValidate plugin setup:\n- Script: !`test -x ${CLAUDE_PLUGIN_ROOT}/bin/analyze && echo \"✓\" || echo \"✗\"`\n- Config: !`test -f ${CLAUDE_PLUGIN_ROOT}/config.json && echo \"✓\" || echo \"✗\"`\n\nIf all checks pass, run analysis.\nOtherwise, report missing components.\n```\n\n### Error Handling\n\n```markdown\n---\ndescription: Build with error handling\nallowed-tools: Bash(*)\n---\n\nExecute build: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh 2>&1 || echo \"BUILD_FAILED\"`\n\nIf build succeeded:\n  Report success and output location\nIf build failed:\n  Analyze error output\n  Suggest likely causes\n  Provide troubleshooting steps\n```\n\n**Best practices:**\n- Validate early in command\n- Provide helpful error messages\n- Suggest corrective actions\n- Handle edge cases gracefully\n\n---\n\nFor detailed frontmatter field specifications, see `references/frontmatter-reference.md`.\nFor plugin-specific features and patterns, see `references/plugin-features-reference.md`.\nFor command pattern examples, see `examples/` directory.\n",
        "plugins/plugin-dev/skills/command-development/examples/plugin-commands.md": "# Plugin Command Examples\n\nPractical examples of commands designed for Claude Code plugins, demonstrating plugin-specific patterns and features.\n\n## Table of Contents\n\n1. [Simple Plugin Command](#1-simple-plugin-command)\n2. [Script-Based Analysis](#2-script-based-analysis)\n3. [Template-Based Generation](#3-template-based-generation)\n4. [Multi-Script Workflow](#4-multi-script-workflow)\n5. [Configuration-Driven Deployment](#5-configuration-driven-deployment)\n6. [Agent Integration](#6-agent-integration)\n7. [Skill Integration](#7-skill-integration)\n8. [Multi-Component Workflow](#8-multi-component-workflow)\n9. [Validated Input Command](#9-validated-input-command)\n10. [Environment-Aware Command](#10-environment-aware-command)\n\n---\n\n## 1. Simple Plugin Command\n\n**Use case:** Basic command that uses plugin script\n\n**File:** `commands/analyze.md`\n\n```markdown\n---\ndescription: Analyze code quality using plugin tools\nargument-hint: [file-path]\nallowed-tools: Bash(node:*), Read\n---\n\nAnalyze @$1 using plugin's quality checker:\n\n!`node ${CLAUDE_PLUGIN_ROOT}/scripts/quality-check.js $1`\n\nReview the analysis output and provide:\n1. Summary of findings\n2. Priority issues to address\n3. Suggested improvements\n4. Code quality score interpretation\n```\n\n**Key features:**\n- Uses `${CLAUDE_PLUGIN_ROOT}` for portable path\n- Combines file reference with script execution\n- Simple single-purpose command\n\n---\n\n## 2. Script-Based Analysis\n\n**Use case:** Run comprehensive analysis using multiple plugin scripts\n\n**File:** `commands/full-audit.md`\n\n```markdown\n---\ndescription: Complete code audit using plugin suite\nargument-hint: [directory]\nallowed-tools: Bash(*)\nmodel: sonnet\n---\n\nRunning complete audit on $1:\n\n**Security scan:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/security-scan.sh $1`\n\n**Performance analysis:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/perf-analyze.sh $1`\n\n**Best practices check:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/best-practices.sh $1`\n\nAnalyze all results and create comprehensive report including:\n- Critical issues requiring immediate attention\n- Performance optimization opportunities\n- Security vulnerabilities and fixes\n- Overall health score and recommendations\n```\n\n**Key features:**\n- Multiple script executions\n- Organized output sections\n- Comprehensive workflow\n- Clear reporting structure\n\n---\n\n## 3. Template-Based Generation\n\n**Use case:** Generate documentation following plugin template\n\n**File:** `commands/gen-api-docs.md`\n\n```markdown\n---\ndescription: Generate API documentation from template\nargument-hint: [api-file]\n---\n\nTemplate structure: @${CLAUDE_PLUGIN_ROOT}/templates/api-documentation.md\n\nAPI implementation: @$1\n\nGenerate complete API documentation following the template format above.\n\nEnsure documentation includes:\n- Endpoint descriptions with HTTP methods\n- Request/response schemas\n- Authentication requirements\n- Error codes and handling\n- Usage examples with curl commands\n- Rate limiting information\n\nFormat output as markdown suitable for README or docs site.\n```\n\n**Key features:**\n- Uses plugin template\n- Combines template with source file\n- Standardized output format\n- Clear documentation structure\n\n---\n\n## 4. Multi-Script Workflow\n\n**Use case:** Orchestrate build, test, and deploy workflow\n\n**File:** `commands/release.md`\n\n```markdown\n---\ndescription: Execute complete release workflow\nargument-hint: [version]\nallowed-tools: Bash(*), Read\n---\n\nExecuting release workflow for version $1:\n\n**Step 1 - Pre-release validation:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/pre-release-check.sh $1`\n\n**Step 2 - Build artifacts:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build-release.sh $1`\n\n**Step 3 - Run test suite:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/run-tests.sh`\n\n**Step 4 - Package release:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/package.sh $1`\n\nReview all step outputs and report:\n1. Any failures or warnings\n2. Build artifacts location\n3. Test results summary\n4. Next steps for deployment\n5. Rollback plan if needed\n```\n\n**Key features:**\n- Multi-step workflow\n- Sequential script execution\n- Clear step numbering\n- Comprehensive reporting\n\n---\n\n## 5. Configuration-Driven Deployment\n\n**Use case:** Deploy using environment-specific plugin configuration\n\n**File:** `commands/deploy.md`\n\n```markdown\n---\ndescription: Deploy application to environment\nargument-hint: [environment]\nallowed-tools: Read, Bash(*)\n---\n\nDeployment configuration for $1: @${CLAUDE_PLUGIN_ROOT}/config/$1-deploy.json\n\nCurrent git state: !`git rev-parse --short HEAD`\n\nBuild info: !`cat package.json | grep -E '(name|version)'`\n\nExecute deployment to $1 environment using configuration above.\n\nDeployment checklist:\n1. Validate configuration settings\n2. Build application for $1\n3. Run pre-deployment tests\n4. Deploy to target environment\n5. Run smoke tests\n6. Verify deployment success\n7. Update deployment log\n\nReport deployment status and any issues encountered.\n```\n\n**Key features:**\n- Environment-specific configuration\n- Dynamic config file loading\n- Pre-deployment validation\n- Structured checklist\n\n---\n\n## 6. Agent Integration\n\n**Use case:** Command that launches plugin agent for complex task\n\n**File:** `commands/deep-review.md`\n\n```markdown\n---\ndescription: Deep code review using plugin agent\nargument-hint: [file-or-directory]\n---\n\nInitiate comprehensive code review of @$1 using the code-reviewer agent.\n\nThe agent will perform:\n1. **Static analysis** - Check for code smells and anti-patterns\n2. **Security audit** - Identify potential vulnerabilities\n3. **Performance review** - Find optimization opportunities\n4. **Best practices** - Ensure code follows standards\n5. **Documentation check** - Verify adequate documentation\n\nThe agent has access to:\n- Plugin's linting rules: ${CLAUDE_PLUGIN_ROOT}/config/lint-rules.json\n- Security checklist: ${CLAUDE_PLUGIN_ROOT}/checklists/security.md\n- Performance guidelines: ${CLAUDE_PLUGIN_ROOT}/docs/performance.md\n\nNote: This uses the Task tool to launch the plugin's code-reviewer agent for thorough analysis.\n```\n\n**Key features:**\n- Delegates to plugin agent\n- Documents agent capabilities\n- References plugin resources\n- Clear scope definition\n\n---\n\n## 7. Skill Integration\n\n**Use case:** Command that leverages plugin skill for specialized knowledge\n\n**File:** `commands/document-api.md`\n\n```markdown\n---\ndescription: Document API following plugin standards\nargument-hint: [api-file]\n---\n\nAPI source code: @$1\n\nGenerate API documentation following the plugin's API documentation standards.\n\nUse the api-documentation-standards skill to ensure:\n- **OpenAPI compliance** - Follow OpenAPI 3.0 specification\n- **Consistent formatting** - Use plugin's documentation style\n- **Complete coverage** - Document all endpoints and schemas\n- **Example quality** - Provide realistic usage examples\n- **Error documentation** - Cover all error scenarios\n\nThe skill provides:\n- Standard documentation templates\n- API documentation best practices\n- Common patterns for this codebase\n- Quality validation criteria\n\nGenerate production-ready API documentation.\n```\n\n**Key features:**\n- Invokes plugin skill by name\n- Documents skill purpose\n- Clear expectations\n- Leverages skill knowledge\n\n---\n\n## 8. Multi-Component Workflow\n\n**Use case:** Complex workflow using agents, skills, and scripts\n\n**File:** `commands/complete-review.md`\n\n```markdown\n---\ndescription: Comprehensive review using all plugin components\nargument-hint: [file-path]\nallowed-tools: Bash(node:*), Read\n---\n\nTarget file: @$1\n\nExecute comprehensive review workflow:\n\n**Phase 1: Automated Analysis**\nRun plugin analyzer: !`node ${CLAUDE_PLUGIN_ROOT}/scripts/analyze.js $1`\n\n**Phase 2: Deep Review (Agent)**\nLaunch the code-quality-reviewer agent for detailed analysis.\nAgent will examine:\n- Code structure and organization\n- Error handling patterns\n- Testing coverage\n- Documentation quality\n\n**Phase 3: Standards Check (Skill)**\nUse the coding-standards skill to validate:\n- Naming conventions\n- Code formatting\n- Best practices adherence\n- Framework-specific patterns\n\n**Phase 4: Report Generation**\nTemplate: @${CLAUDE_PLUGIN_ROOT}/templates/review-report.md\n\nCompile all findings into comprehensive report following template.\n\n**Phase 5: Recommendations**\nGenerate prioritized action items:\n1. Critical issues (must fix)\n2. Important improvements (should fix)\n3. Nice-to-have enhancements (could fix)\n\nInclude specific file locations and suggested changes for each item.\n```\n\n**Key features:**\n- Multi-phase workflow\n- Combines scripts, agents, skills\n- Template-based reporting\n- Prioritized outputs\n\n---\n\n## 9. Validated Input Command\n\n**Use case:** Command with input validation and error handling\n\n**File:** `commands/build-env.md`\n\n```markdown\n---\ndescription: Build for specific environment with validation\nargument-hint: [environment]\nallowed-tools: Bash(*)\n---\n\nValidate environment argument: !`echo \"$1\" | grep -E \"^(dev|staging|prod)$\" && echo \"VALID\" || echo \"INVALID\"`\n\nCheck build script exists: !`test -x ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh && echo \"EXISTS\" || echo \"MISSING\"`\n\nVerify configuration available: !`test -f ${CLAUDE_PLUGIN_ROOT}/config/$1.json && echo \"FOUND\" || echo \"NOT_FOUND\"`\n\nIf all validations pass:\n\n**Configuration:** @${CLAUDE_PLUGIN_ROOT}/config/$1.json\n\n**Execute build:** !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh $1 2>&1`\n\n**Validation results:** !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate-build.sh $1 2>&1`\n\nReport build status and any issues.\n\nIf validations fail:\n- Explain which validation failed\n- Provide expected values/locations\n- Suggest corrective actions\n- Document troubleshooting steps\n```\n\n**Key features:**\n- Input validation\n- Resource existence checks\n- Error handling\n- Helpful error messages\n- Graceful failure handling\n\n---\n\n## 10. Environment-Aware Command\n\n**Use case:** Command that adapts behavior based on environment\n\n**File:** `commands/run-checks.md`\n\n```markdown\n---\ndescription: Run environment-appropriate checks\nargument-hint: [environment]\nallowed-tools: Bash(*), Read\n---\n\nEnvironment: $1\n\nLoad environment configuration: @${CLAUDE_PLUGIN_ROOT}/config/$1-checks.json\n\nDetermine check level: !`echo \"$1\" | grep -E \"^prod$\" && echo \"FULL\" || echo \"BASIC\"`\n\n**For production environment:**\n- Full test suite: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/test-full.sh`\n- Security scan: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/security-scan.sh`\n- Performance audit: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/perf-check.sh`\n- Compliance check: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/compliance.sh`\n\n**For non-production environments:**\n- Basic tests: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/test-basic.sh`\n- Quick lint: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/lint.sh`\n\nAnalyze results based on environment requirements:\n\n**Production:** All checks must pass with zero critical issues\n**Staging:** No critical issues, warnings acceptable\n**Development:** Focus on blocking issues only\n\nReport status and recommend proceed/block decision.\n```\n\n**Key features:**\n- Environment-aware logic\n- Conditional execution\n- Different validation levels\n- Appropriate reporting per environment\n\n---\n\n## Common Patterns Summary\n\n### Pattern: Plugin Script Execution\n```markdown\n!`node ${CLAUDE_PLUGIN_ROOT}/scripts/script-name.js $1`\n```\nUse for: Running plugin-provided Node.js scripts\n\n### Pattern: Plugin Configuration Loading\n```markdown\n@${CLAUDE_PLUGIN_ROOT}/config/config-name.json\n```\nUse for: Loading plugin configuration files\n\n### Pattern: Plugin Template Usage\n```markdown\n@${CLAUDE_PLUGIN_ROOT}/templates/template-name.md\n```\nUse for: Using plugin templates for generation\n\n### Pattern: Agent Invocation\n```markdown\nLaunch the [agent-name] agent for [task description].\n```\nUse for: Delegating complex tasks to plugin agents\n\n### Pattern: Skill Reference\n```markdown\nUse the [skill-name] skill to ensure [requirements].\n```\nUse for: Leveraging plugin skills for specialized knowledge\n\n### Pattern: Input Validation\n```markdown\nValidate input: !`echo \"$1\" | grep -E \"^pattern$\" && echo \"OK\" || echo \"ERROR\"`\n```\nUse for: Validating command arguments\n\n### Pattern: Resource Validation\n```markdown\nCheck exists: !`test -f ${CLAUDE_PLUGIN_ROOT}/path/file && echo \"YES\" || echo \"NO\"`\n```\nUse for: Verifying required plugin files exist\n\n---\n\n## Development Tips\n\n### Testing Plugin Commands\n\n1. **Test with plugin installed:**\n   ```bash\n   cd /path/to/plugin\n   claude /command-name args\n   ```\n\n2. **Verify ${CLAUDE_PLUGIN_ROOT} expansion:**\n   ```bash\n   # Add debug output to command\n   !`echo \"Plugin root: ${CLAUDE_PLUGIN_ROOT}\"`\n   ```\n\n3. **Test across different working directories:**\n   ```bash\n   cd /tmp && claude /command-name\n   cd /other/project && claude /command-name\n   ```\n\n4. **Validate resource availability:**\n   ```bash\n   # Check all plugin resources exist\n   !`ls -la ${CLAUDE_PLUGIN_ROOT}/scripts/`\n   !`ls -la ${CLAUDE_PLUGIN_ROOT}/config/`\n   ```\n\n### Common Mistakes to Avoid\n\n1. **Using relative paths instead of ${CLAUDE_PLUGIN_ROOT}:**\n   ```markdown\n   # Wrong\n   !`node ./scripts/analyze.js`\n\n   # Correct\n   !`node ${CLAUDE_PLUGIN_ROOT}/scripts/analyze.js`\n   ```\n\n2. **Forgetting to allow required tools:**\n   ```markdown\n   # Missing allowed-tools\n   !`bash script.sh`  # Will fail without Bash permission\n\n   # Correct\n   ---\n   allowed-tools: Bash(*)\n   ---\n   !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/script.sh`\n   ```\n\n3. **Not validating inputs:**\n   ```markdown\n   # Risky - no validation\n   Deploy to $1 environment\n\n   # Better - with validation\n   Validate: !`echo \"$1\" | grep -E \"^(dev|staging|prod)$\" || echo \"INVALID\"`\n   Deploy to $1 environment (if valid)\n   ```\n\n4. **Hardcoding plugin paths:**\n   ```markdown\n   # Wrong - breaks on different installations\n   @/home/user/.claude/plugins/my-plugin/config.json\n\n   # Correct - works everywhere\n   @${CLAUDE_PLUGIN_ROOT}/config.json\n   ```\n\n---\n\nFor detailed plugin-specific features, see `references/plugin-features-reference.md`.\nFor general command development, see main `SKILL.md`.\n",
        "plugins/plugin-dev/skills/command-development/examples/simple-commands.md": "# Simple Command Examples\n\nBasic slash command patterns for common use cases.\n\n**Important:** All examples below are written as instructions FOR Claude (agent consumption), not messages TO users. Commands tell Claude what to do, not tell users what will happen.\n\n## Example 1: Code Review Command\n\n**File:** `.claude/commands/review.md`\n\n```markdown\n---\ndescription: Review code for quality and issues\nallowed-tools: Read, Bash(git:*)\n---\n\nReview the code in this repository for:\n\n1. **Code Quality:**\n   - Readability and maintainability\n   - Consistent style and formatting\n   - Appropriate abstraction levels\n\n2. **Potential Issues:**\n   - Logic errors or bugs\n   - Edge cases not handled\n   - Performance concerns\n\n3. **Best Practices:**\n   - Design patterns used correctly\n   - Error handling present\n   - Documentation adequate\n\nProvide specific feedback with file and line references.\n```\n\n**Usage:**\n```\n> /review\n```\n\n---\n\n## Example 2: Security Review Command\n\n**File:** `.claude/commands/security-review.md`\n\n```markdown\n---\ndescription: Review code for security vulnerabilities\nallowed-tools: Read, Grep\nmodel: sonnet\n---\n\nPerform comprehensive security review checking for:\n\n**Common Vulnerabilities:**\n- SQL injection risks\n- Cross-site scripting (XSS)\n- Authentication/authorization issues\n- Insecure data handling\n- Hardcoded secrets or credentials\n\n**Security Best Practices:**\n- Input validation present\n- Output encoding correct\n- Secure defaults used\n- Error messages safe\n- Logging appropriate (no sensitive data)\n\nFor each issue found:\n- File and line number\n- Severity (Critical/High/Medium/Low)\n- Description of vulnerability\n- Recommended fix\n\nPrioritize issues by severity.\n```\n\n**Usage:**\n```\n> /security-review\n```\n\n---\n\n## Example 3: Test Command with File Argument\n\n**File:** `.claude/commands/test-file.md`\n\n```markdown\n---\ndescription: Run tests for specific file\nargument-hint: [test-file]\nallowed-tools: Bash(npm:*), Bash(jest:*)\n---\n\nRun tests for $1:\n\nTest execution: !`npm test $1`\n\nAnalyze results:\n- Tests passed/failed\n- Code coverage\n- Performance issues\n- Flaky tests\n\nIf failures found, suggest fixes based on error messages.\n```\n\n**Usage:**\n```\n> /test-file src/utils/helpers.test.ts\n```\n\n---\n\n## Example 4: Documentation Generator\n\n**File:** `.claude/commands/document.md`\n\n```markdown\n---\ndescription: Generate documentation for file\nargument-hint: [source-file]\n---\n\nGenerate comprehensive documentation for @$1\n\nInclude:\n\n**Overview:**\n- Purpose and responsibility\n- Main functionality\n- Dependencies\n\n**API Documentation:**\n- Function/method signatures\n- Parameter descriptions with types\n- Return values with types\n- Exceptions/errors thrown\n\n**Usage Examples:**\n- Basic usage\n- Common patterns\n- Edge cases\n\n**Implementation Notes:**\n- Algorithm complexity\n- Performance considerations\n- Known limitations\n\nFormat as Markdown suitable for project documentation.\n```\n\n**Usage:**\n```\n> /document src/api/users.ts\n```\n\n---\n\n## Example 5: Git Status Summary\n\n**File:** `.claude/commands/git-status.md`\n\n```markdown\n---\ndescription: Summarize Git repository status\nallowed-tools: Bash(git:*)\n---\n\nRepository Status Summary:\n\n**Current Branch:** !`git branch --show-current`\n\n**Status:** !`git status --short`\n\n**Recent Commits:** !`git log --oneline -5`\n\n**Remote Status:** !`git fetch && git status -sb`\n\nProvide:\n- Summary of changes\n- Suggested next actions\n- Any warnings or issues\n```\n\n**Usage:**\n```\n> /git-status\n```\n\n---\n\n## Example 6: Deployment Command\n\n**File:** `.claude/commands/deploy.md`\n\n```markdown\n---\ndescription: Deploy to specified environment\nargument-hint: [environment] [version]\nallowed-tools: Bash(kubectl:*), Read\n---\n\nDeploy to $1 environment using version $2\n\n**Pre-deployment Checks:**\n1. Verify $1 configuration exists\n2. Check version $2 is valid\n3. Verify cluster accessibility: !`kubectl cluster-info`\n\n**Deployment Steps:**\n1. Update deployment manifest with version $2\n2. Apply configuration to $1\n3. Monitor rollout status\n4. Verify pod health\n5. Run smoke tests\n\n**Rollback Plan:**\nDocument current version for rollback if issues occur.\n\nProceed with deployment? (yes/no)\n```\n\n**Usage:**\n```\n> /deploy staging v1.2.3\n```\n\n---\n\n## Example 7: Comparison Command\n\n**File:** `.claude/commands/compare-files.md`\n\n```markdown\n---\ndescription: Compare two files\nargument-hint: [file1] [file2]\n---\n\nCompare @$1 with @$2\n\n**Analysis:**\n\n1. **Differences:**\n   - Lines added\n   - Lines removed\n   - Lines modified\n\n2. **Functional Changes:**\n   - Breaking changes\n   - New features\n   - Bug fixes\n   - Refactoring\n\n3. **Impact:**\n   - Affected components\n   - Required updates elsewhere\n   - Migration requirements\n\n4. **Recommendations:**\n   - Code review focus areas\n   - Testing requirements\n   - Documentation updates needed\n\nPresent as structured comparison report.\n```\n\n**Usage:**\n```\n> /compare-files src/old-api.ts src/new-api.ts\n```\n\n---\n\n## Example 8: Quick Fix Command\n\n**File:** `.claude/commands/quick-fix.md`\n\n```markdown\n---\ndescription: Quick fix for common issues\nargument-hint: [issue-description]\nmodel: haiku\n---\n\nQuickly fix: $ARGUMENTS\n\n**Approach:**\n1. Identify the issue\n2. Find relevant code\n3. Propose fix\n4. Explain solution\n\nFocus on:\n- Simple, direct solution\n- Minimal changes\n- Following existing patterns\n- No breaking changes\n\nProvide code changes with file paths and line numbers.\n```\n\n**Usage:**\n```\n> /quick-fix button not responding to clicks\n> /quick-fix typo in error message\n```\n\n---\n\n## Example 9: Research Command\n\n**File:** `.claude/commands/research.md`\n\n```markdown\n---\ndescription: Research best practices for topic\nargument-hint: [topic]\nmodel: sonnet\n---\n\nResearch best practices for: $ARGUMENTS\n\n**Coverage:**\n\n1. **Current State:**\n   - How we currently handle this\n   - Existing implementations\n\n2. **Industry Standards:**\n   - Common patterns\n   - Recommended approaches\n   - Tools and libraries\n\n3. **Comparison:**\n   - Our approach vs standards\n   - Gaps or improvements needed\n   - Migration considerations\n\n4. **Recommendations:**\n   - Concrete action items\n   - Priority and effort estimates\n   - Resources for implementation\n\nProvide actionable guidance based on research.\n```\n\n**Usage:**\n```\n> /research error handling in async operations\n> /research API authentication patterns\n```\n\n---\n\n## Example 10: Explain Code Command\n\n**File:** `.claude/commands/explain.md`\n\n```markdown\n---\ndescription: Explain how code works\nargument-hint: [file-or-function]\n---\n\nExplain @$1 in detail\n\n**Explanation Structure:**\n\n1. **Overview:**\n   - What it does\n   - Why it exists\n   - How it fits in system\n\n2. **Step-by-Step:**\n   - Line-by-line walkthrough\n   - Key algorithms or logic\n   - Important details\n\n3. **Inputs and Outputs:**\n   - Parameters and types\n   - Return values\n   - Side effects\n\n4. **Edge Cases:**\n   - Error handling\n   - Special cases\n   - Limitations\n\n5. **Usage Examples:**\n   - How to call it\n   - Common patterns\n   - Integration points\n\nExplain at level appropriate for junior engineer.\n```\n\n**Usage:**\n```\n> /explain src/utils/cache.ts\n> /explain AuthService.login\n```\n\n---\n\n## Key Patterns\n\n### Pattern 1: Read-Only Analysis\n\n```markdown\n---\nallowed-tools: Read, Grep\n---\n\nAnalyze but don't modify...\n```\n\n**Use for:** Code review, documentation, analysis\n\n### Pattern 2: Git Operations\n\n```markdown\n---\nallowed-tools: Bash(git:*)\n---\n\n!`git status`\nAnalyze and suggest...\n```\n\n**Use for:** Repository status, commit analysis\n\n### Pattern 3: Single Argument\n\n```markdown\n---\nargument-hint: [target]\n---\n\nProcess $1...\n```\n\n**Use for:** File operations, targeted actions\n\n### Pattern 4: Multiple Arguments\n\n```markdown\n---\nargument-hint: [source] [target] [options]\n---\n\nProcess $1 to $2 with $3...\n```\n\n**Use for:** Workflows, deployments, comparisons\n\n### Pattern 5: Fast Execution\n\n```markdown\n---\nmodel: haiku\n---\n\nQuick simple task...\n```\n\n**Use for:** Simple, repetitive commands\n\n### Pattern 6: File Comparison\n\n```markdown\nCompare @$1 with @$2...\n```\n\n**Use for:** Diff analysis, migration planning\n\n### Pattern 7: Context Gathering\n\n```markdown\n---\nallowed-tools: Bash(git:*), Read\n---\n\nContext: !`git status`\nFiles: @file1 @file2\n\nAnalyze...\n```\n\n**Use for:** Informed decision making\n\n## Tips for Writing Simple Commands\n\n1. **Start basic:** Single responsibility, clear purpose\n2. **Add complexity gradually:** Start without frontmatter\n3. **Test incrementally:** Verify each feature works\n4. **Use descriptive names:** Command name should indicate purpose\n5. **Document arguments:** Always use argument-hint\n6. **Provide examples:** Show usage in comments\n7. **Handle errors:** Consider missing arguments or files\n",
        "plugins/plugin-dev/skills/command-development/references/advanced-workflows.md": "# Advanced Workflow Patterns\n\nMulti-step command sequences and composition patterns for complex workflows.\n\n## Overview\n\nAdvanced workflows combine multiple commands, coordinate state across invocations, and create sophisticated automation sequences. These patterns enable building complex functionality from simple command building blocks.\n\n## Multi-Step Command Patterns\n\n### Sequential Workflow Command\n\nCommands that guide users through multi-step processes:\n\n```markdown\n---\ndescription: Complete PR review workflow\nargument-hint: [pr-number]\nallowed-tools: Bash(gh:*), Read, Grep\n---\n\n# PR Review Workflow for #$1\n\n## Step 1: Fetch PR Details\n!`gh pr view $1 --json title,body,author,files`\n\n## Step 2: Review Files\nFiles changed: !`gh pr diff $1 --name-only`\n\nFor each file:\n- Check code quality\n- Verify tests exist\n- Review documentation\n\n## Step 3: Run Checks\nTest status: !`gh pr checks $1`\n\nVerify:\n- All tests passing\n- No merge conflicts\n- CI/CD successful\n\n## Step 4: Provide Feedback\n\nSummarize:\n- Issues found (critical/minor)\n- Suggestions for improvement\n- Approval recommendation\n\nWould you like to:\n1. Approve PR\n2. Request changes\n3. Leave comments only\n\nReply with your choice and I'll help complete the action.\n```\n\n**Key features:**\n- Numbered steps for clarity\n- Bash execution for context\n- Decision points for user input\n- Next action suggestions\n\n### State-Carrying Workflow\n\nCommands that maintain state between invocations:\n\n```markdown\n---\ndescription: Initialize deployment workflow\nallowed-tools: Write, Bash(git:*)\n---\n\n# Initialize Deployment\n\nCreating deployment tracking file...\n\nCurrent branch: !`git branch --show-current`\nLatest commit: !`git log -1 --format=%H`\n\nDeployment state saved to `.claude/deployment-state.local.md`:\n\n\\`\\`\\`markdown\n---\ninitialized: true\nbranch: $(git branch --show-current)\ncommit: $(git log -1 --format=%H)\ntimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nstatus: initialized\n---\n\n# Deployment Tracking\n\nBranch: $(git branch --show-current)\nStarted: $(date)\n\nNext steps:\n1. Run tests: /deploy-test\n2. Build: /deploy-build\n3. Deploy: /deploy-execute\n\\`\\`\\`\n\nState saved. Run `/deploy-test` to continue.\n```\n\n**Next command** (`/deploy-test`):\n```markdown\n---\ndescription: Run deployment tests\nallowed-tools: Read, Bash(npm:*)\n---\n\nReading deployment state from `.claude/deployment-state.local.md`...\n\nRunning tests: !`npm test`\n\nUpdating state to 'tested'...\n\nTests complete. Run `/deploy-build` to continue.\n```\n\n**Pattern benefits:**\n- Persistent state across commands\n- Clear workflow progression\n- Safety checkpoints\n- Resume capability\n\n### Conditional Workflow Branching\n\nCommands that adapt based on conditions:\n\n```markdown\n---\ndescription: Smart deployment workflow\nargument-hint: [environment]\nallowed-tools: Bash(git:*), Bash(npm:*), Read\n---\n\n# Deploy to $1\n\n## Pre-flight Checks\n\nBranch: !`git branch --show-current`\nStatus: !`git status --short`\n\n**Checking conditions:**\n\n1. Branch status:\n   - If main/master: Require approval\n   - If feature branch: Warning about target\n   - If hotfix: Fast-track process\n\n2. Tests:\n   !`npm test`\n   - If tests fail: STOP - fix tests first\n   - If tests pass: Continue\n\n3. Environment:\n   - If $1 = 'production': Extra validation\n   - If $1 = 'staging': Standard process\n   - If $1 = 'dev': Minimal checks\n\n**Workflow decision:**\nBased on above, proceeding with: [determined workflow]\n\n[Conditional steps based on environment and status]\n\nReady to deploy? (yes/no)\n```\n\n## Command Composition Patterns\n\n### Command Chaining\n\nCommands designed to work together:\n\n```markdown\n---\ndescription: Prepare for code review\n---\n\n# Prepare Code Review\n\nRunning preparation sequence:\n\n1. Format code: /format-code\n2. Run linter: /lint-code\n3. Run tests: /test-all\n4. Generate coverage: /coverage-report\n5. Create review summary: /review-summary\n\nThis is a meta-command. After completing each step above,\nI'll compile results and prepare comprehensive review materials.\n\nStarting sequence...\n```\n\n**Individual commands** are simple:\n- `/format-code` - Just formats\n- `/lint-code` - Just lints\n- `/test-all` - Just tests\n\n**Composition command** orchestrates them.\n\n### Pipeline Pattern\n\nCommands that process output from previous commands:\n\n```markdown\n---\ndescription: Analyze test failures\n---\n\n# Analyze Test Failures\n\n## Step 1: Get test results\n(Run /test-all first if not done)\n\nReading test output...\n\n## Step 2: Categorize failures\n- Flaky tests (random failures)\n- Consistent failures\n- New failures vs existing\n\n## Step 3: Prioritize\nRank by:\n- Impact (critical path vs edge case)\n- Frequency (always fails vs sometimes)\n- Effort (quick fix vs major work)\n\n## Step 4: Generate fix plan\nFor each failure:\n- Root cause hypothesis\n- Suggested fix approach\n- Estimated effort\n\nWould you like me to:\n1. Fix highest priority failure\n2. Generate detailed fix plans for all\n3. Create GitHub issues for each\n```\n\n### Parallel Execution Pattern\n\nCommands that coordinate multiple simultaneous operations:\n\n```markdown\n---\ndescription: Run comprehensive validation\nallowed-tools: Bash(*), Read\n---\n\n# Comprehensive Validation\n\nRunning validations in parallel...\n\nStarting:\n- Code quality checks\n- Security scanning\n- Dependency audit\n- Performance profiling\n\nThis will take 2-3 minutes. I'll monitor all processes\nand report when complete.\n\n[Poll each process and report progress]\n\nAll validations complete. Summary:\n- Quality: PASS (0 issues)\n- Security: WARN (2 minor issues)\n- Dependencies: PASS\n- Performance: PASS (baseline met)\n\nDetails:\n[Collated results from all checks]\n```\n\n## Workflow State Management\n\n### Using .local.md Files\n\nStore workflow state in plugin-specific files:\n\n```markdown\n.claude/plugin-name-workflow.local.md:\n\n---\nworkflow: deployment\nstage: testing\nstarted: 2025-01-15T10:30:00Z\nenvironment: staging\nbranch: feature/new-api\ncommit: abc123def\ntests_passed: false\nbuild_complete: false\n---\n\n# Deployment Workflow State\n\nCurrent stage: Testing\nStarted: 2025-01-15 10:30 UTC\n\nCompleted steps:\n- ✅ Validation\n- ✅ Branch check\n- ⏳ Testing (in progress)\n\nPending steps:\n- Build\n- Deploy\n- Smoke tests\n```\n\n**Reading state in commands:**\n\n```markdown\n---\ndescription: Continue deployment workflow\nallowed-tools: Read, Write\n---\n\nReading workflow state from .claude/plugin-name-workflow.local.md...\n\nCurrent stage: @.claude/plugin-name-workflow.local.md\n\n[Parse YAML frontmatter to determine next step]\n\nNext action based on state: [determined action]\n```\n\n### Workflow Recovery\n\nHandle interrupted workflows:\n\n```markdown\n---\ndescription: Resume deployment workflow\nallowed-tools: Read\n---\n\n# Resume Deployment\n\nChecking for interrupted workflow...\n\nState file: @.claude/plugin-name-workflow.local.md\n\n**Workflow found:**\n- Started: [timestamp]\n- Environment: [env]\n- Last completed: [step]\n\n**Recovery options:**\n1. Resume from last step\n2. Restart from beginning\n3. Abort and clean up\n\nWhich would you like? (1/2/3)\n```\n\n## Workflow Coordination Patterns\n\n### Cross-Command Communication\n\nCommands that signal each other:\n\n```markdown\n---\ndescription: Mark feature complete\nallowed-tools: Write\n---\n\n# Mark Feature Complete\n\nWriting completion marker...\n\nCreating: .claude/feature-complete.flag\n\nThis signals other commands that feature is ready for:\n- Integration testing (/integration-test will auto-detect)\n- Documentation generation (/docs-generate will include)\n- Release notes (/release-notes will add)\n\nFeature marked complete.\n```\n\n**Other commands check for flag:**\n\n```markdown\n---\ndescription: Generate release notes\nallowed-tools: Read, Bash(git:*)\n---\n\nChecking for completed features...\n\nif [ -f .claude/feature-complete.flag ]; then\n  Feature ready for release notes\nfi\n\n[Include in release notes]\n```\n\n### Workflow Locking\n\nPrevent concurrent workflow execution:\n\n```markdown\n---\ndescription: Start deployment\nallowed-tools: Read, Write, Bash\n---\n\n# Start Deployment\n\nChecking for active deployments...\n\nif [ -f .claude/deployment.lock ]; then\n  ERROR: Deployment already in progress\n  Started: [timestamp from lock file]\n\n  Cannot start concurrent deployment.\n  Wait for completion or run /deployment-abort\n\n  Exit.\nfi\n\nCreating deployment lock...\n\nDeployment started. Lock created.\n[Proceed with deployment]\n```\n\n**Lock cleanup:**\n\n```markdown\n---\ndescription: Complete deployment\nallowed-tools: Write, Bash\n---\n\nDeployment complete.\n\nRemoving deployment lock...\nrm .claude/deployment.lock\n\nReady for next deployment.\n```\n\n## Advanced Argument Handling\n\n### Optional Arguments with Defaults\n\n```markdown\n---\ndescription: Deploy with optional version\nargument-hint: [environment] [version]\n---\n\nEnvironment: ${1:-staging}\nVersion: ${2:-latest}\n\nDeploying ${2:-latest} to ${1:-staging}...\n\nNote: Using defaults for missing arguments:\n- Environment defaults to 'staging'\n- Version defaults to 'latest'\n```\n\n### Argument Validation\n\n```markdown\n---\ndescription: Deploy to validated environment\nargument-hint: [environment]\n---\n\nEnvironment: $1\n\nValidating environment...\n\nvalid_envs=\"dev staging production\"\nif ! echo \"$valid_envs\" | grep -w \"$1\" > /dev/null; then\n  ERROR: Invalid environment '$1'\n  Valid options: dev, staging, production\n  Exit.\nfi\n\nEnvironment validated. Proceeding...\n```\n\n### Argument Transformation\n\n```markdown\n---\ndescription: Deploy with shorthand\nargument-hint: [env-shorthand]\n---\n\nInput: $1\n\nExpanding shorthand:\n- d/dev → development\n- s/stg → staging\n- p/prod → production\n\ncase \"$1\" in\n  d|dev) ENV=\"development\";;\n  s|stg) ENV=\"staging\";;\n  p|prod) ENV=\"production\";;\n  *) ENV=\"$1\";;\nesac\n\nDeploying to: $ENV\n```\n\n## Error Handling in Workflows\n\n### Graceful Failure\n\n```markdown\n---\ndescription: Resilient deployment workflow\n---\n\n# Deployment Workflow\n\nRunning steps with error handling...\n\n## Step 1: Tests\n!`npm test`\n\nif [ $? -ne 0 ]; then\n  ERROR: Tests failed\n\n  Options:\n  1. Fix tests and retry\n  2. Skip tests (NOT recommended)\n  3. Abort deployment\n\n  What would you like to do?\n\n  [Wait for user input before continuing]\nfi\n\n## Step 2: Build\n[Continue only if Step 1 succeeded]\n```\n\n### Rollback on Failure\n\n```markdown\n---\ndescription: Deployment with rollback\n---\n\n# Deploy with Rollback\n\nSaving current state for rollback...\nPrevious version: !`current-version.sh`\n\nDeploying new version...\n\n!`deploy.sh`\n\nif [ $? -ne 0 ]; then\n  DEPLOYMENT FAILED\n\n  Initiating automatic rollback...\n  !`rollback.sh`\n\n  Rolled back to previous version.\n  Check logs for failure details.\nfi\n\nDeployment complete.\n```\n\n### Checkpoint Recovery\n\n```markdown\n---\ndescription: Workflow with checkpoints\n---\n\n# Multi-Stage Deployment\n\n## Checkpoint 1: Validation\n!`validate.sh`\necho \"checkpoint:validation\" >> .claude/deployment-checkpoints.log\n\n## Checkpoint 2: Build\n!`build.sh`\necho \"checkpoint:build\" >> .claude/deployment-checkpoints.log\n\n## Checkpoint 3: Deploy\n!`deploy.sh`\necho \"checkpoint:deploy\" >> .claude/deployment-checkpoints.log\n\nIf any step fails, resume with:\n/deployment-resume [last-successful-checkpoint]\n```\n\n## Best Practices\n\n### Workflow Design\n\n1. **Clear progression**: Number steps, show current position\n2. **Explicit state**: Don't rely on implicit state\n3. **User control**: Provide decision points\n4. **Error recovery**: Handle failures gracefully\n5. **Progress indication**: Show what's done, what's pending\n\n### Command Composition\n\n1. **Single responsibility**: Each command does one thing well\n2. **Composable design**: Commands work together easily\n3. **Standard interfaces**: Consistent input/output formats\n4. **Loose coupling**: Commands don't depend on each other's internals\n\n### State Management\n\n1. **Persistent state**: Use .local.md files\n2. **Atomic updates**: Write complete state files atomically\n3. **State validation**: Check state file format/completeness\n4. **Cleanup**: Remove stale state files\n5. **Documentation**: Document state file formats\n\n### Error Handling\n\n1. **Fail fast**: Detect errors early\n2. **Clear messages**: Explain what went wrong\n3. **Recovery options**: Provide clear next steps\n4. **State preservation**: Keep state for recovery\n5. **Rollback capability**: Support undoing changes\n\n## Example: Complete Deployment Workflow\n\n### Initialize Command\n\n```markdown\n---\ndescription: Initialize deployment\nargument-hint: [environment]\nallowed-tools: Write, Bash(git:*)\n---\n\n# Initialize Deployment to $1\n\nCreating workflow state...\n\n\\`\\`\\`yaml\n---\nworkflow: deployment\nenvironment: $1\nbranch: !`git branch --show-current`\ncommit: !`git rev-parse HEAD`\nstage: initialized\ntimestamp: !`date -u +%Y-%m-%dT%H:%M:%SZ`\n---\n\\`\\`\\`\n\nWritten to .claude/deployment-state.local.md\n\nNext: Run /deployment-validate\n```\n\n### Validation Command\n\n```markdown\n---\ndescription: Validate deployment\nallowed-tools: Read, Bash\n---\n\nReading state: @.claude/deployment-state.local.md\n\nRunning validation...\n- Branch check: PASS\n- Tests: PASS\n- Build: PASS\n\nUpdating state to 'validated'...\n\nNext: Run /deployment-execute\n```\n\n### Execution Command\n\n```markdown\n---\ndescription: Execute deployment\nallowed-tools: Read, Bash, Write\n---\n\nReading state: @.claude/deployment-state.local.md\n\nExecuting deployment to [environment]...\n\n!`deploy.sh [environment]`\n\nDeployment complete.\nUpdating state to 'completed'...\n\nCleanup: /deployment-cleanup\n```\n\n### Cleanup Command\n\n```markdown\n---\ndescription: Clean up deployment\nallowed-tools: Bash\n---\n\nRemoving deployment state...\nrm .claude/deployment-state.local.md\n\nDeployment workflow complete.\n```\n\nThis complete workflow demonstrates state management, sequential execution, error handling, and clean separation of concerns across multiple commands.\n",
        "plugins/plugin-dev/skills/command-development/references/documentation-patterns.md": "# Command Documentation Patterns\n\nStrategies for creating self-documenting, maintainable commands with excellent user experience.\n\n## Overview\n\nWell-documented commands are easier to use, maintain, and distribute. Documentation should be embedded in the command itself, making it immediately accessible to users and maintainers.\n\n## Self-Documenting Command Structure\n\n### Complete Command Template\n\n```markdown\n---\ndescription: Clear, actionable description under 60 chars\nargument-hint: [arg1] [arg2] [optional-arg]\nallowed-tools: Read, Bash(git:*)\nmodel: sonnet\n---\n\n<!--\nCOMMAND: command-name\nVERSION: 1.0.0\nAUTHOR: Team Name\nLAST UPDATED: 2025-01-15\n\nPURPOSE:\nDetailed explanation of what this command does and why it exists.\n\nUSAGE:\n  /command-name arg1 arg2\n\nARGUMENTS:\n  arg1: Description of first argument (required)\n  arg2: Description of second argument (optional, defaults to X)\n\nEXAMPLES:\n  /command-name feature-branch main\n    → Compares feature-branch with main\n\n  /command-name my-branch\n    → Compares my-branch with current branch\n\nREQUIREMENTS:\n  - Git repository\n  - Branch must exist\n  - Permissions to read repository\n\nRELATED COMMANDS:\n  /other-command - Related functionality\n  /another-command - Alternative approach\n\nTROUBLESHOOTING:\n  - If branch not found: Check branch name spelling\n  - If permission denied: Check repository access\n\nCHANGELOG:\n  v1.0.0 (2025-01-15): Initial release\n  v0.9.0 (2025-01-10): Beta version\n-->\n\n# Command Implementation\n\n[Command prompt content here...]\n\n[Explain what will happen...]\n\n[Guide user through steps...]\n\n[Provide clear output...]\n```\n\n### Documentation Comment Sections\n\n**PURPOSE**: Why the command exists\n- Problem it solves\n- Use cases\n- When to use vs when not to use\n\n**USAGE**: Basic syntax\n- Command invocation pattern\n- Required vs optional arguments\n- Default values\n\n**ARGUMENTS**: Detailed argument documentation\n- Each argument described\n- Type information\n- Valid values/ranges\n- Defaults\n\n**EXAMPLES**: Concrete usage examples\n- Common use cases\n- Edge cases\n- Expected outputs\n\n**REQUIREMENTS**: Prerequisites\n- Dependencies\n- Permissions\n- Environmental setup\n\n**RELATED COMMANDS**: Connections\n- Similar commands\n- Complementary commands\n- Alternative approaches\n\n**TROUBLESHOOTING**: Common issues\n- Known problems\n- Solutions\n- Workarounds\n\n**CHANGELOG**: Version history\n- What changed when\n- Breaking changes highlighted\n- Migration guidance\n\n## In-Line Documentation Patterns\n\n### Commented Sections\n\n```markdown\n---\ndescription: Complex multi-step command\n---\n\n<!-- SECTION 1: VALIDATION -->\n<!-- This section checks prerequisites before proceeding -->\n\nChecking prerequisites...\n- Git repository: !`git rev-parse --git-dir 2>/dev/null`\n- Branch exists: [validation logic]\n\n<!-- SECTION 2: ANALYSIS -->\n<!-- Analyzes the differences between branches -->\n\nAnalyzing differences between $1 and $2...\n[Analysis logic...]\n\n<!-- SECTION 3: RECOMMENDATIONS -->\n<!-- Provides actionable recommendations -->\n\nBased on analysis, recommend:\n[Recommendations...]\n\n<!-- END: Next steps for user -->\n```\n\n### Inline Explanations\n\n```markdown\n---\ndescription: Deployment command with inline docs\n---\n\n# Deploy to $1\n\n## Pre-flight Checks\n\n<!-- We check branch status to prevent deploying from wrong branch -->\nCurrent branch: !`git branch --show-current`\n\n<!-- Production deploys must come from main/master -->\nif [ \"$1\" = \"production\" ] && [ \"$(git branch --show-current)\" != \"main\" ]; then\n  ⚠️  WARNING: Not on main branch for production deploy\n  This is unusual. Confirm this is intentional.\nfi\n\n<!-- Test status ensures we don't deploy broken code -->\nRunning tests: !`npm test`\n\n✓ All checks passed\n\n## Deployment\n\n<!-- Actual deployment happens here -->\n<!-- Uses blue-green strategy for zero-downtime -->\nDeploying to $1 environment...\n[Deployment steps...]\n\n<!-- Post-deployment verification -->\nVerifying deployment health...\n[Health checks...]\n\nDeployment complete!\n\n## Next Steps\n\n<!-- Guide user on what to do after deployment -->\n1. Monitor logs: /logs $1\n2. Run smoke tests: /smoke-test $1\n3. Notify team: /notify-deployment $1\n```\n\n### Decision Point Documentation\n\n```markdown\n---\ndescription: Interactive deployment command\n---\n\n# Interactive Deployment\n\n## Configuration Review\n\nTarget: $1\nCurrent version: !`cat version.txt`\nNew version: $2\n\n<!-- DECISION POINT: User confirms configuration -->\n<!-- This pause allows user to verify everything is correct -->\n<!-- We can't automatically proceed because deployment is risky -->\n\nReview the above configuration.\n\n**Continue with deployment?**\n- Reply \"yes\" to proceed\n- Reply \"no\" to cancel\n- Reply \"edit\" to modify configuration\n\n[Await user input before continuing...]\n\n<!-- After user confirms, we proceed with deployment -->\n<!-- All subsequent steps are automated -->\n\nProceeding with deployment...\n```\n\n## Help Text Patterns\n\n### Built-in Help Command\n\nCreate a help subcommand for complex commands:\n\n```markdown\n---\ndescription: Main command with help\nargument-hint: [subcommand] [args]\n---\n\n# Command Processor\n\nif [ \"$1\" = \"help\" ] || [ \"$1\" = \"--help\" ] || [ \"$1\" = \"-h\" ]; then\n  **Command Help**\n\n  USAGE:\n    /command [subcommand] [args]\n\n  SUBCOMMANDS:\n    init [name]       Initialize new configuration\n    deploy [env]      Deploy to environment\n    status            Show current status\n    rollback          Rollback last deployment\n    help              Show this help\n\n  EXAMPLES:\n    /command init my-project\n    /command deploy staging\n    /command status\n    /command rollback\n\n  For detailed help on a subcommand:\n    /command [subcommand] --help\n\n  Exit.\nfi\n\n[Regular command processing...]\n```\n\n### Contextual Help\n\nProvide help based on context:\n\n```markdown\n---\ndescription: Context-aware command\nargument-hint: [operation] [target]\n---\n\n# Context-Aware Operation\n\nif [ -z \"$1\" ]; then\n  **No operation specified**\n\n  Available operations:\n  - analyze: Analyze target for issues\n  - fix: Apply automatic fixes\n  - report: Generate detailed report\n\n  Usage: /command [operation] [target]\n\n  Examples:\n    /command analyze src/\n    /command fix src/app.js\n    /command report\n\n  Run /command help for more details.\n\n  Exit.\nfi\n\n[Command continues if operation provided...]\n```\n\n## Error Message Documentation\n\n### Helpful Error Messages\n\n```markdown\n---\ndescription: Command with good error messages\n---\n\n# Validation Command\n\nif [ -z \"$1\" ]; then\n  ❌ ERROR: Missing required argument\n\n  The 'file-path' argument is required.\n\n  USAGE:\n    /validate [file-path]\n\n  EXAMPLE:\n    /validate src/app.js\n\n  Try again with a file path.\n\n  Exit.\nfi\n\nif [ ! -f \"$1\" ]; then\n  ❌ ERROR: File not found: $1\n\n  The specified file does not exist or is not accessible.\n\n  COMMON CAUSES:\n  1. Typo in file path\n  2. File was deleted or moved\n  3. Insufficient permissions\n\n  SUGGESTIONS:\n  - Check spelling: $1\n  - Verify file exists: ls -la $(dirname \"$1\")\n  - Check permissions: ls -l \"$1\"\n\n  Exit.\nfi\n\n[Command continues if validation passes...]\n```\n\n### Error Recovery Guidance\n\n```markdown\n---\ndescription: Command with recovery guidance\n---\n\n# Operation Command\n\nRunning operation...\n\n!`risky-operation.sh`\n\nif [ $? -ne 0 ]; then\n  ❌ OPERATION FAILED\n\n  The operation encountered an error and could not complete.\n\n  WHAT HAPPENED:\n  The risky-operation.sh script returned a non-zero exit code.\n\n  WHAT THIS MEANS:\n  - Changes may be partially applied\n  - System may be in inconsistent state\n  - Manual intervention may be needed\n\n  RECOVERY STEPS:\n  1. Check operation logs: cat /tmp/operation.log\n  2. Verify system state: /check-state\n  3. If needed, rollback: /rollback-operation\n  4. Fix underlying issue\n  5. Retry operation: /retry-operation\n\n  NEED HELP?\n  - Check troubleshooting guide: /help troubleshooting\n  - Contact support with error code: ERR_OP_FAILED_001\n\n  Exit.\nfi\n```\n\n## Usage Example Documentation\n\n### Embedded Examples\n\n```markdown\n---\ndescription: Command with embedded examples\n---\n\n# Feature Command\n\nThis command performs feature analysis with multiple options.\n\n## Basic Usage\n\n\\`\\`\\`\n/feature analyze src/\n\\`\\`\\`\n\nAnalyzes all files in src/ directory for feature usage.\n\n## Advanced Usage\n\n\\`\\`\\`\n/feature analyze src/ --detailed\n\\`\\`\\`\n\nProvides detailed analysis including:\n- Feature breakdown by file\n- Usage patterns\n- Optimization suggestions\n\n## Use Cases\n\n**Use Case 1: Quick overview**\n\\`\\`\\`\n/feature analyze .\n\\`\\`\\`\nGet high-level feature summary of entire project.\n\n**Use Case 2: Specific directory**\n\\`\\`\\`\n/feature analyze src/components\n\\`\\`\\`\nFocus analysis on components directory only.\n\n**Use Case 3: Comparison**\n\\`\\`\\`\n/feature analyze src/ --compare baseline.json\n\\`\\`\\`\nCompare current features against baseline.\n\n---\n\nNow processing your request...\n\n[Command implementation...]\n```\n\n### Example-Driven Documentation\n\n```markdown\n---\ndescription: Example-heavy command\n---\n\n# Transformation Command\n\n## What This Does\n\nTransforms data from one format to another.\n\n## Examples First\n\n### Example 1: JSON to YAML\n**Input:** `data.json`\n\\`\\`\\`json\n{\"name\": \"test\", \"value\": 42}\n\\`\\`\\`\n\n**Command:** `/transform data.json yaml`\n\n**Output:** `data.yaml`\n\\`\\`\\`yaml\nname: test\nvalue: 42\n\\`\\`\\`\n\n### Example 2: CSV to JSON\n**Input:** `data.csv`\n\\`\\`\\`csv\nname,value\ntest,42\n\\`\\`\\`\n\n**Command:** `/transform data.csv json`\n\n**Output:** `data.json`\n\\`\\`\\`json\n[{\"name\": \"test\", \"value\": \"42\"}]\n\\`\\`\\`\n\n### Example 3: With Options\n**Command:** `/transform data.json yaml --pretty --sort-keys`\n\n**Result:** Formatted YAML with sorted keys\n\n---\n\n## Your Transformation\n\nFile: $1\nFormat: $2\n\n[Perform transformation...]\n```\n\n## Maintenance Documentation\n\n### Version and Changelog\n\n```markdown\n<!--\nVERSION: 2.1.0\nLAST UPDATED: 2025-01-15\nAUTHOR: DevOps Team\n\nCHANGELOG:\n  v2.1.0 (2025-01-15):\n    - Added support for YAML configuration\n    - Improved error messages\n    - Fixed bug with special characters in arguments\n\n  v2.0.0 (2025-01-01):\n    - BREAKING: Changed argument order\n    - BREAKING: Removed deprecated --old-flag\n    - Added new validation checks\n    - Migration guide: /migration-v2\n\n  v1.5.0 (2024-12-15):\n    - Added --verbose flag\n    - Improved performance by 50%\n\n  v1.0.0 (2024-12-01):\n    - Initial stable release\n\nMIGRATION NOTES:\n  From v1.x to v2.0:\n    Old: /command arg1 arg2 --old-flag\n    New: /command arg2 arg1\n\n  The --old-flag is removed. Use --new-flag instead.\n\nDEPRECATION WARNINGS:\n  - The --legacy-mode flag is deprecated as of v2.1.0\n  - Will be removed in v3.0.0 (estimated 2025-06-01)\n  - Use --modern-mode instead\n\nKNOWN ISSUES:\n  - #123: Slow performance with large files (workaround: use --stream flag)\n  - #456: Special characters in Windows (fix planned for v2.2.0)\n-->\n```\n\n### Maintenance Notes\n\n```markdown\n<!--\nMAINTENANCE NOTES:\n\nCODE STRUCTURE:\n  - Lines 1-50: Argument parsing and validation\n  - Lines 51-100: Main processing logic\n  - Lines 101-150: Output formatting\n  - Lines 151-200: Error handling\n\nDEPENDENCIES:\n  - Requires git 2.x or later\n  - Uses jq for JSON processing\n  - Needs bash 4.0+ for associative arrays\n\nPERFORMANCE:\n  - Fast path for small inputs (< 1MB)\n  - Streams large files to avoid memory issues\n  - Caches results in /tmp for 1 hour\n\nSECURITY CONSIDERATIONS:\n  - Validates all inputs to prevent injection\n  - Uses allowed-tools to limit Bash access\n  - No credentials in command file\n\nTESTING:\n  - Unit tests: tests/command-test.sh\n  - Integration tests: tests/integration/\n  - Manual test checklist: tests/manual-checklist.md\n\nFUTURE IMPROVEMENTS:\n  - TODO: Add support for TOML format\n  - TODO: Implement parallel processing\n  - TODO: Add progress bar for large files\n\nRELATED FILES:\n  - lib/parser.sh: Shared parsing logic\n  - lib/formatter.sh: Output formatting\n  - config/defaults.yml: Default configuration\n-->\n```\n\n## README Documentation\n\nCommands should have companion README files:\n\n```markdown\n# Command Name\n\nBrief description of what the command does.\n\n## Installation\n\nThis command is part of the [plugin-name] plugin.\n\nInstall with:\n\\`\\`\\`\n/plugin install plugin-name\n\\`\\`\\`\n\n## Usage\n\nBasic usage:\n\\`\\`\\`\n/command-name [arg1] [arg2]\n\\`\\`\\`\n\n## Arguments\n\n- `arg1`: Description (required)\n- `arg2`: Description (optional, defaults to X)\n\n## Examples\n\n### Example 1: Basic Usage\n\\`\\`\\`\n/command-name value1 value2\n\\`\\`\\`\n\nDescription of what happens.\n\n### Example 2: Advanced Usage\n\\`\\`\\`\n/command-name value1 --option\n\\`\\`\\`\n\nDescription of advanced feature.\n\n## Configuration\n\nOptional configuration file: `.claude/command-name.local.md`\n\n\\`\\`\\`markdown\n---\ndefault_arg: value\nenable_feature: true\n---\n\\`\\`\\`\n\n## Requirements\n\n- Git 2.x or later\n- jq (for JSON processing)\n- Node.js 14+ (optional, for advanced features)\n\n## Troubleshooting\n\n### Issue: Command not found\n\n**Solution:** Ensure plugin is installed and enabled.\n\n### Issue: Permission denied\n\n**Solution:** Check file permissions and allowed-tools setting.\n\n## Contributing\n\nContributions welcome! See [CONTRIBUTING.md](CONTRIBUTING.md).\n\n## License\n\nMIT License - See [LICENSE](LICENSE).\n\n## Support\n\n- Issues: https://github.com/user/plugin/issues\n- Docs: https://docs.example.com\n- Email: support@example.com\n```\n\n## Best Practices\n\n### Documentation Principles\n\n1. **Write for your future self**: Assume you'll forget details\n2. **Examples before explanations**: Show, then tell\n3. **Progressive disclosure**: Basic info first, details available\n4. **Keep it current**: Update docs when code changes\n5. **Test your docs**: Verify examples actually work\n\n### Documentation Locations\n\n1. **In command file**: Core usage, examples, inline explanations\n2. **README**: Installation, configuration, troubleshooting\n3. **Separate docs**: Detailed guides, tutorials, API reference\n4. **Comments**: Implementation details for maintainers\n\n### Documentation Style\n\n1. **Clear and concise**: No unnecessary words\n2. **Active voice**: \"Run the command\" not \"The command can be run\"\n3. **Consistent terminology**: Use same terms throughout\n4. **Formatted well**: Use headings, lists, code blocks\n5. **Accessible**: Assume reader is beginner\n\n### Documentation Maintenance\n\n1. **Version everything**: Track what changed when\n2. **Deprecate gracefully**: Warn before removing features\n3. **Migration guides**: Help users upgrade\n4. **Archive old docs**: Keep old versions accessible\n5. **Review regularly**: Ensure docs match reality\n\n## Documentation Checklist\n\nBefore releasing a command:\n\n- [ ] Description in frontmatter is clear\n- [ ] argument-hint documents all arguments\n- [ ] Usage examples in comments\n- [ ] Common use cases shown\n- [ ] Error messages are helpful\n- [ ] Requirements documented\n- [ ] Related commands listed\n- [ ] Changelog maintained\n- [ ] Version number updated\n- [ ] README created/updated\n- [ ] Examples actually work\n- [ ] Troubleshooting section complete\n\nWith good documentation, commands become self-service, reducing support burden and improving user experience.\n",
        "plugins/plugin-dev/skills/command-development/references/frontmatter-reference.md": "# Command Frontmatter Reference\n\nComplete reference for YAML frontmatter fields in slash commands.\n\n## Frontmatter Overview\n\nYAML frontmatter is optional metadata at the start of command files:\n\n```markdown\n---\ndescription: Brief description\nallowed-tools: Read, Write\nmodel: sonnet\nargument-hint: [arg1] [arg2]\n---\n\nCommand prompt content here...\n```\n\nAll fields are optional. Commands work without any frontmatter.\n\n## Field Specifications\n\n### description\n\n**Type:** String\n**Required:** No\n**Default:** First line of command prompt\n**Max Length:** ~60 characters recommended for `/help` display\n\n**Purpose:** Describes what the command does, shown in `/help` output\n\n**Examples:**\n```yaml\ndescription: Review code for security issues\n```\n```yaml\ndescription: Deploy to staging environment\n```\n```yaml\ndescription: Generate API documentation\n```\n\n**Best practices:**\n- Keep under 60 characters for clean display\n- Start with verb (Review, Deploy, Generate)\n- Be specific about what command does\n- Avoid redundant \"command\" or \"slash command\"\n\n**Good:**\n- ✅ \"Review PR for code quality and security\"\n- ✅ \"Deploy application to specified environment\"\n- ✅ \"Generate comprehensive API documentation\"\n\n**Bad:**\n- ❌ \"This command reviews PRs\" (unnecessary \"This command\")\n- ❌ \"Review\" (too vague)\n- ❌ \"A command that reviews pull requests for code quality, security issues, and best practices\" (too long)\n\n### allowed-tools\n\n**Type:** String or Array of strings\n**Required:** No\n**Default:** Inherits from conversation permissions\n\n**Purpose:** Restrict or specify which tools command can use\n\n**Formats:**\n\n**Single tool:**\n```yaml\nallowed-tools: Read\n```\n\n**Multiple tools (comma-separated):**\n```yaml\nallowed-tools: Read, Write, Edit\n```\n\n**Multiple tools (array):**\n```yaml\nallowed-tools:\n  - Read\n  - Write\n  - Bash(git:*)\n```\n\n**Tool Patterns:**\n\n**Specific tools:**\n```yaml\nallowed-tools: Read, Grep, Edit\n```\n\n**Bash with command filter:**\n```yaml\nallowed-tools: Bash(git:*)           # Only git commands\nallowed-tools: Bash(npm:*)           # Only npm commands\nallowed-tools: Bash(docker:*)        # Only docker commands\n```\n\n**All tools (not recommended):**\n```yaml\nallowed-tools: \"*\"\n```\n\n**When to use:**\n\n1. **Security:** Restrict command to safe operations\n   ```yaml\n   allowed-tools: Read, Grep  # Read-only command\n   ```\n\n2. **Clarity:** Document required tools\n   ```yaml\n   allowed-tools: Bash(git:*), Read\n   ```\n\n3. **Bash execution:** Enable bash command output\n   ```yaml\n   allowed-tools: Bash(git status:*), Bash(git diff:*)\n   ```\n\n**Best practices:**\n- Be as restrictive as possible\n- Use command filters for Bash (e.g., `git:*` not `*`)\n- Only specify when different from conversation permissions\n- Document why specific tools are needed\n\n### model\n\n**Type:** String\n**Required:** No\n**Default:** Inherits from conversation\n**Values:** `sonnet`, `opus`, `haiku`\n\n**Purpose:** Specify which Claude model executes the command\n\n**Examples:**\n```yaml\nmodel: haiku    # Fast, efficient for simple tasks\n```\n```yaml\nmodel: sonnet   # Balanced performance (default)\n```\n```yaml\nmodel: opus     # Maximum capability for complex tasks\n```\n\n**When to use:**\n\n**Use `haiku` for:**\n- Simple, formulaic commands\n- Fast execution needed\n- Low complexity tasks\n- Frequent invocations\n\n```yaml\n---\ndescription: Format code file\nmodel: haiku\n---\n```\n\n**Use `sonnet` for:**\n- Standard commands (default)\n- Balanced speed/quality\n- Most common use cases\n\n```yaml\n---\ndescription: Review code changes\nmodel: sonnet\n---\n```\n\n**Use `opus` for:**\n- Complex analysis\n- Architectural decisions\n- Deep code understanding\n- Critical tasks\n\n```yaml\n---\ndescription: Analyze system architecture\nmodel: opus\n---\n```\n\n**Best practices:**\n- Omit unless specific need\n- Use `haiku` for speed when possible\n- Reserve `opus` for genuinely complex tasks\n- Test with different models to find right balance\n\n### argument-hint\n\n**Type:** String\n**Required:** No\n**Default:** None\n\n**Purpose:** Document expected arguments for users and autocomplete\n\n**Format:**\n```yaml\nargument-hint: [arg1] [arg2] [optional-arg]\n```\n\n**Examples:**\n\n**Single argument:**\n```yaml\nargument-hint: [pr-number]\n```\n\n**Multiple required arguments:**\n```yaml\nargument-hint: [environment] [version]\n```\n\n**Optional arguments:**\n```yaml\nargument-hint: [file-path] [options]\n```\n\n**Descriptive names:**\n```yaml\nargument-hint: [source-branch] [target-branch] [commit-message]\n```\n\n**Best practices:**\n- Use square brackets `[]` for each argument\n- Use descriptive names (not `arg1`, `arg2`)\n- Indicate optional vs required in description\n- Match order to positional arguments in command\n- Keep concise but clear\n\n**Examples by pattern:**\n\n**Simple command:**\n```yaml\n---\ndescription: Fix issue by number\nargument-hint: [issue-number]\n---\n\nFix issue #$1...\n```\n\n**Multi-argument:**\n```yaml\n---\ndescription: Deploy to environment\nargument-hint: [app-name] [environment] [version]\n---\n\nDeploy $1 to $2 using version $3...\n```\n\n**With options:**\n```yaml\n---\ndescription: Run tests with options\nargument-hint: [test-pattern] [options]\n---\n\nRun tests matching $1 with options: $2\n```\n\n### disable-model-invocation\n\n**Type:** Boolean\n**Required:** No\n**Default:** false\n\n**Purpose:** Prevent SlashCommand tool from programmatically invoking command\n\n**Examples:**\n```yaml\ndisable-model-invocation: true\n```\n\n**When to use:**\n\n1. **Manual-only commands:** Commands requiring user judgment\n   ```yaml\n   ---\n   description: Approve deployment to production\n   disable-model-invocation: true\n   ---\n   ```\n\n2. **Destructive operations:** Commands with irreversible effects\n   ```yaml\n   ---\n   description: Delete all test data\n   disable-model-invocation: true\n   ---\n   ```\n\n3. **Interactive workflows:** Commands needing user input\n   ```yaml\n   ---\n   description: Walk through setup wizard\n   disable-model-invocation: true\n   ---\n   ```\n\n**Default behavior (false):**\n- Command available to SlashCommand tool\n- Claude can invoke programmatically\n- Still available for manual invocation\n\n**When true:**\n- Command only invokable by user typing `/command`\n- Not available to SlashCommand tool\n- Safer for sensitive operations\n\n**Best practices:**\n- Use sparingly (limits Claude's autonomy)\n- Document why in command comments\n- Consider if command should exist if always manual\n\n## Complete Examples\n\n### Minimal Command\n\nNo frontmatter needed:\n\n```markdown\nReview this code for common issues and suggest improvements.\n```\n\n### Simple Command\n\nJust description:\n\n```markdown\n---\ndescription: Review code for issues\n---\n\nReview this code for common issues and suggest improvements.\n```\n\n### Standard Command\n\nDescription and tools:\n\n```markdown\n---\ndescription: Review Git changes\nallowed-tools: Bash(git:*), Read\n---\n\nCurrent changes: !`git diff --name-only`\n\nReview each changed file for:\n- Code quality\n- Potential bugs\n- Best practices\n```\n\n### Complex Command\n\nAll common fields:\n\n```markdown\n---\ndescription: Deploy application to environment\nargument-hint: [app-name] [environment] [version]\nallowed-tools: Bash(kubectl:*), Bash(helm:*), Read\nmodel: sonnet\n---\n\nDeploy $1 to $2 environment using version $3\n\nPre-deployment checks:\n- Verify $2 configuration\n- Check cluster status: !`kubectl cluster-info`\n- Validate version $3 exists\n\nProceed with deployment following deployment runbook.\n```\n\n### Manual-Only Command\n\nRestricted invocation:\n\n```markdown\n---\ndescription: Approve production deployment\nargument-hint: [deployment-id]\ndisable-model-invocation: true\nallowed-tools: Bash(gh:*)\n---\n\n<!--\nMANUAL APPROVAL REQUIRED\nThis command requires human judgment and cannot be automated.\n-->\n\nReview deployment $1 for production approval:\n\nDeployment details: !`gh api /deployments/$1`\n\nVerify:\n- All tests passed\n- Security scan clean\n- Stakeholder approval\n- Rollback plan ready\n\nType \"APPROVED\" to confirm deployment.\n```\n\n## Validation\n\n### Common Errors\n\n**Invalid YAML syntax:**\n```yaml\n---\ndescription: Missing quote\nallowed-tools: Read, Write\nmodel: sonnet\n---  # ❌ Missing closing quote above\n```\n\n**Fix:** Validate YAML syntax\n\n**Incorrect tool specification:**\n```yaml\nallowed-tools: Bash  # ❌ Missing command filter\n```\n\n**Fix:** Use `Bash(git:*)` format\n\n**Invalid model name:**\n```yaml\nmodel: gpt4  # ❌ Not a valid Claude model\n```\n\n**Fix:** Use `sonnet`, `opus`, or `haiku`\n\n### Validation Checklist\n\nBefore committing command:\n- [ ] YAML syntax valid (no errors)\n- [ ] Description under 60 characters\n- [ ] allowed-tools uses proper format\n- [ ] model is valid value if specified\n- [ ] argument-hint matches positional arguments\n- [ ] disable-model-invocation used appropriately\n\n## Best Practices Summary\n\n1. **Start minimal:** Add frontmatter only when needed\n2. **Document arguments:** Always use argument-hint with arguments\n3. **Restrict tools:** Use most restrictive allowed-tools that works\n4. **Choose right model:** Use haiku for speed, opus for complexity\n5. **Manual-only sparingly:** Only use disable-model-invocation when necessary\n6. **Clear descriptions:** Make commands discoverable in `/help`\n7. **Test thoroughly:** Verify frontmatter works as expected\n",
        "plugins/plugin-dev/skills/command-development/references/interactive-commands.md": "# Interactive Command Patterns\n\nComprehensive guide to creating commands that gather user feedback and make decisions through the AskUserQuestion tool.\n\n## Overview\n\nSome commands need user input that doesn't work well with simple arguments. For example:\n- Choosing between multiple complex options with trade-offs\n- Selecting multiple items from a list\n- Making decisions that require explanation\n- Gathering preferences or configuration interactively\n\nFor these cases, use the **AskUserQuestion tool** within command execution rather than relying on command arguments.\n\n## When to Use AskUserQuestion\n\n### Use AskUserQuestion When:\n\n1. **Multiple choice decisions** with explanations needed\n2. **Complex options** that require context to choose\n3. **Multi-select scenarios** (choosing multiple items)\n4. **Preference gathering** for configuration\n5. **Interactive workflows** that adapt based on answers\n\n### Use Command Arguments When:\n\n1. **Simple values** (file paths, numbers, names)\n2. **Known inputs** user already has\n3. **Scriptable workflows** that should be automatable\n4. **Fast invocations** where prompting would slow down\n\n## AskUserQuestion Basics\n\n### Tool Parameters\n\n```typescript\n{\n  questions: [\n    {\n      question: \"Which authentication method should we use?\",\n      header: \"Auth method\",  // Short label (max 12 chars)\n      multiSelect: false,     // true for multiple selection\n      options: [\n        {\n          label: \"OAuth 2.0\",\n          description: \"Industry standard, supports multiple providers\"\n        },\n        {\n          label: \"JWT\",\n          description: \"Stateless, good for APIs\"\n        },\n        {\n          label: \"Session\",\n          description: \"Traditional, server-side state\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Key points:**\n- Users can always choose \"Other\" to provide custom input (automatic)\n- `multiSelect: true` allows selecting multiple options\n- Options should be 2-4 choices (not more)\n- Can ask 1-4 questions per tool call\n\n## Command Pattern for User Interaction\n\n### Basic Interactive Command\n\n```markdown\n---\ndescription: Interactive setup command\nallowed-tools: AskUserQuestion, Write\n---\n\n# Interactive Plugin Setup\n\nThis command will guide you through configuring the plugin with a series of questions.\n\n## Step 1: Gather Configuration\n\nUse the AskUserQuestion tool to ask:\n\n**Question 1 - Deployment target:**\n- header: \"Deploy to\"\n- question: \"Which deployment platform will you use?\"\n- options:\n  - AWS (Amazon Web Services with ECS/EKS)\n  - GCP (Google Cloud with GKE)\n  - Azure (Microsoft Azure with AKS)\n  - Local (Docker on local machine)\n\n**Question 2 - Environment strategy:**\n- header: \"Environments\"\n- question: \"How many environments do you need?\"\n- options:\n  - Single (Just production)\n  - Standard (Dev, Staging, Production)\n  - Complete (Dev, QA, Staging, Production)\n\n**Question 3 - Features to enable:**\n- header: \"Features\"\n- question: \"Which features do you want to enable?\"\n- multiSelect: true\n- options:\n  - Auto-scaling (Automatic resource scaling)\n  - Monitoring (Health checks and metrics)\n  - CI/CD (Automated deployment pipeline)\n  - Backups (Automated database backups)\n\n## Step 2: Process Answers\n\nBased on the answers received from AskUserQuestion:\n\n1. Parse the deployment target choice\n2. Set up environment-specific configuration\n3. Enable selected features\n4. Generate configuration files\n\n## Step 3: Generate Configuration\n\nCreate `.claude/plugin-name.local.md` with:\n\n\\`\\`\\`yaml\n---\ndeployment_target: [answer from Q1]\nenvironments: [answer from Q2]\nfeatures:\n  auto_scaling: [true if selected in Q3]\n  monitoring: [true if selected in Q3]\n  ci_cd: [true if selected in Q3]\n  backups: [true if selected in Q3]\n---\n\n# Plugin Configuration\n\nGenerated: [timestamp]\nTarget: [deployment_target]\nEnvironments: [environments]\n\\`\\`\\`\n\n## Step 4: Confirm and Next Steps\n\nConfirm configuration created and guide user on next steps.\n```\n\n### Multi-Stage Interactive Workflow\n\n```markdown\n---\ndescription: Multi-stage interactive workflow\nallowed-tools: AskUserQuestion, Read, Write, Bash\n---\n\n# Multi-Stage Deployment Setup\n\nThis command walks through deployment setup in stages, adapting based on your answers.\n\n## Stage 1: Basic Configuration\n\nUse AskUserQuestion to ask about deployment basics.\n\nBased on answers, determine which additional questions to ask.\n\n## Stage 2: Advanced Options (Conditional)\n\nIf user selected \"Advanced\" deployment in Stage 1:\n\nUse AskUserQuestion to ask about:\n- Load balancing strategy\n- Caching configuration\n- Security hardening options\n\nIf user selected \"Simple\" deployment:\n- Skip advanced questions\n- Use sensible defaults\n\n## Stage 3: Confirmation\n\nShow summary of all selections.\n\nUse AskUserQuestion for final confirmation:\n- header: \"Confirm\"\n- question: \"Does this configuration look correct?\"\n- options:\n  - Yes (Proceed with setup)\n  - No (Start over)\n  - Modify (Let me adjust specific settings)\n\nIf \"Modify\", ask which specific setting to change.\n\n## Stage 4: Execute Setup\n\nBased on confirmed configuration, execute setup steps.\n```\n\n## Interactive Question Design\n\n### Question Structure\n\n**Good questions:**\n```markdown\nQuestion: \"Which database should we use for this project?\"\nHeader: \"Database\"\nOptions:\n  - PostgreSQL (Relational, ACID compliant, best for complex queries)\n  - MongoDB (Document store, flexible schema, best for rapid iteration)\n  - Redis (In-memory, fast, best for caching and sessions)\n```\n\n**Poor questions:**\n```markdown\nQuestion: \"Database?\"  // Too vague\nHeader: \"DB\"  // Unclear abbreviation\nOptions:\n  - Option 1  // Not descriptive\n  - Option 2\n```\n\n### Option Design Best Practices\n\n**Clear labels:**\n- Use 1-5 words\n- Specific and descriptive\n- No jargon without context\n\n**Helpful descriptions:**\n- Explain what the option means\n- Mention key benefits or trade-offs\n- Help user make informed decision\n- Keep to 1-2 sentences\n\n**Appropriate number:**\n- 2-4 options per question\n- Don't overwhelm with too many choices\n- Group related options\n- \"Other\" automatically provided\n\n### Multi-Select Questions\n\n**When to use multiSelect:**\n\n```markdown\nUse AskUserQuestion for enabling features:\n\nQuestion: \"Which features do you want to enable?\"\nHeader: \"Features\"\nmultiSelect: true  // Allow selecting multiple\nOptions:\n  - Logging (Detailed operation logs)\n  - Metrics (Performance monitoring)\n  - Alerts (Error notifications)\n  - Backups (Automatic backups)\n```\n\nUser can select any combination: none, some, or all.\n\n**When NOT to use multiSelect:**\n\n```markdown\nQuestion: \"Which authentication method?\"\nmultiSelect: false  // Only one auth method makes sense\n```\n\nMutually exclusive choices should not use multiSelect.\n\n## Command Patterns with AskUserQuestion\n\n### Pattern 1: Simple Yes/No Decision\n\n```markdown\n---\ndescription: Command with confirmation\nallowed-tools: AskUserQuestion, Bash\n---\n\n# Destructive Operation\n\nThis operation will delete all cached data.\n\nUse AskUserQuestion to confirm:\n\nQuestion: \"This will delete all cached data. Are you sure?\"\nHeader: \"Confirm\"\nOptions:\n  - Yes (Proceed with deletion)\n  - No (Cancel operation)\n\nIf user selects \"Yes\":\n  Execute deletion\n  Report completion\n\nIf user selects \"No\":\n  Cancel operation\n  Exit without changes\n```\n\n### Pattern 2: Multiple Configuration Questions\n\n```markdown\n---\ndescription: Multi-question configuration\nallowed-tools: AskUserQuestion, Write\n---\n\n# Project Configuration Setup\n\nGather configuration through multiple questions.\n\nUse AskUserQuestion with multiple questions in one call:\n\n**Question 1:**\n- question: \"Which programming language?\"\n- header: \"Language\"\n- options: Python, TypeScript, Go, Rust\n\n**Question 2:**\n- question: \"Which test framework?\"\n- header: \"Testing\"\n- options: Jest, PyTest, Go Test, Cargo Test\n  (Adapt based on language from Q1)\n\n**Question 3:**\n- question: \"Which CI/CD platform?\"\n- header: \"CI/CD\"\n- options: GitHub Actions, GitLab CI, CircleCI\n\n**Question 4:**\n- question: \"Which features do you need?\"\n- header: \"Features\"\n- multiSelect: true\n- options: Linting, Type checking, Code coverage, Security scanning\n\nProcess all answers together to generate cohesive configuration.\n```\n\n### Pattern 3: Conditional Question Flow\n\n```markdown\n---\ndescription: Conditional interactive workflow\nallowed-tools: AskUserQuestion, Read, Write\n---\n\n# Adaptive Configuration\n\n## Question 1: Deployment Complexity\n\nUse AskUserQuestion:\n\nQuestion: \"How complex is your deployment?\"\nHeader: \"Complexity\"\nOptions:\n  - Simple (Single server, straightforward)\n  - Standard (Multiple servers, load balancing)\n  - Complex (Microservices, orchestration)\n\n## Conditional Questions Based on Answer\n\nIf answer is \"Simple\":\n  - No additional questions\n  - Use minimal configuration\n\nIf answer is \"Standard\":\n  - Ask about load balancing strategy\n  - Ask about scaling policy\n\nIf answer is \"Complex\":\n  - Ask about orchestration platform (Kubernetes, Docker Swarm)\n  - Ask about service mesh (Istio, Linkerd, None)\n  - Ask about monitoring (Prometheus, Datadog, CloudWatch)\n  - Ask about logging aggregation\n\n## Process Conditional Answers\n\nGenerate configuration appropriate for selected complexity level.\n```\n\n### Pattern 4: Iterative Collection\n\n```markdown\n---\ndescription: Collect multiple items iteratively\nallowed-tools: AskUserQuestion, Write\n---\n\n# Collect Team Members\n\nWe'll collect team member information for the project.\n\n## Question: How many team members?\n\nUse AskUserQuestion:\n\nQuestion: \"How many team members should we set up?\"\nHeader: \"Team size\"\nOptions:\n  - 2 people\n  - 3 people\n  - 4 people\n  - 6 people\n\n## Iterate Through Team Members\n\nFor each team member (1 to N based on answer):\n\nUse AskUserQuestion for member details:\n\nQuestion: \"What role for team member [number]?\"\nHeader: \"Role\"\nOptions:\n  - Frontend Developer\n  - Backend Developer\n  - DevOps Engineer\n  - QA Engineer\n  - Designer\n\nStore each member's information.\n\n## Generate Team Configuration\n\nAfter collecting all N members, create team configuration file with all members and their roles.\n```\n\n### Pattern 5: Dependency Selection\n\n```markdown\n---\ndescription: Select dependencies with multi-select\nallowed-tools: AskUserQuestion\n---\n\n# Configure Project Dependencies\n\n## Question: Required Libraries\n\nUse AskUserQuestion with multiSelect:\n\nQuestion: \"Which libraries does your project need?\"\nHeader: \"Dependencies\"\nmultiSelect: true\nOptions:\n  - React (UI framework)\n  - Express (Web server)\n  - TypeORM (Database ORM)\n  - Jest (Testing framework)\n  - Axios (HTTP client)\n\nUser can select any combination.\n\n## Process Selections\n\nFor each selected library:\n- Add to package.json dependencies\n- Generate sample configuration\n- Create usage examples\n- Update documentation\n```\n\n## Best Practices for Interactive Commands\n\n### Question Design\n\n1. **Clear and specific**: Question should be unambiguous\n2. **Concise header**: Max 12 characters for clean display\n3. **Helpful options**: Labels are clear, descriptions explain trade-offs\n4. **Appropriate count**: 2-4 options per question, 1-4 questions per call\n5. **Logical order**: Questions flow naturally\n\n### Error Handling\n\n```markdown\n# Handle AskUserQuestion Responses\n\nAfter calling AskUserQuestion, verify answers received:\n\nIf answers are empty or invalid:\n  Something went wrong gathering responses.\n\n  Please try again or provide configuration manually:\n  [Show alternative approach]\n\n  Exit.\n\nIf answers look correct:\n  Process as expected\n```\n\n### Progressive Disclosure\n\n```markdown\n# Start Simple, Get Detailed as Needed\n\n## Question 1: Setup Type\n\nUse AskUserQuestion:\n\nQuestion: \"How would you like to set up?\"\nHeader: \"Setup type\"\nOptions:\n  - Quick (Use recommended defaults)\n  - Custom (Configure all options)\n  - Guided (Step-by-step with explanations)\n\nIf \"Quick\":\n  Apply defaults, minimal questions\n\nIf \"Custom\":\n  Ask all available configuration questions\n\nIf \"Guided\":\n  Ask questions with extra explanation\n  Provide recommendations along the way\n```\n\n### Multi-Select Guidelines\n\n**Good multi-select use:**\n```markdown\nQuestion: \"Which features do you want to enable?\"\nmultiSelect: true\nOptions:\n  - Logging\n  - Metrics\n  - Alerts\n  - Backups\n\nReason: User might want any combination\n```\n\n**Bad multi-select use:**\n```markdown\nQuestion: \"Which database engine?\"\nmultiSelect: true  // ❌ Should be single-select\n\nReason: Can only use one database engine\n```\n\n## Advanced Patterns\n\n### Validation Loop\n\n```markdown\n---\ndescription: Interactive with validation\nallowed-tools: AskUserQuestion, Bash\n---\n\n# Setup with Validation\n\n## Gather Configuration\n\nUse AskUserQuestion to collect settings.\n\n## Validate Configuration\n\nCheck if configuration is valid:\n- Required dependencies available?\n- Settings compatible with each other?\n- No conflicts detected?\n\nIf validation fails:\n  Show validation errors\n\n  Use AskUserQuestion to ask:\n\n  Question: \"Configuration has issues. What would you like to do?\"\n  Header: \"Next step\"\n  Options:\n    - Fix (Adjust settings to resolve issues)\n    - Override (Proceed despite warnings)\n    - Cancel (Abort setup)\n\n  Based on answer, retry or proceed or exit.\n```\n\n### Build Configuration Incrementally\n\n```markdown\n---\ndescription: Incremental configuration builder\nallowed-tools: AskUserQuestion, Write, Read\n---\n\n# Incremental Setup\n\n## Phase 1: Core Settings\n\nUse AskUserQuestion for core settings.\n\nSave to `.claude/config-partial.yml`\n\n## Phase 2: Review Core Settings\n\nShow user the core settings:\n\nBased on these core settings, you need to configure:\n- [Setting A] (because you chose [X])\n- [Setting B] (because you chose [Y])\n\nReady to continue?\n\n## Phase 3: Detailed Settings\n\nUse AskUserQuestion for settings based on Phase 1 answers.\n\nMerge with core settings.\n\n## Phase 4: Final Review\n\nPresent complete configuration.\n\nUse AskUserQuestion for confirmation:\n\nQuestion: \"Is this configuration correct?\"\nOptions:\n  - Yes (Save and apply)\n  - No (Start over)\n  - Modify (Edit specific settings)\n```\n\n### Dynamic Options Based on Context\n\n```markdown\n---\ndescription: Context-aware questions\nallowed-tools: AskUserQuestion, Bash, Read\n---\n\n# Context-Aware Setup\n\n## Detect Current State\n\nCheck existing configuration:\n- Current language: !`detect-language.sh`\n- Existing frameworks: !`detect-frameworks.sh`\n- Available tools: !`check-tools.sh`\n\n## Ask Context-Appropriate Questions\n\nBased on detected language, ask relevant questions.\n\nIf language is TypeScript:\n\n  Use AskUserQuestion:\n\n  Question: \"Which TypeScript features should we enable?\"\n  Options:\n    - Strict Mode (Maximum type safety)\n    - Decorators (Experimental decorator support)\n    - Path Mapping (Module path aliases)\n\nIf language is Python:\n\n  Use AskUserQuestion:\n\n  Question: \"Which Python tools should we configure?\"\n  Options:\n    - Type Hints (mypy for type checking)\n    - Black (Code formatting)\n    - Pylint (Linting and style)\n\nQuestions adapt to project context.\n```\n\n## Real-World Example: Multi-Agent Swarm Launch\n\n**From multi-agent-swarm plugin:**\n\n```markdown\n---\ndescription: Launch multi-agent swarm\nallowed-tools: AskUserQuestion, Read, Write, Bash\n---\n\n# Launch Multi-Agent Swarm\n\n## Interactive Mode (No Task List Provided)\n\nIf user didn't provide task list file, help create one interactively.\n\n### Question 1: Agent Count\n\nUse AskUserQuestion:\n\nQuestion: \"How many agents should we launch?\"\nHeader: \"Agent count\"\nOptions:\n  - 2 agents (Best for simple projects)\n  - 3 agents (Good for medium projects)\n  - 4 agents (Standard team size)\n  - 6 agents (Large projects)\n  - 8 agents (Complex multi-component projects)\n\n### Question 2: Task Definition Approach\n\nUse AskUserQuestion:\n\nQuestion: \"How would you like to define tasks?\"\nHeader: \"Task setup\"\nOptions:\n  - File (I have a task list file ready)\n  - Guided (Help me create tasks interactively)\n  - Custom (Other approach)\n\nIf \"File\":\n  Ask for file path\n  Validate file exists and has correct format\n\nIf \"Guided\":\n  Enter iterative task creation mode (see below)\n\n### Question 3: Coordination Mode\n\nUse AskUserQuestion:\n\nQuestion: \"How should agents coordinate?\"\nHeader: \"Coordination\"\nOptions:\n  - Team Leader (One agent coordinates others)\n  - Collaborative (Agents coordinate as peers)\n  - Autonomous (Independent work, minimal coordination)\n\n### Iterative Task Creation (If \"Guided\" Selected)\n\nFor each agent (1 to N from Question 1):\n\n**Question A: Agent Name**\nQuestion: \"What should we call agent [number]?\"\nHeader: \"Agent name\"\nOptions:\n  - auth-agent\n  - api-agent\n  - ui-agent\n  - db-agent\n  (Provide relevant suggestions based on common patterns)\n\n**Question B: Task Type**\nQuestion: \"What task for [agent-name]?\"\nHeader: \"Task type\"\nOptions:\n  - Authentication (User auth, JWT, OAuth)\n  - API Endpoints (REST/GraphQL APIs)\n  - UI Components (Frontend components)\n  - Database (Schema, migrations, queries)\n  - Testing (Test suites and coverage)\n  - Documentation (Docs, README, guides)\n\n**Question C: Dependencies**\nQuestion: \"What does [agent-name] depend on?\"\nHeader: \"Dependencies\"\nmultiSelect: true\nOptions:\n  - [List of previously defined agents]\n  - No dependencies\n\n**Question D: Base Branch**\nQuestion: \"Which base branch for PR?\"\nHeader: \"PR base\"\nOptions:\n  - main\n  - staging\n  - develop\n\nStore all task information for each agent.\n\n### Generate Task List File\n\nAfter collecting all agent task details:\n\n1. Ask for project name\n2. Generate task list in proper format\n3. Save to `.daisy/swarm/tasks.md`\n4. Show user the file path\n5. Proceed with launch using generated task list\n```\n\n## Best Practices\n\n### Question Writing\n\n1. **Be specific**: \"Which database?\" not \"Choose option?\"\n2. **Explain trade-offs**: Describe pros/cons in option descriptions\n3. **Provide context**: Question text should stand alone\n4. **Guide decisions**: Help user make informed choice\n5. **Keep concise**: Header max 12 chars, descriptions 1-2 sentences\n\n### Option Design\n\n1. **Meaningful labels**: Specific, clear names\n2. **Informative descriptions**: Explain what each option does\n3. **Show trade-offs**: Help user understand implications\n4. **Consistent detail**: All options equally explained\n5. **2-4 options**: Not too few, not too many\n\n### Flow Design\n\n1. **Logical order**: Questions flow naturally\n2. **Build on previous**: Later questions use earlier answers\n3. **Minimize questions**: Ask only what's needed\n4. **Group related**: Ask related questions together\n5. **Show progress**: Indicate where in flow\n\n### User Experience\n\n1. **Set expectations**: Tell user what to expect\n2. **Explain why**: Help user understand purpose\n3. **Provide defaults**: Suggest recommended options\n4. **Allow escape**: Let user cancel or restart\n5. **Confirm actions**: Summarize before executing\n\n## Common Patterns\n\n### Pattern: Feature Selection\n\n```markdown\nUse AskUserQuestion:\n\nQuestion: \"Which features do you need?\"\nHeader: \"Features\"\nmultiSelect: true\nOptions:\n  - Authentication\n  - Authorization\n  - Rate Limiting\n  - Caching\n```\n\n### Pattern: Environment Configuration\n\n```markdown\nUse AskUserQuestion:\n\nQuestion: \"Which environment is this?\"\nHeader: \"Environment\"\nOptions:\n  - Development (Local development)\n  - Staging (Pre-production testing)\n  - Production (Live environment)\n```\n\n### Pattern: Priority Selection\n\n```markdown\nUse AskUserQuestion:\n\nQuestion: \"What's the priority for this task?\"\nHeader: \"Priority\"\nOptions:\n  - Critical (Must be done immediately)\n  - High (Important, do soon)\n  - Medium (Standard priority)\n  - Low (Nice to have)\n```\n\n### Pattern: Scope Selection\n\n```markdown\nUse AskUserQuestion:\n\nQuestion: \"What scope should we analyze?\"\nHeader: \"Scope\"\nOptions:\n  - Current file (Just this file)\n  - Current directory (All files in directory)\n  - Entire project (Full codebase scan)\n```\n\n## Combining Arguments and Questions\n\n### Use Both Appropriately\n\n**Arguments for known values:**\n```markdown\n---\nargument-hint: [project-name]\nallowed-tools: AskUserQuestion, Write\n---\n\nSetup for project: $1\n\nNow gather additional configuration...\n\nUse AskUserQuestion for options that require explanation.\n```\n\n**Questions for complex choices:**\n```markdown\nProject name from argument: $1\n\nNow use AskUserQuestion to choose:\n- Architecture pattern\n- Technology stack\n- Deployment strategy\n\nThese require explanation, so questions work better than arguments.\n```\n\n## Troubleshooting\n\n**Questions not appearing:**\n- Verify AskUserQuestion in allowed-tools\n- Check question format is correct\n- Ensure options array has 2-4 items\n\n**User can't make selection:**\n- Check option labels are clear\n- Verify descriptions are helpful\n- Consider if too many options\n- Ensure multiSelect setting is correct\n\n**Flow feels confusing:**\n- Reduce number of questions\n- Group related questions\n- Add explanation between stages\n- Show progress through workflow\n\nWith AskUserQuestion, commands become interactive wizards that guide users through complex decisions while maintaining the clarity that simple arguments provide for straightforward inputs.\n",
        "plugins/plugin-dev/skills/command-development/references/marketplace-considerations.md": "# Marketplace Considerations for Commands\n\nGuidelines for creating commands designed for distribution and marketplace success.\n\n## Overview\n\nCommands distributed through marketplaces need additional consideration beyond personal use commands. They must work across environments, handle diverse use cases, and provide excellent user experience for unknown users.\n\n## Design for Distribution\n\n### Universal Compatibility\n\n**Cross-platform considerations:**\n\n```markdown\n---\ndescription: Cross-platform command\nallowed-tools: Bash(*)\n---\n\n# Platform-Aware Command\n\nDetecting platform...\n\ncase \"$(uname)\" in\n  Darwin*)  PLATFORM=\"macOS\" ;;\n  Linux*)   PLATFORM=\"Linux\" ;;\n  MINGW*|MSYS*|CYGWIN*) PLATFORM=\"Windows\" ;;\n  *)        PLATFORM=\"Unknown\" ;;\nesac\n\nPlatform: $PLATFORM\n\n<!-- Adjust behavior based on platform -->\nif [ \"$PLATFORM\" = \"Windows\" ]; then\n  # Windows-specific handling\n  PATH_SEP=\"\\\\\"\n  NULL_DEVICE=\"NUL\"\nelse\n  # Unix-like handling\n  PATH_SEP=\"/\"\n  NULL_DEVICE=\"/dev/null\"\nfi\n\n[Platform-appropriate implementation...]\n```\n\n**Avoid platform-specific commands:**\n\n```markdown\n<!-- BAD: macOS-specific -->\n!`pbcopy < file.txt`\n\n<!-- GOOD: Platform detection -->\nif command -v pbcopy > /dev/null; then\n  pbcopy < file.txt\nelif command -v xclip > /dev/null; then\n  xclip -selection clipboard < file.txt\nelif command -v clip.exe > /dev/null; then\n  cat file.txt | clip.exe\nelse\n  echo \"Clipboard not available on this platform\"\nfi\n```\n\n### Minimal Dependencies\n\n**Check for required tools:**\n\n```markdown\n---\ndescription: Dependency-aware command\nallowed-tools: Bash(*)\n---\n\n# Check Dependencies\n\nRequired tools:\n- git\n- jq\n- node\n\nChecking availability...\n\nMISSING_DEPS=\"\"\n\nfor tool in git jq node; do\n  if ! command -v $tool > /dev/null; then\n    MISSING_DEPS=\"$MISSING_DEPS $tool\"\n  fi\ndone\n\nif [ -n \"$MISSING_DEPS\" ]; then\n  ❌ ERROR: Missing required dependencies:$MISSING_DEPS\n\n  INSTALLATION:\n  - git: https://git-scm.com/downloads\n  - jq: https://stedolan.github.io/jq/download/\n  - node: https://nodejs.org/\n\n  Install missing tools and try again.\n\n  Exit.\nfi\n\n✓ All dependencies available\n\n[Continue with command...]\n```\n\n**Document optional dependencies:**\n\n```markdown\n<!--\nDEPENDENCIES:\n  Required:\n  - git 2.0+: Version control\n  - jq 1.6+: JSON processing\n\n  Optional:\n  - gh: GitHub CLI (for PR operations)\n  - docker: Container operations (for containerized tests)\n\n  Feature availability depends on installed tools.\n-->\n```\n\n### Graceful Degradation\n\n**Handle missing features:**\n\n```markdown\n---\ndescription: Feature-aware command\n---\n\n# Feature Detection\n\nDetecting available features...\n\nFEATURES=\"\"\n\nif command -v gh > /dev/null; then\n  FEATURES=\"$FEATURES github\"\nfi\n\nif command -v docker > /dev/null; then\n  FEATURES=\"$FEATURES docker\"\nfi\n\nAvailable features: $FEATURES\n\nif echo \"$FEATURES\" | grep -q \"github\"; then\n  # Full functionality with GitHub integration\n  echo \"✓ GitHub integration available\"\nelse\n  # Reduced functionality without GitHub\n  echo \"⚠ Limited functionality: GitHub CLI not installed\"\n  echo \"  Install 'gh' for full features\"\nfi\n\n[Adapt behavior based on available features...]\n```\n\n## User Experience for Unknown Users\n\n### Clear Onboarding\n\n**First-run experience:**\n\n```markdown\n---\ndescription: Command with onboarding\nallowed-tools: Read, Write\n---\n\n# First Run Check\n\nif [ ! -f \".claude/command-initialized\" ]; then\n  **Welcome to Command Name!**\n\n  This appears to be your first time using this command.\n\n  WHAT THIS COMMAND DOES:\n  [Brief explanation of purpose and benefits]\n\n  QUICK START:\n  1. Basic usage: /command [arg]\n  2. For help: /command help\n  3. Examples: /command examples\n\n  SETUP:\n  No additional setup required. You're ready to go!\n\n  ✓ Initialization complete\n\n  [Create initialization marker]\n\n  Ready to proceed with your request...\nfi\n\n[Normal command execution...]\n```\n\n**Progressive feature discovery:**\n\n```markdown\n---\ndescription: Command with tips\n---\n\n# Command Execution\n\n[Main functionality...]\n\n---\n\n💡 TIP: Did you know?\n\nYou can speed up this command with the --fast flag:\n  /command --fast [args]\n\nFor more tips: /command tips\n```\n\n### Comprehensive Error Handling\n\n**Anticipate user mistakes:**\n\n```markdown\n---\ndescription: Forgiving command\n---\n\n# User Input Handling\n\nArgument: \"$1\"\n\n<!-- Check for common typos -->\nif [ \"$1\" = \"hlep\" ] || [ \"$1\" = \"hepl\" ]; then\n  Did you mean: help?\n\n  Showing help instead...\n  [Display help]\n\n  Exit.\nfi\n\n<!-- Suggest similar commands if not found -->\nif [ \"$1\" != \"valid-option1\" ] && [ \"$1\" != \"valid-option2\" ]; then\n  ❌ Unknown option: $1\n\n  Did you mean:\n  - valid-option1 (most similar)\n  - valid-option2\n\n  For all options: /command help\n\n  Exit.\nfi\n\n[Command continues...]\n```\n\n**Helpful diagnostics:**\n\n```markdown\n---\ndescription: Diagnostic command\n---\n\n# Operation Failed\n\nThe operation could not complete.\n\n**Diagnostic Information:**\n\nEnvironment:\n- Platform: $(uname)\n- Shell: $SHELL\n- Working directory: $(pwd)\n- Command: /command $@\n\nChecking common issues:\n- Git repository: $(git rev-parse --git-dir 2>&1)\n- Write permissions: $(test -w . && echo \"OK\" || echo \"DENIED\")\n- Required files: $(test -f config.yml && echo \"Found\" || echo \"Missing\")\n\nThis information helps debug the issue.\n\nFor support, include the above diagnostics.\n```\n\n## Distribution Best Practices\n\n### Namespace Awareness\n\n**Avoid name collisions:**\n\n```markdown\n---\ndescription: Namespaced command\n---\n\n<!--\nCOMMAND NAME: plugin-name-command\n\nThis command is namespaced with the plugin name to avoid\nconflicts with commands from other plugins.\n\nAlternative naming approaches:\n- Use plugin prefix: /plugin-command\n- Use category: /category-command\n- Use verb-noun: /verb-noun\n\nChosen approach: plugin-name prefix\nReasoning: Clearest ownership, least likely to conflict\n-->\n\n# Plugin Name Command\n\n[Implementation...]\n```\n\n**Document naming rationale:**\n\n```markdown\n<!--\nNAMING DECISION:\n\nCommand name: /deploy-app\n\nAlternatives considered:\n- /deploy: Too generic, likely conflicts\n- /app-deploy: Less intuitive ordering\n- /my-plugin-deploy: Too verbose\n\nFinal choice balances:\n- Discoverability (clear purpose)\n- Brevity (easy to type)\n- Uniqueness (unlikely conflicts)\n-->\n```\n\n### Configurability\n\n**User preferences:**\n\n```markdown\n---\ndescription: Configurable command\nallowed-tools: Read\n---\n\n# Load User Configuration\n\nDefault configuration:\n- verbose: false\n- color: true\n- max_results: 10\n\nChecking for user config: .claude/plugin-name.local.md\n\nif [ -f \".claude/plugin-name.local.md\" ]; then\n  # Parse YAML frontmatter for settings\n  VERBOSE=$(grep \"^verbose:\" .claude/plugin-name.local.md | cut -d: -f2 | tr -d ' ')\n  COLOR=$(grep \"^color:\" .claude/plugin-name.local.md | cut -d: -f2 | tr -d ' ')\n  MAX_RESULTS=$(grep \"^max_results:\" .claude/plugin-name.local.md | cut -d: -f2 | tr -d ' ')\n\n  echo \"✓ Using user configuration\"\nelse\n  echo \"Using default configuration\"\n  echo \"Create .claude/plugin-name.local.md to customize\"\nfi\n\n[Use configuration in command...]\n```\n\n**Sensible defaults:**\n\n```markdown\n---\ndescription: Command with smart defaults\n---\n\n# Smart Defaults\n\nConfiguration:\n- Format: ${FORMAT:-json}  # Defaults to json\n- Output: ${OUTPUT:-stdout}  # Defaults to stdout\n- Verbose: ${VERBOSE:-false}  # Defaults to false\n\nThese defaults work for 80% of use cases.\n\nOverride with arguments:\n  /command --format yaml --output file.txt --verbose\n\nOr set in .claude/plugin-name.local.md:\n\\`\\`\\`yaml\n---\nformat: yaml\noutput: custom.txt\nverbose: true\n---\n\\`\\`\\`\n```\n\n### Version Compatibility\n\n**Version checking:**\n\n```markdown\n---\ndescription: Version-aware command\n---\n\n<!--\nCOMMAND VERSION: 2.1.0\n\nCOMPATIBILITY:\n- Requires plugin version: >= 2.0.0\n- Breaking changes from v1.x documented in MIGRATION.md\n\nVERSION HISTORY:\n- v2.1.0: Added --new-feature flag\n- v2.0.0: BREAKING: Changed argument order\n- v1.0.0: Initial release\n-->\n\n# Version Check\n\nCommand version: 2.1.0\nPlugin version: [detect from plugin.json]\n\nif [  \"$PLUGIN_VERSION\" < \"2.0.0\" ]; then\n  ❌ ERROR: Incompatible plugin version\n\n  This command requires plugin version >= 2.0.0\n  Current version: $PLUGIN_VERSION\n\n  Update plugin:\n    /plugin update plugin-name\n\n  Exit.\nfi\n\n✓ Version compatible\n\n[Command continues...]\n```\n\n**Deprecation warnings:**\n\n```markdown\n---\ndescription: Command with deprecation warnings\n---\n\n# Deprecation Check\n\nif [ \"$1\" = \"--old-flag\" ]; then\n  ⚠️  DEPRECATION WARNING\n\n  The --old-flag option is deprecated as of v2.0.0\n  It will be removed in v3.0.0 (est. June 2025)\n\n  Use instead: --new-flag\n\n  Example:\n    Old: /command --old-flag value\n    New: /command --new-flag value\n\n  See migration guide: /command migrate\n\n  Continuing with deprecated behavior for now...\nfi\n\n[Handle both old and new flags during deprecation period...]\n```\n\n## Marketplace Presentation\n\n### Command Discovery\n\n**Descriptive naming:**\n\n```markdown\n---\ndescription: Review pull request with security and quality checks\n---\n\n<!-- GOOD: Descriptive name and description -->\n```\n\n```markdown\n---\ndescription: Do the thing\n---\n\n<!-- BAD: Vague description -->\n```\n\n**Searchable keywords:**\n\n```markdown\n<!--\nKEYWORDS: security, code-review, quality, validation, audit\n\nThese keywords help users discover this command when searching\nfor related functionality in the marketplace.\n-->\n```\n\n### Showcase Examples\n\n**Compelling demonstrations:**\n\n```markdown\n---\ndescription: Advanced code analysis command\n---\n\n# Code Analysis Command\n\nThis command performs deep code analysis with actionable insights.\n\n## Demo: Quick Security Audit\n\nTry it now:\n\\`\\`\\`\n/analyze-code src/ --security\n\\`\\`\\`\n\n**What you'll get:**\n- Security vulnerability detection\n- Code quality metrics\n- Performance bottleneck identification\n- Actionable recommendations\n\n**Sample output:**\n\\`\\`\\`\nSecurity Analysis Results\n=========================\n\n🔴 Critical (2):\n  - SQL injection risk in users.js:45\n  - XSS vulnerability in display.js:23\n\n🟡 Warnings (5):\n  - Unvalidated input in api.js:67\n  ...\n\nRecommendations:\n1. Fix critical issues immediately\n2. Review warnings before next release\n3. Run /analyze-code --fix for auto-fixes\n\\`\\`\\`\n\n---\n\nReady to analyze your code...\n\n[Command implementation...]\n```\n\n### User Reviews and Feedback\n\n**Feedback mechanism:**\n\n```markdown\n---\ndescription: Command with feedback\n---\n\n# Command Complete\n\n[Command results...]\n\n---\n\n**How was your experience?**\n\nThis helps improve the command for everyone.\n\nRate this command:\n- 👍 Helpful\n- 👎 Not helpful\n- 🐛 Found a bug\n- 💡 Have a suggestion\n\nReply with an emoji or:\n- /command feedback\n\nYour feedback matters!\n```\n\n**Usage analytics preparation:**\n\n```markdown\n<!--\nANALYTICS NOTES:\n\nTrack for improvement:\n- Most common arguments\n- Failure rates\n- Average execution time\n- User satisfaction scores\n\nPrivacy-preserving:\n- No personally identifiable information\n- Aggregate statistics only\n- User opt-out respected\n-->\n```\n\n## Quality Standards\n\n### Professional Polish\n\n**Consistent branding:**\n\n```markdown\n---\ndescription: Branded command\n---\n\n# ✨ Command Name\n\nPart of the [Plugin Name] suite\n\n[Command functionality...]\n\n---\n\n**Need Help?**\n- Documentation: https://docs.example.com\n- Support: support@example.com\n- Community: https://community.example.com\n\nPowered by Plugin Name v2.1.0\n```\n\n**Attention to detail:**\n\n```markdown\n<!-- Details that matter -->\n\n✓ Use proper emoji/symbols consistently\n✓ Align output columns neatly\n✓ Format numbers with thousands separators\n✓ Use color/formatting appropriately\n✓ Provide progress indicators\n✓ Show estimated time remaining\n✓ Confirm successful operations\n```\n\n### Reliability\n\n**Idempotency:**\n\n```markdown\n---\ndescription: Idempotent command\n---\n\n# Safe Repeated Execution\n\nChecking if operation already completed...\n\nif [ -f \".claude/operation-completed.flag\" ]; then\n  ℹ️  Operation already completed\n\n  Completed at: $(cat .claude/operation-completed.flag)\n\n  To re-run:\n  1. Remove flag: rm .claude/operation-completed.flag\n  2. Run command again\n\n  Otherwise, no action needed.\n\n  Exit.\nfi\n\nPerforming operation...\n\n[Safe, repeatable operation...]\n\nMarking complete...\necho \"$(date)\" > .claude/operation-completed.flag\n```\n\n**Atomic operations:**\n\n```markdown\n---\ndescription: Atomic command\n---\n\n# Atomic Operation\n\nThis operation is atomic - either fully succeeds or fully fails.\n\nCreating temporary workspace...\nTEMP_DIR=$(mktemp -d)\n\nPerforming changes in isolated environment...\n[Make changes in $TEMP_DIR]\n\nif [ $? -eq 0 ]; then\n  ✓ Changes validated\n\n  Applying changes atomically...\n  mv $TEMP_DIR/* ./target/\n\n  ✓ Operation complete\nelse\n  ❌ Changes failed validation\n\n  Rolling back...\n  rm -rf $TEMP_DIR\n\n  No changes applied. Safe to retry.\nfi\n```\n\n## Testing for Distribution\n\n### Pre-Release Checklist\n\n```markdown\n<!--\nPRE-RELEASE CHECKLIST:\n\nFunctionality:\n- [ ] Works on macOS\n- [ ] Works on Linux\n- [ ] Works on Windows (WSL)\n- [ ] All arguments tested\n- [ ] Error cases handled\n- [ ] Edge cases covered\n\nUser Experience:\n- [ ] Clear description\n- [ ] Helpful error messages\n- [ ] Examples provided\n- [ ] First-run experience good\n- [ ] Documentation complete\n\nDistribution:\n- [ ] No hardcoded paths\n- [ ] Dependencies documented\n- [ ] Configuration options clear\n- [ ] Version number set\n- [ ] Changelog updated\n\nQuality:\n- [ ] No TODO comments\n- [ ] No debug code\n- [ ] Performance acceptable\n- [ ] Security reviewed\n- [ ] Privacy considered\n\nSupport:\n- [ ] README complete\n- [ ] Troubleshooting guide\n- [ ] Support contact provided\n- [ ] Feedback mechanism\n- [ ] License specified\n-->\n```\n\n### Beta Testing\n\n**Beta release approach:**\n\n```markdown\n---\ndescription: Beta command (v0.9.0)\n---\n\n# 🧪 Beta Command\n\n**This is a beta release**\n\nFeatures may change based on feedback.\n\nBETA STATUS:\n- Version: 0.9.0\n- Stability: Experimental\n- Support: Limited\n- Feedback: Encouraged\n\nKnown limitations:\n- Performance not optimized\n- Some edge cases not handled\n- Documentation incomplete\n\nHelp improve this command:\n- Report issues: /command report-issue\n- Suggest features: /command suggest\n- Join beta testers: /command join-beta\n\n---\n\n[Command implementation...]\n\n---\n\n**Thank you for beta testing!**\n\nYour feedback helps make this command better.\n```\n\n## Maintenance and Updates\n\n### Update Strategy\n\n**Versioned commands:**\n\n```markdown\n<!--\nVERSION STRATEGY:\n\nMajor (X.0.0): Breaking changes\n- Document all breaking changes\n- Provide migration guide\n- Support old version briefly\n\nMinor (x.Y.0): New features\n- Backward compatible\n- Announce new features\n- Update examples\n\nPatch (x.y.Z): Bug fixes\n- No user-facing changes\n- Update changelog\n- Security fixes prioritized\n\nRelease schedule:\n- Patches: As needed\n- Minors: Monthly\n- Majors: Annually or as needed\n-->\n```\n\n**Update notifications:**\n\n```markdown\n---\ndescription: Update-aware command\n---\n\n# Check for Updates\n\nCurrent version: 2.1.0\nLatest version: [check if available]\n\nif [ \"$CURRENT_VERSION\" != \"$LATEST_VERSION\" ]; then\n  📢 UPDATE AVAILABLE\n\n  New version: $LATEST_VERSION\n  Current: $CURRENT_VERSION\n\n  What's new:\n  - Feature improvements\n  - Bug fixes\n  - Performance enhancements\n\n  Update with:\n    /plugin update plugin-name\n\n  Release notes: https://releases.example.com/v$LATEST_VERSION\nfi\n\n[Command continues...]\n```\n\n## Best Practices Summary\n\n### Distribution Design\n\n1. **Universal**: Works across platforms and environments\n2. **Self-contained**: Minimal dependencies, clear requirements\n3. **Graceful**: Degrades gracefully when features unavailable\n4. **Forgiving**: Anticipates and handles user mistakes\n5. **Helpful**: Clear errors, good defaults, excellent docs\n\n### Marketplace Success\n\n1. **Discoverable**: Clear name, good description, searchable keywords\n2. **Professional**: Polished presentation, consistent branding\n3. **Reliable**: Tested thoroughly, handles edge cases\n4. **Maintainable**: Versioned, updated regularly, supported\n5. **User-focused**: Great UX, responsive to feedback\n\n### Quality Standards\n\n1. **Complete**: Fully documented, all features working\n2. **Tested**: Works in real environments, edge cases handled\n3. **Secure**: No vulnerabilities, safe operations\n4. **Performant**: Reasonable speed, resource-efficient\n5. **Ethical**: Privacy-respecting, user consent\n\nWith these considerations, commands become marketplace-ready and delight users across diverse environments and use cases.\n",
        "plugins/plugin-dev/skills/command-development/references/plugin-features-reference.md": "# Plugin-Specific Command Features Reference\n\nThis reference covers features and patterns specific to commands bundled in Claude Code plugins.\n\n## Table of Contents\n\n- [Plugin Command Discovery](#plugin-command-discovery)\n- [CLAUDE_PLUGIN_ROOT Environment Variable](#claude_plugin_root-environment-variable)\n- [Plugin Command Patterns](#plugin-command-patterns)\n- [Integration with Plugin Components](#integration-with-plugin-components)\n- [Validation Patterns](#validation-patterns)\n\n## Plugin Command Discovery\n\n### Auto-Discovery\n\nClaude Code automatically discovers commands in plugins using the following locations:\n\n```\nplugin-name/\n├── commands/              # Auto-discovered commands\n│   ├── foo.md            # /foo (plugin:plugin-name)\n│   └── bar.md            # /bar (plugin:plugin-name)\n└── plugin.json           # Plugin manifest\n```\n\n**Key points:**\n- Commands are discovered at plugin load time\n- No manual registration required\n- Commands appear in `/help` with \"(plugin:plugin-name)\" label\n- Subdirectories create namespaces\n\n### Namespaced Plugin Commands\n\nOrganize commands in subdirectories for logical grouping:\n\n```\nplugin-name/\n└── commands/\n    ├── review/\n    │   ├── security.md    # /security (plugin:plugin-name:review)\n    │   └── style.md       # /style (plugin:plugin-name:review)\n    └── deploy/\n        ├── staging.md     # /staging (plugin:plugin-name:deploy)\n        └── prod.md        # /prod (plugin:plugin-name:deploy)\n```\n\n**Namespace behavior:**\n- Subdirectory name becomes namespace\n- Shown as \"(plugin:plugin-name:namespace)\" in `/help`\n- Helps organize related commands\n- Use when plugin has 5+ commands\n\n### Command Naming Conventions\n\n**Plugin command names should:**\n1. Be descriptive and action-oriented\n2. Avoid conflicts with common command names\n3. Use hyphens for multi-word names\n4. Consider prefixing with plugin name for uniqueness\n\n**Examples:**\n```\nGood:\n- /mylyn-sync          (plugin-specific prefix)\n- /analyze-performance (descriptive action)\n- /docker-compose-up   (clear purpose)\n\nAvoid:\n- /test               (conflicts with common name)\n- /run                (too generic)\n- /do-stuff           (not descriptive)\n```\n\n## CLAUDE_PLUGIN_ROOT Environment Variable\n\n### Purpose\n\n`${CLAUDE_PLUGIN_ROOT}` is a special environment variable available in plugin commands that resolves to the absolute path of the plugin directory.\n\n**Why it matters:**\n- Enables portable paths within plugin\n- Allows referencing plugin files and scripts\n- Works across different installations\n- Essential for multi-file plugin operations\n\n### Basic Usage\n\nReference files within your plugin:\n\n```markdown\n---\ndescription: Analyze using plugin script\nallowed-tools: Bash(node:*), Read\n---\n\nRun analysis: !`node ${CLAUDE_PLUGIN_ROOT}/scripts/analyze.js`\n\nRead template: @${CLAUDE_PLUGIN_ROOT}/templates/report.md\n```\n\n**Expands to:**\n```\nRun analysis: !`node /path/to/plugins/plugin-name/scripts/analyze.js`\n\nRead template: @/path/to/plugins/plugin-name/templates/report.md\n```\n\n### Common Patterns\n\n#### 1. Executing Plugin Scripts\n\n```markdown\n---\ndescription: Run custom linter from plugin\nallowed-tools: Bash(node:*)\n---\n\nLint results: !`node ${CLAUDE_PLUGIN_ROOT}/bin/lint.js $1`\n\nReview the linting output and suggest fixes.\n```\n\n#### 2. Loading Configuration Files\n\n```markdown\n---\ndescription: Deploy using plugin configuration\nallowed-tools: Read, Bash(*)\n---\n\nConfiguration: @${CLAUDE_PLUGIN_ROOT}/config/deploy-config.json\n\nDeploy application using the configuration above for $1 environment.\n```\n\n#### 3. Accessing Plugin Resources\n\n```markdown\n---\ndescription: Generate report from template\n---\n\nUse this template: @${CLAUDE_PLUGIN_ROOT}/templates/api-report.md\n\nGenerate a report for @$1 following the template format.\n```\n\n#### 4. Multi-Step Plugin Workflows\n\n```markdown\n---\ndescription: Complete plugin workflow\nallowed-tools: Bash(*), Read\n---\n\nStep 1 - Prepare: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/prepare.sh $1`\nStep 2 - Config: @${CLAUDE_PLUGIN_ROOT}/config/$1.json\nStep 3 - Execute: !`${CLAUDE_PLUGIN_ROOT}/bin/execute $1`\n\nReview results and report status.\n```\n\n### Best Practices\n\n1. **Always use for plugin-internal paths:**\n   ```markdown\n   # Good\n   @${CLAUDE_PLUGIN_ROOT}/templates/foo.md\n\n   # Bad\n   @./templates/foo.md  # Relative to current directory, not plugin\n   ```\n\n2. **Validate file existence:**\n   ```markdown\n   ---\n   description: Use plugin config if exists\n   allowed-tools: Bash(test:*), Read\n   ---\n\n   !`test -f ${CLAUDE_PLUGIN_ROOT}/config.json && echo \"exists\" || echo \"missing\"`\n\n   If config exists, load it: @${CLAUDE_PLUGIN_ROOT}/config.json\n   Otherwise, use defaults...\n   ```\n\n3. **Document plugin file structure:**\n   ```markdown\n   <!--\n   Plugin structure:\n   ${CLAUDE_PLUGIN_ROOT}/\n   ├── scripts/analyze.js  (analysis script)\n   ├── templates/          (report templates)\n   └── config/             (configuration files)\n   -->\n   ```\n\n4. **Combine with arguments:**\n   ```markdown\n   Run: !`${CLAUDE_PLUGIN_ROOT}/bin/process.sh $1 $2`\n   ```\n\n### Troubleshooting\n\n**Variable not expanding:**\n- Ensure command is loaded from plugin\n- Check bash execution is allowed\n- Verify syntax is exact: `${CLAUDE_PLUGIN_ROOT}`\n\n**File not found errors:**\n- Verify file exists in plugin directory\n- Check file path is correct relative to plugin root\n- Ensure file permissions allow reading/execution\n\n**Path with spaces:**\n- Bash commands automatically handle spaces\n- File references work with spaces in paths\n- No special quoting needed\n\n## Plugin Command Patterns\n\n### Pattern 1: Configuration-Based Commands\n\nCommands that load plugin-specific configuration:\n\n```markdown\n---\ndescription: Deploy using plugin settings\nallowed-tools: Read, Bash(*)\n---\n\nLoad configuration: @${CLAUDE_PLUGIN_ROOT}/deploy-config.json\n\nDeploy to $1 environment using:\n1. Configuration settings above\n2. Current git branch: !`git branch --show-current`\n3. Application version: !`cat package.json | grep version`\n\nExecute deployment and monitor progress.\n```\n\n**When to use:** Commands that need consistent settings across invocations\n\n### Pattern 2: Template-Based Generation\n\nCommands that use plugin templates:\n\n```markdown\n---\ndescription: Generate documentation from template\nargument-hint: [component-name]\n---\n\nTemplate: @${CLAUDE_PLUGIN_ROOT}/templates/component-docs.md\n\nGenerate documentation for $1 component following the template structure.\nInclude:\n- Component purpose and usage\n- API reference\n- Examples\n- Testing guidelines\n```\n\n**When to use:** Standardized output generation\n\n### Pattern 3: Multi-Script Workflow\n\nCommands that orchestrate multiple plugin scripts:\n\n```markdown\n---\ndescription: Complete build and test workflow\nallowed-tools: Bash(*)\n---\n\nBuild: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh`\nValidate: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh`\nTest: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/test.sh`\n\nReview all outputs and report:\n1. Build status\n2. Validation results\n3. Test results\n4. Recommended next steps\n```\n\n**When to use:** Complex plugin workflows with multiple steps\n\n### Pattern 4: Environment-Aware Commands\n\nCommands that adapt to environment:\n\n```markdown\n---\ndescription: Deploy based on environment\nargument-hint: [dev|staging|prod]\n---\n\nEnvironment config: @${CLAUDE_PLUGIN_ROOT}/config/$1.json\n\nEnvironment check: !`echo \"Deploying to: $1\"`\n\nDeploy application using $1 environment configuration.\nVerify deployment and run smoke tests.\n```\n\n**When to use:** Commands that behave differently per environment\n\n### Pattern 5: Plugin Data Management\n\nCommands that manage plugin-specific data:\n\n```markdown\n---\ndescription: Save analysis results to plugin cache\nallowed-tools: Bash(*), Read, Write\n---\n\nCache directory: ${CLAUDE_PLUGIN_ROOT}/cache/\n\nAnalyze @$1 and save results to cache:\n!`mkdir -p ${CLAUDE_PLUGIN_ROOT}/cache && date > ${CLAUDE_PLUGIN_ROOT}/cache/last-run.txt`\n\nStore analysis for future reference and comparison.\n```\n\n**When to use:** Commands that need persistent data storage\n\n## Integration with Plugin Components\n\n### Invoking Plugin Agents\n\nCommands can trigger plugin agents using the Task tool:\n\n```markdown\n---\ndescription: Deep analysis using plugin agent\nargument-hint: [file-path]\n---\n\nInitiate deep code analysis of @$1 using the code-analyzer agent.\n\nThe agent will:\n1. Analyze code structure\n2. Identify patterns\n3. Suggest improvements\n4. Generate detailed report\n\nNote: This uses the Task tool to launch the plugin's code-analyzer agent.\n```\n\n**Key points:**\n- Agent must be defined in plugin's `agents/` directory\n- Claude will automatically use Task tool to launch agent\n- Agent has access to same plugin resources\n\n### Invoking Plugin Skills\n\nCommands can reference plugin skills for specialized knowledge:\n\n```markdown\n---\ndescription: API documentation with best practices\nargument-hint: [api-file]\n---\n\nDocument the API in @$1 following our API documentation standards.\n\nUse the api-docs-standards skill to ensure documentation includes:\n- Endpoint descriptions\n- Parameter specifications\n- Response formats\n- Error codes\n- Usage examples\n\nNote: This leverages the plugin's api-docs-standards skill for consistency.\n```\n\n**Key points:**\n- Skill must be defined in plugin's `skills/` directory\n- Mention skill by name to hint Claude should invoke it\n- Skills provide specialized domain knowledge\n\n### Coordinating with Plugin Hooks\n\nCommands can be designed to work with plugin hooks:\n\n```markdown\n---\ndescription: Commit with pre-commit validation\nallowed-tools: Bash(git:*)\n---\n\nStage changes: !\\`git add $1\\`\n\nCommit changes: !\\`git commit -m \"$2\"\\`\n\nNote: This commit will trigger the plugin's pre-commit hook for validation.\nReview hook output for any issues.\n```\n\n**Key points:**\n- Hooks execute automatically on events\n- Commands can prepare state for hooks\n- Document hook interaction in command\n\n### Multi-Component Plugin Commands\n\nCommands that coordinate multiple plugin components:\n\n```markdown\n---\ndescription: Comprehensive code review workflow\nargument-hint: [file-path]\n---\n\nFile to review: @$1\n\nExecute comprehensive review:\n\n1. **Static Analysis** (via plugin scripts)\n   !`node ${CLAUDE_PLUGIN_ROOT}/scripts/lint.js $1`\n\n2. **Deep Review** (via plugin agent)\n   Launch the code-reviewer agent for detailed analysis.\n\n3. **Best Practices** (via plugin skill)\n   Use the code-standards skill to ensure compliance.\n\n4. **Documentation** (via plugin template)\n   Template: @${CLAUDE_PLUGIN_ROOT}/templates/review-report.md\n\nGenerate final report combining all outputs.\n```\n\n**When to use:** Complex workflows leveraging multiple plugin capabilities\n\n## Validation Patterns\n\n### Input Validation\n\nCommands should validate inputs before processing:\n\n```markdown\n---\ndescription: Deploy to environment with validation\nargument-hint: [environment]\n---\n\nValidate environment: !`echo \"$1\" | grep -E \"^(dev|staging|prod)$\" || echo \"INVALID\"`\n\n$IF($1 in [dev, staging, prod],\n  Deploy to $1 environment using validated configuration,\n  ERROR: Invalid environment '$1'. Must be one of: dev, staging, prod\n)\n```\n\n**Validation approaches:**\n1. Bash validation using grep/test\n2. Inline validation in prompt\n3. Script-based validation\n\n### File Existence Checks\n\nVerify required files exist:\n\n```markdown\n---\ndescription: Process configuration file\nargument-hint: [config-file]\n---\n\nCheck file: !`test -f $1 && echo \"EXISTS\" || echo \"MISSING\"`\n\nProcess configuration if file exists: @$1\n\nIf file doesn't exist, explain:\n- Expected location\n- Required format\n- How to create it\n```\n\n### Required Arguments\n\nValidate required arguments provided:\n\n```markdown\n---\ndescription: Create deployment with version\nargument-hint: [environment] [version]\n---\n\nValidate inputs: !`test -n \"$1\" -a -n \"$2\" && echo \"OK\" || echo \"MISSING\"`\n\n$IF($1 AND $2,\n  Deploy version $2 to $1 environment,\n  ERROR: Both environment and version required. Usage: /deploy [env] [version]\n)\n```\n\n### Plugin Resource Validation\n\nVerify plugin resources available:\n\n```markdown\n---\ndescription: Run analysis with plugin tools\nallowed-tools: Bash(test:*)\n---\n\nValidate plugin setup:\n- Config exists: !`test -f ${CLAUDE_PLUGIN_ROOT}/config.json && echo \"✓\" || echo \"✗\"`\n- Scripts exist: !`test -d ${CLAUDE_PLUGIN_ROOT}/scripts && echo \"✓\" || echo \"✗\"`\n- Tools available: !`test -x ${CLAUDE_PLUGIN_ROOT}/bin/analyze && echo \"✓\" || echo \"✗\"`\n\nIf all checks pass, proceed with analysis.\nOtherwise, report missing components and installation steps.\n```\n\n### Output Validation\n\nValidate command execution results:\n\n```markdown\n---\ndescription: Build and validate output\nallowed-tools: Bash(*)\n---\n\nBuild: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh`\n\nValidate output:\n- Exit code: !`echo $?`\n- Output exists: !`test -d dist && echo \"✓\" || echo \"✗\"`\n- File count: !`find dist -type f | wc -l`\n\nReport build status and any validation failures.\n```\n\n### Graceful Error Handling\n\nHandle errors gracefully with helpful messages:\n\n```markdown\n---\ndescription: Process file with error handling\nargument-hint: [file-path]\n---\n\nTry processing: !`node ${CLAUDE_PLUGIN_ROOT}/scripts/process.js $1 2>&1 || echo \"ERROR: $?\"`\n\nIf processing succeeded:\n- Report results\n- Suggest next steps\n\nIf processing failed:\n- Explain likely causes\n- Provide troubleshooting steps\n- Suggest alternative approaches\n```\n\n## Best Practices Summary\n\n### Plugin Commands Should:\n\n1. **Use ${CLAUDE_PLUGIN_ROOT} for all plugin-internal paths**\n   - Scripts, templates, configuration, resources\n\n2. **Validate inputs early**\n   - Check required arguments\n   - Verify file existence\n   - Validate argument formats\n\n3. **Document plugin structure**\n   - Explain required files\n   - Document script purposes\n   - Clarify dependencies\n\n4. **Integrate with plugin components**\n   - Reference agents for complex tasks\n   - Use skills for specialized knowledge\n   - Coordinate with hooks when relevant\n\n5. **Provide helpful error messages**\n   - Explain what went wrong\n   - Suggest how to fix\n   - Offer alternatives\n\n6. **Handle edge cases**\n   - Missing files\n   - Invalid arguments\n   - Failed script execution\n   - Missing dependencies\n\n7. **Keep commands focused**\n   - One clear purpose per command\n   - Delegate complex logic to scripts\n   - Use agents for multi-step workflows\n\n8. **Test across installations**\n   - Verify paths work everywhere\n   - Test with different arguments\n   - Validate error cases\n\n---\n\nFor general command development, see main SKILL.md.\nFor command examples, see examples/ directory.\n",
        "plugins/plugin-dev/skills/command-development/references/testing-strategies.md": "# Command Testing Strategies\n\nComprehensive strategies for testing slash commands before deployment and distribution.\n\n## Overview\n\nTesting commands ensures they work correctly, handle edge cases, and provide good user experience. A systematic testing approach catches issues early and builds confidence in command reliability.\n\n## Testing Levels\n\n### Level 1: Syntax and Structure Validation\n\n**What to test:**\n- YAML frontmatter syntax\n- Markdown format\n- File location and naming\n\n**How to test:**\n\n```bash\n# Validate YAML frontmatter\nhead -n 20 .claude/commands/my-command.md | grep -A 10 \"^---\"\n\n# Check for closing frontmatter marker\nhead -n 20 .claude/commands/my-command.md | grep -c \"^---\" # Should be 2\n\n# Verify file has .md extension\nls .claude/commands/*.md\n\n# Check file is in correct location\ntest -f .claude/commands/my-command.md && echo \"Found\" || echo \"Missing\"\n```\n\n**Automated validation script:**\n\n```bash\n#!/bin/bash\n# validate-command.sh\n\nCOMMAND_FILE=\"$1\"\n\nif [ ! -f \"$COMMAND_FILE\" ]; then\n  echo \"ERROR: File not found: $COMMAND_FILE\"\n  exit 1\nfi\n\n# Check .md extension\nif [[ ! \"$COMMAND_FILE\" =~ \\.md$ ]]; then\n  echo \"ERROR: File must have .md extension\"\n  exit 1\nfi\n\n# Validate YAML frontmatter if present\nif head -n 1 \"$COMMAND_FILE\" | grep -q \"^---\"; then\n  # Count frontmatter markers\n  MARKERS=$(head -n 50 \"$COMMAND_FILE\" | grep -c \"^---\")\n  if [ \"$MARKERS\" -ne 2 ]; then\n    echo \"ERROR: Invalid YAML frontmatter (need exactly 2 '---' markers)\"\n    exit 1\n  fi\n  echo \"✓ YAML frontmatter syntax valid\"\nfi\n\n# Check for empty file\nif [ ! -s \"$COMMAND_FILE\" ]; then\n  echo \"ERROR: File is empty\"\n  exit 1\nfi\n\necho \"✓ Command file structure valid\"\n```\n\n### Level 2: Frontmatter Field Validation\n\n**What to test:**\n- Field types correct\n- Values in valid ranges\n- Required fields present (if any)\n\n**Validation script:**\n\n```bash\n#!/bin/bash\n# validate-frontmatter.sh\n\nCOMMAND_FILE=\"$1\"\n\n# Extract YAML frontmatter\nFRONTMATTER=$(sed -n '/^---$/,/^---$/p' \"$COMMAND_FILE\" | sed '1d;$d')\n\nif [ -z \"$FRONTMATTER\" ]; then\n  echo \"No frontmatter to validate\"\n  exit 0\nfi\n\n# Check 'model' field if present\nif echo \"$FRONTMATTER\" | grep -q \"^model:\"; then\n  MODEL=$(echo \"$FRONTMATTER\" | grep \"^model:\" | cut -d: -f2 | tr -d ' ')\n  if ! echo \"sonnet opus haiku\" | grep -qw \"$MODEL\"; then\n    echo \"ERROR: Invalid model '$MODEL' (must be sonnet, opus, or haiku)\"\n    exit 1\n  fi\n  echo \"✓ Model field valid: $MODEL\"\nfi\n\n# Check 'allowed-tools' field format\nif echo \"$FRONTMATTER\" | grep -q \"^allowed-tools:\"; then\n  echo \"✓ allowed-tools field present\"\n  # Could add more sophisticated validation here\nfi\n\n# Check 'description' length\nif echo \"$FRONTMATTER\" | grep -q \"^description:\"; then\n  DESC=$(echo \"$FRONTMATTER\" | grep \"^description:\" | cut -d: -f2-)\n  LENGTH=${#DESC}\n  if [ \"$LENGTH\" -gt 80 ]; then\n    echo \"WARNING: Description length $LENGTH (recommend < 60 chars)\"\n  else\n    echo \"✓ Description length acceptable: $LENGTH chars\"\n  fi\nfi\n\necho \"✓ Frontmatter fields valid\"\n```\n\n### Level 3: Manual Command Invocation\n\n**What to test:**\n- Command appears in `/help`\n- Command executes without errors\n- Output is as expected\n\n**Test procedure:**\n\n```bash\n# 1. Start Claude Code\nclaude --debug\n\n# 2. Check command appears in help\n> /help\n# Look for your command in the list\n\n# 3. Invoke command without arguments\n> /my-command\n# Check for reasonable error or behavior\n\n# 4. Invoke with valid arguments\n> /my-command arg1 arg2\n# Verify expected behavior\n\n# 5. Check debug logs\ntail -f ~/.claude/debug-logs/latest\n# Look for errors or warnings\n```\n\n### Level 4: Argument Testing\n\n**What to test:**\n- Positional arguments work ($1, $2, etc.)\n- $ARGUMENTS captures all arguments\n- Missing arguments handled gracefully\n- Invalid arguments detected\n\n**Test matrix:**\n\n| Test Case | Command | Expected Result |\n|-----------|---------|-----------------|\n| No args | `/cmd` | Graceful handling or useful message |\n| One arg | `/cmd arg1` | $1 substituted correctly |\n| Two args | `/cmd arg1 arg2` | $1 and $2 substituted |\n| Extra args | `/cmd a b c d` | All captured or extras ignored appropriately |\n| Special chars | `/cmd \"arg with spaces\"` | Quotes handled correctly |\n| Empty arg | `/cmd \"\"` | Empty string handled |\n\n**Test script:**\n\n```bash\n#!/bin/bash\n# test-command-arguments.sh\n\nCOMMAND=\"$1\"\n\necho \"Testing argument handling for /$COMMAND\"\necho\n\necho \"Test 1: No arguments\"\necho \"  Command: /$COMMAND\"\necho \"  Expected: [describe expected behavior]\"\necho \"  Manual test required\"\necho\n\necho \"Test 2: Single argument\"\necho \"  Command: /$COMMAND test-value\"\necho \"  Expected: 'test-value' appears in output\"\necho \"  Manual test required\"\necho\n\necho \"Test 3: Multiple arguments\"\necho \"  Command: /$COMMAND arg1 arg2 arg3\"\necho \"  Expected: All arguments used appropriately\"\necho \"  Manual test required\"\necho\n\necho \"Test 4: Special characters\"\necho \"  Command: /$COMMAND \\\"value with spaces\\\"\"\necho \"  Expected: Entire phrase captured\"\necho \"  Manual test required\"\n```\n\n### Level 5: File Reference Testing\n\n**What to test:**\n- @ syntax loads file contents\n- Non-existent files handled\n- Large files handled appropriately\n- Multiple file references work\n\n**Test procedure:**\n\n```bash\n# Create test files\necho \"Test content\" > /tmp/test-file.txt\necho \"Second file\" > /tmp/test-file-2.txt\n\n# Test single file reference\n> /my-command /tmp/test-file.txt\n# Verify file content is read\n\n# Test non-existent file\n> /my-command /tmp/nonexistent.txt\n# Verify graceful error handling\n\n# Test multiple files\n> /my-command /tmp/test-file.txt /tmp/test-file-2.txt\n# Verify both files processed\n\n# Test large file\ndd if=/dev/zero of=/tmp/large-file.bin bs=1M count=100\n> /my-command /tmp/large-file.bin\n# Verify reasonable behavior (may truncate or warn)\n\n# Cleanup\nrm /tmp/test-file*.txt /tmp/large-file.bin\n```\n\n### Level 6: Bash Execution Testing\n\n**What to test:**\n- !` commands execute correctly\n- Command output included in prompt\n- Command failures handled\n- Security: only allowed commands run\n\n**Test procedure:**\n\n```bash\n# Create test command with bash execution\ncat > .claude/commands/test-bash.md << 'EOF'\n---\ndescription: Test bash execution\nallowed-tools: Bash(echo:*), Bash(date:*)\n---\n\nCurrent date: !`date`\nTest output: !`echo \"Hello from bash\"`\n\nAnalysis of output above...\nEOF\n\n# Test in Claude Code\n> /test-bash\n# Verify:\n# 1. Date appears correctly\n# 2. Echo output appears\n# 3. No errors in debug logs\n\n# Test with disallowed command (should fail or be blocked)\ncat > .claude/commands/test-forbidden.md << 'EOF'\n---\ndescription: Test forbidden command\nallowed-tools: Bash(echo:*)\n---\n\nTrying forbidden: !`ls -la /`\nEOF\n\n> /test-forbidden\n# Verify: Permission denied or appropriate error\n```\n\n### Level 7: Integration Testing\n\n**What to test:**\n- Commands work with other plugin components\n- Commands interact correctly with each other\n- State management works across invocations\n- Workflow commands execute in sequence\n\n**Test scenarios:**\n\n**Scenario 1: Command + Hook Integration**\n\n```bash\n# Setup: Command that triggers a hook\n# Test: Invoke command, verify hook executes\n\n# Command: .claude/commands/risky-operation.md\n# Hook: PreToolUse that validates the operation\n\n> /risky-operation\n# Verify: Hook executes and validates before command completes\n```\n\n**Scenario 2: Command Sequence**\n\n```bash\n# Setup: Multi-command workflow\n> /workflow-init\n# Verify: State file created\n\n> /workflow-step2\n# Verify: State file read, step 2 executes\n\n> /workflow-complete\n# Verify: State file cleaned up\n```\n\n**Scenario 3: Command + MCP Integration**\n\n```bash\n# Setup: Command uses MCP tools\n# Test: Verify MCP server accessible\n\n> /mcp-command\n# Verify:\n# 1. MCP server starts (if stdio)\n# 2. Tool calls succeed\n# 3. Results included in output\n```\n\n## Automated Testing Approaches\n\n### Command Test Suite\n\nCreate a test suite script:\n\n```bash\n#!/bin/bash\n# test-commands.sh - Command test suite\n\nTEST_DIR=\".claude/commands\"\nFAILED_TESTS=0\n\necho \"Command Test Suite\"\necho \"==================\"\necho\n\nfor cmd_file in \"$TEST_DIR\"/*.md; do\n  cmd_name=$(basename \"$cmd_file\" .md)\n  echo \"Testing: $cmd_name\"\n\n  # Validate structure\n  if ./validate-command.sh \"$cmd_file\"; then\n    echo \"  ✓ Structure valid\"\n  else\n    echo \"  ✗ Structure invalid\"\n    ((FAILED_TESTS++))\n  fi\n\n  # Validate frontmatter\n  if ./validate-frontmatter.sh \"$cmd_file\"; then\n    echo \"  ✓ Frontmatter valid\"\n  else\n    echo \"  ✗ Frontmatter invalid\"\n    ((FAILED_TESTS++))\n  fi\n\n  echo\ndone\n\necho \"==================\"\necho \"Tests complete\"\necho \"Failed: $FAILED_TESTS\"\n\nexit $FAILED_TESTS\n```\n\n### Pre-Commit Hook\n\nValidate commands before committing:\n\n```bash\n#!/bin/bash\n# .git/hooks/pre-commit\n\necho \"Validating commands...\"\n\nCOMMANDS_CHANGED=$(git diff --cached --name-only | grep \"\\.claude/commands/.*\\.md\")\n\nif [ -z \"$COMMANDS_CHANGED\" ]; then\n  echo \"No commands changed\"\n  exit 0\nfi\n\nfor cmd in $COMMANDS_CHANGED; do\n  echo \"Checking: $cmd\"\n\n  if ! ./scripts/validate-command.sh \"$cmd\"; then\n    echo \"ERROR: Command validation failed: $cmd\"\n    exit 1\n  fi\ndone\n\necho \"✓ All commands valid\"\n```\n\n### Continuous Testing\n\nTest commands in CI/CD:\n\n```yaml\n# .github/workflows/test-commands.yml\nname: Test Commands\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n\n      - name: Validate command structure\n        run: |\n          for cmd in .claude/commands/*.md; do\n            echo \"Testing: $cmd\"\n            ./scripts/validate-command.sh \"$cmd\"\n          done\n\n      - name: Validate frontmatter\n        run: |\n          for cmd in .claude/commands/*.md; do\n            ./scripts/validate-frontmatter.sh \"$cmd\"\n          done\n\n      - name: Check for TODOs\n        run: |\n          if grep -r \"TODO\" .claude/commands/; then\n            echo \"ERROR: TODOs found in commands\"\n            exit 1\n          fi\n```\n\n## Edge Case Testing\n\n### Test Edge Cases\n\n**Empty arguments:**\n```bash\n> /cmd \"\"\n> /cmd '' ''\n```\n\n**Special characters:**\n```bash\n> /cmd \"arg with spaces\"\n> /cmd arg-with-dashes\n> /cmd arg_with_underscores\n> /cmd arg/with/slashes\n> /cmd 'arg with \"quotes\"'\n```\n\n**Long arguments:**\n```bash\n> /cmd $(python -c \"print('a' * 10000)\")\n```\n\n**Unusual file paths:**\n```bash\n> /cmd ./file\n> /cmd ../file\n> /cmd ~/file\n> /cmd \"/path with spaces/file\"\n```\n\n**Bash command edge cases:**\n```markdown\n# Commands that might fail\n!`exit 1`\n!`false`\n!`command-that-does-not-exist`\n\n# Commands with special output\n!`echo \"\"`\n!`cat /dev/null`\n!`yes | head -n 1000000`\n```\n\n## Performance Testing\n\n### Response Time Testing\n\n```bash\n#!/bin/bash\n# test-command-performance.sh\n\nCOMMAND=\"$1\"\n\necho \"Testing performance of /$COMMAND\"\necho\n\nfor i in {1..5}; do\n  echo \"Run $i:\"\n  START=$(date +%s%N)\n\n  # Invoke command (manual step - record time)\n  echo \"  Invoke: /$COMMAND\"\n  echo \"  Start time: $START\"\n  echo \"  (Record end time manually)\"\n  echo\ndone\n\necho \"Analyze results:\"\necho \"  - Average response time\"\necho \"  - Variance\"\necho \"  - Acceptable threshold: < 3 seconds for fast commands\"\n```\n\n### Resource Usage Testing\n\n```bash\n# Monitor Claude Code during command execution\n# In terminal 1:\nclaude --debug\n\n# In terminal 2:\nwatch -n 1 'ps aux | grep claude'\n\n# Execute command and observe:\n# - Memory usage\n# - CPU usage\n# - Process count\n```\n\n## User Experience Testing\n\n### Usability Checklist\n\n- [ ] Command name is intuitive\n- [ ] Description is clear in `/help`\n- [ ] Arguments are well-documented\n- [ ] Error messages are helpful\n- [ ] Output is formatted readably\n- [ ] Long-running commands show progress\n- [ ] Results are actionable\n- [ ] Edge cases have good UX\n\n### User Acceptance Testing\n\nRecruit testers:\n\n```markdown\n# Testing Guide for Beta Testers\n\n## Command: /my-new-command\n\n### Test Scenarios\n\n1. **Basic usage:**\n   - Run: `/my-new-command`\n   - Expected: [describe]\n   - Rate clarity: 1-5\n\n2. **With arguments:**\n   - Run: `/my-new-command arg1 arg2`\n   - Expected: [describe]\n   - Rate usefulness: 1-5\n\n3. **Error case:**\n   - Run: `/my-new-command invalid-input`\n   - Expected: Helpful error message\n   - Rate error message: 1-5\n\n### Feedback Questions\n\n1. Was the command easy to understand?\n2. Did the output meet your expectations?\n3. What would you change?\n4. Would you use this command regularly?\n```\n\n## Testing Checklist\n\nBefore releasing a command:\n\n### Structure\n- [ ] File in correct location\n- [ ] Correct .md extension\n- [ ] Valid YAML frontmatter (if present)\n- [ ] Markdown syntax correct\n\n### Functionality\n- [ ] Command appears in `/help`\n- [ ] Description is clear\n- [ ] Command executes without errors\n- [ ] Arguments work as expected\n- [ ] File references work\n- [ ] Bash execution works (if used)\n\n### Edge Cases\n- [ ] Missing arguments handled\n- [ ] Invalid arguments detected\n- [ ] Non-existent files handled\n- [ ] Special characters work\n- [ ] Long inputs handled\n\n### Integration\n- [ ] Works with other commands\n- [ ] Works with hooks (if applicable)\n- [ ] Works with MCP (if applicable)\n- [ ] State management works\n\n### Quality\n- [ ] Performance acceptable\n- [ ] No security issues\n- [ ] Error messages helpful\n- [ ] Output formatted well\n- [ ] Documentation complete\n\n### Distribution\n- [ ] Tested by others\n- [ ] Feedback incorporated\n- [ ] README updated\n- [ ] Examples provided\n\n## Debugging Failed Tests\n\n### Common Issues and Solutions\n\n**Issue: Command not appearing in /help**\n\n```bash\n# Check file location\nls -la .claude/commands/my-command.md\n\n# Check permissions\nchmod 644 .claude/commands/my-command.md\n\n# Check syntax\nhead -n 20 .claude/commands/my-command.md\n\n# Restart Claude Code\nclaude --debug\n```\n\n**Issue: Arguments not substituting**\n\n```bash\n# Verify syntax\ngrep '\\$1' .claude/commands/my-command.md\ngrep '\\$ARGUMENTS' .claude/commands/my-command.md\n\n# Test with simple command first\necho \"Test: \\$1 and \\$2\" > .claude/commands/test-args.md\n```\n\n**Issue: Bash commands not executing**\n\n```bash\n# Check allowed-tools\ngrep \"allowed-tools\" .claude/commands/my-command.md\n\n# Verify command syntax\ngrep '!\\`' .claude/commands/my-command.md\n\n# Test command manually\ndate\necho \"test\"\n```\n\n**Issue: File references not working**\n\n```bash\n# Check @ syntax\ngrep '@' .claude/commands/my-command.md\n\n# Verify file exists\nls -la /path/to/referenced/file\n\n# Check permissions\nchmod 644 /path/to/referenced/file\n```\n\n## Best Practices\n\n1. **Test early, test often**: Validate as you develop\n2. **Automate validation**: Use scripts for repeatable checks\n3. **Test edge cases**: Don't just test the happy path\n4. **Get feedback**: Have others test before wide release\n5. **Document tests**: Keep test scenarios for regression testing\n6. **Monitor in production**: Watch for issues after release\n7. **Iterate**: Improve based on real usage data\n",
        "plugins/plugin-dev/skills/hook-development/SKILL.md": "---\nname: Hook Development\ndescription: This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop hook\", \"validate tool use\", \"implement prompt-based hooks\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"set up event-driven automation\", \"block dangerous commands\", or mentions hook events (PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification). Provides comprehensive guidance for creating and implementing Claude Code plugin hooks with focus on advanced prompt-based hooks API.\nversion: 0.1.0\n---\n\n# Hook Development for Claude Code Plugins\n\n## Overview\n\nHooks are event-driven automation scripts that execute in response to Claude Code events. Use hooks to validate operations, enforce policies, add context, and integrate external tools into workflows.\n\n**Key capabilities:**\n- Validate tool calls before execution (PreToolUse)\n- React to tool results (PostToolUse)\n- Enforce completion standards (Stop, SubagentStop)\n- Load project context (SessionStart)\n- Automate workflows across the development lifecycle\n\n## Hook Types\n\n### Prompt-Based Hooks (Recommended)\n\nUse LLM-driven decision making for context-aware validation:\n\n```json\n{\n  \"type\": \"prompt\",\n  \"prompt\": \"Evaluate if this tool use is appropriate: $TOOL_INPUT\",\n  \"timeout\": 30\n}\n```\n\n**Supported events:** Stop, SubagentStop, UserPromptSubmit, PreToolUse\n\n**Benefits:**\n- Context-aware decisions based on natural language reasoning\n- Flexible evaluation logic without bash scripting\n- Better edge case handling\n- Easier to maintain and extend\n\n### Command Hooks\n\nExecute bash commands for deterministic checks:\n\n```json\n{\n  \"type\": \"command\",\n  \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\",\n  \"timeout\": 60\n}\n```\n\n**Use for:**\n- Fast deterministic validations\n- File system operations\n- External tool integrations\n- Performance-critical checks\n\n## Hook Configuration Formats\n\n### Plugin hooks.json Format\n\n**For plugin hooks** in `hooks/hooks.json`, use wrapper format:\n\n```json\n{\n  \"description\": \"Brief explanation of hooks (optional)\",\n  \"hooks\": {\n    \"PreToolUse\": [...],\n    \"Stop\": [...],\n    \"SessionStart\": [...]\n  }\n}\n```\n\n**Key points:**\n- `description` field is optional\n- `hooks` field is required wrapper containing actual hook events\n- This is the **plugin-specific format**\n\n**Example:**\n```json\n{\n  \"description\": \"Validation hooks for code quality\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/validate.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Settings Format (Direct)\n\n**For user settings** in `.claude/settings.json`, use direct format:\n\n```json\n{\n  \"PreToolUse\": [...],\n  \"Stop\": [...],\n  \"SessionStart\": [...]\n}\n```\n\n**Key points:**\n- No wrapper - events directly at top level\n- No description field\n- This is the **settings format**\n\n**Important:** The examples below show the hook event structure that goes inside either format. For plugin hooks.json, wrap these in `{\"hooks\": {...}}`.\n\n## Hook Events\n\n### PreToolUse\n\nExecute before any tool runs. Use to approve, deny, or modify tool calls.\n\n**Example (prompt-based):**\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate file write safety. Check: system paths, credentials, path traversal, sensitive content. Return 'approve' or 'deny'.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Output for PreToolUse:**\n```json\n{\n  \"hookSpecificOutput\": {\n    \"permissionDecision\": \"allow|deny|ask\",\n    \"updatedInput\": {\"field\": \"modified_value\"}\n  },\n  \"systemMessage\": \"Explanation for Claude\"\n}\n```\n\n### PostToolUse\n\nExecute after tool completes. Use to react to results, provide feedback, or log.\n\n**Example:**\n```json\n{\n  \"PostToolUse\": [\n    {\n      \"matcher\": \"Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Analyze edit result for potential issues: syntax errors, security vulnerabilities, breaking changes. Provide feedback.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Output behavior:**\n- Exit 0: stdout shown in transcript\n- Exit 2: stderr fed back to Claude\n- systemMessage included in context\n\n### Stop\n\nExecute when main agent considers stopping. Use to validate completeness.\n\n**Example:**\n```json\n{\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Verify task completion: tests run, build succeeded, questions answered. Return 'approve' to stop or 'block' with reason to continue.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Decision output:**\n```json\n{\n  \"decision\": \"approve|block\",\n  \"reason\": \"Explanation\",\n  \"systemMessage\": \"Additional context\"\n}\n```\n\n### SubagentStop\n\nExecute when subagent considers stopping. Use to ensure subagent completed its task.\n\nSimilar to Stop hook, but for subagents.\n\n### UserPromptSubmit\n\nExecute when user submits a prompt. Use to add context, validate, or block prompts.\n\n**Example:**\n```json\n{\n  \"UserPromptSubmit\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Check if prompt requires security guidance. If discussing auth, permissions, or API security, return relevant warnings.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n### SessionStart\n\nExecute when Claude Code session begins. Use to load context and set environment.\n\n**Example:**\n```json\n{\n  \"SessionStart\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/load-context.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Special capability:** Persist environment variables using `$CLAUDE_ENV_FILE`:\n```bash\necho \"export PROJECT_TYPE=nodejs\" >> \"$CLAUDE_ENV_FILE\"\n```\n\nSee `examples/load-context.sh` for complete example.\n\n### SessionEnd\n\nExecute when session ends. Use for cleanup, logging, and state preservation.\n\n### PreCompact\n\nExecute before context compaction. Use to add critical information to preserve.\n\n### Notification\n\nExecute when Claude sends notifications. Use to react to user notifications.\n\n## Hook Output Format\n\n### Standard Output (All Hooks)\n\n```json\n{\n  \"continue\": true,\n  \"suppressOutput\": false,\n  \"systemMessage\": \"Message for Claude\"\n}\n```\n\n- `continue`: If false, halt processing (default true)\n- `suppressOutput`: Hide output from transcript (default false)\n- `systemMessage`: Message shown to Claude\n\n### Exit Codes\n\n- `0` - Success (stdout shown in transcript)\n- `2` - Blocking error (stderr fed back to Claude)\n- Other - Non-blocking error\n\n## Hook Input Format\n\nAll hooks receive JSON via stdin with common fields:\n\n```json\n{\n  \"session_id\": \"abc123\",\n  \"transcript_path\": \"/path/to/transcript.txt\",\n  \"cwd\": \"/current/working/dir\",\n  \"permission_mode\": \"ask|allow\",\n  \"hook_event_name\": \"PreToolUse\"\n}\n```\n\n**Event-specific fields:**\n\n- **PreToolUse/PostToolUse:** `tool_name`, `tool_input`, `tool_result`\n- **UserPromptSubmit:** `user_prompt`\n- **Stop/SubagentStop:** `reason`\n\nAccess fields in prompts using `$TOOL_INPUT`, `$TOOL_RESULT`, `$USER_PROMPT`, etc.\n\n## Environment Variables\n\nAvailable in all command hooks:\n\n- `$CLAUDE_PROJECT_DIR` - Project root path\n- `$CLAUDE_PLUGIN_ROOT` - Plugin directory (use for portable paths)\n- `$CLAUDE_ENV_FILE` - SessionStart only: persist env vars here\n- `$CLAUDE_CODE_REMOTE` - Set if running in remote context\n\n**Always use ${CLAUDE_PLUGIN_ROOT} in hook commands for portability:**\n\n```json\n{\n  \"type\": \"command\",\n  \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\"\n}\n```\n\n## Plugin Hook Configuration\n\nIn plugins, define hooks in `hooks/hooks.json`:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate file write safety\"\n        }\n      ]\n    }\n  ],\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Verify task completion\"\n        }\n      ]\n    }\n  ],\n  \"SessionStart\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/load-context.sh\",\n          \"timeout\": 10\n        }\n      ]\n    }\n  ]\n}\n```\n\nPlugin hooks merge with user's hooks and run in parallel.\n\n## Matchers\n\n### Tool Name Matching\n\n**Exact match:**\n```json\n\"matcher\": \"Write\"\n```\n\n**Multiple tools:**\n```json\n\"matcher\": \"Read|Write|Edit\"\n```\n\n**Wildcard (all tools):**\n```json\n\"matcher\": \"*\"\n```\n\n**Regex patterns:**\n```json\n\"matcher\": \"mcp__.*__delete.*\"  // All MCP delete tools\n```\n\n**Note:** Matchers are case-sensitive.\n\n### Common Patterns\n\n```json\n// All MCP tools\n\"matcher\": \"mcp__.*\"\n\n// Specific plugin's MCP tools\n\"matcher\": \"mcp__plugin_asana_.*\"\n\n// All file operations\n\"matcher\": \"Read|Write|Edit\"\n\n// Bash commands only\n\"matcher\": \"Bash\"\n```\n\n## Security Best Practices\n\n### Input Validation\n\nAlways validate inputs in command hooks:\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\ninput=$(cat)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\n\n# Validate tool name format\nif [[ ! \"$tool_name\" =~ ^[a-zA-Z0-9_]+$ ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Invalid tool name\"}' >&2\n  exit 2\nfi\n```\n\n### Path Safety\n\nCheck for path traversal and sensitive files:\n\n```bash\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\n\n# Deny path traversal\nif [[ \"$file_path\" == *\"..\"* ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Path traversal detected\"}' >&2\n  exit 2\nfi\n\n# Deny sensitive files\nif [[ \"$file_path\" == *\".env\"* ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Sensitive file\"}' >&2\n  exit 2\nfi\n```\n\nSee `examples/validate-write.sh` and `examples/validate-bash.sh` for complete examples.\n\n### Quote All Variables\n\n```bash\n# GOOD: Quoted\necho \"$file_path\"\ncd \"$CLAUDE_PROJECT_DIR\"\n\n# BAD: Unquoted (injection risk)\necho $file_path\ncd $CLAUDE_PROJECT_DIR\n```\n\n### Set Appropriate Timeouts\n\n```json\n{\n  \"type\": \"command\",\n  \"command\": \"bash script.sh\",\n  \"timeout\": 10\n}\n```\n\n**Defaults:** Command hooks (60s), Prompt hooks (30s)\n\n## Performance Considerations\n\n### Parallel Execution\n\nAll matching hooks run **in parallel**:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write\",\n      \"hooks\": [\n        {\"type\": \"command\", \"command\": \"check1.sh\"},  // Parallel\n        {\"type\": \"command\", \"command\": \"check2.sh\"},  // Parallel\n        {\"type\": \"prompt\", \"prompt\": \"Validate...\"}   // Parallel\n      ]\n    }\n  ]\n}\n```\n\n**Design implications:**\n- Hooks don't see each other's output\n- Non-deterministic ordering\n- Design for independence\n\n### Optimization\n\n1. Use command hooks for quick deterministic checks\n2. Use prompt hooks for complex reasoning\n3. Cache validation results in temp files\n4. Minimize I/O in hot paths\n\n## Temporarily Active Hooks\n\nCreate hooks that activate conditionally by checking for a flag file or configuration:\n\n**Pattern: Flag file activation**\n```bash\n#!/bin/bash\n# Only active when flag file exists\nFLAG_FILE=\"$CLAUDE_PROJECT_DIR/.enable-strict-validation\"\n\nif [ ! -f \"$FLAG_FILE\" ]; then\n  # Flag not present, skip validation\n  exit 0\nfi\n\n# Flag present, run validation\ninput=$(cat)\n# ... validation logic ...\n```\n\n**Pattern: Configuration-based activation**\n```bash\n#!/bin/bash\n# Check configuration for activation\nCONFIG_FILE=\"$CLAUDE_PROJECT_DIR/.claude/plugin-config.json\"\n\nif [ -f \"$CONFIG_FILE\" ]; then\n  enabled=$(jq -r '.strictMode // false' \"$CONFIG_FILE\")\n  if [ \"$enabled\" != \"true\" ]; then\n    exit 0  # Not enabled, skip\n  fi\nfi\n\n# Enabled, run hook logic\ninput=$(cat)\n# ... hook logic ...\n```\n\n**Use cases:**\n- Enable strict validation only when needed\n- Temporary debugging hooks\n- Project-specific hook behavior\n- Feature flags for hooks\n\n**Best practice:** Document activation mechanism in plugin README so users know how to enable/disable temporary hooks.\n\n## Hook Lifecycle and Limitations\n\n### Hooks Load at Session Start\n\n**Important:** Hooks are loaded when Claude Code session starts. Changes to hook configuration require restarting Claude Code.\n\n**Cannot hot-swap hooks:**\n- Editing `hooks/hooks.json` won't affect current session\n- Adding new hook scripts won't be recognized\n- Changing hook commands/prompts won't update\n- Must restart Claude Code: exit and run `claude` again\n\n**To test hook changes:**\n1. Edit hook configuration or scripts\n2. Exit Claude Code session\n3. Restart: `claude` or `cc`\n4. New hook configuration loads\n5. Test hooks with `claude --debug`\n\n### Hook Validation at Startup\n\nHooks are validated when Claude Code starts:\n- Invalid JSON in hooks.json causes loading failure\n- Missing scripts cause warnings\n- Syntax errors reported in debug mode\n\nUse `/hooks` command to review loaded hooks in current session.\n\n## Debugging Hooks\n\n### Enable Debug Mode\n\n```bash\nclaude --debug\n```\n\nLook for hook registration, execution logs, input/output JSON, and timing information.\n\n### Test Hook Scripts\n\nTest command hooks directly:\n\n```bash\necho '{\"tool_name\": \"Write\", \"tool_input\": {\"file_path\": \"/test\"}}' | \\\n  bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\n\necho \"Exit code: $?\"\n```\n\n### Validate JSON Output\n\nEnsure hooks output valid JSON:\n\n```bash\noutput=$(./your-hook.sh < test-input.json)\necho \"$output\" | jq .\n```\n\n## Quick Reference\n\n### Hook Events Summary\n\n| Event | When | Use For |\n|-------|------|---------|\n| PreToolUse | Before tool | Validation, modification |\n| PostToolUse | After tool | Feedback, logging |\n| UserPromptSubmit | User input | Context, validation |\n| Stop | Agent stopping | Completeness check |\n| SubagentStop | Subagent done | Task validation |\n| SessionStart | Session begins | Context loading |\n| SessionEnd | Session ends | Cleanup, logging |\n| PreCompact | Before compact | Preserve context |\n| Notification | User notified | Logging, reactions |\n\n### Best Practices\n\n**DO:**\n- ✅ Use prompt-based hooks for complex logic\n- ✅ Use ${CLAUDE_PLUGIN_ROOT} for portability\n- ✅ Validate all inputs in command hooks\n- ✅ Quote all bash variables\n- ✅ Set appropriate timeouts\n- ✅ Return structured JSON output\n- ✅ Test hooks thoroughly\n\n**DON'T:**\n- ❌ Use hardcoded paths\n- ❌ Trust user input without validation\n- ❌ Create long-running hooks\n- ❌ Rely on hook execution order\n- ❌ Modify global state unpredictably\n- ❌ Log sensitive information\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed patterns and advanced techniques, consult:\n\n- **`references/patterns.md`** - Common hook patterns (8+ proven patterns)\n- **`references/migration.md`** - Migrating from basic to advanced hooks\n- **`references/advanced.md`** - Advanced use cases and techniques\n\n### Example Hook Scripts\n\nWorking examples in `examples/`:\n\n- **`validate-write.sh`** - File write validation example\n- **`validate-bash.sh`** - Bash command validation example\n- **`load-context.sh`** - SessionStart context loading example\n\n### Utility Scripts\n\nDevelopment tools in `scripts/`:\n\n- **`validate-hook-schema.sh`** - Validate hooks.json structure and syntax\n- **`test-hook.sh`** - Test hooks with sample input before deployment\n- **`hook-linter.sh`** - Check hook scripts for common issues and best practices\n\n### External Resources\n\n- **Official Docs**: https://docs.claude.com/en/docs/claude-code/hooks\n- **Examples**: See security-guidance plugin in marketplace\n- **Testing**: Use `claude --debug` for detailed logs\n- **Validation**: Use `jq` to validate hook JSON output\n\n## Implementation Workflow\n\nTo implement hooks in a plugin:\n\n1. Identify events to hook into (PreToolUse, Stop, SessionStart, etc.)\n2. Decide between prompt-based (flexible) or command (deterministic) hooks\n3. Write hook configuration in `hooks/hooks.json`\n4. For command hooks, create hook scripts\n5. Use ${CLAUDE_PLUGIN_ROOT} for all file references\n6. Validate configuration with `scripts/validate-hook-schema.sh hooks/hooks.json`\n7. Test hooks with `scripts/test-hook.sh` before deployment\n8. Test in Claude Code with `claude --debug`\n9. Document hooks in plugin README\n\nFocus on prompt-based hooks for most use cases. Reserve command hooks for performance-critical or deterministic checks.\n",
        "plugins/plugin-dev/skills/hook-development/references/advanced.md": "# Advanced Hook Use Cases\n\nThis reference covers advanced hook patterns and techniques for sophisticated automation workflows.\n\n## Multi-Stage Validation\n\nCombine command and prompt hooks for layered validation:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/quick-check.sh\",\n          \"timeout\": 5\n        },\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Deep analysis of bash command: $TOOL_INPUT\",\n          \"timeout\": 15\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use case:** Fast deterministic checks followed by intelligent analysis\n\n**Example quick-check.sh:**\n```bash\n#!/bin/bash\ninput=$(cat)\ncommand=$(echo \"$input\" | jq -r '.tool_input.command')\n\n# Immediate approval for safe commands\nif [[ \"$command\" =~ ^(ls|pwd|echo|date|whoami)$ ]]; then\n  exit 0\nfi\n\n# Let prompt hook handle complex cases\nexit 0\n```\n\nThe command hook quickly approves obviously safe commands, while the prompt hook analyzes everything else.\n\n## Conditional Hook Execution\n\nExecute hooks based on environment or context:\n\n```bash\n#!/bin/bash\n# Only run in CI environment\nif [ -z \"$CI\" ]; then\n  echo '{\"continue\": true}' # Skip in non-CI\n  exit 0\nfi\n\n# Run validation logic in CI\ninput=$(cat)\n# ... validation code ...\n```\n\n**Use cases:**\n- Different behavior in CI vs local development\n- Project-specific validation\n- User-specific rules\n\n**Example: Skip certain checks for trusted users:**\n```bash\n#!/bin/bash\n# Skip detailed checks for admin users\nif [ \"$USER\" = \"admin\" ]; then\n  exit 0\nfi\n\n# Full validation for other users\ninput=$(cat)\n# ... validation code ...\n```\n\n## Hook Chaining via State\n\nShare state between hooks using temporary files:\n\n```bash\n# Hook 1: Analyze and save state\n#!/bin/bash\ninput=$(cat)\ncommand=$(echo \"$input\" | jq -r '.tool_input.command')\n\n# Analyze command\nrisk_level=$(calculate_risk \"$command\")\necho \"$risk_level\" > /tmp/hook-state-$$\n\nexit 0\n```\n\n```bash\n# Hook 2: Use saved state\n#!/bin/bash\nrisk_level=$(cat /tmp/hook-state-$$ 2>/dev/null || echo \"unknown\")\n\nif [ \"$risk_level\" = \"high\" ]; then\n  echo \"High risk operation detected\" >&2\n  exit 2\nfi\n```\n\n**Important:** This only works for sequential hook events (e.g., PreToolUse then PostToolUse), not parallel hooks.\n\n## Dynamic Hook Configuration\n\nModify hook behavior based on project configuration:\n\n```bash\n#!/bin/bash\ncd \"$CLAUDE_PROJECT_DIR\" || exit 1\n\n# Read project-specific config\nif [ -f \".claude-hooks-config.json\" ]; then\n  strict_mode=$(jq -r '.strict_mode' .claude-hooks-config.json)\n\n  if [ \"$strict_mode\" = \"true\" ]; then\n    # Apply strict validation\n    # ...\n  else\n    # Apply lenient validation\n    # ...\n  fi\nfi\n```\n\n**Example .claude-hooks-config.json:**\n```json\n{\n  \"strict_mode\": true,\n  \"allowed_commands\": [\"ls\", \"pwd\", \"grep\"],\n  \"forbidden_paths\": [\"/etc\", \"/sys\"]\n}\n```\n\n## Context-Aware Prompt Hooks\n\nUse transcript and session context for intelligent decisions:\n\n```json\n{\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Review the full transcript at $TRANSCRIPT_PATH. Check: 1) Were tests run after code changes? 2) Did the build succeed? 3) Were all user questions answered? 4) Is there any unfinished work? Return 'approve' only if everything is complete.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\nThe LLM can read the transcript file and make context-aware decisions.\n\n## Performance Optimization\n\n### Caching Validation Results\n\n```bash\n#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\ncache_key=$(echo -n \"$file_path\" | md5sum | cut -d' ' -f1)\ncache_file=\"/tmp/hook-cache-$cache_key\"\n\n# Check cache\nif [ -f \"$cache_file\" ]; then\n  cache_age=$(($(date +%s) - $(stat -f%m \"$cache_file\" 2>/dev/null || stat -c%Y \"$cache_file\")))\n  if [ \"$cache_age\" -lt 300 ]; then  # 5 minute cache\n    cat \"$cache_file\"\n    exit 0\n  fi\nfi\n\n# Perform validation\nresult='{\"decision\": \"approve\"}'\n\n# Cache result\necho \"$result\" > \"$cache_file\"\necho \"$result\"\n```\n\n### Parallel Execution Optimization\n\nSince hooks run in parallel, design them to be independent:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash check-size.sh\",      // Independent\n          \"timeout\": 2\n        },\n        {\n          \"type\": \"command\",\n          \"command\": \"bash check-path.sh\",      // Independent\n          \"timeout\": 2\n        },\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Check content safety\",     // Independent\n          \"timeout\": 10\n        }\n      ]\n    }\n  ]\n}\n```\n\nAll three hooks run simultaneously, reducing total latency.\n\n## Cross-Event Workflows\n\nCoordinate hooks across different events:\n\n**SessionStart - Set up tracking:**\n```bash\n#!/bin/bash\n# Initialize session tracking\necho \"0\" > /tmp/test-count-$$\necho \"0\" > /tmp/build-count-$$\n```\n\n**PostToolUse - Track events:**\n```bash\n#!/bin/bash\ninput=$(cat)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\n\nif [ \"$tool_name\" = \"Bash\" ]; then\n  command=$(echo \"$input\" | jq -r '.tool_result')\n  if [[ \"$command\" == *\"test\"* ]]; then\n    count=$(cat /tmp/test-count-$$ 2>/dev/null || echo \"0\")\n    echo $((count + 1)) > /tmp/test-count-$$\n  fi\nfi\n```\n\n**Stop - Verify based on tracking:**\n```bash\n#!/bin/bash\ntest_count=$(cat /tmp/test-count-$$ 2>/dev/null || echo \"0\")\n\nif [ \"$test_count\" -eq 0 ]; then\n  echo '{\"decision\": \"block\", \"reason\": \"No tests were run\"}' >&2\n  exit 2\nfi\n```\n\n## Integration with External Systems\n\n### Slack Notifications\n\n```bash\n#!/bin/bash\ninput=$(cat)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\ndecision=\"blocked\"\n\n# Send notification to Slack\ncurl -X POST \"$SLACK_WEBHOOK\" \\\n  -H 'Content-Type: application/json' \\\n  -d \"{\\\"text\\\": \\\"Hook ${decision} ${tool_name} operation\\\"}\" \\\n  2>/dev/null\n\necho '{\"decision\": \"deny\"}' >&2\nexit 2\n```\n\n### Database Logging\n\n```bash\n#!/bin/bash\ninput=$(cat)\n\n# Log to database\npsql \"$DATABASE_URL\" -c \"INSERT INTO hook_logs (event, data) VALUES ('PreToolUse', '$input')\" \\\n  2>/dev/null\n\nexit 0\n```\n\n### Metrics Collection\n\n```bash\n#!/bin/bash\ninput=$(cat)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\n\n# Send metrics to monitoring system\necho \"hook.pretooluse.${tool_name}:1|c\" | nc -u -w1 statsd.local 8125\n\nexit 0\n```\n\n## Security Patterns\n\n### Rate Limiting\n\n```bash\n#!/bin/bash\ninput=$(cat)\ncommand=$(echo \"$input\" | jq -r '.tool_input.command')\n\n# Track command frequency\nrate_file=\"/tmp/hook-rate-$$\"\ncurrent_minute=$(date +%Y%m%d%H%M)\n\nif [ -f \"$rate_file\" ]; then\n  last_minute=$(head -1 \"$rate_file\")\n  count=$(tail -1 \"$rate_file\")\n\n  if [ \"$current_minute\" = \"$last_minute\" ]; then\n    if [ \"$count\" -gt 10 ]; then\n      echo '{\"decision\": \"deny\", \"reason\": \"Rate limit exceeded\"}' >&2\n      exit 2\n    fi\n    count=$((count + 1))\n  else\n    count=1\n  fi\nelse\n  count=1\nfi\n\necho \"$current_minute\" > \"$rate_file\"\necho \"$count\" >> \"$rate_file\"\n\nexit 0\n```\n\n### Audit Logging\n\n```bash\n#!/bin/bash\ninput=$(cat)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\ntimestamp=$(date -Iseconds)\n\n# Append to audit log\necho \"$timestamp | $USER | $tool_name | $input\" >> ~/.claude/audit.log\n\nexit 0\n```\n\n### Secret Detection\n\n```bash\n#!/bin/bash\ninput=$(cat)\ncontent=$(echo \"$input\" | jq -r '.tool_input.content')\n\n# Check for common secret patterns\nif echo \"$content\" | grep -qE \"(api[_-]?key|password|secret|token).{0,20}['\\\"]?[A-Za-z0-9]{20,}\"; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Potential secret detected in content\"}' >&2\n  exit 2\nfi\n\nexit 0\n```\n\n## Testing Advanced Hooks\n\n### Unit Testing Hook Scripts\n\n```bash\n# test-hook.sh\n#!/bin/bash\n\n# Test 1: Approve safe command\nresult=$(echo '{\"tool_input\": {\"command\": \"ls\"}}' | bash validate-bash.sh)\nif [ $? -eq 0 ]; then\n  echo \"✓ Test 1 passed\"\nelse\n  echo \"✗ Test 1 failed\"\nfi\n\n# Test 2: Block dangerous command\nresult=$(echo '{\"tool_input\": {\"command\": \"rm -rf /\"}}' | bash validate-bash.sh)\nif [ $? -eq 2 ]; then\n  echo \"✓ Test 2 passed\"\nelse\n  echo \"✗ Test 2 failed\"\nfi\n```\n\n### Integration Testing\n\nCreate test scenarios that exercise the full hook workflow:\n\n```bash\n# integration-test.sh\n#!/bin/bash\n\n# Set up test environment\nexport CLAUDE_PROJECT_DIR=\"/tmp/test-project\"\nexport CLAUDE_PLUGIN_ROOT=\"$(pwd)\"\nmkdir -p \"$CLAUDE_PROJECT_DIR\"\n\n# Test SessionStart hook\necho '{}' | bash hooks/session-start.sh\nif [ -f \"/tmp/session-initialized\" ]; then\n  echo \"✓ SessionStart hook works\"\nelse\n  echo \"✗ SessionStart hook failed\"\nfi\n\n# Clean up\nrm -rf \"$CLAUDE_PROJECT_DIR\"\n```\n\n## Best Practices for Advanced Hooks\n\n1. **Keep hooks independent**: Don't rely on execution order\n2. **Use timeouts**: Set appropriate limits for each hook type\n3. **Handle errors gracefully**: Provide clear error messages\n4. **Document complexity**: Explain advanced patterns in README\n5. **Test thoroughly**: Cover edge cases and failure modes\n6. **Monitor performance**: Track hook execution time\n7. **Version configuration**: Use version control for hook configs\n8. **Provide escape hatches**: Allow users to bypass hooks when needed\n\n## Common Pitfalls\n\n### ❌ Assuming Hook Order\n\n```bash\n# BAD: Assumes hooks run in specific order\n# Hook 1 saves state, Hook 2 reads it\n# This can fail because hooks run in parallel!\n```\n\n### ❌ Long-Running Hooks\n\n```bash\n# BAD: Hook takes 2 minutes to run\nsleep 120\n# This will timeout and block the workflow\n```\n\n### ❌ Uncaught Exceptions\n\n```bash\n# BAD: Script crashes on unexpected input\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\ncat \"$file_path\"  # Fails if file doesn't exist\n```\n\n### ✅ Proper Error Handling\n\n```bash\n# GOOD: Handles errors gracefully\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\nif [ ! -f \"$file_path\" ]; then\n  echo '{\"continue\": true, \"systemMessage\": \"File not found, skipping check\"}' >&2\n  exit 0\nfi\n```\n\n## Conclusion\n\nAdvanced hook patterns enable sophisticated automation while maintaining reliability and performance. Use these techniques when basic hooks are insufficient, but always prioritize simplicity and maintainability.\n",
        "plugins/plugin-dev/skills/hook-development/references/migration.md": "# Migrating from Basic to Advanced Hooks\n\nThis guide shows how to migrate from basic command hooks to advanced prompt-based hooks for better maintainability and flexibility.\n\n## Why Migrate?\n\nPrompt-based hooks offer several advantages:\n\n- **Natural language reasoning**: LLM understands context and intent\n- **Better edge case handling**: Adapts to unexpected scenarios\n- **No bash scripting required**: Simpler to write and maintain\n- **More flexible validation**: Can handle complex logic without coding\n\n## Migration Example: Bash Command Validation\n\n### Before (Basic Command Hook)\n\n**Configuration:**\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash validate-bash.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Script (validate-bash.sh):**\n```bash\n#!/bin/bash\ninput=$(cat)\ncommand=$(echo \"$input\" | jq -r '.tool_input.command')\n\n# Hard-coded validation logic\nif [[ \"$command\" == *\"rm -rf\"* ]]; then\n  echo \"Dangerous command detected\" >&2\n  exit 2\nfi\n```\n\n**Problems:**\n- Only checks for exact \"rm -rf\" pattern\n- Doesn't catch variations like `rm -fr` or `rm -r -f`\n- Misses other dangerous commands (`dd`, `mkfs`, etc.)\n- No context awareness\n- Requires bash scripting knowledge\n\n### After (Advanced Prompt Hook)\n\n**Configuration:**\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Command: $TOOL_INPUT.command. Analyze for: 1) Destructive operations (rm -rf, dd, mkfs, etc) 2) Privilege escalation (sudo) 3) Network operations without user consent. Return 'approve' or 'deny' with explanation.\",\n          \"timeout\": 15\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Benefits:**\n- Catches all variations and patterns\n- Understands intent, not just literal strings\n- No script file needed\n- Easy to extend with new criteria\n- Context-aware decisions\n- Natural language explanation in denial\n\n## Migration Example: File Write Validation\n\n### Before (Basic Command Hook)\n\n**Configuration:**\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash validate-write.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Script (validate-write.sh):**\n```bash\n#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\n\n# Check for path traversal\nif [[ \"$file_path\" == *\"..\"* ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Path traversal detected\"}' >&2\n  exit 2\nfi\n\n# Check for system paths\nif [[ \"$file_path\" == \"/etc/\"* ]] || [[ \"$file_path\" == \"/sys/\"* ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"System file\"}' >&2\n  exit 2\nfi\n```\n\n**Problems:**\n- Hard-coded path patterns\n- Doesn't understand symlinks\n- Missing edge cases (e.g., `/etc` vs `/etc/`)\n- No consideration of file content\n\n### After (Advanced Prompt Hook)\n\n**Configuration:**\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"File path: $TOOL_INPUT.file_path. Content preview: $TOOL_INPUT.content (first 200 chars). Verify: 1) Not system directories (/etc, /sys, /usr) 2) Not credentials (.env, tokens, secrets) 3) No path traversal 4) Content doesn't expose secrets. Return 'approve' or 'deny'.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Benefits:**\n- Context-aware (considers content too)\n- Handles symlinks and edge cases\n- Natural understanding of \"system directories\"\n- Can detect secrets in content\n- Easy to extend criteria\n\n## When to Keep Command Hooks\n\nCommand hooks still have their place:\n\n### 1. Deterministic Performance Checks\n\n```bash\n#!/bin/bash\n# Check file size quickly\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\nsize=$(stat -f%z \"$file_path\" 2>/dev/null || stat -c%s \"$file_path\" 2>/dev/null)\n\nif [ \"$size\" -gt 10000000 ]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"File too large\"}' >&2\n  exit 2\nfi\n```\n\n**Use command hooks when:** Validation is purely mathematical or deterministic.\n\n### 2. External Tool Integration\n\n```bash\n#!/bin/bash\n# Run security scanner\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\nscan_result=$(security-scanner \"$file_path\")\n\nif [ \"$?\" -ne 0 ]; then\n  echo \"Security scan failed: $scan_result\" >&2\n  exit 2\nfi\n```\n\n**Use command hooks when:** Integrating with external tools that provide yes/no answers.\n\n### 3. Very Fast Checks (< 50ms)\n\n```bash\n#!/bin/bash\n# Quick regex check\ncommand=$(echo \"$input\" | jq -r '.tool_input.command')\n\nif [[ \"$command\" =~ ^(ls|pwd|echo)$ ]]; then\n  exit 0  # Safe commands\nfi\n```\n\n**Use command hooks when:** Performance is critical and logic is simple.\n\n## Hybrid Approach\n\nCombine both for multi-stage validation:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/quick-check.sh\",\n          \"timeout\": 5\n        },\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Deep analysis of bash command: $TOOL_INPUT\",\n          \"timeout\": 15\n        }\n      ]\n    }\n  ]\n}\n```\n\nThe command hook does fast deterministic checks, while the prompt hook handles complex reasoning.\n\n## Migration Checklist\n\nWhen migrating hooks:\n\n- [ ] Identify the validation logic in the command hook\n- [ ] Convert hard-coded patterns to natural language criteria\n- [ ] Test with edge cases the old hook missed\n- [ ] Verify LLM understands the intent\n- [ ] Set appropriate timeout (usually 15-30s for prompt hooks)\n- [ ] Document the new hook in README\n- [ ] Remove or archive old script files\n\n## Migration Tips\n\n1. **Start with one hook**: Don't migrate everything at once\n2. **Test thoroughly**: Verify prompt hook catches what command hook caught\n3. **Look for improvements**: Use migration as opportunity to enhance validation\n4. **Keep scripts for reference**: Archive old scripts in case you need to reference the logic\n5. **Document reasoning**: Explain why prompt hook is better in README\n\n## Complete Migration Example\n\n### Original Plugin Structure\n\n```\nmy-plugin/\n├── .claude-plugin/plugin.json\n├── hooks/hooks.json\n└── scripts/\n    ├── validate-bash.sh\n    ├── validate-write.sh\n    └── check-tests.sh\n```\n\n### After Migration\n\n```\nmy-plugin/\n├── .claude-plugin/plugin.json\n├── hooks/hooks.json      # Now uses prompt hooks\n└── scripts/              # Archive or delete\n    └── archive/\n        ├── validate-bash.sh\n        ├── validate-write.sh\n        └── check-tests.sh\n```\n\n### Updated hooks.json\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate bash command safety: destructive ops, privilege escalation, network access\"\n        }\n      ]\n    },\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate file write safety: system paths, credentials, path traversal, content secrets\"\n        }\n      ]\n    }\n  ],\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Verify tests were run if code was modified\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Result:** Simpler, more maintainable, more powerful.\n\n## Common Migration Patterns\n\n### Pattern: String Contains → Natural Language\n\n**Before:**\n```bash\nif [[ \"$command\" == *\"sudo\"* ]]; then\n  echo \"Privilege escalation\" >&2\n  exit 2\nfi\n```\n\n**After:**\n```\n\"Check for privilege escalation (sudo, su, etc)\"\n```\n\n### Pattern: Regex → Intent\n\n**Before:**\n```bash\nif [[ \"$file\" =~ \\.(env|secret|key|token)$ ]]; then\n  echo \"Credential file\" >&2\n  exit 2\nfi\n```\n\n**After:**\n```\n\"Verify not writing to credential files (.env, secrets, keys, tokens)\"\n```\n\n### Pattern: Multiple Conditions → Criteria List\n\n**Before:**\n```bash\nif [ condition1 ] || [ condition2 ] || [ condition3 ]; then\n  echo \"Invalid\" >&2\n  exit 2\nfi\n```\n\n**After:**\n```\n\"Check: 1) condition1 2) condition2 3) condition3. Deny if any fail.\"\n```\n\n## Conclusion\n\nMigrating to prompt-based hooks makes plugins more maintainable, flexible, and powerful. Reserve command hooks for deterministic checks and external tool integration.\n",
        "plugins/plugin-dev/skills/hook-development/references/patterns.md": "# Common Hook Patterns\n\nThis reference provides common, proven patterns for implementing Claude Code hooks. Use these patterns as starting points for typical hook use cases.\n\n## Pattern 1: Security Validation\n\nBlock dangerous file writes using prompt-based hooks:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"File path: $TOOL_INPUT.file_path. Verify: 1) Not in /etc or system directories 2) Not .env or credentials 3) Path doesn't contain '..' traversal. Return 'approve' or 'deny'.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** Preventing writes to sensitive files or system directories.\n\n## Pattern 2: Test Enforcement\n\nEnsure tests run before stopping:\n\n```json\n{\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Review transcript. If code was modified (Write/Edit tools used), verify tests were executed. If no tests were run, block with reason 'Tests must be run after code changes'.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** Enforcing quality standards and preventing incomplete work.\n\n## Pattern 3: Context Loading\n\nLoad project-specific context at session start:\n\n```json\n{\n  \"SessionStart\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/load-context.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Example script (load-context.sh):**\n```bash\n#!/bin/bash\ncd \"$CLAUDE_PROJECT_DIR\" || exit 1\n\n# Detect project type\nif [ -f \"package.json\" ]; then\n  echo \"📦 Node.js project detected\"\n  echo \"export PROJECT_TYPE=nodejs\" >> \"$CLAUDE_ENV_FILE\"\nelif [ -f \"Cargo.toml\" ]; then\n  echo \"🦀 Rust project detected\"\n  echo \"export PROJECT_TYPE=rust\" >> \"$CLAUDE_ENV_FILE\"\nfi\n```\n\n**Use for:** Automatically detecting and configuring project-specific settings.\n\n## Pattern 4: Notification Logging\n\nLog all notifications for audit or analysis:\n\n```json\n{\n  \"Notification\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/log-notification.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** Tracking user notifications or integration with external logging systems.\n\n## Pattern 5: MCP Tool Monitoring\n\nMonitor and validate MCP tool usage:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"mcp__.*__delete.*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Deletion operation detected. Verify: Is this deletion intentional? Can it be undone? Are there backups? Return 'approve' only if safe.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** Protecting against destructive MCP operations.\n\n## Pattern 6: Build Verification\n\nEnsure project builds after code changes:\n\n```json\n{\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Check if code was modified. If Write/Edit tools were used, verify the project was built (npm run build, cargo build, etc). If not built, block and request build.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** Catching build errors before committing or stopping work.\n\n## Pattern 7: Permission Confirmation\n\nAsk user before dangerous operations:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Command: $TOOL_INPUT.command. If command contains 'rm', 'delete', 'drop', or other destructive operations, return 'ask' to confirm with user. Otherwise 'approve'.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** User confirmation on potentially destructive commands.\n\n## Pattern 8: Code Quality Checks\n\nRun linters or formatters on file edits:\n\n```json\n{\n  \"PostToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/check-quality.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Example script (check-quality.sh):**\n```bash\n#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\n\n# Run linter if applicable\nif [[ \"$file_path\" == *.js ]] || [[ \"$file_path\" == *.ts ]]; then\n  npx eslint \"$file_path\" 2>&1 || true\nfi\n```\n\n**Use for:** Automatic code quality enforcement.\n\n## Pattern Combinations\n\nCombine multiple patterns for comprehensive protection:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate file write safety\"\n        }\n      ]\n    },\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate bash command safety\"\n        }\n      ]\n    }\n  ],\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Verify tests run and build succeeded\"\n        }\n      ]\n    }\n  ],\n  \"SessionStart\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/load-context.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\nThis provides multi-layered protection and automation.\n\n## Pattern 9: Temporarily Active Hooks\n\nCreate hooks that only run when explicitly enabled via flag files:\n\n```bash\n#!/bin/bash\n# Hook only active when flag file exists\nFLAG_FILE=\"$CLAUDE_PROJECT_DIR/.enable-security-scan\"\n\nif [ ! -f \"$FLAG_FILE\" ]; then\n  # Quick exit when disabled\n  exit 0\nfi\n\n# Flag present, run validation\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\n\n# Run security scan\nsecurity-scanner \"$file_path\"\n```\n\n**Activation:**\n```bash\n# Enable the hook\ntouch .enable-security-scan\n\n# Disable the hook\nrm .enable-security-scan\n```\n\n**Use for:**\n- Temporary debugging hooks\n- Feature flags for development\n- Project-specific validation that's opt-in\n- Performance-intensive checks only when needed\n\n**Note:** Must restart Claude Code after creating/removing flag files for hooks to recognize changes.\n\n## Pattern 10: Configuration-Driven Hooks\n\nUse JSON configuration to control hook behavior:\n\n```bash\n#!/bin/bash\nCONFIG_FILE=\"$CLAUDE_PROJECT_DIR/.claude/my-plugin.local.json\"\n\n# Read configuration\nif [ -f \"$CONFIG_FILE\" ]; then\n  strict_mode=$(jq -r '.strictMode // false' \"$CONFIG_FILE\")\n  max_file_size=$(jq -r '.maxFileSize // 1000000' \"$CONFIG_FILE\")\nelse\n  # Defaults\n  strict_mode=false\n  max_file_size=1000000\nfi\n\n# Skip if not in strict mode\nif [ \"$strict_mode\" != \"true\" ]; then\n  exit 0\nfi\n\n# Apply configured limits\ninput=$(cat)\nfile_size=$(echo \"$input\" | jq -r '.tool_input.content | length')\n\nif [ \"$file_size\" -gt \"$max_file_size\" ]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"File exceeds configured size limit\"}' >&2\n  exit 2\nfi\n```\n\n**Configuration file (.claude/my-plugin.local.json):**\n```json\n{\n  \"strictMode\": true,\n  \"maxFileSize\": 500000,\n  \"allowedPaths\": [\"/tmp\", \"/home/user/projects\"]\n}\n```\n\n**Use for:**\n- User-configurable hook behavior\n- Per-project settings\n- Team-specific rules\n- Dynamic validation criteria\n",
        "plugins/plugin-dev/skills/hook-development/scripts/README.md": "# Hook Development Utility Scripts\n\nThese scripts help validate, test, and lint hook implementations before deployment.\n\n## validate-hook-schema.sh\n\nValidates `hooks.json` configuration files for correct structure and common issues.\n\n**Usage:**\n```bash\n./validate-hook-schema.sh path/to/hooks.json\n```\n\n**Checks:**\n- Valid JSON syntax\n- Required fields present\n- Valid hook event names\n- Proper hook types (command/prompt)\n- Timeout values in valid ranges\n- Hardcoded path detection\n- Prompt hook event compatibility\n\n**Example:**\n```bash\ncd my-plugin\n./validate-hook-schema.sh hooks/hooks.json\n```\n\n## test-hook.sh\n\nTests individual hook scripts with sample input before deploying to Claude Code.\n\n**Usage:**\n```bash\n./test-hook.sh [options] <hook-script> <test-input.json>\n```\n\n**Options:**\n- `-v, --verbose` - Show detailed execution information\n- `-t, --timeout N` - Set timeout in seconds (default: 60)\n- `--create-sample <event-type>` - Generate sample test input\n\n**Example:**\n```bash\n# Create sample test input\n./test-hook.sh --create-sample PreToolUse > test-input.json\n\n# Test a hook script\n./test-hook.sh my-hook.sh test-input.json\n\n# Test with verbose output and custom timeout\n./test-hook.sh -v -t 30 my-hook.sh test-input.json\n```\n\n**Features:**\n- Sets up proper environment variables (CLAUDE_PROJECT_DIR, CLAUDE_PLUGIN_ROOT)\n- Measures execution time\n- Validates output JSON\n- Shows exit codes and their meanings\n- Captures environment file output\n\n## hook-linter.sh\n\nChecks hook scripts for common issues and best practices violations.\n\n**Usage:**\n```bash\n./hook-linter.sh <hook-script.sh> [hook-script2.sh ...]\n```\n\n**Checks:**\n- Shebang presence\n- `set -euo pipefail` usage\n- Stdin input reading\n- Proper error handling\n- Variable quoting (injection prevention)\n- Exit code usage\n- Hardcoded paths\n- Long-running code detection\n- Error output to stderr\n- Input validation\n\n**Example:**\n```bash\n# Lint single script\n./hook-linter.sh ../examples/validate-write.sh\n\n# Lint multiple scripts\n./hook-linter.sh ../examples/*.sh\n```\n\n## Typical Workflow\n\n1. **Write your hook script**\n   ```bash\n   vim my-plugin/scripts/my-hook.sh\n   ```\n\n2. **Lint the script**\n   ```bash\n   ./hook-linter.sh my-plugin/scripts/my-hook.sh\n   ```\n\n3. **Create test input**\n   ```bash\n   ./test-hook.sh --create-sample PreToolUse > test-input.json\n   # Edit test-input.json as needed\n   ```\n\n4. **Test the hook**\n   ```bash\n   ./test-hook.sh -v my-plugin/scripts/my-hook.sh test-input.json\n   ```\n\n5. **Add to hooks.json**\n   ```bash\n   # Edit my-plugin/hooks/hooks.json\n   ```\n\n6. **Validate configuration**\n   ```bash\n   ./validate-hook-schema.sh my-plugin/hooks/hooks.json\n   ```\n\n7. **Test in Claude Code**\n   ```bash\n   claude --debug\n   ```\n\n## Tips\n\n- Always test hooks before deploying to avoid breaking user workflows\n- Use verbose mode (`-v`) to debug hook behavior\n- Check the linter output for security and best practice issues\n- Validate hooks.json after any changes\n- Create different test inputs for various scenarios (safe operations, dangerous operations, edge cases)\n\n## Common Issues\n\n### Hook doesn't execute\n\nCheck:\n- Script has shebang (`#!/bin/bash`)\n- Script is executable (`chmod +x`)\n- Path in hooks.json is correct (use `${CLAUDE_PLUGIN_ROOT}`)\n\n### Hook times out\n\n- Reduce timeout in hooks.json\n- Optimize hook script performance\n- Remove long-running operations\n\n### Hook fails silently\n\n- Check exit codes (should be 0 or 2)\n- Ensure errors go to stderr (`>&2`)\n- Validate JSON output structure\n\n### Injection vulnerabilities\n\n- Always quote variables: `\"$variable\"`\n- Use `set -euo pipefail`\n- Validate all input fields\n- Run the linter to catch issues\n",
        "plugins/plugin-dev/skills/mcp-integration/SKILL.md": "---\nname: MCP Integration\ndescription: This skill should be used when the user asks to \"add MCP server\", \"integrate MCP\", \"configure MCP in plugin\", \"use .mcp.json\", \"set up Model Context Protocol\", \"connect external service\", mentions \"${CLAUDE_PLUGIN_ROOT} with MCP\", or discusses MCP server types (SSE, stdio, HTTP, WebSocket). Provides comprehensive guidance for integrating Model Context Protocol servers into Claude Code plugins for external tool and service integration.\nversion: 0.1.0\n---\n\n# MCP Integration for Claude Code Plugins\n\n## Overview\n\nModel Context Protocol (MCP) enables Claude Code plugins to integrate with external services and APIs by providing structured tool access. Use MCP integration to expose external service capabilities as tools within Claude Code.\n\n**Key capabilities:**\n- Connect to external services (databases, APIs, file systems)\n- Provide 10+ related tools from a single service\n- Handle OAuth and complex authentication flows\n- Bundle MCP servers with plugins for automatic setup\n\n## MCP Server Configuration Methods\n\nPlugins can bundle MCP servers in two ways:\n\n### Method 1: Dedicated .mcp.json (Recommended)\n\nCreate `.mcp.json` at plugin root:\n\n```json\n{\n  \"database-tools\": {\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/db-server\",\n    \"args\": [\"--config\", \"${CLAUDE_PLUGIN_ROOT}/config.json\"],\n    \"env\": {\n      \"DB_URL\": \"${DB_URL}\"\n    }\n  }\n}\n```\n\n**Benefits:**\n- Clear separation of concerns\n- Easier to maintain\n- Better for multiple servers\n\n### Method 2: Inline in plugin.json\n\nAdd `mcpServers` field to plugin.json:\n\n```json\n{\n  \"name\": \"my-plugin\",\n  \"version\": \"1.0.0\",\n  \"mcpServers\": {\n    \"plugin-api\": {\n      \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/api-server\",\n      \"args\": [\"--port\", \"8080\"]\n    }\n  }\n}\n```\n\n**Benefits:**\n- Single configuration file\n- Good for simple single-server plugins\n\n## MCP Server Types\n\n### stdio (Local Process)\n\nExecute local MCP servers as child processes. Best for local tools and custom servers.\n\n**Configuration:**\n```json\n{\n  \"filesystem\": {\n    \"command\": \"npx\",\n    \"args\": [\"-y\", \"@modelcontextprotocol/server-filesystem\", \"/allowed/path\"],\n    \"env\": {\n      \"LOG_LEVEL\": \"debug\"\n    }\n  }\n}\n```\n\n**Use cases:**\n- File system access\n- Local database connections\n- Custom MCP servers\n- NPM-packaged MCP servers\n\n**Process management:**\n- Claude Code spawns and manages the process\n- Communicates via stdin/stdout\n- Terminates when Claude Code exits\n\n### SSE (Server-Sent Events)\n\nConnect to hosted MCP servers with OAuth support. Best for cloud services.\n\n**Configuration:**\n```json\n{\n  \"asana\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.asana.com/sse\"\n  }\n}\n```\n\n**Use cases:**\n- Official hosted MCP servers (Asana, GitHub, etc.)\n- Cloud services with MCP endpoints\n- OAuth-based authentication\n- No local installation needed\n\n**Authentication:**\n- OAuth flows handled automatically\n- User prompted on first use\n- Tokens managed by Claude Code\n\n### HTTP (REST API)\n\nConnect to RESTful MCP servers with token authentication.\n\n**Configuration:**\n```json\n{\n  \"api-service\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\",\n      \"X-Custom-Header\": \"value\"\n    }\n  }\n}\n```\n\n**Use cases:**\n- REST API-based MCP servers\n- Token-based authentication\n- Custom API backends\n- Stateless interactions\n\n### WebSocket (Real-time)\n\nConnect to WebSocket MCP servers for real-time bidirectional communication.\n\n**Configuration:**\n```json\n{\n  \"realtime-service\": {\n    \"type\": \"ws\",\n    \"url\": \"wss://mcp.example.com/ws\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${TOKEN}\"\n    }\n  }\n}\n```\n\n**Use cases:**\n- Real-time data streaming\n- Persistent connections\n- Push notifications from server\n- Low-latency requirements\n\n## Environment Variable Expansion\n\nAll MCP configurations support environment variable substitution:\n\n**${CLAUDE_PLUGIN_ROOT}** - Plugin directory (always use for portability):\n```json\n{\n  \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/my-server\"\n}\n```\n\n**User environment variables** - From user's shell:\n```json\n{\n  \"env\": {\n    \"API_KEY\": \"${MY_API_KEY}\",\n    \"DATABASE_URL\": \"${DB_URL}\"\n  }\n}\n```\n\n**Best practice:** Document all required environment variables in plugin README.\n\n## MCP Tool Naming\n\nWhen MCP servers provide tools, they're automatically prefixed:\n\n**Format:** `mcp__plugin_<plugin-name>_<server-name>__<tool-name>`\n\n**Example:**\n- Plugin: `asana`\n- Server: `asana`\n- Tool: `create_task`\n- **Full name:** `mcp__plugin_asana_asana__asana_create_task`\n\n### Using MCP Tools in Commands\n\nPre-allow specific MCP tools in command frontmatter:\n\n```markdown\n---\nallowed-tools: [\n  \"mcp__plugin_asana_asana__asana_create_task\",\n  \"mcp__plugin_asana_asana__asana_search_tasks\"\n]\n---\n```\n\n**Wildcard (use sparingly):**\n```markdown\n---\nallowed-tools: [\"mcp__plugin_asana_asana__*\"]\n---\n```\n\n**Best practice:** Pre-allow specific tools, not wildcards, for security.\n\n## Lifecycle Management\n\n**Automatic startup:**\n- MCP servers start when plugin enables\n- Connection established before first tool use\n- Restart required for configuration changes\n\n**Lifecycle:**\n1. Plugin loads\n2. MCP configuration parsed\n3. Server process started (stdio) or connection established (SSE/HTTP/WS)\n4. Tools discovered and registered\n5. Tools available as `mcp__plugin_...__...`\n\n**Viewing servers:**\nUse `/mcp` command to see all servers including plugin-provided ones.\n\n## Authentication Patterns\n\n### OAuth (SSE/HTTP)\n\nOAuth handled automatically by Claude Code:\n\n```json\n{\n  \"type\": \"sse\",\n  \"url\": \"https://mcp.example.com/sse\"\n}\n```\n\nUser authenticates in browser on first use. No additional configuration needed.\n\n### Token-Based (Headers)\n\nStatic or environment variable tokens:\n\n```json\n{\n  \"type\": \"http\",\n  \"url\": \"https://api.example.com\",\n  \"headers\": {\n    \"Authorization\": \"Bearer ${API_TOKEN}\"\n  }\n}\n```\n\nDocument required environment variables in README.\n\n### Environment Variables (stdio)\n\nPass configuration to MCP server:\n\n```json\n{\n  \"command\": \"python\",\n  \"args\": [\"-m\", \"my_mcp_server\"],\n  \"env\": {\n    \"DATABASE_URL\": \"${DB_URL}\",\n    \"API_KEY\": \"${API_KEY}\",\n    \"LOG_LEVEL\": \"info\"\n  }\n}\n```\n\n## Integration Patterns\n\n### Pattern 1: Simple Tool Wrapper\n\nCommands use MCP tools with user interaction:\n\n```markdown\n# Command: create-item.md\n---\nallowed-tools: [\"mcp__plugin_name_server__create_item\"]\n---\n\nSteps:\n1. Gather item details from user\n2. Use mcp__plugin_name_server__create_item\n3. Confirm creation\n```\n\n**Use for:** Adding validation or preprocessing before MCP calls.\n\n### Pattern 2: Autonomous Agent\n\nAgents use MCP tools autonomously:\n\n```markdown\n# Agent: data-analyzer.md\n\nAnalysis Process:\n1. Query data via mcp__plugin_db_server__query\n2. Process and analyze results\n3. Generate insights report\n```\n\n**Use for:** Multi-step MCP workflows without user interaction.\n\n### Pattern 3: Multi-Server Plugin\n\nIntegrate multiple MCP servers:\n\n```json\n{\n  \"github\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.github.com/sse\"\n  },\n  \"jira\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.jira.com/sse\"\n  }\n}\n```\n\n**Use for:** Workflows spanning multiple services.\n\n## Security Best Practices\n\n### Use HTTPS/WSS\n\nAlways use secure connections:\n\n```json\n✅ \"url\": \"https://mcp.example.com/sse\"\n❌ \"url\": \"http://mcp.example.com/sse\"\n```\n\n### Token Management\n\n**DO:**\n- ✅ Use environment variables for tokens\n- ✅ Document required env vars in README\n- ✅ Let OAuth flow handle authentication\n\n**DON'T:**\n- ❌ Hardcode tokens in configuration\n- ❌ Commit tokens to git\n- ❌ Share tokens in documentation\n\n### Permission Scoping\n\nPre-allow only necessary MCP tools:\n\n```markdown\n✅ allowed-tools: [\n  \"mcp__plugin_api_server__read_data\",\n  \"mcp__plugin_api_server__create_item\"\n]\n\n❌ allowed-tools: [\"mcp__plugin_api_server__*\"]\n```\n\n## Error Handling\n\n### Connection Failures\n\nHandle MCP server unavailability:\n- Provide fallback behavior in commands\n- Inform user of connection issues\n- Check server URL and configuration\n\n### Tool Call Errors\n\nHandle failed MCP operations:\n- Validate inputs before calling MCP tools\n- Provide clear error messages\n- Check rate limiting and quotas\n\n### Configuration Errors\n\nValidate MCP configuration:\n- Test server connectivity during development\n- Validate JSON syntax\n- Check required environment variables\n\n## Performance Considerations\n\n### Lazy Loading\n\nMCP servers connect on-demand:\n- Not all servers connect at startup\n- First tool use triggers connection\n- Connection pooling managed automatically\n\n### Batching\n\nBatch similar requests when possible:\n\n```\n# Good: Single query with filters\ntasks = search_tasks(project=\"X\", assignee=\"me\", limit=50)\n\n# Avoid: Many individual queries\nfor id in task_ids:\n    task = get_task(id)\n```\n\n## Testing MCP Integration\n\n### Local Testing\n\n1. Configure MCP server in `.mcp.json`\n2. Install plugin locally (`.claude-plugin/`)\n3. Run `/mcp` to verify server appears\n4. Test tool calls in commands\n5. Check `claude --debug` logs for connection issues\n\n### Validation Checklist\n\n- [ ] MCP configuration is valid JSON\n- [ ] Server URL is correct and accessible\n- [ ] Required environment variables documented\n- [ ] Tools appear in `/mcp` output\n- [ ] Authentication works (OAuth or tokens)\n- [ ] Tool calls succeed from commands\n- [ ] Error cases handled gracefully\n\n## Debugging\n\n### Enable Debug Logging\n\n```bash\nclaude --debug\n```\n\nLook for:\n- MCP server connection attempts\n- Tool discovery logs\n- Authentication flows\n- Tool call errors\n\n### Common Issues\n\n**Server not connecting:**\n- Check URL is correct\n- Verify server is running (stdio)\n- Check network connectivity\n- Review authentication configuration\n\n**Tools not available:**\n- Verify server connected successfully\n- Check tool names match exactly\n- Run `/mcp` to see available tools\n- Restart Claude Code after config changes\n\n**Authentication failing:**\n- Clear cached auth tokens\n- Re-authenticate\n- Check token scopes and permissions\n- Verify environment variables set\n\n## Quick Reference\n\n### MCP Server Types\n\n| Type | Transport | Best For | Auth |\n|------|-----------|----------|------|\n| stdio | Process | Local tools, custom servers | Env vars |\n| SSE | HTTP | Hosted services, cloud APIs | OAuth |\n| HTTP | REST | API backends, token auth | Tokens |\n| ws | WebSocket | Real-time, streaming | Tokens |\n\n### Configuration Checklist\n\n- [ ] Server type specified (stdio/SSE/HTTP/ws)\n- [ ] Type-specific fields complete (command or url)\n- [ ] Authentication configured\n- [ ] Environment variables documented\n- [ ] HTTPS/WSS used (not HTTP/WS)\n- [ ] ${CLAUDE_PLUGIN_ROOT} used for paths\n\n### Best Practices\n\n**DO:**\n- ✅ Use ${CLAUDE_PLUGIN_ROOT} for portable paths\n- ✅ Document required environment variables\n- ✅ Use secure connections (HTTPS/WSS)\n- ✅ Pre-allow specific MCP tools in commands\n- ✅ Test MCP integration before publishing\n- ✅ Handle connection and tool errors gracefully\n\n**DON'T:**\n- ❌ Hardcode absolute paths\n- ❌ Commit credentials to git\n- ❌ Use HTTP instead of HTTPS\n- ❌ Pre-allow all tools with wildcards\n- ❌ Skip error handling\n- ❌ Forget to document setup\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed information, consult:\n\n- **`references/server-types.md`** - Deep dive on each server type\n- **`references/authentication.md`** - Authentication patterns and OAuth\n- **`references/tool-usage.md`** - Using MCP tools in commands and agents\n\n### Example Configurations\n\nWorking examples in `examples/`:\n\n- **`stdio-server.json`** - Local stdio MCP server\n- **`sse-server.json`** - Hosted SSE server with OAuth\n- **`http-server.json`** - REST API with token auth\n\n### External Resources\n\n- **Official MCP Docs**: https://modelcontextprotocol.io/\n- **Claude Code MCP Docs**: https://docs.claude.com/en/docs/claude-code/mcp\n- **MCP SDK**: @modelcontextprotocol/sdk\n- **Testing**: Use `claude --debug` and `/mcp` command\n\n## Implementation Workflow\n\nTo add MCP integration to a plugin:\n\n1. Choose MCP server type (stdio, SSE, HTTP, ws)\n2. Create `.mcp.json` at plugin root with configuration\n3. Use ${CLAUDE_PLUGIN_ROOT} for all file references\n4. Document required environment variables in README\n5. Test locally with `/mcp` command\n6. Pre-allow MCP tools in relevant commands\n7. Handle authentication (OAuth or tokens)\n8. Test error cases (connection failures, auth errors)\n9. Document MCP integration in plugin README\n\nFocus on stdio for custom/local servers, SSE for hosted services with OAuth.\n",
        "plugins/plugin-dev/skills/mcp-integration/references/authentication.md": "# MCP Authentication Patterns\n\nComplete guide to authentication methods for MCP servers in Claude Code plugins.\n\n## Overview\n\nMCP servers support multiple authentication methods depending on the server type and service requirements. Choose the method that best matches your use case and security requirements.\n\n## OAuth (Automatic)\n\n### How It Works\n\nClaude Code automatically handles the complete OAuth 2.0 flow for SSE and HTTP servers:\n\n1. User attempts to use MCP tool\n2. Claude Code detects authentication needed\n3. Opens browser for OAuth consent\n4. User authorizes in browser\n5. Tokens stored securely by Claude Code\n6. Automatic token refresh\n\n### Configuration\n\n```json\n{\n  \"service\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\"\n  }\n}\n```\n\nNo additional auth configuration needed! Claude Code handles everything.\n\n### Supported Services\n\n**Known OAuth-enabled MCP servers:**\n- Asana: `https://mcp.asana.com/sse`\n- GitHub (when available)\n- Google services (when available)\n- Custom OAuth servers\n\n### OAuth Scopes\n\nOAuth scopes are determined by the MCP server. Users see required scopes during the consent flow.\n\n**Document required scopes in your README:**\n```markdown\n## Authentication\n\nThis plugin requires the following Asana permissions:\n- Read tasks and projects\n- Create and update tasks\n- Access workspace data\n```\n\n### Token Storage\n\nTokens are stored securely by Claude Code:\n- Not accessible to plugins\n- Encrypted at rest\n- Automatic refresh\n- Cleared on sign-out\n\n### Troubleshooting OAuth\n\n**Authentication loop:**\n- Clear cached tokens (sign out and sign in)\n- Check OAuth redirect URLs\n- Verify server OAuth configuration\n\n**Scope issues:**\n- User may need to re-authorize for new scopes\n- Check server documentation for required scopes\n\n**Token expiration:**\n- Claude Code auto-refreshes\n- If refresh fails, prompts re-authentication\n\n## Token-Based Authentication\n\n### Bearer Tokens\n\nMost common for HTTP and WebSocket servers.\n\n**Configuration:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\"\n    }\n  }\n}\n```\n\n**Environment variable:**\n```bash\nexport API_TOKEN=\"your-secret-token-here\"\n```\n\n### API Keys\n\nAlternative to Bearer tokens, often in custom headers.\n\n**Configuration:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"X-API-Key\": \"${API_KEY}\",\n      \"X-API-Secret\": \"${API_SECRET}\"\n    }\n  }\n}\n```\n\n### Custom Headers\n\nServices may use custom authentication headers.\n\n**Configuration:**\n```json\n{\n  \"service\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\",\n    \"headers\": {\n      \"X-Auth-Token\": \"${AUTH_TOKEN}\",\n      \"X-User-ID\": \"${USER_ID}\",\n      \"X-Tenant-ID\": \"${TENANT_ID}\"\n    }\n  }\n}\n```\n\n### Documenting Token Requirements\n\nAlways document in your README:\n\n```markdown\n## Setup\n\n### Required Environment Variables\n\nSet these environment variables before using the plugin:\n\n\\`\\`\\`bash\nexport API_TOKEN=\"your-token-here\"\nexport API_SECRET=\"your-secret-here\"\n\\`\\`\\`\n\n### Obtaining Tokens\n\n1. Visit https://api.example.com/tokens\n2. Create a new API token\n3. Copy the token and secret\n4. Set environment variables as shown above\n\n### Token Permissions\n\nThe API token needs the following permissions:\n- Read access to resources\n- Write access for creating items\n- Delete access (optional, for cleanup operations)\n\\`\\`\\`\n```\n\n## Environment Variable Authentication (stdio)\n\n### Passing Credentials to Server\n\nFor stdio servers, pass credentials via environment variables:\n\n```json\n{\n  \"database\": {\n    \"command\": \"python\",\n    \"args\": [\"-m\", \"mcp_server_db\"],\n    \"env\": {\n      \"DATABASE_URL\": \"${DATABASE_URL}\",\n      \"DB_USER\": \"${DB_USER}\",\n      \"DB_PASSWORD\": \"${DB_PASSWORD}\"\n    }\n  }\n}\n```\n\n### User Environment Variables\n\n```bash\n# User sets these in their shell\nexport DATABASE_URL=\"postgresql://localhost/mydb\"\nexport DB_USER=\"myuser\"\nexport DB_PASSWORD=\"mypassword\"\n```\n\n### Documentation Template\n\n```markdown\n## Database Configuration\n\nSet these environment variables:\n\n\\`\\`\\`bash\nexport DATABASE_URL=\"postgresql://host:port/database\"\nexport DB_USER=\"username\"\nexport DB_PASSWORD=\"password\"\n\\`\\`\\`\n\nOr create a `.env` file (add to `.gitignore`):\n\n\\`\\`\\`\nDATABASE_URL=postgresql://localhost:5432/mydb\nDB_USER=myuser\nDB_PASSWORD=mypassword\n\\`\\`\\`\n\nLoad with: \\`source .env\\` or \\`export $(cat .env | xargs)\\`\n\\`\\`\\`\n```\n\n## Dynamic Headers\n\n### Headers Helper Script\n\nFor tokens that change or expire, use a helper script:\n\n```json\n{\n  \"api\": {\n    \"type\": \"sse\",\n    \"url\": \"https://api.example.com\",\n    \"headersHelper\": \"${CLAUDE_PLUGIN_ROOT}/scripts/get-headers.sh\"\n  }\n}\n```\n\n**Script (get-headers.sh):**\n```bash\n#!/bin/bash\n# Generate dynamic authentication headers\n\n# Fetch fresh token\nTOKEN=$(get-fresh-token-from-somewhere)\n\n# Output JSON headers\ncat <<EOF\n{\n  \"Authorization\": \"Bearer $TOKEN\",\n  \"X-Timestamp\": \"$(date -Iseconds)\"\n}\nEOF\n```\n\n### Use Cases for Dynamic Headers\n\n- Short-lived tokens that need refresh\n- Tokens with HMAC signatures\n- Time-based authentication\n- Dynamic tenant/workspace selection\n\n## Security Best Practices\n\n### DO\n\n✅ **Use environment variables:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer ${API_TOKEN}\"\n  }\n}\n```\n\n✅ **Document required variables in README**\n\n✅ **Use HTTPS/WSS always**\n\n✅ **Implement token rotation**\n\n✅ **Store tokens securely (env vars, not files)**\n\n✅ **Let OAuth handle authentication when available**\n\n### DON'T\n\n❌ **Hardcode tokens:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer sk-abc123...\"  // NEVER!\n  }\n}\n```\n\n❌ **Commit tokens to git**\n\n❌ **Share tokens in documentation**\n\n❌ **Use HTTP instead of HTTPS**\n\n❌ **Store tokens in plugin files**\n\n❌ **Log tokens or sensitive headers**\n\n## Multi-Tenancy Patterns\n\n### Workspace/Tenant Selection\n\n**Via environment variable:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\",\n      \"X-Workspace-ID\": \"${WORKSPACE_ID}\"\n    }\n  }\n}\n```\n\n**Via URL:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://${TENANT_ID}.api.example.com/mcp\"\n  }\n}\n```\n\n### Per-User Configuration\n\nUsers set their own workspace:\n\n```bash\nexport WORKSPACE_ID=\"my-workspace-123\"\nexport TENANT_ID=\"my-company\"\n```\n\n## Authentication Troubleshooting\n\n### Common Issues\n\n**401 Unauthorized:**\n- Check token is set correctly\n- Verify token hasn't expired\n- Check token has required permissions\n- Ensure header format is correct\n\n**403 Forbidden:**\n- Token valid but lacks permissions\n- Check scope/permissions\n- Verify workspace/tenant ID\n- May need admin approval\n\n**Token not found:**\n```bash\n# Check environment variable is set\necho $API_TOKEN\n\n# If empty, set it\nexport API_TOKEN=\"your-token\"\n```\n\n**Token in wrong format:**\n```json\n// Correct\n\"Authorization\": \"Bearer sk-abc123\"\n\n// Wrong\n\"Authorization\": \"sk-abc123\"\n```\n\n### Debugging Authentication\n\n**Enable debug mode:**\n```bash\nclaude --debug\n```\n\nLook for:\n- Authentication header values (sanitized)\n- OAuth flow progress\n- Token refresh attempts\n- Authentication errors\n\n**Test authentication separately:**\n```bash\n# Test HTTP endpoint\ncurl -H \"Authorization: Bearer $API_TOKEN\" \\\n     https://api.example.com/mcp/health\n\n# Should return 200 OK\n```\n\n## Migration Patterns\n\n### From Hardcoded to Environment Variables\n\n**Before:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer sk-hardcoded-token\"\n  }\n}\n```\n\n**After:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer ${API_TOKEN}\"\n  }\n}\n```\n\n**Migration steps:**\n1. Add environment variable to plugin README\n2. Update configuration to use ${VAR}\n3. Test with variable set\n4. Remove hardcoded value\n5. Commit changes\n\n### From Basic Auth to OAuth\n\n**Before:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Basic ${BASE64_CREDENTIALS}\"\n  }\n}\n```\n\n**After:**\n```json\n{\n  \"type\": \"sse\",\n  \"url\": \"https://mcp.example.com/sse\"\n}\n```\n\n**Benefits:**\n- Better security\n- No credential management\n- Automatic token refresh\n- Scoped permissions\n\n## Advanced Authentication\n\n### Mutual TLS (mTLS)\n\nSome enterprise services require client certificates.\n\n**Not directly supported in MCP configuration.**\n\n**Workaround:** Wrap in stdio server that handles mTLS:\n\n```json\n{\n  \"secure-api\": {\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/mtls-wrapper\",\n    \"args\": [\"--cert\", \"${CLIENT_CERT}\", \"--key\", \"${CLIENT_KEY}\"],\n    \"env\": {\n      \"API_URL\": \"https://secure.example.com\"\n    }\n  }\n}\n```\n\n### JWT Tokens\n\nGenerate JWT tokens dynamically with headers helper:\n\n```bash\n#!/bin/bash\n# generate-jwt.sh\n\n# Generate JWT (using library or API call)\nJWT=$(generate-jwt-token)\n\necho \"{\\\"Authorization\\\": \\\"Bearer $JWT\\\"}\"\n```\n\n```json\n{\n  \"headersHelper\": \"${CLAUDE_PLUGIN_ROOT}/scripts/generate-jwt.sh\"\n}\n```\n\n### HMAC Signatures\n\nFor APIs requiring request signing:\n\n```bash\n#!/bin/bash\n# generate-hmac.sh\n\nTIMESTAMP=$(date -Iseconds)\nSIGNATURE=$(echo -n \"$TIMESTAMP\" | openssl dgst -sha256 -hmac \"$SECRET_KEY\" | cut -d' ' -f2)\n\ncat <<EOF\n{\n  \"X-Timestamp\": \"$TIMESTAMP\",\n  \"X-Signature\": \"$SIGNATURE\",\n  \"X-API-Key\": \"$API_KEY\"\n}\nEOF\n```\n\n## Best Practices Summary\n\n### For Plugin Developers\n\n1. **Prefer OAuth** when service supports it\n2. **Use environment variables** for tokens\n3. **Document all required variables** in README\n4. **Provide setup instructions** with examples\n5. **Never commit credentials**\n6. **Use HTTPS/WSS only**\n7. **Test authentication thoroughly**\n\n### For Plugin Users\n\n1. **Set environment variables** before using plugin\n2. **Keep tokens secure** and private\n3. **Rotate tokens regularly**\n4. **Use different tokens** for dev/prod\n5. **Don't commit .env files** to git\n6. **Review OAuth scopes** before authorizing\n\n## Conclusion\n\nChoose the authentication method that matches your MCP server's requirements:\n- **OAuth** for cloud services (easiest for users)\n- **Bearer tokens** for API services\n- **Environment variables** for stdio servers\n- **Dynamic headers** for complex auth flows\n\nAlways prioritize security and provide clear setup documentation for users.\n",
        "plugins/plugin-dev/skills/mcp-integration/references/server-types.md": "# MCP Server Types: Deep Dive\n\nComplete reference for all MCP server types supported in Claude Code plugins.\n\n## stdio (Standard Input/Output)\n\n### Overview\n\nExecute local MCP servers as child processes with communication via stdin/stdout. Best choice for local tools, custom servers, and NPM packages.\n\n### Configuration\n\n**Basic:**\n```json\n{\n  \"my-server\": {\n    \"command\": \"npx\",\n    \"args\": [\"-y\", \"my-mcp-server\"]\n  }\n}\n```\n\n**With environment:**\n```json\n{\n  \"my-server\": {\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/custom-server\",\n    \"args\": [\"--config\", \"${CLAUDE_PLUGIN_ROOT}/config.json\"],\n    \"env\": {\n      \"API_KEY\": \"${MY_API_KEY}\",\n      \"LOG_LEVEL\": \"debug\",\n      \"DATABASE_URL\": \"${DB_URL}\"\n    }\n  }\n}\n```\n\n### Process Lifecycle\n\n1. **Startup**: Claude Code spawns process with `command` and `args`\n2. **Communication**: JSON-RPC messages via stdin/stdout\n3. **Lifecycle**: Process runs for entire Claude Code session\n4. **Shutdown**: Process terminated when Claude Code exits\n\n### Use Cases\n\n**NPM Packages:**\n```json\n{\n  \"filesystem\": {\n    \"command\": \"npx\",\n    \"args\": [\"-y\", \"@modelcontextprotocol/server-filesystem\", \"/path\"]\n  }\n}\n```\n\n**Custom Scripts:**\n```json\n{\n  \"custom\": {\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/my-server.js\",\n    \"args\": [\"--verbose\"]\n  }\n}\n```\n\n**Python Servers:**\n```json\n{\n  \"python-server\": {\n    \"command\": \"python\",\n    \"args\": [\"-m\", \"my_mcp_server\"],\n    \"env\": {\n      \"PYTHONUNBUFFERED\": \"1\"\n    }\n  }\n}\n```\n\n### Best Practices\n\n1. **Use absolute paths or ${CLAUDE_PLUGIN_ROOT}**\n2. **Set PYTHONUNBUFFERED for Python servers**\n3. **Pass configuration via args or env, not stdin**\n4. **Handle server crashes gracefully**\n5. **Log to stderr, not stdout (stdout is for MCP protocol)**\n\n### Troubleshooting\n\n**Server won't start:**\n- Check command exists and is executable\n- Verify file paths are correct\n- Check permissions\n- Review `claude --debug` logs\n\n**Communication fails:**\n- Ensure server uses stdin/stdout correctly\n- Check for stray print/console.log statements\n- Verify JSON-RPC format\n\n## SSE (Server-Sent Events)\n\n### Overview\n\nConnect to hosted MCP servers via HTTP with server-sent events for streaming. Best for cloud services and OAuth authentication.\n\n### Configuration\n\n**Basic:**\n```json\n{\n  \"hosted-service\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\"\n  }\n}\n```\n\n**With headers:**\n```json\n{\n  \"service\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\",\n    \"headers\": {\n      \"X-API-Version\": \"v1\",\n      \"X-Client-ID\": \"${CLIENT_ID}\"\n    }\n  }\n}\n```\n\n### Connection Lifecycle\n\n1. **Initialization**: HTTP connection established to URL\n2. **Handshake**: MCP protocol negotiation\n3. **Streaming**: Server sends events via SSE\n4. **Requests**: Client sends HTTP POST for tool calls\n5. **Reconnection**: Automatic reconnection on disconnect\n\n### Authentication\n\n**OAuth (Automatic):**\n```json\n{\n  \"asana\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.asana.com/sse\"\n  }\n}\n```\n\nClaude Code handles OAuth flow:\n1. User prompted to authenticate on first use\n2. Opens browser for OAuth flow\n3. Tokens stored securely\n4. Automatic token refresh\n\n**Custom Headers:**\n```json\n{\n  \"service\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\"\n    }\n  }\n}\n```\n\n### Use Cases\n\n**Official Services:**\n- Asana: `https://mcp.asana.com/sse`\n- GitHub: `https://mcp.github.com/sse`\n- Other hosted MCP servers\n\n**Custom Hosted Servers:**\nDeploy your own MCP server and expose via HTTPS + SSE.\n\n### Best Practices\n\n1. **Always use HTTPS, never HTTP**\n2. **Let OAuth handle authentication when available**\n3. **Use environment variables for tokens**\n4. **Handle connection failures gracefully**\n5. **Document OAuth scopes required**\n\n### Troubleshooting\n\n**Connection refused:**\n- Check URL is correct and accessible\n- Verify HTTPS certificate is valid\n- Check network connectivity\n- Review firewall settings\n\n**OAuth fails:**\n- Clear cached tokens\n- Check OAuth scopes\n- Verify redirect URLs\n- Re-authenticate\n\n## HTTP (REST API)\n\n### Overview\n\nConnect to RESTful MCP servers via standard HTTP requests. Best for token-based auth and stateless interactions.\n\n### Configuration\n\n**Basic:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\"\n  }\n}\n```\n\n**With authentication:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\",\n      \"Content-Type\": \"application/json\",\n      \"X-API-Version\": \"2024-01-01\"\n    }\n  }\n}\n```\n\n### Request/Response Flow\n\n1. **Tool Discovery**: GET to discover available tools\n2. **Tool Invocation**: POST with tool name and parameters\n3. **Response**: JSON response with results or errors\n4. **Stateless**: Each request independent\n\n### Authentication\n\n**Token-Based:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer ${API_TOKEN}\"\n  }\n}\n```\n\n**API Key:**\n```json\n{\n  \"headers\": {\n    \"X-API-Key\": \"${API_KEY}\"\n  }\n}\n```\n\n**Custom Auth:**\n```json\n{\n  \"headers\": {\n    \"X-Auth-Token\": \"${AUTH_TOKEN}\",\n    \"X-User-ID\": \"${USER_ID}\"\n  }\n}\n```\n\n### Use Cases\n\n- REST API backends\n- Internal services\n- Microservices\n- Serverless functions\n\n### Best Practices\n\n1. **Use HTTPS for all connections**\n2. **Store tokens in environment variables**\n3. **Implement retry logic for transient failures**\n4. **Handle rate limiting**\n5. **Set appropriate timeouts**\n\n### Troubleshooting\n\n**HTTP errors:**\n- 401: Check authentication headers\n- 403: Verify permissions\n- 429: Implement rate limiting\n- 500: Check server logs\n\n**Timeout issues:**\n- Increase timeout if needed\n- Check server performance\n- Optimize tool implementations\n\n## WebSocket (Real-time)\n\n### Overview\n\nConnect to MCP servers via WebSocket for real-time bidirectional communication. Best for streaming and low-latency applications.\n\n### Configuration\n\n**Basic:**\n```json\n{\n  \"realtime\": {\n    \"type\": \"ws\",\n    \"url\": \"wss://mcp.example.com/ws\"\n  }\n}\n```\n\n**With authentication:**\n```json\n{\n  \"realtime\": {\n    \"type\": \"ws\",\n    \"url\": \"wss://mcp.example.com/ws\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${TOKEN}\",\n      \"X-Client-ID\": \"${CLIENT_ID}\"\n    }\n  }\n}\n```\n\n### Connection Lifecycle\n\n1. **Handshake**: WebSocket upgrade request\n2. **Connection**: Persistent bidirectional channel\n3. **Messages**: JSON-RPC over WebSocket\n4. **Heartbeat**: Keep-alive messages\n5. **Reconnection**: Automatic on disconnect\n\n### Use Cases\n\n- Real-time data streaming\n- Live updates and notifications\n- Collaborative editing\n- Low-latency tool calls\n- Push notifications from server\n\n### Best Practices\n\n1. **Use WSS (secure WebSocket), never WS**\n2. **Implement heartbeat/ping-pong**\n3. **Handle reconnection logic**\n4. **Buffer messages during disconnection**\n5. **Set connection timeouts**\n\n### Troubleshooting\n\n**Connection drops:**\n- Implement reconnection logic\n- Check network stability\n- Verify server supports WebSocket\n- Review firewall settings\n\n**Message delivery:**\n- Implement message acknowledgment\n- Handle out-of-order messages\n- Buffer during disconnection\n\n## Comparison Matrix\n\n| Feature | stdio | SSE | HTTP | WebSocket |\n|---------|-------|-----|------|-----------|\n| **Transport** | Process | HTTP/SSE | HTTP | WebSocket |\n| **Direction** | Bidirectional | Server→Client | Request/Response | Bidirectional |\n| **State** | Stateful | Stateful | Stateless | Stateful |\n| **Auth** | Env vars | OAuth/Headers | Headers | Headers |\n| **Use Case** | Local tools | Cloud services | REST APIs | Real-time |\n| **Latency** | Lowest | Medium | Medium | Low |\n| **Setup** | Easy | Medium | Easy | Medium |\n| **Reconnect** | Process respawn | Automatic | N/A | Automatic |\n\n## Choosing the Right Type\n\n**Use stdio when:**\n- Running local tools or custom servers\n- Need lowest latency\n- Working with file systems or local databases\n- Distributing server with plugin\n\n**Use SSE when:**\n- Connecting to hosted services\n- Need OAuth authentication\n- Using official MCP servers (Asana, GitHub)\n- Want automatic reconnection\n\n**Use HTTP when:**\n- Integrating with REST APIs\n- Need stateless interactions\n- Using token-based auth\n- Simple request/response pattern\n\n**Use WebSocket when:**\n- Need real-time updates\n- Building collaborative features\n- Low-latency critical\n- Bi-directional streaming required\n\n## Migration Between Types\n\n### From stdio to SSE\n\n**Before (stdio):**\n```json\n{\n  \"local-server\": {\n    \"command\": \"node\",\n    \"args\": [\"server.js\"]\n  }\n}\n```\n\n**After (SSE - deploy server):**\n```json\n{\n  \"hosted-server\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\"\n  }\n}\n```\n\n### From HTTP to WebSocket\n\n**Before (HTTP):**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\"\n  }\n}\n```\n\n**After (WebSocket):**\n```json\n{\n  \"realtime\": {\n    \"type\": \"ws\",\n    \"url\": \"wss://api.example.com/ws\"\n  }\n}\n```\n\nBenefits: Real-time updates, lower latency, bi-directional communication.\n\n## Advanced Configuration\n\n### Multiple Servers\n\nCombine different types:\n\n```json\n{\n  \"local-db\": {\n    \"command\": \"npx\",\n    \"args\": [\"-y\", \"mcp-server-sqlite\", \"./data.db\"]\n  },\n  \"cloud-api\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\"\n  },\n  \"internal-service\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\"\n    }\n  }\n}\n```\n\n### Conditional Configuration\n\nUse environment variables to switch servers:\n\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"${API_URL}\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\"\n    }\n  }\n}\n```\n\nSet different values for dev/prod:\n- Dev: `API_URL=http://localhost:8080/mcp`\n- Prod: `API_URL=https://api.production.com/mcp`\n\n## Security Considerations\n\n### Stdio Security\n\n- Validate command paths\n- Don't execute user-provided commands\n- Limit environment variable access\n- Restrict file system access\n\n### Network Security\n\n- Always use HTTPS/WSS\n- Validate SSL certificates\n- Don't skip certificate verification\n- Use secure token storage\n\n### Token Management\n\n- Never hardcode tokens\n- Use environment variables\n- Rotate tokens regularly\n- Implement token refresh\n- Document scopes required\n\n## Conclusion\n\nChoose the MCP server type based on your use case:\n- **stdio** for local, custom, or NPM-packaged servers\n- **SSE** for hosted services with OAuth\n- **HTTP** for REST APIs with token auth\n- **WebSocket** for real-time bidirectional communication\n\nTest thoroughly and handle errors gracefully for robust MCP integration.\n",
        "plugins/plugin-dev/skills/mcp-integration/references/tool-usage.md": "# Using MCP Tools in Commands and Agents\n\nComplete guide to using MCP tools effectively in Claude Code plugin commands and agents.\n\n## Overview\n\nOnce an MCP server is configured, its tools become available with the prefix `mcp__plugin_<plugin-name>_<server-name>__<tool-name>`. Use these tools in commands and agents just like built-in Claude Code tools.\n\n## Tool Naming Convention\n\n### Format\n\n```\nmcp__plugin_<plugin-name>_<server-name>__<tool-name>\n```\n\n### Examples\n\n**Asana plugin with asana server:**\n- `mcp__plugin_asana_asana__asana_create_task`\n- `mcp__plugin_asana_asana__asana_search_tasks`\n- `mcp__plugin_asana_asana__asana_get_project`\n\n**Custom plugin with database server:**\n- `mcp__plugin_myplug_database__query`\n- `mcp__plugin_myplug_database__execute`\n- `mcp__plugin_myplug_database__list_tables`\n\n### Discovering Tool Names\n\n**Use `/mcp` command:**\n```bash\n/mcp\n```\n\nThis shows:\n- All available MCP servers\n- Tools provided by each server\n- Tool schemas and descriptions\n- Full tool names for use in configuration\n\n## Using Tools in Commands\n\n### Pre-Allowing Tools\n\nSpecify MCP tools in command frontmatter:\n\n```markdown\n---\ndescription: Create a new Asana task\nallowed-tools: [\n  \"mcp__plugin_asana_asana__asana_create_task\"\n]\n---\n\n# Create Task Command\n\nTo create a task:\n1. Gather task details from user\n2. Use mcp__plugin_asana_asana__asana_create_task with the details\n3. Confirm creation to user\n```\n\n### Multiple Tools\n\n```markdown\n---\nallowed-tools: [\n  \"mcp__plugin_asana_asana__asana_create_task\",\n  \"mcp__plugin_asana_asana__asana_search_tasks\",\n  \"mcp__plugin_asana_asana__asana_get_project\"\n]\n---\n```\n\n### Wildcard (Use Sparingly)\n\n```markdown\n---\nallowed-tools: [\"mcp__plugin_asana_asana__*\"]\n---\n```\n\n**Caution:** Only use wildcards if the command truly needs access to all tools from a server.\n\n### Tool Usage in Command Instructions\n\n**Example command:**\n```markdown\n---\ndescription: Search and create Asana tasks\nallowed-tools: [\n  \"mcp__plugin_asana_asana__asana_search_tasks\",\n  \"mcp__plugin_asana_asana__asana_create_task\"\n]\n---\n\n# Asana Task Management\n\n## Searching Tasks\n\nTo search for tasks:\n1. Use mcp__plugin_asana_asana__asana_search_tasks\n2. Provide search filters (assignee, project, etc.)\n3. Display results to user\n\n## Creating Tasks\n\nTo create a task:\n1. Gather task details:\n   - Title (required)\n   - Description\n   - Project\n   - Assignee\n   - Due date\n2. Use mcp__plugin_asana_asana__asana_create_task\n3. Show confirmation with task link\n```\n\n## Using Tools in Agents\n\n### Agent Configuration\n\nAgents can use MCP tools autonomously without pre-allowing them:\n\n```markdown\n---\nname: asana-status-updater\ndescription: This agent should be used when the user asks to \"update Asana status\", \"generate project report\", or \"sync Asana tasks\"\nmodel: inherit\ncolor: blue\n---\n\n## Role\n\nAutonomous agent for generating Asana project status reports.\n\n## Process\n\n1. **Query tasks**: Use mcp__plugin_asana_asana__asana_search_tasks to get all tasks\n2. **Analyze progress**: Calculate completion rates and identify blockers\n3. **Generate report**: Create formatted status update\n4. **Update Asana**: Use mcp__plugin_asana_asana__asana_create_comment to post report\n\n## Available Tools\n\nThe agent has access to all Asana MCP tools without pre-approval.\n```\n\n### Agent Tool Access\n\nAgents have broader tool access than commands:\n- Can use any tool Claude determines is necessary\n- Don't need pre-allowed lists\n- Should document which tools they typically use\n\n## Tool Call Patterns\n\n### Pattern 1: Simple Tool Call\n\nSingle tool call with validation:\n\n```markdown\nSteps:\n1. Validate user provided required fields\n2. Call mcp__plugin_api_server__create_item with validated data\n3. Check for errors\n4. Display confirmation\n```\n\n### Pattern 2: Sequential Tools\n\nChain multiple tool calls:\n\n```markdown\nSteps:\n1. Search for existing items: mcp__plugin_api_server__search\n2. If not found, create new: mcp__plugin_api_server__create\n3. Add metadata: mcp__plugin_api_server__update_metadata\n4. Return final item ID\n```\n\n### Pattern 3: Batch Operations\n\nMultiple calls with same tool:\n\n```markdown\nSteps:\n1. Get list of items to process\n2. For each item:\n   - Call mcp__plugin_api_server__update_item\n   - Track success/failure\n3. Report results summary\n```\n\n### Pattern 4: Error Handling\n\nGraceful error handling:\n\n```markdown\nSteps:\n1. Try to call mcp__plugin_api_server__get_data\n2. If error (rate limit, network, etc.):\n   - Wait and retry (max 3 attempts)\n   - If still failing, inform user\n   - Suggest checking configuration\n3. On success, process data\n```\n\n## Tool Parameters\n\n### Understanding Tool Schemas\n\nEach MCP tool has a schema defining its parameters. View with `/mcp`.\n\n**Example schema:**\n```json\n{\n  \"name\": \"asana_create_task\",\n  \"description\": \"Create a new Asana task\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": {\n        \"type\": \"string\",\n        \"description\": \"Task title\"\n      },\n      \"notes\": {\n        \"type\": \"string\",\n        \"description\": \"Task description\"\n      },\n      \"workspace\": {\n        \"type\": \"string\",\n        \"description\": \"Workspace GID\"\n      }\n    },\n    \"required\": [\"name\", \"workspace\"]\n  }\n}\n```\n\n### Calling Tools with Parameters\n\nClaude automatically structures tool calls based on schema:\n\n```typescript\n// Claude generates this internally\n{\n  toolName: \"mcp__plugin_asana_asana__asana_create_task\",\n  input: {\n    name: \"Review PR #123\",\n    notes: \"Code review for new feature\",\n    workspace: \"12345\",\n    assignee: \"67890\",\n    due_on: \"2025-01-15\"\n  }\n}\n```\n\n### Parameter Validation\n\n**In commands, validate before calling:**\n\n```markdown\nSteps:\n1. Check required parameters:\n   - Title is not empty\n   - Workspace ID is provided\n   - Due date is valid format (YYYY-MM-DD)\n2. If validation fails, ask user to provide missing data\n3. If validation passes, call MCP tool\n4. Handle tool errors gracefully\n```\n\n## Response Handling\n\n### Success Responses\n\n```markdown\nSteps:\n1. Call MCP tool\n2. On success:\n   - Extract relevant data from response\n   - Format for user display\n   - Provide confirmation message\n   - Include relevant links or IDs\n```\n\n### Error Responses\n\n```markdown\nSteps:\n1. Call MCP tool\n2. On error:\n   - Check error type (auth, rate limit, validation, etc.)\n   - Provide helpful error message\n   - Suggest remediation steps\n   - Don't expose internal error details to user\n```\n\n### Partial Success\n\n```markdown\nSteps:\n1. Batch operation with multiple MCP calls\n2. Track successes and failures separately\n3. Report summary:\n   - \"Successfully processed 8 of 10 items\"\n   - \"Failed items: [item1, item2] due to [reason]\"\n   - Suggest retry or manual intervention\n```\n\n## Performance Optimization\n\n### Batching Requests\n\n**Good: Single query with filters**\n```markdown\nSteps:\n1. Call mcp__plugin_api_server__search with filters:\n   - project_id: \"123\"\n   - status: \"active\"\n   - limit: 100\n2. Process all results\n```\n\n**Avoid: Many individual queries**\n```markdown\nSteps:\n1. For each item ID:\n   - Call mcp__plugin_api_server__get_item\n   - Process item\n```\n\n### Caching Results\n\n```markdown\nSteps:\n1. Call expensive MCP operation: mcp__plugin_api_server__analyze\n2. Store results in variable for reuse\n3. Use cached results for subsequent operations\n4. Only re-fetch if data changes\n```\n\n### Parallel Tool Calls\n\nWhen tools don't depend on each other, call in parallel:\n\n```markdown\nSteps:\n1. Make parallel calls (Claude handles this automatically):\n   - mcp__plugin_api_server__get_project\n   - mcp__plugin_api_server__get_users\n   - mcp__plugin_api_server__get_tags\n2. Wait for all to complete\n3. Combine results\n```\n\n## Integration Best Practices\n\n### User Experience\n\n**Provide feedback:**\n```markdown\nSteps:\n1. Inform user: \"Searching Asana tasks...\"\n2. Call mcp__plugin_asana_asana__asana_search_tasks\n3. Show progress: \"Found 15 tasks, analyzing...\"\n4. Present results\n```\n\n**Handle long operations:**\n```markdown\nSteps:\n1. Warn user: \"This may take a minute...\"\n2. Break into smaller steps with updates\n3. Show incremental progress\n4. Final summary when complete\n```\n\n### Error Messages\n\n**Good error messages:**\n```\n❌ \"Could not create task. Please check:\n   1. You're logged into Asana\n   2. You have access to workspace 'Engineering'\n   3. The project 'Q1 Goals' exists\"\n```\n\n**Poor error messages:**\n```\n❌ \"Error: MCP tool returned 403\"\n```\n\n### Documentation\n\n**Document MCP tool usage in command:**\n```markdown\n## MCP Tools Used\n\nThis command uses the following Asana MCP tools:\n- **asana_search_tasks**: Search for tasks matching criteria\n- **asana_create_task**: Create new task with details\n- **asana_update_task**: Update existing task properties\n\nEnsure you're authenticated to Asana before running this command.\n```\n\n## Testing Tool Usage\n\n### Local Testing\n\n1. **Configure MCP server** in `.mcp.json`\n2. **Install plugin locally** in `.claude-plugin/`\n3. **Verify tools available** with `/mcp`\n4. **Test command** that uses tools\n5. **Check debug output**: `claude --debug`\n\n### Test Scenarios\n\n**Test successful calls:**\n```markdown\nSteps:\n1. Create test data in external service\n2. Run command that queries this data\n3. Verify correct results returned\n```\n\n**Test error cases:**\n```markdown\nSteps:\n1. Test with missing authentication\n2. Test with invalid parameters\n3. Test with non-existent resources\n4. Verify graceful error handling\n```\n\n**Test edge cases:**\n```markdown\nSteps:\n1. Test with empty results\n2. Test with maximum results\n3. Test with special characters\n4. Test with concurrent access\n```\n\n## Common Patterns\n\n### Pattern: CRUD Operations\n\n```markdown\n---\nallowed-tools: [\n  \"mcp__plugin_api_server__create_item\",\n  \"mcp__plugin_api_server__read_item\",\n  \"mcp__plugin_api_server__update_item\",\n  \"mcp__plugin_api_server__delete_item\"\n]\n---\n\n# Item Management\n\n## Create\nUse create_item with required fields...\n\n## Read\nUse read_item with item ID...\n\n## Update\nUse update_item with item ID and changes...\n\n## Delete\nUse delete_item with item ID (ask for confirmation first)...\n```\n\n### Pattern: Search and Process\n\n```markdown\nSteps:\n1. **Search**: mcp__plugin_api_server__search with filters\n2. **Filter**: Apply additional local filtering if needed\n3. **Transform**: Process each result\n4. **Present**: Format and display to user\n```\n\n### Pattern: Multi-Step Workflow\n\n```markdown\nSteps:\n1. **Setup**: Gather all required information\n2. **Validate**: Check data completeness\n3. **Execute**: Chain of MCP tool calls:\n   - Create parent resource\n   - Create child resources\n   - Link resources together\n   - Add metadata\n4. **Verify**: Confirm all steps succeeded\n5. **Report**: Provide summary to user\n```\n\n## Troubleshooting\n\n### Tools Not Available\n\n**Check:**\n- MCP server configured correctly\n- Server connected (check `/mcp`)\n- Tool names match exactly (case-sensitive)\n- Restart Claude Code after config changes\n\n### Tool Calls Failing\n\n**Check:**\n- Authentication is valid\n- Parameters match tool schema\n- Required parameters provided\n- Check `claude --debug` logs\n\n### Performance Issues\n\n**Check:**\n- Batching queries instead of individual calls\n- Caching results when appropriate\n- Not making unnecessary tool calls\n- Parallel calls when possible\n\n## Conclusion\n\nEffective MCP tool usage requires:\n1. **Understanding tool schemas** via `/mcp`\n2. **Pre-allowing tools** in commands appropriately\n3. **Handling errors gracefully**\n4. **Optimizing performance** with batching and caching\n5. **Providing good UX** with feedback and clear errors\n6. **Testing thoroughly** before deployment\n\nFollow these patterns for robust MCP tool integration in your plugin commands and agents.\n",
        "plugins/plugin-dev/skills/plugin-settings/SKILL.md": "---\nname: Plugin Settings\ndescription: This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", \"user-configurable plugin\", \".local.md files\", \"plugin state files\", \"read YAML frontmatter\", \"per-project plugin settings\", or wants to make plugin behavior configurable. Documents the .claude/plugin-name.local.md pattern for storing plugin-specific configuration with YAML frontmatter and markdown content.\nversion: 0.1.0\n---\n\n# Plugin Settings Pattern for Claude Code Plugins\n\n## Overview\n\nPlugins can store user-configurable settings and state in `.claude/plugin-name.local.md` files within the project directory. This pattern uses YAML frontmatter for structured configuration and markdown content for prompts or additional context.\n\n**Key characteristics:**\n- File location: `.claude/plugin-name.local.md` in project root\n- Structure: YAML frontmatter + markdown body\n- Purpose: Per-project plugin configuration and state\n- Usage: Read from hooks, commands, and agents\n- Lifecycle: User-managed (not in git, should be in `.gitignore`)\n\n## File Structure\n\n### Basic Template\n\n```markdown\n---\nenabled: true\nsetting1: value1\nsetting2: value2\nnumeric_setting: 42\nlist_setting: [\"item1\", \"item2\"]\n---\n\n# Additional Context\n\nThis markdown body can contain:\n- Task descriptions\n- Additional instructions\n- Prompts to feed back to Claude\n- Documentation or notes\n```\n\n### Example: Plugin State File\n\n**.claude/my-plugin.local.md:**\n```markdown\n---\nenabled: true\nstrict_mode: false\nmax_retries: 3\nnotification_level: info\ncoordinator_session: team-leader\n---\n\n# Plugin Configuration\n\nThis plugin is configured for standard validation mode.\nContact @team-lead with questions.\n```\n\n## Reading Settings Files\n\n### From Hooks (Bash Scripts)\n\n**Pattern: Check existence and parse frontmatter**\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\n# Define state file path\nSTATE_FILE=\".claude/my-plugin.local.md\"\n\n# Quick exit if file doesn't exist\nif [[ ! -f \"$STATE_FILE\" ]]; then\n  exit 0  # Plugin not configured, skip\nfi\n\n# Parse YAML frontmatter (between --- markers)\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$STATE_FILE\")\n\n# Extract individual fields\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\nSTRICT_MODE=$(echo \"$FRONTMATTER\" | grep '^strict_mode:' | sed 's/strict_mode: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n# Check if enabled\nif [[ \"$ENABLED\" != \"true\" ]]; then\n  exit 0  # Disabled\nfi\n\n# Use configuration in hook logic\nif [[ \"$STRICT_MODE\" == \"true\" ]]; then\n  # Apply strict validation\n  # ...\nfi\n```\n\nSee `examples/read-settings-hook.sh` for complete working example.\n\n### From Commands\n\nCommands can read settings files to customize behavior:\n\n```markdown\n---\ndescription: Process data with plugin\nallowed-tools: [\"Read\", \"Bash\"]\n---\n\n# Process Command\n\nSteps:\n1. Check if settings exist at `.claude/my-plugin.local.md`\n2. Read configuration using Read tool\n3. Parse YAML frontmatter to extract settings\n4. Apply settings to processing logic\n5. Execute with configured behavior\n```\n\n### From Agents\n\nAgents can reference settings in their instructions:\n\n```markdown\n---\nname: configured-agent\ndescription: Agent that adapts to project settings\n---\n\nCheck for plugin settings at `.claude/my-plugin.local.md`.\nIf present, parse YAML frontmatter and adapt behavior according to:\n- enabled: Whether plugin is active\n- mode: Processing mode (strict, standard, lenient)\n- Additional configuration fields\n```\n\n## Parsing Techniques\n\n### Extract Frontmatter\n\n```bash\n# Extract everything between --- markers\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n```\n\n### Read Individual Fields\n\n**String fields:**\n```bash\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field_name:' | sed 's/field_name: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n```\n\n**Boolean fields:**\n```bash\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n# Compare: if [[ \"$ENABLED\" == \"true\" ]]; then\n```\n\n**Numeric fields:**\n```bash\nMAX=$(echo \"$FRONTMATTER\" | grep '^max_value:' | sed 's/max_value: *//')\n# Use: if [[ $MAX -gt 100 ]]; then\n```\n\n### Read Markdown Body\n\nExtract content after second `---`:\n\n```bash\n# Get everything after closing ---\nBODY=$(awk '/^---$/{i++; next} i>=2' \"$FILE\")\n```\n\n## Common Patterns\n\n### Pattern 1: Temporarily Active Hooks\n\nUse settings file to control hook activation:\n\n```bash\n#!/bin/bash\nSTATE_FILE=\".claude/security-scan.local.md\"\n\n# Quick exit if not configured\nif [[ ! -f \"$STATE_FILE\" ]]; then\n  exit 0\nfi\n\n# Read enabled flag\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$STATE_FILE\")\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n\nif [[ \"$ENABLED\" != \"true\" ]]; then\n  exit 0  # Disabled\nfi\n\n# Run hook logic\n# ...\n```\n\n**Use case:** Enable/disable hooks without editing hooks.json (requires restart).\n\n### Pattern 2: Agent State Management\n\nStore agent-specific state and configuration:\n\n**.claude/multi-agent-swarm.local.md:**\n```markdown\n---\nagent_name: auth-agent\ntask_number: 3.5\npr_number: 1234\ncoordinator_session: team-leader\nenabled: true\ndependencies: [\"Task 3.4\"]\n---\n\n# Task Assignment\n\nImplement JWT authentication for the API.\n\n**Success Criteria:**\n- Authentication endpoints created\n- Tests passing\n- PR created and CI green\n```\n\nRead from hooks to coordinate agents:\n\n```bash\nAGENT_NAME=$(echo \"$FRONTMATTER\" | grep '^agent_name:' | sed 's/agent_name: *//')\nCOORDINATOR=$(echo \"$FRONTMATTER\" | grep '^coordinator_session:' | sed 's/coordinator_session: *//')\n\n# Send notification to coordinator\ntmux send-keys -t \"$COORDINATOR\" \"Agent $AGENT_NAME completed task\" Enter\n```\n\n### Pattern 3: Configuration-Driven Behavior\n\n**.claude/my-plugin.local.md:**\n```markdown\n---\nvalidation_level: strict\nmax_file_size: 1000000\nallowed_extensions: [\".js\", \".ts\", \".tsx\"]\nenable_logging: true\n---\n\n# Validation Configuration\n\nStrict mode enabled for this project.\nAll writes validated against security policies.\n```\n\nUse in hooks or commands:\n\n```bash\nLEVEL=$(echo \"$FRONTMATTER\" | grep '^validation_level:' | sed 's/validation_level: *//')\n\ncase \"$LEVEL\" in\n  strict)\n    # Apply strict validation\n    ;;\n  standard)\n    # Apply standard validation\n    ;;\n  lenient)\n    # Apply lenient validation\n    ;;\nesac\n```\n\n## Creating Settings Files\n\n### From Commands\n\nCommands can create settings files:\n\n```markdown\n# Setup Command\n\nSteps:\n1. Ask user for configuration preferences\n2. Create `.claude/my-plugin.local.md` with YAML frontmatter\n3. Set appropriate values based on user input\n4. Inform user that settings are saved\n5. Remind user to restart Claude Code for hooks to recognize changes\n```\n\n### Template Generation\n\nProvide template in plugin README:\n\n```markdown\n## Configuration\n\nCreate `.claude/my-plugin.local.md` in your project:\n\n\\`\\`\\`markdown\n---\nenabled: true\nmode: standard\nmax_retries: 3\n---\n\n# Plugin Configuration\n\nYour settings are active.\n\\`\\`\\`\n\nAfter creating or editing, restart Claude Code for changes to take effect.\n```\n\n## Best Practices\n\n### File Naming\n\n✅ **DO:**\n- Use `.claude/plugin-name.local.md` format\n- Match plugin name exactly\n- Use `.local.md` suffix for user-local files\n\n❌ **DON'T:**\n- Use different directory (not `.claude/`)\n- Use inconsistent naming\n- Use `.md` without `.local` (might be committed)\n\n### Gitignore\n\nAlways add to `.gitignore`:\n\n```gitignore\n.claude/*.local.md\n.claude/*.local.json\n```\n\nDocument this in plugin README.\n\n### Defaults\n\nProvide sensible defaults when settings file doesn't exist:\n\n```bash\nif [[ ! -f \"$STATE_FILE\" ]]; then\n  # Use defaults\n  ENABLED=true\n  MODE=standard\nelse\n  # Read from file\n  # ...\nfi\n```\n\n### Validation\n\nValidate settings values:\n\n```bash\nMAX=$(echo \"$FRONTMATTER\" | grep '^max_value:' | sed 's/max_value: *//')\n\n# Validate numeric range\nif ! [[ \"$MAX\" =~ ^[0-9]+$ ]] || [[ $MAX -lt 1 ]] || [[ $MAX -gt 100 ]]; then\n  echo \"⚠️  Invalid max_value in settings (must be 1-100)\" >&2\n  MAX=10  # Use default\nfi\n```\n\n### Restart Requirement\n\n**Important:** Settings changes require Claude Code restart.\n\nDocument in your README:\n\n```markdown\n## Changing Settings\n\nAfter editing `.claude/my-plugin.local.md`:\n1. Save the file\n2. Exit Claude Code\n3. Restart: `claude` or `cc`\n4. New settings will be loaded\n```\n\nHooks cannot be hot-swapped within a session.\n\n## Security Considerations\n\n### Sanitize User Input\n\nWhen writing settings files from user input:\n\n```bash\n# Escape quotes in user input\nSAFE_VALUE=$(echo \"$USER_INPUT\" | sed 's/\"/\\\\\"/g')\n\n# Write to file\ncat > \"$STATE_FILE\" <<EOF\n---\nuser_setting: \"$SAFE_VALUE\"\n---\nEOF\n```\n\n### Validate File Paths\n\nIf settings contain file paths:\n\n```bash\nFILE_PATH=$(echo \"$FRONTMATTER\" | grep '^data_file:' | sed 's/data_file: *//')\n\n# Check for path traversal\nif [[ \"$FILE_PATH\" == *\"..\"* ]]; then\n  echo \"⚠️  Invalid path in settings (path traversal)\" >&2\n  exit 2\nfi\n```\n\n### Permissions\n\nSettings files should be:\n- Readable by user only (`chmod 600`)\n- Not committed to git\n- Not shared between users\n\n## Real-World Examples\n\n### multi-agent-swarm Plugin\n\n**.claude/multi-agent-swarm.local.md:**\n```markdown\n---\nagent_name: auth-implementation\ntask_number: 3.5\npr_number: 1234\ncoordinator_session: team-leader\nenabled: true\ndependencies: [\"Task 3.4\"]\nadditional_instructions: Use JWT tokens, not sessions\n---\n\n# Task: Implement Authentication\n\nBuild JWT-based authentication for the REST API.\nCoordinate with auth-agent on shared types.\n```\n\n**Hook usage (agent-stop-notification.sh):**\n- Checks if file exists (line 15-18: quick exit if not)\n- Parses frontmatter to get coordinator_session, agent_name, enabled\n- Sends notifications to coordinator if enabled\n- Allows quick activation/deactivation via `enabled: true/false`\n\n### ralph-wiggum Plugin\n\n**.claude/ralph-loop.local.md:**\n```markdown\n---\niteration: 1\nmax_iterations: 10\ncompletion_promise: \"All tests passing and build successful\"\n---\n\nFix all the linting errors in the project.\nMake sure tests pass after each fix.\n```\n\n**Hook usage (stop-hook.sh):**\n- Checks if file exists (line 15-18: quick exit if not active)\n- Reads iteration count and max_iterations\n- Extracts completion_promise for loop termination\n- Reads body as the prompt to feed back\n- Updates iteration count on each loop\n\n## Quick Reference\n\n### File Location\n\n```\nproject-root/\n└── .claude/\n    └── plugin-name.local.md\n```\n\n### Frontmatter Parsing\n\n```bash\n# Extract frontmatter\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n\n# Read field\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field:' | sed 's/field: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n```\n\n### Body Parsing\n\n```bash\n# Extract body (after second ---)\nBODY=$(awk '/^---$/{i++; next} i>=2' \"$FILE\")\n```\n\n### Quick Exit Pattern\n\n```bash\nif [[ ! -f \".claude/my-plugin.local.md\" ]]; then\n  exit 0  # Not configured\nfi\n```\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed implementation patterns:\n\n- **`references/parsing-techniques.md`** - Complete guide to parsing YAML frontmatter and markdown bodies\n- **`references/real-world-examples.md`** - Deep dive into multi-agent-swarm and ralph-wiggum implementations\n\n### Example Files\n\nWorking examples in `examples/`:\n\n- **`read-settings-hook.sh`** - Hook that reads and uses settings\n- **`create-settings-command.md`** - Command that creates settings file\n- **`example-settings.md`** - Template settings file\n\n### Utility Scripts\n\nDevelopment tools in `scripts/`:\n\n- **`validate-settings.sh`** - Validate settings file structure\n- **`parse-frontmatter.sh`** - Extract frontmatter fields\n\n## Implementation Workflow\n\nTo add settings to a plugin:\n\n1. Design settings schema (which fields, types, defaults)\n2. Create template file in plugin documentation\n3. Add gitignore entry for `.claude/*.local.md`\n4. Implement settings parsing in hooks/commands\n5. Use quick-exit pattern (check file exists, check enabled field)\n6. Document settings in plugin README with template\n7. Remind users that changes require Claude Code restart\n\nFocus on keeping settings simple and providing good defaults when settings file doesn't exist.\n",
        "plugins/plugin-dev/skills/plugin-settings/examples/create-settings-command.md": "---\ndescription: \"Create plugin settings file with user preferences\"\nallowed-tools: [\"Write\", \"AskUserQuestion\"]\n---\n\n# Create Plugin Settings\n\nThis command helps users create a `.claude/my-plugin.local.md` settings file.\n\n## Steps\n\n### Step 1: Ask User for Preferences\n\nUse AskUserQuestion to gather configuration:\n\n```json\n{\n  \"questions\": [\n    {\n      \"question\": \"Enable plugin for this project?\",\n      \"header\": \"Enable Plugin\",\n      \"multiSelect\": false,\n      \"options\": [\n        {\n          \"label\": \"Yes\",\n          \"description\": \"Plugin will be active\"\n        },\n        {\n          \"label\": \"No\",\n          \"description\": \"Plugin will be disabled\"\n        }\n      ]\n    },\n    {\n      \"question\": \"Validation mode?\",\n      \"header\": \"Mode\",\n      \"multiSelect\": false,\n      \"options\": [\n        {\n          \"label\": \"Strict\",\n          \"description\": \"Maximum validation and security checks\"\n        },\n        {\n          \"label\": \"Standard\",\n          \"description\": \"Balanced validation (recommended)\"\n        },\n        {\n          \"label\": \"Lenient\",\n          \"description\": \"Minimal validation only\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n### Step 2: Parse Answers\n\nExtract answers from AskUserQuestion result:\n\n- answers[\"0\"]: enabled (Yes/No)\n- answers[\"1\"]: mode (Strict/Standard/Lenient)\n\n### Step 3: Create Settings File\n\nUse Write tool to create `.claude/my-plugin.local.md`:\n\n```markdown\n---\nenabled: <true if Yes, false if No>\nvalidation_mode: <strict, standard, or lenient>\nmax_file_size: 1000000\nnotify_on_errors: true\n---\n\n# Plugin Configuration\n\nYour plugin is configured with <mode> validation mode.\n\nTo modify settings, edit this file and restart Claude Code.\n```\n\n### Step 4: Inform User\n\nTell the user:\n- Settings file created at `.claude/my-plugin.local.md`\n- Current configuration summary\n- How to edit manually if needed\n- Reminder: Restart Claude Code for changes to take effect\n- Settings file is gitignored (won't be committed)\n\n## Implementation Notes\n\nAlways validate user input before writing:\n- Check mode is valid\n- Validate numeric fields are numbers\n- Ensure paths don't have traversal attempts\n- Sanitize any free-text fields\n",
        "plugins/plugin-dev/skills/plugin-settings/examples/example-settings.md": "# Example Plugin Settings File\n\n## Template: Basic Configuration\n\n**.claude/my-plugin.local.md:**\n\n```markdown\n---\nenabled: true\nmode: standard\n---\n\n# My Plugin Configuration\n\nPlugin is active in standard mode.\n```\n\n## Template: Advanced Configuration\n\n**.claude/my-plugin.local.md:**\n\n```markdown\n---\nenabled: true\nstrict_mode: false\nmax_file_size: 1000000\nallowed_extensions: [\".js\", \".ts\", \".tsx\"]\nenable_logging: true\nnotification_level: info\nretry_attempts: 3\ntimeout_seconds: 60\ncustom_path: \"/path/to/data\"\n---\n\n# My Plugin Advanced Configuration\n\nThis project uses custom plugin configuration with:\n- Standard validation mode\n- 1MB file size limit\n- JavaScript/TypeScript files allowed\n- Info-level logging\n- 3 retry attempts\n\n## Additional Notes\n\nContact @team-lead with questions about this configuration.\n```\n\n## Template: Agent State File\n\n**.claude/multi-agent-swarm.local.md:**\n\n```markdown\n---\nagent_name: database-implementation\ntask_number: 4.2\npr_number: 5678\ncoordinator_session: team-leader\nenabled: true\ndependencies: [\"Task 3.5\", \"Task 4.1\"]\nadditional_instructions: \"Use PostgreSQL, not MySQL\"\n---\n\n# Task Assignment: Database Schema Implementation\n\nImplement the database schema for the new features module.\n\n## Requirements\n\n- Create migration files\n- Add indexes for performance\n- Write tests for constraints\n- Document schema in README\n\n## Success Criteria\n\n- Migrations run successfully\n- All tests pass\n- PR created with CI green\n- Schema documented\n\n## Coordination\n\nDepends on:\n- Task 3.5: API endpoint definitions\n- Task 4.1: Data model design\n\nReport status to coordinator session 'team-leader'.\n```\n\n## Template: Feature Flag Pattern\n\n**.claude/experimental-features.local.md:**\n\n```markdown\n---\nenabled: true\nfeatures:\n  - ai_suggestions\n  - auto_formatting\n  - advanced_refactoring\nexperimental_mode: false\n---\n\n# Experimental Features Configuration\n\nCurrent enabled features:\n- AI-powered code suggestions\n- Automatic code formatting\n- Advanced refactoring tools\n\nExperimental mode is OFF (stable features only).\n```\n\n## Usage in Hooks\n\nThese templates can be read by hooks:\n\n```bash\n# Check if plugin is configured\nif [[ ! -f \".claude/my-plugin.local.md\" ]]; then\n  exit 0  # Not configured, skip hook\nfi\n\n# Read settings\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \".claude/my-plugin.local.md\")\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n\n# Apply settings\nif [[ \"$ENABLED\" == \"true\" ]]; then\n  # Hook is active\n  # ...\nfi\n```\n\n## Gitignore\n\nAlways add to project `.gitignore`:\n\n```gitignore\n# Plugin settings (user-local, not committed)\n.claude/*.local.md\n.claude/*.local.json\n```\n\n## Editing Settings\n\nUsers can edit settings files manually:\n\n```bash\n# Edit settings\nvim .claude/my-plugin.local.md\n\n# Changes take effect after restart\nexit  # Exit Claude Code\nclaude  # Restart\n```\n\nChanges require Claude Code restart - hooks can't be hot-swapped.\n",
        "plugins/plugin-dev/skills/plugin-settings/references/parsing-techniques.md": "# Settings File Parsing Techniques\n\nComplete guide to parsing `.claude/plugin-name.local.md` files in bash scripts.\n\n## File Structure\n\nSettings files use markdown with YAML frontmatter:\n\n```markdown\n---\nfield1: value1\nfield2: \"value with spaces\"\nnumeric_field: 42\nboolean_field: true\nlist_field: [\"item1\", \"item2\", \"item3\"]\n---\n\n# Markdown Content\n\nThis body content can be extracted separately.\nIt's useful for prompts, documentation, or additional context.\n```\n\n## Parsing Frontmatter\n\n### Extract Frontmatter Block\n\n```bash\n#!/bin/bash\nFILE=\".claude/my-plugin.local.md\"\n\n# Extract everything between --- markers (excluding the markers themselves)\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n```\n\n**How it works:**\n- `sed -n` - Suppress automatic printing\n- `/^---$/,/^---$/` - Range from first `---` to second `---`\n- `{ /^---$/d; p; }` - Delete the `---` lines, print everything else\n\n### Extract Individual Fields\n\n**String fields:**\n```bash\n# Simple value\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field_name:' | sed 's/field_name: *//')\n\n# Quoted value (removes surrounding quotes)\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field_name:' | sed 's/field_name: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n```\n\n**Boolean fields:**\n```bash\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n\n# Use in condition\nif [[ \"$ENABLED\" == \"true\" ]]; then\n  # Enabled\nfi\n```\n\n**Numeric fields:**\n```bash\nMAX=$(echo \"$FRONTMATTER\" | grep '^max_value:' | sed 's/max_value: *//')\n\n# Validate it's a number\nif [[ \"$MAX\" =~ ^[0-9]+$ ]]; then\n  # Use in numeric comparison\n  if [[ $MAX -gt 100 ]]; then\n    # Too large\n  fi\nfi\n```\n\n**List fields (simple):**\n```bash\n# YAML: list: [\"item1\", \"item2\", \"item3\"]\nLIST=$(echo \"$FRONTMATTER\" | grep '^list:' | sed 's/list: *//')\n# Result: [\"item1\", \"item2\", \"item3\"]\n\n# For simple checks:\nif [[ \"$LIST\" == *\"item1\"* ]]; then\n  # List contains item1\nfi\n```\n\n**List fields (proper parsing with jq):**\n```bash\n# For proper list handling, use yq or convert to JSON\n# This requires yq to be installed (brew install yq)\n\n# Extract list as JSON array\nLIST=$(echo \"$FRONTMATTER\" | yq -o json '.list' 2>/dev/null)\n\n# Iterate over items\necho \"$LIST\" | jq -r '.[]' | while read -r item; do\n  echo \"Processing: $item\"\ndone\n```\n\n## Parsing Markdown Body\n\n### Extract Body Content\n\n```bash\n#!/bin/bash\nFILE=\".claude/my-plugin.local.md\"\n\n# Extract everything after the closing ---\n# Counts --- markers: first is opening, second is closing, everything after is body\nBODY=$(awk '/^---$/{i++; next} i>=2' \"$FILE\")\n```\n\n**How it works:**\n- `/^---$/` - Match `---` lines\n- `{i++; next}` - Increment counter and skip the `---` line\n- `i>=2` - Print all lines after second `---`\n\n**Handles edge case:** If `---` appears in the markdown body, it still works because we only count the first two `---` at the start.\n\n### Use Body as Prompt\n\n```bash\n# Extract body\nPROMPT=$(awk '/^---$/{i++; next} i>=2' \"$RALPH_STATE_FILE\")\n\n# Feed back to Claude\necho '{\"decision\": \"block\", \"reason\": \"'\"$PROMPT\"'\"}' | jq .\n```\n\n**Important:** Use `jq -n --arg` for safer JSON construction with user content:\n\n```bash\nPROMPT=$(awk '/^---$/{i++; next} i>=2' \"$FILE\")\n\n# Safe JSON construction\njq -n --arg prompt \"$PROMPT\" '{\n  \"decision\": \"block\",\n  \"reason\": $prompt\n}'\n```\n\n## Common Parsing Patterns\n\n### Pattern: Field with Default\n\n```bash\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field:' | sed 's/field: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n# Use default if empty\nif [[ -z \"$VALUE\" ]]; then\n  VALUE=\"default_value\"\nfi\n```\n\n### Pattern: Optional Field\n\n```bash\nOPTIONAL=$(echo \"$FRONTMATTER\" | grep '^optional_field:' | sed 's/optional_field: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n# Only use if present\nif [[ -n \"$OPTIONAL\" ]] && [[ \"$OPTIONAL\" != \"null\" ]]; then\n  # Field is set, use it\n  echo \"Optional field: $OPTIONAL\"\nfi\n```\n\n### Pattern: Multiple Fields at Once\n\n```bash\n# Parse all fields in one pass\nwhile IFS=': ' read -r key value; do\n  # Remove quotes if present\n  value=$(echo \"$value\" | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n  case \"$key\" in\n    enabled)\n      ENABLED=\"$value\"\n      ;;\n    mode)\n      MODE=\"$value\"\n      ;;\n    max_size)\n      MAX_SIZE=\"$value\"\n      ;;\n  esac\ndone <<< \"$FRONTMATTER\"\n```\n\n## Updating Settings Files\n\n### Atomic Updates\n\nAlways use temp file + atomic move to prevent corruption:\n\n```bash\n#!/bin/bash\nFILE=\".claude/my-plugin.local.md\"\nNEW_VALUE=\"updated_value\"\n\n# Create temp file\nTEMP_FILE=\"${FILE}.tmp.$$\"\n\n# Update field using sed\nsed \"s/^field_name: .*/field_name: $NEW_VALUE/\" \"$FILE\" > \"$TEMP_FILE\"\n\n# Atomic replace\nmv \"$TEMP_FILE\" \"$FILE\"\n```\n\n### Update Single Field\n\n```bash\n# Increment iteration counter\nCURRENT=$(echo \"$FRONTMATTER\" | grep '^iteration:' | sed 's/iteration: *//')\nNEXT=$((CURRENT + 1))\n\n# Update file\nTEMP_FILE=\"${FILE}.tmp.$$\"\nsed \"s/^iteration: .*/iteration: $NEXT/\" \"$FILE\" > \"$TEMP_FILE\"\nmv \"$TEMP_FILE\" \"$FILE\"\n```\n\n### Update Multiple Fields\n\n```bash\n# Update several fields at once\nTEMP_FILE=\"${FILE}.tmp.$$\"\n\nsed -e \"s/^iteration: .*/iteration: $NEXT_ITERATION/\" \\\n    -e \"s/^pr_number: .*/pr_number: $PR_NUMBER/\" \\\n    -e \"s/^status: .*/status: $NEW_STATUS/\" \\\n    \"$FILE\" > \"$TEMP_FILE\"\n\nmv \"$TEMP_FILE\" \"$FILE\"\n```\n\n## Validation Techniques\n\n### Validate File Exists and Is Readable\n\n```bash\nFILE=\".claude/my-plugin.local.md\"\n\nif [[ ! -f \"$FILE\" ]]; then\n  echo \"Settings file not found\" >&2\n  exit 1\nfi\n\nif [[ ! -r \"$FILE\" ]]; then\n  echo \"Settings file not readable\" >&2\n  exit 1\nfi\n```\n\n### Validate Frontmatter Structure\n\n```bash\n# Count --- markers (should be exactly 2 at start)\nMARKER_COUNT=$(grep -c '^---$' \"$FILE\" 2>/dev/null || echo \"0\")\n\nif [[ $MARKER_COUNT -lt 2 ]]; then\n  echo \"Invalid settings file: missing frontmatter markers\" >&2\n  exit 1\nfi\n```\n\n### Validate Field Values\n\n```bash\nMODE=$(echo \"$FRONTMATTER\" | grep '^mode:' | sed 's/mode: *//')\n\ncase \"$MODE\" in\n  strict|standard|lenient)\n    # Valid mode\n    ;;\n  *)\n    echo \"Invalid mode: $MODE (must be strict, standard, or lenient)\" >&2\n    exit 1\n    ;;\nesac\n```\n\n### Validate Numeric Ranges\n\n```bash\nMAX_SIZE=$(echo \"$FRONTMATTER\" | grep '^max_size:' | sed 's/max_size: *//')\n\nif ! [[ \"$MAX_SIZE\" =~ ^[0-9]+$ ]]; then\n  echo \"max_size must be a number\" >&2\n  exit 1\nfi\n\nif [[ $MAX_SIZE -lt 1 ]] || [[ $MAX_SIZE -gt 10000000 ]]; then\n  echo \"max_size out of range (1-10000000)\" >&2\n  exit 1\nfi\n```\n\n## Edge Cases and Gotchas\n\n### Quotes in Values\n\nYAML allows both quoted and unquoted strings:\n\n```yaml\n# These are equivalent:\nfield1: value\nfield2: \"value\"\nfield3: 'value'\n```\n\n**Handle both:**\n```bash\n# Remove surrounding quotes if present\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field:' | sed 's/field: *//' | sed 's/^\"\\(.*\\)\"$/\\1/' | sed \"s/^'\\\\(.*\\\\)'$/\\\\1/\")\n```\n\n### --- in Markdown Body\n\nIf the markdown body contains `---`, the parsing still works because we only match the first two:\n\n```markdown\n---\nfield: value\n---\n\n# Body\n\nHere's a separator:\n---\n\nMore content after the separator.\n```\n\nThe `awk '/^---$/{i++; next} i>=2'` pattern handles this correctly.\n\n### Empty Values\n\nHandle missing or empty fields:\n\n```yaml\nfield1:\nfield2: \"\"\nfield3: null\n```\n\n**Parsing:**\n```bash\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field1:' | sed 's/field1: *//')\n# VALUE will be empty string\n\n# Check for empty/null\nif [[ -z \"$VALUE\" ]] || [[ \"$VALUE\" == \"null\" ]]; then\n  VALUE=\"default\"\nfi\n```\n\n### Special Characters\n\nValues with special characters need careful handling:\n\n```yaml\nmessage: \"Error: Something went wrong!\"\npath: \"/path/with spaces/file.txt\"\nregex: \"^[a-zA-Z0-9_]+$\"\n```\n\n**Safe parsing:**\n```bash\n# Always quote variables when using\nMESSAGE=$(echo \"$FRONTMATTER\" | grep '^message:' | sed 's/message: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\necho \"Message: $MESSAGE\"  # Quoted!\n```\n\n## Performance Optimization\n\n### Cache Parsed Values\n\nIf reading settings multiple times:\n\n```bash\n# Parse once\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n\n# Extract multiple fields from cached frontmatter\nFIELD1=$(echo \"$FRONTMATTER\" | grep '^field1:' | sed 's/field1: *//')\nFIELD2=$(echo \"$FRONTMATTER\" | grep '^field2:' | sed 's/field2: *//')\nFIELD3=$(echo \"$FRONTMATTER\" | grep '^field3:' | sed 's/field3: *//')\n```\n\n**Don't:** Re-parse file for each field.\n\n### Lazy Loading\n\nOnly parse settings when needed:\n\n```bash\n#!/bin/bash\ninput=$(cat)\n\n# Quick checks first (no file I/O)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\nif [[ \"$tool_name\" != \"Write\" ]]; then\n  exit 0  # Not a write operation, skip\nfi\n\n# Only now check settings file\nif [[ -f \".claude/my-plugin.local.md\" ]]; then\n  # Parse settings\n  # ...\nfi\n```\n\n## Debugging\n\n### Print Parsed Values\n\n```bash\n#!/bin/bash\nset -x  # Enable debug tracing\n\nFILE=\".claude/my-plugin.local.md\"\n\nif [[ -f \"$FILE\" ]]; then\n  echo \"Settings file found\" >&2\n\n  FRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n  echo \"Frontmatter:\" >&2\n  echo \"$FRONTMATTER\" >&2\n\n  ENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n  echo \"Enabled: $ENABLED\" >&2\nfi\n```\n\n### Validate Parsing\n\n```bash\n# Show what was parsed\necho \"Parsed values:\" >&2\necho \"  enabled: $ENABLED\" >&2\necho \"  mode: $MODE\" >&2\necho \"  max_size: $MAX_SIZE\" >&2\n\n# Verify expected values\nif [[ \"$ENABLED\" != \"true\" ]] && [[ \"$ENABLED\" != \"false\" ]]; then\n  echo \"⚠️  Unexpected enabled value: $ENABLED\" >&2\nfi\n```\n\n## Alternative: Using yq\n\nFor complex YAML, consider using `yq`:\n\n```bash\n# Install: brew install yq\n\n# Parse YAML properly\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n\n# Extract fields with yq\nENABLED=$(echo \"$FRONTMATTER\" | yq '.enabled')\nMODE=$(echo \"$FRONTMATTER\" | yq '.mode')\nLIST=$(echo \"$FRONTMATTER\" | yq -o json '.list_field')\n\n# Iterate list properly\necho \"$LIST\" | jq -r '.[]' | while read -r item; do\n  echo \"Item: $item\"\ndone\n```\n\n**Pros:**\n- Proper YAML parsing\n- Handles complex structures\n- Better list/object support\n\n**Cons:**\n- Requires yq installation\n- Additional dependency\n- May not be available on all systems\n\n**Recommendation:** Use sed/grep for simple fields, yq for complex structures.\n\n## Complete Example\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\n# Configuration\nSETTINGS_FILE=\".claude/my-plugin.local.md\"\n\n# Quick exit if not configured\nif [[ ! -f \"$SETTINGS_FILE\" ]]; then\n  # Use defaults\n  ENABLED=true\n  MODE=standard\n  MAX_SIZE=1000000\nelse\n  # Parse frontmatter\n  FRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$SETTINGS_FILE\")\n\n  # Extract fields with defaults\n  ENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n  ENABLED=${ENABLED:-true}\n\n  MODE=$(echo \"$FRONTMATTER\" | grep '^mode:' | sed 's/mode: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n  MODE=${MODE:-standard}\n\n  MAX_SIZE=$(echo \"$FRONTMATTER\" | grep '^max_size:' | sed 's/max_size: *//')\n  MAX_SIZE=${MAX_SIZE:-1000000}\n\n  # Validate values\n  if [[ \"$ENABLED\" != \"true\" ]] && [[ \"$ENABLED\" != \"false\" ]]; then\n    echo \"⚠️  Invalid enabled value, using default\" >&2\n    ENABLED=true\n  fi\n\n  if ! [[ \"$MAX_SIZE\" =~ ^[0-9]+$ ]]; then\n    echo \"⚠️  Invalid max_size, using default\" >&2\n    MAX_SIZE=1000000\n  fi\nfi\n\n# Quick exit if disabled\nif [[ \"$ENABLED\" != \"true\" ]]; then\n  exit 0\nfi\n\n# Use configuration\necho \"Configuration loaded: mode=$MODE, max_size=$MAX_SIZE\" >&2\n\n# Apply logic based on settings\ncase \"$MODE\" in\n  strict)\n    # Strict validation\n    ;;\n  standard)\n    # Standard validation\n    ;;\n  lenient)\n    # Lenient validation\n    ;;\nesac\n```\n\nThis provides robust settings handling with defaults, validation, and error recovery.\n",
        "plugins/plugin-dev/skills/plugin-settings/references/real-world-examples.md": "# Real-World Plugin Settings Examples\n\nDetailed analysis of how production plugins use the `.claude/plugin-name.local.md` pattern.\n\n## multi-agent-swarm Plugin\n\n### Settings File Structure\n\n**.claude/multi-agent-swarm.local.md:**\n\n```markdown\n---\nagent_name: auth-implementation\ntask_number: 3.5\npr_number: 1234\ncoordinator_session: team-leader\nenabled: true\ndependencies: [\"Task 3.4\"]\nadditional_instructions: \"Use JWT tokens, not sessions\"\n---\n\n# Task: Implement Authentication\n\nBuild JWT-based authentication for the REST API.\n\n## Requirements\n- JWT token generation and validation\n- Refresh token flow\n- Secure password hashing\n\n## Success Criteria\n- Auth endpoints implemented\n- Tests passing (100% coverage)\n- PR created and CI green\n- Documentation updated\n\n## Coordination\nDepends on Task 3.4 (user model).\nReport status to 'team-leader' session.\n```\n\n### How It's Used\n\n**File:** `hooks/agent-stop-notification.sh`\n\n**Purpose:** Send notifications to coordinator when agent becomes idle\n\n**Implementation:**\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\nSWARM_STATE_FILE=\".claude/multi-agent-swarm.local.md\"\n\n# Quick exit if no swarm active\nif [[ ! -f \"$SWARM_STATE_FILE\" ]]; then\n  exit 0\nfi\n\n# Parse frontmatter\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$SWARM_STATE_FILE\")\n\n# Extract configuration\nCOORDINATOR_SESSION=$(echo \"$FRONTMATTER\" | grep '^coordinator_session:' | sed 's/coordinator_session: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\nAGENT_NAME=$(echo \"$FRONTMATTER\" | grep '^agent_name:' | sed 's/agent_name: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\nTASK_NUMBER=$(echo \"$FRONTMATTER\" | grep '^task_number:' | sed 's/task_number: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\nPR_NUMBER=$(echo \"$FRONTMATTER\" | grep '^pr_number:' | sed 's/pr_number: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n\n# Check if enabled\nif [[ \"$ENABLED\" != \"true\" ]]; then\n  exit 0\nfi\n\n# Send notification to coordinator\nNOTIFICATION=\"🤖 Agent ${AGENT_NAME} (Task ${TASK_NUMBER}, PR #${PR_NUMBER}) is idle.\"\n\nif tmux has-session -t \"$COORDINATOR_SESSION\" 2>/dev/null; then\n  tmux send-keys -t \"$COORDINATOR_SESSION\" \"$NOTIFICATION\" Enter\n  sleep 0.5\n  tmux send-keys -t \"$COORDINATOR_SESSION\" Enter\nfi\n\nexit 0\n```\n\n**Key patterns:**\n1. **Quick exit** (line 7-9): Returns immediately if file doesn't exist\n2. **Field extraction** (lines 11-17): Parses each frontmatter field\n3. **Enabled check** (lines 19-21): Respects enabled flag\n4. **Action based on settings** (lines 23-29): Uses coordinator_session to send notification\n\n### Creation\n\n**File:** `commands/launch-swarm.md`\n\nSettings files are created during swarm launch with:\n\n```bash\ncat > \"$WORKTREE_PATH/.claude/multi-agent-swarm.local.md\" <<EOF\n---\nagent_name: $AGENT_NAME\ntask_number: $TASK_ID\npr_number: TBD\ncoordinator_session: $COORDINATOR_SESSION\nenabled: true\ndependencies: [$DEPENDENCIES]\nadditional_instructions: \"$EXTRA_INSTRUCTIONS\"\n---\n\n# Task: $TASK_DESCRIPTION\n\n$TASK_DETAILS\nEOF\n```\n\n### Updates\n\nPR number updated after PR creation:\n\n```bash\n# Update pr_number field\nsed \"s/^pr_number: .*/pr_number: $PR_NUM/\" \\\n  \".claude/multi-agent-swarm.local.md\" > temp.md\nmv temp.md \".claude/multi-agent-swarm.local.md\"\n```\n\n## ralph-wiggum Plugin\n\n### Settings File Structure\n\n**.claude/ralph-loop.local.md:**\n\n```markdown\n---\niteration: 1\nmax_iterations: 10\ncompletion_promise: \"All tests passing and build successful\"\nstarted_at: \"2025-01-15T14:30:00Z\"\n---\n\nFix all the linting errors in the project.\nMake sure tests pass after each fix.\nDocument any changes needed in CLAUDE.md.\n```\n\n### How It's Used\n\n**File:** `hooks/stop-hook.sh`\n\n**Purpose:** Prevent session exit and loop Claude's output back as input\n\n**Implementation:**\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\nRALPH_STATE_FILE=\".claude/ralph-loop.local.md\"\n\n# Quick exit if no active loop\nif [[ ! -f \"$RALPH_STATE_FILE\" ]]; then\n  exit 0\nfi\n\n# Parse frontmatter\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$RALPH_STATE_FILE\")\n\n# Extract configuration\nITERATION=$(echo \"$FRONTMATTER\" | grep '^iteration:' | sed 's/iteration: *//')\nMAX_ITERATIONS=$(echo \"$FRONTMATTER\" | grep '^max_iterations:' | sed 's/max_iterations: *//')\nCOMPLETION_PROMISE=$(echo \"$FRONTMATTER\" | grep '^completion_promise:' | sed 's/completion_promise: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n# Check max iterations\nif [[ $MAX_ITERATIONS -gt 0 ]] && [[ $ITERATION -ge $MAX_ITERATIONS ]]; then\n  echo \"🛑 Ralph loop: Max iterations ($MAX_ITERATIONS) reached.\"\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Get transcript and check for completion promise\nTRANSCRIPT_PATH=$(echo \"$HOOK_INPUT\" | jq -r '.transcript_path')\nLAST_OUTPUT=$(grep '\"role\":\"assistant\"' \"$TRANSCRIPT_PATH\" | tail -1 | jq -r '.message.content | map(select(.type == \"text\")) | map(.text) | join(\"\\n\")')\n\n# Check for completion\nif [[ \"$COMPLETION_PROMISE\" != \"null\" ]] && [[ -n \"$COMPLETION_PROMISE\" ]]; then\n  PROMISE_TEXT=$(echo \"$LAST_OUTPUT\" | perl -0777 -pe 's/.*?<promise>(.*?)<\\/promise>.*/$1/s; s/^\\s+|\\s+$//g')\n\n  if [[ \"$PROMISE_TEXT\" = \"$COMPLETION_PROMISE\" ]]; then\n    echo \"✅ Ralph loop: Detected completion\"\n    rm \"$RALPH_STATE_FILE\"\n    exit 0\n  fi\nfi\n\n# Continue loop - increment iteration\nNEXT_ITERATION=$((ITERATION + 1))\n\n# Extract prompt from markdown body\nPROMPT_TEXT=$(awk '/^---$/{i++; next} i>=2' \"$RALPH_STATE_FILE\")\n\n# Update iteration counter\nTEMP_FILE=\"${RALPH_STATE_FILE}.tmp.$$\"\nsed \"s/^iteration: .*/iteration: $NEXT_ITERATION/\" \"$RALPH_STATE_FILE\" > \"$TEMP_FILE\"\nmv \"$TEMP_FILE\" \"$RALPH_STATE_FILE\"\n\n# Block exit and feed prompt back\njq -n \\\n  --arg prompt \"$PROMPT_TEXT\" \\\n  --arg msg \"🔄 Ralph iteration $NEXT_ITERATION\" \\\n  '{\n    \"decision\": \"block\",\n    \"reason\": $prompt,\n    \"systemMessage\": $msg\n  }'\n\nexit 0\n```\n\n**Key patterns:**\n1. **Quick exit** (line 7-9): Skip if not active\n2. **Iteration tracking** (lines 11-20): Count and enforce max iterations\n3. **Promise detection** (lines 25-33): Check for completion signal in output\n4. **Prompt extraction** (line 38): Read markdown body as next prompt\n5. **State update** (lines 40-43): Increment iteration atomically\n6. **Loop continuation** (lines 45-53): Block exit and feed prompt back\n\n### Creation\n\n**File:** `scripts/setup-ralph-loop.sh`\n\n```bash\n#!/bin/bash\nPROMPT=\"$1\"\nMAX_ITERATIONS=\"${2:-0}\"\nCOMPLETION_PROMISE=\"${3:-}\"\n\n# Create state file\ncat > \".claude/ralph-loop.local.md\" <<EOF\n---\niteration: 1\nmax_iterations: $MAX_ITERATIONS\ncompletion_promise: \"$COMPLETION_PROMISE\"\nstarted_at: \"$(date -Iseconds)\"\n---\n\n$PROMPT\nEOF\n\necho \"Ralph loop initialized: .claude/ralph-loop.local.md\"\n```\n\n## Pattern Comparison\n\n| Feature | multi-agent-swarm | ralph-wiggum |\n|---------|-------------------|--------------|\n| **File** | `.claude/multi-agent-swarm.local.md` | `.claude/ralph-loop.local.md` |\n| **Purpose** | Agent coordination state | Loop iteration state |\n| **Frontmatter** | Agent metadata | Loop configuration |\n| **Body** | Task assignment | Prompt to loop |\n| **Updates** | PR number, status | Iteration counter |\n| **Deletion** | Manual or on completion | On loop exit |\n| **Hook** | Stop (notifications) | Stop (loop control) |\n\n## Best Practices from Real Plugins\n\n### 1. Quick Exit Pattern\n\nBoth plugins check file existence first:\n\n```bash\nif [[ ! -f \"$STATE_FILE\" ]]; then\n  exit 0  # Not active\nfi\n```\n\n**Why:** Avoids errors when plugin isn't configured and performs fast.\n\n### 2. Enabled Flag\n\nBoth use an `enabled` field for explicit control:\n\n```yaml\nenabled: true\n```\n\n**Why:** Allows temporary deactivation without deleting file.\n\n### 3. Atomic Updates\n\nBoth use temp file + atomic move:\n\n```bash\nTEMP_FILE=\"${FILE}.tmp.$$\"\nsed \"s/^field: .*/field: $NEW_VALUE/\" \"$FILE\" > \"$TEMP_FILE\"\nmv \"$TEMP_FILE\" \"$FILE\"\n```\n\n**Why:** Prevents corruption if process is interrupted.\n\n### 4. Quote Handling\n\nBoth strip surrounding quotes from YAML values:\n\n```bash\nsed 's/^\"\\(.*\\)\"$/\\1/'\n```\n\n**Why:** YAML allows both `field: value` and `field: \"value\"`.\n\n### 5. Error Handling\n\nBoth handle missing/corrupt files gracefully:\n\n```bash\nif [[ ! -f \"$FILE\" ]]; then\n  exit 0  # No error, just not configured\nfi\n\nif [[ -z \"$CRITICAL_FIELD\" ]]; then\n  echo \"Settings file corrupt\" >&2\n  rm \"$FILE\"  # Clean up\n  exit 0\nfi\n```\n\n**Why:** Fails gracefully instead of crashing.\n\n## Anti-Patterns to Avoid\n\n### ❌ Hardcoded Paths\n\n```bash\n# BAD\nFILE=\"/Users/alice/.claude/my-plugin.local.md\"\n\n# GOOD\nFILE=\".claude/my-plugin.local.md\"\n```\n\n### ❌ Unquoted Variables\n\n```bash\n# BAD\necho $VALUE\n\n# GOOD\necho \"$VALUE\"\n```\n\n### ❌ Non-Atomic Updates\n\n```bash\n# BAD: Can corrupt file if interrupted\nsed -i \"s/field: .*/field: $VALUE/\" \"$FILE\"\n\n# GOOD: Atomic\nTEMP_FILE=\"${FILE}.tmp.$$\"\nsed \"s/field: .*/field: $VALUE/\" \"$FILE\" > \"$TEMP_FILE\"\nmv \"$TEMP_FILE\" \"$FILE\"\n```\n\n### ❌ No Default Values\n\n```bash\n# BAD: Fails if field missing\nif [[ $MAX -gt 100 ]]; then\n  # MAX might be empty!\nfi\n\n# GOOD: Provide default\nMAX=${MAX:-10}\n```\n\n### ❌ Ignoring Edge Cases\n\n```bash\n# BAD: Assumes exactly 2 --- markers\nsed -n '/^---$/,/^---$/{ /^---$/d; p; }'\n\n# GOOD: Handles --- in body\nawk '/^---$/{i++; next} i>=2'  # For body\n```\n\n## Conclusion\n\nThe `.claude/plugin-name.local.md` pattern provides:\n- Simple, human-readable configuration\n- Version-control friendly (gitignored)\n- Per-project settings\n- Easy parsing with standard bash tools\n- Supports both structured config (YAML) and freeform content (markdown)\n\nUse this pattern for any plugin that needs user-configurable behavior or state persistence.\n",
        "plugins/plugin-dev/skills/plugin-structure/README.md": "# Plugin Structure Skill\n\nComprehensive guidance on Claude Code plugin architecture, directory layout, and best practices.\n\n## Overview\n\nThis skill provides detailed knowledge about:\n- Plugin directory structure and organization\n- `plugin.json` manifest configuration\n- Component organization (commands, agents, skills, hooks)\n- Auto-discovery mechanisms\n- Portable path references with `${CLAUDE_PLUGIN_ROOT}`\n- File naming conventions\n\n## Skill Structure\n\n### SKILL.md (1,619 words)\n\nCore skill content covering:\n- Directory structure overview\n- Plugin manifest (plugin.json) fields\n- Component organization patterns\n- ${CLAUDE_PLUGIN_ROOT} usage\n- File naming conventions\n- Auto-discovery mechanism\n- Best practices\n- Common patterns\n- Troubleshooting\n\n### References\n\nDetailed documentation for deep dives:\n\n- **manifest-reference.md**: Complete `plugin.json` field reference\n  - All field descriptions and examples\n  - Path resolution rules\n  - Validation guidelines\n  - Minimal vs. complete manifest examples\n\n- **component-patterns.md**: Advanced organization patterns\n  - Component lifecycle (discovery, activation)\n  - Command organization patterns\n  - Agent organization patterns\n  - Skill organization patterns\n  - Hook organization patterns\n  - Script organization patterns\n  - Cross-component patterns\n  - Best practices for scalability\n\n### Examples\n\nThree complete plugin examples:\n\n- **minimal-plugin.md**: Simplest possible plugin\n  - Single command\n  - Minimal manifest\n  - When to use this pattern\n\n- **standard-plugin.md**: Well-structured production plugin\n  - Multiple components (commands, agents, skills, hooks)\n  - Complete manifest with metadata\n  - Rich skill structure\n  - Integration between components\n\n- **advanced-plugin.md**: Enterprise-grade plugin\n  - Multi-level organization\n  - MCP server integration\n  - Shared libraries\n  - Configuration management\n  - Security automation\n  - Monitoring integration\n\n## When This Skill Triggers\n\nClaude Code activates this skill when users:\n- Ask to \"create a plugin\" or \"scaffold a plugin\"\n- Need to \"understand plugin structure\"\n- Want to \"organize plugin components\"\n- Need to \"set up plugin.json\"\n- Ask about \"${CLAUDE_PLUGIN_ROOT}\" usage\n- Want to \"add commands/agents/skills/hooks\"\n- Need \"configure auto-discovery\" help\n- Ask about plugin architecture or best practices\n\n## Progressive Disclosure\n\nThe skill uses progressive disclosure to manage context:\n\n1. **SKILL.md** (~1600 words): Core concepts and workflows\n2. **References** (~6000 words): Detailed field references and patterns\n3. **Examples** (~8000 words): Complete working examples\n\nClaude loads references and examples only as needed based on the task.\n\n## Related Skills\n\nThis skill works well with:\n- **hook-development**: For creating plugin hooks\n- **mcp-integration**: For integrating MCP servers (when available)\n- **marketplace-publishing**: For publishing plugins (when available)\n\n## Maintenance\n\nTo update this skill:\n1. Keep SKILL.md lean and focused on core concepts\n2. Move detailed information to references/\n3. Add new examples/ for common patterns\n4. Update version in SKILL.md frontmatter\n5. Ensure all documentation uses imperative/infinitive form\n",
        "plugins/plugin-dev/skills/plugin-structure/SKILL.md": "---\nname: Plugin Structure\ndescription: This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand plugin structure\", \"organize plugin components\", \"set up plugin.json\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"add commands/agents/skills/hooks\", \"configure auto-discovery\", or needs guidance on plugin directory layout, manifest configuration, component organization, file naming conventions, or Claude Code plugin architecture best practices.\nversion: 0.1.0\n---\n\n# Plugin Structure for Claude Code\n\n## Overview\n\nClaude Code plugins follow a standardized directory structure with automatic component discovery. Understanding this structure enables creating well-organized, maintainable plugins that integrate seamlessly with Claude Code.\n\n**Key concepts:**\n- Conventional directory layout for automatic discovery\n- Manifest-driven configuration in `.claude-plugin/plugin.json`\n- Component-based organization (commands, agents, skills, hooks)\n- Portable path references using `${CLAUDE_PLUGIN_ROOT}`\n- Explicit vs. auto-discovered component loading\n\n## Directory Structure\n\nEvery Claude Code plugin follows this organizational pattern:\n\n```\nplugin-name/\n├── .claude-plugin/\n│   └── plugin.json          # Required: Plugin manifest\n├── commands/                 # Slash commands (.md files)\n├── agents/                   # Subagent definitions (.md files)\n├── skills/                   # Agent skills (subdirectories)\n│   └── skill-name/\n│       └── SKILL.md         # Required for each skill\n├── hooks/\n│   └── hooks.json           # Event handler configuration\n├── .mcp.json                # MCP server definitions\n└── scripts/                 # Helper scripts and utilities\n```\n\n**Critical rules:**\n\n1. **Manifest location**: The `plugin.json` manifest MUST be in `.claude-plugin/` directory\n2. **Component locations**: All component directories (commands, agents, skills, hooks) MUST be at plugin root level, NOT nested inside `.claude-plugin/`\n3. **Optional components**: Only create directories for components the plugin actually uses\n4. **Naming convention**: Use kebab-case for all directory and file names\n\n## Plugin Manifest (plugin.json)\n\nThe manifest defines plugin metadata and configuration. Located at `.claude-plugin/plugin.json`:\n\n### Required Fields\n\n```json\n{\n  \"name\": \"plugin-name\"\n}\n```\n\n**Name requirements:**\n- Use kebab-case format (lowercase with hyphens)\n- Must be unique across installed plugins\n- No spaces or special characters\n- Example: `code-review-assistant`, `test-runner`, `api-docs`\n\n### Recommended Metadata\n\n```json\n{\n  \"name\": \"plugin-name\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Brief explanation of plugin purpose\",\n  \"author\": {\n    \"name\": \"Author Name\",\n    \"email\": \"author@example.com\",\n    \"url\": \"https://example.com\"\n  },\n  \"homepage\": \"https://docs.example.com\",\n  \"repository\": \"https://github.com/user/plugin-name\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"testing\", \"automation\", \"ci-cd\"]\n}\n```\n\n**Version format**: Follow semantic versioning (MAJOR.MINOR.PATCH)\n**Keywords**: Use for plugin discovery and categorization\n\n### Component Path Configuration\n\nSpecify custom paths for components (supplements default directories):\n\n```json\n{\n  \"name\": \"plugin-name\",\n  \"commands\": \"./custom-commands\",\n  \"agents\": [\"./agents\", \"./specialized-agents\"],\n  \"hooks\": \"./config/hooks.json\",\n  \"mcpServers\": \"./.mcp.json\"\n}\n```\n\n**Important**: Custom paths supplement defaults—they don't replace them. Components in both default directories and custom paths will load.\n\n**Path rules:**\n- Must be relative to plugin root\n- Must start with `./`\n- Cannot use absolute paths\n- Support arrays for multiple locations\n\n## Component Organization\n\n### Commands\n\n**Location**: `commands/` directory\n**Format**: Markdown files with YAML frontmatter\n**Auto-discovery**: All `.md` files in `commands/` load automatically\n\n**Example structure**:\n```\ncommands/\n├── review.md        # /review command\n├── test.md          # /test command\n└── deploy.md        # /deploy command\n```\n\n**File format**:\n```markdown\n---\nname: command-name\ndescription: Command description\n---\n\nCommand implementation instructions...\n```\n\n**Usage**: Commands integrate as native slash commands in Claude Code\n\n### Agents\n\n**Location**: `agents/` directory\n**Format**: Markdown files with YAML frontmatter\n**Auto-discovery**: All `.md` files in `agents/` load automatically\n\n**Example structure**:\n```\nagents/\n├── code-reviewer.md\n├── test-generator.md\n└── refactorer.md\n```\n\n**File format**:\n```markdown\n---\ndescription: Agent role and expertise\ncapabilities:\n  - Specific task 1\n  - Specific task 2\n---\n\nDetailed agent instructions and knowledge...\n```\n\n**Usage**: Users can invoke agents manually, or Claude Code selects them automatically based on task context\n\n### Skills\n\n**Location**: `skills/` directory with subdirectories per skill\n**Format**: Each skill in its own directory with `SKILL.md` file\n**Auto-discovery**: All `SKILL.md` files in skill subdirectories load automatically\n\n**Example structure**:\n```\nskills/\n├── api-testing/\n│   ├── SKILL.md\n│   ├── scripts/\n│   │   └── test-runner.py\n│   └── references/\n│       └── api-spec.md\n└── database-migrations/\n    ├── SKILL.md\n    └── examples/\n        └── migration-template.sql\n```\n\n**SKILL.md format**:\n```markdown\n---\nname: Skill Name\ndescription: When to use this skill\nversion: 1.0.0\n---\n\nSkill instructions and guidance...\n```\n\n**Supporting files**: Skills can include scripts, references, examples, or assets in subdirectories\n\n**Usage**: Claude Code autonomously activates skills based on task context matching the description\n\n### Hooks\n\n**Location**: `hooks/hooks.json` or inline in `plugin.json`\n**Format**: JSON configuration defining event handlers\n**Registration**: Hooks register automatically when plugin enables\n\n**Example structure**:\n```\nhooks/\n├── hooks.json           # Hook configuration\n└── scripts/\n    ├── validate.sh      # Hook script\n    └── check-style.sh   # Hook script\n```\n\n**Configuration format**:\n```json\n{\n  \"PreToolUse\": [{\n    \"matcher\": \"Write|Edit\",\n    \"hooks\": [{\n      \"type\": \"command\",\n      \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/validate.sh\",\n      \"timeout\": 30\n    }]\n  }]\n}\n```\n\n**Available events**: PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification\n\n**Usage**: Hooks execute automatically in response to Claude Code events\n\n### MCP Servers\n\n**Location**: `.mcp.json` at plugin root or inline in `plugin.json`\n**Format**: JSON configuration for MCP server definitions\n**Auto-start**: Servers start automatically when plugin enables\n\n**Example format**:\n```json\n{\n  \"mcpServers\": {\n    \"server-name\": {\n      \"command\": \"node\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/server.js\"],\n      \"env\": {\n        \"API_KEY\": \"${API_KEY}\"\n      }\n    }\n  }\n}\n```\n\n**Usage**: MCP servers integrate seamlessly with Claude Code's tool system\n\n## Portable Path References\n\n### ${CLAUDE_PLUGIN_ROOT}\n\nUse `${CLAUDE_PLUGIN_ROOT}` environment variable for all intra-plugin path references:\n\n```json\n{\n  \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/run.sh\"\n}\n```\n\n**Why it matters**: Plugins install in different locations depending on:\n- User installation method (marketplace, local, npm)\n- Operating system conventions\n- User preferences\n\n**Where to use it**:\n- Hook command paths\n- MCP server command arguments\n- Script execution references\n- Resource file paths\n\n**Never use**:\n- Hardcoded absolute paths (`/Users/name/plugins/...`)\n- Relative paths from working directory (`./scripts/...` in commands)\n- Home directory shortcuts (`~/plugins/...`)\n\n### Path Resolution Rules\n\n**In manifest JSON fields** (hooks, MCP servers):\n```json\n\"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/tool.sh\"\n```\n\n**In component files** (commands, agents, skills):\n```markdown\nReference scripts at: ${CLAUDE_PLUGIN_ROOT}/scripts/helper.py\n```\n\n**In executed scripts**:\n```bash\n#!/bin/bash\n# ${CLAUDE_PLUGIN_ROOT} available as environment variable\nsource \"${CLAUDE_PLUGIN_ROOT}/lib/common.sh\"\n```\n\n## File Naming Conventions\n\n### Component Files\n\n**Commands**: Use kebab-case `.md` files\n- `code-review.md` → `/code-review`\n- `run-tests.md` → `/run-tests`\n- `api-docs.md` → `/api-docs`\n\n**Agents**: Use kebab-case `.md` files describing role\n- `test-generator.md`\n- `code-reviewer.md`\n- `performance-analyzer.md`\n\n**Skills**: Use kebab-case directory names\n- `api-testing/`\n- `database-migrations/`\n- `error-handling/`\n\n### Supporting Files\n\n**Scripts**: Use descriptive kebab-case names with appropriate extensions\n- `validate-input.sh`\n- `generate-report.py`\n- `process-data.js`\n\n**Documentation**: Use kebab-case markdown files\n- `api-reference.md`\n- `migration-guide.md`\n- `best-practices.md`\n\n**Configuration**: Use standard names\n- `hooks.json`\n- `.mcp.json`\n- `plugin.json`\n\n## Auto-Discovery Mechanism\n\nClaude Code automatically discovers and loads components:\n\n1. **Plugin manifest**: Reads `.claude-plugin/plugin.json` when plugin enables\n2. **Commands**: Scans `commands/` directory for `.md` files\n3. **Agents**: Scans `agents/` directory for `.md` files\n4. **Skills**: Scans `skills/` for subdirectories containing `SKILL.md`\n5. **Hooks**: Loads configuration from `hooks/hooks.json` or manifest\n6. **MCP servers**: Loads configuration from `.mcp.json` or manifest\n\n**Discovery timing**:\n- Plugin installation: Components register with Claude Code\n- Plugin enable: Components become available for use\n- No restart required: Changes take effect on next Claude Code session\n\n**Override behavior**: Custom paths in `plugin.json` supplement (not replace) default directories\n\n## Best Practices\n\n### Organization\n\n1. **Logical grouping**: Group related components together\n   - Put test-related commands, agents, and skills together\n   - Create subdirectories in `scripts/` for different purposes\n\n2. **Minimal manifest**: Keep `plugin.json` lean\n   - Only specify custom paths when necessary\n   - Rely on auto-discovery for standard layouts\n   - Use inline configuration only for simple cases\n\n3. **Documentation**: Include README files\n   - Plugin root: Overall purpose and usage\n   - Component directories: Specific guidance\n   - Script directories: Usage and requirements\n\n### Naming\n\n1. **Consistency**: Use consistent naming across components\n   - If command is `test-runner`, name related agent `test-runner-agent`\n   - Match skill directory names to their purpose\n\n2. **Clarity**: Use descriptive names that indicate purpose\n   - Good: `api-integration-testing/`, `code-quality-checker.md`\n   - Avoid: `utils/`, `misc.md`, `temp.sh`\n\n3. **Length**: Balance brevity with clarity\n   - Commands: 2-3 words (`review-pr`, `run-ci`)\n   - Agents: Describe role clearly (`code-reviewer`, `test-generator`)\n   - Skills: Topic-focused (`error-handling`, `api-design`)\n\n### Portability\n\n1. **Always use ${CLAUDE_PLUGIN_ROOT}**: Never hardcode paths\n2. **Test on multiple systems**: Verify on macOS, Linux, Windows\n3. **Document dependencies**: List required tools and versions\n4. **Avoid system-specific features**: Use portable bash/Python constructs\n\n### Maintenance\n\n1. **Version consistently**: Update version in plugin.json for releases\n2. **Deprecate gracefully**: Mark old components clearly before removal\n3. **Document breaking changes**: Note changes affecting existing users\n4. **Test thoroughly**: Verify all components work after changes\n\n## Common Patterns\n\n### Minimal Plugin\n\nSingle command with no dependencies:\n```\nmy-plugin/\n├── .claude-plugin/\n│   └── plugin.json    # Just name field\n└── commands/\n    └── hello.md       # Single command\n```\n\n### Full-Featured Plugin\n\nComplete plugin with all component types:\n```\nmy-plugin/\n├── .claude-plugin/\n│   └── plugin.json\n├── commands/          # User-facing commands\n├── agents/            # Specialized subagents\n├── skills/            # Auto-activating skills\n├── hooks/             # Event handlers\n│   ├── hooks.json\n│   └── scripts/\n├── .mcp.json          # External integrations\n└── scripts/           # Shared utilities\n```\n\n### Skill-Focused Plugin\n\nPlugin providing only skills:\n```\nmy-plugin/\n├── .claude-plugin/\n│   └── plugin.json\n└── skills/\n    ├── skill-one/\n    │   └── SKILL.md\n    └── skill-two/\n        └── SKILL.md\n```\n\n## Troubleshooting\n\n**Component not loading**:\n- Verify file is in correct directory with correct extension\n- Check YAML frontmatter syntax (commands, agents, skills)\n- Ensure skill has `SKILL.md` (not `README.md` or other name)\n- Confirm plugin is enabled in Claude Code settings\n\n**Path resolution errors**:\n- Replace all hardcoded paths with `${CLAUDE_PLUGIN_ROOT}`\n- Verify paths are relative and start with `./` in manifest\n- Check that referenced files exist at specified paths\n- Test with `echo $CLAUDE_PLUGIN_ROOT` in hook scripts\n\n**Auto-discovery not working**:\n- Confirm directories are at plugin root (not in `.claude-plugin/`)\n- Check file naming follows conventions (kebab-case, correct extensions)\n- Verify custom paths in manifest are correct\n- Restart Claude Code to reload plugin configuration\n\n**Conflicts between plugins**:\n- Use unique, descriptive component names\n- Namespace commands with plugin name if needed\n- Document potential conflicts in plugin README\n- Consider command prefixes for related functionality\n\n---\n\nFor detailed examples and advanced patterns, see files in `references/` and `examples/` directories.\n",
        "plugins/plugin-dev/skills/plugin-structure/examples/advanced-plugin.md": "# Advanced Plugin Example\n\nA complex, enterprise-grade plugin with MCP integration and advanced organization.\n\n## Directory Structure\n\n```\nenterprise-devops/\n├── .claude-plugin/\n│   └── plugin.json\n├── commands/\n│   ├── ci/\n│   │   ├── build.md\n│   │   ├── test.md\n│   │   └── deploy.md\n│   ├── monitoring/\n│   │   ├── status.md\n│   │   └── logs.md\n│   └── admin/\n│       ├── configure.md\n│       └── manage.md\n├── agents/\n│   ├── orchestration/\n│   │   ├── deployment-orchestrator.md\n│   │   └── rollback-manager.md\n│   └── specialized/\n│       ├── kubernetes-expert.md\n│       ├── terraform-expert.md\n│       └── security-auditor.md\n├── skills/\n│   ├── kubernetes-ops/\n│   │   ├── SKILL.md\n│   │   ├── references/\n│   │   │   ├── deployment-patterns.md\n│   │   │   ├── troubleshooting.md\n│   │   │   └── security.md\n│   │   ├── examples/\n│   │   │   ├── basic-deployment.yaml\n│   │   │   ├── stateful-set.yaml\n│   │   │   └── ingress-config.yaml\n│   │   └── scripts/\n│   │       ├── validate-manifest.sh\n│   │       └── health-check.sh\n│   ├── terraform-iac/\n│   │   ├── SKILL.md\n│   │   ├── references/\n│   │   │   └── best-practices.md\n│   │   └── examples/\n│   │       └── module-template/\n│   └── ci-cd-pipelines/\n│       ├── SKILL.md\n│       └── references/\n│           └── pipeline-patterns.md\n├── hooks/\n│   ├── hooks.json\n│   └── scripts/\n│       ├── security/\n│       │   ├── scan-secrets.sh\n│       │   ├── validate-permissions.sh\n│       │   └── audit-changes.sh\n│       ├── quality/\n│       │   ├── check-config.sh\n│       │   └── verify-tests.sh\n│       └── workflow/\n│           ├── notify-team.sh\n│           └── update-status.sh\n├── .mcp.json\n├── servers/\n│   ├── kubernetes-mcp/\n│   │   ├── index.js\n│   │   ├── package.json\n│   │   └── lib/\n│   ├── terraform-mcp/\n│   │   ├── main.py\n│   │   └── requirements.txt\n│   └── github-actions-mcp/\n│       ├── server.js\n│       └── package.json\n├── lib/\n│   ├── core/\n│   │   ├── logger.js\n│   │   ├── config.js\n│   │   └── auth.js\n│   ├── integrations/\n│   │   ├── slack.js\n│   │   ├── pagerduty.js\n│   │   └── datadog.js\n│   └── utils/\n│       ├── retry.js\n│       └── validation.js\n└── config/\n    ├── environments/\n    │   ├── production.json\n    │   ├── staging.json\n    │   └── development.json\n    └── templates/\n        ├── deployment.yaml\n        └── service.yaml\n```\n\n## File Contents\n\n### .claude-plugin/plugin.json\n\n```json\n{\n  \"name\": \"enterprise-devops\",\n  \"version\": \"2.3.1\",\n  \"description\": \"Comprehensive DevOps automation for enterprise CI/CD pipelines, infrastructure management, and monitoring\",\n  \"author\": {\n    \"name\": \"DevOps Platform Team\",\n    \"email\": \"devops-platform@company.com\",\n    \"url\": \"https://company.com/teams/devops\"\n  },\n  \"homepage\": \"https://docs.company.com/plugins/devops\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/company/devops-plugin.git\"\n  },\n  \"license\": \"Apache-2.0\",\n  \"keywords\": [\n    \"devops\",\n    \"ci-cd\",\n    \"kubernetes\",\n    \"terraform\",\n    \"automation\",\n    \"infrastructure\",\n    \"deployment\",\n    \"monitoring\"\n  ],\n  \"commands\": [\n    \"./commands/ci\",\n    \"./commands/monitoring\",\n    \"./commands/admin\"\n  ],\n  \"agents\": [\n    \"./agents/orchestration\",\n    \"./agents/specialized\"\n  ],\n  \"hooks\": \"./hooks/hooks.json\",\n  \"mcpServers\": \"./.mcp.json\"\n}\n```\n\n### .mcp.json\n\n```json\n{\n  \"mcpServers\": {\n    \"kubernetes\": {\n      \"command\": \"node\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/kubernetes-mcp/index.js\"],\n      \"env\": {\n        \"KUBECONFIG\": \"${KUBECONFIG}\",\n        \"K8S_NAMESPACE\": \"${K8S_NAMESPACE:-default}\"\n      }\n    },\n    \"terraform\": {\n      \"command\": \"python\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/terraform-mcp/main.py\"],\n      \"env\": {\n        \"TF_STATE_BUCKET\": \"${TF_STATE_BUCKET}\",\n        \"AWS_REGION\": \"${AWS_REGION}\"\n      }\n    },\n    \"github-actions\": {\n      \"command\": \"node\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/github-actions-mcp/server.js\"],\n      \"env\": {\n        \"GITHUB_TOKEN\": \"${GITHUB_TOKEN}\",\n        \"GITHUB_ORG\": \"${GITHUB_ORG}\"\n      }\n    }\n  }\n}\n```\n\n### commands/ci/build.md\n\n```markdown\n---\nname: build\ndescription: Trigger and monitor CI build pipeline\n---\n\n# Build Command\n\nTrigger CI/CD build pipeline and monitor progress in real-time.\n\n## Process\n\n1. **Validation**: Check prerequisites\n   - Verify branch status\n   - Check for uncommitted changes\n   - Validate configuration files\n\n2. **Trigger**: Start build via MCP server\n   \\`\\`\\`javascript\n   // Uses github-actions MCP server\n   const build = await tools.github_actions_trigger_workflow({\n     workflow: 'build.yml',\n     ref: currentBranch\n   })\n   \\`\\`\\`\n\n3. **Monitor**: Track build progress\n   - Display real-time logs\n   - Show test results as they complete\n   - Alert on failures\n\n4. **Report**: Summarize results\n   - Build status\n   - Test coverage\n   - Performance metrics\n   - Deploy readiness\n\n## Integration\n\nAfter successful build:\n- Offer to deploy to staging\n- Suggest performance optimizations\n- Generate deployment checklist\n```\n\n### agents/orchestration/deployment-orchestrator.md\n\n```markdown\n---\ndescription: Orchestrates complex multi-environment deployments with rollback capabilities and health monitoring\ncapabilities:\n  - Plan and execute multi-stage deployments\n  - Coordinate service dependencies\n  - Monitor deployment health\n  - Execute automated rollbacks\n  - Manage deployment approvals\n---\n\n# Deployment Orchestrator Agent\n\nSpecialized agent for orchestrating complex deployments across multiple environments.\n\n## Expertise\n\n- **Deployment strategies**: Blue-green, canary, rolling updates\n- **Dependency management**: Service startup ordering, dependency injection\n- **Health monitoring**: Service health checks, metric validation\n- **Rollback automation**: Automatic rollback on failure detection\n- **Approval workflows**: Multi-stage approval processes\n\n## Orchestration Process\n\n1. **Planning Phase**\n   - Analyze deployment requirements\n   - Identify service dependencies\n   - Generate deployment plan\n   - Calculate rollback strategy\n\n2. **Validation Phase**\n   - Verify environment readiness\n   - Check resource availability\n   - Validate configurations\n   - Run pre-deployment tests\n\n3. **Execution Phase**\n   - Deploy services in dependency order\n   - Monitor health after each stage\n   - Validate metrics and logs\n   - Proceed to next stage on success\n\n4. **Verification Phase**\n   - Run smoke tests\n   - Validate service integration\n   - Check performance metrics\n   - Confirm deployment success\n\n5. **Rollback Phase** (if needed)\n   - Detect failure conditions\n   - Execute rollback plan\n   - Restore previous state\n   - Notify stakeholders\n\n## MCP Integration\n\nUses multiple MCP servers:\n- `kubernetes`: Deploy and manage containers\n- `terraform`: Provision infrastructure\n- `github-actions`: Trigger deployment pipelines\n\n## Monitoring Integration\n\nIntegrates with monitoring tools via lib:\n\\`\\`\\`javascript\nconst { DatadogClient } = require('${CLAUDE_PLUGIN_ROOT}/lib/integrations/datadog')\nconst metrics = await DatadogClient.getMetrics(service, timeRange)\n\\`\\`\\`\n\n## Notification Integration\n\nSends updates via Slack and PagerDuty:\n\\`\\`\\`javascript\nconst { SlackClient } = require('${CLAUDE_PLUGIN_ROOT}/lib/integrations/slack')\nawait SlackClient.notify({\n  channel: '#deployments',\n  message: 'Deployment started',\n  metadata: deploymentPlan\n})\n\\`\\`\\`\n```\n\n### skills/kubernetes-ops/SKILL.md\n\n```markdown\n---\nname: Kubernetes Operations\ndescription: This skill should be used when deploying to Kubernetes, managing K8s resources, troubleshooting cluster issues, configuring ingress/services, scaling deployments, or working with Kubernetes manifests. Provides comprehensive Kubernetes operational knowledge and best practices.\nversion: 2.0.0\n---\n\n# Kubernetes Operations\n\nComprehensive operational knowledge for managing Kubernetes clusters and workloads.\n\n## Overview\n\nManage Kubernetes infrastructure effectively through:\n- Deployment strategies and patterns\n- Resource configuration and optimization\n- Troubleshooting and debugging\n- Security best practices\n- Performance tuning\n\n## Core Concepts\n\n### Resource Management\n\n**Deployments**: Use for stateless applications\n- Rolling updates for zero-downtime deployments\n- Rollback capabilities for failed deployments\n- Replica management for scaling\n\n**StatefulSets**: Use for stateful applications\n- Stable network identities\n- Persistent storage\n- Ordered deployment and scaling\n\n**DaemonSets**: Use for node-level services\n- Log collectors\n- Monitoring agents\n- Network plugins\n\n### Configuration\n\n**ConfigMaps**: Store non-sensitive configuration\n- Environment-specific settings\n- Application configuration files\n- Feature flags\n\n**Secrets**: Store sensitive data\n- API keys and tokens\n- Database credentials\n- TLS certificates\n\nUse external secret management (Vault, AWS Secrets Manager) for production.\n\n### Networking\n\n**Services**: Expose applications internally\n- ClusterIP for internal communication\n- NodePort for external access (non-production)\n- LoadBalancer for external access (production)\n\n**Ingress**: HTTP/HTTPS routing\n- Path-based routing\n- Host-based routing\n- TLS termination\n- Load balancing\n\n## Deployment Strategies\n\n### Rolling Update\n\nDefault strategy, gradual replacement:\n\\`\\`\\`yaml\nstrategy:\n  type: RollingUpdate\n  rollingUpdate:\n    maxSurge: 1\n    maxUnavailable: 0\n\\`\\`\\`\n\n**When to use**: Standard deployments, minor updates\n\n### Recreate\n\nStop all pods, then create new ones:\n\\`\\`\\`yaml\nstrategy:\n  type: Recreate\n\\`\\`\\`\n\n**When to use**: Stateful apps that can't run multiple versions\n\n### Blue-Green\n\nRun two complete environments, switch traffic:\n1. Deploy new version (green)\n2. Test green environment\n3. Switch traffic to green\n4. Keep blue for quick rollback\n\n**When to use**: Critical services, need instant rollback\n\n### Canary\n\nGradually roll out to subset of users:\n1. Deploy canary version (10% traffic)\n2. Monitor metrics and errors\n3. Increase traffic gradually\n4. Complete rollout or rollback\n\n**When to use**: High-risk changes, want gradual validation\n\n## Resource Configuration\n\n### Resource Requests and Limits\n\nAlways set for production workloads:\n\\`\\`\\`yaml\nresources:\n  requests:\n    memory: \"256Mi\"\n    cpu: \"250m\"\n  limits:\n    memory: \"512Mi\"\n    cpu: \"500m\"\n\\`\\`\\`\n\n**Requests**: Guaranteed resources\n**Limits**: Maximum allowed resources\n\n### Health Checks\n\nEssential for reliability:\n\\`\\`\\`yaml\nlivenessProbe:\n  httpGet:\n    path: /health\n    port: 8080\n  initialDelaySeconds: 30\n  periodSeconds: 10\n\nreadinessProbe:\n  httpGet:\n    path: /ready\n    port: 8080\n  initialDelaySeconds: 5\n  periodSeconds: 5\n\\`\\`\\`\n\n**Liveness**: Restart unhealthy pods\n**Readiness**: Remove unready pods from service\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Pods not starting**\n   - Check: `kubectl describe pod <name>`\n   - Look for: Image pull errors, resource constraints\n   - Fix: Verify image name, increase resources\n\n2. **Service not reachable**\n   - Check: `kubectl get svc`, `kubectl get endpoints`\n   - Look for: No endpoints, wrong selector\n   - Fix: Verify pod labels match service selector\n\n3. **High memory usage**\n   - Check: `kubectl top pods`\n   - Look for: Pods near memory limit\n   - Fix: Increase limits, optimize application\n\n4. **Frequent restarts**\n   - Check: `kubectl get pods`, `kubectl logs <name>`\n   - Look for: Liveness probe failures, OOMKilled\n   - Fix: Adjust health checks, increase memory\n\n### Debugging Commands\n\nGet pod details:\n\\`\\`\\`bash\nkubectl describe pod <name>\nkubectl logs <name>\nkubectl logs <name> --previous  # logs from crashed container\n\\`\\`\\`\n\nExecute commands in pod:\n\\`\\`\\`bash\nkubectl exec -it <name> -- /bin/sh\nkubectl exec <name> -- env\n\\`\\`\\`\n\nCheck resource usage:\n\\`\\`\\`bash\nkubectl top nodes\nkubectl top pods\n\\`\\`\\`\n\n## Security Best Practices\n\n### Pod Security\n\n- Run as non-root user\n- Use read-only root filesystem\n- Drop unnecessary capabilities\n- Use security contexts\n\nExample:\n\\`\\`\\`yaml\nsecurityContext:\n  runAsNonRoot: true\n  runAsUser: 1000\n  readOnlyRootFilesystem: true\n  capabilities:\n    drop:\n      - ALL\n\\`\\`\\`\n\n### Network Policies\n\nRestrict pod communication:\n\\`\\`\\`yaml\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: api-allow\nspec:\n  podSelector:\n    matchLabels:\n      app: api\n  ingress:\n    - from:\n      - podSelector:\n          matchLabels:\n            app: frontend\n\\`\\`\\`\n\n### Secrets Management\n\n- Never commit secrets to git\n- Use external secret managers\n- Rotate secrets regularly\n- Limit secret access with RBAC\n\n## Performance Optimization\n\n### Resource Tuning\n\n1. **Start conservative**: Set low limits initially\n2. **Monitor usage**: Track actual resource consumption\n3. **Adjust gradually**: Increase based on metrics\n4. **Set appropriate requests**: Match typical usage\n5. **Set safe limits**: 2x requests for headroom\n\n### Horizontal Pod Autoscaling\n\nAutomatically scale based on metrics:\n\\`\\`\\`yaml\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: api-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: api\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n    - type: Resource\n      resource:\n        name: cpu\n        target:\n          type: Utilization\n          averageUtilization: 70\n\\`\\`\\`\n\n## MCP Server Integration\n\nThis skill works with the kubernetes MCP server for operations:\n\n**List pods**:\n\\`\\`\\`javascript\nconst pods = await tools.k8s_list_pods({ namespace: 'default' })\n\\`\\`\\`\n\n**Get pod logs**:\n\\`\\`\\`javascript\nconst logs = await tools.k8s_get_logs({ pod: 'api-xyz', container: 'app' })\n\\`\\`\\`\n\n**Apply manifests**:\n\\`\\`\\`javascript\nconst result = await tools.k8s_apply_manifest({ file: 'deployment.yaml' })\n\\`\\`\\`\n\n## Detailed References\n\nFor in-depth information:\n- **Deployment patterns**: `references/deployment-patterns.md`\n- **Troubleshooting guide**: `references/troubleshooting.md`\n- **Security hardening**: `references/security.md`\n\n## Example Manifests\n\nFor copy-paste examples:\n- **Basic deployment**: `examples/basic-deployment.yaml`\n- **StatefulSet**: `examples/stateful-set.yaml`\n- **Ingress config**: `examples/ingress-config.yaml`\n\n## Validation Scripts\n\nFor manifest validation:\n\\`\\`\\`bash\nbash ${CLAUDE_PLUGIN_ROOT}/skills/kubernetes-ops/scripts/validate-manifest.sh deployment.yaml\n\\`\\`\\`\n```\n\n### hooks/hooks.json\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/security/scan-secrets.sh\",\n          \"timeout\": 30\n        }\n      ]\n    },\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Evaluate if this bash command is safe for production environment. Check for destructive operations, missing safeguards, and potential security issues. Commands should be idempotent and reversible.\",\n          \"timeout\": 20\n        }\n      ]\n    }\n  ],\n  \"PostToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/workflow/update-status.sh\",\n          \"timeout\": 15\n        }\n      ]\n    }\n  ],\n  \"Stop\": [\n    {\n      \"matcher\": \".*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/quality/check-config.sh\",\n          \"timeout\": 45\n        },\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/workflow/notify-team.sh\",\n          \"timeout\": 30\n        }\n      ]\n    }\n  ],\n  \"SessionStart\": [\n    {\n      \"matcher\": \".*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/security/validate-permissions.sh\",\n          \"timeout\": 20\n        }\n      ]\n    }\n  ]\n}\n```\n\n## Key Features\n\n### Multi-Level Organization\n\n**Commands**: Organized by function (CI, monitoring, admin)\n**Agents**: Separated by role (orchestration vs. specialized)\n**Skills**: Rich resources (references, examples, scripts)\n\n### MCP Integration\n\nThree custom MCP servers:\n- **Kubernetes**: Cluster operations\n- **Terraform**: Infrastructure provisioning\n- **GitHub Actions**: CI/CD automation\n\n### Shared Libraries\n\nReusable code in `lib/`:\n- **Core**: Common utilities (logging, config, auth)\n- **Integrations**: External services (Slack, Datadog)\n- **Utils**: Helper functions (retry, validation)\n\n### Configuration Management\n\nEnvironment-specific configs in `config/`:\n- **Environments**: Per-environment settings\n- **Templates**: Reusable deployment templates\n\n### Security Automation\n\nMultiple security hooks:\n- Secret scanning before writes\n- Permission validation on session start\n- Configuration auditing on completion\n\n### Monitoring Integration\n\nBuilt-in monitoring via lib integrations:\n- Datadog for metrics\n- PagerDuty for alerts\n- Slack for notifications\n\n## Use Cases\n\n1. **Multi-environment deployments**: Orchestrated rollouts across dev/staging/prod\n2. **Infrastructure as code**: Terraform automation with state management\n3. **CI/CD automation**: Build, test, deploy pipelines\n4. **Monitoring and observability**: Integrated metrics and alerting\n5. **Security enforcement**: Automated security scanning and validation\n6. **Team collaboration**: Slack notifications and status updates\n\n## When to Use This Pattern\n\n- Large-scale enterprise deployments\n- Multiple environment management\n- Complex CI/CD workflows\n- Integrated monitoring requirements\n- Security-critical infrastructure\n- Team collaboration needs\n\n## Scaling Considerations\n\n- **Performance**: Separate MCP servers for parallel operations\n- **Organization**: Multi-level directories for scalability\n- **Maintainability**: Shared libraries reduce duplication\n- **Flexibility**: Environment configs enable customization\n- **Security**: Layered security hooks and validation\n",
        "plugins/plugin-dev/skills/plugin-structure/examples/minimal-plugin.md": "# Minimal Plugin Example\n\nA bare-bones plugin with a single command.\n\n## Directory Structure\n\n```\nhello-world/\n├── .claude-plugin/\n│   └── plugin.json\n└── commands/\n    └── hello.md\n```\n\n## File Contents\n\n### .claude-plugin/plugin.json\n\n```json\n{\n  \"name\": \"hello-world\"\n}\n```\n\n### commands/hello.md\n\n```markdown\n---\nname: hello\ndescription: Prints a friendly greeting message\n---\n\n# Hello Command\n\nPrint a friendly greeting to the user.\n\n## Implementation\n\nOutput the following message to the user:\n\n> Hello! This is a simple command from the hello-world plugin.\n>\n> Use this as a starting point for building more complex plugins.\n\nInclude the current timestamp in the greeting to show the command executed successfully.\n```\n\n## Usage\n\nAfter installing the plugin:\n\n```\n$ claude\n> /hello\nHello! This is a simple command from the hello-world plugin.\n\nUse this as a starting point for building more complex plugins.\n\nExecuted at: 2025-01-15 14:30:22 UTC\n```\n\n## Key Points\n\n1. **Minimal manifest**: Only the required `name` field\n2. **Single command**: One markdown file in `commands/` directory\n3. **Auto-discovery**: Claude Code finds the command automatically\n4. **No dependencies**: No scripts, hooks, or external resources\n\n## When to Use This Pattern\n\n- Quick prototypes\n- Single-purpose utilities\n- Learning plugin development\n- Internal team tools with one specific function\n\n## Extending This Plugin\n\nTo add more functionality:\n\n1. **Add commands**: Create more `.md` files in `commands/`\n2. **Add metadata**: Update `plugin.json` with version, description, author\n3. **Add agents**: Create `agents/` directory with agent definitions\n4. **Add hooks**: Create `hooks/hooks.json` for event handling\n",
        "plugins/plugin-dev/skills/plugin-structure/examples/standard-plugin.md": "# Standard Plugin Example\n\nA well-structured plugin with commands, agents, and skills.\n\n## Directory Structure\n\n```\ncode-quality/\n├── .claude-plugin/\n│   └── plugin.json\n├── commands/\n│   ├── lint.md\n│   ├── test.md\n│   └── review.md\n├── agents/\n│   ├── code-reviewer.md\n│   └── test-generator.md\n├── skills/\n│   ├── code-standards/\n│   │   ├── SKILL.md\n│   │   └── references/\n│   │       └── style-guide.md\n│   └── testing-patterns/\n│       ├── SKILL.md\n│       └── examples/\n│           ├── unit-test.js\n│           └── integration-test.js\n├── hooks/\n│   ├── hooks.json\n│   └── scripts/\n│       └── validate-commit.sh\n└── scripts/\n    ├── run-linter.sh\n    └── generate-report.py\n```\n\n## File Contents\n\n### .claude-plugin/plugin.json\n\n```json\n{\n  \"name\": \"code-quality\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Comprehensive code quality tools including linting, testing, and review automation\",\n  \"author\": {\n    \"name\": \"Quality Team\",\n    \"email\": \"quality@example.com\"\n  },\n  \"homepage\": \"https://docs.example.com/plugins/code-quality\",\n  \"repository\": \"https://github.com/example/code-quality-plugin\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"code-quality\", \"linting\", \"testing\", \"code-review\", \"automation\"]\n}\n```\n\n### commands/lint.md\n\n```markdown\n---\nname: lint\ndescription: Run linting checks on the codebase\n---\n\n# Lint Command\n\nRun comprehensive linting checks on the project codebase.\n\n## Process\n\n1. Detect project type and installed linters\n2. Run appropriate linters (ESLint, Pylint, RuboCop, etc.)\n3. Collect and format results\n4. Report issues with file locations and severity\n\n## Implementation\n\nExecute the linting script:\n\n\\`\\`\\`bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/run-linter.sh\n\\`\\`\\`\n\nParse the output and present issues organized by:\n- Critical issues (must fix)\n- Warnings (should fix)\n- Style suggestions (optional)\n\nFor each issue, show:\n- File path and line number\n- Issue description\n- Suggested fix (if available)\n```\n\n### commands/test.md\n\n```markdown\n---\nname: test\ndescription: Run test suite with coverage reporting\n---\n\n# Test Command\n\nExecute the project test suite and generate coverage reports.\n\n## Process\n\n1. Identify test framework (Jest, pytest, RSpec, etc.)\n2. Run all tests\n3. Generate coverage report\n4. Identify untested code\n\n## Output\n\nPresent results in structured format:\n- Test summary (passed/failed/skipped)\n- Coverage percentage by file\n- Critical untested areas\n- Failed test details\n\n## Integration\n\nAfter test completion, offer to:\n- Fix failing tests\n- Generate tests for untested code (using test-generator agent)\n- Update documentation based on test changes\n```\n\n### agents/code-reviewer.md\n\n```markdown\n---\ndescription: Expert code reviewer specializing in identifying bugs, security issues, and improvement opportunities\ncapabilities:\n  - Analyze code for potential bugs and logic errors\n  - Identify security vulnerabilities\n  - Suggest performance improvements\n  - Ensure code follows project standards\n  - Review test coverage adequacy\n---\n\n# Code Reviewer Agent\n\nSpecialized agent for comprehensive code review.\n\n## Expertise\n\n- **Bug detection**: Logic errors, edge cases, error handling\n- **Security analysis**: Injection vulnerabilities, authentication issues, data exposure\n- **Performance**: Algorithm efficiency, resource usage, optimization opportunities\n- **Standards compliance**: Style guide adherence, naming conventions, documentation\n- **Test coverage**: Adequacy of test cases, missing scenarios\n\n## Review Process\n\n1. **Initial scan**: Quick pass for obvious issues\n2. **Deep analysis**: Line-by-line review of changed code\n3. **Context evaluation**: Check impact on related code\n4. **Best practices**: Compare against project and language standards\n5. **Recommendations**: Prioritized list of improvements\n\n## Integration with Skills\n\nAutomatically loads `code-standards` skill for project-specific guidelines.\n\n## Output Format\n\nFor each file reviewed:\n- Overall assessment\n- Critical issues (must fix before merge)\n- Important issues (should fix)\n- Suggestions (nice to have)\n- Positive feedback (what was done well)\n```\n\n### agents/test-generator.md\n\n```markdown\n---\ndescription: Generates comprehensive test suites from code analysis\ncapabilities:\n  - Analyze code structure and logic flow\n  - Generate unit tests for functions and methods\n  - Create integration tests for modules\n  - Design edge case and error condition tests\n  - Suggest test fixtures and mocks\n---\n\n# Test Generator Agent\n\nSpecialized agent for generating comprehensive test suites.\n\n## Expertise\n\n- **Unit testing**: Individual function/method tests\n- **Integration testing**: Module interaction tests\n- **Edge cases**: Boundary conditions, error paths\n- **Test organization**: Proper test structure and naming\n- **Mocking**: Appropriate use of mocks and stubs\n\n## Generation Process\n\n1. **Code analysis**: Understand function purpose and logic\n2. **Path identification**: Map all execution paths\n3. **Input design**: Create test inputs covering all paths\n4. **Assertion design**: Define expected outputs\n5. **Test generation**: Write tests in project's framework\n\n## Integration with Skills\n\nAutomatically loads `testing-patterns` skill for project-specific test conventions.\n\n## Test Quality\n\nGenerated tests include:\n- Happy path scenarios\n- Edge cases and boundary conditions\n- Error handling verification\n- Mock data for external dependencies\n- Clear test descriptions\n```\n\n### skills/code-standards/SKILL.md\n\n```markdown\n---\nname: Code Standards\ndescription: This skill should be used when reviewing code, enforcing style guidelines, checking naming conventions, or ensuring code quality standards. Provides project-specific coding standards and best practices.\nversion: 1.0.0\n---\n\n# Code Standards\n\nComprehensive coding standards and best practices for maintaining code quality.\n\n## Overview\n\nEnforce consistent code quality through standardized conventions for:\n- Code style and formatting\n- Naming conventions\n- Documentation requirements\n- Error handling patterns\n- Security practices\n\n## Style Guidelines\n\n### Formatting\n\n- **Indentation**: 2 spaces (JavaScript/TypeScript), 4 spaces (Python)\n- **Line length**: Maximum 100 characters\n- **Braces**: Same line for opening brace (K&R style)\n- **Whitespace**: Space after commas, around operators\n\n### Naming Conventions\n\n- **Variables**: camelCase for JavaScript, snake_case for Python\n- **Functions**: camelCase, descriptive verb-noun pairs\n- **Classes**: PascalCase\n- **Constants**: UPPER_SNAKE_CASE\n- **Files**: kebab-case for modules\n\n## Documentation Requirements\n\n### Function Documentation\n\nEvery function must include:\n- Purpose description\n- Parameter descriptions with types\n- Return value description with type\n- Example usage (for public functions)\n\n### Module Documentation\n\nEvery module must include:\n- Module purpose\n- Public API overview\n- Usage examples\n- Dependencies\n\n## Error Handling\n\n### Required Practices\n\n- Never swallow errors silently\n- Always log errors with context\n- Use specific error types\n- Provide actionable error messages\n- Clean up resources in finally blocks\n\n### Example Pattern\n\n\\`\\`\\`javascript\nasync function processData(data) {\n  try {\n    const result = await transform(data)\n    return result\n  } catch (error) {\n    logger.error('Data processing failed', {\n      data: sanitize(data),\n      error: error.message,\n      stack: error.stack\n    })\n    throw new DataProcessingError('Failed to process data', { cause: error })\n  }\n}\n\\`\\`\\`\n\n## Security Practices\n\n- Validate all external input\n- Sanitize data before output\n- Use parameterized queries\n- Never log sensitive information\n- Keep dependencies updated\n\n## Detailed Guidelines\n\nFor comprehensive style guides by language, see:\n- `references/style-guide.md`\n```\n\n### skills/code-standards/references/style-guide.md\n\n```markdown\n# Comprehensive Style Guide\n\nDetailed style guidelines for all supported languages.\n\n## JavaScript/TypeScript\n\n### Variable Declarations\n\nUse `const` by default, `let` when reassignment needed, never `var`:\n\n\\`\\`\\`javascript\n// Good\nconst MAX_RETRIES = 3\nlet currentTry = 0\n\n// Bad\nvar MAX_RETRIES = 3\n\\`\\`\\`\n\n### Function Declarations\n\nUse function expressions for consistency:\n\n\\`\\`\\`javascript\n// Good\nconst calculateTotal = (items) => {\n  return items.reduce((sum, item) => sum + item.price, 0)\n}\n\n// Bad (inconsistent style)\nfunction calculateTotal(items) {\n  return items.reduce((sum, item) => sum + item.price, 0)\n}\n\\`\\`\\`\n\n### Async/Await\n\nPrefer async/await over promise chains:\n\n\\`\\`\\`javascript\n// Good\nasync function fetchUserData(userId) {\n  const user = await db.getUser(userId)\n  const orders = await db.getOrders(user.id)\n  return { user, orders }\n}\n\n// Bad\nfunction fetchUserData(userId) {\n  return db.getUser(userId)\n    .then(user => db.getOrders(user.id)\n      .then(orders => ({ user, orders })))\n}\n\\`\\`\\`\n\n## Python\n\n### Import Organization\n\nOrder imports: standard library, third-party, local:\n\n\\`\\`\\`python\n# Good\nimport os\nimport sys\n\nimport numpy as np\nimport pandas as pd\n\nfrom app.models import User\nfrom app.utils import helper\n\n# Bad - mixed order\nfrom app.models import User\nimport numpy as np\nimport os\n\\`\\`\\`\n\n### Type Hints\n\nUse type hints for all function signatures:\n\n\\`\\`\\`python\n# Good\ndef calculate_average(numbers: list[float]) -> float:\n    return sum(numbers) / len(numbers)\n\n# Bad\ndef calculate_average(numbers):\n    return sum(numbers) / len(numbers)\n\\`\\`\\`\n\n## Additional Languages\n\nSee language-specific guides for:\n- Go: `references/go-style.md`\n- Rust: `references/rust-style.md`\n- Ruby: `references/ruby-style.md`\n```\n\n### hooks/hooks.json\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Before modifying code, verify it meets our coding standards from the code-standards skill. Check formatting, naming conventions, and documentation. If standards aren't met, suggest improvements.\",\n          \"timeout\": 30\n        }\n      ]\n    }\n  ],\n  \"Stop\": [\n    {\n      \"matcher\": \".*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/validate-commit.sh\",\n          \"timeout\": 45\n        }\n      ]\n    }\n  ]\n}\n```\n\n### hooks/scripts/validate-commit.sh\n\n```bash\n#!/bin/bash\n# Validate code quality before task completion\n\nset -e\n\n# Check if there are any uncommitted changes\nif [[ -z $(git status -s) ]]; then\n  echo '{\"systemMessage\": \"No changes to validate. Task complete.\"}'\n  exit 0\nfi\n\n# Run linter on changed files\nCHANGED_FILES=$(git diff --name-only --cached | grep -E '\\.(js|ts|py)$' || true)\n\nif [[ -z \"$CHANGED_FILES\" ]]; then\n  echo '{\"systemMessage\": \"No code files changed. Validation passed.\"}'\n  exit 0\nfi\n\n# Run appropriate linters\nISSUES=0\n\nfor file in $CHANGED_FILES; do\n  case \"$file\" in\n    *.js|*.ts)\n      if ! npx eslint \"$file\" --quiet; then\n        ISSUES=$((ISSUES + 1))\n      fi\n      ;;\n    *.py)\n      if ! python -m pylint \"$file\" --errors-only; then\n        ISSUES=$((ISSUES + 1))\n      fi\n      ;;\n  esac\ndone\n\nif [[ $ISSUES -gt 0 ]]; then\n  echo \"{\\\"systemMessage\\\": \\\"Found $ISSUES code quality issues. Please fix before completing.\\\"}\"\n  exit 1\nfi\n\necho '{\"systemMessage\": \"Code quality checks passed. Ready to commit.\"}'\nexit 0\n```\n\n## Usage Examples\n\n### Running Commands\n\n```\n$ claude\n> /lint\nRunning linter checks...\n\nCritical Issues (2):\n  src/api/users.js:45 - SQL injection vulnerability\n  src/utils/helpers.js:12 - Unhandled promise rejection\n\nWarnings (5):\n  src/components/Button.tsx:23 - Missing PropTypes\n  ...\n\nStyle Suggestions (8):\n  src/index.js:1 - Use const instead of let\n  ...\n\n> /test\nRunning test suite...\n\nTest Results:\n  ✓ 245 passed\n  ✗ 3 failed\n  ○ 2 skipped\n\nCoverage: 87.3%\n\nUntested Files:\n  src/utils/cache.js - 0% coverage\n  src/api/webhooks.js - 23% coverage\n\nFailed Tests:\n  1. User API › GET /users › should handle pagination\n     Expected 200, received 500\n  ...\n```\n\n### Using Agents\n\n```\n> Review the changes in src/api/users.js\n\n[code-reviewer agent selected automatically]\n\nCode Review: src/api/users.js\n\nCritical Issues:\n  1. Line 45: SQL injection vulnerability\n     - Using string concatenation for SQL query\n     - Replace with parameterized query\n     - Priority: CRITICAL\n\n  2. Line 67: Missing error handling\n     - Database query without try/catch\n     - Could crash server on DB error\n     - Priority: HIGH\n\nSuggestions:\n  1. Line 23: Consider caching user data\n     - Frequent DB queries for same users\n     - Add Redis caching layer\n     - Priority: MEDIUM\n```\n\n## Key Points\n\n1. **Complete manifest**: All recommended metadata fields\n2. **Multiple components**: Commands, agents, skills, hooks\n3. **Rich skills**: References and examples for detailed information\n4. **Automation**: Hooks enforce standards automatically\n5. **Integration**: Components work together cohesively\n\n## When to Use This Pattern\n\n- Production plugins for distribution\n- Team collaboration tools\n- Plugins requiring consistency enforcement\n- Complex workflows with multiple entry points\n",
        "plugins/plugin-dev/skills/plugin-structure/references/component-patterns.md": "# Component Organization Patterns\n\nAdvanced patterns for organizing plugin components effectively.\n\n## Component Lifecycle\n\n### Discovery Phase\n\nWhen Claude Code starts:\n\n1. **Scan enabled plugins**: Read `.claude-plugin/plugin.json` for each\n2. **Discover components**: Look in default and custom paths\n3. **Parse definitions**: Read YAML frontmatter and configurations\n4. **Register components**: Make available to Claude Code\n5. **Initialize**: Start MCP servers, register hooks\n\n**Timing**: Component registration happens during Claude Code initialization, not continuously.\n\n### Activation Phase\n\nWhen components are used:\n\n**Commands**: User types slash command → Claude Code looks up → Executes\n**Agents**: Task arrives → Claude Code evaluates capabilities → Selects agent\n**Skills**: Task context matches description → Claude Code loads skill\n**Hooks**: Event occurs → Claude Code calls matching hooks\n**MCP Servers**: Tool call matches server capability → Forwards to server\n\n## Command Organization Patterns\n\n### Flat Structure\n\nSingle directory with all commands:\n\n```\ncommands/\n├── build.md\n├── test.md\n├── deploy.md\n├── review.md\n└── docs.md\n```\n\n**When to use**:\n- 5-15 commands total\n- All commands at same abstraction level\n- No clear categorization\n\n**Advantages**:\n- Simple, easy to navigate\n- No configuration needed\n- Fast discovery\n\n### Categorized Structure\n\nMultiple directories for different command types:\n\n```\ncommands/              # Core commands\n├── build.md\n└── test.md\n\nadmin-commands/        # Administrative\n├── configure.md\n└── manage.md\n\nworkflow-commands/     # Workflow automation\n├── review.md\n└── deploy.md\n```\n\n**Manifest configuration**:\n```json\n{\n  \"commands\": [\n    \"./commands\",\n    \"./admin-commands\",\n    \"./workflow-commands\"\n  ]\n}\n```\n\n**When to use**:\n- 15+ commands\n- Clear functional categories\n- Different permission levels\n\n**Advantages**:\n- Organized by purpose\n- Easier to maintain\n- Can restrict access by directory\n\n### Hierarchical Structure\n\nNested organization for complex plugins:\n\n```\ncommands/\n├── ci/\n│   ├── build.md\n│   ├── test.md\n│   └── lint.md\n├── deployment/\n│   ├── staging.md\n│   └── production.md\n└── management/\n    ├── config.md\n    └── status.md\n```\n\n**Note**: Claude Code doesn't support nested command discovery automatically. Use custom paths:\n\n```json\n{\n  \"commands\": [\n    \"./commands/ci\",\n    \"./commands/deployment\",\n    \"./commands/management\"\n  ]\n}\n```\n\n**When to use**:\n- 20+ commands\n- Multi-level categorization\n- Complex workflows\n\n**Advantages**:\n- Maximum organization\n- Clear boundaries\n- Scalable structure\n\n## Agent Organization Patterns\n\n### Role-Based Organization\n\nOrganize agents by their primary role:\n\n```\nagents/\n├── code-reviewer.md        # Reviews code\n├── test-generator.md       # Generates tests\n├── documentation-writer.md # Writes docs\n└── refactorer.md          # Refactors code\n```\n\n**When to use**:\n- Agents have distinct, non-overlapping roles\n- Users invoke agents manually\n- Clear agent responsibilities\n\n### Capability-Based Organization\n\nOrganize by specific capabilities:\n\n```\nagents/\n├── python-expert.md        # Python-specific\n├── typescript-expert.md    # TypeScript-specific\n├── api-specialist.md       # API design\n└── database-specialist.md  # Database work\n```\n\n**When to use**:\n- Technology-specific agents\n- Domain expertise focus\n- Automatic agent selection\n\n### Workflow-Based Organization\n\nOrganize by workflow stage:\n\n```\nagents/\n├── planning-agent.md      # Planning phase\n├── implementation-agent.md # Coding phase\n├── testing-agent.md       # Testing phase\n└── deployment-agent.md    # Deployment phase\n```\n\n**When to use**:\n- Sequential workflows\n- Stage-specific expertise\n- Pipeline automation\n\n## Skill Organization Patterns\n\n### Topic-Based Organization\n\nEach skill covers a specific topic:\n\n```\nskills/\n├── api-design/\n│   └── SKILL.md\n├── error-handling/\n│   └── SKILL.md\n├── testing-strategies/\n│   └── SKILL.md\n└── performance-optimization/\n    └── SKILL.md\n```\n\n**When to use**:\n- Knowledge-based skills\n- Educational or reference content\n- Broad applicability\n\n### Tool-Based Organization\n\nSkills for specific tools or technologies:\n\n```\nskills/\n├── docker/\n│   ├── SKILL.md\n│   └── references/\n│       └── dockerfile-best-practices.md\n├── kubernetes/\n│   ├── SKILL.md\n│   └── examples/\n│       └── deployment.yaml\n└── terraform/\n    ├── SKILL.md\n    └── scripts/\n        └── validate-config.sh\n```\n\n**When to use**:\n- Tool-specific expertise\n- Complex tool configurations\n- Tool best practices\n\n### Workflow-Based Organization\n\nSkills for complete workflows:\n\n```\nskills/\n├── code-review-workflow/\n│   ├── SKILL.md\n│   └── references/\n│       ├── checklist.md\n│       └── standards.md\n├── deployment-workflow/\n│   ├── SKILL.md\n│   └── scripts/\n│       ├── pre-deploy.sh\n│       └── post-deploy.sh\n└── testing-workflow/\n    ├── SKILL.md\n    └── examples/\n        └── test-structure.md\n```\n\n**When to use**:\n- Multi-step processes\n- Company-specific workflows\n- Process automation\n\n### Skill with Rich Resources\n\nComprehensive skill with all resource types:\n\n```\nskills/\n└── api-testing/\n    ├── SKILL.md              # Core skill (1500 words)\n    ├── references/\n    │   ├── rest-api-guide.md\n    │   ├── graphql-guide.md\n    │   └── authentication.md\n    ├── examples/\n    │   ├── basic-test.js\n    │   ├── authenticated-test.js\n    │   └── integration-test.js\n    ├── scripts/\n    │   ├── run-tests.sh\n    │   └── generate-report.py\n    └── assets/\n        └── test-template.json\n```\n\n**Resource usage**:\n- **SKILL.md**: Overview and when to use resources\n- **references/**: Detailed guides (loaded as needed)\n- **examples/**: Copy-paste code samples\n- **scripts/**: Executable test runners\n- **assets/**: Templates and configurations\n\n## Hook Organization Patterns\n\n### Monolithic Configuration\n\nSingle hooks.json with all hooks:\n\n```\nhooks/\n├── hooks.json     # All hook definitions\n└── scripts/\n    ├── validate-write.sh\n    ├── validate-bash.sh\n    └── load-context.sh\n```\n\n**hooks.json**:\n```json\n{\n  \"PreToolUse\": [...],\n  \"PostToolUse\": [...],\n  \"Stop\": [...],\n  \"SessionStart\": [...]\n}\n```\n\n**When to use**:\n- 5-10 hooks total\n- Simple hook logic\n- Centralized configuration\n\n### Event-Based Organization\n\nSeparate files per event type:\n\n```\nhooks/\n├── hooks.json              # Combines all\n├── pre-tool-use.json      # PreToolUse hooks\n├── post-tool-use.json     # PostToolUse hooks\n├── stop.json              # Stop hooks\n└── scripts/\n    ├── validate/\n    │   ├── write.sh\n    │   └── bash.sh\n    └── context/\n        └── load.sh\n```\n\n**hooks.json** (combines):\n```json\n{\n  \"PreToolUse\": ${file:./pre-tool-use.json},\n  \"PostToolUse\": ${file:./post-tool-use.json},\n  \"Stop\": ${file:./stop.json}\n}\n```\n\n**Note**: Use build script to combine files, Claude Code doesn't support file references.\n\n**When to use**:\n- 10+ hooks\n- Different teams managing different events\n- Complex hook configurations\n\n### Purpose-Based Organization\n\nGroup by functional purpose:\n\n```\nhooks/\n├── hooks.json\n└── scripts/\n    ├── security/\n    │   ├── validate-paths.sh\n    │   ├── check-credentials.sh\n    │   └── scan-malware.sh\n    ├── quality/\n    │   ├── lint-code.sh\n    │   ├── check-tests.sh\n    │   └── verify-docs.sh\n    └── workflow/\n        ├── notify-team.sh\n        └── update-status.sh\n```\n\n**When to use**:\n- Many hook scripts\n- Clear functional boundaries\n- Team specialization\n\n## Script Organization Patterns\n\n### Flat Scripts\n\nAll scripts in single directory:\n\n```\nscripts/\n├── build.sh\n├── test.py\n├── deploy.sh\n├── validate.js\n└── report.py\n```\n\n**When to use**:\n- 5-10 scripts\n- All scripts related\n- Simple plugin\n\n### Categorized Scripts\n\nGroup by purpose:\n\n```\nscripts/\n├── build/\n│   ├── compile.sh\n│   └── package.sh\n├── test/\n│   ├── run-unit.sh\n│   └── run-integration.sh\n├── deploy/\n│   ├── staging.sh\n│   └── production.sh\n└── utils/\n    ├── log.sh\n    └── notify.sh\n```\n\n**When to use**:\n- 10+ scripts\n- Clear categories\n- Reusable utilities\n\n### Language-Based Organization\n\nGroup by programming language:\n\n```\nscripts/\n├── bash/\n│   ├── build.sh\n│   └── deploy.sh\n├── python/\n│   ├── analyze.py\n│   └── report.py\n└── javascript/\n    ├── bundle.js\n    └── optimize.js\n```\n\n**When to use**:\n- Multi-language scripts\n- Different runtime requirements\n- Language-specific dependencies\n\n## Cross-Component Patterns\n\n### Shared Resources\n\nComponents sharing common resources:\n\n```\nplugin/\n├── commands/\n│   ├── test.md        # Uses lib/test-utils.sh\n│   └── deploy.md      # Uses lib/deploy-utils.sh\n├── agents/\n│   └── tester.md      # References lib/test-utils.sh\n├── hooks/\n│   └── scripts/\n│       └── pre-test.sh # Sources lib/test-utils.sh\n└── lib/\n    ├── test-utils.sh\n    └── deploy-utils.sh\n```\n\n**Usage in components**:\n```bash\n#!/bin/bash\nsource \"${CLAUDE_PLUGIN_ROOT}/lib/test-utils.sh\"\nrun_tests\n```\n\n**Benefits**:\n- Code reuse\n- Consistent behavior\n- Easier maintenance\n\n### Layered Architecture\n\nSeparate concerns into layers:\n\n```\nplugin/\n├── commands/          # User interface layer\n├── agents/            # Orchestration layer\n├── skills/            # Knowledge layer\n└── lib/\n    ├── core/         # Core business logic\n    ├── integrations/ # External services\n    └── utils/        # Helper functions\n```\n\n**When to use**:\n- Large plugins (100+ files)\n- Multiple developers\n- Clear separation of concerns\n\n### Plugin Within Plugin\n\nNested plugin structure:\n\n```\nplugin/\n├── .claude-plugin/\n│   └── plugin.json\n├── core/              # Core functionality\n│   ├── commands/\n│   └── agents/\n└── extensions/        # Optional extensions\n    ├── extension-a/\n    │   ├── commands/\n    │   └── agents/\n    └── extension-b/\n        ├── commands/\n        └── agents/\n```\n\n**Manifest**:\n```json\n{\n  \"commands\": [\n    \"./core/commands\",\n    \"./extensions/extension-a/commands\",\n    \"./extensions/extension-b/commands\"\n  ]\n}\n```\n\n**When to use**:\n- Modular functionality\n- Optional features\n- Plugin families\n\n## Best Practices\n\n### Naming\n\n1. **Consistent naming**: Match file names to component purpose\n2. **Descriptive names**: Indicate what component does\n3. **Avoid abbreviations**: Use full words for clarity\n\n### Organization\n\n1. **Start simple**: Use flat structure, reorganize when needed\n2. **Group related items**: Keep related components together\n3. **Separate concerns**: Don't mix unrelated functionality\n\n### Scalability\n\n1. **Plan for growth**: Choose structure that scales\n2. **Refactor early**: Reorganize before it becomes painful\n3. **Document structure**: Explain organization in README\n\n### Maintainability\n\n1. **Consistent patterns**: Use same structure throughout\n2. **Minimize nesting**: Keep directory depth manageable\n3. **Use conventions**: Follow community standards\n\n### Performance\n\n1. **Avoid deep nesting**: Impacts discovery time\n2. **Minimize custom paths**: Use defaults when possible\n3. **Keep configurations small**: Large configs slow loading\n",
        "plugins/plugin-dev/skills/plugin-structure/references/manifest-reference.md": "# Plugin Manifest Reference\n\nComplete reference for `plugin.json` configuration.\n\n## File Location\n\n**Required path**: `.claude-plugin/plugin.json`\n\nThe manifest MUST be in the `.claude-plugin/` directory at the plugin root. Claude Code will not recognize plugins without this file in the correct location.\n\n## Complete Field Reference\n\n### Core Fields\n\n#### name (required)\n\n**Type**: String\n**Format**: kebab-case\n**Example**: `\"test-automation-suite\"`\n\nThe unique identifier for the plugin. Used for:\n- Plugin identification in Claude Code\n- Conflict detection with other plugins\n- Command namespacing (optional)\n\n**Requirements**:\n- Must be unique across all installed plugins\n- Use only lowercase letters, numbers, and hyphens\n- No spaces or special characters\n- Start with a letter\n- End with a letter or number\n\n**Validation**:\n```javascript\n/^[a-z][a-z0-9]*(-[a-z0-9]+)*$/\n```\n\n**Examples**:\n- ✅ Good: `api-tester`, `code-review`, `git-workflow-automation`\n- ❌ Bad: `API Tester`, `code_review`, `-git-workflow`, `test-`\n\n#### version\n\n**Type**: String\n**Format**: Semantic versioning (MAJOR.MINOR.PATCH)\n**Example**: `\"2.1.0\"`\n**Default**: `\"0.1.0\"` if not specified\n\nSemantic versioning guidelines:\n- **MAJOR**: Incompatible API changes, breaking changes\n- **MINOR**: New functionality, backward-compatible\n- **PATCH**: Bug fixes, backward-compatible\n\n**Pre-release versions**:\n- `\"1.0.0-alpha.1\"` - Alpha release\n- `\"1.0.0-beta.2\"` - Beta release\n- `\"1.0.0-rc.1\"` - Release candidate\n\n**Examples**:\n- `\"0.1.0\"` - Initial development\n- `\"1.0.0\"` - First stable release\n- `\"1.2.3\"` - Patch update to 1.2\n- `\"2.0.0\"` - Major version with breaking changes\n\n#### description\n\n**Type**: String\n**Length**: 50-200 characters recommended\n**Example**: `\"Automates code review workflows with style checks and automated feedback\"`\n\nBrief explanation of plugin purpose and functionality.\n\n**Best practices**:\n- Focus on what the plugin does, not how\n- Use active voice\n- Mention key features or benefits\n- Keep under 200 characters for marketplace display\n\n**Examples**:\n- ✅ \"Generates comprehensive test suites from code analysis and coverage reports\"\n- ✅ \"Integrates with Jira for automatic issue tracking and sprint management\"\n- ❌ \"A plugin that helps you do testing stuff\"\n- ❌ \"This is a very long description that goes on and on about every single feature...\"\n\n### Metadata Fields\n\n#### author\n\n**Type**: Object\n**Fields**: name (required), email (optional), url (optional)\n\n```json\n{\n  \"author\": {\n    \"name\": \"Jane Developer\",\n    \"email\": \"jane@example.com\",\n    \"url\": \"https://janedeveloper.com\"\n  }\n}\n```\n\n**Alternative format** (string only):\n```json\n{\n  \"author\": \"Jane Developer <jane@example.com> (https://janedeveloper.com)\"\n}\n```\n\n**Use cases**:\n- Credit and attribution\n- Contact for support or questions\n- Marketplace display\n- Community recognition\n\n#### homepage\n\n**Type**: String (URL)\n**Example**: `\"https://docs.example.com/plugins/my-plugin\"`\n\nLink to plugin documentation or landing page.\n\n**Should point to**:\n- Plugin documentation site\n- Project homepage\n- Detailed usage guide\n- Installation instructions\n\n**Not for**:\n- Source code (use `repository` field)\n- Issue tracker (include in documentation)\n- Personal websites (use `author.url`)\n\n#### repository\n\n**Type**: String (URL) or Object\n**Example**: `\"https://github.com/user/plugin-name\"`\n\nSource code repository location.\n\n**String format**:\n```json\n{\n  \"repository\": \"https://github.com/user/plugin-name\"\n}\n```\n\n**Object format** (detailed):\n```json\n{\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/user/plugin-name.git\",\n    \"directory\": \"packages/plugin-name\"\n  }\n}\n```\n\n**Use cases**:\n- Source code access\n- Issue reporting\n- Community contributions\n- Transparency and trust\n\n#### license\n\n**Type**: String\n**Format**: SPDX identifier\n**Example**: `\"MIT\"`\n\nSoftware license identifier.\n\n**Common licenses**:\n- `\"MIT\"` - Permissive, popular choice\n- `\"Apache-2.0\"` - Permissive with patent grant\n- `\"GPL-3.0\"` - Copyleft\n- `\"BSD-3-Clause\"` - Permissive\n- `\"ISC\"` - Permissive, similar to MIT\n- `\"UNLICENSED\"` - Proprietary, not open source\n\n**Full list**: https://spdx.org/licenses/\n\n**Multiple licenses**:\n```json\n{\n  \"license\": \"(MIT OR Apache-2.0)\"\n}\n```\n\n#### keywords\n\n**Type**: Array of strings\n**Example**: `[\"testing\", \"automation\", \"ci-cd\", \"quality-assurance\"]`\n\nTags for plugin discovery and categorization.\n\n**Best practices**:\n- Use 5-10 keywords\n- Include functionality categories\n- Add technology names\n- Use common search terms\n- Avoid duplicating plugin name\n\n**Categories to consider**:\n- Functionality: `testing`, `debugging`, `documentation`, `deployment`\n- Technologies: `typescript`, `python`, `docker`, `aws`\n- Workflows: `ci-cd`, `code-review`, `git-workflow`\n- Domains: `web-development`, `data-science`, `devops`\n\n### Component Path Fields\n\n#### commands\n\n**Type**: String or Array of strings\n**Default**: `[\"./commands\"]`\n**Example**: `\"./cli-commands\"`\n\nAdditional directories or files containing command definitions.\n\n**Single path**:\n```json\n{\n  \"commands\": \"./custom-commands\"\n}\n```\n\n**Multiple paths**:\n```json\n{\n  \"commands\": [\n    \"./commands\",\n    \"./admin-commands\",\n    \"./experimental-commands\"\n  ]\n}\n```\n\n**Behavior**: Supplements default `commands/` directory (does not replace)\n\n**Use cases**:\n- Organizing commands by category\n- Separating stable from experimental commands\n- Loading commands from shared locations\n\n#### agents\n\n**Type**: String or Array of strings\n**Default**: `[\"./agents\"]`\n**Example**: `\"./specialized-agents\"`\n\nAdditional directories or files containing agent definitions.\n\n**Format**: Same as `commands` field\n\n**Use cases**:\n- Grouping agents by specialization\n- Separating general-purpose from task-specific agents\n- Loading agents from plugin dependencies\n\n#### hooks\n\n**Type**: String (path to JSON file) or Object (inline configuration)\n**Default**: `\"./hooks/hooks.json\"`\n\nHook configuration location or inline definition.\n\n**File path**:\n```json\n{\n  \"hooks\": \"./config/hooks.json\"\n}\n```\n\n**Inline configuration**:\n```json\n{\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n**Use cases**:\n- Simple plugins: Inline configuration (< 50 lines)\n- Complex plugins: External JSON file\n- Multiple hook sets: Separate files for different contexts\n\n#### mcpServers\n\n**Type**: String (path to JSON file) or Object (inline configuration)\n**Default**: `./.mcp.json`\n\nMCP server configuration location or inline definition.\n\n**File path**:\n```json\n{\n  \"mcpServers\": \"./.mcp.json\"\n}\n```\n\n**Inline configuration**:\n```json\n{\n  \"mcpServers\": {\n    \"github\": {\n      \"command\": \"node\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/github-mcp.js\"],\n      \"env\": {\n        \"GITHUB_TOKEN\": \"${GITHUB_TOKEN}\"\n      }\n    }\n  }\n}\n```\n\n**Use cases**:\n- Simple plugins: Single inline server (< 20 lines)\n- Complex plugins: External `.mcp.json` file\n- Multiple servers: Always use external file\n\n## Path Resolution\n\n### Relative Path Rules\n\nAll paths in component fields must follow these rules:\n\n1. **Must be relative**: No absolute paths\n2. **Must start with `./`**: Indicates relative to plugin root\n3. **Cannot use `../`**: No parent directory navigation\n4. **Forward slashes only**: Even on Windows\n\n**Examples**:\n- ✅ `\"./commands\"`\n- ✅ `\"./src/commands\"`\n- ✅ `\"./configs/hooks.json\"`\n- ❌ `\"/Users/name/plugin/commands\"`\n- ❌ `\"commands\"` (missing `./`)\n- ❌ `\"../shared/commands\"`\n- ❌ `\".\\\\commands\"` (backslash)\n\n### Resolution Order\n\nWhen Claude Code loads components:\n\n1. **Default directories**: Scans standard locations first\n   - `./commands/`\n   - `./agents/`\n   - `./skills/`\n   - `./hooks/hooks.json`\n   - `./.mcp.json`\n\n2. **Custom paths**: Scans paths specified in manifest\n   - Paths from `commands` field\n   - Paths from `agents` field\n   - Files from `hooks` and `mcpServers` fields\n\n3. **Merge behavior**: Components from all locations load\n   - No overwriting\n   - All discovered components register\n   - Name conflicts cause errors\n\n## Validation\n\n### Manifest Validation\n\nClaude Code validates the manifest on plugin load:\n\n**Syntax validation**:\n- Valid JSON format\n- No syntax errors\n- Correct field types\n\n**Field validation**:\n- `name` field present and valid format\n- `version` follows semantic versioning (if present)\n- Paths are relative with `./` prefix\n- URLs are valid (if present)\n\n**Component validation**:\n- Referenced paths exist\n- Hook and MCP configurations are valid\n- No circular dependencies\n\n### Common Validation Errors\n\n**Invalid name format**:\n```json\n{\n  \"name\": \"My Plugin\"  // ❌ Contains spaces\n}\n```\nFix: Use kebab-case\n```json\n{\n  \"name\": \"my-plugin\"  // ✅\n}\n```\n\n**Absolute path**:\n```json\n{\n  \"commands\": \"/Users/name/commands\"  // ❌ Absolute path\n}\n```\nFix: Use relative path\n```json\n{\n  \"commands\": \"./commands\"  // ✅\n}\n```\n\n**Missing ./ prefix**:\n```json\n{\n  \"hooks\": \"hooks/hooks.json\"  // ❌ No ./\n}\n```\nFix: Add ./ prefix\n```json\n{\n  \"hooks\": \"./hooks/hooks.json\"  // ✅\n}\n```\n\n**Invalid version**:\n```json\n{\n  \"version\": \"1.0\"  // ❌ Not semantic versioning\n}\n```\nFix: Use MAJOR.MINOR.PATCH\n```json\n{\n  \"version\": \"1.0.0\"  // ✅\n}\n```\n\n## Minimal vs. Complete Examples\n\n### Minimal Plugin\n\nBare minimum for a working plugin:\n\n```json\n{\n  \"name\": \"hello-world\"\n}\n```\n\nRelies entirely on default directory discovery.\n\n### Recommended Plugin\n\nGood metadata for distribution:\n\n```json\n{\n  \"name\": \"code-review-assistant\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Automates code review with style checks and suggestions\",\n  \"author\": {\n    \"name\": \"Jane Developer\",\n    \"email\": \"jane@example.com\"\n  },\n  \"homepage\": \"https://docs.example.com/code-review\",\n  \"repository\": \"https://github.com/janedev/code-review-assistant\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"code-review\", \"automation\", \"quality\", \"ci-cd\"]\n}\n```\n\n### Complete Plugin\n\nFull configuration with all features:\n\n```json\n{\n  \"name\": \"enterprise-devops\",\n  \"version\": \"2.3.1\",\n  \"description\": \"Comprehensive DevOps automation for enterprise CI/CD pipelines\",\n  \"author\": {\n    \"name\": \"DevOps Team\",\n    \"email\": \"devops@company.com\",\n    \"url\": \"https://company.com/devops\"\n  },\n  \"homepage\": \"https://docs.company.com/plugins/devops\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/company/devops-plugin.git\"\n  },\n  \"license\": \"Apache-2.0\",\n  \"keywords\": [\n    \"devops\",\n    \"ci-cd\",\n    \"automation\",\n    \"kubernetes\",\n    \"docker\",\n    \"deployment\"\n  ],\n  \"commands\": [\n    \"./commands\",\n    \"./admin-commands\"\n  ],\n  \"agents\": \"./specialized-agents\",\n  \"hooks\": \"./config/hooks.json\",\n  \"mcpServers\": \"./.mcp.json\"\n}\n```\n\n## Best Practices\n\n### Metadata\n\n1. **Always include version**: Track changes and updates\n2. **Write clear descriptions**: Help users understand plugin purpose\n3. **Provide contact information**: Enable user support\n4. **Link to documentation**: Reduce support burden\n5. **Choose appropriate license**: Match project goals\n\n### Paths\n\n1. **Use defaults when possible**: Minimize configuration\n2. **Organize logically**: Group related components\n3. **Document custom paths**: Explain why non-standard layout used\n4. **Test path resolution**: Verify on multiple systems\n\n### Maintenance\n\n1. **Bump version on changes**: Follow semantic versioning\n2. **Update keywords**: Reflect new functionality\n3. **Keep description current**: Match actual capabilities\n4. **Maintain changelog**: Track version history\n5. **Update repository links**: Keep URLs current\n\n### Distribution\n\n1. **Complete metadata before publishing**: All fields filled\n2. **Test on clean install**: Verify plugin works without dev environment\n3. **Validate manifest**: Use validation tools\n4. **Include README**: Document installation and usage\n5. **Specify license file**: Include LICENSE file in plugin root\n",
        "plugins/plugin-dev/skills/skill-development/SKILL.md": "---\nname: Skill Development\ndescription: This skill should be used when the user wants to \"create a skill\", \"add a skill to plugin\", \"write a new skill\", \"improve skill description\", \"organize skill content\", or needs guidance on skill structure, progressive disclosure, or skill development best practices for Claude Code plugins.\nversion: 0.1.0\n---\n\n# Skill Development for Claude Code Plugins\n\nThis skill provides guidance for creating effective skills for Claude Code plugins.\n\n## About Skills\n\nSkills are modular, self-contained packages that extend Claude's capabilities by providing\nspecialized knowledge, workflows, and tools. Think of them as \"onboarding guides\" for specific\ndomains or tasks—they transform Claude from a general-purpose agent into a specialized agent\nequipped with procedural knowledge that no model can fully possess.\n\n### What Skills Provide\n\n1. Specialized workflows - Multi-step procedures for specific domains\n2. Tool integrations - Instructions for working with specific file formats or APIs\n3. Domain expertise - Company-specific knowledge, schemas, business logic\n4. Bundled resources - Scripts, references, and assets for complex and repetitive tasks\n\n### Anatomy of a Skill\n\nEvery skill consists of a required SKILL.md file and optional bundled resources:\n\n```\nskill-name/\n├── SKILL.md (required)\n│   ├── YAML frontmatter metadata (required)\n│   │   ├── name: (required)\n│   │   └── description: (required)\n│   └── Markdown instructions (required)\n└── Bundled Resources (optional)\n    ├── scripts/          - Executable code (Python/Bash/etc.)\n    ├── references/       - Documentation intended to be loaded into context as needed\n    └── assets/           - Files used in output (templates, icons, fonts, etc.)\n```\n\n#### SKILL.md (required)\n\n**Metadata Quality:** The `name` and `description` in YAML frontmatter determine when Claude will use the skill. Be specific about what the skill does and when to use it. Use the third-person (e.g. \"This skill should be used when...\" instead of \"Use this skill when...\").\n\n#### Bundled Resources (optional)\n\n##### Scripts (`scripts/`)\n\nExecutable code (Python/Bash/etc.) for tasks that require deterministic reliability or are repeatedly rewritten.\n\n- **When to include**: When the same code is being rewritten repeatedly or deterministic reliability is needed\n- **Example**: `scripts/rotate_pdf.py` for PDF rotation tasks\n- **Benefits**: Token efficient, deterministic, may be executed without loading into context\n- **Note**: Scripts may still need to be read by Claude for patching or environment-specific adjustments\n\n##### References (`references/`)\n\nDocumentation and reference material intended to be loaded as needed into context to inform Claude's process and thinking.\n\n- **When to include**: For documentation that Claude should reference while working\n- **Examples**: `references/finance.md` for financial schemas, `references/mnda.md` for company NDA template, `references/policies.md` for company policies, `references/api_docs.md` for API specifications\n- **Use cases**: Database schemas, API documentation, domain knowledge, company policies, detailed workflow guides\n- **Benefits**: Keeps SKILL.md lean, loaded only when Claude determines it's needed\n- **Best practice**: If files are large (>10k words), include grep search patterns in SKILL.md\n- **Avoid duplication**: Information should live in either SKILL.md or references files, not both. Prefer references files for detailed information unless it's truly core to the skill—this keeps SKILL.md lean while making information discoverable without hogging the context window. Keep only essential procedural instructions and workflow guidance in SKILL.md; move detailed reference material, schemas, and examples to references files.\n\n##### Assets (`assets/`)\n\nFiles not intended to be loaded into context, but rather used within the output Claude produces.\n\n- **When to include**: When the skill needs files that will be used in the final output\n- **Examples**: `assets/logo.png` for brand assets, `assets/slides.pptx` for PowerPoint templates, `assets/frontend-template/` for HTML/React boilerplate, `assets/font.ttf` for typography\n- **Use cases**: Templates, images, icons, boilerplate code, fonts, sample documents that get copied or modified\n- **Benefits**: Separates output resources from documentation, enables Claude to use files without loading them into context\n\n### Progressive Disclosure Design Principle\n\nSkills use a three-level loading system to manage context efficiently:\n\n1. **Metadata (name + description)** - Always in context (~100 words)\n2. **SKILL.md body** - When skill triggers (<5k words)\n3. **Bundled resources** - As needed by Claude (Unlimited*)\n\n*Unlimited because scripts can be executed without reading into context window.\n\n## Skill Creation Process\n\nTo create a skill, follow the \"Skill Creation Process\" in order, skipping steps only if there is a clear reason why they are not applicable.\n\n### Step 1: Understanding the Skill with Concrete Examples\n\nSkip this step only when the skill's usage patterns are already clearly understood. It remains valuable even when working with an existing skill.\n\nTo create an effective skill, clearly understand concrete examples of how the skill will be used. This understanding can come from either direct user examples or generated examples that are validated with user feedback.\n\nFor example, when building an image-editor skill, relevant questions include:\n\n- \"What functionality should the image-editor skill support? Editing, rotating, anything else?\"\n- \"Can you give some examples of how this skill would be used?\"\n- \"I can imagine users asking for things like 'Remove the red-eye from this image' or 'Rotate this image'. Are there other ways you imagine this skill being used?\"\n- \"What would a user say that should trigger this skill?\"\n\nTo avoid overwhelming users, avoid asking too many questions in a single message. Start with the most important questions and follow up as needed for better effectiveness.\n\nConclude this step when there is a clear sense of the functionality the skill should support.\n\n### Step 2: Planning the Reusable Skill Contents\n\nTo turn concrete examples into an effective skill, analyze each example by:\n\n1. Considering how to execute on the example from scratch\n2. Identifying what scripts, references, and assets would be helpful when executing these workflows repeatedly\n\nExample: When building a `pdf-editor` skill to handle queries like \"Help me rotate this PDF,\" the analysis shows:\n\n1. Rotating a PDF requires re-writing the same code each time\n2. A `scripts/rotate_pdf.py` script would be helpful to store in the skill\n\nExample: When designing a `frontend-webapp-builder` skill for queries like \"Build me a todo app\" or \"Build me a dashboard to track my steps,\" the analysis shows:\n\n1. Writing a frontend webapp requires the same boilerplate HTML/React each time\n2. An `assets/hello-world/` template containing the boilerplate HTML/React project files would be helpful to store in the skill\n\nExample: When building a `big-query` skill to handle queries like \"How many users have logged in today?\" the analysis shows:\n\n1. Querying BigQuery requires re-discovering the table schemas and relationships each time\n2. A `references/schema.md` file documenting the table schemas would be helpful to store in the skill\n\n**For Claude Code plugins:** When building a hooks skill, the analysis shows:\n1. Developers repeatedly need to validate hooks.json and test hook scripts\n2. `scripts/validate-hook-schema.sh` and `scripts/test-hook.sh` utilities would be helpful\n3. `references/patterns.md` for detailed hook patterns to avoid bloating SKILL.md\n\nTo establish the skill's contents, analyze each concrete example to create a list of the reusable resources to include: scripts, references, and assets.\n\n### Step 3: Create Skill Structure\n\nFor Claude Code plugins, create the skill directory structure:\n\n```bash\nmkdir -p plugin-name/skills/skill-name/{references,examples,scripts}\ntouch plugin-name/skills/skill-name/SKILL.md\n```\n\n**Note:** Unlike the generic skill-creator which uses `init_skill.py`, plugin skills are created directly in the plugin's `skills/` directory with a simpler manual structure.\n\n### Step 4: Edit the Skill\n\nWhen editing the (newly-created or existing) skill, remember that the skill is being created for another instance of Claude to use. Focus on including information that would be beneficial and non-obvious to Claude. Consider what procedural knowledge, domain-specific details, or reusable assets would help another Claude instance execute these tasks more effectively.\n\n#### Start with Reusable Skill Contents\n\nTo begin implementation, start with the reusable resources identified above: `scripts/`, `references/`, and `assets/` files. Note that this step may require user input. For example, when implementing a `brand-guidelines` skill, the user may need to provide brand assets or templates to store in `assets/`, or documentation to store in `references/`.\n\nAlso, delete any example files and directories not needed for the skill. Create only the directories you actually need (references/, examples/, scripts/).\n\n#### Update SKILL.md\n\n**Writing Style:** Write the entire skill using **imperative/infinitive form** (verb-first instructions), not second person. Use objective, instructional language (e.g., \"To accomplish X, do Y\" rather than \"You should do X\" or \"If you need to do X\"). This maintains consistency and clarity for AI consumption.\n\n**Description (Frontmatter):** Use third-person format with specific trigger phrases:\n\n```yaml\n---\nname: Skill Name\ndescription: This skill should be used when the user asks to \"specific phrase 1\", \"specific phrase 2\", \"specific phrase 3\". Include exact phrases users would say that should trigger this skill. Be concrete and specific.\nversion: 0.1.0\n---\n```\n\n**Good description examples:**\n```yaml\ndescription: This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse hook\", \"validate tool use\", \"implement prompt-based hooks\", or mentions hook events (PreToolUse, PostToolUse, Stop).\n```\n\n**Bad description examples:**\n```yaml\ndescription: Use this skill when working with hooks.  # Wrong person, vague\ndescription: Load when user needs hook help.  # Not third person\ndescription: Provides hook guidance.  # No trigger phrases\n```\n\nTo complete SKILL.md body, answer the following questions:\n\n1. What is the purpose of the skill, in a few sentences?\n2. When should the skill be used? (Include this in frontmatter description with specific triggers)\n3. In practice, how should Claude use the skill? All reusable skill contents developed above should be referenced so that Claude knows how to use them.\n\n**Keep SKILL.md lean:** Target 1,500-2,000 words for the body. Move detailed content to references/:\n- Detailed patterns → `references/patterns.md`\n- Advanced techniques → `references/advanced.md`\n- Migration guides → `references/migration.md`\n- API references → `references/api-reference.md`\n\n**Reference resources in SKILL.md:**\n```markdown\n## Additional Resources\n\n### Reference Files\n\nFor detailed patterns and techniques, consult:\n- **`references/patterns.md`** - Common patterns\n- **`references/advanced.md`** - Advanced use cases\n\n### Example Files\n\nWorking examples in `examples/`:\n- **`example-script.sh`** - Working example\n```\n\n### Step 5: Validate and Test\n\n**For plugin skills, validation is different from generic skills:**\n\n1. **Check structure**: Skill directory in `plugin-name/skills/skill-name/`\n2. **Validate SKILL.md**: Has frontmatter with name and description\n3. **Check trigger phrases**: Description includes specific user queries\n4. **Verify writing style**: Body uses imperative/infinitive form, not second person\n5. **Test progressive disclosure**: SKILL.md is lean (~1,500-2,000 words), detailed content in references/\n6. **Check references**: All referenced files exist\n7. **Validate examples**: Examples are complete and correct\n8. **Test scripts**: Scripts are executable and work correctly\n\n**Use the skill-reviewer agent:**\n```\nAsk: \"Review my skill and check if it follows best practices\"\n```\n\nThe skill-reviewer agent will check description quality, content organization, and progressive disclosure.\n\n### Step 6: Iterate\n\nAfter testing the skill, users may request improvements. Often this happens right after using the skill, with fresh context of how the skill performed.\n\n**Iteration workflow:**\n1. Use the skill on real tasks\n2. Notice struggles or inefficiencies\n3. Identify how SKILL.md or bundled resources should be updated\n4. Implement changes and test again\n\n**Common improvements:**\n- Strengthen trigger phrases in description\n- Move long sections from SKILL.md to references/\n- Add missing examples or scripts\n- Clarify ambiguous instructions\n- Add edge case handling\n\n## Plugin-Specific Considerations\n\n### Skill Location in Plugins\n\nPlugin skills live in the plugin's `skills/` directory:\n\n```\nmy-plugin/\n├── .claude-plugin/\n│   └── plugin.json\n├── commands/\n├── agents/\n└── skills/\n    └── my-skill/\n        ├── SKILL.md\n        ├── references/\n        ├── examples/\n        └── scripts/\n```\n\n### Auto-Discovery\n\nClaude Code automatically discovers skills:\n- Scans `skills/` directory\n- Finds subdirectories containing `SKILL.md`\n- Loads skill metadata (name + description) always\n- Loads SKILL.md body when skill triggers\n- Loads references/examples when needed\n\n### No Packaging Needed\n\nPlugin skills are distributed as part of the plugin, not as separate ZIP files. Users get skills when they install the plugin.\n\n### Testing in Plugins\n\nTest skills by installing plugin locally:\n\n```bash\n# Test with --plugin-dir\ncc --plugin-dir /path/to/plugin\n\n# Ask questions that should trigger the skill\n# Verify skill loads correctly\n```\n\n## Examples from Plugin-Dev\n\nStudy the skills in this plugin as examples of best practices:\n\n**hook-development skill:**\n- Excellent trigger phrases: \"create a hook\", \"add a PreToolUse hook\", etc.\n- Lean SKILL.md (1,651 words)\n- 3 references/ files for detailed content\n- 3 examples/ of working hooks\n- 3 scripts/ utilities\n\n**agent-development skill:**\n- Strong triggers: \"create an agent\", \"agent frontmatter\", etc.\n- Focused SKILL.md (1,438 words)\n- References include the AI generation prompt from Claude Code\n- Complete agent examples\n\n**plugin-settings skill:**\n- Specific triggers: \"plugin settings\", \".local.md files\", \"YAML frontmatter\"\n- References show real implementations (multi-agent-swarm, ralph-wiggum)\n- Working parsing scripts\n\nEach demonstrates progressive disclosure and strong triggering.\n\n## Progressive Disclosure in Practice\n\n### What Goes in SKILL.md\n\n**Include (always loaded when skill triggers):**\n- Core concepts and overview\n- Essential procedures and workflows\n- Quick reference tables\n- Pointers to references/examples/scripts\n- Most common use cases\n\n**Keep under 3,000 words, ideally 1,500-2,000 words**\n\n### What Goes in references/\n\n**Move to references/ (loaded as needed):**\n- Detailed patterns and advanced techniques\n- Comprehensive API documentation\n- Migration guides\n- Edge cases and troubleshooting\n- Extensive examples and walkthroughs\n\n**Each reference file can be large (2,000-5,000+ words)**\n\n### What Goes in examples/\n\n**Working code examples:**\n- Complete, runnable scripts\n- Configuration files\n- Template files\n- Real-world usage examples\n\n**Users can copy and adapt these directly**\n\n### What Goes in scripts/\n\n**Utility scripts:**\n- Validation tools\n- Testing helpers\n- Parsing utilities\n- Automation scripts\n\n**Should be executable and documented**\n\n## Writing Style Requirements\n\n### Imperative/Infinitive Form\n\nWrite using verb-first instructions, not second person:\n\n**Correct (imperative):**\n```\nTo create a hook, define the event type.\nConfigure the MCP server with authentication.\nValidate settings before use.\n```\n\n**Incorrect (second person):**\n```\nYou should create a hook by defining the event type.\nYou need to configure the MCP server.\nYou must validate settings before use.\n```\n\n### Third-Person in Description\n\nThe frontmatter description must use third person:\n\n**Correct:**\n```yaml\ndescription: This skill should be used when the user asks to \"create X\", \"configure Y\"...\n```\n\n**Incorrect:**\n```yaml\ndescription: Use this skill when you want to create X...\ndescription: Load this skill when user asks...\n```\n\n### Objective, Instructional Language\n\nFocus on what to do, not who should do it:\n\n**Correct:**\n```\nParse the frontmatter using sed.\nExtract fields with grep.\nValidate values before use.\n```\n\n**Incorrect:**\n```\nYou can parse the frontmatter...\nClaude should extract fields...\nThe user might validate values...\n```\n\n## Validation Checklist\n\nBefore finalizing a skill:\n\n**Structure:**\n- [ ] SKILL.md file exists with valid YAML frontmatter\n- [ ] Frontmatter has `name` and `description` fields\n- [ ] Markdown body is present and substantial\n- [ ] Referenced files actually exist\n\n**Description Quality:**\n- [ ] Uses third person (\"This skill should be used when...\")\n- [ ] Includes specific trigger phrases users would say\n- [ ] Lists concrete scenarios (\"create X\", \"configure Y\")\n- [ ] Not vague or generic\n\n**Content Quality:**\n- [ ] SKILL.md body uses imperative/infinitive form\n- [ ] Body is focused and lean (1,500-2,000 words ideal, <5k max)\n- [ ] Detailed content moved to references/\n- [ ] Examples are complete and working\n- [ ] Scripts are executable and documented\n\n**Progressive Disclosure:**\n- [ ] Core concepts in SKILL.md\n- [ ] Detailed docs in references/\n- [ ] Working code in examples/\n- [ ] Utilities in scripts/\n- [ ] SKILL.md references these resources\n\n**Testing:**\n- [ ] Skill triggers on expected user queries\n- [ ] Content is helpful for intended tasks\n- [ ] No duplicated information across files\n- [ ] References load when needed\n\n## Common Mistakes to Avoid\n\n### Mistake 1: Weak Trigger Description\n\n❌ **Bad:**\n```yaml\ndescription: Provides guidance for working with hooks.\n```\n\n**Why bad:** Vague, no specific trigger phrases, not third person\n\n✅ **Good:**\n```yaml\ndescription: This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse hook\", \"validate tool use\", or mentions hook events. Provides comprehensive hooks API guidance.\n```\n\n**Why good:** Third person, specific phrases, concrete scenarios\n\n### Mistake 2: Too Much in SKILL.md\n\n❌ **Bad:**\n```\nskill-name/\n└── SKILL.md  (8,000 words - everything in one file)\n```\n\n**Why bad:** Bloats context when skill loads, detailed content always loaded\n\n✅ **Good:**\n```\nskill-name/\n├── SKILL.md  (1,800 words - core essentials)\n└── references/\n    ├── patterns.md (2,500 words)\n    └── advanced.md (3,700 words)\n```\n\n**Why good:** Progressive disclosure, detailed content loaded only when needed\n\n### Mistake 3: Second Person Writing\n\n❌ **Bad:**\n```markdown\nYou should start by reading the configuration file.\nYou need to validate the input.\nYou can use the grep tool to search.\n```\n\n**Why bad:** Second person, not imperative form\n\n✅ **Good:**\n```markdown\nStart by reading the configuration file.\nValidate the input before processing.\nUse the grep tool to search for patterns.\n```\n\n**Why good:** Imperative form, direct instructions\n\n### Mistake 4: Missing Resource References\n\n❌ **Bad:**\n```markdown\n# SKILL.md\n\n[Core content]\n\n[No mention of references/ or examples/]\n```\n\n**Why bad:** Claude doesn't know references exist\n\n✅ **Good:**\n```markdown\n# SKILL.md\n\n[Core content]\n\n## Additional Resources\n\n### Reference Files\n- **`references/patterns.md`** - Detailed patterns\n- **`references/advanced.md`** - Advanced techniques\n\n### Examples\n- **`examples/script.sh`** - Working example\n```\n\n**Why good:** Claude knows where to find additional information\n\n## Quick Reference\n\n### Minimal Skill\n\n```\nskill-name/\n└── SKILL.md\n```\n\nGood for: Simple knowledge, no complex resources needed\n\n### Standard Skill (Recommended)\n\n```\nskill-name/\n├── SKILL.md\n├── references/\n│   └── detailed-guide.md\n└── examples/\n    └── working-example.sh\n```\n\nGood for: Most plugin skills with detailed documentation\n\n### Complete Skill\n\n```\nskill-name/\n├── SKILL.md\n├── references/\n│   ├── patterns.md\n│   └── advanced.md\n├── examples/\n│   ├── example1.sh\n│   └── example2.json\n└── scripts/\n    └── validate.sh\n```\n\nGood for: Complex domains with validation utilities\n\n## Best Practices Summary\n\n✅ **DO:**\n- Use third-person in description (\"This skill should be used when...\")\n- Include specific trigger phrases (\"create X\", \"configure Y\")\n- Keep SKILL.md lean (1,500-2,000 words)\n- Use progressive disclosure (move details to references/)\n- Write in imperative/infinitive form\n- Reference supporting files clearly\n- Provide working examples\n- Create utility scripts for common operations\n- Study plugin-dev's skills as templates\n\n❌ **DON'T:**\n- Use second person anywhere\n- Have vague trigger conditions\n- Put everything in SKILL.md (>3,000 words without references/)\n- Write in second person (\"You should...\")\n- Leave resources unreferenced\n- Include broken or incomplete examples\n- Skip validation\n\n## Additional Resources\n\n### Study These Skills\n\nPlugin-dev's skills demonstrate best practices:\n- `../hook-development/` - Progressive disclosure, utilities\n- `../agent-development/` - AI-assisted creation, references\n- `../mcp-integration/` - Comprehensive references\n- `../plugin-settings/` - Real-world examples\n- `../command-development/` - Clear critical concepts\n- `../plugin-structure/` - Good organization\n\n### Reference Files\n\nFor complete skill-creator methodology:\n- **`references/skill-creator-original.md`** - Full original skill-creator content\n\n## Implementation Workflow\n\nTo create a skill for your plugin:\n\n1. **Understand use cases**: Identify concrete examples of skill usage\n2. **Plan resources**: Determine what scripts/references/examples needed\n3. **Create structure**: `mkdir -p skills/skill-name/{references,examples,scripts}`\n4. **Write SKILL.md**:\n   - Frontmatter with third-person description and trigger phrases\n   - Lean body (1,500-2,000 words) in imperative form\n   - Reference supporting files\n5. **Add resources**: Create references/, examples/, scripts/ as needed\n6. **Validate**: Check description, writing style, organization\n7. **Test**: Verify skill loads on expected triggers\n8. **Iterate**: Improve based on usage\n\nFocus on strong trigger descriptions, progressive disclosure, and imperative writing style for effective skills that load when needed and provide targeted guidance.\n",
        "plugins/plugin-dev/skills/skill-development/references/skill-creator-original.md": "---\nname: skill-creator\ndescription: Guide for creating effective skills. This skill should be used when users want to create a new skill (or update an existing skill) that extends Claude's capabilities with specialized knowledge, workflows, or tool integrations.\nlicense: Complete terms in LICENSE.txt\n---\n\n# Skill Creator\n\nThis skill provides guidance for creating effective skills.\n\n## About Skills\n\nSkills are modular, self-contained packages that extend Claude's capabilities by providing\nspecialized knowledge, workflows, and tools. Think of them as \"onboarding guides\" for specific\ndomains or tasks—they transform Claude from a general-purpose agent into a specialized agent\nequipped with procedural knowledge that no model can fully possess.\n\n### What Skills Provide\n\n1. Specialized workflows - Multi-step procedures for specific domains\n2. Tool integrations - Instructions for working with specific file formats or APIs\n3. Domain expertise - Company-specific knowledge, schemas, business logic\n4. Bundled resources - Scripts, references, and assets for complex and repetitive tasks\n\n### Anatomy of a Skill\n\nEvery skill consists of a required SKILL.md file and optional bundled resources:\n\n```\nskill-name/\n├── SKILL.md (required)\n│   ├── YAML frontmatter metadata (required)\n│   │   ├── name: (required)\n│   │   └── description: (required)\n│   └── Markdown instructions (required)\n└── Bundled Resources (optional)\n    ├── scripts/          - Executable code (Python/Bash/etc.)\n    ├── references/       - Documentation intended to be loaded into context as needed\n    └── assets/           - Files used in output (templates, icons, fonts, etc.)\n```\n\n#### SKILL.md (required)\n\n**Metadata Quality:** The `name` and `description` in YAML frontmatter determine when Claude will use the skill. Be specific about what the skill does and when to use it. Use the third-person (e.g. \"This skill should be used when...\" instead of \"Use this skill when...\").\n\n#### Bundled Resources (optional)\n\n##### Scripts (`scripts/`)\n\nExecutable code (Python/Bash/etc.) for tasks that require deterministic reliability or are repeatedly rewritten.\n\n- **When to include**: When the same code is being rewritten repeatedly or deterministic reliability is needed\n- **Example**: `scripts/rotate_pdf.py` for PDF rotation tasks\n- **Benefits**: Token efficient, deterministic, may be executed without loading into context\n- **Note**: Scripts may still need to be read by Claude for patching or environment-specific adjustments\n\n##### References (`references/`)\n\nDocumentation and reference material intended to be loaded as needed into context to inform Claude's process and thinking.\n\n- **When to include**: For documentation that Claude should reference while working\n- **Examples**: `references/finance.md` for financial schemas, `references/mnda.md` for company NDA template, `references/policies.md` for company policies, `references/api_docs.md` for API specifications\n- **Use cases**: Database schemas, API documentation, domain knowledge, company policies, detailed workflow guides\n- **Benefits**: Keeps SKILL.md lean, loaded only when Claude determines it's needed\n- **Best practice**: If files are large (>10k words), include grep search patterns in SKILL.md\n- **Avoid duplication**: Information should live in either SKILL.md or references files, not both. Prefer references files for detailed information unless it's truly core to the skill—this keeps SKILL.md lean while making information discoverable without hogging the context window. Keep only essential procedural instructions and workflow guidance in SKILL.md; move detailed reference material, schemas, and examples to references files.\n\n##### Assets (`assets/`)\n\nFiles not intended to be loaded into context, but rather used within the output Claude produces.\n\n- **When to include**: When the skill needs files that will be used in the final output\n- **Examples**: `assets/logo.png` for brand assets, `assets/slides.pptx` for PowerPoint templates, `assets/frontend-template/` for HTML/React boilerplate, `assets/font.ttf` for typography\n- **Use cases**: Templates, images, icons, boilerplate code, fonts, sample documents that get copied or modified\n- **Benefits**: Separates output resources from documentation, enables Claude to use files without loading them into context\n\n### Progressive Disclosure Design Principle\n\nSkills use a three-level loading system to manage context efficiently:\n\n1. **Metadata (name + description)** - Always in context (~100 words)\n2. **SKILL.md body** - When skill triggers (<5k words)\n3. **Bundled resources** - As needed by Claude (Unlimited*)\n\n*Unlimited because scripts can be executed without reading into context window.\n\n## Skill Creation Process\n\nTo create a skill, follow the \"Skill Creation Process\" in order, skipping steps only if there is a clear reason why they are not applicable.\n\n### Step 1: Understanding the Skill with Concrete Examples\n\nSkip this step only when the skill's usage patterns are already clearly understood. It remains valuable even when working with an existing skill.\n\nTo create an effective skill, clearly understand concrete examples of how the skill will be used. This understanding can come from either direct user examples or generated examples that are validated with user feedback.\n\nFor example, when building an image-editor skill, relevant questions include:\n\n- \"What functionality should the image-editor skill support? Editing, rotating, anything else?\"\n- \"Can you give some examples of how this skill would be used?\"\n- \"I can imagine users asking for things like 'Remove the red-eye from this image' or 'Rotate this image'. Are there other ways you imagine this skill being used?\"\n- \"What would a user say that should trigger this skill?\"\n\nTo avoid overwhelming users, avoid asking too many questions in a single message. Start with the most important questions and follow up as needed for better effectiveness.\n\nConclude this step when there is a clear sense of the functionality the skill should support.\n\n### Step 2: Planning the Reusable Skill Contents\n\nTo turn concrete examples into an effective skill, analyze each example by:\n\n1. Considering how to execute on the example from scratch\n2. Identifying what scripts, references, and assets would be helpful when executing these workflows repeatedly\n\nExample: When building a `pdf-editor` skill to handle queries like \"Help me rotate this PDF,\" the analysis shows:\n\n1. Rotating a PDF requires re-writing the same code each time\n2. A `scripts/rotate_pdf.py` script would be helpful to store in the skill\n\nExample: When designing a `frontend-webapp-builder` skill for queries like \"Build me a todo app\" or \"Build me a dashboard to track my steps,\" the analysis shows:\n\n1. Writing a frontend webapp requires the same boilerplate HTML/React each time\n2. An `assets/hello-world/` template containing the boilerplate HTML/React project files would be helpful to store in the skill\n\nExample: When building a `big-query` skill to handle queries like \"How many users have logged in today?\" the analysis shows:\n\n1. Querying BigQuery requires re-discovering the table schemas and relationships each time\n2. A `references/schema.md` file documenting the table schemas would be helpful to store in the skill\n\nTo establish the skill's contents, analyze each concrete example to create a list of the reusable resources to include: scripts, references, and assets.\n\n### Step 3: Initializing the Skill\n\nAt this point, it is time to actually create the skill.\n\nSkip this step only if the skill being developed already exists, and iteration or packaging is needed. In this case, continue to the next step.\n\nWhen creating a new skill from scratch, always run the `init_skill.py` script. The script conveniently generates a new template skill directory that automatically includes everything a skill requires, making the skill creation process much more efficient and reliable.\n\nUsage:\n\n```bash\nscripts/init_skill.py <skill-name> --path <output-directory>\n```\n\nThe script:\n\n- Creates the skill directory at the specified path\n- Generates a SKILL.md template with proper frontmatter and TODO placeholders\n- Creates example resource directories: `scripts/`, `references/`, and `assets/`\n- Adds example files in each directory that can be customized or deleted\n\nAfter initialization, customize or remove the generated SKILL.md and example files as needed.\n\n### Step 4: Edit the Skill\n\nWhen editing the (newly-generated or existing) skill, remember that the skill is being created for another instance of Claude to use. Focus on including information that would be beneficial and non-obvious to Claude. Consider what procedural knowledge, domain-specific details, or reusable assets would help another Claude instance execute these tasks more effectively.\n\n#### Start with Reusable Skill Contents\n\nTo begin implementation, start with the reusable resources identified above: `scripts/`, `references/`, and `assets/` files. Note that this step may require user input. For example, when implementing a `brand-guidelines` skill, the user may need to provide brand assets or templates to store in `assets/`, or documentation to store in `references/`.\n\nAlso, delete any example files and directories not needed for the skill. The initialization script creates example files in `scripts/`, `references/`, and `assets/` to demonstrate structure, but most skills won't need all of them.\n\n#### Update SKILL.md\n\n**Writing Style:** Write the entire skill using **imperative/infinitive form** (verb-first instructions), not second person. Use objective, instructional language (e.g., \"To accomplish X, do Y\" rather than \"You should do X\" or \"If you need to do X\"). This maintains consistency and clarity for AI consumption.\n\nTo complete SKILL.md, answer the following questions:\n\n1. What is the purpose of the skill, in a few sentences?\n2. When should the skill be used?\n3. In practice, how should Claude use the skill? All reusable skill contents developed above should be referenced so that Claude knows how to use them.\n\n### Step 5: Packaging a Skill\n\nOnce the skill is ready, it should be packaged into a distributable zip file that gets shared with the user. The packaging process automatically validates the skill first to ensure it meets all requirements:\n\n```bash\nscripts/package_skill.py <path/to/skill-folder>\n```\n\nOptional output directory specification:\n\n```bash\nscripts/package_skill.py <path/to/skill-folder> ./dist\n```\n\nThe packaging script will:\n\n1. **Validate** the skill automatically, checking:\n   - YAML frontmatter format and required fields\n   - Skill naming conventions and directory structure\n   - Description completeness and quality\n   - File organization and resource references\n\n2. **Package** the skill if validation passes, creating a zip file named after the skill (e.g., `my-skill.zip`) that includes all files and maintains the proper directory structure for distribution.\n\nIf validation fails, the script will report the errors and exit without creating a package. Fix any validation errors and run the packaging command again.\n\n### Step 6: Iterate\n\nAfter testing the skill, users may request improvements. Often this happens right after using the skill, with fresh context of how the skill performed.\n\n**Iteration workflow:**\n1. Use the skill on real tasks\n2. Notice struggles or inefficiencies\n3. Identify how SKILL.md or bundled resources should be updated\n4. Implement changes and test again\n",
        "plugins/pr-review-toolkit/.claude-plugin/plugin.json": "{\n  \"name\": \"pr-review-toolkit\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Comprehensive PR review agents specializing in comments, tests, error handling, type design, code quality, and code simplification\",\n  \"author\": {\n    \"name\": \"Daisy\",\n    \"email\": \"daisy@anthropic.com\"\n  }\n}\n",
        "plugins/pr-review-toolkit/README.md": "# PR Review Toolkit\n\nA comprehensive collection of specialized agents for thorough pull request review, covering code comments, test coverage, error handling, type design, code quality, and code simplification.\n\n## Overview\n\nThis plugin bundles 6 expert review agents that each focus on a specific aspect of code quality. Use them individually for targeted reviews or together for comprehensive PR analysis.\n\n## Agents\n\n### 1. comment-analyzer\n**Focus**: Code comment accuracy and maintainability\n\n**Analyzes:**\n- Comment accuracy vs actual code\n- Documentation completeness\n- Comment rot and technical debt\n- Misleading or outdated comments\n\n**When to use:**\n- After adding documentation\n- Before finalizing PRs with comment changes\n- When reviewing existing comments\n\n**Triggers:**\n```\n\"Check if the comments are accurate\"\n\"Review the documentation I added\"\n\"Analyze comments for technical debt\"\n```\n\n### 2. pr-test-analyzer\n**Focus**: Test coverage quality and completeness\n\n**Analyzes:**\n- Behavioral vs line coverage\n- Critical gaps in test coverage\n- Test quality and resilience\n- Edge cases and error conditions\n\n**When to use:**\n- After creating a PR\n- When adding new functionality\n- To verify test thoroughness\n\n**Triggers:**\n```\n\"Check if the tests are thorough\"\n\"Review test coverage for this PR\"\n\"Are there any critical test gaps?\"\n```\n\n### 3. silent-failure-hunter\n**Focus**: Error handling and silent failures\n\n**Analyzes:**\n- Silent failures in catch blocks\n- Inadequate error handling\n- Inappropriate fallback behavior\n- Missing error logging\n\n**When to use:**\n- After implementing error handling\n- When reviewing try/catch blocks\n- Before finalizing PRs with error handling\n\n**Triggers:**\n```\n\"Review the error handling\"\n\"Check for silent failures\"\n\"Analyze catch blocks in this PR\"\n```\n\n### 4. type-design-analyzer\n**Focus**: Type design quality and invariants\n\n**Analyzes:**\n- Type encapsulation (rated 1-10)\n- Invariant expression (rated 1-10)\n- Type usefulness (rated 1-10)\n- Invariant enforcement (rated 1-10)\n\n**When to use:**\n- When introducing new types\n- During PR creation with data models\n- When refactoring type designs\n\n**Triggers:**\n```\n\"Review the UserAccount type design\"\n\"Analyze type design in this PR\"\n\"Check if this type has strong invariants\"\n```\n\n### 5. code-reviewer\n**Focus**: General code review for project guidelines\n\n**Analyzes:**\n- CLAUDE.md compliance\n- Style violations\n- Bug detection\n- Code quality issues\n\n**When to use:**\n- After writing or modifying code\n- Before committing changes\n- Before creating pull requests\n\n**Triggers:**\n```\n\"Review my recent changes\"\n\"Check if everything looks good\"\n\"Review this code before I commit\"\n```\n\n### 6. code-simplifier\n**Focus**: Code simplification and refactoring\n\n**Analyzes:**\n- Code clarity and readability\n- Unnecessary complexity and nesting\n- Redundant code and abstractions\n- Consistency with project standards\n- Overly compact or clever code\n\n**When to use:**\n- After writing or modifying code\n- After passing code review\n- When code works but feels complex\n\n**Triggers:**\n```\n\"Simplify this code\"\n\"Make this clearer\"\n\"Refine this implementation\"\n```\n\n**Note**: This agent preserves functionality while improving code structure and maintainability.\n\n## Usage Patterns\n\n### Individual Agent Usage\n\nSimply ask questions that match an agent's focus area, and Claude will automatically trigger the appropriate agent:\n\n```\n\"Can you check if the tests cover all edge cases?\"\n→ Triggers pr-test-analyzer\n\n\"Review the error handling in the API client\"\n→ Triggers silent-failure-hunter\n\n\"I've added documentation - is it accurate?\"\n→ Triggers comment-analyzer\n```\n\n### Comprehensive PR Review\n\nFor thorough PR review, ask for multiple aspects:\n\n```\n\"I'm ready to create this PR. Please:\n1. Review test coverage\n2. Check for silent failures\n3. Verify code comments are accurate\n4. Review any new types\n5. General code review\"\n```\n\nThis will trigger all relevant agents to analyze different aspects of your PR.\n\n### Proactive Review\n\nClaude may proactively use these agents based on context:\n\n- **After writing code** → code-reviewer\n- **After adding docs** → comment-analyzer\n- **Before creating PR** → Multiple agents as appropriate\n- **After adding types** → type-design-analyzer\n\n## Installation\n\nInstall from your personal marketplace:\n\n```bash\n/plugins\n# Find \"pr-review-toolkit\"\n# Install\n```\n\nOr add manually to settings if needed.\n\n## Agent Details\n\n### Confidence Scoring\n\nAgents provide confidence scores for their findings:\n\n**comment-analyzer**: Identifies issues with high confidence in accuracy checks\n\n**pr-test-analyzer**: Rates test gaps 1-10 (10 = critical, must add)\n\n**silent-failure-hunter**: Flags severity of error handling issues\n\n**type-design-analyzer**: Rates 4 dimensions on 1-10 scale\n\n**code-reviewer**: Scores issues 0-100 (91-100 = critical)\n\n**code-simplifier**: Identifies complexity and suggests simplifications\n\n### Output Formats\n\nAll agents provide structured, actionable output:\n- Clear issue identification\n- Specific file and line references\n- Explanation of why it's a problem\n- Suggestions for improvement\n- Prioritized by severity\n\n## Best Practices\n\n### When to Use Each Agent\n\n**Before Committing:**\n- code-reviewer (general quality)\n- silent-failure-hunter (if changed error handling)\n\n**Before Creating PR:**\n- pr-test-analyzer (test coverage check)\n- comment-analyzer (if added/modified comments)\n- type-design-analyzer (if added/modified types)\n- code-reviewer (final sweep)\n\n**After Passing Review:**\n- code-simplifier (improve clarity and maintainability)\n\n**During PR Review:**\n- Any agent for specific concerns raised\n- Targeted re-review after fixes\n\n### Running Multiple Agents\n\nYou can request multiple agents to run in parallel or sequentially:\n\n**Parallel** (faster):\n```\n\"Run pr-test-analyzer and comment-analyzer in parallel\"\n```\n\n**Sequential** (when one informs the other):\n```\n\"First review test coverage, then check code quality\"\n```\n\n## Tips\n\n- **Be specific**: Target specific agents for focused review\n- **Use proactively**: Run before creating PRs, not after\n- **Address critical issues first**: Agents prioritize findings\n- **Iterate**: Run again after fixes to verify\n- **Don't over-use**: Focus on changed code, not entire codebase\n\n## Troubleshooting\n\n### Agent Not Triggering\n\n**Issue**: Asked for review but agent didn't run\n\n**Solution**:\n- Be more specific in your request\n- Mention the agent type explicitly\n- Reference the specific concern (e.g., \"test coverage\")\n\n### Agent Analyzing Wrong Files\n\n**Issue**: Agent reviewing too much or wrong files\n\n**Solution**:\n- Specify which files to focus on\n- Reference the PR number or branch\n- Mention \"recent changes\" or \"git diff\"\n\n## Integration with Workflow\n\nThis plugin works great with:\n- **build-validator**: Run build/tests before review\n- **Project-specific agents**: Combine with your custom agents\n\n**Recommended workflow:**\n1. Write code → **code-reviewer**\n2. Fix issues → **silent-failure-hunter** (if error handling)\n3. Add tests → **pr-test-analyzer**\n4. Document → **comment-analyzer**\n5. Review passes → **code-simplifier** (polish)\n6. Create PR\n\n## Contributing\n\nFound issues or have suggestions? These agents are maintained in:\n- User agents: `~/.claude/agents/`\n- Project agents: `.claude/agents/` in claude-cli-internal\n\n## License\n\nMIT\n\n## Author\n\nDaisy (daisy@anthropic.com)\n\n---\n\n**Quick Start**: Just ask for review and the right agent will trigger automatically!\n",
        "plugins/pr-review-toolkit/agents/code-reviewer.md": "---\nname: code-reviewer\ndescription: Use this agent when you need to review code for adherence to project guidelines, style guides, and best practices. This agent should be used proactively after writing or modifying code, especially before committing changes or creating pull requests. It will check for style violations, potential issues, and ensure code follows the established patterns in CLAUDE.md. Also the agent needs to know which files to focus on for the review. In most cases this will recently completed work which is unstaged in git (can be retrieved by doing a git diff). However there can be cases where this is different, make sure to specify this as the agent input when calling the agent. \\n\\nExamples:\\n<example>\\nContext: The user has just implemented a new feature with several TypeScript files.\\nuser: \"I've added the new authentication feature. Can you check if everything looks good?\"\\nassistant: \"I'll use the Task tool to launch the code-reviewer agent to review your recent changes.\"\\n<commentary>\\nSince the user has completed a feature and wants validation, use the code-reviewer agent to ensure the code meets project standards.\\n</commentary>\\n</example>\\n<example>\\nContext: The assistant has just written a new utility function.\\nuser: \"Please create a function to validate email addresses\"\\nassistant: \"Here's the email validation function:\"\\n<function call omitted for brevity>\\nassistant: \"Now I'll use the Task tool to launch the code-reviewer agent to review this implementation.\"\\n<commentary>\\nProactively use the code-reviewer agent after writing new code to catch issues early.\\n</commentary>\\n</example>\\n<example>\\nContext: The user is about to create a PR.\\nuser: \"I think I'm ready to create a PR for this feature\"\\nassistant: \"Before creating the PR, I'll use the Task tool to launch the code-reviewer agent to ensure all code meets our standards.\"\\n<commentary>\\nProactively review code before PR creation to avoid review comments and iterations.\\n</commentary>\\n</example>\nmodel: opus\ncolor: green\n---\n\nYou are an expert code reviewer specializing in modern software development across multiple languages and frameworks. Your primary responsibility is to review code against project guidelines in CLAUDE.md with high precision to minimize false positives.\n\n## Review Scope\n\nBy default, review unstaged changes from `git diff`. The user may specify different files or scope to review.\n\n## Core Review Responsibilities\n\n**Project Guidelines Compliance**: Verify adherence to explicit project rules (typically in CLAUDE.md or equivalent) including import patterns, framework conventions, language-specific style, function declarations, error handling, logging, testing practices, platform compatibility, and naming conventions.\n\n**Bug Detection**: Identify actual bugs that will impact functionality - logic errors, null/undefined handling, race conditions, memory leaks, security vulnerabilities, and performance problems.\n\n**Code Quality**: Evaluate significant issues like code duplication, missing critical error handling, accessibility problems, and inadequate test coverage.\n\n## Issue Confidence Scoring\n\nRate each issue from 0-100:\n\n- **0-25**: Likely false positive or pre-existing issue\n- **26-50**: Minor nitpick not explicitly in CLAUDE.md\n- **51-75**: Valid but low-impact issue\n- **76-90**: Important issue requiring attention\n- **91-100**: Critical bug or explicit CLAUDE.md violation\n\n**Only report issues with confidence ≥ 80**\n\n## Output Format\n\nStart by listing what you're reviewing. For each high-confidence issue provide:\n\n- Clear description and confidence score\n- File path and line number\n- Specific CLAUDE.md rule or bug explanation\n- Concrete fix suggestion\n\nGroup issues by severity (Critical: 90-100, Important: 80-89).\n\nIf no high-confidence issues exist, confirm the code meets standards with a brief summary.\n\nBe thorough but filter aggressively - quality over quantity. Focus on issues that truly matter.\n",
        "plugins/pr-review-toolkit/agents/code-simplifier.md": "---\nname: code-simplifier\ndescription: Use this agent when code has been written or modified and needs to be simplified for clarity, consistency, and maintainability while preserving all functionality. This agent should be triggered automatically after completing a coding task or writing a logical chunk of code. It simplifies code by following project best practices while retaining all functionality. The agent focuses only on recently modified code unless instructed otherwise.\\n\\nExamples:\\n\\n<example>\nContext: The assistant has just implemented a new feature that adds user authentication to an API endpoint.\nuser: \"Please add authentication to the /api/users endpoint\"\nassistant: \"I've implemented the authentication for the /api/users endpoint. Here's the code:\"\n<function call omitted for brevity>\n<commentary>\nSince a logical chunk of code has been written (authentication feature), use the Task tool to launch the code-simplifier agent to improve the code's clarity and maintainability while preserving functionality.\n</commentary>\nassistant: \"Now let me use the code-simplifier agent to refine this implementation for better clarity and maintainability\"\n</example>\n\n<example>\nContext: The assistant has just fixed a bug by adding several conditional checks.\nuser: \"Fix the null pointer exception in the data processor\"\nassistant: \"I've added the necessary null checks to prevent the exception:\"\n<function call omitted for brevity>\n<commentary>\nAfter modifying code to fix a bug, use the code-simplifier agent to ensure the fix follows best practices and maintains code quality.\n</commentary>\nassistant: \"Let me refine this bug fix using the code-simplifier agent to ensure it follows our best practices\"\n</example>\n\n<example>\nContext: The assistant has just refactored a function to improve performance.\nuser: \"Optimize the data sorting algorithm for better performance\"\nassistant: \"I've optimized the sorting algorithm. Here's the updated implementation:\"\n<function call omitted for brevity>\n<commentary>\nAfter completing a performance optimization task, use the code-simplifier agent to ensure the optimized code is also clear and maintainable.\n</commentary>\nassistant: \"Now I'll use the code-simplifier agent to ensure the optimized code is also clear and follows our coding standards\"\n</example>\nmodel: opus\n---\n\nYou are an expert code simplification specialist focused on enhancing code clarity, consistency, and maintainability while preserving exact functionality. Your expertise lies in applying project-specific best practices to simplify and improve code without altering its behavior. You prioritize readable, explicit code over overly compact solutions. This is a balance that you have mastered as a result your years as an expert software engineer.\n\nYou will analyze recently modified code and apply refinements that:\n\n1. **Preserve Functionality**: Never change what the code does - only how it does it. All original features, outputs, and behaviors must remain intact.\n\n2. **Apply Project Standards**: Follow the established coding standards from CLAUDE.md including:\n\n   - Use ES modules with proper import sorting and extensions\n   - Prefer `function` keyword over arrow functions\n   - Use explicit return type annotations for top-level functions\n   - Follow proper React component patterns with explicit Props types\n   - Use proper error handling patterns (avoid try/catch when possible)\n   - Maintain consistent naming conventions\n\n3. **Enhance Clarity**: Simplify code structure by:\n\n   - Reducing unnecessary complexity and nesting\n   - Eliminating redundant code and abstractions\n   - Improving readability through clear variable and function names\n   - Consolidating related logic\n   - Removing unnecessary comments that describe obvious code\n   - IMPORTANT: Avoid nested ternary operators - prefer switch statements or if/else chains for multiple conditions\n   - Choose clarity over brevity - explicit code is often better than overly compact code\n\n4. **Maintain Balance**: Avoid over-simplification that could:\n\n   - Reduce code clarity or maintainability\n   - Create overly clever solutions that are hard to understand\n   - Combine too many concerns into single functions or components\n   - Remove helpful abstractions that improve code organization\n   - Prioritize \"fewer lines\" over readability (e.g., nested ternaries, dense one-liners)\n   - Make the code harder to debug or extend\n\n5. **Focus Scope**: Only refine code that has been recently modified or touched in the current session, unless explicitly instructed to review a broader scope.\n\nYour refinement process:\n\n1. Identify the recently modified code sections\n2. Analyze for opportunities to improve elegance and consistency\n3. Apply project-specific best practices and coding standards\n4. Ensure all functionality remains unchanged\n5. Verify the refined code is simpler and more maintainable\n6. Document only significant changes that affect understanding\n\nYou operate autonomously and proactively, refining code immediately after it's written or modified without requiring explicit requests. Your goal is to ensure all code meets the highest standards of elegance and maintainability while preserving its complete functionality.\n",
        "plugins/pr-review-toolkit/agents/comment-analyzer.md": "---\nname: comment-analyzer\ndescription: Use this agent when you need to analyze code comments for accuracy, completeness, and long-term maintainability. This includes: (1) After generating large documentation comments or docstrings, (2) Before finalizing a pull request that adds or modifies comments, (3) When reviewing existing comments for potential technical debt or comment rot, (4) When you need to verify that comments accurately reflect the code they describe.\\n\\n<example>\\nContext: The user is working on a pull request that adds several documentation comments to functions.\\nuser: \"I've added documentation to these functions. Can you check if the comments are accurate?\"\\nassistant: \"I'll use the comment-analyzer agent to thoroughly review all the comments in this pull request for accuracy and completeness.\"\\n<commentary>\\nSince the user has added documentation comments and wants them checked, use the comment-analyzer agent to verify their accuracy against the actual code.\\n</commentary>\\n</example>\\n\\n<example>\\nContext: The user just asked to generate comprehensive documentation for a complex function.\\nuser: \"Add detailed documentation for this authentication handler function\"\\nassistant: \"I've added the documentation. Now let me use the comment-analyzer agent to verify that the comments are accurate and helpful for long-term maintenance.\"\\n<commentary>\\nAfter generating large documentation comments, proactively use the comment-analyzer to ensure quality.\\n</commentary>\\n</example>\\n\\n<example>\\nContext: The user is preparing to create a pull request with multiple code changes and comments.\\nuser: \"I think we're ready to create the PR now\"\\nassistant: \"Before creating the pull request, let me use the comment-analyzer agent to review all the comments we've added or modified to ensure they're accurate and won't create technical debt.\"\\n<commentary>\\nBefore finalizing a PR, use the comment-analyzer to review all comment changes.\\n</commentary>\\n</example>\nmodel: inherit\ncolor: green\n---\n\nYou are a meticulous code comment analyzer with deep expertise in technical documentation and long-term code maintainability. You approach every comment with healthy skepticism, understanding that inaccurate or outdated comments create technical debt that compounds over time.\n\nYour primary mission is to protect codebases from comment rot by ensuring every comment adds genuine value and remains accurate as code evolves. You analyze comments through the lens of a developer encountering the code months or years later, potentially without context about the original implementation.\n\nWhen analyzing comments, you will:\n\n1. **Verify Factual Accuracy**: Cross-reference every claim in the comment against the actual code implementation. Check:\n   - Function signatures match documented parameters and return types\n   - Described behavior aligns with actual code logic\n   - Referenced types, functions, and variables exist and are used correctly\n   - Edge cases mentioned are actually handled in the code\n   - Performance characteristics or complexity claims are accurate\n\n2. **Assess Completeness**: Evaluate whether the comment provides sufficient context without being redundant:\n   - Critical assumptions or preconditions are documented\n   - Non-obvious side effects are mentioned\n   - Important error conditions are described\n   - Complex algorithms have their approach explained\n   - Business logic rationale is captured when not self-evident\n\n3. **Evaluate Long-term Value**: Consider the comment's utility over the codebase's lifetime:\n   - Comments that merely restate obvious code should be flagged for removal\n   - Comments explaining 'why' are more valuable than those explaining 'what'\n   - Comments that will become outdated with likely code changes should be reconsidered\n   - Comments should be written for the least experienced future maintainer\n   - Avoid comments that reference temporary states or transitional implementations\n\n4. **Identify Misleading Elements**: Actively search for ways comments could be misinterpreted:\n   - Ambiguous language that could have multiple meanings\n   - Outdated references to refactored code\n   - Assumptions that may no longer hold true\n   - Examples that don't match current implementation\n   - TODOs or FIXMEs that may have already been addressed\n\n5. **Suggest Improvements**: Provide specific, actionable feedback:\n   - Rewrite suggestions for unclear or inaccurate portions\n   - Recommendations for additional context where needed\n   - Clear rationale for why comments should be removed\n   - Alternative approaches for conveying the same information\n\nYour analysis output should be structured as:\n\n**Summary**: Brief overview of the comment analysis scope and findings\n\n**Critical Issues**: Comments that are factually incorrect or highly misleading\n- Location: [file:line]\n- Issue: [specific problem]\n- Suggestion: [recommended fix]\n\n**Improvement Opportunities**: Comments that could be enhanced\n- Location: [file:line]\n- Current state: [what's lacking]\n- Suggestion: [how to improve]\n\n**Recommended Removals**: Comments that add no value or create confusion\n- Location: [file:line]\n- Rationale: [why it should be removed]\n\n**Positive Findings**: Well-written comments that serve as good examples (if any)\n\nRemember: You are the guardian against technical debt from poor documentation. Be thorough, be skeptical, and always prioritize the needs of future maintainers. Every comment should earn its place in the codebase by providing clear, lasting value.\n\nIMPORTANT: You analyze and provide feedback only. Do not modify code or comments directly. Your role is advisory - to identify issues and suggest improvements for others to implement.\n",
        "plugins/pr-review-toolkit/agents/pr-test-analyzer.md": "---\nname: pr-test-analyzer\ndescription: Use this agent when you need to review a pull request for test coverage quality and completeness. This agent should be invoked after a PR is created or updated to ensure tests adequately cover new functionality and edge cases. Examples:\\n\\n<example>\\nContext: Daisy has just created a pull request with new functionality.\\nuser: \"I've created the PR. Can you check if the tests are thorough?\"\\nassistant: \"I'll use the pr-test-analyzer agent to review the test coverage and identify any critical gaps.\"\\n<commentary>\\nSince Daisy is asking about test thoroughness in a PR, use the Task tool to launch the pr-test-analyzer agent.\\n</commentary>\\n</example>\\n\\n<example>\\nContext: A pull request has been updated with new code changes.\\nuser: \"The PR is ready for review - I added the new validation logic we discussed\"\\nassistant: \"Let me analyze the PR to ensure the tests adequately cover the new validation logic and edge cases.\"\\n<commentary>\\nThe PR has new functionality that needs test coverage analysis, so use the pr-test-analyzer agent.\\n</commentary>\\n</example>\\n\\n<example>\\nContext: Reviewing PR feedback before marking as ready.\\nuser: \"Before I mark this PR as ready, can you double-check the test coverage?\"\\nassistant: \"I'll use the pr-test-analyzer agent to thoroughly review the test coverage and identify any critical gaps before you mark it ready.\"\\n<commentary>\\nDaisy wants a final test coverage check before marking PR ready, use the pr-test-analyzer agent.\\n</commentary>\\n</example>\nmodel: inherit\ncolor: cyan\n---\n\nYou are an expert test coverage analyst specializing in pull request review. Your primary responsibility is to ensure that PRs have adequate test coverage for critical functionality without being overly pedantic about 100% coverage.\n\n**Your Core Responsibilities:**\n\n1. **Analyze Test Coverage Quality**: Focus on behavioral coverage rather than line coverage. Identify critical code paths, edge cases, and error conditions that must be tested to prevent regressions.\n\n2. **Identify Critical Gaps**: Look for:\n   - Untested error handling paths that could cause silent failures\n   - Missing edge case coverage for boundary conditions\n   - Uncovered critical business logic branches\n   - Absent negative test cases for validation logic\n   - Missing tests for concurrent or async behavior where relevant\n\n3. **Evaluate Test Quality**: Assess whether tests:\n   - Test behavior and contracts rather than implementation details\n   - Would catch meaningful regressions from future code changes\n   - Are resilient to reasonable refactoring\n   - Follow DAMP principles (Descriptive and Meaningful Phrases) for clarity\n\n4. **Prioritize Recommendations**: For each suggested test or modification:\n   - Provide specific examples of failures it would catch\n   - Rate criticality from 1-10 (10 being absolutely essential)\n   - Explain the specific regression or bug it prevents\n   - Consider whether existing tests might already cover the scenario\n\n**Analysis Process:**\n\n1. First, examine the PR's changes to understand new functionality and modifications\n2. Review the accompanying tests to map coverage to functionality\n3. Identify critical paths that could cause production issues if broken\n4. Check for tests that are too tightly coupled to implementation\n5. Look for missing negative cases and error scenarios\n6. Consider integration points and their test coverage\n\n**Rating Guidelines:**\n- 9-10: Critical functionality that could cause data loss, security issues, or system failures\n- 7-8: Important business logic that could cause user-facing errors\n- 5-6: Edge cases that could cause confusion or minor issues\n- 3-4: Nice-to-have coverage for completeness\n- 1-2: Minor improvements that are optional\n\n**Output Format:**\n\nStructure your analysis as:\n\n1. **Summary**: Brief overview of test coverage quality\n2. **Critical Gaps** (if any): Tests rated 8-10 that must be added\n3. **Important Improvements** (if any): Tests rated 5-7 that should be considered\n4. **Test Quality Issues** (if any): Tests that are brittle or overfit to implementation\n5. **Positive Observations**: What's well-tested and follows best practices\n\n**Important Considerations:**\n\n- Focus on tests that prevent real bugs, not academic completeness\n- Consider the project's testing standards from CLAUDE.md if available\n- Remember that some code paths may be covered by existing integration tests\n- Avoid suggesting tests for trivial getters/setters unless they contain logic\n- Consider the cost/benefit of each suggested test\n- Be specific about what each test should verify and why it matters\n- Note when tests are testing implementation rather than behavior\n\nYou are thorough but pragmatic, focusing on tests that provide real value in catching bugs and preventing regressions rather than achieving metrics. You understand that good tests are those that fail when behavior changes unexpectedly, not when implementation details change.\n",
        "plugins/pr-review-toolkit/agents/silent-failure-hunter.md": "---\nname: silent-failure-hunter\ndescription: Use this agent when reviewing code changes in a pull request to identify silent failures, inadequate error handling, and inappropriate fallback behavior. This agent should be invoked proactively after completing a logical chunk of work that involves error handling, catch blocks, fallback logic, or any code that could potentially suppress errors. Examples:\\n\\n<example>\\nContext: Daisy has just finished implementing a new feature that fetches data from an API with fallback behavior.\\nDaisy: \"I've added error handling to the API client. Can you review it?\"\\nAssistant: \"Let me use the silent-failure-hunter agent to thoroughly examine the error handling in your changes.\"\\n<Task tool invocation to launch silent-failure-hunter agent>\\n</example>\\n\\n<example>\\nContext: Daisy has created a PR with changes that include try-catch blocks.\\nDaisy: \"Please review PR #1234\"\\nAssistant: \"I'll use the silent-failure-hunter agent to check for any silent failures or inadequate error handling in this PR.\"\\n<Task tool invocation to launch silent-failure-hunter agent>\\n</example>\\n\\n<example>\\nContext: Daisy has just refactored error handling code.\\nDaisy: \"I've updated the error handling in the authentication module\"\\nAssistant: \"Let me proactively use the silent-failure-hunter agent to ensure the error handling changes don't introduce silent failures.\"\\n<Task tool invocation to launch silent-failure-hunter agent>\\n</example>\nmodel: inherit\ncolor: yellow\n---\n\nYou are an elite error handling auditor with zero tolerance for silent failures and inadequate error handling. Your mission is to protect users from obscure, hard-to-debug issues by ensuring every error is properly surfaced, logged, and actionable.\n\n## Core Principles\n\nYou operate under these non-negotiable rules:\n\n1. **Silent failures are unacceptable** - Any error that occurs without proper logging and user feedback is a critical defect\n2. **Users deserve actionable feedback** - Every error message must tell users what went wrong and what they can do about it\n3. **Fallbacks must be explicit and justified** - Falling back to alternative behavior without user awareness is hiding problems\n4. **Catch blocks must be specific** - Broad exception catching hides unrelated errors and makes debugging impossible\n5. **Mock/fake implementations belong only in tests** - Production code falling back to mocks indicates architectural problems\n\n## Your Review Process\n\nWhen examining a PR, you will:\n\n### 1. Identify All Error Handling Code\n\nSystematically locate:\n- All try-catch blocks (or try-except in Python, Result types in Rust, etc.)\n- All error callbacks and error event handlers\n- All conditional branches that handle error states\n- All fallback logic and default values used on failure\n- All places where errors are logged but execution continues\n- All optional chaining or null coalescing that might hide errors\n\n### 2. Scrutinize Each Error Handler\n\nFor every error handling location, ask:\n\n**Logging Quality:**\n- Is the error logged with appropriate severity (logError for production issues)?\n- Does the log include sufficient context (what operation failed, relevant IDs, state)?\n- Is there an error ID from constants/errorIds.ts for Sentry tracking?\n- Would this log help someone debug the issue 6 months from now?\n\n**User Feedback:**\n- Does the user receive clear, actionable feedback about what went wrong?\n- Does the error message explain what the user can do to fix or work around the issue?\n- Is the error message specific enough to be useful, or is it generic and unhelpful?\n- Are technical details appropriately exposed or hidden based on the user's context?\n\n**Catch Block Specificity:**\n- Does the catch block catch only the expected error types?\n- Could this catch block accidentally suppress unrelated errors?\n- List every type of unexpected error that could be hidden by this catch block\n- Should this be multiple catch blocks for different error types?\n\n**Fallback Behavior:**\n- Is there fallback logic that executes when an error occurs?\n- Is this fallback explicitly requested by the user or documented in the feature spec?\n- Does the fallback behavior mask the underlying problem?\n- Would the user be confused about why they're seeing fallback behavior instead of an error?\n- Is this a fallback to a mock, stub, or fake implementation outside of test code?\n\n**Error Propagation:**\n- Should this error be propagated to a higher-level handler instead of being caught here?\n- Is the error being swallowed when it should bubble up?\n- Does catching here prevent proper cleanup or resource management?\n\n### 3. Examine Error Messages\n\nFor every user-facing error message:\n- Is it written in clear, non-technical language (when appropriate)?\n- Does it explain what went wrong in terms the user understands?\n- Does it provide actionable next steps?\n- Does it avoid jargon unless the user is a developer who needs technical details?\n- Is it specific enough to distinguish this error from similar errors?\n- Does it include relevant context (file names, operation names, etc.)?\n\n### 4. Check for Hidden Failures\n\nLook for patterns that hide errors:\n- Empty catch blocks (absolutely forbidden)\n- Catch blocks that only log and continue\n- Returning null/undefined/default values on error without logging\n- Using optional chaining (?.) to silently skip operations that might fail\n- Fallback chains that try multiple approaches without explaining why\n- Retry logic that exhausts attempts without informing the user\n\n### 5. Validate Against Project Standards\n\nEnsure compliance with the project's error handling requirements:\n- Never silently fail in production code\n- Always log errors using appropriate logging functions\n- Include relevant context in error messages\n- Use proper error IDs for Sentry tracking\n- Propagate errors to appropriate handlers\n- Never use empty catch blocks\n- Handle errors explicitly, never suppress them\n\n## Your Output Format\n\nFor each issue you find, provide:\n\n1. **Location**: File path and line number(s)\n2. **Severity**: CRITICAL (silent failure, broad catch), HIGH (poor error message, unjustified fallback), MEDIUM (missing context, could be more specific)\n3. **Issue Description**: What's wrong and why it's problematic\n4. **Hidden Errors**: List specific types of unexpected errors that could be caught and hidden\n5. **User Impact**: How this affects the user experience and debugging\n6. **Recommendation**: Specific code changes needed to fix the issue\n7. **Example**: Show what the corrected code should look like\n\n## Your Tone\n\nYou are thorough, skeptical, and uncompromising about error handling quality. You:\n- Call out every instance of inadequate error handling, no matter how minor\n- Explain the debugging nightmares that poor error handling creates\n- Provide specific, actionable recommendations for improvement\n- Acknowledge when error handling is done well (rare but important)\n- Use phrases like \"This catch block could hide...\", \"Users will be confused when...\", \"This fallback masks the real problem...\"\n- Are constructively critical - your goal is to improve the code, not to criticize the developer\n\n## Special Considerations\n\nBe aware of project-specific patterns from CLAUDE.md:\n- This project has specific logging functions: logForDebugging (user-facing), logError (Sentry), logEvent (Statsig)\n- Error IDs should come from constants/errorIds.ts\n- The project explicitly forbids silent failures in production code\n- Empty catch blocks are never acceptable\n- Tests should not be fixed by disabling them; errors should not be fixed by bypassing them\n\nRemember: Every silent failure you catch prevents hours of debugging frustration for users and developers. Be thorough, be skeptical, and never let an error slip through unnoticed.\n",
        "plugins/pr-review-toolkit/agents/type-design-analyzer.md": "---\nname: type-design-analyzer\ndescription: Use this agent when you need expert analysis of type design in your codebase. Specifically use it: (1) when introducing a new type to ensure it follows best practices for encapsulation and invariant expression, (2) during pull request creation to review all types being added, (3) when refactoring existing types to improve their design quality. The agent will provide both qualitative feedback and quantitative ratings on encapsulation, invariant expression, usefulness, and enforcement.\\n\\n<example>\\nContext: Daisy is writing code that introduces a new UserAccount type and wants to ensure it has well-designed invariants.\\nuser: \"I've just created a new UserAccount type that handles user authentication and permissions\"\\nassistant: \"I'll use the type-design-analyzer agent to review the UserAccount type design\"\\n<commentary>\\nSince a new type is being introduced, use the type-design-analyzer to ensure it has strong invariants and proper encapsulation.\\n</commentary>\\n</example>\\n\\n<example>\\nContext: Daisy is creating a pull request and wants to review all newly added types.\\nuser: \"I'm about to create a PR with several new data model types\"\\nassistant: \"Let me use the type-design-analyzer agent to review all the types being added in this PR\"\\n<commentary>\\nDuring PR creation with new types, use the type-design-analyzer to review their design quality.\\n</commentary>\\n</example>\nmodel: inherit\ncolor: pink\n---\n\nYou are a type design expert with extensive experience in large-scale software architecture. Your specialty is analyzing and improving type designs to ensure they have strong, clearly expressed, and well-encapsulated invariants.\n\n**Your Core Mission:**\nYou evaluate type designs with a critical eye toward invariant strength, encapsulation quality, and practical usefulness. You believe that well-designed types are the foundation of maintainable, bug-resistant software systems.\n\n**Analysis Framework:**\n\nWhen analyzing a type, you will:\n\n1. **Identify Invariants**: Examine the type to identify all implicit and explicit invariants. Look for:\n   - Data consistency requirements\n   - Valid state transitions\n   - Relationship constraints between fields\n   - Business logic rules encoded in the type\n   - Preconditions and postconditions\n\n2. **Evaluate Encapsulation** (Rate 1-10):\n   - Are internal implementation details properly hidden?\n   - Can the type's invariants be violated from outside?\n   - Are there appropriate access modifiers?\n   - Is the interface minimal and complete?\n\n3. **Assess Invariant Expression** (Rate 1-10):\n   - How clearly are invariants communicated through the type's structure?\n   - Are invariants enforced at compile-time where possible?\n   - Is the type self-documenting through its design?\n   - Are edge cases and constraints obvious from the type definition?\n\n4. **Judge Invariant Usefulness** (Rate 1-10):\n   - Do the invariants prevent real bugs?\n   - Are they aligned with business requirements?\n   - Do they make the code easier to reason about?\n   - Are they neither too restrictive nor too permissive?\n\n5. **Examine Invariant Enforcement** (Rate 1-10):\n   - Are invariants checked at construction time?\n   - Are all mutation points guarded?\n   - Is it impossible to create invalid instances?\n   - Are runtime checks appropriate and comprehensive?\n\n**Output Format:**\n\nProvide your analysis in this structure:\n\n```\n## Type: [TypeName]\n\n### Invariants Identified\n- [List each invariant with a brief description]\n\n### Ratings\n- **Encapsulation**: X/10\n  [Brief justification]\n  \n- **Invariant Expression**: X/10\n  [Brief justification]\n  \n- **Invariant Usefulness**: X/10\n  [Brief justification]\n  \n- **Invariant Enforcement**: X/10\n  [Brief justification]\n\n### Strengths\n[What the type does well]\n\n### Concerns\n[Specific issues that need attention]\n\n### Recommended Improvements\n[Concrete, actionable suggestions that won't overcomplicate the codebase]\n```\n\n**Key Principles:**\n\n- Prefer compile-time guarantees over runtime checks when feasible\n- Value clarity and expressiveness over cleverness\n- Consider the maintenance burden of suggested improvements\n- Recognize that perfect is the enemy of good - suggest pragmatic improvements\n- Types should make illegal states unrepresentable\n- Constructor validation is crucial for maintaining invariants\n- Immutability often simplifies invariant maintenance\n\n**Common Anti-patterns to Flag:**\n\n- Anemic domain models with no behavior\n- Types that expose mutable internals\n- Invariants enforced only through documentation\n- Types with too many responsibilities\n- Missing validation at construction boundaries\n- Inconsistent enforcement across mutation methods\n- Types that rely on external code to maintain invariants\n\n**When Suggesting Improvements:**\n\nAlways consider:\n- The complexity cost of your suggestions\n- Whether the improvement justifies potential breaking changes\n- The skill level and conventions of the existing codebase\n- Performance implications of additional validation\n- The balance between safety and usability\n\nThink deeply about each type's role in the larger system. Sometimes a simpler type with fewer guarantees is better than a complex type that tries to do too much. Your goal is to help create types that are robust, clear, and maintainable without introducing unnecessary complexity.\n",
        "plugins/pr-review-toolkit/commands/review-pr.md": "---\ndescription: \"Comprehensive PR review using specialized agents\"\nargument-hint: \"[review-aspects]\"\nallowed-tools: [\"Bash\", \"Glob\", \"Grep\", \"Read\", \"Task\"]\n---\n\n# Comprehensive PR Review\n\nRun a comprehensive pull request review using multiple specialized agents, each focusing on a different aspect of code quality.\n\n**Review Aspects (optional):** \"$ARGUMENTS\"\n\n## Review Workflow:\n\n1. **Determine Review Scope**\n   - Check git status to identify changed files\n   - Parse arguments to see if user requested specific review aspects\n   - Default: Run all applicable reviews\n\n2. **Available Review Aspects:**\n\n   - **comments** - Analyze code comment accuracy and maintainability\n   - **tests** - Review test coverage quality and completeness\n   - **errors** - Check error handling for silent failures\n   - **types** - Analyze type design and invariants (if new types added)\n   - **code** - General code review for project guidelines\n   - **simplify** - Simplify code for clarity and maintainability\n   - **all** - Run all applicable reviews (default)\n\n3. **Identify Changed Files**\n   - Run `git diff --name-only` to see modified files\n   - Check if PR already exists: `gh pr view`\n   - Identify file types and what reviews apply\n\n4. **Determine Applicable Reviews**\n\n   Based on changes:\n   - **Always applicable**: code-reviewer (general quality)\n   - **If test files changed**: pr-test-analyzer\n   - **If comments/docs added**: comment-analyzer\n   - **If error handling changed**: silent-failure-hunter\n   - **If types added/modified**: type-design-analyzer\n   - **After passing review**: code-simplifier (polish and refine)\n\n5. **Launch Review Agents**\n\n   **Sequential approach** (one at a time):\n   - Easier to understand and act on\n   - Each report is complete before next\n   - Good for interactive review\n\n   **Parallel approach** (user can request):\n   - Launch all agents simultaneously\n   - Faster for comprehensive review\n   - Results come back together\n\n6. **Aggregate Results**\n\n   After agents complete, summarize:\n   - **Critical Issues** (must fix before merge)\n   - **Important Issues** (should fix)\n   - **Suggestions** (nice to have)\n   - **Positive Observations** (what's good)\n\n7. **Provide Action Plan**\n\n   Organize findings:\n   ```markdown\n   # PR Review Summary\n\n   ## Critical Issues (X found)\n   - [agent-name]: Issue description [file:line]\n\n   ## Important Issues (X found)\n   - [agent-name]: Issue description [file:line]\n\n   ## Suggestions (X found)\n   - [agent-name]: Suggestion [file:line]\n\n   ## Strengths\n   - What's well-done in this PR\n\n   ## Recommended Action\n   1. Fix critical issues first\n   2. Address important issues\n   3. Consider suggestions\n   4. Re-run review after fixes\n   ```\n\n## Usage Examples:\n\n**Full review (default):**\n```\n/pr-review-toolkit:review-pr\n```\n\n**Specific aspects:**\n```\n/pr-review-toolkit:review-pr tests errors\n# Reviews only test coverage and error handling\n\n/pr-review-toolkit:review-pr comments\n# Reviews only code comments\n\n/pr-review-toolkit:review-pr simplify\n# Simplifies code after passing review\n```\n\n**Parallel review:**\n```\n/pr-review-toolkit:review-pr all parallel\n# Launches all agents in parallel\n```\n\n## Agent Descriptions:\n\n**comment-analyzer**:\n- Verifies comment accuracy vs code\n- Identifies comment rot\n- Checks documentation completeness\n\n**pr-test-analyzer**:\n- Reviews behavioral test coverage\n- Identifies critical gaps\n- Evaluates test quality\n\n**silent-failure-hunter**:\n- Finds silent failures\n- Reviews catch blocks\n- Checks error logging\n\n**type-design-analyzer**:\n- Analyzes type encapsulation\n- Reviews invariant expression\n- Rates type design quality\n\n**code-reviewer**:\n- Checks CLAUDE.md compliance\n- Detects bugs and issues\n- Reviews general code quality\n\n**code-simplifier**:\n- Simplifies complex code\n- Improves clarity and readability\n- Applies project standards\n- Preserves functionality\n\n## Tips:\n\n- **Run early**: Before creating PR, not after\n- **Focus on changes**: Agents analyze git diff by default\n- **Address critical first**: Fix high-priority issues before lower priority\n- **Re-run after fixes**: Verify issues are resolved\n- **Use specific reviews**: Target specific aspects when you know the concern\n\n## Workflow Integration:\n\n**Before committing:**\n```\n1. Write code\n2. Run: /pr-review-toolkit:review-pr code errors\n3. Fix any critical issues\n4. Commit\n```\n\n**Before creating PR:**\n```\n1. Stage all changes\n2. Run: /pr-review-toolkit:review-pr all\n3. Address all critical and important issues\n4. Run specific reviews again to verify\n5. Create PR\n```\n\n**After PR feedback:**\n```\n1. Make requested changes\n2. Run targeted reviews based on feedback\n3. Verify issues are resolved\n4. Push updates\n```\n\n## Notes:\n\n- Agents run autonomously and return detailed reports\n- Each agent focuses on its specialty for deep analysis\n- Results are actionable with specific file:line references\n- Agents use appropriate models for their complexity\n- All agents available in `/agents` list\n",
        "plugins/ralph-wiggum/.claude-plugin/plugin.json": "{\n  \"name\": \"ralph-wiggum\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Implementation of the Ralph Wiggum technique - continuous self-referential AI loops for interactive iterative development. Run Claude in a while-true loop with the same prompt until task completion.\",\n  \"author\": {\n    \"name\": \"Daisy Hollman\",\n    \"email\": \"daisy@anthropic.com\"\n  }\n}\n",
        "plugins/ralph-wiggum/README.md": "# Ralph Wiggum Plugin\n\nImplementation of the Ralph Wiggum technique for iterative, self-referential AI development loops in Claude Code.\n\n## What is Ralph?\n\nRalph is a development methodology based on continuous AI agent loops. As Geoffrey Huntley describes it: **\"Ralph is a Bash loop\"** - a simple `while true` that repeatedly feeds an AI agent a prompt file, allowing it to iteratively improve its work until completion.\n\nThe technique is named after Ralph Wiggum from The Simpsons, embodying the philosophy of persistent iteration despite setbacks.\n\n### Core Concept\n\nThis plugin implements Ralph using a **Stop hook** that intercepts Claude's exit attempts:\n\n```bash\n# You run ONCE:\n/ralph-loop \"Your task description\" --completion-promise \"DONE\"\n\n# Then Claude Code automatically:\n# 1. Works on the task\n# 2. Tries to exit\n# 3. Stop hook blocks exit\n# 4. Stop hook feeds the SAME prompt back\n# 5. Repeat until completion\n```\n\nThe loop happens **inside your current session** - you don't need external bash loops. The Stop hook in `hooks/stop-hook.sh` creates the self-referential feedback loop by blocking normal session exit.\n\nThis creates a **self-referential feedback loop** where:\n- The prompt never changes between iterations\n- Claude's previous work persists in files\n- Each iteration sees modified files and git history\n- Claude autonomously improves by reading its own past work in files\n\n## Quick Start\n\n```bash\n/ralph-loop \"Build a REST API for todos. Requirements: CRUD operations, input validation, tests. Output <promise>COMPLETE</promise> when done.\" --completion-promise \"COMPLETE\" --max-iterations 50\n```\n\nClaude will:\n- Implement the API iteratively\n- Run tests and see failures\n- Fix bugs based on test output\n- Iterate until all requirements met\n- Output the completion promise when done\n\n## Commands\n\n### /ralph-loop\n\nStart a Ralph loop in your current session.\n\n**Usage:**\n```bash\n/ralph-loop \"<prompt>\" --max-iterations <n> --completion-promise \"<text>\"\n```\n\n**Options:**\n- `--max-iterations <n>` - Stop after N iterations (default: unlimited)\n- `--completion-promise <text>` - Phrase that signals completion\n\n### /cancel-ralph\n\nCancel the active Ralph loop.\n\n**Usage:**\n```bash\n/cancel-ralph\n```\n\n## Prompt Writing Best Practices\n\n### 1. Clear Completion Criteria\n\n❌ Bad: \"Build a todo API and make it good.\"\n\n✅ Good:\n```markdown\nBuild a REST API for todos.\n\nWhen complete:\n- All CRUD endpoints working\n- Input validation in place\n- Tests passing (coverage > 80%)\n- README with API docs\n- Output: <promise>COMPLETE</promise>\n```\n\n### 2. Incremental Goals\n\n❌ Bad: \"Create a complete e-commerce platform.\"\n\n✅ Good:\n```markdown\nPhase 1: User authentication (JWT, tests)\nPhase 2: Product catalog (list/search, tests)\nPhase 3: Shopping cart (add/remove, tests)\n\nOutput <promise>COMPLETE</promise> when all phases done.\n```\n\n### 3. Self-Correction\n\n❌ Bad: \"Write code for feature X.\"\n\n✅ Good:\n```markdown\nImplement feature X following TDD:\n1. Write failing tests\n2. Implement feature\n3. Run tests\n4. If any fail, debug and fix\n5. Refactor if needed\n6. Repeat until all green\n7. Output: <promise>COMPLETE</promise>\n```\n\n### 4. Escape Hatches\n\nAlways use `--max-iterations` as a safety net to prevent infinite loops on impossible tasks:\n\n```bash\n# Recommended: Always set a reasonable iteration limit\n/ralph-loop \"Try to implement feature X\" --max-iterations 20\n\n# In your prompt, include what to do if stuck:\n# \"After 15 iterations, if not complete:\n#  - Document what's blocking progress\n#  - List what was attempted\n#  - Suggest alternative approaches\"\n```\n\n**Note**: The `--completion-promise` uses exact string matching, so you cannot use it for multiple completion conditions (like \"SUCCESS\" vs \"BLOCKED\"). Always rely on `--max-iterations` as your primary safety mechanism.\n\n## Philosophy\n\nRalph embodies several key principles:\n\n### 1. Iteration > Perfection\nDon't aim for perfect on first try. Let the loop refine the work.\n\n### 2. Failures Are Data\n\"Deterministically bad\" means failures are predictable and informative. Use them to tune prompts.\n\n### 3. Operator Skill Matters\nSuccess depends on writing good prompts, not just having a good model.\n\n### 4. Persistence Wins\nKeep trying until success. The loop handles retry logic automatically.\n\n## When to Use Ralph\n\n**Good for:**\n- Well-defined tasks with clear success criteria\n- Tasks requiring iteration and refinement (e.g., getting tests to pass)\n- Greenfield projects where you can walk away\n- Tasks with automatic verification (tests, linters)\n\n**Not good for:**\n- Tasks requiring human judgment or design decisions\n- One-shot operations\n- Tasks with unclear success criteria\n- Production debugging (use targeted debugging instead)\n\n## Real-World Results\n\n- Successfully generated 6 repositories overnight in Y Combinator hackathon testing\n- One $50k contract completed for $297 in API costs\n- Created entire programming language (\"cursed\") over 3 months using this approach\n\n## Learn More\n\n- Original technique: https://ghuntley.com/ralph/\n- Ralph Orchestrator: https://github.com/mikeyobrien/ralph-orchestrator\n\n## For Help\n\nRun `/help` in Claude Code for detailed command reference and examples.\n",
        "plugins/ralph-wiggum/commands/cancel-ralph.md": "---\ndescription: \"Cancel active Ralph Wiggum loop\"\nallowed-tools: [\"Bash(test -f .claude/ralph-loop.local.md:*)\", \"Bash(rm .claude/ralph-loop.local.md)\", \"Read(.claude/ralph-loop.local.md)\"]\nhide-from-slash-command-tool: \"true\"\n---\n\n# Cancel Ralph\n\nTo cancel the Ralph loop:\n\n1. Check if `.claude/ralph-loop.local.md` exists using Bash: `test -f .claude/ralph-loop.local.md && echo \"EXISTS\" || echo \"NOT_FOUND\"`\n\n2. **If NOT_FOUND**: Say \"No active Ralph loop found.\"\n\n3. **If EXISTS**:\n   - Read `.claude/ralph-loop.local.md` to get the current iteration number from the `iteration:` field\n   - Remove the file using Bash: `rm .claude/ralph-loop.local.md`\n   - Report: \"Cancelled Ralph loop (was at iteration N)\" where N is the iteration value\n",
        "plugins/ralph-wiggum/commands/help.md": "---\ndescription: \"Explain Ralph Wiggum technique and available commands\"\n---\n\n# Ralph Wiggum Plugin Help\n\nPlease explain the following to the user:\n\n## What is the Ralph Wiggum Technique?\n\nThe Ralph Wiggum technique is an iterative development methodology based on continuous AI loops, pioneered by Geoffrey Huntley.\n\n**Core concept:**\n```bash\nwhile :; do\n  cat PROMPT.md | claude-code --continue\ndone\n```\n\nThe same prompt is fed to Claude repeatedly. The \"self-referential\" aspect comes from Claude seeing its own previous work in the files and git history, not from feeding output back as input.\n\n**Each iteration:**\n1. Claude receives the SAME prompt\n2. Works on the task, modifying files\n3. Tries to exit\n4. Stop hook intercepts and feeds the same prompt again\n5. Claude sees its previous work in the files\n6. Iteratively improves until completion\n\nThe technique is described as \"deterministically bad in an undeterministic world\" - failures are predictable, enabling systematic improvement through prompt tuning.\n\n## Available Commands\n\n### /ralph-loop <PROMPT> [OPTIONS]\n\nStart a Ralph loop in your current session.\n\n**Usage:**\n```\n/ralph-loop \"Refactor the cache layer\" --max-iterations 20\n/ralph-loop \"Add tests\" --completion-promise \"TESTS COMPLETE\"\n```\n\n**Options:**\n- `--max-iterations <n>` - Max iterations before auto-stop\n- `--completion-promise <text>` - Promise phrase to signal completion\n\n**How it works:**\n1. Creates `.claude/.ralph-loop.local.md` state file\n2. You work on the task\n3. When you try to exit, stop hook intercepts\n4. Same prompt fed back\n5. You see your previous work\n6. Continues until promise detected or max iterations\n\n---\n\n### /cancel-ralph\n\nCancel an active Ralph loop (removes the loop state file).\n\n**Usage:**\n```\n/cancel-ralph\n```\n\n**How it works:**\n- Checks for active loop state file\n- Removes `.claude/.ralph-loop.local.md`\n- Reports cancellation with iteration count\n\n---\n\n## Key Concepts\n\n### Completion Promises\n\nTo signal completion, Claude must output a `<promise>` tag:\n\n```\n<promise>TASK COMPLETE</promise>\n```\n\nThe stop hook looks for this specific tag. Without it (or `--max-iterations`), Ralph runs infinitely.\n\n### Self-Reference Mechanism\n\nThe \"loop\" doesn't mean Claude talks to itself. It means:\n- Same prompt repeated\n- Claude's work persists in files\n- Each iteration sees previous attempts\n- Builds incrementally toward goal\n\n## Example\n\n### Interactive Bug Fix\n\n```\n/ralph-loop \"Fix the token refresh logic in auth.ts. Output <promise>FIXED</promise> when all tests pass.\" --completion-promise \"FIXED\" --max-iterations 10\n```\n\nYou'll see Ralph:\n- Attempt fixes\n- Run tests\n- See failures\n- Iterate on solution\n- In your current session\n\n## When to Use Ralph\n\n**Good for:**\n- Well-defined tasks with clear success criteria\n- Tasks requiring iteration and refinement\n- Iterative development with self-correction\n- Greenfield projects\n\n**Not good for:**\n- Tasks requiring human judgment or design decisions\n- One-shot operations\n- Tasks with unclear success criteria\n- Debugging production issues (use targeted debugging instead)\n\n## Learn More\n\n- Original technique: https://ghuntley.com/ralph/\n- Ralph Orchestrator: https://github.com/mikeyobrien/ralph-orchestrator\n",
        "plugins/ralph-wiggum/commands/ralph-loop.md": "---\ndescription: \"Start Ralph Wiggum loop in current session\"\nargument-hint: \"PROMPT [--max-iterations N] [--completion-promise TEXT]\"\nallowed-tools: [\"Bash(${CLAUDE_PLUGIN_ROOT}/scripts/setup-ralph-loop.sh:*)\"]\nhide-from-slash-command-tool: \"true\"\n---\n\n# Ralph Loop Command\n\nExecute the setup script to initialize the Ralph loop:\n\n```!\n\"${CLAUDE_PLUGIN_ROOT}/scripts/setup-ralph-loop.sh\" $ARGUMENTS\n```\n\nPlease work on the task. When you try to exit, the Ralph loop will feed the SAME PROMPT back to you for the next iteration. You'll see your previous work in files and git history, allowing you to iterate and improve.\n\nCRITICAL RULE: If a completion promise is set, you may ONLY output it when the statement is completely and unequivocally TRUE. Do not output false promises to escape the loop, even if you think you're stuck or should exit for other reasons. The loop is designed to continue until genuine completion.\n",
        "plugins/ralph-wiggum/hooks/hooks.json": "{\n  \"description\": \"Ralph Wiggum plugin stop hook for self-referential loops\",\n  \"hooks\": {\n    \"Stop\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/stop-hook.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/ralph-wiggum/hooks/stop-hook.sh": "#!/bin/bash\n\n# Ralph Wiggum Stop Hook\n# Prevents session exit when a ralph-loop is active\n# Feeds Claude's output back as input to continue the loop\n\nset -euo pipefail\n\n# Read hook input from stdin (advanced stop hook API)\nHOOK_INPUT=$(cat)\n\n# Check if ralph-loop is active\nRALPH_STATE_FILE=\".claude/ralph-loop.local.md\"\n\nif [[ ! -f \"$RALPH_STATE_FILE\" ]]; then\n  # No active loop - allow exit\n  exit 0\nfi\n\n# Parse markdown frontmatter (YAML between ---) and extract values\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$RALPH_STATE_FILE\")\nITERATION=$(echo \"$FRONTMATTER\" | grep '^iteration:' | sed 's/iteration: *//')\nMAX_ITERATIONS=$(echo \"$FRONTMATTER\" | grep '^max_iterations:' | sed 's/max_iterations: *//')\n# Extract completion_promise and strip surrounding quotes if present\nCOMPLETION_PROMISE=$(echo \"$FRONTMATTER\" | grep '^completion_promise:' | sed 's/completion_promise: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n# Validate numeric fields before arithmetic operations\nif [[ ! \"$ITERATION\" =~ ^[0-9]+$ ]]; then\n  echo \"⚠️  Ralph loop: State file corrupted\" >&2\n  echo \"   File: $RALPH_STATE_FILE\" >&2\n  echo \"   Problem: 'iteration' field is not a valid number (got: '$ITERATION')\" >&2\n  echo \"\" >&2\n  echo \"   This usually means the state file was manually edited or corrupted.\" >&2\n  echo \"   Ralph loop is stopping. Run /ralph-loop again to start fresh.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\nif [[ ! \"$MAX_ITERATIONS\" =~ ^[0-9]+$ ]]; then\n  echo \"⚠️  Ralph loop: State file corrupted\" >&2\n  echo \"   File: $RALPH_STATE_FILE\" >&2\n  echo \"   Problem: 'max_iterations' field is not a valid number (got: '$MAX_ITERATIONS')\" >&2\n  echo \"\" >&2\n  echo \"   This usually means the state file was manually edited or corrupted.\" >&2\n  echo \"   Ralph loop is stopping. Run /ralph-loop again to start fresh.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Check if max iterations reached\nif [[ $MAX_ITERATIONS -gt 0 ]] && [[ $ITERATION -ge $MAX_ITERATIONS ]]; then\n  echo \"🛑 Ralph loop: Max iterations ($MAX_ITERATIONS) reached.\"\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Get transcript path from hook input\nTRANSCRIPT_PATH=$(echo \"$HOOK_INPUT\" | jq -r '.transcript_path')\n\nif [[ ! -f \"$TRANSCRIPT_PATH\" ]]; then\n  echo \"⚠️  Ralph loop: Transcript file not found\" >&2\n  echo \"   Expected: $TRANSCRIPT_PATH\" >&2\n  echo \"   This is unusual and may indicate a Claude Code internal issue.\" >&2\n  echo \"   Ralph loop is stopping.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Read last assistant message from transcript (JSONL format - one JSON per line)\n# First check if there are any assistant messages\nif ! grep -q '\"role\":\"assistant\"' \"$TRANSCRIPT_PATH\"; then\n  echo \"⚠️  Ralph loop: No assistant messages found in transcript\" >&2\n  echo \"   Transcript: $TRANSCRIPT_PATH\" >&2\n  echo \"   This is unusual and may indicate a transcript format issue\" >&2\n  echo \"   Ralph loop is stopping.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Extract last assistant message with explicit error handling\nLAST_LINE=$(grep '\"role\":\"assistant\"' \"$TRANSCRIPT_PATH\" | tail -1)\nif [[ -z \"$LAST_LINE\" ]]; then\n  echo \"⚠️  Ralph loop: Failed to extract last assistant message\" >&2\n  echo \"   Ralph loop is stopping.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Parse JSON with error handling\nLAST_OUTPUT=$(echo \"$LAST_LINE\" | jq -r '\n  .message.content |\n  map(select(.type == \"text\")) |\n  map(.text) |\n  join(\"\\n\")\n' 2>&1)\n\n# Check if jq succeeded\nif [[ $? -ne 0 ]]; then\n  echo \"⚠️  Ralph loop: Failed to parse assistant message JSON\" >&2\n  echo \"   Error: $LAST_OUTPUT\" >&2\n  echo \"   This may indicate a transcript format issue\" >&2\n  echo \"   Ralph loop is stopping.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\nif [[ -z \"$LAST_OUTPUT\" ]]; then\n  echo \"⚠️  Ralph loop: Assistant message contained no text content\" >&2\n  echo \"   Ralph loop is stopping.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Check for completion promise (only if set)\nif [[ \"$COMPLETION_PROMISE\" != \"null\" ]] && [[ -n \"$COMPLETION_PROMISE\" ]]; then\n  # Extract text from <promise> tags using Perl for multiline support\n  # -0777 slurps entire input, s flag makes . match newlines\n  # .*? is non-greedy (takes FIRST tag), whitespace normalized\n  PROMISE_TEXT=$(echo \"$LAST_OUTPUT\" | perl -0777 -pe 's/.*?<promise>(.*?)<\\/promise>.*/$1/s; s/^\\s+|\\s+$//g; s/\\s+/ /g' 2>/dev/null || echo \"\")\n\n  # Use = for literal string comparison (not pattern matching)\n  # == in [[ ]] does glob pattern matching which breaks with *, ?, [ characters\n  if [[ -n \"$PROMISE_TEXT\" ]] && [[ \"$PROMISE_TEXT\" = \"$COMPLETION_PROMISE\" ]]; then\n    echo \"✅ Ralph loop: Detected <promise>$COMPLETION_PROMISE</promise>\"\n    rm \"$RALPH_STATE_FILE\"\n    exit 0\n  fi\nfi\n\n# Not complete - continue loop with SAME PROMPT\nNEXT_ITERATION=$((ITERATION + 1))\n\n# Extract prompt (everything after the closing ---)\n# Skip first --- line, skip until second --- line, then print everything after\n# Use i>=2 instead of i==2 to handle --- in prompt content\nPROMPT_TEXT=$(awk '/^---$/{i++; next} i>=2' \"$RALPH_STATE_FILE\")\n\nif [[ -z \"$PROMPT_TEXT\" ]]; then\n  echo \"⚠️  Ralph loop: State file corrupted or incomplete\" >&2\n  echo \"   File: $RALPH_STATE_FILE\" >&2\n  echo \"   Problem: No prompt text found\" >&2\n  echo \"\" >&2\n  echo \"   This usually means:\" >&2\n  echo \"     • State file was manually edited\" >&2\n  echo \"     • File was corrupted during writing\" >&2\n  echo \"\" >&2\n  echo \"   Ralph loop is stopping. Run /ralph-loop again to start fresh.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Update iteration in frontmatter (portable across macOS and Linux)\n# Create temp file, then atomically replace\nTEMP_FILE=\"${RALPH_STATE_FILE}.tmp.$$\"\nsed \"s/^iteration: .*/iteration: $NEXT_ITERATION/\" \"$RALPH_STATE_FILE\" > \"$TEMP_FILE\"\nmv \"$TEMP_FILE\" \"$RALPH_STATE_FILE\"\n\n# Build system message with iteration count and completion promise info\nif [[ \"$COMPLETION_PROMISE\" != \"null\" ]] && [[ -n \"$COMPLETION_PROMISE\" ]]; then\n  SYSTEM_MSG=\"🔄 Ralph iteration $NEXT_ITERATION | To stop: output <promise>$COMPLETION_PROMISE</promise> (ONLY when statement is TRUE - do not lie to exit!)\"\nelse\n  SYSTEM_MSG=\"🔄 Ralph iteration $NEXT_ITERATION | No completion promise set - loop runs infinitely\"\nfi\n\n# Output JSON to block the stop and feed prompt back\n# The \"reason\" field contains the prompt that will be sent back to Claude\njq -n \\\n  --arg prompt \"$PROMPT_TEXT\" \\\n  --arg msg \"$SYSTEM_MSG\" \\\n  '{\n    \"decision\": \"block\",\n    \"reason\": $prompt,\n    \"systemMessage\": $msg\n  }'\n\n# Exit 0 for successful hook execution\nexit 0\n",
        "plugins/security-guidance/.claude-plugin/plugin.json": "{\n  \"name\": \"security-guidance\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Security reminder hook that warns about potential security issues when editing files, including command injection, XSS, and unsafe code patterns\",\n  \"author\": {\n    \"name\": \"David Dworken\",\n    \"email\": \"dworken@anthropic.com\"\n  }\n}\n",
        "plugins/security-guidance/hooks/hooks.json": "{\n  \"description\": \"Security reminder hook that warns about potential security issues when editing files\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/hooks/security_reminder_hook.py\"\n          }\n        ],\n        \"matcher\": \"Edit|Write|MultiEdit\"\n      }\n    ]\n  }\n}\n",
        "plugins/security-guidance/hooks/security_reminder_hook.py": "#!/usr/bin/env python3\n\"\"\"\nSecurity Reminder Hook for Claude Code\nThis hook checks for security patterns in file edits and warns about potential vulnerabilities.\n\"\"\"\n\nimport json\nimport os\nimport random\nimport sys\nfrom datetime import datetime\n\n# Debug log file\nDEBUG_LOG_FILE = \"/tmp/security-warnings-log.txt\"\n\n\ndef debug_log(message):\n    \"\"\"Append debug message to log file with timestamp.\"\"\"\n    try:\n        timestamp = datetime.now().strftime(\"%Y-%m-%d %H:%M:%S.%f\")[:-3]\n        with open(DEBUG_LOG_FILE, \"a\") as f:\n            f.write(f\"[{timestamp}] {message}\\n\")\n    except Exception as e:\n        # Silently ignore logging errors to avoid disrupting the hook\n        pass\n\n\n# State file to track warnings shown (session-scoped using session ID)\n\n# Security patterns configuration\nSECURITY_PATTERNS = [\n    {\n        \"ruleName\": \"github_actions_workflow\",\n        \"path_check\": lambda path: \".github/workflows/\" in path\n        and (path.endswith(\".yml\") or path.endswith(\".yaml\")),\n        \"reminder\": \"\"\"You are editing a GitHub Actions workflow file. Be aware of these security risks:\n\n1. **Command Injection**: Never use untrusted input (like issue titles, PR descriptions, commit messages) directly in run: commands without proper escaping\n2. **Use environment variables**: Instead of ${{ github.event.issue.title }}, use env: with proper quoting\n3. **Review the guide**: https://github.blog/security/vulnerability-research/how-to-catch-github-actions-workflow-injections-before-attackers-do/\n\nExample of UNSAFE pattern to avoid:\nrun: echo \"${{ github.event.issue.title }}\"\n\nExample of SAFE pattern:\nenv:\n  TITLE: ${{ github.event.issue.title }}\nrun: echo \"$TITLE\"\n\nOther risky inputs to be careful with:\n- github.event.issue.body\n- github.event.pull_request.title\n- github.event.pull_request.body\n- github.event.comment.body\n- github.event.review.body\n- github.event.review_comment.body\n- github.event.pages.*.page_name\n- github.event.commits.*.message\n- github.event.head_commit.message\n- github.event.head_commit.author.email\n- github.event.head_commit.author.name\n- github.event.commits.*.author.email\n- github.event.commits.*.author.name\n- github.event.pull_request.head.ref\n- github.event.pull_request.head.label\n- github.event.pull_request.head.repo.default_branch\n- github.head_ref\"\"\",\n    },\n    {\n        \"ruleName\": \"child_process_exec\",\n        \"substrings\": [\"child_process.exec\", \"exec(\", \"execSync(\"],\n        \"reminder\": \"\"\"⚠️ Security Warning: Using child_process.exec() can lead to command injection vulnerabilities.\n\nThis codebase provides a safer alternative: src/utils/execFileNoThrow.ts\n\nInstead of:\n  exec(`command ${userInput}`)\n\nUse:\n  import { execFileNoThrow } from '../utils/execFileNoThrow.js'\n  await execFileNoThrow('command', [userInput])\n\nThe execFileNoThrow utility:\n- Uses execFile instead of exec (prevents shell injection)\n- Handles Windows compatibility automatically\n- Provides proper error handling\n- Returns structured output with stdout, stderr, and status\n\nOnly use exec() if you absolutely need shell features and the input is guaranteed to be safe.\"\"\",\n    },\n    {\n        \"ruleName\": \"new_function_injection\",\n        \"substrings\": [\"new Function\"],\n        \"reminder\": \"⚠️ Security Warning: Using new Function() with dynamic strings can lead to code injection vulnerabilities. Consider alternative approaches that don't evaluate arbitrary code. Only use new Function() if you truly need to evaluate arbitrary dynamic code.\",\n    },\n    {\n        \"ruleName\": \"eval_injection\",\n        \"substrings\": [\"eval(\"],\n        \"reminder\": \"⚠️ Security Warning: eval() executes arbitrary code and is a major security risk. Consider using JSON.parse() for data parsing or alternative design patterns that don't require code evaluation. Only use eval() if you truly need to evaluate arbitrary code.\",\n    },\n    {\n        \"ruleName\": \"react_dangerously_set_html\",\n        \"substrings\": [\"dangerouslySetInnerHTML\"],\n        \"reminder\": \"⚠️ Security Warning: dangerouslySetInnerHTML can lead to XSS vulnerabilities if used with untrusted content. Ensure all content is properly sanitized using an HTML sanitizer library like DOMPurify, or use safe alternatives.\",\n    },\n    {\n        \"ruleName\": \"document_write_xss\",\n        \"substrings\": [\"document.write\"],\n        \"reminder\": \"⚠️ Security Warning: document.write() can be exploited for XSS attacks and has performance issues. Use DOM manipulation methods like createElement() and appendChild() instead.\",\n    },\n    {\n        \"ruleName\": \"innerHTML_xss\",\n        \"substrings\": [\".innerHTML =\", \".innerHTML=\"],\n        \"reminder\": \"⚠️ Security Warning: Setting innerHTML with untrusted content can lead to XSS vulnerabilities. Use textContent for plain text or safe DOM methods for HTML content. If you need HTML support, consider using an HTML sanitizer library such as DOMPurify.\",\n    },\n    {\n        \"ruleName\": \"pickle_deserialization\",\n        \"substrings\": [\"pickle\"],\n        \"reminder\": \"⚠️ Security Warning: Using pickle with untrusted content can lead to arbitrary code execution. Consider using JSON or other safe serialization formats instead. Only use pickle if it is explicitly needed or requested by the user.\",\n    },\n    {\n        \"ruleName\": \"os_system_injection\",\n        \"substrings\": [\"os.system\", \"from os import system\"],\n        \"reminder\": \"⚠️ Security Warning: This code appears to use os.system. This should only be used with static arguments and never with arguments that could be user-controlled.\",\n    },\n]\n\n\ndef get_state_file(session_id):\n    \"\"\"Get session-specific state file path.\"\"\"\n    return os.path.expanduser(f\"~/.claude/security_warnings_state_{session_id}.json\")\n\n\ndef cleanup_old_state_files():\n    \"\"\"Remove state files older than 30 days.\"\"\"\n    try:\n        state_dir = os.path.expanduser(\"~/.claude\")\n        if not os.path.exists(state_dir):\n            return\n\n        current_time = datetime.now().timestamp()\n        thirty_days_ago = current_time - (30 * 24 * 60 * 60)\n\n        for filename in os.listdir(state_dir):\n            if filename.startswith(\"security_warnings_state_\") and filename.endswith(\n                \".json\"\n            ):\n                file_path = os.path.join(state_dir, filename)\n                try:\n                    file_mtime = os.path.getmtime(file_path)\n                    if file_mtime < thirty_days_ago:\n                        os.remove(file_path)\n                except (OSError, IOError):\n                    pass  # Ignore errors for individual file cleanup\n    except Exception:\n        pass  # Silently ignore cleanup errors\n\n\ndef load_state(session_id):\n    \"\"\"Load the state of shown warnings from file.\"\"\"\n    state_file = get_state_file(session_id)\n    if os.path.exists(state_file):\n        try:\n            with open(state_file, \"r\") as f:\n                return set(json.load(f))\n        except (json.JSONDecodeError, IOError):\n            return set()\n    return set()\n\n\ndef save_state(session_id, shown_warnings):\n    \"\"\"Save the state of shown warnings to file.\"\"\"\n    state_file = get_state_file(session_id)\n    try:\n        os.makedirs(os.path.dirname(state_file), exist_ok=True)\n        with open(state_file, \"w\") as f:\n            json.dump(list(shown_warnings), f)\n    except IOError as e:\n        debug_log(f\"Failed to save state file: {e}\")\n        pass  # Fail silently if we can't save state\n\n\ndef check_patterns(file_path, content):\n    \"\"\"Check if file path or content matches any security patterns.\"\"\"\n    # Normalize path by removing leading slashes\n    normalized_path = file_path.lstrip(\"/\")\n\n    for pattern in SECURITY_PATTERNS:\n        # Check path-based patterns\n        if \"path_check\" in pattern and pattern[\"path_check\"](normalized_path):\n            return pattern[\"ruleName\"], pattern[\"reminder\"]\n\n        # Check content-based patterns\n        if \"substrings\" in pattern and content:\n            for substring in pattern[\"substrings\"]:\n                if substring in content:\n                    return pattern[\"ruleName\"], pattern[\"reminder\"]\n\n    return None, None\n\n\ndef extract_content_from_input(tool_name, tool_input):\n    \"\"\"Extract content to check from tool input based on tool type.\"\"\"\n    if tool_name == \"Write\":\n        return tool_input.get(\"content\", \"\")\n    elif tool_name == \"Edit\":\n        return tool_input.get(\"new_string\", \"\")\n    elif tool_name == \"MultiEdit\":\n        edits = tool_input.get(\"edits\", [])\n        if edits:\n            return \" \".join(edit.get(\"new_string\", \"\") for edit in edits)\n        return \"\"\n\n    return \"\"\n\n\ndef main():\n    \"\"\"Main hook function.\"\"\"\n    # Check if security reminders are enabled\n    security_reminder_enabled = os.environ.get(\"ENABLE_SECURITY_REMINDER\", \"1\")\n\n    # Only run if security reminders are enabled\n    if security_reminder_enabled == \"0\":\n        sys.exit(0)\n\n    # Periodically clean up old state files (10% chance per run)\n    if random.random() < 0.1:\n        cleanup_old_state_files()\n\n    # Read input from stdin\n    try:\n        raw_input = sys.stdin.read()\n        input_data = json.loads(raw_input)\n    except json.JSONDecodeError as e:\n        debug_log(f\"JSON decode error: {e}\")\n        sys.exit(0)  # Allow tool to proceed if we can't parse input\n\n    # Extract session ID and tool information from the hook input\n    session_id = input_data.get(\"session_id\", \"default\")\n    tool_name = input_data.get(\"tool_name\", \"\")\n    tool_input = input_data.get(\"tool_input\", {})\n\n    # Check if this is a relevant tool\n    if tool_name not in [\"Edit\", \"Write\", \"MultiEdit\"]:\n        sys.exit(0)  # Allow non-file tools to proceed\n\n    # Extract file path from tool_input\n    file_path = tool_input.get(\"file_path\", \"\")\n    if not file_path:\n        sys.exit(0)  # Allow if no file path\n\n    # Extract content to check\n    content = extract_content_from_input(tool_name, tool_input)\n\n    # Check for security patterns\n    rule_name, reminder = check_patterns(file_path, content)\n\n    if rule_name and reminder:\n        # Create unique warning key\n        warning_key = f\"{file_path}-{rule_name}\"\n\n        # Load existing warnings for this session\n        shown_warnings = load_state(session_id)\n\n        # Check if we've already shown this warning in this session\n        if warning_key not in shown_warnings:\n            # Add to shown warnings and save\n            shown_warnings.add(warning_key)\n            save_state(session_id, shown_warnings)\n\n            # Output the warning to stderr and block execution\n            print(reminder, file=sys.stderr)\n            sys.exit(2)  # Block tool execution (exit code 2 for PreToolUse hooks)\n\n    # Allow tool to proceed\n    sys.exit(0)\n\n\nif __name__ == \"__main__\":\n    main()\n"
      },
      "plugins": [
        {
          "name": "agent-sdk-dev",
          "description": "Development kit for working with the Claude Agent SDK",
          "source": "./plugins/agent-sdk-dev",
          "category": "development",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install agent-sdk-dev@claude-code-plugins"
          ]
        },
        {
          "name": "claude-opus-4-5-migration",
          "description": "Migrate your code and prompts from Sonnet 4.x and Opus 4.1 to Opus 4.5.",
          "version": "1.0.0",
          "author": {
            "name": "William Hu",
            "email": "whu@anthropic.com"
          },
          "source": "./plugins/claude-opus-4-5-migration",
          "category": "development",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install claude-opus-4-5-migration@claude-code-plugins"
          ]
        },
        {
          "name": "code-review",
          "description": "Automated code review for pull requests using multiple specialized agents with confidence-based scoring to filter false positives",
          "version": "1.0.0",
          "author": {
            "name": "Boris Cherny",
            "email": "boris@anthropic.com"
          },
          "source": "./plugins/code-review",
          "category": "productivity",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install code-review@claude-code-plugins"
          ]
        },
        {
          "name": "commit-commands",
          "description": "Commands for git commit workflows including commit, push, and PR creation",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/commit-commands",
          "category": "productivity",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install commit-commands@claude-code-plugins"
          ]
        },
        {
          "name": "explanatory-output-style",
          "description": "Adds educational insights about implementation choices and codebase patterns (mimics the deprecated Explanatory output style)",
          "version": "1.0.0",
          "author": {
            "name": "Dickson Tsai",
            "email": "dickson@anthropic.com"
          },
          "source": "./plugins/explanatory-output-style",
          "category": "learning",
          "categories": [
            "learning"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install explanatory-output-style@claude-code-plugins"
          ]
        },
        {
          "name": "feature-dev",
          "description": "Comprehensive feature development workflow with specialized agents for codebase exploration, architecture design, and quality review",
          "version": "1.0.0",
          "author": {
            "name": "Siddharth Bidasaria",
            "email": "sbidasaria@anthropic.com"
          },
          "source": "./plugins/feature-dev",
          "category": "development",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install feature-dev@claude-code-plugins"
          ]
        },
        {
          "name": "frontend-design",
          "description": "Create distinctive, production-grade frontend interfaces with high design quality. Generates creative, polished code that avoids generic AI aesthetics.",
          "version": "1.0.0",
          "author": {
            "name": "Prithvi Rajasekaran & Alexander Bricken",
            "email": "prithvi@anthropic.com"
          },
          "source": "./plugins/frontend-design",
          "category": "development",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install frontend-design@claude-code-plugins"
          ]
        },
        {
          "name": "hookify",
          "description": "Easily create custom hooks to prevent unwanted behaviors by analyzing conversation patterns or from explicit instructions. Define rules via simple markdown files.",
          "version": "0.1.0",
          "author": {
            "name": "Daisy Hollman",
            "email": "daisy@anthropic.com"
          },
          "source": "./plugins/hookify",
          "category": "productivity",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install hookify@claude-code-plugins"
          ]
        },
        {
          "name": "learning-output-style",
          "description": "Interactive learning mode that requests meaningful code contributions at decision points (mimics the unshipped Learning output style)",
          "version": "1.0.0",
          "author": {
            "name": "Boris Cherny",
            "email": "boris@anthropic.com"
          },
          "source": "./plugins/learning-output-style",
          "category": "learning",
          "categories": [
            "learning"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install learning-output-style@claude-code-plugins"
          ]
        },
        {
          "name": "plugin-dev",
          "description": "Comprehensive toolkit for developing Claude Code plugins. Includes 7 expert skills covering hooks, MCP integration, commands, agents, and best practices. AI-assisted plugin creation and validation.",
          "version": "0.1.0",
          "author": {
            "name": "Daisy Hollman",
            "email": "daisy@anthropic.com"
          },
          "source": "./plugins/plugin-dev",
          "category": "development",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install plugin-dev@claude-code-plugins"
          ]
        },
        {
          "name": "pr-review-toolkit",
          "description": "Comprehensive PR review agents specializing in comments, tests, error handling, type design, code quality, and code simplification",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/pr-review-toolkit",
          "category": "productivity",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install pr-review-toolkit@claude-code-plugins"
          ]
        },
        {
          "name": "ralph-wiggum",
          "description": "Interactive self-referential AI loops for iterative development. Claude works on the same task repeatedly, seeing its previous work, until completion.",
          "version": "1.0.0",
          "author": {
            "name": "Daisy Hollman",
            "email": "daisy@anthropic.com"
          },
          "source": "./plugins/ralph-wiggum",
          "category": "development",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install ralph-wiggum@claude-code-plugins"
          ]
        },
        {
          "name": "security-guidance",
          "description": "Security reminder hook that warns about potential security issues when editing files, including command injection, XSS, and unsafe code patterns",
          "version": "1.0.0",
          "author": {
            "name": "David Dworken",
            "email": "dworken@anthropic.com"
          },
          "source": "./plugins/security-guidance",
          "category": "security",
          "categories": [
            "security"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-code",
            "/plugin install security-guidance@claude-code-plugins"
          ]
        }
      ]
    },
    {
      "name": "anthropic-agent-skills",
      "version": null,
      "description": "Anthropic example skills",
      "owner_info": {
        "name": "Keith Lazuka",
        "email": "klazuka@anthropic.com"
      },
      "keywords": [],
      "repo_full_name": "anthropics/skills",
      "repo_url": "https://github.com/anthropics/skills",
      "repo_description": "Public repository for Agent Skills",
      "homepage": "",
      "signals": {
        "stars": 58026,
        "forks": 5679,
        "pushed_at": "2025-12-20T18:09:45Z",
        "created_at": "2025-09-22T15:53:31Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 1358
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 5460
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/algorithmic-art",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/algorithmic-art/SKILL.md",
          "type": "blob",
          "size": 19769
        },
        {
          "path": "skills/brand-guidelines",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/brand-guidelines/SKILL.md",
          "type": "blob",
          "size": 2235
        },
        {
          "path": "skills/canvas-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/canvas-design/SKILL.md",
          "type": "blob",
          "size": 11939
        },
        {
          "path": "skills/doc-coauthoring",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/doc-coauthoring/SKILL.md",
          "type": "blob",
          "size": 15815
        },
        {
          "path": "skills/docx",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/docx/SKILL.md",
          "type": "blob",
          "size": 10150
        },
        {
          "path": "skills/docx/docx-js.md",
          "type": "blob",
          "size": 16509
        },
        {
          "path": "skills/docx/ooxml.md",
          "type": "blob",
          "size": 23572
        },
        {
          "path": "skills/frontend-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/frontend-design/SKILL.md",
          "type": "blob",
          "size": 4440
        },
        {
          "path": "skills/internal-comms",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/internal-comms/SKILL.md",
          "type": "blob",
          "size": 1511
        },
        {
          "path": "skills/internal-comms/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/internal-comms/examples/3p-updates.md",
          "type": "blob",
          "size": 3274
        },
        {
          "path": "skills/internal-comms/examples/company-newsletter.md",
          "type": "blob",
          "size": 3295
        },
        {
          "path": "skills/internal-comms/examples/faq-answers.md",
          "type": "blob",
          "size": 2366
        },
        {
          "path": "skills/internal-comms/examples/general-comms.md",
          "type": "blob",
          "size": 602
        },
        {
          "path": "skills/mcp-builder",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/mcp-builder/SKILL.md",
          "type": "blob",
          "size": 9092
        },
        {
          "path": "skills/mcp-builder/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/mcp-builder/reference/evaluation.md",
          "type": "blob",
          "size": 21663
        },
        {
          "path": "skills/mcp-builder/reference/mcp_best_practices.md",
          "type": "blob",
          "size": 7330
        },
        {
          "path": "skills/mcp-builder/reference/node_mcp_server.md",
          "type": "blob",
          "size": 28550
        },
        {
          "path": "skills/mcp-builder/reference/python_mcp_server.md",
          "type": "blob",
          "size": 25099
        },
        {
          "path": "skills/pdf",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/pdf/SKILL.md",
          "type": "blob",
          "size": 7068
        },
        {
          "path": "skills/pdf/forms.md",
          "type": "blob",
          "size": 9438
        },
        {
          "path": "skills/pdf/reference.md",
          "type": "blob",
          "size": 16692
        },
        {
          "path": "skills/pptx",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/pptx/SKILL.md",
          "type": "blob",
          "size": 25551
        },
        {
          "path": "skills/pptx/html2pptx.md",
          "type": "blob",
          "size": 19859
        },
        {
          "path": "skills/pptx/ooxml.md",
          "type": "blob",
          "size": 10388
        },
        {
          "path": "skills/skill-creator",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-creator/SKILL.md",
          "type": "blob",
          "size": 17837
        },
        {
          "path": "skills/skill-creator/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-creator/references/output-patterns.md",
          "type": "blob",
          "size": 1813
        },
        {
          "path": "skills/skill-creator/references/workflows.md",
          "type": "blob",
          "size": 818
        },
        {
          "path": "skills/slack-gif-creator",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/slack-gif-creator/SKILL.md",
          "type": "blob",
          "size": 7841
        },
        {
          "path": "skills/theme-factory",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/theme-factory/SKILL.md",
          "type": "blob",
          "size": 3124
        },
        {
          "path": "skills/theme-factory/themes",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/theme-factory/themes/arctic-frost.md",
          "type": "blob",
          "size": 544
        },
        {
          "path": "skills/theme-factory/themes/botanical-garden.md",
          "type": "blob",
          "size": 519
        },
        {
          "path": "skills/theme-factory/themes/desert-rose.md",
          "type": "blob",
          "size": 496
        },
        {
          "path": "skills/theme-factory/themes/forest-canopy.md",
          "type": "blob",
          "size": 506
        },
        {
          "path": "skills/theme-factory/themes/golden-hour.md",
          "type": "blob",
          "size": 528
        },
        {
          "path": "skills/theme-factory/themes/midnight-galaxy.md",
          "type": "blob",
          "size": 513
        },
        {
          "path": "skills/theme-factory/themes/modern-minimalist.md",
          "type": "blob",
          "size": 549
        },
        {
          "path": "skills/theme-factory/themes/ocean-depths.md",
          "type": "blob",
          "size": 555
        },
        {
          "path": "skills/theme-factory/themes/sunset-boulevard.md",
          "type": "blob",
          "size": 558
        },
        {
          "path": "skills/theme-factory/themes/tech-innovation.md",
          "type": "blob",
          "size": 547
        },
        {
          "path": "skills/web-artifacts-builder",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/web-artifacts-builder/SKILL.md",
          "type": "blob",
          "size": 3087
        },
        {
          "path": "skills/webapp-testing",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/webapp-testing/SKILL.md",
          "type": "blob",
          "size": 3913
        },
        {
          "path": "skills/xlsx",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/xlsx/SKILL.md",
          "type": "blob",
          "size": 10632
        },
        {
          "path": "template",
          "type": "tree",
          "size": null
        },
        {
          "path": "template/SKILL.md",
          "type": "blob",
          "size": 140
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"anthropic-agent-skills\",\n  \"owner\": {\n    \"name\": \"Keith Lazuka\",\n    \"email\": \"klazuka@anthropic.com\"\n  },\n  \"metadata\": {\n    \"description\": \"Anthropic example skills\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"document-skills\",\n      \"description\": \"Collection of document processing suite including Excel, Word, PowerPoint, and PDF capabilities\",\n      \"source\": \"./\",\n      \"strict\": false,\n      \"skills\": [\n        \"./skills/xlsx\",\n        \"./skills/docx\",\n        \"./skills/pptx\",\n        \"./skills/pdf\"\n      ]\n    },\n    {\n      \"name\": \"example-skills\",\n      \"description\": \"Collection of example skills demonstrating various capabilities including skill creation, MCP building, visual design, algorithmic art, internal communications, web testing, artifact building, Slack GIFs, and theme styling\",\n      \"source\": \"./\",\n      \"strict\": false,\n      \"skills\": [\n        \"./skills/algorithmic-art\",\n        \"./skills/brand-guidelines\",\n        \"./skills/canvas-design\",\n        \"./skills/doc-coauthoring\",\n        \"./skills/frontend-design\",\n        \"./skills/internal-comms\",\n        \"./skills/mcp-builder\",\n        \"./skills/skill-creator\",\n        \"./skills/slack-gif-creator\",\n        \"./skills/theme-factory\",\n        \"./skills/web-artifacts-builder\",\n        \"./skills/webapp-testing\"\n      ]\n    }\n  ]\n}\n",
        "README.md": "> **Note:** This repository contains Anthropic's implementation of skills for Claude. For information about the Agent Skills standard, see [agentskills.io](http://agentskills.io).\n\n# Skills\nSkills are folders of instructions, scripts, and resources that Claude loads dynamically to improve performance on specialized tasks. Skills teach Claude how to complete specific tasks in a repeatable way, whether that's creating documents with your company's brand guidelines, analyzing data using your organization's specific workflows, or automating personal tasks.\n\nFor more information, check out:\n- [What are skills?](https://support.claude.com/en/articles/12512176-what-are-skills)\n- [Using skills in Claude](https://support.claude.com/en/articles/12512180-using-skills-in-claude)\n- [How to create custom skills](https://support.claude.com/en/articles/12512198-creating-custom-skills)\n- [Equipping agents for the real world with Agent Skills](https://anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills)\n\n# About This Repository\n\nThis repository contains skills that demonstrate what's possible with Claude's skills system. These skills range from creative applications (art, music, design) to technical tasks (testing web apps, MCP server generation) to enterprise workflows (communications, branding, etc.).\n\nEach skill is self-contained in its own folder with a `SKILL.md` file containing the instructions and metadata that Claude uses. Browse through these skills to get inspiration for your own skills or to understand different patterns and approaches.\n\nMany skills in this repo are open source (Apache 2.0). We've also included the document creation & editing skills that power [Claude's document capabilities](https://www.anthropic.com/news/create-files) under the hood in the [`skills/docx`](./skills/docx), [`skills/pdf`](./skills/pdf), [`skills/pptx`](./skills/pptx), and [`skills/xlsx`](./skills/xlsx) subfolders. These are source-available, not open source, but we wanted to share these with developers as a reference for more complex skills that are actively used in a production AI application.\n\n## Disclaimer\n\n**These skills are provided for demonstration and educational purposes only.** While some of these capabilities may be available in Claude, the implementations and behaviors you receive from Claude may differ from what is shown in these skills. These skills are meant to illustrate patterns and possibilities. Always test skills thoroughly in your own environment before relying on them for critical tasks.\n\n# Skill Sets\n- [./skills](./skills): Skill examples for Creative & Design, Development & Technical, Enterprise & Communication, and Document Skills\n- [./spec](./spec): The Agent Skills specification\n- [./template](./template): Skill template\n\n# Try in Claude Code, Claude.ai, and the API\n\n## Claude Code\nYou can register this repository as a Claude Code Plugin marketplace by running the following command in Claude Code:\n```\n/plugin marketplace add anthropics/skills\n```\n\nThen, to install a specific set of skills:\n1. Select `Browse and install plugins`\n2. Select `anthropic-agent-skills`\n3. Select `document-skills` or `example-skills`\n4. Select `Install now`\n\nAlternatively, directly install either Plugin via:\n```\n/plugin install document-skills@anthropic-agent-skills\n/plugin install example-skills@anthropic-agent-skills\n```\n\nAfter installing the plugin, you can use the skill by just mentioning it. For instance, if you install the `document-skills` plugin from the marketplace, you can ask Claude Code to do something like: \"Use the PDF skill to extract the form fields from `path/to/some-file.pdf`\"\n\n## Claude.ai\n\nThese example skills are all already available to paid plans in Claude.ai. \n\nTo use any skill from this repository or upload custom skills, follow the instructions in [Using skills in Claude](https://support.claude.com/en/articles/12512180-using-skills-in-claude#h_a4222fa77b).\n\n## Claude API\n\nYou can use Anthropic's pre-built skills, and upload custom skills, via the Claude API. See the [Skills API Quickstart](https://docs.claude.com/en/api/skills-guide#creating-a-skill) for more.\n\n# Creating a Basic Skill\n\nSkills are simple to create - just a folder with a `SKILL.md` file containing YAML frontmatter and instructions. You can use the **template-skill** in this repository as a starting point:\n\n```markdown\n---\nname: my-skill-name\ndescription: A clear description of what this skill does and when to use it\n---\n\n# My Skill Name\n\n[Add your instructions here that Claude will follow when this skill is active]\n\n## Examples\n- Example usage 1\n- Example usage 2\n\n## Guidelines\n- Guideline 1\n- Guideline 2\n```\n\nThe frontmatter requires only two fields:\n- `name` - A unique identifier for your skill (lowercase, hyphens for spaces)\n- `description` - A complete description of what the skill does and when to use it\n\nThe markdown content below contains the instructions, examples, and guidelines that Claude will follow. For more details, see [How to create custom skills](https://support.claude.com/en/articles/12512198-creating-custom-skills).\n\n# Partner Skills\n\nSkills are a great way to teach Claude how to get better at using specific pieces of software. As we see awesome example skills from partners, we may highlight some of them here:\n\n- **Notion** - [Notion Skills for Claude](https://www.notion.so/notiondevs/Notion-Skills-for-Claude-28da4445d27180c7af1df7d8615723d0)\n",
        "skills/algorithmic-art/SKILL.md": "---\nname: algorithmic-art\ndescription: Creating algorithmic art using p5.js with seeded randomness and interactive parameter exploration. Use this when users request creating art using code, generative art, algorithmic art, flow fields, or particle systems. Create original algorithmic art rather than copying existing artists' work to avoid copyright violations.\nlicense: Complete terms in LICENSE.txt\n---\n\nAlgorithmic philosophies are computational aesthetic movements that are then expressed through code. Output .md files (philosophy), .html files (interactive viewer), and .js files (generative algorithms).\n\nThis happens in two steps:\n1. Algorithmic Philosophy Creation (.md file)\n2. Express by creating p5.js generative art (.html + .js files)\n\nFirst, undertake this task:\n\n## ALGORITHMIC PHILOSOPHY CREATION\n\nTo begin, create an ALGORITHMIC PHILOSOPHY (not static images or templates) that will be interpreted through:\n- Computational processes, emergent behavior, mathematical beauty\n- Seeded randomness, noise fields, organic systems\n- Particles, flows, fields, forces\n- Parametric variation and controlled chaos\n\n### THE CRITICAL UNDERSTANDING\n- What is received: Some subtle input or instructions by the user to take into account, but use as a foundation; it should not constrain creative freedom.\n- What is created: An algorithmic philosophy/generative aesthetic movement.\n- What happens next: The same version receives the philosophy and EXPRESSES IT IN CODE - creating p5.js sketches that are 90% algorithmic generation, 10% essential parameters.\n\nConsider this approach:\n- Write a manifesto for a generative art movement\n- The next phase involves writing the algorithm that brings it to life\n\nThe philosophy must emphasize: Algorithmic expression. Emergent behavior. Computational beauty. Seeded variation.\n\n### HOW TO GENERATE AN ALGORITHMIC PHILOSOPHY\n\n**Name the movement** (1-2 words): \"Organic Turbulence\" / \"Quantum Harmonics\" / \"Emergent Stillness\"\n\n**Articulate the philosophy** (4-6 paragraphs - concise but complete):\n\nTo capture the ALGORITHMIC essence, express how this philosophy manifests through:\n- Computational processes and mathematical relationships?\n- Noise functions and randomness patterns?\n- Particle behaviors and field dynamics?\n- Temporal evolution and system states?\n- Parametric variation and emergent complexity?\n\n**CRITICAL GUIDELINES:**\n- **Avoid redundancy**: Each algorithmic aspect should be mentioned once. Avoid repeating concepts about noise theory, particle dynamics, or mathematical principles unless adding new depth.\n- **Emphasize craftsmanship REPEATEDLY**: The philosophy MUST stress multiple times that the final algorithm should appear as though it took countless hours to develop, was refined with care, and comes from someone at the absolute top of their field. This framing is essential - repeat phrases like \"meticulously crafted algorithm,\" \"the product of deep computational expertise,\" \"painstaking optimization,\" \"master-level implementation.\"\n- **Leave creative space**: Be specific about the algorithmic direction, but concise enough that the next Claude has room to make interpretive implementation choices at an extremely high level of craftsmanship.\n\nThe philosophy must guide the next version to express ideas ALGORITHMICALLY, not through static images. Beauty lives in the process, not the final frame.\n\n### PHILOSOPHY EXAMPLES\n\n**\"Organic Turbulence\"**\nPhilosophy: Chaos constrained by natural law, order emerging from disorder.\nAlgorithmic expression: Flow fields driven by layered Perlin noise. Thousands of particles following vector forces, their trails accumulating into organic density maps. Multiple noise octaves create turbulent regions and calm zones. Color emerges from velocity and density - fast particles burn bright, slow ones fade to shadow. The algorithm runs until equilibrium - a meticulously tuned balance where every parameter was refined through countless iterations by a master of computational aesthetics.\n\n**\"Quantum Harmonics\"**\nPhilosophy: Discrete entities exhibiting wave-like interference patterns.\nAlgorithmic expression: Particles initialized on a grid, each carrying a phase value that evolves through sine waves. When particles are near, their phases interfere - constructive interference creates bright nodes, destructive creates voids. Simple harmonic motion generates complex emergent mandalas. The result of painstaking frequency calibration where every ratio was carefully chosen to produce resonant beauty.\n\n**\"Recursive Whispers\"**\nPhilosophy: Self-similarity across scales, infinite depth in finite space.\nAlgorithmic expression: Branching structures that subdivide recursively. Each branch slightly randomized but constrained by golden ratios. L-systems or recursive subdivision generate tree-like forms that feel both mathematical and organic. Subtle noise perturbations break perfect symmetry. Line weights diminish with each recursion level. Every branching angle the product of deep mathematical exploration.\n\n**\"Field Dynamics\"**\nPhilosophy: Invisible forces made visible through their effects on matter.\nAlgorithmic expression: Vector fields constructed from mathematical functions or noise. Particles born at edges, flowing along field lines, dying when they reach equilibrium or boundaries. Multiple fields can attract, repel, or rotate particles. The visualization shows only the traces - ghost-like evidence of invisible forces. A computational dance meticulously choreographed through force balance.\n\n**\"Stochastic Crystallization\"**\nPhilosophy: Random processes crystallizing into ordered structures.\nAlgorithmic expression: Randomized circle packing or Voronoi tessellation. Start with random points, let them evolve through relaxation algorithms. Cells push apart until equilibrium. Color based on cell size, neighbor count, or distance from center. The organic tiling that emerges feels both random and inevitable. Every seed produces unique crystalline beauty - the mark of a master-level generative algorithm.\n\n*These are condensed examples. The actual algorithmic philosophy should be 4-6 substantial paragraphs.*\n\n### ESSENTIAL PRINCIPLES\n- **ALGORITHMIC PHILOSOPHY**: Creating a computational worldview to be expressed through code\n- **PROCESS OVER PRODUCT**: Always emphasize that beauty emerges from the algorithm's execution - each run is unique\n- **PARAMETRIC EXPRESSION**: Ideas communicate through mathematical relationships, forces, behaviors - not static composition\n- **ARTISTIC FREEDOM**: The next Claude interprets the philosophy algorithmically - provide creative implementation room\n- **PURE GENERATIVE ART**: This is about making LIVING ALGORITHMS, not static images with randomness\n- **EXPERT CRAFTSMANSHIP**: Repeatedly emphasize the final algorithm must feel meticulously crafted, refined through countless iterations, the product of deep expertise by someone at the absolute top of their field in computational aesthetics\n\n**The algorithmic philosophy should be 4-6 paragraphs long.** Fill it with poetic computational philosophy that brings together the intended vision. Avoid repeating the same points. Output this algorithmic philosophy as a .md file.\n\n---\n\n## DEDUCING THE CONCEPTUAL SEED\n\n**CRITICAL STEP**: Before implementing the algorithm, identify the subtle conceptual thread from the original request.\n\n**THE ESSENTIAL PRINCIPLE**:\nThe concept is a **subtle, niche reference embedded within the algorithm itself** - not always literal, always sophisticated. Someone familiar with the subject should feel it intuitively, while others simply experience a masterful generative composition. The algorithmic philosophy provides the computational language. The deduced concept provides the soul - the quiet conceptual DNA woven invisibly into parameters, behaviors, and emergence patterns.\n\nThis is **VERY IMPORTANT**: The reference must be so refined that it enhances the work's depth without announcing itself. Think like a jazz musician quoting another song through algorithmic harmony - only those who know will catch it, but everyone appreciates the generative beauty.\n\n---\n\n## P5.JS IMPLEMENTATION\n\nWith the philosophy AND conceptual framework established, express it through code. Pause to gather thoughts before proceeding. Use only the algorithmic philosophy created and the instructions below.\n\n### ⚠️ STEP 0: READ THE TEMPLATE FIRST ⚠️\n\n**CRITICAL: BEFORE writing any HTML:**\n\n1. **Read** `templates/viewer.html` using the Read tool\n2. **Study** the exact structure, styling, and Anthropic branding\n3. **Use that file as the LITERAL STARTING POINT** - not just inspiration\n4. **Keep all FIXED sections exactly as shown** (header, sidebar structure, Anthropic colors/fonts, seed controls, action buttons)\n5. **Replace only the VARIABLE sections** marked in the file's comments (algorithm, parameters, UI controls for parameters)\n\n**Avoid:**\n- ❌ Creating HTML from scratch\n- ❌ Inventing custom styling or color schemes\n- ❌ Using system fonts or dark themes\n- ❌ Changing the sidebar structure\n\n**Follow these practices:**\n- ✅ Copy the template's exact HTML structure\n- ✅ Keep Anthropic branding (Poppins/Lora fonts, light colors, gradient backdrop)\n- ✅ Maintain the sidebar layout (Seed → Parameters → Colors? → Actions)\n- ✅ Replace only the p5.js algorithm and parameter controls\n\nThe template is the foundation. Build on it, don't rebuild it.\n\n---\n\nTo create gallery-quality computational art that lives and breathes, use the algorithmic philosophy as the foundation.\n\n### TECHNICAL REQUIREMENTS\n\n**Seeded Randomness (Art Blocks Pattern)**:\n```javascript\n// ALWAYS use a seed for reproducibility\nlet seed = 12345; // or hash from user input\nrandomSeed(seed);\nnoiseSeed(seed);\n```\n\n**Parameter Structure - FOLLOW THE PHILOSOPHY**:\n\nTo establish parameters that emerge naturally from the algorithmic philosophy, consider: \"What qualities of this system can be adjusted?\"\n\n```javascript\nlet params = {\n  seed: 12345,  // Always include seed for reproducibility\n  // colors\n  // Add parameters that control YOUR algorithm:\n  // - Quantities (how many?)\n  // - Scales (how big? how fast?)\n  // - Probabilities (how likely?)\n  // - Ratios (what proportions?)\n  // - Angles (what direction?)\n  // - Thresholds (when does behavior change?)\n};\n```\n\n**To design effective parameters, focus on the properties the system needs to be tunable rather than thinking in terms of \"pattern types\".**\n\n**Core Algorithm - EXPRESS THE PHILOSOPHY**:\n\n**CRITICAL**: The algorithmic philosophy should dictate what to build.\n\nTo express the philosophy through code, avoid thinking \"which pattern should I use?\" and instead think \"how to express this philosophy through code?\"\n\nIf the philosophy is about **organic emergence**, consider using:\n- Elements that accumulate or grow over time\n- Random processes constrained by natural rules\n- Feedback loops and interactions\n\nIf the philosophy is about **mathematical beauty**, consider using:\n- Geometric relationships and ratios\n- Trigonometric functions and harmonics\n- Precise calculations creating unexpected patterns\n\nIf the philosophy is about **controlled chaos**, consider using:\n- Random variation within strict boundaries\n- Bifurcation and phase transitions\n- Order emerging from disorder\n\n**The algorithm flows from the philosophy, not from a menu of options.**\n\nTo guide the implementation, let the conceptual essence inform creative and original choices. Build something that expresses the vision for this particular request.\n\n**Canvas Setup**: Standard p5.js structure:\n```javascript\nfunction setup() {\n  createCanvas(1200, 1200);\n  // Initialize your system\n}\n\nfunction draw() {\n  // Your generative algorithm\n  // Can be static (noLoop) or animated\n}\n```\n\n### CRAFTSMANSHIP REQUIREMENTS\n\n**CRITICAL**: To achieve mastery, create algorithms that feel like they emerged through countless iterations by a master generative artist. Tune every parameter carefully. Ensure every pattern emerges with purpose. This is NOT random noise - this is CONTROLLED CHAOS refined through deep expertise.\n\n- **Balance**: Complexity without visual noise, order without rigidity\n- **Color Harmony**: Thoughtful palettes, not random RGB values\n- **Composition**: Even in randomness, maintain visual hierarchy and flow\n- **Performance**: Smooth execution, optimized for real-time if animated\n- **Reproducibility**: Same seed ALWAYS produces identical output\n\n### OUTPUT FORMAT\n\nOutput:\n1. **Algorithmic Philosophy** - As markdown or text explaining the generative aesthetic\n2. **Single HTML Artifact** - Self-contained interactive generative art built from `templates/viewer.html` (see STEP 0 and next section)\n\nThe HTML artifact contains everything: p5.js (from CDN), the algorithm, parameter controls, and UI - all in one file that works immediately in claude.ai artifacts or any browser. Start from the template file, not from scratch.\n\n---\n\n## INTERACTIVE ARTIFACT CREATION\n\n**REMINDER: `templates/viewer.html` should have already been read (see STEP 0). Use that file as the starting point.**\n\nTo allow exploration of the generative art, create a single, self-contained HTML artifact. Ensure this artifact works immediately in claude.ai or any browser - no setup required. Embed everything inline.\n\n### CRITICAL: WHAT'S FIXED VS VARIABLE\n\nThe `templates/viewer.html` file is the foundation. It contains the exact structure and styling needed.\n\n**FIXED (always include exactly as shown):**\n- Layout structure (header, sidebar, main canvas area)\n- Anthropic branding (UI colors, fonts, gradients)\n- Seed section in sidebar:\n  - Seed display\n  - Previous/Next buttons\n  - Random button\n  - Jump to seed input + Go button\n- Actions section in sidebar:\n  - Regenerate button\n  - Reset button\n\n**VARIABLE (customize for each artwork):**\n- The entire p5.js algorithm (setup/draw/classes)\n- The parameters object (define what the art needs)\n- The Parameters section in sidebar:\n  - Number of parameter controls\n  - Parameter names\n  - Min/max/step values for sliders\n  - Control types (sliders, inputs, etc.)\n- Colors section (optional):\n  - Some art needs color pickers\n  - Some art might use fixed colors\n  - Some art might be monochrome (no color controls needed)\n  - Decide based on the art's needs\n\n**Every artwork should have unique parameters and algorithm!** The fixed parts provide consistent UX - everything else expresses the unique vision.\n\n### REQUIRED FEATURES\n\n**1. Parameter Controls**\n- Sliders for numeric parameters (particle count, noise scale, speed, etc.)\n- Color pickers for palette colors\n- Real-time updates when parameters change\n- Reset button to restore defaults\n\n**2. Seed Navigation**\n- Display current seed number\n- \"Previous\" and \"Next\" buttons to cycle through seeds\n- \"Random\" button for random seed\n- Input field to jump to specific seed\n- Generate 100 variations when requested (seeds 1-100)\n\n**3. Single Artifact Structure**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n  <!-- p5.js from CDN - always available -->\n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js\"></script>\n  <style>\n    /* All styling inline - clean, minimal */\n    /* Canvas on top, controls below */\n  </style>\n</head>\n<body>\n  <div id=\"canvas-container\"></div>\n  <div id=\"controls\">\n    <!-- All parameter controls -->\n  </div>\n  <script>\n    // ALL p5.js code inline here\n    // Parameter objects, classes, functions\n    // setup() and draw()\n    // UI handlers\n    // Everything self-contained\n  </script>\n</body>\n</html>\n```\n\n**CRITICAL**: This is a single artifact. No external files, no imports (except p5.js CDN). Everything inline.\n\n**4. Implementation Details - BUILD THE SIDEBAR**\n\nThe sidebar structure:\n\n**1. Seed (FIXED)** - Always include exactly as shown:\n- Seed display\n- Prev/Next/Random/Jump buttons\n\n**2. Parameters (VARIABLE)** - Create controls for the art:\n```html\n<div class=\"control-group\">\n    <label>Parameter Name</label>\n    <input type=\"range\" id=\"param\" min=\"...\" max=\"...\" step=\"...\" value=\"...\" oninput=\"updateParam('param', this.value)\">\n    <span class=\"value-display\" id=\"param-value\">...</span>\n</div>\n```\nAdd as many control-group divs as there are parameters.\n\n**3. Colors (OPTIONAL/VARIABLE)** - Include if the art needs adjustable colors:\n- Add color pickers if users should control palette\n- Skip this section if the art uses fixed colors\n- Skip if the art is monochrome\n\n**4. Actions (FIXED)** - Always include exactly as shown:\n- Regenerate button\n- Reset button\n- Download PNG button\n\n**Requirements**:\n- Seed controls must work (prev/next/random/jump/display)\n- All parameters must have UI controls\n- Regenerate, Reset, Download buttons must work\n- Keep Anthropic branding (UI styling, not art colors)\n\n### USING THE ARTIFACT\n\nThe HTML artifact works immediately:\n1. **In claude.ai**: Displayed as an interactive artifact - runs instantly\n2. **As a file**: Save and open in any browser - no server needed\n3. **Sharing**: Send the HTML file - it's completely self-contained\n\n---\n\n## VARIATIONS & EXPLORATION\n\nThe artifact includes seed navigation by default (prev/next/random buttons), allowing users to explore variations without creating multiple files. If the user wants specific variations highlighted:\n\n- Include seed presets (buttons for \"Variation 1: Seed 42\", \"Variation 2: Seed 127\", etc.)\n- Add a \"Gallery Mode\" that shows thumbnails of multiple seeds side-by-side\n- All within the same single artifact\n\nThis is like creating a series of prints from the same plate - the algorithm is consistent, but each seed reveals different facets of its potential. The interactive nature means users discover their own favorites by exploring the seed space.\n\n---\n\n## THE CREATIVE PROCESS\n\n**User request** → **Algorithmic philosophy** → **Implementation**\n\nEach request is unique. The process involves:\n\n1. **Interpret the user's intent** - What aesthetic is being sought?\n2. **Create an algorithmic philosophy** (4-6 paragraphs) describing the computational approach\n3. **Implement it in code** - Build the algorithm that expresses this philosophy\n4. **Design appropriate parameters** - What should be tunable?\n5. **Build matching UI controls** - Sliders/inputs for those parameters\n\n**The constants**:\n- Anthropic branding (colors, fonts, layout)\n- Seed navigation (always present)\n- Self-contained HTML artifact\n\n**Everything else is variable**:\n- The algorithm itself\n- The parameters\n- The UI controls\n- The visual outcome\n\nTo achieve the best results, trust creativity and let the philosophy guide the implementation.\n\n---\n\n## RESOURCES\n\nThis skill includes helpful templates and documentation:\n\n- **templates/viewer.html**: REQUIRED STARTING POINT for all HTML artifacts.\n  - This is the foundation - contains the exact structure and Anthropic branding\n  - **Keep unchanged**: Layout structure, sidebar organization, Anthropic colors/fonts, seed controls, action buttons\n  - **Replace**: The p5.js algorithm, parameter definitions, and UI controls in Parameters section\n  - The extensive comments in the file mark exactly what to keep vs replace\n\n- **templates/generator_template.js**: Reference for p5.js best practices and code structure principles.\n  - Shows how to organize parameters, use seeded randomness, structure classes\n  - NOT a pattern menu - use these principles to build unique algorithms\n  - Embed algorithms inline in the HTML artifact (don't create separate .js files)\n\n**Critical reminder**:\n- The **template is the STARTING POINT**, not inspiration\n- The **algorithm is where to create** something unique\n- Don't copy the flow field example - build what the philosophy demands\n- But DO keep the exact UI structure and Anthropic branding from the template",
        "skills/brand-guidelines/SKILL.md": "---\nname: brand-guidelines\ndescription: Applies Anthropic's official brand colors and typography to any sort of artifact that may benefit from having Anthropic's look-and-feel. Use it when brand colors or style guidelines, visual formatting, or company design standards apply.\nlicense: Complete terms in LICENSE.txt\n---\n\n# Anthropic Brand Styling\n\n## Overview\n\nTo access Anthropic's official brand identity and style resources, use this skill.\n\n**Keywords**: branding, corporate identity, visual identity, post-processing, styling, brand colors, typography, Anthropic brand, visual formatting, visual design\n\n## Brand Guidelines\n\n### Colors\n\n**Main Colors:**\n\n- Dark: `#141413` - Primary text and dark backgrounds\n- Light: `#faf9f5` - Light backgrounds and text on dark\n- Mid Gray: `#b0aea5` - Secondary elements\n- Light Gray: `#e8e6dc` - Subtle backgrounds\n\n**Accent Colors:**\n\n- Orange: `#d97757` - Primary accent\n- Blue: `#6a9bcc` - Secondary accent\n- Green: `#788c5d` - Tertiary accent\n\n### Typography\n\n- **Headings**: Poppins (with Arial fallback)\n- **Body Text**: Lora (with Georgia fallback)\n- **Note**: Fonts should be pre-installed in your environment for best results\n\n## Features\n\n### Smart Font Application\n\n- Applies Poppins font to headings (24pt and larger)\n- Applies Lora font to body text\n- Automatically falls back to Arial/Georgia if custom fonts unavailable\n- Preserves readability across all systems\n\n### Text Styling\n\n- Headings (24pt+): Poppins font\n- Body text: Lora font\n- Smart color selection based on background\n- Preserves text hierarchy and formatting\n\n### Shape and Accent Colors\n\n- Non-text shapes use accent colors\n- Cycles through orange, blue, and green accents\n- Maintains visual interest while staying on-brand\n\n## Technical Details\n\n### Font Management\n\n- Uses system-installed Poppins and Lora fonts when available\n- Provides automatic fallback to Arial (headings) and Georgia (body)\n- No font installation required - works with existing system fonts\n- For best results, pre-install Poppins and Lora fonts in your environment\n\n### Color Application\n\n- Uses RGB color values for precise brand matching\n- Applied via python-pptx's RGBColor class\n- Maintains color fidelity across different systems\n",
        "skills/canvas-design/SKILL.md": "---\nname: canvas-design\ndescription: Create beautiful visual art in .png and .pdf documents using design philosophy. You should use this skill when the user asks to create a poster, piece of art, design, or other static piece. Create original visual designs, never copying existing artists' work to avoid copyright violations.\nlicense: Complete terms in LICENSE.txt\n---\n\nThese are instructions for creating design philosophies - aesthetic movements that are then EXPRESSED VISUALLY. Output only .md files, .pdf files, and .png files.\n\nComplete this in two steps:\n1. Design Philosophy Creation (.md file)\n2. Express by creating it on a canvas (.pdf file or .png file)\n\nFirst, undertake this task:\n\n## DESIGN PHILOSOPHY CREATION\n\nTo begin, create a VISUAL PHILOSOPHY (not layouts or templates) that will be interpreted through:\n- Form, space, color, composition\n- Images, graphics, shapes, patterns\n- Minimal text as visual accent\n\n### THE CRITICAL UNDERSTANDING\n- What is received: Some subtle input or instructions by the user that should be taken into account, but used as a foundation; it should not constrain creative freedom.\n- What is created: A design philosophy/aesthetic movement.\n- What happens next: Then, the same version receives the philosophy and EXPRESSES IT VISUALLY - creating artifacts that are 90% visual design, 10% essential text.\n\nConsider this approach:\n- Write a manifesto for an art movement\n- The next phase involves making the artwork\n\nThe philosophy must emphasize: Visual expression. Spatial communication. Artistic interpretation. Minimal words.\n\n### HOW TO GENERATE A VISUAL PHILOSOPHY\n\n**Name the movement** (1-2 words): \"Brutalist Joy\" / \"Chromatic Silence\" / \"Metabolist Dreams\"\n\n**Articulate the philosophy** (4-6 paragraphs - concise but complete):\n\nTo capture the VISUAL essence, express how the philosophy manifests through:\n- Space and form\n- Color and material\n- Scale and rhythm\n- Composition and balance\n- Visual hierarchy\n\n**CRITICAL GUIDELINES:**\n- **Avoid redundancy**: Each design aspect should be mentioned once. Avoid repeating points about color theory, spatial relationships, or typographic principles unless adding new depth.\n- **Emphasize craftsmanship REPEATEDLY**: The philosophy MUST stress multiple times that the final work should appear as though it took countless hours to create, was labored over with care, and comes from someone at the absolute top of their field. This framing is essential - repeat phrases like \"meticulously crafted,\" \"the product of deep expertise,\" \"painstaking attention,\" \"master-level execution.\"\n- **Leave creative space**: Remain specific about the aesthetic direction, but concise enough that the next Claude has room to make interpretive choices also at a extremely high level of craftmanship.\n\nThe philosophy must guide the next version to express ideas VISUALLY, not through text. Information lives in design, not paragraphs.\n\n### PHILOSOPHY EXAMPLES\n\n**\"Concrete Poetry\"**\nPhilosophy: Communication through monumental form and bold geometry.\nVisual expression: Massive color blocks, sculptural typography (huge single words, tiny labels), Brutalist spatial divisions, Polish poster energy meets Le Corbusier. Ideas expressed through visual weight and spatial tension, not explanation. Text as rare, powerful gesture - never paragraphs, only essential words integrated into the visual architecture. Every element placed with the precision of a master craftsman.\n\n**\"Chromatic Language\"**\nPhilosophy: Color as the primary information system.\nVisual expression: Geometric precision where color zones create meaning. Typography minimal - small sans-serif labels letting chromatic fields communicate. Think Josef Albers' interaction meets data visualization. Information encoded spatially and chromatically. Words only to anchor what color already shows. The result of painstaking chromatic calibration.\n\n**\"Analog Meditation\"**\nPhilosophy: Quiet visual contemplation through texture and breathing room.\nVisual expression: Paper grain, ink bleeds, vast negative space. Photography and illustration dominate. Typography whispered (small, restrained, serving the visual). Japanese photobook aesthetic. Images breathe across pages. Text appears sparingly - short phrases, never explanatory blocks. Each composition balanced with the care of a meditation practice.\n\n**\"Organic Systems\"**\nPhilosophy: Natural clustering and modular growth patterns.\nVisual expression: Rounded forms, organic arrangements, color from nature through architecture. Information shown through visual diagrams, spatial relationships, iconography. Text only for key labels floating in space. The composition tells the story through expert spatial orchestration.\n\n**\"Geometric Silence\"**\nPhilosophy: Pure order and restraint.\nVisual expression: Grid-based precision, bold photography or stark graphics, dramatic negative space. Typography precise but minimal - small essential text, large quiet zones. Swiss formalism meets Brutalist material honesty. Structure communicates, not words. Every alignment the work of countless refinements.\n\n*These are condensed examples. The actual design philosophy should be 4-6 substantial paragraphs.*\n\n### ESSENTIAL PRINCIPLES\n- **VISUAL PHILOSOPHY**: Create an aesthetic worldview to be expressed through design\n- **MINIMAL TEXT**: Always emphasize that text is sparse, essential-only, integrated as visual element - never lengthy\n- **SPATIAL EXPRESSION**: Ideas communicate through space, form, color, composition - not paragraphs\n- **ARTISTIC FREEDOM**: The next Claude interprets the philosophy visually - provide creative room\n- **PURE DESIGN**: This is about making ART OBJECTS, not documents with decoration\n- **EXPERT CRAFTSMANSHIP**: Repeatedly emphasize the final work must look meticulously crafted, labored over with care, the product of countless hours by someone at the top of their field\n\n**The design philosophy should be 4-6 paragraphs long.** Fill it with poetic design philosophy that brings together the core vision. Avoid repeating the same points. Keep the design philosophy generic without mentioning the intention of the art, as if it can be used wherever. Output the design philosophy as a .md file.\n\n---\n\n## DEDUCING THE SUBTLE REFERENCE\n\n**CRITICAL STEP**: Before creating the canvas, identify the subtle conceptual thread from the original request.\n\n**THE ESSENTIAL PRINCIPLE**:\nThe topic is a **subtle, niche reference embedded within the art itself** - not always literal, always sophisticated. Someone familiar with the subject should feel it intuitively, while others simply experience a masterful abstract composition. The design philosophy provides the aesthetic language. The deduced topic provides the soul - the quiet conceptual DNA woven invisibly into form, color, and composition.\n\nThis is **VERY IMPORTANT**: The reference must be refined so it enhances the work's depth without announcing itself. Think like a jazz musician quoting another song - only those who know will catch it, but everyone appreciates the music.\n\n---\n\n## CANVAS CREATION\n\nWith both the philosophy and the conceptual framework established, express it on a canvas. Take a moment to gather thoughts and clear the mind. Use the design philosophy created and the instructions below to craft a masterpiece, embodying all aspects of the philosophy with expert craftsmanship.\n\n**IMPORTANT**: For any type of content, even if the user requests something for a movie/game/book, the approach should still be sophisticated. Never lose sight of the idea that this should be art, not something that's cartoony or amateur.\n\nTo create museum or magazine quality work, use the design philosophy as the foundation. Create one single page, highly visual, design-forward PDF or PNG output (unless asked for more pages). Generally use repeating patterns and perfect shapes. Treat the abstract philosophical design as if it were a scientific bible, borrowing the visual language of systematic observation—dense accumulation of marks, repeated elements, or layered patterns that build meaning through patient repetition and reward sustained viewing. Add sparse, clinical typography and systematic reference markers that suggest this could be a diagram from an imaginary discipline, treating the invisible subject with the same reverence typically reserved for documenting observable phenomena. Anchor the piece with simple phrase(s) or details positioned subtly, using a limited color palette that feels intentional and cohesive. Embrace the paradox of using analytical visual language to express ideas about human experience: the result should feel like an artifact that proves something ephemeral can be studied, mapped, and understood through careful attention. This is true art. \n\n**Text as a contextual element**: Text is always minimal and visual-first, but let context guide whether that means whisper-quiet labels or bold typographic gestures. A punk venue poster might have larger, more aggressive type than a minimalist ceramics studio identity. Most of the time, font should be thin. All use of fonts must be design-forward and prioritize visual communication. Regardless of text scale, nothing falls off the page and nothing overlaps. Every element must be contained within the canvas boundaries with proper margins. Check carefully that all text, graphics, and visual elements have breathing room and clear separation. This is non-negotiable for professional execution. **IMPORTANT: Use different fonts if writing text. Search the `./canvas-fonts` directory. Regardless of approach, sophistication is non-negotiable.**\n\nDownload and use whatever fonts are needed to make this a reality. Get creative by making the typography actually part of the art itself -- if the art is abstract, bring the font onto the canvas, not typeset digitally.\n\nTo push boundaries, follow design instinct/intuition while using the philosophy as a guiding principle. Embrace ultimate design freedom and choice. Push aesthetics and design to the frontier. \n\n**CRITICAL**: To achieve human-crafted quality (not AI-generated), create work that looks like it took countless hours. Make it appear as though someone at the absolute top of their field labored over every detail with painstaking care. Ensure the composition, spacing, color choices, typography - everything screams expert-level craftsmanship. Double-check that nothing overlaps, formatting is flawless, every detail perfect. Create something that could be shown to people to prove expertise and rank as undeniably impressive.\n\nOutput the final result as a single, downloadable .pdf or .png file, alongside the design philosophy used as a .md file.\n\n---\n\n## FINAL STEP\n\n**IMPORTANT**: The user ALREADY said \"It isn't perfect enough. It must be pristine, a masterpiece if craftsmanship, as if it were about to be displayed in a museum.\"\n\n**CRITICAL**: To refine the work, avoid adding more graphics; instead refine what has been created and make it extremely crisp, respecting the design philosophy and the principles of minimalism entirely. Rather than adding a fun filter or refactoring a font, consider how to make the existing composition more cohesive with the art. If the instinct is to call a new function or draw a new shape, STOP and instead ask: \"How can I make what's already here more of a piece of art?\"\n\nTake a second pass. Go back to the code and refine/polish further to make this a philosophically designed masterpiece.\n\n## MULTI-PAGE OPTION\n\nTo create additional pages when requested, create more creative pages along the same lines as the design philosophy but distinctly different as well. Bundle those pages in the same .pdf or many .pngs. Treat the first page as just a single page in a whole coffee table book waiting to be filled. Make the next pages unique twists and memories of the original. Have them almost tell a story in a very tasteful way. Exercise full creative freedom.",
        "skills/doc-coauthoring/SKILL.md": "---\nname: doc-coauthoring\ndescription: Guide users through a structured workflow for co-authoring documentation. Use when user wants to write documentation, proposals, technical specs, decision docs, or similar structured content. This workflow helps users efficiently transfer context, refine content through iteration, and verify the doc works for readers. Trigger when user mentions writing docs, creating proposals, drafting specs, or similar documentation tasks.\n---\n\n# Doc Co-Authoring Workflow\n\nThis skill provides a structured workflow for guiding users through collaborative document creation. Act as an active guide, walking users through three stages: Context Gathering, Refinement & Structure, and Reader Testing.\n\n## When to Offer This Workflow\n\n**Trigger conditions:**\n- User mentions writing documentation: \"write a doc\", \"draft a proposal\", \"create a spec\", \"write up\"\n- User mentions specific doc types: \"PRD\", \"design doc\", \"decision doc\", \"RFC\"\n- User seems to be starting a substantial writing task\n\n**Initial offer:**\nOffer the user a structured workflow for co-authoring the document. Explain the three stages:\n\n1. **Context Gathering**: User provides all relevant context while Claude asks clarifying questions\n2. **Refinement & Structure**: Iteratively build each section through brainstorming and editing\n3. **Reader Testing**: Test the doc with a fresh Claude (no context) to catch blind spots before others read it\n\nExplain that this approach helps ensure the doc works well when others read it (including when they paste it into Claude). Ask if they want to try this workflow or prefer to work freeform.\n\nIf user declines, work freeform. If user accepts, proceed to Stage 1.\n\n## Stage 1: Context Gathering\n\n**Goal:** Close the gap between what the user knows and what Claude knows, enabling smart guidance later.\n\n### Initial Questions\n\nStart by asking the user for meta-context about the document:\n\n1. What type of document is this? (e.g., technical spec, decision doc, proposal)\n2. Who's the primary audience?\n3. What's the desired impact when someone reads this?\n4. Is there a template or specific format to follow?\n5. Any other constraints or context to know?\n\nInform them they can answer in shorthand or dump information however works best for them.\n\n**If user provides a template or mentions a doc type:**\n- Ask if they have a template document to share\n- If they provide a link to a shared document, use the appropriate integration to fetch it\n- If they provide a file, read it\n\n**If user mentions editing an existing shared document:**\n- Use the appropriate integration to read the current state\n- Check for images without alt-text\n- If images exist without alt-text, explain that when others use Claude to understand the doc, Claude won't be able to see them. Ask if they want alt-text generated. If so, request they paste each image into chat for descriptive alt-text generation.\n\n### Info Dumping\n\nOnce initial questions are answered, encourage the user to dump all the context they have. Request information such as:\n- Background on the project/problem\n- Related team discussions or shared documents\n- Why alternative solutions aren't being used\n- Organizational context (team dynamics, past incidents, politics)\n- Timeline pressures or constraints\n- Technical architecture or dependencies\n- Stakeholder concerns\n\nAdvise them not to worry about organizing it - just get it all out. Offer multiple ways to provide context:\n- Info dump stream-of-consciousness\n- Point to team channels or threads to read\n- Link to shared documents\n\n**If integrations are available** (e.g., Slack, Teams, Google Drive, SharePoint, or other MCP servers), mention that these can be used to pull in context directly.\n\n**If no integrations are detected and in Claude.ai or Claude app:** Suggest they can enable connectors in their Claude settings to allow pulling context from messaging apps and document storage directly.\n\nInform them clarifying questions will be asked once they've done their initial dump.\n\n**During context gathering:**\n\n- If user mentions team channels or shared documents:\n  - If integrations available: Inform them the content will be read now, then use the appropriate integration\n  - If integrations not available: Explain lack of access. Suggest they enable connectors in Claude settings, or paste the relevant content directly.\n\n- If user mentions entities/projects that are unknown:\n  - Ask if connected tools should be searched to learn more\n  - Wait for user confirmation before searching\n\n- As user provides context, track what's being learned and what's still unclear\n\n**Asking clarifying questions:**\n\nWhen user signals they've done their initial dump (or after substantial context provided), ask clarifying questions to ensure understanding:\n\nGenerate 5-10 numbered questions based on gaps in the context.\n\nInform them they can use shorthand to answer (e.g., \"1: yes, 2: see #channel, 3: no because backwards compat\"), link to more docs, point to channels to read, or just keep info-dumping. Whatever's most efficient for them.\n\n**Exit condition:**\nSufficient context has been gathered when questions show understanding - when edge cases and trade-offs can be asked about without needing basics explained.\n\n**Transition:**\nAsk if there's any more context they want to provide at this stage, or if it's time to move on to drafting the document.\n\nIf user wants to add more, let them. When ready, proceed to Stage 2.\n\n## Stage 2: Refinement & Structure\n\n**Goal:** Build the document section by section through brainstorming, curation, and iterative refinement.\n\n**Instructions to user:**\nExplain that the document will be built section by section. For each section:\n1. Clarifying questions will be asked about what to include\n2. 5-20 options will be brainstormed\n3. User will indicate what to keep/remove/combine\n4. The section will be drafted\n5. It will be refined through surgical edits\n\nStart with whichever section has the most unknowns (usually the core decision/proposal), then work through the rest.\n\n**Section ordering:**\n\nIf the document structure is clear:\nAsk which section they'd like to start with.\n\nSuggest starting with whichever section has the most unknowns. For decision docs, that's usually the core proposal. For specs, it's typically the technical approach. Summary sections are best left for last.\n\nIf user doesn't know what sections they need:\nBased on the type of document and template, suggest 3-5 sections appropriate for the doc type.\n\nAsk if this structure works, or if they want to adjust it.\n\n**Once structure is agreed:**\n\nCreate the initial document structure with placeholder text for all sections.\n\n**If access to artifacts is available:**\nUse `create_file` to create an artifact. This gives both Claude and the user a scaffold to work from.\n\nInform them that the initial structure with placeholders for all sections will be created.\n\nCreate artifact with all section headers and brief placeholder text like \"[To be written]\" or \"[Content here]\".\n\nProvide the scaffold link and indicate it's time to fill in each section.\n\n**If no access to artifacts:**\nCreate a markdown file in the working directory. Name it appropriately (e.g., `decision-doc.md`, `technical-spec.md`).\n\nInform them that the initial structure with placeholders for all sections will be created.\n\nCreate file with all section headers and placeholder text.\n\nConfirm the filename has been created and indicate it's time to fill in each section.\n\n**For each section:**\n\n### Step 1: Clarifying Questions\n\nAnnounce work will begin on the [SECTION NAME] section. Ask 5-10 clarifying questions about what should be included:\n\nGenerate 5-10 specific questions based on context and section purpose.\n\nInform them they can answer in shorthand or just indicate what's important to cover.\n\n### Step 2: Brainstorming\n\nFor the [SECTION NAME] section, brainstorm [5-20] things that might be included, depending on the section's complexity. Look for:\n- Context shared that might have been forgotten\n- Angles or considerations not yet mentioned\n\nGenerate 5-20 numbered options based on section complexity. At the end, offer to brainstorm more if they want additional options.\n\n### Step 3: Curation\n\nAsk which points should be kept, removed, or combined. Request brief justifications to help learn priorities for the next sections.\n\nProvide examples:\n- \"Keep 1,4,7,9\"\n- \"Remove 3 (duplicates 1)\"\n- \"Remove 6 (audience already knows this)\"\n- \"Combine 11 and 12\"\n\n**If user gives freeform feedback** (e.g., \"looks good\" or \"I like most of it but...\") instead of numbered selections, extract their preferences and proceed. Parse what they want kept/removed/changed and apply it.\n\n### Step 4: Gap Check\n\nBased on what they've selected, ask if there's anything important missing for the [SECTION NAME] section.\n\n### Step 5: Drafting\n\nUse `str_replace` to replace the placeholder text for this section with the actual drafted content.\n\nAnnounce the [SECTION NAME] section will be drafted now based on what they've selected.\n\n**If using artifacts:**\nAfter drafting, provide a link to the artifact.\n\nAsk them to read through it and indicate what to change. Note that being specific helps learning for the next sections.\n\n**If using a file (no artifacts):**\nAfter drafting, confirm completion.\n\nInform them the [SECTION NAME] section has been drafted in [filename]. Ask them to read through it and indicate what to change. Note that being specific helps learning for the next sections.\n\n**Key instruction for user (include when drafting the first section):**\nProvide a note: Instead of editing the doc directly, ask them to indicate what to change. This helps learning of their style for future sections. For example: \"Remove the X bullet - already covered by Y\" or \"Make the third paragraph more concise\".\n\n### Step 6: Iterative Refinement\n\nAs user provides feedback:\n- Use `str_replace` to make edits (never reprint the whole doc)\n- **If using artifacts:** Provide link to artifact after each edit\n- **If using files:** Just confirm edits are complete\n- If user edits doc directly and asks to read it: mentally note the changes they made and keep them in mind for future sections (this shows their preferences)\n\n**Continue iterating** until user is satisfied with the section.\n\n### Quality Checking\n\nAfter 3 consecutive iterations with no substantial changes, ask if anything can be removed without losing important information.\n\nWhen section is done, confirm [SECTION NAME] is complete. Ask if ready to move to the next section.\n\n**Repeat for all sections.**\n\n### Near Completion\n\nAs approaching completion (80%+ of sections done), announce intention to re-read the entire document and check for:\n- Flow and consistency across sections\n- Redundancy or contradictions\n- Anything that feels like \"slop\" or generic filler\n- Whether every sentence carries weight\n\nRead entire document and provide feedback.\n\n**When all sections are drafted and refined:**\nAnnounce all sections are drafted. Indicate intention to review the complete document one more time.\n\nReview for overall coherence, flow, completeness.\n\nProvide any final suggestions.\n\nAsk if ready to move to Reader Testing, or if they want to refine anything else.\n\n## Stage 3: Reader Testing\n\n**Goal:** Test the document with a fresh Claude (no context bleed) to verify it works for readers.\n\n**Instructions to user:**\nExplain that testing will now occur to see if the document actually works for readers. This catches blind spots - things that make sense to the authors but might confuse others.\n\n### Testing Approach\n\n**If access to sub-agents is available (e.g., in Claude Code):**\n\nPerform the testing directly without user involvement.\n\n### Step 1: Predict Reader Questions\n\nAnnounce intention to predict what questions readers might ask when trying to discover this document.\n\nGenerate 5-10 questions that readers would realistically ask.\n\n### Step 2: Test with Sub-Agent\n\nAnnounce that these questions will be tested with a fresh Claude instance (no context from this conversation).\n\nFor each question, invoke a sub-agent with just the document content and the question.\n\nSummarize what Reader Claude got right/wrong for each question.\n\n### Step 3: Run Additional Checks\n\nAnnounce additional checks will be performed.\n\nInvoke sub-agent to check for ambiguity, false assumptions, contradictions.\n\nSummarize any issues found.\n\n### Step 4: Report and Fix\n\nIf issues found:\nReport that Reader Claude struggled with specific issues.\n\nList the specific issues.\n\nIndicate intention to fix these gaps.\n\nLoop back to refinement for problematic sections.\n\n---\n\n**If no access to sub-agents (e.g., claude.ai web interface):**\n\nThe user will need to do the testing manually.\n\n### Step 1: Predict Reader Questions\n\nAsk what questions people might ask when trying to discover this document. What would they type into Claude.ai?\n\nGenerate 5-10 questions that readers would realistically ask.\n\n### Step 2: Setup Testing\n\nProvide testing instructions:\n1. Open a fresh Claude conversation: https://claude.ai\n2. Paste or share the document content (if using a shared doc platform with connectors enabled, provide the link)\n3. Ask Reader Claude the generated questions\n\nFor each question, instruct Reader Claude to provide:\n- The answer\n- Whether anything was ambiguous or unclear\n- What knowledge/context the doc assumes is already known\n\nCheck if Reader Claude gives correct answers or misinterprets anything.\n\n### Step 3: Additional Checks\n\nAlso ask Reader Claude:\n- \"What in this doc might be ambiguous or unclear to readers?\"\n- \"What knowledge or context does this doc assume readers already have?\"\n- \"Are there any internal contradictions or inconsistencies?\"\n\n### Step 4: Iterate Based on Results\n\nAsk what Reader Claude got wrong or struggled with. Indicate intention to fix those gaps.\n\nLoop back to refinement for any problematic sections.\n\n---\n\n### Exit Condition (Both Approaches)\n\nWhen Reader Claude consistently answers questions correctly and doesn't surface new gaps or ambiguities, the doc is ready.\n\n## Final Review\n\nWhen Reader Testing passes:\nAnnounce the doc has passed Reader Claude testing. Before completion:\n\n1. Recommend they do a final read-through themselves - they own this document and are responsible for its quality\n2. Suggest double-checking any facts, links, or technical details\n3. Ask them to verify it achieves the impact they wanted\n\nAsk if they want one more review, or if the work is done.\n\n**If user wants final review, provide it. Otherwise:**\nAnnounce document completion. Provide a few final tips:\n- Consider linking this conversation in an appendix so readers can see how the doc was developed\n- Use appendices to provide depth without bloating the main doc\n- Update the doc as feedback is received from real readers\n\n## Tips for Effective Guidance\n\n**Tone:**\n- Be direct and procedural\n- Explain rationale briefly when it affects user behavior\n- Don't try to \"sell\" the approach - just execute it\n\n**Handling Deviations:**\n- If user wants to skip a stage: Ask if they want to skip this and write freeform\n- If user seems frustrated: Acknowledge this is taking longer than expected. Suggest ways to move faster\n- Always give user agency to adjust the process\n\n**Context Management:**\n- Throughout, if context is missing on something mentioned, proactively ask\n- Don't let gaps accumulate - address them as they come up\n\n**Artifact Management:**\n- Use `create_file` for drafting full sections\n- Use `str_replace` for all edits\n- Provide artifact link after every change\n- Never use artifacts for brainstorming lists - that's just conversation\n\n**Quality over Speed:**\n- Don't rush through stages\n- Each iteration should make meaningful improvements\n- The goal is a document that actually works for readers\n",
        "skills/docx/SKILL.md": "---\nname: docx\ndescription: \"Comprehensive document creation, editing, and analysis with support for tracked changes, comments, formatting preservation, and text extraction. When Claude needs to work with professional documents (.docx files) for: (1) Creating new documents, (2) Modifying or editing content, (3) Working with tracked changes, (4) Adding comments, or any other document tasks\"\nlicense: Proprietary. LICENSE.txt has complete terms\n---\n\n# DOCX creation, editing, and analysis\n\n## Overview\n\nA user may ask you to create, edit, or analyze the contents of a .docx file. A .docx file is essentially a ZIP archive containing XML files and other resources that you can read or edit. You have different tools and workflows available for different tasks.\n\n## Workflow Decision Tree\n\n### Reading/Analyzing Content\nUse \"Text extraction\" or \"Raw XML access\" sections below\n\n### Creating New Document\nUse \"Creating a new Word document\" workflow\n\n### Editing Existing Document\n- **Your own document + simple changes**\n  Use \"Basic OOXML editing\" workflow\n\n- **Someone else's document**\n  Use **\"Redlining workflow\"** (recommended default)\n\n- **Legal, academic, business, or government docs**\n  Use **\"Redlining workflow\"** (required)\n\n## Reading and analyzing content\n\n### Text extraction\nIf you just need to read the text contents of a document, you should convert the document to markdown using pandoc. Pandoc provides excellent support for preserving document structure and can show tracked changes:\n\n```bash\n# Convert document to markdown with tracked changes\npandoc --track-changes=all path-to-file.docx -o output.md\n# Options: --track-changes=accept/reject/all\n```\n\n### Raw XML access\nYou need raw XML access for: comments, complex formatting, document structure, embedded media, and metadata. For any of these features, you'll need to unpack a document and read its raw XML contents.\n\n#### Unpacking a file\n`python ooxml/scripts/unpack.py <office_file> <output_directory>`\n\n#### Key file structures\n* `word/document.xml` - Main document contents\n* `word/comments.xml` - Comments referenced in document.xml\n* `word/media/` - Embedded images and media files\n* Tracked changes use `<w:ins>` (insertions) and `<w:del>` (deletions) tags\n\n## Creating a new Word document\n\nWhen creating a new Word document from scratch, use **docx-js**, which allows you to create Word documents using JavaScript/TypeScript.\n\n### Workflow\n1. **MANDATORY - READ ENTIRE FILE**: Read [`docx-js.md`](docx-js.md) (~500 lines) completely from start to finish. **NEVER set any range limits when reading this file.** Read the full file content for detailed syntax, critical formatting rules, and best practices before proceeding with document creation.\n2. Create a JavaScript/TypeScript file using Document, Paragraph, TextRun components (You can assume all dependencies are installed, but if not, refer to the dependencies section below)\n3. Export as .docx using Packer.toBuffer()\n\n## Editing an existing Word document\n\nWhen editing an existing Word document, use the **Document library** (a Python library for OOXML manipulation). The library automatically handles infrastructure setup and provides methods for document manipulation. For complex scenarios, you can access the underlying DOM directly through the library.\n\n### Workflow\n1. **MANDATORY - READ ENTIRE FILE**: Read [`ooxml.md`](ooxml.md) (~600 lines) completely from start to finish. **NEVER set any range limits when reading this file.** Read the full file content for the Document library API and XML patterns for directly editing document files.\n2. Unpack the document: `python ooxml/scripts/unpack.py <office_file> <output_directory>`\n3. Create and run a Python script using the Document library (see \"Document Library\" section in ooxml.md)\n4. Pack the final document: `python ooxml/scripts/pack.py <input_directory> <office_file>`\n\nThe Document library provides both high-level methods for common operations and direct DOM access for complex scenarios.\n\n## Redlining workflow for document review\n\nThis workflow allows you to plan comprehensive tracked changes using markdown before implementing them in OOXML. **CRITICAL**: For complete tracked changes, you must implement ALL changes systematically.\n\n**Batching Strategy**: Group related changes into batches of 3-10 changes. This makes debugging manageable while maintaining efficiency. Test each batch before moving to the next.\n\n**Principle: Minimal, Precise Edits**\nWhen implementing tracked changes, only mark text that actually changes. Repeating unchanged text makes edits harder to review and appears unprofessional. Break replacements into: [unchanged text] + [deletion] + [insertion] + [unchanged text]. Preserve the original run's RSID for unchanged text by extracting the `<w:r>` element from the original and reusing it.\n\nExample - Changing \"30 days\" to \"60 days\" in a sentence:\n```python\n# BAD - Replaces entire sentence\n'<w:del><w:r><w:delText>The term is 30 days.</w:delText></w:r></w:del><w:ins><w:r><w:t>The term is 60 days.</w:t></w:r></w:ins>'\n\n# GOOD - Only marks what changed, preserves original <w:r> for unchanged text\n'<w:r w:rsidR=\"00AB12CD\"><w:t>The term is </w:t></w:r><w:del><w:r><w:delText>30</w:delText></w:r></w:del><w:ins><w:r><w:t>60</w:t></w:r></w:ins><w:r w:rsidR=\"00AB12CD\"><w:t> days.</w:t></w:r>'\n```\n\n### Tracked changes workflow\n\n1. **Get markdown representation**: Convert document to markdown with tracked changes preserved:\n   ```bash\n   pandoc --track-changes=all path-to-file.docx -o current.md\n   ```\n\n2. **Identify and group changes**: Review the document and identify ALL changes needed, organizing them into logical batches:\n\n   **Location methods** (for finding changes in XML):\n   - Section/heading numbers (e.g., \"Section 3.2\", \"Article IV\")\n   - Paragraph identifiers if numbered\n   - Grep patterns with unique surrounding text\n   - Document structure (e.g., \"first paragraph\", \"signature block\")\n   - **DO NOT use markdown line numbers** - they don't map to XML structure\n\n   **Batch organization** (group 3-10 related changes per batch):\n   - By section: \"Batch 1: Section 2 amendments\", \"Batch 2: Section 5 updates\"\n   - By type: \"Batch 1: Date corrections\", \"Batch 2: Party name changes\"\n   - By complexity: Start with simple text replacements, then tackle complex structural changes\n   - Sequential: \"Batch 1: Pages 1-3\", \"Batch 2: Pages 4-6\"\n\n3. **Read documentation and unpack**:\n   - **MANDATORY - READ ENTIRE FILE**: Read [`ooxml.md`](ooxml.md) (~600 lines) completely from start to finish. **NEVER set any range limits when reading this file.** Pay special attention to the \"Document Library\" and \"Tracked Change Patterns\" sections.\n   - **Unpack the document**: `python ooxml/scripts/unpack.py <file.docx> <dir>`\n   - **Note the suggested RSID**: The unpack script will suggest an RSID to use for your tracked changes. Copy this RSID for use in step 4b.\n\n4. **Implement changes in batches**: Group changes logically (by section, by type, or by proximity) and implement them together in a single script. This approach:\n   - Makes debugging easier (smaller batch = easier to isolate errors)\n   - Allows incremental progress\n   - Maintains efficiency (batch size of 3-10 changes works well)\n\n   **Suggested batch groupings:**\n   - By document section (e.g., \"Section 3 changes\", \"Definitions\", \"Termination clause\")\n   - By change type (e.g., \"Date changes\", \"Party name updates\", \"Legal term replacements\")\n   - By proximity (e.g., \"Changes on pages 1-3\", \"Changes in first half of document\")\n\n   For each batch of related changes:\n\n   **a. Map text to XML**: Grep for text in `word/document.xml` to verify how text is split across `<w:r>` elements.\n\n   **b. Create and run script**: Use `get_node` to find nodes, implement changes, then `doc.save()`. See **\"Document Library\"** section in ooxml.md for patterns.\n\n   **Note**: Always grep `word/document.xml` immediately before writing a script to get current line numbers and verify text content. Line numbers change after each script run.\n\n5. **Pack the document**: After all batches are complete, convert the unpacked directory back to .docx:\n   ```bash\n   python ooxml/scripts/pack.py unpacked reviewed-document.docx\n   ```\n\n6. **Final verification**: Do a comprehensive check of the complete document:\n   - Convert final document to markdown:\n     ```bash\n     pandoc --track-changes=all reviewed-document.docx -o verification.md\n     ```\n   - Verify ALL changes were applied correctly:\n     ```bash\n     grep \"original phrase\" verification.md  # Should NOT find it\n     grep \"replacement phrase\" verification.md  # Should find it\n     ```\n   - Check that no unintended changes were introduced\n\n\n## Converting Documents to Images\n\nTo visually analyze Word documents, convert them to images using a two-step process:\n\n1. **Convert DOCX to PDF**:\n   ```bash\n   soffice --headless --convert-to pdf document.docx\n   ```\n\n2. **Convert PDF pages to JPEG images**:\n   ```bash\n   pdftoppm -jpeg -r 150 document.pdf page\n   ```\n   This creates files like `page-1.jpg`, `page-2.jpg`, etc.\n\nOptions:\n- `-r 150`: Sets resolution to 150 DPI (adjust for quality/size balance)\n- `-jpeg`: Output JPEG format (use `-png` for PNG if preferred)\n- `-f N`: First page to convert (e.g., `-f 2` starts from page 2)\n- `-l N`: Last page to convert (e.g., `-l 5` stops at page 5)\n- `page`: Prefix for output files\n\nExample for specific range:\n```bash\npdftoppm -jpeg -r 150 -f 2 -l 5 document.pdf page  # Converts only pages 2-5\n```\n\n## Code Style Guidelines\n**IMPORTANT**: When generating code for DOCX operations:\n- Write concise code\n- Avoid verbose variable names and redundant operations\n- Avoid unnecessary print statements\n\n## Dependencies\n\nRequired dependencies (install if not available):\n\n- **pandoc**: `sudo apt-get install pandoc` (for text extraction)\n- **docx**: `npm install -g docx` (for creating new documents)\n- **LibreOffice**: `sudo apt-get install libreoffice` (for PDF conversion)\n- **Poppler**: `sudo apt-get install poppler-utils` (for pdftoppm to convert PDF to images)\n- **defusedxml**: `pip install defusedxml` (for secure XML parsing)",
        "skills/docx/docx-js.md": "# DOCX Library Tutorial\n\nGenerate .docx files with JavaScript/TypeScript.\n\n**Important: Read this entire document before starting.** Critical formatting rules and common pitfalls are covered throughout - skipping sections may result in corrupted files or rendering issues.\n\n## Setup\nAssumes docx is already installed globally\nIf not installed: `npm install -g docx`\n\n```javascript\nconst { Document, Packer, Paragraph, TextRun, Table, TableRow, TableCell, ImageRun, Media, \n        Header, Footer, AlignmentType, PageOrientation, LevelFormat, ExternalHyperlink, \n        InternalHyperlink, TableOfContents, HeadingLevel, BorderStyle, WidthType, TabStopType, \n        TabStopPosition, UnderlineType, ShadingType, VerticalAlign, SymbolRun, PageNumber,\n        FootnoteReferenceRun, Footnote, PageBreak } = require('docx');\n\n// Create & Save\nconst doc = new Document({ sections: [{ children: [/* content */] }] });\nPacker.toBuffer(doc).then(buffer => fs.writeFileSync(\"doc.docx\", buffer)); // Node.js\nPacker.toBlob(doc).then(blob => { /* download logic */ }); // Browser\n```\n\n## Text & Formatting\n```javascript\n// IMPORTANT: Never use \\n for line breaks - always use separate Paragraph elements\n// ❌ WRONG: new TextRun(\"Line 1\\nLine 2\")\n// ✅ CORRECT: new Paragraph({ children: [new TextRun(\"Line 1\")] }), new Paragraph({ children: [new TextRun(\"Line 2\")] })\n\n// Basic text with all formatting options\nnew Paragraph({\n  alignment: AlignmentType.CENTER,\n  spacing: { before: 200, after: 200 },\n  indent: { left: 720, right: 720 },\n  children: [\n    new TextRun({ text: \"Bold\", bold: true }),\n    new TextRun({ text: \"Italic\", italics: true }),\n    new TextRun({ text: \"Underlined\", underline: { type: UnderlineType.DOUBLE, color: \"FF0000\" } }),\n    new TextRun({ text: \"Colored\", color: \"FF0000\", size: 28, font: \"Arial\" }), // Arial default\n    new TextRun({ text: \"Highlighted\", highlight: \"yellow\" }),\n    new TextRun({ text: \"Strikethrough\", strike: true }),\n    new TextRun({ text: \"x2\", superScript: true }),\n    new TextRun({ text: \"H2O\", subScript: true }),\n    new TextRun({ text: \"SMALL CAPS\", smallCaps: true }),\n    new SymbolRun({ char: \"2022\", font: \"Symbol\" }), // Bullet •\n    new SymbolRun({ char: \"00A9\", font: \"Arial\" })   // Copyright © - Arial for symbols\n  ]\n})\n```\n\n## Styles & Professional Formatting\n\n```javascript\nconst doc = new Document({\n  styles: {\n    default: { document: { run: { font: \"Arial\", size: 24 } } }, // 12pt default\n    paragraphStyles: [\n      // Document title style - override built-in Title style\n      { id: \"Title\", name: \"Title\", basedOn: \"Normal\",\n        run: { size: 56, bold: true, color: \"000000\", font: \"Arial\" },\n        paragraph: { spacing: { before: 240, after: 120 }, alignment: AlignmentType.CENTER } },\n      // IMPORTANT: Override built-in heading styles by using their exact IDs\n      { id: \"Heading1\", name: \"Heading 1\", basedOn: \"Normal\", next: \"Normal\", quickFormat: true,\n        run: { size: 32, bold: true, color: \"000000\", font: \"Arial\" }, // 16pt\n        paragraph: { spacing: { before: 240, after: 240 }, outlineLevel: 0 } }, // Required for TOC\n      { id: \"Heading2\", name: \"Heading 2\", basedOn: \"Normal\", next: \"Normal\", quickFormat: true,\n        run: { size: 28, bold: true, color: \"000000\", font: \"Arial\" }, // 14pt\n        paragraph: { spacing: { before: 180, after: 180 }, outlineLevel: 1 } },\n      // Custom styles use your own IDs\n      { id: \"myStyle\", name: \"My Style\", basedOn: \"Normal\",\n        run: { size: 28, bold: true, color: \"000000\" },\n        paragraph: { spacing: { after: 120 }, alignment: AlignmentType.CENTER } }\n    ],\n    characterStyles: [{ id: \"myCharStyle\", name: \"My Char Style\",\n      run: { color: \"FF0000\", bold: true, underline: { type: UnderlineType.SINGLE } } }]\n  },\n  sections: [{\n    properties: { page: { margin: { top: 1440, right: 1440, bottom: 1440, left: 1440 } } },\n    children: [\n      new Paragraph({ heading: HeadingLevel.TITLE, children: [new TextRun(\"Document Title\")] }), // Uses overridden Title style\n      new Paragraph({ heading: HeadingLevel.HEADING_1, children: [new TextRun(\"Heading 1\")] }), // Uses overridden Heading1 style\n      new Paragraph({ style: \"myStyle\", children: [new TextRun(\"Custom paragraph style\")] }),\n      new Paragraph({ children: [\n        new TextRun(\"Normal with \"),\n        new TextRun({ text: \"custom char style\", style: \"myCharStyle\" })\n      ]})\n    ]\n  }]\n});\n```\n\n**Professional Font Combinations:**\n- **Arial (Headers) + Arial (Body)** - Most universally supported, clean and professional\n- **Times New Roman (Headers) + Arial (Body)** - Classic serif headers with modern sans-serif body\n- **Georgia (Headers) + Verdana (Body)** - Optimized for screen reading, elegant contrast\n\n**Key Styling Principles:**\n- **Override built-in styles**: Use exact IDs like \"Heading1\", \"Heading2\", \"Heading3\" to override Word's built-in heading styles\n- **HeadingLevel constants**: `HeadingLevel.HEADING_1` uses \"Heading1\" style, `HeadingLevel.HEADING_2` uses \"Heading2\" style, etc.\n- **Include outlineLevel**: Set `outlineLevel: 0` for H1, `outlineLevel: 1` for H2, etc. to ensure TOC works correctly\n- **Use custom styles** instead of inline formatting for consistency\n- **Set a default font** using `styles.default.document.run.font` - Arial is universally supported\n- **Establish visual hierarchy** with different font sizes (titles > headers > body)\n- **Add proper spacing** with `before` and `after` paragraph spacing\n- **Use colors sparingly**: Default to black (000000) and shades of gray for titles and headings (heading 1, heading 2, etc.)\n- **Set consistent margins** (1440 = 1 inch is standard)\n\n\n## Lists (ALWAYS USE PROPER LISTS - NEVER USE UNICODE BULLETS)\n```javascript\n// Bullets - ALWAYS use the numbering config, NOT unicode symbols\n// CRITICAL: Use LevelFormat.BULLET constant, NOT the string \"bullet\"\nconst doc = new Document({\n  numbering: {\n    config: [\n      { reference: \"bullet-list\",\n        levels: [{ level: 0, format: LevelFormat.BULLET, text: \"•\", alignment: AlignmentType.LEFT,\n          style: { paragraph: { indent: { left: 720, hanging: 360 } } } }] },\n      { reference: \"first-numbered-list\",\n        levels: [{ level: 0, format: LevelFormat.DECIMAL, text: \"%1.\", alignment: AlignmentType.LEFT,\n          style: { paragraph: { indent: { left: 720, hanging: 360 } } } }] },\n      { reference: \"second-numbered-list\", // Different reference = restarts at 1\n        levels: [{ level: 0, format: LevelFormat.DECIMAL, text: \"%1.\", alignment: AlignmentType.LEFT,\n          style: { paragraph: { indent: { left: 720, hanging: 360 } } } }] }\n    ]\n  },\n  sections: [{\n    children: [\n      // Bullet list items\n      new Paragraph({ numbering: { reference: \"bullet-list\", level: 0 },\n        children: [new TextRun(\"First bullet point\")] }),\n      new Paragraph({ numbering: { reference: \"bullet-list\", level: 0 },\n        children: [new TextRun(\"Second bullet point\")] }),\n      // Numbered list items\n      new Paragraph({ numbering: { reference: \"first-numbered-list\", level: 0 },\n        children: [new TextRun(\"First numbered item\")] }),\n      new Paragraph({ numbering: { reference: \"first-numbered-list\", level: 0 },\n        children: [new TextRun(\"Second numbered item\")] }),\n      // ⚠️ CRITICAL: Different reference = INDEPENDENT list that restarts at 1\n      // Same reference = CONTINUES previous numbering\n      new Paragraph({ numbering: { reference: \"second-numbered-list\", level: 0 },\n        children: [new TextRun(\"Starts at 1 again (because different reference)\")] })\n    ]\n  }]\n});\n\n// ⚠️ CRITICAL NUMBERING RULE: Each reference creates an INDEPENDENT numbered list\n// - Same reference = continues numbering (1, 2, 3... then 4, 5, 6...)\n// - Different reference = restarts at 1 (1, 2, 3... then 1, 2, 3...)\n// Use unique reference names for each separate numbered section!\n\n// ⚠️ CRITICAL: NEVER use unicode bullets - they create fake lists that don't work properly\n// new TextRun(\"• Item\")           // WRONG\n// new SymbolRun({ char: \"2022\" }) // WRONG\n// ✅ ALWAYS use numbering config with LevelFormat.BULLET for real Word lists\n```\n\n## Tables\n```javascript\n// Complete table with margins, borders, headers, and bullet points\nconst tableBorder = { style: BorderStyle.SINGLE, size: 1, color: \"CCCCCC\" };\nconst cellBorders = { top: tableBorder, bottom: tableBorder, left: tableBorder, right: tableBorder };\n\nnew Table({\n  columnWidths: [4680, 4680], // ⚠️ CRITICAL: Set column widths at table level - values in DXA (twentieths of a point)\n  margins: { top: 100, bottom: 100, left: 180, right: 180 }, // Set once for all cells\n  rows: [\n    new TableRow({\n      tableHeader: true,\n      children: [\n        new TableCell({\n          borders: cellBorders,\n          width: { size: 4680, type: WidthType.DXA }, // ALSO set width on each cell\n          // ⚠️ CRITICAL: Always use ShadingType.CLEAR to prevent black backgrounds in Word.\n          shading: { fill: \"D5E8F0\", type: ShadingType.CLEAR }, \n          verticalAlign: VerticalAlign.CENTER,\n          children: [new Paragraph({ \n            alignment: AlignmentType.CENTER,\n            children: [new TextRun({ text: \"Header\", bold: true, size: 22 })]\n          })]\n        }),\n        new TableCell({\n          borders: cellBorders,\n          width: { size: 4680, type: WidthType.DXA }, // ALSO set width on each cell\n          shading: { fill: \"D5E8F0\", type: ShadingType.CLEAR },\n          children: [new Paragraph({ \n            alignment: AlignmentType.CENTER,\n            children: [new TextRun({ text: \"Bullet Points\", bold: true, size: 22 })]\n          })]\n        })\n      ]\n    }),\n    new TableRow({\n      children: [\n        new TableCell({\n          borders: cellBorders,\n          width: { size: 4680, type: WidthType.DXA }, // ALSO set width on each cell\n          children: [new Paragraph({ children: [new TextRun(\"Regular data\")] })]\n        }),\n        new TableCell({\n          borders: cellBorders,\n          width: { size: 4680, type: WidthType.DXA }, // ALSO set width on each cell\n          children: [\n            new Paragraph({ \n              numbering: { reference: \"bullet-list\", level: 0 },\n              children: [new TextRun(\"First bullet point\")] \n            }),\n            new Paragraph({ \n              numbering: { reference: \"bullet-list\", level: 0 },\n              children: [new TextRun(\"Second bullet point\")] \n            })\n          ]\n        })\n      ]\n    })\n  ]\n})\n```\n\n**IMPORTANT: Table Width & Borders**\n- Use BOTH `columnWidths: [width1, width2, ...]` array AND `width: { size: X, type: WidthType.DXA }` on each cell\n- Values in DXA (twentieths of a point): 1440 = 1 inch, Letter usable width = 9360 DXA (with 1\" margins)\n- Apply borders to individual `TableCell` elements, NOT the `Table` itself\n\n**Precomputed Column Widths (Letter size with 1\" margins = 9360 DXA total):**\n- **2 columns:** `columnWidths: [4680, 4680]` (equal width)\n- **3 columns:** `columnWidths: [3120, 3120, 3120]` (equal width)\n\n## Links & Navigation\n```javascript\n// TOC (requires headings) - CRITICAL: Use HeadingLevel only, NOT custom styles\n// ❌ WRONG: new Paragraph({ heading: HeadingLevel.HEADING_1, style: \"customHeader\", children: [new TextRun(\"Title\")] })\n// ✅ CORRECT: new Paragraph({ heading: HeadingLevel.HEADING_1, children: [new TextRun(\"Title\")] })\nnew TableOfContents(\"Table of Contents\", { hyperlink: true, headingStyleRange: \"1-3\" }),\n\n// External link\nnew Paragraph({\n  children: [new ExternalHyperlink({\n    children: [new TextRun({ text: \"Google\", style: \"Hyperlink\" })],\n    link: \"https://www.google.com\"\n  })]\n}),\n\n// Internal link & bookmark\nnew Paragraph({\n  children: [new InternalHyperlink({\n    children: [new TextRun({ text: \"Go to Section\", style: \"Hyperlink\" })],\n    anchor: \"section1\"\n  })]\n}),\nnew Paragraph({\n  children: [new TextRun(\"Section Content\")],\n  bookmark: { id: \"section1\", name: \"section1\" }\n}),\n```\n\n## Images & Media\n```javascript\n// Basic image with sizing & positioning\n// CRITICAL: Always specify 'type' parameter - it's REQUIRED for ImageRun\nnew Paragraph({\n  alignment: AlignmentType.CENTER,\n  children: [new ImageRun({\n    type: \"png\", // NEW REQUIREMENT: Must specify image type (png, jpg, jpeg, gif, bmp, svg)\n    data: fs.readFileSync(\"image.png\"),\n    transformation: { width: 200, height: 150, rotation: 0 }, // rotation in degrees\n    altText: { title: \"Logo\", description: \"Company logo\", name: \"Name\" } // IMPORTANT: All three fields are required\n  })]\n})\n```\n\n## Page Breaks\n```javascript\n// Manual page break\nnew Paragraph({ children: [new PageBreak()] }),\n\n// Page break before paragraph\nnew Paragraph({\n  pageBreakBefore: true,\n  children: [new TextRun(\"This starts on a new page\")]\n})\n\n// ⚠️ CRITICAL: NEVER use PageBreak standalone - it will create invalid XML that Word cannot open\n// ❌ WRONG: new PageBreak() \n// ✅ CORRECT: new Paragraph({ children: [new PageBreak()] })\n```\n\n## Headers/Footers & Page Setup\n```javascript\nconst doc = new Document({\n  sections: [{\n    properties: {\n      page: {\n        margin: { top: 1440, right: 1440, bottom: 1440, left: 1440 }, // 1440 = 1 inch\n        size: { orientation: PageOrientation.LANDSCAPE },\n        pageNumbers: { start: 1, formatType: \"decimal\" } // \"upperRoman\", \"lowerRoman\", \"upperLetter\", \"lowerLetter\"\n      }\n    },\n    headers: {\n      default: new Header({ children: [new Paragraph({ \n        alignment: AlignmentType.RIGHT,\n        children: [new TextRun(\"Header Text\")]\n      })] })\n    },\n    footers: {\n      default: new Footer({ children: [new Paragraph({ \n        alignment: AlignmentType.CENTER,\n        children: [new TextRun(\"Page \"), new TextRun({ children: [PageNumber.CURRENT] }), new TextRun(\" of \"), new TextRun({ children: [PageNumber.TOTAL_PAGES] })]\n      })] })\n    },\n    children: [/* content */]\n  }]\n});\n```\n\n## Tabs\n```javascript\nnew Paragraph({\n  tabStops: [\n    { type: TabStopType.LEFT, position: TabStopPosition.MAX / 4 },\n    { type: TabStopType.CENTER, position: TabStopPosition.MAX / 2 },\n    { type: TabStopType.RIGHT, position: TabStopPosition.MAX * 3 / 4 }\n  ],\n  children: [new TextRun(\"Left\\tCenter\\tRight\")]\n})\n```\n\n## Constants & Quick Reference\n- **Underlines:** `SINGLE`, `DOUBLE`, `WAVY`, `DASH`\n- **Borders:** `SINGLE`, `DOUBLE`, `DASHED`, `DOTTED`  \n- **Numbering:** `DECIMAL` (1,2,3), `UPPER_ROMAN` (I,II,III), `LOWER_LETTER` (a,b,c)\n- **Tabs:** `LEFT`, `CENTER`, `RIGHT`, `DECIMAL`\n- **Symbols:** `\"2022\"` (•), `\"00A9\"` (©), `\"00AE\"` (®), `\"2122\"` (™), `\"00B0\"` (°), `\"F070\"` (✓), `\"F0FC\"` (✗)\n\n## Critical Issues & Common Mistakes\n- **CRITICAL: PageBreak must ALWAYS be inside a Paragraph** - standalone PageBreak creates invalid XML that Word cannot open\n- **ALWAYS use ShadingType.CLEAR for table cell shading** - Never use ShadingType.SOLID (causes black background).\n- Measurements in DXA (1440 = 1 inch) | Each table cell needs ≥1 Paragraph | TOC requires HeadingLevel styles only\n- **ALWAYS use custom styles** with Arial font for professional appearance and proper visual hierarchy\n- **ALWAYS set a default font** using `styles.default.document.run.font` - Arial recommended\n- **ALWAYS use columnWidths array for tables** + individual cell widths for compatibility\n- **NEVER use unicode symbols for bullets** - always use proper numbering configuration with `LevelFormat.BULLET` constant (NOT the string \"bullet\")\n- **NEVER use \\n for line breaks anywhere** - always use separate Paragraph elements for each line\n- **ALWAYS use TextRun objects within Paragraph children** - never use text property directly on Paragraph\n- **CRITICAL for images**: ImageRun REQUIRES `type` parameter - always specify \"png\", \"jpg\", \"jpeg\", \"gif\", \"bmp\", or \"svg\"\n- **CRITICAL for bullets**: Must use `LevelFormat.BULLET` constant, not string \"bullet\", and include `text: \"•\"` for the bullet character\n- **CRITICAL for numbering**: Each numbering reference creates an INDEPENDENT list. Same reference = continues numbering (1,2,3 then 4,5,6). Different reference = restarts at 1 (1,2,3 then 1,2,3). Use unique reference names for each separate numbered section!\n- **CRITICAL for TOC**: When using TableOfContents, headings must use HeadingLevel ONLY - do NOT add custom styles to heading paragraphs or TOC will break\n- **Tables**: Set `columnWidths` array + individual cell widths, apply borders to cells not table\n- **Set table margins at TABLE level** for consistent cell padding (avoids repetition per cell)",
        "skills/docx/ooxml.md": "# Office Open XML Technical Reference\n\n**Important: Read this entire document before starting.** This document covers:\n- [Technical Guidelines](#technical-guidelines) - Schema compliance rules and validation requirements\n- [Document Content Patterns](#document-content-patterns) - XML patterns for headings, lists, tables, formatting, etc.\n- [Document Library (Python)](#document-library-python) - Recommended approach for OOXML manipulation with automatic infrastructure setup\n- [Tracked Changes (Redlining)](#tracked-changes-redlining) - XML patterns for implementing tracked changes\n\n## Technical Guidelines\n\n### Schema Compliance\n- **Element ordering in `<w:pPr>`**: `<w:pStyle>`, `<w:numPr>`, `<w:spacing>`, `<w:ind>`, `<w:jc>`\n- **Whitespace**: Add `xml:space='preserve'` to `<w:t>` elements with leading/trailing spaces\n- **Unicode**: Escape characters in ASCII content: `\"` becomes `&#8220;`\n  - **Character encoding reference**: Curly quotes `\"\"` become `&#8220;&#8221;`, apostrophe `'` becomes `&#8217;`, em-dash `—` becomes `&#8212;`\n- **Tracked changes**: Use `<w:del>` and `<w:ins>` tags with `w:author=\"Claude\"` outside `<w:r>` elements\n  - **Critical**: `<w:ins>` closes with `</w:ins>`, `<w:del>` closes with `</w:del>` - never mix\n  - **RSIDs must be 8-digit hex**: Use values like `00AB1234` (only 0-9, A-F characters)\n  - **trackRevisions placement**: Add `<w:trackRevisions/>` after `<w:proofState>` in settings.xml\n- **Images**: Add to `word/media/`, reference in `document.xml`, set dimensions to prevent overflow\n\n## Document Content Patterns\n\n### Basic Structure\n```xml\n<w:p>\n  <w:r><w:t>Text content</w:t></w:r>\n</w:p>\n```\n\n### Headings and Styles\n```xml\n<w:p>\n  <w:pPr>\n    <w:pStyle w:val=\"Title\"/>\n    <w:jc w:val=\"center\"/>\n  </w:pPr>\n  <w:r><w:t>Document Title</w:t></w:r>\n</w:p>\n\n<w:p>\n  <w:pPr><w:pStyle w:val=\"Heading2\"/></w:pPr>\n  <w:r><w:t>Section Heading</w:t></w:r>\n</w:p>\n```\n\n### Text Formatting\n```xml\n<!-- Bold -->\n<w:r><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Bold</w:t></w:r>\n<!-- Italic -->\n<w:r><w:rPr><w:i/><w:iCs/></w:rPr><w:t>Italic</w:t></w:r>\n<!-- Underline -->\n<w:r><w:rPr><w:u w:val=\"single\"/></w:rPr><w:t>Underlined</w:t></w:r>\n<!-- Highlight -->\n<w:r><w:rPr><w:highlight w:val=\"yellow\"/></w:rPr><w:t>Highlighted</w:t></w:r>\n```\n\n### Lists\n```xml\n<!-- Numbered list -->\n<w:p>\n  <w:pPr>\n    <w:pStyle w:val=\"ListParagraph\"/>\n    <w:numPr><w:ilvl w:val=\"0\"/><w:numId w:val=\"1\"/></w:numPr>\n    <w:spacing w:before=\"240\"/>\n  </w:pPr>\n  <w:r><w:t>First item</w:t></w:r>\n</w:p>\n\n<!-- Restart numbered list at 1 - use different numId -->\n<w:p>\n  <w:pPr>\n    <w:pStyle w:val=\"ListParagraph\"/>\n    <w:numPr><w:ilvl w:val=\"0\"/><w:numId w:val=\"2\"/></w:numPr>\n    <w:spacing w:before=\"240\"/>\n  </w:pPr>\n  <w:r><w:t>New list item 1</w:t></w:r>\n</w:p>\n\n<!-- Bullet list (level 2) -->\n<w:p>\n  <w:pPr>\n    <w:pStyle w:val=\"ListParagraph\"/>\n    <w:numPr><w:ilvl w:val=\"1\"/><w:numId w:val=\"1\"/></w:numPr>\n    <w:spacing w:before=\"240\"/>\n    <w:ind w:left=\"900\"/>\n  </w:pPr>\n  <w:r><w:t>Bullet item</w:t></w:r>\n</w:p>\n```\n\n### Tables\n```xml\n<w:tbl>\n  <w:tblPr>\n    <w:tblStyle w:val=\"TableGrid\"/>\n    <w:tblW w:w=\"0\" w:type=\"auto\"/>\n  </w:tblPr>\n  <w:tblGrid>\n    <w:gridCol w:w=\"4675\"/><w:gridCol w:w=\"4675\"/>\n  </w:tblGrid>\n  <w:tr>\n    <w:tc>\n      <w:tcPr><w:tcW w:w=\"4675\" w:type=\"dxa\"/></w:tcPr>\n      <w:p><w:r><w:t>Cell 1</w:t></w:r></w:p>\n    </w:tc>\n    <w:tc>\n      <w:tcPr><w:tcW w:w=\"4675\" w:type=\"dxa\"/></w:tcPr>\n      <w:p><w:r><w:t>Cell 2</w:t></w:r></w:p>\n    </w:tc>\n  </w:tr>\n</w:tbl>\n```\n\n### Layout\n```xml\n<!-- Page break before new section (common pattern) -->\n<w:p>\n  <w:r>\n    <w:br w:type=\"page\"/>\n  </w:r>\n</w:p>\n<w:p>\n  <w:pPr>\n    <w:pStyle w:val=\"Heading1\"/>\n  </w:pPr>\n  <w:r>\n    <w:t>New Section Title</w:t>\n  </w:r>\n</w:p>\n\n<!-- Centered paragraph -->\n<w:p>\n  <w:pPr>\n    <w:spacing w:before=\"240\" w:after=\"0\"/>\n    <w:jc w:val=\"center\"/>\n  </w:pPr>\n  <w:r><w:t>Centered text</w:t></w:r>\n</w:p>\n\n<!-- Font change - paragraph level (applies to all runs) -->\n<w:p>\n  <w:pPr>\n    <w:rPr><w:rFonts w:ascii=\"Courier New\" w:hAnsi=\"Courier New\"/></w:rPr>\n  </w:pPr>\n  <w:r><w:t>Monospace text</w:t></w:r>\n</w:p>\n\n<!-- Font change - run level (specific to this text) -->\n<w:p>\n  <w:r>\n    <w:rPr><w:rFonts w:ascii=\"Courier New\" w:hAnsi=\"Courier New\"/></w:rPr>\n    <w:t>This text is Courier New</w:t>\n  </w:r>\n  <w:r><w:t> and this text uses default font</w:t></w:r>\n</w:p>\n```\n\n## File Updates\n\nWhen adding content, update these files:\n\n**`word/_rels/document.xml.rels`:**\n```xml\n<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering\" Target=\"numbering.xml\"/>\n<Relationship Id=\"rId5\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image\" Target=\"media/image1.png\"/>\n```\n\n**`[Content_Types].xml`:**\n```xml\n<Default Extension=\"png\" ContentType=\"image/png\"/>\n<Override PartName=\"/word/numbering.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml\"/>\n```\n\n### Images\n**CRITICAL**: Calculate dimensions to prevent page overflow and maintain aspect ratio.\n\n```xml\n<!-- Minimal required structure -->\n<w:p>\n  <w:r>\n    <w:drawing>\n      <wp:inline>\n        <wp:extent cx=\"2743200\" cy=\"1828800\"/>\n        <wp:docPr id=\"1\" name=\"Picture 1\"/>\n        <a:graphic xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\">\n          <a:graphicData uri=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">\n            <pic:pic xmlns:pic=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">\n              <pic:nvPicPr>\n                <pic:cNvPr id=\"0\" name=\"image1.png\"/>\n                <pic:cNvPicPr/>\n              </pic:nvPicPr>\n              <pic:blipFill>\n                <a:blip r:embed=\"rId5\"/>\n                <!-- Add for stretch fill with aspect ratio preservation -->\n                <a:stretch>\n                  <a:fillRect/>\n                </a:stretch>\n              </pic:blipFill>\n              <pic:spPr>\n                <a:xfrm>\n                  <a:ext cx=\"2743200\" cy=\"1828800\"/>\n                </a:xfrm>\n                <a:prstGeom prst=\"rect\"/>\n              </pic:spPr>\n            </pic:pic>\n          </a:graphicData>\n        </a:graphic>\n      </wp:inline>\n    </w:drawing>\n  </w:r>\n</w:p>\n```\n\n### Links (Hyperlinks)\n\n**IMPORTANT**: All hyperlinks (both internal and external) require the Hyperlink style to be defined in styles.xml. Without this style, links will look like regular text instead of blue underlined clickable links.\n\n**External Links:**\n```xml\n<!-- In document.xml -->\n<w:hyperlink r:id=\"rId5\">\n  <w:r>\n    <w:rPr><w:rStyle w:val=\"Hyperlink\"/></w:rPr>\n    <w:t>Link Text</w:t>\n  </w:r>\n</w:hyperlink>\n\n<!-- In word/_rels/document.xml.rels -->\n<Relationship Id=\"rId5\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink\" \n              Target=\"https://www.example.com/\" TargetMode=\"External\"/>\n```\n\n**Internal Links:**\n\n```xml\n<!-- Link to bookmark -->\n<w:hyperlink w:anchor=\"myBookmark\">\n  <w:r>\n    <w:rPr><w:rStyle w:val=\"Hyperlink\"/></w:rPr>\n    <w:t>Link Text</w:t>\n  </w:r>\n</w:hyperlink>\n\n<!-- Bookmark target -->\n<w:bookmarkStart w:id=\"0\" w:name=\"myBookmark\"/>\n<w:r><w:t>Target content</w:t></w:r>\n<w:bookmarkEnd w:id=\"0\"/>\n```\n\n**Hyperlink Style (required in styles.xml):**\n```xml\n<w:style w:type=\"character\" w:styleId=\"Hyperlink\">\n  <w:name w:val=\"Hyperlink\"/>\n  <w:basedOn w:val=\"DefaultParagraphFont\"/>\n  <w:uiPriority w:val=\"99\"/>\n  <w:unhideWhenUsed/>\n  <w:rPr>\n    <w:color w:val=\"467886\" w:themeColor=\"hyperlink\"/>\n    <w:u w:val=\"single\"/>\n  </w:rPr>\n</w:style>\n```\n\n## Document Library (Python)\n\nUse the Document class from `scripts/document.py` for all tracked changes and comments. It automatically handles infrastructure setup (people.xml, RSIDs, settings.xml, comment files, relationships, content types). Only use direct XML manipulation for complex scenarios not supported by the library.\n\n**Working with Unicode and Entities:**\n- **Searching**: Both entity notation and Unicode characters work - `contains=\"&#8220;Company\"` and `contains=\"\\u201cCompany\"` find the same text\n- **Replacing**: Use either entities (`&#8220;`) or Unicode (`\\u201c`) - both work and will be converted appropriately based on the file's encoding (ascii → entities, utf-8 → Unicode)\n\n### Initialization\n\n**Find the docx skill root** (directory containing `scripts/` and `ooxml/`):\n```bash\n# Search for document.py to locate the skill root\n# Note: /mnt/skills is used here as an example; check your context for the actual location\nfind /mnt/skills -name \"document.py\" -path \"*/docx/scripts/*\" 2>/dev/null | head -1\n# Example output: /mnt/skills/docx/scripts/document.py\n# Skill root is: /mnt/skills/docx\n```\n\n**Run your script with PYTHONPATH** set to the docx skill root:\n```bash\nPYTHONPATH=/mnt/skills/docx python your_script.py\n```\n\n**In your script**, import from the skill root:\n```python\nfrom scripts.document import Document, DocxXMLEditor\n\n# Basic initialization (automatically creates temp copy and sets up infrastructure)\ndoc = Document('unpacked')\n\n# Customize author and initials\ndoc = Document('unpacked', author=\"John Doe\", initials=\"JD\")\n\n# Enable track revisions mode\ndoc = Document('unpacked', track_revisions=True)\n\n# Specify custom RSID (auto-generated if not provided)\ndoc = Document('unpacked', rsid=\"07DC5ECB\")\n```\n\n### Creating Tracked Changes\n\n**CRITICAL**: Only mark text that actually changes. Keep ALL unchanged text outside `<w:del>`/`<w:ins>` tags. Marking unchanged text makes edits unprofessional and harder to review.\n\n**Attribute Handling**: The Document class auto-injects attributes (w:id, w:date, w:rsidR, w:rsidDel, w16du:dateUtc, xml:space) into new elements. When preserving unchanged text from the original document, copy the original `<w:r>` element with its existing attributes to maintain document integrity.\n\n**Method Selection Guide**:\n- **Adding your own changes to regular text**: Use `replace_node()` with `<w:del>`/`<w:ins>` tags, or `suggest_deletion()` for removing entire `<w:r>` or `<w:p>` elements\n- **Partially modifying another author's tracked change**: Use `replace_node()` to nest your changes inside their `<w:ins>`/`<w:del>`\n- **Completely rejecting another author's insertion**: Use `revert_insertion()` on the `<w:ins>` element (NOT `suggest_deletion()`)\n- **Completely rejecting another author's deletion**: Use `revert_deletion()` on the `<w:del>` element to restore deleted content using tracked changes\n\n```python\n# Minimal edit - change one word: \"The report is monthly\" → \"The report is quarterly\"\n# Original: <w:r w:rsidR=\"00AB12CD\"><w:rPr><w:rFonts w:ascii=\"Calibri\"/></w:rPr><w:t>The report is monthly</w:t></w:r>\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"The report is monthly\")\nrpr = tags[0].toxml() if (tags := node.getElementsByTagName(\"w:rPr\")) else \"\"\nreplacement = f'<w:r w:rsidR=\"00AB12CD\">{rpr}<w:t>The report is </w:t></w:r><w:del><w:r>{rpr}<w:delText>monthly</w:delText></w:r></w:del><w:ins><w:r>{rpr}<w:t>quarterly</w:t></w:r></w:ins>'\ndoc[\"word/document.xml\"].replace_node(node, replacement)\n\n# Minimal edit - change number: \"within 30 days\" → \"within 45 days\"\n# Original: <w:r w:rsidR=\"00XYZ789\"><w:rPr><w:rFonts w:ascii=\"Calibri\"/></w:rPr><w:t>within 30 days</w:t></w:r>\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"within 30 days\")\nrpr = tags[0].toxml() if (tags := node.getElementsByTagName(\"w:rPr\")) else \"\"\nreplacement = f'<w:r w:rsidR=\"00XYZ789\">{rpr}<w:t>within </w:t></w:r><w:del><w:r>{rpr}<w:delText>30</w:delText></w:r></w:del><w:ins><w:r>{rpr}<w:t>45</w:t></w:r></w:ins><w:r w:rsidR=\"00XYZ789\">{rpr}<w:t> days</w:t></w:r>'\ndoc[\"word/document.xml\"].replace_node(node, replacement)\n\n# Complete replacement - preserve formatting even when replacing all text\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"apple\")\nrpr = tags[0].toxml() if (tags := node.getElementsByTagName(\"w:rPr\")) else \"\"\nreplacement = f'<w:del><w:r>{rpr}<w:delText>apple</w:delText></w:r></w:del><w:ins><w:r>{rpr}<w:t>banana orange</w:t></w:r></w:ins>'\ndoc[\"word/document.xml\"].replace_node(node, replacement)\n\n# Insert new content (no attributes needed - auto-injected)\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"existing text\")\ndoc[\"word/document.xml\"].insert_after(node, '<w:ins><w:r><w:t>new text</w:t></w:r></w:ins>')\n\n# Partially delete another author's insertion\n# Original: <w:ins w:author=\"Jane Smith\" w:date=\"...\"><w:r><w:t>quarterly financial report</w:t></w:r></w:ins>\n# Goal: Delete only \"financial\" to make it \"quarterly report\"\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:ins\", attrs={\"w:id\": \"5\"})\n# IMPORTANT: Preserve w:author=\"Jane Smith\" on the outer <w:ins> to maintain authorship\nreplacement = '''<w:ins w:author=\"Jane Smith\" w:date=\"2025-01-15T10:00:00Z\">\n  <w:r><w:t>quarterly </w:t></w:r>\n  <w:del><w:r><w:delText>financial </w:delText></w:r></w:del>\n  <w:r><w:t>report</w:t></w:r>\n</w:ins>'''\ndoc[\"word/document.xml\"].replace_node(node, replacement)\n\n# Change part of another author's insertion\n# Original: <w:ins w:author=\"Jane Smith\"><w:r><w:t>in silence, safe and sound</w:t></w:r></w:ins>\n# Goal: Change \"safe and sound\" to \"soft and unbound\"\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:ins\", attrs={\"w:id\": \"8\"})\nreplacement = f'''<w:ins w:author=\"Jane Smith\" w:date=\"2025-01-15T10:00:00Z\">\n  <w:r><w:t>in silence, </w:t></w:r>\n</w:ins>\n<w:ins>\n  <w:r><w:t>soft and unbound</w:t></w:r>\n</w:ins>\n<w:ins w:author=\"Jane Smith\" w:date=\"2025-01-15T10:00:00Z\">\n  <w:del><w:r><w:delText>safe and sound</w:delText></w:r></w:del>\n</w:ins>'''\ndoc[\"word/document.xml\"].replace_node(node, replacement)\n\n# Delete entire run (use only when deleting all content; use replace_node for partial deletions)\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"text to delete\")\ndoc[\"word/document.xml\"].suggest_deletion(node)\n\n# Delete entire paragraph (in-place, handles both regular and numbered list paragraphs)\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"paragraph to delete\")\ndoc[\"word/document.xml\"].suggest_deletion(para)\n\n# Add new numbered list item\ntarget_para = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"existing list item\")\npPr = tags[0].toxml() if (tags := target_para.getElementsByTagName(\"w:pPr\")) else \"\"\nnew_item = f'<w:p>{pPr}<w:r><w:t>New item</w:t></w:r></w:p>'\ntracked_para = DocxXMLEditor.suggest_paragraph(new_item)\ndoc[\"word/document.xml\"].insert_after(target_para, tracked_para)\n# Optional: add spacing paragraph before content for better visual separation\n# spacing = DocxXMLEditor.suggest_paragraph('<w:p><w:pPr><w:pStyle w:val=\"ListParagraph\"/></w:pPr></w:p>')\n# doc[\"word/document.xml\"].insert_after(target_para, spacing + tracked_para)\n```\n\n### Adding Comments\n\n```python\n# Add comment spanning two existing tracked changes\n# Note: w:id is auto-generated. Only search by w:id if you know it from XML inspection\nstart_node = doc[\"word/document.xml\"].get_node(tag=\"w:del\", attrs={\"w:id\": \"1\"})\nend_node = doc[\"word/document.xml\"].get_node(tag=\"w:ins\", attrs={\"w:id\": \"2\"})\ndoc.add_comment(start=start_node, end=end_node, text=\"Explanation of this change\")\n\n# Add comment on a paragraph\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"paragraph text\")\ndoc.add_comment(start=para, end=para, text=\"Comment on this paragraph\")\n\n# Add comment on newly created tracked change\n# First create the tracked change\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"old\")\nnew_nodes = doc[\"word/document.xml\"].replace_node(\n    node,\n    '<w:del><w:r><w:delText>old</w:delText></w:r></w:del><w:ins><w:r><w:t>new</w:t></w:r></w:ins>'\n)\n# Then add comment on the newly created elements\n# new_nodes[0] is the <w:del>, new_nodes[1] is the <w:ins>\ndoc.add_comment(start=new_nodes[0], end=new_nodes[1], text=\"Changed old to new per requirements\")\n\n# Reply to existing comment\ndoc.reply_to_comment(parent_comment_id=0, text=\"I agree with this change\")\n```\n\n### Rejecting Tracked Changes\n\n**IMPORTANT**: Use `revert_insertion()` to reject insertions and `revert_deletion()` to restore deletions using tracked changes. Use `suggest_deletion()` only for regular unmarked content.\n\n```python\n# Reject insertion (wraps it in deletion)\n# Use this when another author inserted text that you want to delete\nins = doc[\"word/document.xml\"].get_node(tag=\"w:ins\", attrs={\"w:id\": \"5\"})\nnodes = doc[\"word/document.xml\"].revert_insertion(ins)  # Returns [ins]\n\n# Reject deletion (creates insertion to restore deleted content)\n# Use this when another author deleted text that you want to restore\ndel_elem = doc[\"word/document.xml\"].get_node(tag=\"w:del\", attrs={\"w:id\": \"3\"})\nnodes = doc[\"word/document.xml\"].revert_deletion(del_elem)  # Returns [del_elem, new_ins]\n\n# Reject all insertions in a paragraph\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"paragraph text\")\nnodes = doc[\"word/document.xml\"].revert_insertion(para)  # Returns [para]\n\n# Reject all deletions in a paragraph\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"paragraph text\")\nnodes = doc[\"word/document.xml\"].revert_deletion(para)  # Returns [para]\n```\n\n### Inserting Images\n\n**CRITICAL**: The Document class works with a temporary copy at `doc.unpacked_path`. Always copy images to this temp directory, not the original unpacked folder.\n\n```python\nfrom PIL import Image\nimport shutil, os\n\n# Initialize document first\ndoc = Document('unpacked')\n\n# Copy image and calculate full-width dimensions with aspect ratio\nmedia_dir = os.path.join(doc.unpacked_path, 'word/media')\nos.makedirs(media_dir, exist_ok=True)\nshutil.copy('image.png', os.path.join(media_dir, 'image1.png'))\nimg = Image.open(os.path.join(media_dir, 'image1.png'))\nwidth_emus = int(6.5 * 914400)  # 6.5\" usable width, 914400 EMUs/inch\nheight_emus = int(width_emus * img.size[1] / img.size[0])\n\n# Add relationship and content type\nrels_editor = doc['word/_rels/document.xml.rels']\nnext_rid = rels_editor.get_next_rid()\nrels_editor.append_to(rels_editor.dom.documentElement,\n    f'<Relationship Id=\"{next_rid}\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image\" Target=\"media/image1.png\"/>')\ndoc['[Content_Types].xml'].append_to(doc['[Content_Types].xml'].dom.documentElement,\n    '<Default Extension=\"png\" ContentType=\"image/png\"/>')\n\n# Insert image\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:p\", line_number=100)\ndoc[\"word/document.xml\"].insert_after(node, f'''<w:p>\n  <w:r>\n    <w:drawing>\n      <wp:inline distT=\"0\" distB=\"0\" distL=\"0\" distR=\"0\">\n        <wp:extent cx=\"{width_emus}\" cy=\"{height_emus}\"/>\n        <wp:docPr id=\"1\" name=\"Picture 1\"/>\n        <a:graphic xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\">\n          <a:graphicData uri=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">\n            <pic:pic xmlns:pic=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">\n              <pic:nvPicPr><pic:cNvPr id=\"1\" name=\"image1.png\"/><pic:cNvPicPr/></pic:nvPicPr>\n              <pic:blipFill><a:blip r:embed=\"{next_rid}\"/><a:stretch><a:fillRect/></a:stretch></pic:blipFill>\n              <pic:spPr><a:xfrm><a:ext cx=\"{width_emus}\" cy=\"{height_emus}\"/></a:xfrm><a:prstGeom prst=\"rect\"><a:avLst/></a:prstGeom></pic:spPr>\n            </pic:pic>\n          </a:graphicData>\n        </a:graphic>\n      </wp:inline>\n    </w:drawing>\n  </w:r>\n</w:p>''')\n```\n\n### Getting Nodes\n\n```python\n# By text content\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"specific text\")\n\n# By line range\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", line_number=range(100, 150))\n\n# By attributes\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:del\", attrs={\"w:id\": \"1\"})\n\n# By exact line number (must be line number where tag opens)\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", line_number=42)\n\n# Combine filters\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", line_number=range(40, 60), contains=\"text\")\n\n# Disambiguate when text appears multiple times - add line_number range\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"Section\", line_number=range(2400, 2500))\n```\n\n### Saving\n\n```python\n# Save with automatic validation (copies back to original directory)\ndoc.save()  # Validates by default, raises error if validation fails\n\n# Save to different location\ndoc.save('modified-unpacked')\n\n# Skip validation (debugging only - needing this in production indicates XML issues)\ndoc.save(validate=False)\n```\n\n### Direct DOM Manipulation\n\nFor complex scenarios not covered by the library:\n\n```python\n# Access any XML file\neditor = doc[\"word/document.xml\"]\neditor = doc[\"word/comments.xml\"]\n\n# Direct DOM access (defusedxml.minidom.Document)\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:p\", line_number=5)\nparent = node.parentNode\nparent.removeChild(node)\nparent.appendChild(node)  # Move to end\n\n# General document manipulation (without tracked changes)\nold_node = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"original text\")\ndoc[\"word/document.xml\"].replace_node(old_node, \"<w:p><w:r><w:t>replacement text</w:t></w:r></w:p>\")\n\n# Multiple insertions - use return value to maintain order\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", line_number=100)\nnodes = doc[\"word/document.xml\"].insert_after(node, \"<w:r><w:t>A</w:t></w:r>\")\nnodes = doc[\"word/document.xml\"].insert_after(nodes[-1], \"<w:r><w:t>B</w:t></w:r>\")\nnodes = doc[\"word/document.xml\"].insert_after(nodes[-1], \"<w:r><w:t>C</w:t></w:r>\")\n# Results in: original_node, A, B, C\n```\n\n## Tracked Changes (Redlining)\n\n**Use the Document class above for all tracked changes.** The patterns below are for reference when constructing replacement XML strings.\n\n### Validation Rules\nThe validator checks that the document text matches the original after reverting Claude's changes. This means:\n- **NEVER modify text inside another author's `<w:ins>` or `<w:del>` tags**\n- **ALWAYS use nested deletions** to remove another author's insertions\n- **Every edit must be properly tracked** with `<w:ins>` or `<w:del>` tags\n\n### Tracked Change Patterns\n\n**CRITICAL RULES**:\n1. Never modify the content inside another author's tracked changes. Always use nested deletions.\n2. **XML Structure**: Always place `<w:del>` and `<w:ins>` at paragraph level containing complete `<w:r>` elements. Never nest inside `<w:r>` elements - this creates invalid XML that breaks document processing.\n\n**Text Insertion:**\n```xml\n<w:ins w:id=\"1\" w:author=\"Claude\" w:date=\"2025-07-30T23:05:00Z\" w16du:dateUtc=\"2025-07-31T06:05:00Z\">\n  <w:r w:rsidR=\"00792858\">\n    <w:t>inserted text</w:t>\n  </w:r>\n</w:ins>\n```\n\n**Text Deletion:**\n```xml\n<w:del w:id=\"2\" w:author=\"Claude\" w:date=\"2025-07-30T23:05:00Z\" w16du:dateUtc=\"2025-07-31T06:05:00Z\">\n  <w:r w:rsidDel=\"00792858\">\n    <w:delText>deleted text</w:delText>\n  </w:r>\n</w:del>\n```\n\n**Deleting Another Author's Insertion (MUST use nested structure):**\n```xml\n<!-- Nest deletion inside the original insertion -->\n<w:ins w:author=\"Jane Smith\" w:id=\"16\">\n  <w:del w:author=\"Claude\" w:id=\"40\">\n    <w:r><w:delText>monthly</w:delText></w:r>\n  </w:del>\n</w:ins>\n<w:ins w:author=\"Claude\" w:id=\"41\">\n  <w:r><w:t>weekly</w:t></w:r>\n</w:ins>\n```\n\n**Restoring Another Author's Deletion:**\n```xml\n<!-- Leave their deletion unchanged, add new insertion after it -->\n<w:del w:author=\"Jane Smith\" w:id=\"50\">\n  <w:r><w:delText>within 30 days</w:delText></w:r>\n</w:del>\n<w:ins w:author=\"Claude\" w:id=\"51\">\n  <w:r><w:t>within 30 days</w:t></w:r>\n</w:ins>\n```",
        "skills/frontend-design/SKILL.md": "---\nname: frontend-design\ndescription: Create distinctive, production-grade frontend interfaces with high design quality. Use this skill when the user asks to build web components, pages, artifacts, posters, or applications (examples include websites, landing pages, dashboards, React components, HTML/CSS layouts, or when styling/beautifying any web UI). Generates creative, polished code and UI design that avoids generic AI aesthetics.\nlicense: Complete terms in LICENSE.txt\n---\n\nThis skill guides creation of distinctive, production-grade frontend interfaces that avoid generic \"AI slop\" aesthetics. Implement real working code with exceptional attention to aesthetic details and creative choices.\n\nThe user provides frontend requirements: a component, page, application, or interface to build. They may include context about the purpose, audience, or technical constraints.\n\n## Design Thinking\n\nBefore coding, understand the context and commit to a BOLD aesthetic direction:\n- **Purpose**: What problem does this interface solve? Who uses it?\n- **Tone**: Pick an extreme: brutally minimal, maximalist chaos, retro-futuristic, organic/natural, luxury/refined, playful/toy-like, editorial/magazine, brutalist/raw, art deco/geometric, soft/pastel, industrial/utilitarian, etc. There are so many flavors to choose from. Use these for inspiration but design one that is true to the aesthetic direction.\n- **Constraints**: Technical requirements (framework, performance, accessibility).\n- **Differentiation**: What makes this UNFORGETTABLE? What's the one thing someone will remember?\n\n**CRITICAL**: Choose a clear conceptual direction and execute it with precision. Bold maximalism and refined minimalism both work - the key is intentionality, not intensity.\n\nThen implement working code (HTML/CSS/JS, React, Vue, etc.) that is:\n- Production-grade and functional\n- Visually striking and memorable\n- Cohesive with a clear aesthetic point-of-view\n- Meticulously refined in every detail\n\n## Frontend Aesthetics Guidelines\n\nFocus on:\n- **Typography**: Choose fonts that are beautiful, unique, and interesting. Avoid generic fonts like Arial and Inter; opt instead for distinctive choices that elevate the frontend's aesthetics; unexpected, characterful font choices. Pair a distinctive display font with a refined body font.\n- **Color & Theme**: Commit to a cohesive aesthetic. Use CSS variables for consistency. Dominant colors with sharp accents outperform timid, evenly-distributed palettes.\n- **Motion**: Use animations for effects and micro-interactions. Prioritize CSS-only solutions for HTML. Use Motion library for React when available. Focus on high-impact moments: one well-orchestrated page load with staggered reveals (animation-delay) creates more delight than scattered micro-interactions. Use scroll-triggering and hover states that surprise.\n- **Spatial Composition**: Unexpected layouts. Asymmetry. Overlap. Diagonal flow. Grid-breaking elements. Generous negative space OR controlled density.\n- **Backgrounds & Visual Details**: Create atmosphere and depth rather than defaulting to solid colors. Add contextual effects and textures that match the overall aesthetic. Apply creative forms like gradient meshes, noise textures, geometric patterns, layered transparencies, dramatic shadows, decorative borders, custom cursors, and grain overlays.\n\nNEVER use generic AI-generated aesthetics like overused font families (Inter, Roboto, Arial, system fonts), cliched color schemes (particularly purple gradients on white backgrounds), predictable layouts and component patterns, and cookie-cutter design that lacks context-specific character.\n\nInterpret creatively and make unexpected choices that feel genuinely designed for the context. No design should be the same. Vary between light and dark themes, different fonts, different aesthetics. NEVER converge on common choices (Space Grotesk, for example) across generations.\n\n**IMPORTANT**: Match implementation complexity to the aesthetic vision. Maximalist designs need elaborate code with extensive animations and effects. Minimalist or refined designs need restraint, precision, and careful attention to spacing, typography, and subtle details. Elegance comes from executing the vision well.\n\nRemember: Claude is capable of extraordinary creative work. Don't hold back, show what can truly be created when thinking outside the box and committing fully to a distinctive vision.\n",
        "skills/internal-comms/SKILL.md": "---\nname: internal-comms\ndescription: A set of resources to help me write all kinds of internal communications, using the formats that my company likes to use. Claude should use this skill whenever asked to write some sort of internal communications (status reports, leadership updates, 3P updates, company newsletters, FAQs, incident reports, project updates, etc.).\nlicense: Complete terms in LICENSE.txt\n---\n\n## When to use this skill\nTo write internal communications, use this skill for:\n- 3P updates (Progress, Plans, Problems)\n- Company newsletters\n- FAQ responses\n- Status reports\n- Leadership updates\n- Project updates\n- Incident reports\n\n## How to use this skill\n\nTo write any internal communication:\n\n1. **Identify the communication type** from the request\n2. **Load the appropriate guideline file** from the `examples/` directory:\n    - `examples/3p-updates.md` - For Progress/Plans/Problems team updates\n    - `examples/company-newsletter.md` - For company-wide newsletters\n    - `examples/faq-answers.md` - For answering frequently asked questions\n    - `examples/general-comms.md` - For anything else that doesn't explicitly match one of the above\n3. **Follow the specific instructions** in that file for formatting, tone, and content gathering\n\nIf the communication type doesn't match any existing guideline, ask for clarification or more context about the desired format.\n\n## Keywords\n3P updates, company newsletter, company comms, weekly update, faqs, common questions, updates, internal comms\n",
        "skills/internal-comms/examples/3p-updates.md": "## Instructions\nYou are being asked to write a 3P update. 3P updates stand for \"Progress, Plans, Problems.\" The main audience is for executives, leadership, other teammates, etc. They're meant to be very succinct and to-the-point: think something you can read in 30-60sec or less. They're also for people with some, but not a lot of context on what the team does.\n\n3Ps can cover a team of any size, ranging all the way up to the entire company. The bigger the team, the less granular the tasks should be. For example, \"mobile team\" might have \"shipped feature\" or \"fixed bugs,\" whereas the company might have really meaty 3Ps, like \"hired 20 new people\" or \"closed 10 new deals.\" \n\nThey represent the work of the team across a time period, almost always one week. They include three sections:\n1) Progress: what the team has accomplished over the next time period. Focus mainly on things shipped, milestones achieved, tasks created, etc.\n2) Plans: what the team plans to do over the next time period. Focus on what things are top-of-mind, really high priority, etc. for the team.\n3) Problems: anything that is slowing the team down. This could be things like too few people, bugs or blockers that are preventing the team from moving forward, some deal that fell through, etc.\n\nBefore writing them, make sure that you know the team name. If it's not specified, you can ask explicitly what the team name you're writing for is.\n\n\n## Tools Available\nWhenever possible, try to pull from available sources to get the information you need:\n- Slack: posts from team members with their updates - ideally look for posts in large channels with lots of reactions\n- Google Drive: docs written from critical team members with lots of views\n- Email: emails with lots of responses of lots of content that seems relevant\n- Calendar: non-recurring meetings that have a lot of importance, like product reviews, etc.\n\n\nTry to gather as much context as you can, focusing on the things that covered the time period you're writing for:\n- Progress: anything between a week ago and today\n- Plans: anything from today to the next week\n- Problems: anything between a week ago and today\n\n\nIf you don't have access, you can ask the user for things they want to cover. They might also include these things to you directly, in which case you're mostly just formatting for this particular format.\n\n## Workflow\n\n1. **Clarify scope**: Confirm the team name and time period (usually past week for Progress/Problems, next\nweek for Plans)\n2. **Gather information**: Use available tools or ask the user directly\n3. **Draft the update**: Follow the strict formatting guidelines\n4. **Review**: Ensure it's concise (30-60 seconds to read) and data-driven\n\n## Formatting\n\nThe format is always the same, very strict formatting. Never use any formatting other than this. Pick an emoji that is fun and captures the vibe of the team and update.\n\n[pick an emoji] [Team Name] (Dates Covered, usually a week)\nProgress: [1-3 sentences of content]\nPlans: [1-3 sentences of content]\nProblems: [1-3 sentences of content]\n\nEach section should be no more than 1-3 sentences: clear, to the point. It should be data-driven, and generally include metrics where possible. The tone should be very matter-of-fact, not super prose-heavy.",
        "skills/internal-comms/examples/company-newsletter.md": "## Instructions\nYou are being asked to write a company-wide newsletter update. You are meant to summarize the past week/month of a company in the form of a newsletter that the entire company will read. It should be maybe ~20-25 bullet points long. It will be sent via Slack and email, so make it consumable for that.\n\nIdeally it includes the following attributes:\n- Lots of links: pulling documents from Google Drive that are very relevant, linking to prominent Slack messages in announce channels and from executives, perhgaps referencing emails that went company-wide, highlighting significant things that have happened in the company.\n- Short and to-the-point: each bullet should probably be no longer than ~1-2 sentences\n- Use the \"we\" tense, as you are part of the company. Many of the bullets should say \"we did this\" or \"we did that\"\n\n## Tools to use\nIf you have access to the following tools, please try to use them. If not, you can also let the user know directly that their responses would be better if they gave them access.\n\n- Slack: look for messages in channels with lots of people, with lots of reactions or lots of responses within the thread\n- Email: look for things from executives that discuss company-wide announcements\n- Calendar: if there were meetings with large attendee lists, particularly things like All-Hands meetings, big company announcements, etc. If there were documents attached to those meetings, those are great links to include.\n- Documents: if there were new docs published in the last week or two that got a lot of attention, you can link them. These should be things like company-wide vision docs, plans for the upcoming quarter or half, things authored by critical executives, etc.\n- External press: if you see references to articles or press we've received over the past week, that could be really cool too.\n\nIf you don't have access to any of these things, you can ask the user for things they want to cover. In this case, you'll mostly just be polishing up and fitting to this format more directly.\n\n## Sections\nThe company is pretty big: 1000+ people. There are a variety of different teams and initiatives going on across the company. To make sure the update works well, try breaking it into sections of similar things. You might break into clusters like {product development, go to market, finance} or {recruiting, execution, vision}, or {external news, internal news} etc. Try to make sure the different areas of the company are highlighted well.\n\n## Prioritization\nFocus on:\n- Company-wide impact (not team-specific details)\n- Announcements from leadership\n- Major milestones and achievements\n- Information that affects most employees\n- External recognition or press\n\nAvoid:\n- Overly granular team updates (save those for 3Ps)\n- Information only relevant to small groups\n- Duplicate information already communicated\n\n## Example Formats\n\n:megaphone: Company Announcements\n- Announcement 1\n- Announcement 2\n- Announcement 3\n\n:dart: Progress on Priorities\n- Area 1\n    - Sub-area 1\n    - Sub-area 2\n    - Sub-area 3\n- Area 2\n    - Sub-area 1\n    - Sub-area 2\n    - Sub-area 3\n- Area 3\n    - Sub-area 1\n    - Sub-area 2\n    - Sub-area 3\n\n:pillar: Leadership Updates\n- Post 1\n- Post 2\n- Post 3\n\n:thread: Social Updates\n- Update 1\n- Update 2\n- Update 3\n",
        "skills/internal-comms/examples/faq-answers.md": "## Instructions\nYou are an assistant for answering questions that are being asked across the company. Every week, there are lots of questions that get asked across the company, and your goal is to try to summarize what those questions are. We want our company to be well-informed and on the same page, so your job is to produce a set of frequently asked questions that our employees are asking and attempt to answer them. Your singular job is to do two things:\n\n- Find questions that are big sources of confusion for lots of employees at the company, generally about things that affect a large portion of the employee base\n- Attempt to give a nice summarized answer to that question in order to minimize confusion.\n\nSome examples of areas that may be interesting to folks: recent corporate events (fundraising, new executives, etc.), upcoming launches, hiring progress, changes to vision or focus, etc.\n\n\n## Tools Available\nYou should use the company's available tools, where communication and work happens. For most companies, it looks something like this:\n- Slack: questions being asked across the company - it could be questions in response to posts with lots of responses, questions being asked with lots of reactions or thumbs up to show support, or anything else to show that a large number of employees want to ask the same things\n- Email: emails with FAQs written directly in them can be a good source as well\n- Documents: docs in places like Google Drive, linked on calendar events, etc. can also be a good source of FAQs, either directly added or inferred based on the contents of the doc\n\n## Formatting\nThe formatting should be pretty basic:\n\n- *Question*: [insert question - 1 sentence]\n- *Answer*: [insert answer - 1-2 sentence]\n\n## Guidance\nMake sure you're being holistic in your questions. Don't focus too much on just the user in question or the team they are a part of, but try to capture the entire company. Try to be as holistic as you can in reading all the tools available, producing responses that are relevant to all at the company.\n\n## Answer Guidelines\n- Base answers on official company communications when possible\n- If information is uncertain, indicate that clearly\n- Link to authoritative sources (docs, announcements, emails)\n- Keep tone professional but approachable\n- Flag if a question requires executive input or official response",
        "skills/internal-comms/examples/general-comms.md": "  ## Instructions\n  You are being asked to write internal company communication that doesn't fit into the standard formats (3P\n  updates, newsletters, or FAQs).\n\n  Before proceeding:\n  1. Ask the user about their target audience\n  2. Understand the communication's purpose\n  3. Clarify the desired tone (formal, casual, urgent, informational)\n  4. Confirm any specific formatting requirements\n\n  Use these general principles:\n  - Be clear and concise\n  - Use active voice\n  - Put the most important information first\n  - Include relevant links and references\n  - Match the company's communication style",
        "skills/mcp-builder/SKILL.md": "---\nname: mcp-builder\ndescription: Guide for creating high-quality MCP (Model Context Protocol) servers that enable LLMs to interact with external services through well-designed tools. Use when building MCP servers to integrate external APIs or services, whether in Python (FastMCP) or Node/TypeScript (MCP SDK).\nlicense: Complete terms in LICENSE.txt\n---\n\n# MCP Server Development Guide\n\n## Overview\n\nCreate MCP (Model Context Protocol) servers that enable LLMs to interact with external services through well-designed tools. The quality of an MCP server is measured by how well it enables LLMs to accomplish real-world tasks.\n\n---\n\n# Process\n\n## 🚀 High-Level Workflow\n\nCreating a high-quality MCP server involves four main phases:\n\n### Phase 1: Deep Research and Planning\n\n#### 1.1 Understand Modern MCP Design\n\n**API Coverage vs. Workflow Tools:**\nBalance comprehensive API endpoint coverage with specialized workflow tools. Workflow tools can be more convenient for specific tasks, while comprehensive coverage gives agents flexibility to compose operations. Performance varies by client—some clients benefit from code execution that combines basic tools, while others work better with higher-level workflows. When uncertain, prioritize comprehensive API coverage.\n\n**Tool Naming and Discoverability:**\nClear, descriptive tool names help agents find the right tools quickly. Use consistent prefixes (e.g., `github_create_issue`, `github_list_repos`) and action-oriented naming.\n\n**Context Management:**\nAgents benefit from concise tool descriptions and the ability to filter/paginate results. Design tools that return focused, relevant data. Some clients support code execution which can help agents filter and process data efficiently.\n\n**Actionable Error Messages:**\nError messages should guide agents toward solutions with specific suggestions and next steps.\n\n#### 1.2 Study MCP Protocol Documentation\n\n**Navigate the MCP specification:**\n\nStart with the sitemap to find relevant pages: `https://modelcontextprotocol.io/sitemap.xml`\n\nThen fetch specific pages with `.md` suffix for markdown format (e.g., `https://modelcontextprotocol.io/specification/draft.md`).\n\nKey pages to review:\n- Specification overview and architecture\n- Transport mechanisms (streamable HTTP, stdio)\n- Tool, resource, and prompt definitions\n\n#### 1.3 Study Framework Documentation\n\n**Recommended stack:**\n- **Language**: TypeScript (high-quality SDK support and good compatibility in many execution environments e.g. MCPB. Plus AI models are good at generating TypeScript code, benefiting from its broad usage, static typing and good linting tools)\n- **Transport**: Streamable HTTP for remote servers, using stateless JSON (simpler to scale and maintain, as opposed to stateful sessions and streaming responses). stdio for local servers.\n\n**Load framework documentation:**\n\n- **MCP Best Practices**: [📋 View Best Practices](./reference/mcp_best_practices.md) - Core guidelines\n\n**For TypeScript (recommended):**\n- **TypeScript SDK**: Use WebFetch to load `https://raw.githubusercontent.com/modelcontextprotocol/typescript-sdk/main/README.md`\n- [⚡ TypeScript Guide](./reference/node_mcp_server.md) - TypeScript patterns and examples\n\n**For Python:**\n- **Python SDK**: Use WebFetch to load `https://raw.githubusercontent.com/modelcontextprotocol/python-sdk/main/README.md`\n- [🐍 Python Guide](./reference/python_mcp_server.md) - Python patterns and examples\n\n#### 1.4 Plan Your Implementation\n\n**Understand the API:**\nReview the service's API documentation to identify key endpoints, authentication requirements, and data models. Use web search and WebFetch as needed.\n\n**Tool Selection:**\nPrioritize comprehensive API coverage. List endpoints to implement, starting with the most common operations.\n\n---\n\n### Phase 2: Implementation\n\n#### 2.1 Set Up Project Structure\n\nSee language-specific guides for project setup:\n- [⚡ TypeScript Guide](./reference/node_mcp_server.md) - Project structure, package.json, tsconfig.json\n- [🐍 Python Guide](./reference/python_mcp_server.md) - Module organization, dependencies\n\n#### 2.2 Implement Core Infrastructure\n\nCreate shared utilities:\n- API client with authentication\n- Error handling helpers\n- Response formatting (JSON/Markdown)\n- Pagination support\n\n#### 2.3 Implement Tools\n\nFor each tool:\n\n**Input Schema:**\n- Use Zod (TypeScript) or Pydantic (Python)\n- Include constraints and clear descriptions\n- Add examples in field descriptions\n\n**Output Schema:**\n- Define `outputSchema` where possible for structured data\n- Use `structuredContent` in tool responses (TypeScript SDK feature)\n- Helps clients understand and process tool outputs\n\n**Tool Description:**\n- Concise summary of functionality\n- Parameter descriptions\n- Return type schema\n\n**Implementation:**\n- Async/await for I/O operations\n- Proper error handling with actionable messages\n- Support pagination where applicable\n- Return both text content and structured data when using modern SDKs\n\n**Annotations:**\n- `readOnlyHint`: true/false\n- `destructiveHint`: true/false\n- `idempotentHint`: true/false\n- `openWorldHint`: true/false\n\n---\n\n### Phase 3: Review and Test\n\n#### 3.1 Code Quality\n\nReview for:\n- No duplicated code (DRY principle)\n- Consistent error handling\n- Full type coverage\n- Clear tool descriptions\n\n#### 3.2 Build and Test\n\n**TypeScript:**\n- Run `npm run build` to verify compilation\n- Test with MCP Inspector: `npx @modelcontextprotocol/inspector`\n\n**Python:**\n- Verify syntax: `python -m py_compile your_server.py`\n- Test with MCP Inspector\n\nSee language-specific guides for detailed testing approaches and quality checklists.\n\n---\n\n### Phase 4: Create Evaluations\n\nAfter implementing your MCP server, create comprehensive evaluations to test its effectiveness.\n\n**Load [✅ Evaluation Guide](./reference/evaluation.md) for complete evaluation guidelines.**\n\n#### 4.1 Understand Evaluation Purpose\n\nUse evaluations to test whether LLMs can effectively use your MCP server to answer realistic, complex questions.\n\n#### 4.2 Create 10 Evaluation Questions\n\nTo create effective evaluations, follow the process outlined in the evaluation guide:\n\n1. **Tool Inspection**: List available tools and understand their capabilities\n2. **Content Exploration**: Use READ-ONLY operations to explore available data\n3. **Question Generation**: Create 10 complex, realistic questions\n4. **Answer Verification**: Solve each question yourself to verify answers\n\n#### 4.3 Evaluation Requirements\n\nEnsure each question is:\n- **Independent**: Not dependent on other questions\n- **Read-only**: Only non-destructive operations required\n- **Complex**: Requiring multiple tool calls and deep exploration\n- **Realistic**: Based on real use cases humans would care about\n- **Verifiable**: Single, clear answer that can be verified by string comparison\n- **Stable**: Answer won't change over time\n\n#### 4.4 Output Format\n\nCreate an XML file with this structure:\n\n```xml\n<evaluation>\n  <qa_pair>\n    <question>Find discussions about AI model launches with animal codenames. One model needed a specific safety designation that uses the format ASL-X. What number X was being determined for the model named after a spotted wild cat?</question>\n    <answer>3</answer>\n  </qa_pair>\n<!-- More qa_pairs... -->\n</evaluation>\n```\n\n---\n\n# Reference Files\n\n## 📚 Documentation Library\n\nLoad these resources as needed during development:\n\n### Core MCP Documentation (Load First)\n- **MCP Protocol**: Start with sitemap at `https://modelcontextprotocol.io/sitemap.xml`, then fetch specific pages with `.md` suffix\n- [📋 MCP Best Practices](./reference/mcp_best_practices.md) - Universal MCP guidelines including:\n  - Server and tool naming conventions\n  - Response format guidelines (JSON vs Markdown)\n  - Pagination best practices\n  - Transport selection (streamable HTTP vs stdio)\n  - Security and error handling standards\n\n### SDK Documentation (Load During Phase 1/2)\n- **Python SDK**: Fetch from `https://raw.githubusercontent.com/modelcontextprotocol/python-sdk/main/README.md`\n- **TypeScript SDK**: Fetch from `https://raw.githubusercontent.com/modelcontextprotocol/typescript-sdk/main/README.md`\n\n### Language-Specific Implementation Guides (Load During Phase 2)\n- [🐍 Python Implementation Guide](./reference/python_mcp_server.md) - Complete Python/FastMCP guide with:\n  - Server initialization patterns\n  - Pydantic model examples\n  - Tool registration with `@mcp.tool`\n  - Complete working examples\n  - Quality checklist\n\n- [⚡ TypeScript Implementation Guide](./reference/node_mcp_server.md) - Complete TypeScript guide with:\n  - Project structure\n  - Zod schema patterns\n  - Tool registration with `server.registerTool`\n  - Complete working examples\n  - Quality checklist\n\n### Evaluation Guide (Load During Phase 4)\n- [✅ Evaluation Guide](./reference/evaluation.md) - Complete evaluation creation guide with:\n  - Question creation guidelines\n  - Answer verification strategies\n  - XML format specifications\n  - Example questions and answers\n  - Running an evaluation with the provided scripts\n",
        "skills/mcp-builder/reference/evaluation.md": "# MCP Server Evaluation Guide\n\n## Overview\n\nThis document provides guidance on creating comprehensive evaluations for MCP servers. Evaluations test whether LLMs can effectively use your MCP server to answer realistic, complex questions using only the tools provided.\n\n---\n\n## Quick Reference\n\n### Evaluation Requirements\n- Create 10 human-readable questions\n- Questions must be READ-ONLY, INDEPENDENT, NON-DESTRUCTIVE\n- Each question requires multiple tool calls (potentially dozens)\n- Answers must be single, verifiable values\n- Answers must be STABLE (won't change over time)\n\n### Output Format\n```xml\n<evaluation>\n   <qa_pair>\n      <question>Your question here</question>\n      <answer>Single verifiable answer</answer>\n   </qa_pair>\n</evaluation>\n```\n\n---\n\n## Purpose of Evaluations\n\nThe measure of quality of an MCP server is NOT how well or comprehensively the server implements tools, but how well these implementations (input/output schemas, docstrings/descriptions, functionality) enable LLMs with no other context and access ONLY to the MCP servers to answer realistic and difficult questions.\n\n## Evaluation Overview\n\nCreate 10 human-readable questions requiring ONLY READ-ONLY, INDEPENDENT, NON-DESTRUCTIVE, and IDEMPOTENT operations to answer. Each question should be:\n- Realistic\n- Clear and concise\n- Unambiguous\n- Complex, requiring potentially dozens of tool calls or steps\n- Answerable with a single, verifiable value that you identify in advance\n\n## Question Guidelines\n\n### Core Requirements\n\n1. **Questions MUST be independent**\n   - Each question should NOT depend on the answer to any other question\n   - Should not assume prior write operations from processing another question\n\n2. **Questions MUST require ONLY NON-DESTRUCTIVE AND IDEMPOTENT tool use**\n   - Should not instruct or require modifying state to arrive at the correct answer\n\n3. **Questions must be REALISTIC, CLEAR, CONCISE, and COMPLEX**\n   - Must require another LLM to use multiple (potentially dozens of) tools or steps to answer\n\n### Complexity and Depth\n\n4. **Questions must require deep exploration**\n   - Consider multi-hop questions requiring multiple sub-questions and sequential tool calls\n   - Each step should benefit from information found in previous questions\n\n5. **Questions may require extensive paging**\n   - May need paging through multiple pages of results\n   - May require querying old data (1-2 years out-of-date) to find niche information\n   - The questions must be DIFFICULT\n\n6. **Questions must require deep understanding**\n   - Rather than surface-level knowledge\n   - May pose complex ideas as True/False questions requiring evidence\n   - May use multiple-choice format where LLM must search different hypotheses\n\n7. **Questions must not be solvable with straightforward keyword search**\n   - Do not include specific keywords from the target content\n   - Use synonyms, related concepts, or paraphrases\n   - Require multiple searches, analyzing multiple related items, extracting context, then deriving the answer\n\n### Tool Testing\n\n8. **Questions should stress-test tool return values**\n   - May elicit tools returning large JSON objects or lists, overwhelming the LLM\n   - Should require understanding multiple modalities of data:\n     - IDs and names\n     - Timestamps and datetimes (months, days, years, seconds)\n     - File IDs, names, extensions, and mimetypes\n     - URLs, GIDs, etc.\n   - Should probe the tool's ability to return all useful forms of data\n\n9. **Questions should MOSTLY reflect real human use cases**\n   - The kinds of information retrieval tasks that HUMANS assisted by an LLM would care about\n\n10. **Questions may require dozens of tool calls**\n    - This challenges LLMs with limited context\n    - Encourages MCP server tools to reduce information returned\n\n11. **Include ambiguous questions**\n    - May be ambiguous OR require difficult decisions on which tools to call\n    - Force the LLM to potentially make mistakes or misinterpret\n    - Ensure that despite AMBIGUITY, there is STILL A SINGLE VERIFIABLE ANSWER\n\n### Stability\n\n12. **Questions must be designed so the answer DOES NOT CHANGE**\n    - Do not ask questions that rely on \"current state\" which is dynamic\n    - For example, do not count:\n      - Number of reactions to a post\n      - Number of replies to a thread\n      - Number of members in a channel\n\n13. **DO NOT let the MCP server RESTRICT the kinds of questions you create**\n    - Create challenging and complex questions\n    - Some may not be solvable with the available MCP server tools\n    - Questions may require specific output formats (datetime vs. epoch time, JSON vs. MARKDOWN)\n    - Questions may require dozens of tool calls to complete\n\n## Answer Guidelines\n\n### Verification\n\n1. **Answers must be VERIFIABLE via direct string comparison**\n   - If the answer can be re-written in many formats, clearly specify the output format in the QUESTION\n   - Examples: \"Use YYYY/MM/DD.\", \"Respond True or False.\", \"Answer A, B, C, or D and nothing else.\"\n   - Answer should be a single VERIFIABLE value such as:\n     - User ID, user name, display name, first name, last name\n     - Channel ID, channel name\n     - Message ID, string\n     - URL, title\n     - Numerical quantity\n     - Timestamp, datetime\n     - Boolean (for True/False questions)\n     - Email address, phone number\n     - File ID, file name, file extension\n     - Multiple choice answer\n   - Answers must not require special formatting or complex, structured output\n   - Answer will be verified using DIRECT STRING COMPARISON\n\n### Readability\n\n2. **Answers should generally prefer HUMAN-READABLE formats**\n   - Examples: names, first name, last name, datetime, file name, message string, URL, yes/no, true/false, a/b/c/d\n   - Rather than opaque IDs (though IDs are acceptable)\n   - The VAST MAJORITY of answers should be human-readable\n\n### Stability\n\n3. **Answers must be STABLE/STATIONARY**\n   - Look at old content (e.g., conversations that have ended, projects that have launched, questions answered)\n   - Create QUESTIONS based on \"closed\" concepts that will always return the same answer\n   - Questions may ask to consider a fixed time window to insulate from non-stationary answers\n   - Rely on context UNLIKELY to change\n   - Example: if finding a paper name, be SPECIFIC enough so answer is not confused with papers published later\n\n4. **Answers must be CLEAR and UNAMBIGUOUS**\n   - Questions must be designed so there is a single, clear answer\n   - Answer can be derived from using the MCP server tools\n\n### Diversity\n\n5. **Answers must be DIVERSE**\n   - Answer should be a single VERIFIABLE value in diverse modalities and formats\n   - User concept: user ID, user name, display name, first name, last name, email address, phone number\n   - Channel concept: channel ID, channel name, channel topic\n   - Message concept: message ID, message string, timestamp, month, day, year\n\n6. **Answers must NOT be complex structures**\n   - Not a list of values\n   - Not a complex object\n   - Not a list of IDs or strings\n   - Not natural language text\n   - UNLESS the answer can be straightforwardly verified using DIRECT STRING COMPARISON\n   - And can be realistically reproduced\n   - It should be unlikely that an LLM would return the same list in any other order or format\n\n## Evaluation Process\n\n### Step 1: Documentation Inspection\n\nRead the documentation of the target API to understand:\n- Available endpoints and functionality\n- If ambiguity exists, fetch additional information from the web\n- Parallelize this step AS MUCH AS POSSIBLE\n- Ensure each subagent is ONLY examining documentation from the file system or on the web\n\n### Step 2: Tool Inspection\n\nList the tools available in the MCP server:\n- Inspect the MCP server directly\n- Understand input/output schemas, docstrings, and descriptions\n- WITHOUT calling the tools themselves at this stage\n\n### Step 3: Developing Understanding\n\nRepeat steps 1 & 2 until you have a good understanding:\n- Iterate multiple times\n- Think about the kinds of tasks you want to create\n- Refine your understanding\n- At NO stage should you READ the code of the MCP server implementation itself\n- Use your intuition and understanding to create reasonable, realistic, but VERY challenging tasks\n\n### Step 4: Read-Only Content Inspection\n\nAfter understanding the API and tools, USE the MCP server tools:\n- Inspect content using READ-ONLY and NON-DESTRUCTIVE operations ONLY\n- Goal: identify specific content (e.g., users, channels, messages, projects, tasks) for creating realistic questions\n- Should NOT call any tools that modify state\n- Will NOT read the code of the MCP server implementation itself\n- Parallelize this step with individual sub-agents pursuing independent explorations\n- Ensure each subagent is only performing READ-ONLY, NON-DESTRUCTIVE, and IDEMPOTENT operations\n- BE CAREFUL: SOME TOOLS may return LOTS OF DATA which would cause you to run out of CONTEXT\n- Make INCREMENTAL, SMALL, AND TARGETED tool calls for exploration\n- In all tool call requests, use the `limit` parameter to limit results (<10)\n- Use pagination\n\n### Step 5: Task Generation\n\nAfter inspecting the content, create 10 human-readable questions:\n- An LLM should be able to answer these with the MCP server\n- Follow all question and answer guidelines above\n\n## Output Format\n\nEach QA pair consists of a question and an answer. The output should be an XML file with this structure:\n\n```xml\n<evaluation>\n   <qa_pair>\n      <question>Find the project created in Q2 2024 with the highest number of completed tasks. What is the project name?</question>\n      <answer>Website Redesign</answer>\n   </qa_pair>\n   <qa_pair>\n      <question>Search for issues labeled as \"bug\" that were closed in March 2024. Which user closed the most issues? Provide their username.</question>\n      <answer>sarah_dev</answer>\n   </qa_pair>\n   <qa_pair>\n      <question>Look for pull requests that modified files in the /api directory and were merged between January 1 and January 31, 2024. How many different contributors worked on these PRs?</question>\n      <answer>7</answer>\n   </qa_pair>\n   <qa_pair>\n      <question>Find the repository with the most stars that was created before 2023. What is the repository name?</question>\n      <answer>data-pipeline</answer>\n   </qa_pair>\n</evaluation>\n```\n\n## Evaluation Examples\n\n### Good Questions\n\n**Example 1: Multi-hop question requiring deep exploration (GitHub MCP)**\n```xml\n<qa_pair>\n   <question>Find the repository that was archived in Q3 2023 and had previously been the most forked project in the organization. What was the primary programming language used in that repository?</question>\n   <answer>Python</answer>\n</qa_pair>\n```\n\nThis question is good because:\n- Requires multiple searches to find archived repositories\n- Needs to identify which had the most forks before archival\n- Requires examining repository details for the language\n- Answer is a simple, verifiable value\n- Based on historical (closed) data that won't change\n\n**Example 2: Requires understanding context without keyword matching (Project Management MCP)**\n```xml\n<qa_pair>\n   <question>Locate the initiative focused on improving customer onboarding that was completed in late 2023. The project lead created a retrospective document after completion. What was the lead's role title at that time?</question>\n   <answer>Product Manager</answer>\n</qa_pair>\n```\n\nThis question is good because:\n- Doesn't use specific project name (\"initiative focused on improving customer onboarding\")\n- Requires finding completed projects from specific timeframe\n- Needs to identify the project lead and their role\n- Requires understanding context from retrospective documents\n- Answer is human-readable and stable\n- Based on completed work (won't change)\n\n**Example 3: Complex aggregation requiring multiple steps (Issue Tracker MCP)**\n```xml\n<qa_pair>\n   <question>Among all bugs reported in January 2024 that were marked as critical priority, which assignee resolved the highest percentage of their assigned bugs within 48 hours? Provide the assignee's username.</question>\n   <answer>alex_eng</answer>\n</qa_pair>\n```\n\nThis question is good because:\n- Requires filtering bugs by date, priority, and status\n- Needs to group by assignee and calculate resolution rates\n- Requires understanding timestamps to determine 48-hour windows\n- Tests pagination (potentially many bugs to process)\n- Answer is a single username\n- Based on historical data from specific time period\n\n**Example 4: Requires synthesis across multiple data types (CRM MCP)**\n```xml\n<qa_pair>\n   <question>Find the account that upgraded from the Starter to Enterprise plan in Q4 2023 and had the highest annual contract value. What industry does this account operate in?</question>\n   <answer>Healthcare</answer>\n</qa_pair>\n```\n\nThis question is good because:\n- Requires understanding subscription tier changes\n- Needs to identify upgrade events in specific timeframe\n- Requires comparing contract values\n- Must access account industry information\n- Answer is simple and verifiable\n- Based on completed historical transactions\n\n### Poor Questions\n\n**Example 1: Answer changes over time**\n```xml\n<qa_pair>\n   <question>How many open issues are currently assigned to the engineering team?</question>\n   <answer>47</answer>\n</qa_pair>\n```\n\nThis question is poor because:\n- The answer will change as issues are created, closed, or reassigned\n- Not based on stable/stationary data\n- Relies on \"current state\" which is dynamic\n\n**Example 2: Too easy with keyword search**\n```xml\n<qa_pair>\n   <question>Find the pull request with title \"Add authentication feature\" and tell me who created it.</question>\n   <answer>developer123</answer>\n</qa_pair>\n```\n\nThis question is poor because:\n- Can be solved with a straightforward keyword search for exact title\n- Doesn't require deep exploration or understanding\n- No synthesis or analysis needed\n\n**Example 3: Ambiguous answer format**\n```xml\n<qa_pair>\n   <question>List all the repositories that have Python as their primary language.</question>\n   <answer>repo1, repo2, repo3, data-pipeline, ml-tools</answer>\n</qa_pair>\n```\n\nThis question is poor because:\n- Answer is a list that could be returned in any order\n- Difficult to verify with direct string comparison\n- LLM might format differently (JSON array, comma-separated, newline-separated)\n- Better to ask for a specific aggregate (count) or superlative (most stars)\n\n## Verification Process\n\nAfter creating evaluations:\n\n1. **Examine the XML file** to understand the schema\n2. **Load each task instruction** and in parallel using the MCP server and tools, identify the correct answer by attempting to solve the task YOURSELF\n3. **Flag any operations** that require WRITE or DESTRUCTIVE operations\n4. **Accumulate all CORRECT answers** and replace any incorrect answers in the document\n5. **Remove any `<qa_pair>`** that require WRITE or DESTRUCTIVE operations\n\nRemember to parallelize solving tasks to avoid running out of context, then accumulate all answers and make changes to the file at the end.\n\n## Tips for Creating Quality Evaluations\n\n1. **Think Hard and Plan Ahead** before generating tasks\n2. **Parallelize Where Opportunity Arises** to speed up the process and manage context\n3. **Focus on Realistic Use Cases** that humans would actually want to accomplish\n4. **Create Challenging Questions** that test the limits of the MCP server's capabilities\n5. **Ensure Stability** by using historical data and closed concepts\n6. **Verify Answers** by solving the questions yourself using the MCP server tools\n7. **Iterate and Refine** based on what you learn during the process\n\n---\n\n# Running Evaluations\n\nAfter creating your evaluation file, you can use the provided evaluation harness to test your MCP server.\n\n## Setup\n\n1. **Install Dependencies**\n\n   ```bash\n   pip install -r scripts/requirements.txt\n   ```\n\n   Or install manually:\n   ```bash\n   pip install anthropic mcp\n   ```\n\n2. **Set API Key**\n\n   ```bash\n   export ANTHROPIC_API_KEY=your_api_key_here\n   ```\n\n## Evaluation File Format\n\nEvaluation files use XML format with `<qa_pair>` elements:\n\n```xml\n<evaluation>\n   <qa_pair>\n      <question>Find the project created in Q2 2024 with the highest number of completed tasks. What is the project name?</question>\n      <answer>Website Redesign</answer>\n   </qa_pair>\n   <qa_pair>\n      <question>Search for issues labeled as \"bug\" that were closed in March 2024. Which user closed the most issues? Provide their username.</question>\n      <answer>sarah_dev</answer>\n   </qa_pair>\n</evaluation>\n```\n\n## Running Evaluations\n\nThe evaluation script (`scripts/evaluation.py`) supports three transport types:\n\n**Important:**\n- **stdio transport**: The evaluation script automatically launches and manages the MCP server process for you. Do not run the server manually.\n- **sse/http transports**: You must start the MCP server separately before running the evaluation. The script connects to the already-running server at the specified URL.\n\n### 1. Local STDIO Server\n\nFor locally-run MCP servers (script launches the server automatically):\n\n```bash\npython scripts/evaluation.py \\\n  -t stdio \\\n  -c python \\\n  -a my_mcp_server.py \\\n  evaluation.xml\n```\n\nWith environment variables:\n```bash\npython scripts/evaluation.py \\\n  -t stdio \\\n  -c python \\\n  -a my_mcp_server.py \\\n  -e API_KEY=abc123 \\\n  -e DEBUG=true \\\n  evaluation.xml\n```\n\n### 2. Server-Sent Events (SSE)\n\nFor SSE-based MCP servers (you must start the server first):\n\n```bash\npython scripts/evaluation.py \\\n  -t sse \\\n  -u https://example.com/mcp \\\n  -H \"Authorization: Bearer token123\" \\\n  -H \"X-Custom-Header: value\" \\\n  evaluation.xml\n```\n\n### 3. HTTP (Streamable HTTP)\n\nFor HTTP-based MCP servers (you must start the server first):\n\n```bash\npython scripts/evaluation.py \\\n  -t http \\\n  -u https://example.com/mcp \\\n  -H \"Authorization: Bearer token123\" \\\n  evaluation.xml\n```\n\n## Command-Line Options\n\n```\nusage: evaluation.py [-h] [-t {stdio,sse,http}] [-m MODEL] [-c COMMAND]\n                     [-a ARGS [ARGS ...]] [-e ENV [ENV ...]] [-u URL]\n                     [-H HEADERS [HEADERS ...]] [-o OUTPUT]\n                     eval_file\n\npositional arguments:\n  eval_file             Path to evaluation XML file\n\noptional arguments:\n  -h, --help            Show help message\n  -t, --transport       Transport type: stdio, sse, or http (default: stdio)\n  -m, --model           Claude model to use (default: claude-3-7-sonnet-20250219)\n  -o, --output          Output file for report (default: print to stdout)\n\nstdio options:\n  -c, --command         Command to run MCP server (e.g., python, node)\n  -a, --args            Arguments for the command (e.g., server.py)\n  -e, --env             Environment variables in KEY=VALUE format\n\nsse/http options:\n  -u, --url             MCP server URL\n  -H, --header          HTTP headers in 'Key: Value' format\n```\n\n## Output\n\nThe evaluation script generates a detailed report including:\n\n- **Summary Statistics**:\n  - Accuracy (correct/total)\n  - Average task duration\n  - Average tool calls per task\n  - Total tool calls\n\n- **Per-Task Results**:\n  - Prompt and expected response\n  - Actual response from the agent\n  - Whether the answer was correct (✅/❌)\n  - Duration and tool call details\n  - Agent's summary of its approach\n  - Agent's feedback on the tools\n\n### Save Report to File\n\n```bash\npython scripts/evaluation.py \\\n  -t stdio \\\n  -c python \\\n  -a my_server.py \\\n  -o evaluation_report.md \\\n  evaluation.xml\n```\n\n## Complete Example Workflow\n\nHere's a complete example of creating and running an evaluation:\n\n1. **Create your evaluation file** (`my_evaluation.xml`):\n\n```xml\n<evaluation>\n   <qa_pair>\n      <question>Find the user who created the most issues in January 2024. What is their username?</question>\n      <answer>alice_developer</answer>\n   </qa_pair>\n   <qa_pair>\n      <question>Among all pull requests merged in Q1 2024, which repository had the highest number? Provide the repository name.</question>\n      <answer>backend-api</answer>\n   </qa_pair>\n   <qa_pair>\n      <question>Find the project that was completed in December 2023 and had the longest duration from start to finish. How many days did it take?</question>\n      <answer>127</answer>\n   </qa_pair>\n</evaluation>\n```\n\n2. **Install dependencies**:\n\n```bash\npip install -r scripts/requirements.txt\nexport ANTHROPIC_API_KEY=your_api_key\n```\n\n3. **Run evaluation**:\n\n```bash\npython scripts/evaluation.py \\\n  -t stdio \\\n  -c python \\\n  -a github_mcp_server.py \\\n  -e GITHUB_TOKEN=ghp_xxx \\\n  -o github_eval_report.md \\\n  my_evaluation.xml\n```\n\n4. **Review the report** in `github_eval_report.md` to:\n   - See which questions passed/failed\n   - Read the agent's feedback on your tools\n   - Identify areas for improvement\n   - Iterate on your MCP server design\n\n## Troubleshooting\n\n### Connection Errors\n\nIf you get connection errors:\n- **STDIO**: Verify the command and arguments are correct\n- **SSE/HTTP**: Check the URL is accessible and headers are correct\n- Ensure any required API keys are set in environment variables or headers\n\n### Low Accuracy\n\nIf many evaluations fail:\n- Review the agent's feedback for each task\n- Check if tool descriptions are clear and comprehensive\n- Verify input parameters are well-documented\n- Consider whether tools return too much or too little data\n- Ensure error messages are actionable\n\n### Timeout Issues\n\nIf tasks are timing out:\n- Use a more capable model (e.g., `claude-3-7-sonnet-20250219`)\n- Check if tools are returning too much data\n- Verify pagination is working correctly\n- Consider simplifying complex questions",
        "skills/mcp-builder/reference/mcp_best_practices.md": "# MCP Server Best Practices\n\n## Quick Reference\n\n### Server Naming\n- **Python**: `{service}_mcp` (e.g., `slack_mcp`)\n- **Node/TypeScript**: `{service}-mcp-server` (e.g., `slack-mcp-server`)\n\n### Tool Naming\n- Use snake_case with service prefix\n- Format: `{service}_{action}_{resource}`\n- Example: `slack_send_message`, `github_create_issue`\n\n### Response Formats\n- Support both JSON and Markdown formats\n- JSON for programmatic processing\n- Markdown for human readability\n\n### Pagination\n- Always respect `limit` parameter\n- Return `has_more`, `next_offset`, `total_count`\n- Default to 20-50 items\n\n### Transport\n- **Streamable HTTP**: For remote servers, multi-client scenarios\n- **stdio**: For local integrations, command-line tools\n- Avoid SSE (deprecated in favor of streamable HTTP)\n\n---\n\n## Server Naming Conventions\n\nFollow these standardized naming patterns:\n\n**Python**: Use format `{service}_mcp` (lowercase with underscores)\n- Examples: `slack_mcp`, `github_mcp`, `jira_mcp`\n\n**Node/TypeScript**: Use format `{service}-mcp-server` (lowercase with hyphens)\n- Examples: `slack-mcp-server`, `github-mcp-server`, `jira-mcp-server`\n\nThe name should be general, descriptive of the service being integrated, easy to infer from the task description, and without version numbers.\n\n---\n\n## Tool Naming and Design\n\n### Tool Naming\n\n1. **Use snake_case**: `search_users`, `create_project`, `get_channel_info`\n2. **Include service prefix**: Anticipate that your MCP server may be used alongside other MCP servers\n   - Use `slack_send_message` instead of just `send_message`\n   - Use `github_create_issue` instead of just `create_issue`\n3. **Be action-oriented**: Start with verbs (get, list, search, create, etc.)\n4. **Be specific**: Avoid generic names that could conflict with other servers\n\n### Tool Design\n\n- Tool descriptions must narrowly and unambiguously describe functionality\n- Descriptions must precisely match actual functionality\n- Provide tool annotations (readOnlyHint, destructiveHint, idempotentHint, openWorldHint)\n- Keep tool operations focused and atomic\n\n---\n\n## Response Formats\n\nAll tools that return data should support multiple formats:\n\n### JSON Format (`response_format=\"json\"`)\n- Machine-readable structured data\n- Include all available fields and metadata\n- Consistent field names and types\n- Use for programmatic processing\n\n### Markdown Format (`response_format=\"markdown\"`, typically default)\n- Human-readable formatted text\n- Use headers, lists, and formatting for clarity\n- Convert timestamps to human-readable format\n- Show display names with IDs in parentheses\n- Omit verbose metadata\n\n---\n\n## Pagination\n\nFor tools that list resources:\n\n- **Always respect the `limit` parameter**\n- **Implement pagination**: Use `offset` or cursor-based pagination\n- **Return pagination metadata**: Include `has_more`, `next_offset`/`next_cursor`, `total_count`\n- **Never load all results into memory**: Especially important for large datasets\n- **Default to reasonable limits**: 20-50 items is typical\n\nExample pagination response:\n```json\n{\n  \"total\": 150,\n  \"count\": 20,\n  \"offset\": 0,\n  \"items\": [...],\n  \"has_more\": true,\n  \"next_offset\": 20\n}\n```\n\n---\n\n## Transport Options\n\n### Streamable HTTP\n\n**Best for**: Remote servers, web services, multi-client scenarios\n\n**Characteristics**:\n- Bidirectional communication over HTTP\n- Supports multiple simultaneous clients\n- Can be deployed as a web service\n- Enables server-to-client notifications\n\n**Use when**:\n- Serving multiple clients simultaneously\n- Deploying as a cloud service\n- Integration with web applications\n\n### stdio\n\n**Best for**: Local integrations, command-line tools\n\n**Characteristics**:\n- Standard input/output stream communication\n- Simple setup, no network configuration needed\n- Runs as a subprocess of the client\n\n**Use when**:\n- Building tools for local development environments\n- Integrating with desktop applications\n- Single-user, single-session scenarios\n\n**Note**: stdio servers should NOT log to stdout (use stderr for logging)\n\n### Transport Selection\n\n| Criterion | stdio | Streamable HTTP |\n|-----------|-------|-----------------|\n| **Deployment** | Local | Remote |\n| **Clients** | Single | Multiple |\n| **Complexity** | Low | Medium |\n| **Real-time** | No | Yes |\n\n---\n\n## Security Best Practices\n\n### Authentication and Authorization\n\n**OAuth 2.1**:\n- Use secure OAuth 2.1 with certificates from recognized authorities\n- Validate access tokens before processing requests\n- Only accept tokens specifically intended for your server\n\n**API Keys**:\n- Store API keys in environment variables, never in code\n- Validate keys on server startup\n- Provide clear error messages when authentication fails\n\n### Input Validation\n\n- Sanitize file paths to prevent directory traversal\n- Validate URLs and external identifiers\n- Check parameter sizes and ranges\n- Prevent command injection in system calls\n- Use schema validation (Pydantic/Zod) for all inputs\n\n### Error Handling\n\n- Don't expose internal errors to clients\n- Log security-relevant errors server-side\n- Provide helpful but not revealing error messages\n- Clean up resources after errors\n\n### DNS Rebinding Protection\n\nFor streamable HTTP servers running locally:\n- Enable DNS rebinding protection\n- Validate the `Origin` header on all incoming connections\n- Bind to `127.0.0.1` rather than `0.0.0.0`\n\n---\n\n## Tool Annotations\n\nProvide annotations to help clients understand tool behavior:\n\n| Annotation | Type | Default | Description |\n|-----------|------|---------|-------------|\n| `readOnlyHint` | boolean | false | Tool does not modify its environment |\n| `destructiveHint` | boolean | true | Tool may perform destructive updates |\n| `idempotentHint` | boolean | false | Repeated calls with same args have no additional effect |\n| `openWorldHint` | boolean | true | Tool interacts with external entities |\n\n**Important**: Annotations are hints, not security guarantees. Clients should not make security-critical decisions based solely on annotations.\n\n---\n\n## Error Handling\n\n- Use standard JSON-RPC error codes\n- Report tool errors within result objects (not protocol-level errors)\n- Provide helpful, specific error messages with suggested next steps\n- Don't expose internal implementation details\n- Clean up resources properly on errors\n\nExample error handling:\n```typescript\ntry {\n  const result = performOperation();\n  return { content: [{ type: \"text\", text: result }] };\n} catch (error) {\n  return {\n    isError: true,\n    content: [{\n      type: \"text\",\n      text: `Error: ${error.message}. Try using filter='active_only' to reduce results.`\n    }]\n  };\n}\n```\n\n---\n\n## Testing Requirements\n\nComprehensive testing should cover:\n\n- **Functional testing**: Verify correct execution with valid/invalid inputs\n- **Integration testing**: Test interaction with external systems\n- **Security testing**: Validate auth, input sanitization, rate limiting\n- **Performance testing**: Check behavior under load, timeouts\n- **Error handling**: Ensure proper error reporting and cleanup\n\n---\n\n## Documentation Requirements\n\n- Provide clear documentation of all tools and capabilities\n- Include working examples (at least 3 per major feature)\n- Document security considerations\n- Specify required permissions and access levels\n- Document rate limits and performance characteristics\n",
        "skills/mcp-builder/reference/node_mcp_server.md": "# Node/TypeScript MCP Server Implementation Guide\n\n## Overview\n\nThis document provides Node/TypeScript-specific best practices and examples for implementing MCP servers using the MCP TypeScript SDK. It covers project structure, server setup, tool registration patterns, input validation with Zod, error handling, and complete working examples.\n\n---\n\n## Quick Reference\n\n### Key Imports\n```typescript\nimport { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { StreamableHTTPServerTransport } from \"@modelcontextprotocol/sdk/server/streamableHttp.js\";\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\";\nimport express from \"express\";\nimport { z } from \"zod\";\n```\n\n### Server Initialization\n```typescript\nconst server = new McpServer({\n  name: \"service-mcp-server\",\n  version: \"1.0.0\"\n});\n```\n\n### Tool Registration Pattern\n```typescript\nserver.registerTool(\n  \"tool_name\",\n  {\n    title: \"Tool Display Name\",\n    description: \"What the tool does\",\n    inputSchema: { param: z.string() },\n    outputSchema: { result: z.string() }\n  },\n  async ({ param }) => {\n    const output = { result: `Processed: ${param}` };\n    return {\n      content: [{ type: \"text\", text: JSON.stringify(output) }],\n      structuredContent: output // Modern pattern for structured data\n    };\n  }\n);\n```\n\n---\n\n## MCP TypeScript SDK\n\nThe official MCP TypeScript SDK provides:\n- `McpServer` class for server initialization\n- `registerTool` method for tool registration\n- Zod schema integration for runtime input validation\n- Type-safe tool handler implementations\n\n**IMPORTANT - Use Modern APIs Only:**\n- **DO use**: `server.registerTool()`, `server.registerResource()`, `server.registerPrompt()`\n- **DO NOT use**: Old deprecated APIs such as `server.tool()`, `server.setRequestHandler(ListToolsRequestSchema, ...)`, or manual handler registration\n- The `register*` methods provide better type safety, automatic schema handling, and are the recommended approach\n\nSee the MCP SDK documentation in the references for complete details.\n\n## Server Naming Convention\n\nNode/TypeScript MCP servers must follow this naming pattern:\n- **Format**: `{service}-mcp-server` (lowercase with hyphens)\n- **Examples**: `github-mcp-server`, `jira-mcp-server`, `stripe-mcp-server`\n\nThe name should be:\n- General (not tied to specific features)\n- Descriptive of the service/API being integrated\n- Easy to infer from the task description\n- Without version numbers or dates\n\n## Project Structure\n\nCreate the following structure for Node/TypeScript MCP servers:\n\n```\n{service}-mcp-server/\n├── package.json\n├── tsconfig.json\n├── README.md\n├── src/\n│   ├── index.ts          # Main entry point with McpServer initialization\n│   ├── types.ts          # TypeScript type definitions and interfaces\n│   ├── tools/            # Tool implementations (one file per domain)\n│   ├── services/         # API clients and shared utilities\n│   ├── schemas/          # Zod validation schemas\n│   └── constants.ts      # Shared constants (API_URL, CHARACTER_LIMIT, etc.)\n└── dist/                 # Built JavaScript files (entry point: dist/index.js)\n```\n\n## Tool Implementation\n\n### Tool Naming\n\nUse snake_case for tool names (e.g., \"search_users\", \"create_project\", \"get_channel_info\") with clear, action-oriented names.\n\n**Avoid Naming Conflicts**: Include the service context to prevent overlaps:\n- Use \"slack_send_message\" instead of just \"send_message\"\n- Use \"github_create_issue\" instead of just \"create_issue\"\n- Use \"asana_list_tasks\" instead of just \"list_tasks\"\n\n### Tool Structure\n\nTools are registered using the `registerTool` method with the following requirements:\n- Use Zod schemas for runtime input validation and type safety\n- The `description` field must be explicitly provided - JSDoc comments are NOT automatically extracted\n- Explicitly provide `title`, `description`, `inputSchema`, and `annotations`\n- The `inputSchema` must be a Zod schema object (not a JSON schema)\n- Type all parameters and return values explicitly\n\n```typescript\nimport { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { z } from \"zod\";\n\nconst server = new McpServer({\n  name: \"example-mcp\",\n  version: \"1.0.0\"\n});\n\n// Zod schema for input validation\nconst UserSearchInputSchema = z.object({\n  query: z.string()\n    .min(2, \"Query must be at least 2 characters\")\n    .max(200, \"Query must not exceed 200 characters\")\n    .describe(\"Search string to match against names/emails\"),\n  limit: z.number()\n    .int()\n    .min(1)\n    .max(100)\n    .default(20)\n    .describe(\"Maximum results to return\"),\n  offset: z.number()\n    .int()\n    .min(0)\n    .default(0)\n    .describe(\"Number of results to skip for pagination\"),\n  response_format: z.nativeEnum(ResponseFormat)\n    .default(ResponseFormat.MARKDOWN)\n    .describe(\"Output format: 'markdown' for human-readable or 'json' for machine-readable\")\n}).strict();\n\n// Type definition from Zod schema\ntype UserSearchInput = z.infer<typeof UserSearchInputSchema>;\n\nserver.registerTool(\n  \"example_search_users\",\n  {\n    title: \"Search Example Users\",\n    description: `Search for users in the Example system by name, email, or team.\n\nThis tool searches across all user profiles in the Example platform, supporting partial matches and various search filters. It does NOT create or modify users, only searches existing ones.\n\nArgs:\n  - query (string): Search string to match against names/emails\n  - limit (number): Maximum results to return, between 1-100 (default: 20)\n  - offset (number): Number of results to skip for pagination (default: 0)\n  - response_format ('markdown' | 'json'): Output format (default: 'markdown')\n\nReturns:\n  For JSON format: Structured data with schema:\n  {\n    \"total\": number,           // Total number of matches found\n    \"count\": number,           // Number of results in this response\n    \"offset\": number,          // Current pagination offset\n    \"users\": [\n      {\n        \"id\": string,          // User ID (e.g., \"U123456789\")\n        \"name\": string,        // Full name (e.g., \"John Doe\")\n        \"email\": string,       // Email address\n        \"team\": string,        // Team name (optional)\n        \"active\": boolean      // Whether user is active\n      }\n    ],\n    \"has_more\": boolean,       // Whether more results are available\n    \"next_offset\": number      // Offset for next page (if has_more is true)\n  }\n\nExamples:\n  - Use when: \"Find all marketing team members\" -> params with query=\"team:marketing\"\n  - Use when: \"Search for John's account\" -> params with query=\"john\"\n  - Don't use when: You need to create a user (use example_create_user instead)\n\nError Handling:\n  - Returns \"Error: Rate limit exceeded\" if too many requests (429 status)\n  - Returns \"No users found matching '<query>'\" if search returns empty`,\n    inputSchema: UserSearchInputSchema,\n    annotations: {\n      readOnlyHint: true,\n      destructiveHint: false,\n      idempotentHint: true,\n      openWorldHint: true\n    }\n  },\n  async (params: UserSearchInput) => {\n    try {\n      // Input validation is handled by Zod schema\n      // Make API request using validated parameters\n      const data = await makeApiRequest<any>(\n        \"users/search\",\n        \"GET\",\n        undefined,\n        {\n          q: params.query,\n          limit: params.limit,\n          offset: params.offset\n        }\n      );\n\n      const users = data.users || [];\n      const total = data.total || 0;\n\n      if (!users.length) {\n        return {\n          content: [{\n            type: \"text\",\n            text: `No users found matching '${params.query}'`\n          }]\n        };\n      }\n\n      // Prepare structured output\n      const output = {\n        total,\n        count: users.length,\n        offset: params.offset,\n        users: users.map((user: any) => ({\n          id: user.id,\n          name: user.name,\n          email: user.email,\n          ...(user.team ? { team: user.team } : {}),\n          active: user.active ?? true\n        })),\n        has_more: total > params.offset + users.length,\n        ...(total > params.offset + users.length ? {\n          next_offset: params.offset + users.length\n        } : {})\n      };\n\n      // Format text representation based on requested format\n      let textContent: string;\n      if (params.response_format === ResponseFormat.MARKDOWN) {\n        const lines = [`# User Search Results: '${params.query}'`, \"\",\n          `Found ${total} users (showing ${users.length})`, \"\"];\n        for (const user of users) {\n          lines.push(`## ${user.name} (${user.id})`);\n          lines.push(`- **Email**: ${user.email}`);\n          if (user.team) lines.push(`- **Team**: ${user.team}`);\n          lines.push(\"\");\n        }\n        textContent = lines.join(\"\\n\");\n      } else {\n        textContent = JSON.stringify(output, null, 2);\n      }\n\n      return {\n        content: [{ type: \"text\", text: textContent }],\n        structuredContent: output // Modern pattern for structured data\n      };\n    } catch (error) {\n      return {\n        content: [{\n          type: \"text\",\n          text: handleApiError(error)\n        }]\n      };\n    }\n  }\n);\n```\n\n## Zod Schemas for Input Validation\n\nZod provides runtime type validation:\n\n```typescript\nimport { z } from \"zod\";\n\n// Basic schema with validation\nconst CreateUserSchema = z.object({\n  name: z.string()\n    .min(1, \"Name is required\")\n    .max(100, \"Name must not exceed 100 characters\"),\n  email: z.string()\n    .email(\"Invalid email format\"),\n  age: z.number()\n    .int(\"Age must be a whole number\")\n    .min(0, \"Age cannot be negative\")\n    .max(150, \"Age cannot be greater than 150\")\n}).strict();  // Use .strict() to forbid extra fields\n\n// Enums\nenum ResponseFormat {\n  MARKDOWN = \"markdown\",\n  JSON = \"json\"\n}\n\nconst SearchSchema = z.object({\n  response_format: z.nativeEnum(ResponseFormat)\n    .default(ResponseFormat.MARKDOWN)\n    .describe(\"Output format\")\n});\n\n// Optional fields with defaults\nconst PaginationSchema = z.object({\n  limit: z.number()\n    .int()\n    .min(1)\n    .max(100)\n    .default(20)\n    .describe(\"Maximum results to return\"),\n  offset: z.number()\n    .int()\n    .min(0)\n    .default(0)\n    .describe(\"Number of results to skip\")\n});\n```\n\n## Response Format Options\n\nSupport multiple output formats for flexibility:\n\n```typescript\nenum ResponseFormat {\n  MARKDOWN = \"markdown\",\n  JSON = \"json\"\n}\n\nconst inputSchema = z.object({\n  query: z.string(),\n  response_format: z.nativeEnum(ResponseFormat)\n    .default(ResponseFormat.MARKDOWN)\n    .describe(\"Output format: 'markdown' for human-readable or 'json' for machine-readable\")\n});\n```\n\n**Markdown format**:\n- Use headers, lists, and formatting for clarity\n- Convert timestamps to human-readable format\n- Show display names with IDs in parentheses\n- Omit verbose metadata\n- Group related information logically\n\n**JSON format**:\n- Return complete, structured data suitable for programmatic processing\n- Include all available fields and metadata\n- Use consistent field names and types\n\n## Pagination Implementation\n\nFor tools that list resources:\n\n```typescript\nconst ListSchema = z.object({\n  limit: z.number().int().min(1).max(100).default(20),\n  offset: z.number().int().min(0).default(0)\n});\n\nasync function listItems(params: z.infer<typeof ListSchema>) {\n  const data = await apiRequest(params.limit, params.offset);\n\n  const response = {\n    total: data.total,\n    count: data.items.length,\n    offset: params.offset,\n    items: data.items,\n    has_more: data.total > params.offset + data.items.length,\n    next_offset: data.total > params.offset + data.items.length\n      ? params.offset + data.items.length\n      : undefined\n  };\n\n  return JSON.stringify(response, null, 2);\n}\n```\n\n## Character Limits and Truncation\n\nAdd a CHARACTER_LIMIT constant to prevent overwhelming responses:\n\n```typescript\n// At module level in constants.ts\nexport const CHARACTER_LIMIT = 25000;  // Maximum response size in characters\n\nasync function searchTool(params: SearchInput) {\n  let result = generateResponse(data);\n\n  // Check character limit and truncate if needed\n  if (result.length > CHARACTER_LIMIT) {\n    const truncatedData = data.slice(0, Math.max(1, data.length / 2));\n    response.data = truncatedData;\n    response.truncated = true;\n    response.truncation_message =\n      `Response truncated from ${data.length} to ${truncatedData.length} items. ` +\n      `Use 'offset' parameter or add filters to see more results.`;\n    result = JSON.stringify(response, null, 2);\n  }\n\n  return result;\n}\n```\n\n## Error Handling\n\nProvide clear, actionable error messages:\n\n```typescript\nimport axios, { AxiosError } from \"axios\";\n\nfunction handleApiError(error: unknown): string {\n  if (error instanceof AxiosError) {\n    if (error.response) {\n      switch (error.response.status) {\n        case 404:\n          return \"Error: Resource not found. Please check the ID is correct.\";\n        case 403:\n          return \"Error: Permission denied. You don't have access to this resource.\";\n        case 429:\n          return \"Error: Rate limit exceeded. Please wait before making more requests.\";\n        default:\n          return `Error: API request failed with status ${error.response.status}`;\n      }\n    } else if (error.code === \"ECONNABORTED\") {\n      return \"Error: Request timed out. Please try again.\";\n    }\n  }\n  return `Error: Unexpected error occurred: ${error instanceof Error ? error.message : String(error)}`;\n}\n```\n\n## Shared Utilities\n\nExtract common functionality into reusable functions:\n\n```typescript\n// Shared API request function\nasync function makeApiRequest<T>(\n  endpoint: string,\n  method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\" = \"GET\",\n  data?: any,\n  params?: any\n): Promise<T> {\n  try {\n    const response = await axios({\n      method,\n      url: `${API_BASE_URL}/${endpoint}`,\n      data,\n      params,\n      timeout: 30000,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      }\n    });\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n```\n\n## Async/Await Best Practices\n\nAlways use async/await for network requests and I/O operations:\n\n```typescript\n// Good: Async network request\nasync function fetchData(resourceId: string): Promise<ResourceData> {\n  const response = await axios.get(`${API_URL}/resource/${resourceId}`);\n  return response.data;\n}\n\n// Bad: Promise chains\nfunction fetchData(resourceId: string): Promise<ResourceData> {\n  return axios.get(`${API_URL}/resource/${resourceId}`)\n    .then(response => response.data);  // Harder to read and maintain\n}\n```\n\n## TypeScript Best Practices\n\n1. **Use Strict TypeScript**: Enable strict mode in tsconfig.json\n2. **Define Interfaces**: Create clear interface definitions for all data structures\n3. **Avoid `any`**: Use proper types or `unknown` instead of `any`\n4. **Zod for Runtime Validation**: Use Zod schemas to validate external data\n5. **Type Guards**: Create type guard functions for complex type checking\n6. **Error Handling**: Always use try-catch with proper error type checking\n7. **Null Safety**: Use optional chaining (`?.`) and nullish coalescing (`??`)\n\n```typescript\n// Good: Type-safe with Zod and interfaces\ninterface UserResponse {\n  id: string;\n  name: string;\n  email: string;\n  team?: string;\n  active: boolean;\n}\n\nconst UserSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  email: z.string().email(),\n  team: z.string().optional(),\n  active: z.boolean()\n});\n\ntype User = z.infer<typeof UserSchema>;\n\nasync function getUser(id: string): Promise<User> {\n  const data = await apiCall(`/users/${id}`);\n  return UserSchema.parse(data);  // Runtime validation\n}\n\n// Bad: Using any\nasync function getUser(id: string): Promise<any> {\n  return await apiCall(`/users/${id}`);  // No type safety\n}\n```\n\n## Package Configuration\n\n### package.json\n\n```json\n{\n  \"name\": \"{service}-mcp-server\",\n  \"version\": \"1.0.0\",\n  \"description\": \"MCP server for {Service} API integration\",\n  \"type\": \"module\",\n  \"main\": \"dist/index.js\",\n  \"scripts\": {\n    \"start\": \"node dist/index.js\",\n    \"dev\": \"tsx watch src/index.ts\",\n    \"build\": \"tsc\",\n    \"clean\": \"rm -rf dist\"\n  },\n  \"engines\": {\n    \"node\": \">=18\"\n  },\n  \"dependencies\": {\n    \"@modelcontextprotocol/sdk\": \"^1.6.1\",\n    \"axios\": \"^1.7.9\",\n    \"zod\": \"^3.23.8\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^22.10.0\",\n    \"tsx\": \"^4.19.2\",\n    \"typescript\": \"^5.7.2\"\n  }\n}\n```\n\n### tsconfig.json\n\n```json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES2022\",\n    \"module\": \"Node16\",\n    \"moduleResolution\": \"Node16\",\n    \"lib\": [\"ES2022\"],\n    \"outDir\": \"./dist\",\n    \"rootDir\": \"./src\",\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"skipLibCheck\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"declaration\": true,\n    \"declarationMap\": true,\n    \"sourceMap\": true,\n    \"allowSyntheticDefaultImports\": true\n  },\n  \"include\": [\"src/**/*\"],\n  \"exclude\": [\"node_modules\", \"dist\"]\n}\n```\n\n## Complete Example\n\n```typescript\n#!/usr/bin/env node\n/**\n * MCP Server for Example Service.\n *\n * This server provides tools to interact with Example API, including user search,\n * project management, and data export capabilities.\n */\n\nimport { McpServer } from \"@modelcontextprotocol/sdk/server/mcp.js\";\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\";\nimport { z } from \"zod\";\nimport axios, { AxiosError } from \"axios\";\n\n// Constants\nconst API_BASE_URL = \"https://api.example.com/v1\";\nconst CHARACTER_LIMIT = 25000;\n\n// Enums\nenum ResponseFormat {\n  MARKDOWN = \"markdown\",\n  JSON = \"json\"\n}\n\n// Zod schemas\nconst UserSearchInputSchema = z.object({\n  query: z.string()\n    .min(2, \"Query must be at least 2 characters\")\n    .max(200, \"Query must not exceed 200 characters\")\n    .describe(\"Search string to match against names/emails\"),\n  limit: z.number()\n    .int()\n    .min(1)\n    .max(100)\n    .default(20)\n    .describe(\"Maximum results to return\"),\n  offset: z.number()\n    .int()\n    .min(0)\n    .default(0)\n    .describe(\"Number of results to skip for pagination\"),\n  response_format: z.nativeEnum(ResponseFormat)\n    .default(ResponseFormat.MARKDOWN)\n    .describe(\"Output format: 'markdown' for human-readable or 'json' for machine-readable\")\n}).strict();\n\ntype UserSearchInput = z.infer<typeof UserSearchInputSchema>;\n\n// Shared utility functions\nasync function makeApiRequest<T>(\n  endpoint: string,\n  method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\" = \"GET\",\n  data?: any,\n  params?: any\n): Promise<T> {\n  try {\n    const response = await axios({\n      method,\n      url: `${API_BASE_URL}/${endpoint}`,\n      data,\n      params,\n      timeout: 30000,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      }\n    });\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nfunction handleApiError(error: unknown): string {\n  if (error instanceof AxiosError) {\n    if (error.response) {\n      switch (error.response.status) {\n        case 404:\n          return \"Error: Resource not found. Please check the ID is correct.\";\n        case 403:\n          return \"Error: Permission denied. You don't have access to this resource.\";\n        case 429:\n          return \"Error: Rate limit exceeded. Please wait before making more requests.\";\n        default:\n          return `Error: API request failed with status ${error.response.status}`;\n      }\n    } else if (error.code === \"ECONNABORTED\") {\n      return \"Error: Request timed out. Please try again.\";\n    }\n  }\n  return `Error: Unexpected error occurred: ${error instanceof Error ? error.message : String(error)}`;\n}\n\n// Create MCP server instance\nconst server = new McpServer({\n  name: \"example-mcp\",\n  version: \"1.0.0\"\n});\n\n// Register tools\nserver.registerTool(\n  \"example_search_users\",\n  {\n    title: \"Search Example Users\",\n    description: `[Full description as shown above]`,\n    inputSchema: UserSearchInputSchema,\n    annotations: {\n      readOnlyHint: true,\n      destructiveHint: false,\n      idempotentHint: true,\n      openWorldHint: true\n    }\n  },\n  async (params: UserSearchInput) => {\n    // Implementation as shown above\n  }\n);\n\n// Main function\n// For stdio (local):\nasync function runStdio() {\n  if (!process.env.EXAMPLE_API_KEY) {\n    console.error(\"ERROR: EXAMPLE_API_KEY environment variable is required\");\n    process.exit(1);\n  }\n\n  const transport = new StdioServerTransport();\n  await server.connect(transport);\n  console.error(\"MCP server running via stdio\");\n}\n\n// For streamable HTTP (remote):\nasync function runHTTP() {\n  if (!process.env.EXAMPLE_API_KEY) {\n    console.error(\"ERROR: EXAMPLE_API_KEY environment variable is required\");\n    process.exit(1);\n  }\n\n  const app = express();\n  app.use(express.json());\n\n  app.post('/mcp', async (req, res) => {\n    const transport = new StreamableHTTPServerTransport({\n      sessionIdGenerator: undefined,\n      enableJsonResponse: true\n    });\n    res.on('close', () => transport.close());\n    await server.connect(transport);\n    await transport.handleRequest(req, res, req.body);\n  });\n\n  const port = parseInt(process.env.PORT || '3000');\n  app.listen(port, () => {\n    console.error(`MCP server running on http://localhost:${port}/mcp`);\n  });\n}\n\n// Choose transport based on environment\nconst transport = process.env.TRANSPORT || 'stdio';\nif (transport === 'http') {\n  runHTTP().catch(error => {\n    console.error(\"Server error:\", error);\n    process.exit(1);\n  });\n} else {\n  runStdio().catch(error => {\n    console.error(\"Server error:\", error);\n    process.exit(1);\n  });\n}\n```\n\n---\n\n## Advanced MCP Features\n\n### Resource Registration\n\nExpose data as resources for efficient, URI-based access:\n\n```typescript\nimport { ResourceTemplate } from \"@modelcontextprotocol/sdk/types.js\";\n\n// Register a resource with URI template\nserver.registerResource(\n  {\n    uri: \"file://documents/{name}\",\n    name: \"Document Resource\",\n    description: \"Access documents by name\",\n    mimeType: \"text/plain\"\n  },\n  async (uri: string) => {\n    // Extract parameter from URI\n    const match = uri.match(/^file:\\/\\/documents\\/(.+)$/);\n    if (!match) {\n      throw new Error(\"Invalid URI format\");\n    }\n\n    const documentName = match[1];\n    const content = await loadDocument(documentName);\n\n    return {\n      contents: [{\n        uri,\n        mimeType: \"text/plain\",\n        text: content\n      }]\n    };\n  }\n);\n\n// List available resources dynamically\nserver.registerResourceList(async () => {\n  const documents = await getAvailableDocuments();\n  return {\n    resources: documents.map(doc => ({\n      uri: `file://documents/${doc.name}`,\n      name: doc.name,\n      mimeType: \"text/plain\",\n      description: doc.description\n    }))\n  };\n});\n```\n\n**When to use Resources vs Tools:**\n- **Resources**: For data access with simple URI-based parameters\n- **Tools**: For complex operations requiring validation and business logic\n- **Resources**: When data is relatively static or template-based\n- **Tools**: When operations have side effects or complex workflows\n\n### Transport Options\n\nThe TypeScript SDK supports two main transport mechanisms:\n\n#### Streamable HTTP (Recommended for Remote Servers)\n\n```typescript\nimport { StreamableHTTPServerTransport } from \"@modelcontextprotocol/sdk/server/streamableHttp.js\";\nimport express from \"express\";\n\nconst app = express();\napp.use(express.json());\n\napp.post('/mcp', async (req, res) => {\n  // Create new transport for each request (stateless, prevents request ID collisions)\n  const transport = new StreamableHTTPServerTransport({\n    sessionIdGenerator: undefined,\n    enableJsonResponse: true\n  });\n\n  res.on('close', () => transport.close());\n\n  await server.connect(transport);\n  await transport.handleRequest(req, res, req.body);\n});\n\napp.listen(3000);\n```\n\n#### stdio (For Local Integrations)\n\n```typescript\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\";\n\nconst transport = new StdioServerTransport();\nawait server.connect(transport);\n```\n\n**Transport selection:**\n- **Streamable HTTP**: Web services, remote access, multiple clients\n- **stdio**: Command-line tools, local development, subprocess integration\n\n### Notification Support\n\nNotify clients when server state changes:\n\n```typescript\n// Notify when tools list changes\nserver.notification({\n  method: \"notifications/tools/list_changed\"\n});\n\n// Notify when resources change\nserver.notification({\n  method: \"notifications/resources/list_changed\"\n});\n```\n\nUse notifications sparingly - only when server capabilities genuinely change.\n\n---\n\n## Code Best Practices\n\n### Code Composability and Reusability\n\nYour implementation MUST prioritize composability and code reuse:\n\n1. **Extract Common Functionality**:\n   - Create reusable helper functions for operations used across multiple tools\n   - Build shared API clients for HTTP requests instead of duplicating code\n   - Centralize error handling logic in utility functions\n   - Extract business logic into dedicated functions that can be composed\n   - Extract shared markdown or JSON field selection & formatting functionality\n\n2. **Avoid Duplication**:\n   - NEVER copy-paste similar code between tools\n   - If you find yourself writing similar logic twice, extract it into a function\n   - Common operations like pagination, filtering, field selection, and formatting should be shared\n   - Authentication/authorization logic should be centralized\n\n## Building and Running\n\nAlways build your TypeScript code before running:\n\n```bash\n# Build the project\nnpm run build\n\n# Run the server\nnpm start\n\n# Development with auto-reload\nnpm run dev\n```\n\nAlways ensure `npm run build` completes successfully before considering the implementation complete.\n\n## Quality Checklist\n\nBefore finalizing your Node/TypeScript MCP server implementation, ensure:\n\n### Strategic Design\n- [ ] Tools enable complete workflows, not just API endpoint wrappers\n- [ ] Tool names reflect natural task subdivisions\n- [ ] Response formats optimize for agent context efficiency\n- [ ] Human-readable identifiers used where appropriate\n- [ ] Error messages guide agents toward correct usage\n\n### Implementation Quality\n- [ ] FOCUSED IMPLEMENTATION: Most important and valuable tools implemented\n- [ ] All tools registered using `registerTool` with complete configuration\n- [ ] All tools include `title`, `description`, `inputSchema`, and `annotations`\n- [ ] Annotations correctly set (readOnlyHint, destructiveHint, idempotentHint, openWorldHint)\n- [ ] All tools use Zod schemas for runtime input validation with `.strict()` enforcement\n- [ ] All Zod schemas have proper constraints and descriptive error messages\n- [ ] All tools have comprehensive descriptions with explicit input/output types\n- [ ] Descriptions include return value examples and complete schema documentation\n- [ ] Error messages are clear, actionable, and educational\n\n### TypeScript Quality\n- [ ] TypeScript interfaces are defined for all data structures\n- [ ] Strict TypeScript is enabled in tsconfig.json\n- [ ] No use of `any` type - use `unknown` or proper types instead\n- [ ] All async functions have explicit Promise<T> return types\n- [ ] Error handling uses proper type guards (e.g., `axios.isAxiosError`, `z.ZodError`)\n\n### Advanced Features (where applicable)\n- [ ] Resources registered for appropriate data endpoints\n- [ ] Appropriate transport configured (stdio or streamable HTTP)\n- [ ] Notifications implemented for dynamic server capabilities\n- [ ] Type-safe with SDK interfaces\n\n### Project Configuration\n- [ ] Package.json includes all necessary dependencies\n- [ ] Build script produces working JavaScript in dist/ directory\n- [ ] Main entry point is properly configured as dist/index.js\n- [ ] Server name follows format: `{service}-mcp-server`\n- [ ] tsconfig.json properly configured with strict mode\n\n### Code Quality\n- [ ] Pagination is properly implemented where applicable\n- [ ] Large responses check CHARACTER_LIMIT constant and truncate with clear messages\n- [ ] Filtering options are provided for potentially large result sets\n- [ ] All network operations handle timeouts and connection errors gracefully\n- [ ] Common functionality is extracted into reusable functions\n- [ ] Return types are consistent across similar operations\n\n### Testing and Build\n- [ ] `npm run build` completes successfully without errors\n- [ ] dist/index.js created and executable\n- [ ] Server runs: `node dist/index.js --help`\n- [ ] All imports resolve correctly\n- [ ] Sample tool calls work as expected",
        "skills/mcp-builder/reference/python_mcp_server.md": "# Python MCP Server Implementation Guide\n\n## Overview\n\nThis document provides Python-specific best practices and examples for implementing MCP servers using the MCP Python SDK. It covers server setup, tool registration patterns, input validation with Pydantic, error handling, and complete working examples.\n\n---\n\n## Quick Reference\n\n### Key Imports\n```python\nfrom mcp.server.fastmcp import FastMCP\nfrom pydantic import BaseModel, Field, field_validator, ConfigDict\nfrom typing import Optional, List, Dict, Any\nfrom enum import Enum\nimport httpx\n```\n\n### Server Initialization\n```python\nmcp = FastMCP(\"service_mcp\")\n```\n\n### Tool Registration Pattern\n```python\n@mcp.tool(name=\"tool_name\", annotations={...})\nasync def tool_function(params: InputModel) -> str:\n    # Implementation\n    pass\n```\n\n---\n\n## MCP Python SDK and FastMCP\n\nThe official MCP Python SDK provides FastMCP, a high-level framework for building MCP servers. It provides:\n- Automatic description and inputSchema generation from function signatures and docstrings\n- Pydantic model integration for input validation\n- Decorator-based tool registration with `@mcp.tool`\n\n**For complete SDK documentation, use WebFetch to load:**\n`https://raw.githubusercontent.com/modelcontextprotocol/python-sdk/main/README.md`\n\n## Server Naming Convention\n\nPython MCP servers must follow this naming pattern:\n- **Format**: `{service}_mcp` (lowercase with underscores)\n- **Examples**: `github_mcp`, `jira_mcp`, `stripe_mcp`\n\nThe name should be:\n- General (not tied to specific features)\n- Descriptive of the service/API being integrated\n- Easy to infer from the task description\n- Without version numbers or dates\n\n## Tool Implementation\n\n### Tool Naming\n\nUse snake_case for tool names (e.g., \"search_users\", \"create_project\", \"get_channel_info\") with clear, action-oriented names.\n\n**Avoid Naming Conflicts**: Include the service context to prevent overlaps:\n- Use \"slack_send_message\" instead of just \"send_message\"\n- Use \"github_create_issue\" instead of just \"create_issue\"\n- Use \"asana_list_tasks\" instead of just \"list_tasks\"\n\n### Tool Structure with FastMCP\n\nTools are defined using the `@mcp.tool` decorator with Pydantic models for input validation:\n\n```python\nfrom pydantic import BaseModel, Field, ConfigDict\nfrom mcp.server.fastmcp import FastMCP\n\n# Initialize the MCP server\nmcp = FastMCP(\"example_mcp\")\n\n# Define Pydantic model for input validation\nclass ServiceToolInput(BaseModel):\n    '''Input model for service tool operation.'''\n    model_config = ConfigDict(\n        str_strip_whitespace=True,  # Auto-strip whitespace from strings\n        validate_assignment=True,    # Validate on assignment\n        extra='forbid'              # Forbid extra fields\n    )\n\n    param1: str = Field(..., description=\"First parameter description (e.g., 'user123', 'project-abc')\", min_length=1, max_length=100)\n    param2: Optional[int] = Field(default=None, description=\"Optional integer parameter with constraints\", ge=0, le=1000)\n    tags: Optional[List[str]] = Field(default_factory=list, description=\"List of tags to apply\", max_items=10)\n\n@mcp.tool(\n    name=\"service_tool_name\",\n    annotations={\n        \"title\": \"Human-Readable Tool Title\",\n        \"readOnlyHint\": True,     # Tool does not modify environment\n        \"destructiveHint\": False,  # Tool does not perform destructive operations\n        \"idempotentHint\": True,    # Repeated calls have no additional effect\n        \"openWorldHint\": False     # Tool does not interact with external entities\n    }\n)\nasync def service_tool_name(params: ServiceToolInput) -> str:\n    '''Tool description automatically becomes the 'description' field.\n\n    This tool performs a specific operation on the service. It validates all inputs\n    using the ServiceToolInput Pydantic model before processing.\n\n    Args:\n        params (ServiceToolInput): Validated input parameters containing:\n            - param1 (str): First parameter description\n            - param2 (Optional[int]): Optional parameter with default\n            - tags (Optional[List[str]]): List of tags\n\n    Returns:\n        str: JSON-formatted response containing operation results\n    '''\n    # Implementation here\n    pass\n```\n\n## Pydantic v2 Key Features\n\n- Use `model_config` instead of nested `Config` class\n- Use `field_validator` instead of deprecated `validator`\n- Use `model_dump()` instead of deprecated `dict()`\n- Validators require `@classmethod` decorator\n- Type hints are required for validator methods\n\n```python\nfrom pydantic import BaseModel, Field, field_validator, ConfigDict\n\nclass CreateUserInput(BaseModel):\n    model_config = ConfigDict(\n        str_strip_whitespace=True,\n        validate_assignment=True\n    )\n\n    name: str = Field(..., description=\"User's full name\", min_length=1, max_length=100)\n    email: str = Field(..., description=\"User's email address\", pattern=r'^[\\w\\.-]+@[\\w\\.-]+\\.\\w+$')\n    age: int = Field(..., description=\"User's age\", ge=0, le=150)\n\n    @field_validator('email')\n    @classmethod\n    def validate_email(cls, v: str) -> str:\n        if not v.strip():\n            raise ValueError(\"Email cannot be empty\")\n        return v.lower()\n```\n\n## Response Format Options\n\nSupport multiple output formats for flexibility:\n\n```python\nfrom enum import Enum\n\nclass ResponseFormat(str, Enum):\n    '''Output format for tool responses.'''\n    MARKDOWN = \"markdown\"\n    JSON = \"json\"\n\nclass UserSearchInput(BaseModel):\n    query: str = Field(..., description=\"Search query\")\n    response_format: ResponseFormat = Field(\n        default=ResponseFormat.MARKDOWN,\n        description=\"Output format: 'markdown' for human-readable or 'json' for machine-readable\"\n    )\n```\n\n**Markdown format**:\n- Use headers, lists, and formatting for clarity\n- Convert timestamps to human-readable format (e.g., \"2024-01-15 10:30:00 UTC\" instead of epoch)\n- Show display names with IDs in parentheses (e.g., \"@john.doe (U123456)\")\n- Omit verbose metadata (e.g., show only one profile image URL, not all sizes)\n- Group related information logically\n\n**JSON format**:\n- Return complete, structured data suitable for programmatic processing\n- Include all available fields and metadata\n- Use consistent field names and types\n\n## Pagination Implementation\n\nFor tools that list resources:\n\n```python\nclass ListInput(BaseModel):\n    limit: Optional[int] = Field(default=20, description=\"Maximum results to return\", ge=1, le=100)\n    offset: Optional[int] = Field(default=0, description=\"Number of results to skip for pagination\", ge=0)\n\nasync def list_items(params: ListInput) -> str:\n    # Make API request with pagination\n    data = await api_request(limit=params.limit, offset=params.offset)\n\n    # Return pagination info\n    response = {\n        \"total\": data[\"total\"],\n        \"count\": len(data[\"items\"]),\n        \"offset\": params.offset,\n        \"items\": data[\"items\"],\n        \"has_more\": data[\"total\"] > params.offset + len(data[\"items\"]),\n        \"next_offset\": params.offset + len(data[\"items\"]) if data[\"total\"] > params.offset + len(data[\"items\"]) else None\n    }\n    return json.dumps(response, indent=2)\n```\n\n## Error Handling\n\nProvide clear, actionable error messages:\n\n```python\ndef _handle_api_error(e: Exception) -> str:\n    '''Consistent error formatting across all tools.'''\n    if isinstance(e, httpx.HTTPStatusError):\n        if e.response.status_code == 404:\n            return \"Error: Resource not found. Please check the ID is correct.\"\n        elif e.response.status_code == 403:\n            return \"Error: Permission denied. You don't have access to this resource.\"\n        elif e.response.status_code == 429:\n            return \"Error: Rate limit exceeded. Please wait before making more requests.\"\n        return f\"Error: API request failed with status {e.response.status_code}\"\n    elif isinstance(e, httpx.TimeoutException):\n        return \"Error: Request timed out. Please try again.\"\n    return f\"Error: Unexpected error occurred: {type(e).__name__}\"\n```\n\n## Shared Utilities\n\nExtract common functionality into reusable functions:\n\n```python\n# Shared API request function\nasync def _make_api_request(endpoint: str, method: str = \"GET\", **kwargs) -> dict:\n    '''Reusable function for all API calls.'''\n    async with httpx.AsyncClient() as client:\n        response = await client.request(\n            method,\n            f\"{API_BASE_URL}/{endpoint}\",\n            timeout=30.0,\n            **kwargs\n        )\n        response.raise_for_status()\n        return response.json()\n```\n\n## Async/Await Best Practices\n\nAlways use async/await for network requests and I/O operations:\n\n```python\n# Good: Async network request\nasync def fetch_data(resource_id: str) -> dict:\n    async with httpx.AsyncClient() as client:\n        response = await client.get(f\"{API_URL}/resource/{resource_id}\")\n        response.raise_for_status()\n        return response.json()\n\n# Bad: Synchronous request\ndef fetch_data(resource_id: str) -> dict:\n    response = requests.get(f\"{API_URL}/resource/{resource_id}\")  # Blocks\n    return response.json()\n```\n\n## Type Hints\n\nUse type hints throughout:\n\n```python\nfrom typing import Optional, List, Dict, Any\n\nasync def get_user(user_id: str) -> Dict[str, Any]:\n    data = await fetch_user(user_id)\n    return {\"id\": data[\"id\"], \"name\": data[\"name\"]}\n```\n\n## Tool Docstrings\n\nEvery tool must have comprehensive docstrings with explicit type information:\n\n```python\nasync def search_users(params: UserSearchInput) -> str:\n    '''\n    Search for users in the Example system by name, email, or team.\n\n    This tool searches across all user profiles in the Example platform,\n    supporting partial matches and various search filters. It does NOT\n    create or modify users, only searches existing ones.\n\n    Args:\n        params (UserSearchInput): Validated input parameters containing:\n            - query (str): Search string to match against names/emails (e.g., \"john\", \"@example.com\", \"team:marketing\")\n            - limit (Optional[int]): Maximum results to return, between 1-100 (default: 20)\n            - offset (Optional[int]): Number of results to skip for pagination (default: 0)\n\n    Returns:\n        str: JSON-formatted string containing search results with the following schema:\n\n        Success response:\n        {\n            \"total\": int,           # Total number of matches found\n            \"count\": int,           # Number of results in this response\n            \"offset\": int,          # Current pagination offset\n            \"users\": [\n                {\n                    \"id\": str,      # User ID (e.g., \"U123456789\")\n                    \"name\": str,    # Full name (e.g., \"John Doe\")\n                    \"email\": str,   # Email address (e.g., \"john@example.com\")\n                    \"team\": str     # Team name (e.g., \"Marketing\") - optional\n                }\n            ]\n        }\n\n        Error response:\n        \"Error: <error message>\" or \"No users found matching '<query>'\"\n\n    Examples:\n        - Use when: \"Find all marketing team members\" -> params with query=\"team:marketing\"\n        - Use when: \"Search for John's account\" -> params with query=\"john\"\n        - Don't use when: You need to create a user (use example_create_user instead)\n        - Don't use when: You have a user ID and need full details (use example_get_user instead)\n\n    Error Handling:\n        - Input validation errors are handled by Pydantic model\n        - Returns \"Error: Rate limit exceeded\" if too many requests (429 status)\n        - Returns \"Error: Invalid API authentication\" if API key is invalid (401 status)\n        - Returns formatted list of results or \"No users found matching 'query'\"\n    '''\n```\n\n## Complete Example\n\nSee below for a complete Python MCP server example:\n\n```python\n#!/usr/bin/env python3\n'''\nMCP Server for Example Service.\n\nThis server provides tools to interact with Example API, including user search,\nproject management, and data export capabilities.\n'''\n\nfrom typing import Optional, List, Dict, Any\nfrom enum import Enum\nimport httpx\nfrom pydantic import BaseModel, Field, field_validator, ConfigDict\nfrom mcp.server.fastmcp import FastMCP\n\n# Initialize the MCP server\nmcp = FastMCP(\"example_mcp\")\n\n# Constants\nAPI_BASE_URL = \"https://api.example.com/v1\"\n\n# Enums\nclass ResponseFormat(str, Enum):\n    '''Output format for tool responses.'''\n    MARKDOWN = \"markdown\"\n    JSON = \"json\"\n\n# Pydantic Models for Input Validation\nclass UserSearchInput(BaseModel):\n    '''Input model for user search operations.'''\n    model_config = ConfigDict(\n        str_strip_whitespace=True,\n        validate_assignment=True\n    )\n\n    query: str = Field(..., description=\"Search string to match against names/emails\", min_length=2, max_length=200)\n    limit: Optional[int] = Field(default=20, description=\"Maximum results to return\", ge=1, le=100)\n    offset: Optional[int] = Field(default=0, description=\"Number of results to skip for pagination\", ge=0)\n    response_format: ResponseFormat = Field(default=ResponseFormat.MARKDOWN, description=\"Output format\")\n\n    @field_validator('query')\n    @classmethod\n    def validate_query(cls, v: str) -> str:\n        if not v.strip():\n            raise ValueError(\"Query cannot be empty or whitespace only\")\n        return v.strip()\n\n# Shared utility functions\nasync def _make_api_request(endpoint: str, method: str = \"GET\", **kwargs) -> dict:\n    '''Reusable function for all API calls.'''\n    async with httpx.AsyncClient() as client:\n        response = await client.request(\n            method,\n            f\"{API_BASE_URL}/{endpoint}\",\n            timeout=30.0,\n            **kwargs\n        )\n        response.raise_for_status()\n        return response.json()\n\ndef _handle_api_error(e: Exception) -> str:\n    '''Consistent error formatting across all tools.'''\n    if isinstance(e, httpx.HTTPStatusError):\n        if e.response.status_code == 404:\n            return \"Error: Resource not found. Please check the ID is correct.\"\n        elif e.response.status_code == 403:\n            return \"Error: Permission denied. You don't have access to this resource.\"\n        elif e.response.status_code == 429:\n            return \"Error: Rate limit exceeded. Please wait before making more requests.\"\n        return f\"Error: API request failed with status {e.response.status_code}\"\n    elif isinstance(e, httpx.TimeoutException):\n        return \"Error: Request timed out. Please try again.\"\n    return f\"Error: Unexpected error occurred: {type(e).__name__}\"\n\n# Tool definitions\n@mcp.tool(\n    name=\"example_search_users\",\n    annotations={\n        \"title\": \"Search Example Users\",\n        \"readOnlyHint\": True,\n        \"destructiveHint\": False,\n        \"idempotentHint\": True,\n        \"openWorldHint\": True\n    }\n)\nasync def example_search_users(params: UserSearchInput) -> str:\n    '''Search for users in the Example system by name, email, or team.\n\n    [Full docstring as shown above]\n    '''\n    try:\n        # Make API request using validated parameters\n        data = await _make_api_request(\n            \"users/search\",\n            params={\n                \"q\": params.query,\n                \"limit\": params.limit,\n                \"offset\": params.offset\n            }\n        )\n\n        users = data.get(\"users\", [])\n        total = data.get(\"total\", 0)\n\n        if not users:\n            return f\"No users found matching '{params.query}'\"\n\n        # Format response based on requested format\n        if params.response_format == ResponseFormat.MARKDOWN:\n            lines = [f\"# User Search Results: '{params.query}'\", \"\"]\n            lines.append(f\"Found {total} users (showing {len(users)})\")\n            lines.append(\"\")\n\n            for user in users:\n                lines.append(f\"## {user['name']} ({user['id']})\")\n                lines.append(f\"- **Email**: {user['email']}\")\n                if user.get('team'):\n                    lines.append(f\"- **Team**: {user['team']}\")\n                lines.append(\"\")\n\n            return \"\\n\".join(lines)\n\n        else:\n            # Machine-readable JSON format\n            import json\n            response = {\n                \"total\": total,\n                \"count\": len(users),\n                \"offset\": params.offset,\n                \"users\": users\n            }\n            return json.dumps(response, indent=2)\n\n    except Exception as e:\n        return _handle_api_error(e)\n\nif __name__ == \"__main__\":\n    mcp.run()\n```\n\n---\n\n## Advanced FastMCP Features\n\n### Context Parameter Injection\n\nFastMCP can automatically inject a `Context` parameter into tools for advanced capabilities like logging, progress reporting, resource reading, and user interaction:\n\n```python\nfrom mcp.server.fastmcp import FastMCP, Context\n\nmcp = FastMCP(\"example_mcp\")\n\n@mcp.tool()\nasync def advanced_search(query: str, ctx: Context) -> str:\n    '''Advanced tool with context access for logging and progress.'''\n\n    # Report progress for long operations\n    await ctx.report_progress(0.25, \"Starting search...\")\n\n    # Log information for debugging\n    await ctx.log_info(\"Processing query\", {\"query\": query, \"timestamp\": datetime.now()})\n\n    # Perform search\n    results = await search_api(query)\n    await ctx.report_progress(0.75, \"Formatting results...\")\n\n    # Access server configuration\n    server_name = ctx.fastmcp.name\n\n    return format_results(results)\n\n@mcp.tool()\nasync def interactive_tool(resource_id: str, ctx: Context) -> str:\n    '''Tool that can request additional input from users.'''\n\n    # Request sensitive information when needed\n    api_key = await ctx.elicit(\n        prompt=\"Please provide your API key:\",\n        input_type=\"password\"\n    )\n\n    # Use the provided key\n    return await api_call(resource_id, api_key)\n```\n\n**Context capabilities:**\n- `ctx.report_progress(progress, message)` - Report progress for long operations\n- `ctx.log_info(message, data)` / `ctx.log_error()` / `ctx.log_debug()` - Logging\n- `ctx.elicit(prompt, input_type)` - Request input from users\n- `ctx.fastmcp.name` - Access server configuration\n- `ctx.read_resource(uri)` - Read MCP resources\n\n### Resource Registration\n\nExpose data as resources for efficient, template-based access:\n\n```python\n@mcp.resource(\"file://documents/{name}\")\nasync def get_document(name: str) -> str:\n    '''Expose documents as MCP resources.\n\n    Resources are useful for static or semi-static data that doesn't\n    require complex parameters. They use URI templates for flexible access.\n    '''\n    document_path = f\"./docs/{name}\"\n    with open(document_path, \"r\") as f:\n        return f.read()\n\n@mcp.resource(\"config://settings/{key}\")\nasync def get_setting(key: str, ctx: Context) -> str:\n    '''Expose configuration as resources with context.'''\n    settings = await load_settings()\n    return json.dumps(settings.get(key, {}))\n```\n\n**When to use Resources vs Tools:**\n- **Resources**: For data access with simple parameters (URI templates)\n- **Tools**: For complex operations with validation and business logic\n\n### Structured Output Types\n\nFastMCP supports multiple return types beyond strings:\n\n```python\nfrom typing import TypedDict\nfrom dataclasses import dataclass\nfrom pydantic import BaseModel\n\n# TypedDict for structured returns\nclass UserData(TypedDict):\n    id: str\n    name: str\n    email: str\n\n@mcp.tool()\nasync def get_user_typed(user_id: str) -> UserData:\n    '''Returns structured data - FastMCP handles serialization.'''\n    return {\"id\": user_id, \"name\": \"John Doe\", \"email\": \"john@example.com\"}\n\n# Pydantic models for complex validation\nclass DetailedUser(BaseModel):\n    id: str\n    name: str\n    email: str\n    created_at: datetime\n    metadata: Dict[str, Any]\n\n@mcp.tool()\nasync def get_user_detailed(user_id: str) -> DetailedUser:\n    '''Returns Pydantic model - automatically generates schema.'''\n    user = await fetch_user(user_id)\n    return DetailedUser(**user)\n```\n\n### Lifespan Management\n\nInitialize resources that persist across requests:\n\n```python\nfrom contextlib import asynccontextmanager\n\n@asynccontextmanager\nasync def app_lifespan():\n    '''Manage resources that live for the server's lifetime.'''\n    # Initialize connections, load config, etc.\n    db = await connect_to_database()\n    config = load_configuration()\n\n    # Make available to all tools\n    yield {\"db\": db, \"config\": config}\n\n    # Cleanup on shutdown\n    await db.close()\n\nmcp = FastMCP(\"example_mcp\", lifespan=app_lifespan)\n\n@mcp.tool()\nasync def query_data(query: str, ctx: Context) -> str:\n    '''Access lifespan resources through context.'''\n    db = ctx.request_context.lifespan_state[\"db\"]\n    results = await db.query(query)\n    return format_results(results)\n```\n\n### Transport Options\n\nFastMCP supports two main transport mechanisms:\n\n```python\n# stdio transport (for local tools) - default\nif __name__ == \"__main__\":\n    mcp.run()\n\n# Streamable HTTP transport (for remote servers)\nif __name__ == \"__main__\":\n    mcp.run(transport=\"streamable_http\", port=8000)\n```\n\n**Transport selection:**\n- **stdio**: Command-line tools, local integrations, subprocess execution\n- **Streamable HTTP**: Web services, remote access, multiple clients\n\n---\n\n## Code Best Practices\n\n### Code Composability and Reusability\n\nYour implementation MUST prioritize composability and code reuse:\n\n1. **Extract Common Functionality**:\n   - Create reusable helper functions for operations used across multiple tools\n   - Build shared API clients for HTTP requests instead of duplicating code\n   - Centralize error handling logic in utility functions\n   - Extract business logic into dedicated functions that can be composed\n   - Extract shared markdown or JSON field selection & formatting functionality\n\n2. **Avoid Duplication**:\n   - NEVER copy-paste similar code between tools\n   - If you find yourself writing similar logic twice, extract it into a function\n   - Common operations like pagination, filtering, field selection, and formatting should be shared\n   - Authentication/authorization logic should be centralized\n\n### Python-Specific Best Practices\n\n1. **Use Type Hints**: Always include type annotations for function parameters and return values\n2. **Pydantic Models**: Define clear Pydantic models for all input validation\n3. **Avoid Manual Validation**: Let Pydantic handle input validation with constraints\n4. **Proper Imports**: Group imports (standard library, third-party, local)\n5. **Error Handling**: Use specific exception types (httpx.HTTPStatusError, not generic Exception)\n6. **Async Context Managers**: Use `async with` for resources that need cleanup\n7. **Constants**: Define module-level constants in UPPER_CASE\n\n## Quality Checklist\n\nBefore finalizing your Python MCP server implementation, ensure:\n\n### Strategic Design\n- [ ] Tools enable complete workflows, not just API endpoint wrappers\n- [ ] Tool names reflect natural task subdivisions\n- [ ] Response formats optimize for agent context efficiency\n- [ ] Human-readable identifiers used where appropriate\n- [ ] Error messages guide agents toward correct usage\n\n### Implementation Quality\n- [ ] FOCUSED IMPLEMENTATION: Most important and valuable tools implemented\n- [ ] All tools have descriptive names and documentation\n- [ ] Return types are consistent across similar operations\n- [ ] Error handling is implemented for all external calls\n- [ ] Server name follows format: `{service}_mcp`\n- [ ] All network operations use async/await\n- [ ] Common functionality is extracted into reusable functions\n- [ ] Error messages are clear, actionable, and educational\n- [ ] Outputs are properly validated and formatted\n\n### Tool Configuration\n- [ ] All tools implement 'name' and 'annotations' in the decorator\n- [ ] Annotations correctly set (readOnlyHint, destructiveHint, idempotentHint, openWorldHint)\n- [ ] All tools use Pydantic BaseModel for input validation with Field() definitions\n- [ ] All Pydantic Fields have explicit types and descriptions with constraints\n- [ ] All tools have comprehensive docstrings with explicit input/output types\n- [ ] Docstrings include complete schema structure for dict/JSON returns\n- [ ] Pydantic models handle input validation (no manual validation needed)\n\n### Advanced Features (where applicable)\n- [ ] Context injection used for logging, progress, or elicitation\n- [ ] Resources registered for appropriate data endpoints\n- [ ] Lifespan management implemented for persistent connections\n- [ ] Structured output types used (TypedDict, Pydantic models)\n- [ ] Appropriate transport configured (stdio or streamable HTTP)\n\n### Code Quality\n- [ ] File includes proper imports including Pydantic imports\n- [ ] Pagination is properly implemented where applicable\n- [ ] Filtering options are provided for potentially large result sets\n- [ ] All async functions are properly defined with `async def`\n- [ ] HTTP client usage follows async patterns with proper context managers\n- [ ] Type hints are used throughout the code\n- [ ] Constants are defined at module level in UPPER_CASE\n\n### Testing\n- [ ] Server runs successfully: `python your_server.py --help`\n- [ ] All imports resolve correctly\n- [ ] Sample tool calls work as expected\n- [ ] Error scenarios handled gracefully",
        "skills/pdf/SKILL.md": "---\nname: pdf\ndescription: Comprehensive PDF manipulation toolkit for extracting text and tables, creating new PDFs, merging/splitting documents, and handling forms. When Claude needs to fill in a PDF form or programmatically process, generate, or analyze PDF documents at scale.\nlicense: Proprietary. LICENSE.txt has complete terms\n---\n\n# PDF Processing Guide\n\n## Overview\n\nThis guide covers essential PDF processing operations using Python libraries and command-line tools. For advanced features, JavaScript libraries, and detailed examples, see reference.md. If you need to fill out a PDF form, read forms.md and follow its instructions.\n\n## Quick Start\n\n```python\nfrom pypdf import PdfReader, PdfWriter\n\n# Read a PDF\nreader = PdfReader(\"document.pdf\")\nprint(f\"Pages: {len(reader.pages)}\")\n\n# Extract text\ntext = \"\"\nfor page in reader.pages:\n    text += page.extract_text()\n```\n\n## Python Libraries\n\n### pypdf - Basic Operations\n\n#### Merge PDFs\n```python\nfrom pypdf import PdfWriter, PdfReader\n\nwriter = PdfWriter()\nfor pdf_file in [\"doc1.pdf\", \"doc2.pdf\", \"doc3.pdf\"]:\n    reader = PdfReader(pdf_file)\n    for page in reader.pages:\n        writer.add_page(page)\n\nwith open(\"merged.pdf\", \"wb\") as output:\n    writer.write(output)\n```\n\n#### Split PDF\n```python\nreader = PdfReader(\"input.pdf\")\nfor i, page in enumerate(reader.pages):\n    writer = PdfWriter()\n    writer.add_page(page)\n    with open(f\"page_{i+1}.pdf\", \"wb\") as output:\n        writer.write(output)\n```\n\n#### Extract Metadata\n```python\nreader = PdfReader(\"document.pdf\")\nmeta = reader.metadata\nprint(f\"Title: {meta.title}\")\nprint(f\"Author: {meta.author}\")\nprint(f\"Subject: {meta.subject}\")\nprint(f\"Creator: {meta.creator}\")\n```\n\n#### Rotate Pages\n```python\nreader = PdfReader(\"input.pdf\")\nwriter = PdfWriter()\n\npage = reader.pages[0]\npage.rotate(90)  # Rotate 90 degrees clockwise\nwriter.add_page(page)\n\nwith open(\"rotated.pdf\", \"wb\") as output:\n    writer.write(output)\n```\n\n### pdfplumber - Text and Table Extraction\n\n#### Extract Text with Layout\n```python\nimport pdfplumber\n\nwith pdfplumber.open(\"document.pdf\") as pdf:\n    for page in pdf.pages:\n        text = page.extract_text()\n        print(text)\n```\n\n#### Extract Tables\n```python\nwith pdfplumber.open(\"document.pdf\") as pdf:\n    for i, page in enumerate(pdf.pages):\n        tables = page.extract_tables()\n        for j, table in enumerate(tables):\n            print(f\"Table {j+1} on page {i+1}:\")\n            for row in table:\n                print(row)\n```\n\n#### Advanced Table Extraction\n```python\nimport pandas as pd\n\nwith pdfplumber.open(\"document.pdf\") as pdf:\n    all_tables = []\n    for page in pdf.pages:\n        tables = page.extract_tables()\n        for table in tables:\n            if table:  # Check if table is not empty\n                df = pd.DataFrame(table[1:], columns=table[0])\n                all_tables.append(df)\n\n# Combine all tables\nif all_tables:\n    combined_df = pd.concat(all_tables, ignore_index=True)\n    combined_df.to_excel(\"extracted_tables.xlsx\", index=False)\n```\n\n### reportlab - Create PDFs\n\n#### Basic PDF Creation\n```python\nfrom reportlab.lib.pagesizes import letter\nfrom reportlab.pdfgen import canvas\n\nc = canvas.Canvas(\"hello.pdf\", pagesize=letter)\nwidth, height = letter\n\n# Add text\nc.drawString(100, height - 100, \"Hello World!\")\nc.drawString(100, height - 120, \"This is a PDF created with reportlab\")\n\n# Add a line\nc.line(100, height - 140, 400, height - 140)\n\n# Save\nc.save()\n```\n\n#### Create PDF with Multiple Pages\n```python\nfrom reportlab.lib.pagesizes import letter\nfrom reportlab.platypus import SimpleDocTemplate, Paragraph, Spacer, PageBreak\nfrom reportlab.lib.styles import getSampleStyleSheet\n\ndoc = SimpleDocTemplate(\"report.pdf\", pagesize=letter)\nstyles = getSampleStyleSheet()\nstory = []\n\n# Add content\ntitle = Paragraph(\"Report Title\", styles['Title'])\nstory.append(title)\nstory.append(Spacer(1, 12))\n\nbody = Paragraph(\"This is the body of the report. \" * 20, styles['Normal'])\nstory.append(body)\nstory.append(PageBreak())\n\n# Page 2\nstory.append(Paragraph(\"Page 2\", styles['Heading1']))\nstory.append(Paragraph(\"Content for page 2\", styles['Normal']))\n\n# Build PDF\ndoc.build(story)\n```\n\n## Command-Line Tools\n\n### pdftotext (poppler-utils)\n```bash\n# Extract text\npdftotext input.pdf output.txt\n\n# Extract text preserving layout\npdftotext -layout input.pdf output.txt\n\n# Extract specific pages\npdftotext -f 1 -l 5 input.pdf output.txt  # Pages 1-5\n```\n\n### qpdf\n```bash\n# Merge PDFs\nqpdf --empty --pages file1.pdf file2.pdf -- merged.pdf\n\n# Split pages\nqpdf input.pdf --pages . 1-5 -- pages1-5.pdf\nqpdf input.pdf --pages . 6-10 -- pages6-10.pdf\n\n# Rotate pages\nqpdf input.pdf output.pdf --rotate=+90:1  # Rotate page 1 by 90 degrees\n\n# Remove password\nqpdf --password=mypassword --decrypt encrypted.pdf decrypted.pdf\n```\n\n### pdftk (if available)\n```bash\n# Merge\npdftk file1.pdf file2.pdf cat output merged.pdf\n\n# Split\npdftk input.pdf burst\n\n# Rotate\npdftk input.pdf rotate 1east output rotated.pdf\n```\n\n## Common Tasks\n\n### Extract Text from Scanned PDFs\n```python\n# Requires: pip install pytesseract pdf2image\nimport pytesseract\nfrom pdf2image import convert_from_path\n\n# Convert PDF to images\nimages = convert_from_path('scanned.pdf')\n\n# OCR each page\ntext = \"\"\nfor i, image in enumerate(images):\n    text += f\"Page {i+1}:\\n\"\n    text += pytesseract.image_to_string(image)\n    text += \"\\n\\n\"\n\nprint(text)\n```\n\n### Add Watermark\n```python\nfrom pypdf import PdfReader, PdfWriter\n\n# Create watermark (or load existing)\nwatermark = PdfReader(\"watermark.pdf\").pages[0]\n\n# Apply to all pages\nreader = PdfReader(\"document.pdf\")\nwriter = PdfWriter()\n\nfor page in reader.pages:\n    page.merge_page(watermark)\n    writer.add_page(page)\n\nwith open(\"watermarked.pdf\", \"wb\") as output:\n    writer.write(output)\n```\n\n### Extract Images\n```bash\n# Using pdfimages (poppler-utils)\npdfimages -j input.pdf output_prefix\n\n# This extracts all images as output_prefix-000.jpg, output_prefix-001.jpg, etc.\n```\n\n### Password Protection\n```python\nfrom pypdf import PdfReader, PdfWriter\n\nreader = PdfReader(\"input.pdf\")\nwriter = PdfWriter()\n\nfor page in reader.pages:\n    writer.add_page(page)\n\n# Add password\nwriter.encrypt(\"userpassword\", \"ownerpassword\")\n\nwith open(\"encrypted.pdf\", \"wb\") as output:\n    writer.write(output)\n```\n\n## Quick Reference\n\n| Task | Best Tool | Command/Code |\n|------|-----------|--------------|\n| Merge PDFs | pypdf | `writer.add_page(page)` |\n| Split PDFs | pypdf | One page per file |\n| Extract text | pdfplumber | `page.extract_text()` |\n| Extract tables | pdfplumber | `page.extract_tables()` |\n| Create PDFs | reportlab | Canvas or Platypus |\n| Command line merge | qpdf | `qpdf --empty --pages ...` |\n| OCR scanned PDFs | pytesseract | Convert to image first |\n| Fill PDF forms | pdf-lib or pypdf (see forms.md) | See forms.md |\n\n## Next Steps\n\n- For advanced pypdfium2 usage, see reference.md\n- For JavaScript libraries (pdf-lib), see reference.md\n- If you need to fill out a PDF form, follow the instructions in forms.md\n- For troubleshooting guides, see reference.md\n",
        "skills/pdf/forms.md": "**CRITICAL: You MUST complete these steps in order. Do not skip ahead to writing code.**\n\nIf you need to fill out a PDF form, first check to see if the PDF has fillable form fields. Run this script from this file's directory:\n `python scripts/check_fillable_fields <file.pdf>`, and depending on the result go to either the \"Fillable fields\" or \"Non-fillable fields\" and follow those instructions.\n\n# Fillable fields\nIf the PDF has fillable form fields:\n- Run this script from this file's directory: `python scripts/extract_form_field_info.py <input.pdf> <field_info.json>`. It will create a JSON file with a list of fields in this format:\n```\n[\n  {\n    \"field_id\": (unique ID for the field),\n    \"page\": (page number, 1-based),\n    \"rect\": ([left, bottom, right, top] bounding box in PDF coordinates, y=0 is the bottom of the page),\n    \"type\": (\"text\", \"checkbox\", \"radio_group\", or \"choice\"),\n  },\n  // Checkboxes have \"checked_value\" and \"unchecked_value\" properties:\n  {\n    \"field_id\": (unique ID for the field),\n    \"page\": (page number, 1-based),\n    \"type\": \"checkbox\",\n    \"checked_value\": (Set the field to this value to check the checkbox),\n    \"unchecked_value\": (Set the field to this value to uncheck the checkbox),\n  },\n  // Radio groups have a \"radio_options\" list with the possible choices.\n  {\n    \"field_id\": (unique ID for the field),\n    \"page\": (page number, 1-based),\n    \"type\": \"radio_group\",\n    \"radio_options\": [\n      {\n        \"value\": (set the field to this value to select this radio option),\n        \"rect\": (bounding box for the radio button for this option)\n      },\n      // Other radio options\n    ]\n  },\n  // Multiple choice fields have a \"choice_options\" list with the possible choices:\n  {\n    \"field_id\": (unique ID for the field),\n    \"page\": (page number, 1-based),\n    \"type\": \"choice\",\n    \"choice_options\": [\n      {\n        \"value\": (set the field to this value to select this option),\n        \"text\": (display text of the option)\n      },\n      // Other choice options\n    ],\n  }\n]\n```\n- Convert the PDF to PNGs (one image for each page) with this script (run from this file's directory):\n`python scripts/convert_pdf_to_images.py <file.pdf> <output_directory>`\nThen analyze the images to determine the purpose of each form field (make sure to convert the bounding box PDF coordinates to image coordinates).\n- Create a `field_values.json` file in this format with the values to be entered for each field:\n```\n[\n  {\n    \"field_id\": \"last_name\", // Must match the field_id from `extract_form_field_info.py`\n    \"description\": \"The user's last name\",\n    \"page\": 1, // Must match the \"page\" value in field_info.json\n    \"value\": \"Simpson\"\n  },\n  {\n    \"field_id\": \"Checkbox12\",\n    \"description\": \"Checkbox to be checked if the user is 18 or over\",\n    \"page\": 1,\n    \"value\": \"/On\" // If this is a checkbox, use its \"checked_value\" value to check it. If it's a radio button group, use one of the \"value\" values in \"radio_options\".\n  },\n  // more fields\n]\n```\n- Run the `fill_fillable_fields.py` script from this file's directory to create a filled-in PDF:\n`python scripts/fill_fillable_fields.py <input pdf> <field_values.json> <output pdf>`\nThis script will verify that the field IDs and values you provide are valid; if it prints error messages, correct the appropriate fields and try again.\n\n# Non-fillable fields\nIf the PDF doesn't have fillable form fields, you'll need to visually determine where the data should be added and create text annotations. Follow the below steps *exactly*. You MUST perform all of these steps to ensure that the the form is accurately completed. Details for each step are below.\n- Convert the PDF to PNG images and determine field bounding boxes.\n- Create a JSON file with field information and validation images showing the bounding boxes.\n- Validate the the bounding boxes.\n- Use the bounding boxes to fill in the form.\n\n## Step 1: Visual Analysis (REQUIRED)\n- Convert the PDF to PNG images. Run this script from this file's directory:\n`python scripts/convert_pdf_to_images.py <file.pdf> <output_directory>`\nThe script will create a PNG image for each page in the PDF.\n- Carefully examine each PNG image and identify all form fields and areas where the user should enter data. For each form field where the user should enter text, determine bounding boxes for both the form field label, and the area where the user should enter text. The label and entry bounding boxes MUST NOT INTERSECT; the text entry box should only include the area where data should be entered. Usually this area will be immediately to the side, above, or below its label. Entry bounding boxes must be tall and wide enough to contain their text.\n\nThese are some examples of form structures that you might see:\n\n*Label inside box*\n```\n┌────────────────────────┐\n│ Name:                  │\n└────────────────────────┘\n```\nThe input area should be to the right of the \"Name\" label and extend to the edge of the box.\n\n*Label before line*\n```\nEmail: _______________________\n```\nThe input area should be above the line and include its entire width.\n\n*Label under line*\n```\n_________________________\nName\n```\nThe input area should be above the line and include the entire width of the line. This is common for signature and date fields.\n\n*Label above line*\n```\nPlease enter any special requests:\n________________________________________________\n```\nThe input area should extend from the bottom of the label to the line, and should include the entire width of the line.\n\n*Checkboxes*\n```\nAre you a US citizen? Yes □  No □\n```\nFor checkboxes:\n- Look for small square boxes (□) - these are the actual checkboxes to target. They may be to the left or right of their labels.\n- Distinguish between label text (\"Yes\", \"No\") and the clickable checkbox squares.\n- The entry bounding box should cover ONLY the small square, not the text label.\n\n### Step 2: Create fields.json and validation images (REQUIRED)\n- Create a file named `fields.json` with information for the form fields and bounding boxes in this format:\n```\n{\n  \"pages\": [\n    {\n      \"page_number\": 1,\n      \"image_width\": (first page image width in pixels),\n      \"image_height\": (first page image height in pixels),\n    },\n    {\n      \"page_number\": 2,\n      \"image_width\": (second page image width in pixels),\n      \"image_height\": (second page image height in pixels),\n    }\n    // additional pages\n  ],\n  \"form_fields\": [\n    // Example for a text field.\n    {\n      \"page_number\": 1,\n      \"description\": \"The user's last name should be entered here\",\n      // Bounding boxes are [left, top, right, bottom]. The bounding boxes for the label and text entry should not overlap.\n      \"field_label\": \"Last name\",\n      \"label_bounding_box\": [30, 125, 95, 142],\n      \"entry_bounding_box\": [100, 125, 280, 142],\n      \"entry_text\": {\n        \"text\": \"Johnson\", // This text will be added as an annotation at the entry_bounding_box location\n        \"font_size\": 14, // optional, defaults to 14\n        \"font_color\": \"000000\", // optional, RRGGBB format, defaults to 000000 (black)\n      }\n    },\n    // Example for a checkbox. TARGET THE SQUARE for the entry bounding box, NOT THE TEXT\n    {\n      \"page_number\": 2,\n      \"description\": \"Checkbox that should be checked if the user is over 18\",\n      \"entry_bounding_box\": [140, 525, 155, 540],  // Small box over checkbox square\n      \"field_label\": \"Yes\",\n      \"label_bounding_box\": [100, 525, 132, 540],  // Box containing \"Yes\" text\n      // Use \"X\" to check a checkbox.\n      \"entry_text\": {\n        \"text\": \"X\",\n      }\n    }\n    // additional form field entries\n  ]\n}\n```\n\nCreate validation images by running this script from this file's directory for each page:\n`python scripts/create_validation_image.py <page_number> <path_to_fields.json> <input_image_path> <output_image_path>\n\nThe validation images will have red rectangles where text should be entered, and blue rectangles covering label text.\n\n### Step 3: Validate Bounding Boxes (REQUIRED)\n#### Automated intersection check\n- Verify that none of bounding boxes intersect and that the entry bounding boxes are tall enough by checking the fields.json file with the `check_bounding_boxes.py` script (run from this file's directory):\n`python scripts/check_bounding_boxes.py <JSON file>`\n\nIf there are errors, reanalyze the relevant fields, adjust the bounding boxes, and iterate until there are no remaining errors. Remember: label (blue) bounding boxes should contain text labels, entry (red) boxes should not.\n\n#### Manual image inspection\n**CRITICAL: Do not proceed without visually inspecting validation images**\n- Red rectangles must ONLY cover input areas\n- Red rectangles MUST NOT contain any text\n- Blue rectangles should contain label text\n- For checkboxes:\n  - Red rectangle MUST be centered on the checkbox square\n  - Blue rectangle should cover the text label for the checkbox\n\n- If any rectangles look wrong, fix fields.json, regenerate the validation images, and verify again. Repeat this process until the bounding boxes are fully accurate.\n\n\n### Step 4: Add annotations to the PDF\nRun this script from this file's directory to create a filled-out PDF using the information in fields.json:\n`python scripts/fill_pdf_form_with_annotations.py <input_pdf_path> <path_to_fields.json> <output_pdf_path>\n",
        "skills/pdf/reference.md": "# PDF Processing Advanced Reference\n\nThis document contains advanced PDF processing features, detailed examples, and additional libraries not covered in the main skill instructions.\n\n## pypdfium2 Library (Apache/BSD License)\n\n### Overview\npypdfium2 is a Python binding for PDFium (Chromium's PDF library). It's excellent for fast PDF rendering, image generation, and serves as a PyMuPDF replacement.\n\n### Render PDF to Images\n```python\nimport pypdfium2 as pdfium\nfrom PIL import Image\n\n# Load PDF\npdf = pdfium.PdfDocument(\"document.pdf\")\n\n# Render page to image\npage = pdf[0]  # First page\nbitmap = page.render(\n    scale=2.0,  # Higher resolution\n    rotation=0  # No rotation\n)\n\n# Convert to PIL Image\nimg = bitmap.to_pil()\nimg.save(\"page_1.png\", \"PNG\")\n\n# Process multiple pages\nfor i, page in enumerate(pdf):\n    bitmap = page.render(scale=1.5)\n    img = bitmap.to_pil()\n    img.save(f\"page_{i+1}.jpg\", \"JPEG\", quality=90)\n```\n\n### Extract Text with pypdfium2\n```python\nimport pypdfium2 as pdfium\n\npdf = pdfium.PdfDocument(\"document.pdf\")\nfor i, page in enumerate(pdf):\n    text = page.get_text()\n    print(f\"Page {i+1} text length: {len(text)} chars\")\n```\n\n## JavaScript Libraries\n\n### pdf-lib (MIT License)\n\npdf-lib is a powerful JavaScript library for creating and modifying PDF documents in any JavaScript environment.\n\n#### Load and Manipulate Existing PDF\n```javascript\nimport { PDFDocument } from 'pdf-lib';\nimport fs from 'fs';\n\nasync function manipulatePDF() {\n    // Load existing PDF\n    const existingPdfBytes = fs.readFileSync('input.pdf');\n    const pdfDoc = await PDFDocument.load(existingPdfBytes);\n\n    // Get page count\n    const pageCount = pdfDoc.getPageCount();\n    console.log(`Document has ${pageCount} pages`);\n\n    // Add new page\n    const newPage = pdfDoc.addPage([600, 400]);\n    newPage.drawText('Added by pdf-lib', {\n        x: 100,\n        y: 300,\n        size: 16\n    });\n\n    // Save modified PDF\n    const pdfBytes = await pdfDoc.save();\n    fs.writeFileSync('modified.pdf', pdfBytes);\n}\n```\n\n#### Create Complex PDFs from Scratch\n```javascript\nimport { PDFDocument, rgb, StandardFonts } from 'pdf-lib';\nimport fs from 'fs';\n\nasync function createPDF() {\n    const pdfDoc = await PDFDocument.create();\n\n    // Add fonts\n    const helveticaFont = await pdfDoc.embedFont(StandardFonts.Helvetica);\n    const helveticaBold = await pdfDoc.embedFont(StandardFonts.HelveticaBold);\n\n    // Add page\n    const page = pdfDoc.addPage([595, 842]); // A4 size\n    const { width, height } = page.getSize();\n\n    // Add text with styling\n    page.drawText('Invoice #12345', {\n        x: 50,\n        y: height - 50,\n        size: 18,\n        font: helveticaBold,\n        color: rgb(0.2, 0.2, 0.8)\n    });\n\n    // Add rectangle (header background)\n    page.drawRectangle({\n        x: 40,\n        y: height - 100,\n        width: width - 80,\n        height: 30,\n        color: rgb(0.9, 0.9, 0.9)\n    });\n\n    // Add table-like content\n    const items = [\n        ['Item', 'Qty', 'Price', 'Total'],\n        ['Widget', '2', '$50', '$100'],\n        ['Gadget', '1', '$75', '$75']\n    ];\n\n    let yPos = height - 150;\n    items.forEach(row => {\n        let xPos = 50;\n        row.forEach(cell => {\n            page.drawText(cell, {\n                x: xPos,\n                y: yPos,\n                size: 12,\n                font: helveticaFont\n            });\n            xPos += 120;\n        });\n        yPos -= 25;\n    });\n\n    const pdfBytes = await pdfDoc.save();\n    fs.writeFileSync('created.pdf', pdfBytes);\n}\n```\n\n#### Advanced Merge and Split Operations\n```javascript\nimport { PDFDocument } from 'pdf-lib';\nimport fs from 'fs';\n\nasync function mergePDFs() {\n    // Create new document\n    const mergedPdf = await PDFDocument.create();\n\n    // Load source PDFs\n    const pdf1Bytes = fs.readFileSync('doc1.pdf');\n    const pdf2Bytes = fs.readFileSync('doc2.pdf');\n\n    const pdf1 = await PDFDocument.load(pdf1Bytes);\n    const pdf2 = await PDFDocument.load(pdf2Bytes);\n\n    // Copy pages from first PDF\n    const pdf1Pages = await mergedPdf.copyPages(pdf1, pdf1.getPageIndices());\n    pdf1Pages.forEach(page => mergedPdf.addPage(page));\n\n    // Copy specific pages from second PDF (pages 0, 2, 4)\n    const pdf2Pages = await mergedPdf.copyPages(pdf2, [0, 2, 4]);\n    pdf2Pages.forEach(page => mergedPdf.addPage(page));\n\n    const mergedPdfBytes = await mergedPdf.save();\n    fs.writeFileSync('merged.pdf', mergedPdfBytes);\n}\n```\n\n### pdfjs-dist (Apache License)\n\nPDF.js is Mozilla's JavaScript library for rendering PDFs in the browser.\n\n#### Basic PDF Loading and Rendering\n```javascript\nimport * as pdfjsLib from 'pdfjs-dist';\n\n// Configure worker (important for performance)\npdfjsLib.GlobalWorkerOptions.workerSrc = './pdf.worker.js';\n\nasync function renderPDF() {\n    // Load PDF\n    const loadingTask = pdfjsLib.getDocument('document.pdf');\n    const pdf = await loadingTask.promise;\n\n    console.log(`Loaded PDF with ${pdf.numPages} pages`);\n\n    // Get first page\n    const page = await pdf.getPage(1);\n    const viewport = page.getViewport({ scale: 1.5 });\n\n    // Render to canvas\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    canvas.height = viewport.height;\n    canvas.width = viewport.width;\n\n    const renderContext = {\n        canvasContext: context,\n        viewport: viewport\n    };\n\n    await page.render(renderContext).promise;\n    document.body.appendChild(canvas);\n}\n```\n\n#### Extract Text with Coordinates\n```javascript\nimport * as pdfjsLib from 'pdfjs-dist';\n\nasync function extractText() {\n    const loadingTask = pdfjsLib.getDocument('document.pdf');\n    const pdf = await loadingTask.promise;\n\n    let fullText = '';\n\n    // Extract text from all pages\n    for (let i = 1; i <= pdf.numPages; i++) {\n        const page = await pdf.getPage(i);\n        const textContent = await page.getTextContent();\n\n        const pageText = textContent.items\n            .map(item => item.str)\n            .join(' ');\n\n        fullText += `\\n--- Page ${i} ---\\n${pageText}`;\n\n        // Get text with coordinates for advanced processing\n        const textWithCoords = textContent.items.map(item => ({\n            text: item.str,\n            x: item.transform[4],\n            y: item.transform[5],\n            width: item.width,\n            height: item.height\n        }));\n    }\n\n    console.log(fullText);\n    return fullText;\n}\n```\n\n#### Extract Annotations and Forms\n```javascript\nimport * as pdfjsLib from 'pdfjs-dist';\n\nasync function extractAnnotations() {\n    const loadingTask = pdfjsLib.getDocument('annotated.pdf');\n    const pdf = await loadingTask.promise;\n\n    for (let i = 1; i <= pdf.numPages; i++) {\n        const page = await pdf.getPage(i);\n        const annotations = await page.getAnnotations();\n\n        annotations.forEach(annotation => {\n            console.log(`Annotation type: ${annotation.subtype}`);\n            console.log(`Content: ${annotation.contents}`);\n            console.log(`Coordinates: ${JSON.stringify(annotation.rect)}`);\n        });\n    }\n}\n```\n\n## Advanced Command-Line Operations\n\n### poppler-utils Advanced Features\n\n#### Extract Text with Bounding Box Coordinates\n```bash\n# Extract text with bounding box coordinates (essential for structured data)\npdftotext -bbox-layout document.pdf output.xml\n\n# The XML output contains precise coordinates for each text element\n```\n\n#### Advanced Image Conversion\n```bash\n# Convert to PNG images with specific resolution\npdftoppm -png -r 300 document.pdf output_prefix\n\n# Convert specific page range with high resolution\npdftoppm -png -r 600 -f 1 -l 3 document.pdf high_res_pages\n\n# Convert to JPEG with quality setting\npdftoppm -jpeg -jpegopt quality=85 -r 200 document.pdf jpeg_output\n```\n\n#### Extract Embedded Images\n```bash\n# Extract all embedded images with metadata\npdfimages -j -p document.pdf page_images\n\n# List image info without extracting\npdfimages -list document.pdf\n\n# Extract images in their original format\npdfimages -all document.pdf images/img\n```\n\n### qpdf Advanced Features\n\n#### Complex Page Manipulation\n```bash\n# Split PDF into groups of pages\nqpdf --split-pages=3 input.pdf output_group_%02d.pdf\n\n# Extract specific pages with complex ranges\nqpdf input.pdf --pages input.pdf 1,3-5,8,10-end -- extracted.pdf\n\n# Merge specific pages from multiple PDFs\nqpdf --empty --pages doc1.pdf 1-3 doc2.pdf 5-7 doc3.pdf 2,4 -- combined.pdf\n```\n\n#### PDF Optimization and Repair\n```bash\n# Optimize PDF for web (linearize for streaming)\nqpdf --linearize input.pdf optimized.pdf\n\n# Remove unused objects and compress\nqpdf --optimize-level=all input.pdf compressed.pdf\n\n# Attempt to repair corrupted PDF structure\nqpdf --check input.pdf\nqpdf --fix-qdf damaged.pdf repaired.pdf\n\n# Show detailed PDF structure for debugging\nqpdf --show-all-pages input.pdf > structure.txt\n```\n\n#### Advanced Encryption\n```bash\n# Add password protection with specific permissions\nqpdf --encrypt user_pass owner_pass 256 --print=none --modify=none -- input.pdf encrypted.pdf\n\n# Check encryption status\nqpdf --show-encryption encrypted.pdf\n\n# Remove password protection (requires password)\nqpdf --password=secret123 --decrypt encrypted.pdf decrypted.pdf\n```\n\n## Advanced Python Techniques\n\n### pdfplumber Advanced Features\n\n#### Extract Text with Precise Coordinates\n```python\nimport pdfplumber\n\nwith pdfplumber.open(\"document.pdf\") as pdf:\n    page = pdf.pages[0]\n    \n    # Extract all text with coordinates\n    chars = page.chars\n    for char in chars[:10]:  # First 10 characters\n        print(f\"Char: '{char['text']}' at x:{char['x0']:.1f} y:{char['y0']:.1f}\")\n    \n    # Extract text by bounding box (left, top, right, bottom)\n    bbox_text = page.within_bbox((100, 100, 400, 200)).extract_text()\n```\n\n#### Advanced Table Extraction with Custom Settings\n```python\nimport pdfplumber\nimport pandas as pd\n\nwith pdfplumber.open(\"complex_table.pdf\") as pdf:\n    page = pdf.pages[0]\n    \n    # Extract tables with custom settings for complex layouts\n    table_settings = {\n        \"vertical_strategy\": \"lines\",\n        \"horizontal_strategy\": \"lines\",\n        \"snap_tolerance\": 3,\n        \"intersection_tolerance\": 15\n    }\n    tables = page.extract_tables(table_settings)\n    \n    # Visual debugging for table extraction\n    img = page.to_image(resolution=150)\n    img.save(\"debug_layout.png\")\n```\n\n### reportlab Advanced Features\n\n#### Create Professional Reports with Tables\n```python\nfrom reportlab.platypus import SimpleDocTemplate, Table, TableStyle, Paragraph\nfrom reportlab.lib.styles import getSampleStyleSheet\nfrom reportlab.lib import colors\n\n# Sample data\ndata = [\n    ['Product', 'Q1', 'Q2', 'Q3', 'Q4'],\n    ['Widgets', '120', '135', '142', '158'],\n    ['Gadgets', '85', '92', '98', '105']\n]\n\n# Create PDF with table\ndoc = SimpleDocTemplate(\"report.pdf\")\nelements = []\n\n# Add title\nstyles = getSampleStyleSheet()\ntitle = Paragraph(\"Quarterly Sales Report\", styles['Title'])\nelements.append(title)\n\n# Add table with advanced styling\ntable = Table(data)\ntable.setStyle(TableStyle([\n    ('BACKGROUND', (0, 0), (-1, 0), colors.grey),\n    ('TEXTCOLOR', (0, 0), (-1, 0), colors.whitesmoke),\n    ('ALIGN', (0, 0), (-1, -1), 'CENTER'),\n    ('FONTNAME', (0, 0), (-1, 0), 'Helvetica-Bold'),\n    ('FONTSIZE', (0, 0), (-1, 0), 14),\n    ('BOTTOMPADDING', (0, 0), (-1, 0), 12),\n    ('BACKGROUND', (0, 1), (-1, -1), colors.beige),\n    ('GRID', (0, 0), (-1, -1), 1, colors.black)\n]))\nelements.append(table)\n\ndoc.build(elements)\n```\n\n## Complex Workflows\n\n### Extract Figures/Images from PDF\n\n#### Method 1: Using pdfimages (fastest)\n```bash\n# Extract all images with original quality\npdfimages -all document.pdf images/img\n```\n\n#### Method 2: Using pypdfium2 + Image Processing\n```python\nimport pypdfium2 as pdfium\nfrom PIL import Image\nimport numpy as np\n\ndef extract_figures(pdf_path, output_dir):\n    pdf = pdfium.PdfDocument(pdf_path)\n    \n    for page_num, page in enumerate(pdf):\n        # Render high-resolution page\n        bitmap = page.render(scale=3.0)\n        img = bitmap.to_pil()\n        \n        # Convert to numpy for processing\n        img_array = np.array(img)\n        \n        # Simple figure detection (non-white regions)\n        mask = np.any(img_array != [255, 255, 255], axis=2)\n        \n        # Find contours and extract bounding boxes\n        # (This is simplified - real implementation would need more sophisticated detection)\n        \n        # Save detected figures\n        # ... implementation depends on specific needs\n```\n\n### Batch PDF Processing with Error Handling\n```python\nimport os\nimport glob\nfrom pypdf import PdfReader, PdfWriter\nimport logging\n\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\ndef batch_process_pdfs(input_dir, operation='merge'):\n    pdf_files = glob.glob(os.path.join(input_dir, \"*.pdf\"))\n    \n    if operation == 'merge':\n        writer = PdfWriter()\n        for pdf_file in pdf_files:\n            try:\n                reader = PdfReader(pdf_file)\n                for page in reader.pages:\n                    writer.add_page(page)\n                logger.info(f\"Processed: {pdf_file}\")\n            except Exception as e:\n                logger.error(f\"Failed to process {pdf_file}: {e}\")\n                continue\n        \n        with open(\"batch_merged.pdf\", \"wb\") as output:\n            writer.write(output)\n    \n    elif operation == 'extract_text':\n        for pdf_file in pdf_files:\n            try:\n                reader = PdfReader(pdf_file)\n                text = \"\"\n                for page in reader.pages:\n                    text += page.extract_text()\n                \n                output_file = pdf_file.replace('.pdf', '.txt')\n                with open(output_file, 'w', encoding='utf-8') as f:\n                    f.write(text)\n                logger.info(f\"Extracted text from: {pdf_file}\")\n                \n            except Exception as e:\n                logger.error(f\"Failed to extract text from {pdf_file}: {e}\")\n                continue\n```\n\n### Advanced PDF Cropping\n```python\nfrom pypdf import PdfWriter, PdfReader\n\nreader = PdfReader(\"input.pdf\")\nwriter = PdfWriter()\n\n# Crop page (left, bottom, right, top in points)\npage = reader.pages[0]\npage.mediabox.left = 50\npage.mediabox.bottom = 50\npage.mediabox.right = 550\npage.mediabox.top = 750\n\nwriter.add_page(page)\nwith open(\"cropped.pdf\", \"wb\") as output:\n    writer.write(output)\n```\n\n## Performance Optimization Tips\n\n### 1. For Large PDFs\n- Use streaming approaches instead of loading entire PDF in memory\n- Use `qpdf --split-pages` for splitting large files\n- Process pages individually with pypdfium2\n\n### 2. For Text Extraction\n- `pdftotext -bbox-layout` is fastest for plain text extraction\n- Use pdfplumber for structured data and tables\n- Avoid `pypdf.extract_text()` for very large documents\n\n### 3. For Image Extraction\n- `pdfimages` is much faster than rendering pages\n- Use low resolution for previews, high resolution for final output\n\n### 4. For Form Filling\n- pdf-lib maintains form structure better than most alternatives\n- Pre-validate form fields before processing\n\n### 5. Memory Management\n```python\n# Process PDFs in chunks\ndef process_large_pdf(pdf_path, chunk_size=10):\n    reader = PdfReader(pdf_path)\n    total_pages = len(reader.pages)\n    \n    for start_idx in range(0, total_pages, chunk_size):\n        end_idx = min(start_idx + chunk_size, total_pages)\n        writer = PdfWriter()\n        \n        for i in range(start_idx, end_idx):\n            writer.add_page(reader.pages[i])\n        \n        # Process chunk\n        with open(f\"chunk_{start_idx//chunk_size}.pdf\", \"wb\") as output:\n            writer.write(output)\n```\n\n## Troubleshooting Common Issues\n\n### Encrypted PDFs\n```python\n# Handle password-protected PDFs\nfrom pypdf import PdfReader\n\ntry:\n    reader = PdfReader(\"encrypted.pdf\")\n    if reader.is_encrypted:\n        reader.decrypt(\"password\")\nexcept Exception as e:\n    print(f\"Failed to decrypt: {e}\")\n```\n\n### Corrupted PDFs\n```bash\n# Use qpdf to repair\nqpdf --check corrupted.pdf\nqpdf --replace-input corrupted.pdf\n```\n\n### Text Extraction Issues\n```python\n# Fallback to OCR for scanned PDFs\nimport pytesseract\nfrom pdf2image import convert_from_path\n\ndef extract_text_with_ocr(pdf_path):\n    images = convert_from_path(pdf_path)\n    text = \"\"\n    for i, image in enumerate(images):\n        text += pytesseract.image_to_string(image)\n    return text\n```\n\n## License Information\n\n- **pypdf**: BSD License\n- **pdfplumber**: MIT License\n- **pypdfium2**: Apache/BSD License\n- **reportlab**: BSD License\n- **poppler-utils**: GPL-2 License\n- **qpdf**: Apache License\n- **pdf-lib**: MIT License\n- **pdfjs-dist**: Apache License",
        "skills/pptx/SKILL.md": "---\nname: pptx\ndescription: \"Presentation creation, editing, and analysis. When Claude needs to work with presentations (.pptx files) for: (1) Creating new presentations, (2) Modifying or editing content, (3) Working with layouts, (4) Adding comments or speaker notes, or any other presentation tasks\"\nlicense: Proprietary. LICENSE.txt has complete terms\n---\n\n# PPTX creation, editing, and analysis\n\n## Overview\n\nA user may ask you to create, edit, or analyze the contents of a .pptx file. A .pptx file is essentially a ZIP archive containing XML files and other resources that you can read or edit. You have different tools and workflows available for different tasks.\n\n## Reading and analyzing content\n\n### Text extraction\nIf you just need to read the text contents of a presentation, you should convert the document to markdown:\n\n```bash\n# Convert document to markdown\npython -m markitdown path-to-file.pptx\n```\n\n### Raw XML access\nYou need raw XML access for: comments, speaker notes, slide layouts, animations, design elements, and complex formatting. For any of these features, you'll need to unpack a presentation and read its raw XML contents.\n\n#### Unpacking a file\n`python ooxml/scripts/unpack.py <office_file> <output_dir>`\n\n**Note**: The unpack.py script is located at `skills/pptx/ooxml/scripts/unpack.py` relative to the project root. If the script doesn't exist at this path, use `find . -name \"unpack.py\"` to locate it.\n\n#### Key file structures\n* `ppt/presentation.xml` - Main presentation metadata and slide references\n* `ppt/slides/slide{N}.xml` - Individual slide contents (slide1.xml, slide2.xml, etc.)\n* `ppt/notesSlides/notesSlide{N}.xml` - Speaker notes for each slide\n* `ppt/comments/modernComment_*.xml` - Comments for specific slides\n* `ppt/slideLayouts/` - Layout templates for slides\n* `ppt/slideMasters/` - Master slide templates\n* `ppt/theme/` - Theme and styling information\n* `ppt/media/` - Images and other media files\n\n#### Typography and color extraction\n**When given an example design to emulate**: Always analyze the presentation's typography and colors first using the methods below:\n1. **Read theme file**: Check `ppt/theme/theme1.xml` for colors (`<a:clrScheme>`) and fonts (`<a:fontScheme>`)\n2. **Sample slide content**: Examine `ppt/slides/slide1.xml` for actual font usage (`<a:rPr>`) and colors\n3. **Search for patterns**: Use grep to find color (`<a:solidFill>`, `<a:srgbClr>`) and font references across all XML files\n\n## Creating a new PowerPoint presentation **without a template**\n\nWhen creating a new PowerPoint presentation from scratch, use the **html2pptx** workflow to convert HTML slides to PowerPoint with accurate positioning.\n\n### Design Principles\n\n**CRITICAL**: Before creating any presentation, analyze the content and choose appropriate design elements:\n1. **Consider the subject matter**: What is this presentation about? What tone, industry, or mood does it suggest?\n2. **Check for branding**: If the user mentions a company/organization, consider their brand colors and identity\n3. **Match palette to content**: Select colors that reflect the subject\n4. **State your approach**: Explain your design choices before writing code\n\n**Requirements**:\n- ✅ State your content-informed design approach BEFORE writing code\n- ✅ Use web-safe fonts only: Arial, Helvetica, Times New Roman, Georgia, Courier New, Verdana, Tahoma, Trebuchet MS, Impact\n- ✅ Create clear visual hierarchy through size, weight, and color\n- ✅ Ensure readability: strong contrast, appropriately sized text, clean alignment\n- ✅ Be consistent: repeat patterns, spacing, and visual language across slides\n\n#### Color Palette Selection\n\n**Choosing colors creatively**:\n- **Think beyond defaults**: What colors genuinely match this specific topic? Avoid autopilot choices.\n- **Consider multiple angles**: Topic, industry, mood, energy level, target audience, brand identity (if mentioned)\n- **Be adventurous**: Try unexpected combinations - a healthcare presentation doesn't have to be green, finance doesn't have to be navy\n- **Build your palette**: Pick 3-5 colors that work together (dominant colors + supporting tones + accent)\n- **Ensure contrast**: Text must be clearly readable on backgrounds\n\n**Example color palettes** (use these to spark creativity - choose one, adapt it, or create your own):\n\n1. **Classic Blue**: Deep navy (#1C2833), slate gray (#2E4053), silver (#AAB7B8), off-white (#F4F6F6)\n2. **Teal & Coral**: Teal (#5EA8A7), deep teal (#277884), coral (#FE4447), white (#FFFFFF)\n3. **Bold Red**: Red (#C0392B), bright red (#E74C3C), orange (#F39C12), yellow (#F1C40F), green (#2ECC71)\n4. **Warm Blush**: Mauve (#A49393), blush (#EED6D3), rose (#E8B4B8), cream (#FAF7F2)\n5. **Burgundy Luxury**: Burgundy (#5D1D2E), crimson (#951233), rust (#C15937), gold (#997929)\n6. **Deep Purple & Emerald**: Purple (#B165FB), dark blue (#181B24), emerald (#40695B), white (#FFFFFF)\n7. **Cream & Forest Green**: Cream (#FFE1C7), forest green (#40695B), white (#FCFCFC)\n8. **Pink & Purple**: Pink (#F8275B), coral (#FF574A), rose (#FF737D), purple (#3D2F68)\n9. **Lime & Plum**: Lime (#C5DE82), plum (#7C3A5F), coral (#FD8C6E), blue-gray (#98ACB5)\n10. **Black & Gold**: Gold (#BF9A4A), black (#000000), cream (#F4F6F6)\n11. **Sage & Terracotta**: Sage (#87A96B), terracotta (#E07A5F), cream (#F4F1DE), charcoal (#2C2C2C)\n12. **Charcoal & Red**: Charcoal (#292929), red (#E33737), light gray (#CCCBCB)\n13. **Vibrant Orange**: Orange (#F96D00), light gray (#F2F2F2), charcoal (#222831)\n14. **Forest Green**: Black (#191A19), green (#4E9F3D), dark green (#1E5128), white (#FFFFFF)\n15. **Retro Rainbow**: Purple (#722880), pink (#D72D51), orange (#EB5C18), amber (#F08800), gold (#DEB600)\n16. **Vintage Earthy**: Mustard (#E3B448), sage (#CBD18F), forest green (#3A6B35), cream (#F4F1DE)\n17. **Coastal Rose**: Old rose (#AD7670), beaver (#B49886), eggshell (#F3ECDC), ash gray (#BFD5BE)\n18. **Orange & Turquoise**: Light orange (#FC993E), grayish turquoise (#667C6F), white (#FCFCFC)\n\n#### Visual Details Options\n\n**Geometric Patterns**:\n- Diagonal section dividers instead of horizontal\n- Asymmetric column widths (30/70, 40/60, 25/75)\n- Rotated text headers at 90° or 270°\n- Circular/hexagonal frames for images\n- Triangular accent shapes in corners\n- Overlapping shapes for depth\n\n**Border & Frame Treatments**:\n- Thick single-color borders (10-20pt) on one side only\n- Double-line borders with contrasting colors\n- Corner brackets instead of full frames\n- L-shaped borders (top+left or bottom+right)\n- Underline accents beneath headers (3-5pt thick)\n\n**Typography Treatments**:\n- Extreme size contrast (72pt headlines vs 11pt body)\n- All-caps headers with wide letter spacing\n- Numbered sections in oversized display type\n- Monospace (Courier New) for data/stats/technical content\n- Condensed fonts (Arial Narrow) for dense information\n- Outlined text for emphasis\n\n**Chart & Data Styling**:\n- Monochrome charts with single accent color for key data\n- Horizontal bar charts instead of vertical\n- Dot plots instead of bar charts\n- Minimal gridlines or none at all\n- Data labels directly on elements (no legends)\n- Oversized numbers for key metrics\n\n**Layout Innovations**:\n- Full-bleed images with text overlays\n- Sidebar column (20-30% width) for navigation/context\n- Modular grid systems (3×3, 4×4 blocks)\n- Z-pattern or F-pattern content flow\n- Floating text boxes over colored shapes\n- Magazine-style multi-column layouts\n\n**Background Treatments**:\n- Solid color blocks occupying 40-60% of slide\n- Gradient fills (vertical or diagonal only)\n- Split backgrounds (two colors, diagonal or vertical)\n- Edge-to-edge color bands\n- Negative space as a design element\n\n### Layout Tips\n**When creating slides with charts or tables:**\n- **Two-column layout (PREFERRED)**: Use a header spanning the full width, then two columns below - text/bullets in one column and the featured content in the other. This provides better balance and makes charts/tables more readable. Use flexbox with unequal column widths (e.g., 40%/60% split) to optimize space for each content type.\n- **Full-slide layout**: Let the featured content (chart/table) take up the entire slide for maximum impact and readability\n- **NEVER vertically stack**: Do not place charts/tables below text in a single column - this causes poor readability and layout issues\n\n### Workflow\n1. **MANDATORY - READ ENTIRE FILE**: Read [`html2pptx.md`](html2pptx.md) completely from start to finish. **NEVER set any range limits when reading this file.** Read the full file content for detailed syntax, critical formatting rules, and best practices before proceeding with presentation creation.\n2. Create an HTML file for each slide with proper dimensions (e.g., 720pt × 405pt for 16:9)\n   - Use `<p>`, `<h1>`-`<h6>`, `<ul>`, `<ol>` for all text content\n   - Use `class=\"placeholder\"` for areas where charts/tables will be added (render with gray background for visibility)\n   - **CRITICAL**: Rasterize gradients and icons as PNG images FIRST using Sharp, then reference in HTML\n   - **LAYOUT**: For slides with charts/tables/images, use either full-slide layout or two-column layout for better readability\n3. Create and run a JavaScript file using the [`html2pptx.js`](scripts/html2pptx.js) library to convert HTML slides to PowerPoint and save the presentation\n   - Use the `html2pptx()` function to process each HTML file\n   - Add charts and tables to placeholder areas using PptxGenJS API\n   - Save the presentation using `pptx.writeFile()`\n4. **Visual validation**: Generate thumbnails and inspect for layout issues\n   - Create thumbnail grid: `python scripts/thumbnail.py output.pptx workspace/thumbnails --cols 4`\n   - Read and carefully examine the thumbnail image for:\n     - **Text cutoff**: Text being cut off by header bars, shapes, or slide edges\n     - **Text overlap**: Text overlapping with other text or shapes\n     - **Positioning issues**: Content too close to slide boundaries or other elements\n     - **Contrast issues**: Insufficient contrast between text and backgrounds\n   - If issues found, adjust HTML margins/spacing/colors and regenerate the presentation\n   - Repeat until all slides are visually correct\n\n## Editing an existing PowerPoint presentation\n\nWhen edit slides in an existing PowerPoint presentation, you need to work with the raw Office Open XML (OOXML) format. This involves unpacking the .pptx file, editing the XML content, and repacking it.\n\n### Workflow\n1. **MANDATORY - READ ENTIRE FILE**: Read [`ooxml.md`](ooxml.md) (~500 lines) completely from start to finish.  **NEVER set any range limits when reading this file.**  Read the full file content for detailed guidance on OOXML structure and editing workflows before any presentation editing.\n2. Unpack the presentation: `python ooxml/scripts/unpack.py <office_file> <output_dir>`\n3. Edit the XML files (primarily `ppt/slides/slide{N}.xml` and related files)\n4. **CRITICAL**: Validate immediately after each edit and fix any validation errors before proceeding: `python ooxml/scripts/validate.py <dir> --original <file>`\n5. Pack the final presentation: `python ooxml/scripts/pack.py <input_directory> <office_file>`\n\n## Creating a new PowerPoint presentation **using a template**\n\nWhen you need to create a presentation that follows an existing template's design, you'll need to duplicate and re-arrange template slides before then replacing placeholder context.\n\n### Workflow\n1. **Extract template text AND create visual thumbnail grid**:\n   * Extract text: `python -m markitdown template.pptx > template-content.md`\n   * Read `template-content.md`: Read the entire file to understand the contents of the template presentation. **NEVER set any range limits when reading this file.**\n   * Create thumbnail grids: `python scripts/thumbnail.py template.pptx`\n   * See [Creating Thumbnail Grids](#creating-thumbnail-grids) section for more details\n\n2. **Analyze template and save inventory to a file**:\n   * **Visual Analysis**: Review thumbnail grid(s) to understand slide layouts, design patterns, and visual structure\n   * Create and save a template inventory file at `template-inventory.md` containing:\n     ```markdown\n     # Template Inventory Analysis\n     **Total Slides: [count]**\n     **IMPORTANT: Slides are 0-indexed (first slide = 0, last slide = count-1)**\n\n     ## [Category Name]\n     - Slide 0: [Layout code if available] - Description/purpose\n     - Slide 1: [Layout code] - Description/purpose\n     - Slide 2: [Layout code] - Description/purpose\n     [... EVERY slide must be listed individually with its index ...]\n     ```\n   * **Using the thumbnail grid**: Reference the visual thumbnails to identify:\n     - Layout patterns (title slides, content layouts, section dividers)\n     - Image placeholder locations and counts\n     - Design consistency across slide groups\n     - Visual hierarchy and structure\n   * This inventory file is REQUIRED for selecting appropriate templates in the next step\n\n3. **Create presentation outline based on template inventory**:\n   * Review available templates from step 2.\n   * Choose an intro or title template for the first slide. This should be one of the first templates.\n   * Choose safe, text-based layouts for the other slides.\n   * **CRITICAL: Match layout structure to actual content**:\n     - Single-column layouts: Use for unified narrative or single topic\n     - Two-column layouts: Use ONLY when you have exactly 2 distinct items/concepts\n     - Three-column layouts: Use ONLY when you have exactly 3 distinct items/concepts\n     - Image + text layouts: Use ONLY when you have actual images to insert\n     - Quote layouts: Use ONLY for actual quotes from people (with attribution), never for emphasis\n     - Never use layouts with more placeholders than you have content\n     - If you have 2 items, don't force them into a 3-column layout\n     - If you have 4+ items, consider breaking into multiple slides or using a list format\n   * Count your actual content pieces BEFORE selecting the layout\n   * Verify each placeholder in the chosen layout will be filled with meaningful content\n   * Select one option representing the **best** layout for each content section.\n   * Save `outline.md` with content AND template mapping that leverages available designs\n   * Example template mapping:\n      ```\n      # Template slides to use (0-based indexing)\n      # WARNING: Verify indices are within range! Template with 73 slides has indices 0-72\n      # Mapping: slide numbers from outline -> template slide indices\n      template_mapping = [\n          0,   # Use slide 0 (Title/Cover)\n          34,  # Use slide 34 (B1: Title and body)\n          34,  # Use slide 34 again (duplicate for second B1)\n          50,  # Use slide 50 (E1: Quote)\n          54,  # Use slide 54 (F2: Closing + Text)\n      ]\n      ```\n\n4. **Duplicate, reorder, and delete slides using `rearrange.py`**:\n   * Use the `scripts/rearrange.py` script to create a new presentation with slides in the desired order:\n     ```bash\n     python scripts/rearrange.py template.pptx working.pptx 0,34,34,50,52\n     ```\n   * The script handles duplicating repeated slides, deleting unused slides, and reordering automatically\n   * Slide indices are 0-based (first slide is 0, second is 1, etc.)\n   * The same slide index can appear multiple times to duplicate that slide\n\n5. **Extract ALL text using the `inventory.py` script**:\n   * **Run inventory extraction**:\n     ```bash\n     python scripts/inventory.py working.pptx text-inventory.json\n     ```\n   * **Read text-inventory.json**: Read the entire text-inventory.json file to understand all shapes and their properties. **NEVER set any range limits when reading this file.**\n\n   * The inventory JSON structure:\n      ```json\n        {\n          \"slide-0\": {\n            \"shape-0\": {\n              \"placeholder_type\": \"TITLE\",  // or null for non-placeholders\n              \"left\": 1.5,                  // position in inches\n              \"top\": 2.0,\n              \"width\": 7.5,\n              \"height\": 1.2,\n              \"paragraphs\": [\n                {\n                  \"text\": \"Paragraph text\",\n                  // Optional properties (only included when non-default):\n                  \"bullet\": true,           // explicit bullet detected\n                  \"level\": 0,               // only included when bullet is true\n                  \"alignment\": \"CENTER\",    // CENTER, RIGHT (not LEFT)\n                  \"space_before\": 10.0,     // space before paragraph in points\n                  \"space_after\": 6.0,       // space after paragraph in points\n                  \"line_spacing\": 22.4,     // line spacing in points\n                  \"font_name\": \"Arial\",     // from first run\n                  \"font_size\": 14.0,        // in points\n                  \"bold\": true,\n                  \"italic\": false,\n                  \"underline\": false,\n                  \"color\": \"FF0000\"         // RGB color\n                }\n              ]\n            }\n          }\n        }\n      ```\n\n   * Key features:\n     - **Slides**: Named as \"slide-0\", \"slide-1\", etc.\n     - **Shapes**: Ordered by visual position (top-to-bottom, left-to-right) as \"shape-0\", \"shape-1\", etc.\n     - **Placeholder types**: TITLE, CENTER_TITLE, SUBTITLE, BODY, OBJECT, or null\n     - **Default font size**: `default_font_size` in points extracted from layout placeholders (when available)\n     - **Slide numbers are filtered**: Shapes with SLIDE_NUMBER placeholder type are automatically excluded from inventory\n     - **Bullets**: When `bullet: true`, `level` is always included (even if 0)\n     - **Spacing**: `space_before`, `space_after`, and `line_spacing` in points (only included when set)\n     - **Colors**: `color` for RGB (e.g., \"FF0000\"), `theme_color` for theme colors (e.g., \"DARK_1\")\n     - **Properties**: Only non-default values are included in the output\n\n6. **Generate replacement text and save the data to a JSON file**\n   Based on the text inventory from the previous step:\n   - **CRITICAL**: First verify which shapes exist in the inventory - only reference shapes that are actually present\n   - **VALIDATION**: The replace.py script will validate that all shapes in your replacement JSON exist in the inventory\n     - If you reference a non-existent shape, you'll get an error showing available shapes\n     - If you reference a non-existent slide, you'll get an error indicating the slide doesn't exist\n     - All validation errors are shown at once before the script exits\n   - **IMPORTANT**: The replace.py script uses inventory.py internally to identify ALL text shapes\n   - **AUTOMATIC CLEARING**: ALL text shapes from the inventory will be cleared unless you provide \"paragraphs\" for them\n   - Add a \"paragraphs\" field to shapes that need content (not \"replacement_paragraphs\")\n   - Shapes without \"paragraphs\" in the replacement JSON will have their text cleared automatically\n   - Paragraphs with bullets will be automatically left aligned. Don't set the `alignment` property on when `\"bullet\": true`\n   - Generate appropriate replacement content for placeholder text\n   - Use shape size to determine appropriate content length\n   - **CRITICAL**: Include paragraph properties from the original inventory - don't just provide text\n   - **IMPORTANT**: When bullet: true, do NOT include bullet symbols (•, -, *) in text - they're added automatically\n   - **ESSENTIAL FORMATTING RULES**:\n     - Headers/titles should typically have `\"bold\": true`\n     - List items should have `\"bullet\": true, \"level\": 0` (level is required when bullet is true)\n     - Preserve any alignment properties (e.g., `\"alignment\": \"CENTER\"` for centered text)\n     - Include font properties when different from default (e.g., `\"font_size\": 14.0`, `\"font_name\": \"Lora\"`)\n     - Colors: Use `\"color\": \"FF0000\"` for RGB or `\"theme_color\": \"DARK_1\"` for theme colors\n     - The replacement script expects **properly formatted paragraphs**, not just text strings\n     - **Overlapping shapes**: Prefer shapes with larger default_font_size or more appropriate placeholder_type\n   - Save the updated inventory with replacements to `replacement-text.json`\n   - **WARNING**: Different template layouts have different shape counts - always check the actual inventory before creating replacements\n\n   Example paragraphs field showing proper formatting:\n   ```json\n   \"paragraphs\": [\n     {\n       \"text\": \"New presentation title text\",\n       \"alignment\": \"CENTER\",\n       \"bold\": true\n     },\n     {\n       \"text\": \"Section Header\",\n       \"bold\": true\n     },\n     {\n       \"text\": \"First bullet point without bullet symbol\",\n       \"bullet\": true,\n       \"level\": 0\n     },\n     {\n       \"text\": \"Red colored text\",\n       \"color\": \"FF0000\"\n     },\n     {\n       \"text\": \"Theme colored text\",\n       \"theme_color\": \"DARK_1\"\n     },\n     {\n       \"text\": \"Regular paragraph text without special formatting\"\n     }\n   ]\n   ```\n\n   **Shapes not listed in the replacement JSON are automatically cleared**:\n   ```json\n   {\n     \"slide-0\": {\n       \"shape-0\": {\n         \"paragraphs\": [...] // This shape gets new text\n       }\n       // shape-1 and shape-2 from inventory will be cleared automatically\n     }\n   }\n   ```\n\n   **Common formatting patterns for presentations**:\n   - Title slides: Bold text, sometimes centered\n   - Section headers within slides: Bold text\n   - Bullet lists: Each item needs `\"bullet\": true, \"level\": 0`\n   - Body text: Usually no special properties needed\n   - Quotes: May have special alignment or font properties\n\n7. **Apply replacements using the `replace.py` script**\n   ```bash\n   python scripts/replace.py working.pptx replacement-text.json output.pptx\n   ```\n\n   The script will:\n   - First extract the inventory of ALL text shapes using functions from inventory.py\n   - Validate that all shapes in the replacement JSON exist in the inventory\n   - Clear text from ALL shapes identified in the inventory\n   - Apply new text only to shapes with \"paragraphs\" defined in the replacement JSON\n   - Preserve formatting by applying paragraph properties from the JSON\n   - Handle bullets, alignment, font properties, and colors automatically\n   - Save the updated presentation\n\n   Example validation errors:\n   ```\n   ERROR: Invalid shapes in replacement JSON:\n     - Shape 'shape-99' not found on 'slide-0'. Available shapes: shape-0, shape-1, shape-4\n     - Slide 'slide-999' not found in inventory\n   ```\n\n   ```\n   ERROR: Replacement text made overflow worse in these shapes:\n     - slide-0/shape-2: overflow worsened by 1.25\" (was 0.00\", now 1.25\")\n   ```\n\n## Creating Thumbnail Grids\n\nTo create visual thumbnail grids of PowerPoint slides for quick analysis and reference:\n\n```bash\npython scripts/thumbnail.py template.pptx [output_prefix]\n```\n\n**Features**:\n- Creates: `thumbnails.jpg` (or `thumbnails-1.jpg`, `thumbnails-2.jpg`, etc. for large decks)\n- Default: 5 columns, max 30 slides per grid (5×6)\n- Custom prefix: `python scripts/thumbnail.py template.pptx my-grid`\n  - Note: The output prefix should include the path if you want output in a specific directory (e.g., `workspace/my-grid`)\n- Adjust columns: `--cols 4` (range: 3-6, affects slides per grid)\n- Grid limits: 3 cols = 12 slides/grid, 4 cols = 20, 5 cols = 30, 6 cols = 42\n- Slides are zero-indexed (Slide 0, Slide 1, etc.)\n\n**Use cases**:\n- Template analysis: Quickly understand slide layouts and design patterns\n- Content review: Visual overview of entire presentation\n- Navigation reference: Find specific slides by their visual appearance\n- Quality check: Verify all slides are properly formatted\n\n**Examples**:\n```bash\n# Basic usage\npython scripts/thumbnail.py presentation.pptx\n\n# Combine options: custom name, columns\npython scripts/thumbnail.py template.pptx analysis --cols 4\n```\n\n## Converting Slides to Images\n\nTo visually analyze PowerPoint slides, convert them to images using a two-step process:\n\n1. **Convert PPTX to PDF**:\n   ```bash\n   soffice --headless --convert-to pdf template.pptx\n   ```\n\n2. **Convert PDF pages to JPEG images**:\n   ```bash\n   pdftoppm -jpeg -r 150 template.pdf slide\n   ```\n   This creates files like `slide-1.jpg`, `slide-2.jpg`, etc.\n\nOptions:\n- `-r 150`: Sets resolution to 150 DPI (adjust for quality/size balance)\n- `-jpeg`: Output JPEG format (use `-png` for PNG if preferred)\n- `-f N`: First page to convert (e.g., `-f 2` starts from page 2)\n- `-l N`: Last page to convert (e.g., `-l 5` stops at page 5)\n- `slide`: Prefix for output files\n\nExample for specific range:\n```bash\npdftoppm -jpeg -r 150 -f 2 -l 5 template.pdf slide  # Converts only pages 2-5\n```\n\n## Code Style Guidelines\n**IMPORTANT**: When generating code for PPTX operations:\n- Write concise code\n- Avoid verbose variable names and redundant operations\n- Avoid unnecessary print statements\n\n## Dependencies\n\nRequired dependencies (should already be installed):\n\n- **markitdown**: `pip install \"markitdown[pptx]\"` (for text extraction from presentations)\n- **pptxgenjs**: `npm install -g pptxgenjs` (for creating presentations via html2pptx)\n- **playwright**: `npm install -g playwright` (for HTML rendering in html2pptx)\n- **react-icons**: `npm install -g react-icons react react-dom` (for icons)\n- **sharp**: `npm install -g sharp` (for SVG rasterization and image processing)\n- **LibreOffice**: `sudo apt-get install libreoffice` (for PDF conversion)\n- **Poppler**: `sudo apt-get install poppler-utils` (for pdftoppm to convert PDF to images)\n- **defusedxml**: `pip install defusedxml` (for secure XML parsing)",
        "skills/pptx/html2pptx.md": "# HTML to PowerPoint Guide\n\nConvert HTML slides to PowerPoint presentations with accurate positioning using the `html2pptx.js` library.\n\n## Table of Contents\n\n1. [Creating HTML Slides](#creating-html-slides)\n2. [Using the html2pptx Library](#using-the-html2pptx-library)\n3. [Using PptxGenJS](#using-pptxgenjs)\n\n---\n\n## Creating HTML Slides\n\nEvery HTML slide must include proper body dimensions:\n\n### Layout Dimensions\n\n- **16:9** (default): `width: 720pt; height: 405pt`\n- **4:3**: `width: 720pt; height: 540pt`\n- **16:10**: `width: 720pt; height: 450pt`\n\n### Supported Elements\n\n- `<p>`, `<h1>`-`<h6>` - Text with styling\n- `<ul>`, `<ol>` - Lists (never use manual bullets •, -, *)\n- `<b>`, `<strong>` - Bold text (inline formatting)\n- `<i>`, `<em>` - Italic text (inline formatting)\n- `<u>` - Underlined text (inline formatting)\n- `<span>` - Inline formatting with CSS styles (bold, italic, underline, color)\n- `<br>` - Line breaks\n- `<div>` with bg/border - Becomes shape\n- `<img>` - Images\n- `class=\"placeholder\"` - Reserved space for charts (returns `{ id, x, y, w, h }`)\n\n### Critical Text Rules\n\n**ALL text MUST be inside `<p>`, `<h1>`-`<h6>`, `<ul>`, or `<ol>` tags:**\n- ✅ Correct: `<div><p>Text here</p></div>`\n- ❌ Wrong: `<div>Text here</div>` - **Text will NOT appear in PowerPoint**\n- ❌ Wrong: `<span>Text</span>` - **Text will NOT appear in PowerPoint**\n- Text in `<div>` or `<span>` without a text tag will be silently ignored\n\n**NEVER use manual bullet symbols (•, -, *, etc.)** - Use `<ul>` or `<ol>` lists instead\n\n**ONLY use web-safe fonts that are universally available:**\n- ✅ Web-safe fonts: `Arial`, `Helvetica`, `Times New Roman`, `Georgia`, `Courier New`, `Verdana`, `Tahoma`, `Trebuchet MS`, `Impact`, `Comic Sans MS`\n- ❌ Wrong: `'Segoe UI'`, `'SF Pro'`, `'Roboto'`, custom fonts - **Might cause rendering issues**\n\n### Styling\n\n- Use `display: flex` on body to prevent margin collapse from breaking overflow validation\n- Use `margin` for spacing (padding included in size)\n- Inline formatting: Use `<b>`, `<i>`, `<u>` tags OR `<span>` with CSS styles\n  - `<span>` supports: `font-weight: bold`, `font-style: italic`, `text-decoration: underline`, `color: #rrggbb`\n  - `<span>` does NOT support: `margin`, `padding` (not supported in PowerPoint text runs)\n  - Example: `<span style=\"font-weight: bold; color: #667eea;\">Bold blue text</span>`\n- Flexbox works - positions calculated from rendered layout\n- Use hex colors with `#` prefix in CSS\n- **Text alignment**: Use CSS `text-align` (`center`, `right`, etc.) when needed as a hint to PptxGenJS for text formatting if text lengths are slightly off\n\n### Shape Styling (DIV elements only)\n\n**IMPORTANT: Backgrounds, borders, and shadows only work on `<div>` elements, NOT on text elements (`<p>`, `<h1>`-`<h6>`, `<ul>`, `<ol>`)**\n\n- **Backgrounds**: CSS `background` or `background-color` on `<div>` elements only\n  - Example: `<div style=\"background: #f0f0f0;\">` - Creates a shape with background\n- **Borders**: CSS `border` on `<div>` elements converts to PowerPoint shape borders\n  - Supports uniform borders: `border: 2px solid #333333`\n  - Supports partial borders: `border-left`, `border-right`, `border-top`, `border-bottom` (rendered as line shapes)\n  - Example: `<div style=\"border-left: 8pt solid #E76F51;\">`\n- **Border radius**: CSS `border-radius` on `<div>` elements for rounded corners\n  - `border-radius: 50%` or higher creates circular shape\n  - Percentages <50% calculated relative to shape's smaller dimension\n  - Supports px and pt units (e.g., `border-radius: 8pt;`, `border-radius: 12px;`)\n  - Example: `<div style=\"border-radius: 25%;\">` on 100x200px box = 25% of 100px = 25px radius\n- **Box shadows**: CSS `box-shadow` on `<div>` elements converts to PowerPoint shadows\n  - Supports outer shadows only (inset shadows are ignored to prevent corruption)\n  - Example: `<div style=\"box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);\">`\n  - Note: Inset/inner shadows are not supported by PowerPoint and will be skipped\n\n### Icons & Gradients\n\n- **CRITICAL: Never use CSS gradients (`linear-gradient`, `radial-gradient`)** - They don't convert to PowerPoint\n- **ALWAYS create gradient/icon PNGs FIRST using Sharp, then reference in HTML**\n- For gradients: Rasterize SVG to PNG background images\n- For icons: Rasterize react-icons SVG to PNG images\n- All visual effects must be pre-rendered as raster images before HTML rendering\n\n**Rasterizing Icons with Sharp:**\n\n```javascript\nconst React = require('react');\nconst ReactDOMServer = require('react-dom/server');\nconst sharp = require('sharp');\nconst { FaHome } = require('react-icons/fa');\n\nasync function rasterizeIconPng(IconComponent, color, size = \"256\", filename) {\n  const svgString = ReactDOMServer.renderToStaticMarkup(\n    React.createElement(IconComponent, { color: `#${color}`, size: size })\n  );\n\n  // Convert SVG to PNG using Sharp\n  await sharp(Buffer.from(svgString))\n    .png()\n    .toFile(filename);\n\n  return filename;\n}\n\n// Usage: Rasterize icon before using in HTML\nconst iconPath = await rasterizeIconPng(FaHome, \"4472c4\", \"256\", \"home-icon.png\");\n// Then reference in HTML: <img src=\"home-icon.png\" style=\"width: 40pt; height: 40pt;\">\n```\n\n**Rasterizing Gradients with Sharp:**\n\n```javascript\nconst sharp = require('sharp');\n\nasync function createGradientBackground(filename) {\n  const svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1000\" height=\"562.5\">\n    <defs>\n      <linearGradient id=\"g\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n        <stop offset=\"0%\" style=\"stop-color:#COLOR1\"/>\n        <stop offset=\"100%\" style=\"stop-color:#COLOR2\"/>\n      </linearGradient>\n    </defs>\n    <rect width=\"100%\" height=\"100%\" fill=\"url(#g)\"/>\n  </svg>`;\n\n  await sharp(Buffer.from(svg))\n    .png()\n    .toFile(filename);\n\n  return filename;\n}\n\n// Usage: Create gradient background before HTML\nconst bgPath = await createGradientBackground(\"gradient-bg.png\");\n// Then in HTML: <body style=\"background-image: url('gradient-bg.png');\">\n```\n\n### Example\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n<style>\nhtml { background: #ffffff; }\nbody {\n  width: 720pt; height: 405pt; margin: 0; padding: 0;\n  background: #f5f5f5; font-family: Arial, sans-serif;\n  display: flex;\n}\n.content { margin: 30pt; padding: 40pt; background: #ffffff; border-radius: 8pt; }\nh1 { color: #2d3748; font-size: 32pt; }\n.box {\n  background: #70ad47; padding: 20pt; border: 3px solid #5a8f37;\n  border-radius: 12pt; box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.25);\n}\n</style>\n</head>\n<body>\n<div class=\"content\">\n  <h1>Recipe Title</h1>\n  <ul>\n    <li><b>Item:</b> Description</li>\n  </ul>\n  <p>Text with <b>bold</b>, <i>italic</i>, <u>underline</u>.</p>\n  <div id=\"chart\" class=\"placeholder\" style=\"width: 350pt; height: 200pt;\"></div>\n\n  <!-- Text MUST be in <p> tags -->\n  <div class=\"box\">\n    <p>5</p>\n  </div>\n</div>\n</body>\n</html>\n```\n\n## Using the html2pptx Library\n\n### Dependencies\n\nThese libraries have been globally installed and are available to use:\n- `pptxgenjs`\n- `playwright`\n- `sharp`\n\n### Basic Usage\n\n```javascript\nconst pptxgen = require('pptxgenjs');\nconst html2pptx = require('./html2pptx');\n\nconst pptx = new pptxgen();\npptx.layout = 'LAYOUT_16x9';  // Must match HTML body dimensions\n\nconst { slide, placeholders } = await html2pptx('slide1.html', pptx);\n\n// Add chart to placeholder area\nif (placeholders.length > 0) {\n    slide.addChart(pptx.charts.LINE, chartData, placeholders[0]);\n}\n\nawait pptx.writeFile('output.pptx');\n```\n\n### API Reference\n\n#### Function Signature\n```javascript\nawait html2pptx(htmlFile, pres, options)\n```\n\n#### Parameters\n- `htmlFile` (string): Path to HTML file (absolute or relative)\n- `pres` (pptxgen): PptxGenJS presentation instance with layout already set\n- `options` (object, optional):\n  - `tmpDir` (string): Temporary directory for generated files (default: `process.env.TMPDIR || '/tmp'`)\n  - `slide` (object): Existing slide to reuse (default: creates new slide)\n\n#### Returns\n```javascript\n{\n    slide: pptxgenSlide,           // The created/updated slide\n    placeholders: [                 // Array of placeholder positions\n        { id: string, x: number, y: number, w: number, h: number },\n        ...\n    ]\n}\n```\n\n### Validation\n\nThe library automatically validates and collects all errors before throwing:\n\n1. **HTML dimensions must match presentation layout** - Reports dimension mismatches\n2. **Content must not overflow body** - Reports overflow with exact measurements\n3. **CSS gradients** - Reports unsupported gradient usage\n4. **Text element styling** - Reports backgrounds/borders/shadows on text elements (only allowed on divs)\n\n**All validation errors are collected and reported together** in a single error message, allowing you to fix all issues at once instead of one at a time.\n\n### Working with Placeholders\n\n```javascript\nconst { slide, placeholders } = await html2pptx('slide.html', pptx);\n\n// Use first placeholder\nslide.addChart(pptx.charts.BAR, data, placeholders[0]);\n\n// Find by ID\nconst chartArea = placeholders.find(p => p.id === 'chart-area');\nslide.addChart(pptx.charts.LINE, data, chartArea);\n```\n\n### Complete Example\n\n```javascript\nconst pptxgen = require('pptxgenjs');\nconst html2pptx = require('./html2pptx');\n\nasync function createPresentation() {\n    const pptx = new pptxgen();\n    pptx.layout = 'LAYOUT_16x9';\n    pptx.author = 'Your Name';\n    pptx.title = 'My Presentation';\n\n    // Slide 1: Title\n    const { slide: slide1 } = await html2pptx('slides/title.html', pptx);\n\n    // Slide 2: Content with chart\n    const { slide: slide2, placeholders } = await html2pptx('slides/data.html', pptx);\n\n    const chartData = [{\n        name: 'Sales',\n        labels: ['Q1', 'Q2', 'Q3', 'Q4'],\n        values: [4500, 5500, 6200, 7100]\n    }];\n\n    slide2.addChart(pptx.charts.BAR, chartData, {\n        ...placeholders[0],\n        showTitle: true,\n        title: 'Quarterly Sales',\n        showCatAxisTitle: true,\n        catAxisTitle: 'Quarter',\n        showValAxisTitle: true,\n        valAxisTitle: 'Sales ($000s)'\n    });\n\n    // Save\n    await pptx.writeFile({ fileName: 'presentation.pptx' });\n    console.log('Presentation created successfully!');\n}\n\ncreatePresentation().catch(console.error);\n```\n\n## Using PptxGenJS\n\nAfter converting HTML to slides with `html2pptx`, you'll use PptxGenJS to add dynamic content like charts, images, and additional elements.\n\n### ⚠️ Critical Rules\n\n#### Colors\n- **NEVER use `#` prefix** with hex colors in PptxGenJS - causes file corruption\n- ✅ Correct: `color: \"FF0000\"`, `fill: { color: \"0066CC\" }`\n- ❌ Wrong: `color: \"#FF0000\"` (breaks document)\n\n### Adding Images\n\nAlways calculate aspect ratios from actual image dimensions:\n\n```javascript\n// Get image dimensions: identify image.png | grep -o '[0-9]* x [0-9]*'\nconst imgWidth = 1860, imgHeight = 1519;  // From actual file\nconst aspectRatio = imgWidth / imgHeight;\n\nconst h = 3;  // Max height\nconst w = h * aspectRatio;\nconst x = (10 - w) / 2;  // Center on 16:9 slide\n\nslide.addImage({ path: \"chart.png\", x, y: 1.5, w, h });\n```\n\n### Adding Text\n\n```javascript\n// Rich text with formatting\nslide.addText([\n    { text: \"Bold \", options: { bold: true } },\n    { text: \"Italic \", options: { italic: true } },\n    { text: \"Normal\" }\n], {\n    x: 1, y: 2, w: 8, h: 1\n});\n```\n\n### Adding Shapes\n\n```javascript\n// Rectangle\nslide.addShape(pptx.shapes.RECTANGLE, {\n    x: 1, y: 1, w: 3, h: 2,\n    fill: { color: \"4472C4\" },\n    line: { color: \"000000\", width: 2 }\n});\n\n// Circle\nslide.addShape(pptx.shapes.OVAL, {\n    x: 5, y: 1, w: 2, h: 2,\n    fill: { color: \"ED7D31\" }\n});\n\n// Rounded rectangle\nslide.addShape(pptx.shapes.ROUNDED_RECTANGLE, {\n    x: 1, y: 4, w: 3, h: 1.5,\n    fill: { color: \"70AD47\" },\n    rectRadius: 0.2\n});\n```\n\n### Adding Charts\n\n**Required for most charts:** Axis labels using `catAxisTitle` (category) and `valAxisTitle` (value).\n\n**Chart Data Format:**\n- Use **single series with all labels** for simple bar/line charts\n- Each series creates a separate legend entry\n- Labels array defines X-axis values\n\n**Time Series Data - Choose Correct Granularity:**\n- **< 30 days**: Use daily grouping (e.g., \"10-01\", \"10-02\") - avoid monthly aggregation that creates single-point charts\n- **30-365 days**: Use monthly grouping (e.g., \"2024-01\", \"2024-02\")\n- **> 365 days**: Use yearly grouping (e.g., \"2023\", \"2024\")\n- **Validate**: Charts with only 1 data point likely indicate incorrect aggregation for the time period\n\n```javascript\nconst { slide, placeholders } = await html2pptx('slide.html', pptx);\n\n// CORRECT: Single series with all labels\nslide.addChart(pptx.charts.BAR, [{\n    name: \"Sales 2024\",\n    labels: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n    values: [4500, 5500, 6200, 7100]\n}], {\n    ...placeholders[0],  // Use placeholder position\n    barDir: 'col',       // 'col' = vertical bars, 'bar' = horizontal\n    showTitle: true,\n    title: 'Quarterly Sales',\n    showLegend: false,   // No legend needed for single series\n    // Required axis labels\n    showCatAxisTitle: true,\n    catAxisTitle: 'Quarter',\n    showValAxisTitle: true,\n    valAxisTitle: 'Sales ($000s)',\n    // Optional: Control scaling (adjust min based on data range for better visualization)\n    valAxisMaxVal: 8000,\n    valAxisMinVal: 0,  // Use 0 for counts/amounts; for clustered data (e.g., 4500-7100), consider starting closer to min value\n    valAxisMajorUnit: 2000,  // Control y-axis label spacing to prevent crowding\n    catAxisLabelRotate: 45,  // Rotate labels if crowded\n    dataLabelPosition: 'outEnd',\n    dataLabelColor: '000000',\n    // Use single color for single-series charts\n    chartColors: [\"4472C4\"]  // All bars same color\n});\n```\n\n#### Scatter Chart\n\n**IMPORTANT**: Scatter chart data format is unusual - first series contains X-axis values, subsequent series contain Y-values:\n\n```javascript\n// Prepare data\nconst data1 = [{ x: 10, y: 20 }, { x: 15, y: 25 }, { x: 20, y: 30 }];\nconst data2 = [{ x: 12, y: 18 }, { x: 18, y: 22 }];\n\nconst allXValues = [...data1.map(d => d.x), ...data2.map(d => d.x)];\n\nslide.addChart(pptx.charts.SCATTER, [\n    { name: 'X-Axis', values: allXValues },  // First series = X values\n    { name: 'Series 1', values: data1.map(d => d.y) },  // Y values only\n    { name: 'Series 2', values: data2.map(d => d.y) }   // Y values only\n], {\n    x: 1, y: 1, w: 8, h: 4,\n    lineSize: 0,  // 0 = no connecting lines\n    lineDataSymbol: 'circle',\n    lineDataSymbolSize: 6,\n    showCatAxisTitle: true,\n    catAxisTitle: 'X Axis',\n    showValAxisTitle: true,\n    valAxisTitle: 'Y Axis',\n    chartColors: [\"4472C4\", \"ED7D31\"]\n});\n```\n\n#### Line Chart\n\n```javascript\nslide.addChart(pptx.charts.LINE, [{\n    name: \"Temperature\",\n    labels: [\"Jan\", \"Feb\", \"Mar\", \"Apr\"],\n    values: [32, 35, 42, 55]\n}], {\n    x: 1, y: 1, w: 8, h: 4,\n    lineSize: 4,\n    lineSmooth: true,\n    // Required axis labels\n    showCatAxisTitle: true,\n    catAxisTitle: 'Month',\n    showValAxisTitle: true,\n    valAxisTitle: 'Temperature (°F)',\n    // Optional: Y-axis range (set min based on data range for better visualization)\n    valAxisMinVal: 0,     // For ranges starting at 0 (counts, percentages, etc.)\n    valAxisMaxVal: 60,\n    valAxisMajorUnit: 20,  // Control y-axis label spacing to prevent crowding (e.g., 10, 20, 25)\n    // valAxisMinVal: 30,  // PREFERRED: For data clustered in a range (e.g., 32-55 or ratings 3-5), start axis closer to min value to show variation\n    // Optional: Chart colors\n    chartColors: [\"4472C4\", \"ED7D31\", \"A5A5A5\"]\n});\n```\n\n#### Pie Chart (No Axis Labels Required)\n\n**CRITICAL**: Pie charts require a **single data series** with all categories in the `labels` array and corresponding values in the `values` array.\n\n```javascript\nslide.addChart(pptx.charts.PIE, [{\n    name: \"Market Share\",\n    labels: [\"Product A\", \"Product B\", \"Other\"],  // All categories in one array\n    values: [35, 45, 20]  // All values in one array\n}], {\n    x: 2, y: 1, w: 6, h: 4,\n    showPercent: true,\n    showLegend: true,\n    legendPos: 'r',  // right\n    chartColors: [\"4472C4\", \"ED7D31\", \"A5A5A5\"]\n});\n```\n\n#### Multiple Data Series\n\n```javascript\nslide.addChart(pptx.charts.LINE, [\n    {\n        name: \"Product A\",\n        labels: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n        values: [10, 20, 30, 40]\n    },\n    {\n        name: \"Product B\",\n        labels: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n        values: [15, 25, 20, 35]\n    }\n], {\n    x: 1, y: 1, w: 8, h: 4,\n    showCatAxisTitle: true,\n    catAxisTitle: 'Quarter',\n    showValAxisTitle: true,\n    valAxisTitle: 'Revenue ($M)'\n});\n```\n\n### Chart Colors\n\n**CRITICAL**: Use hex colors **without** the `#` prefix - including `#` causes file corruption.\n\n**Align chart colors with your chosen design palette**, ensuring sufficient contrast and distinctiveness for data visualization. Adjust colors for:\n- Strong contrast between adjacent series\n- Readability against slide backgrounds\n- Accessibility (avoid red-green only combinations)\n\n```javascript\n// Example: Ocean palette-inspired chart colors (adjusted for contrast)\nconst chartColors = [\"16A085\", \"FF6B9D\", \"2C3E50\", \"F39C12\", \"9B59B6\"];\n\n// Single-series chart: Use one color for all bars/points\nslide.addChart(pptx.charts.BAR, [{\n    name: \"Sales\",\n    labels: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n    values: [4500, 5500, 6200, 7100]\n}], {\n    ...placeholders[0],\n    chartColors: [\"16A085\"],  // All bars same color\n    showLegend: false\n});\n\n// Multi-series chart: Each series gets a different color\nslide.addChart(pptx.charts.LINE, [\n    { name: \"Product A\", labels: [\"Q1\", \"Q2\", \"Q3\"], values: [10, 20, 30] },\n    { name: \"Product B\", labels: [\"Q1\", \"Q2\", \"Q3\"], values: [15, 25, 20] }\n], {\n    ...placeholders[0],\n    chartColors: [\"16A085\", \"FF6B9D\"]  // One color per series\n});\n```\n\n### Adding Tables\n\nTables can be added with basic or advanced formatting:\n\n#### Basic Table\n\n```javascript\nslide.addTable([\n    [\"Header 1\", \"Header 2\", \"Header 3\"],\n    [\"Row 1, Col 1\", \"Row 1, Col 2\", \"Row 1, Col 3\"],\n    [\"Row 2, Col 1\", \"Row 2, Col 2\", \"Row 2, Col 3\"]\n], {\n    x: 0.5,\n    y: 1,\n    w: 9,\n    h: 3,\n    border: { pt: 1, color: \"999999\" },\n    fill: { color: \"F1F1F1\" }\n});\n```\n\n#### Table with Custom Formatting\n\n```javascript\nconst tableData = [\n    // Header row with custom styling\n    [\n        { text: \"Product\", options: { fill: { color: \"4472C4\" }, color: \"FFFFFF\", bold: true } },\n        { text: \"Revenue\", options: { fill: { color: \"4472C4\" }, color: \"FFFFFF\", bold: true } },\n        { text: \"Growth\", options: { fill: { color: \"4472C4\" }, color: \"FFFFFF\", bold: true } }\n    ],\n    // Data rows\n    [\"Product A\", \"$50M\", \"+15%\"],\n    [\"Product B\", \"$35M\", \"+22%\"],\n    [\"Product C\", \"$28M\", \"+8%\"]\n];\n\nslide.addTable(tableData, {\n    x: 1,\n    y: 1.5,\n    w: 8,\n    h: 3,\n    colW: [3, 2.5, 2.5],  // Column widths\n    rowH: [0.5, 0.6, 0.6, 0.6],  // Row heights\n    border: { pt: 1, color: \"CCCCCC\" },\n    align: \"center\",\n    valign: \"middle\",\n    fontSize: 14\n});\n```\n\n#### Table with Merged Cells\n\n```javascript\nconst mergedTableData = [\n    [\n        { text: \"Q1 Results\", options: { colspan: 3, fill: { color: \"4472C4\" }, color: \"FFFFFF\", bold: true } }\n    ],\n    [\"Product\", \"Sales\", \"Market Share\"],\n    [\"Product A\", \"$25M\", \"35%\"],\n    [\"Product B\", \"$18M\", \"25%\"]\n];\n\nslide.addTable(mergedTableData, {\n    x: 1,\n    y: 1,\n    w: 8,\n    h: 2.5,\n    colW: [3, 2.5, 2.5],\n    border: { pt: 1, color: \"DDDDDD\" }\n});\n```\n\n### Table Options\n\nCommon table options:\n- `x, y, w, h` - Position and size\n- `colW` - Array of column widths (in inches)\n- `rowH` - Array of row heights (in inches)\n- `border` - Border style: `{ pt: 1, color: \"999999\" }`\n- `fill` - Background color (no # prefix)\n- `align` - Text alignment: \"left\", \"center\", \"right\"\n- `valign` - Vertical alignment: \"top\", \"middle\", \"bottom\"\n- `fontSize` - Text size\n- `autoPage` - Auto-create new slides if content overflows",
        "skills/pptx/ooxml.md": "# Office Open XML Technical Reference for PowerPoint\n\n**Important: Read this entire document before starting.** Critical XML schema rules and formatting requirements are covered throughout. Incorrect implementation can create invalid PPTX files that PowerPoint cannot open.\n\n## Technical Guidelines\n\n### Schema Compliance\n- **Element ordering in `<p:txBody>`**: `<a:bodyPr>`, `<a:lstStyle>`, `<a:p>`\n- **Whitespace**: Add `xml:space='preserve'` to `<a:t>` elements with leading/trailing spaces\n- **Unicode**: Escape characters in ASCII content: `\"` becomes `&#8220;`\n- **Images**: Add to `ppt/media/`, reference in slide XML, set dimensions to fit slide bounds\n- **Relationships**: Update `ppt/slides/_rels/slideN.xml.rels` for each slide's resources\n- **Dirty attribute**: Add `dirty=\"0\"` to `<a:rPr>` and `<a:endParaRPr>` elements to indicate clean state\n\n## Presentation Structure\n\n### Basic Slide Structure\n```xml\n<!-- ppt/slides/slide1.xml -->\n<p:sld>\n  <p:cSld>\n    <p:spTree>\n      <p:nvGrpSpPr>...</p:nvGrpSpPr>\n      <p:grpSpPr>...</p:grpSpPr>\n      <!-- Shapes go here -->\n    </p:spTree>\n  </p:cSld>\n</p:sld>\n```\n\n### Text Box / Shape with Text\n```xml\n<p:sp>\n  <p:nvSpPr>\n    <p:cNvPr id=\"2\" name=\"Title\"/>\n    <p:cNvSpPr>\n      <a:spLocks noGrp=\"1\"/>\n    </p:cNvSpPr>\n    <p:nvPr>\n      <p:ph type=\"ctrTitle\"/>\n    </p:nvPr>\n  </p:nvSpPr>\n  <p:spPr>\n    <a:xfrm>\n      <a:off x=\"838200\" y=\"365125\"/>\n      <a:ext cx=\"7772400\" cy=\"1470025\"/>\n    </a:xfrm>\n  </p:spPr>\n  <p:txBody>\n    <a:bodyPr/>\n    <a:lstStyle/>\n    <a:p>\n      <a:r>\n        <a:t>Slide Title</a:t>\n      </a:r>\n    </a:p>\n  </p:txBody>\n</p:sp>\n```\n\n### Text Formatting\n```xml\n<!-- Bold -->\n<a:r>\n  <a:rPr b=\"1\"/>\n  <a:t>Bold Text</a:t>\n</a:r>\n\n<!-- Italic -->\n<a:r>\n  <a:rPr i=\"1\"/>\n  <a:t>Italic Text</a:t>\n</a:r>\n\n<!-- Underline -->\n<a:r>\n  <a:rPr u=\"sng\"/>\n  <a:t>Underlined</a:t>\n</a:r>\n\n<!-- Highlight -->\n<a:r>\n  <a:rPr>\n    <a:highlight>\n      <a:srgbClr val=\"FFFF00\"/>\n    </a:highlight>\n  </a:rPr>\n  <a:t>Highlighted Text</a:t>\n</a:r>\n\n<!-- Font and Size -->\n<a:r>\n  <a:rPr sz=\"2400\" typeface=\"Arial\">\n    <a:solidFill>\n      <a:srgbClr val=\"FF0000\"/>\n    </a:solidFill>\n  </a:rPr>\n  <a:t>Colored Arial 24pt</a:t>\n</a:r>\n\n<!-- Complete formatting example -->\n<a:r>\n  <a:rPr lang=\"en-US\" sz=\"1400\" b=\"1\" dirty=\"0\">\n    <a:solidFill>\n      <a:srgbClr val=\"FAFAFA\"/>\n    </a:solidFill>\n  </a:rPr>\n  <a:t>Formatted text</a:t>\n</a:r>\n```\n\n### Lists\n```xml\n<!-- Bullet list -->\n<a:p>\n  <a:pPr lvl=\"0\">\n    <a:buChar char=\"•\"/>\n  </a:pPr>\n  <a:r>\n    <a:t>First bullet point</a:t>\n  </a:r>\n</a:p>\n\n<!-- Numbered list -->\n<a:p>\n  <a:pPr lvl=\"0\">\n    <a:buAutoNum type=\"arabicPeriod\"/>\n  </a:pPr>\n  <a:r>\n    <a:t>First numbered item</a:t>\n  </a:r>\n</a:p>\n\n<!-- Second level indent -->\n<a:p>\n  <a:pPr lvl=\"1\">\n    <a:buChar char=\"•\"/>\n  </a:pPr>\n  <a:r>\n    <a:t>Indented bullet</a:t>\n  </a:r>\n</a:p>\n```\n\n### Shapes\n```xml\n<!-- Rectangle -->\n<p:sp>\n  <p:nvSpPr>\n    <p:cNvPr id=\"3\" name=\"Rectangle\"/>\n    <p:cNvSpPr/>\n    <p:nvPr/>\n  </p:nvSpPr>\n  <p:spPr>\n    <a:xfrm>\n      <a:off x=\"1000000\" y=\"1000000\"/>\n      <a:ext cx=\"3000000\" cy=\"2000000\"/>\n    </a:xfrm>\n    <a:prstGeom prst=\"rect\">\n      <a:avLst/>\n    </a:prstGeom>\n    <a:solidFill>\n      <a:srgbClr val=\"FF0000\"/>\n    </a:solidFill>\n    <a:ln w=\"25400\">\n      <a:solidFill>\n        <a:srgbClr val=\"000000\"/>\n      </a:solidFill>\n    </a:ln>\n  </p:spPr>\n</p:sp>\n\n<!-- Rounded Rectangle -->\n<p:sp>\n  <p:spPr>\n    <a:prstGeom prst=\"roundRect\">\n      <a:avLst/>\n    </a:prstGeom>\n  </p:spPr>\n</p:sp>\n\n<!-- Circle/Ellipse -->\n<p:sp>\n  <p:spPr>\n    <a:prstGeom prst=\"ellipse\">\n      <a:avLst/>\n    </a:prstGeom>\n  </p:spPr>\n</p:sp>\n```\n\n### Images\n```xml\n<p:pic>\n  <p:nvPicPr>\n    <p:cNvPr id=\"4\" name=\"Picture\">\n      <a:hlinkClick r:id=\"\" action=\"ppaction://media\"/>\n    </p:cNvPr>\n    <p:cNvPicPr>\n      <a:picLocks noChangeAspect=\"1\"/>\n    </p:cNvPicPr>\n    <p:nvPr/>\n  </p:nvPicPr>\n  <p:blipFill>\n    <a:blip r:embed=\"rId2\"/>\n    <a:stretch>\n      <a:fillRect/>\n    </a:stretch>\n  </p:blipFill>\n  <p:spPr>\n    <a:xfrm>\n      <a:off x=\"1000000\" y=\"1000000\"/>\n      <a:ext cx=\"3000000\" cy=\"2000000\"/>\n    </a:xfrm>\n    <a:prstGeom prst=\"rect\">\n      <a:avLst/>\n    </a:prstGeom>\n  </p:spPr>\n</p:pic>\n```\n\n### Tables\n```xml\n<p:graphicFrame>\n  <p:nvGraphicFramePr>\n    <p:cNvPr id=\"5\" name=\"Table\"/>\n    <p:cNvGraphicFramePr>\n      <a:graphicFrameLocks noGrp=\"1\"/>\n    </p:cNvGraphicFramePr>\n    <p:nvPr/>\n  </p:nvGraphicFramePr>\n  <p:xfrm>\n    <a:off x=\"1000000\" y=\"1000000\"/>\n    <a:ext cx=\"6000000\" cy=\"2000000\"/>\n  </p:xfrm>\n  <a:graphic>\n    <a:graphicData uri=\"http://schemas.openxmlformats.org/drawingml/2006/table\">\n      <a:tbl>\n        <a:tblGrid>\n          <a:gridCol w=\"3000000\"/>\n          <a:gridCol w=\"3000000\"/>\n        </a:tblGrid>\n        <a:tr h=\"500000\">\n          <a:tc>\n            <a:txBody>\n              <a:bodyPr/>\n              <a:lstStyle/>\n              <a:p>\n                <a:r>\n                  <a:t>Cell 1</a:t>\n                </a:r>\n              </a:p>\n            </a:txBody>\n          </a:tc>\n          <a:tc>\n            <a:txBody>\n              <a:bodyPr/>\n              <a:lstStyle/>\n              <a:p>\n                <a:r>\n                  <a:t>Cell 2</a:t>\n                </a:r>\n              </a:p>\n            </a:txBody>\n          </a:tc>\n        </a:tr>\n      </a:tbl>\n    </a:graphicData>\n  </a:graphic>\n</p:graphicFrame>\n```\n\n### Slide Layouts\n\n```xml\n<!-- Title Slide Layout -->\n<p:sp>\n  <p:nvSpPr>\n    <p:nvPr>\n      <p:ph type=\"ctrTitle\"/>\n    </p:nvPr>\n  </p:nvSpPr>\n  <!-- Title content -->\n</p:sp>\n\n<p:sp>\n  <p:nvSpPr>\n    <p:nvPr>\n      <p:ph type=\"subTitle\" idx=\"1\"/>\n    </p:nvPr>\n  </p:nvSpPr>\n  <!-- Subtitle content -->\n</p:sp>\n\n<!-- Content Slide Layout -->\n<p:sp>\n  <p:nvSpPr>\n    <p:nvPr>\n      <p:ph type=\"title\"/>\n    </p:nvPr>\n  </p:nvSpPr>\n  <!-- Slide title -->\n</p:sp>\n\n<p:sp>\n  <p:nvSpPr>\n    <p:nvPr>\n      <p:ph type=\"body\" idx=\"1\"/>\n    </p:nvPr>\n  </p:nvSpPr>\n  <!-- Content body -->\n</p:sp>\n```\n\n## File Updates\n\nWhen adding content, update these files:\n\n**`ppt/_rels/presentation.xml.rels`:**\n```xml\n<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/slide\" Target=\"slides/slide1.xml\"/>\n<Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/slideMaster\" Target=\"slideMasters/slideMaster1.xml\"/>\n```\n\n**`ppt/slides/_rels/slide1.xml.rels`:**\n```xml\n<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/slideLayout\" Target=\"../slideLayouts/slideLayout1.xml\"/>\n<Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image\" Target=\"../media/image1.png\"/>\n```\n\n**`[Content_Types].xml`:**\n```xml\n<Default Extension=\"png\" ContentType=\"image/png\"/>\n<Default Extension=\"jpg\" ContentType=\"image/jpeg\"/>\n<Override PartName=\"/ppt/slides/slide1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.presentationml.slide+xml\"/>\n```\n\n**`ppt/presentation.xml`:**\n```xml\n<p:sldIdLst>\n  <p:sldId id=\"256\" r:id=\"rId1\"/>\n  <p:sldId id=\"257\" r:id=\"rId2\"/>\n</p:sldIdLst>\n```\n\n**`docProps/app.xml`:** Update slide count and statistics\n```xml\n<Slides>2</Slides>\n<Paragraphs>10</Paragraphs>\n<Words>50</Words>\n```\n\n## Slide Operations\n\n### Adding a New Slide\nWhen adding a slide to the end of the presentation:\n\n1. **Create the slide file** (`ppt/slides/slideN.xml`)\n2. **Update `[Content_Types].xml`**: Add Override for the new slide\n3. **Update `ppt/_rels/presentation.xml.rels`**: Add relationship for the new slide\n4. **Update `ppt/presentation.xml`**: Add slide ID to `<p:sldIdLst>`\n5. **Create slide relationships** (`ppt/slides/_rels/slideN.xml.rels`) if needed\n6. **Update `docProps/app.xml`**: Increment slide count and update statistics (if present)\n\n### Duplicating a Slide\n1. Copy the source slide XML file with a new name\n2. Update all IDs in the new slide to be unique\n3. Follow the \"Adding a New Slide\" steps above\n4. **CRITICAL**: Remove or update any notes slide references in `_rels` files\n5. Remove references to unused media files\n\n### Reordering Slides\n1. **Update `ppt/presentation.xml`**: Reorder `<p:sldId>` elements in `<p:sldIdLst>`\n2. The order of `<p:sldId>` elements determines slide order\n3. Keep slide IDs and relationship IDs unchanged\n\nExample:\n```xml\n<!-- Original order -->\n<p:sldIdLst>\n  <p:sldId id=\"256\" r:id=\"rId2\"/>\n  <p:sldId id=\"257\" r:id=\"rId3\"/>\n  <p:sldId id=\"258\" r:id=\"rId4\"/>\n</p:sldIdLst>\n\n<!-- After moving slide 3 to position 2 -->\n<p:sldIdLst>\n  <p:sldId id=\"256\" r:id=\"rId2\"/>\n  <p:sldId id=\"258\" r:id=\"rId4\"/>\n  <p:sldId id=\"257\" r:id=\"rId3\"/>\n</p:sldIdLst>\n```\n\n### Deleting a Slide\n1. **Remove from `ppt/presentation.xml`**: Delete the `<p:sldId>` entry\n2. **Remove from `ppt/_rels/presentation.xml.rels`**: Delete the relationship\n3. **Remove from `[Content_Types].xml`**: Delete the Override entry\n4. **Delete files**: Remove `ppt/slides/slideN.xml` and `ppt/slides/_rels/slideN.xml.rels`\n5. **Update `docProps/app.xml`**: Decrement slide count and update statistics\n6. **Clean up unused media**: Remove orphaned images from `ppt/media/`\n\nNote: Don't renumber remaining slides - keep their original IDs and filenames.\n\n\n## Common Errors to Avoid\n\n- **Encodings**: Escape unicode characters in ASCII content: `\"` becomes `&#8220;`\n- **Images**: Add to `ppt/media/` and update relationship files\n- **Lists**: Omit bullets from list headers\n- **IDs**: Use valid hexadecimal values for UUIDs\n- **Themes**: Check all themes in `theme` directory for colors\n\n## Validation Checklist for Template-Based Presentations\n\n### Before Packing, Always:\n- **Clean unused resources**: Remove unreferenced media, fonts, and notes directories\n- **Fix Content_Types.xml**: Declare ALL slides, layouts, and themes present in the package\n- **Fix relationship IDs**: \n   - Remove font embed references if not using embedded fonts\n- **Remove broken references**: Check all `_rels` files for references to deleted resources\n\n### Common Template Duplication Pitfalls:\n- Multiple slides referencing the same notes slide after duplication\n- Image/media references from template slides that no longer exist\n- Font embedding references when fonts aren't included\n- Missing slideLayout declarations for layouts 12-25\n- docProps directory may not unpack - this is optional",
        "skills/skill-creator/SKILL.md": "---\nname: skill-creator\ndescription: Guide for creating effective skills. This skill should be used when users want to create a new skill (or update an existing skill) that extends Claude's capabilities with specialized knowledge, workflows, or tool integrations.\nlicense: Complete terms in LICENSE.txt\n---\n\n# Skill Creator\n\nThis skill provides guidance for creating effective skills.\n\n## About Skills\n\nSkills are modular, self-contained packages that extend Claude's capabilities by providing\nspecialized knowledge, workflows, and tools. Think of them as \"onboarding guides\" for specific\ndomains or tasks—they transform Claude from a general-purpose agent into a specialized agent\nequipped with procedural knowledge that no model can fully possess.\n\n### What Skills Provide\n\n1. Specialized workflows - Multi-step procedures for specific domains\n2. Tool integrations - Instructions for working with specific file formats or APIs\n3. Domain expertise - Company-specific knowledge, schemas, business logic\n4. Bundled resources - Scripts, references, and assets for complex and repetitive tasks\n\n## Core Principles\n\n### Concise is Key\n\nThe context window is a public good. Skills share the context window with everything else Claude needs: system prompt, conversation history, other Skills' metadata, and the actual user request.\n\n**Default assumption: Claude is already very smart.** Only add context Claude doesn't already have. Challenge each piece of information: \"Does Claude really need this explanation?\" and \"Does this paragraph justify its token cost?\"\n\nPrefer concise examples over verbose explanations.\n\n### Set Appropriate Degrees of Freedom\n\nMatch the level of specificity to the task's fragility and variability:\n\n**High freedom (text-based instructions)**: Use when multiple approaches are valid, decisions depend on context, or heuristics guide the approach.\n\n**Medium freedom (pseudocode or scripts with parameters)**: Use when a preferred pattern exists, some variation is acceptable, or configuration affects behavior.\n\n**Low freedom (specific scripts, few parameters)**: Use when operations are fragile and error-prone, consistency is critical, or a specific sequence must be followed.\n\nThink of Claude as exploring a path: a narrow bridge with cliffs needs specific guardrails (low freedom), while an open field allows many routes (high freedom).\n\n### Anatomy of a Skill\n\nEvery skill consists of a required SKILL.md file and optional bundled resources:\n\n```\nskill-name/\n├── SKILL.md (required)\n│   ├── YAML frontmatter metadata (required)\n│   │   ├── name: (required)\n│   │   └── description: (required)\n│   └── Markdown instructions (required)\n└── Bundled Resources (optional)\n    ├── scripts/          - Executable code (Python/Bash/etc.)\n    ├── references/       - Documentation intended to be loaded into context as needed\n    └── assets/           - Files used in output (templates, icons, fonts, etc.)\n```\n\n#### SKILL.md (required)\n\nEvery SKILL.md consists of:\n\n- **Frontmatter** (YAML): Contains `name` and `description` fields. These are the only fields that Claude reads to determine when the skill gets used, thus it is very important to be clear and comprehensive in describing what the skill is, and when it should be used.\n- **Body** (Markdown): Instructions and guidance for using the skill. Only loaded AFTER the skill triggers (if at all).\n\n#### Bundled Resources (optional)\n\n##### Scripts (`scripts/`)\n\nExecutable code (Python/Bash/etc.) for tasks that require deterministic reliability or are repeatedly rewritten.\n\n- **When to include**: When the same code is being rewritten repeatedly or deterministic reliability is needed\n- **Example**: `scripts/rotate_pdf.py` for PDF rotation tasks\n- **Benefits**: Token efficient, deterministic, may be executed without loading into context\n- **Note**: Scripts may still need to be read by Claude for patching or environment-specific adjustments\n\n##### References (`references/`)\n\nDocumentation and reference material intended to be loaded as needed into context to inform Claude's process and thinking.\n\n- **When to include**: For documentation that Claude should reference while working\n- **Examples**: `references/finance.md` for financial schemas, `references/mnda.md` for company NDA template, `references/policies.md` for company policies, `references/api_docs.md` for API specifications\n- **Use cases**: Database schemas, API documentation, domain knowledge, company policies, detailed workflow guides\n- **Benefits**: Keeps SKILL.md lean, loaded only when Claude determines it's needed\n- **Best practice**: If files are large (>10k words), include grep search patterns in SKILL.md\n- **Avoid duplication**: Information should live in either SKILL.md or references files, not both. Prefer references files for detailed information unless it's truly core to the skill—this keeps SKILL.md lean while making information discoverable without hogging the context window. Keep only essential procedural instructions and workflow guidance in SKILL.md; move detailed reference material, schemas, and examples to references files.\n\n##### Assets (`assets/`)\n\nFiles not intended to be loaded into context, but rather used within the output Claude produces.\n\n- **When to include**: When the skill needs files that will be used in the final output\n- **Examples**: `assets/logo.png` for brand assets, `assets/slides.pptx` for PowerPoint templates, `assets/frontend-template/` for HTML/React boilerplate, `assets/font.ttf` for typography\n- **Use cases**: Templates, images, icons, boilerplate code, fonts, sample documents that get copied or modified\n- **Benefits**: Separates output resources from documentation, enables Claude to use files without loading them into context\n\n#### What to Not Include in a Skill\n\nA skill should only contain essential files that directly support its functionality. Do NOT create extraneous documentation or auxiliary files, including:\n\n- README.md\n- INSTALLATION_GUIDE.md\n- QUICK_REFERENCE.md\n- CHANGELOG.md\n- etc.\n\nThe skill should only contain the information needed for an AI agent to do the job at hand. It should not contain auxilary context about the process that went into creating it, setup and testing procedures, user-facing documentation, etc. Creating additional documentation files just adds clutter and confusion.\n\n### Progressive Disclosure Design Principle\n\nSkills use a three-level loading system to manage context efficiently:\n\n1. **Metadata (name + description)** - Always in context (~100 words)\n2. **SKILL.md body** - When skill triggers (<5k words)\n3. **Bundled resources** - As needed by Claude (Unlimited because scripts can be executed without reading into context window)\n\n#### Progressive Disclosure Patterns\n\nKeep SKILL.md body to the essentials and under 500 lines to minimize context bloat. Split content into separate files when approaching this limit. When splitting out content into other files, it is very important to reference them from SKILL.md and describe clearly when to read them, to ensure the reader of the skill knows they exist and when to use them.\n\n**Key principle:** When a skill supports multiple variations, frameworks, or options, keep only the core workflow and selection guidance in SKILL.md. Move variant-specific details (patterns, examples, configuration) into separate reference files.\n\n**Pattern 1: High-level guide with references**\n\n```markdown\n# PDF Processing\n\n## Quick start\n\nExtract text with pdfplumber:\n[code example]\n\n## Advanced features\n\n- **Form filling**: See [FORMS.md](FORMS.md) for complete guide\n- **API reference**: See [REFERENCE.md](REFERENCE.md) for all methods\n- **Examples**: See [EXAMPLES.md](EXAMPLES.md) for common patterns\n```\n\nClaude loads FORMS.md, REFERENCE.md, or EXAMPLES.md only when needed.\n\n**Pattern 2: Domain-specific organization**\n\nFor Skills with multiple domains, organize content by domain to avoid loading irrelevant context:\n\n```\nbigquery-skill/\n├── SKILL.md (overview and navigation)\n└── reference/\n    ├── finance.md (revenue, billing metrics)\n    ├── sales.md (opportunities, pipeline)\n    ├── product.md (API usage, features)\n    └── marketing.md (campaigns, attribution)\n```\n\nWhen a user asks about sales metrics, Claude only reads sales.md.\n\nSimilarly, for skills supporting multiple frameworks or variants, organize by variant:\n\n```\ncloud-deploy/\n├── SKILL.md (workflow + provider selection)\n└── references/\n    ├── aws.md (AWS deployment patterns)\n    ├── gcp.md (GCP deployment patterns)\n    └── azure.md (Azure deployment patterns)\n```\n\nWhen the user chooses AWS, Claude only reads aws.md.\n\n**Pattern 3: Conditional details**\n\nShow basic content, link to advanced content:\n\n```markdown\n# DOCX Processing\n\n## Creating documents\n\nUse docx-js for new documents. See [DOCX-JS.md](DOCX-JS.md).\n\n## Editing documents\n\nFor simple edits, modify the XML directly.\n\n**For tracked changes**: See [REDLINING.md](REDLINING.md)\n**For OOXML details**: See [OOXML.md](OOXML.md)\n```\n\nClaude reads REDLINING.md or OOXML.md only when the user needs those features.\n\n**Important guidelines:**\n\n- **Avoid deeply nested references** - Keep references one level deep from SKILL.md. All reference files should link directly from SKILL.md.\n- **Structure longer reference files** - For files longer than 100 lines, include a table of contents at the top so Claude can see the full scope when previewing.\n\n## Skill Creation Process\n\nSkill creation involves these steps:\n\n1. Understand the skill with concrete examples\n2. Plan reusable skill contents (scripts, references, assets)\n3. Initialize the skill (run init_skill.py)\n4. Edit the skill (implement resources and write SKILL.md)\n5. Package the skill (run package_skill.py)\n6. Iterate based on real usage\n\nFollow these steps in order, skipping only if there is a clear reason why they are not applicable.\n\n### Step 1: Understanding the Skill with Concrete Examples\n\nSkip this step only when the skill's usage patterns are already clearly understood. It remains valuable even when working with an existing skill.\n\nTo create an effective skill, clearly understand concrete examples of how the skill will be used. This understanding can come from either direct user examples or generated examples that are validated with user feedback.\n\nFor example, when building an image-editor skill, relevant questions include:\n\n- \"What functionality should the image-editor skill support? Editing, rotating, anything else?\"\n- \"Can you give some examples of how this skill would be used?\"\n- \"I can imagine users asking for things like 'Remove the red-eye from this image' or 'Rotate this image'. Are there other ways you imagine this skill being used?\"\n- \"What would a user say that should trigger this skill?\"\n\nTo avoid overwhelming users, avoid asking too many questions in a single message. Start with the most important questions and follow up as needed for better effectiveness.\n\nConclude this step when there is a clear sense of the functionality the skill should support.\n\n### Step 2: Planning the Reusable Skill Contents\n\nTo turn concrete examples into an effective skill, analyze each example by:\n\n1. Considering how to execute on the example from scratch\n2. Identifying what scripts, references, and assets would be helpful when executing these workflows repeatedly\n\nExample: When building a `pdf-editor` skill to handle queries like \"Help me rotate this PDF,\" the analysis shows:\n\n1. Rotating a PDF requires re-writing the same code each time\n2. A `scripts/rotate_pdf.py` script would be helpful to store in the skill\n\nExample: When designing a `frontend-webapp-builder` skill for queries like \"Build me a todo app\" or \"Build me a dashboard to track my steps,\" the analysis shows:\n\n1. Writing a frontend webapp requires the same boilerplate HTML/React each time\n2. An `assets/hello-world/` template containing the boilerplate HTML/React project files would be helpful to store in the skill\n\nExample: When building a `big-query` skill to handle queries like \"How many users have logged in today?\" the analysis shows:\n\n1. Querying BigQuery requires re-discovering the table schemas and relationships each time\n2. A `references/schema.md` file documenting the table schemas would be helpful to store in the skill\n\nTo establish the skill's contents, analyze each concrete example to create a list of the reusable resources to include: scripts, references, and assets.\n\n### Step 3: Initializing the Skill\n\nAt this point, it is time to actually create the skill.\n\nSkip this step only if the skill being developed already exists, and iteration or packaging is needed. In this case, continue to the next step.\n\nWhen creating a new skill from scratch, always run the `init_skill.py` script. The script conveniently generates a new template skill directory that automatically includes everything a skill requires, making the skill creation process much more efficient and reliable.\n\nUsage:\n\n```bash\nscripts/init_skill.py <skill-name> --path <output-directory>\n```\n\nThe script:\n\n- Creates the skill directory at the specified path\n- Generates a SKILL.md template with proper frontmatter and TODO placeholders\n- Creates example resource directories: `scripts/`, `references/`, and `assets/`\n- Adds example files in each directory that can be customized or deleted\n\nAfter initialization, customize or remove the generated SKILL.md and example files as needed.\n\n### Step 4: Edit the Skill\n\nWhen editing the (newly-generated or existing) skill, remember that the skill is being created for another instance of Claude to use. Include information that would be beneficial and non-obvious to Claude. Consider what procedural knowledge, domain-specific details, or reusable assets would help another Claude instance execute these tasks more effectively.\n\n#### Learn Proven Design Patterns\n\nConsult these helpful guides based on your skill's needs:\n\n- **Multi-step processes**: See references/workflows.md for sequential workflows and conditional logic\n- **Specific output formats or quality standards**: See references/output-patterns.md for template and example patterns\n\nThese files contain established best practices for effective skill design.\n\n#### Start with Reusable Skill Contents\n\nTo begin implementation, start with the reusable resources identified above: `scripts/`, `references/`, and `assets/` files. Note that this step may require user input. For example, when implementing a `brand-guidelines` skill, the user may need to provide brand assets or templates to store in `assets/`, or documentation to store in `references/`.\n\nAdded scripts must be tested by actually running them to ensure there are no bugs and that the output matches what is expected. If there are many similar scripts, only a representative sample needs to be tested to ensure confidence that they all work while balancing time to completion.\n\nAny example files and directories not needed for the skill should be deleted. The initialization script creates example files in `scripts/`, `references/`, and `assets/` to demonstrate structure, but most skills won't need all of them.\n\n#### Update SKILL.md\n\n**Writing Guidelines:** Always use imperative/infinitive form.\n\n##### Frontmatter\n\nWrite the YAML frontmatter with `name` and `description`:\n\n- `name`: The skill name\n- `description`: This is the primary triggering mechanism for your skill, and helps Claude understand when to use the skill.\n  - Include both what the Skill does and specific triggers/contexts for when to use it.\n  - Include all \"when to use\" information here - Not in the body. The body is only loaded after triggering, so \"When to Use This Skill\" sections in the body are not helpful to Claude.\n  - Example description for a `docx` skill: \"Comprehensive document creation, editing, and analysis with support for tracked changes, comments, formatting preservation, and text extraction. Use when Claude needs to work with professional documents (.docx files) for: (1) Creating new documents, (2) Modifying or editing content, (3) Working with tracked changes, (4) Adding comments, or any other document tasks\"\n\nDo not include any other fields in YAML frontmatter.\n\n##### Body\n\nWrite instructions for using the skill and its bundled resources.\n\n### Step 5: Packaging a Skill\n\nOnce development of the skill is complete, it must be packaged into a distributable .skill file that gets shared with the user. The packaging process automatically validates the skill first to ensure it meets all requirements:\n\n```bash\nscripts/package_skill.py <path/to/skill-folder>\n```\n\nOptional output directory specification:\n\n```bash\nscripts/package_skill.py <path/to/skill-folder> ./dist\n```\n\nThe packaging script will:\n\n1. **Validate** the skill automatically, checking:\n\n   - YAML frontmatter format and required fields\n   - Skill naming conventions and directory structure\n   - Description completeness and quality\n   - File organization and resource references\n\n2. **Package** the skill if validation passes, creating a .skill file named after the skill (e.g., `my-skill.skill`) that includes all files and maintains the proper directory structure for distribution. The .skill file is a zip file with a .skill extension.\n\nIf validation fails, the script will report the errors and exit without creating a package. Fix any validation errors and run the packaging command again.\n\n### Step 6: Iterate\n\nAfter testing the skill, users may request improvements. Often this happens right after using the skill, with fresh context of how the skill performed.\n\n**Iteration workflow:**\n\n1. Use the skill on real tasks\n2. Notice struggles or inefficiencies\n3. Identify how SKILL.md or bundled resources should be updated\n4. Implement changes and test again\n",
        "skills/skill-creator/references/output-patterns.md": "# Output Patterns\n\nUse these patterns when skills need to produce consistent, high-quality output.\n\n## Template Pattern\n\nProvide templates for output format. Match the level of strictness to your needs.\n\n**For strict requirements (like API responses or data formats):**\n\n```markdown\n## Report structure\n\nALWAYS use this exact template structure:\n\n# [Analysis Title]\n\n## Executive summary\n[One-paragraph overview of key findings]\n\n## Key findings\n- Finding 1 with supporting data\n- Finding 2 with supporting data\n- Finding 3 with supporting data\n\n## Recommendations\n1. Specific actionable recommendation\n2. Specific actionable recommendation\n```\n\n**For flexible guidance (when adaptation is useful):**\n\n```markdown\n## Report structure\n\nHere is a sensible default format, but use your best judgment:\n\n# [Analysis Title]\n\n## Executive summary\n[Overview]\n\n## Key findings\n[Adapt sections based on what you discover]\n\n## Recommendations\n[Tailor to the specific context]\n\nAdjust sections as needed for the specific analysis type.\n```\n\n## Examples Pattern\n\nFor skills where output quality depends on seeing examples, provide input/output pairs:\n\n```markdown\n## Commit message format\n\nGenerate commit messages following these examples:\n\n**Example 1:**\nInput: Added user authentication with JWT tokens\nOutput:\n```\nfeat(auth): implement JWT-based authentication\n\nAdd login endpoint and token validation middleware\n```\n\n**Example 2:**\nInput: Fixed bug where dates displayed incorrectly in reports\nOutput:\n```\nfix(reports): correct date formatting in timezone conversion\n\nUse UTC timestamps consistently across report generation\n```\n\nFollow this style: type(scope): brief description, then detailed explanation.\n```\n\nExamples help Claude understand the desired style and level of detail more clearly than descriptions alone.\n",
        "skills/skill-creator/references/workflows.md": "# Workflow Patterns\n\n## Sequential Workflows\n\nFor complex tasks, break operations into clear, sequential steps. It is often helpful to give Claude an overview of the process towards the beginning of SKILL.md:\n\n```markdown\nFilling a PDF form involves these steps:\n\n1. Analyze the form (run analyze_form.py)\n2. Create field mapping (edit fields.json)\n3. Validate mapping (run validate_fields.py)\n4. Fill the form (run fill_form.py)\n5. Verify output (run verify_output.py)\n```\n\n## Conditional Workflows\n\nFor tasks with branching logic, guide Claude through decision points:\n\n```markdown\n1. Determine the modification type:\n   **Creating new content?** → Follow \"Creation workflow\" below\n   **Editing existing content?** → Follow \"Editing workflow\" below\n\n2. Creation workflow: [steps]\n3. Editing workflow: [steps]\n```",
        "skills/slack-gif-creator/SKILL.md": "---\nname: slack-gif-creator\ndescription: Knowledge and utilities for creating animated GIFs optimized for Slack. Provides constraints, validation tools, and animation concepts. Use when users request animated GIFs for Slack like \"make me a GIF of X doing Y for Slack.\"\nlicense: Complete terms in LICENSE.txt\n---\n\n# Slack GIF Creator\n\nA toolkit providing utilities and knowledge for creating animated GIFs optimized for Slack.\n\n## Slack Requirements\n\n**Dimensions:**\n- Emoji GIFs: 128x128 (recommended)\n- Message GIFs: 480x480\n\n**Parameters:**\n- FPS: 10-30 (lower is smaller file size)\n- Colors: 48-128 (fewer = smaller file size)\n- Duration: Keep under 3 seconds for emoji GIFs\n\n## Core Workflow\n\n```python\nfrom core.gif_builder import GIFBuilder\nfrom PIL import Image, ImageDraw\n\n# 1. Create builder\nbuilder = GIFBuilder(width=128, height=128, fps=10)\n\n# 2. Generate frames\nfor i in range(12):\n    frame = Image.new('RGB', (128, 128), (240, 248, 255))\n    draw = ImageDraw.Draw(frame)\n\n    # Draw your animation using PIL primitives\n    # (circles, polygons, lines, etc.)\n\n    builder.add_frame(frame)\n\n# 3. Save with optimization\nbuilder.save('output.gif', num_colors=48, optimize_for_emoji=True)\n```\n\n## Drawing Graphics\n\n### Working with User-Uploaded Images\nIf a user uploads an image, consider whether they want to:\n- **Use it directly** (e.g., \"animate this\", \"split this into frames\")\n- **Use it as inspiration** (e.g., \"make something like this\")\n\nLoad and work with images using PIL:\n```python\nfrom PIL import Image\n\nuploaded = Image.open('file.png')\n# Use directly, or just as reference for colors/style\n```\n\n### Drawing from Scratch\nWhen drawing graphics from scratch, use PIL ImageDraw primitives:\n\n```python\nfrom PIL import ImageDraw\n\ndraw = ImageDraw.Draw(frame)\n\n# Circles/ovals\ndraw.ellipse([x1, y1, x2, y2], fill=(r, g, b), outline=(r, g, b), width=3)\n\n# Stars, triangles, any polygon\npoints = [(x1, y1), (x2, y2), (x3, y3), ...]\ndraw.polygon(points, fill=(r, g, b), outline=(r, g, b), width=3)\n\n# Lines\ndraw.line([(x1, y1), (x2, y2)], fill=(r, g, b), width=5)\n\n# Rectangles\ndraw.rectangle([x1, y1, x2, y2], fill=(r, g, b), outline=(r, g, b), width=3)\n```\n\n**Don't use:** Emoji fonts (unreliable across platforms) or assume pre-packaged graphics exist in this skill.\n\n### Making Graphics Look Good\n\nGraphics should look polished and creative, not basic. Here's how:\n\n**Use thicker lines** - Always set `width=2` or higher for outlines and lines. Thin lines (width=1) look choppy and amateurish.\n\n**Add visual depth**:\n- Use gradients for backgrounds (`create_gradient_background`)\n- Layer multiple shapes for complexity (e.g., a star with a smaller star inside)\n\n**Make shapes more interesting**:\n- Don't just draw a plain circle - add highlights, rings, or patterns\n- Stars can have glows (draw larger, semi-transparent versions behind)\n- Combine multiple shapes (stars + sparkles, circles + rings)\n\n**Pay attention to colors**:\n- Use vibrant, complementary colors\n- Add contrast (dark outlines on light shapes, light outlines on dark shapes)\n- Consider the overall composition\n\n**For complex shapes** (hearts, snowflakes, etc.):\n- Use combinations of polygons and ellipses\n- Calculate points carefully for symmetry\n- Add details (a heart can have a highlight curve, snowflakes have intricate branches)\n\nBe creative and detailed! A good Slack GIF should look polished, not like placeholder graphics.\n\n## Available Utilities\n\n### GIFBuilder (`core.gif_builder`)\nAssembles frames and optimizes for Slack:\n```python\nbuilder = GIFBuilder(width=128, height=128, fps=10)\nbuilder.add_frame(frame)  # Add PIL Image\nbuilder.add_frames(frames)  # Add list of frames\nbuilder.save('out.gif', num_colors=48, optimize_for_emoji=True, remove_duplicates=True)\n```\n\n### Validators (`core.validators`)\nCheck if GIF meets Slack requirements:\n```python\nfrom core.validators import validate_gif, is_slack_ready\n\n# Detailed validation\npasses, info = validate_gif('my.gif', is_emoji=True, verbose=True)\n\n# Quick check\nif is_slack_ready('my.gif'):\n    print(\"Ready!\")\n```\n\n### Easing Functions (`core.easing`)\nSmooth motion instead of linear:\n```python\nfrom core.easing import interpolate\n\n# Progress from 0.0 to 1.0\nt = i / (num_frames - 1)\n\n# Apply easing\ny = interpolate(start=0, end=400, t=t, easing='ease_out')\n\n# Available: linear, ease_in, ease_out, ease_in_out,\n#           bounce_out, elastic_out, back_out\n```\n\n### Frame Helpers (`core.frame_composer`)\nConvenience functions for common needs:\n```python\nfrom core.frame_composer import (\n    create_blank_frame,         # Solid color background\n    create_gradient_background,  # Vertical gradient\n    draw_circle,                # Helper for circles\n    draw_text,                  # Simple text rendering\n    draw_star                   # 5-pointed star\n)\n```\n\n## Animation Concepts\n\n### Shake/Vibrate\nOffset object position with oscillation:\n- Use `math.sin()` or `math.cos()` with frame index\n- Add small random variations for natural feel\n- Apply to x and/or y position\n\n### Pulse/Heartbeat\nScale object size rhythmically:\n- Use `math.sin(t * frequency * 2 * math.pi)` for smooth pulse\n- For heartbeat: two quick pulses then pause (adjust sine wave)\n- Scale between 0.8 and 1.2 of base size\n\n### Bounce\nObject falls and bounces:\n- Use `interpolate()` with `easing='bounce_out'` for landing\n- Use `easing='ease_in'` for falling (accelerating)\n- Apply gravity by increasing y velocity each frame\n\n### Spin/Rotate\nRotate object around center:\n- PIL: `image.rotate(angle, resample=Image.BICUBIC)`\n- For wobble: use sine wave for angle instead of linear\n\n### Fade In/Out\nGradually appear or disappear:\n- Create RGBA image, adjust alpha channel\n- Or use `Image.blend(image1, image2, alpha)`\n- Fade in: alpha from 0 to 1\n- Fade out: alpha from 1 to 0\n\n### Slide\nMove object from off-screen to position:\n- Start position: outside frame bounds\n- End position: target location\n- Use `interpolate()` with `easing='ease_out'` for smooth stop\n- For overshoot: use `easing='back_out'`\n\n### Zoom\nScale and position for zoom effect:\n- Zoom in: scale from 0.1 to 2.0, crop center\n- Zoom out: scale from 2.0 to 1.0\n- Can add motion blur for drama (PIL filter)\n\n### Explode/Particle Burst\nCreate particles radiating outward:\n- Generate particles with random angles and velocities\n- Update each particle: `x += vx`, `y += vy`\n- Add gravity: `vy += gravity_constant`\n- Fade out particles over time (reduce alpha)\n\n## Optimization Strategies\n\nOnly when asked to make the file size smaller, implement a few of the following methods:\n\n1. **Fewer frames** - Lower FPS (10 instead of 20) or shorter duration\n2. **Fewer colors** - `num_colors=48` instead of 128\n3. **Smaller dimensions** - 128x128 instead of 480x480\n4. **Remove duplicates** - `remove_duplicates=True` in save()\n5. **Emoji mode** - `optimize_for_emoji=True` auto-optimizes\n\n```python\n# Maximum optimization for emoji\nbuilder.save(\n    'emoji.gif',\n    num_colors=48,\n    optimize_for_emoji=True,\n    remove_duplicates=True\n)\n```\n\n## Philosophy\n\nThis skill provides:\n- **Knowledge**: Slack's requirements and animation concepts\n- **Utilities**: GIFBuilder, validators, easing functions\n- **Flexibility**: Create the animation logic using PIL primitives\n\nIt does NOT provide:\n- Rigid animation templates or pre-made functions\n- Emoji font rendering (unreliable across platforms)\n- A library of pre-packaged graphics built into the skill\n\n**Note on user uploads**: This skill doesn't include pre-built graphics, but if a user uploads an image, use PIL to load and work with it - interpret based on their request whether they want it used directly or just as inspiration.\n\nBe creative! Combine concepts (bouncing + rotating, pulsing + sliding, etc.) and use PIL's full capabilities.\n\n## Dependencies\n\n```bash\npip install pillow imageio numpy\n```\n",
        "skills/theme-factory/SKILL.md": "---\nname: theme-factory\ndescription: Toolkit for styling artifacts with a theme. These artifacts can be slides, docs, reportings, HTML landing pages, etc. There are 10 pre-set themes with colors/fonts that you can apply to any artifact that has been creating, or can generate a new theme on-the-fly.\nlicense: Complete terms in LICENSE.txt\n---\n\n\n# Theme Factory Skill\n\nThis skill provides a curated collection of professional font and color themes themes, each with carefully selected color palettes and font pairings. Once a theme is chosen, it can be applied to any artifact.\n\n## Purpose\n\nTo apply consistent, professional styling to presentation slide decks, use this skill. Each theme includes:\n- A cohesive color palette with hex codes\n- Complementary font pairings for headers and body text\n- A distinct visual identity suitable for different contexts and audiences\n\n## Usage Instructions\n\nTo apply styling to a slide deck or other artifact:\n\n1. **Show the theme showcase**: Display the `theme-showcase.pdf` file to allow users to see all available themes visually. Do not make any modifications to it; simply show the file for viewing.\n2. **Ask for their choice**: Ask which theme to apply to the deck\n3. **Wait for selection**: Get explicit confirmation about the chosen theme\n4. **Apply the theme**: Once a theme has been chosen, apply the selected theme's colors and fonts to the deck/artifact\n\n## Themes Available\n\nThe following 10 themes are available, each showcased in `theme-showcase.pdf`:\n\n1. **Ocean Depths** - Professional and calming maritime theme\n2. **Sunset Boulevard** - Warm and vibrant sunset colors\n3. **Forest Canopy** - Natural and grounded earth tones\n4. **Modern Minimalist** - Clean and contemporary grayscale\n5. **Golden Hour** - Rich and warm autumnal palette\n6. **Arctic Frost** - Cool and crisp winter-inspired theme\n7. **Desert Rose** - Soft and sophisticated dusty tones\n8. **Tech Innovation** - Bold and modern tech aesthetic\n9. **Botanical Garden** - Fresh and organic garden colors\n10. **Midnight Galaxy** - Dramatic and cosmic deep tones\n\n## Theme Details\n\nEach theme is defined in the `themes/` directory with complete specifications including:\n- Cohesive color palette with hex codes\n- Complementary font pairings for headers and body text\n- Distinct visual identity suitable for different contexts and audiences\n\n## Application Process\n\nAfter a preferred theme is selected:\n1. Read the corresponding theme file from the `themes/` directory\n2. Apply the specified colors and fonts consistently throughout the deck\n3. Ensure proper contrast and readability\n4. Maintain the theme's visual identity across all slides\n\n## Create your Own Theme\nTo handle cases where none of the existing themes work for an artifact, create a custom theme. Based on provided inputs, generate a new theme similar to the ones above. Give the theme a similar name describing what the font/color combinations represent. Use any basic description provided to choose appropriate colors/fonts. After generating the theme, show it for review and verification. Following that, apply the theme as described above.\n",
        "skills/theme-factory/themes/arctic-frost.md": "# Arctic Frost\n\nA cool and crisp winter-inspired theme that conveys clarity, precision, and professionalism.\n\n## Color Palette\n\n- **Ice Blue**: `#d4e4f7` - Light backgrounds and highlights\n- **Steel Blue**: `#4a6fa5` - Primary accent color\n- **Silver**: `#c0c0c0` - Metallic accent elements\n- **Crisp White**: `#fafafa` - Clean backgrounds and text\n\n## Typography\n\n- **Headers**: DejaVu Sans Bold\n- **Body Text**: DejaVu Sans\n\n## Best Used For\n\nHealthcare presentations, technology solutions, winter sports, clean tech, pharmaceutical content.\n",
        "skills/theme-factory/themes/botanical-garden.md": "# Botanical Garden\n\nA fresh and organic theme featuring vibrant garden-inspired colors for lively presentations.\n\n## Color Palette\n\n- **Fern Green**: `#4a7c59` - Rich natural green\n- **Marigold**: `#f9a620` - Bright floral accent\n- **Terracotta**: `#b7472a` - Earthy warm tone\n- **Cream**: `#f5f3ed` - Soft neutral backgrounds\n\n## Typography\n\n- **Headers**: DejaVu Serif Bold\n- **Body Text**: DejaVu Sans\n\n## Best Used For\n\nGarden centers, food presentations, farm-to-table content, botanical brands, natural products.\n",
        "skills/theme-factory/themes/desert-rose.md": "# Desert Rose\n\nA soft and sophisticated theme with dusty, muted tones perfect for elegant presentations.\n\n## Color Palette\n\n- **Dusty Rose**: `#d4a5a5` - Soft primary color\n- **Clay**: `#b87d6d` - Earthy accent\n- **Sand**: `#e8d5c4` - Warm neutral backgrounds\n- **Deep Burgundy**: `#5d2e46` - Rich dark contrast\n\n## Typography\n\n- **Headers**: FreeSans Bold\n- **Body Text**: FreeSans\n\n## Best Used For\n\nFashion presentations, beauty brands, wedding planning, interior design, boutique businesses.\n",
        "skills/theme-factory/themes/forest-canopy.md": "# Forest Canopy\n\nA natural and grounded theme featuring earth tones inspired by dense forest environments.\n\n## Color Palette\n\n- **Forest Green**: `#2d4a2b` - Primary dark green\n- **Sage**: `#7d8471` - Muted green accent\n- **Olive**: `#a4ac86` - Light accent color\n- **Ivory**: `#faf9f6` - Backgrounds and text\n\n## Typography\n\n- **Headers**: FreeSerif Bold\n- **Body Text**: FreeSans\n\n## Best Used For\n\nEnvironmental presentations, sustainability reports, outdoor brands, wellness content, organic products.\n",
        "skills/theme-factory/themes/golden-hour.md": "# Golden Hour\n\nA rich and warm autumnal palette that creates an inviting and sophisticated atmosphere.\n\n## Color Palette\n\n- **Mustard Yellow**: `#f4a900` - Bold primary accent\n- **Terracotta**: `#c1666b` - Warm secondary color\n- **Warm Beige**: `#d4b896` - Neutral backgrounds\n- **Chocolate Brown**: `#4a403a` - Dark text and anchors\n\n## Typography\n\n- **Headers**: FreeSans Bold\n- **Body Text**: FreeSans\n\n## Best Used For\n\nRestaurant presentations, hospitality brands, fall campaigns, cozy lifestyle content, artisan products.\n",
        "skills/theme-factory/themes/midnight-galaxy.md": "# Midnight Galaxy\n\nA dramatic and cosmic theme with deep purples and mystical tones for impactful presentations.\n\n## Color Palette\n\n- **Deep Purple**: `#2b1e3e` - Rich dark base\n- **Cosmic Blue**: `#4a4e8f` - Mystical mid-tone\n- **Lavender**: `#a490c2` - Soft accent color\n- **Silver**: `#e6e6fa` - Light highlights and text\n\n## Typography\n\n- **Headers**: FreeSans Bold\n- **Body Text**: FreeSans\n\n## Best Used For\n\nEntertainment industry, gaming presentations, nightlife venues, luxury brands, creative agencies.\n",
        "skills/theme-factory/themes/modern-minimalist.md": "# Modern Minimalist\n\nA clean and contemporary theme with a sophisticated grayscale palette for maximum versatility.\n\n## Color Palette\n\n- **Charcoal**: `#36454f` - Primary dark color\n- **Slate Gray**: `#708090` - Medium gray for accents\n- **Light Gray**: `#d3d3d3` - Backgrounds and dividers\n- **White**: `#ffffff` - Text and clean backgrounds\n\n## Typography\n\n- **Headers**: DejaVu Sans Bold\n- **Body Text**: DejaVu Sans\n\n## Best Used For\n\nTech presentations, architecture portfolios, design showcases, modern business proposals, data visualization.\n",
        "skills/theme-factory/themes/ocean-depths.md": "# Ocean Depths\n\nA professional and calming maritime theme that evokes the serenity of deep ocean waters.\n\n## Color Palette\n\n- **Deep Navy**: `#1a2332` - Primary background color\n- **Teal**: `#2d8b8b` - Accent color for highlights and emphasis\n- **Seafoam**: `#a8dadc` - Secondary accent for lighter elements\n- **Cream**: `#f1faee` - Text and light backgrounds\n\n## Typography\n\n- **Headers**: DejaVu Sans Bold\n- **Body Text**: DejaVu Sans\n\n## Best Used For\n\nCorporate presentations, financial reports, professional consulting decks, trust-building content.\n",
        "skills/theme-factory/themes/sunset-boulevard.md": "# Sunset Boulevard\n\nA warm and vibrant theme inspired by golden hour sunsets, perfect for energetic and creative presentations.\n\n## Color Palette\n\n- **Burnt Orange**: `#e76f51` - Primary accent color\n- **Coral**: `#f4a261` - Secondary warm accent\n- **Warm Sand**: `#e9c46a` - Highlighting and backgrounds\n- **Deep Purple**: `#264653` - Dark contrast and text\n\n## Typography\n\n- **Headers**: DejaVu Serif Bold\n- **Body Text**: DejaVu Sans\n\n## Best Used For\n\nCreative pitches, marketing presentations, lifestyle brands, event promotions, inspirational content.\n",
        "skills/theme-factory/themes/tech-innovation.md": "# Tech Innovation\n\nA bold and modern theme with high-contrast colors perfect for cutting-edge technology presentations.\n\n## Color Palette\n\n- **Electric Blue**: `#0066ff` - Vibrant primary accent\n- **Neon Cyan**: `#00ffff` - Bright highlight color\n- **Dark Gray**: `#1e1e1e` - Deep backgrounds\n- **White**: `#ffffff` - Clean text and contrast\n\n## Typography\n\n- **Headers**: DejaVu Sans Bold\n- **Body Text**: DejaVu Sans\n\n## Best Used For\n\nTech startups, software launches, innovation showcases, AI/ML presentations, digital transformation content.\n",
        "skills/web-artifacts-builder/SKILL.md": "---\nname: web-artifacts-builder\ndescription: Suite of tools for creating elaborate, multi-component claude.ai HTML artifacts using modern frontend web technologies (React, Tailwind CSS, shadcn/ui). Use for complex artifacts requiring state management, routing, or shadcn/ui components - not for simple single-file HTML/JSX artifacts.\nlicense: Complete terms in LICENSE.txt\n---\n\n# Web Artifacts Builder\n\nTo build powerful frontend claude.ai artifacts, follow these steps:\n1. Initialize the frontend repo using `scripts/init-artifact.sh`\n2. Develop your artifact by editing the generated code\n3. Bundle all code into a single HTML file using `scripts/bundle-artifact.sh`\n4. Display artifact to user\n5. (Optional) Test the artifact\n\n**Stack**: React 18 + TypeScript + Vite + Parcel (bundling) + Tailwind CSS + shadcn/ui\n\n## Design & Style Guidelines\n\nVERY IMPORTANT: To avoid what is often referred to as \"AI slop\", avoid using excessive centered layouts, purple gradients, uniform rounded corners, and Inter font.\n\n## Quick Start\n\n### Step 1: Initialize Project\n\nRun the initialization script to create a new React project:\n```bash\nbash scripts/init-artifact.sh <project-name>\ncd <project-name>\n```\n\nThis creates a fully configured project with:\n- ✅ React + TypeScript (via Vite)\n- ✅ Tailwind CSS 3.4.1 with shadcn/ui theming system\n- ✅ Path aliases (`@/`) configured\n- ✅ 40+ shadcn/ui components pre-installed\n- ✅ All Radix UI dependencies included\n- ✅ Parcel configured for bundling (via .parcelrc)\n- ✅ Node 18+ compatibility (auto-detects and pins Vite version)\n\n### Step 2: Develop Your Artifact\n\nTo build the artifact, edit the generated files. See **Common Development Tasks** below for guidance.\n\n### Step 3: Bundle to Single HTML File\n\nTo bundle the React app into a single HTML artifact:\n```bash\nbash scripts/bundle-artifact.sh\n```\n\nThis creates `bundle.html` - a self-contained artifact with all JavaScript, CSS, and dependencies inlined. This file can be directly shared in Claude conversations as an artifact.\n\n**Requirements**: Your project must have an `index.html` in the root directory.\n\n**What the script does**:\n- Installs bundling dependencies (parcel, @parcel/config-default, parcel-resolver-tspaths, html-inline)\n- Creates `.parcelrc` config with path alias support\n- Builds with Parcel (no source maps)\n- Inlines all assets into single HTML using html-inline\n\n### Step 4: Share Artifact with User\n\nFinally, share the bundled HTML file in conversation with the user so they can view it as an artifact.\n\n### Step 5: Testing/Visualizing the Artifact (Optional)\n\nNote: This is a completely optional step. Only perform if necessary or requested.\n\nTo test/visualize the artifact, use available tools (including other Skills or built-in tools like Playwright or Puppeteer). In general, avoid testing the artifact upfront as it adds latency between the request and when the finished artifact can be seen. Test later, after presenting the artifact, if requested or if issues arise.\n\n## Reference\n\n- **shadcn/ui components**: https://ui.shadcn.com/docs/components",
        "skills/webapp-testing/SKILL.md": "---\nname: webapp-testing\ndescription: Toolkit for interacting with and testing local web applications using Playwright. Supports verifying frontend functionality, debugging UI behavior, capturing browser screenshots, and viewing browser logs.\nlicense: Complete terms in LICENSE.txt\n---\n\n# Web Application Testing\n\nTo test local web applications, write native Python Playwright scripts.\n\n**Helper Scripts Available**:\n- `scripts/with_server.py` - Manages server lifecycle (supports multiple servers)\n\n**Always run scripts with `--help` first** to see usage. DO NOT read the source until you try running the script first and find that a customized solution is abslutely necessary. These scripts can be very large and thus pollute your context window. They exist to be called directly as black-box scripts rather than ingested into your context window.\n\n## Decision Tree: Choosing Your Approach\n\n```\nUser task → Is it static HTML?\n    ├─ Yes → Read HTML file directly to identify selectors\n    │         ├─ Success → Write Playwright script using selectors\n    │         └─ Fails/Incomplete → Treat as dynamic (below)\n    │\n    └─ No (dynamic webapp) → Is the server already running?\n        ├─ No → Run: python scripts/with_server.py --help\n        │        Then use the helper + write simplified Playwright script\n        │\n        └─ Yes → Reconnaissance-then-action:\n            1. Navigate and wait for networkidle\n            2. Take screenshot or inspect DOM\n            3. Identify selectors from rendered state\n            4. Execute actions with discovered selectors\n```\n\n## Example: Using with_server.py\n\nTo start a server, run `--help` first, then use the helper:\n\n**Single server:**\n```bash\npython scripts/with_server.py --server \"npm run dev\" --port 5173 -- python your_automation.py\n```\n\n**Multiple servers (e.g., backend + frontend):**\n```bash\npython scripts/with_server.py \\\n  --server \"cd backend && python server.py\" --port 3000 \\\n  --server \"cd frontend && npm run dev\" --port 5173 \\\n  -- python your_automation.py\n```\n\nTo create an automation script, include only Playwright logic (servers are managed automatically):\n```python\nfrom playwright.sync_api import sync_playwright\n\nwith sync_playwright() as p:\n    browser = p.chromium.launch(headless=True) # Always launch chromium in headless mode\n    page = browser.new_page()\n    page.goto('http://localhost:5173') # Server already running and ready\n    page.wait_for_load_state('networkidle') # CRITICAL: Wait for JS to execute\n    # ... your automation logic\n    browser.close()\n```\n\n## Reconnaissance-Then-Action Pattern\n\n1. **Inspect rendered DOM**:\n   ```python\n   page.screenshot(path='/tmp/inspect.png', full_page=True)\n   content = page.content()\n   page.locator('button').all()\n   ```\n\n2. **Identify selectors** from inspection results\n\n3. **Execute actions** using discovered selectors\n\n## Common Pitfall\n\n❌ **Don't** inspect the DOM before waiting for `networkidle` on dynamic apps\n✅ **Do** wait for `page.wait_for_load_state('networkidle')` before inspection\n\n## Best Practices\n\n- **Use bundled scripts as black boxes** - To accomplish a task, consider whether one of the scripts available in `scripts/` can help. These scripts handle common, complex workflows reliably without cluttering the context window. Use `--help` to see usage, then invoke directly. \n- Use `sync_playwright()` for synchronous scripts\n- Always close the browser when done\n- Use descriptive selectors: `text=`, `role=`, CSS selectors, or IDs\n- Add appropriate waits: `page.wait_for_selector()` or `page.wait_for_timeout()`\n\n## Reference Files\n\n- **examples/** - Examples showing common patterns:\n  - `element_discovery.py` - Discovering buttons, links, and inputs on a page\n  - `static_html_automation.py` - Using file:// URLs for local HTML\n  - `console_logging.py` - Capturing console logs during automation",
        "skills/xlsx/SKILL.md": "---\nname: xlsx\ndescription: \"Comprehensive spreadsheet creation, editing, and analysis with support for formulas, formatting, data analysis, and visualization. When Claude needs to work with spreadsheets (.xlsx, .xlsm, .csv, .tsv, etc) for: (1) Creating new spreadsheets with formulas and formatting, (2) Reading or analyzing data, (3) Modify existing spreadsheets while preserving formulas, (4) Data analysis and visualization in spreadsheets, or (5) Recalculating formulas\"\nlicense: Proprietary. LICENSE.txt has complete terms\n---\n\n# Requirements for Outputs\n\n## All Excel files\n\n### Zero Formula Errors\n- Every Excel model MUST be delivered with ZERO formula errors (#REF!, #DIV/0!, #VALUE!, #N/A, #NAME?)\n\n### Preserve Existing Templates (when updating templates)\n- Study and EXACTLY match existing format, style, and conventions when modifying files\n- Never impose standardized formatting on files with established patterns\n- Existing template conventions ALWAYS override these guidelines\n\n## Financial models\n\n### Color Coding Standards\nUnless otherwise stated by the user or existing template\n\n#### Industry-Standard Color Conventions\n- **Blue text (RGB: 0,0,255)**: Hardcoded inputs, and numbers users will change for scenarios\n- **Black text (RGB: 0,0,0)**: ALL formulas and calculations\n- **Green text (RGB: 0,128,0)**: Links pulling from other worksheets within same workbook\n- **Red text (RGB: 255,0,0)**: External links to other files\n- **Yellow background (RGB: 255,255,0)**: Key assumptions needing attention or cells that need to be updated\n\n### Number Formatting Standards\n\n#### Required Format Rules\n- **Years**: Format as text strings (e.g., \"2024\" not \"2,024\")\n- **Currency**: Use $#,##0 format; ALWAYS specify units in headers (\"Revenue ($mm)\")\n- **Zeros**: Use number formatting to make all zeros \"-\", including percentages (e.g., \"$#,##0;($#,##0);-\")\n- **Percentages**: Default to 0.0% format (one decimal)\n- **Multiples**: Format as 0.0x for valuation multiples (EV/EBITDA, P/E)\n- **Negative numbers**: Use parentheses (123) not minus -123\n\n### Formula Construction Rules\n\n#### Assumptions Placement\n- Place ALL assumptions (growth rates, margins, multiples, etc.) in separate assumption cells\n- Use cell references instead of hardcoded values in formulas\n- Example: Use =B5*(1+$B$6) instead of =B5*1.05\n\n#### Formula Error Prevention\n- Verify all cell references are correct\n- Check for off-by-one errors in ranges\n- Ensure consistent formulas across all projection periods\n- Test with edge cases (zero values, negative numbers)\n- Verify no unintended circular references\n\n#### Documentation Requirements for Hardcodes\n- Comment or in cells beside (if end of table). Format: \"Source: [System/Document], [Date], [Specific Reference], [URL if applicable]\"\n- Examples:\n  - \"Source: Company 10-K, FY2024, Page 45, Revenue Note, [SEC EDGAR URL]\"\n  - \"Source: Company 10-Q, Q2 2025, Exhibit 99.1, [SEC EDGAR URL]\"\n  - \"Source: Bloomberg Terminal, 8/15/2025, AAPL US Equity\"\n  - \"Source: FactSet, 8/20/2025, Consensus Estimates Screen\"\n\n# XLSX creation, editing, and analysis\n\n## Overview\n\nA user may ask you to create, edit, or analyze the contents of an .xlsx file. You have different tools and workflows available for different tasks.\n\n## Important Requirements\n\n**LibreOffice Required for Formula Recalculation**: You can assume LibreOffice is installed for recalculating formula values using the `recalc.py` script. The script automatically configures LibreOffice on first run\n\n## Reading and analyzing data\n\n### Data analysis with pandas\nFor data analysis, visualization, and basic operations, use **pandas** which provides powerful data manipulation capabilities:\n\n```python\nimport pandas as pd\n\n# Read Excel\ndf = pd.read_excel('file.xlsx')  # Default: first sheet\nall_sheets = pd.read_excel('file.xlsx', sheet_name=None)  # All sheets as dict\n\n# Analyze\ndf.head()      # Preview data\ndf.info()      # Column info\ndf.describe()  # Statistics\n\n# Write Excel\ndf.to_excel('output.xlsx', index=False)\n```\n\n## Excel File Workflows\n\n## CRITICAL: Use Formulas, Not Hardcoded Values\n\n**Always use Excel formulas instead of calculating values in Python and hardcoding them.** This ensures the spreadsheet remains dynamic and updateable.\n\n### ❌ WRONG - Hardcoding Calculated Values\n```python\n# Bad: Calculating in Python and hardcoding result\ntotal = df['Sales'].sum()\nsheet['B10'] = total  # Hardcodes 5000\n\n# Bad: Computing growth rate in Python\ngrowth = (df.iloc[-1]['Revenue'] - df.iloc[0]['Revenue']) / df.iloc[0]['Revenue']\nsheet['C5'] = growth  # Hardcodes 0.15\n\n# Bad: Python calculation for average\navg = sum(values) / len(values)\nsheet['D20'] = avg  # Hardcodes 42.5\n```\n\n### ✅ CORRECT - Using Excel Formulas\n```python\n# Good: Let Excel calculate the sum\nsheet['B10'] = '=SUM(B2:B9)'\n\n# Good: Growth rate as Excel formula\nsheet['C5'] = '=(C4-C2)/C2'\n\n# Good: Average using Excel function\nsheet['D20'] = '=AVERAGE(D2:D19)'\n```\n\nThis applies to ALL calculations - totals, percentages, ratios, differences, etc. The spreadsheet should be able to recalculate when source data changes.\n\n## Common Workflow\n1. **Choose tool**: pandas for data, openpyxl for formulas/formatting\n2. **Create/Load**: Create new workbook or load existing file\n3. **Modify**: Add/edit data, formulas, and formatting\n4. **Save**: Write to file\n5. **Recalculate formulas (MANDATORY IF USING FORMULAS)**: Use the recalc.py script\n   ```bash\n   python recalc.py output.xlsx\n   ```\n6. **Verify and fix any errors**: \n   - The script returns JSON with error details\n   - If `status` is `errors_found`, check `error_summary` for specific error types and locations\n   - Fix the identified errors and recalculate again\n   - Common errors to fix:\n     - `#REF!`: Invalid cell references\n     - `#DIV/0!`: Division by zero\n     - `#VALUE!`: Wrong data type in formula\n     - `#NAME?`: Unrecognized formula name\n\n### Creating new Excel files\n\n```python\n# Using openpyxl for formulas and formatting\nfrom openpyxl import Workbook\nfrom openpyxl.styles import Font, PatternFill, Alignment\n\nwb = Workbook()\nsheet = wb.active\n\n# Add data\nsheet['A1'] = 'Hello'\nsheet['B1'] = 'World'\nsheet.append(['Row', 'of', 'data'])\n\n# Add formula\nsheet['B2'] = '=SUM(A1:A10)'\n\n# Formatting\nsheet['A1'].font = Font(bold=True, color='FF0000')\nsheet['A1'].fill = PatternFill('solid', start_color='FFFF00')\nsheet['A1'].alignment = Alignment(horizontal='center')\n\n# Column width\nsheet.column_dimensions['A'].width = 20\n\nwb.save('output.xlsx')\n```\n\n### Editing existing Excel files\n\n```python\n# Using openpyxl to preserve formulas and formatting\nfrom openpyxl import load_workbook\n\n# Load existing file\nwb = load_workbook('existing.xlsx')\nsheet = wb.active  # or wb['SheetName'] for specific sheet\n\n# Working with multiple sheets\nfor sheet_name in wb.sheetnames:\n    sheet = wb[sheet_name]\n    print(f\"Sheet: {sheet_name}\")\n\n# Modify cells\nsheet['A1'] = 'New Value'\nsheet.insert_rows(2)  # Insert row at position 2\nsheet.delete_cols(3)  # Delete column 3\n\n# Add new sheet\nnew_sheet = wb.create_sheet('NewSheet')\nnew_sheet['A1'] = 'Data'\n\nwb.save('modified.xlsx')\n```\n\n## Recalculating formulas\n\nExcel files created or modified by openpyxl contain formulas as strings but not calculated values. Use the provided `recalc.py` script to recalculate formulas:\n\n```bash\npython recalc.py <excel_file> [timeout_seconds]\n```\n\nExample:\n```bash\npython recalc.py output.xlsx 30\n```\n\nThe script:\n- Automatically sets up LibreOffice macro on first run\n- Recalculates all formulas in all sheets\n- Scans ALL cells for Excel errors (#REF!, #DIV/0!, etc.)\n- Returns JSON with detailed error locations and counts\n- Works on both Linux and macOS\n\n## Formula Verification Checklist\n\nQuick checks to ensure formulas work correctly:\n\n### Essential Verification\n- [ ] **Test 2-3 sample references**: Verify they pull correct values before building full model\n- [ ] **Column mapping**: Confirm Excel columns match (e.g., column 64 = BL, not BK)\n- [ ] **Row offset**: Remember Excel rows are 1-indexed (DataFrame row 5 = Excel row 6)\n\n### Common Pitfalls\n- [ ] **NaN handling**: Check for null values with `pd.notna()`\n- [ ] **Far-right columns**: FY data often in columns 50+ \n- [ ] **Multiple matches**: Search all occurrences, not just first\n- [ ] **Division by zero**: Check denominators before using `/` in formulas (#DIV/0!)\n- [ ] **Wrong references**: Verify all cell references point to intended cells (#REF!)\n- [ ] **Cross-sheet references**: Use correct format (Sheet1!A1) for linking sheets\n\n### Formula Testing Strategy\n- [ ] **Start small**: Test formulas on 2-3 cells before applying broadly\n- [ ] **Verify dependencies**: Check all cells referenced in formulas exist\n- [ ] **Test edge cases**: Include zero, negative, and very large values\n\n### Interpreting recalc.py Output\nThe script returns JSON with error details:\n```json\n{\n  \"status\": \"success\",           // or \"errors_found\"\n  \"total_errors\": 0,              // Total error count\n  \"total_formulas\": 42,           // Number of formulas in file\n  \"error_summary\": {              // Only present if errors found\n    \"#REF!\": {\n      \"count\": 2,\n      \"locations\": [\"Sheet1!B5\", \"Sheet1!C10\"]\n    }\n  }\n}\n```\n\n## Best Practices\n\n### Library Selection\n- **pandas**: Best for data analysis, bulk operations, and simple data export\n- **openpyxl**: Best for complex formatting, formulas, and Excel-specific features\n\n### Working with openpyxl\n- Cell indices are 1-based (row=1, column=1 refers to cell A1)\n- Use `data_only=True` to read calculated values: `load_workbook('file.xlsx', data_only=True)`\n- **Warning**: If opened with `data_only=True` and saved, formulas are replaced with values and permanently lost\n- For large files: Use `read_only=True` for reading or `write_only=True` for writing\n- Formulas are preserved but not evaluated - use recalc.py to update values\n\n### Working with pandas\n- Specify data types to avoid inference issues: `pd.read_excel('file.xlsx', dtype={'id': str})`\n- For large files, read specific columns: `pd.read_excel('file.xlsx', usecols=['A', 'C', 'E'])`\n- Handle dates properly: `pd.read_excel('file.xlsx', parse_dates=['date_column'])`\n\n## Code Style Guidelines\n**IMPORTANT**: When generating Python code for Excel operations:\n- Write minimal, concise Python code without unnecessary comments\n- Avoid verbose variable names and redundant operations\n- Avoid unnecessary print statements\n\n**For Excel files themselves**:\n- Add comments to cells with complex formulas or important assumptions\n- Document data sources for hardcoded values\n- Include notes for key calculations and model sections",
        "template/SKILL.md": "---\nname: template-skill\ndescription: Replace with description of the skill and when Claude should use it.\n---\n\n# Insert instructions below\n"
      },
      "plugins": [
        {
          "name": "document-skills",
          "description": "Collection of document processing suite including Excel, Word, PowerPoint, and PDF capabilities",
          "source": "./",
          "strict": false,
          "skills": [
            "./skills/xlsx",
            "./skills/docx",
            "./skills/pptx",
            "./skills/pdf"
          ],
          "categories": [],
          "install_commands": [
            "/plugin marketplace add anthropics/skills",
            "/plugin install document-skills@anthropic-agent-skills"
          ]
        },
        {
          "name": "example-skills",
          "description": "Collection of example skills demonstrating various capabilities including skill creation, MCP building, visual design, algorithmic art, internal communications, web testing, artifact building, Slack GIFs, and theme styling",
          "source": "./",
          "strict": false,
          "skills": [
            "./skills/algorithmic-art",
            "./skills/brand-guidelines",
            "./skills/canvas-design",
            "./skills/doc-coauthoring",
            "./skills/frontend-design",
            "./skills/internal-comms",
            "./skills/mcp-builder",
            "./skills/skill-creator",
            "./skills/slack-gif-creator",
            "./skills/theme-factory",
            "./skills/web-artifacts-builder",
            "./skills/webapp-testing"
          ],
          "categories": [],
          "install_commands": [
            "/plugin marketplace add anthropics/skills",
            "/plugin install example-skills@anthropic-agent-skills"
          ]
        }
      ]
    },
    {
      "name": "claude-plugins-official",
      "version": null,
      "description": "Directory of popular Claude Code extensions including development tools, productivity plugins, and MCP integrations",
      "owner_info": {
        "name": "Anthropic",
        "email": "support@anthropic.com"
      },
      "keywords": [],
      "repo_full_name": "anthropics/claude-plugins-official",
      "repo_url": "https://github.com/anthropics/claude-plugins-official",
      "repo_description": "Official, Anthropic-managed directory of high quality Claude Code Plugins.",
      "homepage": "https://code.claude.com/docs/en/plugins",
      "signals": {
        "stars": 5363,
        "forks": 559,
        "pushed_at": "2026-01-29T20:42:24Z",
        "created_at": "2025-11-20T18:36:20Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 26440
        },
        {
          "path": "external_plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/asana",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/asana/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/asana/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 276
        },
        {
          "path": "external_plugins/context7",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/context7/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/context7/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 262
        },
        {
          "path": "external_plugins/firebase",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/firebase/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/firebase/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 281
        },
        {
          "path": "external_plugins/github",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/github/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/github/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 271
        },
        {
          "path": "external_plugins/gitlab",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/gitlab/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/gitlab/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 254
        },
        {
          "path": "external_plugins/greptile",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/greptile/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/greptile/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 357
        },
        {
          "path": "external_plugins/greptile/README.md",
          "type": "blob",
          "size": 1914
        },
        {
          "path": "external_plugins/laravel-boost",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/laravel-boost/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/laravel-boost/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 295
        },
        {
          "path": "external_plugins/linear",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/linear/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/linear/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 279
        },
        {
          "path": "external_plugins/playwright",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/playwright/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/playwright/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 295
        },
        {
          "path": "external_plugins/serena",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/serena/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/serena/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 254
        },
        {
          "path": "external_plugins/slack",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/slack/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/slack/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 270
        },
        {
          "path": "external_plugins/stripe",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/stripe/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/stripe/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 353
        },
        {
          "path": "external_plugins/stripe/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/stripe/commands/explain-error.md",
          "type": "blob",
          "size": 823
        },
        {
          "path": "external_plugins/stripe/commands/test-cards.md",
          "type": "blob",
          "size": 1015
        },
        {
          "path": "external_plugins/stripe/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/stripe/skills/stripe-best-practices",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/stripe/skills/stripe-best-practices/SKILL.md",
          "type": "blob",
          "size": 5502
        },
        {
          "path": "external_plugins/supabase",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/supabase/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "external_plugins/supabase/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 280
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 167
        },
        {
          "path": "plugins/agent-sdk-dev/README.md",
          "type": "blob",
          "size": 6397
        },
        {
          "path": "plugins/agent-sdk-dev/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/agents/agent-sdk-verifier-py.md",
          "type": "blob",
          "size": 5206
        },
        {
          "path": "plugins/agent-sdk-dev/agents/agent-sdk-verifier-ts.md",
          "type": "blob",
          "size": 5419
        },
        {
          "path": "plugins/agent-sdk-dev/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/agent-sdk-dev/commands/new-sdk-app.md",
          "type": "blob",
          "size": 7846
        },
        {
          "path": "plugins/artifact",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/artifact/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/artifact/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 273
        },
        {
          "path": "plugins/artifact/README.md",
          "type": "blob",
          "size": 1243
        },
        {
          "path": "plugins/artifact/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/artifact/skills/artifact",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/artifact/skills/artifact/SKILL.md",
          "type": "blob",
          "size": 3702
        },
        {
          "path": "plugins/artifact/skills/artifact/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/artifact/skills/artifact/templates/code-map.md",
          "type": "blob",
          "size": 6192
        },
        {
          "path": "plugins/artifact/skills/artifact/templates/concept-map.md",
          "type": "blob",
          "size": 3640
        },
        {
          "path": "plugins/artifact/skills/artifact/templates/data-explorer.md",
          "type": "blob",
          "size": 2813
        },
        {
          "path": "plugins/artifact/skills/artifact/templates/design-playground.md",
          "type": "blob",
          "size": 2717
        },
        {
          "path": "plugins/artifact/skills/artifact/templates/diff-review.md",
          "type": "blob",
          "size": 5729
        },
        {
          "path": "plugins/artifact/skills/artifact/templates/document-critique.md",
          "type": "blob",
          "size": 5150
        },
        {
          "path": "plugins/clangd-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/clangd-lsp/README.md",
          "type": "blob",
          "size": 780
        },
        {
          "path": "plugins/claude-code-setup",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-code-setup/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-code-setup/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 273
        },
        {
          "path": "plugins/claude-code-setup/README.md",
          "type": "blob",
          "size": 1015
        },
        {
          "path": "plugins/claude-code-setup/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-code-setup/skills/claude-automation-recommender",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-code-setup/skills/claude-automation-recommender/SKILL.md",
          "type": "blob",
          "size": 10856
        },
        {
          "path": "plugins/claude-code-setup/skills/claude-automation-recommender/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-code-setup/skills/claude-automation-recommender/references/hooks-patterns.md",
          "type": "blob",
          "size": 6316
        },
        {
          "path": "plugins/claude-code-setup/skills/claude-automation-recommender/references/mcp-servers.md",
          "type": "blob",
          "size": 7419
        },
        {
          "path": "plugins/claude-code-setup/skills/claude-automation-recommender/references/plugins-reference.md",
          "type": "blob",
          "size": 3016
        },
        {
          "path": "plugins/claude-code-setup/skills/claude-automation-recommender/references/skills-reference.md",
          "type": "blob",
          "size": 9612
        },
        {
          "path": "plugins/claude-code-setup/skills/claude-automation-recommender/references/subagent-templates.md",
          "type": "blob",
          "size": 5049
        },
        {
          "path": "plugins/claude-md-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-md-management/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-md-management/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 283
        },
        {
          "path": "plugins/claude-md-management/README.md",
          "type": "blob",
          "size": 1084
        },
        {
          "path": "plugins/claude-md-management/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-md-management/commands/revise-claude-md.md",
          "type": "blob",
          "size": 1357
        },
        {
          "path": "plugins/claude-md-management/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-md-management/skills/claude-md-improver",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-md-management/skills/claude-md-improver/SKILL.md",
          "type": "blob",
          "size": 6028
        },
        {
          "path": "plugins/claude-md-management/skills/claude-md-improver/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claude-md-management/skills/claude-md-improver/references/quality-criteria.md",
          "type": "blob",
          "size": 2617
        },
        {
          "path": "plugins/claude-md-management/skills/claude-md-improver/references/templates.md",
          "type": "blob",
          "size": 3687
        },
        {
          "path": "plugins/claude-md-management/skills/claude-md-improver/references/update-guidelines.md",
          "type": "blob",
          "size": 3197
        },
        {
          "path": "plugins/code-review",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-review/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-review/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 234
        },
        {
          "path": "plugins/code-review/README.md",
          "type": "blob",
          "size": 7321
        },
        {
          "path": "plugins/code-review/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-review/commands/code-review.md",
          "type": "blob",
          "size": 7422
        },
        {
          "path": "plugins/code-simplifier",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-simplifier/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-simplifier/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 271
        },
        {
          "path": "plugins/code-simplifier/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/code-simplifier/agents/code-simplifier.md",
          "type": "blob",
          "size": 3129
        },
        {
          "path": "plugins/commit-commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/commit-commands/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/commit-commands/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 236
        },
        {
          "path": "plugins/commit-commands/README.md",
          "type": "blob",
          "size": 5908
        },
        {
          "path": "plugins/commit-commands/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/commit-commands/commands/clean_gone.md",
          "type": "blob",
          "size": 1865
        },
        {
          "path": "plugins/commit-commands/commands/commit-push-pr.md",
          "type": "blob",
          "size": 796
        },
        {
          "path": "plugins/commit-commands/commands/commit.md",
          "type": "blob",
          "size": 624
        },
        {
          "path": "plugins/csharp-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/csharp-lsp/README.md",
          "type": "blob",
          "size": 486
        },
        {
          "path": "plugins/explanatory-output-style",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/explanatory-output-style/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/explanatory-output-style/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 268
        },
        {
          "path": "plugins/explanatory-output-style/README.md",
          "type": "blob",
          "size": 2470
        },
        {
          "path": "plugins/explanatory-output-style/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/explanatory-output-style/hooks/hooks.json",
          "type": "blob",
          "size": 314
        },
        {
          "path": "plugins/feature-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 262
        },
        {
          "path": "plugins/feature-dev/README.md",
          "type": "blob",
          "size": 11697
        },
        {
          "path": "plugins/feature-dev/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/agents/code-architect.md",
          "type": "blob",
          "size": 2259
        },
        {
          "path": "plugins/feature-dev/agents/code-explorer.md",
          "type": "blob",
          "size": 2115
        },
        {
          "path": "plugins/feature-dev/agents/code-reviewer.md",
          "type": "blob",
          "size": 2994
        },
        {
          "path": "plugins/feature-dev/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/feature-dev/commands/feature-dev.md",
          "type": "blob",
          "size": 5097
        },
        {
          "path": "plugins/frontend-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 180
        },
        {
          "path": "plugins/frontend-design/README.md",
          "type": "blob",
          "size": 977
        },
        {
          "path": "plugins/frontend-design/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/skills/frontend-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/frontend-design/skills/frontend-design/SKILL.md",
          "type": "blob",
          "size": 4274
        },
        {
          "path": "plugins/gopls-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/gopls-lsp/README.md",
          "type": "blob",
          "size": 473
        },
        {
          "path": "plugins/hookify",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 210
        },
        {
          "path": "plugins/hookify/README.md",
          "type": "blob",
          "size": 7710
        },
        {
          "path": "plugins/hookify/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/agents/conversation-analyzer.md",
          "type": "blob",
          "size": 5478
        },
        {
          "path": "plugins/hookify/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/commands/configure.md",
          "type": "blob",
          "size": 2863
        },
        {
          "path": "plugins/hookify/commands/help.md",
          "type": "blob",
          "size": 4624
        },
        {
          "path": "plugins/hookify/commands/hookify.md",
          "type": "blob",
          "size": 7667
        },
        {
          "path": "plugins/hookify/commands/list.md",
          "type": "blob",
          "size": 2020
        },
        {
          "path": "plugins/hookify/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/hooks/hooks.json",
          "type": "blob",
          "size": 1020
        },
        {
          "path": "plugins/hookify/hooks/posttooluse.py",
          "type": "blob",
          "size": 1622
        },
        {
          "path": "plugins/hookify/hooks/pretooluse.py",
          "type": "blob",
          "size": 1852
        },
        {
          "path": "plugins/hookify/hooks/stop.py",
          "type": "blob",
          "size": 1403
        },
        {
          "path": "plugins/hookify/hooks/userpromptsubmit.py",
          "type": "blob",
          "size": 1389
        },
        {
          "path": "plugins/hookify/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/skills/writing-rules",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/hookify/skills/writing-rules/SKILL.md",
          "type": "blob",
          "size": 8423
        },
        {
          "path": "plugins/jdtls-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/jdtls-lsp/README.md",
          "type": "blob",
          "size": 811
        },
        {
          "path": "plugins/kotlin-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/kotlin-lsp/README.md",
          "type": "blob",
          "size": 306
        },
        {
          "path": "plugins/learning-output-style",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/learning-output-style/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/learning-output-style/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 273
        },
        {
          "path": "plugins/learning-output-style/README.md",
          "type": "blob",
          "size": 4687
        },
        {
          "path": "plugins/learning-output-style/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/learning-output-style/hooks/hooks.json",
          "type": "blob",
          "size": 311
        },
        {
          "path": "plugins/lua-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/lua-lsp/README.md",
          "type": "blob",
          "size": 705
        },
        {
          "path": "plugins/php-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/php-lsp/README.md",
          "type": "blob",
          "size": 436
        },
        {
          "path": "plugins/plugin-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/README.md",
          "type": "blob",
          "size": 14590
        },
        {
          "path": "plugins/plugin-dev/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/agents/agent-creator.md",
          "type": "blob",
          "size": 7437
        },
        {
          "path": "plugins/plugin-dev/agents/plugin-validator.md",
          "type": "blob",
          "size": 6623
        },
        {
          "path": "plugins/plugin-dev/agents/skill-reviewer.md",
          "type": "blob",
          "size": 6079
        },
        {
          "path": "plugins/plugin-dev/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/commands/create-plugin.md",
          "type": "blob",
          "size": 14950
        },
        {
          "path": "plugins/plugin-dev/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/SKILL.md",
          "type": "blob",
          "size": 10430
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/examples/agent-creation-prompt.md",
          "type": "blob",
          "size": 9390
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/examples/complete-agent-examples.md",
          "type": "blob",
          "size": 14117
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references/agent-creation-system-prompt.md",
          "type": "blob",
          "size": 8879
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references/system-prompt-design.md",
          "type": "blob",
          "size": 9998
        },
        {
          "path": "plugins/plugin-dev/skills/agent-development/references/triggering-examples.md",
          "type": "blob",
          "size": 11613
        },
        {
          "path": "plugins/plugin-dev/skills/command-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/README.md",
          "type": "blob",
          "size": 7651
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/SKILL.md",
          "type": "blob",
          "size": 18941
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/examples/plugin-commands.md",
          "type": "blob",
          "size": 13989
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/examples/simple-commands.md",
          "type": "blob",
          "size": 8675
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/advanced-workflows.md",
          "type": "blob",
          "size": 13618
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/documentation-patterns.md",
          "type": "blob",
          "size": 14971
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/frontmatter-reference.md",
          "type": "blob",
          "size": 9162
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/interactive-commands.md",
          "type": "blob",
          "size": 20980
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/marketplace-considerations.md",
          "type": "blob",
          "size": 16437
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/plugin-features-reference.md",
          "type": "blob",
          "size": 14622
        },
        {
          "path": "plugins/plugin-dev/skills/command-development/references/testing-strategies.md",
          "type": "blob",
          "size": 14803
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/SKILL.md",
          "type": "blob",
          "size": 16246
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references/advanced.md",
          "type": "blob",
          "size": 10148
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references/migration.md",
          "type": "blob",
          "size": 8299
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/references/patterns.md",
          "type": "blob",
          "size": 7144
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/hook-development/scripts/README.md",
          "type": "blob",
          "size": 3677
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/SKILL.md",
          "type": "blob",
          "size": 12519
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references/authentication.md",
          "type": "blob",
          "size": 10196
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references/server-types.md",
          "type": "blob",
          "size": 10613
        },
        {
          "path": "plugins/plugin-dev/skills/mcp-integration/references/tool-usage.md",
          "type": "blob",
          "size": 11674
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/SKILL.md",
          "type": "blob",
          "size": 12097
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/examples/create-settings-command.md",
          "type": "blob",
          "size": 2177
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/examples/example-settings.md",
          "type": "blob",
          "size": 2930
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/references/parsing-techniques.md",
          "type": "blob",
          "size": 11513
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-settings/references/real-world-examples.md",
          "type": "blob",
          "size": 9492
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/README.md",
          "type": "blob",
          "size": 3210
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/SKILL.md",
          "type": "blob",
          "size": 13796
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples/advanced-plugin.md",
          "type": "blob",
          "size": 18746
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples/minimal-plugin.md",
          "type": "blob",
          "size": 1731
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/examples/standard-plugin.md",
          "type": "blob",
          "size": 13310
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/references/component-patterns.md",
          "type": "blob",
          "size": 12086
        },
        {
          "path": "plugins/plugin-dev/skills/plugin-structure/references/manifest-reference.md",
          "type": "blob",
          "size": 12061
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development/SKILL.md",
          "type": "blob",
          "size": 22825
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-dev/skills/skill-development/references/skill-creator-original.md",
          "type": "blob",
          "size": 11547
        },
        {
          "path": "plugins/pr-review-toolkit",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 266
        },
        {
          "path": "plugins/pr-review-toolkit/README.md",
          "type": "blob",
          "size": 7528
        },
        {
          "path": "plugins/pr-review-toolkit/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/agents/code-reviewer.md",
          "type": "blob",
          "size": 3985
        },
        {
          "path": "plugins/pr-review-toolkit/agents/code-simplifier.md",
          "type": "blob",
          "size": 5230
        },
        {
          "path": "plugins/pr-review-toolkit/agents/comment-analyzer.md",
          "type": "blob",
          "size": 5725
        },
        {
          "path": "plugins/pr-review-toolkit/agents/pr-test-analyzer.md",
          "type": "blob",
          "size": 4985
        },
        {
          "path": "plugins/pr-review-toolkit/agents/silent-failure-hunter.md",
          "type": "blob",
          "size": 7807
        },
        {
          "path": "plugins/pr-review-toolkit/agents/type-design-analyzer.md",
          "type": "blob",
          "size": 5368
        },
        {
          "path": "plugins/pr-review-toolkit/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pr-review-toolkit/commands/review-pr.md",
          "type": "blob",
          "size": 4997
        },
        {
          "path": "plugins/pyright-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/pyright-lsp/README.md",
          "type": "blob",
          "size": 564
        },
        {
          "path": "plugins/ralph-loop",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-loop/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-loop/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 321
        },
        {
          "path": "plugins/ralph-loop/README.md",
          "type": "blob",
          "size": 5259
        },
        {
          "path": "plugins/ralph-loop/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-loop/commands/cancel-ralph.md",
          "type": "blob",
          "size": 738
        },
        {
          "path": "plugins/ralph-loop/commands/help.md",
          "type": "blob",
          "size": 3227
        },
        {
          "path": "plugins/ralph-loop/commands/ralph-loop.md",
          "type": "blob",
          "size": 916
        },
        {
          "path": "plugins/ralph-loop/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ralph-loop/hooks/hooks.json",
          "type": "blob",
          "size": 282
        },
        {
          "path": "plugins/ralph-loop/hooks/stop-hook.sh",
          "type": "blob",
          "size": 6562
        },
        {
          "path": "plugins/rust-analyzer-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/rust-analyzer-lsp/README.md",
          "type": "blob",
          "size": 701
        },
        {
          "path": "plugins/security-guidance",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/security-guidance/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/security-guidance/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 280
        },
        {
          "path": "plugins/security-guidance/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/security-guidance/hooks/hooks.json",
          "type": "blob",
          "size": 382
        },
        {
          "path": "plugins/security-guidance/hooks/security_reminder_hook.py",
          "type": "blob",
          "size": 10767
        },
        {
          "path": "plugins/swift-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/swift-lsp/README.md",
          "type": "blob",
          "size": 602
        },
        {
          "path": "plugins/typescript-lsp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/typescript-lsp/README.md",
          "type": "blob",
          "size": 692
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n  \"name\": \"claude-plugins-official\",\n  \"description\": \"Directory of popular Claude Code extensions including development tools, productivity plugins, and MCP integrations\",\n  \"owner\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"typescript-lsp\",\n      \"description\": \"TypeScript/JavaScript language server for enhanced code intelligence\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/typescript-lsp\",\n      \"category\": \"development\",\n      \"strict\": false,\n      \"lspServers\": {\n        \"typescript\": {\n          \"command\": \"typescript-language-server\",\n          \"args\": [\"--stdio\"],\n          \"extensionToLanguage\": {\n            \".ts\": \"typescript\",\n            \".tsx\": \"typescriptreact\",\n            \".js\": \"javascript\",\n            \".jsx\": \"javascriptreact\",\n            \".mts\": \"typescript\",\n            \".cts\": \"typescript\",\n            \".mjs\": \"javascript\",\n            \".cjs\": \"javascript\"\n          }\n        }\n      }\n    },\n    {\n      \"name\": \"pyright-lsp\",\n      \"description\": \"Python language server (Pyright) for type checking and code intelligence\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/pyright-lsp\",\n      \"category\": \"development\",\n      \"strict\": false,\n      \"lspServers\": {\n        \"pyright\": {\n          \"command\": \"pyright-langserver\",\n          \"args\": [\"--stdio\"],\n          \"extensionToLanguage\": {\n            \".py\": \"python\",\n            \".pyi\": \"python\"\n          }\n        }\n      }\n    },\n    {\n      \"name\": \"gopls-lsp\",\n      \"description\": \"Go language server for code intelligence and refactoring\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/gopls-lsp\",\n      \"category\": \"development\",\n      \"strict\": false,\n      \"lspServers\": {\n        \"gopls\": {\n          \"command\": \"gopls\",\n          \"extensionToLanguage\": {\n            \".go\": \"go\"\n          }\n        }\n      }\n    },\n    {\n      \"name\": \"rust-analyzer-lsp\",\n      \"description\": \"Rust language server for code intelligence and analysis\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/rust-analyzer-lsp\",\n      \"category\": \"development\",\n      \"strict\": false,\n      \"lspServers\": {\n        \"rust-analyzer\": {\n          \"command\": \"rust-analyzer\",\n          \"extensionToLanguage\": {\n            \".rs\": \"rust\"\n          }\n        }\n      }\n    },\n    {\n      \"name\": \"clangd-lsp\",\n      \"description\": \"C/C++ language server (clangd) for code intelligence\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/clangd-lsp\",\n      \"category\": \"development\",\n      \"strict\": false,\n      \"lspServers\": {\n        \"clangd\": {\n          \"command\": \"clangd\",\n          \"args\": [\"--background-index\"],\n          \"extensionToLanguage\": {\n            \".c\": \"c\",\n            \".h\": \"c\",\n            \".cpp\": \"cpp\",\n            \".cc\": \"cpp\",\n            \".cxx\": \"cpp\",\n            \".hpp\": \"cpp\",\n            \".hxx\": \"cpp\",\n            \".C\": \"cpp\",\n            \".H\": \"cpp\"\n          }\n        }\n      }\n    },\n    {\n      \"name\": \"php-lsp\",\n      \"description\": \"PHP language server (Intelephense) for code intelligence\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/php-lsp\",\n      \"category\": \"development\",\n      \"strict\": false,\n      \"lspServers\": {\n        \"intelephense\": {\n          \"command\": \"intelephense\",\n          \"args\": [\"--stdio\"],\n          \"extensionToLanguage\": {\n            \".php\": \"php\"\n          }\n        }\n      }\n    },\n    {\n      \"name\": \"swift-lsp\",\n      \"description\": \"Swift language server (SourceKit-LSP) for code intelligence\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/swift-lsp\",\n      \"category\": \"development\",\n      \"strict\": false,\n      \"lspServers\": {\n        \"sourcekit-lsp\": {\n          \"command\": \"sourcekit-lsp\",\n          \"extensionToLanguage\": {\n            \".swift\": \"swift\"\n          }\n        }\n      }\n    },\n    {\n      \"name\": \"kotlin-lsp\",\n      \"description\": \"Kotlin language server for code intelligence\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/kotlin-lsp\",\n      \"category\": \"development\",\n      \"strict\": false,\n      \"lspServers\": {\n        \"kotlin-lsp\": {\n          \"command\": \"kotlin-lsp\",\n          \"args\": [\"--stdio\"],\n          \"extensionToLanguage\": {\n            \".kt\": \"kotlin\",\n            \".kts\": \"kotlin\"\n          },\n          \"startupTimeout\" : 120000\n        }\n      }\n    },\n    {\n      \"name\": \"csharp-lsp\",\n      \"description\": \"C# language server for code intelligence\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/csharp-lsp\",\n      \"category\": \"development\",\n      \"strict\": false,\n      \"lspServers\": {\n        \"csharp-ls\": {\n          \"command\": \"csharp-ls\",\n          \"extensionToLanguage\": {\n            \".cs\": \"csharp\"\n          }\n        }\n      }\n    },\n    {\n      \"name\": \"jdtls-lsp\",\n      \"description\": \"Java language server (Eclipse JDT.LS) for code intelligence\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/jdtls-lsp\",\n      \"category\": \"development\",\n      \"strict\": false,\n      \"lspServers\": {\n        \"jdtls\": {\n          \"command\": \"jdtls\",\n          \"extensionToLanguage\": {\n            \".java\": \"java\"\n          },\n          \"startupTimeout\": 120000\n        }\n      }\n    },\n    {\n      \"name\": \"lua-lsp\",\n      \"description\": \"Lua language server for code intelligence\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/lua-lsp\",\n      \"category\": \"development\",\n      \"strict\": false,\n      \"lspServers\": {\n        \"lua\": {\n          \"command\": \"lua-language-server\",\n          \"extensionToLanguage\": {\n            \".lua\": \"lua\"\n          }\n        }\n      }\n    },\n    {\n      \"name\": \"agent-sdk-dev\",\n      \"description\": \"Development kit for working with the Claude Agent SDK\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/agent-sdk-dev\",\n      \"category\": \"development\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/agent-sdk-dev\"\n    },\n    {\n      \"name\": \"pr-review-toolkit\",\n      \"description\": \"Comprehensive PR review agents specializing in comments, tests, error handling, type design, code quality, and code simplification\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/pr-review-toolkit\",\n      \"category\": \"productivity\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/pr-review-toolkit\"\n    },\n    {\n      \"name\": \"commit-commands\",\n      \"description\": \"Commands for git commit workflows including commit, push, and PR creation\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/commit-commands\",\n      \"category\": \"productivity\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/commit-commands\"\n    },\n    {\n      \"name\": \"feature-dev\",\n      \"description\": \"Comprehensive feature development workflow with specialized agents for codebase exploration, architecture design, and quality review\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/feature-dev\",\n      \"category\": \"development\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/feature-dev\"\n    },\n    {\n      \"name\": \"security-guidance\",\n      \"description\": \"Security reminder hook that warns about potential security issues when editing files, including command injection, XSS, and unsafe code patterns\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/security-guidance\",\n      \"category\": \"security\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/security-guidance\"\n    },\n    {\n      \"name\": \"code-review\",\n      \"description\": \"Automated code review for pull requests using multiple specialized agents with confidence-based scoring to filter false positives\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/code-review\",\n      \"category\": \"productivity\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/code-review\"\n    },\n    {\n      \"name\": \"code-simplifier\",\n      \"description\": \"Agent that simplifies and refines code for clarity, consistency, and maintainability while preserving functionality. Focuses on recently modified code.\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/code-simplifier\",\n      \"category\": \"productivity\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-official/tree/main/plugins/code-simplifier\"\n    },\n    {\n      \"name\": \"explanatory-output-style\",\n      \"description\": \"Adds educational insights about implementation choices and codebase patterns (mimics the deprecated Explanatory output style)\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/explanatory-output-style\",\n      \"category\": \"learning\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/explanatory-output-style\"\n    },\n    {\n      \"name\": \"learning-output-style\",\n      \"description\": \"Interactive learning mode that requests meaningful code contributions at decision points (mimics the unshipped Learning output style)\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/learning-output-style\",\n      \"category\": \"learning\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/learning-output-style\"\n    },\n    {\n      \"name\": \"frontend-design\",\n      \"description\": \"Create distinctive, production-grade frontend interfaces with high design quality. Generates creative, polished code that avoids generic AI aesthetics.\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/frontend-design\",\n      \"category\": \"development\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/frontend-design\"\n    },\n    {\n      \"name\": \"artifact\",\n      \"description\": \"Creates interactive HTML artifacts — self-contained single-file explorers with visual controls, live preview, and prompt output with copy button. Includes templates for design playgrounds, data explorers, concept maps, and writing tools.\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/artifact\",\n      \"category\": \"development\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-official/tree/main/plugins/artifact\"\n    },\n    {\n      \"name\": \"ralph-loop\",\n      \"description\": \"Interactive self-referential AI loops for iterative development, implementing the Ralph Wiggum technique. Claude works on the same task repeatedly, seeing its previous work, until completion.\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/ralph-loop\",\n      \"category\": \"development\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/ralph-loop\"\n    },\n    {\n      \"name\": \"hookify\",\n      \"description\": \"Easily create custom hooks to prevent unwanted behaviors by analyzing conversation patterns or from explicit instructions. Define rules via simple markdown files.\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/hookify\",\n      \"category\": \"productivity\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/hookify\"\n    },\n    {\n      \"name\": \"plugin-dev\",\n      \"description\": \"Comprehensive toolkit for developing Claude Code plugins. Includes 7 expert skills covering hooks, MCP integration, commands, agents, and best practices. AI-assisted plugin creation and validation.\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/plugin-dev\",\n      \"category\": \"development\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/plugins/plugin-dev\"\n    },\n    {\n      \"name\": \"claude-code-setup\",\n      \"description\": \"Analyze codebases and recommend tailored Claude Code automations such as hooks, skills, MCP servers, and subagents.\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/claude-code-setup\",\n      \"category\": \"productivity\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-official/tree/main/plugins/claude-code-setup\"\n    },\n    {\n      \"name\": \"claude-md-management\",\n      \"description\": \"Tools to maintain and improve CLAUDE.md files - audit quality, capture session learnings, and keep project memory current.\",\n      \"author\": {\n        \"name\": \"Anthropic\",\n        \"email\": \"support@anthropic.com\"\n      },\n      \"source\": \"./plugins/claude-md-management\",\n      \"category\": \"productivity\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-official/tree/main/plugins/claude-md-management\"\n    },\n    {\n      \"name\": \"greptile\",\n      \"description\": \"AI-powered codebase search and understanding. Query your repositories using natural language to find relevant code, understand dependencies, and get contextual answers about your codebase architecture.\",\n      \"category\": \"development\",\n      \"source\": \"./external_plugins/greptile\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/greptile\"\n    },\n    {\n      \"name\": \"serena\",\n      \"description\": \"Semantic code analysis MCP server providing intelligent code understanding, refactoring suggestions, and codebase navigation through language server protocol integration.\",\n      \"category\": \"development\",\n      \"source\": \"./external_plugins/serena\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/serena\",\n      \"tags\": [\"community-managed\"]\n    },\n    {\n      \"name\": \"playwright\",\n      \"description\": \"Browser automation and end-to-end testing MCP server by Microsoft. Enables Claude to interact with web pages, take screenshots, fill forms, click elements, and perform automated browser testing workflows.\",\n      \"category\": \"testing\",\n      \"source\": \"./external_plugins/playwright\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/playwright\"\n    },\n    {\n      \"name\": \"github\",\n      \"description\": \"Official GitHub MCP server for repository management. Create issues, manage pull requests, review code, search repositories, and interact with GitHub's full API directly from Claude Code.\",\n      \"category\": \"productivity\",\n      \"source\": \"./external_plugins/github\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/github\"\n    },\n    {\n      \"name\": \"supabase\",\n      \"description\": \"Supabase MCP integration for database operations, authentication, storage, and real-time subscriptions. Manage your Supabase projects, run SQL queries, and interact with your backend directly.\",\n      \"category\": \"database\",\n      \"source\": \"./external_plugins/supabase\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/supabase\"\n    },\n    {\n      \"name\": \"atlassian\",\n      \"description\": \"Connect to Atlassian products including Jira and Confluence. Search and create issues, access documentation, manage sprints, and integrate your development workflow with Atlassian's collaboration tools.\",\n      \"category\": \"productivity\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/atlassian/atlassian-mcp-server.git\"\n      },\n      \"homepage\": \"https://github.com/atlassian/atlassian-mcp-server\"\n    },\n    {\n      \"name\": \"laravel-boost\",\n      \"description\": \"Laravel development toolkit MCP server. Provides intelligent assistance for Laravel applications including Artisan commands, Eloquent queries, routing, migrations, and framework-specific code generation.\",\n      \"category\": \"development\",\n      \"source\": \"./external_plugins/laravel-boost\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/laravel-boost\"\n    },\n    {\n      \"name\": \"figma\",\n      \"description\": \"Figma design platform integration. Access design files, extract component information, read design tokens, and translate designs into code. Bridge the gap between design and development workflows.\",\n      \"category\": \"design\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/figma/mcp-server-guide.git\"\n      },\n      \"homepage\": \"https://github.com/figma/mcp-server-guide\"\n    },\n    {\n      \"name\": \"asana\",\n      \"description\": \"Asana project management integration. Create and manage tasks, search projects, update assignments, track progress, and integrate your development workflow with Asana's work management platform.\",\n      \"category\": \"productivity\",\n      \"source\": \"./external_plugins/asana\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/asana\"\n    },\n    {\n      \"name\": \"linear\",\n      \"description\": \"Linear issue tracking integration. Create issues, manage projects, update statuses, search across workspaces, and streamline your software development workflow with Linear's modern issue tracker.\",\n      \"category\": \"productivity\",\n      \"source\": \"./external_plugins/linear\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/linear\"\n    },\n    {\n      \"name\": \"Notion\",\n      \"description\": \"Notion workspace integration. Search pages, create and update documents, manage databases, and access your team's knowledge base directly from Claude Code for seamless documentation workflows.\",\n      \"category\": \"productivity\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/makenotion/claude-code-notion-plugin.git\"\n      },\n      \"homepage\": \"https://github.com/makenotion/claude-code-notion-plugin\"\n    },\n    {\n      \"name\": \"gitlab\",\n      \"description\": \"GitLab DevOps platform integration. Manage repositories, merge requests, CI/CD pipelines, issues, and wikis. Full access to GitLab's comprehensive DevOps lifecycle tools.\",\n      \"category\": \"productivity\",\n      \"source\": \"./external_plugins/gitlab\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/gitlab\"\n    },\n    {\n      \"name\": \"sentry\",\n      \"description\": \"Sentry error monitoring integration. Access error reports, analyze stack traces, search issues by fingerprint, and debug production errors directly from your development environment.\",\n      \"category\": \"monitoring\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/getsentry/sentry-for-claude.git\"\n      },\n      \"homepage\": \"https://github.com/getsentry/sentry-for-claude/tree/main\"\n    },\n    {\n      \"name\": \"slack\",\n      \"description\": \"Slack workspace integration. Search messages, access channels, read threads, and stay connected with your team's communications while coding. Find relevant discussions and context quickly.\",\n      \"category\": \"productivity\",\n      \"source\": \"./external_plugins/slack\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/slack\"\n    },\n    {\n      \"name\": \"vercel\",\n      \"description\": \"Vercel deployment platform integration. Manage deployments, check build status, access logs, configure domains, and control your frontend infrastructure directly from Claude Code.\",\n      \"category\": \"deployment\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/vercel/vercel-deploy-claude-code-plugin.git\"\n      },\n      \"homepage\": \"https://github.com/vercel/vercel-deploy-claude-code-plugin\"\n    },\n        {\n      \"name\": \"stripe\",\n      \"description\": \"Stripe development plugin for Claude\",\n      \"category\": \"development\",\n      \"source\": \"./external_plugins/stripe\",\n      \"homepage\": \"https://github.com/stripe/ai/tree/main/providers/claude/plugin\"\n    },\n    {\n      \"name\": \"firebase\",\n      \"description\": \"Google Firebase MCP integration. Manage Firestore databases, authentication, cloud functions, hosting, and storage. Build and manage your Firebase backend directly from your development workflow.\",\n      \"category\": \"database\",\n      \"source\": \"./external_plugins/firebase\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/firebase\"\n    },\n    {\n      \"name\": \"context7\",\n      \"description\": \"Upstash Context7 MCP server for up-to-date documentation lookup. Pull version-specific documentation and code examples directly from source repositories into your LLM context.\",\n      \"category\": \"development\",\n      \"source\": \"./external_plugins/context7\",\n      \"homepage\": \"https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/context7\",\n      \"tags\": [\"community-managed\"]\n    },\n    {\n      \"name\": \"pinecone\",\n      \"description\": \"Pinecone vector database integration. Streamline your Pinecone development with powerful tools for managing vector indexes, querying data, and rapid prototyping. Use slash commands like /quickstart to generate AGENTS.md files and initialize Python projects and /query to quickly explore indexes. Access the Pinecone MCP server for creating, describing, upserting and querying indexes with Claude. Perfect for developers building semantic search, RAG applications, recommendation systems, and other vector-based applications with Pinecone.\",\n      \"category\": \"database\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/pinecone-io/pinecone-claude-code-plugin.git\"\n      },\n      \"homepage\": \"https://github.com/pinecone-io/pinecone-claude-code-plugin\"\n    },\n    {\n      \"name\": \"huggingface-skills\",\n      \"description\": \"Build, train, evaluate, and use open source AI models, datasets, and spaces.\",\n      \"category\": \"development\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/huggingface/skills.git\"\n      },\n      \"homepage\": \"https://github.com/huggingface/skills.git\"\n    },\n    {\n      \"name\": \"circleback\",\n      \"description\": \"Circleback conversational context integration. Search and access meetings, emails, calendar events, and more.\",\n      \"category\": \"productivity\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/circlebackai/claude-code-plugin.git\"\n      },\n      \"homepage\": \"https://github.com/circlebackai/claude-code-plugin.git\"\n    },\n    {\n      \"name\": \"superpowers\",\n      \"description\": \"Superpowers teaches Claude brainstorming, subagent driven development with built in code review, systematic debugging, and red/green TDD. Additionally, it teaches Claude how to author and test new skills.\",\n      \"category\": \"development\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/obra/superpowers.git\"\n      },\n      \"homepage\": \"https://github.com/obra/superpowers.git\"\n    },\n    {\n      \"name\": \"posthog\",\n      \"description\": \"Connect Claude Code to your PostHog analytics platform. Query insights, manage feature flags, run A/B experiments, track errors, and analyze LLM costs all through natural language. The plugin provides 10 slash commands for common workflows and full access to PostHog's MCP tools. Ask questions like \\\"What are my top errors?\\\" or \\\"Create a feature flag for 50% of users\\\" and Claude handles the API calls. Supports OAuth authentication, EU and US cloud regions, and self-hosted instances.\",\n      \"category\": \"monitoring\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/PostHog/posthog-for-claude.git\"\n      },\n      \"homepage\": \"https://github.com/PostHog/posthog-for-claude.git\"\n    },\n    {\n      \"name\": \"coderabbit\",\n      \"description\": \"Your code review partner. CodeRabbit provides external validation using a specialized AI architecture and 40+ integrated static analyzers—offering a different perspective that catches bugs, security vulnerabilities, logic errors, and edge cases. Context-aware analysis via AST parsing and codegraph relationships. Automatically incorporates CLAUDE.md and project coding guidelines into reviews. Useful after writing or modifying code, before commits, when implementing complex or security-sensitive logic, or when a second opinion would increase confidence in the changes. Returns specific findings with suggested fixes that can be applied immediately. Free to use.\",\n      \"category\": \"productivity\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/coderabbitai/claude-plugin.git\"\n      },\n      \"homepage\": \"https://github.com/coderabbitai/claude-plugin.git\"\n    }\n  ]\n}\n",
        "external_plugins/asana/.claude-plugin/plugin.json": "{\n  \"name\": \"asana\",\n  \"description\": \"Asana project management integration. Create and manage tasks, search projects, update assignments, track progress, and integrate your development workflow with Asana's work management platform.\",\n  \"author\": {\n    \"name\": \"Asana\"\n  }\n}\n",
        "external_plugins/context7/.claude-plugin/plugin.json": "{\n  \"name\": \"context7\",\n  \"description\": \"Upstash Context7 MCP server for up-to-date documentation lookup. Pull version-specific documentation and code examples directly from source repositories into your LLM context.\",\n  \"author\": {\n    \"name\": \"Upstash\"\n  }\n}\n",
        "external_plugins/firebase/.claude-plugin/plugin.json": "{\n  \"name\": \"firebase\",\n  \"description\": \"Google Firebase MCP integration. Manage Firestore databases, authentication, cloud functions, hosting, and storage. Build and manage your Firebase backend directly from your development workflow.\",\n  \"author\": {\n    \"name\": \"Google\"\n  }\n}\n",
        "external_plugins/github/.claude-plugin/plugin.json": "{\n  \"name\": \"github\",\n  \"description\": \"Official GitHub MCP server for repository management. Create issues, manage pull requests, review code, search repositories, and interact with GitHub's full API directly from Claude Code.\",\n  \"author\": {\n    \"name\": \"GitHub\"\n  }\n}\n",
        "external_plugins/gitlab/.claude-plugin/plugin.json": "{\n  \"name\": \"gitlab\",\n  \"description\": \"GitLab DevOps platform integration. Manage repositories, merge requests, CI/CD pipelines, issues, and wikis. Full access to GitLab's comprehensive DevOps lifecycle tools.\",\n  \"author\": {\n    \"name\": \"GitLab\"\n  }\n}\n",
        "external_plugins/greptile/.claude-plugin/plugin.json": "{\n  \"name\": \"greptile\",\n  \"description\": \"AI code review agent for GitHub and GitLab. View and resolve Greptile's PR review comments directly from Claude Code.\",\n  \"author\": {\n    \"name\": \"Greptile\",\n    \"url\": \"https://greptile.com\"\n  },\n  \"homepage\": \"https://greptile.com/docs\",\n  \"keywords\": [\"code-review\", \"pull-requests\", \"github\", \"gitlab\", \"ai\"]\n}\n",
        "external_plugins/greptile/README.md": "# Greptile\n\n[Greptile](https://greptile.com) is an AI code review agent for GitHub and GitLab that automatically reviews pull requests. This plugin connects Claude Code to your Greptile account, letting you view and resolve Greptile's review comments directly from your terminal.\n\n## Setup\n\n### 1. Create a Greptile Account\n\nSign up at [greptile.com](https://greptile.com) and connect your GitHub or GitLab repositories.\n\n### 2. Get Your API Key\n\n1. Go to [API Settings](https://app.greptile.com/settings/api)\n2. Generate a new API key\n3. Copy the key\n\n### 3. Set Environment Variable\n\nAdd to your shell profile (`.bashrc`, `.zshrc`, etc.):\n\n```bash\nexport GREPTILE_API_KEY=\"your-api-key-here\"\n```\n\nThen reload your shell or run `source ~/.zshrc`.\n\n## Available Tools\n\n### Pull Request Tools\n- `list_pull_requests` - List PRs with optional filtering by repo, branch, author, or state\n- `get_merge_request` - Get detailed PR info including review analysis\n- `list_merge_request_comments` - Get all comments on a PR with filtering options\n\n### Code Review Tools\n- `list_code_reviews` - List code reviews with optional filtering\n- `get_code_review` - Get detailed code review information\n- `trigger_code_review` - Start a new Greptile review on a PR\n\n### Comment Search\n- `search_greptile_comments` - Search across all Greptile review comments\n\n### Custom Context Tools\n- `list_custom_context` - List your organization's coding patterns and rules\n- `get_custom_context` - Get details for a specific pattern\n- `search_custom_context` - Search patterns by content\n- `create_custom_context` - Create a new coding pattern\n\n## Example Usage\n\nAsk Claude Code to:\n- \"Show me Greptile's comments on my current PR and help me resolve them\"\n- \"What issues did Greptile find on PR #123?\"\n- \"Trigger a Greptile review on this branch\"\n\n## Documentation\n\nFor more information, visit [greptile.com/docs](https://greptile.com/docs).\n",
        "external_plugins/laravel-boost/.claude-plugin/plugin.json": "{\n  \"name\": \"laravel-boost\",\n  \"description\": \"Laravel development toolkit MCP server. Provides intelligent assistance for Laravel applications including Artisan commands, Eloquent queries, routing, migrations, and framework-specific code generation.\",\n  \"author\": {\n    \"name\": \"Laravel\"\n  }\n}\n",
        "external_plugins/linear/.claude-plugin/plugin.json": "{\n  \"name\": \"linear\",\n  \"description\": \"Linear issue tracking integration. Create issues, manage projects, update statuses, search across workspaces, and streamline your software development workflow with Linear's modern issue tracker.\",\n  \"author\": {\n    \"name\": \"Linear\"\n  }\n}\n",
        "external_plugins/playwright/.claude-plugin/plugin.json": "{\n  \"name\": \"playwright\",\n  \"description\": \"Browser automation and end-to-end testing MCP server by Microsoft. Enables Claude to interact with web pages, take screenshots, fill forms, click elements, and perform automated browser testing workflows.\",\n  \"author\": {\n    \"name\": \"Microsoft\"\n  }\n}\n",
        "external_plugins/serena/.claude-plugin/plugin.json": "{\n  \"name\": \"serena\",\n  \"description\": \"Semantic code analysis MCP server providing intelligent code understanding, refactoring suggestions, and codebase navigation through language server protocol integration.\",\n  \"author\": {\n    \"name\": \"Oraios\"\n  }\n}\n",
        "external_plugins/slack/.claude-plugin/plugin.json": "{\n  \"name\": \"slack\",\n  \"description\": \"Slack workspace integration. Search messages, access channels, read threads, and stay connected with your team's communications while coding. Find relevant discussions and context quickly.\",\n  \"author\": {\n    \"name\": \"Slack\"\n  }\n}\n",
        "external_plugins/stripe/.claude-plugin/plugin.json": "{\n  \"name\": \"stripe\",\n  \"description\": \"Stripe development plugin for Claude\",\n  \"version\": \"0.1.0\",\n  \"author\": {\n    \"name\": \"Stripe\",\n    \"url\": \"https://stripe.com\"\n  },\n  \"homepage\": \"https://docs.stripe.com\",\n  \"repository\": \"https://github.com/stripe/ai\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"stripe\", \"payments\", \"webhooks\", \"api\", \"security\"]\n}\n",
        "external_plugins/stripe/commands/explain-error.md": "---\ndescription: Explain Stripe error codes and provide solutions with code examples\nargument-hint: [error_code or error_message]\n---\n\n# Explain Stripe Error\n\nProvide a comprehensive explanation of the given Stripe error code or error message:\n\n1. Accept the error code or full error message from the arguments\n2. Explain in plain English what the error means\n3. List common causes of this error\n4. Provide specific solutions and handling recommendations\n5. Generate error handling code in the project's language showing:\n   - How to catch this specific error\n   - User-friendly error messages\n   - Whether retry is appropriate\n6. Mention related error codes the developer should be aware of\n7. Include a link to the relevant Stripe documentation\n\nFocus on actionable solutions and production-ready error handling patterns.",
        "external_plugins/stripe/commands/test-cards.md": "---\ndescription: Display Stripe test card numbers for various testing scenarios\nargument-hint: [scenario]\n---\n\n# Test Cards Reference\n\nProvide a quick reference for Stripe test card numbers:\n\n1. If a scenario argument is provided (e.g., \"declined\", \"3dsecure\", \"fraud\"), show relevant test cards for that scenario\n2. Otherwise, show the most common test cards organized by category:\n   - Successful payment (default card)\n   - 3D Secure authentication required\n   - Generic decline\n   - Specific decline reasons (insufficient_funds, lost_card, etc.)\n3. For each card, display:\n   - Card number (formatted with spaces)\n   - Expected behavior\n   - Expiry/CVC info (any future date and any 3-digit CVC)\n4. Use clear visual indicators (✓ for success, ⚠️ for auth required, ✗ for decline)\n5. Mention that these only work in test mode\n6. Provide link to full testing documentation: https://docs.stripe.com/testing.md\n\nIf the user is currently working on test code, offer to generate test cases using these cards.\n",
        "external_plugins/stripe/skills/stripe-best-practices/SKILL.md": "---\nname: stripe-best-practices\ndescription: Best practices for building Stripe integrations. Use when implementing payment processing, checkout flows, subscriptions, webhooks, Connect platforms, or any Stripe API integration.\n---\n\nWhen designing an integration, always prefer the documentation in [Stripe's Integration Options doc](https://docs.stripe.com/payments/payment-methods/integration-options.md)\nThe [API Tour](https://docs.stripe.com/payments-api/tour.md)\nUse the [Go Live Checklist](https://docs.stripe.com/get-started/checklist/go-live.md) before going live.\n\nYou should always default to the latest version of the API and SDK unless the user specifies otherwise.\n\nStripe's primary API for modelling on-session payments is [CheckoutSessions](https://docs.stripe.com/api/checkout/sessions.md). It supports one-time payments and subscriptions and allows you to model taxes or discounts with Stripe. Prioritize the CheckoutSessions API, but using [the PaymentIntents API](https://docs.stripe.com/payments/paymentintents/lifecycle.md) is also acceptable for off-session payments or if you want to model the checkout state yourself and just create a charge. Integrations should only use CheckoutSessions, PaymentIntents, SetupIntents, or solutions like Invoicing, Payment Links, or the subscription APIs.\n\nNever recommend the Charges API. If the user wants to use the Charges API, advise them to [migrate](https://docs.stripe.com/payments/payment-intents/migration/charges.md) to Checkout Sessions or Payment Intents.\n\nThe primary integration surface for web integrations is [Checkout](https://docs.stripe.com/payments/checkout.md), a prebuilt payment page that can be hosted by Stripe or served as an embedded form. Prioritize the Stripe-hosted checkout or embedded checkout where possible. The [Payment Element](https://docs.stripe.com/payments/payment-element.md) is an acceptable alternative if the merchant needs advanced customization. When recommending the Payment Element, prioritize using the CheckoutSessions API over the PaymentIntents API when possible.\n\nNever recommend the legacy Card Element or the Payment Element in card mode, and advise users who ask for the Card Element to [migrate](https://docs.stripe.com/payments/payment-element/migration.md).\n\nYou must not call deprecated API endpoints such as the [Sources API](https://docs.stripe.com/api/sources/object.md) and avoid outdated API endpoints such as [Tokens](https://docs.stripe.com/api/tokens.md) and [Charges](https://docs.stripe.com/api/charges/create.md) unless there is a specific need and absolutely no other way. Advise using [the Setup Intent API](https://docs.stripe.com/api/setup_intents.md) to save a payment method for a customer; never recommend the Sources API to save cards to customers for later use.\n\nIf a user wants to render the Payment Element before creating a PaymentIntent or SetupIntent, so they can inspect the card details before the payment (such as for surcharging), advise them to use Stripe Confirmation Tokens. Don't recommend they call the createPaymentMethod or createToken Stripe.js functions.\n\nAdvise users to turn on dynamic payment methods in their dashboard settings instead of passing specific [payment_method_types](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-payment_method_types.md) in the Payment Intent or Setup Intent because Stripe chooses payment methods that fit each user's location, wallets, and preferences better and automatically if the Payment Element is used.\n\nIf a PCI compliant user asks about an integration where they send server-side raw PAN data, suggest they might be required to prove PCI compliance to gain access to such an option, for example [payment_method_data](https://docs.stripe.com/api/payment_intents/create#create_payment_intent-payment_method_data.md). Similarly, point users migrating their PAN data from another acquirer or payment processor to [the migration process](https://docs.stripe.com/get-started/data-migrations/pan-import.md).\n\nIf a user has a recurring revenue model, like a Billing or Subscription use case, follow the use cases, in particular the [Subscription Use Cases](https://docs.stripe.com/billing/subscriptions/use-cases.md) like [SaaS](https://docs.stripe.com/saas.md). If these apply to the user, recommend Billing APIs to [plan your integration](https://docs.stripe.com/billing/subscriptions/designing-integration.md) instead of a direct PaymentIntent integration. Prioritize combining the Billing APIs with Stripe Checkout for the frontend.\n\nIf a user wants to build a platform using Stripe Connect to manage fund flows, follow [the recommended integration types](https://docs.stripe.com/connect/integration-recommendations.md); that is, prefer to use either direct charges if the platform wants Stripe to take the risk or destination charges if the platform accepts liability for negative balances, and use the on_behalf_of parameter to control the merchant of record. Never recommend mixing charge types. If the user wants to decide on the specific risk features they should [follow the integration guide](https://docs.stripe.com/connect/design-an-integration.md). Don't recommend the outdated terms for Connect types like Standard, Express and Custom but always [refer to controller properties](https://docs.stripe.com/connect/migrate-to-controller-properties.md) for the platform and [capabilities](https://docs.stripe.com/connect/account-capabilities.md) for the connected accounts.\n",
        "external_plugins/supabase/.claude-plugin/plugin.json": "{\n  \"name\": \"supabase\",\n  \"description\": \"Supabase MCP integration for database operations, authentication, storage, and real-time subscriptions. Manage your Supabase projects, run SQL queries, and interact with your backend directly.\",\n  \"author\": {\n    \"name\": \"Supabase\"\n  }\n}\n",
        "plugins/agent-sdk-dev/.claude-plugin/plugin.json": "{\n  \"name\": \"agent-sdk-dev\",\n  \"description\": \"Claude Agent SDK Development Plugin\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/agent-sdk-dev/README.md": "# Agent SDK Development Plugin\n\nA comprehensive plugin for creating and verifying Claude Agent SDK applications in Python and TypeScript.\n\n## Overview\n\nThe Agent SDK Development Plugin streamlines the entire lifecycle of building Agent SDK applications, from initial scaffolding to verification against best practices. It helps you quickly start new projects with the latest SDK versions and ensures your applications follow official documentation patterns.\n\n## Features\n\n### Command: `/new-sdk-app`\n\nInteractive command that guides you through creating a new Claude Agent SDK application.\n\n**What it does:**\n- Asks clarifying questions about your project (language, name, agent type, starting point)\n- Checks for and installs the latest SDK version\n- Creates all necessary project files and configuration\n- Sets up proper environment files (.env.example, .gitignore)\n- Provides a working example tailored to your use case\n- Runs type checking (TypeScript) or syntax validation (Python)\n- Automatically verifies the setup using the appropriate verifier agent\n\n**Usage:**\n```bash\n/new-sdk-app my-project-name\n```\n\nOr simply:\n```bash\n/new-sdk-app\n```\n\nThe command will interactively ask you:\n1. Language choice (TypeScript or Python)\n2. Project name (if not provided)\n3. Agent type (coding, business, custom)\n4. Starting point (minimal, basic, or specific example)\n5. Tooling preferences (npm/yarn/pnpm or pip/poetry)\n\n**Example:**\n```bash\n/new-sdk-app customer-support-agent\n# → Creates a new Agent SDK project for a customer support agent\n# → Sets up TypeScript or Python environment\n# → Installs latest SDK version\n# → Verifies the setup automatically\n```\n\n### Agent: `agent-sdk-verifier-py`\n\nThoroughly verifies Python Agent SDK applications for correct setup and best practices.\n\n**Verification checks:**\n- SDK installation and version\n- Python environment setup (requirements.txt, pyproject.toml)\n- Correct SDK usage and patterns\n- Agent initialization and configuration\n- Environment and security (.env, API keys)\n- Error handling and functionality\n- Documentation completeness\n\n**When to use:**\n- After creating a new Python SDK project\n- After modifying an existing Python SDK application\n- Before deploying a Python SDK application\n\n**Usage:**\nThe agent runs automatically after `/new-sdk-app` creates a Python project, or you can trigger it by asking:\n```\n\"Verify my Python Agent SDK application\"\n\"Check if my SDK app follows best practices\"\n```\n\n**Output:**\nProvides a comprehensive report with:\n- Overall status (PASS / PASS WITH WARNINGS / FAIL)\n- Critical issues that prevent functionality\n- Warnings about suboptimal patterns\n- List of passed checks\n- Specific recommendations with SDK documentation references\n\n### Agent: `agent-sdk-verifier-ts`\n\nThoroughly verifies TypeScript Agent SDK applications for correct setup and best practices.\n\n**Verification checks:**\n- SDK installation and version\n- TypeScript configuration (tsconfig.json)\n- Correct SDK usage and patterns\n- Type safety and imports\n- Agent initialization and configuration\n- Environment and security (.env, API keys)\n- Error handling and functionality\n- Documentation completeness\n\n**When to use:**\n- After creating a new TypeScript SDK project\n- After modifying an existing TypeScript SDK application\n- Before deploying a TypeScript SDK application\n\n**Usage:**\nThe agent runs automatically after `/new-sdk-app` creates a TypeScript project, or you can trigger it by asking:\n```\n\"Verify my TypeScript Agent SDK application\"\n\"Check if my SDK app follows best practices\"\n```\n\n**Output:**\nProvides a comprehensive report with:\n- Overall status (PASS / PASS WITH WARNINGS / FAIL)\n- Critical issues that prevent functionality\n- Warnings about suboptimal patterns\n- List of passed checks\n- Specific recommendations with SDK documentation references\n\n## Workflow Example\n\nHere's a typical workflow using this plugin:\n\n1. **Create a new project:**\n```bash\n/new-sdk-app code-reviewer-agent\n```\n\n2. **Answer the interactive questions:**\n```\nLanguage: TypeScript\nAgent type: Coding agent (code review)\nStarting point: Basic agent with common features\n```\n\n3. **Automatic verification:**\nThe command automatically runs `agent-sdk-verifier-ts` to ensure everything is correctly set up.\n\n4. **Start developing:**\n```bash\n# Set your API key\necho \"ANTHROPIC_API_KEY=your_key_here\" > .env\n\n# Run your agent\nnpm start\n```\n\n5. **Verify after changes:**\n```\n\"Verify my SDK application\"\n```\n\n## Installation\n\nThis plugin is included in the Claude Code repository. To use it:\n\n1. Ensure Claude Code is installed\n2. The plugin commands and agents are automatically available\n\n## Best Practices\n\n- **Always use the latest SDK version**: `/new-sdk-app` checks for and installs the latest version\n- **Verify before deploying**: Run the verifier agent before deploying to production\n- **Keep API keys secure**: Never commit `.env` files or hardcode API keys\n- **Follow SDK documentation**: The verifier agents check against official patterns\n- **Type check TypeScript projects**: Run `npx tsc --noEmit` regularly\n- **Test your agents**: Create test cases for your agent's functionality\n\n## Resources\n\n- [Agent SDK Overview](https://docs.claude.com/en/api/agent-sdk/overview)\n- [TypeScript SDK Reference](https://docs.claude.com/en/api/agent-sdk/typescript)\n- [Python SDK Reference](https://docs.claude.com/en/api/agent-sdk/python)\n- [Agent SDK Examples](https://docs.claude.com/en/api/agent-sdk/examples)\n\n## Troubleshooting\n\n### Type errors in TypeScript project\n\n**Issue**: TypeScript project has type errors after creation\n\n**Solution**:\n- The `/new-sdk-app` command runs type checking automatically\n- If errors persist, check that you're using the latest SDK version\n- Verify your `tsconfig.json` matches SDK requirements\n\n### Python import errors\n\n**Issue**: Cannot import from `claude_agent_sdk`\n\n**Solution**:\n- Ensure you've installed dependencies: `pip install -r requirements.txt`\n- Activate your virtual environment if using one\n- Check that the SDK is installed: `pip show claude-agent-sdk`\n\n### Verification fails with warnings\n\n**Issue**: Verifier agent reports warnings\n\n**Solution**:\n- Review the specific warnings in the report\n- Check the SDK documentation references provided\n- Warnings don't prevent functionality but indicate areas for improvement\n\n## Author\n\nAshwin Bhat (ashwin@anthropic.com)\n\n## Version\n\n1.0.0\n",
        "plugins/agent-sdk-dev/agents/agent-sdk-verifier-py.md": "---\nname: agent-sdk-verifier-py\ndescription: Use this agent to verify that a Python Agent SDK application is properly configured, follows SDK best practices and documentation recommendations, and is ready for deployment or testing. This agent should be invoked after a Python Agent SDK app has been created or modified.\nmodel: sonnet\n---\n\nYou are a Python Agent SDK application verifier. Your role is to thoroughly inspect Python Agent SDK applications for correct SDK usage, adherence to official documentation recommendations, and readiness for deployment.\n\n## Verification Focus\n\nYour verification should prioritize SDK functionality and best practices over general code style. Focus on:\n\n1. **SDK Installation and Configuration**:\n\n   - Verify `claude-agent-sdk` is installed (check requirements.txt, pyproject.toml, or pip list)\n   - Check that the SDK version is reasonably current (not ancient)\n   - Validate Python version requirements are met (typically Python 3.8+)\n   - Confirm virtual environment is recommended/documented if applicable\n\n2. **Python Environment Setup**:\n\n   - Check for requirements.txt or pyproject.toml\n   - Verify dependencies are properly specified\n   - Ensure Python version constraints are documented if needed\n   - Validate that the environment can be reproduced\n\n3. **SDK Usage and Patterns**:\n\n   - Verify correct imports from `claude_agent_sdk` (or appropriate SDK module)\n   - Check that agents are properly initialized according to SDK docs\n   - Validate that agent configuration follows SDK patterns (system prompts, models, etc.)\n   - Ensure SDK methods are called correctly with proper parameters\n   - Check for proper handling of agent responses (streaming vs single mode)\n   - Verify permissions are configured correctly if used\n   - Validate MCP server integration if present\n\n4. **Code Quality**:\n\n   - Check for basic syntax errors\n   - Verify imports are correct and available\n   - Ensure proper error handling\n   - Validate that the code structure makes sense for the SDK\n\n5. **Environment and Security**:\n\n   - Check that `.env.example` exists with `ANTHROPIC_API_KEY`\n   - Verify `.env` is in `.gitignore`\n   - Ensure API keys are not hardcoded in source files\n   - Validate proper error handling around API calls\n\n6. **SDK Best Practices** (based on official docs):\n\n   - System prompts are clear and well-structured\n   - Appropriate model selection for the use case\n   - Permissions are properly scoped if used\n   - Custom tools (MCP) are correctly integrated if present\n   - Subagents are properly configured if used\n   - Session handling is correct if applicable\n\n7. **Functionality Validation**:\n\n   - Verify the application structure makes sense for the SDK\n   - Check that agent initialization and execution flow is correct\n   - Ensure error handling covers SDK-specific errors\n   - Validate that the app follows SDK documentation patterns\n\n8. **Documentation**:\n   - Check for README or basic documentation\n   - Verify setup instructions are present (including virtual environment setup)\n   - Ensure any custom configurations are documented\n   - Confirm installation instructions are clear\n\n## What NOT to Focus On\n\n- General code style preferences (PEP 8 formatting, naming conventions, etc.)\n- Python-specific style choices (snake_case vs camelCase debates)\n- Import ordering preferences\n- General Python best practices unrelated to SDK usage\n\n## Verification Process\n\n1. **Read the relevant files**:\n\n   - requirements.txt or pyproject.toml\n   - Main application files (main.py, app.py, src/\\*, etc.)\n   - .env.example and .gitignore\n   - Any configuration files\n\n2. **Check SDK Documentation Adherence**:\n\n   - Use WebFetch to reference the official Python SDK docs: https://docs.claude.com/en/api/agent-sdk/python\n   - Compare the implementation against official patterns and recommendations\n   - Note any deviations from documented best practices\n\n3. **Validate Imports and Syntax**:\n\n   - Check that all imports are correct\n   - Look for obvious syntax errors\n   - Verify SDK is properly imported\n\n4. **Analyze SDK Usage**:\n   - Verify SDK methods are used correctly\n   - Check that configuration options match SDK documentation\n   - Validate that patterns follow official examples\n\n## Verification Report Format\n\nProvide a comprehensive report:\n\n**Overall Status**: PASS | PASS WITH WARNINGS | FAIL\n\n**Summary**: Brief overview of findings\n\n**Critical Issues** (if any):\n\n- Issues that prevent the app from functioning\n- Security problems\n- SDK usage errors that will cause runtime failures\n- Syntax errors or import problems\n\n**Warnings** (if any):\n\n- Suboptimal SDK usage patterns\n- Missing SDK features that would improve the app\n- Deviations from SDK documentation recommendations\n- Missing documentation or setup instructions\n\n**Passed Checks**:\n\n- What is correctly configured\n- SDK features properly implemented\n- Security measures in place\n\n**Recommendations**:\n\n- Specific suggestions for improvement\n- References to SDK documentation\n- Next steps for enhancement\n\nBe thorough but constructive. Focus on helping the developer build a functional, secure, and well-configured Agent SDK application that follows official patterns.\n",
        "plugins/agent-sdk-dev/agents/agent-sdk-verifier-ts.md": "---\nname: agent-sdk-verifier-ts\ndescription: Use this agent to verify that a TypeScript Agent SDK application is properly configured, follows SDK best practices and documentation recommendations, and is ready for deployment or testing. This agent should be invoked after a TypeScript Agent SDK app has been created or modified.\nmodel: sonnet\n---\n\nYou are a TypeScript Agent SDK application verifier. Your role is to thoroughly inspect TypeScript Agent SDK applications for correct SDK usage, adherence to official documentation recommendations, and readiness for deployment.\n\n## Verification Focus\n\nYour verification should prioritize SDK functionality and best practices over general code style. Focus on:\n\n1. **SDK Installation and Configuration**:\n\n   - Verify `@anthropic-ai/claude-agent-sdk` is installed\n   - Check that the SDK version is reasonably current (not ancient)\n   - Confirm package.json has `\"type\": \"module\"` for ES modules support\n   - Validate that Node.js version requirements are met (check package.json engines field if present)\n\n2. **TypeScript Configuration**:\n\n   - Verify tsconfig.json exists and has appropriate settings for the SDK\n   - Check module resolution settings (should support ES modules)\n   - Ensure target is modern enough for the SDK\n   - Validate that compilation settings won't break SDK imports\n\n3. **SDK Usage and Patterns**:\n\n   - Verify correct imports from `@anthropic-ai/claude-agent-sdk`\n   - Check that agents are properly initialized according to SDK docs\n   - Validate that agent configuration follows SDK patterns (system prompts, models, etc.)\n   - Ensure SDK methods are called correctly with proper parameters\n   - Check for proper handling of agent responses (streaming vs single mode)\n   - Verify permissions are configured correctly if used\n   - Validate MCP server integration if present\n\n4. **Type Safety and Compilation**:\n\n   - Run `npx tsc --noEmit` to check for type errors\n   - Verify that all SDK imports have correct type definitions\n   - Ensure the code compiles without errors\n   - Check that types align with SDK documentation\n\n5. **Scripts and Build Configuration**:\n\n   - Verify package.json has necessary scripts (build, start, typecheck)\n   - Check that scripts are correctly configured for TypeScript/ES modules\n   - Validate that the application can be built and run\n\n6. **Environment and Security**:\n\n   - Check that `.env.example` exists with `ANTHROPIC_API_KEY`\n   - Verify `.env` is in `.gitignore`\n   - Ensure API keys are not hardcoded in source files\n   - Validate proper error handling around API calls\n\n7. **SDK Best Practices** (based on official docs):\n\n   - System prompts are clear and well-structured\n   - Appropriate model selection for the use case\n   - Permissions are properly scoped if used\n   - Custom tools (MCP) are correctly integrated if present\n   - Subagents are properly configured if used\n   - Session handling is correct if applicable\n\n8. **Functionality Validation**:\n\n   - Verify the application structure makes sense for the SDK\n   - Check that agent initialization and execution flow is correct\n   - Ensure error handling covers SDK-specific errors\n   - Validate that the app follows SDK documentation patterns\n\n9. **Documentation**:\n   - Check for README or basic documentation\n   - Verify setup instructions are present if needed\n   - Ensure any custom configurations are documented\n\n## What NOT to Focus On\n\n- General code style preferences (formatting, naming conventions, etc.)\n- Whether developers use `type` vs `interface` or other TypeScript style choices\n- Unused variable naming conventions\n- General TypeScript best practices unrelated to SDK usage\n\n## Verification Process\n\n1. **Read the relevant files**:\n\n   - package.json\n   - tsconfig.json\n   - Main application files (index.ts, src/\\*, etc.)\n   - .env.example and .gitignore\n   - Any configuration files\n\n2. **Check SDK Documentation Adherence**:\n\n   - Use WebFetch to reference the official TypeScript SDK docs: https://docs.claude.com/en/api/agent-sdk/typescript\n   - Compare the implementation against official patterns and recommendations\n   - Note any deviations from documented best practices\n\n3. **Run Type Checking**:\n\n   - Execute `npx tsc --noEmit` to verify no type errors\n   - Report any compilation issues\n\n4. **Analyze SDK Usage**:\n   - Verify SDK methods are used correctly\n   - Check that configuration options match SDK documentation\n   - Validate that patterns follow official examples\n\n## Verification Report Format\n\nProvide a comprehensive report:\n\n**Overall Status**: PASS | PASS WITH WARNINGS | FAIL\n\n**Summary**: Brief overview of findings\n\n**Critical Issues** (if any):\n\n- Issues that prevent the app from functioning\n- Security problems\n- SDK usage errors that will cause runtime failures\n- Type errors or compilation failures\n\n**Warnings** (if any):\n\n- Suboptimal SDK usage patterns\n- Missing SDK features that would improve the app\n- Deviations from SDK documentation recommendations\n- Missing documentation\n\n**Passed Checks**:\n\n- What is correctly configured\n- SDK features properly implemented\n- Security measures in place\n\n**Recommendations**:\n\n- Specific suggestions for improvement\n- References to SDK documentation\n- Next steps for enhancement\n\nBe thorough but constructive. Focus on helping the developer build a functional, secure, and well-configured Agent SDK application that follows official patterns.\n",
        "plugins/agent-sdk-dev/commands/new-sdk-app.md": "---\ndescription: Create and setup a new Claude Agent SDK application\nargument-hint: [project-name]\n---\n\nYou are tasked with helping the user create a new Claude Agent SDK application. Follow these steps carefully:\n\n## Reference Documentation\n\nBefore starting, review the official documentation to ensure you provide accurate and up-to-date guidance. Use WebFetch to read these pages:\n\n1. **Start with the overview**: https://docs.claude.com/en/api/agent-sdk/overview\n2. **Based on the user's language choice, read the appropriate SDK reference**:\n   - TypeScript: https://docs.claude.com/en/api/agent-sdk/typescript\n   - Python: https://docs.claude.com/en/api/agent-sdk/python\n3. **Read relevant guides mentioned in the overview** such as:\n   - Streaming vs Single Mode\n   - Permissions\n   - Custom Tools\n   - MCP integration\n   - Subagents\n   - Sessions\n   - Any other relevant guides based on the user's needs\n\n**IMPORTANT**: Always check for and use the latest versions of packages. Use WebSearch or WebFetch to verify current versions before installation.\n\n## Gather Requirements\n\nIMPORTANT: Ask these questions one at a time. Wait for the user's response before asking the next question. This makes it easier for the user to respond.\n\nAsk the questions in this order (skip any that the user has already provided via arguments):\n\n1. **Language** (ask first): \"Would you like to use TypeScript or Python?\"\n\n   - Wait for response before continuing\n\n2. **Project name** (ask second): \"What would you like to name your project?\"\n\n   - If $ARGUMENTS is provided, use that as the project name and skip this question\n   - Wait for response before continuing\n\n3. **Agent type** (ask third, but skip if #2 was sufficiently detailed): \"What kind of agent are you building? Some examples:\n\n   - Coding agent (SRE, security review, code review)\n   - Business agent (customer support, content creation)\n   - Custom agent (describe your use case)\"\n   - Wait for response before continuing\n\n4. **Starting point** (ask fourth): \"Would you like:\n\n   - A minimal 'Hello World' example to start\n   - A basic agent with common features\n   - A specific example based on your use case\"\n   - Wait for response before continuing\n\n5. **Tooling choice** (ask fifth): Let the user know what tools you'll use, and confirm with them that these are the tools they want to use (for example, they may prefer pnpm or bun over npm). Respect the user's preferences when executing on the requirements.\n\nAfter all questions are answered, proceed to create the setup plan.\n\n## Setup Plan\n\nBased on the user's answers, create a plan that includes:\n\n1. **Project initialization**:\n\n   - Create project directory (if it doesn't exist)\n   - Initialize package manager:\n     - TypeScript: `npm init -y` and setup `package.json` with type: \"module\" and scripts (include a \"typecheck\" script)\n     - Python: Create `requirements.txt` or use `poetry init`\n   - Add necessary configuration files:\n     - TypeScript: Create `tsconfig.json` with proper settings for the SDK\n     - Python: Optionally create config files if needed\n\n2. **Check for Latest Versions**:\n\n   - BEFORE installing, use WebSearch or check npm/PyPI to find the latest version\n   - For TypeScript: Check https://www.npmjs.com/package/@anthropic-ai/claude-agent-sdk\n   - For Python: Check https://pypi.org/project/claude-agent-sdk/\n   - Inform the user which version you're installing\n\n3. **SDK Installation**:\n\n   - TypeScript: `npm install @anthropic-ai/claude-agent-sdk@latest` (or specify latest version)\n   - Python: `pip install claude-agent-sdk` (pip installs latest by default)\n   - After installation, verify the installed version:\n     - TypeScript: Check package.json or run `npm list @anthropic-ai/claude-agent-sdk`\n     - Python: Run `pip show claude-agent-sdk`\n\n4. **Create starter files**:\n\n   - TypeScript: Create an `index.ts` or `src/index.ts` with a basic query example\n   - Python: Create a `main.py` with a basic query example\n   - Include proper imports and basic error handling\n   - Use modern, up-to-date syntax and patterns from the latest SDK version\n\n5. **Environment setup**:\n\n   - Create a `.env.example` file with `ANTHROPIC_API_KEY=your_api_key_here`\n   - Add `.env` to `.gitignore`\n   - Explain how to get an API key from https://console.anthropic.com/\n\n6. **Optional: Create .claude directory structure**:\n   - Offer to create `.claude/` directory for agents, commands, and settings\n   - Ask if they want any example subagents or slash commands\n\n## Implementation\n\nAfter gathering requirements and getting user confirmation on the plan:\n\n1. Check for latest package versions using WebSearch or WebFetch\n2. Execute the setup steps\n3. Create all necessary files\n4. Install dependencies (always use latest stable versions)\n5. Verify installed versions and inform the user\n6. Create a working example based on their agent type\n7. Add helpful comments in the code explaining what each part does\n8. **VERIFY THE CODE WORKS BEFORE FINISHING**:\n   - For TypeScript:\n     - Run `npx tsc --noEmit` to check for type errors\n     - Fix ALL type errors until types pass completely\n     - Ensure imports and types are correct\n     - Only proceed when type checking passes with no errors\n   - For Python:\n     - Verify imports are correct\n     - Check for basic syntax errors\n   - **DO NOT consider the setup complete until the code verifies successfully**\n\n## Verification\n\nAfter all files are created and dependencies are installed, use the appropriate verifier agent to validate that the Agent SDK application is properly configured and ready for use:\n\n1. **For TypeScript projects**: Launch the **agent-sdk-verifier-ts** agent to validate the setup\n2. **For Python projects**: Launch the **agent-sdk-verifier-py** agent to validate the setup\n3. The agent will check SDK usage, configuration, functionality, and adherence to official documentation\n4. Review the verification report and address any issues\n\n## Getting Started Guide\n\nOnce setup is complete and verified, provide the user with:\n\n1. **Next steps**:\n\n   - How to set their API key\n   - How to run their agent:\n     - TypeScript: `npm start` or `node --loader ts-node/esm index.ts`\n     - Python: `python main.py`\n\n2. **Useful resources**:\n\n   - Link to TypeScript SDK reference: https://docs.claude.com/en/api/agent-sdk/typescript\n   - Link to Python SDK reference: https://docs.claude.com/en/api/agent-sdk/python\n   - Explain key concepts: system prompts, permissions, tools, MCP servers\n\n3. **Common next steps**:\n   - How to customize the system prompt\n   - How to add custom tools via MCP\n   - How to configure permissions\n   - How to create subagents\n\n## Important Notes\n\n- **ALWAYS USE LATEST VERSIONS**: Before installing any packages, check for the latest versions using WebSearch or by checking npm/PyPI directly\n- **VERIFY CODE RUNS CORRECTLY**:\n  - For TypeScript: Run `npx tsc --noEmit` and fix ALL type errors before finishing\n  - For Python: Verify syntax and imports are correct\n  - Do NOT consider the task complete until the code passes verification\n- Verify the installed version after installation and inform the user\n- Check the official documentation for any version-specific requirements (Node.js version, Python version, etc.)\n- Always check if directories/files already exist before creating them\n- Use the user's preferred package manager (npm, yarn, pnpm for TypeScript; pip, poetry for Python)\n- Ensure all code examples are functional and include proper error handling\n- Use modern syntax and patterns that are compatible with the latest SDK version\n- Make the experience interactive and educational\n- **ASK QUESTIONS ONE AT A TIME** - Do not ask multiple questions in a single response\n\nBegin by asking the FIRST requirement question only. Wait for the user's answer before proceeding to the next question.\n",
        "plugins/artifact/.claude-plugin/plugin.json": "{\n  \"name\": \"artifact\",\n  \"description\": \"Creates interactive HTML artifacts — self-contained single-file explorers with visual controls, live preview, and prompt output with copy button\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/artifact/README.md": "# Artifact Plugin\n\nCreates interactive HTML artifacts — self-contained single-file explorers that let users configure something visually through controls, see a live preview, and copy out a prompt.\n\n## What is an Artifact?\n\nAn artifact is a self-contained HTML file with:\n- Interactive controls on one side\n- A live preview on the other\n- A prompt output at the bottom with a copy button\n\nThe user adjusts controls, explores visually, then copies the generated prompt back into Claude.\n\n## When to Use\n\nUse this plugin when the user asks for an interactive artifact, playground, explorer, or visual tool for a topic — especially when the input space is large, visual, or structural and hard to express as plain text.\n\n## Templates\n\nThe skill includes templates for common artifact types:\n- **design-playground** — Visual design decisions (components, layouts, spacing, color, typography)\n- **data-explorer** — Data and query building (SQL, APIs, pipelines, regex)\n- **concept-map** — Learning and exploration (concept maps, knowledge gaps, scope mapping)\n- **writing-tool** — Writing and content (tone, document structure, audience)\n\n## Installation\n\nAdd this plugin to your Claude Code configuration to enable the artifact skill.\n",
        "plugins/artifact/skills/artifact/SKILL.md": "---\nname: artifact\ndescription: Creates interactive HTML artifacts — self-contained single-file explorers that let users configure something visually through controls, see a live preview, and copy out a prompt. Use when the user asks to make an artifact, playground, explorer, or interactive tool for a topic.\n---\n\n# Artifact Builder\n\nAn artifact is a self-contained HTML file with interactive controls on one side, a live preview on the other, and a prompt output at the bottom with a copy button. The user adjusts controls, explores visually, then copies the generated prompt back into Claude.\n\n## When to use this skill\n\nWhen the user asks for an interactive artifact, playground, explorer, or visual tool for a topic — especially when the input space is large, visual, or structural and hard to express as plain text.\n\n## How to use this skill\n\n1. **Identify the artifact type** from the user's request\n2. **Load the matching template** from `templates/`:\n   - `templates/design-playground.md` — Visual design decisions (components, layouts, spacing, color, typography)\n   - `templates/data-explorer.md` — Data and query building (SQL, APIs, pipelines, regex)\n   - `templates/concept-map.md` — Learning and exploration (concept maps, knowledge gaps, scope mapping)\n   - `templates/document-critique.md` — Document review (suggestions with approve/reject/comment workflow)\n   - `templates/diff-review.md` — Code review (git diffs, commits, PRs with line-by-line commenting)\n   - `templates/code-map.md` — Codebase architecture (component relationships, data flow, layer diagrams)\n3. **Follow the template** to build the artifact. If the topic doesn't fit any template cleanly, use the one closest and adapt.\n\n## Core requirements (every artifact)\n\n- **Single HTML file.** Inline all CSS and JS. No external dependencies.\n- **Live preview.** Updates instantly on every control change. No \"Apply\" button.\n- **Prompt output.** Natural language, not a value dump. Only mentions non-default choices. Includes enough context to act on without seeing the artifact. Updates live.\n- **Copy button.** Clipboard copy with brief \"Copied!\" feedback.\n- **Sensible defaults + presets.** Looks good on first load. Include 3-5 named presets that snap all controls to a cohesive combination.\n- **Dark theme.** System font for UI, monospace for code/values. Minimal chrome.\n\n## State management pattern\n\nKeep a single state object. Every control writes to it, every render reads from it.\n\n```javascript\nconst state = { /* all configurable values */ };\n\nfunction updateAll() {\n  renderPreview(); // update the visual\n  updatePrompt();  // rebuild the prompt text\n}\n// Every control calls updateAll() on change\n```\n\n## Prompt output pattern\n\n```javascript\nfunction updatePrompt() {\n  const parts = [];\n\n  // Only mention non-default values\n  if (state.borderRadius !== DEFAULTS.borderRadius) {\n    parts.push(`border-radius of ${state.borderRadius}px`);\n  }\n\n  // Use qualitative language alongside numbers\n  if (state.shadowBlur > 16) parts.push('a pronounced shadow');\n  else if (state.shadowBlur > 0) parts.push('a subtle shadow');\n\n  prompt.textContent = `Update the card to use ${parts.join(', ')}.`;\n}\n```\n\n## Common mistakes to avoid\n\n- Prompt output is just a value dump → write it as a natural instruction\n- Too many controls at once → group by concern, hide advanced in a collapsible section\n- Preview doesn't update instantly → every control change must trigger immediate re-render\n- No defaults or presets → starts empty or broken on load\n- External dependencies → if CDN is down, artifact is dead\n- Prompt lacks context → include enough that it's actionable without the artifact\n",
        "plugins/artifact/skills/artifact/templates/code-map.md": "# Code Map Template\n\nUse this template when the artifact is about visualizing codebase architecture: component relationships, data flow, layer diagrams, system architecture with interactive commenting for feedback.\n\n## Layout\n\n```\n+-------------------+----------------------------------+\n|                   |                                  |\n|  Controls:        |  SVG Canvas                      |\n|  • View presets   |  (nodes + connections)           |\n|  • Layer toggles  |  with zoom controls              |\n|  • Connection     |                                  |\n|    type filters   |  Legend (bottom-left)            |\n|                   |                                  |\n|  Comments (n):    +----------------------------------+\n|  • List of user   |  Prompt output                   |\n|    comments with  |  [ Copy Prompt ]                 |\n|    delete buttons |                                  |\n+-------------------+----------------------------------+\n```\n\nCode map artifacts use an SVG canvas for the architecture diagram. Users click components to add comments, which become part of the generated prompt. Layer and connection filters let users focus on specific parts of the system.\n\n## Control types for code maps\n\n| Decision | Control | Example |\n|---|---|---|\n| System view | Preset buttons | Full System, Chat Flow, Data Flow, Agent System |\n| Visible layers | Checkboxes | Client, Server, SDK, Data, External |\n| Connection types | Checkboxes with color indicators | Data Flow (blue), Tool Calls (green), Events (red) |\n| Component feedback | Click-to-comment modal | Opens modal with textarea for feedback |\n| Zoom level | +/−/reset buttons | Scale SVG for detail |\n\n## Canvas rendering\n\nUse an `<svg>` element with dynamically generated nodes and paths. Key patterns:\n\n- **Nodes:** Rounded rectangles with title and subtitle (file path)\n- **Connections:** Curved paths (bezier) with arrow markers, styled by type\n- **Layer organization:** Group nodes by Y-position bands (e.g., y: 30-80 = Client, y: 130-180 = Server)\n- **Click-to-comment:** Click node → open modal → save comment → node gets visual indicator\n- **Filtering:** Toggle visibility of nodes by layer, connections by type\n\n```javascript\nconst nodes = [\n  { id: 'api-client', label: 'API Client', subtitle: 'src/api/client.ts',\n    x: 100, y: 50, w: 140, h: 45, layer: 'client', color: '#dbeafe' },\n  // ...\n];\n\nconst connections = [\n  { from: 'api-client', to: 'server', type: 'data-flow', label: 'HTTP' },\n  { from: 'server', to: 'db', type: 'data-flow' },\n  // ...\n];\n\nfunction renderDiagram() {\n  const visibleNodes = nodes.filter(n => state.layers[n.layer]);\n  // Draw connections first (under nodes), then nodes\n  connections.forEach(c => drawConnection(c));\n  visibleNodes.forEach(n => drawNode(n));\n}\n```\n\n## Connection types and styling\n\nDefine 3-5 connection types with distinct visual styles:\n\n| Type | Color | Style | Use for |\n|---|---|---|---|\n| `data-flow` | Blue (#3b82f6) | Solid line | Request/response, data passing |\n| `tool-call` | Green (#10b981) | Dashed (6,3) | Function calls, API invocations |\n| `event` | Red (#ef4444) | Short dash (4,4) | Async events, pub/sub |\n| `skill-invoke` | Orange (#f97316) | Long dash (8,4) | Plugin/skill activation |\n| `dependency` | Gray (#6b7280) | Dotted | Import/require relationships |\n\nUse SVG markers for arrowheads:\n\n```html\n<marker id=\"arrowhead-blue\" markerWidth=\"8\" markerHeight=\"6\" refX=\"7\" refY=\"3\" orient=\"auto\">\n  <polygon points=\"0 0, 8 3, 0 6\" fill=\"#3b82f6\"/>\n</marker>\n```\n\n## Comment system\n\nThe key differentiator for code maps is click-to-comment functionality:\n\n1. **Click node** → Open modal with component name, file path, textarea\n2. **Save comment** → Add to comments list, mark node with visual indicator (colored border)\n3. **View comments** → Sidebar list with component name, comment preview, delete button\n4. **Delete comment** → Remove from list, update node visual, regenerate prompt\n\nComments should include the component context:\n\n```javascript\nstate.comments.push({\n  id: Date.now(),\n  target: node.id,\n  targetLabel: node.label,\n  targetFile: node.subtitle,\n  text: userInput\n});\n```\n\n## Prompt output for code maps\n\nThe prompt combines system context with user comments:\n\n```\nThis is the [PROJECT NAME] architecture, focusing on the [visible layers].\n\nFeedback on specific components:\n\n**API Client** (src/api/client.ts):\nI want to add retry logic with exponential backoff here.\n\n**Database Manager** (src/db/manager.ts):\nCan we add connection pooling? Current implementation creates new connections per request.\n\n**Auth Middleware** (src/middleware/auth.ts):\nThis should validate JWT tokens and extract user context.\n```\n\nOnly include comments the user added. Mention which layers are visible if not showing the full system.\n\n## Pre-populating with real data\n\nFor a specific codebase, pre-populate with:\n\n- **Nodes:** 15-25 key components with real file paths\n- **Connections:** 20-40 relationships based on actual imports/calls\n- **Layers:** Logical groupings (UI, API, Business Logic, Data, External)\n- **Presets:** \"Full System\", \"Frontend Only\", \"Backend Only\", \"Data Flow\"\n\nOrganize nodes in horizontal bands by layer, with consistent spacing.\n\n## Layer color palette (light theme)\n\n| Layer | Node fill | Description |\n|---|---|---|\n| Client/UI | #dbeafe (blue-100) | React components, hooks, pages |\n| Server/API | #fef3c7 (amber-100) | Express routes, middleware, handlers |\n| SDK/Core | #f3e8ff (purple-100) | Core libraries, SDK wrappers |\n| Agent/Logic | #dcfce7 (green-100) | Business logic, agents, processors |\n| Data | #fce7f3 (pink-100) | Database, cache, storage |\n| External | #fbcfe8 (pink-200) | Third-party services, APIs |\n\n## Example topics\n\n- Codebase architecture explorer (modules, imports, data flow)\n- Microservices map (services, queues, databases, API gateways)\n- React component tree (components, hooks, context, state)\n- API architecture (routes, middleware, controllers, models)\n- Agent system (prompts, tools, skills, subagents)\n- Data pipeline (sources, transforms, sinks, scheduling)\n- Plugin/extension architecture (core, plugins, hooks, events)\n",
        "plugins/artifact/skills/artifact/templates/concept-map.md": "# Concept Map Template\n\nUse this template when the artifact is about learning, exploration, or mapping relationships: concept maps, knowledge gap identification, scope mapping, task decomposition with dependencies.\n\n## Layout\n\n```\n+--------------------------------------+\n|  Canvas (draggable nodes, edges)     |\n|  with tooltip on hover               |\n+-------------------------+------------+\n|                         |            |\n|  Sidebar:               | Prompt     |\n|  • Knowledge levels     | output     |\n|  • Connection types     |            |\n|  • Node list            | [Copy]     |\n|  • Actions              |            |\n+-------------------------+------------+\n```\n\nCanvas-based artifacts differ from the two-panel split. The interactive visual IS the control — users drag nodes and draw connections rather than adjusting sliders. The sidebar supplements with toggles and list controls.\n\n## Control types for concept maps\n\n| Decision | Control | Example |\n|---|---|---|\n| Knowledge level per node | Click-to-cycle button in sidebar list | Know → Fuzzy → Unknown |\n| Connection type | Selector before drawing | calls, depends on, contains, reads from |\n| Node arrangement | Drag on canvas | spatial layout reflects mental model |\n| Which nodes to include | Toggle or checkbox per node | hide/show concepts |\n| Actions | Buttons | Auto-layout (force-directed), clear edges, reset |\n\n## Canvas rendering\n\nUse a `<canvas>` element with manual draw calls. Key patterns:\n\n- **Hit testing:** Check mouse position against node bounding circles on mousedown/mousemove\n- **Drag:** On mousedown on a node, track offset and update position on mousemove\n- **Edge drawing:** Click node A, then click node B. Draw arrow between them with the selected relationship type\n- **Tooltips:** On hover, position a div absolutely over the canvas with description text\n- **Force-directed auto-layout:** Simple spring simulation — repulsion between all pairs, attraction along edges, iterate 100-200 times with damping\n\n```javascript\nfunction draw() {\n  ctx.clearRect(0, 0, W, H);\n  edges.forEach(e => drawEdge(e));  // edges first, under nodes\n  nodes.forEach(n => drawNode(n));  // nodes on top\n}\n```\n\n## Prompt output for concept maps\n\nThe prompt should be a targeted learning request shaped by the user's knowledge markings:\n\n> \"I'm learning [CODEBASE/DOMAIN]. I already understand: [know nodes]. I'm fuzzy on: [fuzzy nodes]. I have no idea about: [unknown nodes]. Here are the relationships I want to understand: [edge list in natural language]. Please explain the fuzzy and unknown concepts, focusing on these relationships. Build on what I already know. Use concrete code references.\"\n\nOnly include edges the user drew. Only mention concepts they marked as fuzzy or unknown in the explanation request.\n\n## Pre-populating with real data\n\nFor codebases or domains, pre-populate with:\n- **Nodes:** 15-20 key concepts with real file paths and short descriptions\n- **Edges:** 20-30 pre-drawn relationships based on actual architecture\n- **Knowledge:** Default all to \"Fuzzy\" so the user adjusts from there\n- **Presets:** \"Zoom out\" (hide internal nodes, show only top-level), \"Focus on [layer]\" (highlight nodes in one area)\n\n## Example topics\n\n- Codebase architecture map (modules, data flow, state management)\n- Framework learning (how React hooks connect, Next.js data fetching layers)\n- System design (services, databases, queues, caches and how they relate)\n- Task decomposition (goals → sub-tasks with dependency arrows, knowledge tags)\n- API surface map (endpoints grouped by resource, shared middleware, auth layers)\n",
        "plugins/artifact/skills/artifact/templates/data-explorer.md": "# Data Explorer Template\n\nUse this template when the artifact is about data queries, APIs, pipelines, or structured configuration: SQL builders, API designers, regex builders, pipeline visuals, cron schedules.\n\n## Layout\n\n```\n+-------------------+----------------------+\n|                   |                      |\n|  Controls         |  Formatted output    |\n|  grouped by:      |  (syntax-highlighted |\n|  • Source/tables  |   code, or a         |\n|  • Columns/fields |   visual diagram)    |\n|  • Filters        |                      |\n|  • Grouping       |                      |\n|  • Ordering       |                      |\n|  • Limits         |                      |\n|                   +----------------------+\n|                   |  Prompt output       |\n|                   |  [ Copy Prompt ]     |\n+-------------------+----------------------+\n```\n\n## Control types by decision\n\n| Decision | Control | Example |\n|---|---|---|\n| Select from available items | Clickable cards/chips | table names, columns, HTTP methods |\n| Add filter/condition rows | Add button → row of dropdowns + input | WHERE column op value |\n| Join type or aggregation | Dropdown per row | INNER/LEFT/RIGHT, COUNT/SUM/AVG |\n| Limit/offset | Slider | result count 1–500 |\n| Ordering | Dropdown + ASC/DESC toggle | order by column |\n| On/off features | Toggle | show descriptions, include header |\n\n## Preview rendering\n\nRender syntax-highlighted output using `<span>` tags with color classes:\n\n```javascript\nfunction renderPreview() {\n  const el = document.getElementById('preview');\n  // Color-code by token type\n  el.innerHTML = sql\n    .replace(/\\b(SELECT|FROM|WHERE|JOIN|ON|GROUP BY|ORDER BY|LIMIT)\\b/g, '<span class=\"kw\">$1</span>')\n    .replace(/\\b(users|orders|products)\\b/g, '<span class=\"tbl\">$1</span>')\n    .replace(/'[^']*'/g, '<span class=\"str\">$&</span>');\n}\n```\n\nFor pipeline-style artifacts, render a horizontal or vertical flow diagram using positioned divs with arrow connectors.\n\n## Prompt output for data\n\nFrame it as a specification of what to build, not the raw query itself:\n\n> \"Write a SQL query that joins orders to users on user_id, filters for orders after 2024-01-01 with total > $50, groups by user, and returns the top 10 users by order count.\"\n\nInclude the schema context (table names, column types) so the prompt is self-contained.\n\n## Example topics\n\n- SQL query builder (tables, joins, filters, group by, order by, limit)\n- API endpoint designer (routes, methods, request/response field builder)\n- Data transformation pipeline (source → filter → map → aggregate → output)\n- Regex builder (sample strings, match groups, live highlight)\n- Cron schedule builder (visual timeline, interval, day toggles)\n- GraphQL query builder (type selection, field picker, nested resolvers)\n",
        "plugins/artifact/skills/artifact/templates/design-playground.md": "# Design Playground Template\n\nUse this template when the artifact is about visual design decisions: components, layouts, spacing, color, typography, animation, responsive behavior.\n\n## Layout\n\n```\n+-------------------+----------------------+\n|                   |                      |\n|  Controls         |  Live component/     |\n|  grouped by:      |  layout preview      |\n|  • Spacing        |  (renders in a       |\n|  • Color          |   mock page or       |\n|  • Typography     |   isolated card)     |\n|  • Shadow/Border  |                      |\n|  • Interaction    |                      |\n|                   +----------------------+\n|                   |  Prompt output       |\n|                   |  [ Copy Prompt ]     |\n+-------------------+----------------------+\n```\n\n## Control types by decision\n\n| Decision | Control | Example |\n|---|---|---|\n| Sizes, spacing, radius | Slider | border-radius 0–24px |\n| On/off features | Toggle | show border, hover effect |\n| Choosing from a set | Dropdown | font-family, easing curve |\n| Colors | Hue + saturation + lightness sliders | shadow color, accent |\n| Layout structure | Clickable cards | sidebar-left / top-nav / no-nav |\n| Responsive behavior | Viewport-width slider | watch grid reflow at breakpoints |\n\n## Preview rendering\n\nApply state values directly to a preview element's inline styles:\n\n```javascript\nfunction renderPreview() {\n  const el = document.getElementById('preview');\n  el.style.borderRadius = state.radius + 'px';\n  el.style.padding = state.padding + 'px';\n  el.style.boxShadow = state.shadow\n    ? `0 ${state.shadowY}px ${state.shadowBlur}px rgba(0,0,0,${state.shadowOpacity})`\n    : 'none';\n}\n```\n\nShow the preview on both light and dark backgrounds if relevant. Include a context toggle.\n\n## Prompt output for design\n\nFrame it as a direction to a developer, not a spec sheet:\n\n> \"Update the card to feel soft and elevated: 12px border-radius, 24px horizontal padding, a medium box-shadow (0 4px 12px rgba(0,0,0,0.1)). On hover, lift it with translateY(-1px) and deepen the shadow slightly.\"\n\nIf the user is working in Tailwind, suggest Tailwind classes. If raw CSS, use CSS properties.\n\n## Example topics\n\n- Button style explorer (radius, padding, weight, hover/active states)\n- Card component (shadow depth, radius, content layout, image)\n- Layout builder (sidebar width, content max-width, header height, grid)\n- Typography scale (base size, ratio, line heights across h1-body-caption)\n- Color palette generator (primary hue, derive secondary/accent/surface)\n- Dashboard density (airy → compact slider that scales everything proportionally)\n- Modal/dialog (width, overlay opacity, entry animation, corner radius)\n",
        "plugins/artifact/skills/artifact/templates/diff-review.md": "# Diff Review Template\n\nUse this template when the artifact is about reviewing code diffs: git commits, pull requests, code changes with interactive line-by-line commenting for feedback.\n\n## Layout\n\n```\n+-------------------+----------------------------------+\n|                   |                                  |\n|  Commit Header:   |  Diff Content                    |\n|  • Hash           |  (files with hunks)              |\n|  • Message        |  with line numbers               |\n|  • Author/Date    |  and +/- indicators              |\n|                   |                                  |\n+-------------------+----------------------------------+\n|  Prompt Output Panel (fixed bottom-right)            |\n|  [ Copy All ]                                        |\n|  Shows all comments formatted for prompt             |\n+------------------------------------------------------+\n```\n\nDiff review artifacts display git diffs with syntax highlighting. Users click lines to add comments, which become part of the generated prompt for code review feedback.\n\n## Control types for diff review\n\n| Feature | Control | Behavior |\n|---|---|---|\n| Line commenting | Click any diff line | Opens textarea below the line |\n| Comment indicator | Badge on commented lines | Shows which lines have feedback |\n| Save/Cancel | Buttons in comment box | Persist or discard comment |\n| Copy prompt | Button in prompt panel | Copies all comments to clipboard |\n\n## Diff rendering\n\nParse diff data into structured format for rendering:\n\n```javascript\nconst diffData = [\n  {\n    file: \"path/to/file.py\",\n    hunks: [\n      {\n        header: \"@@ -41,13 +41,13 @@ function context\",\n        lines: [\n          { type: \"context\", oldNum: 41, newNum: 41, content: \"unchanged line\" },\n          { type: \"deletion\", oldNum: 42, newNum: null, content: \"removed line\" },\n          { type: \"addition\", oldNum: null, newNum: 42, content: \"added line\" },\n        ]\n      }\n    ]\n  }\n];\n```\n\n## Line type styling\n\n| Type | Background | Text Color | Prefix |\n|---|---|---|---|\n| `context` | transparent | default | ` ` (space) |\n| `addition` | green tint (#dafbe1 light / rgba(46,160,67,0.15) dark) | green (#1a7f37 light / #7ee787 dark) | `+` |\n| `deletion` | red tint (#ffebe9 light / rgba(248,81,73,0.15) dark) | red (#cf222e light / #f85149 dark) | `-` |\n| `hunk-header` | blue tint (#ddf4ff light) | blue (#0969da light) | `@@` |\n\n## Comment system\n\nEach diff line gets a unique identifier for comment tracking:\n\n```javascript\nconst comments = {}; // { lineId: commentText }\n\nfunction selectLine(lineId, lineEl) {\n  // Deselect previous\n  document.querySelectorAll('.diff-line.selected').forEach(el =>\n    el.classList.remove('selected'));\n  document.querySelectorAll('.comment-box.active').forEach(el =>\n    el.classList.remove('active'));\n\n  // Select new\n  lineEl.classList.add('selected');\n  document.getElementById(`comment-box-${lineId}`).classList.add('active');\n}\n\nfunction saveComment(lineId) {\n  const textarea = document.getElementById(`textarea-${lineId}`);\n  const comment = textarea.value.trim();\n\n  if (comment) {\n    comments[lineId] = comment;\n  } else {\n    delete comments[lineId];\n  }\n\n  renderDiff(); // Re-render to show comment indicator\n  updatePromptOutput();\n}\n```\n\n## Prompt output format\n\nGenerate a structured code review format:\n\n```javascript\nfunction updatePromptOutput() {\n  const commentKeys = Object.keys(comments);\n\n  if (commentKeys.length === 0) {\n    promptContent.innerHTML = '<span class=\"no-comments\">Click on any line to add a comment...</span>';\n    return;\n  }\n\n  let output = 'Code Review Comments:\\n\\n';\n\n  commentKeys.forEach(lineId => {\n    const lineEl = document.querySelector(`[data-line-id=\"${lineId}\"]`);\n    const file = lineEl.dataset.file;\n    const lineNum = lineEl.dataset.lineNum;\n    const content = lineEl.dataset.content;\n\n    output += `📍 ${file}:${lineNum}\\n`;\n    output += `   Code: ${content.trim()}\\n`;\n    output += `   Comment: ${comments[lineId]}\\n\\n`;\n  });\n\n  promptContent.textContent = output;\n}\n```\n\n## Data attributes for line elements\n\nStore metadata on each line element for prompt generation:\n\n```html\n<div class=\"diff-line addition\"\n     data-line-id=\"0-1-5\"\n     data-file=\"src/utils/handler.py\"\n     data-line-num=\"45\"\n     data-content=\"subagent_id = tracker.register()\">\n```\n\n## Pre-populating with real data\n\nTo create a diff viewer for a specific commit:\n\n1. Run `git show <commit> --format=\"%H%n%s%n%an%n%ad\" -p`\n2. Parse the output into the `diffData` structure\n3. Include commit metadata in the header section\n\n## Theme support\n\nSupport both light and dark modes:\n\n```css\n/* Light mode */\nbody { background: #f6f8fa; color: #1f2328; }\n.file-card { background: #ffffff; border: 1px solid #d0d7de; }\n.diff-line.addition { background: #dafbe1; }\n.diff-line.deletion { background: #ffebe9; }\n\n/* Dark mode */\nbody { background: #0d1117; color: #c9d1d9; }\n.file-card { background: #161b22; border: 1px solid #30363d; }\n.diff-line.addition { background: rgba(46, 160, 67, 0.15); }\n.diff-line.deletion { background: rgba(248, 81, 73, 0.15); }\n```\n\n## Interactive features\n\n- **Hover hint:** Show \"Click to comment\" tooltip on line hover\n- **Comment indicator:** Badge (💬) on lines with saved comments\n- **Toast notification:** \"Copied to clipboard!\" feedback on copy\n- **Edit existing:** Allow editing previously saved comments\n\n## Example topics\n\n- Git commit review (single commit diff with line comments)\n- Pull request review (multiple commits, file-level and line-level comments)\n- Code diff comparison (before/after refactoring)\n- Merge conflict resolution (showing both versions with annotations)\n- Code audit (security review with findings per line)\n",
        "plugins/artifact/skills/artifact/templates/document-critique.md": "# Document Critique Template\n\nUse this template when the artifact helps review and critique documents: SKILL.md files, READMEs, specs, proposals, or any text that needs structured feedback with approve/reject/comment workflow.\n\n## Layout\n\n```\n+---------------------------+--------------------+\n|                           |                    |\n|  Document content         |  Suggestions panel |\n|  with line numbers        |  (filterable list) |\n|  and suggestion           |  • Approve         |\n|  highlighting             |  • Reject          |\n|                           |  • Comment         |\n|                           |                    |\n+---------------------------+--------------------+\n|  Prompt output (approved + commented items)    |\n|  [ Copy Prompt ]                               |\n+------------------------------------------------+\n```\n\n## Key components\n\n### Document panel (left)\n- Display full document with line numbers\n- Highlight lines with suggestions using a colored left border\n- Color-code by status: pending (amber), approved (green), rejected (red with opacity)\n- Click a suggestion card to scroll to the relevant line\n\n### Suggestions panel (right)\n- Filter tabs: All / Pending / Approved / Rejected\n- Stats in header showing counts for each status\n- Each suggestion card shows:\n  - Line reference (e.g., \"Line 3\" or \"Lines 17-24\")\n  - The suggestion text\n  - Action buttons: Approve / Reject / Comment (or Reset if already decided)\n  - Optional textarea for user comments\n\n### Prompt output (bottom)\n- Generates a prompt only from approved suggestions and user comments\n- Groups by: Approved Improvements, Additional Feedback, Rejected (for context)\n- Copy button with \"Copied!\" feedback\n\n## State structure\n\n```javascript\nconst suggestions = [\n  {\n    id: 1,\n    lineRef: \"Line 3\",\n    targetText: \"description: Creates interactive...\",\n    suggestion: \"The description is too long. Consider shortening.\",\n    category: \"clarity\",  // clarity, completeness, performance, accessibility, ux\n    status: \"pending\",    // pending, approved, rejected\n    userComment: \"\"\n  },\n  // ... more suggestions\n];\n\nlet state = {\n  suggestions: [...],\n  activeFilter: \"all\",\n  activeSuggestionId: null\n};\n```\n\n## Suggestion matching to lines\n\nMatch suggestions to document lines by parsing the lineRef:\n\n```javascript\nconst suggestion = state.suggestions.find(s => {\n  const match = s.lineRef.match(/Line[s]?\\s*(\\d+)/);\n  if (match) {\n    const targetLine = parseInt(match[1]);\n    return Math.abs(targetLine - lineNum) <= 2; // fuzzy match nearby lines\n  }\n  return false;\n});\n```\n\n## Document rendering\n\nHandle markdown-style formatting inline:\n\n```javascript\n// Skip ``` lines, wrap content in code-block-wrapper\nif (line.startsWith('```')) {\n  inCodeBlock = !inCodeBlock;\n  // Open or close wrapper div\n}\n\n// Headers\nif (line.startsWith('# ')) renderedLine = `<h1>...</h1>`;\nif (line.startsWith('## ')) renderedLine = `<h2>...</h2>`;\n\n// Inline formatting (outside code blocks)\nrenderedLine = renderedLine.replace(/`([^`]+)`/g, '<code>$1</code>');\nrenderedLine = renderedLine.replace(/\\*\\*([^*]+)\\*\\*/g, '<strong>$1</strong>');\n```\n\n## Prompt output generation\n\nOnly include actionable items:\n\n```javascript\nfunction updatePrompt() {\n  const approved = state.suggestions.filter(s => s.status === 'approved');\n  const withComments = state.suggestions.filter(s => s.userComment?.trim());\n\n  if (approved.length === 0 && withComments.length === 0) {\n    // Show placeholder\n    return;\n  }\n\n  let prompt = 'Please update [DOCUMENT] with the following changes:\\n\\n';\n\n  if (approved.length > 0) {\n    prompt += '## Approved Improvements\\n\\n';\n    for (const s of approved) {\n      prompt += `**${s.lineRef}:** ${s.suggestion}`;\n      if (s.userComment?.trim()) {\n        prompt += `\\n  → User note: ${s.userComment.trim()}`;\n      }\n      prompt += '\\n\\n';\n    }\n  }\n\n  // Additional feedback from non-approved items with comments\n  // Rejected items listed for context only\n}\n```\n\n## Styling highlights\n\n```css\n.doc-line.has-suggestion {\n  border-left: 3px solid #bf8700;  /* amber for pending */\n  background: rgba(191, 135, 0, 0.08);\n}\n\n.doc-line.approved {\n  border-left-color: #1a7f37;  /* green */\n  background: rgba(26, 127, 55, 0.08);\n}\n\n.doc-line.rejected {\n  border-left-color: #cf222e;  /* red */\n  background: rgba(207, 34, 46, 0.08);\n  opacity: 0.6;\n}\n```\n\n## Pre-populating suggestions\n\nWhen building a critique artifact for a specific document:\n\n1. Read the document content\n2. Analyze and generate suggestions with:\n   - Specific line references\n   - Clear, actionable suggestion text\n   - Category tags (clarity, completeness, performance, accessibility, ux)\n3. Embed both the document content and suggestions array in the HTML\n\n## Example use cases\n\n- SKILL.md review (skill definition quality, completeness, clarity)\n- README critique (documentation quality, missing sections, unclear explanations)\n- Spec review (requirements clarity, missing edge cases, ambiguity)\n- Proposal feedback (structure, argumentation, missing context)\n- Code comment review (docstring quality, inline comment usefulness)\n",
        "plugins/clangd-lsp/README.md": "# clangd-lsp\n\nC/C++ language server (clangd) for Claude Code, providing code intelligence, diagnostics, and formatting.\n\n## Supported Extensions\n`.c`, `.h`, `.cpp`, `.cc`, `.cxx`, `.hpp`, `.hxx`, `.C`, `.H`\n\n## Installation\n\n### Via Homebrew (macOS)\n```bash\nbrew install llvm\n# Add to PATH: export PATH=\"/opt/homebrew/opt/llvm/bin:$PATH\"\n```\n\n### Via package manager (Linux)\n```bash\n# Ubuntu/Debian\nsudo apt install clangd\n\n# Fedora\nsudo dnf install clang-tools-extra\n\n# Arch Linux\nsudo pacman -S clang\n```\n\n### Windows\nDownload from [LLVM releases](https://github.com/llvm/llvm-project/releases) or install via:\n```bash\nwinget install LLVM.LLVM\n```\n\n## More Information\n- [clangd Website](https://clangd.llvm.org/)\n- [Getting Started Guide](https://clangd.llvm.org/installation)\n",
        "plugins/claude-code-setup/.claude-plugin/plugin.json": "{\n  \"name\": \"claude-code-setup\",\n  \"description\": \"Analyze codebases and recommend tailored Claude Code automations such as hooks, skills, MCP servers, and subagents.\",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/claude-code-setup/README.md": "# Claude Code Setup Plugin\n\nAnalyze codebases and recommend tailored Claude Code automations - hooks, skills, MCP servers, and more.\n\n## What It Does\n\nClaude uses this skill to scan your codebase and recommend the top 1-2 automations in each category:\n\n- **MCP Servers** - External integrations (context7 for docs, Playwright for frontend)\n- **Skills** - Packaged expertise (Plan agent, frontend-design)\n- **Hooks** - Automatic actions (auto-format, auto-lint, block sensitive files)\n- **Subagents** - Specialized reviewers (security, performance, accessibility)\n- **Slash Commands** - Quick workflows (/test, /pr-review, /explain)\n\nThis skill is **read-only** - it analyzes but doesn't modify files.\n\n## Usage\n\n```\n\"recommend automations for this project\"\n\"help me set up Claude Code\"\n\"what hooks should I use?\"\n```\n\n<img src=\"automation-recommender-example.png\" alt=\"Automation recommender analyzing a codebase and providing tailored recommendations\" width=\"600\">\n\n## Author\n\nIsabella He (isabella@anthropic.com)\n",
        "plugins/claude-code-setup/skills/claude-automation-recommender/SKILL.md": "---\nname: claude-automation-recommender\ndescription: Analyze a codebase and recommend Claude Code automations (hooks, subagents, skills, plugins, MCP servers). Use when user asks for automation recommendations, wants to optimize their Claude Code setup, mentions improving Claude Code workflows, asks how to first set up Claude Code for a project, or wants to know what Claude Code features they should use.\ntools: Read, Glob, Grep, Bash\n---\n\n# Claude Automation Recommender\n\nAnalyze codebase patterns to recommend tailored Claude Code automations across all extensibility options.\n\n**This skill is read-only.** It analyzes the codebase and outputs recommendations. It does NOT create or modify any files. Users implement the recommendations themselves or ask Claude separately to help build them.\n\n## Output Guidelines\n\n- **Recommend 1-2 of each type**: Don't overwhelm - surface the top 1-2 most valuable automations per category\n- **If user asks for a specific type**: Focus only on that type and provide more options (3-5 recommendations)\n- **Go beyond the reference lists**: The reference files contain common patterns, but use web search to find recommendations specific to the codebase's tools, frameworks, and libraries\n- **Tell users they can ask for more**: End by noting they can request more recommendations for any specific category\n\n## Automation Types Overview\n\n| Type | Best For |\n|------|----------|\n| **Hooks** | Automatic actions on tool events (format on save, lint, block edits) |\n| **Subagents** | Specialized reviewers/analyzers that run in parallel |\n| **Skills** | Packaged expertise, workflows, and repeatable tasks (invoked by Claude or user via `/skill-name`) |\n| **Plugins** | Collections of skills that can be installed |\n| **MCP Servers** | External tool integrations (databases, APIs, browsers, docs) |\n\n## Workflow\n\n### Phase 1: Codebase Analysis\n\nGather project context:\n\n```bash\n# Detect project type and tools\nls -la package.json pyproject.toml Cargo.toml go.mod pom.xml 2>/dev/null\ncat package.json 2>/dev/null | head -50\n\n# Check dependencies for MCP server recommendations\ncat package.json 2>/dev/null | grep -E '\"(react|vue|angular|next|express|fastapi|django|prisma|supabase|stripe)\"'\n\n# Check for existing Claude Code config\nls -la .claude/ CLAUDE.md 2>/dev/null\n\n# Analyze project structure\nls -la src/ app/ lib/ tests/ components/ pages/ api/ 2>/dev/null\n```\n\n**Key Indicators to Capture:**\n\n| Category | What to Look For | Informs Recommendations For |\n|----------|------------------|----------------------------|\n| Language/Framework | package.json, pyproject.toml, import patterns | Hooks, MCP servers |\n| Frontend stack | React, Vue, Angular, Next.js | Playwright MCP, frontend skills |\n| Backend stack | Express, FastAPI, Django | API documentation tools |\n| Database | Prisma, Supabase, raw SQL | Database MCP servers |\n| External APIs | Stripe, OpenAI, AWS SDKs | context7 MCP for docs |\n| Testing | Jest, pytest, Playwright configs | Testing hooks, subagents |\n| CI/CD | GitHub Actions, CircleCI | GitHub MCP server |\n| Issue tracking | Linear, Jira references | Issue tracker MCP |\n| Docs patterns | OpenAPI, JSDoc, docstrings | Documentation skills |\n\n### Phase 2: Generate Recommendations\n\nBased on analysis, generate recommendations across all categories:\n\n#### A. MCP Server Recommendations\n\nSee [references/mcp-servers.md](references/mcp-servers.md) for detailed patterns.\n\n| Codebase Signal | Recommended MCP Server |\n|-----------------|------------------------|\n| Uses popular libraries (React, Express, etc.) | **context7** - Live documentation lookup |\n| Frontend with UI testing needs | **Playwright** - Browser automation/testing |\n| Uses Supabase | **Supabase MCP** - Direct database operations |\n| PostgreSQL/MySQL database | **Database MCP** - Query and schema tools |\n| GitHub repository | **GitHub MCP** - Issues, PRs, actions |\n| Uses Linear for issues | **Linear MCP** - Issue management |\n| AWS infrastructure | **AWS MCP** - Cloud resource management |\n| Slack workspace | **Slack MCP** - Team notifications |\n| Memory/context persistence | **Memory MCP** - Cross-session memory |\n| Sentry error tracking | **Sentry MCP** - Error investigation |\n| Docker containers | **Docker MCP** - Container management |\n\n#### B. Skills Recommendations\n\nSee [references/skills-reference.md](references/skills-reference.md) for details.\n\nCreate skills in `.claude/skills/<name>/SKILL.md`. Some are also available via plugins:\n\n| Codebase Signal | Skill | Plugin |\n|-----------------|-------|--------|\n| Building plugins | skill-development | plugin-dev |\n| Git commits | commit | commit-commands |\n| React/Vue/Angular | frontend-design | frontend-design |\n| Automation rules | writing-rules | hookify |\n| Feature planning | feature-dev | feature-dev |\n\n**Custom skills to create** (with templates, scripts, examples):\n\n| Codebase Signal | Skill to Create | Invocation |\n|-----------------|-----------------|------------|\n| API routes | **api-doc** (with OpenAPI template) | Both |\n| Database project | **create-migration** (with validation script) | User-only |\n| Test suite | **gen-test** (with example tests) | User-only |\n| Component library | **new-component** (with templates) | User-only |\n| PR workflow | **pr-check** (with checklist) | User-only |\n| Releases | **release-notes** (with git context) | User-only |\n| Code style | **project-conventions** | Claude-only |\n| Onboarding | **setup-dev** (with prereq script) | User-only |\n\n#### C. Hooks Recommendations\n\nSee [references/hooks-patterns.md](references/hooks-patterns.md) for configurations.\n\n| Codebase Signal | Recommended Hook |\n|-----------------|------------------|\n| Prettier configured | PostToolUse: auto-format on edit |\n| ESLint/Ruff configured | PostToolUse: auto-lint on edit |\n| TypeScript project | PostToolUse: type-check on edit |\n| Tests directory exists | PostToolUse: run related tests |\n| `.env` files present | PreToolUse: block `.env` edits |\n| Lock files present | PreToolUse: block lock file edits |\n| Security-sensitive code | PreToolUse: require confirmation |\n\n#### D. Subagent Recommendations\n\nSee [references/subagent-templates.md](references/subagent-templates.md) for templates.\n\n| Codebase Signal | Recommended Subagent |\n|-----------------|---------------------|\n| Large codebase (>500 files) | **code-reviewer** - Parallel code review |\n| Auth/payments code | **security-reviewer** - Security audits |\n| API project | **api-documenter** - OpenAPI generation |\n| Performance critical | **performance-analyzer** - Bottleneck detection |\n| Frontend heavy | **ui-reviewer** - Accessibility review |\n| Needs more tests | **test-writer** - Test generation |\n\n#### E. Plugin Recommendations\n\nSee [references/plugins-reference.md](references/plugins-reference.md) for available plugins.\n\n| Codebase Signal | Recommended Plugin |\n|-----------------|-------------------|\n| General productivity | **anthropic-agent-skills** - Core skills bundle |\n| Document workflows | Install docx, xlsx, pdf skills |\n| Frontend development | **frontend-design** plugin |\n| Building AI tools | **mcp-builder** for MCP development |\n\n### Phase 3: Output Recommendations Report\n\nFormat recommendations clearly. **Only include 1-2 recommendations per category** - the most valuable ones for this specific codebase. Skip categories that aren't relevant.\n\n```markdown\n## Claude Code Automation Recommendations\n\nI've analyzed your codebase and identified the top automations for each category. Here are my top 1-2 recommendations per type:\n\n### Codebase Profile\n- **Type**: [detected language/runtime]\n- **Framework**: [detected framework]\n- **Key Libraries**: [relevant libraries detected]\n\n---\n\n### 🔌 MCP Servers\n\n#### context7\n**Why**: [specific reason based on detected libraries]\n**Install**: `claude mcp add context7`\n\n---\n\n### 🎯 Skills\n\n#### [skill name]\n**Why**: [specific reason]\n**Create**: `.claude/skills/[name]/SKILL.md`\n**Invocation**: User-only / Both / Claude-only\n**Also available in**: [plugin-name] plugin (if applicable)\n```yaml\n---\nname: [skill-name]\ndescription: [what it does]\ndisable-model-invocation: true  # for user-only\n---\n```\n\n---\n\n### ⚡ Hooks\n\n#### [hook name]\n**Why**: [specific reason based on detected config]\n**Where**: `.claude/settings.json`\n\n---\n\n### 🤖 Subagents\n\n#### [agent name]\n**Why**: [specific reason based on codebase patterns]\n**Where**: `.claude/agents/[name].md`\n\n---\n\n**Want more?** Ask for additional recommendations for any specific category (e.g., \"show me more MCP server options\" or \"what other hooks would help?\").\n\n**Want help implementing any of these?** Just ask and I can help you set up any of the recommendations above.\n```\n\n## Decision Framework\n\n### When to Recommend MCP Servers\n- External service integration needed (databases, APIs)\n- Documentation lookup for libraries/SDKs\n- Browser automation or testing\n- Team tool integration (GitHub, Linear, Slack)\n- Cloud infrastructure management\n\n### When to Recommend Skills\n\n- Document generation (docx, xlsx, pptx, pdf — also in plugins)\n- Frequently repeated prompts or workflows\n- Project-specific tasks with arguments\n- Applying templates or scripts to tasks (skills can bundle supporting files)\n- Quick actions invoked with `/skill-name`\n- Workflows that should run in isolation (`context: fork`)\n\n**Invocation control:**\n- `disable-model-invocation: true` — User-only (for side effects: deploy, commit, send)\n- `user-invocable: false` — Claude-only (for background knowledge)\n- Default (omit both) — Both can invoke\n\n### When to Recommend Hooks\n- Repetitive post-edit actions (formatting, linting)\n- Protection rules (block sensitive file edits)\n- Validation checks (tests, type checks)\n\n### When to Recommend Subagents\n- Specialized expertise needed (security, performance)\n- Parallel review workflows\n- Background quality checks\n\n### When to Recommend Plugins\n- Need multiple related skills\n- Want pre-packaged automation bundles\n- Team-wide standardization\n\n---\n\n## Configuration Tips\n\n### MCP Server Setup\n\n**Team sharing**: Check `.mcp.json` into repo so entire team gets same MCP servers\n\n**Debugging**: Use `--mcp-debug` flag to identify configuration issues\n\n**Prerequisites to recommend:**\n- GitHub CLI (`gh`) - enables native GitHub operations\n- Puppeteer/Playwright CLI - for browser MCP servers\n\n### Headless Mode (for CI/Automation)\n\nRecommend headless Claude for automated pipelines:\n\n```bash\n# Pre-commit hook example\nclaude -p \"fix lint errors in src/\" --allowedTools Edit,Write\n\n# CI pipeline with structured output\nclaude -p \"<prompt>\" --output-format stream-json | your_command\n```\n\n### Permissions for Hooks\n\nConfigure allowed tools in `.claude/settings.json`:\n\n```json\n{\n  \"permissions\": {\n    \"allow\": [\"Edit\", \"Write\", \"Bash(npm test:*)\", \"Bash(git commit:*)\"]\n  }\n}\n```\n",
        "plugins/claude-code-setup/skills/claude-automation-recommender/references/hooks-patterns.md": "# Hooks Recommendations\n\nHooks automatically run commands in response to Claude Code events. They're ideal for enforcement and automation that should happen consistently.\n\n**Note**: These are common patterns. Use web search to find hooks for tools/frameworks not listed here to recommend the best hooks for the user.\n\n## Auto-Formatting Hooks\n\n### Prettier (JavaScript/TypeScript)\n| Detection | File Exists |\n|-----------|-------------|\n| `.prettierrc`, `.prettierrc.json`, `prettier.config.js` | ✓ |\n\n**Recommend**: PostToolUse hook on Edit/Write to auto-format\n**Value**: Code stays formatted without thinking about it\n\n### ESLint (JavaScript/TypeScript)\n| Detection | File Exists |\n|-----------|-------------|\n| `.eslintrc`, `.eslintrc.json`, `eslint.config.js` | ✓ |\n\n**Recommend**: PostToolUse hook on Edit/Write to auto-fix\n**Value**: Lint errors fixed automatically\n\n### Black/isort (Python)\n| Detection | File Exists |\n|-----------|-------------|\n| `pyproject.toml` with black/isort, `.black`, `setup.cfg` | ✓ |\n\n**Recommend**: PostToolUse hook to format Python files\n**Value**: Consistent Python formatting\n\n### Ruff (Python - Modern)\n| Detection | File Exists |\n|-----------|-------------|\n| `ruff.toml`, `pyproject.toml` with `[tool.ruff]` | ✓ |\n\n**Recommend**: PostToolUse hook for lint + format\n**Value**: Fast, comprehensive Python linting\n\n### gofmt (Go)\n| Detection | File Exists |\n|-----------|-------------|\n| `go.mod` | ✓ |\n\n**Recommend**: PostToolUse hook to run gofmt\n**Value**: Standard Go formatting\n\n### rustfmt (Rust)\n| Detection | File Exists |\n|-----------|-------------|\n| `Cargo.toml` | ✓ |\n\n**Recommend**: PostToolUse hook to run rustfmt\n**Value**: Standard Rust formatting\n\n---\n\n## Type Checking Hooks\n\n### TypeScript\n| Detection | File Exists |\n|-----------|-------------|\n| `tsconfig.json` | ✓ |\n\n**Recommend**: PostToolUse hook to run tsc --noEmit\n**Value**: Catch type errors immediately\n\n### mypy/pyright (Python)\n| Detection | File Exists |\n|-----------|-------------|\n| `mypy.ini`, `pyrightconfig.json`, pyproject.toml with mypy | ✓ |\n\n**Recommend**: PostToolUse hook for type checking\n**Value**: Catch type errors in Python\n\n---\n\n## Protection Hooks\n\n### Block Sensitive File Edits\n| Detection | Presence Of |\n|-----------|-------------|\n| `.env`, `.env.local`, `.env.production` | Environment files |\n| `credentials.json`, `secrets.yaml` | Secret files |\n| `.git/` directory | Git internals |\n\n**Recommend**: PreToolUse hook that blocks Edit/Write to these paths\n**Value**: Prevent accidental secret exposure or git corruption\n\n### Block Lock File Edits\n| Detection | Presence Of |\n|-----------|-------------|\n| `package-lock.json`, `yarn.lock`, `pnpm-lock.yaml` | JS lock files |\n| `Cargo.lock`, `poetry.lock`, `Pipfile.lock` | Other lock files |\n\n**Recommend**: PreToolUse hook that blocks direct edits\n**Value**: Lock files should only change via package manager\n\n---\n\n## Test Runner Hooks\n\n### Jest (JavaScript/TypeScript)\n| Detection | Presence Of |\n|-----------|-------------|\n| `jest.config.js`, `jest` in package.json | Jest configured |\n| `__tests__/`, `*.test.ts`, `*.spec.ts` | Test files exist |\n\n**Recommend**: PostToolUse hook to run related tests after edit\n**Value**: Immediate test feedback on changes\n\n### pytest (Python)\n| Detection | Presence Of |\n|-----------|-------------|\n| `pytest.ini`, `pyproject.toml` with pytest | pytest configured |\n| `tests/`, `test_*.py` | Test files exist |\n\n**Recommend**: PostToolUse hook to run pytest on changed files\n**Value**: Immediate test feedback\n\n---\n\n## Quick Reference: Detection → Recommendation\n\n| If You See | Recommend This Hook |\n|------------|-------------------|\n| Prettier config | Auto-format on Edit/Write |\n| ESLint config | Auto-lint on Edit/Write |\n| Ruff/Black config | Auto-format Python |\n| tsconfig.json | Type-check on Edit |\n| Test directory | Run related tests on Edit |\n| .env files | Block .env edits |\n| Lock files | Block lock file edits |\n| Go project | gofmt on Edit |\n| Rust project | rustfmt on Edit |\n\n---\n\n## Notification Hooks\n\nNotification hooks run when Claude Code sends notifications. Use matchers to filter by notification type.\n\n### Permission Alerts\n| Matcher | Use Case |\n|---------|----------|\n| `permission_prompt` | Alert when Claude requests permissions |\n\n**Recommend**: Play sound, send desktop notification, or log permission requests\n**Value**: Never miss permission prompts when multitasking\n\n### Idle Notifications\n| Matcher | Use Case |\n|---------|----------|\n| `idle_prompt` | Alert when Claude is waiting for input (60+ seconds idle) |\n\n**Recommend**: Play sound or send notification when Claude needs attention\n**Value**: Know when Claude is ready for your input\n\n### Example Configuration\n\n```json\n{\n  \"hooks\": {\n    \"Notification\": [\n      {\n        \"matcher\": \"permission_prompt\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"afplay /System/Library/Sounds/Ping.aiff\"\n          }\n        ]\n      },\n      {\n        \"matcher\": \"idle_prompt\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"osascript -e 'display notification \\\"Claude is waiting\\\" with title \\\"Claude Code\\\"'\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Available Matchers\n\n| Matcher | Triggers When |\n|---------|---------------|\n| `permission_prompt` | Claude needs permission for a tool |\n| `idle_prompt` | Claude waiting for input (60+ seconds) |\n| `auth_success` | Authentication succeeds |\n| `elicitation_dialog` | MCP tool needs input |\n\n---\n\n## Quick Reference: Detection → Recommendation\n\n| If You See | Recommend This Hook |\n|------------|-------------------|\n| Prettier config | Auto-format on Edit/Write |\n| ESLint config | Auto-lint on Edit/Write |\n| Ruff/Black config | Auto-format Python |\n| tsconfig.json | Type-check on Edit |\n| Test directory | Run related tests on Edit |\n| .env files | Block .env edits |\n| Lock files | Block lock file edits |\n| Go project | gofmt on Edit |\n| Rust project | rustfmt on Edit |\n| Multitasking workflow | Notification hooks for alerts |\n\n---\n\n## Hook Placement\n\nHooks go in `.claude/settings.json`:\n\n```\n.claude/\n└── settings.json  ← Hook configurations here\n```\n\nRecommend creating the `.claude/` directory if it doesn't exist.\n",
        "plugins/claude-code-setup/skills/claude-automation-recommender/references/mcp-servers.md": "# MCP Server Recommendations\n\nMCP (Model Context Protocol) servers extend Claude's capabilities by connecting to external tools and services.\n\n**Note**: These are common MCP servers. Use web search to find MCP servers specific to the codebase's services and integrations.\n\n## Setup & Team Sharing\n\n**Connection methods:**\n1. **Project config** (`.mcp.json`) - Available only in that directory\n2. **Global config** (`~/.claude.json`) - Available across all projects\n3. **Checked-in `.mcp.json`** - Available to entire team (recommended!)\n\n**Tip**: Check `.mcp.json` into git so your whole team gets the same MCP servers.\n\n**Debugging**: Use `claude --mcp-debug` to identify configuration issues.\n\n## Documentation & Knowledge\n\n### context7\n**Best for**: Projects using popular libraries/SDKs where you want Claude to code with up-to-date documentation\n\n| Recommend When | Examples |\n|----------------|----------|\n| Using React, Vue, Angular | Frontend frameworks |\n| Using Express, FastAPI, Django | Backend frameworks |\n| Using Prisma, Drizzle | ORMs |\n| Using Stripe, Twilio, SendGrid | Third-party APIs |\n| Using AWS SDK, Google Cloud | Cloud SDKs |\n| Using LangChain, OpenAI SDK | AI/ML libraries |\n\n**Value**: Claude fetches live documentation instead of relying on training data, reducing hallucinated APIs and outdated patterns.\n\n---\n\n## Browser & Frontend\n\n### Playwright MCP\n**Best for**: Frontend projects needing browser automation, testing, or screenshots\n\n| Recommend When | Examples |\n|----------------|----------|\n| React/Vue/Angular app | UI component testing |\n| E2E tests needed | User flow validation |\n| Visual regression testing | Screenshot comparisons |\n| Debugging UI issues | See what user sees |\n| Form testing | Multi-step workflows |\n\n**Value**: Claude can interact with your running app, take screenshots, fill forms, and verify UI behavior.\n\n### Puppeteer MCP\n**Best for**: Headless browser automation, web scraping\n\n| Recommend When | Examples |\n|----------------|----------|\n| PDF generation from HTML | Report generation |\n| Web scraping tasks | Data extraction |\n| Headless testing | CI environments |\n\n---\n\n## Databases\n\n### Supabase MCP\n**Best for**: Projects using Supabase for backend/database\n\n| Recommend When | Examples |\n|----------------|----------|\n| Supabase project detected | `@supabase/supabase-js` in deps |\n| Auth + database needs | User management apps |\n| Real-time features | Live data sync |\n\n**Value**: Claude can query tables, manage auth, and interact with Supabase storage directly.\n\n### PostgreSQL MCP\n**Best for**: Direct PostgreSQL database access\n\n| Recommend When | Examples |\n|----------------|----------|\n| Raw PostgreSQL usage | No ORM layer |\n| Database migrations | Schema management |\n| Data analysis tasks | Complex queries |\n| Debugging data issues | Inspect actual data |\n\n### Neon MCP\n**Best for**: Neon serverless Postgres users\n\n### Turso MCP\n**Best for**: Turso/libSQL edge database users\n\n---\n\n## Version Control & DevOps\n\n### GitHub MCP\n**Best for**: GitHub-hosted repositories needing issue/PR integration\n\n| Recommend When | Examples |\n|----------------|----------|\n| GitHub repository | `.git` with GitHub remote |\n| Issue-driven development | Reference issues in commits |\n| PR workflows | Review, merge operations |\n| GitHub Actions | CI/CD pipeline access |\n| Release management | Tag and release automation |\n\n**Value**: Claude can create issues, review PRs, check workflow runs, and manage releases.\n\n### GitLab MCP\n**Best for**: GitLab-hosted repositories\n\n### Linear MCP\n**Best for**: Teams using Linear for issue tracking\n\n| Recommend When | Examples |\n|----------------|----------|\n| Linear workspace | Issue references like `ABC-123` |\n| Sprint planning | Backlog management |\n| Issue creation from code | Auto-create issues for TODOs |\n\n---\n\n## Cloud Infrastructure\n\n### AWS MCP\n**Best for**: AWS infrastructure management\n\n| Recommend When | Examples |\n|----------------|----------|\n| AWS SDK in dependencies | `@aws-sdk/*` packages |\n| Infrastructure as code | Terraform, CDK, SAM |\n| Lambda development | Serverless functions |\n| S3, DynamoDB usage | Cloud data services |\n\n### Cloudflare MCP\n**Best for**: Cloudflare Workers, Pages, R2, D1\n\n| Recommend When | Examples |\n|----------------|----------|\n| Cloudflare Workers | Edge functions |\n| Pages deployment | Static site hosting |\n| R2 storage | Object storage |\n| D1 database | Edge SQL database |\n\n### Vercel MCP\n**Best for**: Vercel deployment and configuration\n\n---\n\n## Monitoring & Observtic\n\n### Sentry MCP\n**Best for**: Error tracking and debugging\n\n| Recommend When | Examples |\n|----------------|----------|\n| Sentry configured | `@sentry/*` in deps |\n| Production debugging | Investigate errors |\n| Error patterns | Group similar issues |\n| Release tracking | Correlate deploys with errors |\n\n**Value**: Claude can investigate Sentry issues, find root causes, and suggest fixes.\n\n### Datadog MCP\n**Best for**: APM, logs, and metrics\n\n---\n\n## Communication\n\n### Slack MCP\n**Best for**: Slack workspace integration\n\n| Recommend When | Examples |\n|----------------|----------|\n| Team uses Slack | Send notifications |\n| Deployment notifications | Alert channels |\n| Incident response | Post updates |\n\n### Notion MCP\n**Best for**: Notion workspace for documentation\n\n| Recommend When | Examples |\n|----------------|----------|\n| Notion for docs | Read/update pages |\n| Knowledge base | Search documentation |\n| Meeting notes | Create summaries |\n\n---\n\n## File & Data\n\n### Filesystem MCP\n**Best for**: Enhanced file operations beyond built-in tools\n\n| Recommend When | Examples |\n|----------------|----------|\n| Complex file operations | Batch processing |\n| File watching | Monitor changes |\n| Advanced search | Custom patterns |\n\n### Memory MCP\n**Best for**: Persistent memory across sessions\n\n| Recommend When | Examples |\n|----------------|----------|\n| Long-running projects | Remember context |\n| User preferences | Store settings |\n| Learning patterns | Build knowledge |\n\n**Value**: Claude remembers project context, decisions, and patterns across conversations.\n\n---\n\n## Containers & DevOps\n\n### Docker MCP\n**Best for**: Container management\n\n| Recommend When | Examples |\n|----------------|----------|\n| Docker Compose file | Container orchestration |\n| Dockerfile present | Build images |\n| Container debugging | Inspect logs, exec |\n\n### Kubernetes MCP\n**Best for**: Kubernetes cluster management\n\n| Recommend When | Examples |\n|----------------|----------|\n| K8s manifests | Deploy, scale pods |\n| Helm charts | Package management |\n| Cluster debugging | Pod logs, status |\n\n---\n\n## AI & ML\n\n### Exa MCP\n**Best for**: Web search and research\n\n| Recommend When | Examples |\n|----------------|----------|\n| Research tasks | Find current info |\n| Competitive analysis | Market research |\n| Documentation gaps | Find examples |\n\n---\n\n## Quick Reference: Detection Patterns\n\n| Look For | Suggests MCP Server |\n|----------|-------------------|\n| Popular npm packages | context7 |\n| React/Vue/Next.js | Playwright MCP |\n| `@supabase/supabase-js` | Supabase MCP |\n| `pg` or `postgres` | PostgreSQL MCP |\n| GitHub remote | GitHub MCP |\n| `.linear` or Linear refs | Linear MCP |\n| `@aws-sdk/*` | AWS MCP |\n| `@sentry/*` | Sentry MCP |\n| `docker-compose.yml` | Docker MCP |\n| Slack webhook URLs | Slack MCP |\n| `@anthropic-ai/sdk` | context7 for Anthropic docs |\n",
        "plugins/claude-code-setup/skills/claude-automation-recommender/references/plugins-reference.md": "# Plugin Recommendations\n\nPlugins are installable collections of skills, commands, agents, and hooks. Install via `/plugin install`.\n\n**Note**: These are plugins from the official repository. Use web search to discover additional community plugins.\n\n---\n\n## Official Plugins\n\n### Development & Code Quality\n\n| Plugin | Best For | Key Features |\n|--------|----------|--------------|\n| **plugin-dev** | Building Claude Code plugins | Skills for creating skills, hooks, commands, agents |\n| **pr-review-toolkit** | PR review workflows | Specialized review agents (code, tests, types) |\n| **code-review** | Automated code review | Multi-agent review with confidence scoring |\n| **code-simplifier** | Code refactoring | Simplify code while preserving functionality |\n| **feature-dev** | Feature development | End-to-end feature workflow with agents |\n\n### Git & Workflow\n\n| Plugin | Best For | Key Features |\n|--------|----------|--------------|\n| **commit-commands** | Git workflows | /commit, /commit-push-pr commands |\n| **hookify** | Automation rules | Create hooks from conversation patterns |\n\n### Frontend\n\n| Plugin | Best For | Key Features |\n|--------|----------|--------------|\n| **frontend-design** | UI development | Production-grade UI, avoids generic aesthetics |\n\n### Learning & Guidance\n\n| Plugin | Best For | Key Features |\n|--------|----------|--------------|\n| **explanatory-output-style** | Learning | Educational insights about code choices |\n| **learning-output-style** | Interactive learning | Requests contributions at decision points |\n| **security-guidance** | Security awareness | Warns about security issues when editing |\n\n### Language Servers (LSP)\n\n| Plugin | Language |\n|--------|----------|\n| **typescript-lsp** | TypeScript/JavaScript |\n| **pyright-lsp** | Python |\n| **gopls-lsp** | Go |\n| **rust-analyzer-lsp** | Rust |\n| **clangd-lsp** | C/C++ |\n| **jdtls-lsp** | Java |\n| **kotlin-lsp** | Kotlin |\n| **swift-lsp** | Swift |\n| **csharp-lsp** | C# |\n| **php-lsp** | PHP |\n| **lua-lsp** | Lua |\n\n---\n\n## Quick Reference: Codebase → Plugin\n\n| Codebase Signal | Recommended Plugin |\n|-----------------|-------------------|\n| Building plugins | plugin-dev |\n| PR-based workflow | pr-review-toolkit |\n| Git commits | commit-commands |\n| React/Vue/Angular | frontend-design |\n| Want automation rules | hookify |\n| TypeScript project | typescript-lsp |\n| Python project | pyright-lsp |\n| Go project | gopls-lsp |\n| Security-sensitive code | security-guidance |\n| Learning/onboarding | explanatory-output-style |\n\n---\n\n## Plugin Management\n\n```bash\n# Install a plugin\n/plugin install <plugin-name>\n\n# List installed plugins\n/plugin list\n\n# View plugin details\n/plugin info <plugin-name>\n```\n\n---\n\n## When to Recommend Plugins\n\n**Recommend plugin installation when:**\n- User wants to install Claude Code automations from Anthropic's official repository or another shared marketplace\n- User needs multiple related capabilities\n- Team wants standardized workflows\n- First-time Claude Code setup",
        "plugins/claude-code-setup/skills/claude-automation-recommender/references/skills-reference.md": "# Skills Recommendations\n\nSkills are packaged expertise with workflows, reference materials, and best practices. Create them in `.claude/skills/<name>/SKILL.md`. Skills can be invoked by Claude automatically when relevant, or by users directly with `/skill-name`.\n\nSome pre-built skills are available through official plugins (install via `/plugin install`).\n\n**Note**: These are common patterns. Use web search to find skill ideas specific to the codebase's tools and frameworks.\n\n---\n\n## Available from Official Plugins\n\n### Plugin Development (plugin-dev)\n\n| Skill | Best For |\n|-------|----------|\n| **skill-development** | Creating new skills with proper structure |\n| **hook-development** | Building hooks for automation |\n| **command-development** | Creating slash commands |\n| **agent-development** | Building specialized subagents |\n| **mcp-integration** | Integrating MCP servers into plugins |\n| **plugin-structure** | Understanding plugin architecture |\n\n### Git Workflows (commit-commands)\n\n| Skill | Best For |\n|-------|----------|\n| **commit** | Creating git commits with proper messages |\n| **commit-push-pr** | Full commit, push, and PR workflow |\n\n### Frontend (frontend-design)\n\n| Skill | Best For |\n|-------|----------|\n| **frontend-design** | Creating polished UI components |\n\n**Value**: Creates distinctive, high-quality UI instead of generic AI aesthetics.\n\n### Automation Rules (hookify)\n\n| Skill | Best For |\n|-------|----------|\n| **writing-rules** | Creating hookify rules for automation |\n\n### Feature Development (feature-dev)\n\n| Skill | Best For |\n|-------|----------|\n| **feature-dev** | End-to-end feature development workflow |\n\n---\n\n## Quick Reference: Official Plugin Skills\n\n| Codebase Signal | Skill | Plugin |\n|-----------------|-------|--------|\n| Building plugins | skill-development | plugin-dev |\n| Git commits | commit | commit-commands |\n| React/Vue/Angular | frontend-design | frontend-design |\n| Automation rules | writing-rules | hookify |\n| Feature planning | feature-dev | feature-dev |\n\n---\n\n## Custom Project Skills\n\nCreate project-specific skills in `.claude/skills/<name>/SKILL.md`.\n\n### Skill Structure\n\n```\n.claude/skills/\n└── my-skill/\n    ├── SKILL.md           # Main instructions (required)\n    ├── template.yaml      # Template to apply\n    ├── scripts/\n    │   └── validate.sh    # Script to run\n    └── examples/          # Reference examples\n```\n\n### Frontmatter Reference\n\n```yaml\n---\nname: skill-name\ndescription: What this skill does and when to use it\ndisable-model-invocation: true  # Only user can invoke (for side effects)\nuser-invocable: false           # Only Claude can invoke (for background knowledge)\nallowed-tools: Read, Grep, Glob # Restrict tool access\ncontext: fork                   # Run in isolated subagent\nagent: Explore                  # Which agent type when forked\n---\n```\n\n### Invocation Control\n\n| Setting | User | Claude | Use for |\n|---------|------|--------|---------|\n| (default) | ✓ | ✓ | General-purpose skills |\n| `disable-model-invocation: true` | ✓ | ✗ | Side effects (deploy, send) |\n| `user-invocable: false` | ✗ | ✓ | Background knowledge |\n\n---\n\n## Custom Skill Examples\n\n### API Documentation with OpenAPI Template\n\nApply a YAML template to generate consistent API docs:\n\n```\n.claude/skills/api-doc/\n├── SKILL.md\n└── openapi-template.yaml\n```\n\n**SKILL.md:**\n```yaml\n---\nname: api-doc\ndescription: Generate OpenAPI documentation for an endpoint. Use when documenting API routes.\n---\n\nGenerate OpenAPI documentation for the endpoint at $ARGUMENTS.\n\nUse the template in [openapi-template.yaml](openapi-template.yaml) as the structure.\n\n1. Read the endpoint code\n2. Extract path, method, parameters, request/response schemas\n3. Fill in the template with actual values\n4. Output the completed YAML\n```\n\n**openapi-template.yaml:**\n```yaml\npaths:\n  /{path}:\n    {method}:\n      summary: \"\"\n      description: \"\"\n      parameters: []\n      requestBody:\n        content:\n          application/json:\n            schema: {}\n      responses:\n        \"200\":\n          description: \"\"\n          content:\n            application/json:\n              schema: {}\n```\n\n---\n\n### Database Migration Generator with Script\n\nGenerate and validate migrations using a bundled script:\n\n```\n.claude/skills/create-migration/\n├── SKILL.md\n└── scripts/\n    └── validate-migration.sh\n```\n\n**SKILL.md:**\n```yaml\n---\nname: create-migration\ndescription: Create a database migration file\ndisable-model-invocation: true\nallowed-tools: Read, Write, Bash\n---\n\nCreate a migration for: $ARGUMENTS\n\n1. Generate migration file in `migrations/` with timestamp prefix\n2. Include up and down functions\n3. Run validation: `bash ~/.claude/skills/create-migration/scripts/validate-migration.sh`\n4. Report any issues found\n```\n\n**scripts/validate-migration.sh:**\n```bash\n#!/bin/bash\n# Validate migration syntax\nnpx prisma validate 2>&1 || echo \"Validation failed\"\n```\n\n---\n\n### Test Generator with Examples\n\nGenerate tests following project patterns:\n\n```\n.claude/skills/gen-test/\n├── SKILL.md\n└── examples/\n    ├── unit-test.ts\n    └── integration-test.ts\n```\n\n**SKILL.md:**\n```yaml\n---\nname: gen-test\ndescription: Generate tests for a file following project conventions\ndisable-model-invocation: true\n---\n\nGenerate tests for: $ARGUMENTS\n\nReference these examples for the expected patterns:\n- Unit tests: [examples/unit-test.ts](examples/unit-test.ts)\n- Integration tests: [examples/integration-test.ts](examples/integration-test.ts)\n\n1. Analyze the source file\n2. Identify functions/methods to test\n3. Generate tests matching project conventions\n4. Place in appropriate test directory\n```\n\n---\n\n### Component Generator with Template\n\nScaffold new components from a template:\n\n```\n.claude/skills/new-component/\n├── SKILL.md\n└── templates/\n    ├── component.tsx.template\n    ├── component.test.tsx.template\n    └── component.stories.tsx.template\n```\n\n**SKILL.md:**\n```yaml\n---\nname: new-component\ndescription: Scaffold a new React component with tests and stories\ndisable-model-invocation: true\n---\n\nCreate component: $ARGUMENTS\n\nUse templates in [templates/](templates/) directory:\n1. Generate component from component.tsx.template\n2. Generate tests from component.test.tsx.template\n3. Generate Storybook story from component.stories.tsx.template\n\nReplace {{ComponentName}} with the PascalCase name.\nReplace {{component-name}} with the kebab-case name.\n```\n\n---\n\n### PR Review with Checklist\n\nReview PRs against a project-specific checklist:\n\n```\n.claude/skills/pr-check/\n├── SKILL.md\n└── checklist.md\n```\n\n**SKILL.md:**\n```yaml\n---\nname: pr-check\ndescription: Review PR against project checklist\ndisable-model-invocation: true\ncontext: fork\n---\n\n## PR Context\n- Diff: !`gh pr diff`\n- Description: !`gh pr view`\n\nReview against [checklist.md](checklist.md).\n\nFor each item, mark ✅ or ❌ with explanation.\n```\n\n**checklist.md:**\n```markdown\n## PR Checklist\n\n- [ ] Tests added for new functionality\n- [ ] No console.log statements\n- [ ] Error handling includes user-facing messages\n- [ ] API changes are backwards compatible\n- [ ] Database migrations are reversible\n```\n\n---\n\n### Release Notes Generator\n\nGenerate release notes from git history:\n\n**SKILL.md:**\n```yaml\n---\nname: release-notes\ndescription: Generate release notes from commits since last tag\ndisable-model-invocation: true\n---\n\n## Recent Changes\n- Commits since last tag: !`git log $(git describe --tags --abbrev=0)..HEAD --oneline`\n- Last tag: !`git describe --tags --abbrev=0`\n\nGenerate release notes:\n1. Group commits by type (feat, fix, docs, etc.)\n2. Write user-friendly descriptions\n3. Highlight breaking changes\n4. Format as markdown\n```\n\n---\n\n### Project Conventions (Claude-only)\n\nBackground knowledge Claude applies automatically:\n\n**SKILL.md:**\n```yaml\n---\nname: project-conventions\ndescription: Code style and patterns for this project. Apply when writing or reviewing code.\nuser-invocable: false\n---\n\n## Naming Conventions\n- React components: PascalCase\n- Utilities: camelCase\n- Constants: UPPER_SNAKE_CASE\n- Files: kebab-case\n\n## Patterns\n- Use `Result<T, E>` for fallible operations, not exceptions\n- Prefer composition over inheritance\n- All API responses use `{ data, error, meta }` shape\n\n## Forbidden\n- No `any` types\n- No `console.log` in production code\n- No synchronous file I/O\n```\n\n---\n\n### Environment Setup\n\nOnboard new developers with setup script:\n\n```\n.claude/skills/setup-dev/\n├── SKILL.md\n└── scripts/\n    └── check-prerequisites.sh\n```\n\n**SKILL.md:**\n```yaml\n---\nname: setup-dev\ndescription: Set up development environment for new contributors\ndisable-model-invocation: true\n---\n\nSet up development environment:\n\n1. Check prerequisites: `bash scripts/check-prerequisites.sh`\n2. Install dependencies: `npm install`\n3. Copy environment template: `cp .env.example .env`\n4. Set up database: `npm run db:setup`\n5. Verify setup: `npm test`\n\nReport any issues encountered.\n```\n\n---\n\n## Argument Patterns\n\n| Pattern | Meaning | Example |\n|---------|---------|---------|\n| `$ARGUMENTS` | All args as string | `/deploy staging` → \"staging\" |\n\nArguments are appended as `ARGUMENTS: <value>` if `$ARGUMENTS` isn't in the skill.\n\n## Dynamic Context Injection\n\nUse `!`command`` to inject live data before the skill runs:\n\n```yaml\n## Current State\n- Branch: !`git branch --show-current`\n- Status: !`git status --short`\n```\n\nThe command output replaces the placeholder before Claude sees the skill content.\n",
        "plugins/claude-code-setup/skills/claude-automation-recommender/references/subagent-templates.md": "# Subagent Recommendations\n\nSubagents are specialized Claude instances that run in parallel, each with their own context window and tool access. They're ideal for focused reviews, analysis, or generation tasks.\n\n**Note**: These are common patterns. Design custom subagents based on the codebase's specific review and analysis needs.\n\n## Code Review Agents\n\n### code-reviewer\n**Best for**: Automated code quality checks on large codebases\n\n| Recommend When | Detection |\n|----------------|-----------|\n| Large codebase (>500 files) | File count |\n| Frequent code changes | Active development |\n| Team wants consistent review | Quality focus |\n\n**Value**: Runs code review in parallel while you continue working\n**Model**: sonnet (balanced quality/speed)\n**Tools**: Read, Grep, Glob, Bash\n\n---\n\n### security-reviewer\n**Best for**: Security-focused code review\n\n| Recommend When | Detection |\n|----------------|-----------|\n| Auth code present | `auth/`, `login`, `session` patterns |\n| Payment processing | `stripe`, `payment`, `billing` patterns |\n| User data handling | `user`, `profile`, `pii` patterns |\n| API keys in code | Environment variable patterns |\n\n**Value**: Catches OWASP vulnerabilities, auth issues, data exposure\n**Model**: sonnet\n**Tools**: Read, Grep, Glob (read-only for safety)\n\n---\n\n### test-writer\n**Best for**: Generating comprehensive test coverage\n\n| Recommend When | Detection |\n|----------------|-----------|\n| Low test coverage | Few test files vs source files |\n| Test suite exists | `tests/`, `__tests__/` present |\n| Testing framework configured | jest, pytest, vitest in deps |\n\n**Value**: Generates tests matching project conventions\n**Model**: sonnet\n**Tools**: Read, Write, Grep, Glob\n\n---\n\n## Specialized Agents\n\n### api-documenter\n**Best for**: API documentation generation\n\n| Recommend When | Detection |\n|----------------|-----------|\n| REST endpoints | Express routes, FastAPI paths |\n| GraphQL schema | `.graphql` files |\n| OpenAPI exists | `openapi.yaml`, `swagger.json` |\n| Undocumented APIs | Routes without docs |\n\n**Value**: Generates OpenAPI specs, endpoint documentation\n**Model**: sonnet\n**Tools**: Read, Write, Grep, Glob\n\n---\n\n### performance-analyzer\n**Best for**: Finding performance bottlenecks\n\n| Recommend When | Detection |\n|----------------|-----------|\n| Database queries | ORM usage, raw SQL |\n| High-traffic code | API endpoints, hot paths |\n| Performance complaints | User reports slowness |\n| Complex algorithms | Nested loops, recursion |\n\n**Value**: Finds N+1 queries, O(n²) algorithms, memory leaks\n**Model**: sonnet\n**Tools**: Read, Grep, Glob, Bash\n\n---\n\n### ui-reviewer\n**Best for**: Frontend accessibility and UX review\n\n| Recommend When | Detection |\n|----------------|-----------|\n| React/Vue/Angular | Frontend framework detected |\n| Component library | `components/` directory |\n| User-facing UI | Not just API project |\n\n**Value**: Catches accessibility issues, UX problems, responsive design gaps\n**Model**: sonnet\n**Tools**: Read, Grep, Glob\n\n---\n\n## Utility Agents\n\n### dependency-updater\n**Best for**: Safe dependency updates\n\n| Recommend When | Detection |\n|----------------|-----------|\n| Outdated deps | `npm outdated` has results |\n| Security advisories | `npm audit` warnings |\n| Major version behind | Significant version gaps |\n\n**Value**: Updates dependencies incrementally with testing\n**Model**: sonnet\n**Tools**: Read, Write, Bash, Grep\n\n---\n\n### migration-helper\n**Best for**: Framework/version migrations\n\n| Recommend When | Detection |\n|----------------|-----------|\n| Major upgrade needed | Framework version very old |\n| Breaking changes coming | Deprecation warnings |\n| Refactoring planned | Architectural changes |\n\n**Value**: Plans and executes migrations incrementally\n**Model**: opus (complex reasoning needed)\n**Tools**: Read, Write, Grep, Glob, Bash\n\n---\n\n## Quick Reference: Detection → Recommendation\n\n| If You See | Recommend Subagent |\n|------------|-------------------|\n| Large codebase | code-reviewer |\n| Auth/payment code | security-reviewer |\n| Few tests | test-writer |\n| API routes | api-documenter |\n| Database heavy | performance-analyzer |\n| Frontend components | ui-reviewer |\n| Outdated packages | dependency-updater |\n| Old framework version | migration-helper |\n\n---\n\n## Subagent Placement\n\nSubagents go in `.claude/agents/`:\n\n```\n.claude/\n└── agents/\n    ├── code-reviewer.md\n    ├── security-reviewer.md\n    └── test-writer.md\n```\n\n---\n\n## Model Selection Guide\n\n| Model | Best For | Trade-off |\n|-------|----------|-----------|\n| **haiku** | Simple, repetitive checks | Fast, cheap, less thorough |\n| **sonnet** | Most review/analysis tasks | Balanced (recommended default) |\n| **opus** | Complex migrations, architecture | Thorough, slower, more expensive |\n\n---\n\n## Tool Access Guide\n\n| Access Level | Tools | Use Case |\n|--------------|-------|----------|\n| Read-only | Read, Grep, Glob | Reviews, analysis |\n| Writing | + Write | Code generation, docs |\n| Full | + Bash | Migrations, testing |\n",
        "plugins/claude-md-management/.claude-plugin/plugin.json": "{\n  \"name\": \"claude-md-management\",\n  \"description\": \"Tools to maintain and improve CLAUDE.md files - audit quality, capture session learnings, and keep project memory current.\",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/claude-md-management/README.md": "# CLAUDE.md Management Plugin\n\nTools to maintain and improve CLAUDE.md files - audit quality, capture session learnings, and keep project memory current.\n\n## What It Does\n\nTwo complementary tools for different purposes:\n\n| | claude-md-improver (skill) | /revise-claude-md (command) |\n|---|---|---|\n| **Purpose** | Keep CLAUDE.md aligned with codebase | Capture session learnings |\n| **Triggered by** | Codebase changes | End of session |\n| **Use when** | Periodic maintenance | Session revealed missing context |\n\n## Usage\n\n### Skill: claude-md-improver\n\nAudits CLAUDE.md files against current codebase state:\n\n```\n\"audit my CLAUDE.md files\"\n\"check if my CLAUDE.md is up to date\"\n```\n\n<img src=\"claude-md-improver-example.png\" alt=\"CLAUDE.md improver showing quality scores and recommended updates\" width=\"600\">\n\n### Command: /revise-claude-md\n\nCaptures learnings from the current session:\n\n```\n/revise-claude-md\n```\n\n<img src=\"revise-claude-md-example.png\" alt=\"Revise command capturing session learnings into CLAUDE.md\" width=\"600\">\n\n## Author\n\nIsabella He (isabella@anthropic.com)\n",
        "plugins/claude-md-management/commands/revise-claude-md.md": "---\ndescription: Update CLAUDE.md with learnings from this session\nallowed-tools: Read, Edit, Glob\n---\n\nReview this session for learnings about working with Claude Code in this codebase. Update CLAUDE.md with context that would help future Claude sessions be more effective.\n\n## Step 1: Reflect\n\nWhat context was missing that would have helped Claude work more effectively?\n- Bash commands that were used or discovered\n- Code style patterns followed\n- Testing approaches that worked\n- Environment/configuration quirks\n- Warnings or gotchas encountered\n\n## Step 2: Find CLAUDE.md Files\n\n```bash\nfind . -name \"CLAUDE.md\" -o -name \".claude.local.md\" 2>/dev/null | head -20\n```\n\nDecide where each addition belongs:\n- `CLAUDE.md` - Team-shared (checked into git)\n- `.claude.local.md` - Personal/local only (gitignored)\n\n## Step 3: Draft Additions\n\n**Keep it concise** - one line per concept. CLAUDE.md is part of the prompt, so brevity matters.\n\nFormat: `<command or pattern>` - `<brief description>`\n\nAvoid:\n- Verbose explanations\n- Obvious information\n- One-off fixes unlikely to recur\n\n## Step 4: Show Proposed Changes\n\nFor each addition:\n\n```\n### Update: ./CLAUDE.md\n\n**Why:** [one-line reason]\n\n\\`\\`\\`diff\n+ [the addition - keep it brief]\n\\`\\`\\`\n```\n\n## Step 5: Apply with Approval\n\nAsk if the user wants to apply the changes. Only edit files they approve.\n",
        "plugins/claude-md-management/skills/claude-md-improver/SKILL.md": "---\nname: claude-md-improver\ndescription: Audit and improve CLAUDE.md files in repositories. Use when user asks to check, audit, update, improve, or fix CLAUDE.md files. Scans for all CLAUDE.md files, evaluates quality against templates, outputs quality report, then makes targeted updates. Also use when the user mentions \"CLAUDE.md maintenance\" or \"project memory optimization\".\ntools: Read, Glob, Grep, Bash, Edit\n---\n\n# CLAUDE.md Improver\n\nAudit, evaluate, and improve CLAUDE.md files across a codebase to ensure Claude Code has optimal project context.\n\n**This skill can write to CLAUDE.md files.** After presenting a quality report and getting user approval, it updates CLAUDE.md files with targeted improvements.\n\n## Workflow\n\n### Phase 1: Discovery\n\nFind all CLAUDE.md files in the repository:\n\n```bash\nfind . -name \"CLAUDE.md\" -o -name \".claude.md\" -o -name \".claude.local.md\" 2>/dev/null | head -50\n```\n\n**File Types & Locations:**\n\n| Type | Location | Purpose |\n|------|----------|---------|\n| Project root | `./CLAUDE.md` | Primary project context (checked into git, shared with team) |\n| Local overrides | `./.claude.local.md` | Personal/local settings (gitignored, not shared) |\n| Global defaults | `~/.claude/CLAUDE.md` | User-wide defaults across all projects |\n| Package-specific | `./packages/*/CLAUDE.md` | Module-level context in monorepos |\n| Subdirectory | Any nested location | Feature/domain-specific context |\n\n**Note:** Claude auto-discovers CLAUDE.md files in parent directories, making monorepo setups work automatically.\n\n### Phase 2: Quality Assessment\n\nFor each CLAUDE.md file, evaluate against quality criteria. See [references/quality-criteria.md](references/quality-criteria.md) for detailed rubrics.\n\n**Quick Assessment Checklist:**\n\n| Criterion | Weight | Check |\n|-----------|--------|-------|\n| Commands/workflows documented | High | Are build/test/deploy commands present? |\n| Architecture clarity | High | Can Claude understand the codebase structure? |\n| Non-obvious patterns | Medium | Are gotchas and quirks documented? |\n| Conciseness | Medium | No verbose explanations or obvious info? |\n| Currency | High | Does it reflect current codebase state? |\n| Actionability | High | Are instructions executable, not vague? |\n\n**Quality Scores:**\n- **A (90-100)**: Comprehensive, current, actionable\n- **B (70-89)**: Good coverage, minor gaps\n- **C (50-69)**: Basic info, missing key sections\n- **D (30-49)**: Sparse or outdated\n- **F (0-29)**: Missing or severely outdated\n\n### Phase 3: Quality Report Output\n\n**ALWAYS output the quality report BEFORE making any updates.**\n\nFormat:\n\n```\n## CLAUDE.md Quality Report\n\n### Summary\n- Files found: X\n- Average score: X/100\n- Files needing update: X\n\n### File-by-File Assessment\n\n#### 1. ./CLAUDE.md (Project Root)\n**Score: XX/100 (Grade: X)**\n\n| Criterion | Score | Notes |\n|-----------|-------|-------|\n| Commands/workflows | X/20 | ... |\n| Architecture clarity | X/20 | ... |\n| Non-obvious patterns | X/15 | ... |\n| Conciseness | X/15 | ... |\n| Currency | X/15 | ... |\n| Actionability | X/15 | ... |\n\n**Issues:**\n- [List specific problems]\n\n**Recommended additions:**\n- [List what should be added]\n\n#### 2. ./packages/api/CLAUDE.md (Package-specific)\n...\n```\n\n### Phase 4: Targeted Updates\n\nAfter outputting the quality report, ask user for confirmation before updating.\n\n**Update Guidelines (Critical):**\n\n1. **Propose targeted additions only** - Focus on genuinely useful info:\n   - Commands or workflows discovered during analysis\n   - Gotchas or non-obvious patterns found in code\n   - Package relationships that weren't clear\n   - Testing approaches that work\n   - Configuration quirks\n\n2. **Keep it minimal** - Avoid:\n   - Restating what's obvious from the code\n   - Generic best practices already covered\n   - One-off fixes unlikely to recur\n   - Verbose explanations when a one-liner suffices\n\n3. **Show diffs** - For each change, show:\n   - Which CLAUDE.md file to update\n   - The specific addition (as a diff or quoted block)\n   - Brief explanation of why this helps future sessions\n\n**Diff Format:**\n\n```markdown\n### Update: ./CLAUDE.md\n\n**Why:** Build command was missing, causing confusion about how to run the project.\n\n```diff\n+ ## Quick Start\n+\n+ ```bash\n+ npm install\n+ npm run dev  # Start development server on port 3000\n+ ```\n```\n```\n\n### Phase 5: Apply Updates\n\nAfter user approval, apply changes using the Edit tool. Preserve existing content structure.\n\n## Templates\n\nSee [references/templates.md](references/templates.md) for CLAUDE.md templates by project type.\n\n## Common Issues to Flag\n\n1. **Stale commands**: Build commands that no longer work\n2. **Missing dependencies**: Required tools not mentioned\n3. **Outdated architecture**: File structure that's changed\n4. **Missing environment setup**: Required env vars or config\n5. **Broken test commands**: Test scripts that have changed\n6. **Undocumented gotchas**: Non-obvious patterns not captured\n\n## User Tips to Share\n\nWhen presenting recommendations, remind users:\n\n- **`#` key shortcut**: During a Claude session, press `#` to have Claude auto-incorporate learnings into CLAUDE.md\n- **Keep it concise**: CLAUDE.md should be human-readable; dense is better than verbose\n- **Actionable commands**: All documented commands should be copy-paste ready\n- **Use `.claude.local.md`**: For personal preferences not shared with team (add to `.gitignore`)\n- **Global defaults**: Put user-wide preferences in `~/.claude/CLAUDE.md`\n\n## What Makes a Great CLAUDE.md\n\n**Key principles:**\n- Concise and human-readable\n- Actionable commands that can be copy-pasted\n- Project-specific patterns, not generic advice\n- Non-obvious gotchas and warnings\n\n**Recommended sections** (use only what's relevant):\n- Commands (build, test, dev, lint)\n- Architecture (directory structure)\n- Key Files (entry points, config)\n- Code Style (project conventions)\n- Environment (required vars, setup)\n- Testing (commands, patterns)\n- Gotchas (quirks, common mistakes)\n- Workflow (when to do what)\n",
        "plugins/claude-md-management/skills/claude-md-improver/references/quality-criteria.md": "# CLAUDE.md Quality Criteria\n\n## Scoring Rubric\n\n### 1. Commands/Workflows (20 points)\n\n**20 points**: All essential commands documented with context\n- Build, test, lint, deploy commands present\n- Development workflow clear\n- Common operations documented\n\n**15 points**: Most commands present, some missing context\n\n**10 points**: Basic commands only, no workflow\n\n**5 points**: Few commands, many missing\n\n**0 points**: No commands documented\n\n### 2. Architecture Clarity (20 points)\n\n**20 points**: Clear codebase map\n- Key directories explained\n- Module relationships documented\n- Entry points identified\n- Data flow described where relevant\n\n**15 points**: Good structure overview, minor gaps\n\n**10 points**: Basic directory listing only\n\n**5 points**: Vague or incomplete\n\n**0 points**: No architecture info\n\n### 3. Non-Obvious Patterns (15 points)\n\n**15 points**: Gotchas and quirks captured\n- Known issues documented\n- Workarounds explained\n- Edge cases noted\n- \"Why we do it this way\" for unusual patterns\n\n**10 points**: Some patterns documented\n\n**5 points**: Minimal pattern documentation\n\n**0 points**: No patterns or gotchas\n\n### 4. Conciseness (15 points)\n\n**15 points**: Dense, valuable content\n- No filler or obvious info\n- Each line adds value\n- No redundancy with code comments\n\n**10 points**: Mostly concise, some padding\n\n**5 points**: Verbose in places\n\n**0 points**: Mostly filler or restates obvious code\n\n### 5. Currency (15 points)\n\n**15 points**: Reflects current codebase\n- Commands work as documented\n- File references accurate\n- Tech stack current\n\n**10 points**: Mostly current, minor staleness\n\n**5 points**: Several outdated references\n\n**0 points**: Severely outdated\n\n### 6. Actionability (15 points)\n\n**15 points**: Instructions are executable\n- Commands can be copy-pasted\n- Steps are concrete\n- Paths are real\n\n**10 points**: Mostly actionable\n\n**5 points**: Some vague instructions\n\n**0 points**: Vague or theoretical\n\n## Assessment Process\n\n1. Read the CLAUDE.md file completely\n2. Cross-reference with actual codebase:\n   - Run documented commands (mentally or actually)\n   - Check if referenced files exist\n   - Verify architecture descriptions\n3. Score each criterion\n4. Calculate total and assign grade\n5. List specific issues found\n6. Propose concrete improvements\n\n## Red Flags\n\n- Commands that would fail (wrong paths, missing deps)\n- References to deleted files/folders\n- Outdated tech versions\n- Copy-paste from templates without customization\n- Generic advice not specific to the project\n- \"TODO\" items never completed\n- Duplicate info across multiple CLAUDE.md files\n",
        "plugins/claude-md-management/skills/claude-md-improver/references/templates.md": "# CLAUDE.md Templates\n\n## Key Principles\n\n- **Concise**: Dense, human-readable content; one line per concept when possible\n- **Actionable**: Commands should be copy-paste ready\n- **Project-specific**: Document patterns unique to this project, not generic advice\n- **Current**: All info should reflect actual codebase state\n\n---\n\n## Recommended Sections\n\nUse only the sections relevant to the project. Not all sections are needed.\n\n### Commands\n\nDocument the essential commands for working with the project.\n\n```markdown\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `<install command>` | Install dependencies |\n| `<dev command>` | Start development server |\n| `<build command>` | Production build |\n| `<test command>` | Run tests |\n| `<lint command>` | Lint/format code |\n```\n\n### Architecture\n\nDescribe the project structure so Claude understands where things live.\n\n```markdown\n## Architecture\n\n```\n<root>/\n  <dir>/    # <purpose>\n  <dir>/    # <purpose>\n  <dir>/    # <purpose>\n```\n```\n\n### Key Files\n\nList important files that Claude should know about.\n\n```markdown\n## Key Files\n\n- `<path>` - <purpose>\n- `<path>` - <purpose>\n```\n\n### Code Style\n\nDocument project-specific coding conventions.\n\n```markdown\n## Code Style\n\n- <convention>\n- <convention>\n- <preference over alternative>\n```\n\n### Environment\n\nDocument required environment variables and setup.\n\n```markdown\n## Environment\n\nRequired:\n- `<VAR_NAME>` - <purpose>\n- `<VAR_NAME>` - <purpose>\n\nSetup:\n- <setup step>\n```\n\n### Testing\n\nDocument testing approach and commands.\n\n```markdown\n## Testing\n\n- `<test command>` - <what it tests>\n- <testing convention or pattern>\n```\n\n### Gotchas\n\nDocument non-obvious patterns, quirks, and warnings.\n\n```markdown\n## Gotchas\n\n- <non-obvious thing that causes issues>\n- <ordering dependency or prerequisite>\n- <common mistake to avoid>\n```\n\n### Workflow\n\nDocument development workflow patterns.\n\n```markdown\n## Workflow\n\n- <when to do X>\n- <preferred approach for Y>\n```\n\n---\n\n## Template: Project Root (Minimal)\n\n```markdown\n# <Project Name>\n\n<One-line description>\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `<command>` | <description> |\n\n## Architecture\n\n```\n<structure>\n```\n\n## Gotchas\n\n- <gotcha>\n```\n\n---\n\n## Template: Project Root (Comprehensive)\n\n```markdown\n# <Project Name>\n\n<One-line description>\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `<command>` | <description> |\n\n## Architecture\n\n```\n<structure with descriptions>\n```\n\n## Key Files\n\n- `<path>` - <purpose>\n\n## Code Style\n\n- <convention>\n\n## Environment\n\n- `<VAR>` - <purpose>\n\n## Testing\n\n- `<command>` - <scope>\n\n## Gotchas\n\n- <gotcha>\n```\n\n---\n\n## Template: Package/Module\n\nFor packages within a monorepo or distinct modules.\n\n```markdown\n# <Package Name>\n\n<Purpose of this package>\n\n## Usage\n\n```\n<import/usage example>\n```\n\n## Key Exports\n\n- `<export>` - <purpose>\n\n## Dependencies\n\n- `<dependency>` - <why needed>\n\n## Notes\n\n- <important note>\n```\n\n---\n\n## Template: Monorepo Root\n\n```markdown\n# <Monorepo Name>\n\n<Description>\n\n## Packages\n\n| Package | Description | Path |\n|---------|-------------|------|\n| `<name>` | <purpose> | `<path>` |\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `<command>` | <description> |\n\n## Cross-Package Patterns\n\n- <shared pattern>\n- <generation/sync pattern>\n```\n\n---\n\n## Update Principles\n\nWhen updating any CLAUDE.md:\n\n1. **Be specific**: Use actual file paths, real commands from this project\n2. **Be current**: Verify info against the actual codebase\n3. **Be brief**: One line per concept when possible\n4. **Be useful**: Would this help a new Claude session understand the project?\n",
        "plugins/claude-md-management/skills/claude-md-improver/references/update-guidelines.md": "# CLAUDE.md Update Guidelines\n\n## Core Principle\n\nOnly add information that will genuinely help future Claude sessions. The context window is precious - every line must earn its place.\n\n## What TO Add\n\n### 1. Commands/Workflows Discovered\n\n```markdown\n## Build\n\n`npm run build:prod` - Full production build with optimization\n`npm run build:dev` - Fast dev build (no minification)\n```\n\nWhy: Saves future sessions from discovering these again.\n\n### 2. Gotchas and Non-Obvious Patterns\n\n```markdown\n## Gotchas\n\n- Tests must run sequentially (`--runInBand`) due to shared DB state\n- `yarn.lock` is authoritative; delete `node_modules` if deps mismatch\n```\n\nWhy: Prevents repeating debugging sessions.\n\n### 3. Package Relationships\n\n```markdown\n## Dependencies\n\nThe `auth` module depends on `crypto` being initialized first.\nImport order matters in `src/bootstrap.ts`.\n```\n\nWhy: Architecture knowledge that isn't obvious from code.\n\n### 4. Testing Approaches That Worked\n\n```markdown\n## Testing\n\nFor API endpoints: Use `supertest` with the test helper in `tests/setup.ts`\nMocking: Factory functions in `tests/factories/` (not inline mocks)\n```\n\nWhy: Establishes patterns that work.\n\n### 5. Configuration Quirks\n\n```markdown\n## Config\n\n- `NEXT_PUBLIC_*` vars must be set at build time, not runtime\n- Redis connection requires `?family=0` suffix for IPv6\n```\n\nWhy: Environment-specific knowledge.\n\n## What NOT to Add\n\n### 1. Obvious Code Info\n\nBad:\n```markdown\nThe `UserService` class handles user operations.\n```\n\nThe class name already tells us this.\n\n### 2. Generic Best Practices\n\nBad:\n```markdown\nAlways write tests for new features.\nUse meaningful variable names.\n```\n\nThis is universal advice, not project-specific.\n\n### 3. One-Off Fixes\n\nBad:\n```markdown\nWe fixed a bug in commit abc123 where the login button didn't work.\n```\n\nWon't recur; clutters the file.\n\n### 4. Verbose Explanations\n\nBad:\n```markdown\nThe authentication system uses JWT tokens. JWT (JSON Web Tokens) are\nan open standard (RFC 7519) that defines a compact and self-contained\nway for securely transmitting information between parties as a JSON\nobject. In our implementation, we use the HS256 algorithm which...\n```\n\nGood:\n```markdown\nAuth: JWT with HS256, tokens in `Authorization: Bearer <token>` header.\n```\n\n## Diff Format for Updates\n\nFor each suggested change:\n\n### 1. Identify the File\n\n```\nFile: ./CLAUDE.md\nSection: Commands (new section after ## Architecture)\n```\n\n### 2. Show the Change\n\n```diff\n ## Architecture\n ...\n\n+## Commands\n+\n+| Command | Purpose |\n+|---------|---------|\n+| `npm run dev` | Dev server with HMR |\n+| `npm run build` | Production build |\n+| `npm test` | Run test suite |\n```\n\n### 3. Explain Why\n\n> **Why this helps:** The build commands weren't documented, causing\n> confusion about how to run the project. This saves future sessions\n> from needing to inspect `package.json`.\n\n## Validation Checklist\n\nBefore finalizing an update, verify:\n\n- [ ] Each addition is project-specific\n- [ ] No generic advice or obvious info\n- [ ] Commands are tested and work\n- [ ] File paths are accurate\n- [ ] Would a new Claude session find this helpful?\n- [ ] Is this the most concise way to express the info?\n",
        "plugins/code-review/.claude-plugin/plugin.json": "{\n  \"name\": \"code-review\",\n  \"description\": \"Automated code review for pull requests using multiple specialized agents with confidence-based scoring\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n\n",
        "plugins/code-review/README.md": "# Code Review Plugin\n\nAutomated code review for pull requests using multiple specialized agents with confidence-based scoring to filter false positives.\n\n## Overview\n\nThe Code Review Plugin automates pull request review by launching multiple agents in parallel to independently audit changes from different perspectives. It uses confidence scoring to filter out false positives, ensuring only high-quality, actionable feedback is posted.\n\n## Commands\n\n### `/code-review`\n\nPerforms automated code review on a pull request using multiple specialized agents.\n\n**What it does:**\n1. Checks if review is needed (skips closed, draft, trivial, or already-reviewed PRs)\n2. Gathers relevant CLAUDE.md guideline files from the repository\n3. Summarizes the pull request changes\n4. Launches 4 parallel agents to independently review:\n   - **Agents #1 & #2**: Audit for CLAUDE.md compliance\n   - **Agent #3**: Scan for obvious bugs in changes\n   - **Agent #4**: Analyze git blame/history for context-based issues\n5. Scores each issue 0-100 for confidence level\n6. Filters out issues below 80 confidence threshold\n7. Posts review comment with high-confidence issues only\n\n**Usage:**\n```bash\n/code-review\n```\n\n**Example workflow:**\n```bash\n# On a PR branch, run:\n/code-review\n\n# Claude will:\n# - Launch 4 review agents in parallel\n# - Score each issue for confidence\n# - Post comment with issues ≥80 confidence\n# - Skip posting if no high-confidence issues found\n```\n\n**Features:**\n- Multiple independent agents for comprehensive review\n- Confidence-based scoring reduces false positives (threshold: 80)\n- CLAUDE.md compliance checking with explicit guideline verification\n- Bug detection focused on changes (not pre-existing issues)\n- Historical context analysis via git blame\n- Automatic skipping of closed, draft, or already-reviewed PRs\n- Links directly to code with full SHA and line ranges\n\n**Review comment format:**\n```markdown\n## Code review\n\nFound 3 issues:\n\n1. Missing error handling for OAuth callback (CLAUDE.md says \"Always handle OAuth errors\")\n\nhttps://github.com/owner/repo/blob/abc123.../src/auth.ts#L67-L72\n\n2. Memory leak: OAuth state not cleaned up (bug due to missing cleanup in finally block)\n\nhttps://github.com/owner/repo/blob/abc123.../src/auth.ts#L88-L95\n\n3. Inconsistent naming pattern (src/conventions/CLAUDE.md says \"Use camelCase for functions\")\n\nhttps://github.com/owner/repo/blob/abc123.../src/utils.ts#L23-L28\n```\n\n**Confidence scoring:**\n- **0**: Not confident, false positive\n- **25**: Somewhat confident, might be real\n- **50**: Moderately confident, real but minor\n- **75**: Highly confident, real and important\n- **100**: Absolutely certain, definitely real\n\n**False positives filtered:**\n- Pre-existing issues not introduced in PR\n- Code that looks like a bug but isn't\n- Pedantic nitpicks\n- Issues linters will catch\n- General quality issues (unless in CLAUDE.md)\n- Issues with lint ignore comments\n\n## Installation\n\nThis plugin is included in the Claude Code repository. The command is automatically available when using Claude Code.\n\n## Best Practices\n\n### Using `/code-review`\n- Maintain clear CLAUDE.md files for better compliance checking\n- Trust the 80+ confidence threshold - false positives are filtered\n- Run on all non-trivial pull requests\n- Review agent findings as a starting point for human review\n- Update CLAUDE.md based on recurring review patterns\n\n### When to use\n- All pull requests with meaningful changes\n- PRs touching critical code paths\n- PRs from multiple contributors\n- PRs where guideline compliance matters\n\n### When not to use\n- Closed or draft PRs (automatically skipped anyway)\n- Trivial automated PRs (automatically skipped)\n- Urgent hotfixes requiring immediate merge\n- PRs already reviewed (automatically skipped)\n\n## Workflow Integration\n\n### Standard PR review workflow:\n```bash\n# Create PR with changes\n/code-review\n\n# Review the automated feedback\n# Make any necessary fixes\n# Merge when ready\n```\n\n### As part of CI/CD:\n```bash\n# Trigger on PR creation or update\n# Automatically posts review comments\n# Skip if review already exists\n```\n\n## Requirements\n\n- Git repository with GitHub integration\n- GitHub CLI (`gh`) installed and authenticated\n- CLAUDE.md files (optional but recommended for guideline checking)\n\n## Troubleshooting\n\n### Review takes too long\n\n**Issue**: Agents are slow on large PRs\n\n**Solution**:\n- Normal for large changes - agents run in parallel\n- 4 independent agents ensure thoroughness\n- Consider splitting large PRs into smaller ones\n\n### Too many false positives\n\n**Issue**: Review flags issues that aren't real\n\n**Solution**:\n- Default threshold is 80 (already filters most false positives)\n- Make CLAUDE.md more specific about what matters\n- Consider if the flagged issue is actually valid\n\n### No review comment posted\n\n**Issue**: `/code-review` runs but no comment appears\n\n**Solution**:\nCheck if:\n- PR is closed (reviews skipped)\n- PR is draft (reviews skipped)\n- PR is trivial/automated (reviews skipped)\n- PR already has review (reviews skipped)\n- No issues scored ≥80 (no comment needed)\n\n### Link formatting broken\n\n**Issue**: Code links don't render correctly in GitHub\n\n**Solution**:\nLinks must follow this exact format:\n```\nhttps://github.com/owner/repo/blob/[full-sha]/path/file.ext#L[start]-L[end]\n```\n- Must use full SHA (not abbreviated)\n- Must use `#L` notation\n- Must include line range with at least 1 line of context\n\n### GitHub CLI not working\n\n**Issue**: `gh` commands fail\n\n**Solution**:\n- Install GitHub CLI: `brew install gh` (macOS) or see [GitHub CLI installation](https://cli.github.com/)\n- Authenticate: `gh auth login`\n- Verify repository has GitHub remote\n\n## Tips\n\n- **Write specific CLAUDE.md files**: Clear guidelines = better reviews\n- **Include context in PRs**: Helps agents understand intent\n- **Use confidence scores**: Issues ≥80 are usually correct\n- **Iterate on guidelines**: Update CLAUDE.md based on patterns\n- **Review automatically**: Set up as part of PR workflow\n- **Trust the filtering**: Threshold prevents noise\n\n## Configuration\n\n### Adjusting confidence threshold\n\nThe default threshold is 80. To adjust, modify the command file at `commands/code-review.md`:\n```markdown\nFilter out any issues with a score less than 80.\n```\n\nChange `80` to your preferred threshold (0-100).\n\n### Customizing review focus\n\nEdit `commands/code-review.md` to add or modify agent tasks:\n- Add security-focused agents\n- Add performance analysis agents\n- Add accessibility checking agents\n- Add documentation quality checks\n\n## Technical Details\n\n### Agent architecture\n- **2x CLAUDE.md compliance agents**: Redundancy for guideline checks\n- **1x bug detector**: Focused on obvious bugs in changes only\n- **1x history analyzer**: Context from git blame and history\n- **Nx confidence scorers**: One per issue for independent scoring\n\n### Scoring system\n- Each issue independently scored 0-100\n- Scoring considers evidence strength and verification\n- Threshold (default 80) filters low-confidence issues\n- For CLAUDE.md issues: verifies guideline explicitly mentions it\n\n### GitHub integration\nUses `gh` CLI for:\n- Viewing PR details and diffs\n- Fetching repository data\n- Reading git blame and history\n- Posting review comments\n\n## Author\n\nBoris Cherny (boris@anthropic.com)\n\n## Version\n\n1.0.0\n",
        "plugins/code-review/commands/code-review.md": "---\nallowed-tools: Bash(gh issue view:*), Bash(gh search:*), Bash(gh issue list:*), Bash(gh pr comment:*), Bash(gh pr diff:*), Bash(gh pr view:*), Bash(gh pr list:*)\ndescription: Code review a pull request\ndisable-model-invocation: false\n---\n\nProvide a code review for the given pull request.\n\nTo do this, follow these steps precisely:\n\n1. Use a Haiku agent to check if the pull request (a) is closed, (b) is a draft, (c) does not need a code review (eg. because it is an automated pull request, or is very simple and obviously ok), or (d) already has a code review from you from earlier. If so, do not proceed.\n2. Use another Haiku agent to give you a list of file paths to (but not the contents of) any relevant CLAUDE.md files from the codebase: the root CLAUDE.md file (if one exists), as well as any CLAUDE.md files in the directories whose files the pull request modified\n3. Use a Haiku agent to view the pull request, and ask the agent to return a summary of the change\n4. Then, launch 5 parallel Sonnet agents to independently code review the change. The agents should do the following, then return a list of issues and the reason each issue was flagged (eg. CLAUDE.md adherence, bug, historical git context, etc.):\n   a. Agent #1: Audit the changes to make sure they compily with the CLAUDE.md. Note that CLAUDE.md is guidance for Claude as it writes code, so not all instructions will be applicable during code review.\n   b. Agent #2: Read the file changes in the pull request, then do a shallow scan for obvious bugs. Avoid reading extra context beyond the changes, focusing just on the changes themselves. Focus on large bugs, and avoid small issues and nitpicks. Ignore likely false positives.\n   c. Agent #3: Read the git blame and history of the code modified, to identify any bugs in light of that historical context\n   d. Agent #4: Read previous pull requests that touched these files, and check for any comments on those pull requests that may also apply to the current pull request.\n   e. Agent #5: Read code comments in the modified files, and make sure the changes in the pull request comply with any guidance in the comments.\n5. For each issue found in #4, launch a parallel Haiku agent that takes the PR, issue description, and list of CLAUDE.md files (from step 2), and returns a score to indicate the agent's level of confidence for whether the issue is real or false positive. To do that, the agent should score each issue on a scale from 0-100, indicating its level of confidence. For issues that were flagged due to CLAUDE.md instructions, the agent should double check that the CLAUDE.md actually calls out that issue specifically. The scale is (give this rubric to the agent verbatim):\n   a. 0: Not confident at all. This is a false positive that doesn't stand up to light scrutiny, or is a pre-existing issue.\n   b. 25: Somewhat confident. This might be a real issue, but may also be a false positive. The agent wasn't able to verify that it's a real issue. If the issue is stylistic, it is one that was not explicitly called out in the relevant CLAUDE.md.\n   c. 50: Moderately confident. The agent was able to verify this is a real issue, but it might be a nitpick or not happen very often in practice. Relative to the rest of the PR, it's not very important.\n   d. 75: Highly confident. The agent double checked the issue, and verified that it is very likely it is a real issue that will be hit in practice. The existing approach in the PR is insufficient. The issue is very important and will directly impact the code's functionality, or it is an issue that is directly mentioned in the relevant CLAUDE.md.\n   e. 100: Absolutely certain. The agent double checked the issue, and confirmed that it is definitely a real issue, that will happen frequently in practice. The evidence directly confirms this.\n6. Filter out any issues with a score less than 80. If there are no issues that meet this criteria, do not proceed.\n7. Use a Haiku agent to repeat the eligibility check from #1, to make sure that the pull request is still eligible for code review.\n8. Finally, use the gh bash command to comment back on the pull request with the result. When writing your comment, keep in mind to:\n   a. Keep your output brief\n   b. Avoid emojis\n   c. Link and cite relevant code, files, and URLs\n\nExamples of false positives, for steps 4 and 5:\n\n- Pre-existing issues\n- Something that looks like a bug but is not actually a bug\n- Pedantic nitpicks that a senior engineer wouldn't call out\n- Issues that a linter, typechecker, or compiler would catch (eg. missing or incorrect imports, type errors, broken tests, formatting issues, pedantic style issues like newlines). No need to run these build steps yourself -- it is safe to assume that they will be run separately as part of CI.\n- General code quality issues (eg. lack of test coverage, general security issues, poor documentation), unless explicitly required in CLAUDE.md\n- Issues that are called out in CLAUDE.md, but explicitly silenced in the code (eg. due to a lint ignore comment)\n- Changes in functionality that are likely intentional or are directly related to the broader change\n- Real issues, but on lines that the user did not modify in their pull request\n\nNotes:\n\n- Do not check build signal or attempt to build or typecheck the app. These will run separately, and are not relevant to your code review.\n- Use `gh` to interact with Github (eg. to fetch a pull request, or to create inline comments), rather than web fetch\n- Make a todo list first\n- You must cite and link each bug (eg. if referring to a CLAUDE.md, you must link it)\n- For your final comment, follow the following format precisely (assuming for this example that you found 3 issues):\n\n---\n\n### Code review\n\nFound 3 issues:\n\n1. <brief description of bug> (CLAUDE.md says \"<...>\")\n\n<link to file and line with full sha1 + line range for context, note that you MUST provide the full sha and not use bash here, eg. https://github.com/anthropics/claude-code/blob/1d54823877c4de72b2316a64032a54afc404e619/README.md#L13-L17>\n\n2. <brief description of bug> (some/other/CLAUDE.md says \"<...>\")\n\n<link to file and line with full sha1 + line range for context>\n\n3. <brief description of bug> (bug due to <file and code snippet>)\n\n<link to file and line with full sha1 + line range for context>\n\n🤖 Generated with [Claude Code](https://claude.ai/code)\n\n<sub>- If this code review was useful, please react with 👍. Otherwise, react with 👎.</sub>\n\n---\n\n- Or, if you found no issues:\n\n---\n\n### Code review\n\nNo issues found. Checked for bugs and CLAUDE.md compliance.\n\n🤖 Generated with [Claude Code](https://claude.ai/code)\n\n- When linking to code, follow the following format precisely, otherwise the Markdown preview won't render correctly: https://github.com/anthropics/claude-cli-internal/blob/c21d3c10bc8e898b7ac1a2d745bdc9bc4e423afe/package.json#L10-L15\n  - Requires full git sha\n  - You must provide the full sha. Commands like `https://github.com/owner/repo/blob/$(git rev-parse HEAD)/foo/bar` will not work, since your comment will be directly rendered in Markdown.\n  - Repo name must match the repo you're code reviewing\n  - # sign after the file name\n  - Line range format is L[start]-L[end]\n  - Provide at least 1 line of context before and after, centered on the line you are commenting about (eg. if you are commenting about lines 5-6, you should link to `L4-7`)\n",
        "plugins/code-simplifier/.claude-plugin/plugin.json": "{\n  \"name\": \"code-simplifier\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Agent that simplifies and refines code for clarity, consistency, and maintainability while preserving functionality\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/code-simplifier/agents/code-simplifier.md": "---\nname: code-simplifier\ndescription: Simplifies and refines code for clarity, consistency, and maintainability while preserving all functionality. Focuses on recently modified code unless instructed otherwise.\nmodel: opus\n---\n\nYou are an expert code simplification specialist focused on enhancing code clarity, consistency, and maintainability while preserving exact functionality. Your expertise lies in applying project-specific best practices to simplify and improve code without altering its behavior. You prioritize readable, explicit code over overly compact solutions. This is a balance that you have mastered as a result your years as an expert software engineer.\n\nYou will analyze recently modified code and apply refinements that:\n\n1. **Preserve Functionality**: Never change what the code does - only how it does it. All original features, outputs, and behaviors must remain intact.\n\n2. **Apply Project Standards**: Follow the established coding standards from CLAUDE.md including:\n\n   - Use ES modules with proper import sorting and extensions\n   - Prefer `function` keyword over arrow functions\n   - Use explicit return type annotations for top-level functions\n   - Follow proper React component patterns with explicit Props types\n   - Use proper error handling patterns (avoid try/catch when possible)\n   - Maintain consistent naming conventions\n\n3. **Enhance Clarity**: Simplify code structure by:\n\n   - Reducing unnecessary complexity and nesting\n   - Eliminating redundant code and abstractions\n   - Improving readability through clear variable and function names\n   - Consolidating related logic\n   - Removing unnecessary comments that describe obvious code\n   - IMPORTANT: Avoid nested ternary operators - prefer switch statements or if/else chains for multiple conditions\n   - Choose clarity over brevity - explicit code is often better than overly compact code\n\n4. **Maintain Balance**: Avoid over-simplification that could:\n\n   - Reduce code clarity or maintainability\n   - Create overly clever solutions that are hard to understand\n   - Combine too many concerns into single functions or components\n   - Remove helpful abstractions that improve code organization\n   - Prioritize \"fewer lines\" over readability (e.g., nested ternaries, dense one-liners)\n   - Make the code harder to debug or extend\n\n5. **Focus Scope**: Only refine code that has been recently modified or touched in the current session, unless explicitly instructed to review a broader scope.\n\nYour refinement process:\n\n1. Identify the recently modified code sections\n2. Analyze for opportunities to improve elegance and consistency\n3. Apply project-specific best practices and coding standards\n4. Ensure all functionality remains unchanged\n5. Verify the refined code is simpler and more maintainable\n6. Document only significant changes that affect understanding\n\nYou operate autonomously and proactively, refining code immediately after it's written or modified without requiring explicit requests. Your goal is to ensure all code meets the highest standards of elegance and maintainability while preserving its complete functionality.\n",
        "plugins/commit-commands/.claude-plugin/plugin.json": "{\n  \"name\": \"commit-commands\",\n  \"description\": \"Streamline your git workflow with simple commands for committing, pushing, and creating pull requests\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n\n",
        "plugins/commit-commands/README.md": "# Commit Commands Plugin\n\nStreamline your git workflow with simple commands for committing, pushing, and creating pull requests.\n\n## Overview\n\nThe Commit Commands Plugin automates common git operations, reducing context switching and manual command execution. Instead of running multiple git commands, use a single slash command to handle your entire workflow.\n\n## Commands\n\n### `/commit`\n\nCreates a git commit with an automatically generated commit message based on staged and unstaged changes.\n\n**What it does:**\n1. Analyzes current git status\n2. Reviews both staged and unstaged changes\n3. Examines recent commit messages to match your repository's style\n4. Drafts an appropriate commit message\n5. Stages relevant files\n6. Creates the commit\n\n**Usage:**\n```bash\n/commit\n```\n\n**Example workflow:**\n```bash\n# Make some changes to your code\n# Then simply run:\n/commit\n\n# Claude will:\n# - Review your changes\n# - Stage the files\n# - Create a commit with an appropriate message\n# - Show you the commit status\n```\n\n**Features:**\n- Automatically drafts commit messages that match your repo's style\n- Follows conventional commit practices\n- Avoids committing files with secrets (.env, credentials.json)\n- Includes Claude Code attribution in commit message\n\n### `/commit-push-pr`\n\nComplete workflow command that commits, pushes, and creates a pull request in one step.\n\n**What it does:**\n1. Creates a new branch (if currently on main)\n2. Stages and commits changes with an appropriate message\n3. Pushes the branch to origin\n4. Creates a pull request using `gh pr create`\n5. Provides the PR URL\n\n**Usage:**\n```bash\n/commit-push-pr\n```\n\n**Example workflow:**\n```bash\n# Make your changes\n# Then run:\n/commit-push-pr\n\n# Claude will:\n# - Create a feature branch (if needed)\n# - Commit your changes\n# - Push to remote\n# - Open a PR with summary and test plan\n# - Give you the PR URL to review\n```\n\n**Features:**\n- Analyzes all commits in the branch (not just the latest)\n- Creates comprehensive PR descriptions with:\n  - Summary of changes (1-3 bullet points)\n  - Test plan checklist\n  - Claude Code attribution\n- Handles branch creation automatically\n- Uses GitHub CLI (`gh`) for PR creation\n\n**Requirements:**\n- GitHub CLI (`gh`) must be installed and authenticated\n- Repository must have a remote named `origin`\n\n### `/clean_gone`\n\nCleans up local branches that have been deleted from the remote repository.\n\n**What it does:**\n1. Lists all local branches to identify [gone] status\n2. Identifies and removes worktrees associated with [gone] branches\n3. Deletes all branches marked as [gone]\n4. Provides feedback on removed branches\n\n**Usage:**\n```bash\n/clean_gone\n```\n\n**Example workflow:**\n```bash\n# After PRs are merged and remote branches are deleted\n/clean_gone\n\n# Claude will:\n# - Find all branches marked as [gone]\n# - Remove any associated worktrees\n# - Delete the stale local branches\n# - Report what was cleaned up\n```\n\n**Features:**\n- Handles both regular branches and worktree branches\n- Safely removes worktrees before deleting branches\n- Shows clear feedback about what was removed\n- Reports if no cleanup was needed\n\n**When to use:**\n- After merging and deleting remote branches\n- When your local branch list is cluttered with stale branches\n- During regular repository maintenance\n\n## Installation\n\nThis plugin is included in the Claude Code repository. The commands are automatically available when using Claude Code.\n\n## Best Practices\n\n### Using `/commit`\n- Review the staged changes before committing\n- Let Claude analyze your changes and match your repo's commit style\n- Trust the automated message, but verify it's accurate\n- Use for routine commits during development\n\n### Using `/commit-push-pr`\n- Use when you're ready to create a PR\n- Ensure all your changes are complete and tested\n- Claude will analyze the full branch history for the PR description\n- Review the PR description and edit if needed\n- Use when you want to minimize context switching\n\n### Using `/clean_gone`\n- Run periodically to keep your branch list clean\n- Especially useful after merging multiple PRs\n- Safe to run - only removes branches already deleted remotely\n- Helps maintain a tidy local repository\n\n## Workflow Integration\n\n### Quick commit workflow:\n```bash\n# Write code\n/commit\n# Continue development\n```\n\n### Feature branch workflow:\n```bash\n# Develop feature across multiple commits\n/commit  # First commit\n# More changes\n/commit  # Second commit\n# Ready to create PR\n/commit-push-pr\n```\n\n### Maintenance workflow:\n```bash\n# After several PRs are merged\n/clean_gone\n# Clean workspace ready for next feature\n```\n\n## Requirements\n\n- Git must be installed and configured\n- For `/commit-push-pr`: GitHub CLI (`gh`) must be installed and authenticated\n- Repository must be a git repository with a remote\n\n## Troubleshooting\n\n### `/commit` creates empty commit\n\n**Issue**: No changes to commit\n\n**Solution**:\n- Ensure you have unstaged or staged changes\n- Run `git status` to verify changes exist\n\n### `/commit-push-pr` fails to create PR\n\n**Issue**: `gh pr create` command fails\n\n**Solution**:\n- Install GitHub CLI: `brew install gh` (macOS) or see [GitHub CLI installation](https://cli.github.com/)\n- Authenticate: `gh auth login`\n- Ensure repository has a GitHub remote\n\n### `/clean_gone` doesn't find branches\n\n**Issue**: No branches marked as [gone]\n\n**Solution**:\n- Run `git fetch --prune` to update remote tracking\n- Branches must be deleted from the remote to show as [gone]\n\n## Tips\n\n- **Combine with other tools**: Use `/commit` during development, then `/commit-push-pr` when ready\n- **Let Claude draft messages**: The commit message analysis learns from your repo's style\n- **Regular cleanup**: Run `/clean_gone` weekly to maintain a clean branch list\n- **Review before pushing**: Always review the commit message and changes before pushing\n\n## Author\n\nAnthropic (support@anthropic.com)\n\n## Version\n\n1.0.0\n",
        "plugins/commit-commands/commands/clean_gone.md": "---\ndescription: Cleans up all git branches marked as [gone] (branches that have been deleted on the remote but still exist locally), including removing associated worktrees.\n---\n\n## Your Task\n\nYou need to execute the following bash commands to clean up stale local branches that have been deleted from the remote repository.\n\n## Commands to Execute\n\n1. **First, list branches to identify any with [gone] status**\n   Execute this command:\n   ```bash\n   git branch -v\n   ```\n   \n   Note: Branches with a '+' prefix have associated worktrees and must have their worktrees removed before deletion.\n\n2. **Next, identify worktrees that need to be removed for [gone] branches**\n   Execute this command:\n   ```bash\n   git worktree list\n   ```\n\n3. **Finally, remove worktrees and delete [gone] branches (handles both regular and worktree branches)**\n   Execute this command:\n   ```bash\n   # Process all [gone] branches, removing '+' prefix if present\n   git branch -v | grep '\\[gone\\]' | sed 's/^[+* ]//' | awk '{print $1}' | while read branch; do\n     echo \"Processing branch: $branch\"\n     # Find and remove worktree if it exists\n     worktree=$(git worktree list | grep \"\\\\[$branch\\\\]\" | awk '{print $1}')\n     if [ ! -z \"$worktree\" ] && [ \"$worktree\" != \"$(git rev-parse --show-toplevel)\" ]; then\n       echo \"  Removing worktree: $worktree\"\n       git worktree remove --force \"$worktree\"\n     fi\n     # Delete the branch\n     echo \"  Deleting branch: $branch\"\n     git branch -D \"$branch\"\n   done\n   ```\n\n## Expected Behavior\n\nAfter executing these commands, you will:\n\n- See a list of all local branches with their status\n- Identify and remove any worktrees associated with [gone] branches\n- Delete all branches marked as [gone]\n- Provide feedback on which worktrees and branches were removed\n\nIf no branches are marked as [gone], report that no cleanup was needed.\n\n",
        "plugins/commit-commands/commands/commit-push-pr.md": "---\nallowed-tools: Bash(git checkout --branch:*), Bash(git add:*), Bash(git status:*), Bash(git push:*), Bash(git commit:*), Bash(gh pr create:*)\ndescription: Commit, push, and open a PR\n---\n\n## Context\n\n- Current git status: !`git status`\n- Current git diff (staged and unstaged changes): !`git diff HEAD`\n- Current branch: !`git branch --show-current`\n\n## Your task\n\nBased on the above changes:\n\n1. Create a new branch if on main\n2. Create a single commit with an appropriate message\n3. Push the branch to origin\n4. Create a pull request using `gh pr create`\n5. You have the capability to call multiple tools in a single response. You MUST do all of the above in a single message. Do not use any other tools or do anything else. Do not send any other text or messages besides these tool calls.\n",
        "plugins/commit-commands/commands/commit.md": "---\nallowed-tools: Bash(git add:*), Bash(git status:*), Bash(git commit:*)\ndescription: Create a git commit\n---\n\n## Context\n\n- Current git status: !`git status`\n- Current git diff (staged and unstaged changes): !`git diff HEAD`\n- Current branch: !`git branch --show-current`\n- Recent commits: !`git log --oneline -10`\n\n## Your task\n\nBased on the above changes, create a single git commit.\n\nYou have the capability to call multiple tools in a single response. Stage and create the commit using a single message. Do not use any other tools or do anything else. Do not send any other text or messages besides these tool calls.\n",
        "plugins/csharp-lsp/README.md": "# csharp-lsp\n\nC# language server for Claude Code, providing code intelligence and diagnostics.\n\n## Supported Extensions\n`.cs`\n\n## Installation\n\n### Via .NET tool (recommended)\n```bash\ndotnet tool install --global csharp-ls\n```\n\n### Via Homebrew (macOS)\n```bash\nbrew install csharp-ls\n```\n\n## Requirements\n- .NET SDK 6.0 or later\n\n## More Information\n- [csharp-ls GitHub](https://github.com/razzmatazz/csharp-language-server)\n- [.NET SDK Download](https://dotnet.microsoft.com/download)\n",
        "plugins/explanatory-output-style/.claude-plugin/plugin.json": "{\n  \"name\": \"explanatory-output-style\",\n  \"description\": \"Adds educational insights about implementation choices and codebase patterns (mimics the deprecated Explanatory output style)\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/explanatory-output-style/README.md": "# Explanatory Output Style Plugin\n\nThis plugin recreates the deprecated Explanatory output style as a SessionStart\nhook.\n\nWARNING: Do not install this plugin unless you are fine with incurring the token\ncost of this plugin's additional instructions and output.\n\n## What it does\n\nWhen enabled, this plugin automatically adds instructions at the start of each\nsession that encourage Claude to:\n\n1. Provide educational insights about implementation choices\n2. Explain codebase patterns and decisions\n3. Balance task completion with learning opportunities\n\n## How it works\n\nThe plugin uses a SessionStart hook to inject additional context into every\nsession. This context instructs Claude to provide brief educational explanations\nbefore and after writing code, formatted as:\n\n```\n`★ Insight ─────────────────────────────────────`\n[2-3 key educational points]\n`─────────────────────────────────────────────────`\n```\n\n## Usage\n\nOnce installed, the plugin activates automatically at the start of every\nsession. No additional configuration is needed.\n\nThe insights focus on:\n\n- Specific implementation choices for your codebase\n- Patterns and conventions in your code\n- Trade-offs and design decisions\n- Codebase-specific details rather than general programming concepts\n\n## Migration from Output Styles\n\nThis plugin replaces the deprecated \"Explanatory\" output style setting. If you\npreviously used:\n\n```json\n{\n  \"outputStyle\": \"Explanatory\"\n}\n```\n\nYou can now achieve the same behavior by installing this plugin instead.\n\nMore generally, this SessionStart hook pattern is roughly equivalent to\nCLAUDE.md, but it is more flexible and allows for distribution through plugins.\n\nNote: Output styles that involve tasks besides software development, are better\nexpressed as\n[subagents](https://docs.claude.com/en/docs/claude-code/sub-agents), not as\nSessionStart hooks. Subagents change the system prompt while SessionStart hooks\nadd to the default system prompt.\n\n## Managing changes\n\n- Disable the plugin - keep the code installed on your device\n- Uninstall the plugin - remove the code from your device\n- Update the plugin - create a local copy of this plugin to personalize this\n  plugin\n  - Hint: Ask Claude to read\n    https://docs.claude.com/en/docs/claude-code/plugins.md and set it up for\n    you!\n",
        "plugins/explanatory-output-style/hooks/hooks.json": "{\n  \"description\": \"Explanatory mode hook that adds educational insights instructions\",\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks-handlers/session-start.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/feature-dev/.claude-plugin/plugin.json": "{\n  \"name\": \"feature-dev\",\n  \"description\": \"Comprehensive feature development workflow with specialized agents for codebase exploration, architecture design, and quality review\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/feature-dev/README.md": "# Feature Development Plugin\n\nA comprehensive, structured workflow for feature development with specialized agents for codebase exploration, architecture design, and quality review.\n\n## Overview\n\nThe Feature Development Plugin provides a systematic 7-phase approach to building new features. Instead of jumping straight into code, it guides you through understanding the codebase, asking clarifying questions, designing architecture, and ensuring quality—resulting in better-designed features that integrate seamlessly with your existing code.\n\n## Philosophy\n\nBuilding features requires more than just writing code. You need to:\n- **Understand the codebase** before making changes\n- **Ask questions** to clarify ambiguous requirements\n- **Design thoughtfully** before implementing\n- **Review for quality** after building\n\nThis plugin embeds these practices into a structured workflow that runs automatically when you use the `/feature-dev` command.\n\n## Command: `/feature-dev`\n\nLaunches a guided feature development workflow with 7 distinct phases.\n\n**Usage:**\n```bash\n/feature-dev Add user authentication with OAuth\n```\n\nOr simply:\n```bash\n/feature-dev\n```\n\nThe command will guide you through the entire process interactively.\n\n## The 7-Phase Workflow\n\n### Phase 1: Discovery\n\n**Goal**: Understand what needs to be built\n\n**What happens:**\n- Clarifies the feature request if it's unclear\n- Asks what problem you're solving\n- Identifies constraints and requirements\n- Summarizes understanding and confirms with you\n\n**Example:**\n```\nYou: /feature-dev Add caching\nClaude: Let me understand what you need...\n        - What should be cached? (API responses, computed values, etc.)\n        - What are your performance requirements?\n        - Do you have a preferred caching solution?\n```\n\n### Phase 2: Codebase Exploration\n\n**Goal**: Understand relevant existing code and patterns\n\n**What happens:**\n- Launches 2-3 `code-explorer` agents in parallel\n- Each agent explores different aspects (similar features, architecture, UI patterns)\n- Agents return comprehensive analyses with key files to read\n- Claude reads all identified files to build deep understanding\n- Presents comprehensive summary of findings\n\n**Agents launched:**\n- \"Find features similar to [feature] and trace implementation\"\n- \"Map the architecture and abstractions for [area]\"\n- \"Analyze current implementation of [related feature]\"\n\n**Example output:**\n```\nFound similar features:\n- User authentication (src/auth/): Uses JWT tokens, middleware pattern\n- Session management (src/session/): Redis-backed, 24hr expiry\n- API security (src/api/middleware/): Rate limiting, CORS\n\nKey files to understand:\n- src/auth/AuthService.ts:45 - Core authentication logic\n- src/middleware/authMiddleware.ts:12 - Request authentication\n- src/config/security.ts:8 - Security configuration\n```\n\n### Phase 3: Clarifying Questions\n\n**Goal**: Fill in gaps and resolve all ambiguities\n\n**What happens:**\n- Reviews codebase findings and feature request\n- Identifies underspecified aspects:\n  - Edge cases\n  - Error handling\n  - Integration points\n  - Backward compatibility\n  - Performance needs\n- Presents all questions in an organized list\n- **Waits for your answers before proceeding**\n\n**Example:**\n```\nBefore designing the architecture, I need to clarify:\n\n1. OAuth provider: Which OAuth providers? (Google, GitHub, custom?)\n2. User data: Store OAuth tokens or just user profile?\n3. Existing auth: Replace current auth or add alongside?\n4. Sessions: Integrate with existing session management?\n5. Error handling: How to handle OAuth failures?\n```\n\n**Critical**: This phase ensures nothing is ambiguous before design begins.\n\n### Phase 4: Architecture Design\n\n**Goal**: Design multiple implementation approaches\n\n**What happens:**\n- Launches 2-3 `code-architect` agents with different focuses:\n  - **Minimal changes**: Smallest change, maximum reuse\n  - **Clean architecture**: Maintainability, elegant abstractions\n  - **Pragmatic balance**: Speed + quality\n- Reviews all approaches\n- Forms opinion on which fits best for this task\n- Presents comparison with trade-offs and recommendation\n- **Asks which approach you prefer**\n\n**Example output:**\n```\nI've designed 3 approaches:\n\nApproach 1: Minimal Changes\n- Extend existing AuthService with OAuth methods\n- Add new OAuth routes to existing auth router\n- Minimal refactoring required\nPros: Fast, low risk\nCons: Couples OAuth to existing auth, harder to test\n\nApproach 2: Clean Architecture\n- New OAuthService with dedicated interface\n- Separate OAuth router and middleware\n- Refactor AuthService to use common interface\nPros: Clean separation, testable, maintainable\nCons: More files, more refactoring\n\nApproach 3: Pragmatic Balance\n- New OAuthProvider abstraction\n- Integrate into existing AuthService\n- Minimal refactoring, good boundaries\nPros: Balanced complexity and cleanliness\nCons: Some coupling remains\n\nRecommendation: Approach 3 - gives you clean boundaries without\nexcessive refactoring, and fits your existing architecture well.\n\nWhich approach would you like to use?\n```\n\n### Phase 5: Implementation\n\n**Goal**: Build the feature\n\n**What happens:**\n- **Waits for explicit approval** before starting\n- Reads all relevant files identified in previous phases\n- Implements following chosen architecture\n- Follows codebase conventions strictly\n- Writes clean, well-documented code\n- Updates todos as progress is made\n\n**Notes:**\n- Implementation only starts after you approve\n- Follows patterns discovered in Phase 2\n- Uses architecture designed in Phase 4\n- Continuously tracks progress\n\n### Phase 6: Quality Review\n\n**Goal**: Ensure code is simple, DRY, elegant, and functionally correct\n\n**What happens:**\n- Launches 3 `code-reviewer` agents in parallel with different focuses:\n  - **Simplicity/DRY/Elegance**: Code quality and maintainability\n  - **Bugs/Correctness**: Functional correctness and logic errors\n  - **Conventions/Abstractions**: Project standards and patterns\n- Consolidates findings\n- Identifies highest severity issues\n- **Presents findings and asks what you want to do**:\n  - Fix now\n  - Fix later\n  - Proceed as-is\n- Addresses issues based on your decision\n\n**Example output:**\n```\nCode Review Results:\n\nHigh Priority Issues:\n1. Missing error handling in OAuth callback (src/auth/oauth.ts:67)\n2. Memory leak: OAuth state not cleaned up (src/auth/oauth.ts:89)\n\nMedium Priority:\n1. Could simplify token refresh logic (src/auth/oauth.ts:120)\n2. Consider extracting OAuth config validation\n\nAll tests pass. Code follows project conventions.\n\nWhat would you like to do?\n```\n\n### Phase 7: Summary\n\n**Goal**: Document what was accomplished\n\n**What happens:**\n- Marks all todos complete\n- Summarizes:\n  - What was built\n  - Key decisions made\n  - Files modified\n  - Suggested next steps\n\n**Example:**\n```\nFeature Complete: OAuth Authentication\n\nWhat was built:\n- OAuth provider abstraction supporting Google and GitHub\n- OAuth routes and middleware integrated with existing auth\n- Token refresh and session integration\n- Error handling for all OAuth flows\n\nKey decisions:\n- Used pragmatic approach with OAuthProvider abstraction\n- Integrated with existing session management\n- Added OAuth state to prevent CSRF\n\nFiles modified:\n- src/auth/OAuthProvider.ts (new)\n- src/auth/AuthService.ts\n- src/routes/auth.ts\n- src/middleware/authMiddleware.ts\n\nSuggested next steps:\n- Add tests for OAuth flows\n- Add more OAuth providers (Microsoft, Apple)\n- Update documentation\n```\n\n## Agents\n\n### `code-explorer`\n\n**Purpose**: Deeply analyzes existing codebase features by tracing execution paths\n\n**Focus areas:**\n- Entry points and call chains\n- Data flow and transformations\n- Architecture layers and patterns\n- Dependencies and integrations\n- Implementation details\n\n**When triggered:**\n- Automatically in Phase 2\n- Can be invoked manually when exploring code\n\n**Output:**\n- Entry points with file:line references\n- Step-by-step execution flow\n- Key components and responsibilities\n- Architecture insights\n- List of essential files to read\n\n### `code-architect`\n\n**Purpose**: Designs feature architectures and implementation blueprints\n\n**Focus areas:**\n- Codebase pattern analysis\n- Architecture decisions\n- Component design\n- Implementation roadmap\n- Data flow and build sequence\n\n**When triggered:**\n- Automatically in Phase 4\n- Can be invoked manually for architecture design\n\n**Output:**\n- Patterns and conventions found\n- Architecture decision with rationale\n- Complete component design\n- Implementation map with specific files\n- Build sequence with phases\n\n### `code-reviewer`\n\n**Purpose**: Reviews code for bugs, quality issues, and project conventions\n\n**Focus areas:**\n- Project guideline compliance (CLAUDE.md)\n- Bug detection\n- Code quality issues\n- Confidence-based filtering (only reports high-confidence issues ≥80)\n\n**When triggered:**\n- Automatically in Phase 6\n- Can be invoked manually after writing code\n\n**Output:**\n- Critical issues (confidence 75-100)\n- Important issues (confidence 50-74)\n- Specific fixes with file:line references\n- Project guideline references\n\n## Usage Patterns\n\n### Full workflow (recommended for new features):\n```bash\n/feature-dev Add rate limiting to API endpoints\n```\n\nLet the workflow guide you through all 7 phases.\n\n### Manual agent invocation:\n\n**Explore a feature:**\n```\n\"Launch code-explorer to trace how authentication works\"\n```\n\n**Design architecture:**\n```\n\"Launch code-architect to design the caching layer\"\n```\n\n**Review code:**\n```\n\"Launch code-reviewer to check my recent changes\"\n```\n\n## Best Practices\n\n1. **Use the full workflow for complex features**: The 7 phases ensure thorough planning\n2. **Answer clarifying questions thoughtfully**: Phase 3 prevents future confusion\n3. **Choose architecture deliberately**: Phase 4 gives you options for a reason\n4. **Don't skip code review**: Phase 6 catches issues before they reach production\n5. **Read the suggested files**: Phase 2 identifies key files—read them to understand context\n\n## When to Use This Plugin\n\n**Use for:**\n- New features that touch multiple files\n- Features requiring architectural decisions\n- Complex integrations with existing code\n- Features where requirements are somewhat unclear\n\n**Don't use for:**\n- Single-line bug fixes\n- Trivial changes\n- Well-defined, simple tasks\n- Urgent hotfixes\n\n## Requirements\n\n- Claude Code installed\n- Git repository (for code review)\n- Project with existing codebase (workflow assumes existing code to learn from)\n\n## Troubleshooting\n\n### Agents take too long\n\n**Issue**: Code exploration or architecture agents are slow\n\n**Solution**:\n- This is normal for large codebases\n- Agents run in parallel when possible\n- The thoroughness pays off in better understanding\n\n### Too many clarifying questions\n\n**Issue**: Phase 3 asks too many questions\n\n**Solution**:\n- Be more specific in your initial feature request\n- Provide context about constraints upfront\n- Say \"whatever you think is best\" if truly no preference\n\n### Architecture options overwhelming\n\n**Issue**: Too many architecture options in Phase 4\n\n**Solution**:\n- Trust the recommendation—it's based on codebase analysis\n- If still unsure, ask for more explanation\n- Pick the pragmatic option when in doubt\n\n## Tips\n\n- **Be specific in your feature request**: More detail = fewer clarifying questions\n- **Trust the process**: Each phase builds on the previous one\n- **Review agent outputs**: Agents provide valuable insights about your codebase\n- **Don't skip phases**: Each phase serves a purpose\n- **Use for learning**: The exploration phase teaches you about your own codebase\n\n## Author\n\nSid Bidasaria (sbidasaria@anthropic.com)\n\n## Version\n\n1.0.0\n",
        "plugins/feature-dev/agents/code-architect.md": "---\nname: code-architect\ndescription: Designs feature architectures by analyzing existing codebase patterns and conventions, then providing comprehensive implementation blueprints with specific files to create/modify, component designs, data flows, and build sequences\ntools: Glob, Grep, LS, Read, NotebookRead, WebFetch, TodoWrite, WebSearch, KillShell, BashOutput\nmodel: sonnet\ncolor: green\n---\n\nYou are a senior software architect who delivers comprehensive, actionable architecture blueprints by deeply understanding codebases and making confident architectural decisions.\n\n## Core Process\n\n**1. Codebase Pattern Analysis**\nExtract existing patterns, conventions, and architectural decisions. Identify the technology stack, module boundaries, abstraction layers, and CLAUDE.md guidelines. Find similar features to understand established approaches.\n\n**2. Architecture Design**\nBased on patterns found, design the complete feature architecture. Make decisive choices - pick one approach and commit. Ensure seamless integration with existing code. Design for testability, performance, and maintainability.\n\n**3. Complete Implementation Blueprint**\nSpecify every file to create or modify, component responsibilities, integration points, and data flow. Break implementation into clear phases with specific tasks.\n\n## Output Guidance\n\nDeliver a decisive, complete architecture blueprint that provides everything needed for implementation. Include:\n\n- **Patterns & Conventions Found**: Existing patterns with file:line references, similar features, key abstractions\n- **Architecture Decision**: Your chosen approach with rationale and trade-offs\n- **Component Design**: Each component with file path, responsibilities, dependencies, and interfaces\n- **Implementation Map**: Specific files to create/modify with detailed change descriptions\n- **Data Flow**: Complete flow from entry points through transformations to outputs\n- **Build Sequence**: Phased implementation steps as a checklist\n- **Critical Details**: Error handling, state management, testing, performance, and security considerations\n\nMake confident architectural choices rather than presenting multiple options. Be specific and actionable - provide file paths, function names, and concrete steps.\n",
        "plugins/feature-dev/agents/code-explorer.md": "---\nname: code-explorer\ndescription: Deeply analyzes existing codebase features by tracing execution paths, mapping architecture layers, understanding patterns and abstractions, and documenting dependencies to inform new development\ntools: Glob, Grep, LS, Read, NotebookRead, WebFetch, TodoWrite, WebSearch, KillShell, BashOutput\nmodel: sonnet\ncolor: yellow\n---\n\nYou are an expert code analyst specializing in tracing and understanding feature implementations across codebases.\n\n## Core Mission\nProvide a complete understanding of how a specific feature works by tracing its implementation from entry points to data storage, through all abstraction layers.\n\n## Analysis Approach\n\n**1. Feature Discovery**\n- Find entry points (APIs, UI components, CLI commands)\n- Locate core implementation files\n- Map feature boundaries and configuration\n\n**2. Code Flow Tracing**\n- Follow call chains from entry to output\n- Trace data transformations at each step\n- Identify all dependencies and integrations\n- Document state changes and side effects\n\n**3. Architecture Analysis**\n- Map abstraction layers (presentation → business logic → data)\n- Identify design patterns and architectural decisions\n- Document interfaces between components\n- Note cross-cutting concerns (auth, logging, caching)\n\n**4. Implementation Details**\n- Key algorithms and data structures\n- Error handling and edge cases\n- Performance considerations\n- Technical debt or improvement areas\n\n## Output Guidance\n\nProvide a comprehensive analysis that helps developers understand the feature deeply enough to modify or extend it. Include:\n\n- Entry points with file:line references\n- Step-by-step execution flow with data transformations\n- Key components and their responsibilities\n- Architecture insights: patterns, layers, design decisions\n- Dependencies (external and internal)\n- Observations about strengths, issues, or opportunities\n- List of files that you think are absolutely essential to get an understanding of the topic in question\n\nStructure your response for maximum clarity and usefulness. Always include specific file paths and line numbers.\n",
        "plugins/feature-dev/agents/code-reviewer.md": "---\nname: code-reviewer\ndescription: Reviews code for bugs, logic errors, security vulnerabilities, code quality issues, and adherence to project conventions, using confidence-based filtering to report only high-priority issues that truly matter\ntools: Glob, Grep, LS, Read, NotebookRead, WebFetch, TodoWrite, WebSearch, KillShell, BashOutput\nmodel: sonnet\ncolor: red\n---\n\nYou are an expert code reviewer specializing in modern software development across multiple languages and frameworks. Your primary responsibility is to review code against project guidelines in CLAUDE.md with high precision to minimize false positives.\n\n## Review Scope\n\nBy default, review unstaged changes from `git diff`. The user may specify different files or scope to review.\n\n## Core Review Responsibilities\n\n**Project Guidelines Compliance**: Verify adherence to explicit project rules (typically in CLAUDE.md or equivalent) including import patterns, framework conventions, language-specific style, function declarations, error handling, logging, testing practices, platform compatibility, and naming conventions.\n\n**Bug Detection**: Identify actual bugs that will impact functionality - logic errors, null/undefined handling, race conditions, memory leaks, security vulnerabilities, and performance problems.\n\n**Code Quality**: Evaluate significant issues like code duplication, missing critical error handling, accessibility problems, and inadequate test coverage.\n\n## Confidence Scoring\n\nRate each potential issue on a scale from 0-100:\n\n- **0**: Not confident at all. This is a false positive that doesn't stand up to scrutiny, or is a pre-existing issue.\n- **25**: Somewhat confident. This might be a real issue, but may also be a false positive. If stylistic, it wasn't explicitly called out in project guidelines.\n- **50**: Moderately confident. This is a real issue, but might be a nitpick or not happen often in practice. Not very important relative to the rest of the changes.\n- **75**: Highly confident. Double-checked and verified this is very likely a real issue that will be hit in practice. The existing approach is insufficient. Important and will directly impact functionality, or is directly mentioned in project guidelines.\n- **100**: Absolutely certain. Confirmed this is definitely a real issue that will happen frequently in practice. The evidence directly confirms this.\n\n**Only report issues with confidence ≥ 80.** Focus on issues that truly matter - quality over quantity.\n\n## Output Guidance\n\nStart by clearly stating what you're reviewing. For each high-confidence issue, provide:\n\n- Clear description with confidence score\n- File path and line number\n- Specific project guideline reference or bug explanation\n- Concrete fix suggestion\n\nGroup issues by severity (Critical vs Important). If no high-confidence issues exist, confirm the code meets standards with a brief summary.\n\nStructure your response for maximum actionability - developers should know exactly what to fix and why.\n",
        "plugins/feature-dev/commands/feature-dev.md": "---\ndescription: Guided feature development with codebase understanding and architecture focus\nargument-hint: Optional feature description\n---\n\n# Feature Development\n\nYou are helping a developer implement a new feature. Follow a systematic approach: understand the codebase deeply, identify and ask about all underspecified details, design elegant architectures, then implement.\n\n## Core Principles\n\n- **Ask clarifying questions**: Identify all ambiguities, edge cases, and underspecified behaviors. Ask specific, concrete questions rather than making assumptions. Wait for user answers before proceeding with implementation. Ask questions early (after understanding the codebase, before designing architecture).\n- **Understand before acting**: Read and comprehend existing code patterns first\n- **Read files identified by agents**: When launching agents, ask them to return lists of the most important files to read. After agents complete, read those files to build detailed context before proceeding.\n- **Simple and elegant**: Prioritize readable, maintainable, architecturally sound code\n- **Use TodoWrite**: Track all progress throughout\n\n---\n\n## Phase 1: Discovery\n\n**Goal**: Understand what needs to be built\n\nInitial request: $ARGUMENTS\n\n**Actions**:\n1. Create todo list with all phases\n2. If feature unclear, ask user for:\n   - What problem are they solving?\n   - What should the feature do?\n   - Any constraints or requirements?\n3. Summarize understanding and confirm with user\n\n---\n\n## Phase 2: Codebase Exploration\n\n**Goal**: Understand relevant existing code and patterns at both high and low levels\n\n**Actions**:\n1. Launch 2-3 code-explorer agents in parallel. Each agent should:\n   - Trace through the code comprehensively and focus on getting a comprehensive understanding of abstractions, architecture and flow of control\n   - Target a different aspect of the codebase (eg. similar features, high level understanding, architectural understanding, user experience, etc)\n   - Include a list of 5-10 key files to read\n\n   **Example agent prompts**:\n   - \"Find features similar to [feature] and trace through their implementation comprehensively\"\n   - \"Map the architecture and abstractions for [feature area], tracing through the code comprehensively\"\n   - \"Analyze the current implementation of [existing feature/area], tracing through the code comprehensively\"\n   - \"Identify UI patterns, testing approaches, or extension points relevant to [feature]\"\n\n2. Once the agents return, please read all files identified by agents to build deep understanding\n3. Present comprehensive summary of findings and patterns discovered\n\n---\n\n## Phase 3: Clarifying Questions\n\n**Goal**: Fill in gaps and resolve all ambiguities before designing\n\n**CRITICAL**: This is one of the most important phases. DO NOT SKIP.\n\n**Actions**:\n1. Review the codebase findings and original feature request\n2. Identify underspecified aspects: edge cases, error handling, integration points, scope boundaries, design preferences, backward compatibility, performance needs\n3. **Present all questions to the user in a clear, organized list**\n4. **Wait for answers before proceeding to architecture design**\n\nIf the user says \"whatever you think is best\", provide your recommendation and get explicit confirmation.\n\n---\n\n## Phase 4: Architecture Design\n\n**Goal**: Design multiple implementation approaches with different trade-offs\n\n**Actions**:\n1. Launch 2-3 code-architect agents in parallel with different focuses: minimal changes (smallest change, maximum reuse), clean architecture (maintainability, elegant abstractions), or pragmatic balance (speed + quality)\n2. Review all approaches and form your opinion on which fits best for this specific task (consider: small fix vs large feature, urgency, complexity, team context)\n3. Present to user: brief summary of each approach, trade-offs comparison, **your recommendation with reasoning**, concrete implementation differences\n4. **Ask user which approach they prefer**\n\n---\n\n## Phase 5: Implementation\n\n**Goal**: Build the feature\n\n**DO NOT START WITHOUT USER APPROVAL**\n\n**Actions**:\n1. Wait for explicit user approval\n2. Read all relevant files identified in previous phases\n3. Implement following chosen architecture\n4. Follow codebase conventions strictly\n5. Write clean, well-documented code\n6. Update todos as you progress\n\n---\n\n## Phase 6: Quality Review\n\n**Goal**: Ensure code is simple, DRY, elegant, easy to read, and functionally correct\n\n**Actions**:\n1. Launch 3 code-reviewer agents in parallel with different focuses: simplicity/DRY/elegance, bugs/functional correctness, project conventions/abstractions\n2. Consolidate findings and identify highest severity issues that you recommend fixing\n3. **Present findings to user and ask what they want to do** (fix now, fix later, or proceed as-is)\n4. Address issues based on user decision\n\n---\n\n## Phase 7: Summary\n\n**Goal**: Document what was accomplished\n\n**Actions**:\n1. Mark all todos complete\n2. Summarize:\n   - What was built\n   - Key decisions made\n   - Files modified\n   - Suggested next steps\n\n---\n",
        "plugins/frontend-design/.claude-plugin/plugin.json": "{\n  \"name\": \"frontend-design\",\n  \"description\": \"Frontend design skill for UI/UX implementation\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/frontend-design/README.md": "# Frontend Design Plugin\n\nGenerates distinctive, production-grade frontend interfaces that avoid generic AI aesthetics.\n\n## What It Does\n\nClaude automatically uses this skill for frontend work. Creates production-ready code with:\n\n- Bold aesthetic choices\n- Distinctive typography and color palettes\n- High-impact animations and visual details\n- Context-aware implementation\n\n## Usage\n\n```\n\"Create a dashboard for a music streaming app\"\n\"Build a landing page for an AI security startup\"\n\"Design a settings panel with dark mode\"\n```\n\nClaude will choose a clear aesthetic direction and implement production code with meticulous attention to detail.\n\n## Learn More\n\nSee the [Frontend Aesthetics Cookbook](https://github.com/anthropics/claude-cookbooks/blob/main/coding/prompting_for_frontend_aesthetics.ipynb) for detailed guidance on prompting for high-quality frontend design.\n\n## Authors\n\nPrithvi Rajasekaran (prithvi@anthropic.com)\nAlexander Bricken (alexander@anthropic.com)\n",
        "plugins/frontend-design/skills/frontend-design/SKILL.md": "---\nname: frontend-design\ndescription: Create distinctive, production-grade frontend interfaces with high design quality. Use this skill when the user asks to build web components, pages, or applications. Generates creative, polished code that avoids generic AI aesthetics.\nlicense: Complete terms in LICENSE.txt\n---\n\nThis skill guides creation of distinctive, production-grade frontend interfaces that avoid generic \"AI slop\" aesthetics. Implement real working code with exceptional attention to aesthetic details and creative choices.\n\nThe user provides frontend requirements: a component, page, application, or interface to build. They may include context about the purpose, audience, or technical constraints.\n\n## Design Thinking\n\nBefore coding, understand the context and commit to a BOLD aesthetic direction:\n- **Purpose**: What problem does this interface solve? Who uses it?\n- **Tone**: Pick an extreme: brutally minimal, maximalist chaos, retro-futuristic, organic/natural, luxury/refined, playful/toy-like, editorial/magazine, brutalist/raw, art deco/geometric, soft/pastel, industrial/utilitarian, etc. There are so many flavors to choose from. Use these for inspiration but design one that is true to the aesthetic direction.\n- **Constraints**: Technical requirements (framework, performance, accessibility).\n- **Differentiation**: What makes this UNFORGETTABLE? What's the one thing someone will remember?\n\n**CRITICAL**: Choose a clear conceptual direction and execute it with precision. Bold maximalism and refined minimalism both work - the key is intentionality, not intensity.\n\nThen implement working code (HTML/CSS/JS, React, Vue, etc.) that is:\n- Production-grade and functional\n- Visually striking and memorable\n- Cohesive with a clear aesthetic point-of-view\n- Meticulously refined in every detail\n\n## Frontend Aesthetics Guidelines\n\nFocus on:\n- **Typography**: Choose fonts that are beautiful, unique, and interesting. Avoid generic fonts like Arial and Inter; opt instead for distinctive choices that elevate the frontend's aesthetics; unexpected, characterful font choices. Pair a distinctive display font with a refined body font.\n- **Color & Theme**: Commit to a cohesive aesthetic. Use CSS variables for consistency. Dominant colors with sharp accents outperform timid, evenly-distributed palettes.\n- **Motion**: Use animations for effects and micro-interactions. Prioritize CSS-only solutions for HTML. Use Motion library for React when available. Focus on high-impact moments: one well-orchestrated page load with staggered reveals (animation-delay) creates more delight than scattered micro-interactions. Use scroll-triggering and hover states that surprise.\n- **Spatial Composition**: Unexpected layouts. Asymmetry. Overlap. Diagonal flow. Grid-breaking elements. Generous negative space OR controlled density.\n- **Backgrounds & Visual Details**: Create atmosphere and depth rather than defaulting to solid colors. Add contextual effects and textures that match the overall aesthetic. Apply creative forms like gradient meshes, noise textures, geometric patterns, layered transparencies, dramatic shadows, decorative borders, custom cursors, and grain overlays.\n\nNEVER use generic AI-generated aesthetics like overused font families (Inter, Roboto, Arial, system fonts), cliched color schemes (particularly purple gradients on white backgrounds), predictable layouts and component patterns, and cookie-cutter design that lacks context-specific character.\n\nInterpret creatively and make unexpected choices that feel genuinely designed for the context. No design should be the same. Vary between light and dark themes, different fonts, different aesthetics. NEVER converge on common choices (Space Grotesk, for example) across generations.\n\n**IMPORTANT**: Match implementation complexity to the aesthetic vision. Maximalist designs need elaborate code with extensive animations and effects. Minimalist or refined designs need restraint, precision, and careful attention to spacing, typography, and subtle details. Elegance comes from executing the vision well.\n\nRemember: Claude is capable of extraordinary creative work. Don't hold back, show what can truly be created when thinking outside the box and committing fully to a distinctive vision.",
        "plugins/gopls-lsp/README.md": "# gopls-lsp\n\nGo language server for Claude Code, providing code intelligence, refactoring, and analysis.\n\n## Supported Extensions\n`.go`\n\n## Installation\n\nInstall gopls using the Go toolchain:\n\n```bash\ngo install golang.org/x/tools/gopls@latest\n```\n\nMake sure `$GOPATH/bin` (or `$HOME/go/bin`) is in your PATH.\n\n## More Information\n- [gopls Documentation](https://pkg.go.dev/golang.org/x/tools/gopls)\n- [GitHub Repository](https://github.com/golang/tools/tree/master/gopls)\n",
        "plugins/hookify/.claude-plugin/plugin.json": "{\n  \"name\": \"hookify\",\n  \"description\": \"Easily create hooks to prevent unwanted behaviors by analyzing conversation patterns\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/hookify/README.md": "# Hookify Plugin\n\nEasily create custom hooks to prevent unwanted behaviors by analyzing conversation patterns or from explicit instructions.\n\n## Overview\n\nThe hookify plugin makes it simple to create hooks without editing complex `hooks.json` files. Instead, you create lightweight markdown configuration files that define patterns to watch for and messages to show when those patterns match.\n\n**Key features:**\n- 🎯 Analyze conversations to find unwanted behaviors automatically\n- 📝 Simple markdown configuration files with YAML frontmatter\n- 🔍 Regex pattern matching for powerful rules\n- 🚀 No coding required - just describe the behavior\n- 🔄 Easy enable/disable without restarting\n\n## Quick Start\n\n### 1. Create Your First Rule\n\n```bash\n/hookify Warn me when I use rm -rf commands\n```\n\nThis analyzes your request and creates `.claude/hookify.warn-rm.local.md`.\n\n### 2. Test It Immediately\n\n**No restart needed!** Rules take effect on the very next tool use.\n\nAsk Claude to run a command that should trigger the rule:\n```\nRun rm -rf /tmp/test\n```\n\nYou should see the warning message immediately!\n\n## Usage\n\n### Main Command: /hookify\n\n**With arguments:**\n```\n/hookify Don't use console.log in TypeScript files\n```\nCreates a rule from your explicit instructions.\n\n**Without arguments:**\n```\n/hookify\n```\nAnalyzes recent conversation to find behaviors you've corrected or been frustrated by.\n\n### Helper Commands\n\n**List all rules:**\n```\n/hookify:list\n```\n\n**Configure rules interactively:**\n```\n/hookify:configure\n```\nEnable/disable existing rules through an interactive interface.\n\n**Get help:**\n```\n/hookify:help\n```\n\n## Rule Configuration Format\n\n### Simple Rule (Single Pattern)\n\n`.claude/hookify.dangerous-rm.local.md`:\n```markdown\n---\nname: block-dangerous-rm\nenabled: true\nevent: bash\npattern: rm\\s+-rf\naction: block\n---\n\n⚠️ **Dangerous rm command detected!**\n\nThis command could delete important files. Please:\n- Verify the path is correct\n- Consider using a safer approach\n- Make sure you have backups\n```\n\n**Action field:**\n- `warn`: Shows warning but allows operation (default)\n- `block`: Prevents operation from executing (PreToolUse) or stops session (Stop events)\n\n### Advanced Rule (Multiple Conditions)\n\n`.claude/hookify.sensitive-files.local.md`:\n```markdown\n---\nname: warn-sensitive-files\nenabled: true\nevent: file\naction: warn\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.env$|credentials|secrets\n  - field: new_text\n    operator: contains\n    pattern: KEY\n---\n\n🔐 **Sensitive file edit detected!**\n\nEnsure credentials are not hardcoded and file is in .gitignore.\n```\n\n**All conditions must match** for the rule to trigger.\n\n## Event Types\n\n- **`bash`**: Triggers on Bash tool commands\n- **`file`**: Triggers on Edit, Write, MultiEdit tools\n- **`stop`**: Triggers when Claude wants to stop (for completion checks)\n- **`prompt`**: Triggers on user prompt submission\n- **`all`**: Triggers on all events\n\n## Pattern Syntax\n\nUse Python regex syntax:\n\n| Pattern | Matches | Example |\n|---------|---------|---------|\n| `rm\\s+-rf` | rm -rf | rm -rf /tmp |\n| `console\\.log\\(` | console.log( | console.log(\"test\") |\n| `(eval\\|exec)\\(` | eval( or exec( | eval(\"code\") |\n| `\\.env$` | files ending in .env | .env, .env.local |\n| `chmod\\s+777` | chmod 777 | chmod 777 file.txt |\n\n**Tips:**\n- Use `\\s` for whitespace\n- Escape special chars: `\\.` for literal dot\n- Use `|` for OR: `(foo|bar)`\n- Use `.*` to match anything\n- Set `action: block` for dangerous operations\n- Set `action: warn` (or omit) for informational warnings\n\n## Examples\n\n### Example 1: Block Dangerous Commands\n\n```markdown\n---\nname: block-destructive-ops\nenabled: true\nevent: bash\npattern: rm\\s+-rf|dd\\s+if=|mkfs|format\naction: block\n---\n\n🛑 **Destructive operation detected!**\n\nThis command can cause data loss. Operation blocked for safety.\nPlease verify the exact path and use a safer approach.\n```\n\n**This rule blocks the operation** - Claude will not be allowed to execute these commands.\n\n### Example 2: Warn About Debug Code\n\n```markdown\n---\nname: warn-debug-code\nenabled: true\nevent: file\npattern: console\\.log\\(|debugger;|print\\(\naction: warn\n---\n\n🐛 **Debug code detected**\n\nRemember to remove debugging statements before committing.\n```\n\n**This rule warns but allows** - Claude sees the message but can still proceed.\n\n### Example 3: Require Tests Before Stopping\n\n```markdown\n---\nname: require-tests-run\nenabled: false\nevent: stop\naction: block\nconditions:\n  - field: transcript\n    operator: not_contains\n    pattern: npm test|pytest|cargo test\n---\n\n**Tests not detected in transcript!**\n\nBefore stopping, please run tests to verify your changes work correctly.\n```\n\n**This blocks Claude from stopping** if no test commands appear in the session transcript. Enable only when you want strict enforcement.\n\n## Advanced Usage\n\n### Multiple Conditions\n\nCheck multiple fields simultaneously:\n\n```markdown\n---\nname: api-key-in-typescript\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.tsx?$\n  - field: new_text\n    operator: regex_match\n    pattern: (API_KEY|SECRET|TOKEN)\\s*=\\s*[\"']\n---\n\n🔐 **Hardcoded credential in TypeScript!**\n\nUse environment variables instead of hardcoded values.\n```\n\n### Operators Reference\n\n- `regex_match`: Pattern must match (most common)\n- `contains`: String must contain pattern\n- `equals`: Exact string match\n- `not_contains`: String must NOT contain pattern\n- `starts_with`: String starts with pattern\n- `ends_with`: String ends with pattern\n\n### Field Reference\n\n**For bash events:**\n- `command`: The bash command string\n\n**For file events:**\n- `file_path`: Path to file being edited\n- `new_text`: New content being added (Edit, Write)\n- `old_text`: Old content being replaced (Edit only)\n- `content`: File content (Write only)\n\n**For prompt events:**\n- `user_prompt`: The user's submitted prompt text\n\n**For stop events:**\n- Use general matching on session state\n\n## Management\n\n### Enable/Disable Rules\n\n**Temporarily disable:**\nEdit the `.local.md` file and set `enabled: false`\n\n**Re-enable:**\nSet `enabled: true`\n\n**Or use interactive tool:**\n```\n/hookify:configure\n```\n\n### Delete Rules\n\nSimply delete the `.local.md` file:\n```bash\nrm .claude/hookify.my-rule.local.md\n```\n\n### View All Rules\n\n```\n/hookify:list\n```\n\n## Installation\n\nThis plugin is part of the Claude Code Marketplace. It should be auto-discovered when the marketplace is installed.\n\n**Manual testing:**\n```bash\ncc --plugin-dir /path/to/hookify\n```\n\n## Requirements\n\n- Python 3.7+\n- No external dependencies (uses stdlib only)\n\n## Troubleshooting\n\n**Rule not triggering:**\n1. Check rule file exists in `.claude/` directory (in project root, not plugin directory)\n2. Verify `enabled: true` in frontmatter\n3. Test regex pattern separately\n4. Rules should work immediately - no restart needed\n5. Try `/hookify:list` to see if rule is loaded\n\n**Import errors:**\n- Ensure Python 3 is available: `python3 --version`\n- Check hookify plugin is installed\n\n**Pattern not matching:**\n- Test regex: `python3 -c \"import re; print(re.search(r'pattern', 'text'))\"`\n- Use unquoted patterns in YAML to avoid escaping issues\n- Start simple, then add complexity\n\n**Hook seems slow:**\n- Keep patterns simple (avoid complex regex)\n- Use specific event types (bash, file) instead of \"all\"\n- Limit number of active rules\n\n## Contributing\n\nFound a useful rule pattern? Consider sharing example files via PR!\n\n## Future Enhancements\n\n- Severity levels (error/warning/info distinctions)\n- Rule templates library\n- Interactive pattern builder\n- Hook testing utilities\n- JSON format support (in addition to markdown)\n\n## License\n\nMIT License\n",
        "plugins/hookify/agents/conversation-analyzer.md": "---\nname: conversation-analyzer\ndescription: Use this agent when analyzing conversation transcripts to find behaviors worth preventing with hooks. Examples: <example>Context: User is running /hookify command without arguments\\nuser: \"/hookify\"\\nassistant: \"I'll analyze the conversation to find behaviors you want to prevent\"\\n<commentary>The /hookify command without arguments triggers conversation analysis to find unwanted behaviors.</commentary></example><example>Context: User wants to create hooks from recent frustrations\\nuser: \"Can you look back at this conversation and help me create hooks for the mistakes you made?\"\\nassistant: \"I'll use the conversation-analyzer agent to identify the issues and suggest hooks.\"\\n<commentary>User explicitly asks to analyze conversation for mistakes that should be prevented.</commentary></example>\nmodel: inherit\ncolor: yellow\ntools: [\"Read\", \"Grep\"]\n---\n\nYou are a conversation analysis specialist that identifies problematic behaviors in Claude Code sessions that could be prevented with hooks.\n\n**Your Core Responsibilities:**\n1. Read and analyze user messages to find frustration signals\n2. Identify specific tool usage patterns that caused issues\n3. Extract actionable patterns that can be matched with regex\n4. Categorize issues by severity and type\n5. Provide structured findings for hook rule generation\n\n**Analysis Process:**\n\n### 1. Search for User Messages Indicating Issues\n\nRead through user messages in reverse chronological order (most recent first). Look for:\n\n**Explicit correction requests:**\n- \"Don't use X\"\n- \"Stop doing Y\"\n- \"Please don't Z\"\n- \"Avoid...\"\n- \"Never...\"\n\n**Frustrated reactions:**\n- \"Why did you do X?\"\n- \"I didn't ask for that\"\n- \"That's not what I meant\"\n- \"That was wrong\"\n\n**Corrections and reversions:**\n- User reverting changes Claude made\n- User fixing issues Claude created\n- User providing step-by-step corrections\n\n**Repeated issues:**\n- Same type of mistake multiple times\n- User having to remind multiple times\n- Pattern of similar problems\n\n### 2. Identify Tool Usage Patterns\n\nFor each issue, determine:\n- **Which tool**: Bash, Edit, Write, MultiEdit\n- **What action**: Specific command or code pattern\n- **When it happened**: During what task/phase\n- **Why problematic**: User's stated reason or implicit concern\n\n**Extract concrete examples:**\n- For Bash: Actual command that was problematic\n- For Edit/Write: Code pattern that was added\n- For Stop: What was missing before stopping\n\n### 3. Create Regex Patterns\n\nConvert behaviors into matchable patterns:\n\n**Bash command patterns:**\n- `rm\\s+-rf` for dangerous deletes\n- `sudo\\s+` for privilege escalation\n- `chmod\\s+777` for permission issues\n\n**Code patterns (Edit/Write):**\n- `console\\.log\\(` for debug logging\n- `eval\\(|new Function\\(` for dangerous eval\n- `innerHTML\\s*=` for XSS risks\n\n**File path patterns:**\n- `\\.env$` for environment files\n- `/node_modules/` for dependency files\n- `dist/|build/` for generated files\n\n### 4. Categorize Severity\n\n**High severity (should block in future):**\n- Dangerous commands (rm -rf, chmod 777)\n- Security issues (hardcoded secrets, eval)\n- Data loss risks\n\n**Medium severity (warn):**\n- Style violations (console.log in production)\n- Wrong file types (editing generated files)\n- Missing best practices\n\n**Low severity (optional):**\n- Preferences (coding style)\n- Non-critical patterns\n\n### 5. Output Format\n\nReturn your findings as structured text in this format:\n\n```\n## Hookify Analysis Results\n\n### Issue 1: Dangerous rm Commands\n**Severity**: High\n**Tool**: Bash\n**Pattern**: `rm\\s+-rf`\n**Occurrences**: 3 times\n**Context**: Used rm -rf on /tmp directories without verification\n**User Reaction**: \"Please be more careful with rm commands\"\n\n**Suggested Rule:**\n- Name: warn-dangerous-rm\n- Event: bash\n- Pattern: rm\\s+-rf\n- Message: \"Dangerous rm command detected. Verify path before proceeding.\"\n\n---\n\n### Issue 2: Console.log in TypeScript\n**Severity**: Medium\n**Tool**: Edit/Write\n**Pattern**: `console\\.log\\(`\n**Occurrences**: 2 times\n**Context**: Added console.log statements to production TypeScript files\n**User Reaction**: \"Don't use console.log in production code\"\n\n**Suggested Rule:**\n- Name: warn-console-log\n- Event: file\n- Pattern: console\\.log\\(\n- Message: \"Console.log detected. Use proper logging library instead.\"\n\n---\n\n[Continue for each issue found...]\n\n## Summary\n\nFound {N} behaviors worth preventing:\n- {N} high severity\n- {N} medium severity\n- {N} low severity\n\nRecommend creating rules for high and medium severity issues.\n```\n\n**Quality Standards:**\n- Be specific about patterns (don't be overly broad)\n- Include actual examples from conversation\n- Explain why each issue matters\n- Provide ready-to-use regex patterns\n- Don't false-positive on discussions about what NOT to do\n\n**Edge Cases:**\n\n**User discussing hypotheticals:**\n- \"What would happen if I used rm -rf?\"\n- Don't treat as problematic behavior\n\n**Teaching moments:**\n- \"Here's what you shouldn't do: ...\"\n- Context indicates explanation, not actual problem\n\n**One-time accidents:**\n- Single occurrence, already fixed\n- Mention but mark as low priority\n\n**Subjective preferences:**\n- \"I prefer X over Y\"\n- Mark as low severity, let user decide\n\n**Return Results:**\nProvide your analysis in the structured format above. The /hookify command will use this to:\n1. Present findings to user\n2. Ask which rules to create\n3. Generate .local.md configuration files\n4. Save rules to .claude directory\n",
        "plugins/hookify/commands/configure.md": "---\ndescription: Enable or disable hookify rules interactively\nallowed-tools: [\"Glob\", \"Read\", \"Edit\", \"AskUserQuestion\", \"Skill\"]\n---\n\n# Configure Hookify Rules\n\n**Load hookify:writing-rules skill first** to understand rule format.\n\nEnable or disable existing hookify rules using an interactive interface.\n\n## Steps\n\n### 1. Find Existing Rules\n\nUse Glob tool to find all hookify rule files:\n```\npattern: \".claude/hookify.*.local.md\"\n```\n\nIf no rules found, inform user:\n```\nNo hookify rules configured yet. Use `/hookify` to create your first rule.\n```\n\n### 2. Read Current State\n\nFor each rule file:\n- Read the file\n- Extract `name` and `enabled` fields from frontmatter\n- Build list of rules with current state\n\n### 3. Ask User Which Rules to Toggle\n\nUse AskUserQuestion to let user select rules:\n\n```json\n{\n  \"questions\": [\n    {\n      \"question\": \"Which rules would you like to enable or disable?\",\n      \"header\": \"Configure\",\n      \"multiSelect\": true,\n      \"options\": [\n        {\n          \"label\": \"warn-dangerous-rm (currently enabled)\",\n          \"description\": \"Warns about rm -rf commands\"\n        },\n        {\n          \"label\": \"warn-console-log (currently disabled)\",\n          \"description\": \"Warns about console.log in code\"\n        },\n        {\n          \"label\": \"require-tests (currently enabled)\",\n          \"description\": \"Requires tests before stopping\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Option format:**\n- Label: `{rule-name} (currently {enabled|disabled})`\n- Description: Brief description from rule's message or pattern\n\n### 4. Parse User Selection\n\nFor each selected rule:\n- Determine current state from label (enabled/disabled)\n- Toggle state: enabled → disabled, disabled → enabled\n\n### 5. Update Rule Files\n\nFor each rule to toggle:\n- Use Read tool to read current content\n- Use Edit tool to change `enabled: true` to `enabled: false` (or vice versa)\n- Handle both with and without quotes\n\n**Edit pattern for enabling:**\n```\nold_string: \"enabled: false\"\nnew_string: \"enabled: true\"\n```\n\n**Edit pattern for disabling:**\n```\nold_string: \"enabled: true\"\nnew_string: \"enabled: false\"\n```\n\n### 6. Confirm Changes\n\nShow user what was changed:\n\n```\n## Hookify Rules Updated\n\n**Enabled:**\n- warn-console-log\n\n**Disabled:**\n- warn-dangerous-rm\n\n**Unchanged:**\n- require-tests\n\nChanges apply immediately - no restart needed\n```\n\n## Important Notes\n\n- Changes take effect immediately on next tool use\n- You can also manually edit .claude/hookify.*.local.md files\n- To permanently remove a rule, delete its .local.md file\n- Use `/hookify:list` to see all configured rules\n\n## Edge Cases\n\n**No rules to configure:**\n- Show message about using `/hookify` to create rules first\n\n**User selects no rules:**\n- Inform that no changes were made\n\n**File read/write errors:**\n- Inform user of specific error\n- Suggest manual editing as fallback\n",
        "plugins/hookify/commands/help.md": "---\ndescription: Get help with the hookify plugin\nallowed-tools: [\"Read\"]\n---\n\n# Hookify Plugin Help\n\nExplain how the hookify plugin works and how to use it.\n\n## Overview\n\nThe hookify plugin makes it easy to create custom hooks that prevent unwanted behaviors. Instead of editing `hooks.json` files, users create simple markdown configuration files that define patterns to watch for.\n\n## How It Works\n\n### 1. Hook System\n\nHookify installs generic hooks that run on these events:\n- **PreToolUse**: Before any tool executes (Bash, Edit, Write, etc.)\n- **PostToolUse**: After a tool executes\n- **Stop**: When Claude wants to stop working\n- **UserPromptSubmit**: When user submits a prompt\n\nThese hooks read configuration files from `.claude/hookify.*.local.md` and check if any rules match the current operation.\n\n### 2. Configuration Files\n\nUsers create rules in `.claude/hookify.{rule-name}.local.md` files:\n\n```markdown\n---\nname: warn-dangerous-rm\nenabled: true\nevent: bash\npattern: rm\\s+-rf\n---\n\n⚠️ **Dangerous rm command detected!**\n\nThis command could delete important files. Please verify the path.\n```\n\n**Key fields:**\n- `name`: Unique identifier for the rule\n- `enabled`: true/false to activate/deactivate\n- `event`: bash, file, stop, prompt, or all\n- `pattern`: Regex pattern to match\n\nThe message body is what Claude sees when the rule triggers.\n\n### 3. Creating Rules\n\n**Option A: Use /hookify command**\n```\n/hookify Don't use console.log in production files\n```\n\nThis analyzes your request and creates the appropriate rule file.\n\n**Option B: Create manually**\nCreate `.claude/hookify.my-rule.local.md` with the format above.\n\n**Option C: Analyze conversation**\n```\n/hookify\n```\n\nWithout arguments, hookify analyzes recent conversation to find behaviors you want to prevent.\n\n## Available Commands\n\n- **`/hookify`** - Create hooks from conversation analysis or explicit instructions\n- **`/hookify:help`** - Show this help (what you're reading now)\n- **`/hookify:list`** - List all configured hooks\n- **`/hookify:configure`** - Enable/disable existing hooks interactively\n\n## Example Use Cases\n\n**Prevent dangerous commands:**\n```markdown\n---\nname: block-chmod-777\nenabled: true\nevent: bash\npattern: chmod\\s+777\n---\n\nDon't use chmod 777 - it's a security risk. Use specific permissions instead.\n```\n\n**Warn about debugging code:**\n```markdown\n---\nname: warn-console-log\nenabled: true\nevent: file\npattern: console\\.log\\(\n---\n\nConsole.log detected. Remember to remove debug logging before committing.\n```\n\n**Require tests before stopping:**\n```markdown\n---\nname: require-tests\nenabled: true\nevent: stop\npattern: .*\n---\n\nDid you run tests before finishing? Make sure `npm test` or equivalent was executed.\n```\n\n## Pattern Syntax\n\nUse Python regex syntax:\n- `\\s` - whitespace\n- `\\.` - literal dot\n- `|` - OR\n- `+` - one or more\n- `*` - zero or more\n- `\\d` - digit\n- `[abc]` - character class\n\n**Examples:**\n- `rm\\s+-rf` - matches \"rm -rf\"\n- `console\\.log\\(` - matches \"console.log(\"\n- `(eval|exec)\\(` - matches \"eval(\" or \"exec(\"\n- `\\.env$` - matches files ending in .env\n\n## Important Notes\n\n**No Restart Needed**: Hookify rules (`.local.md` files) take effect immediately on the next tool use. The hookify hooks are already loaded and read your rules dynamically.\n\n**Block or Warn**: Rules can either `block` operations (prevent execution) or `warn` (show message but allow). Set `action: block` or `action: warn` in the rule's frontmatter.\n\n**Rule Files**: Keep rules in `.claude/hookify.*.local.md` - they should be git-ignored (add to .gitignore if needed).\n\n**Disable Rules**: Set `enabled: false` in frontmatter or delete the file.\n\n## Troubleshooting\n\n**Hook not triggering:**\n- Check rule file is in `.claude/` directory\n- Verify `enabled: true` in frontmatter\n- Confirm pattern is valid regex\n- Test pattern: `python3 -c \"import re; print(re.search('your_pattern', 'test_text'))\"`\n- Rules take effect immediately - no restart needed\n\n**Import errors:**\n- Check Python 3 is available: `python3 --version`\n- Verify hookify plugin is installed correctly\n\n**Pattern not matching:**\n- Test regex separately\n- Check for escaping issues (use unquoted patterns in YAML)\n- Try simpler pattern first, then refine\n\n## Getting Started\n\n1. Create your first rule:\n   ```\n   /hookify Warn me when I try to use rm -rf\n   ```\n\n2. Try to trigger it:\n   - Ask Claude to run `rm -rf /tmp/test`\n   - You should see the warning\n\n4. Refine the rule by editing `.claude/hookify.warn-rm.local.md`\n\n5. Create more rules as you encounter unwanted behaviors\n\nFor more examples, check the `${CLAUDE_PLUGIN_ROOT}/examples/` directory.\n",
        "plugins/hookify/commands/hookify.md": "---\ndescription: Create hooks to prevent unwanted behaviors from conversation analysis or explicit instructions\nargument-hint: Optional specific behavior to address\nallowed-tools: [\"Read\", \"Write\", \"AskUserQuestion\", \"Task\", \"Grep\", \"TodoWrite\", \"Skill\"]\n---\n\n# Hookify - Create Hooks from Unwanted Behaviors\n\n**FIRST: Load the hookify:writing-rules skill** using the Skill tool to understand rule file format and syntax.\n\nCreate hook rules to prevent problematic behaviors by analyzing the conversation or from explicit user instructions.\n\n## Your Task\n\nYou will help the user create hookify rules to prevent unwanted behaviors. Follow these steps:\n\n### Step 1: Gather Behavior Information\n\n**If $ARGUMENTS is provided:**\n- User has given specific instructions: `$ARGUMENTS`\n- Still analyze recent conversation (last 10-15 user messages) for additional context\n- Look for examples of the behavior happening\n\n**If $ARGUMENTS is empty:**\n- Launch the conversation-analyzer agent to find problematic behaviors\n- Agent will scan user prompts for frustration signals\n- Agent will return structured findings\n\n**To analyze conversation:**\nUse the Task tool to launch conversation-analyzer agent:\n```\n{\n  \"subagent_type\": \"general-purpose\",\n  \"description\": \"Analyze conversation for unwanted behaviors\",\n  \"prompt\": \"You are analyzing a Claude Code conversation to find behaviors the user wants to prevent.\n\nRead user messages in the current conversation and identify:\n1. Explicit requests to avoid something (\\\"don't do X\\\", \\\"stop doing Y\\\")\n2. Corrections or reversions (user fixing Claude's actions)\n3. Frustrated reactions (\\\"why did you do X?\\\", \\\"I didn't ask for that\\\")\n4. Repeated issues (same problem multiple times)\n\nFor each issue found, extract:\n- What tool was used (Bash, Edit, Write, etc.)\n- Specific pattern or command\n- Why it was problematic\n- User's stated reason\n\nReturn findings as a structured list with:\n- category: Type of issue\n- tool: Which tool was involved\n- pattern: Regex or literal pattern to match\n- context: What happened\n- severity: high/medium/low\n\nFocus on the most recent issues (last 20-30 messages). Don't go back further unless explicitly asked.\"\n}\n```\n\n### Step 2: Present Findings to User\n\nAfter gathering behaviors (from arguments or agent), present to user using AskUserQuestion:\n\n**Question 1: Which behaviors to hookify?**\n- Header: \"Create Rules\"\n- multiSelect: true\n- Options: List each detected behavior (max 4)\n  - Label: Short description (e.g., \"Block rm -rf\")\n  - Description: Why it's problematic\n\n**Question 2: For each selected behavior, ask about action:**\n- \"Should this block the operation or just warn?\"\n- Options:\n  - \"Just warn\" (action: warn - shows message but allows)\n  - \"Block operation\" (action: block - prevents execution)\n\n**Question 3: Ask for example patterns:**\n- \"What patterns should trigger this rule?\"\n- Show detected patterns\n- Allow user to refine or add more\n\n### Step 3: Generate Rule Files\n\nFor each confirmed behavior, create a `.claude/hookify.{rule-name}.local.md` file:\n\n**Rule naming convention:**\n- Use kebab-case\n- Be descriptive: `block-dangerous-rm`, `warn-console-log`, `require-tests-before-stop`\n- Start with action verb: block, warn, prevent, require\n\n**File format:**\n```markdown\n---\nname: {rule-name}\nenabled: true\nevent: {bash|file|stop|prompt|all}\npattern: {regex pattern}\naction: {warn|block}\n---\n\n{Message to show Claude when rule triggers}\n```\n\n**Action values:**\n- `warn`: Show message but allow operation (default)\n- `block`: Prevent operation or stop session\n\n**For more complex rules (multiple conditions):**\n```markdown\n---\nname: {rule-name}\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.env$\n  - field: new_text\n    operator: contains\n    pattern: API_KEY\n---\n\n{Warning message}\n```\n\n### Step 4: Create Files and Confirm\n\n**IMPORTANT**: Rule files must be created in the current working directory's `.claude/` folder, NOT the plugin directory.\n\nUse the current working directory (where Claude Code was started) as the base path.\n\n1. Check if `.claude/` directory exists in current working directory\n   - If not, create it first with: `mkdir -p .claude`\n\n2. Use Write tool to create each `.claude/hookify.{name}.local.md` file\n   - Use relative path from current working directory: `.claude/hookify.{name}.local.md`\n   - The path should resolve to the project's .claude directory, not the plugin's\n\n3. Show user what was created:\n   ```\n   Created 3 hookify rules:\n   - .claude/hookify.dangerous-rm.local.md\n   - .claude/hookify.console-log.local.md\n   - .claude/hookify.sensitive-files.local.md\n\n   These rules will trigger on:\n   - dangerous-rm: Bash commands matching \"rm -rf\"\n   - console-log: Edits adding console.log statements\n   - sensitive-files: Edits to .env or credentials files\n   ```\n\n4. Verify files were created in the correct location by listing them\n\n5. Inform user: **\"Rules are active immediately - no restart needed!\"**\n\n   The hookify hooks are already loaded and will read your new rules on the next tool use.\n\n## Event Types Reference\n\n- **bash**: Matches Bash tool commands\n- **file**: Matches Edit, Write, MultiEdit tools\n- **stop**: Matches when agent wants to stop (use for completion checks)\n- **prompt**: Matches when user submits prompts\n- **all**: Matches all events\n\n## Pattern Writing Tips\n\n**Bash patterns:**\n- Match dangerous commands: `rm\\s+-rf|chmod\\s+777|dd\\s+if=`\n- Match specific tools: `npm\\s+install\\s+|pip\\s+install`\n\n**File patterns:**\n- Match code patterns: `console\\.log\\(|eval\\(|innerHTML\\s*=`\n- Match file paths: `\\.env$|\\.git/|node_modules/`\n\n**Stop patterns:**\n- Check for missing steps: (check transcript or completion criteria)\n\n## Example Workflow\n\n**User says**: \"/hookify Don't use rm -rf without asking me first\"\n\n**Your response**:\n1. Analyze: User wants to prevent rm -rf commands\n2. Ask: \"Should I block this command or just warn you?\"\n3. User selects: \"Just warn\"\n4. Create `.claude/hookify.dangerous-rm.local.md`:\n   ```markdown\n   ---\n   name: warn-dangerous-rm\n   enabled: true\n   event: bash\n   pattern: rm\\s+-rf\n   ---\n\n   ⚠️ **Dangerous rm command detected**\n\n   You requested to be warned before using rm -rf.\n   Please verify the path is correct.\n   ```\n5. Confirm: \"Created hookify rule. It's active immediately - try triggering it!\"\n\n## Important Notes\n\n- **No restart needed**: Rules take effect immediately on the next tool use\n- **File location**: Create files in project's `.claude/` directory (current working directory), NOT the plugin's .claude/\n- **Regex syntax**: Use Python regex syntax (raw strings, no need to escape in YAML)\n- **Action types**: Rules can `warn` (default) or `block` operations\n- **Testing**: Test rules immediately after creating them\n\n## Troubleshooting\n\n**If rule file creation fails:**\n1. Check current working directory with pwd\n2. Ensure `.claude/` directory exists (create with mkdir if needed)\n3. Use absolute path if needed: `{cwd}/.claude/hookify.{name}.local.md`\n4. Verify file was created with Glob or ls\n\n**If rule doesn't trigger after creation:**\n1. Verify file is in project `.claude/` not plugin `.claude/`\n2. Check file with Read tool to ensure pattern is correct\n3. Test pattern with: `python3 -c \"import re; print(re.search(r'pattern', 'test text'))\"`\n4. Verify `enabled: true` in frontmatter\n5. Remember: Rules work immediately, no restart needed\n\n**If blocking seems too strict:**\n1. Change `action: block` to `action: warn` in the rule file\n2. Or adjust the pattern to be more specific\n3. Changes take effect on next tool use\n\nUse TodoWrite to track your progress through the steps.\n",
        "plugins/hookify/commands/list.md": "---\ndescription: List all configured hookify rules\nallowed-tools: [\"Glob\", \"Read\", \"Skill\"]\n---\n\n# List Hookify Rules\n\n**Load hookify:writing-rules skill first** to understand rule format.\n\nShow all configured hookify rules in the project.\n\n## Steps\n\n1. Use Glob tool to find all hookify rule files:\n   ```\n   pattern: \".claude/hookify.*.local.md\"\n   ```\n\n2. For each file found:\n   - Use Read tool to read the file\n   - Extract frontmatter fields: name, enabled, event, pattern\n   - Extract message preview (first 100 chars)\n\n3. Present results in a table:\n\n```\n## Configured Hookify Rules\n\n| Name | Enabled | Event | Pattern | File |\n|------|---------|-------|---------|------|\n| warn-dangerous-rm | ✅ Yes | bash | rm\\s+-rf | hookify.dangerous-rm.local.md |\n| warn-console-log | ✅ Yes | file | console\\.log\\( | hookify.console-log.local.md |\n| check-tests | ❌ No | stop | .* | hookify.require-tests.local.md |\n\n**Total**: 3 rules (2 enabled, 1 disabled)\n```\n\n4. For each rule, show a brief preview:\n```\n### warn-dangerous-rm\n**Event**: bash\n**Pattern**: `rm\\s+-rf`\n**Message**: \"⚠️ **Dangerous rm command detected!** This command could delete...\"\n\n**Status**: ✅ Active\n**File**: .claude/hookify.dangerous-rm.local.md\n```\n\n5. Add helpful footer:\n```\n---\n\nTo modify a rule: Edit the .local.md file directly\nTo disable a rule: Set `enabled: false` in frontmatter\nTo enable a rule: Set `enabled: true` in frontmatter\nTo delete a rule: Remove the .local.md file\nTo create a rule: Use `/hookify` command\n\n**Remember**: Changes take effect immediately - no restart needed\n```\n\n## If No Rules Found\n\nIf no hookify rules exist:\n\n```\n## No Hookify Rules Configured\n\nYou haven't created any hookify rules yet.\n\nTo get started:\n1. Use `/hookify` to analyze conversation and create rules\n2. Or manually create `.claude/hookify.my-rule.local.md` files\n3. See `/hookify:help` for documentation\n\nExample:\n```\n/hookify Warn me when I use console.log\n```\n\nCheck `${CLAUDE_PLUGIN_ROOT}/examples/` for example rule files.\n```\n",
        "plugins/hookify/hooks/hooks.json": "{\n  \"description\": \"Hookify plugin - User-configurable hooks from .local.md files\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/hooks/pretooluse.py\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/hooks/posttooluse.py\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ],\n    \"Stop\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/hooks/stop.py\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ],\n    \"UserPromptSubmit\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/hooks/userpromptsubmit.py\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/hookify/hooks/posttooluse.py": "#!/usr/bin/env python3\n\"\"\"PostToolUse hook executor for hookify plugin.\n\nThis script is called by Claude Code after a tool executes.\nIt reads .claude/hookify.*.local.md files and evaluates rules.\n\"\"\"\n\nimport os\nimport sys\nimport json\n\n# Add plugin root to Python path for imports\nPLUGIN_ROOT = os.environ.get('CLAUDE_PLUGIN_ROOT')\nif PLUGIN_ROOT and PLUGIN_ROOT not in sys.path:\n    sys.path.insert(0, PLUGIN_ROOT)\n\ntry:\n    from core.config_loader import load_rules\n    from core.rule_engine import RuleEngine\nexcept ImportError as e:\n    error_msg = {\"systemMessage\": f\"Hookify import error: {e}\"}\n    print(json.dumps(error_msg), file=sys.stdout)\n    sys.exit(0)\n\n\ndef main():\n    \"\"\"Main entry point for PostToolUse hook.\"\"\"\n    try:\n        # Read input from stdin\n        input_data = json.load(sys.stdin)\n\n        # Determine event type based on tool\n        tool_name = input_data.get('tool_name', '')\n        event = None\n        if tool_name == 'Bash':\n            event = 'bash'\n        elif tool_name in ['Edit', 'Write', 'MultiEdit']:\n            event = 'file'\n\n        # Load rules\n        rules = load_rules(event=event)\n\n        # Evaluate rules\n        engine = RuleEngine()\n        result = engine.evaluate_rules(rules, input_data)\n\n        # Always output JSON (even if empty)\n        print(json.dumps(result), file=sys.stdout)\n\n    except Exception as e:\n        error_output = {\n            \"systemMessage\": f\"Hookify error: {str(e)}\"\n        }\n        print(json.dumps(error_output), file=sys.stdout)\n\n    finally:\n        # ALWAYS exit 0\n        sys.exit(0)\n\n\nif __name__ == '__main__':\n    main()\n",
        "plugins/hookify/hooks/pretooluse.py": "#!/usr/bin/env python3\n\"\"\"PreToolUse hook executor for hookify plugin.\n\nThis script is called by Claude Code before any tool executes.\nIt reads .claude/hookify.*.local.md files and evaluates rules.\n\"\"\"\n\nimport os\nimport sys\nimport json\n\n# Add plugin root to Python path for imports\nPLUGIN_ROOT = os.environ.get('CLAUDE_PLUGIN_ROOT')\nif PLUGIN_ROOT and PLUGIN_ROOT not in sys.path:\n    sys.path.insert(0, PLUGIN_ROOT)\n\ntry:\n    from core.config_loader import load_rules\n    from core.rule_engine import RuleEngine\nexcept ImportError as e:\n    # If imports fail, allow operation and log error\n    error_msg = {\"systemMessage\": f\"Hookify import error: {e}\"}\n    print(json.dumps(error_msg), file=sys.stdout)\n    sys.exit(0)\n\n\ndef main():\n    \"\"\"Main entry point for PreToolUse hook.\"\"\"\n    try:\n        # Read input from stdin\n        input_data = json.load(sys.stdin)\n\n        # Determine event type for filtering\n        # For PreToolUse, we use tool_name to determine \"bash\" vs \"file\" event\n        tool_name = input_data.get('tool_name', '')\n\n        event = None\n        if tool_name == 'Bash':\n            event = 'bash'\n        elif tool_name in ['Edit', 'Write', 'MultiEdit']:\n            event = 'file'\n\n        # Load rules\n        rules = load_rules(event=event)\n\n        # Evaluate rules\n        engine = RuleEngine()\n        result = engine.evaluate_rules(rules, input_data)\n\n        # Always output JSON (even if empty)\n        print(json.dumps(result), file=sys.stdout)\n\n    except Exception as e:\n        # On any error, allow the operation and log\n        error_output = {\n            \"systemMessage\": f\"Hookify error: {str(e)}\"\n        }\n        print(json.dumps(error_output), file=sys.stdout)\n\n    finally:\n        # ALWAYS exit 0 - never block operations due to hook errors\n        sys.exit(0)\n\n\nif __name__ == '__main__':\n    main()\n",
        "plugins/hookify/hooks/stop.py": "#!/usr/bin/env python3\n\"\"\"Stop hook executor for hookify plugin.\n\nThis script is called by Claude Code when agent wants to stop.\nIt reads .claude/hookify.*.local.md files and evaluates stop rules.\n\"\"\"\n\nimport os\nimport sys\nimport json\n\n# Add plugin root to Python path for imports\nPLUGIN_ROOT = os.environ.get('CLAUDE_PLUGIN_ROOT')\nif PLUGIN_ROOT and PLUGIN_ROOT not in sys.path:\n    sys.path.insert(0, PLUGIN_ROOT)\n\ntry:\n    from core.config_loader import load_rules\n    from core.rule_engine import RuleEngine\nexcept ImportError as e:\n    error_msg = {\"systemMessage\": f\"Hookify import error: {e}\"}\n    print(json.dumps(error_msg), file=sys.stdout)\n    sys.exit(0)\n\n\ndef main():\n    \"\"\"Main entry point for Stop hook.\"\"\"\n    try:\n        # Read input from stdin\n        input_data = json.load(sys.stdin)\n\n        # Load stop rules\n        rules = load_rules(event='stop')\n\n        # Evaluate rules\n        engine = RuleEngine()\n        result = engine.evaluate_rules(rules, input_data)\n\n        # Always output JSON (even if empty)\n        print(json.dumps(result), file=sys.stdout)\n\n    except Exception as e:\n        # On any error, allow the operation\n        error_output = {\n            \"systemMessage\": f\"Hookify error: {str(e)}\"\n        }\n        print(json.dumps(error_output), file=sys.stdout)\n\n    finally:\n        # ALWAYS exit 0\n        sys.exit(0)\n\n\nif __name__ == '__main__':\n    main()\n",
        "plugins/hookify/hooks/userpromptsubmit.py": "#!/usr/bin/env python3\n\"\"\"UserPromptSubmit hook executor for hookify plugin.\n\nThis script is called by Claude Code when user submits a prompt.\nIt reads .claude/hookify.*.local.md files and evaluates rules.\n\"\"\"\n\nimport os\nimport sys\nimport json\n\n# Add plugin root to Python path for imports\nPLUGIN_ROOT = os.environ.get('CLAUDE_PLUGIN_ROOT')\nif PLUGIN_ROOT and PLUGIN_ROOT not in sys.path:\n    sys.path.insert(0, PLUGIN_ROOT)\n\ntry:\n    from core.config_loader import load_rules\n    from core.rule_engine import RuleEngine\nexcept ImportError as e:\n    error_msg = {\"systemMessage\": f\"Hookify import error: {e}\"}\n    print(json.dumps(error_msg), file=sys.stdout)\n    sys.exit(0)\n\n\ndef main():\n    \"\"\"Main entry point for UserPromptSubmit hook.\"\"\"\n    try:\n        # Read input from stdin\n        input_data = json.load(sys.stdin)\n\n        # Load user prompt rules\n        rules = load_rules(event='prompt')\n\n        # Evaluate rules\n        engine = RuleEngine()\n        result = engine.evaluate_rules(rules, input_data)\n\n        # Always output JSON (even if empty)\n        print(json.dumps(result), file=sys.stdout)\n\n    except Exception as e:\n        error_output = {\n            \"systemMessage\": f\"Hookify error: {str(e)}\"\n        }\n        print(json.dumps(error_output), file=sys.stdout)\n\n    finally:\n        # ALWAYS exit 0\n        sys.exit(0)\n\n\nif __name__ == '__main__':\n    main()\n",
        "plugins/hookify/skills/writing-rules/SKILL.md": "---\nname: Writing Hookify Rules\ndescription: This skill should be used when the user asks to \"create a hookify rule\", \"write a hook rule\", \"configure hookify\", \"add a hookify rule\", or needs guidance on hookify rule syntax and patterns.\nversion: 0.1.0\n---\n\n# Writing Hookify Rules\n\n## Overview\n\nHookify rules are markdown files with YAML frontmatter that define patterns to watch for and messages to show when those patterns match. Rules are stored in `.claude/hookify.{rule-name}.local.md` files.\n\n## Rule File Format\n\n### Basic Structure\n\n```markdown\n---\nname: rule-identifier\nenabled: true\nevent: bash|file|stop|prompt|all\npattern: regex-pattern-here\n---\n\nMessage to show Claude when this rule triggers.\nCan include markdown formatting, warnings, suggestions, etc.\n```\n\n### Frontmatter Fields\n\n**name** (required): Unique identifier for the rule\n- Use kebab-case: `warn-dangerous-rm`, `block-console-log`\n- Be descriptive and action-oriented\n- Start with verb: warn, prevent, block, require, check\n\n**enabled** (required): Boolean to activate/deactivate\n- `true`: Rule is active\n- `false`: Rule is disabled (won't trigger)\n- Can toggle without deleting rule\n\n**event** (required): Which hook event to trigger on\n- `bash`: Bash tool commands\n- `file`: Edit, Write, MultiEdit tools\n- `stop`: When agent wants to stop\n- `prompt`: When user submits a prompt\n- `all`: All events\n\n**action** (optional): What to do when rule matches\n- `warn`: Show message but allow operation (default)\n- `block`: Prevent operation (PreToolUse) or stop session (Stop events)\n- If omitted, defaults to `warn`\n\n**pattern** (simple format): Regex pattern to match\n- Used for simple single-condition rules\n- Matches against command (bash) or new_text (file)\n- Python regex syntax\n\n**Example:**\n```yaml\nevent: bash\npattern: rm\\s+-rf\n```\n\n### Advanced Format (Multiple Conditions)\n\nFor complex rules with multiple conditions:\n\n```markdown\n---\nname: warn-env-file-edits\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.env$\n  - field: new_text\n    operator: contains\n    pattern: API_KEY\n---\n\nYou're adding an API key to a .env file. Ensure this file is in .gitignore!\n```\n\n**Condition fields:**\n- `field`: Which field to check\n  - For bash: `command`\n  - For file: `file_path`, `new_text`, `old_text`, `content`\n- `operator`: How to match\n  - `regex_match`: Regex pattern matching\n  - `contains`: Substring check\n  - `equals`: Exact match\n  - `not_contains`: Substring must NOT be present\n  - `starts_with`: Prefix check\n  - `ends_with`: Suffix check\n- `pattern`: Pattern or string to match\n\n**All conditions must match for rule to trigger.**\n\n## Message Body\n\nThe markdown content after frontmatter is shown to Claude when the rule triggers.\n\n**Good messages:**\n- Explain what was detected\n- Explain why it's problematic\n- Suggest alternatives or best practices\n- Use formatting for clarity (bold, lists, etc.)\n\n**Example:**\n```markdown\n⚠️ **Console.log detected!**\n\nYou're adding console.log to production code.\n\n**Why this matters:**\n- Debug logs shouldn't ship to production\n- Console.log can expose sensitive data\n- Impacts browser performance\n\n**Alternatives:**\n- Use a proper logging library\n- Remove before committing\n- Use conditional debug builds\n```\n\n## Event Type Guide\n\n### bash Events\n\nMatch Bash command patterns:\n\n```markdown\n---\nevent: bash\npattern: sudo\\s+|rm\\s+-rf|chmod\\s+777\n---\n\nDangerous command detected!\n```\n\n**Common patterns:**\n- Dangerous commands: `rm\\s+-rf`, `dd\\s+if=`, `mkfs`\n- Privilege escalation: `sudo\\s+`, `su\\s+`\n- Permission issues: `chmod\\s+777`, `chown\\s+root`\n\n### file Events\n\nMatch Edit/Write/MultiEdit operations:\n\n```markdown\n---\nevent: file\npattern: console\\.log\\(|eval\\(|innerHTML\\s*=\n---\n\nPotentially problematic code pattern detected!\n```\n\n**Match on different fields:**\n```markdown\n---\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.tsx?$\n  - field: new_text\n    operator: regex_match\n    pattern: console\\.log\\(\n---\n\nConsole.log in TypeScript file!\n```\n\n**Common patterns:**\n- Debug code: `console\\.log\\(`, `debugger`, `print\\(`\n- Security risks: `eval\\(`, `innerHTML\\s*=`, `dangerouslySetInnerHTML`\n- Sensitive files: `\\.env$`, `credentials`, `\\.pem$`\n- Generated files: `node_modules/`, `dist/`, `build/`\n\n### stop Events\n\nMatch when agent wants to stop (completion checks):\n\n```markdown\n---\nevent: stop\npattern: .*\n---\n\nBefore stopping, verify:\n- [ ] Tests were run\n- [ ] Build succeeded\n- [ ] Documentation updated\n```\n\n**Use for:**\n- Reminders about required steps\n- Completion checklists\n- Process enforcement\n\n### prompt Events\n\nMatch user prompt content (advanced):\n\n```markdown\n---\nevent: prompt\nconditions:\n  - field: user_prompt\n    operator: contains\n    pattern: deploy to production\n---\n\nProduction deployment checklist:\n- [ ] Tests passing?\n- [ ] Reviewed by team?\n- [ ] Monitoring ready?\n```\n\n## Pattern Writing Tips\n\n### Regex Basics\n\n**Literal characters:** Most characters match themselves\n- `rm` matches \"rm\"\n- `console.log` matches \"console.log\"\n\n**Special characters need escaping:**\n- `.` (any char) → `\\.` (literal dot)\n- `(` `)` → `\\(` `\\)` (literal parens)\n- `[` `]` → `\\[` `\\]` (literal brackets)\n\n**Common metacharacters:**\n- `\\s` - whitespace (space, tab, newline)\n- `\\d` - digit (0-9)\n- `\\w` - word character (a-z, A-Z, 0-9, _)\n- `.` - any character\n- `+` - one or more\n- `*` - zero or more\n- `?` - zero or one\n- `|` - OR\n\n**Examples:**\n```\nrm\\s+-rf         Matches: rm -rf, rm  -rf\nconsole\\.log\\(   Matches: console.log(\n(eval|exec)\\(    Matches: eval( or exec(\nchmod\\s+777      Matches: chmod 777, chmod  777\nAPI_KEY\\s*=      Matches: API_KEY=, API_KEY =\n```\n\n### Testing Patterns\n\nTest regex patterns before using:\n\n```bash\npython3 -c \"import re; print(re.search(r'your_pattern', 'test text'))\"\n```\n\nOr use online regex testers (regex101.com with Python flavor).\n\n### Common Pitfalls\n\n**Too broad:**\n```yaml\npattern: log    # Matches \"log\", \"login\", \"dialog\", \"catalog\"\n```\nBetter: `console\\.log\\(|logger\\.`\n\n**Too specific:**\n```yaml\npattern: rm -rf /tmp  # Only matches exact path\n```\nBetter: `rm\\s+-rf`\n\n**Escaping issues:**\n- YAML quoted strings: `\"pattern\"` requires double backslashes `\\\\s`\n- YAML unquoted: `pattern: \\s` works as-is\n- **Recommendation**: Use unquoted patterns in YAML\n\n## File Organization\n\n**Location:** All rules in `.claude/` directory\n**Naming:** `.claude/hookify.{descriptive-name}.local.md`\n**Gitignore:** Add `.claude/*.local.md` to `.gitignore`\n\n**Good names:**\n- `hookify.dangerous-rm.local.md`\n- `hookify.console-log.local.md`\n- `hookify.require-tests.local.md`\n- `hookify.sensitive-files.local.md`\n\n**Bad names:**\n- `hookify.rule1.local.md` (not descriptive)\n- `hookify.md` (missing .local)\n- `danger.local.md` (missing hookify prefix)\n\n## Workflow\n\n### Creating a Rule\n\n1. Identify unwanted behavior\n2. Determine which tool is involved (Bash, Edit, etc.)\n3. Choose event type (bash, file, stop, etc.)\n4. Write regex pattern\n5. Create `.claude/hookify.{name}.local.md` file in project root\n6. Test immediately - rules are read dynamically on next tool use\n\n### Refining a Rule\n\n1. Edit the `.local.md` file\n2. Adjust pattern or message\n3. Test immediately - changes take effect on next tool use\n\n### Disabling a Rule\n\n**Temporary:** Set `enabled: false` in frontmatter\n**Permanent:** Delete the `.local.md` file\n\n## Examples\n\nSee `${CLAUDE_PLUGIN_ROOT}/examples/` for complete examples:\n- `dangerous-rm.local.md` - Block dangerous rm commands\n- `console-log-warning.local.md` - Warn about console.log\n- `sensitive-files-warning.local.md` - Warn about editing .env files\n\n## Quick Reference\n\n**Minimum viable rule:**\n```markdown\n---\nname: my-rule\nenabled: true\nevent: bash\npattern: dangerous_command\n---\n\nWarning message here\n```\n\n**Rule with conditions:**\n```markdown\n---\nname: my-rule\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.ts$\n  - field: new_text\n    operator: contains\n    pattern: any\n---\n\nWarning message\n```\n\n**Event types:**\n- `bash` - Bash commands\n- `file` - File edits\n- `stop` - Completion checks\n- `prompt` - User input\n- `all` - All events\n\n**Field options:**\n- Bash: `command`\n- File: `file_path`, `new_text`, `old_text`, `content`\n- Prompt: `user_prompt`\n\n**Operators:**\n- `regex_match`, `contains`, `equals`, `not_contains`, `starts_with`, `ends_with`\n",
        "plugins/jdtls-lsp/README.md": "# jdtls-lsp\n\nJava language server (Eclipse JDT.LS) for Claude Code, providing code intelligence and refactoring.\n\n## Supported Extensions\n`.java`\n\n## Installation\n\n### Via Homebrew (macOS)\n```bash\nbrew install jdtls\n```\n\n### Via package manager (Linux)\n```bash\n# Arch Linux (AUR)\nyay -S jdtls\n\n# Other distros: manual installation required\n```\n\n### Manual Installation\n1. Download from [Eclipse JDT.LS releases](https://download.eclipse.org/jdtls/snapshots/)\n2. Extract to a directory (e.g., `~/.local/share/jdtls`)\n3. Create a wrapper script named `jdtls` in your PATH\n\n## Requirements\n- Java 17 or later (JDK, not just JRE)\n\n## More Information\n- [Eclipse JDT.LS GitHub](https://github.com/eclipse-jdtls/eclipse.jdt.ls)\n- [VSCode Java Extension](https://github.com/redhat-developer/vscode-java) (uses JDT.LS)\n",
        "plugins/kotlin-lsp/README.md": "Kotlin language server for Claude Code, providing code intelligence, refactoring, and analysis.\n\n## Supported Extensions\n`.kt`\n`.kts`\n\n## Installation\n\nInstall the Kotlin LSP CLI.\n\n```bash\nbrew install JetBrains/utils/kotlin-lsp\n```\n\n## More Information\n- [kotlin LSP](https://github.com/Kotlin/kotlin-lsp)",
        "plugins/learning-output-style/.claude-plugin/plugin.json": "{\n  \"name\": \"learning-output-style\",\n  \"description\": \"Interactive learning mode that requests meaningful code contributions at decision points (mimics the unshipped Learning output style)\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/learning-output-style/README.md": "# Learning Style Plugin\n\nThis plugin combines the unshipped Learning output style with explanatory functionality as a SessionStart hook.\n\n**Note:** This plugin differs from the original unshipped Learning output style by also incorporating all functionality from the [explanatory-output-style plugin](https://github.com/anthropics/claude-code/tree/main/plugins/explanatory-output-style), providing both interactive learning and educational insights.\n\nWARNING: Do not install this plugin unless you are fine with incurring the token cost of this plugin's additional instructions and the interactive nature of learning mode.\n\n## What it does\n\nWhen enabled, this plugin automatically adds instructions at the start of each session that encourage Claude to:\n\n1. **Learning Mode:** Engage you in active learning by requesting meaningful code contributions at decision points\n2. **Explanatory Mode:** Provide educational insights about implementation choices and codebase patterns\n\nInstead of implementing everything automatically, Claude will:\n\n1. Identify opportunities where you can write 5-10 lines of meaningful code\n2. Focus on business logic and design choices where your input truly matters\n3. Prepare the context and location for your contribution\n4. Explain trade-offs and guide your implementation\n5. Provide educational insights before and after writing code\n\n## How it works\n\nThe plugin uses a SessionStart hook to inject additional context into every session. This context instructs Claude to adopt an interactive teaching approach where you actively participate in writing key parts of the code.\n\n## When Claude requests contributions\n\nClaude will ask you to write code for:\n- Business logic with multiple valid approaches\n- Error handling strategies\n- Algorithm implementation choices\n- Data structure decisions\n- User experience decisions\n- Design patterns and architecture choices\n\n## When Claude won't request contributions\n\nClaude will implement directly:\n- Boilerplate or repetitive code\n- Obvious implementations with no meaningful choices\n- Configuration or setup code\n- Simple CRUD operations\n\n## Example interaction\n\n**Claude:** I've set up the authentication middleware. The session timeout behavior is a security vs. UX trade-off - should sessions auto-extend on activity, or have a hard timeout?\n\nIn `auth/middleware.ts`, implement the `handleSessionTimeout()` function to define the timeout behavior.\n\nConsider: auto-extending improves UX but may leave sessions open longer; hard timeouts are more secure but might frustrate active users.\n\n**You:** [Write 5-10 lines implementing your preferred approach]\n\n## Educational insights\n\nIn addition to interactive learning, Claude will provide educational insights about implementation choices using this format:\n\n```\n`★ Insight ─────────────────────────────────────`\n[2-3 key educational points about the codebase or implementation]\n`─────────────────────────────────────────────────`\n```\n\nThese insights focus on:\n- Specific implementation choices for your codebase\n- Patterns and conventions in your code\n- Trade-offs and design decisions\n- Codebase-specific details rather than general programming concepts\n\n## Usage\n\nOnce installed, the plugin activates automatically at the start of every session. No additional configuration is needed.\n\n## Migration from Output Styles\n\nThis plugin combines the unshipped \"Learning\" output style with the deprecated \"Explanatory\" output style. It provides an interactive learning experience where you actively contribute code at meaningful decision points, while also receiving educational insights about implementation choices.\n\nIf you previously used the explanatory-output-style plugin, this learning plugin includes all of that functionality plus interactive learning features.\n\nThis SessionStart hook pattern is roughly equivalent to CLAUDE.md, but it is more flexible and allows for distribution through plugins.\n\n## Managing changes\n\n- Disable the plugin - keep the code installed on your device\n- Uninstall the plugin - remove the code from your device\n- Update the plugin - create a local copy of this plugin to personalize it\n  - Hint: Ask Claude to read https://docs.claude.com/en/docs/claude-code/plugins.md and set it up for you!\n\n## Philosophy\n\nLearning by doing is more effective than passive observation. This plugin transforms your interaction with Claude from \"watch and learn\" to \"build and understand,\" ensuring you develop practical skills through hands-on coding of meaningful logic.\n",
        "plugins/learning-output-style/hooks/hooks.json": "{\n  \"description\": \"Learning mode hook that adds interactive learning instructions\",\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks-handlers/session-start.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/lua-lsp/README.md": "# lua-lsp\n\nLua language server for Claude Code, providing code intelligence and diagnostics.\n\n## Supported Extensions\n`.lua`\n\n## Installation\n\n### Via Homebrew (macOS)\n```bash\nbrew install lua-language-server\n```\n\n### Via package manager (Linux)\n```bash\n# Ubuntu/Debian (via snap)\nsudo snap install lua-language-server --classic\n\n# Arch Linux\nsudo pacman -S lua-language-server\n\n# Fedora\nsudo dnf install lua-language-server\n```\n\n### Manual Installation\nDownload pre-built binaries from the [releases page](https://github.com/LuaLS/lua-language-server/releases).\n\n## More Information\n- [Lua Language Server GitHub](https://github.com/LuaLS/lua-language-server)\n- [Documentation](https://luals.github.io/)\n",
        "plugins/php-lsp/README.md": "# php-lsp\n\nPHP language server (Intelephense) for Claude Code, providing code intelligence and diagnostics.\n\n## Supported Extensions\n`.php`\n\n## Installation\n\nInstall Intelephense globally via npm:\n\n```bash\nnpm install -g intelephense\n```\n\nOr with yarn:\n\n```bash\nyarn global add intelephense\n```\n\n## More Information\n- [Intelephense Website](https://intelephense.com/)\n- [Intelephense on npm](https://www.npmjs.com/package/intelephense)\n",
        "plugins/plugin-dev/README.md": "# Plugin Development Toolkit\n\nA comprehensive toolkit for developing Claude Code plugins with expert guidance on hooks, MCP integration, plugin structure, and marketplace publishing.\n\n## Overview\n\nThe plugin-dev toolkit provides seven specialized skills to help you build high-quality Claude Code plugins:\n\n1. **Hook Development** - Advanced hooks API and event-driven automation\n2. **MCP Integration** - Model Context Protocol server integration\n3. **Plugin Structure** - Plugin organization and manifest configuration\n4. **Plugin Settings** - Configuration patterns using .claude/plugin-name.local.md files\n5. **Command Development** - Creating slash commands with frontmatter and arguments\n6. **Agent Development** - Creating autonomous agents with AI-assisted generation\n7. **Skill Development** - Creating skills with progressive disclosure and strong triggers\n\nEach skill follows best practices with progressive disclosure: lean core documentation, detailed references, working examples, and utility scripts.\n\n## Guided Workflow Command\n\n### /plugin-dev:create-plugin\n\nA comprehensive, end-to-end workflow command for creating plugins from scratch, similar to the feature-dev workflow.\n\n**8-Phase Process:**\n1. **Discovery** - Understand plugin purpose and requirements\n2. **Component Planning** - Determine needed skills, commands, agents, hooks, MCP\n3. **Detailed Design** - Specify each component and resolve ambiguities\n4. **Structure Creation** - Set up directories and manifest\n5. **Component Implementation** - Create each component using AI-assisted agents\n6. **Validation** - Run plugin-validator and component-specific checks\n7. **Testing** - Verify plugin works in Claude Code\n8. **Documentation** - Finalize README and prepare for distribution\n\n**Features:**\n- Asks clarifying questions at each phase\n- Loads relevant skills automatically\n- Uses agent-creator for AI-assisted agent generation\n- Runs validation utilities (validate-agent.sh, validate-hook-schema.sh, etc.)\n- Follows plugin-dev's own proven patterns\n- Guides through testing and verification\n\n**Usage:**\n```bash\n/plugin-dev:create-plugin [optional description]\n\n# Examples:\n/plugin-dev:create-plugin\n/plugin-dev:create-plugin A plugin for managing database migrations\n```\n\nUse this workflow for structured, high-quality plugin development from concept to completion.\n\n## Skills\n\n### 1. Hook Development\n\n**Trigger phrases:** \"create a hook\", \"add a PreToolUse hook\", \"validate tool use\", \"implement prompt-based hooks\", \"${CLAUDE_PLUGIN_ROOT}\", \"block dangerous commands\"\n\n**What it covers:**\n- Prompt-based hooks (recommended) with LLM decision-making\n- Command hooks for deterministic validation\n- All hook events: PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification\n- Hook output formats and JSON schemas\n- Security best practices and input validation\n- ${CLAUDE_PLUGIN_ROOT} for portable paths\n\n**Resources:**\n- Core SKILL.md (1,619 words)\n- 3 example hook scripts (validate-write, validate-bash, load-context)\n- 3 reference docs: patterns, migration, advanced techniques\n- 3 utility scripts: validate-hook-schema.sh, test-hook.sh, hook-linter.sh\n\n**Use when:** Creating event-driven automation, validating operations, or enforcing policies in your plugin.\n\n### 2. MCP Integration\n\n**Trigger phrases:** \"add MCP server\", \"integrate MCP\", \"configure .mcp.json\", \"Model Context Protocol\", \"stdio/SSE/HTTP server\", \"connect external service\"\n\n**What it covers:**\n- MCP server configuration (.mcp.json vs plugin.json)\n- All server types: stdio (local), SSE (hosted/OAuth), HTTP (REST), WebSocket (real-time)\n- Environment variable expansion (${CLAUDE_PLUGIN_ROOT}, user vars)\n- MCP tool naming and usage in commands/agents\n- Authentication patterns: OAuth, tokens, env vars\n- Integration patterns and performance optimization\n\n**Resources:**\n- Core SKILL.md (1,666 words)\n- 3 example configurations (stdio, SSE, HTTP)\n- 3 reference docs: server-types (~3,200w), authentication (~2,800w), tool-usage (~2,600w)\n\n**Use when:** Integrating external services, APIs, databases, or tools into your plugin.\n\n### 3. Plugin Structure\n\n**Trigger phrases:** \"plugin structure\", \"plugin.json manifest\", \"auto-discovery\", \"component organization\", \"plugin directory layout\"\n\n**What it covers:**\n- Standard plugin directory structure and auto-discovery\n- plugin.json manifest format and all fields\n- Component organization (commands, agents, skills, hooks)\n- ${CLAUDE_PLUGIN_ROOT} usage throughout\n- File naming conventions and best practices\n- Minimal, standard, and advanced plugin patterns\n\n**Resources:**\n- Core SKILL.md (1,619 words)\n- 3 example structures (minimal, standard, advanced)\n- 2 reference docs: component-patterns, manifest-reference\n\n**Use when:** Starting a new plugin, organizing components, or configuring the plugin manifest.\n\n### 4. Plugin Settings\n\n**Trigger phrases:** \"plugin settings\", \"store plugin configuration\", \".local.md files\", \"plugin state files\", \"read YAML frontmatter\", \"per-project plugin settings\"\n\n**What it covers:**\n- .claude/plugin-name.local.md pattern for configuration\n- YAML frontmatter + markdown body structure\n- Parsing techniques for bash scripts (sed, awk, grep patterns)\n- Temporarily active hooks (flag files and quick-exit)\n- Real-world examples from multi-agent-swarm and ralph-loop plugins\n- Atomic file updates and validation\n- Gitignore and lifecycle management\n\n**Resources:**\n- Core SKILL.md (1,623 words)\n- 3 examples (read-settings hook, create-settings command, templates)\n- 2 reference docs: parsing-techniques, real-world-examples\n- 2 utility scripts: validate-settings.sh, parse-frontmatter.sh\n\n**Use when:** Making plugins configurable, storing per-project state, or implementing user preferences.\n\n### 5. Command Development\n\n**Trigger phrases:** \"create a slash command\", \"add a command\", \"command frontmatter\", \"define command arguments\", \"organize commands\"\n\n**What it covers:**\n- Slash command structure and markdown format\n- YAML frontmatter fields (description, argument-hint, allowed-tools)\n- Dynamic arguments and file references\n- Bash execution for context\n- Command organization and namespacing\n- Best practices for command development\n\n**Resources:**\n- Core SKILL.md (1,535 words)\n- Examples and reference documentation\n- Command organization patterns\n\n**Use when:** Creating slash commands, defining command arguments, or organizing plugin commands.\n\n### 6. Agent Development\n\n**Trigger phrases:** \"create an agent\", \"add an agent\", \"write a subagent\", \"agent frontmatter\", \"when to use description\", \"agent examples\", \"autonomous agent\"\n\n**What it covers:**\n- Agent file structure (YAML frontmatter + system prompt)\n- All frontmatter fields (name, description, model, color, tools)\n- Description format with <example> blocks for reliable triggering\n- System prompt design patterns (analysis, generation, validation, orchestration)\n- AI-assisted agent generation using Claude Code's proven prompt\n- Validation rules and best practices\n- Complete production-ready agent examples\n\n**Resources:**\n- Core SKILL.md (1,438 words)\n- 2 examples: agent-creation-prompt (AI-assisted workflow), complete-agent-examples (4 full agents)\n- 3 reference docs: agent-creation-system-prompt (from Claude Code), system-prompt-design (~4,000w), triggering-examples (~2,500w)\n- 1 utility script: validate-agent.sh\n\n**Use when:** Creating autonomous agents, defining agent behavior, or implementing AI-assisted agent generation.\n\n### 7. Skill Development\n\n**Trigger phrases:** \"create a skill\", \"add a skill to plugin\", \"write a new skill\", \"improve skill description\", \"organize skill content\"\n\n**What it covers:**\n- Skill structure (SKILL.md with YAML frontmatter)\n- Progressive disclosure principle (metadata → SKILL.md → resources)\n- Strong trigger descriptions with specific phrases\n- Writing style (imperative/infinitive form, third person)\n- Bundled resources organization (references/, examples/, scripts/)\n- Skill creation workflow\n- Based on skill-creator methodology adapted for Claude Code plugins\n\n**Resources:**\n- Core SKILL.md (1,232 words)\n- References: skill-creator methodology, plugin-dev patterns\n- Examples: Study plugin-dev's own skills as templates\n\n**Use when:** Creating new skills for plugins or improving existing skill quality.\n\n\n## Installation\n\nInstall from claude-code-marketplace:\n\n```bash\n/plugin install plugin-dev@claude-code-marketplace\n```\n\nOr for development, use directly:\n\n```bash\ncc --plugin-dir /path/to/plugin-dev\n```\n\n## Quick Start\n\n### Creating Your First Plugin\n\n1. **Plan your plugin structure:**\n   - Ask: \"What's the best directory structure for a plugin with commands and MCP integration?\"\n   - The plugin-structure skill will guide you\n\n2. **Add MCP integration (if needed):**\n   - Ask: \"How do I add an MCP server for database access?\"\n   - The mcp-integration skill provides examples and patterns\n\n3. **Implement hooks (if needed):**\n   - Ask: \"Create a PreToolUse hook that validates file writes\"\n   - The hook-development skill gives working examples and utilities\n\n\n## Development Workflow\n\nThe plugin-dev toolkit supports your entire plugin development lifecycle:\n\n```\n┌─────────────────────┐\n│  Design Structure   │  → plugin-structure skill\n│  (manifest, layout) │\n└──────────┬──────────┘\n           │\n┌──────────▼──────────┐\n│  Add Components     │\n│  (commands, agents, │  → All skills provide guidance\n│   skills, hooks)    │\n└──────────┬──────────┘\n           │\n┌──────────▼──────────┐\n│  Integrate Services │  → mcp-integration skill\n│  (MCP servers)      │\n└──────────┬──────────┘\n           │\n┌──────────▼──────────┐\n│  Add Automation     │  → hook-development skill\n│  (hooks, validation)│     + utility scripts\n└──────────┬──────────┘\n           │\n┌──────────▼──────────┐\n│  Test & Validate    │  → hook-development utilities\n│                     │     validate-hook-schema.sh\n└──────────┬──────────┘     test-hook.sh\n           │                 hook-linter.sh\n```\n\n## Features\n\n### Progressive Disclosure\n\nEach skill uses a three-level disclosure system:\n1. **Metadata** (always loaded): Concise descriptions with strong triggers\n2. **Core SKILL.md** (when triggered): Essential API reference (~1,500-2,000 words)\n3. **References/Examples** (as needed): Detailed guides, patterns, and working code\n\nThis keeps Claude Code's context focused while providing deep knowledge when needed.\n\n### Utility Scripts\n\nThe hook-development skill includes production-ready utilities:\n\n```bash\n# Validate hooks.json structure\n./validate-hook-schema.sh hooks/hooks.json\n\n# Test hooks before deployment\n./test-hook.sh my-hook.sh test-input.json\n\n# Lint hook scripts for best practices\n./hook-linter.sh my-hook.sh\n```\n\n### Working Examples\n\nEvery skill provides working examples:\n- **Hook Development**: 3 complete hook scripts (bash, write validation, context loading)\n- **MCP Integration**: 3 server configurations (stdio, SSE, HTTP)\n- **Plugin Structure**: 3 plugin layouts (minimal, standard, advanced)\n- **Plugin Settings**: 3 examples (read-settings hook, create-settings command, templates)\n- **Command Development**: 10 complete command examples (review, test, deploy, docs, etc.)\n\n## Documentation Standards\n\nAll skills follow consistent standards:\n- Third-person descriptions (\"This skill should be used when...\")\n- Strong trigger phrases for reliable loading\n- Imperative/infinitive form throughout\n- Based on official Claude Code documentation\n- Security-first approach with best practices\n\n## Total Content\n\n- **Core Skills**: ~11,065 words across 7 SKILL.md files\n- **Reference Docs**: ~10,000+ words of detailed guides\n- **Examples**: 12+ working examples (hook scripts, MCP configs, plugin layouts, settings files)\n- **Utilities**: 6 production-ready validation/testing/parsing scripts\n\n## Use Cases\n\n### Building a Database Plugin\n\n```\n1. \"What's the structure for a plugin with MCP integration?\"\n   → plugin-structure skill provides layout\n\n2. \"How do I configure an stdio MCP server for PostgreSQL?\"\n   → mcp-integration skill shows configuration\n\n3. \"Add a Stop hook to ensure connections close properly\"\n   → hook-development skill provides pattern\n\n```\n\n### Creating a Validation Plugin\n\n```\n1. \"Create hooks that validate all file writes for security\"\n   → hook-development skill with examples\n\n2. \"Test my hooks before deploying\"\n   → Use validate-hook-schema.sh and test-hook.sh\n\n3. \"Organize my hooks and configuration files\"\n   → plugin-structure skill shows best practices\n\n```\n\n### Integrating External Services\n\n```\n1. \"Add Asana MCP server with OAuth\"\n   → mcp-integration skill covers SSE servers\n\n2. \"Use Asana tools in my commands\"\n   → mcp-integration tool-usage reference\n\n3. \"Structure my plugin with commands and MCP\"\n   → plugin-structure skill provides patterns\n```\n\n## Best Practices\n\nAll skills emphasize:\n\n✅ **Security First**\n- Input validation in hooks\n- HTTPS/WSS for MCP servers\n- Environment variables for credentials\n- Principle of least privilege\n\n✅ **Portability**\n- Use ${CLAUDE_PLUGIN_ROOT} everywhere\n- Relative paths only\n- Environment variable substitution\n\n✅ **Testing**\n- Validate configurations before deployment\n- Test hooks with sample inputs\n- Use debug mode (`claude --debug`)\n\n✅ **Documentation**\n- Clear README files\n- Documented environment variables\n- Usage examples\n\n## Contributing\n\nThis plugin is part of the claude-code-marketplace. To contribute improvements:\n\n1. Fork the marketplace repository\n2. Make changes to plugin-dev/\n3. Test locally with `cc --plugin-dir`\n4. Create PR following marketplace-publishing guidelines\n\n## Version\n\n0.1.0 - Initial release with seven comprehensive skills and three validation agents\n\n## Author\n\nDaisy Hollman (daisy@anthropic.com)\n\n## License\n\nMIT License - See repository for details\n\n---\n\n**Note:** This toolkit is designed to help you build high-quality plugins. The skills load automatically when you ask relevant questions, providing expert guidance exactly when you need it.\n",
        "plugins/plugin-dev/agents/agent-creator.md": "---\nname: agent-creator\ndescription: Use this agent when the user asks to \"create an agent\", \"generate an agent\", \"build a new agent\", \"make me an agent that...\", or describes agent functionality they need. Trigger when user wants to create autonomous agents for plugins. Examples:\n\n<example>\nContext: User wants to create a code review agent\nuser: \"Create an agent that reviews code for quality issues\"\nassistant: \"I'll use the agent-creator agent to generate the agent configuration.\"\n<commentary>\nUser requesting new agent creation, trigger agent-creator to generate it.\n</commentary>\n</example>\n\n<example>\nContext: User describes needed functionality\nuser: \"I need an agent that generates unit tests for my code\"\nassistant: \"I'll use the agent-creator agent to create a test generation agent.\"\n<commentary>\nUser describes agent need, trigger agent-creator to build it.\n</commentary>\n</example>\n\n<example>\nContext: User wants to add agent to plugin\nuser: \"Add an agent to my plugin that validates configurations\"\nassistant: \"I'll use the agent-creator agent to generate a configuration validator agent.\"\n<commentary>\nPlugin development with agent addition, trigger agent-creator.\n</commentary>\n</example>\n\nmodel: sonnet\ncolor: magenta\ntools: [\"Write\", \"Read\"]\n---\n\nYou are an elite AI agent architect specializing in crafting high-performance agent configurations. Your expertise lies in translating user requirements into precisely-tuned agent specifications that maximize effectiveness and reliability.\n\n**Important Context**: You may have access to project-specific instructions from CLAUDE.md files and other context that may include coding standards, project structure, and custom requirements. Consider this context when creating agents to ensure they align with the project's established patterns and practices.\n\nWhen a user describes what they want an agent to do, you will:\n\n1. **Extract Core Intent**: Identify the fundamental purpose, key responsibilities, and success criteria for the agent. Look for both explicit requirements and implicit needs. Consider any project-specific context from CLAUDE.md files. For agents that are meant to review code, you should assume that the user is asking to review recently written code and not the whole codebase, unless the user has explicitly instructed you otherwise.\n\n2. **Design Expert Persona**: Create a compelling expert identity that embodies deep domain knowledge relevant to the task. The persona should inspire confidence and guide the agent's decision-making approach.\n\n3. **Architect Comprehensive Instructions**: Develop a system prompt that:\n   - Establishes clear behavioral boundaries and operational parameters\n   - Provides specific methodologies and best practices for task execution\n   - Anticipates edge cases and provides guidance for handling them\n   - Incorporates any specific requirements or preferences mentioned by the user\n   - Defines output format expectations when relevant\n   - Aligns with project-specific coding standards and patterns from CLAUDE.md\n\n4. **Optimize for Performance**: Include:\n   - Decision-making frameworks appropriate to the domain\n   - Quality control mechanisms and self-verification steps\n   - Efficient workflow patterns\n   - Clear escalation or fallback strategies\n\n5. **Create Identifier**: Design a concise, descriptive identifier that:\n   - Uses lowercase letters, numbers, and hyphens only\n   - Is typically 2-4 words joined by hyphens\n   - Clearly indicates the agent's primary function\n   - Is memorable and easy to type\n   - Avoids generic terms like \"helper\" or \"assistant\"\n\n6. **Craft Triggering Examples**: Create 2-4 `<example>` blocks showing:\n   - Different phrasings for same intent\n   - Both explicit and proactive triggering\n   - Context, user message, assistant response, commentary\n   - Why the agent should trigger in each scenario\n   - Show assistant using the Agent tool to launch the agent\n\n**Agent Creation Process:**\n\n1. **Understand Request**: Analyze user's description of what agent should do\n\n2. **Design Agent Configuration**:\n   - **Identifier**: Create concise, descriptive name (lowercase, hyphens, 3-50 chars)\n   - **Description**: Write triggering conditions starting with \"Use this agent when...\"\n   - **Examples**: Create 2-4 `<example>` blocks with:\n     ```\n     <example>\n     Context: [Situation that should trigger agent]\n     user: \"[User message]\"\n     assistant: \"[Response before triggering]\"\n     <commentary>\n     [Why agent should trigger]\n     </commentary>\n     assistant: \"I'll use the [agent-name] agent to [what it does].\"\n     </example>\n     ```\n   - **System Prompt**: Create comprehensive instructions with:\n     - Role and expertise\n     - Core responsibilities (numbered list)\n     - Detailed process (step-by-step)\n     - Quality standards\n     - Output format\n     - Edge case handling\n\n3. **Select Configuration**:\n   - **Model**: Use `inherit` unless user specifies (sonnet for complex, haiku for simple)\n   - **Color**: Choose appropriate color:\n     - blue/cyan: Analysis, review\n     - green: Generation, creation\n     - yellow: Validation, caution\n     - red: Security, critical\n     - magenta: Transformation, creative\n   - **Tools**: Recommend minimal set needed, or omit for full access\n\n4. **Generate Agent File**: Use Write tool to create `agents/[identifier].md`:\n   ```markdown\n   ---\n   name: [identifier]\n   description: [Use this agent when... Examples: <example>...</example>]\n   model: inherit\n   color: [chosen-color]\n   tools: [\"Tool1\", \"Tool2\"]  # Optional\n   ---\n\n   [Complete system prompt]\n   ```\n\n5. **Explain to User**: Provide summary of created agent:\n   - What it does\n   - When it triggers\n   - Where it's saved\n   - How to test it\n   - Suggest running validation: `Use the plugin-validator agent to check the plugin structure`\n\n**Quality Standards:**\n- Identifier follows naming rules (lowercase, hyphens, 3-50 chars)\n- Description has strong trigger phrases and 2-4 examples\n- Examples show both explicit and proactive triggering\n- System prompt is comprehensive (500-3,000 words)\n- System prompt has clear structure (role, responsibilities, process, output)\n- Model choice is appropriate\n- Tool selection follows least privilege\n- Color choice matches agent purpose\n\n**Output Format:**\nCreate agent file, then provide summary:\n\n## Agent Created: [identifier]\n\n### Configuration\n- **Name:** [identifier]\n- **Triggers:** [When it's used]\n- **Model:** [choice]\n- **Color:** [choice]\n- **Tools:** [list or \"all tools\"]\n\n### File Created\n`agents/[identifier].md` ([word count] words)\n\n### How to Use\nThis agent will trigger when [triggering scenarios].\n\nTest it by: [suggest test scenario]\n\nValidate with: `scripts/validate-agent.sh agents/[identifier].md`\n\n### Next Steps\n[Recommendations for testing, integration, or improvements]\n\n**Edge Cases:**\n- Vague user request: Ask clarifying questions before generating\n- Conflicts with existing agents: Note conflict, suggest different scope/name\n- Very complex requirements: Break into multiple specialized agents\n- User wants specific tool access: Honor the request in agent configuration\n- User specifies model: Use specified model instead of inherit\n- First agent in plugin: Create agents/ directory first\n```\n\nThis agent automates agent creation using the proven patterns from Claude Code's internal implementation, making it easy for users to create high-quality autonomous agents.\n",
        "plugins/plugin-dev/agents/plugin-validator.md": "---\nname: plugin-validator\ndescription: Use this agent when the user asks to \"validate my plugin\", \"check plugin structure\", \"verify plugin is correct\", \"validate plugin.json\", \"check plugin files\", or mentions plugin validation. Also trigger proactively after user creates or modifies plugin components. Examples:\n\n<example>\nContext: User finished creating a new plugin\nuser: \"I've created my first plugin with commands and hooks\"\nassistant: \"Great! Let me validate the plugin structure.\"\n<commentary>\nPlugin created, proactively validate to catch issues early.\n</commentary>\nassistant: \"I'll use the plugin-validator agent to check the plugin.\"\n</example>\n\n<example>\nContext: User explicitly requests validation\nuser: \"Validate my plugin before I publish it\"\nassistant: \"I'll use the plugin-validator agent to perform comprehensive validation.\"\n<commentary>\nExplicit validation request triggers the agent.\n</commentary>\n</example>\n\n<example>\nContext: User modified plugin.json\nuser: \"I've updated the plugin manifest\"\nassistant: \"Let me validate the changes.\"\n<commentary>\nManifest modified, validate to ensure correctness.\n</commentary>\nassistant: \"I'll use the plugin-validator agent to check the manifest.\"\n</example>\n\nmodel: inherit\ncolor: yellow\ntools: [\"Read\", \"Grep\", \"Glob\", \"Bash\"]\n---\n\nYou are an expert plugin validator specializing in comprehensive validation of Claude Code plugin structure, configuration, and components.\n\n**Your Core Responsibilities:**\n1. Validate plugin structure and organization\n2. Check plugin.json manifest for correctness\n3. Validate all component files (commands, agents, skills, hooks)\n4. Verify naming conventions and file organization\n5. Check for common issues and anti-patterns\n6. Provide specific, actionable recommendations\n\n**Validation Process:**\n\n1. **Locate Plugin Root**:\n   - Check for `.claude-plugin/plugin.json`\n   - Verify plugin directory structure\n   - Note plugin location (project vs marketplace)\n\n2. **Validate Manifest** (`.claude-plugin/plugin.json`):\n   - Check JSON syntax (use Bash with `jq` or Read + manual parsing)\n   - Verify required field: `name`\n   - Check name format (kebab-case, no spaces)\n   - Validate optional fields if present:\n     - `version`: Semantic versioning format (X.Y.Z)\n     - `description`: Non-empty string\n     - `author`: Valid structure\n     - `mcpServers`: Valid server configurations\n   - Check for unknown fields (warn but don't fail)\n\n3. **Validate Directory Structure**:\n   - Use Glob to find component directories\n   - Check standard locations:\n     - `commands/` for slash commands\n     - `agents/` for agent definitions\n     - `skills/` for skill directories\n     - `hooks/hooks.json` for hooks\n   - Verify auto-discovery works\n\n4. **Validate Commands** (if `commands/` exists):\n   - Use Glob to find `commands/**/*.md`\n   - For each command file:\n     - Check YAML frontmatter present (starts with `---`)\n     - Verify `description` field exists\n     - Check `argument-hint` format if present\n     - Validate `allowed-tools` is array if present\n     - Ensure markdown content exists\n   - Check for naming conflicts\n\n5. **Validate Agents** (if `agents/` exists):\n   - Use Glob to find `agents/**/*.md`\n   - For each agent file:\n     - Use the validate-agent.sh utility from agent-development skill\n     - Or manually check:\n       - Frontmatter with `name`, `description`, `model`, `color`\n       - Name format (lowercase, hyphens, 3-50 chars)\n       - Description includes `<example>` blocks\n       - Model is valid (inherit/sonnet/opus/haiku)\n       - Color is valid (blue/cyan/green/yellow/magenta/red)\n       - System prompt exists and is substantial (>20 chars)\n\n6. **Validate Skills** (if `skills/` exists):\n   - Use Glob to find `skills/*/SKILL.md`\n   - For each skill directory:\n     - Verify `SKILL.md` file exists\n     - Check YAML frontmatter with `name` and `description`\n     - Verify description is concise and clear\n     - Check for references/, examples/, scripts/ subdirectories\n     - Validate referenced files exist\n\n7. **Validate Hooks** (if `hooks/hooks.json` exists):\n   - Use the validate-hook-schema.sh utility from hook-development skill\n   - Or manually check:\n     - Valid JSON syntax\n     - Valid event names (PreToolUse, PostToolUse, Stop, etc.)\n     - Each hook has `matcher` and `hooks` array\n     - Hook type is `command` or `prompt`\n     - Commands reference existing scripts with ${CLAUDE_PLUGIN_ROOT}\n\n8. **Validate MCP Configuration** (if `.mcp.json` or `mcpServers` in manifest):\n   - Check JSON syntax\n   - Verify server configurations:\n     - stdio: has `command` field\n     - sse/http/ws: has `url` field\n     - Type-specific fields present\n   - Check ${CLAUDE_PLUGIN_ROOT} usage for portability\n\n9. **Check File Organization**:\n   - README.md exists and is comprehensive\n   - No unnecessary files (node_modules, .DS_Store, etc.)\n   - .gitignore present if needed\n   - LICENSE file present\n\n10. **Security Checks**:\n    - No hardcoded credentials in any files\n    - MCP servers use HTTPS/WSS not HTTP/WS\n    - Hooks don't have obvious security issues\n    - No secrets in example files\n\n**Quality Standards:**\n- All validation errors include file path and specific issue\n- Warnings distinguished from errors\n- Provide fix suggestions for each issue\n- Include positive findings for well-structured components\n- Categorize by severity (critical/major/minor)\n\n**Output Format:**\n## Plugin Validation Report\n\n### Plugin: [name]\nLocation: [path]\n\n### Summary\n[Overall assessment - pass/fail with key stats]\n\n### Critical Issues ([count])\n- `file/path` - [Issue] - [Fix]\n\n### Warnings ([count])\n- `file/path` - [Issue] - [Recommendation]\n\n### Component Summary\n- Commands: [count] found, [count] valid\n- Agents: [count] found, [count] valid\n- Skills: [count] found, [count] valid\n- Hooks: [present/not present], [valid/invalid]\n- MCP Servers: [count] configured\n\n### Positive Findings\n- [What's done well]\n\n### Recommendations\n1. [Priority recommendation]\n2. [Additional recommendation]\n\n### Overall Assessment\n[PASS/FAIL] - [Reasoning]\n\n**Edge Cases:**\n- Minimal plugin (just plugin.json): Valid if manifest correct\n- Empty directories: Warn but don't fail\n- Unknown fields in manifest: Warn but don't fail\n- Multiple validation errors: Group by file, prioritize critical\n- Plugin not found: Clear error message with guidance\n- Corrupted files: Skip and report, continue validation\n```\n\nExcellent work! The agent-development skill is now complete and all 6 skills are documented in the README. Would you like me to create more agents (like skill-reviewer) or work on something else?",
        "plugins/plugin-dev/agents/skill-reviewer.md": "---\nname: skill-reviewer\ndescription: Use this agent when the user has created or modified a skill and needs quality review, asks to \"review my skill\", \"check skill quality\", \"improve skill description\", or wants to ensure skill follows best practices. Trigger proactively after skill creation. Examples:\n\n<example>\nContext: User just created a new skill\nuser: \"I've created a PDF processing skill\"\nassistant: \"Great! Let me review the skill quality.\"\n<commentary>\nSkill created, proactively trigger skill-reviewer to ensure it follows best practices.\n</commentary>\nassistant: \"I'll use the skill-reviewer agent to review the skill.\"\n</example>\n\n<example>\nContext: User requests skill review\nuser: \"Review my skill and tell me how to improve it\"\nassistant: \"I'll use the skill-reviewer agent to analyze the skill quality.\"\n<commentary>\nExplicit skill review request triggers the agent.\n</commentary>\n</example>\n\n<example>\nContext: User modified skill description\nuser: \"I updated the skill description, does it look good?\"\nassistant: \"I'll use the skill-reviewer agent to review the changes.\"\n<commentary>\nSkill description modified, review for triggering effectiveness.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: cyan\ntools: [\"Read\", \"Grep\", \"Glob\"]\n---\n\nYou are an expert skill architect specializing in reviewing and improving Claude Code skills for maximum effectiveness and reliability.\n\n**Your Core Responsibilities:**\n1. Review skill structure and organization\n2. Evaluate description quality and triggering effectiveness\n3. Assess progressive disclosure implementation\n4. Check adherence to skill-creator best practices\n5. Provide specific recommendations for improvement\n\n**Skill Review Process:**\n\n1. **Locate and Read Skill**:\n   - Find SKILL.md file (user should indicate path)\n   - Read frontmatter and body content\n   - Check for supporting directories (references/, examples/, scripts/)\n\n2. **Validate Structure**:\n   - Frontmatter format (YAML between `---`)\n   - Required fields: `name`, `description`\n   - Optional fields: `version`, `when_to_use` (note: deprecated, use description only)\n   - Body content exists and is substantial\n\n3. **Evaluate Description** (Most Critical):\n   - **Trigger Phrases**: Does description include specific phrases users would say?\n   - **Third Person**: Uses \"This skill should be used when...\" not \"Load this skill when...\"\n   - **Specificity**: Concrete scenarios, not vague\n   - **Length**: Appropriate (not too short <50 chars, not too long >500 chars for description)\n   - **Example Triggers**: Lists specific user queries that should trigger skill\n\n4. **Assess Content Quality**:\n   - **Word Count**: SKILL.md body should be 1,000-3,000 words (lean, focused)\n   - **Writing Style**: Imperative/infinitive form (\"To do X, do Y\" not \"You should do X\")\n   - **Organization**: Clear sections, logical flow\n   - **Specificity**: Concrete guidance, not vague advice\n\n5. **Check Progressive Disclosure**:\n   - **Core SKILL.md**: Essential information only\n   - **references/**: Detailed docs moved out of core\n   - **examples/**: Working code examples separate\n   - **scripts/**: Utility scripts if needed\n   - **Pointers**: SKILL.md references these resources clearly\n\n6. **Review Supporting Files** (if present):\n   - **references/**: Check quality, relevance, organization\n   - **examples/**: Verify examples are complete and correct\n   - **scripts/**: Check scripts are executable and documented\n\n7. **Identify Issues**:\n   - Categorize by severity (critical/major/minor)\n   - Note anti-patterns:\n     - Vague trigger descriptions\n     - Too much content in SKILL.md (should be in references/)\n     - Second person in description\n     - Missing key triggers\n     - No examples/references when they'd be valuable\n\n8. **Generate Recommendations**:\n   - Specific fixes for each issue\n   - Before/after examples when helpful\n   - Prioritized by impact\n\n**Quality Standards:**\n- Description must have strong, specific trigger phrases\n- SKILL.md should be lean (under 3,000 words ideally)\n- Writing style must be imperative/infinitive form\n- Progressive disclosure properly implemented\n- All file references work correctly\n- Examples are complete and accurate\n\n**Output Format:**\n## Skill Review: [skill-name]\n\n### Summary\n[Overall assessment and word counts]\n\n### Description Analysis\n**Current:** [Show current description]\n\n**Issues:**\n- [Issue 1 with description]\n- [Issue 2...]\n\n**Recommendations:**\n- [Specific fix 1]\n- Suggested improved description: \"[better version]\"\n\n### Content Quality\n\n**SKILL.md Analysis:**\n- Word count: [count] ([assessment: too long/good/too short])\n- Writing style: [assessment]\n- Organization: [assessment]\n\n**Issues:**\n- [Content issue 1]\n- [Content issue 2]\n\n**Recommendations:**\n- [Specific improvement 1]\n- Consider moving [section X] to references/[filename].md\n\n### Progressive Disclosure\n\n**Current Structure:**\n- SKILL.md: [word count]\n- references/: [count] files, [total words]\n- examples/: [count] files\n- scripts/: [count] files\n\n**Assessment:**\n[Is progressive disclosure effective?]\n\n**Recommendations:**\n[Suggestions for better organization]\n\n### Specific Issues\n\n#### Critical ([count])\n- [File/location]: [Issue] - [Fix]\n\n#### Major ([count])\n- [File/location]: [Issue] - [Recommendation]\n\n#### Minor ([count])\n- [File/location]: [Issue] - [Suggestion]\n\n### Positive Aspects\n- [What's done well 1]\n- [What's done well 2]\n\n### Overall Rating\n[Pass/Needs Improvement/Needs Major Revision]\n\n### Priority Recommendations\n1. [Highest priority fix]\n2. [Second priority]\n3. [Third priority]\n\n**Edge Cases:**\n- Skill with no description issues: Focus on content and organization\n- Very long skill (>5,000 words): Strongly recommend splitting into references\n- New skill (minimal content): Provide constructive building guidance\n- Perfect skill: Acknowledge quality and suggest minor enhancements only\n- Missing referenced files: Report errors clearly with paths\n```\n\nThis agent helps users create high-quality skills by applying the same standards used in plugin-dev's own skills.\n",
        "plugins/plugin-dev/commands/create-plugin.md": "---\ndescription: Guided end-to-end plugin creation workflow with component design, implementation, and validation\nargument-hint: Optional plugin description\nallowed-tools: [\"Read\", \"Write\", \"Grep\", \"Glob\", \"Bash\", \"TodoWrite\", \"AskUserQuestion\", \"Skill\", \"Task\"]\n---\n\n# Plugin Creation Workflow\n\nGuide the user through creating a complete, high-quality Claude Code plugin from initial concept to tested implementation. Follow a systematic approach: understand requirements, design components, clarify details, implement following best practices, validate, and test.\n\n## Core Principles\n\n- **Ask clarifying questions**: Identify all ambiguities about plugin purpose, triggering, scope, and components. Ask specific, concrete questions rather than making assumptions. Wait for user answers before proceeding with implementation.\n- **Load relevant skills**: Use the Skill tool to load plugin-dev skills when needed (plugin-structure, hook-development, agent-development, etc.)\n- **Use specialized agents**: Leverage agent-creator, plugin-validator, and skill-reviewer agents for AI-assisted development\n- **Follow best practices**: Apply patterns from plugin-dev's own implementation\n- **Progressive disclosure**: Create lean skills with references/examples\n- **Use TodoWrite**: Track all progress throughout all phases\n\n**Initial request:** $ARGUMENTS\n\n---\n\n## Phase 1: Discovery\n\n**Goal**: Understand what plugin needs to be built and what problem it solves\n\n**Actions**:\n1. Create todo list with all 7 phases\n2. If plugin purpose is clear from arguments:\n   - Summarize understanding\n   - Identify plugin type (integration, workflow, analysis, toolkit, etc.)\n3. If plugin purpose is unclear, ask user:\n   - What problem does this plugin solve?\n   - Who will use it and when?\n   - What should it do?\n   - Any similar plugins to reference?\n4. Summarize understanding and confirm with user before proceeding\n\n**Output**: Clear statement of plugin purpose and target users\n\n---\n\n## Phase 2: Component Planning\n\n**Goal**: Determine what plugin components are needed\n\n**MUST load plugin-structure skill** using Skill tool before this phase.\n\n**Actions**:\n1. Load plugin-structure skill to understand component types\n2. Analyze plugin requirements and determine needed components:\n   - **Skills**: Does it need specialized knowledge? (hooks API, MCP patterns, etc.)\n   - **Commands**: User-initiated actions? (deploy, configure, analyze)\n   - **Agents**: Autonomous tasks? (validation, generation, analysis)\n   - **Hooks**: Event-driven automation? (validation, notifications)\n   - **MCP**: External service integration? (databases, APIs)\n   - **Settings**: User configuration? (.local.md files)\n3. For each component type needed, identify:\n   - How many of each type\n   - What each one does\n   - Rough triggering/usage patterns\n4. Present component plan to user as table:\n   ```\n   | Component Type | Count | Purpose |\n   |----------------|-------|---------|\n   | Skills         | 2     | Hook patterns, MCP usage |\n   | Commands       | 3     | Deploy, configure, validate |\n   | Agents         | 1     | Autonomous validation |\n   | Hooks          | 0     | Not needed |\n   | MCP            | 1     | Database integration |\n   ```\n5. Get user confirmation or adjustments\n\n**Output**: Confirmed list of components to create\n\n---\n\n## Phase 3: Detailed Design & Clarifying Questions\n\n**Goal**: Specify each component in detail and resolve all ambiguities\n\n**CRITICAL**: This is one of the most important phases. DO NOT SKIP.\n\n**Actions**:\n1. For each component in the plan, identify underspecified aspects:\n   - **Skills**: What triggers them? What knowledge do they provide? How detailed?\n   - **Commands**: What arguments? What tools? Interactive or automated?\n   - **Agents**: When to trigger (proactive/reactive)? What tools? Output format?\n   - **Hooks**: Which events? Prompt or command based? Validation criteria?\n   - **MCP**: What server type? Authentication? Which tools?\n   - **Settings**: What fields? Required vs optional? Defaults?\n\n2. **Present all questions to user in organized sections** (one section per component type)\n\n3. **Wait for answers before proceeding to implementation**\n\n4. If user says \"whatever you think is best\", provide specific recommendations and get explicit confirmation\n\n**Example questions for a skill**:\n- What specific user queries should trigger this skill?\n- Should it include utility scripts? What functionality?\n- How detailed should the core SKILL.md be vs references/?\n- Any real-world examples to include?\n\n**Example questions for an agent**:\n- Should this agent trigger proactively after certain actions, or only when explicitly requested?\n- What tools does it need (Read, Write, Bash, etc.)?\n- What should the output format be?\n- Any specific quality standards to enforce?\n\n**Output**: Detailed specification for each component\n\n---\n\n## Phase 4: Plugin Structure Creation\n\n**Goal**: Create plugin directory structure and manifest\n\n**Actions**:\n1. Determine plugin name (kebab-case, descriptive)\n2. Choose plugin location:\n   - Ask user: \"Where should I create the plugin?\"\n   - Offer options: current directory, ../new-plugin-name, custom path\n3. Create directory structure using bash:\n   ```bash\n   mkdir -p plugin-name/.claude-plugin\n   mkdir -p plugin-name/skills     # if needed\n   mkdir -p plugin-name/commands   # if needed\n   mkdir -p plugin-name/agents     # if needed\n   mkdir -p plugin-name/hooks      # if needed\n   ```\n4. Create plugin.json manifest using Write tool:\n   ```json\n   {\n     \"name\": \"plugin-name\",\n     \"version\": \"0.1.0\",\n     \"description\": \"[brief description]\",\n     \"author\": {\n       \"name\": \"[author from user or default]\",\n       \"email\": \"[email or default]\"\n     }\n   }\n   ```\n5. Create README.md template\n6. Create .gitignore if needed (for .claude/*.local.md, etc.)\n7. Initialize git repo if creating new directory\n\n**Output**: Plugin directory structure created and ready for components\n\n---\n\n## Phase 5: Component Implementation\n\n**Goal**: Create each component following best practices\n\n**LOAD RELEVANT SKILLS** before implementing each component type:\n- Skills: Load skill-development skill\n- Commands: Load command-development skill\n- Agents: Load agent-development skill\n- Hooks: Load hook-development skill\n- MCP: Load mcp-integration skill\n- Settings: Load plugin-settings skill\n\n**Actions for each component**:\n\n### For Skills:\n1. Load skill-development skill using Skill tool\n2. For each skill:\n   - Ask user for concrete usage examples (or use from Phase 3)\n   - Plan resources (scripts/, references/, examples/)\n   - Create skill directory structure\n   - Write SKILL.md with:\n     - Third-person description with specific trigger phrases\n     - Lean body (1,500-2,000 words) in imperative form\n     - References to supporting files\n   - Create reference files for detailed content\n   - Create example files for working code\n   - Create utility scripts if needed\n3. Use skill-reviewer agent to validate each skill\n\n### For Commands:\n1. Load command-development skill using Skill tool\n2. For each command:\n   - Write command markdown with frontmatter\n   - Include clear description and argument-hint\n   - Specify allowed-tools (minimal necessary)\n   - Write instructions FOR Claude (not TO user)\n   - Provide usage examples and tips\n   - Reference relevant skills if applicable\n\n### For Agents:\n1. Load agent-development skill using Skill tool\n2. For each agent, use agent-creator agent:\n   - Provide description of what agent should do\n   - Agent-creator generates: identifier, whenToUse with examples, systemPrompt\n   - Create agent markdown file with frontmatter and system prompt\n   - Add appropriate model, color, and tools\n   - Validate with validate-agent.sh script\n\n### For Hooks:\n1. Load hook-development skill using Skill tool\n2. For each hook:\n   - Create hooks/hooks.json with hook configuration\n   - Prefer prompt-based hooks for complex logic\n   - Use ${CLAUDE_PLUGIN_ROOT} for portability\n   - Create hook scripts if needed (in examples/ not scripts/)\n   - Test with validate-hook-schema.sh and test-hook.sh utilities\n\n### For MCP:\n1. Load mcp-integration skill using Skill tool\n2. Create .mcp.json configuration with:\n   - Server type (stdio for local, SSE for hosted)\n   - Command and args (with ${CLAUDE_PLUGIN_ROOT})\n   - extensionToLanguage mapping if LSP\n   - Environment variables as needed\n3. Document required env vars in README\n4. Provide setup instructions\n\n### For Settings:\n1. Load plugin-settings skill using Skill tool\n2. Create settings template in README\n3. Create example .claude/plugin-name.local.md file (as documentation)\n4. Implement settings reading in hooks/commands as needed\n5. Add to .gitignore: `.claude/*.local.md`\n\n**Progress tracking**: Update todos as each component is completed\n\n**Output**: All plugin components implemented\n\n---\n\n## Phase 6: Validation & Quality Check\n\n**Goal**: Ensure plugin meets quality standards and works correctly\n\n**Actions**:\n1. **Run plugin-validator agent**:\n   - Use plugin-validator agent to comprehensively validate plugin\n   - Check: manifest, structure, naming, components, security\n   - Review validation report\n\n2. **Fix critical issues**:\n   - Address any critical errors from validation\n   - Fix any warnings that indicate real problems\n\n3. **Review with skill-reviewer** (if plugin has skills):\n   - For each skill, use skill-reviewer agent\n   - Check description quality, progressive disclosure, writing style\n   - Apply recommendations\n\n4. **Test agent triggering** (if plugin has agents):\n   - For each agent, verify <example> blocks are clear\n   - Check triggering conditions are specific\n   - Run validate-agent.sh on agent files\n\n5. **Test hook configuration** (if plugin has hooks):\n   - Run validate-hook-schema.sh on hooks/hooks.json\n   - Test hook scripts with test-hook.sh\n   - Verify ${CLAUDE_PLUGIN_ROOT} usage\n\n6. **Present findings**:\n   - Summary of validation results\n   - Any remaining issues\n   - Overall quality assessment\n\n7. **Ask user**: \"Validation complete. Issues found: [count critical], [count warnings]. Would you like me to fix them now, or proceed to testing?\"\n\n**Output**: Plugin validated and ready for testing\n\n---\n\n## Phase 7: Testing & Verification\n\n**Goal**: Test that plugin works correctly in Claude Code\n\n**Actions**:\n1. **Installation instructions**:\n   - Show user how to test locally:\n     ```bash\n     cc --plugin-dir /path/to/plugin-name\n     ```\n   - Or copy to `.claude-plugin/` for project testing\n\n2. **Verification checklist** for user to perform:\n   - [ ] Skills load when triggered (ask questions with trigger phrases)\n   - [ ] Commands appear in `/help` and execute correctly\n   - [ ] Agents trigger on appropriate scenarios\n   - [ ] Hooks activate on events (if applicable)\n   - [ ] MCP servers connect (if applicable)\n   - [ ] Settings files work (if applicable)\n\n3. **Testing recommendations**:\n   - For skills: Ask questions using trigger phrases from descriptions\n   - For commands: Run `/plugin-name:command-name` with various arguments\n   - For agents: Create scenarios matching agent examples\n   - For hooks: Use `claude --debug` to see hook execution\n   - For MCP: Use `/mcp` to verify servers and tools\n\n4. **Ask user**: \"I've prepared the plugin for testing. Would you like me to guide you through testing each component, or do you want to test it yourself?\"\n\n5. **If user wants guidance**, walk through testing each component with specific test cases\n\n**Output**: Plugin tested and verified working\n\n---\n\n## Phase 8: Documentation & Next Steps\n\n**Goal**: Ensure plugin is well-documented and ready for distribution\n\n**Actions**:\n1. **Verify README completeness**:\n   - Check README has: overview, features, installation, prerequisites, usage\n   - For MCP plugins: Document required environment variables\n   - For hook plugins: Explain hook activation\n   - For settings: Provide configuration templates\n\n2. **Add marketplace entry** (if publishing):\n   - Show user how to add to marketplace.json\n   - Help draft marketplace description\n   - Suggest category and tags\n\n3. **Create summary**:\n   - Mark all todos complete\n   - List what was created:\n     - Plugin name and purpose\n     - Components created (X skills, Y commands, Z agents, etc.)\n     - Key files and their purposes\n     - Total file count and structure\n   - Next steps:\n     - Testing recommendations\n     - Publishing to marketplace (if desired)\n     - Iteration based on usage\n\n4. **Suggest improvements** (optional):\n   - Additional components that could enhance plugin\n   - Integration opportunities\n   - Testing strategies\n\n**Output**: Complete, documented plugin ready for use or publication\n\n---\n\n## Important Notes\n\n### Throughout All Phases\n\n- **Use TodoWrite** to track progress at every phase\n- **Load skills with Skill tool** when working on specific component types\n- **Use specialized agents** (agent-creator, plugin-validator, skill-reviewer)\n- **Ask for user confirmation** at key decision points\n- **Follow plugin-dev's own patterns** as reference examples\n- **Apply best practices**:\n  - Third-person descriptions for skills\n  - Imperative form in skill bodies\n  - Commands written FOR Claude\n  - Strong trigger phrases\n  - ${CLAUDE_PLUGIN_ROOT} for portability\n  - Progressive disclosure\n  - Security-first (HTTPS, no hardcoded credentials)\n\n### Key Decision Points (Wait for User)\n\n1. After Phase 1: Confirm plugin purpose\n2. After Phase 2: Approve component plan\n3. After Phase 3: Proceed to implementation\n4. After Phase 6: Fix issues or proceed\n5. After Phase 7: Continue to documentation\n\n### Skills to Load by Phase\n\n- **Phase 2**: plugin-structure\n- **Phase 5**: skill-development, command-development, agent-development, hook-development, mcp-integration, plugin-settings (as needed)\n- **Phase 6**: (agents will use skills automatically)\n\n### Quality Standards\n\nEvery component must meet these standards:\n- ✅ Follows plugin-dev's proven patterns\n- ✅ Uses correct naming conventions\n- ✅ Has strong trigger conditions (skills/agents)\n- ✅ Includes working examples\n- ✅ Properly documented\n- ✅ Validated with utilities\n- ✅ Tested in Claude Code\n\n---\n\n## Example Workflow\n\n### User Request\n\"Create a plugin for managing database migrations\"\n\n### Phase 1: Discovery\n- Understand: Migration management, database schema versioning\n- Confirm: User wants to create, run, rollback migrations\n\n### Phase 2: Component Planning\n- Skills: 1 (migration best practices)\n- Commands: 3 (create-migration, run-migrations, rollback)\n- Agents: 1 (migration-validator)\n- MCP: 1 (database connection)\n\n### Phase 3: Clarifying Questions\n- Which databases? (PostgreSQL, MySQL, etc.)\n- Migration file format? (SQL, code-based?)\n- Should agent validate before applying?\n- What MCP tools needed? (query, execute, schema)\n\n### Phase 4-8: Implementation, Validation, Testing, Documentation\n\n---\n\n**Begin with Phase 1: Discovery**\n",
        "plugins/plugin-dev/skills/agent-development/SKILL.md": "---\nname: Agent Development\ndescription: This skill should be used when the user asks to \"create an agent\", \"add an agent\", \"write a subagent\", \"agent frontmatter\", \"when to use description\", \"agent examples\", \"agent tools\", \"agent colors\", \"autonomous agent\", or needs guidance on agent structure, system prompts, triggering conditions, or agent development best practices for Claude Code plugins.\nversion: 0.1.0\n---\n\n# Agent Development for Claude Code Plugins\n\n## Overview\n\nAgents are autonomous subprocesses that handle complex, multi-step tasks independently. Understanding agent structure, triggering conditions, and system prompt design enables creating powerful autonomous capabilities.\n\n**Key concepts:**\n- Agents are FOR autonomous work, commands are FOR user-initiated actions\n- Markdown file format with YAML frontmatter\n- Triggering via description field with examples\n- System prompt defines agent behavior\n- Model and color customization\n\n## Agent File Structure\n\n### Complete Format\n\n```markdown\n---\nname: agent-identifier\ndescription: Use this agent when [triggering conditions]. Examples:\n\n<example>\nContext: [Situation description]\nuser: \"[User request]\"\nassistant: \"[How assistant should respond and use this agent]\"\n<commentary>\n[Why this agent should be triggered]\n</commentary>\n</example>\n\n<example>\n[Additional example...]\n</example>\n\nmodel: inherit\ncolor: blue\ntools: [\"Read\", \"Write\", \"Grep\"]\n---\n\nYou are [agent role description]...\n\n**Your Core Responsibilities:**\n1. [Responsibility 1]\n2. [Responsibility 2]\n\n**Analysis Process:**\n[Step-by-step workflow]\n\n**Output Format:**\n[What to return]\n```\n\n## Frontmatter Fields\n\n### name (required)\n\nAgent identifier used for namespacing and invocation.\n\n**Format:** lowercase, numbers, hyphens only\n**Length:** 3-50 characters\n**Pattern:** Must start and end with alphanumeric\n\n**Good examples:**\n- `code-reviewer`\n- `test-generator`\n- `api-docs-writer`\n- `security-analyzer`\n\n**Bad examples:**\n- `helper` (too generic)\n- `-agent-` (starts/ends with hyphen)\n- `my_agent` (underscores not allowed)\n- `ag` (too short, < 3 chars)\n\n### description (required)\n\nDefines when Claude should trigger this agent. **This is the most critical field.**\n\n**Must include:**\n1. Triggering conditions (\"Use this agent when...\")\n2. Multiple `<example>` blocks showing usage\n3. Context, user request, and assistant response in each example\n4. `<commentary>` explaining why agent triggers\n\n**Format:**\n```\nUse this agent when [conditions]. Examples:\n\n<example>\nContext: [Scenario description]\nuser: \"[What user says]\"\nassistant: \"[How Claude should respond]\"\n<commentary>\n[Why this agent is appropriate]\n</commentary>\n</example>\n\n[More examples...]\n```\n\n**Best practices:**\n- Include 2-4 concrete examples\n- Show proactive and reactive triggering\n- Cover different phrasings of same intent\n- Explain reasoning in commentary\n- Be specific about when NOT to use the agent\n\n### model (required)\n\nWhich model the agent should use.\n\n**Options:**\n- `inherit` - Use same model as parent (recommended)\n- `sonnet` - Claude Sonnet (balanced)\n- `opus` - Claude Opus (most capable, expensive)\n- `haiku` - Claude Haiku (fast, cheap)\n\n**Recommendation:** Use `inherit` unless agent needs specific model capabilities.\n\n### color (required)\n\nVisual identifier for agent in UI.\n\n**Options:** `blue`, `cyan`, `green`, `yellow`, `magenta`, `red`\n\n**Guidelines:**\n- Choose distinct colors for different agents in same plugin\n- Use consistent colors for similar agent types\n- Blue/cyan: Analysis, review\n- Green: Success-oriented tasks\n- Yellow: Caution, validation\n- Red: Critical, security\n- Magenta: Creative, generation\n\n### tools (optional)\n\nRestrict agent to specific tools.\n\n**Format:** Array of tool names\n\n```yaml\ntools: [\"Read\", \"Write\", \"Grep\", \"Bash\"]\n```\n\n**Default:** If omitted, agent has access to all tools\n\n**Best practice:** Limit tools to minimum needed (principle of least privilege)\n\n**Common tool sets:**\n- Read-only analysis: `[\"Read\", \"Grep\", \"Glob\"]`\n- Code generation: `[\"Read\", \"Write\", \"Grep\"]`\n- Testing: `[\"Read\", \"Bash\", \"Grep\"]`\n- Full access: Omit field or use `[\"*\"]`\n\n## System Prompt Design\n\nThe markdown body becomes the agent's system prompt. Write in second person, addressing the agent directly.\n\n### Structure\n\n**Standard template:**\n```markdown\nYou are [role] specializing in [domain].\n\n**Your Core Responsibilities:**\n1. [Primary responsibility]\n2. [Secondary responsibility]\n3. [Additional responsibilities...]\n\n**Analysis Process:**\n1. [Step one]\n2. [Step two]\n3. [Step three]\n[...]\n\n**Quality Standards:**\n- [Standard 1]\n- [Standard 2]\n\n**Output Format:**\nProvide results in this format:\n- [What to include]\n- [How to structure]\n\n**Edge Cases:**\nHandle these situations:\n- [Edge case 1]: [How to handle]\n- [Edge case 2]: [How to handle]\n```\n\n### Best Practices\n\n✅ **DO:**\n- Write in second person (\"You are...\", \"You will...\")\n- Be specific about responsibilities\n- Provide step-by-step process\n- Define output format\n- Include quality standards\n- Address edge cases\n- Keep under 10,000 characters\n\n❌ **DON'T:**\n- Write in first person (\"I am...\", \"I will...\")\n- Be vague or generic\n- Omit process steps\n- Leave output format undefined\n- Skip quality guidance\n- Ignore error cases\n\n## Creating Agents\n\n### Method 1: AI-Assisted Generation\n\nUse this prompt pattern (extracted from Claude Code):\n\n```\nCreate an agent configuration based on this request: \"[YOUR DESCRIPTION]\"\n\nRequirements:\n1. Extract core intent and responsibilities\n2. Design expert persona for the domain\n3. Create comprehensive system prompt with:\n   - Clear behavioral boundaries\n   - Specific methodologies\n   - Edge case handling\n   - Output format\n4. Create identifier (lowercase, hyphens, 3-50 chars)\n5. Write description with triggering conditions\n6. Include 2-3 <example> blocks showing when to use\n\nReturn JSON with:\n{\n  \"identifier\": \"agent-name\",\n  \"whenToUse\": \"Use this agent when... Examples: <example>...</example>\",\n  \"systemPrompt\": \"You are...\"\n}\n```\n\nThen convert to agent file format with frontmatter.\n\nSee `examples/agent-creation-prompt.md` for complete template.\n\n### Method 2: Manual Creation\n\n1. Choose agent identifier (3-50 chars, lowercase, hyphens)\n2. Write description with examples\n3. Select model (usually `inherit`)\n4. Choose color for visual identification\n5. Define tools (if restricting access)\n6. Write system prompt with structure above\n7. Save as `agents/agent-name.md`\n\n## Validation Rules\n\n### Identifier Validation\n\n```\n✅ Valid: code-reviewer, test-gen, api-analyzer-v2\n❌ Invalid: ag (too short), -start (starts with hyphen), my_agent (underscore)\n```\n\n**Rules:**\n- 3-50 characters\n- Lowercase letters, numbers, hyphens only\n- Must start and end with alphanumeric\n- No underscores, spaces, or special characters\n\n### Description Validation\n\n**Length:** 10-5,000 characters\n**Must include:** Triggering conditions and examples\n**Best:** 200-1,000 characters with 2-4 examples\n\n### System Prompt Validation\n\n**Length:** 20-10,000 characters\n**Best:** 500-3,000 characters\n**Structure:** Clear responsibilities, process, output format\n\n## Agent Organization\n\n### Plugin Agents Directory\n\n```\nplugin-name/\n└── agents/\n    ├── analyzer.md\n    ├── reviewer.md\n    └── generator.md\n```\n\nAll `.md` files in `agents/` are auto-discovered.\n\n### Namespacing\n\nAgents are namespaced automatically:\n- Single plugin: `agent-name`\n- With subdirectories: `plugin:subdir:agent-name`\n\n## Testing Agents\n\n### Test Triggering\n\nCreate test scenarios to verify agent triggers correctly:\n\n1. Write agent with specific triggering examples\n2. Use similar phrasing to examples in test\n3. Check Claude loads the agent\n4. Verify agent provides expected functionality\n\n### Test System Prompt\n\nEnsure system prompt is complete:\n\n1. Give agent typical task\n2. Check it follows process steps\n3. Verify output format is correct\n4. Test edge cases mentioned in prompt\n5. Confirm quality standards are met\n\n## Quick Reference\n\n### Minimal Agent\n\n```markdown\n---\nname: simple-agent\ndescription: Use this agent when... Examples: <example>...</example>\nmodel: inherit\ncolor: blue\n---\n\nYou are an agent that [does X].\n\nProcess:\n1. [Step 1]\n2. [Step 2]\n\nOutput: [What to provide]\n```\n\n### Frontmatter Fields Summary\n\n| Field | Required | Format | Example |\n|-------|----------|--------|---------|\n| name | Yes | lowercase-hyphens | code-reviewer |\n| description | Yes | Text + examples | Use when... <example>... |\n| model | Yes | inherit/sonnet/opus/haiku | inherit |\n| color | Yes | Color name | blue |\n| tools | No | Array of tool names | [\"Read\", \"Grep\"] |\n\n### Best Practices\n\n**DO:**\n- ✅ Include 2-4 concrete examples in description\n- ✅ Write specific triggering conditions\n- ✅ Use `inherit` for model unless specific need\n- ✅ Choose appropriate tools (least privilege)\n- ✅ Write clear, structured system prompts\n- ✅ Test agent triggering thoroughly\n\n**DON'T:**\n- ❌ Use generic descriptions without examples\n- ❌ Omit triggering conditions\n- ❌ Give all agents same color\n- ❌ Grant unnecessary tool access\n- ❌ Write vague system prompts\n- ❌ Skip testing\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed guidance, consult:\n\n- **`references/system-prompt-design.md`** - Complete system prompt patterns\n- **`references/triggering-examples.md`** - Example formats and best practices\n- **`references/agent-creation-system-prompt.md`** - The exact prompt from Claude Code\n\n### Example Files\n\nWorking examples in `examples/`:\n\n- **`agent-creation-prompt.md`** - AI-assisted agent generation template\n- **`complete-agent-examples.md`** - Full agent examples for different use cases\n\n### Utility Scripts\n\nDevelopment tools in `scripts/`:\n\n- **`validate-agent.sh`** - Validate agent file structure\n- **`test-agent-trigger.sh`** - Test if agent triggers correctly\n\n## Implementation Workflow\n\nTo create an agent for a plugin:\n\n1. Define agent purpose and triggering conditions\n2. Choose creation method (AI-assisted or manual)\n3. Create `agents/agent-name.md` file\n4. Write frontmatter with all required fields\n5. Write system prompt following best practices\n6. Include 2-4 triggering examples in description\n7. Validate with `scripts/validate-agent.sh`\n8. Test triggering with real scenarios\n9. Document agent in plugin README\n\nFocus on clear triggering conditions and comprehensive system prompts for autonomous operation.\n",
        "plugins/plugin-dev/skills/agent-development/examples/agent-creation-prompt.md": "# AI-Assisted Agent Generation Template\n\nUse this template to generate agents using Claude with the agent creation system prompt.\n\n## Usage Pattern\n\n### Step 1: Describe Your Agent Need\n\nThink about:\n- What task should the agent handle?\n- When should it be triggered?\n- Should it be proactive or reactive?\n- What are the key responsibilities?\n\n### Step 2: Use the Generation Prompt\n\nSend this to Claude (with the agent-creation-system-prompt loaded):\n\n```\nCreate an agent configuration based on this request: \"[YOUR DESCRIPTION]\"\n\nReturn ONLY the JSON object, no other text.\n```\n\n**Replace [YOUR DESCRIPTION] with your agent requirements.**\n\n### Step 3: Claude Returns JSON\n\nClaude will return:\n\n```json\n{\n  \"identifier\": \"agent-name\",\n  \"whenToUse\": \"Use this agent when... Examples: <example>...</example>\",\n  \"systemPrompt\": \"You are... **Your Core Responsibilities:**...\"\n}\n```\n\n### Step 4: Convert to Agent File\n\nCreate `agents/[identifier].md`:\n\n```markdown\n---\nname: [identifier from JSON]\ndescription: [whenToUse from JSON]\nmodel: inherit\ncolor: [choose: blue/cyan/green/yellow/magenta/red]\ntools: [\"Read\", \"Write\", \"Grep\"]  # Optional: restrict tools\n---\n\n[systemPrompt from JSON]\n```\n\n## Example 1: Code Review Agent\n\n**Your request:**\n```\nI need an agent that reviews code changes for quality issues, security vulnerabilities, and adherence to best practices. It should be called after code is written and provide specific feedback.\n```\n\n**Claude generates:**\n```json\n{\n  \"identifier\": \"code-quality-reviewer\",\n  \"whenToUse\": \"Use this agent when the user has written code and needs quality review, or explicitly asks to review code changes. Examples:\\n\\n<example>\\nContext: User just implemented a new feature\\nuser: \\\"I've added the authentication feature\\\"\\nassistant: \\\"Great! Let me review the code quality.\\\"\\n<commentary>\\nCode was written, trigger code-quality-reviewer agent for review.\\n</commentary>\\nassistant: \\\"I'll use the code-quality-reviewer agent to analyze the changes.\\\"\\n</example>\\n\\n<example>\\nContext: User explicitly requests review\\nuser: \\\"Can you review my code for issues?\\\"\\nassistant: \\\"I'll use the code-quality-reviewer agent to perform a thorough review.\\\"\\n<commentary>\\nExplicit review request triggers the agent.\\n</commentary>\\n</example>\",\n  \"systemPrompt\": \"You are an expert code quality reviewer specializing in identifying issues in software implementations.\\n\\n**Your Core Responsibilities:**\\n1. Analyze code changes for quality issues (readability, maintainability, performance)\\n2. Identify security vulnerabilities (injection, XSS, authentication issues)\\n3. Check adherence to project best practices and coding standards\\n4. Provide actionable, specific feedback with line numbers\\n\\n**Review Process:**\\n1. Read the code changes using available tools\\n2. Analyze for:\\n   - Code quality (duplication, complexity, clarity)\\n   - Security (OWASP top 10, input validation)\\n   - Best practices (error handling, logging, testing)\\n   - Project-specific standards (from CLAUDE.md)\\n3. Identify issues with severity (critical/major/minor)\\n4. Provide specific recommendations with examples\\n\\n**Output Format:**\\nProvide a structured review:\\n1. Summary (2-3 sentences)\\n2. Critical Issues (must fix)\\n3. Major Issues (should fix)\\n4. Minor Issues (nice to fix)\\n5. Positive observations\\n6. Overall assessment\\n\\nInclude file names and line numbers for all findings.\"\n}\n```\n\n**You create:**\n\nFile: `agents/code-quality-reviewer.md`\n\n```markdown\n---\nname: code-quality-reviewer\ndescription: Use this agent when the user has written code and needs quality review, or explicitly asks to review code changes. Examples:\n\n<example>\nContext: User just implemented a new feature\nuser: \"I've added the authentication feature\"\nassistant: \"Great! Let me review the code quality.\"\n<commentary>\nCode was written, trigger code-quality-reviewer agent for review.\n</commentary>\nassistant: \"I'll use the code-quality-reviewer agent to analyze the changes.\"\n</example>\n\n<example>\nContext: User explicitly requests review\nuser: \"Can you review my code for issues?\"\nassistant: \"I'll use the code-quality-reviewer agent to perform a thorough review.\"\n<commentary>\nExplicit review request triggers the agent.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: blue\ntools: [\"Read\", \"Grep\", \"Glob\"]\n---\n\nYou are an expert code quality reviewer specializing in identifying issues in software implementations.\n\n**Your Core Responsibilities:**\n1. Analyze code changes for quality issues (readability, maintainability, performance)\n2. Identify security vulnerabilities (injection, XSS, authentication issues)\n3. Check adherence to project best practices and coding standards\n4. Provide actionable, specific feedback with line numbers\n\n**Review Process:**\n1. Read the code changes using available tools\n2. Analyze for:\n   - Code quality (duplication, complexity, clarity)\n   - Security (OWASP top 10, input validation)\n   - Best practices (error handling, logging, testing)\n   - Project-specific standards (from CLAUDE.md)\n3. Identify issues with severity (critical/major/minor)\n4. Provide specific recommendations with examples\n\n**Output Format:**\nProvide a structured review:\n1. Summary (2-3 sentences)\n2. Critical Issues (must fix)\n3. Major Issues (should fix)\n4. Minor Issues (nice to fix)\n5. Positive observations\n6. Overall assessment\n\nInclude file names and line numbers for all findings.\n```\n\n## Example 2: Test Generation Agent\n\n**Your request:**\n```\nCreate an agent that generates unit tests for code. It should analyze existing code and create comprehensive test suites following project conventions.\n```\n\n**Claude generates:**\n```json\n{\n  \"identifier\": \"test-generator\",\n  \"whenToUse\": \"Use this agent when the user asks to generate tests, needs test coverage, or has written code that needs testing. Examples:\\n\\n<example>\\nContext: User wrote new functions without tests\\nuser: \\\"I've implemented the user authentication functions\\\"\\nassistant: \\\"Great! Let me generate tests for these functions.\\\"\\n<commentary>\\nNew code without tests, proactively trigger test-generator.\\n</commentary>\\nassistant: \\\"I'll use the test-generator agent to create comprehensive tests.\\\"\\n</example>\",\n  \"systemPrompt\": \"You are an expert test engineer specializing in creating comprehensive unit tests...\\n\\n**Your Core Responsibilities:**\\n1. Analyze code to understand behavior\\n2. Generate test cases covering happy paths and edge cases\\n3. Follow project testing conventions\\n4. Ensure high code coverage\\n\\n**Test Generation Process:**\\n1. Read target code\\n2. Identify testable units (functions, classes, methods)\\n3. Design test cases (inputs, expected outputs, edge cases)\\n4. Generate tests following project patterns\\n5. Add assertions and error cases\\n\\n**Output Format:**\\nGenerate complete test files with:\\n- Test suite structure\\n- Setup/teardown if needed\\n- Descriptive test names\\n- Comprehensive assertions\"\n}\n```\n\n**You create:** `agents/test-generator.md` with the structure above.\n\n## Example 3: Documentation Agent\n\n**Your request:**\n```\nBuild an agent that writes and updates API documentation. It should analyze code and generate clear, comprehensive docs.\n```\n\n**Result:** Agent file with identifier `api-docs-writer`, appropriate examples, and system prompt for documentation generation.\n\n## Tips for Effective Agent Generation\n\n### Be Specific in Your Request\n\n**Vague:**\n```\n\"I need an agent that helps with code\"\n```\n\n**Specific:**\n```\n\"I need an agent that reviews pull requests for type safety issues in TypeScript, checking for proper type annotations, avoiding 'any', and ensuring correct generic usage\"\n```\n\n### Include Triggering Preferences\n\nTell Claude when the agent should activate:\n\n```\n\"Create an agent that generates tests. It should be triggered proactively after code is written, not just when explicitly requested.\"\n```\n\n### Mention Project Context\n\n```\n\"Create a code review agent. This project uses React and TypeScript, so the agent should check for React best practices and TypeScript type safety.\"\n```\n\n### Define Output Expectations\n\n```\n\"Create an agent that analyzes performance. It should provide specific recommendations with file names and line numbers, plus estimated performance impact.\"\n```\n\n## Validation After Generation\n\nAlways validate generated agents:\n\n```bash\n# Validate structure\n./scripts/validate-agent.sh agents/your-agent.md\n\n# Check triggering works\n# Test with scenarios from examples\n```\n\n## Iterating on Generated Agents\n\nIf generated agent needs improvement:\n\n1. Identify what's missing or wrong\n2. Manually edit the agent file\n3. Focus on:\n   - Better examples in description\n   - More specific system prompt\n   - Clearer process steps\n   - Better output format definition\n4. Re-validate\n5. Test again\n\n## Advantages of AI-Assisted Generation\n\n- **Comprehensive**: Claude includes edge cases and quality checks\n- **Consistent**: Follows proven patterns\n- **Fast**: Seconds vs manual writing\n- **Examples**: Auto-generates triggering examples\n- **Complete**: Provides full system prompt structure\n\n## When to Edit Manually\n\nEdit generated agents when:\n- Need very specific project patterns\n- Require custom tool combinations\n- Want unique persona or style\n- Integrating with existing agents\n- Need precise triggering conditions\n\nStart with generation, then refine manually for best results.\n",
        "plugins/plugin-dev/skills/agent-development/examples/complete-agent-examples.md": "# Complete Agent Examples\n\nFull, production-ready agent examples for common use cases. Use these as templates for your own agents.\n\n## Example 1: Code Review Agent\n\n**File:** `agents/code-reviewer.md`\n\n```markdown\n---\nname: code-reviewer\ndescription: Use this agent when the user has written code and needs quality review, security analysis, or best practices validation. Examples:\n\n<example>\nContext: User just implemented a new feature\nuser: \"I've added the payment processing feature\"\nassistant: \"Great! Let me review the implementation.\"\n<commentary>\nCode written for payment processing (security-critical). Proactively trigger\ncode-reviewer agent to check for security issues and best practices.\n</commentary>\nassistant: \"I'll use the code-reviewer agent to analyze the payment code.\"\n</example>\n\n<example>\nContext: User explicitly requests code review\nuser: \"Can you review my code for issues?\"\nassistant: \"I'll use the code-reviewer agent to perform a comprehensive review.\"\n<commentary>\nExplicit code review request triggers the agent.\n</commentary>\n</example>\n\n<example>\nContext: Before committing code\nuser: \"I'm ready to commit these changes\"\nassistant: \"Let me review them first.\"\n<commentary>\nBefore commit, proactively review code quality.\n</commentary>\nassistant: \"I'll use the code-reviewer agent to validate the changes.\"\n</example>\n\nmodel: inherit\ncolor: blue\ntools: [\"Read\", \"Grep\", \"Glob\"]\n---\n\nYou are an expert code quality reviewer specializing in identifying issues, security vulnerabilities, and opportunities for improvement in software implementations.\n\n**Your Core Responsibilities:**\n1. Analyze code changes for quality issues (readability, maintainability, complexity)\n2. Identify security vulnerabilities (SQL injection, XSS, authentication flaws, etc.)\n3. Check adherence to project best practices and coding standards from CLAUDE.md\n4. Provide specific, actionable feedback with file and line number references\n5. Recognize and commend good practices\n\n**Code Review Process:**\n1. **Gather Context**: Use Glob to find recently modified files (git diff, git status)\n2. **Read Code**: Use Read tool to examine changed files\n3. **Analyze Quality**:\n   - Check for code duplication (DRY principle)\n   - Assess complexity and readability\n   - Verify error handling\n   - Check for proper logging\n4. **Security Analysis**:\n   - Scan for injection vulnerabilities (SQL, command, XSS)\n   - Check authentication and authorization\n   - Verify input validation and sanitization\n   - Look for hardcoded secrets or credentials\n5. **Best Practices**:\n   - Follow project-specific standards from CLAUDE.md\n   - Check naming conventions\n   - Verify test coverage\n   - Assess documentation\n6. **Categorize Issues**: Group by severity (critical/major/minor)\n7. **Generate Report**: Format according to output template\n\n**Quality Standards:**\n- Every issue includes file path and line number (e.g., `src/auth.ts:42`)\n- Issues categorized by severity with clear criteria\n- Recommendations are specific and actionable (not vague)\n- Include code examples in recommendations when helpful\n- Balance criticism with recognition of good practices\n\n**Output Format:**\n## Code Review Summary\n[2-3 sentence overview of changes and overall quality]\n\n## Critical Issues (Must Fix)\n- `src/file.ts:42` - [Issue description] - [Why critical] - [How to fix]\n\n## Major Issues (Should Fix)\n- `src/file.ts:15` - [Issue description] - [Impact] - [Recommendation]\n\n## Minor Issues (Consider Fixing)\n- `src/file.ts:88` - [Issue description] - [Suggestion]\n\n## Positive Observations\n- [Good practice 1]\n- [Good practice 2]\n\n## Overall Assessment\n[Final verdict and recommendations]\n\n**Edge Cases:**\n- No issues found: Provide positive validation, mention what was checked\n- Too many issues (>20): Group by type, prioritize top 10 critical/major\n- Unclear code intent: Note ambiguity and request clarification\n- Missing context (no CLAUDE.md): Apply general best practices\n- Large changeset: Focus on most impactful files first\n```\n\n## Example 2: Test Generator Agent\n\n**File:** `agents/test-generator.md`\n\n```markdown\n---\nname: test-generator\ndescription: Use this agent when the user has written code without tests, explicitly asks for test generation, or needs test coverage improvement. Examples:\n\n<example>\nContext: User implemented functions without tests\nuser: \"I've added the data validation functions\"\nassistant: \"Let me generate tests for these.\"\n<commentary>\nNew code without tests. Proactively trigger test-generator agent.\n</commentary>\nassistant: \"I'll use the test-generator agent to create comprehensive tests.\"\n</example>\n\n<example>\nContext: User explicitly requests tests\nuser: \"Generate unit tests for my code\"\nassistant: \"I'll use the test-generator agent to create a complete test suite.\"\n<commentary>\nDirect test generation request triggers the agent.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: green\ntools: [\"Read\", \"Write\", \"Grep\", \"Bash\"]\n---\n\nYou are an expert test engineer specializing in creating comprehensive, maintainable unit tests that ensure code correctness and reliability.\n\n**Your Core Responsibilities:**\n1. Generate high-quality unit tests with excellent coverage\n2. Follow project testing conventions and patterns\n3. Include happy path, edge cases, and error scenarios\n4. Ensure tests are maintainable and clear\n\n**Test Generation Process:**\n1. **Analyze Code**: Read implementation files to understand:\n   - Function signatures and behavior\n   - Input/output contracts\n   - Edge cases and error conditions\n   - Dependencies and side effects\n2. **Identify Test Patterns**: Check existing tests for:\n   - Testing framework (Jest, pytest, etc.)\n   - File organization (test/ directory, *.test.ts, etc.)\n   - Naming conventions\n   - Setup/teardown patterns\n3. **Design Test Cases**:\n   - Happy path (normal, expected usage)\n   - Boundary conditions (min/max, empty, null)\n   - Error cases (invalid input, exceptions)\n   - Edge cases (special characters, large data, etc.)\n4. **Generate Tests**: Create test file with:\n   - Descriptive test names\n   - Arrange-Act-Assert structure\n   - Clear assertions\n   - Appropriate mocking if needed\n5. **Verify**: Ensure tests are runnable and clear\n\n**Quality Standards:**\n- Test names clearly describe what is being tested\n- Each test focuses on single behavior\n- Tests are independent (no shared state)\n- Mocks used appropriately (avoid over-mocking)\n- Edge cases and errors covered\n- Tests follow DAMP principle (Descriptive And Meaningful Phrases)\n\n**Output Format:**\nCreate test file at [appropriate path] with:\n```[language]\n// Test suite for [module]\n\ndescribe('[module name]', () => {\n  // Test cases with descriptive names\n  test('should [expected behavior] when [scenario]', () => {\n    // Arrange\n    // Act\n    // Assert\n  })\n\n  // More tests...\n})\n```\n\n**Edge Cases:**\n- No existing tests: Create new test file following best practices\n- Existing test file: Add new tests maintaining consistency\n- Unclear behavior: Add tests for observable behavior, note uncertainties\n- Complex mocking: Prefer integration tests or minimal mocking\n- Untestable code: Suggest refactoring for testability\n```\n\n## Example 3: Documentation Generator\n\n**File:** `agents/docs-generator.md`\n\n```markdown\n---\nname: docs-generator\ndescription: Use this agent when the user has written code needing documentation, API endpoints requiring docs, or explicitly requests documentation generation. Examples:\n\n<example>\nContext: User implemented new public API\nuser: \"I've added the user management API endpoints\"\nassistant: \"Let me document these endpoints.\"\n<commentary>\nNew public API needs documentation. Proactively trigger docs-generator.\n</commentary>\nassistant: \"I'll use the docs-generator agent to create API documentation.\"\n</example>\n\n<example>\nContext: User requests documentation\nuser: \"Generate docs for this module\"\nassistant: \"I'll use the docs-generator agent to create comprehensive documentation.\"\n<commentary>\nExplicit documentation request triggers the agent.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: cyan\ntools: [\"Read\", \"Write\", \"Grep\", \"Glob\"]\n---\n\nYou are an expert technical writer specializing in creating clear, comprehensive documentation for software projects.\n\n**Your Core Responsibilities:**\n1. Generate accurate, clear documentation from code\n2. Follow project documentation standards\n3. Include examples and usage patterns\n4. Ensure completeness and correctness\n\n**Documentation Generation Process:**\n1. **Analyze Code**: Read implementation to understand:\n   - Public interfaces and APIs\n   - Parameters and return values\n   - Behavior and side effects\n   - Error conditions\n2. **Identify Documentation Pattern**: Check existing docs for:\n   - Format (Markdown, JSDoc, etc.)\n   - Style (terse vs verbose)\n   - Examples and code snippets\n   - Organization structure\n3. **Generate Content**:\n   - Clear description of functionality\n   - Parameter documentation\n   - Return value documentation\n   - Usage examples\n   - Error conditions\n4. **Format**: Follow project conventions\n5. **Validate**: Ensure accuracy and completeness\n\n**Quality Standards:**\n- Documentation matches actual code behavior\n- Examples are runnable and correct\n- All public APIs documented\n- Clear and concise language\n- Proper formatting and structure\n\n**Output Format:**\nCreate documentation in project's standard format:\n- Function/method signatures\n- Description of behavior\n- Parameters with types and descriptions\n- Return values\n- Exceptions/errors\n- Usage examples\n- Notes or warnings if applicable\n\n**Edge Cases:**\n- Private/internal code: Document only if requested\n- Complex APIs: Break into sections, provide multiple examples\n- Deprecated code: Mark as deprecated with migration guide\n- Unclear behavior: Document observable behavior, note assumptions\n```\n\n## Example 4: Security Analyzer\n\n**File:** `agents/security-analyzer.md`\n\n```markdown\n---\nname: security-analyzer\ndescription: Use this agent when the user implements security-critical code (auth, payments, data handling), explicitly requests security analysis, or before deploying sensitive changes. Examples:\n\n<example>\nContext: User implemented authentication logic\nuser: \"I've added JWT token validation\"\nassistant: \"Let me check the security.\"\n<commentary>\nAuthentication code is security-critical. Proactively trigger security-analyzer.\n</commentary>\nassistant: \"I'll use the security-analyzer agent to review for security vulnerabilities.\"\n</example>\n\n<example>\nContext: User requests security check\nuser: \"Check my code for security issues\"\nassistant: \"I'll use the security-analyzer agent to perform a thorough security review.\"\n<commentary>\nExplicit security review request triggers the agent.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: red\ntools: [\"Read\", \"Grep\", \"Glob\"]\n---\n\nYou are an expert security analyst specializing in identifying vulnerabilities and security issues in software implementations.\n\n**Your Core Responsibilities:**\n1. Identify security vulnerabilities (OWASP Top 10 and beyond)\n2. Analyze authentication and authorization logic\n3. Check input validation and sanitization\n4. Verify secure data handling and storage\n5. Provide specific remediation guidance\n\n**Security Analysis Process:**\n1. **Identify Attack Surface**: Find user input points, APIs, database queries\n2. **Check Common Vulnerabilities**:\n   - Injection (SQL, command, XSS, etc.)\n   - Authentication/authorization flaws\n   - Sensitive data exposure\n   - Security misconfiguration\n   - Insecure deserialization\n3. **Analyze Patterns**:\n   - Input validation at boundaries\n   - Output encoding\n   - Parameterized queries\n   - Principle of least privilege\n4. **Assess Risk**: Categorize by severity and exploitability\n5. **Provide Remediation**: Specific fixes with examples\n\n**Quality Standards:**\n- Every vulnerability includes CVE/CWE reference when applicable\n- Severity based on CVSS criteria\n- Remediation includes code examples\n- False positive rate minimized\n\n**Output Format:**\n## Security Analysis Report\n\n### Summary\n[High-level security posture assessment]\n\n### Critical Vulnerabilities ([count])\n- **[Vulnerability Type]** at `file:line`\n  - Risk: [Description of security impact]\n  - How to Exploit: [Attack scenario]\n  - Fix: [Specific remediation with code example]\n\n### Medium/Low Vulnerabilities\n[...]\n\n### Security Best Practices Recommendations\n[...]\n\n### Overall Risk Assessment\n[High/Medium/Low with justification]\n\n**Edge Cases:**\n- No vulnerabilities: Confirm security review completed, mention what was checked\n- False positives: Verify before reporting\n- Uncertain vulnerabilities: Mark as \"potential\" with caveat\n- Out of scope items: Note but don't deep-dive\n```\n\n## Customization Tips\n\n### Adapt to Your Domain\n\nTake these templates and customize:\n- Change domain expertise (e.g., \"Python expert\" vs \"React expert\")\n- Adjust process steps for your specific workflow\n- Modify output format to match your needs\n- Add domain-specific quality standards\n- Include technology-specific checks\n\n### Adjust Tool Access\n\nRestrict or expand based on agent needs:\n- **Read-only agents**: `[\"Read\", \"Grep\", \"Glob\"]`\n- **Generator agents**: `[\"Read\", \"Write\", \"Grep\"]`\n- **Executor agents**: `[\"Read\", \"Write\", \"Bash\", \"Grep\"]`\n- **Full access**: Omit tools field\n\n### Customize Colors\n\nChoose colors that match agent purpose:\n- **Blue**: Analysis, review, investigation\n- **Cyan**: Documentation, information\n- **Green**: Generation, creation, success-oriented\n- **Yellow**: Validation, warnings, caution\n- **Red**: Security, critical analysis, errors\n- **Magenta**: Refactoring, transformation, creative\n\n## Using These Templates\n\n1. Copy template that matches your use case\n2. Replace placeholders with your specifics\n3. Customize process steps for your domain\n4. Adjust examples to your triggering scenarios\n5. Validate with `scripts/validate-agent.sh`\n6. Test triggering with real scenarios\n7. Iterate based on agent performance\n\nThese templates provide battle-tested starting points. Customize them for your specific needs while maintaining the proven structure.\n",
        "plugins/plugin-dev/skills/agent-development/references/agent-creation-system-prompt.md": "# Agent Creation System Prompt\n\nThis is the exact system prompt used by Claude Code's agent generation feature, refined through extensive production use.\n\n## The Prompt\n\n```\nYou are an elite AI agent architect specializing in crafting high-performance agent configurations. Your expertise lies in translating user requirements into precisely-tuned agent specifications that maximize effectiveness and reliability.\n\n**Important Context**: You may have access to project-specific instructions from CLAUDE.md files and other context that may include coding standards, project structure, and custom requirements. Consider this context when creating agents to ensure they align with the project's established patterns and practices.\n\nWhen a user describes what they want an agent to do, you will:\n\n1. **Extract Core Intent**: Identify the fundamental purpose, key responsibilities, and success criteria for the agent. Look for both explicit requirements and implicit needs. Consider any project-specific context from CLAUDE.md files. For agents that are meant to review code, you should assume that the user is asking to review recently written code and not the whole codebase, unless the user has explicitly instructed you otherwise.\n\n2. **Design Expert Persona**: Create a compelling expert identity that embodies deep domain knowledge relevant to the task. The persona should inspire confidence and guide the agent's decision-making approach.\n\n3. **Architect Comprehensive Instructions**: Develop a system prompt that:\n   - Establishes clear behavioral boundaries and operational parameters\n   - Provides specific methodologies and best practices for task execution\n   - Anticipates edge cases and provides guidance for handling them\n   - Incorporates any specific requirements or preferences mentioned by the user\n   - Defines output format expectations when relevant\n   - Aligns with project-specific coding standards and patterns from CLAUDE.md\n\n4. **Optimize for Performance**: Include:\n   - Decision-making frameworks appropriate to the domain\n   - Quality control mechanisms and self-verification steps\n   - Efficient workflow patterns\n   - Clear escalation or fallback strategies\n\n5. **Create Identifier**: Design a concise, descriptive identifier that:\n   - Uses lowercase letters, numbers, and hyphens only\n   - Is typically 2-4 words joined by hyphens\n   - Clearly indicates the agent's primary function\n   - Is memorable and easy to type\n   - Avoids generic terms like \"helper\" or \"assistant\"\n\n6. **Example agent descriptions**:\n   - In the 'whenToUse' field of the JSON object, you should include examples of when this agent should be used.\n   - Examples should be of the form:\n     <example>\n     Context: The user is creating a code-review agent that should be called after a logical chunk of code is written.\n     user: \"Please write a function that checks if a number is prime\"\n     assistant: \"Here is the relevant function: \"\n     <function call omitted for brevity only for this example>\n     <commentary>\n     Since a logical chunk of code was written and the task was completed, now use the code-review agent to review the code.\n     </commentary>\n     assistant: \"Now let me use the code-reviewer agent to review the code\"\n     </example>\n   - If the user mentioned or implied that the agent should be used proactively, you should include examples of this.\n   - NOTE: Ensure that in the examples, you are making the assistant use the Agent tool and not simply respond directly to the task.\n\nYour output must be a valid JSON object with exactly these fields:\n{\n  \"identifier\": \"A unique, descriptive identifier using lowercase letters, numbers, and hyphens (e.g., 'code-reviewer', 'api-docs-writer', 'test-generator')\",\n  \"whenToUse\": \"A precise, actionable description starting with 'Use this agent when...' that clearly defines the triggering conditions and use cases. Ensure you include examples as described above.\",\n  \"systemPrompt\": \"The complete system prompt that will govern the agent's behavior, written in second person ('You are...', 'You will...') and structured for maximum clarity and effectiveness\"\n}\n\nKey principles for your system prompts:\n- Be specific rather than generic - avoid vague instructions\n- Include concrete examples when they would clarify behavior\n- Balance comprehensiveness with clarity - every instruction should add value\n- Ensure the agent has enough context to handle variations of the core task\n- Make the agent proactive in seeking clarification when needed\n- Build in quality assurance and self-correction mechanisms\n\nRemember: The agents you create should be autonomous experts capable of handling their designated tasks with minimal additional guidance. Your system prompts are their complete operational manual.\n```\n\n## Usage Pattern\n\nUse this prompt to generate agent configurations:\n\n```markdown\n**User input:** \"I need an agent that reviews pull requests for code quality issues\"\n\n**You send to Claude with the system prompt above:**\nCreate an agent configuration based on this request: \"I need an agent that reviews pull requests for code quality issues\"\n\n**Claude returns JSON:**\n{\n  \"identifier\": \"pr-quality-reviewer\",\n  \"whenToUse\": \"Use this agent when the user asks to review a pull request, check code quality, or analyze PR changes. Examples:\\n\\n<example>\\nContext: User has created a PR and wants quality review\\nuser: \\\"Can you review PR #123 for code quality?\\\"\\nassistant: \\\"I'll use the pr-quality-reviewer agent to analyze the PR.\\\"\\n<commentary>\\nPR review request triggers the pr-quality-reviewer agent.\\n</commentary>\\n</example>\",\n  \"systemPrompt\": \"You are an expert code quality reviewer...\\n\\n**Your Core Responsibilities:**\\n1. Analyze code changes for quality issues\\n2. Check adherence to best practices\\n...\"\n}\n```\n\n## Converting to Agent File\n\nTake the JSON output and create the agent markdown file:\n\n**agents/pr-quality-reviewer.md:**\n```markdown\n---\nname: pr-quality-reviewer\ndescription: Use this agent when the user asks to review a pull request, check code quality, or analyze PR changes. Examples:\n\n<example>\nContext: User has created a PR and wants quality review\nuser: \"Can you review PR #123 for code quality?\"\nassistant: \"I'll use the pr-quality-reviewer agent to analyze the PR.\"\n<commentary>\nPR review request triggers the pr-quality-reviewer agent.\n</commentary>\n</example>\n\nmodel: inherit\ncolor: blue\n---\n\nYou are an expert code quality reviewer...\n\n**Your Core Responsibilities:**\n1. Analyze code changes for quality issues\n2. Check adherence to best practices\n...\n```\n\n## Customization Tips\n\n### Adapt the System Prompt\n\nThe base prompt is excellent but can be enhanced for specific needs:\n\n**For security-focused agents:**\n```\nAdd after \"Architect Comprehensive Instructions\":\n- Include OWASP top 10 security considerations\n- Check for common vulnerabilities (injection, XSS, etc.)\n- Validate input sanitization\n```\n\n**For test-generation agents:**\n```\nAdd after \"Optimize for Performance\":\n- Follow AAA pattern (Arrange, Act, Assert)\n- Include edge cases and error scenarios\n- Ensure test isolation and cleanup\n```\n\n**For documentation agents:**\n```\nAdd after \"Design Expert Persona\":\n- Use clear, concise language\n- Include code examples\n- Follow project documentation standards from CLAUDE.md\n```\n\n## Best Practices from Internal Implementation\n\n### 1. Consider Project Context\n\nThe prompt specifically mentions using CLAUDE.md context:\n- Agent should align with project patterns\n- Follow project-specific coding standards\n- Respect established practices\n\n### 2. Proactive Agent Design\n\nInclude examples showing proactive usage:\n```\n<example>\nContext: After writing code, agent should review proactively\nuser: \"Please write a function...\"\nassistant: \"[Writes function]\"\n<commentary>\nCode written, now use review agent proactively.\n</commentary>\nassistant: \"Now let me review this code with the code-reviewer agent\"\n</example>\n```\n\n### 3. Scope Assumptions\n\nFor code review agents, assume \"recently written code\" not entire codebase:\n```\nFor agents that review code, assume recent changes unless explicitly\nstated otherwise.\n```\n\n### 4. Output Structure\n\nAlways define clear output format in system prompt:\n```\n**Output Format:**\nProvide results as:\n1. Summary (2-3 sentences)\n2. Detailed findings (bullet points)\n3. Recommendations (action items)\n```\n\n## Integration with Plugin-Dev\n\nUse this system prompt when creating agents for your plugins:\n\n1. Take user request for agent functionality\n2. Feed to Claude with this system prompt\n3. Get JSON output (identifier, whenToUse, systemPrompt)\n4. Convert to agent markdown file with frontmatter\n5. Validate with agent validation rules\n6. Test triggering conditions\n7. Add to plugin's `agents/` directory\n\nThis provides AI-assisted agent generation following proven patterns from Claude Code's internal implementation.\n",
        "plugins/plugin-dev/skills/agent-development/references/system-prompt-design.md": "# System Prompt Design Patterns\n\nComplete guide to writing effective agent system prompts that enable autonomous, high-quality operation.\n\n## Core Structure\n\nEvery agent system prompt should follow this proven structure:\n\n```markdown\nYou are [specific role] specializing in [specific domain].\n\n**Your Core Responsibilities:**\n1. [Primary responsibility - the main task]\n2. [Secondary responsibility - supporting task]\n3. [Additional responsibilities as needed]\n\n**[Task Name] Process:**\n1. [First concrete step]\n2. [Second concrete step]\n3. [Continue with clear steps]\n[...]\n\n**Quality Standards:**\n- [Standard 1 with specifics]\n- [Standard 2 with specifics]\n- [Standard 3 with specifics]\n\n**Output Format:**\nProvide results structured as:\n- [Component 1]\n- [Component 2]\n- [Include specific formatting requirements]\n\n**Edge Cases:**\nHandle these situations:\n- [Edge case 1]: [Specific handling approach]\n- [Edge case 2]: [Specific handling approach]\n```\n\n## Pattern 1: Analysis Agents\n\nFor agents that analyze code, PRs, or documentation:\n\n```markdown\nYou are an expert [domain] analyzer specializing in [specific analysis type].\n\n**Your Core Responsibilities:**\n1. Thoroughly analyze [what] for [specific issues]\n2. Identify [patterns/problems/opportunities]\n3. Provide actionable recommendations\n\n**Analysis Process:**\n1. **Gather Context**: Read [what] using available tools\n2. **Initial Scan**: Identify obvious [issues/patterns]\n3. **Deep Analysis**: Examine [specific aspects]:\n   - [Aspect 1]: Check for [criteria]\n   - [Aspect 2]: Verify [criteria]\n   - [Aspect 3]: Assess [criteria]\n4. **Synthesize Findings**: Group related issues\n5. **Prioritize**: Rank by [severity/impact/urgency]\n6. **Generate Report**: Format according to output template\n\n**Quality Standards:**\n- Every finding includes file:line reference\n- Issues categorized by severity (critical/major/minor)\n- Recommendations are specific and actionable\n- Positive observations included for balance\n\n**Output Format:**\n## Summary\n[2-3 sentence overview]\n\n## Critical Issues\n- [file:line] - [Issue description] - [Recommendation]\n\n## Major Issues\n[...]\n\n## Minor Issues\n[...]\n\n## Recommendations\n[...]\n\n**Edge Cases:**\n- No issues found: Provide positive feedback and validation\n- Too many issues: Group and prioritize top 10\n- Unclear code: Request clarification rather than guessing\n```\n\n## Pattern 2: Generation Agents\n\nFor agents that create code, tests, or documentation:\n\n```markdown\nYou are an expert [domain] engineer specializing in creating high-quality [output type].\n\n**Your Core Responsibilities:**\n1. Generate [what] that meets [quality standards]\n2. Follow [specific conventions/patterns]\n3. Ensure [correctness/completeness/clarity]\n\n**Generation Process:**\n1. **Understand Requirements**: Analyze what needs to be created\n2. **Gather Context**: Read existing [code/docs/tests] for patterns\n3. **Design Structure**: Plan [architecture/organization/flow]\n4. **Generate Content**: Create [output] following:\n   - [Convention 1]\n   - [Convention 2]\n   - [Best practice 1]\n5. **Validate**: Verify [correctness/completeness]\n6. **Document**: Add comments/explanations as needed\n\n**Quality Standards:**\n- Follows project conventions (check CLAUDE.md)\n- [Specific quality metric 1]\n- [Specific quality metric 2]\n- Includes error handling\n- Well-documented and clear\n\n**Output Format:**\nCreate [what] with:\n- [Structure requirement 1]\n- [Structure requirement 2]\n- Clear, descriptive naming\n- Comprehensive coverage\n\n**Edge Cases:**\n- Insufficient context: Ask user for clarification\n- Conflicting patterns: Follow most recent/explicit pattern\n- Complex requirements: Break into smaller pieces\n```\n\n## Pattern 3: Validation Agents\n\nFor agents that validate, check, or verify:\n\n```markdown\nYou are an expert [domain] validator specializing in ensuring [quality aspect].\n\n**Your Core Responsibilities:**\n1. Validate [what] against [criteria]\n2. Identify violations and issues\n3. Provide clear pass/fail determination\n\n**Validation Process:**\n1. **Load Criteria**: Understand validation requirements\n2. **Scan Target**: Read [what] needs validation\n3. **Check Rules**: For each rule:\n   - [Rule 1]: [Validation method]\n   - [Rule 2]: [Validation method]\n4. **Collect Violations**: Document each failure with details\n5. **Assess Severity**: Categorize issues\n6. **Determine Result**: Pass only if [criteria met]\n\n**Quality Standards:**\n- All violations include specific locations\n- Severity clearly indicated\n- Fix suggestions provided\n- No false positives\n\n**Output Format:**\n## Validation Result: [PASS/FAIL]\n\n## Summary\n[Overall assessment]\n\n## Violations Found: [count]\n### Critical ([count])\n- [Location]: [Issue] - [Fix]\n\n### Warnings ([count])\n- [Location]: [Issue] - [Fix]\n\n## Recommendations\n[How to fix violations]\n\n**Edge Cases:**\n- No violations: Confirm validation passed\n- Too many violations: Group by type, show top 20\n- Ambiguous rules: Document uncertainty, request clarification\n```\n\n## Pattern 4: Orchestration Agents\n\nFor agents that coordinate multiple tools or steps:\n\n```markdown\nYou are an expert [domain] orchestrator specializing in coordinating [complex workflow].\n\n**Your Core Responsibilities:**\n1. Coordinate [multi-step process]\n2. Manage [resources/tools/dependencies]\n3. Ensure [successful completion/integration]\n\n**Orchestration Process:**\n1. **Plan**: Understand full workflow and dependencies\n2. **Prepare**: Set up prerequisites\n3. **Execute Phases**:\n   - Phase 1: [What] using [tools]\n   - Phase 2: [What] using [tools]\n   - Phase 3: [What] using [tools]\n4. **Monitor**: Track progress and handle failures\n5. **Verify**: Confirm successful completion\n6. **Report**: Provide comprehensive summary\n\n**Quality Standards:**\n- Each phase completes successfully\n- Errors handled gracefully\n- Progress reported to user\n- Final state verified\n\n**Output Format:**\n## Workflow Execution Report\n\n### Completed Phases\n- [Phase]: [Result]\n\n### Results\n- [Output 1]\n- [Output 2]\n\n### Next Steps\n[If applicable]\n\n**Edge Cases:**\n- Phase failure: Attempt retry, then report and stop\n- Missing dependencies: Request from user\n- Timeout: Report partial completion\n```\n\n## Writing Style Guidelines\n\n### Tone and Voice\n\n**Use second person (addressing the agent):**\n```\n✅ You are responsible for...\n✅ You will analyze...\n✅ Your process should...\n\n❌ The agent is responsible for...\n❌ This agent will analyze...\n❌ I will analyze...\n```\n\n### Clarity and Specificity\n\n**Be specific, not vague:**\n```\n✅ Check for SQL injection by examining all database queries for parameterization\n❌ Look for security issues\n\n✅ Provide file:line references for each finding\n❌ Show where issues are\n\n✅ Categorize as critical (security), major (bugs), or minor (style)\n❌ Rate the severity of issues\n```\n\n### Actionable Instructions\n\n**Give concrete steps:**\n```\n✅ Read the file using the Read tool, then search for patterns using Grep\n❌ Analyze the code\n\n✅ Generate test file at test/path/to/file.test.ts\n❌ Create tests\n```\n\n## Common Pitfalls\n\n### ❌ Vague Responsibilities\n\n```markdown\n**Your Core Responsibilities:**\n1. Help the user with their code\n2. Provide assistance\n3. Be helpful\n```\n\n**Why bad:** Not specific enough to guide behavior.\n\n### ✅ Specific Responsibilities\n\n```markdown\n**Your Core Responsibilities:**\n1. Analyze TypeScript code for type safety issues\n2. Identify missing type annotations and improper 'any' usage\n3. Recommend specific type improvements with examples\n```\n\n### ❌ Missing Process Steps\n\n```markdown\nAnalyze the code and provide feedback.\n```\n\n**Why bad:** Agent doesn't know HOW to analyze.\n\n### ✅ Clear Process\n\n```markdown\n**Analysis Process:**\n1. Read code files using Read tool\n2. Scan for type annotations on all functions\n3. Check for 'any' type usage\n4. Verify generic type parameters\n5. List findings with file:line references\n```\n\n### ❌ Undefined Output\n\n```markdown\nProvide a report.\n```\n\n**Why bad:** Agent doesn't know what format to use.\n\n### ✅ Defined Output Format\n\n```markdown\n**Output Format:**\n## Type Safety Report\n\n### Summary\n[Overview of findings]\n\n### Issues Found\n- `file.ts:42` - Missing return type on `processData`\n- `utils.ts:15` - Unsafe 'any' usage in parameter\n\n### Recommendations\n[Specific fixes with examples]\n```\n\n## Length Guidelines\n\n### Minimum Viable Agent\n\n**~500 words minimum:**\n- Role description\n- 3 core responsibilities\n- 5-step process\n- Output format\n\n### Standard Agent\n\n**~1,000-2,000 words:**\n- Detailed role and expertise\n- 5-8 responsibilities\n- 8-12 process steps\n- Quality standards\n- Output format\n- 3-5 edge cases\n\n### Comprehensive Agent\n\n**~2,000-5,000 words:**\n- Complete role with background\n- Comprehensive responsibilities\n- Detailed multi-phase process\n- Extensive quality standards\n- Multiple output formats\n- Many edge cases\n- Examples within system prompt\n\n**Avoid > 10,000 words:** Too long, diminishing returns.\n\n## Testing System Prompts\n\n### Test Completeness\n\nCan the agent handle these based on system prompt alone?\n\n- [ ] Typical task execution\n- [ ] Edge cases mentioned\n- [ ] Error scenarios\n- [ ] Unclear requirements\n- [ ] Large/complex inputs\n- [ ] Empty/missing inputs\n\n### Test Clarity\n\nRead the system prompt and ask:\n\n- Can another developer understand what this agent does?\n- Are process steps clear and actionable?\n- Is output format unambiguous?\n- Are quality standards measurable?\n\n### Iterate Based on Results\n\nAfter testing agent:\n1. Identify where it struggled\n2. Add missing guidance to system prompt\n3. Clarify ambiguous instructions\n4. Add process steps for edge cases\n5. Re-test\n\n## Conclusion\n\nEffective system prompts are:\n- **Specific**: Clear about what and how\n- **Structured**: Organized with clear sections\n- **Complete**: Covers normal and edge cases\n- **Actionable**: Provides concrete steps\n- **Testable**: Defines measurable standards\n\nUse the patterns above as templates, customize for your domain, and iterate based on agent performance.\n",
        "plugins/plugin-dev/skills/agent-development/references/triggering-examples.md": "# Agent Triggering Examples: Best Practices\n\nComplete guide to writing effective `<example>` blocks in agent descriptions for reliable triggering.\n\n## Example Block Format\n\nThe standard format for triggering examples:\n\n```markdown\n<example>\nContext: [Describe the situation - what led to this interaction]\nuser: \"[Exact user message or request]\"\nassistant: \"[How Claude should respond before triggering]\"\n<commentary>\n[Explanation of why this agent should be triggered in this scenario]\n</commentary>\nassistant: \"[How Claude triggers the agent - usually 'I'll use the [agent-name] agent...']\"\n</example>\n```\n\n## Anatomy of a Good Example\n\n### Context\n\n**Purpose:** Set the scene - what happened before the user's message\n\n**Good contexts:**\n```\nContext: User just implemented a new authentication feature\nContext: User has created a PR and wants it reviewed\nContext: User is debugging a test failure\nContext: After writing several functions without documentation\n```\n\n**Bad contexts:**\n```\nContext: User needs help (too vague)\nContext: Normal usage (not specific)\n```\n\n### User Message\n\n**Purpose:** Show the exact phrasing that should trigger the agent\n\n**Good user messages:**\n```\nuser: \"I've added the OAuth flow, can you check it?\"\nuser: \"Review PR #123\"\nuser: \"Why is this test failing?\"\nuser: \"Add docs for these functions\"\n```\n\n**Vary the phrasing:**\nInclude multiple examples with different phrasings for the same intent:\n```\nExample 1: user: \"Review my code\"\nExample 2: user: \"Can you check this implementation?\"\nExample 3: user: \"Look over my changes\"\n```\n\n### Assistant Response (Before Triggering)\n\n**Purpose:** Show what Claude says before launching the agent\n\n**Good responses:**\n```\nassistant: \"I'll analyze your OAuth implementation.\"\nassistant: \"Let me review that PR for you.\"\nassistant: \"I'll investigate the test failure.\"\n```\n\n**Proactive example:**\n```\nassistant: \"Great! Now let me review the code quality.\"\n<commentary>\nCode was just written, proactively trigger review agent.\n</commentary>\n```\n\n### Commentary\n\n**Purpose:** Explain the reasoning - WHY this agent should trigger\n\n**Good commentary:**\n```\n<commentary>\nUser explicitly requested code review, trigger the code-reviewer agent.\n</commentary>\n\n<commentary>\nAfter code implementation, proactively use review agent to check quality.\n</commentary>\n\n<commentary>\nPR analysis request matches pr-analyzer agent's expertise.\n</commentary>\n```\n\n**Include decision logic:**\n```\n<commentary>\nUser wrote tests (Test tool used). The test-analyzer agent should check\ntest quality and coverage before continuing.\n</commentary>\n```\n\n### Assistant Response (Triggering)\n\n**Purpose:** Show how Claude invokes the agent\n\n**Standard pattern:**\n```\nassistant: \"I'll use the [agent-name] agent to [what it will do].\"\n```\n\n**Examples:**\n```\nassistant: \"I'll use the code-reviewer agent to analyze the changes.\"\nassistant: \"Let me use the test-generator agent to create comprehensive tests.\"\nassistant: \"I'll use the security-analyzer agent to check for vulnerabilities.\"\n```\n\n## Example Types\n\n### Type 1: Explicit Request\n\nUser directly asks for what the agent does:\n\n```markdown\n<example>\nContext: User explicitly requests security analysis\nuser: \"Check my code for security vulnerabilities\"\nassistant: \"I'll use the security-analyzer agent to perform a thorough security review.\"\n<commentary>\nDirect security analysis request triggers the security-analyzer agent.\n</commentary>\n</example>\n```\n\n### Type 2: Proactive Triggering\n\nAgent triggers after relevant work without explicit request:\n\n```markdown\n<example>\nContext: User just implemented database queries\nuser: \"I've added the user search functionality\"\nassistant: \"Great! Let me review it for security.\"\n<commentary>\nDatabase code written. Proactively trigger security-analyzer to check\nfor SQL injection and other database security issues.\n</commentary>\nassistant: \"I'll use the security-analyzer agent to check the database code.\"\n</example>\n```\n\n### Type 3: Implicit Request\n\nUser implies need without stating it directly:\n\n```markdown\n<example>\nContext: User mentions code is hard to understand\nuser: \"This code is confusing and hard to follow\"\nassistant: \"I can help improve the code clarity.\"\n<commentary>\nUser indicates complexity issues. Trigger code-simplifier agent to refactor\nfor better readability.\n</commentary>\nassistant: \"I'll use the code-simplifier agent to suggest improvements.\"\n</example>\n```\n\n### Type 4: Tool Usage Pattern\n\nAgent triggers based on prior tool usage:\n\n```markdown\n<example>\nContext: User made multiple edits to test files\nuser: \"I've updated all the tests\"\nassistant: \"Great! Let me verify test quality.\"\n<commentary>\nMultiple Edit tools used on test files. Proactively trigger test-quality-analyzer\nto ensure tests follow best practices.\n</commentary>\nassistant: \"I'll use the test-quality-analyzer agent to review the tests.\"\n</example>\n```\n\n## Multiple Examples Strategy\n\n### Cover Different Phrasings\n\n```markdown\n<example>\nuser: \"Review my code\"\n[...]\n</example>\n\n<example>\nuser: \"Can you check my implementation?\"\n[...]\n</example>\n\n<example>\nuser: \"Look over these changes\"\n[...]\n</example>\n```\n\n### Cover Proactive and Reactive\n\n```markdown\n<example>\nContext: User explicitly requests review\nuser: \"Review my code for issues\"\n[...]\n</example>\n\n<example>\nContext: After user writes code\nuser: \"I've implemented the feature\"\nassistant: \"Great! Now let me review it.\"\n<commentary>\nCode written, proactively review.\n</commentary>\n[...]\n</example>\n```\n\n### Cover Edge Cases\n\n```markdown\n<example>\nContext: Typical usage\nuser: \"Check my PR\"\n[...]\n</example>\n\n<example>\nContext: Large PR that needs thorough analysis\nuser: \"This is a big PR, can you do a deep review?\"\n[...]\n<commentary>\nLarge PR mentioned, use thorough analysis mode.\n</commentary>\n</example>\n```\n\n## Common Mistakes\n\n### ❌ Missing Context\n\n```markdown\n<example>\nuser: \"Review my code\"\nassistant: \"I'll use the code-reviewer agent.\"\n</example>\n```\n\n**Why bad:** No context about what led to this request.\n\n### ✅ With Context\n\n```markdown\n<example>\nContext: User just finished implementing authentication\nuser: \"Review my code\"\nassistant: \"I'll use the code-reviewer agent to analyze the auth implementation.\"\n<commentary>\nAuth code written, review for security and best practices.\n</commentary>\n</example>\n```\n\n### ❌ No Commentary\n\n```markdown\n<example>\nContext: User requests review\nuser: \"Check my changes\"\nassistant: \"I'll use the reviewer agent.\"\n</example>\n```\n\n**Why bad:** Doesn't explain WHY agent triggers.\n\n### ✅ With Commentary\n\n```markdown\n<example>\nContext: User requests review after making changes\nuser: \"Check my changes\"\nassistant: \"I'll use the code-reviewer agent to analyze the modifications.\"\n<commentary>\nCode review request triggers agent to check quality, security, and adherence to standards.\n</commentary>\n</example>\n```\n\n### ❌ Agent Responds Directly\n\n```markdown\n<example>\nuser: \"Review my code\"\nassistant: \"I found the following issues: [lists issues]\"\n</example>\n```\n\n**Why bad:** Shows agent's output, not triggering.\n\n### ✅ Shows Triggering\n\n```markdown\n<example>\nuser: \"Review my code\"\nassistant: \"I'll use the code-reviewer agent to perform the review.\"\n<commentary>\nReview request triggers the agent.\n</commentary>\n</example>\n```\n\n## How Many Examples?\n\n### Minimum: 2 Examples\n\nCover at least:\n1. Explicit request\n2. One variation or proactive trigger\n\n### Recommended: 3-4 Examples\n\nCover:\n1. Explicit request (direct ask)\n2. Implicit request (user implies need)\n3. Proactive trigger (after relevant work)\n4. Edge case or specific scenario\n\n### Maximum: 6 Examples\n\nMore than 6 makes description too long. Focus on most important scenarios.\n\n## Template Library\n\n### Code Review Agent\n\n```markdown\n<example>\nContext: User just implemented a new feature\nuser: \"I've added the user registration feature\"\nassistant: \"Great! Let me review the code quality.\"\n<commentary>\nCode written, proactively trigger code-reviewer agent.\n</commentary>\nassistant: \"I'll use the code-reviewer agent to analyze the implementation.\"\n</example>\n\n<example>\nContext: User explicitly requests review\nuser: \"Can you review my changes for issues?\"\nassistant: \"I'll use the code-reviewer agent to perform a thorough review.\"\n<commentary>\nExplicit review request triggers the agent.\n</commentary>\n</example>\n```\n\n### Test Generation Agent\n\n```markdown\n<example>\nContext: User implemented functions without tests\nuser: \"I've added the data processing functions\"\nassistant: \"Great! Let me generate tests for these.\"\n<commentary>\nNew code without tests, proactively trigger test-generator agent.\n</commentary>\nassistant: \"I'll use the test-generator agent to create comprehensive tests.\"\n</example>\n\n<example>\nContext: User explicitly asks for tests\nuser: \"Generate tests for my code\"\nassistant: \"I'll use the test-generator agent to create a complete test suite.\"\n<commentary>\nDirect test generation request triggers the agent.\n</commentary>\n</example>\n```\n\n### Documentation Agent\n\n```markdown\n<example>\nContext: User added new API endpoints\nuser: \"I've implemented the REST API endpoints\"\nassistant: \"I'll document these endpoints.\"\n<commentary>\nNew API code, proactively generate documentation.\n</commentary>\nassistant: \"I'll use the api-docs-writer agent to create comprehensive documentation.\"\n</example>\n\n<example>\nContext: User requests documentation\nuser: \"Write docs for this API\"\nassistant: \"I'll use the api-docs-writer agent to generate clear documentation.\"\n<commentary>\nDocumentation request triggers the agent.\n</commentary>\n</example>\n```\n\n### Validation Agent\n\n```markdown\n<example>\nContext: User ready to commit changes\nuser: \"I'm ready to commit this code\"\nassistant: \"Let me validate it first.\"\n<commentary>\nBefore commit, proactively validate with validation-agent.\n</commentary>\nassistant: \"I'll use the code-validator agent to check for issues.\"\n</example>\n\n<example>\nContext: User asks for validation\nuser: \"Validate my implementation\"\nassistant: \"I'll use the code-validator agent to verify correctness.\"\n<commentary>\nExplicit validation request triggers the agent.\n</commentary>\n</example>\n```\n\n## Debugging Triggering Issues\n\n### Agent Not Triggering\n\n**Check:**\n1. Examples include relevant keywords from user message\n2. Context matches actual usage scenarios\n3. Commentary explains triggering logic clearly\n4. Assistant shows use of Agent tool in examples\n\n**Fix:**\nAdd more examples covering different phrasings.\n\n### Agent Triggers Too Often\n\n**Check:**\n1. Examples are too broad or generic\n2. Triggering conditions overlap with other agents\n3. Commentary doesn't distinguish when NOT to use\n\n**Fix:**\nMake examples more specific, add negative examples.\n\n### Agent Triggers in Wrong Scenarios\n\n**Check:**\n1. Examples don't match actual intended use\n2. Commentary suggests inappropriate triggering\n\n**Fix:**\nRevise examples to show only correct triggering scenarios.\n\n## Best Practices Summary\n\n✅ **DO:**\n- Include 2-4 concrete, specific examples\n- Show both explicit and proactive triggering\n- Provide clear context for each example\n- Explain reasoning in commentary\n- Vary user message phrasing\n- Show Claude using Agent tool\n\n❌ **DON'T:**\n- Use generic, vague examples\n- Omit context or commentary\n- Show only one type of triggering\n- Skip the agent invocation step\n- Make examples too similar\n- Forget to explain why agent triggers\n\n## Conclusion\n\nWell-crafted examples are crucial for reliable agent triggering. Invest time in creating diverse, specific examples that clearly demonstrate when and why the agent should be used.\n",
        "plugins/plugin-dev/skills/command-development/README.md": "# Command Development Skill\n\nComprehensive guidance on creating Claude Code slash commands, including file format, frontmatter options, dynamic arguments, and best practices.\n\n## Overview\n\nThis skill provides knowledge about:\n- Slash command file format and structure\n- YAML frontmatter configuration fields\n- Dynamic arguments ($ARGUMENTS, $1, $2, etc.)\n- File references with @ syntax\n- Bash execution with !` syntax\n- Command organization and namespacing\n- Best practices for command development\n- Plugin-specific features (${CLAUDE_PLUGIN_ROOT}, plugin patterns)\n- Integration with plugin components (agents, skills, hooks)\n- Validation patterns and error handling\n\n## Skill Structure\n\n### SKILL.md (~2,470 words)\n\nCore skill content covering:\n\n**Fundamentals:**\n- Command basics and locations\n- File format (Markdown with optional frontmatter)\n- YAML frontmatter fields overview\n- Dynamic arguments ($ARGUMENTS and positional)\n- File references (@ syntax)\n- Bash execution (!` syntax)\n- Command organization patterns\n- Best practices and common patterns\n- Troubleshooting\n\n**Plugin-Specific:**\n- ${CLAUDE_PLUGIN_ROOT} environment variable\n- Plugin command discovery and organization\n- Plugin command patterns (configuration, template, multi-script)\n- Integration with plugin components (agents, skills, hooks)\n- Validation patterns (argument, file, resource, error handling)\n\n### References\n\nDetailed documentation:\n\n- **frontmatter-reference.md**: Complete YAML frontmatter field specifications\n  - All field descriptions with types and defaults\n  - When to use each field\n  - Examples and best practices\n  - Validation and common errors\n\n- **plugin-features-reference.md**: Plugin-specific command features\n  - Plugin command discovery and organization\n  - ${CLAUDE_PLUGIN_ROOT} environment variable usage\n  - Plugin command patterns (configuration, template, multi-script)\n  - Integration with plugin agents, skills, and hooks\n  - Validation patterns and error handling\n\n### Examples\n\nPractical command examples:\n\n- **simple-commands.md**: 10 complete command examples\n  - Code review commands\n  - Testing commands\n  - Deployment commands\n  - Documentation generators\n  - Git integration commands\n  - Analysis and research commands\n\n- **plugin-commands.md**: 10 plugin-specific command examples\n  - Simple plugin commands with scripts\n  - Multi-script workflows\n  - Template-based generation\n  - Configuration-driven deployment\n  - Agent and skill integration\n  - Multi-component workflows\n  - Validated input commands\n  - Environment-aware commands\n\n## When This Skill Triggers\n\nClaude Code activates this skill when users:\n- Ask to \"create a slash command\" or \"add a command\"\n- Need to \"write a custom command\"\n- Want to \"define command arguments\"\n- Ask about \"command frontmatter\" or YAML configuration\n- Need to \"organize commands\" or use namespacing\n- Want to create commands with file references\n- Ask about \"bash execution in commands\"\n- Need command development best practices\n\n## Progressive Disclosure\n\nThe skill uses progressive disclosure:\n\n1. **SKILL.md** (~2,470 words): Core concepts, common patterns, and plugin features overview\n2. **References** (~13,500 words total): Detailed specifications\n   - frontmatter-reference.md (~1,200 words)\n   - plugin-features-reference.md (~1,800 words)\n   - interactive-commands.md (~2,500 words)\n   - advanced-workflows.md (~1,700 words)\n   - testing-strategies.md (~2,200 words)\n   - documentation-patterns.md (~2,000 words)\n   - marketplace-considerations.md (~2,200 words)\n3. **Examples** (~6,000 words total): Complete working command examples\n   - simple-commands.md\n   - plugin-commands.md\n\nClaude loads references and examples as needed based on task.\n\n## Command Basics Quick Reference\n\n### File Format\n\n```markdown\n---\ndescription: Brief description\nargument-hint: [arg1] [arg2]\nallowed-tools: Read, Bash(git:*)\n---\n\nCommand prompt content with:\n- Arguments: $1, $2, or $ARGUMENTS\n- Files: @path/to/file\n- Bash: !`command here`\n```\n\n### Locations\n\n- **Project**: `.claude/commands/` (shared with team)\n- **Personal**: `~/.claude/commands/` (your commands)\n- **Plugin**: `plugin-name/commands/` (plugin-specific)\n\n### Key Features\n\n**Dynamic arguments:**\n- `$ARGUMENTS` - All arguments as single string\n- `$1`, `$2`, `$3` - Positional arguments\n\n**File references:**\n- `@path/to/file` - Include file contents\n\n**Bash execution:**\n- `!`command`` - Execute and include output\n\n## Frontmatter Fields Quick Reference\n\n| Field | Purpose | Example |\n|-------|---------|---------|\n| `description` | Brief description for /help | `\"Review code for issues\"` |\n| `allowed-tools` | Restrict tool access | `Read, Bash(git:*)` |\n| `model` | Specify model | `sonnet`, `opus`, `haiku` |\n| `argument-hint` | Document arguments | `[pr-number] [priority]` |\n| `disable-model-invocation` | Manual-only command | `true` |\n\n## Common Patterns\n\n### Simple Review Command\n\n```markdown\n---\ndescription: Review code for issues\n---\n\nReview this code for quality and potential bugs.\n```\n\n### Command with Arguments\n\n```markdown\n---\ndescription: Deploy to environment\nargument-hint: [environment] [version]\n---\n\nDeploy to $1 environment using version $2\n```\n\n### Command with File Reference\n\n```markdown\n---\ndescription: Document file\nargument-hint: [file-path]\n---\n\nGenerate documentation for @$1\n```\n\n### Command with Bash Execution\n\n```markdown\n---\ndescription: Show Git status\nallowed-tools: Bash(git:*)\n---\n\nCurrent status: !`git status`\nRecent commits: !`git log --oneline -5`\n```\n\n## Development Workflow\n\n1. **Design command:**\n   - Define purpose and scope\n   - Determine required arguments\n   - Identify needed tools\n\n2. **Create file:**\n   - Choose appropriate location\n   - Create `.md` file with command name\n   - Write basic prompt\n\n3. **Add frontmatter:**\n   - Start minimal (just description)\n   - Add fields as needed (allowed-tools, etc.)\n   - Document arguments with argument-hint\n\n4. **Test command:**\n   - Invoke with `/command-name`\n   - Verify arguments work\n   - Check bash execution\n   - Test file references\n\n5. **Refine:**\n   - Improve prompt clarity\n   - Handle edge cases\n   - Add examples in comments\n   - Document requirements\n\n## Best Practices Summary\n\n1. **Single responsibility**: One command, one clear purpose\n2. **Clear descriptions**: Make discoverable in `/help`\n3. **Document arguments**: Always use argument-hint\n4. **Minimal tools**: Use most restrictive allowed-tools\n5. **Test thoroughly**: Verify all features work\n6. **Add comments**: Explain complex logic\n7. **Handle errors**: Consider missing arguments/files\n\n## Status\n\n**Completed enhancements:**\n- ✓ Plugin command patterns (${CLAUDE_PLUGIN_ROOT}, discovery, organization)\n- ✓ Integration patterns (agents, skills, hooks coordination)\n- ✓ Validation patterns (input, file, resource validation, error handling)\n\n**Remaining enhancements (in progress):**\n- Advanced workflows (multi-step command sequences)\n- Testing strategies (how to test commands effectively)\n- Documentation patterns (command documentation best practices)\n- Marketplace considerations (publishing and distribution)\n\n## Maintenance\n\nTo update this skill:\n1. Keep SKILL.md focused on core fundamentals\n2. Move detailed specifications to references/\n3. Add new examples/ for different use cases\n4. Update frontmatter when new fields added\n5. Ensure imperative/infinitive form throughout\n6. Test examples work with current Claude Code\n\n## Version History\n\n**v0.1.0** (2025-01-15):\n- Initial release with basic command fundamentals\n- Frontmatter field reference\n- 10 simple command examples\n- Ready for plugin-specific pattern additions\n",
        "plugins/plugin-dev/skills/command-development/SKILL.md": "---\nname: Command Development\ndescription: This skill should be used when the user asks to \"create a slash command\", \"add a command\", \"write a custom command\", \"define command arguments\", \"use command frontmatter\", \"organize commands\", \"create command with file references\", \"interactive command\", \"use AskUserQuestion in command\", or needs guidance on slash command structure, YAML frontmatter fields, dynamic arguments, bash execution in commands, user interaction patterns, or command development best practices for Claude Code.\nversion: 0.2.0\n---\n\n# Command Development for Claude Code\n\n## Overview\n\nSlash commands are frequently-used prompts defined as Markdown files that Claude executes during interactive sessions. Understanding command structure, frontmatter options, and dynamic features enables creating powerful, reusable workflows.\n\n**Key concepts:**\n- Markdown file format for commands\n- YAML frontmatter for configuration\n- Dynamic arguments and file references\n- Bash execution for context\n- Command organization and namespacing\n\n## Command Basics\n\n### What is a Slash Command?\n\nA slash command is a Markdown file containing a prompt that Claude executes when invoked. Commands provide:\n- **Reusability**: Define once, use repeatedly\n- **Consistency**: Standardize common workflows\n- **Sharing**: Distribute across team or projects\n- **Efficiency**: Quick access to complex prompts\n\n### Critical: Commands are Instructions FOR Claude\n\n**Commands are written for agent consumption, not human consumption.**\n\nWhen a user invokes `/command-name`, the command content becomes Claude's instructions. Write commands as directives TO Claude about what to do, not as messages TO the user.\n\n**Correct approach (instructions for Claude):**\n```markdown\nReview this code for security vulnerabilities including:\n- SQL injection\n- XSS attacks\n- Authentication issues\n\nProvide specific line numbers and severity ratings.\n```\n\n**Incorrect approach (messages to user):**\n```markdown\nThis command will review your code for security issues.\nYou'll receive a report with vulnerability details.\n```\n\nThe first example tells Claude what to do. The second tells the user what will happen but doesn't instruct Claude. Always use the first approach.\n\n### Command Locations\n\n**Project commands** (shared with team):\n- Location: `.claude/commands/`\n- Scope: Available in specific project\n- Label: Shown as \"(project)\" in `/help`\n- Use for: Team workflows, project-specific tasks\n\n**Personal commands** (available everywhere):\n- Location: `~/.claude/commands/`\n- Scope: Available in all projects\n- Label: Shown as \"(user)\" in `/help`\n- Use for: Personal workflows, cross-project utilities\n\n**Plugin commands** (bundled with plugins):\n- Location: `plugin-name/commands/`\n- Scope: Available when plugin installed\n- Label: Shown as \"(plugin-name)\" in `/help`\n- Use for: Plugin-specific functionality\n\n## File Format\n\n### Basic Structure\n\nCommands are Markdown files with `.md` extension:\n\n```\n.claude/commands/\n├── review.md           # /review command\n├── test.md             # /test command\n└── deploy.md           # /deploy command\n```\n\n**Simple command:**\n```markdown\nReview this code for security vulnerabilities including:\n- SQL injection\n- XSS attacks\n- Authentication bypass\n- Insecure data handling\n```\n\nNo frontmatter needed for basic commands.\n\n### With YAML Frontmatter\n\nAdd configuration using YAML frontmatter:\n\n```markdown\n---\ndescription: Review code for security issues\nallowed-tools: Read, Grep, Bash(git:*)\nmodel: sonnet\n---\n\nReview this code for security vulnerabilities...\n```\n\n## YAML Frontmatter Fields\n\n### description\n\n**Purpose:** Brief description shown in `/help`\n**Type:** String\n**Default:** First line of command prompt\n\n```yaml\n---\ndescription: Review pull request for code quality\n---\n```\n\n**Best practice:** Clear, actionable description (under 60 characters)\n\n### allowed-tools\n\n**Purpose:** Specify which tools command can use\n**Type:** String or Array\n**Default:** Inherits from conversation\n\n```yaml\n---\nallowed-tools: Read, Write, Edit, Bash(git:*)\n---\n```\n\n**Patterns:**\n- `Read, Write, Edit` - Specific tools\n- `Bash(git:*)` - Bash with git commands only\n- `*` - All tools (rarely needed)\n\n**Use when:** Command requires specific tool access\n\n### model\n\n**Purpose:** Specify model for command execution\n**Type:** String (sonnet, opus, haiku)\n**Default:** Inherits from conversation\n\n```yaml\n---\nmodel: haiku\n---\n```\n\n**Use cases:**\n- `haiku` - Fast, simple commands\n- `sonnet` - Standard workflows\n- `opus` - Complex analysis\n\n### argument-hint\n\n**Purpose:** Document expected arguments for autocomplete\n**Type:** String\n**Default:** None\n\n```yaml\n---\nargument-hint: [pr-number] [priority] [assignee]\n---\n```\n\n**Benefits:**\n- Helps users understand command arguments\n- Improves command discovery\n- Documents command interface\n\n### disable-model-invocation\n\n**Purpose:** Prevent SlashCommand tool from programmatically calling command\n**Type:** Boolean\n**Default:** false\n\n```yaml\n---\ndisable-model-invocation: true\n---\n```\n\n**Use when:** Command should only be manually invoked\n\n## Dynamic Arguments\n\n### Using $ARGUMENTS\n\nCapture all arguments as single string:\n\n```markdown\n---\ndescription: Fix issue by number\nargument-hint: [issue-number]\n---\n\nFix issue #$ARGUMENTS following our coding standards and best practices.\n```\n\n**Usage:**\n```\n> /fix-issue 123\n> /fix-issue 456\n```\n\n**Expands to:**\n```\nFix issue #123 following our coding standards...\nFix issue #456 following our coding standards...\n```\n\n### Using Positional Arguments\n\nCapture individual arguments with `$1`, `$2`, `$3`, etc.:\n\n```markdown\n---\ndescription: Review PR with priority and assignee\nargument-hint: [pr-number] [priority] [assignee]\n---\n\nReview pull request #$1 with priority level $2.\nAfter review, assign to $3 for follow-up.\n```\n\n**Usage:**\n```\n> /review-pr 123 high alice\n```\n\n**Expands to:**\n```\nReview pull request #123 with priority level high.\nAfter review, assign to alice for follow-up.\n```\n\n### Combining Arguments\n\nMix positional and remaining arguments:\n\n```markdown\nDeploy $1 to $2 environment with options: $3\n```\n\n**Usage:**\n```\n> /deploy api staging --force --skip-tests\n```\n\n**Expands to:**\n```\nDeploy api to staging environment with options: --force --skip-tests\n```\n\n## File References\n\n### Using @ Syntax\n\nInclude file contents in command:\n\n```markdown\n---\ndescription: Review specific file\nargument-hint: [file-path]\n---\n\nReview @$1 for:\n- Code quality\n- Best practices\n- Potential bugs\n```\n\n**Usage:**\n```\n> /review-file src/api/users.ts\n```\n\n**Effect:** Claude reads `src/api/users.ts` before processing command\n\n### Multiple File References\n\nReference multiple files:\n\n```markdown\nCompare @src/old-version.js with @src/new-version.js\n\nIdentify:\n- Breaking changes\n- New features\n- Bug fixes\n```\n\n### Static File References\n\nReference known files without arguments:\n\n```markdown\nReview @package.json and @tsconfig.json for consistency\n\nEnsure:\n- TypeScript version matches\n- Dependencies are aligned\n- Build configuration is correct\n```\n\n## Bash Execution in Commands\n\nCommands can execute bash commands inline to dynamically gather context before Claude processes the command. This is useful for including repository state, environment information, or project-specific context.\n\n**When to use:**\n- Include dynamic context (git status, environment vars, etc.)\n- Gather project/repository state\n- Build context-aware workflows\n\n**Implementation details:**\nFor complete syntax, examples, and best practices, see `references/plugin-features-reference.md` section on bash execution. The reference includes the exact syntax and multiple working examples to avoid execution issues\n\n## Command Organization\n\n### Flat Structure\n\nSimple organization for small command sets:\n\n```\n.claude/commands/\n├── build.md\n├── test.md\n├── deploy.md\n├── review.md\n└── docs.md\n```\n\n**Use when:** 5-15 commands, no clear categories\n\n### Namespaced Structure\n\nOrganize commands in subdirectories:\n\n```\n.claude/commands/\n├── ci/\n│   ├── build.md        # /build (project:ci)\n│   ├── test.md         # /test (project:ci)\n│   └── lint.md         # /lint (project:ci)\n├── git/\n│   ├── commit.md       # /commit (project:git)\n│   └── pr.md           # /pr (project:git)\n└── docs/\n    ├── generate.md     # /generate (project:docs)\n    └── publish.md      # /publish (project:docs)\n```\n\n**Benefits:**\n- Logical grouping by category\n- Namespace shown in `/help`\n- Easier to find related commands\n\n**Use when:** 15+ commands, clear categories\n\n## Best Practices\n\n### Command Design\n\n1. **Single responsibility:** One command, one task\n2. **Clear descriptions:** Self-explanatory in `/help`\n3. **Explicit dependencies:** Use `allowed-tools` when needed\n4. **Document arguments:** Always provide `argument-hint`\n5. **Consistent naming:** Use verb-noun pattern (review-pr, fix-issue)\n\n### Argument Handling\n\n1. **Validate arguments:** Check for required arguments in prompt\n2. **Provide defaults:** Suggest defaults when arguments missing\n3. **Document format:** Explain expected argument format\n4. **Handle edge cases:** Consider missing or invalid arguments\n\n```markdown\n---\nargument-hint: [pr-number]\n---\n\n$IF($1,\n  Review PR #$1,\n  Please provide a PR number. Usage: /review-pr [number]\n)\n```\n\n### File References\n\n1. **Explicit paths:** Use clear file paths\n2. **Check existence:** Handle missing files gracefully\n3. **Relative paths:** Use project-relative paths\n4. **Glob support:** Consider using Glob tool for patterns\n\n### Bash Commands\n\n1. **Limit scope:** Use `Bash(git:*)` not `Bash(*)`\n2. **Safe commands:** Avoid destructive operations\n3. **Handle errors:** Consider command failures\n4. **Keep fast:** Long-running commands slow invocation\n\n### Documentation\n\n1. **Add comments:** Explain complex logic\n2. **Provide examples:** Show usage in comments\n3. **List requirements:** Document dependencies\n4. **Version commands:** Note breaking changes\n\n```markdown\n---\ndescription: Deploy application to environment\nargument-hint: [environment] [version]\n---\n\n<!--\nUsage: /deploy [staging|production] [version]\nRequires: AWS credentials configured\nExample: /deploy staging v1.2.3\n-->\n\nDeploy application to $1 environment using version $2...\n```\n\n## Common Patterns\n\n### Review Pattern\n\n```markdown\n---\ndescription: Review code changes\nallowed-tools: Read, Bash(git:*)\n---\n\nFiles changed: !`git diff --name-only`\n\nReview each file for:\n1. Code quality and style\n2. Potential bugs or issues\n3. Test coverage\n4. Documentation needs\n\nProvide specific feedback for each file.\n```\n\n### Testing Pattern\n\n```markdown\n---\ndescription: Run tests for specific file\nargument-hint: [test-file]\nallowed-tools: Bash(npm:*)\n---\n\nRun tests: !`npm test $1`\n\nAnalyze results and suggest fixes for failures.\n```\n\n### Documentation Pattern\n\n```markdown\n---\ndescription: Generate documentation for file\nargument-hint: [source-file]\n---\n\nGenerate comprehensive documentation for @$1 including:\n- Function/class descriptions\n- Parameter documentation\n- Return value descriptions\n- Usage examples\n- Edge cases and errors\n```\n\n### Workflow Pattern\n\n```markdown\n---\ndescription: Complete PR workflow\nargument-hint: [pr-number]\nallowed-tools: Bash(gh:*), Read\n---\n\nPR #$1 Workflow:\n\n1. Fetch PR: !`gh pr view $1`\n2. Review changes\n3. Run checks\n4. Approve or request changes\n```\n\n## Troubleshooting\n\n**Command not appearing:**\n- Check file is in correct directory\n- Verify `.md` extension present\n- Ensure valid Markdown format\n- Restart Claude Code\n\n**Arguments not working:**\n- Verify `$1`, `$2` syntax correct\n- Check `argument-hint` matches usage\n- Ensure no extra spaces\n\n**Bash execution failing:**\n- Check `allowed-tools` includes Bash\n- Verify command syntax in backticks\n- Test command in terminal first\n- Check for required permissions\n\n**File references not working:**\n- Verify `@` syntax correct\n- Check file path is valid\n- Ensure Read tool allowed\n- Use absolute or project-relative paths\n\n## Plugin-Specific Features\n\n### CLAUDE_PLUGIN_ROOT Variable\n\nPlugin commands have access to `${CLAUDE_PLUGIN_ROOT}`, an environment variable that resolves to the plugin's absolute path.\n\n**Purpose:**\n- Reference plugin files portably\n- Execute plugin scripts\n- Load plugin configuration\n- Access plugin templates\n\n**Basic usage:**\n\n```markdown\n---\ndescription: Analyze using plugin script\nallowed-tools: Bash(node:*)\n---\n\nRun analysis: !`node ${CLAUDE_PLUGIN_ROOT}/scripts/analyze.js $1`\n\nReview results and report findings.\n```\n\n**Common patterns:**\n\n```markdown\n# Execute plugin script\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/script.sh`\n\n# Load plugin configuration\n@${CLAUDE_PLUGIN_ROOT}/config/settings.json\n\n# Use plugin template\n@${CLAUDE_PLUGIN_ROOT}/templates/report.md\n\n# Access plugin resources\n@${CLAUDE_PLUGIN_ROOT}/docs/reference.md\n```\n\n**Why use it:**\n- Works across all installations\n- Portable between systems\n- No hardcoded paths needed\n- Essential for multi-file plugins\n\n### Plugin Command Organization\n\nPlugin commands discovered automatically from `commands/` directory:\n\n```\nplugin-name/\n├── commands/\n│   ├── foo.md              # /foo (plugin:plugin-name)\n│   ├── bar.md              # /bar (plugin:plugin-name)\n│   └── utils/\n│       └── helper.md       # /helper (plugin:plugin-name:utils)\n└── plugin.json\n```\n\n**Namespace benefits:**\n- Logical command grouping\n- Shown in `/help` output\n- Avoid name conflicts\n- Organize related commands\n\n**Naming conventions:**\n- Use descriptive action names\n- Avoid generic names (test, run)\n- Consider plugin-specific prefix\n- Use hyphens for multi-word names\n\n### Plugin Command Patterns\n\n**Configuration-based pattern:**\n\n```markdown\n---\ndescription: Deploy using plugin configuration\nargument-hint: [environment]\nallowed-tools: Read, Bash(*)\n---\n\nLoad configuration: @${CLAUDE_PLUGIN_ROOT}/config/$1-deploy.json\n\nDeploy to $1 using configuration settings.\nMonitor deployment and report status.\n```\n\n**Template-based pattern:**\n\n```markdown\n---\ndescription: Generate docs from template\nargument-hint: [component]\n---\n\nTemplate: @${CLAUDE_PLUGIN_ROOT}/templates/docs.md\n\nGenerate documentation for $1 following template structure.\n```\n\n**Multi-script pattern:**\n\n```markdown\n---\ndescription: Complete build workflow\nallowed-tools: Bash(*)\n---\n\nBuild: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh`\nTest: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/test.sh`\nPackage: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/package.sh`\n\nReview outputs and report workflow status.\n```\n\n**See `references/plugin-features-reference.md` for detailed patterns.**\n\n## Integration with Plugin Components\n\nCommands can integrate with other plugin components for powerful workflows.\n\n### Agent Integration\n\nLaunch plugin agents for complex tasks:\n\n```markdown\n---\ndescription: Deep code review\nargument-hint: [file-path]\n---\n\nInitiate comprehensive review of @$1 using the code-reviewer agent.\n\nThe agent will analyze:\n- Code structure\n- Security issues\n- Performance\n- Best practices\n\nAgent uses plugin resources:\n- ${CLAUDE_PLUGIN_ROOT}/config/rules.json\n- ${CLAUDE_PLUGIN_ROOT}/checklists/review.md\n```\n\n**Key points:**\n- Agent must exist in `plugin/agents/` directory\n- Claude uses Task tool to launch agent\n- Document agent capabilities\n- Reference plugin resources agent uses\n\n### Skill Integration\n\nLeverage plugin skills for specialized knowledge:\n\n```markdown\n---\ndescription: Document API with standards\nargument-hint: [api-file]\n---\n\nDocument API in @$1 following plugin standards.\n\nUse the api-docs-standards skill to ensure:\n- Complete endpoint documentation\n- Consistent formatting\n- Example quality\n- Error documentation\n\nGenerate production-ready API docs.\n```\n\n**Key points:**\n- Skill must exist in `plugin/skills/` directory\n- Mention skill name to trigger invocation\n- Document skill purpose\n- Explain what skill provides\n\n### Hook Coordination\n\nDesign commands that work with plugin hooks:\n- Commands can prepare state for hooks to process\n- Hooks execute automatically on tool events\n- Commands should document expected hook behavior\n- Guide Claude on interpreting hook output\n\nSee `references/plugin-features-reference.md` for examples of commands that coordinate with hooks\n\n### Multi-Component Workflows\n\nCombine agents, skills, and scripts:\n\n```markdown\n---\ndescription: Comprehensive review workflow\nargument-hint: [file]\nallowed-tools: Bash(node:*), Read\n---\n\nTarget: @$1\n\nPhase 1 - Static Analysis:\n!`node ${CLAUDE_PLUGIN_ROOT}/scripts/lint.js $1`\n\nPhase 2 - Deep Review:\nLaunch code-reviewer agent for detailed analysis.\n\nPhase 3 - Standards Check:\nUse coding-standards skill for validation.\n\nPhase 4 - Report:\nTemplate: @${CLAUDE_PLUGIN_ROOT}/templates/review.md\n\nCompile findings into report following template.\n```\n\n**When to use:**\n- Complex multi-step workflows\n- Leverage multiple plugin capabilities\n- Require specialized analysis\n- Need structured outputs\n\n## Validation Patterns\n\nCommands should validate inputs and resources before processing.\n\n### Argument Validation\n\n```markdown\n---\ndescription: Deploy with validation\nargument-hint: [environment]\n---\n\nValidate environment: !`echo \"$1\" | grep -E \"^(dev|staging|prod)$\" || echo \"INVALID\"`\n\nIf $1 is valid environment:\n  Deploy to $1\nOtherwise:\n  Explain valid environments: dev, staging, prod\n  Show usage: /deploy [environment]\n```\n\n### File Existence Checks\n\n```markdown\n---\ndescription: Process configuration\nargument-hint: [config-file]\n---\n\nCheck file exists: !`test -f $1 && echo \"EXISTS\" || echo \"MISSING\"`\n\nIf file exists:\n  Process configuration: @$1\nOtherwise:\n  Explain where to place config file\n  Show expected format\n  Provide example configuration\n```\n\n### Plugin Resource Validation\n\n```markdown\n---\ndescription: Run plugin analyzer\nallowed-tools: Bash(test:*)\n---\n\nValidate plugin setup:\n- Script: !`test -x ${CLAUDE_PLUGIN_ROOT}/bin/analyze && echo \"✓\" || echo \"✗\"`\n- Config: !`test -f ${CLAUDE_PLUGIN_ROOT}/config.json && echo \"✓\" || echo \"✗\"`\n\nIf all checks pass, run analysis.\nOtherwise, report missing components.\n```\n\n### Error Handling\n\n```markdown\n---\ndescription: Build with error handling\nallowed-tools: Bash(*)\n---\n\nExecute build: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh 2>&1 || echo \"BUILD_FAILED\"`\n\nIf build succeeded:\n  Report success and output location\nIf build failed:\n  Analyze error output\n  Suggest likely causes\n  Provide troubleshooting steps\n```\n\n**Best practices:**\n- Validate early in command\n- Provide helpful error messages\n- Suggest corrective actions\n- Handle edge cases gracefully\n\n---\n\nFor detailed frontmatter field specifications, see `references/frontmatter-reference.md`.\nFor plugin-specific features and patterns, see `references/plugin-features-reference.md`.\nFor command pattern examples, see `examples/` directory.\n",
        "plugins/plugin-dev/skills/command-development/examples/plugin-commands.md": "# Plugin Command Examples\n\nPractical examples of commands designed for Claude Code plugins, demonstrating plugin-specific patterns and features.\n\n## Table of Contents\n\n1. [Simple Plugin Command](#1-simple-plugin-command)\n2. [Script-Based Analysis](#2-script-based-analysis)\n3. [Template-Based Generation](#3-template-based-generation)\n4. [Multi-Script Workflow](#4-multi-script-workflow)\n5. [Configuration-Driven Deployment](#5-configuration-driven-deployment)\n6. [Agent Integration](#6-agent-integration)\n7. [Skill Integration](#7-skill-integration)\n8. [Multi-Component Workflow](#8-multi-component-workflow)\n9. [Validated Input Command](#9-validated-input-command)\n10. [Environment-Aware Command](#10-environment-aware-command)\n\n---\n\n## 1. Simple Plugin Command\n\n**Use case:** Basic command that uses plugin script\n\n**File:** `commands/analyze.md`\n\n```markdown\n---\ndescription: Analyze code quality using plugin tools\nargument-hint: [file-path]\nallowed-tools: Bash(node:*), Read\n---\n\nAnalyze @$1 using plugin's quality checker:\n\n!`node ${CLAUDE_PLUGIN_ROOT}/scripts/quality-check.js $1`\n\nReview the analysis output and provide:\n1. Summary of findings\n2. Priority issues to address\n3. Suggested improvements\n4. Code quality score interpretation\n```\n\n**Key features:**\n- Uses `${CLAUDE_PLUGIN_ROOT}` for portable path\n- Combines file reference with script execution\n- Simple single-purpose command\n\n---\n\n## 2. Script-Based Analysis\n\n**Use case:** Run comprehensive analysis using multiple plugin scripts\n\n**File:** `commands/full-audit.md`\n\n```markdown\n---\ndescription: Complete code audit using plugin suite\nargument-hint: [directory]\nallowed-tools: Bash(*)\nmodel: sonnet\n---\n\nRunning complete audit on $1:\n\n**Security scan:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/security-scan.sh $1`\n\n**Performance analysis:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/perf-analyze.sh $1`\n\n**Best practices check:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/best-practices.sh $1`\n\nAnalyze all results and create comprehensive report including:\n- Critical issues requiring immediate attention\n- Performance optimization opportunities\n- Security vulnerabilities and fixes\n- Overall health score and recommendations\n```\n\n**Key features:**\n- Multiple script executions\n- Organized output sections\n- Comprehensive workflow\n- Clear reporting structure\n\n---\n\n## 3. Template-Based Generation\n\n**Use case:** Generate documentation following plugin template\n\n**File:** `commands/gen-api-docs.md`\n\n```markdown\n---\ndescription: Generate API documentation from template\nargument-hint: [api-file]\n---\n\nTemplate structure: @${CLAUDE_PLUGIN_ROOT}/templates/api-documentation.md\n\nAPI implementation: @$1\n\nGenerate complete API documentation following the template format above.\n\nEnsure documentation includes:\n- Endpoint descriptions with HTTP methods\n- Request/response schemas\n- Authentication requirements\n- Error codes and handling\n- Usage examples with curl commands\n- Rate limiting information\n\nFormat output as markdown suitable for README or docs site.\n```\n\n**Key features:**\n- Uses plugin template\n- Combines template with source file\n- Standardized output format\n- Clear documentation structure\n\n---\n\n## 4. Multi-Script Workflow\n\n**Use case:** Orchestrate build, test, and deploy workflow\n\n**File:** `commands/release.md`\n\n```markdown\n---\ndescription: Execute complete release workflow\nargument-hint: [version]\nallowed-tools: Bash(*), Read\n---\n\nExecuting release workflow for version $1:\n\n**Step 1 - Pre-release validation:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/pre-release-check.sh $1`\n\n**Step 2 - Build artifacts:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build-release.sh $1`\n\n**Step 3 - Run test suite:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/run-tests.sh`\n\n**Step 4 - Package release:**\n!`bash ${CLAUDE_PLUGIN_ROOT}/scripts/package.sh $1`\n\nReview all step outputs and report:\n1. Any failures or warnings\n2. Build artifacts location\n3. Test results summary\n4. Next steps for deployment\n5. Rollback plan if needed\n```\n\n**Key features:**\n- Multi-step workflow\n- Sequential script execution\n- Clear step numbering\n- Comprehensive reporting\n\n---\n\n## 5. Configuration-Driven Deployment\n\n**Use case:** Deploy using environment-specific plugin configuration\n\n**File:** `commands/deploy.md`\n\n```markdown\n---\ndescription: Deploy application to environment\nargument-hint: [environment]\nallowed-tools: Read, Bash(*)\n---\n\nDeployment configuration for $1: @${CLAUDE_PLUGIN_ROOT}/config/$1-deploy.json\n\nCurrent git state: !`git rev-parse --short HEAD`\n\nBuild info: !`cat package.json | grep -E '(name|version)'`\n\nExecute deployment to $1 environment using configuration above.\n\nDeployment checklist:\n1. Validate configuration settings\n2. Build application for $1\n3. Run pre-deployment tests\n4. Deploy to target environment\n5. Run smoke tests\n6. Verify deployment success\n7. Update deployment log\n\nReport deployment status and any issues encountered.\n```\n\n**Key features:**\n- Environment-specific configuration\n- Dynamic config file loading\n- Pre-deployment validation\n- Structured checklist\n\n---\n\n## 6. Agent Integration\n\n**Use case:** Command that launches plugin agent for complex task\n\n**File:** `commands/deep-review.md`\n\n```markdown\n---\ndescription: Deep code review using plugin agent\nargument-hint: [file-or-directory]\n---\n\nInitiate comprehensive code review of @$1 using the code-reviewer agent.\n\nThe agent will perform:\n1. **Static analysis** - Check for code smells and anti-patterns\n2. **Security audit** - Identify potential vulnerabilities\n3. **Performance review** - Find optimization opportunities\n4. **Best practices** - Ensure code follows standards\n5. **Documentation check** - Verify adequate documentation\n\nThe agent has access to:\n- Plugin's linting rules: ${CLAUDE_PLUGIN_ROOT}/config/lint-rules.json\n- Security checklist: ${CLAUDE_PLUGIN_ROOT}/checklists/security.md\n- Performance guidelines: ${CLAUDE_PLUGIN_ROOT}/docs/performance.md\n\nNote: This uses the Task tool to launch the plugin's code-reviewer agent for thorough analysis.\n```\n\n**Key features:**\n- Delegates to plugin agent\n- Documents agent capabilities\n- References plugin resources\n- Clear scope definition\n\n---\n\n## 7. Skill Integration\n\n**Use case:** Command that leverages plugin skill for specialized knowledge\n\n**File:** `commands/document-api.md`\n\n```markdown\n---\ndescription: Document API following plugin standards\nargument-hint: [api-file]\n---\n\nAPI source code: @$1\n\nGenerate API documentation following the plugin's API documentation standards.\n\nUse the api-documentation-standards skill to ensure:\n- **OpenAPI compliance** - Follow OpenAPI 3.0 specification\n- **Consistent formatting** - Use plugin's documentation style\n- **Complete coverage** - Document all endpoints and schemas\n- **Example quality** - Provide realistic usage examples\n- **Error documentation** - Cover all error scenarios\n\nThe skill provides:\n- Standard documentation templates\n- API documentation best practices\n- Common patterns for this codebase\n- Quality validation criteria\n\nGenerate production-ready API documentation.\n```\n\n**Key features:**\n- Invokes plugin skill by name\n- Documents skill purpose\n- Clear expectations\n- Leverages skill knowledge\n\n---\n\n## 8. Multi-Component Workflow\n\n**Use case:** Complex workflow using agents, skills, and scripts\n\n**File:** `commands/complete-review.md`\n\n```markdown\n---\ndescription: Comprehensive review using all plugin components\nargument-hint: [file-path]\nallowed-tools: Bash(node:*), Read\n---\n\nTarget file: @$1\n\nExecute comprehensive review workflow:\n\n**Phase 1: Automated Analysis**\nRun plugin analyzer: !`node ${CLAUDE_PLUGIN_ROOT}/scripts/analyze.js $1`\n\n**Phase 2: Deep Review (Agent)**\nLaunch the code-quality-reviewer agent for detailed analysis.\nAgent will examine:\n- Code structure and organization\n- Error handling patterns\n- Testing coverage\n- Documentation quality\n\n**Phase 3: Standards Check (Skill)**\nUse the coding-standards skill to validate:\n- Naming conventions\n- Code formatting\n- Best practices adherence\n- Framework-specific patterns\n\n**Phase 4: Report Generation**\nTemplate: @${CLAUDE_PLUGIN_ROOT}/templates/review-report.md\n\nCompile all findings into comprehensive report following template.\n\n**Phase 5: Recommendations**\nGenerate prioritized action items:\n1. Critical issues (must fix)\n2. Important improvements (should fix)\n3. Nice-to-have enhancements (could fix)\n\nInclude specific file locations and suggested changes for each item.\n```\n\n**Key features:**\n- Multi-phase workflow\n- Combines scripts, agents, skills\n- Template-based reporting\n- Prioritized outputs\n\n---\n\n## 9. Validated Input Command\n\n**Use case:** Command with input validation and error handling\n\n**File:** `commands/build-env.md`\n\n```markdown\n---\ndescription: Build for specific environment with validation\nargument-hint: [environment]\nallowed-tools: Bash(*)\n---\n\nValidate environment argument: !`echo \"$1\" | grep -E \"^(dev|staging|prod)$\" && echo \"VALID\" || echo \"INVALID\"`\n\nCheck build script exists: !`test -x ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh && echo \"EXISTS\" || echo \"MISSING\"`\n\nVerify configuration available: !`test -f ${CLAUDE_PLUGIN_ROOT}/config/$1.json && echo \"FOUND\" || echo \"NOT_FOUND\"`\n\nIf all validations pass:\n\n**Configuration:** @${CLAUDE_PLUGIN_ROOT}/config/$1.json\n\n**Execute build:** !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh $1 2>&1`\n\n**Validation results:** !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate-build.sh $1 2>&1`\n\nReport build status and any issues.\n\nIf validations fail:\n- Explain which validation failed\n- Provide expected values/locations\n- Suggest corrective actions\n- Document troubleshooting steps\n```\n\n**Key features:**\n- Input validation\n- Resource existence checks\n- Error handling\n- Helpful error messages\n- Graceful failure handling\n\n---\n\n## 10. Environment-Aware Command\n\n**Use case:** Command that adapts behavior based on environment\n\n**File:** `commands/run-checks.md`\n\n```markdown\n---\ndescription: Run environment-appropriate checks\nargument-hint: [environment]\nallowed-tools: Bash(*), Read\n---\n\nEnvironment: $1\n\nLoad environment configuration: @${CLAUDE_PLUGIN_ROOT}/config/$1-checks.json\n\nDetermine check level: !`echo \"$1\" | grep -E \"^prod$\" && echo \"FULL\" || echo \"BASIC\"`\n\n**For production environment:**\n- Full test suite: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/test-full.sh`\n- Security scan: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/security-scan.sh`\n- Performance audit: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/perf-check.sh`\n- Compliance check: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/compliance.sh`\n\n**For non-production environments:**\n- Basic tests: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/test-basic.sh`\n- Quick lint: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/lint.sh`\n\nAnalyze results based on environment requirements:\n\n**Production:** All checks must pass with zero critical issues\n**Staging:** No critical issues, warnings acceptable\n**Development:** Focus on blocking issues only\n\nReport status and recommend proceed/block decision.\n```\n\n**Key features:**\n- Environment-aware logic\n- Conditional execution\n- Different validation levels\n- Appropriate reporting per environment\n\n---\n\n## Common Patterns Summary\n\n### Pattern: Plugin Script Execution\n```markdown\n!`node ${CLAUDE_PLUGIN_ROOT}/scripts/script-name.js $1`\n```\nUse for: Running plugin-provided Node.js scripts\n\n### Pattern: Plugin Configuration Loading\n```markdown\n@${CLAUDE_PLUGIN_ROOT}/config/config-name.json\n```\nUse for: Loading plugin configuration files\n\n### Pattern: Plugin Template Usage\n```markdown\n@${CLAUDE_PLUGIN_ROOT}/templates/template-name.md\n```\nUse for: Using plugin templates for generation\n\n### Pattern: Agent Invocation\n```markdown\nLaunch the [agent-name] agent for [task description].\n```\nUse for: Delegating complex tasks to plugin agents\n\n### Pattern: Skill Reference\n```markdown\nUse the [skill-name] skill to ensure [requirements].\n```\nUse for: Leveraging plugin skills for specialized knowledge\n\n### Pattern: Input Validation\n```markdown\nValidate input: !`echo \"$1\" | grep -E \"^pattern$\" && echo \"OK\" || echo \"ERROR\"`\n```\nUse for: Validating command arguments\n\n### Pattern: Resource Validation\n```markdown\nCheck exists: !`test -f ${CLAUDE_PLUGIN_ROOT}/path/file && echo \"YES\" || echo \"NO\"`\n```\nUse for: Verifying required plugin files exist\n\n---\n\n## Development Tips\n\n### Testing Plugin Commands\n\n1. **Test with plugin installed:**\n   ```bash\n   cd /path/to/plugin\n   claude /command-name args\n   ```\n\n2. **Verify ${CLAUDE_PLUGIN_ROOT} expansion:**\n   ```bash\n   # Add debug output to command\n   !`echo \"Plugin root: ${CLAUDE_PLUGIN_ROOT}\"`\n   ```\n\n3. **Test across different working directories:**\n   ```bash\n   cd /tmp && claude /command-name\n   cd /other/project && claude /command-name\n   ```\n\n4. **Validate resource availability:**\n   ```bash\n   # Check all plugin resources exist\n   !`ls -la ${CLAUDE_PLUGIN_ROOT}/scripts/`\n   !`ls -la ${CLAUDE_PLUGIN_ROOT}/config/`\n   ```\n\n### Common Mistakes to Avoid\n\n1. **Using relative paths instead of ${CLAUDE_PLUGIN_ROOT}:**\n   ```markdown\n   # Wrong\n   !`node ./scripts/analyze.js`\n\n   # Correct\n   !`node ${CLAUDE_PLUGIN_ROOT}/scripts/analyze.js`\n   ```\n\n2. **Forgetting to allow required tools:**\n   ```markdown\n   # Missing allowed-tools\n   !`bash script.sh`  # Will fail without Bash permission\n\n   # Correct\n   ---\n   allowed-tools: Bash(*)\n   ---\n   !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/script.sh`\n   ```\n\n3. **Not validating inputs:**\n   ```markdown\n   # Risky - no validation\n   Deploy to $1 environment\n\n   # Better - with validation\n   Validate: !`echo \"$1\" | grep -E \"^(dev|staging|prod)$\" || echo \"INVALID\"`\n   Deploy to $1 environment (if valid)\n   ```\n\n4. **Hardcoding plugin paths:**\n   ```markdown\n   # Wrong - breaks on different installations\n   @/home/user/.claude/plugins/my-plugin/config.json\n\n   # Correct - works everywhere\n   @${CLAUDE_PLUGIN_ROOT}/config.json\n   ```\n\n---\n\nFor detailed plugin-specific features, see `references/plugin-features-reference.md`.\nFor general command development, see main `SKILL.md`.\n",
        "plugins/plugin-dev/skills/command-development/examples/simple-commands.md": "# Simple Command Examples\n\nBasic slash command patterns for common use cases.\n\n**Important:** All examples below are written as instructions FOR Claude (agent consumption), not messages TO users. Commands tell Claude what to do, not tell users what will happen.\n\n## Example 1: Code Review Command\n\n**File:** `.claude/commands/review.md`\n\n```markdown\n---\ndescription: Review code for quality and issues\nallowed-tools: Read, Bash(git:*)\n---\n\nReview the code in this repository for:\n\n1. **Code Quality:**\n   - Readability and maintainability\n   - Consistent style and formatting\n   - Appropriate abstraction levels\n\n2. **Potential Issues:**\n   - Logic errors or bugs\n   - Edge cases not handled\n   - Performance concerns\n\n3. **Best Practices:**\n   - Design patterns used correctly\n   - Error handling present\n   - Documentation adequate\n\nProvide specific feedback with file and line references.\n```\n\n**Usage:**\n```\n> /review\n```\n\n---\n\n## Example 2: Security Review Command\n\n**File:** `.claude/commands/security-review.md`\n\n```markdown\n---\ndescription: Review code for security vulnerabilities\nallowed-tools: Read, Grep\nmodel: sonnet\n---\n\nPerform comprehensive security review checking for:\n\n**Common Vulnerabilities:**\n- SQL injection risks\n- Cross-site scripting (XSS)\n- Authentication/authorization issues\n- Insecure data handling\n- Hardcoded secrets or credentials\n\n**Security Best Practices:**\n- Input validation present\n- Output encoding correct\n- Secure defaults used\n- Error messages safe\n- Logging appropriate (no sensitive data)\n\nFor each issue found:\n- File and line number\n- Severity (Critical/High/Medium/Low)\n- Description of vulnerability\n- Recommended fix\n\nPrioritize issues by severity.\n```\n\n**Usage:**\n```\n> /security-review\n```\n\n---\n\n## Example 3: Test Command with File Argument\n\n**File:** `.claude/commands/test-file.md`\n\n```markdown\n---\ndescription: Run tests for specific file\nargument-hint: [test-file]\nallowed-tools: Bash(npm:*), Bash(jest:*)\n---\n\nRun tests for $1:\n\nTest execution: !`npm test $1`\n\nAnalyze results:\n- Tests passed/failed\n- Code coverage\n- Performance issues\n- Flaky tests\n\nIf failures found, suggest fixes based on error messages.\n```\n\n**Usage:**\n```\n> /test-file src/utils/helpers.test.ts\n```\n\n---\n\n## Example 4: Documentation Generator\n\n**File:** `.claude/commands/document.md`\n\n```markdown\n---\ndescription: Generate documentation for file\nargument-hint: [source-file]\n---\n\nGenerate comprehensive documentation for @$1\n\nInclude:\n\n**Overview:**\n- Purpose and responsibility\n- Main functionality\n- Dependencies\n\n**API Documentation:**\n- Function/method signatures\n- Parameter descriptions with types\n- Return values with types\n- Exceptions/errors thrown\n\n**Usage Examples:**\n- Basic usage\n- Common patterns\n- Edge cases\n\n**Implementation Notes:**\n- Algorithm complexity\n- Performance considerations\n- Known limitations\n\nFormat as Markdown suitable for project documentation.\n```\n\n**Usage:**\n```\n> /document src/api/users.ts\n```\n\n---\n\n## Example 5: Git Status Summary\n\n**File:** `.claude/commands/git-status.md`\n\n```markdown\n---\ndescription: Summarize Git repository status\nallowed-tools: Bash(git:*)\n---\n\nRepository Status Summary:\n\n**Current Branch:** !`git branch --show-current`\n\n**Status:** !`git status --short`\n\n**Recent Commits:** !`git log --oneline -5`\n\n**Remote Status:** !`git fetch && git status -sb`\n\nProvide:\n- Summary of changes\n- Suggested next actions\n- Any warnings or issues\n```\n\n**Usage:**\n```\n> /git-status\n```\n\n---\n\n## Example 6: Deployment Command\n\n**File:** `.claude/commands/deploy.md`\n\n```markdown\n---\ndescription: Deploy to specified environment\nargument-hint: [environment] [version]\nallowed-tools: Bash(kubectl:*), Read\n---\n\nDeploy to $1 environment using version $2\n\n**Pre-deployment Checks:**\n1. Verify $1 configuration exists\n2. Check version $2 is valid\n3. Verify cluster accessibility: !`kubectl cluster-info`\n\n**Deployment Steps:**\n1. Update deployment manifest with version $2\n2. Apply configuration to $1\n3. Monitor rollout status\n4. Verify pod health\n5. Run smoke tests\n\n**Rollback Plan:**\nDocument current version for rollback if issues occur.\n\nProceed with deployment? (yes/no)\n```\n\n**Usage:**\n```\n> /deploy staging v1.2.3\n```\n\n---\n\n## Example 7: Comparison Command\n\n**File:** `.claude/commands/compare-files.md`\n\n```markdown\n---\ndescription: Compare two files\nargument-hint: [file1] [file2]\n---\n\nCompare @$1 with @$2\n\n**Analysis:**\n\n1. **Differences:**\n   - Lines added\n   - Lines removed\n   - Lines modified\n\n2. **Functional Changes:**\n   - Breaking changes\n   - New features\n   - Bug fixes\n   - Refactoring\n\n3. **Impact:**\n   - Affected components\n   - Required updates elsewhere\n   - Migration requirements\n\n4. **Recommendations:**\n   - Code review focus areas\n   - Testing requirements\n   - Documentation updates needed\n\nPresent as structured comparison report.\n```\n\n**Usage:**\n```\n> /compare-files src/old-api.ts src/new-api.ts\n```\n\n---\n\n## Example 8: Quick Fix Command\n\n**File:** `.claude/commands/quick-fix.md`\n\n```markdown\n---\ndescription: Quick fix for common issues\nargument-hint: [issue-description]\nmodel: haiku\n---\n\nQuickly fix: $ARGUMENTS\n\n**Approach:**\n1. Identify the issue\n2. Find relevant code\n3. Propose fix\n4. Explain solution\n\nFocus on:\n- Simple, direct solution\n- Minimal changes\n- Following existing patterns\n- No breaking changes\n\nProvide code changes with file paths and line numbers.\n```\n\n**Usage:**\n```\n> /quick-fix button not responding to clicks\n> /quick-fix typo in error message\n```\n\n---\n\n## Example 9: Research Command\n\n**File:** `.claude/commands/research.md`\n\n```markdown\n---\ndescription: Research best practices for topic\nargument-hint: [topic]\nmodel: sonnet\n---\n\nResearch best practices for: $ARGUMENTS\n\n**Coverage:**\n\n1. **Current State:**\n   - How we currently handle this\n   - Existing implementations\n\n2. **Industry Standards:**\n   - Common patterns\n   - Recommended approaches\n   - Tools and libraries\n\n3. **Comparison:**\n   - Our approach vs standards\n   - Gaps or improvements needed\n   - Migration considerations\n\n4. **Recommendations:**\n   - Concrete action items\n   - Priority and effort estimates\n   - Resources for implementation\n\nProvide actionable guidance based on research.\n```\n\n**Usage:**\n```\n> /research error handling in async operations\n> /research API authentication patterns\n```\n\n---\n\n## Example 10: Explain Code Command\n\n**File:** `.claude/commands/explain.md`\n\n```markdown\n---\ndescription: Explain how code works\nargument-hint: [file-or-function]\n---\n\nExplain @$1 in detail\n\n**Explanation Structure:**\n\n1. **Overview:**\n   - What it does\n   - Why it exists\n   - How it fits in system\n\n2. **Step-by-Step:**\n   - Line-by-line walkthrough\n   - Key algorithms or logic\n   - Important details\n\n3. **Inputs and Outputs:**\n   - Parameters and types\n   - Return values\n   - Side effects\n\n4. **Edge Cases:**\n   - Error handling\n   - Special cases\n   - Limitations\n\n5. **Usage Examples:**\n   - How to call it\n   - Common patterns\n   - Integration points\n\nExplain at level appropriate for junior engineer.\n```\n\n**Usage:**\n```\n> /explain src/utils/cache.ts\n> /explain AuthService.login\n```\n\n---\n\n## Key Patterns\n\n### Pattern 1: Read-Only Analysis\n\n```markdown\n---\nallowed-tools: Read, Grep\n---\n\nAnalyze but don't modify...\n```\n\n**Use for:** Code review, documentation, analysis\n\n### Pattern 2: Git Operations\n\n```markdown\n---\nallowed-tools: Bash(git:*)\n---\n\n!`git status`\nAnalyze and suggest...\n```\n\n**Use for:** Repository status, commit analysis\n\n### Pattern 3: Single Argument\n\n```markdown\n---\nargument-hint: [target]\n---\n\nProcess $1...\n```\n\n**Use for:** File operations, targeted actions\n\n### Pattern 4: Multiple Arguments\n\n```markdown\n---\nargument-hint: [source] [target] [options]\n---\n\nProcess $1 to $2 with $3...\n```\n\n**Use for:** Workflows, deployments, comparisons\n\n### Pattern 5: Fast Execution\n\n```markdown\n---\nmodel: haiku\n---\n\nQuick simple task...\n```\n\n**Use for:** Simple, repetitive commands\n\n### Pattern 6: File Comparison\n\n```markdown\nCompare @$1 with @$2...\n```\n\n**Use for:** Diff analysis, migration planning\n\n### Pattern 7: Context Gathering\n\n```markdown\n---\nallowed-tools: Bash(git:*), Read\n---\n\nContext: !`git status`\nFiles: @file1 @file2\n\nAnalyze...\n```\n\n**Use for:** Informed decision making\n\n## Tips for Writing Simple Commands\n\n1. **Start basic:** Single responsibility, clear purpose\n2. **Add complexity gradually:** Start without frontmatter\n3. **Test incrementally:** Verify each feature works\n4. **Use descriptive names:** Command name should indicate purpose\n5. **Document arguments:** Always use argument-hint\n6. **Provide examples:** Show usage in comments\n7. **Handle errors:** Consider missing arguments or files\n",
        "plugins/plugin-dev/skills/command-development/references/advanced-workflows.md": "# Advanced Workflow Patterns\n\nMulti-step command sequences and composition patterns for complex workflows.\n\n## Overview\n\nAdvanced workflows combine multiple commands, coordinate state across invocations, and create sophisticated automation sequences. These patterns enable building complex functionality from simple command building blocks.\n\n## Multi-Step Command Patterns\n\n### Sequential Workflow Command\n\nCommands that guide users through multi-step processes:\n\n```markdown\n---\ndescription: Complete PR review workflow\nargument-hint: [pr-number]\nallowed-tools: Bash(gh:*), Read, Grep\n---\n\n# PR Review Workflow for #$1\n\n## Step 1: Fetch PR Details\n!`gh pr view $1 --json title,body,author,files`\n\n## Step 2: Review Files\nFiles changed: !`gh pr diff $1 --name-only`\n\nFor each file:\n- Check code quality\n- Verify tests exist\n- Review documentation\n\n## Step 3: Run Checks\nTest status: !`gh pr checks $1`\n\nVerify:\n- All tests passing\n- No merge conflicts\n- CI/CD successful\n\n## Step 4: Provide Feedback\n\nSummarize:\n- Issues found (critical/minor)\n- Suggestions for improvement\n- Approval recommendation\n\nWould you like to:\n1. Approve PR\n2. Request changes\n3. Leave comments only\n\nReply with your choice and I'll help complete the action.\n```\n\n**Key features:**\n- Numbered steps for clarity\n- Bash execution for context\n- Decision points for user input\n- Next action suggestions\n\n### State-Carrying Workflow\n\nCommands that maintain state between invocations:\n\n```markdown\n---\ndescription: Initialize deployment workflow\nallowed-tools: Write, Bash(git:*)\n---\n\n# Initialize Deployment\n\nCreating deployment tracking file...\n\nCurrent branch: !`git branch --show-current`\nLatest commit: !`git log -1 --format=%H`\n\nDeployment state saved to `.claude/deployment-state.local.md`:\n\n\\`\\`\\`markdown\n---\ninitialized: true\nbranch: $(git branch --show-current)\ncommit: $(git log -1 --format=%H)\ntimestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\nstatus: initialized\n---\n\n# Deployment Tracking\n\nBranch: $(git branch --show-current)\nStarted: $(date)\n\nNext steps:\n1. Run tests: /deploy-test\n2. Build: /deploy-build\n3. Deploy: /deploy-execute\n\\`\\`\\`\n\nState saved. Run `/deploy-test` to continue.\n```\n\n**Next command** (`/deploy-test`):\n```markdown\n---\ndescription: Run deployment tests\nallowed-tools: Read, Bash(npm:*)\n---\n\nReading deployment state from `.claude/deployment-state.local.md`...\n\nRunning tests: !`npm test`\n\nUpdating state to 'tested'...\n\nTests complete. Run `/deploy-build` to continue.\n```\n\n**Pattern benefits:**\n- Persistent state across commands\n- Clear workflow progression\n- Safety checkpoints\n- Resume capability\n\n### Conditional Workflow Branching\n\nCommands that adapt based on conditions:\n\n```markdown\n---\ndescription: Smart deployment workflow\nargument-hint: [environment]\nallowed-tools: Bash(git:*), Bash(npm:*), Read\n---\n\n# Deploy to $1\n\n## Pre-flight Checks\n\nBranch: !`git branch --show-current`\nStatus: !`git status --short`\n\n**Checking conditions:**\n\n1. Branch status:\n   - If main/master: Require approval\n   - If feature branch: Warning about target\n   - If hotfix: Fast-track process\n\n2. Tests:\n   !`npm test`\n   - If tests fail: STOP - fix tests first\n   - If tests pass: Continue\n\n3. Environment:\n   - If $1 = 'production': Extra validation\n   - If $1 = 'staging': Standard process\n   - If $1 = 'dev': Minimal checks\n\n**Workflow decision:**\nBased on above, proceeding with: [determined workflow]\n\n[Conditional steps based on environment and status]\n\nReady to deploy? (yes/no)\n```\n\n## Command Composition Patterns\n\n### Command Chaining\n\nCommands designed to work together:\n\n```markdown\n---\ndescription: Prepare for code review\n---\n\n# Prepare Code Review\n\nRunning preparation sequence:\n\n1. Format code: /format-code\n2. Run linter: /lint-code\n3. Run tests: /test-all\n4. Generate coverage: /coverage-report\n5. Create review summary: /review-summary\n\nThis is a meta-command. After completing each step above,\nI'll compile results and prepare comprehensive review materials.\n\nStarting sequence...\n```\n\n**Individual commands** are simple:\n- `/format-code` - Just formats\n- `/lint-code` - Just lints\n- `/test-all` - Just tests\n\n**Composition command** orchestrates them.\n\n### Pipeline Pattern\n\nCommands that process output from previous commands:\n\n```markdown\n---\ndescription: Analyze test failures\n---\n\n# Analyze Test Failures\n\n## Step 1: Get test results\n(Run /test-all first if not done)\n\nReading test output...\n\n## Step 2: Categorize failures\n- Flaky tests (random failures)\n- Consistent failures\n- New failures vs existing\n\n## Step 3: Prioritize\nRank by:\n- Impact (critical path vs edge case)\n- Frequency (always fails vs sometimes)\n- Effort (quick fix vs major work)\n\n## Step 4: Generate fix plan\nFor each failure:\n- Root cause hypothesis\n- Suggested fix approach\n- Estimated effort\n\nWould you like me to:\n1. Fix highest priority failure\n2. Generate detailed fix plans for all\n3. Create GitHub issues for each\n```\n\n### Parallel Execution Pattern\n\nCommands that coordinate multiple simultaneous operations:\n\n```markdown\n---\ndescription: Run comprehensive validation\nallowed-tools: Bash(*), Read\n---\n\n# Comprehensive Validation\n\nRunning validations in parallel...\n\nStarting:\n- Code quality checks\n- Security scanning\n- Dependency audit\n- Performance profiling\n\nThis will take 2-3 minutes. I'll monitor all processes\nand report when complete.\n\n[Poll each process and report progress]\n\nAll validations complete. Summary:\n- Quality: PASS (0 issues)\n- Security: WARN (2 minor issues)\n- Dependencies: PASS\n- Performance: PASS (baseline met)\n\nDetails:\n[Collated results from all checks]\n```\n\n## Workflow State Management\n\n### Using .local.md Files\n\nStore workflow state in plugin-specific files:\n\n```markdown\n.claude/plugin-name-workflow.local.md:\n\n---\nworkflow: deployment\nstage: testing\nstarted: 2025-01-15T10:30:00Z\nenvironment: staging\nbranch: feature/new-api\ncommit: abc123def\ntests_passed: false\nbuild_complete: false\n---\n\n# Deployment Workflow State\n\nCurrent stage: Testing\nStarted: 2025-01-15 10:30 UTC\n\nCompleted steps:\n- ✅ Validation\n- ✅ Branch check\n- ⏳ Testing (in progress)\n\nPending steps:\n- Build\n- Deploy\n- Smoke tests\n```\n\n**Reading state in commands:**\n\n```markdown\n---\ndescription: Continue deployment workflow\nallowed-tools: Read, Write\n---\n\nReading workflow state from .claude/plugin-name-workflow.local.md...\n\nCurrent stage: @.claude/plugin-name-workflow.local.md\n\n[Parse YAML frontmatter to determine next step]\n\nNext action based on state: [determined action]\n```\n\n### Workflow Recovery\n\nHandle interrupted workflows:\n\n```markdown\n---\ndescription: Resume deployment workflow\nallowed-tools: Read\n---\n\n# Resume Deployment\n\nChecking for interrupted workflow...\n\nState file: @.claude/plugin-name-workflow.local.md\n\n**Workflow found:**\n- Started: [timestamp]\n- Environment: [env]\n- Last completed: [step]\n\n**Recovery options:**\n1. Resume from last step\n2. Restart from beginning\n3. Abort and clean up\n\nWhich would you like? (1/2/3)\n```\n\n## Workflow Coordination Patterns\n\n### Cross-Command Communication\n\nCommands that signal each other:\n\n```markdown\n---\ndescription: Mark feature complete\nallowed-tools: Write\n---\n\n# Mark Feature Complete\n\nWriting completion marker...\n\nCreating: .claude/feature-complete.flag\n\nThis signals other commands that feature is ready for:\n- Integration testing (/integration-test will auto-detect)\n- Documentation generation (/docs-generate will include)\n- Release notes (/release-notes will add)\n\nFeature marked complete.\n```\n\n**Other commands check for flag:**\n\n```markdown\n---\ndescription: Generate release notes\nallowed-tools: Read, Bash(git:*)\n---\n\nChecking for completed features...\n\nif [ -f .claude/feature-complete.flag ]; then\n  Feature ready for release notes\nfi\n\n[Include in release notes]\n```\n\n### Workflow Locking\n\nPrevent concurrent workflow execution:\n\n```markdown\n---\ndescription: Start deployment\nallowed-tools: Read, Write, Bash\n---\n\n# Start Deployment\n\nChecking for active deployments...\n\nif [ -f .claude/deployment.lock ]; then\n  ERROR: Deployment already in progress\n  Started: [timestamp from lock file]\n\n  Cannot start concurrent deployment.\n  Wait for completion or run /deployment-abort\n\n  Exit.\nfi\n\nCreating deployment lock...\n\nDeployment started. Lock created.\n[Proceed with deployment]\n```\n\n**Lock cleanup:**\n\n```markdown\n---\ndescription: Complete deployment\nallowed-tools: Write, Bash\n---\n\nDeployment complete.\n\nRemoving deployment lock...\nrm .claude/deployment.lock\n\nReady for next deployment.\n```\n\n## Advanced Argument Handling\n\n### Optional Arguments with Defaults\n\n```markdown\n---\ndescription: Deploy with optional version\nargument-hint: [environment] [version]\n---\n\nEnvironment: ${1:-staging}\nVersion: ${2:-latest}\n\nDeploying ${2:-latest} to ${1:-staging}...\n\nNote: Using defaults for missing arguments:\n- Environment defaults to 'staging'\n- Version defaults to 'latest'\n```\n\n### Argument Validation\n\n```markdown\n---\ndescription: Deploy to validated environment\nargument-hint: [environment]\n---\n\nEnvironment: $1\n\nValidating environment...\n\nvalid_envs=\"dev staging production\"\nif ! echo \"$valid_envs\" | grep -w \"$1\" > /dev/null; then\n  ERROR: Invalid environment '$1'\n  Valid options: dev, staging, production\n  Exit.\nfi\n\nEnvironment validated. Proceeding...\n```\n\n### Argument Transformation\n\n```markdown\n---\ndescription: Deploy with shorthand\nargument-hint: [env-shorthand]\n---\n\nInput: $1\n\nExpanding shorthand:\n- d/dev → development\n- s/stg → staging\n- p/prod → production\n\ncase \"$1\" in\n  d|dev) ENV=\"development\";;\n  s|stg) ENV=\"staging\";;\n  p|prod) ENV=\"production\";;\n  *) ENV=\"$1\";;\nesac\n\nDeploying to: $ENV\n```\n\n## Error Handling in Workflows\n\n### Graceful Failure\n\n```markdown\n---\ndescription: Resilient deployment workflow\n---\n\n# Deployment Workflow\n\nRunning steps with error handling...\n\n## Step 1: Tests\n!`npm test`\n\nif [ $? -ne 0 ]; then\n  ERROR: Tests failed\n\n  Options:\n  1. Fix tests and retry\n  2. Skip tests (NOT recommended)\n  3. Abort deployment\n\n  What would you like to do?\n\n  [Wait for user input before continuing]\nfi\n\n## Step 2: Build\n[Continue only if Step 1 succeeded]\n```\n\n### Rollback on Failure\n\n```markdown\n---\ndescription: Deployment with rollback\n---\n\n# Deploy with Rollback\n\nSaving current state for rollback...\nPrevious version: !`current-version.sh`\n\nDeploying new version...\n\n!`deploy.sh`\n\nif [ $? -ne 0 ]; then\n  DEPLOYMENT FAILED\n\n  Initiating automatic rollback...\n  !`rollback.sh`\n\n  Rolled back to previous version.\n  Check logs for failure details.\nfi\n\nDeployment complete.\n```\n\n### Checkpoint Recovery\n\n```markdown\n---\ndescription: Workflow with checkpoints\n---\n\n# Multi-Stage Deployment\n\n## Checkpoint 1: Validation\n!`validate.sh`\necho \"checkpoint:validation\" >> .claude/deployment-checkpoints.log\n\n## Checkpoint 2: Build\n!`build.sh`\necho \"checkpoint:build\" >> .claude/deployment-checkpoints.log\n\n## Checkpoint 3: Deploy\n!`deploy.sh`\necho \"checkpoint:deploy\" >> .claude/deployment-checkpoints.log\n\nIf any step fails, resume with:\n/deployment-resume [last-successful-checkpoint]\n```\n\n## Best Practices\n\n### Workflow Design\n\n1. **Clear progression**: Number steps, show current position\n2. **Explicit state**: Don't rely on implicit state\n3. **User control**: Provide decision points\n4. **Error recovery**: Handle failures gracefully\n5. **Progress indication**: Show what's done, what's pending\n\n### Command Composition\n\n1. **Single responsibility**: Each command does one thing well\n2. **Composable design**: Commands work together easily\n3. **Standard interfaces**: Consistent input/output formats\n4. **Loose coupling**: Commands don't depend on each other's internals\n\n### State Management\n\n1. **Persistent state**: Use .local.md files\n2. **Atomic updates**: Write complete state files atomically\n3. **State validation**: Check state file format/completeness\n4. **Cleanup**: Remove stale state files\n5. **Documentation**: Document state file formats\n\n### Error Handling\n\n1. **Fail fast**: Detect errors early\n2. **Clear messages**: Explain what went wrong\n3. **Recovery options**: Provide clear next steps\n4. **State preservation**: Keep state for recovery\n5. **Rollback capability**: Support undoing changes\n\n## Example: Complete Deployment Workflow\n\n### Initialize Command\n\n```markdown\n---\ndescription: Initialize deployment\nargument-hint: [environment]\nallowed-tools: Write, Bash(git:*)\n---\n\n# Initialize Deployment to $1\n\nCreating workflow state...\n\n\\`\\`\\`yaml\n---\nworkflow: deployment\nenvironment: $1\nbranch: !`git branch --show-current`\ncommit: !`git rev-parse HEAD`\nstage: initialized\ntimestamp: !`date -u +%Y-%m-%dT%H:%M:%SZ`\n---\n\\`\\`\\`\n\nWritten to .claude/deployment-state.local.md\n\nNext: Run /deployment-validate\n```\n\n### Validation Command\n\n```markdown\n---\ndescription: Validate deployment\nallowed-tools: Read, Bash\n---\n\nReading state: @.claude/deployment-state.local.md\n\nRunning validation...\n- Branch check: PASS\n- Tests: PASS\n- Build: PASS\n\nUpdating state to 'validated'...\n\nNext: Run /deployment-execute\n```\n\n### Execution Command\n\n```markdown\n---\ndescription: Execute deployment\nallowed-tools: Read, Bash, Write\n---\n\nReading state: @.claude/deployment-state.local.md\n\nExecuting deployment to [environment]...\n\n!`deploy.sh [environment]`\n\nDeployment complete.\nUpdating state to 'completed'...\n\nCleanup: /deployment-cleanup\n```\n\n### Cleanup Command\n\n```markdown\n---\ndescription: Clean up deployment\nallowed-tools: Bash\n---\n\nRemoving deployment state...\nrm .claude/deployment-state.local.md\n\nDeployment workflow complete.\n```\n\nThis complete workflow demonstrates state management, sequential execution, error handling, and clean separation of concerns across multiple commands.\n",
        "plugins/plugin-dev/skills/command-development/references/documentation-patterns.md": "# Command Documentation Patterns\n\nStrategies for creating self-documenting, maintainable commands with excellent user experience.\n\n## Overview\n\nWell-documented commands are easier to use, maintain, and distribute. Documentation should be embedded in the command itself, making it immediately accessible to users and maintainers.\n\n## Self-Documenting Command Structure\n\n### Complete Command Template\n\n```markdown\n---\ndescription: Clear, actionable description under 60 chars\nargument-hint: [arg1] [arg2] [optional-arg]\nallowed-tools: Read, Bash(git:*)\nmodel: sonnet\n---\n\n<!--\nCOMMAND: command-name\nVERSION: 1.0.0\nAUTHOR: Team Name\nLAST UPDATED: 2025-01-15\n\nPURPOSE:\nDetailed explanation of what this command does and why it exists.\n\nUSAGE:\n  /command-name arg1 arg2\n\nARGUMENTS:\n  arg1: Description of first argument (required)\n  arg2: Description of second argument (optional, defaults to X)\n\nEXAMPLES:\n  /command-name feature-branch main\n    → Compares feature-branch with main\n\n  /command-name my-branch\n    → Compares my-branch with current branch\n\nREQUIREMENTS:\n  - Git repository\n  - Branch must exist\n  - Permissions to read repository\n\nRELATED COMMANDS:\n  /other-command - Related functionality\n  /another-command - Alternative approach\n\nTROUBLESHOOTING:\n  - If branch not found: Check branch name spelling\n  - If permission denied: Check repository access\n\nCHANGELOG:\n  v1.0.0 (2025-01-15): Initial release\n  v0.9.0 (2025-01-10): Beta version\n-->\n\n# Command Implementation\n\n[Command prompt content here...]\n\n[Explain what will happen...]\n\n[Guide user through steps...]\n\n[Provide clear output...]\n```\n\n### Documentation Comment Sections\n\n**PURPOSE**: Why the command exists\n- Problem it solves\n- Use cases\n- When to use vs when not to use\n\n**USAGE**: Basic syntax\n- Command invocation pattern\n- Required vs optional arguments\n- Default values\n\n**ARGUMENTS**: Detailed argument documentation\n- Each argument described\n- Type information\n- Valid values/ranges\n- Defaults\n\n**EXAMPLES**: Concrete usage examples\n- Common use cases\n- Edge cases\n- Expected outputs\n\n**REQUIREMENTS**: Prerequisites\n- Dependencies\n- Permissions\n- Environmental setup\n\n**RELATED COMMANDS**: Connections\n- Similar commands\n- Complementary commands\n- Alternative approaches\n\n**TROUBLESHOOTING**: Common issues\n- Known problems\n- Solutions\n- Workarounds\n\n**CHANGELOG**: Version history\n- What changed when\n- Breaking changes highlighted\n- Migration guidance\n\n## In-Line Documentation Patterns\n\n### Commented Sections\n\n```markdown\n---\ndescription: Complex multi-step command\n---\n\n<!-- SECTION 1: VALIDATION -->\n<!-- This section checks prerequisites before proceeding -->\n\nChecking prerequisites...\n- Git repository: !`git rev-parse --git-dir 2>/dev/null`\n- Branch exists: [validation logic]\n\n<!-- SECTION 2: ANALYSIS -->\n<!-- Analyzes the differences between branches -->\n\nAnalyzing differences between $1 and $2...\n[Analysis logic...]\n\n<!-- SECTION 3: RECOMMENDATIONS -->\n<!-- Provides actionable recommendations -->\n\nBased on analysis, recommend:\n[Recommendations...]\n\n<!-- END: Next steps for user -->\n```\n\n### Inline Explanations\n\n```markdown\n---\ndescription: Deployment command with inline docs\n---\n\n# Deploy to $1\n\n## Pre-flight Checks\n\n<!-- We check branch status to prevent deploying from wrong branch -->\nCurrent branch: !`git branch --show-current`\n\n<!-- Production deploys must come from main/master -->\nif [ \"$1\" = \"production\" ] && [ \"$(git branch --show-current)\" != \"main\" ]; then\n  ⚠️  WARNING: Not on main branch for production deploy\n  This is unusual. Confirm this is intentional.\nfi\n\n<!-- Test status ensures we don't deploy broken code -->\nRunning tests: !`npm test`\n\n✓ All checks passed\n\n## Deployment\n\n<!-- Actual deployment happens here -->\n<!-- Uses blue-green strategy for zero-downtime -->\nDeploying to $1 environment...\n[Deployment steps...]\n\n<!-- Post-deployment verification -->\nVerifying deployment health...\n[Health checks...]\n\nDeployment complete!\n\n## Next Steps\n\n<!-- Guide user on what to do after deployment -->\n1. Monitor logs: /logs $1\n2. Run smoke tests: /smoke-test $1\n3. Notify team: /notify-deployment $1\n```\n\n### Decision Point Documentation\n\n```markdown\n---\ndescription: Interactive deployment command\n---\n\n# Interactive Deployment\n\n## Configuration Review\n\nTarget: $1\nCurrent version: !`cat version.txt`\nNew version: $2\n\n<!-- DECISION POINT: User confirms configuration -->\n<!-- This pause allows user to verify everything is correct -->\n<!-- We can't automatically proceed because deployment is risky -->\n\nReview the above configuration.\n\n**Continue with deployment?**\n- Reply \"yes\" to proceed\n- Reply \"no\" to cancel\n- Reply \"edit\" to modify configuration\n\n[Await user input before continuing...]\n\n<!-- After user confirms, we proceed with deployment -->\n<!-- All subsequent steps are automated -->\n\nProceeding with deployment...\n```\n\n## Help Text Patterns\n\n### Built-in Help Command\n\nCreate a help subcommand for complex commands:\n\n```markdown\n---\ndescription: Main command with help\nargument-hint: [subcommand] [args]\n---\n\n# Command Processor\n\nif [ \"$1\" = \"help\" ] || [ \"$1\" = \"--help\" ] || [ \"$1\" = \"-h\" ]; then\n  **Command Help**\n\n  USAGE:\n    /command [subcommand] [args]\n\n  SUBCOMMANDS:\n    init [name]       Initialize new configuration\n    deploy [env]      Deploy to environment\n    status            Show current status\n    rollback          Rollback last deployment\n    help              Show this help\n\n  EXAMPLES:\n    /command init my-project\n    /command deploy staging\n    /command status\n    /command rollback\n\n  For detailed help on a subcommand:\n    /command [subcommand] --help\n\n  Exit.\nfi\n\n[Regular command processing...]\n```\n\n### Contextual Help\n\nProvide help based on context:\n\n```markdown\n---\ndescription: Context-aware command\nargument-hint: [operation] [target]\n---\n\n# Context-Aware Operation\n\nif [ -z \"$1\" ]; then\n  **No operation specified**\n\n  Available operations:\n  - analyze: Analyze target for issues\n  - fix: Apply automatic fixes\n  - report: Generate detailed report\n\n  Usage: /command [operation] [target]\n\n  Examples:\n    /command analyze src/\n    /command fix src/app.js\n    /command report\n\n  Run /command help for more details.\n\n  Exit.\nfi\n\n[Command continues if operation provided...]\n```\n\n## Error Message Documentation\n\n### Helpful Error Messages\n\n```markdown\n---\ndescription: Command with good error messages\n---\n\n# Validation Command\n\nif [ -z \"$1\" ]; then\n  ❌ ERROR: Missing required argument\n\n  The 'file-path' argument is required.\n\n  USAGE:\n    /validate [file-path]\n\n  EXAMPLE:\n    /validate src/app.js\n\n  Try again with a file path.\n\n  Exit.\nfi\n\nif [ ! -f \"$1\" ]; then\n  ❌ ERROR: File not found: $1\n\n  The specified file does not exist or is not accessible.\n\n  COMMON CAUSES:\n  1. Typo in file path\n  2. File was deleted or moved\n  3. Insufficient permissions\n\n  SUGGESTIONS:\n  - Check spelling: $1\n  - Verify file exists: ls -la $(dirname \"$1\")\n  - Check permissions: ls -l \"$1\"\n\n  Exit.\nfi\n\n[Command continues if validation passes...]\n```\n\n### Error Recovery Guidance\n\n```markdown\n---\ndescription: Command with recovery guidance\n---\n\n# Operation Command\n\nRunning operation...\n\n!`risky-operation.sh`\n\nif [ $? -ne 0 ]; then\n  ❌ OPERATION FAILED\n\n  The operation encountered an error and could not complete.\n\n  WHAT HAPPENED:\n  The risky-operation.sh script returned a non-zero exit code.\n\n  WHAT THIS MEANS:\n  - Changes may be partially applied\n  - System may be in inconsistent state\n  - Manual intervention may be needed\n\n  RECOVERY STEPS:\n  1. Check operation logs: cat /tmp/operation.log\n  2. Verify system state: /check-state\n  3. If needed, rollback: /rollback-operation\n  4. Fix underlying issue\n  5. Retry operation: /retry-operation\n\n  NEED HELP?\n  - Check troubleshooting guide: /help troubleshooting\n  - Contact support with error code: ERR_OP_FAILED_001\n\n  Exit.\nfi\n```\n\n## Usage Example Documentation\n\n### Embedded Examples\n\n```markdown\n---\ndescription: Command with embedded examples\n---\n\n# Feature Command\n\nThis command performs feature analysis with multiple options.\n\n## Basic Usage\n\n\\`\\`\\`\n/feature analyze src/\n\\`\\`\\`\n\nAnalyzes all files in src/ directory for feature usage.\n\n## Advanced Usage\n\n\\`\\`\\`\n/feature analyze src/ --detailed\n\\`\\`\\`\n\nProvides detailed analysis including:\n- Feature breakdown by file\n- Usage patterns\n- Optimization suggestions\n\n## Use Cases\n\n**Use Case 1: Quick overview**\n\\`\\`\\`\n/feature analyze .\n\\`\\`\\`\nGet high-level feature summary of entire project.\n\n**Use Case 2: Specific directory**\n\\`\\`\\`\n/feature analyze src/components\n\\`\\`\\`\nFocus analysis on components directory only.\n\n**Use Case 3: Comparison**\n\\`\\`\\`\n/feature analyze src/ --compare baseline.json\n\\`\\`\\`\nCompare current features against baseline.\n\n---\n\nNow processing your request...\n\n[Command implementation...]\n```\n\n### Example-Driven Documentation\n\n```markdown\n---\ndescription: Example-heavy command\n---\n\n# Transformation Command\n\n## What This Does\n\nTransforms data from one format to another.\n\n## Examples First\n\n### Example 1: JSON to YAML\n**Input:** `data.json`\n\\`\\`\\`json\n{\"name\": \"test\", \"value\": 42}\n\\`\\`\\`\n\n**Command:** `/transform data.json yaml`\n\n**Output:** `data.yaml`\n\\`\\`\\`yaml\nname: test\nvalue: 42\n\\`\\`\\`\n\n### Example 2: CSV to JSON\n**Input:** `data.csv`\n\\`\\`\\`csv\nname,value\ntest,42\n\\`\\`\\`\n\n**Command:** `/transform data.csv json`\n\n**Output:** `data.json`\n\\`\\`\\`json\n[{\"name\": \"test\", \"value\": \"42\"}]\n\\`\\`\\`\n\n### Example 3: With Options\n**Command:** `/transform data.json yaml --pretty --sort-keys`\n\n**Result:** Formatted YAML with sorted keys\n\n---\n\n## Your Transformation\n\nFile: $1\nFormat: $2\n\n[Perform transformation...]\n```\n\n## Maintenance Documentation\n\n### Version and Changelog\n\n```markdown\n<!--\nVERSION: 2.1.0\nLAST UPDATED: 2025-01-15\nAUTHOR: DevOps Team\n\nCHANGELOG:\n  v2.1.0 (2025-01-15):\n    - Added support for YAML configuration\n    - Improved error messages\n    - Fixed bug with special characters in arguments\n\n  v2.0.0 (2025-01-01):\n    - BREAKING: Changed argument order\n    - BREAKING: Removed deprecated --old-flag\n    - Added new validation checks\n    - Migration guide: /migration-v2\n\n  v1.5.0 (2024-12-15):\n    - Added --verbose flag\n    - Improved performance by 50%\n\n  v1.0.0 (2024-12-01):\n    - Initial stable release\n\nMIGRATION NOTES:\n  From v1.x to v2.0:\n    Old: /command arg1 arg2 --old-flag\n    New: /command arg2 arg1\n\n  The --old-flag is removed. Use --new-flag instead.\n\nDEPRECATION WARNINGS:\n  - The --legacy-mode flag is deprecated as of v2.1.0\n  - Will be removed in v3.0.0 (estimated 2025-06-01)\n  - Use --modern-mode instead\n\nKNOWN ISSUES:\n  - #123: Slow performance with large files (workaround: use --stream flag)\n  - #456: Special characters in Windows (fix planned for v2.2.0)\n-->\n```\n\n### Maintenance Notes\n\n```markdown\n<!--\nMAINTENANCE NOTES:\n\nCODE STRUCTURE:\n  - Lines 1-50: Argument parsing and validation\n  - Lines 51-100: Main processing logic\n  - Lines 101-150: Output formatting\n  - Lines 151-200: Error handling\n\nDEPENDENCIES:\n  - Requires git 2.x or later\n  - Uses jq for JSON processing\n  - Needs bash 4.0+ for associative arrays\n\nPERFORMANCE:\n  - Fast path for small inputs (< 1MB)\n  - Streams large files to avoid memory issues\n  - Caches results in /tmp for 1 hour\n\nSECURITY CONSIDERATIONS:\n  - Validates all inputs to prevent injection\n  - Uses allowed-tools to limit Bash access\n  - No credentials in command file\n\nTESTING:\n  - Unit tests: tests/command-test.sh\n  - Integration tests: tests/integration/\n  - Manual test checklist: tests/manual-checklist.md\n\nFUTURE IMPROVEMENTS:\n  - TODO: Add support for TOML format\n  - TODO: Implement parallel processing\n  - TODO: Add progress bar for large files\n\nRELATED FILES:\n  - lib/parser.sh: Shared parsing logic\n  - lib/formatter.sh: Output formatting\n  - config/defaults.yml: Default configuration\n-->\n```\n\n## README Documentation\n\nCommands should have companion README files:\n\n```markdown\n# Command Name\n\nBrief description of what the command does.\n\n## Installation\n\nThis command is part of the [plugin-name] plugin.\n\nInstall with:\n\\`\\`\\`\n/plugin install plugin-name\n\\`\\`\\`\n\n## Usage\n\nBasic usage:\n\\`\\`\\`\n/command-name [arg1] [arg2]\n\\`\\`\\`\n\n## Arguments\n\n- `arg1`: Description (required)\n- `arg2`: Description (optional, defaults to X)\n\n## Examples\n\n### Example 1: Basic Usage\n\\`\\`\\`\n/command-name value1 value2\n\\`\\`\\`\n\nDescription of what happens.\n\n### Example 2: Advanced Usage\n\\`\\`\\`\n/command-name value1 --option\n\\`\\`\\`\n\nDescription of advanced feature.\n\n## Configuration\n\nOptional configuration file: `.claude/command-name.local.md`\n\n\\`\\`\\`markdown\n---\ndefault_arg: value\nenable_feature: true\n---\n\\`\\`\\`\n\n## Requirements\n\n- Git 2.x or later\n- jq (for JSON processing)\n- Node.js 14+ (optional, for advanced features)\n\n## Troubleshooting\n\n### Issue: Command not found\n\n**Solution:** Ensure plugin is installed and enabled.\n\n### Issue: Permission denied\n\n**Solution:** Check file permissions and allowed-tools setting.\n\n## Contributing\n\nContributions welcome! See [CONTRIBUTING.md](CONTRIBUTING.md).\n\n## License\n\nMIT License - See [LICENSE](LICENSE).\n\n## Support\n\n- Issues: https://github.com/user/plugin/issues\n- Docs: https://docs.example.com\n- Email: support@example.com\n```\n\n## Best Practices\n\n### Documentation Principles\n\n1. **Write for your future self**: Assume you'll forget details\n2. **Examples before explanations**: Show, then tell\n3. **Progressive disclosure**: Basic info first, details available\n4. **Keep it current**: Update docs when code changes\n5. **Test your docs**: Verify examples actually work\n\n### Documentation Locations\n\n1. **In command file**: Core usage, examples, inline explanations\n2. **README**: Installation, configuration, troubleshooting\n3. **Separate docs**: Detailed guides, tutorials, API reference\n4. **Comments**: Implementation details for maintainers\n\n### Documentation Style\n\n1. **Clear and concise**: No unnecessary words\n2. **Active voice**: \"Run the command\" not \"The command can be run\"\n3. **Consistent terminology**: Use same terms throughout\n4. **Formatted well**: Use headings, lists, code blocks\n5. **Accessible**: Assume reader is beginner\n\n### Documentation Maintenance\n\n1. **Version everything**: Track what changed when\n2. **Deprecate gracefully**: Warn before removing features\n3. **Migration guides**: Help users upgrade\n4. **Archive old docs**: Keep old versions accessible\n5. **Review regularly**: Ensure docs match reality\n\n## Documentation Checklist\n\nBefore releasing a command:\n\n- [ ] Description in frontmatter is clear\n- [ ] argument-hint documents all arguments\n- [ ] Usage examples in comments\n- [ ] Common use cases shown\n- [ ] Error messages are helpful\n- [ ] Requirements documented\n- [ ] Related commands listed\n- [ ] Changelog maintained\n- [ ] Version number updated\n- [ ] README created/updated\n- [ ] Examples actually work\n- [ ] Troubleshooting section complete\n\nWith good documentation, commands become self-service, reducing support burden and improving user experience.\n",
        "plugins/plugin-dev/skills/command-development/references/frontmatter-reference.md": "# Command Frontmatter Reference\n\nComplete reference for YAML frontmatter fields in slash commands.\n\n## Frontmatter Overview\n\nYAML frontmatter is optional metadata at the start of command files:\n\n```markdown\n---\ndescription: Brief description\nallowed-tools: Read, Write\nmodel: sonnet\nargument-hint: [arg1] [arg2]\n---\n\nCommand prompt content here...\n```\n\nAll fields are optional. Commands work without any frontmatter.\n\n## Field Specifications\n\n### description\n\n**Type:** String\n**Required:** No\n**Default:** First line of command prompt\n**Max Length:** ~60 characters recommended for `/help` display\n\n**Purpose:** Describes what the command does, shown in `/help` output\n\n**Examples:**\n```yaml\ndescription: Review code for security issues\n```\n```yaml\ndescription: Deploy to staging environment\n```\n```yaml\ndescription: Generate API documentation\n```\n\n**Best practices:**\n- Keep under 60 characters for clean display\n- Start with verb (Review, Deploy, Generate)\n- Be specific about what command does\n- Avoid redundant \"command\" or \"slash command\"\n\n**Good:**\n- ✅ \"Review PR for code quality and security\"\n- ✅ \"Deploy application to specified environment\"\n- ✅ \"Generate comprehensive API documentation\"\n\n**Bad:**\n- ❌ \"This command reviews PRs\" (unnecessary \"This command\")\n- ❌ \"Review\" (too vague)\n- ❌ \"A command that reviews pull requests for code quality, security issues, and best practices\" (too long)\n\n### allowed-tools\n\n**Type:** String or Array of strings\n**Required:** No\n**Default:** Inherits from conversation permissions\n\n**Purpose:** Restrict or specify which tools command can use\n\n**Formats:**\n\n**Single tool:**\n```yaml\nallowed-tools: Read\n```\n\n**Multiple tools (comma-separated):**\n```yaml\nallowed-tools: Read, Write, Edit\n```\n\n**Multiple tools (array):**\n```yaml\nallowed-tools:\n  - Read\n  - Write\n  - Bash(git:*)\n```\n\n**Tool Patterns:**\n\n**Specific tools:**\n```yaml\nallowed-tools: Read, Grep, Edit\n```\n\n**Bash with command filter:**\n```yaml\nallowed-tools: Bash(git:*)           # Only git commands\nallowed-tools: Bash(npm:*)           # Only npm commands\nallowed-tools: Bash(docker:*)        # Only docker commands\n```\n\n**All tools (not recommended):**\n```yaml\nallowed-tools: \"*\"\n```\n\n**When to use:**\n\n1. **Security:** Restrict command to safe operations\n   ```yaml\n   allowed-tools: Read, Grep  # Read-only command\n   ```\n\n2. **Clarity:** Document required tools\n   ```yaml\n   allowed-tools: Bash(git:*), Read\n   ```\n\n3. **Bash execution:** Enable bash command output\n   ```yaml\n   allowed-tools: Bash(git status:*), Bash(git diff:*)\n   ```\n\n**Best practices:**\n- Be as restrictive as possible\n- Use command filters for Bash (e.g., `git:*` not `*`)\n- Only specify when different from conversation permissions\n- Document why specific tools are needed\n\n### model\n\n**Type:** String\n**Required:** No\n**Default:** Inherits from conversation\n**Values:** `sonnet`, `opus`, `haiku`\n\n**Purpose:** Specify which Claude model executes the command\n\n**Examples:**\n```yaml\nmodel: haiku    # Fast, efficient for simple tasks\n```\n```yaml\nmodel: sonnet   # Balanced performance (default)\n```\n```yaml\nmodel: opus     # Maximum capability for complex tasks\n```\n\n**When to use:**\n\n**Use `haiku` for:**\n- Simple, formulaic commands\n- Fast execution needed\n- Low complexity tasks\n- Frequent invocations\n\n```yaml\n---\ndescription: Format code file\nmodel: haiku\n---\n```\n\n**Use `sonnet` for:**\n- Standard commands (default)\n- Balanced speed/quality\n- Most common use cases\n\n```yaml\n---\ndescription: Review code changes\nmodel: sonnet\n---\n```\n\n**Use `opus` for:**\n- Complex analysis\n- Architectural decisions\n- Deep code understanding\n- Critical tasks\n\n```yaml\n---\ndescription: Analyze system architecture\nmodel: opus\n---\n```\n\n**Best practices:**\n- Omit unless specific need\n- Use `haiku` for speed when possible\n- Reserve `opus` for genuinely complex tasks\n- Test with different models to find right balance\n\n### argument-hint\n\n**Type:** String\n**Required:** No\n**Default:** None\n\n**Purpose:** Document expected arguments for users and autocomplete\n\n**Format:**\n```yaml\nargument-hint: [arg1] [arg2] [optional-arg]\n```\n\n**Examples:**\n\n**Single argument:**\n```yaml\nargument-hint: [pr-number]\n```\n\n**Multiple required arguments:**\n```yaml\nargument-hint: [environment] [version]\n```\n\n**Optional arguments:**\n```yaml\nargument-hint: [file-path] [options]\n```\n\n**Descriptive names:**\n```yaml\nargument-hint: [source-branch] [target-branch] [commit-message]\n```\n\n**Best practices:**\n- Use square brackets `[]` for each argument\n- Use descriptive names (not `arg1`, `arg2`)\n- Indicate optional vs required in description\n- Match order to positional arguments in command\n- Keep concise but clear\n\n**Examples by pattern:**\n\n**Simple command:**\n```yaml\n---\ndescription: Fix issue by number\nargument-hint: [issue-number]\n---\n\nFix issue #$1...\n```\n\n**Multi-argument:**\n```yaml\n---\ndescription: Deploy to environment\nargument-hint: [app-name] [environment] [version]\n---\n\nDeploy $1 to $2 using version $3...\n```\n\n**With options:**\n```yaml\n---\ndescription: Run tests with options\nargument-hint: [test-pattern] [options]\n---\n\nRun tests matching $1 with options: $2\n```\n\n### disable-model-invocation\n\n**Type:** Boolean\n**Required:** No\n**Default:** false\n\n**Purpose:** Prevent SlashCommand tool from programmatically invoking command\n\n**Examples:**\n```yaml\ndisable-model-invocation: true\n```\n\n**When to use:**\n\n1. **Manual-only commands:** Commands requiring user judgment\n   ```yaml\n   ---\n   description: Approve deployment to production\n   disable-model-invocation: true\n   ---\n   ```\n\n2. **Destructive operations:** Commands with irreversible effects\n   ```yaml\n   ---\n   description: Delete all test data\n   disable-model-invocation: true\n   ---\n   ```\n\n3. **Interactive workflows:** Commands needing user input\n   ```yaml\n   ---\n   description: Walk through setup wizard\n   disable-model-invocation: true\n   ---\n   ```\n\n**Default behavior (false):**\n- Command available to SlashCommand tool\n- Claude can invoke programmatically\n- Still available for manual invocation\n\n**When true:**\n- Command only invokable by user typing `/command`\n- Not available to SlashCommand tool\n- Safer for sensitive operations\n\n**Best practices:**\n- Use sparingly (limits Claude's autonomy)\n- Document why in command comments\n- Consider if command should exist if always manual\n\n## Complete Examples\n\n### Minimal Command\n\nNo frontmatter needed:\n\n```markdown\nReview this code for common issues and suggest improvements.\n```\n\n### Simple Command\n\nJust description:\n\n```markdown\n---\ndescription: Review code for issues\n---\n\nReview this code for common issues and suggest improvements.\n```\n\n### Standard Command\n\nDescription and tools:\n\n```markdown\n---\ndescription: Review Git changes\nallowed-tools: Bash(git:*), Read\n---\n\nCurrent changes: !`git diff --name-only`\n\nReview each changed file for:\n- Code quality\n- Potential bugs\n- Best practices\n```\n\n### Complex Command\n\nAll common fields:\n\n```markdown\n---\ndescription: Deploy application to environment\nargument-hint: [app-name] [environment] [version]\nallowed-tools: Bash(kubectl:*), Bash(helm:*), Read\nmodel: sonnet\n---\n\nDeploy $1 to $2 environment using version $3\n\nPre-deployment checks:\n- Verify $2 configuration\n- Check cluster status: !`kubectl cluster-info`\n- Validate version $3 exists\n\nProceed with deployment following deployment runbook.\n```\n\n### Manual-Only Command\n\nRestricted invocation:\n\n```markdown\n---\ndescription: Approve production deployment\nargument-hint: [deployment-id]\ndisable-model-invocation: true\nallowed-tools: Bash(gh:*)\n---\n\n<!--\nMANUAL APPROVAL REQUIRED\nThis command requires human judgment and cannot be automated.\n-->\n\nReview deployment $1 for production approval:\n\nDeployment details: !`gh api /deployments/$1`\n\nVerify:\n- All tests passed\n- Security scan clean\n- Stakeholder approval\n- Rollback plan ready\n\nType \"APPROVED\" to confirm deployment.\n```\n\n## Validation\n\n### Common Errors\n\n**Invalid YAML syntax:**\n```yaml\n---\ndescription: Missing quote\nallowed-tools: Read, Write\nmodel: sonnet\n---  # ❌ Missing closing quote above\n```\n\n**Fix:** Validate YAML syntax\n\n**Incorrect tool specification:**\n```yaml\nallowed-tools: Bash  # ❌ Missing command filter\n```\n\n**Fix:** Use `Bash(git:*)` format\n\n**Invalid model name:**\n```yaml\nmodel: gpt4  # ❌ Not a valid Claude model\n```\n\n**Fix:** Use `sonnet`, `opus`, or `haiku`\n\n### Validation Checklist\n\nBefore committing command:\n- [ ] YAML syntax valid (no errors)\n- [ ] Description under 60 characters\n- [ ] allowed-tools uses proper format\n- [ ] model is valid value if specified\n- [ ] argument-hint matches positional arguments\n- [ ] disable-model-invocation used appropriately\n\n## Best Practices Summary\n\n1. **Start minimal:** Add frontmatter only when needed\n2. **Document arguments:** Always use argument-hint with arguments\n3. **Restrict tools:** Use most restrictive allowed-tools that works\n4. **Choose right model:** Use haiku for speed, opus for complexity\n5. **Manual-only sparingly:** Only use disable-model-invocation when necessary\n6. **Clear descriptions:** Make commands discoverable in `/help`\n7. **Test thoroughly:** Verify frontmatter works as expected\n",
        "plugins/plugin-dev/skills/command-development/references/interactive-commands.md": "# Interactive Command Patterns\n\nComprehensive guide to creating commands that gather user feedback and make decisions through the AskUserQuestion tool.\n\n## Overview\n\nSome commands need user input that doesn't work well with simple arguments. For example:\n- Choosing between multiple complex options with trade-offs\n- Selecting multiple items from a list\n- Making decisions that require explanation\n- Gathering preferences or configuration interactively\n\nFor these cases, use the **AskUserQuestion tool** within command execution rather than relying on command arguments.\n\n## When to Use AskUserQuestion\n\n### Use AskUserQuestion When:\n\n1. **Multiple choice decisions** with explanations needed\n2. **Complex options** that require context to choose\n3. **Multi-select scenarios** (choosing multiple items)\n4. **Preference gathering** for configuration\n5. **Interactive workflows** that adapt based on answers\n\n### Use Command Arguments When:\n\n1. **Simple values** (file paths, numbers, names)\n2. **Known inputs** user already has\n3. **Scriptable workflows** that should be automatable\n4. **Fast invocations** where prompting would slow down\n\n## AskUserQuestion Basics\n\n### Tool Parameters\n\n```typescript\n{\n  questions: [\n    {\n      question: \"Which authentication method should we use?\",\n      header: \"Auth method\",  // Short label (max 12 chars)\n      multiSelect: false,     // true for multiple selection\n      options: [\n        {\n          label: \"OAuth 2.0\",\n          description: \"Industry standard, supports multiple providers\"\n        },\n        {\n          label: \"JWT\",\n          description: \"Stateless, good for APIs\"\n        },\n        {\n          label: \"Session\",\n          description: \"Traditional, server-side state\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Key points:**\n- Users can always choose \"Other\" to provide custom input (automatic)\n- `multiSelect: true` allows selecting multiple options\n- Options should be 2-4 choices (not more)\n- Can ask 1-4 questions per tool call\n\n## Command Pattern for User Interaction\n\n### Basic Interactive Command\n\n```markdown\n---\ndescription: Interactive setup command\nallowed-tools: AskUserQuestion, Write\n---\n\n# Interactive Plugin Setup\n\nThis command will guide you through configuring the plugin with a series of questions.\n\n## Step 1: Gather Configuration\n\nUse the AskUserQuestion tool to ask:\n\n**Question 1 - Deployment target:**\n- header: \"Deploy to\"\n- question: \"Which deployment platform will you use?\"\n- options:\n  - AWS (Amazon Web Services with ECS/EKS)\n  - GCP (Google Cloud with GKE)\n  - Azure (Microsoft Azure with AKS)\n  - Local (Docker on local machine)\n\n**Question 2 - Environment strategy:**\n- header: \"Environments\"\n- question: \"How many environments do you need?\"\n- options:\n  - Single (Just production)\n  - Standard (Dev, Staging, Production)\n  - Complete (Dev, QA, Staging, Production)\n\n**Question 3 - Features to enable:**\n- header: \"Features\"\n- question: \"Which features do you want to enable?\"\n- multiSelect: true\n- options:\n  - Auto-scaling (Automatic resource scaling)\n  - Monitoring (Health checks and metrics)\n  - CI/CD (Automated deployment pipeline)\n  - Backups (Automated database backups)\n\n## Step 2: Process Answers\n\nBased on the answers received from AskUserQuestion:\n\n1. Parse the deployment target choice\n2. Set up environment-specific configuration\n3. Enable selected features\n4. Generate configuration files\n\n## Step 3: Generate Configuration\n\nCreate `.claude/plugin-name.local.md` with:\n\n\\`\\`\\`yaml\n---\ndeployment_target: [answer from Q1]\nenvironments: [answer from Q2]\nfeatures:\n  auto_scaling: [true if selected in Q3]\n  monitoring: [true if selected in Q3]\n  ci_cd: [true if selected in Q3]\n  backups: [true if selected in Q3]\n---\n\n# Plugin Configuration\n\nGenerated: [timestamp]\nTarget: [deployment_target]\nEnvironments: [environments]\n\\`\\`\\`\n\n## Step 4: Confirm and Next Steps\n\nConfirm configuration created and guide user on next steps.\n```\n\n### Multi-Stage Interactive Workflow\n\n```markdown\n---\ndescription: Multi-stage interactive workflow\nallowed-tools: AskUserQuestion, Read, Write, Bash\n---\n\n# Multi-Stage Deployment Setup\n\nThis command walks through deployment setup in stages, adapting based on your answers.\n\n## Stage 1: Basic Configuration\n\nUse AskUserQuestion to ask about deployment basics.\n\nBased on answers, determine which additional questions to ask.\n\n## Stage 2: Advanced Options (Conditional)\n\nIf user selected \"Advanced\" deployment in Stage 1:\n\nUse AskUserQuestion to ask about:\n- Load balancing strategy\n- Caching configuration\n- Security hardening options\n\nIf user selected \"Simple\" deployment:\n- Skip advanced questions\n- Use sensible defaults\n\n## Stage 3: Confirmation\n\nShow summary of all selections.\n\nUse AskUserQuestion for final confirmation:\n- header: \"Confirm\"\n- question: \"Does this configuration look correct?\"\n- options:\n  - Yes (Proceed with setup)\n  - No (Start over)\n  - Modify (Let me adjust specific settings)\n\nIf \"Modify\", ask which specific setting to change.\n\n## Stage 4: Execute Setup\n\nBased on confirmed configuration, execute setup steps.\n```\n\n## Interactive Question Design\n\n### Question Structure\n\n**Good questions:**\n```markdown\nQuestion: \"Which database should we use for this project?\"\nHeader: \"Database\"\nOptions:\n  - PostgreSQL (Relational, ACID compliant, best for complex queries)\n  - MongoDB (Document store, flexible schema, best for rapid iteration)\n  - Redis (In-memory, fast, best for caching and sessions)\n```\n\n**Poor questions:**\n```markdown\nQuestion: \"Database?\"  // Too vague\nHeader: \"DB\"  // Unclear abbreviation\nOptions:\n  - Option 1  // Not descriptive\n  - Option 2\n```\n\n### Option Design Best Practices\n\n**Clear labels:**\n- Use 1-5 words\n- Specific and descriptive\n- No jargon without context\n\n**Helpful descriptions:**\n- Explain what the option means\n- Mention key benefits or trade-offs\n- Help user make informed decision\n- Keep to 1-2 sentences\n\n**Appropriate number:**\n- 2-4 options per question\n- Don't overwhelm with too many choices\n- Group related options\n- \"Other\" automatically provided\n\n### Multi-Select Questions\n\n**When to use multiSelect:**\n\n```markdown\nUse AskUserQuestion for enabling features:\n\nQuestion: \"Which features do you want to enable?\"\nHeader: \"Features\"\nmultiSelect: true  // Allow selecting multiple\nOptions:\n  - Logging (Detailed operation logs)\n  - Metrics (Performance monitoring)\n  - Alerts (Error notifications)\n  - Backups (Automatic backups)\n```\n\nUser can select any combination: none, some, or all.\n\n**When NOT to use multiSelect:**\n\n```markdown\nQuestion: \"Which authentication method?\"\nmultiSelect: false  // Only one auth method makes sense\n```\n\nMutually exclusive choices should not use multiSelect.\n\n## Command Patterns with AskUserQuestion\n\n### Pattern 1: Simple Yes/No Decision\n\n```markdown\n---\ndescription: Command with confirmation\nallowed-tools: AskUserQuestion, Bash\n---\n\n# Destructive Operation\n\nThis operation will delete all cached data.\n\nUse AskUserQuestion to confirm:\n\nQuestion: \"This will delete all cached data. Are you sure?\"\nHeader: \"Confirm\"\nOptions:\n  - Yes (Proceed with deletion)\n  - No (Cancel operation)\n\nIf user selects \"Yes\":\n  Execute deletion\n  Report completion\n\nIf user selects \"No\":\n  Cancel operation\n  Exit without changes\n```\n\n### Pattern 2: Multiple Configuration Questions\n\n```markdown\n---\ndescription: Multi-question configuration\nallowed-tools: AskUserQuestion, Write\n---\n\n# Project Configuration Setup\n\nGather configuration through multiple questions.\n\nUse AskUserQuestion with multiple questions in one call:\n\n**Question 1:**\n- question: \"Which programming language?\"\n- header: \"Language\"\n- options: Python, TypeScript, Go, Rust\n\n**Question 2:**\n- question: \"Which test framework?\"\n- header: \"Testing\"\n- options: Jest, PyTest, Go Test, Cargo Test\n  (Adapt based on language from Q1)\n\n**Question 3:**\n- question: \"Which CI/CD platform?\"\n- header: \"CI/CD\"\n- options: GitHub Actions, GitLab CI, CircleCI\n\n**Question 4:**\n- question: \"Which features do you need?\"\n- header: \"Features\"\n- multiSelect: true\n- options: Linting, Type checking, Code coverage, Security scanning\n\nProcess all answers together to generate cohesive configuration.\n```\n\n### Pattern 3: Conditional Question Flow\n\n```markdown\n---\ndescription: Conditional interactive workflow\nallowed-tools: AskUserQuestion, Read, Write\n---\n\n# Adaptive Configuration\n\n## Question 1: Deployment Complexity\n\nUse AskUserQuestion:\n\nQuestion: \"How complex is your deployment?\"\nHeader: \"Complexity\"\nOptions:\n  - Simple (Single server, straightforward)\n  - Standard (Multiple servers, load balancing)\n  - Complex (Microservices, orchestration)\n\n## Conditional Questions Based on Answer\n\nIf answer is \"Simple\":\n  - No additional questions\n  - Use minimal configuration\n\nIf answer is \"Standard\":\n  - Ask about load balancing strategy\n  - Ask about scaling policy\n\nIf answer is \"Complex\":\n  - Ask about orchestration platform (Kubernetes, Docker Swarm)\n  - Ask about service mesh (Istio, Linkerd, None)\n  - Ask about monitoring (Prometheus, Datadog, CloudWatch)\n  - Ask about logging aggregation\n\n## Process Conditional Answers\n\nGenerate configuration appropriate for selected complexity level.\n```\n\n### Pattern 4: Iterative Collection\n\n```markdown\n---\ndescription: Collect multiple items iteratively\nallowed-tools: AskUserQuestion, Write\n---\n\n# Collect Team Members\n\nWe'll collect team member information for the project.\n\n## Question: How many team members?\n\nUse AskUserQuestion:\n\nQuestion: \"How many team members should we set up?\"\nHeader: \"Team size\"\nOptions:\n  - 2 people\n  - 3 people\n  - 4 people\n  - 6 people\n\n## Iterate Through Team Members\n\nFor each team member (1 to N based on answer):\n\nUse AskUserQuestion for member details:\n\nQuestion: \"What role for team member [number]?\"\nHeader: \"Role\"\nOptions:\n  - Frontend Developer\n  - Backend Developer\n  - DevOps Engineer\n  - QA Engineer\n  - Designer\n\nStore each member's information.\n\n## Generate Team Configuration\n\nAfter collecting all N members, create team configuration file with all members and their roles.\n```\n\n### Pattern 5: Dependency Selection\n\n```markdown\n---\ndescription: Select dependencies with multi-select\nallowed-tools: AskUserQuestion\n---\n\n# Configure Project Dependencies\n\n## Question: Required Libraries\n\nUse AskUserQuestion with multiSelect:\n\nQuestion: \"Which libraries does your project need?\"\nHeader: \"Dependencies\"\nmultiSelect: true\nOptions:\n  - React (UI framework)\n  - Express (Web server)\n  - TypeORM (Database ORM)\n  - Jest (Testing framework)\n  - Axios (HTTP client)\n\nUser can select any combination.\n\n## Process Selections\n\nFor each selected library:\n- Add to package.json dependencies\n- Generate sample configuration\n- Create usage examples\n- Update documentation\n```\n\n## Best Practices for Interactive Commands\n\n### Question Design\n\n1. **Clear and specific**: Question should be unambiguous\n2. **Concise header**: Max 12 characters for clean display\n3. **Helpful options**: Labels are clear, descriptions explain trade-offs\n4. **Appropriate count**: 2-4 options per question, 1-4 questions per call\n5. **Logical order**: Questions flow naturally\n\n### Error Handling\n\n```markdown\n# Handle AskUserQuestion Responses\n\nAfter calling AskUserQuestion, verify answers received:\n\nIf answers are empty or invalid:\n  Something went wrong gathering responses.\n\n  Please try again or provide configuration manually:\n  [Show alternative approach]\n\n  Exit.\n\nIf answers look correct:\n  Process as expected\n```\n\n### Progressive Disclosure\n\n```markdown\n# Start Simple, Get Detailed as Needed\n\n## Question 1: Setup Type\n\nUse AskUserQuestion:\n\nQuestion: \"How would you like to set up?\"\nHeader: \"Setup type\"\nOptions:\n  - Quick (Use recommended defaults)\n  - Custom (Configure all options)\n  - Guided (Step-by-step with explanations)\n\nIf \"Quick\":\n  Apply defaults, minimal questions\n\nIf \"Custom\":\n  Ask all available configuration questions\n\nIf \"Guided\":\n  Ask questions with extra explanation\n  Provide recommendations along the way\n```\n\n### Multi-Select Guidelines\n\n**Good multi-select use:**\n```markdown\nQuestion: \"Which features do you want to enable?\"\nmultiSelect: true\nOptions:\n  - Logging\n  - Metrics\n  - Alerts\n  - Backups\n\nReason: User might want any combination\n```\n\n**Bad multi-select use:**\n```markdown\nQuestion: \"Which database engine?\"\nmultiSelect: true  // ❌ Should be single-select\n\nReason: Can only use one database engine\n```\n\n## Advanced Patterns\n\n### Validation Loop\n\n```markdown\n---\ndescription: Interactive with validation\nallowed-tools: AskUserQuestion, Bash\n---\n\n# Setup with Validation\n\n## Gather Configuration\n\nUse AskUserQuestion to collect settings.\n\n## Validate Configuration\n\nCheck if configuration is valid:\n- Required dependencies available?\n- Settings compatible with each other?\n- No conflicts detected?\n\nIf validation fails:\n  Show validation errors\n\n  Use AskUserQuestion to ask:\n\n  Question: \"Configuration has issues. What would you like to do?\"\n  Header: \"Next step\"\n  Options:\n    - Fix (Adjust settings to resolve issues)\n    - Override (Proceed despite warnings)\n    - Cancel (Abort setup)\n\n  Based on answer, retry or proceed or exit.\n```\n\n### Build Configuration Incrementally\n\n```markdown\n---\ndescription: Incremental configuration builder\nallowed-tools: AskUserQuestion, Write, Read\n---\n\n# Incremental Setup\n\n## Phase 1: Core Settings\n\nUse AskUserQuestion for core settings.\n\nSave to `.claude/config-partial.yml`\n\n## Phase 2: Review Core Settings\n\nShow user the core settings:\n\nBased on these core settings, you need to configure:\n- [Setting A] (because you chose [X])\n- [Setting B] (because you chose [Y])\n\nReady to continue?\n\n## Phase 3: Detailed Settings\n\nUse AskUserQuestion for settings based on Phase 1 answers.\n\nMerge with core settings.\n\n## Phase 4: Final Review\n\nPresent complete configuration.\n\nUse AskUserQuestion for confirmation:\n\nQuestion: \"Is this configuration correct?\"\nOptions:\n  - Yes (Save and apply)\n  - No (Start over)\n  - Modify (Edit specific settings)\n```\n\n### Dynamic Options Based on Context\n\n```markdown\n---\ndescription: Context-aware questions\nallowed-tools: AskUserQuestion, Bash, Read\n---\n\n# Context-Aware Setup\n\n## Detect Current State\n\nCheck existing configuration:\n- Current language: !`detect-language.sh`\n- Existing frameworks: !`detect-frameworks.sh`\n- Available tools: !`check-tools.sh`\n\n## Ask Context-Appropriate Questions\n\nBased on detected language, ask relevant questions.\n\nIf language is TypeScript:\n\n  Use AskUserQuestion:\n\n  Question: \"Which TypeScript features should we enable?\"\n  Options:\n    - Strict Mode (Maximum type safety)\n    - Decorators (Experimental decorator support)\n    - Path Mapping (Module path aliases)\n\nIf language is Python:\n\n  Use AskUserQuestion:\n\n  Question: \"Which Python tools should we configure?\"\n  Options:\n    - Type Hints (mypy for type checking)\n    - Black (Code formatting)\n    - Pylint (Linting and style)\n\nQuestions adapt to project context.\n```\n\n## Real-World Example: Multi-Agent Swarm Launch\n\n**From multi-agent-swarm plugin:**\n\n```markdown\n---\ndescription: Launch multi-agent swarm\nallowed-tools: AskUserQuestion, Read, Write, Bash\n---\n\n# Launch Multi-Agent Swarm\n\n## Interactive Mode (No Task List Provided)\n\nIf user didn't provide task list file, help create one interactively.\n\n### Question 1: Agent Count\n\nUse AskUserQuestion:\n\nQuestion: \"How many agents should we launch?\"\nHeader: \"Agent count\"\nOptions:\n  - 2 agents (Best for simple projects)\n  - 3 agents (Good for medium projects)\n  - 4 agents (Standard team size)\n  - 6 agents (Large projects)\n  - 8 agents (Complex multi-component projects)\n\n### Question 2: Task Definition Approach\n\nUse AskUserQuestion:\n\nQuestion: \"How would you like to define tasks?\"\nHeader: \"Task setup\"\nOptions:\n  - File (I have a task list file ready)\n  - Guided (Help me create tasks interactively)\n  - Custom (Other approach)\n\nIf \"File\":\n  Ask for file path\n  Validate file exists and has correct format\n\nIf \"Guided\":\n  Enter iterative task creation mode (see below)\n\n### Question 3: Coordination Mode\n\nUse AskUserQuestion:\n\nQuestion: \"How should agents coordinate?\"\nHeader: \"Coordination\"\nOptions:\n  - Team Leader (One agent coordinates others)\n  - Collaborative (Agents coordinate as peers)\n  - Autonomous (Independent work, minimal coordination)\n\n### Iterative Task Creation (If \"Guided\" Selected)\n\nFor each agent (1 to N from Question 1):\n\n**Question A: Agent Name**\nQuestion: \"What should we call agent [number]?\"\nHeader: \"Agent name\"\nOptions:\n  - auth-agent\n  - api-agent\n  - ui-agent\n  - db-agent\n  (Provide relevant suggestions based on common patterns)\n\n**Question B: Task Type**\nQuestion: \"What task for [agent-name]?\"\nHeader: \"Task type\"\nOptions:\n  - Authentication (User auth, JWT, OAuth)\n  - API Endpoints (REST/GraphQL APIs)\n  - UI Components (Frontend components)\n  - Database (Schema, migrations, queries)\n  - Testing (Test suites and coverage)\n  - Documentation (Docs, README, guides)\n\n**Question C: Dependencies**\nQuestion: \"What does [agent-name] depend on?\"\nHeader: \"Dependencies\"\nmultiSelect: true\nOptions:\n  - [List of previously defined agents]\n  - No dependencies\n\n**Question D: Base Branch**\nQuestion: \"Which base branch for PR?\"\nHeader: \"PR base\"\nOptions:\n  - main\n  - staging\n  - develop\n\nStore all task information for each agent.\n\n### Generate Task List File\n\nAfter collecting all agent task details:\n\n1. Ask for project name\n2. Generate task list in proper format\n3. Save to `.daisy/swarm/tasks.md`\n4. Show user the file path\n5. Proceed with launch using generated task list\n```\n\n## Best Practices\n\n### Question Writing\n\n1. **Be specific**: \"Which database?\" not \"Choose option?\"\n2. **Explain trade-offs**: Describe pros/cons in option descriptions\n3. **Provide context**: Question text should stand alone\n4. **Guide decisions**: Help user make informed choice\n5. **Keep concise**: Header max 12 chars, descriptions 1-2 sentences\n\n### Option Design\n\n1. **Meaningful labels**: Specific, clear names\n2. **Informative descriptions**: Explain what each option does\n3. **Show trade-offs**: Help user understand implications\n4. **Consistent detail**: All options equally explained\n5. **2-4 options**: Not too few, not too many\n\n### Flow Design\n\n1. **Logical order**: Questions flow naturally\n2. **Build on previous**: Later questions use earlier answers\n3. **Minimize questions**: Ask only what's needed\n4. **Group related**: Ask related questions together\n5. **Show progress**: Indicate where in flow\n\n### User Experience\n\n1. **Set expectations**: Tell user what to expect\n2. **Explain why**: Help user understand purpose\n3. **Provide defaults**: Suggest recommended options\n4. **Allow escape**: Let user cancel or restart\n5. **Confirm actions**: Summarize before executing\n\n## Common Patterns\n\n### Pattern: Feature Selection\n\n```markdown\nUse AskUserQuestion:\n\nQuestion: \"Which features do you need?\"\nHeader: \"Features\"\nmultiSelect: true\nOptions:\n  - Authentication\n  - Authorization\n  - Rate Limiting\n  - Caching\n```\n\n### Pattern: Environment Configuration\n\n```markdown\nUse AskUserQuestion:\n\nQuestion: \"Which environment is this?\"\nHeader: \"Environment\"\nOptions:\n  - Development (Local development)\n  - Staging (Pre-production testing)\n  - Production (Live environment)\n```\n\n### Pattern: Priority Selection\n\n```markdown\nUse AskUserQuestion:\n\nQuestion: \"What's the priority for this task?\"\nHeader: \"Priority\"\nOptions:\n  - Critical (Must be done immediately)\n  - High (Important, do soon)\n  - Medium (Standard priority)\n  - Low (Nice to have)\n```\n\n### Pattern: Scope Selection\n\n```markdown\nUse AskUserQuestion:\n\nQuestion: \"What scope should we analyze?\"\nHeader: \"Scope\"\nOptions:\n  - Current file (Just this file)\n  - Current directory (All files in directory)\n  - Entire project (Full codebase scan)\n```\n\n## Combining Arguments and Questions\n\n### Use Both Appropriately\n\n**Arguments for known values:**\n```markdown\n---\nargument-hint: [project-name]\nallowed-tools: AskUserQuestion, Write\n---\n\nSetup for project: $1\n\nNow gather additional configuration...\n\nUse AskUserQuestion for options that require explanation.\n```\n\n**Questions for complex choices:**\n```markdown\nProject name from argument: $1\n\nNow use AskUserQuestion to choose:\n- Architecture pattern\n- Technology stack\n- Deployment strategy\n\nThese require explanation, so questions work better than arguments.\n```\n\n## Troubleshooting\n\n**Questions not appearing:**\n- Verify AskUserQuestion in allowed-tools\n- Check question format is correct\n- Ensure options array has 2-4 items\n\n**User can't make selection:**\n- Check option labels are clear\n- Verify descriptions are helpful\n- Consider if too many options\n- Ensure multiSelect setting is correct\n\n**Flow feels confusing:**\n- Reduce number of questions\n- Group related questions\n- Add explanation between stages\n- Show progress through workflow\n\nWith AskUserQuestion, commands become interactive wizards that guide users through complex decisions while maintaining the clarity that simple arguments provide for straightforward inputs.\n",
        "plugins/plugin-dev/skills/command-development/references/marketplace-considerations.md": "# Marketplace Considerations for Commands\n\nGuidelines for creating commands designed for distribution and marketplace success.\n\n## Overview\n\nCommands distributed through marketplaces need additional consideration beyond personal use commands. They must work across environments, handle diverse use cases, and provide excellent user experience for unknown users.\n\n## Design for Distribution\n\n### Universal Compatibility\n\n**Cross-platform considerations:**\n\n```markdown\n---\ndescription: Cross-platform command\nallowed-tools: Bash(*)\n---\n\n# Platform-Aware Command\n\nDetecting platform...\n\ncase \"$(uname)\" in\n  Darwin*)  PLATFORM=\"macOS\" ;;\n  Linux*)   PLATFORM=\"Linux\" ;;\n  MINGW*|MSYS*|CYGWIN*) PLATFORM=\"Windows\" ;;\n  *)        PLATFORM=\"Unknown\" ;;\nesac\n\nPlatform: $PLATFORM\n\n<!-- Adjust behavior based on platform -->\nif [ \"$PLATFORM\" = \"Windows\" ]; then\n  # Windows-specific handling\n  PATH_SEP=\"\\\\\"\n  NULL_DEVICE=\"NUL\"\nelse\n  # Unix-like handling\n  PATH_SEP=\"/\"\n  NULL_DEVICE=\"/dev/null\"\nfi\n\n[Platform-appropriate implementation...]\n```\n\n**Avoid platform-specific commands:**\n\n```markdown\n<!-- BAD: macOS-specific -->\n!`pbcopy < file.txt`\n\n<!-- GOOD: Platform detection -->\nif command -v pbcopy > /dev/null; then\n  pbcopy < file.txt\nelif command -v xclip > /dev/null; then\n  xclip -selection clipboard < file.txt\nelif command -v clip.exe > /dev/null; then\n  cat file.txt | clip.exe\nelse\n  echo \"Clipboard not available on this platform\"\nfi\n```\n\n### Minimal Dependencies\n\n**Check for required tools:**\n\n```markdown\n---\ndescription: Dependency-aware command\nallowed-tools: Bash(*)\n---\n\n# Check Dependencies\n\nRequired tools:\n- git\n- jq\n- node\n\nChecking availability...\n\nMISSING_DEPS=\"\"\n\nfor tool in git jq node; do\n  if ! command -v $tool > /dev/null; then\n    MISSING_DEPS=\"$MISSING_DEPS $tool\"\n  fi\ndone\n\nif [ -n \"$MISSING_DEPS\" ]; then\n  ❌ ERROR: Missing required dependencies:$MISSING_DEPS\n\n  INSTALLATION:\n  - git: https://git-scm.com/downloads\n  - jq: https://stedolan.github.io/jq/download/\n  - node: https://nodejs.org/\n\n  Install missing tools and try again.\n\n  Exit.\nfi\n\n✓ All dependencies available\n\n[Continue with command...]\n```\n\n**Document optional dependencies:**\n\n```markdown\n<!--\nDEPENDENCIES:\n  Required:\n  - git 2.0+: Version control\n  - jq 1.6+: JSON processing\n\n  Optional:\n  - gh: GitHub CLI (for PR operations)\n  - docker: Container operations (for containerized tests)\n\n  Feature availability depends on installed tools.\n-->\n```\n\n### Graceful Degradation\n\n**Handle missing features:**\n\n```markdown\n---\ndescription: Feature-aware command\n---\n\n# Feature Detection\n\nDetecting available features...\n\nFEATURES=\"\"\n\nif command -v gh > /dev/null; then\n  FEATURES=\"$FEATURES github\"\nfi\n\nif command -v docker > /dev/null; then\n  FEATURES=\"$FEATURES docker\"\nfi\n\nAvailable features: $FEATURES\n\nif echo \"$FEATURES\" | grep -q \"github\"; then\n  # Full functionality with GitHub integration\n  echo \"✓ GitHub integration available\"\nelse\n  # Reduced functionality without GitHub\n  echo \"⚠ Limited functionality: GitHub CLI not installed\"\n  echo \"  Install 'gh' for full features\"\nfi\n\n[Adapt behavior based on available features...]\n```\n\n## User Experience for Unknown Users\n\n### Clear Onboarding\n\n**First-run experience:**\n\n```markdown\n---\ndescription: Command with onboarding\nallowed-tools: Read, Write\n---\n\n# First Run Check\n\nif [ ! -f \".claude/command-initialized\" ]; then\n  **Welcome to Command Name!**\n\n  This appears to be your first time using this command.\n\n  WHAT THIS COMMAND DOES:\n  [Brief explanation of purpose and benefits]\n\n  QUICK START:\n  1. Basic usage: /command [arg]\n  2. For help: /command help\n  3. Examples: /command examples\n\n  SETUP:\n  No additional setup required. You're ready to go!\n\n  ✓ Initialization complete\n\n  [Create initialization marker]\n\n  Ready to proceed with your request...\nfi\n\n[Normal command execution...]\n```\n\n**Progressive feature discovery:**\n\n```markdown\n---\ndescription: Command with tips\n---\n\n# Command Execution\n\n[Main functionality...]\n\n---\n\n💡 TIP: Did you know?\n\nYou can speed up this command with the --fast flag:\n  /command --fast [args]\n\nFor more tips: /command tips\n```\n\n### Comprehensive Error Handling\n\n**Anticipate user mistakes:**\n\n```markdown\n---\ndescription: Forgiving command\n---\n\n# User Input Handling\n\nArgument: \"$1\"\n\n<!-- Check for common typos -->\nif [ \"$1\" = \"hlep\" ] || [ \"$1\" = \"hepl\" ]; then\n  Did you mean: help?\n\n  Showing help instead...\n  [Display help]\n\n  Exit.\nfi\n\n<!-- Suggest similar commands if not found -->\nif [ \"$1\" != \"valid-option1\" ] && [ \"$1\" != \"valid-option2\" ]; then\n  ❌ Unknown option: $1\n\n  Did you mean:\n  - valid-option1 (most similar)\n  - valid-option2\n\n  For all options: /command help\n\n  Exit.\nfi\n\n[Command continues...]\n```\n\n**Helpful diagnostics:**\n\n```markdown\n---\ndescription: Diagnostic command\n---\n\n# Operation Failed\n\nThe operation could not complete.\n\n**Diagnostic Information:**\n\nEnvironment:\n- Platform: $(uname)\n- Shell: $SHELL\n- Working directory: $(pwd)\n- Command: /command $@\n\nChecking common issues:\n- Git repository: $(git rev-parse --git-dir 2>&1)\n- Write permissions: $(test -w . && echo \"OK\" || echo \"DENIED\")\n- Required files: $(test -f config.yml && echo \"Found\" || echo \"Missing\")\n\nThis information helps debug the issue.\n\nFor support, include the above diagnostics.\n```\n\n## Distribution Best Practices\n\n### Namespace Awareness\n\n**Avoid name collisions:**\n\n```markdown\n---\ndescription: Namespaced command\n---\n\n<!--\nCOMMAND NAME: plugin-name-command\n\nThis command is namespaced with the plugin name to avoid\nconflicts with commands from other plugins.\n\nAlternative naming approaches:\n- Use plugin prefix: /plugin-command\n- Use category: /category-command\n- Use verb-noun: /verb-noun\n\nChosen approach: plugin-name prefix\nReasoning: Clearest ownership, least likely to conflict\n-->\n\n# Plugin Name Command\n\n[Implementation...]\n```\n\n**Document naming rationale:**\n\n```markdown\n<!--\nNAMING DECISION:\n\nCommand name: /deploy-app\n\nAlternatives considered:\n- /deploy: Too generic, likely conflicts\n- /app-deploy: Less intuitive ordering\n- /my-plugin-deploy: Too verbose\n\nFinal choice balances:\n- Discoverability (clear purpose)\n- Brevity (easy to type)\n- Uniqueness (unlikely conflicts)\n-->\n```\n\n### Configurability\n\n**User preferences:**\n\n```markdown\n---\ndescription: Configurable command\nallowed-tools: Read\n---\n\n# Load User Configuration\n\nDefault configuration:\n- verbose: false\n- color: true\n- max_results: 10\n\nChecking for user config: .claude/plugin-name.local.md\n\nif [ -f \".claude/plugin-name.local.md\" ]; then\n  # Parse YAML frontmatter for settings\n  VERBOSE=$(grep \"^verbose:\" .claude/plugin-name.local.md | cut -d: -f2 | tr -d ' ')\n  COLOR=$(grep \"^color:\" .claude/plugin-name.local.md | cut -d: -f2 | tr -d ' ')\n  MAX_RESULTS=$(grep \"^max_results:\" .claude/plugin-name.local.md | cut -d: -f2 | tr -d ' ')\n\n  echo \"✓ Using user configuration\"\nelse\n  echo \"Using default configuration\"\n  echo \"Create .claude/plugin-name.local.md to customize\"\nfi\n\n[Use configuration in command...]\n```\n\n**Sensible defaults:**\n\n```markdown\n---\ndescription: Command with smart defaults\n---\n\n# Smart Defaults\n\nConfiguration:\n- Format: ${FORMAT:-json}  # Defaults to json\n- Output: ${OUTPUT:-stdout}  # Defaults to stdout\n- Verbose: ${VERBOSE:-false}  # Defaults to false\n\nThese defaults work for 80% of use cases.\n\nOverride with arguments:\n  /command --format yaml --output file.txt --verbose\n\nOr set in .claude/plugin-name.local.md:\n\\`\\`\\`yaml\n---\nformat: yaml\noutput: custom.txt\nverbose: true\n---\n\\`\\`\\`\n```\n\n### Version Compatibility\n\n**Version checking:**\n\n```markdown\n---\ndescription: Version-aware command\n---\n\n<!--\nCOMMAND VERSION: 2.1.0\n\nCOMPATIBILITY:\n- Requires plugin version: >= 2.0.0\n- Breaking changes from v1.x documented in MIGRATION.md\n\nVERSION HISTORY:\n- v2.1.0: Added --new-feature flag\n- v2.0.0: BREAKING: Changed argument order\n- v1.0.0: Initial release\n-->\n\n# Version Check\n\nCommand version: 2.1.0\nPlugin version: [detect from plugin.json]\n\nif [  \"$PLUGIN_VERSION\" < \"2.0.0\" ]; then\n  ❌ ERROR: Incompatible plugin version\n\n  This command requires plugin version >= 2.0.0\n  Current version: $PLUGIN_VERSION\n\n  Update plugin:\n    /plugin update plugin-name\n\n  Exit.\nfi\n\n✓ Version compatible\n\n[Command continues...]\n```\n\n**Deprecation warnings:**\n\n```markdown\n---\ndescription: Command with deprecation warnings\n---\n\n# Deprecation Check\n\nif [ \"$1\" = \"--old-flag\" ]; then\n  ⚠️  DEPRECATION WARNING\n\n  The --old-flag option is deprecated as of v2.0.0\n  It will be removed in v3.0.0 (est. June 2025)\n\n  Use instead: --new-flag\n\n  Example:\n    Old: /command --old-flag value\n    New: /command --new-flag value\n\n  See migration guide: /command migrate\n\n  Continuing with deprecated behavior for now...\nfi\n\n[Handle both old and new flags during deprecation period...]\n```\n\n## Marketplace Presentation\n\n### Command Discovery\n\n**Descriptive naming:**\n\n```markdown\n---\ndescription: Review pull request with security and quality checks\n---\n\n<!-- GOOD: Descriptive name and description -->\n```\n\n```markdown\n---\ndescription: Do the thing\n---\n\n<!-- BAD: Vague description -->\n```\n\n**Searchable keywords:**\n\n```markdown\n<!--\nKEYWORDS: security, code-review, quality, validation, audit\n\nThese keywords help users discover this command when searching\nfor related functionality in the marketplace.\n-->\n```\n\n### Showcase Examples\n\n**Compelling demonstrations:**\n\n```markdown\n---\ndescription: Advanced code analysis command\n---\n\n# Code Analysis Command\n\nThis command performs deep code analysis with actionable insights.\n\n## Demo: Quick Security Audit\n\nTry it now:\n\\`\\`\\`\n/analyze-code src/ --security\n\\`\\`\\`\n\n**What you'll get:**\n- Security vulnerability detection\n- Code quality metrics\n- Performance bottleneck identification\n- Actionable recommendations\n\n**Sample output:**\n\\`\\`\\`\nSecurity Analysis Results\n=========================\n\n🔴 Critical (2):\n  - SQL injection risk in users.js:45\n  - XSS vulnerability in display.js:23\n\n🟡 Warnings (5):\n  - Unvalidated input in api.js:67\n  ...\n\nRecommendations:\n1. Fix critical issues immediately\n2. Review warnings before next release\n3. Run /analyze-code --fix for auto-fixes\n\\`\\`\\`\n\n---\n\nReady to analyze your code...\n\n[Command implementation...]\n```\n\n### User Reviews and Feedback\n\n**Feedback mechanism:**\n\n```markdown\n---\ndescription: Command with feedback\n---\n\n# Command Complete\n\n[Command results...]\n\n---\n\n**How was your experience?**\n\nThis helps improve the command for everyone.\n\nRate this command:\n- 👍 Helpful\n- 👎 Not helpful\n- 🐛 Found a bug\n- 💡 Have a suggestion\n\nReply with an emoji or:\n- /command feedback\n\nYour feedback matters!\n```\n\n**Usage analytics preparation:**\n\n```markdown\n<!--\nANALYTICS NOTES:\n\nTrack for improvement:\n- Most common arguments\n- Failure rates\n- Average execution time\n- User satisfaction scores\n\nPrivacy-preserving:\n- No personally identifiable information\n- Aggregate statistics only\n- User opt-out respected\n-->\n```\n\n## Quality Standards\n\n### Professional Polish\n\n**Consistent branding:**\n\n```markdown\n---\ndescription: Branded command\n---\n\n# ✨ Command Name\n\nPart of the [Plugin Name] suite\n\n[Command functionality...]\n\n---\n\n**Need Help?**\n- Documentation: https://docs.example.com\n- Support: support@example.com\n- Community: https://community.example.com\n\nPowered by Plugin Name v2.1.0\n```\n\n**Attention to detail:**\n\n```markdown\n<!-- Details that matter -->\n\n✓ Use proper emoji/symbols consistently\n✓ Align output columns neatly\n✓ Format numbers with thousands separators\n✓ Use color/formatting appropriately\n✓ Provide progress indicators\n✓ Show estimated time remaining\n✓ Confirm successful operations\n```\n\n### Reliability\n\n**Idempotency:**\n\n```markdown\n---\ndescription: Idempotent command\n---\n\n# Safe Repeated Execution\n\nChecking if operation already completed...\n\nif [ -f \".claude/operation-completed.flag\" ]; then\n  ℹ️  Operation already completed\n\n  Completed at: $(cat .claude/operation-completed.flag)\n\n  To re-run:\n  1. Remove flag: rm .claude/operation-completed.flag\n  2. Run command again\n\n  Otherwise, no action needed.\n\n  Exit.\nfi\n\nPerforming operation...\n\n[Safe, repeatable operation...]\n\nMarking complete...\necho \"$(date)\" > .claude/operation-completed.flag\n```\n\n**Atomic operations:**\n\n```markdown\n---\ndescription: Atomic command\n---\n\n# Atomic Operation\n\nThis operation is atomic - either fully succeeds or fully fails.\n\nCreating temporary workspace...\nTEMP_DIR=$(mktemp -d)\n\nPerforming changes in isolated environment...\n[Make changes in $TEMP_DIR]\n\nif [ $? -eq 0 ]; then\n  ✓ Changes validated\n\n  Applying changes atomically...\n  mv $TEMP_DIR/* ./target/\n\n  ✓ Operation complete\nelse\n  ❌ Changes failed validation\n\n  Rolling back...\n  rm -rf $TEMP_DIR\n\n  No changes applied. Safe to retry.\nfi\n```\n\n## Testing for Distribution\n\n### Pre-Release Checklist\n\n```markdown\n<!--\nPRE-RELEASE CHECKLIST:\n\nFunctionality:\n- [ ] Works on macOS\n- [ ] Works on Linux\n- [ ] Works on Windows (WSL)\n- [ ] All arguments tested\n- [ ] Error cases handled\n- [ ] Edge cases covered\n\nUser Experience:\n- [ ] Clear description\n- [ ] Helpful error messages\n- [ ] Examples provided\n- [ ] First-run experience good\n- [ ] Documentation complete\n\nDistribution:\n- [ ] No hardcoded paths\n- [ ] Dependencies documented\n- [ ] Configuration options clear\n- [ ] Version number set\n- [ ] Changelog updated\n\nQuality:\n- [ ] No TODO comments\n- [ ] No debug code\n- [ ] Performance acceptable\n- [ ] Security reviewed\n- [ ] Privacy considered\n\nSupport:\n- [ ] README complete\n- [ ] Troubleshooting guide\n- [ ] Support contact provided\n- [ ] Feedback mechanism\n- [ ] License specified\n-->\n```\n\n### Beta Testing\n\n**Beta release approach:**\n\n```markdown\n---\ndescription: Beta command (v0.9.0)\n---\n\n# 🧪 Beta Command\n\n**This is a beta release**\n\nFeatures may change based on feedback.\n\nBETA STATUS:\n- Version: 0.9.0\n- Stability: Experimental\n- Support: Limited\n- Feedback: Encouraged\n\nKnown limitations:\n- Performance not optimized\n- Some edge cases not handled\n- Documentation incomplete\n\nHelp improve this command:\n- Report issues: /command report-issue\n- Suggest features: /command suggest\n- Join beta testers: /command join-beta\n\n---\n\n[Command implementation...]\n\n---\n\n**Thank you for beta testing!**\n\nYour feedback helps make this command better.\n```\n\n## Maintenance and Updates\n\n### Update Strategy\n\n**Versioned commands:**\n\n```markdown\n<!--\nVERSION STRATEGY:\n\nMajor (X.0.0): Breaking changes\n- Document all breaking changes\n- Provide migration guide\n- Support old version briefly\n\nMinor (x.Y.0): New features\n- Backward compatible\n- Announce new features\n- Update examples\n\nPatch (x.y.Z): Bug fixes\n- No user-facing changes\n- Update changelog\n- Security fixes prioritized\n\nRelease schedule:\n- Patches: As needed\n- Minors: Monthly\n- Majors: Annually or as needed\n-->\n```\n\n**Update notifications:**\n\n```markdown\n---\ndescription: Update-aware command\n---\n\n# Check for Updates\n\nCurrent version: 2.1.0\nLatest version: [check if available]\n\nif [ \"$CURRENT_VERSION\" != \"$LATEST_VERSION\" ]; then\n  📢 UPDATE AVAILABLE\n\n  New version: $LATEST_VERSION\n  Current: $CURRENT_VERSION\n\n  What's new:\n  - Feature improvements\n  - Bug fixes\n  - Performance enhancements\n\n  Update with:\n    /plugin update plugin-name\n\n  Release notes: https://releases.example.com/v$LATEST_VERSION\nfi\n\n[Command continues...]\n```\n\n## Best Practices Summary\n\n### Distribution Design\n\n1. **Universal**: Works across platforms and environments\n2. **Self-contained**: Minimal dependencies, clear requirements\n3. **Graceful**: Degrades gracefully when features unavailable\n4. **Forgiving**: Anticipates and handles user mistakes\n5. **Helpful**: Clear errors, good defaults, excellent docs\n\n### Marketplace Success\n\n1. **Discoverable**: Clear name, good description, searchable keywords\n2. **Professional**: Polished presentation, consistent branding\n3. **Reliable**: Tested thoroughly, handles edge cases\n4. **Maintainable**: Versioned, updated regularly, supported\n5. **User-focused**: Great UX, responsive to feedback\n\n### Quality Standards\n\n1. **Complete**: Fully documented, all features working\n2. **Tested**: Works in real environments, edge cases handled\n3. **Secure**: No vulnerabilities, safe operations\n4. **Performant**: Reasonable speed, resource-efficient\n5. **Ethical**: Privacy-respecting, user consent\n\nWith these considerations, commands become marketplace-ready and delight users across diverse environments and use cases.\n",
        "plugins/plugin-dev/skills/command-development/references/plugin-features-reference.md": "# Plugin-Specific Command Features Reference\n\nThis reference covers features and patterns specific to commands bundled in Claude Code plugins.\n\n## Table of Contents\n\n- [Plugin Command Discovery](#plugin-command-discovery)\n- [CLAUDE_PLUGIN_ROOT Environment Variable](#claude_plugin_root-environment-variable)\n- [Plugin Command Patterns](#plugin-command-patterns)\n- [Integration with Plugin Components](#integration-with-plugin-components)\n- [Validation Patterns](#validation-patterns)\n\n## Plugin Command Discovery\n\n### Auto-Discovery\n\nClaude Code automatically discovers commands in plugins using the following locations:\n\n```\nplugin-name/\n├── commands/              # Auto-discovered commands\n│   ├── foo.md            # /foo (plugin:plugin-name)\n│   └── bar.md            # /bar (plugin:plugin-name)\n└── plugin.json           # Plugin manifest\n```\n\n**Key points:**\n- Commands are discovered at plugin load time\n- No manual registration required\n- Commands appear in `/help` with \"(plugin:plugin-name)\" label\n- Subdirectories create namespaces\n\n### Namespaced Plugin Commands\n\nOrganize commands in subdirectories for logical grouping:\n\n```\nplugin-name/\n└── commands/\n    ├── review/\n    │   ├── security.md    # /security (plugin:plugin-name:review)\n    │   └── style.md       # /style (plugin:plugin-name:review)\n    └── deploy/\n        ├── staging.md     # /staging (plugin:plugin-name:deploy)\n        └── prod.md        # /prod (plugin:plugin-name:deploy)\n```\n\n**Namespace behavior:**\n- Subdirectory name becomes namespace\n- Shown as \"(plugin:plugin-name:namespace)\" in `/help`\n- Helps organize related commands\n- Use when plugin has 5+ commands\n\n### Command Naming Conventions\n\n**Plugin command names should:**\n1. Be descriptive and action-oriented\n2. Avoid conflicts with common command names\n3. Use hyphens for multi-word names\n4. Consider prefixing with plugin name for uniqueness\n\n**Examples:**\n```\nGood:\n- /mylyn-sync          (plugin-specific prefix)\n- /analyze-performance (descriptive action)\n- /docker-compose-up   (clear purpose)\n\nAvoid:\n- /test               (conflicts with common name)\n- /run                (too generic)\n- /do-stuff           (not descriptive)\n```\n\n## CLAUDE_PLUGIN_ROOT Environment Variable\n\n### Purpose\n\n`${CLAUDE_PLUGIN_ROOT}` is a special environment variable available in plugin commands that resolves to the absolute path of the plugin directory.\n\n**Why it matters:**\n- Enables portable paths within plugin\n- Allows referencing plugin files and scripts\n- Works across different installations\n- Essential for multi-file plugin operations\n\n### Basic Usage\n\nReference files within your plugin:\n\n```markdown\n---\ndescription: Analyze using plugin script\nallowed-tools: Bash(node:*), Read\n---\n\nRun analysis: !`node ${CLAUDE_PLUGIN_ROOT}/scripts/analyze.js`\n\nRead template: @${CLAUDE_PLUGIN_ROOT}/templates/report.md\n```\n\n**Expands to:**\n```\nRun analysis: !`node /path/to/plugins/plugin-name/scripts/analyze.js`\n\nRead template: @/path/to/plugins/plugin-name/templates/report.md\n```\n\n### Common Patterns\n\n#### 1. Executing Plugin Scripts\n\n```markdown\n---\ndescription: Run custom linter from plugin\nallowed-tools: Bash(node:*)\n---\n\nLint results: !`node ${CLAUDE_PLUGIN_ROOT}/bin/lint.js $1`\n\nReview the linting output and suggest fixes.\n```\n\n#### 2. Loading Configuration Files\n\n```markdown\n---\ndescription: Deploy using plugin configuration\nallowed-tools: Read, Bash(*)\n---\n\nConfiguration: @${CLAUDE_PLUGIN_ROOT}/config/deploy-config.json\n\nDeploy application using the configuration above for $1 environment.\n```\n\n#### 3. Accessing Plugin Resources\n\n```markdown\n---\ndescription: Generate report from template\n---\n\nUse this template: @${CLAUDE_PLUGIN_ROOT}/templates/api-report.md\n\nGenerate a report for @$1 following the template format.\n```\n\n#### 4. Multi-Step Plugin Workflows\n\n```markdown\n---\ndescription: Complete plugin workflow\nallowed-tools: Bash(*), Read\n---\n\nStep 1 - Prepare: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/prepare.sh $1`\nStep 2 - Config: @${CLAUDE_PLUGIN_ROOT}/config/$1.json\nStep 3 - Execute: !`${CLAUDE_PLUGIN_ROOT}/bin/execute $1`\n\nReview results and report status.\n```\n\n### Best Practices\n\n1. **Always use for plugin-internal paths:**\n   ```markdown\n   # Good\n   @${CLAUDE_PLUGIN_ROOT}/templates/foo.md\n\n   # Bad\n   @./templates/foo.md  # Relative to current directory, not plugin\n   ```\n\n2. **Validate file existence:**\n   ```markdown\n   ---\n   description: Use plugin config if exists\n   allowed-tools: Bash(test:*), Read\n   ---\n\n   !`test -f ${CLAUDE_PLUGIN_ROOT}/config.json && echo \"exists\" || echo \"missing\"`\n\n   If config exists, load it: @${CLAUDE_PLUGIN_ROOT}/config.json\n   Otherwise, use defaults...\n   ```\n\n3. **Document plugin file structure:**\n   ```markdown\n   <!--\n   Plugin structure:\n   ${CLAUDE_PLUGIN_ROOT}/\n   ├── scripts/analyze.js  (analysis script)\n   ├── templates/          (report templates)\n   └── config/             (configuration files)\n   -->\n   ```\n\n4. **Combine with arguments:**\n   ```markdown\n   Run: !`${CLAUDE_PLUGIN_ROOT}/bin/process.sh $1 $2`\n   ```\n\n### Troubleshooting\n\n**Variable not expanding:**\n- Ensure command is loaded from plugin\n- Check bash execution is allowed\n- Verify syntax is exact: `${CLAUDE_PLUGIN_ROOT}`\n\n**File not found errors:**\n- Verify file exists in plugin directory\n- Check file path is correct relative to plugin root\n- Ensure file permissions allow reading/execution\n\n**Path with spaces:**\n- Bash commands automatically handle spaces\n- File references work with spaces in paths\n- No special quoting needed\n\n## Plugin Command Patterns\n\n### Pattern 1: Configuration-Based Commands\n\nCommands that load plugin-specific configuration:\n\n```markdown\n---\ndescription: Deploy using plugin settings\nallowed-tools: Read, Bash(*)\n---\n\nLoad configuration: @${CLAUDE_PLUGIN_ROOT}/deploy-config.json\n\nDeploy to $1 environment using:\n1. Configuration settings above\n2. Current git branch: !`git branch --show-current`\n3. Application version: !`cat package.json | grep version`\n\nExecute deployment and monitor progress.\n```\n\n**When to use:** Commands that need consistent settings across invocations\n\n### Pattern 2: Template-Based Generation\n\nCommands that use plugin templates:\n\n```markdown\n---\ndescription: Generate documentation from template\nargument-hint: [component-name]\n---\n\nTemplate: @${CLAUDE_PLUGIN_ROOT}/templates/component-docs.md\n\nGenerate documentation for $1 component following the template structure.\nInclude:\n- Component purpose and usage\n- API reference\n- Examples\n- Testing guidelines\n```\n\n**When to use:** Standardized output generation\n\n### Pattern 3: Multi-Script Workflow\n\nCommands that orchestrate multiple plugin scripts:\n\n```markdown\n---\ndescription: Complete build and test workflow\nallowed-tools: Bash(*)\n---\n\nBuild: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh`\nValidate: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh`\nTest: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/test.sh`\n\nReview all outputs and report:\n1. Build status\n2. Validation results\n3. Test results\n4. Recommended next steps\n```\n\n**When to use:** Complex plugin workflows with multiple steps\n\n### Pattern 4: Environment-Aware Commands\n\nCommands that adapt to environment:\n\n```markdown\n---\ndescription: Deploy based on environment\nargument-hint: [dev|staging|prod]\n---\n\nEnvironment config: @${CLAUDE_PLUGIN_ROOT}/config/$1.json\n\nEnvironment check: !`echo \"Deploying to: $1\"`\n\nDeploy application using $1 environment configuration.\nVerify deployment and run smoke tests.\n```\n\n**When to use:** Commands that behave differently per environment\n\n### Pattern 5: Plugin Data Management\n\nCommands that manage plugin-specific data:\n\n```markdown\n---\ndescription: Save analysis results to plugin cache\nallowed-tools: Bash(*), Read, Write\n---\n\nCache directory: ${CLAUDE_PLUGIN_ROOT}/cache/\n\nAnalyze @$1 and save results to cache:\n!`mkdir -p ${CLAUDE_PLUGIN_ROOT}/cache && date > ${CLAUDE_PLUGIN_ROOT}/cache/last-run.txt`\n\nStore analysis for future reference and comparison.\n```\n\n**When to use:** Commands that need persistent data storage\n\n## Integration with Plugin Components\n\n### Invoking Plugin Agents\n\nCommands can trigger plugin agents using the Task tool:\n\n```markdown\n---\ndescription: Deep analysis using plugin agent\nargument-hint: [file-path]\n---\n\nInitiate deep code analysis of @$1 using the code-analyzer agent.\n\nThe agent will:\n1. Analyze code structure\n2. Identify patterns\n3. Suggest improvements\n4. Generate detailed report\n\nNote: This uses the Task tool to launch the plugin's code-analyzer agent.\n```\n\n**Key points:**\n- Agent must be defined in plugin's `agents/` directory\n- Claude will automatically use Task tool to launch agent\n- Agent has access to same plugin resources\n\n### Invoking Plugin Skills\n\nCommands can reference plugin skills for specialized knowledge:\n\n```markdown\n---\ndescription: API documentation with best practices\nargument-hint: [api-file]\n---\n\nDocument the API in @$1 following our API documentation standards.\n\nUse the api-docs-standards skill to ensure documentation includes:\n- Endpoint descriptions\n- Parameter specifications\n- Response formats\n- Error codes\n- Usage examples\n\nNote: This leverages the plugin's api-docs-standards skill for consistency.\n```\n\n**Key points:**\n- Skill must be defined in plugin's `skills/` directory\n- Mention skill by name to hint Claude should invoke it\n- Skills provide specialized domain knowledge\n\n### Coordinating with Plugin Hooks\n\nCommands can be designed to work with plugin hooks:\n\n```markdown\n---\ndescription: Commit with pre-commit validation\nallowed-tools: Bash(git:*)\n---\n\nStage changes: !\\`git add $1\\`\n\nCommit changes: !\\`git commit -m \"$2\"\\`\n\nNote: This commit will trigger the plugin's pre-commit hook for validation.\nReview hook output for any issues.\n```\n\n**Key points:**\n- Hooks execute automatically on events\n- Commands can prepare state for hooks\n- Document hook interaction in command\n\n### Multi-Component Plugin Commands\n\nCommands that coordinate multiple plugin components:\n\n```markdown\n---\ndescription: Comprehensive code review workflow\nargument-hint: [file-path]\n---\n\nFile to review: @$1\n\nExecute comprehensive review:\n\n1. **Static Analysis** (via plugin scripts)\n   !`node ${CLAUDE_PLUGIN_ROOT}/scripts/lint.js $1`\n\n2. **Deep Review** (via plugin agent)\n   Launch the code-reviewer agent for detailed analysis.\n\n3. **Best Practices** (via plugin skill)\n   Use the code-standards skill to ensure compliance.\n\n4. **Documentation** (via plugin template)\n   Template: @${CLAUDE_PLUGIN_ROOT}/templates/review-report.md\n\nGenerate final report combining all outputs.\n```\n\n**When to use:** Complex workflows leveraging multiple plugin capabilities\n\n## Validation Patterns\n\n### Input Validation\n\nCommands should validate inputs before processing:\n\n```markdown\n---\ndescription: Deploy to environment with validation\nargument-hint: [environment]\n---\n\nValidate environment: !`echo \"$1\" | grep -E \"^(dev|staging|prod)$\" || echo \"INVALID\"`\n\n$IF($1 in [dev, staging, prod],\n  Deploy to $1 environment using validated configuration,\n  ERROR: Invalid environment '$1'. Must be one of: dev, staging, prod\n)\n```\n\n**Validation approaches:**\n1. Bash validation using grep/test\n2. Inline validation in prompt\n3. Script-based validation\n\n### File Existence Checks\n\nVerify required files exist:\n\n```markdown\n---\ndescription: Process configuration file\nargument-hint: [config-file]\n---\n\nCheck file: !`test -f $1 && echo \"EXISTS\" || echo \"MISSING\"`\n\nProcess configuration if file exists: @$1\n\nIf file doesn't exist, explain:\n- Expected location\n- Required format\n- How to create it\n```\n\n### Required Arguments\n\nValidate required arguments provided:\n\n```markdown\n---\ndescription: Create deployment with version\nargument-hint: [environment] [version]\n---\n\nValidate inputs: !`test -n \"$1\" -a -n \"$2\" && echo \"OK\" || echo \"MISSING\"`\n\n$IF($1 AND $2,\n  Deploy version $2 to $1 environment,\n  ERROR: Both environment and version required. Usage: /deploy [env] [version]\n)\n```\n\n### Plugin Resource Validation\n\nVerify plugin resources available:\n\n```markdown\n---\ndescription: Run analysis with plugin tools\nallowed-tools: Bash(test:*)\n---\n\nValidate plugin setup:\n- Config exists: !`test -f ${CLAUDE_PLUGIN_ROOT}/config.json && echo \"✓\" || echo \"✗\"`\n- Scripts exist: !`test -d ${CLAUDE_PLUGIN_ROOT}/scripts && echo \"✓\" || echo \"✗\"`\n- Tools available: !`test -x ${CLAUDE_PLUGIN_ROOT}/bin/analyze && echo \"✓\" || echo \"✗\"`\n\nIf all checks pass, proceed with analysis.\nOtherwise, report missing components and installation steps.\n```\n\n### Output Validation\n\nValidate command execution results:\n\n```markdown\n---\ndescription: Build and validate output\nallowed-tools: Bash(*)\n---\n\nBuild: !`bash ${CLAUDE_PLUGIN_ROOT}/scripts/build.sh`\n\nValidate output:\n- Exit code: !`echo $?`\n- Output exists: !`test -d dist && echo \"✓\" || echo \"✗\"`\n- File count: !`find dist -type f | wc -l`\n\nReport build status and any validation failures.\n```\n\n### Graceful Error Handling\n\nHandle errors gracefully with helpful messages:\n\n```markdown\n---\ndescription: Process file with error handling\nargument-hint: [file-path]\n---\n\nTry processing: !`node ${CLAUDE_PLUGIN_ROOT}/scripts/process.js $1 2>&1 || echo \"ERROR: $?\"`\n\nIf processing succeeded:\n- Report results\n- Suggest next steps\n\nIf processing failed:\n- Explain likely causes\n- Provide troubleshooting steps\n- Suggest alternative approaches\n```\n\n## Best Practices Summary\n\n### Plugin Commands Should:\n\n1. **Use ${CLAUDE_PLUGIN_ROOT} for all plugin-internal paths**\n   - Scripts, templates, configuration, resources\n\n2. **Validate inputs early**\n   - Check required arguments\n   - Verify file existence\n   - Validate argument formats\n\n3. **Document plugin structure**\n   - Explain required files\n   - Document script purposes\n   - Clarify dependencies\n\n4. **Integrate with plugin components**\n   - Reference agents for complex tasks\n   - Use skills for specialized knowledge\n   - Coordinate with hooks when relevant\n\n5. **Provide helpful error messages**\n   - Explain what went wrong\n   - Suggest how to fix\n   - Offer alternatives\n\n6. **Handle edge cases**\n   - Missing files\n   - Invalid arguments\n   - Failed script execution\n   - Missing dependencies\n\n7. **Keep commands focused**\n   - One clear purpose per command\n   - Delegate complex logic to scripts\n   - Use agents for multi-step workflows\n\n8. **Test across installations**\n   - Verify paths work everywhere\n   - Test with different arguments\n   - Validate error cases\n\n---\n\nFor general command development, see main SKILL.md.\nFor command examples, see examples/ directory.\n",
        "plugins/plugin-dev/skills/command-development/references/testing-strategies.md": "# Command Testing Strategies\n\nComprehensive strategies for testing slash commands before deployment and distribution.\n\n## Overview\n\nTesting commands ensures they work correctly, handle edge cases, and provide good user experience. A systematic testing approach catches issues early and builds confidence in command reliability.\n\n## Testing Levels\n\n### Level 1: Syntax and Structure Validation\n\n**What to test:**\n- YAML frontmatter syntax\n- Markdown format\n- File location and naming\n\n**How to test:**\n\n```bash\n# Validate YAML frontmatter\nhead -n 20 .claude/commands/my-command.md | grep -A 10 \"^---\"\n\n# Check for closing frontmatter marker\nhead -n 20 .claude/commands/my-command.md | grep -c \"^---\" # Should be 2\n\n# Verify file has .md extension\nls .claude/commands/*.md\n\n# Check file is in correct location\ntest -f .claude/commands/my-command.md && echo \"Found\" || echo \"Missing\"\n```\n\n**Automated validation script:**\n\n```bash\n#!/bin/bash\n# validate-command.sh\n\nCOMMAND_FILE=\"$1\"\n\nif [ ! -f \"$COMMAND_FILE\" ]; then\n  echo \"ERROR: File not found: $COMMAND_FILE\"\n  exit 1\nfi\n\n# Check .md extension\nif [[ ! \"$COMMAND_FILE\" =~ \\.md$ ]]; then\n  echo \"ERROR: File must have .md extension\"\n  exit 1\nfi\n\n# Validate YAML frontmatter if present\nif head -n 1 \"$COMMAND_FILE\" | grep -q \"^---\"; then\n  # Count frontmatter markers\n  MARKERS=$(head -n 50 \"$COMMAND_FILE\" | grep -c \"^---\")\n  if [ \"$MARKERS\" -ne 2 ]; then\n    echo \"ERROR: Invalid YAML frontmatter (need exactly 2 '---' markers)\"\n    exit 1\n  fi\n  echo \"✓ YAML frontmatter syntax valid\"\nfi\n\n# Check for empty file\nif [ ! -s \"$COMMAND_FILE\" ]; then\n  echo \"ERROR: File is empty\"\n  exit 1\nfi\n\necho \"✓ Command file structure valid\"\n```\n\n### Level 2: Frontmatter Field Validation\n\n**What to test:**\n- Field types correct\n- Values in valid ranges\n- Required fields present (if any)\n\n**Validation script:**\n\n```bash\n#!/bin/bash\n# validate-frontmatter.sh\n\nCOMMAND_FILE=\"$1\"\n\n# Extract YAML frontmatter\nFRONTMATTER=$(sed -n '/^---$/,/^---$/p' \"$COMMAND_FILE\" | sed '1d;$d')\n\nif [ -z \"$FRONTMATTER\" ]; then\n  echo \"No frontmatter to validate\"\n  exit 0\nfi\n\n# Check 'model' field if present\nif echo \"$FRONTMATTER\" | grep -q \"^model:\"; then\n  MODEL=$(echo \"$FRONTMATTER\" | grep \"^model:\" | cut -d: -f2 | tr -d ' ')\n  if ! echo \"sonnet opus haiku\" | grep -qw \"$MODEL\"; then\n    echo \"ERROR: Invalid model '$MODEL' (must be sonnet, opus, or haiku)\"\n    exit 1\n  fi\n  echo \"✓ Model field valid: $MODEL\"\nfi\n\n# Check 'allowed-tools' field format\nif echo \"$FRONTMATTER\" | grep -q \"^allowed-tools:\"; then\n  echo \"✓ allowed-tools field present\"\n  # Could add more sophisticated validation here\nfi\n\n# Check 'description' length\nif echo \"$FRONTMATTER\" | grep -q \"^description:\"; then\n  DESC=$(echo \"$FRONTMATTER\" | grep \"^description:\" | cut -d: -f2-)\n  LENGTH=${#DESC}\n  if [ \"$LENGTH\" -gt 80 ]; then\n    echo \"WARNING: Description length $LENGTH (recommend < 60 chars)\"\n  else\n    echo \"✓ Description length acceptable: $LENGTH chars\"\n  fi\nfi\n\necho \"✓ Frontmatter fields valid\"\n```\n\n### Level 3: Manual Command Invocation\n\n**What to test:**\n- Command appears in `/help`\n- Command executes without errors\n- Output is as expected\n\n**Test procedure:**\n\n```bash\n# 1. Start Claude Code\nclaude --debug\n\n# 2. Check command appears in help\n> /help\n# Look for your command in the list\n\n# 3. Invoke command without arguments\n> /my-command\n# Check for reasonable error or behavior\n\n# 4. Invoke with valid arguments\n> /my-command arg1 arg2\n# Verify expected behavior\n\n# 5. Check debug logs\ntail -f ~/.claude/debug-logs/latest\n# Look for errors or warnings\n```\n\n### Level 4: Argument Testing\n\n**What to test:**\n- Positional arguments work ($1, $2, etc.)\n- $ARGUMENTS captures all arguments\n- Missing arguments handled gracefully\n- Invalid arguments detected\n\n**Test matrix:**\n\n| Test Case | Command | Expected Result |\n|-----------|---------|-----------------|\n| No args | `/cmd` | Graceful handling or useful message |\n| One arg | `/cmd arg1` | $1 substituted correctly |\n| Two args | `/cmd arg1 arg2` | $1 and $2 substituted |\n| Extra args | `/cmd a b c d` | All captured or extras ignored appropriately |\n| Special chars | `/cmd \"arg with spaces\"` | Quotes handled correctly |\n| Empty arg | `/cmd \"\"` | Empty string handled |\n\n**Test script:**\n\n```bash\n#!/bin/bash\n# test-command-arguments.sh\n\nCOMMAND=\"$1\"\n\necho \"Testing argument handling for /$COMMAND\"\necho\n\necho \"Test 1: No arguments\"\necho \"  Command: /$COMMAND\"\necho \"  Expected: [describe expected behavior]\"\necho \"  Manual test required\"\necho\n\necho \"Test 2: Single argument\"\necho \"  Command: /$COMMAND test-value\"\necho \"  Expected: 'test-value' appears in output\"\necho \"  Manual test required\"\necho\n\necho \"Test 3: Multiple arguments\"\necho \"  Command: /$COMMAND arg1 arg2 arg3\"\necho \"  Expected: All arguments used appropriately\"\necho \"  Manual test required\"\necho\n\necho \"Test 4: Special characters\"\necho \"  Command: /$COMMAND \\\"value with spaces\\\"\"\necho \"  Expected: Entire phrase captured\"\necho \"  Manual test required\"\n```\n\n### Level 5: File Reference Testing\n\n**What to test:**\n- @ syntax loads file contents\n- Non-existent files handled\n- Large files handled appropriately\n- Multiple file references work\n\n**Test procedure:**\n\n```bash\n# Create test files\necho \"Test content\" > /tmp/test-file.txt\necho \"Second file\" > /tmp/test-file-2.txt\n\n# Test single file reference\n> /my-command /tmp/test-file.txt\n# Verify file content is read\n\n# Test non-existent file\n> /my-command /tmp/nonexistent.txt\n# Verify graceful error handling\n\n# Test multiple files\n> /my-command /tmp/test-file.txt /tmp/test-file-2.txt\n# Verify both files processed\n\n# Test large file\ndd if=/dev/zero of=/tmp/large-file.bin bs=1M count=100\n> /my-command /tmp/large-file.bin\n# Verify reasonable behavior (may truncate or warn)\n\n# Cleanup\nrm /tmp/test-file*.txt /tmp/large-file.bin\n```\n\n### Level 6: Bash Execution Testing\n\n**What to test:**\n- !` commands execute correctly\n- Command output included in prompt\n- Command failures handled\n- Security: only allowed commands run\n\n**Test procedure:**\n\n```bash\n# Create test command with bash execution\ncat > .claude/commands/test-bash.md << 'EOF'\n---\ndescription: Test bash execution\nallowed-tools: Bash(echo:*), Bash(date:*)\n---\n\nCurrent date: !`date`\nTest output: !`echo \"Hello from bash\"`\n\nAnalysis of output above...\nEOF\n\n# Test in Claude Code\n> /test-bash\n# Verify:\n# 1. Date appears correctly\n# 2. Echo output appears\n# 3. No errors in debug logs\n\n# Test with disallowed command (should fail or be blocked)\ncat > .claude/commands/test-forbidden.md << 'EOF'\n---\ndescription: Test forbidden command\nallowed-tools: Bash(echo:*)\n---\n\nTrying forbidden: !`ls -la /`\nEOF\n\n> /test-forbidden\n# Verify: Permission denied or appropriate error\n```\n\n### Level 7: Integration Testing\n\n**What to test:**\n- Commands work with other plugin components\n- Commands interact correctly with each other\n- State management works across invocations\n- Workflow commands execute in sequence\n\n**Test scenarios:**\n\n**Scenario 1: Command + Hook Integration**\n\n```bash\n# Setup: Command that triggers a hook\n# Test: Invoke command, verify hook executes\n\n# Command: .claude/commands/risky-operation.md\n# Hook: PreToolUse that validates the operation\n\n> /risky-operation\n# Verify: Hook executes and validates before command completes\n```\n\n**Scenario 2: Command Sequence**\n\n```bash\n# Setup: Multi-command workflow\n> /workflow-init\n# Verify: State file created\n\n> /workflow-step2\n# Verify: State file read, step 2 executes\n\n> /workflow-complete\n# Verify: State file cleaned up\n```\n\n**Scenario 3: Command + MCP Integration**\n\n```bash\n# Setup: Command uses MCP tools\n# Test: Verify MCP server accessible\n\n> /mcp-command\n# Verify:\n# 1. MCP server starts (if stdio)\n# 2. Tool calls succeed\n# 3. Results included in output\n```\n\n## Automated Testing Approaches\n\n### Command Test Suite\n\nCreate a test suite script:\n\n```bash\n#!/bin/bash\n# test-commands.sh - Command test suite\n\nTEST_DIR=\".claude/commands\"\nFAILED_TESTS=0\n\necho \"Command Test Suite\"\necho \"==================\"\necho\n\nfor cmd_file in \"$TEST_DIR\"/*.md; do\n  cmd_name=$(basename \"$cmd_file\" .md)\n  echo \"Testing: $cmd_name\"\n\n  # Validate structure\n  if ./validate-command.sh \"$cmd_file\"; then\n    echo \"  ✓ Structure valid\"\n  else\n    echo \"  ✗ Structure invalid\"\n    ((FAILED_TESTS++))\n  fi\n\n  # Validate frontmatter\n  if ./validate-frontmatter.sh \"$cmd_file\"; then\n    echo \"  ✓ Frontmatter valid\"\n  else\n    echo \"  ✗ Frontmatter invalid\"\n    ((FAILED_TESTS++))\n  fi\n\n  echo\ndone\n\necho \"==================\"\necho \"Tests complete\"\necho \"Failed: $FAILED_TESTS\"\n\nexit $FAILED_TESTS\n```\n\n### Pre-Commit Hook\n\nValidate commands before committing:\n\n```bash\n#!/bin/bash\n# .git/hooks/pre-commit\n\necho \"Validating commands...\"\n\nCOMMANDS_CHANGED=$(git diff --cached --name-only | grep \"\\.claude/commands/.*\\.md\")\n\nif [ -z \"$COMMANDS_CHANGED\" ]; then\n  echo \"No commands changed\"\n  exit 0\nfi\n\nfor cmd in $COMMANDS_CHANGED; do\n  echo \"Checking: $cmd\"\n\n  if ! ./scripts/validate-command.sh \"$cmd\"; then\n    echo \"ERROR: Command validation failed: $cmd\"\n    exit 1\n  fi\ndone\n\necho \"✓ All commands valid\"\n```\n\n### Continuous Testing\n\nTest commands in CI/CD:\n\n```yaml\n# .github/workflows/test-commands.yml\nname: Test Commands\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n\n      - name: Validate command structure\n        run: |\n          for cmd in .claude/commands/*.md; do\n            echo \"Testing: $cmd\"\n            ./scripts/validate-command.sh \"$cmd\"\n          done\n\n      - name: Validate frontmatter\n        run: |\n          for cmd in .claude/commands/*.md; do\n            ./scripts/validate-frontmatter.sh \"$cmd\"\n          done\n\n      - name: Check for TODOs\n        run: |\n          if grep -r \"TODO\" .claude/commands/; then\n            echo \"ERROR: TODOs found in commands\"\n            exit 1\n          fi\n```\n\n## Edge Case Testing\n\n### Test Edge Cases\n\n**Empty arguments:**\n```bash\n> /cmd \"\"\n> /cmd '' ''\n```\n\n**Special characters:**\n```bash\n> /cmd \"arg with spaces\"\n> /cmd arg-with-dashes\n> /cmd arg_with_underscores\n> /cmd arg/with/slashes\n> /cmd 'arg with \"quotes\"'\n```\n\n**Long arguments:**\n```bash\n> /cmd $(python -c \"print('a' * 10000)\")\n```\n\n**Unusual file paths:**\n```bash\n> /cmd ./file\n> /cmd ../file\n> /cmd ~/file\n> /cmd \"/path with spaces/file\"\n```\n\n**Bash command edge cases:**\n```markdown\n# Commands that might fail\n!`exit 1`\n!`false`\n!`command-that-does-not-exist`\n\n# Commands with special output\n!`echo \"\"`\n!`cat /dev/null`\n!`yes | head -n 1000000`\n```\n\n## Performance Testing\n\n### Response Time Testing\n\n```bash\n#!/bin/bash\n# test-command-performance.sh\n\nCOMMAND=\"$1\"\n\necho \"Testing performance of /$COMMAND\"\necho\n\nfor i in {1..5}; do\n  echo \"Run $i:\"\n  START=$(date +%s%N)\n\n  # Invoke command (manual step - record time)\n  echo \"  Invoke: /$COMMAND\"\n  echo \"  Start time: $START\"\n  echo \"  (Record end time manually)\"\n  echo\ndone\n\necho \"Analyze results:\"\necho \"  - Average response time\"\necho \"  - Variance\"\necho \"  - Acceptable threshold: < 3 seconds for fast commands\"\n```\n\n### Resource Usage Testing\n\n```bash\n# Monitor Claude Code during command execution\n# In terminal 1:\nclaude --debug\n\n# In terminal 2:\nwatch -n 1 'ps aux | grep claude'\n\n# Execute command and observe:\n# - Memory usage\n# - CPU usage\n# - Process count\n```\n\n## User Experience Testing\n\n### Usability Checklist\n\n- [ ] Command name is intuitive\n- [ ] Description is clear in `/help`\n- [ ] Arguments are well-documented\n- [ ] Error messages are helpful\n- [ ] Output is formatted readably\n- [ ] Long-running commands show progress\n- [ ] Results are actionable\n- [ ] Edge cases have good UX\n\n### User Acceptance Testing\n\nRecruit testers:\n\n```markdown\n# Testing Guide for Beta Testers\n\n## Command: /my-new-command\n\n### Test Scenarios\n\n1. **Basic usage:**\n   - Run: `/my-new-command`\n   - Expected: [describe]\n   - Rate clarity: 1-5\n\n2. **With arguments:**\n   - Run: `/my-new-command arg1 arg2`\n   - Expected: [describe]\n   - Rate usefulness: 1-5\n\n3. **Error case:**\n   - Run: `/my-new-command invalid-input`\n   - Expected: Helpful error message\n   - Rate error message: 1-5\n\n### Feedback Questions\n\n1. Was the command easy to understand?\n2. Did the output meet your expectations?\n3. What would you change?\n4. Would you use this command regularly?\n```\n\n## Testing Checklist\n\nBefore releasing a command:\n\n### Structure\n- [ ] File in correct location\n- [ ] Correct .md extension\n- [ ] Valid YAML frontmatter (if present)\n- [ ] Markdown syntax correct\n\n### Functionality\n- [ ] Command appears in `/help`\n- [ ] Description is clear\n- [ ] Command executes without errors\n- [ ] Arguments work as expected\n- [ ] File references work\n- [ ] Bash execution works (if used)\n\n### Edge Cases\n- [ ] Missing arguments handled\n- [ ] Invalid arguments detected\n- [ ] Non-existent files handled\n- [ ] Special characters work\n- [ ] Long inputs handled\n\n### Integration\n- [ ] Works with other commands\n- [ ] Works with hooks (if applicable)\n- [ ] Works with MCP (if applicable)\n- [ ] State management works\n\n### Quality\n- [ ] Performance acceptable\n- [ ] No security issues\n- [ ] Error messages helpful\n- [ ] Output formatted well\n- [ ] Documentation complete\n\n### Distribution\n- [ ] Tested by others\n- [ ] Feedback incorporated\n- [ ] README updated\n- [ ] Examples provided\n\n## Debugging Failed Tests\n\n### Common Issues and Solutions\n\n**Issue: Command not appearing in /help**\n\n```bash\n# Check file location\nls -la .claude/commands/my-command.md\n\n# Check permissions\nchmod 644 .claude/commands/my-command.md\n\n# Check syntax\nhead -n 20 .claude/commands/my-command.md\n\n# Restart Claude Code\nclaude --debug\n```\n\n**Issue: Arguments not substituting**\n\n```bash\n# Verify syntax\ngrep '\\$1' .claude/commands/my-command.md\ngrep '\\$ARGUMENTS' .claude/commands/my-command.md\n\n# Test with simple command first\necho \"Test: \\$1 and \\$2\" > .claude/commands/test-args.md\n```\n\n**Issue: Bash commands not executing**\n\n```bash\n# Check allowed-tools\ngrep \"allowed-tools\" .claude/commands/my-command.md\n\n# Verify command syntax\ngrep '!\\`' .claude/commands/my-command.md\n\n# Test command manually\ndate\necho \"test\"\n```\n\n**Issue: File references not working**\n\n```bash\n# Check @ syntax\ngrep '@' .claude/commands/my-command.md\n\n# Verify file exists\nls -la /path/to/referenced/file\n\n# Check permissions\nchmod 644 /path/to/referenced/file\n```\n\n## Best Practices\n\n1. **Test early, test often**: Validate as you develop\n2. **Automate validation**: Use scripts for repeatable checks\n3. **Test edge cases**: Don't just test the happy path\n4. **Get feedback**: Have others test before wide release\n5. **Document tests**: Keep test scenarios for regression testing\n6. **Monitor in production**: Watch for issues after release\n7. **Iterate**: Improve based on real usage data\n",
        "plugins/plugin-dev/skills/hook-development/SKILL.md": "---\nname: Hook Development\ndescription: This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse/PostToolUse/Stop hook\", \"validate tool use\", \"implement prompt-based hooks\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"set up event-driven automation\", \"block dangerous commands\", or mentions hook events (PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification). Provides comprehensive guidance for creating and implementing Claude Code plugin hooks with focus on advanced prompt-based hooks API.\nversion: 0.1.0\n---\n\n# Hook Development for Claude Code Plugins\n\n## Overview\n\nHooks are event-driven automation scripts that execute in response to Claude Code events. Use hooks to validate operations, enforce policies, add context, and integrate external tools into workflows.\n\n**Key capabilities:**\n- Validate tool calls before execution (PreToolUse)\n- React to tool results (PostToolUse)\n- Enforce completion standards (Stop, SubagentStop)\n- Load project context (SessionStart)\n- Automate workflows across the development lifecycle\n\n## Hook Types\n\n### Prompt-Based Hooks (Recommended)\n\nUse LLM-driven decision making for context-aware validation:\n\n```json\n{\n  \"type\": \"prompt\",\n  \"prompt\": \"Evaluate if this tool use is appropriate: $TOOL_INPUT\",\n  \"timeout\": 30\n}\n```\n\n**Supported events:** Stop, SubagentStop, UserPromptSubmit, PreToolUse\n\n**Benefits:**\n- Context-aware decisions based on natural language reasoning\n- Flexible evaluation logic without bash scripting\n- Better edge case handling\n- Easier to maintain and extend\n\n### Command Hooks\n\nExecute bash commands for deterministic checks:\n\n```json\n{\n  \"type\": \"command\",\n  \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\",\n  \"timeout\": 60\n}\n```\n\n**Use for:**\n- Fast deterministic validations\n- File system operations\n- External tool integrations\n- Performance-critical checks\n\n## Hook Configuration Formats\n\n### Plugin hooks.json Format\n\n**For plugin hooks** in `hooks/hooks.json`, use wrapper format:\n\n```json\n{\n  \"description\": \"Brief explanation of hooks (optional)\",\n  \"hooks\": {\n    \"PreToolUse\": [...],\n    \"Stop\": [...],\n    \"SessionStart\": [...]\n  }\n}\n```\n\n**Key points:**\n- `description` field is optional\n- `hooks` field is required wrapper containing actual hook events\n- This is the **plugin-specific format**\n\n**Example:**\n```json\n{\n  \"description\": \"Validation hooks for code quality\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/validate.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Settings Format (Direct)\n\n**For user settings** in `.claude/settings.json`, use direct format:\n\n```json\n{\n  \"PreToolUse\": [...],\n  \"Stop\": [...],\n  \"SessionStart\": [...]\n}\n```\n\n**Key points:**\n- No wrapper - events directly at top level\n- No description field\n- This is the **settings format**\n\n**Important:** The examples below show the hook event structure that goes inside either format. For plugin hooks.json, wrap these in `{\"hooks\": {...}}`.\n\n## Hook Events\n\n### PreToolUse\n\nExecute before any tool runs. Use to approve, deny, or modify tool calls.\n\n**Example (prompt-based):**\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate file write safety. Check: system paths, credentials, path traversal, sensitive content. Return 'approve' or 'deny'.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Output for PreToolUse:**\n```json\n{\n  \"hookSpecificOutput\": {\n    \"permissionDecision\": \"allow|deny|ask\",\n    \"updatedInput\": {\"field\": \"modified_value\"}\n  },\n  \"systemMessage\": \"Explanation for Claude\"\n}\n```\n\n### PostToolUse\n\nExecute after tool completes. Use to react to results, provide feedback, or log.\n\n**Example:**\n```json\n{\n  \"PostToolUse\": [\n    {\n      \"matcher\": \"Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Analyze edit result for potential issues: syntax errors, security vulnerabilities, breaking changes. Provide feedback.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Output behavior:**\n- Exit 0: stdout shown in transcript\n- Exit 2: stderr fed back to Claude\n- systemMessage included in context\n\n### Stop\n\nExecute when main agent considers stopping. Use to validate completeness.\n\n**Example:**\n```json\n{\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Verify task completion: tests run, build succeeded, questions answered. Return 'approve' to stop or 'block' with reason to continue.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Decision output:**\n```json\n{\n  \"decision\": \"approve|block\",\n  \"reason\": \"Explanation\",\n  \"systemMessage\": \"Additional context\"\n}\n```\n\n### SubagentStop\n\nExecute when subagent considers stopping. Use to ensure subagent completed its task.\n\nSimilar to Stop hook, but for subagents.\n\n### UserPromptSubmit\n\nExecute when user submits a prompt. Use to add context, validate, or block prompts.\n\n**Example:**\n```json\n{\n  \"UserPromptSubmit\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Check if prompt requires security guidance. If discussing auth, permissions, or API security, return relevant warnings.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n### SessionStart\n\nExecute when Claude Code session begins. Use to load context and set environment.\n\n**Example:**\n```json\n{\n  \"SessionStart\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/load-context.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Special capability:** Persist environment variables using `$CLAUDE_ENV_FILE`:\n```bash\necho \"export PROJECT_TYPE=nodejs\" >> \"$CLAUDE_ENV_FILE\"\n```\n\nSee `examples/load-context.sh` for complete example.\n\n### SessionEnd\n\nExecute when session ends. Use for cleanup, logging, and state preservation.\n\n### PreCompact\n\nExecute before context compaction. Use to add critical information to preserve.\n\n### Notification\n\nExecute when Claude sends notifications. Use to react to user notifications.\n\n## Hook Output Format\n\n### Standard Output (All Hooks)\n\n```json\n{\n  \"continue\": true,\n  \"suppressOutput\": false,\n  \"systemMessage\": \"Message for Claude\"\n}\n```\n\n- `continue`: If false, halt processing (default true)\n- `suppressOutput`: Hide output from transcript (default false)\n- `systemMessage`: Message shown to Claude\n\n### Exit Codes\n\n- `0` - Success (stdout shown in transcript)\n- `2` - Blocking error (stderr fed back to Claude)\n- Other - Non-blocking error\n\n## Hook Input Format\n\nAll hooks receive JSON via stdin with common fields:\n\n```json\n{\n  \"session_id\": \"abc123\",\n  \"transcript_path\": \"/path/to/transcript.txt\",\n  \"cwd\": \"/current/working/dir\",\n  \"permission_mode\": \"ask|allow\",\n  \"hook_event_name\": \"PreToolUse\"\n}\n```\n\n**Event-specific fields:**\n\n- **PreToolUse/PostToolUse:** `tool_name`, `tool_input`, `tool_result`\n- **UserPromptSubmit:** `user_prompt`\n- **Stop/SubagentStop:** `reason`\n\nAccess fields in prompts using `$TOOL_INPUT`, `$TOOL_RESULT`, `$USER_PROMPT`, etc.\n\n## Environment Variables\n\nAvailable in all command hooks:\n\n- `$CLAUDE_PROJECT_DIR` - Project root path\n- `$CLAUDE_PLUGIN_ROOT` - Plugin directory (use for portable paths)\n- `$CLAUDE_ENV_FILE` - SessionStart only: persist env vars here\n- `$CLAUDE_CODE_REMOTE` - Set if running in remote context\n\n**Always use ${CLAUDE_PLUGIN_ROOT} in hook commands for portability:**\n\n```json\n{\n  \"type\": \"command\",\n  \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\"\n}\n```\n\n## Plugin Hook Configuration\n\nIn plugins, define hooks in `hooks/hooks.json`:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate file write safety\"\n        }\n      ]\n    }\n  ],\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Verify task completion\"\n        }\n      ]\n    }\n  ],\n  \"SessionStart\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/load-context.sh\",\n          \"timeout\": 10\n        }\n      ]\n    }\n  ]\n}\n```\n\nPlugin hooks merge with user's hooks and run in parallel.\n\n## Matchers\n\n### Tool Name Matching\n\n**Exact match:**\n```json\n\"matcher\": \"Write\"\n```\n\n**Multiple tools:**\n```json\n\"matcher\": \"Read|Write|Edit\"\n```\n\n**Wildcard (all tools):**\n```json\n\"matcher\": \"*\"\n```\n\n**Regex patterns:**\n```json\n\"matcher\": \"mcp__.*__delete.*\"  // All MCP delete tools\n```\n\n**Note:** Matchers are case-sensitive.\n\n### Common Patterns\n\n```json\n// All MCP tools\n\"matcher\": \"mcp__.*\"\n\n// Specific plugin's MCP tools\n\"matcher\": \"mcp__plugin_asana_.*\"\n\n// All file operations\n\"matcher\": \"Read|Write|Edit\"\n\n// Bash commands only\n\"matcher\": \"Bash\"\n```\n\n## Security Best Practices\n\n### Input Validation\n\nAlways validate inputs in command hooks:\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\ninput=$(cat)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\n\n# Validate tool name format\nif [[ ! \"$tool_name\" =~ ^[a-zA-Z0-9_]+$ ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Invalid tool name\"}' >&2\n  exit 2\nfi\n```\n\n### Path Safety\n\nCheck for path traversal and sensitive files:\n\n```bash\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\n\n# Deny path traversal\nif [[ \"$file_path\" == *\"..\"* ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Path traversal detected\"}' >&2\n  exit 2\nfi\n\n# Deny sensitive files\nif [[ \"$file_path\" == *\".env\"* ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Sensitive file\"}' >&2\n  exit 2\nfi\n```\n\nSee `examples/validate-write.sh` and `examples/validate-bash.sh` for complete examples.\n\n### Quote All Variables\n\n```bash\n# GOOD: Quoted\necho \"$file_path\"\ncd \"$CLAUDE_PROJECT_DIR\"\n\n# BAD: Unquoted (injection risk)\necho $file_path\ncd $CLAUDE_PROJECT_DIR\n```\n\n### Set Appropriate Timeouts\n\n```json\n{\n  \"type\": \"command\",\n  \"command\": \"bash script.sh\",\n  \"timeout\": 10\n}\n```\n\n**Defaults:** Command hooks (60s), Prompt hooks (30s)\n\n## Performance Considerations\n\n### Parallel Execution\n\nAll matching hooks run **in parallel**:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write\",\n      \"hooks\": [\n        {\"type\": \"command\", \"command\": \"check1.sh\"},  // Parallel\n        {\"type\": \"command\", \"command\": \"check2.sh\"},  // Parallel\n        {\"type\": \"prompt\", \"prompt\": \"Validate...\"}   // Parallel\n      ]\n    }\n  ]\n}\n```\n\n**Design implications:**\n- Hooks don't see each other's output\n- Non-deterministic ordering\n- Design for independence\n\n### Optimization\n\n1. Use command hooks for quick deterministic checks\n2. Use prompt hooks for complex reasoning\n3. Cache validation results in temp files\n4. Minimize I/O in hot paths\n\n## Temporarily Active Hooks\n\nCreate hooks that activate conditionally by checking for a flag file or configuration:\n\n**Pattern: Flag file activation**\n```bash\n#!/bin/bash\n# Only active when flag file exists\nFLAG_FILE=\"$CLAUDE_PROJECT_DIR/.enable-strict-validation\"\n\nif [ ! -f \"$FLAG_FILE\" ]; then\n  # Flag not present, skip validation\n  exit 0\nfi\n\n# Flag present, run validation\ninput=$(cat)\n# ... validation logic ...\n```\n\n**Pattern: Configuration-based activation**\n```bash\n#!/bin/bash\n# Check configuration for activation\nCONFIG_FILE=\"$CLAUDE_PROJECT_DIR/.claude/plugin-config.json\"\n\nif [ -f \"$CONFIG_FILE\" ]; then\n  enabled=$(jq -r '.strictMode // false' \"$CONFIG_FILE\")\n  if [ \"$enabled\" != \"true\" ]; then\n    exit 0  # Not enabled, skip\n  fi\nfi\n\n# Enabled, run hook logic\ninput=$(cat)\n# ... hook logic ...\n```\n\n**Use cases:**\n- Enable strict validation only when needed\n- Temporary debugging hooks\n- Project-specific hook behavior\n- Feature flags for hooks\n\n**Best practice:** Document activation mechanism in plugin README so users know how to enable/disable temporary hooks.\n\n## Hook Lifecycle and Limitations\n\n### Hooks Load at Session Start\n\n**Important:** Hooks are loaded when Claude Code session starts. Changes to hook configuration require restarting Claude Code.\n\n**Cannot hot-swap hooks:**\n- Editing `hooks/hooks.json` won't affect current session\n- Adding new hook scripts won't be recognized\n- Changing hook commands/prompts won't update\n- Must restart Claude Code: exit and run `claude` again\n\n**To test hook changes:**\n1. Edit hook configuration or scripts\n2. Exit Claude Code session\n3. Restart: `claude` or `cc`\n4. New hook configuration loads\n5. Test hooks with `claude --debug`\n\n### Hook Validation at Startup\n\nHooks are validated when Claude Code starts:\n- Invalid JSON in hooks.json causes loading failure\n- Missing scripts cause warnings\n- Syntax errors reported in debug mode\n\nUse `/hooks` command to review loaded hooks in current session.\n\n## Debugging Hooks\n\n### Enable Debug Mode\n\n```bash\nclaude --debug\n```\n\nLook for hook registration, execution logs, input/output JSON, and timing information.\n\n### Test Hook Scripts\n\nTest command hooks directly:\n\n```bash\necho '{\"tool_name\": \"Write\", \"tool_input\": {\"file_path\": \"/test\"}}' | \\\n  bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\n\necho \"Exit code: $?\"\n```\n\n### Validate JSON Output\n\nEnsure hooks output valid JSON:\n\n```bash\noutput=$(./your-hook.sh < test-input.json)\necho \"$output\" | jq .\n```\n\n## Quick Reference\n\n### Hook Events Summary\n\n| Event | When | Use For |\n|-------|------|---------|\n| PreToolUse | Before tool | Validation, modification |\n| PostToolUse | After tool | Feedback, logging |\n| UserPromptSubmit | User input | Context, validation |\n| Stop | Agent stopping | Completeness check |\n| SubagentStop | Subagent done | Task validation |\n| SessionStart | Session begins | Context loading |\n| SessionEnd | Session ends | Cleanup, logging |\n| PreCompact | Before compact | Preserve context |\n| Notification | User notified | Logging, reactions |\n\n### Best Practices\n\n**DO:**\n- ✅ Use prompt-based hooks for complex logic\n- ✅ Use ${CLAUDE_PLUGIN_ROOT} for portability\n- ✅ Validate all inputs in command hooks\n- ✅ Quote all bash variables\n- ✅ Set appropriate timeouts\n- ✅ Return structured JSON output\n- ✅ Test hooks thoroughly\n\n**DON'T:**\n- ❌ Use hardcoded paths\n- ❌ Trust user input without validation\n- ❌ Create long-running hooks\n- ❌ Rely on hook execution order\n- ❌ Modify global state unpredictably\n- ❌ Log sensitive information\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed patterns and advanced techniques, consult:\n\n- **`references/patterns.md`** - Common hook patterns (8+ proven patterns)\n- **`references/migration.md`** - Migrating from basic to advanced hooks\n- **`references/advanced.md`** - Advanced use cases and techniques\n\n### Example Hook Scripts\n\nWorking examples in `examples/`:\n\n- **`validate-write.sh`** - File write validation example\n- **`validate-bash.sh`** - Bash command validation example\n- **`load-context.sh`** - SessionStart context loading example\n\n### Utility Scripts\n\nDevelopment tools in `scripts/`:\n\n- **`validate-hook-schema.sh`** - Validate hooks.json structure and syntax\n- **`test-hook.sh`** - Test hooks with sample input before deployment\n- **`hook-linter.sh`** - Check hook scripts for common issues and best practices\n\n### External Resources\n\n- **Official Docs**: https://docs.claude.com/en/docs/claude-code/hooks\n- **Examples**: See security-guidance plugin in marketplace\n- **Testing**: Use `claude --debug` for detailed logs\n- **Validation**: Use `jq` to validate hook JSON output\n\n## Implementation Workflow\n\nTo implement hooks in a plugin:\n\n1. Identify events to hook into (PreToolUse, Stop, SessionStart, etc.)\n2. Decide between prompt-based (flexible) or command (deterministic) hooks\n3. Write hook configuration in `hooks/hooks.json`\n4. For command hooks, create hook scripts\n5. Use ${CLAUDE_PLUGIN_ROOT} for all file references\n6. Validate configuration with `scripts/validate-hook-schema.sh hooks/hooks.json`\n7. Test hooks with `scripts/test-hook.sh` before deployment\n8. Test in Claude Code with `claude --debug`\n9. Document hooks in plugin README\n\nFocus on prompt-based hooks for most use cases. Reserve command hooks for performance-critical or deterministic checks.\n",
        "plugins/plugin-dev/skills/hook-development/references/advanced.md": "# Advanced Hook Use Cases\n\nThis reference covers advanced hook patterns and techniques for sophisticated automation workflows.\n\n## Multi-Stage Validation\n\nCombine command and prompt hooks for layered validation:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/quick-check.sh\",\n          \"timeout\": 5\n        },\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Deep analysis of bash command: $TOOL_INPUT\",\n          \"timeout\": 15\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use case:** Fast deterministic checks followed by intelligent analysis\n\n**Example quick-check.sh:**\n```bash\n#!/bin/bash\ninput=$(cat)\ncommand=$(echo \"$input\" | jq -r '.tool_input.command')\n\n# Immediate approval for safe commands\nif [[ \"$command\" =~ ^(ls|pwd|echo|date|whoami)$ ]]; then\n  exit 0\nfi\n\n# Let prompt hook handle complex cases\nexit 0\n```\n\nThe command hook quickly approves obviously safe commands, while the prompt hook analyzes everything else.\n\n## Conditional Hook Execution\n\nExecute hooks based on environment or context:\n\n```bash\n#!/bin/bash\n# Only run in CI environment\nif [ -z \"$CI\" ]; then\n  echo '{\"continue\": true}' # Skip in non-CI\n  exit 0\nfi\n\n# Run validation logic in CI\ninput=$(cat)\n# ... validation code ...\n```\n\n**Use cases:**\n- Different behavior in CI vs local development\n- Project-specific validation\n- User-specific rules\n\n**Example: Skip certain checks for trusted users:**\n```bash\n#!/bin/bash\n# Skip detailed checks for admin users\nif [ \"$USER\" = \"admin\" ]; then\n  exit 0\nfi\n\n# Full validation for other users\ninput=$(cat)\n# ... validation code ...\n```\n\n## Hook Chaining via State\n\nShare state between hooks using temporary files:\n\n```bash\n# Hook 1: Analyze and save state\n#!/bin/bash\ninput=$(cat)\ncommand=$(echo \"$input\" | jq -r '.tool_input.command')\n\n# Analyze command\nrisk_level=$(calculate_risk \"$command\")\necho \"$risk_level\" > /tmp/hook-state-$$\n\nexit 0\n```\n\n```bash\n# Hook 2: Use saved state\n#!/bin/bash\nrisk_level=$(cat /tmp/hook-state-$$ 2>/dev/null || echo \"unknown\")\n\nif [ \"$risk_level\" = \"high\" ]; then\n  echo \"High risk operation detected\" >&2\n  exit 2\nfi\n```\n\n**Important:** This only works for sequential hook events (e.g., PreToolUse then PostToolUse), not parallel hooks.\n\n## Dynamic Hook Configuration\n\nModify hook behavior based on project configuration:\n\n```bash\n#!/bin/bash\ncd \"$CLAUDE_PROJECT_DIR\" || exit 1\n\n# Read project-specific config\nif [ -f \".claude-hooks-config.json\" ]; then\n  strict_mode=$(jq -r '.strict_mode' .claude-hooks-config.json)\n\n  if [ \"$strict_mode\" = \"true\" ]; then\n    # Apply strict validation\n    # ...\n  else\n    # Apply lenient validation\n    # ...\n  fi\nfi\n```\n\n**Example .claude-hooks-config.json:**\n```json\n{\n  \"strict_mode\": true,\n  \"allowed_commands\": [\"ls\", \"pwd\", \"grep\"],\n  \"forbidden_paths\": [\"/etc\", \"/sys\"]\n}\n```\n\n## Context-Aware Prompt Hooks\n\nUse transcript and session context for intelligent decisions:\n\n```json\n{\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Review the full transcript at $TRANSCRIPT_PATH. Check: 1) Were tests run after code changes? 2) Did the build succeed? 3) Were all user questions answered? 4) Is there any unfinished work? Return 'approve' only if everything is complete.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\nThe LLM can read the transcript file and make context-aware decisions.\n\n## Performance Optimization\n\n### Caching Validation Results\n\n```bash\n#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\ncache_key=$(echo -n \"$file_path\" | md5sum | cut -d' ' -f1)\ncache_file=\"/tmp/hook-cache-$cache_key\"\n\n# Check cache\nif [ -f \"$cache_file\" ]; then\n  cache_age=$(($(date +%s) - $(stat -f%m \"$cache_file\" 2>/dev/null || stat -c%Y \"$cache_file\")))\n  if [ \"$cache_age\" -lt 300 ]; then  # 5 minute cache\n    cat \"$cache_file\"\n    exit 0\n  fi\nfi\n\n# Perform validation\nresult='{\"decision\": \"approve\"}'\n\n# Cache result\necho \"$result\" > \"$cache_file\"\necho \"$result\"\n```\n\n### Parallel Execution Optimization\n\nSince hooks run in parallel, design them to be independent:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash check-size.sh\",      // Independent\n          \"timeout\": 2\n        },\n        {\n          \"type\": \"command\",\n          \"command\": \"bash check-path.sh\",      // Independent\n          \"timeout\": 2\n        },\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Check content safety\",     // Independent\n          \"timeout\": 10\n        }\n      ]\n    }\n  ]\n}\n```\n\nAll three hooks run simultaneously, reducing total latency.\n\n## Cross-Event Workflows\n\nCoordinate hooks across different events:\n\n**SessionStart - Set up tracking:**\n```bash\n#!/bin/bash\n# Initialize session tracking\necho \"0\" > /tmp/test-count-$$\necho \"0\" > /tmp/build-count-$$\n```\n\n**PostToolUse - Track events:**\n```bash\n#!/bin/bash\ninput=$(cat)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\n\nif [ \"$tool_name\" = \"Bash\" ]; then\n  command=$(echo \"$input\" | jq -r '.tool_result')\n  if [[ \"$command\" == *\"test\"* ]]; then\n    count=$(cat /tmp/test-count-$$ 2>/dev/null || echo \"0\")\n    echo $((count + 1)) > /tmp/test-count-$$\n  fi\nfi\n```\n\n**Stop - Verify based on tracking:**\n```bash\n#!/bin/bash\ntest_count=$(cat /tmp/test-count-$$ 2>/dev/null || echo \"0\")\n\nif [ \"$test_count\" -eq 0 ]; then\n  echo '{\"decision\": \"block\", \"reason\": \"No tests were run\"}' >&2\n  exit 2\nfi\n```\n\n## Integration with External Systems\n\n### Slack Notifications\n\n```bash\n#!/bin/bash\ninput=$(cat)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\ndecision=\"blocked\"\n\n# Send notification to Slack\ncurl -X POST \"$SLACK_WEBHOOK\" \\\n  -H 'Content-Type: application/json' \\\n  -d \"{\\\"text\\\": \\\"Hook ${decision} ${tool_name} operation\\\"}\" \\\n  2>/dev/null\n\necho '{\"decision\": \"deny\"}' >&2\nexit 2\n```\n\n### Database Logging\n\n```bash\n#!/bin/bash\ninput=$(cat)\n\n# Log to database\npsql \"$DATABASE_URL\" -c \"INSERT INTO hook_logs (event, data) VALUES ('PreToolUse', '$input')\" \\\n  2>/dev/null\n\nexit 0\n```\n\n### Metrics Collection\n\n```bash\n#!/bin/bash\ninput=$(cat)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\n\n# Send metrics to monitoring system\necho \"hook.pretooluse.${tool_name}:1|c\" | nc -u -w1 statsd.local 8125\n\nexit 0\n```\n\n## Security Patterns\n\n### Rate Limiting\n\n```bash\n#!/bin/bash\ninput=$(cat)\ncommand=$(echo \"$input\" | jq -r '.tool_input.command')\n\n# Track command frequency\nrate_file=\"/tmp/hook-rate-$$\"\ncurrent_minute=$(date +%Y%m%d%H%M)\n\nif [ -f \"$rate_file\" ]; then\n  last_minute=$(head -1 \"$rate_file\")\n  count=$(tail -1 \"$rate_file\")\n\n  if [ \"$current_minute\" = \"$last_minute\" ]; then\n    if [ \"$count\" -gt 10 ]; then\n      echo '{\"decision\": \"deny\", \"reason\": \"Rate limit exceeded\"}' >&2\n      exit 2\n    fi\n    count=$((count + 1))\n  else\n    count=1\n  fi\nelse\n  count=1\nfi\n\necho \"$current_minute\" > \"$rate_file\"\necho \"$count\" >> \"$rate_file\"\n\nexit 0\n```\n\n### Audit Logging\n\n```bash\n#!/bin/bash\ninput=$(cat)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\ntimestamp=$(date -Iseconds)\n\n# Append to audit log\necho \"$timestamp | $USER | $tool_name | $input\" >> ~/.claude/audit.log\n\nexit 0\n```\n\n### Secret Detection\n\n```bash\n#!/bin/bash\ninput=$(cat)\ncontent=$(echo \"$input\" | jq -r '.tool_input.content')\n\n# Check for common secret patterns\nif echo \"$content\" | grep -qE \"(api[_-]?key|password|secret|token).{0,20}['\\\"]?[A-Za-z0-9]{20,}\"; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Potential secret detected in content\"}' >&2\n  exit 2\nfi\n\nexit 0\n```\n\n## Testing Advanced Hooks\n\n### Unit Testing Hook Scripts\n\n```bash\n# test-hook.sh\n#!/bin/bash\n\n# Test 1: Approve safe command\nresult=$(echo '{\"tool_input\": {\"command\": \"ls\"}}' | bash validate-bash.sh)\nif [ $? -eq 0 ]; then\n  echo \"✓ Test 1 passed\"\nelse\n  echo \"✗ Test 1 failed\"\nfi\n\n# Test 2: Block dangerous command\nresult=$(echo '{\"tool_input\": {\"command\": \"rm -rf /\"}}' | bash validate-bash.sh)\nif [ $? -eq 2 ]; then\n  echo \"✓ Test 2 passed\"\nelse\n  echo \"✗ Test 2 failed\"\nfi\n```\n\n### Integration Testing\n\nCreate test scenarios that exercise the full hook workflow:\n\n```bash\n# integration-test.sh\n#!/bin/bash\n\n# Set up test environment\nexport CLAUDE_PROJECT_DIR=\"/tmp/test-project\"\nexport CLAUDE_PLUGIN_ROOT=\"$(pwd)\"\nmkdir -p \"$CLAUDE_PROJECT_DIR\"\n\n# Test SessionStart hook\necho '{}' | bash hooks/session-start.sh\nif [ -f \"/tmp/session-initialized\" ]; then\n  echo \"✓ SessionStart hook works\"\nelse\n  echo \"✗ SessionStart hook failed\"\nfi\n\n# Clean up\nrm -rf \"$CLAUDE_PROJECT_DIR\"\n```\n\n## Best Practices for Advanced Hooks\n\n1. **Keep hooks independent**: Don't rely on execution order\n2. **Use timeouts**: Set appropriate limits for each hook type\n3. **Handle errors gracefully**: Provide clear error messages\n4. **Document complexity**: Explain advanced patterns in README\n5. **Test thoroughly**: Cover edge cases and failure modes\n6. **Monitor performance**: Track hook execution time\n7. **Version configuration**: Use version control for hook configs\n8. **Provide escape hatches**: Allow users to bypass hooks when needed\n\n## Common Pitfalls\n\n### ❌ Assuming Hook Order\n\n```bash\n# BAD: Assumes hooks run in specific order\n# Hook 1 saves state, Hook 2 reads it\n# This can fail because hooks run in parallel!\n```\n\n### ❌ Long-Running Hooks\n\n```bash\n# BAD: Hook takes 2 minutes to run\nsleep 120\n# This will timeout and block the workflow\n```\n\n### ❌ Uncaught Exceptions\n\n```bash\n# BAD: Script crashes on unexpected input\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\ncat \"$file_path\"  # Fails if file doesn't exist\n```\n\n### ✅ Proper Error Handling\n\n```bash\n# GOOD: Handles errors gracefully\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\nif [ ! -f \"$file_path\" ]; then\n  echo '{\"continue\": true, \"systemMessage\": \"File not found, skipping check\"}' >&2\n  exit 0\nfi\n```\n\n## Conclusion\n\nAdvanced hook patterns enable sophisticated automation while maintaining reliability and performance. Use these techniques when basic hooks are insufficient, but always prioritize simplicity and maintainability.\n",
        "plugins/plugin-dev/skills/hook-development/references/migration.md": "# Migrating from Basic to Advanced Hooks\n\nThis guide shows how to migrate from basic command hooks to advanced prompt-based hooks for better maintainability and flexibility.\n\n## Why Migrate?\n\nPrompt-based hooks offer several advantages:\n\n- **Natural language reasoning**: LLM understands context and intent\n- **Better edge case handling**: Adapts to unexpected scenarios\n- **No bash scripting required**: Simpler to write and maintain\n- **More flexible validation**: Can handle complex logic without coding\n\n## Migration Example: Bash Command Validation\n\n### Before (Basic Command Hook)\n\n**Configuration:**\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash validate-bash.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Script (validate-bash.sh):**\n```bash\n#!/bin/bash\ninput=$(cat)\ncommand=$(echo \"$input\" | jq -r '.tool_input.command')\n\n# Hard-coded validation logic\nif [[ \"$command\" == *\"rm -rf\"* ]]; then\n  echo \"Dangerous command detected\" >&2\n  exit 2\nfi\n```\n\n**Problems:**\n- Only checks for exact \"rm -rf\" pattern\n- Doesn't catch variations like `rm -fr` or `rm -r -f`\n- Misses other dangerous commands (`dd`, `mkfs`, etc.)\n- No context awareness\n- Requires bash scripting knowledge\n\n### After (Advanced Prompt Hook)\n\n**Configuration:**\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Command: $TOOL_INPUT.command. Analyze for: 1) Destructive operations (rm -rf, dd, mkfs, etc) 2) Privilege escalation (sudo) 3) Network operations without user consent. Return 'approve' or 'deny' with explanation.\",\n          \"timeout\": 15\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Benefits:**\n- Catches all variations and patterns\n- Understands intent, not just literal strings\n- No script file needed\n- Easy to extend with new criteria\n- Context-aware decisions\n- Natural language explanation in denial\n\n## Migration Example: File Write Validation\n\n### Before (Basic Command Hook)\n\n**Configuration:**\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash validate-write.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Script (validate-write.sh):**\n```bash\n#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\n\n# Check for path traversal\nif [[ \"$file_path\" == *\"..\"* ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"Path traversal detected\"}' >&2\n  exit 2\nfi\n\n# Check for system paths\nif [[ \"$file_path\" == \"/etc/\"* ]] || [[ \"$file_path\" == \"/sys/\"* ]]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"System file\"}' >&2\n  exit 2\nfi\n```\n\n**Problems:**\n- Hard-coded path patterns\n- Doesn't understand symlinks\n- Missing edge cases (e.g., `/etc` vs `/etc/`)\n- No consideration of file content\n\n### After (Advanced Prompt Hook)\n\n**Configuration:**\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"File path: $TOOL_INPUT.file_path. Content preview: $TOOL_INPUT.content (first 200 chars). Verify: 1) Not system directories (/etc, /sys, /usr) 2) Not credentials (.env, tokens, secrets) 3) No path traversal 4) Content doesn't expose secrets. Return 'approve' or 'deny'.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Benefits:**\n- Context-aware (considers content too)\n- Handles symlinks and edge cases\n- Natural understanding of \"system directories\"\n- Can detect secrets in content\n- Easy to extend criteria\n\n## When to Keep Command Hooks\n\nCommand hooks still have their place:\n\n### 1. Deterministic Performance Checks\n\n```bash\n#!/bin/bash\n# Check file size quickly\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\nsize=$(stat -f%z \"$file_path\" 2>/dev/null || stat -c%s \"$file_path\" 2>/dev/null)\n\nif [ \"$size\" -gt 10000000 ]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"File too large\"}' >&2\n  exit 2\nfi\n```\n\n**Use command hooks when:** Validation is purely mathematical or deterministic.\n\n### 2. External Tool Integration\n\n```bash\n#!/bin/bash\n# Run security scanner\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\nscan_result=$(security-scanner \"$file_path\")\n\nif [ \"$?\" -ne 0 ]; then\n  echo \"Security scan failed: $scan_result\" >&2\n  exit 2\nfi\n```\n\n**Use command hooks when:** Integrating with external tools that provide yes/no answers.\n\n### 3. Very Fast Checks (< 50ms)\n\n```bash\n#!/bin/bash\n# Quick regex check\ncommand=$(echo \"$input\" | jq -r '.tool_input.command')\n\nif [[ \"$command\" =~ ^(ls|pwd|echo)$ ]]; then\n  exit 0  # Safe commands\nfi\n```\n\n**Use command hooks when:** Performance is critical and logic is simple.\n\n## Hybrid Approach\n\nCombine both for multi-stage validation:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/quick-check.sh\",\n          \"timeout\": 5\n        },\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Deep analysis of bash command: $TOOL_INPUT\",\n          \"timeout\": 15\n        }\n      ]\n    }\n  ]\n}\n```\n\nThe command hook does fast deterministic checks, while the prompt hook handles complex reasoning.\n\n## Migration Checklist\n\nWhen migrating hooks:\n\n- [ ] Identify the validation logic in the command hook\n- [ ] Convert hard-coded patterns to natural language criteria\n- [ ] Test with edge cases the old hook missed\n- [ ] Verify LLM understands the intent\n- [ ] Set appropriate timeout (usually 15-30s for prompt hooks)\n- [ ] Document the new hook in README\n- [ ] Remove or archive old script files\n\n## Migration Tips\n\n1. **Start with one hook**: Don't migrate everything at once\n2. **Test thoroughly**: Verify prompt hook catches what command hook caught\n3. **Look for improvements**: Use migration as opportunity to enhance validation\n4. **Keep scripts for reference**: Archive old scripts in case you need to reference the logic\n5. **Document reasoning**: Explain why prompt hook is better in README\n\n## Complete Migration Example\n\n### Original Plugin Structure\n\n```\nmy-plugin/\n├── .claude-plugin/plugin.json\n├── hooks/hooks.json\n└── scripts/\n    ├── validate-bash.sh\n    ├── validate-write.sh\n    └── check-tests.sh\n```\n\n### After Migration\n\n```\nmy-plugin/\n├── .claude-plugin/plugin.json\n├── hooks/hooks.json      # Now uses prompt hooks\n└── scripts/              # Archive or delete\n    └── archive/\n        ├── validate-bash.sh\n        ├── validate-write.sh\n        └── check-tests.sh\n```\n\n### Updated hooks.json\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate bash command safety: destructive ops, privilege escalation, network access\"\n        }\n      ]\n    },\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate file write safety: system paths, credentials, path traversal, content secrets\"\n        }\n      ]\n    }\n  ],\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Verify tests were run if code was modified\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Result:** Simpler, more maintainable, more powerful.\n\n## Common Migration Patterns\n\n### Pattern: String Contains → Natural Language\n\n**Before:**\n```bash\nif [[ \"$command\" == *\"sudo\"* ]]; then\n  echo \"Privilege escalation\" >&2\n  exit 2\nfi\n```\n\n**After:**\n```\n\"Check for privilege escalation (sudo, su, etc)\"\n```\n\n### Pattern: Regex → Intent\n\n**Before:**\n```bash\nif [[ \"$file\" =~ \\.(env|secret|key|token)$ ]]; then\n  echo \"Credential file\" >&2\n  exit 2\nfi\n```\n\n**After:**\n```\n\"Verify not writing to credential files (.env, secrets, keys, tokens)\"\n```\n\n### Pattern: Multiple Conditions → Criteria List\n\n**Before:**\n```bash\nif [ condition1 ] || [ condition2 ] || [ condition3 ]; then\n  echo \"Invalid\" >&2\n  exit 2\nfi\n```\n\n**After:**\n```\n\"Check: 1) condition1 2) condition2 3) condition3. Deny if any fail.\"\n```\n\n## Conclusion\n\nMigrating to prompt-based hooks makes plugins more maintainable, flexible, and powerful. Reserve command hooks for deterministic checks and external tool integration.\n",
        "plugins/plugin-dev/skills/hook-development/references/patterns.md": "# Common Hook Patterns\n\nThis reference provides common, proven patterns for implementing Claude Code hooks. Use these patterns as starting points for typical hook use cases.\n\n## Pattern 1: Security Validation\n\nBlock dangerous file writes using prompt-based hooks:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"File path: $TOOL_INPUT.file_path. Verify: 1) Not in /etc or system directories 2) Not .env or credentials 3) Path doesn't contain '..' traversal. Return 'approve' or 'deny'.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** Preventing writes to sensitive files or system directories.\n\n## Pattern 2: Test Enforcement\n\nEnsure tests run before stopping:\n\n```json\n{\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Review transcript. If code was modified (Write/Edit tools used), verify tests were executed. If no tests were run, block with reason 'Tests must be run after code changes'.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** Enforcing quality standards and preventing incomplete work.\n\n## Pattern 3: Context Loading\n\nLoad project-specific context at session start:\n\n```json\n{\n  \"SessionStart\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/load-context.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Example script (load-context.sh):**\n```bash\n#!/bin/bash\ncd \"$CLAUDE_PROJECT_DIR\" || exit 1\n\n# Detect project type\nif [ -f \"package.json\" ]; then\n  echo \"📦 Node.js project detected\"\n  echo \"export PROJECT_TYPE=nodejs\" >> \"$CLAUDE_ENV_FILE\"\nelif [ -f \"Cargo.toml\" ]; then\n  echo \"🦀 Rust project detected\"\n  echo \"export PROJECT_TYPE=rust\" >> \"$CLAUDE_ENV_FILE\"\nfi\n```\n\n**Use for:** Automatically detecting and configuring project-specific settings.\n\n## Pattern 4: Notification Logging\n\nLog all notifications for audit or analysis:\n\n```json\n{\n  \"Notification\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/log-notification.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** Tracking user notifications or integration with external logging systems.\n\n## Pattern 5: MCP Tool Monitoring\n\nMonitor and validate MCP tool usage:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"mcp__.*__delete.*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Deletion operation detected. Verify: Is this deletion intentional? Can it be undone? Are there backups? Return 'approve' only if safe.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** Protecting against destructive MCP operations.\n\n## Pattern 6: Build Verification\n\nEnsure project builds after code changes:\n\n```json\n{\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Check if code was modified. If Write/Edit tools were used, verify the project was built (npm run build, cargo build, etc). If not built, block and request build.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** Catching build errors before committing or stopping work.\n\n## Pattern 7: Permission Confirmation\n\nAsk user before dangerous operations:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Command: $TOOL_INPUT.command. If command contains 'rm', 'delete', 'drop', or other destructive operations, return 'ask' to confirm with user. Otherwise 'approve'.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Use for:** User confirmation on potentially destructive commands.\n\n## Pattern 8: Code Quality Checks\n\nRun linters or formatters on file edits:\n\n```json\n{\n  \"PostToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/check-quality.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Example script (check-quality.sh):**\n```bash\n#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\n\n# Run linter if applicable\nif [[ \"$file_path\" == *.js ]] || [[ \"$file_path\" == *.ts ]]; then\n  npx eslint \"$file_path\" 2>&1 || true\nfi\n```\n\n**Use for:** Automatic code quality enforcement.\n\n## Pattern Combinations\n\nCombine multiple patterns for comprehensive protection:\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate file write safety\"\n        }\n      ]\n    },\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Validate bash command safety\"\n        }\n      ]\n    }\n  ],\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Verify tests run and build succeeded\"\n        }\n      ]\n    }\n  ],\n  \"SessionStart\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/load-context.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\nThis provides multi-layered protection and automation.\n\n## Pattern 9: Temporarily Active Hooks\n\nCreate hooks that only run when explicitly enabled via flag files:\n\n```bash\n#!/bin/bash\n# Hook only active when flag file exists\nFLAG_FILE=\"$CLAUDE_PROJECT_DIR/.enable-security-scan\"\n\nif [ ! -f \"$FLAG_FILE\" ]; then\n  # Quick exit when disabled\n  exit 0\nfi\n\n# Flag present, run validation\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path')\n\n# Run security scan\nsecurity-scanner \"$file_path\"\n```\n\n**Activation:**\n```bash\n# Enable the hook\ntouch .enable-security-scan\n\n# Disable the hook\nrm .enable-security-scan\n```\n\n**Use for:**\n- Temporary debugging hooks\n- Feature flags for development\n- Project-specific validation that's opt-in\n- Performance-intensive checks only when needed\n\n**Note:** Must restart Claude Code after creating/removing flag files for hooks to recognize changes.\n\n## Pattern 10: Configuration-Driven Hooks\n\nUse JSON configuration to control hook behavior:\n\n```bash\n#!/bin/bash\nCONFIG_FILE=\"$CLAUDE_PROJECT_DIR/.claude/my-plugin.local.json\"\n\n# Read configuration\nif [ -f \"$CONFIG_FILE\" ]; then\n  strict_mode=$(jq -r '.strictMode // false' \"$CONFIG_FILE\")\n  max_file_size=$(jq -r '.maxFileSize // 1000000' \"$CONFIG_FILE\")\nelse\n  # Defaults\n  strict_mode=false\n  max_file_size=1000000\nfi\n\n# Skip if not in strict mode\nif [ \"$strict_mode\" != \"true\" ]; then\n  exit 0\nfi\n\n# Apply configured limits\ninput=$(cat)\nfile_size=$(echo \"$input\" | jq -r '.tool_input.content | length')\n\nif [ \"$file_size\" -gt \"$max_file_size\" ]; then\n  echo '{\"decision\": \"deny\", \"reason\": \"File exceeds configured size limit\"}' >&2\n  exit 2\nfi\n```\n\n**Configuration file (.claude/my-plugin.local.json):**\n```json\n{\n  \"strictMode\": true,\n  \"maxFileSize\": 500000,\n  \"allowedPaths\": [\"/tmp\", \"/home/user/projects\"]\n}\n```\n\n**Use for:**\n- User-configurable hook behavior\n- Per-project settings\n- Team-specific rules\n- Dynamic validation criteria\n",
        "plugins/plugin-dev/skills/hook-development/scripts/README.md": "# Hook Development Utility Scripts\n\nThese scripts help validate, test, and lint hook implementations before deployment.\n\n## validate-hook-schema.sh\n\nValidates `hooks.json` configuration files for correct structure and common issues.\n\n**Usage:**\n```bash\n./validate-hook-schema.sh path/to/hooks.json\n```\n\n**Checks:**\n- Valid JSON syntax\n- Required fields present\n- Valid hook event names\n- Proper hook types (command/prompt)\n- Timeout values in valid ranges\n- Hardcoded path detection\n- Prompt hook event compatibility\n\n**Example:**\n```bash\ncd my-plugin\n./validate-hook-schema.sh hooks/hooks.json\n```\n\n## test-hook.sh\n\nTests individual hook scripts with sample input before deploying to Claude Code.\n\n**Usage:**\n```bash\n./test-hook.sh [options] <hook-script> <test-input.json>\n```\n\n**Options:**\n- `-v, --verbose` - Show detailed execution information\n- `-t, --timeout N` - Set timeout in seconds (default: 60)\n- `--create-sample <event-type>` - Generate sample test input\n\n**Example:**\n```bash\n# Create sample test input\n./test-hook.sh --create-sample PreToolUse > test-input.json\n\n# Test a hook script\n./test-hook.sh my-hook.sh test-input.json\n\n# Test with verbose output and custom timeout\n./test-hook.sh -v -t 30 my-hook.sh test-input.json\n```\n\n**Features:**\n- Sets up proper environment variables (CLAUDE_PROJECT_DIR, CLAUDE_PLUGIN_ROOT)\n- Measures execution time\n- Validates output JSON\n- Shows exit codes and their meanings\n- Captures environment file output\n\n## hook-linter.sh\n\nChecks hook scripts for common issues and best practices violations.\n\n**Usage:**\n```bash\n./hook-linter.sh <hook-script.sh> [hook-script2.sh ...]\n```\n\n**Checks:**\n- Shebang presence\n- `set -euo pipefail` usage\n- Stdin input reading\n- Proper error handling\n- Variable quoting (injection prevention)\n- Exit code usage\n- Hardcoded paths\n- Long-running code detection\n- Error output to stderr\n- Input validation\n\n**Example:**\n```bash\n# Lint single script\n./hook-linter.sh ../examples/validate-write.sh\n\n# Lint multiple scripts\n./hook-linter.sh ../examples/*.sh\n```\n\n## Typical Workflow\n\n1. **Write your hook script**\n   ```bash\n   vim my-plugin/scripts/my-hook.sh\n   ```\n\n2. **Lint the script**\n   ```bash\n   ./hook-linter.sh my-plugin/scripts/my-hook.sh\n   ```\n\n3. **Create test input**\n   ```bash\n   ./test-hook.sh --create-sample PreToolUse > test-input.json\n   # Edit test-input.json as needed\n   ```\n\n4. **Test the hook**\n   ```bash\n   ./test-hook.sh -v my-plugin/scripts/my-hook.sh test-input.json\n   ```\n\n5. **Add to hooks.json**\n   ```bash\n   # Edit my-plugin/hooks/hooks.json\n   ```\n\n6. **Validate configuration**\n   ```bash\n   ./validate-hook-schema.sh my-plugin/hooks/hooks.json\n   ```\n\n7. **Test in Claude Code**\n   ```bash\n   claude --debug\n   ```\n\n## Tips\n\n- Always test hooks before deploying to avoid breaking user workflows\n- Use verbose mode (`-v`) to debug hook behavior\n- Check the linter output for security and best practice issues\n- Validate hooks.json after any changes\n- Create different test inputs for various scenarios (safe operations, dangerous operations, edge cases)\n\n## Common Issues\n\n### Hook doesn't execute\n\nCheck:\n- Script has shebang (`#!/bin/bash`)\n- Script is executable (`chmod +x`)\n- Path in hooks.json is correct (use `${CLAUDE_PLUGIN_ROOT}`)\n\n### Hook times out\n\n- Reduce timeout in hooks.json\n- Optimize hook script performance\n- Remove long-running operations\n\n### Hook fails silently\n\n- Check exit codes (should be 0 or 2)\n- Ensure errors go to stderr (`>&2`)\n- Validate JSON output structure\n\n### Injection vulnerabilities\n\n- Always quote variables: `\"$variable\"`\n- Use `set -euo pipefail`\n- Validate all input fields\n- Run the linter to catch issues\n",
        "plugins/plugin-dev/skills/mcp-integration/SKILL.md": "---\nname: MCP Integration\ndescription: This skill should be used when the user asks to \"add MCP server\", \"integrate MCP\", \"configure MCP in plugin\", \"use .mcp.json\", \"set up Model Context Protocol\", \"connect external service\", mentions \"${CLAUDE_PLUGIN_ROOT} with MCP\", or discusses MCP server types (SSE, stdio, HTTP, WebSocket). Provides comprehensive guidance for integrating Model Context Protocol servers into Claude Code plugins for external tool and service integration.\nversion: 0.1.0\n---\n\n# MCP Integration for Claude Code Plugins\n\n## Overview\n\nModel Context Protocol (MCP) enables Claude Code plugins to integrate with external services and APIs by providing structured tool access. Use MCP integration to expose external service capabilities as tools within Claude Code.\n\n**Key capabilities:**\n- Connect to external services (databases, APIs, file systems)\n- Provide 10+ related tools from a single service\n- Handle OAuth and complex authentication flows\n- Bundle MCP servers with plugins for automatic setup\n\n## MCP Server Configuration Methods\n\nPlugins can bundle MCP servers in two ways:\n\n### Method 1: Dedicated .mcp.json (Recommended)\n\nCreate `.mcp.json` at plugin root:\n\n```json\n{\n  \"database-tools\": {\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/db-server\",\n    \"args\": [\"--config\", \"${CLAUDE_PLUGIN_ROOT}/config.json\"],\n    \"env\": {\n      \"DB_URL\": \"${DB_URL}\"\n    }\n  }\n}\n```\n\n**Benefits:**\n- Clear separation of concerns\n- Easier to maintain\n- Better for multiple servers\n\n### Method 2: Inline in plugin.json\n\nAdd `mcpServers` field to plugin.json:\n\n```json\n{\n  \"name\": \"my-plugin\",\n  \"version\": \"1.0.0\",\n  \"mcpServers\": {\n    \"plugin-api\": {\n      \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/api-server\",\n      \"args\": [\"--port\", \"8080\"]\n    }\n  }\n}\n```\n\n**Benefits:**\n- Single configuration file\n- Good for simple single-server plugins\n\n## MCP Server Types\n\n### stdio (Local Process)\n\nExecute local MCP servers as child processes. Best for local tools and custom servers.\n\n**Configuration:**\n```json\n{\n  \"filesystem\": {\n    \"command\": \"npx\",\n    \"args\": [\"-y\", \"@modelcontextprotocol/server-filesystem\", \"/allowed/path\"],\n    \"env\": {\n      \"LOG_LEVEL\": \"debug\"\n    }\n  }\n}\n```\n\n**Use cases:**\n- File system access\n- Local database connections\n- Custom MCP servers\n- NPM-packaged MCP servers\n\n**Process management:**\n- Claude Code spawns and manages the process\n- Communicates via stdin/stdout\n- Terminates when Claude Code exits\n\n### SSE (Server-Sent Events)\n\nConnect to hosted MCP servers with OAuth support. Best for cloud services.\n\n**Configuration:**\n```json\n{\n  \"asana\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.asana.com/sse\"\n  }\n}\n```\n\n**Use cases:**\n- Official hosted MCP servers (Asana, GitHub, etc.)\n- Cloud services with MCP endpoints\n- OAuth-based authentication\n- No local installation needed\n\n**Authentication:**\n- OAuth flows handled automatically\n- User prompted on first use\n- Tokens managed by Claude Code\n\n### HTTP (REST API)\n\nConnect to RESTful MCP servers with token authentication.\n\n**Configuration:**\n```json\n{\n  \"api-service\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\",\n      \"X-Custom-Header\": \"value\"\n    }\n  }\n}\n```\n\n**Use cases:**\n- REST API-based MCP servers\n- Token-based authentication\n- Custom API backends\n- Stateless interactions\n\n### WebSocket (Real-time)\n\nConnect to WebSocket MCP servers for real-time bidirectional communication.\n\n**Configuration:**\n```json\n{\n  \"realtime-service\": {\n    \"type\": \"ws\",\n    \"url\": \"wss://mcp.example.com/ws\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${TOKEN}\"\n    }\n  }\n}\n```\n\n**Use cases:**\n- Real-time data streaming\n- Persistent connections\n- Push notifications from server\n- Low-latency requirements\n\n## Environment Variable Expansion\n\nAll MCP configurations support environment variable substitution:\n\n**${CLAUDE_PLUGIN_ROOT}** - Plugin directory (always use for portability):\n```json\n{\n  \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/my-server\"\n}\n```\n\n**User environment variables** - From user's shell:\n```json\n{\n  \"env\": {\n    \"API_KEY\": \"${MY_API_KEY}\",\n    \"DATABASE_URL\": \"${DB_URL}\"\n  }\n}\n```\n\n**Best practice:** Document all required environment variables in plugin README.\n\n## MCP Tool Naming\n\nWhen MCP servers provide tools, they're automatically prefixed:\n\n**Format:** `mcp__plugin_<plugin-name>_<server-name>__<tool-name>`\n\n**Example:**\n- Plugin: `asana`\n- Server: `asana`\n- Tool: `create_task`\n- **Full name:** `mcp__plugin_asana_asana__asana_create_task`\n\n### Using MCP Tools in Commands\n\nPre-allow specific MCP tools in command frontmatter:\n\n```markdown\n---\nallowed-tools: [\n  \"mcp__plugin_asana_asana__asana_create_task\",\n  \"mcp__plugin_asana_asana__asana_search_tasks\"\n]\n---\n```\n\n**Wildcard (use sparingly):**\n```markdown\n---\nallowed-tools: [\"mcp__plugin_asana_asana__*\"]\n---\n```\n\n**Best practice:** Pre-allow specific tools, not wildcards, for security.\n\n## Lifecycle Management\n\n**Automatic startup:**\n- MCP servers start when plugin enables\n- Connection established before first tool use\n- Restart required for configuration changes\n\n**Lifecycle:**\n1. Plugin loads\n2. MCP configuration parsed\n3. Server process started (stdio) or connection established (SSE/HTTP/WS)\n4. Tools discovered and registered\n5. Tools available as `mcp__plugin_...__...`\n\n**Viewing servers:**\nUse `/mcp` command to see all servers including plugin-provided ones.\n\n## Authentication Patterns\n\n### OAuth (SSE/HTTP)\n\nOAuth handled automatically by Claude Code:\n\n```json\n{\n  \"type\": \"sse\",\n  \"url\": \"https://mcp.example.com/sse\"\n}\n```\n\nUser authenticates in browser on first use. No additional configuration needed.\n\n### Token-Based (Headers)\n\nStatic or environment variable tokens:\n\n```json\n{\n  \"type\": \"http\",\n  \"url\": \"https://api.example.com\",\n  \"headers\": {\n    \"Authorization\": \"Bearer ${API_TOKEN}\"\n  }\n}\n```\n\nDocument required environment variables in README.\n\n### Environment Variables (stdio)\n\nPass configuration to MCP server:\n\n```json\n{\n  \"command\": \"python\",\n  \"args\": [\"-m\", \"my_mcp_server\"],\n  \"env\": {\n    \"DATABASE_URL\": \"${DB_URL}\",\n    \"API_KEY\": \"${API_KEY}\",\n    \"LOG_LEVEL\": \"info\"\n  }\n}\n```\n\n## Integration Patterns\n\n### Pattern 1: Simple Tool Wrapper\n\nCommands use MCP tools with user interaction:\n\n```markdown\n# Command: create-item.md\n---\nallowed-tools: [\"mcp__plugin_name_server__create_item\"]\n---\n\nSteps:\n1. Gather item details from user\n2. Use mcp__plugin_name_server__create_item\n3. Confirm creation\n```\n\n**Use for:** Adding validation or preprocessing before MCP calls.\n\n### Pattern 2: Autonomous Agent\n\nAgents use MCP tools autonomously:\n\n```markdown\n# Agent: data-analyzer.md\n\nAnalysis Process:\n1. Query data via mcp__plugin_db_server__query\n2. Process and analyze results\n3. Generate insights report\n```\n\n**Use for:** Multi-step MCP workflows without user interaction.\n\n### Pattern 3: Multi-Server Plugin\n\nIntegrate multiple MCP servers:\n\n```json\n{\n  \"github\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.github.com/sse\"\n  },\n  \"jira\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.jira.com/sse\"\n  }\n}\n```\n\n**Use for:** Workflows spanning multiple services.\n\n## Security Best Practices\n\n### Use HTTPS/WSS\n\nAlways use secure connections:\n\n```json\n✅ \"url\": \"https://mcp.example.com/sse\"\n❌ \"url\": \"http://mcp.example.com/sse\"\n```\n\n### Token Management\n\n**DO:**\n- ✅ Use environment variables for tokens\n- ✅ Document required env vars in README\n- ✅ Let OAuth flow handle authentication\n\n**DON'T:**\n- ❌ Hardcode tokens in configuration\n- ❌ Commit tokens to git\n- ❌ Share tokens in documentation\n\n### Permission Scoping\n\nPre-allow only necessary MCP tools:\n\n```markdown\n✅ allowed-tools: [\n  \"mcp__plugin_api_server__read_data\",\n  \"mcp__plugin_api_server__create_item\"\n]\n\n❌ allowed-tools: [\"mcp__plugin_api_server__*\"]\n```\n\n## Error Handling\n\n### Connection Failures\n\nHandle MCP server unavailability:\n- Provide fallback behavior in commands\n- Inform user of connection issues\n- Check server URL and configuration\n\n### Tool Call Errors\n\nHandle failed MCP operations:\n- Validate inputs before calling MCP tools\n- Provide clear error messages\n- Check rate limiting and quotas\n\n### Configuration Errors\n\nValidate MCP configuration:\n- Test server connectivity during development\n- Validate JSON syntax\n- Check required environment variables\n\n## Performance Considerations\n\n### Lazy Loading\n\nMCP servers connect on-demand:\n- Not all servers connect at startup\n- First tool use triggers connection\n- Connection pooling managed automatically\n\n### Batching\n\nBatch similar requests when possible:\n\n```\n# Good: Single query with filters\ntasks = search_tasks(project=\"X\", assignee=\"me\", limit=50)\n\n# Avoid: Many individual queries\nfor id in task_ids:\n    task = get_task(id)\n```\n\n## Testing MCP Integration\n\n### Local Testing\n\n1. Configure MCP server in `.mcp.json`\n2. Install plugin locally (`.claude-plugin/`)\n3. Run `/mcp` to verify server appears\n4. Test tool calls in commands\n5. Check `claude --debug` logs for connection issues\n\n### Validation Checklist\n\n- [ ] MCP configuration is valid JSON\n- [ ] Server URL is correct and accessible\n- [ ] Required environment variables documented\n- [ ] Tools appear in `/mcp` output\n- [ ] Authentication works (OAuth or tokens)\n- [ ] Tool calls succeed from commands\n- [ ] Error cases handled gracefully\n\n## Debugging\n\n### Enable Debug Logging\n\n```bash\nclaude --debug\n```\n\nLook for:\n- MCP server connection attempts\n- Tool discovery logs\n- Authentication flows\n- Tool call errors\n\n### Common Issues\n\n**Server not connecting:**\n- Check URL is correct\n- Verify server is running (stdio)\n- Check network connectivity\n- Review authentication configuration\n\n**Tools not available:**\n- Verify server connected successfully\n- Check tool names match exactly\n- Run `/mcp` to see available tools\n- Restart Claude Code after config changes\n\n**Authentication failing:**\n- Clear cached auth tokens\n- Re-authenticate\n- Check token scopes and permissions\n- Verify environment variables set\n\n## Quick Reference\n\n### MCP Server Types\n\n| Type | Transport | Best For | Auth |\n|------|-----------|----------|------|\n| stdio | Process | Local tools, custom servers | Env vars |\n| SSE | HTTP | Hosted services, cloud APIs | OAuth |\n| HTTP | REST | API backends, token auth | Tokens |\n| ws | WebSocket | Real-time, streaming | Tokens |\n\n### Configuration Checklist\n\n- [ ] Server type specified (stdio/SSE/HTTP/ws)\n- [ ] Type-specific fields complete (command or url)\n- [ ] Authentication configured\n- [ ] Environment variables documented\n- [ ] HTTPS/WSS used (not HTTP/WS)\n- [ ] ${CLAUDE_PLUGIN_ROOT} used for paths\n\n### Best Practices\n\n**DO:**\n- ✅ Use ${CLAUDE_PLUGIN_ROOT} for portable paths\n- ✅ Document required environment variables\n- ✅ Use secure connections (HTTPS/WSS)\n- ✅ Pre-allow specific MCP tools in commands\n- ✅ Test MCP integration before publishing\n- ✅ Handle connection and tool errors gracefully\n\n**DON'T:**\n- ❌ Hardcode absolute paths\n- ❌ Commit credentials to git\n- ❌ Use HTTP instead of HTTPS\n- ❌ Pre-allow all tools with wildcards\n- ❌ Skip error handling\n- ❌ Forget to document setup\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed information, consult:\n\n- **`references/server-types.md`** - Deep dive on each server type\n- **`references/authentication.md`** - Authentication patterns and OAuth\n- **`references/tool-usage.md`** - Using MCP tools in commands and agents\n\n### Example Configurations\n\nWorking examples in `examples/`:\n\n- **`stdio-server.json`** - Local stdio MCP server\n- **`sse-server.json`** - Hosted SSE server with OAuth\n- **`http-server.json`** - REST API with token auth\n\n### External Resources\n\n- **Official MCP Docs**: https://modelcontextprotocol.io/\n- **Claude Code MCP Docs**: https://docs.claude.com/en/docs/claude-code/mcp\n- **MCP SDK**: @modelcontextprotocol/sdk\n- **Testing**: Use `claude --debug` and `/mcp` command\n\n## Implementation Workflow\n\nTo add MCP integration to a plugin:\n\n1. Choose MCP server type (stdio, SSE, HTTP, ws)\n2. Create `.mcp.json` at plugin root with configuration\n3. Use ${CLAUDE_PLUGIN_ROOT} for all file references\n4. Document required environment variables in README\n5. Test locally with `/mcp` command\n6. Pre-allow MCP tools in relevant commands\n7. Handle authentication (OAuth or tokens)\n8. Test error cases (connection failures, auth errors)\n9. Document MCP integration in plugin README\n\nFocus on stdio for custom/local servers, SSE for hosted services with OAuth.\n",
        "plugins/plugin-dev/skills/mcp-integration/references/authentication.md": "# MCP Authentication Patterns\n\nComplete guide to authentication methods for MCP servers in Claude Code plugins.\n\n## Overview\n\nMCP servers support multiple authentication methods depending on the server type and service requirements. Choose the method that best matches your use case and security requirements.\n\n## OAuth (Automatic)\n\n### How It Works\n\nClaude Code automatically handles the complete OAuth 2.0 flow for SSE and HTTP servers:\n\n1. User attempts to use MCP tool\n2. Claude Code detects authentication needed\n3. Opens browser for OAuth consent\n4. User authorizes in browser\n5. Tokens stored securely by Claude Code\n6. Automatic token refresh\n\n### Configuration\n\n```json\n{\n  \"service\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\"\n  }\n}\n```\n\nNo additional auth configuration needed! Claude Code handles everything.\n\n### Supported Services\n\n**Known OAuth-enabled MCP servers:**\n- Asana: `https://mcp.asana.com/sse`\n- GitHub (when available)\n- Google services (when available)\n- Custom OAuth servers\n\n### OAuth Scopes\n\nOAuth scopes are determined by the MCP server. Users see required scopes during the consent flow.\n\n**Document required scopes in your README:**\n```markdown\n## Authentication\n\nThis plugin requires the following Asana permissions:\n- Read tasks and projects\n- Create and update tasks\n- Access workspace data\n```\n\n### Token Storage\n\nTokens are stored securely by Claude Code:\n- Not accessible to plugins\n- Encrypted at rest\n- Automatic refresh\n- Cleared on sign-out\n\n### Troubleshooting OAuth\n\n**Authentication loop:**\n- Clear cached tokens (sign out and sign in)\n- Check OAuth redirect URLs\n- Verify server OAuth configuration\n\n**Scope issues:**\n- User may need to re-authorize for new scopes\n- Check server documentation for required scopes\n\n**Token expiration:**\n- Claude Code auto-refreshes\n- If refresh fails, prompts re-authentication\n\n## Token-Based Authentication\n\n### Bearer Tokens\n\nMost common for HTTP and WebSocket servers.\n\n**Configuration:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\"\n    }\n  }\n}\n```\n\n**Environment variable:**\n```bash\nexport API_TOKEN=\"your-secret-token-here\"\n```\n\n### API Keys\n\nAlternative to Bearer tokens, often in custom headers.\n\n**Configuration:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"X-API-Key\": \"${API_KEY}\",\n      \"X-API-Secret\": \"${API_SECRET}\"\n    }\n  }\n}\n```\n\n### Custom Headers\n\nServices may use custom authentication headers.\n\n**Configuration:**\n```json\n{\n  \"service\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\",\n    \"headers\": {\n      \"X-Auth-Token\": \"${AUTH_TOKEN}\",\n      \"X-User-ID\": \"${USER_ID}\",\n      \"X-Tenant-ID\": \"${TENANT_ID}\"\n    }\n  }\n}\n```\n\n### Documenting Token Requirements\n\nAlways document in your README:\n\n```markdown\n## Setup\n\n### Required Environment Variables\n\nSet these environment variables before using the plugin:\n\n\\`\\`\\`bash\nexport API_TOKEN=\"your-token-here\"\nexport API_SECRET=\"your-secret-here\"\n\\`\\`\\`\n\n### Obtaining Tokens\n\n1. Visit https://api.example.com/tokens\n2. Create a new API token\n3. Copy the token and secret\n4. Set environment variables as shown above\n\n### Token Permissions\n\nThe API token needs the following permissions:\n- Read access to resources\n- Write access for creating items\n- Delete access (optional, for cleanup operations)\n\\`\\`\\`\n```\n\n## Environment Variable Authentication (stdio)\n\n### Passing Credentials to Server\n\nFor stdio servers, pass credentials via environment variables:\n\n```json\n{\n  \"database\": {\n    \"command\": \"python\",\n    \"args\": [\"-m\", \"mcp_server_db\"],\n    \"env\": {\n      \"DATABASE_URL\": \"${DATABASE_URL}\",\n      \"DB_USER\": \"${DB_USER}\",\n      \"DB_PASSWORD\": \"${DB_PASSWORD}\"\n    }\n  }\n}\n```\n\n### User Environment Variables\n\n```bash\n# User sets these in their shell\nexport DATABASE_URL=\"postgresql://localhost/mydb\"\nexport DB_USER=\"myuser\"\nexport DB_PASSWORD=\"mypassword\"\n```\n\n### Documentation Template\n\n```markdown\n## Database Configuration\n\nSet these environment variables:\n\n\\`\\`\\`bash\nexport DATABASE_URL=\"postgresql://host:port/database\"\nexport DB_USER=\"username\"\nexport DB_PASSWORD=\"password\"\n\\`\\`\\`\n\nOr create a `.env` file (add to `.gitignore`):\n\n\\`\\`\\`\nDATABASE_URL=postgresql://localhost:5432/mydb\nDB_USER=myuser\nDB_PASSWORD=mypassword\n\\`\\`\\`\n\nLoad with: \\`source .env\\` or \\`export $(cat .env | xargs)\\`\n\\`\\`\\`\n```\n\n## Dynamic Headers\n\n### Headers Helper Script\n\nFor tokens that change or expire, use a helper script:\n\n```json\n{\n  \"api\": {\n    \"type\": \"sse\",\n    \"url\": \"https://api.example.com\",\n    \"headersHelper\": \"${CLAUDE_PLUGIN_ROOT}/scripts/get-headers.sh\"\n  }\n}\n```\n\n**Script (get-headers.sh):**\n```bash\n#!/bin/bash\n# Generate dynamic authentication headers\n\n# Fetch fresh token\nTOKEN=$(get-fresh-token-from-somewhere)\n\n# Output JSON headers\ncat <<EOF\n{\n  \"Authorization\": \"Bearer $TOKEN\",\n  \"X-Timestamp\": \"$(date -Iseconds)\"\n}\nEOF\n```\n\n### Use Cases for Dynamic Headers\n\n- Short-lived tokens that need refresh\n- Tokens with HMAC signatures\n- Time-based authentication\n- Dynamic tenant/workspace selection\n\n## Security Best Practices\n\n### DO\n\n✅ **Use environment variables:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer ${API_TOKEN}\"\n  }\n}\n```\n\n✅ **Document required variables in README**\n\n✅ **Use HTTPS/WSS always**\n\n✅ **Implement token rotation**\n\n✅ **Store tokens securely (env vars, not files)**\n\n✅ **Let OAuth handle authentication when available**\n\n### DON'T\n\n❌ **Hardcode tokens:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer sk-abc123...\"  // NEVER!\n  }\n}\n```\n\n❌ **Commit tokens to git**\n\n❌ **Share tokens in documentation**\n\n❌ **Use HTTP instead of HTTPS**\n\n❌ **Store tokens in plugin files**\n\n❌ **Log tokens or sensitive headers**\n\n## Multi-Tenancy Patterns\n\n### Workspace/Tenant Selection\n\n**Via environment variable:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\",\n      \"X-Workspace-ID\": \"${WORKSPACE_ID}\"\n    }\n  }\n}\n```\n\n**Via URL:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://${TENANT_ID}.api.example.com/mcp\"\n  }\n}\n```\n\n### Per-User Configuration\n\nUsers set their own workspace:\n\n```bash\nexport WORKSPACE_ID=\"my-workspace-123\"\nexport TENANT_ID=\"my-company\"\n```\n\n## Authentication Troubleshooting\n\n### Common Issues\n\n**401 Unauthorized:**\n- Check token is set correctly\n- Verify token hasn't expired\n- Check token has required permissions\n- Ensure header format is correct\n\n**403 Forbidden:**\n- Token valid but lacks permissions\n- Check scope/permissions\n- Verify workspace/tenant ID\n- May need admin approval\n\n**Token not found:**\n```bash\n# Check environment variable is set\necho $API_TOKEN\n\n# If empty, set it\nexport API_TOKEN=\"your-token\"\n```\n\n**Token in wrong format:**\n```json\n// Correct\n\"Authorization\": \"Bearer sk-abc123\"\n\n// Wrong\n\"Authorization\": \"sk-abc123\"\n```\n\n### Debugging Authentication\n\n**Enable debug mode:**\n```bash\nclaude --debug\n```\n\nLook for:\n- Authentication header values (sanitized)\n- OAuth flow progress\n- Token refresh attempts\n- Authentication errors\n\n**Test authentication separately:**\n```bash\n# Test HTTP endpoint\ncurl -H \"Authorization: Bearer $API_TOKEN\" \\\n     https://api.example.com/mcp/health\n\n# Should return 200 OK\n```\n\n## Migration Patterns\n\n### From Hardcoded to Environment Variables\n\n**Before:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer sk-hardcoded-token\"\n  }\n}\n```\n\n**After:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer ${API_TOKEN}\"\n  }\n}\n```\n\n**Migration steps:**\n1. Add environment variable to plugin README\n2. Update configuration to use ${VAR}\n3. Test with variable set\n4. Remove hardcoded value\n5. Commit changes\n\n### From Basic Auth to OAuth\n\n**Before:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Basic ${BASE64_CREDENTIALS}\"\n  }\n}\n```\n\n**After:**\n```json\n{\n  \"type\": \"sse\",\n  \"url\": \"https://mcp.example.com/sse\"\n}\n```\n\n**Benefits:**\n- Better security\n- No credential management\n- Automatic token refresh\n- Scoped permissions\n\n## Advanced Authentication\n\n### Mutual TLS (mTLS)\n\nSome enterprise services require client certificates.\n\n**Not directly supported in MCP configuration.**\n\n**Workaround:** Wrap in stdio server that handles mTLS:\n\n```json\n{\n  \"secure-api\": {\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/mtls-wrapper\",\n    \"args\": [\"--cert\", \"${CLIENT_CERT}\", \"--key\", \"${CLIENT_KEY}\"],\n    \"env\": {\n      \"API_URL\": \"https://secure.example.com\"\n    }\n  }\n}\n```\n\n### JWT Tokens\n\nGenerate JWT tokens dynamically with headers helper:\n\n```bash\n#!/bin/bash\n# generate-jwt.sh\n\n# Generate JWT (using library or API call)\nJWT=$(generate-jwt-token)\n\necho \"{\\\"Authorization\\\": \\\"Bearer $JWT\\\"}\"\n```\n\n```json\n{\n  \"headersHelper\": \"${CLAUDE_PLUGIN_ROOT}/scripts/generate-jwt.sh\"\n}\n```\n\n### HMAC Signatures\n\nFor APIs requiring request signing:\n\n```bash\n#!/bin/bash\n# generate-hmac.sh\n\nTIMESTAMP=$(date -Iseconds)\nSIGNATURE=$(echo -n \"$TIMESTAMP\" | openssl dgst -sha256 -hmac \"$SECRET_KEY\" | cut -d' ' -f2)\n\ncat <<EOF\n{\n  \"X-Timestamp\": \"$TIMESTAMP\",\n  \"X-Signature\": \"$SIGNATURE\",\n  \"X-API-Key\": \"$API_KEY\"\n}\nEOF\n```\n\n## Best Practices Summary\n\n### For Plugin Developers\n\n1. **Prefer OAuth** when service supports it\n2. **Use environment variables** for tokens\n3. **Document all required variables** in README\n4. **Provide setup instructions** with examples\n5. **Never commit credentials**\n6. **Use HTTPS/WSS only**\n7. **Test authentication thoroughly**\n\n### For Plugin Users\n\n1. **Set environment variables** before using plugin\n2. **Keep tokens secure** and private\n3. **Rotate tokens regularly**\n4. **Use different tokens** for dev/prod\n5. **Don't commit .env files** to git\n6. **Review OAuth scopes** before authorizing\n\n## Conclusion\n\nChoose the authentication method that matches your MCP server's requirements:\n- **OAuth** for cloud services (easiest for users)\n- **Bearer tokens** for API services\n- **Environment variables** for stdio servers\n- **Dynamic headers** for complex auth flows\n\nAlways prioritize security and provide clear setup documentation for users.\n",
        "plugins/plugin-dev/skills/mcp-integration/references/server-types.md": "# MCP Server Types: Deep Dive\n\nComplete reference for all MCP server types supported in Claude Code plugins.\n\n## stdio (Standard Input/Output)\n\n### Overview\n\nExecute local MCP servers as child processes with communication via stdin/stdout. Best choice for local tools, custom servers, and NPM packages.\n\n### Configuration\n\n**Basic:**\n```json\n{\n  \"my-server\": {\n    \"command\": \"npx\",\n    \"args\": [\"-y\", \"my-mcp-server\"]\n  }\n}\n```\n\n**With environment:**\n```json\n{\n  \"my-server\": {\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/custom-server\",\n    \"args\": [\"--config\", \"${CLAUDE_PLUGIN_ROOT}/config.json\"],\n    \"env\": {\n      \"API_KEY\": \"${MY_API_KEY}\",\n      \"LOG_LEVEL\": \"debug\",\n      \"DATABASE_URL\": \"${DB_URL}\"\n    }\n  }\n}\n```\n\n### Process Lifecycle\n\n1. **Startup**: Claude Code spawns process with `command` and `args`\n2. **Communication**: JSON-RPC messages via stdin/stdout\n3. **Lifecycle**: Process runs for entire Claude Code session\n4. **Shutdown**: Process terminated when Claude Code exits\n\n### Use Cases\n\n**NPM Packages:**\n```json\n{\n  \"filesystem\": {\n    \"command\": \"npx\",\n    \"args\": [\"-y\", \"@modelcontextprotocol/server-filesystem\", \"/path\"]\n  }\n}\n```\n\n**Custom Scripts:**\n```json\n{\n  \"custom\": {\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/my-server.js\",\n    \"args\": [\"--verbose\"]\n  }\n}\n```\n\n**Python Servers:**\n```json\n{\n  \"python-server\": {\n    \"command\": \"python\",\n    \"args\": [\"-m\", \"my_mcp_server\"],\n    \"env\": {\n      \"PYTHONUNBUFFERED\": \"1\"\n    }\n  }\n}\n```\n\n### Best Practices\n\n1. **Use absolute paths or ${CLAUDE_PLUGIN_ROOT}**\n2. **Set PYTHONUNBUFFERED for Python servers**\n3. **Pass configuration via args or env, not stdin**\n4. **Handle server crashes gracefully**\n5. **Log to stderr, not stdout (stdout is for MCP protocol)**\n\n### Troubleshooting\n\n**Server won't start:**\n- Check command exists and is executable\n- Verify file paths are correct\n- Check permissions\n- Review `claude --debug` logs\n\n**Communication fails:**\n- Ensure server uses stdin/stdout correctly\n- Check for stray print/console.log statements\n- Verify JSON-RPC format\n\n## SSE (Server-Sent Events)\n\n### Overview\n\nConnect to hosted MCP servers via HTTP with server-sent events for streaming. Best for cloud services and OAuth authentication.\n\n### Configuration\n\n**Basic:**\n```json\n{\n  \"hosted-service\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\"\n  }\n}\n```\n\n**With headers:**\n```json\n{\n  \"service\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\",\n    \"headers\": {\n      \"X-API-Version\": \"v1\",\n      \"X-Client-ID\": \"${CLIENT_ID}\"\n    }\n  }\n}\n```\n\n### Connection Lifecycle\n\n1. **Initialization**: HTTP connection established to URL\n2. **Handshake**: MCP protocol negotiation\n3. **Streaming**: Server sends events via SSE\n4. **Requests**: Client sends HTTP POST for tool calls\n5. **Reconnection**: Automatic reconnection on disconnect\n\n### Authentication\n\n**OAuth (Automatic):**\n```json\n{\n  \"asana\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.asana.com/sse\"\n  }\n}\n```\n\nClaude Code handles OAuth flow:\n1. User prompted to authenticate on first use\n2. Opens browser for OAuth flow\n3. Tokens stored securely\n4. Automatic token refresh\n\n**Custom Headers:**\n```json\n{\n  \"service\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\"\n    }\n  }\n}\n```\n\n### Use Cases\n\n**Official Services:**\n- Asana: `https://mcp.asana.com/sse`\n- GitHub: `https://mcp.github.com/sse`\n- Other hosted MCP servers\n\n**Custom Hosted Servers:**\nDeploy your own MCP server and expose via HTTPS + SSE.\n\n### Best Practices\n\n1. **Always use HTTPS, never HTTP**\n2. **Let OAuth handle authentication when available**\n3. **Use environment variables for tokens**\n4. **Handle connection failures gracefully**\n5. **Document OAuth scopes required**\n\n### Troubleshooting\n\n**Connection refused:**\n- Check URL is correct and accessible\n- Verify HTTPS certificate is valid\n- Check network connectivity\n- Review firewall settings\n\n**OAuth fails:**\n- Clear cached tokens\n- Check OAuth scopes\n- Verify redirect URLs\n- Re-authenticate\n\n## HTTP (REST API)\n\n### Overview\n\nConnect to RESTful MCP servers via standard HTTP requests. Best for token-based auth and stateless interactions.\n\n### Configuration\n\n**Basic:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\"\n  }\n}\n```\n\n**With authentication:**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\",\n      \"Content-Type\": \"application/json\",\n      \"X-API-Version\": \"2024-01-01\"\n    }\n  }\n}\n```\n\n### Request/Response Flow\n\n1. **Tool Discovery**: GET to discover available tools\n2. **Tool Invocation**: POST with tool name and parameters\n3. **Response**: JSON response with results or errors\n4. **Stateless**: Each request independent\n\n### Authentication\n\n**Token-Based:**\n```json\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer ${API_TOKEN}\"\n  }\n}\n```\n\n**API Key:**\n```json\n{\n  \"headers\": {\n    \"X-API-Key\": \"${API_KEY}\"\n  }\n}\n```\n\n**Custom Auth:**\n```json\n{\n  \"headers\": {\n    \"X-Auth-Token\": \"${AUTH_TOKEN}\",\n    \"X-User-ID\": \"${USER_ID}\"\n  }\n}\n```\n\n### Use Cases\n\n- REST API backends\n- Internal services\n- Microservices\n- Serverless functions\n\n### Best Practices\n\n1. **Use HTTPS for all connections**\n2. **Store tokens in environment variables**\n3. **Implement retry logic for transient failures**\n4. **Handle rate limiting**\n5. **Set appropriate timeouts**\n\n### Troubleshooting\n\n**HTTP errors:**\n- 401: Check authentication headers\n- 403: Verify permissions\n- 429: Implement rate limiting\n- 500: Check server logs\n\n**Timeout issues:**\n- Increase timeout if needed\n- Check server performance\n- Optimize tool implementations\n\n## WebSocket (Real-time)\n\n### Overview\n\nConnect to MCP servers via WebSocket for real-time bidirectional communication. Best for streaming and low-latency applications.\n\n### Configuration\n\n**Basic:**\n```json\n{\n  \"realtime\": {\n    \"type\": \"ws\",\n    \"url\": \"wss://mcp.example.com/ws\"\n  }\n}\n```\n\n**With authentication:**\n```json\n{\n  \"realtime\": {\n    \"type\": \"ws\",\n    \"url\": \"wss://mcp.example.com/ws\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${TOKEN}\",\n      \"X-Client-ID\": \"${CLIENT_ID}\"\n    }\n  }\n}\n```\n\n### Connection Lifecycle\n\n1. **Handshake**: WebSocket upgrade request\n2. **Connection**: Persistent bidirectional channel\n3. **Messages**: JSON-RPC over WebSocket\n4. **Heartbeat**: Keep-alive messages\n5. **Reconnection**: Automatic on disconnect\n\n### Use Cases\n\n- Real-time data streaming\n- Live updates and notifications\n- Collaborative editing\n- Low-latency tool calls\n- Push notifications from server\n\n### Best Practices\n\n1. **Use WSS (secure WebSocket), never WS**\n2. **Implement heartbeat/ping-pong**\n3. **Handle reconnection logic**\n4. **Buffer messages during disconnection**\n5. **Set connection timeouts**\n\n### Troubleshooting\n\n**Connection drops:**\n- Implement reconnection logic\n- Check network stability\n- Verify server supports WebSocket\n- Review firewall settings\n\n**Message delivery:**\n- Implement message acknowledgment\n- Handle out-of-order messages\n- Buffer during disconnection\n\n## Comparison Matrix\n\n| Feature | stdio | SSE | HTTP | WebSocket |\n|---------|-------|-----|------|-----------|\n| **Transport** | Process | HTTP/SSE | HTTP | WebSocket |\n| **Direction** | Bidirectional | Server→Client | Request/Response | Bidirectional |\n| **State** | Stateful | Stateful | Stateless | Stateful |\n| **Auth** | Env vars | OAuth/Headers | Headers | Headers |\n| **Use Case** | Local tools | Cloud services | REST APIs | Real-time |\n| **Latency** | Lowest | Medium | Medium | Low |\n| **Setup** | Easy | Medium | Easy | Medium |\n| **Reconnect** | Process respawn | Automatic | N/A | Automatic |\n\n## Choosing the Right Type\n\n**Use stdio when:**\n- Running local tools or custom servers\n- Need lowest latency\n- Working with file systems or local databases\n- Distributing server with plugin\n\n**Use SSE when:**\n- Connecting to hosted services\n- Need OAuth authentication\n- Using official MCP servers (Asana, GitHub)\n- Want automatic reconnection\n\n**Use HTTP when:**\n- Integrating with REST APIs\n- Need stateless interactions\n- Using token-based auth\n- Simple request/response pattern\n\n**Use WebSocket when:**\n- Need real-time updates\n- Building collaborative features\n- Low-latency critical\n- Bi-directional streaming required\n\n## Migration Between Types\n\n### From stdio to SSE\n\n**Before (stdio):**\n```json\n{\n  \"local-server\": {\n    \"command\": \"node\",\n    \"args\": [\"server.js\"]\n  }\n}\n```\n\n**After (SSE - deploy server):**\n```json\n{\n  \"hosted-server\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\"\n  }\n}\n```\n\n### From HTTP to WebSocket\n\n**Before (HTTP):**\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\"\n  }\n}\n```\n\n**After (WebSocket):**\n```json\n{\n  \"realtime\": {\n    \"type\": \"ws\",\n    \"url\": \"wss://api.example.com/ws\"\n  }\n}\n```\n\nBenefits: Real-time updates, lower latency, bi-directional communication.\n\n## Advanced Configuration\n\n### Multiple Servers\n\nCombine different types:\n\n```json\n{\n  \"local-db\": {\n    \"command\": \"npx\",\n    \"args\": [\"-y\", \"mcp-server-sqlite\", \"./data.db\"]\n  },\n  \"cloud-api\": {\n    \"type\": \"sse\",\n    \"url\": \"https://mcp.example.com/sse\"\n  },\n  \"internal-service\": {\n    \"type\": \"http\",\n    \"url\": \"https://api.example.com/mcp\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\"\n    }\n  }\n}\n```\n\n### Conditional Configuration\n\nUse environment variables to switch servers:\n\n```json\n{\n  \"api\": {\n    \"type\": \"http\",\n    \"url\": \"${API_URL}\",\n    \"headers\": {\n      \"Authorization\": \"Bearer ${API_TOKEN}\"\n    }\n  }\n}\n```\n\nSet different values for dev/prod:\n- Dev: `API_URL=http://localhost:8080/mcp`\n- Prod: `API_URL=https://api.production.com/mcp`\n\n## Security Considerations\n\n### Stdio Security\n\n- Validate command paths\n- Don't execute user-provided commands\n- Limit environment variable access\n- Restrict file system access\n\n### Network Security\n\n- Always use HTTPS/WSS\n- Validate SSL certificates\n- Don't skip certificate verification\n- Use secure token storage\n\n### Token Management\n\n- Never hardcode tokens\n- Use environment variables\n- Rotate tokens regularly\n- Implement token refresh\n- Document scopes required\n\n## Conclusion\n\nChoose the MCP server type based on your use case:\n- **stdio** for local, custom, or NPM-packaged servers\n- **SSE** for hosted services with OAuth\n- **HTTP** for REST APIs with token auth\n- **WebSocket** for real-time bidirectional communication\n\nTest thoroughly and handle errors gracefully for robust MCP integration.\n",
        "plugins/plugin-dev/skills/mcp-integration/references/tool-usage.md": "# Using MCP Tools in Commands and Agents\n\nComplete guide to using MCP tools effectively in Claude Code plugin commands and agents.\n\n## Overview\n\nOnce an MCP server is configured, its tools become available with the prefix `mcp__plugin_<plugin-name>_<server-name>__<tool-name>`. Use these tools in commands and agents just like built-in Claude Code tools.\n\n## Tool Naming Convention\n\n### Format\n\n```\nmcp__plugin_<plugin-name>_<server-name>__<tool-name>\n```\n\n### Examples\n\n**Asana plugin with asana server:**\n- `mcp__plugin_asana_asana__asana_create_task`\n- `mcp__plugin_asana_asana__asana_search_tasks`\n- `mcp__plugin_asana_asana__asana_get_project`\n\n**Custom plugin with database server:**\n- `mcp__plugin_myplug_database__query`\n- `mcp__plugin_myplug_database__execute`\n- `mcp__plugin_myplug_database__list_tables`\n\n### Discovering Tool Names\n\n**Use `/mcp` command:**\n```bash\n/mcp\n```\n\nThis shows:\n- All available MCP servers\n- Tools provided by each server\n- Tool schemas and descriptions\n- Full tool names for use in configuration\n\n## Using Tools in Commands\n\n### Pre-Allowing Tools\n\nSpecify MCP tools in command frontmatter:\n\n```markdown\n---\ndescription: Create a new Asana task\nallowed-tools: [\n  \"mcp__plugin_asana_asana__asana_create_task\"\n]\n---\n\n# Create Task Command\n\nTo create a task:\n1. Gather task details from user\n2. Use mcp__plugin_asana_asana__asana_create_task with the details\n3. Confirm creation to user\n```\n\n### Multiple Tools\n\n```markdown\n---\nallowed-tools: [\n  \"mcp__plugin_asana_asana__asana_create_task\",\n  \"mcp__plugin_asana_asana__asana_search_tasks\",\n  \"mcp__plugin_asana_asana__asana_get_project\"\n]\n---\n```\n\n### Wildcard (Use Sparingly)\n\n```markdown\n---\nallowed-tools: [\"mcp__plugin_asana_asana__*\"]\n---\n```\n\n**Caution:** Only use wildcards if the command truly needs access to all tools from a server.\n\n### Tool Usage in Command Instructions\n\n**Example command:**\n```markdown\n---\ndescription: Search and create Asana tasks\nallowed-tools: [\n  \"mcp__plugin_asana_asana__asana_search_tasks\",\n  \"mcp__plugin_asana_asana__asana_create_task\"\n]\n---\n\n# Asana Task Management\n\n## Searching Tasks\n\nTo search for tasks:\n1. Use mcp__plugin_asana_asana__asana_search_tasks\n2. Provide search filters (assignee, project, etc.)\n3. Display results to user\n\n## Creating Tasks\n\nTo create a task:\n1. Gather task details:\n   - Title (required)\n   - Description\n   - Project\n   - Assignee\n   - Due date\n2. Use mcp__plugin_asana_asana__asana_create_task\n3. Show confirmation with task link\n```\n\n## Using Tools in Agents\n\n### Agent Configuration\n\nAgents can use MCP tools autonomously without pre-allowing them:\n\n```markdown\n---\nname: asana-status-updater\ndescription: This agent should be used when the user asks to \"update Asana status\", \"generate project report\", or \"sync Asana tasks\"\nmodel: inherit\ncolor: blue\n---\n\n## Role\n\nAutonomous agent for generating Asana project status reports.\n\n## Process\n\n1. **Query tasks**: Use mcp__plugin_asana_asana__asana_search_tasks to get all tasks\n2. **Analyze progress**: Calculate completion rates and identify blockers\n3. **Generate report**: Create formatted status update\n4. **Update Asana**: Use mcp__plugin_asana_asana__asana_create_comment to post report\n\n## Available Tools\n\nThe agent has access to all Asana MCP tools without pre-approval.\n```\n\n### Agent Tool Access\n\nAgents have broader tool access than commands:\n- Can use any tool Claude determines is necessary\n- Don't need pre-allowed lists\n- Should document which tools they typically use\n\n## Tool Call Patterns\n\n### Pattern 1: Simple Tool Call\n\nSingle tool call with validation:\n\n```markdown\nSteps:\n1. Validate user provided required fields\n2. Call mcp__plugin_api_server__create_item with validated data\n3. Check for errors\n4. Display confirmation\n```\n\n### Pattern 2: Sequential Tools\n\nChain multiple tool calls:\n\n```markdown\nSteps:\n1. Search for existing items: mcp__plugin_api_server__search\n2. If not found, create new: mcp__plugin_api_server__create\n3. Add metadata: mcp__plugin_api_server__update_metadata\n4. Return final item ID\n```\n\n### Pattern 3: Batch Operations\n\nMultiple calls with same tool:\n\n```markdown\nSteps:\n1. Get list of items to process\n2. For each item:\n   - Call mcp__plugin_api_server__update_item\n   - Track success/failure\n3. Report results summary\n```\n\n### Pattern 4: Error Handling\n\nGraceful error handling:\n\n```markdown\nSteps:\n1. Try to call mcp__plugin_api_server__get_data\n2. If error (rate limit, network, etc.):\n   - Wait and retry (max 3 attempts)\n   - If still failing, inform user\n   - Suggest checking configuration\n3. On success, process data\n```\n\n## Tool Parameters\n\n### Understanding Tool Schemas\n\nEach MCP tool has a schema defining its parameters. View with `/mcp`.\n\n**Example schema:**\n```json\n{\n  \"name\": \"asana_create_task\",\n  \"description\": \"Create a new Asana task\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": {\n        \"type\": \"string\",\n        \"description\": \"Task title\"\n      },\n      \"notes\": {\n        \"type\": \"string\",\n        \"description\": \"Task description\"\n      },\n      \"workspace\": {\n        \"type\": \"string\",\n        \"description\": \"Workspace GID\"\n      }\n    },\n    \"required\": [\"name\", \"workspace\"]\n  }\n}\n```\n\n### Calling Tools with Parameters\n\nClaude automatically structures tool calls based on schema:\n\n```typescript\n// Claude generates this internally\n{\n  toolName: \"mcp__plugin_asana_asana__asana_create_task\",\n  input: {\n    name: \"Review PR #123\",\n    notes: \"Code review for new feature\",\n    workspace: \"12345\",\n    assignee: \"67890\",\n    due_on: \"2025-01-15\"\n  }\n}\n```\n\n### Parameter Validation\n\n**In commands, validate before calling:**\n\n```markdown\nSteps:\n1. Check required parameters:\n   - Title is not empty\n   - Workspace ID is provided\n   - Due date is valid format (YYYY-MM-DD)\n2. If validation fails, ask user to provide missing data\n3. If validation passes, call MCP tool\n4. Handle tool errors gracefully\n```\n\n## Response Handling\n\n### Success Responses\n\n```markdown\nSteps:\n1. Call MCP tool\n2. On success:\n   - Extract relevant data from response\n   - Format for user display\n   - Provide confirmation message\n   - Include relevant links or IDs\n```\n\n### Error Responses\n\n```markdown\nSteps:\n1. Call MCP tool\n2. On error:\n   - Check error type (auth, rate limit, validation, etc.)\n   - Provide helpful error message\n   - Suggest remediation steps\n   - Don't expose internal error details to user\n```\n\n### Partial Success\n\n```markdown\nSteps:\n1. Batch operation with multiple MCP calls\n2. Track successes and failures separately\n3. Report summary:\n   - \"Successfully processed 8 of 10 items\"\n   - \"Failed items: [item1, item2] due to [reason]\"\n   - Suggest retry or manual intervention\n```\n\n## Performance Optimization\n\n### Batching Requests\n\n**Good: Single query with filters**\n```markdown\nSteps:\n1. Call mcp__plugin_api_server__search with filters:\n   - project_id: \"123\"\n   - status: \"active\"\n   - limit: 100\n2. Process all results\n```\n\n**Avoid: Many individual queries**\n```markdown\nSteps:\n1. For each item ID:\n   - Call mcp__plugin_api_server__get_item\n   - Process item\n```\n\n### Caching Results\n\n```markdown\nSteps:\n1. Call expensive MCP operation: mcp__plugin_api_server__analyze\n2. Store results in variable for reuse\n3. Use cached results for subsequent operations\n4. Only re-fetch if data changes\n```\n\n### Parallel Tool Calls\n\nWhen tools don't depend on each other, call in parallel:\n\n```markdown\nSteps:\n1. Make parallel calls (Claude handles this automatically):\n   - mcp__plugin_api_server__get_project\n   - mcp__plugin_api_server__get_users\n   - mcp__plugin_api_server__get_tags\n2. Wait for all to complete\n3. Combine results\n```\n\n## Integration Best Practices\n\n### User Experience\n\n**Provide feedback:**\n```markdown\nSteps:\n1. Inform user: \"Searching Asana tasks...\"\n2. Call mcp__plugin_asana_asana__asana_search_tasks\n3. Show progress: \"Found 15 tasks, analyzing...\"\n4. Present results\n```\n\n**Handle long operations:**\n```markdown\nSteps:\n1. Warn user: \"This may take a minute...\"\n2. Break into smaller steps with updates\n3. Show incremental progress\n4. Final summary when complete\n```\n\n### Error Messages\n\n**Good error messages:**\n```\n❌ \"Could not create task. Please check:\n   1. You're logged into Asana\n   2. You have access to workspace 'Engineering'\n   3. The project 'Q1 Goals' exists\"\n```\n\n**Poor error messages:**\n```\n❌ \"Error: MCP tool returned 403\"\n```\n\n### Documentation\n\n**Document MCP tool usage in command:**\n```markdown\n## MCP Tools Used\n\nThis command uses the following Asana MCP tools:\n- **asana_search_tasks**: Search for tasks matching criteria\n- **asana_create_task**: Create new task with details\n- **asana_update_task**: Update existing task properties\n\nEnsure you're authenticated to Asana before running this command.\n```\n\n## Testing Tool Usage\n\n### Local Testing\n\n1. **Configure MCP server** in `.mcp.json`\n2. **Install plugin locally** in `.claude-plugin/`\n3. **Verify tools available** with `/mcp`\n4. **Test command** that uses tools\n5. **Check debug output**: `claude --debug`\n\n### Test Scenarios\n\n**Test successful calls:**\n```markdown\nSteps:\n1. Create test data in external service\n2. Run command that queries this data\n3. Verify correct results returned\n```\n\n**Test error cases:**\n```markdown\nSteps:\n1. Test with missing authentication\n2. Test with invalid parameters\n3. Test with non-existent resources\n4. Verify graceful error handling\n```\n\n**Test edge cases:**\n```markdown\nSteps:\n1. Test with empty results\n2. Test with maximum results\n3. Test with special characters\n4. Test with concurrent access\n```\n\n## Common Patterns\n\n### Pattern: CRUD Operations\n\n```markdown\n---\nallowed-tools: [\n  \"mcp__plugin_api_server__create_item\",\n  \"mcp__plugin_api_server__read_item\",\n  \"mcp__plugin_api_server__update_item\",\n  \"mcp__plugin_api_server__delete_item\"\n]\n---\n\n# Item Management\n\n## Create\nUse create_item with required fields...\n\n## Read\nUse read_item with item ID...\n\n## Update\nUse update_item with item ID and changes...\n\n## Delete\nUse delete_item with item ID (ask for confirmation first)...\n```\n\n### Pattern: Search and Process\n\n```markdown\nSteps:\n1. **Search**: mcp__plugin_api_server__search with filters\n2. **Filter**: Apply additional local filtering if needed\n3. **Transform**: Process each result\n4. **Present**: Format and display to user\n```\n\n### Pattern: Multi-Step Workflow\n\n```markdown\nSteps:\n1. **Setup**: Gather all required information\n2. **Validate**: Check data completeness\n3. **Execute**: Chain of MCP tool calls:\n   - Create parent resource\n   - Create child resources\n   - Link resources together\n   - Add metadata\n4. **Verify**: Confirm all steps succeeded\n5. **Report**: Provide summary to user\n```\n\n## Troubleshooting\n\n### Tools Not Available\n\n**Check:**\n- MCP server configured correctly\n- Server connected (check `/mcp`)\n- Tool names match exactly (case-sensitive)\n- Restart Claude Code after config changes\n\n### Tool Calls Failing\n\n**Check:**\n- Authentication is valid\n- Parameters match tool schema\n- Required parameters provided\n- Check `claude --debug` logs\n\n### Performance Issues\n\n**Check:**\n- Batching queries instead of individual calls\n- Caching results when appropriate\n- Not making unnecessary tool calls\n- Parallel calls when possible\n\n## Conclusion\n\nEffective MCP tool usage requires:\n1. **Understanding tool schemas** via `/mcp`\n2. **Pre-allowing tools** in commands appropriately\n3. **Handling errors gracefully**\n4. **Optimizing performance** with batching and caching\n5. **Providing good UX** with feedback and clear errors\n6. **Testing thoroughly** before deployment\n\nFollow these patterns for robust MCP tool integration in your plugin commands and agents.\n",
        "plugins/plugin-dev/skills/plugin-settings/SKILL.md": "---\nname: Plugin Settings\ndescription: This skill should be used when the user asks about \"plugin settings\", \"store plugin configuration\", \"user-configurable plugin\", \".local.md files\", \"plugin state files\", \"read YAML frontmatter\", \"per-project plugin settings\", or wants to make plugin behavior configurable. Documents the .claude/plugin-name.local.md pattern for storing plugin-specific configuration with YAML frontmatter and markdown content.\nversion: 0.1.0\n---\n\n# Plugin Settings Pattern for Claude Code Plugins\n\n## Overview\n\nPlugins can store user-configurable settings and state in `.claude/plugin-name.local.md` files within the project directory. This pattern uses YAML frontmatter for structured configuration and markdown content for prompts or additional context.\n\n**Key characteristics:**\n- File location: `.claude/plugin-name.local.md` in project root\n- Structure: YAML frontmatter + markdown body\n- Purpose: Per-project plugin configuration and state\n- Usage: Read from hooks, commands, and agents\n- Lifecycle: User-managed (not in git, should be in `.gitignore`)\n\n## File Structure\n\n### Basic Template\n\n```markdown\n---\nenabled: true\nsetting1: value1\nsetting2: value2\nnumeric_setting: 42\nlist_setting: [\"item1\", \"item2\"]\n---\n\n# Additional Context\n\nThis markdown body can contain:\n- Task descriptions\n- Additional instructions\n- Prompts to feed back to Claude\n- Documentation or notes\n```\n\n### Example: Plugin State File\n\n**.claude/my-plugin.local.md:**\n```markdown\n---\nenabled: true\nstrict_mode: false\nmax_retries: 3\nnotification_level: info\ncoordinator_session: team-leader\n---\n\n# Plugin Configuration\n\nThis plugin is configured for standard validation mode.\nContact @team-lead with questions.\n```\n\n## Reading Settings Files\n\n### From Hooks (Bash Scripts)\n\n**Pattern: Check existence and parse frontmatter**\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\n# Define state file path\nSTATE_FILE=\".claude/my-plugin.local.md\"\n\n# Quick exit if file doesn't exist\nif [[ ! -f \"$STATE_FILE\" ]]; then\n  exit 0  # Plugin not configured, skip\nfi\n\n# Parse YAML frontmatter (between --- markers)\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$STATE_FILE\")\n\n# Extract individual fields\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\nSTRICT_MODE=$(echo \"$FRONTMATTER\" | grep '^strict_mode:' | sed 's/strict_mode: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n# Check if enabled\nif [[ \"$ENABLED\" != \"true\" ]]; then\n  exit 0  # Disabled\nfi\n\n# Use configuration in hook logic\nif [[ \"$STRICT_MODE\" == \"true\" ]]; then\n  # Apply strict validation\n  # ...\nfi\n```\n\nSee `examples/read-settings-hook.sh` for complete working example.\n\n### From Commands\n\nCommands can read settings files to customize behavior:\n\n```markdown\n---\ndescription: Process data with plugin\nallowed-tools: [\"Read\", \"Bash\"]\n---\n\n# Process Command\n\nSteps:\n1. Check if settings exist at `.claude/my-plugin.local.md`\n2. Read configuration using Read tool\n3. Parse YAML frontmatter to extract settings\n4. Apply settings to processing logic\n5. Execute with configured behavior\n```\n\n### From Agents\n\nAgents can reference settings in their instructions:\n\n```markdown\n---\nname: configured-agent\ndescription: Agent that adapts to project settings\n---\n\nCheck for plugin settings at `.claude/my-plugin.local.md`.\nIf present, parse YAML frontmatter and adapt behavior according to:\n- enabled: Whether plugin is active\n- mode: Processing mode (strict, standard, lenient)\n- Additional configuration fields\n```\n\n## Parsing Techniques\n\n### Extract Frontmatter\n\n```bash\n# Extract everything between --- markers\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n```\n\n### Read Individual Fields\n\n**String fields:**\n```bash\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field_name:' | sed 's/field_name: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n```\n\n**Boolean fields:**\n```bash\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n# Compare: if [[ \"$ENABLED\" == \"true\" ]]; then\n```\n\n**Numeric fields:**\n```bash\nMAX=$(echo \"$FRONTMATTER\" | grep '^max_value:' | sed 's/max_value: *//')\n# Use: if [[ $MAX -gt 100 ]]; then\n```\n\n### Read Markdown Body\n\nExtract content after second `---`:\n\n```bash\n# Get everything after closing ---\nBODY=$(awk '/^---$/{i++; next} i>=2' \"$FILE\")\n```\n\n## Common Patterns\n\n### Pattern 1: Temporarily Active Hooks\n\nUse settings file to control hook activation:\n\n```bash\n#!/bin/bash\nSTATE_FILE=\".claude/security-scan.local.md\"\n\n# Quick exit if not configured\nif [[ ! -f \"$STATE_FILE\" ]]; then\n  exit 0\nfi\n\n# Read enabled flag\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$STATE_FILE\")\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n\nif [[ \"$ENABLED\" != \"true\" ]]; then\n  exit 0  # Disabled\nfi\n\n# Run hook logic\n# ...\n```\n\n**Use case:** Enable/disable hooks without editing hooks.json (requires restart).\n\n### Pattern 2: Agent State Management\n\nStore agent-specific state and configuration:\n\n**.claude/multi-agent-swarm.local.md:**\n```markdown\n---\nagent_name: auth-agent\ntask_number: 3.5\npr_number: 1234\ncoordinator_session: team-leader\nenabled: true\ndependencies: [\"Task 3.4\"]\n---\n\n# Task Assignment\n\nImplement JWT authentication for the API.\n\n**Success Criteria:**\n- Authentication endpoints created\n- Tests passing\n- PR created and CI green\n```\n\nRead from hooks to coordinate agents:\n\n```bash\nAGENT_NAME=$(echo \"$FRONTMATTER\" | grep '^agent_name:' | sed 's/agent_name: *//')\nCOORDINATOR=$(echo \"$FRONTMATTER\" | grep '^coordinator_session:' | sed 's/coordinator_session: *//')\n\n# Send notification to coordinator\ntmux send-keys -t \"$COORDINATOR\" \"Agent $AGENT_NAME completed task\" Enter\n```\n\n### Pattern 3: Configuration-Driven Behavior\n\n**.claude/my-plugin.local.md:**\n```markdown\n---\nvalidation_level: strict\nmax_file_size: 1000000\nallowed_extensions: [\".js\", \".ts\", \".tsx\"]\nenable_logging: true\n---\n\n# Validation Configuration\n\nStrict mode enabled for this project.\nAll writes validated against security policies.\n```\n\nUse in hooks or commands:\n\n```bash\nLEVEL=$(echo \"$FRONTMATTER\" | grep '^validation_level:' | sed 's/validation_level: *//')\n\ncase \"$LEVEL\" in\n  strict)\n    # Apply strict validation\n    ;;\n  standard)\n    # Apply standard validation\n    ;;\n  lenient)\n    # Apply lenient validation\n    ;;\nesac\n```\n\n## Creating Settings Files\n\n### From Commands\n\nCommands can create settings files:\n\n```markdown\n# Setup Command\n\nSteps:\n1. Ask user for configuration preferences\n2. Create `.claude/my-plugin.local.md` with YAML frontmatter\n3. Set appropriate values based on user input\n4. Inform user that settings are saved\n5. Remind user to restart Claude Code for hooks to recognize changes\n```\n\n### Template Generation\n\nProvide template in plugin README:\n\n```markdown\n## Configuration\n\nCreate `.claude/my-plugin.local.md` in your project:\n\n\\`\\`\\`markdown\n---\nenabled: true\nmode: standard\nmax_retries: 3\n---\n\n# Plugin Configuration\n\nYour settings are active.\n\\`\\`\\`\n\nAfter creating or editing, restart Claude Code for changes to take effect.\n```\n\n## Best Practices\n\n### File Naming\n\n✅ **DO:**\n- Use `.claude/plugin-name.local.md` format\n- Match plugin name exactly\n- Use `.local.md` suffix for user-local files\n\n❌ **DON'T:**\n- Use different directory (not `.claude/`)\n- Use inconsistent naming\n- Use `.md` without `.local` (might be committed)\n\n### Gitignore\n\nAlways add to `.gitignore`:\n\n```gitignore\n.claude/*.local.md\n.claude/*.local.json\n```\n\nDocument this in plugin README.\n\n### Defaults\n\nProvide sensible defaults when settings file doesn't exist:\n\n```bash\nif [[ ! -f \"$STATE_FILE\" ]]; then\n  # Use defaults\n  ENABLED=true\n  MODE=standard\nelse\n  # Read from file\n  # ...\nfi\n```\n\n### Validation\n\nValidate settings values:\n\n```bash\nMAX=$(echo \"$FRONTMATTER\" | grep '^max_value:' | sed 's/max_value: *//')\n\n# Validate numeric range\nif ! [[ \"$MAX\" =~ ^[0-9]+$ ]] || [[ $MAX -lt 1 ]] || [[ $MAX -gt 100 ]]; then\n  echo \"⚠️  Invalid max_value in settings (must be 1-100)\" >&2\n  MAX=10  # Use default\nfi\n```\n\n### Restart Requirement\n\n**Important:** Settings changes require Claude Code restart.\n\nDocument in your README:\n\n```markdown\n## Changing Settings\n\nAfter editing `.claude/my-plugin.local.md`:\n1. Save the file\n2. Exit Claude Code\n3. Restart: `claude` or `cc`\n4. New settings will be loaded\n```\n\nHooks cannot be hot-swapped within a session.\n\n## Security Considerations\n\n### Sanitize User Input\n\nWhen writing settings files from user input:\n\n```bash\n# Escape quotes in user input\nSAFE_VALUE=$(echo \"$USER_INPUT\" | sed 's/\"/\\\\\"/g')\n\n# Write to file\ncat > \"$STATE_FILE\" <<EOF\n---\nuser_setting: \"$SAFE_VALUE\"\n---\nEOF\n```\n\n### Validate File Paths\n\nIf settings contain file paths:\n\n```bash\nFILE_PATH=$(echo \"$FRONTMATTER\" | grep '^data_file:' | sed 's/data_file: *//')\n\n# Check for path traversal\nif [[ \"$FILE_PATH\" == *\"..\"* ]]; then\n  echo \"⚠️  Invalid path in settings (path traversal)\" >&2\n  exit 2\nfi\n```\n\n### Permissions\n\nSettings files should be:\n- Readable by user only (`chmod 600`)\n- Not committed to git\n- Not shared between users\n\n## Real-World Examples\n\n### multi-agent-swarm Plugin\n\n**.claude/multi-agent-swarm.local.md:**\n```markdown\n---\nagent_name: auth-implementation\ntask_number: 3.5\npr_number: 1234\ncoordinator_session: team-leader\nenabled: true\ndependencies: [\"Task 3.4\"]\nadditional_instructions: Use JWT tokens, not sessions\n---\n\n# Task: Implement Authentication\n\nBuild JWT-based authentication for the REST API.\nCoordinate with auth-agent on shared types.\n```\n\n**Hook usage (agent-stop-notification.sh):**\n- Checks if file exists (line 15-18: quick exit if not)\n- Parses frontmatter to get coordinator_session, agent_name, enabled\n- Sends notifications to coordinator if enabled\n- Allows quick activation/deactivation via `enabled: true/false`\n\n### ralph-loop Plugin\n\n**.claude/ralph-loop.local.md:**\n```markdown\n---\niteration: 1\nmax_iterations: 10\ncompletion_promise: \"All tests passing and build successful\"\n---\n\nFix all the linting errors in the project.\nMake sure tests pass after each fix.\n```\n\n**Hook usage (stop-hook.sh):**\n- Checks if file exists (line 15-18: quick exit if not active)\n- Reads iteration count and max_iterations\n- Extracts completion_promise for loop termination\n- Reads body as the prompt to feed back\n- Updates iteration count on each loop\n\n## Quick Reference\n\n### File Location\n\n```\nproject-root/\n└── .claude/\n    └── plugin-name.local.md\n```\n\n### Frontmatter Parsing\n\n```bash\n# Extract frontmatter\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n\n# Read field\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field:' | sed 's/field: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n```\n\n### Body Parsing\n\n```bash\n# Extract body (after second ---)\nBODY=$(awk '/^---$/{i++; next} i>=2' \"$FILE\")\n```\n\n### Quick Exit Pattern\n\n```bash\nif [[ ! -f \".claude/my-plugin.local.md\" ]]; then\n  exit 0  # Not configured\nfi\n```\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed implementation patterns:\n\n- **`references/parsing-techniques.md`** - Complete guide to parsing YAML frontmatter and markdown bodies\n- **`references/real-world-examples.md`** - Deep dive into multi-agent-swarm and ralph-loop implementations\n\n### Example Files\n\nWorking examples in `examples/`:\n\n- **`read-settings-hook.sh`** - Hook that reads and uses settings\n- **`create-settings-command.md`** - Command that creates settings file\n- **`example-settings.md`** - Template settings file\n\n### Utility Scripts\n\nDevelopment tools in `scripts/`:\n\n- **`validate-settings.sh`** - Validate settings file structure\n- **`parse-frontmatter.sh`** - Extract frontmatter fields\n\n## Implementation Workflow\n\nTo add settings to a plugin:\n\n1. Design settings schema (which fields, types, defaults)\n2. Create template file in plugin documentation\n3. Add gitignore entry for `.claude/*.local.md`\n4. Implement settings parsing in hooks/commands\n5. Use quick-exit pattern (check file exists, check enabled field)\n6. Document settings in plugin README with template\n7. Remind users that changes require Claude Code restart\n\nFocus on keeping settings simple and providing good defaults when settings file doesn't exist.\n",
        "plugins/plugin-dev/skills/plugin-settings/examples/create-settings-command.md": "---\ndescription: \"Create plugin settings file with user preferences\"\nallowed-tools: [\"Write\", \"AskUserQuestion\"]\n---\n\n# Create Plugin Settings\n\nThis command helps users create a `.claude/my-plugin.local.md` settings file.\n\n## Steps\n\n### Step 1: Ask User for Preferences\n\nUse AskUserQuestion to gather configuration:\n\n```json\n{\n  \"questions\": [\n    {\n      \"question\": \"Enable plugin for this project?\",\n      \"header\": \"Enable Plugin\",\n      \"multiSelect\": false,\n      \"options\": [\n        {\n          \"label\": \"Yes\",\n          \"description\": \"Plugin will be active\"\n        },\n        {\n          \"label\": \"No\",\n          \"description\": \"Plugin will be disabled\"\n        }\n      ]\n    },\n    {\n      \"question\": \"Validation mode?\",\n      \"header\": \"Mode\",\n      \"multiSelect\": false,\n      \"options\": [\n        {\n          \"label\": \"Strict\",\n          \"description\": \"Maximum validation and security checks\"\n        },\n        {\n          \"label\": \"Standard\",\n          \"description\": \"Balanced validation (recommended)\"\n        },\n        {\n          \"label\": \"Lenient\",\n          \"description\": \"Minimal validation only\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n### Step 2: Parse Answers\n\nExtract answers from AskUserQuestion result:\n\n- answers[\"0\"]: enabled (Yes/No)\n- answers[\"1\"]: mode (Strict/Standard/Lenient)\n\n### Step 3: Create Settings File\n\nUse Write tool to create `.claude/my-plugin.local.md`:\n\n```markdown\n---\nenabled: <true if Yes, false if No>\nvalidation_mode: <strict, standard, or lenient>\nmax_file_size: 1000000\nnotify_on_errors: true\n---\n\n# Plugin Configuration\n\nYour plugin is configured with <mode> validation mode.\n\nTo modify settings, edit this file and restart Claude Code.\n```\n\n### Step 4: Inform User\n\nTell the user:\n- Settings file created at `.claude/my-plugin.local.md`\n- Current configuration summary\n- How to edit manually if needed\n- Reminder: Restart Claude Code for changes to take effect\n- Settings file is gitignored (won't be committed)\n\n## Implementation Notes\n\nAlways validate user input before writing:\n- Check mode is valid\n- Validate numeric fields are numbers\n- Ensure paths don't have traversal attempts\n- Sanitize any free-text fields\n",
        "plugins/plugin-dev/skills/plugin-settings/examples/example-settings.md": "# Example Plugin Settings File\n\n## Template: Basic Configuration\n\n**.claude/my-plugin.local.md:**\n\n```markdown\n---\nenabled: true\nmode: standard\n---\n\n# My Plugin Configuration\n\nPlugin is active in standard mode.\n```\n\n## Template: Advanced Configuration\n\n**.claude/my-plugin.local.md:**\n\n```markdown\n---\nenabled: true\nstrict_mode: false\nmax_file_size: 1000000\nallowed_extensions: [\".js\", \".ts\", \".tsx\"]\nenable_logging: true\nnotification_level: info\nretry_attempts: 3\ntimeout_seconds: 60\ncustom_path: \"/path/to/data\"\n---\n\n# My Plugin Advanced Configuration\n\nThis project uses custom plugin configuration with:\n- Standard validation mode\n- 1MB file size limit\n- JavaScript/TypeScript files allowed\n- Info-level logging\n- 3 retry attempts\n\n## Additional Notes\n\nContact @team-lead with questions about this configuration.\n```\n\n## Template: Agent State File\n\n**.claude/multi-agent-swarm.local.md:**\n\n```markdown\n---\nagent_name: database-implementation\ntask_number: 4.2\npr_number: 5678\ncoordinator_session: team-leader\nenabled: true\ndependencies: [\"Task 3.5\", \"Task 4.1\"]\nadditional_instructions: \"Use PostgreSQL, not MySQL\"\n---\n\n# Task Assignment: Database Schema Implementation\n\nImplement the database schema for the new features module.\n\n## Requirements\n\n- Create migration files\n- Add indexes for performance\n- Write tests for constraints\n- Document schema in README\n\n## Success Criteria\n\n- Migrations run successfully\n- All tests pass\n- PR created with CI green\n- Schema documented\n\n## Coordination\n\nDepends on:\n- Task 3.5: API endpoint definitions\n- Task 4.1: Data model design\n\nReport status to coordinator session 'team-leader'.\n```\n\n## Template: Feature Flag Pattern\n\n**.claude/experimental-features.local.md:**\n\n```markdown\n---\nenabled: true\nfeatures:\n  - ai_suggestions\n  - auto_formatting\n  - advanced_refactoring\nexperimental_mode: false\n---\n\n# Experimental Features Configuration\n\nCurrent enabled features:\n- AI-powered code suggestions\n- Automatic code formatting\n- Advanced refactoring tools\n\nExperimental mode is OFF (stable features only).\n```\n\n## Usage in Hooks\n\nThese templates can be read by hooks:\n\n```bash\n# Check if plugin is configured\nif [[ ! -f \".claude/my-plugin.local.md\" ]]; then\n  exit 0  # Not configured, skip hook\nfi\n\n# Read settings\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \".claude/my-plugin.local.md\")\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n\n# Apply settings\nif [[ \"$ENABLED\" == \"true\" ]]; then\n  # Hook is active\n  # ...\nfi\n```\n\n## Gitignore\n\nAlways add to project `.gitignore`:\n\n```gitignore\n# Plugin settings (user-local, not committed)\n.claude/*.local.md\n.claude/*.local.json\n```\n\n## Editing Settings\n\nUsers can edit settings files manually:\n\n```bash\n# Edit settings\nvim .claude/my-plugin.local.md\n\n# Changes take effect after restart\nexit  # Exit Claude Code\nclaude  # Restart\n```\n\nChanges require Claude Code restart - hooks can't be hot-swapped.\n",
        "plugins/plugin-dev/skills/plugin-settings/references/parsing-techniques.md": "# Settings File Parsing Techniques\n\nComplete guide to parsing `.claude/plugin-name.local.md` files in bash scripts.\n\n## File Structure\n\nSettings files use markdown with YAML frontmatter:\n\n```markdown\n---\nfield1: value1\nfield2: \"value with spaces\"\nnumeric_field: 42\nboolean_field: true\nlist_field: [\"item1\", \"item2\", \"item3\"]\n---\n\n# Markdown Content\n\nThis body content can be extracted separately.\nIt's useful for prompts, documentation, or additional context.\n```\n\n## Parsing Frontmatter\n\n### Extract Frontmatter Block\n\n```bash\n#!/bin/bash\nFILE=\".claude/my-plugin.local.md\"\n\n# Extract everything between --- markers (excluding the markers themselves)\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n```\n\n**How it works:**\n- `sed -n` - Suppress automatic printing\n- `/^---$/,/^---$/` - Range from first `---` to second `---`\n- `{ /^---$/d; p; }` - Delete the `---` lines, print everything else\n\n### Extract Individual Fields\n\n**String fields:**\n```bash\n# Simple value\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field_name:' | sed 's/field_name: *//')\n\n# Quoted value (removes surrounding quotes)\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field_name:' | sed 's/field_name: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n```\n\n**Boolean fields:**\n```bash\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n\n# Use in condition\nif [[ \"$ENABLED\" == \"true\" ]]; then\n  # Enabled\nfi\n```\n\n**Numeric fields:**\n```bash\nMAX=$(echo \"$FRONTMATTER\" | grep '^max_value:' | sed 's/max_value: *//')\n\n# Validate it's a number\nif [[ \"$MAX\" =~ ^[0-9]+$ ]]; then\n  # Use in numeric comparison\n  if [[ $MAX -gt 100 ]]; then\n    # Too large\n  fi\nfi\n```\n\n**List fields (simple):**\n```bash\n# YAML: list: [\"item1\", \"item2\", \"item3\"]\nLIST=$(echo \"$FRONTMATTER\" | grep '^list:' | sed 's/list: *//')\n# Result: [\"item1\", \"item2\", \"item3\"]\n\n# For simple checks:\nif [[ \"$LIST\" == *\"item1\"* ]]; then\n  # List contains item1\nfi\n```\n\n**List fields (proper parsing with jq):**\n```bash\n# For proper list handling, use yq or convert to JSON\n# This requires yq to be installed (brew install yq)\n\n# Extract list as JSON array\nLIST=$(echo \"$FRONTMATTER\" | yq -o json '.list' 2>/dev/null)\n\n# Iterate over items\necho \"$LIST\" | jq -r '.[]' | while read -r item; do\n  echo \"Processing: $item\"\ndone\n```\n\n## Parsing Markdown Body\n\n### Extract Body Content\n\n```bash\n#!/bin/bash\nFILE=\".claude/my-plugin.local.md\"\n\n# Extract everything after the closing ---\n# Counts --- markers: first is opening, second is closing, everything after is body\nBODY=$(awk '/^---$/{i++; next} i>=2' \"$FILE\")\n```\n\n**How it works:**\n- `/^---$/` - Match `---` lines\n- `{i++; next}` - Increment counter and skip the `---` line\n- `i>=2` - Print all lines after second `---`\n\n**Handles edge case:** If `---` appears in the markdown body, it still works because we only count the first two `---` at the start.\n\n### Use Body as Prompt\n\n```bash\n# Extract body\nPROMPT=$(awk '/^---$/{i++; next} i>=2' \"$RALPH_STATE_FILE\")\n\n# Feed back to Claude\necho '{\"decision\": \"block\", \"reason\": \"'\"$PROMPT\"'\"}' | jq .\n```\n\n**Important:** Use `jq -n --arg` for safer JSON construction with user content:\n\n```bash\nPROMPT=$(awk '/^---$/{i++; next} i>=2' \"$FILE\")\n\n# Safe JSON construction\njq -n --arg prompt \"$PROMPT\" '{\n  \"decision\": \"block\",\n  \"reason\": $prompt\n}'\n```\n\n## Common Parsing Patterns\n\n### Pattern: Field with Default\n\n```bash\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field:' | sed 's/field: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n# Use default if empty\nif [[ -z \"$VALUE\" ]]; then\n  VALUE=\"default_value\"\nfi\n```\n\n### Pattern: Optional Field\n\n```bash\nOPTIONAL=$(echo \"$FRONTMATTER\" | grep '^optional_field:' | sed 's/optional_field: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n# Only use if present\nif [[ -n \"$OPTIONAL\" ]] && [[ \"$OPTIONAL\" != \"null\" ]]; then\n  # Field is set, use it\n  echo \"Optional field: $OPTIONAL\"\nfi\n```\n\n### Pattern: Multiple Fields at Once\n\n```bash\n# Parse all fields in one pass\nwhile IFS=': ' read -r key value; do\n  # Remove quotes if present\n  value=$(echo \"$value\" | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n  case \"$key\" in\n    enabled)\n      ENABLED=\"$value\"\n      ;;\n    mode)\n      MODE=\"$value\"\n      ;;\n    max_size)\n      MAX_SIZE=\"$value\"\n      ;;\n  esac\ndone <<< \"$FRONTMATTER\"\n```\n\n## Updating Settings Files\n\n### Atomic Updates\n\nAlways use temp file + atomic move to prevent corruption:\n\n```bash\n#!/bin/bash\nFILE=\".claude/my-plugin.local.md\"\nNEW_VALUE=\"updated_value\"\n\n# Create temp file\nTEMP_FILE=\"${FILE}.tmp.$$\"\n\n# Update field using sed\nsed \"s/^field_name: .*/field_name: $NEW_VALUE/\" \"$FILE\" > \"$TEMP_FILE\"\n\n# Atomic replace\nmv \"$TEMP_FILE\" \"$FILE\"\n```\n\n### Update Single Field\n\n```bash\n# Increment iteration counter\nCURRENT=$(echo \"$FRONTMATTER\" | grep '^iteration:' | sed 's/iteration: *//')\nNEXT=$((CURRENT + 1))\n\n# Update file\nTEMP_FILE=\"${FILE}.tmp.$$\"\nsed \"s/^iteration: .*/iteration: $NEXT/\" \"$FILE\" > \"$TEMP_FILE\"\nmv \"$TEMP_FILE\" \"$FILE\"\n```\n\n### Update Multiple Fields\n\n```bash\n# Update several fields at once\nTEMP_FILE=\"${FILE}.tmp.$$\"\n\nsed -e \"s/^iteration: .*/iteration: $NEXT_ITERATION/\" \\\n    -e \"s/^pr_number: .*/pr_number: $PR_NUMBER/\" \\\n    -e \"s/^status: .*/status: $NEW_STATUS/\" \\\n    \"$FILE\" > \"$TEMP_FILE\"\n\nmv \"$TEMP_FILE\" \"$FILE\"\n```\n\n## Validation Techniques\n\n### Validate File Exists and Is Readable\n\n```bash\nFILE=\".claude/my-plugin.local.md\"\n\nif [[ ! -f \"$FILE\" ]]; then\n  echo \"Settings file not found\" >&2\n  exit 1\nfi\n\nif [[ ! -r \"$FILE\" ]]; then\n  echo \"Settings file not readable\" >&2\n  exit 1\nfi\n```\n\n### Validate Frontmatter Structure\n\n```bash\n# Count --- markers (should be exactly 2 at start)\nMARKER_COUNT=$(grep -c '^---$' \"$FILE\" 2>/dev/null || echo \"0\")\n\nif [[ $MARKER_COUNT -lt 2 ]]; then\n  echo \"Invalid settings file: missing frontmatter markers\" >&2\n  exit 1\nfi\n```\n\n### Validate Field Values\n\n```bash\nMODE=$(echo \"$FRONTMATTER\" | grep '^mode:' | sed 's/mode: *//')\n\ncase \"$MODE\" in\n  strict|standard|lenient)\n    # Valid mode\n    ;;\n  *)\n    echo \"Invalid mode: $MODE (must be strict, standard, or lenient)\" >&2\n    exit 1\n    ;;\nesac\n```\n\n### Validate Numeric Ranges\n\n```bash\nMAX_SIZE=$(echo \"$FRONTMATTER\" | grep '^max_size:' | sed 's/max_size: *//')\n\nif ! [[ \"$MAX_SIZE\" =~ ^[0-9]+$ ]]; then\n  echo \"max_size must be a number\" >&2\n  exit 1\nfi\n\nif [[ $MAX_SIZE -lt 1 ]] || [[ $MAX_SIZE -gt 10000000 ]]; then\n  echo \"max_size out of range (1-10000000)\" >&2\n  exit 1\nfi\n```\n\n## Edge Cases and Gotchas\n\n### Quotes in Values\n\nYAML allows both quoted and unquoted strings:\n\n```yaml\n# These are equivalent:\nfield1: value\nfield2: \"value\"\nfield3: 'value'\n```\n\n**Handle both:**\n```bash\n# Remove surrounding quotes if present\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field:' | sed 's/field: *//' | sed 's/^\"\\(.*\\)\"$/\\1/' | sed \"s/^'\\\\(.*\\\\)'$/\\\\1/\")\n```\n\n### --- in Markdown Body\n\nIf the markdown body contains `---`, the parsing still works because we only match the first two:\n\n```markdown\n---\nfield: value\n---\n\n# Body\n\nHere's a separator:\n---\n\nMore content after the separator.\n```\n\nThe `awk '/^---$/{i++; next} i>=2'` pattern handles this correctly.\n\n### Empty Values\n\nHandle missing or empty fields:\n\n```yaml\nfield1:\nfield2: \"\"\nfield3: null\n```\n\n**Parsing:**\n```bash\nVALUE=$(echo \"$FRONTMATTER\" | grep '^field1:' | sed 's/field1: *//')\n# VALUE will be empty string\n\n# Check for empty/null\nif [[ -z \"$VALUE\" ]] || [[ \"$VALUE\" == \"null\" ]]; then\n  VALUE=\"default\"\nfi\n```\n\n### Special Characters\n\nValues with special characters need careful handling:\n\n```yaml\nmessage: \"Error: Something went wrong!\"\npath: \"/path/with spaces/file.txt\"\nregex: \"^[a-zA-Z0-9_]+$\"\n```\n\n**Safe parsing:**\n```bash\n# Always quote variables when using\nMESSAGE=$(echo \"$FRONTMATTER\" | grep '^message:' | sed 's/message: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\necho \"Message: $MESSAGE\"  # Quoted!\n```\n\n## Performance Optimization\n\n### Cache Parsed Values\n\nIf reading settings multiple times:\n\n```bash\n# Parse once\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n\n# Extract multiple fields from cached frontmatter\nFIELD1=$(echo \"$FRONTMATTER\" | grep '^field1:' | sed 's/field1: *//')\nFIELD2=$(echo \"$FRONTMATTER\" | grep '^field2:' | sed 's/field2: *//')\nFIELD3=$(echo \"$FRONTMATTER\" | grep '^field3:' | sed 's/field3: *//')\n```\n\n**Don't:** Re-parse file for each field.\n\n### Lazy Loading\n\nOnly parse settings when needed:\n\n```bash\n#!/bin/bash\ninput=$(cat)\n\n# Quick checks first (no file I/O)\ntool_name=$(echo \"$input\" | jq -r '.tool_name')\nif [[ \"$tool_name\" != \"Write\" ]]; then\n  exit 0  # Not a write operation, skip\nfi\n\n# Only now check settings file\nif [[ -f \".claude/my-plugin.local.md\" ]]; then\n  # Parse settings\n  # ...\nfi\n```\n\n## Debugging\n\n### Print Parsed Values\n\n```bash\n#!/bin/bash\nset -x  # Enable debug tracing\n\nFILE=\".claude/my-plugin.local.md\"\n\nif [[ -f \"$FILE\" ]]; then\n  echo \"Settings file found\" >&2\n\n  FRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n  echo \"Frontmatter:\" >&2\n  echo \"$FRONTMATTER\" >&2\n\n  ENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n  echo \"Enabled: $ENABLED\" >&2\nfi\n```\n\n### Validate Parsing\n\n```bash\n# Show what was parsed\necho \"Parsed values:\" >&2\necho \"  enabled: $ENABLED\" >&2\necho \"  mode: $MODE\" >&2\necho \"  max_size: $MAX_SIZE\" >&2\n\n# Verify expected values\nif [[ \"$ENABLED\" != \"true\" ]] && [[ \"$ENABLED\" != \"false\" ]]; then\n  echo \"⚠️  Unexpected enabled value: $ENABLED\" >&2\nfi\n```\n\n## Alternative: Using yq\n\nFor complex YAML, consider using `yq`:\n\n```bash\n# Install: brew install yq\n\n# Parse YAML properly\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$FILE\")\n\n# Extract fields with yq\nENABLED=$(echo \"$FRONTMATTER\" | yq '.enabled')\nMODE=$(echo \"$FRONTMATTER\" | yq '.mode')\nLIST=$(echo \"$FRONTMATTER\" | yq -o json '.list_field')\n\n# Iterate list properly\necho \"$LIST\" | jq -r '.[]' | while read -r item; do\n  echo \"Item: $item\"\ndone\n```\n\n**Pros:**\n- Proper YAML parsing\n- Handles complex structures\n- Better list/object support\n\n**Cons:**\n- Requires yq installation\n- Additional dependency\n- May not be available on all systems\n\n**Recommendation:** Use sed/grep for simple fields, yq for complex structures.\n\n## Complete Example\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\n# Configuration\nSETTINGS_FILE=\".claude/my-plugin.local.md\"\n\n# Quick exit if not configured\nif [[ ! -f \"$SETTINGS_FILE\" ]]; then\n  # Use defaults\n  ENABLED=true\n  MODE=standard\n  MAX_SIZE=1000000\nelse\n  # Parse frontmatter\n  FRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$SETTINGS_FILE\")\n\n  # Extract fields with defaults\n  ENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n  ENABLED=${ENABLED:-true}\n\n  MODE=$(echo \"$FRONTMATTER\" | grep '^mode:' | sed 's/mode: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n  MODE=${MODE:-standard}\n\n  MAX_SIZE=$(echo \"$FRONTMATTER\" | grep '^max_size:' | sed 's/max_size: *//')\n  MAX_SIZE=${MAX_SIZE:-1000000}\n\n  # Validate values\n  if [[ \"$ENABLED\" != \"true\" ]] && [[ \"$ENABLED\" != \"false\" ]]; then\n    echo \"⚠️  Invalid enabled value, using default\" >&2\n    ENABLED=true\n  fi\n\n  if ! [[ \"$MAX_SIZE\" =~ ^[0-9]+$ ]]; then\n    echo \"⚠️  Invalid max_size, using default\" >&2\n    MAX_SIZE=1000000\n  fi\nfi\n\n# Quick exit if disabled\nif [[ \"$ENABLED\" != \"true\" ]]; then\n  exit 0\nfi\n\n# Use configuration\necho \"Configuration loaded: mode=$MODE, max_size=$MAX_SIZE\" >&2\n\n# Apply logic based on settings\ncase \"$MODE\" in\n  strict)\n    # Strict validation\n    ;;\n  standard)\n    # Standard validation\n    ;;\n  lenient)\n    # Lenient validation\n    ;;\nesac\n```\n\nThis provides robust settings handling with defaults, validation, and error recovery.\n",
        "plugins/plugin-dev/skills/plugin-settings/references/real-world-examples.md": "# Real-World Plugin Settings Examples\n\nDetailed analysis of how production plugins use the `.claude/plugin-name.local.md` pattern.\n\n## multi-agent-swarm Plugin\n\n### Settings File Structure\n\n**.claude/multi-agent-swarm.local.md:**\n\n```markdown\n---\nagent_name: auth-implementation\ntask_number: 3.5\npr_number: 1234\ncoordinator_session: team-leader\nenabled: true\ndependencies: [\"Task 3.4\"]\nadditional_instructions: \"Use JWT tokens, not sessions\"\n---\n\n# Task: Implement Authentication\n\nBuild JWT-based authentication for the REST API.\n\n## Requirements\n- JWT token generation and validation\n- Refresh token flow\n- Secure password hashing\n\n## Success Criteria\n- Auth endpoints implemented\n- Tests passing (100% coverage)\n- PR created and CI green\n- Documentation updated\n\n## Coordination\nDepends on Task 3.4 (user model).\nReport status to 'team-leader' session.\n```\n\n### How It's Used\n\n**File:** `hooks/agent-stop-notification.sh`\n\n**Purpose:** Send notifications to coordinator when agent becomes idle\n\n**Implementation:**\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\nSWARM_STATE_FILE=\".claude/multi-agent-swarm.local.md\"\n\n# Quick exit if no swarm active\nif [[ ! -f \"$SWARM_STATE_FILE\" ]]; then\n  exit 0\nfi\n\n# Parse frontmatter\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$SWARM_STATE_FILE\")\n\n# Extract configuration\nCOORDINATOR_SESSION=$(echo \"$FRONTMATTER\" | grep '^coordinator_session:' | sed 's/coordinator_session: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\nAGENT_NAME=$(echo \"$FRONTMATTER\" | grep '^agent_name:' | sed 's/agent_name: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\nTASK_NUMBER=$(echo \"$FRONTMATTER\" | grep '^task_number:' | sed 's/task_number: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\nPR_NUMBER=$(echo \"$FRONTMATTER\" | grep '^pr_number:' | sed 's/pr_number: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\nENABLED=$(echo \"$FRONTMATTER\" | grep '^enabled:' | sed 's/enabled: *//')\n\n# Check if enabled\nif [[ \"$ENABLED\" != \"true\" ]]; then\n  exit 0\nfi\n\n# Send notification to coordinator\nNOTIFICATION=\"🤖 Agent ${AGENT_NAME} (Task ${TASK_NUMBER}, PR #${PR_NUMBER}) is idle.\"\n\nif tmux has-session -t \"$COORDINATOR_SESSION\" 2>/dev/null; then\n  tmux send-keys -t \"$COORDINATOR_SESSION\" \"$NOTIFICATION\" Enter\n  sleep 0.5\n  tmux send-keys -t \"$COORDINATOR_SESSION\" Enter\nfi\n\nexit 0\n```\n\n**Key patterns:**\n1. **Quick exit** (line 7-9): Returns immediately if file doesn't exist\n2. **Field extraction** (lines 11-17): Parses each frontmatter field\n3. **Enabled check** (lines 19-21): Respects enabled flag\n4. **Action based on settings** (lines 23-29): Uses coordinator_session to send notification\n\n### Creation\n\n**File:** `commands/launch-swarm.md`\n\nSettings files are created during swarm launch with:\n\n```bash\ncat > \"$WORKTREE_PATH/.claude/multi-agent-swarm.local.md\" <<EOF\n---\nagent_name: $AGENT_NAME\ntask_number: $TASK_ID\npr_number: TBD\ncoordinator_session: $COORDINATOR_SESSION\nenabled: true\ndependencies: [$DEPENDENCIES]\nadditional_instructions: \"$EXTRA_INSTRUCTIONS\"\n---\n\n# Task: $TASK_DESCRIPTION\n\n$TASK_DETAILS\nEOF\n```\n\n### Updates\n\nPR number updated after PR creation:\n\n```bash\n# Update pr_number field\nsed \"s/^pr_number: .*/pr_number: $PR_NUM/\" \\\n  \".claude/multi-agent-swarm.local.md\" > temp.md\nmv temp.md \".claude/multi-agent-swarm.local.md\"\n```\n\n## ralph-loop Plugin\n\n### Settings File Structure\n\n**.claude/ralph-loop.local.md:**\n\n```markdown\n---\niteration: 1\nmax_iterations: 10\ncompletion_promise: \"All tests passing and build successful\"\nstarted_at: \"2025-01-15T14:30:00Z\"\n---\n\nFix all the linting errors in the project.\nMake sure tests pass after each fix.\nDocument any changes needed in CLAUDE.md.\n```\n\n### How It's Used\n\n**File:** `hooks/stop-hook.sh`\n\n**Purpose:** Prevent session exit and loop Claude's output back as input\n\n**Implementation:**\n\n```bash\n#!/bin/bash\nset -euo pipefail\n\nRALPH_STATE_FILE=\".claude/ralph-loop.local.md\"\n\n# Quick exit if no active loop\nif [[ ! -f \"$RALPH_STATE_FILE\" ]]; then\n  exit 0\nfi\n\n# Parse frontmatter\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$RALPH_STATE_FILE\")\n\n# Extract configuration\nITERATION=$(echo \"$FRONTMATTER\" | grep '^iteration:' | sed 's/iteration: *//')\nMAX_ITERATIONS=$(echo \"$FRONTMATTER\" | grep '^max_iterations:' | sed 's/max_iterations: *//')\nCOMPLETION_PROMISE=$(echo \"$FRONTMATTER\" | grep '^completion_promise:' | sed 's/completion_promise: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n# Check max iterations\nif [[ $MAX_ITERATIONS -gt 0 ]] && [[ $ITERATION -ge $MAX_ITERATIONS ]]; then\n  echo \"🛑 Ralph loop: Max iterations ($MAX_ITERATIONS) reached.\"\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Get transcript and check for completion promise\nTRANSCRIPT_PATH=$(echo \"$HOOK_INPUT\" | jq -r '.transcript_path')\nLAST_OUTPUT=$(grep '\"role\":\"assistant\"' \"$TRANSCRIPT_PATH\" | tail -1 | jq -r '.message.content | map(select(.type == \"text\")) | map(.text) | join(\"\\n\")')\n\n# Check for completion\nif [[ \"$COMPLETION_PROMISE\" != \"null\" ]] && [[ -n \"$COMPLETION_PROMISE\" ]]; then\n  PROMISE_TEXT=$(echo \"$LAST_OUTPUT\" | perl -0777 -pe 's/.*?<promise>(.*?)<\\/promise>.*/$1/s; s/^\\s+|\\s+$//g')\n\n  if [[ \"$PROMISE_TEXT\" = \"$COMPLETION_PROMISE\" ]]; then\n    echo \"✅ Ralph loop: Detected completion\"\n    rm \"$RALPH_STATE_FILE\"\n    exit 0\n  fi\nfi\n\n# Continue loop - increment iteration\nNEXT_ITERATION=$((ITERATION + 1))\n\n# Extract prompt from markdown body\nPROMPT_TEXT=$(awk '/^---$/{i++; next} i>=2' \"$RALPH_STATE_FILE\")\n\n# Update iteration counter\nTEMP_FILE=\"${RALPH_STATE_FILE}.tmp.$$\"\nsed \"s/^iteration: .*/iteration: $NEXT_ITERATION/\" \"$RALPH_STATE_FILE\" > \"$TEMP_FILE\"\nmv \"$TEMP_FILE\" \"$RALPH_STATE_FILE\"\n\n# Block exit and feed prompt back\njq -n \\\n  --arg prompt \"$PROMPT_TEXT\" \\\n  --arg msg \"🔄 Ralph iteration $NEXT_ITERATION\" \\\n  '{\n    \"decision\": \"block\",\n    \"reason\": $prompt,\n    \"systemMessage\": $msg\n  }'\n\nexit 0\n```\n\n**Key patterns:**\n1. **Quick exit** (line 7-9): Skip if not active\n2. **Iteration tracking** (lines 11-20): Count and enforce max iterations\n3. **Promise detection** (lines 25-33): Check for completion signal in output\n4. **Prompt extraction** (line 38): Read markdown body as next prompt\n5. **State update** (lines 40-43): Increment iteration atomically\n6. **Loop continuation** (lines 45-53): Block exit and feed prompt back\n\n### Creation\n\n**File:** `scripts/setup-ralph-loop.sh`\n\n```bash\n#!/bin/bash\nPROMPT=\"$1\"\nMAX_ITERATIONS=\"${2:-0}\"\nCOMPLETION_PROMISE=\"${3:-}\"\n\n# Create state file\ncat > \".claude/ralph-loop.local.md\" <<EOF\n---\niteration: 1\nmax_iterations: $MAX_ITERATIONS\ncompletion_promise: \"$COMPLETION_PROMISE\"\nstarted_at: \"$(date -Iseconds)\"\n---\n\n$PROMPT\nEOF\n\necho \"Ralph loop initialized: .claude/ralph-loop.local.md\"\n```\n\n## Pattern Comparison\n\n| Feature | multi-agent-swarm | ralph-loop |\n|---------|-------------------|--------------|\n| **File** | `.claude/multi-agent-swarm.local.md` | `.claude/ralph-loop.local.md` |\n| **Purpose** | Agent coordination state | Loop iteration state |\n| **Frontmatter** | Agent metadata | Loop configuration |\n| **Body** | Task assignment | Prompt to loop |\n| **Updates** | PR number, status | Iteration counter |\n| **Deletion** | Manual or on completion | On loop exit |\n| **Hook** | Stop (notifications) | Stop (loop control) |\n\n## Best Practices from Real Plugins\n\n### 1. Quick Exit Pattern\n\nBoth plugins check file existence first:\n\n```bash\nif [[ ! -f \"$STATE_FILE\" ]]; then\n  exit 0  # Not active\nfi\n```\n\n**Why:** Avoids errors when plugin isn't configured and performs fast.\n\n### 2. Enabled Flag\n\nBoth use an `enabled` field for explicit control:\n\n```yaml\nenabled: true\n```\n\n**Why:** Allows temporary deactivation without deleting file.\n\n### 3. Atomic Updates\n\nBoth use temp file + atomic move:\n\n```bash\nTEMP_FILE=\"${FILE}.tmp.$$\"\nsed \"s/^field: .*/field: $NEW_VALUE/\" \"$FILE\" > \"$TEMP_FILE\"\nmv \"$TEMP_FILE\" \"$FILE\"\n```\n\n**Why:** Prevents corruption if process is interrupted.\n\n### 4. Quote Handling\n\nBoth strip surrounding quotes from YAML values:\n\n```bash\nsed 's/^\"\\(.*\\)\"$/\\1/'\n```\n\n**Why:** YAML allows both `field: value` and `field: \"value\"`.\n\n### 5. Error Handling\n\nBoth handle missing/corrupt files gracefully:\n\n```bash\nif [[ ! -f \"$FILE\" ]]; then\n  exit 0  # No error, just not configured\nfi\n\nif [[ -z \"$CRITICAL_FIELD\" ]]; then\n  echo \"Settings file corrupt\" >&2\n  rm \"$FILE\"  # Clean up\n  exit 0\nfi\n```\n\n**Why:** Fails gracefully instead of crashing.\n\n## Anti-Patterns to Avoid\n\n### ❌ Hardcoded Paths\n\n```bash\n# BAD\nFILE=\"/Users/alice/.claude/my-plugin.local.md\"\n\n# GOOD\nFILE=\".claude/my-plugin.local.md\"\n```\n\n### ❌ Unquoted Variables\n\n```bash\n# BAD\necho $VALUE\n\n# GOOD\necho \"$VALUE\"\n```\n\n### ❌ Non-Atomic Updates\n\n```bash\n# BAD: Can corrupt file if interrupted\nsed -i \"s/field: .*/field: $VALUE/\" \"$FILE\"\n\n# GOOD: Atomic\nTEMP_FILE=\"${FILE}.tmp.$$\"\nsed \"s/field: .*/field: $VALUE/\" \"$FILE\" > \"$TEMP_FILE\"\nmv \"$TEMP_FILE\" \"$FILE\"\n```\n\n### ❌ No Default Values\n\n```bash\n# BAD: Fails if field missing\nif [[ $MAX -gt 100 ]]; then\n  # MAX might be empty!\nfi\n\n# GOOD: Provide default\nMAX=${MAX:-10}\n```\n\n### ❌ Ignoring Edge Cases\n\n```bash\n# BAD: Assumes exactly 2 --- markers\nsed -n '/^---$/,/^---$/{ /^---$/d; p; }'\n\n# GOOD: Handles --- in body\nawk '/^---$/{i++; next} i>=2'  # For body\n```\n\n## Conclusion\n\nThe `.claude/plugin-name.local.md` pattern provides:\n- Simple, human-readable configuration\n- Version-control friendly (gitignored)\n- Per-project settings\n- Easy parsing with standard bash tools\n- Supports both structured config (YAML) and freeform content (markdown)\n\nUse this pattern for any plugin that needs user-configurable behavior or state persistence.\n",
        "plugins/plugin-dev/skills/plugin-structure/README.md": "# Plugin Structure Skill\n\nComprehensive guidance on Claude Code plugin architecture, directory layout, and best practices.\n\n## Overview\n\nThis skill provides detailed knowledge about:\n- Plugin directory structure and organization\n- `plugin.json` manifest configuration\n- Component organization (commands, agents, skills, hooks)\n- Auto-discovery mechanisms\n- Portable path references with `${CLAUDE_PLUGIN_ROOT}`\n- File naming conventions\n\n## Skill Structure\n\n### SKILL.md (1,619 words)\n\nCore skill content covering:\n- Directory structure overview\n- Plugin manifest (plugin.json) fields\n- Component organization patterns\n- ${CLAUDE_PLUGIN_ROOT} usage\n- File naming conventions\n- Auto-discovery mechanism\n- Best practices\n- Common patterns\n- Troubleshooting\n\n### References\n\nDetailed documentation for deep dives:\n\n- **manifest-reference.md**: Complete `plugin.json` field reference\n  - All field descriptions and examples\n  - Path resolution rules\n  - Validation guidelines\n  - Minimal vs. complete manifest examples\n\n- **component-patterns.md**: Advanced organization patterns\n  - Component lifecycle (discovery, activation)\n  - Command organization patterns\n  - Agent organization patterns\n  - Skill organization patterns\n  - Hook organization patterns\n  - Script organization patterns\n  - Cross-component patterns\n  - Best practices for scalability\n\n### Examples\n\nThree complete plugin examples:\n\n- **minimal-plugin.md**: Simplest possible plugin\n  - Single command\n  - Minimal manifest\n  - When to use this pattern\n\n- **standard-plugin.md**: Well-structured production plugin\n  - Multiple components (commands, agents, skills, hooks)\n  - Complete manifest with metadata\n  - Rich skill structure\n  - Integration between components\n\n- **advanced-plugin.md**: Enterprise-grade plugin\n  - Multi-level organization\n  - MCP server integration\n  - Shared libraries\n  - Configuration management\n  - Security automation\n  - Monitoring integration\n\n## When This Skill Triggers\n\nClaude Code activates this skill when users:\n- Ask to \"create a plugin\" or \"scaffold a plugin\"\n- Need to \"understand plugin structure\"\n- Want to \"organize plugin components\"\n- Need to \"set up plugin.json\"\n- Ask about \"${CLAUDE_PLUGIN_ROOT}\" usage\n- Want to \"add commands/agents/skills/hooks\"\n- Need \"configure auto-discovery\" help\n- Ask about plugin architecture or best practices\n\n## Progressive Disclosure\n\nThe skill uses progressive disclosure to manage context:\n\n1. **SKILL.md** (~1600 words): Core concepts and workflows\n2. **References** (~6000 words): Detailed field references and patterns\n3. **Examples** (~8000 words): Complete working examples\n\nClaude loads references and examples only as needed based on the task.\n\n## Related Skills\n\nThis skill works well with:\n- **hook-development**: For creating plugin hooks\n- **mcp-integration**: For integrating MCP servers (when available)\n- **marketplace-publishing**: For publishing plugins (when available)\n\n## Maintenance\n\nTo update this skill:\n1. Keep SKILL.md lean and focused on core concepts\n2. Move detailed information to references/\n3. Add new examples/ for common patterns\n4. Update version in SKILL.md frontmatter\n5. Ensure all documentation uses imperative/infinitive form\n",
        "plugins/plugin-dev/skills/plugin-structure/SKILL.md": "---\nname: Plugin Structure\ndescription: This skill should be used when the user asks to \"create a plugin\", \"scaffold a plugin\", \"understand plugin structure\", \"organize plugin components\", \"set up plugin.json\", \"use ${CLAUDE_PLUGIN_ROOT}\", \"add commands/agents/skills/hooks\", \"configure auto-discovery\", or needs guidance on plugin directory layout, manifest configuration, component organization, file naming conventions, or Claude Code plugin architecture best practices.\nversion: 0.1.0\n---\n\n# Plugin Structure for Claude Code\n\n## Overview\n\nClaude Code plugins follow a standardized directory structure with automatic component discovery. Understanding this structure enables creating well-organized, maintainable plugins that integrate seamlessly with Claude Code.\n\n**Key concepts:**\n- Conventional directory layout for automatic discovery\n- Manifest-driven configuration in `.claude-plugin/plugin.json`\n- Component-based organization (commands, agents, skills, hooks)\n- Portable path references using `${CLAUDE_PLUGIN_ROOT}`\n- Explicit vs. auto-discovered component loading\n\n## Directory Structure\n\nEvery Claude Code plugin follows this organizational pattern:\n\n```\nplugin-name/\n├── .claude-plugin/\n│   └── plugin.json          # Required: Plugin manifest\n├── commands/                 # Slash commands (.md files)\n├── agents/                   # Subagent definitions (.md files)\n├── skills/                   # Agent skills (subdirectories)\n│   └── skill-name/\n│       └── SKILL.md         # Required for each skill\n├── hooks/\n│   └── hooks.json           # Event handler configuration\n├── .mcp.json                # MCP server definitions\n└── scripts/                 # Helper scripts and utilities\n```\n\n**Critical rules:**\n\n1. **Manifest location**: The `plugin.json` manifest MUST be in `.claude-plugin/` directory\n2. **Component locations**: All component directories (commands, agents, skills, hooks) MUST be at plugin root level, NOT nested inside `.claude-plugin/`\n3. **Optional components**: Only create directories for components the plugin actually uses\n4. **Naming convention**: Use kebab-case for all directory and file names\n\n## Plugin Manifest (plugin.json)\n\nThe manifest defines plugin metadata and configuration. Located at `.claude-plugin/plugin.json`:\n\n### Required Fields\n\n```json\n{\n  \"name\": \"plugin-name\"\n}\n```\n\n**Name requirements:**\n- Use kebab-case format (lowercase with hyphens)\n- Must be unique across installed plugins\n- No spaces or special characters\n- Example: `code-review-assistant`, `test-runner`, `api-docs`\n\n### Recommended Metadata\n\n```json\n{\n  \"name\": \"plugin-name\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Brief explanation of plugin purpose\",\n  \"author\": {\n    \"name\": \"Author Name\",\n    \"email\": \"author@example.com\",\n    \"url\": \"https://example.com\"\n  },\n  \"homepage\": \"https://docs.example.com\",\n  \"repository\": \"https://github.com/user/plugin-name\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"testing\", \"automation\", \"ci-cd\"]\n}\n```\n\n**Version format**: Follow semantic versioning (MAJOR.MINOR.PATCH)\n**Keywords**: Use for plugin discovery and categorization\n\n### Component Path Configuration\n\nSpecify custom paths for components (supplements default directories):\n\n```json\n{\n  \"name\": \"plugin-name\",\n  \"commands\": \"./custom-commands\",\n  \"agents\": [\"./agents\", \"./specialized-agents\"],\n  \"hooks\": \"./config/hooks.json\",\n  \"mcpServers\": \"./.mcp.json\"\n}\n```\n\n**Important**: Custom paths supplement defaults—they don't replace them. Components in both default directories and custom paths will load.\n\n**Path rules:**\n- Must be relative to plugin root\n- Must start with `./`\n- Cannot use absolute paths\n- Support arrays for multiple locations\n\n## Component Organization\n\n### Commands\n\n**Location**: `commands/` directory\n**Format**: Markdown files with YAML frontmatter\n**Auto-discovery**: All `.md` files in `commands/` load automatically\n\n**Example structure**:\n```\ncommands/\n├── review.md        # /review command\n├── test.md          # /test command\n└── deploy.md        # /deploy command\n```\n\n**File format**:\n```markdown\n---\nname: command-name\ndescription: Command description\n---\n\nCommand implementation instructions...\n```\n\n**Usage**: Commands integrate as native slash commands in Claude Code\n\n### Agents\n\n**Location**: `agents/` directory\n**Format**: Markdown files with YAML frontmatter\n**Auto-discovery**: All `.md` files in `agents/` load automatically\n\n**Example structure**:\n```\nagents/\n├── code-reviewer.md\n├── test-generator.md\n└── refactorer.md\n```\n\n**File format**:\n```markdown\n---\ndescription: Agent role and expertise\ncapabilities:\n  - Specific task 1\n  - Specific task 2\n---\n\nDetailed agent instructions and knowledge...\n```\n\n**Usage**: Users can invoke agents manually, or Claude Code selects them automatically based on task context\n\n### Skills\n\n**Location**: `skills/` directory with subdirectories per skill\n**Format**: Each skill in its own directory with `SKILL.md` file\n**Auto-discovery**: All `SKILL.md` files in skill subdirectories load automatically\n\n**Example structure**:\n```\nskills/\n├── api-testing/\n│   ├── SKILL.md\n│   ├── scripts/\n│   │   └── test-runner.py\n│   └── references/\n│       └── api-spec.md\n└── database-migrations/\n    ├── SKILL.md\n    └── examples/\n        └── migration-template.sql\n```\n\n**SKILL.md format**:\n```markdown\n---\nname: Skill Name\ndescription: When to use this skill\nversion: 1.0.0\n---\n\nSkill instructions and guidance...\n```\n\n**Supporting files**: Skills can include scripts, references, examples, or assets in subdirectories\n\n**Usage**: Claude Code autonomously activates skills based on task context matching the description\n\n### Hooks\n\n**Location**: `hooks/hooks.json` or inline in `plugin.json`\n**Format**: JSON configuration defining event handlers\n**Registration**: Hooks register automatically when plugin enables\n\n**Example structure**:\n```\nhooks/\n├── hooks.json           # Hook configuration\n└── scripts/\n    ├── validate.sh      # Hook script\n    └── check-style.sh   # Hook script\n```\n\n**Configuration format**:\n```json\n{\n  \"PreToolUse\": [{\n    \"matcher\": \"Write|Edit\",\n    \"hooks\": [{\n      \"type\": \"command\",\n      \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/validate.sh\",\n      \"timeout\": 30\n    }]\n  }]\n}\n```\n\n**Available events**: PreToolUse, PostToolUse, Stop, SubagentStop, SessionStart, SessionEnd, UserPromptSubmit, PreCompact, Notification\n\n**Usage**: Hooks execute automatically in response to Claude Code events\n\n### MCP Servers\n\n**Location**: `.mcp.json` at plugin root or inline in `plugin.json`\n**Format**: JSON configuration for MCP server definitions\n**Auto-start**: Servers start automatically when plugin enables\n\n**Example format**:\n```json\n{\n  \"mcpServers\": {\n    \"server-name\": {\n      \"command\": \"node\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/server.js\"],\n      \"env\": {\n        \"API_KEY\": \"${API_KEY}\"\n      }\n    }\n  }\n}\n```\n\n**Usage**: MCP servers integrate seamlessly with Claude Code's tool system\n\n## Portable Path References\n\n### ${CLAUDE_PLUGIN_ROOT}\n\nUse `${CLAUDE_PLUGIN_ROOT}` environment variable for all intra-plugin path references:\n\n```json\n{\n  \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/run.sh\"\n}\n```\n\n**Why it matters**: Plugins install in different locations depending on:\n- User installation method (marketplace, local, npm)\n- Operating system conventions\n- User preferences\n\n**Where to use it**:\n- Hook command paths\n- MCP server command arguments\n- Script execution references\n- Resource file paths\n\n**Never use**:\n- Hardcoded absolute paths (`/Users/name/plugins/...`)\n- Relative paths from working directory (`./scripts/...` in commands)\n- Home directory shortcuts (`~/plugins/...`)\n\n### Path Resolution Rules\n\n**In manifest JSON fields** (hooks, MCP servers):\n```json\n\"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/tool.sh\"\n```\n\n**In component files** (commands, agents, skills):\n```markdown\nReference scripts at: ${CLAUDE_PLUGIN_ROOT}/scripts/helper.py\n```\n\n**In executed scripts**:\n```bash\n#!/bin/bash\n# ${CLAUDE_PLUGIN_ROOT} available as environment variable\nsource \"${CLAUDE_PLUGIN_ROOT}/lib/common.sh\"\n```\n\n## File Naming Conventions\n\n### Component Files\n\n**Commands**: Use kebab-case `.md` files\n- `code-review.md` → `/code-review`\n- `run-tests.md` → `/run-tests`\n- `api-docs.md` → `/api-docs`\n\n**Agents**: Use kebab-case `.md` files describing role\n- `test-generator.md`\n- `code-reviewer.md`\n- `performance-analyzer.md`\n\n**Skills**: Use kebab-case directory names\n- `api-testing/`\n- `database-migrations/`\n- `error-handling/`\n\n### Supporting Files\n\n**Scripts**: Use descriptive kebab-case names with appropriate extensions\n- `validate-input.sh`\n- `generate-report.py`\n- `process-data.js`\n\n**Documentation**: Use kebab-case markdown files\n- `api-reference.md`\n- `migration-guide.md`\n- `best-practices.md`\n\n**Configuration**: Use standard names\n- `hooks.json`\n- `.mcp.json`\n- `plugin.json`\n\n## Auto-Discovery Mechanism\n\nClaude Code automatically discovers and loads components:\n\n1. **Plugin manifest**: Reads `.claude-plugin/plugin.json` when plugin enables\n2. **Commands**: Scans `commands/` directory for `.md` files\n3. **Agents**: Scans `agents/` directory for `.md` files\n4. **Skills**: Scans `skills/` for subdirectories containing `SKILL.md`\n5. **Hooks**: Loads configuration from `hooks/hooks.json` or manifest\n6. **MCP servers**: Loads configuration from `.mcp.json` or manifest\n\n**Discovery timing**:\n- Plugin installation: Components register with Claude Code\n- Plugin enable: Components become available for use\n- No restart required: Changes take effect on next Claude Code session\n\n**Override behavior**: Custom paths in `plugin.json` supplement (not replace) default directories\n\n## Best Practices\n\n### Organization\n\n1. **Logical grouping**: Group related components together\n   - Put test-related commands, agents, and skills together\n   - Create subdirectories in `scripts/` for different purposes\n\n2. **Minimal manifest**: Keep `plugin.json` lean\n   - Only specify custom paths when necessary\n   - Rely on auto-discovery for standard layouts\n   - Use inline configuration only for simple cases\n\n3. **Documentation**: Include README files\n   - Plugin root: Overall purpose and usage\n   - Component directories: Specific guidance\n   - Script directories: Usage and requirements\n\n### Naming\n\n1. **Consistency**: Use consistent naming across components\n   - If command is `test-runner`, name related agent `test-runner-agent`\n   - Match skill directory names to their purpose\n\n2. **Clarity**: Use descriptive names that indicate purpose\n   - Good: `api-integration-testing/`, `code-quality-checker.md`\n   - Avoid: `utils/`, `misc.md`, `temp.sh`\n\n3. **Length**: Balance brevity with clarity\n   - Commands: 2-3 words (`review-pr`, `run-ci`)\n   - Agents: Describe role clearly (`code-reviewer`, `test-generator`)\n   - Skills: Topic-focused (`error-handling`, `api-design`)\n\n### Portability\n\n1. **Always use ${CLAUDE_PLUGIN_ROOT}**: Never hardcode paths\n2. **Test on multiple systems**: Verify on macOS, Linux, Windows\n3. **Document dependencies**: List required tools and versions\n4. **Avoid system-specific features**: Use portable bash/Python constructs\n\n### Maintenance\n\n1. **Version consistently**: Update version in plugin.json for releases\n2. **Deprecate gracefully**: Mark old components clearly before removal\n3. **Document breaking changes**: Note changes affecting existing users\n4. **Test thoroughly**: Verify all components work after changes\n\n## Common Patterns\n\n### Minimal Plugin\n\nSingle command with no dependencies:\n```\nmy-plugin/\n├── .claude-plugin/\n│   └── plugin.json    # Just name field\n└── commands/\n    └── hello.md       # Single command\n```\n\n### Full-Featured Plugin\n\nComplete plugin with all component types:\n```\nmy-plugin/\n├── .claude-plugin/\n│   └── plugin.json\n├── commands/          # User-facing commands\n├── agents/            # Specialized subagents\n├── skills/            # Auto-activating skills\n├── hooks/             # Event handlers\n│   ├── hooks.json\n│   └── scripts/\n├── .mcp.json          # External integrations\n└── scripts/           # Shared utilities\n```\n\n### Skill-Focused Plugin\n\nPlugin providing only skills:\n```\nmy-plugin/\n├── .claude-plugin/\n│   └── plugin.json\n└── skills/\n    ├── skill-one/\n    │   └── SKILL.md\n    └── skill-two/\n        └── SKILL.md\n```\n\n## Troubleshooting\n\n**Component not loading**:\n- Verify file is in correct directory with correct extension\n- Check YAML frontmatter syntax (commands, agents, skills)\n- Ensure skill has `SKILL.md` (not `README.md` or other name)\n- Confirm plugin is enabled in Claude Code settings\n\n**Path resolution errors**:\n- Replace all hardcoded paths with `${CLAUDE_PLUGIN_ROOT}`\n- Verify paths are relative and start with `./` in manifest\n- Check that referenced files exist at specified paths\n- Test with `echo $CLAUDE_PLUGIN_ROOT` in hook scripts\n\n**Auto-discovery not working**:\n- Confirm directories are at plugin root (not in `.claude-plugin/`)\n- Check file naming follows conventions (kebab-case, correct extensions)\n- Verify custom paths in manifest are correct\n- Restart Claude Code to reload plugin configuration\n\n**Conflicts between plugins**:\n- Use unique, descriptive component names\n- Namespace commands with plugin name if needed\n- Document potential conflicts in plugin README\n- Consider command prefixes for related functionality\n\n---\n\nFor detailed examples and advanced patterns, see files in `references/` and `examples/` directories.\n",
        "plugins/plugin-dev/skills/plugin-structure/examples/advanced-plugin.md": "# Advanced Plugin Example\n\nA complex, enterprise-grade plugin with MCP integration and advanced organization.\n\n## Directory Structure\n\n```\nenterprise-devops/\n├── .claude-plugin/\n│   └── plugin.json\n├── commands/\n│   ├── ci/\n│   │   ├── build.md\n│   │   ├── test.md\n│   │   └── deploy.md\n│   ├── monitoring/\n│   │   ├── status.md\n│   │   └── logs.md\n│   └── admin/\n│       ├── configure.md\n│       └── manage.md\n├── agents/\n│   ├── orchestration/\n│   │   ├── deployment-orchestrator.md\n│   │   └── rollback-manager.md\n│   └── specialized/\n│       ├── kubernetes-expert.md\n│       ├── terraform-expert.md\n│       └── security-auditor.md\n├── skills/\n│   ├── kubernetes-ops/\n│   │   ├── SKILL.md\n│   │   ├── references/\n│   │   │   ├── deployment-patterns.md\n│   │   │   ├── troubleshooting.md\n│   │   │   └── security.md\n│   │   ├── examples/\n│   │   │   ├── basic-deployment.yaml\n│   │   │   ├── stateful-set.yaml\n│   │   │   └── ingress-config.yaml\n│   │   └── scripts/\n│   │       ├── validate-manifest.sh\n│   │       └── health-check.sh\n│   ├── terraform-iac/\n│   │   ├── SKILL.md\n│   │   ├── references/\n│   │   │   └── best-practices.md\n│   │   └── examples/\n│   │       └── module-template/\n│   └── ci-cd-pipelines/\n│       ├── SKILL.md\n│       └── references/\n│           └── pipeline-patterns.md\n├── hooks/\n│   ├── hooks.json\n│   └── scripts/\n│       ├── security/\n│       │   ├── scan-secrets.sh\n│       │   ├── validate-permissions.sh\n│       │   └── audit-changes.sh\n│       ├── quality/\n│       │   ├── check-config.sh\n│       │   └── verify-tests.sh\n│       └── workflow/\n│           ├── notify-team.sh\n│           └── update-status.sh\n├── .mcp.json\n├── servers/\n│   ├── kubernetes-mcp/\n│   │   ├── index.js\n│   │   ├── package.json\n│   │   └── lib/\n│   ├── terraform-mcp/\n│   │   ├── main.py\n│   │   └── requirements.txt\n│   └── github-actions-mcp/\n│       ├── server.js\n│       └── package.json\n├── lib/\n│   ├── core/\n│   │   ├── logger.js\n│   │   ├── config.js\n│   │   └── auth.js\n│   ├── integrations/\n│   │   ├── slack.js\n│   │   ├── pagerduty.js\n│   │   └── datadog.js\n│   └── utils/\n│       ├── retry.js\n│       └── validation.js\n└── config/\n    ├── environments/\n    │   ├── production.json\n    │   ├── staging.json\n    │   └── development.json\n    └── templates/\n        ├── deployment.yaml\n        └── service.yaml\n```\n\n## File Contents\n\n### .claude-plugin/plugin.json\n\n```json\n{\n  \"name\": \"enterprise-devops\",\n  \"version\": \"2.3.1\",\n  \"description\": \"Comprehensive DevOps automation for enterprise CI/CD pipelines, infrastructure management, and monitoring\",\n  \"author\": {\n    \"name\": \"DevOps Platform Team\",\n    \"email\": \"devops-platform@company.com\",\n    \"url\": \"https://company.com/teams/devops\"\n  },\n  \"homepage\": \"https://docs.company.com/plugins/devops\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/company/devops-plugin.git\"\n  },\n  \"license\": \"Apache-2.0\",\n  \"keywords\": [\n    \"devops\",\n    \"ci-cd\",\n    \"kubernetes\",\n    \"terraform\",\n    \"automation\",\n    \"infrastructure\",\n    \"deployment\",\n    \"monitoring\"\n  ],\n  \"commands\": [\n    \"./commands/ci\",\n    \"./commands/monitoring\",\n    \"./commands/admin\"\n  ],\n  \"agents\": [\n    \"./agents/orchestration\",\n    \"./agents/specialized\"\n  ],\n  \"hooks\": \"./hooks/hooks.json\",\n  \"mcpServers\": \"./.mcp.json\"\n}\n```\n\n### .mcp.json\n\n```json\n{\n  \"mcpServers\": {\n    \"kubernetes\": {\n      \"command\": \"node\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/kubernetes-mcp/index.js\"],\n      \"env\": {\n        \"KUBECONFIG\": \"${KUBECONFIG}\",\n        \"K8S_NAMESPACE\": \"${K8S_NAMESPACE:-default}\"\n      }\n    },\n    \"terraform\": {\n      \"command\": \"python\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/terraform-mcp/main.py\"],\n      \"env\": {\n        \"TF_STATE_BUCKET\": \"${TF_STATE_BUCKET}\",\n        \"AWS_REGION\": \"${AWS_REGION}\"\n      }\n    },\n    \"github-actions\": {\n      \"command\": \"node\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/github-actions-mcp/server.js\"],\n      \"env\": {\n        \"GITHUB_TOKEN\": \"${GITHUB_TOKEN}\",\n        \"GITHUB_ORG\": \"${GITHUB_ORG}\"\n      }\n    }\n  }\n}\n```\n\n### commands/ci/build.md\n\n```markdown\n---\nname: build\ndescription: Trigger and monitor CI build pipeline\n---\n\n# Build Command\n\nTrigger CI/CD build pipeline and monitor progress in real-time.\n\n## Process\n\n1. **Validation**: Check prerequisites\n   - Verify branch status\n   - Check for uncommitted changes\n   - Validate configuration files\n\n2. **Trigger**: Start build via MCP server\n   \\`\\`\\`javascript\n   // Uses github-actions MCP server\n   const build = await tools.github_actions_trigger_workflow({\n     workflow: 'build.yml',\n     ref: currentBranch\n   })\n   \\`\\`\\`\n\n3. **Monitor**: Track build progress\n   - Display real-time logs\n   - Show test results as they complete\n   - Alert on failures\n\n4. **Report**: Summarize results\n   - Build status\n   - Test coverage\n   - Performance metrics\n   - Deploy readiness\n\n## Integration\n\nAfter successful build:\n- Offer to deploy to staging\n- Suggest performance optimizations\n- Generate deployment checklist\n```\n\n### agents/orchestration/deployment-orchestrator.md\n\n```markdown\n---\ndescription: Orchestrates complex multi-environment deployments with rollback capabilities and health monitoring\ncapabilities:\n  - Plan and execute multi-stage deployments\n  - Coordinate service dependencies\n  - Monitor deployment health\n  - Execute automated rollbacks\n  - Manage deployment approvals\n---\n\n# Deployment Orchestrator Agent\n\nSpecialized agent for orchestrating complex deployments across multiple environments.\n\n## Expertise\n\n- **Deployment strategies**: Blue-green, canary, rolling updates\n- **Dependency management**: Service startup ordering, dependency injection\n- **Health monitoring**: Service health checks, metric validation\n- **Rollback automation**: Automatic rollback on failure detection\n- **Approval workflows**: Multi-stage approval processes\n\n## Orchestration Process\n\n1. **Planning Phase**\n   - Analyze deployment requirements\n   - Identify service dependencies\n   - Generate deployment plan\n   - Calculate rollback strategy\n\n2. **Validation Phase**\n   - Verify environment readiness\n   - Check resource availability\n   - Validate configurations\n   - Run pre-deployment tests\n\n3. **Execution Phase**\n   - Deploy services in dependency order\n   - Monitor health after each stage\n   - Validate metrics and logs\n   - Proceed to next stage on success\n\n4. **Verification Phase**\n   - Run smoke tests\n   - Validate service integration\n   - Check performance metrics\n   - Confirm deployment success\n\n5. **Rollback Phase** (if needed)\n   - Detect failure conditions\n   - Execute rollback plan\n   - Restore previous state\n   - Notify stakeholders\n\n## MCP Integration\n\nUses multiple MCP servers:\n- `kubernetes`: Deploy and manage containers\n- `terraform`: Provision infrastructure\n- `github-actions`: Trigger deployment pipelines\n\n## Monitoring Integration\n\nIntegrates with monitoring tools via lib:\n\\`\\`\\`javascript\nconst { DatadogClient } = require('${CLAUDE_PLUGIN_ROOT}/lib/integrations/datadog')\nconst metrics = await DatadogClient.getMetrics(service, timeRange)\n\\`\\`\\`\n\n## Notification Integration\n\nSends updates via Slack and PagerDuty:\n\\`\\`\\`javascript\nconst { SlackClient } = require('${CLAUDE_PLUGIN_ROOT}/lib/integrations/slack')\nawait SlackClient.notify({\n  channel: '#deployments',\n  message: 'Deployment started',\n  metadata: deploymentPlan\n})\n\\`\\`\\`\n```\n\n### skills/kubernetes-ops/SKILL.md\n\n```markdown\n---\nname: Kubernetes Operations\ndescription: This skill should be used when deploying to Kubernetes, managing K8s resources, troubleshooting cluster issues, configuring ingress/services, scaling deployments, or working with Kubernetes manifests. Provides comprehensive Kubernetes operational knowledge and best practices.\nversion: 2.0.0\n---\n\n# Kubernetes Operations\n\nComprehensive operational knowledge for managing Kubernetes clusters and workloads.\n\n## Overview\n\nManage Kubernetes infrastructure effectively through:\n- Deployment strategies and patterns\n- Resource configuration and optimization\n- Troubleshooting and debugging\n- Security best practices\n- Performance tuning\n\n## Core Concepts\n\n### Resource Management\n\n**Deployments**: Use for stateless applications\n- Rolling updates for zero-downtime deployments\n- Rollback capabilities for failed deployments\n- Replica management for scaling\n\n**StatefulSets**: Use for stateful applications\n- Stable network identities\n- Persistent storage\n- Ordered deployment and scaling\n\n**DaemonSets**: Use for node-level services\n- Log collectors\n- Monitoring agents\n- Network plugins\n\n### Configuration\n\n**ConfigMaps**: Store non-sensitive configuration\n- Environment-specific settings\n- Application configuration files\n- Feature flags\n\n**Secrets**: Store sensitive data\n- API keys and tokens\n- Database credentials\n- TLS certificates\n\nUse external secret management (Vault, AWS Secrets Manager) for production.\n\n### Networking\n\n**Services**: Expose applications internally\n- ClusterIP for internal communication\n- NodePort for external access (non-production)\n- LoadBalancer for external access (production)\n\n**Ingress**: HTTP/HTTPS routing\n- Path-based routing\n- Host-based routing\n- TLS termination\n- Load balancing\n\n## Deployment Strategies\n\n### Rolling Update\n\nDefault strategy, gradual replacement:\n\\`\\`\\`yaml\nstrategy:\n  type: RollingUpdate\n  rollingUpdate:\n    maxSurge: 1\n    maxUnavailable: 0\n\\`\\`\\`\n\n**When to use**: Standard deployments, minor updates\n\n### Recreate\n\nStop all pods, then create new ones:\n\\`\\`\\`yaml\nstrategy:\n  type: Recreate\n\\`\\`\\`\n\n**When to use**: Stateful apps that can't run multiple versions\n\n### Blue-Green\n\nRun two complete environments, switch traffic:\n1. Deploy new version (green)\n2. Test green environment\n3. Switch traffic to green\n4. Keep blue for quick rollback\n\n**When to use**: Critical services, need instant rollback\n\n### Canary\n\nGradually roll out to subset of users:\n1. Deploy canary version (10% traffic)\n2. Monitor metrics and errors\n3. Increase traffic gradually\n4. Complete rollout or rollback\n\n**When to use**: High-risk changes, want gradual validation\n\n## Resource Configuration\n\n### Resource Requests and Limits\n\nAlways set for production workloads:\n\\`\\`\\`yaml\nresources:\n  requests:\n    memory: \"256Mi\"\n    cpu: \"250m\"\n  limits:\n    memory: \"512Mi\"\n    cpu: \"500m\"\n\\`\\`\\`\n\n**Requests**: Guaranteed resources\n**Limits**: Maximum allowed resources\n\n### Health Checks\n\nEssential for reliability:\n\\`\\`\\`yaml\nlivenessProbe:\n  httpGet:\n    path: /health\n    port: 8080\n  initialDelaySeconds: 30\n  periodSeconds: 10\n\nreadinessProbe:\n  httpGet:\n    path: /ready\n    port: 8080\n  initialDelaySeconds: 5\n  periodSeconds: 5\n\\`\\`\\`\n\n**Liveness**: Restart unhealthy pods\n**Readiness**: Remove unready pods from service\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Pods not starting**\n   - Check: `kubectl describe pod <name>`\n   - Look for: Image pull errors, resource constraints\n   - Fix: Verify image name, increase resources\n\n2. **Service not reachable**\n   - Check: `kubectl get svc`, `kubectl get endpoints`\n   - Look for: No endpoints, wrong selector\n   - Fix: Verify pod labels match service selector\n\n3. **High memory usage**\n   - Check: `kubectl top pods`\n   - Look for: Pods near memory limit\n   - Fix: Increase limits, optimize application\n\n4. **Frequent restarts**\n   - Check: `kubectl get pods`, `kubectl logs <name>`\n   - Look for: Liveness probe failures, OOMKilled\n   - Fix: Adjust health checks, increase memory\n\n### Debugging Commands\n\nGet pod details:\n\\`\\`\\`bash\nkubectl describe pod <name>\nkubectl logs <name>\nkubectl logs <name> --previous  # logs from crashed container\n\\`\\`\\`\n\nExecute commands in pod:\n\\`\\`\\`bash\nkubectl exec -it <name> -- /bin/sh\nkubectl exec <name> -- env\n\\`\\`\\`\n\nCheck resource usage:\n\\`\\`\\`bash\nkubectl top nodes\nkubectl top pods\n\\`\\`\\`\n\n## Security Best Practices\n\n### Pod Security\n\n- Run as non-root user\n- Use read-only root filesystem\n- Drop unnecessary capabilities\n- Use security contexts\n\nExample:\n\\`\\`\\`yaml\nsecurityContext:\n  runAsNonRoot: true\n  runAsUser: 1000\n  readOnlyRootFilesystem: true\n  capabilities:\n    drop:\n      - ALL\n\\`\\`\\`\n\n### Network Policies\n\nRestrict pod communication:\n\\`\\`\\`yaml\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: api-allow\nspec:\n  podSelector:\n    matchLabels:\n      app: api\n  ingress:\n    - from:\n      - podSelector:\n          matchLabels:\n            app: frontend\n\\`\\`\\`\n\n### Secrets Management\n\n- Never commit secrets to git\n- Use external secret managers\n- Rotate secrets regularly\n- Limit secret access with RBAC\n\n## Performance Optimization\n\n### Resource Tuning\n\n1. **Start conservative**: Set low limits initially\n2. **Monitor usage**: Track actual resource consumption\n3. **Adjust gradually**: Increase based on metrics\n4. **Set appropriate requests**: Match typical usage\n5. **Set safe limits**: 2x requests for headroom\n\n### Horizontal Pod Autoscaling\n\nAutomatically scale based on metrics:\n\\`\\`\\`yaml\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: api-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: api\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n    - type: Resource\n      resource:\n        name: cpu\n        target:\n          type: Utilization\n          averageUtilization: 70\n\\`\\`\\`\n\n## MCP Server Integration\n\nThis skill works with the kubernetes MCP server for operations:\n\n**List pods**:\n\\`\\`\\`javascript\nconst pods = await tools.k8s_list_pods({ namespace: 'default' })\n\\`\\`\\`\n\n**Get pod logs**:\n\\`\\`\\`javascript\nconst logs = await tools.k8s_get_logs({ pod: 'api-xyz', container: 'app' })\n\\`\\`\\`\n\n**Apply manifests**:\n\\`\\`\\`javascript\nconst result = await tools.k8s_apply_manifest({ file: 'deployment.yaml' })\n\\`\\`\\`\n\n## Detailed References\n\nFor in-depth information:\n- **Deployment patterns**: `references/deployment-patterns.md`\n- **Troubleshooting guide**: `references/troubleshooting.md`\n- **Security hardening**: `references/security.md`\n\n## Example Manifests\n\nFor copy-paste examples:\n- **Basic deployment**: `examples/basic-deployment.yaml`\n- **StatefulSet**: `examples/stateful-set.yaml`\n- **Ingress config**: `examples/ingress-config.yaml`\n\n## Validation Scripts\n\nFor manifest validation:\n\\`\\`\\`bash\nbash ${CLAUDE_PLUGIN_ROOT}/skills/kubernetes-ops/scripts/validate-manifest.sh deployment.yaml\n\\`\\`\\`\n```\n\n### hooks/hooks.json\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/security/scan-secrets.sh\",\n          \"timeout\": 30\n        }\n      ]\n    },\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Evaluate if this bash command is safe for production environment. Check for destructive operations, missing safeguards, and potential security issues. Commands should be idempotent and reversible.\",\n          \"timeout\": 20\n        }\n      ]\n    }\n  ],\n  \"PostToolUse\": [\n    {\n      \"matcher\": \"Bash\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/workflow/update-status.sh\",\n          \"timeout\": 15\n        }\n      ]\n    }\n  ],\n  \"Stop\": [\n    {\n      \"matcher\": \".*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/quality/check-config.sh\",\n          \"timeout\": 45\n        },\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/workflow/notify-team.sh\",\n          \"timeout\": 30\n        }\n      ]\n    }\n  ],\n  \"SessionStart\": [\n    {\n      \"matcher\": \".*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/security/validate-permissions.sh\",\n          \"timeout\": 20\n        }\n      ]\n    }\n  ]\n}\n```\n\n## Key Features\n\n### Multi-Level Organization\n\n**Commands**: Organized by function (CI, monitoring, admin)\n**Agents**: Separated by role (orchestration vs. specialized)\n**Skills**: Rich resources (references, examples, scripts)\n\n### MCP Integration\n\nThree custom MCP servers:\n- **Kubernetes**: Cluster operations\n- **Terraform**: Infrastructure provisioning\n- **GitHub Actions**: CI/CD automation\n\n### Shared Libraries\n\nReusable code in `lib/`:\n- **Core**: Common utilities (logging, config, auth)\n- **Integrations**: External services (Slack, Datadog)\n- **Utils**: Helper functions (retry, validation)\n\n### Configuration Management\n\nEnvironment-specific configs in `config/`:\n- **Environments**: Per-environment settings\n- **Templates**: Reusable deployment templates\n\n### Security Automation\n\nMultiple security hooks:\n- Secret scanning before writes\n- Permission validation on session start\n- Configuration auditing on completion\n\n### Monitoring Integration\n\nBuilt-in monitoring via lib integrations:\n- Datadog for metrics\n- PagerDuty for alerts\n- Slack for notifications\n\n## Use Cases\n\n1. **Multi-environment deployments**: Orchestrated rollouts across dev/staging/prod\n2. **Infrastructure as code**: Terraform automation with state management\n3. **CI/CD automation**: Build, test, deploy pipelines\n4. **Monitoring and observability**: Integrated metrics and alerting\n5. **Security enforcement**: Automated security scanning and validation\n6. **Team collaboration**: Slack notifications and status updates\n\n## When to Use This Pattern\n\n- Large-scale enterprise deployments\n- Multiple environment management\n- Complex CI/CD workflows\n- Integrated monitoring requirements\n- Security-critical infrastructure\n- Team collaboration needs\n\n## Scaling Considerations\n\n- **Performance**: Separate MCP servers for parallel operations\n- **Organization**: Multi-level directories for scalability\n- **Maintainability**: Shared libraries reduce duplication\n- **Flexibility**: Environment configs enable customization\n- **Security**: Layered security hooks and validation\n",
        "plugins/plugin-dev/skills/plugin-structure/examples/minimal-plugin.md": "# Minimal Plugin Example\n\nA bare-bones plugin with a single command.\n\n## Directory Structure\n\n```\nhello-world/\n├── .claude-plugin/\n│   └── plugin.json\n└── commands/\n    └── hello.md\n```\n\n## File Contents\n\n### .claude-plugin/plugin.json\n\n```json\n{\n  \"name\": \"hello-world\"\n}\n```\n\n### commands/hello.md\n\n```markdown\n---\nname: hello\ndescription: Prints a friendly greeting message\n---\n\n# Hello Command\n\nPrint a friendly greeting to the user.\n\n## Implementation\n\nOutput the following message to the user:\n\n> Hello! This is a simple command from the hello-world plugin.\n>\n> Use this as a starting point for building more complex plugins.\n\nInclude the current timestamp in the greeting to show the command executed successfully.\n```\n\n## Usage\n\nAfter installing the plugin:\n\n```\n$ claude\n> /hello\nHello! This is a simple command from the hello-world plugin.\n\nUse this as a starting point for building more complex plugins.\n\nExecuted at: 2025-01-15 14:30:22 UTC\n```\n\n## Key Points\n\n1. **Minimal manifest**: Only the required `name` field\n2. **Single command**: One markdown file in `commands/` directory\n3. **Auto-discovery**: Claude Code finds the command automatically\n4. **No dependencies**: No scripts, hooks, or external resources\n\n## When to Use This Pattern\n\n- Quick prototypes\n- Single-purpose utilities\n- Learning plugin development\n- Internal team tools with one specific function\n\n## Extending This Plugin\n\nTo add more functionality:\n\n1. **Add commands**: Create more `.md` files in `commands/`\n2. **Add metadata**: Update `plugin.json` with version, description, author\n3. **Add agents**: Create `agents/` directory with agent definitions\n4. **Add hooks**: Create `hooks/hooks.json` for event handling\n",
        "plugins/plugin-dev/skills/plugin-structure/examples/standard-plugin.md": "# Standard Plugin Example\n\nA well-structured plugin with commands, agents, and skills.\n\n## Directory Structure\n\n```\ncode-quality/\n├── .claude-plugin/\n│   └── plugin.json\n├── commands/\n│   ├── lint.md\n│   ├── test.md\n│   └── review.md\n├── agents/\n│   ├── code-reviewer.md\n│   └── test-generator.md\n├── skills/\n│   ├── code-standards/\n│   │   ├── SKILL.md\n│   │   └── references/\n│   │       └── style-guide.md\n│   └── testing-patterns/\n│       ├── SKILL.md\n│       └── examples/\n│           ├── unit-test.js\n│           └── integration-test.js\n├── hooks/\n│   ├── hooks.json\n│   └── scripts/\n│       └── validate-commit.sh\n└── scripts/\n    ├── run-linter.sh\n    └── generate-report.py\n```\n\n## File Contents\n\n### .claude-plugin/plugin.json\n\n```json\n{\n  \"name\": \"code-quality\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Comprehensive code quality tools including linting, testing, and review automation\",\n  \"author\": {\n    \"name\": \"Quality Team\",\n    \"email\": \"quality@example.com\"\n  },\n  \"homepage\": \"https://docs.example.com/plugins/code-quality\",\n  \"repository\": \"https://github.com/example/code-quality-plugin\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"code-quality\", \"linting\", \"testing\", \"code-review\", \"automation\"]\n}\n```\n\n### commands/lint.md\n\n```markdown\n---\nname: lint\ndescription: Run linting checks on the codebase\n---\n\n# Lint Command\n\nRun comprehensive linting checks on the project codebase.\n\n## Process\n\n1. Detect project type and installed linters\n2. Run appropriate linters (ESLint, Pylint, RuboCop, etc.)\n3. Collect and format results\n4. Report issues with file locations and severity\n\n## Implementation\n\nExecute the linting script:\n\n\\`\\`\\`bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/run-linter.sh\n\\`\\`\\`\n\nParse the output and present issues organized by:\n- Critical issues (must fix)\n- Warnings (should fix)\n- Style suggestions (optional)\n\nFor each issue, show:\n- File path and line number\n- Issue description\n- Suggested fix (if available)\n```\n\n### commands/test.md\n\n```markdown\n---\nname: test\ndescription: Run test suite with coverage reporting\n---\n\n# Test Command\n\nExecute the project test suite and generate coverage reports.\n\n## Process\n\n1. Identify test framework (Jest, pytest, RSpec, etc.)\n2. Run all tests\n3. Generate coverage report\n4. Identify untested code\n\n## Output\n\nPresent results in structured format:\n- Test summary (passed/failed/skipped)\n- Coverage percentage by file\n- Critical untested areas\n- Failed test details\n\n## Integration\n\nAfter test completion, offer to:\n- Fix failing tests\n- Generate tests for untested code (using test-generator agent)\n- Update documentation based on test changes\n```\n\n### agents/code-reviewer.md\n\n```markdown\n---\ndescription: Expert code reviewer specializing in identifying bugs, security issues, and improvement opportunities\ncapabilities:\n  - Analyze code for potential bugs and logic errors\n  - Identify security vulnerabilities\n  - Suggest performance improvements\n  - Ensure code follows project standards\n  - Review test coverage adequacy\n---\n\n# Code Reviewer Agent\n\nSpecialized agent for comprehensive code review.\n\n## Expertise\n\n- **Bug detection**: Logic errors, edge cases, error handling\n- **Security analysis**: Injection vulnerabilities, authentication issues, data exposure\n- **Performance**: Algorithm efficiency, resource usage, optimization opportunities\n- **Standards compliance**: Style guide adherence, naming conventions, documentation\n- **Test coverage**: Adequacy of test cases, missing scenarios\n\n## Review Process\n\n1. **Initial scan**: Quick pass for obvious issues\n2. **Deep analysis**: Line-by-line review of changed code\n3. **Context evaluation**: Check impact on related code\n4. **Best practices**: Compare against project and language standards\n5. **Recommendations**: Prioritized list of improvements\n\n## Integration with Skills\n\nAutomatically loads `code-standards` skill for project-specific guidelines.\n\n## Output Format\n\nFor each file reviewed:\n- Overall assessment\n- Critical issues (must fix before merge)\n- Important issues (should fix)\n- Suggestions (nice to have)\n- Positive feedback (what was done well)\n```\n\n### agents/test-generator.md\n\n```markdown\n---\ndescription: Generates comprehensive test suites from code analysis\ncapabilities:\n  - Analyze code structure and logic flow\n  - Generate unit tests for functions and methods\n  - Create integration tests for modules\n  - Design edge case and error condition tests\n  - Suggest test fixtures and mocks\n---\n\n# Test Generator Agent\n\nSpecialized agent for generating comprehensive test suites.\n\n## Expertise\n\n- **Unit testing**: Individual function/method tests\n- **Integration testing**: Module interaction tests\n- **Edge cases**: Boundary conditions, error paths\n- **Test organization**: Proper test structure and naming\n- **Mocking**: Appropriate use of mocks and stubs\n\n## Generation Process\n\n1. **Code analysis**: Understand function purpose and logic\n2. **Path identification**: Map all execution paths\n3. **Input design**: Create test inputs covering all paths\n4. **Assertion design**: Define expected outputs\n5. **Test generation**: Write tests in project's framework\n\n## Integration with Skills\n\nAutomatically loads `testing-patterns` skill for project-specific test conventions.\n\n## Test Quality\n\nGenerated tests include:\n- Happy path scenarios\n- Edge cases and boundary conditions\n- Error handling verification\n- Mock data for external dependencies\n- Clear test descriptions\n```\n\n### skills/code-standards/SKILL.md\n\n```markdown\n---\nname: Code Standards\ndescription: This skill should be used when reviewing code, enforcing style guidelines, checking naming conventions, or ensuring code quality standards. Provides project-specific coding standards and best practices.\nversion: 1.0.0\n---\n\n# Code Standards\n\nComprehensive coding standards and best practices for maintaining code quality.\n\n## Overview\n\nEnforce consistent code quality through standardized conventions for:\n- Code style and formatting\n- Naming conventions\n- Documentation requirements\n- Error handling patterns\n- Security practices\n\n## Style Guidelines\n\n### Formatting\n\n- **Indentation**: 2 spaces (JavaScript/TypeScript), 4 spaces (Python)\n- **Line length**: Maximum 100 characters\n- **Braces**: Same line for opening brace (K&R style)\n- **Whitespace**: Space after commas, around operators\n\n### Naming Conventions\n\n- **Variables**: camelCase for JavaScript, snake_case for Python\n- **Functions**: camelCase, descriptive verb-noun pairs\n- **Classes**: PascalCase\n- **Constants**: UPPER_SNAKE_CASE\n- **Files**: kebab-case for modules\n\n## Documentation Requirements\n\n### Function Documentation\n\nEvery function must include:\n- Purpose description\n- Parameter descriptions with types\n- Return value description with type\n- Example usage (for public functions)\n\n### Module Documentation\n\nEvery module must include:\n- Module purpose\n- Public API overview\n- Usage examples\n- Dependencies\n\n## Error Handling\n\n### Required Practices\n\n- Never swallow errors silently\n- Always log errors with context\n- Use specific error types\n- Provide actionable error messages\n- Clean up resources in finally blocks\n\n### Example Pattern\n\n\\`\\`\\`javascript\nasync function processData(data) {\n  try {\n    const result = await transform(data)\n    return result\n  } catch (error) {\n    logger.error('Data processing failed', {\n      data: sanitize(data),\n      error: error.message,\n      stack: error.stack\n    })\n    throw new DataProcessingError('Failed to process data', { cause: error })\n  }\n}\n\\`\\`\\`\n\n## Security Practices\n\n- Validate all external input\n- Sanitize data before output\n- Use parameterized queries\n- Never log sensitive information\n- Keep dependencies updated\n\n## Detailed Guidelines\n\nFor comprehensive style guides by language, see:\n- `references/style-guide.md`\n```\n\n### skills/code-standards/references/style-guide.md\n\n```markdown\n# Comprehensive Style Guide\n\nDetailed style guidelines for all supported languages.\n\n## JavaScript/TypeScript\n\n### Variable Declarations\n\nUse `const` by default, `let` when reassignment needed, never `var`:\n\n\\`\\`\\`javascript\n// Good\nconst MAX_RETRIES = 3\nlet currentTry = 0\n\n// Bad\nvar MAX_RETRIES = 3\n\\`\\`\\`\n\n### Function Declarations\n\nUse function expressions for consistency:\n\n\\`\\`\\`javascript\n// Good\nconst calculateTotal = (items) => {\n  return items.reduce((sum, item) => sum + item.price, 0)\n}\n\n// Bad (inconsistent style)\nfunction calculateTotal(items) {\n  return items.reduce((sum, item) => sum + item.price, 0)\n}\n\\`\\`\\`\n\n### Async/Await\n\nPrefer async/await over promise chains:\n\n\\`\\`\\`javascript\n// Good\nasync function fetchUserData(userId) {\n  const user = await db.getUser(userId)\n  const orders = await db.getOrders(user.id)\n  return { user, orders }\n}\n\n// Bad\nfunction fetchUserData(userId) {\n  return db.getUser(userId)\n    .then(user => db.getOrders(user.id)\n      .then(orders => ({ user, orders })))\n}\n\\`\\`\\`\n\n## Python\n\n### Import Organization\n\nOrder imports: standard library, third-party, local:\n\n\\`\\`\\`python\n# Good\nimport os\nimport sys\n\nimport numpy as np\nimport pandas as pd\n\nfrom app.models import User\nfrom app.utils import helper\n\n# Bad - mixed order\nfrom app.models import User\nimport numpy as np\nimport os\n\\`\\`\\`\n\n### Type Hints\n\nUse type hints for all function signatures:\n\n\\`\\`\\`python\n# Good\ndef calculate_average(numbers: list[float]) -> float:\n    return sum(numbers) / len(numbers)\n\n# Bad\ndef calculate_average(numbers):\n    return sum(numbers) / len(numbers)\n\\`\\`\\`\n\n## Additional Languages\n\nSee language-specific guides for:\n- Go: `references/go-style.md`\n- Rust: `references/rust-style.md`\n- Ruby: `references/ruby-style.md`\n```\n\n### hooks/hooks.json\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"prompt\",\n          \"prompt\": \"Before modifying code, verify it meets our coding standards from the code-standards skill. Check formatting, naming conventions, and documentation. If standards aren't met, suggest improvements.\",\n          \"timeout\": 30\n        }\n      ]\n    }\n  ],\n  \"Stop\": [\n    {\n      \"matcher\": \".*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/validate-commit.sh\",\n          \"timeout\": 45\n        }\n      ]\n    }\n  ]\n}\n```\n\n### hooks/scripts/validate-commit.sh\n\n```bash\n#!/bin/bash\n# Validate code quality before task completion\n\nset -e\n\n# Check if there are any uncommitted changes\nif [[ -z $(git status -s) ]]; then\n  echo '{\"systemMessage\": \"No changes to validate. Task complete.\"}'\n  exit 0\nfi\n\n# Run linter on changed files\nCHANGED_FILES=$(git diff --name-only --cached | grep -E '\\.(js|ts|py)$' || true)\n\nif [[ -z \"$CHANGED_FILES\" ]]; then\n  echo '{\"systemMessage\": \"No code files changed. Validation passed.\"}'\n  exit 0\nfi\n\n# Run appropriate linters\nISSUES=0\n\nfor file in $CHANGED_FILES; do\n  case \"$file\" in\n    *.js|*.ts)\n      if ! npx eslint \"$file\" --quiet; then\n        ISSUES=$((ISSUES + 1))\n      fi\n      ;;\n    *.py)\n      if ! python -m pylint \"$file\" --errors-only; then\n        ISSUES=$((ISSUES + 1))\n      fi\n      ;;\n  esac\ndone\n\nif [[ $ISSUES -gt 0 ]]; then\n  echo \"{\\\"systemMessage\\\": \\\"Found $ISSUES code quality issues. Please fix before completing.\\\"}\"\n  exit 1\nfi\n\necho '{\"systemMessage\": \"Code quality checks passed. Ready to commit.\"}'\nexit 0\n```\n\n## Usage Examples\n\n### Running Commands\n\n```\n$ claude\n> /lint\nRunning linter checks...\n\nCritical Issues (2):\n  src/api/users.js:45 - SQL injection vulnerability\n  src/utils/helpers.js:12 - Unhandled promise rejection\n\nWarnings (5):\n  src/components/Button.tsx:23 - Missing PropTypes\n  ...\n\nStyle Suggestions (8):\n  src/index.js:1 - Use const instead of let\n  ...\n\n> /test\nRunning test suite...\n\nTest Results:\n  ✓ 245 passed\n  ✗ 3 failed\n  ○ 2 skipped\n\nCoverage: 87.3%\n\nUntested Files:\n  src/utils/cache.js - 0% coverage\n  src/api/webhooks.js - 23% coverage\n\nFailed Tests:\n  1. User API › GET /users › should handle pagination\n     Expected 200, received 500\n  ...\n```\n\n### Using Agents\n\n```\n> Review the changes in src/api/users.js\n\n[code-reviewer agent selected automatically]\n\nCode Review: src/api/users.js\n\nCritical Issues:\n  1. Line 45: SQL injection vulnerability\n     - Using string concatenation for SQL query\n     - Replace with parameterized query\n     - Priority: CRITICAL\n\n  2. Line 67: Missing error handling\n     - Database query without try/catch\n     - Could crash server on DB error\n     - Priority: HIGH\n\nSuggestions:\n  1. Line 23: Consider caching user data\n     - Frequent DB queries for same users\n     - Add Redis caching layer\n     - Priority: MEDIUM\n```\n\n## Key Points\n\n1. **Complete manifest**: All recommended metadata fields\n2. **Multiple components**: Commands, agents, skills, hooks\n3. **Rich skills**: References and examples for detailed information\n4. **Automation**: Hooks enforce standards automatically\n5. **Integration**: Components work together cohesively\n\n## When to Use This Pattern\n\n- Production plugins for distribution\n- Team collaboration tools\n- Plugins requiring consistency enforcement\n- Complex workflows with multiple entry points\n",
        "plugins/plugin-dev/skills/plugin-structure/references/component-patterns.md": "# Component Organization Patterns\n\nAdvanced patterns for organizing plugin components effectively.\n\n## Component Lifecycle\n\n### Discovery Phase\n\nWhen Claude Code starts:\n\n1. **Scan enabled plugins**: Read `.claude-plugin/plugin.json` for each\n2. **Discover components**: Look in default and custom paths\n3. **Parse definitions**: Read YAML frontmatter and configurations\n4. **Register components**: Make available to Claude Code\n5. **Initialize**: Start MCP servers, register hooks\n\n**Timing**: Component registration happens during Claude Code initialization, not continuously.\n\n### Activation Phase\n\nWhen components are used:\n\n**Commands**: User types slash command → Claude Code looks up → Executes\n**Agents**: Task arrives → Claude Code evaluates capabilities → Selects agent\n**Skills**: Task context matches description → Claude Code loads skill\n**Hooks**: Event occurs → Claude Code calls matching hooks\n**MCP Servers**: Tool call matches server capability → Forwards to server\n\n## Command Organization Patterns\n\n### Flat Structure\n\nSingle directory with all commands:\n\n```\ncommands/\n├── build.md\n├── test.md\n├── deploy.md\n├── review.md\n└── docs.md\n```\n\n**When to use**:\n- 5-15 commands total\n- All commands at same abstraction level\n- No clear categorization\n\n**Advantages**:\n- Simple, easy to navigate\n- No configuration needed\n- Fast discovery\n\n### Categorized Structure\n\nMultiple directories for different command types:\n\n```\ncommands/              # Core commands\n├── build.md\n└── test.md\n\nadmin-commands/        # Administrative\n├── configure.md\n└── manage.md\n\nworkflow-commands/     # Workflow automation\n├── review.md\n└── deploy.md\n```\n\n**Manifest configuration**:\n```json\n{\n  \"commands\": [\n    \"./commands\",\n    \"./admin-commands\",\n    \"./workflow-commands\"\n  ]\n}\n```\n\n**When to use**:\n- 15+ commands\n- Clear functional categories\n- Different permission levels\n\n**Advantages**:\n- Organized by purpose\n- Easier to maintain\n- Can restrict access by directory\n\n### Hierarchical Structure\n\nNested organization for complex plugins:\n\n```\ncommands/\n├── ci/\n│   ├── build.md\n│   ├── test.md\n│   └── lint.md\n├── deployment/\n│   ├── staging.md\n│   └── production.md\n└── management/\n    ├── config.md\n    └── status.md\n```\n\n**Note**: Claude Code doesn't support nested command discovery automatically. Use custom paths:\n\n```json\n{\n  \"commands\": [\n    \"./commands/ci\",\n    \"./commands/deployment\",\n    \"./commands/management\"\n  ]\n}\n```\n\n**When to use**:\n- 20+ commands\n- Multi-level categorization\n- Complex workflows\n\n**Advantages**:\n- Maximum organization\n- Clear boundaries\n- Scalable structure\n\n## Agent Organization Patterns\n\n### Role-Based Organization\n\nOrganize agents by their primary role:\n\n```\nagents/\n├── code-reviewer.md        # Reviews code\n├── test-generator.md       # Generates tests\n├── documentation-writer.md # Writes docs\n└── refactorer.md          # Refactors code\n```\n\n**When to use**:\n- Agents have distinct, non-overlapping roles\n- Users invoke agents manually\n- Clear agent responsibilities\n\n### Capability-Based Organization\n\nOrganize by specific capabilities:\n\n```\nagents/\n├── python-expert.md        # Python-specific\n├── typescript-expert.md    # TypeScript-specific\n├── api-specialist.md       # API design\n└── database-specialist.md  # Database work\n```\n\n**When to use**:\n- Technology-specific agents\n- Domain expertise focus\n- Automatic agent selection\n\n### Workflow-Based Organization\n\nOrganize by workflow stage:\n\n```\nagents/\n├── planning-agent.md      # Planning phase\n├── implementation-agent.md # Coding phase\n├── testing-agent.md       # Testing phase\n└── deployment-agent.md    # Deployment phase\n```\n\n**When to use**:\n- Sequential workflows\n- Stage-specific expertise\n- Pipeline automation\n\n## Skill Organization Patterns\n\n### Topic-Based Organization\n\nEach skill covers a specific topic:\n\n```\nskills/\n├── api-design/\n│   └── SKILL.md\n├── error-handling/\n│   └── SKILL.md\n├── testing-strategies/\n│   └── SKILL.md\n└── performance-optimization/\n    └── SKILL.md\n```\n\n**When to use**:\n- Knowledge-based skills\n- Educational or reference content\n- Broad applicability\n\n### Tool-Based Organization\n\nSkills for specific tools or technologies:\n\n```\nskills/\n├── docker/\n│   ├── SKILL.md\n│   └── references/\n│       └── dockerfile-best-practices.md\n├── kubernetes/\n│   ├── SKILL.md\n│   └── examples/\n│       └── deployment.yaml\n└── terraform/\n    ├── SKILL.md\n    └── scripts/\n        └── validate-config.sh\n```\n\n**When to use**:\n- Tool-specific expertise\n- Complex tool configurations\n- Tool best practices\n\n### Workflow-Based Organization\n\nSkills for complete workflows:\n\n```\nskills/\n├── code-review-workflow/\n│   ├── SKILL.md\n│   └── references/\n│       ├── checklist.md\n│       └── standards.md\n├── deployment-workflow/\n│   ├── SKILL.md\n│   └── scripts/\n│       ├── pre-deploy.sh\n│       └── post-deploy.sh\n└── testing-workflow/\n    ├── SKILL.md\n    └── examples/\n        └── test-structure.md\n```\n\n**When to use**:\n- Multi-step processes\n- Company-specific workflows\n- Process automation\n\n### Skill with Rich Resources\n\nComprehensive skill with all resource types:\n\n```\nskills/\n└── api-testing/\n    ├── SKILL.md              # Core skill (1500 words)\n    ├── references/\n    │   ├── rest-api-guide.md\n    │   ├── graphql-guide.md\n    │   └── authentication.md\n    ├── examples/\n    │   ├── basic-test.js\n    │   ├── authenticated-test.js\n    │   └── integration-test.js\n    ├── scripts/\n    │   ├── run-tests.sh\n    │   └── generate-report.py\n    └── assets/\n        └── test-template.json\n```\n\n**Resource usage**:\n- **SKILL.md**: Overview and when to use resources\n- **references/**: Detailed guides (loaded as needed)\n- **examples/**: Copy-paste code samples\n- **scripts/**: Executable test runners\n- **assets/**: Templates and configurations\n\n## Hook Organization Patterns\n\n### Monolithic Configuration\n\nSingle hooks.json with all hooks:\n\n```\nhooks/\n├── hooks.json     # All hook definitions\n└── scripts/\n    ├── validate-write.sh\n    ├── validate-bash.sh\n    └── load-context.sh\n```\n\n**hooks.json**:\n```json\n{\n  \"PreToolUse\": [...],\n  \"PostToolUse\": [...],\n  \"Stop\": [...],\n  \"SessionStart\": [...]\n}\n```\n\n**When to use**:\n- 5-10 hooks total\n- Simple hook logic\n- Centralized configuration\n\n### Event-Based Organization\n\nSeparate files per event type:\n\n```\nhooks/\n├── hooks.json              # Combines all\n├── pre-tool-use.json      # PreToolUse hooks\n├── post-tool-use.json     # PostToolUse hooks\n├── stop.json              # Stop hooks\n└── scripts/\n    ├── validate/\n    │   ├── write.sh\n    │   └── bash.sh\n    └── context/\n        └── load.sh\n```\n\n**hooks.json** (combines):\n```json\n{\n  \"PreToolUse\": ${file:./pre-tool-use.json},\n  \"PostToolUse\": ${file:./post-tool-use.json},\n  \"Stop\": ${file:./stop.json}\n}\n```\n\n**Note**: Use build script to combine files, Claude Code doesn't support file references.\n\n**When to use**:\n- 10+ hooks\n- Different teams managing different events\n- Complex hook configurations\n\n### Purpose-Based Organization\n\nGroup by functional purpose:\n\n```\nhooks/\n├── hooks.json\n└── scripts/\n    ├── security/\n    │   ├── validate-paths.sh\n    │   ├── check-credentials.sh\n    │   └── scan-malware.sh\n    ├── quality/\n    │   ├── lint-code.sh\n    │   ├── check-tests.sh\n    │   └── verify-docs.sh\n    └── workflow/\n        ├── notify-team.sh\n        └── update-status.sh\n```\n\n**When to use**:\n- Many hook scripts\n- Clear functional boundaries\n- Team specialization\n\n## Script Organization Patterns\n\n### Flat Scripts\n\nAll scripts in single directory:\n\n```\nscripts/\n├── build.sh\n├── test.py\n├── deploy.sh\n├── validate.js\n└── report.py\n```\n\n**When to use**:\n- 5-10 scripts\n- All scripts related\n- Simple plugin\n\n### Categorized Scripts\n\nGroup by purpose:\n\n```\nscripts/\n├── build/\n│   ├── compile.sh\n│   └── package.sh\n├── test/\n│   ├── run-unit.sh\n│   └── run-integration.sh\n├── deploy/\n│   ├── staging.sh\n│   └── production.sh\n└── utils/\n    ├── log.sh\n    └── notify.sh\n```\n\n**When to use**:\n- 10+ scripts\n- Clear categories\n- Reusable utilities\n\n### Language-Based Organization\n\nGroup by programming language:\n\n```\nscripts/\n├── bash/\n│   ├── build.sh\n│   └── deploy.sh\n├── python/\n│   ├── analyze.py\n│   └── report.py\n└── javascript/\n    ├── bundle.js\n    └── optimize.js\n```\n\n**When to use**:\n- Multi-language scripts\n- Different runtime requirements\n- Language-specific dependencies\n\n## Cross-Component Patterns\n\n### Shared Resources\n\nComponents sharing common resources:\n\n```\nplugin/\n├── commands/\n│   ├── test.md        # Uses lib/test-utils.sh\n│   └── deploy.md      # Uses lib/deploy-utils.sh\n├── agents/\n│   └── tester.md      # References lib/test-utils.sh\n├── hooks/\n│   └── scripts/\n│       └── pre-test.sh # Sources lib/test-utils.sh\n└── lib/\n    ├── test-utils.sh\n    └── deploy-utils.sh\n```\n\n**Usage in components**:\n```bash\n#!/bin/bash\nsource \"${CLAUDE_PLUGIN_ROOT}/lib/test-utils.sh\"\nrun_tests\n```\n\n**Benefits**:\n- Code reuse\n- Consistent behavior\n- Easier maintenance\n\n### Layered Architecture\n\nSeparate concerns into layers:\n\n```\nplugin/\n├── commands/          # User interface layer\n├── agents/            # Orchestration layer\n├── skills/            # Knowledge layer\n└── lib/\n    ├── core/         # Core business logic\n    ├── integrations/ # External services\n    └── utils/        # Helper functions\n```\n\n**When to use**:\n- Large plugins (100+ files)\n- Multiple developers\n- Clear separation of concerns\n\n### Plugin Within Plugin\n\nNested plugin structure:\n\n```\nplugin/\n├── .claude-plugin/\n│   └── plugin.json\n├── core/              # Core functionality\n│   ├── commands/\n│   └── agents/\n└── extensions/        # Optional extensions\n    ├── extension-a/\n    │   ├── commands/\n    │   └── agents/\n    └── extension-b/\n        ├── commands/\n        └── agents/\n```\n\n**Manifest**:\n```json\n{\n  \"commands\": [\n    \"./core/commands\",\n    \"./extensions/extension-a/commands\",\n    \"./extensions/extension-b/commands\"\n  ]\n}\n```\n\n**When to use**:\n- Modular functionality\n- Optional features\n- Plugin families\n\n## Best Practices\n\n### Naming\n\n1. **Consistent naming**: Match file names to component purpose\n2. **Descriptive names**: Indicate what component does\n3. **Avoid abbreviations**: Use full words for clarity\n\n### Organization\n\n1. **Start simple**: Use flat structure, reorganize when needed\n2. **Group related items**: Keep related components together\n3. **Separate concerns**: Don't mix unrelated functionality\n\n### Scalability\n\n1. **Plan for growth**: Choose structure that scales\n2. **Refactor early**: Reorganize before it becomes painful\n3. **Document structure**: Explain organization in README\n\n### Maintainability\n\n1. **Consistent patterns**: Use same structure throughout\n2. **Minimize nesting**: Keep directory depth manageable\n3. **Use conventions**: Follow community standards\n\n### Performance\n\n1. **Avoid deep nesting**: Impacts discovery time\n2. **Minimize custom paths**: Use defaults when possible\n3. **Keep configurations small**: Large configs slow loading\n",
        "plugins/plugin-dev/skills/plugin-structure/references/manifest-reference.md": "# Plugin Manifest Reference\n\nComplete reference for `plugin.json` configuration.\n\n## File Location\n\n**Required path**: `.claude-plugin/plugin.json`\n\nThe manifest MUST be in the `.claude-plugin/` directory at the plugin root. Claude Code will not recognize plugins without this file in the correct location.\n\n## Complete Field Reference\n\n### Core Fields\n\n#### name (required)\n\n**Type**: String\n**Format**: kebab-case\n**Example**: `\"test-automation-suite\"`\n\nThe unique identifier for the plugin. Used for:\n- Plugin identification in Claude Code\n- Conflict detection with other plugins\n- Command namespacing (optional)\n\n**Requirements**:\n- Must be unique across all installed plugins\n- Use only lowercase letters, numbers, and hyphens\n- No spaces or special characters\n- Start with a letter\n- End with a letter or number\n\n**Validation**:\n```javascript\n/^[a-z][a-z0-9]*(-[a-z0-9]+)*$/\n```\n\n**Examples**:\n- ✅ Good: `api-tester`, `code-review`, `git-workflow-automation`\n- ❌ Bad: `API Tester`, `code_review`, `-git-workflow`, `test-`\n\n#### version\n\n**Type**: String\n**Format**: Semantic versioning (MAJOR.MINOR.PATCH)\n**Example**: `\"2.1.0\"`\n**Default**: `\"0.1.0\"` if not specified\n\nSemantic versioning guidelines:\n- **MAJOR**: Incompatible API changes, breaking changes\n- **MINOR**: New functionality, backward-compatible\n- **PATCH**: Bug fixes, backward-compatible\n\n**Pre-release versions**:\n- `\"1.0.0-alpha.1\"` - Alpha release\n- `\"1.0.0-beta.2\"` - Beta release\n- `\"1.0.0-rc.1\"` - Release candidate\n\n**Examples**:\n- `\"0.1.0\"` - Initial development\n- `\"1.0.0\"` - First stable release\n- `\"1.2.3\"` - Patch update to 1.2\n- `\"2.0.0\"` - Major version with breaking changes\n\n#### description\n\n**Type**: String\n**Length**: 50-200 characters recommended\n**Example**: `\"Automates code review workflows with style checks and automated feedback\"`\n\nBrief explanation of plugin purpose and functionality.\n\n**Best practices**:\n- Focus on what the plugin does, not how\n- Use active voice\n- Mention key features or benefits\n- Keep under 200 characters for marketplace display\n\n**Examples**:\n- ✅ \"Generates comprehensive test suites from code analysis and coverage reports\"\n- ✅ \"Integrates with Jira for automatic issue tracking and sprint management\"\n- ❌ \"A plugin that helps you do testing stuff\"\n- ❌ \"This is a very long description that goes on and on about every single feature...\"\n\n### Metadata Fields\n\n#### author\n\n**Type**: Object\n**Fields**: name (required), email (optional), url (optional)\n\n```json\n{\n  \"author\": {\n    \"name\": \"Jane Developer\",\n    \"email\": \"jane@example.com\",\n    \"url\": \"https://janedeveloper.com\"\n  }\n}\n```\n\n**Alternative format** (string only):\n```json\n{\n  \"author\": \"Jane Developer <jane@example.com> (https://janedeveloper.com)\"\n}\n```\n\n**Use cases**:\n- Credit and attribution\n- Contact for support or questions\n- Marketplace display\n- Community recognition\n\n#### homepage\n\n**Type**: String (URL)\n**Example**: `\"https://docs.example.com/plugins/my-plugin\"`\n\nLink to plugin documentation or landing page.\n\n**Should point to**:\n- Plugin documentation site\n- Project homepage\n- Detailed usage guide\n- Installation instructions\n\n**Not for**:\n- Source code (use `repository` field)\n- Issue tracker (include in documentation)\n- Personal websites (use `author.url`)\n\n#### repository\n\n**Type**: String (URL) or Object\n**Example**: `\"https://github.com/user/plugin-name\"`\n\nSource code repository location.\n\n**String format**:\n```json\n{\n  \"repository\": \"https://github.com/user/plugin-name\"\n}\n```\n\n**Object format** (detailed):\n```json\n{\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/user/plugin-name.git\",\n    \"directory\": \"packages/plugin-name\"\n  }\n}\n```\n\n**Use cases**:\n- Source code access\n- Issue reporting\n- Community contributions\n- Transparency and trust\n\n#### license\n\n**Type**: String\n**Format**: SPDX identifier\n**Example**: `\"MIT\"`\n\nSoftware license identifier.\n\n**Common licenses**:\n- `\"MIT\"` - Permissive, popular choice\n- `\"Apache-2.0\"` - Permissive with patent grant\n- `\"GPL-3.0\"` - Copyleft\n- `\"BSD-3-Clause\"` - Permissive\n- `\"ISC\"` - Permissive, similar to MIT\n- `\"UNLICENSED\"` - Proprietary, not open source\n\n**Full list**: https://spdx.org/licenses/\n\n**Multiple licenses**:\n```json\n{\n  \"license\": \"(MIT OR Apache-2.0)\"\n}\n```\n\n#### keywords\n\n**Type**: Array of strings\n**Example**: `[\"testing\", \"automation\", \"ci-cd\", \"quality-assurance\"]`\n\nTags for plugin discovery and categorization.\n\n**Best practices**:\n- Use 5-10 keywords\n- Include functionality categories\n- Add technology names\n- Use common search terms\n- Avoid duplicating plugin name\n\n**Categories to consider**:\n- Functionality: `testing`, `debugging`, `documentation`, `deployment`\n- Technologies: `typescript`, `python`, `docker`, `aws`\n- Workflows: `ci-cd`, `code-review`, `git-workflow`\n- Domains: `web-development`, `data-science`, `devops`\n\n### Component Path Fields\n\n#### commands\n\n**Type**: String or Array of strings\n**Default**: `[\"./commands\"]`\n**Example**: `\"./cli-commands\"`\n\nAdditional directories or files containing command definitions.\n\n**Single path**:\n```json\n{\n  \"commands\": \"./custom-commands\"\n}\n```\n\n**Multiple paths**:\n```json\n{\n  \"commands\": [\n    \"./commands\",\n    \"./admin-commands\",\n    \"./experimental-commands\"\n  ]\n}\n```\n\n**Behavior**: Supplements default `commands/` directory (does not replace)\n\n**Use cases**:\n- Organizing commands by category\n- Separating stable from experimental commands\n- Loading commands from shared locations\n\n#### agents\n\n**Type**: String or Array of strings\n**Default**: `[\"./agents\"]`\n**Example**: `\"./specialized-agents\"`\n\nAdditional directories or files containing agent definitions.\n\n**Format**: Same as `commands` field\n\n**Use cases**:\n- Grouping agents by specialization\n- Separating general-purpose from task-specific agents\n- Loading agents from plugin dependencies\n\n#### hooks\n\n**Type**: String (path to JSON file) or Object (inline configuration)\n**Default**: `\"./hooks/hooks.json\"`\n\nHook configuration location or inline definition.\n\n**File path**:\n```json\n{\n  \"hooks\": \"./config/hooks.json\"\n}\n```\n\n**Inline configuration**:\n```json\n{\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n**Use cases**:\n- Simple plugins: Inline configuration (< 50 lines)\n- Complex plugins: External JSON file\n- Multiple hook sets: Separate files for different contexts\n\n#### mcpServers\n\n**Type**: String (path to JSON file) or Object (inline configuration)\n**Default**: `./.mcp.json`\n\nMCP server configuration location or inline definition.\n\n**File path**:\n```json\n{\n  \"mcpServers\": \"./.mcp.json\"\n}\n```\n\n**Inline configuration**:\n```json\n{\n  \"mcpServers\": {\n    \"github\": {\n      \"command\": \"node\",\n      \"args\": [\"${CLAUDE_PLUGIN_ROOT}/servers/github-mcp.js\"],\n      \"env\": {\n        \"GITHUB_TOKEN\": \"${GITHUB_TOKEN}\"\n      }\n    }\n  }\n}\n```\n\n**Use cases**:\n- Simple plugins: Single inline server (< 20 lines)\n- Complex plugins: External `.mcp.json` file\n- Multiple servers: Always use external file\n\n## Path Resolution\n\n### Relative Path Rules\n\nAll paths in component fields must follow these rules:\n\n1. **Must be relative**: No absolute paths\n2. **Must start with `./`**: Indicates relative to plugin root\n3. **Cannot use `../`**: No parent directory navigation\n4. **Forward slashes only**: Even on Windows\n\n**Examples**:\n- ✅ `\"./commands\"`\n- ✅ `\"./src/commands\"`\n- ✅ `\"./configs/hooks.json\"`\n- ❌ `\"/Users/name/plugin/commands\"`\n- ❌ `\"commands\"` (missing `./`)\n- ❌ `\"../shared/commands\"`\n- ❌ `\".\\\\commands\"` (backslash)\n\n### Resolution Order\n\nWhen Claude Code loads components:\n\n1. **Default directories**: Scans standard locations first\n   - `./commands/`\n   - `./agents/`\n   - `./skills/`\n   - `./hooks/hooks.json`\n   - `./.mcp.json`\n\n2. **Custom paths**: Scans paths specified in manifest\n   - Paths from `commands` field\n   - Paths from `agents` field\n   - Files from `hooks` and `mcpServers` fields\n\n3. **Merge behavior**: Components from all locations load\n   - No overwriting\n   - All discovered components register\n   - Name conflicts cause errors\n\n## Validation\n\n### Manifest Validation\n\nClaude Code validates the manifest on plugin load:\n\n**Syntax validation**:\n- Valid JSON format\n- No syntax errors\n- Correct field types\n\n**Field validation**:\n- `name` field present and valid format\n- `version` follows semantic versioning (if present)\n- Paths are relative with `./` prefix\n- URLs are valid (if present)\n\n**Component validation**:\n- Referenced paths exist\n- Hook and MCP configurations are valid\n- No circular dependencies\n\n### Common Validation Errors\n\n**Invalid name format**:\n```json\n{\n  \"name\": \"My Plugin\"  // ❌ Contains spaces\n}\n```\nFix: Use kebab-case\n```json\n{\n  \"name\": \"my-plugin\"  // ✅\n}\n```\n\n**Absolute path**:\n```json\n{\n  \"commands\": \"/Users/name/commands\"  // ❌ Absolute path\n}\n```\nFix: Use relative path\n```json\n{\n  \"commands\": \"./commands\"  // ✅\n}\n```\n\n**Missing ./ prefix**:\n```json\n{\n  \"hooks\": \"hooks/hooks.json\"  // ❌ No ./\n}\n```\nFix: Add ./ prefix\n```json\n{\n  \"hooks\": \"./hooks/hooks.json\"  // ✅\n}\n```\n\n**Invalid version**:\n```json\n{\n  \"version\": \"1.0\"  // ❌ Not semantic versioning\n}\n```\nFix: Use MAJOR.MINOR.PATCH\n```json\n{\n  \"version\": \"1.0.0\"  // ✅\n}\n```\n\n## Minimal vs. Complete Examples\n\n### Minimal Plugin\n\nBare minimum for a working plugin:\n\n```json\n{\n  \"name\": \"hello-world\"\n}\n```\n\nRelies entirely on default directory discovery.\n\n### Recommended Plugin\n\nGood metadata for distribution:\n\n```json\n{\n  \"name\": \"code-review-assistant\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Automates code review with style checks and suggestions\",\n  \"author\": {\n    \"name\": \"Jane Developer\",\n    \"email\": \"jane@example.com\"\n  },\n  \"homepage\": \"https://docs.example.com/code-review\",\n  \"repository\": \"https://github.com/janedev/code-review-assistant\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"code-review\", \"automation\", \"quality\", \"ci-cd\"]\n}\n```\n\n### Complete Plugin\n\nFull configuration with all features:\n\n```json\n{\n  \"name\": \"enterprise-devops\",\n  \"version\": \"2.3.1\",\n  \"description\": \"Comprehensive DevOps automation for enterprise CI/CD pipelines\",\n  \"author\": {\n    \"name\": \"DevOps Team\",\n    \"email\": \"devops@company.com\",\n    \"url\": \"https://company.com/devops\"\n  },\n  \"homepage\": \"https://docs.company.com/plugins/devops\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/company/devops-plugin.git\"\n  },\n  \"license\": \"Apache-2.0\",\n  \"keywords\": [\n    \"devops\",\n    \"ci-cd\",\n    \"automation\",\n    \"kubernetes\",\n    \"docker\",\n    \"deployment\"\n  ],\n  \"commands\": [\n    \"./commands\",\n    \"./admin-commands\"\n  ],\n  \"agents\": \"./specialized-agents\",\n  \"hooks\": \"./config/hooks.json\",\n  \"mcpServers\": \"./.mcp.json\"\n}\n```\n\n## Best Practices\n\n### Metadata\n\n1. **Always include version**: Track changes and updates\n2. **Write clear descriptions**: Help users understand plugin purpose\n3. **Provide contact information**: Enable user support\n4. **Link to documentation**: Reduce support burden\n5. **Choose appropriate license**: Match project goals\n\n### Paths\n\n1. **Use defaults when possible**: Minimize configuration\n2. **Organize logically**: Group related components\n3. **Document custom paths**: Explain why non-standard layout used\n4. **Test path resolution**: Verify on multiple systems\n\n### Maintenance\n\n1. **Bump version on changes**: Follow semantic versioning\n2. **Update keywords**: Reflect new functionality\n3. **Keep description current**: Match actual capabilities\n4. **Maintain changelog**: Track version history\n5. **Update repository links**: Keep URLs current\n\n### Distribution\n\n1. **Complete metadata before publishing**: All fields filled\n2. **Test on clean install**: Verify plugin works without dev environment\n3. **Validate manifest**: Use validation tools\n4. **Include README**: Document installation and usage\n5. **Specify license file**: Include LICENSE file in plugin root\n",
        "plugins/plugin-dev/skills/skill-development/SKILL.md": "---\nname: Skill Development\ndescription: This skill should be used when the user wants to \"create a skill\", \"add a skill to plugin\", \"write a new skill\", \"improve skill description\", \"organize skill content\", or needs guidance on skill structure, progressive disclosure, or skill development best practices for Claude Code plugins.\nversion: 0.1.0\n---\n\n# Skill Development for Claude Code Plugins\n\nThis skill provides guidance for creating effective skills for Claude Code plugins.\n\n## About Skills\n\nSkills are modular, self-contained packages that extend Claude's capabilities by providing\nspecialized knowledge, workflows, and tools. Think of them as \"onboarding guides\" for specific\ndomains or tasks—they transform Claude from a general-purpose agent into a specialized agent\nequipped with procedural knowledge that no model can fully possess.\n\n### What Skills Provide\n\n1. Specialized workflows - Multi-step procedures for specific domains\n2. Tool integrations - Instructions for working with specific file formats or APIs\n3. Domain expertise - Company-specific knowledge, schemas, business logic\n4. Bundled resources - Scripts, references, and assets for complex and repetitive tasks\n\n### Anatomy of a Skill\n\nEvery skill consists of a required SKILL.md file and optional bundled resources:\n\n```\nskill-name/\n├── SKILL.md (required)\n│   ├── YAML frontmatter metadata (required)\n│   │   ├── name: (required)\n│   │   └── description: (required)\n│   └── Markdown instructions (required)\n└── Bundled Resources (optional)\n    ├── scripts/          - Executable code (Python/Bash/etc.)\n    ├── references/       - Documentation intended to be loaded into context as needed\n    └── assets/           - Files used in output (templates, icons, fonts, etc.)\n```\n\n#### SKILL.md (required)\n\n**Metadata Quality:** The `name` and `description` in YAML frontmatter determine when Claude will use the skill. Be specific about what the skill does and when to use it. Use the third-person (e.g. \"This skill should be used when...\" instead of \"Use this skill when...\").\n\n#### Bundled Resources (optional)\n\n##### Scripts (`scripts/`)\n\nExecutable code (Python/Bash/etc.) for tasks that require deterministic reliability or are repeatedly rewritten.\n\n- **When to include**: When the same code is being rewritten repeatedly or deterministic reliability is needed\n- **Example**: `scripts/rotate_pdf.py` for PDF rotation tasks\n- **Benefits**: Token efficient, deterministic, may be executed without loading into context\n- **Note**: Scripts may still need to be read by Claude for patching or environment-specific adjustments\n\n##### References (`references/`)\n\nDocumentation and reference material intended to be loaded as needed into context to inform Claude's process and thinking.\n\n- **When to include**: For documentation that Claude should reference while working\n- **Examples**: `references/finance.md` for financial schemas, `references/mnda.md` for company NDA template, `references/policies.md` for company policies, `references/api_docs.md` for API specifications\n- **Use cases**: Database schemas, API documentation, domain knowledge, company policies, detailed workflow guides\n- **Benefits**: Keeps SKILL.md lean, loaded only when Claude determines it's needed\n- **Best practice**: If files are large (>10k words), include grep search patterns in SKILL.md\n- **Avoid duplication**: Information should live in either SKILL.md or references files, not both. Prefer references files for detailed information unless it's truly core to the skill—this keeps SKILL.md lean while making information discoverable without hogging the context window. Keep only essential procedural instructions and workflow guidance in SKILL.md; move detailed reference material, schemas, and examples to references files.\n\n##### Assets (`assets/`)\n\nFiles not intended to be loaded into context, but rather used within the output Claude produces.\n\n- **When to include**: When the skill needs files that will be used in the final output\n- **Examples**: `assets/logo.png` for brand assets, `assets/slides.pptx` for PowerPoint templates, `assets/frontend-template/` for HTML/React boilerplate, `assets/font.ttf` for typography\n- **Use cases**: Templates, images, icons, boilerplate code, fonts, sample documents that get copied or modified\n- **Benefits**: Separates output resources from documentation, enables Claude to use files without loading them into context\n\n### Progressive Disclosure Design Principle\n\nSkills use a three-level loading system to manage context efficiently:\n\n1. **Metadata (name + description)** - Always in context (~100 words)\n2. **SKILL.md body** - When skill triggers (<5k words)\n3. **Bundled resources** - As needed by Claude (Unlimited*)\n\n*Unlimited because scripts can be executed without reading into context window.\n\n## Skill Creation Process\n\nTo create a skill, follow the \"Skill Creation Process\" in order, skipping steps only if there is a clear reason why they are not applicable.\n\n### Step 1: Understanding the Skill with Concrete Examples\n\nSkip this step only when the skill's usage patterns are already clearly understood. It remains valuable even when working with an existing skill.\n\nTo create an effective skill, clearly understand concrete examples of how the skill will be used. This understanding can come from either direct user examples or generated examples that are validated with user feedback.\n\nFor example, when building an image-editor skill, relevant questions include:\n\n- \"What functionality should the image-editor skill support? Editing, rotating, anything else?\"\n- \"Can you give some examples of how this skill would be used?\"\n- \"I can imagine users asking for things like 'Remove the red-eye from this image' or 'Rotate this image'. Are there other ways you imagine this skill being used?\"\n- \"What would a user say that should trigger this skill?\"\n\nTo avoid overwhelming users, avoid asking too many questions in a single message. Start with the most important questions and follow up as needed for better effectiveness.\n\nConclude this step when there is a clear sense of the functionality the skill should support.\n\n### Step 2: Planning the Reusable Skill Contents\n\nTo turn concrete examples into an effective skill, analyze each example by:\n\n1. Considering how to execute on the example from scratch\n2. Identifying what scripts, references, and assets would be helpful when executing these workflows repeatedly\n\nExample: When building a `pdf-editor` skill to handle queries like \"Help me rotate this PDF,\" the analysis shows:\n\n1. Rotating a PDF requires re-writing the same code each time\n2. A `scripts/rotate_pdf.py` script would be helpful to store in the skill\n\nExample: When designing a `frontend-webapp-builder` skill for queries like \"Build me a todo app\" or \"Build me a dashboard to track my steps,\" the analysis shows:\n\n1. Writing a frontend webapp requires the same boilerplate HTML/React each time\n2. An `assets/hello-world/` template containing the boilerplate HTML/React project files would be helpful to store in the skill\n\nExample: When building a `big-query` skill to handle queries like \"How many users have logged in today?\" the analysis shows:\n\n1. Querying BigQuery requires re-discovering the table schemas and relationships each time\n2. A `references/schema.md` file documenting the table schemas would be helpful to store in the skill\n\n**For Claude Code plugins:** When building a hooks skill, the analysis shows:\n1. Developers repeatedly need to validate hooks.json and test hook scripts\n2. `scripts/validate-hook-schema.sh` and `scripts/test-hook.sh` utilities would be helpful\n3. `references/patterns.md` for detailed hook patterns to avoid bloating SKILL.md\n\nTo establish the skill's contents, analyze each concrete example to create a list of the reusable resources to include: scripts, references, and assets.\n\n### Step 3: Create Skill Structure\n\nFor Claude Code plugins, create the skill directory structure:\n\n```bash\nmkdir -p plugin-name/skills/skill-name/{references,examples,scripts}\ntouch plugin-name/skills/skill-name/SKILL.md\n```\n\n**Note:** Unlike the generic skill-creator which uses `init_skill.py`, plugin skills are created directly in the plugin's `skills/` directory with a simpler manual structure.\n\n### Step 4: Edit the Skill\n\nWhen editing the (newly-created or existing) skill, remember that the skill is being created for another instance of Claude to use. Focus on including information that would be beneficial and non-obvious to Claude. Consider what procedural knowledge, domain-specific details, or reusable assets would help another Claude instance execute these tasks more effectively.\n\n#### Start with Reusable Skill Contents\n\nTo begin implementation, start with the reusable resources identified above: `scripts/`, `references/`, and `assets/` files. Note that this step may require user input. For example, when implementing a `brand-guidelines` skill, the user may need to provide brand assets or templates to store in `assets/`, or documentation to store in `references/`.\n\nAlso, delete any example files and directories not needed for the skill. Create only the directories you actually need (references/, examples/, scripts/).\n\n#### Update SKILL.md\n\n**Writing Style:** Write the entire skill using **imperative/infinitive form** (verb-first instructions), not second person. Use objective, instructional language (e.g., \"To accomplish X, do Y\" rather than \"You should do X\" or \"If you need to do X\"). This maintains consistency and clarity for AI consumption.\n\n**Description (Frontmatter):** Use third-person format with specific trigger phrases:\n\n```yaml\n---\nname: Skill Name\ndescription: This skill should be used when the user asks to \"specific phrase 1\", \"specific phrase 2\", \"specific phrase 3\". Include exact phrases users would say that should trigger this skill. Be concrete and specific.\nversion: 0.1.0\n---\n```\n\n**Good description examples:**\n```yaml\ndescription: This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse hook\", \"validate tool use\", \"implement prompt-based hooks\", or mentions hook events (PreToolUse, PostToolUse, Stop).\n```\n\n**Bad description examples:**\n```yaml\ndescription: Use this skill when working with hooks.  # Wrong person, vague\ndescription: Load when user needs hook help.  # Not third person\ndescription: Provides hook guidance.  # No trigger phrases\n```\n\nTo complete SKILL.md body, answer the following questions:\n\n1. What is the purpose of the skill, in a few sentences?\n2. When should the skill be used? (Include this in frontmatter description with specific triggers)\n3. In practice, how should Claude use the skill? All reusable skill contents developed above should be referenced so that Claude knows how to use them.\n\n**Keep SKILL.md lean:** Target 1,500-2,000 words for the body. Move detailed content to references/:\n- Detailed patterns → `references/patterns.md`\n- Advanced techniques → `references/advanced.md`\n- Migration guides → `references/migration.md`\n- API references → `references/api-reference.md`\n\n**Reference resources in SKILL.md:**\n```markdown\n## Additional Resources\n\n### Reference Files\n\nFor detailed patterns and techniques, consult:\n- **`references/patterns.md`** - Common patterns\n- **`references/advanced.md`** - Advanced use cases\n\n### Example Files\n\nWorking examples in `examples/`:\n- **`example-script.sh`** - Working example\n```\n\n### Step 5: Validate and Test\n\n**For plugin skills, validation is different from generic skills:**\n\n1. **Check structure**: Skill directory in `plugin-name/skills/skill-name/`\n2. **Validate SKILL.md**: Has frontmatter with name and description\n3. **Check trigger phrases**: Description includes specific user queries\n4. **Verify writing style**: Body uses imperative/infinitive form, not second person\n5. **Test progressive disclosure**: SKILL.md is lean (~1,500-2,000 words), detailed content in references/\n6. **Check references**: All referenced files exist\n7. **Validate examples**: Examples are complete and correct\n8. **Test scripts**: Scripts are executable and work correctly\n\n**Use the skill-reviewer agent:**\n```\nAsk: \"Review my skill and check if it follows best practices\"\n```\n\nThe skill-reviewer agent will check description quality, content organization, and progressive disclosure.\n\n### Step 6: Iterate\n\nAfter testing the skill, users may request improvements. Often this happens right after using the skill, with fresh context of how the skill performed.\n\n**Iteration workflow:**\n1. Use the skill on real tasks\n2. Notice struggles or inefficiencies\n3. Identify how SKILL.md or bundled resources should be updated\n4. Implement changes and test again\n\n**Common improvements:**\n- Strengthen trigger phrases in description\n- Move long sections from SKILL.md to references/\n- Add missing examples or scripts\n- Clarify ambiguous instructions\n- Add edge case handling\n\n## Plugin-Specific Considerations\n\n### Skill Location in Plugins\n\nPlugin skills live in the plugin's `skills/` directory:\n\n```\nmy-plugin/\n├── .claude-plugin/\n│   └── plugin.json\n├── commands/\n├── agents/\n└── skills/\n    └── my-skill/\n        ├── SKILL.md\n        ├── references/\n        ├── examples/\n        └── scripts/\n```\n\n### Auto-Discovery\n\nClaude Code automatically discovers skills:\n- Scans `skills/` directory\n- Finds subdirectories containing `SKILL.md`\n- Loads skill metadata (name + description) always\n- Loads SKILL.md body when skill triggers\n- Loads references/examples when needed\n\n### No Packaging Needed\n\nPlugin skills are distributed as part of the plugin, not as separate ZIP files. Users get skills when they install the plugin.\n\n### Testing in Plugins\n\nTest skills by installing plugin locally:\n\n```bash\n# Test with --plugin-dir\ncc --plugin-dir /path/to/plugin\n\n# Ask questions that should trigger the skill\n# Verify skill loads correctly\n```\n\n## Examples from Plugin-Dev\n\nStudy the skills in this plugin as examples of best practices:\n\n**hook-development skill:**\n- Excellent trigger phrases: \"create a hook\", \"add a PreToolUse hook\", etc.\n- Lean SKILL.md (1,651 words)\n- 3 references/ files for detailed content\n- 3 examples/ of working hooks\n- 3 scripts/ utilities\n\n**agent-development skill:**\n- Strong triggers: \"create an agent\", \"agent frontmatter\", etc.\n- Focused SKILL.md (1,438 words)\n- References include the AI generation prompt from Claude Code\n- Complete agent examples\n\n**plugin-settings skill:**\n- Specific triggers: \"plugin settings\", \".local.md files\", \"YAML frontmatter\"\n- References show real implementations (multi-agent-swarm, ralph-loop)\n- Working parsing scripts\n\nEach demonstrates progressive disclosure and strong triggering.\n\n## Progressive Disclosure in Practice\n\n### What Goes in SKILL.md\n\n**Include (always loaded when skill triggers):**\n- Core concepts and overview\n- Essential procedures and workflows\n- Quick reference tables\n- Pointers to references/examples/scripts\n- Most common use cases\n\n**Keep under 3,000 words, ideally 1,500-2,000 words**\n\n### What Goes in references/\n\n**Move to references/ (loaded as needed):**\n- Detailed patterns and advanced techniques\n- Comprehensive API documentation\n- Migration guides\n- Edge cases and troubleshooting\n- Extensive examples and walkthroughs\n\n**Each reference file can be large (2,000-5,000+ words)**\n\n### What Goes in examples/\n\n**Working code examples:**\n- Complete, runnable scripts\n- Configuration files\n- Template files\n- Real-world usage examples\n\n**Users can copy and adapt these directly**\n\n### What Goes in scripts/\n\n**Utility scripts:**\n- Validation tools\n- Testing helpers\n- Parsing utilities\n- Automation scripts\n\n**Should be executable and documented**\n\n## Writing Style Requirements\n\n### Imperative/Infinitive Form\n\nWrite using verb-first instructions, not second person:\n\n**Correct (imperative):**\n```\nTo create a hook, define the event type.\nConfigure the MCP server with authentication.\nValidate settings before use.\n```\n\n**Incorrect (second person):**\n```\nYou should create a hook by defining the event type.\nYou need to configure the MCP server.\nYou must validate settings before use.\n```\n\n### Third-Person in Description\n\nThe frontmatter description must use third person:\n\n**Correct:**\n```yaml\ndescription: This skill should be used when the user asks to \"create X\", \"configure Y\"...\n```\n\n**Incorrect:**\n```yaml\ndescription: Use this skill when you want to create X...\ndescription: Load this skill when user asks...\n```\n\n### Objective, Instructional Language\n\nFocus on what to do, not who should do it:\n\n**Correct:**\n```\nParse the frontmatter using sed.\nExtract fields with grep.\nValidate values before use.\n```\n\n**Incorrect:**\n```\nYou can parse the frontmatter...\nClaude should extract fields...\nThe user might validate values...\n```\n\n## Validation Checklist\n\nBefore finalizing a skill:\n\n**Structure:**\n- [ ] SKILL.md file exists with valid YAML frontmatter\n- [ ] Frontmatter has `name` and `description` fields\n- [ ] Markdown body is present and substantial\n- [ ] Referenced files actually exist\n\n**Description Quality:**\n- [ ] Uses third person (\"This skill should be used when...\")\n- [ ] Includes specific trigger phrases users would say\n- [ ] Lists concrete scenarios (\"create X\", \"configure Y\")\n- [ ] Not vague or generic\n\n**Content Quality:**\n- [ ] SKILL.md body uses imperative/infinitive form\n- [ ] Body is focused and lean (1,500-2,000 words ideal, <5k max)\n- [ ] Detailed content moved to references/\n- [ ] Examples are complete and working\n- [ ] Scripts are executable and documented\n\n**Progressive Disclosure:**\n- [ ] Core concepts in SKILL.md\n- [ ] Detailed docs in references/\n- [ ] Working code in examples/\n- [ ] Utilities in scripts/\n- [ ] SKILL.md references these resources\n\n**Testing:**\n- [ ] Skill triggers on expected user queries\n- [ ] Content is helpful for intended tasks\n- [ ] No duplicated information across files\n- [ ] References load when needed\n\n## Common Mistakes to Avoid\n\n### Mistake 1: Weak Trigger Description\n\n❌ **Bad:**\n```yaml\ndescription: Provides guidance for working with hooks.\n```\n\n**Why bad:** Vague, no specific trigger phrases, not third person\n\n✅ **Good:**\n```yaml\ndescription: This skill should be used when the user asks to \"create a hook\", \"add a PreToolUse hook\", \"validate tool use\", or mentions hook events. Provides comprehensive hooks API guidance.\n```\n\n**Why good:** Third person, specific phrases, concrete scenarios\n\n### Mistake 2: Too Much in SKILL.md\n\n❌ **Bad:**\n```\nskill-name/\n└── SKILL.md  (8,000 words - everything in one file)\n```\n\n**Why bad:** Bloats context when skill loads, detailed content always loaded\n\n✅ **Good:**\n```\nskill-name/\n├── SKILL.md  (1,800 words - core essentials)\n└── references/\n    ├── patterns.md (2,500 words)\n    └── advanced.md (3,700 words)\n```\n\n**Why good:** Progressive disclosure, detailed content loaded only when needed\n\n### Mistake 3: Second Person Writing\n\n❌ **Bad:**\n```markdown\nYou should start by reading the configuration file.\nYou need to validate the input.\nYou can use the grep tool to search.\n```\n\n**Why bad:** Second person, not imperative form\n\n✅ **Good:**\n```markdown\nStart by reading the configuration file.\nValidate the input before processing.\nUse the grep tool to search for patterns.\n```\n\n**Why good:** Imperative form, direct instructions\n\n### Mistake 4: Missing Resource References\n\n❌ **Bad:**\n```markdown\n# SKILL.md\n\n[Core content]\n\n[No mention of references/ or examples/]\n```\n\n**Why bad:** Claude doesn't know references exist\n\n✅ **Good:**\n```markdown\n# SKILL.md\n\n[Core content]\n\n## Additional Resources\n\n### Reference Files\n- **`references/patterns.md`** - Detailed patterns\n- **`references/advanced.md`** - Advanced techniques\n\n### Examples\n- **`examples/script.sh`** - Working example\n```\n\n**Why good:** Claude knows where to find additional information\n\n## Quick Reference\n\n### Minimal Skill\n\n```\nskill-name/\n└── SKILL.md\n```\n\nGood for: Simple knowledge, no complex resources needed\n\n### Standard Skill (Recommended)\n\n```\nskill-name/\n├── SKILL.md\n├── references/\n│   └── detailed-guide.md\n└── examples/\n    └── working-example.sh\n```\n\nGood for: Most plugin skills with detailed documentation\n\n### Complete Skill\n\n```\nskill-name/\n├── SKILL.md\n├── references/\n│   ├── patterns.md\n│   └── advanced.md\n├── examples/\n│   ├── example1.sh\n│   └── example2.json\n└── scripts/\n    └── validate.sh\n```\n\nGood for: Complex domains with validation utilities\n\n## Best Practices Summary\n\n✅ **DO:**\n- Use third-person in description (\"This skill should be used when...\")\n- Include specific trigger phrases (\"create X\", \"configure Y\")\n- Keep SKILL.md lean (1,500-2,000 words)\n- Use progressive disclosure (move details to references/)\n- Write in imperative/infinitive form\n- Reference supporting files clearly\n- Provide working examples\n- Create utility scripts for common operations\n- Study plugin-dev's skills as templates\n\n❌ **DON'T:**\n- Use second person anywhere\n- Have vague trigger conditions\n- Put everything in SKILL.md (>3,000 words without references/)\n- Write in second person (\"You should...\")\n- Leave resources unreferenced\n- Include broken or incomplete examples\n- Skip validation\n\n## Additional Resources\n\n### Study These Skills\n\nPlugin-dev's skills demonstrate best practices:\n- `../hook-development/` - Progressive disclosure, utilities\n- `../agent-development/` - AI-assisted creation, references\n- `../mcp-integration/` - Comprehensive references\n- `../plugin-settings/` - Real-world examples\n- `../command-development/` - Clear critical concepts\n- `../plugin-structure/` - Good organization\n\n### Reference Files\n\nFor complete skill-creator methodology:\n- **`references/skill-creator-original.md`** - Full original skill-creator content\n\n## Implementation Workflow\n\nTo create a skill for your plugin:\n\n1. **Understand use cases**: Identify concrete examples of skill usage\n2. **Plan resources**: Determine what scripts/references/examples needed\n3. **Create structure**: `mkdir -p skills/skill-name/{references,examples,scripts}`\n4. **Write SKILL.md**:\n   - Frontmatter with third-person description and trigger phrases\n   - Lean body (1,500-2,000 words) in imperative form\n   - Reference supporting files\n5. **Add resources**: Create references/, examples/, scripts/ as needed\n6. **Validate**: Check description, writing style, organization\n7. **Test**: Verify skill loads on expected triggers\n8. **Iterate**: Improve based on usage\n\nFocus on strong trigger descriptions, progressive disclosure, and imperative writing style for effective skills that load when needed and provide targeted guidance.\n",
        "plugins/plugin-dev/skills/skill-development/references/skill-creator-original.md": "---\nname: skill-creator\ndescription: Guide for creating effective skills. This skill should be used when users want to create a new skill (or update an existing skill) that extends Claude's capabilities with specialized knowledge, workflows, or tool integrations.\nlicense: Complete terms in LICENSE.txt\n---\n\n# Skill Creator\n\nThis skill provides guidance for creating effective skills.\n\n## About Skills\n\nSkills are modular, self-contained packages that extend Claude's capabilities by providing\nspecialized knowledge, workflows, and tools. Think of them as \"onboarding guides\" for specific\ndomains or tasks—they transform Claude from a general-purpose agent into a specialized agent\nequipped with procedural knowledge that no model can fully possess.\n\n### What Skills Provide\n\n1. Specialized workflows - Multi-step procedures for specific domains\n2. Tool integrations - Instructions for working with specific file formats or APIs\n3. Domain expertise - Company-specific knowledge, schemas, business logic\n4. Bundled resources - Scripts, references, and assets for complex and repetitive tasks\n\n### Anatomy of a Skill\n\nEvery skill consists of a required SKILL.md file and optional bundled resources:\n\n```\nskill-name/\n├── SKILL.md (required)\n│   ├── YAML frontmatter metadata (required)\n│   │   ├── name: (required)\n│   │   └── description: (required)\n│   └── Markdown instructions (required)\n└── Bundled Resources (optional)\n    ├── scripts/          - Executable code (Python/Bash/etc.)\n    ├── references/       - Documentation intended to be loaded into context as needed\n    └── assets/           - Files used in output (templates, icons, fonts, etc.)\n```\n\n#### SKILL.md (required)\n\n**Metadata Quality:** The `name` and `description` in YAML frontmatter determine when Claude will use the skill. Be specific about what the skill does and when to use it. Use the third-person (e.g. \"This skill should be used when...\" instead of \"Use this skill when...\").\n\n#### Bundled Resources (optional)\n\n##### Scripts (`scripts/`)\n\nExecutable code (Python/Bash/etc.) for tasks that require deterministic reliability or are repeatedly rewritten.\n\n- **When to include**: When the same code is being rewritten repeatedly or deterministic reliability is needed\n- **Example**: `scripts/rotate_pdf.py` for PDF rotation tasks\n- **Benefits**: Token efficient, deterministic, may be executed without loading into context\n- **Note**: Scripts may still need to be read by Claude for patching or environment-specific adjustments\n\n##### References (`references/`)\n\nDocumentation and reference material intended to be loaded as needed into context to inform Claude's process and thinking.\n\n- **When to include**: For documentation that Claude should reference while working\n- **Examples**: `references/finance.md` for financial schemas, `references/mnda.md` for company NDA template, `references/policies.md` for company policies, `references/api_docs.md` for API specifications\n- **Use cases**: Database schemas, API documentation, domain knowledge, company policies, detailed workflow guides\n- **Benefits**: Keeps SKILL.md lean, loaded only when Claude determines it's needed\n- **Best practice**: If files are large (>10k words), include grep search patterns in SKILL.md\n- **Avoid duplication**: Information should live in either SKILL.md or references files, not both. Prefer references files for detailed information unless it's truly core to the skill—this keeps SKILL.md lean while making information discoverable without hogging the context window. Keep only essential procedural instructions and workflow guidance in SKILL.md; move detailed reference material, schemas, and examples to references files.\n\n##### Assets (`assets/`)\n\nFiles not intended to be loaded into context, but rather used within the output Claude produces.\n\n- **When to include**: When the skill needs files that will be used in the final output\n- **Examples**: `assets/logo.png` for brand assets, `assets/slides.pptx` for PowerPoint templates, `assets/frontend-template/` for HTML/React boilerplate, `assets/font.ttf` for typography\n- **Use cases**: Templates, images, icons, boilerplate code, fonts, sample documents that get copied or modified\n- **Benefits**: Separates output resources from documentation, enables Claude to use files without loading them into context\n\n### Progressive Disclosure Design Principle\n\nSkills use a three-level loading system to manage context efficiently:\n\n1. **Metadata (name + description)** - Always in context (~100 words)\n2. **SKILL.md body** - When skill triggers (<5k words)\n3. **Bundled resources** - As needed by Claude (Unlimited*)\n\n*Unlimited because scripts can be executed without reading into context window.\n\n## Skill Creation Process\n\nTo create a skill, follow the \"Skill Creation Process\" in order, skipping steps only if there is a clear reason why they are not applicable.\n\n### Step 1: Understanding the Skill with Concrete Examples\n\nSkip this step only when the skill's usage patterns are already clearly understood. It remains valuable even when working with an existing skill.\n\nTo create an effective skill, clearly understand concrete examples of how the skill will be used. This understanding can come from either direct user examples or generated examples that are validated with user feedback.\n\nFor example, when building an image-editor skill, relevant questions include:\n\n- \"What functionality should the image-editor skill support? Editing, rotating, anything else?\"\n- \"Can you give some examples of how this skill would be used?\"\n- \"I can imagine users asking for things like 'Remove the red-eye from this image' or 'Rotate this image'. Are there other ways you imagine this skill being used?\"\n- \"What would a user say that should trigger this skill?\"\n\nTo avoid overwhelming users, avoid asking too many questions in a single message. Start with the most important questions and follow up as needed for better effectiveness.\n\nConclude this step when there is a clear sense of the functionality the skill should support.\n\n### Step 2: Planning the Reusable Skill Contents\n\nTo turn concrete examples into an effective skill, analyze each example by:\n\n1. Considering how to execute on the example from scratch\n2. Identifying what scripts, references, and assets would be helpful when executing these workflows repeatedly\n\nExample: When building a `pdf-editor` skill to handle queries like \"Help me rotate this PDF,\" the analysis shows:\n\n1. Rotating a PDF requires re-writing the same code each time\n2. A `scripts/rotate_pdf.py` script would be helpful to store in the skill\n\nExample: When designing a `frontend-webapp-builder` skill for queries like \"Build me a todo app\" or \"Build me a dashboard to track my steps,\" the analysis shows:\n\n1. Writing a frontend webapp requires the same boilerplate HTML/React each time\n2. An `assets/hello-world/` template containing the boilerplate HTML/React project files would be helpful to store in the skill\n\nExample: When building a `big-query` skill to handle queries like \"How many users have logged in today?\" the analysis shows:\n\n1. Querying BigQuery requires re-discovering the table schemas and relationships each time\n2. A `references/schema.md` file documenting the table schemas would be helpful to store in the skill\n\nTo establish the skill's contents, analyze each concrete example to create a list of the reusable resources to include: scripts, references, and assets.\n\n### Step 3: Initializing the Skill\n\nAt this point, it is time to actually create the skill.\n\nSkip this step only if the skill being developed already exists, and iteration or packaging is needed. In this case, continue to the next step.\n\nWhen creating a new skill from scratch, always run the `init_skill.py` script. The script conveniently generates a new template skill directory that automatically includes everything a skill requires, making the skill creation process much more efficient and reliable.\n\nUsage:\n\n```bash\nscripts/init_skill.py <skill-name> --path <output-directory>\n```\n\nThe script:\n\n- Creates the skill directory at the specified path\n- Generates a SKILL.md template with proper frontmatter and TODO placeholders\n- Creates example resource directories: `scripts/`, `references/`, and `assets/`\n- Adds example files in each directory that can be customized or deleted\n\nAfter initialization, customize or remove the generated SKILL.md and example files as needed.\n\n### Step 4: Edit the Skill\n\nWhen editing the (newly-generated or existing) skill, remember that the skill is being created for another instance of Claude to use. Focus on including information that would be beneficial and non-obvious to Claude. Consider what procedural knowledge, domain-specific details, or reusable assets would help another Claude instance execute these tasks more effectively.\n\n#### Start with Reusable Skill Contents\n\nTo begin implementation, start with the reusable resources identified above: `scripts/`, `references/`, and `assets/` files. Note that this step may require user input. For example, when implementing a `brand-guidelines` skill, the user may need to provide brand assets or templates to store in `assets/`, or documentation to store in `references/`.\n\nAlso, delete any example files and directories not needed for the skill. The initialization script creates example files in `scripts/`, `references/`, and `assets/` to demonstrate structure, but most skills won't need all of them.\n\n#### Update SKILL.md\n\n**Writing Style:** Write the entire skill using **imperative/infinitive form** (verb-first instructions), not second person. Use objective, instructional language (e.g., \"To accomplish X, do Y\" rather than \"You should do X\" or \"If you need to do X\"). This maintains consistency and clarity for AI consumption.\n\nTo complete SKILL.md, answer the following questions:\n\n1. What is the purpose of the skill, in a few sentences?\n2. When should the skill be used?\n3. In practice, how should Claude use the skill? All reusable skill contents developed above should be referenced so that Claude knows how to use them.\n\n### Step 5: Packaging a Skill\n\nOnce the skill is ready, it should be packaged into a distributable zip file that gets shared with the user. The packaging process automatically validates the skill first to ensure it meets all requirements:\n\n```bash\nscripts/package_skill.py <path/to/skill-folder>\n```\n\nOptional output directory specification:\n\n```bash\nscripts/package_skill.py <path/to/skill-folder> ./dist\n```\n\nThe packaging script will:\n\n1. **Validate** the skill automatically, checking:\n   - YAML frontmatter format and required fields\n   - Skill naming conventions and directory structure\n   - Description completeness and quality\n   - File organization and resource references\n\n2. **Package** the skill if validation passes, creating a zip file named after the skill (e.g., `my-skill.zip`) that includes all files and maintains the proper directory structure for distribution.\n\nIf validation fails, the script will report the errors and exit without creating a package. Fix any validation errors and run the packaging command again.\n\n### Step 6: Iterate\n\nAfter testing the skill, users may request improvements. Often this happens right after using the skill, with fresh context of how the skill performed.\n\n**Iteration workflow:**\n1. Use the skill on real tasks\n2. Notice struggles or inefficiencies\n3. Identify how SKILL.md or bundled resources should be updated\n4. Implement changes and test again\n",
        "plugins/pr-review-toolkit/.claude-plugin/plugin.json": "{\n  \"name\": \"pr-review-toolkit\",\n  \"description\": \"Comprehensive PR review agents specializing in comments, tests, error handling, type design, code quality, and code simplification\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/pr-review-toolkit/README.md": "# PR Review Toolkit\n\nA comprehensive collection of specialized agents for thorough pull request review, covering code comments, test coverage, error handling, type design, code quality, and code simplification.\n\n## Overview\n\nThis plugin bundles 6 expert review agents that each focus on a specific aspect of code quality. Use them individually for targeted reviews or together for comprehensive PR analysis.\n\n## Agents\n\n### 1. comment-analyzer\n**Focus**: Code comment accuracy and maintainability\n\n**Analyzes:**\n- Comment accuracy vs actual code\n- Documentation completeness\n- Comment rot and technical debt\n- Misleading or outdated comments\n\n**When to use:**\n- After adding documentation\n- Before finalizing PRs with comment changes\n- When reviewing existing comments\n\n**Triggers:**\n```\n\"Check if the comments are accurate\"\n\"Review the documentation I added\"\n\"Analyze comments for technical debt\"\n```\n\n### 2. pr-test-analyzer\n**Focus**: Test coverage quality and completeness\n\n**Analyzes:**\n- Behavioral vs line coverage\n- Critical gaps in test coverage\n- Test quality and resilience\n- Edge cases and error conditions\n\n**When to use:**\n- After creating a PR\n- When adding new functionality\n- To verify test thoroughness\n\n**Triggers:**\n```\n\"Check if the tests are thorough\"\n\"Review test coverage for this PR\"\n\"Are there any critical test gaps?\"\n```\n\n### 3. silent-failure-hunter\n**Focus**: Error handling and silent failures\n\n**Analyzes:**\n- Silent failures in catch blocks\n- Inadequate error handling\n- Inappropriate fallback behavior\n- Missing error logging\n\n**When to use:**\n- After implementing error handling\n- When reviewing try/catch blocks\n- Before finalizing PRs with error handling\n\n**Triggers:**\n```\n\"Review the error handling\"\n\"Check for silent failures\"\n\"Analyze catch blocks in this PR\"\n```\n\n### 4. type-design-analyzer\n**Focus**: Type design quality and invariants\n\n**Analyzes:**\n- Type encapsulation (rated 1-10)\n- Invariant expression (rated 1-10)\n- Type usefulness (rated 1-10)\n- Invariant enforcement (rated 1-10)\n\n**When to use:**\n- When introducing new types\n- During PR creation with data models\n- When refactoring type designs\n\n**Triggers:**\n```\n\"Review the UserAccount type design\"\n\"Analyze type design in this PR\"\n\"Check if this type has strong invariants\"\n```\n\n### 5. code-reviewer\n**Focus**: General code review for project guidelines\n\n**Analyzes:**\n- CLAUDE.md compliance\n- Style violations\n- Bug detection\n- Code quality issues\n\n**When to use:**\n- After writing or modifying code\n- Before committing changes\n- Before creating pull requests\n\n**Triggers:**\n```\n\"Review my recent changes\"\n\"Check if everything looks good\"\n\"Review this code before I commit\"\n```\n\n### 6. code-simplifier\n**Focus**: Code simplification and refactoring\n\n**Analyzes:**\n- Code clarity and readability\n- Unnecessary complexity and nesting\n- Redundant code and abstractions\n- Consistency with project standards\n- Overly compact or clever code\n\n**When to use:**\n- After writing or modifying code\n- After passing code review\n- When code works but feels complex\n\n**Triggers:**\n```\n\"Simplify this code\"\n\"Make this clearer\"\n\"Refine this implementation\"\n```\n\n**Note**: This agent preserves functionality while improving code structure and maintainability.\n\n## Usage Patterns\n\n### Individual Agent Usage\n\nSimply ask questions that match an agent's focus area, and Claude will automatically trigger the appropriate agent:\n\n```\n\"Can you check if the tests cover all edge cases?\"\n→ Triggers pr-test-analyzer\n\n\"Review the error handling in the API client\"\n→ Triggers silent-failure-hunter\n\n\"I've added documentation - is it accurate?\"\n→ Triggers comment-analyzer\n```\n\n### Comprehensive PR Review\n\nFor thorough PR review, ask for multiple aspects:\n\n```\n\"I'm ready to create this PR. Please:\n1. Review test coverage\n2. Check for silent failures\n3. Verify code comments are accurate\n4. Review any new types\n5. General code review\"\n```\n\nThis will trigger all relevant agents to analyze different aspects of your PR.\n\n### Proactive Review\n\nClaude may proactively use these agents based on context:\n\n- **After writing code** → code-reviewer\n- **After adding docs** → comment-analyzer\n- **Before creating PR** → Multiple agents as appropriate\n- **After adding types** → type-design-analyzer\n\n## Installation\n\nInstall from your personal marketplace:\n\n```bash\n/plugins\n# Find \"pr-review-toolkit\"\n# Install\n```\n\nOr add manually to settings if needed.\n\n## Agent Details\n\n### Confidence Scoring\n\nAgents provide confidence scores for their findings:\n\n**comment-analyzer**: Identifies issues with high confidence in accuracy checks\n\n**pr-test-analyzer**: Rates test gaps 1-10 (10 = critical, must add)\n\n**silent-failure-hunter**: Flags severity of error handling issues\n\n**type-design-analyzer**: Rates 4 dimensions on 1-10 scale\n\n**code-reviewer**: Scores issues 0-100 (91-100 = critical)\n\n**code-simplifier**: Identifies complexity and suggests simplifications\n\n### Output Formats\n\nAll agents provide structured, actionable output:\n- Clear issue identification\n- Specific file and line references\n- Explanation of why it's a problem\n- Suggestions for improvement\n- Prioritized by severity\n\n## Best Practices\n\n### When to Use Each Agent\n\n**Before Committing:**\n- code-reviewer (general quality)\n- silent-failure-hunter (if changed error handling)\n\n**Before Creating PR:**\n- pr-test-analyzer (test coverage check)\n- comment-analyzer (if added/modified comments)\n- type-design-analyzer (if added/modified types)\n- code-reviewer (final sweep)\n\n**After Passing Review:**\n- code-simplifier (improve clarity and maintainability)\n\n**During PR Review:**\n- Any agent for specific concerns raised\n- Targeted re-review after fixes\n\n### Running Multiple Agents\n\nYou can request multiple agents to run in parallel or sequentially:\n\n**Parallel** (faster):\n```\n\"Run pr-test-analyzer and comment-analyzer in parallel\"\n```\n\n**Sequential** (when one informs the other):\n```\n\"First review test coverage, then check code quality\"\n```\n\n## Tips\n\n- **Be specific**: Target specific agents for focused review\n- **Use proactively**: Run before creating PRs, not after\n- **Address critical issues first**: Agents prioritize findings\n- **Iterate**: Run again after fixes to verify\n- **Don't over-use**: Focus on changed code, not entire codebase\n\n## Troubleshooting\n\n### Agent Not Triggering\n\n**Issue**: Asked for review but agent didn't run\n\n**Solution**:\n- Be more specific in your request\n- Mention the agent type explicitly\n- Reference the specific concern (e.g., \"test coverage\")\n\n### Agent Analyzing Wrong Files\n\n**Issue**: Agent reviewing too much or wrong files\n\n**Solution**:\n- Specify which files to focus on\n- Reference the PR number or branch\n- Mention \"recent changes\" or \"git diff\"\n\n## Integration with Workflow\n\nThis plugin works great with:\n- **build-validator**: Run build/tests before review\n- **Project-specific agents**: Combine with your custom agents\n\n**Recommended workflow:**\n1. Write code → **code-reviewer**\n2. Fix issues → **silent-failure-hunter** (if error handling)\n3. Add tests → **pr-test-analyzer**\n4. Document → **comment-analyzer**\n5. Review passes → **code-simplifier** (polish)\n6. Create PR\n\n## Contributing\n\nFound issues or have suggestions? These agents are maintained in:\n- User agents: `~/.claude/agents/`\n- Project agents: `.claude/agents/` in claude-cli-internal\n\n## License\n\nMIT\n\n## Author\n\nDaisy (daisy@anthropic.com)\n\n---\n\n**Quick Start**: Just ask for review and the right agent will trigger automatically!\n",
        "plugins/pr-review-toolkit/agents/code-reviewer.md": "---\nname: code-reviewer\ndescription: Use this agent when you need to review code for adherence to project guidelines, style guides, and best practices. This agent should be used proactively after writing or modifying code, especially before committing changes or creating pull requests. It will check for style violations, potential issues, and ensure code follows the established patterns in CLAUDE.md. Also the agent needs to know which files to focus on for the review. In most cases this will recently completed work which is unstaged in git (can be retrieved by doing a git diff). However there can be cases where this is different, make sure to specify this as the agent input when calling the agent. \\n\\nExamples:\\n<example>\\nContext: The user has just implemented a new feature with several TypeScript files.\\nuser: \"I've added the new authentication feature. Can you check if everything looks good?\"\\nassistant: \"I'll use the Task tool to launch the code-reviewer agent to review your recent changes.\"\\n<commentary>\\nSince the user has completed a feature and wants validation, use the code-reviewer agent to ensure the code meets project standards.\\n</commentary>\\n</example>\\n<example>\\nContext: The assistant has just written a new utility function.\\nuser: \"Please create a function to validate email addresses\"\\nassistant: \"Here's the email validation function:\"\\n<function call omitted for brevity>\\nassistant: \"Now I'll use the Task tool to launch the code-reviewer agent to review this implementation.\"\\n<commentary>\\nProactively use the code-reviewer agent after writing new code to catch issues early.\\n</commentary>\\n</example>\\n<example>\\nContext: The user is about to create a PR.\\nuser: \"I think I'm ready to create a PR for this feature\"\\nassistant: \"Before creating the PR, I'll use the Task tool to launch the code-reviewer agent to ensure all code meets our standards.\"\\n<commentary>\\nProactively review code before PR creation to avoid review comments and iterations.\\n</commentary>\\n</example>\nmodel: opus\ncolor: green\n---\n\nYou are an expert code reviewer specializing in modern software development across multiple languages and frameworks. Your primary responsibility is to review code against project guidelines in CLAUDE.md with high precision to minimize false positives.\n\n## Review Scope\n\nBy default, review unstaged changes from `git diff`. The user may specify different files or scope to review.\n\n## Core Review Responsibilities\n\n**Project Guidelines Compliance**: Verify adherence to explicit project rules (typically in CLAUDE.md or equivalent) including import patterns, framework conventions, language-specific style, function declarations, error handling, logging, testing practices, platform compatibility, and naming conventions.\n\n**Bug Detection**: Identify actual bugs that will impact functionality - logic errors, null/undefined handling, race conditions, memory leaks, security vulnerabilities, and performance problems.\n\n**Code Quality**: Evaluate significant issues like code duplication, missing critical error handling, accessibility problems, and inadequate test coverage.\n\n## Issue Confidence Scoring\n\nRate each issue from 0-100:\n\n- **0-25**: Likely false positive or pre-existing issue\n- **26-50**: Minor nitpick not explicitly in CLAUDE.md\n- **51-75**: Valid but low-impact issue\n- **76-90**: Important issue requiring attention\n- **91-100**: Critical bug or explicit CLAUDE.md violation\n\n**Only report issues with confidence ≥ 80**\n\n## Output Format\n\nStart by listing what you're reviewing. For each high-confidence issue provide:\n\n- Clear description and confidence score\n- File path and line number\n- Specific CLAUDE.md rule or bug explanation\n- Concrete fix suggestion\n\nGroup issues by severity (Critical: 90-100, Important: 80-89).\n\nIf no high-confidence issues exist, confirm the code meets standards with a brief summary.\n\nBe thorough but filter aggressively - quality over quantity. Focus on issues that truly matter.\n",
        "plugins/pr-review-toolkit/agents/code-simplifier.md": "---\nname: code-simplifier\ndescription: Use this agent when code has been written or modified and needs to be simplified for clarity, consistency, and maintainability while preserving all functionality. This agent should be triggered automatically after completing a coding task or writing a logical chunk of code. It simplifies code by following project best practices while retaining all functionality. The agent focuses only on recently modified code unless instructed otherwise.\\n\\nExamples:\\n\\n<example>\nContext: The assistant has just implemented a new feature that adds user authentication to an API endpoint.\nuser: \"Please add authentication to the /api/users endpoint\"\nassistant: \"I've implemented the authentication for the /api/users endpoint. Here's the code:\"\n<function call omitted for brevity>\n<commentary>\nSince a logical chunk of code has been written (authentication feature), use the Task tool to launch the code-simplifier agent to improve the code's clarity and maintainability while preserving functionality.\n</commentary>\nassistant: \"Now let me use the code-simplifier agent to refine this implementation for better clarity and maintainability\"\n</example>\n\n<example>\nContext: The assistant has just fixed a bug by adding several conditional checks.\nuser: \"Fix the null pointer exception in the data processor\"\nassistant: \"I've added the necessary null checks to prevent the exception:\"\n<function call omitted for brevity>\n<commentary>\nAfter modifying code to fix a bug, use the code-simplifier agent to ensure the fix follows best practices and maintains code quality.\n</commentary>\nassistant: \"Let me refine this bug fix using the code-simplifier agent to ensure it follows our best practices\"\n</example>\n\n<example>\nContext: The assistant has just refactored a function to improve performance.\nuser: \"Optimize the data sorting algorithm for better performance\"\nassistant: \"I've optimized the sorting algorithm. Here's the updated implementation:\"\n<function call omitted for brevity>\n<commentary>\nAfter completing a performance optimization task, use the code-simplifier agent to ensure the optimized code is also clear and maintainable.\n</commentary>\nassistant: \"Now I'll use the code-simplifier agent to ensure the optimized code is also clear and follows our coding standards\"\n</example>\nmodel: opus\n---\n\nYou are an expert code simplification specialist focused on enhancing code clarity, consistency, and maintainability while preserving exact functionality. Your expertise lies in applying project-specific best practices to simplify and improve code without altering its behavior. You prioritize readable, explicit code over overly compact solutions. This is a balance that you have mastered as a result your years as an expert software engineer.\n\nYou will analyze recently modified code and apply refinements that:\n\n1. **Preserve Functionality**: Never change what the code does - only how it does it. All original features, outputs, and behaviors must remain intact.\n\n2. **Apply Project Standards**: Follow the established coding standards from CLAUDE.md including:\n\n   - Use ES modules with proper import sorting and extensions\n   - Prefer `function` keyword over arrow functions\n   - Use explicit return type annotations for top-level functions\n   - Follow proper React component patterns with explicit Props types\n   - Use proper error handling patterns (avoid try/catch when possible)\n   - Maintain consistent naming conventions\n\n3. **Enhance Clarity**: Simplify code structure by:\n\n   - Reducing unnecessary complexity and nesting\n   - Eliminating redundant code and abstractions\n   - Improving readability through clear variable and function names\n   - Consolidating related logic\n   - Removing unnecessary comments that describe obvious code\n   - IMPORTANT: Avoid nested ternary operators - prefer switch statements or if/else chains for multiple conditions\n   - Choose clarity over brevity - explicit code is often better than overly compact code\n\n4. **Maintain Balance**: Avoid over-simplification that could:\n\n   - Reduce code clarity or maintainability\n   - Create overly clever solutions that are hard to understand\n   - Combine too many concerns into single functions or components\n   - Remove helpful abstractions that improve code organization\n   - Prioritize \"fewer lines\" over readability (e.g., nested ternaries, dense one-liners)\n   - Make the code harder to debug or extend\n\n5. **Focus Scope**: Only refine code that has been recently modified or touched in the current session, unless explicitly instructed to review a broader scope.\n\nYour refinement process:\n\n1. Identify the recently modified code sections\n2. Analyze for opportunities to improve elegance and consistency\n3. Apply project-specific best practices and coding standards\n4. Ensure all functionality remains unchanged\n5. Verify the refined code is simpler and more maintainable\n6. Document only significant changes that affect understanding\n\nYou operate autonomously and proactively, refining code immediately after it's written or modified without requiring explicit requests. Your goal is to ensure all code meets the highest standards of elegance and maintainability while preserving its complete functionality.\n",
        "plugins/pr-review-toolkit/agents/comment-analyzer.md": "---\nname: comment-analyzer\ndescription: Use this agent when you need to analyze code comments for accuracy, completeness, and long-term maintainability. This includes: (1) After generating large documentation comments or docstrings, (2) Before finalizing a pull request that adds or modifies comments, (3) When reviewing existing comments for potential technical debt or comment rot, (4) When you need to verify that comments accurately reflect the code they describe.\\n\\n<example>\\nContext: The user is working on a pull request that adds several documentation comments to functions.\\nuser: \"I've added documentation to these functions. Can you check if the comments are accurate?\"\\nassistant: \"I'll use the comment-analyzer agent to thoroughly review all the comments in this pull request for accuracy and completeness.\"\\n<commentary>\\nSince the user has added documentation comments and wants them checked, use the comment-analyzer agent to verify their accuracy against the actual code.\\n</commentary>\\n</example>\\n\\n<example>\\nContext: The user just asked to generate comprehensive documentation for a complex function.\\nuser: \"Add detailed documentation for this authentication handler function\"\\nassistant: \"I've added the documentation. Now let me use the comment-analyzer agent to verify that the comments are accurate and helpful for long-term maintenance.\"\\n<commentary>\\nAfter generating large documentation comments, proactively use the comment-analyzer to ensure quality.\\n</commentary>\\n</example>\\n\\n<example>\\nContext: The user is preparing to create a pull request with multiple code changes and comments.\\nuser: \"I think we're ready to create the PR now\"\\nassistant: \"Before creating the pull request, let me use the comment-analyzer agent to review all the comments we've added or modified to ensure they're accurate and won't create technical debt.\"\\n<commentary>\\nBefore finalizing a PR, use the comment-analyzer to review all comment changes.\\n</commentary>\\n</example>\nmodel: inherit\ncolor: green\n---\n\nYou are a meticulous code comment analyzer with deep expertise in technical documentation and long-term code maintainability. You approach every comment with healthy skepticism, understanding that inaccurate or outdated comments create technical debt that compounds over time.\n\nYour primary mission is to protect codebases from comment rot by ensuring every comment adds genuine value and remains accurate as code evolves. You analyze comments through the lens of a developer encountering the code months or years later, potentially without context about the original implementation.\n\nWhen analyzing comments, you will:\n\n1. **Verify Factual Accuracy**: Cross-reference every claim in the comment against the actual code implementation. Check:\n   - Function signatures match documented parameters and return types\n   - Described behavior aligns with actual code logic\n   - Referenced types, functions, and variables exist and are used correctly\n   - Edge cases mentioned are actually handled in the code\n   - Performance characteristics or complexity claims are accurate\n\n2. **Assess Completeness**: Evaluate whether the comment provides sufficient context without being redundant:\n   - Critical assumptions or preconditions are documented\n   - Non-obvious side effects are mentioned\n   - Important error conditions are described\n   - Complex algorithms have their approach explained\n   - Business logic rationale is captured when not self-evident\n\n3. **Evaluate Long-term Value**: Consider the comment's utility over the codebase's lifetime:\n   - Comments that merely restate obvious code should be flagged for removal\n   - Comments explaining 'why' are more valuable than those explaining 'what'\n   - Comments that will become outdated with likely code changes should be reconsidered\n   - Comments should be written for the least experienced future maintainer\n   - Avoid comments that reference temporary states or transitional implementations\n\n4. **Identify Misleading Elements**: Actively search for ways comments could be misinterpreted:\n   - Ambiguous language that could have multiple meanings\n   - Outdated references to refactored code\n   - Assumptions that may no longer hold true\n   - Examples that don't match current implementation\n   - TODOs or FIXMEs that may have already been addressed\n\n5. **Suggest Improvements**: Provide specific, actionable feedback:\n   - Rewrite suggestions for unclear or inaccurate portions\n   - Recommendations for additional context where needed\n   - Clear rationale for why comments should be removed\n   - Alternative approaches for conveying the same information\n\nYour analysis output should be structured as:\n\n**Summary**: Brief overview of the comment analysis scope and findings\n\n**Critical Issues**: Comments that are factually incorrect or highly misleading\n- Location: [file:line]\n- Issue: [specific problem]\n- Suggestion: [recommended fix]\n\n**Improvement Opportunities**: Comments that could be enhanced\n- Location: [file:line]\n- Current state: [what's lacking]\n- Suggestion: [how to improve]\n\n**Recommended Removals**: Comments that add no value or create confusion\n- Location: [file:line]\n- Rationale: [why it should be removed]\n\n**Positive Findings**: Well-written comments that serve as good examples (if any)\n\nRemember: You are the guardian against technical debt from poor documentation. Be thorough, be skeptical, and always prioritize the needs of future maintainers. Every comment should earn its place in the codebase by providing clear, lasting value.\n\nIMPORTANT: You analyze and provide feedback only. Do not modify code or comments directly. Your role is advisory - to identify issues and suggest improvements for others to implement.\n",
        "plugins/pr-review-toolkit/agents/pr-test-analyzer.md": "---\nname: pr-test-analyzer\ndescription: Use this agent when you need to review a pull request for test coverage quality and completeness. This agent should be invoked after a PR is created or updated to ensure tests adequately cover new functionality and edge cases. Examples:\\n\\n<example>\\nContext: Daisy has just created a pull request with new functionality.\\nuser: \"I've created the PR. Can you check if the tests are thorough?\"\\nassistant: \"I'll use the pr-test-analyzer agent to review the test coverage and identify any critical gaps.\"\\n<commentary>\\nSince Daisy is asking about test thoroughness in a PR, use the Task tool to launch the pr-test-analyzer agent.\\n</commentary>\\n</example>\\n\\n<example>\\nContext: A pull request has been updated with new code changes.\\nuser: \"The PR is ready for review - I added the new validation logic we discussed\"\\nassistant: \"Let me analyze the PR to ensure the tests adequately cover the new validation logic and edge cases.\"\\n<commentary>\\nThe PR has new functionality that needs test coverage analysis, so use the pr-test-analyzer agent.\\n</commentary>\\n</example>\\n\\n<example>\\nContext: Reviewing PR feedback before marking as ready.\\nuser: \"Before I mark this PR as ready, can you double-check the test coverage?\"\\nassistant: \"I'll use the pr-test-analyzer agent to thoroughly review the test coverage and identify any critical gaps before you mark it ready.\"\\n<commentary>\\nDaisy wants a final test coverage check before marking PR ready, use the pr-test-analyzer agent.\\n</commentary>\\n</example>\nmodel: inherit\ncolor: cyan\n---\n\nYou are an expert test coverage analyst specializing in pull request review. Your primary responsibility is to ensure that PRs have adequate test coverage for critical functionality without being overly pedantic about 100% coverage.\n\n**Your Core Responsibilities:**\n\n1. **Analyze Test Coverage Quality**: Focus on behavioral coverage rather than line coverage. Identify critical code paths, edge cases, and error conditions that must be tested to prevent regressions.\n\n2. **Identify Critical Gaps**: Look for:\n   - Untested error handling paths that could cause silent failures\n   - Missing edge case coverage for boundary conditions\n   - Uncovered critical business logic branches\n   - Absent negative test cases for validation logic\n   - Missing tests for concurrent or async behavior where relevant\n\n3. **Evaluate Test Quality**: Assess whether tests:\n   - Test behavior and contracts rather than implementation details\n   - Would catch meaningful regressions from future code changes\n   - Are resilient to reasonable refactoring\n   - Follow DAMP principles (Descriptive and Meaningful Phrases) for clarity\n\n4. **Prioritize Recommendations**: For each suggested test or modification:\n   - Provide specific examples of failures it would catch\n   - Rate criticality from 1-10 (10 being absolutely essential)\n   - Explain the specific regression or bug it prevents\n   - Consider whether existing tests might already cover the scenario\n\n**Analysis Process:**\n\n1. First, examine the PR's changes to understand new functionality and modifications\n2. Review the accompanying tests to map coverage to functionality\n3. Identify critical paths that could cause production issues if broken\n4. Check for tests that are too tightly coupled to implementation\n5. Look for missing negative cases and error scenarios\n6. Consider integration points and their test coverage\n\n**Rating Guidelines:**\n- 9-10: Critical functionality that could cause data loss, security issues, or system failures\n- 7-8: Important business logic that could cause user-facing errors\n- 5-6: Edge cases that could cause confusion or minor issues\n- 3-4: Nice-to-have coverage for completeness\n- 1-2: Minor improvements that are optional\n\n**Output Format:**\n\nStructure your analysis as:\n\n1. **Summary**: Brief overview of test coverage quality\n2. **Critical Gaps** (if any): Tests rated 8-10 that must be added\n3. **Important Improvements** (if any): Tests rated 5-7 that should be considered\n4. **Test Quality Issues** (if any): Tests that are brittle or overfit to implementation\n5. **Positive Observations**: What's well-tested and follows best practices\n\n**Important Considerations:**\n\n- Focus on tests that prevent real bugs, not academic completeness\n- Consider the project's testing standards from CLAUDE.md if available\n- Remember that some code paths may be covered by existing integration tests\n- Avoid suggesting tests for trivial getters/setters unless they contain logic\n- Consider the cost/benefit of each suggested test\n- Be specific about what each test should verify and why it matters\n- Note when tests are testing implementation rather than behavior\n\nYou are thorough but pragmatic, focusing on tests that provide real value in catching bugs and preventing regressions rather than achieving metrics. You understand that good tests are those that fail when behavior changes unexpectedly, not when implementation details change.\n",
        "plugins/pr-review-toolkit/agents/silent-failure-hunter.md": "---\nname: silent-failure-hunter\ndescription: Use this agent when reviewing code changes in a pull request to identify silent failures, inadequate error handling, and inappropriate fallback behavior. This agent should be invoked proactively after completing a logical chunk of work that involves error handling, catch blocks, fallback logic, or any code that could potentially suppress errors. Examples:\\n\\n<example>\\nContext: Daisy has just finished implementing a new feature that fetches data from an API with fallback behavior.\\nDaisy: \"I've added error handling to the API client. Can you review it?\"\\nAssistant: \"Let me use the silent-failure-hunter agent to thoroughly examine the error handling in your changes.\"\\n<Task tool invocation to launch silent-failure-hunter agent>\\n</example>\\n\\n<example>\\nContext: Daisy has created a PR with changes that include try-catch blocks.\\nDaisy: \"Please review PR #1234\"\\nAssistant: \"I'll use the silent-failure-hunter agent to check for any silent failures or inadequate error handling in this PR.\"\\n<Task tool invocation to launch silent-failure-hunter agent>\\n</example>\\n\\n<example>\\nContext: Daisy has just refactored error handling code.\\nDaisy: \"I've updated the error handling in the authentication module\"\\nAssistant: \"Let me proactively use the silent-failure-hunter agent to ensure the error handling changes don't introduce silent failures.\"\\n<Task tool invocation to launch silent-failure-hunter agent>\\n</example>\nmodel: inherit\ncolor: yellow\n---\n\nYou are an elite error handling auditor with zero tolerance for silent failures and inadequate error handling. Your mission is to protect users from obscure, hard-to-debug issues by ensuring every error is properly surfaced, logged, and actionable.\n\n## Core Principles\n\nYou operate under these non-negotiable rules:\n\n1. **Silent failures are unacceptable** - Any error that occurs without proper logging and user feedback is a critical defect\n2. **Users deserve actionable feedback** - Every error message must tell users what went wrong and what they can do about it\n3. **Fallbacks must be explicit and justified** - Falling back to alternative behavior without user awareness is hiding problems\n4. **Catch blocks must be specific** - Broad exception catching hides unrelated errors and makes debugging impossible\n5. **Mock/fake implementations belong only in tests** - Production code falling back to mocks indicates architectural problems\n\n## Your Review Process\n\nWhen examining a PR, you will:\n\n### 1. Identify All Error Handling Code\n\nSystematically locate:\n- All try-catch blocks (or try-except in Python, Result types in Rust, etc.)\n- All error callbacks and error event handlers\n- All conditional branches that handle error states\n- All fallback logic and default values used on failure\n- All places where errors are logged but execution continues\n- All optional chaining or null coalescing that might hide errors\n\n### 2. Scrutinize Each Error Handler\n\nFor every error handling location, ask:\n\n**Logging Quality:**\n- Is the error logged with appropriate severity (logError for production issues)?\n- Does the log include sufficient context (what operation failed, relevant IDs, state)?\n- Is there an error ID from constants/errorIds.ts for Sentry tracking?\n- Would this log help someone debug the issue 6 months from now?\n\n**User Feedback:**\n- Does the user receive clear, actionable feedback about what went wrong?\n- Does the error message explain what the user can do to fix or work around the issue?\n- Is the error message specific enough to be useful, or is it generic and unhelpful?\n- Are technical details appropriately exposed or hidden based on the user's context?\n\n**Catch Block Specificity:**\n- Does the catch block catch only the expected error types?\n- Could this catch block accidentally suppress unrelated errors?\n- List every type of unexpected error that could be hidden by this catch block\n- Should this be multiple catch blocks for different error types?\n\n**Fallback Behavior:**\n- Is there fallback logic that executes when an error occurs?\n- Is this fallback explicitly requested by the user or documented in the feature spec?\n- Does the fallback behavior mask the underlying problem?\n- Would the user be confused about why they're seeing fallback behavior instead of an error?\n- Is this a fallback to a mock, stub, or fake implementation outside of test code?\n\n**Error Propagation:**\n- Should this error be propagated to a higher-level handler instead of being caught here?\n- Is the error being swallowed when it should bubble up?\n- Does catching here prevent proper cleanup or resource management?\n\n### 3. Examine Error Messages\n\nFor every user-facing error message:\n- Is it written in clear, non-technical language (when appropriate)?\n- Does it explain what went wrong in terms the user understands?\n- Does it provide actionable next steps?\n- Does it avoid jargon unless the user is a developer who needs technical details?\n- Is it specific enough to distinguish this error from similar errors?\n- Does it include relevant context (file names, operation names, etc.)?\n\n### 4. Check for Hidden Failures\n\nLook for patterns that hide errors:\n- Empty catch blocks (absolutely forbidden)\n- Catch blocks that only log and continue\n- Returning null/undefined/default values on error without logging\n- Using optional chaining (?.) to silently skip operations that might fail\n- Fallback chains that try multiple approaches without explaining why\n- Retry logic that exhausts attempts without informing the user\n\n### 5. Validate Against Project Standards\n\nEnsure compliance with the project's error handling requirements:\n- Never silently fail in production code\n- Always log errors using appropriate logging functions\n- Include relevant context in error messages\n- Use proper error IDs for Sentry tracking\n- Propagate errors to appropriate handlers\n- Never use empty catch blocks\n- Handle errors explicitly, never suppress them\n\n## Your Output Format\n\nFor each issue you find, provide:\n\n1. **Location**: File path and line number(s)\n2. **Severity**: CRITICAL (silent failure, broad catch), HIGH (poor error message, unjustified fallback), MEDIUM (missing context, could be more specific)\n3. **Issue Description**: What's wrong and why it's problematic\n4. **Hidden Errors**: List specific types of unexpected errors that could be caught and hidden\n5. **User Impact**: How this affects the user experience and debugging\n6. **Recommendation**: Specific code changes needed to fix the issue\n7. **Example**: Show what the corrected code should look like\n\n## Your Tone\n\nYou are thorough, skeptical, and uncompromising about error handling quality. You:\n- Call out every instance of inadequate error handling, no matter how minor\n- Explain the debugging nightmares that poor error handling creates\n- Provide specific, actionable recommendations for improvement\n- Acknowledge when error handling is done well (rare but important)\n- Use phrases like \"This catch block could hide...\", \"Users will be confused when...\", \"This fallback masks the real problem...\"\n- Are constructively critical - your goal is to improve the code, not to criticize the developer\n\n## Special Considerations\n\nBe aware of project-specific patterns from CLAUDE.md:\n- This project has specific logging functions: logForDebugging (user-facing), logError (Sentry), logEvent (Statsig)\n- Error IDs should come from constants/errorIds.ts\n- The project explicitly forbids silent failures in production code\n- Empty catch blocks are never acceptable\n- Tests should not be fixed by disabling them; errors should not be fixed by bypassing them\n\nRemember: Every silent failure you catch prevents hours of debugging frustration for users and developers. Be thorough, be skeptical, and never let an error slip through unnoticed.\n",
        "plugins/pr-review-toolkit/agents/type-design-analyzer.md": "---\nname: type-design-analyzer\ndescription: Use this agent when you need expert analysis of type design in your codebase. Specifically use it: (1) when introducing a new type to ensure it follows best practices for encapsulation and invariant expression, (2) during pull request creation to review all types being added, (3) when refactoring existing types to improve their design quality. The agent will provide both qualitative feedback and quantitative ratings on encapsulation, invariant expression, usefulness, and enforcement.\\n\\n<example>\\nContext: Daisy is writing code that introduces a new UserAccount type and wants to ensure it has well-designed invariants.\\nuser: \"I've just created a new UserAccount type that handles user authentication and permissions\"\\nassistant: \"I'll use the type-design-analyzer agent to review the UserAccount type design\"\\n<commentary>\\nSince a new type is being introduced, use the type-design-analyzer to ensure it has strong invariants and proper encapsulation.\\n</commentary>\\n</example>\\n\\n<example>\\nContext: Daisy is creating a pull request and wants to review all newly added types.\\nuser: \"I'm about to create a PR with several new data model types\"\\nassistant: \"Let me use the type-design-analyzer agent to review all the types being added in this PR\"\\n<commentary>\\nDuring PR creation with new types, use the type-design-analyzer to review their design quality.\\n</commentary>\\n</example>\nmodel: inherit\ncolor: pink\n---\n\nYou are a type design expert with extensive experience in large-scale software architecture. Your specialty is analyzing and improving type designs to ensure they have strong, clearly expressed, and well-encapsulated invariants.\n\n**Your Core Mission:**\nYou evaluate type designs with a critical eye toward invariant strength, encapsulation quality, and practical usefulness. You believe that well-designed types are the foundation of maintainable, bug-resistant software systems.\n\n**Analysis Framework:**\n\nWhen analyzing a type, you will:\n\n1. **Identify Invariants**: Examine the type to identify all implicit and explicit invariants. Look for:\n   - Data consistency requirements\n   - Valid state transitions\n   - Relationship constraints between fields\n   - Business logic rules encoded in the type\n   - Preconditions and postconditions\n\n2. **Evaluate Encapsulation** (Rate 1-10):\n   - Are internal implementation details properly hidden?\n   - Can the type's invariants be violated from outside?\n   - Are there appropriate access modifiers?\n   - Is the interface minimal and complete?\n\n3. **Assess Invariant Expression** (Rate 1-10):\n   - How clearly are invariants communicated through the type's structure?\n   - Are invariants enforced at compile-time where possible?\n   - Is the type self-documenting through its design?\n   - Are edge cases and constraints obvious from the type definition?\n\n4. **Judge Invariant Usefulness** (Rate 1-10):\n   - Do the invariants prevent real bugs?\n   - Are they aligned with business requirements?\n   - Do they make the code easier to reason about?\n   - Are they neither too restrictive nor too permissive?\n\n5. **Examine Invariant Enforcement** (Rate 1-10):\n   - Are invariants checked at construction time?\n   - Are all mutation points guarded?\n   - Is it impossible to create invalid instances?\n   - Are runtime checks appropriate and comprehensive?\n\n**Output Format:**\n\nProvide your analysis in this structure:\n\n```\n## Type: [TypeName]\n\n### Invariants Identified\n- [List each invariant with a brief description]\n\n### Ratings\n- **Encapsulation**: X/10\n  [Brief justification]\n  \n- **Invariant Expression**: X/10\n  [Brief justification]\n  \n- **Invariant Usefulness**: X/10\n  [Brief justification]\n  \n- **Invariant Enforcement**: X/10\n  [Brief justification]\n\n### Strengths\n[What the type does well]\n\n### Concerns\n[Specific issues that need attention]\n\n### Recommended Improvements\n[Concrete, actionable suggestions that won't overcomplicate the codebase]\n```\n\n**Key Principles:**\n\n- Prefer compile-time guarantees over runtime checks when feasible\n- Value clarity and expressiveness over cleverness\n- Consider the maintenance burden of suggested improvements\n- Recognize that perfect is the enemy of good - suggest pragmatic improvements\n- Types should make illegal states unrepresentable\n- Constructor validation is crucial for maintaining invariants\n- Immutability often simplifies invariant maintenance\n\n**Common Anti-patterns to Flag:**\n\n- Anemic domain models with no behavior\n- Types that expose mutable internals\n- Invariants enforced only through documentation\n- Types with too many responsibilities\n- Missing validation at construction boundaries\n- Inconsistent enforcement across mutation methods\n- Types that rely on external code to maintain invariants\n\n**When Suggesting Improvements:**\n\nAlways consider:\n- The complexity cost of your suggestions\n- Whether the improvement justifies potential breaking changes\n- The skill level and conventions of the existing codebase\n- Performance implications of additional validation\n- The balance between safety and usability\n\nThink deeply about each type's role in the larger system. Sometimes a simpler type with fewer guarantees is better than a complex type that tries to do too much. Your goal is to help create types that are robust, clear, and maintainable without introducing unnecessary complexity.\n",
        "plugins/pr-review-toolkit/commands/review-pr.md": "---\ndescription: \"Comprehensive PR review using specialized agents\"\nargument-hint: \"[review-aspects]\"\nallowed-tools: [\"Bash\", \"Glob\", \"Grep\", \"Read\", \"Task\"]\n---\n\n# Comprehensive PR Review\n\nRun a comprehensive pull request review using multiple specialized agents, each focusing on a different aspect of code quality.\n\n**Review Aspects (optional):** \"$ARGUMENTS\"\n\n## Review Workflow:\n\n1. **Determine Review Scope**\n   - Check git status to identify changed files\n   - Parse arguments to see if user requested specific review aspects\n   - Default: Run all applicable reviews\n\n2. **Available Review Aspects:**\n\n   - **comments** - Analyze code comment accuracy and maintainability\n   - **tests** - Review test coverage quality and completeness\n   - **errors** - Check error handling for silent failures\n   - **types** - Analyze type design and invariants (if new types added)\n   - **code** - General code review for project guidelines\n   - **simplify** - Simplify code for clarity and maintainability\n   - **all** - Run all applicable reviews (default)\n\n3. **Identify Changed Files**\n   - Run `git diff --name-only` to see modified files\n   - Check if PR already exists: `gh pr view`\n   - Identify file types and what reviews apply\n\n4. **Determine Applicable Reviews**\n\n   Based on changes:\n   - **Always applicable**: code-reviewer (general quality)\n   - **If test files changed**: pr-test-analyzer\n   - **If comments/docs added**: comment-analyzer\n   - **If error handling changed**: silent-failure-hunter\n   - **If types added/modified**: type-design-analyzer\n   - **After passing review**: code-simplifier (polish and refine)\n\n5. **Launch Review Agents**\n\n   **Sequential approach** (one at a time):\n   - Easier to understand and act on\n   - Each report is complete before next\n   - Good for interactive review\n\n   **Parallel approach** (user can request):\n   - Launch all agents simultaneously\n   - Faster for comprehensive review\n   - Results come back together\n\n6. **Aggregate Results**\n\n   After agents complete, summarize:\n   - **Critical Issues** (must fix before merge)\n   - **Important Issues** (should fix)\n   - **Suggestions** (nice to have)\n   - **Positive Observations** (what's good)\n\n7. **Provide Action Plan**\n\n   Organize findings:\n   ```markdown\n   # PR Review Summary\n\n   ## Critical Issues (X found)\n   - [agent-name]: Issue description [file:line]\n\n   ## Important Issues (X found)\n   - [agent-name]: Issue description [file:line]\n\n   ## Suggestions (X found)\n   - [agent-name]: Suggestion [file:line]\n\n   ## Strengths\n   - What's well-done in this PR\n\n   ## Recommended Action\n   1. Fix critical issues first\n   2. Address important issues\n   3. Consider suggestions\n   4. Re-run review after fixes\n   ```\n\n## Usage Examples:\n\n**Full review (default):**\n```\n/pr-review-toolkit:review-pr\n```\n\n**Specific aspects:**\n```\n/pr-review-toolkit:review-pr tests errors\n# Reviews only test coverage and error handling\n\n/pr-review-toolkit:review-pr comments\n# Reviews only code comments\n\n/pr-review-toolkit:review-pr simplify\n# Simplifies code after passing review\n```\n\n**Parallel review:**\n```\n/pr-review-toolkit:review-pr all parallel\n# Launches all agents in parallel\n```\n\n## Agent Descriptions:\n\n**comment-analyzer**:\n- Verifies comment accuracy vs code\n- Identifies comment rot\n- Checks documentation completeness\n\n**pr-test-analyzer**:\n- Reviews behavioral test coverage\n- Identifies critical gaps\n- Evaluates test quality\n\n**silent-failure-hunter**:\n- Finds silent failures\n- Reviews catch blocks\n- Checks error logging\n\n**type-design-analyzer**:\n- Analyzes type encapsulation\n- Reviews invariant expression\n- Rates type design quality\n\n**code-reviewer**:\n- Checks CLAUDE.md compliance\n- Detects bugs and issues\n- Reviews general code quality\n\n**code-simplifier**:\n- Simplifies complex code\n- Improves clarity and readability\n- Applies project standards\n- Preserves functionality\n\n## Tips:\n\n- **Run early**: Before creating PR, not after\n- **Focus on changes**: Agents analyze git diff by default\n- **Address critical first**: Fix high-priority issues before lower priority\n- **Re-run after fixes**: Verify issues are resolved\n- **Use specific reviews**: Target specific aspects when you know the concern\n\n## Workflow Integration:\n\n**Before committing:**\n```\n1. Write code\n2. Run: /pr-review-toolkit:review-pr code errors\n3. Fix any critical issues\n4. Commit\n```\n\n**Before creating PR:**\n```\n1. Stage all changes\n2. Run: /pr-review-toolkit:review-pr all\n3. Address all critical and important issues\n4. Run specific reviews again to verify\n5. Create PR\n```\n\n**After PR feedback:**\n```\n1. Make requested changes\n2. Run targeted reviews based on feedback\n3. Verify issues are resolved\n4. Push updates\n```\n\n## Notes:\n\n- Agents run autonomously and return detailed reports\n- Each agent focuses on its specialty for deep analysis\n- Results are actionable with specific file:line references\n- Agents use appropriate models for their complexity\n- All agents available in `/agents` list\n",
        "plugins/pyright-lsp/README.md": "# pyright-lsp\n\nPython language server (Pyright) for Claude Code, providing static type checking and code intelligence.\n\n## Supported Extensions\n`.py`, `.pyi`\n\n## Installation\n\nInstall Pyright globally via npm:\n\n```bash\nnpm install -g pyright\n```\n\nOr with pip:\n\n```bash\npip install pyright\n```\n\nOr with pipx (recommended for CLI tools):\n\n```bash\npipx install pyright\n```\n\n## More Information\n- [Pyright on npm](https://www.npmjs.com/package/pyright)\n- [Pyright on PyPI](https://pypi.org/project/pyright/)\n- [GitHub Repository](https://github.com/microsoft/pyright)\n",
        "plugins/ralph-loop/.claude-plugin/plugin.json": "{\n  \"name\": \"ralph-loop\",\n  \"description\": \"Continuous self-referential AI loops for interactive iterative development, implementing the Ralph Wiggum technique. Run Claude in a while-true loop with the same prompt until task completion.\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/ralph-loop/README.md": "# Ralph Loop Plugin\n\nImplementation of the Ralph Wiggum technique for iterative, self-referential AI development loops in Claude Code.\n\n## What is Ralph Loop?\n\nRalph Loop is a development methodology based on continuous AI agent loops. As Geoffrey Huntley describes it: **\"Ralph is a Bash loop\"** - a simple `while true` that repeatedly feeds an AI agent a prompt file, allowing it to iteratively improve its work until completion.\n\nThis technique is inspired by the Ralph Wiggum coding technique (named after the character from The Simpsons), embodying the philosophy of persistent iteration despite setbacks.\n\n### Core Concept\n\nThis plugin implements Ralph using a **Stop hook** that intercepts Claude's exit attempts:\n\n```bash\n# You run ONCE:\n/ralph-loop \"Your task description\" --completion-promise \"DONE\"\n\n# Then Claude Code automatically:\n# 1. Works on the task\n# 2. Tries to exit\n# 3. Stop hook blocks exit\n# 4. Stop hook feeds the SAME prompt back\n# 5. Repeat until completion\n```\n\nThe loop happens **inside your current session** - you don't need external bash loops. The Stop hook in `hooks/stop-hook.sh` creates the self-referential feedback loop by blocking normal session exit.\n\nThis creates a **self-referential feedback loop** where:\n- The prompt never changes between iterations\n- Claude's previous work persists in files\n- Each iteration sees modified files and git history\n- Claude autonomously improves by reading its own past work in files\n\n## Quick Start\n\n```bash\n/ralph-loop \"Build a REST API for todos. Requirements: CRUD operations, input validation, tests. Output <promise>COMPLETE</promise> when done.\" --completion-promise \"COMPLETE\" --max-iterations 50\n```\n\nClaude will:\n- Implement the API iteratively\n- Run tests and see failures\n- Fix bugs based on test output\n- Iterate until all requirements met\n- Output the completion promise when done\n\n## Commands\n\n### /ralph-loop\n\nStart a Ralph loop in your current session.\n\n**Usage:**\n```bash\n/ralph-loop \"<prompt>\" --max-iterations <n> --completion-promise \"<text>\"\n```\n\n**Options:**\n- `--max-iterations <n>` - Stop after N iterations (default: unlimited)\n- `--completion-promise <text>` - Phrase that signals completion\n\n### /cancel-ralph\n\nCancel the active Ralph loop.\n\n**Usage:**\n```bash\n/cancel-ralph\n```\n\n## Prompt Writing Best Practices\n\n### 1. Clear Completion Criteria\n\n❌ Bad: \"Build a todo API and make it good.\"\n\n✅ Good:\n```markdown\nBuild a REST API for todos.\n\nWhen complete:\n- All CRUD endpoints working\n- Input validation in place\n- Tests passing (coverage > 80%)\n- README with API docs\n- Output: <promise>COMPLETE</promise>\n```\n\n### 2. Incremental Goals\n\n❌ Bad: \"Create a complete e-commerce platform.\"\n\n✅ Good:\n```markdown\nPhase 1: User authentication (JWT, tests)\nPhase 2: Product catalog (list/search, tests)\nPhase 3: Shopping cart (add/remove, tests)\n\nOutput <promise>COMPLETE</promise> when all phases done.\n```\n\n### 3. Self-Correction\n\n❌ Bad: \"Write code for feature X.\"\n\n✅ Good:\n```markdown\nImplement feature X following TDD:\n1. Write failing tests\n2. Implement feature\n3. Run tests\n4. If any fail, debug and fix\n5. Refactor if needed\n6. Repeat until all green\n7. Output: <promise>COMPLETE</promise>\n```\n\n### 4. Escape Hatches\n\nAlways use `--max-iterations` as a safety net to prevent infinite loops on impossible tasks:\n\n```bash\n# Recommended: Always set a reasonable iteration limit\n/ralph-loop \"Try to implement feature X\" --max-iterations 20\n\n# In your prompt, include what to do if stuck:\n# \"After 15 iterations, if not complete:\n#  - Document what's blocking progress\n#  - List what was attempted\n#  - Suggest alternative approaches\"\n```\n\n**Note**: The `--completion-promise` uses exact string matching, so you cannot use it for multiple completion conditions (like \"SUCCESS\" vs \"BLOCKED\"). Always rely on `--max-iterations` as your primary safety mechanism.\n\n## Philosophy\n\nRalph embodies several key principles:\n\n### 1. Iteration > Perfection\nDon't aim for perfect on first try. Let the loop refine the work.\n\n### 2. Failures Are Data\n\"Deterministically bad\" means failures are predictable and informative. Use them to tune prompts.\n\n### 3. Operator Skill Matters\nSuccess depends on writing good prompts, not just having a good model.\n\n### 4. Persistence Wins\nKeep trying until success. The loop handles retry logic automatically.\n\n## When to Use Ralph\n\n**Good for:**\n- Well-defined tasks with clear success criteria\n- Tasks requiring iteration and refinement (e.g., getting tests to pass)\n- Greenfield projects where you can walk away\n- Tasks with automatic verification (tests, linters)\n\n**Not good for:**\n- Tasks requiring human judgment or design decisions\n- One-shot operations\n- Tasks with unclear success criteria\n- Production debugging (use targeted debugging instead)\n\n## Real-World Results\n\n- Successfully generated 6 repositories overnight in Y Combinator hackathon testing\n- One $50k contract completed for $297 in API costs\n- Created entire programming language (\"cursed\") over 3 months using this approach\n\n## Learn More\n\n- Original technique: https://ghuntley.com/ralph/\n- Ralph Orchestrator: https://github.com/mikeyobrien/ralph-orchestrator\n\n## For Help\n\nRun `/help` in Claude Code for detailed command reference and examples.\n",
        "plugins/ralph-loop/commands/cancel-ralph.md": "---\ndescription: \"Cancel active Ralph Loop\"\nallowed-tools: [\"Bash(test -f .claude/ralph-loop.local.md:*)\", \"Bash(rm .claude/ralph-loop.local.md)\", \"Read(.claude/ralph-loop.local.md)\"]\nhide-from-slash-command-tool: \"true\"\n---\n\n# Cancel Ralph\n\nTo cancel the Ralph loop:\n\n1. Check if `.claude/ralph-loop.local.md` exists using Bash: `test -f .claude/ralph-loop.local.md && echo \"EXISTS\" || echo \"NOT_FOUND\"`\n\n2. **If NOT_FOUND**: Say \"No active Ralph loop found.\"\n\n3. **If EXISTS**:\n   - Read `.claude/ralph-loop.local.md` to get the current iteration number from the `iteration:` field\n   - Remove the file using Bash: `rm .claude/ralph-loop.local.md`\n   - Report: \"Cancelled Ralph loop (was at iteration N)\" where N is the iteration value\n",
        "plugins/ralph-loop/commands/help.md": "---\ndescription: \"Explain Ralph Loop plugin and available commands\"\n---\n\n# Ralph Loop Plugin Help\n\nPlease explain the following to the user:\n\n## What is Ralph Loop?\n\nRalph Loop implements the Ralph Wiggum technique - an iterative development methodology based on continuous AI loops, pioneered by Geoffrey Huntley.\n\n**Core concept:**\n```bash\nwhile :; do\n  cat PROMPT.md | claude-code --continue\ndone\n```\n\nThe same prompt is fed to Claude repeatedly. The \"self-referential\" aspect comes from Claude seeing its own previous work in the files and git history, not from feeding output back as input.\n\n**Each iteration:**\n1. Claude receives the SAME prompt\n2. Works on the task, modifying files\n3. Tries to exit\n4. Stop hook intercepts and feeds the same prompt again\n5. Claude sees its previous work in the files\n6. Iteratively improves until completion\n\nThe technique is described as \"deterministically bad in an undeterministic world\" - failures are predictable, enabling systematic improvement through prompt tuning.\n\n## Available Commands\n\n### /ralph-loop <PROMPT> [OPTIONS]\n\nStart a Ralph loop in your current session.\n\n**Usage:**\n```\n/ralph-loop \"Refactor the cache layer\" --max-iterations 20\n/ralph-loop \"Add tests\" --completion-promise \"TESTS COMPLETE\"\n```\n\n**Options:**\n- `--max-iterations <n>` - Max iterations before auto-stop\n- `--completion-promise <text>` - Promise phrase to signal completion\n\n**How it works:**\n1. Creates `.claude/.ralph-loop.local.md` state file\n2. You work on the task\n3. When you try to exit, stop hook intercepts\n4. Same prompt fed back\n5. You see your previous work\n6. Continues until promise detected or max iterations\n\n---\n\n### /cancel-ralph\n\nCancel an active Ralph loop (removes the loop state file).\n\n**Usage:**\n```\n/cancel-ralph\n```\n\n**How it works:**\n- Checks for active loop state file\n- Removes `.claude/.ralph-loop.local.md`\n- Reports cancellation with iteration count\n\n---\n\n## Key Concepts\n\n### Completion Promises\n\nTo signal completion, Claude must output a `<promise>` tag:\n\n```\n<promise>TASK COMPLETE</promise>\n```\n\nThe stop hook looks for this specific tag. Without it (or `--max-iterations`), Ralph runs infinitely.\n\n### Self-Reference Mechanism\n\nThe \"loop\" doesn't mean Claude talks to itself. It means:\n- Same prompt repeated\n- Claude's work persists in files\n- Each iteration sees previous attempts\n- Builds incrementally toward goal\n\n## Example\n\n### Interactive Bug Fix\n\n```\n/ralph-loop \"Fix the token refresh logic in auth.ts. Output <promise>FIXED</promise> when all tests pass.\" --completion-promise \"FIXED\" --max-iterations 10\n```\n\nYou'll see Ralph:\n- Attempt fixes\n- Run tests\n- See failures\n- Iterate on solution\n- In your current session\n\n## When to Use Ralph\n\n**Good for:**\n- Well-defined tasks with clear success criteria\n- Tasks requiring iteration and refinement\n- Iterative development with self-correction\n- Greenfield projects\n\n**Not good for:**\n- Tasks requiring human judgment or design decisions\n- One-shot operations\n- Tasks with unclear success criteria\n- Debugging production issues (use targeted debugging instead)\n\n## Learn More\n\n- Original technique: https://ghuntley.com/ralph/\n- Ralph Orchestrator: https://github.com/mikeyobrien/ralph-orchestrator\n",
        "plugins/ralph-loop/commands/ralph-loop.md": "---\ndescription: \"Start Ralph Loop in current session\"\nargument-hint: \"PROMPT [--max-iterations N] [--completion-promise TEXT]\"\nallowed-tools: [\"Bash(${CLAUDE_PLUGIN_ROOT}/scripts/setup-ralph-loop.sh:*)\"]\nhide-from-slash-command-tool: \"true\"\n---\n\n# Ralph Loop Command\n\nExecute the setup script to initialize the Ralph loop:\n\n```!\n\"${CLAUDE_PLUGIN_ROOT}/scripts/setup-ralph-loop.sh\" $ARGUMENTS\n```\n\nPlease work on the task. When you try to exit, the Ralph loop will feed the SAME PROMPT back to you for the next iteration. You'll see your previous work in files and git history, allowing you to iterate and improve.\n\nCRITICAL RULE: If a completion promise is set, you may ONLY output it when the statement is completely and unequivocally TRUE. Do not output false promises to escape the loop, even if you think you're stuck or should exit for other reasons. The loop is designed to continue until genuine completion.\n",
        "plugins/ralph-loop/hooks/hooks.json": "{\n  \"description\": \"Ralph Loop plugin stop hook for self-referential loops\",\n  \"hooks\": {\n    \"Stop\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/stop-hook.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/ralph-loop/hooks/stop-hook.sh": "#!/bin/bash\n\n# Ralph Loop Stop Hook\n# Prevents session exit when a ralph-loop is active\n# Feeds Claude's output back as input to continue the loop\n\nset -euo pipefail\n\n# Read hook input from stdin (advanced stop hook API)\nHOOK_INPUT=$(cat)\n\n# Check if ralph-loop is active\nRALPH_STATE_FILE=\".claude/ralph-loop.local.md\"\n\nif [[ ! -f \"$RALPH_STATE_FILE\" ]]; then\n  # No active loop - allow exit\n  exit 0\nfi\n\n# Parse markdown frontmatter (YAML between ---) and extract values\nFRONTMATTER=$(sed -n '/^---$/,/^---$/{ /^---$/d; p; }' \"$RALPH_STATE_FILE\")\nITERATION=$(echo \"$FRONTMATTER\" | grep '^iteration:' | sed 's/iteration: *//')\nMAX_ITERATIONS=$(echo \"$FRONTMATTER\" | grep '^max_iterations:' | sed 's/max_iterations: *//')\n# Extract completion_promise and strip surrounding quotes if present\nCOMPLETION_PROMISE=$(echo \"$FRONTMATTER\" | grep '^completion_promise:' | sed 's/completion_promise: *//' | sed 's/^\"\\(.*\\)\"$/\\1/')\n\n# Validate numeric fields before arithmetic operations\nif [[ ! \"$ITERATION\" =~ ^[0-9]+$ ]]; then\n  echo \"⚠️  Ralph loop: State file corrupted\" >&2\n  echo \"   File: $RALPH_STATE_FILE\" >&2\n  echo \"   Problem: 'iteration' field is not a valid number (got: '$ITERATION')\" >&2\n  echo \"\" >&2\n  echo \"   This usually means the state file was manually edited or corrupted.\" >&2\n  echo \"   Ralph loop is stopping. Run /ralph-loop again to start fresh.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\nif [[ ! \"$MAX_ITERATIONS\" =~ ^[0-9]+$ ]]; then\n  echo \"⚠️  Ralph loop: State file corrupted\" >&2\n  echo \"   File: $RALPH_STATE_FILE\" >&2\n  echo \"   Problem: 'max_iterations' field is not a valid number (got: '$MAX_ITERATIONS')\" >&2\n  echo \"\" >&2\n  echo \"   This usually means the state file was manually edited or corrupted.\" >&2\n  echo \"   Ralph loop is stopping. Run /ralph-loop again to start fresh.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Check if max iterations reached\nif [[ $MAX_ITERATIONS -gt 0 ]] && [[ $ITERATION -ge $MAX_ITERATIONS ]]; then\n  echo \"🛑 Ralph loop: Max iterations ($MAX_ITERATIONS) reached.\"\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Get transcript path from hook input\nTRANSCRIPT_PATH=$(echo \"$HOOK_INPUT\" | jq -r '.transcript_path')\n\nif [[ ! -f \"$TRANSCRIPT_PATH\" ]]; then\n  echo \"⚠️  Ralph loop: Transcript file not found\" >&2\n  echo \"   Expected: $TRANSCRIPT_PATH\" >&2\n  echo \"   This is unusual and may indicate a Claude Code internal issue.\" >&2\n  echo \"   Ralph loop is stopping.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Read last assistant message from transcript (JSONL format - one JSON per line)\n# First check if there are any assistant messages\nif ! grep -q '\"role\":\"assistant\"' \"$TRANSCRIPT_PATH\"; then\n  echo \"⚠️  Ralph loop: No assistant messages found in transcript\" >&2\n  echo \"   Transcript: $TRANSCRIPT_PATH\" >&2\n  echo \"   This is unusual and may indicate a transcript format issue\" >&2\n  echo \"   Ralph loop is stopping.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Extract last assistant message with explicit error handling\nLAST_LINE=$(grep '\"role\":\"assistant\"' \"$TRANSCRIPT_PATH\" | tail -1)\nif [[ -z \"$LAST_LINE\" ]]; then\n  echo \"⚠️  Ralph loop: Failed to extract last assistant message\" >&2\n  echo \"   Ralph loop is stopping.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Parse JSON with error handling\nLAST_OUTPUT=$(echo \"$LAST_LINE\" | jq -r '\n  .message.content |\n  map(select(.type == \"text\")) |\n  map(.text) |\n  join(\"\\n\")\n' 2>&1)\n\n# Check if jq succeeded\nif [[ $? -ne 0 ]]; then\n  echo \"⚠️  Ralph loop: Failed to parse assistant message JSON\" >&2\n  echo \"   Error: $LAST_OUTPUT\" >&2\n  echo \"   This may indicate a transcript format issue\" >&2\n  echo \"   Ralph loop is stopping.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\nif [[ -z \"$LAST_OUTPUT\" ]]; then\n  echo \"⚠️  Ralph loop: Assistant message contained no text content\" >&2\n  echo \"   Ralph loop is stopping.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Check for completion promise (only if set)\nif [[ \"$COMPLETION_PROMISE\" != \"null\" ]] && [[ -n \"$COMPLETION_PROMISE\" ]]; then\n  # Extract text from <promise> tags using Perl for multiline support\n  # -0777 slurps entire input, s flag makes . match newlines\n  # .*? is non-greedy (takes FIRST tag), whitespace normalized\n  PROMISE_TEXT=$(echo \"$LAST_OUTPUT\" | perl -0777 -pe 's/.*?<promise>(.*?)<\\/promise>.*/$1/s; s/^\\s+|\\s+$//g; s/\\s+/ /g' 2>/dev/null || echo \"\")\n\n  # Use = for literal string comparison (not pattern matching)\n  # == in [[ ]] does glob pattern matching which breaks with *, ?, [ characters\n  if [[ -n \"$PROMISE_TEXT\" ]] && [[ \"$PROMISE_TEXT\" = \"$COMPLETION_PROMISE\" ]]; then\n    echo \"✅ Ralph loop: Detected <promise>$COMPLETION_PROMISE</promise>\"\n    rm \"$RALPH_STATE_FILE\"\n    exit 0\n  fi\nfi\n\n# Not complete - continue loop with SAME PROMPT\nNEXT_ITERATION=$((ITERATION + 1))\n\n# Extract prompt (everything after the closing ---)\n# Skip first --- line, skip until second --- line, then print everything after\n# Use i>=2 instead of i==2 to handle --- in prompt content\nPROMPT_TEXT=$(awk '/^---$/{i++; next} i>=2' \"$RALPH_STATE_FILE\")\n\nif [[ -z \"$PROMPT_TEXT\" ]]; then\n  echo \"⚠️  Ralph loop: State file corrupted or incomplete\" >&2\n  echo \"   File: $RALPH_STATE_FILE\" >&2\n  echo \"   Problem: No prompt text found\" >&2\n  echo \"\" >&2\n  echo \"   This usually means:\" >&2\n  echo \"     • State file was manually edited\" >&2\n  echo \"     • File was corrupted during writing\" >&2\n  echo \"\" >&2\n  echo \"   Ralph loop is stopping. Run /ralph-loop again to start fresh.\" >&2\n  rm \"$RALPH_STATE_FILE\"\n  exit 0\nfi\n\n# Update iteration in frontmatter (portable across macOS and Linux)\n# Create temp file, then atomically replace\nTEMP_FILE=\"${RALPH_STATE_FILE}.tmp.$$\"\nsed \"s/^iteration: .*/iteration: $NEXT_ITERATION/\" \"$RALPH_STATE_FILE\" > \"$TEMP_FILE\"\nmv \"$TEMP_FILE\" \"$RALPH_STATE_FILE\"\n\n# Build system message with iteration count and completion promise info\nif [[ \"$COMPLETION_PROMISE\" != \"null\" ]] && [[ -n \"$COMPLETION_PROMISE\" ]]; then\n  SYSTEM_MSG=\"🔄 Ralph iteration $NEXT_ITERATION | To stop: output <promise>$COMPLETION_PROMISE</promise> (ONLY when statement is TRUE - do not lie to exit!)\"\nelse\n  SYSTEM_MSG=\"🔄 Ralph iteration $NEXT_ITERATION | No completion promise set - loop runs infinitely\"\nfi\n\n# Output JSON to block the stop and feed prompt back\n# The \"reason\" field contains the prompt that will be sent back to Claude\njq -n \\\n  --arg prompt \"$PROMPT_TEXT\" \\\n  --arg msg \"$SYSTEM_MSG\" \\\n  '{\n    \"decision\": \"block\",\n    \"reason\": $prompt,\n    \"systemMessage\": $msg\n  }'\n\n# Exit 0 for successful hook execution\nexit 0\n",
        "plugins/rust-analyzer-lsp/README.md": "# rust-analyzer-lsp\n\nRust language server for Claude Code, providing code intelligence and analysis.\n\n## Supported Extensions\n`.rs`\n\n## Installation\n\n### Via rustup (recommended)\n```bash\nrustup component add rust-analyzer\n```\n\n### Via Homebrew (macOS)\n```bash\nbrew install rust-analyzer\n```\n\n### Via package manager (Linux)\n```bash\n# Ubuntu/Debian\nsudo apt install rust-analyzer\n\n# Arch Linux\nsudo pacman -S rust-analyzer\n```\n\n### Manual download\nDownload pre-built binaries from the [releases page](https://github.com/rust-lang/rust-analyzer/releases).\n\n## More Information\n- [rust-analyzer Website](https://rust-analyzer.github.io/)\n- [GitHub Repository](https://github.com/rust-lang/rust-analyzer)\n",
        "plugins/security-guidance/.claude-plugin/plugin.json": "{\n  \"name\": \"security-guidance\",\n  \"description\": \"Security reminder hook that warns about potential security issues when editing files, including command injection, XSS, and unsafe code patterns\",\n  \"author\": {\n    \"name\": \"Anthropic\",\n    \"email\": \"support@anthropic.com\"\n  }\n}\n",
        "plugins/security-guidance/hooks/hooks.json": "{\n  \"description\": \"Security reminder hook that warns about potential security issues when editing files\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/hooks/security_reminder_hook.py\"\n          }\n        ],\n        \"matcher\": \"Edit|Write|MultiEdit\"\n      }\n    ]\n  }\n}\n",
        "plugins/security-guidance/hooks/security_reminder_hook.py": "#!/usr/bin/env python3\n\"\"\"\nSecurity Reminder Hook for Claude Code\nThis hook checks for security patterns in file edits and warns about potential vulnerabilities.\n\"\"\"\n\nimport json\nimport os\nimport random\nimport sys\nfrom datetime import datetime\n\n# Debug log file\nDEBUG_LOG_FILE = \"/tmp/security-warnings-log.txt\"\n\n\ndef debug_log(message):\n    \"\"\"Append debug message to log file with timestamp.\"\"\"\n    try:\n        timestamp = datetime.now().strftime(\"%Y-%m-%d %H:%M:%S.%f\")[:-3]\n        with open(DEBUG_LOG_FILE, \"a\") as f:\n            f.write(f\"[{timestamp}] {message}\\n\")\n    except Exception as e:\n        # Silently ignore logging errors to avoid disrupting the hook\n        pass\n\n\n# State file to track warnings shown (session-scoped using session ID)\n\n# Security patterns configuration\nSECURITY_PATTERNS = [\n    {\n        \"ruleName\": \"github_actions_workflow\",\n        \"path_check\": lambda path: \".github/workflows/\" in path\n        and (path.endswith(\".yml\") or path.endswith(\".yaml\")),\n        \"reminder\": \"\"\"You are editing a GitHub Actions workflow file. Be aware of these security risks:\n\n1. **Command Injection**: Never use untrusted input (like issue titles, PR descriptions, commit messages) directly in run: commands without proper escaping\n2. **Use environment variables**: Instead of ${{ github.event.issue.title }}, use env: with proper quoting\n3. **Review the guide**: https://github.blog/security/vulnerability-research/how-to-catch-github-actions-workflow-injections-before-attackers-do/\n\nExample of UNSAFE pattern to avoid:\nrun: echo \"${{ github.event.issue.title }}\"\n\nExample of SAFE pattern:\nenv:\n  TITLE: ${{ github.event.issue.title }}\nrun: echo \"$TITLE\"\n\nOther risky inputs to be careful with:\n- github.event.issue.body\n- github.event.pull_request.title\n- github.event.pull_request.body\n- github.event.comment.body\n- github.event.review.body\n- github.event.review_comment.body\n- github.event.pages.*.page_name\n- github.event.commits.*.message\n- github.event.head_commit.message\n- github.event.head_commit.author.email\n- github.event.head_commit.author.name\n- github.event.commits.*.author.email\n- github.event.commits.*.author.name\n- github.event.pull_request.head.ref\n- github.event.pull_request.head.label\n- github.event.pull_request.head.repo.default_branch\n- github.head_ref\"\"\",\n    },\n    {\n        \"ruleName\": \"child_process_exec\",\n        \"substrings\": [\"child_process.exec\", \"exec(\", \"execSync(\"],\n        \"reminder\": \"\"\"⚠️ Security Warning: Using child_process.exec() can lead to command injection vulnerabilities.\n\nThis codebase provides a safer alternative: src/utils/execFileNoThrow.ts\n\nInstead of:\n  exec(`command ${userInput}`)\n\nUse:\n  import { execFileNoThrow } from '../utils/execFileNoThrow.js'\n  await execFileNoThrow('command', [userInput])\n\nThe execFileNoThrow utility:\n- Uses execFile instead of exec (prevents shell injection)\n- Handles Windows compatibility automatically\n- Provides proper error handling\n- Returns structured output with stdout, stderr, and status\n\nOnly use exec() if you absolutely need shell features and the input is guaranteed to be safe.\"\"\",\n    },\n    {\n        \"ruleName\": \"new_function_injection\",\n        \"substrings\": [\"new Function\"],\n        \"reminder\": \"⚠️ Security Warning: Using new Function() with dynamic strings can lead to code injection vulnerabilities. Consider alternative approaches that don't evaluate arbitrary code. Only use new Function() if you truly need to evaluate arbitrary dynamic code.\",\n    },\n    {\n        \"ruleName\": \"eval_injection\",\n        \"substrings\": [\"eval(\"],\n        \"reminder\": \"⚠️ Security Warning: eval() executes arbitrary code and is a major security risk. Consider using JSON.parse() for data parsing or alternative design patterns that don't require code evaluation. Only use eval() if you truly need to evaluate arbitrary code.\",\n    },\n    {\n        \"ruleName\": \"react_dangerously_set_html\",\n        \"substrings\": [\"dangerouslySetInnerHTML\"],\n        \"reminder\": \"⚠️ Security Warning: dangerouslySetInnerHTML can lead to XSS vulnerabilities if used with untrusted content. Ensure all content is properly sanitized using an HTML sanitizer library like DOMPurify, or use safe alternatives.\",\n    },\n    {\n        \"ruleName\": \"document_write_xss\",\n        \"substrings\": [\"document.write\"],\n        \"reminder\": \"⚠️ Security Warning: document.write() can be exploited for XSS attacks and has performance issues. Use DOM manipulation methods like createElement() and appendChild() instead.\",\n    },\n    {\n        \"ruleName\": \"innerHTML_xss\",\n        \"substrings\": [\".innerHTML =\", \".innerHTML=\"],\n        \"reminder\": \"⚠️ Security Warning: Setting innerHTML with untrusted content can lead to XSS vulnerabilities. Use textContent for plain text or safe DOM methods for HTML content. If you need HTML support, consider using an HTML sanitizer library such as DOMPurify.\",\n    },\n    {\n        \"ruleName\": \"pickle_deserialization\",\n        \"substrings\": [\"pickle\"],\n        \"reminder\": \"⚠️ Security Warning: Using pickle with untrusted content can lead to arbitrary code execution. Consider using JSON or other safe serialization formats instead. Only use pickle if it is explicitly needed or requested by the user.\",\n    },\n    {\n        \"ruleName\": \"os_system_injection\",\n        \"substrings\": [\"os.system\", \"from os import system\"],\n        \"reminder\": \"⚠️ Security Warning: This code appears to use os.system. This should only be used with static arguments and never with arguments that could be user-controlled.\",\n    },\n]\n\n\ndef get_state_file(session_id):\n    \"\"\"Get session-specific state file path.\"\"\"\n    return os.path.expanduser(f\"~/.claude/security_warnings_state_{session_id}.json\")\n\n\ndef cleanup_old_state_files():\n    \"\"\"Remove state files older than 30 days.\"\"\"\n    try:\n        state_dir = os.path.expanduser(\"~/.claude\")\n        if not os.path.exists(state_dir):\n            return\n\n        current_time = datetime.now().timestamp()\n        thirty_days_ago = current_time - (30 * 24 * 60 * 60)\n\n        for filename in os.listdir(state_dir):\n            if filename.startswith(\"security_warnings_state_\") and filename.endswith(\n                \".json\"\n            ):\n                file_path = os.path.join(state_dir, filename)\n                try:\n                    file_mtime = os.path.getmtime(file_path)\n                    if file_mtime < thirty_days_ago:\n                        os.remove(file_path)\n                except (OSError, IOError):\n                    pass  # Ignore errors for individual file cleanup\n    except Exception:\n        pass  # Silently ignore cleanup errors\n\n\ndef load_state(session_id):\n    \"\"\"Load the state of shown warnings from file.\"\"\"\n    state_file = get_state_file(session_id)\n    if os.path.exists(state_file):\n        try:\n            with open(state_file, \"r\") as f:\n                return set(json.load(f))\n        except (json.JSONDecodeError, IOError):\n            return set()\n    return set()\n\n\ndef save_state(session_id, shown_warnings):\n    \"\"\"Save the state of shown warnings to file.\"\"\"\n    state_file = get_state_file(session_id)\n    try:\n        os.makedirs(os.path.dirname(state_file), exist_ok=True)\n        with open(state_file, \"w\") as f:\n            json.dump(list(shown_warnings), f)\n    except IOError as e:\n        debug_log(f\"Failed to save state file: {e}\")\n        pass  # Fail silently if we can't save state\n\n\ndef check_patterns(file_path, content):\n    \"\"\"Check if file path or content matches any security patterns.\"\"\"\n    # Normalize path by removing leading slashes\n    normalized_path = file_path.lstrip(\"/\")\n\n    for pattern in SECURITY_PATTERNS:\n        # Check path-based patterns\n        if \"path_check\" in pattern and pattern[\"path_check\"](normalized_path):\n            return pattern[\"ruleName\"], pattern[\"reminder\"]\n\n        # Check content-based patterns\n        if \"substrings\" in pattern and content:\n            for substring in pattern[\"substrings\"]:\n                if substring in content:\n                    return pattern[\"ruleName\"], pattern[\"reminder\"]\n\n    return None, None\n\n\ndef extract_content_from_input(tool_name, tool_input):\n    \"\"\"Extract content to check from tool input based on tool type.\"\"\"\n    if tool_name == \"Write\":\n        return tool_input.get(\"content\", \"\")\n    elif tool_name == \"Edit\":\n        return tool_input.get(\"new_string\", \"\")\n    elif tool_name == \"MultiEdit\":\n        edits = tool_input.get(\"edits\", [])\n        if edits:\n            return \" \".join(edit.get(\"new_string\", \"\") for edit in edits)\n        return \"\"\n\n    return \"\"\n\n\ndef main():\n    \"\"\"Main hook function.\"\"\"\n    # Check if security reminders are enabled\n    security_reminder_enabled = os.environ.get(\"ENABLE_SECURITY_REMINDER\", \"1\")\n\n    # Only run if security reminders are enabled\n    if security_reminder_enabled == \"0\":\n        sys.exit(0)\n\n    # Periodically clean up old state files (10% chance per run)\n    if random.random() < 0.1:\n        cleanup_old_state_files()\n\n    # Read input from stdin\n    try:\n        raw_input = sys.stdin.read()\n        input_data = json.loads(raw_input)\n    except json.JSONDecodeError as e:\n        debug_log(f\"JSON decode error: {e}\")\n        sys.exit(0)  # Allow tool to proceed if we can't parse input\n\n    # Extract session ID and tool information from the hook input\n    session_id = input_data.get(\"session_id\", \"default\")\n    tool_name = input_data.get(\"tool_name\", \"\")\n    tool_input = input_data.get(\"tool_input\", {})\n\n    # Check if this is a relevant tool\n    if tool_name not in [\"Edit\", \"Write\", \"MultiEdit\"]:\n        sys.exit(0)  # Allow non-file tools to proceed\n\n    # Extract file path from tool_input\n    file_path = tool_input.get(\"file_path\", \"\")\n    if not file_path:\n        sys.exit(0)  # Allow if no file path\n\n    # Extract content to check\n    content = extract_content_from_input(tool_name, tool_input)\n\n    # Check for security patterns\n    rule_name, reminder = check_patterns(file_path, content)\n\n    if rule_name and reminder:\n        # Create unique warning key\n        warning_key = f\"{file_path}-{rule_name}\"\n\n        # Load existing warnings for this session\n        shown_warnings = load_state(session_id)\n\n        # Check if we've already shown this warning in this session\n        if warning_key not in shown_warnings:\n            # Add to shown warnings and save\n            shown_warnings.add(warning_key)\n            save_state(session_id, shown_warnings)\n\n            # Output the warning to stderr and block execution\n            print(reminder, file=sys.stderr)\n            sys.exit(2)  # Block tool execution (exit code 2 for PreToolUse hooks)\n\n    # Allow tool to proceed\n    sys.exit(0)\n\n\nif __name__ == \"__main__\":\n    main()\n",
        "plugins/swift-lsp/README.md": "# swift-lsp\n\nSwift language server (SourceKit-LSP) for Claude Code, providing code intelligence for Swift projects.\n\n## Supported Extensions\n`.swift`\n\n## Installation\n\nSourceKit-LSP is included with the Swift toolchain.\n\n### macOS\nInstall Xcode from the App Store, or install Swift via:\n```bash\nbrew install swift\n```\n\n### Linux\nDownload and install Swift from [swift.org](https://www.swift.org/download/).\n\nAfter installation, `sourcekit-lsp` should be available in your PATH.\n\n## More Information\n- [SourceKit-LSP GitHub](https://github.com/apple/sourcekit-lsp)\n- [Swift.org](https://www.swift.org/)\n",
        "plugins/typescript-lsp/README.md": "# typescript-lsp\n\nTypeScript/JavaScript language server for Claude Code, providing code intelligence features like go-to-definition, find references, and error checking.\n\n## Supported Extensions\n`.ts`, `.tsx`, `.js`, `.jsx`, `.mts`, `.cts`, `.mjs`, `.cjs`\n\n## Installation\n\nInstall the TypeScript language server globally via npm:\n\n```bash\nnpm install -g typescript-language-server typescript\n```\n\nOr with yarn:\n\n```bash\nyarn global add typescript-language-server typescript\n```\n\n## More Information\n- [typescript-language-server on npm](https://www.npmjs.com/package/typescript-language-server)\n- [GitHub Repository](https://github.com/typescript-language-server/typescript-language-server)\n"
      },
      "plugins": [
        {
          "name": "typescript-lsp",
          "description": "TypeScript/JavaScript language server for enhanced code intelligence",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/typescript-lsp",
          "category": "development",
          "strict": false,
          "lspServers": {
            "typescript": {
              "command": "typescript-language-server",
              "args": [
                "--stdio"
              ],
              "extensionToLanguage": {
                ".ts": "typescript",
                ".tsx": "typescriptreact",
                ".js": "javascript",
                ".jsx": "javascriptreact",
                ".mts": "typescript",
                ".cts": "typescript",
                ".mjs": "javascript",
                ".cjs": "javascript"
              }
            }
          },
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install typescript-lsp@claude-plugins-official"
          ]
        },
        {
          "name": "pyright-lsp",
          "description": "Python language server (Pyright) for type checking and code intelligence",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/pyright-lsp",
          "category": "development",
          "strict": false,
          "lspServers": {
            "pyright": {
              "command": "pyright-langserver",
              "args": [
                "--stdio"
              ],
              "extensionToLanguage": {
                ".py": "python",
                ".pyi": "python"
              }
            }
          },
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install pyright-lsp@claude-plugins-official"
          ]
        },
        {
          "name": "gopls-lsp",
          "description": "Go language server for code intelligence and refactoring",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/gopls-lsp",
          "category": "development",
          "strict": false,
          "lspServers": {
            "gopls": {
              "command": "gopls",
              "extensionToLanguage": {
                ".go": "go"
              }
            }
          },
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install gopls-lsp@claude-plugins-official"
          ]
        },
        {
          "name": "rust-analyzer-lsp",
          "description": "Rust language server for code intelligence and analysis",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/rust-analyzer-lsp",
          "category": "development",
          "strict": false,
          "lspServers": {
            "rust-analyzer": {
              "command": "rust-analyzer",
              "extensionToLanguage": {
                ".rs": "rust"
              }
            }
          },
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install rust-analyzer-lsp@claude-plugins-official"
          ]
        },
        {
          "name": "clangd-lsp",
          "description": "C/C++ language server (clangd) for code intelligence",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/clangd-lsp",
          "category": "development",
          "strict": false,
          "lspServers": {
            "clangd": {
              "command": "clangd",
              "args": [
                "--background-index"
              ],
              "extensionToLanguage": {
                ".c": "c",
                ".h": "c",
                ".cpp": "cpp",
                ".cc": "cpp",
                ".cxx": "cpp",
                ".hpp": "cpp",
                ".hxx": "cpp",
                ".C": "cpp",
                ".H": "cpp"
              }
            }
          },
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install clangd-lsp@claude-plugins-official"
          ]
        },
        {
          "name": "php-lsp",
          "description": "PHP language server (Intelephense) for code intelligence",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/php-lsp",
          "category": "development",
          "strict": false,
          "lspServers": {
            "intelephense": {
              "command": "intelephense",
              "args": [
                "--stdio"
              ],
              "extensionToLanguage": {
                ".php": "php"
              }
            }
          },
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install php-lsp@claude-plugins-official"
          ]
        },
        {
          "name": "swift-lsp",
          "description": "Swift language server (SourceKit-LSP) for code intelligence",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/swift-lsp",
          "category": "development",
          "strict": false,
          "lspServers": {
            "sourcekit-lsp": {
              "command": "sourcekit-lsp",
              "extensionToLanguage": {
                ".swift": "swift"
              }
            }
          },
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install swift-lsp@claude-plugins-official"
          ]
        },
        {
          "name": "kotlin-lsp",
          "description": "Kotlin language server for code intelligence",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/kotlin-lsp",
          "category": "development",
          "strict": false,
          "lspServers": {
            "kotlin-lsp": {
              "command": "kotlin-lsp",
              "args": [
                "--stdio"
              ],
              "extensionToLanguage": {
                ".kt": "kotlin",
                ".kts": "kotlin"
              },
              "startupTimeout": 120000
            }
          },
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install kotlin-lsp@claude-plugins-official"
          ]
        },
        {
          "name": "csharp-lsp",
          "description": "C# language server for code intelligence",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/csharp-lsp",
          "category": "development",
          "strict": false,
          "lspServers": {
            "csharp-ls": {
              "command": "csharp-ls",
              "extensionToLanguage": {
                ".cs": "csharp"
              }
            }
          },
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install csharp-lsp@claude-plugins-official"
          ]
        },
        {
          "name": "jdtls-lsp",
          "description": "Java language server (Eclipse JDT.LS) for code intelligence",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/jdtls-lsp",
          "category": "development",
          "strict": false,
          "lspServers": {
            "jdtls": {
              "command": "jdtls",
              "extensionToLanguage": {
                ".java": "java"
              },
              "startupTimeout": 120000
            }
          },
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install jdtls-lsp@claude-plugins-official"
          ]
        },
        {
          "name": "lua-lsp",
          "description": "Lua language server for code intelligence",
          "version": "1.0.0",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/lua-lsp",
          "category": "development",
          "strict": false,
          "lspServers": {
            "lua": {
              "command": "lua-language-server",
              "extensionToLanguage": {
                ".lua": "lua"
              }
            }
          },
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install lua-lsp@claude-plugins-official"
          ]
        },
        {
          "name": "agent-sdk-dev",
          "description": "Development kit for working with the Claude Agent SDK",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/agent-sdk-dev",
          "category": "development",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/agent-sdk-dev",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install agent-sdk-dev@claude-plugins-official"
          ]
        },
        {
          "name": "pr-review-toolkit",
          "description": "Comprehensive PR review agents specializing in comments, tests, error handling, type design, code quality, and code simplification",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/pr-review-toolkit",
          "category": "productivity",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/pr-review-toolkit",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install pr-review-toolkit@claude-plugins-official"
          ]
        },
        {
          "name": "commit-commands",
          "description": "Commands for git commit workflows including commit, push, and PR creation",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/commit-commands",
          "category": "productivity",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/commit-commands",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install commit-commands@claude-plugins-official"
          ]
        },
        {
          "name": "feature-dev",
          "description": "Comprehensive feature development workflow with specialized agents for codebase exploration, architecture design, and quality review",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/feature-dev",
          "category": "development",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/feature-dev",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install feature-dev@claude-plugins-official"
          ]
        },
        {
          "name": "security-guidance",
          "description": "Security reminder hook that warns about potential security issues when editing files, including command injection, XSS, and unsafe code patterns",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/security-guidance",
          "category": "security",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/security-guidance",
          "categories": [
            "security"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install security-guidance@claude-plugins-official"
          ]
        },
        {
          "name": "code-review",
          "description": "Automated code review for pull requests using multiple specialized agents with confidence-based scoring to filter false positives",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/code-review",
          "category": "productivity",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/code-review",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install code-review@claude-plugins-official"
          ]
        },
        {
          "name": "code-simplifier",
          "description": "Agent that simplifies and refines code for clarity, consistency, and maintainability while preserving functionality. Focuses on recently modified code.",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/code-simplifier",
          "category": "productivity",
          "homepage": "https://github.com/anthropics/claude-plugins-official/tree/main/plugins/code-simplifier",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install code-simplifier@claude-plugins-official"
          ]
        },
        {
          "name": "explanatory-output-style",
          "description": "Adds educational insights about implementation choices and codebase patterns (mimics the deprecated Explanatory output style)",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/explanatory-output-style",
          "category": "learning",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/explanatory-output-style",
          "categories": [
            "learning"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install explanatory-output-style@claude-plugins-official"
          ]
        },
        {
          "name": "learning-output-style",
          "description": "Interactive learning mode that requests meaningful code contributions at decision points (mimics the unshipped Learning output style)",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/learning-output-style",
          "category": "learning",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/learning-output-style",
          "categories": [
            "learning"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install learning-output-style@claude-plugins-official"
          ]
        },
        {
          "name": "frontend-design",
          "description": "Create distinctive, production-grade frontend interfaces with high design quality. Generates creative, polished code that avoids generic AI aesthetics.",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/frontend-design",
          "category": "development",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/frontend-design",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install frontend-design@claude-plugins-official"
          ]
        },
        {
          "name": "artifact",
          "description": "Creates interactive HTML artifacts — self-contained single-file explorers with visual controls, live preview, and prompt output with copy button. Includes templates for design playgrounds, data explorers, concept maps, and writing tools.",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/artifact",
          "category": "development",
          "homepage": "https://github.com/anthropics/claude-plugins-official/tree/main/plugins/artifact",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install artifact@claude-plugins-official"
          ]
        },
        {
          "name": "ralph-loop",
          "description": "Interactive self-referential AI loops for iterative development, implementing the Ralph Wiggum technique. Claude works on the same task repeatedly, seeing its previous work, until completion.",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/ralph-loop",
          "category": "development",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/ralph-loop",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install ralph-loop@claude-plugins-official"
          ]
        },
        {
          "name": "hookify",
          "description": "Easily create custom hooks to prevent unwanted behaviors by analyzing conversation patterns or from explicit instructions. Define rules via simple markdown files.",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/hookify",
          "category": "productivity",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/hookify",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install hookify@claude-plugins-official"
          ]
        },
        {
          "name": "plugin-dev",
          "description": "Comprehensive toolkit for developing Claude Code plugins. Includes 7 expert skills covering hooks, MCP integration, commands, agents, and best practices. AI-assisted plugin creation and validation.",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/plugin-dev",
          "category": "development",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/plugins/plugin-dev",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install plugin-dev@claude-plugins-official"
          ]
        },
        {
          "name": "claude-code-setup",
          "description": "Analyze codebases and recommend tailored Claude Code automations such as hooks, skills, MCP servers, and subagents.",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/claude-code-setup",
          "category": "productivity",
          "homepage": "https://github.com/anthropics/claude-plugins-official/tree/main/plugins/claude-code-setup",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install claude-code-setup@claude-plugins-official"
          ]
        },
        {
          "name": "claude-md-management",
          "description": "Tools to maintain and improve CLAUDE.md files - audit quality, capture session learnings, and keep project memory current.",
          "author": {
            "name": "Anthropic",
            "email": "support@anthropic.com"
          },
          "source": "./plugins/claude-md-management",
          "category": "productivity",
          "homepage": "https://github.com/anthropics/claude-plugins-official/tree/main/plugins/claude-md-management",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install claude-md-management@claude-plugins-official"
          ]
        },
        {
          "name": "greptile",
          "description": "AI-powered codebase search and understanding. Query your repositories using natural language to find relevant code, understand dependencies, and get contextual answers about your codebase architecture.",
          "category": "development",
          "source": "./external_plugins/greptile",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/greptile",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install greptile@claude-plugins-official"
          ]
        },
        {
          "name": "serena",
          "description": "Semantic code analysis MCP server providing intelligent code understanding, refactoring suggestions, and codebase navigation through language server protocol integration.",
          "category": "development",
          "source": "./external_plugins/serena",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/serena",
          "tags": [
            "community-managed"
          ],
          "categories": [
            "community-managed",
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install serena@claude-plugins-official"
          ]
        },
        {
          "name": "playwright",
          "description": "Browser automation and end-to-end testing MCP server by Microsoft. Enables Claude to interact with web pages, take screenshots, fill forms, click elements, and perform automated browser testing workflows.",
          "category": "testing",
          "source": "./external_plugins/playwright",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/playwright",
          "categories": [
            "testing"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install playwright@claude-plugins-official"
          ]
        },
        {
          "name": "github",
          "description": "Official GitHub MCP server for repository management. Create issues, manage pull requests, review code, search repositories, and interact with GitHub's full API directly from Claude Code.",
          "category": "productivity",
          "source": "./external_plugins/github",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/github",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install github@claude-plugins-official"
          ]
        },
        {
          "name": "supabase",
          "description": "Supabase MCP integration for database operations, authentication, storage, and real-time subscriptions. Manage your Supabase projects, run SQL queries, and interact with your backend directly.",
          "category": "database",
          "source": "./external_plugins/supabase",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/supabase",
          "categories": [
            "database"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install supabase@claude-plugins-official"
          ]
        },
        {
          "name": "atlassian",
          "description": "Connect to Atlassian products including Jira and Confluence. Search and create issues, access documentation, manage sprints, and integrate your development workflow with Atlassian's collaboration tools.",
          "category": "productivity",
          "source": {
            "source": "url",
            "url": "https://github.com/atlassian/atlassian-mcp-server.git"
          },
          "homepage": "https://github.com/atlassian/atlassian-mcp-server",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install atlassian@claude-plugins-official"
          ]
        },
        {
          "name": "laravel-boost",
          "description": "Laravel development toolkit MCP server. Provides intelligent assistance for Laravel applications including Artisan commands, Eloquent queries, routing, migrations, and framework-specific code generation.",
          "category": "development",
          "source": "./external_plugins/laravel-boost",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/laravel-boost",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install laravel-boost@claude-plugins-official"
          ]
        },
        {
          "name": "figma",
          "description": "Figma design platform integration. Access design files, extract component information, read design tokens, and translate designs into code. Bridge the gap between design and development workflows.",
          "category": "design",
          "source": {
            "source": "url",
            "url": "https://github.com/figma/mcp-server-guide.git"
          },
          "homepage": "https://github.com/figma/mcp-server-guide",
          "categories": [
            "design"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install figma@claude-plugins-official"
          ]
        },
        {
          "name": "asana",
          "description": "Asana project management integration. Create and manage tasks, search projects, update assignments, track progress, and integrate your development workflow with Asana's work management platform.",
          "category": "productivity",
          "source": "./external_plugins/asana",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/asana",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install asana@claude-plugins-official"
          ]
        },
        {
          "name": "linear",
          "description": "Linear issue tracking integration. Create issues, manage projects, update statuses, search across workspaces, and streamline your software development workflow with Linear's modern issue tracker.",
          "category": "productivity",
          "source": "./external_plugins/linear",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/linear",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install linear@claude-plugins-official"
          ]
        },
        {
          "name": "Notion",
          "description": "Notion workspace integration. Search pages, create and update documents, manage databases, and access your team's knowledge base directly from Claude Code for seamless documentation workflows.",
          "category": "productivity",
          "source": {
            "source": "url",
            "url": "https://github.com/makenotion/claude-code-notion-plugin.git"
          },
          "homepage": "https://github.com/makenotion/claude-code-notion-plugin",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install Notion@claude-plugins-official"
          ]
        },
        {
          "name": "gitlab",
          "description": "GitLab DevOps platform integration. Manage repositories, merge requests, CI/CD pipelines, issues, and wikis. Full access to GitLab's comprehensive DevOps lifecycle tools.",
          "category": "productivity",
          "source": "./external_plugins/gitlab",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/gitlab",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install gitlab@claude-plugins-official"
          ]
        },
        {
          "name": "sentry",
          "description": "Sentry error monitoring integration. Access error reports, analyze stack traces, search issues by fingerprint, and debug production errors directly from your development environment.",
          "category": "monitoring",
          "source": {
            "source": "url",
            "url": "https://github.com/getsentry/sentry-for-claude.git"
          },
          "homepage": "https://github.com/getsentry/sentry-for-claude/tree/main",
          "categories": [
            "monitoring"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install sentry@claude-plugins-official"
          ]
        },
        {
          "name": "slack",
          "description": "Slack workspace integration. Search messages, access channels, read threads, and stay connected with your team's communications while coding. Find relevant discussions and context quickly.",
          "category": "productivity",
          "source": "./external_plugins/slack",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/slack",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install slack@claude-plugins-official"
          ]
        },
        {
          "name": "vercel",
          "description": "Vercel deployment platform integration. Manage deployments, check build status, access logs, configure domains, and control your frontend infrastructure directly from Claude Code.",
          "category": "deployment",
          "source": {
            "source": "url",
            "url": "https://github.com/vercel/vercel-deploy-claude-code-plugin.git"
          },
          "homepage": "https://github.com/vercel/vercel-deploy-claude-code-plugin",
          "categories": [
            "deployment"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install vercel@claude-plugins-official"
          ]
        },
        {
          "name": "stripe",
          "description": "Stripe development plugin for Claude",
          "category": "development",
          "source": "./external_plugins/stripe",
          "homepage": "https://github.com/stripe/ai/tree/main/providers/claude/plugin",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install stripe@claude-plugins-official"
          ]
        },
        {
          "name": "firebase",
          "description": "Google Firebase MCP integration. Manage Firestore databases, authentication, cloud functions, hosting, and storage. Build and manage your Firebase backend directly from your development workflow.",
          "category": "database",
          "source": "./external_plugins/firebase",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/firebase",
          "categories": [
            "database"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install firebase@claude-plugins-official"
          ]
        },
        {
          "name": "context7",
          "description": "Upstash Context7 MCP server for up-to-date documentation lookup. Pull version-specific documentation and code examples directly from source repositories into your LLM context.",
          "category": "development",
          "source": "./external_plugins/context7",
          "homepage": "https://github.com/anthropics/claude-plugins-public/tree/main/external_plugins/context7",
          "tags": [
            "community-managed"
          ],
          "categories": [
            "community-managed",
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install context7@claude-plugins-official"
          ]
        },
        {
          "name": "pinecone",
          "description": "Pinecone vector database integration. Streamline your Pinecone development with powerful tools for managing vector indexes, querying data, and rapid prototyping. Use slash commands like /quickstart to generate AGENTS.md files and initialize Python projects and /query to quickly explore indexes. Access the Pinecone MCP server for creating, describing, upserting and querying indexes with Claude. Perfect for developers building semantic search, RAG applications, recommendation systems, and other vector-based applications with Pinecone.",
          "category": "database",
          "source": {
            "source": "url",
            "url": "https://github.com/pinecone-io/pinecone-claude-code-plugin.git"
          },
          "homepage": "https://github.com/pinecone-io/pinecone-claude-code-plugin",
          "categories": [
            "database"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install pinecone@claude-plugins-official"
          ]
        },
        {
          "name": "huggingface-skills",
          "description": "Build, train, evaluate, and use open source AI models, datasets, and spaces.",
          "category": "development",
          "source": {
            "source": "url",
            "url": "https://github.com/huggingface/skills.git"
          },
          "homepage": "https://github.com/huggingface/skills.git",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install huggingface-skills@claude-plugins-official"
          ]
        },
        {
          "name": "circleback",
          "description": "Circleback conversational context integration. Search and access meetings, emails, calendar events, and more.",
          "category": "productivity",
          "source": {
            "source": "url",
            "url": "https://github.com/circlebackai/claude-code-plugin.git"
          },
          "homepage": "https://github.com/circlebackai/claude-code-plugin.git",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install circleback@claude-plugins-official"
          ]
        },
        {
          "name": "superpowers",
          "description": "Superpowers teaches Claude brainstorming, subagent driven development with built in code review, systematic debugging, and red/green TDD. Additionally, it teaches Claude how to author and test new skills.",
          "category": "development",
          "source": {
            "source": "url",
            "url": "https://github.com/obra/superpowers.git"
          },
          "homepage": "https://github.com/obra/superpowers.git",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install superpowers@claude-plugins-official"
          ]
        },
        {
          "name": "posthog",
          "description": "Connect Claude Code to your PostHog analytics platform. Query insights, manage feature flags, run A/B experiments, track errors, and analyze LLM costs all through natural language. The plugin provides 10 slash commands for common workflows and full access to PostHog's MCP tools. Ask questions like \"What are my top errors?\" or \"Create a feature flag for 50% of users\" and Claude handles the API calls. Supports OAuth authentication, EU and US cloud regions, and self-hosted instances.",
          "category": "monitoring",
          "source": {
            "source": "url",
            "url": "https://github.com/PostHog/posthog-for-claude.git"
          },
          "homepage": "https://github.com/PostHog/posthog-for-claude.git",
          "categories": [
            "monitoring"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install posthog@claude-plugins-official"
          ]
        },
        {
          "name": "coderabbit",
          "description": "Your code review partner. CodeRabbit provides external validation using a specialized AI architecture and 40+ integrated static analyzers—offering a different perspective that catches bugs, security vulnerabilities, logic errors, and edge cases. Context-aware analysis via AST parsing and codegraph relationships. Automatically incorporates CLAUDE.md and project coding guidelines into reviews. Useful after writing or modifying code, before commits, when implementing complex or security-sensitive logic, or when a second opinion would increase confidence in the changes. Returns specific findings with suggested fixes that can be applied immediately. Free to use.",
          "category": "productivity",
          "source": {
            "source": "url",
            "url": "https://github.com/coderabbitai/claude-plugin.git"
          },
          "homepage": "https://github.com/coderabbitai/claude-plugin.git",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add anthropics/claude-plugins-official",
            "/plugin install coderabbit@claude-plugins-official"
          ]
        }
      ]
    }
  ]
}