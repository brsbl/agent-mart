{
  "author": {
    "id": "packit",
    "display_name": "Packit",
    "avatar_url": "https://avatars.githubusercontent.com/u/46870917?v=4"
  },
  "marketplaces": [
    {
      "name": "packit-internal-ai-workflows",
      "version": null,
      "description": "Review downstream Packit dist-git PRs",
      "repo_full_name": "packit/internal-ai-workflows",
      "repo_url": "https://github.com/packit/internal-ai-workflows",
      "repo_description": "Internal AI tools, workflows for helping to run Packit",
      "signals": {
        "stars": 0,
        "forks": 2,
        "pushed_at": "2026-02-02T15:19:56Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n    \"name\": \"packit-internal-ai-workflows\",\n    \"owner\": {\n        \"name\": \"Packit\"\n    },\n    \"plugins\": [\n        {\n            \"name\": \"packit-distgit-reviewer\",\n            \"source\": \"./packit-distgit-reviewer/\",\n            \"description\": \"Review downstream Packit dist-git PRs\"\n        }\n    ]\n}\n",
        "README.md": "# Internal Packit AI Workflows\n\nAI-powered workflows for Packit project maintenance tasks, integrated with Claude Code.\n\n## Overview\n\nThis repository contains Claude Code plugins that automate various Packit project maintenance tasks. Each plugin is self-contained with its own documentation, dependencies, and installation instructions.\n\n## Prerequisites\n\n- [Claude Code CLI](https://claude.com/claude-code) installed and configured (Follow Red Hat documentation for details)\n- Python 3.8 or later\n\nOnce you fire up your Claude Code, you can enable this local repository as a marketplace:\n```\n/plugin marketplace add ./\n```\n\nYou can then verify in `/plugin` that the plugin is enabled and can be used:\n```\n/plugin\n\n Plugins  Discover  [Installed]  Marketplaces  (←/→ or tab to cycle)\n\n packit-distgit-reviewer @ inline\n Scope: user\n Version: 0.1.0\n Review and merge Fedora dist-git PRs for Packit projects\n\n Author: Packit team\n Status: Enabled\n```\n\nIt's honestly unclear to me how exactly this works, alternatively you can tell claude to load the plugin of your choice while launching it:\n```\n$ claude --plugin-dir ./packit-distgit-reviewer\n```\n\n## Available Plugins\n\n### packit-distgit-reviewer\n\nReview and merge Fedora dist-git pull requests created by Packit automation.\n\n**Command:** `/review-fedora-distgit-prs`\n\n**Quick Start:**\n\n```bash\n# Install plugin dependencies\ncd packit-distgit-reviewer\npip install -r requirements.txt\n```\n\n**Usage:**\n\n```\n/packit-distgit-reviewer:review-fedora-distgit-prs packit 1.11.1 f42\n```\n\n**What it does:**\n- Fetches and analyzes 4 PRs created by Packit automation\n- Reviews spec file changes, sources, and checksums\n- Monitors CI test results\n- Provides structured review and recommendations\n- Guides you through merging/closing PRs\n\n**Documentation:** See [packit-distgit-reviewer/README.md](packit-distgit-reviewer/README.md) for detailed documentation.\n",
        "packit-distgit-reviewer/README.md": "# Packit Dist-Git Reviewer Plugin\n\nClaude Code plugin for reviewing and merging Fedora dist-git pull requests created by Packit automation.\n\n## Overview\n\nThis plugin helps Packit maintainers review downstream Fedora dist-git PRs created during the release process. For each Fedora dist-git branch, Packit creates 4 pull requests:\n1. Production Packit using `propose_downstream` job\n2. Production Packit using `pull_from_upstream` job\n3. Staging Packit using `propose_downstream` job\n4. Staging Packit using `pull_from_upstream` job\n\nThe plugin analyzes all 4 PRs, compares them for consistency, reviews spec file changes, validates CI test results, and guides you through merging the correct PR (typically staging `pull_from_upstream`) and closing the others.\n\n## Installation\n\n### 1. Install Dependencies\n\nFrom the plugin directory:\n\n```bash\ncd packit-distgit-reviewer\npip install -r requirements.txt\n```\n\n### 2. Set Up Authentication\n\nThe plugin requires a Fedora dist-git API token. Two configuration methods are supported:\n\n**Option 1: Use existing Packit configuration (Recommended)**\n\nIf you have `~/.config/packit.yaml` with a Pagure token, it will be automatically used:\n\n```yaml\nauthentication:\n  pagure:\n    token: YOUR_TOKEN_HERE\n    instance_url: https://src.fedoraproject.org\n```\n\n**Option 2: Environment variable**\n\n```bash\nexport FEDORA_DISTGIT_TOKEN=\"your-token-here\"\n```\n\n**Creating a new token:**\n\n1. Visit https://src.fedoraproject.org/settings/token/new\n2. Create a token with appropriate permissions\n3. Configure using Option 1 or Option 2 above\n\n### 3. Enable the Plugin\n\nThe plugin is automatically available in Claude Code once the symlink is created in the root `.claude/commands/` directory.\n\n## Usage\n\n### Command: `/review-fedora-distgit-prs`\n\nReview and merge Fedora dist-git PRs for a specific package, version, and branch.\n\n**Syntax:**\n\n```\n/packit-distgit-reviewer:review-fedora-distgit-prs <PACKAGE> <VERSION> <DIST_GIT_BRANCH>\n```\n\n**Example:**\n\n```\n/packit-distgit-reviewer:review-fedora-distgit-prs packit 1.11.1 f42\n```\n\n**Supported packages:**\n- `packit`\n- `python-ogr`\n- `python-specfile`\n\n### What the Command Does\n\n1. **Fetches PR information** - Retrieves all 4 PRs created for the specified version and branch\n2. **Analyzes changes** - Reviews spec file updates, source checksums, changelog entries\n3. **Monitors CI tests** - Waits for all CI tests to complete and analyzes results\n4. **Compares PRs** - Validates consistency across all 4 PRs\n5. **Provides recommendations** - Suggests which PR to merge and which to close\n6. **Executes actions** - Merges and closes PRs after user confirmation\n\n### Review Checklist\n\nThe plugin performs comprehensive checks including:\n\n- Version and release number updates\n- Changelog format and content\n- Source file checksums\n- Testing plan updates\n- Upstream reference validation\n- Fedora packaging guidelines compliance\n- CI test status and results\n- PR consistency across all 4 PRs\n\n## Helper Script\n\nThe plugin uses `scripts/packit-distgit-updater.py` to interact with Fedora dist-git. You can also use it directly:\n\n**Print PR information:**\n```bash\n./scripts/packit-distgit-updater.py print-pr <PACKAGE> <VERSION> <DIST_GIT_BRANCH>\n```\n\n**Merge a PR:**\n```bash\n./scripts/packit-distgit-updater.py merge <PACKAGE> <PR_ID>\n```\n\n**Close a PR:**\n```bash\n./scripts/packit-distgit-updater.py close <PACKAGE> <PR_ID>\n```\n\n## Known Issues\n\nThe workflow waits for all CI checks to complete. Currently, some Fedora CI checks (rpmlint, rpminspect) may show as pending even when finished due to a status sync issue.\n\n**Workaround:** Inspect the checks manually and tell Claude to proceed:\n\n```\nIgnore the pending CI results, they are complete and passed but statuses were not properly synced. Proceed with rest of the steps.\n```\n\n## Directory Structure\n\n```\npackit-distgit-reviewer/\n├── .claude/\n│   └── commands/\n│       └── review-fedora-distgit-prs.md   # Claude Code command definition\n├── scripts/\n│   └── packit-distgit-updater.py          # Python helper script\n├── requirements.txt                       # Plugin dependencies\n├── plugin.yaml                            # Plugin metadata\n└── README.md                              # This file\n```\n\n## Contributing\n\nThis plugin is part of the Packit internal AI workflows repository. For issues or contributions, please refer to the main repository documentation.\n\n## License\n\nSee the main repository for license information.\n"
      },
      "plugins": [
        {
          "name": "packit-distgit-reviewer",
          "source": "./packit-distgit-reviewer/",
          "description": "Review downstream Packit dist-git PRs",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add packit/internal-ai-workflows",
            "/plugin install packit-distgit-reviewer@packit-internal-ai-workflows"
          ]
        }
      ]
    }
  ]
}