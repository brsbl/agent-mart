{
  "author": {
    "id": "iknite",
    "display_name": "Enrique Paredes",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/745710?u=533c2f71832011ecfc3238434f91ed343213929c&v=4",
    "url": "https://github.com/iknite",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 6,
      "total_skills": 1,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "iknite-cc-marketplace",
      "version": null,
      "description": "Plugin for store Claude Code context in a detached branch inside the repository project, using worktrees",
      "owner_info": {
        "name": "iknite",
        "email": "iknite@gmail.com"
      },
      "keywords": [],
      "repo_full_name": "iknite/claude-code-marketplace",
      "repo_url": "https://github.com/iknite/claude-code-marketplace",
      "repo_description": "PoC to test nesting worktrees to allow upper context life-cycle also inside the repository",
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2025-12-20T16:03:16Z",
        "created_at": "2025-12-17T20:07:26Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 677
        },
        {
          "path": "worktree-context",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 589
        },
        {
          "path": "worktree-context/README.md",
          "type": "blob",
          "size": 4413
        },
        {
          "path": "worktree-context/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/agents/worktree-manager.md",
          "type": "blob",
          "size": 2982
        },
        {
          "path": "worktree-context/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/commands/context-init.md",
          "type": "blob",
          "size": 2610
        },
        {
          "path": "worktree-context/commands/wt-list.md",
          "type": "blob",
          "size": 560
        },
        {
          "path": "worktree-context/commands/wt-new.md",
          "type": "blob",
          "size": 1363
        },
        {
          "path": "worktree-context/commands/wt-pr.md",
          "type": "blob",
          "size": 1544
        },
        {
          "path": "worktree-context/commands/wt-remove.md",
          "type": "blob",
          "size": 728
        },
        {
          "path": "worktree-context/commands/wt-status.md",
          "type": "blob",
          "size": 1928
        },
        {
          "path": "worktree-context/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/skills/context-methodology",
          "type": "tree",
          "size": null
        },
        {
          "path": "worktree-context/skills/context-methodology/SKILL.md",
          "type": "blob",
          "size": 5001
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"iknite-cc-marketplace\",\n  \"owner\": {\n    \"name\": \"iknite\",\n    \"email\": \"iknite@gmail.com\"\n  },\n  \"metadata\": {\n    \"description\": \"Plugin for store Claude Code context in a detached branch inside the repository project, using worktrees\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"worktree-context\",\n      \"source\": \"./worktree-context\",\n      \"description\": \"Bootstrap projects with separation of concerns between AI configuration and source code\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"iknite\"\n      },\n      \"keywords\": [\"worktree\", \"git\", \"context\", \"bootstrap\"],\n      \"category\": \"project-management\"\n    }\n  ]\n}\n",
        "worktree-context/.claude-plugin/plugin.json": "{\n  \"name\": \"worktree-context\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Bootstrap projects with separation of concerns between AI configuration and source code using git worktrees\",\n  \"author\": {\n    \"name\": \"iknite\",\n    \"url\": \"https://github.com/iknite\"\n  },\n  \"repository\": \"https://github.com/iknite/worktree-context-plugin\",\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"worktree\",\n    \"git\",\n    \"context\",\n    \"separation-of-concerns\",\n    \"bootstrap\"\n  ],\n  \"commands\": \"./commands/\",\n  \"agents\": \"./agents/worktree-manager.md\",\n  \"skills\": \"./skills/\",\n  \"hooks\": \"./settings.json\"\n}\n",
        "worktree-context/README.md": "# Worktree Context Plugin for Claude Code\n\nA Claude Code plugin that bootstraps projects with **separation of concerns** between AI configuration and source code using git worktrees.\n\n## Installation\n\n### Project-Level (Recommended)\n\nInstall the plugin into your project's `context` branch so it's stored alongside your AI configuration:\n\n```bash\n# Add the marketplace\n/plugin marketplace add iknite/claude-code-marketplace\n\n# Install to project (stored in .claude/, version controlled)\n/plugin install worktree-context@iknite-cc-marketplace --scope project\n```\n\nThis installs the plugin into your `context` branch's `.claude/` directory, keeping AI tooling separate from your project code.\n\n### Local-Only (Not Shared)\n\n```bash\n# Install locally (gitignored, not shared with team)\n/plugin install worktree-context@iknite-cc-marketplace --scope local\n```\n\n### Global Installation\n\n```bash\n# Install globally (available in all projects)\n/plugin install worktree-context@iknite-cc-marketplace --scope user\n```\n\n### Verify Installation\n\n```\n/worktree-context:wt-list\n/worktree-context:wt-status\n```\n\n## Usage\n\n### Bootstrap a new project\n\n```\n/worktree-context:context-init /path/to/your/repo\n```\n\nThis sets up the complete worktree structure automatically.\n\n### Daily workflow\n\n```bash\n# Check status of all worktrees\n/worktree-context:wt-status\n\n# Create a new feature branch\n/worktree-context:wt-new feature/my-feature\n\n# Work on your feature in worktree/feature/my-feature\n# ... make changes with Claude Code ...\n\n# Create a PR when ready\n/worktree-context:wt-pr feature/my-feature\n\n# Clean up after merge\n/worktree-context:wt-remove feature/my-feature --delete-branch\n```\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `/worktree-context:context-init [path]` | Bootstrap a repo with the context branch methodology |\n| `/worktree-context:wt-new <branch> [base]` | Create a new worktree (auto-detects main/master) |\n| `/worktree-context:wt-list` | List all worktrees |\n| `/worktree-context:wt-status` | Show status: uncommitted changes, unpushed commits, sync state |\n| `/worktree-context:wt-pr <branch> [base]` | Create GitHub PR from a worktree branch |\n| `/worktree-context:wt-remove <branch> [-d]` | Remove worktree, optionally delete branch |\n\n## The Methodology\n\nThis plugin creates a clean separation using **two independent git histories**:\n\n```\nbare-repo/\n└── root/\n    ├── context/              # AI configuration (CLAUDE.md, .claude/)\n    │   ├── .gitignore        # Ignores worktree/**/\n    │   └── worktree/         # All feature worktrees live here\n    │       └── feature/\n    │           └── my-feature/\n    └── main/                 # Default branch (read-only reference)\n```\n\n**Why?**\n- AI config (`CLAUDE.md`, `.claude/`) stays in `context` branch\n- Project code stays in `main`/`master` lineage\n- Feature branches are nested inside `context` but ignored by it\n- Clean project history without AI config noise\n- Each project can have different plugins/configurations in its own `context` branch\n\n## Installation Scopes\n\n| Scope | Location | Shared | Use Case |\n|-------|----------|--------|----------|\n| `project` | `.claude/` | Yes (version controlled) | Team shares same AI config |\n| `local` | `.claude/` | No (gitignored) | Personal tweaks |\n| `user` | `~/.claude/` | No | Available everywhere |\n\n**Recommendation:** Use `--scope project` to keep the plugin in your `context` branch, maintaining the separation of concerns methodology.\n\n## Components\n\n| Component | Purpose |\n|-----------|---------|\n| **Commands** (`.claude/commands/`) | Slash commands for worktree operations |\n| **Hooks** (`.claude/settings.json`) | Guardrails blocking direct edits to `root/main/` |\n| **Agent** (`.claude/agents/`) | `worktree-manager` for complex operations |\n| **Skill** (`.claude/skills/`) | Knowledge base Claude discovers automatically |\n\n## Plugin Management\n\n```bash\n# Update the plugin\n/plugin update worktree-context\n\n# Disable temporarily\n/plugin disable worktree-context@iknite-cc-marketplace\n\n# Uninstall\n/plugin uninstall worktree-context@iknite-cc-marketplace\n```\n\n## Troubleshooting\n\n**Commands not showing up?**\n- Run `/plugin` to check installation status\n- Try `/plugin update worktree-context`\n\n**Need complex worktree operations?**\nAsk Claude: \"Use the worktree-manager agent to help me...\"\n\n---\nwith <3 @iknite\n",
        "worktree-context/agents/worktree-manager.md": "---\nname: worktree-manager\ndescription: Manages git worktrees following the context branch methodology. Use for complex worktree operations like bulk cleanup, migration, or troubleshooting worktree issues.\ntools: Bash, Read, Glob, Grep\nmodel: sonnet\n---\n\n# Worktree Manager Agent\n\nYou are a specialized agent for managing git worktrees following the **context branch methodology**.\n\n## Core Principles\n\n1. **Separation of Concerns**: The `context` branch holds AI configuration (CLAUDE.md, .claude/), while the default branch (main/master) and feature branches hold project code\n2. **Worktree Location**: All code worktrees MUST be inside `worktree/` folder\n3. **Branch Lineage**: Feature branches descend from the default branch (main or master), never from `context`\n4. **No Direct Edits or Access**: Never edit a branch like `root/main/` or `root/master/` in `root/` directly; always use a worktree\n\n\n## Detecting the Default Branch\n\nALWAYS detect the default branch before operations. Never assume `master` or `main`:\n\n```bash\n# Detect default branch\nDEFAULT_BRANCH=$(git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* ')\necho \"Default branch: $DEFAULT_BRANCH\"\n```\n\n## Your Capabilities\n\n### Worktree Operations\n- Create new worktrees with proper structure\n- List and analyze worktree status\n- Clean up stale or merged worktrees\n- Migrate existing worktrees to proper locations\n\n### Troubleshooting\n- Fix broken worktree references\n- Resolve worktree lock issues\n- Repair `.git` file references\n- Handle orphaned worktree directories\n\n### Migration\n- Help migrate existing repos to context branch methodology\n- Convert non-worktree setups to this structure\n- Bulk operations across multiple worktrees\n\n## Standard Commands\n\n```bash\n# Detect default branch first\nDEFAULT_BRANCH=$(git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* ')\n\n# List all worktrees\ngit worktree list\n\n# Create new worktree (using detected default branch)\ngit worktree add -b feature/name worktree/feature/name $DEFAULT_BRANCH\n\n# Remove worktree\ngit worktree remove worktree/feature/name\n\n# Prune stale worktrees\ngit worktree prune\n\n# Check worktree status\ngit worktree list --porcelain\n```\n\n## When Invoked\n\n1. First, detect the default branch (main or master)\n2. Assess the current worktree structure with `git worktree list`\n3. Identify any issues or the specific task needed\n4. Execute operations carefully, confirming destructive actions\n5. Verify the final state matches the methodology\n\n## Safety Rules\n\n- Always detect the default branch before creating worktrees\n- Always confirm before removing worktrees with uncommitted changes\n- Never force-delete branches without checking merge status\n- Preserve the `context` and default branch root worktrees\n- Back up important state before bulk operations\n",
        "worktree-context/commands/context-init.md": "---\ndescription: Initialize context branch methodology on a new or existing repository\nallowed-tools: Bash(git:*), Bash(mkdir:*), Bash(ls:*), Write, Edit\nargument-hint: [repo-path]\n---\n\n# Initialize Context Branch Methodology\n\nSet up the separation of concerns structure for AI context and project code.\n\n## Target\nRepository at: `${1:-.}` (current directory if not specified)\n\n## Standard Structure\n\nAll worktrees live inside a `/root` folder within the bare repository:\n\n```\nbare-repo/\n└── root/\n    ├── context/              # context branch (AI configuration)\n    │   ├── CLAUDE.md\n    │   ├── .claude/\n    │   ├── .gitignore        # Contains: worktree/**/\n    │   └── worktree/         # All code worktrees here\n    │       └── feature/...\n    └── master/               # master/main branch (direct access)\n```\n\n## Task\n\n### Step 1: Detect repository type\n- Check if target is a bare repo, regular repo, or needs cloning\n- Identify the main branch name (master or main)\n\n### Step 2: Convert to bare repo structure (if needed)\nIf the repo is not bare:\n```bash\n# Clone as bare\ngit clone --bare <repo-url> <repo-name>\ncd <repo-name>\n```\n\n### Step 3: Create the /root directory structure if not exists\n```bash\nmkdir -p root\n```\n\n### Step 4: Create master/main worktree\n```bash\n# Detect default branch name\nDEFAULT_BRANCH=$(git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* ')\ngit worktree add root/$DEFAULT_BRANCH $DEFAULT_BRANCH\n```\n\n### Step 5: Create orphan context branch and worktree\n```bash\n# Create orphan branch\ngit checkout --orphan context\ngit reset --hard\ngit commit --allow-empty -m \"init: context branch for AI configuration\"\n\n# Add as worktree\ngit worktree add root/context context\n```\n\n### Step 6: Set up context branch structure\nIn `root/context/`, create:\n- `CLAUDE.md` - Basic project instructions template\n- `.gitignore` - With `worktree/**/` to ignore nested worktrees\n- `.claude/` directory for commands, agents, skills\n- `worktree/` directory for code worktrees\n\n### Step 7: Verify setup\n```bash\ngit worktree list\n```\n\nExpected output:\n```\n/path/to/bare-repo              (bare)\n/path/to/bare-repo/root/context [context]\n/path/to/bare-repo/root/master  [master]\n```\n\n## Output\n\nProvide clear next steps:\n1. `cd root/context` to work with AI configuration\n2. Use `/wt-new feature/name` to create feature worktrees\n3. All code work happens in `root/context/worktree/`\n4. Never edit `root/master/` directly - use worktrees instead\n",
        "worktree-context/commands/wt-list.md": "---\ndescription: List all git worktrees with their status\nallowed-tools: Bash(git worktree:*), Bash(git branch:*), Bash(git log:*)\n---\n\n# List Worktrees\n\nShow all worktrees in this repository with their current status.\n\n## Current worktrees\n!`git worktree list`\n\n## Task\nProvide a summary of:\n1. All active worktrees and their branches\n2. Which worktrees are inside `worktree/` (following methodology)\n3. Which worktrees are outside (legacy or root worktrees)\n4. Any worktrees that might need cleanup (merged branches)\n\nFormat the output clearly for the user.\n",
        "worktree-context/commands/wt-new.md": "---\ndescription: Create a new worktree branch from master inside worktree/ folder\nallowed-tools: Bash(git worktree:*), Bash(git branch:*), Bash(git symbolic-ref:*), Bash(ls:*)\nargument-hint: <branch-name> [base-branch]\n---\n\n# Create New Worktree\n\nCreate a new git worktree for branch `$1`.\n\n## Detect default branch\n!`git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || (git branch -l main master 2>/dev/null | head -1 | tr -d '* ')`\n\n## Current worktrees\n!`git worktree list`\n\n## Rules\n1. All worktrees MUST be created inside the `worktree/` folder\n2. Branch names should follow the pattern: `feature/`, `fix/`, `chore/`, etc.\n3. If no base branch is specified, use the repository's default branch (main or master)\n\n## Task\n\n### Step 1: Determine the base branch\n- If `$2` is provided, use it as the base branch\n- Otherwise, detect the default branch using:\n  ```bash\n  git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* '\n  ```\n\n### Step 2: Create the worktree\nFor a new branch:\n```bash\ngit worktree add -b $1 worktree/$1 <base-branch>\n```\n\nIf the branch already exists:\n```bash\ngit worktree add worktree/$1 $1\n```\n\n### Step 3: Verify\nAfter creation, confirm the worktree was created successfully by listing all worktrees.\n",
        "worktree-context/commands/wt-pr.md": "---\ndescription: Create a GitHub PR from a worktree branch\nallowed-tools: Bash(git:*), Bash(gh:*)\nargument-hint: <branch-name> [base-branch]\n---\n\n# Create PR from Worktree\n\nCreate a GitHub Pull Request for branch `$1`.\n\n## Detect default branch\n!`git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || (git branch -l main master 2>/dev/null | head -1 | tr -d '* ')`\n\n## Current status of the branch\n!`cd worktree/$1 2>/dev/null && git status || echo \"Worktree not found at worktree/$1\"`\n\n## Recent commits on this branch\n!`cd worktree/$1 2>/dev/null && git log --oneline -5 || echo \"\"`\n\n## Task\n\n### Step 1: Determine the base branch\n- If `$2` is provided, use it as the PR base\n- Otherwise, detect the default branch (main or master) using:\n  ```bash\n  git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* '\n  ```\n\n### Step 2: Navigate to the worktree\n```bash\ncd worktree/$1\n```\n\n### Step 3: Check for uncommitted changes\nIf any uncommitted changes exist, ask user what to do.\n\n### Step 4: Push the branch\n```bash\ngit push -u origin $1\n```\n\n### Step 5: Create the PR\n```bash\ngh pr create --base <detected-base-branch> --title \"...\" --body \"...\"\n```\n- Title: derive from branch name or recent commits\n- Body: summarize changes with a test plan\n\n## PR Body Template\n```\n## Summary\n<bullet points of changes>\n\n## Test plan\n<how to verify the changes>\n\n---\nGenerated with [Claude Code](https://claude.ai/code)\n```\n",
        "worktree-context/commands/wt-remove.md": "---\ndescription: Remove a worktree and optionally delete its branch\nallowed-tools: Bash(git worktree:*), Bash(git branch:*), Bash(ls:*)\nargument-hint: <branch-name> [--delete-branch]\n---\n\n# Remove Worktree\n\nRemove the worktree for branch `$1`.\n\n## Current worktrees\n!`git worktree list`\n\n## Task\n1. Remove the worktree using: `git worktree remove worktree/$1`\n2. If `--delete-branch` or `-d` is in the arguments, also delete the branch: `git branch -d $1`\n3. If removal fails due to uncommitted changes, inform the user and ask if they want to force removal\n4. After removal, list remaining worktrees to confirm\n\n## Safety\n- Never force remove without user confirmation\n- Warn if the branch has unmerged changes before deleting\n",
        "worktree-context/commands/wt-status.md": "---\ndescription: Show status of all worktrees including pending commits and sync state\nallowed-tools: Bash(git:*), Bash(ls:*)\n---\n\n# Worktree Status\n\nShow the status of all worktrees: context, default branch, and feature branches.\n\n## All worktrees\n!`git worktree list`\n\n## Task\n\nGenerate a comprehensive status report for all worktrees:\n\n### Step 1: Detect default branch\n```bash\nDEFAULT_BRANCH=$(git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* ')\n```\n\n### Step 2: For each worktree, check:\n\n1. **Context branch** (`root/context` or current context location):\n   ```bash\n   git -C <context-path> status --short\n   git -C <context-path> log origin/context..HEAD --oneline 2>/dev/null || echo \"No remote tracking\"\n   ```\n\n2. **Default branch** (`root/$DEFAULT_BRANCH`):\n   ```bash\n   git -C <default-branch-path> status --short\n   git -C <default-branch-path> log origin/${DEFAULT_BRANCH}..HEAD --oneline 2>/dev/null\n   ```\n\n3. **All feature worktrees** (inside `worktree/`):\n   ```bash\n   for dir in worktree/*/*; do\n     if [ -d \"${dir}\" ]; then\n       echo \"=== ${dir} ===\"\n       git -C \"${dir}\" status --short\n       git -C \"${dir}\" log origin/$(git -C \"${dir}\" branch --show-current)..HEAD --oneline 2>/dev/null || echo \"No remote tracking\"\n     fi\n   done\n   ```\n\n### Step 3: Format output as a table\n\nFor each worktree, report:\n| Worktree | Branch | Uncommitted | Unpushed | Behind Remote |\n|----------|--------|-------------|----------|---------------|\n\nWhere:\n- **Uncommitted**: Number of modified/untracked files\n- **Unpushed**: Commits ahead of remote\n- **Behind Remote**: Commits behind remote (needs pull)\n\n### Step 4: Summary\n\nProvide a quick summary:\n- Total worktrees\n- Worktrees with uncommitted changes\n- Worktrees with unpushed commits\n- Worktrees that need pulling\n\nFlag any worktrees that need attention.\n",
        "worktree-context/skills/context-methodology/SKILL.md": "---\nname: context-methodology\ndescription: Knowledge about the context branch methodology for separating AI configuration from project code using git worktrees. Use when users ask about worktree structure, branch organization, or the separation of concerns pattern.\nallowed-tools: Read, Glob, Grep, Bash\n---\n\n# Context Branch Methodology\n\nThis skill provides knowledge about the **context branch methodology** - a pattern for separating AI assistant configuration from project source code using git worktrees.\n\n## The Problem\n\nWhen using AI coding assistants like Claude Code, projects accumulate:\n- `CLAUDE.md` files with instructions\n- `.claude/` directories with settings, commands, agents\n- Custom hooks and configurations\n\nThese files:\n1. Clutter project history with AI-specific commits\n2. Mix tooling concerns with business logic\n3. Create noise in code reviews\n4. May contain sensitive prompts or configurations\n\n## The Solution\n\nUse **two independent git histories** in the same repository:\n\n### Branch Structure\n\n| Branch | Purpose | Contains |\n|--------|---------|----------|\n| `context` | AI configuration | CLAUDE.md, .claude/, settings |\n| `main`/`master` | Project code | Source code, tests, docs |\n| `feature/*` | Development | Feature work (descends from main/master) |\n\n### Directory Layout\n\n```\nbare-repo/\n└── root/\n    ├── context/           # context branch worktree\n    │   ├── CLAUDE.md      # AI instructions\n    │   ├── .claude/       # Commands, agents, skills\n    │   ├── .gitignore     # Contains: worktree/**/\n    │   └── worktree/      # All code worktrees here\n    │       ├── feature/\n    │       │   └── my-feature/  # Feature branch worktree\n    │       └── fix/\n    │           └── bug-123/     # Bugfix branch worktree\n    └── main/              # main/master branch (direct access, read-only)\n```\n\n### Key Insight\n\nThe `context` branch's `.gitignore` contains `worktree/**/`, so:\n- Nested worktrees are invisible to context commits\n- AI config and code remain in separate histories\n- Claude Code runs from `context/`, sees both contexts\n\n## Detecting the Default Branch\n\nRepositories may use either `main` or `master` as their default branch. Always detect it:\n\n```bash\n# Method 1: From remote HEAD (most reliable if remote exists)\ngit symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@'\n\n# Method 2: Check which branch exists locally\ngit branch -l main master 2>/dev/null | head -1 | tr -d '* '\n\n# Method 3: Combined approach\nDEFAULT_BRANCH=$(git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || git branch -l main master 2>/dev/null | head -1 | tr -d '* ')\n```\n\n## Workflow\n\n### Creating a New Feature\n\n```bash\n# From the context worktree\ncd root/context\n\n# Detect default branch\nDEFAULT_BRANCH=$(git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@' || echo \"main\")\n\n# Create feature worktree from default branch\ngit worktree add -b feature/my-feature worktree/feature/my-feature $DEFAULT_BRANCH\n\n# Work in the feature\ncd worktree/feature/my-feature\n# ... make changes ...\n\n# Commit and push\ngit add . && git commit -m \"feat: add feature\"\ngit push -u origin feature/my-feature\n\n# Create PR targeting default branch\ngh pr create --base $DEFAULT_BRANCH\n```\n\n### Updating AI Configuration\n\n```bash\n# From context worktree (root/context)\n# Edit CLAUDE.md or .claude/ files\ngit add .\ngit commit -m \"context: update AI instructions\"\ngit push origin context\n```\n\n## Rules\n\n1. **Never edit `root/main/` or `root/master/` directly** - always use a worktree\n2. **All code worktrees inside `worktree/`** - maintains the separation\n3. **Feature branches from default branch** - not from `context`\n4. **Context branch is orphan** - no shared history with main/master\n5. **PRs target default branch** - context changes stay on context branch\n\n## Benefits\n\n- Clean project history (no AI config commits)\n- Separate concerns (tooling vs code)\n- Team flexibility (share context or keep personal)\n- Easy experimentation (modify AI config without affecting code)\n\n## Common Questions\n\n**Q: How does Claude Code see both contexts?**\nA: Claude runs from the `context/` directory, which contains both the AI config files AND the `worktree/` folder with code. The parent CLAUDE.md applies to nested directories.\n\n**Q: Can I have multiple context branches?**\nA: Yes! You could have `context-personal` and `context-team` for different configurations.\n\n**Q: What if I need different AI config per feature?**\nA: Each worktree can have its own `.claude/` that overrides or extends the parent context.\n\n**Q: How do I migrate an existing repo?**\nA: Use the `/context-init` command or the `worktree-manager` agent to set up the structure.\n\n**Q: Does it work with both main and master?**\nA: Yes! The commands auto-detect the default branch. You can also explicitly specify the base branch as an argument.\n"
      },
      "plugins": [
        {
          "name": "worktree-context",
          "source": "./worktree-context",
          "description": "Bootstrap projects with separation of concerns between AI configuration and source code",
          "version": "1.0.0",
          "author": {
            "name": "iknite"
          },
          "keywords": [
            "worktree",
            "git",
            "context",
            "bootstrap"
          ],
          "category": "project-management",
          "categories": [
            "bootstrap",
            "context",
            "git",
            "project-management",
            "worktree"
          ],
          "install_commands": [
            "/plugin marketplace add iknite/claude-code-marketplace",
            "/plugin install worktree-context@iknite-cc-marketplace"
          ]
        }
      ]
    }
  ]
}