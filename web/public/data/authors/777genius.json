{
  "author": {
    "id": "777genius",
    "display_name": "–ò–ª–∏—è",
    "avatar_url": "https://avatars.githubusercontent.com/u/13103045?u=7b8c77975cf33d0c2adc26c70af76bdad06dba73&v=4"
  },
  "marketplaces": [
    {
      "name": "claude-notifications-go",
      "version": null,
      "description": "Smart notifications marketplace for Claude Code (Go implementation)",
      "repo_full_name": "777genius/claude-notifications-go",
      "repo_url": "https://github.com/777genius/claude-notifications-go",
      "repo_description": "üîî Cross-platform smart notifications plugin for Claude Code. 6 different types. Instant. Analyze context. Zero dependencies. webhooks. Easy installation.",
      "signals": {
        "stars": 219,
        "forks": 11,
        "pushed_at": "2026-01-28T12:16:31Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n    \"name\": \"claude-notifications-go\",\n    \"owner\": {\n        \"name\": \"777genius\",\n        \"email\": \"[email protected]\"\n    },\n    \"metadata\": {\n        \"description\": \"Smart notifications marketplace for Claude Code (Go implementation)\",\n        \"version\": \"1.14.0\"\n    },\n    \"plugins\": [{\n        \"name\": \"claude-notifications-go\",\n        \"source\": \"./\",\n        \"description\": \"Smart notifications for Claude Code task statuses (Go implementation)\",\n        \"version\": \"1.14.0\",\n        \"author\": {\n            \"name\": \"777genius\",\n            \"email\": \"[email protected]\"\n        },\n        \"repository\": \"https://github.com/777genius/claude-notifications-go\",\n        \"license\": \"MIT\",\n        \"keywords\": [\n            \"notifications\",\n            \"alerts\",\n            \"productivity\",\n            \"go\",\n            \"hooks\"\n        ],\n        \"category\": \"productivity\",\n        \"tags\": [\"notifications\", \"hooks\", \"alerts\", \"go\"]\n    }]\n}",
        ".claude-plugin/plugin.json": "{\n    \"name\": \"claude-notifications-go\",\n    \"version\": \"1.14.0\",\n    \"description\": \"Smart notifications for Claude Code task statuses (Go implementation)\",\n    \"author\": {\n        \"name\": \"777genius\",\n        \"email\": \"[email protected]\"\n    },\n    \"license\": \"MIT\",\n    \"repository\": \"https://github.com/777genius/claude-notifications-go\",\n    \"keywords\": [\"notifications\", \"alerts\", \"productivity\", \"go\"],\n    \"commands\": [\n        \"./commands/notifications-init.md\",\n        \"./commands/notifications-settings.md\"\n    ]\n}\n",
        "README.md": "# Claude Notifications (plugin)\n\n[![Ubuntu CI](https://github.com/777genius/claude-notifications-go/workflows/Ubuntu%20CI/badge.svg)](https://github.com/777genius/claude-notifications-go/actions)\n[![macOS CI](https://github.com/777genius/claude-notifications-go/workflows/macOS%20CI/badge.svg)](https://github.com/777genius/claude-notifications-go/actions)\n[![Windows CI](https://github.com/777genius/claude-notifications-go/workflows/Windows%20CI/badge.svg)](https://github.com/777genius/claude-notifications-go/actions)\n[![Go Report Card](https://goreportcard.com/badge/github.com/777genius/claude-notifications-go)](https://goreportcard.com/report/github.com/777genius/claude-notifications-go)\n[![codecov](https://codecov.io/gh/777genius/claude-notifications-go/branch/main/graph/badge.svg)](https://codecov.io/gh/777genius/claude-notifications-go)\n\n<img width=\"250\" height=\"350\" alt=\"image\" src=\"https://github.com/user-attachments/assets/e7aa6d8e-5d28-48f7-bafe-ad696857b938\" />\n<img width=\"350\" height=\"239\" alt=\"image\" src=\"https://github.com/user-attachments/assets/42b7a306-f56f-4499-94cf-f3d573416b6d\" />\n<img width=\"220\" alt=\"image\" src=\"https://github.com/user-attachments/assets/4b5929d8-1a51-4a15-a3d5-dda5482554cc\" />\n\n\nSmart notifications for Claude Code with click-to-focus, git branch display, and webhook integrations.\n\n## Table of Contents\n\n  - [Supported Notification Types](#supported-notification-types)\n  - [Installation](#installation)\n    - [Prerequisites](#prerequisites)\n    - [Install from GitHub](#install-from-github)\n    - [Updating](#updating)\n  - [Features](#features)\n    - [üñ•Ô∏è Cross-Platform Support](#Ô∏è-cross-platform-support)\n    - [üß† Smart Detection](#-smart-detection)\n    - [üîî Flexible Notifications](#-flexible-notifications)\n    - [üîä Audio Customization](#-audio-customization)\n    - [üåê Enterprise-Grade Webhooks](#-enterprise-grade-webhooks)\n    - [üõ†Ô∏è Developer Experience](#Ô∏è-developer-experience)\n    - [ü§ù Plugin Compatibility](#-plugin-compatibility)\n  - [Platform Support](#platform-support)\n    - [macOS Click-to-Focus](#macos-click-to-focus)\n  - [Quick Start](#quick-start)\n    - [Interactive Setup (Recommended)](#interactive-setup-recommended)\n    - [Manual Configuration](#manual-configuration)\n    - [Sound Options](#sound-options)\n    - [Test Sound Playback](#test-sound-playback)\n  - [Architecture](#architecture)\n  - [Usage](#usage)\n  - [Development](#development)\n    - [Local installation for development](#local-installation-for-development)\n    - [Building binaries](#building-binaries)\n  - [Testing](#testing)\n  - [Documentation](#documentation)\n  - [License](#license)\n\n## Supported Notification Types\n\n| Status | Icon | Description | Trigger |\n|--------|------|-------------|---------|\n| Task Complete | ‚úÖ | Main task completed | Stop/SubagentStop hooks (state machine detects active tools like Write/Edit/Bash, or ExitPlanMode followed by tool usage) |\n| Review Complete | üîç | Code review finished | Stop/SubagentStop hooks (state machine detects only read-like tools: Read/Grep/Glob with no active tools, plus long text response >200 chars) |\n| Question | ‚ùì | Claude has a question | PreToolUse hook (AskUserQuestion) OR Notification hook |\n| Plan Ready | üìã | Plan ready for approval | PreToolUse hook (ExitPlanMode) |\n| Session Limit Reached | ‚è±Ô∏è | Session limit reached | Stop/SubagentStop hooks (state machine detects \"Session limit reached\" text in last 3 assistant messages) |\n| API Error: 401 | üî¥ | Authentication expired | Stop/SubagentStop hooks (state machine detects \"API Error: 401\" and \"Please run /login\" in last 3 assistant messages) |\n\n\n## Installation\n\n### Prerequisites\n\n- Claude Code (tested on v2.0.15)\n- **Windows users:** Git Bash (included with [Git for Windows](https://git-scm.com/download/win)) or WSL\n- **macOS/Linux users:** No additional software required\n\n### Install from GitHub\n\n```bash\n# 1) Add marketplace\n/plugin marketplace add 777genius/claude-notifications-go\n# 2) Install plugin\n/plugin install claude-notifications-go@claude-notifications-go\n# 3) Restart Claude Code\n# 4) Init\n/claude-notifications-go:notifications-init\n\n# Optional\n# Configure sounds and settings\n/claude-notifications-go:notifications-settings\n```\n\n**That's it!**\n\n1. `/claude-notifications-go:notifications-init` downloads the correct binary for your platform (macOS/Linux/Windows) from GitHub Releases\n2. `/claude-notifications-go:notifications-settings` guides you through sound configuration with an interactive wizard\n\nThe binary is downloaded once and cached locally. You can re-run `/claude-notifications-go:notifications-settings` anytime to reconfigure.\n\n### Updating\n\nTo update to the latest version:\n\n1. Run `/plugin`, select **Marketplaces**, choose `claude-notifications-go`, then select **Update marketplace**\n2. Select **Installed**, choose `claude-notifications-go`, then select **Update now**\n3. Run `/claude-notifications-go:notifications-init` to download new binaries\n4. Restart Claude Code to apply hook changes\n\nYour `config.json` settings will be preserved during the update.\n\n\n## Features\n\n### üñ•Ô∏è Cross-Platform Support\n- **macOS** (Intel & Apple Silicon), **Linux** (x64 & ARM64), **Windows 10+** (x64)\n- Works in PowerShell, CMD, Git Bash, or WSL\n- Pre-built binaries included - no compilation needed\n\n### üß† Smart Detection\n- **Operations count** File edits, file creates, ran commans + total time\n- **State machine analysis** with temporal locality for accurate status detection\n- **6 notification types**: Task Complete, Review Complete, Question, Plan Ready, Session Limit, API Error\n- **PreToolUse integration** for instant alerts when Claude asks questions or creates plans\n- Analyzes conversation context to avoid false positives\n\n### üîî Flexible Notifications\n- **Desktop notifications** with custom icons and sounds\n- **Click-to-focus** (macOS): Click notification to activate your terminal window\n- **Git branch in title**: See current branch like `‚úÖ Completed [bold-cat] main`\n- **Webhook integrations**: Slack, Discord, Telegram, Lark/Feishu, and custom endpoints\n- **Session names**: Friendly identifiers like `[bold-cat]` for multi-session tracking\n- **Cooldown system** to prevent notification spam\n\n### üîä Audio Customization\n- **Multi-format support**: MP3, WAV, FLAC, OGG, AIFF\n- **Volume control**: 0-100% customizable volume\n- **Audio device selection**: Route notifications to a specific output device (e.g., \"MacBook Pro-Lautsprecher\")\n- **Built-in sounds**: Professional notification sounds included\n- **System sounds**: Use macOS/Linux system sounds (optional)\n- **Sound preview**: Test sounds before choosing with `/claude-notifications-go:notifications-settings`\n\n### üåê Enterprise-Grade Webhooks\n- **Retry logic** with exponential backoff\n- **Circuit breaker** for fault tolerance\n- **Rate limiting** with token bucket algorithm\n- **Rich formatting** with platform-specific embeds/attachments\n- **Request tracing** and performance metrics\n- **‚Üí [Complete Webhook Documentation](docs/webhooks/README.md)**\n\n### üõ†Ô∏è Developer Experience\n- **Interactive setup wizards**: `/claude-notifications-go:notifications-init` for binary setup, `/claude-notifications-go:notifications-settings` for configuration\n- **JSONL streaming parser** for efficient large file processing\n- **Comprehensive testing**: Unit tests with race detection\n- **Two-phase lock deduplication** prevents duplicate notifications\n- **Structured logging** to `notification-debug.log` for troubleshooting\n\n**Notes:**\n- **PreToolUse hooks** trigger instantly when Claude is about to use ExitPlanMode or AskUserQuestion tools\n- **Stop/SubagentStop hooks** analyze the conversation transcript using a state machine to determine the task status\n- **Notification hook** is triggered when Claude needs user input (permission dialogs, questions)\n- The state machine uses temporal locality (last 15 messages) and tool analysis to accurately detect task completion\n\n### ü§ù Plugin Compatibility\n\nCompatible with other Claude Code plugins that spawn background Claude instances:\n\n- **[double-shot-latte](https://github.com/obra/double-shot-latte)** - Auto-continue plugin that uses a background Claude instance for context evaluation. Notifications are automatically suppressed for the background judge process (via `CLAUDE_HOOK_JUDGE_MODE=true` environment variable).\n\nIf you're developing a plugin that spawns background Claude instances and want to suppress notifications, set `CLAUDE_HOOK_JUDGE_MODE=true` in the environment before invoking Claude.\n\n## Platform Support\n\n**Supported platforms:**\n- macOS (Intel & Apple Silicon)\n- Linux (x64 & ARM64)\n- Windows 10+ (x64)\n\n**No additional dependencies:**\n- ‚úÖ Binaries auto-download from GitHub Releases\n- ‚úÖ Pure Go - no C compiler needed\n- ‚úÖ All libraries bundled\n- ‚úÖ Works offline after first setup\n\n**Windows-specific features:**\n- Native Toast notifications (Windows 10+)\n- Works in PowerShell, CMD, Git Bash, or WSL\n- MP3/WAV/OGG/FLAC audio playback via native Windows APIs\n- System sounds not accessible - use built-in MP3s or custom files\n\n### macOS Click-to-Focus\n\nOn macOS, clicking a notification will activate your terminal window - no more hunting for the right window!\n\n**How it works:**\n- Automatically detects your terminal (iTerm2, Warp, Terminal.app, kitty, Ghostty, WezTerm, Alacritty)\n- Uses `terminal-notifier` (auto-installed via `/claude-notifications-go:notifications-init`)\n- Falls back to standard notifications if terminal-notifier is unavailable\n\n**Configuration** (in `config/config.json`):\n```json\n{\n  \"notifications\": {\n    \"desktop\": {\n      \"clickToFocus\": true,\n      \"terminalBundleId\": \"\"\n    }\n  }\n}\n```\n\n| Option | Default | Description |\n|--------|---------|-------------|\n| `clickToFocus` | `true` | Enable click-to-focus on macOS |\n| `terminalBundleId` | `\"\"` | Override auto-detected terminal. Use bundle ID like `com.googlecode.iterm2` |\n\n**Supported terminals (auto-detected):**\n- Terminal.app, iTerm2, Warp, kitty, Ghostty, WezTerm, Alacritty, Hyper, VS Code\n\nTo find your terminal's bundle ID: `osascript -e 'id of app \"YourTerminal\"'`\n\n## Quick Start\n\n### Interactive Setup (Recommended)\n\nFirst, download the notification binary:\n\n```\n/claude-notifications-go:notifications-init\n```\n\nThen configure your notification sounds:\n\n```\n/claude-notifications-go:notifications-settings\n```\n\nThis will:\n- ‚úÖ Show available built-in and system sounds\n- üîä Let you preview sounds before choosing\n- üìù Create config.json with your preferences\n- ‚úÖ Test your setup when complete\n\n**Features:**\n- Preview sounds: Type `\"play Glass\"` or `\"preview task-complete\"`\n- Choose from built-in MP3s or system sounds (macOS/Linux)\n- Configure webhooks (optional)\n- Interactive questions with AskUserQuestion tool\n\n### Manual Configuration\n\nAlternatively, edit `config/config.json` directly:\n\n```json\n{\n  \"notifications\": {\n    \"desktop\": {\n      \"enabled\": true,\n      \"sound\": true,\n      \"volume\": 1.0,\n      \"audioDevice\": \"\",\n      \"appIcon\": \"${CLAUDE_PLUGIN_ROOT}/claude_icon.png\"\n    },\n    \"webhook\": {\n      \"enabled\": false,\n      \"preset\": \"slack\",\n      \"url\": \"https://hooks.slack.com/services/YOUR/WEBHOOK/URL\",\n      \"chat_id\": \"\",\n      \"format\": \"json\",\n      \"headers\": {}\n    },\n    \"suppressQuestionAfterTaskCompleteSeconds\": 12\n  },\n  \"statuses\": {\n    \"task_complete\": {\n      \"title\": \"‚úÖ Task Completed\",\n      \"sound\": \"${CLAUDE_PLUGIN_ROOT}/sounds/task-complete.mp3\",\n      \"keywords\": [\"completed\", \"done\", \"finished\"]\n    },\n    \"plan_ready\": {\n      \"title\": \"üìã Plan Ready for Review\",\n      \"sound\": \"${CLAUDE_PLUGIN_ROOT}/sounds/plan-ready.mp3\",\n      \"keywords\": [\"plan\", \"strategy\"]\n    },\n    \"question\": {\n      \"title\": \"‚ùì Claude Has Questions\",\n      \"sound\": \"${CLAUDE_PLUGIN_ROOT}/sounds/question.mp3\",\n      \"keywords\": [\"question\", \"clarify\"]\n    },\n    \"session_limit_reached\": {\n      \"title\": \"‚è±Ô∏è Session Limit Reached\",\n      \"sound\": \"${CLAUDE_PLUGIN_ROOT}/sounds/question.mp3\"\n    }\n  }\n}\n```\n\n### Sound Options\n\n**Built-in sounds** (included):\n- `${CLAUDE_PLUGIN_ROOT}/sounds/task-complete.mp3`\n- `${CLAUDE_PLUGIN_ROOT}/sounds/review-complete.mp3`\n- `${CLAUDE_PLUGIN_ROOT}/sounds/question.mp3`\n- `${CLAUDE_PLUGIN_ROOT}/sounds/plan-ready.mp3`\n\n**System sounds:**\n- macOS: `/System/Library/Sounds/Glass.aiff`, `/System/Library/Sounds/Hero.aiff`, etc.\n- Linux: `/usr/share/sounds/**/*.ogg` (varies by distribution)\n- Windows: Use built-in MP3s (system sounds not easily accessible)\n\n**Supported formats:** MP3, WAV, FLAC, OGG/Vorbis, AIFF\n\n### Audio Device Selection\n\nRoute notification sounds to a specific audio output device instead of the system default:\n\n```bash\n# List available audio devices\nbin/list-devices\n\n# Output:\n#   0: MacBook Pro-Lautsprecher\n#   1: Babyface (23314790) (default)\n#   2: Immersed\n```\n\nThen add the device name to your `config.json`:\n\n```json\n{\n  \"notifications\": {\n    \"desktop\": {\n      \"audioDevice\": \"MacBook Pro-Lautsprecher\"\n    }\n  }\n}\n```\n\nLeave `audioDevice` empty or omit it to use the system default device.\n\n### Test Sound Playback\n\nPreview any sound file with optional volume control:\n\n```bash\n# Test built-in sound (full volume)\nbin/sound-preview sounds/task-complete.mp3\n\n# Test with reduced volume (30% - recommended for testing)\nbin/sound-preview --volume 0.3 sounds/task-complete.mp3\n\n# Test macOS system sound at 30% volume\nbin/sound-preview --volume 0.3 /System/Library/Sounds/Glass.aiff\n\n# Test custom sound at 50% volume\nbin/sound-preview --volume 0.5 /path/to/your/sound.wav\n\n# Show all options\nbin/sound-preview --help\n```\n\n**Volume flag:** Use `--volume` to control playback volume (0.0 to 1.0). Default is 1.0 (full volume).\n\n\n## Architecture\n\n```text\ncmd/\n  claude-notifications/     # CLI entry point\n  sound-preview/            # Sound preview utility\n  list-devices/             # List available audio output devices\ninternal/\n  audio/                    # Audio playback with device selection (malgo)\n  config/                   # Configuration loading and validation\n  logging/                  # Structured logging to notification-debug.log\n  platform/                 # Cross-platform utilities (temp dirs, mtime, etc.)\n  analyzer/                 # JSONL parsing and state machine\n  state/                    # Per-session state and cooldown management\n  dedup/                    # Two-phase lock deduplication\n  notifier/                 # Desktop notifications and sound playback\n  webhook/                  # Webhook integrations (Slack/Discord/Telegram/Custom)\n  hooks/                    # Hook routing (PreToolUse/Stop/SubagentStop/Notification)\n  summary/                  # Message summarization and markdown cleanup\n  sessionname/              # Friendly session name generation ([bold-cat], etc.)\npkg/\n  jsonl/                    # JSONL streaming parser\ncommands/\n  notifications-init.md     # Binary download wizard\n  notifications-settings.md # Interactive settings configuration wizard\nsounds/                     # Custom notification sounds (MP3)\nclaude_icon.png             # Plugin icon for desktop notifications\n```\n\n## Usage\n\nThe plugin is invoked automatically by Claude Code hooks. You can also test manually:\n\n```bash\n# Test PreToolUse hook\necho '{\"session_id\":\"test\",\"transcript_path\":\"/path/to/transcript.jsonl\",\"tool_name\":\"ExitPlanMode\"}' | \\\n  claude-notifications handle-hook PreToolUse\n\n# Test Stop hook\necho '{\"session_id\":\"test\",\"transcript_path\":\"/path/to/transcript.jsonl\"}' | \\\n  claude-notifications handle-hook Stop\n```\n\n## Development\n\n### Local installation for development\n\n```bash\n# 1. Clone repository\ngit clone https://github.com/777genius/claude-notifications-go\ncd claude-notifications-go\n\n# 2. Build binary for your platform\nmake build\n\n# 3. Add as local marketplace\n/plugin marketplace add .\n\n# 4. Install plugin\n/plugin install claude-notifications-go@local-dev\n\n# 5. Restart Claude Code for hooks to take effect\n\n# 6. Download binary and configure settings\n/claude-notifications-go:notifications-init\n/claude-notifications-go:notifications-settings\n```\n\n**Note:** For local development, build the binary with `make build` first. The `/claude-notifications-go:notifications-init` command will use your locally built binary if it exists, otherwise it will download from GitHub Releases.\n\n### Building binaries\n\n```bash\n# Run tests\nmake test\n\n# Run tests with race detection\nmake test-race\n\n# Generate coverage report\nmake test-coverage\n\n# Build for all platforms\nmake build-all\n\n# Rebuild and prepare for commit\nmake rebuild-and-commit\n\n# Lint\nmake lint\n```\n\n**Note:** GitHub Actions automatically rebuilds binaries when Go code changes are pushed.\n\n## Testing\n\n```bash\n# Unit tests\ngo test ./internal/config -v\ngo test ./internal/analyzer -v\ngo test ./internal/dedup -v -race\n\n# Integration tests\ngo test ./test -v\n\n# Specific test\ngo test -run TestStateMachine ./internal/analyzer -v\n```\n\n## Documentation\n\n- **[Volume Control Guide](docs/volume-control.md)** - Customize notification volume\n  - Configure volume from 0% to 100%\n  - Logarithmic scaling for natural sound\n  - Per-environment recommendations\n\n- **[Interactive Sound Preview](docs/interactive-sound-preview.md)** - Preview sounds during setup\n  - Interactive sound selection\n  - Preview before choosing\n\n- **[Webhook Integration Guide](docs/webhooks/README.md)** - Complete guide for webhook setup\n  - **[Slack](docs/webhooks/slack.md)** - Slack integration with color-coded attachments\n  - **[Discord](docs/webhooks/discord.md)** - Discord integration with rich embeds\n  - **[Telegram](docs/webhooks/telegram.md)** - Telegram bot integration\n  - **[Lark/Feishu](docs/webhooks/lark.md)** - Lark/Feishu integration with interactive cards\n  - **[Custom Webhooks](docs/webhooks/custom.md)** - Any webhook-compatible service\n  - **[Configuration](docs/webhooks/configuration.md)** - Retry, circuit breaker, rate limiting\n  - **[Monitoring](docs/webhooks/monitoring.md)** - Metrics and debugging\n  - **[Troubleshooting](docs/webhooks/troubleshooting.md)** - Common issues and solutions\n\n## License\n\nGPL-3.0 - See [LICENSE](LICENSE) file for details.\n"
      },
      "plugins": [
        {
          "name": "claude-notifications-go",
          "source": "./",
          "description": "Smart notifications for Claude Code task statuses (Go implementation)",
          "version": "1.14.0",
          "author": {
            "name": "777genius",
            "email": "[email protected]"
          },
          "repository": "https://github.com/777genius/claude-notifications-go",
          "license": "MIT",
          "keywords": [
            "notifications",
            "alerts",
            "productivity",
            "go",
            "hooks"
          ],
          "category": "productivity",
          "tags": [
            "notifications",
            "hooks",
            "alerts",
            "go"
          ],
          "categories": [
            "alerts",
            "go",
            "hooks",
            "notifications",
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add 777genius/claude-notifications-go",
            "/plugin install claude-notifications-go@claude-notifications-go"
          ]
        }
      ]
    },
    {
      "name": "claude-notifications",
      "version": null,
      "description": "Smart notifications marketplace for Claude Code",
      "repo_full_name": "777genius/claude-notifications",
      "repo_url": "https://github.com/777genius/claude-notifications",
      "repo_description": "Smart notifications plugin for Claude Code task statuses with desktop notifications, sound alerts or using  webhooks. Zero dependencies.",
      "signals": {
        "stars": 1,
        "forks": 0,
        "pushed_at": "2025-10-18T22:54:20Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n    \"name\": \"claude-notifications\",\n    \"owner\": {\n        \"name\": \"777genius\",\n        \"email\": \"[email protected]\"\n    },\n    \"metadata\": {\n        \"description\": \"Smart notifications marketplace for Claude Code\",\n        \"version\": \"1.0.3\"\n    },\n    \"plugins\": [{\n        \"name\": \"claude-notifications\",\n        \"source\": \"./\",\n        \"description\": \"Desktop notifications, webhooks, and sound alerts for Claude Code task completion, plan mode, and questions\",\n        \"version\": \"1.0.3\",\n        \"author\": {\n            \"name\": \"777genius\",\n            \"email\": \"[email protected]\"\n        },\n        \"homepage\": \"https://github.com/777genius/claude-notifications\",\n        \"repository\": \"https://github.com/777genius/claude-notifications\",\n        \"license\": \"GPL-3.0\",\n        \"keywords\": [\n            \"notifications\",\n            \"alerts\",\n            \"productivity\",\n            \"webhooks\",\n            \"desktop-notifications\",\n            \"plan-mode\",\n            \"hooks\"\n        ],\n        \"category\": \"productivity\",\n        \"tags\": [\"notifications\", \"hooks\", \"alerts\"]\n    }]\n}",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"claude-notifications\",\n  \"version\": \"1.0.3\",\n  \"description\": \"Smart notifications for Claude Code task statuses with desktop notifications, webhooks, and sound alerts\",\n  \"author\": {\n    \"name\": \"777genius\",\n    \"email\": \"[email protected]\"\n  },\n  \"license\": \"GPL-3.0\",\n  \"repository\": \"https://github.com/777genius/claude-notifications\",\n  \"keywords\": [\n    \"notifications\",\n    \"alerts\",\n    \"productivity\",\n    \"webhooks\",\n    \"desktop-notifications\"\n  ],\n  \"commands\": [\n    \"./commands/setup-notifications.md\"\n  ],\n  \"hooks\": [\n    \"./hooks/hooks.json\"\n  ]\n}\n",
        "README.md": "# Claude Notifications Plugin\n\n[![macOS Tests](https://github.com/777genius/claude-notifications/actions/workflows/test-macos.yml/badge.svg)](https://github.com/777genius/claude-notifications/actions/workflows/test-macos.yml)\n[![Linux Tests](https://github.com/777genius/claude-notifications/actions/workflows/test-linux.yml/badge.svg)](https://github.com/777genius/claude-notifications/actions/workflows/test-linux.yml)\n[![Windows Tests](https://github.com/777genius/claude-notifications/actions/workflows/test-windows.yml/badge.svg)](https://github.com/777genius/claude-notifications/actions/workflows/test-windows.yml)\n[![Coverage](https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/777genius/claude-notifications/gh-pages/coverage-badge.json)](https://codecov.io/gh/777genius/claude-notifications)\n[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)\n![visitor badge](https://visitor-badge.laobi.icu/badge?page_id=claude-notifications)\n\n<img width=\"350\" height=\"239\" alt=\"image\" src=\"https://github.com/user-attachments/assets/42b7a306-f56f-4499-94cf-f3d573416b6d\" />\n\n\n## Table of Contents\n\n- [Claude Notifications Plugin](#claude-notifications-plugin)\n  - [Table of Contents](#table-of-contents)\n  - [Features](#features)\n  - [Test Coverage](#test-coverage)\n  - [Notification Statuses](#notification-statuses)\n  - [Installation](#installation)\n    - [Quick Install from GitHub](#quick-install-from-github)\n    - [Local Installation (for development)](#local-installation-for-development)\n  - [Quick Setup (Recommended)](#quick-setup-recommended)\n    - [Interactive Setup Wizard](#interactive-setup-wizard)\n  - [Manual Setup (Advanced)](#manual-setup-advanced)\n    - [1. Copy Configuration File](#1-copy-configuration-file)\n    - [2. Configure Notifications](#2-configure-notifications)\n    - [3. Configure Sound Files (Optional)](#3-configure-sound-files-optional)\n      - [Option A: Use System Sounds (Easiest - Works Immediately)](#option-a-use-system-sounds-easiest---works-immediately)\n      - [Option B: Add Custom Sound Files](#option-b-add-custom-sound-files)\n      - [Option C: Disable Sounds](#option-c-disable-sounds)\n  - [Configuration Options](#configuration-options)\n    - [Desktop Notifications](#desktop-notifications)\n    - [Webhook Notifications](#webhook-notifications)\n      - [Text Format](#text-format)\n      - [JSON Format](#json-format)\n    - [Status Customization](#status-customization)\n  - [How It Works](#how-it-works)\n    - [Status Detection Logic](#status-detection-logic)\n      - [1. Instant Detection (PreToolUse Hook)](#1-instant-detection-pretooluse-hook)\n      - [2. Post-Completion Detection (Stop/SubagentStop Hooks)](#2-post-completion-detection-stopsubagentstop-hooks)\n    - [Summarization](#summarization)\n  - [Limitations](#limitations)\n    - [What Can Be Tracked](#what-can-be-tracked)\n    - [What Cannot Be Tracked](#what-cannot-be-tracked)\n      - [Why This Happens](#why-this-happens)\n      - [Workaround](#workaround)\n  - [Platform Support](#platform-support)\n    - [Fully Supported Platforms](#fully-supported-platforms)\n    - [Cross-Platform Implementation](#cross-platform-implementation)\n    - [macOS-Only Features](#macos-only-features)\n    - [Requirements](#requirements)\n  - [üîî Webhook Integrations](#-webhook-integrations)\n    - [Quick Start](#quick-start)\n    - [Available Presets](#available-presets)\n  - [Known Issues](#known-issues)\n    - [Duplicate Notifications (Claude Code Bug)](#duplicate-notifications-claude-code-bug)\n    - [Summary Text Robustness](#summary-text-robustness)\n  - [Troubleshooting](#troubleshooting)\n    - [Notifications not appearing](#notifications-not-appearing)\n    - [Sounds not playing](#sounds-not-playing)\n    - [Webhook not working](#webhook-not-working)\n  - [Contributing](#contributing)\n  - [License](#license)\n  - [Support](#support)\n  - [Roadmap](#roadmap)\n\nSmart notifications for Claude Code task statuses with desktop notifications, webhooks, and sound alerts.\n\n## Features\n\n- ‚úÖ **Desktop Notifications** - Native notifications on macOS, Linux, and Windows\n- üîî **Sound Alerts** - Customizable sounds for different status types\n- üåê **Webhook Integration** - Send notifications to external services (text or JSON)\n- üéØ **Smart Status Detection** - Automatically detects task completion, reviews, questions, and plan readiness\n- üìù **Auto Summarization** - Generates concise summaries of completed tasks\n- üîß **Highly Configurable** - Customize everything through a simple JSON config\n- üöÄ **Zero Dependencies** - Works out-of-the-box on Windows without installing jq (uses built-in PowerShell)\n\n## Test Coverage\n\nThis plugin has comprehensive test coverage:\n\n| Metric | Value | Description |\n|--------|-------|-------------|\n| **Coverage/Tests** | See badge above | Code coverage % or test count |\n| **Test Suites** | 13 | Independent test files |\n| **Test Cases** | 228 | Individual test functions |\n| **Source Files** | 10 | Main plugin files (`lib/` + `hooks/`) |\n| **Lines of Code** | 1,700+ | Non-comment, non-blank lines |\n\n**About Coverage:**\nWe attempt to measure bash code coverage using [bashcov](https://github.com/infertux/bashcov) on macOS. However, bash coverage is technically challenging due to sourcing, subshells, and helper functions. If coverage measurement succeeds, the badge shows the percentage (e.g., \"73.5% | 228 tests\"). If not, it shows test count only (e.g., \"228 tests\").\n\nAll tests run on **macOS**, **Linux**, and **Windows**. For detailed reports (when coverage works), visit [Codecov Dashboard](https://codecov.io/gh/777genius/claude-notifications). See [Testing Documentation](docs/testing.md) for details.\n\n## Notification Statuses\n\nThe plugin detects and notifies about the following statuses:\n\n| Status | Icon | Description | Trigger |\n|--------|------|-------------|---------|\n| Task Complete | ‚úÖ | Main task completed | Stop/SubagentStop hooks (state machine analysis) |\n| Review Complete | üîç | Code review finished | Stop/SubagentStop hooks (review keywords detected) |\n| Question | ‚ùì | Claude has a question | PreToolUse hook (AskUserQuestion) OR Notification hook |\n| Plan Ready | üìã | Plan ready for approval | PreToolUse hook (ExitPlanMode) |\n\n## Installation\n\n### Quick Install from GitHub\n\n```bash\n# Add the marketplace\n/plugin marketplace add 777genius/claude-notifications\n\n# Install the plugin\n/plugin install claude-notifications@claude-notifications\n```\n\n### Local Installation (for development)\n\n```bash\n# Add local marketplace\n/plugin marketplace add /path/to/claude-notifications\n\n# Install from local\n/plugin install claude-notifications@local-dev\n```\n\n**Updating local plugin:**\nChanges to a locally installed plugin are reflected immediately - just edit the files and they'll take effect on the next hook trigger. No need to reinstall!\n\n## Quick Setup (Recommended)\n\n### Interactive Setup Wizard\n\nRun the interactive setup command to configure your plugin with ease:\n\n```bash\n/setup-notifications\n```\n\n**What it does:**\n1. üéµ **Plays system sounds** so you can hear each one before choosing\n2. ‚ùì **Asks interactive questions** with easy-to-use selection UI\n3. ‚öôÔ∏è **Auto-generates config.json** with your preferences\n4. ‚úÖ **Tests your setup** to confirm everything works\n\n**Benefits:**\n- No manual file editing required\n- Hear sounds before selecting them\n- Visual selection interface\n- Takes 2-3 minutes to complete\n\nYou can re-run `/setup-notifications` anytime to reconfigure.\n\n---\n\n## Manual Setup (Advanced)\n\nIf you prefer to configure manually:\n\n### 1. Copy Configuration File\n\n```bash\ncp config/config.json.example config/config.json\n```\n\n### 2. Configure Notifications\n\nEdit `config/config.json` to customize your notifications:\n\n```json\n{\n  \"notifications\": {\n    \"desktop\": {\n      \"enabled\": true,\n      \"sound\": true\n    },\n    \"webhook\": {\n      \"enabled\": false,\n      \"url\": \"https://your-webhook-url.com\",\n      \"format\": \"json\",\n      \"headers\": {\n        \"Authorization\": \"Bearer YOUR_TOKEN\"\n      }\n    }\n  },\n  \"statuses\": {\n    \"task_complete\": {\n      \"title\": \"‚úÖ Task Completed\",\n      \"sound\": \"sounds/task-complete.mp3\"\n    }\n  }\n}\n```\n\n### 3. Configure Sound Files (Optional)\n\nYou have three options for sound notifications:\n\n#### Option A: Use System Sounds (Easiest - Works Immediately)\n\nThe default config uses macOS system sounds that work out of the box:\n\n```json\n{\n  \"statuses\": {\n    \"task_complete\": {\n      \"sound\": \"/System/Library/Sounds/Glass.aiff\"\n    }\n  }\n}\n```\n\n**Available macOS System Sounds:**\n- Glass.aiff, Ping.aiff, Pop.aiff, Purr.aiff (subtle)\n- Funk.aiff, Hero.aiff, Sosumi.aiff (distinctive)\n- Basso.aiff, Blow.aiff, Frog.aiff, Submarine.aiff (unique)\n\n**Linux System Sounds:** `/usr/share/sounds/` (varies by distribution)\n\n#### Option B: Add Custom Sound Files\n\n```bash\n# Copy config template for custom sounds\ncp config/config.json.example-custom-sounds config/config.json\n\n# Add your MP3/WAV/OGG files to sounds/ directory\n```\n\nSee [sounds/README.md](sounds/README.md) for free sound resources.\n\n#### Option C: Disable Sounds\n\n```json\n{\n  \"notifications\": {\n    \"desktop\": {\n      \"sound\": false\n    }\n  }\n}\n```\n\n## Configuration Options\n\n### Desktop Notifications\n\n```json\n{\n  \"notifications\": {\n    \"desktop\": {\n      \"enabled\": true,    // Enable/disable desktop notifications\n      \"sound\": true       // Enable/disable sound playback\n    }\n  }\n}\n```\n\n### Webhook Notifications\n\n#### Text Format\n\n```json\n{\n  \"webhook\": {\n    \"enabled\": true,\n    \"url\": \"https://webhook.example.com\",\n    \"format\": \"text\"\n  }\n}\n```\n\nSends: `[task_complete] Created authentication form. Edited 3 files.`\n\n#### JSON Format\n\n```json\n{\n  \"webhook\": {\n    \"enabled\": true,\n    \"url\": \"https://webhook.example.com\",\n    \"format\": \"json\",\n    \"headers\": {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": \"Bearer YOUR_TOKEN\"\n    }\n  }\n}\n```\n\nSends:\n```json\n{\n  \"status\": \"task_complete\",\n  \"message\": \"Created authentication form. Edited 3 files.\",\n  \"timestamp\": \"2025-10-17T10:30:00Z\",\n  \"session_id\": \"abc123\",\n  \"source\": \"claude-notifications\"\n}\n```\n\n### Status Customization\n\nCustomize the title and sound for each status:\n\n```json\n{\n  \"statuses\": {\n    \"task_complete\": {\n      \"title\": \"‚úÖ Task Completed\",\n      \"sound\": \"sounds/task-complete.mp3\",\n      \"keywords\": [\"completed\", \"done\", \"finished\"]\n    },\n    \"review_complete\": {\n      \"title\": \"üîç Review Completed\",\n      \"sound\": \"sounds/review-complete.mp3\",\n      \"keywords\": [\"review\", \"analyzed\", \"–ø—Ä–æ–≤–µ—Ä–∫–∞\"]\n    }\n  }\n}\n```\n\n## How It Works\n\n1. **Hook Events** - The plugin listens to Claude Code hooks (`Stop`, `Notification`, `SubagentStop`)\n2. **Status Analysis** - Analyzes transcript and tool usage to determine task status\n3. **Summarization** - Generates a concise summary using simple logic\n4. **Multi-Channel Delivery** - Sends notifications via desktop and/or webhook\n\n### Status Detection Logic\n\nThe plugin uses **two different detection methods** depending on the type of notification:\n\n#### 1. Instant Detection (PreToolUse Hook)\n\nThese statuses are detected **in real-time** as Claude calls the tool, **BEFORE** any UI prompts appear:\n\n- **Plan Ready** (`ExitPlanMode`)\n  - Fires when: Claude creates a plan using ExitPlanMode tool\n  - Detection: Direct tool_name check (no transcript analysis needed)\n  - Timing: Notification sent ‚Üí then UI shows \"Would you like to proceed?\"\n\n- **Question** (`AskUserQuestion`)\n  - Fires when: Claude asks explicit questions using AskUserQuestion tool\n  - Detection: Direct tool_name check (no transcript analysis needed)\n  - Timing: Notification sent ‚Üí then UI shows question prompt\n\n- **Question** (`Notification hook`)\n  - Fires when: Claude Code sends system notification events\n  - Detection: Always treated as \"question\" status\n  - Timing: Instant (no analysis)\n\n#### 2. Post-Completion Detection (Stop/SubagentStop Hooks)\n\nThese statuses are detected **after task completion** using smart analysis:\n\n**State Machine Algorithm:**\n\nThe plugin analyzes the **last 15 assistant messages** to determine what work was completed:\n\n1. **Tool Categories:**\n   - **Active Tools**: Write, Edit, Bash, NotebookEdit, SlashCommand (makes changes)\n   - **Planning Tools**: ExitPlanMode, TodoWrite (creates plans)\n   - **Passive Tools**: Read, Grep, Glob, WebFetch, WebSearch, Task (reads only)\n\n2. **Decision Logic:**\n   - Last tool is active (Write/Edit/Bash) ‚Üí **Task Complete**\n   - Last tool is passive (Read/Grep) ‚Üí Check keywords\n   - Review keywords found ‚Üí **Review Complete**\n   - At least 1 tool used + completion keywords ‚Üí **Task Complete**\n\n3. **Temporal Analysis:**\n   - Only recent activity (last 15 messages) considered\n   - Old tool usage outside window is ignored\n   - Prevents false positives from stale data\n\n**Examples:**\n\n```\nScenario 1: Code Written\nTools: [Read, Write, Edit, Bash]\nLast tool: Bash (active)\nStatus: task_complete ‚úÖ\n\nScenario 2: Code Review\nTools: [Read, Read, Grep]\nKeywords: \"analyzed the code structure\"\nStatus: review_complete ‚úÖ\n\nScenario 3: Just Researching\nTools: [Read, Grep, Read]\nLast tool: Read (passive)\nKeywords: No completion words\nStatus: unknown (no notification) ‚úÖ\n```\n\n**Prevents false notifications during:**\n- Idle sessions (no tools used)\n- Research/reading sessions (only passive tools, no completion keywords)\n- When state machine returns \"unknown\"\n\n### Summarization\n\nThe plugin creates summaries by:\n1. Extracting the first sentence from Claude's last message\n2. Adding context from tool usage (e.g., \"Edited 3 files\")\n3. Truncating to ~150 characters for readability\n\n## Limitations\n\n### What Can Be Tracked\n\nThe plugin can send notifications for:\n\n- ‚úÖ **Plan Ready** - When Claude creates a plan (PreToolUse hook detects `ExitPlanMode`)\n- ‚úÖ **Questions** - When Claude asks questions (PreToolUse hook detects `AskUserQuestion` OR Notification hook fires)\n- ‚úÖ **Task Complete** - When Claude finishes work (Stop/SubagentStop hooks analyze completion)\n- ‚úÖ **Review Complete** - When Claude finishes code review (Stop/SubagentStop hooks detect review keywords)\n\n### What Cannot Be Tracked\n\n**Important:** The plugin **cannot** detect Claude Code's built-in UI confirmation dialogs.\n\nWhen you see this prompt:\n```\n‚ùØ 1. Yes\n  2. Yes, allow all edits during this session\n  3. No, and tell Claude what to do differently\n```\n\nThis is a **UI confirmation dialog** shown by Claude Code itself, not an `AskUserQuestion` tool. The plugin has no way to detect when these dialogs appear.\n\n#### Why This Happens\n\n**Event Sequence:**\n```\n1. Claude decides to use Write/Edit/Bash tool\n2. Claude Code shows UI confirmation dialog ‚Üê NO HOOK FIRES HERE\n3. User approves\n4. Tool executes\n5. Hook fires (too late for \"action required\" notification)\n```\n\n**Technical Explanation:**\n\n- `AskUserQuestion` = Claude explicitly asking a question (trackable via PreToolUse hook)\n- UI Confirmation = Claude Code security feature for file operations (not exposed to hooks)\n\nThe difference:\n- **AskUserQuestion tool** - Fired when Claude needs information from you (e.g., \"Which API should I use?\")\n- **UI Confirmation** - Fired when Claude Code asks permission for potentially dangerous operations (Write, Edit, Bash)\n\nSince UI confirmations are handled internally by Claude Code **before** any hooks fire, there is no event the plugin can intercept.\n\n#### Workaround\n\nIf you want notifications when Claude is waiting for approval:\n1. Enable notifications for **Plan Ready** status - you'll be notified when Claude presents a plan\n2. Configure auto-approve for trusted operations in Claude Code settings (reduces confirmation dialogs)\n3. Wait for Claude Code to add a dedicated hook for UI confirmations (feature request)\n\n## Platform Support\n\n### Fully Supported Platforms\n\nThe plugin is fully cross-platform and works on:\n\n| Platform | Status | Desktop Notifications | Sound Playback | Webhooks | Terminal Activation |\n|----------|--------|----------------------|----------------|----------|-------------------|\n| **macOS** (10.12+) | ‚úÖ Full | osascript/terminal-notifier | afplay | ‚úÖ | ‚úÖ Warp/iTerm/Terminal.app |\n| **Linux** | ‚úÖ Full | notify-send | paplay/aplay | ‚úÖ | ‚ùå Not supported |\n| **Windows** (Git Bash/WSL) | ‚úÖ Full | PowerShell Toast | PowerShell | ‚úÖ | ‚ùå Not supported |\n\n### Cross-Platform Implementation\n\nAll critical features work across platforms:\n- ‚úÖ Desktop notifications\n- ‚úÖ Sound playback\n- ‚úÖ Webhook integration\n- ‚úÖ Status detection\n- ‚úÖ Auto-summarization\n- ‚úÖ Lock-based deduplication\n\nThe plugin automatically detects your OS and uses the appropriate commands:\n- **Temp directories**: Respects `$TMPDIR` (macOS/Linux) and `$TEMP` (Windows)\n- **File timestamps**: Uses `stat -f` (macOS) or `stat -c` (Linux/Windows)\n- **Notification commands**: Uses `osascript` (macOS), `notify-send` (Linux), or PowerShell (Windows)\n\n### macOS-Only Features\n\nThese features only work on macOS but don't affect core functionality on other platforms:\n- **Terminal tab activation**: Clicking notifications activates the terminal tab (Warp, iTerm, Terminal.app)\n- **Advanced notifications**: Integration with terminal-notifier for richer notifications\n\n### Requirements\n\n**All Platforms:**\n- **No mandatory dependencies!** üéâ\n  - The plugin automatically detects and uses available JSON parsers\n  - Works out-of-the-box on Windows (uses built-in PowerShell)\n\n**Optional (Recommended for Performance):**\n- **jq** - Faster JSON parsing (recommended but not required)\n  - macOS: `brew install jq`\n  - Linux: `apt install jq` or `yum install jq`\n  - Windows: Download from [jqlang.github.io](https://jqlang.github.io/jq/)\n  - Verify: `jq --version`\n\n**Automatic JSON Parser Selection:**\n\nThe plugin automatically selects the best available parser in this order:\n1. **jq** (fastest, ~50% faster than alternatives)\n2. **PowerShell** (Windows built-in via `ConvertFrom-Json`)\n3. **python3/python** (fallback)\n4. **ruby** (fallback)\n\n**Linux-Specific:**\n- **notify-send** (usually pre-installed with desktop environments)\n  - Ubuntu/Debian: `apt install libnotify-bin`\n  - Fedora: `dnf install libnotify`\n\n**Windows-Specific:**\n- **Git Bash** or **WSL** (Windows Subsystem for Linux)\n- **PowerShell 5.0+** (pre-installed on Windows 10+, used for JSON parsing)\n\n## üîî Webhook Integrations\n\nSend notifications to your favorite messaging platform!\n\n| Platform | Status | Documentation |\n|----------|--------|---------------|\n| **Slack** | ‚úÖ Supported | [Setup Guide](docs/webhooks/slack.md) |\n| **Discord** | ‚úÖ Supported | [Setup Guide](docs/webhooks/discord.md) |\n| **Telegram** | ‚úÖ Supported | [Setup Guide](docs/webhooks/telegram.md) |\n| **Custom** | ‚úÖ Supported | [Setup Guide](docs/webhooks/custom.md) |\n\n### Quick Start\n\n1. Choose your platform from the table above\n2. Follow the setup guide for detailed instructions\n3. Update `config/config.json`:\n\n```json\n{\n  \"notifications\": {\n    \"webhook\": {\n      \"enabled\": true,\n      \"preset\": \"slack\",\n      \"url\": \"https://hooks.slack.com/services/YOUR/WEBHOOK/URL\"\n    }\n  }\n}\n```\n\n**Test your webhook:**\n```bash\n./test/webhook-tester.sh --preset slack --url \"YOUR_WEBHOOK_URL\" --message \"Test\"\n```\n\n### Available Presets\n\n- **`slack`** - Slack Incoming Webhooks (send to Slack channels)\n- **`discord`** - Discord Webhooks (send to Discord channels)\n- **`telegram`** - Telegram Bot API (send to Telegram chats/groups)\n- **`custom`** - Generic JSON/text format (for custom endpoints)\n\nFor detailed setup instructions, examples, and troubleshooting, see [Webhook Documentation](docs/webhooks/README.md).\n\n‚ö†Ô∏è **Note:** Webhook integrations are community-contributed and not officially tested by the plugin author.\n\n## Known Issues\n\n### Duplicate Notifications (Claude Code Bug)\n\n**Problem:** You may occasionally receive 2-4 duplicate notifications for the same event.\n\n**Affected Versions:** Claude Code v2.0.17 - v2.0.21\n**Working Versions:** v2.0.15 and earlier ‚úÖ\n\nThis is a known bug in Claude Code where hooks are executed multiple times for single events. The plugin includes automatic deduplication using an atomic lock to minimize duplicates. In practice, it guarantees at least one notification and eliminates race windows where two processes could both send.\n\n**Why this happens:**\n- Claude Code bug ([#9602](https://github.com/anthropics/claude-code/issues/9602), [#3465](https://github.com/anthropics/claude-code/issues/3465), [#3523](https://github.com/anthropics/claude-code/issues/3523))\n- Multiple processes execute simultaneously with different PIDs\n- Duplication increases during long sessions (2x ‚Üí 4x ‚Üí 10x+)\n\n**Plugin Protection:**\nThe plugin uses an early duplicate check plus an atomic lock acquisition right before sending:\n- ‚úÖ Early duplicate detection without creating a lock (allows retries if a process exits early)\n- ‚úÖ Atomic lock via noclobber to prevent simultaneous send\n- ‚úÖ Stale locks (>2s) are ignored and safely replaced\n- ‚úÖ Guarantees at least 1 notification is sent\n\n**What you'll see:**\n```\n[2025-XX-XX XX:XX:XX] === Hook triggered: Stop [PID: 12345] ===\n[2025-XX-XX XX:XX:XX] Duplicate hook detected early (age: 0s), skipping [PID: 12346]\n[2025-XX-XX XX:XX:XX] Desktop notification sent\n```\n\n**Workaround:**\n- Update to Claude Code v2.0.15 (or wait for fix in future versions)\n- Accept occasional duplicates as a trade-off for reliable notifications\n\n### Summary Text Robustness\n\nNotifications now use improved summary cleaning:\n- Removes markdown headers, list markers, and backticks\n- Flattens newlines, trims, collapses spaces\n- If cleaned summary becomes empty, a status-specific default message is used\n\n## Troubleshooting\n\n### Notifications not appearing\n\n1. Check if desktop notifications are enabled in OS settings\n2. Verify `config/config.json` has `\"enabled\": true`\n3. Ensure `jq` is installed: `jq --version`\n\n### Sounds not playing\n\n1. Check if sound files exist in `sounds/` directory\n2. Verify `\"sound\": true` in config\n3. Test sound command manually:\n   - macOS: `afplay sounds/task-complete.mp3`\n   - Linux: `paplay sounds/task-complete.mp3`\n\n### Webhook not working\n\n1. Test webhook URL with curl:\n   ```bash\n   curl -X POST https://your-webhook-url.com -d \"test\"\n   ```\n2. Check webhook logs for errors\n3. Verify headers are correct\n\n## Contributing\n\nContributions are welcome! Please feel free to submit a Pull Request.\n\n## License\n\nGNU General Public License v3.0 (GPL-3.0)\n\nThis program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\n**Key points:**\n- ‚úÖ Free to use, modify, and distribute\n- ‚úÖ Must keep the same GPL-3.0 license\n- ‚úÖ Must publish source code of any modifications\n- ‚úÖ Must credit original author (777genius)\n\nSee [LICENSE](LICENSE) file for full details.\n\n## Support\n\n- Report issues: [GitHub Issues](https://github.com/your-username/claude-notifications/issues)\n- Documentation: [Claude Code Docs](https://docs.claude.com/en/docs/claude-code)\n\n## Roadmap\n\n- [ ] Add more notification channels (email, SMS)\n- [ ] Support for custom AI summarization (optional)\n- [ ] Priority levels for different statuses\n- [ ] Notification history/log\n- [ ] Web dashboard for notification management\n"
      },
      "plugins": [
        {
          "name": "claude-notifications",
          "source": "./",
          "description": "Desktop notifications, webhooks, and sound alerts for Claude Code task completion, plan mode, and questions",
          "version": "1.0.3",
          "author": {
            "name": "777genius",
            "email": "[email protected]"
          },
          "homepage": "https://github.com/777genius/claude-notifications",
          "repository": "https://github.com/777genius/claude-notifications",
          "license": "GPL-3.0",
          "keywords": [
            "notifications",
            "alerts",
            "productivity",
            "webhooks",
            "desktop-notifications",
            "plan-mode",
            "hooks"
          ],
          "category": "productivity",
          "tags": [
            "notifications",
            "hooks",
            "alerts"
          ],
          "categories": [
            "alerts",
            "desktop-notifications",
            "hooks",
            "notifications",
            "plan-mode",
            "productivity",
            "webhooks"
          ],
          "install_commands": [
            "/plugin marketplace add 777genius/claude-notifications",
            "/plugin install claude-notifications@claude-notifications"
          ]
        }
      ]
    }
  ]
}