{
  "author": {
    "id": "ansonphong",
    "display_name": "phong",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/4825055?u=0f49a01fc6a4eed63af855ef58de8436815c2391&v=4",
    "url": "https://github.com/ansonphong",
    "bio": "Design & Engineering",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 11,
      "total_skills": 0,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "chapterwise-plugins",
      "version": null,
      "description": "ChapterWise plugins for Claude Code",
      "owner_info": {
        "name": "Anson Phong",
        "email": "phong@phong.com"
      },
      "keywords": [],
      "repo_full_name": "ansonphong/chapterwise-claude-plugins",
      "repo_url": "https://github.com/ansonphong/chapterwise-claude-plugins",
      "repo_description": null,
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-25T19:40:40Z",
        "created_at": "2026-01-25T14:39:20Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 557
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 316
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/chapterwise-codex",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/chapterwise-codex/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/chapterwise-codex/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 316
        },
        {
          "path": "plugins/chapterwise-codex/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/chapterwise-codex/commands/convert-to-codex.md",
          "type": "blob",
          "size": 2861
        },
        {
          "path": "plugins/chapterwise-codex/commands/convert-to-markdown.md",
          "type": "blob",
          "size": 3233
        },
        {
          "path": "plugins/chapterwise-codex/commands/explode.md",
          "type": "blob",
          "size": 6731
        },
        {
          "path": "plugins/chapterwise-codex/commands/format-folder.md",
          "type": "blob",
          "size": 2593
        },
        {
          "path": "plugins/chapterwise-codex/commands/format-regen-ids.md",
          "type": "blob",
          "size": 1572
        },
        {
          "path": "plugins/chapterwise-codex/commands/format.md",
          "type": "blob",
          "size": 11646
        },
        {
          "path": "plugins/chapterwise-codex/commands/generate-tags.md",
          "type": "blob",
          "size": 3262
        },
        {
          "path": "plugins/chapterwise-codex/commands/implode.md",
          "type": "blob",
          "size": 7122
        },
        {
          "path": "plugins/chapterwise-codex/commands/index.md",
          "type": "blob",
          "size": 5295
        },
        {
          "path": "plugins/chapterwise-codex/commands/lite.md",
          "type": "blob",
          "size": 5422
        },
        {
          "path": "plugins/chapterwise-codex/commands/update-word-count.md",
          "type": "blob",
          "size": 3718
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"chapterwise-plugins\",\n  \"owner\": {\n    \"name\": \"Anson Phong\",\n    \"email\": \"phong@phong.com\"\n  },\n  \"metadata\": {\n    \"version\": \"1.0.0\",\n    \"description\": \"ChapterWise plugins for Claude Code\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"chapterwise-codex\",\n      \"description\": \"Skills for creating, validating, and managing Chapterwise Codex documents\",\n      \"version\": \"1.0.0\",\n      \"source\": \"./plugins/chapterwise-codex\",\n      \"tags\": [\"codex\", \"yaml\", \"document-management\", \"storytelling\"],\n      \"category\": \"productivity\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"chapterwise-codex\",\n  \"description\": \"Skills for creating, validating, and managing Chapterwise Codex documents\",\n  \"version\": \"1.0.0\",\n  \"homepage\": \"https://github.com/ansonphong/chapterwise-codex-claude\",\n  \"repository\": \"https://github.com/ansonphong/chapterwise-codex-claude\",\n  \"license\": \"MIT\"\n}\n",
        "plugins/chapterwise-codex/.claude-plugin/plugin.json": "{\n  \"name\": \"chapterwise-codex\",\n  \"description\": \"Skills for creating, validating, and managing Chapterwise Codex documents\",\n  \"version\": \"1.0.0\",\n  \"homepage\": \"https://github.com/ansonphong/chapterwise-codex-claude\",\n  \"repository\": \"https://github.com/ansonphong/chapterwise-codex-claude\",\n  \"license\": \"MIT\"\n}\n",
        "plugins/chapterwise-codex/commands/convert-to-codex.md": "---\ndescription: Convert markdown or text files to Codex format\nallowed-tools: Read, Grep, Glob, Bash, Write, Edit\ntriggers:\n  - convert to codex\n  - markdown to codex\n  - make codex\n  - md to codex\n  - upgrade to codex\n---\n\n# Convert Markdown to Codex\n\nConvert Codex Lite (Markdown with YAML frontmatter) files to full Codex format.\n\n## When to Use\n\n- Converting simple markdown documents to structured codex format\n- Upgrading Codex Lite files to full Codex for additional features (children, relations)\n- Importing markdown content into a Chapterwise project\n\n## Usage\n\n```bash\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/convert_format.py <input.md> --to-codex [options]\n```\n\n### Options\n\n```bash\n# Basic conversion (creates .codex.yaml)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/convert_format.py document.md --to-codex\n\n# Output as JSON instead of YAML\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/convert_format.py document.md --to-codex --format json\n\n# Specify output file\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/convert_format.py document.md --to-codex -o output.codex.yaml\n\n# Delete original markdown after conversion\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/convert_format.py document.md --to-codex --delete-original\n\n# Verbose output\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/convert_format.py document.md --to-codex -v\n```\n\n## Conversion Mapping\n\n### Frontmatter to Codex\n\n| Markdown Frontmatter | Codex Location |\n|---------------------|----------------|\n| `type` | `type` |\n| `name`, `title` | `name`, `title` |\n| `id` | `id` (or auto-generated) |\n| `summary` | `summary` |\n| `status` | `status` |\n| `featured` | `featured` |\n| `image`, `images` | `image`, `images` |\n| `tags` | `tags` (parsed from comma-delimited or array) |\n| `author` | `metadata.author` |\n| `last_updated` | `metadata.updated` |\n| `description` | `metadata.description` |\n| `license` | `metadata.license` |\n| Other fields | `attributes` array |\n\n### Body Content\n\n- First H1 heading becomes `title` (if not in frontmatter)\n- Remaining content becomes `body` field\n\n## Example\n\n**Input: `chapter-01.md`**\n```markdown\n---\ntype: chapter\nname: The Beginning\ntags: introduction, setup\nauthor: John Smith\n---\n\n# The Beginning\n\nIt was a dark and stormy night...\n```\n\n**Output: `chapter-01.codex.yaml`**\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n  documentVersion: \"1.0.0\"\n  created: \"2024-01-01T00:00:00Z\"\n  source: markdown-lite\n  sourceFile: chapter-01.md\n  author: John Smith\n\ntype: chapter\nname: The Beginning\ntitle: The Beginning\nid: \"550e8400-e29b-41d4-a716-446655440000\"\n\ntags:\n  - introduction\n  - setup\n\nbody: |\n  It was a dark and stormy night...\n```\n\n## Workflow\n\n1. User asks to convert markdown to codex\n2. If no file specified, ask which file\n3. Ask for output format preference (YAML or JSON)\n4. Run conversion\n5. Report success and output file path\n6. Optionally run auto-fixer on the result\n",
        "plugins/chapterwise-codex/commands/convert-to-markdown.md": "---\ndescription: Convert Codex to Codex Lite (Markdown with YAML frontmatter)\nallowed-tools: Read, Grep, Glob, Bash, Write, Edit\ntriggers:\n  - convert to markdown\n  - codex to markdown\n  - export markdown\n  - codex to md\n  - simplify codex\n  - export to md\n---\n\n# Convert Codex to Markdown\n\nConvert full Codex format to Codex Lite (Markdown with YAML frontmatter). This creates a simplified, portable version of your content.\n\n## When to Use\n\n- Exporting content for external use (blogs, documentation, etc.)\n- Creating simpler versions of content that don't need children/relations\n- Converting for use with standard markdown tools\n- Sharing content outside the Chapterwise ecosystem\n\n## Warning: Children Not Included\n\n**Important:** Codex files with `children` will lose that hierarchy when converted to markdown. Only the root entity's fields are converted. You'll be warned if children exist.\n\n## Usage\n\n```bash\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/convert_format.py <input.codex.yaml> --to-markdown [options]\n```\n\n### Options\n\n```bash\n# Basic conversion\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/convert_format.py story.codex.yaml --to-markdown\n\n# Specify output file\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/convert_format.py story.codex.yaml --to-markdown -o output.md\n\n# Delete original codex after conversion\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/convert_format.py story.codex.yaml --to-markdown --delete-original\n\n# Verbose output\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/convert_format.py story.codex.yaml --to-markdown -v\n```\n\n## Conversion Mapping\n\n### Codex to Frontmatter\n\n| Codex Field | Markdown Frontmatter |\n|-------------|---------------------|\n| `type` | `type` |\n| `name`, `title` | `name`, `title` |\n| `id` | `id` |\n| `summary` | `summary` |\n| `status` | `status` |\n| `featured` | `featured` |\n| `image`, `images` | `image`, `images` |\n| `tags` | `tags` (as comma-delimited string) |\n| `metadata.author` | `author` |\n| `metadata.updated` | `last_updated` |\n| `metadata.description` | `description` |\n| `metadata.license` | `license` |\n| `attributes[].key/value` | Key-value pairs in frontmatter |\n\n### Content\n\n- `name` or `title` becomes H1 heading\n- `body` becomes markdown body content\n\n### Not Converted\n\n- `children` (warning shown)\n- `relations`\n- `metadata.formatVersion`, `metadata.documentVersion`\n\n## Example\n\n**Input: `character.codex.yaml`**\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n  author: Jane Doe\n\ntype: character\nname: Alice\nid: \"550e8400-e29b-41d4-a716-446655440000\"\nsummary: The protagonist\n\ntags:\n  - hero\n  - main-character\n\nattributes:\n  - key: age\n    value: 25\n  - key: role\n    value: Protagonist\n\nbody: |\n  Alice is a brave young woman...\n\nchildren:\n  - type: arc\n    name: Redemption Arc\n```\n\n**Output: `character.md`**\n```markdown\n---\ntype: character\nname: Alice\nid: 550e8400-e29b-41d4-a716-446655440000\nsummary: The protagonist\ntags: hero, main-character\nauthor: Jane Doe\nage: 25\nrole: Protagonist\n---\n\n# Alice\n\nAlice is a brave young woman...\n```\n\n*(Warning: 1 child not included)*\n\n## Workflow\n\n1. User asks to convert codex to markdown\n2. If no file specified, ask which file\n3. Check for children and warn if present\n4. Run conversion\n5. Report success, output path, and any warnings\n",
        "plugins/chapterwise-codex/commands/explode.md": "---\ndescription: Split a codex file into separate files for each child element\nallowed-tools: Read, Grep, Glob, Bash, Write, Edit\ntriggers:\n  - explode codex\n  - split codex\n  - modularize codex\n  - extract children\n  - break up codex\n---\n\n# Codex Exploder - Modularize Large Files\n\nExtract children from a codex file into separate standalone files and replace them with `include:` directives. This enables true modularity, team collaboration, and git-friendly smaller files.\n\n## When This Skill Applies\n\n- Large codex files becoming unwieldy (1000+ lines)\n- Team needs to work on different nodes without merge conflicts\n- Extracting reusable components (characters, locations, templates)\n- Organizing by type (`/characters/`, `/locations/`, etc.)\n- Git workflow optimization (smaller files = better diffs)\n\n## Script Location\n\n```\n${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py\n```\n\n## Quick Start\n\n```bash\n# Extract all characters and locations\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --types character,location\n\n# Preview without making changes\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --types character --dry-run\n\n# Extract ALL direct children\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml\n```\n\n## What It Does\n\n1. **Reads** the input codex file\n2. **Extracts** matching children based on type filter\n3. **Creates** standalone V1.0 codex files for each extracted child\n4. **Replaces** extracted children with `include:` directives\n5. **Runs auto-fixer** on all extracted files (unless disabled)\n6. **Creates backup** of original file (unless disabled)\n\n## Before/After Example\n\n**Before (story.codex.yaml):**\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n\nid: story-001\ntype: story\n\nchildren:\n  - id: char-001\n    type: character\n    name: \"Hero\"\n    body: |\n      The protagonist of our story...\n\n  - id: loc-001\n    type: location\n    name: \"Castle\"\n    body: |\n      An ancient fortress...\n\n  - id: chapter-001\n    type: chapter\n    name: \"Chapter 1\"\n```\n\n**Run:** `python3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --types character,location`\n\n**After (story.codex.yaml):**\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n  exploded:\n    timestamp: \"2026-01-24T...\"\n    extracted_types: [\"character\", \"location\"]\n    extracted_count: 2\n\nid: story-001\ntype: story\n\nchildren:\n  - include: \"/characters/Hero.codex.yaml\"\n  - include: \"/locations/Castle.codex.yaml\"\n  - id: chapter-001\n    type: chapter\n    name: \"Chapter 1\"\n```\n\n**New files created:**\n- `./characters/Hero.codex.yaml`\n- `./locations/Castle.codex.yaml`\n\n## Command-Line Usage\n\n```bash\n# Basic: extract specific types\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --types character,location\n\n# Custom output pattern with placeholders\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --types character --output-pattern \"./nodes/{type}/{name}.codex.yaml\"\n\n# Preview what would be extracted (no changes made)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --types character --dry-run\n\n# Extract ALL direct children (no type filter)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml\n\n# Disable auto-fix on extracted files\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --types character --no-auto-fix\n\n# Force overwrite existing files\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --types character --force\n\n# Verbose output\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml -v\n```\n\n## Output Pattern Placeholders\n\n| Placeholder | Description | Example |\n|-------------|-------------|---------|\n| `{type}` | Node's type field | `character`, `location` |\n| `{name}` | Node's name (sanitized) | `hero-character` |\n| `{id}` | Node's ID | `a1b2c3d4-...` |\n| `{index}` | Position in children array | `0`, `1`, `2` |\n\n**Default pattern:** `./{type}s/{name}.codex.yaml`\n\n## Options Reference\n\n| Flag | Description | Default |\n|------|-------------|---------|\n| `--types` | Comma-separated types to extract | All children |\n| `--output-pattern` | Path pattern with placeholders | `./{type}s/{name}.codex.yaml` |\n| `--format` | Output format: `yaml` or `json` | `yaml` |\n| `--dry-run` | Preview without making changes | `false` |\n| `--no-backup` | Skip backup of original file | Creates backup |\n| `--no-auto-fix` | Skip auto-fixer on extracted files | Runs auto-fix |\n| `--force` | Overwrite existing files | Skip existing |\n| `-v, --verbose` | Detailed logging | Quiet |\n\n## Python API Usage\n\n```python\nfrom explode_codex import CodexExploder\n\nexploder = CodexExploder()\n\nresult = exploder.explode(\n    input_path=\"story.codex.yaml\",\n    types=[\"character\", \"location\"],\n    output_pattern=\"./{type}s/{name}.codex.yaml\",\n    options={\n        \"dry_run\": False,\n        \"backup\": True,\n        \"format\": \"yaml\",\n        \"verbose\": True,\n        \"auto_fix\": True,\n        \"force\": False\n    }\n)\n\nif result[\"success\"]:\n    print(f\"Extracted {result['extracted_count']} nodes\")\n    for file_path in result[\"extracted_files\"]:\n        print(f\"  - {file_path}\")\nelse:\n    print(f\"Failed: {result['errors']}\")\n```\n\n## Workflow Pattern\n\n```\n1. Build your codex with all content inline\n2. When it gets large, run explode to modularize:\n   python3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py myproject.codex.yaml --types character,location\n3. Edit individual files as needed\n4. Parent file auto-includes them via include directives\n5. Run auto-fixer on edits as usual\n```\n\n## Tips\n\n- **Start with `--dry-run`** to preview what will be extracted\n- **Use type-based folders** like `./characters/`, `./locations/` for organization\n- **Extracted files are complete codex files** - they can be loaded independently\n- **Include paths use `/`** for repo-relative or `./` for file-relative\n- **Backup files** are created with `.backup` extension by default\n- **Run auto-fixer** after exploding to ensure all files are valid\n\n## Common Use Cases\n\n| Scenario | Command |\n|----------|---------|\n| Extract all characters | `python3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --types character` |\n| Extract characters and locations | `python3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --types character,location` |\n| Extract everything | `python3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml` |\n| Preview extraction | `python3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --dry-run` |\n| Custom folder structure | `python3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py story.codex.yaml --output-pattern \"./content/{type}/{name}.codex.yaml\"` |\n",
        "plugins/chapterwise-codex/commands/format-folder.md": "---\ndescription: Auto-fix all codex files in a folder\nallowed-tools: Read, Grep, Glob, Bash, Write, Edit\ntriggers:\n  - fix folder\n  - autofix folder\n  - format folder\n  - fix directory\n  - fix all codex\n  - batch fix\n---\n\n# Auto-Fix Folder\n\nRun the auto-fixer on all codex files in a folder. Processes `.codex.yaml`, `.codex.yml`, `.codex.json`, and `.codex` files.\n\n## Usage\n\n```bash\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py <folder_path> [options]\n```\n\n### Options\n\n```bash\n# Fix all codex files in a directory (non-recursive)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/folder\n\n# Fix all codex files recursively (including subdirectories)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/folder --recursive\n\n# Also include markdown files (Codex Lite)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/folder --recursive --include-md\n\n# Dry run (preview fixes without making changes)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/folder --recursive --dry-run\n\n# Fix current directory\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py .\n\n# Verbose output\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/folder --recursive --verbose\n```\n\n### Common Flags\n\n| Flag | Description |\n|------|-------------|\n| `-r`, `--recursive` | Process subdirectories |\n| `-d`, `--dry-run` | Preview without changes |\n| `-v`, `--verbose` | Detailed output |\n| `--re-id` | Regenerate all IDs |\n| `--include-md` | Also process `.md` files as Codex Lite |\n\n## What It Fixes\n\nSame fixes as single-file auto-fixer applied to all matching files:\n- Missing metadata sections\n- Invalid/missing UUIDs\n- Duplicate IDs across files (within each file)\n- Legacy field removal\n- Attribute/relation structure fixes\n- Long string formatting\n- Timecode calculations\n\n## Workflow\n\n1. User asks to fix a folder or multiple files\n2. If no folder specified, ask which folder (or use current directory)\n3. Ask if recursive processing is desired\n4. Run auto-fixer on the folder\n5. Report summary: files processed, fixes applied, any errors\n\n## Example Output\n\n```\nProcessing directory: /path/to/codex-files\nRecursive mode enabled\n\nFound 15 codex file(s)\n\n[1/15] Processing: chapter-01.codex.yaml\n  Fixes applied (3):\n    1. Added missing 'id' field\n    2. Fixed invalid UUID\n    3. Converted body to pipe syntax\n\n[2/15] Processing: chapter-02.codex.yaml\n  No fixes needed\n\n...\n\n============================================================\nSummary:\n  Successful: 15\n  Failed: 0\n  Total: 15\n============================================================\n```\n",
        "plugins/chapterwise-codex/commands/format-regen-ids.md": "---\ndescription: Auto-fix codex file and regenerate ALL IDs (useful for duplicating content)\nallowed-tools: Read, Grep, Glob, Bash, Write, Edit\ntriggers:\n  - regenerate ids\n  - regen ids\n  - new ids\n  - fresh ids\n  - duplicate ids\n---\n\n# Regenerate All IDs\n\nRegenerate ALL IDs in a codex file, even if they're already valid. This is useful when:\n- Duplicating/forking content that needs unique IDs\n- Ensuring completely fresh IDs after import\n- Resetting IDs after copy/paste operations\n\n## Usage\n\nRun the auto-fixer with the `--re-id` flag:\n\n```bash\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py <file.codex.yaml> --re-id\n```\n\n### Options\n\n```bash\n# Regenerate IDs in a single file\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/file.codex.yaml --re-id\n\n# Dry run (preview without changes)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/file.codex.yaml --re-id --dry-run\n\n# Regenerate IDs in all files in a directory\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/directory --re-id --recursive\n\n# Verbose output\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/file.codex.yaml --re-id --verbose\n```\n\n## What Gets Regenerated\n\n- All `id` fields on nodes/entities\n- All `targetId` fields in relations\n\n## Workflow\n\n1. User asks to regenerate IDs or mentions duplicating content\n2. If no file specified, ask which file\n3. Run the auto-fixer with `--re-id` flag\n4. Report the number of IDs regenerated\n5. Warn user that relation targetIds now point to new IDs (may need manual update if referencing external files)\n",
        "plugins/chapterwise-codex/commands/format.md": "---\ndescription: Convert content to Chapterwise Codex format and fix formatting issues\nallowed-tools: Read, Grep, Glob, Bash, Write, Edit\ntriggers:\n  - codex format\n  - chapterwise codex\n  - codex yaml\n  - write in codex\n  - convert to codex\n  - fix codex\n  - auto-fix\n---\n\n# Chapterwise Codex Format V1.2\n\nConvert content to the Chapterwise Codex format - a perfectly recursive specification for **ANY structured content**. The format is infinitely flexible: invent any `type` you need. Common patterns are provided as templates, but you can create recipes, workouts, API docs, meeting notes, research papers, playlists, or literally anything else.\n\n## When This Skill Applies\n\n- User wants to create/convert content for Chapterwise\n- User mentions \"codex format\", \"chapterwise\", or \"codex yaml/json\"\n- User wants to run the auto-fixer on a codex file\n- User is structuring ANY content that benefits from hierarchy and metadata\n\n## Output Format\n\n**Default:** YAML with `.codex.yaml` extension\n**Alternative:** JSON with `.codex.json` extension (if user requests)\n\n## Required Structure\n\nEvery codex file MUST have:\n\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n```\n\n---\n\n## CREATING ANY CONTENT TYPE\n\nThe Codex format is **infinitely flexible**. The templates below are common patterns, but you can create ANY type of content. The format adapts to whatever you need.\n\n### Universal Structure (Works for Anything)\n\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n  documentVersion: \"1.0.0\"\n  author: \"[Author]\"\n  created: \"[ISO-8601]\"\n\nid: \"[unique-id]\"\ntype: \"[your-custom-type]\"  # ANY string: recipe, workout, meeting, research, playlist, etc.\ntitle: \"[Display Title]\"\nsummary: \"[One-line description]\"\nstatus: draft\n\nbody: |\n  [Main content - supports full markdown]\n\nattributes:\n  - key: [any_key]\n    name: \"[Display Name]\"\n    value: [any value - string, number, boolean, array, object]\n    dataType: [string|int|float|boolean|stringArray|date|url|markdown|object]\n\ntags:\n  - [relevant-tags]\n\nchildren:\n  - id: \"[child-id]\"\n    type: \"[child-type]\"  # Can be different from parent\n    name: \"[Child Name]\"\n    # ...same structure recursively\n```\n\n### Custom Type Examples\n\n**Not in templates? Just invent the type:**\n\n```yaml\n# A recipe\ntype: recipe\nattributes:\n  - key: prep_time\n    value: 30\n    dataType: int\n  - key: ingredients\n    value: [\"flour\", \"sugar\", \"eggs\"]\n    dataType: stringArray\n\n# A meeting note\ntype: meeting\nattributes:\n  - key: attendees\n    value: [\"Alice\", \"Bob\"]\n    dataType: stringArray\n  - key: action_items\n    value: 3\n    dataType: int\n\n# A research paper\ntype: research\nattributes:\n  - key: doi\n    value: \"10.1234/example\"\n    dataType: string\n  - key: peer_reviewed\n    value: true\n    dataType: boolean\n\n# A playlist\ntype: playlist\nchildren:\n  - type: track\n    name: \"Song Title\"\n    attributes:\n      - key: artist\n        value: \"Artist Name\"\n      - key: duration_seconds\n        value: 245\n        dataType: int\n\n# A workout routine\ntype: workout\nchildren:\n  - type: exercise\n    name: \"Squats\"\n    attributes:\n      - key: sets\n        value: 3\n        dataType: int\n      - key: reps\n        value: 12\n        dataType: int\n\n# An API endpoint\ntype: endpoint\nattributes:\n  - key: method\n    value: \"POST\"\n  - key: path\n    value: \"/api/v1/users\"\n  - key: auth_required\n    value: true\n    dataType: boolean\n```\n\n### Guidelines for Custom Types\n\n1. **Type names:** Use lowercase with hyphens (`meeting-notes`, `api-endpoint`, `character-sheet`)\n2. **Be semantic:** Name types by what they ARE, not what they contain\n3. **Attributes for structured data:** Anything with a specific value goes in attributes\n4. **Body for prose:** Free-form text, descriptions, notes\n5. **Children for hierarchy:** Sub-items, sections, steps, components\n6. **Tags for discovery:** Cross-cutting categories, searchable labels\n\n### When to Use What\n\n| Content Style | Use |\n|--------------|-----|\n| Key-value data | `attributes` array |\n| Long-form text | `body` field (markdown) |\n| Structured sections | `children` array with `type: section` |\n| Sub-items of same kind | `children` with same type as parent |\n| Mixed sub-items | `children` with different types |\n| Links to other files | `include: \"./path/file.codex.yaml\"` |\n| External references | `external_url` or `relations` array |\n\n---\n\n## COMMON TEMPLATES (Reference Examples)\n\n### 1. Venue / Location Database Entry\n\nFor planetariums, theaters, studios, or any venue with technical specs:\n\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n  documentVersion: \"1.0.0\"\n  author: \"Studio Phong\"\n  created: \"[ISO-8601]\"\n  updated: \"[ISO-8601]\"\n\nid: \"[venue-slug]\"\ntype: venue\ntitle: \"[Display Name with Emoji]\"\nsummary: \"[One-line venue description]\"\nstatus: private\n\nbody: |\n  [Extended description, history, unique features, and context.]\n\nimage: \"/[Category]/[venue-slug]/[main-image].jpg\"\n\nimages:\n  - url: \"/[Category]/[venue-slug]/exterior.jpg\"\n    caption: \"Exterior view\"\n  - url: \"/[Category]/[venue-slug]/dome.jpg\"\n    caption: \"Interior dome\"\n\nattributes:\n  - key: venue_type\n    name: \"Venue Type\"\n    value: \"university_campus\"  # or: science_center, private, municipal, corporate\n    dataType: string\n  - key: dome_diameter_m\n    name: \"Dome Diameter\"\n    value: 19.8\n    dataType: float\n  - key: seating_capacity\n    name: \"Seating Capacity\"\n    value: 206\n    dataType: int\n  - key: projection_system\n    name: \"Projection System\"\n    value: \"Sky-Skan Definiti 8K\"\n    dataType: string\n  - key: audio_system\n    name: \"Audio System\"\n    value: \"7.1 Surround\"\n    dataType: string\n  - key: rental_available\n    name: \"Available for Rental\"\n    value: true\n    dataType: boolean\n  - key: gps_coordinates\n    name: \"GPS\"\n    value: \"40.0076, -105.2622\"\n    dataType: string\n\ntags:\n  - planetarium\n  - north-america\n  - 8k-projection\n  - rental-available\n\nexternal_url: \"https://venue-website.com\"\n```\n\n### 2. Character (Narrative)\n\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n  documentVersion: \"1.0.0\"\n  author: \"[Author]\"\n  created: \"[ISO-8601]\"\n\nid: \"[uuid-v4]\"\ntype: character\nsummary: \"[One-line character description]\"\nstatus: draft\nfeatured: true\n\nbody: |\n  [Extended description, backstory, personality, arc overview]\n\nimage: \"/Characters/[character-slug].jpg\"\n\nattributes:\n  - key: age\n    name: \"Age\"\n    value: 25\n    dataType: int\n  - key: role\n    name: \"Role\"\n    value: \"Protagonist\"\n    dataType: string\n  - key: abilities\n    name: \"Abilities\"\n    value:\n      - \"Telepathy\"\n      - \"Precognition\"\n    dataType: stringArray\n\nrelations:\n  - targetId: \"[related-character-uuid]\"\n    kind: \"ally\"\n    strength: 0.8\n    reciprocal: true\n\nchildren:\n  - id: \"[arc-uuid]\"\n    type: arc\n    name: \"[Character Arc Name]\"\n\ntags:\n  - character\n  - protagonist\n  - [story-tag]\n```\n\n---\n\n## Node Types Reference\n\n| Domain | Types |\n|--------|-------|\n| **Business** | `budget`, `budget_item`, `presentation`, `slide`, `organization`, `partner`, `asset_registry`, `asset`, `asset_category` |\n| **Technical** | `technical-architecture`, `component`, `implementation_phase`, `pipeline`, `phase`, `step` |\n| **Production** | `script`, `act`, `beat`, `scene`, `process`, `shot_category`, `shot` |\n| **Content** | `book`, `chapter`, `article`, `section` |\n| **Venues** | `venue`, `location`, `region` |\n| **Narrative** | `universe`, `world`, `character`, `arc`, `faction`, `item` |\n| **Organization** | `index`, `collection`, `case_study` |\n\n## Common Attribute Data Types\n\n`int`, `float`, `boolean`, `string`, `stringArray`, `date`, `url`, `markdown`, `object`\n\n## Relation Kinds\n\n- `parent` / `child`\n- `partner` / `collaborator`\n- `features` / `featured-in`\n- `set-in` / `contains`\n- `precedes` / `follows`\n- `ally` / `enemy`\n- `mentors` / `student-of`\n\n## Key Rules\n\n1. **Only `metadata.formatVersion` is required** - everything else optional\n2. **Use pipe `|` for multiline strings** - preserves markdown formatting\n3. **Perfect recursion** - any node can have children with same structure\n4. **Include directives** - reference files with `include: \"./path/file.codex.yaml\"`\n5. **Status doesn't inherit** - each node sets its own\n6. **Paths starting with `/`** - relative to Git repository root\n7. **Relative paths `./`** - resolved from current file's directory\n8. **NEVER create `.index.codex.yaml` files** - they are system-generated by Chapterwise\n\n## Workflow\n\n1. **Ask** what type of content the user wants to create/convert\n2. **Match or invent** - use a template if it fits, otherwise create a custom type\n3. **Generate** properly formatted YAML with real UUIDs and timestamps\n4. **Structure appropriately:**\n   - Attributes for structured/typed data\n   - Body for prose and markdown content\n   - Children for hierarchy and sub-items\n5. **Apply tags** - for discoverability and organization\n6. **Suggest children** - recommend logical sub-nodes if applicable\n7. **Run auto-fixer** after substantial work (see below)\n\n---\n\n## Auto-Fixer (ALWAYS RUN AFTER ADDING ENTITIES)\n\n**After adding ANY new entity/node to a codex file, ALWAYS run the auto-fixer:**\n\n```bash\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py <file.codex.yaml>\n```\n\n### When to Run Auto-Fixer\n\nRun it after:\n- Creating a new codex file\n- Adding ANY new node/child (even one)\n- Converting content to codex format\n- Restructuring or moving nodes\n- Any edit that creates new entities\n\n### What It Fixes\n\n| Issue | Fix Applied |\n|-------|-------------|\n| Missing `metadata` section | Adds `metadata.formatVersion: \"1.2\"` |\n| Missing `documentVersion` | Adds `\"1.0.0\"` |\n| Legacy fields (`packetType`, `codexId`, `version`) | Removes or migrates them |\n| Missing node `id` | Generates UUID v4 |\n| Invalid UUID format | Regenerates valid UUID |\n| Duplicate IDs | Generates new unique IDs |\n| Missing `type` on nodes | Adds `type: \"node\"` |\n| Missing `name` on nodes | Adds `name: \"Untitled\"` |\n| Invalid attribute structure | Fixes `key`/`value` format |\n| Invalid relation structure | Fixes `targetId`/`type` format |\n| Empty names | Replaces with \"Untitled\" |\n| Long strings | Converts to YAML pipe (`|`) syntax |\n| Timecode calculation | Auto-calculates from durations |\n| Time pattern quoting | Ensures `\"01:30\"` not parsed as 90 |\n| Malformed YAML/JSON | Attempts syntax recovery |\n\n### Command-Line Options\n\n```bash\n# Fix a single file\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/file.codex.yaml\n\n# Fix all files in directory recursively\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/directory --recursive\n\n# Dry run (preview fixes without changing files)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/file.codex.yaml --dry-run\n\n# Regenerate ALL IDs (useful for duplicating content)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/file.codex.yaml --re-id\n\n# Verbose output\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/file.codex.yaml --verbose\n\n# Combine flags\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py /path/to/directory -r -d -v\n```\n\n### Quick Pattern\n\n```\n1. Write/edit codex content (add any new entity)\n2. Save file\n3. Run: python3 ${CLAUDE_PLUGIN_ROOT}/scripts/auto_fixer.py <file>\n4. Report fixes to user\n```\n\n**This is not optional.** Every new entity needs valid UUIDs and proper formatting.\n\n## Remember\n\n- **Templates are examples, not limits** - create any type you need\n- **The format is recursive** - any node can contain any other node\n- **Invent types freely** - `type: grocery-list` is just as valid as `type: character`\n- **Mix and match** - a `project` can have children of type `task`, `note`, `reference`, `milestone`\n- **Always run auto-fixer** - it catches issues you won't notice\n",
        "plugins/chapterwise-codex/commands/generate-tags.md": "---\ndescription: Auto-generate tags from content in codex or markdown files\nallowed-tools: Read, Grep, Glob, Bash, Write, Edit\ntriggers:\n  - generate tags\n  - auto tags\n  - extract tags\n  - create tags\n  - tag extraction\n---\n\n# Generate Tags\n\nAutomatically extract meaningful tags from content using text analysis.\n\n**Supports both:**\n- Full Codex files (`.codex.yaml`, `.codex.json`)\n- Codex Lite / Markdown files (`.md` with YAML frontmatter)\n\n## How It Works\n\n1. Extracts text from `body` fields (Codex) or markdown body (Codex Lite)\n2. Tokenizes with support for extended Latin characters\n3. Filters out 200+ common stopwords and manuscript boilerplate\n4. Analyzes word frequency with heading boost\n5. Extracts meaningful bigrams (two-word phrases)\n6. Returns top N tags with smart capitalization\n\n## Usage\n\n```bash\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/tag_generator.py <file> [options]\n```\n\n### Options\n\n```bash\n# Codex files\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/tag_generator.py story.codex.yaml\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/tag_generator.py story.codex.yaml --count 15\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/tag_generator.py story.codex.yaml --follow-includes\n\n# Markdown (Codex Lite) files\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/tag_generator.py chapter.md\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/tag_generator.py chapter.md --count 5 --min-count 2\n\n# Common options\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/tag_generator.py <file> --min-count 5\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/tag_generator.py <file> --format detailed\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/tag_generator.py <file> --dry-run\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/tag_generator.py <file> -v\n```\n\n### Parameters\n\n| Option | Default | Description |\n|--------|---------|-------------|\n| `--count N` | 10 | Maximum tags per entity |\n| `--min-count N` | 3 | Minimum word occurrences to be a tag |\n| `--format` | simple | `simple` (strings) or `detailed` (with counts) |\n| `--follow-includes` | false | Process included files |\n| `-d`, `--dry-run` | false | Preview without changes |\n\n## Output Formats\n\n### Simple (default)\n\n```yaml\ntags:\n  - Roman\n  - Senate\n  - Awakening\n  - Political Intrigue\n```\n\n### Detailed\n\n```yaml\ntags:\n  - name: Roman\n    count: 15\n  - name: Senate\n    count: 12\n  - name: Awakening\n    count: 8\n```\n\n## Algorithm Features\n\n- **Heading Boost:** Words in markdown headings get 2x weight\n- **Bigram Extraction:** Captures two-word phrases like \"Roman Senate\"\n- **Redundancy Avoidance:** If \"Roman Senate\" is a tag, \"Roman\" and \"Senate\" won't be added separately\n- **Smart Capitalization:** Tags are title-cased appropriately\n- **Stopword Filtering:** Removes common words, manuscript terms (chapter, preface, etc.)\n\n## Workflow\n\n1. User asks to generate or extract tags\n2. If no file specified, ask which file\n3. Ask for preferences (count, format) if not obvious\n4. Run tag generator\n5. Report results: entities updated, total tags generated\n6. If no tags generated, explain possible reasons (short content, low word frequency)\n\n## Tips\n\n- For short content, try `--min-count 1` or `--min-count 2`\n- Use `--format detailed` to see which words occur most\n- Run `--dry-run` first to preview the tags\n- Use `--follow-includes` for projects with modular files\n",
        "plugins/chapterwise-codex/commands/implode.md": "---\ndescription: Merge separate codex files back into one document\nallowed-tools: Read, Grep, Glob, Bash, Write, Edit\ntriggers:\n  - implode codex\n  - merge includes\n  - consolidate codex\n  - inline includes\n  - combine codex files\n---\n\n# Codex Imploder - Merge Includes Back Into Parent\n\nResolve `include:` directives in a codex file, reading the referenced files and merging their content back into the parent document. This is the **inverse of the Explode operation**.\n\n## When This Skill Applies\n\n- Consolidating modular files back into a single document\n- Creating self-contained codex files for distribution\n- Simplifying structure when modularity is no longer needed\n- Archiving projects with all content inline\n- Preparing a codex for export or sharing\n\n## Script Location\n\n```\n${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py\n```\n\n## Quick Start\n\n```bash\n# Merge all includes back into parent\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml\n\n# Preview what would be merged (no changes made)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml --dry-run\n\n# Merge and delete source files\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml --delete-sources\n```\n\n## What It Does\n\n1. **Reads** the input codex file\n2. **Finds** all `include:` directives in the children array\n3. **Reads** each referenced file\n4. **Merges** their content back into the parent (removing standalone metadata)\n5. **Optionally deletes** the source files after merge\n6. **Optionally deletes** empty folders\n7. **Creates backup** of original file (unless disabled)\n\n## Before/After Example\n\n**Before (story.codex.yaml with includes):**\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n  exploded:\n    timestamp: \"2026-01-24T...\"\n    extracted_count: 2\n\nid: story-001\ntype: story\n\nchildren:\n  - include: \"/characters/Hero.codex.yaml\"\n  - include: \"/locations/Castle.codex.yaml\"\n  - id: chapter-001\n    type: chapter\n    name: \"Chapter 1\"\n```\n\n**Separate files:**\n- `./characters/Hero.codex.yaml` (contains character data with its own metadata)\n- `./locations/Castle.codex.yaml` (contains location data with its own metadata)\n\n**Run:** `python3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml`\n\n**After (story.codex.yaml - consolidated):**\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n  imploded:\n    timestamp: \"2026-01-24T...\"\n    merged_count: 2\n\nid: story-001\ntype: story\n\nchildren:\n  - id: char-001\n    type: character\n    name: \"Hero\"\n    body: |\n      The protagonist of our story...\n\n  - id: loc-001\n    type: location\n    name: \"Castle\"\n    body: |\n      An ancient fortress...\n\n  - id: chapter-001\n    type: chapter\n    name: \"Chapter 1\"\n```\n\n## Command-Line Usage\n\n```bash\n# Basic: merge all includes\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml\n\n# Preview what would be merged (no changes made)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml --dry-run\n\n# Merge and delete the original included files\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml --delete-sources\n\n# Also delete folders that become empty\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml --delete-sources --delete-empty-folders\n\n# Recursive: resolve nested includes (includes within included files)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml --recursive\n\n# Skip backup creation\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml --no-backup\n\n# Verbose output\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml -v\n\n# Combine options\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py story.codex.yaml --recursive --delete-sources --delete-empty-folders -v\n```\n\n## Options Reference\n\n| Flag | Description | Default |\n|------|-------------|---------|\n| `--dry-run` | Preview without making changes | `false` |\n| `--delete-sources` | Delete included files after merging | `false` |\n| `--delete-empty-folders` | Delete folders that become empty | `false` |\n| `--recursive` | Resolve nested includes | `false` |\n| `--no-backup` | Skip backup of original file | Creates backup |\n| `-v, --verbose` | Detailed logging | Quiet |\n\n## Python API Usage\n\n```python\nfrom implode_codex import CodexImploder\n\nimploder = CodexImploder()\n\nresult = imploder.implode(\n    input_path=\"story.codex.yaml\",\n    options={\n        \"dry_run\": False,\n        \"delete_sources\": True,\n        \"delete_empty_folders\": True,\n        \"recursive\": False,\n        \"backup\": True,\n        \"verbose\": True\n    }\n)\n\nif result[\"success\"]:\n    print(f\"Merged {result['merged_count']} includes\")\n    for file_path in result[\"merged_files\"]:\n        print(f\"  - {file_path}\")\n    if result[\"deleted_files\"]:\n        print(f\"Deleted {len(result['deleted_files'])} source files\")\nelse:\n    print(f\"Failed: {result['errors']}\")\n```\n\n## Helper Methods\n\n```python\n# Check how many includes a file has\ncount = CodexImploder.get_include_count(\"story.codex.yaml\")\nprint(f\"Found {count} includes\")\n\n# Get list of include paths\npaths = CodexImploder.get_include_paths(\"story.codex.yaml\")\nfor path in paths:\n    print(f\"  - {path}\")\n```\n\n## Workflow Patterns\n\n### Archive a Project\n```bash\n# Consolidate everything into one file for archival\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py project.codex.yaml --recursive --delete-sources --delete-empty-folders\n```\n\n### Create Distribution Copy\n```bash\n# Make a self-contained copy without modifying originals\ncp project.codex.yaml project-dist.codex.yaml\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py project-dist.codex.yaml --recursive\n```\n\n### Preview Before Merging\n```bash\n# Always preview first with large projects\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py project.codex.yaml --dry-run -v\n# Then execute\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py project.codex.yaml\n```\n\n## Include Path Resolution\n\n| Path Format | Resolution |\n|-------------|------------|\n| `/characters/Hero.codex.yaml` | Relative to parent file's directory |\n| `./characters/Hero.codex.yaml` | Relative to parent file's directory |\n| `../shared/Template.codex.yaml` | Resolved relative to parent |\n\n## What Gets Merged\n\n- **Included:** All node data (id, type, name, body, attributes, children, etc.)\n- **Excluded:** The `metadata` block from included files (it's for standalone use only)\n\n## Tips\n\n- **Start with `--dry-run`** to preview what will be merged\n- **Use `--recursive`** if your included files also have includes\n- **Backup is automatic** unless you use `--no-backup`\n- **Metadata updates:** `exploded` metadata is removed, `imploded` metadata is added\n- **Run auto-fixer** after imploding to ensure the merged file is valid\n\n## Explode/Implode Cycle\n\n```\n1. Start with inline content\n2. Run explode to modularize:\n   python3 ${CLAUDE_PLUGIN_ROOT}/scripts/explode_codex.py project.codex.yaml --types character,location\n3. Work on individual files\n4. Run implode to consolidate:\n   python3 ${CLAUDE_PLUGIN_ROOT}/scripts/implode_codex.py project.codex.yaml --delete-sources\n5. Back to single file\n```\n",
        "plugins/chapterwise-codex/commands/index.md": "---\ndescription: Generate an index.codex.yaml for your project\nallowed-tools: Read, Grep, Glob, Bash, Write, Edit\ndisable-model-invocation: true\ntriggers:\n  - generate index\n  - create index\n  - codex index\n  - index codex\n  - setup chapterwise project\n---\n\n# Chapterwise Codex Index Generator\n\nGenerate `index.codex.yaml` files that define project structure for Chapterwise Git projects. The index controls how content is discovered, organized, and displayed.\n\n## When This Skill Applies\n\n- User wants to create an index.codex.yaml for a project\n- User wants to set up a Chapterwise Git project\n- User mentions \"generate index\", \"codex index\", or similar\n- User needs to configure include/exclude patterns\n\n## Important Rules\n\n1. **NEVER create `.index.codex.yaml` (hidden) files** - those are system-generated caches\n2. **DO create `index.codex.yaml` (visible)** - these are user-controlled project definitions\n3. **Type fields auto-detect** - never manually specify `type` on children\n4. **Status doesn't inherit** - each item must explicitly set its own status\n\n## Index File Location\n\nPlace `index.codex.yaml` at the **root of your Git repository**. This is the entry point for Chapterwise.\n\n## Script Location\n\n```\n${CLAUDE_PLUGIN_ROOT}/scripts/index_generator.py\n```\n\n## Minimal Index (Auto-Discovery)\n\nFor most projects, start with this minimal index that auto-discovers content:\n\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n\nid: index-root\ntype: index\ntitle: \"My Project\"\nsummary: \"Project description here\"\nstatus: private\n\npatterns:\n  include:\n    - \"**/*.codex.yaml\"\n    - \"**/*.codex.json\"\n    - \"**/*.md\"\n  exclude:\n    - \"**/node_modules/**\"\n    - \"**/.git/**\"\n    - \"**/.*\"\n    - \"**/_ARCHIVE/**\"\n```\n\n## Full Index Structure\n\n```yaml\nmetadata:\n  formatVersion: \"1.2\"\n  documentVersion: \"1.0.0\"\n  created: \"2026-01-24T00:00:00Z\"\n  author: \"Author Name\"\n\nid: index-root\ntype: index\ntitle: \"Display Title\"\nsummary: \"One-line project description\"\nstatus: private\n\n# File discovery patterns (gitignore-like syntax)\npatterns:\n  include:\n    - \"**/*.codex.yaml\"\n    - \"**/*.codex.json\"\n    - \"**/*.md\"\n  exclude:\n    - \"**/node_modules/**\"\n    - \"**/.git/**\"\n    - \"**/.*\"\n    - \"**/_ARCHIVE/**\"\n    - \"**/dist/**\"\n    - \"**/build/**\"\n\n# Display configuration\ndisplay:\n  defaultView: \"tree\"      # tree, list, or grid\n  sortBy: \"order\"          # order, name, modified, type\n  groupBy: \"folder\"        # folder, type, custom, none\n  showHidden: false\n\n# Custom type styling (emoji/colors per type)\ntypeStyles:\n  character:\n    emoji: \"üë§\"\n    color: \"#10B981\"\n  location:\n    emoji: \"üìç\"\n    color: \"#3B82F6\"\n  chapter:\n    emoji: \"üìñ\"\n    color: \"#8B5CF6\"\n\n# Explicit folder structure (optional - omit for full auto-discovery)\nchildren:\n  - name: \"Characters\"\n    order: 1\n    emoji: \"üë•\"\n    children: []  # Auto-discover contents\n\n  - name: \"Locations\"\n    order: 2\n    emoji: \"üó∫Ô∏è\"\n    children: []\n\n  - name: \"Story\"\n    order: 3\n    emoji: \"üìö\"\n    children: []\n```\n\n## Pattern Syntax Reference\n\n| Pattern | Matches |\n|---------|---------|\n| `*.codex.yaml` | All codex files in root |\n| `**/*.codex.yaml` | All codex files recursively |\n| `docs/**/*.md` | Markdown in docs and subfolders |\n| `!README.md` | Exclude specific file |\n| `**/node_modules/**` | Exclude node_modules anywhere |\n\n## Child Node Fields\n\n| Field | Required | Default | Purpose |\n|-------|----------|---------|---------|\n| name | Yes | - | Folder/file name (no extension) |\n| title | No | name | Display alternative |\n| order | No | 999 | Sort position |\n| emoji | No | typeStyles | Visual indicator |\n| status | No | \"private\" | published/private/draft |\n| featured | No | false | Highlight at top |\n| hidden | No | false | Hide from views |\n| children | No | auto | Nested items (folders only) |\n\n## Status Values\n\n- `\"published\"` - Visible to everyone\n- `\"private\"` - Owner only (default)\n- `\"draft\"` - Work in progress, owner only\n\n**Status does NOT inherit.** Each item must explicitly set `status: published` to be public.\n\n## Script Usage\n\n```bash\n# Generate index for current directory\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/index_generator.py .\n\n# Generate for specific path\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/index_generator.py /path/to/project\n\n# Preview without writing\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/index_generator.py . --dry-run\n\n# Include markdown files\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/index_generator.py . --include-md\n\n# Verbose output\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/index_generator.py . -v\n```\n\n## Workflow\n\n1. **Ask** about project name and structure\n2. **Generate** minimal or full index based on needs\n3. **Run generator** to scan and populate children\n4. **Run auto-fixer** on the generated index\n5. **Commit** the index.codex.yaml file\n\n## Common Use Cases\n\n| Scenario | Approach |\n|----------|----------|\n| New project | Minimal index with auto-discovery |\n| Existing content | Generate with `--scan` to detect structure |\n| Curated order | Explicit children with `order` fields |\n| Mixed | Explicit folders, auto-discover within |\n\n## Remember\n\n- `index.codex.yaml` = user-controlled (create this)\n- `.index.codex.yaml` = system cache (never create)\n- Types auto-detect from extensions\n- Status must be set per-item\n- Patterns use gitignore syntax\n",
        "plugins/chapterwise-codex/commands/lite.md": "---\ndescription: Create Codex Lite files (Markdown with YAML frontmatter)\nallowed-tools: Read, Grep, Glob, Bash, Write, Edit\ntriggers:\n  - codex lite\n  - lite format\n  - markdown frontmatter\n  - add frontmatter\n  - codex markdown\n---\n\n# Chapterwise Codex Lite Format\n\nAdd Chapterwise metadata to standard Markdown files using YAML frontmatter. Codex Lite is the **simplified format** for flat documents that don't need hierarchy.\n\n## When This Skill Applies\n\n- User wants to add metadata to a Markdown file\n- User mentions \"codex lite\", \"frontmatter\", or \"markdown with metadata\"\n- User has simple documents that don't need nested children\n- User wants portable files that work anywhere\n\n## When to Use Codex Lite vs Full Codex\n\n| Use Codex Lite | Use Full Codex |\n|----------------|----------------|\n| Simple documents | Complex hierarchies |\n| Notes, articles | Scripts with acts/beats |\n| Character profiles | Multi-level structures |\n| Location descriptions | Budgets with line items |\n| Any flat content | Anything with children |\n\n## File Format\n\n- **Extension:** `.md` (standard Markdown)\n- **Frontmatter:** YAML between `---` delimiters at file start\n- **Body:** Standard Markdown after closing `---`\n\n## Script Location\n\n```\n${CLAUDE_PLUGIN_ROOT}/scripts/lite_helper.py\n```\n\n## All Fields Are Optional\n\nA bare Markdown file with no frontmatter is valid Codex Lite. Add fields as needed.\n\n## Template\n\n```markdown\n---\ntype: document\nsummary: \"Brief one-line description\"\ntags: tag1, tag2, tag3\nstatus: private\n---\n\n# Document Title\n\nYour content here in standard Markdown...\n```\n\n## Available Fields\n\n### Core Identity\n\n| Field | Type | Purpose |\n|-------|------|---------|\n| `type` | string | Node category (character, location, chapter, note, etc.) |\n| `name` | string | Display name |\n| `title` | string | Alternative display title |\n| `summary` | string | Brief description |\n| `id` | string | Unique identifier (UUID recommended) |\n\n### Organization\n\n| Field | Type | Purpose |\n|-------|------|---------|\n| `tags` | string/array | Categories (comma-separated or YAML array) |\n| `author` | string | Author name(s) |\n| `last_updated` | string | ISO-8601 date |\n\n### Publishing\n\n| Field | Type | Purpose |\n|-------|------|---------|\n| `status` | string | `published`, `private`, or `draft` |\n| `featured` | boolean | Highlight this item |\n\n### Media\n\n| Field | Type | Purpose |\n|-------|------|---------|\n| `image` | string | Cover image URL/path |\n| `images` | array | Gallery of images |\n\n### Advanced\n\n| Field | Type | Purpose |\n|-------|------|---------|\n| `attributes` | array | Structured key-value metadata |\n| `word_count` | integer | Auto-calculated by helper |\n\n## Title Detection Priority\n\nWhen displaying, Chapterwise uses this order:\n1. `name` field in frontmatter\n2. `title` field in frontmatter\n3. First `# H1` heading in body\n4. Filename (fallback)\n\n## Common Types\n\n- `character` - Person or entity\n- `location` - Place or setting\n- `chapter` - Story section\n- `scene` - Story moment\n- `note` - General note\n- `concept` - Idea or theme\n- `document` - Generic document\n- `article` - Published writing\n\n## Examples\n\n### Character Profile\n\n```markdown\n---\ntype: character\nsummary: \"A quantum physicist who discovers her memories span multiple timelines\"\ntags: protagonist, scientist, multiverse\nstatus: draft\nimage: \"/images/maya-chen.jpg\"\n---\n\n# Maya Chen\n\n## Background\n\nMaya grew up in Vancouver...\n\n## Personality\n\nShe's driven by curiosity...\n```\n\n### Location Description\n\n```markdown\n---\ntype: location\nsummary: \"A convergence point between parallel timelines\"\ntags: setting, multiverse, key-location\n---\n\n# The Nexus\n\nA shimmering void where realities overlap...\n```\n\n### Simple Note\n\n```markdown\n---\ntype: note\ntags: research, quantum-mechanics\n---\n\n# Notes on Quantum Entanglement\n\nKey concepts to explore...\n```\n\n## Script Usage\n\n```bash\n# Validate/fix a markdown file's frontmatter\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/lite_helper.py document.md\n\n# Process all markdown files in directory\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/lite_helper.py /path/to/folder --recursive\n\n# Preview without changes\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/lite_helper.py document.md --dry-run\n\n# Add missing frontmatter to bare markdown\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/lite_helper.py document.md --init\n```\n\n## What the Helper Fixes\n\n| Issue | Fix Applied |\n|-------|-------------|\n| Missing `id` | Generates UUID |\n| Missing `name` | Extracts from H1 or filename |\n| Missing `type` | Adds `type: document` |\n| Invalid UUID | Regenerates valid UUID |\n| Word count | Calculates and updates `word_count` |\n| No frontmatter | Adds minimal frontmatter (with `--init`) |\n\n## Workflow\n\n1. **Create** markdown file with content\n2. **Add** frontmatter with relevant fields\n3. **Run** lite_helper.py to validate/fix\n4. **Commit** the file\n\n## Best Practices\n\n- **Keep frontmatter minimal** - only include fields you need\n- **Use H1 for title** - `name` field only when different from heading\n- **Comma-separated tags** - simpler than YAML arrays\n- **Status for visibility** - use `status: published` for public items\n- **Attributes sparingly** - only for truly structured data\n\n## Remember\n\n- **All fields optional** - bare Markdown is valid\n- **No hierarchy** - use full Codex for nested children\n- **No relations** - use full Codex for entity relationships\n- **Portable** - works with any Markdown renderer\n",
        "plugins/chapterwise-codex/commands/update-word-count.md": "---\ndescription: Update word count metadata in codex files\nallowed-tools: Read, Grep, Glob, Bash, Write, Edit\ntriggers:\n  - word count\n  - update word count\n  - count words\n  - calculate words\n  - word statistics\n---\n\n# Update Word Count\n\nCount words in body fields and update the `word_count` attribute for all entities in a codex file.\n\n## When to Use\n\n- After editing body content in a codex file\n- To get accurate word counts for manuscripts, chapters, or documents\n- Before publishing or exporting content\n- For tracking writing progress\n\n## Usage\n\n```bash\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/word_count.py <file_or_directory> [options]\n```\n\n### Options\n\n```bash\n# Update word count in a single file\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/word_count.py story.codex.yaml\n\n# Update word count in a markdown file (Codex Lite)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/word_count.py chapter.md\n\n# Process included files too\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/word_count.py story.codex.yaml --follow-includes\n\n# Process all files in a directory\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/word_count.py /path/to/codex\n\n# Process directory recursively\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/word_count.py /path/to/codex --recursive\n\n# Skip markdown files when processing directories\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/word_count.py /path/to/codex -r --no-markdown\n\n# Dry run (preview without changes)\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/word_count.py story.codex.yaml --dry-run\n\n# Verbose output\npython3 ${CLAUDE_PLUGIN_ROOT}/scripts/word_count.py story.codex.yaml -v\n```\n\n### Flags\n\n| Flag | Description |\n|------|-------------|\n| `-r`, `--recursive` | Process subdirectories |\n| `--follow-includes` | Process included files |\n| `-d`, `--dry-run` | Preview without changes |\n| `--no-markdown` | Skip `.md` files in directories |\n| `-v`, `--verbose` | Detailed output |\n\n## How It Works\n\n### For Codex Files (.codex.yaml)\n\n1. Traverses the document tree recursively\n2. For each entity with a `body` field:\n   - Counts words (splits on whitespace)\n   - Finds or creates a `word_count` attribute\n   - Updates the value if changed\n\n**Before:**\n```yaml\ntype: chapter\nname: The Beginning\nbody: |\n  It was a dark and stormy night. The wind howled through\n  the empty streets as Sarah made her way home.\n```\n\n**After:**\n```yaml\ntype: chapter\nname: The Beginning\nbody: |\n  It was a dark and stormy night. The wind howled through\n  the empty streets as Sarah made her way home.\nattributes:\n  - key: word_count\n    name: Word Count\n    value: 24\n    dataType: int\n```\n\n### For Codex Lite Files (.md)\n\n1. Parses YAML frontmatter\n2. Counts words in the markdown body (after frontmatter)\n3. Updates `word_count` in frontmatter\n\n**Before:**\n```markdown\n---\ntype: document\nname: My Chapter\n---\n\nContent goes here with many words...\n```\n\n**After:**\n```markdown\n---\ntype: document\nname: My Chapter\nword_count: 5\n---\n\nContent goes here with many words...\n```\n\n## Handling Includes\n\nWith `--follow-includes`, the script will:\n1. Detect `include` directives in children\n2. Load and process included files\n3. Update word counts in those files too\n4. Track visited files to avoid cycles\n\n## Example Output\n\n```\n[DRY RUN] Updating word counts\nFile: story.codex.yaml\n\nEntities updated: 12\nTotal words: 45,230\n\nFiles modified:\n  - story.codex.yaml\n  - chapters/ch01.codex.yaml\n  - chapters/ch02.codex.yaml\n\nWarnings:\n  - Include file not found: chapters/deleted.codex.yaml\n```\n\n## Workflow\n\n1. User asks to update word counts\n2. If no file specified, ask which file or directory\n3. Ask if include files should be processed\n4. Run word counter\n5. Report: entities updated, total words, files modified\n6. List any warnings (missing includes, etc.)\n"
      },
      "plugins": [
        {
          "name": "chapterwise-codex",
          "description": "Skills for creating, validating, and managing Chapterwise Codex documents",
          "version": "1.0.0",
          "source": "./plugins/chapterwise-codex",
          "tags": [
            "codex",
            "yaml",
            "document-management",
            "storytelling"
          ],
          "category": "productivity",
          "categories": [
            "codex",
            "document-management",
            "productivity",
            "storytelling",
            "yaml"
          ],
          "install_commands": [
            "/plugin marketplace add ansonphong/chapterwise-claude-plugins",
            "/plugin install chapterwise-codex@chapterwise-plugins"
          ]
        }
      ]
    }
  ]
}