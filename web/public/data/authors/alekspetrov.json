{
  "author": {
    "id": "alekspetrov",
    "display_name": "Aleks Petrov",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/5360806?u=830c92208549ab5a7834a2f460f06eea6720c9f9&v=4",
    "url": "https://github.com/alekspetrov",
    "bio": "Co-Founder, CTO @ QuantFlow â€” Software Development Studio focused on AI.",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 29,
      "total_stars": 147,
      "total_forks": 7
    }
  },
  "marketplaces": [
    {
      "name": "navigator-marketplace",
      "version": null,
      "description": "Context Engineering + Human-AI Collaboration Framework with Theory of Mind, Loop Mode, Task Mode, and Project Knowledge Graph",
      "owner_info": {
        "name": "Aleks Petrov",
        "email": "aleks@example.com"
      },
      "keywords": [],
      "repo_full_name": "alekspetrov/navigator",
      "repo_url": "https://github.com/alekspetrov/navigator",
      "repo_description": "Finish What You Start â€” Context engineering for Claude Code.         Sessions last 20+ exchanges instead of crashing at 7.",
      "homepage": "https://alekspetrov.com",
      "signals": {
        "stars": 147,
        "forks": 7,
        "pushed_at": "2026-01-23T17:11:08Z",
        "created_at": "2025-10-10T12:35:30Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".agent",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agent/grafana",
          "type": "tree",
          "size": null
        },
        {
          "path": ".agent/grafana/README.md",
          "type": "blob",
          "size": 7556
        },
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/README.md",
          "type": "blob",
          "size": 7249
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 3692
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 2053
        },
        {
          "path": ".claude",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude/skills/test-marker.md",
          "type": "blob",
          "size": 503
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 5992
        },
        {
          "path": "agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "agents/navigator-research.md",
          "type": "blob",
          "size": 2485
        },
        {
          "path": "agents/task-planner.md",
          "type": "blob",
          "size": 3120
        },
        {
          "path": "examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "examples/nextjs-saas",
          "type": "tree",
          "size": null
        },
        {
          "path": "examples/nextjs-saas/README.md",
          "type": "blob",
          "size": 4915
        },
        {
          "path": "hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "hooks/monitor-tokens.py",
          "type": "blob",
          "size": 3867
        },
        {
          "path": "hooks/workflow_enforcer.py",
          "type": "blob",
          "size": 3794
        },
        {
          "path": "skills-local",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills-local/social-media-post",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills-local/social-media-post/SKILL.md",
          "type": "blob",
          "size": 14976
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/backend-endpoint",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/backend-endpoint/SKILL.md",
          "type": "blob",
          "size": 14012
        },
        {
          "path": "skills/backend-test",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/backend-test/SKILL.md",
          "type": "blob",
          "size": 952
        },
        {
          "path": "skills/database-migration",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/database-migration/SKILL.md",
          "type": "blob",
          "size": 12266
        },
        {
          "path": "skills/frontend-component",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/frontend-component/SKILL.md",
          "type": "blob",
          "size": 13095
        },
        {
          "path": "skills/frontend-test",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/frontend-test/SKILL.md",
          "type": "blob",
          "size": 1043
        },
        {
          "path": "skills/nav-compact",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-compact/SKILL.md",
          "type": "blob",
          "size": 7510
        },
        {
          "path": "skills/nav-diagnose",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-diagnose/SKILL.md",
          "type": "blob",
          "size": 9841
        },
        {
          "path": "skills/nav-features",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-features/SKILL.md",
          "type": "blob",
          "size": 6443
        },
        {
          "path": "skills/nav-graph",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-graph/SKILL.md",
          "type": "blob",
          "size": 10605
        },
        {
          "path": "skills/nav-graph/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-graph/templates/memory-template.md",
          "type": "blob",
          "size": 305
        },
        {
          "path": "skills/nav-init",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-init/SKILL.md",
          "type": "blob",
          "size": 8978
        },
        {
          "path": "skills/nav-install-multi-claude",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-install-multi-claude/SKILL.md",
          "type": "blob",
          "size": 10075
        },
        {
          "path": "skills/nav-loop",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-loop/SKILL.md",
          "type": "blob",
          "size": 13839
        },
        {
          "path": "skills/nav-marker",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-marker/SKILL.md",
          "type": "blob",
          "size": 10362
        },
        {
          "path": "skills/nav-multi",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-multi/SKILL.md",
          "type": "blob",
          "size": 10067
        },
        {
          "path": "skills/nav-onboard",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-onboard/SKILL.md",
          "type": "blob",
          "size": 13092
        },
        {
          "path": "skills/nav-onboard/learning-tasks",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-onboard/learning-tasks/01-nav-start.md",
          "type": "blob",
          "size": 1924
        },
        {
          "path": "skills/nav-onboard/learning-tasks/02-nav-marker.md",
          "type": "blob",
          "size": 1941
        },
        {
          "path": "skills/nav-onboard/learning-tasks/03-nav-task.md",
          "type": "blob",
          "size": 2399
        },
        {
          "path": "skills/nav-onboard/learning-tasks/04-nav-sop.md",
          "type": "blob",
          "size": 2347
        },
        {
          "path": "skills/nav-onboard/learning-tasks/05-nav-compact.md",
          "type": "blob",
          "size": 2489
        },
        {
          "path": "skills/nav-onboard/learning-tasks/06-dev-skill.md",
          "type": "blob",
          "size": 2460
        },
        {
          "path": "skills/nav-onboard/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-onboard/templates/progress-template.md",
          "type": "blob",
          "size": 517
        },
        {
          "path": "skills/nav-onboard/templates/workflow-template.md",
          "type": "blob",
          "size": 2297
        },
        {
          "path": "skills/nav-profile",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-profile/SKILL.md",
          "type": "blob",
          "size": 12470
        },
        {
          "path": "skills/nav-release",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-release/SKILL.md",
          "type": "blob",
          "size": 5307
        },
        {
          "path": "skills/nav-simplify",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-simplify/SKILL.md",
          "type": "blob",
          "size": 11974
        },
        {
          "path": "skills/nav-skill-creator",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-skill-creator/SKILL.md",
          "type": "blob",
          "size": 12817
        },
        {
          "path": "skills/nav-skill-creator/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-skill-creator/examples/example-generated-skill.md",
          "type": "blob",
          "size": 2102
        },
        {
          "path": "skills/nav-skill-creator/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-skill-creator/templates/skill-template.md",
          "type": "blob",
          "size": 1759
        },
        {
          "path": "skills/nav-sop",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-sop/SKILL.md",
          "type": "blob",
          "size": 11473
        },
        {
          "path": "skills/nav-start",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-start/SKILL.md",
          "type": "blob",
          "size": 18978
        },
        {
          "path": "skills/nav-stats",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-stats/SKILL.md",
          "type": "blob",
          "size": 9184
        },
        {
          "path": "skills/nav-task-mode",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-task-mode/SKILL.md",
          "type": "blob",
          "size": 11630
        },
        {
          "path": "skills/nav-task",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-task/SKILL.md",
          "type": "blob",
          "size": 12928
        },
        {
          "path": "skills/nav-update-claude",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-update-claude/skill.md",
          "type": "blob",
          "size": 11003
        },
        {
          "path": "skills/nav-upgrade",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/nav-upgrade/SKILL.md",
          "type": "blob",
          "size": 16592
        },
        {
          "path": "skills/plugin-slash-command",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/plugin-slash-command/SKILL.md",
          "type": "blob",
          "size": 12180
        },
        {
          "path": "skills/plugin-slash-command/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/plugin-slash-command/examples/medium-command-example.md",
          "type": "blob",
          "size": 11497
        },
        {
          "path": "skills/plugin-slash-command/examples/simple-command-example.md",
          "type": "blob",
          "size": 13338
        },
        {
          "path": "skills/plugin-slash-command/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/plugin-slash-command/templates/command-template.md",
          "type": "blob",
          "size": 1500
        },
        {
          "path": "skills/product-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/product-design/GETTING-STARTED.md",
          "type": "blob",
          "size": 2399
        },
        {
          "path": "skills/product-design/INSTALL.md",
          "type": "blob",
          "size": 7837
        },
        {
          "path": "skills/product-design/README.md",
          "type": "blob",
          "size": 8312
        },
        {
          "path": "skills/product-design/SKILL.md",
          "type": "blob",
          "size": 20300
        },
        {
          "path": "skills/product-design/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/product-design/examples/dashboard-redesign-review.md",
          "type": "blob",
          "size": 7043
        },
        {
          "path": "skills/product-design/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/product-design/templates/design-review-report.md",
          "type": "blob",
          "size": 5164
        },
        {
          "path": "skills/visual-regression",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/visual-regression/SKILL.md",
          "type": "blob",
          "size": 13199
        },
        {
          "path": "skills/visual-regression/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/visual-regression/examples/design-system-vr.md",
          "type": "blob",
          "size": 2414
        },
        {
          "path": "skills/visual-regression/examples/existing-storybook-vr.md",
          "type": "blob",
          "size": 2005
        },
        {
          "path": "skills/visual-regression/examples/simple-component-vr.md",
          "type": "blob",
          "size": 5992
        },
        {
          "path": "src",
          "type": "tree",
          "size": null
        },
        {
          "path": "src/utils",
          "type": "tree",
          "size": null
        },
        {
          "path": "src/utils/README.md",
          "type": "blob",
          "size": 10719
        }
      ],
      "files": {
        ".claude-plugin/README.md": "# Navigator - Navigator\n\n**Context-efficient documentation that loads what you need, when you need it.**\n\n---\n\n## The Problem\n\nAI coding assistants have finite context windows. Traditional approaches load entire codebase documentation upfront, wasting 150k+ tokens before work begins. This leads to:\n\n- Context overflow mid-feature\n- Agent restarts and lost conversation history\n- Inconsistent architecture decisions\n- Documentation too \"expensive\" to reference\n\n---\n\n## The Solution\n\n**Navigator loads documentation on-demand, not upfront.**\n\nInstead of loading everything:\n```\nNavigator (2k tokens)\n  â†“\nCurrent task (3k tokens)\n  â†“\nRelevant system doc (5k tokens)\n  â†“\nSpecific SOP if needed (2k tokens)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTotal: 12k tokens (92% reduction)\n```\n\n---\n\n## Real Results\n\nFrom production usage (2-week experiment):\n\n| Metric | Before Navigator | After Navigator | Improvement |\n|--------|-------------|------------|-------------|\n| **Commits per session** | 1 commit @ 32% | 10 commits @ 18% | **10x productivity** |\n| **Session restarts** | 12+ per feature | 0 | **100% completion rate** |\n| **Doc loading** | 150k tokens | 12k tokens | **92% reduction** |\n| **Context remaining** | ~13% | ~86% | **6.6x more available** |\n\n---\n\n## Features\n\n### ğŸ“‚ Structured Documentation\n- `.agent/` folder with tasks, system docs, SOPs\n- Navigator-first pattern (always load roadmap first)\n- Living docs that update as code evolves\n\n### âš¡ Token Optimization\n- On-demand loading (not upfront)\n- Smart `/compact` strategy\n- Context budget tracking\n\n### ğŸ”„ Workflow Integration\n- `/nav:update-doc` command for maintenance\n- Optional Linear/Jira integration\n- Optional Slack/Discord notifications\n\n### ğŸ“ Rich Templates\n- Task documentation (feature planning)\n- SOP templates (process knowledge)\n- System architecture docs\n- Framework-specific examples\n\n---\n\n## Quick Start\n\n### Install Plugin\n\n```bash\n# Via Claude Code marketplace\n/plugin marketplace add jitd/official\n/plugin install jitd\n```\n\n### Initialize in Your Project\n\n```bash\n/nav:init\n```\n\nThis creates:\n```\nyour-project/\nâ””â”€â”€ .agent/\n    â”œâ”€â”€ DEVELOPMENT-README.md  (Navigator)\n    â”œâ”€â”€ tasks/                 (Feature plans)\n    â”œâ”€â”€ system/                (Architecture)\n    â””â”€â”€ sops/                  (Procedures)\n```\n\n### Start Using\n\n1. **Read navigator first** (always):\n   ```\n   Load .agent/DEVELOPMENT-README.md\n   ```\n\n2. **Create task docs** (after features):\n   ```\n   /nav:update-doc feature TASK-123\n   ```\n\n3. **Create SOPs** (after solving issues):\n   ```\n   /nav:update-doc sop debugging auth-errors\n   ```\n\n4. **Update system docs** (after arch changes):\n   ```\n   /nav:update-doc system architecture\n   ```\n\n---\n\n## Configuration\n\nNavigator works standalone, but integrates with your tools:\n\n```bash\n# Set your project management tool (optional)\nproject_management: linear | jira | github | none\n\n# Set your team chat (optional)\nteam_chat: slack | discord | teams | none\n\n# Customize task prefix\ntask_prefix: TASK | JIRA | GH | etc\n\n# Auto-load navigator on session start\nauto_load_navigator: true | false\n```\n\n---\n\n## Use Cases\n\n### Solo Developer\n- Maintain project knowledge as you build\n- No session restarts mid-feature\n- Onboard future contributors instantly\n\n### Small Team (2-5)\n- Share patterns via SOPs\n- Consistent architecture decisions\n- 48-hour onboarding for new members\n\n### Enterprise\n- Standardize documentation across teams\n- Enforce best practices\n- Scale knowledge without context bloat\n\n---\n\n## Examples\n\nSee [examples/](../examples/) for complete project setups:\n\n- **Next.js** - SSR patterns, component architecture\n- **Python/Django** - Backend patterns, API docs\n- **Go** - Microservices, testing patterns\n\n---\n\n## Token Savings Explained\n\n### Traditional Approach (150k tokens)\n```\nâœ— All task docs loaded upfront\nâœ— All system docs loaded upfront\nâœ— All SOPs loaded upfront\nâœ— Business docs included\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n= 150,000+ tokens before work begins\n```\n\n### Navigator Approach (12k tokens)\n```\nâœ“ Navigator only (2k)\nâœ“ Current task only (3k)\nâœ“ Relevant system doc (5k)\nâœ“ Specific SOP if needed (2k)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n= 12,000 tokens (92% reduction)\n```\n\n**Context remaining**: 86% available for actual work\n\n---\n\n## How It Works\n\n### 1. Navigator-First Pattern\nEvery session starts with `DEVELOPMENT-README.md`:\n- Documentation index\n- \"When to read what\" decision tree\n- Current sprint focus\n- Quick start guides\n\n**Token cost**: 2,000 (vs 150,000 loading everything)\n\n### 2. Lazy-Loading Strategy\nLoad docs based on current task:\n- Implementing feature? Load task doc + system doc\n- Debugging issue? Load relevant SOP + system doc\n- New integration? Load integration SOP\n\n**Token cost**: 5,000-10,000 per session (vs 150,000)\n\n### 3. Living Documentation\nDocs update as code evolves:\n- Complete feature â†’ `/nav:update-doc feature TASK-XX`\n- Solve novel issue â†’ `/nav:update-doc sop debugging issue-x`\n- Refactor architecture â†’ `/nav:update-doc system architecture`\n\n**Benefit**: Always current, never outdated\n\n### 4. Smart Compact\nClear context strategically:\n- After isolated sub-task\n- After documentation update\n- Before switching epics\n\n**Benefit**: 10+ exchanges per session without restart\n\n---\n\n## FAQ\n\n### Does Navigator work with my project management tool?\nYes. Navigator works standalone or integrates with Linear, Jira, GitHub Issues, etc. Integration is optional.\n\n### Does Navigator work with my tech stack?\nYes. Navigator is framework-agnostic. We provide examples for Next.js, Python, and Go, but it works with any stack.\n\n### How much setup time required?\n5 minutes. Run `/nav:init`, customize navigator template, start documenting.\n\n### Will my team adopt this?\nNavigator shows immediate benefits (zero restarts, faster sessions). Teams naturally adopt tools that save time.\n\n### Is Navigator only for Claude Code?\nNavigator principles work with any context-limited AI (Cursor, GitHub Copilot, etc). Plugin is Claude Code-specific, but approach is universal.\n\n---\n\n## Metrics & Success Criteria\n\n### Context Efficiency\n- âœ… <70% token usage for typical tasks\n- âœ… <12k tokens loaded per session\n- âœ… 10+ exchanges without compact\n\n### Documentation Coverage\n- âœ… 100% completed features have task docs\n- âœ… 90%+ integrations have SOPs\n- âœ… System docs updated within 24h\n\n### Productivity\n- âœ… Zero session restarts during features\n- âœ… 10x more commits per token\n- âœ… 48-hour onboarding for new team members\n\n---\n\n## Support\n\n- **Documentation**: [Full Docs](https://github.com/jitd/plugin/blob/main/docs/README.md)\n- **Issues**: [GitHub Issues](https://github.com/jitd/plugin/issues)\n- **Discussions**: [Community](https://github.com/jitd/plugin/discussions)\n- **Twitter**: [@alekspetrov](https://twitter.com/alekspetrov)\n\n---\n\n## License\n\nMIT - Use freely, contribute back if it helps you.\n\n---\n\n**Built by developers fighting context limits. Open sourced for the community.**\n\n**Status**: ğŸ§ª Experimental - Built in public, learning as we go.\n",
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"navigator-marketplace\",\n  \"displayName\": \"Navigator - Context-Efficient AI Development Framework\",\n  \"owner\": {\n    \"name\": \"Aleks Petrov\",\n    \"email\": \"aleks@example.com\"\n  },\n  \"metadata\": {\n    \"description\": \"Context Engineering + Human-AI Collaboration Framework with Theory of Mind, Loop Mode, Task Mode, and Project Knowledge Graph\",\n    \"version\": \"6.1.0\",\n    \"breaking_changes\": [\n      \"v6.1.0: Multi-Agent Production - parallel Claude agents with visual dashboard; nav-multi skill for natural language trigger; 5 role templates (orchestrator, implementer, tester, reviewer, documenter); reliability fixes for research tasks\",\n      \"v6.0.0: Project Knowledge Graph - unified search across tasks, SOPs, system docs; experiential memory (patterns, pitfalls, decisions, learnings); auto-surfaces relevant context on session start\",\n      \"v5.9.0: Workflow Enforcement - mandatory WORKFLOW CHECK block, Loop/Task Mode detection, complexity scoring, hook-based enforcement\",\n      \"v5.8.0: Auto-Update Project Sync - auto-update now syncs project config, version drift detection, restart prompt after mid-session updates\",\n      \"v5.7.0: Feature Management - nav-features skill for viewing/toggling features, first-session feature display on install/update\",\n      \"v5.6.0: Task Mode - unified workflow orchestration, auto-detects complexity, defers to skills or provides phase guidance (nav-task-mode skill)\",\n      \"v5.5.0: Auto-Update on Session Start - automatic plugin updates when newer version detected, zero friction for daily releases\",\n      \"v5.4.0: Code Simplification Integration - nav-simplify skill, Multi-Claude simplifier role, autonomous completion integration, Loop Mode VERIFY phase\",\n      \"v5.3.0: Task Verification Enhancement - Verify/Done sections, verify_extractor.py, multi-Claude Review integration\",\n      \"v5.2.0: 'Finish What You Start' positioning - README rewrite, benefit-first documentation\",\n      \"v5.1.0: Loop Mode - structured completion signals, dual-condition exit gates, stagnation detection (nav-loop skill)\",\n      \"v5.0.0: Theory of Mind features - nav-profile, nav-diagnose, verification checkpoints\",\n      \"v4.7.0: Interactive onboarding skill (nav-onboard) with hands-on learning\",\n      \"v4.6.0: Native agents, token monitoring hooks, architecture optimization\",\n      \"Added retry logic, timeout monitoring, state persistence, and workflow resume\",\n      \"New scripts: sub-claude-monitor.sh, resume-workflow.sh\",\n      \"Enhanced marker verification with central logging\",\n      \"v4.3.1: Fixed template drift and professional pre-release upgrade flow\",\n      \"nav-update-claude now fetches templates from GitHub (version-matched)\",\n      \"nav-upgrade presents interactive pre-release choice\",\n      \"Zero template drift - CLAUDE.md always matches plugin version\",\n      \"v4.3.0: Multi-Claude agentic workflow automation (experimental)\",\n      \"Added automated multi-Claude orchestration scripts for parallel execution\",\n      \"Task agents enabled in sub-Claude phases for 60-80% token savings\",\n      \"Failure reporting and recovery guidance for sub-Claude sessions\",\n      \"v4.0.0: Major transformation - Tool to complete framework\",\n      \"Added comprehensive education layer (learning guides, interactive examples, decision frameworks)\",\n      \"Philosophical foundation documented (context efficiency manifesto, patterns, anti-patterns)\",\n      \"Real metrics validation (nav-stats skill with efficiency scoring)\",\n      \"v3.0.0: Removed all slash commands (/nav:*)\",\n      \"Use natural language: 'Start my Navigator session'\"\n    ]\n  },\n  \"plugins\": [\n    {\n      \"name\": \"navigator\",\n      \"source\": \"./\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"navigator\",\n  \"version\": \"6.1.0\",\n  \"description\": \"Finish What You Start - Sessions that last, AI that learns, Features that ship. Context engineering + Theory of Mind + Knowledge Graph + Loop Mode + Task Mode. Features Project Knowledge Graph (unified search, experiential memory), unified workflow orchestration, auto-update on session start, ToM-based verification checkpoints, bilateral modeling, quality detection, enhanced context markers, and Loop Mode. 92% token reduction with proven strategies. Based on Riedl & Weidmann 2025 Human-AI Synergy research.\",\n  \"author\": {\n    \"name\": \"Aleks Petrov\",\n    \"email\": \"aleks@example.com\",\n    \"url\": \"https://github.com/alekspetrov\"\n  },\n  \"homepage\": \"https://github.com/alekspetrov/navigator\",\n  \"repository\": \"https://github.com/alekspetrov/navigator\",\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"documentation\",\n    \"context-management\",\n    \"token-optimization\",\n    \"knowledge-management\",\n    \"knowledge-graph\",\n    \"experiential-memory\",\n    \"productivity\",\n    \"skills\",\n    \"agents\",\n    \"navigator\",\n    \"natural-language\",\n    \"theory-of-mind\",\n    \"human-ai-synergy\",\n    \"bilateral-modeling\"\n  ],\n  \"skills\": [\n    \"./skills/nav-graph\",\n    \"./skills/nav-task-mode\",\n    \"./skills/nav-features\",\n    \"./skills/nav-simplify\",\n    \"./skills/nav-onboard\",\n    \"./skills/nav-init\",\n    \"./skills/nav-start\",\n    \"./skills/nav-stats\",\n    \"./skills/nav-profile\",\n    \"./skills/nav-diagnose\",\n    \"./skills/nav-loop\",\n    \"./skills/nav-update-claude\",\n    \"./skills/nav-upgrade\",\n    \"./skills/nav-install-multi-claude\",\n    \"./skills/nav-multi\",\n    \"./skills/nav-marker\",\n    \"./skills/nav-compact\",\n    \"./skills/nav-task\",\n    \"./skills/nav-sop\",\n    \"./skills/nav-skill-creator\",\n    \"./skills/nav-release\",\n    \"./skills/plugin-slash-command\",\n    \"./skills/product-design\",\n    \"./skills/visual-regression\",\n    \"./skills/frontend-component\",\n    \"./skills/backend-endpoint\",\n    \"./skills/database-migration\",\n    \"./skills/backend-test\",\n    \"./skills/frontend-test\"\n  ]\n}\n",
        ".agent/grafana/README.md": "# Navigator Grafana Dashboard\n\n**Visual monitoring for Claude Code with OpenTelemetry metrics**\n\nThis directory contains everything needed to run Grafana dashboards for Navigator's OpenTelemetry integration.\n\n---\n\n## Quick Start\n\n### Prerequisites\n\n1. **Docker and Docker Compose** installed\n2. **Enable Claude Code Prometheus exporter**:\n   ```bash\n   # Add to ~/.zshrc or ~/.bashrc\n   export CLAUDE_CODE_ENABLE_TELEMETRY=1\n   export OTEL_METRICS_EXPORTER=prometheus\n\n   # Reload shell\n   source ~/.zshrc  # or source ~/.bashrc\n   ```\n3. **Start Claude Code** - metrics will be available at `http://localhost:9464/metrics`\n\n### Start Monitoring Stack\n\n```bash\n# From .agent/grafana directory:\ndocker compose up -d\n```\n\nThis starts:\n- **Prometheus** on http://localhost:9092\n- **Grafana** on http://localhost:3333\n\n### Access Dashboard\n\n1. Open http://localhost:3333\n2. Login:\n   - Username: `admin`\n   - Password: `admin`\n3. Navigate to **Dashboards** â†’ **\"Navigator - Claude Code Metrics\"**\n\n**Dashboard auto-provisions** - no manual import needed!\n\n---\n\n## Dashboard Preview\n\n![Navigator Grafana Dashboard](./dashboard-screenshot.jpg)\n\n*Real-time productivity and token analytics for Navigator*\n\n---\n\n## What You'll See\n\n### Dashboard Panels (13 Total)\n\n**Row 1 - Performance KPIs**:\n1. **Cache Hit Rate** - Navigator efficiency (green >80%)\n2. **Cache Savings ($)** - Money saved by prompt caching vs full input cost\n3. **Commits** - Total commits created\n4. **Lines Added** - Productivity metric\n5. **Lines Deleted** - Code cleanup metric\n\n**Row 2 - Token Analytics**:\n6. **Token Usage (Cumulative)** - Stacked area (cacheRead=green, input=blue, output=purple)\n7. **Token Rate** - Instantaneous consumption rate (tokens/min, uses irate() to avoid counter reset spikes)\n\n**Row 3 - Workflow Activity**:\n8. **Code Activity** - Lines modified per 5min (bars: added=green, removed=red)\n9. **Commits Over Time** - Trend line with points\n\n**Row 4 - Session Stats**:\n10. **Active Time** - Coding duration (excludes idle)\n11. **Sessions** - Session count\n12. **Cost** - Total USD (secondary metric)\n13. **Model Usage** - Donut chart (Haiku vs Sonnet distribution)\n\n**Auto-refresh**: Dashboard updates every 10 seconds\n\n---\n\n## Files Included\n\n```\n.agent/grafana/\nâ”œâ”€â”€ README.md                      # This file\nâ”œâ”€â”€ docker-compose.yml             # Container orchestration (ports: 9092, 3001)\nâ”œâ”€â”€ prometheus.yml                 # Prometheus config (scrapes localhost:9464)\nâ”œâ”€â”€ grafana-datasource.yml         # Grafana data source (auto-configured)\nâ”œâ”€â”€ grafana-dashboards.yml         # Dashboard provisioning config\nâ””â”€â”€ navigator-dashboard.json       # Pre-built 10-panel dashboard\n```\n\n---\n\n## Configuration\n\n### Port Conflicts\n\nDefault ports configured to avoid common conflicts:\n- Grafana: `3333` (not 3000/3001 - often used by dev servers)\n- Prometheus: `9092` (not 9090 - often used by other Prometheus instances)\n\n**To change ports**, edit `docker-compose.yml`:\n\n```yaml\n# Grafana\nports:\n  - \"3334:3000\"  # Change 3333 to 3334\n\n# Prometheus\nports:\n  - \"9093:9090\"  # Change 9092 to 9093\n```\n\nThen update `GF_SERVER_ROOT_URL` to match new Grafana port.\n\n### Change Admin Password\n\nEdit `docker-compose.yml`:\n\n```yaml\nenvironment:\n  - GF_SECURITY_ADMIN_PASSWORD=your-secure-password\n```\n\n### Adjust Scrape Interval\n\nEdit `prometheus.yml`:\n\n```yaml\nglobal:\n  scrape_interval: 30s  # Change from 15s\n```\n\n### Data Retention\n\nEdit `docker-compose.yml`:\n\n```yaml\ncommand:\n  - '--storage.tsdb.retention.time=30d'  # Change from 7d\n```\n\n---\n\n## Troubleshooting\n\n### Dashboard is Empty\n\n**Problem**: No data showing in Grafana\n\n**Solutions**:\n1. Check Claude Code is running with Prometheus exporter:\n   ```bash\n   curl http://localhost:9464/metrics\n   ```\n\n2. Check Prometheus can scrape Claude Code:\n   - Open http://localhost:9090/targets\n   - Look for `claude-code` target\n   - Should be \"UP\" (not \"DOWN\")\n\n3. Check Prometheus data:\n   - Open http://localhost:9090\n   - Query: `claude_code_token_usage_total`\n   - Should return data\n\n### Prometheus Can't Connect\n\n**Problem**: Target shows \"DOWN\" in Prometheus (check at http://localhost:9092/targets)\n\n**Solution**:\n- **macOS/Windows Docker Desktop**: Already configured as `host.docker.internal:9464` âœ“\n- **Linux**: Change to `172.17.0.1:9464` (Docker bridge IP)\n\nEdit `prometheus.yml` for Linux:\n\n```yaml\nscrape_configs:\n  - job_name: 'claude-code'\n    static_configs:\n      - targets: ['172.17.0.1:9464']  # For Linux\n```\n\nThen restart: `docker compose restart prometheus`\n\n### Port Already in Use\n\n**Problem**: \"Port 3333 is already allocated\" or \"Port 9092 is already allocated\"\n\n**Solutions**:\n1. Stop conflicting service\n2. Or change port in `docker-compose.yml` (see [Port Conflicts](#port-conflicts) above)\n3. Restart: `docker compose down && docker compose up -d`\n\n---\n\n## Management Commands\n\n```bash\n# Start services\ndocker-compose up -d\n\n# View logs\ndocker-compose logs -f\n\n# Stop services\ndocker-compose down\n\n# Stop and remove data\ndocker-compose down -v\n\n# Restart services\ndocker-compose restart\n\n# Update to latest images\ndocker-compose pull\ndocker-compose up -d\n```\n\n---\n\n## Customizing the Dashboard\n\n### Edit Existing Dashboard\n\n1. Open Grafana â†’ Dashboards â†’ Navigator\n2. Click \"Edit\" on any panel\n3. Modify query, visualization, or settings\n4. Click \"Save dashboard\"\n\n### Export Modified Dashboard\n\n1. Dashboard â†’ Settings â†’ JSON Model\n2. Copy JSON\n3. Save to `navigator-dashboard.json`\n4. Restart Grafana: `docker-compose restart grafana`\n\n### Add New Panel\n\n1. Dashboard â†’ Add Panel\n2. Select Prometheus data source\n3. Enter query (e.g., `claude_code_commit_count_total`)\n4. Configure visualization\n5. Save\n\n---\n\n## Useful Prometheus Queries\n\n### Token Usage by Type\n```promql\nsum(rate(claude_code_token_usage_total[5m])) by (type)\n```\n\n### Cost per Hour\n```promql\nrate(claude_code_cost_usage_total[1h]) * 3600\n```\n\n### Cache Efficiency\n```promql\nsum(claude_code_token_usage_total{type=\"cacheRead\"})\n/\nsum(claude_code_token_usage_total{type=\"input\"}) * 100\n```\n\n### Sessions Started\n```promql\nsum(claude_code_session_count_total)\n```\n\n### Lines of Code Added\n```promql\nsum(claude_code_lines_of_code_count_total{type=\"added\"})\n```\n\n### Model Distribution\n```promql\nsum(claude_code_token_usage_total) by (model)\n```\n\n---\n\n## Advanced Setup\n\n### Team Metrics\n\nTag your sessions with team info:\n\n```bash\nexport OTEL_RESOURCE_ATTRIBUTES=\"team=engineering,user=$(whoami)\"\n```\n\nThen filter in Grafana:\n```promql\nclaude_code_token_usage_total{team=\"engineering\"}\n```\n\n### Multi-User Dashboard\n\nCreate dashboard variable:\n1. Dashboard â†’ Settings â†’ Variables\n2. Add variable: `user`\n3. Query: `label_values(claude_code_token_usage_total, user_email)`\n4. Use in queries: `claude_code_token_usage_total{user_email=\"$user\"}`\n\n### Alerts\n\nConfigure alerting in Grafana:\n1. Panel â†’ Alert tab\n2. Set condition (e.g., cost > $10/hour)\n3. Configure notification channel\n4. Save\n\n---\n\n## Related Documentation\n\n- [OpenTelemetry Setup Guide](../sops/integrations/opentelemetry-setup.md)\n- [Navigator Session Stats Script](../../skills/nav-start/scripts/otel_session_stats.py)\n- [Claude Code Monitoring Docs](https://docs.claude.com/en/docs/claude-code/monitoring-usage)\n\n---\n\n## Cleanup\n\nTo remove everything:\n\n```bash\n# Stop containers and remove volumes\ndocker-compose down -v\n\n# Remove images\ndocker rmi prom/prometheus:latest grafana/grafana:latest\n```\n\n---\n\n**Dashboard Version**: 1.0.0\n**Navigator Version**: 3.1.0\n**Last Updated**: 2025-10-20\n",
        ".claude/skills/test-marker.md": "---\nname: test-marker\ndescription: Create a simple test marker file for POC validation\n---\n\n# Test Marker Skill\n\nCreate a marker file to signal task completion.\n\n## Task\n\nCreate a file at the path specified by the user with timestamp content.\n\n## Instructions\n\n1. Ask user for marker file path if not provided\n2. Create the file with current timestamp\n3. Confirm creation\n\n## Example\n\nUser: \"Create marker at .agent/tasks/poc-plan\"\nAssistant: Creates file `.agent/tasks/poc-plan` with timestamp content\n",
        "README.md": "# Navigator\n\n**Finish What You Start**\n\nSessions that last. AI that learns. Features that ship.\n\n[![MIT License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)\n[![Version](https://img.shields.io/badge/version-6.0.0-blue.svg)](https://github.com/alekspetrov/navigator/releases)\n\n---\n\n## What is Navigator?\n\nNavigator is a **Claude Code plugin** that implements context engineering for AI-assisted development.\n\nInstead of loading all your documentation upfront (and crashing at exchange 7), Navigator loads what you need, when you need itâ€”keeping 94% of your context window available for actual work.\n\nFor developers using Claude Code who want sessions that finish features instead of crash mid-way.\n\n---\n\n## The Loop You're Stuck In\n\nYou know the pattern:\n\n```\nExchange 5:  Claude forgets your recent changes\nExchange 7:  Hallucinations start (\"that function doesn't exist\")\nExchange 8:  \"Context limit reached\"\n\nRestart. Reload. Re-explain everything. Repeat.\n```\n\nYou loaded 150k tokens of documentation \"just in case.\"\n\nYou used 8k.\n\n**The rest? Noise drowning out signal.**\n\n---\n\n## Break The Loop\n\nNavigator implements context engineeringâ€”load what you need, when you need it.\n\n| Metric | Without Navigator | With Navigator |\n|--------|-------------------|----------------|\n| Tokens loaded | 150,000 | 12,000 |\n| Session length | 5-7 exchanges | 20+ exchanges |\n| Context at end | 95% (crashed) | 35% (comfortable) |\n| Token savings | â€” | **92%** |\n\n**Result**: Sessions that actually finish what they start.\n\n---\n\n## And Your AI Gets Smarter\n\nNavigator v5.0 adds Theory of Mindâ€”Claude learns *you*.\n\n**nav-profile**: Remembers your preferences across sessions\n```\n\"Remember I prefer concise explanations\"\nâ†’ Applied in future sessions\nâ†’ Auto-learns from corrections\n```\n\n**nav-diagnose**: Catches collaboration drift\n```\nSame correction twice â†’ Quality check triggered\n\"You're not getting this\" â†’ Re-anchoring prompt\n```\n\n**Loop Mode** (v5.1): Run until done\n```\n\"Run until done: add user authentication\"\nâ†’ Structured completion with progress tracking\nâ†’ Dual-condition exit (heuristics + explicit signal)\nâ†’ Stagnation detection prevents infinite loops\n```\n\n**Knowledge Graph** (v6.0): Project memory that persists\n```\n\"What do we know about auth?\"\nâ†’ Unified search across tasks, SOPs, system docs\nâ†’ Experiential memory: patterns, pitfalls, decisions\nâ†’ Auto-surfaces relevant context on session start\n```\n\n---\n\n## Same Workflows. More Capabilities.\n\nNavigator is a superset. Everything you'd expect, plus context engineering.\n\n| Feature | Navigator | Others |\n|---------|-----------|--------|\n| Structured workflows | âœ… 27 skills | âœ… |\n| Component generation | âœ… | âœ… |\n| Test generation | âœ… | âœ… |\n| Session longevity | **20+ exchanges** | 5-7 exchanges |\n| Token savings | **92% verified** | None |\n| Code simplification | **âœ…** | âŒ |\n| Task Mode | **âœ…** | âŒ |\n| Theory of Mind | **âœ…** | âŒ |\n| Knowledge Graph | **âœ…** | âŒ |\n| Loop mode | **âœ…** | âŒ |\n| OpenTelemetry metrics | **âœ…** | âŒ |\n| Figma MCP integration | **âœ…** | âŒ |\n\n**Same foundation. Superior context management.**\n\n---\n\n## Proof, Not Promises\n\nNot estimates. Verified via OpenTelemetry.\n\n```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘          NAVIGATOR EFFICIENCY REPORT                 â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ“Š TOKEN USAGE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nYour project documentation:     150,000 tokens\nLoaded this session:             12,000 tokens\nTokens saved:                   138,000 tokens (92% â†“)\n\nğŸ“ˆ SESSION METRICS\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nContext usage:                        35% (excellent)\nEfficiency score:                  94/100 (excellent)\n```\n\n**Check yours**: Run `/nav:stats` after installing.\n\n---\n\n## Quick Start\n\n### Install\n\n```bash\n# Claude Code plugin marketplace\n/plugin marketplace add alekspetrov/navigator\n/plugin install navigator\n\n# Restart Claude Code\n```\n\n### Initialize\n\n```bash\n\"Initialize Navigator in this project\"\n```\n\n### Start Every Session\n\n```bash\n\"Start my Navigator session\"\n```\n\nThat's it. Navigator handles the rest.\n\n---\n\n## What You Get\n\n**19 skills** that auto-invoke on natural language:\n\n```\n\"Start my Navigator session\"              â†’ Session with 92% savings\n\"Create a React component for profile\"    â†’ Component + tests + styles\n\"Add an API endpoint for posts\"           â†’ Endpoint + validation + tests\n\"Create context marker: checkpoint\"       â†’ 97% context compression\n\"Run until done: add dark mode\"           â†’ Loop mode completion\n```\n\n**No commands to memorize.** Skills detect intent and execute.\n\n---\n\n## Stop Restarting. Start Shipping.\n\nYour sessions crash because context management is broken by default.\n\nNavigator fixes this with context engineeringâ€”the same principles Anthropic recommends.\n\n**92% token savings. 20+ exchange sessions. Verified metrics.**\n\n```bash\n/plugin marketplace add alekspetrov/navigator\n/plugin install navigator\n```\n\n**Finish what you start.**\n\n---\n\n## Troubleshooting\n\n**Skill loads but prints docs instead of executing**\n```bash\n/plugin update navigator\n```\nThen retry. Outdated plugin version.\n\n---\n\n## Links\n\n- [Documentation](.agent/DEVELOPMENT-README.md)\n- [Philosophy](.agent/philosophy/CONTEXT-EFFICIENCY.md)\n- [Release Notes](https://github.com/alekspetrov/navigator/releases)\n- [GitHub](https://github.com/alekspetrov/navigator)\n\n## License\n\nMIT License - See [LICENSE](LICENSE)\n",
        "agents/navigator-research.md": "---\nname: navigator-research\ndescription: Specialized codebase exploration and architecture discovery. Use PROACTIVELY for understanding unfamiliar code, finding patterns, mapping system architecture, and answering \"how does X work?\" questions.\ntools: Read, Grep, Glob, Bash\nmodel: sonnet\npermissionMode: default\n---\n\n# Navigator Research Agent\n\nYou are a senior software architect specializing in codebase exploration and architecture discovery.\n\n## Your Purpose\n\nExplore codebases efficiently (60-80% token savings vs manual reading) by:\n- Sampling representative files instead of reading everything\n- Finding patterns across the codebase\n- Mapping architecture and integration points\n- Returning concise summaries with specific file references\n\n## Your Process\n\n### Phase 1: Entry Point Discovery\n1. Check package.json/setup.py/Cargo.toml for dependencies and scripts\n2. Find main entry points (main.ts, index.js, app.py)\n3. Identify configuration files (.env.example, config/, settings/)\n4. Map directory structure with `ls -la` or `tree`\n\n### Phase 2: Pattern Analysis\n1. Use Grep to find patterns (NOT read all files)\n2. Sample 2-3 representative files per pattern\n3. Identify conventions (naming, structure, error handling)\n4. Note architectural decisions\n\n### Phase 3: Integration Mapping\n1. Find external integrations (APIs, databases, queues)\n2. Identify authentication/authorization patterns\n3. Map cross-module dependencies\n4. Discover extension points\n\n### Phase 4: Summary\nReturn organized findings with:\n- Key patterns discovered\n- File references (path:line)\n- Complexity hotspots\n- Recommended reading order\n\n## Constraints\n\n- **Never read all files** - sample strategically\n- **Always provide file paths** with line numbers\n- **Focus on structure** not implementation details\n- **Estimate token savings** vs reading everything\n- **Return actionable summary** in < 2000 tokens\n\n## Output Format\n\n```markdown\n## [Topic] Analysis\n\n### Architecture Overview\n[2-3 sentences]\n\n### Key Patterns Found\n- Pattern 1: `path/file.ts:42` - description\n- Pattern 2: `path/other.ts:15` - description\n\n### Integration Points\n- [Service]: `path/integration.ts`\n\n### Recommendations\n- Start with: [file]\n- Key complexity: [area]\n\n### Token Savings\nSampled 5 files (~2k tokens) vs reading all 50 files (~20k tokens) = 90% savings\n```\n\n## When NOT to Use Me\n\n- Reading a specific known file (use Read directly)\n- Making changes (I'm read-only)\n- Simple grep searches (use Grep directly)\n",
        "agents/task-planner.md": "---\nname: task-planner\ndescription: Implementation planning and task breakdown specialist. Use PROACTIVELY when planning features, refactoring, or complex changes. Creates detailed implementation plans with effort estimates.\ntools: Read, Grep, Glob\nmodel: sonnet\npermissionMode: default\n---\n\n# Task Planner Agent\n\nYou are an experienced engineering lead specializing in implementation planning and task decomposition.\n\n## Your Purpose\n\nCreate actionable implementation plans by:\n- Breaking complex features into subtasks\n- Identifying dependencies and critical path\n- Estimating effort realistically\n- Planning testing and validation strategies\n\n## Your Planning Process\n\n### 1. Requirement Analysis\n- Clarify acceptance criteria (ask questions if unclear)\n- Identify technical constraints\n- Map affected modules and services\n- Note integration requirements\n\n### 2. Architecture Review\n- Read relevant system documentation\n- Identify where changes will occur\n- Find existing patterns to follow\n- Note breaking changes or migrations\n\n### 3. Task Decomposition\nBreak work into subtasks with:\n- Clear acceptance criteria\n- Explicit dependencies\n- Effort estimate (S/M/L)\n- Risk assessment\n- Testing approach\n\n### 4. Plan Output\nCreate structured plan in `.agent/tasks/` format\n\n## Output Format\n\n```markdown\n# Implementation Plan: [Feature Name]\n\n**Status**: ğŸ“‹ Planning\n**Estimated Effort**: [S/M/L]\n**Risk Level**: [Low/Medium/High]\n\n## Overview\n[1-2 sentence summary of what we're building and why]\n\n## Acceptance Criteria\n- [ ] Criterion 1\n- [ ] Criterion 2\n- [ ] Criterion 3\n\n## Architecture Impact\n[Which systems/modules affected, any breaking changes]\n\n## Implementation Phases\n\n### Phase 1: [Name] (Effort: S)\n**Goal**: [What this phase achieves]\n\n- [ ] Task 1.1: [description]\n  - File: `path/to/file.ts`\n  - Depends on: none\n- [ ] Task 1.2: [description]\n  - File: `path/to/other.ts`\n  - Depends on: 1.1\n\n### Phase 2: [Name] (Effort: M)\n**Goal**: [What this phase achieves]\n\n- [ ] Task 2.1: [description]\n  - Depends on: Phase 1\n- [ ] Task 2.2: [description]\n  - Depends on: 2.1\n\n### Phase 3: Testing & Validation (Effort: S)\n- [ ] Unit tests for [components]\n- [ ] Integration tests for [flows]\n- [ ] Manual verification of [criteria]\n\n## Risk Assessment\n\n| Risk | Likelihood | Impact | Mitigation |\n|------|------------|--------|------------|\n| [Risk 1] | Medium | High | [Strategy] |\n| [Risk 2] | Low | Medium | [Strategy] |\n\n## Dependencies\n- External: [APIs, services, libraries]\n- Internal: [Other tasks, teams]\n\n## Success Metrics\n- [ ] [Measurable outcome 1]\n- [ ] [Measurable outcome 2]\n\n## Notes\n[Any additional context, alternatives considered, etc.]\n```\n\n## Constraints\n\n- **Ask for clarification** on unclear requirements\n- **Identify dependencies** before estimating\n- **Always include testing** in the plan\n- **Be realistic** about effort (avoid optimism bias)\n- **Consider edge cases** and error handling\n- **Note documentation** needs\n\n## When NOT to Use Me\n\n- Simple single-file changes (just do it)\n- Bug fixes with obvious solutions\n- Questions about how code works (use navigator-research)\n",
        "examples/nextjs-saas/README.md": "# Next.js SaaS - Navigator Reference Example\n\n> **This is NOT a starter template.** This is a reference implementation showing Navigator documentation workflow for a Next.js SaaS project.\n\n---\n\n## What This Example Shows\n\n**The Value**: Complete `.agent/` structure with real documentation\n- âœ… Task implementation plans (how features were planned)\n- âœ… System architecture docs (tech decisions documented)\n- âœ… Standard Operating Procedures (patterns discovered during development)\n- âœ… Navigator workflow in action (navigator-first, on-demand loading)\n\n**NOT Included**: Production-ready code to copy-paste\n- âŒ No guarantee of latest Next.js version\n- âŒ No \"run npm install and deploy\" starter kit\n- âŒ Not meant to be forked as-is\n\n---\n\n## How to Use This Example\n\n### 1. Study the `.agent/` Structure\n\n```bash\n# Read the navigator first (Navigator workflow)\ncat .agent/DEVELOPMENT-README.md\n\n# See how tasks were planned\nls .agent/tasks/\n\n# See how patterns were documented\nls .agent/sops/development/\n\n# See architecture decisions\ncat .agent/system/project-architecture.md\n```\n\n### 2. Copy the Pattern, Not the Code\n\n**Do this**:\n```bash\n# Copy .agent/ structure to your project\ncp -r examples/nextjs-saas/.agent/ your-project/\n\n# Customize for your stack\nvim your-project/.agent/DEVELOPMENT-README.md\nvim your-project/.agent/system/project-architecture.md\n```\n\n**Don't do this**:\n```bash\n# Fork this repo as starter template âŒ\n# Copy-paste code without understanding âŒ\n```\n\n### 3. Adapt to Your Tech Stack\n\nThis example uses specific choices (see `stack-choices.md`).\n\n**If you use different tech**, the `.agent/` structure stays the same:\n- Keep: Navigator pattern, task structure, SOP organization\n- Change: Framework names, tool names, specific patterns\n\n**Navigator workflow is universal. Tech stack is not.**\n\n---\n\n## What You'll Learn\n\n### Navigator Workflow in Practice\n\n**See how**:\n1. Features start as task docs (`.agent/tasks/TASK-XX.md`)\n2. Implementation generates SOPs (`.agent/sops/development/`)\n3. Decisions documented (`.agent/system/`)\n4. Knowledge compounds over time\n\n### Documentation Quality\n\n**Examples of**:\n- Well-written task plans (context, steps, decisions)\n- Useful SOPs (how to add feature, how to debug issue)\n- Clear architecture docs (what, why, tradeoffs)\n- Navigator efficiency (2k tokens, high value)\n\n### Token Optimization\n\n**See**:\n- Navigator loads first (~2k tokens)\n- Task docs loaded on-demand (~3k each)\n- System docs lazy-loaded (~5k)\n- Total: ~12k vs 150k loading everything\n\n---\n\n## Project Context\n\n**Imaginary SaaS app**: AI content generation tool with credits system\n\n**Features built** (as documented in `.agent/tasks/`):\n- TASK-01: Authentication (Supabase Auth)\n- TASK-02: Dashboard layout (Next.js App Router)\n- TASK-03: Credits system (PostgreSQL)\n- TASK-04: Stripe integration (payments)\n- TASK-05: AI API integration (OpenAI)\n\n**Not actually built** - Just documented to show Navigator workflow\n\n---\n\n## Tech Stack (This Example)\n\nSee `stack-choices.md` for full reasoning and alternatives.\n\n**Framework**: Next.js 15 (App Router, SSR)\n**Styling**: Tailwind CSS\n**Database**: Supabase (PostgreSQL)\n**Auth**: Supabase Auth\n**Payments**: Stripe\n**Hosting**: Vercel\n\n**Created**: 2025-10-15\n**Next.js version at creation**: 15.0.x\n\n**These versions will be outdated.** Use latest when you build.\n\n---\n\n## Quick Start (For Understanding Navigator)\n\n```bash\n# 1. Read the navigator\ncat .agent/DEVELOPMENT-README.md\n\n# 2. Pick a task to study\ncat .agent/tasks/TASK-01-auth-setup.md\n\n# 3. See the SOP created from that task\ncat .agent/sops/development/adding-protected-routes.md\n\n# 4. Understand the architecture\ncat .agent/system/project-architecture.md\n\n# 5. Copy the .agent/ structure to your project\ncp -r .agent/ ~/your-project/\n\n# 6. Start your Navigator workflow\ncd ~/your-project\n/nav:start\n```\n\n---\n\n## Questions?\n\n**\"Can I use this with Remix/SvelteKit/Vue?\"**\nYes. The `.agent/` structure works with any framework. Change the framework names in docs.\n\n**\"Can I use this with different styling (CSS Modules, etc.)?\"**\nYes. The Navigator workflow doesn't care about styling choices. Update docs to match your stack.\n\n**\"Why Supabase? I use Firebase/Prisma\"**\nArbitrary choice for this example. Replace with your DB/auth setup. `.agent/` structure stays the same.\n\n**\"Is there actual code in this example?\"**\nNo. This is a documentation reference, not a code starter. The value is the `.agent/` folder.\n\n**\"What if Next.js 16 changes everything?\"**\nThe Navigator workflow (navigator â†’ tasks â†’ SOPs) won't change. Update framework-specific docs.\n\n---\n\n## Repository\n\nPart of [Navigator Plugin](https://github.com/alekspetrov/nav-plugin)\n\n**More examples**:\n- `examples/python-api/` - FastAPI backend example (coming soon)\n\n---\n\n**Remember**: Copy the documentation pattern, not the code. Navigator is about workflow, not tech stack.\n",
        "hooks/monitor-tokens.py": "#!/usr/bin/env python3\n\"\"\"\nNavigator Token Monitor Hook\n\nMonitors context usage and suggests /nav:compact when approaching limits.\nRuns after each tool use to track session efficiency.\n\nUsage: Configure in .claude/settings.json:\n{\n  \"hooks\": {\n    \"PostToolUse\": [{\n      \"matcher\": \"*\",\n      \"hooks\": [{\n        \"type\": \"command\",\n        \"command\": \"python3 $CLAUDE_PROJECT_DIR/hooks/monitor-tokens.py\",\n        \"timeout\": 5\n      }]\n    }]\n  }\n}\n\"\"\"\n\nimport json\nimport sys\nimport os\nfrom pathlib import Path\n\n# Configuration\nTOKEN_LIMIT = 180000  # Claude's context window\nWARN_THRESHOLD = 0.70  # 70% - suggest planning compact\nCRITICAL_THRESHOLD = 0.85  # 85% - recommend compact now\n\n# State file to avoid repeated warnings\nSTATE_FILE = Path.home() / '.claude' / '.nav-token-state.json'\n\n\ndef read_hook_data():\n    \"\"\"Read hook context from stdin\"\"\"\n    try:\n        return json.loads(sys.stdin.read())\n    except:\n        return {}\n\n\ndef estimate_tokens_from_transcript(transcript_path):\n    \"\"\"Estimate token count from conversation transcript\"\"\"\n    try:\n        if not transcript_path or not Path(transcript_path).exists():\n            return 0\n\n        with open(transcript_path, 'r') as f:\n            content = f.read()\n\n        # Rough estimate: ~4 characters per token\n        # This is conservative - actual tokenization varies\n        estimated_tokens = len(content) // 4\n        return estimated_tokens\n    except Exception:\n        return 0\n\n\ndef get_state():\n    \"\"\"Load previous alert state\"\"\"\n    try:\n        if STATE_FILE.exists():\n            with open(STATE_FILE, 'r') as f:\n                return json.load(f)\n    except:\n        pass\n    return {'last_warning_level': 0, 'session_id': None}\n\n\ndef save_state(state):\n    \"\"\"Persist alert state\"\"\"\n    try:\n        STATE_FILE.parent.mkdir(exist_ok=True)\n        with open(STATE_FILE, 'w') as f:\n            json.dump(state, f)\n    except:\n        pass\n\n\ndef main():\n    try:\n        hook_data = read_hook_data()\n        transcript_path = hook_data.get('transcript_path')\n        session_id = hook_data.get('session_id')\n\n        if not transcript_path:\n            sys.exit(0)\n\n        # Estimate current token usage\n        tokens = estimate_tokens_from_transcript(transcript_path)\n        usage_percent = tokens / TOKEN_LIMIT\n\n        # Load state (reset if new session)\n        state = get_state()\n        if state.get('session_id') != session_id:\n            state = {'last_warning_level': 0, 'session_id': session_id}\n\n        # Determine warning level\n        if usage_percent >= CRITICAL_THRESHOLD:\n            warning_level = 2\n        elif usage_percent >= WARN_THRESHOLD:\n            warning_level = 1\n        else:\n            warning_level = 0\n\n        # Only alert when crossing a new threshold\n        if warning_level > state['last_warning_level']:\n            percent_display = int(usage_percent * 100)\n\n            if warning_level == 2:\n                print(f\"\\n{'='*50}\")\n                print(f\"  CONTEXT CRITICAL: {percent_display}% used\")\n                print(f\"  {tokens:,} / {TOKEN_LIMIT:,} tokens\")\n                print(f\"\")\n                print(f\"  Run: 'Clear context and preserve markers'\")\n                print(f\"  Or:  /nav:compact\")\n                print(f\"{'='*50}\\n\")\n            elif warning_level == 1:\n                print(f\"\\n  Context at {percent_display}% - plan to compact after current task\\n\")\n\n            state['last_warning_level'] = warning_level\n            save_state(state)\n\n        # Reset warning level if usage drops (after compact)\n        elif warning_level < state['last_warning_level']:\n            state['last_warning_level'] = warning_level\n            save_state(state)\n\n        sys.exit(0)\n\n    except Exception as e:\n        # Fail silently - don't block Claude\n        sys.exit(0)\n\n\nif __name__ == '__main__':\n    main()\n",
        "hooks/workflow_enforcer.py": "#!/usr/bin/env python3\n\"\"\"\nNavigator Workflow Enforcer Hook\n\nClaude Code hook that runs before tool execution to detect workflow requirements.\nPrints warnings if Loop Mode or Task Mode should be active.\n\nThis is a \"soft\" enforcer - it warns but doesn't block.\nThe hard enforcement is in CLAUDE.md requiring WORKFLOW CHECK block.\n\nUsage (in .claude/settings.json):\n{\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Edit|Write|Bash\",\n        \"hooks\": [{\n          \"type\": \"command\",\n          \"command\": \"python3 hooks/workflow_enforcer.py\",\n          \"timeout\": 5\n        }]\n      }\n    ]\n  }\n}\n\nEnvironment:\n    CLAUDE_USER_MESSAGE: The user's original message (if available)\n\nOutput:\n    Prints warning if workflow mode should be active but wasn't detected.\n\"\"\"\n\nimport json\nimport os\nimport sys\nfrom pathlib import Path\n\n# Import from nav-start functions\nsys.path.insert(0, str(Path(__file__).parent.parent / \"skills\" / \"nav-start\" / \"functions\"))\n\ntry:\n    from workflow_detector import detect_workflow\nexcept ImportError:\n    # Fallback if import fails\n    def detect_workflow(msg):\n        return {\"loop_mode\": False, \"task_mode\": False, \"recommended_mode\": \"DIRECT\"}\n\n\ndef get_user_message() -> str:\n    \"\"\"Get user message from environment or stdin.\"\"\"\n    # Try environment variable first\n    msg = os.environ.get(\"CLAUDE_USER_MESSAGE\", \"\")\n    if msg:\n        return msg\n\n    # Try stdin (non-blocking)\n    try:\n        import select\n        if select.select([sys.stdin], [], [], 0)[0]:\n            return sys.stdin.read().strip()\n    except:\n        pass\n\n    return \"\"\n\n\ndef check_config() -> dict:\n    \"\"\"Load Navigator config.\"\"\"\n    config_path = Path(\".agent/.nav-config.json\")\n    if config_path.exists():\n        try:\n            with open(config_path) as f:\n                return json.load(f)\n        except:\n            pass\n    return {}\n\n\ndef main():\n    \"\"\"Main hook logic.\"\"\"\n    message = get_user_message()\n    if not message:\n        # No message to check\n        sys.exit(0)\n\n    # Detect workflow requirements\n    result = detect_workflow(message)\n\n    # Check config\n    config = check_config()\n    task_mode_enabled = config.get(\"task_mode\", {}).get(\"enabled\", True)\n    loop_mode_enabled = config.get(\"loop_mode\", {}).get(\"enabled\", False)\n\n    warnings = []\n\n    # Warn if Loop Mode should be active\n    if result[\"loop_mode\"]:\n        trigger = result.get(\"loop_trigger\", \"unknown\")\n        warnings.append(f\"âš ï¸  LOOP MODE TRIGGER DETECTED: '{trigger}'\")\n        warnings.append(\"   Show NAVIGATOR_STATUS blocks and use EXIT_SIGNAL.\")\n\n    # Warn if Task Mode should be active\n    if result[\"task_mode\"] and task_mode_enabled:\n        score = result.get(\"complexity\", 0)\n        warnings.append(f\"âš ï¸  TASK MODE RECOMMENDED: complexity={score}\")\n        warnings.append(\"   Show phase tracking (RESEARCH â†’ IMPL â†’ VERIFY â†’ COMPLETE).\")\n\n    # Print warnings if any\n    if warnings:\n        print(\"\\n\".join(warnings))\n        print(\"\")\n        print(\"Remember to show WORKFLOW CHECK block!\")\n        print(\"â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\")\n        print(\"â”‚ WORKFLOW CHECK                      â”‚\")\n        print(\"â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\")\n        print(f\"â”‚ Loop trigger: {'YES' if result['loop_mode'] else 'NO':17} â”‚\")\n        print(f\"â”‚ Complexity: {result.get('complexity', 0):<19} â”‚\")\n        print(f\"â”‚ Mode: {result['recommended_mode']:<24} â”‚\")\n        print(\"â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\")\n\n    sys.exit(0)\n\n\nif __name__ == \"__main__\":\n    main()\n",
        "skills-local/social-media-post/SKILL.md": "---\nname: social-media-post\ndescription: Generate optimized social media posts for Threads, X (Twitter), and LinkedIn. Analyzes platform algorithms, applies best practices, and creates engaging content tailored to each platform. Local skill for Navigator marketing only.\nallowed-tools: Read, Write\nversion: 1.0.0\nlocal-only: true\n---\n\n# Social Media Post Generator Skill\n\nGenerate platform-optimized social media posts using algorithm insights and best practices.\n\n**Note**: This is a LOCAL skill for Navigator marketing only. NOT included in the plugin distribution.\n\n## When to Invoke\n\nAuto-invoke when user says:\n- \"Create a Threads post about [topic]\"\n- \"Write a social media post for [announcement]\"\n- \"Generate X post for [feature]\"\n- \"Create LinkedIn announcement for [release]\"\n- \"Write Threads post like option 5\"\n\n## What This Does\n\n**Platform-Specific Workflow**:\n1. **Analyze Content**: Extract key points, features, value propositions\n2. **Apply Platform Rules**: Character limits, formatting, hashtag strategies\n3. **Optimize for Algorithm**: Engagement tactics, timing recommendations\n4. **Generate Variants**: Multiple options (short, medium, detailed)\n5. **Include Metadata**: Character count, hashtag suggestions, posting time\n\n**Platforms Supported**: Threads, X (Twitter), LinkedIn\n\n---\n\n## Platform Specifications\n\n### Threads (Instagram)\n\n**Character Limits**:\n- Standard post: 500 characters\n- Long-form (with attachment): 10,000 characters\n- Display: Shows \"Read more\" after ~500 chars\n\n**Formatting**:\nâœ… Bold, italic, underline, strikethrough\nâœ… Emojis (count toward limit)\nâœ… Bullet points (using â€¢ or -)\nâœ… Line breaks\nâŒ No hashtags in Threads (algorithm ignores them)\nâŒ No clickable links in body (use link preview)\n\n**Media**:\n- Images: Up to 10 per post\n- Video: Up to 5 minutes\n- Link previews: Automatic from URLs\n\n**Algorithm Priorities** (2025):\n1. **Engagement** (40%): Likes, comments, shares, reply views\n2. **Recency** (30%): Fresh content gets priority\n3. **Interest/Relevance** (20%): Based on user's past interactions\n4. **Profile Visits** (10%): Likelihood user will click profile\n\n**Best Practices**:\nâœ… Conversational, authentic tone (not corporate)\nâœ… Ask open-ended questions\nâœ… Create discussions, not announcements\nâœ… Post consistently (1-3x daily)\nâœ… Use visuals (images/videos boost engagement)\nâœ… Respond to comments within 1 hour\nâŒ No direct cross-posts from Instagram/X\nâŒ Avoid promotional language\nâŒ No hashtags (they don't work on Threads)\n\n**Optimal Posting Times** (US audience):\n- Monday-Friday: 9-11 AM, 1-3 PM, 7-9 PM ET\n- Saturday-Sunday: 10 AM-2 PM ET\n\n**Content That Works**:\n- Behind-the-scenes insights\n- Quick tips and tricks\n- Relatable experiences\n- Open-ended questions\n- Industry discussions\n- Memes (if relevant)\n\n---\n\n### X (Twitter)\n\n**Character Limits**:\n- Standard tweet: 280 characters\n- Premium (Blue): 25,000 characters (displays with \"Show more\")\n\n**Formatting**:\nâœ… Emojis\nâœ… Line breaks (use intentionally)\nâœ… Mentions (@username)\nâœ… Hashtags (max 2-3 per tweet)\nâŒ No rich text formatting\n\n**Media**:\n- Images: Up to 4 per tweet\n- Video: Up to 2:20 (standard), 10 min (Blue)\n- GIFs: 1 per tweet\n\n**Algorithm Priorities** (2025):\n1. **Engagement rate** (likes, retweets, replies)\n2. **Recency** (fresh tweets prioritized)\n3. **Media** (tweets with images/video perform better)\n4. **Authenticity** (verified accounts, genuine engagement)\n\n**Best Practices**:\nâœ… Front-load important info (first 100 chars)\nâœ… Use line breaks for readability\nâœ… 1-2 hashtags max (more hurts engagement)\nâœ… Include visual (image/video)\nâœ… Tag relevant accounts (when appropriate)\nâœ… Tweet threads for detailed content\nâŒ Don't overuse hashtags (looks spammy)\nâŒ Avoid link-only tweets (add context)\n\n**Optimal Posting Times** (US audience):\n- Monday-Friday: 8-10 AM, 12-1 PM, 5-6 PM ET\n- Saturday-Sunday: 9 AM-12 PM ET\n\n---\n\n### LinkedIn\n\n**Character Limits**:\n- Post: 3,000 characters (shows \"see more\" after ~140 chars in feed)\n- Article: 125,000 characters\n\n**Formatting**:\nâœ… Emojis (use sparingly)\nâœ… Bullet points\nâœ… Line breaks\nâœ… Bold (using Unicode)\nâœ… Numbered lists\nâŒ No official rich text (use workarounds)\n\n**Media**:\n- Images: Up to 9 per post\n- Video: Up to 10 minutes\n- Documents: PDF uploads\n\n**Algorithm Priorities** (2025):\n1. **Dwell time** (how long users read your post)\n2. **Engagement** (likes, comments, shares)\n3. **Relevance** (to user's network and interests)\n4. **Personal connections** (1st-degree connections prioritized)\n\n**Best Practices**:\nâœ… Professional but authentic tone\nâœ… Hook in first 2 lines (before \"see more\")\nâœ… Tell stories, share insights\nâœ… Use data/statistics\nâœ… Ask for opinions (engagement)\nâœ… Tag relevant companies/people\nâœ… Post 2-5x per week\nâŒ Avoid overly promotional content\nâŒ Don't overuse hashtags (3-5 max)\n\n**Optimal Posting Times** (US business hours):\n- Tuesday-Thursday: 8-10 AM, 12-1 PM ET\n- Avoid: Weekends, late evenings\n\n---\n\n## Workflow Protocol\n\n### Step 1: Content Analysis\n\n**Execute**: `post_analyzer.py`\n\n**Extract**:\n- Key announcement/feature\n- Value proposition\n- Technical details\n- Target audience\n- Tone (technical, casual, professional)\n\n**Example Input**:\n```\nTopic: Navigator v3.3.1 with nav-upgrade skill\nKey features: One-command updates, automatic configuration\nValue: 83% time savings (12 min â†’ 2 min)\nAudience: Developers using Claude Code\n```\n\n**Output**:\n```json\n{\n  \"topic\": \"Navigator v3.3.1 plugin update automation\",\n  \"key_points\": [\n    \"One-command updates via nav-upgrade skill\",\n    \"Automatic version detection from GitHub\",\n    \"83% time savings\",\n    \"18 total skills\"\n  ],\n  \"value_proposition\": \"Eliminates manual update process\",\n  \"call_to_action\": \"Install or update Navigator\",\n  \"tone\": \"technical-casual\"\n}\n```\n\n---\n\n### Step 2: Platform Optimization\n\n**Execute**: `engagement_optimizer.py --platform threads`\n\n**Apply Platform Rules**:\n- Character limit enforcement\n- Formatting constraints\n- Hashtag strategy\n- Media recommendations\n- CTA placement\n\n**Optimize for Algorithm**:\n- Engagement hooks\n- Question placement\n- Visual suggestions\n- Timing recommendations\n\n---\n\n### Step 3: Generate Post Variants\n\n**Create 3 Variants**:\n\n1. **Short & Punchy** (Option 5 style)\n   - Under 280 chars (X-compatible)\n   - Emoji bullets\n   - Clear value props\n   - Direct CTA\n\n2. **Medium Detailed**\n   - 300-500 chars (Threads standard)\n   - More context\n   - Multiple CTAs\n   - Conversation starter\n\n3. **Long-Form** (Threads attachment / LinkedIn)\n   - 800-1500 chars\n   - Full story/context\n   - Multiple sections\n   - Rich formatting\n\n---\n\n### Step 4: Add Metadata\n\nFor each variant, include:\n\n```markdown\n**Platform**: Threads\n**Character Count**: 287/500\n**Estimated Engagement**: High (question + visual + emojis)\n**Hashtags**: None (Threads doesn't use hashtags)\n**Media Suggestion**: Screenshot of update command\n**Best Time to Post**: Tuesday 9-11 AM ET\n**Follow-up**: Reply with technical details after 2 hours\n```\n\n---\n\n## Templates\n\n### Template: Product Launch (Threads)\n\n```\n[Hook Question]\n\n[Product Name] [Version] just landed:\n\nâœ… [Feature 1]: [Benefit]\nâœ… [Feature 2]: [Benefit]\nâœ… [Feature 3]: [Benefit]\nâœ… [Key Metric]: [Value proposition]\n\n[CTA 1]:\n[Command/Installation]\n\n[CTA 2]:\n[Command/Update]\n\n[Link]\n\n[Conversation Hook]\n```\n\n**Example**:\n```\nTeach your Claude Code to design like a Product Designer.\n\nNavigator v3.3.1:\nâœ… Figma MCP (design extraction)\nâœ… Storybook automation\nâœ… Chromatic integration\nâœ… One-command updates\n\nInstall:\n/plugin marketplace add alekspetrov/navigator\n\nUpdate:\n\"Update Navigator\"\n\nhttps://github.com/alekspetrov/navigator\n\nWhat's your biggest design handoff pain point?\n```\n\n**Character Count**: 289/500\n**Engagement Hook**: Opening question + closing question\n\n---\n\n### Template: Feature Announcement (X)\n\n```\n[Feature Name] just shipped ğŸš€\n\n[Key benefit in 1 line]\n\n[Emoji] [Feature detail 1]\n[Emoji] [Feature detail 2]\n[Emoji] [Feature detail 3]\n\n[CTA with link]\n\n[Optional: Thread continuation â†’]\n```\n\n**Example**:\n```\nOne-command Navigator updates ğŸš€\n\nNo more manual /plugin update, CLAUDE.md editing, or verification.\n\nâœ… \"Update Navigator\"\nâœ… 2 min vs 12 min manual\nâœ… 95% success rate\n\nInstall: /plugin marketplace add alekspetrov/navigator\n\nhttps://github.com/alekspetrov/navigator\n```\n\n**Character Count**: 241/280\n**Thread continuation**: Technical details, user testimonial, or demo\n\n---\n\n### Template: Technical Deep-Dive (LinkedIn)\n\n```\n[Professional Hook - Problem Statement]\n\n[Solution Introduction]\n\n**What we built:**\nâ€¢ [Technical detail 1]\nâ€¢ [Technical detail 2]\nâ€¢ [Technical detail 3]\n\n**The impact:**\n[Metric 1]: [Before] â†’ [After] ([Percentage] improvement)\n[Metric 2]: [Specific outcome]\n\n**How it works:**\n1. [Step 1]\n2. [Step 2]\n3. [Step 3]\n\nThis is what AI-native [domain] looks like: [insight].\n\n[Technical details / GitHub link]\n\n**Thoughts?** [Open-ended question for discussion]\n\n#[Hashtag1] #[Hashtag2] #[Hashtag3]\n```\n\n---\n\n## Predefined Functions\n\n### functions/post_analyzer.py\n\n**Purpose**: Extract key points and structure from content\n\n**Usage**:\n```bash\npython post_analyzer.py --input \"Navigator v3.3.1 announcement\" --context release-notes.md\n```\n\n**Output**:\n```json\n{\n  \"topic\": \"...\",\n  \"key_points\": [...],\n  \"value_proposition\": \"...\",\n  \"tone\": \"...\",\n  \"suggested_platforms\": [\"threads\", \"x\", \"linkedin\"]\n}\n```\n\n### functions/engagement_optimizer.py\n\n**Purpose**: Apply platform-specific optimization rules\n\n**Usage**:\n```bash\npython engagement_optimizer.py --platform threads --content post-draft.md\n```\n\n**Output**:\n```json\n{\n  \"optimized_content\": \"...\",\n  \"character_count\": 287,\n  \"engagement_score\": 8.5,\n  \"improvements\": [\n    \"Added opening question for engagement\",\n    \"Replaced hashtags with conversation hook\",\n    \"Added emojis for visual appeal\"\n  ],\n  \"warnings\": [\"Consider adding visual (screenshot/demo)\"]\n}\n```\n\n### functions/thread_generator.py\n\n**Purpose**: Generate multi-post threads for detailed announcements\n\n**Usage**:\n```bash\npython thread_generator.py --platform x --content full-announcement.md --max-tweets 5\n```\n\n**Output**: Structured thread with optimal character distribution\n\n---\n\n## Examples\n\n### Example 1: Quick Feature Announcement (Threads)\n\n**Input**:\n```\nGenerate Threads post for Navigator v3.3.1 nav-upgrade skill, short & punchy style\n```\n\n**Output**:\n```markdown\n**Platform**: Threads\n**Style**: Short & Punchy (Option 5)\n**Character Count**: 274/500\n\n---\n\nTeach Claude Code to automate like a Pro.\n\nNavigator v3.3.1:\nâœ… One-command updates\nâœ… Figma MCP integration\nâœ… Storybook + Chromatic automation\nâœ… 18 skills total\n\n\"Update Navigator\" â†’ Done in 2 min\n\nInstall: /plugin marketplace add alekspetrov/navigator\n\nhttps://github.com/alekspetrov/navigator\n\nWhat workflow would you automate next?\n\n---\n\n**Metadata**:\n- Engagement Hook: Opening statement + closing question\n- Visual Suggestion: Terminal screenshot of \"Update Navigator\" command\n- Best Time: Tuesday 10 AM ET\n- Follow-up: Reply with technical details after 2 hours\n```\n\n---\n\n### Example 2: Technical Thread (X)\n\n**Input**:\n```\nCreate X thread explaining complete design-to-production pipeline\n```\n\n**Output**:\n```markdown\n**Platform**: X (Twitter)\n**Format**: Thread (4 tweets)\n\n---\n\n**Tweet 1/4** (Main)\nWe just automated the complete design-to-production pipeline.\n\nFigma â†’ Code â†’ Testing in 20 minutes.\n\nHere's how Navigator v3.3.1 makes it work: ğŸ§µğŸ‘‡\n\n(278/280 chars)\n\n---\n\n**Tweet 2/4**\nStep 1: Design Extraction\n\n\"Review this design from Figma\"\n\nNavigator + Figma MCP:\nâœ… Extracts design tokens (DTCG)\nâœ… Maps components\nâœ… Detects drift\nâœ… Generates plan\n\n15 minutes vs 6-10 hours manually\n\n(195/280 chars)\n\n---\n\n**Tweet 3/4**\nStep 2: Visual Regression\n\n\"Set up visual regression for Button\"\n\nNavigator:\nâœ… Generates Storybook stories\nâœ… Configures Chromatic\nâœ… Creates CI workflows\n\n5 minutes vs 2-3 hours manually\n\n(184/280 chars)\n\n---\n\n**Tweet 4/4**\nThe result:\n\nDesign handoff â†’ Pixel-perfect CI in 20 minutes\n\nAll with natural language.\n97% token efficiency.\n18 skills for complete automation.\n\nTry it: /plugin marketplace add alekspetrov/navigator\n\nhttps://github.com/alekspetrov/navigator\n\n(242/280 chars)\n\n---\n\n**Metadata**:\n- Total thread length: 4 tweets, 899 chars total\n- Engagement: Question/discussion starter in replies\n- Visual: Attach architecture diagram to tweet 1\n- Best Time: Wednesday 9 AM ET\n```\n\n---\n\n## Best Practices by Platform\n\n### Threads\n1. **Be conversational**: Avoid corporate speak\n2. **Ask questions**: Drive engagement with open-ended questions\n3. **No hashtags**: They don't work on Threads\n4. **Respond fast**: Reply to comments within 1 hour\n5. **Post consistently**: 1-3x daily for best reach\n6. **Use visuals**: Images/videos boost engagement significantly\n7. **Tell stories**: Personal experiences > announcements\n\n### X (Twitter)\n1. **Front-load value**: First 100 chars matter most\n2. **Use threads**: Break complex topics into digestible tweets\n3. **Limit hashtags**: 1-2 max, more hurts engagement\n4. **Add media**: Tweets with images get 150% more engagement\n5. **Be concise**: Shorter tweets (200-250 chars) perform better\n6. **Time it right**: Post during work hours for tech audience\n\n### LinkedIn\n1. **Hook early**: First 2 lines show in feed, make them count\n2. **Be professional**: But still authentic and relatable\n3. **Use data**: Statistics and metrics boost credibility\n4. **Tell stories**: Case studies and experiences resonate\n5. **Engage back**: Comment on posts in your niche\n6. **Post less, quality more**: 2-5x per week is optimal\n\n---\n\n## Usage Patterns\n\n### Pattern 1: Quick Announcement\n\n```\n\"Create Threads post for v3.3.1 release, option 5 style\"\n```\n\nGenerates: Short & punchy Threads post with emojis, clear CTAs, character count\n\n### Pattern 2: Multi-Platform Campaign\n\n```\n\"Generate social media posts for v3.3.1 across Threads, X, and LinkedIn\"\n```\n\nGenerates: Platform-optimized variants for each channel\n\n### Pattern 3: Thread Explanation\n\n```\n\"Create X thread explaining visual-regression skill workflow\"\n```\n\nGenerates: Multi-tweet thread with optimal character distribution\n\n---\n\n## Engagement Scoring\n\nPosts are scored 1-10 based on:\n- **Hook strength** (2 points): Captures attention in first line\n- **Value clarity** (2 points): Clear benefit/value proposition\n- **Engagement prompts** (2 points): Questions, CTAs\n- **Visual appeal** (2 points): Emojis, formatting, media suggestion\n- **Platform fit** (2 points): Follows platform best practices\n\n**Score 8-10**: High engagement potential\n**Score 5-7**: Moderate, could be improved\n**Score 1-4**: Needs significant revision\n\n---\n\n## Version History\n\n- **v1.0.0**: Initial skill for Navigator marketing (Threads, X, LinkedIn support)\n\n---\n\n**Last Updated**: 2025-10-21\n**Skill Type**: Local (Navigator marketing only)\n**Not included in plugin distribution**\n",
        "skills/backend-endpoint/SKILL.md": "---\nname: backend-endpoint\ndescription: Create REST/GraphQL API endpoint with validation, error handling, and tests. Auto-invoke when user says \"add endpoint\", \"create API\", \"new route\", or \"add route\".\nallowed-tools: Read, Write, Edit, Grep, Glob, Bash\nversion: 1.0.0\n---\n\n# Backend API Endpoint Generator\n\nGenerate production-ready REST or GraphQL endpoints with request validation, error handling, and comprehensive tests.\n\n## When to Invoke\n\nAuto-invoke when user mentions:\n- \"Add endpoint\"\n- \"Create API\"\n- \"New route\"\n- \"Add route\"\n- \"Create API endpoint for [resource]\"\n\n## What This Does\n\n1. Generates route handler with proper HTTP methods\n2. Adds request validation (body, params, query)\n3. Implements error handling\n4. Creates test file with request/response tests\n5. Follows REST/GraphQL conventions\n6. Includes authentication middleware (if needed)\n\n## Execution Steps\n\n### Step 1: Gather Endpoint Requirements\n\n**Ask user for endpoint details**:\n```\nEndpoint path: [e.g., /api/users/:id]\nHTTP method: [GET, POST, PUT, PATCH, DELETE]\nResource name: [e.g., User, Post, Product]\n\nFramework:\n  - express (default)\n  - fastify\n  - nestjs\n  - graphql\n\nAuthentication required: [yes/no]\nRequest validation needed: [yes/no]\n```\n\n**Validate endpoint path**:\n- Use predefined function: `functions/route_validator.py`\n- Ensure RESTful conventions\n- Check path parameters syntax\n- No trailing slashes\n\n### Step 1.5: Verify Understanding (ToM Checkpoint) [EXECUTE]\n\n**IMPORTANT**: This step MUST be executed for high-stakes operations.\n\n**Before generating code, confirm interpretation with user**.\n\n**Display verification**:\n```\nI understood you want:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nEndpoint: {METHOD} {PATH}\nResource: {RESOURCE_NAME}\nFramework: {FRAMEWORK} (detected from package.json / specified)\nAuth required: {yes/no}\nValidation needed: {yes/no}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nAssumptions I'm making:\n- Using {VALIDATION_LIBRARY} for validation (detected from existing validators)\n- Error handling follows existing pattern in {ERROR_HANDLER_PATH}\n- Route will be registered at {ROUTE_PREFIX} prefix\n\nProceed with generation? [Y/n]\n```\n\n**Skip verification if** (HIGH-STAKES ONLY mode):\n- Simple CRUD operation (single resource, single path parameter)\n- User explicitly said \"quick\", \"just do it\", or \"skip confirmation\"\n- No custom authentication logic specified\n- Standard GET/POST/PUT/DELETE without complex business logic\n\n**Always verify if**:\n- Multiple path parameters (e.g., `/users/:userId/posts/:postId`)\n- Custom authorization logic specified\n- Non-standard HTTP methods or patterns\n- GraphQL mutations with side effects\n- Endpoints involving financial or sensitive data\n\n### Step 1.8: Declare Belief State (Optional - ToM Anchor)\n\n**Before generating code, optionally declare explicit assumptions** (enabled by `tom_features.belief_anchors` in config).\n\n**Display belief state anchor**:\n```\nğŸ“Œ BELIEF STATE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nWhat I know (from context):\nâœ… Framework: {FRAMEWORK} (from package.json)\nâœ… TypeScript: {strict/normal} mode (from tsconfig.json)\nâœ… Validation: {LIBRARY} (from existing validators/)\n\nWhat I'm assuming (inference):\nğŸ”¸ Error handler follows pattern in {PATH}\nğŸ”¸ Routes registered at {PREFIX} prefix\nğŸ”¸ Using {CONVENTION} commit messages\n\nWhat I don't know (using defaults):\nâ“ Request logging preference (will include)\nâ“ Rate limiting requirements (will skip)\nâ“ Response envelope format (will use standard)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nAdjustments needed before I proceed?\n```\n\n**Skip belief anchor if**:\n- `tom_features.belief_anchors` is false in config\n- User said \"skip\", \"just do it\", \"quick\"\n- Simple endpoint with no custom logic\n\n**Show belief anchor if**:\n- Complex endpoint with multiple integrations\n- User profile indicates preference for detailed explanations\n- First endpoint in a new project (establishing patterns)\n\n### Step 2: Generate Route Handler\n\n**Based on HTTP method and framework**:\n\nUse predefined function: `functions/endpoint_generator.py`\n\n```bash\npython3 functions/endpoint_generator.py \\\n  --path \"/api/users/:id\" \\\n  --method \"GET\" \\\n  --resource \"User\" \\\n  --framework \"express\" \\\n  --auth true \\\n  --validation true \\\n  --template \"templates/express-route-template.ts\" \\\n  --output \"src/routes/users.ts\"\n```\n\n**Template includes**:\n- Route definition\n- Request validation middleware\n- Controller/handler function\n- Error handling\n- Response formatting\n- TypeScript types\n\n### Step 3: Generate Validation Schema\n\n**Use predefined function**: `functions/validation_generator.py`\n\n```bash\npython3 functions/validation_generator.py \\\n  --resource \"User\" \\\n  --method \"POST\" \\\n  --fields \"name:string:required,email:email:required,age:number:optional\" \\\n  --library \"zod\" \\\n  --output \"src/validators/user.validator.ts\"\n```\n\n**Supported validation libraries**:\n- Zod (default, TypeScript-first)\n- Joi (JavaScript schema)\n- Yup (object schema)\n- Express-validator (middleware-based)\n\n**Output example (Zod)**:\n```typescript\nimport { z } from 'zod';\n\nexport const createUserSchema = z.object({\n  name: z.string().min(1),\n  email: z.string().email(),\n  age: z.number().optional(),\n});\n\nexport type CreateUserInput = z.infer<typeof createUserSchema>;\n```\n\n### Step 4: Generate Error Handling Middleware\n\n**Use predefined function**: `functions/error_handler_generator.py`\n\n```bash\npython3 functions/error_handler_generator.py \\\n  --framework \"express\" \\\n  --template \"templates/error-handler-template.ts\" \\\n  --output \"src/middleware/errorHandler.ts\"\n```\n\n**Error handler includes**:\n- HTTP status code mapping\n- Error response formatting\n- Logging integration\n- Development vs production modes\n- Validation error handling\n\n### Step 5: Generate Test File\n\n**Use predefined function**: `functions/test_generator.py`\n\n```bash\npython3 functions/test_generator.py \\\n  --endpoint \"/api/users/:id\" \\\n  --method \"GET\" \\\n  --framework \"express\" \\\n  --template \"templates/endpoint-test-template.spec.ts\" \\\n  --output \"tests/routes/users.test.ts\"\n```\n\n**Test template includes**:\n- Success case (200/201)\n- Validation errors (400)\n- Not found (404)\n- Unauthorized (401)\n- Server errors (500)\n- Edge cases\n\n**Example test**:\n```typescript\ndescribe('GET /api/users/:id', () => {\n  it('returns user when found', async () => {\n    const response = await request(app)\n      .get('/api/users/123')\n      .expect(200);\n\n    expect(response.body).toMatchObject({\n      id: '123',\n      name: expect.any(String),\n    });\n  });\n\n  it('returns 404 when user not found', async () => {\n    await request(app)\n      .get('/api/users/999')\n      .expect(404);\n  });\n});\n```\n\n### Step 6: Generate API Documentation Comment\n\n**JSDoc or OpenAPI annotation**:\n\n```typescript\n/**\n * @route GET /api/users/:id\n * @description Get user by ID\n * @access Private\n * @param {string} id - User ID\n * @returns {User} User object\n * @throws {404} User not found\n * @throws {401} Unauthorized\n */\n```\n\n### Step 7: Show Endpoint Summary\n\n**Display generated files and usage**:\n\n```\nâœ… Endpoint Created: GET /api/users/:id\n\nStructure:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“ src/\n   â”œâ”€â”€ routes/users.ts                (Route handler)\n   â”œâ”€â”€ validators/user.validator.ts   (Request validation)\n   â””â”€â”€ middleware/errorHandler.ts     (Error handling)\n\nğŸ“ tests/\n   â””â”€â”€ routes/users.test.ts           (Integration tests)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nRoute Registration:\nimport { userRoutes } from './routes/users';\napp.use('/api', userRoutes);\n\nTest:\ncurl http://localhost:3000/api/users/123\n# or\nnpm test -- users.test.ts\n\nNext Steps:\n1. Implement business logic in controller\n2. Connect to database/service layer\n3. Run tests: npm test\n4. Test with Postman/Thunder Client\n```\n\n---\n\n## Predefined Functions\n\n### 1. route_validator.py\n\nValidates route path follows REST conventions.\n\n**Usage**:\n```bash\npython3 functions/route_validator.py --path \"/api/users/:id\" --method \"GET\"\n```\n\n**Checks**:\n- RESTful naming (plural resources)\n- Path parameter syntax (`:id` or `{id}`)\n- No trailing slashes\n- HTTP method matches intent\n\n**Returns**: Valid path or error message\n\n---\n\n### 2. endpoint_generator.py\n\nGenerates endpoint handler from template.\n\n**Usage**:\n```bash\npython3 functions/endpoint_generator.py \\\n  --path \"/api/users/:id\" \\\n  --method \"GET\" \\\n  --resource \"User\" \\\n  --framework \"express\" \\\n  --auth true \\\n  --validation true \\\n  --template \"templates/express-route-template.ts\"\n```\n\n**Parameters**:\n- `--path`: API endpoint path\n- `--method`: HTTP method\n- `--resource`: Resource name (singular, PascalCase)\n- `--framework`: Backend framework\n- `--auth`: Include auth middleware\n- `--validation`: Include validation middleware\n- `--template`: Template file path\n\n**Returns**: Generated endpoint code\n\n---\n\n### 3. validation_generator.py\n\nGenerates request validation schema.\n\n**Usage**:\n```bash\npython3 functions/validation_generator.py \\\n  --resource \"User\" \\\n  --method \"POST\" \\\n  --fields \"name:string:required,email:email:required\" \\\n  --library \"zod\"\n```\n\n**Supported field types**:\n- `string`, `number`, `boolean`\n- `email`, `url`, `uuid`\n- `array`, `object`\n- `date`, `datetime`\n\n**Returns**: Validation schema code\n\n---\n\n### 4. error_handler_generator.py\n\nGenerates error handling middleware.\n\n**Usage**:\n```bash\npython3 functions/error_handler_generator.py \\\n  --framework \"express\" \\\n  --template \"templates/error-handler-template.ts\"\n```\n\n**Returns**: Error handler middleware code\n\n---\n\n### 5. test_generator.py\n\nGenerates endpoint integration tests.\n\n**Usage**:\n```bash\npython3 functions/test_generator.py \\\n  --endpoint \"/api/users/:id\" \\\n  --method \"GET\" \\\n  --framework \"express\" \\\n  --template \"templates/endpoint-test-template.spec.ts\"\n```\n\n**Generates tests for**:\n- Success responses\n- Validation errors\n- Authentication errors\n- Not found errors\n- Server errors\n\n**Returns**: Generated test code\n\n---\n\n## Templates\n\n### express-route-template.ts\n\nExpress.js route handler template.\n\n**Placeholders**:\n- `${ROUTE_PATH}` - API endpoint path\n- `${HTTP_METHOD}` - HTTP method (lowercase)\n- `${RESOURCE_NAME}` - Resource name (PascalCase)\n- `${VALIDATION_MIDDLEWARE}` - Validation middleware\n- `${AUTH_MIDDLEWARE}` - Authentication middleware\n\n### fastify-route-template.ts\n\nFastify route handler template (alternative).\n\n### graphql-resolver-template.ts\n\nGraphQL resolver template (alternative).\n\n### validation-zod-template.ts\n\nZod validation schema template.\n\n### endpoint-test-template.spec.ts\n\nIntegration test template with supertest.\n\n**Placeholders**:\n- `${ENDPOINT_PATH}` - Endpoint to test\n- `${HTTP_METHOD}` - HTTP method\n- `${TEST_CASES}` - Generated test cases\n\n---\n\n## Examples\n\nSee `examples/` directory for reference implementations:\n\n1. **users-get.ts** - GET endpoint with auth\n2. **users-post.ts** - POST endpoint with validation\n3. **graphql-resolver.ts** - GraphQL mutation example\n\nEach example includes:\n- Route/resolver implementation\n- Validation schema\n- Error handling\n- Test file\n- Usage documentation\n\n---\n\n## Best Practices\n\n### REST API Design\n- **Use plural nouns** for resources (`/users`, not `/user`)\n- **Use HTTP methods correctly** (GET=read, POST=create, PUT/PATCH=update, DELETE=remove)\n- **Nest resources properly** (`/users/:userId/posts/:postId`)\n- **Return proper status codes** (200, 201, 400, 401, 404, 500)\n\n### Request Validation\n- **Validate all inputs** (body, params, query)\n- **Fail fast** (validate before business logic)\n- **Clear error messages** (tell user what's wrong)\n- **Sanitize inputs** (prevent injection attacks)\n\n### Error Handling\n- **Centralized error handler** (DRY principle)\n- **Consistent error format** (always same structure)\n- **Don't expose internals** (sanitize stack traces in production)\n- **Log errors** (for debugging)\n\n### Security\n- **Authentication** (verify identity)\n- **Authorization** (check permissions)\n- **Rate limiting** (prevent abuse)\n- **Input sanitization** (prevent XSS, SQL injection)\n\n### Testing\n- **Test happy path** (success cases)\n- **Test error cases** (validation, auth, not found)\n- **Test edge cases** (empty data, large data)\n- **Mock external dependencies** (database, APIs)\n\n---\n\n## Troubleshooting\n\n### Route Not Found (404)\n\n**Problem**: Endpoint returns 404 even though route is defined\n\n**Solutions**:\n1. Check route registration order (specific before generic)\n2. Verify path matches exactly (case-sensitive)\n3. Check middleware isn't blocking request\n4. Validate HTTP method matches\n\n### Validation Always Fails\n\n**Problem**: Valid requests fail validation\n\n**Solutions**:\n1. Check field names match exactly\n2. Verify data types are correct\n3. Check required vs optional fields\n4. Inspect validation error message\n\n### Tests Failing\n\n**Problem**: Integration tests don't pass\n\n**Solutions**:\n1. Ensure test database is seeded\n2. Check test fixtures are correct\n3. Verify mocks are set up properly\n4. Run tests with `--verbose` flag\n\n---\n\n## Success Criteria\n\n**This skill succeeds when**:\n- [ ] Endpoint responds with correct status codes\n- [ ] Request validation catches invalid inputs\n- [ ] Error handling works consistently\n- [ ] Tests cover success and error cases\n- [ ] Code follows REST/GraphQL conventions\n- [ ] Documentation is clear and complete\n\n---\n\n**Auto-invoke this skill when creating API endpoints to ensure consistency and security** ğŸ”’\n",
        "skills/backend-test/SKILL.md": "---\nname: backend-test\ndescription: Generate backend tests (unit, integration, mocks). Auto-invoke when user says \"write test for\", \"add test\", \"test this\", or \"create test\".\nallowed-tools: Read, Write, Edit, Grep, Glob, Bash\nversion: 1.0.0\n---\n\n# Backend Test Generator\n\nGenerate comprehensive backend tests with Jest/Vitest including fixtures and mocks.\n\n## When to Invoke\n\nAuto-invoke when user mentions:\n- \"Write test for\"\n- \"Add test\"\n- \"Test this\"\n- \"Create test\"\n- \"Test [component/function]\"\n\n## What This Does\n\n1. Generates test file with describe/it blocks\n2. Creates test fixtures\n3. Generates mocks for dependencies\n4. Includes edge cases\n5. Follows testing best practices\n\n## Success Criteria\n\n- [ ] Test file generated with proper structure\n- [ ] Tests cover happy path and error cases\n- [ ] Mocks isolate unit under test\n- [ ] Fixtures provide test data\n- [ ] Tests are runnable and pass\n\n**Auto-invoke when writing backend tests** ğŸ§ª\n",
        "skills/database-migration/SKILL.md": "---\nname: database-migration\ndescription: Create database migration with schema changes and rollback. Auto-invoke when user says \"create migration\", \"add table\", \"modify schema\", or \"change database\".\nallowed-tools: Read, Write, Edit, Grep, Glob, Bash\nversion: 2.0.0\n---\n\n# Database Migration Generator\n\nGenerate database migrations with rollback capability for schema changes, with built-in ToM verification for safe database operations.\n\n## When to Invoke\n\nAuto-invoke when user mentions:\n- \"Create migration\"\n- \"Add table\"\n- \"Modify schema\"\n- \"Change database\"\n- \"Database migration for [change]\"\n- \"Add column to [table]\"\n- \"Rename [table/column]\"\n\n## What This Does\n\n1. Detects migration framework (Knex, Prisma, TypeORM, raw SQL)\n2. Gathers migration requirements\n3. **Verifies understanding before generating** (ToM checkpoint - critical for DB changes)\n4. Generates migration file with timestamp\n5. Creates schema change (up migration)\n6. Creates rollback (down migration)\n7. Validates migration safety\n8. Shows migration summary\n\n## Execution Steps\n\n### Step 1: Detect Migration Framework\n\n**Check project for migration tool**:\n\n```bash\n# Check for Knex\nif [ -f \"knexfile.js\" ] || [ -f \"knexfile.ts\" ] || grep -q '\"knex\"' package.json 2>/dev/null; then\n  echo \"Knex detected\"\nfi\n\n# Check for Prisma\nif [ -f \"prisma/schema.prisma\" ]; then\n  echo \"Prisma detected\"\nfi\n\n# Check for TypeORM\nif [ -f \"ormconfig.json\" ] || [ -f \"ormconfig.ts\" ] || grep -q '\"typeorm\"' package.json 2>/dev/null; then\n  echo \"TypeORM detected\"\nfi\n\n# Check for Drizzle\nif grep -q '\"drizzle-orm\"' package.json 2>/dev/null; then\n  echo \"Drizzle detected\"\nfi\n```\n\n**Framework detection result**:\n```\nDetected: {FRAMEWORK}\nMigration directory: {MIGRATION_PATH}\nNaming convention: {CONVENTION}\n```\n\n**If no framework detected**:\n```\nâš ï¸  No migration framework detected\n\nOptions:\n1. Generate raw SQL migrations\n2. Set up Knex (recommended for flexibility)\n3. Set up Prisma (recommended for type safety)\n\nYour choice [1-3]:\n```\n\n### Step 2: Gather Migration Requirements\n\n**Ask user for migration details**:\n```\nMigration name: [e.g., add_user_verification_columns]\nChange type:\n  - create_table (new table)\n  - add_column (add to existing table)\n  - modify_column (change existing column)\n  - drop_column (remove column)\n  - rename (rename table or column)\n  - add_index (create index)\n  - add_constraint (foreign key, unique, etc.)\n\nTarget table: [e.g., users]\n\nSchema details: [describe the changes]\n```\n\n### Step 2.5: Verify Understanding (ToM Checkpoint - ALWAYS for DB) [EXECUTE]\n\n**CRITICAL**: This step MUST ALWAYS be executed for database migrations. No exceptions.\n\n**Database migrations are high-stakes - ALWAYS verify before generating**.\n\n**Display verification**:\n```\nI understood you want:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nMigration: {MIGRATION_NAME}\nFramework: {FRAMEWORK} (detected)\nType: {CHANGE_TYPE}\nTarget: {TABLE_NAME}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nSchema Changes (UP):\n{SCHEMA_CHANGE_PREVIEW}\n\nRollback (DOWN):\n{ROLLBACK_PREVIEW}\n\nâš ï¸  Database migrations affect production data\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nAssumptions I'm making:\n- Column types match existing conventions\n- Indexes will use default naming\n- No data migration needed (schema only)\n\nProceed with generation? [Y/n]\n```\n\n**Never skip verification for database migrations** - they can cause data loss.\n\n### Step 3: Generate Migration File\n\n**Based on detected framework**:\n\n#### Knex Migration\n```bash\n# Generate filename\nTIMESTAMP=$(date +%Y%m%d%H%M%S)\nFILENAME=\"${TIMESTAMP}_${MIGRATION_NAME}.ts\"\n\n# Create migration file\nWrite(\n  file_path: \"migrations/${FILENAME}\",\n  content: [knex migration template]\n)\n```\n\n**Knex template**:\n```typescript\nimport { Knex } from 'knex';\n\nexport async function up(knex: Knex): Promise<void> {\n  ${UP_MIGRATION}\n}\n\nexport async function down(knex: Knex): Promise<void> {\n  ${DOWN_MIGRATION}\n}\n```\n\n#### Prisma Migration\n```bash\n# Prisma uses schema.prisma + migrate commands\n# Update schema.prisma with new models/fields\n# Then run: npx prisma migrate dev --name ${MIGRATION_NAME}\n```\n\n**Show Prisma workflow**:\n```\nPrisma detected - updating schema.prisma\n\n1. I'll update prisma/schema.prisma with:\n   ${SCHEMA_CHANGES}\n\n2. Run migration:\n   npx prisma migrate dev --name ${MIGRATION_NAME}\n\n3. Generate client:\n   npx prisma generate\n```\n\n#### TypeORM Migration\n```bash\nTIMESTAMP=$(date +%Y%m%d%H%M%S)\nFILENAME=\"${TIMESTAMP}-${MIGRATION_NAME}.ts\"\n```\n\n**TypeORM template**:\n```typescript\nimport { MigrationInterface, QueryRunner, Table } from 'typeorm';\n\nexport class ${MIGRATION_CLASS_NAME}${TIMESTAMP} implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise<void> {\n    ${UP_MIGRATION}\n  }\n\n  public async down(queryRunner: QueryRunner): Promise<void> {\n    ${DOWN_MIGRATION}\n  }\n}\n```\n\n### Step 4: Generate Rollback Logic\n\n**Ensure every UP has a corresponding DOWN**:\n\n| UP Operation | DOWN Operation |\n|--------------|----------------|\n| CREATE TABLE | DROP TABLE |\n| ADD COLUMN | DROP COLUMN |\n| ADD INDEX | DROP INDEX |\n| ADD CONSTRAINT | DROP CONSTRAINT |\n| RENAME | RENAME (reverse) |\n| ALTER COLUMN | ALTER COLUMN (reverse) |\n\n**Warning for destructive operations**:\n```\nâš ï¸  DROP COLUMN in DOWN migration will lose data!\n\nColumn: {COLUMN_NAME}\nType: {COLUMN_TYPE}\n\nIf this column has data, consider:\n1. Backup data before migration\n2. Add data migration step\n3. Keep column but deprecate\n\nUnderstood? [Y/n]\n```\n\n### Step 5: Validate Migration Safety\n\n**Check for common issues**:\n\n```\nMigration Safety Check:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâœ… Rollback defined (can undo changes)\nâœ… No DROP TABLE without backup warning\nâœ… No ALTER on large tables without consideration\nâš ï¸  Adding NOT NULL column - needs DEFAULT value\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n**Safety warnings to check**:\n- Adding NOT NULL without DEFAULT (will fail on existing rows)\n- Dropping columns with data\n- Renaming columns (may break application code)\n- Adding UNIQUE constraint (may fail if duplicates exist)\n- Large table alterations (may lock table)\n\n### Step 6: Show Migration Summary\n\n**Display completed migration**:\n\n```\nâœ… Migration Created: {MIGRATION_NAME}\n\nFile: {MIGRATION_PATH}/{FILENAME}\nFramework: {FRAMEWORK}\nTimestamp: {TIMESTAMP}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nSchema Changes:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ UP (Apply)                                  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ {UP_MIGRATION_SUMMARY}                      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ DOWN (Rollback)                             â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ {DOWN_MIGRATION_SUMMARY}                    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nRun Migration:\n{RUN_COMMAND}\n\nTest Rollback:\n{ROLLBACK_COMMAND}\n\nNext Steps:\n1. Review migration file\n2. Test on development database\n3. Run migration: {RUN_COMMAND}\n4. Verify schema changes\n5. Commit migration file\n```\n\n---\n\n## Schema Change Templates\n\n### Create Table (Knex)\n```typescript\nexport async function up(knex: Knex): Promise<void> {\n  await knex.schema.createTable('${TABLE_NAME}', (table) => {\n    table.uuid('id').primary().defaultTo(knex.raw('gen_random_uuid()'));\n    ${COLUMN_DEFINITIONS}\n    table.timestamps(true, true);\n  });\n}\n\nexport async function down(knex: Knex): Promise<void> {\n  await knex.schema.dropTableIfExists('${TABLE_NAME}');\n}\n```\n\n### Add Column (Knex)\n```typescript\nexport async function up(knex: Knex): Promise<void> {\n  await knex.schema.alterTable('${TABLE_NAME}', (table) => {\n    table.${COLUMN_TYPE}('${COLUMN_NAME}')${MODIFIERS};\n  });\n}\n\nexport async function down(knex: Knex): Promise<void> {\n  await knex.schema.alterTable('${TABLE_NAME}', (table) => {\n    table.dropColumn('${COLUMN_NAME}');\n  });\n}\n```\n\n### Add Index (Knex)\n```typescript\nexport async function up(knex: Knex): Promise<void> {\n  await knex.schema.alterTable('${TABLE_NAME}', (table) => {\n    table.index(['${COLUMN_NAME}'], '${INDEX_NAME}');\n  });\n}\n\nexport async function down(knex: Knex): Promise<void> {\n  await knex.schema.alterTable('${TABLE_NAME}', (table) => {\n    table.dropIndex(['${COLUMN_NAME}'], '${INDEX_NAME}');\n  });\n}\n```\n\n---\n\n## Framework-Specific Commands\n\n### Knex\n```bash\n# Run pending migrations\nnpx knex migrate:latest\n\n# Rollback last batch\nnpx knex migrate:rollback\n\n# Run specific migration\nnpx knex migrate:up ${MIGRATION_NAME}\n\n# Check status\nnpx knex migrate:status\n```\n\n### Prisma\n```bash\n# Create and apply migration\nnpx prisma migrate dev --name ${MIGRATION_NAME}\n\n# Apply in production\nnpx prisma migrate deploy\n\n# Reset database (dev only)\nnpx prisma migrate reset\n\n# Check status\nnpx prisma migrate status\n```\n\n### TypeORM\n```bash\n# Run pending migrations\nnpx typeorm migration:run\n\n# Revert last migration\nnpx typeorm migration:revert\n\n# Generate migration from entities\nnpx typeorm migration:generate -n ${MIGRATION_NAME}\n\n# Show migrations\nnpx typeorm migration:show\n```\n\n---\n\n## Error Handling\n\n**Framework not detected**:\n```\nâš ï¸  No migration framework detected in project\n\nPlease set up a migration framework first:\n- Knex: npm install knex && npx knex init\n- Prisma: npm install prisma && npx prisma init\n- TypeORM: npm install typeorm && create ormconfig\n```\n\n**Migration name conflict**:\n```\nâš ï¸  Migration with similar name already exists\n\nExisting: 20251209_add_users_table.ts\nRequested: add_users_table\n\nOptions:\n1. Use different name\n2. Add version suffix (add_users_table_v2)\n3. Check if existing migration is sufficient\n\nYour choice [1-3]:\n```\n\n**Validation failure**:\n```\nâŒ Migration validation failed\n\nIssues:\n- Column 'status' is NOT NULL but has no DEFAULT\n- Table 'orders' doesn't exist (referenced in foreign key)\n\nFix these issues before generating migration.\n```\n\n---\n\n## Success Criteria\n\nMigration is successful when:\n- [ ] Migration file generated with unique timestamp\n- [ ] Framework conventions followed\n- [ ] UP migration creates/modifies schema correctly\n- [ ] DOWN migration rolls back changes completely\n- [ ] ToM verification passed (user confirmed understanding)\n- [ ] Safety checks passed\n- [ ] Commands shown for running migration\n\n---\n\n## Best Practices\n\n### Naming Conventions\n- `create_users_table` - for new tables\n- `add_email_to_users` - for adding columns\n- `add_index_on_users_email` - for indexes\n- `change_status_type_in_orders` - for modifications\n\n### Safety\n- Always test on development database first\n- Backup production before running migrations\n- Use transactions where supported\n- Consider data migration for non-null columns\n\n### Code Review\n- Review generated SQL before running\n- Check rollback logic is complete\n- Verify no data loss in DOWN migration\n- Test full rollback cycle\n\n---\n\n**Database migrations affect production data - ToM verification is mandatory for this skill** ğŸ—„ï¸\n",
        "skills/frontend-component/SKILL.md": "---\nname: frontend-component\ndescription: Create React/Vue component with TypeScript, tests, and styles. Auto-invoke when user says \"create component\", \"add component\", \"new component\", or \"build component\".\nallowed-tools: Read, Write, Edit, Grep, Glob, Bash\nversion: 1.0.0\n---\n\n# Frontend Component Generator\n\nGenerate production-ready React/Vue components with TypeScript, tests, and styles following modern best practices.\n\n## When to Invoke\n\nAuto-invoke when user mentions:\n- \"Create a component\"\n- \"Add a component\"\n- \"New component\"\n- \"Build a component\"\n- \"Generate component for [feature]\"\n\n## What This Does\n\n1. Generates component file with TypeScript and props interface\n2. Creates test file with React Testing Library\n3. Generates CSS module for styling\n4. Creates barrel export (index.ts)\n5. Validates naming conventions\n6. Follows project patterns\n\n## Execution Steps\n\n### Step 1: Gather Component Requirements\n\n**Ask user for component details**:\n```\nComponent name: [PascalCase name, e.g., UserProfile]\nComponent type:\n  - simple (basic functional component)\n  - with-hooks (useState, useEffect, etc.)\n  - container (data fetching component)\n\nStyling approach:\n  - css-modules (default)\n  - styled-components\n  - tailwind\n\nProps needed: [Optional: describe expected props]\n```\n\n**Validate component name**:\n- Use predefined function: `functions/name_validator.py`\n- Ensure PascalCase format\n- No reserved words\n- Descriptive and specific\n\n### Step 1.5: Confirm Component Design (ToM Checkpoint) [EXECUTE]\n\n**IMPORTANT**: This step MUST be executed for complex components.\n\n**Before generating files, confirm interpretation with user**.\n\n**Display verification**:\n```\nI understood you want:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nComponent: {NAME}\nType: {TYPE} (inferred because: {REASON})\nLocation: src/components/{NAME}/\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nDetected patterns from your codebase:\n- Styling: {CSS_APPROACH} (found {EVIDENCE})\n- Testing: {TEST_LIBRARY} (found in package.json)\n- Similar component: {EXISTING_COMPONENT} at {PATH}\n\nProps I'll generate:\n{PROPS_PREVIEW}\n\nProceed with generation? [Y/n]\n```\n\n**Skip verification if** (HIGH-STAKES ONLY mode):\n- Simple presentational component (no hooks, no data fetching)\n- User explicitly said \"quick\", \"just do it\", or \"skip confirmation\"\n- Component name and type are unambiguous\n- No complex props structure\n\n**Always verify if**:\n- Container component with data fetching\n- Complex props interface (5+ props)\n- Hooks component with side effects\n- Component name similar to existing component\n- User is new to codebase (no profile history)\n\n### Step 2: Generate Props Interface\n\n**Based on component type and requirements**:\n\nUse predefined function: `functions/props_interface_generator.py`\n\n```python\n# Generates TypeScript interface based on component requirements\npython3 functions/props_interface_generator.py \\\n  --name \"UserProfile\" \\\n  --props \"userId:string,onUpdate:function,isActive:boolean\"\n```\n\n**Output**:\n```typescript\ninterface UserProfileProps {\n  userId: string;\n  onUpdate?: () => void;\n  isActive?: boolean;\n  children?: React.ReactNode;\n  className?: string;\n}\n```\n\n### Step 3: Generate Component File\n\n**Use appropriate template based on type**:\n\n**Simple component**:\n```\nUse template: templates/component-simple-template.tsx\n```\n\n**Component with hooks**:\n```\nUse template: templates/component-with-hooks-template.tsx\n```\n\n**Container component**:\n```\nUse template: templates/component-container-template.tsx\n```\n\n**Use predefined function**: `functions/component_generator.py`\n\n```bash\npython3 functions/component_generator.py \\\n  --name \"UserProfile\" \\\n  --type \"simple\" \\\n  --props-interface \"UserProfileProps\" \\\n  --template \"templates/component-simple-template.tsx\" \\\n  --output \"src/components/UserProfile/UserProfile.tsx\"\n```\n\n**Template substitutions**:\n- `${COMPONENT_NAME}` â†’ Component name (PascalCase)\n- `${PROPS_INTERFACE}` â†’ Generated props interface\n- `${STYLE_IMPORT}` â†’ CSS module import\n- `${DESCRIPTION}` â†’ Brief component description\n\n### Step 4: Generate Test File\n\n**Use predefined function**: `functions/test_generator.py`\n\n```bash\npython3 functions/test_generator.py \\\n  --component-name \"UserProfile\" \\\n  --component-path \"src/components/UserProfile/UserProfile.tsx\" \\\n  --template \"templates/test-template.test.tsx\" \\\n  --output \"src/components/UserProfile/UserProfile.test.tsx\"\n```\n\n**Test template includes**:\n- Basic rendering test\n- Props validation test\n- Event handler tests (if applicable)\n- Accessibility tests\n\n**Template substitutions**:\n- `${COMPONENT_NAME}` â†’ Component name\n- `${IMPORT_PATH}` â†’ Relative import path\n- `${TEST_CASES}` â†’ Generated test cases based on props\n\n### Step 5: Generate Style File\n\n**Use predefined function**: `functions/style_generator.py`\n\n```bash\npython3 functions/style_generator.py \\\n  --name \"UserProfile\" \\\n  --approach \"css-modules\" \\\n  --template \"templates/style-template.module.css\" \\\n  --output \"src/components/UserProfile/UserProfile.module.css\"\n```\n\n**CSS Modules template**:\n```css\n.container {\n  /* Component wrapper styles */\n}\n\n.title {\n  /* Title styles */\n}\n\n/* Add more classes as needed */\n```\n\n**Styled Components alternative**:\n```typescript\n// Generated if --approach \"styled-components\"\nimport styled from 'styled-components';\n\nexport const Container = styled.div`\n  /* Component wrapper styles */\n`;\n\nexport const Title = styled.h2`\n  /* Title styles */\n`;\n```\n\n### Step 6: Generate Barrel Export\n\n**Create index.ts for clean imports**:\n\n```bash\nWrite(\n  file_path: \"src/components/UserProfile/index.ts\",\n  content: \"export { UserProfile } from './UserProfile';\\nexport type { UserProfileProps } from './UserProfile';\\n\"\n)\n```\n\n**Allows usage**:\n```typescript\nimport { UserProfile } from '@/components/UserProfile';\n```\n\n### Step 7: Show Component Summary\n\n**Display generated files and usage**:\n\n```\nâœ… Component Created: UserProfile\n\nStructure:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“ src/components/UserProfile/\n   â”œâ”€â”€ UserProfile.tsx         (Component)\n   â”œâ”€â”€ UserProfile.test.tsx    (Tests)\n   â”œâ”€â”€ UserProfile.module.css  (Styles)\n   â””â”€â”€ index.ts                (Exports)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nProps Interface:\ninterface UserProfileProps {\n  userId: string;\n  onUpdate?: () => void;\n  isActive?: boolean;\n}\n\nUsage:\nimport { UserProfile } from '@/components/UserProfile';\n\n<UserProfile\n  userId=\"123\"\n  onUpdate={() => console.log('Updated')}\n  isActive={true}\n/>\n\nNext Steps:\n1. Customize component implementation\n2. Run tests: npm test UserProfile\n3. Import and use in your feature\n```\n\n---\n\n## Predefined Functions\n\n### 1. name_validator.py\n\nValidates component naming conventions.\n\n**Usage**:\n```bash\npython3 functions/name_validator.py --name \"UserProfile\"\n```\n\n**Checks**:\n- PascalCase format\n- Not a reserved word (e.g., Component, Element, etc.)\n- Descriptive (length > 2 chars)\n- No special characters\n\n**Returns**: Valid name or error message\n\n---\n\n### 2. props_interface_generator.py\n\nGenerates TypeScript props interface from user input.\n\n**Usage**:\n```bash\npython3 functions/props_interface_generator.py \\\n  --name \"UserProfile\" \\\n  --props \"userId:string,onUpdate:function,isActive:boolean\"\n```\n\n**Supported types**:\n- `string`, `number`, `boolean`\n- `function` (becomes `() => void`)\n- `array` (becomes `any[]`)\n- `object` (becomes `Record<string, any>`)\n- `react-node` (becomes `React.ReactNode`)\n\n**Returns**: TypeScript interface string\n\n---\n\n### 3. component_generator.py\n\nGenerates component file from template with substitutions.\n\n**Usage**:\n```bash\npython3 functions/component_generator.py \\\n  --name \"UserProfile\" \\\n  --type \"simple\" \\\n  --props-interface \"UserProfileProps\" \\\n  --template \"templates/component-simple-template.tsx\" \\\n  --output \"src/components/UserProfile/UserProfile.tsx\"\n```\n\n**Parameters**:\n- `--name`: Component name (PascalCase)\n- `--type`: Component type (simple/with-hooks/container)\n- `--props-interface`: Props interface name\n- `--template`: Template file path\n- `--output`: Output file path\n\n**Returns**: Generated component code\n\n---\n\n### 4. test_generator.py\n\nGenerates test file with React Testing Library.\n\n**Usage**:\n```bash\npython3 functions/test_generator.py \\\n  --component-name \"UserProfile\" \\\n  --component-path \"src/components/UserProfile/UserProfile.tsx\" \\\n  --template \"templates/test-template.test.tsx\" \\\n  --output \"src/components/UserProfile/UserProfile.test.tsx\"\n```\n\n**Generates tests for**:\n- Component rendering\n- Props validation\n- Event handlers\n- Accessibility attributes\n\n**Returns**: Generated test code\n\n---\n\n### 5. style_generator.py\n\nGenerates style file (CSS Modules or Styled Components).\n\n**Usage**:\n```bash\npython3 functions/style_generator.py \\\n  --name \"UserProfile\" \\\n  --approach \"css-modules\" \\\n  --template \"templates/style-template.module.css\" \\\n  --output \"src/components/UserProfile/UserProfile.module.css\"\n```\n\n**Supported approaches**:\n- `css-modules` (default)\n- `styled-components`\n- `tailwind` (generates className utilities)\n\n**Returns**: Generated style code\n\n---\n\n## Templates\n\n### component-simple-template.tsx\n\nBasic functional component template.\n\n**Placeholders**:\n- `${COMPONENT_NAME}` - Component name\n- `${PROPS_INTERFACE}` - Props interface definition\n- `${STYLE_IMPORT}` - CSS import statement\n- `${DESCRIPTION}` - Component description\n\n### component-with-hooks-template.tsx\n\nComponent template with useState, useEffect examples.\n\n**Additional placeholders**:\n- `${HOOKS}` - Hook declarations\n- `${HANDLERS}` - Event handler functions\n\n### component-container-template.tsx\n\nContainer component template with data fetching.\n\n**Additional placeholders**:\n- `${API_IMPORT}` - API function import\n- `${DATA_TYPE}` - Data type definition\n- `${FETCH_LOGIC}` - Data fetching implementation\n\n### test-template.test.tsx\n\nReact Testing Library test template.\n\n**Placeholders**:\n- `${COMPONENT_NAME}` - Component name\n- `${IMPORT_PATH}` - Import path\n- `${TEST_CASES}` - Generated test cases\n\n### style-template.module.css\n\nCSS Modules template.\n\n**Placeholders**:\n- `${COMPONENT_NAME_KEBAB}` - Component name in kebab-case\n- `${BASE_STYLES}` - Base container styles\n\n---\n\n## Examples\n\nSee `examples/` directory for reference implementations:\n\n1. **Button.tsx** - Simple component with variants\n2. **SearchBar.tsx** - Component with hooks (useState, useEffect)\n3. **UserProfile.tsx** - Container component with data fetching\n\nEach example includes:\n- Component implementation\n- Test file\n- Style file\n- Usage documentation\n\n---\n\n## Best Practices\n\n### Component Design\n- Keep components **small and focused** (single responsibility)\n- **Compose** complex UIs from simple components\n- **Lift state up** only when necessary\n- Use **descriptive names** (UserProfile, not UP)\n\n### TypeScript\n- **Define prop interfaces** explicitly\n- **Avoid `any`** type (use `unknown` if needed)\n- **Export types** for consumers\n- **Use strict mode**\n\n### Testing\n- **Test user behavior**, not implementation\n- **Query by role/text**, not test IDs\n- **Test accessible attributes**\n- **Mock external dependencies**\n\n### Styling\n- **CSS Modules** for scoped styles\n- **BEM or descriptive class names**\n- **Mobile-first** responsive design\n- **Use CSS custom properties** for theming\n\n### Accessibility\n- **Semantic HTML** (button, nav, main, etc.)\n- **ARIA labels** when needed\n- **Keyboard navigation** support\n- **Focus management** in modals/dropdowns\n\n---\n\n## Troubleshooting\n\n### Component Not Rendering\n\n**Problem**: Generated component throws errors\n\n**Solutions**:\n1. Check TypeScript compilation errors\n2. Verify all imports are correct\n3. Check props interface matches usage\n4. Validate JSX syntax\n\n### Tests Failing\n\n**Problem**: Generated tests don't pass\n\n**Solutions**:\n1. Ensure React Testing Library is installed\n2. Check test queries match component output\n3. Verify mocks are set up correctly\n4. Run tests with `--verbose` flag\n\n### Styles Not Applying\n\n**Problem**: CSS modules not loading\n\n**Solutions**:\n1. Check CSS module import syntax\n2. Verify webpack/vite config supports CSS modules\n3. Check className is applied to element\n4. Inspect browser devtools for loaded styles\n\n---\n\n## Success Criteria\n\n**This skill succeeds when**:\n- [ ] Component file generated with valid TypeScript\n- [ ] Test file created with passing tests\n- [ ] Style file generated with scoped styles\n- [ ] Barrel export allows clean imports\n- [ ] Props interface matches requirements\n- [ ] Code follows React best practices\n- [ ] Accessibility attributes included\n\n---\n\n**Auto-invoke this skill when creating React components to ensure consistency and save time** âš›ï¸\n",
        "skills/frontend-test/SKILL.md": "---\nname: frontend-test\ndescription: Generate frontend component tests (unit, snapshot, e2e). Auto-invoke when user says \"test this component\", \"write component test\", or \"add component test\".\nallowed-tools: Read, Write, Edit, Grep, Glob, Bash\nversion: 1.0.0\n---\n\n# Frontend Test Generator\n\nGenerate React/Vue component tests with React Testing Library including user interactions.\n\n## When to Invoke\n\nAuto-invoke when user mentions:\n- \"Test this component\"\n- \"Write component test\"\n- \"Test component\"\n- \"Add component test\"\n- \"Component tests for [name]\"\n\n## What This Does\n\n1. Generates test file with RTL utilities\n2. Tests component rendering\n3. Tests user interactions (click, type, etc.)\n4. Tests accessibility\n5. Generates snapshot tests\n\n## Success Criteria\n\n- [ ] Test file generated with RTL imports\n- [ ] Tests render component correctly\n- [ ] User interactions are tested\n- [ ] Accessibility attributes validated\n- [ ] Tests follow React Testing Library best practices\n\n**Auto-invoke when writing frontend component tests** âš›ï¸\n",
        "skills/nav-compact/SKILL.md": "---\nname: nav-compact\ndescription: Clear conversation context while preserving knowledge via context marker. Use when user says \"clear context\", \"start fresh\", \"done with this task\", or when approaching token limits.\nallowed-tools: Read, Write, Bash\nversion: 1.0.0\n---\n\n# Navigator Compact Skill\n\nClear your conversation context while preserving all knowledge in a context marker. Like git commit before switching branches - save your state, then start fresh.\n\n## When to Invoke\n\nInvoke this skill when the user:\n- Says \"clear context\", \"start fresh\", \"reset conversation\"\n- Says \"I'm done with this task\", \"moving to next feature\"\n- Mentions \"approaching token limit\", \"context getting full\"\n- Says \"compact\", \"clean up context\"\n- After completing isolated sub-task\n\n**DO NOT invoke** if:\n- User is in middle of implementation\n- Context is needed for next immediate step\n- Less than 20 messages in conversation (not much to gain)\n\n## Execution Steps\n\n### Step 1: Check If Worth Compacting\n\nEstimate conversation size:\n- If < 20 messages: Suggest waiting\n- If 20-50 messages: Safe to compact\n- If > 50 messages: Highly recommended\n\nShow message:\n```\nğŸ“Š Current session: ~[N] messages\n\nCompacting will:\n- Create marker with current state\n- Clear conversation history\n- Free up ~[X]k tokens for new work\n\nContinue? [Y/n]:\n```\n\n### Step 2: Create Automatic Marker\n\nInvoke `nav-marker` skill (or create marker directly) with auto-generated name:\n\n```\nMarker name: before-compact-{YYYY-MM-DD}-{HHmm}\nNote: \"Auto-created before compact\"\n```\n\nThis marker should capture:\n- Last 10-15 messages summary\n- Files modified\n- Technical decisions\n- Current progress\n- Next steps\n\n### Step 3: Set Active Marker\n\nWrite the marker filename to `.active` file:\n\n```bash\necho \"{marker-filename}.md\" > .agent/.context-markers/.active\n```\n\nThis tells `nav-start` to offer restoration on next session.\n\n### Step 4: Display Compact Instructions\n\nShow user how to compact:\n\n```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘                                                      â•‘\nâ•‘  ğŸ—œï¸  Navigator Compact                                â•‘\nâ•‘                                                      â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ… Context marker created:\n   .agent/.context-markers/{marker-filename}.md\n\nğŸ“‹ Marker contains:\n   - Conversation summary (last 15 messages)\n   - Files you modified\n   - Technical decisions made\n   - Current progress & next steps\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ”¹ TO COMPACT:\n\nClaude Code doesn't allow me to clear the conversation\nprogrammatically. You need to do it manually:\n\n**Method 1: New conversation**\n1. Start a new conversation\n2. Say \"load my context\" or \"start my session\"\n3. I'll detect the active marker and restore your state\n\n**Method 2: /clear command** (if available)\n1. Type /clear\n2. Say \"load my context\"\n3. Active marker will be restored\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ’¡ Your progress is saved. You won't lose any context.\n\nNext session:\n1. Say \"start my session\" or run /nav:start\n2. I'll detect the marker: \"{marker-filename}\"\n3. Confirm to restore, and you'll be back where you left off\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n### Step 5: Confirm Marker Location\n\nVerify marker was created:\n\n```bash\nls -lh .agent/.context-markers/{marker-filename}.md\n```\n\nShow file size and confirm success:\n```\nâœ… Marker saved successfully\n   File: {marker-filename}.md\n   Size: {X} KB (~{Y} tokens)\n\nYour context is preserved!\n```\n\n## Important Notes\n\n**Why manual compact?**\n\nClaude Code conversations cannot be programmatically cleared from within a conversation. The user must:\n- Start a new conversation, OR\n- Use `/clear` command (if available)\n\nThis skill creates the marker and sets up auto-restoration, but the actual clearing must be done by the user.\n\n**Auto-restoration workflow:**\n\n```\nSession 1:\n  User: \"Clear context\"\n  â†’ nav-compact creates marker\n  â†’ Sets .active file\n  â†’ Instructs user how to clear\n\nSession 2 (new conversation):\n  User: \"Start my session\"\n  â†’ nav-start detects .active file\n  â†’ Offers to restore marker\n  â†’ User confirms\n  â†’ Context restored!\n```\n\n## Common Use Cases\n\n### After Completing Feature\n```\nUser: \"Feature complete, clear context for next task\"\nâ†’ Creates marker: \"before-compact-2025-10-16-1430\"\nâ†’ Captures: Feature implementation details\nâ†’ User starts new conversation\nâ†’ Restores marker, begins next feature\n```\n\n### Approaching Token Limit\n```\nUser: \"Context getting full, let's compact\"\nâ†’ Creates marker: \"before-compact-2025-10-16-1500\"\nâ†’ Preserves: All current work\nâ†’ User clears conversation\nâ†’ Continues with fresh context\n```\n\n### Switching Between Tasks\n```\nUser: \"Done with auth, moving to payments\"\nâ†’ Creates marker: \"auth-feature-complete\"\nâ†’ Clear context\nâ†’ New session: Fresh start for payments\nâ†’ Can restore auth marker later if needed\n```\n\n## Error Handling\n\n**Marker creation fails**:\n```\nâŒ Failed to create marker\n\nCannot compact without preserving context.\nFix marker creation first.\n```\n\n**Not enough context to preserve**:\n```\nâš ï¸  Very little context (< 10 messages)\n\nCompacting now won't save much. Consider:\n- Continue working\n- Compact after more progress\n\nContinue anyway? [y/N]:\n```\n\n**Active marker already exists**:\n```\nâš ï¸  Active marker already exists:\n   .agent/.context-markers/.active\n\nThis means you have an unrestored marker from previous compact.\n\nOptions:\n1. Load that marker first (recommended)\n2. Overwrite with new marker\n3. Cancel compact\n\nYour choice [1-3]:\n```\n\n## Success Criteria\n\nCompact is successful when:\n- [ ] Context marker created successfully\n- [ ] Marker contains comprehensive summary\n- [ ] `.active` file created (for auto-restoration)\n- [ ] User knows how to clear conversation\n- [ ] User knows marker will auto-restore on next session\n\n## Scripts\n\n**compact.py**: Automated compact workflow\n- Create marker\n- Set active file\n- Generate restore instructions\n\n## Best Practices\n\n**When to compact:**\n- âœ… After completing isolated feature/sub-task\n- âœ… After major documentation update\n- âœ… Before switching to unrelated work\n- âœ… When approaching 70%+ token usage\n- âŒ In middle of implementation\n- âŒ When context needed for next step\n- âŒ After every few messages (wasteful)\n\n**Compact frequency:**\n- Small task (30 min): No compact needed\n- Medium task (2-3 hours): Compact after completion\n- Large task (full day): Compact at logical breakpoints\n- Multi-day task: Compact at end of each session\n\n## Notes\n\nThis skill automates the preparation for compacting but cannot clear the conversation itself (Claude Code limitation).\n\nThe value is in:\n1. Automatic marker creation\n2. Setting up auto-restoration\n3. Guiding user through process\n4. Preserving context seamlessly\n\nThis provides same functionality as `/nav:compact` command but with natural language invocation.\n",
        "skills/nav-diagnose/SKILL.md": "---\nname: nav-diagnose\ndescription: Detect quality drops in AI output and prompt re-anchoring. Auto-triggers after repeated corrections, context confusion, or when user says \"something seems off\", \"you're not getting this\".\nallowed-tools: Read, Write, Bash\nversion: 1.0.0\n---\n\n# Navigator Diagnose Skill\n\nDetect when human-AI collaboration quality drops and prompt re-anchoring to restore effective communication.\n\n## Why This Exists (Theory of Mind)\n\nBased on Riedl & Weidmann 2025 research on Human-AI Synergy:\n- Theory of Mind varies dynamically within users (moment-to-moment)\n- Quality drops occur when ToM alignment degrades\n- Early detection and re-anchoring restores collaboration effectiveness\n- Both user ToM (understanding Claude) and Claude's model of user can drift\n\nThis skill detects when collaboration is degrading and prompts corrective action.\n\n## When to Invoke\n\n**Auto-invoke when**:\n- 2+ corrections on the same topic detected\n- User says \"something seems off\", \"you're not getting this\"\n- User says \"wrong again\", \"still not right\"\n- Context usage exceeds 75% and quality signals degrade\n- User expresses frustration (\"ugh\", \"sigh\", explicit frustration)\n- Loop mode stagnation detected (3+ same-state iterations)\n\n**DO NOT invoke if**:\n- Single correction (normal collaboration)\n- User is providing new requirements (not correcting)\n- Fresh session (insufficient data to diagnose)\n- User explicitly says \"it's fine\" or \"close enough\"\n\n## Quality Drop Indicators\n\n### 1. Repeated Corrections (High Severity)\n```\nTrigger: Same correction given 2+ times\nSignal: \"No, I said users plural, not user\" (2nd time)\nIssue: Not incorporating user feedback\n```\n\n### 2. Hallucination Signals (High Severity)\n```\nTrigger: References to non-existent files, functions, or packages\nSignal: \"That file doesn't exist\", \"There's no such function\"\nIssue: Generating from incorrect mental model\n```\n\n### 3. Context Confusion (Medium Severity)\n```\nTrigger: Mixing details from unrelated tasks\nSignal: \"That's from the other project\", \"Wrong feature\"\nIssue: Context window pollution or misattribution\n```\n\n### 4. Unaddressed Feedback (Medium Severity)\n```\nTrigger: User correction not reflected in next output\nSignal: Generates same pattern after being told not to\nIssue: Not properly updating internal model\n```\n\n### 5. Goal Drift (Low Severity)\n```\nTrigger: Output increasingly diverges from original goal\nSignal: \"We're getting off track\", \"Not what I asked for\"\nIssue: Lost sight of user's actual objective\n```\n\n### 6. Loop Stagnation (High Severity)\n```\nTrigger: 3+ consecutive iterations with same state hash (loop mode only)\nSignal: nav-loop detects stagnation, triggers nav-diagnose\nIssue: Stuck on same step, unable to progress\n```\n\n## Execution Steps\n\n### Step 1: Assess Quality State\n\n**Analyze recent exchanges** (last 10-15 messages):\n\n```\nQuality Indicators:\n- [ ] Corrections given: {count}\n- [ ] Same-topic corrections: {count}\n- [ ] User frustration signals: {count}\n- [ ] Hallucination reports: {count}\n- [ ] \"Not what I meant\" phrases: {count}\n```\n\n**Calculate severity**:\n```python\nseverity = \"critical\" if same_topic_corrections >= 2 or hallucinations >= 1\nseverity = \"high\" if corrections >= 3 or frustration_signals >= 2\nseverity = \"medium\" if corrections >= 2 or goal_drift_detected\nseverity = \"low\" if corrections == 1  # Normal, don't trigger\n```\n\n### Step 2: Identify Root Cause\n\n**Analyze correction patterns**:\n\n| Pattern | Likely Cause | Re-anchoring Focus |\n|---------|--------------|-------------------|\n| Same correction repeated | Not incorporating feedback | Explicitly acknowledge and confirm understanding |\n| Increasing corrections | Drifting from user intent | Re-establish goals |\n| Technical mismatches | Wrong assumptions | Clarify technical context |\n| Frustration without specifics | Communication mismatch | Ask what's wrong |\n\n### Step 3: Display Diagnostic\n\n**Show quality check alert**:\n```\nâš ï¸  QUALITY CHECK\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nDetected Issue: {ISSUE_TYPE}\nSeverity: {SEVERITY}\n\nWhat I noticed:\n- {OBSERVATION_1}\n- {OBSERVATION_2}\n\nPossible causes:\n- {CAUSE_1}\n- {CAUSE_2}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nLet me re-anchor our collaboration:\n\n1. Your goal: {RECONSTRUCTED_GOAL}\n2. Current state: {STATE_SUMMARY}\n3. What you want: {CORRECTED_UNDERSTANDING}\n\nIs this understanding correct? [Y/n]\n```\n\n### Step 4: Re-anchor Collaboration\n\n**Based on user confirmation**:\n\n**If correct** (Y):\n```\nâœ… Re-anchored!\n\nI'll proceed with this understanding:\n- {KEY_POINT_1}\n- {KEY_POINT_2}\n\nContinuing with: {NEXT_ACTION}\n```\n\n**If incorrect** (n):\n```\nHelp me understand better:\n\n1. What is your actual goal?\n2. What am I getting wrong?\n3. What constraints should I know?\n\n[Open-ended response welcome]\n```\n\n### Step 5: Log Diagnostic (Optional)\n\n**If nav-profile exists**, save diagnostic:\n```json\n{\n  \"date\": \"{YYYY-MM-DD}\",\n  \"issue_type\": \"{ISSUE_TYPE}\",\n  \"severity\": \"{SEVERITY}\",\n  \"resolution\": \"re-anchored|user-corrected|escalated\",\n  \"learnings\": [\"{WHAT_TO_AVOID}\"]\n}\n```\n\n### Step 6: Suggest Preventive Actions\n\n**Based on severity and pattern**:\n\n**For context overload**:\n```\nğŸ’¡ Suggestion: Consider running nav-compact to clear context.\nCurrent context usage is high, which can cause confusion.\n```\n\n**For repeated corrections**:\n```\nğŸ’¡ Suggestion: Let me save your preference to avoid this in future.\n\"Remember I always want {X}\" - This will persist across sessions.\n```\n\n**For communication mismatch**:\n```\nğŸ’¡ Suggestion: Consider adjusting your profile preferences.\n- Current verbosity: {VERBOSITY}\n- Current confirmation: {CONFIRMATION}\n\nUpdate with: \"Remember I prefer {SUGGESTED_STYLE}\"\n```\n\n---\n\n## Re-anchoring Templates\n\n### Template 1: Goal Re-alignment\n```\nLet me verify I understand your goal:\n\nYou want to: {GOAL_STATEMENT}\n\nNot: {COMMON_MISUNDERSTANDING}\n\nKey constraints:\n- {CONSTRAINT_1}\n- {CONSTRAINT_2}\n\nIs this right?\n```\n\n### Template 2: Technical Re-alignment\n```\nLet me verify the technical context:\n\nFramework: {FRAMEWORK}\nPatterns: {PATTERNS}\nConventions: {CONVENTIONS}\n\nWhat I should be using:\n- {TOOL_1}: for {PURPOSE_1}\n- {TOOL_2}: for {PURPOSE_2}\n\nCorrections to my assumptions?\n```\n\n### Template 3: Communication Re-alignment\n```\nI may be mismatching your communication style:\n\nYou seem to prefer:\n- {INFERRED_STYLE_1}\n- {INFERRED_STYLE_2}\n\nI've been:\n- {MY_STYLE_1}\n- {MY_STYLE_2}\n\nShould I adjust my approach?\n```\n\n---\n\n## Integration with Other Skills\n\n### With nav-profile\n- Log diagnostics for pattern analysis\n- Suggest preference updates after repeated issues\n- Load profile preferences for baseline comparison\n\n### With nav-marker\n- Suggest marker before major re-anchoring\n- Include diagnostic state in marker\n\n### With nav-compact\n- Recommend compact if context overload detected\n- Track if compaction resolves issues\n\n---\n\n## Quality Signals Reference\n\n### Positive Signals (Good Collaboration)\n```\n- \"Perfect, exactly what I needed\"\n- \"Yes, continue\"\n- \"Good, now...\"\n- No corrections for 5+ exchanges\n- User providing new requirements (not corrections)\n```\n\n### Negative Signals (Quality Drop)\n```\n- \"No\", \"Wrong\", \"Not that\"\n- \"I already said...\"\n- \"Again, please...\"\n- \"Sigh\", \"Ugh\", explicit frustration\n- \"You're not understanding\"\n- Same correction twice\n```\n\n### Neutral Signals (Normal Iteration)\n```\n- \"Actually, let's try...\"\n- \"Can we also...\"\n- \"What about...\"\n- Single correction with explanation\n```\n\n---\n\n## Example Scenarios\n\n### Scenario 1: Repeated REST Convention Correction\n```\nExchange 1:\nUser: \"Create endpoint for users\"\nClaude: Creates /user endpoint\nUser: \"Should be /users (plural)\"\n\nExchange 2:\nUser: \"Now create endpoint for posts\"\nClaude: Creates /post endpoint\nUser: \"Again, plural! /posts\"\n\nâ†’ Trigger: Same correction (plural naming) given twice\nâ†’ Action: Re-anchor on REST conventions\nâ†’ Outcome: \"I understand now - always use plural nouns for REST resources\"\n```\n\n### Scenario 2: Context Confusion\n```\nUser working on: OAuth feature (Feature A)\nClaude references: Stripe integration (Feature B from earlier)\n\nUser: \"That's from the payment feature, not auth\"\n\nâ†’ Trigger: Context confusion detected\nâ†’ Action: Re-anchor on current feature\nâ†’ Suggestion: Consider nav-compact to clear old context\n```\n\n### Scenario 3: User Frustration\n```\nUser: \"Ugh, still not right\"\nUser: \"This is frustrating\"\n\nâ†’ Trigger: Frustration signals detected\nâ†’ Action: Pause and diagnose\nâ†’ Response: Open-ended question about what's wrong\n```\n\n---\n\n## Success Criteria\n\nDiagnostic is successful when:\n- [ ] Quality drops detected before user escalates\n- [ ] Root cause correctly identified\n- [ ] Re-anchoring restores collaboration quality\n- [ ] Preventive suggestions are actionable\n- [ ] User confirms understanding after re-anchor\n- [ ] Same issue doesn't recur immediately\n\n---\n\n## Limitations\n\n**Cannot detect**:\n- Silent user frustration (no signals in text)\n- Issues outside conversation context\n- Problems with external systems\n- User preferences not yet expressed\n\n**Should not**:\n- Over-trigger on normal corrections\n- Interrupt productive flow\n- Make user feel blamed\n- Require lengthy re-explanation\n\n---\n\n## Best Practices\n\n**When diagnosing**:\n- Be humble about AI limitations\n- Don't blame user for miscommunication\n- Offer concrete next steps\n- Keep re-anchoring brief\n\n**When re-anchoring**:\n- Focus on understanding, not apologizing\n- Confirm specific points, not general \"I understand\"\n- Let user correct if wrong\n- Thank user for patience\n\n---\n\n**This skill catches collaboration quality drops early, enabling quick recovery through Theory of Mind re-alignment** ğŸ”\n",
        "skills/nav-features/SKILL.md": "---\nname: nav-features\ndescription: Show and toggle Navigator features. Auto-invoke when user says \"show features\", \"enable/disable feature\", \"my navigator settings\", or \"configure navigator\".\nallowed-tools: Read, Write, Bash\nversion: 1.0.0\n---\n\n# Navigator Features Skill\n\nDisplay and toggle Navigator features with an interactive table. Helps users understand what's enabled and customize their setup.\n\n## When to Invoke\n\nInvoke this skill when the user:\n- Says \"show my features\", \"navigator features\", \"what features are enabled\"\n- Says \"enable [feature]\", \"disable [feature]\", \"turn on/off [feature]\"\n- Says \"configure navigator\", \"my navigator settings\"\n- Asks \"what can navigator do?\", \"what features are available?\"\n\n**DO NOT invoke** if:\n- User is asking about project features (not Navigator)\n- User is in middle of implementation\n- Just starting session (use nav-start instead)\n\n## Execution Steps\n\n### Step 1: Read Current Configuration\n\n```bash\npython3 \"$SKILL_BASE_DIR/functions/feature_manager.py\" show\n```\n\nThis displays the feature table:\n```\nv5.6.0 Features:\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Feature         â”‚ Status â”‚ Description                                     â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ task_mode       â”‚ âœ…     â”‚ Auto-detects task complexity, defers to skills  â”‚\nâ”‚ tom_features    â”‚ âœ…     â”‚ Verification checkpoints, user profile, diag... â”‚\nâ”‚ loop_mode       â”‚ â¸ Off  â”‚ Autonomous loop execution (enable when needed)  â”‚\nâ”‚ simplification  â”‚ âœ…     â”‚ Post-implementation code cleanup with Opus      â”‚\nâ”‚ auto_update     â”‚ âœ…     â”‚ Auto-updates on session start                   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nAll v5.6.0 features configured.\n```\n\n### Step 2: Handle Toggle Request (If Applicable)\n\nIf user requested to enable/disable a feature:\n\n```bash\n# Enable a feature\npython3 \"$SKILL_BASE_DIR/functions/feature_manager.py\" enable task_mode\n\n# Disable a feature\npython3 \"$SKILL_BASE_DIR/functions/feature_manager.py\" disable loop_mode\n```\n\n**Supported features**:\n- `task_mode` - Unified workflow orchestration\n- `tom_features` - Theory of Mind (verification checkpoints, profile, diagnostics)\n- `loop_mode` - Autonomous loop execution\n- `simplification` - Code cleanup before commit\n- `auto_update` - Auto-update on session start\n\n**After toggle, show updated table**.\n\n### Step 3: Explain Feature (If Asked)\n\nIf user asks about a specific feature, provide details:\n\n**task_mode**:\n```\nTask Mode (v5.6.0)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nAuto-detects task complexity and routes appropriately:\n- Simple tasks â†’ Direct execution\n- Skill matches â†’ Defers to skill workflow\n- Substantial â†’ Task Mode phases (RESEARCHâ†’COMPLETE)\n\nConfig: task_mode.enabled, complexity_threshold (0.5)\n```\n\n**tom_features**:\n```\nTheory of Mind (v5.0.0)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nHuman-AI collaboration improvements:\n- Verification checkpoints for high-stakes skills\n- User profile (nav-profile) - remembers preferences\n- Quality detection (nav-diagnose) - catches drift\n\nConfig: tom_features.verification_checkpoints, profile_enabled\n```\n\n**loop_mode**:\n```\nLoop Mode (v5.1.0)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\"Run until done\" capability:\n- Structured completion signals (NAVIGATOR_STATUS)\n- Dual-condition exit (heuristics + EXIT_SIGNAL)\n- Stagnation detection prevents infinite loops\n\nTrigger: \"run until done\", \"loop mode\"\nConfig: loop_mode.enabled, max_iterations (5)\n```\n\n**simplification**:\n```\nCode Simplification (v5.4.0)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nAutomatic code clarity improvements:\n- Runs post-implementation, before commit\n- Clarity over brevity, functionality preserved\n- Uses Opus model for best results\n\nTrigger: \"simplify this code\"\nConfig: simplification.enabled, trigger, scope\n```\n\n**auto_update**:\n```\nAuto-Update (v5.5.0)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nAutomatic plugin updates on session start:\n- Checks for newer version\n- Updates silently if available\n- Never blocks session start\n\nConfig: auto_update.enabled, check_interval_hours (1)\n```\n\n## Predefined Functions\n\n### functions/feature_manager.py\n\n**Purpose**: Display and toggle Navigator features\n\n**Usage**:\n```bash\n# Show all features\npython3 feature_manager.py show\n\n# Show for first session (includes welcome message)\npython3 feature_manager.py show --first-session\n\n# Enable a feature\npython3 feature_manager.py enable task_mode\n\n# Disable a feature\npython3 feature_manager.py disable loop_mode\n\n# Get feature details\npython3 feature_manager.py info task_mode\n```\n\n**Output**: Formatted feature table or status message\n\n## Error Handling\n\n**Config not found**:\n```\nâŒ .nav-config.json not found\n\nRun \"Initialize Navigator in this project\" first.\n```\n\n**Unknown feature**:\n```\nâŒ Unknown feature: xyz\n\nAvailable features:\n  task_mode, tom_features, loop_mode, simplification, auto_update\n```\n\n## Success Criteria\n\n- [ ] Feature table displayed correctly\n- [ ] Toggle updates config file\n- [ ] Updated table shown after toggle\n- [ ] Feature details available on request\n\n## Notes\n\nThis skill is triggered on first session (via nav-start) to help users understand available features and optionally disable unused ones to save tokens.\n",
        "skills/nav-graph/SKILL.md": "---\nname: nav-graph\ndescription: Query project knowledge graph. Search across tasks, SOPs, memories, and concepts. Use when user asks \"what do we know about X?\", \"show everything related to X\", or \"remember this pattern/pitfall/decision\".\nallowed-tools: Read, Write, Edit, Bash\nversion: 1.0.0\n---\n\n# Navigator Knowledge Graph Skill\n\nQuery and manage the unified project knowledge graph. Surfaces relevant knowledge from tasks, SOPs, system docs, and experiential memories.\n\n## Why This Exists\n\nNavigator v6.0.0 introduces the Project Knowledge Graph:\n- **Unified search**: Query across all knowledge types with one interface\n- **Experiential memory**: Patterns, pitfalls, decisions, learnings persist\n- **Context-aware retrieval**: Load only relevant knowledge (~1-2k tokens)\n- **Relationship traversal**: Find related concepts and documents\n\n## When to Invoke\n\n**Query triggers**:\n- \"What do we know about X?\"\n- \"Show everything related to X\"\n- \"Any pitfalls for X?\"\n- \"What decisions about X?\"\n- \"Find all knowledge about X\"\n\n**Memory capture triggers**:\n- \"Remember this pattern: ...\"\n- \"Remember this pitfall: ...\"\n- \"Remember we decided: ...\"\n- \"Remember this learning: ...\"\n\n**Graph management triggers**:\n- \"Initialize knowledge graph\"\n- \"Rebuild knowledge graph\"\n- \"Show graph stats\"\n\n## Graph Location\n\n`.agent/knowledge/graph.json` (~1-2k tokens, loaded on query)\n\n## Execution Steps\n\n### Step 1: Determine Action\n\n**QUERY** (searching knowledge):\n```\nUser: \"What do we know about authentication?\"\nâ†’ Query graph by concept\n```\n\n**CAPTURE** (storing memory):\n```\nUser: \"Remember: auth changes often break session tests\"\nâ†’ Create new memory node\n```\n\n**INIT** (building graph):\n```\nUser: \"Initialize knowledge graph\"\nâ†’ Build graph from existing docs\n```\n\n**STATS** (viewing graph):\n```\nUser: \"Show graph stats\"\nâ†’ Display graph statistics\n```\n\n### Step 2: Load or Initialize Graph\n\n**Check if graph exists**:\n```bash\nif [ -f \".agent/knowledge/graph.json\" ]; then\n  echo \"Graph exists\"\nelse\n  echo \"No graph found, will initialize\"\nfi\n```\n\n**Initialize if not exists**:\n```bash\npython skills/nav-graph/functions/graph_builder.py \\\n  --agent-dir .agent \\\n  --output .agent/knowledge/graph.json\n```\n\n### Step 3A: Query Knowledge (If QUERY Action)\n\n**Extract concept from user input**:\n```\nUser: \"What do we know about testing?\"\nâ†’ Concept: testing\n\nUser: \"Any pitfalls for auth?\"\nâ†’ Concept: auth (normalized to authentication)\n```\n\n**Run query**:\n```bash\npython skills/nav-graph/functions/graph_manager.py \\\n  --action query \\\n  --concept \"testing\" \\\n  --graph-path .agent/knowledge/graph.json\n```\n\n**Display results**:\n```\nKnowledge Graph: \"testing\"\n\nTASKS (3)\n  - TASK-30: Task Verification Enhancement (completed)\n  - TASK-17: Visual Regression Integration (completed)\n  - TASK-11: Project Skills Generation (completed)\n\nMEMORIES (2)\n  - PITFALL: \"Auth changes break session tests\" (90%)\n  - PATTERN: \"Always run unit tests before integration\" (85%)\n\nSOPs (1)\n  - visual-regression-setup\n\nFILES (5)\n  - skills/backend-test/*\n  - skills/frontend-test/*\n\nLoad details: \"Read TASK-30\" or \"Show testing memories\"\n```\n\n### Step 3B: Capture Memory (If CAPTURE Action)\n\n**Parse memory from user input**:\n```\nUser: \"Remember this pitfall: auth changes often break session tests\"\nâ†’ Type: pitfall\nâ†’ Summary: \"auth changes often break session tests\"\nâ†’ Concepts: [auth, testing]\n\nUser: \"Remember we decided to use JWT over sessions for scaling\"\nâ†’ Type: decision\nâ†’ Summary: \"use JWT over sessions for scaling\"\nâ†’ Concepts: [auth, architecture]\n```\n\n**Determine memory type**:\n\n| User Says | Memory Type |\n|-----------|-------------|\n| \"pattern\", \"we use\", \"approach\" | pattern |\n| \"pitfall\", \"watch out\", \"careful\" | pitfall |\n| \"decided\", \"chose\", \"because\" | decision |\n| \"learned\", \"discovered\", \"realized\" | learning |\n\n**Create memory**:\n```bash\npython skills/nav-graph/functions/graph_manager.py \\\n  --action add-memory \\\n  --memory-type pitfall \\\n  --summary \"auth changes often break session tests\" \\\n  --concepts \"auth,testing\" \\\n  --confidence 0.9 \\\n  --graph-path .agent/knowledge/graph.json\n```\n\n**Optionally create detailed memory file**:\n```markdown\n# Pitfall: Auth Changes Break Session Tests\n\n## Summary\nAuth changes often break session tests due to...\n\n## Context\nDiscovered during TASK-XX when...\n\n## Recommended Approach\nWhen modifying auth, always run...\n\n## Related\n- TASK-12: V3 Skills-Only\n- SOP: autonomous-completion\n```\n\n**Confirm capture**:\n```\nMemory captured: mem-001\n\nType: Pitfall\nSummary: \"auth changes often break session tests\"\nConcepts: auth, testing\nConfidence: 90%\n\nThis will be surfaced when working on auth or testing topics.\n```\n\n### Step 3C: Initialize Graph (If INIT Action)\n\n**Build from existing docs**:\n```bash\npython skills/nav-graph/functions/graph_builder.py \\\n  --agent-dir .agent \\\n  --output .agent/knowledge/graph.json\n```\n\n**Display results**:\n```\nKnowledge Graph Initialized\n\nScanned:\n  - Tasks: 35\n  - SOPs: 12\n  - System docs: 3\n  - Markers: 8\n\nExtracted:\n  - Concepts: 15\n  - Relationships: 47\n\nGraph saved to .agent/knowledge/graph.json\n\nQuery with: \"What do we know about [topic]?\"\n```\n\n### Step 3D: Show Stats (If STATS Action)\n\n**Display graph statistics**:\n```bash\npython skills/nav-graph/functions/graph_manager.py \\\n  --action stats \\\n  --graph-path .agent/knowledge/graph.json\n```\n\n**Output**:\n```\nKnowledge Graph Statistics\n==========================\nTotal Nodes: 65\nTotal Edges: 47\nMemories: 5\nLast Updated: 2025-01-23T10:30:00Z\n\nBy Type:\n  Tasks: 35\n  SOPs: 12\n  System: 3\n  Markers: 8\n  Concepts: 15\n  Memories: 5\n```\n\n### Step 4: Find Related (Optional)\n\n**If user asks for related items**:\n```\nUser: \"What's related to TASK-29?\"\n```\n\n**Run traversal**:\n```bash\npython skills/nav-graph/functions/graph_manager.py \\\n  --action related \\\n  --node-id \"TASK-29\" \\\n  --max-depth 2 \\\n  --graph-path .agent/knowledge/graph.json\n```\n\n---\n\n## Memory Types\n\n### Pattern\n\"We use X for Y in this project\"\n- Reusable approaches\n- Project conventions\n- Best practices\n\n### Pitfall\n\"Watch out for X when touching Y\"\n- Common mistakes\n- Gotchas\n- Failure modes\n\n### Decision\n\"We chose X over Y because Z\"\n- Architecture decisions\n- Technology choices\n- Trade-off rationale\n\n### Learning\n\"X usually means Y in this codebase\"\n- Project-specific knowledge\n- Error interpretations\n- Domain insights\n\n---\n\n## Confidence System\n\n**Base confidence**:\n- Correction-based: 0.8\n- Explicit capture: 0.9\n\n**Decay**:\n- 1% per week since last validation\n\n**Boost**:\n- +5% per use (max +25%)\n\n**Threshold**:\n- Below 0.3: Candidate for pruning\n- Above 0.7: Reliable memory\n\n---\n\n## Integration with Other Skills\n\n### nav-start (Session Start)\nLoads graph stats on session start:\n```\nKnowledge graph: 65 nodes, 5 memories\nRelevant: 2 memories for current context\n```\n\n### nav-task (Task Creation)\nAuto-extracts concepts from new tasks:\n```\nCreating TASK-35: Project Memory\nExtracted concepts: knowledge, memory, graph\nAdded to graph.\n```\n\n### nav-profile (Corrections)\nCorrections auto-create memories via `correction_to_memory.py`:\n```bash\n# When correction detected in nav-profile:\npython3 skills/nav-graph/functions/correction_to_memory.py \\\n  --action convert-one \\\n  --correction-json '{\"pattern\": \"...\", \"context\": \"...\", \"confidence\": \"high\"}'\n\n# Output:\n[Correction detected]\nâ†’ Type: pitfall (based on pattern analysis)\nâ†’ Concepts: [auth, testing] (auto-extracted)\nâ†’ Created memory: mem-002\nâ†’ Added to graph\n```\n\n**Sync all corrections**:\n```bash\npython3 skills/nav-graph/functions/correction_to_memory.py \\\n  --action sync \\\n  --profile-path .agent/.user-profile.json \\\n  --graph-path .agent/knowledge/graph.json\n```\n\n### nav-marker (Context Markers)\nMarkers reference graph state:\n```\n## Graph State\n- Memories surfaced: mem-001, mem-003\n- Concepts active: auth, testing\n```\n\n---\n\n## Configuration\n\nIn `.agent/.nav-config.json`:\n```json\n{\n  \"knowledge_graph\": {\n    \"enabled\": true,\n    \"auto_capture_corrections\": true,\n    \"auto_capture_decisions\": true,\n    \"auto_surface_relevant\": true,\n    \"max_session_memories\": 5,\n    \"confidence_decay_rate\": 0.01,\n    \"staleness_threshold_days\": 90,\n    \"git_tracked\": true\n  }\n}\n```\n\n---\n\n## Graph Maintenance\n\n### Health Check\n```bash\npython3 skills/nav-graph/functions/graph_maintenance.py --action health\n```\n\nOutput:\n```\nKnowledge Graph Health Check\n========================================\nTotal Nodes: 94\nTotal Edges: 819\nMemories: 2 (2 high confidence)\nHealth Score: 100/100\n\nNo issues detected!\n```\n\n### Conflict Detection\nFind memories that may contradict each other:\n```bash\npython3 skills/nav-graph/functions/graph_maintenance.py --action conflicts\n```\n\n### Stale Memory Detection\nFind memories not validated in 90+ days:\n```bash\npython3 skills/nav-graph/functions/graph_maintenance.py --action stale --stale-days 90\n```\n\n### Low Confidence Pruning\nFind and optionally remove low-confidence memories:\n```bash\n# Preview what would be removed\npython3 skills/nav-graph/functions/graph_maintenance.py --action prune --threshold 0.3 --dry-run\n\n# Actually remove (use with caution)\npython3 skills/nav-graph/functions/graph_maintenance.py --action prune --threshold 0.3 --execute\n```\n\n### Apply Decay\nReduce confidence of stale memories:\n```bash\npython3 skills/nav-graph/functions/graph_maintenance.py --action decay --decay-rate 0.01\n```\n\n---\n\n## Token Budget\n\n| Component | Tokens | When |\n|-----------|--------|------|\n| graph.json (50 nodes) | ~1000 | On query |\n| graph.json (200 nodes) | ~2000 | On query |\n| Memory summaries (5) | ~500 | On session start |\n| Full memory detail | ~500 each | On request |\n\n**Session overhead**: ~1.3k tokens\n\n---\n\n## Success Criteria\n\nGraph skill succeeds when:\n- [ ] Query returns relevant results across knowledge types\n- [ ] Memories persist and are surfaced appropriately\n- [ ] Concepts connect related items\n- [ ] Confidence decay/boost works\n- [ ] Graph stays under 2k tokens overhead\n\n---\n\n## Best Practices\n\n**Good queries**:\n- \"What do we know about auth?\" (specific concept)\n- \"Any pitfalls for testing?\" (scoped type)\n- \"Show everything related to TASK-29\" (node traversal)\n\n**Good memory capture**:\n- \"Remember: we use X for Y\" (clear pattern)\n- \"Remember this pitfall: X breaks Y\" (specific issue)\n- \"Remember we decided X because Y\" (rationale included)\n\n**Avoid**:\n- Overly broad queries (\"What do we know?\")\n- Storing code snippets in memories (use paths instead)\n- Capturing obvious knowledge (focus on project-specific insights)\n\n---\n\n**This skill transforms Navigator from stateless assistant to knowledge-aware team member**\n",
        "skills/nav-graph/templates/memory-template.md": "# {TYPE}: {TITLE}\n\n## Summary\n{SUMMARY}\n\n## Context\n{CONTEXT_WHEN_DISCOVERED}\n\n## Details\n{DETAILED_EXPLANATION}\n\n## Recommended Approach\n{WHAT_TO_DO_INSTEAD}\n\n## Related\n- {RELATED_TASKS}\n- {RELATED_SOPS}\n- {RELATED_FILES}\n\n---\n**Captured**: {DATE}\n**Confidence**: {CONFIDENCE}%\n**Concepts**: {CONCEPTS}\n",
        "skills/nav-init/SKILL.md": "---\nname: nav-init\ndescription: Initialize Navigator documentation structure in a project. Auto-invokes when user says \"Initialize Navigator\", \"Set up Navigator\", \"Create Navigator structure\", or \"Bootstrap Navigator\".\nallowed-tools: Write, Bash, Read, Glob\nversion: 1.0.0\ntriggers:\n  - \"initialize navigator\"\n  - \"init navigator\"\n  - \"set up navigator\"\n  - \"setup navigator\"\n  - \"create navigator structure\"\n  - \"bootstrap navigator\"\n  - \"start navigator project\"\n---\n\n# Navigator Initialization Skill\n\n## Purpose\n\nCreates the Navigator documentation structure (`.agent/`) in a new project, copies templates, and sets up initial configuration.\n\n## When This Skill Auto-Invokes\n\n- \"Initialize Navigator in this project\"\n- \"Set up Navigator documentation structure\"\n- \"Create .agent folder for Navigator\"\n- \"Bootstrap Navigator for my project\"\n\n## What This Skill Does\n\n1. **Checks if already initialized**: Prevents overwriting existing structure\n2. **Creates `.agent/` directory structure**:\n   ```\n   .agent/\n   â”œâ”€â”€ DEVELOPMENT-README.md\n   â”œâ”€â”€ .nav-config.json\n   â”œâ”€â”€ tasks/\n   â”œâ”€â”€ system/\n   â”œâ”€â”€ sops/\n   â”‚   â”œâ”€â”€ integrations/\n   â”‚   â”œâ”€â”€ debugging/\n   â”‚   â”œâ”€â”€ development/\n   â”‚   â””â”€â”€ deployment/\n   â””â”€â”€ grafana/\n       â”œâ”€â”€ docker-compose.yml\n       â”œâ”€â”€ prometheus.yml\n       â”œâ”€â”€ grafana-datasource.yml\n       â”œâ”€â”€ grafana-dashboards.yml\n       â”œâ”€â”€ navigator-dashboard.json\n       â””â”€â”€ README.md\n   ```\n3. **Creates `.claude/` directory with hooks**:\n   ```\n   .claude/\n   â””â”€â”€ settings.json    # Token monitoring hook configuration\n   ```\n4. **Copies templates**: DEVELOPMENT-README.md, config, Grafana setup\n5. **Auto-detects project info**: Name, tech stack (from package.json if available)\n6. **Updates CLAUDE.md**: Adds Navigator-specific instructions to project\n7. **Creates .gitignore entries**: Excludes temporary Navigator files\n\n## Execution Steps\n\n### 1. Check if Already Initialized\n\n```bash\nif [ -d \".agent\" ]; then\n    echo \"âœ… Navigator already initialized in this project\"\n    echo \"\"\n    echo \"To start a session: 'Start my Navigator session'\"\n    echo \"To view documentation: Read .agent/DEVELOPMENT-README.md\"\n    exit 0\nfi\n```\n\n### 2. Detect Project Information\n\nRead `package.json`, `pyproject.toml`, `go.mod`, `Cargo.toml`, or similar to extract:\n- Project name\n- Tech stack\n- Dependencies\n\n**Fallback**: Use current directory name if no config found.\n\n### 3. Create Directory Structure\n\nUse Write tool to create:\n```\n.agent/\n.agent/tasks/\n.agent/system/\n.agent/sops/integrations/\n.agent/sops/debugging/\n.agent/sops/development/\n.agent/sops/deployment/\n.agent/grafana/\n```\n\n### 4. Copy Templates\n\nCopy from plugin's `templates/` directory to `.agent/`:\n\n**DEVELOPMENT-README.md**:\n- Replace `${PROJECT_NAME}` with detected project name\n- Replace `${TECH_STACK}` with detected stack\n- Replace `${DATE}` with current date\n\n**`.nav-config.json`**:\n```json\n{\n  \"version\": \"5.5.0\",\n  \"project_name\": \"${PROJECT_NAME}\",\n  \"tech_stack\": \"${TECH_STACK}\",\n  \"project_management\": \"none\",\n  \"task_prefix\": \"TASK\",\n  \"team_chat\": \"none\",\n  \"auto_load_navigator\": true,\n  \"compact_strategy\": \"conservative\",\n  \"auto_update\": {\n    \"enabled\": true,\n    \"check_interval_hours\": 1\n  }\n}\n```\n\n**Grafana Setup**:\nCopy all Grafana dashboard files to enable metrics visualization:\n\n```bash\n# Find plugin installation directory\nPLUGIN_DIR=\"${HOME}/.claude/plugins/marketplaces/jitd-marketplace\"\n\n# Copy Grafana files if plugin has them\nif [ -d \"${PLUGIN_DIR}/.agent/grafana\" ]; then\n  cp -r \"${PLUGIN_DIR}/.agent/grafana/\"* .agent/grafana/\n  echo \"âœ“ Grafana dashboard installed\"\nelse\n  echo \"âš ï¸  Grafana files not found in plugin\"\nfi\n```\n\nFiles copied:\n- docker-compose.yml (Grafana + Prometheus stack)\n- prometheus.yml (scrape config for Claude Code metrics)\n- grafana-datasource.yml (Prometheus datasource config)\n- grafana-dashboards.yml (dashboard provider config)\n- navigator-dashboard.json (10-panel Navigator metrics dashboard)\n- README.md (setup instructions)\n\n### 5. Update Project CLAUDE.md\n\nIf `CLAUDE.md` exists:\n- Append Navigator-specific sections\n- Keep existing project customizations\n\nIf `CLAUDE.md` doesn't exist:\n- Copy `templates/CLAUDE.md` to project root\n- Customize with project info\n\n### 6. Setup Token Monitoring Hook\n\nCreate `.claude/settings.json` for token budget monitoring:\n\n```bash\nmkdir -p .claude\n\ncat > .claude/settings.json << 'EOF'\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit|Bash|Task\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 \\\"${CLAUDE_PLUGIN_DIR}/hooks/monitor-tokens.py\\\"\",\n            \"timeout\": 5\n          }\n        ]\n      }\n    ]\n  }\n}\nEOF\n\necho \"âœ“ Token monitoring hook configured\"\n```\n\n**What this does**:\n- Monitors context usage after each tool call\n- Warns at 70% usage, critical alert at 85%\n- Suggests `/nav:compact` when approaching limits\n\n### 7. Create .gitignore Entries\n\nAdd to `.gitignore` if not present:\n```\n# Navigator context markers\n.context-markers/\n\n# Navigator temporary files\n.agent/.nav-temp/\n```\n\n### 8. Success Message\n\n```\nâœ… Navigator Initialized Successfully!\n\nCreated structure:\n  ğŸ“ .agent/                    Navigator documentation\n  ğŸ“ .agent/tasks/              Implementation plans\n  ğŸ“ .agent/system/             Architecture docs\n  ğŸ“ .agent/sops/               Standard procedures\n  ğŸ“ .agent/grafana/            Metrics dashboard\n  ğŸ“„ .agent/.nav-config.json    Configuration\n  ğŸ“ .claude/                   Claude Code hooks\n  ğŸ“„ .claude/settings.json      Token monitoring config\n  ğŸ“„ CLAUDE.md                  Updated with Navigator workflow\n\nNext steps:\n  1. Start session: \"Start my Navigator session\"\n  2. Optional: Enable metrics - see .agent/sops/integrations/opentelemetry-setup.md\n  3. Optional: Launch Grafana - cd .agent/grafana && docker compose up -d\n\nToken monitoring is active - you'll be warned when approaching context limits.\n\nDocumentation: Read .agent/DEVELOPMENT-README.md\n```\n\n## Error Handling\n\n**If `.agent/` exists**:\n- Don't overwrite\n- Show message: \"Already initialized\"\n\n**If templates not found**:\n- Error: \"Navigator plugin templates missing. Reinstall plugin.\"\n\n**If no write permissions**:\n- Error: \"Cannot create .agent/ directory. Check permissions.\"\n\n## Predefined Functions\n\n### `project_detector.py`\n\n```python\ndef detect_project_info(cwd: str) -> dict:\n    \"\"\"\n    Detect project name and tech stack from config files.\n\n    Checks (in order):\n    1. package.json (Node.js)\n    2. pyproject.toml (Python)\n    3. go.mod (Go)\n    4. Cargo.toml (Rust)\n    5. composer.json (PHP)\n    6. Gemfile (Ruby)\n\n    Returns:\n        {\n            \"name\": \"project-name\",\n            \"tech_stack\": \"Next.js, TypeScript, Prisma\",\n            \"detected_from\": \"package.json\"\n        }\n    \"\"\"\n```\n\n### `template_customizer.py`\n\n```python\ndef customize_template(template_content: str, project_info: dict) -> str:\n    \"\"\"\n    Replace placeholders in template with project-specific values.\n\n    Placeholders:\n    - ${PROJECT_NAME}\n    - ${TECH_STACK}\n    - ${DATE}\n    - ${YEAR}\n\n    Returns customized template content.\n    \"\"\"\n```\n\n## Examples\n\n### Example 1: New Next.js Project\n\n**User says**: \"Initialize Navigator in this project\"\n\n**Skill detects**:\n- `package.json` exists\n- Name: \"my-saas-app\"\n- Dependencies: next, typescript, prisma\n\n**Result**:\n- `.agent/` created\n- DEVELOPMENT-README.md shows: \"Project: My SaaS App\"\n- DEVELOPMENT-README.md shows: \"Tech Stack: Next.js, TypeScript, Prisma\"\n- .nav-config.json has project_name: \"my-saas-app\"\n\n### Example 2: Python Project\n\n**User says**: \"Set up Navigator\"\n\n**Skill detects**:\n- `pyproject.toml` exists\n- Name: \"ml-pipeline\"\n- Dependencies: fastapi, pydantic, sqlalchemy\n\n**Result**:\n- `.agent/` created\n- Tech stack: \"FastAPI, Pydantic, SQLAlchemy\"\n\n### Example 3: Already Initialized\n\n**User says**: \"Initialize Navigator\"\n\n**Skill checks**:\n- `.agent/` directory exists\n\n**Result**:\n```\nâœ… Navigator already initialized in this project\n\nTo start a session: 'Start my Navigator session'\n```\n\n## Integration with Other Skills\n\n**nav-start skill**:\n- Checks for `.agent/DEVELOPMENT-README.md`\n- If missing, suggests: \"Initialize Navigator first\"\n\n**nav-task skill**:\n- Creates tasks in `.agent/tasks/`\n- Requires initialization\n\n**nav-sop skill**:\n- Creates SOPs in `.agent/sops/`\n- Requires initialization\n\n## Version History\n\n- **1.0.0** (2025-01-20): Initial implementation\n  - Auto-detection of project info\n  - Template customization\n  - Grafana setup included\n  - Error handling for existing installations\n\n## Notes\n\n- This skill replaces the deleted `/nav:init` command from v2.x\n- Templates are copied from plugin installation directory\n- Project info detection is best-effort (falls back to directory name)\n- Safe to run multiple times (won't overwrite existing structure)\n",
        "skills/nav-install-multi-claude/SKILL.md": "---\nname: nav-install-multi-claude\ndescription: Install Navigator multi-Claude workflow orchestration scripts. Auto-invokes when user says \"install multi-Claude workflows\", \"set up multi-Claude\", or \"enable parallel execution\".\nallowed-tools: Bash, Read, Write\nversion: 1.0.0\n---\n\n# Navigator Multi-Claude Workflow Installer\n\nInstall multi-Claude orchestration scripts for parallel AI execution.\n\n## When to Invoke\n\nAuto-invoke when user says:\n- \"Install multi-Claude workflows\"\n- \"Set up multi-Claude orchestration\"\n- \"Enable parallel execution\"\n- \"Complete Navigator 4.3.0 installation\"\n- \"Install Navigator workflows\"\n\n**DO NOT invoke** if:\n- Scripts already installed (check with `which navigator-multi-claude.sh`)\n- User is just asking about multi-Claude (informational)\n- Navigator plugin not installed\n\n## What This Installs\n\n**Scripts installed to `$HOME/bin/`**:\n- `navigator-multi-claude.sh` - Full 6-phase workflow orchestration\n- `navigator-multi-claude-poc.sh` - Simple 3-phase POC\n- `install-multi-claude.sh` - This installer (for future updates)\n\n**Why needed**: Plugin installation only copies skills/templates. Multi-Claude scripts live outside plugin structure and require separate installation.\n\n## Execution Steps\n\n### Step 1: Check if Already Installed\n\n```bash\nif command -v navigator-multi-claude.sh &> /dev/null; then\n  INSTALLED_PATH=$(which navigator-multi-claude.sh)\n  INSTALLED_VERSION=$(grep -o 'VERSION=.*' \"$INSTALLED_PATH\" | head -1 | cut -d'=' -f2 | tr -d '\"' || echo \"unknown\")\n\n  echo \"âœ… Multi-Claude workflows already installed\"\n  echo \"\"\n  echo \"Location: $INSTALLED_PATH\"\n  echo \"Version: $INSTALLED_VERSION\"\n  echo \"\"\n  echo \"To reinstall/update:\"\n  echo \"  rm $INSTALLED_PATH\"\n  echo \"  'Install multi-Claude workflows'\"\n\n  exit 0\nfi\n```\n\n### Step 2: Verify Prerequisites\n\n```bash\n# Check Claude CLI\nif ! command -v claude &> /dev/null; then\n  echo \"âŒ Claude Code CLI not found in PATH\"\n  echo \"\"\n  echo \"Multi-Claude workflows require Claude Code CLI to spawn sub-Claude instances.\"\n  echo \"\"\n  echo \"Install Claude Code first, then retry:\"\n  echo \"  https://docs.claude.com/claude-code/installation\"\n  exit 1\nfi\n\n# Check Navigator plugin installed\nPLUGIN_PATHS=(\n  \"$HOME/.claude/plugins/marketplaces/navigator-marketplace\"\n  \"$HOME/.config/claude/plugins/navigator\"\n  \"$HOME/.claude/plugins/navigator\"\n)\n\nPLUGIN_FOUND=false\nfor path in \"${PLUGIN_PATHS[@]}\"; do\n  if [ -d \"$path\" ]; then\n    PLUGIN_FOUND=true\n    PLUGIN_PATH=\"$path\"\n    break\n  fi\ndone\n\nif [ \"$PLUGIN_FOUND\" = false ]; then\n  echo \"âŒ Navigator plugin not found\"\n  echo \"\"\n  echo \"Install Navigator plugin first:\"\n  echo \"  /plugin marketplace add alekspetrov/navigator\"\n  echo \"  /plugin install navigator\"\n  exit 1\nfi\n\necho \"âœ… Prerequisites verified\"\necho \"   - Claude CLI: $(which claude)\"\necho \"   - Navigator plugin: $PLUGIN_PATH\"\necho \"\"\n```\n\n### Step 3: Download Latest Scripts from GitHub\n\n```bash\necho \"ğŸ“¥ Downloading multi-Claude scripts from GitHub...\"\necho \"\"\n\n# Detect installed plugin version\nif [ -f \"$PLUGIN_PATH/.claude-plugin/plugin.json\" ]; then\n  PLUGIN_VERSION=$(grep -o '\"version\": \"[^\"]*\"' \"$PLUGIN_PATH/.claude-plugin/plugin.json\" | head -1 | cut -d'\"' -f4)\n  VERSION_TAG=\"v$PLUGIN_VERSION\"\n  echo \"   Plugin version: $PLUGIN_VERSION\"\n  echo \"   Fetching matching scripts: $VERSION_TAG\"\nelse\n  # Fallback to latest stable if version detection fails\n  VERSION_TAG=\"main\"\n  echo \"   âš ï¸  Could not detect plugin version\"\n  echo \"   Fetching from: main branch (latest stable)\"\nfi\n\necho \"\"\n\n# Clone repository to temp location\nTEMP_DIR=\"/tmp/navigator-install-$$\"\nif git clone --depth 1 --branch \"$VERSION_TAG\" https://github.com/alekspetrov/navigator.git \"$TEMP_DIR\" 2>&1; then\n  echo \"âœ… Downloaded Navigator repository\"\nelse\n  echo \"âŒ Failed to download from GitHub\"\n  echo \"\"\n  echo \"Possible causes:\"\n  echo \"  - No internet connection\"\n  echo \"  - Version tag $VERSION_TAG doesn't exist\"\n  echo \"  - GitHub rate limit exceeded\"\n  echo \"\"\n  echo \"Retry with main branch? [y/N]\"\n  exit 1\nfi\n\necho \"\"\n```\n\n### Step 4: Run Installation Script\n\n```bash\necho \"ğŸ“¦ Installing multi-Claude scripts...\"\necho \"\"\n\ncd \"$TEMP_DIR\"\n\nif [ -f \"scripts/install-multi-claude.sh\" ]; then\n  # Run the installer\n  chmod +x scripts/install-multi-claude.sh\n  ./scripts/install-multi-claude.sh\n\n  INSTALL_EXIT=$?\n\n  if [ $INSTALL_EXIT -eq 0 ]; then\n    echo \"\"\n    echo \"âœ… Multi-Claude workflows installed successfully\"\n  else\n    echo \"\"\n    echo \"âŒ Installation failed with exit code $INSTALL_EXIT\"\n    echo \"\"\n    echo \"Check the output above for errors.\"\n    exit 1\n  fi\nelse\n  echo \"âŒ install-multi-claude.sh not found in repository\"\n  echo \"\"\n  echo \"This version may not support multi-Claude workflows.\"\n  echo \"Upgrade to Navigator v4.3.0+ for multi-Claude features.\"\n  exit 1\nfi\n\necho \"\"\n```\n\n### Step 5: Verify Installation\n\n```bash\necho \"ğŸ” Verifying installation...\"\necho \"\"\n\n# Check if scripts are in PATH\nif command -v navigator-multi-claude.sh &> /dev/null; then\n  INSTALLED_PATH=$(which navigator-multi-claude.sh)\n  echo \"âœ… navigator-multi-claude.sh: $INSTALLED_PATH\"\nelse\n  echo \"âš ï¸  navigator-multi-claude.sh not in PATH\"\n  echo \"   May need to restart terminal or run:\"\n  echo \"   export PATH=\\\"\\$HOME/bin:\\$PATH\\\"\"\nfi\n\nif command -v navigator-multi-claude-poc.sh &> /dev/null; then\n  INSTALLED_PATH=$(which navigator-multi-claude-poc.sh)\n  echo \"âœ… navigator-multi-claude-poc.sh: $INSTALLED_PATH\"\nelse\n  echo \"âš ï¸  navigator-multi-claude-poc.sh not in PATH\"\nfi\n\necho \"\"\n```\n\n### Step 6: Cleanup and Next Steps\n\n```bash\n# Cleanup temp directory\nrm -rf \"$TEMP_DIR\"\necho \"ğŸ§¹ Cleaned up temporary files\"\necho \"\"\n\necho \"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\"\necho \"âœ… Multi-Claude Workflows Ready\"\necho \"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\"\necho \"\"\necho \"Test with simple task:\"\necho \"  navigator-multi-claude-poc.sh \\\"Add hello world function\\\"\"\necho \"\"\necho \"Full 6-phase workflow:\"\necho \"  navigator-multi-claude.sh \\\"Implement user authentication\\\"\"\necho \"\"\necho \"Documentation:\"\necho \"  - Release notes: RELEASE-NOTES-v4.3.0.md\"\necho \"  - POC learnings: scripts/POC-LEARNINGS.md\"\necho \"\"\necho \"Status: Experimental (30% success rate)\"\necho \"Recommendation: Use for simple features, monitor output closely\"\necho \"\"\n```\n\n## Error Handling\n\n### Git Clone Fails\n\n```\nâŒ Failed to download from GitHub\n\nPossible causes:\n  - No internet connection\n  - Version tag v4.3.1 doesn't exist\n  - GitHub rate limit exceeded\n\nManual installation:\n  1. Download: https://github.com/alekspetrov/navigator/archive/refs/heads/main.zip\n  2. Extract and cd to directory\n  3. Run: ./scripts/install-multi-claude.sh\n```\n\n### Version Mismatch\n\n```\nâš ï¸  Plugin version: 4.3.1\n    Latest release: 4.3.0\n    Installing from: main branch\n\nThis may include unreleased changes.\nContinue? [y/N]\n```\n\n### Already Installed\n\n```\nâœ… Multi-Claude workflows already installed\n\nLocation: /Users/username/bin/navigator-multi-claude.sh\nVersion: 4.3.0\n\nTo reinstall/update:\n  rm /Users/username/bin/navigator-multi-claude.sh\n  'Install multi-Claude workflows'\n```\n\n### Permission Denied\n\n```\nâŒ Permission denied: /usr/local/bin/\n\nInstallation requires write access to:\n  - $HOME/bin/ (recommended)\n  - /usr/local/bin/ (requires sudo)\n\nFix:\n  mkdir -p $HOME/bin\n  export PATH=\"$HOME/bin:$PATH\"\n\nThen retry: 'Install multi-Claude workflows'\n```\n\n## Success Criteria\n\nInstallation successful when:\n- [ ] Scripts downloaded from GitHub\n- [ ] install-multi-claude.sh executed without errors\n- [ ] Scripts added to PATH (verified with `which`)\n- [ ] Version matches plugin version (or explicit override)\n- [ ] User can invoke `navigator-multi-claude-poc.sh --help`\n\n## Rollback Procedure\n\nIf installation fails or causes issues:\n\n```bash\n# Remove installed scripts\nrm -f $HOME/bin/navigator-multi-claude.sh\nrm -f $HOME/bin/navigator-multi-claude-poc.sh\nrm -f $HOME/bin/install-multi-claude.sh\n\n# Verify removal\nwhich navigator-multi-claude.sh\n# Should output: navigator-multi-claude.sh not found\n```\n\n## Notes\n\n**Why separate installation**:\n- Plugin system only copies skills/templates from `.claude-plugin/`\n- Multi-Claude scripts are executable Bash files that need to be in PATH\n- Installation location varies by system ($HOME/bin vs /usr/local/bin)\n- Scripts need `chmod +x` for execution\n\n**Version matching**:\n- Always fetches scripts matching installed plugin version\n- Prevents version drift (v4.3.1 plugin with v4.3.0 scripts)\n- Falls back to main branch if version tag doesn't exist\n\n**What gets installed**:\n```\n$HOME/bin/\nâ”œâ”€â”€ navigator-multi-claude.sh         # Full 6-phase workflow\nâ”œâ”€â”€ navigator-multi-claude-poc.sh     # 3-phase POC\nâ””â”€â”€ install-multi-claude.sh           # Reinstaller\n```\n\n## Related Skills\n\n- **nav-start**: Detects missing workflows and prompts installation\n- **nav-upgrade**: Updates plugin (workflows need separate reinstall)\n- **nav-stats**: Shows multi-Claude workflow efficiency metrics\n\n## Examples\n\n### Example 1: Fresh Installation\n\nUser: \"Install multi-Claude workflows\"\n\nAssistant executes:\n1. Checks prerequisites (Claude CLI, Navigator plugin)\n2. Downloads from GitHub (v4.3.1 tag)\n3. Runs install-multi-claude.sh\n4. Verifies installation\n5. Shows test commands\n\nOutput:\n```\nâœ… Multi-Claude Workflows Ready\n\nTest with simple task:\n  navigator-multi-claude-poc.sh \"Add hello world function\"\n```\n\n### Example 2: Already Installed\n\nUser: \"Set up multi-Claude\"\n\nAssistant checks:\n```bash\nwhich navigator-multi-claude.sh\n# Found at: /Users/alex/bin/navigator-multi-claude.sh\n```\n\nOutput:\n```\nâœ… Multi-Claude workflows already installed\n\nLocation: /Users/alex/bin/navigator-multi-claude.sh\nVersion: 4.3.0\n\nAlready ready to use!\n```\n\n### Example 3: After Plugin Update\n\nUser updates plugin 4.3.0 â†’ 4.3.1, then:\n\"Install multi-Claude workflows\"",
        "skills/nav-loop/SKILL.md": "---\nname: nav-loop\ndescription: Run tasks until complete with structured completion signals. Auto-invoke when user says \"run until done\", \"keep going until complete\", \"iterate until finished\", \"loop mode\", \"autonomous mode\".\nallowed-tools: Read, Write, Edit, Bash, Grep, Glob, AskUserQuestion\nversion: 1.0.0\n---\n\n# Navigator Loop Skill\n\nExecute tasks iteratively until completion with structured signals, stagnation detection, and dual-condition exit gates.\n\n## Why This Exists\n\nTraditional AI coding requires manual \"keep going\" prompts. Navigator Loop provides:\n- **Structured completion signals** (NAVIGATOR_STATUS block)\n- **Dual-condition exit gate** (heuristics + explicit signal)\n- **Stagnation detection** (circuit breaker for stuck loops)\n- **Progress visibility** (phases: INIT â†’ RESEARCH â†’ IMPL â†’ VERIFY â†’ COMPLETE)\n\nBased on Ralph's autonomous loop innovations, adapted for Navigator's context-efficient architecture.\n\n## When to Invoke\n\n**Auto-invoke when**:\n- User says \"run until done\", \"keep going until complete\"\n- User says \"iterate until finished\", \"autonomous mode\"\n- User says \"loop mode\", \"don't stop until done\"\n- Task document has `loop_mode: true`\n\n**DO NOT invoke if**:\n- Single-step task (no iteration needed)\n- User says \"just do this once\"\n- Already in loop mode (prevent nested loops)\n- User explicitly disabled loop mode\n\n## Configuration\n\nLoop mode settings in `.agent/.nav-config.json`:\n\n```json\n{\n  \"loop_mode\": {\n    \"enabled\": false,\n    \"max_iterations\": 5,\n    \"stagnation_threshold\": 3,\n    \"exit_requires_explicit_signal\": true,\n    \"show_status_block\": true\n  }\n}\n```\n\n**Options**:\n- `enabled`: Default state for new tasks\n- `max_iterations`: Hard cap to prevent infinite loops (1-20)\n- `stagnation_threshold`: Same-state count before pause (2-5)\n- `exit_requires_explicit_signal`: Require EXIT_SIGNAL alongside heuristics\n\n## Execution Steps\n\n### Step 1: Initialize Loop State\n\n**Load configuration**:\n```bash\npython3 functions/phase_detector.py --init\n```\n\n**Initialize tracking variables**:\n```\niteration = 1\nmax_iterations = config.loop_mode.max_iterations or 5\nstagnation_threshold = config.loop_mode.stagnation_threshold or 3\nhash_history = []\nphase = \"INIT\"\n```\n\n**Display loop start**:\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nLOOP MODE ACTIVATED\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTask: {TASK_DESCRIPTION}\nMax iterations: {max_iterations}\nStagnation threshold: {stagnation_threshold}\n\nStarting iteration 1...\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n### Step 2: Execute Iteration\n\n**Perform task work** based on current phase:\n\n| Phase | Actions |\n|-------|---------|\n| INIT | Load context, understand requirements |\n| RESEARCH | Explore codebase, find patterns |\n| IMPL | Write code, make changes |\n| VERIFY | Run tests, validate functionality, **simplify code** |\n| COMPLETE | All indicators met, ready to exit |\n\n**Track changes during iteration**:\n- Files read (for RESEARCH detection)\n- Files changed (for IMPL detection)\n- Tests run (for VERIFY detection)\n- Commits made (for completion indicator)\n\n### Step 3: Generate Status Block\n\n**After each iteration**, generate NAVIGATOR_STATUS:\n\n```bash\npython3 functions/status_generator.py \\\n  --phase \"{phase}\" \\\n  --iteration \"{iteration}\" \\\n  --max-iterations \"{max_iterations}\" \\\n  --indicators \"{indicators_json}\" \\\n  --state-hash \"{current_hash}\" \\\n  --prev-hash \"{previous_hash}\" \\\n  --stagnation-count \"{stagnation_count}\"\n```\n\n**Display status block**:\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nNAVIGATOR_STATUS\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nPhase: {PHASE}\nIteration: {N}/{MAX}\nProgress: {PERCENT}%\n\nCompletion Indicators:\n  [{x or space}] Code changes committed\n  [{x or space}] Tests passing\n  [{x or space}] Code simplified\n  [{x or space}] Documentation updated\n  [{x or space}] Ticket closed\n  [{x or space}] Marker created\n\nExit Conditions:\n  Heuristics: {MET}/{TOTAL} (need 2+)\n  EXIT_SIGNAL: {true/false}\n\nState Hash: {HASH}\nPrevious Hash: {PREV_HASH}\nStagnation: {COUNT}/{THRESHOLD}\n\nNext Action: {NEXT_ACTION}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n### Step 4: Check Stagnation\n\n**Calculate state hash**:\n```bash\npython3 functions/stagnation_detector.py \\\n  --phase \"{phase}\" \\\n  --indicators \"{indicators_json}\" \\\n  --files-changed \"{files_json}\" \\\n  --history \"{hash_history_json}\"\n```\n\n**If stagnation detected** (same hash for N iterations):\n\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nSTAGNATION DETECTED\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nSame state detected for {N} consecutive iterations.\n\nCurrent State:\n  Phase: {PHASE}\n  Indicators: {MET}/{TOTAL}\n  Last Action: {LAST_ACTION}\n\nPossible causes:\n1. Blocked by external dependency\n2. Unclear requirements\n3. Test failures preventing progress\n4. Missing context or permissions\n\nOptions:\n1. [Continue] - Try one more iteration\n2. [Clarify] - Explain what's blocking\n3. [Abort] - End loop, manual intervention\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n**Use AskUserQuestion** for choice:\n- Continue: Reset stagnation counter, continue loop\n- Clarify: User explains blocker, incorporate and continue\n- Abort: Exit loop with partial completion marker\n\n### Step 5: Check Exit Conditions\n\n**Evaluate dual-condition gate**:\n```bash\npython3 functions/exit_gate.py \\\n  --indicators \"{indicators_json}\" \\\n  --exit-signal \"{exit_signal}\" \\\n  --require-explicit \"{config.exit_requires_explicit_signal}\"\n```\n\n**Exit conditions**:\n1. **Heuristics**: At least 2 completion indicators met\n2. **EXIT_SIGNAL**: Explicit signal that task is complete\n\n**Completion indicators** (mapped from autonomous protocol):\n- `code_committed`: Changes committed to git\n- `tests_passing`: Test suite passes (exit code 0)\n- `code_simplified`: Code simplified for clarity (v5.4.0+)\n- `docs_updated`: Documentation files changed\n- `ticket_closed`: PM tool ticket marked done\n- `marker_created`: Completion marker exists\n\n**Exit decision logic**:\n```\nIF heuristics >= 2 AND exit_signal == true:\n  â†’ EXIT: Task complete\nELIF heuristics >= 2 AND exit_signal == false:\n  â†’ CONTINUE: Awaiting explicit completion signal\nELIF exit_signal == true AND heuristics < 2:\n  â†’ BLOCKED: Cannot exit with insufficient indicators\nELSE:\n  â†’ CONTINUE: More work needed\n```\n\n### Step 6: Handle Max Iterations\n\n**If iteration >= max_iterations**:\n\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nMAX ITERATIONS REACHED\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nCompleted {MAX} iterations without full completion.\n\nCurrent State:\n  Phase: {PHASE}\n  Indicators: {MET}/{TOTAL}\n  EXIT_SIGNAL: {true/false}\n\nProgress made:\n- {PROGRESS_ITEM_1}\n- {PROGRESS_ITEM_2}\n\nOptions:\n1. [Extend] - Add 3 more iterations\n2. [Complete] - Accept current state as done\n3. [Abort] - Exit without completion\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n### Step 7: Complete Loop\n\n**When exit conditions met**, display completion:\n\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nLOOP COMPLETE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTask: {TASK_DESCRIPTION}\nIterations: {FINAL_COUNT}/{MAX}\nFinal Phase: COMPLETE\n\nCompletion Indicators:\n  [x] Code changes committed\n  [x] Tests passing\n  [x] Code simplified\n  [x] Documentation updated\n  [ ] Ticket closed (skipped - no PM tool)\n  [x] Marker created\n\nExit Conditions:\n  Heuristics: 4/5 (passed)\n  EXIT_SIGNAL: true (passed)\n\nSummary:\n- {KEY_CHANGE_1}\n- {KEY_CHANGE_2}\n- {KEY_CHANGE_3}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n**Execute autonomous completion protocol**:\n1. Commit changes (if not already)\n2. Archive task documentation\n3. Close ticket (if PM configured)\n4. Create completion marker (with loop state)\n5. Suggest compact\n\n---\n\n## Setting EXIT_SIGNAL\n\nThe EXIT_SIGNAL is set **explicitly by Claude** when:\n- All primary task requirements are met\n- Code is functional and tested\n- No obvious remaining work\n\n**How to signal completion**:\n```\nI've completed the implementation. All requirements met.\n\nEXIT_SIGNAL: true\n```\n\nThis explicit declaration prevents premature exits when heuristics are met but work remains.\n\n---\n\n## Phase Detection\n\nPhases auto-detected based on context:\n\n```python\ndef detect_phase(context):\n    # COMPLETE: Exit conditions met\n    if indicators_met >= 4 and exit_signal:\n        return \"COMPLETE\"\n\n    # VERIFY: Tests running or recently run\n    if context.tests_running or context.test_exit_code is not None:\n        return \"VERIFY\"\n\n    # IMPL: Files being modified\n    if context.files_changed:\n        return \"IMPL\"\n\n    # RESEARCH: Reading files, searching\n    if context.files_read and not context.files_changed:\n        return \"RESEARCH\"\n\n    # INIT: Default starting state\n    return \"INIT\"\n```\n\n---\n\n## Integration with Navigator\n\n### With Autonomous Completion\nLoop mode enhances (not replaces) the autonomous protocol:\n- Completion indicators map to autonomous steps\n- EXIT_SIGNAL triggers autonomous completion\n- Marker includes loop state for restoration\n\n### With nav-simplify (v5.4.0+)\nSimplification runs during VERIFY phase:\n- After tests pass, before committing\n- Configurable via `simplification.enabled` in .nav-config.json\n- Adds `code_simplified` completion indicator\n- Skip if no code changes (docs-only tasks)\n\n### With nav-diagnose\nStagnation triggers nav-diagnose quality check:\n- 3 same-state loops = potential quality issue\n- nav-diagnose helps identify root cause\n- Re-anchoring can resolve stuck loops\n\n### With nav-marker\nMarkers capture loop state:\n- Current iteration and max\n- Phase at time of marker\n- State hash for continuity\n- Completion indicators status\n\n### With ToM Features\nLoop mode respects ToM configuration:\n- Verification checkpoints still apply in VERIFY phase\n- Profile preferences affect communication style\n- Belief anchors can help clarify stuck states\n\n---\n\n## Predefined Functions\n\n### functions/status_generator.py\nGenerates formatted NAVIGATOR_STATUS block.\n\n### functions/exit_gate.py\nEvaluates dual-condition exit (heuristics + explicit signal).\n\n### functions/stagnation_detector.py\nCalculates state hash and detects consecutive same-states.\n\n### functions/phase_detector.py\nAuto-detects current task phase from context.\n\n---\n\n## Error Handling\n\n**Config not found**:\n```\nLoop mode config not found in .nav-config.json.\nUsing defaults: max_iterations=5, stagnation_threshold=3\n```\n\n**Function execution fails**:\n- Fall back to manual evaluation\n- Log error but don't interrupt loop\n- Continue with best-effort phase detection\n\n**User aborts mid-loop**:\n- Create partial completion marker\n- Document progress made\n- List remaining work\n\n---\n\n## Success Criteria\n\nLoop mode succeeds when:\n- [ ] Task completes within max_iterations\n- [ ] No stagnation pauses (or resolved quickly)\n- [ ] EXIT_SIGNAL + heuristics both satisfied\n- [ ] Completion marker includes loop state\n- [ ] User sees clear progress each iteration\n\n---\n\n## Examples\n\n### Example 1: Simple Feature\n```\nUser: \"Run until done: add isPrime function with tests\"\n\nIteration 1 (INIT â†’ RESEARCH):\n  - Read existing math utils\n  - Found test patterns\n\nIteration 2 (IMPL):\n  - Created isPrime function\n  - Created test file\n\nIteration 3 (VERIFY):\n  - Ran tests: PASS\n  - Committed changes\n  EXIT_SIGNAL: true\n\nâ†’ Loop complete in 3 iterations\n```\n\n### Example 2: Stagnation Recovery\n```\nUser: \"Run until done: fix authentication bug\"\n\nIteration 1-3 (IMPL):\n  - Same changes attempted\n  - Tests still failing\n  - State hash unchanged\n\nâ†’ STAGNATION DETECTED\n\nUser: \"The test needs a mock for the auth service\"\n\nIteration 4 (IMPL):\n  - Added mock\n  - Tests pass\n  EXIT_SIGNAL: true\n\nâ†’ Loop complete in 4 iterations\n```\n\n---\n\n## Limitations\n\n**Cannot handle**:\n- External blockers (waiting for API, permissions)\n- Subjective completion criteria (\"make it look nice\")\n- Tasks requiring human judgment mid-loop\n\n**Should not use for**:\n- Quick fixes (single iteration sufficient)\n- Exploratory work (no clear completion state)\n- Tasks with security implications (need human review)\n\n---\n\n**This skill provides Ralph-style \"run until done\" capability while maintaining Navigator's context efficiency and ToM integration.**\n",
        "skills/nav-marker/SKILL.md": "---\nname: nav-marker\ndescription: Create context save points to preserve conversation state before breaks, risky changes, or compaction. Use when user says \"save my progress\", \"create checkpoint\", \"mark this point\", or before clearing context.\nallowed-tools: Read, Write, Bash\nversion: 1.0.0\n---\n\n# Navigator Marker Skill\n\nCreate context markers - save points that preserve conversation state so you can resume work later without re-explaining everything.\n\n## When to Invoke\n\nInvoke this skill when the user:\n- Says \"save my progress\", \"create checkpoint\", \"mark this\"\n- Says \"before I take a break\", \"save before lunch\"\n- Mentions \"risky refactor ahead\", \"experiment with new approach\"\n- Says \"end of day\", \"stopping for today\"\n- Before compacting context\n\n**DO NOT invoke** if:\n- User is asking about existing markers (use listing, not creation)\n- Context is fresh (< 5 messages exchanged)\n\n## Execution Steps\n\n### Step 1: Check Navigator Structure\n\nVerify `.agent/.context-markers/` directory exists:\n\n```bash\nmkdir -p .agent/.context-markers\n```\n\n### Step 2: Determine Marker Name\n\n**If user provided name**:\n- Use their name (sanitize: lowercase, hyphens for spaces)\n- Example: \"Before Big Refactor\" â†’ \"before-big-refactor\"\n\n**If no name provided**:\n- Auto-generate with timestamp: `marker-{YYYY-MM-DD}-{HHmm}`\n- Example: `marker-2025-10-16-1430`\n\n**Ask user for optional note**:\n```\nCreating marker: [name]\n\nAdd a note? (optional - helps remember context later)\nExample: \"OAuth working, need to add tests\"\n\nNote:\n```\n\n### Step 3: Generate Marker Content [EXECUTE]\n\n**IMPORTANT**: You MUST actively capture ToM sections (User Intent, Corrections, Belief State).\n\nCreate marker document with this structure:\n\n```markdown\n# Context Marker: [name]\n\n**Created**: [YYYY-MM-DD HH:MM]\n**Note**: [user's note or \"No note provided\"]\n\n---\n\n## Conversation Summary\n\n[Summarize last 10-15 messages:\n- What user was working on\n- Key decisions made\n- Problems solved\n- Current progress state\n]\n\n## Documentation Loaded\n\n[List docs that were Read during session:\n- Navigator: âœ… .agent/DEVELOPMENT-README.md\n- Task: TASK-XX-feature.md\n- System: project-architecture.md\n- SOPs: [if any]\n]\n\n## Files Modified\n\n[List files with Write/Edit calls:\n- src/auth/login.ts (implemented OAuth)\n- src/routes/auth.ts (added endpoints)\n- tests/auth.test.ts (created tests)\n]\n\n## Current Focus\n\n[What user is working on right now:\n- Feature: Authentication with OAuth\n- Phase: Integration complete, testing pending\n- Blockers: [if any]\n]\n\n## Technical Decisions\n\n[Key architectural choices:\n- Using passport.js over next-auth (better control)\n- JWT tokens in httpOnly cookies (XSS protection)\n- Redis for session storage (scalability)\n]\n\n## Next Steps\n\n[What to do after restore:\n1. Finish writing tests for OAuth flow\n2. Add error handling for failed logins\n3. Document setup in README\n]\n\n## User Intent & Goals (ToM) [CAPTURE ACTIVELY]\n\n[Theory of Mind section - captures user's mental state for better restoration]\n\n**âš ï¸ CRITICAL: Analyze conversation to extract these - do not leave empty!**\n\n**Primary goal this session**:\n[What the user was ultimately trying to accomplish - not just the surface task]\n- Review conversation for \"I want to...\", \"The goal is...\", \"We need to...\"\n- Infer from task context if not explicitly stated\n\n**Stated preferences**:\n[Any preferences expressed during session:\n- Communication style (concise/detailed)\n- Code patterns preferred\n- Confirmation behavior wanted\n]\n- Look for \"I prefer...\", \"Don't do...\", \"Always use...\"\n\n**Corrections made**:\n[Important corrections that should persist:\n- \"Should be /users not /user (plural convention)\"\n- \"Prefer functional components over class\"\n- \"Always use TypeScript strict mode\"\n]\n- Look for \"No, I meant...\", \"Actually...\", \"Not X, use Y\"\n- These MUST be captured to avoid repeating mistakes\n\n## Belief State [CAPTURE ACTIVELY]\n\n[Captures mutual understanding state for accurate restoration]\n\n**âš ï¸ CRITICAL: Infer from conversation - do not leave empty!**\n\n**What user knows**:\n[User's demonstrated knowledge level:\n- Familiar with Express, new to Passport\n- Knows about JWT, unfamiliar with refresh tokens\n- Senior developer, skip basics\n]\n\n**Assumptions I made**:\n[Key assumptions during session:\n- Using Redis for sessions (confirmed by user)\n- Auth endpoints follow /api/auth/* pattern\n- Testing with Jest + React Testing Library\n]\n\n**Uncertainty areas**:\n[Questions that weren't fully resolved:\n- Not sure if user wants social logins beyond Google\n- Rate limiting requirements unclear\n- Error message format preferences unknown\n]\n\n## Loop State (if in loop mode)\n\n[Capture loop mode state for resumption - skip if not in loop mode]\n\n**Iteration**: [N]/[MAX] (e.g., 3/5)\n**Phase**: [INIT|RESEARCH|IMPL|VERIFY|COMPLETE]\n**State Hash**: [6-char hash for continuity]\n**Completion Indicators**:\n- [ ] Code committed\n- [ ] Tests passing\n- [ ] Documentation updated\n- [ ] Ticket closed\n- [ ] Marker created\n\n**EXIT_SIGNAL**: [true/false]\n**Stagnation Count**: [N]/[THRESHOLD]\n\n## Knowledge Graph State (v6.0.0+)\n\n[Capture graph state for restoration - skip if no knowledge graph]\n\n**Check if graph exists**:\n```bash\nif [ -f \".agent/knowledge/graph.json\" ]; then\n  python3 skills/nav-graph/functions/graph_manager.py --action stats --graph-path .agent/knowledge/graph.json\nfi\n```\n\n**Memories surfaced this session**:\n[List memories that were queried or created:\n- mem-001: \"Auth changes break session tests\" (surfaced)\n- mem-002: \"Use plural REST endpoints\" (created from correction)\n]\n\n**Concepts active**:\n[Concepts relevant to current work:\n- authentication\n- testing\n- api\n]\n\n**Graph queries made**:\n[Knowledge graph queries from this session:\n- \"What do we know about auth?\" â†’ 3 tasks, 1 memory\n]\n\nThis allows restoration to re-surface relevant memories when resuming.\n\n## Restore Instructions\n\nTo restore this marker:\n\\```bash\nRead .agent/.context-markers/[filename]\n\\```\n\nOr use: `/nav:markers` and select this marker\n```\n\n### Step 4: Save Marker File\n\nWrite marker to file:\n\n```\nWrite(\n  file_path: \".agent/.context-markers/[timestamp]_[name].md\",\n  content: [generated marker content]\n)\n```\n\nFilename format: `{YYYY-MM-DD-HHmm}_{name}.md`\nExample: `2025-10-16-1430_before-big-refactor.md`\n\n### Step 4.5: Verify Marker Creation\n\nAfter creating marker, verify it was written successfully:\n\n```bash\n# Verify file exists and is non-empty\nif [ -f \".agent/.context-markers/[filename]\" ] && [ -s \".agent/.context-markers/[filename]\" ]; then\n  # Calculate checksum for verification\n  checksum=$(md5 -q \".agent/.context-markers/[filename]\" 2>/dev/null || md5sum \".agent/.context-markers/[filename]\" | cut -d' ' -f1)\n\n  # Log to central marker log\n  echo \"[$(date -u +\"%Y-%m-%dT%H:%M:%SZ\")] âœ… Marker created: [filename] (checksum: $checksum)\" >> .agent/.marker-log\n\n  echo \"âœ… Marker verified successfully\"\nelse\n  echo \"âŒ Marker creation failed - file missing or empty\"\n  exit 1\nfi\n```\n\nMarker verification ensures:\n- File exists on disk\n- File has content (non-empty)\n- Checksum logged for integrity verification\n- Creation event logged to central log\n\n### Step 5: Confirm Creation\n\nShow success message with verification details:\n\n```\nâœ… Context marker created!\n\nMarker: [name]\nFile: .agent/.context-markers/[filename]\nSize: [X] KB (~[Y] tokens)\nChecksum: [md5-hash]\nVerified: âœ…\n\nThis marker captures:\n- Last [N] messages of conversation\n- Files you were working on\n- Technical decisions made\n- Next steps to continue\n\nTo restore later:\n- Start new session\n- Say \"load marker [name]\"\n- Or use /nav:markers to list all markers\n\nLogged to: .agent/.marker-log\n```\n\n## Scripts\n\n**create_marker.py**: Generates marker content from conversation analysis\n- Input: Conversation history (from Claude)\n- Output: Formatted markdown marker\n\n## Common Use Cases\n\n### Before Lunch Break\n```\nUser: \"Save my progress, taking lunch\"\nâ†’ Creates marker: \"lunch-break-2025-10-16\"\nâ†’ Captures current state\nâ†’ User resumes after lunch: \"Load my lunch marker\"\n```\n\n### Before Risky Refactor\n```\nUser: \"Mark this before I refactor routing\"\nâ†’ Creates marker: \"before-routing-refactor\"\nâ†’ If refactor fails, restore marker\nâ†’ If refactor succeeds, delete marker\n```\n\n### End of Day\n```\nUser: \"End of day checkpoint\"\nâ†’ Creates marker: \"eod-2025-10-16\"\nâ†’ Note: \"OAuth done, tests tomorrow\"\nâ†’ Next morning: \"Load yesterday's marker\"\n```\n\n### Before Context Compact\n```\nAutomatic (via nav-compact skill):\nâ†’ Creates marker: \"before-compact-2025-10-16-1500\"\nâ†’ Compact clears conversation\nâ†’ Marker preserves knowledge\nâ†’ Next session: Auto-offers to restore\n```\n\n## Marker Best Practices\n\n**Good marker names**:\n- `lunch-break` (clear when/why)\n- `before-api-refactor` (indicates purpose)\n- `feature-complete` (marks milestone)\n- `eod-friday` (specific timing)\n\n**Bad marker names**:\n- `temp` (not descriptive)\n- `marker1` (meaningless)\n- `test` (confusing)\n\n**When to create markers**:\n- âœ… Before breaks (lunch, EOD)\n- âœ… Before risky changes\n- âœ… Before context compact\n- âœ… At milestones (feature complete)\n- âŒ After every single message (noise)\n- âŒ When context is fresh (< 5 messages)\n\n## Error Handling\n\n**Marker directory missing**:\n```\nCreating .agent/.context-markers/ directory...\nâœ… Ready to save markers\n```\n\n**Duplicate marker name**:\n```\nâš ï¸  Marker \"[name]\" already exists\n\nOptions:\n1. Overwrite (replace existing)\n2. Append timestamp (create \"[name]-v2\")\n3. Choose different name\n\nYour choice [1-3]:\n```\n\n**Insufficient context**:\n```\nâš ï¸  Very little context to save (< 5 messages)\n\nMarkers work best when there's significant progress to preserve.\nContinue anyway? [y/N]:\n```\n\n## Success Criteria\n\nMarker creation is successful when:\n- [ ] Marker file created in `.agent/.context-markers/`\n- [ ] Filename is unique and descriptive\n- [ ] Content includes: summary, loaded docs, files modified, next steps\n- [ ] User knows how to restore marker later\n- [ ] Marker is 2-5k tokens (comprehensive but efficient)\n\n## Notes\n\n- Markers are **git-ignored** (personal session save points)\n- Team members don't see each other's markers\n- Markers can be deleted anytime with `/nav:markers clean`\n- Typical marker size: 2-5k tokens (97.7% compression from 130k conversation)\n\nThis skill provides same functionality as `/nav:marker` command but with natural language invocation.\n",
        "skills/nav-multi/SKILL.md": "---\nname: nav-multi\ndescription: Run multi-Claude parallel workflow for a task. Auto-invokes when user says \"run multi-agent workflow\", \"parallel agents for\", \"multi-claude for\", or \"spawn agents for\".\nallowed-tools: Bash, Read, Write, Glob\nversion: 1.0.0\n---\n\n# Navigator Multi-Agent Workflow\n\nLaunch parallel Claude agents to implement a task with orchestration, implementation, testing, review, and documentation phases.\n\n## When to Invoke\n\nAuto-invoke when user says:\n- \"Run multi-agent workflow for TASK-XX\"\n- \"Use parallel agents for this feature\"\n- \"Multi-claude for implementing X\"\n- \"Spawn agents for this task\"\n- \"Launch multi-agent on TASK-XX\"\n\n**DO NOT invoke** if:\n- Multi-Claude scripts not installed (use nav-install-multi-claude first)\n- User is asking informational questions about multi-agent\n- Task is trivial (single file change)\n\n## Prerequisites\n\nCheck before running:\n1. `navigator-multi-claude.sh` in PATH\n2. Git repository clean (no uncommitted changes)\n3. Navigator initialized (`.agent/` exists)\n\n## Execution Steps\n\n### Step 1: Validate Prerequisites\n\n```bash\n# Check scripts installed\nif ! command -v navigator-multi-claude.sh &> /dev/null; then\n  echo \"âŒ Multi-Claude scripts not installed\"\n  echo \"\"\n  echo \"Install first with:\"\n  echo '  \"Install multi-Claude workflows\"'\n  exit 1\nfi\n\n# Check Navigator initialized\nif [ ! -d \".agent\" ]; then\n  echo \"âŒ Navigator not initialized in this project\"\n  echo \"\"\n  echo \"Initialize first with:\"\n  echo '  \"Initialize Navigator in this project\"'\n  exit 1\nfi\n\n# Check git clean\nif [ -n \"$(git status --porcelain)\" ]; then\n  echo \"âš ï¸  Uncommitted changes detected\"\n  echo \"\"\n  git status --short\n  echo \"\"\n  echo \"Multi-agent workflows work best with a clean git state.\"\n  echo \"Commit or stash changes before proceeding?\"\nfi\n\necho \"âœ… Prerequisites validated\"\n```\n\n### Step 2: Parse Task Information\n\nExtract from user request:\n- **Task ID**: TASK-XX (if mentioned)\n- **Task description**: What to implement\n\nIf TASK-XX mentioned, read task file:\n```bash\nif [ -n \"$TASK_ID\" ]; then\n  TASK_FILE=\".agent/tasks/${TASK_ID}*.md\"\n  if ls $TASK_FILE 1> /dev/null 2>&1; then\n    TASK_DESC=$(head -1 $TASK_FILE | sed 's/# //')\n    echo \"ğŸ“‹ Task: $TASK_DESC\"\n  fi\nfi\n```\n\n### Step 3: Choose Workflow Type\n\nPresent options to user:\n\n```\nWhich workflow type?\n\n1. **POC (2-phase)** - Quick validation\n   - Planning â†’ Implementation\n   - ~3 minutes\n   - Best for: Simple features, utilities\n\n2. **Standard (4-phase)** - Full quality gates\n   - Planning â†’ Implementation â†’ Testing + Docs â†’ Review\n   - ~6 minutes\n   - Best for: Production features\n\n3. **Full (6-phase)** - With simplification\n   - Planning â†’ Implementation â†’ Simplify â†’ Testing + Docs â†’ Review â†’ Integration\n   - ~8 minutes\n   - Best for: Complex features, refactoring\n```\n\n### Step 4: Generate Session ID\n\n```bash\nTASK_NUM=$(echo \"$TASK_ID\" | grep -oE '[0-9]+' || echo \"0\")\nSESSION_ID=\"task-${TASK_NUM}-$(date +%s)\"\necho \"ğŸ“Œ Session: $SESSION_ID\"\n```\n\n### Step 5: Create State File\n\n```bash\ncat > \".agent/tasks/${SESSION_ID}-state.json\" << EOF\n{\n  \"session_id\": \"${SESSION_ID}\",\n  \"task\": \"${TASK_DESC}\",\n  \"task_id\": \"${TASK_ID}\",\n  \"workflow_type\": \"${WORKFLOW_TYPE}\",\n  \"phases_completed\": [],\n  \"current_phase\": \"init\",\n  \"started_at\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",\n  \"status\": \"in_progress\"\n}\nEOF\n```\n\n### Step 6: Launch Workflow\n\n```bash\necho \"ğŸš€ Launching multi-agent workflow...\"\necho \"\"\n\ncase $WORKFLOW_TYPE in\n  poc)\n    navigator-multi-claude-poc.sh \"$TASK_DESC\"\n    ;;\n  standard)\n    navigator-multi-claude.sh \"$TASK_DESC\"\n    ;;\n  full)\n    navigator-multi-claude.sh \"$TASK_DESC\" --with-simplify\n    ;;\nesac\n```\n\n### Step 7: Offer Dashboard\n\n```bash\necho \"\"\necho \"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\"\necho \"Monitor progress with dashboard?\"\necho \"\"\necho \"In another terminal, run:\"\necho \"  ./scripts/multi-claude-dashboard.sh $SESSION_ID\"\necho \"\"\necho \"Or watch marker log:\"\necho \"  tail -f .agent/.marker-log\"\necho \"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\"\n```\n\n## Output Format\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Multi-Agent Workflow: task-36-1705123456           â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Task: Implement user authentication                 â”‚\nâ”‚ Type: standard (4-phase)                           â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Phases:                                            â”‚\nâ”‚   1. Planning      â†’ orchestrator                   â”‚\nâ”‚   2. Implementation â†’ implementer                   â”‚\nâ”‚   3. Testing       â†’ tester (parallel)             â”‚\nâ”‚   3. Documentation â†’ documenter (parallel)         â”‚\nâ”‚   4. Review        â†’ reviewer                       â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Monitor: ./scripts/multi-claude-dashboard.sh       â”‚\nâ”‚ Logs: tail -f .agent/.marker-log                   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nğŸš€ Launching workflow...\n```\n\n## Error Handling\n\n### Scripts Not Installed\n```\nâŒ Multi-Claude scripts not installed\n\nThe multi-agent workflow requires orchestration scripts.\n\nInstall with:\n  \"Install multi-Claude workflows\"\n\nThen retry:\n  \"Run multi-agent workflow for TASK-XX\"\n```\n\n### Uncommitted Changes\n```\nâš ï¸  Uncommitted changes detected\n\nM  src/auth/login.ts\n?? src/utils/temp.ts\n\nMulti-agent workflows create branches and parallel changes.\nWorking with uncommitted changes may cause conflicts.\n\nOptions:\n1. Commit changes first: git add -A && git commit -m \"WIP\"\n2. Stash changes: git stash\n3. Proceed anyway (risky)\n\nWhich option? [1/2/3]\n```\n\n### Workflow Already Running\n```\nâš ï¸  Workflow already in progress\n\nSession: task-35-1705120000\nStatus: IMPL phase running\nStarted: 5 minutes ago\n\nOptions:\n1. Resume existing workflow\n2. Cancel existing and start new\n3. Wait for completion\n\nWhich option? [1/2/3]\n```\n\n## Configuration\n\nIn `.agent/.nav-config.json`:\n\n```json\n{\n  \"multi_agent\": {\n    \"enabled\": true,\n    \"default_workflow\": \"standard\",\n    \"auto_dashboard\": false,\n    \"parallel_limit\": 3,\n    \"retry_attempts\": 2,\n    \"phase_timeout_seconds\": 180\n  }\n}\n```\n\n## Success Criteria\n\nWorkflow launch successful when:\n- [ ] Prerequisites validated\n- [ ] Session ID generated\n- [ ] State file created\n- [ ] Workflow script launched\n- [ ] Dashboard instructions shown\n\n## Workflow Phases\n\n### POC (2-phase)\n```\nPlanning â”€â”€â”€â”€â”€â–º Implementation â”€â”€â”€â”€â”€â–º Done\n```\n\n### Standard (4-phase)\n```\n                              â”Œâ”€â–º Testing â”€â”€â”€â”€â”\nPlanning â”€â–º Implementation â”€â”€â”€â”¤               â”œâ”€â–º Review â”€â–º Done\n                              â””â”€â–º Docs â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Full (6-phase)\n```\n                                          â”Œâ”€â–º Testing â”€â”€â”€â”€â”\nPlanning â”€â–º Implementation â”€â–º Simplify â”€â”€â”€â”¤               â”œâ”€â–º Review â”€â–º Integration â”€â–º Done\n                                          â””â”€â–º Docs â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Role Templates\n\nEach phase uses a minimal context CLAUDE.md:\n- `templates/multi-claude/orchestrator-claude.md` (~4k tokens)\n- `templates/multi-claude/implementer-claude.md` (~5k tokens)\n- `templates/multi-claude/tester-claude.md` (~4k tokens)\n- `templates/multi-claude/reviewer-claude.md` (~4k tokens)\n- `templates/multi-claude/documenter-claude.md` (~4k tokens)\n- `templates/multi-claude/simplifier-claude.md` (~5k tokens)\n\n**Total**: ~27k tokens across 6 roles (vs 50k+ loading full project context per role)\n\n## Examples\n\n### Example 1: Quick Feature with POC\n\nUser: \"Run multi-agent POC for adding a logout button\"\n\n```\nâœ… Prerequisites validated\nğŸ“‹ Task: Add logout button\nğŸ“Œ Session: task-0-1705123456\nğŸš€ Launching POC workflow (2-phase)...\n\nPhase 1: Planning (orchestrator)\nPhase 2: Implementation (implementer)\n\nMonitor: ./scripts/multi-claude-dashboard.sh task-0-1705123456\n```\n\n### Example 2: Standard Workflow for TASK-XX\n\nUser: \"Use parallel agents for TASK-36\"\n\n```\nâœ… Prerequisites validated\nğŸ“‹ Task: Multi-Agent Production Polish (from TASK-36)\nğŸ“Œ Session: task-36-1705123456\nğŸš€ Launching standard workflow (4-phase)...\n\nPhase 1: Planning\nPhase 2: Implementation\nPhase 3: Testing + Documentation (parallel)\nPhase 4: Review\n\nDashboard available in another terminal.\n```\n\n### Example 3: Full Workflow with Simplification\n\nUser: \"Multi-claude full workflow for auth refactor\"\n\n```\nâœ… Prerequisites validated\nğŸ“‹ Task: Auth refactor\nğŸ“Œ Session: task-0-1705123456\nğŸš€ Launching full workflow (6-phase)...\n\nIncludes code simplification phase for clarity improvements.\nExpected duration: ~8 minutes\n\nMonitor progress:\n  ./scripts/multi-claude-dashboard.sh task-0-1705123456\n```\n\n## Related Skills\n\n- **nav-install-multi-claude**: Install orchestration scripts\n- **nav-task**: Create task documentation\n- **nav-marker**: Context preservation between phases\n- **nav-simplify**: Code simplification (used in full workflow)\n\n## Notes\n\n- Multi-agent workflows spawn headless Claude instances\n- Each role gets fresh context (no cross-contamination)\n- Marker files coordinate phase transitions\n- Dashboard provides real-time visibility\n- State file enables resume after interruption\n",
        "skills/nav-onboard/SKILL.md": "---\nname: nav-onboard\ndescription: Interactive onboarding for Navigator - learn by doing. Auto-invoke when user says \"onboard me\", \"teach me Navigator\", \"how do I use Navigator\", \"Navigator tutorial\", \"learn Navigator\", \"new to Navigator\", or \"what skills should I use\".\nallowed-tools: Read, Write, Edit, Bash, Glob, Grep, AskUserQuestion\nversion: 1.0.0\n---\n\n# Navigator Onboarding Skill\n\nInteractive, hands-on learning experience for Navigator. Users complete actual tasks to learn workflows, not just read documentation.\n\n## When to Invoke\n\nInvoke this skill when the user:\n- Says \"onboard me\", \"teach me Navigator\"\n- Says \"how do I use Navigator\", \"Navigator tutorial\"\n- Says \"learn Navigator\", \"new to Navigator\"\n- Asks \"what skills should I use\"\n- Says \"help me get started with Navigator\"\n- First time using Navigator after init\n\n**DO NOT invoke** if:\n- User is asking about a specific skill (invoke that skill instead)\n- User already completed onboarding (`.agent/onboarding/.completed` exists)\n- User explicitly asks to skip onboarding\n\n## Two Learning Flows\n\n### Quick Start (~15 min)\nFor users who want to be productive fast:\n- 4 essential skills with hands-on practice\n- Generates personalized workflow guide\n- Minimal philosophy, maximum doing\n\n### Full Education (~45 min)\nFor users who want comprehensive understanding:\n- Philosophy primer (context efficiency principles)\n- All 5 essential skills with practice\n- Project-specific development skills\n- Complete workflow mastery\n\n## Execution Steps\n\n### Step 1: Check Previous Onboarding\n\n```bash\nif [ -f \".agent/onboarding/.completed\" ]; then\n  echo \"COMPLETED\"\nelse\n  echo \"NOT_COMPLETED\"\nfi\n```\n\n**If completed**: Ask if user wants to re-do onboarding or just view their workflow guide.\n\n### Step 2: Analyze Project\n\nRun project analyzer to detect tech stack:\n\n```bash\npython3 skills/nav-onboard/functions/project_analyzer.py\n```\n\n**Output structure**:\n```json\n{\n  \"project_name\": \"my-app\",\n  \"project_type\": \"fullstack\",\n  \"frontend_framework\": \"Next.js\",\n  \"backend_framework\": \"Express\",\n  \"database\": \"PostgreSQL\",\n  \"testing_framework\": \"Jest\",\n  \"has_navigator\": true\n}\n```\n\n### Step 3: Generate Skill Recommendations\n\nRun skill recommender based on project analysis:\n\n```bash\npython3 skills/nav-onboard/functions/skill_recommender.py\n```\n\n**Output structure**:\n```json\n{\n  \"essential_skills\": [\"nav-start\", \"nav-marker\", \"nav-task\", \"nav-sop\", \"nav-compact\"],\n  \"recommended_skills\": [\"frontend-component\", \"backend-endpoint\"],\n  \"optional_skills\": [\"visual-regression\", \"product-design\"],\n  \"workflow_order\": [\"nav-start\", \"nav-task\", \"frontend-component\", \"nav-sop\", \"nav-marker\", \"nav-compact\"]\n}\n```\n\n### Step 4: Present Flow Choice\n\nShow detection results and ask user to choose flow:\n\n```\nNavigator Onboarding\n\nI've analyzed your project:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nProject: [project_name]\nType: [project_type]\nStack: [tech_stack]\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nBased on your project, I recommend these skills:\n\nEssential (all projects):\n  1. nav-start     - Start sessions efficiently\n  2. nav-marker    - Save progress checkpoints\n  3. nav-task      - Document what you build\n  4. nav-sop       - Capture solutions for reuse\n  5. nav-compact   - Clear context without losing work\n\nFor your [project_type] project:\n  6. [recommended_skill_1] - [description]\n  7. [recommended_skill_2] - [description]\n\nChoose your learning path:\n\n[Q] Quick Start (~15 min)\n    Learn 4 essential skills with hands-on practice\n    Get productive immediately\n\n[F] Full Education (~45 min)\n    Complete Navigator mastery\n    Philosophy + all relevant skills + practice\n\nYour choice [Q/F]:\n```\n\n### Step 5: Initialize Progress Tracking\n\nCreate onboarding directory and progress file:\n\n```bash\nmkdir -p .agent/onboarding\n```\n\n```python\n# Run progress_tracker.py init\npython3 skills/nav-onboard/functions/progress_tracker.py init [flow_type] [project_type]\n```\n\nCreates `.agent/onboarding/PROGRESS.md`:\n```markdown\n# Navigator Onboarding Progress\n\n**Started**: [date]\n**Flow**: Quick Start | Full Education\n**Project**: [name] ([type])\n\n---\n\n## Essential Skills\n\n| # | Skill | Status | Completed | Notes |\n|---|-------|--------|-----------|-------|\n| 1 | nav-start | pending | - | - |\n| 2 | nav-marker | pending | - | - |\n| 3 | nav-task | pending | - | - |\n| 4 | nav-sop | pending | - | - |\n| 5 | nav-compact | pending | - | - |\n\n## Development Skills\n\n| # | Skill | Status | Completed | Notes |\n|---|-------|--------|-----------|-------|\n| 6 | [skill] | pending | - | - |\n\n---\n\n**Progress**: 0/[total] (0%)\n**Next Task**: nav-start\n\n*Last Updated: [timestamp]*\n```\n\n### Step 6: Execute Learning Tasks\n\nFor each skill in the curriculum, follow this pattern:\n\n#### 6.1: Present Task\n\nRead the learning task file and present to user:\n\n```bash\ncat skills/nav-onboard/learning-tasks/[task-file].md\n```\n\nPresent in this format:\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTASK [N]/[TOTAL]: [Skill Name]\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n[Task description and context]\n\nDO THIS NOW:\nâ”â”â”â”â”â”â”â”â”â”â”\nType: \"[exact command to type]\"\n\nWHAT SHOULD HAPPEN:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n[Expected output description]\n\nReady? Type the command above, then say \"done\" when complete.\n```\n\n#### 6.2: Wait for User Action\n\nUser types the command (e.g., \"Start my Navigator session\").\n\nThe relevant skill executes automatically.\n\nUser says \"done\" or similar when ready to continue.\n\n#### 6.3: Validate Completion\n\nRun task validator:\n\n```bash\npython3 skills/nav-onboard/functions/task_validator.py [skill_name]\n```\n\n**Validation checks per skill**:\n- `nav-start`: User confirmation (session displayed)\n- `nav-marker`: File exists in `.agent/.context-markers/`\n- `nav-task`: File exists in `.agent/tasks/`\n- `nav-sop`: File exists in `.agent/sops/`\n- `nav-compact`: `.active` file exists in `.context-markers/`\n\n#### 6.4: Update Progress\n\n```bash\npython3 skills/nav-onboard/functions/progress_tracker.py update [skill_name] completed \"[notes]\"\n```\n\n#### 6.5: Show Progress and Continue\n\n```\nâœ… Task Complete: [skill_name]\n\nProgress: [N]/[TOTAL] ([percentage]%)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n[progress bar visualization]\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nPRO TIP:\n[Skill-specific best practice]\n\nNext up: [next_skill_name]\n\nContinue? [Y/n]\n```\n\n### Step 7: Generate Personalized Workflow\n\nAfter all tasks complete, generate workflow guide:\n\n```bash\npython3 skills/nav-onboard/functions/workflow_generator.py\n```\n\nCreates `.agent/onboarding/MY-WORKFLOW.md` with:\n- Project-specific workflow diagram\n- Daily workflow checklist\n- Quick reference table with all skill triggers\n- Best practices for user's stack\n\n### Step 8: Completion Summary\n\nMark onboarding complete and show summary:\n\n```bash\ntouch .agent/onboarding/.completed\necho \"[date]\" > .agent/onboarding/.completed\n```\n\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ‰ NAVIGATOR ONBOARDING COMPLETE!\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nYou've learned:\nâœ… nav-start     - Start sessions efficiently\nâœ… nav-marker    - Save progress checkpoints\nâœ… nav-task      - Document implementations\nâœ… nav-sop       - Capture solutions\nâœ… nav-compact   - Manage context\nâœ… [dev skills]  - Build [project_type] features\n\nYour personalized workflow:\nğŸ“„ .agent/onboarding/MY-WORKFLOW.md\n\nQuick Reference:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n| Action              | Say This                         |\n|---------------------|----------------------------------|\n| Start session       | \"Start my Navigator session\"     |\n| Save progress       | \"Create checkpoint [name]\"       |\n| Document feature    | \"Create task doc for [feature]\"  |\n| Capture solution    | \"Create SOP for [issue]\"         |\n| Clear context       | \"Clear context and preserve\"     |\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nWhat's Next?\n1. Start your first real session: \"Start my Navigator session\"\n2. Keep MY-WORKFLOW.md open as reference\n3. Create markers before breaks\n4. Document what you build\n\nHappy coding! ğŸš€\n```\n\n## Learning Tasks Reference\n\n### Essential Skills (All Projects)\n\n| Order | Skill | Task File | What User Does | Validation |\n|-------|-------|-----------|----------------|------------|\n| 1 | nav-start | 01-nav-start.md | \"Start my Navigator session\" | Session summary displayed |\n| 2 | nav-marker | 02-nav-marker.md | \"Create checkpoint learning-test\" | File in `.context-markers/` |\n| 3 | nav-task | 03-nav-task.md | \"Create task doc for learning-feature\" | File in `.agent/tasks/` |\n| 4 | nav-sop | 04-nav-sop.md | \"Create SOP for learning-debugging\" | File in `.agent/sops/` |\n| 5 | nav-compact | 05-nav-compact.md | \"Clear context and preserve markers\" | `.active` file created |\n\n### Development Skills (Project-Specific)\n\n| Project Type | Skill | Task File |\n|--------------|-------|-----------|\n| Frontend | frontend-component | 06-frontend-component.md |\n| Frontend | frontend-test | 07-frontend-test.md |\n| Backend | backend-endpoint | 06-backend-endpoint.md |\n| Backend | backend-test | 07-backend-test.md |\n| Fullstack | Both frontend + backend skills | Sequential |\n\n## Quick Start Curriculum\n\nTasks 1-4 only:\n1. nav-start (3 min)\n2. nav-marker (3 min)\n3. nav-task (4 min)\n4. One dev skill matching project (5 min)\n\nTotal: ~15 minutes\n\n## Full Education Curriculum\n\n### Part 1: Philosophy (5 min)\n- Read `.agent/philosophy/CONTEXT-EFFICIENCY.md`\n- Understand why Navigator exists\n- Key principle: load what you need, when you need it\n\n### Part 2: Session Management (10 min)\n- Task 1: nav-start\n- Task 2: nav-marker\n- Task 5: nav-compact\n\n### Part 3: Documentation (10 min)\n- Task 3: nav-task\n- Task 4: nav-sop\n\n### Part 4: Development Skills (15-20 min)\n- Project-specific skills\n- Hands-on practice with real components/endpoints\n\n### Part 5: Summary (5 min)\n- Generate MY-WORKFLOW.md\n- Review quick reference\n- Next steps\n\nTotal: ~45 minutes\n\n## Predefined Functions\n\n### project_analyzer.py\nExtends `nav-init/functions/project_detector.py` with:\n- Project type classification (frontend/backend/fullstack)\n- Database detection\n- Testing framework detection\n- Navigator status check\n\n### skill_recommender.py\nMaps project analysis to skill recommendations:\n- Essential skills (always included)\n- Recommended skills (based on project type)\n- Optional skills (advanced features)\n- Workflow order (suggested sequence)\n\n### progress_tracker.py\nManages `.agent/onboarding/PROGRESS.md`:\n- Initialize progress file\n- Update task status\n- Calculate completion percentage\n- Determine next task\n\n### task_validator.py\nValidates task completion:\n- File existence checks\n- Content validation\n- User confirmation prompts\n\n### workflow_generator.py\nGenerates `.agent/onboarding/MY-WORKFLOW.md`:\n- Project-specific workflow\n- Daily checklist\n- Quick reference table\n- Best practices\n\n## Error Handling\n\n### Navigator Not Initialized\n```\nâš ï¸  Navigator not initialized in this project.\n\nRun nav-init first, then come back to onboarding.\n\nWould you like to initialize Navigator now? [Y/n]\n```\n\n### Task Validation Failed\n```\nâš ï¸  Couldn't verify task completion.\n\nExpected: [what should exist]\nFound: [what was found]\n\nOptions:\n1. Retry the task\n2. Skip this task\n3. Mark as complete anyway\n\nYour choice [1-3]:\n```\n\n### User Wants to Skip\n```\nSkipping [skill_name].\n\nNote: You can always learn this skill later by saying:\n\"Teach me [skill_name]\"\n\nContinuing to next task...\n```\n\n## Success Criteria\n\nOnboarding is successful when:\n- [ ] User completed at least 3 essential skill tasks\n- [ ] `.agent/onboarding/PROGRESS.md` shows progress\n- [ ] `.agent/onboarding/MY-WORKFLOW.md` generated\n- [ ] `.agent/onboarding/.completed` marker created\n- [ ] User knows how to start sessions and save progress\n\n## Notes\n\n- Real files created during onboarding (not sandboxed)\n- Files created can be deleted later if unwanted\n- Progress persists across sessions\n- Can re-run onboarding anytime (asks to overwrite)\n- Learning tasks designed for 3-5 minutes each\n",
        "skills/nav-onboard/learning-tasks/01-nav-start.md": "# Learning Task 1: Starting Navigator Sessions\n\n**Skill**: nav-start\n**Time**: 3-5 minutes\n**Difficulty**: Beginner\n\n## Why This Matters\n\nEvery Navigator session begins with `nav-start`. It loads the documentation index (~2k tokens) instead of all documentation at once (~150k tokens). This is the foundation of Navigator's 92% token reduction.\n\n## The Task\n\n### Step 1: Start Your Session\n\n**DO THIS NOW:**\n```\nType: \"Start my Navigator session\"\n```\n\n### Step 2: Observe What Happens\n\n**WHAT SHOULD HAPPEN:**\n\n1. Navigator loads DEVELOPMENT-README.md (the index)\n2. Session summary appears showing:\n   - Documentation structure\n   - Token usage (should be <15k)\n   - Available task context\n\nYou should see something like:\n```\nNavigator Session Started\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nProject: [your-project-name]\nDocumentation loaded: DEVELOPMENT-README.md\nToken usage: ~12k (vs 150k loading everything)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n### Step 3: Understand the Index\n\n**NOTICE:**\n- The index shows WHAT documentation exists\n- It does NOT load all the documentation\n- You request specific docs when needed\n\nThis is lazy loading - the core of Navigator.\n\n## Validation\n\nThis task is complete when:\n- [ ] Session started with \"Start my Navigator session\"\n- [ ] DEVELOPMENT-README.md loaded\n- [ ] You see the documentation index structure\n\n## Pro Tip\n\n**Always** start sessions with this command. It sets up efficient context loading for everything else you do. Without it, you'll miss Navigator's benefits.\n\n## What You Learned\n\n1. Navigator loads an INDEX, not everything\n2. ~2k tokens for index vs ~150k loading all docs\n3. Request specific docs as needed (lazy loading)\n\n---\n\n**When done, say \"done\" to continue to the next task.**\n",
        "skills/nav-onboard/learning-tasks/02-nav-marker.md": "# Learning Task 2: Creating Context Markers\n\n**Skill**: nav-marker\n**Time**: 3-5 minutes\n**Difficulty**: Beginner\n\n## Why This Matters\n\nContext markers are \"save points\" for your AI sessions. When you take a break or clear context, the marker preserves what you were working on. A 130k token conversation compresses to ~3k tokens - 97% reduction.\n\n## The Task\n\n### Step 1: Create a Marker\n\n**DO THIS NOW:**\n```\nType: \"Create checkpoint learning-test\"\n```\n\n### Step 2: Observe What Happens\n\n**WHAT SHOULD HAPPEN:**\n\n1. System creates marker file in `.agent/.context-markers/`\n2. Marker captures:\n   - What you were working on\n   - Files you modified (if any)\n   - Technical decisions made\n   - Next steps\n\nYou should see:\n```\nâœ… Context marker created!\n\nMarker: learning-test\nFile: .agent/.context-markers/[timestamp]_learning-test.md\nSize: ~2-3 KB\n\nThis marker captures:\n- Session summary\n- Current focus\n- Next steps\n\nTo restore later: \"Load marker learning-test\"\n```\n\n### Step 3: Verify the Marker\n\n**DO THIS:**\n```\nAsk: \"Show me the marker file that was just created\"\n```\n\nYou should see structured content:\n- Conversation Summary\n- Files Modified\n- Current Focus\n- Technical Decisions\n- Next Steps\n\n## Validation\n\nThis task is complete when:\n- [ ] Marker created with \"Create checkpoint learning-test\"\n- [ ] File exists in `.agent/.context-markers/`\n- [ ] Marker contains session summary\n\n**Automatic check**: File `.agent/.context-markers/*learning-test*.md` exists.\n\n## Pro Tip\n\nCreate markers:\n- Before breaks (lunch, EOD)\n- Before risky refactors\n- At milestones (feature complete)\n- Before clearing context\n\nGood names: `before-refactor`, `auth-complete`, `eod-friday`\nBad names: `temp`, `test1`, `asdf`\n\n## What You Learned\n\n1. Markers compress 130k â†’ 3k tokens (97% reduction)\n2. They preserve context across sessions\n3. Create them before breaks and risky changes\n\n---\n\n**When done, say \"done\" to continue to the next task.**\n",
        "skills/nav-onboard/learning-tasks/03-nav-task.md": "# Learning Task 3: Documenting What You Build\n\n**Skill**: nav-task\n**Time**: 4-5 minutes\n**Difficulty**: Beginner\n\n## Why This Matters\n\nTask documentation captures WHAT you build - implementation plans, technical decisions, and outcomes. This becomes your project's knowledge base. Future sessions can load relevant task docs instead of re-explaining everything.\n\n## The Task\n\n### Step 1: Create a Task Document\n\n**DO THIS NOW:**\n```\nType: \"Create task doc for learning-feature\"\n```\n\n### Step 2: Observe What Happens\n\n**WHAT SHOULD HAPPEN:**\n\n1. Task ID generated (TASK-XX format)\n2. Template created in `.agent/tasks/`\n3. Navigator index updated with reference\n\nYou should see:\n```\nâœ… Task document created!\n\nTask: TASK-XX-learning-feature\nFile: .agent/tasks/TASK-XX-learning-feature.md\n\nTemplate includes:\n- Problem Statement\n- Implementation Plan\n- Technical Decisions\n- Success Criteria\n\nFill this in as you implement the feature.\n```\n\n### Step 3: Review the Template\n\n**DO THIS:**\n```\nAsk: \"Show me the task document that was created\"\n```\n\nThe template has sections for:\n- **Context**: Why this feature exists\n- **Implementation Plan**: Steps to build it\n- **Technical Decisions**: Architecture choices\n- **Files Modified**: What changed\n- **Success Criteria**: How to verify completion\n\n### Step 4: Understand the Workflow\n\nTask docs have two phases:\n1. **Planning**: Create doc when starting feature\n2. **Archiving**: Update doc when feature complete\n\nThe archive captures what was ACTUALLY built vs what was planned.\n\n## Validation\n\nThis task is complete when:\n- [ ] Task doc created with \"Create task doc for learning-feature\"\n- [ ] File exists in `.agent/tasks/`\n- [ ] Template structure visible\n\n**Automatic check**: File `.agent/tasks/*learning-feature*.md` exists.\n\n## Pro Tip\n\nTask docs answer: \"What did we build and why?\"\n\nWhen returning to a feature months later:\n1. `nav-start` loads the index\n2. Find relevant TASK-XX in index\n3. Load just that task doc (~3k tokens)\n4. Full context without re-explaining\n\nThis is much more efficient than:\n- Searching through git history\n- Re-reading all source files\n- Asking \"what was the original plan?\"\n\n## What You Learned\n\n1. Task docs capture implementation knowledge\n2. Created at start (planning) and updated at end (archiving)\n3. Future sessions load task docs for context\n\n---\n\n**When done, say \"done\" to continue to the next task.**\n",
        "skills/nav-onboard/learning-tasks/04-nav-sop.md": "# Learning Task 4: Capturing Solutions for Reuse\n\n**Skill**: nav-sop\n**Time**: 4-5 minutes\n**Difficulty**: Beginner\n\n## Why This Matters\n\nSOPs (Standard Operating Procedures) capture HOW to solve problems. When you debug a tricky issue, the SOP ensures you never waste time solving it again. This is institutional knowledge that compounds over time.\n\n## The Task\n\n### Step 1: Create an SOP\n\n**DO THIS NOW:**\n```\nType: \"Create SOP for debugging test-failures\"\n```\n\n### Step 2: Observe What Happens\n\n**WHAT SHOULD HAPPEN:**\n\n1. SOP file created in `.agent/sops/debugging/`\n2. Template includes problem, solution, prevention\n3. Categories: debugging, integrations, development, deployment\n\nYou should see:\n```\nâœ… SOP created!\n\nSOP: debugging-test-failures\nFile: .agent/sops/debugging/test-failures.md\nCategory: debugging\n\nTemplate includes:\n- Problem Description\n- Root Cause\n- Solution Steps\n- Prevention Checklist\n```\n\n### Step 3: Review the Template\n\n**DO THIS:**\n```\nAsk: \"Show me the SOP that was created\"\n```\n\nThe SOP template has:\n- **Problem**: What went wrong\n- **Symptoms**: How it manifests\n- **Root Cause**: Why it happened\n- **Solution**: Step-by-step fix\n- **Prevention**: How to avoid recurrence\n\n### Step 4: Understand SOP Categories\n\nSOPs are organized by type:\n- `debugging/` - Bug fixes and troubleshooting\n- `integrations/` - Third-party service setup\n- `development/` - Coding workflows and patterns\n- `deployment/` - Release and infrastructure\n\n## Validation\n\nThis task is complete when:\n- [ ] SOP created with \"Create SOP for debugging test-failures\"\n- [ ] File exists in `.agent/sops/debugging/`\n- [ ] Template structure visible\n\n**Automatic check**: File in `.agent/sops/*/` exists.\n\n## Pro Tip\n\nThe best time to create an SOP is RIGHT AFTER solving a problem:\n- Context is fresh\n- Solution is validated\n- Details are accurate\n\nFuture you (or teammates) will thank you when:\n- Same error appears 6 months later\n- New team member hits the same issue\n- You forgot the obscure fix\n\n**SOP vs Task Doc:**\n- Task: What we built (the feature)\n- SOP: How we solved problems (the knowledge)\n\n## What You Learned\n\n1. SOPs capture problem-solving knowledge\n2. Create them immediately after solving issues\n3. Categories help organize by type (debugging, integrations, etc.)\n\n---\n\n**When done, say \"done\" to continue to the next task.**\n",
        "skills/nav-onboard/learning-tasks/05-nav-compact.md": "# Learning Task 5: Managing Context Efficiently\n\n**Skill**: nav-compact\n**Time**: 3-5 minutes\n**Difficulty**: Beginner\n\n## Why This Matters\n\nContext windows fill up. When they do, AI starts forgetting, hallucinating, or crashes. Compact clears context while preserving progress via markers. This is how you maintain efficiency across long sessions.\n\n## The Task\n\n### Step 1: Initiate Compact\n\n**DO THIS NOW:**\n```\nType: \"Clear context and preserve markers\"\n```\n\n### Step 2: Observe What Happens\n\n**WHAT SHOULD HAPPEN:**\n\n1. Automatic marker created (preserves current state)\n2. `.active` file set (for auto-restore next session)\n3. Instructions for manual clear provided\n\nYou should see:\n```\nâœ… Ready to compact!\n\nMarker created: before-compact-[timestamp]\nLocation: .agent/.context-markers/\nActive marker set: âœ… (will auto-restore next session)\n\nTo complete compact:\n1. Start a new conversation (or use /clear)\n2. Say \"Start my Navigator session\"\n3. Marker will auto-restore your context\n\nYour progress is preserved in the marker.\n```\n\n### Step 3: Understand the Process\n\n**IMPORTANT**: Claude cannot clear conversation programmatically.\n\nThe compact workflow:\n1. `nav-compact` creates marker + sets `.active`\n2. YOU start new conversation (or /clear)\n3. Next `nav-start` detects `.active` marker\n4. Offers to restore your context\n\n### Step 4: (Optional) Complete the Compact\n\nIf you want to practice the full cycle:\n\n1. Start a new conversation\n2. Type: \"Start my Navigator session\"\n3. See the auto-restore offer\n4. Confirm to load your marker\n\n## Validation\n\nThis task is complete when:\n- [ ] Compact initiated with \"Clear context and preserve markers\"\n- [ ] Marker created automatically\n- [ ] `.active` file set for auto-restore\n\n**Automatic check**: File `.agent/.context-markers/.active` exists.\n\n## Pro Tip\n\n**When to compact:**\n- After completing isolated feature (switch to new work)\n- When context feels \"heavy\" (many files loaded)\n- After debugging session (clear noise)\n- Before major topic change\n\n**When NOT to compact:**\n- Mid-feature implementation\n- While debugging (need context)\n- When files from current work are still needed\n\n**The flow:**\n```\nStart session â†’ Work â†’ Marker â†’ Compact â†’ New session â†’ Auto-restore â†’ Continue\n```\n\n## What You Learned\n\n1. Compact clears context while preserving progress\n2. Markers auto-restore on next session\n3. Use after completing work units, not mid-work\n\n---\n\n**When done, say \"done\" to continue to the next task.**\n",
        "skills/nav-onboard/learning-tasks/06-dev-skill.md": "# Learning Task 6: Using Development Skills\n\n**Skill**: Project-specific (frontend-component, backend-endpoint, etc.)\n**Time**: 5-7 minutes\n**Difficulty**: Intermediate\n\n## Why This Matters\n\nDevelopment skills generate boilerplate code following your project's patterns. Instead of writing everything from scratch, you describe what you need and Navigator creates consistent, tested code.\n\n## The Task\n\nBased on your project type, complete ONE of these:\n\n---\n\n### Option A: Frontend Projects (React/Vue/Angular)\n\n**DO THIS NOW:**\n```\nType: \"Create component OnboardingDemo\"\n```\n\n**WHAT SHOULD HAPPEN:**\n1. Component file created with TypeScript\n2. Test file generated\n3. Styles scaffolded (CSS modules, styled-components, or Tailwind)\n\nYou should see files like:\n```\nsrc/components/OnboardingDemo/\nâ”œâ”€â”€ OnboardingDemo.tsx\nâ”œâ”€â”€ OnboardingDemo.test.tsx\nâ”œâ”€â”€ OnboardingDemo.styles.ts (or .module.css)\nâ””â”€â”€ index.ts\n```\n\n---\n\n### Option B: Backend Projects (Express/FastAPI/Go)\n\n**DO THIS NOW:**\n```\nType: \"Add endpoint /api/onboarding-demo\"\n```\n\n**WHAT SHOULD HAPPEN:**\n1. Route handler created\n2. Validation schema generated\n3. Test file scaffolded\n\nYou should see files like:\n```\nsrc/routes/onboarding-demo.ts (or .py)\nsrc/routes/onboarding-demo.test.ts\n```\n\n---\n\n### Option C: Fullstack Projects\n\nChoose either Option A or B based on what you're working on.\n\n---\n\n### Option D: Other Project Types\n\nIf your project doesn't match above:\n```\nType: \"Show me available Navigator skills\"\n```\n\nReview what skills are available for your stack.\n\n## Validation\n\nThis task is complete when:\n- [ ] Component OR endpoint created\n- [ ] Files generated match project patterns\n- [ ] You understand how the skill works\n\n**Note**: File locations depend on your project structure.\n\n## Pro Tip\n\nDevelopment skills learn from your project:\n- Detect TypeScript vs JavaScript\n- Match existing file structure\n- Use project's testing library\n- Follow your naming conventions\n\nThe generated code is a starting point - customize as needed.\n\n**Workflow integration:**\n```\nnav-start â†’ Load task doc â†’ Use dev skills â†’ nav-task archive â†’ nav-marker â†’ nav-compact\n```\n\n## What You Learned\n\n1. Dev skills generate consistent boilerplate\n2. They detect your project patterns\n3. Files are customizable starting points\n\n---\n\n**When done, say \"done\" to continue.**\n\nYou've completed all learning tasks! Navigator will now generate your personalized workflow guide.\n",
        "skills/nav-onboard/templates/progress-template.md": "# Navigator Onboarding Progress\n\n**Started**: ${START_DATE}\n**Flow**: ${FLOW_TYPE}\n**Project**: ${PROJECT_NAME} (${PROJECT_TYPE})\n\n---\n\n## Essential Skills\n\n| # | Skill | Status | Completed | Notes |\n|---|-------|--------|-----------|-------|\n${ESSENTIAL_SKILLS_ROWS}\n\n## Development Skills\n\n| # | Skill | Status | Completed | Notes |\n|---|-------|--------|-----------|-------|\n${DEV_SKILLS_ROWS}\n\n---\n\n**Progress**: ${COMPLETED}/${TOTAL} (${PERCENTAGE}%)\n**Next Task**: ${NEXT_TASK}\n\n*Last Updated: ${LAST_UPDATED}*\n",
        "skills/nav-onboard/templates/workflow-template.md": "# My Navigator Workflow\n\n**Generated**: ${DATE}\n**Project**: ${PROJECT_NAME}\n**Type**: ${PROJECT_TYPE}\n**Stack**: ${TECH_STACK}\n\n---\n\n## Workflow Diagram\n\n${WORKFLOW_DIAGRAM}\n\n---\n\n## Daily Workflow\n\n### Morning Routine\n\n1. **Start session**: \"Start my Navigator session\"\n2. **Check tasks**: Review `.agent/tasks/` index for current work\n3. **Load context**: Read relevant task documentation\n\n### During Development\n\n4. **Use dev skills**: ${DEV_SKILLS}\n5. **Create checkpoints**: Before breaks or risky changes\n6. **Document decisions**: Update task doc with technical choices\n\n### After Completing Work\n\n7. **Archive task**: \"Archive TASK-XX documentation\"\n8. **Capture solutions**: \"Create SOP for [solved issue]\"\n9. **Final checkpoint**: \"Create checkpoint [feature-name]-complete\"\n\n### End of Session\n\n10. **Clear context**: \"Clear context and preserve markers\" (if switching tasks)\n11. **Or keep context**: If continuing same work tomorrow\n\n---\n\n## Skills Reference\n\n### Essential Skills (Use Daily)\n\n| Skill | Description | Trigger |\n|-------|-------------|---------|\n${ESSENTIAL_SKILLS_TABLE}\n\n### Development Skills (Use When Building)\n\n| Skill | Description | Trigger |\n|-------|-------------|---------|\n${DEV_SKILLS_TABLE}\n\n### Optional Skills (Advanced)\n\n| Skill | Description | Trigger |\n|-------|-------------|---------|\n${OPTIONAL_SKILLS_TABLE}\n\n---\n\n## Quick Reference\n\n| Action | Say This |\n|--------|----------|\n| Start session | \"Start my Navigator session\" |\n| Save progress | \"Create checkpoint [name]\" |\n| Document feature | \"Create task doc for [feature]\" |\n| Archive feature | \"Archive TASK-XX documentation\" |\n| Capture solution | \"Create SOP for [issue]\" |\n| Clear context | \"Clear context and preserve markers\" |\n\n---\n\n## Tips for ${PROJECT_TYPE} Projects\n\n${PROJECT_TIPS}\n\n---\n\n## Next Steps\n\n1. **Start every session** with: \"Start my Navigator session\"\n2. **Create checkpoints** before breaks: \"Create checkpoint [name]\"\n3. **Document features** when complete: \"Archive TASK-XX\"\n4. **Capture solutions** after debugging: \"Create SOP for [issue]\"\n5. **Clear context** when switching tasks: \"Clear context and preserve\"\n\n---\n\n*This workflow was personalized for your ${PROJECT_TYPE} project.*\n*Update as your needs evolve.*\n\n**Navigator Version**: ${NAVIGATOR_VERSION}\n",
        "skills/nav-profile/SKILL.md": "---\nname: nav-profile\ndescription: Manage user preferences and corrections for bilateral modeling. Auto-learns from session corrections. Use when user says \"save my preferences\", \"remember I like...\", or auto-triggers after corrections.\nallowed-tools: Read, Write, Edit, Bash\nversion: 1.0.0\n---\n\n# Navigator Profile Skill\n\nManage user preferences for bilateral modeling - enabling Claude to understand and adapt to your working style, technical preferences, and past corrections.\n\n## Why This Exists (Theory of Mind)\n\nBased on Riedl & Weidmann 2025 research on Human-AI Synergy:\n- Theory of Mind (ToM) is the key differentiator in human-AI collaboration success\n- Users with higher ToM achieve 23-29% performance boost\n- **Bilateral modeling** completes the ToM loop: Claude models you, you model Claude\n\nThis skill enables Claude to:\n- Remember your preferences across sessions\n- Learn from corrections without you repeating them\n- Adapt communication style to your level\n- Build a persistent mental model of YOU\n\n## When to Invoke\n\n**Auto-invoke when**:\n- User says \"save my preferences\", \"remember I like...\"\n- User says \"update my profile\", \"change my preference for...\"\n- After detecting a correction pattern (auto-learn mode)\n- User says \"show my profile\", \"what do you know about me?\"\n\n**DO NOT invoke if**:\n- User is creating a context marker (use nav-marker)\n- User wants session-specific preferences only\n- User explicitly says \"just for this session\"\n\n## Profile Location\n\n`.agent/.user-profile.json` (git-ignored, session-persistent)\n\n## Execution Steps\n\n### Step 1: Determine Action\n\n**SHOW** (viewing profile):\n```\nUser: \"Show my profile\", \"What do you remember about me?\"\nâ†’ Display current profile\n```\n\n**UPDATE** (explicit preference):\n```\nUser: \"Remember I prefer functional style\", \"Save that I like concise explanations\"\nâ†’ Update specific preference\n```\n\n**LEARN** (auto-detect correction):\n```\n[Internal trigger after correction detected]\nâ†’ Extract and save correction pattern\n```\n\n**RESET** (clear profile):\n```\nUser: \"Reset my profile\", \"Clear my preferences\"\nâ†’ Confirm and delete profile\n```\n\n### Step 2: Load or Initialize Profile\n\n**Check if profile exists**:\n```bash\nif [ -f \".agent/.user-profile.json\" ]; then\n  echo \"Profile exists\"\nelse\n  echo \"No profile found, will create new\"\nfi\n```\n\n**Initialize new profile** (if not exists):\n```json\n{\n  \"version\": \"1.0\",\n  \"created\": \"{YYYY-MM-DD}\",\n  \"last_updated\": \"{YYYY-MM-DD}\",\n  \"preferences\": {\n    \"communication\": {\n      \"verbosity\": \"balanced\",\n      \"confirmation_threshold\": \"high-stakes\",\n      \"explanation_style\": \"examples\"\n    },\n    \"technical\": {\n      \"preferred_frameworks\": [],\n      \"code_style\": \"mixed\",\n      \"testing_preference\": \"tdd\"\n    },\n    \"workflow\": {\n      \"autonomous_commits\": true,\n      \"auto_compact_threshold\": 80,\n      \"marker_before_risky\": true\n    }\n  },\n  \"corrections\": [],\n  \"goals\": []\n}\n```\n\n### Step 3A: Show Profile (If SHOW Action)\n\n**Display current profile**:\n```\nYour Navigator Profile\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nCommunication Preferences:\n- Verbosity: {verbosity}\n- Confirmation: {confirmation_threshold} (when to verify understanding)\n- Explanations: {explanation_style}\n\nTechnical Preferences:\n- Preferred frameworks: {frameworks or \"none set\"}\n- Code style: {code_style}\n- Testing: {testing_preference}\n\nWorkflow Preferences:\n- Autonomous commits: {autonomous_commits}\n- Auto-compact at: {auto_compact_threshold}% context\n- Markers before risky changes: {marker_before_risky}\n\nLearned Corrections ({count}):\n{recent_corrections_list}\n\nActive Goals ({count}):\n{active_goals_list}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nLast updated: {last_updated}\n```\n\n### Step 3B: Update Profile (If UPDATE Action)\n\n**Parse preference from user input**:\n```\nUser: \"Remember I prefer functional style\"\nâ†’ Category: technical\nâ†’ Field: code_style\nâ†’ Value: functional\n\nUser: \"I like concise explanations\"\nâ†’ Category: communication\nâ†’ Field: verbosity\nâ†’ Value: concise\n```\n\n**Map common expressions to profile fields**:\n\n| User Says | Category | Field | Value |\n|-----------|----------|-------|-------|\n| \"concise\", \"brief\", \"short\" | communication | verbosity | concise |\n| \"detailed\", \"thorough\" | communication | verbosity | detailed |\n| \"always confirm\" | communication | confirmation_threshold | always |\n| \"skip confirmations\" | communication | confirmation_threshold | never |\n| \"functional style\" | technical | code_style | functional |\n| \"OOP style\" | technical | code_style | oop |\n| \"prefer React\" | technical | preferred_frameworks | [append \"react\"] |\n| \"prefer Express\" | technical | preferred_frameworks | [append \"express\"] |\n\n**Update and save**:\n```json\n// Update specific field\nprofile.preferences[category][field] = value;\nprofile.last_updated = \"{YYYY-MM-DD}\";\n\n// Write to file\nWrite(\".agent/.user-profile.json\", JSON.stringify(profile, null, 2));\n```\n\n**Confirm update**:\n```\nâœ… Profile updated!\n\nChanged: {category}.{field}\nFrom: {old_value}\nTo: {new_value}\n\nThis will affect future sessions.\n```\n\n### Step 3C: Auto-Learn Correction (If LEARN Action) [AUTO-TRIGGER]\n\n**IMPORTANT**: This action triggers automatically - no explicit skill invocation needed.\n\n**When to detect corrections** (monitor ALL conversations):\n- User says \"No, I meant...\", \"Actually...\", \"Not X, use Y\"\n- User repeats a correction they gave before\n- User shows frustration at repeated mistake\n\n**Trigger patterns to watch for**:\n```\n\"No, ...\" â†’ Direct correction\n\"I said ...\" â†’ Repeated instruction\n\"Actually, ...\" â†’ Clarification\n\"Not X, Y\" â†’ Substitution\n\"Always use ...\" â†’ Rule establishment\n\"Never do ...\" â†’ Anti-pattern\n\"I prefer ...\" â†’ Preference\n```\n\n**When detected**:\n```\nUser: \"No, I meant plural /users not /user\"\nâ†’ Correction detected: REST naming convention preference\nâ†’ Auto-save to profile (silent)\n```\n\n**Extract correction pattern**:\n```python\ncorrection = {\n  \"date\": \"{YYYY-MM-DD}\",\n  \"context\": \"{what we were doing}\",\n  \"original\": \"{what I said/generated}\",\n  \"corrected_to\": \"{what user wanted}\",\n  \"pattern\": \"{generalized rule}\",\n  \"confidence\": \"high|medium|low\"\n}\n```\n\n**Add to corrections list**:\n```json\nprofile.corrections.push(correction);\n\n// Keep last 20 corrections (rolling window)\nif (profile.corrections.length > 20) {\n  profile.corrections.shift();\n}\n```\n\n**Silently acknowledge** (don't interrupt flow):\n```\n[Internal log: Correction saved to profile]\n```\n\n**Sync to Knowledge Graph** (if enabled in config):\n```bash\n# Check if knowledge graph integration is enabled\nif [ -f \".agent/knowledge/graph.json\" ]; then\n  # Convert correction to memory\n  python3 skills/nav-graph/functions/correction_to_memory.py \\\n    --action convert-one \\\n    --correction-json '{\"pattern\": \"{pattern}\", \"context\": \"{context}\", \"confidence\": \"{confidence}\"}' \\\n    --graph-path .agent/knowledge/graph.json\n\n  # [Internal log: Correction synced to knowledge graph as memory]\nfi\n```\n\nThis creates a pitfall/pattern/learning memory in the knowledge graph, making the correction available via \"What do we know about X?\" queries.\n\n**Periodically surface learnings** (every 5 corrections):\n```\nğŸ“š I've learned from your corrections:\n- REST endpoints should use plural nouns\n- You prefer functional components over class components\n- TypeScript strict mode is required\n\nThese will be applied in future sessions.\n```\n\n### Step 3D: Reset Profile (If RESET Action)\n\n**Confirm before delete**:\n```\nâš ï¸  This will delete your Navigator profile:\n- {X} saved preferences\n- {Y} learned corrections\n- {Z} active goals\n\nThis cannot be undone.\n\nDelete profile? [y/N]\n```\n\n**If confirmed**:\n```bash\nrm .agent/.user-profile.json\n```\n\n**Confirm deletion**:\n```\nâœ… Profile deleted\n\nFuture sessions will start fresh.\nTo rebuild, use \"Save my preferences\" as you work.\n```\n\n### Step 4: Update Goals (Optional)\n\n**If user mentions a goal**:\n```\nUser: \"I'm working on the OAuth feature\"\nâ†’ Add/update goal in profile\n```\n\n**Goal structure**:\n```json\n{\n  \"name\": \"oauth-feature\",\n  \"started\": \"{YYYY-MM-DD}\",\n  \"context\": \"OAuth implementation for user login\",\n  \"status\": \"in-progress\",\n  \"last_mentioned\": \"{YYYY-MM-DD}\"\n}\n```\n\n**Goal cleanup** (auto-archive goals not mentioned in 7 days):\n```json\n// Move to completed if not mentioned recently\ngoals.forEach(goal => {\n  if (daysSince(goal.last_mentioned) > 7) {\n    goal.status = \"completed-or-abandoned\";\n  }\n});\n```\n\n### Step 5: Confirm Action\n\n**For explicit actions (SHOW, UPDATE, RESET)**:\nShow confirmation message.\n\n**For auto-learn (LEARN)**:\nSilent acknowledgment, periodic summaries.\n\n---\n\n## Profile Schema Reference\n\n```json\n{\n  \"version\": \"1.0\",\n  \"created\": \"2025-12-09\",\n  \"last_updated\": \"2025-12-09\",\n\n  \"preferences\": {\n    \"communication\": {\n      \"verbosity\": \"concise|balanced|detailed\",\n      \"confirmation_threshold\": \"always|high-stakes|never\",\n      \"explanation_style\": \"examples|theory|both\"\n    },\n    \"technical\": {\n      \"preferred_frameworks\": [\"react\", \"express\", \"etc\"],\n      \"code_style\": \"functional|oop|mixed\",\n      \"testing_preference\": \"tdd|bdd|manual\"\n    },\n    \"workflow\": {\n      \"autonomous_commits\": true|false,\n      \"auto_compact_threshold\": 70-90,\n      \"marker_before_risky\": true|false\n    }\n  },\n\n  \"corrections\": [\n    {\n      \"date\": \"2025-12-09\",\n      \"context\": \"creating API endpoint\",\n      \"original\": \"Created /user endpoint\",\n      \"corrected_to\": \"Should be /users (plural)\",\n      \"pattern\": \"REST endpoints use plural nouns\",\n      \"confidence\": \"high\"\n    }\n  ],\n\n  \"goals\": [\n    {\n      \"name\": \"oauth-feature\",\n      \"started\": \"2025-12-07\",\n      \"context\": \"OAuth implementation for user login\",\n      \"status\": \"in-progress\",\n      \"last_mentioned\": \"2025-12-09\"\n    }\n  ]\n}\n```\n\n---\n\n## Integration with Other Skills\n\n### nav-start (Session Start)\nLoads profile automatically:\n```markdown\n### Step 3.5: Load User Profile\n\nIf `.agent/.user-profile.json` exists:\n- Load preferences into context\n- Apply confirmation threshold\n- Note active goals\n- Show: \"Loaded preferences from profile\"\n```\n\n### nav-marker (Context Markers)\nPreserves profile reference:\n```markdown\n## Profile State\n- Preferences loaded: âœ…\n- Corrections this session: {count}\n- Goals active: {goal_names}\n```\n\n### All ToM Checkpoints\nRespect profile settings:\n```markdown\n// Before showing verification checkpoint\nif (profile.preferences.communication.confirmation_threshold === \"never\") {\n  // Skip verification\n} else if (profile.preferences.communication.confirmation_threshold === \"high-stakes\") {\n  // Only verify for complex operations\n}\n```\n\n---\n\n## Auto-Learn Triggers\n\n**Correction patterns to detect**:\n\n| User Pattern | Extracted Learning |\n|--------------|-------------------|\n| \"No, I meant...\" | Direct correction |\n| \"Actually, prefer...\" | Preference correction |\n| \"Not X, use Y\" | Substitution correction |\n| \"Always do X\" | Rule establishment |\n| \"Never do Y\" | Anti-pattern |\n| \"I like when you...\" | Positive preference |\n| \"Stop doing X\" | Negative preference |\n\n**Confidence scoring**:\n- **High**: Explicit correction with reasoning\n- **Medium**: Correction without explanation\n- **Low**: Implicit preference from behavior\n\n---\n\n## Privacy & Data\n\n**Profile is**:\n- Git-ignored (`.agent/.user-profile.json`)\n- Local only (not synced)\n- User-controlled (can delete anytime)\n- Session-persistent (survives context clears)\n\n**Profile does NOT store**:\n- Code snippets\n- File contents\n- Conversation history\n- Sensitive data\n\n---\n\n## Success Criteria\n\nProfile management succeeds when:\n- [ ] Profile loads at session start\n- [ ] Preferences affect behavior (verbosity, confirmations)\n- [ ] Corrections persist across sessions\n- [ ] Auto-learn captures patterns silently\n- [ ] Goals track user's current focus\n- [ ] Reset cleanly removes all data\n\n---\n\n## Best Practices\n\n**Good profile usage**:\n- \"Remember I prefer concise explanations\" (clear preference)\n- \"Save that I use functional components\" (specific)\n- \"Show my profile\" (verify what's stored)\n\n**Avoid**:\n- Storing sensitive information\n- Over-correcting (let auto-learn work)\n- Resetting frequently (defeats purpose)\n\n---\n\n**This skill enables bilateral Theory of Mind - Claude understanding you as well as you understanding Claude** ğŸ§ \n",
        "skills/nav-release/SKILL.md": "---\nname: nav-release\ndescription: Validate and release Navigator plugin to marketplace. Auto-invoke when user says \"release plugin\", \"publish navigator\", \"create release\", or \"deploy new version\".\nallowed-tools: Read, Bash, Grep, Glob, AskUserQuestion\nversion: 1.0.0\n---\n\n# Navigator Release Skill\n\nValidate plugin integrity and release to marketplace with all safety checks.\n\n## Why This Exists\n\nAfter v5.1.0 incident where nav-profile was referenced in plugin.json but never committed, causing install failures. This skill ensures:\n- All referenced skills exist and are committed\n- Version consistency across all files\n- Tag created AFTER all commits\n- Post-release verification\n\n## When to Invoke\n\n**Auto-invoke when**:\n- User says \"release plugin\", \"publish navigator\"\n- User says \"create release\", \"deploy new version\"\n- User says \"release vX.Y.Z\"\n\n**DO NOT invoke if**:\n- Just committing changes (no release)\n- Updating documentation only\n- Testing locally\n\n## Execution Steps\n\n### Step 1: Pre-Release Validation [CRITICAL]\n\n**Run validation script**:\n\n```bash\npython3 functions/release_validator.py --check-all\n```\n\nThis validates:\n1. All skills in plugin.json exist\n2. All skill files are committed (not untracked)\n3. Version consistency across files\n4. No uncommitted changes in skills/\n\n**If validation fails**: STOP and fix issues before proceeding.\n\n### Step 2: Display Validation Results\n\nShow validation summary:\n\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nNAVIGATOR RELEASE VALIDATION\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nSkills Check:\n  [x] nav-loop          âœ“ exists, committed\n  [x] nav-profile       âœ“ exists, committed\n  [x] nav-diagnose      âœ“ exists, committed\n  ...\n\nVersion Check:\n  plugin.json:      5.1.0 âœ“\n  marketplace.json: 5.1.0 âœ“\n  CLAUDE.md:        5.1.0 âœ“\n  README.md:        5.1.0 âœ“\n\nGit Status:\n  Uncommitted skills: 0 âœ“\n  Untracked skills:   0 âœ“\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nVALIDATION: PASSED\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n### Step 3: Confirm Version\n\n**Ask user to confirm version**:\n\n```\nReady to release Navigator vX.Y.Z\n\nThis will:\n1. Commit any pending changes\n2. Push to origin/main\n3. Create git tag vX.Y.Z\n4. Create GitHub release\n\nProceed? [Y/n]\n```\n\n### Step 4: Execute Release\n\n**If confirmed**, run release sequence:\n\n```bash\n# 1. Commit if needed\ngit add .\ngit commit -m \"chore(release): prepare vX.Y.Z\" || true\n\n# 2. Push to origin\ngit push origin main\n\n# 3. Create tag (AFTER push)\ngit tag -a vX.Y.Z -m \"Navigator vX.Y.Z: [description]\"\ngit push origin vX.Y.Z\n\n# 4. Create GitHub release\ngh release create vX.Y.Z --title \"Navigator vX.Y.Z\" --notes-file RELEASE-NOTES-vX.Y.Z.md\n```\n\n### Step 5: Post-Release Verification\n\n**Verify tag contains all skills**:\n\n```bash\npython3 functions/release_validator.py --verify-tag vX.Y.Z\n```\n\n**Clear local cache** (for testing):\n\n```bash\nrm -rf ~/.claude/plugins/cache/navigator-marketplace/\n```\n\n**Instruct user to test**:\n\n```\nRelease complete! To verify:\n\n1. Run: /plugin install navigator\n2. Check plugin list shows vX.Y.Z\n3. Verify no errors in plugin details\n\nIf errors occur, see: .agent/sops/deployment/plugin-release.md\n```\n\n---\n\n## Predefined Functions\n\n### functions/release_validator.py\n\nValidates plugin integrity before release:\n\n```bash\n# Check all skills exist and are committed\npython3 functions/release_validator.py --check-all\n\n# Verify specific version\npython3 functions/release_validator.py --check-version 5.1.0\n\n# Verify tag contents\npython3 functions/release_validator.py --verify-tag v5.1.0\n```\n\n---\n\n## Error Handling\n\n**Missing skill detected**:\n```\nâŒ VALIDATION FAILED\n\nMissing skills:\n  - skills/nav-profile/ (referenced in plugin.json but not found)\n\nFix: Create the skill or remove from plugin.json\n```\n\n**Uncommitted skills detected**:\n```\nâŒ VALIDATION FAILED\n\nUncommitted skills:\n  - skills/nav-loop/ (modified)\n  - skills/nav-profile/ (untracked)\n\nFix: git add skills/ && git commit -m \"Add missing skills\"\n```\n\n**Version mismatch detected**:\n```\nâŒ VALIDATION FAILED\n\nVersion mismatch:\n  plugin.json:      5.1.0\n  marketplace.json: 5.0.0  â† MISMATCH\n  CLAUDE.md:        5.1.0\n\nFix: Update marketplace.json to 5.1.0\n```\n\n---\n\n## Success Criteria\n\nRelease is successful when:\n- [ ] All skills validated (exist + committed)\n- [ ] Version consistent across all files\n- [ ] Git tag created after all commits\n- [ ] GitHub release published\n- [ ] Test installation succeeds (no errors)\n\n---\n\n## Quick Reference\n\n```bash\n# Full release with validation\n\"Release Navigator v5.2.0\"\n\n# Just validate (no release)\n\"Validate plugin for release\"\n\n# Fix after failed release\n\"Fix release tag v5.1.0\"\n```\n\n---\n\n## Related\n\n- **SOP**: `.agent/sops/deployment/plugin-release.md`\n- **Config**: `.claude-plugin/plugin.json`\n- **Marketplace**: `.claude-plugin/marketplace.json`\n",
        "skills/nav-simplify/SKILL.md": "---\nname: nav-simplify\ndescription: Simplify and refine code for clarity, consistency, and maintainability while preserving all functionality. Focuses on recently modified code. Auto-invoke after implementation skills or on-demand.\nallowed-tools: Read, Write, Edit, Bash, Glob, Grep\nversion: 1.0.0\nmodel: opus\n---\n\n# Navigator Code Simplification Skill\n\nSimplify recently modified code for clarity, consistency, and maintainability while preserving exact functionality. Based on Anthropic's internal code-simplifier pattern.\n\n## Core Principle\n\n**Clarity over brevity. Functionality preserved absolutely.**\n\nYou are an expert code simplification specialist. Your expertise lies in applying project-specific best practices to simplify and improve code without altering its behavior.\n\n## When to Invoke\n\n**Auto-invoke after**:\n- `backend-endpoint` skill completes\n- `frontend-component` skill completes\n- `database-migration` skill completes\n- Any implementation task with code changes\n\n**Manual invoke when user says**:\n- \"simplify this code\"\n- \"review for clarity\"\n- \"clean up recent changes\"\n- \"refactor for readability\"\n- \"simplify modified files\"\n\n**DO NOT invoke if**:\n- No code was modified (docs-only changes)\n- User explicitly says \"skip simplification\"\n- Files are configuration only (JSON, YAML)\n\n## Execution Steps\n\n### Step 1: Identify Modified Code\n\n**Option A: Git-based detection (preferred)**\n\n```bash\n# Get files modified in current session/commits\ngit diff --name-only HEAD~3 -- '*.ts' '*.tsx' '*.js' '*.jsx' '*.py' '*.go' '*.rs' 2>/dev/null || \\\ngit diff --name-only --cached -- '*.ts' '*.tsx' '*.js' '*.jsx' '*.py' '*.go' '*.rs' 2>/dev/null || \\\ngit diff --name-only -- '*.ts' '*.tsx' '*.js' '*.jsx' '*.py' '*.go' '*.rs'\n```\n\n**Option B: User-specified scope**\n\nIf user mentions specific files or directories, use those instead.\n\n**Option C: Recent conversation context**\n\nAnalyze conversation for files that were written/edited in this session.\n\n### Step 2: Load Simplification Configuration\n\nCheck for project-specific configuration:\n\n```bash\nif [ -f \".agent/.nav-config.json\" ]; then\n  cat .agent/.nav-config.json | grep -A 10 '\"simplification\"'\nfi\n```\n\nDefault configuration:\n```json\n{\n  \"simplification\": {\n    \"enabled\": true,\n    \"trigger\": \"manual\",\n    \"scope\": \"modified\",\n    \"model\": \"opus\",\n    \"skip_patterns\": [\"*.test.*\", \"*.spec.*\", \"*.md\", \"*.json\", \"*.yaml\"],\n    \"max_file_size\": 50000,\n    \"preserve_comments\": true\n  }\n}\n```\n\n### Step 3: Read Project Standards\n\n**Load from CLAUDE.md** (required):\n\n```\nRead(file_path: \"CLAUDE.md\")\n```\n\nExtract coding standards:\n- Preferred patterns (function vs arrow, explicit returns)\n- Naming conventions\n- Import ordering\n- Error handling patterns\n- Framework-specific guidelines\n\n### Step 4: Analyze Each File\n\nFor each modified file, analyze for simplification opportunities:\n\n**Complexity Indicators** (look for):\n- Deep nesting (> 3 levels)\n- Long functions (> 50 lines)\n- Redundant code patterns\n- Unclear variable names\n- Nested ternary operators\n- Over-abstraction\n- Dead code\n- Inconsistent patterns\n\n**Run analysis**:\n```bash\n# Use predefined function\npython3 \"$SKILL_BASE_DIR/scripts/code_analyzer.py\" --file \"$file\"\n```\n\n### Step 5: Apply Simplification Rules\n\n**Anthropic Simplification Rules**:\n\n1. **Preserve Functionality**: Never change what the code does - only how it does it. All original features, outputs, and behaviors must remain intact.\n\n2. **Apply Project Standards**: Follow CLAUDE.md coding standards:\n   - Use ES modules with proper import sorting\n   - Prefer `function` keyword over arrow functions (if project standard)\n   - Use explicit return type annotations\n   - Follow proper React/Vue component patterns\n   - Use proper error handling patterns\n   - Maintain consistent naming conventions\n\n3. **Enhance Clarity**:\n   - Reduce unnecessary complexity and nesting\n   - Eliminate redundant code and abstractions\n   - Improve readability through clear names\n   - Consolidate related logic\n   - Remove unnecessary comments that describe obvious code\n   - **AVOID nested ternary operators** - use switch/if-else\n   - **Choose clarity over brevity** - explicit > compact\n\n4. **Maintain Balance** - Avoid over-simplification that could:\n   - Reduce code clarity or maintainability\n   - Create overly clever solutions\n   - Combine too many concerns\n   - Remove helpful abstractions\n   - Prioritize \"fewer lines\" over readability\n   - Make code harder to debug or extend\n\n### Step 6: Generate Simplified Code\n\nFor each file with improvements:\n\n1. Read current file content\n2. Apply simplification rules\n3. Verify functionality unchanged (logic review)\n4. Generate diff or replacement\n\n**Output format**:\n```\nğŸ“ Simplifying: {filename}\n\nChanges:\n- [Line X] Flattened nested ternary to switch statement\n- [Line Y] Extracted repeated logic to helper function\n- [Line Z] Renamed `x` to `userCount` for clarity\n\nDiff:\n```diff\n- const result = a ? (b ? c : d) : e;\n+ let result;\n+ if (a && b) {\n+   result = c;\n+ } else if (a) {\n+   result = d;\n+ } else {\n+   result = e;\n+ }\n```\n```\n\n### Step 7: Apply Changes\n\nIf user approves (or auto mode enabled):\n\n```\nEdit(\n  file_path: \"{file}\",\n  old_string: \"{original}\",\n  new_string: \"{simplified}\"\n)\n```\n\n### Step 8: Generate Summary\n\n```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘                                                      â•‘\nâ•‘  ğŸ§¹ Code Simplification Complete                     â•‘\nâ•‘                                                      â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ“Š Summary:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nFiles analyzed:    {N}\nFiles simplified:  {M}\nChanges applied:   {X}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ“ Changes by category:\nâ€¢ Clarity improvements:     {count}\nâ€¢ Nesting reduction:        {count}\nâ€¢ Naming improvements:      {count}\nâ€¢ Pattern consolidation:    {count}\n\nâœ… Functionality: Preserved (no behavior changes)\nâœ… Standards: Applied from CLAUDE.md\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n## Predefined Functions\n\n### scripts/code_analyzer.py\n\n**Purpose**: Analyze code file for simplification opportunities\n\n**Arguments**:\n- `--file`: Path to file to analyze\n- `--standards`: Path to CLAUDE.md (optional)\n- `--output`: Output format (json, text)\n\n**Returns**:\n```json\n{\n  \"file\": \"src/utils/auth.ts\",\n  \"issues\": [\n    {\n      \"line\": 45,\n      \"type\": \"nested_ternary\",\n      \"severity\": \"medium\",\n      \"suggestion\": \"Convert to switch or if-else\"\n    },\n    {\n      \"line\": 78,\n      \"type\": \"deep_nesting\",\n      \"severity\": \"high\",\n      \"depth\": 5,\n      \"suggestion\": \"Extract to helper function\"\n    }\n  ],\n  \"complexity_score\": 7.2,\n  \"recommended_actions\": 3\n}\n```\n\n### scripts/simplification_rules.py\n\n**Purpose**: Apply project-specific simplification rules\n\n**Arguments**:\n- `--file`: Path to file\n- `--claude-md`: Path to CLAUDE.md for project standards\n- `--dry-run`: Preview changes without applying\n\n**Returns**: Simplified code with change annotations\n\n### scripts/change_reporter.py\n\n**Purpose**: Generate human-readable change summary\n\n**Arguments**:\n- `--changes`: JSON array of changes made\n- `--format`: Output format (markdown, text, json)\n\n**Returns**: Formatted change report\n\n## Configuration Options\n\nAdd to `.agent/.nav-config.json`:\n\n```json\n{\n  \"simplification\": {\n    \"enabled\": true,\n    \"trigger\": \"post-implementation\",\n    \"scope\": \"modified\",\n    \"model\": \"opus\",\n    \"skip_patterns\": [\"*.test.*\", \"*.spec.*\"],\n    \"max_file_size\": 50000,\n    \"auto_apply\": false,\n    \"preserve_comments\": true,\n    \"rules\": {\n      \"avoid_nested_ternary\": true,\n      \"max_nesting_depth\": 3,\n      \"max_function_length\": 50,\n      \"prefer_explicit_returns\": true,\n      \"consolidate_imports\": true\n    }\n  }\n}\n```\n\n**Options**:\n- `enabled`: Enable/disable simplification\n- `trigger`: \"manual\" | \"post-implementation\" | \"pre-commit\"\n- `scope`: \"modified\" | \"staged\" | \"all\"\n- `model`: Preferred model for simplification (opus recommended)\n- `skip_patterns`: Glob patterns to skip\n- `max_file_size`: Skip files larger than this (bytes)\n- `auto_apply`: Apply changes without confirmation\n- `preserve_comments`: Keep meaningful comments\n- `rules`: Specific simplification rules\n\n## Integration Points\n\n### Autonomous Completion\n\nWhen integrated with autonomous completion protocol:\n\n```\nImplement â†’ Verify â†’ **Simplify** â†’ Commit â†’ Archive\n```\n\nSimplification runs automatically after verification passes, before commit.\n\n### Multi-Claude Workflow\n\nAs dedicated role:\n```\nOrchestrator â†’ Implementer â†’ Tester â†’ **Simplifier** â†’ Reviewer â†’ Documenter\n```\n\nSimplifier receives implementation marker, outputs simplified code marker.\n\n### Loop Mode\n\nAdded to VERIFY phase completion indicators:\n```\nCompletion Indicators:\n  [x] Tests passing\n  [x] Code simplified  â† Added\n  [ ] Documentation updated\n```\n\n## Examples\n\n### Example 1: Nested Ternary Simplification\n\n**Before**:\n```typescript\nconst status = isLoading ? 'loading' : hasError ? 'error' : isSuccess ? 'success' : 'idle';\n```\n\n**After**:\n```typescript\nfunction getStatus(isLoading: boolean, hasError: boolean, isSuccess: boolean): string {\n  if (isLoading) return 'loading';\n  if (hasError) return 'error';\n  if (isSuccess) return 'success';\n  return 'idle';\n}\n\nconst status = getStatus(isLoading, hasError, isSuccess);\n```\n\n### Example 2: Deep Nesting Reduction\n\n**Before**:\n```typescript\nfunction processUser(user: User) {\n  if (user) {\n    if (user.isActive) {\n      if (user.hasPermission) {\n        if (user.email) {\n          sendEmail(user.email);\n        }\n      }\n    }\n  }\n}\n```\n\n**After**:\n```typescript\nfunction processUser(user: User) {\n  if (!user?.isActive) return;\n  if (!user.hasPermission) return;\n  if (!user.email) return;\n\n  sendEmail(user.email);\n}\n```\n\n### Example 3: Unclear Naming\n\n**Before**:\n```typescript\nconst x = users.filter(u => u.a && !u.d).map(u => u.n);\n```\n\n**After**:\n```typescript\nconst activeUserNames = users\n  .filter(user => user.isActive && !user.isDeleted)\n  .map(user => user.name);\n```\n\n## Error Handling\n\n**File too large**:\n```\nâš ï¸  Skipping {filename} ({size} bytes)\n    Exceeds max_file_size limit ({limit} bytes)\n\n    Override with: \"simplify {filename} --force\"\n```\n\n**No changes needed**:\n```\nâœ… {filename} - Already follows best practices\n   No simplification opportunities found.\n```\n\n**Functionality risk detected**:\n```\nâš ï¸  Potential behavior change detected in {filename}\n\n    Line {N}: Changing conditional logic\n\n    Review required before applying:\n    [Show diff]\n\n    Apply this change? [y/N]:\n```\n\n## Success Criteria\n\nSimplification is successful when:\n- [ ] All modified files analyzed\n- [ ] Functionality preserved (verified)\n- [ ] Project standards applied (from CLAUDE.md)\n- [ ] No nested ternaries remain\n- [ ] Nesting depth â‰¤ 3 levels\n- [ ] Clear variable/function names\n- [ ] Change summary generated\n\n## Notes\n\n- **Model preference**: Opus recommended for quality judgment\n- **Scope default**: Only recently modified files (avoid churn)\n- **Skip tests**: Test files usually follow different patterns\n- **Preserve intent**: Comments explaining \"why\" should be kept\n- **No over-optimization**: Clarity > minimal lines\n\nThis skill integrates Anthropic's internal code-simplifier pattern into Navigator's workflow, ensuring code quality before commit.\n",
        "skills/nav-skill-creator/SKILL.md": "---\nname: nav-skill-creator\ndescription: Analyze codebase patterns and create custom skills for repetitive workflows. Use when project needs automation or pattern enforcement. Auto-invoke when user says \"create a skill for...\", \"automate this workflow\", or \"we keep doing X manually\".\nallowed-tools: Read, Write, Edit, Grep, Glob, Bash, Task\nversion: 1.0.0\n---\n\n# Navigator Skill Creator\n\nCreate project-specific skills by analyzing codebase patterns and automating repetitive workflows.\n\n## When to Invoke\n\nAuto-invoke when user mentions:\n- \"Create a skill for [pattern]\"\n- \"Automate this workflow\"\n- \"We keep doing X manually\"\n- \"Enforce this pattern\"\n- \"Generate boilerplate for [feature type]\"\n- \"We need consistency for [task type]\"\n\n## What This Does\n\n1. Analyzes codebase to understand project patterns\n2. Identifies best practices from existing code\n3. Generates skill with:\n   - Auto-invocation triggers\n   - Predefined functions\n   - Templates\n   - Examples\n4. Tests the generated skill\n5. Documents the new skill\n\n## Execution Steps\n\n### Step 1: Understand Skill Request\n\nAsk clarifying questions:\n- What pattern/workflow to automate?\n- What triggers should invoke this skill?\n- What output format is expected?\n- Are there existing examples in the codebase?\n\n**Example dialogue**:\n```\nUser: \"Create a skill for adding React components\"\nAssistant: \"I'll analyze your codebase to understand React component patterns.\n- What directory are components in?\n- Do you use TypeScript or JavaScript?\n- Do you want tests generated automatically?\n- Are there style files (CSS/SCSS) per component?\"\n```\n\n### Step 2: Analyze Codebase Patterns\n\n**Use Task agent to explore** (saves 60-80% tokens):\n```\nUse Task agent with subagent_type=Explore:\n\"Find existing [pattern type] in codebase:\n - Locate all [files matching pattern]\n - Identify common structure\n - Extract best practices\n - Find configuration files\n - Return summary of findings\"\n```\n\n**What to look for**:\n- File naming conventions (kebab-case, PascalCase, etc.)\n- Directory structure patterns\n- Import/export patterns\n- Testing patterns\n- Configuration patterns\n- Documentation patterns\n\n**Example for React components**:\n```\nTask agent finds:\n- Components in src/components/\n- PascalCase naming (UserProfile.tsx)\n- Co-located tests (UserProfile.test.tsx)\n- Props interfaces defined above component\n- Export default at bottom\n```\n\n### Step 3: Design Skill Structure\n\n**Determine skill metadata**:\n```yaml\nname: [project]-[pattern-type]\ndescription: [When to auto-invoke + what it does]\nallowed-tools: [Read, Write, Edit, Grep, Glob, Bash, Task]\nversion: 1.0.0\n```\n\n**Plan directory structure**:\n```\nskills/[skill-name]/\nâ”œâ”€â”€ SKILL.md              # Main instructions\nâ”œâ”€â”€ functions/            # Python helper scripts\nâ”‚   â””â”€â”€ [generator].py\nâ”œâ”€â”€ examples/             # Reference implementations\nâ”‚   â””â”€â”€ [example].[ext]\nâ””â”€â”€ templates/            # Output format templates\n    â””â”€â”€ [template].[ext]\n```\n\n**Design predefined functions**:\n- What repetitive logic can be automated?\n- What validation should be enforced?\n- What formatting ensures consistency?\n\n**Example functions for frontend-component skill**:\n- `component_generator.py` - Generate component boilerplate\n- `test_generator.py` - Generate test file\n- `style_generator.py` - Generate style file\n- `name_validator.py` - Validate component naming\n\n### Step 4: Generate Skill Files\n\n**4.1 Create SKILL.md**\n\n```markdown\n---\nname: [skill-name]\ndescription: [Auto-invocation triggers + purpose]\nallowed-tools: [List of tools]\nversion: 1.0.0\n---\n\n# [Skill Title]\n\n[Brief description of what this skill does]\n\n## When to Invoke\n\nAuto-invoke when user says:\n- \"[trigger phrase 1]\"\n- \"[trigger phrase 2]\"\n- \"[trigger phrase 3]\"\n\n## What This Does\n\n1. [Step 1 overview]\n2. [Step 2 overview]\n3. [Step 3 overview]\n\n## Execution Steps\n\n### Step 1: [Step Name]\n\n[Detailed instructions for this step]\n\n**Use predefined function**: `functions/[function-name].py`\n```\n\n**4.2 Create Predefined Functions**\n\n```python\n# functions/[generator].py\n\ndef generate_[output](name, config):\n    \"\"\"\n    Generate [output type] based on project patterns.\n\n    Args:\n        name: [Description]\n        config: [Description]\n\n    Returns:\n        [output]: [Description]\n    \"\"\"\n    # Implementation based on codebase analysis\n    pass\n```\n\n**4.3 Create Examples**\n\n```\nexamples/\nâ””â”€â”€ [reference-implementation].[ext]\n    - Real example from codebase (best practice)\n    - Shows expected structure\n    - Demonstrates conventions\n```\n\n**4.4 Create Templates**\n\n```\ntemplates/\nâ””â”€â”€ [output-template].[ext]\n    - Skeleton structure with placeholders\n    - ${VAR_NAME} for substitution\n    - Comments explaining sections\n```\n\n### Step 5: Test Generated Skill\n\n**5.1 Verify skill loads**:\n```bash\n# In project root\ngrep -r \"name: [skill-name]\" skills/\n```\n\n**5.2 Test auto-invocation**:\n```\nIn Claude Code conversation:\n\"[Use one of the auto-invoke trigger phrases]\"\n\nExpected: Skill should be detected and loaded\n```\n\n**5.3 Test execution**:\n- Run through skill steps\n- Verify functions work correctly\n- Check output matches template\n- Validate generated code follows patterns\n\n**5.4 Iterate if needed**:\n- Fix function bugs\n- Improve templates\n- Add missing examples\n- Clarify instructions\n\n### Step 6: Document New Skill\n\n**Update project documentation**:\n\n1. **CLAUDE.md** - Add to skills section:\n```markdown\n#### [Skill Name]\n**Auto-invoke**: \"[trigger phrase]\"\n**Purpose**: [What it does]\n**Generates**: [Output type]\n```\n\n2. **README.md** - Add to skills list:\n```markdown\n- **[skill-name]**: [Brief description]\n```\n\n3. **.agent/system/plugin-patterns.md** - Add to skill registry:\n```markdown\n### [Skill Name]\n**Created**: [Date]\n**Pattern**: [What pattern it enforces]\n**Functions**: [List of predefined functions]\n```\n\n**Register in plugin.json** (if applicable):\n```json\n{\n  \"skills\": [\n    {\n      \"name\": \"[skill-name]\",\n      \"path\": \"skills/[skill-name]/SKILL.md\"\n    }\n  ]\n}\n```\n\n---\n\n## Example Workflows\n\n### Example 1: Create Skill for Adding API Endpoints\n\n**User**: \"Create a skill for adding REST API endpoints\"\n\n**Execution**:\n\n1. **Clarify**:\n   - Which framework? (Express, Fastify, etc.)\n   - Where are routes defined?\n   - Authentication required?\n   - Testing strategy?\n\n2. **Analyze** (via Task agent):\n   ```\n   Find existing API endpoints:\n   - Routes in api/routes/\n   - Controllers in api/controllers/\n   - Middleware in api/middleware/\n   - Tests in tests/api/\n   ```\n\n3. **Design**:\n   ```yaml\n   name: backend-api-endpoint\n   description: Add new REST API endpoint following project conventions. Use when user says \"add endpoint\", \"create API\", or \"new route\".\n   allowed-tools: Read, Write, Edit, Grep, Glob, Bash\n   ```\n\n4. **Generate**:\n   ```\n   skills/backend-api-endpoint/\n   â”œâ”€â”€ SKILL.md\n   â”œâ”€â”€ functions/\n   â”‚   â”œâ”€â”€ endpoint_generator.py\n   â”‚   â””â”€â”€ route_validator.py\n   â”œâ”€â”€ examples/\n   â”‚   â””â”€â”€ user-endpoint.ts\n   â””â”€â”€ templates/\n       â”œâ”€â”€ route-template.ts\n       â””â”€â”€ test-template.spec.ts\n   ```\n\n5. **Test**:\n   ```\n   User: \"Add a POST /posts endpoint\"\n   Skill: Auto-invoked, generates route + controller + test\n   Verify: Files follow project conventions\n   ```\n\n6. **Document**: Update CLAUDE.md, README.md, plugin-patterns.md\n\n### Example 2: Create Skill for React Components\n\n**User**: \"Automate creating new React components\"\n\n**Execution**:\n\n1. **Clarify**:\n   - TypeScript or JavaScript?\n   - Functional or class components?\n   - Style approach? (CSS modules, styled-components, etc.)\n   - Test library? (Jest, React Testing Library, etc.)\n\n2. **Analyze** (via Task agent):\n   ```\n   Find React components:\n   - Components in src/components/\n   - PascalCase naming\n   - TypeScript (.tsx)\n   - CSS modules (.module.css)\n   - Tests with RTL\n   ```\n\n3. **Design**:\n   ```yaml\n   name: frontend-component\n   description: Create new React component with TypeScript, styles, and tests. Use when user says \"create component\", \"add component\", or \"new React component\".\n   allowed-tools: Read, Write, Edit, Grep, Glob, Bash\n   ```\n\n4. **Generate**:\n   ```\n   skills/frontend-component/\n   â”œâ”€â”€ SKILL.md\n   â”œâ”€â”€ functions/\n   â”‚   â”œâ”€â”€ component_generator.py\n   â”‚   â”œâ”€â”€ test_generator.py\n   â”‚   â””â”€â”€ style_generator.py\n   â”œâ”€â”€ examples/\n   â”‚   â”œâ”€â”€ Button.tsx\n   â”‚   â””â”€â”€ Button.test.tsx\n   â””â”€â”€ templates/\n       â”œâ”€â”€ component-template.tsx\n       â”œâ”€â”€ test-template.test.tsx\n       â””â”€â”€ style-template.module.css\n   ```\n\n5. **Test**:\n   ```\n   User: \"Create a UserProfile component\"\n   Skill: Auto-invoked, generates component + test + styles\n   Verify: Props interface, exports, naming correct\n   ```\n\n6. **Document**: Update project docs\n\n---\n\n## Output Format\n\n**After generating skill, show summary**:\n\n```\nâœ… Skill Created: [skill-name]\n\nStructure:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“ skills/[skill-name]/\n   â”œâ”€â”€ SKILL.md\n   â”œâ”€â”€ functions/\n   â”‚   â””â”€â”€ [N functions created]\n   â”œâ”€â”€ examples/\n   â”‚   â””â”€â”€ [N examples added]\n   â””â”€â”€ templates/\n       â””â”€â”€ [N templates created]\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nAuto-Invocation Triggers:\n- \"[trigger 1]\"\n- \"[trigger 2]\"\n- \"[trigger 3]\"\n\nNext Steps:\n1. Test the skill: \"[example trigger phrase]\"\n2. Iterate if needed\n3. Documentation updated\n\nTry it now: \"[example usage]\"\n```\n\n---\n\n## Best Practices\n\n### Pattern Analysis\n- Use Task agent for codebase exploration (saves 60-80% tokens)\n- Look at 3-5 examples minimum (find patterns vs outliers)\n- Identify conventions explicitly followed\n- Note edge cases in comments\n\n### Skill Design\n- Keep skills focused (one pattern per skill)\n- Clear auto-invocation triggers (3-5 phrases)\n- Minimal tools needed (add only what's required)\n- Progressive disclosure (details in functions, not main instructions)\n\n### Function Creation\n- One function = one responsibility\n- Type hints and docstrings required\n- Handle errors gracefully\n- Return structured data (not print statements)\n\n### Template Design\n- Use clear placeholders (${VAR_NAME})\n- Include comments explaining sections\n- Follow project style guide\n- Provide sensible defaults\n\n### Testing\n- Test with real project context\n- Verify auto-invocation works\n- Check output against best practices\n- Iterate based on actual usage\n\n---\n\n## Common Patterns to Automate\n\n### Backend Patterns\n- REST API endpoints\n- GraphQL resolvers\n- Database migrations\n- Background jobs\n- Middleware functions\n- Authentication guards\n\n### Frontend Patterns\n- React/Vue/Svelte components\n- Redux/Vuex store modules\n- API client functions\n- Form validation schemas\n- Route definitions\n- Style component creation\n\n### Infrastructure Patterns\n- Docker service configs\n- CI/CD pipeline steps\n- Deployment scripts\n- Environment configs\n- Monitoring setup\n\n### Documentation Patterns\n- API documentation\n- Component documentation\n- Architecture decision records (ADRs)\n- Runbook entries\n- Changelog entries\n\n---\n\n## Troubleshooting\n\n### Skill Not Auto-Invoking\n\n**Problem**: Skill created but doesn't trigger automatically\n\n**Solutions**:\n1. Check description has clear trigger phrases\n2. Verify `plugin.json` includes skill registration\n3. Reload Claude Code to refresh skill index\n4. Test with exact trigger phrase from description\n\n### Functions Not Executing\n\n**Problem**: Predefined functions throw errors\n\n**Solutions**:\n1. Check Python syntax is valid\n2. Verify function imports are correct\n3. Test function independently first\n4. Check error messages in execution logs\n\n### Templates Not Matching Output\n\n**Problem**: Generated code doesn't match project conventions\n\n**Solutions**:\n1. Re-analyze codebase for missed patterns\n2. Update templates with correct structure\n3. Add more examples showing variations\n4. Validate against linter/formatter\n\n### Skill Too Broad\n\n**Problem**: Skill tries to do too much\n\n**Solutions**:\n1. Split into multiple focused skills\n2. Remove optional features to separate skills\n3. Keep core pattern simple\n4. Add extensions as separate skills\n\n---\n\n## Success Criteria\n\n**This skill succeeds when**:\n- [ ] New skill auto-invokes correctly\n- [ ] Generated output follows project conventions\n- [ ] Functions execute without errors\n- [ ] Templates produce valid code\n- [ ] Examples are clear and relevant\n- [ ] Documentation is updated\n- [ ] Skill saves time vs manual work\n\n---\n\n**The skill-creator is Navigator's self-improving engine - it learns your patterns and automates them** ğŸ”„",
        "skills/nav-skill-creator/examples/example-generated-skill.md": "---\nname: example-feature-generator\ndescription: Generate boilerplate for new features following project conventions. Use when user says \"create feature\", \"add feature\", or \"new feature scaffolding\".\nallowed-tools: Read, Write, Edit, Grep, Glob, Bash\nversion: 1.0.0\n---\n\n# Example Feature Generator\n\nThis is an example of a generated skill created by nav-skill-creator.\n\n## When to Invoke\n\nAuto-invoke when user says:\n- \"Create a new feature\"\n- \"Add feature scaffolding\"\n- \"Generate feature boilerplate\"\n\n## What This Does\n\n1. Asks for feature name and type\n2. Analyzes existing features for patterns\n3. Generates feature files following project conventions\n4. Creates tests and documentation\n\n## Execution Steps\n\n### Step 1: Gather Feature Requirements\n\nAsk user:\n- Feature name (kebab-case)\n- Feature type (API, UI, background job, etc.)\n- Dependencies needed\n- Testing requirements\n\n### Step 2: Analyze Existing Patterns\n\nUse Task agent to explore codebase:\n```\n\"Find existing features similar to [feature-type]:\n - Locate feature files\n - Identify structure patterns\n - Extract naming conventions\n - Find test patterns\"\n```\n\n### Step 3: Generate Feature Files\n\nUse predefined function: `functions/feature_generator.py`\n\n```python\n# Generates feature structure based on analysis\ngenerate_feature(name, feature_type, config)\n```\n\nCreates:\n- Feature implementation file\n- Test file\n- Configuration file (if needed)\n- Documentation stub\n\n### Step 4: Validate Generated Files\n\nCheck:\n- [ ] Files follow naming conventions\n- [ ] Imports are correct\n- [ ] Tests are generated\n- [ ] Documentation is created\n\n### Step 5: Show Summary\n\nDisplay created files and next steps for user.\n\n---\n\n## Output Format\n\n```\nâœ… Feature Created: [feature-name]\n\nFiles generated:\n- features/[feature-name]/index.ts\n- features/[feature-name]/[feature-name].test.ts\n- features/[feature-name]/README.md\n\nNext steps:\n1. Implement feature logic in index.ts\n2. Add test cases in [feature-name].test.ts\n3. Document usage in README.md\n```\n\n---\n\n**This is an example - actual generated skills will vary based on project patterns**\n",
        "skills/nav-skill-creator/templates/skill-template.md": "---\nname: ${SKILL_NAME}\ndescription: ${DESCRIPTION}\nallowed-tools: ${ALLOWED_TOOLS}\nversion: 1.0.0\n---\n\n# ${SKILL_TITLE}\n\n${BRIEF_DESCRIPTION}\n\n## When to Invoke\n\nAuto-invoke when user says:\n- \"${TRIGGER_1}\"\n- \"${TRIGGER_2}\"\n- \"${TRIGGER_3}\"\n\n## What This Does\n\n1. ${STEP_1_OVERVIEW}\n2. ${STEP_2_OVERVIEW}\n3. ${STEP_3_OVERVIEW}\n\n## Execution Steps\n\n### Step 1: ${STEP_1_NAME}\n\n${STEP_1_INSTRUCTIONS}\n\n**Use predefined function** (if applicable): `functions/${FUNCTION_1_NAME}.py`\n\n### Step 2: ${STEP_2_NAME}\n\n${STEP_2_INSTRUCTIONS}\n\n**Use predefined function** (if applicable): `functions/${FUNCTION_2_NAME}.py`\n\n### Step 3: ${STEP_3_NAME}\n\n${STEP_3_INSTRUCTIONS}\n\n---\n\n## Example Workflows\n\n### Example 1: ${EXAMPLE_1_TITLE}\n\n**User**: \"${EXAMPLE_1_USER_INPUT}\"\n\n**Execution**:\n\n1. ${EXAMPLE_1_STEP_1}\n2. ${EXAMPLE_1_STEP_2}\n3. ${EXAMPLE_1_STEP_3}\n\n**Output**:\n```\n${EXAMPLE_1_OUTPUT}\n```\n\n---\n\n## Output Format\n\n**After completing task, show summary**:\n\n```\nâœ… ${SUCCESS_MESSAGE}\n\n${OUTPUT_SUMMARY}\n\nNext Steps:\n1. ${NEXT_STEP_1}\n2. ${NEXT_STEP_2}\n3. ${NEXT_STEP_3}\n```\n\n---\n\n## Best Practices\n\n### ${BEST_PRACTICE_CATEGORY_1}\n- ${BEST_PRACTICE_1}\n- ${BEST_PRACTICE_2}\n- ${BEST_PRACTICE_3}\n\n### ${BEST_PRACTICE_CATEGORY_2}\n- ${BEST_PRACTICE_4}\n- ${BEST_PRACTICE_5}\n- ${BEST_PRACTICE_6}\n\n---\n\n## Troubleshooting\n\n### ${PROBLEM_1}\n\n**Problem**: ${PROBLEM_1_DESCRIPTION}\n\n**Solutions**:\n1. ${SOLUTION_1_1}\n2. ${SOLUTION_1_2}\n3. ${SOLUTION_1_3}\n\n### ${PROBLEM_2}\n\n**Problem**: ${PROBLEM_2_DESCRIPTION}\n\n**Solutions**:\n1. ${SOLUTION_2_1}\n2. ${SOLUTION_2_2}\n\n---\n\n## Success Criteria\n\n**This skill succeeds when**:\n- [ ] ${SUCCESS_CRITERION_1}\n- [ ] ${SUCCESS_CRITERION_2}\n- [ ] ${SUCCESS_CRITERION_3}\n- [ ] ${SUCCESS_CRITERION_4}\n\n---\n\n**${CLOSING_STATEMENT}**\n",
        "skills/nav-sop/SKILL.md": "---\nname: nav-sop\ndescription: Create Standard Operating Procedures after solving novel issues, establishing patterns, or documenting workflows. Use when user says \"document this solution\", \"save this for next time\", \"create SOP\".\nallowed-tools: Read, Write, Bash\nversion: 1.0.0\n---\n\n# Navigator SOP Creator Skill\n\nCreate Standard Operating Procedures (SOPs) - reusable documentation for processes, integrations, debugging solutions, and workflows.\n\n## When to Invoke\n\nInvoke this skill when the user:\n- Says \"document this solution\", \"save this for next time\"\n- Says \"create SOP\", \"make this reusable\"\n- Solves a novel issue and mentions \"don't want to hit this again\"\n- Sets up integration and says \"document the setup\"\n- Establishes pattern and mentions \"team should follow this\"\n\n**DO NOT invoke** if:\n- Creating task documentation (use nav-task skill)\n- Updating architecture docs (different purpose)\n- Simple bug fix with no reusable pattern\n\n## Execution Steps\n\n### Step 1: Determine SOP Category\n\nAsk user which category (or infer from context):\n\n**Categories**:\n1. **integrations** - Third-party service setups\n2. **debugging** - Common issues & solutions\n3. **development** - Dev workflows, patterns\n4. **deployment** - Deploy procedures, CI/CD\n\n**Examples**:\n- \"How to set up Stripe webhooks\" â†’ `integrations/`\n- \"Fixing CORS errors\" â†’ `debugging/`\n- \"Testing authenticated routes\" â†’ `development/`\n- \"Deploy to production\" â†’ `deployment/`\n\n### Step 2: Determine SOP Name\n\n**If user provided name**:\n- Use their name (sanitize: lowercase, hyphens)\n- Example: \"Stripe Payment Setup\" â†’ \"stripe-payment-setup\"\n\n**If no name provided**:\n- Generate from context: `{service}-{action}`\n- Example: \"github-oauth-integration\"\n- Example: \"cors-proxy-errors\"\n\n### Step 3: Check if SOP Already Exists\n\nCheck existing SOPs in category:\n\n```bash\nls .agent/sops/{category}/*.md 2>/dev/null\n```\n\n**If similar SOP exists**:\n```\nâš ï¸  Similar SOP found:\n   .agent/sops/{category}/{similar-name}.md\n\nOptions:\n1. Read existing SOP (don't duplicate)\n2. Update existing SOP (add to it)\n3. Create new SOP (different enough)\n\nYour choice [1-3]:\n```\n\n### Step 4: Generate SOP Content\n\nCreate SOP document from conversation:\n\n```markdown\n# {SOP Title}\n\n**Category**: {integrations|debugging|development|deployment}\n**Created**: {YYYY-MM-DD}\n**Last Updated**: {YYYY-MM-DD}\n\n---\n\n## Context\n\n**When to use this SOP**:\n[Describe the scenario where this applies]\n\n**Problem it solves**:\n[What issue does this address?]\n\n**Prerequisites**:\n- [Requirement 1]\n- [Requirement 2]\n\n---\n\n## The Problem\n\n### Symptoms\n[What does the issue look like?]\n- Error message: `{specific error}`\n- Behavior: [Unexpected behavior]\n- Impact: [What breaks]\n\n### Root Cause\n[Why does this happen? Technical explanation]\n\n---\n\n## The Solution\n\n### Step 1: {Action}\n\n**Do this**:\n```bash\n# Command or code\nnpm install stripe\n```\n\n**Why**:\n[Explanation of what this accomplishes]\n\n**Expected output**:\n```\n+ stripe@12.0.0\nadded 1 package\n```\n\n### Step 2: {Next Action}\n\n**Do this**:\n```typescript\n// Code example\nimport Stripe from 'stripe';\n\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY);\n```\n\n**Why**:\n[Explanation]\n\n**Configuration**:\nAdd to `.env`:\n```\nSTRIPE_SECRET_KEY=sk_test_...\nSTRIPE_WEBHOOK_SECRET=whsec_...\n```\n\n### Step 3: {Continue...}\n...\n\n---\n\n## Complete Example\n\n### Full Working Code\n\n**File**: `src/services/stripe.ts`\n```typescript\nimport Stripe from 'stripe';\n\nexport class StripeService {\n  private stripe: Stripe;\n\n  constructor() {\n    this.stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {\n      apiVersion: '2023-10-16',\n    });\n  }\n\n  async createPaymentIntent(amount: number) {\n    return await this.stripe.paymentIntents.create({\n      amount: amount * 100, // Convert to cents\n      currency: 'usd',\n    });\n  }\n}\n```\n\n**File**: `src/routes/webhook.ts`\n```typescript\nexport async function handleStripeWebhook(req: Request, res: Response) {\n  const sig = req.headers['stripe-signature'];\n\n  try {\n    const event = stripe.webhooks.constructEvent(\n      req.body,\n      sig,\n      process.env.STRIPE_WEBHOOK_SECRET!\n    );\n\n    // Handle event\n    switch (event.type) {\n      case 'payment_intent.succeeded':\n        // Process successful payment\n        break;\n    }\n\n    res.json({ received: true });\n  } catch (err) {\n    res.status(400).send(`Webhook Error: ${err.message}`);\n  }\n}\n```\n\n---\n\n## Testing\n\n### Verify It Works\n\n**Test 1: Create payment intent**\n```bash\ncurl -X POST http://localhost:3000/api/create-payment \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"amount\": 10}'\n```\n\n**Expected result**:\n```json\n{\n  \"clientSecret\": \"pi_xxx_secret_yyy\"\n}\n```\n\n**Test 2: Webhook delivery**\n```bash\nstripe listen --forward-to localhost:3000/webhook\n```\n\n**Expected result**:\n```\nReady! You are using Stripe API Version [2023-10-16]\n```\n\n---\n\n## Prevention\n\n**How to avoid this issue in future**:\n- [Prevention strategy 1]\n- [Prevention strategy 2]\n\n**Red flags to watch for**:\n- [Warning sign 1]\n- [Warning sign 2]\n\n---\n\n## Troubleshooting\n\n### Issue: Webhook signature verification fails\n\n**Symptoms**:\n```\nError: No signatures found matching the expected signature\n```\n\n**Cause**: Webhook secret mismatch or body already parsed\n\n**Fix**:\n```typescript\n// Use raw body for webhook verification\napp.post('/webhook', express.raw({type: 'application/json'}), handleStripeWebhook);\n```\n\n### Issue: Payment amount incorrect\n\n**Symptoms**: Charged wrong amount\n\n**Cause**: Forgot to convert to cents\n\n**Fix**: Always multiply by 100 for Stripe amounts\n\n---\n\n## Related Documentation\n\n**Stripe Docs**:\n- [Payment Intents API](https://stripe.com/docs/api/payment_intents)\n- [Webhooks Guide](https://stripe.com/docs/webhooks)\n\n**Our Docs**:\n- Task: `.agent/tasks/TASK-04-stripe-integration.md`\n- System: `.agent/system/project-architecture.md` (payments section)\n\n**External**:\n- [Stripe Testing Cards](https://stripe.com/docs/testing)\n\n---\n\n## Maintenance Notes\n\n**Update when**:\n- Stripe API version changes\n- Payment flow changes\n- New webhook events added\n\n**Owner**: [Team or person responsible]\n\n---\n\n**Last Updated**: {YYYY-MM-DD}\n**Tested With**: Stripe API v2023-10-16, Node.js v18+\n```\n\n### Step 5: Save SOP File\n\nWrite to appropriate category:\n\n```\nWrite(\n  file_path: \".agent/sops/{category}/{name}.md\",\n  content: [generated SOP]\n)\n```\n\nFilename: `.agent/sops/{category}/{name}.md`\n\n### Step 6: Update Navigator Index\n\nEdit `.agent/DEVELOPMENT-README.md` to add SOP to index:\n\n```markdown\n## Standard Operating Procedures\n\n### Integrations\n- **{Service}**: `.agent/sops/integrations/{name}.md` - {One-line description}\n\n### Debugging\n- **{Issue}**: `.agent/sops/debugging/{name}.md` - {Description}\n\n### Development\n...\n\n### Deployment\n...\n```\n\n### Step 7: Link to Related Task (If Applicable)\n\nIf SOP came from specific task, add reference:\n\n**In task doc**:\n```markdown\n## Related SOPs\n\n- `.agent/sops/integrations/stripe-payment-setup.md`\n```\n\n**In SOP**:\n```markdown\n## Related Documentation\n\n- Task: `.agent/tasks/TASK-04-stripe-integration.md`\n```\n\nCross-linking helps discoverability.\n\n### Step 8: Confirm Success\n\nShow completion message:\n\n```\nâœ… SOP created successfully!\n\nTitle: {SOP Title}\nCategory: {category}\nFile: .agent/sops/{category}/{name}.md\nSize: {X} KB (~{Y} tokens)\n\nğŸ“š SOP includes:\n- Problem description & symptoms\n- Step-by-step solution\n- Complete code examples\n- Testing instructions\n- Troubleshooting guide\n\nğŸ”— Navigator index updated\n[If linked: Linked to TASK-{XX}]\n\nTo reference later:\nRead .agent/sops/{category}/{name}.md\n```\n\n## SOP Categories Explained\n\n### 1. integrations/\n**Purpose**: How to set up third-party services\n\n**Examples**:\n- `stripe-payment-setup.md`\n- `github-oauth-integration.md`\n- `sendgrid-email-config.md`\n- `redis-session-store.md`\n\n**Structure**: Setup steps + Configuration + Testing\n\n### 2. debugging/\n**Purpose**: How to solve common issues\n\n**Examples**:\n- `cors-proxy-errors.md`\n- `jwt-token-expiration.md`\n- `database-connection-timeout.md`\n- `build-errors-typescript.md`\n\n**Structure**: Symptoms + Root cause + Fix + Prevention\n\n### 3. development/\n**Purpose**: Development workflows & patterns\n\n**Examples**:\n- `testing-authenticated-routes.md`\n- `adding-new-api-endpoint.md`\n- `database-migration-workflow.md`\n- `component-testing-patterns.md`\n\n**Structure**: When to use + Steps + Example + Best practices\n\n### 4. deployment/\n**Purpose**: Deploy, CI/CD, infrastructure\n\n**Examples**:\n- `deploy-to-production.md`\n- `rollback-failed-deploy.md`\n- `setup-github-actions.md`\n- `environment-variables.md`\n\n**Structure**: Prerequisites + Steps + Verification + Rollback\n\n## Common Use Cases\n\n### After Solving Tricky Bug\n```\nUser: \"Finally fixed CORS issue, save this so we don't hit it again\"\nâ†’ Creates: .agent/sops/debugging/cors-proxy-errors.md\nâ†’ Captures: Error, root cause, fix, prevention\nâ†’ Team won't repeat mistake\n```\n\n### After Integration Setup\n```\nUser: \"Stripe webhooks working, document the setup\"\nâ†’ Creates: .agent/sops/integrations/stripe-webhooks.md\nâ†’ Captures: All config steps, code, testing\nâ†’ Next integration is copy-paste\n```\n\n### Establishing Team Pattern\n```\nUser: \"Document how we test protected routes\"\nâ†’ Creates: .agent/sops/development/testing-auth-routes.md\nâ†’ Captures: Pattern, examples, best practices\nâ†’ Team follows consistent approach\n```\n\n## Error Handling\n\n**Category directory doesn't exist**:\n```\nCreating category: .agent/sops/{category}/\nâœ… Directory created\n```\n\n**SOPs directory missing entirely**:\n```\nâŒ Navigator not initialized\n\nRun /nav:init to create .agent/ structure.\n```\n\n**Duplicate SOP name**:\n```\nâš ï¸  SOP already exists: {name}.md\n\nOptions:\n1. Read existing (don't duplicate)\n2. Update existing (add new info)\n3. Rename new SOP ({name}-v2.md)\n\nYour choice [1-3]:\n```\n\n## Success Criteria\n\nSOP creation is successful when:\n- [ ] SOP file created in correct category\n- [ ] Contains all required sections\n- [ ] Includes working code examples\n- [ ] Testing instructions provided\n- [ ] Navigator index updated\n- [ ] Linked to related task (if applicable)\n\n## Scripts\n\n**generate_sop.py**: Create SOP from conversation\n- Input: Conversation, category, name\n- Output: Formatted SOP markdown\n\n## Best Practices\n\n**Good SOP names**:\n- `stripe-payment-integration` (specific, descriptive)\n- `cors-proxy-configuration` (clear purpose)\n- `jwt-token-refresh` (explains what)\n\n**Bad SOP names**:\n- `fix` (too vague)\n- `integration` (not specific)\n- `sop1` (meaningless)\n\n**When to create SOPs**:\n- âœ… Solved novel issue (will happen again)\n- âœ… Set up integration (reusable process)\n- âœ… Established pattern (team should follow)\n- âœ… Complex workflow (needs documentation)\n- âŒ One-off bug (not reusable)\n- âŒ Obvious solution (don't over-document)\n\n**SOP quality checklist**:\n- [ ] Clear problem description\n- [ ] Step-by-step solution\n- [ ] Complete code examples (copy-paste ready)\n- [ ] Testing instructions\n- [ ] Troubleshooting common issues\n\n## Notes\n\nSOPs are **living documents**:\n- Created when pattern established\n- Updated when solution improves\n- Referenced frequently by team\n- Prevent repeated mistakes\n\nThey transform:\n- Individual knowledge â†’ Team knowledge\n- One-time solution â†’ Reusable process\n- Tribal knowledge â†’ Documented procedure\n\n**Impact**: Zero repeated mistakes over time\n\nThis skill provides same functionality as `/nav:doc sop` command but with natural language invocation.\n",
        "skills/nav-start/SKILL.md": "---\nname: nav-start\ndescription: Load Navigator documentation navigator when starting development session, resuming work, or beginning new feature. Use when user mentions starting work, beginning session, resuming after break, or checking project status.\nallowed-tools: Read, Bash\nversion: 1.0.0\n---\n\n# Navigator Navigator Skill\n\nLoad the Navigator documentation navigator to start your development session with optimized context.\n\n## When to Invoke\n\nInvoke this skill when the user:\n- Says \"start my session\", \"begin work\", \"start working\"\n- Says \"load the navigator\", \"show me the docs\"\n- Asks \"what should I work on?\"\n- Mentions \"resume work\", \"continue from where I left off\"\n- Asks about project structure or current tasks\n\n**DO NOT invoke** if:\n- User already ran `/nav:start` command this conversation\n- Navigator already loaded (check conversation history)\n- User is in middle of implementation (only invoke at session start)\n\n## Execution Steps\n\n### Step 1: Check Navigator Version\n\nCheck if user is running latest Navigator version:\n\n```bash\n# Run version checker (optional - doesn't block session start)\nif [ -f \"scripts/check-version.sh\" ]; then\n  bash scripts/check-version.sh\n\n  # Note: Exit code 1 means update available, but don't block session\n  # Exit code 0 means up to date\n  # Exit code 2 means cannot check (network issue)\nfi\n```\n\n**Version check behavior**:\n- If update available: Show notification, continue session\n- If up to date: Show âœ…, continue session\n- If cannot check: Skip silently, continue session\n\n**Never block session start** due to version check.\n\n### Step 1.5: Auto-Update (if enabled)\n\nIf auto_update is enabled in config AND an update is available, automatically update Navigator:\n\n```bash\n# Get the skill's base directory\nSKILL_DIR=\"${SKILL_BASE_DIR:-$HOME/.claude/plugins/marketplaces/jitd-marketplace/skills/nav-start}\"\n\n# Run auto-updater\nAUTO_UPDATE_RESULT=$(python3 \"$SKILL_DIR/functions/auto_updater.py\" 2>/dev/null)\nAUTO_UPDATE_STATUS=$(echo \"$AUTO_UPDATE_RESULT\" | python3 -c \"import sys,json; print(json.load(sys.stdin).get('status',''))\" 2>/dev/null)\n\ncase \"$AUTO_UPDATE_STATUS\" in\n  \"updated\")\n    NEW_VERSION=$(echo \"$AUTO_UPDATE_RESULT\" | python3 -c \"import sys,json; print(json.load(sys.stdin).get('new_version',''))\" 2>/dev/null)\n    REQUIRES_RESTART=$(echo \"$AUTO_UPDATE_RESULT\" | python3 -c \"import sys,json; print(json.load(sys.stdin).get('requires_restart', False))\" 2>/dev/null)\n    echo \"âœ… Auto-updated Navigator to v$NEW_VERSION\"\n    if [ \"$REQUIRES_RESTART\" = \"True\" ]; then\n      echo \"\"\n      echo \"âš ï¸  RESTART REQUIRED\"\n      echo \"   Claude Code caches skill paths at session start.\"\n      echo \"   Restart Claude Code to load new skills from v$NEW_VERSION.\"\n      echo \"\"\n    fi\n    ;;\n  \"up-to-date\")\n    # Silently continue\n    ;;\n  \"failed\")\n    echo \"âš ï¸  Auto-update failed. Run 'nav-upgrade' manually if needed.\"\n    ;;\n  \"disabled\"|\"skipped\")\n    # Silently continue\n    ;;\nesac\n```\n\n**Auto-update behavior**:\n- **If updated**: Show \"âœ… Auto-updated to vX.Y.Z\" with restart prompt\n- **If up-to-date**: Continue silently\n- **If failed**: Show warning \"âš ï¸ Auto-update failed, run nav-upgrade manually\"\n- **If disabled/skipped**: Continue silently\n\n**IMPORTANT**: When `requires_restart: true`, display:\n```\nâš ï¸  RESTART REQUIRED\n   Claude Code caches skill paths at session start.\n   Restart Claude Code to load new skills from vX.Y.Z.\n```\n\nThis informs users that mid-session updates require a restart to activate new skills.\n\n**Never block session start** due to auto-update failure.\n\n### Step 2: Check Navigator Initialization\n\nCheck if `.agent/DEVELOPMENT-README.md` exists:\n\n```bash\nif [ ! -f \".agent/DEVELOPMENT-README.md\" ]; then\n  echo \"âŒ Navigator not initialized in this project\"\n  echo \"\"\n  echo \"Run /nav:init to set up Navigator structure first.\"\n  exit 1\nfi\n```\n\nIf not found, inform user to run `/nav:init` first.\n\n### Step 3: Load Documentation Navigator\n\nRead the navigator file:\n\n```\nRead(\n  file_path: \".agent/DEVELOPMENT-README.md\"\n)\n```\n\nThis is the lightweight index (~2k tokens) that tells you:\n- What documentation exists\n- When to load specific docs\n- Current task focus\n- Project structure overview\n\n### Step 4: Check for Active Context Marker\n\nCheck if there's an active marker from previous `/nav:compact`:\n\n```bash\nif [ -f \".agent/.context-markers/.active\" ]; then\n  marker_file=$(cat .agent/.context-markers/.active)\n  echo \"ğŸ”„ Active context marker detected!\"\n  echo \"\"\n  echo \"Marker: $marker_file\"\n  echo \"\"\n  echo \"This marker was saved during your last /nav:compact.\"\n  echo \"Load it to continue where you left off?\"\n  echo \"\"\n  echo \"[Y/n]:\"\nfi\n```\n\nIf user confirms (Y or Enter):\n- Read the marker file: `Read(file_path: \".agent/.context-markers/{marker_file}\")`\n- Delete `.active` file: `rm .agent/.context-markers/.active`\n- Show confirmation: \"âœ… Context restored from marker!\"\n\nIf user declines (n):\n- Delete `.active` file\n- Show: \"Skipping marker load. You can load it later with /nav:markers\"\n\n### Step 5: Load Navigator Configuration\n\nRead configuration:\n\n```\nRead(\n  file_path: \".agent/.nav-config.json\"\n)\n```\n\nParse:\n- `project_management`: Which PM tool (linear, github, jira, none)\n- `task_prefix`: Task ID format (TASK, GH, LIN, etc.)\n- `team_chat`: Team notifications (slack, discord, none)\n- `tom_features`: ToM configuration (if present, v5.0.0+)\n\n### Step 5.1: Check Version Drift\n\n**Check if project config version matches plugin version**:\n\n```bash\nSKILL_DIR=\"${SKILL_BASE_DIR:-$HOME/.claude/plugins/marketplaces/jitd-marketplace/skills/nav-start}\"\nDRIFT_RESULT=$(python3 \"$SKILL_DIR/functions/auto_updater.py\" --check-drift 2>/dev/null || echo '{\"has_drift\": false}')\nHAS_DRIFT=$(echo \"$DRIFT_RESULT\" | python3 -c \"import sys,json; print(json.load(sys.stdin).get('has_drift', False))\" 2>/dev/null)\n\nif [ \"$HAS_DRIFT\" = \"True\" ]; then\n  DRIFT_MSG=$(echo \"$DRIFT_RESULT\" | python3 -c \"import sys,json; print(json.load(sys.stdin).get('message', ''))\" 2>/dev/null)\n  echo \"\"\n  echo \"âš ï¸  VERSION DRIFT DETECTED\"\n  echo \"   $DRIFT_MSG\"\n  echo \"\"\nfi\n```\n\n**Version drift occurs when**:\n- Plugin updated but project config wasn't synced\n- Manual plugin install without running nav-upgrade\n- Project cloned with old config version\n\n**Display warning if drift detected**:\n```\nâš ï¸  VERSION DRIFT DETECTED\n   Project config (v5.5.0) behind plugin (v5.7.0). Run \"update my CLAUDE.md\" to sync.\n```\n\nThis helps users understand why skills may behave unexpectedly.\n\n### Step 5.5: Load Knowledge Graph (v6.0.0+) [EXECUTE]\n\n**Check if knowledge graph exists and is enabled**:\n```bash\nif [ -f \".agent/knowledge/graph.json\" ]; then\n  # Get graph stats\n  SKILL_DIR=\"${SKILL_BASE_DIR:-$HOME/.claude/plugins/cache/jitd-marketplace/navigator}\"\n  GRAPH_STATS=$(python3 \"$SKILL_DIR/skills/nav-graph/functions/graph_manager.py\" --action stats --graph-path .agent/knowledge/graph.json 2>/dev/null)\n  echo \"$GRAPH_STATS\"\nfi\n```\n\n**Display graph summary in session output**:\n```\nğŸ“š Knowledge Graph: Active\n   Nodes: {total_nodes} | Memories: {memory_count}\n   Concepts: {concept_count} indexed\n```\n\n**Surface relevant memories** (if `auto_surface_relevant: true` in config):\n- Check recent tasks/markers for concepts\n- Query graph for memories matching those concepts\n- Display top 2-3 relevant memories:\n```\nğŸ’¡ Relevant Memories:\n   - PITFALL: \"Auth changes often break session tests\" (90%)\n   - PATTERN: \"Always run unit tests before integration\" (85%)\n```\n\n**If graph doesn't exist**:\n```\nğŸ“š Knowledge Graph: Not initialized\n   Run \"Initialize knowledge graph\" to enable\n```\n\n### Step 5.6: Load User Profile (ToM - Bilateral Modeling) [EXECUTE]\n\n**IMPORTANT**: This step MUST be executed, not just documented.\n\n**Check if user profile exists**:\n```bash\nif [ -f \".agent/.user-profile.json\" ]; then\n  echo \"ğŸ“‹ User profile found\"\nelse\n  echo \"No user profile. Using defaults.\"\nfi\n```\n\n**If profile exists, READ IT NOW**:\n```\nRead(\n  file_path: \".agent/.user-profile.json\"\n)\n```\n\n**After reading, APPLY these preferences for the session**:\n\n1. **Verbosity** (`preferences.communication.verbosity`):\n   - `concise`: Keep responses brief, code-first\n   - `balanced`: Normal explanations (default)\n   - `detailed`: Thorough explanations with context\n\n2. **Confirmation threshold** (`preferences.communication.confirmation_threshold`):\n   - `always`: Show verification checkpoints for all skills\n   - `high-stakes`: Only for backend-endpoint, database-migration, frontend-component (default)\n   - `never`: Skip verification checkpoints\n\n3. **Frameworks** (`preferences.technical.preferred_frameworks`):\n   - Remember for code generation suggestions\n   - E.g., [\"react\", \"express\"] â†’ prefer these in examples\n\n4. **Corrections** (`corrections[]`):\n   - Review recent patterns to avoid repeating mistakes\n   - E.g., \"REST endpoints use plural nouns\" â†’ apply immediately\n\n**Display profile summary in session output**:\n```\nğŸ§  Theory of Mind: Active\n   Profile: Loaded ({corrections_count} corrections, {goals_count} goals)\n   Verbosity: {verbosity}\n   Checkpoints: {confirmation_threshold}\n```\n\n**If profile doesn't exist**:\n```\nğŸ§  Theory of Mind: Active (no profile yet)\n   Say \"save my preferences\" to create one\n```\n\n### Step 6: Check PM Tool for Assigned Tasks\n\n**If PM tool is Linear**:\n```bash\n# Check if Linear MCP available\n# Try to list assigned issues\n```\n\n**If PM tool is GitHub**:\n```bash\ngh issue list --assignee @me --limit 10 2>/dev/null\n```\n\n**If PM tool is none**:\nSkip task checking.\n\n### Step 7: Display Session Statistics (OpenTelemetry)\n\nRun the OpenTelemetry session statistics script:\n\n```bash\n# Get the skill's base directory (passed via SKILL_BASE_DIR)\nSKILL_DIR=\"${SKILL_BASE_DIR:-$HOME/.claude/plugins/marketplaces/jitd-marketplace/skills/nav-start}\"\npython3 \"$SKILL_DIR/scripts/otel_session_stats.py\"\n```\n\nThis script:\n- **If OTel enabled**: Shows real-time metrics from Claude Code\n  - Real token usage (input/output/cache)\n  - Cache hit rate (CLAUDE.md caching performance)\n  - Session cost (actual USD spent)\n  - Active time (seconds of work)\n  - Context availability\n- **If OTel disabled**: Shows setup instructions\n- **If no metrics yet**: Shows \"waiting for export\" message\n\n**Benefits of OTel integration**:\n- Real data (not file-size estimates)\n- Cache performance validation\n- Cost tracking for ROI measurement\n- Official API (won't break on updates)\n\n### Step 8: Display Session Summary\n\nShow the Navigator ASCII logo and session summary.\n\n**Display the logo using these exact ANSI color codes**:\n\n```bash\n# Colors: Blue N, Red A, Blue V (Navigator arrow)\nBLUE='\\033[1;34m'\nRED='\\033[1;31m'\nWHITE='\\033[1;37m'\nGRAY='\\033[90m'\nNC='\\033[0m'\n\nprintf \"${BLUE}â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—${NC} ${RED} â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— ${NC}${BLUE}â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—${NC}\\n\"\nprintf \"${BLUE}â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘${NC} ${RED}â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—${NC}${BLUE}â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘${NC}\\n\"\nprintf \"${BLUE}â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘${NC} ${RED}â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘${NC}${BLUE}â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘${NC}  ${WHITE}v6.0.0${NC}\\n\"\nprintf \"${BLUE}â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘${NC} ${RED}â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘${NC}${BLUE}â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•${NC}  ${GRAY}Knowledge Graph${NC}\\n\"\nprintf \"${BLUE}â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘${NC} ${RED}â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘${NC}${BLUE} â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• ${NC}\\n\"\nprintf \"${BLUE}â•šâ•â•  â•šâ•â•â•â•${NC} ${RED}â•šâ•â•  â•šâ•â•${NC}${BLUE}  â•šâ•â•â•â•  ${NC}\\n\"\n```\n\n**Then show the session info**:\n\n```\nğŸ“– Navigator: Loaded\nğŸ¯ PM: [PM tool or \"Manual\"]\nâœ… Optimization: Active\nğŸ§  ToM: [Profile status from Step 5.6]\nğŸ“š Graph: [Knowledge graph status from Step 5.5]\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ“Š DOCUMENTATION LOADED (MEASURED)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nNavigator (.agent/DEVELOPMENT-README.md):\n  Size: [nav_bytes] bytes = [nav_tokens] tokens\n\nCLAUDE.md (auto-loaded):\n  Size: [claude_bytes] bytes = [claude_tokens] tokens\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTotal documentation:     [total_tokens] tokens\nAvailable for work:      [available] tokens ([percent]%)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ’¡ On-demand loading strategy:\n   Load task doc when needed:  +3-5k tokens\n   Load system doc if needed:  +4-6k tokens\n   Load SOP if helpful:        +2-3k tokens\n\n   Total with all docs:        ~[total + 15]k tokens\n\n   vs Traditional (all upfront): ~150k tokens\n   Savings: ~[150 - total - 15]k tokens\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ”¹ WORKFLOW ENFORCEMENT (MANDATORY)\n\nBefore responding to ANY task, show:\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ WORKFLOW CHECK                      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Loop trigger: [YES/NO]              â”‚\nâ”‚ Complexity: [0.X]                   â”‚\nâ”‚ Mode: [LOOP/TASK/DIRECT]            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nLoop triggers: \"run until done\", \"do all\", \"keep going\"\nTask triggers: multi-file, refactor, new feature\nSkipping this check = WORKFLOW VIOLATION\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ”¹ Navigator WORKFLOW REMINDER\n\n1. Workflow enforcement\n   - âœ… ALWAYS show WORKFLOW CHECK on tasks\n   - Loop Mode: NAVIGATOR_STATUS each iteration\n   - Task Mode: Phase tracking (RESEARCHâ†’COMPLETE)\n\n2. Navigator-first loading\n   - âœ… Loaded: .agent/DEVELOPMENT-README.md\n   - Next: Load ONLY relevant task/system docs\n\n3. Use agents for research\n   - Multi-file searches: Use Task agent (saves 60-80% tokens)\n   - Code exploration: Use Explore agent\n\n4. Context management\n   - Run nav-compact skill after isolated sub-tasks\n   - Context markers save your progress\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n[MULTI-CLAUDE WORKFLOWS CHECK - v4.3.0+]\n\nCheck if multi-Claude workflows installed:\n```bash\nif ! command -v navigator-multi-claude.sh &> /dev/null; then\n  echo \"\"\n  echo \"âš¡ Multi-Claude Workflows Available (v4.3.0+)\"\n  echo \"\"\n  echo \"   Enable parallel AI execution for complex tasks.\"\n  echo \"   Status: Not installed\"\n  echo \"\"\n  echo \"   Install: 'Install multi-Claude workflows'\"\n  echo \"   Learn more: See RELEASE-NOTES-v4.3.0.md\"\n  echo \"\"\n  echo \"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\"\nfi\n```\n\nOnly show this prompt:\n- If plugin version >= 4.3.0\n- If scripts not installed\n- Once per session (set flag in memory)\n\nDo NOT show if:\n- Scripts already installed\n- Plugin version < 4.3.0\n- User explicitly dismissed before\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n[FIRST SESSION FEATURES DISPLAY - v5.6.0+]\n\nCheck if this is first session after install/update:\n\n```bash\nFIRST_SESSION_MARKER=\".agent/.features-shown-$(cat .agent/.nav-config.json | python3 -c \"import sys,json; print(json.load(sys.stdin).get('version',''))\" 2>/dev/null)\"\n\nif [ ! -f \"$FIRST_SESSION_MARKER\" ]; then\n  echo \"\"\n  python3 \"$SKILL_BASE_DIR/../nav-features/functions/feature_manager.py\" show --first-session\n  echo \"\"\n  echo \"ğŸ’¡ Toggle features: 'show my features' or 'disable loop_mode'\"\n  echo \"\"\n  touch \"$FIRST_SESSION_MARKER\"\nfi\n```\n\nShows feature table on:\n- First session after Navigator install\n- First session after version update (new version = new marker)\n\nDo NOT show if:\n- Features already shown for this version\n- feature_manager.py not found (older plugin)\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n[If tasks found from PM tool, list them here]\n\n[If no tasks found:]\nNo active tasks found. What would you like to work on?\n```\n\n## Predefined Functions\n\n### scripts/otel_session_stats.py\n\n**Purpose**: Display real-time session statistics via OpenTelemetry\n\n**When to call**: After loading navigator, before presenting session summary\n\n**Requirements**:\n- CLAUDE_CODE_ENABLE_TELEMETRY=1 (optional - shows setup if disabled)\n- Metrics available from current session (shows waiting message if not)\n\n**Execution**:\n```bash\nSKILL_DIR=\"${SKILL_BASE_DIR:-$HOME/.claude/plugins/marketplaces/jitd-marketplace/skills/nav-start}\"\npython3 \"$SKILL_DIR/scripts/otel_session_stats.py\"\n```\n\n**Output**: Formatted statistics with:\n- Token usage breakdown (input/output/cache)\n- Cache hit rate percentage\n- Session cost in USD\n- Active time\n- Context availability\n\n**Error Handling**:\n- If OTel not enabled: Shows setup instructions\n- If no metrics yet: Shows \"waiting for export\" message\n- Never crashes - always displays helpful guidance\n\n## Reference Files\n\nThis skill uses:\n- **otel_session_stats.py**: Real-time session stats via OpenTelemetry\n- **.agent/DEVELOPMENT-README.md**: Navigator content\n- **.agent/.nav-config.json**: Configuration\n- **.agent/.context-markers/.active**: Active marker check\n\n## Error Handling\n\n**Navigator not found**:\n```\nâŒ Navigator not initialized\n\nRun /nav:init to create .agent/ structure first.\n```\n\n**PM tool configured but not working**:\n```\nâš ï¸  [PM Tool] configured but not accessible\n\nCheck authentication or run setup guide.\n```\n\n**Config file malformed**:\n```\nâš ï¸  .agent/.nav-config.json is invalid JSON\n\nFix syntax or run /nav:init to regenerate.\n```\n\n## Success Criteria\n\nSession start is successful when:\n- [ ] Navigator loaded successfully\n- [ ] Token usage calculated and displayed\n- [ ] PM tool status checked (if configured)\n- [ ] User knows what to work on next\n- [ ] Navigator workflow context set\n\n## Notes\n\nThis skill provides the same functionality as `/nav:start` command but with:\n- Natural language invocation (no need to remember `/` syntax)\n- Auto-detection based on user intent\n- Composable with other Navigator skills\n\nIf user prefers manual invocation, they can still use `/nav:start` command (both work in hybrid mode).\n",
        "skills/nav-stats/SKILL.md": "---\nname: nav-stats\ndescription: Display session efficiency report showing token savings, cache performance, and optimization recommendations. Use when user asks \"show my stats\", \"how efficient am I?\", \"show session metrics\", or wants to see Navigator's impact.\nallowed-tools: Bash, Read\nversion: 1.0.0\n---\n\n# Navigator Session Statistics Skill\n\nShow real-time efficiency reporting with baseline comparisons, making Navigator's value quantifiable and shareable.\n\n## When to Invoke\n\nInvoke this skill when the user:\n- Says \"show my stats\", \"show session stats\", \"show metrics\"\n- Asks \"how efficient am I?\", \"how much did I save?\"\n- Says \"show my Navigator report\", \"efficiency report\"\n- Wants to see token savings or session performance\n- Says \"show impact\", \"prove Navigator works\"\n\n**DO NOT invoke** if:\n- User just started session (< 5 messages)\n- Navigator not initialized in project\n- User asking about specific metrics only (answer directly)\n\n## Execution Steps\n\n### Step 1: Check Navigator Initialized\n\nVerify Navigator is set up:\n\n```bash\nif [ ! -f \".agent/DEVELOPMENT-README.md\" ]; then\n  echo \"âŒ Navigator not initialized in this project\"\n  echo \"Run 'Initialize Navigator' first\"\n  exit 1\nfi\n```\n\n### Step 2: Run Enhanced Session Stats\n\nExecute the enhanced session statistics script:\n\n```bash\n# Check if enhanced script exists\nif [ ! -f \"scripts/session-stats.sh\" ]; then\n  echo \"âŒ Session stats script not found\"\n  echo \"This feature requires Navigator v3.5.0+\"\n  exit 1\nfi\n\n# Run stats script\nbash scripts/session-stats.sh\n```\n\nThis script outputs shell-parseable variables:\n- `BASELINE_TOKENS` - Total size of all .agent/ docs\n- `LOADED_TOKENS` - Actually loaded in session (estimated)\n- `TOKENS_SAVED` - Difference\n- `SAVINGS_PERCENT` - Percentage saved\n- `EFFICIENCY_SCORE` - 0-100 score\n- `CACHE_EFFICIENCY` - From OpenTelemetry\n- `CONTEXT_USAGE_PERCENT` - Estimated context fill\n- `TIME_SAVED_MINUTES` - Estimated time saved\n\n### Step 3: Calculate Efficiency Score\n\nUse predefined function to calculate score:\n\n```bash\n# Extract metrics from session-stats.sh\nsource <(bash scripts/session-stats.sh)\n\n# Calculate efficiency score using predefined function\nEFFICIENCY_SCORE=$(python3 skills/nav-stats/functions/efficiency_scorer.py \\\n  --tokens-saved-percent ${SAVINGS_PERCENT} \\\n  --cache-efficiency ${CACHE_EFFICIENCY} \\\n  --context-usage ${CONTEXT_USAGE_PERCENT})\n```\n\n### Step 4: Format and Display Report\n\nUse predefined function to format visual report:\n\n```bash\n# Generate formatted report\npython3 skills/nav-stats/functions/report_formatter.py \\\n  --baseline ${BASELINE_TOKENS} \\\n  --loaded ${LOADED_TOKENS} \\\n  --saved ${TOKENS_SAVED} \\\n  --savings-percent ${SAVINGS_PERCENT} \\\n  --cache-efficiency ${CACHE_EFFICIENCY} \\\n  --context-usage ${CONTEXT_USAGE_PERCENT} \\\n  --efficiency-score ${EFFICIENCY_SCORE} \\\n  --time-saved ${TIME_SAVED_MINUTES}\n```\n\n**Output Format**:\n```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘          NAVIGATOR EFFICIENCY REPORT                 â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ“Š TOKEN USAGE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nDocumentation loaded:        12,000 tokens\nBaseline (all docs):        150,000 tokens\nTokens saved:               138,000 tokens (92% â†“)\n\nğŸ’¾ CACHE PERFORMANCE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCache efficiency:              100.0% (perfect)\n\nğŸ“ˆ SESSION METRICS\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nContext usage:                      35% (excellent)\nEfficiency score:                94/100 (excellent)\n\nâ±ï¸  TIME SAVED\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nEstimated time saved:          ~42 minutes\n\nğŸ’¡ WHAT THIS MEANS\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nNavigator loaded 92% fewer tokens than loading all docs.\nYour context window is 65% available for actual work.\n\nğŸ¯ RECOMMENDATIONS\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâœ… Excellent efficiency - keep using lazy-loading strategy\nâœ… Context usage healthy - plenty of room for work\n\nShare your efficiency: Take a screenshot! #ContextEfficiency\n```\n\n### Step 5: Add Context-Specific Recommendations\n\nBased on efficiency score, provide actionable advice:\n\n**If efficiency_score < 70**:\n```\nâš ï¸  RECOMMENDATIONS\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâš ï¸  Token savings below target (70%+)\nâ†’ Check: Are you loading more docs than needed?\nâ†’ Tip: Use navigator to find docs, don't load all upfront\n\nRead more: .agent/philosophy/CONTEXT-EFFICIENCY.md\n```\n\n**If context_usage > 80%**:\n```\nâš ï¸  RECOMMENDATIONS\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâš ï¸  Context usage high (80%+)\nâ†’ Consider: Create context marker and compact\nâ†’ Tip: Compact after completing sub-tasks\n\nRead more: .agent/philosophy/ANTI-PATTERNS.md\n```\n\n**If cache_efficiency < 80%**:\n```\nâš ï¸  RECOMMENDATIONS\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâš ï¸  Cache efficiency low (<80%)\nâ†’ Check: CLAUDE.md properly configured?\nâ†’ Tip: Ensure prompt caching enabled\n\nRead more: .agent/philosophy/PATTERNS.md (Caching pattern)\n```\n\n## Predefined Functions\n\n### `efficiency_scorer.py`\n\nCalculate Navigator efficiency score (0-100) based on:\n- Token savings (40 points)\n- Cache efficiency (30 points)\n- Context usage (30 points)\n\n**Usage**:\n```bash\npython3 skills/nav-stats/functions/efficiency_scorer.py \\\n  --tokens-saved-percent 92 \\\n  --cache-efficiency 100 \\\n  --context-usage 35\n```\n\n**Output**: `94` (integer score)\n\n### `report_formatter.py`\n\nFormat efficiency metrics into visual, shareable report.\n\n**Usage**:\n```bash\npython3 skills/nav-stats/functions/report_formatter.py \\\n  --baseline 150000 \\\n  --loaded 12000 \\\n  --saved 138000 \\\n  --savings-percent 92 \\\n  --cache-efficiency 100 \\\n  --context-usage 35 \\\n  --efficiency-score 94 \\\n  --time-saved 42\n```\n\n**Output**: Formatted ASCII report (see Step 4)\n\n## Philosophy Integration\n\n**Context Engineering Principle**: Measurement validates optimization\n\nFrom `.agent/philosophy/PATTERNS.md`:\n> \"Measure to validate. Navigator tracks real metrics, not estimates.\"\n\nThis skill proves:\n- **Token savings** are real (baseline comparison)\n- **Cache efficiency** works (OpenTelemetry data)\n- **Context usage** is healthy (window not overloaded)\n- **Time saved** is quantifiable (6s per 1k tokens)\n\n## User Experience\n\n**User says**: \"Show my stats\"\n\n**Skill displays**:\n1. Visual efficiency report\n2. Clear metrics (tokens, cache, context)\n3. Interpretation (\"What this means\")\n4. Actionable recommendations\n\n**User can**:\n- Screenshot and share (#ContextEfficiency)\n- Understand Navigator's impact\n- Optimize workflow based on recommendations\n- Validate context engineering principles\n\n## Example Output Scenarios\n\n### Scenario 1: Excellent Efficiency (Score 94)\n\nUser following lazy-loading pattern, cache working perfectly:\n- 92% token savings âœ…\n- 100% cache efficiency âœ…\n- 35% context usage âœ…\n- Score: 94/100\n\n**Recommendation**: Keep it up! Share your efficiency.\n\n### Scenario 2: Fair Efficiency (Score 72)\n\nUser loading too many docs upfront:\n- 65% token savings âš ï¸\n- 95% cache efficiency âœ…\n- 55% context usage âœ…\n- Score: 72/100\n\n**Recommendation**: Review lazy-loading strategy. Load docs on-demand.\n\n### Scenario 3: Poor Efficiency (Score 48)\n\nUser not using Navigator patterns:\n- 45% token savings âŒ\n- 70% cache efficiency âš ï¸\n- 85% context usage âŒ\n- Score: 48/100\n\n**Recommendation**: Read philosophy docs. Consider /nav:compact. Review CLAUDE.md.\n\n## Success Metrics\n\n**After using this skill, users should**:\n- Understand their efficiency score\n- See quantified token savings\n- Know what to improve (if anything)\n- Feel motivated to share results\n\n**Long-term impact**:\n- Users screenshot reports and share\n- \"Navigator saved me 138k tokens\" becomes common\n- Efficiency becomes visible, not abstract\n- Continuous improvement through measurement\n\n---\n\n**This skill makes Navigator's value tangible and shareable.**\n",
        "skills/nav-task-mode/SKILL.md": "---\nname: nav-task-mode\ndescription: Unified workflow orchestration for substantial tasks. Auto-detects complexity, defers to matching skills, or provides phase-based execution. Solves workflow conflicts between skills, loop mode, and CLAUDE.md.\nallowed-tools: Read, Write, Edit, Bash, Grep, Glob, AskUserQuestion\nversion: 1.0.0\n---\n\n# Navigator Task Mode Skill\n\nUnified workflow orchestration that coordinates between skills, loop mode, and direct execution based on task complexity and type.\n\n## Why This Exists\n\nNavigator had three disconnected workflow systems:\n1. **Skills** (frontend-component, etc.) - have mini-workflows (Step 1 â†’ Step 7)\n2. **Loop Mode** - separate phase system (INIT â†’ COMPLETE)\n3. **CLAUDE.md** - documents workflow nobody enforces\n\n**Result**: Conflicts when multiple systems try to run.\n\n**Solution**: Task Mode acts as a coordinator - detecting when skills should handle workflow vs when to provide standalone phase guidance.\n\n## How It Works\n\n```\nUser Request\n    â†“\nTASK MODE (this skill)\n    â”œâ”€ Simple task? â†’ Direct execution (no overhead)\n    â”œâ”€ Skill matches? â†’ Let skill run (it has workflow)\n    â””â”€ Substantial, no skill? â†’ Task Mode phases\n```\n\n## When to Invoke\n\n**Auto-invoke when**:\n- User starts substantial work (3+ steps expected)\n- No obvious skill match (not \"create component\", \"add endpoint\", etc.)\n- Request involves planning, refactoring, or multi-file changes\n- Loop mode is disabled but structured execution needed\n\n**DO NOT invoke if**:\n- Trivial task (typo fix, single line change)\n- Skill will clearly handle it (component creation, endpoint, migration, etc.)\n- User says \"quick\", \"just do\", \"simple fix\"\n- Already in Task Mode or Loop Mode\n\n## Configuration\n\nTask Mode settings in `.agent/.nav-config.json`:\n\n```json\n{\n  \"task_mode\": {\n    \"enabled\": true,\n    \"auto_detect\": true,\n    \"defer_to_skills\": true,\n    \"complexity_threshold\": 0.5,\n    \"show_phase_indicator\": true\n  }\n}\n```\n\n**Options**:\n- `enabled`: Master switch for Task Mode\n- `auto_detect`: Auto-detect complexity (vs explicit invocation only)\n- `defer_to_skills`: Let matching skills handle their own workflow\n- `complexity_threshold`: Score (0-1) required to activate\n- `show_phase_indicator`: Show phase banners during execution\n\n## Execution Steps\n\n### Step 1: Analyze Request\n\n**Run complexity detection**:\n```bash\npython3 functions/complexity_detector.py \\\n  --request \"{USER_REQUEST}\" \\\n  --context \"{RECENT_CONTEXT}\"\n```\n\n**Complexity signals**:\n- Multi-file changes expected (+0.3)\n- Planning language (\"implement\", \"refactor\", \"add feature\") (+0.2)\n- Vague requirements needing research (+0.2)\n- Cross-system changes (frontend+backend) (+0.3)\n- Testing requirements mentioned (+0.1)\n\n**Simple task signals**:\n- Single file mentioned (-0.3)\n- Fix/typo/update language (-0.2)\n- Specific location given (-0.2)\n- \"Quick\" or \"simple\" mentioned (-0.3)\n\n**Decision**:\n```\nIF complexity_score < threshold:\n  â†’ Direct execution (exit Task Mode)\n```\n\n### Step 2: Check Skill Match\n\n**Run skill detection**:\n```bash\npython3 functions/skill_detector.py \\\n  --request \"{USER_REQUEST}\" \\\n  --available-skills \"{SKILLS_LIST}\"\n```\n\n**Skill matching rules**:\n- \"create component\" â†’ frontend-component\n- \"add endpoint\" â†’ backend-endpoint\n- \"database migration\" â†’ database-migration\n- \"write test\" â†’ backend-test/frontend-test\n- etc.\n\n**Decision**:\n```\nIF matching_skill AND defer_to_skills:\n  â†’ Show: \"Detected: {SKILL_NAME} skill will handle this\"\n  â†’ Exit Task Mode (skill has workflow)\n```\n\n### Step 3: Initialize Task Mode\n\n**If substantial task, no skill match**:\n\n**Display activation**:\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTASK MODE ACTIVATED\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTask: {TASK_SUMMARY}\nComplexity: {SCORE} (threshold: {THRESHOLD})\nSkills matched: None (Task Mode will orchestrate)\n\nPhases:\n  â—‹ RESEARCH - Understand requirements\n  â—‹ PLAN - Create implementation strategy\n  â—‹ IMPL - Execute changes\n  â—‹ VERIFY - Test and validate\n  â—‹ COMPLETE - Commit and document\n\nStarting RESEARCH phase...\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n### Step 4: Execute Phases\n\n**RESEARCH Phase**:\n- Use Task agent for codebase exploration\n- Identify affected files\n- Find existing patterns\n- Document unknowns\n\n**Show phase transition**:\n```bash\npython3 functions/phase_indicator.py \\\n  --phase \"RESEARCH\" \\\n  --status \"complete\" \\\n  --next \"PLAN\"\n```\n\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nPHASE: RESEARCH â†’ PLAN\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nResearch completed:\n  âœ“ Found {N} related files\n  âœ“ Identified patterns in {LOCATION}\n  âœ“ Dependencies mapped\n\nMoving to PLAN phase...\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n**PLAN Phase**:\n- Create TodoWrite items\n- Identify order of changes\n- Document approach\n\n**IMPL Phase**:\n- Execute planned changes\n- Follow project patterns\n- Write tests as appropriate\n\n**VERIFY Phase**:\n- Run tests\n- Type check\n- Build validation\n- **Run nav-simplify** (if enabled)\n\n**COMPLETE Phase**:\n- Commit changes\n- Update documentation\n- Close tickets (if PM configured)\n- Suggest compact\n\n### Step 5: Complete Task Mode\n\n**Display completion**:\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTASK MODE COMPLETE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTask: {TASK_SUMMARY}\nPhases:\n  âœ“ RESEARCH - {DURATION}\n  âœ“ PLAN - {DURATION}\n  âœ“ IMPL - {DURATION}\n  âœ“ VERIFY - {DURATION}\n  âœ“ COMPLETE\n\nSummary:\n- {FILES_CHANGED} files changed\n- {TESTS_ADDED} tests added\n- Committed: {COMMIT_SHA}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n---\n\n## Predefined Functions\n\n### functions/complexity_detector.py\n\nAnalyzes request to determine complexity score.\n\n**Usage**:\n```bash\npython3 functions/complexity_detector.py \\\n  --request \"Refactor the auth system to use JWT\" \\\n  --context \"Working on user management\"\n```\n\n**Returns**:\n```json\n{\n  \"complexity_score\": 0.7,\n  \"signals\": {\n    \"multi_file\": true,\n    \"planning_language\": true,\n    \"cross_system\": false\n  },\n  \"recommendation\": \"task_mode\",\n  \"reason\": \"Refactoring task with multi-file scope\"\n}\n```\n\n### functions/skill_detector.py\n\nChecks if a skill should handle this request.\n\n**Usage**:\n```bash\npython3 functions/skill_detector.py \\\n  --request \"Add a login component\" \\\n  --available-skills '[\"frontend-component\", \"backend-endpoint\", \"database-migration\"]'\n```\n\n**Returns**:\n```json\n{\n  \"matching_skill\": \"frontend-component\",\n  \"confidence\": 0.95,\n  \"triggers\": [\"create component\", \"add component\"],\n  \"defer\": true,\n  \"reason\": \"Request matches frontend-component skill triggers\"\n}\n```\n\n### functions/phase_indicator.py\n\nGenerates phase transition displays.\n\n**Usage**:\n```bash\npython3 functions/phase_indicator.py \\\n  --phase \"IMPL\" \\\n  --status \"in_progress\" \\\n  --progress 60 \\\n  --details '{\"files_changed\": 3, \"tests_written\": 2}'\n```\n\n**Returns**: Formatted phase indicator block.\n\n---\n\n## Integration with Navigator\n\n### With Loop Mode\n\nTask Mode is **lighter weight** than Loop Mode:\n- Loop Mode: Strict iteration control, stagnation detection, EXIT_SIGNAL\n- Task Mode: Phase guidance, skill coordination, no strict gates\n\n**When to use which**:\n- Loop Mode: \"Run until done\", autonomous iteration\n- Task Mode: Substantial task, need structure but not strict iteration\n\n**Can coexist**: Loop Mode wraps Task Mode phases if both active.\n\n### With Skills\n\nTask Mode **defers to skills** by default:\n- Skill has its own workflow (Steps 1-7)\n- Task Mode doesn't add overhead\n- Just shows \"Skill X will handle this\"\n\n**Override**: Set `defer_to_skills: false` to always use Task Mode phases.\n\n### With nav-simplify\n\nSimplification runs during VERIFY phase:\n- After tests pass\n- Before committing\n- Respects simplification.enabled config\n\n### With Autonomous Completion\n\nCOMPLETE phase triggers autonomous protocol:\n- Commit changes\n- Archive documentation\n- Close tickets\n- Create markers\n\n---\n\n## Comparison Table\n\n| Aspect | Direct Execution | Task Mode | Loop Mode |\n|--------|------------------|-----------|-----------|\n| Complexity | Low | Medium-High | High |\n| Phase tracking | None | Visual phases | Strict phases |\n| Iteration control | None | None | EXIT_SIGNAL |\n| Skill coordination | None | Defers | Independent |\n| Best for | Quick fixes | Features | Autonomous work |\n\n---\n\n## Examples\n\n### Example 1: Simple Fix (Direct Execution)\n\n```\nUser: \"Fix the typo in README\"\n\nâ†’ Complexity: 0.1 (below threshold)\nâ†’ Direct execution (no Task Mode overhead)\n```\n\n### Example 2: Component Creation (Skill Defers)\n\n```\nUser: \"Create a UserProfile component\"\n\nâ†’ Complexity: 0.6\nâ†’ Skill match: frontend-component (0.95 confidence)\nâ†’ Task Mode defers: \"frontend-component skill will handle this\"\nâ†’ Skill executes its own Step 1-7 workflow\n```\n\n### Example 3: Refactoring (Task Mode Active)\n\n```\nUser: \"Refactor auth to use JWT instead of sessions\"\n\nâ†’ Complexity: 0.8\nâ†’ Skill match: None\nâ†’ Task Mode activates\nâ†’ RESEARCH: Explore current auth implementation\nâ†’ PLAN: Document JWT migration steps\nâ†’ IMPL: Execute changes across files\nâ†’ VERIFY: Run tests, simplify code\nâ†’ COMPLETE: Commit, document\n```\n\n### Example 4: With Loop Mode\n\n```\nUser: \"Run until done: implement user roles\"\n\nâ†’ Loop Mode activated (explicit trigger)\nâ†’ Task Mode phases guide each iteration:\n    Iteration 1: RESEARCH phase\n    Iteration 2: PLAN + IMPL phases\n    Iteration 3: IMPL + VERIFY phases\n    Iteration 4: COMPLETE + EXIT_SIGNAL\n```\n\n---\n\n## Error Handling\n\n**Config not found**:\n```\nTask Mode config not found in .nav-config.json.\nUsing defaults: auto_detect=true, threshold=0.5\n```\n\n**Skill detection fails**:\n- Fall back to Task Mode (conservative)\n- Log warning but continue\n\n**Phase detection ambiguous**:\n- Default to current or next logical phase\n- Show reasoning for user\n\n---\n\n## Success Criteria\n\nTask Mode succeeds when:\n- [ ] Simple tasks execute without overhead\n- [ ] Skills handle their matched requests\n- [ ] Substantial tasks get phase structure\n- [ ] No conflicts between systems\n- [ ] User sees clear progress indicators\n\n---\n\n## Verification Checklist\n\nAfter implementation:\n- [ ] \"Add login component\" â†’ frontend-component runs (not Task Mode)\n- [ ] \"Refactor auth system\" â†’ Task Mode runs (no matching skill)\n- [ ] \"Fix typo\" â†’ Direct execution (not substantial)\n- [ ] Phase indicators show during Task Mode\n- [ ] Skills continue working unchanged\n- [ ] Loop Mode can wrap Task Mode phases\n\n---\n\n**This skill provides unified workflow orchestration, resolving conflicts between Navigator's multiple workflow systems.**\n",
        "skills/nav-task/SKILL.md": "---\nname: nav-task\ndescription: Manage Navigator task documentation - create implementation plans, archive completed tasks, update task index. Use when user starts new feature, completes work, or says \"document this feature\".\nallowed-tools: Read, Write, Edit, Bash\nversion: 1.0.0\n---\n\n# Navigator Task Manager Skill\n\nCreate and manage task documentation - implementation plans that capture what was built, how, and why.\n\n## When to Invoke\n\nInvoke this skill when the user:\n- Says \"document this feature\", \"archive this task\"\n- Says \"create task doc for...\", \"document what I built\"\n- Completes a feature and mentions \"done\", \"finished\", \"complete\"\n- Starts new feature and says \"create implementation plan\"\n\n**DO NOT invoke** if:\n- User is asking about existing tasks (use Read, not creation)\n- Creating SOPs (that's nav-sop skill)\n- Updating system docs (different skill)\n\n## Execution Steps\n\n### Step 1: Determine Task ID\n\n**If user provided task ID** (e.g., \"TASK-01\", \"GH-123\"):\n- Use their ID directly\n\n**If no ID provided**:\n- Read `.agent/.nav-config.json` for `task_prefix`\n- Check existing tasks: `ls .agent/tasks/*.md`\n- Generate next number: `{prefix}-{next-number}`\n- Example: Last task is TASK-05, create TASK-06\n\n### Step 2: Determine Action (Create vs Archive)\n\n**Creating new task** (starting feature):\n```\nUser: \"Create task doc for OAuth implementation\"\nâ†’ Action: CREATE\nâ†’ Generate empty implementation plan template\n```\n\n**Archiving completed task** (feature done):\n```\nUser: \"Document this OAuth feature I just built\"\nâ†’ Action: ARCHIVE\nâ†’ Generate implementation plan from conversation\n```\n\n### Step 3A: Create New Task (If Starting Feature)\n\nGenerate task document from template:\n\n```markdown\n# TASK-{XX}: {Feature Name}\n\n**Status**: ğŸš§ In Progress\n**Created**: {YYYY-MM-DD}\n**Assignee**: {from PM tool or \"Manual\"}\n\n---\n\n## Context\n\n**Problem**:\n[What problem does this solve?]\n\n**Goal**:\n[What are we building?]\n\n**Success Criteria**:\n- [ ] [Specific measurable outcome]\n- [ ] [Another outcome]\n\n---\n\n## Implementation Plan\n\n### Phase 1: {Name}\n**Goal**: [What this phase accomplishes]\n\n**Tasks**:\n- [ ] [Specific task]\n- [ ] [Another task]\n\n**Files**:\n- `path/to/file.ts` - [Purpose]\n\n### Phase 2: {Name}\n...\n\n---\n\n## Technical Decisions\n\n| Decision | Options Considered | Chosen | Reasoning |\n|----------|-------------------|--------|-----------|\n| [What] | [Option A, B, C] | [Chosen] | [Why] |\n\n---\n\n## Dependencies\n\n**Requires**:\n- [ ] {prerequisite task or setup}\n\n**Blocks**:\n- [ ] {tasks waiting on this}\n\n---\n\n## Verify\n\nRun these commands to validate the implementation:\n\n```bash\n# Run tests\n[test command for this feature]\n\n# Type check\n[type check command]\n\n# Build\n[build command]\n```\n\n---\n\n## Done\n\nObservable outcomes that prove completion:\n\n- [ ] [Specific file/API exists and exports expected interface]\n- [ ] [Tests pass - specify count or coverage target]\n- [ ] [Build succeeds without errors]\n- [ ] [User-observable behavior works as specified]\n\n---\n\n## Notes\n\n[Any additional context, links, references]\n\n---\n\n## Completion Checklist\n\nBefore marking complete:\n- [ ] Implementation finished\n- [ ] Tests written and passing\n- [ ] Documentation updated\n- [ ] Code reviewed (if team)\n- [ ] Deployed/merged\n\n---\n\n**Last Updated**: {YYYY-MM-DD}\n```\n\nSave to: `.agent/tasks/TASK-{XX}-{slug}.md`\n\n### Step 3B: Archive Completed Task (If Feature Done)\n\nGenerate task document from conversation:\n\n1. **Analyze conversation** (last 30-50 messages):\n   - What was built?\n   - How was it implemented?\n   - What decisions were made?\n   - What files were modified?\n\n2. **Generate implementation plan**:\n\n```markdown\n# TASK-{XX}: {Feature Name}\n\n**Status**: âœ… Completed\n**Created**: {YYYY-MM-DD}\n**Completed**: {YYYY-MM-DD}\n\n---\n\n## What Was Built\n\n[1-2 paragraph summary of the feature]\n\n---\n\n## Implementation\n\n### Phase 1: {Actual phase completed}\n**Completed**: {Date}\n\n**Changes**:\n- Created `src/auth/oauth.ts` - OAuth provider integration\n- Modified `src/routes/auth.ts` - Added login/logout endpoints\n- Updated `src/config/passport.ts` - Passport configuration\n\n**Key Code**:\n```typescript\n// Example of key implementation\nexport const oauthLogin = async (req, res) => {\n  // Implementation details\n};\n```\n\n### Phase 2: {Next phase}\n...\n\n---\n\n## Technical Decisions\n\n| Decision | Options | Chosen | Reasoning |\n|----------|---------|--------|-----------|\n| Auth library | next-auth, passport.js, auth0 | passport.js | Better control over OAuth flow, smaller bundle |\n| Token storage | localStorage, cookies, sessionStorage | httpOnly cookies | XSS protection, automatic transmission |\n| Session store | memory, Redis, PostgreSQL | Redis | Fast, scalable, separate from DB |\n\n---\n\n## Files Modified\n\n- `src/auth/oauth.ts` (created) - OAuth integration\n- `src/routes/auth.ts` (modified) - Added auth endpoints\n- `src/config/passport.ts` (created) - Passport setup\n- `tests/auth.test.ts` (created) - Auth tests\n- `README.md` (updated) - OAuth setup instructions\n\n---\n\n## Challenges & Solutions\n\n**Challenge**: OAuth callback URL mismatch\n- **Problem**: Redirects failed in production\n- **Solution**: Added environment-specific callback URLs\n- **Commit**: abc1234\n\n**Challenge**: Session persistence across restarts\n- **Problem**: Users logged out on server restart\n- **Solution**: Redis session store\n- **Commit**: def5678\n\n---\n\n## Testing\n\n- âœ… Unit tests: `src/auth/*.test.ts` (15 tests, 100% coverage)\n- âœ… Integration tests: OAuth flow end-to-end\n- âœ… Manual testing: Tested with Google, GitHub providers\n\n---\n\n## Documentation\n\n- âœ… README updated with OAuth setup instructions\n- âœ… Environment variables documented in `.env.example`\n- âœ… API endpoints documented in `docs/api.md`\n\n---\n\n## Verify\n\nCommands executed to validate:\n\n```bash\n# Actual commands run during verification\nnpm test src/auth\nnpm run type-check\nnpm run build\n```\n\n**Results**: All passed âœ…\n\n---\n\n## Done\n\nOutcomes confirmed:\n\n- [x] `src/auth/oauth.ts` exports OAuth provider integration\n- [x] All tests pass (15 tests, 100% coverage)\n- [x] Build succeeds without errors\n- [x] OAuth login/logout flows work correctly\n\n---\n\n## Related\n\n**SOPs Created**:\n- `.agent/sops/integrations/oauth-setup.md`\n\n**System Docs Updated**:\n- `.agent/system/project-architecture.md` (added auth section)\n\n---\n\n**Completed**: {YYYY-MM-DD}\n**Implementation Time**: {X hours/days}\n```\n\nSave to: `.agent/tasks/TASK-{XX}-{slug}.md`\n\n### Step 3.5: Verify Interpretation (ToM Checkpoint - Archive Mode Only) [EXECUTE]\n\n**IMPORTANT**: This step MUST be executed when archiving tasks (not creating new ones).\n\n**Before committing archive documentation, confirm interpretation with user**.\n\n**Display verification** (only for ARCHIVE action):\n```\nI extracted this from our session:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nWhat was built:\n- {FEATURE_SUMMARY}\n\nKey decisions captured:\n- {DECISION_1}: {REASONING_1}\n- {DECISION_2}: {REASONING_2}\n\nFiles changed: {COUNT} total\n- {FILE_1} ({ACTION}: {PURPOSE})\n- {FILE_2} ({ACTION}: {PURPOSE})\n\nChallenges solved:\n- {CHALLENGE_1}: {SOLUTION_1}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nCorrections needed? [Enter to proceed / type corrections]\n```\n\n**Always verify for ARCHIVE** because:\n- Extracting from conversation is inference-based\n- User may have made decisions not explicitly stated\n- Some files may have been modified outside conversation\n- Ensures accurate historical record\n\n**Skip verification for CREATE** because:\n- Template is mostly empty\n- User fills in details themselves\n- No inference risk\n\n### Step 4: Update Navigator Index\n\nEdit `.agent/DEVELOPMENT-README.md` to add task to index:\n\n```markdown\n## Active Tasks\n\n- **TASK-{XX}**: {Feature Name} (Status: In Progress/Completed)\n  - File: `.agent/tasks/TASK-{XX}-{slug}.md`\n  - Started: {Date}\n  - [Completed: {Date}]\n```\n\nKeep index organized (active tasks first, completed below).\n\n### Step 4.5: Sync to Knowledge Graph (v6.0.0+)\n\n**If knowledge graph exists**, sync task to graph:\n\n```bash\nif [ -f \".agent/knowledge/graph.json\" ]; then\n  python3 skills/nav-graph/functions/task_to_graph.py \\\n    --action add \\\n    --task-path \".agent/tasks/TASK-{XX}-{slug}.md\" \\\n    --graph-path .agent/knowledge/graph.json\nfi\n```\n\n**What this does**:\n- Extracts concepts from task content (auth, api, testing, etc.)\n- Adds task node to graph with status and concepts\n- Creates `implements` edges from task to concepts\n- For **completed tasks**: Extracts Technical Decisions as `decision` memories\n\n**Output**:\n```\nAdded task: TASK-XX\nTitle: {Feature Name}\nStatus: completed\nConcepts: auth, api, testing\nDecisions extracted: 2\n```\n\nThis makes the task queryable via \"What do we know about auth?\" and preserves architectural decisions as persistent memories.\n\n### Step 5: Update PM Tool (If Configured)\n\n**If PM tool is Linear**:\n```typescript\ncreate_comment({\n  issueId: \"TASK-XX\",\n  body: \"ğŸ“š Implementation plan documented: .agent/tasks/TASK-XX-feature.md\"\n})\n```\n\n**If PM tool is GitHub**:\n```bash\ngh issue comment {ISSUE-NUMBER} -b \"ğŸ“š Implementation plan: .agent/tasks/TASK-XX-feature.md\"\n```\n\n**If PM tool is none**:\nSkip PM update.\n\n### Step 6: Confirm Success\n\nShow completion message:\n\n```\nâœ… Task documentation created!\n\nTask: TASK-{XX} - {Feature Name}\nFile: .agent/tasks/TASK-{XX}-{slug}.md\nSize: {X} KB (~{Y} tokens)\n\nğŸ“‹ Contains:\n- Implementation phases\n- Technical decisions\n- Files modified\n- [If archived: Challenges & solutions]\n- [If archived: Testing & documentation]\n\nğŸ”— Navigator index updated\n[If PM tool: PM tool comment added]\n\nTo reference later:\nRead .agent/tasks/TASK-{XX}-{slug}.md\n```\n\n## Task Document Template Structure\n\n### For New Tasks (Planning)\n1. Context (problem/goal)\n2. Implementation plan (phases)\n3. Technical decisions (to be made)\n4. Dependencies\n5. Completion checklist\n\n### For Completed Tasks (Archive)\n1. What was built (summary)\n2. Implementation (actual phases)\n3. Technical decisions (what was chosen)\n4. Files modified\n5. Challenges & solutions\n6. Testing & documentation\n\n## Common Use Cases\n\n### Starting New Feature\n```\nUser: \"Create task doc for payments integration\"\nâ†’ Generates TASK-07-payments.md\nâ†’ Empty template for planning\nâ†’ User fills in as they work\n```\n\n### Completing Feature\n```\nUser: \"Document the auth feature I just finished\"\nâ†’ Analyzes conversation\nâ†’ Generates TASK-06-auth.md\nâ†’ Complete implementation record\nâ†’ Archives for future reference\n```\n\n### Mid-Feature Update\n```\nUser: \"Update TASK-05 with OAuth decision\"\nâ†’ Reads existing TASK-05-auth.md\nâ†’ Adds to Technical Decisions section\nâ†’ Preserves rest of document\n```\n\n## Error Handling\n\n**Navigator not initialized**:\n```\nâŒ .agent/tasks/ directory not found\n\nRun /nav:init to set up Navigator structure first.\n```\n\n**Task ID already exists (for creation)**:\n```\nâš ï¸  TASK-{XX} already exists\n\nOptions:\n1. Read existing task\n2. Use different ID\n3. Archive/overwrite existing\n\nYour choice [1-3]:\n```\n\n**Insufficient context to archive**:\n```\nâš ï¸  Not enough conversation context to generate implementation plan\n\nConsider:\n- Provide more details about what was built\n- Manually create task doc\n- Skip archiving\n\nContinue with template? [y/N]:\n```\n\n## Success Criteria\n\nTask documentation is successful when:\n- [ ] Task file created in `.agent/tasks/`\n- [ ] Filename follows convention: `TASK-{XX}-{slug}.md`\n- [ ] Contains all required sections\n- [ ] Navigator index updated\n- [ ] PM tool updated (if configured)\n- [ ] User can reference task later\n\n## Scripts\n\n**generate_task.py**: Create task documentation from conversation\n- Input: Conversation history, task ID\n- Output: Formatted task markdown\n\n**update_index.py**: Update DEVELOPMENT-README.md task index\n- Input: New task info\n- Output: Updated index\n\n## Best Practices\n\n**Good task slugs**:\n- `oauth-implementation` (descriptive)\n- `stripe-payment-flow` (clear purpose)\n- `user-profile-page` (specific feature)\n\n**Bad task slugs**:\n- `feature` (too vague)\n- `fix` (not descriptive)\n- `task1` (meaningless)\n\n**When to create task docs**:\n- âœ… Starting major feature (> 1 day work)\n- âœ… Completing any feature (archive)\n- âœ… Complex implementation (capture decisions)\n- âŒ Tiny bug fixes (use SOPs instead)\n- âŒ Exploratory work (wait until direction clear)\n\n## Notes\n\nTask docs are **living documents**:\n- Created when starting feature (template)\n- Updated during implementation (decisions)\n- Finalized when complete (archive)\n\nThey serve as:\n- Planning tool (before implementation)\n- Progress tracker (during implementation)\n- Historical record (after completion)\n- Knowledge base (for team/future)\n\nThis skill provides same functionality as `/nav:doc feature` command but with natural language invocation.\n",
        "skills/nav-update-claude/skill.md": "---\nname: nav-update-claude\ndescription: Update project CLAUDE.md to latest Navigator version, preserving customizations. Use when user says \"update CLAUDE.md\", \"migrate to v3\", or when detecting outdated Navigator configuration.\nallowed-tools: Read, Write, Edit, Bash\nversion: 1.0.0\n---\n\n# Navigator CLAUDE.md Updater Skill\n\nUpdate project's CLAUDE.md to latest Navigator version (v3.1) while preserving project-specific customizations.\n\n## When to Invoke\n\nInvoke this skill when the user:\n- Says \"update my CLAUDE.md\", \"migrate CLAUDE.md to v3\"\n- Says \"update Navigator configuration\", \"fix my CLAUDE.md\"\n- Mentions outdated commands like \"/nav:start\" and wants to upgrade\n- Complains that Claude doesn't understand Navigator workflow\n\n**DO NOT invoke** if:\n- CLAUDE.md already references v3.1 and natural language commands\n- User is editing CLAUDE.md for project-specific reasons (not Navigator updates)\n- Working on plugin's root CLAUDE.md (not user projects)\n\n## Execution Steps\n\n### Step 1: Detect Current CLAUDE.md Version\n\nCheck if CLAUDE.md exists and detect version:\n\n```bash\nif [ ! -f \"CLAUDE.md\" ]; then\n  echo \"âŒ No CLAUDE.md found in current directory\"\n  echo \"\"\n  echo \"Run 'Initialize Navigator in this project' first.\"\n  exit 1\nfi\n```\n\nUse `version_detector.py` to analyze CLAUDE.md:\n\n```bash\npython3 \"$SKILL_BASE_DIR/functions/version_detector.py\" CLAUDE.md\n```\n\nThis script checks for:\n- Version markers (e.g., \"Navigator Version: 3.1.0\")\n- Slash command references (`/nav:start`, `/nav:doc`, etc.)\n- Skills vs commands language\n- Natural language examples\n\n**Outputs**:\n- `outdated` - Has `/nav:` commands or v1/v2 markers\n- `current` - Already v3.1 with natural language\n- `unknown` - Can't determine (custom/non-Navigator file)\n\n**If `current`**:\n```\nâœ… CLAUDE.md is already up to date (v3.1)\n\nNo migration needed.\n```\nExit successfully.\n\n**If `unknown`**:\n```\nâš ï¸  CLAUDE.md doesn't appear to be a Navigator file\n\nThis might be a custom configuration. Manual review recommended.\nProceed with migration anyway? [y/N]\n```\n\nIf user declines, exit. If accepts, continue.\n\n### Step 2: Backup Current CLAUDE.md\n\nAlways create backup before modifying:\n\n```bash\ncp CLAUDE.md CLAUDE.md.backup\necho \"ğŸ“¦ Backup created: CLAUDE.md.backup\"\n```\n\n### Step 3: Extract Project-Specific Customizations\n\nUse `claude_updater.py` to parse current CLAUDE.md:\n\n```bash\npython3 \"$SKILL_BASE_DIR/functions/claude_updater.py\" extract CLAUDE.md > /tmp/nav-customizations.json\n```\n\nThis extracts:\n- **Project name** (from title)\n- **Project description** (from Context section)\n- **Tech stack** (languages, frameworks)\n- **Code standards** (custom rules beyond Navigator defaults)\n- **Forbidden actions** (project-specific restrictions)\n- **PM tool configuration** (Linear, GitHub, Jira, etc.)\n- **Custom sections** (anything not in Navigator template)\n\n### Step 4: Generate Updated CLAUDE.md\n\nApply latest template with extracted customizations:\n\n```bash\n# Template fetching now automatic via get_template_path():\n# 1. Tries GitHub (version-matched)\n# 2. Falls back to bundled if offline\npython3 \"$SKILL_BASE_DIR/functions/claude_updater.py\" generate \\\n  --customizations /tmp/nav-customizations.json \\\n  --template \"$SKILL_BASE_DIR/../../templates/CLAUDE.md\" \\\n  --output CLAUDE.md\n```\n\n**Template Source Priority**:\n1. **GitHub** (version-matched): Fetches from `https://raw.githubusercontent.com/alekspetrov/navigator/v{version}/templates/CLAUDE.md`\n   - Matches installed plugin version (e.g., v4.3.0)\n   - Always up-to-date with release\n   - Works with pre-releases\n2. **Bundled** (fallback): Uses `templates/CLAUDE.md` from installed plugin\n   - Offline fallback\n   - Guaranteed availability\n\n**What this does**:\n1. Loads template (GitHub or bundled)\n2. Replaces placeholders with extracted data\n3. Preserves custom sections\n4. Updates Navigator workflow to natural language\n5. Removes slash command references\n6. Adds skills explanation\n\n### Step 5: Show Diff and Confirm\n\nDisplay changes for user review:\n\n```bash\necho \"\"\necho \"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\"\necho \"ğŸ“ CHANGES TO CLAUDE.MD\"\necho \"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\"\necho \"\"\n\n# Show unified diff\ndiff -u CLAUDE.md.backup CLAUDE.md || true\n\necho \"\"\necho \"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\"\n```\n\n### Step 6: Verify and Commit\n\nShow summary of changes:\n\n```\nâœ… CLAUDE.md Updated to v3.1\n\nKey changes:\n  âœ“ Removed slash command references (e.g., /nav:start)\n  âœ“ Added natural language examples (\"Start my Navigator session\")\n  âœ“ Added skills architecture explanation\n  âœ“ Updated Navigator workflow section\n  âœ“ Preserved your project-specific customizations:\n    - Tech stack: [list]\n    - Code standards: [count] custom rules\n    - Forbidden actions: [count] custom rules\n\nBackup saved: CLAUDE.md.backup\n\nNext steps:\n  1. Review changes: git diff CLAUDE.md\n  2. Test: \"Start my Navigator session\" should work\n  3. Commit: git add CLAUDE.md && git commit -m \"chore: update CLAUDE.md to Navigator v3.1\"\n  4. Remove backup: rm CLAUDE.md.backup\n\nRollback if needed: mv CLAUDE.md.backup CLAUDE.md\n```\n\n### Step 7: Update .nav-config.json\n\nIf config exists, migrate to latest version with new sections:\n\n```bash\nif [ -f \".agent/.nav-config.json\" ]; then\n  python3 \"$SKILL_BASE_DIR/functions/config_migrator.py\" .agent/.nav-config.json\nfi\n```\n\n**What this does**:\n1. Detects current config version\n2. Adds missing sections based on version:\n   - v5.4.0+: `simplification` config\n   - v5.5.0+: `auto_update` config\n   - v5.6.0+: `task_mode` config\n3. Updates version marker to current\n\n**Example output**:\n```\nâœ… Config migrated: v5.4.0 â†’ v5.6.0\n\nChanges:\n  + auto_update: (new section added)\n  + task_mode: (new section added)\n  ~ version: 5.4.0 â†’ 5.6.0\n```\n\n**Dry run** (preview changes without applying):\n```bash\npython3 \"$SKILL_BASE_DIR/functions/config_migrator.py\" .agent/.nav-config.json --dry-run\n```\n\n## Predefined Functions\n\n### functions/version_detector.py\n\n**Purpose**: Detect CLAUDE.md version (outdated, current, unknown)\n\n**Usage**:\n```bash\npython3 version_detector.py CLAUDE.md\n```\n\n**Output**: Prints one of: `outdated`, `current`, `unknown`\n\n**Exit codes**:\n- 0: Success (version detected)\n- 1: File not found\n- 2: Parse error\n\n**Detection logic**:\n1. Check for version marker: `Navigator Version: X.X.X`\n2. Check for slash commands: `/nav:start`, `/jitd:`, etc.\n3. Check for natural language examples: `\"Start my Navigator session\"`\n4. Check for skills section\n\n**Heuristics**:\n- Has `/nav:` â†’ outdated\n- Version < 3.0 â†’ outdated\n- Version >= 3.0 + natural language â†’ current\n- No version + no Navigator markers â†’ unknown\n\n### functions/claude_updater.py\n\n**Purpose**: Extract customizations and generate updated CLAUDE.md\n\n**Usage**:\n```bash\n# Extract customizations\npython3 claude_updater.py extract CLAUDE.md > customizations.json\n\n# Generate updated file\npython3 claude_updater.py generate \\\n  --customizations customizations.json \\\n  --template ../../templates/CLAUDE.md \\\n  --output CLAUDE.md\n```\n\n**Extract mode** outputs JSON:\n```json\n{\n  \"project_name\": \"MyApp\",\n  \"description\": \"Brief project description\",\n  \"tech_stack\": [\"Next.js\", \"TypeScript\", \"PostgreSQL\"],\n  \"code_standards\": [\"Custom rule 1\", \"Custom rule 2\"],\n  \"forbidden_actions\": [\"Custom restriction 1\"],\n  \"pm_tool\": \"github\",\n  \"custom_sections\": {\n    \"Deployment\": \"Custom deployment instructions...\"\n  }\n}\n```\n\n**Generate mode**:\n1. Loads template\n2. Replaces `[Project Name]` with `project_name`\n3. Replaces `[Brief project description]` with `description`\n4. Replaces `[List your technologies...]` with `tech_stack`\n5. Appends custom code standards\n6. Appends custom forbidden actions\n7. Inserts custom sections at end\n\n### functions/config_migrator.py\n\n**Purpose**: Migrate .nav-config.json to latest version, adding missing sections\n\n**Usage**:\n```bash\n# Migrate config (applies changes)\npython3 config_migrator.py .agent/.nav-config.json\n\n# Preview changes without applying\npython3 config_migrator.py .agent/.nav-config.json --dry-run\n\n# JSON output\npython3 config_migrator.py .agent/.nav-config.json --json\n```\n\n**Version-specific configs added**:\n- v5.4.0: `simplification` (code clarity improvements)\n- v5.5.0: `auto_update` (auto-update on session start)\n- v5.6.0: `task_mode` (unified workflow orchestration)\n\n**Output example**:\n```\nâœ… Config migrated: v5.4.0 â†’ v5.6.0\n\nChanges:\n  + auto_update: (new section added)\n  + task_mode: (new section added)\n  ~ version: 5.4.0 â†’ 5.6.0\n```\n\n**Exit codes**:\n- 0: Success (config migrated or already current)\n- 1: Error (file not found, invalid JSON)\n\n## Error Handling\n\n**No CLAUDE.md found**:\n```\nâŒ No CLAUDE.md found in current directory\n\nThis project doesn't appear to have Navigator initialized.\nRun \"Initialize Navigator in this project\" first.\n```\n\n**Backup failed**:\n```\nâŒ Failed to create backup: CLAUDE.md.backup\n\nCheck file permissions and disk space.\n```\n\n**Parse error**:\n```\nâŒ Failed to parse CLAUDE.md\n\nThe file might be corrupted or have unusual formatting.\nManual review required.\n\nBackup saved at: CLAUDE.md.backup\n```\n\n**Template not found**:\n```\nâŒ Navigator template not found\n\nThis might be a plugin installation issue.\nTry reinstalling Navigator plugin: /plugin update navigator\n```\n\n## Success Criteria\n\nMigration is successful when:\n- [ ] CLAUDE.md backed up successfully\n- [ ] Version detected correctly\n- [ ] Customizations extracted\n- [ ] New file generated with v3.1 template\n- [ ] Project-specific content preserved\n- [ ] Diff shown to user for review\n- [ ] Commit instructions provided\n\n## Rollback Procedure\n\nIf migration fails or user is unhappy:\n\n```bash\n# Restore backup\nmv CLAUDE.md.backup CLAUDE.md\n\n# Or compare and manually fix\ndiff CLAUDE.md.backup CLAUDE.md\n```\n\n## Notes\n\nThis skill:\n- **Preserves all customizations** (tech stack, standards, restrictions)\n- **Non-destructive** (always creates backup)\n- **Idempotent** (running multiple times is safe)\n- **Transparent** (shows diff before finalizing)\n\n**What gets updated**:\n- Navigator version marker\n- Slash commands â†’ natural language\n- Workflow examples\n- Skills vs commands explanation\n- Token optimization strategy\n\n**What gets preserved**:\n- Project name and description\n- Tech stack\n- Code standards\n- Forbidden actions\n- PM tool configuration\n- Custom sections\n\n## Related Skills\n\n- **nav-init**: Initialize Navigator in new project (creates CLAUDE.md from scratch)\n- **nav-start**: Start session (uses updated CLAUDE.md)\n- **nav-task**: Task documentation (benefits from updated workflow)\n\n## Examples\n\n### Example 1: Simple Update\n\n```\nUser: \"Update my CLAUDE.md to v3.1\"",
        "skills/nav-upgrade/SKILL.md": "---\nname: nav-upgrade\ndescription: Automates Navigator plugin updates. Detects current version, updates plugin, verifies installation, updates project CLAUDE.md, and validates new features. Auto-invoke when user mentions upgrading Navigator or getting new features.\nallowed-tools: Bash, Read, Write, Edit, TodoWrite\nversion: 1.0.0\n---\n\n# Navigator Upgrade Skill\n\nAutomate Navigator plugin updates with version detection, conflict resolution, and post-update validation.\n\n## When to Invoke\n\nAuto-invoke when user says:\n- \"Update Navigator\"\n- \"Upgrade Navigator plugin\"\n- \"Get latest Navigator version\"\n- \"Update to Navigator v3.3.0\"\n- \"Install new Navigator features\"\n- \"Check for Navigator updates\"\n\n## What This Does\n\n**6-Step Workflow**:\n1. **Version Detection**: Check current Navigator version vs latest\n2. **Plugin Update**: Execute `/plugin update navigator`\n3. **Verification**: Confirm update succeeded\n4. **CLAUDE.md Update**: Update project configuration (via nav-update-claude)\n5. **Hooks Setup**: Install/update token monitoring hooks in project\n6. **Feature Discovery**: Show new features available\n\n**Time Savings**: Manual update (10-15 min) â†’ Automated (2 min)\n\n---\n\n## Prerequisites\n\n- Navigator plugin installed\n- Project initialized with Navigator\n- Internet connection for plugin update\n\n---\n\n## Workflow Protocol\n\n### Step 1: Version Detection\n\n**Execute**: `version_detector.py`\n\n**Check both stable and pre-release versions**:\n```bash\n# Current installed version\ngrep '\"version\"' .claude-plugin/plugin.json\n\n# Get all releases (including pre-releases)\ncurl -s https://api.github.com/repos/alekspetrov/navigator/releases\n\n# Parse:\n# - Latest stable (prerelease: false)\n# - Latest pre-release (prerelease: true)\n# - Compare with current version\n```\n\n**Output scenarios**:\n\n**Scenario 1: Stable update available**\n```json\n{\n  \"current_version\": \"4.0.0\",\n  \"latest_stable\": \"4.2.0\",\n  \"latest_prerelease\": null,\n  \"recommendation\": \"update_to_stable\"\n}\n```\n\n**Scenario 2: Pre-release available (user on stable)**\n```json\n{\n  \"current_version\": \"4.0.0\",\n  \"latest_stable\": \"4.0.0\",\n  \"latest_prerelease\": \"4.3.0\",\n  \"recommendation\": \"offer_prerelease_option\"\n}\n```\n\n**Present choice**:\n```\nâœ… You're on the latest stable version (v4.0.0)\n\nâš¡ Experimental version available: v4.3.0\n\nNew in v4.3.0 (Experimental):\nâ€¢ Multi-Claude agentic workflows\nâ€¢ 30% success rate (use for simple features)\nâ€¢ PM integration with ticket closing\n\nOptions:\n[1] Stay on stable v4.0.0 (recommended)\n[2] Try experimental v4.3.0 (early adopter)\n\nYour choice [1-2]:\n```\n\n**Scenario 3: Already on latest (stable or pre-release)**\n```\nâœ… You're on v4.3.0 (latest experimental)\n\nLatest stable: v4.0.0\nStatus: You're ahead of stable (testing experimental features)\n\nNew features in your version:\n- Multi-Claude workflows\n- Task agents in sub-Claude phases\n```\n\nSkip to Step 5 (Feature Discovery).\n\n**Scenario 4: On pre-release, newer stable available**\n```\nâš ï¸  You're on v4.3.0 (experimental)\nLatest stable: v4.6.0\n\nRecommendation: Update to stable v4.6.0\nExperimental features from v4.3.0 are now stable.\n```\n\n---\n\n### Step 2: Plugin Update\n\n**Scenario-based update strategy**:\n\n#### Scenario 2: Pre-release Available (User on Stable)\n\nWhen pre-release detected, present choice using AskUserQuestion tool:\n\n```markdown\nâœ… You're on latest stable version (v4.0.0)\n\nâš¡ Experimental version available: v4.3.0\n\nNew in v4.3.0 (Experimental):\nâ€¢ Multi-Claude agentic workflows\nâ€¢ 30% success rate (use for simple features)\nâ€¢ PM integration with ticket closing\n\n**Question**: Which version would you like?\n\n**Options**:\n[1] **Stay on stable v4.0.0** (recommended)\n    - Production-ready\n    - No experimental features\n    - Most reliable\n\n[2] **Try experimental v4.3.0** (early adopter)\n    - Multi-Claude workflows\n    - Latest features\n    - 30% completion rate\n    - Help test new functionality\n\nYour choice?\n```\n\n**If user chooses [1] (Stay stable)**:\n```\nâœ“ Staying on v4.0.0 (latest stable)\n\nNo action needed. Run nav-upgrade again when you're ready to try experimental features.\n```\n\n**If user chooses [2] (Try experimental)**:\n```bash\n# Uninstall current version\n/plugin uninstall navigator\n\n# Add marketplace (if not already added)\n/plugin marketplace add alekspetrov/navigator\n\n# Install specific pre-release version\n# Note: /plugin update only fetches stable, must install specific version\ngit clone https://github.com/alekspetrov/navigator.git /tmp/navigator-v4.3.0\ncd /tmp/navigator-v4.3.0\ngit checkout v4.3.0\n\n# Install from local checkout\n/plugin install /tmp/navigator-v4.3.0\n```\n\n**Then verify installation**:\n```bash\n/plugin list | grep navigator\n# Should show: navigator (v4.3.0)\n```\n\n#### Scenario 1: Stable Update Available\n\n**Execute**: `/plugin update navigator`\n\n**Monitor output**:\n```\nUpdating navigator...\nâœ… Navigator updated to v4.2.0\n```\n\n**If update fails**:\n```\nâŒ Update failed: [error message]\n\nTroubleshooting:\n1. Restart Claude Code\n2. Try: /plugin uninstall navigator && /plugin install navigator\n3. Check internet connection\n4. Report issue: https://github.com/alekspetrov/navigator/issues\n```\n\n**Automatic retry** (once):\nIf update fails, try uninstall/reinstall automatically:\n```bash\n/plugin uninstall navigator\n/plugin marketplace add alekspetrov/navigator\n/plugin install navigator\n```\n\n---\n\n### Step 3: Verification\n\n**Execute**: `plugin_verifier.py`\n\n**Verify**:\n1. Plugin version matches latest\n2. New skills registered in plugin.json\n3. Skills are invokable\n\n**Test new skills** (v3.3.0 example):\n```bash\n# Test that visual-regression skill exists\nls ~/.config/claude/plugins/navigator/skills/visual-regression/SKILL.md 2>/dev/null || echo \"Skill not found\"\n```\n\n**Output**:\n```\nâœ… Update Verification\n\nVersion: v3.3.0 âœ…\nNew Skills Registered: visual-regression âœ…\nSkills Invokable: âœ…\n\nUpdate successful!\n```\n\n**If verification fails**:\n```\nâš ï¸ Update completed but verification failed\n\nIssue: visual-regression skill not found\nFix: Restart Claude Code to reload skills\n\nAfter restarting, verify:\n\"Set up visual regression for Button\"\n```\n\nPrompt user to restart Claude Code.\n\n**IMPORTANT - Restart Required After All Updates**:\n\nClaude Code caches skill paths at session start. Even successful updates require a restart to load new skills:\n\n```\nâš ï¸  RESTART REQUIRED\n\nPlugin updated successfully to vX.Y.Z.\nClaude Code caches skill paths at session start.\n\nTo use new/updated skills:\n1. Close Claude Code\n2. Reopen Claude Code\n3. Run \"nav start\" to verify new version\n\nWithout restart:\n- Old skill versions continue running\n- New skills won't be available\n- May see \"skill not found\" errors\n```\n\nThis is a Claude Code behavior, not a Navigator issue. The plugin files update correctly, but the active session continues using cached skill paths from the old version.\n\n---\n\n### Step 4: Update Project CLAUDE.md (Automatic)\n\n**After plugin update, automatically invoke**: `nav-update-claude` skill\n\n```\nğŸ”„ Syncing project CLAUDE.md with updated plugin...\n\nâœ“ Using template from GitHub (v4.3.0)\nâœ“ Extracted customizations\nâœ“ Generated updated CLAUDE.md\n```\n\n**What happens automatically**:\n1. Detects new plugin version (e.g., v4.3.0)\n2. Fetches matching template from GitHub\n3. Preserves project customizations\n4. Updates CLAUDE.md in current project\n5. Shows diff for review\n\n**Template sync benefits**:\n- âœ… CLAUDE.md always matches installed plugin version\n- âœ… No template drift (v4.0 templates with v4.3 plugin)\n- âœ… Pre-release templates accessible\n- âœ… Offline fallback to bundled templates\n\n**User action required**:\n```\nReview changes and commit:\n\ngit add CLAUDE.md\ngit commit -m \"chore: update CLAUDE.md to Navigator v4.3.0\"\n```\n\n**See**: `nav-update-claude` skill for details.\n\n---\n\n### Step 5: Setup Token Monitoring Hooks\n\n**Install or update project hooks** for token budget monitoring:\n\n```bash\n# Create .claude directory if not exists\nmkdir -p .claude\n\n# Check if settings.json exists\nif [ -f \".claude/settings.json\" ]; then\n  # Backup existing settings\n  cp .claude/settings.json .claude/settings.json.backup\n  echo \"âœ“ Backed up existing .claude/settings.json\"\nfi\n\n# Write hook configuration\ncat > .claude/settings.json << 'EOF'\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit|Bash|Task\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 \\\"${CLAUDE_PLUGIN_DIR}/hooks/monitor-tokens.py\\\"\",\n            \"timeout\": 5\n          }\n        ]\n      }\n    ]\n  }\n}\nEOF\n\necho \"âœ“ Token monitoring hook installed\"\n```\n\n**What this enables**:\n- Monitors context usage after each tool call\n- Warns at 70% usage, critical alert at 85%\n- Suggests `/nav:compact` when approaching limits\n- Prevents context crashes during long sessions\n\n**Output**:\n```\nâœ“ Token monitoring hook installed\n\nNew in v4.6.0:\n  - Automatic context budget monitoring\n  - Warns before you hit context limits\n  - Suggests compact at optimal times\n```\n\n---\n\n### Step 6: Post-Upgrade Setup Check\n\n**Check if new features require setup**:\n\n```bash\n# Check for skills with setup requirements\nif [ -f \"$NAVIGATOR_PATH/skills/product-design/setup.sh\" ]; then\n  # Check if venv exists\n  if [ ! -d \"$NAVIGATOR_PATH/skills/product-design/venv\" ]; then\n    echo \"âš ï¸  product-design skill requires setup\"\n    NEEDS_SETUP=true\n  fi\nfi\n```\n\n**If setup needed, show instructions**:\n\n```markdown\nâš ï¸  New Feature Requires Setup\n\nThe product-design skill (v3.4.0+) requires Python dependencies:\n\n**One-time setup** (30 seconds):\n```bash\ncd ~/.claude/plugins/marketplaces/jitd-marketplace/skills/product-design\n./setup.sh\n```\n\n**What this installs**:\n- Python MCP SDK for direct Figma connection\n- 95% orchestration reduction\n- 92% token savings\n\n**After setup, use**:\n\"Review this Figma design: [URL]\"\n```\n\n**Record setup needed in TodoWrite** for tracking.\n\n---\n\n### Step 7: Feature Discovery\n\n**Show new features** available in updated version.\n\n**For v3.3.0 update**:\n````markdown\nğŸ‰ Navigator v3.3.0 Update Complete!\n\n## New Features Available\n\n### visual-regression Skill (NEW)\nSet up Storybook + Chromatic in 5 minutes instead of 2-3 hours.\n\n**Usage**:\n```\n\"Set up visual regression for ProfileCard\"\n\"Add Chromatic to Button component\"\n\"Configure visual tests for Input, Card, Modal\"\n```\n\n**What it does**:\nâœ… Generates Storybook stories with all variants\nâœ… Configures Chromatic/Percy/BackstopJS\nâœ… Creates CI workflows (GitHub Actions, GitLab CI)\nâœ… Adds accessibility tests\n\n**Complete Design Pipeline** (v3.2 + v3.3):\n1. \"Review this design from Figma\" (v3.2)\n2. Implement components\n3. \"Set up visual regression\" (v3.3 NEW)\n4. Automated visual testing in CI\n\n### Updated Skills Count\n- **17 total skills** (was 16)\n- 10 core Navigator skills\n- 7 development skills\n\n### Integration\nvisual-regression integrates with product-design skill for complete designâ†’codeâ†’testing workflow.\n\n## Try It Now\n\nIf you have Storybook in this project:\n```\n\"Set up visual regression for [ComponentName]\"\n```\n\nIf you don't have Storybook:\n```bash\nnpx storybook init\n```\n\nThen:\n```\n\"Set up visual regression for [ComponentName]\"\n```\n\n## Documentation\n\n- Release Notes: https://github.com/alekspetrov/navigator/releases/tag/v3.3.0\n- Skill Docs: skills/visual-regression/SKILL.md\n- Examples: skills/visual-regression/examples/\n- SOP: .agent/sops/testing/visual-regression-setup.md (created in your project)\n````\n\n---\n\n## Predefined Functions\n\n### functions/version_detector.py\n\n**Purpose**: Detect current and latest Navigator versions\n\n**Usage**:\n```bash\npython3 functions/version_detector.py\n```\n\n**Output**:\n```json\n{\n  \"current_version\": \"3.2.0\",\n  \"latest_version\": \"3.3.0\",\n  \"update_available\": true,\n  \"release_url\": \"https://github.com/alekspetrov/navigator/releases/tag/v3.3.0\",\n  \"changes\": {\n    \"new_skills\": [\"visual-regression\"],\n    \"updated_skills\": [\"product-design\"],\n    \"new_features\": [\"Multi-tool VR support\", \"CI workflows\"],\n    \"breaking_changes\": []\n  }\n}\n```\n\n### functions/plugin_updater.py\n\n**Purpose**: Execute plugin update with retry logic\n\n**Usage**:\n```bash\npython3 functions/plugin_updater.py --target-version 3.3.0\n```\n\n**Actions**:\n1. Execute `/plugin update navigator`\n2. If fails, retry with uninstall/reinstall\n3. Verify update succeeded\n4. Return status\n\n### functions/plugin_verifier.py\n\n**Purpose**: Verify update completed successfully\n\n**Usage**:\n```bash\npython3 functions/plugin_verifier.py --expected-version 3.3.0\n```\n\n**Checks**:\n- Plugin version matches expected\n- New skills exist in filesystem\n- Skills registered in plugin.json\n- Skills are invokable (test invocation)\n\n---\n\n## Error Handling\n\n### Update Failed: Network Error\n\n```\nâŒ Update failed: Could not connect to plugin marketplace\n\nFix:\n1. Check internet connection\n2. Try again in a few minutes\n3. Manual update: /plugin uninstall navigator && /plugin install navigator\n```\n\n### Update Failed: Permission Denied\n\n```\nâŒ Update failed: Permission denied\n\nFix:\n1. Close Claude Code\n2. Check ~/.config/claude/plugins/ permissions\n3. Restart Claude Code\n4. Try update again\n```\n\n### Verification Failed: Skills Not Found\n\n```\nâš ï¸ Update completed but new skills not found\n\nFix:\n1. Restart Claude Code (required for skill reload)\n2. Verify: /plugin list\n3. Test: \"Set up visual regression for Button\"\n```\n\nAutomatically prompt user to restart.\n\n### CLAUDE.md Update Conflicts\n\n```\nâš ï¸ CLAUDE.md update has conflicts with your customizations\n\nOptions:\n[1] Keep my customizations (merge new features)\n[2] Use new template (lose customizations)\n[3] Show me the diff first\n\nReply with choice\n```\n\nLet user decide how to handle conflicts.\n\n---\n\n## Upgrade Paths\n\n### From v3.0.x to v3.3.0\n\n**Changes**:\n- +2 skills (nav-markers in v3.1, visual-regression in v3.3)\n- OpenTelemetry integration (v3.1)\n- Product design skill (v3.2)\n- Visual regression skill (v3.3)\n\n**Breaking changes**: None (fully backward compatible)\n\n### From v3.1.x to v3.3.0\n\n**Changes**:\n- Product design skill (v3.2)\n- Visual regression skill (v3.3)\n- Updated skills count (17 total)\n\n**Breaking changes**: None\n\n### From v3.2.x to v3.3.0\n\n**Changes**:\n- Visual regression skill\n- Integration with product-design workflow\n- Updated skills count (17 total)\n\n**Breaking changes**: None\n\n---\n\n## Post-Update Checklist\n\nAfter upgrade, verify:\n\n- âœ… `/plugin list` shows new version\n- âœ… CLAUDE.md updated with new patterns\n- âœ… New skills auto-invoke on natural language\n- âœ… Existing skills still work\n- âœ… No conflicts in project configuration\n\n**If all checked**: Update successful!\n\n---\n\n## Rollback\n\nIf update causes issues:\n\n```\n\"Rollback Navigator to v3.2.0\"\n```\n\nThis will:\n1. Uninstall current version\n2. Install specific version from marketplace\n3. Update CLAUDE.md to match\n4. Verify rollback succeeded\n\n---\n\n## Integration Points\n\n### With nav-update-claude\n\nAfter plugin update, automatically invokes `nav-update-claude` to sync project configuration.\n\n### With nav-start\n\nAfter update, `nav-start` shows new features available in session statistics.\n\n### With nav-init\n\nIf upgrading before project initialization, suggests running `nav-init` with latest features.\n\n---\n\n## Examples\n\n### Example 1: Simple Update\n\n```\nUser: \"Update Navigator\"\n\nâ†’ Detects: v3.2.0 â†’ v3.3.0 available\nâ†’ Updates plugin\nâ†’ Updates CLAUDE.md\nâ†’ Shows: \"visual-regression skill now available\"\nâ†’ Suggests: \"Set up visual regression for [Component]\"\n```\n\n### Example 2: Already on Latest\n\n```\nUser: \"Update Navigator\"\n\nâ†’ Detects: Already on v3.3.0\nâ†’ Shows new features available\nâ†’ Suggests trying visual-regression if not used yet\n```\n\n### Example 3: Update with Restart Required\n\n```\nUser: \"Update Navigator\"\n\nâ†’ Updates plugin\nâ†’ Verification: Skills not found (needs restart)\nâ†’ Prompts: \"Please restart Claude Code to complete update\"\nâ†’ After restart: Verification succeeds\n```\n\n---\n\n## Best Practices\n\n1. **Update regularly**: Check for updates monthly\n2. **Read release notes**: Understand new features before using\n3. **Test new skills**: Try new features in test project first\n4. **Report issues**: File GitHub issues for update problems\n5. **Backup CLAUDE.md**: Keep backup before update (auto-created)\n\n---\n\n## Version History\n\n- **v1.0.0**: Initial nav-upgrade skill (Navigator v3.3.1)\n\n---\n\n## Future Enhancements\n\n- Auto-update check on `nav-start` (opt-in)\n- Changelog display in CLI\n- Update notifications for major versions\n- Automated migration scripts for breaking changes\n\n---\n\n**Last Updated**: 2025-10-21\n**Skill Type**: Core Navigator\n**Auto-Invocation**: Yes\n",
        "skills/plugin-slash-command/SKILL.md": "---\nname: plugin-slash-command\ndescription: Generate new Navigator slash commands following project conventions. Use when user says \"add slash command\", \"create command\", \"new /nav command\", or \"add /nav:[name] command\".\nallowed-tools: Read, Write, Edit, Grep, Glob, Bash\nversion: 1.0.0\n---\n\n# Navigator Slash Command Generator\n\nGenerate new slash commands for the Navigator plugin following established conventions and patterns.\n\n## When to Invoke\n\nAuto-invoke when user says:\n- \"Add a slash command for...\"\n- \"Create a new /nav:[name] command\"\n- \"Generate slash command...\"\n- \"Add /nav:[feature] command\"\n- \"New Navigator command for...\"\n\n## What This Does\n\n1. Asks for command details (name, purpose, complexity)\n2. Analyzes existing commands for pattern matching\n3. Generates command markdown file with proper structure\n4. Validates YAML frontmatter and formatting\n5. Shows usage example\n\n## Execution Steps\n\n### Step 1: Gather Command Requirements\n\nAsk user:\n- **Command name** (kebab-case, without /nav: prefix)\n  - Example: \"marker\", \"compact\", \"update-doc\"\n- **Command purpose** (one sentence description)\n  - Example: \"Create context markers to save conversation state\"\n- **Command complexity**:\n  - Simple: Single action, minimal steps (e.g., marker)\n  - Medium: Multiple steps, some logic (e.g., compact)\n  - Complex: Multi-phase execution, integrations (e.g., init, start)\n- **User-facing or internal**?\n  - User-facing: Part of standard Navigator workflow\n  - Internal: For plugin development/maintenance\n\n### Step 2: Analyze Similar Commands\n\nUse Task agent to find similar commands:\n```\n\"Find existing Navigator commands similar to [purpose]:\n - Commands in commands/*.md\n - Similar complexity level\n - Common structure patterns\n - Return 2-3 best examples\"\n```\n\n**What to extract from examples**:\n- Section structure (What This Does, When to Use, etc.)\n- Tone and style (conversational, 2nd person)\n- Emoji usage patterns\n- Example format\n- Troubleshooting patterns\n\n### Step 3: Design Command Structure\n\nBased on complexity level:\n\n**Simple commands**:\n```\n- YAML frontmatter (description)\n- Title\n- What This Does (2-3 sentences)\n- Usage (basic syntax + examples)\n- When to Use (2-3 scenarios)\n- Expected Output\n- Troubleshooting (2-3 common issues)\n- Closing statement\n```\n\n**Medium commands**:\n```\n- YAML frontmatter\n- Title + overview\n- What This Does (detailed explanation)\n- When to Use (5-6 scenarios with examples)\n- Usage / Execution Steps\n- Output Format\n- Integration notes (if applicable)\n- Troubleshooting (4-5 issues)\n- Best Practices\n- Closing statement\n```\n\n**Complex commands**:\n```\n- YAML frontmatter\n- Title + comprehensive overview\n- What This Does (with comparisons)\n- Execution Plan (multi-step)\n- Pre-flight checks\n- Step-by-step implementation\n- Validation steps\n- Integration with PM tools (if applicable)\n- Success criteria\n- Troubleshooting (comprehensive)\n- Edge cases\n- Performance notes\n- Closing statement\n```\n\n### Step 4: Generate Command File\n\n**Use predefined function**: `functions/command_generator.py`\n\n```python\n# Generates command markdown following Navigator conventions\ngenerate_command(\n    name=\"[command-name]\",\n    description=\"[one-line purpose]\",\n    complexity=\"simple|medium|complex\",\n    sections={\n        \"what_this_does\": \"...\",\n        \"when_to_use\": [...],\n        \"usage\": \"...\",\n        \"execution_steps\": [...],\n        \"troubleshooting\": [...]\n    }\n)\n```\n\n**File location**: `commands/[command-name].md`\n\n**Structure**:\n1. YAML frontmatter with description\n2. Title (# Command Name - Navigator Context)\n3. Overview paragraph (what user is doing)\n4. Content sections (based on complexity)\n5. Closing statement (emoji + key takeaway)\n\n### Step 5: Validate Generated Command\n\n**Use predefined function**: `functions/command_validator.py`\n\nChecks:\n- [ ] YAML frontmatter is valid\n- [ ] Description field exists and is clear\n- [ ] Markdown structure is correct\n- [ ] All sections have content\n- [ ] Code blocks are properly formatted\n- [ ] Examples are realistic\n- [ ] Troubleshooting addresses real issues\n- [ ] Tone matches Navigator style (conversational, helpful)\n- [ ] Emoji usage is consistent with other commands\n- [ ] File name matches command name (kebab-case)\n\n### Step 6: Show Usage Example\n\nDisplay:\n```\nâœ… Slash Command Created: /nav:[command-name]\n\nFile: commands/[command-name].md\nLines: [count]\nComplexity: [simple/medium/complex]\n\nTry it:\n/nav:[command-name]\n\nWhat it does:\n[brief description]\n\nNext steps:\n1. Test the command manually\n2. Update plugin documentation if public-facing\n3. Add to CLAUDE.md command list if needed\n```\n\n---\n\n## Example Workflows\n\n### Example 1: Simple Command\n\n**User**: \"Add a slash command for showing Navigator version\"\n\n**Execution**:\n\n1. **Gather requirements**:\n   ```\n   Name: version\n   Purpose: Display current Navigator plugin version\n   Complexity: Simple\n   Type: User-facing\n   ```\n\n2. **Analyze similar** (via Task agent):\n   ```\n   Found similar: marker.md (simple, informational)\n   Pattern: Short description â†’ Usage â†’ When to use â†’ Output\n   ```\n\n3. **Design structure**:\n   ```\n   - Frontmatter\n   - Title: \"Navigator Version Info\"\n   - What This Does: 1 paragraph\n   - Usage: Basic syntax\n   - When to Use: 2-3 scenarios\n   - Output Format: Example\n   - Closing statement\n   ```\n\n4. **Generate**: `commands/version.md`\n   ```markdown\n   ---\n   description: Display Navigator plugin version and system info\n   ---\n\n   # Navigator Version Info\n\n   Check which version of Navigator you're running.\n\n   ## What This Does\n\n   Displays the current Navigator plugin version, Claude Code version, and system configuration.\n\n   ## Usage\n\n   ```bash\n   /nav:version\n   ```\n\n   ## When to Use\n\n   **Reporting issues**:\n   - Include version info in bug reports\n   - Help maintainers reproduce issues\n\n   **Checking updates**:\n   - See if you're on latest version\n   - Compare with marketplace version\n\n   **System diagnostics**:\n   - Verify plugin installed correctly\n   - Check configuration loaded\n\n   ## Output Format\n\n   ```\n   Navigator Plugin\n   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n   Version: 2.2.0\n   Installed: /Users/you/.claude/plugins/jitd\n   Config: .agent/.nav-config.json\n\n   System:\n   - Claude Code: 1.5.0\n   - Project: /Users/you/project\n   - Platform: darwin\n   ```\n\n   **Keep your Navigator up to date for latest features** ğŸš€\n   ```\n\n5. **Validate**: âœ… All checks pass\n\n6. **Show usage**:\n   ```\n   âœ… Slash Command Created: /nav:version\n\n   File: commands/version.md\n   Lines: 45\n   Complexity: Simple\n\n   Try it: /nav:version\n   ```\n\n### Example 2: Medium Command\n\n**User**: \"Create a command for archiving old task documentation\"\n\n**Execution**:\n\n1. **Gather requirements**:\n   ```\n   Name: archive-tasks\n   Purpose: Move completed tasks to archive directory\n   Complexity: Medium (file operations, validation)\n   Type: User-facing\n   ```\n\n2. **Analyze similar**:\n   ```\n   Found: markers.md (file management, user selection)\n   Found: compact.md (multi-step process)\n   Pattern: Overview â†’ Execution Plan â†’ Steps â†’ Validation\n   ```\n\n3. **Design structure**:\n   ```\n   - Frontmatter\n   - Title + overview\n   - What This Does (comparison with manual approach)\n   - When to Use (5 scenarios)\n   - Execution Plan (Step 1-4)\n   - Output Format\n   - Troubleshooting (4 issues)\n   - Best Practices\n   - Closing\n   ```\n\n4. **Generate**: `commands/archive-tasks.md` (full content)\n\n5. **Validate**: âœ… All checks pass\n\n6. **Show usage**: Command ready to use\n\n---\n\n## Output Format\n\n**After generating command, show**:\n\n```\nâœ… Slash Command Created: /nav:[name]\n\nStructure:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“„ commands/[name].md\n\nSections:\nâœ… YAML frontmatter\nâœ… Title and overview\nâœ… What This Does\nâœ… When to Use ([N] scenarios)\nâœ… Usage / Execution Plan\nâœ… [Additional sections based on complexity]\nâœ… Troubleshooting\nâœ… Closing statement\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nCommand: /nav:[name]\nPurpose: [brief description]\nLines: [count]\n\nTest it:\n/nav:[name]\n\nDocumentation:\n- Add to README.md if user-facing\n- Update CLAUDE.md command list\n- Add to plugin.json if needed\n```\n\n---\n\n## Best Practices\n\n### Command Naming\n- Use kebab-case (marker, update-doc, archive-tasks)\n- Be specific but concise (not too generic, not too verbose)\n- Match feature purpose (nav:compact for compacting)\n- Avoid abbreviations unless very common\n\n### Description Writing\n- One sentence, clear purpose\n- Action-oriented (\"Create\", \"Display\", \"Update\")\n- Mention key benefit or what it does\n- Under 100 characters\n\n### Content Structure\n- Start with user perspective (\"You are...\")\n- Use 2nd person (\"your task\", \"you can\")\n- Include realistic examples\n- Show expected output\n- Address common issues in troubleshooting\n\n### Tone and Style\n- Conversational and helpful\n- Use emojis for visual markers (âœ…âŒğŸ“–ğŸš€)\n- Bold key terms and actions\n- Code blocks for all commands/output\n- Bullet lists for readability\n\n### Examples Quality\n- Real-world scenarios (not toy examples)\n- Show before/after when relevant\n- Include expected output\n- Cover common use cases\n- Demonstrate Navigator benefits\n\n### Troubleshooting Section\n- Address real issues users might encounter\n- Provide specific solutions (not generic advice)\n- Include verification commands\n- Link to related docs if helpful\n\n---\n\n## Common Command Patterns\n\n### Informational Commands\n**Pattern**: Simple structure, quick output\n**Examples**: version, status, list\n**Sections**: Description â†’ Usage â†’ Output\n\n### Action Commands\n**Pattern**: Execute something, show result\n**Examples**: marker, compact, archive\n**Sections**: Description â†’ Execution â†’ Validation â†’ Result\n\n### Setup/Configuration Commands\n**Pattern**: Multi-step process, checks\n**Examples**: init, migrate, setup\n**Sections**: Pre-flight â†’ Steps â†’ Validation â†’ Troubleshooting\n\n### Management Commands\n**Pattern**: User selection, operations, feedback\n**Examples**: markers (list/load), tasks (list/select)\n**Sections**: Overview â†’ Modes â†’ Operations â†’ Results\n\n---\n\n## Troubleshooting\n\n### Generated Command Too Short\n\n**Problem**: Command content is sparse, missing sections\n\n**Solutions**:\n1. Increase complexity level (simple â†’ medium)\n2. Add more scenarios to \"When to Use\"\n3. Expand troubleshooting section (more common issues)\n4. Add Best Practices section\n5. Include more examples\n\n### Command Doesn't Match Navigator Style\n\n**Problem**: Tone or structure feels off\n\n**Solutions**:\n1. Re-analyze example commands (marker.md, compact.md)\n2. Check emoji usage (should match existing patterns)\n3. Verify 2nd person perspective (\"You are...\")\n4. Ensure conversational tone (not technical manual)\n5. Add personality to closing statement\n\n### YAML Validation Fails\n\n**Problem**: Invalid frontmatter\n\n**Solutions**:\n1. Check YAML syntax (proper indentation)\n2. Ensure `description` field exists\n3. Verify no special characters break parsing\n4. Test with: `python -c \"import yaml; yaml.safe_load(open('commands/[name].md').read().split('---')[1])\"`\n\n### Examples Are Too Generic\n\n**Problem**: Examples don't feel realistic\n\n**Solutions**:\n1. Base examples on actual Navigator usage\n2. Use real file paths (not /path/to/file)\n3. Show actual output format (not [output here])\n4. Include context (why user would run this)\n\n---\n\n## Success Criteria\n\n**This skill succeeds when**:\n- [ ] Generated command file is syntactically valid\n- [ ] YAML frontmatter passes validation\n- [ ] All required sections present\n- [ ] Tone matches Navigator style (conversational, helpful)\n- [ ] Examples are realistic and useful\n- [ ] Troubleshooting addresses real issues\n- [ ] Command can be invoked in Claude Code\n- [ ] Minimal manual editing needed (<10% of content)\n\n---\n\n**The plugin-slash-command skill automates Navigator command creation, ensuring consistency and saving development time** ğŸ”§\n",
        "skills/plugin-slash-command/examples/medium-command-example.md": "---\ndescription: Smart context compact - preserve essential Navigator markers and documentation context\n---\n\n# Navigator Smart Compact\n\nYou are performing a context-optimized compact operation that preserves essential Navigator documentation markers.\n\n## What This Does\n\n**Regular `/compact`**: Clears all conversation history, loses context\n\n**Navigator `/nav:compact`**:\n- Generates a **context marker** (snapshot of where you are)\n- Saves marker to `.agent/.context-markers/`\n- Shows you exactly how to resume\n- Clears conversation history\n- You restore context in your next session by reading the marker\n\n**The Magic**: Context markers compress your entire session (50+ messages, 130k tokens) into a focused summary (3k tokens) that captures only what matters: current task, decisions made, next steps.\n\n## How Context Markers Work\n\nThink of it like save points in a video game:\n\n```\nBefore Compact:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nYou: \"Help me implement auth\"\nClaude: [50 messages of implementation]\nYou: \"Now add OAuth\"\nClaude: [20 messages of OAuth work]\nTotal: 130k tokens, approaching limit\n\nAfter /nav:compact:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâœ… Marker saved: .agent/.context-markers/2025-10-12.md\n\nContains:\n- Task: TASK-45 (auth + OAuth)\n- Status: OAuth integrated, needs testing\n- Decisions: Using passport.js, JWT tokens\n- Next: Write tests for OAuth flow\n- 3k tokens\n\nNext session:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nYou: Read @.agent/.context-markers/2025-10-12.md\nClaude: *knows exactly where you left off*\nYou: \"Write the OAuth tests\"\nClaude: *continues seamlessly*\n```\n\n**You never lose progress. The knowledge is preserved, just compressed.**\n\n## When to Use\n\n### âœ… Good Times to Compact\n\n**After isolated sub-tasks**:\n- Just finished documentation update\n- Created SOP for solved issue\n- Archived feature implementation plan\n- Completed debugging session\n\n**Before context switches**:\n- Switching from feature A to feature B\n- Moving from debugging to new feature\n- Starting new sprint/milestone\n- After research phase, before implementation\n\n**Token optimization**:\n- Approaching 70% token usage\n- Long conversation with repeated info\n- After multiple /nav:update-doc operations\n\n### âŒ Bad Times to Compact\n\n**In middle of work**:\n- Feature half-implemented\n- Debugging complex issue\n- Multiple related sub-tasks pending\n\n**Context still needed**:\n- Next sub-task depends on current conversation\n- Need to reference recent decisions\n- Team discussion ongoing\n\n## Compact Process\n\n### Step 1: Identify Essential Context\n\nScan conversation for:\n\n**Must preserve**:\n- Current task ID (TASK-XX)\n- Active feature/epic name\n- Key technical decisions made\n- Unresolved blockers/questions\n- Next steps planned\n\n**Can clear**:\n- Completed sub-tasks details\n- Resolved debugging sessions\n- Documentation already written\n- Exploratory research (if documented)\n\n### Step 2: Generate Context Marker\n\nCreate compact marker to preserve essentials:\n\n```markdown\n# Navigator Context Marker (Post-Compact)\n\n**Session**: [Date/Time]\n**Navigator**: .agent/DEVELOPMENT-README.md\n\n## Active Work\n- **Task**: TASK-XX - [Feature Name]\n- **Status**: [Phase/Progress]\n- **Location**: [File/component being worked on]\n\n## Recent Decisions\n- [Decision 1]\n- [Decision 2]\n\n## Documentation State\n- **Task docs**: [List updated docs]\n- **System docs**: [List updated docs]\n- **SOPs**: [List created SOPs]\n\n## Next Steps\n1. [Next action]\n2. [Following action]\n\n## Blockers\n- [Blocker 1 if any]\n\n## Don't Load Again (Already Documented)\n- [Doc 1] - Already in .agent/\n- [Doc 2] - Already in .agent/\n\n---\nLoad this context marker after compacting to resume efficiently.\n```\n\n### Step 3: Save Context Marker\n\n**IMPORTANT**: You MUST save the marker where the user can access it after compact.\n\n**Recommended**: Save to `.agent/.context-markers/` directory\n\n```bash\n# Create directory if doesn't exist\nmkdir -p .agent/.context-markers\n\n# Save with timestamp\nWrite(\n  file_path: \".agent/.context-markers/2025-10-12-143022-compact.md\"\n  content: [context marker from Step 2]\n)\n```\n\n### Step 3.5: Mark as Active Marker\n\n**NEW**: Create `.active` file to enable automatic resume\n\n```bash\n# Create .active file pointing to this marker\necho \"2025-10-12-143022-compact.md\" > .agent/.context-markers/.active\n```\n\n**This enables**: `/nav:start` will auto-detect and load this marker\n\n**Show user the saved location**:\n```\nâœ… Context marker saved and marked as active:\n   .agent/.context-markers/2025-10-12-143022-compact.md\n\nThis marker will be auto-loaded on next session start.\n```\n\n**Alternative locations**:\n\n**Option 2**: Append to current task doc (if task exists)\n```\nAppend to: .agent/tasks/TASK-XX-feature.md\n\n## Session Notes\n### Compact Point - [Date]\n[Context marker content]\n\nAfter compact: Read @.agent/tasks/TASK-XX-feature.md\n```\n\n**Option 3**: User clipboard (if no task doc yet)\n```\nâš ï¸  No task doc exists yet.\n\nCopy this marker and paste it in your next session:\n\n[Show marker content]\n\nOr save it manually before compacting.\n```\n\n### Step 4: Show Resume Instructions\n\n**CRITICAL**: Tell the user exactly how to resume.\n\n```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘                                                      â•‘\nâ•‘  ğŸ”„ Ready to Compact                                 â•‘\nâ•‘                                                      â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ… Context marker created and marked as active:\n   .agent/.context-markers/2025-10-12-143022-compact.md\n\nTO RESUME AFTER COMPACT:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nSimply run: /nav:start\n\nThis will automatically:\nâ€¢ Load navigator (.agent/DEVELOPMENT-README.md)\nâ€¢ Detect active marker\nâ€¢ Restore your context (~3k tokens)\nâ€¢ Load current task (if applicable)\n\nAll in one command. No manual steps needed.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nProceed with compact? Type 'yes' to continue.\n```\n\n**Wait for confirmation before compacting**.\n\n### Step 5: Perform Compact\n\n**Only after user confirms**, execute Claude Code's `/compact` command.\n\n### Step 6: Post-Compact Resume (For User's Next Session)\n\n**Immediately after compact**:\n\n1. **Load navigator** (always):\n   ```\n   Read .agent/DEVELOPMENT-README.md (~2k tokens)\n   ```\n\n2. **Load context marker**:\n   ```\n   Read context marker from Step 2\n   ```\n\n3. **Load active task doc** (if exists):\n   ```\n   Read .agent/tasks/TASK-XX-feature.md (~3k tokens)\n   ```\n\n4. **Resume work**: Continue where left off\n\n**Total tokens loaded**: ~7k (vs 60k+ if keeping full conversation)\n\n## Compact Strategies\n\n### Aggressive (Compact Often)\n\n**When**: Token-constrained, switching tasks frequently\n\n**Trigger**:\n- After every sub-task\n- Before every new task\n- Every 50% token usage\n\n**Trade-off**: More compacts, less context continuity\n\n**Best for**: Multiple short tasks, exploratory work\n\n### Conservative (Compact Rarely)\n\n**When**: Deep work on single feature, need context continuity\n\n**Trigger**:\n- After major milestones only\n- When reaching 70%+ tokens\n- Between unrelated epics\n\n**Trade-off**: Fewer compacts, more token usage\n\n**Best for**: Complex features, long debugging sessions\n\n### Manual (User Decides)\n\n**When**: User knows when to compact\n\n**Trigger**: User runs `/nav:compact` explicitly\n\n**Trade-off**: Full control, requires judgment\n\n**Best for**: Experienced users, custom workflows\n\n## Configuration\n\nSet in `.agent/.nav-config.json`:\n\n```json\n{\n  \"compact_strategy\": \"conservative\",\n  \"compact_trigger_percent\": 70,\n  \"save_context_markers\": true,\n  \"context_marker_location\": \".agent/.context-markers/\"\n}\n```\n\n## Example Compact Scenarios\n\n### Scenario 1: Feature Complete\n\n```\nBefore Compact:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTokens: 65% (130k used)\nConversation: 50+ messages\nFeature TASK-123 complete\nDocs updated\nTests passing\n\nAction: /nav:compact\nReason: Feature done, docs archived, ready for next task\n\nAfter Compact:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTokens: 5% (10k used)\n- Navigator loaded (2k)\n- Context marker (3k)\n- Ready for TASK-124\n\nSavings: 120k tokens freed (60% of budget)\n```\n\n### Scenario 2: Research â†’ Implementation\n\n```\nBefore Compact:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTokens: 45% (90k used)\nResearch: Explored 5 different approaches\nDecision: Chose approach #3\nKey findings: Documented in SOP\n\nAction: /nav:compact\nReason: Research done, documented, time to implement\n\nAfter Compact:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTokens: 7% (14k used)\n- Navigator (2k)\n- Task doc with decision (3k)\n- Relevant SOP (2k)\n- Implementation ready\n\nSavings: 76k tokens freed\n```\n\n### Scenario 3: Multi-Task Day\n\n```\nMorning:\n- TASK-101: Bug fix (15k tokens)\n- /nav:compact\n- TASK-102: New feature (25k tokens)\n- /nav:compact\n\nAfternoon:\n- TASK-103: Integration (20k tokens)\n- /nav:compact\n- TASK-104: Documentation (10k tokens)\n\nTotal work: 4 tasks\nPeak usage: 25k tokens (12.5%)\nWithout compact: Would hit 70k+ (35%), slower responses\n\nBenefit: Maintained fast responses all day\n```\n\n## Compact Checklist\n\nBefore running `/nav:compact`:\n\n- [ ] Current task completed or at good stopping point\n- [ ] Important decisions documented (task doc or SOP)\n- [ ] No unresolved blockers requiring conversation context\n- [ ] Ready to switch tasks or take break\n- [ ] Context marker generated (if needed)\n\nAfter running `/nav:compact`:\n\n- [ ] Load navigator (.agent/DEVELOPMENT-README.md)\n- [ ] Load context marker (if saved)\n- [ ] Load active task doc (if continuing work)\n- [ ] Verify ready to continue\n\n## Advanced: Auto-Compact\n\n**Future enhancement**: Automatically compact based on triggers\n\n```json\n{\n  \"auto_compact\": {\n    \"enabled\": false,\n    \"triggers\": {\n      \"token_percent\": 70,\n      \"after_update_doc\": true,\n      \"between_tasks\": true\n    },\n    \"require_confirmation\": true\n  }\n}\n```\n\nWhen trigger hit:\n```\nâš ï¸  Navigator Auto-Compact Suggested\n\nReason: Token usage at 71%\nAction: Run /nav:compact to free 60k+ tokens\n\nCompact now? [Y/n]:\n```\n\n## Metrics\n\nTrack compact efficiency:\n\n**Before Compact**:\n- Tokens used: 130k (65%)\n- Message count: 50+\n- Time: 2 hours\n\n**After Compact**:\n- Tokens used: 10k (5%)\n- Context preserved: Task doc + decision markers\n- Ready for: Next task immediately\n\n**Savings**:\n- 120k tokens freed\n- 60% of budget reclaimed\n- Fast responses restored\n\n---\n\n**Remember**: Navigator compact preserves what matters (documented knowledge) and clears what doesn't (conversation history). This keeps your context lean and your sessions productive.\n",
        "skills/plugin-slash-command/examples/simple-command-example.md": "---\ndescription: Create context markers on-demand - save your progress anytime\n---\n\n# Navigator Marker - Save Points for Your Conversation\n\nCreate context markers during work to capture your current state. Think of it as **git commits for your AI conversation**.\n\n---\n\n## What This Does\n\nCreates a snapshot of your current work state that you can restore later.\n\n**Traditional approach**: Work until compact, lose intermediate context\n\n**With markers**:\n- Save progress anytime\n- Multiple markers per session\n- Resume from any point\n- Safety nets before risky changes\n\n---\n\n## When to Use\n\n### âœ… Perfect Times for Markers\n\n**Before taking breaks**:\n```\nYou: \"Implemented auth flow, going to lunch\"\nYou: /nav:marker lunch-break\nResult: Resume perfectly after lunch\n```\n\n**Before exploring approaches**:\n```\nYou: /nav:marker before-refactor\nYou: \"Let's try refactoring X\"\n*doesn't work*\nYou: Read @.agent/.context-markers/before-refactor.md\nResult: Back to known good state\n```\n\n**During long features**:\n```\nDay 1: Core implementation â†’ /nav:marker day1-core\nDay 2: Add integrations â†’ /nav:marker day2-integrations\nDay 3: Tests & polish â†’ /nav:marker day3-complete\nResult: Checkpoints throughout multi-day work\n```\n\n**Before risky changes**:\n```\nYou: \"About to refactor entire routing system\"\nYou: /nav:marker pre-routing-refactor\nResult: Safety net if things go wrong\n```\n\n**End of day**:\n```\nYou: /nav:marker eod-2025-10-12\nResult: Tomorrow starts with perfect context\n```\n\n**After important decisions**:\n```\nYou: \"We decided to use PostgreSQL instead of MongoDB\"\nYou: /nav:marker architecture-decision\nResult: Decision captured with full context\n```\n\n---\n\n## Usage\n\n### Basic Usage\n\n```bash\n/nav:marker\n```\n\nCreates marker with auto-generated name: `marker-2025-10-12-143022.md`\n\n### Named Markers\n\n```bash\n/nav:marker before-refactor\n/nav:marker lunch-break\n/nav:marker pre-deployment\n/nav:marker day1-complete\n```\n\nCreates marker with your name: `before-refactor-2025-10-12-143022.md`\n\n### With Description\n\n```bash\n/nav:marker oauth-working \"OAuth flow implemented and tested\"\n```\n\nAdds description to marker content.\n\n---\n\n## Marker Creation Process\n\n### Step 1: Analyze Current State\n\nScan conversation for:\n\n**Active work**:\n- Current task/feature\n- Files being modified\n- What's implemented\n- What's remaining\n\n**Recent context**:\n- Technical decisions made\n- Approaches tried (successful and failed)\n- Dependencies added\n- Blockers encountered\n\n**Next steps**:\n- What you planned to do next\n- Open questions\n- Ideas to explore\n\n### Step 2: Generate Marker Content\n\nCreate comprehensive marker:\n\n```markdown\n# Navigator Context Marker: [Name]\n\n**Created**: 2025-10-12 14:30:22\n**Type**: On-demand marker\n**Navigator**: .agent/DEVELOPMENT-README.md\n\n---\n\n## ğŸ“ Current Location\n\n**Task**: TASK-123 - Implement OAuth authentication\n**Phase**: Integration complete, testing pending\n**Files**:\n- src/auth/oauth.ts (implemented)\n- src/routes/auth.ts (updated)\n- tests/auth.test.ts (needs work)\n\n**Progress**: 70% complete\n\n---\n\n## ğŸ¯ What's Done\n\n- âœ… OAuth flow implemented with passport.js\n- âœ… JWT token generation working\n- âœ… Login/logout endpoints created\n- âœ… Session management configured\n- âœ… Google OAuth provider integrated\n\n---\n\n## ğŸ”§ Technical Decisions\n\n**OAuth Library**: Chose passport.js over next-auth\n- Reason: More control over flow, simpler for our use case\n- Trade-off: More manual config, but cleaner integration\n\n**Token Strategy**: JWT in httpOnly cookies\n- Reason: XSS protection, no localStorage needed\n- Expiration: 7 days, refresh token pattern\n\n**Session Store**: Redis\n- Reason: Fast, scalable, easy invalidation\n- Config: TTL matches JWT expiration\n\n---\n\n## âš ï¸ Challenges & Solutions\n\n**Challenge**: CORS issues with OAuth callback\n**Solution**: Added credentials: 'include' and proper CORS headers\n**File**: src/middleware/cors.ts\n\n**Challenge**: Token not persisting across requests\n**Solution**: Missing httpOnly flag in cookie options\n**File**: src/auth/tokens.ts:45\n\n---\n\n## ğŸ“ Next Steps\n\n1. Write comprehensive tests for OAuth flow\n   - Happy path: successful login\n   - Error cases: invalid tokens, expired sessions\n   - Edge cases: concurrent logins, token refresh\n\n2. Add error handling for failed OAuth\n   - Network errors\n   - Provider downtime\n   - Invalid credentials\n\n3. Document OAuth setup in README\n   - Environment variables needed\n   - Provider setup instructions\n   - Local development flow\n\n---\n\n## ğŸ”— Related Documentation\n\n**Already documented**:\n- .agent/system/auth-architecture.md - Auth system design\n- .agent/sops/integrations/oauth-setup.md - OAuth provider config\n\n**Needs documentation**:\n- Testing strategy for OAuth\n- Production deployment checklist\n\n---\n\n## ğŸ’¡ Ideas to Explore\n\n- Add more OAuth providers (GitHub, Twitter)\n- Implement OAuth scope management\n- Add \"Sign in with\" UI component library\n- Consider magic link as alternative auth method\n\n---\n\n## ğŸš« Don't Load Again\n\nThese are already documented, don't reload:\n- .agent/tasks/TASK-123-oauth-auth.md\n- .agent/system/auth-architecture.md\n- Previous markers (if any)\n\n---\n\n## ğŸ”„ Restore Instructions\n\nTo resume from this marker:\n\n1. Read this marker:\n   ```\n   Read @.agent/.context-markers/oauth-working-2025-10-12-143022.md\n   ```\n\n2. Continue with: \"Write tests for OAuth flow\"\n\n**Context restored in ~3k tokens instead of replaying 130k token conversation.**\n\n---\n\nGenerated by: /nav:marker oauth-working\n```\n\n### Step 3: Save Marker\n\n**Create directory if needed**:\n```bash\nmkdir -p .agent/.context-markers\n```\n\n**Save with naming convention**:\n```\nFormat: [user-name]-YYYY-MM-DD-HHMMSS.md\nExample: oauth-working-2025-10-12-143022.md\n```\n\n**Write marker**:\n```\nWrite(\n  file_path: \".agent/.context-markers/oauth-working-2025-10-12-143022.md\"\n  content: [marker content from Step 2]\n)\n```\n\n### Step 4: Confirm to User\n\nShow clear confirmation:\n\n```\nâœ… Marker saved!\n\nğŸ“ Location: .agent/.context-markers/oauth-working-2025-10-12-143022.md\n\nğŸ”„ To restore this state later:\n   Read @.agent/.context-markers/oauth-working-2025-10-12-143022.md\n\nğŸ’¾ Marker size: ~3k tokens\nğŸ“Š Current session: ~85k tokens\n\nTip: You can continue working or use /nav:compact to free up space.\n```\n\n---\n\n## Advanced Features\n\n### List All Markers\n\n```bash\n/nav:marker list\n```\n\nShows all available markers:\n\n```\nğŸ“ Available Context Markers\n\nRecent markers (last 7 days):\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n1. oauth-working-2025-10-12-143022.md\n   Created: 2 hours ago\n   Task: TASK-123 - OAuth authentication\n   Size: 3.2k tokens\n\n2. before-refactor-2025-10-12-091500.md\n   Created: 7 hours ago\n   Task: TASK-122 - Routing refactor\n   Size: 2.8k tokens\n\n3. day1-complete-2025-10-11-170000.md\n   Created: yesterday\n   Task: TASK-121 - User dashboard\n   Size: 3.5k tokens\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTotal: 3 markers | Combined size: 9.5k tokens\n\nTo restore: Read @.agent/.context-markers/[filename]\nTo clean up: /nav:marker clean\n```\n\n### Clean Old Markers\n\n```bash\n/nav:marker clean\n```\n\nInteractive cleanup:\n\n```\nğŸ§¹ Marker Cleanup\n\nFound 15 markers older than 7 days:\n- [list with dates and sizes]\n\nKeep only:\n1. Last 7 days (recommended)\n2. Last 30 days\n3. Keep all, just show me\n4. Custom selection\n\nChoice [1-4]:\n```\n\n### Compare Markers\n\n```bash\n/nav:marker diff oauth-working before-refactor\n```\n\nShows what changed between two markers:\n\n```\nğŸ“Š Marker Comparison\n\nFrom: before-refactor (7 hours ago)\nTo: oauth-working (2 hours ago)\n\nChanges:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nTasks:\n  - Completed: TASK-122 (routing refactor)\n  + Started: TASK-123 (OAuth auth)\n\nFiles Modified:\n  + src/auth/oauth.ts (new)\n  + src/auth/tokens.ts (new)\n  ~ src/routes/auth.ts (modified)\n\nDecisions Made:\n  + Using passport.js for OAuth\n  + JWT in httpOnly cookies\n  + Redis for session storage\n\nProgress: 30% â†’ 70% (task)\n```\n\n---\n\n## Marker Strategies\n\n### Checkpoint Strategy\n\nCreate markers at natural checkpoints:\n\n```\nFeature Planning:\n/nav:marker planning-complete\n\nCore Implementation:\n/nav:marker core-working\n\nIntegration:\n/nav:marker integration-done\n\nTesting:\n/nav:marker tests-passing\n\nReady for Review:\n/nav:marker ready-for-pr\n```\n\n**Benefit**: Clear progression, easy to resume at any stage\n\n### Daily Markers\n\nEnd each day with a marker:\n\n```bash\n/nav:marker eod-2025-10-12 \"Finished OAuth, need tests tomorrow\"\n```\n\n**Benefit**: Perfect context on Monday for Friday's work\n\n### Experiment Markers\n\nBefore trying new approaches:\n\n```bash\n/nav:marker before-experiment\n# Try risky refactor\n# Doesn't work?\n# Restore from marker, try different approach\n```\n\n**Benefit**: Safe exploration, easy rollback\n\n### Decision Markers\n\nAfter important decisions:\n\n```bash\n/nav:marker architecture-decision \"Chose PostgreSQL over MongoDB\"\n```\n\n**Benefit**: Capture why decisions were made with full context\n\n---\n\n## Marker Best Practices\n\n### âœ… Do\n\n- Create markers before breaks (lunch, end of day)\n- Name markers descriptively (`oauth-working` not `marker-1`)\n- Add descriptions for important markers\n- Clean up old markers monthly\n- Use markers as conversation save points\n\n### âŒ Don't\n\n- Don't create markers every 5 minutes (too granular)\n- Don't use generic names (`test`, `stuff`, `work`)\n- Don't forget to clean up (markers accumulate)\n- Don't rely solely on markers (still commit code!)\n\n---\n\n## Integration with Navigator Workflow\n\n### Markers + Compact\n\n```\nWork on feature â†’ /nav:marker feature-done\nContinue to polish â†’ Token usage high\n/nav:compact\nResult: Marker preserved, conversation cleared\n```\n\n**Benefit**: Markers survive compacts\n\n### Markers + Tasks\n\n```\nStart task â†’ Load task doc\nMake progress â†’ /nav:marker progress-update\nComplete â†’ /nav:update-doc feature TASK-XX\n```\n\n**Benefit**: Markers complement task documentation\n\n### Markers + SOPs\n\n```\nHit bug â†’ Debug â†’ Solve\n/nav:marker bug-solved \"Fixed CORS issue with OAuth\"\n/nav:update-doc sop debugging cors-oauth-fix\n```\n\n**Benefit**: Markers capture point-in-time, SOPs capture solution\n\n---\n\n## Technical Implementation\n\n### Marker Storage\n\n```\n.agent/.context-markers/\nâ”œâ”€â”€ oauth-working-2025-10-12-143022.md\nâ”œâ”€â”€ before-refactor-2025-10-12-091500.md\nâ”œâ”€â”€ day1-complete-2025-10-11-170000.md\nâ””â”€â”€ .gitkeep\n```\n\n**Naming**: `[name]-YYYY-MM-DD-HHMMSS.md`\n\n**Size**: ~3k tokens each\n\n**Git**: Ignored by default (in .gitignore)\n\n### Marker Format\n\n**Required sections**:\n- Current Location (task, files, progress)\n- What's Done (achievements)\n- Technical Decisions (with rationale)\n- Next Steps (what's remaining)\n- Restore Instructions (how to resume)\n\n**Optional sections**:\n- Challenges & Solutions\n- Ideas to Explore\n- Related Documentation\n\n---\n\n## Examples\n\n### Example 1: End of Day Marker\n\n```bash\nYou: \"Finished implementing user settings page, need to add tests tomorrow\"\nYou: /nav:marker eod-settings-done\n\nResult:\nâœ… Marker saved: .agent/.context-markers/eod-settings-done-2025-10-12-170000.md\n\nTomorrow: Read @.agent/.context-markers/eod-settings-done-2025-10-12-170000.md\n```\n\n### Example 2: Before Risky Change\n\n```bash\nYou: \"Current routing works. About to refactor to use new router\"\nYou: /nav:marker before-routing-refactor\nYou: \"Refactor the routing system to use express-router\"\n\n*After testing...*\n\nYou: \"The refactor broke auth. Let me restore\"\nYou: Read @.agent/.context-markers/before-routing-refactor.md\nYou: \"Take different approach - migrate gradually\"\n```\n\n### Example 3: Multi-Day Feature\n\n```bash\nMonday:\nYou: /nav:marker day1-foundation \"Built database models and API structure\"\n\nTuesday:\nYou: Read @.agent/.context-markers/day1-foundation.md\nYou: *continues work*\nYou: /nav:marker day2-integration \"Integrated with frontend, working on auth\"\n\nWednesday:\nYou: Read @.agent/.context-markers/day2-integration.md\nYou: *continues work*\nYou: /nav:marker day3-complete \"Feature complete, tests passing\"\n```\n\n---\n\n## Success Metrics\n\n**Without markers**:\n- Resume after break: 5-10 min re-explaining context\n- Session restart: Lose all context\n- Risky changes: No safety net\n- Multi-day work: Fragmented understanding\n\n**With markers**:\n- Resume after break: 30 seconds (read marker)\n- Session restart: Full context restored\n- Risky changes: Rollback point available\n- Multi-day work: Continuous context thread\n\n**Token efficiency**:\n- Marker: 3k tokens to restore full context\n- Re-explaining: 20-30k tokens of back-and-forth\n- **Savings**: 85-90% fewer tokens to resume\n\n---\n\n## Future Enhancements\n\n**Auto-markers**:\n```json\n{\n  \"auto_marker\": {\n    \"on_task_complete\": true,\n    \"on_break_detected\": true,\n    \"every_n_hours\": 2\n  }\n}\n```\n\n**Marker search**:\n```bash\n/nav:marker search \"OAuth\"\n# Returns all markers mentioning OAuth\n```\n\n**Marker merge**:\n```bash\n/nav:marker merge day1 day2 day3 â†’ feature-complete\n# Combines multiple markers into one\n```\n\n---\n\n**Markers transform your AI workflow from stateless to stateful. Never lose context again.** ğŸ¯\n",
        "skills/plugin-slash-command/templates/command-template.md": "---\ndescription: ${DESCRIPTION}\n---\n\n# ${TITLE} - Navigator\n\n${OVERVIEW_PARAGRAPH}\n\n---\n\n## What This Does\n\n${WHAT_THIS_DOES_CONTENT}\n\n---\n\n## When to Use\n\n### âœ… Perfect Times\n\n**${SCENARIO_1_TITLE}**:\n```\n${SCENARIO_1_EXAMPLE}\n```\n\n**${SCENARIO_2_TITLE}**:\n```\n${SCENARIO_2_EXAMPLE}\n```\n\n**${SCENARIO_3_TITLE}**:\n```\n${SCENARIO_3_EXAMPLE}\n```\n\n---\n\n## Usage\n\n### Basic Usage\n\n```bash\n/nav:${COMMAND_NAME}\n```\n\n${BASIC_USAGE_DESCRIPTION}\n\n### With Options\n\n```bash\n/nav:${COMMAND_NAME} ${OPTION_1}\n/nav:${COMMAND_NAME} ${OPTION_2} \"${OPTIONAL_ARG}\"\n```\n\n${OPTIONS_DESCRIPTION}\n\n---\n\n## Execution Steps\n\n### Step 1: ${STEP_1_NAME}\n\n${STEP_1_INSTRUCTIONS}\n\n**Expected outcome**: ${STEP_1_OUTCOME}\n\n### Step 2: ${STEP_2_NAME}\n\n${STEP_2_INSTRUCTIONS}\n\n**Expected outcome**: ${STEP_2_OUTCOME}\n\n### Step 3: ${STEP_3_NAME}\n\n${STEP_3_INSTRUCTIONS}\n\n**Expected outcome**: ${STEP_3_OUTCOME}\n\n---\n\n## Output Format\n\n```\n${OUTPUT_EXAMPLE}\n```\n\n---\n\n## Best Practices\n\n- **${BEST_PRACTICE_1_TITLE}**: ${BEST_PRACTICE_1_DESCRIPTION}\n- **${BEST_PRACTICE_2_TITLE}**: ${BEST_PRACTICE_2_DESCRIPTION}\n- **${BEST_PRACTICE_3_TITLE}**: ${BEST_PRACTICE_3_DESCRIPTION}\n\n---\n\n## Troubleshooting\n\n### ${ISSUE_1_TITLE}\n\n**Error**: ${ISSUE_1_ERROR_MESSAGE}\n\n**Solution**:\n${ISSUE_1_SOLUTION}\n\n### ${ISSUE_2_TITLE}\n\n**Error**: ${ISSUE_2_ERROR_MESSAGE}\n\n**Solution**:\n${ISSUE_2_SOLUTION}\n\n### ${ISSUE_3_TITLE}\n\n**Problem**: ${ISSUE_3_DESCRIPTION}\n\n**Fix**:\n```bash\n${ISSUE_3_FIX_COMMAND}\n```\n\n---\n\n**${CLOSING_STATEMENT}** ğŸš€\n",
        "skills/product-design/GETTING-STARTED.md": "# Getting Started with Product Design Skill\n\n5-minute quickstart guide for Navigator's Figma integration.\n\n---\n\n## 1. Install (30 seconds)\n\n```bash\ncd skills/product-design\n./setup.sh\n```\n\n**Expected output**:\n```\nâœ… Setup Complete!\n```\n\nIf you see errors, check [INSTALL.md](INSTALL.md) for troubleshooting.\n\n---\n\n## 2. Enable Figma MCP (1 minute)\n\n1. Open **Figma Desktop** app\n2. **Figma** â†’ **Preferences** (macOS) or **File** â†’ **Settings** (Windows)\n3. Find \"**Enable local MCP Server**\"\n4. Toggle **ON**\n\nYou should see: \"MCP server running at http://127.0.0.1:3845/mcp\"\n\n---\n\n## 3. Try It (2 minutes)\n\nOpen Navigator and say:\n\n```\n\"Review this Figma design: https://figma.com/file/YOUR_FILE_URL\"\n```\n\nNavigator will automatically:\n- âœ… Connect to Figma Desktop\n- âœ… Extract design tokens and components\n- âœ… Compare against your codebase\n- âœ… Generate implementation plan\n- âœ… Create Navigator task document\n\n**Output**:\n```\nâœ… Design review complete for Dashboard Redesign\n\nGenerated Documentation:\n- Design review: .agent/design-system/reviews/2025-10-22-dashboard.md\n- Implementation plan: .agent/tasks/TASK-17-dashboard-redesign.md\n\nSummary:\n- Design Tokens: 12 new, 5 modified\n- Components: 3 new, 1 to extend\n- Estimated Time: 12 hours\n- Complexity: Medium\n\nNext Steps:\n[1] Start implementation now\n[2] Review plan first\n[3] Modify plan before starting\n```\n\n---\n\n## That's It!\n\nYou're ready to use Navigator's product-design skill.\n\n### What You Can Do\n\n**Design Review**:\n```\n\"Review this Figma design: [URL]\"\n```\n\n**Extract Tokens**:\n```\n\"Extract design tokens from Figma\"\n```\n\n**Check Design System**:\n```\n\"Check design system impact for [feature]\"\n```\n\n**Generate Implementation Plan**:\n```\n\"Plan implementation for this design\"\n```\n\n---\n\n## Troubleshooting\n\n### \"Figma Desktop not running\"\n\n**Fix**: Start Figma Desktop and enable MCP (see step 2 above)\n\n### \"Setup failed\"\n\n**Fix**: See detailed guide in [INSTALL.md](INSTALL.md)\n\n### \"Can't connect to MCP\"\n\n**Fix**: Verify port 3845 is accessible:\n```bash\ncurl http://127.0.0.1:3845/mcp\n# Should return JSON (even if error message)\n```\n\n---\n\n## Learn More\n\n- **[README.md](README.md)** - Features and architecture\n- **[INSTALL.md](INSTALL.md)** - Detailed installation guide\n- **[SKILL.md](SKILL.md)** - Complete skill documentation\n\n---\n\n**Time to get started**: 5 minutes\n**Ready to use**: Immediately after setup\n",
        "skills/product-design/INSTALL.md": "# Navigator Product Design Skill - Installation Guide\n\nQuick setup guide for the product-design skill with Figma MCP integration.\n\n---\n\n## Prerequisites\n\n### Required\n\n1. **Python 3.10+**\n   ```bash\n   python3 --version  # Should be 3.10 or higher\n   ```\n\n2. **Figma Desktop App**\n   - Download: https://www.figma.com/downloads/\n   - Must be running during design reviews\n\n3. **Figma Account**\n   - Free or paid account\n   - Logged into Figma Desktop\n\n### Optional (Enhanced Features)\n\n- **Figma Enterprise** - For Code Connect mappings (automatic component detection)\n- **Tailwind CSS** - For design token integration\n- **Storybook** - For visual regression testing\n\n---\n\n## Installation Methods\n\n### Method 1: Automatic Setup (Recommended)\n\nRun the automated setup script:\n\n```bash\ncd skills/product-design\n./setup.sh\n```\n\nThis will:\n1. âœ… Check Python version (3.10+ required)\n2. âœ… Create virtual environment\n3. âœ… Install dependencies (`mcp>=1.2.1`)\n4. âœ… Verify Figma Desktop is running\n5. âœ… Test MCP connection\n\n**Expected output**:\n```\n==========================================\nNavigator Product Design Skill - Setup\n==========================================\n\n[1/5] Checking Python version...\nâœ… Python 3.13.7\n\n[2/5] Setting up Python environment...\nâœ… Virtual environment created\n\n[3/5] Installing Python dependencies...\nâœ… Dependencies installed (mcp>=1.2.1)\n\n[4/5] Checking Figma Desktop status...\nâœ… Figma MCP server detected (port 3845)\n\n[5/5] Testing Figma MCP connection...\nâœ… Successfully connected to Figma MCP server\n   Found 6 tools:\n     - get_design_context\n     - get_variable_defs\n     - get_code_connect_map\n     - get_screenshot\n     - get_metadata\n     - create_design_system_rules\n\n==========================================\nâœ… Setup Complete!\n==========================================\n```\n\n---\n\n### Method 2: Manual Installation\n\nIf the automatic script fails or you prefer manual setup:\n\n#### Step 1: Install Python Dependencies\n\n```bash\ncd skills/product-design\n\n# Create virtual environment (recommended)\npython3 -m venv venv\nsource venv/bin/activate\n\n# Install dependencies\npip install -r requirements.txt\n```\n\n#### Step 2: Enable Figma MCP Server\n\n1. Open **Figma Desktop** app\n2. Go to **Figma â†’ Preferences** (macOS) or **File â†’ Settings** (Windows/Linux)\n3. Find \"**Enable local MCP Server**\" option\n4. Toggle **ON**\n5. You should see confirmation: \"MCP server running at http://127.0.0.1:3845/mcp\"\n\n#### Step 3: Verify Connection\n\n```bash\ncd functions\npython3 test_mcp_connection.py\n```\n\n**Expected output**:\n```\nâœ… Successfully connected to Figma MCP server\n   Found 6 tools:\n     - get_design_context\n     - get_variable_defs\n     - ...\n```\n\n---\n\n## Troubleshooting\n\n### \"Figma Desktop not running or MCP not enabled\"\n\n**Symptoms**:\n```\nâŒ Figma Desktop not running or MCP not enabled\n   Could not connect to Figma Desktop MCP server.\n```\n\n**Solutions**:\n\n1. **Check Figma is running**:\n   ```bash\n   # macOS\n   ps aux | grep Figma\n\n   # Should show Figma processes\n   ```\n\n2. **Enable MCP server**:\n   - Figma â†’ Preferences â†’ Enable local MCP Server\n   - Look for confirmation message\n\n3. **Verify port is open**:\n   ```bash\n   curl http://127.0.0.1:3845/mcp\n\n   # Should return JSON response (even if error)\n   # Example: {\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32001,\"message\":\"Invalid sessionId\"},\"id\":null}\n   ```\n\n4. **Check Figma version**:\n   - MCP requires Figma Desktop v116.0.0+\n   - Update if necessary: Figma â†’ Help â†’ Check for Updates\n\n---\n\n### \"MCP SDK not installed\"\n\n**Symptoms**:\n```\nImportError: MCP SDK not installed. Install with: pip install mcp\n```\n\n**Solutions**:\n\n1. **Activate virtual environment** (if using):\n   ```bash\n   source skills/product-design/venv/bin/activate\n   ```\n\n2. **Install dependencies**:\n   ```bash\n   pip install -r requirements.txt\n   ```\n\n3. **Verify installation**:\n   ```bash\n   python3 -c \"import mcp; print(mcp.__version__)\"\n   # Should print: 1.2.1 or higher\n   ```\n\n---\n\n### \"Python 3.10+ required\"\n\n**Symptoms**:\n```\nâŒ Python 3.10+ required (found 3.9.6)\n```\n\n**Solutions**:\n\n1. **Install Python 3.10+**:\n   ```bash\n   # macOS (Homebrew)\n   brew install python@3.13\n\n   # Ubuntu/Debian\n   sudo apt install python3.13\n\n   # Windows\n   # Download from python.org\n   ```\n\n2. **Use specific Python version**:\n   ```bash\n   python3.13 -m venv venv\n   source venv/bin/activate\n   ```\n\n---\n\n### \"Port 3845 already in use\"\n\n**Symptoms**:\n- Figma MCP server won't start\n- Connection errors\n\n**Solutions**:\n\n1. **Check what's using port 3845**:\n   ```bash\n   lsof -i :3845\n   ```\n\n2. **Kill conflicting process**:\n   ```bash\n   # If another process is using the port\n   kill -9 <PID>\n   ```\n\n3. **Restart Figma Desktop**:\n   - Quit Figma completely\n   - Restart app\n   - Re-enable MCP server\n\n---\n\n## Verifying Installation\n\n### Quick Test\n\n```bash\ncd skills/product-design/functions\npython3 -c \"\nimport asyncio\nfrom figma_mcp_client import get_figma_variables\n\nasync def test():\n    try:\n        # This will use currently selected node in Figma\n        vars = await get_figma_variables()\n        print(f'âœ… Connected! Found {len(vars)} variables')\n    except Exception as e:\n        print(f'âŒ Error: {e}')\n\nasyncio.run(test())\n\"\n```\n\n### Full Test\n\n```bash\ncd skills/product-design\n./setup.sh\n```\n\n---\n\n## What Gets Installed\n\n### Python Packages\n\n```txt\nmcp>=1.2.1          # Official MCP SDK for Figma integration\nanyio>=4.0.0        # Async I/O (transitive dependency)\nhttpx>=0.25.0       # HTTP client (transitive dependency)\npydantic>=2.0.0     # Data validation (transitive dependency)\n```\n\n### File Structure After Installation\n\n```\nskills/product-design/\nâ”œâ”€â”€ venv/                           # Virtual environment (created)\nâ”‚   â”œâ”€â”€ bin/\nâ”‚   â”œâ”€â”€ lib/\nâ”‚   â””â”€â”€ ...\nâ”œâ”€â”€ functions/\nâ”‚   â”œâ”€â”€ figma_mcp_client.py        # MCP client wrapper âœ¨ NEW\nâ”‚   â”œâ”€â”€ test_mcp_connection.py     # Connection test âœ¨ NEW\nâ”‚   â”œâ”€â”€ design_analyzer.py         # Existing functions (to be refactored)\nâ”‚   â””â”€â”€ ...\nâ”œâ”€â”€ requirements.txt                # Dependencies âœ¨ NEW\nâ”œâ”€â”€ setup.sh                        # Setup script âœ¨ NEW\nâ”œâ”€â”€ INSTALL.md                      # This file âœ¨ NEW\nâ””â”€â”€ SKILL.md                        # Skill documentation\n```\n\n---\n\n## Next Steps\n\nAfter successful installation:\n\n1. **Try the skill**:\n   ```\n   User: \"Review this Figma design: https://figma.com/file/...\"\n   ```\n\n2. **Read documentation**:\n   - `SKILL.md` - Complete skill guide\n   - `functions/figma_mcp_client.py` - API documentation\n\n3. **Set up design system** (optional):\n   ```bash\n   mkdir -p .agent/design-system/reviews\n   touch .agent/design-system/design-tokens.json\n   touch .agent/design-system/ui-kit-inventory.json\n   ```\n\n---\n\n## Uninstalling\n\nTo remove the skill:\n\n```bash\ncd skills/product-design\n\n# Remove virtual environment\nrm -rf venv\n\n# Disable MCP server in Figma\n# Figma â†’ Preferences â†’ Disable local MCP Server\n```\n\n---\n\n## Support\n\n### Documentation\n\n- **Skill Guide**: `SKILL.md`\n- **MCP Client API**: `functions/figma_mcp_client.py`\n- **Figma MCP Docs**: https://help.figma.com/hc/en-us/articles/32132100833559\n\n### Common Issues\n\n- **Connection errors**: Ensure Figma Desktop running and MCP enabled\n- **Import errors**: Activate virtual environment: `source venv/bin/activate`\n- **Version errors**: Upgrade Python to 3.10+\n\n### Reporting Issues\n\nOpen issue at: https://github.com/navigator-plugin/navigator/issues\n\nInclude:\n- Python version: `python3 --version`\n- Figma version: Figma â†’ Help â†’ About Figma\n- Error message and full stack trace\n- Output from: `python3 functions/test_mcp_connection.py`\n\n---\n\n**Last Updated**: 2025-10-22\n**Navigator Version**: 3.3.1\n**Skill Version**: 1.0.0\n**MCP SDK Version**: 1.2.1+\n",
        "skills/product-design/README.md": "# Product Design Skill\n\nAutomate Figma design handoff with Navigator's intelligent design system integration.\n\n**Time Savings**: 6-10 hours â†’ 15 minutes (95% reduction)\n\n---\n\n## Features\n\nâœ¨ **Direct Figma MCP Integration** - Python connects directly to Figma Desktop (no manual orchestration)\nğŸ¯ **Progressive Refinement** - Smart token usage (fetches only needed data)\nğŸ”„ **Design Token Sync** - Auto-extract variables in W3C DTCG format\nğŸ—ºï¸ **Component Mapping** - Figma â†’ codebase with similarity detection\nğŸ“Š **Drift Detection** - Compare design vs implementation automatically\nğŸ“ **Task Generation** - Phased implementation plans for Navigator\n\n---\n\n## Quick Start\n\n### 1. Install\n\n```bash\ncd skills/product-design\n./setup.sh\n```\n\n**What this does**:\n- âœ… Checks Python 3.10+ installed\n- âœ… Creates virtual environment\n- âœ… Installs `mcp` SDK (1.2.1+)\n- âœ… Verifies Figma Desktop connection\n- âœ… Tests MCP server availability\n\n**Expected output**:\n```\nâœ… Setup Complete!\n```\n\n### 2. Enable Figma MCP\n\n1. Open **Figma Desktop**\n2. Go to **Figma â†’ Preferences**\n3. Enable \"**Enable local MCP Server**\"\n4. Confirm server running at `http://127.0.0.1:3845/mcp`\n\n### 3. Use the Skill\n\n```\nUser: \"Review this Figma design: https://figma.com/file/ABC123...\"\n```\n\nNavigator will:\n1. Connect to Figma MCP automatically\n2. Extract design tokens and components\n3. Compare against codebase\n4. Generate implementation plan\n5. Create Navigator task document\n\n---\n\n## Architecture\n\n### Before (Manual Orchestration)\n\n```\nUser â†’ Claude â†’ MCP tools (15-20 manual calls) â†’ temp files â†’ Python â†’ Claude â†’ User\n```\n\n**Time**: 15-20 orchestration steps\n\n### After (Direct MCP Client)\n\n```\nUser â†’ Python (MCP client) â†’ Figma Desktop â†’ Results â†’ User\n```\n\n**Time**: 1 step (95% reduction)\n\n### How It Works\n\n```python\n# Python functions now connect directly to Figma\nfrom figma_mcp_client import FigmaMCPClient\n\nasync with FigmaMCPClient() as client:\n    # Smart data fetching\n    metadata = await client.get_metadata()\n    components = extract_components(metadata)\n\n    # Progressive refinement - fetch details only if needed\n    for comp in high_complexity_components:\n        detail = await client.get_design_context(comp['id'])\n\n    # Get design tokens\n    tokens = await client.get_variable_defs()\n```\n\n**Benefits**:\n- No Claude orchestration overhead\n- Automatic connection management\n- Progressive refinement (token efficient)\n- Built-in error handling\n\n---\n\n## Available Tools\n\n### Figma MCP Tools (Auto-Connected)\n\n| Tool | Purpose | Use Case |\n|------|---------|----------|\n| `get_metadata` | Component structure (XML) | Discover node IDs, hierarchy |\n| `get_variable_defs` | Design tokens | Token extraction, sync |\n| `get_code_connect_map` | Component â†’ code mapping | Auto-map Figma to codebase |\n| `get_design_context` | UI code generation | Component implementation |\n| `get_screenshot` | Visual snapshots | Visual regression testing |\n| `create_design_system_rules` | Design system automation | Rule generation |\n\n### Python Functions\n\n| Function | Purpose | Input | Output |\n|----------|---------|-------|--------|\n| `design_analyzer.py` | Extract design patterns | Figma URL/data | Component list |\n| `token_extractor.py` | Convert to DTCG format | Variables JSON | DTCG tokens + diff |\n| `component_mapper.py` | Map components | Figma + codebase | Mappings with confidence |\n| `design_system_auditor.py` | Detect drift | Design + code | Drift report |\n| `implementation_planner.py` | Generate task doc | Analysis results | Navigator task |\n\n---\n\n## Documentation\n\n- **[INSTALL.md](INSTALL.md)** - Detailed installation guide with troubleshooting\n- **[SKILL.md](SKILL.md)** - Complete skill documentation and workflows\n- **[functions/figma_mcp_client.py](functions/figma_mcp_client.py)** - MCP client API reference\n\n---\n\n## Requirements\n\n### System\n\n- **Python 3.10+**\n- **Figma Desktop** v116.0.0+\n- **macOS, Linux, or Windows**\n\n### Python Packages\n\n```txt\nmcp>=1.2.1          # Official MCP SDK\nanyio>=4.0.0        # Async I/O\nhttpx>=0.25.0       # HTTP client\npydantic>=2.0.0     # Data validation\n```\n\nInstalled automatically via `./setup.sh`\n\n### Optional\n\n- **Figma Enterprise** - For Code Connect (automatic component mapping)\n- **Tailwind CSS** - For design token integration\n- **Storybook** - For visual regression testing\n\n---\n\n## Example Usage\n\n### Design Review\n\n```\nUser: \"Review dashboard redesign: https://figma.com/file/...\"\n\nNavigator:\n1. Connects to Figma MCP\n2. Extracts 12 design tokens, 3 new components\n3. Maps to existing Button component (78% similarity)\n4. Detects 5 token drift issues\n5. Generates TASK-16 with phased implementation plan\n\nOutput:\n  - .agent/design-system/reviews/2025-10-22-dashboard.md\n  - .agent/tasks/TASK-16-dashboard-redesign.md\n```\n\n### Token Extraction Only\n\n```python\n# Simple token fetch\nfrom figma_mcp_client import get_figma_variables\n\ntokens = await get_figma_variables()\n# Returns: {'primary-600': '#2563EB', 'spacing-md': '16px', ...}\n```\n\n### Component Analysis\n\n```python\n# Full analysis with progressive refinement\nfrom figma_mcp_client import FigmaMCPClient\n\nasync with FigmaMCPClient() as client:\n    metadata = await client.get_metadata()\n    components = extract_components(metadata)\n\n    print(f\"Found {len(components)} components\")\n    for comp in components:\n        print(f\"  - {comp['name']} ({comp['type']})\")\n```\n\n---\n\n## Troubleshooting\n\n### \"Figma Desktop not running\"\n\n```\nâŒ Could not connect to Figma Desktop MCP server\n```\n\n**Fix**:\n1. Ensure Figma Desktop running\n2. Enable MCP: Figma â†’ Preferences â†’ Enable local MCP Server\n3. Verify: `curl http://127.0.0.1:3845/mcp` (should return JSON)\n\n### \"MCP SDK not installed\"\n\n```\nImportError: MCP SDK not installed\n```\n\n**Fix**:\n```bash\ncd skills/product-design\nsource venv/bin/activate  # Activate venv\npip install -r requirements.txt\n```\n\n### \"Python 3.10+ required\"\n\n**Fix**: Install Python 3.10+\n```bash\n# macOS\nbrew install python@3.13\n\n# Ubuntu\nsudo apt install python3.13\n```\n\nSee **[INSTALL.md](INSTALL.md)** for complete troubleshooting guide.\n\n---\n\n## Performance\n\n### Benchmarks\n\n| Workflow | Before | After | Improvement |\n|----------|--------|-------|-------------|\n| **Design Review** | 15-20 min | 5 min | 75% faster |\n| **Token Extraction** | Manual (30 min) | Automated (1 min) | 97% faster |\n| **Component Mapping** | Manual (2 hours) | Automated (2 min) | 98% faster |\n| **Orchestration Steps** | 15-20 steps | 1 step | 95% reduction |\n\n### Token Efficiency\n\n| Approach | Tokens | Improvement |\n|----------|--------|-------------|\n| **Old** (manual orchestration) | 150k | Baseline |\n| **New** (direct MCP client) | 12k | 92% reduction |\n\nProgressive refinement only fetches needed data.\n\n---\n\n## Version History\n\n### v1.1.0 (2025-10-22) - MCP Direct Integration\n\n**Breaking Changes**:\n- Python now requires `mcp>=1.2.1` (install via `./setup.sh`)\n- Figma Desktop with MCP enabled required for automated workflow\n\n**New Features**:\n- âœ¨ Direct Python â†’ Figma MCP client (no Claude orchestration)\n- âœ¨ Progressive refinement (smart token usage)\n- âœ¨ Automatic connection management\n- âœ¨ `./setup.sh` automated installation\n- âœ¨ `figma_mcp_client.py` wrapper class\n\n**Improvements**:\n- 95% reduction in orchestration overhead (15-20 steps â†’ 1)\n- 92% reduction in token usage (150k â†’ 12k)\n- Built-in error handling and retries\n- Better MCP connection diagnostics\n\n**Migration**:\n```bash\ncd skills/product-design\n./setup.sh  # Installs new dependencies\n```\n\n### v1.0.0 (2025-10-21) - Initial Release\n\n- Design analysis and token extraction\n- Component mapping with similarity detection\n- Design system drift detection\n- Implementation plan generation\n\n---\n\n## Support\n\n**Documentation**: See [INSTALL.md](INSTALL.md) and [SKILL.md](SKILL.md)\n\n**Issues**: Report at https://github.com/navigator-plugin/navigator/issues\n\n**Requirements for issue reports**:\n- Python version: `python3 --version`\n- Figma version: Figma â†’ Help â†’ About Figma\n- Output from: `python3 functions/test_mcp_connection.py`\n- Full error message and stack trace\n\n---\n\n## License\n\nMIT License - Part of Navigator Plugin\n\n---\n\n**Navigator Version**: 3.3.1\n**Skill Version**: 1.1.0\n**MCP SDK Version**: 1.2.1+\n**Last Updated**: 2025-10-22\n",
        "skills/product-design/SKILL.md": "---\nname: product-design\ndescription: Automates design review, token extraction, component mapping, and implementation planning. Reduces design handoff from 6-10 hours to 5 minutes via direct Figma MCP integration. Auto-invoke when user mentions design review, Figma mockup, or design handoff.\nallowed-tools: Read, Write, Edit, Grep, Glob, Bash, Task, TodoWrite\nversion: 1.1.0\n---\n\n# Product Design Skill\n\nAutomate design handoff from Figma to code with design system intelligence. Extract tokens, map components, detect drift, generate implementation plans.\n\n## When to Invoke\n\nAuto-invoke when user says:\n- \"Review this design\"\n- \"Analyze Figma mockup\"\n- \"Design handoff for [feature]\"\n- \"Check design system impact\"\n- \"Plan implementation for design\"\n- \"Extract tokens from Figma\"\n- \"What changed in the design?\"\n\n## What This Does\n\n**5-Step Workflow**:\n1. **Design Analysis**: Extract patterns, components, tokens from Figma\n2. **Codebase Audit**: Compare design vs implementation, find drift\n3. **Implementation Planning**: Generate phased task breakdown\n4. **Task Assignment**: Create Navigator task document\n5. **Handoff**: Ask user to review or start implementation\n\n**Time Savings**: 6-10 hours â†’ 15-20 minutes (95% reduction)\n\n## Prerequisites\n\n### Required\n\n1. **Python Dependencies**\n   ```bash\n   cd skills/product-design\n   ./setup.sh  # Automated installation\n   # OR manually: pip install -r requirements.txt\n   ```\n\n2. **Figma Desktop** (for automated workflow)\n   - Download: https://www.figma.com/downloads/\n   - Enable MCP: Figma â†’ Preferences â†’ Enable local MCP Server\n   - Must be running during design reviews\n\n3. **Project Structure**\n   - `.agent/design-system/` directory (created on first run)\n   - Project with components (React/Vue/Svelte)\n\n### Optional (Enhanced Features)\n- **Figma Enterprise**: Code Connect for automatic component mapping\n- **Tailwind CSS**: Design token integration via @theme\n- **Storybook**: Component documentation and visual regression\n\n### Installation\n\n**Quick start**:\n```bash\ncd skills/product-design\n./setup.sh\n```\n\nSee `INSTALL.md` for detailed installation guide and troubleshooting.\n\n## Workflow Protocol\n\n### Step 0: Check Setup (Auto-Run)\n\n**Before starting, verify Python dependencies installed**:\n\n```bash\n# Get Navigator plugin path\nPLUGIN_PATH=$(dirname \"$(dirname \"$(dirname \"$PWD\")\")\")\n\n# Check if venv exists\nif [ ! -d \"$PLUGIN_PATH/skills/product-design/venv\" ]; then\n  echo \"âŒ product-design skill not set up\"\n  echo \"\"\n  echo \"Run setup (30 seconds):\"\n  echo \"  cd $PLUGIN_PATH/skills/product-design && ./setup.sh\"\n  echo \"\"\n  echo \"Or use manual workflow (no Python needed)\"\n  exit 1\nfi\n```\n\n**If setup missing**:\n- Show setup instructions\n- Offer manual workflow as alternative\n- **Do not proceed** with automated Figma workflow\n\n**If setup complete**:\n- Continue to Step 1 (Design Analysis)\n\n---\n\n### Step 1: Design Analysis\n\n**Objective**: Extract design patterns from Figma or manual description\n\n#### With Figma MCP (Automated) âœ¨ SIMPLIFIED\n\n**New Architecture** (v1.1.0+): Python directly connects to Figma MCP - no manual orchestration!\n\n```python\n# Python functions now handle MCP connection automatically\nfrom figma_mcp_client import FigmaMCPClient\n\nasync with FigmaMCPClient() as client:\n    # Progressive refinement - fetch only what's needed\n    metadata = await client.get_metadata()\n    components = extract_components(metadata)\n\n    # Fetch details only for complex components\n    for comp in components:\n        if comp['complexity'] == 'high':\n            comp['detail'] = await client.get_design_context(comp['id'])\n\n    # Get design tokens\n    variables = await client.get_variable_defs()\n```\n\n**Workflow** (fully automated):\n1. User provides Figma URL\n2. Run `python3 functions/design_analyzer.py --figma-url <URL>`\n3. Python connects to Figma MCP (http://127.0.0.1:3845/mcp)\n4. Fetches metadata â†’ analyzes â†’ fetches details only if needed\n5. Returns complete analysis\n\n**Benefits**:\n- âœ… No manual MCP tool calls by Claude\n- âœ… Progressive refinement (smart token usage)\n- âœ… Automatic connection management\n- âœ… Built-in error handling\n\n**Requirements**:\n- Figma Desktop running\n- MCP enabled in preferences\n- Python dependencies installed (`./setup.sh`)\n\n#### Manual Workflow (No MCP)\n\n```markdown\n**Ask user for design information**:\n\nWhat is the feature name? [e.g., \"Dashboard Redesign\"]\n\nFigma link (optional): [figma.com/file/...]\n\n**Design Tokens**:\nList new or modified tokens:\n- Colors (name: value, e.g., \"primary-600: #2563EB\")\n- Spacing (e.g., \"spacing-lg: 24px\")\n- Typography (e.g., \"heading-xl: 36px/600\")\n- Other (radius, shadow, etc.)\n\n**Components**:\nList components in design:\n- Component name\n- Type (atom, molecule, organism)\n- Variants (if any, e.g., \"Button: primary/secondary, sm/md/lg\")\n- Similar to existing component? (name if known)\n\n**Proceed to Step 2** after gathering information\n```\n\n#### Run design_analyzer.py\n\n```bash\n# Prepare input (MCP or manual JSON)\n# MCP: Already have /tmp/figma_metadata.json\n# Manual: Create JSON from user input\n\npython3 functions/design_analyzer.py \\\n  --figma-data /tmp/figma_combined.json \\\n  --ui-kit-inventory .agent/design-system/ui-kit-inventory.json \\\n  --output /tmp/analysis_results.json\n```\n\n**Analysis Output**:\n- New components not in UI kit\n- Similar components (reuse opportunities)\n- New design tokens\n- Breaking changes (if any)\n\n---\n\n### Step 2: Codebase Audit\n\n**Objective**: Compare design vs implementation, detect drift\n\n#### Token Extraction\n\n```bash\npython3 functions/token_extractor.py \\\n  --figma-variables /tmp/figma_variables.json \\\n  --existing-tokens .agent/design-system/design-tokens.json \\\n  --output /tmp/token_extraction.json\n```\n\n**Output**: DTCG formatted tokens + diff summary\n\n#### Component Mapping\n\n```bash\npython3 functions/component_mapper.py \\\n  --figma-components /tmp/analysis_results.json \\\n  --code-connect-map /tmp/figma_code_connect.json \\\n  --project-root . \\\n  --output /tmp/component_mappings.json\n```\n\n**Output**: Figma component â†’ code component mappings with confidence scores\n\n#### Design System Audit\n\n```bash\n# Combine data for auditor\npython3 functions/design_system_auditor.py \\\n  --figma-data /tmp/combined_figma.json \\\n  --code-data /tmp/combined_code.json \\\n  --output /tmp/audit_results.json\n```\n\n**Audit Results**:\n- Token alignment (in sync, drift, missing, unused)\n- Component reuse opportunities\n- Tailwind config recommendations\n- Priority level (critical, high, medium, low)\n\n---\n\n### Step 3: Implementation Planning\n\n**Objective**: Generate phased implementation task document\n\n#### Generate Task Document\n\n```bash\npython3 functions/implementation_planner.py \\\n  --task-id \"TASK-{{next_task_number}}\" \\\n  --feature-name \"{{feature_name}}\" \\\n  --analysis-results /tmp/combined_analysis.json \\\n  --review-reference \".agent/design-system/reviews/{{date}}-{{feature-slug}}.md\" \\\n  --output .agent/tasks/TASK-{{next_task_number}}-{{feature-slug}}.md\n```\n\n**Task Document Includes**:\n- Phased implementation (tokens â†’ atoms â†’ molecules â†’ organisms)\n- Complexity estimates per phase\n- Acceptance criteria checklist\n- Files to modify\n- Testing strategy\n- Rollout plan\n\n#### Create Design Review Report\n\n**Use template**: `templates/design-review-report.md`\n\n**Save to**: `.agent/design-system/reviews/YYYY-MM-DD-{{feature-name}}.md`\n\n**Contents**:\n- Design analysis summary\n- Token changes (added/modified/removed)\n- Component changes (new/extended/breaking)\n- Design system impact\n- Implementation recommendations\n\n---\n\n### Step 4: Task Assignment\n\n**Objective**: Create task and assign context for implementation\n\n#### Create PM Ticket (if configured)\n\n```markdown\n**If PM tool configured** (Linear, GitHub Issues, Jira):\n- Create ticket with task summary\n- Link to task document and design review\n- Assign to frontend developer or team\n\n**If no PM tool**:\n- Skip ticket creation\n- Task document serves as source of truth\n```\n\n#### Update Navigator Documentation\n\n```markdown\n**Update files**:\n1. `.agent/tasks/TASK-{{number}}-{{feature}}.md` (created in Step 3)\n2. `.agent/design-system/reviews/{{date}}-{{feature}}.md` (design review)\n3. `.agent/DEVELOPMENT-README.md` (add task to index)\n\n**Use TodoWrite** to track implementation phases\n```\n\n---\n\n### Step 5: Implementation Handoff\n\n**Objective**: Present results and get user decision\n\n#### Present Summary\n\n```markdown\nâœ… Design review complete for {{Feature Name}}\n\n**Generated Documentation**:\n- Design review: `.agent/design-system/reviews/{{date}}-{{feature}}.md`\n- Implementation plan: `.agent/tasks/TASK-{{number}}-{{feature}}.md`\n{{#if pm_configured}}- PM ticket: {{ticket_id}} (status: ready for development){{/if}}\n\n**Summary**:\n- Design Tokens: {{new_count}} new, {{modified_count}} modified\n- Components: {{new_components}} new, {{extend_components}} to extend\n- Estimated Time: {{total_hours}} hours\n- Complexity: {{complexity_level}}\n{{#if breaking_changes}}- âš ï¸  Breaking Changes: {{breaking_count}} component(s){{/if}}\n\n**Next Steps**:\n[1] Start implementation now\n[2] Review plan first (load task document)\n[3] Modify plan before starting\n\n**Recommended**: After implementation, set up visual regression testing:\n  \"Set up visual regression for {{components}}\"\n\nThis ensures pixel-perfect implementation and prevents future drift (15 min setup).\n\nReply with choice or \"Start implementation\"\n```\n\n#### User Decision Branches\n\n**If user chooses [1] or says \"Start implementation\"**:\n```markdown\n1. Load task document: `Read .agent/tasks/TASK-{{number}}-{{feature}}.md`\n2. Load design review: `Read .agent/design-system/reviews/{{date}}-{{feature}}.md`\n3. Begin Phase 1 (typically design tokens)\n4. Follow autonomous completion protocol when done\n5. After completion, suggest: \"Set up visual regression for {{components}}\" (optional but recommended)\n```\n\n**If user chooses [2]**:\n```markdown\n1. Load and display task document\n2. Highlight key phases and acceptance criteria\n3. Ask: \"Ready to start or need changes?\"\n```\n\n**If user chooses [3]**:\n```markdown\n1. Load task document\n2. Ask what modifications needed\n3. Edit task document\n4. Regenerate if major changes\n5. Then proceed to implementation\n```\n\n---\n\n## Predefined Functions\n\n### functions/design_analyzer.py\n\n**Purpose**: Extract design patterns from Figma MCP data or manual input\n\n**Usage**:\n```bash\npython3 functions/design_analyzer.py \\\n  --figma-data /path/to/figma_mcp_combined.json \\\n  --ui-kit-inventory .agent/design-system/ui-kit-inventory.json \\\n  --output /tmp/analysis.json\n```\n\n**Input Format** (figma_mcp_combined.json):\n```json\n{\n  \"metadata\": { ... },  // get_metadata response\n  \"variables\": { ... }, // get_variable_defs response\n  \"code_connect_map\": { ... } // get_code_connect_map response (optional)\n}\n```\n\n**Output**: Component analysis with categorization (atom/molecule/organism) + similarity scores\n\n---\n\n### functions/token_extractor.py\n\n**Purpose**: Convert Figma variables to DTCG format with diff\n\n**Usage**:\n```bash\npython3 functions/token_extractor.py \\\n  --figma-variables /path/to/figma_variables.json \\\n  --existing-tokens .agent/design-system/design-tokens.json \\\n  --format full \\\n  --output /tmp/tokens.json\n```\n\n**Output Formats**:\n- `full`: DTCG tokens + diff + summary\n- `tokens-only`: Just DTCG tokens\n- `diff-only`: Just diff and summary\n\n**DTCG Format** (W3C Design Tokens spec):\n```json\n{\n  \"color\": {\n    \"primary\": {\n      \"500\": {\n        \"$value\": \"#3B82F6\",\n        \"$type\": \"color\",\n        \"$description\": \"Primary brand color\"\n      }\n    }\n  }\n}\n```\n\n---\n\n### functions/component_mapper.py\n\n**Purpose**: Map Figma components to codebase components\n\n**Usage**:\n```bash\npython3 functions/component_mapper.py \\\n  --figma-components /path/to/analysis_results.json \\\n  --code-connect-map /path/to/code_connect.json \\\n  --project-root . \\\n  --output /tmp/mappings.json\n```\n\n**Mapping Strategy**:\n1. Code Connect first (100% confidence)\n2. Fuzzy name matching (70%+ confidence)\n3. Unmapped = needs creation\n\n**Output**: Mappings with confidence scores + variant prop mapping\n\n---\n\n### functions/design_system_auditor.py\n\n**Purpose**: Audit design system for drift and reuse opportunities\n\n**Usage**:\n```bash\npython3 functions/design_system_auditor.py \\\n  --figma-data /path/to/combined_figma.json \\\n  --code-data /path/to/combined_code.json \\\n  --output /tmp/audit.json\n```\n\n**Audit Checks**:\n- Token alignment (drift detection)\n- Component reuse opportunities (similarity >70%)\n- Unused tokens (cleanup candidates)\n- Priority level assignment\n\n---\n\n### functions/implementation_planner.py\n\n**Purpose**: Generate Navigator task document with phased breakdown\n\n**Usage**:\n```bash\npython3 functions/implementation_planner.py \\\n  --task-id \"TASK-16\" \\\n  --feature-name \"Dashboard Redesign\" \\\n  --analysis-results /path/to/combined_analysis.json \\\n  --review-reference \".agent/design-system/reviews/2025-10-21-dashboard.md\" \\\n  --output .agent/tasks/TASK-16-dashboard-redesign.md\n```\n\n**Output**: Complete Navigator task document with:\n- Phased implementation (atomic design order)\n- Complexity estimates (Low/Medium/High)\n- Acceptance criteria per phase\n- Testing strategy\n- Rollout plan\n\n---\n\n## Templates\n\n### templates/design-review-report.md\n\n**When**: Step 3 - Creating design review documentation\n\n**Structure**:\n```markdown\n# Design Review: {{Feature Name}}\n\n**Date**: {{YYYY-MM-DD}}\n**Figma**: [Link]({{figma_url}})\n**Reviewer**: Navigator Product Design Skill\n\n## New Design Tokens\n[Token changes]\n\n## New Components Required\n[Component list with categories]\n\n## Design System Impact\n[High/Medium/Low impact analysis]\n\n## Implementation Recommendations\n[Phased approach]\n```\n\n---\n\n## Design System Documentation Structure\n\n### Initial Setup (First Run)\n\n```bash\nmkdir -p .agent/design-system/reviews\n\n# Create initial files\ntouch .agent/design-system/design-tokens.json\ntouch .agent/design-system/ui-kit-inventory.json\ntouch .agent/design-system/component-mapping.json\n```\n\n**design-tokens.json** (DTCG format):\n```json\n{\n  \"color\": {},\n  \"spacing\": {},\n  \"typography\": {},\n  \"radius\": {},\n  \"shadow\": {}\n}\n```\n\n**ui-kit-inventory.json**:\n```json\n{\n  \"components\": [\n    {\n      \"name\": \"Button\",\n      \"path\": \"src/components/ui/Button.tsx\",\n      \"category\": \"atom\",\n      \"variants\": [\"primary\", \"secondary\", \"ghost\"],\n      \"figma_link\": \"...\"\n    }\n  ],\n  \"tokens\": {}\n}\n```\n\n### File Loading Strategy\n\n**Never load**:\n- All design review reports (50+ files = 250k+ tokens)\n- Full Figma MCP responses (can be 350k+ tokens)\n\n**Always load when skill active**:\n- `ui-kit-inventory.json` (~3k tokens)\n- `design-tokens.json` (~2k tokens)\n- Specific design review for current task (~5k tokens)\n\n**Total**: ~10k tokens vs 150k+ (93% reduction)\n\n---\n\n## Figma MCP Integration\n\n### MCP Server Detection\n\n**On skill invocation**:\n1. Check for Figma MCP tools availability\n2. Detect local vs remote server\n3. Adjust workflow based on capabilities\n\n**Local Server** (Recommended):\n- URL: `http://127.0.0.1:3845/mcp`\n- Tools: All (metadata, variables, code_connect, design_context)\n- Requires: Figma Desktop app running\n\n**Remote Server** (Fallback):\n- URL: `https://mcp.figma.com/mcp`\n- Tools: Limited (no code_connect, requires explicit URLs)\n- Requires: Internet connection, explicit Figma links\n\n### Handling Token Limits\n\n**Problem**: Large screens return >350k tokens (exceeds default 25k limit)\n\n**Solution**:\n```markdown\n1. Use `get_metadata` first (sparse XML, ~5k tokens)\n2. Parse metadata to identify component node IDs\n3. Fetch components individually via `get_design_context`\n4. Aggregate results from multiple small calls\n\n**Environment Variable** (recommended):\nexport MAX_MCP_OUTPUT_TOKENS=100000\n```\n\n### MCP Tool Usage\n\n**get_metadata**: Always first for large designs\n- Returns sparse XML with node IDs, types, names\n- Low token cost (~5-10k)\n- Use to plan component extraction strategy\n\n**get_variable_defs**: Extract all design tokens\n- One call gets all variables\n- Moderate token cost (~10-20k)\n- Critical for token extraction\n\n**get_code_connect_map**: Get component mappings\n- Requires Figma Enterprise plan\n- Returns node_id â†’ code_path mappings\n- Highest confidence mappings\n\n**get_design_context**: Extract component code\n- Use per-component (NOT full screen)\n- Can generate React/Vue/HTML via prompting\n- Highest token cost - use sparingly\n\n---\n\n## Tailwind CSS Integration\n\n### Design Tokens â†’ Tailwind @theme\n\n**Style Dictionary Pipeline**:\n```bash\n# 1. Tokens extracted to design-tokens.json (DTCG format)\n# 2. Run Style Dictionary build\nnpx style-dictionary build\n\n# 3. Generates tailwind-tokens.css\n# @theme {\n#   --color-primary-500: #3B82F6;\n#   --spacing-md: 16px;\n# }\n\n# 4. Tailwind auto-generates utilities\n# .bg-primary-500, .p-md, etc.\n```\n\n### Figma Auto Layout â†’ Tailwind Classes\n\n**Translation Rules** (apply during code generation):\n```\nDirection:\n  Horizontal â†’ flex-row\n  Vertical â†’ flex-col\n\nSpacing:\n  Gap â†’ gap-{token}\n  Padding â†’ p-{token}, px-{token}, py-{token}\n\nAlignment:\n  Start â†’ items-start, justify-start\n  Center â†’ items-center, justify-center\n  Space Between â†’ justify-between\n\nSizing:\n  Hug â†’ w-auto / h-auto\n  Fill â†’ flex-1\n  Fixed â†’ w-{value} / h-{value}\n```\n\n---\n\n## Token Optimization\n\n### Navigator Principles\n\n**Load on demand**:\n- Design review for current task only\n- UI kit inventory (always needed)\n- Design tokens (always needed)\n\n**Use Task agent for codebase searches**:\n- Finding all component files (60-80% token savings)\n- Searching for token usage in Tailwind config\n- Analyzing component variant patterns\n\n**Compact after completion**:\n- Clear context after design review\n- Preserve task document in marker\n- Clean slate for implementation\n\n---\n\n## Troubleshooting\n\n### \"Figma MCP tool not found\"\n\n**Issue**: MCP server not available\n\n**Solutions**:\n1. Check Figma Desktop app is running (for local server)\n2. Verify MCP server added: `claude mcp add --transport http figma-desktop http://127.0.0.1:3845/mcp`\n3. Fall back to manual workflow (still provides value)\n\n### \"Token limit exceeded\"\n\n**Issue**: `get_design_context` response too large\n\n**Solutions**:\n1. Use `get_metadata` first, then fetch components individually\n2. Set `MAX_MCP_OUTPUT_TOKENS=100000`\n3. Break design into smaller selections in Figma\n\n### \"No components found in codebase\"\n\n**Issue**: `component_mapper.py` finds no matches\n\n**Solutions**:\n1. Check `--project-root` points to correct directory\n2. Verify component file extensions (tsx, jsx, vue)\n3. Check components aren't in excluded directories (node_modules)\n\n### \"Design tokens not in DTCG format\"\n\n**Issue**: Existing tokens use legacy format\n\n**Solutions**:\n1. Run `token_extractor.py` with `--format tokens-only` to convert\n2. Backup existing tokens first\n3. Update Style Dictionary config to read DTCG format\n\n---\n\n## Success Metrics\n\n### Efficiency Gains\n\n**Before**: 6-10 hours per design handoff\n**After**: 15-20 minutes\n**Savings**: 95% time reduction\n\n### Quality Metrics\n\n- Design system drift detected automatically\n- 100% token consistency via automated sync\n- Component reuse rate tracked\n- Implementation accuracy via acceptance criteria\n\n---\n\n## Example Usage\n\n```\nUser: \"Review the dashboard redesign from Figma: https://figma.com/file/...\"\n\nNavigator:\n1. Checks for Figma MCP availability\n2. Extracts metadata, variables, code_connect_map\n3. Runs design_analyzer.py â†’ finds 3 new components, 12 new tokens\n4. Runs token_extractor.py â†’ generates DTCG tokens, finds 5 drift issues\n5. Runs component_mapper.py â†’ maps 2 components, 1 new needed\n6. Runs design_system_auditor.py â†’ priority: HIGH (drift detected)\n7. Runs implementation_planner.py â†’ generates TASK-17 with 3 phases\n8. Creates design review report\n9. Presents summary with [Start/Review/Modify] options\n\nUser: \"Start implementation\"\n\nNavigator:\n1. Loads TASK-17 document\n2. Begins Phase 1: Design Tokens\n3. Updates design-tokens.json with 12 new tokens\n4. Runs Style Dictionary build\n5. Updates Tailwind config\n6. Commits changes\n7. Moves to Phase 2: StatBadge component\n8. ... continues through all phases\n9. Autonomous completion when done\n```\n\n---\n\n**Last Updated**: 2025-10-21\n**Navigator Version**: 3.2.0 (target)\n**Skill Version**: 1.0.0\n",
        "skills/product-design/examples/dashboard-redesign-review.md": "# Design Review: Dashboard Redesign\n\n**Date**: 2025-10-21\n**Figma**: [Dashboard Mockup](https://figma.com/file/example123)\n**Reviewer**: Navigator Product Design Skill\n\n---\n\n## Summary\n\nDashboard redesign introduces new metric visualization components and updates color system for better data hierarchy.\n\n**Changes Overview**:\n- Design Tokens: 12 new, 5 modified\n- Components: 3 new, 1 to extend\n- Breaking Changes: 1 (MetricCard props)\n\n---\n\n## New Design Tokens\n\n### Colors\n- **color.status.warning.500**: `#F59E0B` (color)\n  _Warning state for metrics below threshold_\n- **color.status.error.600**: `#DC2626` (color)\n  _Error state for critical metrics_\n- **color.status.success.500**: `#10B981` (color)\n  _Success state for metrics above target_\n- **color.neutral.50**: `#F9FAFB` (color)\n  _Card background for dashboard widgets_\n\n### Spacing\n- **spacing.section.gap**: `48px` (dimension)\n  _Gap between dashboard sections_\n- **spacing.widget.padding**: `24px` (dimension)\n  _Internal padding for metric widgets_\n- **spacing.metric.gap**: `12px` (dimension)\n  _Gap between metric label and value_\n\n### Typography\n- **typography.heading.xl**: `36px/600/42px` (typography)\n  _Large dashboard headings_\n- **typography.metric.value**: `48px/700/52px` (typography)\n  _Metric display values_\n- **typography.metric.label**: `14px/500/20px` (typography)\n  _Metric labels_\n\n### Other Tokens\n- **radius.widget**: `12px` (dimension)\n  _Border radius for dashboard widgets_\n- **shadow.widget**: `0 1px 3px rgba(0,0,0,0.1)` (shadow)\n  _Subtle shadow for elevated widgets_\n\n---\n\n## Modified Design Tokens\n\n### color.primary.600\n- **Old Value**: `#1D4ED8`\n- **New Value**: `#2563EB`\n- **Impact**: Affects primary buttons and links throughout dashboard\n\n### spacing.md\n- **Old Value**: `16px`\n- **New Value**: `20px`\n- **Impact**: Increases default spacing in grid layouts\n\n### typography.body.medium\n- **Old Value**: `16px/400/24px`\n- **New Value**: `16px/500/24px`\n- **Impact**: Slightly bolder body text for better readability\n\n---\n\n## New Components Required\n\n### Atoms (Basic Elements)\n\n#### StatBadge\n\n**Purpose**: Small metric indicator with icon and optional pulse animation\n**Variants**: success, warning, error, info\n**States**: default, pulse (animated)\n**Similar to**: Badge (78% match)\n\n**Recommendation**: Extend existing Badge component with `variant=\"stat\"` prop instead of creating new component. Add icon prop and pulse animation state.\n\n### Molecules (Simple Combinations)\n\n#### TrendIndicator\n\n**Purpose**: Show metric trend with arrow and percentage change\n**Composition**: Icon (arrow up/down) + Text (percentage) + StatBadge\n**Variants**: up (green), down (red), neutral (gray)\n**Similar to**: None (0% match)\n\n**Recommendation**: Create new molecule component. Reuse StatBadge internally.\n\n### Organisms (Complex Components)\n\n#### DashboardGrid\n\n**Purpose**: Responsive grid layout for dashboard widgets\n**Composition**: Grid container + flexible widget slots\n**Responsive**: 1 col (mobile), 2 col (tablet), 3 col (desktop)\n**Similar to**: None (0% match)\n\n**Recommendation**: Create new organism component with responsive grid behavior. Use CSS Grid for layout.\n\n---\n\n## Component Reuse Opportunities\n\n### StatBadge â†’ Extend Badge\n\n**Similarity**: 78%\n**Recommendation**: Extend existing Badge component with new variant instead of creating duplicate component\n**Time Saved**: 2-3 hours\n\n**Approach**: Add `variant=\"stat\"` option to Badge props. Add `icon` prop for optional icon display. Add `pulse` boolean prop for animation state. Maintains existing Badge API while adding new functionality.\n\n### MetricCard â†’ Enhance Existing\n\n**Similarity**: 85%\n**Recommendation**: Add trend and comparison props to existing MetricCard component\n**Time Saved**: 2 hours\n\n**Approach**: Add `trend` prop (up/down/neutral). Add `comparisonPeriod` prop (string). Both optional initially for backward compatibility. Mark as required in v3.0.0.\n\n---\n\n## Design System Impact\n\n### Token Health\n\n- **In Sync**: 87 tokens\n- **Drift Detected**: 5 tokens\n- **Missing in Code**: 12 tokens\n- **Unused in Design**: 3 tokens\n\n**Sync Status**: Drift Detected\n**Priority Level**: High\n\n### High Impact Changes\n\n- **Color primary.600 modification**\n  - **Impact**: Breaking change for custom theme consumers\n  - **Action Required**: Update documentation, notify users in changelog\n\n- **Spacing.md increase** (16px â†’ 20px)\n  - **Impact**: Layout shifts in existing grid components\n  - **Action Required**: Visual regression testing on all layouts\n\n### Low Impact Changes\n\n- Typography weight increase (400 â†’ 500) - minimal visual change\n- New status colors - additive only, no conflicts\n- New widget tokens - isolated to dashboard feature\n\n---\n\n## Implementation Recommendations\n\n### Phased Approach\n\n**Phase 1: Design Tokens** (2 hours)\n- Priority: High\n- Add 12 new tokens to design-tokens.json\n- Update 5 existing tokens\n- Run Style Dictionary build\n- Update Tailwind @theme\n\n**Phase 2: Atomic Components** (3 hours)\n- Priority: High\n- Extend Badge component with stat variant (2h)\n- Add pulse animation to Badge (1h)\n\n**Phase 3: Molecule Components** (2 hours)\n- Priority: Medium\n- Create TrendIndicator component (2h)\n\n**Phase 4: Organism Components** (5 hours)\n- Priority: Medium\n- Create DashboardGrid component (3h)\n- Enhance MetricCard with trend props (2h)\n\n### Total Estimated Time\n\n**12 hours** (Medium complexity)\n\n---\n\n## Breaking Changes\n\n### MetricCard\n\n**Issue**: Adding required `trend` and `comparisonPeriod` props breaks existing usage\n**Previous Mapping**: `src/components/molecules/MetricCard.tsx` (8 existing usages)\n**Recommendation**: Add props as optional first, then require in major version\n\n**Migration Steps**:\n- Add props as optional in v2.4.0\n- Add deprecation warning when props not provided\n- Update all 8 existing usages in codebase\n- Document migration in CHANGELOG.md\n- Make props required in v3.0.0 (breaking change)\n- Provide codemod script for automated migration\n\n---\n\n## Next Steps\n\n1. **Review Implementation Plan**: `.agent/tasks/TASK-16-dashboard-redesign.md`\n2. **Update Design Tokens**: Phase 1 implementation\n3. **Implement Components**: Follow atomic design hierarchy\n4. **Test & Verify**: Visual regression, accessibility, unit tests\n5. **Update UI Kit Inventory**: After each component completion\n\n---\n\n## Design Fidelity Checklist\n\n- [ ] All 12 new design tokens extracted and added to design system\n- [ ] StatBadge extends Badge component correctly\n- [ ] TrendIndicator composition matches Figma\n- [ ] DashboardGrid responsive behavior (1/2/3 cols)\n- [ ] MetricCard shows trend indicator\n- [ ] Spacing matches Figma exactly (48px section gap, 24px widget padding)\n- [ ] Typography scales applied (XL heading 36px, metric value 48px)\n- [ ] Status colors used correctly (success/warning/error)\n- [ ] Widget shadows and radius applied\n- [ ] Interactive states (hover, active) match design\n\n---\n\n**Generated**: 2025-10-21 17:30:00\n**Navigator Version**: 3.2.0\n**Next Review**: After Phase 4 completion\n",
        "skills/product-design/templates/design-review-report.md": "# Design Review: {{FEATURE_NAME}}\n\n**Date**: {{DATE}}\n**Figma**: {{FIGMA_LINK}}\n**Reviewer**: Navigator Product Design Skill\n\n---\n\n## Summary\n\n{{SUMMARY_DESCRIPTION}}\n\n**Changes Overview**:\n- Design Tokens: {{NEW_TOKENS_COUNT}} new, {{MODIFIED_TOKENS_COUNT}} modified\n- Components: {{NEW_COMPONENTS_COUNT}} new, {{EXTEND_COMPONENTS_COUNT}} to extend\n- Breaking Changes: {{BREAKING_CHANGES_COUNT}}\n\n---\n\n## New Design Tokens\n\n### Colors\n{{#each NEW_COLOR_TOKENS}}\n- **{{name}}**: `{{value}}` ({{type}})\n  {{#if description}}_{{description}}_{{/if}}\n{{/each}}\n\n### Spacing\n{{#each NEW_SPACING_TOKENS}}\n- **{{name}}**: `{{value}}`\n{{/each}}\n\n### Typography\n{{#each NEW_TYPOGRAPHY_TOKENS}}\n- **{{name}}**: `{{value}}`\n{{/each}}\n\n### Other Tokens\n{{#each OTHER_TOKENS}}\n- **{{name}}**: `{{value}}` ({{type}})\n{{/each}}\n\n---\n\n## Modified Design Tokens\n\n{{#each MODIFIED_TOKENS}}\n### {{path}}\n- **Old Value**: `{{old_value}}`\n- **New Value**: `{{new_value}}`\n- **Impact**: {{impact_description}}\n{{/each}}\n\n{{#if NO_MODIFIED_TOKENS}}\n_No tokens modified - all changes are additive._\n{{/if}}\n\n---\n\n## New Components Required\n\n### Atoms (Basic Elements)\n\n{{#each ATOM_COMPONENTS}}\n#### {{name}}\n\n**Purpose**: {{purpose}}\n**Variants**: {{variants}}\n**States**: {{states}}\n**Similar to**: {{similar_component}} ({{similarity_score}}% match)\n\n**Recommendation**: {{recommendation}}\n{{/each}}\n\n### Molecules (Simple Combinations)\n\n{{#each MOLECULE_COMPONENTS}}\n#### {{name}}\n\n**Purpose**: {{purpose}}\n**Composition**: {{composition}}\n**Variants**: {{variants}}\n**Similar to**: {{similar_component}} ({{similarity_score}}% match)\n\n**Recommendation**: {{recommendation}}\n{{/each}}\n\n### Organisms (Complex Components)\n\n{{#each ORGANISM_COMPONENTS}}\n#### {{name}}\n\n**Purpose**: {{purpose}}\n**Composition**: {{composition}}\n**Responsive**: {{responsive_behavior}}\n**Similar to**: {{similar_component}} ({{similarity_score}}% match)\n\n**Recommendation**: {{recommendation}}\n{{/each}}\n\n---\n\n## Component Reuse Opportunities\n\n{{#each REUSE_OPPORTUNITIES}}\n### {{figma_component}} â†’ Extend {{existing_component}}\n\n**Similarity**: {{similarity}}%\n**Recommendation**: {{recommendation}}\n**Time Saved**: {{time_saved}}\n\n**Approach**: {{approach_description}}\n{{/each}}\n\n{{#if NO_REUSE_OPPORTUNITIES}}\n_No reuse opportunities identified - all components are net new._\n{{/if}}\n\n---\n\n## Design System Impact\n\n### Token Health\n\n- **In Sync**: {{IN_SYNC_COUNT}} tokens\n- **Drift Detected**: {{DRIFT_COUNT}} tokens\n- **Missing in Code**: {{MISSING_COUNT}} tokens\n- **Unused in Design**: {{UNUSED_COUNT}} tokens\n\n**Sync Status**: {{SYNC_STATUS}}\n**Priority Level**: {{PRIORITY_LEVEL}}\n\n### High Impact Changes\n\n{{#each HIGH_IMPACT_CHANGES}}\n- {{change_description}}\n  - **Impact**: {{impact_type}}\n  - **Action Required**: {{action_required}}\n{{/each}}\n\n### Low Impact Changes\n\n{{#each LOW_IMPACT_CHANGES}}\n- {{change_description}}\n{{/each}}\n\n---\n\n## Implementation Recommendations\n\n### Phased Approach\n\n**Phase 1: Design Tokens** ({{PHASE_1_HOURS}} hours)\n- Priority: {{PHASE_1_PRIORITY}}\n- Add {{NEW_TOKENS_COUNT}} new tokens to design-tokens.json\n- Update {{MODIFIED_TOKENS_COUNT}} existing tokens\n- Run Style Dictionary build\n- Update Tailwind @theme\n\n**Phase 2: Atomic Components** ({{PHASE_2_HOURS}} hours)\n- Priority: {{PHASE_2_PRIORITY}}\n{{#each ATOM_COMPONENTS}}\n- Implement {{name}} ({{complexity}}, {{estimated_hours}}h)\n{{/each}}\n\n**Phase 3: Molecule Components** ({{PHASE_3_HOURS}} hours)\n- Priority: {{PHASE_3_PRIORITY}}\n{{#each MOLECULE_COMPONENTS}}\n- Implement {{name}} ({{complexity}}, {{estimated_hours}}h)\n{{/each}}\n\n**Phase 4: Organism Components** ({{PHASE_4_HOURS}} hours)\n- Priority: {{PHASE_4_PRIORITY}}\n{{#each ORGANISM_COMPONENTS}}\n- Implement {{name}} ({{complexity}}, {{estimated_hours}}h)\n{{/each}}\n\n### Total Estimated Time\n\n**{{TOTAL_HOURS}} hours** ({{TOTAL_COMPLEXITY}} complexity)\n\n---\n\n## Breaking Changes\n\n{{#each BREAKING_CHANGES}}\n### {{component_name}}\n\n**Issue**: {{issue_description}}\n**Previous Mapping**: `{{previous_mapping}}`\n**Recommendation**: {{recommendation}}\n\n**Migration Steps**:\n{{#each migration_steps}}\n- {{step}}\n{{/each}}\n{{/each}}\n\n{{#if NO_BREAKING_CHANGES}}\nâœ… **No breaking changes** - all updates are backward compatible.\n{{/if}}\n\n---\n\n## Next Steps\n\n1. **Review Implementation Plan**: `.agent/tasks/TASK-{{TASK_NUMBER}}-{{FEATURE_SLUG}}.md`\n2. **Update Design Tokens**: Phase 1 implementation\n3. **Implement Components**: Follow atomic design hierarchy\n4. **Test & Verify**: Visual regression, accessibility, unit tests\n5. **Update UI Kit Inventory**: After each component completion\n\n---\n\n## Design Fidelity Checklist\n\n- [ ] All design tokens extracted and added to design system\n- [ ] Component structure matches Figma composition\n- [ ] Variants and states implemented correctly\n- [ ] Responsive behavior preserved\n- [ ] Spacing and layout match pixel-perfect\n- [ ] Typography styles applied correctly\n- [ ] Colors and themes consistent\n- [ ] Interactive states (hover, active, disabled) implemented\n\n---\n\n**Generated**: {{TIMESTAMP}}\n**Navigator Version**: {{NAVIGATOR_VERSION}}\n**Next Review**: After implementation completion\n",
        "skills/visual-regression/SKILL.md": "---\nname: visual-regression\ndescription: Setup visual regression testing with Storybook stories, configuration, and CI/CD workflows. Supports Chromatic, Percy, BackstopJS. Auto-invoke when user says \"set up visual regression\", \"add Chromatic tests\", \"add screenshot testing\", or \"set up Percy\".\nallowed-tools: Read, Write, Bash, Glob\nversion: 1.0.0\ntriggers:\n  - \"set up visual regression\"\n  - \"add chromatic tests\"\n  - \"create visual tests\"\n  - \"configure visual regression\"\n  - \"add screenshot testing\"\n  - \"set up percy\"\n  - \"add backstopjs\"\n---\n\n# Visual Regression Testing Setup Skill\n\n---\n\n## Skill Purpose\n\nGenerate complete visual regression testing setup with Storybook stories, configuration files, and CI/CD workflows.\n\n**Supports**: Chromatic, Percy, BackstopJS\n**Frameworks**: React, Vue, Svelte (TypeScript/JavaScript)\n**CI/CD**: GitHub Actions, GitLab CI, CircleCI\n\n---\n\n## What This Skill Does\n\n1. **Detects existing setup**: Storybook version, VR tool, CI platform\n2. **Validates component**: Extract props, variants, states\n3. **Generates stories**: Complete `.stories.tsx` with all variants\n4. **Creates config files**: Chromatic, Percy, or BackstopJS configuration\n5. **Sets up CI/CD**: Auto-generate workflow files\n6. **Provides instructions**: Next steps for API tokens, first baseline\n\n---\n\n## Workflow\n\n### Step 1: Validate Project Setup\n\n**Execute**: `vr_setup_validator.py`\n\n**Check**:\n- Framework (React/Vue/Svelte) from package.json\n- Existing Storybook config (.storybook/ directory)\n- Existing VR tool (chromatic, percy, backstopjs in dependencies)\n- CI platform (.github/, .gitlab-ci.yml, .circleci/)\n- Component file exists and is valid\n\n**Output**:\n```json\n{\n  \"framework\": \"react\",\n  \"storybook_version\": \"7.6.0\",\n  \"vr_tool\": \"chromatic\",\n  \"ci_platform\": \"github\",\n  \"component\": {\n    \"path\": \"src/components/ProfileCard.tsx\",\n    \"name\": \"ProfileCard\",\n    \"props\": [...],\n    \"valid\": true\n  },\n  \"dependencies\": {\n    \"installed\": [\"@storybook/react\", \"@storybook/addon-essentials\"],\n    \"missing\": [\"chromatic\", \"@chromatic-com/storybook\"]\n  }\n}\n```\n\n**If Storybook not found**: Ask user if they want to install Storybook first, provide setup instructions.\n\n**If multiple VR tools found**: Ask user which to use (Chromatic recommended).\n\n---\n\n### Step 2: Generate Storybook Stories\n\n**Execute**: `story_generator.py`\n\n**Process**:\n1. Parse component file (TypeScript/JSX/Vue SFC)\n2. Extract props, prop types, default values\n3. Identify variants (size, variant, disabled, etc.)\n4. Generate story file from template\n5. Add accessibility tests (@storybook/addon-a11y)\n6. Add interaction tests (if @storybook/test available)\n\n**Template**: `templates/story-template.tsx.j2`\n\n**Example output** (`ProfileCard.stories.tsx`):\n```typescript\nimport type { Meta, StoryObj } from '@storybook/react';\nimport { ProfileCard } from './ProfileCard';\n\nconst meta = {\n  title: 'Components/ProfileCard',\n  component: ProfileCard,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    size: { control: 'select', options: ['sm', 'md', 'lg'] },\n    variant: { control: 'select', options: ['default', 'compact'] },\n  },\n} satisfies Meta<typeof ProfileCard>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    name: 'John Doe',\n    avatar: 'https://example.com/avatar.jpg',\n    bio: 'Software Engineer',\n    size: 'md',\n    variant: 'default',\n  },\n};\n\nexport const Small: Story = {\n  args: {\n    ...Default.args,\n    size: 'sm',\n  },\n};\n\nexport const Large: Story = {\n  args: {\n    ...Default.args,\n    size: 'lg',\n  },\n};\n\nexport const Compact: Story = {\n  args: {\n    ...Default.args,\n    variant: 'compact',\n  },\n};\n\n// Accessibility test\nDefault.parameters = {\n  a11y: {\n    config: {\n      rules: [\n        { id: 'color-contrast', enabled: true },\n        { id: 'label', enabled: true },\n      ],\n    },\n  },\n};\n```\n\n**Write to**: `{component_directory}/{ComponentName}.stories.tsx`\n\n---\n\n### Step 3: Generate Configuration Files\n\n**Execute**: `chromatic_config_generator.py` (or percy/backstop equivalent)\n\n#### For Chromatic:\n\n**Generate 3 files**:\n\n1. **chromatic.config.json**:\n```json\n{\n  \"projectId\": \"<PROJECT_ID_PLACEHOLDER>\",\n  \"buildScriptName\": \"build-storybook\",\n  \"exitZeroOnChanges\": true,\n  \"exitOnceUploaded\": true,\n  \"onlyChanged\": true,\n  \"externals\": [\"public/**\"],\n  \"skip\": \"dependabot/**\",\n  \"ignoreLastBuildOnBranch\": \"main\"\n}\n```\n\n2. **Update .storybook/main.js** (add addon):\n```javascript\nmodule.exports = {\n  stories: ['../src/**/*.stories.@(js|jsx|ts|tsx)'],\n  addons: [\n    '@storybook/addon-links',\n    '@storybook/addon-essentials',\n    '@chromatic-com/storybook', // â† Added\n    '@storybook/addon-interactions',\n  ],\n  framework: {\n    name: '@storybook/react-vite',\n    options: {},\n  },\n};\n```\n\n3. **Update package.json** (add scripts):\n```json\n{\n  \"scripts\": {\n    \"chromatic\": \"npx chromatic\",\n    \"chromatic:ci\": \"npx chromatic --exit-zero-on-changes\"\n  }\n}\n```\n\n**For Percy**: Generate `.percy.yml` instead\n**For BackstopJS**: Generate `backstop.config.js` instead\n\n---\n\n### Step 4: Generate CI/CD Workflow\n\n**Execute**: `ci_workflow_generator.py`\n\n**Detect CI platform** from existing files:\n- `.github/workflows/` â†’ GitHub Actions\n- `.gitlab-ci.yml` â†’ GitLab CI\n- `.circleci/config.yml` â†’ CircleCI\n- None â†’ Ask user, default to GitHub Actions\n\n#### GitHub Actions Example:\n\n**Generate**: `.github/workflows/chromatic.yml`\n\n```yaml\nname: Visual Regression Tests\n\non:\n  push:\n    branches: [main, develop]\n  pull_request:\n    branches: [main]\n\njobs:\n  chromatic:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          fetch-depth: 0 # Required for Chromatic\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Run Chromatic\n        uses: chromaui/action@latest\n        with:\n          projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}\n          exitZeroOnChanges: true\n          onlyChanged: true\n```\n\n**For GitLab CI**: Add job to `.gitlab-ci.yml`\n**For CircleCI**: Add job to `.circleci/config.yml`\n\n---\n\n### Step 5: Provide Setup Instructions\n\n**Output to user**:\n\n````markdown\nâœ… Visual regression testing setup complete!\n\n## Files Created/Modified\n\nâœ… {ComponentName}.stories.tsx (Storybook story with variants)\nâœ… chromatic.config.json (Chromatic configuration)\nâœ… .storybook/main.js (Added @chromatic-com/storybook addon)\nâœ… package.json (Added chromatic scripts)\nâœ… .github/workflows/chromatic.yml (CI workflow)\n\n## Next Steps\n\n### 1. Install Dependencies\n\n```bash\nnpm install --save-dev chromatic @chromatic-com/storybook\n```\n\n### 2. Create Chromatic Project\n\n1. Go to https://www.chromatic.com/start\n2. Sign in with GitHub\n3. Create new project\n4. Copy project token\n\n### 3. Add Secret to GitHub\n\n1. Go to repository Settings â†’ Secrets and variables â†’ Actions\n2. Create secret: `CHROMATIC_PROJECT_TOKEN`\n3. Paste your project token\n\n### 4. Update chromatic.config.json\n\nReplace `<PROJECT_ID_PLACEHOLDER>` with your actual project ID from Chromatic dashboard.\n\n### 5. Create Baseline\n\n```bash\nnpm run chromatic\n```\n\nThis captures the initial screenshots as your baseline.\n\n### 6. Test Visual Regression\n\n1. Make a visual change to ProfileCard\n2. Commit and push\n3. CI will run Chromatic automatically\n4. Review changes in Chromatic dashboard\n\n## Documentation\n\nSee `.agent/sops/testing/visual-regression-setup.md` for detailed workflow.\n\n## Troubleshooting\n\n**Storybook build fails**: Ensure all component dependencies are installed\n**Chromatic upload fails**: Check project token in secrets\n**No changes detected**: Chromatic only runs on changed stories (use `--force-rebuild` to test)\n````\n\n---\n\n## Predefined Functions Reference\n\n### vr_setup_validator.py\n\n```python\ndef detect_storybook_config(project_root: str) -> dict\ndef detect_vr_tool(project_root: str) -> str\ndef validate_component_path(component_path: str) -> dict\ndef check_dependencies(project_root: str) -> dict\n```\n\n**Returns**: Validation report with detected setup and missing dependencies\n\n### story_generator.py\n\n```python\ndef analyze_component(component_path: str, framework: str) -> dict\ndef generate_story(component_info: dict, template_path: str) -> str\ndef create_accessibility_tests(component_info: dict) -> str\ndef create_interaction_tests(component_info: dict) -> str\n```\n\n**Returns**: Generated story file content\n\n### chromatic_config_generator.py\n\n```python\ndef generate_chromatic_config(project_info: dict) -> str\ndef generate_storybook_config(existing_config: dict) -> str\ndef generate_package_scripts(existing_scripts: dict) -> dict\ndef generate_percy_config(project_info: dict) -> str  # Percy alternative\ndef generate_backstop_config(project_info: dict) -> str  # BackstopJS alternative\n```\n\n**Returns**: Configuration file contents as strings\n\n### ci_workflow_generator.py\n\n```python\ndef detect_ci_platform(project_root: str) -> str\ndef generate_github_workflow(project_info: dict) -> str\ndef generate_gitlab_ci(project_info: dict) -> str\ndef generate_circleci_config(project_info: dict) -> str\n```\n\n**Returns**: CI workflow file contents\n\n---\n\n## Templates Reference\n\n- **story-template.tsx.j2**: React/TypeScript story template\n- **story-template.vue.j2**: Vue SFC story template\n- **chromatic-config.json.j2**: Chromatic configuration\n- **percy-config.yml.j2**: Percy configuration\n- **github-workflow.yml.j2**: GitHub Actions workflow\n- **gitlab-ci.yml.j2**: GitLab CI job\n- **storybook-main.js.j2**: Storybook addon configuration\n\n---\n\n## Examples\n\n### Example 1: Simple Component\n\n```\nUser: \"Set up visual regression for ProfileCard component\"\n\nâ†’ Detects: React, existing Storybook, no VR tool\nâ†’ Generates: ProfileCard.stories.tsx with 4 variants\nâ†’ Creates: Chromatic config, GitHub workflow\nâ†’ Outputs: Setup instructions\n```\n\nSee: `examples/simple-component-vr.md`\n\n### Example 2: Full Design System\n\n```\nUser: \"Set up visual regression for entire design system\"\n\nâ†’ Detects: React, Storybook, components in src/components/\nâ†’ Generates: Stories for all components (Button, Input, Card, etc.)\nâ†’ Creates: Chromatic config with design token validation\nâ†’ Outputs: Bulk setup instructions\n```\n\nSee: `examples/design-system-vr.md`\n\n### Example 3: Existing Storybook\n\n```\nUser: \"Add Chromatic to existing Storybook\"\n\nâ†’ Detects: Storybook v7, existing stories\nâ†’ Adds: @chromatic-com/storybook addon\nâ†’ Creates: Chromatic config, CI workflow\nâ†’ Preserves: Existing stories and configuration\n```\n\nSee: `examples/existing-storybook-vr.md`\n\n---\n\n## Integration with product-design Skill\n\nAfter `product-design` generates implementation plan, suggest visual regression:\n\n```\n\"Implementation plan created! Consider setting up visual regression testing:\n\n  'Set up visual regression for {ComponentName}'\n\nThis ensures pixel-perfect implementation and prevents visual drift.\"\n```\n\n---\n\n## Tool Comparison\n\n### Chromatic (Recommended)\n- âœ… Purpose-built for Storybook\n- âœ… Component-focused testing\n- âœ… UI review workflow\n- âœ… Free tier: 5,000 snapshots/month\n- âŒ Requires cloud service\n\n### Percy\n- âœ… Multi-framework support\n- âœ… Responsive testing\n- âœ… Visual reviews\n- âŒ More expensive\n- âŒ Less Storybook-specific\n\n### BackstopJS\n- âœ… Open source, self-hosted\n- âœ… No cloud dependency\n- âœ… Free\n- âŒ More manual setup\n- âŒ Less automation\n\n**Default**: Chromatic (best Storybook integration)\n\n---\n\n## Error Handling\n\n### Component Not Found\n```\nError: Component file not found at {path}\n\nPlease provide correct path:\n  \"Set up visual regression for src/components/ProfileCard.tsx\"\n```\n\n### Storybook Not Installed\n```\nStorybook not detected. Install first:\n\n  npm install --save-dev @storybook/react @storybook/addon-essentials\n  npx storybook init\n\nThen retry: \"Set up visual regression for ProfileCard\"\n```\n\n### Multiple VR Tools Detected\n```\nMultiple VR tools found: chromatic, percy\n\nWhich should I use?\n  - \"Use Chromatic for visual regression\"\n  - \"Use Percy for visual regression\"\n```\n\n---\n\n## Best Practices\n\n1. **Start with key components**: Don't test everything, focus on design system primitives\n2. **Use interaction tests**: Combine visual + functional testing\n3. **Baseline on main**: Always merge baselines to main branch\n4. **Review changes**: Don't auto-accept visual changes\n5. **Test states**: Capture hover, focus, error states\n6. **Accessibility**: Include a11y tests in all stories\n\n---\n\n## Token Efficiency\n\n**Traditional approach** (50k tokens):\n1. Read Storybook docs (20k)\n2. Read Chromatic docs (15k)\n3. Write stories manually (10k)\n4. Configure CI (5k)\n\n**With visual-regression skill** (3k tokens):\n1. Skill auto-invokes (0 tokens)\n2. Instructions load (3k tokens)\n3. Functions execute (0 tokens)\n\n**Savings**: 94% (47k tokens)\n\n---\n\n## Version History\n\n- **v3.3.0**: Initial release with Chromatic support\n- **Future**: Percy, BackstopJS, Vue, Svelte support\n\n---\n\n**Last Updated**: 2025-10-21\n**Skill Type**: Project-specific\n**Generator**: nav-skill-creator (self-improving)\n",
        "skills/visual-regression/examples/design-system-vr.md": "# Example: Visual Regression for Full Design System\n\nSetup visual regression for entire design system with token validation.\n\n---\n\n## Scenario\n\nYou have a design system with multiple components:\n- Button, Input, Card, Avatar, Badge, Modal, etc.\n- Design tokens extracted from Figma (via product-design skill)\n- Want to ensure pixel-perfect implementation\n\n---\n\n## Usage\n\n```\n\"Set up visual regression for entire design system in src/components\"\n```\n\n---\n\n## What Skill Does\n\n1. **Discovers components**: Scans `src/components/` directory\n2. **Generates stories**: Creates `.stories.tsx` for each component\n3. **Token validation**: Compares CSS values to design tokens\n4. **Bulk setup**: Single Chromatic config for all components\n\n---\n\n## Generated Files\n\n```\nsrc/components/\nâ”œâ”€â”€ Button/\nâ”‚   â”œâ”€â”€ Button.tsx\nâ”‚   â””â”€â”€ Button.stories.tsx       # â† Generated\nâ”œâ”€â”€ Input/\nâ”‚   â”œâ”€â”€ Input.tsx\nâ”‚   â””â”€â”€ Input.stories.tsx        # â† Generated\nâ”œâ”€â”€ Card/\nâ”‚   â”œâ”€â”€ Card.tsx\nâ”‚   â””â”€â”€ Card.stories.tsx         # â† Generated\n...\n\nchromatic.config.json              # â† Generated\n.github/workflows/chromatic.yml    # â† Generated\n```\n\n---\n\n## Integration with product-design Skill\n\nIf you used `product-design` skill to extract Figma tokens:\n\n```\n1. \"Review this design from Figma\"\n   â†’ Extracts tokens to tokens.json\n\n2. \"Set up visual regression for design system\"\n   â†’ Generates stories with token values\n   â†’ Validates implementation matches tokens\n```\n\n---\n\n## Token Validation Example\n\n**Design token** (from Figma):\n```json\n{\n  \"color\": {\n    \"primary\": {\n      \"value\": \"#3B82F6\"\n    }\n  }\n}\n```\n\n**Story validation**:\n```typescript\nexport const Primary: Story = {\n  args: { variant: 'primary' },\n  play: async ({ canvasElement }) => {\n    const button = within(canvasElement).getByRole('button');\n    const computedStyle = window.getComputedStyle(button);\n    expect(computedStyle.backgroundColor).toBe('rgb(59, 130, 246)'); // #3B82F6\n  },\n};\n```\n\n---\n\n## Benefits\n\n- **Prevent drift**: Catch when code diverges from designs\n- **Scale testing**: Test 50+ components in one workflow\n- **Token enforcement**: Ensure design tokens are used correctly\n- **Design review**: Designers see visual diffs in Chromatic\n\n---\n\n**Time saved**: 6-10 hours â†’ 15 minutes (95% reduction)\n**Components**: All in design system\n**Tokens validated**: Automatically\n",
        "skills/visual-regression/examples/existing-storybook-vr.md": "# Example: Add Chromatic to Existing Storybook\n\nAdd visual regression to project that already has Storybook configured.\n\n---\n\n## Scenario\n\n- Storybook 7.x already installed and configured\n- Existing `.stories.tsx` files for components\n- Want to add Chromatic without breaking existing setup\n\n---\n\n## Usage\n\n```\n\"Add Chromatic to existing Storybook\"\n```\n\n---\n\n## What Skill Does\n\n1. **Detects existing setup**: Reads `.storybook/main.js`, existing stories\n2. **Non-destructive update**: Only adds Chromatic addon\n3. **Preserves config**: Keeps existing addons, framework, settings\n4. **CI integration**: Generates workflow\n\n---\n\n## Changes Made\n\n### Before\n\n**.storybook/main.js**:\n```javascript\nmodule.exports = {\n  stories: ['../src/**/*.stories.@(js|jsx|ts|tsx)'],\n  addons: [\n    '@storybook/addon-links',\n    '@storybook/addon-essentials',\n    '@storybook/addon-interactions',\n  ],\n  framework: {\n    name: '@storybook/react-vite',\n    options: {},\n  },\n};\n```\n\n### After\n\n```javascript\nmodule.exports = {\n  stories: ['../src/**/*.stories.@(js|jsx|ts|tsx)'],\n  addons: [\n    '@storybook/addon-links',\n    '@storybook/addon-essentials',\n    '@chromatic-com/storybook',  // â† Added\n    '@storybook/addon-interactions',\n  ],\n  framework: {\n    name: '@storybook/react-vite',\n    options: {},\n  },\n};\n```\n\n---\n\n## Additional Files\n\n- `chromatic.config.json` (new)\n- `.github/workflows/chromatic.yml` (new)\n- `package.json` scripts updated\n\n---\n\n## No Stories Generated\n\nSkill detects existing stories and **skips generation**:\n\n```\nâœ… Existing Storybook detected\nâœ… Found 23 existing story files\nâœ… Skipping story generation\nâœ… Adding Chromatic configuration only\n```\n\n---\n\n## Next Steps\n\n```bash\n# Install Chromatic\nnpm install --save-dev chromatic @chromatic-com/storybook\n\n# Run on existing stories\nnpm run chromatic\n```\n\nAll existing stories are captured as baseline automatically.\n\n---\n\n**Time saved**: 1-2 hours â†’ 3 minutes\n**Stories affected**: 0 (uses existing)\n**Breaking changes**: None\n",
        "skills/visual-regression/examples/simple-component-vr.md": "# Example: Visual Regression for Simple Component\n\nThis example shows how to set up visual regression testing for a single React component.\n\n---\n\n## Scenario\n\nYou have a `ProfileCard` component that you want to test for visual regressions.\n\n**Component**: `src/components/ProfileCard.tsx`\n\n```typescript\ninterface ProfileCardProps {\n  name: string;\n  avatar: string;\n  bio: string;\n  size?: 'sm' | 'md' | 'lg';\n  variant?: 'default' | 'compact';\n}\n\nexport function ProfileCard({ name, avatar, bio, size = 'md', variant = 'default' }: ProfileCardProps) {\n  // Component implementation\n}\n```\n\n---\n\n## Usage\n\n### Step 1: Invoke Skill\n\n```\n\"Set up visual regression for ProfileCard component\"\n```\n\n### Step 2: Skill Auto-Invokes\n\nNavigator detects the command and invokes `visual-regression` skill.\n\n### Step 3: Validation\n\nSkill executes `vr_setup_validator.py`:\n\n```json\n{\n  \"framework\": \"react\",\n  \"storybook\": {\n    \"installed\": true,\n    \"version\": \"7.6.0\"\n  },\n  \"vr_tool\": null,\n  \"ci_platform\": \"github\",\n  \"component\": {\n    \"valid\": true,\n    \"path\": \"src/components/ProfileCard.tsx\",\n    \"name\": \"ProfileCard\"\n  },\n  \"dependencies\": {\n    \"installed\": [\"@storybook/react\", \"@storybook/addon-essentials\"],\n    \"missing\": [\"chromatic\", \"@chromatic-com/storybook\"]\n  },\n  \"ready\": true\n}\n```\n\n### Step 4: Generate Story\n\nSkill executes `story_generator.py`:\n\n**Created**: `src/components/ProfileCard.stories.tsx`\n\n```typescript\nimport type { Meta, StoryObj } from '@storybook/react';\nimport { ProfileCard } from './ProfileCard';\n\nconst meta = {\n  title: 'Components/ProfileCard',\n  component: ProfileCard,\n  parameters: {\n    layout: 'centered',\n  },\n  tags: ['autodocs'],\n  argTypes: {\n    size: { control: 'select', options: ['sm', 'md', 'lg'] },\n    variant: { control: 'select', options: ['default', 'compact'] },\n  },\n} satisfies Meta<typeof ProfileCard>;\n\nexport default meta;\ntype Story = StoryObj<typeof meta>;\n\nexport const Default: Story = {\n  args: {\n    name: 'John Doe',\n    avatar: 'https://via.placeholder.com/150',\n    bio: 'Software Engineer',\n    size: 'md',\n    variant: 'default',\n  },\n};\n\nexport const Small: Story = {\n  args: {\n    ...Default.args,\n    size: 'sm',\n  },\n};\n\nexport const Large: Story = {\n  args: {\n    ...Default.args,\n    size: 'lg',\n  },\n};\n\nexport const Compact: Story = {\n  args: {\n    ...Default.args,\n    variant: 'compact',\n  },\n};\n\n// Accessibility tests\nDefault.parameters = {\n  a11y: {\n    config: {\n      rules: [\n        { id: 'color-contrast', enabled: true },\n        { id: 'label', enabled: true },\n      ],\n    },\n  },\n};\n```\n\n### Step 5: Generate Chromatic Config\n\nSkill executes `chromatic_config_generator.py`:\n\n**Created**: `chromatic.config.json`\n\n```json\n{\n  \"projectId\": \"<PROJECT_ID_PLACEHOLDER>\",\n  \"buildScriptName\": \"build-storybook\",\n  \"exitZeroOnChanges\": true,\n  \"exitOnceUploaded\": true,\n  \"onlyChanged\": true,\n  \"externals\": [\"public/**\"],\n  \"skip\": \"dependabot/**\",\n  \"ignoreLastBuildOnBranch\": \"main\"\n}\n```\n\n**Updated**: `.storybook/main.js`\n\n```diff\n  addons: [\n    '@storybook/addon-links',\n    '@storybook/addon-essentials',\n+   '@chromatic-com/storybook',\n    '@storybook/addon-interactions',\n  ],\n```\n\n**Updated**: `package.json`\n\n```diff\n  \"scripts\": {\n+   \"chromatic\": \"npx chromatic\",\n+   \"chromatic:ci\": \"npx chromatic --exit-zero-on-changes\",\n    \"build-storybook\": \"storybook build\"\n  }\n```\n\n### Step 6: Generate CI Workflow\n\nSkill executes `ci_workflow_generator.py`:\n\n**Created**: `.github/workflows/chromatic.yml`\n\n```yaml\nname: Visual Regression Tests\n\non:\n  push:\n    branches: ['main', 'develop']\n  pull_request:\n    branches: ['main']\n\njobs:\n  chromatic:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Run Chromatic\n        uses: chromaui/action@latest\n        with:\n          projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}\n          exitZeroOnChanges: true\n          onlyChanged: true\n          autoAcceptChanges: 'main'\n```\n\n### Step 7: Setup Instructions\n\nSkill outputs:\n\n```markdown\nâœ… Visual regression testing setup complete!\n\n## Files Created/Modified\n\nâœ… ProfileCard.stories.tsx (Storybook story with 4 variants)\nâœ… chromatic.config.json (Chromatic configuration)\nâœ… .storybook/main.js (Added @chromatic-com/storybook addon)\nâœ… package.json (Added chromatic scripts)\nâœ… .github/workflows/chromatic.yml (CI workflow)\n\n## Next Steps\n\n### 1. Install Dependencies\n\n```bash\nnpm install --save-dev chromatic @chromatic-com/storybook\n```\n\n### 2. Create Chromatic Project\n\n1. Go to https://www.chromatic.com/start\n2. Sign in with GitHub\n3. Create new project\n4. Copy project token\n\n### 3. Add Secret to GitHub\n\n1. Go to repository Settings â†’ Secrets and variables â†’ Actions\n2. Create secret: `CHROMATIC_PROJECT_TOKEN`\n3. Paste your project token\n\n### 4. Update chromatic.config.json\n\nReplace `<PROJECT_ID_PLACEHOLDER>` with your actual project ID.\n\n### 5. Create Baseline\n\n```bash\nnpm run chromatic\n```\n\n### 6. Test Visual Regression\n\n1. Make a visual change to ProfileCard\n2. Commit and push\n3. CI will run Chromatic automatically\n4. Review changes in Chromatic dashboard\n```\n\n---\n\n## Result\n\n**Time saved**: 2-3 hours â†’ 5 minutes (96% reduction)\n\n**Files created**: 4\n**Lines of code generated**: ~150\n**Token usage**: 3k tokens (vs 50k manual)\n\n---\n\n## Follow-up Tasks\n\nAfter setup, you can:\n\n1. **Add more variants**: Edit `ProfileCard.stories.tsx` to add edge cases\n2. **Customize Chromatic**: Adjust `chromatic.config.json` settings\n3. **Add interaction tests**: Use `@storybook/test` for click/focus states\n4. **Review visual diffs**: Monitor Chromatic dashboard for changes\n\n---\n\n**Skill used**: visual-regression\n**Time to complete**: ~5 minutes\n**Automated**: Story generation, config creation, CI setup\n",
        "src/utils/README.md": "# Logger Utility\n\nSimple TypeScript utility for formatted console logging with timestamps and severity levels.\n\n## Features\n\n- **Simple API**: Single `log()` function with message and optional level parameter\n- **ISO 8601 Timestamps**: Automatic UTC timestamp formatting (`2025-10-31T14:30:00.000Z`)\n- **Three Severity Levels**: `info` (default), `warn`, `error`\n- **Type-Safe**: Full TypeScript support with union types\n- **Console-Only**: No file persistence, optimized for development/debugging\n- **Zero Dependencies**: Uses native JavaScript `Date` and console methods\n\n## Installation\n\nThe logger is available in `src/utils/logger.ts`. Import it in your project:\n\n```typescript\nimport { log, LogLevel } from './utils/logger';\n```\n\n## API Reference\n\n### `log(message: string, level?: LogLevel): void`\n\nOutputs a formatted log message to the console with timestamp and severity level.\n\n**Parameters:**\n- `message` (string): The message to log\n- `level` (LogLevel, optional): The severity level. Defaults to `'info'`\n\n**Output Format:**\n```\n[timestamp] [LEVEL] message\n```\n\n**Example:**\n```typescript\nlog('Application started');\n// [2025-10-31T14:30:00.000Z] [INFO] Application started\n```\n\n### `LogLevel` Type\n\nType-safe union of supported log levels:\n\n```typescript\ntype LogLevel = 'info' | 'warn' | 'error';\n```\n\n**Behavior:**\n- `info`: Routes to `console.log()` (standard output)\n- `warn`: Routes to `console.warn()` (typically yellow in browsers/terminals)\n- `error`: Routes to `console.error()` (typically red in browsers/terminals)\n\n## Usage Examples\n\n### Basic Logging\n\n```typescript\nimport { log } from './utils/logger';\n\n// Default level (info)\nlog('Application started');\n// [2025-10-31T14:30:00.000Z] [INFO] Application started\n\n// Explicit info level\nlog('Configuration loaded', 'info');\n// [2025-10-31T14:30:01.000Z] [INFO] Configuration loaded\n```\n\n### Warning Messages\n\n```typescript\nlog('Deprecated API usage detected', 'warn');\n// [2025-10-31T14:30:02.000Z] [WARN] Deprecated API usage detected\n\nlog('Large dataset may impact performance', 'warn');\n// [2025-10-31T14:30:03.000Z] [WARN] Large dataset may impact performance\n```\n\n### Error Messages\n\n```typescript\nlog('Database connection failed', 'error');\n// [2025-10-31T14:30:04.000Z] [ERROR] Database connection failed\n\nlog('Invalid API response format', 'error');\n// [2025-10-31T14:30:05.000Z] [ERROR] Invalid API response format\n```\n\n### Integration in Application Code\n\n```typescript\nimport { log } from './utils/logger';\n\nfunction processData(data: string[]): void {\n  log(`Processing ${data.length} items`);\n\n  try {\n    // Processing logic...\n    data.forEach(item => {\n      // ... process item\n    });\n    log('Data processed successfully');\n  } catch (error) {\n    log(`Processing failed: ${error.message}`, 'error');\n  }\n}\n```\n\n### Conditional Logging\n\n```typescript\nimport { log, LogLevel } from './utils/logger';\n\nfunction debugLog(message: string, condition: boolean): void {\n  if (condition) {\n    log(message, 'warn');\n  }\n}\n\n// Usage\nconst isDevelopment = process.env.NODE_ENV === 'development';\ndebugLog('Debug mode enabled', isDevelopment);\n```\n\n### Error Handling Pattern\n\n```typescript\nimport { log } from './utils/logger';\n\nasync function fetchData(url: string): Promise<any> {\n  log(`Fetching data from ${url}`);\n\n  try {\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      log(`HTTP error: ${response.status} ${response.statusText}`, 'error');\n      throw new Error(`HTTP ${response.status}`);\n    }\n\n    const data = await response.json();\n    log('Data fetched successfully');\n    return data;\n\n  } catch (error) {\n    log(`Fetch failed: ${error.message}`, 'error');\n    throw error;\n  }\n}\n```\n\n## Output Format Details\n\n### Timestamp Format\n\n- **Standard**: ISO 8601 UTC format\n- **Example**: `2025-10-31T14:30:00.000Z`\n- **Components**: `YYYY-MM-DDTHH:mm:ss.sssZ`\n- **Timezone**: Always UTC (indicated by `Z`)\n\n### Log Level Format\n\n- **Uppercase**: All levels are uppercase in output (`INFO`, `WARN`, `ERROR`)\n- **Fixed Width**: Aligned for readability in console\n\n### Complete Format\n\n```\n[2025-10-31T14:30:00.000Z] [INFO] Application started\n[2025-10-31T14:30:01.000Z] [WARN] Deprecated API usage\n[2025-10-31T14:30:02.000Z] [ERROR] Database connection failed\n```\n\n## Console Method Routing\n\nThe logger routes messages to appropriate console methods based on severity:\n\n| Level   | Console Method  | Typical Display       |\n|---------|----------------|----------------------|\n| `info`  | `console.log`  | Default (white/black)|\n| `warn`  | `console.warn` | Yellow/orange        |\n| `error` | `console.error`| Red                  |\n\n**Benefits:**\n- Native browser/Node.js styling\n- Proper log level filtering in browser dev tools\n- Better debugging experience\n- Stacktrace included for errors (browser/Node.js default behavior)\n\n## Type Safety\n\nTypeScript prevents invalid log levels at compile time:\n\n```typescript\nlog('Valid message', 'info');   // âœ… Valid\nlog('Valid message', 'warn');   // âœ… Valid\nlog('Valid message', 'error');  // âœ… Valid\nlog('Invalid message', 'debug'); // âŒ Type error: 'debug' not assignable to LogLevel\n```\n\nIDE autocomplete suggests valid options:\n\n```typescript\nlog('Message', /* autocomplete shows: 'info' | 'warn' | 'error' */);\n```\n\n## Testing\n\nThe logger includes comprehensive unit tests covering:\n\n1. Default behavior (info level)\n2. Explicit info level\n3. Warn level\n4. Error level\n5. Timestamp format validation (ISO 8601)\n6. Message formatting\n\n**Run tests:**\n```bash\nnpm test src/utils/__tests__/logger.test.ts\n```\n\n**Coverage:**\n- 100% function coverage\n- 100% line coverage\n- 100% branch coverage\n\n## Technical Decisions\n\n### Why ISO 8601 Timestamps?\n\n- **Standard format**: Universal, sortable\n- **Timezone-aware**: UTC prevents confusion\n- **No dependencies**: Native `Date.toISOString()`\n- **Parseable**: Can be parsed back to Date object\n\n### Why Union Type for LogLevel?\n\n- **Type safety**: Compile-time validation\n- **IDE support**: Autocomplete and inline documentation\n- **Prevents typos**: Invalid levels caught early\n- **Simple and clear**: Easy to understand and extend\n\n### Why Separate Console Methods?\n\n- **Native styling**: Browsers/terminals color-code automatically\n- **Better filtering**: Dev tools can filter by console method\n- **Improved debugging**: Errors include stacktraces\n- **Standard practice**: Follows console API conventions\n\n### Why No Advanced Features?\n\n- **KISS principle**: Keep implementation simple\n- **Task requirements**: Specified \"simple console logger\"\n- **Extensibility**: Advanced features can be added later\n- **Zero dependencies**: No external libraries required\n\n## Non-Goals\n\nThe logger intentionally does **not** include:\n\n- âŒ File logging (console only)\n- âŒ Log rotation\n- âŒ Remote logging (e.g., Sentry, LogRocket)\n- âŒ Custom formatters\n- âŒ Additional log levels (e.g., debug, trace, fatal)\n- âŒ Performance optimization (buffering, async)\n- âŒ Browser-specific compatibility\n\nIf your project requires these features, consider using a dedicated logging library like Winston, Pino, or Bunyan.\n\n## Performance Considerations\n\n**Minimal Overhead:**\n- Single `Date.toISOString()` call per log\n- String template interpolation\n- No external dependencies\n- No async operations\n\n**Synchronous Behavior:**\n- Logs are output immediately\n- No buffering or queuing\n- Console methods are synchronous in Node.js\n\n**Production Use:**\n- Consider disabling verbose logging in production\n- Use environment variables to control log levels\n- Implement conditional logging wrapper if needed\n\n## Migration Guide\n\n### From console.log()\n\n**Before:**\n```typescript\nconsole.log('Application started');\nconsole.log('Warning:', warning);\nconsole.error('Error:', error);\n```\n\n**After:**\n```typescript\nimport { log } from './utils/logger';\n\nlog('Application started');\nlog(`Warning: ${warning}`, 'warn');\nlog(`Error: ${error}`, 'error');\n```\n\n### From Custom Logger\n\n**Before:**\n```typescript\nlogger.info('Message');\nlogger.warn('Warning');\nlogger.error('Error');\n```\n\n**After:**\n```typescript\nimport { log } from './utils/logger';\n\nlog('Message');\nlog('Warning', 'warn');\nlog('Error', 'error');\n```\n\n## Best Practices\n\n### 1. Use Appropriate Levels\n\n```typescript\n// âœ… Good\nlog('User logged in');                      // info\nlog('API rate limit approaching', 'warn');  // warn\nlog('Database connection failed', 'error'); // error\n\n// âŒ Avoid\nlog('Critical error occurred');             // Should be 'error' level\nlog('Invalid configuration', 'info');       // Should be 'error' or 'warn'\n```\n\n### 2. Include Context in Messages\n\n```typescript\n// âœ… Good\nlog(`User ${userId} completed checkout`);\nlog(`Failed to load resource: ${resourceId}`, 'error');\n\n// âŒ Avoid\nlog('User completed checkout');             // Missing user ID\nlog('Failed to load resource', 'error');   // Missing resource details\n```\n\n### 3. Avoid Logging Sensitive Data\n\n```typescript\n// âœ… Good\nlog(`Authentication attempt for user ${userId}`);\n\n// âŒ Avoid\nlog(`Authentication attempt with password ${password}`); // Exposes password\nlog(`API key: ${apiKey}`);                              // Exposes credentials\n```\n\n### 4. Log Important State Transitions\n\n```typescript\nfunction processOrder(orderId: string): void {\n  log(`Starting order processing: ${orderId}`);\n\n  // ... processing logic\n\n  log(`Order ${orderId} completed successfully`);\n}\n```\n\n## Future Extensibility\n\nThe logger is designed for easy extension:\n\n### Adding Log Levels\n\n```typescript\n// Extend LogLevel type\nexport type LogLevel = 'info' | 'warn' | 'error' | 'debug' | 'trace';\n\n// Update switch statement in log() function\nswitch (level) {\n  case 'error':\n    console.error(formattedMessage);\n    break;\n  case 'warn':\n    console.warn(formattedMessage);\n    break;\n  case 'debug':\n    console.debug(formattedMessage);\n    break;\n  case 'trace':\n    console.trace(formattedMessage);\n    break;\n  case 'info':\n  default:\n    console.log(formattedMessage);\n    break;\n}\n```\n\n### Adding Configuration Options\n\n```typescript\n// Use LogOptions interface (currently reserved)\nexport interface LogOptions {\n  level?: LogLevel;\n  includeTimestamp?: boolean;\n  timestampFormat?: 'iso' | 'local';\n}\n\nexport function log(message: string, options: LogOptions = {}): void {\n  // Implementation with options...\n}\n```\n\n## License\n\nPart of the Navigator project. See project LICENSE for details.\n\n## Version\n\n**Current Version**: 1.0.0\n**Created**: 2025-10-31\n**Last Updated**: 2025-10-31\n\n## Related Documentation\n\n- Implementation Plan: `.agent/tasks/TASK-22-simple-console-logger.md`\n- Test Suite: `src/utils/__tests__/logger.test.ts`\n- Source Code: `src/utils/logger.ts`\n"
      },
      "plugins": [
        {
          "name": "navigator",
          "source": "./",
          "description": null,
          "categories": [],
          "install_commands": [
            "/plugin marketplace add alekspetrov/navigator",
            "/plugin install navigator@navigator-marketplace"
          ]
        }
      ]
    }
  ]
}