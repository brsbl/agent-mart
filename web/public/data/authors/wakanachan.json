{
  "author": {
    "id": "wakanachan",
    "display_name": "wakanachan",
    "avatar_url": "https://avatars.githubusercontent.com/u/59733854?v=4"
  },
  "marketplaces": [
    {
      "name": "pnl-dev-marketplace",
      "version": null,
      "description": "preferred-natural-language dev marketplace",
      "repo_full_name": "wakanachan/preferred-natural-language",
      "repo_url": "https://github.com/wakanachan/preferred-natural-language",
      "repo_description": "A natural language preference detection tool for AI assistants through MCP (Model Context Protocol)",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2025-12-11T18:57:35Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"pnl-dev-marketplace\",\n  \"owner\": {\n    \"name\": \"Preferred Natural Language\",\n    \"url\": \"https://github.com/wakanachan/preferred-natural-language\"\n  },\n  \"description\": \"preferred-natural-language dev marketplace\",\n  \"plugins\": [\n    {\n      \"name\": \"pnl\",\n      \"source\": \"./claude-code-plugin\",\n      \"description\": \"Automatic language detection plugin for Claude Code. Detects user's preferred language using a 5-level priority chain and provides MCP tools for language management. Supports 70+ languages and regional variants with full i18n output in 10 major languages.\",\n      \"version\": \"3.0.0\",\n      \"author\": {\n        \"name\": \"Preferred Natural Language\",\n        \"url\": \"https://github.com/wakanachan/preferred-natural-language\"\n      },\n      \"keywords\": [\"language\", \"i18n\", \"locale\", \"detection\", \"natural-language\", \"mcp\", \"multilingual\"],\n      \"category\": \"utilities\"\n    }\n  ]\n}\n",
        "README.md": "# Preferred Natural Language\n\n[![npm version](https://badge.fury.io/js/%40preferred-natural-language%2Fcli.svg)](https://badge.fury.io/js/%40preferred-natural-language%2Fcli)\n[![TypeScript](https://img.shields.io/badge/TypeScript-blue.svg)](https://www.typescriptlang.org/)\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n[![Test Coverage](https://img.shields.io/badge/coverage-100%25-brightgreen.svg)](https://github.com/wakanachan/preferred-natural-language)\n\nA cross-platform natural language preference detection tool for AI assistants through MCP (Model Context Protocol).\n\n## ğŸŒ Languages\n\n- ğŸ‡ºğŸ‡¸ **English** â† Current\n- ğŸ‡¨ğŸ‡³ **[ç®€ä½“ä¸­æ–‡](README.zh.md)**\n\n## âœ¨ Key Features\n\n- ğŸ¤– **Automatic Language Detection**: AI automatically communicates in your preferred language\n- ğŸ”Œ **MCP Integration**: Seamless integration with Claude Code and Gemini CLI\n- ğŸ¯ **Priority Chain Detection**: 5-level detection priority system\n- ğŸŒ **70+ Languages**: Comprehensive language and regional variant support\n- ğŸ”§ **Multiple Detection Methods**: Config files, environment variables, OS locale\n- ğŸ“ **Full i18n**: CLI output in 10 languages (en, zh, ja, ko, ru, pt, es, fr, de)\n- ğŸ§ª **100% Tested**: 100+ test cases, high coverage\n\n## ğŸš€ Quick Start\n\n### Installation\n\n```bash\n# Install globally (recommended)\nnpm install -g @preferred-natural-language/cli\n\n# Or use with npx (no installation)\nnpx @preferred-natural-language/cli detect\n```\n\n### CLI Usage\n\n```bash\n# Detect current language preference\npnl detect\n\n# Set language preference\npnl set zh-CN\n\n# Show detailed information\npnl show\n\n# List all supported languages\npnl list\n\n# Start MCP server (for programmatic use)\npnl mcp\n```\n\n### MCP Integration\n\n#### For Claude Code\n\n1. **Install the plugin**:\n\n   **From Marketplaces**:\n   ```bash\n   /plugin marketplace add wakanachan/preferred-natural-language\n   /plugin install pnl@pnl-dev-marketplace\n   ```\n\n   **For Local Development**:\n   ```bash\n   # Clone the repository\n   git clone https://github.com/wakanachan/preferred-natural-language\n   cd preferred-natural-language\n\n   # Install as local marketplace\n   /plugin marketplace add ./\n   /plugin install preferred-natural-language@pnl-dev-marketplace\n   ```\n\n2. **Restart Claude Code** to load the plugin (required after installation)\n\n3. **Automatic Language Detection**:\n   - Claude Code automatically detects and uses your preferred language\n   - Access language preference via MCP Resource: `language://preference`\n   - Use MCP tools: `detect-language`, `set-language`, `list-languages`\n\n4. **Available Slash Commands**:\n   ```\n   /pnl:detect-language   # Detect current language preference\n   /pnl:set-language      # Set language preference (e.g., zh-CN, ja-JP)\n   /pnl:list-languages    # List all 70+ supported languages\n   ```\n\n#### For Gemini CLI\n\n1. **Install the extension**:\n\n   **From Github**:\n   ```bash\n   gemini extensions install https://github.com/wakanachan/preferred-natural-language\n   ```\n\n   **For Local Development**:\n   ```bash\n   # Clone the repository\n   git clone https://github.com/wakanachan/preferred-natural-language\n   cd preferred-natural-language\n\n   # Install from local path (root directory contains gemini-extension.json)\n   gemini extensions install .\n\n   # Or use link command\n   gemini extensions link .\n   ```\n\n2. **Restart Gemini CLI** to load the extension (changes only apply on restart)\n\n3. **Update Extension** (when updates are available):\n   ```bash\n   # Update specific extension\n   gemini extensions update preferred-natural-language\n\n   # Or update all extensions at once\n   gemini extensions update --all\n   ```\n\n4. **Automatic Language Detection**:\n   - Gemini automatically detects your preferred language at session start\n   - The extension provides context through `GEMINI.md`\n   - MCP server provides language tools and resources\n\n5. **Available Slash Commands**:\n   ```\n   /detect-language   # Detect current language preference\n   /set-language      # Set language preference (e.g., zh-CN, ja-JP)\n   /list-languages    # List all 70+ supported languages\n   ```\n\n#### General MCP Server Configuration\n\nFor users who prefer not to install plugins, you can configure the MCP server manually in any MCP-compatible client.\n\n**Using npx**\n\nAdd this configuration to your MCP client settings:\n\n```json\n{\n  \"mcpServers\": {\n    \"pnl-mcp\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"@preferred-natural-language/cli\",\n        \"mcp\"\n      ],\n      \"env\": {}\n    }\n  }\n}\n```\n\nFor Windows\n\n```json\n{\n  \"mcpServers\": {\n    \"pnl-mcp\": {\n      \"command\": \"cmd\",\n      \"args\": [\n        \"/c\",\n        \"npx\",\n        \"@preferred-natural-language/cli\",\n        \"mcp\"\n      ],\n      \"env\": {}\n    }\n  }\n}\n```\n\n**Using Global Installation**\n\nIf you have installed the package globally:\n\n```bash\nnpm install -g @preferred-natural-language/cli\n```\n\nThen configure your MCP client with:\n\n```json\n{\n  \"mcpServers\": {\n    \"pnl-mcp\": {\n      \"command\": \"pnl\",\n      \"args\": [\"mcp\"],\n      \"env\": {}\n    }\n  }\n}\n```\n\n**Standalone Usage**\n\nYou can also run the MCP server directly for testing:\n\n```bash\n# Using npx (no installation required)\nnpx @preferred-natural-language/cli mcp\n\n# Or if installed globally\npnl mcp\n```\n\nThe server provides the same MCP capabilities via stdio communication:\n- **Resource**: `language://preference` - Auto-loaded language preference\n- **Prompt**: `use-preferred-language` - AI language instruction\n- **Tools**: `detect-language`, `set-language`, `list-languages`\n\n## ğŸŒ Supported Languages (70+)\n\nWe support **70+ languages and regional variants**, with **full i18n output** for 10 major languages:\n\n### CLI Output Languages (Full i18n)\n\n| Language | Code | Native Name |\n|----------|------|-------------|\n| English | `en`, `en-US`, `en-GB` | English |\n| Chinese (Simplified) | `zh-CN` | ç®€ä½“ä¸­æ–‡ |\n| Japanese | `ja-JP` | æ—¥æœ¬èª |\n| Korean | `ko-KR` | í•œêµ­ì–´ |\n| Russian | `ru-RU` | Ğ ÑƒÑÑĞºĞ¸Ğ¹ |\n| Portuguese | `pt-BR`, `pt-PT` | PortuguÃªs |\n| Spanish | `es-ES` | EspaÃ±ol |\n| French | `fr-FR` | FranÃ§ais |\n| German | `de-DE` | Deutsch |\n\n### All Supported Languages\n\nView the [complete list of 70+ supported languages â†’](./docs/LANGUAGES.md)\n\n## ğŸ” Detection Priority Chain\n\nThe tool detects language preferences using a strict 5-level priority:\n\n1. **ğŸ¥‡ Configuration File** (`.preferred-language.json`) - Highest priority\n2. **ğŸ¥ˆ Custom Environment Variables**\n   - `CLAUDE_CODE_NATURAL_LANGUAGE`\n   - `GEMINI_CLI_NATURAL_LANGUAGE`\n3. **ğŸ¥‰ OS Locale Settings** (via `os-locale` package)\n4. **ğŸ… Standard Environment Variables**\n   - Priority: `LANGUAGE` > `LC_ALL` > `LC_MESSAGES` > `LANG`\n5. **ğŸŒ HTTP Accept-Language Header** (for web environments)\n6. **ğŸ Fallback** (`en-US`) - Lowest priority\n\n## ğŸ“ Configuration\n\n### Configuration File (Highest Priority)\n\nCreate `.preferred-language.json` in your project root:\n\n```json\n{\n  \"language\": \"zh-CN\",\n  \"fallback\": \"en-US\"\n}\n```\n\n### Environment Variables\n\n```bash\n# Platform-specific (priority 2)\nexport CLAUDE_CODE_NATURAL_LANGUAGE=\"zh-CN\"\nexport GEMINI_CLI_NATURAL_LANGUAGE=\"ja-JP\"\n# othersï¼ˆcoming soonï¼‰\n\n# Standard Unix variables (priority 4)\nexport LANGUAGE=\"zh_CN:en_US\"\nexport LC_ALL=\"zh_CN.UTF-8\"\nexport LANG=\"zh_CN.UTF-8\"\n```\n\n### Using CLI\n\n```bash\n# Create config file interactively\npnl set zh-CN\n\n# This creates .preferred-language.json with:\n# { \"language\": \"zh-CN\", \"fallback\": \"en-US\" }\n```\n\n## ğŸ—ï¸ Architecture\n\n### Project Structure\n\n```\npreferred-natural-language/\nâ”œâ”€â”€ src/                          # Source code\nâ”‚   â”œâ”€â”€ languageDetector.ts       # Core 5-level priority detection\nâ”‚   â”œâ”€â”€ types.ts                  # Type definitions\nâ”‚   â”œâ”€â”€ languageNames.ts          # 70+ language mappings\nâ”‚   â”œâ”€â”€ config.ts                 # Configuration paths\nâ”‚   â”œâ”€â”€ index.ts                  # Unified exports\nâ”‚   â”œâ”€â”€ cli/                      # CLI commands (Commander.js)\nâ”‚   â”‚   â”œâ”€â”€ commands/             # detect, set, show, list, mcp\nâ”‚   â”‚   â”œâ”€â”€ utils/                # Display utilities\nâ”‚   â”‚   â””â”€â”€ index.ts              # CLI entry point\nâ”‚   â”œâ”€â”€ i18n/                     # Internationalization\nâ”‚   â”‚   â”œâ”€â”€ index.ts              # I18n class\nâ”‚   â”‚   â””â”€â”€ locales/              # 10 language files\nâ”‚   â””â”€â”€ mcp/                      # MCP server\nâ”‚       â””â”€â”€ server.ts             # Resource + Prompt + Tools\nâ”œâ”€â”€ bin/\nâ”‚   â””â”€â”€ pnl.js                    # CLI entry point\nâ”œâ”€â”€ __tests__/                    # Test suites\nâ”‚   â”œâ”€â”€ unit/                     # Unit tests\nâ”‚   â”œâ”€â”€ integration/              # Integration tests\nâ”‚   â””â”€â”€ e2e/                      # End-to-end tests\nâ”œâ”€â”€ .claude-plugin/               # Claude Code marketplace config\nâ”‚   â””â”€â”€ marketplace.json          # Points to ./claude-code-plugin\nâ”œâ”€â”€ claude-code-plugin/           # Claude Code plugin\nâ”‚   â”œâ”€â”€ .claude-plugin/plugin.json\nâ”‚   â”œâ”€â”€ .mcp.json                 # MCP server config\nâ”‚   â”œâ”€â”€ agents/                   # Agent definitions\nâ”‚   â”œâ”€â”€ commands/                 # Slash commands\nâ”‚   â””â”€â”€ scripts/start-mcp.js      # Smart MCP launcher\nâ”œâ”€â”€ gemini-extension.json         # Gemini CLI extension manifest\nâ”œâ”€â”€ GEMINI.md                     # Gemini context file\nâ”œâ”€â”€ commands/                     # Gemini slash commands (.toml)\nâ””â”€â”€ scripts/start-mcp.js          # Shared MCP launcher\n```\n\n### Design Philosophy\n\n- **Single Package**: All code in `@preferred-natural-language/cli`\n- **Lightweight Plugins**: Claude/Gemini integrations are configuration layers\n- **Smart Launchers**: Plugins use `pnl mcp` subcommand via smart launchers\n- **No Code Duplication**: Plugin layers delegate to CLI package\n\n## ğŸ§ª Testing\n\n### Run Tests\n\n```bash\n# All tests (unit + integration + e2e)\nnpm test\n\n# Specific test suites\nnpm run test:unit           # Fast unit tests\nnpm run test:integration    # Integration tests\nnpm run test:e2e            # End-to-end tests\n\n# Development\nnpm run test:watch          # Watch mode\nnpm run test:coverage       # With coverage report\nnpm run test:ci             # CI mode (no watch)\n```\n\n## ğŸ› ï¸ Development\n\n### Setup\n\n```bash\n# Clone repository\ngit clone https://github.com/wakanachan/preferred-natural-language.git\ncd preferred-natural-language\n\n# Install dependencies\nnpm install\n\n# Build\nnpm run build\n\n# Run tests\nnpm test\n```\n\n### Available Scripts\n\n```bash\n# Building\nnpm run build              # Build project\n\n# Testing\nnpm run test:unit          # Unit tests\nnpm run test:integration   # Integration tests\nnpm run test:e2e           # E2E tests\nnpm run test:coverage      # With coverage\nnpm run test:pr            # PR validation (unit + integration)\n```\n\n## ğŸ“– API Reference\n\n### MCP Server API\n\nThe MCP server provides:\n\n**Resource** (auto-loaded):\n- `language://preference` - User's language preference (JSON)\n\n**Prompt**:\n- `use-preferred-language` - Generates language instruction for AI\n\n**Tools**:\n- `detect-language` - Detect current language\n- `set-language(language, fallback?)` - Set language preference\n- `list-languages()` - List all 70+ supported languages\n\n### Type Definitions\n\n```typescript\ninterface LanguageDetectionResult {\n  language: string;           // BCP-47 code (e.g., 'zh-CN')\n  source: DetectionSource;    // Detection source\n  confidence: 'high' | 'medium' | 'low';\n}\n\ntype DetectionSource =\n  | `config-file:${string}`  // Config file path\n  | 'GEMINI_CLI_NATURAL_LANGUAGE'\n  | 'CLAUDE_CODE_NATURAL_LANGUAGE'\n  | 'os-locale'\n  | 'LANGUAGE' | 'LC_ALL' | 'LC_MESSAGES' | 'LANG'\n  | 'HTTP_ACCEPT_LANGUAGE'\n  | 'fallback';\n```\n\n## ğŸ¤ Contributing\n\nWe welcome contributions! Please see our [Contributing Guide](./CONTRIBUTING.md) for details.\n\n### Development Workflow\n\n1. Fork the repository\n2. Create a feature branch (`git checkout -b feature/amazing-feature`)\n3. Commit your changes (Chinese commit messages preferred)\n4. Push to the branch (`git push origin feature/amazing-feature`)\n5. Open a Pull Request\n\n### Commit Message Format\n\n```bash\ngit commit -m \"feat: æ·»åŠ æ–°åŠŸèƒ½æè¿°\n\n- è¯¦ç»†è¯´æ˜ 1\n- è¯¦ç»†è¯´æ˜ 2\n\nğŸ¤– Generated with Claude Code\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\"\n```\n\n## ğŸ“„ License\n\nThis project is licensed under the MIT License - see the [LICENSE](./LICENSE) file for details.\n\n## ğŸ™ Acknowledgments\n\n- [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) - For AI integration standards\n- [Anthropic](https://www.anthropic.com/) - For Claude Code platform\n- [Google](https://geminicli.com/) - For Gemini CLI platform\n- [os-locale](https://github.com/sindresorhus/os-locale) - For cross-platform locale detection\n- [Commander.js](https://github.com/tj/commander.js) - For CLI framework\n- [TypeScript](https://www.typescriptlang.org/) - For type safety\n\n## ğŸ“ Support\n\n- ğŸ› [Report a Bug](https://github.com/wakanachan/preferred-natural-language/issues)\n- ğŸ’¡ [Request a Feature](https://github.com/wakanachan/preferred-natural-language/issues)\n- ğŸ’¬ [Discussions](https://github.com/wakanachan/preferred-natural-language/discussions)\n\n---\n\n<div align=\"center\">\n  <p>Made with â¤ï¸ for the AI community</p>\n  <p>Supporting <strong>Claude Code</strong> and <strong>Gemini CLI</strong></p>\n</div>\n"
      },
      "plugins": [
        {
          "name": "pnl",
          "source": "./claude-code-plugin",
          "description": "Automatic language detection plugin for Claude Code. Detects user's preferred language using a 5-level priority chain and provides MCP tools for language management. Supports 70+ languages and regional variants with full i18n output in 10 major languages.",
          "version": "3.0.0",
          "author": {
            "name": "Preferred Natural Language",
            "url": "https://github.com/wakanachan/preferred-natural-language"
          },
          "keywords": [
            "language",
            "i18n",
            "locale",
            "detection",
            "natural-language",
            "mcp",
            "multilingual"
          ],
          "category": "utilities",
          "categories": [
            "detection",
            "i18n",
            "language",
            "locale",
            "mcp",
            "multilingual",
            "natural-language",
            "utilities"
          ],
          "install_commands": [
            "/plugin marketplace add wakanachan/preferred-natural-language",
            "/plugin install pnl@pnl-dev-marketplace"
          ]
        }
      ]
    }
  ]
}