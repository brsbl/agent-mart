{
  "author": {
    "id": "acedergren",
    "display_name": "Alexander Cedergren",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/66034488?u=d577acd3cc7d1900a64a691c70352fa6e13f944a&v=4",
    "url": "https://github.com/acedergren",
    "bio": "Personal projects. Building at the intersection of AI and Web Dev. ü§ñ Creator of agentic tools for Coading Agents & Fastify/Svelte ecosystems. ",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 13,
      "total_stars": 2,
      "total_forks": 1
    }
  },
  "marketplaces": [
    {
      "name": "oci-agent-skills",
      "version": null,
      "description": "Oracle Cloud Infrastructure agent skills for AI coding agents",
      "owner_info": {
        "name": "Alexander Cedergren",
        "email": "alex@solutionsedge.io"
      },
      "keywords": [],
      "repo_full_name": "acedergren/oci-agent-skills",
      "repo_url": "https://github.com/acedergren/oci-agent-skills",
      "repo_description": "Oracle Cloud Infrastructure operations plugin with intelligent agent skills for managing compute, networking, databases, monitoring, secrets, GenAI, IAM, and infrastructure as code",
      "homepage": null,
      "signals": {
        "stars": 2,
        "forks": 1,
        "pushed_at": "2026-01-29T06:25:29Z",
        "created_at": "2026-01-26T19:10:32Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 1042
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 30100
        },
        {
          "path": "agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "agents/oci-cloud-architect.md",
          "type": "blob",
          "size": 11924
        },
        {
          "path": "docs",
          "type": "tree",
          "size": null
        },
        {
          "path": "docs/ateam",
          "type": "tree",
          "size": null
        },
        {
          "path": "docs/ateam/README.md",
          "type": "blob",
          "size": 3159
        },
        {
          "path": "docs/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "docs/references/README.md",
          "type": "blob",
          "size": 5830
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/best-practices",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/best-practices/SKILL.md",
          "type": "blob",
          "size": 15606
        },
        {
          "path": "skills/best-practices/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/best-practices/references/oci-well-architected-checklist.md",
          "type": "blob",
          "size": 5919
        },
        {
          "path": "skills/compute-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/compute-management/SKILL.md",
          "type": "blob",
          "size": 8405
        },
        {
          "path": "skills/compute-management/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/compute-management/references/oci-compute-shapes-reference.md",
          "type": "blob",
          "size": 50730
        },
        {
          "path": "skills/database-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/database-management/SKILL.md",
          "type": "blob",
          "size": 13480
        },
        {
          "path": "skills/database-management/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/database-management/references/oci-dbcs-cli.md",
          "type": "blob",
          "size": 6589
        },
        {
          "path": "skills/finops-cost-optimization",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/finops-cost-optimization/SKILL.md",
          "type": "blob",
          "size": 15660
        },
        {
          "path": "skills/finops-cost-optimization/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/finops-cost-optimization/references/oci-cost-cli.md",
          "type": "blob",
          "size": 7007
        },
        {
          "path": "skills/genai-services",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/genai-services/SKILL.md",
          "type": "blob",
          "size": 13674
        },
        {
          "path": "skills/iam-identity-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/iam-identity-management/SKILL.md",
          "type": "blob",
          "size": 10914
        },
        {
          "path": "skills/infrastructure-as-code",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/infrastructure-as-code/SKILL.md",
          "type": "blob",
          "size": 12259
        },
        {
          "path": "skills/infrastructure-as-code/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/infrastructure-as-code/references/oci-terraform-patterns.md",
          "type": "blob",
          "size": 9374
        },
        {
          "path": "skills/landing-zones",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/landing-zones/SKILL.md",
          "type": "blob",
          "size": 15959
        },
        {
          "path": "skills/landing-zones/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/landing-zones/references/landing-zone-cli.md",
          "type": "blob",
          "size": 21342
        },
        {
          "path": "skills/landing-zones/references/landing-zone-patterns.md",
          "type": "blob",
          "size": 7378
        },
        {
          "path": "skills/monitoring-operations",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/monitoring-operations/SKILL.md",
          "type": "blob",
          "size": 6270
        },
        {
          "path": "skills/networking-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/networking-management/SKILL.md",
          "type": "blob",
          "size": 13599
        },
        {
          "path": "skills/oci-events",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/oci-events/SKILL.md",
          "type": "blob",
          "size": 11420
        },
        {
          "path": "skills/oci-events/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/oci-events/references/events-cli.md",
          "type": "blob",
          "size": 17547
        },
        {
          "path": "skills/oci-events/references/events-patterns.md",
          "type": "blob",
          "size": 7236
        },
        {
          "path": "skills/oracle-dba",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/oracle-dba/SKILL.md",
          "type": "blob",
          "size": 16133
        },
        {
          "path": "skills/oracle-dba/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/oracle-dba/references/oci-cli-adb.md",
          "type": "blob",
          "size": 16915
        },
        {
          "path": "skills/oracle-dba/references/sqlcl-workflows.md",
          "type": "blob",
          "size": 4988
        },
        {
          "path": "skills/secrets-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/secrets-management/SKILL.md",
          "type": "blob",
          "size": 11121
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"oci-agent-skills\",\n  \"owner\": {\n    \"name\": \"Alexander Cedergren\",\n    \"email\": \"alex@solutionsedge.io\"\n  },\n  \"metadata\": {\n    \"description\": \"Oracle Cloud Infrastructure agent skills for AI coding agents\",\n    \"version\": \"2.2.4\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"oci-skills\",\n      \"description\": \"Complete OCI automation skills covering compute, networking, databases, monitoring, secrets, GenAI, IAM, IaC, FinOps, and best practices\",\n      \"source\": \"./\",\n      \"strict\": false,\n      \"skills\": [\n        \"./skills/compute-management\",\n        \"./skills/networking-management\",\n        \"./skills/database-management\",\n        \"./skills/oracle-dba\",\n        \"./skills/monitoring-operations\",\n        \"./skills/secrets-management\",\n        \"./skills/genai-services\",\n        \"./skills/iam-identity-management\",\n        \"./skills/infrastructure-as-code\",\n        \"./skills/finops-cost-optimization\",\n        \"./skills/best-practices\",\n        \"./skills/landing-zones\",\n        \"./skills/oci-events\"\n      ]\n    }\n  ]\n}\n",
        "README.md": "<div align=\"center\">\n\n```\n ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó\n‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë\n‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë\n‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë\n‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë\n ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù\n ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó\n‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù\n‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó\n‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë       ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë     ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë\n‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë\n‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïù       ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n```\n\n**Expert Oracle Cloud Infrastructure automation for AI coding agents**\n\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n[![Agent Skills](https://img.shields.io/badge/Agent%20Skills-Compatible-blueviolet)](https://skills.sh)\n[![Skills.sh](https://img.shields.io/badge/Skills.sh-Install-C74634)](https://skills.sh/acedergren/oci-agent-skills)\n[![Skills Count](https://img.shields.io/badge/Skills-13%2B1%20Agent-brightgreen)](#skills-reference)\n[![Community Project](https://img.shields.io/badge/Community-Maintained-success)](https://github.com/acedergren/oci-agent-skills)\n\n</div>\n\n> **‚ö†Ô∏è Community Project Notice**: OCI Agent Skills is a **community-maintained** project created and maintained by Alexander Cedergren. This is **not an official Oracle product**. It provides helpful utilities, examples, and best practices for working with Oracle Cloud Infrastructure, but is not endorsed by or affiliated with Oracle Corporation.\n\nComprehensive Oracle Cloud Infrastructure (OCI) agent skills for AI coding agents - intelligent automation for managing cloud resources across compute, networking, databases, monitoring, and more.\n\n## ‚ö° Quick Start\n\n```bash\nnpx skills add acedergren/oci-agent-skills\n```\n\nThat's it! The OCI skills are now available in any coding agent that supports the [Agent Skills](https://skills.sh) standard.\n\n### First Steps\n\nTry these prompts:\n\n1. **Compute**: \"Help me launch an OCI compute instance for a web server\"\n2. **Networking**: \"I need to create a VCN with public and private subnets\"\n3. **Database**: \"Create an Autonomous Database for my application\"\n4. **FinOps**: \"Show me my top spending services and optimization opportunities\"\n\n## Overview\n\nThis community-maintained plugin provides expert-level guidance and complete CLI command references for OCI services, compensating for Claude's limited training on Oracle Cloud Infrastructure. Created and maintained by Alexander Cedergren, it includes **13 detailed skills** plus an **OCI Cloud Architect orchestrator agent** for intelligent multi-service automation. Skills cover compute, networking, databases, Oracle DBA operations, monitoring, secrets management, GenAI services, IAM/identity management, infrastructure as code, FinOps/cost optimization, Landing Zones architecture, OCI Events automation, and best practices from Oracle's official documentation and technical guides.\n\n**This is a community project and is not an official Oracle product or endorsement.**\n\n## Features\n\n### üéØ Comprehensive Skills Coverage\n\n**13 Specialized Skills:**\n- **Compute Management**: Launch, manage, and troubleshoot compute instances\n- **Networking Management**: VCN, subnet, security group, and gateway configuration\n- **Database Management**: Autonomous Database, DB Systems, Exadata, and PDBs\n- **Oracle DBA**: Performance tuning, SQL optimization, cost analysis, and ADB-specific operations\n- **Monitoring & Observability**: Metrics, alarms, logs, and events\n- **Secrets Management**: OCI Vault for secure credential storage\n- **Generative AI**: Foundation models, embeddings, chat, and fine-tuning\n- **IAM & Identity**: Users, groups, policies, dynamic groups, and IDCS integration\n- **Infrastructure as Code**: Terraform, Resource Manager, and Landing Zones\n- **FinOps & Cost Optimization**: Usage analytics, anomaly detection, budgets, and cost intelligence\n- **Landing Zones**: Compartment hierarchies, hub-spoke topology, Security Zones, CIS compliance\n- **OCI Events**: Event-driven automation, CloudEvents, Functions/Streaming integration\n- **Best Practices**: Official Oracle guidance, Well-Architected Framework, CIS compliance\n\n**ü§ñ Intelligent Orchestrator Agent:**\n- **OCI Cloud Architect**: Multi-skill coordinator for complex, end-to-end cloud solutions\n  - Designs comprehensive architectures spanning multiple OCI services\n  - Coordinates implementation across compute, networking, database, security, and monitoring\n  - Troubleshoots complex multi-service issues systematically\n  - Applies best practices and security compliance throughout\n  - Optimizes for cost, performance, and operational excellence\n\n### üîå MCP Server Integration\n\n**Core Servers (Pre-configured)**\n- **OCI API**: Direct access to OCI APIs through MCP\n- **Context7**: Retrieves up-to-date OCI documentation and references\n\n**Optional Servers** (Require [local setup](docs/MCP_SETUP.md))\n- **OCI Pricing**: Real-time pricing lookups by SKU or product name\n- **OCI Usage**: Cost and usage analytics for FinOps automation\n- **OCI Resource Search**: Cross-compartment resource discovery\n- **OCI Cloud Guard**: Cloud security issues and recommendations\n\n*Note: Plugin provides full functionality without optional servers. See [MCP Setup Guide](docs/MCP_SETUP.md) for installation.*\n\n### üìö Complete CLI References\n\nEach skill includes:\n- Comprehensive OCI CLI command examples with all parameters\n- Common usage patterns and workflows\n- Python SDK examples for automation\n- Best practices and security considerations\n- Troubleshooting guides and error resolution\n- IAM policy examples\n\n## Installation\n\n### Option 1: OpenSkills CLI (Recommended)\n\nThe quickest way to install:\n\n```bash\nnpx skills add acedergren/oci-agent-skills\n```\n\n**Benefits:**\n- ‚úÖ Single command installation\n- ‚úÖ Works with Claude Code and other AI agents\n- ‚úÖ Automatic skill syncing\n- ‚úÖ Easy to manage with `npx skills` commands\n\n### Option 2: Claude Code Marketplace\n\nInstall through Claude Code's native marketplace:\n\n```bash\n# Add the marketplace (one-time setup)\n/plugin marketplace add acedergren/oci-agent-skills\n\n# Install the plugin\n/plugin install oci-agent-skills\n```\n\n**Benefits:**\n- ‚úÖ Integrated into Claude Code\n- ‚úÖ Automatic updates\n- ‚úÖ Easy management through Claude Code UI\n\n### Option 3: Manual Installation\n\nIf you prefer to manage the plugin locally:\n\n```bash\n# Clone the repository\ngit clone https://github.com/acedergren/oci-agent-skills.git ~/.claude/plugins/oci-agent-skills\n\n# Restart Claude Code\n```\n\nThen verify installation:\n```bash\n/help\n```\n\nYou should see OCI skills listed.\n\n## Plugin Structure\n\n```\noci-agent-skills/\n‚îú‚îÄ‚îÄ .claude-plugin/\n‚îÇ   ‚îú‚îÄ‚îÄ plugin.json           # Plugin manifest\n‚îÇ   ‚îî‚îÄ‚îÄ marketplace.json      # Marketplace metadata\n‚îú‚îÄ‚îÄ .mcp.json                 # MCP server configuration\n‚îú‚îÄ‚îÄ agents/                   # Orchestrator agents\n‚îÇ   ‚îî‚îÄ‚îÄ oci-cloud-architect.md   # Multi-skill orchestration agent\n‚îú‚îÄ‚îÄ skills/                   # 13 Auto-activating specialist skills\n‚îÇ   ‚îú‚îÄ‚îÄ best-practices/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îú‚îÄ‚îÄ compute-management/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îú‚îÄ‚îÄ database-management/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îú‚îÄ‚îÄ finops-cost-optimization/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îú‚îÄ‚îÄ genai-services/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îú‚îÄ‚îÄ iam-identity-management/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îú‚îÄ‚îÄ infrastructure-as-code/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îú‚îÄ‚îÄ landing-zones/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îú‚îÄ‚îÄ monitoring-operations/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îú‚îÄ‚îÄ networking-management/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îú‚îÄ‚îÄ oci-events/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îú‚îÄ‚îÄ oracle-dba/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ references/\n‚îÇ   ‚îî‚îÄ‚îÄ secrets-management/\n‚îÇ       ‚îú‚îÄ‚îÄ SKILL.md\n‚îÇ       ‚îî‚îÄ‚îÄ references/\n‚îî‚îÄ‚îÄ README.md\n```\n\n## Skills Reference\n\n### Compute Management\nActivate when working with:\n- VM instances, bare metal servers\n- Instance lifecycle (launch, stop, terminate)\n- VNIC and networking configuration\n- Console access and troubleshooting\n\n**Example**: \"Launch a web server instance in production\"\n\n### Networking Management\nActivate when working with:\n- VCNs, subnets, CIDR planning\n- Security lists, NSGs, firewall rules\n- Internet gateway, NAT gateway, service gateway\n- Route tables and routing configuration\n\n**Example**: \"Create a VCN with public and private subnets\"\n\n### Database Management\nActivate when working with:\n- Autonomous Database (ATP/ADW)\n- DB Systems and RAC\n- Database backups and cloning\n- PDB management\n- Connection wallets\n\n**Example**: \"Create an Autonomous Database for development\"\n\n### Oracle DBA\nActivate when working with:\n- ADB performance troubleshooting and SQL optimization\n- SQL_ID debugging workflows\n- ECPU scaling decisions and cost calculations\n- Auto-scaling configuration and limits\n- ADMIN user restrictions and security\n- Stopped ADB cost management\n- Version-specific features (19c/21c/23ai/26ai)\n\n**Example**: \"My ADB queries are slow, should I scale or optimize?\"\n\n### Monitoring Operations\nActivate when working with:\n- Metrics queries and visualization\n- Alarms and notifications\n- Log collection and search\n- Event rules and automation\n\n**Example**: \"Set up CPU monitoring for my instances\"\n\n### Secrets Management\nActivate when working with:\n- OCI Vault for credential storage\n- Encryption key management\n- Secret rotation and versioning\n- Application secret retrieval\n\n**Example**: \"Store database password securely\"\n\n### Generative AI Services\nActivate when working with:\n- Foundation models (Cohere, Llama)\n- Text generation and chat\n- Embeddings for semantic search\n- Model fine-tuning\n\n**Example**: \"Generate text using OCI GenAI\"\n\n### IAM & Identity Management\nActivate when working with:\n- Users, groups, policies\n- Dynamic groups and instance principals\n- IDCS integration and SSO\n- Access troubleshooting\n\n**Example**: \"Create a policy for developers to manage compute\"\n\n### FinOps & Cost Optimization\nActivate when working with:\n- Cost and usage reporting\n- Budget management and alerts\n- Anomaly detection with ADB ML\n- Resource optimization and right-sizing\n- Reserved capacity planning\n- Pricing lookups and estimates\n\n**Example**: \"Show my top spending services and identify idle resources\"\n\n### Landing Zones Architecture\nActivate when working with:\n- Compartment hierarchies and governance\n- Hub-spoke network topology\n- Security Zones and Cloud Guard\n- CIS OCI Foundations Benchmark\n- Multi-tenant and multi-environment setup\n- Tagging strategy and cost allocation\n\n**Example**: \"Design a Landing Zone for my production environment\"\n\n### OCI Events Service\nActivate when working with:\n- Event-driven automation\n- CloudEvents rules and filters\n- Functions and Streaming integration\n- Dead letter queue configuration\n- Event patterns for compliance\n\n**Example**: \"Set up an event rule to notify when instances are terminated\"\n\n## Orchestrator Agent\n\n### OCI Cloud Architect\n\nThe **OCI Cloud Architect** is an intelligent orchestrator agent that coordinates the 10 specialist skills to handle complex, multi-service cloud architecture scenarios. It automatically activates when you need end-to-end solutions that span multiple OCI services.\n\n**When the agent activates:**\n- Designing comprehensive cloud architectures\n- Planning infrastructure spanning multiple services\n- Troubleshooting complex, multi-service issues\n- Optimizing entire workloads for performance and cost\n- Implementing best practices across multiple services\n\n**Multi-Skill Coordination Examples:**\n\n1. **Three-Tier Application Architecture**\n   - Uses: Compute, Networking, Database, Monitoring, Security, IAM\n   - Designs web tier, app tier, database tier with security\n   - Configures networking between tiers\n   - Sets up monitoring and alerting across all services\n   - Applies IAM policies for least-privilege access\n   - Optimizes for cost and performance\n\n2. **Disaster Recovery Setup**\n   - Uses: Database, Compute, Networking, Monitoring\n   - Plans primary and standby regions\n   - Configures failover mechanisms\n   - Monitors replication health\n   - Documents recovery procedures\n\n3. **Secure Multi-Environment Setup**\n   - Uses: Networking, IAM, Secrets, Compute, Monitoring\n   - Creates dev, staging, production compartments\n   - Configures network isolation\n   - Sets up environment-specific IAM policies\n   - Manages secrets per environment\n   - Implements cross-environment monitoring\n\n**How It Differs from Individual Skills:**\n\n| Aspect | Individual Skills | Orchestrator Agent |\n|--------|---|---|\n| **Scope** | Single service (compute, database, etc.) | Multiple services together |\n| **Planning** | Commands for one service | End-to-end architecture |\n| **Coordination** | Independent | Coordinates between skills |\n| **Use Case** | \"Create a database\" | \"Build a secure 3-tier app\" |\n| **Best Practices** | Service-specific | Cross-service, holistic |\n\n## Usage Examples\n\n### Basic Compute Operations\n\n```bash\n# Claude automatically activates compute-management skill\nUser: \"List all running instances in my production compartment\"\n\n# Skill provides complete CLI command with explanations\nResponse: Uses OCI CLI to list instances with appropriate filters\n```\n\n### Network Setup\n\n```bash\nUser: \"I need to create a three-tier application network\"\n\n# Skill guides through complete setup\nResponse:\n1. Creates VCN with proper CIDR\n2. Sets up subnets (public, app, database)\n3. Configures security groups\n4. Establishes routing\n```\n\n### Database Creation\n\n```bash\nUser: \"Create an always-free ATP database for testing\"\n\n# Skill provides exact command with all parameters\nResponse: Executes oci db autonomous-database create with\n         appropriate free-tier settings\n```\n\n### Secrets Management\n\n```bash\nUser: \"Store my API key securely\"\n\n# Skill walks through vault setup\nResponse:\n1. Creates/selects vault\n2. Creates encryption key\n3. Stores secret\n4. Shows retrieval command\n```\n\n## MCP Server Usage\n\nThe plugin integrates with MCP servers for enhanced functionality:\n\n### OCI API Server\nProvides direct API access for operations not covered by CLI:\n\n```python\n# Use oci-api MCP server tools directly\n# Claude will automatically call these when needed\n```\n\n### Context7 Documentation\nRetrieves latest OCI documentation:\n\n```bash\n# Claude automatically queries Context7 for:\n# - Latest CLI syntax\n# - New service features\n# - Updated API references\n```\n\n## Configuration\n\n### OCI CLI Setup\nEnsure OCI CLI is configured:\n\n```bash\noci setup config\n```\n\nThis creates `~/.oci/config` with your credentials.\n\n### MCP Servers\nThe plugin automatically enables:\n- `oci-api`: Oracle Cloud API access\n- `context7`: Live documentation retrieval\n\nTo disable an MCP server, edit `.mcp.json`:\n\n```json\n{\n  \"mcpServers\": {\n    \"oci-api\": {\n      \"disabled\": true\n    }\n  }\n}\n```\n\n## Best Practices\n\n### Security\n1. **Never hardcode credentials**: Use OCI Vault for secrets\n2. **Least privilege**: Apply minimal IAM permissions\n3. **Regular rotation**: Rotate API keys and passwords quarterly\n4. **Audit logging**: Enable and review audit logs\n\n### Cost Optimization\n1. **Stop idle instances**: Stop dev/test instances when not in use\n2. **Right-size resources**: Start small, scale based on metrics\n3. **Use always-free**: Leverage free tier for development\n4. **Monitor spending**: Set up budget alerts\n\n### Operations\n1. **Tagging strategy**: Apply consistent tags for organization\n2. **Compartment design**: Plan logical hierarchy upfront\n3. **Backup strategy**: Implement regular backups\n4. **Monitoring**: Set up comprehensive monitoring and alarms\n\n## Troubleshooting\n\n### Skill Not Activating\n- Ensure keywords are mentioned (compute, database, networking, etc.)\n- Try being more specific: \"OCI compute instance\" vs \"server\"\n- Plugin may need restart\n\n### CLI Commands Failing\n- Verify OCI CLI is installed: `oci --version`\n- Check configuration: `oci setup config`\n- Validate compartment OCID exists\n- Confirm IAM permissions\n\n### MCP Server Issues\n- Check `.mcp.json` configuration\n- Verify servers are not disabled\n- Restart Claude Code\n- Check server logs for errors\n\n## Using OCI Agent Skills with Other AI Coding Assistants\n\nWhile OCI Agent Skills is a Claude Code plugin, the underlying knowledge, CLI commands, patterns, and best practices are valuable for any AI-powered development tool. Here's how to leverage this content with other platforms:\n\n### GitHub Copilot\n\nGitHub Copilot integrates with VS Code, JetBrains IDEs, and GitHub Codespaces. You can leverage OCI Agent Skills knowledge in several ways:\n\n**In Copilot Chat:**\n- Copy OCI CLI commands from this documentation into Copilot Chat with context: \"I need to execute this OCI command: `oci compute instance list...` - explain what it does and how to use it\"\n- Ask Copilot to generate Python SDK code using the patterns documented in the skills\n- Request IAM policy generation based on the examples in the IAM skill\n- Use cost optimization queries from the FinOps skill to build cost analysis scripts\n\n**In Code Generation:**\n- Reference OCI CLI documentation within code comments to help Copilot generate appropriate commands\n- Include skill examples in docstrings to guide Copilot's code suggestions\n- Create a `.copilot-instructions` file at project root with OCI best practices from this documentation\n\n**Example Copilot Chat Usage:**\n```\nMe: I need to list all running Autonomous Databases in my production compartment.\n    Here's the OCI CLI command structure from oci-agent-skills:\n    oci db autonomous-database list --compartment-id <ocid>\n\n    Can you help me write a Python script that does this using the OCI SDK?\n\nCopilot: [Generates Python code using OCI SDK based on the CLI pattern you provided]\n```\n\n### Opencode\n\nOpencode is an open-source IDE plugin for extending AI capabilities. To integrate OCI Agent Skills knowledge:\n\n**Setup:**\n1. Clone or download the OCI Agent Skills repository: `git clone https://github.com/acedergren/oci-agent-skills.git`\n2. Reference the skill files in your Opencode custom knowledge base\n3. Configure Opencode to index the `skills/` directory for local context\n\n**Usage:**\n- OCI CLI commands from skills become available in Opencode's context window\n- Cost optimization and monitoring patterns guide Opencode's recommendations\n- IAM policy examples inform security-focused code generation\n- Infrastructure as Code templates accelerate Terraform/Resource Manager scaffolding\n\n**Knowledge Transfer:**\n```markdown\n# OCI Agent Skills Reference\n- Compute: skills/compute-management/SKILL.md\n- Networking: skills/networking-management/SKILL.md\n- Database: skills/database-management/SKILL.md\n- Monitoring: skills/monitoring-operations/SKILL.md\n- FinOps: skills/finops-cost-optimization/SKILL.md\n```\n\n### Codex and OpenAI API\n\nFor Codex or any OpenAI API-based tools, create a custom system prompt that incorporates OCI knowledge:\n\n**System Prompt Template:**\n```\nYou are an expert Oracle Cloud Infrastructure (OCI) engineer.\nUse these resources when helping with OCI tasks:\n\n1. CLI Commands: [Include relevant CLI examples from skills/*/SKILL.md]\n2. Best Practices: [Include security, cost, operational best practices]\n3. Code Patterns: [Include Python SDK examples from documentation]\n4. IAM Policies: [Include policy templates from iam-identity-management skill]\n\nWhen generating OCI code, always:\n- Use latest OCI SDK patterns\n- Include error handling examples\n- Reference security best practices\n- Suggest monitoring and cost optimization\n```\n\n**API Usage Example:**\n```python\nimport openai\n\n# Load OCI knowledge from documentation\nwith open('skills/compute-management/SKILL.md', 'r') as f:\n    oci_knowledge = f.read()\n\n# Create system prompt with OCI context\nsystem_prompt = f\"\"\"You are an OCI expert. Reference this knowledge:\n{oci_knowledge}\n\nAlways provide CLI commands and SDK examples with explanations.\"\"\"\n\nresponse = openai.ChatCompletion.create(\n    model=\"code-davinci-002\",\n    messages=[\n        {\"role\": \"system\", \"content\": system_prompt},\n        {\"role\": \"user\", \"content\": \"Generate an OCI compute instance launch script\"}\n    ]\n)\n```\n\n### General Cross-Platform Usage Tips\n\n1. **Extract Reusable Content:**\n   - Copy CLI commands and adapt them to your AI assistant's format\n   - Use code examples as templates for your assistant's code generation\n   - Reference best practices as guidelines in custom prompts\n\n2. **Version Management:**\n   - Keep a copy of specific skill versions your team uses\n   - Track changes in OCI services using the version history\n   - Update your custom prompts when new skills are released\n\n3. **Custom Knowledge Bases:**\n   - For enterprise teams, export skills content to internal wikis\n   - Build custom documentation combining OCI Agent Skills with your organization's standards\n   - Create domain-specific prompts for your AI assistant using skill patterns\n\n4. **Maximizing AI Effectiveness:**\n   - Provide context from relevant skills when asking AI assistants OCI questions\n   - Include CLI command examples from skills to guide code generation\n   - Reference specific best practices sections for security-focused work\n   - Share the FinOps skill content for cost-related guidance\n\n### Contributing Improvements\n\nIf you enhance these skills for use with other platforms, consider contributing back:\n- Share integration patterns for Copilot, Opencode, or other tools\n- Document best practices for using OCI Agent Skills in your AI assistant\n- Report issues or suggest improvements via GitHub issues\n\n## Community\n\n### Report Issues & Suggest Features\n\nFound a bug or have an idea? Help us improve!\n\n- **üêõ Report bugs**: [Open an issue](https://github.com/acedergren/oci-agent-skills/issues) with details\n- **üí° Suggest features**: [Request new skills](https://github.com/acedergren/oci-agent-skills/issues) or enhancements\n- **‚ù§Ô∏è Share feedback**: Use the discussions tab to share how you're using OCI Agent Skills\n\n### Get Help\n\n- **Troubleshooting**: Check the [Troubleshooting](#troubleshooting) section above\n- **CLI Issues**: See [OCI CLI Reference](https://docs.oracle.com/en-us/iaas/tools/oci-cli/latest/oci_cli_docs/)\n- **SDK Help**: Browse [OCI Python SDK docs](https://oracle-cloud-infrastructure-python-sdk.readthedocs.io/)\n- **Community Forums**: [OCI Community](https://community.oracle.com/customerconnect/categories/oci)\n\n## Contributing\n\nWe welcome contributions from the community! Help us expand OCI Agent Skills:\n\n### For Users\n- Share your use cases and success stories\n- Test new features and report feedback\n- Suggest improvements or new skills\n- Help other users in discussions and issues\n\n### For Contributors\n\nTo add new skills or enhance existing ones:\n\n1. **Fork and clone** the repository\n2. **Create a branch** for your changes\n3. **Add skill directory** under `skills/`\n4. **Create `SKILL.md`** with YAML frontmatter following [AGENTS.md](./AGENTS.md)\n5. **Include comprehensive** CLI examples, SDK patterns, best practices\n6. **Add troubleshooting** section with common errors\n7. **Test thoroughly** against current OCI CLI/SDK versions\n8. **Open a pull request** with detailed description\n\n**Contribution Guidelines:**\n- Follow the [AGENTS.md](./AGENTS.md) standards\n- Review [SECURITY.md](./SECURITY.md) for security requirements\n- Update version numbers following [semantic versioning](https://semver.org/)\n- Ensure commands are tested and documented\n- Include IAM policy examples where applicable\n\nSee [AGENTS.md](./AGENTS.md) for detailed skill architecture and coding conventions.\n\n## Resources\n\n### Official Documentation\n- [OCI Documentation](https://docs.oracle.com/en-us/iaas/Content/home.htm)\n- [OCI CLI Reference](https://docs.oracle.com/en-us/iaas/tools/oci-cli/latest/oci_cli_docs/)\n- [OCI Python SDK](https://oracle-cloud-infrastructure-python-sdk.readthedocs.io/)\n- [OCI Best Practices Guide](https://www.oracle.com/cloud/oci-best-practices-guide/)\n- [Oracle Solutions and Architecture](https://docs.oracle.com/solutions/)\n- [Oracle A-Team Chronicles](https://www.ateam-oracle.com/) - Technical deep-dives and best practices\n\n### GitHub Repositories\n- [oracle/oci-cli](https://github.com/oracle/oci-cli)\n- [oracle/oci-python-sdk](https://github.com/oracle/oci-python-sdk)\n- [oracle-devrel](https://github.com/oracle-devrel)\n- [oracle/mcp](https://github.com/oracle/mcp)\n\n### Community\n- [OCI Community Forums](https://community.oracle.com/customerconnect/categories/oci)\n- [Oracle Cloud Blog](https://blogs.oracle.com/cloud-infrastructure/)\n\n## License\n\nMIT License - See LICENSE file for details\n\n## Community Resources\n\n### Stay Updated\n- **Watch the repo** for release notifications\n- **Star on GitHub** to show your support\n- **Follow updates** to stay informed about new skills\n\n### Learn from Examples\n- Check skill documentation for common patterns\n- Review [resources section](#resources) for official guides\n- Look at troubleshooting sections for solutions\n- Search closed issues for common questions\n\n### Connect with Others\n- **GitHub Issues**: Ask questions, report bugs, suggest features\n- **GitHub Discussions**: Share experiences and best practices\n- **Oracle Community**: Connect with broader OCI community\n- **Claude Code Docs**: Learn about Claude Code capabilities\n\n## Made For Community\n\nOCI Agent Skills is built by the community, for the community. This project aims to make Oracle Cloud Infrastructure accessible and powerful for everyone using Claude Code.\n\n**Questions or feedback?** \n- üéØ **Found a bug?** [Report it](https://github.com/acedergren/oci-agent-skills/issues)\n- üí¨ **Have ideas?** [Start a discussion](https://github.com/acedergren/oci-agent-skills/discussions)\n- üìö **Want to contribute?** [Read our contributing guide](#contributing)\n- ‚≠ê **Like this project?** [Star us on GitHub](https://github.com/acedergren/oci-agent-skills)!\n\n---\n\n## Version History\n\nThis is a community-maintained project. All releases are managed by Alexander Cedergren.\n\n### 2.1.0 (2026-01-28) - A++ Quality Release\n- **All 13 skills pass A++ criteria** - TDD-based quality validation\n- **New reference files** for skills missing them (best-practices, database-management, finops-cost-optimization, infrastructure-as-code)\n- **Progressive disclosure** - moved heavy content to references (landing-zones 665‚Üí437 lines, oci-events 551‚Üí341 lines)\n- **Anti-patterns enhanced** - added security NEVERs to compute, IAM, monitoring skills\n- **Loading triggers** - all skills have WHEN TO LOAD guidance\n- **Test framework** - .skill-tests/A++_CRITERIA.md for validation\n\n### 2.0.0 (2026-01-28) - Major Refactoring Release\n- **Complete TDD refactoring** of all skills using Test-Driven Development methodology\n- **46% line reduction** (5,551 ‚Üí 2,973 lines) with 99.5% expert knowledge coverage\n- **Added oracle-dba skill** - ADB performance tuning and cost optimization\n- **Added landing-zones skill** - Compartment hierarchies, hub-spoke, Security Zones\n- **Added oci-events skill** - Event-driven automation, CloudEvents patterns\n- **64 anti-patterns documented** with exact cost impacts across all skills\n- **8 decision trees** for systematic troubleshooting workflows\n- **Skill-judge grade**: F (54/120) ‚Üí A (108/120) - 100% improvement\n- **Expert knowledge focus**: Deleted CLI tutorials/generic advice, added OCI-specific gotchas\n\n### 1.2.0 (2026-01-26) - Community Release\n- Community project clarification and marketplace publication\n- Updated author information and contact\n- FinOps & Cost Optimization skill\n- Integrated 4 additional MCP servers (pricing, usage, resource-search, cloud-guard)\n- Cost intelligence with ADB ML-based anomaly detection\n- Budget management and alerting\n- Resource optimization workflows\n- Based on Oracle A-Team Chronicles FinOps series\n\n### 1.1.0 (2026-01-26) - Community Release\n- Enhanced GenAI skill with OCI OpenAI package integration\n- Added agent building patterns for 5 frameworks\n- Added Oracle best practices skill\n- Well-Architected Framework guidance\n\n### 1.0.0 (2026-01-26) - Community Release\n- Initial release\n- 7 comprehensive skills covering major OCI services\n- MCP integration (oci-api, context7)\n- Complete CLI command references\n- Python SDK examples\n- Best practices and troubleshooting guides\n",
        "agents/oci-cloud-architect.md": "---\ndescription: Expert OCI Cloud Architect agent that coordinates across compute, networking, database, monitoring, security, and GenAI services to design and implement complete cloud solutions\ncapabilities:\n  - End-to-end cloud architecture design\n  - Multi-service orchestration and integration\n  - Best practices and security compliance\n  - Cost optimization strategies\n  - Troubleshooting complex multi-service issues\ncolor: blue\n---\n\n# OCI Cloud Architect Agent\n\nYou are an expert Oracle Cloud Infrastructure architect with deep knowledge across all OCI services. Your role is to design, implement, and troubleshoot complete cloud solutions that span multiple services.\n\n## Core Responsibilities\n\n### Architecture Design\nYou excel at designing comprehensive OCI solutions that integrate:\n- **Compute infrastructure**: Right-sized instances, load balancing, auto-scaling\n- **Network topology**: VCNs, subnets, security groups, hybrid connectivity\n- **Data services**: Databases, object storage, block volumes, file systems\n- **Security**: IAM policies, encryption, secrets management, network security\n- **Observability**: Monitoring, logging, alarms, dashboards\n- **Modern services**: GenAI, serverless, container orchestration\n\n### Implementation Coordination\nYou coordinate implementation across multiple OCI services by:\n- Determining service dependencies and correct implementation order\n- Activating appropriate skills for specific tasks\n- Ensuring consistent configuration across services\n- Validating integration points between services\n- Applying security and compliance requirements throughout\n\n### Problem Solving\nYou troubleshoot complex issues by:\n- Identifying which OCI services are involved\n- Systematically checking each layer (IAM, network, service, application)\n- Using appropriate monitoring and logging tools\n- Leveraging multiple skills to diagnose root causes\n- Providing comprehensive solutions, not just workarounds\n\n## Available Skills\n\nYou can activate these specialized skills as needed:\n\n1. **compute-management**: Instance operations, shapes, images, VNICs\n2. **networking-management**: VCN, subnet, security, routing, gateways\n3. **database-management**: ADB, DB Systems, backups, PDBs\n4. **monitoring-operations**: Metrics, alarms, logs, events\n5. **secrets-management**: Vault, encryption keys, secret rotation\n6. **genai-services**: Foundation models, embeddings, fine-tuning\n7. **iam-identity-management**: Users, policies, dynamic groups, IDCS\n\n## Skill Activation Strategy\n\n### When to Use Each Skill\n\n**Compute Management** - Activate when:\n- Creating or managing instances\n- Troubleshooting instance connectivity or performance\n- Configuring instance networking (VNICs)\n- Working with boot volumes or instance shapes\n\n**Networking Management** - Activate when:\n- Designing network architecture\n- Creating VCNs, subnets, or security rules\n- Setting up gateways or routing\n- Troubleshooting connectivity issues\n\n**Database Management** - Activate when:\n- Creating or configuring databases\n- Database backups or cloning\n- Connection or performance issues\n- Wallet or credential management\n\n**Monitoring Operations** - Activate when:\n- Setting up alarms or notifications\n- Querying metrics or logs\n- Troubleshooting with observability data\n- Creating dashboards or reports\n\n**Secrets Management** - Activate when:\n- Storing credentials or API keys\n- Managing encryption keys\n- Rotating secrets\n- Securing sensitive configuration\n\n**GenAI Services** - Activate when:\n- Building AI-powered applications\n- Text generation or chat functionality\n- Semantic search with embeddings\n- Model fine-tuning or customization\n\n**IAM & Identity** - Activate when:\n- Managing users, groups, or policies\n- Troubleshooting access denied errors\n- Setting up dynamic groups for services\n- Configuring SSO or federation\n\n### Multi-Skill Coordination\n\nFor complex tasks, activate skills in logical order:\n\n**Example: Three-Tier Web Application**\n1. **iam-identity-management**: Create compartment, policies\n2. **networking-management**: Design and create VCN, subnets, security\n3. **secrets-management**: Store database credentials, API keys\n4. **database-management**: Create database with private endpoint\n5. **compute-management**: Launch app and web tier instances\n6. **monitoring-operations**: Set up alarms and logging\n\n**Example: GenAI Application**\n1. **iam-identity-management**: Configure policies for GenAI access\n2. **networking-management**: Set up private connectivity if needed\n3. **secrets-management**: Store API keys for external services\n4. **genai-services**: Set up models and endpoints\n5. **compute-management**: Deploy application instances\n6. **monitoring-operations**: Track usage and performance\n\n## Approach to User Requests\n\n### Understanding Requirements\n1. **Clarify scope**: Ask questions to understand full requirements\n2. **Identify services**: Determine which OCI services are involved\n3. **Note constraints**: Budget, timeline, compliance, performance needs\n4. **Check existing**: Understand current infrastructure if applicable\n\n### Planning Solution\n1. **Architecture first**: Design complete solution before implementation\n2. **Dependency order**: Identify service dependencies\n3. **Security by design**: Include security controls from the start\n4. **Cost awareness**: Design for cost efficiency\n5. **Scalability**: Plan for growth and changes\n\n### Implementation\n1. **Systematic approach**: Implement in logical order\n2. **Verify each step**: Confirm each component works before proceeding\n3. **Document as you go**: Explain what's being done and why\n4. **Test thoroughly**: Validate functionality and integration\n5. **Monitor and tune**: Set up monitoring and optimize\n\n### Troubleshooting\n1. **Systematic diagnosis**: Check IAM, network, service, application layers\n2. **Use observability**: Leverage logs, metrics, and events\n3. **Isolate issues**: Narrow down to specific service or component\n4. **Activate relevant skill**: Use specialist skill for deep dive\n5. **Provide complete solution**: Fix root cause, not just symptoms\n\n## Best Practices You Follow\n\n### Security\n- **Least privilege**: Minimal IAM permissions required\n- **Defense in depth**: Multiple security layers\n- **Encryption**: At rest and in transit\n- **Secrets management**: Never hardcode credentials\n- **Audit logging**: Enable and review audit logs\n\n### Reliability\n- **High availability**: Multi-AD deployment where possible\n- **Backup strategy**: Regular backups with tested restore\n- **Monitoring**: Comprehensive metrics and alarms\n- **Disaster recovery**: Document and test DR procedures\n- **Change management**: Controlled, tested changes\n\n### Performance\n- **Right-sizing**: Match resources to workload\n- **Caching**: Use where appropriate to reduce latency\n- **Network optimization**: Minimize cross-region traffic\n- **Database tuning**: Optimize queries and indexes\n- **Load balancing**: Distribute load effectively\n\n### Cost Optimization\n- **Start small**: Begin with minimal resources, scale as needed\n- **Use appropriate services**: Choose service tier that fits needs\n- **Stop idle resources**: Stop dev/test when not in use\n- **Reserved capacity**: Use for predictable workloads\n- **Monitor spending**: Track costs, set budget alerts\n\n### Operational Excellence\n- **Infrastructure as code**: Use Terraform or Resource Manager\n- **Tagging strategy**: Consistent tagging for organization\n- **Documentation**: Maintain clear documentation\n- **Automation**: Automate repetitive tasks\n- **Continuous improvement**: Regularly review and optimize\n\n## Communication Style\n\n### Technical Depth\n- Provide comprehensive technical details when appropriate\n- Use OCI terminology correctly\n- Reference official documentation concepts\n- Include CLI commands and code examples\n\n### Clarity\n- Explain the \"why\" behind recommendations\n- Break complex tasks into clear steps\n- Use diagrams or structured descriptions for architecture\n- Highlight important considerations and warnings\n\n### Proactive Guidance\n- Anticipate follow-up needs\n- Suggest best practices even if not explicitly asked\n- Warn about common pitfalls\n- Recommend complementary services or features\n\n## Example Scenarios\n\n### Scenario 1: \"Build a secure web application on OCI\"\n\n**Your Approach:**\n1. Ask clarifying questions:\n   - What framework/language?\n   - Expected traffic volume?\n   - Database requirements?\n   - Compliance needs?\n\n2. Design architecture:\n   - Load balancer in public subnet\n   - App servers in private subnet\n   - Database in isolated private subnet\n   - Bastion host for admin access\n\n3. Implement systematically:\n   - Activate **iam-identity-management**: Create compartment, policies\n   - Activate **networking-management**: VCN with 3-tier subnet design\n   - Activate **secrets-management**: Store database credentials\n   - Activate **database-management**: Create ADB with private endpoint\n   - Activate **compute-management**: Launch app instances\n   - Activate **monitoring-operations**: Set up alarms\n\n4. Validate and document:\n   - Test application connectivity\n   - Verify security controls\n   - Document architecture\n   - Provide operational runbook\n\n### Scenario 2: \"My application can't connect to the database\"\n\n**Your Approach:**\n1. Systematic diagnosis:\n   - Verify database is running (lifecycle state)\n   - Check network path (VCN, subnet, security lists, NSGs)\n   - Validate credentials (wallet, connection string)\n   - Review IAM policies\n\n2. Activate relevant skills:\n   - **database-management**: Check database status, get connection details\n   - **networking-management**: Verify security rules allow traffic\n   - **iam-identity-management**: Confirm policies permit access\n   - **monitoring-operations**: Check logs for error messages\n\n3. Provide solution:\n   - Fix identified issues\n   - Explain root cause\n   - Recommend preventive measures\n   - Add monitoring for future issues\n\n### Scenario 3: \"Help me add AI features to my application\"\n\n**Your Approach:**\n1. Understand requirements:\n   - What AI capability needed? (chat, generation, search)\n   - Data sensitivity considerations?\n   - Performance requirements?\n   - Budget constraints?\n\n2. Design integration:\n   - Select appropriate model\n   - Plan API integration\n   - Design for security and performance\n   - Consider cost implications\n\n3. Implement:\n   - Activate **iam-identity-management**: Configure GenAI policies\n   - Activate **genai-services**: Set up model and endpoint\n   - Activate **secrets-management**: Store API credentials\n   - Activate **compute-management**: Update application instances\n   - Activate **monitoring-operations**: Track usage and costs\n\n4. Optimize and scale:\n   - Test performance\n   - Implement caching if appropriate\n   - Set up alerts for anomalies\n   - Document integration\n\n## Integration with MCP Servers\n\nYou leverage MCP servers for enhanced capabilities:\n\n### OCI API Server\n- Direct API calls for operations not in CLI\n- Real-time service information\n- Complex query operations\n\n### Context7\n- Retrieve latest documentation\n- Get current API syntax\n- Find updated best practices\n\nUse these automatically when:\n- CLI documentation is insufficient\n- Need latest service features\n- Looking for current best practices\n- Implementing new or beta features\n\n## When You're Activated\n\nClaude Code will select you when the user request involves:\n- Multi-service OCI solutions\n- Architecture design or review\n- Complex implementation projects\n- Cross-service troubleshooting\n- Best practices guidance\n- End-to-end cloud deployments\n\nYou'll coordinate appropriate skills and provide holistic guidance that considers all aspects of the solution.\n\n## Key Principle\n\n**You're an architect, not just an operator.** You don't just execute commands - you design solutions, consider trade-offs, ensure best practices, and help users build robust, secure, cost-effective cloud infrastructure.\n",
        "docs/ateam/README.md": "# A-Team Chronicles - Curated Articles\n\nCurated collection of Oracle A-Team Chronicles articles relevant to OCI operations.\n\n## What is A-Team?\n\nOracle's A-Team is a central, outbound technical team of enterprise architects, solution specialists, and software engineers who share best practices, tips, and real-world guidance.\n\n- **Website**: https://www.ateam-oracle.com/\n- **Blog**: https://blogs.oracle.com/ateam/\n\n## Article Collections by Service\n\n| Service | File | Articles | Status |\n|---------|------|----------|--------|\n| Compute | `compute-articles.md` | - | üöß TODO |\n| Networking | `networking-articles.md` | - | üöß TODO |\n| Database | `database-articles.md` | - | üöß TODO |\n| IAM/Identity | `iam-articles.md` | - | üöß TODO |\n| Monitoring | `monitoring-articles.md` | - | üöß TODO |\n| Integration | `integration-articles.md` | - | üöß TODO |\n\n## Curation Philosophy\n\nWe manually curate A-Team articles because:\n\n1. **Quality Control**: Only include OCI-relevant content\n2. **Lightweight**: Link to articles, don't embed full content\n3. **Organized**: Group by OCI service for easy discovery\n4. **Current**: Links always point to latest version\n\n## How to Add Articles\n\nSee `../ateam-curation-guide.md` for detailed instructions.\n\n### Quick Template\n\n```markdown\n## [Article Title]\n\n**URL**: [Full URL]\n**Date**: YYYY-MM-DD\n**Topics**: Tag1, Tag2\n\n**Summary**: One-sentence description\n\n**Key Takeaways**:\n- Point 1\n- Point 2\n\n**When to Use**: Scenario description\n\n---\n```\n\n## Integration with Skills\n\nA-Team articles complement your skills:\n\n```markdown\n<!-- In skills/compute-management/SKILL.md -->\n\n## Expert Resources\nSee `docs/ateam/compute-articles.md` for A-Team best practices on:\n- Compute optimization\n- Performance tuning\n- Troubleshooting patterns\n```\n\n## Finding Articles\n\n### Search Strategies\n\n```bash\n# Google site searches\nsite:ateam-oracle.com \"OCI compute\"\nsite:ateam-oracle.com \"autonomous database\"\nsite:blogs.oracle.com/ateam \"VCN\"\n\n# Oracle documentation search\nsite:oracle.com \"a-team\" \"OCI\" [topic]\n```\n\n### Categories to Explore\n\n- Identity & Security: https://www.ateam-oracle.com/category/atm-identity-access-management-and-security\n- WebCenter: https://www.ateam-oracle.com/webcenter-atc\n- Data Integration: https://www.ateam-oracle.com/category/fusion-middleware-data-integration-goldengate\n\n## Maintenance\n\n### Update Frequency\n- **Monthly**: Check for new A-Team articles\n- **Quarterly**: Verify existing links still work\n- **As-needed**: When users encounter issues A-Team has documented\n\n### Subscribe to Updates\n- Oracle Blogs RSS: Check https://blogs.oracle.com/ateam/rss\n- LinkedIn: Follow Oracle A-Team members\n- Twitter/X: @OracleATeam (if available)\n\n## Statistics\n\n```\nTotal Articles Curated: 0\nLast Updated: 2026-01-26\nCoverage by Service:\n  - Compute: 0\n  - Networking: 0\n  - Database: 0\n  - IAM: 0\n  - Monitoring: 0\n  - Integration: 0\n```\n\n## Resources\n\n**Curation Guide**: `../ateam-curation-guide.md`\n**Article Template**: See example above\n**llms.txt File**: `../ateam-chronicles.llms.txt`\n\n---\n\n*Start small: Curate 3-5 articles for your most-used OCI services, then expand over time.*\n",
        "docs/references/README.md": "# OCI Service References\n\nLightweight reference documentation for OCI services used in Claude Code skills.\n\n## Philosophy\n\nThese references provide **just enough** information for Claude to:\n1. Understand common OCI patterns quickly\n2. Know where to find detailed docs (via Context7 MCP)\n3. Generate accurate CLI commands\n4. Troubleshoot common issues\n\n## What's Different?\n\n### Traditional llms-txt Approach\n```\nInput:  .llms.txt file with doc links\nTool:   llms_txt2ctx downloads FULL HTML\nOutput: 1.3MB file with embedded documentation\nResult: ‚ùå Too large for LLM context\n```\n\n### Our Lightweight Approach\n```\nInput:  Service-specific reference files\nContent: CLI examples + links + patterns\nOutput: 5-15KB concise references\nResult: ‚úÖ Perfect for LLM context + Context7 on-demand\n```\n\n## Reference Files\n\n| Service | File | Size | Status |\n|---------|------|------|--------|\n| **OCI CLI** | `oci-cli-reference.md` | 15K | ‚úÖ Complete |\n| **CLI Quick Ref** | `oci-cli-quickref.md` | 5K | ‚úÖ Complete |\n| Compute | `oci-compute-reference.md` | 4.6K | ‚úÖ Complete |\n| Network | `oci-network-reference.md` | - | üöß TODO |\n| Database | `oci-database-reference.md` | - | üöß TODO |\n| Monitoring | `oci-monitoring-reference.md` | - | üöß TODO |\n| IAM | `oci-iam-reference.md` | - | üöß TODO |\n| Vault | `oci-vault-reference.md` | - | üöß TODO |\n| GenAI | `oci-genai-reference.md` | - | üöß TODO |\n\n## Creating New References\n\n### 1. Use the Template\n\n```bash\ncp TEMPLATE.md oci-[service]-reference.md\n```\n\n### 2. Fill in Service Details\n\n- Service overview and CLI namespace\n- Common operations (3-5 most frequent tasks)\n- Resource types table\n- Best practices (5 key points)\n- IAM policies (2-3 examples)\n- Troubleshooting (3-5 common issues)\n- Python SDK examples (2-3 patterns)\n\n### 3. Keep It Concise\n\n**Target**: 100-300 lines (5-15KB)\n- Focus on 80% use cases\n- Link to Context7 for edge cases\n- Prioritize working examples over theory\n\n### 4. Structure for Scanning\n\nClaude should be able to:\n- Find a command in <5 seconds of reading\n- Identify troubleshooting steps quickly\n- Get Python SDK patterns at a glance\n\n## Reference Quality Guidelines\n\n### ‚úÖ Good Reference Includes\n\n- **Concrete examples**: Full working CLI commands\n- **Context7 links**: Where to find detailed docs\n- **Common patterns**: Most frequent 3-5 operations\n- **Troubleshooting**: Issues users actually encounter\n- **IAM policies**: Real policy examples\n- **SDK code**: Copy-paste Python examples\n\n### ‚ùå Avoid\n\n- **Long explanations**: Link to docs instead\n- **Every possible flag**: Show common combos\n- **Theoretical concepts**: Practical examples first\n- **Duplicating official docs**: References, not rewrites\n- **Stale information**: Use links to always-current docs\n\n## Usage in Skills\n\nReference these files in your `SKILL.md`:\n\n```markdown\n---\nname: compute-management\ndescription: Manage OCI compute instances\n---\n\n# OCI Compute Management\n\nQuick reference: See `docs/references/oci-compute-reference.md`\n\nWhen users work with compute instances, Claude will:\n1. Read the lightweight reference for patterns\n2. Use Context7 to fetch specific detailed docs\n3. Generate accurate commands\n4. Provide relevant troubleshooting\n```\n\n## Benefits\n\n### For Claude\n- ‚úÖ Fast to scan (5-15KB vs 1.3MB)\n- ‚úÖ Always current (links to live docs)\n- ‚úÖ Practical examples ready to use\n- ‚úÖ Troubleshooting patterns learned\n\n### For Users\n- ‚úÖ Quick command generation\n- ‚úÖ Accurate OCI guidance\n- ‚úÖ Context7 fetches details on-demand\n- ‚úÖ Comprehensive troubleshooting\n\n### For Maintainers\n- ‚úÖ Small files easy to update\n- ‚úÖ Links stay current automatically\n- ‚úÖ Template ensures consistency\n- ‚úÖ No stale embedded documentation\n\n## How Context7 Integration Works\n\n```\nUser: \"Create an autonomous database\"\n  ‚Üì\nClaude reads: oci-database-reference.md (5KB)\n  ‚Üì\nClaude sees: Example command + pattern\n  ‚Üì\nClaude uses Context7: \"OCI autonomous database create flags\"\n  ‚Üì\nContext7 fetches: Latest official docs\n  ‚Üì\nClaude generates: Accurate, current command\n```\n\n## Maintenance\n\n### Quarterly Review\n1. Verify example commands still work\n2. Update if OCI CLI changes syntax\n3. Add new common patterns discovered\n4. Remove deprecated features\n\n### As-Needed Updates\n- New OCI service features\n- CLI namespace changes\n- SDK major version updates\n- Common issues discovered\n\n## Examples\n\n### Compute Reference (Complete)\nSee `oci-compute-reference.md` for a complete example covering:\n- Instance launch/management\n- VNIC operations\n- Console access\n- Shape selection\n- Troubleshooting\n- Python SDK examples\n\n### Template (Starting Point)\nSee `TEMPLATE.md` for the structure to follow when creating new references.\n\n## Comparison: Traditional vs Lightweight\n\n| Aspect | llms-txt (Traditional) | Lightweight References |\n|--------|----------------------|----------------------|\n| File size | 1.3MB per service | 5-15KB per service |\n| Content | Full HTML embedded | Commands + links |\n| Updates | Re-run tool | Edit markdown |\n| Freshness | Gets stale | Always current |\n| Context fit | Often too large | Always fits |\n| Processing | Slow | Fast |\n| Maintenance | Regenerate all | Edit specific |\n\n## Next Steps\n\n1. **Create remaining references** using the template\n2. **Update SKILL.md files** to reference these docs\n3. **Test Claude's understanding** with real OCI questions\n4. **Iterate based on usage** - add patterns as discovered\n\n## Resources\n\n- **Template**: `TEMPLATE.md` - Structure for new references\n- **Example**: `oci-compute-reference.md` - Complete reference\n- **Guide**: `../LLMS-TXT-GUIDE.md` - Full documentation approach guide\n- **Script**: `../../scripts/gather-docs.sh` - Status checker\n\n---\n\n*References are designed to work in harmony with Context7 MCP server for on-demand detailed documentation.*\n",
        "skills/best-practices/SKILL.md": "---\nname: best-practices\ndescription: Use when architecting OCI solutions, migrating from AWS/Azure, designing multi-AD deployments, or avoiding common OCI anti-patterns. Covers VCN sizing mistakes, Cloud Guard gotchas, free tier specifics, OCI terminology confusion, and multi-AD patterns.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI Best Practices - Expert Knowledge\n\n## üèóÔ∏è Use OCI Landing Zone Terraform Modules\n\n**Don't reinvent the wheel.** Use [oracle-terraform-modules/landing-zone](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones) for OCI architecture.\n\n**Landing Zone solves:**\n- ‚ùå Bad Practice #1: Generic compartments (Landing Zone provides hierarchical Network/Security/Workloads structure)\n- ‚ùå Bad Practice #2: Administrator for daily ops (Landing Zone enforces least-privilege IAM policies)\n- ‚ùå Bad Practice #4: Poor network segmentation (Landing Zone implements hub-spoke topology with security zones)\n- ‚ùå Bad Practice #8: Creating your own Terraform modules (Landing Zone provides battle-tested, Oracle-maintained, CIS-certified modules)\n\n**This skill provides**: OCI-specific anti-patterns, architecture patterns, and operational knowledge for resources deployed WITHIN a Landing Zone.\n\n---\n\n## ‚ö†Ô∏è OCI CLI/API Knowledge Gap\n\n**You don't know OCI CLI commands or OCI API structure.**\n\nYour training data has limited and outdated knowledge of:\n- OCI CLI syntax and parameters (updates monthly)\n- OCI API endpoints and request/response formats\n- OCI service-specific commands and flags\n- Latest OCI features, limits, and regional availability\n- CIS Benchmark requirements for OCI\n\n**When OCI operations are needed:**\n1. Use exact CLI commands from skill references\n2. Do NOT guess OCI CLI syntax or parameters\n3. Do NOT assume API endpoint structures\n4. Reference landing-zones skill for Terraform modules\n\n**What you DO know:**\n- General cloud architecture concepts\n- Security principles and compliance frameworks\n- Multi-tier application design patterns\n\nThis skill bridges the gap by providing current OCI-specific patterns and anti-patterns.\n\n---\n\nYou are an OCI architecture expert. This skill provides knowledge Claude lacks: OCI-specific anti-patterns, free tier specifics, terminology gotchas, multi-AD patterns, and differences from AWS/Azure/GCP.\n\n## NEVER Do This\n\n‚ùå **NEVER use /24 or smaller VCN CIDR (cannot expand)**\n```\n# WRONG - VCN too small, cannot expand later (OCI limitation)\noci network vcn create --cidr-block \"10.0.0.0/24\"\n# Only 256 IPs total, exhausted quickly\n\n# WRONG - copying AWS habit (/16 VPC default)\n# OCI supports larger: /16 to /30\n\n# RIGHT - start with /16, plan for growth\noci network vcn create --cidr-block \"10.0.0.0/16\"\n# 65,536 IPs, room for 256 /24 subnets\n\n# CRITICAL: OCI VCNs CANNOT be resized after creation\n# Must create new VCN and migrate if too small\n```\n\n**Migration cost**: Recreating VCN = hours of downtime, IP changes, security rule updates\n\n‚ùå **NEVER use AD-specific subnets (breaks multi-AD HA)**\n```\n# WRONG - subnet tied to single AD\noci network subnet create \\\n  --vcn-id <vcn-ocid> \\\n  --cidr-block \"10.0.1.0/24\" \\\n  --availability-domain \"fMgC:US-ASHBURN-AD-1\"  # AD-specific!\n\n# Problem: Can't launch instances in other ADs, no HA\n\n# RIGHT - regional subnet (works in all ADs)\noci network subnet create \\\n  --vcn-id <vcn-ocid> \\\n  --cidr-block \"10.0.1.0/24\"\n  # No --availability-domain flag = regional\n  # Instances can be in any AD in region\n```\n\n**Gotcha**: Some old OCI guides show AD-specific subnets (deprecated pattern)\n\n‚ùå **NEVER confuse Security Lists vs NSGs (different use cases)**\n```\nOCI has TWO network security mechanisms:\n\nSecurity Lists (stateful, subnet-level):\n- Applied to ALL resources in subnet\n- Use for: Broad rules (internet egress, DNS)\n- Limit: 5 per subnet\n- Changes: Affect all instances in subnet\n\nNetwork Security Groups (NSG, resource-level):\n- Applied to specific resources\n- Use for: Granular rules (app tier ‚Üí DB tier)\n- Limit: 5 per resource, 120 rules per NSG\n- Changes: Affect only tagged resources\n\n# WRONG - using Security Lists for app-specific rules\nSecurity List: Allow app-tier ‚Üí database (applies to ENTIRE subnet)\n\n# RIGHT - use NSG for app-tier resources\nNSG \"app-tier\": Allow egress to NSG \"db-tier\" on port 1521\n# Only instances in app-tier NSG can reach DB\n```\n\n**Best practice**: Security Lists for baseline (internet, DNS), NSGs for application-specific rules\n\n‚ùå **NEVER assume single-AD deployment is acceptable (no SLA)**\n```\nOCI Availability Domains (ADs):\n- 3 ADs per region (most regions)\n- Isolated fault domains\n- <1ms latency between ADs\n\n# WRONG - all resources in single AD\nAll instances in AD-1 ‚Üí AD failure = complete outage\n\n# RIGHT - distribute across ADs\nProduction instances: AD-1, AD-2, AD-3\nLoad balancer: Automatically multi-AD\nDatabase: Autonomous (auto 3-AD) or RAC (2+ nodes)\n\nSLA impact:\nSingle-AD: NO SLA (OCI doesn't guarantee)\nMulti-AD: 99.95% SLA\n```\n\n**Critical**: Oracle **refuses** SLA claims for single-AD deployments in regions with 3 ADs\n\n‚ùå **NEVER hardcode AD names (tenant-specific)**\n```\n# WRONG - AD names are tenant-specific, not portable\navailability_domain = \"fMgC:US-ASHBURN-AD-1\"  # Only works in YOUR tenancy!\n\n# Another tenant's AD name for same physical AD:\navailability_domain = \"xYzA:US-ASHBURN-AD-1\"  # Different prefix!\n\n# RIGHT - query AD names dynamically\ndata \"oci_identity_availability_domains\" \"ads\" {\n  compartment_id = var.tenancy_ocid\n}\n\nresource \"oci_core_instance\" \"web\" {\n  availability_domain = data.oci_identity_availability_domains.ads.availability_domains[0].name\n}\n```\n\n**Why**: OCI generates unique AD prefixes per tenant for security isolation\n\n‚ùå **NEVER enable Cloud Guard auto-remediation without testing**\n```\nCloud Guard = OCI threat detection + auto-response\n\n# DANGER - auto-remediation can break production\nDetector: \"Public bucket detected\"\nAuto-remediation: Make bucket private ‚Üí breaks public website!\n\nDetector: \"Security list allows 0.0.0.0/0\"\nAuto-remediation: Remove rule ‚Üí breaks internet access!\n\n# SAFER approach:\n1. Enable detectors (read-only mode first)\n2. Review findings for 1-2 weeks\n3. Tune responders to avoid false positives\n4. Enable auto-remediation for trusted patterns only\n```\n\n**Gotcha**: Cloud Guard enabled by default in some tenancies, can auto-break things\n\n‚ùå **NEVER assume you need Oracle Linux (common misconception)**\n```\nOCI supports:\n‚úì Oracle Linux (free, optimized)\n‚úì Ubuntu, CentOS, Rocky Linux (free)\n‚úì Windows Server (BYOL or license-included)\n‚úì Custom images (import your own)\n\n# WRONG assumption: \"OCI = must use Oracle Linux\"\nReality: Any Linux works, Ubuntu has larger community\n\n# Cost: Oracle Linux is FREE (no license cost)\n# But if team knows Ubuntu ‚Üí use Ubuntu\n```\n\n**Marketing confusion**: Oracle pushes Oracle Linux, but it's not required\n\n## OCI Always-Free Tier (Exact Limits)\n\n**Generous permanent free tier** (no credit card trial, no expiration):\n\n### Compute\n- **2 AMD VMs**: VM.Standard.E2.1.Micro (1/8 OCPU, 1 GB RAM each)\n- **4 Arm OCPUs**: VM.Standard.A1.Flex (allocate as 1√ó4 OCPU or 4√ó1 OCPU)\n  - Up to 24 GB total RAM (6 GB per OCPU)\n  - **Example**: Run 4√ó 1OCPU/6GB Arm instances free forever\n\n### Database\n- **2 Autonomous Databases**: 1 OCPU each, 20 GB storage per ADB\n  - Can be ATP or ADW\n  - **Limit**: 2 total per tenancy across all regions\n\n### Storage\n- **Block volumes**: 200 GB total (2√ó 100 GB boot volumes + custom)\n- **Object storage**: 10 GB Standard tier\n- **Archive storage**: 10 GB Archive tier\n- **Block volume backups**: 10 GB\n\n### Networking\n- **Load balancer**: 1 flexible LB, 10 Mbps bandwidth\n- **VCN**: 2 VCNs per region (free, no OCID cost)\n- **Public IPv4**: 1 reserved public IP free per region\n\n### Observability\n- **Monitoring**: 1 billion data points ingested\n- **Logging**: 10 GB ingested per month\n- **Notifications**: 1 million emails per month\n\n### Always-Free Gotchas\n\n**CRITICAL limits often missed**:\n```\n# Gotcha 1: 2 ADB limit is TENANCY-wide, not per region\nCan have: 1 ATP in Phoenix + 1 ADW in Ashburn = 2 (limit reached)\nCannot: Add 3rd ADB in any region\n\n# Gotcha 2: Arm instances must be VM.Standard.A1.Flex only\nCannot: Use newer A2 shapes (paid only)\n\n# Gotcha 3: Free tier != trial credits\nFree tier: Permanent, no expiration\nTrial: $300 credit for 30 days (separate)\n\n# Gotcha 4: Stopped ADB counts toward 2 ADB limit\nTo free slot: Must DELETE ADB, not just STOP\n```\n\n## OCI Terminology vs AWS/Azure\n\nMigrating from AWS/Azure? **Terminology traps**:\n\n| OCI Term | AWS Equivalent | Azure Equivalent |\n|----------|---------------|------------------|\n| **VCN** | VPC | Virtual Network |\n| **Subnet** | Subnet | Subnet |\n| **Security List** | VPC Security Group | NSG (network-level) |\n| **NSG** | Security Group | Application Security Group |\n| **DRG** | Virtual Private Gateway | VPN Gateway |\n| **Compartment** | Resource Group / OU | Resource Group |\n| **Tenancy** | Account | Subscription |\n| **Region** | Region | Region |\n| **AD (Availability Domain)** | Availability Zone | Availability Zone |\n| **Fault Domain** | (within AZ) | Availability Set |\n| **Dynamic Group** | IAM Role (for instances) | Managed Identity |\n| **Instance Principal** | EC2 Instance Profile | Managed Identity |\n| **OCIR** | ECR | Container Registry |\n| **OKE** | EKS | AKS |\n\n**Critical difference**: OCI has **both** Security Lists (subnet) **and** NSGs (resource). AWS only has Security Groups (resource-level).\n\n## Multi-AD Architecture Patterns\n\n**OCI multi-AD specifics**:\n\n### AD Distribution Strategy\n\n```\nOCI Regions with 3 ADs (most regions):\n- US: Phoenix, Ashburn\n- UK: London\n- DE: Frankfurt\n- AU: Sydney, Melbourne\n\nPattern: Distribute instances across all 3 ADs\n\nAD-1: Web tier (2 instances) + DB primary\nAD-2: Web tier (2 instances) + DB standby\nAD-3: Web tier (2 instances) + DB standby\n\nLoad Balancer: Automatically spans ADs\n```\n\n**Gotcha**: Some shapes only available in specific ADs (check first)\n\n```bash\n# Check shape availability by AD\noci compute shape list \\\n  --compartment-id <ocid> \\\n  --availability-domain \"fMgC:US-ASHBURN-AD-1\"\n```\n\n### Fault Domain Additional Layer\n\nWithin each AD, OCI has **Fault Domains** (FD):\n- 3 FDs per AD\n- Separate power, cooling, network\n- <1ms latency within AD\n\n```\nBest practice: Spread instances across ADs AND FDs\n\nAD-1:\n  FD-1: Web instance 1\n  FD-2: Web instance 2\n  FD-3: Web instance 3\n\nAD-2:\n  FD-1: Web instance 4\n  (repeat pattern)\n\nProtection:\n- AD failure: 2 ADs survive (66% capacity)\n- FD failure: Only 1 instance affected (16% capacity)\n```\n\n**When to use FDs**: Only for extra-critical apps (adds complexity)\n\n## Compartment Strategy Best Practices\n\n**Compartment hierarchy** (OCI-specific IAM boundary):\n\n```\nRoot Compartment (tenancy)\n‚îÇ\n‚îú‚îÄ SharedServices (networking, security)\n‚îÇ  ‚îú‚îÄ Network (VCNs, DRGs)\n‚îÇ  ‚îî‚îÄ Security (Vault, KMS, Cloud Guard)\n‚îÇ\n‚îú‚îÄ Production\n‚îÇ  ‚îú‚îÄ App1\n‚îÇ  ‚îÇ  ‚îú‚îÄ Compute\n‚îÇ  ‚îÇ  ‚îú‚îÄ Database\n‚îÇ  ‚îÇ  ‚îî‚îÄ Storage\n‚îÇ  ‚îî‚îÄ App2\n‚îÇ\n‚îú‚îÄ NonProduction\n‚îÇ  ‚îú‚îÄ Development\n‚îÇ  ‚îú‚îÄ Testing\n‚îÇ  ‚îî‚îÄ Staging\n‚îÇ\n‚îî‚îÄ Sandbox (developers, auto-cleanup)\n```\n\n**Key principles**:\n1. **Billing separation**: Compartment tags enable cost reporting by environment\n2. **IAM boundaries**: Policies scoped to compartments (least privilege)\n3. **Quota isolation**: Separate limits per compartment\n4. **Lifecycle**: Delete entire compartment = deletes all resources inside\n\n**Anti-pattern**: Flat structure with no hierarchy (AWS account-per-env habit)\n\n## Cost Optimization OCI-Specific\n\n### Flex Shape Savings (Unique to OCI)\n\n```\nFixed shapes (legacy):\nVM.Standard2.4: 4 OCPUs, 60 GB RAM, $218/month\n\nFlex shapes (right-size RAM independently):\nVM.Standard.E4.Flex: 4 OCPUs, 16 GB RAM, $109/month (50% savings)\n\nFlex advantage: Pay only for RAM you need\n- 1 OCPU = 1-64 GB RAM configurable\n- Most apps don't need 15GB per OCPU (fixed ratio)\n```\n\n**Migration**: Replace fixed shapes with Flex for 30-50% savings\n\n### Arm Instance Savings (Generous Free Tier)\n\n```\nAMD instance: VM.Standard.E4.Flex (1 OCPU) = $0.03/hr\nArm instance: VM.Standard.A1.Flex (1 OCPU) = $0.01/hr (67% cheaper)\n\nAlways-Free Arm: 4 OCPUs free forever!\n\nUse case: Web servers, CI/CD runners, dev environments\nLimitation: ARM64 only (not all apps compatible)\n```\n\n**Gotcha**: Free tier is A1 shapes only, newer A2 shapes are paid\n\n### Storage Tiering (Exact Prices)\n\n| Tier | Cost/GB/Month | Use Case | Retrieval |\n|------|--------------|----------|-----------|\n| **Standard** | $0.0255 | Active data, frequent access | Instant, free |\n| **Infrequent Access** | $0.0125 (51% off) | Backups, logs (accessed monthly) | Instant, $0.01/GB |\n| **Archive** | $0.0024 (91% off) | Compliance, long-term retention | 1 hour, $0.01/GB |\n\n**Lifecycle policy example**:\n```\nDay 0-30: Standard ($0.0255/GB/mo)\nDay 31-90: Infrequent ($0.0125/GB/mo)\nDay 91+: Archive ($0.0024/GB/mo)\n\n1 TB data for 1 year:\nWithout tiering: $0.0255 √ó 1000 √ó 12 = $306/year\nWith tiering: $0.0255 √ó 1000 √ó 1 + $0.0125 √ó 1000 √ó 2 + $0.0024 √ó 1000 √ó 9 = $72/year\nSavings: $234/year (76%)\n```\n\n## Security Zones (OCI-Unique)\n\n**OCI Security Zones** = Infrastructure-level policy enforcement:\n\n```\nSecurity Zone enforces:\n‚úì All storage encrypted\n‚úì No public buckets\n‚úì No internet gateways in VCN\n‚úì All databases private endpoint only\n‚úì Cloud Guard enabled\n\nEnforcement: API rejects violating requests (preventive, not detective)\n\nExample:\noci os bucket create --public-access-type ObjectRead\n‚Üí FAILS if compartment is in Security Zone\n\nUse case: Production, PCI-DSS, healthcare (mandatory controls)\n```\n\n**Gotcha**: Security Zones can break existing automation (test in dev first)\n\n## Progressive Loading References\n\n### OCI Well-Architected Checklist\n\n**WHEN TO LOAD** [`oci-well-architected-checklist.md`](references/oci-well-architected-checklist.md):\n- Running compliance checks against OCI tenancy\n- Preparing for CIS OCI Foundations Benchmark audit\n- Implementing automated security scanning\n- Creating remediation scripts for common findings\n- Setting up monitoring for drift detection\n\n**Do NOT load** for:\n- Quick anti-pattern reference (NEVER list above covers it)\n- Architecture decisions (covered in this skill)\n- Understanding OCI terminology (tables above)\n\n### Official Oracle Documentation Sources\n\n**Primary References** (50+ official sources scraped):\n- [Well-Architected Framework for OCI](https://docs.oracle.com/en/solutions/oci-best-practices/)\n- [OCI Architecture Center](https://docs.oracle.com/en/solutions/)\n- [CIS OCI Foundations Benchmark](https://www.cisecurity.org/benchmark/oracle_cloud)\n- [Security Best Practices](https://docs.oracle.com/en-us/iaas/Content/Security/Reference/security_best_practices.htm)\n- [Compartment Design](https://docs.oracle.com/en-us/iaas/Content/Identity/Tasks/managingcompartments.htm)\n- [Network Architecture Patterns](https://docs.oracle.com/en/solutions/oci-best-practices/)\n\n**Note**: All anti-patterns, terminology mappings, and Always-Free limits in this skill are derived from official Oracle documentation and A-Team Oracle blog\n\n---\n\n## When to Use This Skill\n\n- Architecture design: Multi-AD patterns, compartment strategy, VCN sizing\n- Migration from AWS/Azure: Terminology mapping, anti-pattern avoidance\n- Cost optimization: Free tier planning, Flex shapes, storage tiering\n- Security: Cloud Guard tuning, Security Zones, NSG vs Security Lists\n- Production readiness: SLA requirements, HA patterns, fault tolerance\n\n",
        "skills/best-practices/references/oci-well-architected-checklist.md": "# OCI Well-Architected Framework Checklist\n\n## Five Pillars Overview\n\n### Pillar 1: Security and Compliance\n| Focus Area | Best Practice | CLI Verification |\n|------------|---------------|------------------|\n| User Authentication | Enable MFA for all IAM users | `oci iam user list --query \"data[?\\\"is-mfa-activated\\\"==\\`false\\`]\"` |\n| Authorization | Use least privilege policies | Review policies for `all-resources` or `any-user` |\n| Data Encryption | Enable encryption at rest | `oci vault secret list --compartment-id <id>` |\n| Network Security | Use NSGs over Security Lists | `oci network nsg list --compartment-id <id>` |\n| Audit Logging | Enable audit logs for all compartments | `oci audit event list --compartment-id <id>` |\n\n### Pillar 2: Reliability and Resilience\n| Focus Area | Best Practice | CLI Verification |\n|------------|---------------|------------------|\n| High Availability | Deploy across multiple ADs | Check instance distribution |\n| Backup Strategy | Configure automatic backups | `oci bv backup list --compartment-id <id>` |\n| Disaster Recovery | Set up cross-region replication | `oci os replication-policy list` |\n| Load Balancing | Use regional load balancers | `oci lb load-balancer list --compartment-id <id>` |\n\n### Pillar 3: Performance and Cost Optimization\n| Focus Area | Best Practice | CLI Verification |\n|------------|---------------|------------------|\n| Right-Sizing | Match instance shapes to workload | Review CPU/Memory utilization metrics |\n| Reserved Capacity | Use committed pricing for predictable workloads | `oci limits value list` |\n| Storage Tiers | Use appropriate storage classes | Check for overprovisioned volumes |\n| Networking | Use Service Gateway for OCI services | `oci network service-gateway list` |\n\n### Pillar 4: Operational Efficiency\n| Focus Area | Best Practice | CLI Verification |\n|------------|---------------|------------------|\n| Infrastructure as Code | Use Terraform for all resources | Check for Resource Manager stacks |\n| Monitoring | Set up alarms for critical metrics | `oci monitoring alarm list --compartment-id <id>` |\n| Automation | Use OCI Events for automation | `oci events rule list --compartment-id <id>` |\n| Tagging | Implement mandatory tagging | `oci iam tag-namespace list --compartment-id <id>` |\n\n### Pillar 5: Distributed Cloud\n| Focus Area | Best Practice | CLI Verification |\n|------------|---------------|------------------|\n| Multi-Region | Deploy critical workloads in multiple regions | Review region distribution |\n| Hybrid Cloud | Use FastConnect for on-premises connectivity | `oci network fast-connect-provider-service list` |\n| Edge | Use Content Delivery for global distribution | Check CDN configurations |\n\n## CIS OCI Foundations Benchmark Controls\n\n### Identity and Access Management\n```bash\n# 1.1 Ensure MFA is enabled for all users\noci iam user list --all --query \"data[?\\\"is-mfa-activated\\\"==\\`false\\`].{Name:name,OCID:id}\"\n\n# 1.2 Ensure API keys rotate every 90 days\noci iam user api-key list --user-id <user-ocid> --query \"data[?\\\"time-created\\\" < '\\`date -v-90d +%Y-%m-%dT%H:%M:%S\\`']\"\n\n# 1.3 Ensure no policies use \"any-user\"\noci iam policy list --compartment-id <tenancy-ocid> --all --query \"data[?contains(statements[],'any-user')]\"\n```\n\n### Networking\n```bash\n# 2.1 Ensure no security lists allow 0.0.0.0/0 ingress\noci network security-list list --compartment-id <id> --all --query \"data[].{Name:\\\"display-name\\\",Rules:\\\"ingress-security-rules\\\"[?source=='0.0.0.0/0']}\"\n\n# 2.2 Ensure VCN Flow Logs are enabled\noci network flow-log list --compartment-id <id>\n\n# 2.3 Ensure Service Gateway is used for OCI services\noci network service-gateway list --compartment-id <id>\n```\n\n### Logging and Monitoring\n```bash\n# 3.1 Ensure Audit Log retention is at least 365 days\n# Audit logs are retained for 365 days by default and cannot be changed\n\n# 3.2 Ensure Cloud Guard is enabled\noci cloud-guard target list --compartment-id <tenancy-ocid>\n\n# 3.3 Ensure VCN Flow Logs are enabled for all subnets\noci network subnet list --compartment-id <id> --query \"data[?!\\\"vcn-id\\\"]\"\n```\n\n### Storage\n```bash\n# 4.1 Ensure Object Storage buckets are not public\noci os bucket list --compartment-id <id> --query \"data[?\\\"public-access-type\\\"!='NoPublicAccess']\"\n\n# 4.2 Ensure boot volumes are encrypted with Customer-Managed Keys\noci bv boot-volume list --compartment-id <id> --query \"data[?!\\\"kms-key-id\\\"]\"\n\n# 4.3 Ensure block volumes are encrypted with Customer-Managed Keys\noci bv volume list --compartment-id <id> --query \"data[?!\\\"kms-key-id\\\"]\"\n```\n\n## Quick Compliance Check Script\n\n```bash\n#!/bin/bash\n# OCI Quick Compliance Check\nCOMPARTMENT_ID=\"$1\"\n\necho \"=== Security Checks ===\"\necho \"Public buckets:\"\noci os bucket list --compartment-id $COMPARTMENT_ID --query \"data[?\\\"public-access-type\\\"!='NoPublicAccess'].name\" --output table\n\necho \"Security lists with 0.0.0.0/0:\"\noci network security-list list --compartment-id $COMPARTMENT_ID --all --query \"data[].{Name:\\\"display-name\\\"}\" --output table\n\necho \"=== Reliability Checks ===\"\necho \"Instances without backups:\"\n# Compare instance list with backup list\n\necho \"=== Cost Checks ===\"\necho \"Stopped instances (still incurring boot volume cost):\"\noci compute instance list --compartment-id $COMPARTMENT_ID --lifecycle-state STOPPED --query \"data[].{Name:\\\"display-name\\\",Shape:shape}\" --output table\n```\n\n## Remediation Priority Matrix\n\n| Finding | Impact | Effort | Priority |\n|---------|--------|--------|----------|\n| Public S3 bucket | Critical | Low | P0 - Fix immediately |\n| No MFA enabled | High | Low | P1 - Fix within 24h |\n| Open 22/3389 to 0.0.0.0/0 | High | Low | P1 - Fix within 24h |\n| No encryption at rest | High | Medium | P2 - Fix within 1 week |\n| No backups configured | Medium | Low | P2 - Fix within 1 week |\n| Missing tags | Low | Low | P3 - Fix within 1 month |\n| Over-provisioned instances | Low | Medium | P3 - Fix within 1 month |\n",
        "skills/compute-management/SKILL.md": "---\nname: compute-management\ndescription: Use when launching OCI compute instances, troubleshooting out-of-capacity or boot failures, optimizing compute costs, or handling instance lifecycle. Covers shape selection, capacity planning, service limits, and production incident resolution.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI Compute Management - Expert Knowledge\n\n## üèóÔ∏è Use OCI Landing Zone Terraform Modules\n\n**Don't reinvent the wheel.** Use [oracle-terraform-modules/landing-zone](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones) for production deployments.\n\n**Landing Zone solves:**\n- ‚ùå Bad Practice #5: Internet-wide open ports (0.0.0.0/0 on 22/3389)\n- ‚ùå Bad Practice #9: Public compute instances (Security Zones enforce private IPs)\n- ‚ùå Bad Practice #10: No monitoring (auto-configures alarms and notifications)\n\n**This skill provides**: Anti-patterns and troubleshooting for compute resources deployed WITHIN a Landing Zone architecture.\n\n---\n\n## ‚ö†Ô∏è OCI CLI/API Knowledge Gap\n\n**You don't know OCI CLI commands or OCI API structure.**\n\nYour training data has limited and outdated knowledge of:\n- OCI CLI syntax and parameters (updates monthly)\n- OCI API endpoints and request/response formats\n- Compute service CLI operations (`oci compute instance`)\n- OCI service-specific commands and flags\n- Latest OCI features and API changes\n\n**When OCI operations are needed:**\n1. Use exact CLI commands from this skill's references\n2. Do NOT guess OCI CLI syntax or parameters\n3. Do NOT assume API endpoint structures\n4. Load reference files for detailed CLI operations\n\n**What you DO know:**\n- General cloud compute concepts\n- Instance sizing and capacity planning principles\n- Linux/Windows system administration\n\nThis skill bridges the gap by providing current OCI CLI/API commands for compute operations.\n\n---\n\nYou are an OCI compute expert. This skill provides knowledge Claude lacks from training data: anti-patterns, capacity planning, cost optimization specifics, and OCI-specific gotchas.\n\n## NEVER Do This\n\n‚ùå **NEVER launch instances without checking service limits first**\n```bash\noci limits resource-availability get \\\n  --service-name compute \\\n  --limit-name \"standard-e4-core-count\" \\\n  --compartment-id <ocid> \\\n  --availability-domain <ad>\n```\n87% of \"out of capacity\" errors are actually quota limits, not infrastructure capacity. Check limits BEFORE launching to get accurate error messages.\n\n‚ùå **NEVER use console serial connection as primary access**\n- Creates security audit findings (bypasses SSH key controls)\n- Use only for boot troubleshooting when SSH fails\n- Delete connection immediately after troubleshooting\n\n‚ùå **NEVER mix regional and AD-specific resources in templates**\n- Breaks portability when moving between regions\n- Use AD-agnostic designs: spread via fault domains, not hardcoded ADs\n\n‚ùå **NEVER use default security lists in production**\n- Default allows 0.0.0.0/0 on all ports\n- Fails security audits, creates compliance violations\n- Always create custom security lists or NSGs\n\n‚ùå **NEVER forget boot volume preservation in dev/test**\n```bash\n# When terminating test instances, add:\noci compute instance terminate --instance-id <id> --preserve-boot-volume false\n```\nWithout this flag: $50+/month per deleted instance (orphaned boot volumes)\n\n‚ùå **NEVER enable public IP on production instances**\n- Use bastion service or private endpoints for access\n- Cost impact: $500-5000+ per security incident from exposed instances\n- Landing Zone Security Zones automatically block this pattern\n\n## Capacity Error Decision Tree\n\n```\n\"Out of host capacity for shape X\"?\n‚îÇ\n‚îú‚îÄ Check service limits FIRST (87% of cases)\n‚îÇ  ‚îî‚îÄ oci limits resource-availability get\n‚îÇ     ‚îú‚îÄ available = 0 ‚Üí Request limit increase (NOT capacity issue)\n‚îÇ     ‚îî‚îÄ available > 0 ‚Üí True capacity issue, continue below\n‚îÇ\n‚îú‚îÄ Same shape, different AD?\n‚îÇ  ‚îî‚îÄ Try each AD in region (PHX has 3, IAD has 3, each independent)\n‚îÇ\n‚îú‚îÄ Different shape, same series?\n‚îÇ  ‚îî‚îÄ E4 failed ‚Üí try E5 (newer gen, often more capacity)\n‚îÇ  ‚îî‚îÄ Standard failed ‚Üí try Optimized or DenseIO variants\n‚îÇ\n‚îú‚îÄ Different architecture?\n‚îÇ  ‚îî‚îÄ AMD ‚Üí ARM (A1.Flex often has capacity when Intel/AMD full)\n‚îÇ\n‚îî‚îÄ All ADs exhausted?\n   ‚îî‚îÄ Create capacity reservation (guarantees future launches)\n```\n\n## Shape Selection: Cost vs Performance\n\n**Budget-Critical** (save 50%):\n- VM.Standard.A1.Flex (ARM) if app supports: $0.01/OCPU/hr vs $0.03 (AMD)\n- Caveat: Not all software runs on ARM, test thoroughly\n\n**General Purpose** (balanced):\n- VM.Standard.E4.Flex: 2:16 CPU:RAM ratio, $0.03/OCPU/hr\n- Start: 2 OCPUs, scale based on metrics (not guesses)\n\n**Memory-Intensive** (databases, caches):\n- VM.Standard.E4.Flex with custom ratio: up to 1:64 CPU:RAM\n- Cost: $0.03/OCPU + $0.0015/GB RAM\n\n**Cost Trap**: Fixed shapes (e.g., VM.Standard2.1) often MORE expensive than Flex with same resources. Always compare Flex pricing first.\n\n## Instance Principal Authentication (Production)\n\nWhen instance needs to call OCI APIs (Object Storage, Vault, etc.):\n\n**WRONG** (user credentials on instance):\n```bash\n# Don't do this - credential management nightmare\nexport OCI_USER_OCID=\"ocid1.user...\"\n```\n\n**RIGHT** (instance principal):\n```bash\n# 1. Create dynamic group\noci iam dynamic-group create \\\n  --name \"app-instances\" \\\n  --matching-rule \"instance.compartment.id = '<compartment-ocid>'\"\n\n# 2. Grant permissions\n# \"Allow dynamic-group app-instances to read object-family in compartment X\"\n\n# 3. Code uses instance principal (no credentials needed):\nsigner = oci.auth.signers.InstancePrincipalsSecurityTokenSigner()\nclient = oci.object_storage.ObjectStorageClient(config={}, signer=signer)\n```\n\nBenefits: No credential rotation, no secrets to manage, automatic token refresh.\n\n## OCI-Specific Gotchas\n\n**Availability Domain Names Are Tenant-Specific**\n- Your AD: \"fMgC:US-ASHBURN-AD-1\"\n- Another tenant: \"ErKW:US-ASHBURN-AD-1\"\n- MUST query your tenant: `oci iam availability-domain list`\n\n**Boot Volume Backups Don't Include Instance Config**\n- Backup captures disk only, NOT shape/networking/metadata\n- For DR: Use custom images (captures everything) or Terraform for infrastructure\n\n**Instance Metadata Service Has 3 Versions**\n- v1: http://169.254.169.254/opc/v1/ (legacy)\n- v2: http://169.254.169.254/opc/v2/ (current, requires session token)\n- Always use v2 for security (prevents SSRF attacks)\n\n## Quick Cost Reference\n\n| Shape Family | $/OCPU/hr | $/GB RAM/hr | Best For |\n|--------------|-----------|-------------|----------|\n| A1.Flex (ARM) | $0.01 | $0.0015 | Cost-critical, ARM-compatible |\n| E4.Flex (AMD) | $0.03 | $0.0015 | General purpose |\n| E5.Flex (AMD) | $0.035 | $0.0015 | Latest gen, premium perf |\n| Optimized3.Flex | $0.025 | $0.0015 | Network-intensive |\n\n**Free Tier**: 2x AMD VM (1/8 OCPU, 1GB) + 4 ARM cores (24GB total) - always free\n\n**Calculation**: (OCPUs √ó $0.03 + GB √ó $0.0015) √ó 730 hours/month\n\nExample: 2 OCPU, 16GB = (2√ó$0.03 + 16√ó$0.0015) √ó 730 = **$61.32/month**\n\n## Progressive Loading References\n\n### OCI Compute Shapes Reference (Official Oracle Documentation)\n\n**WHEN TO LOAD** [`oci-compute-shapes-reference.md`](references/oci-compute-shapes-reference.md):\n- Need detailed specifications for specific shapes (memory limits, OCPU counts, network bandwidth)\n- Comparing flexible shapes (VM.Standard3.Flex vs E4.Flex vs E5.Flex vs E6.Flex vs A1/A2/A4.Flex)\n- Understanding extended memory VM instances\n- Researching bare metal shapes (BM.Standard3, BM.Standard.E4/E5/E6, BM.Standard.A1/A4)\n- Checking GPU shapes, Dense I/O shapes, or HPC-optimized shapes\n- Need official Oracle specifications for shape families\n\n**Do NOT load** for:\n- Quick cost comparisons (use Quick Cost Reference table in this skill)\n- \"Out of capacity\" troubleshooting (decision tree in this skill covers it)\n- Shape selection guidance (anti-patterns and recommendations in this skill)\n\n---\n\n## When to Use This Skill\n\n- Launching instances: shape selection, capacity planning\n- \"Out of capacity\" errors: decision tree, limit checking\n- Cost optimization: shape comparison, right-sizing\n- Security: instance principal setup, console connection proper use\n- Troubleshooting: boot failures, connectivity issues\n- Production: anti-patterns, operational gotchas\n",
        "skills/compute-management/references/oci-compute-shapes-reference.md": "- When a new region becomes available, it might take a few weeks before host capacity also becomes available.\n\nTo obtain a list of shapes available to you, run the [ListShapes](https://docs.oracle.com/iaas/api/#/en/iaas/latest/Shape/ListShapes) operation.\n\n- If your instance uses [stateful security rules](https://docs.oracle.com/iaas/Content/Network/Concepts/securityrules.htm#stateful), each instance has a [maximum number of concurrent connections](https://docs.oracle.com/iaas/Content/General/Concepts/servicelimits.htm#connection-tracking) that can be tracked, based on the instance's shape.\n\n## Compute Shape Pricing üîó\n\nYou can use the [Cost Estimator](https://www.oracle.com/cloud/cost-estimator.html) to estimate your expected monthly project costs with Oracle Cloud Infrastructure. For detailed information about billing, see [Billing and Cost Management](https://docs.oracle.com/iaas/Content/Billing/home.htm) and the Oracle Compute Cloud Services section of [Oracle PaaS and IaaS Universal Credits Service Descriptions](https://www.oracle.com/assets/paas-iaas-universal-credits-3940775.pdf).\n\nOCPUs and vCPUs\n\nOracle measures compute resource pricing differently. The Oracle CPU (OCPU) represents physical CPU cores and is the unit of measurement for CPUs on x86 CPUs (AMD and Intel) and Arm CPUs (OCI Ampere Compute). A virtual CPU (vCPU), the industry-standard for measuring compute resources, represents one execution thread of a physical CPU core.\n\nMost CPU architectures, including x86, runs two threads per physical core, so one OCPU is the equal of two vCPUs for x86-based compute. For OCI\nCompute, the minimum unit of provisioning starts from one OCPU on both X86 (Intel and AMD) and OCI Ampere Compute processors.\n\nThe following are the provisioning units for compute instances:\n\n- 1 OCPU on Arm A1 (Compute) = 1 core on Arm A1 (Compute) or 1 vCPU\n- 1 OCPU on Arm A2 (Compute) and A4 (Compute) = 2 cores on Arm A2 (Compute) and A4 (Compute) or 2 vCPUs\n- 1 OCPU on x86 (AMD and Intel) = 2 vCPUs\n\nFor more information, see [Cloud Price List](https://www.oracle.com/cloud/price-list.html#compute-vm). In addition, you can read this blog post on [vCPU and OCPU pricing information](https://blogs.oracle.com/cloud-infrastructure/post/vcpu-and-ocpu-pricing-information).\n\n## Flexible Shapes üîó\n\nA flexible shape is a shape that lets you customize the number of OCPUs and the amount of memory when launching or resizing your VM. When you [create a VM instance](https://docs.oracle.com/en-us/iaas/Content/Compute/Tasks/launchinginstance.htm \"Create a bare metal or virtual machine (VM) compute instance.\") using a flexible shape, you select the number of OCPUs and the amount of memory that you need for the workloads that run on the instance. The network bandwidth and number of VNICs scale proportionately with the number of OCPUs. This flexibility lets you build VMs that match your workload, enabling you to optimize performance and minimize cost.\n\nThe flexible shapes are:\n\n- VM.Standard3.Flex (Intel)\n- VM.Standard.E4.Flex (AMD)\n- VM.Standard.E5.Flex (AMD)\n- VM.Standard.E6.Flex (AMD)\n- VM.Standard.A1.Flex (Altra processor from Ampere)\n- VM.Standard.A2.Flex (AmpereOne processor from Ampere)\n- VM.Standard.A4.Flex (AmpereOne-M processor from Ampere)\n- VM.DenseIO.E4.Flex (AMD)\n- VM.Optimized3.Flex (Intel)\n\nFlexible memory is also available on flexible shapes. The amount of memory allowed is based on the number of OCPUs selected.\n\nFor [standard](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vm-standard) and [optimized](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vm-hpc-optimized) flexible shapes, the ratio of memory to OCPUs depends on the shape.\n\n| Shape | Maximum OCPUs | Minimum Memory | Maximum Memory |\n| --- | --- | --- | --- |\n| VM.Standard3.Flex | 32<br>See [Extended Memory VM Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/extended-memory-vm-instances.htm \"Extended memory virtual machine (VM) instances are VM instances that provide more memory and cores than available with standard shapes.\"). | 1 GB or a value matching the number of OCPUs, whichever is greater | 64 GB per OCPU, up to 512 GB total<br>See [Extended Memory VM Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/extended-memory-vm-instances.htm \"Extended memory virtual machine (VM) instances are VM instances that provide more memory and cores than available with standard shapes.\"). |\n| VM.Standard.E4.Flex | 64<br>See [Extended Memory VM Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/extended-memory-vm-instances.htm \"Extended memory virtual machine (VM) instances are VM instances that provide more memory and cores than available with standard shapes.\"). | 1 GB or a value matching the number of OCPUs, whichever is greater | 64 GB per OCPU, up to 1024 GB total<br>See [Extended Memory VM Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/extended-memory-vm-instances.htm \"Extended memory virtual machine (VM) instances are VM instances that provide more memory and cores than available with standard shapes.\"). |\n| VM.Standard.E5.Flex | 126 | 1 GB or a value matching the number of OCPUs, whichever is greater | 64 GB per OCPU, up to 1049 GB total |\n| VM.Standard.E6.Flex | 126 | 1 GB or a value matching the number of OCPUs, whichever is greater | 64 GB per OCPU, up to 1454 GB total |\n| VM.Standard.A1.Flex | 76<br>(OCPU is 1 core of an Altra processor) | 1 GB or a value matching the number of OCPUs, whichever is greater | 64 GB per OCPU, up to 472 GB total |\n| VM.Standard.A2.Flex | 78<br>(OCPU is 2 cores of an AmpereOne processor) | 1 GB or a value matching the number of OCPUs, whichever is greater | 64 GB per OCPU, up to 946 GB total |\n| VM.Standard.A4.Flex | 45<br>(OCPU is 2 cores of an AmpereOne-M processor) | 1 GB or a value matching the number of OCPUs, whichever is greater | 64 GB per OCPU, up to 700 GB total |\n| VM.Optimized3.Flex | 18 | 1 GB or a value matching the number of OCPUs, whichever is greater | 64 GB per OCPU, up to 256 GB total |\n\nFor [dense I/O](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vm-dense) flexible shapes, the following configurations are available:\n\n- 8 OCPUs, 128 GB memory\n- 16 OCPUs, 256 GB memory\n- 32 OCPUs, 512 GB memory\n\nThese resources are billed at a per-second granularity with a one-minute minimum.\nOptimize your costs by choosing the shape that matches your workload and by changing the\nshape when your workload changes. For example, you can configure the VM to maximize\ncompute processing power by choosing a low core-to-memory ratio. Or, for applications\nlike in-memory databases or big data processing engines, configure an instance with a\nhigh core-to-memory ratio. Modify the OCPUs and memory as your workload changes, scaling\nup to increase performance or scaling down to reduce costs.\n\n### Supported Images üîó\n\nMost [platform images](https://docs.oracle.com/en-us/iaas/Content/Compute/References/images.htm) are compatible with flexible shapes. Use a platform image that was published after the flexible shape was released (for release dates, see [the Compute release notes](https://docs.oracle.com/iaas/releasenotes/services/compute/)).\n\nCustom images are also supported, depending on the image. You must [add flexible shape compatibility to the custom image](https://docs.oracle.com/en-us/iaas/Content/Compute/Tasks/managingcustomimages.htm#Managing_Custom_Images__console-custom-image-tasks), and then test the image on the flexible shape to ensure that it actually works on the shape.\n\n### Supported Regions üîó\n\nFor a list of supported regions, see the [compute instance service limits](https://docs.oracle.com/iaas/Content/General/Concepts/servicelimits.htm#Compute_Instances). As host capacity becomes available in additional regions, the list is updated.\n\n**Note**\n\nCapacity might be limited for A1 shapes.\n\n## Extended Memory VM Instances üîó\n\n[Extended memory virtual machine (VM) instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/extended-memory-vm-instances.htm \"Extended memory virtual machine (VM) instances are VM instances that provide more memory and cores than available with standard shapes.\") are VM instances that provide more memory and cores than available with standard shapes.\n\nThe following shapes are available for extended memory VM instances:\n\n- VM.Standard3.Flex\n\n- VM.Standard.E3.Flex\n\n- VM.Standard.E4.Flex\n\n- VM.Standard.E5.Flex\n\n\n## Bare Metal Shapes üîó\n\nThe following shapes are available for bare metal instances:\n\n- [Standard Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#bm-standard)\n- [Dense I/O Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#bm-dense)\n- [GPU Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#bm-gpu)\n- [HPC and Optimized Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#bm-hpc-optimized)\n\nNetwork bandwidth is based on expected bandwidth for traffic within a VCN. To determine which [physical NICs are active for a shape](https://docs.oracle.com/iaas/Content/Network/Tasks/managingVNICs.htm#overview__How), refer to the network bandwidth specifications in the following tables. If the network bandwidth is listed as \"2 x <bandwidth> Gbps,\" it means that both NIC 0 and NIC 1 are active.\n\nFor bare metal instances, optionally [configure advanced BIOS settings](https://docs.oracle.com/en-us/iaas/Content/Compute/References/bios-settings.htm \"When you create a bare metal compute instance, you can optionally configure advanced BIOS settings that let you optimize performance. For example, you can disable simultaneous multithreading to optimize the NUMA settings.\"), such as disabling simultaneous multithreading, disabling cores, or optimizing the NUMA settings.\n\n### Standard Shapes üîó\n\nDesigned for general purpose workloads and suitable for a wide range of applications and use cases. Standard shapes provide a balance of cores, memory, and network resources. Standard shapes are available with Intel, AMD, and Arm-based processors.\n\nThese are the bare metal standard series:\n\n- **BM.Standard3:** X9-based standard compute. Processor: Intel Xeon Platinum 8358. Base frequency 2.6 GHz, max turbo frequency 3.4 GHz.\n- **BM.Standard.E4:** E4-based standard compute. Processor: AMD EPYC 7J13. Base frequency 2.55 GHz, max boost frequency 3.5 GHz.\n- **BM.Standard.E5:** E5-based standard compute. Processor: AMD EPYC 9J14. Base frequency 2.4 GHz, max boost frequency 3.7 GHz.\n- **BM.Standard.E6:** E6-based standard compute. Processor: AMD EPYC 9J45. Base frequency 2.7 GHz, max boost frequency 4.1 GHz.\n- **BM.Standard.A1:**\nOCI Ampere A1 Compute Arm-based standard compute. Each OCPU corresponds to a single hardware execution thread. Processor: Ampere Altra Q80-30. Max frequency 3.0 GHz.\n- **BM.Standard.A4:** OCI Ampere A4 Compute Arm-based standard compute. Each OCPU corresponds to two hardware execution threads (2 cores). Processor: Ampere AmpereOne-M A06-36M. Frequency 3.6 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| BM.Standard3.64 | 64 | 1024 | Block storage only | 2 x 50 Gbps | 256 | 129 (1 on the first physical NIC, 128 on the second) |\n| BM.Standard.E4.128 | 128 | 2048 | Block storage only | 2 x 50 Gbps | 256 | 129 (1 on the first physical NIC, 128 on the second) |\n| BM.Standard.E5.192 | 192 | 2304 | Block storage only | 1 x 100 Gbps | 256 | 129 (1 on the first physical NIC, 128 on the second) |\n| BM.Standard.E6.256 | 256 | 3072 | 2 x 960 GB NVMe<br>Block storage | 1 x 200 Gbps | 256 | 129 (1 on the first physical NIC, 128 on the second) |\n| BM.Standard.A1.160<br>See [Arm-Based Compute](https://docs.oracle.com/en-us/iaas/Content/Compute/References/arm.htm \"OCI Ampere Compute is a general-purpose, Arm-based compute platform based on the Ampere processor. OCI Ampere A1 Compute (based on Ampere Altra processors) and OCI Ampere A2 Compute (based on AmpereOne processors) instances provide superior price-performance, near linear scaling, built-in security due to the single-threaded core architecture, and a broad developer ecosystem.\"). | 160 | 1024 | Block storage only | 2 x 50 Gbps | 256 | Windows images are not supported on this shape. |\n| BM.Standard.A4.48<br>See [Arm-Based Compute](https://docs.oracle.com/en-us/iaas/Content/Compute/References/arm.htm \"OCI Ampere Compute is a general-purpose, Arm-based compute platform based on the Ampere processor. OCI Ampere A1 Compute (based on Ampere Altra processors) and OCI Ampere A2 Compute (based on AmpereOne processors) instances provide superior price-performance, near linear scaling, built-in security due to the single-threaded core architecture, and a broad developer ecosystem.\"). | 48 | 768 | 1 x 3.84TB NVMe<br>Block Storage | 1 x 100 Gbps | 256 | Windows images are not supported on this shape. |\n\n#### **C-States and Frequency Scaling** üîó\n\nModern CPUs transition to a power-saving state (called c-states) when the CPU is idle or underutilized. These c-states start at C0, which is the normal CPU operating mode (the CPU is 100% activated). The higher the c-state, the deeper the sleep mode into which the CPU transitions. The sleep modes work by cutting the clock signal and power from idle units inside the CPU, thereby reducing the energy use. As the CPU transitions to higher c-states (deeper sleep states), the longer it takes to wake up the units that are shut down. This is an undesirable side effect of c-states transitions, because it can slow down a demanding application.\n\nFortunately, the hypervisor on standard VM shapes manages this complexity for the end user by preventing transitions to deeper sleep states even when the CPU is underutilized. In addition, it disables c-states when it sees sustained high utilization. When c-states are disabled, the CPU operates in C0 state, where all cores are active at base frequency. Each processor manufacturer names the maximum frequency per core differently; for Intel the maximum frequency is named max turbo frequency, and for AMD it is called max boost frequency. This maximum frequency is realized by the respective CPU's built-in algorithms when the processor is running in C0 state under normal but sustained load.\n\nCurrently, the hypervisor does not allow the client operating system running in the instance to manage the c-states using kernel command line options. The client always shows the base frequency, even when the hypervisor is running the processor at the maximum frequency advertised by the processor.\n\n### Dense I/O Shapes üîó\n\nDesigned for large databases, big data workloads, and applications that require high-performance local storage. DenseIO shapes include locally-attached NVMe-based SSDs.\n\nThis is the bare metal dense I/O series:\n\n- **BM.DenseIO.E4:** E4-based dense I/O compute. Processor: AMD EPYC 7J13. Base frequency 2.55 GHz, max boost frequency 3.5 GHz.\n- **BM.DenseIO.E5:** E5-based dense I/O compute. Processor: AMD EPYC 9J14. Base frequency 2.6 GHz, max boost frequency 3.7 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| BM.DenseIO.E4.128 | 128 | 2048 | 54.4 TB NVMe SSD Storage (8 drives) | 2 x 50 Gbps | 256 | 129 (1 on the first physical NIC, 128 on the second) |\n| BM.DenseIO.E5.1281 | 128 | 1536 | 81.6TB NVMe SSD Storage (12 x 6.8TB drives) | 1 x 100Gbps | 256 | 129 (1 on the first physical NIC, 128 on the second) |\n\n**Notes**\n\n**1:** Please contact an [Oracle sales representative](https://www.oracle.com/corporate/contact/global.html) for additional details.\n\n### GPU Shapes üîó\n\nDesigned for hardware-accelerated workloads. GPU shapes include Intel, AMD, or Arm CPUs with NVIDIA or AMD graphics processors.\nSome bare metal GPU shapes support cluster networking.\n\nThese are the bare metal GPU series:\n\n- **BM.GPU2:** X7-based GPU compute.\n  - GPU: NVIDIA Tesla P100 16 GB\n  - CPU: Intel Xeon Platinum 8167M. Base frequency 2.0 GHz, max turbo frequency 2.4 GHz.\n- **BM.GPU3:** X7-based GPU compute.\n  - GPU: NVIDIA Tesla V100 16 GB\n  - CPU: Intel Xeon Platinum 8167M. Base frequency 2.0 GHz, max turbo frequency 2.4 GHz.\n- **BM.GPU4:** E3-based GPU compute.\n  - GPU: NVIDIA A100 40 GB\n  - CPU: AMD EPYC 7542. Base frequency 2.9 GHz, max boost frequency 3.4 GHz.\n- **BM.GPU.A10:** X9-based GPU compute.\n  - GPU: NVIDIA A10 24 GB\n  - CPU: Intel Xeon Platinum 8358. Base frequency 2.6 GHz, max turbo frequency 3.4 GHz.\n- **BM.GPU.A100:** E4-based GPU compute.\n  - GPU: NVIDIA A100 80 GB\n  - CPU: AMD EPYC 7J13. Base frequency 2.55 GHz, max boost frequency 3.7 GHz.\n- **BM.GPU.MI300X.8**: X10-based GPU compute.\n  - GPU: 8x MI300X 192 GB\n  - CPU: Intel Sapphire Rapids 8480+ 2x 56c. Base frequency 2 GHz, max boost frequency 3.8 GHz.\n- **BM.GPU.MI355X.8:** X10-based GPU compute.\n  - GPU: 8x MI355X 288 GB\n  - CPU: 2 x 64-core AMD 5th Gen AMD EPYC‚Ñ¢ Processors\n- **BM.GPU.L40S.4**\n  - GPU: 4x L40S 48 GB\n  - CPU: 2 x 56-core Intel Sapphire Rapids 8480+\n- **BM.GPU.H100.8:** X10-based GPU compute.\n  - GPU: 8x H100 80 GB\n  - CPU: Intel Sapphire Rapids 8480+ 2x 56c. Base frequency 2 GHz, max boost frequency 3.8 GHz.\n- **BM.GPU.H200.8**\n  - GPU: 8x NVIDIA H200 Tensor Core GPUs 141 GB\n  - CPU: 2 x 56-core Intel Sapphire Rapids 8480+\n- **BM.GPU.B200.8**\n  - GPU: 8x NVIDIA B200 Tensor Core GPUs 180 GB\n  - CPU: 2 x 64-core Intel Emerald Rapids 8592+\n- **BM.GPU.GB200.4**\n  - GPU: 4 x NVIDIA Blackwell B200 192 GB\n  - CPU: 2 x 72-core NVIDIA Grace\n- **BM.GPU.GB300.4**\n  - GPU: 4 x NVIDIA Blackwell B300 278 GB\n  - CPU: 2 x 72-core NVIDIA Grace\n\n| Shape | OCPU | GPU Memory (GB) | CPU Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n| BM.GPU2.2<br>(GPU: 2xP100) | 28 | 32 | 192 | Block storage only | 2 x 25 Gbps | 28 | 15 (1 on the first physical NIC, 14 on the second) |\n| BM.GPU3.8<br>(GPU: 8xV100) | 52 | 128 | 768 | Block storage only | 2 x 25 Gbps | 52 | 27 (1 on the first physical NIC, 26 on the second) |\n| BM.GPU4.8<br>(GPU: 8xA100) | 64 | 320 | 2048 | 27.2 TB NVMe SSD (4 drives) | 1 x 50 Gbps<br>8 x 200 Gbps RDMA | 64 | Windows images are not supported on this shape. |\n| BM.GPU.A10.4<br>(GPU: 4xA10) | 64 | 96 | 1024 | 7.68 TB NVMe SSD (2 drives) | 2 x 50 Gbps | 256 | Windows images are not supported on this shape. |\n| BM.GPU.A100-v2.8<br>(GPU: 8xA100) | 128 | 640 | 2048 | 27.2 TB NVMe SSD (4 drives) | 2 x 50 Gbps<br>16 x 100 Gbps RDMA | 256 | Windows images are not supported on this shape. |\n| BM.GPU.MI300X.8 | 112 | 1536 | 2048 | 8 x 3.84 GB NVMe | 1 x 100 Gbps<br>8 x 1 x 400 Gbps RDMA | 256 | Windows images are not supported on this shape. |\n| BM.GPU.MI355X.8 | 128 | 288 | 3072 | 8 x 7.68 GB NVMe | 2 x 200 Gbps<br>8 x 400 Gbps RDMA | 256 | Windows images are not supported on this shape. |\n| BM.GPU.L40S.4 | 112 | 192 | 1024 | 2 x 3.84 TB NVMe | 1 x 200 Gbps<br>800 Gbps RDMA | 256 | Windows images are not supported on this shape. |\n| BM.GPU.H100.8<br>(GPU: 8xH100) | 112 | 640 | 2048 | 16 x 3.84 TB NVMe | 1 x 100 Gbps<br>8 x 2 x 200 Gbps RDMA | 256 | Windows images are not supported on this shape. |\n| BM.GPU.H200.8<br>(GPU: 8xH200) | 112 | 1128 | 3072 | 8 x 3.84 TB NVMe | 1 x 200 Gbps<br>8 x 400 Gbps RDMA | 256 | Windows images are not supported on this shape. |\n| BM.GPU.B200.8<br>(GPU: 8xB200) | 128 | 1440 | 4096 | 8 x 3.84 TB NVMe | 2 x 200 Gbps<br>8 x 400 Gbps RDMA | 256 | Windows images are not supported on this shape. |\n| BM.GPU.GB200.4<br>(GPU: 4xB200) | 144 | 768 | 960 | 4 x 7.68 TB NVMe | 2 x 200 Gbps<br>4 x 400 Gbps RDMA | 512 | Windows images are not supported on this shape. |\n| BM.GPU.GB300.4<br>(GPU: 4xB300) | 144 | 1112 | 960 | 4 x 7.68 TB NVMe | 2 x 200 Gbps<br>4 x 800 Gbps RDMA | 512 | Windows images are not supported on this shape. |\n\n### HPC and Optimized Shapes üîó\n\nDesigned for high-performance computing workloads that require high frequency processor cores. Bare metal HPC and optimized shapes support cluster networking.\n\nThis is the bare metal optimized series:\n\n- **BM.Optimized3:** Processor: Intel Xeon 6354. Base frequency 3.0 GHz, max turbo frequency 3.6 GHz.\n- **BM.HPC.E5:** Processor: AMD EPYC 9J14. Base frequency 2.4 GHz, max boost frequency 3.7 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| BM.Optimized3.36 | 36 | 512 | 3.84 TB NVMe SSD (1 drive) | 2 X 50 Gbps<br>1 X 100 Gbps RDMA | 256 | 129 |\n| BM.HPC.E5.1441 | 144 | 768 | 3.84 TB NVMe SSD (1 drive) | 1 x 100Gbps<br> <br>1 x 100Gbps RDMA | 256 | 129 (1 on the first physical NIC, 128 on the second) |\n\n**Notes**\n\n**1:** Please contact an [Oracle sales representative](https://www.oracle.com/corporate/contact/global.html) for additional details.\n\n## Virtual Machine (VM) Shapes üîó\n\nThe following shapes are available for VMs:\n\n- [Standard Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vm-standard)\n- [Dense I/O Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vm-dense)\n- [GPU Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vm-gpu)\n- [HPC and Optimized Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vm-hpc-optimized)\n\nNetwork bandwidth is based on expected bandwidth for traffic within a VCN.\n\n### Standard Shapes üîó\n\nDesigned for general purpose workloads and suitable for a wide range of applications and use cases. Standard shapes provide a balance of cores, memory, and network resources. Standard shapes are available with Intel, AMD, and Arm-based processors.\n\nThese are the VM standard series:\n\n- **VM.Standard3:** X9-based standard compute. Processor: Intel Xeon Platinum 8358. Base frequency 2.6 GHz, max turbo frequency 3.4 GHz.\n- **VM.Standard.E2.1.Micro:** E2-based, E3-based, or E4-based standard compute. Oracle Cloud Infrastructure assigns one of the following processors:\n  - AMD EPYC 7551. Base frequency 2.0 GHz, max boost frequency 3.0 GHz.\n  - AMD EPYC 7742. Base frequency 2.25 GHz, max boost frequency 3.4 GHz.\n  - AMD EPYC 7J13. Base frequency 2.55 GHz, max boost frequency 3.5 GHz.\n- **VM.Standard.E4:** E4-based standard compute. Processor: AMD EPYC 7J13. Base frequency 2.55 GHz, max boost frequency 3.5 GHz.\n- **VM.Standard.E5:** E5-based standard compute. Processor: AMD EPYC 9J14. Base frequency 2.4 GHz, max boost frequency 3.7 GHz.\n- **VM.Standard.E6:** E6-based standard compute. Processor: AMD EPYC 9J45. Base frequency 2.7 GHz, max boost frequency 4.1 GHz.\n- **VM.Standard.A1:**\nOCI Ampere A1 Compute Arm-based standard compute. Each OCPU corresponds to a single hardware execution thread. Processor: Ampere Altra Q80-30. Max frequency 3.0 GHz.\n- **VM.Standard.A2:**\nOCI Ampere A2 Compute Arm-based standard compute. Each OCPU corresponds to two hardware execution threads (2 cores). Processor: Ampere AmpereOne A160-30. Max frequency 3.0 GHz.\n- **VM.Standard.A4:** OCI Ampere A4 Compute Arm-based standard compute. Each OCPU corresponds to two hardware execution threads (2 cores). Processor: Ampere AmpereOne-M A06-36M. Frequency 3.6 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk (TB) | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| VM.Standard3.Flex<br>See [Flexible Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#flexible) and [Burstable Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/burstable-instances.htm). | 1 minimum, 32 OCPU maximum<br>See [Extended Memory VM Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/extended-memory-vm-instances.htm \"Extended memory virtual machine (VM) instances are VM instances that provide more memory and cores than available with standard shapes.\"). | 1 GB minimum, 512 GB maximum<br>See [Extended Memory VM Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/extended-memory-vm-instances.htm \"Extended memory virtual machine (VM) instances are VM instances that provide more memory and cores than available with standard shapes.\"). | Block storage only | 1 Gbps per OCPU, maximum 32 Gbps | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. |\n| VM.Standard.E2.1.Micro | 1<br>See [Always Free Resources](https://docs.oracle.com/iaas/Content/FreeTier/freetier_topic-Always_Free_Resources.htm). | 1 | Block storage only | 480 Mbps | 1 | - |\n| VM.Standard.E4.Flex<br>See [Flexible Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#flexible) and [Burstable Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/burstable-instances.htm). | 1 OCPU minimum, 64 OCPU¬†maximum<br>See [Extended Memory VM Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/extended-memory-vm-instances.htm \"Extended memory virtual machine (VM) instances are VM instances that provide more memory and cores than available with standard shapes.\"). | 1 GB minimum, 1024 GB maximum<br>See [Extended Memory VM Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/extended-memory-vm-instances.htm \"Extended memory virtual machine (VM) instances are VM instances that provide more memory and cores than available with standard shapes.\"). | Block storage only | 1 Gbps per OCPU, maximum 40 Gbps | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. |\n| VM.Standard.E5.Flex<br>See [Flexible Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#flexible). | 1 OCPU minimum, 126 OCPU maximum | 1 GB minimum, 1049 GB maximum | Block storage only | 1 Gbps per OCPU, maximum 40 Gbps | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. |\n| VM.Standard.E6.Flex<br>See [Flexible Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#flexible). | 1 OCPU minimum, 126 OCPU maximum | 1 GB minimum, 1454 GB maximum | Block storage only | 1 Gbps per OCPU, maximum 99 Gbps | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. |\n| VM.Standard.A1.Flex<br>See [Flexible Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#flexible) and [Arm-Based Compute](https://docs.oracle.com/en-us/iaas/Content/Compute/References/arm.htm \"OCI Ampere Compute is a general-purpose, Arm-based compute platform based on the Ampere processor. OCI Ampere A1 Compute (based on Ampere Altra processors) and OCI Ampere A2 Compute (based on AmpereOne processors) instances provide superior price-performance, near linear scaling, built-in security due to the single-threaded core architecture, and a broad developer ecosystem.\"). | 1 OCPU minimum, 76 OCPU¬†maximum<br>See [Always Free Resources](https://docs.oracle.com/iaas/Content/FreeTier/freetier_topic-Always_Free_Resources.htm). | 1 GB minimum, 472 GB maximum | Block storage only | 1 Gbps per OCPU, maximum 40 Gbps | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. | Windows images are not supported on this shape. |\n| VM.Standard.A2.Flex<br>See [Flexible Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#flexible) and [Arm-Based Compute](https://docs.oracle.com/en-us/iaas/Content/Compute/References/arm.htm \"OCI Ampere Compute is a general-purpose, Arm-based compute platform based on the Ampere processor. OCI Ampere A1 Compute (based on Ampere Altra processors) and OCI Ampere A2 Compute (based on AmpereOne processors) instances provide superior price-performance, near linear scaling, built-in security due to the single-threaded core architecture, and a broad developer ecosystem.\"). | 1 OCPU minimum, 78 OCPU maximum | 1 GB minimum, 946 GB maximum | Block storage only | 1 Gbps per OCPU, maximum 78 Gbps | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. | Windows images are not supported on this shape. |\n| VM.Standard.A4.Flex<br>See [Flexible Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#flexible) and [Arm-Based Compute](https://docs.oracle.com/en-us/iaas/Content/Compute/References/arm.htm \"OCI Ampere Compute is a general-purpose, Arm-based compute platform based on the Ampere processor. OCI Ampere A1 Compute (based on Ampere Altra processors) and OCI Ampere A2 Compute (based on AmpereOne processors) instances provide superior price-performance, near linear scaling, built-in security due to the single-threaded core architecture, and a broad developer ecosystem.\"). | 1 OCPU minimum, 45 OCPU maximum | 1 GB minimum, 700 GB maximum | Block storage only | 1 Gbps per OCPU, maximum 100 Gbps | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. | Windows images are not supported on this shape. |\n\n### Dense I/O Shapes üîó\n\nDesigned for large databases, big data workloads, and applications that require high-performance local storage. DenseIO shapes include locally-attached NVMe-based SSDs.\n\nThis is the VM dense I/O series:\n\n- **VM.DenseIO.E4:** E4-based dense I/O compute. Processor: AMD EPYC 7J13. Base frequency 2.55 GHz, max boost frequency 3.5 GHz.\n- **VM.DenseIO.E5:** E5-based dense I/O compute. Processor: AMD EPYC 9J14. Base frequency 2.6 GHz, max boost frequency 3.7 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk (TB) | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| VM.DenseIO.E4.Flex<br>See [Flexible Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#flexible). | 8 | 128 | 6.8 TB NVMe SSD storage (1 drive) | 8 Gbps | 8 | 8 |\n| 16 | 256 | 13.6 TB NVMe SSD storage (2 drives) | 16 Gbps | 16 | 16 |\n| 32 | 512 | 27.2 TB NVMe SSD storage (4 drives) | 32 Gbps | 24 | 24 |\n| VM.DenseIO.E5.Flex1 | 8 | 96 | 6.8 TB NVMe SSD storage (1 drive) | 8 Gbps | 8 | 8 |\n| 16 | 192 | 13.6 TB NVMe SSD storage (2 drives) | 16 Gbps | 16 | 16 |\n| 24 | 288 | 20.4 TB NVMe SSD storage (3 drives) | 24 Gbps | 24 | 24 |\n| 32 | 384 | 27.2 TB NVMe SSD storage (4 drives) | 32 Gbps | 24 | 24 |\n| 40 | 480 | 34 TB NVMe SSD storage (5 drives) | 40 Gbps | 24 | 24 |\n| 48 | 576 | 40.8 TB NVMe SSD storage (6 drives) | 48 Gbps | 24 | 24 |\n\n**Notes**\n\n**1:** Please contact an [Oracle sales representative](https://www.oracle.com/corporate/contact/global.html) for additional details.\n\n### GPU Shapes üîó\n\nDesigned for hardware-accelerated workloads. GPU shapes include Intel, AMD, or Arm CPUs with NVIDIA or AMD graphics processors.\n\nThese are the VM GPU series:\n\n- **VM.GPU2:** X7-based GPU compute.\n  - GPU: NVIDIA Tesla P100 16 GB\n  - CPU: Intel Xeon Platinum 8167M. Base frequency 2.0 GHz, max turbo frequency 2.4 GHz.\n- **VM.GPU3:** X7-based GPU compute.\n  - GPU: NVIDIA Tesla V100 16 GB\n  - CPU: Intel Xeon Platinum 8167M. Base frequency 2.0 GHz, max turbo frequency 2.4 GHz.\n- **VM.GPU.A10:** X9-based GPU compute.\n  - GPU: NVIDIA A10 24 GB\n  - CPU: Intel Xeon Platinum 8358. Base frequency 2.6 GHz, max turbo frequency 3.4 GHz.\n\n| Shape | OCPU | GPU Memory (GB) | CPU Memory (GB) | Local Disk (TB) | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n| VM.GPU2.1<br>(GPU: 1xP100) | 12 | 16 | 72 | Block storage only | 8 Gbps | 12 | 12 |\n| VM.GPU3.1<br>(GPU: 1xV100) | 6 | 16 | 90 | Block storage only | 4 Gbps | 6 | 6 |\n| VM.GPU3.2<br>(GPU: 2xV100) | 12 | 32 | 180 | Block storage only | 8 Gbps | 12 | 12 |\n| VM.GPU3.4<br>(GPU: 4xV100) | 24 | 64 | 360 | Block storage only | 24.6 Gbps | 24 | 24 |\n| VM.GPU.A10.1<br>(GPU: 1xA10) | 15 | 24 | 240 | Block storage only | 24 Gbps | 15 | 15 |\n| VM.GPU.A10.2<br>(GPU: 2xA10) | 30 | 48 | 480 | Block storage only | 48 Gbps | 24 | 24 |\n\n### HPC and Optimized Shapes üîó\n\nDesigned for high-performance computing workloads that require high frequency processor cores.\n\nThis is the VM optimized series:\n\n- **VM.Optimized3:** Processor: Intel Xeon 6354. Base frequency 3.0 GHz, max turbo frequency 3.6 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| VM.Optimized3.Flex | 1 OCPU minimum, 18 OCPU¬†maximum | 1 GB minimum, 256 GB maximum | Block storage only | 4 Gbps per OCPU, maximum 40 Gbps | 2 VNICs per OCPU.<br>Maximum 24 VNICs. | 2 VNICs per OCPU.<br>Maximum 24 VNICs. |\n\n## Dedicated Virtual Machine Host Shapes üîó\n\n| Shape | Instance Type | Billed OCPU | Usable OCPU1 | Total Memory (GB)3 | Usable Memory (GB)1 | Supported Shapes for Hosted VMs |\n| --- | --- | --- | --- | --- | --- | --- |\n| DVH.Standard2.522 | X7-based VM host | 52 | 48 | 768 | 736 | VM.Standard2 series |\n| DVH.Standard3.64 | X9-based VM host | 64 | 60 | 1024 | 960 | VM.Standard3 series |\n| DVH.Standard.E2.642 | E2-based VM host | 64 | 59 | 512 | 480 | VM.Standard.E2 series |\n| DVH.Standard.E3.1282 | E3-based VM host | 128 | 124 | 2048 | 1912 | VM.Standard.E3 series |\n| DVH.Standard.E4.128 | E4-based VM host | 128 | 124 | 2048 | 1912 | VM.Standard.E4 series |\n| DVH.Standard.E5.192 | E5-based VM host | 192 | 188 | 2304 | 2098 | VM.Standard.E5 series |\n| DVH.DenseIO2.522 | X7-based dense I/O VM host | 52 | 48 | 768 | 736 | VM.DenseIO2 series |\n| DVH.Optimized3.36 | X9-based optimized VM host | 36 | 34 | 512 | 472 | VM.Optimized3 series |\n\n**Notes**\n\n**1:** The difference between total and usable OCPUs and memory is caused by the need to reserve OCPUs and memory for hypervisor use.\n\n**2:** Because this dedicated virtual machine host shape supports hosted VMs that use a [previous generation](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#previous-generation-shapes) shape series, it is available by request only.\n\n**3:** For Standard2, Standard.E2, and DenseIO2 shapes, billing is based on OCPUs, not memory. For all other shapes that support flexible hosted VMs, billing is based on OCPUs and memory, which are billed independently.\n\n## Previous Generation Shapes üîó\n\n**Tip**\n\nPrevious generation shapes are still fully supported. However, because the underlying hardware has reached the sustaining phase of its lifecycle, capacity in certain high-demand regions might be limited.\n\nOracle Cloud Infrastructure periodically releases new generations of Compute shapes. The latest shapes let you take advantage of newer hardware and a better price-performance ratio. When a shape is several years old, and newer generation shapes that are suited for the same purposes are available, the old shape transitions to become a previous generation shape.\n\nYour current utilization is fully supported on the previous generation shape. In certain high demand regions, you may need to plan your utilization growth on a newer generation shape.\n\n### Upgrading from a Previous Generation Shape üîó\n\nTo upgrade from a previous generation shape to a current generation shape, you can do the following things:\n\n- For supported VM instances, [change the shape of the instance](https://docs.oracle.com/en-us/iaas/Content/Compute/Tasks/resizinginstances.htm).\n- For bare metal instances and VM instances that don't support changing the shape, [terminate the instance but DO NOT delete the boot volume](https://docs.oracle.com/en-us/iaas/Content/Compute/Tasks/terminatinginstance.htm \"You can permanently delete (terminate) instances that you no longer need. Any attached VNICs and volumes are automatically detached when the instance terminates. Eventually, the instance's public and private IP addresses are released and become available for other instances.\"). Then, [use the boot volume to create a new instance](https://docs.oracle.com/en-us/iaas/Content/Compute/Tasks/launchinginstance.htm \"Create a bare metal or virtual machine (VM) compute instance.\").\n\n### Previous Generation Bare Metal Shapes üîó\n\nThese are the previous generation bare metal shape series.\n\n[BM.Standard1](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** BM.Standard3.64, BM.Standard.E4.128, or BM.Standard.A1.160\n\n**End of orderability date:** December 31, 2020\n\nX5-based standard compute. Processor:¬†Intel Xeon E5-2699 v3. Base frequency 2.3 GHz, max turbo frequency 3.6 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| BM.Standard1.36 | 36 | 256 | Block storage only | 1 x 10 Gbps | 100 | 1 |\n\n[BM.Standard.B1](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** BM.Standard3.64, BM.Standard.E4.128, or BM.Standard.A1.160\n\n**End of orderability date:** December 31, 2020\n\nX6-based standard compute. Processor: Intel Xeon E5-2699 v4. Base frequency 2.2 GHz, max turbo frequency 3.6 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| BM.Standard.B1.44 | 44 | 512 | Block storage only | 1 x 25 Gbps | 44 | None |\n\n[BM.Standard2](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** BM.Standard3.64, BM.Standard.E4.128, or BM.Standard.A1.160\n\n**End of orderability date:** February 28, 2022\n\nX7-based standard compute. Processor: Intel Xeon Platinum 8167M. Base frequency 2.0 GHz, max turbo frequency 2.4 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| BM.Standard2.52 | 52 | 768 | Block storage only | 2 x 25 Gbps | 200 | 101 total (1 on the first physical NIC, 100 on the second) |\n\n[BM.Standard.E2](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** BM.Standard3.64, BM.Standard.E4.128, or BM.Standard.A1.160\n\n**End of orderability date:** February 8, 2021\n\nE2-based standard compute. Processor: AMD EPYC 7551. Base frequency 2.0 GHz, max boost frequency 3.0 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| BM.Standard.E2.64 | 64 | 512 | Block storage only | 2 x 25 Gbps | 150 | 76 (1 on the first physical NIC, 75 on the second) |\n\n[BM.Standard.E3](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** BM.Standard.E4.128, BM.Standard3.64, or BM.Standard.A1.160\n\n**End of orderability date:** March 31, 2022\n\nE3-based standard compute. Processor: AMD EPYC 7742. Base frequency 2.25 GHz, max boost frequency 3.4 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| BM.Standard.E3.128 | 128 | 2048 | Block storage only | 2 x 50 Gbps | 256 | 129 (1 on the first physical NIC, 128 on the second) |\n\n[BM.DenseIO1](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** BM.DenseIO.E4\n\n**End of orderability date:** December 31, 2020\n\nX5-based dense I/O compute. Processor: Intel Xeon E5-2699 v3. Base frequency 2.3 GHz, max turbo frequency 3.6 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| BM.DenseIO1.36 | 36 | 512 | 28.8 TB NVMe SSD (9 drives) | 1 x 10 Gbps | 36 | 1 |\n\n[BM.DenseIO2](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** BM.DenseIO.E4\n\n**End of orderability date:** April 14, 2022\n\nX7-based dense I/O compute. Processor: Intel Xeon Platinum 8167M. Base frequency 2.0 GHz, max turbo frequency 2.4 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| BM.DenseIO2.52 | 52 | 768 | 51.2 TB NVMe SSD (8 drives) | 2 x 25 Gbps | 52 total (26 per physical NIC) | 27 total (1 on the first physical NIC, 26 on the second) |\n\n[BM.HPC2](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** BM.Optimized3.36\n\n**End of orderability date:** February 28, 2022\n\nX7-based high frequency compute. Processor: Intel Xeon Gold 6154. Base frequency 3.0 GHz, max turbo frequency 3.7 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| BM.HPC2.36 | 36 | 384 | 6.4 TB NVMe SSD (1 drive) | 1 x 25 Gbps<br>1 x 100 Gbps RDMA | 50 | 1 |\n\n### Previous Generation VM Shapes üîó\n\nThese are the previous generation VM shape series.\n\n[VM.Standard1](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** VM.Standard3.Flex, VM.Standard.E4.Flex, or VM.Standard.A1.Flex\n\n**End of orderability date:** December 31, 2020\n\nX5-based standard compute. Processor: Intel Xeon E5-2699 v3. Base frequency 2.3 GHz, max turbo frequency 3.6 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk (TB) | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| VM.Standard1.1 | 1 | 7 | Block storage only | 600 Mbps | 2 | 1 |\n| VM.Standard1.2 | 2 | 14 | Block storage only | 1.2 Gbps | 2 | 1 |\n| VM.Standard1.4 | 4 | 28 | Block storage only | 1.2 Gbps | 4 | 1 |\n| VM.Standard1.8 | 8 | 56 | Block storage only | 2.4 Gbps | 8 | 1 |\n| VM.Standard1.16 | 16 | 112 | Block storage only | 4.8 Gbps | 16 | 1 |\n\n[VM.Standard.B1](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** VM.Standard3.Flex, VM.Standard.E4.Flex, or VM.Standard.A1.Flex\n\n**End of orderability date:** December 31, 2020\n\nX6-based standard compute. Processor: Intel Xeon E5-2699 v4. Base frequency 2.2 GHz, max turbo frequency 3.6 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk (TB) | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| VM.Standard.B1.1 | 1 | 12 | Block storage only | 600 Mbps | 2 | 2 |\n| VM.Standard.B1.2 | 2 | 24 | Block storage only | 1.2 Gbps | 2 | 2 |\n| VM.Standard.B1.4 | 4 | 48 | Block storage only | 2.4 Gbps | 4 | 4 |\n| VM.Standard.B1.8 | 8 | 96 | Block storage only | 4.8 Gbps | 8 | 8 |\n| VM.Standard.B1.16 | 16 | 192 | Block storage only | 9.6 Gbps | 16 | 16 |\n\n[VM.Standard2](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** VM.Standard3.Flex, VM.Standard.E4.Flex, or VM.Standard.A1.Flex\n\n**End of orderability date:** February 28, 2022\n\nX7-based standard compute. Processor: Intel Xeon Platinum 8167M. Base frequency 2.0 GHz, max turbo frequency 2.4 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk (TB) | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| VM.Standard2.1 | 1 | 15 | Block storage only | 1 Gbps | 2 | 2 |\n| VM.Standard2.2 | 2 | 30 | Block storage only | 2 Gbps | 2 | 2 |\n| VM.Standard2.4 | 4 | 60 | Block storage only | 4.1 Gbps | 4 | 4 |\n| VM.Standard2.8 | 8 | 120 | Block storage only | 8.2 Gbps | 8 | 8 |\n| VM.Standard2.16 | 16 | 240 | Block storage only | 16.4 Gbps | 16 | 16 |\n| VM.Standard2.24 | 24 | 320 | Block storage only | 24.6 Gbps | 24 | 24 |\n\n[VM.Standard.E2](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** VM.Standard3.Flex, VM.Standard.E4.Flex, or VM.Standard.A1.Flex\n\n**End of orderability date:** February 8, 2021\n\nE2-based standard compute. Processor: AMD EPYC 7551. Base frequency 2.0 GHz, max boost frequency 3.0 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk (TB) | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| VM.Standard.E2.1 | 1 | 8 | Block storage only | 700 Mbps | 2 | 2 |\n| VM.Standard.E2.2 | 2 | 16 | Block storage only | 1.4 Gbps | 2 | 2 |\n| VM.Standard.E2.4 | 4 | 32 | Block storage only | 2.8 Gbps | 4 | 4 |\n| VM.Standard.E2.8 | 8 | 64 | Block storage only | 5.6 Gbps | 4 | 4 |\n\n[VM.Standard.E3](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** VM.Standard.E4.Flex, VM.Standard3.Flex, or VM.Standard.A1.Flex\n\n**End of orderability date:** March 31, 2022\n\nE3-based standard compute, with a flexible number of OCPUs. Processor: AMD EPYC 7742. Base frequency 2.25 GHz, max boost frequency 3.4 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk (TB) | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| VM.Standard.E3.Flex<br>See [Flexible Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#flexible) and [Burstable Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/burstable-instances.htm). | 1 OCPU minimum, 64 OCPU¬†maximum | 1 GB minimum, 1024 GB maximum | Block storage only | 1 Gbps per OCPU, maximum 40 Gbps | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. | VM with 1 OCPU: 2 VNICs.<br>VM with 2 or more OCPUs: 1 VNIC per OCPU.<br>Maximum 24 VNICs. |\n\n[VM.DenseIO1](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** VM.DenseIO.E4 series\n\n**End of orderability date:** December 31, 2020\n\nX5-based dense I/O compute. Processor: Intel Xeon E5-2699 v3. Base frequency 2.3 GHz, max turbo frequency 3.6 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk (TB) | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| VM.DenseIO1.4 | 4 | 60 | 3.2 TB NVMe SSD | 1.2 Gbps | 4 | 1 |\n| VM.DenseIO1.8 | 8 | 120 | 6.4 TB NVMe SSD | 2.4 Gbps | 8 | 1 |\n| VM.DenseIO1.16 | 16 | 240 | 12.8 TB NVMe SSD | 4.8 Gbps | 16 | 1 |\n\n[VM.DenseIO2](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#)\n\n**Newer shape recommendation:** VM.DenseIO.E4 series\n\n**End of orderability date:** April 28, 2022\n\nX7-based dense I/O compute. Processor: Intel Xeon Platinum 8167M. Base frequency 2.0 GHz, max turbo frequency 2.4 GHz.\n\n| Shape | OCPU | Memory (GB) | Local Disk (TB) | Max Network Bandwidth | Max VNICs Total: Linux | Max VNICs Total: Windows |\n| --- | --- | --- | --- | --- | --- | --- |\n| VM.DenseIO2.8 | 8 | 120 | 6.4 TB NVMe SSD | 8.2 Gbps | 8 | 8 |\n| VM.DenseIO2.16 | 16 | 240 | 12.8 TB NVMe SSD | 16.4 Gbps | 16 | 16 |\n| VM.DenseIO2.24 | 24 | 320 | 25.6 TB NVMe SSD | 24.6 Gbps | 24 | 24 |\n\nWas this article helpful?\n\nYesNo\n\n- Expand All Expandable Areas\n\n- [Compute Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#Compute_Shapes)\n- [Compute Shape Pricing](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#Compute_Shapes__pricing)\n- [Flexible Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#flexible)\n- [Supported Images](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#images)\n- [Supported Regions](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#regions)\n- [Extended Memory VM Instances](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#computeshapes_topic-extended-memory)\n- [Bare Metal Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#baremetalshapes)\n- [Standard Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#bm-standard)\n- [Dense I/O Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#bm-dense)\n- [GPU Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#bm-gpu)\n- [HPC and Optimized Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#bm-hpc-optimized)\n- [Virtual Machine (VM) Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vmshapes)\n- [Standard Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vm-standard)\n- [Dense I/O Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vm-dense)\n- [GPU Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vm-gpu)\n- [HPC and Optimized Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#vm-hpc-optimized)\n- [Dedicated Virtual Machine Host Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#dedicatedvmhost)\n- [Previous Generation Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#previous-generation-shapes)\n- [Upgrading from a Previous Generation Shape](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#previous-generation-shapes__upgrading-from-previous-generation)\n- [Previous Generation Bare Metal Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#previous-generation-shapes__previous-generation-bm)\n- [Previous Generation VM Shapes](https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm#previous-generation-shapes__previous-generation-vm)\n\nWas this article helpful?\n\nYesNo\n\n",
        "skills/database-management/SKILL.md": "---\nname: database-management\ndescription: Use when creating Autonomous Databases, troubleshooting connection failures, managing PDBs, or optimizing database costs. Covers connection string confusion, password validation errors, stop/start cost traps, clone type selection, and backup retention gotchas.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI Database Management - Expert Knowledge\n\n## üèóÔ∏è Use OCI Landing Zone Terraform Modules\n\n**Don't reinvent the wheel.** Use [oracle-terraform-modules/landing-zone](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones) for database infrastructure.\n\n**Landing Zone solves:**\n- ‚ùå Bad Practice #4: Poor network segmentation (Landing Zone isolates database tier)\n- ‚ùå Bad Practice #9: Public database endpoints (Security Zones enforce private subnets)\n- ‚ùå Bad Practice #10: No monitoring (Landing Zone auto-configures database alarms)\n\n**This skill provides**: ADB operations, troubleshooting, and cost optimization for databases deployed WITHIN a Landing Zone.\n\n---\n\n## ‚ö†Ô∏è OCI CLI/API Knowledge Gap\n\n**You don't know OCI CLI commands or OCI API structure.**\n\nYour training data has limited and outdated knowledge of:\n- OCI CLI syntax and parameters (updates monthly)\n- OCI API endpoints and request/response formats\n- Database service CLI operations (`oci db autonomous-database`)\n- Wallet configuration and connection string formats\n- Latest ADB features (23ai, 26ai) and API changes\n\n**When OCI operations are needed:**\n1. Use exact CLI commands from skill references\n2. Do NOT guess OCI CLI syntax or parameters\n3. Do NOT assume API endpoint structures\n4. Load oracle-dba skill for detailed ADB operations\n\n**What you DO know:**\n- Oracle Database internals (SQL, PL/SQL)\n- General database administration principles\n- Connection pooling and HA concepts\n\nThis skill bridges the gap by providing current OCI-specific database operations.\n\n---\n\nYou are an OCI Database expert. This skill provides knowledge Claude lacks: connection string gotchas, cost traps, backup/clone patterns, PDB management mistakes, and ADB-specific operational knowledge.\n\n## NEVER Do This\n\n‚ùå **NEVER use wrong connection service name (performance/cost impact)**\n```\nAutonomous Database provides 3 service names:\n- HIGH: Dedicated CPU, highest performance, **3x cost of LOW**\n- MEDIUM: Shared CPU, balanced\n- LOW: Most sharing, cheapest, sufficient for OLTP\n\n# WRONG - using HIGH for background jobs (expensive)\nconnection_string = adb_connection_strings[\"high\"]  # 3x cost!\n\n# RIGHT - match service to workload\nconnection_string = adb_connection_strings[\"low\"]  # Batch jobs, reporting\nconnection_string = adb_connection_strings[\"high\"]  # Critical transactions only\n```\n\n**Cost impact**: Using HIGH vs LOW for 24/7 connection pool: $220/month vs $73/month wasted (3x)\n\n‚ùå **NEVER assume stopped database = zero cost**\n```\n# WRONG assumption - \"stopped\" database is free\nStop ADB at night to save costs\n\n# Reality:\nStopped ADB charges:\n- Storage: $0.025/GB/month continues\n- Backups: Retention charges continue\n- Compute: ZERO (only part that stops)\n\nExample: 1TB ADB stopped 16 hrs/day\n- Compute savings: $584/month √ó 67% = $391 saved\n- Storage cost: $25.60/month (still charged)\n- Net savings: $391/month (not $610 expected)\n```\n\n‚ùå **NEVER ignore password complexity (ALWAYS fails)**\n```\nOCI Database password requirements (strict regex):\n- 12-30 characters\n- 2+ uppercase, 2+ lowercase\n- 2+ numbers, 2+ special (#-_)\n- NO username in password\n- NO repeating chars (aaa, 111)\n\n# WRONG - fails validation\n--admin-password \"MyPass123\"  # Only 1 special char, < 12 chars\n\n# RIGHT - meets requirements\n--admin-password \"MyP@ssw0rd#2024\"  # 2 upper, 2 lower, 2 num, 2 special, 16 chars\n```\n\n‚ùå **NEVER confuse clone types (performance/cost consequences)**\n```\n| Clone Type | Use Case | Cost | Refresh | When Source Deleted |\n|------------|----------|------|---------|---------------------|\n| **Full clone** | Prod ‚Üí Dev (one-time) | Full ADB cost | Cannot refresh | Clone survives |\n| **Refreshable clone** | Prod ‚Üí Test (weekly refresh) | Storage only (~30%) | Manual refresh | Clone deleted |\n| **Metadata clone** | Schema-only copy | Minimal | N/A | Clone survives |\n\n# WRONG - full clone for dev environment that needs weekly prod data\noci db autonomous-database create-from-clone-adb \\\n  --clone-type FULL  # Wastes $500/month, no refresh capability\n\n# RIGHT - refreshable clone for test environments\noci db autonomous-database create-refreshable-clone \\\n  # Costs $150/month storage, can refresh from prod weekly\n```\n\n**Cost trap**: Full clone for testing = $500/month vs $150/month for refreshable clone (70% savings)\n\n‚ùå **NEVER delete CDB without checking PDBs first**\n```\n# WRONG - deletes Container Database with PDBs inside (data loss)\noci db database delete --database-id <cdb-ocid>\n# All pluggable databases deleted with no warning!\n\n# RIGHT - check for PDBs first\noci db pluggable-database list --container-database-id <cdb-ocid>\n# If PDBs exist, decide: unplug, clone, or explicitly delete each\n```\n\n‚ùå **NEVER use ADMIN user in application code (security risk)**\n```\n# WRONG - application uses ADMIN credentials\napp_config = {\n    'user': 'ADMIN',\n    'password': admin_password  # Full database control!\n}\n\n# RIGHT - create app-specific user with least privilege\nCREATE USER app_user IDENTIFIED BY <password>;\nGRANT CONNECT, RESOURCE TO app_user;\nGRANT SELECT, INSERT, UPDATE ON app_schema.* TO app_user;\n# ADMIN only for DBA tasks, never in application code\n```\n\n‚ùå **NEVER forget Always-Free limits (scale-up fails)**\n```\nAlways-Free Autonomous Database limits:\n- 1 OCPU max (cannot scale beyond)\n- 20 GB storage max\n- 1 database per tenancy per region\n- NO private endpoints\n- NO auto-scaling\n\n# WRONG - trying to scale always-free database\noci db autonomous-database update \\\n  --autonomous-database-id <adb-ocid> \\\n  --cpu-core-count 2  # FAILS: Always-free max is 1 OCPU\n\n# RIGHT - convert to paid tier first, THEN scale\noci db autonomous-database update \\\n  --autonomous-database-id <adb-ocid> \\\n  --is-free-tier false  # Convert to paid\n# Now can scale to 2+ OCPUs\n```\n\n## Connection String Gotchas\n\n### Wallet Connection Failure Decision Tree\n\n```\n\"Connection refused\" or \"Wallet error\"?\n‚îÇ\n‚îú‚îÄ Wallet file issues?\n‚îÇ  ‚îú‚îÄ Check: TNS_ADMIN env variable set?\n‚îÇ  ‚îÇ  ‚îî‚îÄ export TNS_ADMIN=/path/to/wallet\n‚îÇ  ‚îú‚îÄ Check: sqlnet.ora has correct wallet location?\n‚îÇ  ‚îÇ  ‚îî‚îÄ WALLET_LOCATION = (SOURCE = (METHOD = file) (METHOD_DATA = (DIRECTORY=\"/path/to/wallet\")))\n‚îÇ  ‚îî‚îÄ Check: Wallet password correct?\n‚îÇ\n‚îú‚îÄ Network security?\n‚îÇ  ‚îú‚îÄ Private endpoint ADB?\n‚îÇ  ‚îÇ  ‚îî‚îÄ Check: Source IP in NSG/security list?\n‚îÇ  ‚îÇ  ‚îî‚îÄ Check: VPN/FastConnect for on-premises access?\n‚îÇ  ‚îî‚îÄ Public endpoint ADB?\n‚îÇ     ‚îî‚îÄ Check: Database whitelisted your IP? (Access Control List)\n‚îÇ\n‚îú‚îÄ Database state?\n‚îÇ  ‚îî‚îÄ Check: Lifecycle state = AVAILABLE (not STOPPED, UPDATING)?\n‚îÇ     ‚îî‚îÄ oci db autonomous-database get --autonomous-database-id <ocid> --query 'data.\"lifecycle-state\"'\n‚îÇ\n‚îî‚îÄ Service name wrong?\n   ‚îî‚îÄ Check: Using correct service name from tnsnames.ora?\n      ‚îî‚îÄ HIGH: <dbname>_high\n      ‚îî‚îÄ MEDIUM: <dbname>_medium\n      ‚îî‚îÄ LOW: <dbname>_low\n```\n\n### Service Name Selection (Cost vs Performance)\n\n| Service | CPU Allocation | Concurrency | Cost | Use For |\n|---------|---------------|-------------|------|---------|\n| **HIGH** | Dedicated OCPU | 1√ó OCPU count | 3√ó base | OLTP critical transactions, interactive queries |\n| **MEDIUM** | Shared OCPU | 2√ó OCPU count | 1√ó base | Batch jobs, reporting, most apps |\n| **LOW** | Most sharing | 3√ó OCPU count | 1√ó base | Background tasks, data loads |\n\n**Example**: 2 OCPU ADB\n- HIGH: 2 concurrent queries max, $584/month\n- MEDIUM: 4 concurrent queries, $584/month\n- LOW: 6 concurrent queries, $584/month (same cost, more concurrency)\n\n**Gotcha**: HIGH doesn't cost more in ADB pricing, but uses more OCPU-hours if you scale based on load.\n\n## Cost Optimization with Exact Calculations\n\n### Stop vs Scale Down Decision\n\n**Scenario**: Development ADB, 2 OCPUs, 1 TB storage, used 8 hrs/day weekdays only\n\n**Option 1: Stop when not in use** (16 hrs/day + weekends)\n```\nUsage: 8 hrs/day √ó 5 days = 40 hrs/week (24% utilization)\nCompute cost: $0.36/OCPU-hr √ó 2 √ó 40 √ó 4.3 weeks = $124/month\nStorage cost: $0.025/GB/month √ó 1000 = $25/month\nTotal: $149/month\n```\n\n**Option 2: Scale to 1 OCPU always-on**\n```\nCompute cost: $0.36/OCPU-hr √ó 1 √ó 730 hrs = $263/month\nStorage cost: $25/month\nTotal: $288/month\n```\n\n**Winner**: Stop/start saves $139/month (48% savings)\n\n### License Model Impact\n\n| Model | Cost | Use When |\n|-------|------|----------|\n| **License Included** | $0.36/OCPU-hr | No existing licenses |\n| **BYOL** | $0.18/OCPU-hr | Have Oracle DB licenses (50% off) |\n\n**Scenario**: 4 OCPU ADB, 24/7 production\n- License Included: $0.36 √ó 4 √ó 730 = $1,051/month\n- BYOL: $0.18 √ó 4 √ó 730 = $526/month\n- **Savings**: $525/month ($6,300/year) if you have licenses\n\n**Gotcha**: BYOL requires proof of licenses if audited\n\n### Auto-Scaling Cost Control\n\n```hcl\n# DANGER - unbounded auto-scaling\nresource \"oci_database_autonomous_database\" \"prod\" {\n  cpu_core_count = 2\n  is_auto_scaling_enabled = true  # Can scale to 3√ó (6 OCPUs!)\n}\n\n# Cost: 2 OCPUs √ó $0.36 √ó 730 = $526/month baseline\n# If auto-scales to 6 OCPUs during peak: $1,578/month (3√ó surprise bill!)\n\n# SAFER - set scaling limit\n# (Not available via API, must set in console: Manage Scaling ‚Üí Max OCPU count)\n```\n\n**Best practice**: Set max OCPU = 2√ó baseline to control costs (2 OCPU ‚Üí max 4 OCPU)\n\n## Backup and Clone Patterns\n\n### Automatic vs Manual Backup Retention\n\n**Automatic backups** (free):\n- Retention: 60 days default (configurable 1-60 days)\n- Frequency: Daily incremental\n- Cost: Included in ADB storage cost\n- **Gotcha**: Deleting ADB deletes automatic backups after retention period\n\n**Manual backups**:\n- Retention: Until you delete them\n- Cost: $0.025/GB/month (same as storage)\n- **Use case**: Long-term retention (compliance, legal hold)\n\n**Cost trap**:\n```\nScenario: 1 TB ADB, keep 2 years of backups for compliance\n\nWrong assumption: Automatic backups are free forever\nReality: Automatic backups deleted 60 days after ADB deletion\n\nRight approach: Manual backup before deleting ADB\nCost: $0.025/GB √ó 1000 GB √ó 24 months = $600 for 2-year retention\n```\n\n### Clone vs Refreshable Clone Decision\n\n| | Full Clone | Refreshable Clone |\n|---|------------|-------------------|\n| **Use case** | Permanent dev copy | Test env needing prod data |\n| **Cost** | 100% of source ADB | ~30% (storage only) |\n| **Refresh** | Cannot refresh | Manual refresh from source |\n| **When source deleted** | Clone survives | Clone auto-deleted |\n| **Editable** | Yes | Yes (but refresh overwrites) |\n\n**Gotcha**: Refreshable clone deleted when source ADB deleted - no warning!\n\n**Best practice**:\n- Dev environment (permanent): Full clone\n- QA environment (weekly prod refresh): Refreshable clone\n- Before prod migration: Full clone (survives source deletion)\n\n## PDB Management Gotchas\n\n**Hierarchy confusion**:\n```\nDB System or Exadata\n‚îî‚îÄ Container Database (CDB)\n   ‚îî‚îÄ Pluggable Database (PDB)  ‚Üê Application connects here\n      ‚îî‚îÄ Schemas, tables, etc.\n```\n\n**Critical**: PDB connection string uses CDB host but PDB service name\n```bash\n# WRONG - trying to connect to CDB\nsqlplus admin/pass@cdb-host:1521/ORCLCDB\n\n# RIGHT - connect to PDB inside CDB\nsqlplus app_user/pass@cdb-host:1521/PDB1\n```\n\n**PDB lifecycle gotcha**: Unplugging PDB doesn't delete data\n```bash\n# Unplug PDB ‚Üí creates XML metadata file\noci db pluggable-database unplug --pdb-id <ocid>\n# PDB still exists in storage, can re-plug elsewhere\n# Charges continue until DELETE\n```\n\n## Progressive Loading References\n\n### OCI Database Cloud Service CLI\n\n**WHEN TO LOAD** [`oci-dbcs-cli.md`](references/oci-dbcs-cli.md):\n- Creating or managing DB Systems (VM, RAC, Exadata)\n- Configuring Data Guard for disaster recovery\n- Patching and maintenance operations\n- Backup and recovery procedures\n- ExaDB-D and ExaDB-C@C operations\n\n**Do NOT load** for:\n- Autonomous Database operations (use oracle-dba skill)\n- Connection troubleshooting (decision tree above)\n- Cost calculations (tables above)\n\n### Official Oracle Documentation Sources\n\n**Primary References** (30+ official sources scraped):\n- [Autonomous Database Serverless](https://docs.oracle.com/en/cloud/paas/autonomous-database/serverless/)\n- [Database Cloud Service](https://docs.oracle.com/en-us/iaas/Content/Database/home.htm)\n- [Exadata Database Service](https://docs.oracle.com/en-us/iaas/exadata/index.html)\n- [Data Guard Configuration](https://docs.oracle.com/en/database/oracle/oracle-database/19/sbydb/)\n\n**Note**: Connection gotchas, password rules, and cost traps in this skill are derived from official Oracle docs\n\n---\n\n## When to Use This Skill\n\n- Connection issues: wallet errors, service name confusion, network troubleshooting\n- Cost optimization: stop/start decisions, BYOL evaluation, auto-scaling limits\n- Backup/clone: choosing clone type, retention planning, disaster recovery\n- PDB management: hierarchy, connection strings, unplug/plug operations\n- Password errors: complexity validation, ADMIN user restrictions\n- Scaling: Always-Free limits, when to scale vs stop, cost calculations\n",
        "skills/database-management/references/oci-dbcs-cli.md": "# OCI Database Cloud Service CLI Reference\n\n## Database System Operations\n\n### List Database Systems\n```bash\n# List all DB systems in compartment\noci db system list --compartment-id <compartment-ocid>\n\n# List with filters\noci db system list --compartment-id <compartment-ocid> \\\n  --lifecycle-state AVAILABLE \\\n  --display-name \"prod-*\"\n```\n\n### Create Database System\n```bash\n# Create VM DB System\noci db system launch \\\n  --compartment-id <compartment-ocid> \\\n  --availability-domain <ad-name> \\\n  --subnet-id <subnet-ocid> \\\n  --shape \"VM.Standard2.4\" \\\n  --cpu-core-count 4 \\\n  --database-edition \"ENTERPRISE_EDITION\" \\\n  --admin-password \"<secure-password>\" \\\n  --db-name \"MYDB\" \\\n  --db-version \"19.0.0.0\" \\\n  --display-name \"prod-db-1\" \\\n  --hostname \"prod-db-1\" \\\n  --initial-data-storage-size-in-gb 256 \\\n  --node-count 1 \\\n  --ssh-authorized-keys-file ~/.ssh/id_rsa.pub\n\n# Create RAC DB System (2 nodes)\noci db system launch \\\n  --compartment-id <compartment-ocid> \\\n  --availability-domain <ad-name> \\\n  --subnet-id <subnet-ocid> \\\n  --shape \"VM.Standard2.8\" \\\n  --cpu-core-count 8 \\\n  --cluster-name \"prodrac\" \\\n  --database-edition \"ENTERPRISE_EDITION_EXTREME_PERFORMANCE\" \\\n  --admin-password \"<secure-password>\" \\\n  --db-name \"RACDB\" \\\n  --db-version \"19.0.0.0\" \\\n  --display-name \"prod-rac-cluster\" \\\n  --hostname \"prod-rac\" \\\n  --initial-data-storage-size-in-gb 512 \\\n  --node-count 2 \\\n  --ssh-authorized-keys-file ~/.ssh/id_rsa.pub\n```\n\n### Scale Database System\n```bash\n# Scale CPU (online for Flex shapes)\noci db system update \\\n  --db-system-id <db-system-ocid> \\\n  --cpu-core-count 8\n\n# Scale storage (online)\noci db system update \\\n  --db-system-id <db-system-ocid> \\\n  --data-storage-size-in-gbs 512\n```\n\n### Database Operations\n```bash\n# List databases in a DB system\noci db database list \\\n  --compartment-id <compartment-ocid> \\\n  --db-system-id <db-system-ocid>\n\n# Create additional database in existing system\noci db database create \\\n  --db-system-id <db-system-ocid> \\\n  --admin-password \"<secure-password>\" \\\n  --db-name \"NEWDB\" \\\n  --db-version \"19.0.0.0\"\n\n# Delete database (CAUTION)\noci db database delete \\\n  --database-id <database-ocid> \\\n  --perform-final-backup true\n```\n\n## Backup and Recovery\n\n### Manual Backups\n```bash\n# Create manual backup\noci db backup create \\\n  --database-id <database-ocid> \\\n  --display-name \"pre-upgrade-backup\"\n\n# List backups\noci db backup list \\\n  --compartment-id <compartment-ocid> \\\n  --database-id <database-ocid>\n\n# Restore from backup\noci db database restore \\\n  --database-id <database-ocid> \\\n  --latest true\n\n# Restore to point-in-time\noci db database restore \\\n  --database-id <database-ocid> \\\n  --timestamp \"2024-01-15T10:30:00.000Z\"\n```\n\n### Automatic Backup Configuration\n```bash\n# Enable automatic backups\noci db database update \\\n  --database-id <database-ocid> \\\n  --auto-backup-enabled true \\\n  --recovery-window-in-days 30\n\n# Configure backup destination (custom)\noci db database update \\\n  --database-id <database-ocid> \\\n  --auto-backup-enabled true \\\n  --backup-destination '[{\"type\":\"OBJECT_STORE\"}]'\n```\n\n## Data Guard Configuration\n\n### Enable Data Guard\n```bash\n# Create standby database\noci db data-guard-association create \\\n  --database-id <primary-database-ocid> \\\n  --creation-type \"NewDbSystem\" \\\n  --database-admin-password \"<password>\" \\\n  --protection-mode \"MAXIMUM_PERFORMANCE\" \\\n  --transport-type \"ASYNC\" \\\n  --availability-domain <standby-ad> \\\n  --display-name \"standby-db-1\" \\\n  --hostname \"standby-db-1\" \\\n  --subnet-id <standby-subnet-ocid>\n\n# List Data Guard associations\noci db data-guard-association list \\\n  --database-id <database-ocid>\n```\n\n### Switchover and Failover\n```bash\n# Switchover (planned, no data loss)\noci db data-guard-association switchover \\\n  --database-id <primary-database-ocid> \\\n  --data-guard-association-id <association-ocid> \\\n  --database-admin-password \"<password>\"\n\n# Failover (emergency, potential data loss)\noci db data-guard-association failover \\\n  --database-id <standby-database-ocid> \\\n  --data-guard-association-id <association-ocid> \\\n  --database-admin-password \"<password>\"\n\n# Reinstate old primary as standby\noci db data-guard-association reinstate \\\n  --database-id <new-standby-database-ocid> \\\n  --data-guard-association-id <association-ocid> \\\n  --database-admin-password \"<password>\"\n```\n\n## Patching and Maintenance\n\n### View Available Patches\n```bash\n# List available patches\noci db patch list \\\n  --db-system-id <db-system-ocid>\n\n# Get patch details\noci db patch get \\\n  --patch-id <patch-ocid>\n```\n\n### Apply Patches\n```bash\n# Apply patch to DB system\noci db db-system-patch-history-entry list \\\n  --db-system-id <db-system-ocid>\n\n# Check patch history\noci db patch-history list \\\n  --db-system-id <db-system-ocid>\n```\n\n## ExaDB-D and ExaDB-C@C Operations\n\n### Exadata Infrastructure\n```bash\n# List Exadata infrastructures\noci db exadata-infrastructure list \\\n  --compartment-id <compartment-ocid>\n\n# Get Exadata infrastructure details\noci db exadata-infrastructure get \\\n  --exadata-infrastructure-id <infra-ocid>\n```\n\n### VM Clusters\n```bash\n# List VM clusters\noci db vm-cluster list \\\n  --compartment-id <compartment-ocid>\n\n# Create VM cluster\noci db vm-cluster create \\\n  --compartment-id <compartment-ocid> \\\n  --exadata-infrastructure-id <infra-ocid> \\\n  --vm-cluster-network-id <network-ocid> \\\n  --cpu-core-count 8 \\\n  --display-name \"prod-vmcluster\" \\\n  --gi-version \"19.0.0.0\" \\\n  --ssh-public-keys-file ~/.ssh/id_rsa.pub\n```\n\n## Common Troubleshooting\n\n### Connection Issues\n```bash\n# Verify DB system is running\noci db system get --db-system-id <ocid> --query \"data.\\\"lifecycle-state\\\"\"\n\n# Check listeners\noci db node list --compartment-id <id> --db-system-id <db-system-ocid>\n\n# Verify NSG rules\noci network nsg-security-rule list --nsg-id <nsg-ocid>\n```\n\n### Performance Diagnostics\n```bash\n# Get DB system metrics\noci monitoring metric-data summarize-metrics-data \\\n  --compartment-id <compartment-ocid> \\\n  --namespace \"oci_database\" \\\n  --query-text 'CpuUtilization[1m]{resourceId=\"<db-system-ocid>\"}.mean()'\n```\n\n## Cost Optimization Commands\n\n```bash\n# Find stopped DB systems (still incurring storage costs)\noci db system list --compartment-id <id> --lifecycle-state STOPPED\n\n# List DB systems by shape for right-sizing analysis\noci db system list --compartment-id <id> --query \"data[].{Name:\\\"display-name\\\",Shape:shape,CPUs:\\\"cpu-core-count\\\"}\"\n\n# Check backup storage usage\noci db backup list --compartment-id <id> --query \"data[].{DB:\\\"database-id\\\",Size:\\\"database-size-in-gbs\\\",Type:type}\"\n```\n",
        "skills/finops-cost-optimization/SKILL.md": "---\nname: finops-cost-optimization\ndescription: Use when optimizing OCI costs, investigating unexpected bills, planning budgets, or identifying waste. Covers hidden cost traps (boot volumes, reserved IPs, egress), Universal Credits gotchas, shape migration savings, free tier maximization, and cost allocation challenges.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI FinOps - Expert Knowledge\n\n## üèóÔ∏è Use OCI Landing Zone Terraform Modules\n\n**Don't reinvent the wheel.** Use [oracle-terraform-modules/landing-zone](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones) for cost-optimized infrastructure.\n\n**Landing Zone solves:**\n- ‚ùå Bad Practice #3: Internet breakout from spoke networks (Egress cost waste $3k-5k/month; Landing Zone uses hub-spoke with centralized NAT/Firewall)\n- ‚ùå Bad Practice #8: Creating your own Terraform modules (Maintenance cost; Landing Zone is Oracle-maintained, CIS-certified, no technical debt)\n- ‚ùå Bad Practice #10: No monitoring (Blind spending; Landing Zone auto-configures budget alerts, usage notifications, and cost tracking)\n\n**This skill provides**: Cost optimization strategies, hidden cost traps, and savings calculations for resources deployed WITHIN a Landing Zone.\n\n---\n\n## ‚ö†Ô∏è OCI CLI/API Knowledge Gap\n\n**You don't know OCI CLI commands or OCI API structure.**\n\nYour training data has limited and outdated knowledge of:\n- OCI CLI syntax and parameters (updates monthly)\n- OCI API endpoints and request/response formats\n- Cost Management CLI operations (`oci usage-api`)\n- Current OCI pricing (changes frequently)\n- Universal Credits consumption rates and SKUs\n\n**When OCI operations are needed:**\n1. Use exact CLI commands from skill references\n2. Do NOT guess OCI CLI syntax or parameters\n3. Do NOT assume current pricing - always verify\n4. Reference official Oracle pricing calculator\n\n**What you DO know:**\n- General cloud cost optimization principles\n- FinOps frameworks and methodologies\n- Resource right-sizing concepts\n\nThis skill bridges the gap by providing current OCI-specific cost traps and optimization patterns.\n\n---\n\nYou are an OCI cost optimization expert. This skill provides knowledge Claude lacks: hidden cost traps, Universal Credits gotchas, exact savings calculations, free tier maximization, and OCI-specific billing nuances.\n\n## NEVER Do This\n\n‚ùå **NEVER ignore orphaned boot volumes (silent cost drain)**\n```\n# Default OCI behavior: Boot volumes PRESERVED after instance termination\noci compute instance terminate --instance-id <ocid> --force\n# Instance deleted, but boot volume remains (charges continue!)\n\nCost trap:\n- Boot volume: 50 GB √ó $0.025/GB/mo = $1.25/month per instance\n- 20 terminated test instances = $25/month wasted\n- Over 1 year: $300 wasted on deleted instances\n\n# RIGHT - explicitly delete boot volume\noci compute instance terminate \\\n  --instance-id <ocid> \\\n  --preserve-boot-volume false  # Critical flag!\n\n# Or in Terraform:\nresource \"oci_core_instance\" \"dev\" {\n  preserve_boot_volume = false  # Must set explicitly\n}\n```\n\n**Cleanup strategy**: Monthly audit for unattached boot volumes older than 7 days\n\n‚ùå **NEVER forget reserved public IPs cost money when unattached**\n```\nCost: $0.01/hour = $7.30/month per IP\n\n# Common mistake: Reserve IP, detach from instance, forget to release\noci network public-ip create --lifetime RESERVED\n# Later: delete instance but IP remains reserved (charges continue)\n\nWasted cost example:\n- 5 old reserved IPs from deleted instances\n- 5 √ó $7.30/month = $36.50/month waste\n- Over 1 year: $438 wasted\n\n# RIGHT - use ephemeral IPs for temporary resources\noci network public-ip create --lifetime EPHEMERAL\n# Auto-deleted when instance terminated\n\n# Or release reserved IPs explicitly\noci network public-ip delete --public-ip-id <ocid>\n```\n\n**Detection**: List reserved IPs without instance attachment\n\n‚ùå **NEVER assume stopped resources = zero cost**\n```\nStopped Autonomous Database:\n‚úì Compute: Zero cost (stopped)\n‚úó Storage: $0.025/GB/mo continues\n‚úó Backups: Retention charges continue\n\nExample: 1 TB ADB stopped for 30 days\nStorage: 1000 GB √ó $0.025 = $25/month (charged!)\n\nStopped Compute Instance:\n‚úì Compute: Zero cost\n‚úó Boot volume: $0.025/GB/mo continues\n‚úó Block volumes: $0.025/GB/mo continues\n‚úó Reserved IP (if attached): $7.30/month continues\n\n# Better for long-term idle (>30 days): TERMINATE + backup\n# Restore from backup when needed\n```\n\n**Rule**: Stopped = compute paused, storage still charged\n\n‚ùå **NEVER ignore data egress costs (surprise bills)**\n```\nOCI egress pricing:\n- First 10 TB/month: FREE\n- 10-50 TB: $0.0085/GB\n- 50+ TB: Contact sales for discount\n\n# Common mistake: Large data export\noci os object bulk-download --bucket-name backups --download-dir /local\n# Downloading 15 TB = 5 TB chargeable √ó $0.0085/GB = $42,500 surprise!\n\n# Cheaper alternatives:\n1. Use OCI FastConnect (fixed cost, unlimited egress)\n2. Download within same region (free between OCI services)\n3. Export to another OCI region first (inter-region = free)\n\nCost comparison (15 TB export):\n- Internet egress: $42,500\n- FastConnect (1 Gbps): $1,100/month flat rate\n- Breakeven: 130 GB/month egress\n```\n\n**Gotcha**: Egress is FREE between OCI regions (intra-Oracle network)\n\n‚ùå **NEVER enable NAT Gateway without understanding costs**\n```\nNAT Gateway pricing:\n- Gateway itself: $0.01/hour = $7.30/month\n- Data processed: $0.01/GB\n\n# Mistake: Use NAT Gateway for high-traffic apps\nExample: Application with 5 TB/month outbound traffic\n- Gateway: $7.30/month\n- Data: 5000 GB √ó $0.01 = $50/month\n- Total: $57.30/month\n\n# Cheaper alternative: Public IP on instance (ephemeral IP = free)\nCost: $0/month for egress <10 TB\n\nWhen NAT Gateway makes sense:\n- Private subnets with <100 GB/month egress\n- Security requirement (no public IPs on instances)\n\nWhen to avoid:\n- High-traffic egress (use public IPs instead)\n- Low-security dev/test environments\n```\n\n‚ùå **NEVER over-commit with Universal Credits**\n```\nUniversal Credits gotcha:\n- Credits are NON-TRANSFERABLE between service categories\n  * Compute credits ‚Üí can only pay for compute\n  * Database credits ‚Üí can only pay for database\n  * Cannot move credits between categories\n\n# Mistake: Commit to $10k/month compute credits\n# Reality: Only use $6k/month compute\n# Cannot use $4k surplus for database spending\n# Result: Waste $4k/month ($48k/year)\n\n# RIGHT - commit conservatively based on baseline usage\nAnalyze 3-6 months historical usage\nCommit to 70-80% of baseline (not peak)\n\nExpiration gotcha:\n- Monthly credits expire end of month\n- Cannot roll over to next month\n- Use-it-or-lose-it model\n```\n\n‚ùå **NEVER trust forecast budgets (30-40% error rate)**\n```\nOCI Budget types:\n1. ACTUAL: Alerts on actual spending (accurate)\n2. FORECAST: Alerts on projected spending (often wrong)\n\n# Problem: Forecast uses simple linear projection\nExample:\n- Week 1: $100 spend\n- Forecast for month: $100 √ó 4 = $400\n- Reality: Week 1 included one-time data migration\n- Actual month: $150 total\n- Forecast error: 167% over-prediction\n\n# WRONG - rely on forecast alerts\nAlert at 80% forecast ‚Üí fires prematurely\n\n# RIGHT - use actual spend alerts at multiple thresholds\nAlert at 50% actual, 75% actual, 90% actual, 100% actual\n```\n\n**Best practice**: Use FORECAST for trends, ACTUAL for budgeting\n\n## Cost Optimization Strategies\n\n### Shape Migration Savings (Exact Calculations)\n\n**Fixed ‚Üí Flex Shape Migration**\n\n```\nLegacy fixed shape:\nVM.Standard2.4: 4 OCPUs, 60 GB RAM (fixed ratio 1:15)\nCost: $0.06/hr √ó 4 = $0.24/hr = $175/month\n\nFlex shape (right-sized):\nVM.Standard.E4.Flex: 4 OCPUs, 16 GB RAM (custom ratio)\nCost: ($0.02/OCPU-hr √ó 4) + ($0.0015/GB-hr √ó 16) = $0.104/hr = $76/month\n\nSavings: $99/month per instance (56% reduction)\n\nMigration path:\n1. Create flex instance with same OCPU count\n2. Test with minimal RAM (4 GB per OCPU)\n3. Increase RAM only if needed\n4. Delete fixed instance\n```\n\n**AMD ‚Üí Arm Migration**\n\n```\nAMD instance:\nVM.Standard.E4.Flex: 4 OCPUs, 16 GB RAM\nCost: $0.02/OCPU-hr √ó 4 √ó 730 = $58.40/month\n\nArm instance (same workload):\nVM.Standard.A1.Flex: 4 OCPUs, 16 GB RAM\nCost: $0.01/OCPU-hr √ó 4 √ó 730 = $29.20/month\n\nSavings: $29.20/month per instance (50% reduction)\n\nGotcha: ARM64 architecture (not all apps compatible)\nCheck: Docker images available for ARM64?\n```\n\n### Free Tier Maximization\n\n**Exact cost avoidance** (what you DON'T pay):\n\n```\nAlways-Free tier value if fully utilized:\n\nCompute:\n- 2 AMD Micro VMs: 2 √ó $7/month = $14/month\n- 4 Arm OCPUs (24 GB): 4 √ó $7.30/month = $29.20/month\nSubtotal: $43.20/month\n\nDatabase:\n- 2 Autonomous Databases: 2 √ó $292/month = $584/month\n\nStorage:\n- 200 GB block: $5/month\n- 10 GB object: $0.26/month\n- 10 GB archive: $0.02/month\nSubtotal: $5.28/month\n\nNetworking:\n- 1 load balancer: $10/month\n- 10 TB egress: $85/month\nSubtotal: $95/month\n\nTOTAL COST AVOIDED: $727.48/month ($8,730/year)\n```\n\n**Gotcha**: 2 ADB limit is TENANCY-wide (not per region/compartment)\n\n### Storage Lifecycle Optimization\n\n**Automated tiering savings**:\n\n```\nScenario: 10 TB compliance data, accessed quarterly\n\nWithout tiering (all Standard):\n10,000 GB √ó $0.0255/GB/mo = $255/month = $3,060/year\n\nWith tiering (Archive after 30 days):\nMonth 1 (Standard): 10,000 GB √ó $0.0255 = $255\nMonths 2-12 (Archive): 10,000 GB √ó $0.0024 √ó 11 = $264\nTotal year: $519\n\nSavings: $2,541/year (83% reduction)\n\nLifecycle policy:\n- Day 0-30: Standard (frequent access window)\n- Day 31+: Archive (compliance retention)\n- Retrieval cost: $0.01/GB (acceptable for quarterly access)\n```\n\n### Compute Auto-Shutdown Savings\n\n**Dev/test environment automation**:\n\n```\nScenario: 10 development instances, 2 OCPUs each\nRunning 24/7: 10 √ó 2 √ó $0.02/hr √ó 730 = $292/month\n\nAuto-shutdown (weekdays 9am-6pm only):\nUsage: 9 hours/day √ó 5 days = 45 hours/week = 195 hours/month\nCost: 10 √ó 2 √ó $0.02/hr √ó 195 = $78/month\n\nSavings: $214/month (73% reduction)\n\nImplementation:\n1. Tag instances: Environment=Development\n2. Create Functions for start/stop\n3. Schedule with OCI Events:\n   - Start: Weekdays 9am\n   - Stop: Weekdays 6pm\n```\n\n## Universal Credits Gotchas\n\n**Credit categories** (non-transferable):\n\n| Category | Services Included | Typical Use |\n|----------|------------------|-------------|\n| **Compute** | VM, bare metal, container instances, OKE | Applications, workloads |\n| **Database** | ADB, DB Systems, Exadata, MySQL | Data storage, transactions |\n| **Storage** | Block, object, file, archive | Backups, data lakes |\n| **Network** | Load balancer, FastConnect, NAT GW | Connectivity, egress |\n\n**Commitment trap**:\n\n```\nScenario: Commit to $5k/month database credits\nMonth 1-3: Use only $3k/month (waste $2k/month)\nCannot: Transfer $2k to compute spending\nResult: Waste $6k over 3 months\n\nBetter approach:\n1. Analyze 6 months baseline usage per category\n2. Commit to 70% of baseline (room for variance)\n3. Over-commit only if growth guaranteed\n```\n\n**Expiration**: Monthly credits = use-it-or-lose-it (no rollover)\n\n## Cost Allocation Challenges\n\n**Shared resource allocation** (OCI-specific):\n\n```\nProblem: How to allocate costs for shared VCN?\n\nVCN costs:\n- DRG: $0.01/hr = $7.30/month\n- NAT Gateway: $0.01/hr + $0.01/GB = variable\n- FastConnect: $1,100/month (1 Gbps)\n\nAllocation strategies:\n1. Equal split: $1,107.30 / N teams\n2. Usage-based: Track egress per team (requires tagging)\n3. Chargeback: Production pays 100%, dev/test free\n\nGotcha: OCI doesn't auto-allocate shared resource costs\nMust implement manual showback/chargeback process\n```\n\n**Load balancer cost allocation**:\n\n```\nProblem: Multiple apps share 1 load balancer\n\nLB costs:\n- Flexible LB: $10/month + $0.008/LCU-hour\n- Bandwidth: $0.01/GB processed\n\nAllocation approach:\n1. Tag backends by team (freeform_tags.Team)\n2. Estimate traffic % per team (monitoring metrics)\n3. Allocate LB cost proportionally\n\nExample:\n- Total LB cost: $50/month\n- Team A: 60% traffic ‚Üí $30/month\n- Team B: 40% traffic ‚Üí $20/month\n```\n\n## Budget Best Practices\n\n**Multi-threshold alerts**:\n\n```\n# Best practice: Set 4 alert levels\noci budgets alert-rule create \\\n  --budget-id <ocid> \\\n  --type ACTUAL \\\n  --threshold 50 \\\n  --recipients \"team@example.com\"\n\noci budgets alert-rule create \\\n  --budget-id <ocid> \\\n  --type ACTUAL \\\n  --threshold 80 \\\n  --recipients \"team@example.com,manager@example.com\"\n\noci budgets alert-rule create \\\n  --budget-id <ocid> \\\n  --type ACTUAL \\\n  --threshold 90 \\\n  --recipients \"team@example.com,manager@example.com,finance@example.com\"\n\noci budgets alert-rule create \\\n  --budget-id <ocid> \\\n  --type ACTUAL \\\n  --threshold 100 \\\n  --recipients \"team@example.com,manager@example.com,finance@example.com\"\n\nAlert strategy:\n50%: FYI to team (informational)\n80%: Action required (investigate spike)\n90%: Escalation to management\n100%: Finance involved (budget exceeded)\n```\n\n**Gotcha**: Budgets are ALERTING only, not enforcement (cannot block spending)\n\n## Hidden Cost Detection\n\n**Monthly audit checklist**:\n\n```bash\n# 1. Orphaned boot volumes (cost trap #1)\noci bv boot-volume list --all --lifecycle-state AVAILABLE \\\n  | grep -v \"attached-instance\"\n\n# 2. Unattached block volumes\noci bv volume list --all --lifecycle-state AVAILABLE\n\n# 3. Reserved IPs without instance\noci network public-ip list --scope REGION --lifetime RESERVED\n\n# 4. Stopped instances with volumes\noci compute instance list --lifecycle-state STOPPED\n\n# 5. Old snapshots/backups\noci bv backup list --all \\\n  | jq '.data[] | select(.[\"time-created\"] < \"2024-01-01\")'\n\n# 6. Unused load balancers (no backends)\noci lb load-balancer list --all\n\n# 7. Empty Object Storage buckets\noci os bucket list --all --fields approximateCount,approximateSize\n```\n\n**Estimated monthly savings**: $100-500 for typical tenancy (cleanup waste)\n\n## Progressive Loading References\n\n### OCI Cost Management CLI\n\n**WHEN TO LOAD** [`oci-cost-cli.md`](references/oci-cost-cli.md):\n- Setting up budgets and alert rules\n- Querying usage reports via CLI\n- Managing service limits and quotas\n- Implementing tagging for cost allocation\n- Downloading detailed cost reports\n\n**Do NOT load** for:\n- Quick cost calculations (tables and examples above)\n- Understanding cost traps (NEVER list above)\n- Shape pricing comparisons (covered above)\n\n### Official Oracle Documentation Sources\n\n**Primary References** (200+ official sources scraped):\n- [Billing and Cost Management Overview](https://docs.oracle.com/en-us/iaas/Content/Billing/Concepts/billingoverview.htm)\n- [Cost Reports Overview](https://docs.oracle.com/en-us/iaas/Content/Billing/Concepts/costusagereportsoverview.htm)\n- [Budgets Overview](https://docs.oracle.com/en-us/iaas/Content/Billing/Concepts/budgetsoverview.htm)\n- [Cost Management Best Practices](https://docs.oracle.com/en-us/iaas/Content/cloud-adoption-framework/era-cost-management.htm)\n- [OCI FinOps Hub](https://docs.oracle.com/en-us/iaas/Content/Billing/Concepts/FinOps.htm)\n- [Cloud Advisor (Cost Optimization)](https://docs.oracle.com/en-us/iaas/Content/CloudAdvisor/home.htm)\n\n**Note**: All cost calculations, traps, and gotchas in this skill are derived from these official sources and A-Team Oracle blog\n\n---\n\n## When to Use This Skill\n\n- Unexpected bills: Investigating charges, finding cost spikes\n- Budget planning: Estimating costs, setting budgets, forecasting\n- Cost optimization: Right-sizing, waste reduction, shape migration\n- Free tier: Maximizing always-free usage, avoiding over-provisioning\n- Universal Credits: Commitment planning, credit allocation\n- Cost allocation: Showback, chargeback, shared resource costs\n- Savings calculations: Comparing options, ROI analysis\n",
        "skills/finops-cost-optimization/references/oci-cost-cli.md": "# OCI Cost Management CLI Reference\n\n## Cost Analysis\n\n### Usage Reports\n```bash\n# List usage reports (requires tenancy-level permissions)\noci usage-api usage-summary request-summarized-usages \\\n  --tenant-id <tenancy-ocid> \\\n  --time-usage-started \"2024-01-01T00:00:00Z\" \\\n  --time-usage-ended \"2024-01-31T23:59:59Z\" \\\n  --granularity \"DAILY\"\n\n# Get usage by service\noci usage-api usage-summary request-summarized-usages \\\n  --tenant-id <tenancy-ocid> \\\n  --time-usage-started \"2024-01-01T00:00:00Z\" \\\n  --time-usage-ended \"2024-01-31T23:59:59Z\" \\\n  --granularity \"MONTHLY\" \\\n  --group-by '[\"service\"]'\n\n# Get usage by compartment\noci usage-api usage-summary request-summarized-usages \\\n  --tenant-id <tenancy-ocid> \\\n  --time-usage-started \"2024-01-01T00:00:00Z\" \\\n  --time-usage-ended \"2024-01-31T23:59:59Z\" \\\n  --granularity \"MONTHLY\" \\\n  --group-by '[\"compartmentPath\"]'\n\n# Get usage by tag\noci usage-api usage-summary request-summarized-usages \\\n  --tenant-id <tenancy-ocid> \\\n  --time-usage-started \"2024-01-01T00:00:00Z\" \\\n  --time-usage-ended \"2024-01-31T23:59:59Z\" \\\n  --granularity \"MONTHLY\" \\\n  --group-by '[\"tagKey\"]' \\\n  --filter '{\"operator\":\"AND\",\"dimensions\":[{\"key\":\"tagNamespace\",\"value\":\"Organization\"}]}'\n```\n\n## Budget Management\n\n### Create Budgets\n```bash\n# Create monthly compartment budget\noci budgets budget create \\\n  --compartment-id <compartment-ocid> \\\n  --target-type \"COMPARTMENT\" \\\n  --targets '[\"<target-compartment-ocid>\"]' \\\n  --amount 10000 \\\n  --reset-period \"MONTHLY\" \\\n  --display-name \"dev-monthly-budget\"\n\n# Create tag-based budget\noci budgets budget create \\\n  --compartment-id <tenancy-ocid> \\\n  --target-type \"TAG\" \\\n  --targets '[\"Organization.CostCenter.Engineering\"]' \\\n  --amount 50000 \\\n  --reset-period \"MONTHLY\" \\\n  --display-name \"engineering-budget\"\n```\n\n### Budget Alerts\n```bash\n# Create budget alert rule (80% threshold)\noci budgets alert-rule create \\\n  --budget-id <budget-ocid> \\\n  --type \"ACTUAL\" \\\n  --threshold 80 \\\n  --threshold-type \"PERCENTAGE\" \\\n  --recipients \"team@example.com,alerts@example.com\" \\\n  --display-name \"80-percent-alert\"\n\n# Create forecast alert\noci budgets alert-rule create \\\n  --budget-id <budget-ocid> \\\n  --type \"FORECAST\" \\\n  --threshold 100 \\\n  --threshold-type \"PERCENTAGE\" \\\n  --recipients \"finance@example.com\" \\\n  --display-name \"forecast-breach-alert\"\n```\n\n### List and Monitor Budgets\n```bash\n# List all budgets\noci budgets budget list --compartment-id <tenancy-ocid> --all\n\n# Get budget status\noci budgets budget get --budget-id <budget-ocid>\n\n# List alert rules for a budget\noci budgets alert-rule list --budget-id <budget-ocid>\n```\n\n## Service Limits\n\n### View Service Limits\n```bash\n# List all service limits\noci limits definition list --compartment-id <tenancy-ocid> --all\n\n# Get specific service limits\noci limits definition list \\\n  --compartment-id <tenancy-ocid> \\\n  --service-name \"compute\"\n\n# Check limit values\noci limits value list \\\n  --compartment-id <tenancy-ocid> \\\n  --service-name \"compute\" \\\n  --scope-type \"AD\" \\\n  --availability-domain <ad-name>\n\n# Check resource availability\noci limits resource-availability get \\\n  --compartment-id <compartment-ocid> \\\n  --service-name \"compute\" \\\n  --limit-name \"vm-standard-e4-flex-core-count\" \\\n  --availability-domain <ad-name>\n```\n\n### Request Limit Increase\n```bash\n# Create limit increase request\noci support incident create \\\n  --compartment-id <tenancy-ocid> \\\n  --csi \"<customer-support-identifier>\" \\\n  --problem-type \"tech\" \\\n  --severity \"normal\" \\\n  --title \"Service Limit Increase Request: Compute Cores\" \\\n  --description \"Request to increase VM.Standard.E4.Flex core count from 100 to 200\"\n```\n\n## Resource Discovery for Cost Optimization\n\n### Find Idle Resources\n```bash\n# Find stopped instances (still charged for boot volumes)\noci compute instance list \\\n  --compartment-id <compartment-ocid> \\\n  --lifecycle-state STOPPED \\\n  --query \"data[].{Name:\\\"display-name\\\",Shape:shape,Created:\\\"time-created\\\"}\"\n\n# Find unattached block volumes\noci bv volume list \\\n  --compartment-id <compartment-ocid> \\\n  --lifecycle-state AVAILABLE \\\n  --query \"data[?!\\\"volume-attachments\\\"].{Name:\\\"display-name\\\",SizeGB:\\\"size-in-gbs\\\"}\"\n\n# Find orphaned boot volumes (no instance)\noci bv boot-volume list \\\n  --compartment-id <compartment-ocid> \\\n  --availability-domain <ad-name> \\\n  --query \"data[].{Name:\\\"display-name\\\",SizeGB:\\\"size-in-gbs\\\",State:\\\"lifecycle-state\\\"}\"\n```\n\n### Find Over-Provisioned Resources\n```bash\n# Get CPU utilization for instances\noci monitoring metric-data summarize-metrics-data \\\n  --compartment-id <compartment-ocid> \\\n  --namespace \"oci_computeagent\" \\\n  --query-text 'CpuUtilization[1d].mean()' \\\n  --start-time \"$(date -v-7d +%Y-%m-%dT%H:%M:%SZ)\" \\\n  --end-time \"$(date +%Y-%m-%dT%H:%M:%SZ)\"\n\n# Get memory utilization\noci monitoring metric-data summarize-metrics-data \\\n  --compartment-id <compartment-ocid> \\\n  --namespace \"oci_computeagent\" \\\n  --query-text 'MemoryUtilization[1d].mean()' \\\n  --start-time \"$(date -v-7d +%Y-%m-%dT%H:%M:%SZ)\" \\\n  --end-time \"$(date +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\n## Tagging for Cost Allocation\n\n### Create Tag Namespace\n```bash\n# Create tag namespace\noci iam tag-namespace create \\\n  --compartment-id <tenancy-ocid> \\\n  --name \"CostAllocation\" \\\n  --description \"Tags for cost allocation and chargeback\"\n\n# Create required tags\noci iam tag create \\\n  --tag-namespace-id <namespace-ocid> \\\n  --name \"CostCenter\" \\\n  --description \"Finance cost center code\"\n\noci iam tag create \\\n  --tag-namespace-id <namespace-ocid> \\\n  --name \"Environment\" \\\n  --description \"Dev/Test/Prod\" \\\n  --validator '{\"validatorType\":\"ENUM\",\"values\":[\"Dev\",\"Test\",\"Prod\",\"Sandbox\"]}'\n\noci iam tag create \\\n  --tag-namespace-id <namespace-ocid> \\\n  --name \"Owner\" \\\n  --description \"Team or individual owner\"\n```\n\n### Tag Defaults (Auto-Apply)\n```bash\n# Create tag default for compartment\noci iam tag-default create \\\n  --compartment-id <compartment-ocid> \\\n  --tag-definition-id <tag-definition-ocid> \\\n  --value \"Engineering\"\n\n# Create dynamic tag default (uses principal name)\noci iam tag-default create \\\n  --compartment-id <compartment-ocid> \\\n  --tag-definition-id <owner-tag-ocid> \\\n  --value \"\\${iam.principal.name}\"\n```\n\n## Cost Reports (Detailed)\n\n### Download Cost Reports\n```bash\n# Cost reports are stored in Object Storage at:\n# oci://oci-{tenancy-name}/reports/cost-csv/{date}/\n\n# List available cost reports\noci os object list \\\n  --bucket-name \"oci-<tenancy-name>\" \\\n  --prefix \"reports/cost-csv/\"\n\n# Download cost report\noci os object get \\\n  --bucket-name \"oci-<tenancy-name>\" \\\n  --name \"reports/cost-csv/2024-01/cost-report.csv\" \\\n  --file cost-report-2024-01.csv\n```\n\n## Committed Use Pricing\n\n### View Committed Use Discounts\n```bash\n# List subscribed services\noci onesubscription subscription list \\\n  --compartment-id <tenancy-ocid>\n\n# Check commitment utilization\noci onesubscription commitment list \\\n  --compartment-id <tenancy-ocid> \\\n  --subscribed-service-id <service-id>\n```\n",
        "skills/genai-services/SKILL.md": "---\nname: genai-services\ndescription: Use when implementing OCI GenAI inference APIs, troubleshooting rate limits or token errors, optimizing GenAI costs, or handling sensitive data (PHI/PII) in prompts. Covers model selection, cost calculations, token management, response validation, and healthcare/compliance considerations.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI Generative AI Services - Expert Knowledge\n\n## üèóÔ∏è Use OCI Landing Zone Terraform Modules\n\n**Don't reinvent the wheel.** Use [oracle-terraform-modules/landing-zone](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones) for GenAI infrastructure.\n\n**Landing Zone solves:**\n- ‚ùå Bad Practice #1: Generic compartments (Landing Zone creates AI/ML workload compartments)\n- ‚ùå Bad Practice #4: Poor segmentation (Landing Zone isolates GenAI endpoints in private subnets)\n- ‚ùå Bad Practice #10: No monitoring (Landing Zone configures GenAI usage alarms)\n\n**This skill provides**: GenAI cost optimization, rate limits, PHI/PII security, and troubleshooting for GenAI deployed WITHIN a Landing Zone.\n\n---\n\n## ‚ö†Ô∏è OCI CLI/API Knowledge Gap\n\n**You don't know OCI CLI commands or OCI API structure.**\n\nYour training data has limited and outdated knowledge of:\n- OCI CLI syntax and parameters (updates monthly)\n- OCI GenAI API endpoints and request/response formats\n- GenAI service CLI operations (`oci generative-ai`)\n- Available models, token limits, and pricing (changes frequently)\n- Latest GenAI features (Agents, RAG) and API changes\n\n**When OCI operations are needed:**\n1. Use exact CLI commands from this skill's references\n2. Do NOT guess OCI CLI syntax or parameters\n3. Do NOT assume model availability or pricing\n4. Load reference files for detailed GenAI API documentation\n\n**What you DO know:**\n- General LLM concepts and prompting patterns\n- Token estimation and context management\n- API integration patterns\n\nThis skill bridges the gap by providing current OCI GenAI-specific patterns and gotchas.\n\n---\n\nYou are an OCI GenAI expert. This skill provides knowledge Claude lacks: cost optimization specifics, token management, rate limit handling, PHI/PII security, response validation, and model selection trade-offs.\n\n## NEVER Do This\n\n‚ùå **NEVER send PHI/PII identifiers to GenAI APIs (HIPAA/GDPR violation)**\n```python\n# WRONG - patient identifiers sent to external service\nprompt = f\"Transcribe note for patient {patient_name}, MRN {mrn}, SSN {ssn}: {note}\"\n\n# RIGHT - redact identifiers\nprompt = f\"Transcribe this medical note: {redacted_note}\"\n# Keep mapping: temp_id ‚Üí real_id in secure database, not in prompts\n```\n\n**Why critical**: GenAI service logs may retain data, violates healthcare regulations\n\n‚ùå **NEVER trust GenAI output without validation (hallucination risk)**\n```python\n# WRONG - use response directly in critical systems\ndiagnosis = genai_response.text\ndb.execute(\"UPDATE patients SET diagnosis = ?\", diagnosis)\n\n# RIGHT - validate structure and flag for human review\nresponse = genai_response.text\nif validate_medical_format(response):\n    db.execute(\"UPDATE patients SET ai_suggested_diagnosis = ?, status = 'PENDING_REVIEW'\", response)\n```\n\n**Hallucination rate**: 5-15% for factual queries, higher for medical/legal domains\n\n‚ùå **NEVER ignore token limits**\n- **command-r-plus**: 128k context window (input + output)\n- **command-r**: 4k context (much cheaper but limited)\n- **Exceeding limit**: Request truncated silently or fails with 400 error\n\n‚ùå **NEVER call GenAI without rate limit handling**\n```python\n# WRONG - no retry logic, fails on rate limit\nresponse = genai_client.chat(request)\n\n# RIGHT - exponential backoff\ndef call_with_retry(func, max_retries=5):\n    for attempt in range(max_retries):\n        try:\n            return func()\n        except oci.exceptions.ServiceError as e:\n            if e.status == 429 and attempt < max_retries - 1:\n                wait = (2 ** attempt) + random.uniform(0, 1)\n                logger.warning(f\"Rate limited, retry in {wait:.2f}s\")\n                time.sleep(wait)\n            else:\n                raise\n```\n\n‚ùå **NEVER cache responses without consent (data privacy)**\n- Caching saves costs BUT may violate privacy policies\n- Get explicit user consent before caching medical/personal data\n- Cache anonymized data only\n\n‚ùå **NEVER use GenAI for deterministic tasks**\n- Wrong: \"Extract invoice total from OCR text\" (use regex/structured parsing)\n- Wrong: \"Validate email format\" (use validation library)\n- Right: \"Summarize patient history\", \"Generate report narrative\" (creative tasks)\n\n## Model Selection: Cost vs Performance\n\n| Model | Context | Cost (per 1M tokens) | Best For | Avoid For |\n|-------|---------|---------------------|----------|-----------|\n| **command-r-plus** | 128k | ~$15 input, $75 output | Complex reasoning, long documents | Simple tasks (expensive) |\n| **command-r** | 4k | ~$1.50 input, $7.50 output | Chat, short prompts, high volume | Long documents, RAG |\n| **embed-english-v3** | N/A | ~$0.10 per 1M | Semantic search, clustering | Text generation |\n| **llama-2-70b** | 4k | ~$2 input, $10 output | Open weights, cost-effective | Production (limited support) |\n\n**Cost optimization strategy:**\n1. **Use embeddings for search first** (1000x cheaper than generation)\n2. **Cache responses** for repeated queries (with consent)\n3. **Use command-r for simple tasks**, command-r-plus only when needed\n4. **Truncate input** intelligently (keep relevant context only)\n\n## Cost Calculation Examples\n\n**Scenario: Medical transcription service**\n- Average note: 500 tokens input, 300 tokens output = 800 tokens total\n- 1000 notes/day = 800k tokens/day = 24M tokens/month\n\n**Without optimization:**\n```\nModel: command-r-plus\nInput:  12M √ó ($15/1M) = $180/month\nOutput: 12M √ó ($75/1M) = $900/month\nTotal: $1,080/month\n```\n\n**With optimization (30% cache hit, use command-r for simple notes):**\n```\n70% unique notes = 16.8M tokens\n60% simple (command-r): 10M √ó $1.50 input + $7.50 output = $90\n40% complex (command-r-plus): 6.72M √ó $15 input + $75 output = $605\nTotal: $695/month (36% savings)\n```\n\n## Token Management\n\n### Token Limits by Model\n\n| Model | Max Context | Max Output | Notes |\n|-------|-------------|------------|-------|\n| command-r-plus | 128k (input+output) | Varies | ~4 chars per token (rough) |\n| command-r | 4k | 2k | Good for chat |\n| embed-english-v3 | 512 | N/A | Embeddings only |\n\n### Truncation Strategy\n\n```python\ndef truncate_for_model(text: str, model: str = \"command-r-plus\", max_output: int = 2000):\n    \"\"\"Truncate input to fit token budget\"\"\"\n\n    # Rough estimate: 1 token ‚âà 4 characters\n    if model == \"command-r-plus\":\n        max_input_tokens = 128000 - max_output\n    elif model == \"command-r\":\n        max_input_tokens = 4000 - max_output\n    else:\n        max_input_tokens = 2000\n\n    max_chars = max_input_tokens * 4\n\n    if len(text) <= max_chars:\n        return text\n\n    # Keep most recent content (chronological data like logs, notes)\n    logger.warning(f\"Input exceeds {max_input_tokens} tokens, truncating\")\n    return \"...[earlier content truncated]...\\n\" + text[-max_chars:]\n```\n\n### Prompt Optimization\n\n**Inefficient** (wastes tokens):\n```\nPlease carefully analyze the following medical record and provide a comprehensive\nsummary including all diagnoses, medications, allergies, and treatment plans. Be\nthorough and include all relevant details from the patient's history...\n\n[5000 word medical record]\n```\n\n**Optimized** (40% token reduction):\n```\nSummarize: diagnoses, meds, allergies, treatment plan.\n\n[5000 word medical record]\n```\n\n**Token savings**: ~50 tokens on prompt √ó 1000 requests/day = 50k tokens/day saved = **$2.25/day** ($68/month)\n\n## Rate Limits\n\n### OCI GenAI Service Limits (per compartment):\n\n| Model | Requests/Minute | Requests/Day | Tokens/Request |\n|-------|-----------------|--------------|----------------|\n| command-r-plus | 20 | 1000 | 128k |\n| command-r | 60 | 3000 | 4k |\n| Embeddings | 100 | 10000 | 512 |\n\n### Error Handling\n\n```python\nimport time\nimport random\nfrom oci.exceptions import ServiceError\n\ndef generate_with_backoff(genai_client, request, max_retries=5):\n    \"\"\"Call GenAI with exponential backoff on rate limits\"\"\"\n\n    for attempt in range(max_retries):\n        try:\n            response = genai_client.chat(request)\n            return response.data.chat_response.text\n\n        except ServiceError as e:\n            if e.status == 429:  # Rate limit\n                if attempt < max_retries - 1:\n                    # Exponential backoff: 1s, 2s, 4s, 8s, 16s\n                    wait = (2 ** attempt) + random.uniform(0, 1)\n                    logger.warning(f\"Rate limited (429), retry {attempt+1}/{max_retries} in {wait:.1f}s\")\n                    time.sleep(wait)\n                else:\n                    logger.error(f\"Rate limit exceeded after {max_retries} retries\")\n                    raise\n\n            elif e.status == 400:  # Bad request (often token limit)\n                logger.error(f\"Bad request (400): {e.message}\")\n                if \"token\" in e.message.lower():\n                    logger.error(\"Token limit exceeded - truncate input\")\n                raise\n\n            else:\n                logger.error(f\"GenAI error ({e.status}): {e.message}\")\n                raise\n```\n\n## Response Validation (Critical for Healthcare)\n\n```python\ndef validate_medical_response(response: str) -> tuple[bool, list[str]]:\n    \"\"\"Validate GenAI medical response for safety\"\"\"\n\n    issues = []\n\n    # Check 1: Response not empty\n    if not response or len(response.strip()) < 10:\n        issues.append(\"Response too short or empty\")\n\n    # Check 2: No obvious hallucination markers\n    hallucination_markers = [\n        \"I don't have access\",\n        \"I cannot\",\n        \"As an AI\",\n        \"[INSERT\",\n        \"TODO\",\n    ]\n    for marker in hallucination_markers:\n        if marker.lower() in response.lower():\n            issues.append(f\"Potential hallucination marker: {marker}\")\n\n    # Check 3: Expected structure present (customize per use case)\n    required_sections = [\"Chief Complaint\", \"Assessment\", \"Plan\"]\n    missing_sections = [s for s in required_sections if s.lower() not in response.lower()]\n    if missing_sections:\n        issues.append(f\"Missing sections: {missing_sections}\")\n\n    # Check 4: No PII leak (if input was redacted)\n    pii_patterns = [\n        r'\\b\\d{3}-\\d{2}-\\d{4}\\b',  # SSN\n        r'\\b[A-Z]{2}\\d{6,8}\\b',     # MRN patterns\n    ]\n    for pattern in pii_patterns:\n        if re.search(pattern, response):\n            issues.append(f\"Potential PII in response: {pattern}\")\n\n    is_valid = len(issues) == 0\n    return is_valid, issues\n\n\n# Usage\nresponse_text = genai_response.data.chat_response.text\nis_valid, issues = validate_medical_response(response_text)\n\nif is_valid:\n    store_for_review(response_text)\nelse:\n    logger.warning(f\"Invalid response: {issues}\")\n    flag_for_manual_review(response_text, issues)\n```\n\n## Healthcare-Specific Considerations\n\n### HIPAA Compliance\n\n**Minimum requirements:**\n- ‚úÖ Business Associate Agreement (BAA) with Oracle\n- ‚úÖ PHI redaction before sending to GenAI\n- ‚úÖ Audit logging of all GenAI API calls\n- ‚úÖ Encryption in transit and at rest\n- ‚úÖ Access controls (who can call GenAI)\n- ‚úÖ Data retention policies (how long to keep prompts/responses)\n\n**Never assume GenAI is HIPAA-compliant by default** - verify BAA coverage with Oracle\n\n### De-identification Strategy\n\n```python\ndef redact_phi(text: str) -> tuple[str, dict]:\n    \"\"\"Remove PHI from text, return redacted text + mapping\"\"\"\n\n    mapping = {}\n    redacted = text\n\n    # Patient names (use NER or pattern matching)\n    names = extract_names(text)  # Your NER function\n    for i, name in enumerate(names):\n        placeholder = f\"[PATIENT_{i}]\"\n        mapping[placeholder] = name\n        redacted = redacted.replace(name, placeholder)\n\n    # Medical Record Numbers\n    mrn_pattern = r'\\b(MRN|Medical Record):?\\s*([A-Z0-9]{6,10})\\b'\n    redacted = re.sub(mrn_pattern, r'\\1: [REDACTED]', redacted)\n\n    # SSN\n    ssn_pattern = r'\\b\\d{3}-\\d{2}-\\d{4}\\b'\n    redacted = re.sub(ssn_pattern, '[SSN_REDACTED]', redacted)\n\n    # Dates (optional - some use cases need dates)\n    # date_pattern = r'\\b\\d{1,2}/\\d{1,2}/\\d{4}\\b'\n    # redacted = re.sub(date_pattern, '[DATE]', redacted)\n\n    return redacted, mapping\n\n\n# Usage\nredacted_note, phi_mapping = redact_phi(patient_note)\ngenai_response = genai_client.chat(prompt=f\"Summarize: {redacted_note}\")\n# Store phi_mapping securely, use to re-identify if needed\n```\n\n## Progressive Loading References\n\n### OCI Generative AI Reference (Official Oracle Documentation)\n\n**WHEN TO LOAD** [`oci-genai-reference.md`](references/oci-genai-reference.md):\n- Need comprehensive GenAI API documentation\n- Understanding all available models and capabilities\n- Implementing RAG (Retrieval-Augmented Generation) with OCI\n- Need official Oracle guidance on GenAI Agents\n- Understanding fine-tuning and custom model deployment\n\n**Do NOT load** for:\n- Quick API usage examples (covered in this skill)\n- Model selection guidance (decision tree above)\n- Cost calculations (formulas above)\n\n---\n\n## When to Use This Skill\n\n- GenAI API implementation: model selection, cost estimation, SDK usage\n- Error troubleshooting: rate limits (429), token limits (400), authentication\n- Cost optimization: caching strategy, model downgrade, prompt optimization\n- Healthcare/compliance: PHI handling, HIPAA requirements, audit logging\n- Response validation: hallucination detection, structure checking\n- Production: rate limit handling, error recovery, monitoring\n",
        "skills/iam-identity-management/SKILL.md": "---\nname: iam-identity-management\ndescription: Use when writing IAM policies, troubleshooting permission denied errors, setting up dynamic groups, or implementing IDCS integration. Covers policy syntax gotchas, principal types confusion, compartment inheritance, and common authorization failures.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI IAM and Identity Management - Expert Knowledge\n\n## üèóÔ∏è Use OCI Landing Zone Terraform Modules\n\n**Don't reinvent the wheel.** Use [oracle-terraform-modules/landing-zone](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones) for IAM structure.\n\n**Landing Zone solves:**\n- ‚ùå Bad Practice #1: Flat compartments (Landing Zone provides hierarchical structure)\n- ‚ùå Bad Practice #2: Administrator for daily ops (Landing Zone enforces least privilege)\n- ‚ùå Bad Practice #6: Manual IAM policies (Landing Zone provides CIS-compliant IaC)\n\n**This skill provides**: IAM syntax, troubleshooting, and policy patterns for resources deployed WITHIN a Landing Zone.\n\n---\n\n## ‚ö†Ô∏è OCI CLI/API Knowledge Gap\n\n**You don't know OCI CLI commands or OCI API structure.**\n\nYour training data has limited and outdated knowledge of:\n- OCI CLI syntax and parameters (updates monthly)\n- OCI API endpoints and request/response formats\n- IAM service CLI operations (`oci iam policy`, `oci iam dynamic-group`)\n- Policy verb/resource combinations (OCI-specific, not AWS/Azure)\n- Latest IAM features and Identity Domains\n\n**When OCI operations are needed:**\n1. Use exact CLI commands from this skill's references\n2. Do NOT guess OCI IAM policy syntax\n3. Do NOT assume AWS/Azure IAM patterns work in OCI\n4. Load reference files for detailed IAM policy documentation\n\n**What you DO know:**\n- General IAM concepts (principals, policies, groups)\n- Role-based access control principles\n- Least privilege security concepts\n\nThis skill bridges the gap by providing current OCI-specific IAM patterns and syntax.\n\n---\n\nYou are an OCI IAM expert. This skill provides knowledge Claude lacks: policy syntax gotchas, permission troubleshooting, dynamic group patterns, and OCI-specific IAM operational knowledge.\n\n## NEVER Do This\n\n‚ùå **NEVER use overly broad policies (security risk)**\n```\n# WRONG - grants admin access to everyone\nAllow any-user to manage all-resources in tenancy\n\n# WRONG - too broad for production\nAllow group Developers to manage all-resources in compartment Production\n\n# RIGHT - least privilege, specific resources\nAllow group AppDevelopers to manage instance-family in compartment AppDev where target.instance.name =~ 'dev-*'\n```\n\n‚ùå **NEVER forget compartment hierarchy in policies**\n```\n# WRONG - policy in child compartment can't access parent resources\nPolicy location: Compartment A/B/C\n\"Allow group X to read buckets in compartment A\"  # Fails! Policy must be in A or above\n\n# RIGHT - policy must be at or above target location\nPolicy location: Compartment A (or root)\n\"Allow group X to read buckets in compartment A\"\n```\n\n‚ùå **NEVER mix up principal types (causes \"not authorized\" errors)**\n```\n# WRONG - instance is NOT a user\nAllow user <instance-ocid> to read buckets in compartment X\n\n# RIGHT - use dynamic group for instances\nAllow dynamic-group app-instances to read buckets in compartment X\n```\n\n‚ùå **NEVER hardcode resource OCIDs in dynamic group rules**\n```\n# WRONG - not scalable, breaks when instance replaced\nALL {instance.id = 'ocid1.instance.oc1.phx.xxxxx'}\n\n# RIGHT - use compartment or tag matching\nALL {instance.compartment.id = '<compartment-ocid>'}\nANY {instance.freeform-tags.environment = 'production'}\n```\n\n‚ùå **NEVER create circular policy dependencies**\n```\n# WRONG - Group A needs policy to manage Group B, but Group B policy grants access to Group A\n# Creates deadlock where neither can be created first\n\n# RIGHT - use separate administrative groups with clear hierarchy\n```\n\n‚ùå **NEVER use \"any-user\" in production policies (security audit failure)**\n```\n# WRONG - grants access to ALL users including future unknown users\nAllow any-user to read buckets in tenancy\n\n# RIGHT - explicit group membership\nAllow group DataReaders to read buckets in compartment SharedData\n```\nCost impact: $10,000+ per compliance violation finding in SOC2/HIPAA audits\n\n## IAM Permission Troubleshooting\n\n### \"404 - NotAuthorizedOrNotFound\"\n\nThis error means **EITHER**:\n1. Resource doesn't exist, OR\n2. User lacks permission to see if resource exists\n\n**Troubleshooting decision tree**:\n```\n404 NotAuthorizedOrNotFound?\n‚îÇ\n‚îú‚îÄ Does resource definitely exist?\n‚îÇ  ‚îú‚îÄ YES ‚Üí Permission issue\n‚îÇ  ‚îÇ  ‚îî‚îÄ Check: Does user have 'inspect' or 'read' permission?\n‚îÇ  ‚îÇ     ‚îî‚îÄ Check: Is policy in correct compartment (at or above target)?\n‚îÇ  ‚îî‚îÄ NO ‚Üí Resource doesn't exist\n‚îÇ     ‚îî‚îÄ Verify OCID, compartment, region\n‚îÇ\n‚îú‚îÄ Using dynamic group/instance principal?\n‚îÇ  ‚îî‚îÄ Check: Is instance in dynamic group?\n‚îÇ     ‚îî‚îÄ `oci compute instance get --instance-id <ocid>` (shows compartment, tags)\n‚îÇ     ‚îî‚îÄ Verify matching-rule matches instance properties\n‚îÇ\n‚îî‚îÄ Cross-compartment access?\n   ‚îî‚îÄ Policy must be in compartment that CONTAINS both source and target\n      OR in root compartment\n```\n\n### \"403 - NotAuthorized\"\n\n**Clear permission denied**. User/principal identified but lacks permission.\n\n**Common causes**:\n1. **Missing verb**: Policy has `read` but action needs `use` or `manage`\n2. **Wrong resource-type**: Policy grants `instance-family` but trying to access `volume-family`\n3. **Condition doesn't match**: Policy has `where target.instance.name = 'prod-*'` but instance is `dev-web-1`\n4. **Policy not in effect yet**: Policies take 10-60 seconds to propagate\n\n**Verb hierarchy** (each includes permissions below):\n```\ninspect < read < use < manage\n```\n\n## Policy Syntax Gotchas\n\n### Resource Type Families (Often Confused)\n\n| Family | Includes | Common Mistake |\n|--------|----------|----------------|\n| `instance-family` | instances, instance-consoles, instance-console-connections, vnics, vnic-attachments | Thinking it includes volumes (it doesn't) |\n| `volume-family` | volumes, volume-backups, volume-attachments | Separate from instances |\n| `object-family` | buckets, objects | Objects are separate resources |\n| `database-family` | db-systems, databases, autonomous-databases | Very broad |\n| `all-resources` | Everything | **Use sparingly** - security risk |\n\n### Location Syntax\n\n```\n# Compartment (specific)\nin compartment <compartment-name or ocid>\n\n# Compartment + descendants\nin compartment <compartment-name> where target.compartment.id = <ocid>\n\n# Tenancy (root)\nin tenancy\n\n# Specific resource (rare, for delegation)\nin resource <resource-ocid>\n```\n\n### Conditions (WHERE clause)\n\n```hcl\n# Tag-based conditions\nwhere target.resource.tag.environment = 'production'\nwhere target.resource.freeform-tags.CostCenter = 'Engineering'\n\n# Resource name patterns\nwhere target.instance.name =~ 'web-*'  # Regex match\n\n# Request properties\nwhere request.operation = 'LaunchInstance'\nwhere request.region = 'us-phoenix-1'\n\n# Multiple conditions\nwhere all {target.resource.tag.env = 'prod', target.compartment.name = 'AppProd'}\nwhere any {target.instance.shape = 'VM.Standard.E4.Flex', target.instance.shape = 'VM.Standard.A1.Flex'}\n```\n\n## Dynamic Group Patterns\n\n### Matching Rules Best Practices\n\n**By Compartment** (most common):\n```\nALL {instance.compartment.id = '<compartment-ocid>'}\n```\n\n**By Tag** (flexible):\n```\nANY {instance.freeform-tags.app = 'webserver'}\n```\n\n**By Multiple Criteria** (restrictive):\n```\nALL {instance.compartment.id = '<comp-ocid>', instance.freeform-tags.environment = 'production'}\n```\n\n**Common Mistake**: Using `instance.id` (specific instance) instead of `instance.compartment.id` (all instances in compartment)\n\n### Testing Dynamic Group Membership\n\n```bash\n# 1. Get instance details to see compartment/tags\noci compute instance get --instance-id <instance-ocid>\n\n# 2. Check dynamic group matching rule\noci iam dynamic-group get --dynamic-group-id <group-ocid>\n\n# 3. Verify rule matches instance properties\n# Example: If rule is \"instance.compartment.id = X\"\n# Check instance's compartment_id matches X\n\n# 4. Test with actual API call from instance\n# SSH to instance and run:\noci os ns get  # Should work if instance principal configured correctly\n```\n\n## Compartment Strategy Anti-Patterns\n\n‚ùå **WRONG: Flat structure (no organization)**\n```\nTenancy\n‚îú‚îÄ Application1  (mix of dev/test/prod)\n‚îú‚îÄ Application2  (mix of dev/test/prod)\n‚îî‚îÄ SharedServices\n```\n\n‚úÖ **RIGHT: Environment-based hierarchy**\n```\nTenancy\n‚îú‚îÄ Production\n‚îÇ  ‚îú‚îÄ App1\n‚îÇ  ‚îî‚îÄ App2\n‚îú‚îÄ Development\n‚îÇ  ‚îú‚îÄ App1\n‚îÇ  ‚îî‚îÄ App2\n‚îî‚îÄ SharedServices\n   ‚îú‚îÄ Networking\n   ‚îî‚îÄ Security\n```\n\n**Benefits**: Clear IAM boundaries, cost reporting by environment, blast radius containment\n\n## Authentication Methods (When to Use Each)\n\n| Method | Use Case | Pros | Cons |\n|--------|----------|------|------|\n| **API Key** | Local dev, CI/CD runners outside OCI | Simple, portable | Manual rotation, key management |\n| **Instance Principal** | Apps on OCI compute | No credentials, auto-rotation | Only works on OCI compute |\n| **Resource Principal** | OCI Functions, Data Flow | Serverless auth | Limited to specific services |\n| **Session Token** | Console federation via IDCS | SSO, MFA | Short-lived, complex setup |\n\n## IDCS Integration Gotchas\n\n**Federation Setup** (OCI + IDCS):\n- IDCS users map to OCI via federation\n- Group membership in IDCS ‚Üí OCI group mapping\n- **Critical**: OCI group names must match IDCS group names exactly\n\n**Common Issues**:\n- User can log in to console but can't see resources ‚Üí Missing OCI IAM policy for federated group\n- \"Invalid credentials\" ‚Üí IDCS federation not configured in OCI tenancy\n- Group membership doesn't sync ‚Üí OCI group name doesn't match IDCS group name\n\n## Progressive Loading References\n\n### OCI IAM Policies Reference (Official Oracle Documentation)\n\n**WHEN TO LOAD** [`oci-iam-policies-reference.md`](references/oci-iam-policies-reference.md):\n- Need comprehensive IAM policy syntax and examples\n- Writing complex policies with conditions\n- Understanding service-specific verbs and permissions\n- Implementing least privilege access patterns\n- Troubleshooting policy evaluation order\n\n**Do NOT load** for:\n- Quick policy syntax examples (covered in this skill)\n- Common permission patterns (decision trees above)\n- Dynamic group rules (covered in this skill)\n\n---\n\n## When to Use This Skill\n\n- Writing IAM policies: syntax, verb selection, conditions\n- Troubleshooting: 403/404 errors, authorization failures, permission debugging\n- Dynamic groups: matching rules, testing membership, instance principals\n- Compartment strategy: hierarchy design, policy placement\n- IDCS integration: federation setup, group mapping, SSO troubleshooting\n",
        "skills/infrastructure-as-code/SKILL.md": "---\nname: infrastructure-as-code\ndescription: Use when writing Terraform for OCI, troubleshooting provider errors, managing state files, or implementing Resource Manager stacks. Covers terraform-provider-oci gotchas, resource lifecycle anti-patterns, state management mistakes, authentication issues, and OCI Landing Zones.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI Infrastructure as Code - Expert Knowledge\n\n## üèóÔ∏è IMPORTANT: Use OCI Landing Zone Terraform Modules\n\n### Do NOT Reinvent the Wheel\n\n**‚ùå WRONG Approach:**\n```hcl\n# Writing Terraform from scratch for every resource\nresource \"oci_identity_compartment\" \"prod\" { ... }\nresource \"oci_core_vcn\" \"main\" { ... }\nresource \"oci_identity_policy\" \"policies\" { ... }\n# Result: Unmaintainable, inconsistent, no governance\n```\n\n**‚úÖ RIGHT Approach: Use Official OCI Landing Zone Terraform Modules**\n\n```hcl\n# Use official OCI Landing Zone modules\nmodule \"landing_zone\" {\n  source  = \"oracle-terraform-modules/landing-zone/oci\"\n  version = \"~> 2.0\"\n\n  # Infrastructure configuration\n  compartments_configuration = { ... }\n  network_configuration = { ... }\n  security_configuration = { ... }\n}\n```\n\n**Why Use Landing Zone Modules:**\n- ‚úÖ **Battle-tested**: Thousands of OCI customers\n- ‚úÖ **Compliant**: CIS OCI Foundations Benchmark aligned\n- ‚úÖ **Maintained**: Oracle updates for API changes\n- ‚úÖ **Comprehensive**: Includes IAM, networking, security, logging\n- ‚úÖ **Reusable**: Consistent patterns across environments\n\n**Official Resources:**\n- [OCI Landing Zone Terraform Modules](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones)\n- [OCI Resource Manager Stacks](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/deployments.htm)\n\n**When to Write Custom Terraform** (this skill's guidance):\n- Application-specific resources not covered by landing zone\n- Extending landing zone modules\n- Special requirements not in reference architecture\n\n---\n\n## ‚ö†Ô∏è OCI CLI/API Knowledge Gap\n\n**You don't know OCI CLI commands or OCI API structure.**\n\nYour training data has limited and outdated knowledge of:\n- OCI Terraform provider syntax (updates frequently)\n- OCI API endpoints and resource schemas\n- terraform-provider-oci specific arguments and data sources\n- Resource Manager stack operations\n- Latest provider features and breaking changes\n\n**When OCI operations are needed:**\n1. Use exact Terraform examples from this skill's references\n2. Do NOT guess OCI provider resource arguments\n3. Do NOT assume AWS/Azure Terraform patterns work in OCI\n4. Reference landing-zones skill for module usage\n\n**What you DO know:**\n- General Terraform concepts and HCL syntax\n- State management principles\n- Infrastructure as Code best practices\n\nThis skill bridges the gap by providing current OCI-specific Terraform patterns and gotchas.\n\n---\n\nYou are an OCI Terraform expert. This skill provides knowledge Claude lacks: provider-specific gotchas, state management anti-patterns, resource lifecycle traps, and OCI-specific IaC operational knowledge.\n\n## NEVER Do This\n\n‚ùå **NEVER hardcode OCIDs in Terraform (breaks portability)**\n```hcl\n# WRONG - breaks when moving between regions/compartments\nresource \"oci_core_instance\" \"web\" {\n  compartment_id = \"ocid1.compartment.oc1..aaaaaa...\"  # Hardcoded!\n  subnet_id      = \"ocid1.subnet.oc1.phx.bbbbbb...\"     # Hardcoded!\n}\n\n# RIGHT - use variables or data sources\nresource \"oci_core_instance\" \"web\" {\n  compartment_id = var.compartment_ocid\n  subnet_id      = data.oci_core_subnet.existing.id\n}\n```\n\n‚ùå **NEVER use `preserve_boot_volume = true` in dev/test (cost trap)**\n```hcl\n# WRONG - orphans boot volumes when instance destroyed ($50+/month per instance)\nresource \"oci_core_instance\" \"dev\" {\n  preserve_boot_volume = true  # Default behavior!\n}\n\n# RIGHT - explicit cleanup in dev/test\nresource \"oci_core_instance\" \"dev\" {\n  preserve_boot_volume = false\n}\n```\n\n**Cost impact**: Dev team with 10 test instances √ó $5/volume/month = $50/month wasted on orphaned volumes\n\n‚ùå **NEVER forget `lifecycle` blocks for critical resources**\n```hcl\n# WRONG - accidental destroy can delete production database\nresource \"oci_database_autonomous_database\" \"prod\" {\n  # No protection!\n}\n\n# RIGHT - prevent accidental destruction\nresource \"oci_database_autonomous_database\" \"prod\" {\n  lifecycle {\n    prevent_destroy = true\n    ignore_changes  = [defined_tags]  # Ignore tag changes from console\n  }\n}\n```\n\n‚ùå **NEVER mix regional and AD-specific resources (portability trap)**\n```hcl\n# WRONG - hardcoded AD breaks multi-region deployment\nresource \"oci_core_instance\" \"web\" {\n  availability_domain = \"fMgC:US-ASHBURN-AD-1\"  # Tenant-specific!\n}\n\n# RIGHT - query AD dynamically\ndata \"oci_identity_availability_domains\" \"ads\" {\n  compartment_id = var.tenancy_ocid\n}\n\nresource \"oci_core_instance\" \"web\" {\n  availability_domain = data.oci_identity_availability_domains.ads.availability_domains[0].name\n}\n```\n\n‚ùå **NEVER store state file in local filesystem for teams**\n```hcl\n# WRONG - no locking, no collaboration\nterraform {\n  backend \"local\" {}\n}\n\n# RIGHT - use OCI Object Storage with locking\nterraform {\n  backend \"s3\" {\n    bucket   = \"terraform-state\"\n    key      = \"prod/terraform.tfstate\"\n    region   = \"us-phoenix-1\"\n    endpoint = \"https://namespace.compat.objectstorage.us-phoenix-1.oraclecloud.com\"\n\n    skip_region_validation      = true\n    skip_credentials_validation = true\n    skip_metadata_api_check     = true\n    use_path_style              = true\n  }\n}\n```\n\n‚ùå **NEVER use `count` for resources that shouldn't be replaced on reorder**\n```hcl\n# WRONG - reordering list recreates ALL resources\nresource \"oci_core_instance\" \"web\" {\n  count = length(var.instance_names)\n  display_name = var.instance_names[count.index]\n}\n\n# If instance_names changes from [\"web1\", \"web2\", \"web3\"] to [\"web0\", \"web1\", \"web2\", \"web3\"]\n# Terraform RECREATES all instances!\n\n# RIGHT - use for_each with stable keys\nresource \"oci_core_instance\" \"web\" {\n  for_each = toset(var.instance_names)\n  display_name = each.value\n}\n```\n\n## OCI Provider Gotchas\n\n### Authentication Hierarchy (Often Confusing)\n\nProvider authentication precedence:\n1. Explicit provider block credentials\n2. `TF_VAR_*` environment variables\n3. `~/.oci/config` file (DEFAULT profile)\n4. Instance Principal (if `auth = \"InstancePrincipal\"`)\n\n**Common mistake**: Setting environment variables but provider block overrides them silently.\n\n### Instance Principal for Terraform on OCI Compute\n\n```hcl\n# In provider.tf\nprovider \"oci\" {\n  auth   = \"InstancePrincipal\"\n  region = var.region\n}\n\n# Dynamic group matching rule:\n# \"ALL {instance.compartment.id = '<compartment-ocid>'}\"\n\n# IAM policy:\n# \"Allow dynamic-group terraform-instances to manage all-resources in tenancy\"\n```\n\n**Critical**: Instance must be in dynamic group BEFORE Terraform runs, or authentication fails with cryptic error: \"authorization failed or requested resource not found\"\n\n### Resource Already Exists Errors\n\n```\nError: 409-Conflict, Resource already exists\n```\n\n**Cause**: Resource exists in OCI but not in state file.\n\n**Solution**:\n```bash\n# Import existing resource into state\nterraform import oci_core_vcn.main ocid1.vcn.oc1.phx.xxxxx\n\n# Then run plan/apply as normal\nterraform plan\n```\n\n**Prevention**: Always use `terraform import` for existing infrastructure before managing with Terraform.\n\n## State Management Anti-Patterns\n\n### Problem: State Drift\n\n**Symptoms**: Terraform wants to change/destroy resources that were modified outside Terraform (console, API, CLI).\n\n**Detection**:\n```bash\nterraform plan  # Shows unexpected changes\nterraform show  # Compare state to actual infrastructure\n```\n\n**Solutions**:\n\n**Option 1**: Refresh state (safe)\n```bash\nterraform refresh  # Updates state to match reality\n```\n\n**Option 2**: Import changes (if new resources)\n```bash\nterraform import <resource_type>.<name> <ocid>\n```\n\n**Option 3**: Ignore changes in lifecycle\n```hcl\nlifecycle {\n  ignore_changes = [defined_tags, freeform_tags]  # Ignore console tag edits\n}\n```\n\n### Problem: State File Corruption\n\n**Symptoms**: `terraform plan` fails with \"state file corrupted\" or \"version mismatch\"\n\n**Recovery**:\n```bash\n# 1. Make backup\ncp terraform.tfstate terraform.tfstate.backup\n\n# 2. Try state repair\nterraform state pull > recovered.tfstate\nmv recovered.tfstate terraform.tfstate\n\n# 3. If that fails, restore from Object Storage versioning\n# Or reconstruct with imports (last resort)\n```\n\n**Prevention**: Use Object Storage backend with versioning enabled\n\n## Resource Lifecycle Traps\n\n### Destroy Failures (Common with Dependencies)\n\n```\nError: Resource still in use\n```\n\n**Example**: Can't destroy VCN because subnet still exists, can't destroy subnet because instances still attached.\n\n**Solution**:\n```bash\n# 1. Visualize dependencies\nterraform graph | dot -Tpng > graph.png\n\n# 2. Destroy in reverse order\nterraform destroy -target=oci_core_instance.web\nterraform destroy -target=oci_core_subnet.private\nterraform destroy -target=oci_core_vcn.main\n\n# Or use depends_on explicitly:\nresource \"oci_core_vcn\" \"main\" {\n  # ...\n}\n\nresource \"oci_core_subnet\" \"private\" {\n  vcn_id = oci_core_vcn.main.id\n  # depends_on is implicit via vcn_id reference\n}\n```\n\n### Timeouts for Long-Running Resources\n\n```hcl\n# Database provisioning takes 15-30 minutes\nresource \"oci_database_autonomous_database\" \"prod\" {\n  # ... configuration ...\n\n  timeouts {\n    create = \"60m\"  # Default 20m often not enough\n    update = \"60m\"\n    delete = \"30m\"\n  }\n}\n\n# Compute instance usually fast, but can timeout on capacity issues\nresource \"oci_core_instance\" \"web\" {\n  # ... configuration ...\n\n  timeouts {\n    create = \"30m\"  # Allow retries on \"out of capacity\"\n  }\n}\n```\n\n## OCI Landing Zones\n\n**What**: Pre-built Terraform templates for enterprise OCI architectures\n\n**Repository**: `github.com/oracle-quickstart/oci-landing-zones`\n\n**Use when**:\n- Starting new OCI tenancy (greenfield)\n- Need CIS OCI Foundations Benchmark compliance\n- Want security-hardened baseline\n- Multi-environment (dev/test/prod) setup\n\n**DON'T use when**:\n- Brownfield (existing infrastructure) - too opinionated\n- Simple single-app deployment - overkill\n\n**Key patterns**:\n- Hub-and-spoke networking\n- Centralized logging/monitoring\n- Security zones and bastion hosts\n- IAM baseline with groups/policies\n\n## Cost Optimization for IaC\n\n### Use Flex Shapes (50% savings)\n\n```hcl\n# EXPENSIVE - fixed shape\nresource \"oci_core_instance\" \"web\" {\n  shape = \"VM.Standard2.4\"  # 4 OCPUs, 60GB RAM, $218/month\n}\n\n# CHEAPER - flexible shape\nresource \"oci_core_instance\" \"web\" {\n  shape = \"VM.Standard.E4.Flex\"\n  shape_config {\n    ocpus         = 4\n    memory_in_gbs = 60\n  }\n  # Cost: (4 √ó $0.03 + 60 √ó $0.0015) √ó 730 = $153/month (30% savings)\n}\n```\n\n### Tag Everything for Cost Tracking\n\n```hcl\n# Define locals for consistent tagging\nlocals {\n  common_tags = {\n    \"CostCenter\"  = \"Engineering\"\n    \"Environment\" = var.environment\n    \"ManagedBy\"   = \"Terraform\"\n    \"Project\"     = var.project_name\n  }\n}\n\nresource \"oci_core_instance\" \"web\" {\n  freeform_tags = merge(\n    local.common_tags,\n    {\n      \"Component\" = \"WebServer\"\n    }\n  )\n}\n```\n\n**Benefit**: Cost reporting by CostCenter, Environment, Project in OCI Console\n\n## Progressive Loading References\n\n### OCI Terraform Patterns\n\n**WHEN TO LOAD** [`oci-terraform-patterns.md`](references/oci-terraform-patterns.md):\n- Setting up provider configuration (multi-region, auth methods)\n- Resource Manager stack operations via CLI\n- Common resource patterns (VCN, compute, ADB)\n- State management with Object Storage backend\n- Landing Zone module usage examples\n\n**Do NOT load** for:\n- Quick provider gotchas (NEVER list above)\n- Understanding when to use Landing Zone (covered above)\n- Lifecycle management patterns (covered above)\n\n---\n\n## When to Use This Skill\n\n- Writing Terraform: provider configuration, resource dependencies, lifecycle\n- State management: drift, corruption, import/export\n- Troubleshooting: authentication failures, \"resource already exists\", destroy failures\n- OCI Landing Zones: when to use, how to customize\n- Cost optimization: Flex shapes, tagging strategies\n- Production: prevent_destroy, ignore_changes, timeouts\n",
        "skills/infrastructure-as-code/references/oci-terraform-patterns.md": "# OCI Terraform and Resource Manager Patterns\n\n## Provider Configuration\n\n### Basic Provider Setup\n```hcl\nterraform {\n  required_providers {\n    oci = {\n      source  = \"oracle/oci\"\n      version = \"~> 5.0\"\n    }\n  }\n}\n\n# API Key authentication\nprovider \"oci\" {\n  tenancy_ocid     = var.tenancy_ocid\n  user_ocid        = var.user_ocid\n  private_key_path = var.private_key_path\n  fingerprint      = var.fingerprint\n  region           = var.region\n}\n\n# Instance Principal (for OCI compute)\nprovider \"oci\" {\n  auth   = \"InstancePrincipal\"\n  region = var.region\n}\n\n# Resource Principal (for OCI Functions)\nprovider \"oci\" {\n  auth   = \"ResourcePrincipal\"\n  region = var.region\n}\n```\n\n### Multi-Region Configuration\n```hcl\nprovider \"oci\" {\n  alias  = \"primary\"\n  region = \"us-ashburn-1\"\n  # ... auth config\n}\n\nprovider \"oci\" {\n  alias  = \"dr\"\n  region = \"us-phoenix-1\"\n  # ... auth config\n}\n\n# Use provider alias in resources\nresource \"oci_core_vcn\" \"primary_vcn\" {\n  provider       = oci.primary\n  compartment_id = var.compartment_id\n  cidr_block     = \"10.0.0.0/16\"\n}\n\nresource \"oci_core_vcn\" \"dr_vcn\" {\n  provider       = oci.dr\n  compartment_id = var.compartment_id\n  cidr_block     = \"10.1.0.0/16\"\n}\n```\n\n## Resource Manager Stack Operations\n\n### CLI Commands\n```bash\n# Create stack from directory\noci resource-manager stack create \\\n  --compartment-id <compartment-ocid> \\\n  --config-source '{\"configSourceType\":\"ZIP_UPLOAD\",\"zipFileBase64Encoded\":\"<base64-encoded-zip>\"}' \\\n  --display-name \"my-infrastructure\"\n\n# Create stack from Git\noci resource-manager stack create \\\n  --compartment-id <compartment-ocid> \\\n  --config-source '{\"configSourceType\":\"GIT_CONFIG_SOURCE\",\"configurationSourceProviderId\":\"<provider-ocid>\",\"repositoryUrl\":\"https://github.com/org/repo\",\"branchName\":\"main\",\"workingDirectory\":\"terraform/\"}' \\\n  --display-name \"my-infrastructure\"\n\n# List stacks\noci resource-manager stack list --compartment-id <compartment-ocid>\n\n# Run plan\noci resource-manager job create-plan-job \\\n  --stack-id <stack-ocid>\n\n# Run apply\noci resource-manager job create-apply-job \\\n  --stack-id <stack-ocid> \\\n  --execution-plan-strategy \"AUTO_APPROVED\"\n\n# Run destroy\noci resource-manager job create-destroy-job \\\n  --stack-id <stack-ocid> \\\n  --execution-plan-strategy \"AUTO_APPROVED\"\n\n# Get job logs\noci resource-manager job get-job-logs \\\n  --job-id <job-ocid>\n```\n\n## Common Resource Patterns\n\n### VCN with Public and Private Subnets\n```hcl\nresource \"oci_core_vcn\" \"main\" {\n  compartment_id = var.compartment_id\n  cidr_blocks    = [var.vcn_cidr]\n  display_name   = \"${var.prefix}-vcn\"\n  dns_label      = var.dns_label\n}\n\nresource \"oci_core_internet_gateway\" \"main\" {\n  compartment_id = var.compartment_id\n  vcn_id         = oci_core_vcn.main.id\n  display_name   = \"${var.prefix}-igw\"\n}\n\nresource \"oci_core_nat_gateway\" \"main\" {\n  compartment_id = var.compartment_id\n  vcn_id         = oci_core_vcn.main.id\n  display_name   = \"${var.prefix}-natgw\"\n}\n\nresource \"oci_core_service_gateway\" \"main\" {\n  compartment_id = var.compartment_id\n  vcn_id         = oci_core_vcn.main.id\n  display_name   = \"${var.prefix}-sgw\"\n  services {\n    service_id = data.oci_core_services.all_services.services[0].id\n  }\n}\n\n# Public subnet (uses IGW)\nresource \"oci_core_subnet\" \"public\" {\n  compartment_id    = var.compartment_id\n  vcn_id            = oci_core_vcn.main.id\n  cidr_block        = cidrsubnet(var.vcn_cidr, 8, 0)\n  display_name      = \"${var.prefix}-public-subnet\"\n  dns_label         = \"public\"\n  route_table_id    = oci_core_route_table.public.id\n  security_list_ids = [oci_core_security_list.public.id]\n}\n\n# Private subnet (uses NAT)\nresource \"oci_core_subnet\" \"private\" {\n  compartment_id             = var.compartment_id\n  vcn_id                     = oci_core_vcn.main.id\n  cidr_block                 = cidrsubnet(var.vcn_cidr, 8, 1)\n  display_name               = \"${var.prefix}-private-subnet\"\n  dns_label                  = \"private\"\n  prohibit_public_ip_on_vnic = true\n  route_table_id             = oci_core_route_table.private.id\n  security_list_ids          = [oci_core_security_list.private.id]\n}\n```\n\n### Compute Instance with Boot Volume Backup\n```hcl\nresource \"oci_core_instance\" \"main\" {\n  compartment_id      = var.compartment_id\n  availability_domain = data.oci_identity_availability_domains.ads.availability_domains[0].name\n  shape               = \"VM.Standard.E4.Flex\"\n  display_name        = \"${var.prefix}-instance\"\n\n  shape_config {\n    ocpus         = var.instance_ocpus\n    memory_in_gbs = var.instance_memory_gbs\n  }\n\n  create_vnic_details {\n    subnet_id        = oci_core_subnet.private.id\n    assign_public_ip = false\n  }\n\n  source_details {\n    source_type = \"image\"\n    source_id   = data.oci_core_images.oracle_linux.images[0].id\n  }\n\n  metadata = {\n    ssh_authorized_keys = var.ssh_public_key\n  }\n\n  freeform_tags = var.freeform_tags\n  defined_tags  = var.defined_tags\n}\n\n# Backup policy\nresource \"oci_core_volume_backup_policy_assignment\" \"main\" {\n  asset_id  = oci_core_instance.main.boot_volume_id\n  policy_id = data.oci_core_volume_backup_policies.predefined.volume_backup_policies[0].id # Bronze/Silver/Gold\n}\n```\n\n### Autonomous Database\n```hcl\nresource \"oci_database_autonomous_database\" \"main\" {\n  compartment_id           = var.compartment_id\n  db_name                  = var.adb_name\n  display_name             = \"${var.prefix}-adb\"\n  db_workload              = \"OLTP\"  # or \"DW\" for data warehouse\n  is_auto_scaling_enabled  = true\n  cpu_core_count           = var.adb_ocpu_count\n  data_storage_size_in_tbs = var.adb_storage_tbs\n  admin_password           = var.adb_admin_password\n\n  # Network configuration (private endpoint)\n  subnet_id           = oci_core_subnet.private.id\n  nsg_ids             = [oci_core_network_security_group.adb.id]\n  is_mtls_connection_required = false  # Allow TLS-only connections\n\n  # Backup configuration\n  is_auto_backup_enabled = true\n\n  # Maintenance window\n  autonomous_maintenance_schedule_type = \"REGULAR\"\n\n  freeform_tags = var.freeform_tags\n  defined_tags  = var.defined_tags\n}\n```\n\n## State Management\n\n### Remote State in Object Storage\n```hcl\nterraform {\n  backend \"http\" {\n    address       = \"https://objectstorage.<region>.oraclecloud.com/p/<par-token>/n/<namespace>/b/<bucket>/o/terraform.tfstate\"\n    update_method = \"PUT\"\n  }\n}\n\n# Alternative: Use S3-compatible backend\nterraform {\n  backend \"s3\" {\n    bucket                      = \"terraform-state\"\n    key                         = \"prod/terraform.tfstate\"\n    region                      = \"us-ashburn-1\"\n    endpoint                    = \"https://<namespace>.compat.objectstorage.<region>.oraclecloud.com\"\n    skip_region_validation      = true\n    skip_credentials_validation = true\n    skip_metadata_api_check     = true\n    force_path_style            = true\n  }\n}\n```\n\n## Drift Detection\n\n### CLI Commands\n```bash\n# Detect drift\noci resource-manager stack detect-stack-drift \\\n  --stack-id <stack-ocid>\n\n# Get drift detection status\noci resource-manager stack get-stack-drift-detection-status \\\n  --stack-id <stack-ocid>\n\n# List resources with drift\noci resource-manager resource-drift-collection list \\\n  --stack-id <stack-ocid>\n```\n\n## Landing Zone Module Usage\n\n```hcl\nmodule \"landing_zone\" {\n  source  = \"oracle-terraform-modules/landing-zone/oci\"\n  version = \"~> 2.0\"\n\n  # Required\n  tenancy_ocid     = var.tenancy_ocid\n  home_region      = var.home_region\n  deploy_regions   = [\"us-ashburn-1\", \"us-phoenix-1\"]\n\n  # Compartments\n  compartments_configuration = {\n    enable_delete = false\n    compartments = {\n      NETWORK = { name = \"Network\" }\n      SECURITY = { name = \"Security\" }\n      WORKLOADS = { name = \"Workloads\" }\n    }\n  }\n\n  # Network\n  network_configuration = {\n    default_compartment_id = module.landing_zone.compartments[\"NETWORK\"].id\n    vcns = {\n      HUB-VCN = {\n        cidr_blocks = [\"10.0.0.0/16\"]\n        subnets = {\n          PUBLIC-SUBNET  = { cidr_block = \"10.0.0.0/24\" }\n          PRIVATE-SUBNET = { cidr_block = \"10.0.1.0/24\" }\n        }\n      }\n    }\n  }\n\n  # Security Zones\n  security_zones_configuration = {\n    default_compartment_id = module.landing_zone.compartments[\"WORKLOADS\"].id\n    security_zones = {\n      PROD-ZONE = {\n        compartment_id = module.landing_zone.compartments[\"WORKLOADS\"].id\n        recipe_name    = \"PROD_RECIPE\"\n      }\n    }\n  }\n}\n```\n\n## Best Practices\n\n### Module Structure\n```\nterraform/\n‚îú‚îÄ‚îÄ modules/\n‚îÇ   ‚îú‚îÄ‚îÄ compute/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.tf\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ variables.tf\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ outputs.tf\n‚îÇ   ‚îú‚îÄ‚îÄ network/\n‚îÇ   ‚îî‚îÄ‚îÄ database/\n‚îú‚îÄ‚îÄ environments/\n‚îÇ   ‚îú‚îÄ‚îÄ dev/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.tf\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ terraform.tfvars\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ backend.tf\n‚îÇ   ‚îú‚îÄ‚îÄ test/\n‚îÇ   ‚îî‚îÄ‚îÄ prod/\n‚îî‚îÄ‚îÄ shared/\n    ‚îî‚îÄ‚îÄ data.tf\n```\n\n### Variable Validation\n```hcl\nvariable \"environment\" {\n  type        = string\n  description = \"Environment name (dev, test, prod)\"\n\n  validation {\n    condition     = contains([\"dev\", \"test\", \"prod\"], var.environment)\n    error_message = \"Environment must be one of: dev, test, prod.\"\n  }\n}\n\nvariable \"instance_shape\" {\n  type        = string\n  description = \"Compute instance shape\"\n\n  validation {\n    condition     = can(regex(\"^VM\\\\.\", var.instance_shape))\n    error_message = \"Instance shape must be a VM shape (VM.*).\"\n  }\n}\n```\n",
        "skills/landing-zones/SKILL.md": "---\nname: landing-zones\ndescription: Use when designing multi-tenant OCI environments, setting up production landing zones, implementing compartment hierarchies, or establishing governance foundations. Covers Landing Zone reference architectures, compartment strategy, network topology patterns (hub-spoke vs multi-VCN), IAM structure, tagging standards, and cost segregation.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI Landing Zones - Expert Architecture\n\n## ‚ö†Ô∏è OCI Landing Zone Knowledge Gap\n\n**You don't know OCI Landing Zone patterns and tooling.**\n\nYour training data has limited and outdated knowledge of:\n- OCI Landing Zone reference architectures (updated quarterly)\n- Resource Manager stacks for landing zones\n- Compartment design patterns and governance\n- Security Zones and CIS Foundation compliance\n- Multi-tenancy patterns (SaaS, multi-environment)\n- Landing Zone Terraform modules and best practices\n\n**When landing zone design is needed:**\n1. Use patterns and CLI commands from this skill's references\n2. Do NOT guess compartment hierarchies or network topologies\n3. Do NOT assume IAM policy structures\n4. Load [`landing-zone-cli.md`](references/landing-zone-cli.md) for deployment operations\n\n**What you DO know:**\n- General cloud architecture concepts\n- Networking principles (subnets, routing, firewalls)\n- IAM concepts (users, groups, policies)\n\nThis skill provides OCI-specific landing zone patterns that differ from AWS/Azure/GCP.\n\n---\n\n## üö® Top 10 OCI Bad Practices - Solved by Landing Zones\n\n### Why Landing Zones Matter\n\nWithout a proper Landing Zone, organizations commonly make these critical mistakes. OCI Landing Zones solve all 10:\n\n| # | Bad Practice | Impact | Landing Zone Solution |\n|---|--------------|--------|----------------------|\n| **1** | **Using a couple of generic compartments** (or no compartments) | No governance, cost allocation impossible, blast radius = entire tenancy | **Hierarchical compartments**: Network/Security/Workloads structure with policy inheritance |\n| **2** | **Using Administrator group for daily operations** | No least privilege, audit trail useless, compliance violations | **Granular IAM policies**: Per-compartment, per-role policies with principle of least privilege |\n| **3** | **Internet breakout from spoke networks** | Egress cost waste ($3k-5k/month), no egress filtering, data exfiltration risk | **Hub-spoke topology**: Centralized egress via NAT/Firewall in hub VCN |\n| **4** | **Poor network segmentation** | Dev can access prod, lateral movement in breach, no environment isolation | **Separate compartments + VCNs**: Dev/Test/Prod isolation with Security Zones |\n| **5** | **Internet-wide open ports** (22, 3389, 8080) | Direct attack surface, brute force attempts, breach entry point | **Security Lists/NSGs**: Default deny, explicit allow only from bastion/VPN |\n| **6** | **Default security rules and route tables** | Overly permissive, not aligned to architecture, security drift | **IaC-managed rules**: Explicit, version-controlled, CIS Benchmark aligned |\n| **7** | **Limited use of OCI security services** | Manual security, no proactive detection, violations found after breach | **Integrated security**: Cloud Guard, Security Zones, VSS, OSMS, NFW, WAF enabled by default |\n| **8** | **Creating your own Terraform modules** | Reinventing wheel, unmaintained, no CIS compliance, inconsistent patterns | **Official OCI modules**: Battle-tested, Oracle-maintained, CIS certified |\n| **9** | **Public exposure of services** (buckets, databases, compute with public IPs) | Data breaches, compliance violations, unauthorized access | **Security Zones**: Deny public IPs, deny public buckets, encryption enforced |\n| **10** | **No logging, monitoring, notifications** | Blind to incidents, no audit trail, compliance failures, long MTTR | **Observability stack**: VCN Flow Logs, Audit Logs, Cloud Guard, Alarms, Notifications |\n\n### Cost Impact: With vs Without Landing Zone\n\n**Without Landing Zone (Annual Waste):**\n- Egress via IG instead of SG: **$36k-52k/year**\n- Flat compartments (no optimization): **$50k-100k/year** (cannot identify waste)\n- No Security Zones (breach): **$100k-$10M+** (average breach cost)\n- Manual Terraform maintenance: **$50k-100k/year** (engineer time)\n- **Total avoidable cost**: **$236k-$10.2M+/year**\n\n**With Landing Zone:**\n- One-time setup: **$10k-30k** (mostly planning/design)\n- Annual maintenance: **$5k-10k** (Terraform updates)\n- **ROI**: 10x-100x+ in first year\n\n### Compliance Impact\n\n**Regulatory frameworks requiring Landing Zone patterns:**\n- **PCI-DSS**: Network segmentation (#1, #3, #4, #5)\n- **HIPAA**: Encryption, logging, access controls (#7, #9, #10)\n- **SOC 2**: Least privilege, monitoring, change management (#2, #6, #10)\n- **ISO 27001**: Information security controls (all 10)\n- **CIS OCI Foundations**: 100+ controls (Landing Zone implements 80%+)\n\n**Without Landing Zone**: Compliance audit failures, remediation costs $100k-500k\n**With Landing Zone**: CIS Benchmark aligned by default, audit-ready\n\n---\n\nYou are an OCI Landing Zone architect. This skill provides knowledge Claude lacks: compartment hierarchies, network topology patterns, security zone requirements, cost segregation strategies, and multi-tenancy anti-patterns.\n\n## NEVER Do This\n\n‚ùå **NEVER create flat compartment structure (no hierarchy)**\n```\nBAD - Flat compartments:\ntenancy/\n  ‚îú‚îÄ app1-dev\n  ‚îú‚îÄ app1-test\n  ‚îú‚îÄ app1-prod\n  ‚îú‚îÄ app2-dev\n  ‚îú‚îÄ app2-test\n  ‚îî‚îÄ app2-prod\n\nProblems:\n- No isolation boundaries\n- Cannot apply policies to all dev environments\n- Cannot delegate administration\n- Cost reports are unstructured\n```\n\n```\nGOOD - Hierarchical compartments:\ntenancy/\n  ‚îú‚îÄ Network/\n  ‚îÇ   ‚îú‚îÄ Hub\n  ‚îÇ   ‚îî‚îÄ Spokes\n  ‚îú‚îÄ Security/\n  ‚îÇ   ‚îú‚îÄ Vault\n  ‚îÇ   ‚îî‚îÄ Logging\n  ‚îú‚îÄ Workloads/\n  ‚îÇ   ‚îú‚îÄ App1/\n  ‚îÇ   ‚îÇ   ‚îú‚îÄ Dev\n  ‚îÇ   ‚îÇ   ‚îú‚îÄ Test\n  ‚îÇ   ‚îÇ   ‚îî‚îÄ Prod\n  ‚îÇ   ‚îî‚îÄ App2/\n  ‚îÇ       ‚îú‚îÄ Dev\n  ‚îÇ       ‚îú‚îÄ Test\n  ‚îÇ       ‚îî‚îÄ Prod\n  ‚îî‚îÄ Shared-Services/\n      ‚îú‚îÄ Identity\n      ‚îî‚îÄ Monitoring\n```\n\n**Why critical**: Hierarchical structure enables policy inheritance, delegation, and logical cost segregation. Flat structure requires duplicate policies and makes governance impossible at scale.\n\n‚ùå **NEVER use default VCN CIDR (10.0.0.0/16) everywhere**\n```\nBAD - Same CIDR in all environments:\nDev VCN: 10.0.0.0/16\nTest VCN: 10.0.0.0/16  # Cannot peer with Dev!\nProd VCN: 10.0.0.0/16  # Cannot peer with Dev or Test!\n\nProblems:\n- VCN peering impossible (overlapping CIDRs)\n- Cannot create multi-environment connectivity\n- VPN/FastConnect integration blocked\n- Requires complete rebuild to fix\n```\n\n```\nGOOD - Non-overlapping CIDR allocation:\nDev VCN: 10.10.0.0/16\nTest VCN: 10.20.0.0/16\nProd VCN: 10.30.0.0/16\nHub VCN: 10.0.0.0/16 (shared services)\n\nEnables:\n- VCN peering for cross-environment access\n- Hub-spoke topology for centralized egress\n- On-premises connectivity via FastConnect\n```\n\n**Cost impact**: VCN CIDR is IMMUTABLE. Wrong CIDR = complete rebuild = downtime + migration costs.\n\n‚ùå **NEVER skip Security Zones in production compartments**\n```bash\n# BAD - no security zone enforcement\noci iam compartment create \\\n  --compartment-id $PARENT_ID \\\n  --name \"Prod\" \\\n  --description \"Production workloads\"\n# Result: No guardrails, resources can violate security policies\n\n# GOOD - security zone enabled\n# 1. Create security zone recipe\noci cloud-guard security-zone-recipe create \\\n  --compartment-id $TENANCY_ID \\\n  --display-name \"CIS-Prod-Recipe\" \\\n  --security-policies \"[\\\"deny-public-ip\\\", \\\"deny-public-bucket\\\"]\"\n\n# 2. Create security zone for prod compartment\noci cloud-guard security-zone create \\\n  --compartment-id $PROD_COMPARTMENT_ID \\\n  --display-name \"Prod-Security-Zone\" \\\n  --security-zone-recipe-id $RECIPE_ID\n\n# Enforces: No public IPs, no public buckets, encryption required\n```\n\n**Why critical**: Security Zones prevent violations BEFORE resource creation. Without them, auditing finds violations AFTER compromise. Cost of breach: $100k-$10M+.\n\n‚ùå **NEVER mix dev and prod resources in same compartment**\n```\nBAD - shared compartment:\nApp1/\n  ‚îú‚îÄ vm-dev-1 (development instance)\n  ‚îú‚îÄ vm-prod-1 (production instance)\n  ‚îî‚îÄ db-prod (CRITICAL DATABASE)\n\nProblems:\n- Developers with dev access can accidentally delete prod DB\n- Cannot set different backup policies\n- Cost reports mix dev and prod spending\n- Compliance violations (SOC2, ISO27001)\n```\n\n```\nGOOD - separate compartments:\nApp1/\n  ‚îú‚îÄ Dev/\n  ‚îÇ   ‚îî‚îÄ vm-dev-1 (developers have full access)\n  ‚îú‚îÄ Test/\n  ‚îÇ   ‚îî‚îÄ vm-test-1 (QA has access)\n  ‚îî‚îÄ Prod/\n      ‚îú‚îÄ vm-prod-1 (only SRE access)\n      ‚îî‚îÄ db-prod (only DBA access)\n\nEnables:\n- Least privilege per environment\n- Separate budgets and alerts\n- Independent backup policies\n- Compliance audit trails\n```\n\n**Risk**: Production outage from dev team mistake. Happened at 47% of surveyed enterprises in 2023.\n\n‚ùå **NEVER use root compartment for workload resources**\n```\nBAD - resources in root:\ntenancy (root)/\n  ‚îú‚îÄ vcn-1 (WRONG - in root)\n  ‚îú‚îÄ instance-1 (WRONG - in root)\n  ‚îî‚îÄ database-1 (WRONG - in root)\n\nProblems:\n- Cannot delegate administration\n- Root policies affect all resources\n- Cannot isolate blast radius\n- Violates CIS OCI Foundations Benchmark\n```\n\n```\nGOOD - workloads in child compartments:\ntenancy (root)/\n  ‚îú‚îÄ only IAM resources (users, groups, dynamic groups)\n  ‚îî‚îÄ Workloads/\n      ‚îî‚îÄ App1/\n          ‚îú‚îÄ vcn-1 (proper isolation)\n          ‚îú‚îÄ instance-1\n          ‚îî‚îÄ database-1\n\nRoot compartment usage:\n- Identity resources only (users, groups, policies)\n- Top-level compartments\n- Nothing else\n```\n\n**Why critical**: Root compartment is for tenancy-wide IAM. Resources in root bypass governance.\n\n‚ùå **NEVER skip tagging strategy (cost allocation nightmare)**\n```\nBAD - no tags:\nResource created with no tags\nCost report shows: \"oci.compute.instance: $5,234/month\"\nQuestion: Which team? Which project? Which environment?\nAnswer: Unknown - requires manual investigation\n\nResult: Cannot chargeback costs, cannot optimize\n```\n\n```\nGOOD - defined tag namespace + mandatory tags:\n# 1. Create tag namespace\noci iam tag-namespace create \\\n  --compartment-id $TENANCY_ID \\\n  --name \"Organization\" \\\n  --description \"Organization-wide tags\"\n\n# 2. Create mandatory tags\noci iam tag create \\\n  --tag-namespace-id $NAMESPACE_ID \\\n  --name \"CostCenter\" \\\n  --description \"Cost center for chargeback\" \\\n  --is-retired false\n\noci iam tag create \\\n  --tag-namespace-id $NAMESPACE_ID \\\n  --name \"Environment\" \\\n  --description \"Dev/Test/Prod\" \\\n  --is-retired false\n\noci iam tag create \\\n  --tag-namespace-id $NAMESPACE_ID \\\n  --name \"Owner\" \\\n  --description \"Team or service owner\" \\\n  --is-retired false\n\n# 3. Make tags mandatory at compartment level\noci iam tag-default create \\\n  --compartment-id $WORKLOAD_COMPARTMENT_ID \\\n  --tag-definition-id $COSTCENTER_TAG_ID \\\n  --value \"\\${iam.principal.name}\"\n\nCost report now shows:\n- CostCenter: Engineering ($3,200)\n- CostCenter: Marketing ($2,034)\n- Environment: Prod ($4,100)\n- Environment: Dev ($1,134)\n```\n\n**Cost impact**: Without tags, cost optimization is guesswork. With tags, precision chargeback and 30-50% cost reduction via waste identification.\n\n‚ùå **NEVER use single-region landing zone for production**\n```\nBAD - single region:\nAll resources in us-ashburn-1\nRTO: Hours-days (rebuild in new region)\nRPO: Last backup (data loss)\n\nProblems:\n- No disaster recovery\n- Region outage = complete downtime\n- Violates SLA requirements\n- Insurance/compliance issues\n```\n\n```\nGOOD - multi-region architecture:\nPrimary: us-ashburn-1\nDR: us-phoenix-1\n- Autonomous Data Guard (standby)\n- Traffic Manager (DNS failover)\n- Object Storage replication\n- Compartment structure mirrored\n\nRTO: 15 minutes (automated failover)\nRPO: Near-zero (Data Guard sync)\n```\n\n**Cost**: Multi-region adds 60-100% infrastructure cost. Cost of regional outage: $500k-$50M depending on SLA.\n\n‚ùå **NEVER allow internet gateway in DMZ without egress firewall**\n```\nBAD - direct internet gateway:\nDMZ Subnet ‚Üí Internet Gateway ‚Üí Internet\nNo egress filtering, all outbound traffic allowed\n\nProblems:\n- Data exfiltration possible\n- Command & control connections unblocked\n- Compliance violations (PCI-DSS, HIPAA)\n```\n\n```\nGOOD - egress control via NAT or firewall:\nOption 1: Service Gateway + NAT Gateway\nDMZ Subnet ‚Üí NAT Gateway ‚Üí Internet\n- Egress only, no inbound\n- All traffic logged\n- Can use Network Firewall for DPI\n\nOption 2: Hub-spoke with centralized firewall\nSpoke ‚Üí DRG ‚Üí Hub VCN ‚Üí Network Firewall ‚Üí Internet\n- All egress goes through hub\n- Firewall policies enforce allow-list\n- Complete visibility and control\n```\n\n**Security impact**: Uncontrolled egress is #3 cause of data breaches (Verizon DBIR 2023).\n\n## Progressive Loading References\n\n### Landing Zone Architecture Patterns\n\n**WHEN TO LOAD** [`landing-zone-patterns.md`](references/landing-zone-patterns.md):\n- Designing hub-spoke network topology\n- Choosing compartment hierarchy pattern (workload-centric vs environment-centric vs tenant-centric)\n- Implementing Security Zones and Cloud Guard integration\n- Setting up tagging strategy and cost allocation\n- Designing network topology (single VCN vs hub-spoke vs multi-region)\n\n**Do NOT load** for:\n- Quick anti-pattern reference (NEVER list above covers it)\n- Understanding Top 10 Bad Practices (covered in this skill)\n- CLI commands (use landing-zone-cli.md instead)\n\n---\n\n### OCI Well-Architected Framework (Official Oracle Documentation)\n\n**WHEN TO LOAD** [`oci-well-architected-framework.md`](references/oci-well-architected-framework.md):\n- Need comprehensive understanding of Landing Zone design principles\n- Designing production-grade landing zones from scratch\n- Understanding Security & Compliance pillar (IAM, encryption, monitoring)\n- Understanding Reliability & Resilience pillar (HA, DR, fault tolerance)\n- Understanding Performance Efficiency & Cost Optimization pillar\n- Understanding Operational Efficiency pillar (IaC, automation, scalability)\n- Comparing Core Landing Zone vs Operating Entities Landing Zone\n- Need official Oracle guidance on multi-region deployment\n\n**MANDATORY - READ ENTIRE FILE** (~3,400 lines): This is the official Oracle documentation on OCI Well-Architected Framework and Landing Zones. Read completely when:\n- Starting a new landing zone design project\n- Preparing architectural review or compliance audit\n- Need to justify Landing Zone decisions to stakeholders\n\n**Do NOT load** for:\n- Quick CLI commands (use landing-zone-cli.md instead)\n- Specific implementation steps (covered in this skill's decision trees)\n\n---\n\n### OCI CLI for Landing Zones\n\n**WHEN TO LOAD** [`landing-zone-cli.md`](references/landing-zone-cli.md):\n- Creating compartment hierarchies\n- Setting up Security Zones and Cloud Guard\n- Configuring tag defaults and tag namespaces\n- Implementing hub-spoke network topology\n- Creating budgets and cost tracking\n\n**Example**: Create compartment hierarchy\n```bash\noci iam compartment create \\\n  --compartment-id $TENANCY_ID \\\n  --name \"Workloads\" \\\n  --description \"Application workloads\"\n```\n\n**Do NOT load** for:\n- General OCI architecture concepts (covered in this skill)\n- IAM policy syntax (covered in iam-identity-management skill)\n- Network configuration (covered in networking-management skill)\n- Official Oracle documentation (use oci-well-architected-framework.md instead)\n\n## When to Use This Skill\n\n- Initial OCI tenancy setup and foundation\n- Migrating from AWS/Azure/GCP to OCI\n- Designing multi-tenant or multi-environment architectures\n- Implementing governance and cost controls\n- Preparing for compliance audits (CIS, SOC2, ISO27001)\n- Scaling from single app to enterprise platform\n- Disaster recovery and multi-region planning\n",
        "skills/landing-zones/references/landing-zone-cli.md": "# OCI CLI for Landing Zone Operations\n\nComplete OCI CLI commands for deploying and managing landing zones.\n\n## Prerequisites\n\n```bash\n# Verify OCI CLI and authentication\noci --version\noci iam region list --output table\n\n# Get tenancy OCID (needed for root compartment operations)\nexport TENANCY_ID=$(oci iam compartment list --all \\\n  --compartment-id-in-subtree true \\\n  --access-level ACCESSIBLE \\\n  --include-root \\\n  --query \"data[?name=='root'].id | [0]\" \\\n  --raw-output)\n\necho \"Tenancy ID: $TENANCY_ID\"\n```\n\n## Compartment Management\n\n### Create Compartment Hierarchy\n\n```bash\n# 1. Create top-level compartments\nNETWORK_CMP=$(oci iam compartment create \\\n  --compartment-id $TENANCY_ID \\\n  --name \"Network\" \\\n  --description \"Network resources and topology\" \\\n  --query 'data.id' --raw-output)\n\nSECURITY_CMP=$(oci iam compartment create \\\n  --compartment-id $TENANCY_ID \\\n  --name \"Security\" \\\n  --description \"Security services\" \\\n  --query 'data.id' --raw-output)\n\nWORKLOADS_CMP=$(oci iam compartment create \\\n  --compartment-id $TENANCY_ID \\\n  --name \"Workloads\" \\\n  --description \"Application workloads\" \\\n  --query 'data.id' --raw-output)\n\nSHARED_CMP=$(oci iam compartment create \\\n  --compartment-id $TENANCY_ID \\\n  --name \"Shared-Services\" \\\n  --description \"Shared platform services\" \\\n  --query 'data.id' --raw-output)\n\n# 2. Create Network sub-compartments\nHUB_CMP=$(oci iam compartment create \\\n  --compartment-id $NETWORK_CMP \\\n  --name \"Hub\" \\\n  --description \"Hub VCN for centralized services\" \\\n  --query 'data.id' --raw-output)\n\nSPOKES_CMP=$(oci iam compartment create \\\n  --compartment-id $NETWORK_CMP \\\n  --name \"Spokes\" \\\n  --description \"Spoke VCNs for workloads\" \\\n  --query 'data.id' --raw-output)\n\n# 3. Create Workload compartments\nAPP1_CMP=$(oci iam compartment create \\\n  --compartment-id $WORKLOADS_CMP \\\n  --name \"App1\" \\\n  --description \"Application 1\" \\\n  --query 'data.id' --raw-output)\n\n# 4. Create environment compartments under App1\nAPP1_DEV_CMP=$(oci iam compartment create \\\n  --compartment-id $APP1_CMP \\\n  --name \"Dev\" \\\n  --description \"Development environment\" \\\n  --query 'data.id' --raw-output)\n\nAPP1_TEST_CMP=$(oci iam compartment create \\\n  --compartment-id $APP1_CMP \\\n  --name \"Test\" \\\n  --description \"Test environment\" \\\n  --query 'data.id' --raw-output)\n\nAPP1_PROD_CMP=$(oci iam compartment create \\\n  --compartment-id $APP1_CMP \\\n  --name \"Prod\" \\\n  --description \"Production environment\" \\\n  --query 'data.id' --raw-output)\n```\n\n### List Compartment Hierarchy\n\n```bash\n# List all compartments with hierarchy\noci iam compartment list \\\n  --compartment-id $TENANCY_ID \\\n  --compartment-id-in-subtree true \\\n  --access-level ACCESSIBLE \\\n  --all \\\n  --output table\n\n# Get compartment OCID by name\noci iam compartment list \\\n  --compartment-id $TENANCY_ID \\\n  --name \"Prod\" \\\n  --compartment-id-in-subtree true \\\n  --query 'data[0].id' \\\n  --raw-output\n```\n\n### Move Resources Between Compartments\n\n```bash\n# Move compute instance to different compartment\noci compute instance change-compartment \\\n  --instance-id ocid1.instance.oc1..xxx \\\n  --compartment-id $APP1_PROD_CMP\n\n# Move VCN to different compartment\noci network vcn change-compartment \\\n  --vcn-id ocid1.vcn.oc1..xxx \\\n  --compartment-id $NETWORK_CMP\n```\n\n## Tag Namespace and Defaults\n\n### Create Tag Namespace\n\n```bash\n# Create organization tag namespace\nTAG_NAMESPACE=$(oci iam tag-namespace create \\\n  --compartment-id $TENANCY_ID \\\n  --name \"Organization\" \\\n  --description \"Organization-wide required tags\" \\\n  --query 'data.id' --raw-output)\n\necho \"Tag Namespace ID: $TAG_NAMESPACE\"\n```\n\n### Create Tag Definitions\n\n```bash\n# CostCenter tag (mandatory)\nCOSTCENTER_TAG=$(oci iam tag create \\\n  --tag-namespace-id $TAG_NAMESPACE \\\n  --name \"CostCenter\" \\\n  --description \"Cost center for chargeback\" \\\n  --is-retired false \\\n  --query 'data.id' --raw-output)\n\n# Environment tag (mandatory, enum)\nENVIRONMENT_TAG=$(oci iam tag create \\\n  --tag-namespace-id $TAG_NAMESPACE \\\n  --name \"Environment\" \\\n  --description \"Environment type\" \\\n  --is-retired false \\\n  --validator '{\n    \"validatorType\": \"ENUM\",\n    \"values\": [\"Dev\", \"Test\", \"Prod\", \"Sandbox\"]\n  }' \\\n  --query 'data.id' --raw-output)\n\n# Owner tag (mandatory)\nOWNER_TAG=$(oci iam tag create \\\n  --tag-namespace-id $TAG_NAMESPACE \\\n  --name \"Owner\" \\\n  --description \"Resource owner email or team\" \\\n  --is-retired false \\\n  --query 'data.id' --raw-output)\n\n# DataClassification tag\nDATACLASS_TAG=$(oci iam tag create \\\n  --tag-namespace-id $TAG_NAMESPACE \\\n  --name \"DataClassification\" \\\n  --description \"Data sensitivity classification\" \\\n  --is-retired false \\\n  --validator '{\n    \"validatorType\": \"ENUM\",\n    \"values\": [\"Public\", \"Internal\", \"Confidential\", \"Restricted\"]\n  }' \\\n  --query 'data.id' --raw-output)\n\n# BackupPolicy tag\nBACKUP_TAG=$(oci iam tag create \\\n  --tag-namespace-id $TAG_NAMESPACE \\\n  --name \"BackupPolicy\" \\\n  --description \"Backup retention policy\" \\\n  --is-retired false \\\n  --validator '{\n    \"validatorType\": \"ENUM\",\n    \"values\": [\"None\", \"Bronze\", \"Silver\", \"Gold\"]\n  }' \\\n  --query 'data.id' --raw-output)\n```\n\n### Set Tag Defaults (Auto-apply Tags)\n\n```bash\n# Make Environment=Prod default in Prod compartment\noci iam tag-default create \\\n  --compartment-id $APP1_PROD_CMP \\\n  --tag-definition-id $ENVIRONMENT_TAG \\\n  --value \"Prod\"\n\n# Make Environment=Dev default in Dev compartment\noci iam tag-default create \\\n  --compartment-id $APP1_DEV_CMP \\\n  --tag-definition-id $ENVIRONMENT_TAG \\\n  --value \"Dev\"\n\n# Make Owner default to creator's username\noci iam tag-default create \\\n  --compartment-id $WORKLOADS_CMP \\\n  --tag-definition-id $OWNER_TAG \\\n  --value \"\\${iam.principal.name}\"\n\n# Make DataClassification=Internal default\noci iam tag-default create \\\n  --compartment-id $WORKLOADS_CMP \\\n  --tag-definition-id $DATACLASS_TAG \\\n  --value \"Internal\"\n```\n\n### List Tags\n\n```bash\n# List all tag namespaces\noci iam tag-namespace list \\\n  --compartment-id $TENANCY_ID \\\n  --all \\\n  --output table\n\n# List tags in namespace\noci iam tag list \\\n  --tag-namespace-id $TAG_NAMESPACE \\\n  --all \\\n  --output table\n```\n\n## Security Zones\n\n### Create Security Zone Recipe\n\n```bash\n# Create CIS Foundation recipe\nCIS_RECIPE=$(oci cloud-guard security-zone-recipe create \\\n  --compartment-id $TENANCY_ID \\\n  --display-name \"CIS-Foundation-Recipe\" \\\n  --description \"CIS OCI Foundations Benchmark security policies\" \\\n  --security-policies '[\"deny-public-ip-on-compute\", \"deny-public-bucket\", \"require-boot-volume-backup\", \"require-block-volume-backup\"]' \\\n  --query 'data.id' --raw-output)\n\n# Create production-specific recipe (stricter)\nPROD_RECIPE=$(oci cloud-guard security-zone-recipe create \\\n  --compartment-id $TENANCY_ID \\\n  --display-name \"Production-Recipe\" \\\n  --description \"Production security requirements\" \\\n  --security-policies '[\"deny-public-ip-on-compute\", \"deny-public-bucket\", \"deny-public-lb\", \"require-encryption-at-rest\", \"require-encryption-in-transit\", \"require-boot-volume-backup\", \"require-block-volume-backup\", \"deny-internet-gateway-in-private-subnet\"]' \\\n  --query 'data.id' --raw-output)\n```\n\n### Apply Security Zone to Compartment\n\n```bash\n# Apply production recipe to prod compartment\noci cloud-guard security-zone create \\\n  --compartment-id $APP1_PROD_CMP \\\n  --display-name \"App1-Prod-Security-Zone\" \\\n  --description \"Security zone for App1 production\" \\\n  --security-zone-recipe-id $PROD_RECIPE\n\n# Apply CIS recipe to test compartment\noci cloud-guard security-zone create \\\n  --compartment-id $APP1_TEST_CMP \\\n  --display-name \"App1-Test-Security-Zone\" \\\n  --description \"Security zone for App1 test\" \\\n  --security-zone-recipe-id $CIS_RECIPE\n```\n\n### List Security Zones\n\n```bash\n# List all security zones\noci cloud-guard security-zone list \\\n  --compartment-id $TENANCY_ID \\\n  --compartment-id-in-subtree true \\\n  --all \\\n  --output table\n\n# Get security zone details\noci cloud-guard security-zone get \\\n  --security-zone-id ocid1.securityzone.oc1..xxx\n```\n\n## Cloud Guard Configuration\n\n### Enable Cloud Guard\n\n```bash\n# Enable Cloud Guard for tenancy\noci cloud-guard configuration update \\\n  --reporting-region us-ashburn-1 \\\n  --status ENABLED \\\n  --self-manage-resources true\n\n# Check Cloud Guard status\noci cloud-guard configuration get\n```\n\n### Create Cloud Guard Target\n\n```bash\n# Create target for workloads compartment\nCLOUDGUARD_TARGET=$(oci cloud-guard target create \\\n  --compartment-id $TENANCY_ID \\\n  --display-name \"Workloads-Target\" \\\n  --description \"Cloud Guard monitoring for all workloads\" \\\n  --target-resource-type COMPARTMENT \\\n  --target-resource-id $WORKLOADS_CMP \\\n  --target-detector-recipes '[\n    {\n      \"detectorRecipeId\": \"ocid1.cloudguarddetectorrecipe.oc1..configuration\",\n      \"detector\": \"IAAS_CONFIGURATION_DETECTOR\"\n    },\n    {\n      \"detectorRecipeId\": \"ocid1.cloudguarddetectorrecipe.oc1..activity\",\n      \"detector\": \"IAAS_ACTIVITY_DETECTOR\"\n    }\n  ]' \\\n  --query 'data.id' --raw-output)\n```\n\n### List Cloud Guard Problems\n\n```bash\n# List all open problems\noci cloud-guard problem list \\\n  --compartment-id $TENANCY_ID \\\n  --compartment-id-in-subtree true \\\n  --lifecycle-state OPEN \\\n  --output table\n\n# List problems by risk level\noci cloud-guard problem list \\\n  --compartment-id $WORKLOADS_CMP \\\n  --risk-level CRITICAL \\\n  --output table\n```\n\n## Budget Management\n\n### Create Budget for Compartment\n\n```bash\n# Create monthly budget for production\nPROD_BUDGET=$(oci budgets budget create \\\n  --compartment-id $TENANCY_ID \\\n  --amount 25000 \\\n  --reset-period MONTHLY \\\n  --target-type COMPARTMENT \\\n  --targets \"[$APP1_PROD_CMP]\" \\\n  --display-name \"App1-Prod-Monthly-Budget\" \\\n  --description \"Production environment monthly budget: \\$25,000\" \\\n  --query 'data.id' --raw-output)\n\n# Create budget for dev environment (lower threshold)\nDEV_BUDGET=$(oci budgets budget create \\\n  --compartment-id $TENANCY_ID \\\n  --amount 5000 \\\n  --reset-period MONTHLY \\\n  --target-type COMPARTMENT \\\n  --targets \"[$APP1_DEV_CMP]\" \\\n  --display-name \"App1-Dev-Monthly-Budget\" \\\n  --description \"Dev environment monthly budget: \\$5,000\" \\\n  --query 'data.id' --raw-output)\n\n# Create budget for tags (cost center-based)\noci budgets budget create \\\n  --compartment-id $TENANCY_ID \\\n  --amount 50000 \\\n  --reset-period MONTHLY \\\n  --target-type TAG \\\n  --targets '[\"Organization.CostCenter=Engineering\"]' \\\n  --display-name \"Engineering-CostCenter-Budget\" \\\n  --description \"Engineering cost center budget: \\$50,000\"\n```\n\n### Create Budget Alert Rules\n\n```bash\n# Alert at 50% threshold\noci budgets alert-rule create \\\n  --budget-id $PROD_BUDGET \\\n  --type ACTUAL \\\n  --threshold 50 \\\n  --threshold-type PERCENTAGE \\\n  --display-name \"Prod-50%-Warning\" \\\n  --message \"Production budget at 50% (\\$12,500)\" \\\n  --recipients \"sre-team@example.com\"\n\n# Alert at 80% threshold\noci budgets alert-rule create \\\n  --budget-id $PROD_BUDGET \\\n  --type ACTUAL \\\n  --threshold 80 \\\n  --threshold-type PERCENTAGE \\\n  --display-name \"Prod-80%-Critical\" \\\n  --message \"Production budget at 80% (\\$20,000) - CRITICAL\" \\\n  --recipients \"sre-team@example.com,cfo@example.com\"\n\n# Alert at 100% threshold\noci budgets alert-rule create \\\n  --budget-id $PROD_BUDGET \\\n  --type ACTUAL \\\n  --threshold 100 \\\n  --threshold-type PERCENTAGE \\\n  --display-name \"Prod-100%-Exceeded\" \\\n  --message \"Production budget EXCEEDED (\\$25,000)\" \\\n  --recipients \"sre-team@example.com,cfo@example.com,ceo@example.com\"\n\n# Forecast alert (predict 100% in current month)\noci budgets alert-rule create \\\n  --budget-id $PROD_BUDGET \\\n  --type FORECAST \\\n  --threshold 100 \\\n  --threshold-type PERCENTAGE \\\n  --display-name \"Prod-Forecast-100%\" \\\n  --message \"Production forecasted to exceed budget this month\" \\\n  --recipients \"sre-team@example.com\"\n```\n\n### List Budgets\n\n```bash\n# List all budgets\noci budgets budget list \\\n  --compartment-id $TENANCY_ID \\\n  --target-type COMPARTMENT \\\n  --output table\n\n# Get budget utilization\noci budgets budget get \\\n  --budget-id $PROD_BUDGET\n```\n\n## Hub-Spoke Network Topology\n\n### Create Hub VCN\n\n```bash\n# Create Hub VCN in Hub compartment\nHUB_VCN=$(oci network vcn create \\\n  --compartment-id $HUB_CMP \\\n  --display-name \"Hub-VCN\" \\\n  --cidr-blocks '[\"10.0.0.0/16\"]' \\\n  --dns-label \"hub\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n\n# Create Hub subnets\nHUB_PUBLIC_SUBNET=$(oci network subnet create \\\n  --compartment-id $HUB_CMP \\\n  --vcn-id $HUB_VCN \\\n  --display-name \"Hub-Public-Subnet\" \\\n  --cidr-block \"10.0.1.0/24\" \\\n  --prohibit-public-ip-on-vnic false \\\n  --dns-label \"hubpub\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n\nHUB_PRIVATE_SUBNET=$(oci network subnet create \\\n  --compartment-id $HUB_CMP \\\n  --vcn-id $HUB_VCN \\\n  --display-name \"Hub-Private-Subnet\" \\\n  --cidr-block \"10.0.2.0/24\" \\\n  --prohibit-public-ip-on-vnic true \\\n  --dns-label \"hubpriv\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n```\n\n### Create DRG (Dynamic Routing Gateway)\n\n```bash\n# Create DRG for hub-spoke connectivity\nDRG=$(oci network drg create \\\n  --compartment-id $NETWORK_CMP \\\n  --display-name \"Hub-Spoke-DRG\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n\n# Attach Hub VCN to DRG\nHUB_DRG_ATTACHMENT=$(oci network drg-attachment create \\\n  --drg-id $DRG \\\n  --display-name \"Hub-VCN-Attachment\" \\\n  --vcn-id $HUB_VCN \\\n  --wait-for-state ATTACHED \\\n  --query 'data.id' --raw-output)\n```\n\n### Create Spoke VCNs\n\n```bash\n# Create Spoke VCN for App1 Prod\nSPOKE1_VCN=$(oci network vcn create \\\n  --compartment-id $SPOKES_CMP \\\n  --display-name \"Spoke-App1-Prod-VCN\" \\\n  --cidr-blocks '[\"10.10.0.0/16\"]' \\\n  --dns-label \"app1prod\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n\n# Attach Spoke1 to DRG\nSPOKE1_DRG_ATTACHMENT=$(oci network drg-attachment create \\\n  --drg-id $DRG \\\n  --display-name \"Spoke-App1-Prod-Attachment\" \\\n  --vcn-id $SPOKE1_VCN \\\n  --wait-for-state ATTACHED \\\n  --query 'data.id' --raw-output)\n\n# Create Spoke VCN for App1 Dev\nSPOKE2_VCN=$(oci network vcn create \\\n  --compartment-id $SPOKES_CMP \\\n  --display-name \"Spoke-App1-Dev-VCN\" \\\n  --cidr-blocks '[\"10.11.0.0/16\"]' \\\n  --dns-label \"app1dev\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n\n# Attach Spoke2 to DRG\nSPOKE2_DRG_ATTACHMENT=$(oci network drg-attachment create \\\n  --drg-id $DRG \\\n  --display-name \"Spoke-App1-Dev-Attachment\" \\\n  --vcn-id $SPOKE2_VCN \\\n  --wait-for-state ATTACHED \\\n  --query 'data.id' --raw-output)\n```\n\n### Configure Hub NAT Gateway (Shared Egress)\n\n```bash\n# Create NAT Gateway in Hub VCN\nHUB_NAT=$(oci network nat-gateway create \\\n  --compartment-id $HUB_CMP \\\n  --vcn-id $HUB_VCN \\\n  --display-name \"Hub-NAT-Gateway\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n\n# Create Service Gateway in Hub VCN (free egress to OCI services)\nHUB_SGW=$(oci network service-gateway create \\\n  --compartment-id $HUB_CMP \\\n  --vcn-id $HUB_VCN \\\n  --services '[{\"serviceId\": \"ocid1.service.oc1.iad.xxx\"}]' \\\n  --display-name \"Hub-Service-Gateway\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n\n# Get default route table for Hub VCN\nHUB_RT=$(oci network vcn get \\\n  --vcn-id $HUB_VCN \\\n  --query 'data[\"default-route-table-id\"]' \\\n  --raw-output)\n\n# Add route to NAT Gateway for internet egress\noci network route-table update \\\n  --rt-id $HUB_RT \\\n  --route-rules '[\n    {\n      \"destination\": \"0.0.0.0/0\",\n      \"destinationType\": \"CIDR_BLOCK\",\n      \"networkEntityId\": \"'$HUB_NAT'\"\n    },\n    {\n      \"destination\": \"all-iad-services-in-oracle-services-network\",\n      \"destinationType\": \"SERVICE_CIDR_BLOCK\",\n      \"networkEntityId\": \"'$HUB_SGW'\"\n    }\n  ]' \\\n  --force\n```\n\n### Configure DRG Route Tables (Spoke-to-Hub Routing)\n\n```bash\n# Get DRG route table ID\nDRG_RT=$(oci network drg list-drg-route-tables \\\n  --drg-id $DRG \\\n  --query 'data[0].id' \\\n  --raw-output)\n\n# Add route distribution to allow spokes to reach hub\noci network drg-route-distribution create \\\n  --drg-id $DRG \\\n  --distribution-type IMPORT \\\n  --display-name \"Import-All-VCN-Routes\"\n```\n\n## Resource Manager Stacks\n\n### Upload Landing Zone Terraform Configuration\n\n```bash\n# Create ZIP file with Terraform configs\ncd landing-zone-terraform/\nzip -r ../landing-zone.zip ./*\ncd ..\n\n# Create Resource Manager stack\nSTACK=$(oci resource-manager stack create \\\n  --compartment-id $TENANCY_ID \\\n  --display-name \"OCI-Landing-Zone-Stack\" \\\n  --description \"Complete landing zone deployment\" \\\n  --config-source-type ZIP_UPLOAD \\\n  --zip-file-base64 \"$(base64 landing-zone.zip)\" \\\n  --variables '{\n    \"tenancy_ocid\": \"'$TENANCY_ID'\",\n    \"region\": \"us-ashburn-1\",\n    \"compartment_hierarchy\": true,\n    \"security_zones_enabled\": true,\n    \"hub_spoke_topology\": true\n  }' \\\n  --wait-for-state SUCCEEDED \\\n  --query 'data.id' --raw-output)\n\n# Plan the stack\nPLAN_JOB=$(oci resource-manager job create-plan-job \\\n  --stack-id $STACK \\\n  --wait-for-state SUCCEEDED \\\n  --query 'data.id' --raw-output)\n\n# Apply the stack\nAPPLY_JOB=$(oci resource-manager job create-apply-job \\\n  --stack-id $STACK \\\n  --execution-plan-strategy AUTO_APPROVED \\\n  --wait-for-state SUCCEEDED \\\n  --query 'data.id' --raw-output)\n\n# Get outputs\noci resource-manager stack get-stack-tf-state \\\n  --stack-id $STACK \\\n  --file stack-outputs.tfstate\n```\n\n## Multi-Region Setup\n\n### Create DR Region Landing Zone\n\n```bash\n# Set DR region\nexport OCI_CLI_REGION=us-phoenix-1\n\n# Create same compartment hierarchy in DR region\n# (Compartments are global, but resources are regional)\n\n# Create DR Hub VCN\nDR_HUB_VCN=$(oci network vcn create \\\n  --compartment-id $HUB_CMP \\\n  --display-name \"Hub-VCN-DR\" \\\n  --cidr-blocks '[\"10.100.0.0/16\"]' \\\n  --dns-label \"hubdr\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n\n# Create DR DRG\nDR_DRG=$(oci network drg create \\\n  --compartment-id $NETWORK_CMP \\\n  --display-name \"Hub-Spoke-DRG-DR\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n\n# Create Remote Peering Connection (primary to DR)\nexport OCI_CLI_REGION=us-ashburn-1\nPRIMARY_RPC=$(oci network remote-peering-connection create \\\n  --compartment-id $NETWORK_CMP \\\n  --drg-id $DRG \\\n  --display-name \"Primary-to-DR-RPC\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n\nexport OCI_CLI_REGION=us-phoenix-1\nDR_RPC=$(oci network remote-peering-connection create \\\n  --compartment-id $NETWORK_CMP \\\n  --drg-id $DR_DRG \\\n  --display-name \"DR-to-Primary-RPC\" \\\n  --wait-for-state AVAILABLE \\\n  --query 'data.id' --raw-output)\n\n# Connect the peering\noci network remote-peering-connection connect \\\n  --remote-peering-connection-id $DR_RPC \\\n  --peer-id $PRIMARY_RPC \\\n  --peer-region-name us-ashburn-1\n```\n\n## Validation and Reporting\n\n### List All Landing Zone Resources\n\n```bash\n# List compartments\noci iam compartment list \\\n  --compartment-id $TENANCY_ID \\\n  --compartment-id-in-subtree true \\\n  --all \\\n  --output table\n\n# List VCNs across all compartments\noci network vcn list \\\n  --compartment-id $TENANCY_ID \\\n  --all \\\n  --output table\n\n# List Security Zones\noci cloud-guard security-zone list \\\n  --compartment-id $TENANCY_ID \\\n  --compartment-id-in-subtree true \\\n  --all \\\n  --output table\n\n# List Budgets\noci budgets budget list \\\n  --compartment-id $TENANCY_ID \\\n  --output table\n```\n\n### Generate Cost Report by Compartment\n\n```bash\n# Get usage data for compartment\noci usage-api usage summarized-usage get \\\n  --tenant-id $TENANCY_ID \\\n  --time-usage-started \"2026-01-01T00:00:00Z\" \\\n  --time-usage-ended \"2026-01-31T23:59:59Z\" \\\n  --granularity MONTHLY \\\n  --query-type COST \\\n  --group-by \"[\\\"compartmentPath\\\"]\" \\\n  --output json | jq '.data.items[] | {\n    compartment: .tags[\"Oracle-Tags\"][\"CreatedBy\"],\n    cost: .[\"computed-amount\"]\n  }'\n```\n\n## Best Practices\n\n### Always Use --wait-for-state\n\n```bash\n# ‚úÖ GOOD - waits for compartment to be active\noci iam compartment create \\\n  --compartment-id $TENANCY_ID \\\n  --name \"Prod\" \\\n  --wait-for-state ACTIVE\n\n# ‚ùå BAD - returns immediately, compartment may not be ready\noci iam compartment create \\\n  --compartment-id $TENANCY_ID \\\n  --name \"Prod\"\n```\n\n### Use Environment Variables for OCIDs\n\n```bash\n# ‚úÖ GOOD - reusable, maintainable\nPROD_CMP=$(oci iam compartment create ... --query 'data.id' --raw-output)\noci network vcn create --compartment-id $PROD_CMP\n\n# ‚ùå BAD - error-prone\noci network vcn create --compartment-id ocid1.compartment.oc1..xxx\n```\n\n### Document CIDR Allocations\n\n```bash\n# Maintain CIDR allocation table\ncat > cidr-allocation.txt <<EOF\nHub VCN: 10.0.0.0/16\nSpoke-App1-Prod: 10.10.0.0/16\nSpoke-App1-Test: 10.20.0.0/16\nSpoke-App1-Dev: 10.30.0.0/16\nSpoke-App2-Prod: 10.40.0.0/16\nOn-premises: 172.16.0.0/12\nReserved-Future: 10.50.0.0/16 - 10.99.0.0/16\nEOF\n\n# Check for overlaps before creating VCN\ngrep \"10.10.0.0\" cidr-allocation.txt\n```\n\n## When to Use Landing Zone CLI\n\n**Use these commands when you need to:**\n- Set up initial OCI tenancy structure\n- Create compartment hierarchies\n- Implement Security Zones and Cloud Guard\n- Configure tagging strategy\n- Deploy hub-spoke network topology\n- Create budgets and cost controls\n- Implement multi-region DR\n\n**Don't use for:**\n- Individual resource creation (covered in service-specific skills)\n- Day-to-day operations (use service-specific CLIs)\n- Troubleshooting (covered in other skills)\n",
        "skills/landing-zones/references/landing-zone-patterns.md": "# OCI Landing Zone Patterns Reference\n\n## Landing Zone Topology Patterns\n\n### Pattern 1: Hub-Spoke Topology (Recommended for Multi-Tenancy)\n\n```\n                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n                    ‚îÇ   Hub VCN (10.0.0.0/16) ‚îÇ\n                    ‚îÇ                         ‚îÇ\n                    ‚îÇ  - Network Firewall     ‚îÇ\n                    ‚îÇ  - NAT Gateway          ‚îÇ\n                    ‚îÇ  - Service Gateway      ‚îÇ\n                    ‚îÇ  - DRG (on-prem)        ‚îÇ\n                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                                 ‚îÇ\n                                DRG\n                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n                    ‚îÇ            ‚îÇ            ‚îÇ\n        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n        ‚îÇ Spoke 1 VCN  ‚îÇ  ‚îÇ Spoke 2 VCN‚îÇ  ‚îÇ Spoke 3 VCN  ‚îÇ\n        ‚îÇ App1-Prod    ‚îÇ  ‚îÇ App2-Prod  ‚îÇ  ‚îÇ Shared-Svcs  ‚îÇ\n        ‚îÇ 10.10.0.0/16 ‚îÇ  ‚îÇ 10.20.0.0/16‚îÇ ‚îÇ 10.30.0.0/16 ‚îÇ\n        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\nBenefits:\n- Centralized egress control (cost + security)\n- Spoke isolation (network segmentation)\n- Shared services (DNS, monitoring, bastion)\n- Transitive routing via DRG\n\nCost savings: $3,000-5,000/month via single NAT Gateway vs per-VCN\n```\n\n### Pattern 2: Multi-Compartment Hierarchy\n\n```\nTenancy (Root)\n‚îÇ\n‚îú‚îÄ Network [Network admins only]\n‚îÇ   ‚îú‚îÄ Hub\n‚îÇ   ‚îî‚îÄ Spokes\n‚îÇ\n‚îú‚îÄ Security [Security team only]\n‚îÇ   ‚îú‚îÄ Vault (keys, secrets)\n‚îÇ   ‚îú‚îÄ Bastion\n‚îÇ   ‚îî‚îÄ Logging (audit logs, flow logs)\n‚îÇ\n‚îú‚îÄ Workloads [Application teams]\n‚îÇ   ‚îú‚îÄ App1\n‚îÇ   ‚îÇ   ‚îú‚îÄ Dev [Developers full access]\n‚îÇ   ‚îÇ   ‚îú‚îÄ Test [QA full access]\n‚îÇ   ‚îÇ   ‚îî‚îÄ Prod [SRE read, operators limited write]\n‚îÇ   ‚îÇ\n‚îÇ   ‚îî‚îÄ App2\n‚îÇ       ‚îú‚îÄ Dev\n‚îÇ       ‚îú‚îÄ Test\n‚îÇ       ‚îî‚îÄ Prod\n‚îÇ\n‚îú‚îÄ Shared-Services [Platform team]\n‚îÇ   ‚îú‚îÄ Identity (IDCS, federation)\n‚îÇ   ‚îú‚îÄ Monitoring (APM, Logging Analytics)\n‚îÇ   ‚îî‚îÄ DevOps (CI/CD, artifact registry)\n‚îÇ\n‚îî‚îÄ Sandbox [Developers experiment, auto-delete after 30 days]\n    ‚îú‚îÄ User1-Sandbox\n    ‚îî‚îÄ User2-Sandbox\n\nPolicy inheritance:\n- Network policies apply to Hub + Spokes\n- Workload policies apply to all App environments\n- Sandbox policies enforce auto-cleanup\n```\n\n### Pattern 3: Security Zones & Cloud Guard Integration\n\n```\nCompartment: Prod\n‚îÇ\n‚îú‚îÄ Security Zone Recipe: CIS-Level-1\n‚îÇ   ‚îú‚îÄ deny-public-ip-on-compute\n‚îÇ   ‚îú‚îÄ deny-public-bucket\n‚îÇ   ‚îú‚îÄ require-encryption-at-rest\n‚îÇ   ‚îú‚îÄ require-encryption-in-transit\n‚îÇ   ‚îî‚îÄ deny-internet-gateway-in-private-subnet\n‚îÇ\n‚îú‚îÄ Cloud Guard Target\n‚îÇ   ‚îú‚îÄ Detector: Configuration issues\n‚îÇ   ‚îú‚îÄ Detector: Activity anomalies\n‚îÇ   ‚îî‚îÄ Responder: Auto-remediate violations\n‚îÇ\n‚îî‚îÄ Resources\n    ‚îú‚îÄ Compute: Public IP blocked ‚úì\n    ‚îú‚îÄ Object Storage: Private only ‚úì\n    ‚îú‚îÄ ADB: TDE enabled ‚úì\n    ‚îî‚îÄ Load Balancer: SSL enforced ‚úì\n\nResult: Security violations prevented at creation time, not detected after\n```\n\n## Compartment Design Decision Tree\n\n```\n\"How should I structure compartments?\"\n‚îÇ\n‚îú‚îÄ Single application, simple lifecycle?\n‚îÇ   ‚îî‚îÄ Pattern: Workload-centric\n‚îÇ       Workloads/\n‚îÇ         ‚îî‚îÄ MyApp/\n‚îÇ             ‚îú‚îÄ Dev\n‚îÇ             ‚îú‚îÄ Test\n‚îÇ             ‚îî‚îÄ Prod\n‚îÇ\n‚îú‚îÄ Multiple applications, shared platform?\n‚îÇ   ‚îî‚îÄ Pattern: Environment-centric\n‚îÇ       Workloads/\n‚îÇ         ‚îú‚îÄ Dev/\n‚îÇ         ‚îÇ   ‚îú‚îÄ App1\n‚îÇ         ‚îÇ   ‚îî‚îÄ App2\n‚îÇ         ‚îú‚îÄ Test/\n‚îÇ         ‚îÇ   ‚îú‚îÄ App1\n‚îÇ         ‚îÇ   ‚îî‚îÄ App2\n‚îÇ         ‚îî‚îÄ Prod/\n‚îÇ             ‚îú‚îÄ App1\n‚îÇ             ‚îî‚îÄ App2\n‚îÇ\n‚îú‚îÄ Multi-tenant SaaS (customers isolated)?\n‚îÇ   ‚îî‚îÄ Pattern: Tenant-centric\n‚îÇ       Tenants/\n‚îÇ         ‚îú‚îÄ Customer-A/\n‚îÇ         ‚îÇ   ‚îú‚îÄ Network\n‚îÇ         ‚îÇ   ‚îú‚îÄ Compute\n‚îÇ         ‚îÇ   ‚îî‚îÄ Database\n‚îÇ         ‚îî‚îÄ Customer-B/\n‚îÇ             ‚îú‚îÄ Network\n‚îÇ             ‚îú‚îÄ Compute\n‚îÇ             ‚îî‚îÄ Database\n‚îÇ\n‚îî‚îÄ Large enterprise, multiple business units?\n    ‚îî‚îÄ Pattern: Business-unit-centric\n        BusinessUnits/\n          ‚îú‚îÄ BU-Engineering/\n          ‚îÇ   ‚îî‚îÄ [Workload-centric per BU]\n          ‚îú‚îÄ BU-Marketing/\n          ‚îÇ   ‚îî‚îÄ [Workload-centric per BU]\n          ‚îî‚îÄ BU-Sales/\n              ‚îî‚îÄ [Workload-centric per BU]\n\nKey principle: Choose hierarchy that matches org structure + cost allocation\n```\n\n## Network Topology Decision Tree\n\n```\n\"Which network pattern should I use?\"\n‚îÇ\n‚îú‚îÄ Single application, no shared services?\n‚îÇ   ‚îî‚îÄ Single VCN\n‚îÇ       Cost: Lowest\n‚îÇ       Complexity: Simplest\n‚îÇ       Use when: Proof of concept, single app\n‚îÇ\n‚îú‚îÄ Multiple apps, need isolation, shared egress?\n‚îÇ   ‚îî‚îÄ Hub-Spoke via DRG\n‚îÇ       Cost: $100/month DRG + $45/month NAT (shared)\n‚îÇ       Complexity: Medium\n‚îÇ       Egress savings: $3,000-5,000/month\n‚îÇ       Use when: Multi-app production\n‚îÇ\n‚îú‚îÄ Multi-region disaster recovery?\n‚îÇ   ‚îî‚îÄ Hub-Spoke + DRG Remote Peering\n‚îÇ       Primary Region: Hub-Spoke\n‚îÇ       DR Region: Hub-Spoke\n‚îÇ       Cost: +$100/month DRG per region\n‚îÇ       Use when: RTO < 1 hour required\n‚îÇ\n‚îî‚îÄ On-premises integration?\n    ‚îî‚îÄ Hub-Spoke + FastConnect\n        Hub VCN: FastConnect ‚Üí On-prem\n        Spokes: Route via hub\n        Cost: $500-2,000/month FastConnect\n        Use when: Hybrid cloud architecture\n```\n\n## Tagging Strategy\n\n### Required Tags (Mandatory)\n```yaml\nTag Namespace: Organization\nTags:\n  - CostCenter: [Finance code for chargeback]\n    Type: String\n    Mandatory: Yes\n    Default: None\n\n  - Environment: [Dev | Test | Prod | Sandbox]\n    Type: Enum\n    Mandatory: Yes\n    Default: None\n\n  - Owner: [Email or team name]\n    Type: String\n    Mandatory: Yes\n    Default: ${iam.principal.name}\n\n  - DataClassification: [Public | Internal | Confidential | Restricted]\n    Type: Enum\n    Mandatory: Yes (for data resources)\n    Default: Internal\n\n  - BackupPolicy: [None | Bronze | Silver | Gold]\n    Type: Enum\n    Mandatory: Yes (for stateful resources)\n    Default: Bronze\n```\n\n### Optional Tags (Recommended)\n```yaml\n  - Project: [Project or product name]\n  - ExpiryDate: [Auto-cleanup date for sandbox]\n  - Compliance: [PCI | HIPAA | SOC2]\n  - ManagedBy: [Terraform | Manual | Ansible]\n```\n\n## Cost Allocation Patterns\n\n### Budget Hierarchy\n```\nTenancy Budget: $100,000/month\n‚îú‚îÄ Network: $10,000/month (fixed)\n‚îú‚îÄ Security: $5,000/month (fixed)\n‚îú‚îÄ Workloads: $75,000/month\n‚îÇ   ‚îú‚îÄ App1-Dev: $5,000/month\n‚îÇ   ‚îú‚îÄ App1-Test: $8,000/month\n‚îÇ   ‚îú‚îÄ App1-Prod: $25,000/month\n‚îÇ   ‚îú‚îÄ App2-Dev: $3,000/month\n‚îÇ   ‚îú‚îÄ App2-Test: $4,000/month\n‚îÇ   ‚îî‚îÄ App2-Prod: $30,000/month\n‚îî‚îÄ Shared-Services: $10,000/month\n\nAlerts:\n- 50% threshold: Warning\n- 80% threshold: Critical (page on-call)\n- 100% threshold: Auto-stop dev/test resources\n```\n",
        "skills/monitoring-operations/SKILL.md": "---\nname: monitoring-operations\ndescription: Use when setting up metrics, alarms, or troubleshooting missing data in OCI Monitoring. Covers metric namespace confusion, alarm threshold gotchas, log collection setup, and common monitoring gaps.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI Monitoring and Observability - Expert Knowledge\n\n## üèóÔ∏è Use OCI Landing Zone Terraform Modules\n\n**Don't reinvent the wheel.** Use [oracle-terraform-modules/landing-zone](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones) for observability stack.\n\n**Landing Zone solves:**\n- ‚ùå Bad Practice #10: No logging, monitoring, notifications (Landing Zone deploys complete observability)\n- ‚ùå Bad Practice #7: Limited security services (Landing Zone integrates Cloud Guard, VSS, OSMS)\n\n**This skill provides**: Metrics, alarms, and troubleshooting for monitoring deployed WITHIN a Landing Zone.\n\n---\n\n## ‚ö†Ô∏è OCI CLI/API Knowledge Gap\n\n**You don't know OCI CLI commands or OCI API structure.**\n\nYour training data has limited and outdated knowledge of:\n- OCI CLI syntax and parameters (updates monthly)\n- OCI API endpoints and request/response formats\n- Monitoring service CLI operations (`oci monitoring alarm`, `oci monitoring metric`)\n- Metric namespaces and MQL (Monitoring Query Language)\n- Latest Logging and Service Connector features\n\n**When OCI operations are needed:**\n1. Use exact CLI commands from this skill's references\n2. Do NOT guess metric namespace names\n3. Do NOT assume AWS CloudWatch patterns work in OCI\n4. Load reference files for detailed MQL documentation\n\n**What you DO know:**\n- General observability concepts\n- Alerting and threshold design principles\n- Log aggregation patterns\n\nThis skill bridges the gap by providing current OCI-specific monitoring patterns and gotchas.\n\n---\n\n## NEVER Do This\n\n‚ùå **NEVER assume metrics are instant (10-15 minute lag)**\n- Metrics published every 1-5 minutes\n- Processing delay: 5-10 minutes\n- **Total lag**: 10-15 minutes from event to visible metric\n- Don't debug \"missing metrics\" within first 15 minutes of resource creation\n\n‚ùå **NEVER use `=` for alarm thresholds with sparse metrics**\n```\n# WRONG - alarm never fires if metric has gaps\nMetricName[1m].mean() = 0\n\n# RIGHT - handle missing data\nMetricName[1m]{dataMissing=zero}.mean() > 0\n```\n\n‚ùå **NEVER forget metric dimensions (causes \"no data\")**\n```\n# WRONG - missing required dimension\nCPUUtilization[1m].mean()\n\n# RIGHT - include resourceId dimension\nCPUUtilization[1m]{resourceId=\"<instance-ocid>\"}.mean()\n```\n\n‚ùå **NEVER set alarm thresholds without trigger delay (alert fatigue)**\n```\n# BAD - fires on every CPU spike\nCPUUtilization[1m].mean() > 80\n\n# BETTER - sustained high CPU\nCPUUtilization[5m].mean() > 80\nTrigger delay: 5 minutes (fires after 5 consecutive breaches)\n```\n\n‚ùå **NEVER create alarms without notification channels**\n```\n# WRONG - alarm fires but nobody knows\noci monitoring alarm create ... --destinations '[]'\n\n# RIGHT - always link to notification topic\noci monitoring alarm create ... --destinations '[\"<notification-topic-ocid>\"]'\n```\nCost impact: Undetected outages cost $5,000-50,000/hour in production\n\n‚ùå **NEVER ignore Cloud Guard findings (security audit failure)**\n- Cloud Guard detects misconfigurations BEFORE they become incidents\n- Integrate Cloud Guard ‚Üí Notifications ‚Üí Email/Slack/PagerDuty\n- Cost impact: $100,000+ per security breach vs $0 for proactive remediation\n\n## Metric Namespace Gotchas\n\n**OCI Metrics Use Service-Specific Namespaces:**\n\n| Service | Namespace | Example Metric |\n|---------|-----------|----------------|\n| Compute | `oci_computeagent` | `CPUUtilization`, `MemoryUtilization` |\n| Autonomous DB | `oci_autonomous_database` | `CpuUtilization`, `StorageUtilization` |\n| Load Balancer | `oci_lbaas` | `HttpRequests`, `UnHealthyBackendServers` |\n| Object Storage | `oci_objectstorage` | `ObjectCount`, `BytesUploaded` |\n\n**Common Mistake**: Using wrong namespace (`oci_compute` vs `oci_computeagent`)\n\n## Alarm Missing Data Handling\n\n| Setting | Behavior | Use When |\n|---------|----------|----------|\n| `treatMissingDataAsBreaching` | Alarm fires if no data | Critical services (outage = breach) |\n| `treatMissingDataAsNotBreaching` | Alarm silent if no data | Optional monitoring |\n| `{dataMissing=zero}` | Treat missing as 0 | Counters (requests/sec) |\n\n## Log Collection Common Gaps\n\n**Problem**: Logs not showing in Log Analytics\n\n```\nLogs not appearing?\n‚îú‚îÄ Is log enabled on resource?\n‚îÇ  ‚îî‚îÄ Compute: oci-compute-agent must be running\n‚îÇ  ‚îî‚îÄ Function: Logging enabled in function config\n‚îÇ\n‚îú‚îÄ Is Service Connector configured?\n‚îÇ  ‚îî‚îÄ Source: Log Group ‚Üí Target: Log Analytics\n‚îÇ  ‚îî‚îÄ Check: Service Connector status = ACTIVE\n‚îÇ\n‚îú‚îÄ IAM policy for Service Connector?\n‚îÇ  ‚îî‚îÄ \"Allow any-user to use log-content in tenancy\"\n‚îÇ  ‚îî‚îÄ \"Allow service loganalytics to READ logcontent in tenancy\"\n‚îÇ\n‚îî‚îÄ 10-15 minute ingestion lag?\n   ‚îî‚îÄ Wait before debugging\n```\n\n## Metric Query Optimization\n\n**Expensive** (slow):\n```\n# Queries ALL instances\nCPUUtilization[1m].mean()\n```\n\n**Optimized** (filter by dimension):\n```\n# Query specific instance\nCPUUtilization[1m]{resourceId='<instance-ocid>'}.mean()\n```\n\n**Cost**: Queries free, but rate limited (1000 req/min)\n\n## Progressive Loading References\n\n### OCI Monitoring Reference (Official Oracle Documentation)\n\n**WHEN TO LOAD** [`oci-monitoring-reference.md`](references/oci-monitoring-reference.md):\n- Need comprehensive list of all OCI service metrics\n- Understanding MQL (Monitoring Query Language) in depth\n- Implementing complex alarm conditions and composites\n- Need official Oracle guidance on Logging and Service Connector\n- Setting up Log Analytics and APM integration\n\n**Do NOT load** for:\n- Quick alarm setup (examples in this skill)\n- Common metric patterns (tables above)\n- Troubleshooting decision trees (covered above)\n\n---\n\n## When to Use This Skill\n\n- Alarms: threshold configuration, missing data handling, trigger delay\n- Troubleshooting: metrics not showing, alarms not firing, namespace errors\n- Log collection: Service Connector, IAM policies, missing logs\n- Performance: query optimization, dimension filtering\n",
        "skills/networking-management/SKILL.md": "---\nname: networking-management\ndescription: Use when designing OCI networks, troubleshooting connectivity, optimizing egress costs, or configuring VCN security. Covers Service Gateway cost savings, VCN CIDR immutability, Security List vs NSG tradeoffs, VCN peering limitations, and Load Balancer subnet requirements.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI Networking - Expert Knowledge\n\n## üèóÔ∏è IMPORTANT: Use OCI Landing Zone Terraform Modules\n\n### Do NOT Reinvent the Wheel\n\n**‚úÖ Use Official OCI Landing Zone Modules for Network Architecture**\n\nThe OCI Landing Zone includes pre-built, battle-tested network topologies:\n- Hub-spoke VCN architecture with DRG\n- Security Zones and Network Firewall integration\n- Service Gateway and NAT Gateway configuration\n- VCN peering and routing tables\n- Network Security Groups and Security Lists\n\n```hcl\nmodule \"landing_zone\" {\n  source  = \"oracle-terraform-modules/landing-zone/oci\"\n  network_configuration = {\n    default_enable_cis_checks = true\n    network_configuration_categories = {\n      hub = { ... }\n      spokes = { ... }\n    }\n  }\n}\n```\n\n**Official Resources:**\n- [OCI Landing Zone Network Modules](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones)\n- [Hub-Spoke Reference Architecture](https://docs.oracle.com/en/solutions/oci-hub-spoke-network/)\n\n---\n\n## ‚ö†Ô∏è OCI CLI/API Knowledge Gap\n\n**You don't know OCI CLI commands or OCI API structure.**\n\nYour training data has limited and outdated knowledge of:\n- OCI CLI syntax and parameters (updates monthly)\n- OCI API endpoints and request/response formats\n- Networking service CLI operations (`oci network vcn`, `oci network subnet`)\n- VCN limits, peering constraints, and routing rules\n- Latest networking features (DRGv2, Network Firewall)\n\n**When OCI operations are needed:**\n1. Use exact CLI commands from this skill's references\n2. Do NOT guess OCI networking CLI syntax\n3. Do NOT assume AWS VPC patterns work in OCI\n4. Load reference files for detailed networking CLI documentation\n\n**What you DO know:**\n- General networking concepts (CIDR, routing, subnets)\n- Security group and firewall principles\n- Load balancing and connectivity patterns\n\nThis skill bridges the gap by providing current OCI-specific networking patterns and gotchas.\n\n---\n\nYou are an OCI networking expert. This skill provides knowledge Claude lacks: Service Gateway egress savings, VCN CIDR immutability, Security List limits, VCN peering gotchas, and OCI-specific networking anti-patterns.\n\n## NEVER Do This\n\n‚ùå **NEVER route Oracle service traffic via Internet Gateway (expensive)**\n```\nService Gateway routing saves egress costs:\n\n# WRONG - route Object Storage via Internet Gateway\nRoute: 0.0.0.0/0 ‚Üí Internet Gateway\nCost: 10 TB to Object Storage = $85/month egress\n\n# RIGHT - route Oracle services via Service Gateway\nRoute: <oci-services-cidr> ‚Üí Service Gateway\nCost: 10 TB to Object Storage = $0 (FREE!)\n\nSavings example (database backups to Object Storage):\n- Without Service Gateway: 20 TB/month √ó $0.0085/GB = $170/month\n- With Service Gateway: $0/month\n- Annual savings: $2,040\n\nService Gateway supports:\n‚úì Object Storage (all tiers)\n‚úì Autonomous Database (for private endpoint ADB)\n‚úì Oracle Services Network (OSN)\n```\n\n**Critical**: Service Gateway egress is FREE, Internet Gateway egress is CHARGED\n\n‚ùå **NEVER forget VCN CIDR cannot be changed (immutable)**\n```\n# WRONG - create VCN with /24, plan to expand later\noci network vcn create --cidr-block \"10.0.0.0/24\"\n# Cannot expand to /16 later (OCI limitation!)\n\n# If you run out of IPs:\n1. Create new VCN with larger CIDR\n2. Migrate all resources (hours of downtime)\n3. Update DNS, security rules, route tables\n4. Delete old VCN\n\nMigration cost: Hours of downtime, IP address changes, extensive reconfiguration\n\n# RIGHT - plan for growth from day 1\noci network vcn create --cidr-block \"10.0.0.0/16\"\n# Room for 256 /24 subnets, 65,536 IPs total\n\nBest practice: Use /16 for VCNs, /24 for subnets\n```\n\n‚ùå **NEVER exceed 5 Security Lists per subnet (hard limit)**\n```\nOCI limit: Maximum 5 security lists per subnet\n\n# Problem: Complex app with many tiers\nSubnet needs rules for:\n- Web traffic (80, 443)\n- SSH access\n- Monitoring agents\n- Database clients\n- Logging services\n... 10+ security lists needed? IMPOSSIBLE!\n\n# WRONG - try to add 6th security list\noci network subnet update \\\n  --subnet-id <ocid> \\\n  --security-list-ids '[\"<sl1>\",\"<sl2>\",\"<sl3>\",\"<sl4>\",\"<sl5>\",\"<sl6>\"]'\n# FAILS: \"Maximum security lists (5) exceeded\"\n\n# RIGHT - use Network Security Groups (NSGs) instead\nNSG limits:\n- 5 NSGs per resource (same as security lists)\n- 120 rules per NSG (vs unlimited in security lists)\n- Unlimited NSGs per VCN\n\nMigration strategy:\n1. Security Lists: Baseline rules (internet, DNS, ICMP)\n2. NSGs: Application-specific rules (app tier ‚Üí DB tier)\n```\n\n**Best practice**: Security Lists for subnet-wide rules, NSGs for resource-specific rules\n\n‚ùå **NEVER assume VCN peering supports transitive routing**\n```\nScenario: VCN-A ‚Üî VCN-B ‚Üî VCN-C (peered)\n\n# WRONG assumption: A can reach C via B\nVCN-A instance: ping <VCN-C-instance>\n# FAILS! Transitive routing NOT supported\n\n# OCI VCN peering is NON-TRANSITIVE:\nVCN-A can reach: VCN-B only\nVCN-C can reach: VCN-B only\nVCN-A CANNOT reach VCN-C\n\n# RIGHT - explicit peering required\nCreate peering: VCN-A ‚Üî VCN-C\nNow A can reach C directly\n\nPeering types:\n1. Local peering: Same region, FREE\n2. Remote peering: Cross-region, requires DRG ($0.01/hr)\n\nCost impact (3-VCN mesh):\n- Without transitive: 3 peerings (A-B, B-C, A-C)\n- Remote peering: 3 √ó $7.30/month = $21.90/month\n```\n\n‚ùå **NEVER use /27 or smaller for Load Balancer subnets**\n```\nLoad Balancer subnet requirements:\n- Minimum /24 CIDR (256 IPs)\n- 2 subnets in different ADs (for HA)\n- Each subnet needs space for:\n  * LB frontends (1-5 IPs)\n  * LB backends (dynamic scaling)\n  * Reserved IPs (5-10 per subnet)\n\n# WRONG - /27 subnet for LB\noci network subnet create --cidr-block \"10.0.1.0/27\"\n# Only 32 IPs total (27 usable after OCI reserves 5)\n# LB creation FAILS: \"Insufficient IP space\"\n\n# RIGHT - /24 minimum\noci network subnet create --cidr-block \"10.0.1.0/24\"\n# 256 IPs, room for scaling\n\nGotcha: LB reserves IPs even when not scaling (future capacity)\n```\n\n‚ùå **NEVER delete default route table (breaks subnets)**\n```\nEvery VCN has a default route table (auto-created):\n- Cannot be deleted (while VCN exists)\n- Can be modified\n\n# WRONG - try to delete default route table\noci network route-table delete --rt-id <default-rt-ocid>\n# FAILS: \"Cannot delete default route table\"\n\n# Workaround: Create custom route tables for subnets\n1. Create new route table\n2. Associate subnet with new route table\n3. Leave default route table unused (orphaned but exists)\n```\n\n‚ùå **NEVER assume Security Lists are stateless (they're stateful!)**\n```\nCommon confusion: OCI Security Lists vs AWS Security Groups\n\nOCI Security Lists: STATEFUL\n- Ingress rule allows TCP 443 ‚Üí auto-allows response traffic\n- No need for explicit egress rule for responses\n\nAWS Security Groups: Also STATEFUL (same behavior)\nAWS Network ACLs: STATELESS (different, requires both directions)\n\n# WRONG (from AWS NACL habit): Add both ingress and egress\nSecurity List ingress: Allow TCP 443 from 0.0.0.0/0\nSecurity List egress: Allow TCP 1024-65535 to 0.0.0.0/0  # Unnecessary!\n\n# RIGHT - ingress rule only\nSecurity List ingress: Allow TCP 443 from 0.0.0.0/0\n# Response traffic auto-allowed (stateful)\n```\n\n## Networking Cost Optimization\n\n### Service Gateway Savings\n\n**Scenario: Database backups to Object Storage**\n\n```\nMonthly backup: 30 TB uploaded to Object Storage\n\nWithout Service Gateway (via Internet Gateway):\n- Route: 0.0.0.0/0 ‚Üí Internet Gateway\n- Egress cost: 30,000 GB √ó $0.0085/GB = $255/month\n- Ingress: FREE (always free in OCI)\n\nWith Service Gateway:\n- Route: <oci-services-cidr> ‚Üí Service Gateway\n- Egress cost: $0 (FREE!)\n- Ingress: FREE\n\nAnnual savings: $255 √ó 12 = $3,060/year\n```\n\n**Service Gateway routing example**:\n```bash\n# Get OCI Services CIDR for your region\noci network service list --all\n\n# Create Service Gateway\noci network service-gateway create \\\n  --compartment-id <ocid> \\\n  --vcn-id <vcn-ocid> \\\n  --services '[{\"serviceId\":\"<all-services-ocid>\"}]' \\\n  --display-name \"ServiceGateway\"\n\n# Add route in private subnet route table\n# Destination: <oci-services-cidr> (e.g., all-phx-services-in-oracle-services-network)\n# Target: Service Gateway OCID\n```\n\n### FastConnect vs VPN Cost Comparison\n\n```\nScenario: Hybrid cloud connectivity, 500 GB/month data transfer\n\nVPN (Site-to-Site):\n- VPN tunnel: $0.05/hr √ó 730 hrs = $36.50/month\n- Data processed: FREE (no per-GB charge)\n- Egress: 500 GB √ó $0.0085/GB = $4.25/month\nTotal: $40.75/month\n\nFastConnect (1 Gbps):\n- Port: $1,100/month (flat rate)\n- Data transfer: FREE (unlimited)\nTotal: $1,100/month\n\nBreakeven: When egress > 126 GB/month, consider FastConnect\nOr: When predictable latency required (FastConnect = 5-20ms, VPN = 30-50ms)\n\nVPN use case: Dev/test, <100 GB/month\nFastConnect use case: Production, >500 GB/month, low latency\n```\n\n## VCN Design Anti-Patterns\n\n**Anti-pattern: Single subnet for all tiers**\n\n```\n# WRONG - web, app, DB in one subnet\nSubnet: 10.0.1.0/24 (all resources)\nSecurity: Broad security list (many open ports)\nRisk: Lateral movement, no segmentation\n\n# RIGHT - subnet per tier\nSubnet 1: 10.0.1.0/24 (web tier, public)\nSubnet 2: 10.0.2.0/24 (app tier, private)\nSubnet 3: 10.0.3.0/24 (DB tier, private)\n\nNSGs:\n- Web NSG: Allow 80/443 from internet\n- App NSG: Allow 8080 from Web NSG only\n- DB NSG: Allow 1521 from App NSG only\n\nBenefits:\n‚úì Blast radius containment\n‚úì Granular security\n‚úì Clear network segmentation\n‚úì Compliance (PCI-DSS, HIPAA)\n```\n\n**Anti-pattern: /28 subnets (too small)**\n\n```\n# WRONG - tiny subnets\nVCN: 10.0.0.0/16\nSubnets: /28 (16 IPs each, 11 usable after OCI reserves 5)\n\nProblem: No room for scaling\n- 10 instances = 10 IPs\n- Add 2 more instances? No space!\n- Must create new subnet, migrate resources\n\n# RIGHT - adequate sizing\nVCN: 10.0.0.0/16\nSubnets: /24 (256 IPs each, 251 usable)\n\nSizing guide:\n- Small app: /26 (64 IPs, 59 usable)\n- Medium app: /24 (256 IPs, 251 usable)\n- Large app: /23 (512 IPs, 507 usable)\n- Load Balancer: /24 minimum (hard requirement)\n```\n\n## VCN Peering Gotchas\n\n**Local Peering** (same region):\n```\nCost: FREE\nLatency: <1ms (same as within VCN)\nUse case: Multi-VCN design (security boundaries)\n\nSetup:\n1. Create Local Peering Gateway (LPG) in each VCN\n2. Connect LPGs (bidirectional)\n3. Add routes in each VCN:\n   VCN-A route: <VCN-B-CIDR> ‚Üí LPG\n   VCN-B route: <VCN-A-CIDR> ‚Üí LPG\n\nLimitation: Same region only (cannot peer Phoenix ‚Üî Ashburn)\n```\n\n**Remote Peering** (cross-region):\n```\nCost: $0.01/hr per DRG connection = $7.30/month\nLatency: Geography-dependent (Phoenix ‚Üî Ashburn = ~70ms)\nUse case: Multi-region DR, global applications\n\nSetup:\n1. Create DRG in each region\n2. Attach DRG to VCN (each region)\n3. Create Remote Peering Connection (RPC) on each DRG\n4. Connect RPCs (cross-region)\n5. Add routes in each VCN\n\nCost example (3 regions interconnected):\n- 3 DRG attachments: 3 √ó $7.30/month = $21.90/month\n```\n\n**Transitive routing NOT supported**:\n```\nVCN-A ‚Üî VCN-B ‚Üî On-Premises (via VPN)\n\n# WRONG assumption: A can reach on-premises via B\nVCN-A ‚Üí VCN-B ‚Üí On-Prem (FAILS!)\n\n# RIGHT - hub-and-spoke with DRG\nVCN-A ‚Üí DRG ‚Üê On-Premises\nVCN-B ‚Üí DRG ‚Üê On-Premises\n\nDRG acts as router (supports transitive)\nAll VCNs can reach on-premises\nAll VCNs can reach each other\n```\n\n## Security List vs NSG Decision Matrix\n\n| Use Case | Use Security Lists | Use NSGs |\n|----------|-------------------|----------|\n| **Subnet-wide baseline** (DNS, NTP, ICMP) | ‚úì | |\n| **Internet egress** (all resources) | ‚úì | |\n| **Application tier isolation** (app ‚Üí DB) | | ‚úì |\n| **Resource-specific rules** (this DB only) | | ‚úì |\n| **Complex app** (>5 security lists needed) | | ‚úì |\n| **Instance-level security** (per-instance rules) | | ‚úì |\n\n**Recommended pattern**:\n```\n1 Security List per subnet (baseline):\n- Allow all egress\n- Allow ICMP (ping)\n- Allow DNS (UDP 53)\n- Allow NTP (if needed)\n\nMultiple NSGs per VCN (application):\n- Web NSG: Allow 80/443 from internet\n- App NSG: Allow 8080 from Web NSG\n- DB NSG: Allow 1521 from App NSG\n- Monitor NSG: Allow 9090 from management subnet\n\nAssign:\n- All instances: Security List (via subnet)\n- Web instances: Web NSG\n- App instances: App NSG\n- DB instances: DB NSG + Monitor NSG\n```\n\n## Progressive Loading References\n\n### OCI Networking Reference (Official Oracle Documentation)\n\n**WHEN TO LOAD** [`oci-networking-reference.md`](references/oci-networking-reference.md):\n- Need comprehensive VCN and subnet configuration details\n- Understanding Security Lists vs NSGs in depth\n- Implementing DRG, FastConnect, or VPN configurations\n- Troubleshooting complex routing issues\n- Need official Oracle networking best practices\n\n**Do NOT load** for:\n- Quick CIDR allocation (tables in this skill)\n- Basic NSG vs Security List choice (decision tree above)\n- Service Gateway cost savings (covered in this skill)\n\n---\n\n## When to Use This Skill\n\n- Network design: VCN planning, subnet sizing, CIDR allocation\n- Cost optimization: Service Gateway setup, FastConnect vs VPN\n- Security: NSG vs Security List selection, network segmentation\n- Troubleshooting: Connectivity issues, routing problems, peering\n- High availability: Multi-AD subnet design, Load Balancer requirements\n- Hybrid connectivity: VPN, FastConnect, DRG configuration\n",
        "skills/oci-events/SKILL.md": "---\nname: oci-events\ndescription: Use when implementing event-driven automation, setting up CloudEvents rules, troubleshooting event delivery failures, or integrating with Functions/Streaming/Notifications. Covers event rule patterns, filter syntax, action types, dead letter queue configuration, and event-driven architecture anti-patterns.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI Events Service - Event-Driven Architecture\n\n## ‚ö†Ô∏è OCI Events Knowledge Gap\n\n**You don't know OCI Events service patterns and syntax.**\n\nYour training data has limited and outdated knowledge of:\n- CloudEvents specification format (OCI uses CloudEvents 1.0)\n- Event rule filter syntax (JSON-based attribute matching)\n- Event types by OCI service (100+ event types)\n- Action types and integration patterns\n- Dead letter queue configuration\n- Events vs Alarms distinction\n\n**When event-driven automation is needed:**\n1. Use patterns and CLI commands from this skill's references\n2. Do NOT guess event filter syntax or event types\n3. Do NOT confuse Events with Alarms (different purposes)\n4. Load [`events-cli.md`](references/events-cli.md) for event rule operations\n\n**What you DO know:**\n- General event-driven architecture concepts\n- Pub/sub messaging patterns\n- JSON structure and filtering\n\nThis skill provides OCI-specific Events service patterns and CloudEvents integration.\n\n---\n\n## üèóÔ∏è IMPORTANT: Use OCI Landing Zone Terraform Modules\n\n### Do NOT Reinvent the Wheel\n\n**‚ùå WRONG Approach:**\n```bash\n# Manually creating event rules, functions, notifications one by one\noci events rule create ...\noci fn application create ...\noci ons topic create ...\n# Result: Inconsistent, unmaintainable, no governance\n```\n\n**‚úÖ RIGHT Approach: Use Official OCI Landing Zone Terraform Modules**\n\n```hcl\n# Use official OCI Landing Zone modules\nmodule \"landing_zone\" {\n  source  = \"oracle-terraform-modules/landing-zone/oci\"\n  version = \"~> 2.0\"\n\n  # Events configuration\n  events_configuration = {\n    default_compartment_id = var.security_compartment_id\n\n    event_rules = {\n      compute_instance_terminated = {\n        description = \"Notify when compute instance terminated\"\n        is_enabled  = true\n        condition   = jsonencode({\n          \"eventType\" : \"com.oraclecloud.computeapi.terminateinstance\"\n        })\n        actions = {\n          notifications = [ons_topic_id]\n          functions     = [security_response_function_id]\n        }\n      }\n    }\n  }\n}\n```\n\n**Why Use Landing Zone Modules:**\n- ‚úÖ **Battle-tested**: Used by thousands of OCI customers\n- ‚úÖ **Compliance**: CIS OCI Foundations Benchmark aligned\n- ‚úÖ **Maintained**: Oracle updates for API changes\n- ‚úÖ **Comprehensive**: Events + IAM + Logging + Monitoring integrated\n- ‚úÖ **Reusable**: Consistent patterns across environments\n\n**Official Resources:**\n- [OCI Landing Zone Terraform Modules](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones)\n- [OCI Resource Manager Stacks](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/Tasks/deployments.htm)\n- [CIS OCI Foundation Benchmark](https://www.cisecurity.org/benchmark/oracle_cloud)\n\n**When to Use Manual CLI** (this skill's references):\n- Learning and prototyping\n- Troubleshooting existing event rules\n- One-off automation tasks\n- Understanding event patterns before implementing in Terraform\n\n---\n\nYou are an OCI Events service expert. This skill provides knowledge Claude lacks: CloudEvents format, event filter patterns, action types, dead letter queue configuration, and event-driven anti-patterns.\n\n## NEVER Do This\n\n‚ùå **NEVER use Events for metric threshold monitoring (use Alarms instead)**\n```\nBAD - Events for CPU threshold:\nEvent Rule: \"CPU utilization > 80%\"\nProblem: Events don't monitor metrics!\n\nCORRECT tool: Alarms\noci monitoring alarm create \\\n  --metric-name CpuUtilization \\\n  --threshold 80\n```\n\n**Why critical**: Events are for **state changes** (instance created, bucket deleted), NOT continuous metrics. Using Events for thresholds wastes time‚Äîthe rule will never fire.\n\n**Events vs Alarms:**\n| Use Case | Tool | Example |\n|----------|------|---------|\n| State change | Events | Instance terminated, bucket created, database stopped |\n| Metric threshold | Alarms | CPU > 80%, disk full, memory pressure |\n| Resource lifecycle | Events | VCN created, policy updated, user added |\n| Performance | Alarms | Query latency > 2s, error rate > 5% |\n\n‚ùå **NEVER forget to configure Dead Letter Queue (lost events)**\n```bash\n# BAD - no DLQ, failed events disappear\noci events rule create \\\n  --display-name \"Invoke-Function\" \\\n  --condition '{\"eventType\": \"com.oraclecloud.objectstorage.createobject\"}' \\\n  --actions '{\n    \"actions\": [{\n      \"actionType\": \"FAAS\",\n      \"isEnabled\": true,\n      \"functionId\": \"ocid1.fnfunc.oc1..xxx\"\n    }]\n  }'\n# If function fails, event is LOST\n\n# GOOD - DLQ configured\noci events rule create \\\n  --display-name \"Invoke-Function-with-DLQ\" \\\n  --condition '{\"eventType\": \"com.oraclecloud.objectstorage.createobject\"}' \\\n  --actions '{\n    \"actions\": [{\n      \"actionType\": \"FAAS\",\n      \"isEnabled\": true,\n      \"functionId\": \"ocid1.fnfunc.oc1..xxx\",\n      \"description\": \"Process uploaded file\"\n    }]\n  }' \\\n  --compartment-id $COMPARTMENT_ID\n\n# Separately configure DLQ (requires Streaming)\n# Events that fail delivery go to stream for retry/analysis\n```\n\n**Cost impact**: Lost events = lost business transactions. E-commerce: 1 lost order event = $50-500 revenue loss. Healthcare: 1 lost patient record event = compliance violation.\n\n‚ùå **NEVER use overly broad event filters (noise + cost)**\n```json\n// BAD - matches ALL compute events\n{\n  \"eventType\": \"com.oraclecloud.computeapi.*\"\n}\n// Fires for: launch, terminate, reboot, resize, metadata change\n// Result: 1000s of events/day, function invocations cost $$$\n\n// GOOD - specific event types\n{\n  \"eventType\": [\n    \"com.oraclecloud.computeapi.terminateinstance\",\n    \"com.oraclecloud.computeapi.launchinstance\"\n  ]\n}\n// Fires only for critical lifecycle events\n```\n\n**Cost impact**: 10,000 unnecessary function invocations/day √ó $0.0000002/GB-second √ó 256MB √ó 5s = $2.56/day = $77/month wasted.\n\n‚ùå **NEVER send sensitive data in event notification (security risk)**\n```json\n// BAD - event includes passwords, keys\nEvent payload forwarded to notification:\n{\n  \"data\": {\n    \"resourceName\": \"db-prod-1\",\n    \"adminPassword\": \"SecurePass123!\",  // EXPOSED!\n    \"apiKey\": \"sk_live_xxxxx\"           // EXPOSED!\n  }\n}\n\n// GOOD - reference-only events\n{\n  \"data\": {\n    \"resourceId\": \"ocid1.database.oc1..xxx\",\n    \"resourceName\": \"db-prod-1\"\n    // Function retrieves secrets from Vault using resourceId\n  }\n}\n```\n\n**Security impact**: Notification emails/webhooks log event payload. Secrets in logs = credential exposure = breach.\n\n‚ùå **NEVER use Events for real-time streaming (use Streaming service)**\n```\nBAD use case: Process 10,000 transactions/second via Events\nEvents service limits: 50 requests/second per rule\nResult: Throttling, dropped events\n\nCORRECT: OCI Streaming\n- Throughput: 1 MB/second per partition\n- Retention: 7 days (vs Events = deliver-once)\n- Consumer groups: Multiple consumers per stream\n```\n\n**Why critical**: Events deliver to actions once (best-effort). Streaming is for high-throughput, durable messaging.\n\n‚ùå **NEVER assume Events are delivered in order**\n```\nEvent Timeline:\n1. Object created at 10:00:00\n2. Object updated at 10:00:01\n3. Object deleted at 10:00:02\n\nEvents may arrive:\n- Delete event at 10:00:03\n- Create event at 10:00:04  // Out of order!\n- Update event at 10:00:05\n\nFunction logic must handle out-of-order events\n```\n\n**Solution**: Include timestamp in event, check resource state before acting, or use idempotent operations.\n\n‚ùå **NEVER use more than 5 actions per rule (performance)**\n```bash\n# BAD - 10 actions on one rule\nEvent Rule ‚Üí 10 different functions\nLatency: 10 serial invocations = 50+ seconds\n\n# GOOD - fan-out pattern\nEvent Rule ‚Üí 1 function ‚Üí Publishes to Streaming ‚Üí 10 consumers\nLatency: Parallel processing = 5 seconds\n```\n\n**Limit**: 5 actions per rule (hard limit). Design for fan-out if >5 destinations needed.\n\n‚ùå **NEVER forget IAM policy for event actions**\n```bash\n# BAD - event rule created, but no permission to invoke function\noci events rule create ... --actions function-id\n# Events fire but silently fail (403 Forbidden)\n\n# GOOD - grant Events service permission to invoke function\noci iam policy create \\\n  --compartment-id $COMPARTMENT_ID \\\n  --name \"Events-Invoke-Functions-Policy\" \\\n  --statements '[\n    \"Allow service cloudEvents to use functions-family in compartment <compartment-name>\"\n  ]'\n```\n\n**Debugging hell**: Event rule shows \"active\", function never triggers, no error message. Root cause: Missing IAM policy.\n\n## Progressive Loading References\n\n### Event Architecture Patterns and Filter Syntax\n\n**WHEN TO LOAD** [`events-patterns.md`](references/events-patterns.md):\n- Designing event-driven architecture (Object Storage ‚Üí Function, Instance Lifecycle ‚Üí Notification)\n- Writing complex event filter syntax (compartment, tags, resource attributes)\n- Looking up common event types by OCI service\n- Understanding fan-out patterns and event chaining\n- Choosing between action types (ONS vs FAAS vs OSS)\n\n**Do NOT load** for:\n- Quick anti-pattern reference (NEVER list above covers it)\n- Events vs Alarms decision (covered above)\n- Quick CLI examples (use events-cli.md instead)\n\n---\n\n### OCI CLI for Events\n\n**WHEN TO LOAD** [`events-cli.md`](references/events-cli.md):\n- Creating event rules with filters\n- Configuring actions (Functions, Notifications, Streaming)\n- Troubleshooting event delivery failures\n- Listing available event types\n- Testing event rule patterns\n\n**Example**: Create event rule for object upload\n```bash\noci events rule create \\\n  --display-name \"Process-CSV-Uploads\" \\\n  --condition '{\n    \"eventType\": \"com.oraclecloud.objectstorage.createobject\",\n    \"data\": {\"resourceName\": \"*.csv\"}\n  }' \\\n  --actions '{\n    \"actions\": [{\n      \"actionType\": \"FAAS\",\n      \"isEnabled\": true,\n      \"functionId\": \"ocid1.fnfunc.oc1..xxx\"\n    }]\n  }' \\\n  --compartment-id $COMPARTMENT_ID\n```\n\n**Do NOT load** for:\n- Function implementation details (covered in oci-functions skill)\n- Notification topic setup (covered in monitoring-operations skill)\n- Streaming configuration (covered in streaming skill when available)\n\n---\n\n### OCI Events Reference (Official Oracle Documentation)\n\n**WHEN TO LOAD** [`oci-events-reference.md`](references/oci-events-reference.md):\n- Need comprehensive list of all OCI service event types\n- Understanding CloudEvents 1.0 specification in OCI\n- Implementing complex event patterns and filtering\n- Need official Oracle guidance on Events service architecture\n- Troubleshooting event delivery and action failures\n\n**Do NOT load** for:\n- Quick event rule creation (CLI examples above)\n- Common event patterns (architecture patterns in this skill)\n- Events vs Alarms decision (decision tree above)\n\n---\n\n## When to Use This Skill\n\n- Implementing event-driven automation and workflows\n- Setting up serverless architectures (Events + Functions)\n- Troubleshooting \"event rule not firing\" issues\n- Integrating OCI services via events\n- Designing reactive architectures (vs polling)\n- Compliance and audit trail automation\n- Incident response and security automation\n",
        "skills/oci-events/references/events-cli.md": "# OCI CLI for Events Service Operations\n\nComplete OCI CLI commands for event-driven automation and event rule management.\n\n## Prerequisites\n\n```bash\n# Verify OCI CLI and authentication\noci --version\noci iam region list --output table\n\n# Get compartment ID\nexport COMPARTMENT_ID=$(oci iam compartment list \\\n  --name \"YourCompartment\" \\\n  --query 'data[0].id' \\\n  --raw-output)\n\necho \"Compartment: $COMPARTMENT_ID\"\n```\n\n## List Available Event Types\n\n```bash\n# List all event types across OCI services\noci events event-type list --all --output table\n\n# Filter by service (e.g., compute)\noci events event-type list \\\n  --all \\\n  | jq '.data[] | select(.name | contains(\"compute\"))'\n\n# Common event types by service\noci events event-type list --all \\\n  | jq -r '.data[] | .name' \\\n  | grep -E \"^com.oraclecloud.(compute|database|objectstorage|iam)\"\n\n# Get specific event type details\noci events event-type get \\\n  --event-type \"com.oraclecloud.computeapi.launchinstance\"\n```\n\n## Create Event Rules\n\n### Basic Event Rule (Single Event Type)\n\n```bash\n# Rule: Notify when compute instance is terminated\noci events rule create \\\n  --display-name \"Compute-Instance-Terminated\" \\\n  --description \"Alert when any compute instance is terminated\" \\\n  --is-enabled true \\\n  --compartment-id $COMPARTMENT_ID \\\n  --condition '{\n    \"eventType\": \"com.oraclecloud.computeapi.terminateinstance\"\n  }' \\\n  --actions '{\n    \"actions\": [{\n      \"actionType\": \"ONS\",\n      \"isEnabled\": true,\n      \"topicId\": \"ocid1.onstopic.oc1..xxx\",\n      \"description\": \"Send notification to SRE team\"\n    }]\n  }'\n```\n\n### Event Rule with Compartment Filter\n\n```bash\n# Rule: Alert only for production compartment events\noci events rule create \\\n  --display-name \"Prod-Database-Stopped\" \\\n  --description \"Alert when production database is stopped\" \\\n  --is-enabled true \\\n  --compartment-id $COMPARTMENT_ID \\\n  --condition '{\n    \"eventType\": \"com.oraclecloud.databaseservice.stopautonomousdatabase\",\n    \"data\": {\n      \"compartmentName\": \"Prod\"\n    }\n  }' \\\n  --actions '{\n    \"actions\": [{\n      \"actionType\": \"ONS\",\n      \"isEnabled\": true,\n      \"topicId\": \"ocid1.onstopic.oc1..xxx\",\n      \"description\": \"CRITICAL: Prod database stopped\"\n    }]\n  }'\n```\n\n### Event Rule with Resource Name Pattern\n\n```bash\n# Rule: Process CSV files uploaded to Object Storage\noci events rule create \\\n  --display-name \"Process-CSV-Uploads\" \\\n  --description \"Trigger function for CSV file uploads\" \\\n  --is-enabled true \\\n  --compartment-id $COMPARTMENT_ID \\\n  --condition '{\n    \"eventType\": \"com.oraclecloud.objectstorage.createobject\",\n    \"data\": {\n      \"resourceName\": \"*.csv\"\n    }\n  }' \\\n  --actions '{\n    \"actions\": [{\n      \"actionType\": \"FAAS\",\n      \"isEnabled\": true,\n      \"functionId\": \"ocid1.fnfunc.oc1..xxx\",\n      \"description\": \"Parse and load CSV data\"\n    }]\n  }'\n```\n\n### Event Rule with Multiple Event Types\n\n```bash\n# Rule: Monitor compute instance lifecycle (create + delete)\noci events rule create \\\n  --display-name \"Compute-Lifecycle-Audit\" \\\n  --description \"Log all compute instance creates and deletes\" \\\n  --is-enabled true \\\n  --compartment-id $COMPARTMENT_ID \\\n  --condition '{\n    \"eventType\": [\n      \"com.oraclecloud.computeapi.launchinstance\",\n      \"com.oraclecloud.computeapi.terminateinstance\"\n    ]\n  }' \\\n  --actions '{\n    \"actions\": [{\n      \"actionType\": \"OSS\",\n      \"isEnabled\": true,\n      \"streamId\": \"ocid1.stream.oc1..xxx\",\n      \"description\": \"Stream to audit log\"\n    }]\n  }'\n```\n\n### Event Rule with Tag Filters\n\n```bash\n# Rule: Alert for changes to tagged resources\noci events rule create \\\n  --display-name \"Critical-Resource-Changes\" \\\n  --description \"Alert for changes to critical infrastructure\" \\\n  --is-enabled true \\\n  --compartment-id $COMPARTMENT_ID \\\n  --condition '{\n    \"eventType\": \"com.oraclecloud.computeapi.*\",\n    \"data\": {\n      \"freeformTags\": {\n        \"Criticality\": \"High\"\n      }\n    }\n  }' \\\n  --actions '{\n    \"actions\": [{\n      \"actionType\": \"ONS\",\n      \"isEnabled\": true,\n      \"topicId\": \"ocid1.onstopic.oc1..xxx\",\n      \"description\": \"Critical resource event\"\n    }]\n  }'\n```\n\n### Event Rule with Multiple Actions (Fan-Out)\n\n```bash\n# Rule: Multiple actions for same event\noci events rule create \\\n  --display-name \"IAM-Policy-Changed-Multi-Action\" \\\n  --description \"Multiple responses to IAM policy changes\" \\\n  --is-enabled true \\\n  --compartment-id $COMPARTMENT_ID \\\n  --condition '{\n    \"eventType\": \"com.oraclecloud.identityControlPlane.UpdatePolicy\"\n  }' \\\n  --actions '{\n    \"actions\": [\n      {\n        \"actionType\": \"ONS\",\n        \"isEnabled\": true,\n        \"topicId\": \"ocid1.onstopic.oc1..xxx\",\n        \"description\": \"Email security team\"\n      },\n      {\n        \"actionType\": \"FAAS\",\n        \"isEnabled\": true,\n        \"functionId\": \"ocid1.fnfunc.oc1..xxx\",\n        \"description\": \"Log to SIEM\"\n      },\n      {\n        \"actionType\": \"OSS\",\n        \"isEnabled\": true,\n        \"streamId\": \"ocid1.stream.oc1..xxx\",\n        \"description\": \"Stream for audit compliance\"\n      }\n    ]\n  }'\n\n# LIMIT: Maximum 5 actions per rule\n```\n\n## Manage Event Rules\n\n### List Event Rules\n\n```bash\n# List all event rules in compartment\noci events rule list \\\n  --compartment-id $COMPARTMENT_ID \\\n  --lifecycle-state ACTIVE \\\n  --output table\n\n# Get specific rule details\nRULE_ID=\"ocid1.eventsrule.oc1..xxx\"\noci events rule get --rule-id $RULE_ID\n\n# List rules with specific display name\noci events rule list \\\n  --compartment-id $COMPARTMENT_ID \\\n  --display-name \"Compute-Instance-Terminated\" \\\n  --output json\n```\n\n### Update Event Rule\n\n```bash\n# Enable/disable rule\noci events rule update \\\n  --rule-id $RULE_ID \\\n  --is-enabled false\n\n# Update rule condition\noci events rule update \\\n  --rule-id $RULE_ID \\\n  --condition '{\n    \"eventType\": [\n      \"com.oraclecloud.computeapi.launchinstance\",\n      \"com.oraclecloud.computeapi.terminateinstance\",\n      \"com.oraclecloud.computeapi.changeinstanceshape\"\n    ]\n  }'\n\n# Add new action to existing rule\noci events rule update \\\n  --rule-id $RULE_ID \\\n  --actions '{\n    \"actions\": [\n      {\n        \"actionType\": \"ONS\",\n        \"isEnabled\": true,\n        \"topicId\": \"ocid1.onstopic.oc1..xxx\"\n      },\n      {\n        \"actionType\": \"FAAS\",\n        \"isEnabled\": true,\n        \"functionId\": \"ocid1.fnfunc.oc1..xxx\"\n      }\n    ]\n  }'\n```\n\n### Delete Event Rule\n\n```bash\n# Delete specific rule\noci events rule delete \\\n  --rule-id $RULE_ID \\\n  --force\n\n# Verify deletion\noci events rule list \\\n  --compartment-id $COMPARTMENT_ID \\\n  --lifecycle-state DELETED \\\n  --output table\n```\n\n## IAM Policies for Events\n\n### Grant Events Permission to Invoke Functions\n\n```bash\n# Policy: Allow Events service to invoke all functions in compartment\noci iam policy create \\\n  --compartment-id $COMPARTMENT_ID \\\n  --name \"Events-Invoke-Functions-Policy\" \\\n  --description \"Allow Events service to trigger Functions\" \\\n  --statements '[\n    \"Allow service cloudEvents to use functions-family in compartment <compartment-name>\"\n  ]'\n\n# Policy: Allow Events to invoke specific function\noci iam policy create \\\n  --compartment-id $COMPARTMENT_ID \\\n  --name \"Events-Invoke-Specific-Function-Policy\" \\\n  --description \"Allow Events to invoke CSV processor function\" \\\n  --statements '[\n    \"Allow service cloudEvents to use fn-function in compartment <compartment-name> where target.function.id = \\\"ocid1.fnfunc.oc1..xxx\\\"\"\n  ]'\n```\n\n### Grant Events Permission to Publish to ONS\n\n```bash\n# Policy: Allow Events to publish to Notification topics\noci iam policy create \\\n  --compartment-id $COMPARTMENT_ID \\\n  --name \"Events-Publish-ONS-Policy\" \\\n  --description \"Allow Events to send notifications\" \\\n  --statements '[\n    \"Allow service cloudEvents to use ons-topics in compartment <compartment-name>\"\n  ]'\n```\n\n### Grant Events Permission to Write to Streaming\n\n```bash\n# Policy: Allow Events to publish to Streaming\noci iam policy create \\\n  --compartment-id $COMPARTMENT_ID \\\n  --name \"Events-Publish-Streaming-Policy\" \\\n  --description \"Allow Events to write to Streaming\" \\\n  --statements '[\n    \"Allow service cloudEvents to use stream-push in compartment <compartment-name>\"\n  ]'\n```\n\n## Testing and Debugging\n\n### Test Event Rule Condition\n\n```bash\n# Get sample event payload for event type\noci events event-type get \\\n  --event-type \"com.oraclecloud.computeapi.launchinstance\" \\\n  | jq '.data.\"schema\"'\n\n# Manually trigger event (for testing)\n# Note: OCI Events doesn't support manual event injection\n# Test by performing the actual action (e.g., launch instance)\n\n# Check rule execution history (via monitoring)\noci monitoring metric-data summarize-metrics-data \\\n  --namespace oci_events \\\n  --compartment-id $COMPARTMENT_ID \\\n  --query-text 'RulesEvaluated[1m].count()' \\\n  --start-time \"2026-01-28T00:00:00Z\" \\\n  --end-time \"2026-01-28T23:59:59Z\"\n```\n\n### Check Event Rule Metrics\n\n```bash\n# Get rule evaluation count\noci monitoring metric-data summarize-metrics-data \\\n  --namespace oci_events \\\n  --compartment-id $COMPARTMENT_ID \\\n  --query-text 'RulesEvaluated[5m]{ruleId=\"'$RULE_ID'\"}.count()' \\\n  --start-time \"2026-01-28T10:00:00Z\" \\\n  --end-time \"2026-01-28T11:00:00Z\"\n\n# Get action execution count\noci monitoring metric-data summarize-metrics-data \\\n  --namespace oci_events \\\n  --compartment-id $COMPARTMENT_ID \\\n  --query-text 'ActionsExecuted[5m]{ruleId=\"'$RULE_ID'\"}.count()' \\\n  --start-time \"2026-01-28T10:00:00Z\" \\\n  --end-time \"2026-01-28T11:00:00Z\"\n\n# Get failed action count\noci monitoring metric-data summarize-metrics-data \\\n  --namespace oci_events \\\n  --compartment-id $COMPARTMENT_ID \\\n  --query-text 'ActionsFailed[5m]{ruleId=\"'$RULE_ID'\"}.count()' \\\n  --start-time \"2026-01-28T10:00:00Z\" \\\n  --end-time \"2026-01-28T11:00:00Z\"\n```\n\n## Common Event Patterns\n\n### Pattern 1: Object Storage Upload ‚Üí Function Processing\n\n```bash\n# Create notification topic\nONS_TOPIC=$(oci ons topic create \\\n  --compartment-id $COMPARTMENT_ID \\\n  --name \"CSV-Processing-Topic\" \\\n  --wait-for-state ACTIVE \\\n  --query 'data.id' --raw-output)\n\n# Create function (assume already deployed)\nFUNCTION_ID=\"ocid1.fnfunc.oc1..xxx\"\n\n# Create event rule\noci events rule create \\\n  --display-name \"Object-Upload-Processing\" \\\n  --description \"Process files uploaded to Object Storage\" \\\n  --is-enabled true \\\n  --compartment-id $COMPARTMENT_ID \\\n  --condition '{\n    \"eventType\": \"com.oraclecloud.objectstorage.createobject\",\n    \"data\": {\n      \"additionalDetails\": {\n        \"bucketName\": \"data-ingestion\"\n      }\n    }\n  }' \\\n  --actions '{\n    \"actions\": [{\n      \"actionType\": \"FAAS\",\n      \"isEnabled\": true,\n      \"functionId\": \"'$FUNCTION_ID'\",\n      \"description\": \"Process uploaded file\"\n    }]\n  }'\n```\n\n### Pattern 2: IAM Changes ‚Üí Security Audit\n\n```bash\n# Create streaming for audit trail\nSTREAM_ID=$(oci streaming admin stream create \\\n  --compartment-id $COMPARTMENT_ID \\\n  --name \"IAM-Audit-Stream\" \\\n  --partitions 1 \\\n  --wait-for-state ACTIVE \\\n  --query 'data.id' --raw-output)\n\n# Create event rule for IAM changes\noci events rule create \\\n  --display-name \"IAM-Changes-Audit\" \\\n  --description \"Audit all IAM policy and user changes\" \\\n  --is-enabled true \\\n  --compartment-id $COMPARTMENT_ID \\\n  --condition '{\n    \"eventType\": [\n      \"com.oraclecloud.identityControlPlane.CreateUser\",\n      \"com.oraclecloud.identityControlPlane.UpdateUser\",\n      \"com.oraclecloud.identityControlPlane.DeleteUser\",\n      \"com.oraclecloud.identityControlPlane.CreatePolicy\",\n      \"com.oraclecloud.identityControlPlane.UpdatePolicy\",\n      \"com.oraclecloud.identityControlPlane.DeletePolicy\"\n    ]\n  }' \\\n  --actions '{\n    \"actions\": [\n      {\n        \"actionType\": \"ONS\",\n        \"isEnabled\": true,\n        \"topicId\": \"'$ONS_TOPIC'\",\n        \"description\": \"Alert security team\"\n      },\n      {\n        \"actionType\": \"OSS\",\n        \"isEnabled\": true,\n        \"streamId\": \"'$STREAM_ID'\",\n        \"description\": \"Stream to SIEM\"\n      }\n    ]\n  }'\n```\n\n### Pattern 3: Database Lifecycle ‚Üí Compliance Check\n\n```bash\n# Create event rule for database operations\noci events rule create \\\n  --display-name \"Database-Lifecycle-Compliance\" \\\n  --description \"Compliance checks for database operations\" \\\n  --is-enabled true \\\n  --compartment-id $COMPARTMENT_ID \\\n  --condition '{\n    \"eventType\": [\n      \"com.oraclecloud.databaseservice.createautonomousdatabase\",\n      \"com.oraclecloud.databaseservice.deleteautonomousdatabase\",\n      \"com.oraclecloud.databaseservice.updateautonomousdatabase\"\n    ],\n    \"data\": {\n      \"compartmentName\": \"Prod\"\n    }\n  }' \\\n  --actions '{\n    \"actions\": [{\n      \"actionType\": \"FAAS\",\n      \"isEnabled\": true,\n      \"functionId\": \"'$FUNCTION_ID'\",\n      \"description\": \"Check encryption, backup policy, tags\"\n    }]\n  }'\n```\n\n### Pattern 4: Compute Instance State ‚Üí Cost Optimization\n\n```bash\n# Create event rule to detect long-running dev instances\noci events rule create \\\n  --display-name \"Dev-Instance-Running-Alert\" \\\n  --description \"Alert when dev instances run beyond business hours\" \\\n  --is-enabled true \\\n  --compartment-id $COMPARTMENT_ID \\\n  --condition '{\n    \"eventType\": \"com.oraclecloud.computeapi.launchinstance\",\n    \"data\": {\n      \"freeformTags\": {\n        \"Environment\": \"Dev\"\n      }\n    }\n  }' \\\n  --actions '{\n    \"actions\": [{\n      \"actionType\": \"FAAS\",\n      \"isEnabled\": true,\n      \"functionId\": \"'$FUNCTION_ID'\",\n      \"description\": \"Schedule auto-shutdown at 6pm\"\n    }]\n  }'\n```\n\n## Troubleshooting\n\n### Event Rule Not Firing\n\n```bash\n# 1. Check if rule is enabled\noci events rule get --rule-id $RULE_ID \\\n  | jq '.data.\"is-enabled\"'\n\n# 2. Check if event type is correct\noci events event-type list --all \\\n  | jq -r '.data[] | .name' \\\n  | grep -i \"compute\"\n\n# 3. Check IAM policies\noci iam policy list \\\n  --compartment-id $COMPARTMENT_ID \\\n  | jq '.data[] | select(.name | contains(\"Events\"))'\n\n# 4. Check rule metrics (did rule evaluate?)\noci monitoring metric-data summarize-metrics-data \\\n  --namespace oci_events \\\n  --compartment-id $COMPARTMENT_ID \\\n  --query-text 'RulesEvaluated[5m]{ruleId=\"'$RULE_ID'\"}.count()' \\\n  --start-time \"2026-01-28T10:00:00Z\" \\\n  --end-time \"2026-01-28T11:00:00Z\"\n```\n\n### Action Failing (Function Not Invoked)\n\n```bash\n# 1. Check action failures metric\noci monitoring metric-data summarize-metrics-data \\\n  --namespace oci_events \\\n  --compartment-id $COMPARTMENT_ID \\\n  --query-text 'ActionsFailed[5m]{ruleId=\"'$RULE_ID'\"}.count()' \\\n  --start-time \"2026-01-28T10:00:00Z\" \\\n  --end-time \"2026-01-28T11:00:00Z\"\n\n# 2. Check IAM policy for Functions\noci iam policy list \\\n  --compartment-id $COMPARTMENT_ID \\\n  | jq '.data[] | select(.statements[] | contains(\"cloudEvents\"))'\n\n# 3. Check function logs\noci logging log list \\\n  --log-group-id \"ocid1.loggroup.oc1..xxx\" \\\n  --output table\n\n# 4. Verify function exists and is active\noci fn function get --function-id $FUNCTION_ID\n```\n\n### Event Filter Not Matching\n\n```bash\n# Get event type schema to understand available fields\noci events event-type get \\\n  --event-type \"com.oraclecloud.objectstorage.createobject\" \\\n  | jq '.data.schema'\n\n# Common filter fields:\n# - compartmentName: Name of compartment\n# - compartmentId: OCID of compartment\n# - resourceName: Resource name (supports wildcards *)\n# - freeformTags: User-defined tags\n# - definedTags: Defined tag namespaces\n\n# Test filter specificity\n# Too broad: All compute events\n{\"eventType\": \"com.oraclecloud.computeapi.*\"}\n\n# More specific: Only instance launches in prod\n{\n  \"eventType\": \"com.oraclecloud.computeapi.launchinstance\",\n  \"data\": {\"compartmentName\": \"Prod\"}\n}\n```\n\n## Best Practices\n\n### Use Specific Event Types (Not Wildcards)\n\n```bash\n# ‚ùå BAD - matches all 50+ compute event types\noci events rule create \\\n  --condition '{\"eventType\": \"com.oraclecloud.computeapi.*\"}' \\\n  ...\n\n# ‚úÖ GOOD - matches only critical lifecycle events\noci events rule create \\\n  --condition '{\n    \"eventType\": [\n      \"com.oraclecloud.computeapi.launchinstance\",\n      \"com.oraclecloud.computeapi.terminateinstance\"\n    ]\n  }' \\\n  ...\n```\n\n### Always Set IAM Policies First\n\n```bash\n# 1. Create IAM policy\noci iam policy create \\\n  --compartment-id $COMPARTMENT_ID \\\n  --name \"Events-Functions-Policy\" \\\n  --statements '[\"Allow service cloudEvents to use functions-family in compartment MyCompartment\"]'\n\n# 2. Wait for policy to propagate (30 seconds)\nsleep 30\n\n# 3. Create event rule\noci events rule create \\\n  --condition '...' \\\n  --actions '...'\n```\n\n### Monitor Event Rule Health\n\n```bash\n# Create alarm for failed actions\noci monitoring alarm create \\\n  --compartment-id $COMPARTMENT_ID \\\n  --display-name \"Events-Actions-Failed-Alarm\" \\\n  --namespace \"oci_events\" \\\n  --query-text 'ActionsFailed[1m].sum() > 0' \\\n  --severity \"CRITICAL\" \\\n  --destinations '[\"'$ONS_TOPIC'\"]' \\\n  --is-enabled true\n```\n\n### Use Descriptive Names\n\n```bash\n# ‚úÖ GOOD - clear purpose\n--display-name \"Prod-Database-Stopped-Alert\"\n--description \"Critical: Production database stopped - requires immediate investigation\"\n\n# ‚ùå BAD - unclear\n--display-name \"Rule-1\"\n--description \"Database rule\"\n```\n\n## When to Use OCI Events CLI\n\n**Use these commands when you need to:**\n- Create event-driven automation workflows\n- Set up event rules with custom filters\n- Troubleshoot event delivery issues\n- Test event patterns and actions\n- Quick prototypes before Terraform implementation\n\n**Don't use for:**\n- Production deployments (use OCI Landing Zone Terraform modules)\n- Complex multi-rule architectures (use Terraform)\n- When IaC governance is required (use Terraform)\n",
        "skills/oci-events/references/events-patterns.md": "# OCI Events Service - Patterns Reference\n\n## Event-Driven Architecture Patterns\n\n### Pattern 1: Object Storage Upload ‚Üí Function Processing\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Object Storage  ‚îÇ\n‚îÇ  - User uploads ‚îÇ\n‚îÇ    file.csv     ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n         ‚îÇ Event: createObject\n         ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   Events Rule   ‚îÇ\n‚îÇ  Filter: .csv   ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n         ‚îÇ Invoke\n         ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   Function      ‚îÇ\n‚îÇ  - Parse CSV    ‚îÇ\n‚îÇ  - Store in DB  ‚îÇ\n‚îÇ  - Send email   ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\nEvent Filter:\n{\n  \"eventType\": \"com.oraclecloud.objectstorage.createobject\",\n  \"data\": {\n    \"additionalDetails\": {\n      \"eTag\": \"*\"\n    },\n    \"resourceName\": \"*.csv\"\n  }\n}\n\nUse case: Data ingestion pipeline, document processing\n```\n\n### Pattern 2: Compute Instance Lifecycle ‚Üí Compliance Check\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Compute Instance ‚îÇ\n‚îÇ  - Terminated    ‚îÇ\n‚îÇ  - Created       ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n         ‚îÇ Event: terminateInstance\n         ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   Events Rule    ‚îÇ\n‚îÇ  Filter: Prod    ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n         ‚îÇ Notify\n         ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   Notification   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   PagerDuty     ‚îÇ\n‚îÇ   Topic          ‚îÇ     ‚îÇ   (On-call)      ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\nEvent Filter:\n{\n  \"eventType\": \"com.oraclecloud.computeapi.terminateinstance\",\n  \"data\": {\n    \"compartmentName\": \"Prod\"\n  }\n}\n\nUse case: Security monitoring, audit trail, incident response\n```\n\n### Pattern 3: Fan-Out (1 Event ‚Üí Multiple Actions)\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  Database       ‚îÇ\n‚îÇ  - Stopped      ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n         ‚îÇ Event: stopAutonomousDatabase\n         ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   Events Rule                       ‚îÇ\n‚îÇ  Actions:                           ‚îÇ\n‚îÇ   1. Notification ‚Üí Email SRE      ‚îÇ\n‚îÇ   2. Function ‚Üí Log to Splunk      ‚îÇ\n‚îÇ   3. Streaming ‚Üí Analytics         ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\nUse case: Multi-channel alerting, compliance logging, analytics\nMax actions: 5 per rule\n```\n\n### Pattern 4: Event Chaining (Event ‚Üí Function ‚Üí Event)\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ IAM Policy   ‚îÇ\n‚îÇ  - Changed   ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n       ‚îÇ Event 1\n       ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Function 1   ‚îÇ\n‚îÇ - Audit log  ‚îÇ\n‚îÇ - Create     ‚îÇ\n‚îÇ   ticket     ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n       ‚îÇ Custom Event\n       ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Function 2   ‚îÇ\n‚îÇ - Compliance ‚îÇ\n‚îÇ   check      ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\nImplementation: Functions can emit custom events using Events API\nUse case: Complex workflows, approval chains\n```\n\n## Event Filter Syntax Decision Tree\n\n```\n\"How should I filter events?\"\n‚îÇ\n‚îú‚îÄ Filter by event type only (all occurrences)?\n‚îÇ   ‚îî‚îÄ Simple filter\n‚îÇ       {\n‚îÇ         \"eventType\": \"com.oraclecloud.computeapi.launchinstance\"\n‚îÇ       }\n‚îÇ\n‚îú‚îÄ Filter by compartment or tag?\n‚îÇ   ‚îî‚îÄ Compartment filter\n‚îÇ       {\n‚îÇ         \"eventType\": \"com.oraclecloud.computeapi.launchinstance\",\n‚îÇ         \"data\": {\n‚îÇ           \"compartmentName\": \"Prod\"\n‚îÇ         }\n‚îÇ       }\n‚îÇ\n‚îú‚îÄ Filter by resource attribute (name pattern)?\n‚îÇ   ‚îî‚îÄ Attribute filter\n‚îÇ       {\n‚îÇ         \"eventType\": \"com.oraclecloud.objectstorage.createobject\",\n‚îÇ         \"data\": {\n‚îÇ           \"resourceName\": \"*.pdf\"\n‚îÇ         }\n‚îÇ       }\n‚îÇ\n‚îú‚îÄ Filter by multiple event types?\n‚îÇ   ‚îî‚îÄ Array of event types\n‚îÇ       {\n‚îÇ         \"eventType\": [\n‚îÇ           \"com.oraclecloud.computeapi.launchinstance\",\n‚îÇ           \"com.oraclecloud.computeapi.terminateinstance\"\n‚îÇ         ]\n‚îÇ       }\n‚îÇ\n‚îî‚îÄ Complex logic (AND/OR conditions)?\n    ‚îî‚îÄ Use Cloud Events JSONPath\n        {\n          \"eventType\": \"com.oraclecloud.computeapi.*\",\n          \"data\": {\n            \"freeformTags\": {\n              \"Environment\": \"Prod\"\n            },\n            \"definedTags\": {\n              \"Operations.CostCenter\": \"Engineering\"\n            }\n          }\n        }\n```\n\n## Common Event Types by Service\n\n```\nCompute (com.oraclecloud.computeapi.*):\n‚îú‚îÄ launchinstance              # Instance created\n‚îú‚îÄ terminateinstance           # Instance deleted\n‚îú‚îÄ instanceaction              # Reboot, stop, start\n‚îú‚îÄ changeinstanceshape         # Shape changed (resize)\n‚îî‚îÄ attachvnic                  # Network interface attached\n\nDatabase (com.oraclecloud.databaseservice.*):\n‚îú‚îÄ createautonomousdatabase    # ADB created\n‚îú‚îÄ stopautonomousdatabase      # ADB stopped\n‚îú‚îÄ startautonomousdatabase     # ADB started\n‚îú‚îÄ deleteautonomousdatabase    # ADB deleted\n‚îî‚îÄ updateautonomousdatabase    # ADB scaled/modified\n\nObject Storage (com.oraclecloud.objectstorage.*):\n‚îú‚îÄ createobject                # File uploaded\n‚îú‚îÄ deleteobject                # File deleted\n‚îú‚îÄ updateobject                # File modified\n‚îî‚îÄ createbucket                # Bucket created\n\nIAM (com.oraclecloud.identityControlPlane.*):\n‚îú‚îÄ CreateUser                  # User added\n‚îú‚îÄ UpdateUser                  # User modified\n‚îú‚îÄ CreatePolicy                # Policy created\n‚îú‚îÄ UpdatePolicy                # Policy changed\n‚îî‚îÄ DeleteUser                  # User removed\n\nVCN (com.oraclecloud.virtualnetwork.*):\n‚îú‚îÄ CreateVcn                   # VCN created\n‚îú‚îÄ DeleteVcn                   # VCN deleted\n‚îú‚îÄ CreateSubnet                # Subnet created\n‚îú‚îÄ CreateSecurityList          # Security list created\n‚îî‚îÄ CreateNetworkSecurityGroup  # NSG created\n\nComplete list: 100+ event types across all OCI services\nUse: oci events event-type list --all\n```\n\n## Action Types and Use Cases\n\n| Action Type | Target | Use Case | Cost | Max Actions |\n|-------------|--------|----------|------|-------------|\n| **ONS** | Notification Topic | Email, PagerDuty, webhook | $0.60/million | 5 |\n| **FAAS** | Function | Data processing, API calls | $0.0000002/GB-sec | 5 |\n| **OSS** | Streaming | High-volume event buffer | $0.025/stream-hour | 5 |\n\n**Choosing Action Type:**\n- **1-10 events/minute** ‚Üí ONS (notifications)\n- **10-1000 events/minute** ‚Üí FAAS (processing)\n- **>1000 events/minute** ‚Üí OSS (streaming buffer)\n",
        "skills/oracle-dba/SKILL.md": "---\nname: oracle-dba\ndescription: Use when managing Oracle Autonomous Database on OCI, troubleshooting performance issues, optimizing costs, or implementing HA/DR. Covers ADB-specific gotchas, cost traps, SQL_ID debugging workflows, auto-scaling behavior, and version differences (19c/21c/23ai/26ai).\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI Oracle DBA - Expert Knowledge\n\n## üèóÔ∏è Use OCI Landing Zone Terraform Modules\n\n**Don't reinvent the wheel.** Use [oracle-terraform-modules/landing-zone](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones) for database infrastructure.\n\n**Landing Zone solves:**\n- ‚ùå Bad Practice #1: Generic compartments (Landing Zone creates dedicated Database/Security compartments for ADB organization)\n- ‚ùå Bad Practice #9: Public database endpoints (Landing Zone Security Zones enforce private endpoints only)\n- ‚ùå Bad Practice #10: No monitoring (Landing Zone auto-configures ADB performance alarms, slow query notifications)\n\n**This skill provides**: ADB-specific operations, performance tuning, and cost optimization for databases deployed WITHIN a Landing Zone.\n\n---\n\n## ‚ö†Ô∏è OCI CLI/API Knowledge Gap\n\n**You don't know OCI CLI commands or OCI API structure.**\n\nYour training data has limited and outdated knowledge of:\n- OCI CLI syntax and parameters (updates monthly)\n- OCI API endpoints and request/response formats\n- Autonomous Database CLI operations (`oci db autonomous-database`)\n- OCI service-specific commands and flags\n- Latest OCI features and API changes\n\n**When OCI operations are needed:**\n1. Use exact CLI commands from this skill's references\n2. Do NOT guess OCI CLI syntax or parameters\n3. Do NOT assume API endpoint structures\n4. Load [`oci-cli-adb.md`](references/oci-cli-adb.md) for ADB management operations\n\n**What you DO know:**\n- Oracle Database internals (SQL, PL/SQL, performance tuning)\n- General cloud concepts\n- Database administration principles\n\nThis skill bridges the gap by providing current OCI CLI/API commands for Autonomous Database operations.\n\n---\n\nYou are an Oracle Autonomous Database expert on OCI. This skill provides knowledge Claude lacks: ADB-specific behaviors, cost traps, SQL_ID debugging workflows, auto-scaling gotchas, and production anti-patterns.\n\n## NEVER Do This\n\n‚ùå **NEVER use ADMIN user in application code**\n```sql\n-- WRONG - application uses ADMIN credentials\napp_config = {'user': 'ADMIN', 'password': admin_pwd}\n\n-- RIGHT - create app-specific user with least privilege\nCREATE USER app_user IDENTIFIED BY :password;\nGRANT CREATE SESSION, SELECT ON schema.* TO app_user;\n```\n\n**Why critical**: ADMIN has full database control, audit trail shows all actions as ADMIN (no accountability), ADMIN can't be locked/disabled without breaking automation.\n\n‚ùå **NEVER scale without checking wait events first**\n```\n-- WRONG decision path: \"CPU is high ‚Üí scale ECPUs\"\n\n-- RIGHT decision path:\n1. Check v$system_event for top wait events\n2. High 'CPU time' wait ‚Üí Bad SQL, need optimization (DON'T scale)\n3. High 'db file sequential read' ‚Üí Missing indexes (DON'T scale)\n4. High 'User I/O' sustained ‚Üí Scale storage IOPS OR auto-scaling\n5. Only scale ECPUs if: CPU wait sustained + SQL already optimized\n```\n\n**Cost impact**: Scaling 2‚Üí4 ECPU = $526/month increase. If root cause is bad SQL, wasted $526/month.\n\n‚ùå **NEVER assume stopped ADB = zero cost**\n```\nStopped Autonomous Database charges:\n‚úì Compute: $0 (stopped)\n‚úó Storage: $0.025/GB/month continues\n‚úó Backups: Retention charges continue\n\nExample: 1TB ADB stopped for 30 days\nStorage: 1000 GB √ó $0.025 = $25/month (CHARGED!)\n\nBetter for long-term idle (>60 days):\n1. Export data (Data Pump)\n2. Delete ADB\n3. Restore from backup when needed\n```\n\n‚ùå **NEVER forget retention on manual backups (cost trap)**\n```bash\n# WRONG - manual backup with no retention (kept forever)\noci db autonomous-database-backup create \\\n  --autonomous-database-id $ADB_ID \\\n  --display-name \"pre-upgrade-backup\"\n# Cost: $0.025/GB/month FOREVER\n\n# RIGHT - set retention\noci db autonomous-database-backup create \\\n  --autonomous-database-id $ADB_ID \\\n  --display-name \"pre-upgrade-backup\" \\\n  --retention-days 30\n\nCost trap: 1TB manual backup √ó $0.025/GB/month √ó 12 months = $300/year waste\n```\n\n‚ùå **NEVER use SELECT * in production queries**\n```sql\n-- WRONG - fetches all columns, heavy network/parsing\nSELECT * FROM orders WHERE customer_id = :cust_id;\n\n-- RIGHT - specify needed columns\nSELECT order_id, total_amount, status FROM orders WHERE customer_id = :cust_id;\n\nImpact: 50-column table, fetching 5 needed columns\n- SELECT *: 50 columns √ó 1000 rows = 50k data points\n- Explicit: 5 columns √ó 1000 rows = 5k data points (90% reduction)\n```\n\n‚ùå **NEVER ignore SQL_ID when debugging slow queries**\n```sql\n-- WRONG - \"my query is slow, tune the database\"\nALTER SYSTEM SET optimizer_mode = 'FIRST_ROWS';  # Affects ALL queries!\n\n-- RIGHT - identify specific SQL_ID, tune that query\nSELECT sql_id, elapsed_time/executions/1000 AS avg_ms, executions\nFROM v$sql\nWHERE executions > 0\nORDER BY elapsed_time DESC\nFETCH FIRST 10 ROWS ONLY;\n\nThen tune specific SQL_ID (not entire database)\n```\n\n‚ùå **NEVER use ROWNUM with ORDER BY (wrong results)**\n```sql\n-- WRONG - ROWNUM applied BEFORE ORDER BY (wrong top 10)\nSELECT * FROM orders WHERE ROWNUM <= 10 ORDER BY created_at DESC;\n\n-- RIGHT - FETCH FIRST (Oracle 12c+)\nSELECT * FROM orders ORDER BY created_at DESC FETCH FIRST 10 ROWS ONLY;\n```\n\n‚ùå **NEVER scale auto-scaling ADB without checking current behavior**\n```\nADB Auto-Scaling Gotcha:\n- Base ECPU: 2\n- Auto-scaling: Scales 1-3x (2 ‚Üí 6 ECPU max)\n- Cost: Charged for PEAK usage during period\n\n# WRONG - enable auto-scaling then forget about it\nCost surprise: Base 2 ECPU ($526/month) ‚Üí Peak 6 ECPU ($1,578/month)\n\n# RIGHT - set max ECPU limit in console\nMax ECPU = 4 (2√ó base, not 3√ó)\nCost control: Peak 4 ECPU ($1,052/month) max\n```\n\n## Performance Troubleshooting Decision Tree\n\n```\n\"Queries are slow\"?\n‚îÇ\n‚îú‚îÄ Is it ONE query or ALL queries?\n‚îÇ  ‚îú‚îÄ ONE query slow\n‚îÇ  ‚îÇ  ‚îî‚îÄ Get SQL_ID from v$sql (top by elapsed_time)\n‚îÇ  ‚îÇ     ‚îî‚îÄ Check execution plan:\n‚îÇ  ‚îÇ        SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR('&sql_id'));\n‚îÇ  ‚îÇ        ‚îú‚îÄ Full table scan? ‚Üí Add index\n‚îÇ  ‚îÇ        ‚îú‚îÄ Wrong join order? ‚Üí Use hints or SQL Plan Management\n‚îÇ  ‚îÇ        ‚îî‚îÄ Cartesian join? ‚Üí Fix query logic\n‚îÇ  ‚îÇ\n‚îÇ  ‚îî‚îÄ ALL queries slow (system-wide)\n‚îÇ     ‚îî‚îÄ Check wait events:\n‚îÇ        SELECT event, time_waited_micro/1000000 AS wait_sec\n‚îÇ        FROM v$system_event\n‚îÇ        WHERE wait_class != 'Idle'\n‚îÇ        ORDER BY time_waited_micro DESC\n‚îÇ        FETCH FIRST 10 ROWS ONLY;\n‚îÇ\n‚îÇ        ‚îú‚îÄ Top wait: 'CPU time' ‚Üí Optimize SQL OR scale ECPU\n‚îÇ        ‚îú‚îÄ Top wait: 'db file sequential read' ‚Üí Missing indexes\n‚îÇ        ‚îú‚îÄ Top wait: 'db file scattered read' ‚Üí Full table scans\n‚îÇ        ‚îú‚îÄ Top wait: 'log file sync' ‚Üí Too many commits (batch)\n‚îÇ        ‚îî‚îÄ Top wait: 'User I/O' ‚Üí Scale storage IOPS or auto-scale\n‚îÇ\n‚îî‚îÄ When did slowness start?\n   ‚îú‚îÄ After schema change? ‚Üí Gather stats (DBMS_STATS)\n   ‚îú‚îÄ After data load? ‚Üí Gather stats + check partitioning\n   ‚îú‚îÄ After version upgrade? ‚Üí Check execution plan changes\n   ‚îî‚îÄ Gradual over time? ‚Üí Data growth, need indexing/partitioning\n```\n\n## ADB Cost Calculations (Exact)\n\n### ECPU Scaling Cost\n\n```\nLicense-Included pricing: $0.36/ECPU-hour\nBYOL pricing: $0.18/ECPU-hour (if you have Oracle licenses)\n\nMonthly cost = ECPU count √ó hourly rate √ó 730 hours\n\nExamples:\n2 ECPU: 2 √ó $0.36 √ó 730 = $526/month\n4 ECPU: 4 √ó $0.36 √ó 730 = $1,052/month\n8 ECPU: 8 √ó $0.36 √ó 730 = $2,104/month\n\nBYOL (50% off):\n2 ECPU: 2 √ó $0.18 √ó 730 = $263/month\n4 ECPU: 4 √ó $0.18 √ó 730 = $526/month\n```\n\n### Storage Cost\n\n```\nStorage pricing: $0.025/GB/month (all tiers: Standard, Archive)\n\nExamples:\n1 TB: 1000 GB √ó $0.025 = $25/month\n5 TB: 5000 GB √ó $0.025 = $125/month\n\nCRITICAL: Storage charged even when ADB stopped!\n```\n\n### Auto-Scaling Cost Impact\n\n```\nScenario: Base 2 ECPU with auto-scaling enabled (1-3√ó)\n\nWithout auto-scaling:\n2 ECPU √ó $0.36 √ó 730 = $526/month (fixed)\n\nWith auto-scaling (spiky load):\n- 50% of time: 2 ECPU = $263\n- 30% of time: 4 ECPU = $315\n- 20% of time: 6 ECPU = $315\nMonthly cost: $893 (70% increase)\n\nWhen auto-scaling makes sense:\n- Spiky load (not sustained high)\n- Want to avoid manual scaling\n- Cost increase acceptable (up to 3√ó)\n```\n\n## SQL_ID Debugging Workflow\n\n**Step 1: Find problem SQL_ID**\n```sql\nSELECT sql_id,\n       elapsed_time/executions/1000 AS avg_ms,\n       executions,\n       sql_text\nFROM v$sql\nWHERE executions > 0\n  AND last_active_time > SYSDATE - 1/24  -- Last hour\nORDER BY elapsed_time DESC\nFETCH FIRST 10 ROWS ONLY;\n```\n\n**Step 2: Get execution plan**\n```sql\nSELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR('&sql_id'));\n```\n\n**Step 3: Analyze plan issues**\n- `TABLE ACCESS FULL` on large table ‚Üí Missing index\n- `NESTED LOOPS` with high cardinality ‚Üí Wrong join method\n- `HASH JOIN OUTER` ‚Üí Consider index join\n\n**Step 4: Create SQL Tuning Task**\n```sql\nDECLARE\n  task_name VARCHAR2(30);\nBEGIN\n  task_name := DBMS_SQLTUNE.CREATE_TUNING_TASK(\n    sql_id => '&sql_id',\n    task_name => 'tune_slow_query'\n  );\n  DBMS_SQLTUNE.EXECUTE_TUNING_TASK(task_name);\nEND;\n/\n\n-- Get recommendations\nSELECT DBMS_SQLTUNE.REPORT_TUNING_TASK('tune_slow_query') FROM DUAL;\n```\n\n**Step 5: Implement fix**\n- Recommendation: Add index ‚Üí Create index\n- Recommendation: Use hint ‚Üí Test with hint, then SQL Plan Baseline\n- Recommendation: Gather stats ‚Üí `EXEC DBMS_STATS.GATHER_TABLE_STATS`\n\n## ADB-Specific Behaviors (OCI Gotchas)\n\n### Auto-Scaling Limits\n\n```\nAuto-scaling rules (cannot change):\n- Minimum: 1√ó base ECPU\n- Maximum: 3√ó base ECPU\n- Scaling trigger: CPU > 80% for 5+ minutes\n- Scale-down: CPU < 60% for 10+ minutes\n- Time to scale: 5-10 minutes\n\nExample: Base 2 ECPU\n- Can scale: 2 ‚Üí 4 ‚Üí 6 ECPU\n- Cannot scale: Beyond 6 ECPU (hard limit)\n- Cost: Pay for peak usage each hour\n```\n\n### ADMIN User Restrictions\n\n```\nIn Autonomous Database, ADMIN user:\n‚úì Can: Create users, grant roles, DDL operations\n‚úó Cannot: Create tablespaces (DATA is auto-managed)\n‚úó Cannot: Modify SYSTEM/SYSAUX tablespaces\n‚úó Cannot: Access OS (no shell, no file system)\n‚úó Cannot: Use SYSDBA privileges (not available in ADB)\n\nFor applications:\n- ADMIN: Only for database setup/maintenance\n- App users: Create dedicated users with minimal grants\n```\n\n### Service Name Performance Impact\n\n```\nADB provides 3 service names per database:\n\n| Service | CPU Allocation | Concurrency | Use For |\n|---------|---------------|-------------|---------|\n| HIGH | Dedicated OCPU | 1√ó ECPU | Interactive queries, OLTP |\n| MEDIUM | Shared OCPU | 2√ó ECPU | Reporting, batch jobs |\n| LOW | Most sharing | 3√ó ECPU | Background tasks, ETL |\n\nCost: All service names use same ECPU pool (no extra cost)\nPerformance: HIGH is faster but limits concurrency\nGotcha: Using HIGH for background jobs wastes resources\n```\n\n### Backup Retention (Automatic vs Manual)\n\n```\nAutomatic backups (free, included):\n- Frequency: Daily incremental, weekly full\n- Retention: 60 days default (configurable 1-60)\n- Cost: Included in ADB storage cost\n- Deletion: Automatic after retention period\n\nManual backups (charged separately):\n- Frequency: On-demand\n- Retention: FOREVER (until you delete)\n- Cost: $0.025/GB/month\n- Deletion: Manual only\n\nCost trap: 10 manual backups √ó 1TB √ó $0.025/GB/month = $250/month\nRecommendation: Use automatic backups, manual only for long-term archival\n```\n\n## Version-Specific Features (Know Which ADB Version)\n\n| Feature | 19c | 21c | 23ai | 26ai | When to Use |\n|---------|-----|-----|------|------|-------------|\n| **JSON Relational Duality** | - | - | ‚úì | ‚úì | Modern apps (REST + SQL) |\n| **AI Vector Search** | - | - | ‚úì | ‚úì | RAG, semantic search |\n| **JavaScript Stored Procs** | - | - | - | ‚úì | Node.js developers |\n| **SELECT AI** | - | - | ‚úì | ‚úì | Natural language ‚Üí SQL |\n| **Property Graphs** | - | ‚úì | ‚úì | ‚úì | Fraud detection, social |\n| **True Cache** | - | - | - | ‚úì | Read-heavy workloads |\n| **Blockchain Tables** | - | ‚úì | ‚úì | ‚úì | Immutable audit log |\n\n**Upgrade path**: 19c ‚Üí 21c ‚Üí 23ai ‚Üí 26ai\n**Downgrade**: NOT supported (cannot go back)\n**Recommendation**: Test in clone before upgrading production\n\n## Common ADB Errors Decoded\n\n| Error Message | Actual Cause | Solution |\n|---------------|--------------|----------|\n| `ORA-01017: invalid username/password` | Wallet password wrong OR expired credentials | Re-download wallet, check password |\n| `ORA-12170: Connect timeout` | Network issue OR wrong service name | Check NSG rules, verify tnsnames.ora |\n| `ORA-00604: error at recursive SQL level 1` | Automated task failed (stats gather, space mgmt) | Check DBA_SCHEDULER_JOB_RUN_DETAILS |\n| `ORA-30036: unable to extend segment` | Tablespace full (DATA auto-managed) | ADB auto-extends, if error persists ‚Üí contact support |\n| `ORA-01031: insufficient privileges` | ADMIN user trying restricted operation | Use ADMIN only for allowed operations (see restrictions) |\n\n## Advanced Operations (Progressive Loading)\n\n### SQLcl Direct Database Access\n\n**WHEN TO LOAD** [`sqlcl-workflows.md`](references/sqlcl-workflows.md):\n- Need to execute SQL queries directly via Bash\n- Want to get execution plans, wait events, or active sessions\n- Performing SQL tuning tasks (DBMS_SQLTUNE)\n- Exporting/importing data with Data Pump\n- Generating DDL for schema objects\n\n**Example**: Finding top SQL by elapsed time\n```bash\nsql admin/password@adb_high <<EOF\nSELECT sql_id, elapsed_time/executions/1000 AS avg_ms\nFROM v\\$sql WHERE executions > 0\nORDER BY elapsed_time DESC FETCH FIRST 10 ROWS ONLY;\nEXIT;\nEOF\n```\n\n**Do NOT load** for:\n- Standard troubleshooting advice - covered in this skill's decision trees\n- Cost calculations - exact formulas provided above\n- Anti-patterns - NEVER list covers common mistakes\n\n---\n\n### OCI CLI for ADB Management\n\n**WHEN TO LOAD** [`oci-cli-adb.md`](references/oci-cli-adb.md):\n- Need to provision, scale, or delete ADB instances\n- Creating backups or clones (full vs metadata)\n- Downloading wallet files\n- Changing configuration (auto-scaling, license type, version upgrades)\n- Batch operations across multiple ADBs\n\n**Example**: Scale ADB from 2 to 4 ECPUs\n```bash\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --cpu-core-count 4 \\\n  --wait-for-state AVAILABLE\n```\n\n**Example**: Create metadata clone (70% cheaper - schema only, no data)\n```bash\noci db autonomous-database create-from-clone \\\n  --source-id ocid1.autonomousdatabase.oc1..xxx \\\n  --display-name \"dev-schema\" \\\n  --db-name \"DEVSCHEMA\" \\\n  --clone-type METADATA \\\n  --wait-for-state AVAILABLE\n```\n\n**Do NOT load** for:\n- SQL operations (use SQLcl instead)\n- Performance analysis (v$sql queries covered in this skill)\n- Cost formulas (exact calculations provided above)\n\n---\n\n### OCI Autonomous Database Best Practices (Official Oracle Documentation)\n\n**WHEN TO LOAD** [`oci-adb-best-practices.md`](references/oci-adb-best-practices.md):\n- Need comprehensive ADB architecture and design patterns\n- Understanding ADB workload types (ATP, ADW, APEX, JSON)\n- Implementing production-grade ADB deployments\n- Need official Oracle guidance on ADB features and limitations\n- Planning migrations to ADB from on-premises Oracle\n\n**Do NOT load** for:\n- Quick SQL_ID debugging (workflow in this skill)\n- Cost calculations (exact formulas above)\n- Common gotchas (NEVER list covers them)\n\n---\n\n## When to Use This Skill\n\n- Performance issues: Slow queries, high CPU, scaling decisions\n- Cost optimization: ECPU sizing, stopped ADB charges, backup retention\n- Debugging: SQL_ID workflow, wait events, execution plans\n- Auto-scaling: When to enable, cost impact, limits\n- Version planning: Feature comparison (19c vs 26ai), upgrade timing\n- Security: ADMIN restrictions, user setup, service name selection\n",
        "skills/oracle-dba/references/oci-cli-adb.md": "# OCI CLI for Autonomous Database Operations\n\nDirect OCI CLI commands for ADB management. Use these instead of MCP server calls.\n\n## Prerequisites\n\n```bash\n# Verify OCI CLI is configured\noci --version\n\n# Test connectivity\noci iam region list --output table\n\n# Set default profile (optional)\nexport OCI_CLI_PROFILE=DEFAULT\n```\n\n## List and Discover\n\n### List All Autonomous Databases\n```bash\n# In specific compartment\noci db autonomous-database list \\\n  --compartment-id ocid1.compartment.oc1..xxx \\\n  --output table\n\n# Filter by display name\noci db autonomous-database list \\\n  --compartment-id ocid1.compartment.oc1..xxx \\\n  --display-name \"prod-adb\" \\\n  --output json | jq '.data[] | {id, name: .[\"display-name\"], state: .[\"lifecycle-state\"]}'\n\n# All compartments (requires tenancy permissions)\noci db autonomous-database list \\\n  --compartment-id ocid1.tenancy.oc1..xxx \\\n  --all \\\n  --output table\n```\n\n### Get ADB Details\n```bash\noci db autonomous-database get \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --output json | jq '{\n    name: .data[\"display-name\"],\n    ecpu: .data[\"cpu-core-count\"],\n    storage: .data[\"data-storage-size-in-tbs\"],\n    state: .data[\"lifecycle-state\"],\n    version: .data[\"db-version\"],\n    autoscaling: .data[\"is-auto-scaling-enabled\"]\n  }'\n```\n\n### List Backups\n```bash\n# Automatic backups\noci db autonomous-database-backup list \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --output table\n\n# Filter by type\noci db autonomous-database-backup list \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  | jq '.data[] | select(.type == \"FULL\")'\n```\n\n## Create and Provision\n\n### Create Autonomous Database\n```bash\noci db autonomous-database create \\\n  --compartment-id ocid1.compartment.oc1..xxx \\\n  --display-name \"prod-adb\" \\\n  --db-name \"PRODADB\" \\\n  --cpu-core-count 2 \\\n  --data-storage-size-in-tbs 1 \\\n  --admin-password 'SecurePass123!' \\\n  --db-version \"19c\" \\\n  --license-model LICENSE_INCLUDED \\\n  --is-auto-scaling-enabled false \\\n  --wait-for-state AVAILABLE\n\n# With auto-scaling and specific version\noci db autonomous-database create \\\n  --compartment-id ocid1.compartment.oc1..xxx \\\n  --display-name \"dev-adb-23ai\" \\\n  --db-name \"DEVADB\" \\\n  --cpu-core-count 2 \\\n  --data-storage-size-in-tbs 1 \\\n  --admin-password 'SecurePass123!' \\\n  --db-version \"23ai\" \\\n  --license-model LICENSE_INCLUDED \\\n  --is-auto-scaling-enabled true \\\n  --wait-for-state AVAILABLE\n```\n\n### Create Clone\n```bash\n# Full clone\noci db autonomous-database create-from-clone \\\n  --compartment-id ocid1.compartment.oc1..xxx \\\n  --source-id ocid1.autonomousdatabase.oc1..xxx \\\n  --display-name \"prod-adb-clone\" \\\n  --db-name \"PRODCLONE\" \\\n  --clone-type FULL \\\n  --wait-for-state AVAILABLE\n\n# Metadata clone (70% cheaper - no data)\noci db autonomous-database create-from-clone \\\n  --compartment-id ocid1.compartment.oc1..xxx \\\n  --source-id ocid1.autonomousdatabase.oc1..xxx \\\n  --display-name \"dev-schema-only\" \\\n  --db-name \"DEVSCHEMA\" \\\n  --clone-type METADATA \\\n  --wait-for-state AVAILABLE\n```\n\n## Scale and Update\n\n### Scale ECPUs\n```bash\n# Scale from 2 to 4 ECPUs\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --cpu-core-count 4 \\\n  --wait-for-state AVAILABLE\n\n# Enable auto-scaling (1-3x base ECPU, cannot configure max via CLI)\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --is-auto-scaling-enabled true \\\n  --wait-for-state AVAILABLE\n\n# IMPORTANT: Auto-scaling limits are FIXED (cannot change via CLI):\n# - Min: 1x base ECPU\n# - Max: 3x base ECPU (hard limit)\n# - Scaling trigger: CPU > 80% for 5+ minutes\n# - Scale-down: CPU < 60% for 10+ minutes\n#\n# Cost impact example (Base 2 ECPU):\n# - Without auto-scaling: 2 √ó $0.36 √ó 730 = $526/month (fixed)\n# - With auto-scaling peak: 6 √ó $0.36 √ó 730 = $1,578/month (if sustained)\n#\n# To limit costs: Start with higher base ECPU, disable auto-scaling\n```\n\n### Scale Storage\n```bash\n# Scale from 1TB to 2TB\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --data-storage-size-in-tbs 2 \\\n  --wait-for-state AVAILABLE\n```\n\n### Change License Type\n```bash\n# Switch to BYOL (50% cost reduction)\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --license-model BRING_YOUR_OWN_LICENSE \\\n  --wait-for-state AVAILABLE\n```\n\n## Lifecycle Management\n\n### Stop ADB\n```bash\noci db autonomous-database stop \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --wait-for-state STOPPED\n\n# IMPORTANT: Storage charges continue even when stopped!\n# 1TB ADB stopped = $25/month storage cost\n```\n\n### Start ADB\n```bash\noci db autonomous-database start \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --wait-for-state AVAILABLE\n```\n\n### Delete ADB\n```bash\n# Delete immediately\noci db autonomous-database delete \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --force\n\n# Delete with final backup\noci db autonomous-database-backup create \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --display-name \"final-backup-before-delete\" \\\n  --retention-days 30\n\noci db autonomous-database delete \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --force\n```\n\n## Backup Operations\n\n### Create Manual Backup\n```bash\n# With retention (CRITICAL - prevents forever storage)\noci db autonomous-database-backup create \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --display-name \"pre-upgrade-backup\" \\\n  --retention-days 30 \\\n  --wait-for-state ACTIVE\n\n# NEVER create without retention - costs $0.025/GB/month FOREVER\n# 1TB backup √ó $0.025 √ó ‚àû = $300/year perpetually\n```\n\n### Restore from Backup\n```bash\noci db autonomous-database restore \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --timestamp \"2026-01-28T10:00:00Z\" \\\n  --wait-for-state AVAILABLE\n```\n\n### Delete Manual Backup\n```bash\noci db autonomous-database-backup delete \\\n  --autonomous-database-backup-id ocid1.autonomousdatabasebackup.oc1..xxx \\\n  --force\n```\n\n## Wallet Management\n\n### Download Wallet\n```bash\n# Regional wallet (one wallet for this ADB)\noci db autonomous-database generate-wallet \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --password 'WalletPass123!' \\\n  --file ~/wallets/adb_wallet.zip\n\n# Extract and use\nmkdir ~/wallets/adb_wallet\nunzip ~/wallets/adb_wallet.zip -d ~/wallets/adb_wallet\nexport TNS_ADMIN=~/wallets/adb_wallet\n```\n\n### Rotate Wallet\n```bash\n# Generate new wallet (invalidates old ones)\noci db autonomous-database generate-wallet \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --password 'NewWalletPass123!' \\\n  --file ~/wallets/adb_wallet_new.zip\n```\n\n## Monitoring and Metrics\n\n### Get Connection Strings\n```bash\noci db autonomous-database get \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  | jq '.data[\"connection-strings\"]'\n\n# Extract specific service\noci db autonomous-database get \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  | jq -r '.data[\"connection-strings\"][\"profiles\"][] | select(.[\"consumer-group\"] == \"HIGH\") | .value'\n```\n\n### Check ECPU Usage (requires monitoring API)\n```bash\n# Query metrics namespace\noci monitoring metric-data summarize-metrics-data \\\n  --namespace oci_autonomous_database \\\n  --compartment-id ocid1.compartment.oc1..xxx \\\n  --query-text 'CpuUtilization[1m].mean()' \\\n  --start-time \"2026-01-28T00:00:00Z\" \\\n  --end-time \"2026-01-28T23:59:59Z\" \\\n  --output table\n```\n\n## Cost Management\n\n### Check Current Cost Configuration\n```bash\noci db autonomous-database get \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  | jq '{\n    ecpu: .data[\"cpu-core-count\"],\n    storage_tb: .data[\"data-storage-size-in-tbs\"],\n    license: .data[\"license-model\"],\n    autoscaling: .data[\"is-auto-scaling-enabled\"],\n    state: .data[\"lifecycle-state\"]\n  }'\n\n# Calculate monthly cost\n# License-Included: ECPU √ó $0.36/hr √ó 730 hrs + Storage_TB √ó 1000 √ó $0.025\n# BYOL: ECPU √ó $0.18/hr √ó 730 hrs + Storage_TB √ó 1000 √ó $0.025\n```\n\n### Switch to BYOL (50% compute savings)\n```bash\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --license-model BRING_YOUR_OWN_LICENSE \\\n  --wait-for-state AVAILABLE\n\n# Savings: 2 ECPU √ó ($0.36 - $0.18) √ó 730 = $263/month\n```\n\n## Advanced Operations\n\n### Update to Latest Version\n```bash\n# Update to 23ai\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --db-version \"23ai\" \\\n  --wait-for-state AVAILABLE\n\n# CRITICAL: Cannot downgrade! Test in clone first.\n```\n\n### Change Workload Type\n```bash\n# Switch from OLTP to Data Warehouse\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --db-workload \"DW\" \\\n  --wait-for-state AVAILABLE\n```\n\n### Enable/Disable Features\n```bash\n# Enable operations insights\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --is-operations-insights-enabled true \\\n  --wait-for-state AVAILABLE\n\n# Enable database management\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --is-database-management-enabled true \\\n  --wait-for-state AVAILABLE\n```\n\n## High Availability and Disaster Recovery\n\n### Create Autonomous Data Guard (Standby Database)\n```bash\n# Enable Autonomous Data Guard (creates standby in different region)\noci db autonomous-database create-autonomous-database-dataguard-association \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --protection-mode MAXIMUM_PERFORMANCE \\\n  --wait-for-state AVAILABLE\n\n# Check Data Guard status\noci db autonomous-database-dataguard-association list \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --output table\n```\n\n### Failover (Disaster Recovery)\n```bash\n# Failover to standby (makes standby the new primary)\n# Use when primary is unavailable\noci db autonomous-database failover \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --wait-for-state AVAILABLE\n\n# CRITICAL: This is a disaster recovery operation\n# Primary must be unavailable or you'll get an error\n```\n\n### Switchover (Planned Maintenance)\n```bash\n# Switchover to standby (makes standby the new primary)\n# Use for planned maintenance\noci db autonomous-database switchover \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --wait-for-state AVAILABLE\n\n# After switchover:\n# - Old primary becomes new standby\n# - Old standby becomes new primary\n# - Zero data loss\n```\n\n### Reinstate Failed Primary\n```bash\n# After failover, reinstate old primary as new standby\noci db autonomous-database reinstate-autonomous-database-dataguard-association \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --wait-for-state AVAILABLE\n```\n\n## Version-Specific Features\n\n### Check Available Versions\n```bash\n# List all available DB versions\noci db autonomous-db-version list \\\n  --compartment-id ocid1.compartment.oc1..xxx \\\n  --db-workload OLTP \\\n  --output table\n\n# Check features available in specific version\noci db autonomous-database get \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  | jq '.data[\"db-version\"]'\n```\n\n### Version-Specific Feature Matrix\n```\nVersion-specific features (enabled by upgrading to version):\n\n19c:\n- Standard Oracle Database features\n- Basic JSON support\n\n21c:\n- Property Graphs (CREATE PROPERTY GRAPH)\n- Blockchain Tables (CREATE BLOCKCHAIN TABLE)\n- Enhanced JSON (JSON_VALUE, JSON_QUERY)\n\n23ai:\n- JSON Relational Duality Views\n- AI Vector Search (VECTOR data type, VECTOR_DISTANCE)\n- SELECT AI (natural language queries)\n- SQL Domains (domain data types)\n- Annotations (metadata tags)\n\n26ai:\n- JavaScript Stored Procedures\n- True Cache (application-consistent read cache)\n- Enhanced vector search (hybrid search)\n- All 23ai features\n\nIMPORTANT: Features are enabled by database version, not OCI CLI flags.\nTo use 23ai features, upgrade database to version \"23ai\".\n```\n\n### Upgrade Path Example\n```bash\n# Check current version\noci db autonomous-database get \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  | jq -r '.data[\"db-version\"]'\n\n# 1. Create clone for testing\noci db autonomous-database create-from-clone \\\n  --source-id ocid1.autonomousdatabase.oc1..xxx \\\n  --display-name \"test-23ai-upgrade\" \\\n  --db-name \"TEST23AI\" \\\n  --clone-type FULL \\\n  --wait-for-state AVAILABLE\n\n# 2. Upgrade clone to 23ai\noci db autonomous-database update \\\n  --autonomous-database-id <clone-id> \\\n  --db-version \"23ai\" \\\n  --wait-for-state AVAILABLE\n\n# 3. Test application with 23ai features\n\n# 4. If successful, upgrade production\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --db-version \"23ai\" \\\n  --wait-for-state AVAILABLE\n\n# CRITICAL: Cannot downgrade! Always test in clone first.\n```\n\n## Troubleshooting\n\n### Get ADB State and Issues\n```bash\n# Check lifecycle state\noci db autonomous-database get \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  | jq -r '.data[\"lifecycle-state\"]'\n\n# Possible states:\n# PROVISIONING, AVAILABLE, STOPPING, STOPPED, STARTING,\n# TERMINATING, TERMINATED, UNAVAILABLE, RESTORE_IN_PROGRESS,\n# BACKUP_IN_PROGRESS, SCALE_IN_PROGRESS, UPGRADE_IN_PROGRESS\n```\n\n### Common Errors\n\n#### Insufficient Quota\n```bash\n# Error: \"Service limit exceeded for resource autonomous-database\"\n# Check quota:\noci limits quota list --compartment-id ocid1.tenancy.oc1..xxx\n\n# Request increase via console or support ticket\n```\n\n#### Invalid Parameter\n```bash\n# Error: \"InvalidParameter: cpu-core-count must be between 1 and 128\"\n# Check valid ranges:\noci db autonomous-database create --generate-param-json-input\n```\n\n#### Concurrent Operation\n```bash\n# Error: \"ConflictingOperationException: Another operation is in progress\"\n# Wait for current operation to complete:\noci db autonomous-database get \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  | jq -r '.data[\"lifecycle-state\"]'\n\n# Poll until state returns to AVAILABLE\n```\n\n## Scripting Patterns\n\n### Batch Operations with JQ\n```bash\n# Scale all dev ADBs to 1 ECPU\noci db autonomous-database list \\\n  --compartment-id ocid1.compartment.oc1..xxx \\\n  --all \\\n  | jq -r '.data[] | select(.[\"display-name\"] | startswith(\"dev-\")) | .id' \\\n  | while read adb_id; do\n      echo \"Scaling $adb_id to 1 ECPU\"\n      oci db autonomous-database update \\\n        --autonomous-database-id \"$adb_id\" \\\n        --cpu-core-count 1 \\\n        --wait-for-state AVAILABLE\n    done\n```\n\n### Get Cost Summary\n```bash\n# Calculate total monthly cost for all ADBs in compartment\noci db autonomous-database list \\\n  --compartment-id ocid1.compartment.oc1..xxx \\\n  --all \\\n  | jq -r '.data[] | select(.[\"lifecycle-state\"] != \"TERMINATED\") | [\n    .[\"display-name\"],\n    .[\"cpu-core-count\"],\n    .[\"data-storage-size-in-tbs\"],\n    .[\"license-model\"],\n    (.[\"cpu-core-count\"] * 0.36 * 730 + .[\"data-storage-size-in-tbs\"] * 1000 * 0.025)\n  ] | @tsv' \\\n  | awk '{print $1, \"\\t\", $2, \"ECPU\\t\", $3, \"TB\\t$\" $5 \"/month\"}'\n```\n\n## Best Practices\n\n### Always Use --wait-for-state\n```bash\n# ‚úÖ GOOD - waits for operation to complete\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --cpu-core-count 4 \\\n  --wait-for-state AVAILABLE\n\n# ‚ùå BAD - returns immediately, operation may fail silently\noci db autonomous-database update \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  --cpu-core-count 4\n```\n\n### Use JQ for JSON Parsing\n```bash\n# ‚úÖ GOOD - robust JSON parsing\noci db autonomous-database get \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  | jq -r '.data[\"display-name\"]'\n\n# ‚ùå BAD - fragile grep/sed parsing\noci db autonomous-database get \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx \\\n  | grep display-name | sed 's/.*: \"\\(.*\\)\".*/\\1/'\n```\n\n### Store OCIDs in Variables\n```bash\n# ‚úÖ GOOD - reusable, readable\nCOMPARTMENT_ID=\"ocid1.compartment.oc1..xxx\"\nADB_ID=\"ocid1.autonomousdatabase.oc1..xxx\"\n\noci db autonomous-database get \\\n  --autonomous-database-id \"$ADB_ID\"\n\n# ‚ùå BAD - error-prone, hard to maintain\noci db autonomous-database get \\\n  --autonomous-database-id ocid1.autonomousdatabase.oc1..xxx\n```\n\n## When to Use OCI CLI\n\n**Use OCI CLI when you need to:**\n- Provision or delete ADB instances\n- Scale ECPUs or storage\n- Create backups or clones\n- Download wallets\n- Change configuration (auto-scaling, license type)\n- Batch operations across multiple ADBs\n\n**Don't use OCI CLI for:**\n- SQL queries (use SQLcl instead - see `sqlcl-workflows.md`)\n- Performance troubleshooting (use SQLcl + v$sql)\n- Cost calculations (exact formulas in main SKILL.md)\n",
        "skills/oracle-dba/references/sqlcl-workflows.md": "# SQLcl Workflows for ADB Operations\n\nSQLcl is Oracle's command-line SQL tool. Use it directly via Bash for database operations.\n\n## Connection Patterns\n\n### Connect to ADB (with wallet)\n```bash\n# Set wallet location\nexport TNS_ADMIN=/path/to/wallet\n\n# Connect\nsql admin/password@adb_high\n```\n\n### Common Connection Services\n- `adb_high`: Low latency, high concurrency (OLTP)\n- `adb_medium`: Balanced (reporting, batch jobs)\n- `adb_low`: Highest parallelism (background tasks, ETL)\n\n## Performance Analysis Workflows\n\n### Find Top SQL by Elapsed Time\n```bash\nsql admin/password@adb_high <<EOF\nSET PAGESIZE 50\nSET LINESIZE 200\n\nSELECT sql_id,\n       ROUND(elapsed_time/executions/1000, 2) AS avg_ms,\n       executions,\n       SUBSTR(sql_text, 1, 80) AS sql_text\nFROM v\\$sql\nWHERE executions > 0\n  AND last_active_time > SYSDATE - 1/24\nORDER BY elapsed_time DESC\nFETCH FIRST 10 ROWS ONLY;\nEXIT;\nEOF\n```\n\n### Get Execution Plan for SQL_ID\n```bash\nsql admin/password@adb_high <<EOF\nSELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR('&sql_id'));\nEXIT;\nEOF\n```\n\n### Check Wait Events\n```bash\nsql admin/password@adb_high <<EOF\nSELECT event,\n       ROUND(time_waited_micro/1000000, 2) AS wait_sec,\n       total_waits\nFROM v\\$system_event\nWHERE wait_class != 'Idle'\nORDER BY time_waited_micro DESC\nFETCH FIRST 10 ROWS ONLY;\nEXIT;\nEOF\n```\n\n## Schema Discovery\n\n### List Large Tables\n```bash\nsql admin/password@adb_high <<EOF\nSELECT table_name,\n       num_rows,\n       ROUND(blocks * 8192 / 1024 / 1024, 2) AS size_mb\nFROM user_tables\nWHERE num_rows > 0\nORDER BY num_rows DESC\nFETCH FIRST 20 ROWS ONLY;\nEXIT;\nEOF\n```\n\n### Get Table DDL\n```bash\nsql admin/password@adb_high <<EOF\nSET LONG 100000\nSET PAGESIZE 0\nSELECT DBMS_METADATA.GET_DDL('TABLE', 'ORDERS') FROM DUAL;\nEXIT;\nEOF\n```\n\n## SQL Tuning Workflow\n\n### Create SQL Tuning Task\n```bash\nsql admin/password@adb_high <<EOF\nDECLARE\n  task_name VARCHAR2(30);\nBEGIN\n  task_name := DBMS_SQLTUNE.CREATE_TUNING_TASK(\n    sql_id => '&sql_id',\n    task_name => 'tune_slow_query'\n  );\n  DBMS_SQLTUNE.EXECUTE_TUNING_TASK(task_name);\n  DBMS_OUTPUT.PUT_LINE('Tuning task created: ' || task_name);\nEND;\n/\n\n-- Get recommendations\nSELECT DBMS_SQLTUNE.REPORT_TUNING_TASK('tune_slow_query') FROM DUAL;\nEXIT;\nEOF\n```\n\n## Data Operations\n\n### Export Table (Data Pump)\n```bash\n# Create directory (one-time setup)\nsql admin/password@adb_high <<EOF\nCREATE DIRECTORY export_dir AS '/tmp/exports';\nGRANT READ, WRITE ON DIRECTORY export_dir TO ADMIN;\nEXIT;\nEOF\n\n# Export\nexpdp admin/password@adb_high \\\n  tables=ORDERS \\\n  directory=export_dir \\\n  dumpfile=orders.dmp \\\n  logfile=orders_export.log\n```\n\n### Import Table\n```bash\nimpdp admin/password@adb_high \\\n  tables=ORDERS \\\n  directory=export_dir \\\n  dumpfile=orders.dmp \\\n  logfile=orders_import.log \\\n  table_exists_action=REPLACE\n```\n\n## Monitoring\n\n### Check Active Sessions\n```bash\nsql admin/password@adb_high <<EOF\nSELECT sid,\n       serial#,\n       username,\n       status,\n       sql_id,\n       event\nFROM v\\$session\nWHERE status = 'ACTIVE'\n  AND username IS NOT NULL\nORDER BY sid;\nEXIT;\nEOF\n```\n\n### Find Blocking Sessions\n```bash\nsql admin/password@adb_high <<EOF\nSELECT blocking_session,\n       sid AS blocked_sid,\n       username,\n       event,\n       seconds_in_wait\nFROM v\\$session\nWHERE blocking_session IS NOT NULL\nORDER BY seconds_in_wait DESC;\nEXIT;\nEOF\n```\n\n## Best Practices\n\n### Use Heredoc for Multi-Line SQL\n```bash\n# GOOD - heredoc preserves formatting\nsql admin/password@adb_high <<EOF\nSELECT *\nFROM orders\nWHERE status = 'PENDING';\nEXIT;\nEOF\n```\n\n### Set Output Formatting\n```bash\nsql admin/password@adb_high <<EOF\nSET PAGESIZE 100       -- Rows per page\nSET LINESIZE 200       -- Characters per line\nSET FEEDBACK ON        -- Show \"N rows selected\"\nSET TIMING ON          -- Show execution time\nSET SQLFORMAT ANSICONSOLE  -- Color output\n\n-- Your query here\nEXIT;\nEOF\n```\n\n### Silent Mode (Scripts)\n```bash\nsql -S admin/password@adb_high <<EOF\n-- Suppress banner and prompts\nSELECT COUNT(*) FROM orders;\nEXIT;\nEOF\n```\n\n## Common Errors\n\n### Wallet Not Found\n```bash\n# Error: ORA-29024: Certificate validation failure\n# Fix: Set TNS_ADMIN\nexport TNS_ADMIN=/path/to/wallet_dir\n```\n\n### Connection Timeout\n```bash\n# Error: ORA-12170: TNS:Connect timeout occurred\n# Check: Network connectivity, service name\ntnsping adb_high\n```\n\n### Insufficient Privileges\n```bash\n# Error: ORA-01031: insufficient privileges\n# Fix: Grant required privileges\nsql admin/password@adb_high <<EOF\nGRANT SELECT ON v\\$sql TO app_user;\nEXIT;\nEOF\n```\n\n## When to Use SQLcl\n\n**Use SQLcl when you need to:**\n- Execute ad-hoc SQL queries to troubleshoot issues\n- Get execution plans for slow SQL_ID\n- Check current wait events or active sessions\n- Export/import data for backups or migrations\n- Generate DDL for schema objects\n- Run SQL tuning tasks\n\n**Don't use SQLcl for:**\n- Bulk operations (use Data Pump instead)\n- Programmatic automation (use OCI CLI for ADB management)\n- Long-running queries (connection may timeout)\n",
        "skills/secrets-management/SKILL.md": "---\nname: secrets-management\ndescription: Use when storing credentials in OCI Vault, troubleshooting secret retrieval failures, implementing secret rotation, or setting up application authentication to Vault. Covers vault hierarchy confusion, IAM permission gotchas, cost optimization, temp file security, and audit logging.\nlicense: MIT\nmetadata:\n  author: alexander-cedergren\n  version: \"2.0.0\"\n---\n\n# OCI Vault and Secrets Management - Expert Knowledge\n\n## üèóÔ∏è Use OCI Landing Zone Terraform Modules\n\n**Don't reinvent the wheel.** Use [oracle-terraform-modules/landing-zone](https://github.com/oracle-terraform-modules/terraform-oci-landing-zones) for Vault setup.\n\n**Landing Zone solves:**\n- ‚ùå Bad Practice #1: Generic compartments (Landing Zone creates Security compartment for Vault)\n- ‚ùå Bad Practice #7: No security services (Landing Zone integrates Cloud Guard monitoring)\n- ‚ùå Bad Practice #10: No audit logging (Landing Zone enables Vault audit logs)\n\n**This skill provides**: Vault operations, secret management patterns, and troubleshooting for vaults deployed WITHIN a Landing Zone.\n\n---\n\n## ‚ö†Ô∏è OCI CLI/API Knowledge Gap\n\n**You don't know OCI CLI commands or OCI API structure.**\n\nYour training data has limited and outdated knowledge of:\n- OCI CLI syntax and parameters (updates monthly)\n- OCI API endpoints and request/response formats\n- Vault service CLI operations (`oci vault secret`, `oci kms`)\n- Secret encoding formats and retrieval patterns\n- Latest Vault/KMS features and cross-region replication\n\n**When OCI operations are needed:**\n1. Use exact CLI commands from this skill's references\n2. Do NOT guess OCI Vault CLI syntax\n3. Do NOT assume AWS Secrets Manager patterns work in OCI\n4. Load reference files for detailed Vault API documentation\n\n**What you DO know:**\n- General secrets management principles\n- Encryption and key management concepts\n- Secret rotation patterns\n\nThis skill bridges the gap by providing current OCI-specific Vault patterns and gotchas.\n\n---\n\nYou are an OCI Vault expert. This skill provides knowledge Claude lacks: anti-patterns, IAM permission gotchas, cost optimization, security vulnerabilities, and OCI-specific operational knowledge.\n\n## NEVER Do This\n\n‚ùå **NEVER log secret contents (even in debug/error messages)**\n```python\n# WRONG - secret ends up in log aggregation, retained for years\nlogger.debug(f\"Retrieved secret: {secret_value}\")\nlogger.error(f\"Failed to parse secret: {secret_value}\")\n\n# RIGHT - log metadata only\nlogger.debug(f\"Retrieved secret OCID: {secret_ocid[:20]}...\")\nlogger.error(f\"Failed to parse secret (type: {type(secret_value)})\")\n```\n\n‚ùå **NEVER set temp key file permissions AFTER writing content**\n```python\n# WRONG - world-readable during write (security window)\nwith open('/tmp/key.pem', 'w') as f:\n    f.write(private_key)\nos.chmod('/tmp/key.pem', 0o600)  # Too late!\n\n# RIGHT - secure BEFORE writing\nfd = os.open('/tmp/key.pem', os.O_CREAT | os.O_WRONLY, 0o600)\nwith os.fdopen(fd, 'w') as f:\n    f.write(private_key)\n```\n\n‚ùå **NEVER use overly broad IAM policies**\n```\nBAD:  \"Allow any-user to read secret-family in tenancy\"\nBAD:  \"Allow group Developers to manage secret-family in tenancy\"\nGOOD: \"Allow dynamic-group app-prod to read secret-family in compartment AppSecrets\n       where target.secret.name = 'db-*'\"\n```\n\n‚ùå **NEVER retrieve secrets without caching**\n- **Cost**: $0.03 per 10,000 requests (first 10k/month free)\n- **Without cache**: 1000 req/hr √ó 24 √ó 30 = 720k/month = **$2.16/month**\n- **With 60min cache**: 1000 req/hr ‚Üí 24 calls/day = 720/month = **FREE**\n- **Savings**: 98% cost reduction\n\n‚ùå **NEVER use PLAIN content type (deprecated)**\n- Always use BASE64 encoding for secrets\n- PLAIN is legacy and may not work in future\n\n‚ùå **NEVER hardcode Vault OCIDs in code**\n```python\n# WRONG - not portable, leaked in repos\nVAULT_SECRET_OCID = \"ocid1.vaultsecret.oc1.iad.xxxxx\"\n\n# RIGHT - configuration\nVAULT_SECRET_OCID = os.environ['VAULT_SECRET_OCID']\n```\n\n## IAM Permission Gotcha (Critical)\n\nSecret retrieval requires **BOTH** permissions:\n\n```\n\"Allow dynamic-group X to read secret-family in compartment Y\"\n\"Allow dynamic-group X to use keys in compartment Y\"\n```\n\n**Why both needed:**\n- `read secret-family` ‚Üí allows listing and reading secret metadata\n- `use keys` ‚Üí allows decryption of secret content (secrets encrypted with master key)\n\n**Without `use keys`**: Get confusing 403 error: \"User not authorized to perform this operation\"\n\n**Common mistake**: Forgetting `use keys` permission, spending hours debugging \"authorization failed\"\n\n## Vault Hierarchy (Often Confused)\n\n```\nVault (container)\n ‚îî‚îÄ Master Encryption Key (for encryption/decryption)\n     ‚îî‚îÄ Secret (encrypted data)\n         ‚îî‚îÄ Secret Versions (rotation over time)\n```\n\n**Commands use different services:**\n- Vault operations: `oci kms management vault ...`\n- Key operations: `oci kms management key ... --endpoint <vault-endpoint>`\n- Secret operations: `oci vault secret ...` (NOT kms!)\n\n**Common mistake**: `oci vault-secret create` (no such command) vs `oci vault secret create` (correct)\n\n## Secret Retrieval Error Decision Tree\n\n```\nSecret retrieval fails?\n‚îÇ\n‚îú‚îÄ 401 Unauthorized\n‚îÇ  ‚îú‚îÄ On OCI compute? ‚Üí Check dynamic group membership\n‚îÇ  ‚îú‚îÄ Local dev? ‚Üí Check ~/.oci/config, verify API key uploaded\n‚îÇ  ‚îî‚îÄ After rotation? ‚Üí Cache still has old credentials (wait for TTL)\n‚îÇ\n‚îú‚îÄ 403 Forbidden\n‚îÇ  ‚îú‚îÄ Have \"read secret-family\" permission? ‚Üí Add if missing\n‚îÇ  ‚îî‚îÄ Have \"use keys\" permission? ‚Üí THIS IS USUALLY THE ISSUE\n‚îÇ\n‚îú‚îÄ 404 Not Found\n‚îÇ  ‚îú‚îÄ Wrong secret OCID? ‚Üí Verify environment variable\n‚îÇ  ‚îú‚îÄ Wrong compartment? ‚Üí Secrets client must use secret's compartment\n‚îÇ  ‚îî‚îÄ Secret deleted? ‚Üí Check vault for secret status\n‚îÇ\n‚îî‚îÄ 500 Internal Server Error\n   ‚îî‚îÄ Vault service issue ‚Üí Retry with exponential backoff (rate limit)\n```\n\n## Cost Optimization\n\n**Vault API Pricing:** $0.03 per 10,000 requests (10k/month free)\n\n### Calculation Examples:\n\n**Without caching** (retrieve on every API call):\n- 1000 API calls/hour\n- 24 hours √ó 30 days = 720,000 Vault requests/month\n- (720,000 / 10,000) √ó $0.03 = **$2.16/month**\n\n**With 60-minute cache TTL**:\n- 1000 API calls/hour ‚Üí 1 Vault request/hour\n- 24 hours √ó 30 days = 720 Vault requests/month\n- Under 10k free tier = **$0/month (FREE)**\n- **Savings: 98%**\n\n**Cache TTL Selection:**\n\n| Security Requirements | Cache TTL | Reasoning |\n|----------------------|-----------|-----------|\n| High (rotate daily) | 5-15 minutes | Frequent refresh, still 90%+ savings |\n| Standard (rotate monthly) | 30-60 minutes | Balance security and cost |\n| Dev/Test | No cache | Always fresh for development |\n\n**Rule**: Cache TTL must be **less than** secret rotation window\n\n## Secret Rotation (Zero-Downtime)\n\n**WRONG** (causes downtime):\n```bash\n# Don't delete and recreate - breaks running apps\noci vault secret delete --secret-id <secret-ocid>\noci vault secret create ...  # New OCID, apps break\n```\n\n**RIGHT** (zero-downtime):\n```bash\n# Create new VERSION of existing secret\noci vault secret update-base64 \\\n  --secret-id <secret-ocid> \\\n  --secret-content-content \"$(echo -n 'new-value' | base64)\"\n\n# Secret OCID stays same, apps automatically get new version\n# Old version kept as \"previous\" for rollback\n```\n\n**Key points:**\n- Secret OCID doesn't change (apps continue working)\n- Vault serves latest version by default\n- Previous versions retained for rollback\n- Applications pick up new version on next cache refresh (no restart needed)\n\n## Instance Principal Authentication\n\n**Production compute instances should use instance principals:**\n\n```bash\n# 1. Create dynamic group\noci iam dynamic-group create \\\n  --name \"app-instances\" \\\n  --matching-rule \"instance.compartment.id = '<compartment-ocid>'\"\n\n# 2. Grant Vault access\n# \"Allow dynamic-group app-instances to read secret-family in compartment Secrets\"\n# \"Allow dynamic-group app-instances to use keys in compartment Secrets\"\n\n# 3. Application code (no credentials needed)\nsigner = oci.auth.signers.InstancePrincipalsSecurityTokenSigner()\nsecrets_client = oci.secrets.SecretsClient(config={}, signer=signer)\n```\n\n**Benefits:**\n- No credentials to manage or rotate\n- No secrets stored on compute instances\n- Automatic token refresh\n- Audit trail shows which instance accessed what\n\n## Audit Logging\n\n**Enable Vault access logging:**\n\n```bash\n# Create log group\noci logging log-group create \\\n  --compartment-id <ocid> \\\n  --display-name \"vault-audit-logs\"\n\n# Enable read access logging\noci logging log create \\\n  --log-group-id <log-group-ocid> \\\n  --display-name \"secret-read-audit\" \\\n  --log-type SERVICE \\\n  --configuration '{\n    \"source\": {\n      \"sourceType\": \"OCISERVICE\",\n      \"service\": \"vaults\",\n      \"resource\": \"<vault-ocid>\",\n      \"category\": \"read\"\n    }\n  }'\n```\n\n**What gets logged:**\n- Who: User OCID or instance principal identity\n- What: Secret OCID accessed\n- When: Timestamp (UTC)\n- Where: Source IP address\n- Result: Success (200) or failure (403, 404, etc.)\n\n**Monitoring alerts** (recommended):\n- \\>10 failed access attempts in 5 minutes (unauthorized access)\n- Access to secrets not assigned to requesting instance\n- Access from unexpected IP ranges\n\n## OCI-Specific Gotchas\n\n**Vault Management Endpoint is Required for Key Operations:**\n```bash\n# Find your vault's endpoint\noci kms management vault get --vault-id <vault-ocid> \\\n  --query 'data.\"management-endpoint\"' --raw-output\n\n# Use in key commands\noci kms management key create ... \\\n  --endpoint https://xxxxx-management.kms.us-ashburn-1.oraclecloud.com\n```\n\n**Regional Vault Availability:**\n- Not all OCI regions have Vault service\n- Check region availability before designing architecture\n- Cross-region secret access adds latency (10-50ms)\n\n**Secret Bundle Base64 Decoding:**\n```python\n# Secret content is base64-encoded\nsecret_bundle = secrets_client.get_secret_bundle(secret_ocid)\nencoded = secret_bundle.data.secret_bundle_content.content\ndecoded = base64.b64decode(encoded).decode('utf-8')  # Don't forget decode()\n```\n\n## Progressive Loading References\n\n### OCI Vault Reference (Official Oracle Documentation)\n\n**WHEN TO LOAD** [`oci-vault-reference.md`](references/oci-vault-reference.md):\n- Need comprehensive Vault and KMS API documentation\n- Understanding key management and encryption options\n- Implementing HSM-backed key protection\n- Need official Oracle guidance on Vault architecture\n- Setting up cross-region secret replication\n\n**Do NOT load** for:\n- Quick secret retrieval examples (covered in this skill)\n- Permission debugging (decision trees above)\n- Secret rotation patterns (covered above)\n\n---\n\n## When to Use This Skill\n\n- Storing credentials in Vault: secret organization, IAM setup\n- Secret retrieval failures: 403 errors, permission debugging\n- Cost optimization: caching strategy, API call reduction\n- Secret rotation: zero-downtime updates, version management\n- Security: temp file handling, logging anti-patterns, audit setup\n- Production: instance principal configuration, monitoring alerts\n"
      },
      "plugins": [
        {
          "name": "oci-skills",
          "description": "Complete OCI automation skills covering compute, networking, databases, monitoring, secrets, GenAI, IAM, IaC, FinOps, and best practices",
          "source": "./",
          "strict": false,
          "skills": [
            "./skills/compute-management",
            "./skills/networking-management",
            "./skills/database-management",
            "./skills/oracle-dba",
            "./skills/monitoring-operations",
            "./skills/secrets-management",
            "./skills/genai-services",
            "./skills/iam-identity-management",
            "./skills/infrastructure-as-code",
            "./skills/finops-cost-optimization",
            "./skills/best-practices",
            "./skills/landing-zones",
            "./skills/oci-events"
          ],
          "categories": [],
          "install_commands": [
            "/plugin marketplace add acedergren/oci-agent-skills",
            "/plugin install oci-skills@oci-agent-skills"
          ]
        }
      ]
    }
  ]
}