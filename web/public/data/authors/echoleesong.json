{
  "author": {
    "id": "echoleesong",
    "display_name": "Li Shuang",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/137158688?u=fb891275175844920f1380f7596694e040306f61&v=4",
    "url": "https://github.com/echoleesong",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 19,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "claude-skills-plugin-marketplace",
      "version": null,
      "description": "A comprehensive and extensible Claude Code skills repository. Currently includes 7 n8n workflow development skills and 1 skill-creator meta skill, with plans to expand to other development domains",
      "owner_info": {
        "name": "Li Song",
        "email": "echoleesong@example.com"
      },
      "keywords": [],
      "repo_full_name": "echoleesong/claude-skills-plugin",
      "repo_url": "https://github.com/echoleesong/claude-skills-plugin",
      "repo_description": null,
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-29T14:21:36Z",
        "created_at": "2026-01-14T03:55:21Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 467
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 765
        },
        {
          "path": "Khazix-Skills-main",
          "type": "tree",
          "size": null
        },
        {
          "path": "Khazix-Skills-main/README.md",
          "type": "blob",
          "size": 4341
        },
        {
          "path": "Khazix-Skills-main/github-to-skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "Khazix-Skills-main/github-to-skills/SKILL.md",
          "type": "blob",
          "size": 2808
        },
        {
          "path": "Khazix-Skills-main/skill-evolution-manager",
          "type": "tree",
          "size": null
        },
        {
          "path": "Khazix-Skills-main/skill-evolution-manager/SKILL.md",
          "type": "blob",
          "size": 3171
        },
        {
          "path": "Khazix-Skills-main/skill-manager",
          "type": "tree",
          "size": null
        },
        {
          "path": "Khazix-Skills-main/skill-manager/SKILL.md",
          "type": "blob",
          "size": 2583
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 16929
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/chinese-novelist",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/chinese-novelist/SKILL.md",
          "type": "blob",
          "size": 6485
        },
        {
          "path": "skills/chinese-novelist/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/chinese-novelist/references/chapter-guide.md",
          "type": "blob",
          "size": 7555
        },
        {
          "path": "skills/chinese-novelist/references/chapter-template.md",
          "type": "blob",
          "size": 426
        },
        {
          "path": "skills/chinese-novelist/references/character-building.md",
          "type": "blob",
          "size": 5691
        },
        {
          "path": "skills/chinese-novelist/references/character-template.md",
          "type": "blob",
          "size": 373
        },
        {
          "path": "skills/chinese-novelist/references/consistency.md",
          "type": "blob",
          "size": 1087
        },
        {
          "path": "skills/chinese-novelist/references/content-expansion.md",
          "type": "blob",
          "size": 1490
        },
        {
          "path": "skills/chinese-novelist/references/dialogue-writing.md",
          "type": "blob",
          "size": 7041
        },
        {
          "path": "skills/chinese-novelist/references/hook-techniques.md",
          "type": "blob",
          "size": 4825
        },
        {
          "path": "skills/chinese-novelist/references/outline-template.md",
          "type": "blob",
          "size": 1163
        },
        {
          "path": "skills/chinese-novelist/references/plot-structures.md",
          "type": "blob",
          "size": 6533
        },
        {
          "path": "skills/md-to-pptx",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/md-to-pptx/SKILL.md",
          "type": "blob",
          "size": 6639
        },
        {
          "path": "skills/md-to-pptx/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/md-to-pptx/references/markdown-format.md",
          "type": "blob",
          "size": 1576
        },
        {
          "path": "skills/n8n-code-javascript",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-code-javascript/BUILTIN_FUNCTIONS.md",
          "type": "blob",
          "size": 16845
        },
        {
          "path": "skills/n8n-code-javascript/COMMON_PATTERNS.md",
          "type": "blob",
          "size": 29205
        },
        {
          "path": "skills/n8n-code-javascript/DATA_ACCESS.md",
          "type": "blob",
          "size": 22510
        },
        {
          "path": "skills/n8n-code-javascript/ERROR_PATTERNS.md",
          "type": "blob",
          "size": 25046
        },
        {
          "path": "skills/n8n-code-javascript/README.md",
          "type": "blob",
          "size": 9563
        },
        {
          "path": "skills/n8n-code-javascript/SKILL.md",
          "type": "blob",
          "size": 17052
        },
        {
          "path": "skills/n8n-code-python",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-code-python/COMMON_PATTERNS.md",
          "type": "blob",
          "size": 19329
        },
        {
          "path": "skills/n8n-code-python/DATA_ACCESS.md",
          "type": "blob",
          "size": 15026
        },
        {
          "path": "skills/n8n-code-python/ERROR_PATTERNS.md",
          "type": "blob",
          "size": 13913
        },
        {
          "path": "skills/n8n-code-python/README.md",
          "type": "blob",
          "size": 9524
        },
        {
          "path": "skills/n8n-code-python/SKILL.md",
          "type": "blob",
          "size": 17971
        },
        {
          "path": "skills/n8n-code-python/STANDARD_LIBRARY.md",
          "type": "blob",
          "size": 18115
        },
        {
          "path": "skills/n8n-expression-syntax",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-expression-syntax/COMMON_MISTAKES.md",
          "type": "blob",
          "size": 8658
        },
        {
          "path": "skills/n8n-expression-syntax/EXAMPLES.md",
          "type": "blob",
          "size": 8303
        },
        {
          "path": "skills/n8n-expression-syntax/README.md",
          "type": "blob",
          "size": 2323
        },
        {
          "path": "skills/n8n-expression-syntax/SKILL.md",
          "type": "blob",
          "size": 9600
        },
        {
          "path": "skills/n8n-mcp-tools-expert",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-mcp-tools-expert/README.md",
          "type": "blob",
          "size": 2763
        },
        {
          "path": "skills/n8n-mcp-tools-expert/SEARCH_GUIDE.md",
          "type": "blob",
          "size": 5539
        },
        {
          "path": "skills/n8n-mcp-tools-expert/SKILL.md",
          "type": "blob",
          "size": 12754
        },
        {
          "path": "skills/n8n-mcp-tools-expert/VALIDATION_GUIDE.md",
          "type": "blob",
          "size": 8223
        },
        {
          "path": "skills/n8n-mcp-tools-expert/WORKFLOW_GUIDE.md",
          "type": "blob",
          "size": 8560
        },
        {
          "path": "skills/n8n-node-configuration",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-node-configuration/DEPENDENCIES.md",
          "type": "blob",
          "size": 14582
        },
        {
          "path": "skills/n8n-node-configuration/OPERATION_PATTERNS.md",
          "type": "blob",
          "size": 15358
        },
        {
          "path": "skills/n8n-node-configuration/README.md",
          "type": "blob",
          "size": 9800
        },
        {
          "path": "skills/n8n-node-configuration/SKILL.md",
          "type": "blob",
          "size": 17033
        },
        {
          "path": "skills/n8n-validation-expert",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-validation-expert/ERROR_CATALOG.md",
          "type": "blob",
          "size": 17237
        },
        {
          "path": "skills/n8n-validation-expert/FALSE_POSITIVES.md",
          "type": "blob",
          "size": 14753
        },
        {
          "path": "skills/n8n-validation-expert/README.md",
          "type": "blob",
          "size": 7956
        },
        {
          "path": "skills/n8n-validation-expert/SKILL.md",
          "type": "blob",
          "size": 14656
        },
        {
          "path": "skills/n8n-workflow-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-workflow-patterns/README.md",
          "type": "blob",
          "size": 7004
        },
        {
          "path": "skills/n8n-workflow-patterns/SKILL.md",
          "type": "blob",
          "size": 11484
        },
        {
          "path": "skills/n8n-workflow-patterns/ai_agent_workflow.md",
          "type": "blob",
          "size": 17512
        },
        {
          "path": "skills/n8n-workflow-patterns/database_operations.md",
          "type": "blob",
          "size": 16132
        },
        {
          "path": "skills/n8n-workflow-patterns/http_api_integration.md",
          "type": "blob",
          "size": 14672
        },
        {
          "path": "skills/n8n-workflow-patterns/scheduled_tasks.md",
          "type": "blob",
          "size": 15897
        },
        {
          "path": "skills/n8n-workflow-patterns/webhook_processing.md",
          "type": "blob",
          "size": 11789
        },
        {
          "path": "skills/remotion",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/remotion/SKILL.md",
          "type": "blob",
          "size": 3975
        },
        {
          "path": "skills/remotion/rules",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/remotion/rules/3d.md",
          "type": "blob",
          "size": 2290
        },
        {
          "path": "skills/remotion/rules/animations.md",
          "type": "blob",
          "size": 790
        },
        {
          "path": "skills/remotion/rules/assets.md",
          "type": "blob",
          "size": 1590
        },
        {
          "path": "skills/remotion/rules/audio.md",
          "type": "blob",
          "size": 3822
        },
        {
          "path": "skills/remotion/rules/calculate-metadata.md",
          "type": "blob",
          "size": 2920
        },
        {
          "path": "skills/remotion/rules/can-decode.md",
          "type": "blob",
          "size": 1587
        },
        {
          "path": "skills/remotion/rules/charts.md",
          "type": "blob",
          "size": 1751
        },
        {
          "path": "skills/remotion/rules/compositions.md",
          "type": "blob",
          "size": 3708
        },
        {
          "path": "skills/remotion/rules/display-captions.md",
          "type": "blob",
          "size": 3698
        },
        {
          "path": "skills/remotion/rules/extract-frames.md",
          "type": "blob",
          "size": 5496
        },
        {
          "path": "skills/remotion/rules/fonts.md",
          "type": "blob",
          "size": 3484
        },
        {
          "path": "skills/remotion/rules/get-audio-duration.md",
          "type": "blob",
          "size": 1354
        },
        {
          "path": "skills/remotion/rules/get-video-dimensions.md",
          "type": "blob",
          "size": 1627
        },
        {
          "path": "skills/remotion/rules/get-video-duration.md",
          "type": "blob",
          "size": 1341
        },
        {
          "path": "skills/remotion/rules/gifs.md",
          "type": "blob",
          "size": 3868
        },
        {
          "path": "skills/remotion/rules/images.md",
          "type": "blob",
          "size": 2783
        },
        {
          "path": "skills/remotion/rules/import-srt-captions.md",
          "type": "blob",
          "size": 2113
        },
        {
          "path": "skills/remotion/rules/lottie.md",
          "type": "blob",
          "size": 1779
        },
        {
          "path": "skills/remotion/rules/maps.md",
          "type": "blob",
          "size": 11371
        },
        {
          "path": "skills/remotion/rules/measuring-dom-nodes.md",
          "type": "blob",
          "size": 974
        },
        {
          "path": "skills/remotion/rules/measuring-text.md",
          "type": "blob",
          "size": 3000
        },
        {
          "path": "skills/remotion/rules/parameters.md",
          "type": "blob",
          "size": 2380
        },
        {
          "path": "skills/remotion/rules/sequencing.md",
          "type": "blob",
          "size": 2744
        },
        {
          "path": "skills/remotion/rules/tailwind.md",
          "type": "blob",
          "size": 422
        },
        {
          "path": "skills/remotion/rules/text-animations.md",
          "type": "blob",
          "size": 700
        },
        {
          "path": "skills/remotion/rules/timing.md",
          "type": "blob",
          "size": 3939
        },
        {
          "path": "skills/remotion/rules/transcribe-captions.md",
          "type": "blob",
          "size": 850
        },
        {
          "path": "skills/remotion/rules/transitions.md",
          "type": "blob",
          "size": 3730
        },
        {
          "path": "skills/remotion/rules/trimming.md",
          "type": "blob",
          "size": 1210
        },
        {
          "path": "skills/remotion/rules/videos.md",
          "type": "blob",
          "size": 3509
        },
        {
          "path": "skills/skill-creator",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-creator/SKILL.md",
          "type": "blob",
          "size": 17837
        },
        {
          "path": "skills/skill-creator/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-creator/references/output-patterns.md",
          "type": "blob",
          "size": 1813
        },
        {
          "path": "skills/skill-creator/references/workflows.md",
          "type": "blob",
          "size": 818
        },
        {
          "path": "skills/skill-evolution",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-evolution/SKILL.md",
          "type": "blob",
          "size": 9824
        },
        {
          "path": "skills/skill-factory",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-factory/SKILL.md",
          "type": "blob",
          "size": 5403
        },
        {
          "path": "skills/skill-lookup",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-lookup/SKILL.md",
          "type": "blob",
          "size": 2382
        },
        {
          "path": "skills/skill-manager",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-manager/SKILL.md",
          "type": "blob",
          "size": 9019
        },
        {
          "path": "skills/skill-writer",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/skill-writer/SKILL.md",
          "type": "blob",
          "size": 9602
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"claude-skills-plugin-marketplace\",\n  \"owner\": {\n    \"name\": \"Li Song\",\n    \"email\": \"echoleesong@example.com\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"claude-skills-plugin\",\n      \"source\": \"./\",\n      \"description\": \"A comprehensive and extensible Claude Code skills repository. Currently includes 7 n8n workflow development skills and 1 skill-creator meta skill, with plans to expand to other development domains\",\n      \"version\": \"1.0.0\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"claude-skills-plugin\",\n  \"version\": \"1.0.0\",\n  \"description\": \"A comprehensive and extensible Claude Code skills repository. Currently includes 7 n8n workflow development skills and 1 skill-creator meta skill, with plans to expand to other development domains\",\n  \"author\": {\n    \"name\": \"Li Song\",\n    \"email\": \"echoleesong@example.com\",\n    \"url\": \"https://github.com/echoleesong\"\n  },\n  \"homepage\": \"https://github.com/echoleesong/claude-skills-plugin\",\n  \"repository\": \"https://github.com/echoleesong/claude-skills-plugin\",\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"claude-code\",\n    \"skills\",\n    \"n8n\",\n    \"workflow\",\n    \"automation\",\n    \"javascript\",\n    \"python\",\n    \"mcp-tools\",\n    \"skill-creator\",\n    \"extensible\",\n    \"community\"\n  ]\n}\n",
        "Khazix-Skills-main/README.md": "# Khazix-Skills\n\nA collection of AI Skills for managing and evolving your skill library. These tools help you create, maintain, and continuously improve AI skills from GitHub repositories.\n\n## Skills Overview\n\n| Skill | Description |\n|-------|-------------|\n| [github-to-skills](./github-to-skills/) | Convert GitHub repos into AI skills automatically |\n| [skill-manager](./skill-manager/) | Manage skill lifecycle - check updates, list, delete |\n| [skill-evolution-manager](./skill-evolution-manager/) | Evolve skills based on user feedback and experience |\n\n---\n\n## github-to-skills\n\n**Automated factory for converting GitHub repositories into specialized AI skills.**\n\n### Features\n- Fetches repository metadata (README, latest commit hash)\n- Creates standardized skill directory structure\n- Generates `SKILL.md` with extended frontmatter for lifecycle management\n- Creates wrapper scripts for tool invocation\n\n### Usage\n```\n/github-to-skills <github_url>\n```\nOr: \"Package this repo into a skill: <url>\"\n\n### Example\n```\n/github-to-skills https://github.com/yt-dlp/yt-dlp\n```\n\n---\n\n## skill-manager\n\n**Lifecycle manager for GitHub-based skills.**\n\n### Features\n- **Audit**: Scan local skills folder for GitHub-based skills\n- **Check**: Compare local commit hashes against remote HEAD\n- **Report**: Generate status report (Stale/Current)\n- **Update**: Guided workflow for upgrading skills\n- **Inventory**: List all skills, delete unwanted ones\n\n### Usage\n```\n/skill-manager check     # Scan for updates\n/skill-manager list      # List all skills\n/skill-manager delete <name>  # Remove a skill\n```\n\n### Scripts\n| Script | Purpose |\n|--------|---------|\n| `scan_and_check.py` | Scan directories, parse frontmatter, check remote versions |\n| `update_helper.py` | Backup files before update |\n| `list_skills.py` | List installed skills with metadata |\n| `delete_skill.py` | Permanently remove a skill |\n\n---\n\n## skill-evolution-manager\n\n**Continuously improve skills based on user feedback and conversation insights.**\n\n### Core Concepts\n1. **Session Review**: Analyze skill performance after conversations\n2. **Experience Extraction**: Convert feedback into structured `evolution.json`\n3. **Smart Stitching**: Persist learned best practices into `SKILL.md`\n\n### Usage\n```\n/evolve\n```\nOr: \"Save this experience to the skill\"\n\n### Workflow\n1. **Review**: Agent analyzes what worked/didn't work\n2. **Extract**: Creates structured JSON with preferences, fixes, custom prompts\n3. **Persist**: Merges into `evolution.json`\n4. **Stitch**: Updates `SKILL.md` with learned best practices\n\n### Scripts\n| Script | Purpose |\n|--------|---------|\n| `merge_evolution.py` | Incrementally merge new experience data |\n| `smart_stitch.py` | Generate/update best practices section in SKILL.md |\n| `align_all.py` | Batch re-stitch all skills after updates |\n\n---\n\n## Installation\n\n1. Clone this repository:\n```bash\ngit clone https://github.com/KKKKhazix/Khazix-Skills.git\n```\n\n2. Copy desired skills to your Claude skills directory:\n```bash\n# Windows\ncopy /E Khazix-Skills\\github-to-skills %USERPROFILE%\\.claude\\skills\\\n\n# macOS/Linux\ncp -r Khazix-Skills/github-to-skills ~/.claude/skills/\n```\n\n3. Restart Claude to load the new skills.\n\n---\n\n## Requirements\n\n- Python 3.8+\n- Git (for checking remote repositories)\n- PyYAML (`pip install pyyaml`)\n\n---\n\n## How It Works\n\n```\n+------------------+     +----------------+     +------------------------+\n| github-to-skills | --> | skill-manager  | --> | skill-evolution-manager|\n+------------------+     +----------------+     +------------------------+\n        |                       |                         |\n    Create new             Maintain &                 Evolve &\n    skills from            update skills              improve based\n    GitHub repos                                      on feedback\n```\n\n**The Complete Skill Lifecycle:**\n1. **Create**: Use `github-to-skills` to wrap a GitHub repo as a skill\n2. **Maintain**: Use `skill-manager` to check for updates and upgrade\n3. **Evolve**: Use `skill-evolution-manager` to capture learnings and improve\n\n---\n\n## License\n\nMIT\n\n---\n\n## Contributing\n\nContributions are welcome! Feel free to:\n- Report issues\n- Submit pull requests\n- Share your own skills\n\n---\n\n## Author\n\n**KKKKhazix**\n\nIf you find these skills useful, consider giving this repo a star!\n",
        "Khazix-Skills-main/github-to-skills/SKILL.md": "---\nname: github-to-skills\ndescription: Automated factory for converting GitHub repositories into specialized AI skills. Use this skill when the user provides a GitHub URL and wants to \"package\", \"wrap\", or \"create a skill\" from it. It automatically fetches repository details, latest commit hashes, and generates a standardized skill structure with enhanced metadata suitable for lifecycle management.\nlicense: MIT\n---\n\n# GitHub to Skills Factory\n\nThis skill automates the conversion of GitHub repositories into fully functional AI skills.\n\n## Core Functionality\n\n1. **Analysis**: Fetches repository metadata (Description, README, Latest Commit Hash).\n2. **Scaffolding**: Creates a standardized skill directory structure.\n3. **Metadata Injection**: Generates `SKILL.md` with extended frontmatter (tracking source, version, hash) for future automated management.\n4. **Wrapper Generation**: Creates a `scripts/wrapper.py` (or similar) to interface with the tool.\n\n## Usage\n\n**Trigger**: `/GitHub-to-skills <github_url>` or \"Package this repo into a skill: <url>\"\n\n### Required Metadata Schema\n\nEvery skill created by this factory MUST include the following extended YAML frontmatter in its `SKILL.md`. This is critical for the `skill-manager` to function later.\n\n```yaml\n---\nname: <kebab-case-repo-name>\ndescription: <concise-description-for-agent-triggering>\n# EXTENDED METADATA (MANDATORY)\ngithub_url: <original-repo-url>\ngithub_hash: <latest-commit-hash-at-time-of-creation>\nversion: <tag-or-0.1.0>\ncreated_at: <ISO-8601-date>\nentry_point: scripts/wrapper.py # or main script\ndependencies: # List main dependencies if known, e.g., [\"yt-dlp\", \"ffmpeg\"]\n---\n```\n\n## Workflow\n\n1. **Fetch Info**: The agent first runs `scripts/fetch_github_info.py` to get the raw data from the repo.\n2. **Plan**: The agent analyzes the README to understand how to invoke the tool (CLI args, Python API, etc.).\n3. **Generate**: The agent uses the `skill-creator` patterns to write the `SKILL.md` and wrapper scripts, ensuring the **extended metadata** is present.\n4. **Verify**: Checks if the commit hash was correctly captured.\n\n## Resources\n\n- `scripts/fetch_github_info.py`: Utility to scrape/API fetch repo details (README, Hash, Tags).\n- `scripts/create_github_skill.py`: Orchestrator to scaffold the folder and write the initial files.\n\n## Best Practices for Generated Skills\n\n- **Isolation**: The generated skill should install its own dependencies (e.g., in a venv or via `uv`/`pip`) if possible, or clearly state them.\n- **Progressive Disclosure**: Do not dump the entire repo into the skill. Only include the necessary wrapper code and reference the original repo for deep dives.\n- **Idempotency**: The `github_hash` field allows the future `skill-manager` to check `if remote_hash != local_hash` to trigger updates.\n",
        "Khazix-Skills-main/skill-evolution-manager/SKILL.md": "---\nname: Skill Evolution Manager\ndescription: ä¸“é—¨ç”¨äºåœ¨å¯¹è¯ç»“æŸæ—¶ï¼Œæ ¹æ®ç”¨æˆ·åé¦ˆå’Œå¯¹è¯å†…å®¹æ€»ç»“ä¼˜åŒ–å¹¶è¿­ä»£ç°æœ‰ Skills çš„æ ¸å¿ƒå·¥å…·ã€‚å®ƒé€šè¿‡å¸å–å¯¹è¯ä¸­çš„â€œç²¾åâ€ï¼ˆå¦‚æˆåŠŸçš„è§£å†³æ–¹æ¡ˆã€å¤±è´¥çš„æ•™è®­ã€ç‰¹å®šçš„ä»£ç è§„èŒƒï¼‰æ¥æŒç»­æ¼”è¿› Skills åº“ã€‚\nlicense: MIT\n---\n\n# Skill Evolution Manager\n\nè¿™æ˜¯æ•´ä¸ª AI æŠ€èƒ½ç³»ç»Ÿçš„â€œè¿›åŒ–ä¸­æ¢â€ã€‚å®ƒä¸ä»…è´Ÿè´£ä¼˜åŒ–å•ä¸ª Skillï¼Œè¿˜è´Ÿè´£è·¨ Skill çš„ç»éªŒå¤ç›˜å’Œæ²‰æ·€ã€‚\n\n## æ ¸å¿ƒèŒè´£\n\n1.  **å¤ç›˜è¯Šæ–­ (Session Review)**ï¼šåœ¨å¯¹è¯ç»“æŸæ—¶ï¼Œåˆ†ææ‰€æœ‰è¢«è°ƒç”¨çš„ Skill çš„è¡¨ç°ã€‚\n2.  **ç»éªŒæå– (Experience Extraction)**ï¼šå°†éç»“æ„åŒ–çš„ç”¨æˆ·åé¦ˆè½¬åŒ–ä¸ºç»“æ„åŒ–çš„ JSON æ•°æ®ï¼ˆ`evolution.json`ï¼‰ã€‚\n3.  **æ™ºèƒ½ç¼åˆ (Smart Stitching)**ï¼šå°†æ²‰æ·€çš„ç»éªŒè‡ªåŠ¨å†™å…¥ `SKILL.md`ï¼Œç¡®ä¿æŒä¹…åŒ–ä¸”ä¸è¢«ç‰ˆæœ¬æ›´æ–°è¦†ç›–ã€‚\n\n## ä½¿ç”¨åœºæ™¯\n\n**Trigger**: \n- `/evolve`\n- \"å¤ç›˜ä¸€ä¸‹åˆšæ‰çš„å¯¹è¯\"\n- \"æˆ‘è§‰å¾—åˆšæ‰é‚£ä¸ªå·¥å…·ä¸å¤ªå¥½ç”¨ï¼Œè®°å½•ä¸€ä¸‹\"\n- \"æŠŠè¿™ä¸ªç»éªŒä¿å­˜åˆ° Skill é‡Œ\"\n\n## å·¥ä½œæµ (The Evolution Workflow)\n\n### 1. ç»éªŒå¤ç›˜ (Review & Extract)\nå½“ç”¨æˆ·è§¦å‘å¤ç›˜æ—¶ï¼ŒAgent å¿…é¡»æ‰§è¡Œï¼š\n1.  **æ‰«æä¸Šä¸‹æ–‡**ï¼šæ‰¾å‡ºç”¨æˆ·ä¸æ»¡æ„çš„ç‚¹ï¼ˆæŠ¥é”™ã€é£æ ¼ä¸å¯¹ã€å‚æ•°é”™è¯¯ï¼‰æˆ–æ»¡æ„çš„ç‚¹ï¼ˆç‰¹å®š Prompt æ•ˆæœå¥½ï¼‰ã€‚\n2.  **å®šä½ Skill**ï¼šç¡®å®šæ˜¯å“ªä¸ª Skill éœ€è¦è¿›åŒ–ï¼ˆä¾‹å¦‚ `yt-dlp` æˆ– `baoyu-comic`ï¼‰ã€‚\n3.  **ç”Ÿæˆ JSON**ï¼šåœ¨å†…å­˜ä¸­æ„å»ºå¦‚ä¸‹ JSON ç»“æ„ï¼š\n    ```json\n    {\n      \"preferences\": [\"ç”¨æˆ·å¸Œæœ›ä¸‹è½½é»˜è®¤é™éŸ³\"],\n      \"fixes\": [\"Windows ä¸‹ ffmpeg è·¯å¾„éœ€è½¬ä¹‰\"],\n      \"custom_prompts\": \"åœ¨æ‰§è¡Œå‰æ€»æ˜¯å…ˆæ‰“å°é¢„ä¼°è€—æ—¶\"\n    }\n    ```\n\n### 2. ç»éªŒæŒä¹…åŒ– (Persist)\nAgent è°ƒç”¨ `scripts/merge_evolution.py`ï¼Œå°†ä¸Šè¿° JSON å¢é‡å†™å…¥ç›®æ ‡ Skill çš„ `evolution.json` æ–‡ä»¶ä¸­ã€‚\n- **å‘½ä»¤**: `python scripts/merge_evolution.py <skill_path> <json_string>`\n\n### 3. æ–‡æ¡£ç¼åˆ (Stitch)\nAgent è°ƒç”¨ `scripts/smart_stitch.py`ï¼Œå°† `evolution.json` çš„å†…å®¹è½¬åŒ–ä¸º Markdown å¹¶è¿½åŠ åˆ° `SKILL.md` æœ«å°¾ã€‚\n- **å‘½ä»¤**: `python scripts/smart_stitch.py <skill_path>`\n\n### 4. è·¨ç‰ˆæœ¬å¯¹é½ (Align)\nå½“ `skill-manager` æ›´æ–°äº†æŸä¸ª Skill åï¼ŒAgent åº”ä¸»åŠ¨è¿è¡Œ `smart_stitch.py`ï¼Œå°†ä¹‹å‰ä¿å­˜çš„ç»éªŒâ€œé‡æ–°ç¼åˆâ€åˆ°æ–°ç‰ˆæ–‡æ¡£ä¸­ã€‚\n\n## æ ¸å¿ƒè„šæœ¬\n\n- `scripts/merge_evolution.py`: **å¢é‡åˆå¹¶å·¥å…·**ã€‚è´Ÿè´£è¯»å–æ—§ JSONï¼Œå»é‡åˆå¹¶æ–° Listï¼Œä¿å­˜ã€‚\n- `scripts/smart_stitch.py`: **æ–‡æ¡£ç”Ÿæˆå·¥å…·**ã€‚è´Ÿè´£è¯»å– JSONï¼Œåœ¨ `SKILL.md` æœ«å°¾ç”Ÿæˆæˆ–æ›´æ–° `## User-Learned Best Practices & Constraints` ç« èŠ‚ã€‚\n- `scripts/align_all.py`: **å…¨é‡å¯¹é½å·¥å…·**ã€‚ä¸€é”®éå†æ‰€æœ‰ Skill æ–‡ä»¶å¤¹ï¼Œå°†å­˜åœ¨çš„ `evolution.json` ç»éªŒé‡æ–°ç¼åˆå›å¯¹åº”çš„ `SKILL.md`ã€‚å¸¸ç”¨äº `skill-manager` æ‰¹é‡æ›´æ–°åçš„ç»éªŒè¿˜åŸã€‚\n\n## æœ€ä½³å®è·µ\n\n- **ä¸è¦ç›´æ¥ä¿®æ”¹ SKILL.md çš„æ­£æ–‡**ï¼šé™¤éæ˜¯æ˜æ˜¾çš„æ‹¼å†™é”™è¯¯ã€‚æ‰€æœ‰çš„ç»éªŒä¿®æ­£åº”é€šè¿‡ `evolution.json` é€šé“è¿›è¡Œï¼Œè¿™æ ·å¯ä»¥ä¿è¯åœ¨ Skill å‡çº§æ—¶ç»éªŒä¸ä¸¢å¤±ã€‚\n- **å¤š Skill ååŒ**ï¼šå¦‚æœä¸€æ¬¡å¯¹è¯æ¶‰åŠå¤šä¸ª Skillï¼Œè¯·ä¾æ¬¡ä¸ºæ¯ä¸ª Skill æ‰§è¡Œä¸Šè¿°æµç¨‹ã€‚\n",
        "Khazix-Skills-main/skill-manager/SKILL.md": "---\nname: skill-manager\ndescription: Lifecycle manager for GitHub-based skills. Use this to batch scan your skills directory, check for updates on GitHub, and perform guided upgrades of your skill wrappers.\nlicense: MIT\n---\n\n# Skill Lifecycle Manager\n\nThis skill helps you maintain your library of GitHub-wrapped skills by automating the detection of updates and assisting in the refactoring process.\n\n## Core Capabilities\n\n1.  **Audit**: Scans your local skills folder for skills with `github_url` metadata.\n2.  **Check**: Queries GitHub (via `git ls-remote`) to compare local commit hashes against the latest remote HEAD.\n3.  **Report**: Generates a status report identifying which skills are \"Stale\" or \"Current\".\n4.  **Update Workflow**: Provides a structured process for the Agent to upgrade a skill.\n5.  **Inventory Management**: Lists all local skills and provides deletion capabilities.\n\n## Usage\n\n**Trigger**: `/skill-manager check` or \"Scan my skills for updates\"\n**Trigger**: `/skill-manager list` or \"List my skills\"\n**Trigger**: `/skill-manager delete <skill_name>` or \"Delete skill <skill_name>\"\n\n### Workflow 1: Check for Updates\n\n1.  **Run Scanner**: The agent runs `scripts/scan_and_check.py` to analyze all skills.\n2.  **Review Report**: The script outputs a JSON summary. The Agent presents this to the user.\n    *   Example: \"Found 3 outdated skills: `yt-dlp` (behind 50 commits), `ffmpeg-tool` (behind 2 commits)...\"\n\n### Workflow 2: Update a Skill\n\n**Trigger**: \"Update [Skill Name]\" (after a check)\n\n1.  **Fetch New Context**: The agent fetches the *new* README from the remote repo.\n2.  **Diff Analysis**:\n    *   The agent compares the new README with the old `SKILL.md`.\n    *   Identifies new features, deprecated flags, or usage changes.\n3.  **Refactor**:\n    *   The agent rewrites `SKILL.md` to reflect the new capabilities.\n    *   The agent updates the `github_hash` in the frontmatter.\n    *   The agent (optionally) attempts to update the `wrapper.py` if CLI args have changed.\n4.  **Verify**: Runs a quick validation (if available).\n\n## Scripts\n\n- `scripts/scan_and_check.py`: The workhorse. Scans directories, parses Frontmatter, fetches remote tags, returns status.\n- `scripts/update_helper.py`: (Optional) Helper to backup files before update.\n- `scripts/list_skills.py`: Lists all installed skills with type and version.\n- `scripts/delete_skill.py`: Permanently removes a skill folder.\n\n## Metadata Requirements\n\nThis manager relies on the `github-to-skills` metadata standard:\n- `github_url`: Source of truth.\n- `github_hash`: State of truth.\n",
        "README.md": "# Claude Skills Plugin\n\n[English](README.md) | [ç®€ä½“ä¸­æ–‡](README_CN.md) | [Quick Start](QUICKSTART.md)\n\nA comprehensive and extensible Claude Code plugin providing expert-level skills for various development tasks and workflows. Currently focused on n8n workflow development, automation, and integration, with plans to expand to other domains.\n\n> **ğŸš€ Quick Install (Recommended)**: Clone skills directly to `~/.claude/skills/` for **highest priority**\n\n## ğŸ“¦ What's Included\n\nThis plugin currently contains **14 specialized skills**, covering n8n workflow development and **Skill lifecycle management**:\n\n### Skill Lifecycle Management (3 skills) - **NEW**\n\n11. **skill-factory** - Automated Skill Factory\n    - Convert any GitHub repository into a standardized Skill with one command\n    - Automatically fetch repository metadata (commit hash, README)\n    - Generate compliant directory structure with extended metadata\n\n12. **skill-manager** - Skill Lifecycle Manager\n    - Concurrently check update status for all Skills\n    - Support batch scan, update, and delete operations\n    - Generate status reports (outdated/current/unmanaged)\n\n13. **skill-evolution** - Skill Evolution Manager\n    - Persist lessons learned from conversations to `evolution.json`\n    - Smart stitching: automatically write experience to SKILL.md\n    - Cross-version preservation: experience survives Skill updates\n\n### n8n Development Skills (7 skills)\n\n1. **n8n-workflow-patterns** - Proven architectural patterns for building n8n workflows\n   - 5 core patterns: Webhook Processing, HTTP API Integration, Database Operations, AI Agent Workflows, Scheduled Tasks\n   - Pattern selection guide and workflow creation checklist\n   - Real-world examples and best practices\n\n2. **n8n-code-javascript** - Expert guidance for JavaScript Code nodes\n   - Data access patterns ($input.all(), $input.first(), $input.item)\n   - Built-in functions ($helpers, DateTime, $jmespath)\n   - Common patterns and error prevention\n\n3. **n8n-code-python** - Python Code node development\n   - Python-specific patterns and best practices\n   - Data manipulation and transformation\n   - Integration with Python libraries\n\n4. **n8n-expression-syntax** - Master n8n's expression language\n   - Expression syntax and data referencing\n   - Built-in functions and methods\n   - Common patterns and troubleshooting\n\n5. **n8n-node-configuration** - Configure nodes correctly\n   - Node-specific configuration patterns\n   - Operation dependencies and requirements\n   - Authentication and credentials setup\n\n6. **n8n-validation-expert** - Validate workflows before deployment\n   - Workflow structure validation\n   - Node configuration validation\n   - Error detection and auto-fix suggestions\n\n7. **n8n-mcp-tools-expert** - Use n8n MCP tools effectively\n   - Search nodes and templates\n   - Create and update workflows via API\n   - Validate node operations\n\n### General Development Skills (4 skills)\n\n8. **skill-creator** - Guide for creating effective Claude Code skills\n   - Skill design principles and best practices\n   - Progressive disclosure patterns\n   - Bundled resources (scripts, references, assets)\n\n9. **md-to-pptx** - Convert Markdown to PowerPoint presentations\n   - Convert existing Markdown files to PPTX\n   - Generate presentations from scratch with AI assistance\n   - Multiple themes (business, tech_dark, education, neumorphism)\n   - Custom template support\n\n10. **skill-lookup** - Skill discovery and installation tool\n    - Search and discover available Skills\n    - Install and manage Skills\n\n14. **More skills coming soon** - This plugin is designed to be extensible\n   - Future skills may cover: API development, testing, DevOps, data processing, etc.\n   - Community contributions welcome\n\n## ğŸ¯ Plugin Philosophy\n\nThis plugin is designed as a **general-purpose skills repository** that can accommodate skills from any domain:\n\n- **Currently**: Primarily n8n workflow development skills (7 skills)\n- **Future**: Will expand to include skills for other development areas\n- **Extensible**: Easy to add new skills following the skill-creator guidelines\n- **Community-driven**: Open to contributions from the community\n\n## ğŸš€ Installation\n\n### Understanding Skills Priority\n\nClaude Code Skills are loaded with different priorities (highest to lowest):\n\n| Priority | Level | Location | Scope |\n|:--------:|:------|:---------|:------|\n| **1** (Highest) | Enterprise | Managed settings | Organization-wide |\n| **2** | Personal | `~/.claude/skills/` | All your projects |\n| **3** | Project | `.claude/skills/` | Current project |\n| **4** (Lowest) | Plugin | Plugin `skills/` directory | Plugin users |\n\n**We recommend Method 1** for the best experience, as it gives your Skills the highest non-enterprise priority.\n\n---\n\n### â­ Method 1: Personal Skills Directory (Recommended)\n\nInstall directly to your personal skills folder for **highest priority**:\n\n#### macOS / Linux\n\n```bash\n# Clone to personal skills repository directory\ngit clone https://github.com/echoleesong/claude-skills-plugin.git ~/.claude/skills-repo\n\n# Run automatic install script (creates symlinks)\ncd ~/.claude/skills-repo && ./install.sh\n```\n\n#### Windows (PowerShell, requires Administrator)\n\n```powershell\n# Clone to personal skills repository directory\ngit clone https://github.com/echoleesong/claude-skills-plugin.git \"$env:USERPROFILE\\.claude\\skills-repo\"\n\n# Run automatic install script (requires Administrator for symlinks)\ncd \"$env:USERPROFILE\\.claude\\skills-repo\"\n.\\install.ps1\n```\n\n#### Update Skills\n\n```bash\n# macOS / Linux\ncd ~/.claude/skills-repo && git pull && ./install.sh\n\n# Windows (PowerShell)\ncd \"$env:USERPROFILE\\.claude\\skills-repo\"; git pull; .\\install.ps1\n```\n\n#### ğŸ”„ Setup Auto-Sync (Optional)\n\nAutomatically sync new skills after `git pull`:\n\n```bash\n# macOS / Linux\ncd ~/.claude/skills-repo && ./setup-hooks.sh\n\n# After setup, git pull will automatically run install.sh\n```\n\nâœ… **Advantages**: Highest priority (Personal level), takes precedence over all plugins, easy to update with `git pull`, supports auto-sync.\n\n<details>\n<summary>ğŸ“Œ Manual Installation (without scripts)</summary>\n\nIf you prefer not to use the install scripts, you can manually create symlinks:\n\n**macOS / Linux:**\n```bash\nmkdir -p ~/.claude/skills && \\\nln -sf ~/.claude/skills-repo/skills/* ~/.claude/skills/\n```\n\n**Windows (PowerShell):**\n```powershell\nNew-Item -ItemType Directory -Force -Path \"$env:USERPROFILE\\.claude\\skills\"\nGet-ChildItem \"$env:USERPROFILE\\.claude\\skills-repo\\skills\" -Directory | ForEach-Object {\n    New-Item -ItemType SymbolicLink -Force -Path \"$env:USERPROFILE\\.claude\\skills\\$($_.Name)\" -Target $_.FullName\n}\n```\n\n</details>\n\n---\n\n### Method 2: Plugin Marketplace (Standard)\n\nInstall as a plugin via Claude Code marketplace:\n\n```bash\n# Add the marketplace\n/plugin marketplace add echoleesong/claude-skills-plugin\n\n# Install the plugin\n/plugin install claude-skills-plugin@echoleesong-claude-skills-plugin\n```\n\nâš ï¸ **Note**: Plugin Skills have the **lowest priority**. If you need higher priority, use Method 1 or upgrade after installation:\n\n<details>\n<summary>ğŸ“Œ Upgrade Plugin to Personal Priority</summary>\n\n```bash\n# macOS / Linux: Link plugin skills to personal directory\nmkdir -p ~/.claude/skills && \\\nln -sf ~/.claude/plugins/cache/claude-skills-plugin-marketplace/claude-skills-plugin/*/skills/* ~/.claude/skills/\n```\n\n```powershell\n# Windows (PowerShell)\nNew-Item -ItemType Directory -Force -Path \"$env:USERPROFILE\\.claude\\skills\"\n$pluginPath = Get-ChildItem \"$env:USERPROFILE\\.claude\\plugins\\cache\\claude-skills-plugin-marketplace\\claude-skills-plugin\\*\\skills\" | Select-Object -First 1\nGet-ChildItem $pluginPath -Directory | ForEach-Object {\n    New-Item -ItemType SymbolicLink -Force -Path \"$env:USERPROFILE\\.claude\\skills\\$($_.Name)\" -Target $_.FullName\n}\n```\n\n</details>\n\n---\n\n### Method 3: Project-Level Installation\n\nInstall for a specific project only:\n\n```bash\n# In your project directory\ngit clone https://github.com/echoleesong/claude-skills-plugin.git .claude/skills-repo\n\n# Link skills to project directory\nmkdir -p .claude/skills && \\\nln -sf .claude/skills-repo/skills/* .claude/skills/\n```\n\nâœ… **Use case**: When you only need these skills for a specific project.\n\n---\n\n### Verify Installation\n\nRestart Claude Code and ask: \"What Skills are available?\"\n\nYou should see this plugin's Skills listed. If you used Method 1, they will have Personal-level priority.\n\n## ğŸ“– Usage\n\nOnce installed, the skills will automatically activate when relevant tasks are detected.\n\n### Current Skills Activation\n\n**Skill Lifecycle Management:**\n- **Create Skill from GitHub**: `/skill-factory <url>` or \"Package this repo into a skill\"\n- **Check updates**: `/skill-manager check` or \"Check my Skills for updates\"\n- **List Skills**: `/skill-manager list` or \"List my Skills\"\n- **Record experience**: `/skill-evolution` or \"Review the conversation and save lessons\"\n\n**n8n Development:**\n- **Building workflows**: `n8n-workflow-patterns` activates\n- **Writing JavaScript code**: `n8n-code-javascript` activates\n- **Writing Python code**: `n8n-code-python` activates\n- **Using expressions**: `n8n-expression-syntax` activates\n- **Configuring nodes**: `n8n-node-configuration` activates\n- **Validating workflows**: `n8n-validation-expert` activates\n- **Using MCP tools**: `n8n-mcp-tools-expert` activates\n\n**General Development:**\n- **Creating skills**: `skill-creator` activates\n- **Creating presentations**: `md-to-pptx` activates\n\n### Example Prompts\n\n**Skill Lifecycle Management:**\n```\n\"Package https://github.com/yt-dlp/yt-dlp into a Skill\"\nâ†’ Activates: skill-factory\n\n\"Check my Skills for updates\"\nâ†’ Activates: skill-manager\n\n\"Save the lessons from this conversation\"\nâ†’ Activates: skill-evolution\n```\n\n**n8n Development:**\n```\n\"Help me build a webhook workflow that processes form submissions\"\nâ†’ Activates: n8n-workflow-patterns, n8n-node-configuration\n\n\"Write JavaScript code to aggregate data from multiple API responses\"\nâ†’ Activates: n8n-code-javascript\n\n\"Validate my workflow before deployment\"\nâ†’ Activates: n8n-validation-expert\n```\n\n**General Development:**\n```\n\"Create a new skill for PDF processing\"\nâ†’ Activates: skill-creator\n\n\"Help me design a skill for API testing\"\nâ†’ Activates: skill-creator\n\n\"Help me create a presentation about machine learning\"\nâ†’ Activates: md-to-pptx\n\n\"Convert this markdown file to PowerPoint\"\nâ†’ Activates: md-to-pptx\n```\n\n## ğŸ¯ Skill Descriptions\n\n### Skill Lifecycle Management Skills\n\n#### skill-factory\nAutomated factory for converting GitHub repositories into standardized AI skills. Use when user provides a GitHub URL and wants to \"package\", \"wrap\", or \"create a skill\" from it. Automatically fetches repository metadata, generates standard directory structure, and injects extended metadata for lifecycle management.\n\n#### skill-manager\nSkill lifecycle manager for batch scanning Skills directory, checking GitHub updates, performing version upgrades, and managing Skills inventory. Supports `/skill-manager check`, `/skill-manager list`, `/skill-manager delete` commands.\n\n#### skill-evolution\nSkill experience evolution manager. Analyzes user feedback at the end of conversations, extracts best practices and solutions, persists to `evolution.json` and stitches to SKILL.md. Use when user says \"review\", \"record experience\", \"save this tip\".\n\n### n8n Development Skills\n\n#### n8n-workflow-patterns\nProven workflow architectural patterns from real n8n workflows. Use when building new workflows, designing workflow structure, choosing workflow patterns, planning workflow architecture, or asking about webhook processing, HTTP API integration, database operations, AI agent workflows, or scheduled tasks.\n\n### n8n-code-javascript\nWrite JavaScript code in n8n Code nodes. Use when writing JavaScript in n8n, using $input/$json/$node syntax, making HTTP requests with $helpers, working with dates using DateTime, troubleshooting Code node errors, or choosing between Code node modes.\n\n### n8n-code-python\nWrite Python code in n8n Code nodes. Use when writing Python in n8n, using item access patterns, working with pandas/numpy, making HTTP requests, handling data transformations, or troubleshooting Python Code node errors.\n\n### n8n-expression-syntax\nMaster n8n's expression language for data transformation and manipulation. Use when writing expressions in n8n nodes, accessing data from previous nodes, using built-in functions, formatting dates/strings, or troubleshooting expression errors.\n\n### n8n-node-configuration\nConfigure n8n nodes correctly with proper operations and parameters. Use when configuring specific node operations, understanding node requirements, setting up authentication, or troubleshooting node configuration errors.\n\n### n8n-validation-expert\nValidate n8n workflows and node configurations before deployment. Use when validating workflow structure, checking node configurations, detecting errors, or getting auto-fix suggestions for common issues.\n\n### n8n-mcp-tools-expert\nExpert guidance for using n8n MCP (Model Context Protocol) tools. Use when searching for nodes, getting node documentation, creating workflows via API, validating operations, or working with n8n programmatically.\n\n### General Development Skills\n\n#### skill-creator\nGuide for creating effective Claude Code skills. Use when creating new skills, updating existing skills, designing skill structure, writing skill documentation, or learning skill best practices.\n\n#### md-to-pptx\nConvert Markdown documents to PowerPoint presentations or generate presentations from scratch using AI. Use when users want to create PPT/PPTX files, convert MD to slides, generate presentations, make slideshows, or ask for help with PowerPoint creation. Supports custom templates, multiple themes (business, tech_dark, education, neumorphism), and intelligent content layout.\n\n## ğŸ“ Plugin Structure\n\n```\nclaude-skills-plugin/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â”œâ”€â”€ plugin.json          # Plugin metadata\nâ”‚   â””â”€â”€ marketplace.json     # Marketplace configuration\nâ”œâ”€â”€ skills/\nâ”‚   â”œâ”€â”€ skill-factory/       # Skill Factory (NEW)\nâ”‚   â”œâ”€â”€ skill-manager/       # Skill Manager (NEW)\nâ”‚   â”œâ”€â”€ skill-evolution/     # Skill Evolution (NEW)\nâ”‚   â”œâ”€â”€ n8n-workflow-patterns/\nâ”‚   â”œâ”€â”€ n8n-code-javascript/\nâ”‚   â”œâ”€â”€ n8n-code-python/\nâ”‚   â”œâ”€â”€ n8n-expression-syntax/\nâ”‚   â”œâ”€â”€ n8n-node-configuration/\nâ”‚   â”œâ”€â”€ n8n-validation-expert/\nâ”‚   â”œâ”€â”€ n8n-mcp-tools-expert/\nâ”‚   â”œâ”€â”€ skill-creator/\nâ”‚   â”œâ”€â”€ skill-lookup/\nâ”‚   â””â”€â”€ md-to-pptx/\nâ”œâ”€â”€ scripts/                 # Standalone executable scripts (NEW)\nâ”‚   â”œâ”€â”€ check_updates.py     # Batch check updates\nâ”‚   â”œâ”€â”€ batch_evolve.py      # Batch align evolution\nâ”‚   â””â”€â”€ validate_all.py      # Batch validate metadata\nâ”œâ”€â”€ docs/                    # Documentation\nâ”‚   â”œâ”€â”€ skill-lifecycle-development-plan.md\nâ”‚   â””â”€â”€ references/\nâ”‚       â””â”€â”€ metadata-spec.md # Metadata specification\nâ”œâ”€â”€ LICENSE\nâ”œâ”€â”€ README.md\nâ””â”€â”€ CHANGELOG.md\n```\n\n## ğŸ”§ Command Line Tools\n\nThis plugin provides standalone Python scripts for CI/CD and batch operations:\n\n```bash\n# Check update status for all Skills\npython scripts/check_updates.py --summary\n\n# Batch validate Skills metadata\npython scripts/validate_all.py --strict\n\n# Batch align evolution.json\npython scripts/batch_evolve.py --dry-run\n```\n\n## ğŸ¤ Contributing\n\nContributions are welcome! This plugin is designed to be a community-driven skills repository.\n\n### How to Contribute\n\n1. **Add new skills**: Use the `skill-creator` skill to design and implement new skills\n2. **Improve existing skills**: Submit PRs to enhance current skills\n3. **Report issues**: Help us identify bugs or areas for improvement\n4. **Suggest new skill domains**: Propose new areas where skills would be valuable\n\n### Skill Domains We're Interested In\n\n- API development and testing\n- DevOps and CI/CD\n- Data processing and analysis\n- Frontend/Backend frameworks\n- Testing frameworks\n- Documentation generation\n- And more!\n\nPlease feel free to submit issues or pull requests.\n\n## ğŸ“„ License\n\nMIT License - see LICENSE file for details\n\n## ğŸ”— Links\n\n- **Repository**: https://github.com/echoleesong/claude-skills-plugin\n- **Issues**: https://github.com/echoleesong/claude-skills-plugin/issues\n- **n8n Documentation**: https://docs.n8n.io\n\n## ğŸ“ Changelog\n\nSee [CHANGELOG.md](CHANGELOG.md) for version history and updates.\n\n## ğŸ™ Acknowledgments\n\n- n8n skills are built based on real-world workflow development experience and best practices from the n8n community\n- skill-creator is inspired by Claude Code's official skill development guidelines\n- Thanks to all contributors and the Claude Code community\n\n---\n\n**Made with â¤ï¸ for the Claude Code community**\n",
        "skills/chinese-novelist/SKILL.md": "---\nname: chinese-novelist\ndescription: |\n  åˆ†ç« èŠ‚åˆ›ä½œå¼•äººå…¥èƒœçš„ä¸­æ–‡å°è¯´ã€‚æ”¯æŒå„ç§é¢˜æï¼ˆæ‚¬ç–‘/è¨€æƒ…/å¥‡å¹»/ç§‘å¹»/å†å²ç­‰ï¼‰ï¼Œæ”¯æŒ10-50ç« é•¿ç¯‡åˆ›ä½œï¼Œæ¯ç« 3000-5000å­—ï¼Œç»“å°¾è®¾ç½®æ‚¬å¿µé’©å­ã€‚å¼ºè°ƒæ·±åº¦æ¶¦è‰²å»é™¤AIç—•è¿¹ï¼Œç¡®ä¿æ–‡å­—è‡ªç„¶æµç•…ã€‚\n  å½“ç”¨æˆ·è¦æ±‚ï¼šå†™å°è¯´ã€åˆ›ä½œæ•…äº‹ã€åˆ†ç« èŠ‚å†™ä½œã€è¿ç»­å‰§æƒ…ã€ç« èŠ‚æ‚¬å¿µã€é•¿ç¯‡å°è¯´æ—¶ä½¿ç”¨ã€‚\n---\n\n# Chinese Novelist: ä¸­æ–‡å°è¯´åˆ›ä½œåŠ©æ‰‹\n\n## æ ¸å¿ƒæµç¨‹\n\n### ç¬¬ä¸€é˜¶æ®µï¼š5é—®ç¡®è®¤\n\n**ä½¿ç”¨ AskUserQuestion å·¥å…·é€ä¸€è¯¢é—®ç”¨æˆ·ï¼Œæ¯ä¸ªé—®é¢˜æä¾›é€‰é¡¹ä¾›ç”¨æˆ·é€‰æ‹©ã€‚**\n\n---\n\n**é—®é¢˜1ï¼šé¢˜æä¸é£æ ¼**\n\n```\nQuestion: ä½ æƒ³è¦åˆ›ä½œä»€ä¹ˆé¢˜æçš„å°è¯´ï¼Ÿ\nOptions:\n- æ‚¬ç–‘æ¨ç†ï¼ˆä¾¦æ¢ã€ç ´æ¡ˆã€è§£è°œï¼‰\n- ç°ä»£è¨€æƒ…ï¼ˆéƒ½å¸‚ã€èŒåœºã€æ‹çˆ±ï¼‰\n- å¤ä»£è¨€æƒ…ï¼ˆå®«å»·ã€æ±Ÿæ¹–ã€ç©¿è¶Šï¼‰\n- å¥‡å¹»ç„å¹»ï¼ˆé­”æ³•ã€å¼‚ä¸–ç•Œã€ä¿®çœŸï¼‰\n- ç§‘å¹»æœªæ¥ï¼ˆç§‘æŠ€ã€å¤ªç©ºã€æœ«ä¸–ï¼‰\n- æ­¦ä¾ ä»™ä¾ ï¼ˆæ±Ÿæ¹–ã€é—¨æ´¾ã€é£å‡ï¼‰\n- å†å²æ¶ç©ºï¼ˆæœå ‚ã€æˆ˜äº‰ã€æƒè°‹ï¼‰\n- éƒ½å¸‚ç°å®ï¼ˆç”Ÿæ´»ã€æˆé•¿ã€ç¤¾ä¼šï¼‰\n```\n\nç”¨æˆ·é€‰æ‹©åè®°å½•ï¼š`é¢˜æ = [ç”¨æˆ·é€‰æ‹©]`\n\n---\n\n**é—®é¢˜2ï¼šä¸»è§’è®¾å®š**\n\n```\nQuestion: ä¸»è§’æ˜¯ä»€ä¹ˆè®¾å®šï¼Ÿ\nOptions:\n- ç”·æ€§ä¸»è§’ï¼ˆç‹¬è§’æˆï¼‰\n- å¥³æ€§ä¸»è§’ï¼ˆç‹¬è§’æˆï¼‰\n- åŒä¸»è§’ï¼ˆç”·å¥³åŒçº¿ï¼‰\n- ç¾¤åƒæˆï¼ˆå¤šçº¿å™äº‹ï¼‰\n```\n\nç”¨æˆ·é€‰æ‹©åï¼Œå¦‚éœ€è¿›ä¸€æ­¥è¯¢é—®èŒä¸š/èº«ä»½ï¼Œç»§ç»­è¿½é—®ã€‚\n\nè®°å½•ï¼š`ä¸»è§’ = [ç”¨æˆ·é€‰æ‹©]` + `èŒä¸š/èº«ä»½ = [ç”¨æˆ·å›ç­”]`\n\n---\n\n**é—®é¢˜3ï¼šä¸»è§’æ€§æ ¼**\n\n```\nQuestion: ä¸»è§’çš„æ ¸å¿ƒæ€§æ ¼æ˜¯ï¼Ÿ\nOptions:\n- çƒ­è¡€æ­£ä¹‰ï¼ˆç§¯æã€å‹‡æ•¢ã€æœ‰æ‹…å½“ï¼‰\n- å†·é™æ™ºæ…§ï¼ˆç†æ€§ã€è°‹ç•¥ã€é«˜æ™ºå•†ï¼‰\n- æ¸©æš–æ²»æ„ˆï¼ˆå–„è‰¯ã€æ¸©æŸ”ã€æœ‰åŒç†å¿ƒï¼‰\n- é«˜å†·å­¤å‚²ï¼ˆå†·æ¼ ã€ç‹¬ç«‹ã€å¼ºå¤§ï¼‰\n- é˜´æš—è…¹é»‘ï¼ˆå¿ƒæœºã€ç®—è®¡ã€å¤ä»‡ï¼‰\n- æˆé•¿é€†è¢­ï¼ˆä»å¼±åˆ°å¼ºã€æ‰“è„¸å‡çº§ï¼‰\n```\n\nè®°å½•ï¼š`æ€§æ ¼ = [ç”¨æˆ·é€‰æ‹©]`\n\n---\n\n**é—®é¢˜4ï¼šæ ¸å¿ƒå†²çª**\n\n```\nQuestion: å°è¯´çš„æ ¸å¿ƒå†²çªæ˜¯ä»€ä¹ˆï¼Ÿ\nOptions:\n- ç”Ÿæ­»å­˜äº¡ï¼ˆç”Ÿå­˜å±æœºã€é€ƒå‡ºç”Ÿå¤©ï¼‰\n- æŸ¥æ˜çœŸç›¸ï¼ˆå¯»æ‰¾ç­”æ¡ˆã€æ­éœ²ç§˜å¯†ï¼‰\n- çˆ±æƒ…é˜»ç¢ï¼ˆè¿½æ±‚çœŸçˆ±ã€å…‹æœé˜»ç¢ï¼‰\n- å¤ä»‡é›ªæ¨ï¼ˆå¤ä»‡è®¡åˆ’ã€ä¼¸å¼ æ­£ä¹‰ï¼‰\n- æƒåŠ›äº‰å¤ºï¼ˆç«äº‰ä¸Šä½ã€èµ„æºäº‰å¤ºï¼‰\n- æˆé•¿çªç ´ï¼ˆè‡ªæˆ‘çªç ´ã€å®ç°ä»·å€¼ï¼‰\n- å®ˆæŠ¤ä¿æŠ¤ï¼ˆå®ˆæŠ¤é‡è¦çš„äººæˆ–äº‹ï¼‰\n```\n\nè®°å½•ï¼š`æ ¸å¿ƒå†²çª = [ç”¨æˆ·é€‰æ‹©]`\n\n---\n\n**é—®é¢˜5ï¼šç« èŠ‚æ•°é‡**\n\n```\nQuestion: ä½ è®¡åˆ’åˆ›ä½œå¤šå°‘ç« ï¼Ÿ\nOptions:\n- 10ç« ï¼ˆçŸ­ç¯‡ï¼Œçº¦3-5ä¸‡å­—ï¼‰\n- 15ç« ï¼ˆä¸­çŸ­ç¯‡ï¼Œçº¦4.5-7.5ä¸‡å­—ï¼‰\n- 20ç« ï¼ˆä¸­ç¯‡ï¼Œçº¦6-10ä¸‡å­—ï¼‰\n- 30ç« ï¼ˆä¸­é•¿ç¯‡ï¼Œçº¦9-15ä¸‡å­—ï¼‰\n- 50ç« ï¼ˆé•¿ç¯‡ï¼Œçº¦15-25ä¸‡å­—ï¼‰\n- è‡ªå®šä¹‰ï¼ˆè¾“å…¥å…·ä½“ç« èŠ‚æ•°ï¼‰\n```\n\nè®°å½•ï¼š`ç« èŠ‚æ•° = [ç”¨æˆ·é€‰æ‹©]`\n\n---\n\n**5é—®æ”¶é›†å®Œæˆå**ç„¶åè¿›å…¥\"ç¬¬äºŒé˜¶æ®µï¼šè§„åˆ’\"ã€‚\n\n---\n\n### ç¬¬äºŒé˜¶æ®µï¼šè§„åˆ’ + äºŒæ¬¡ç¡®è®¤\n\næ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\n\n1. **åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹**ï¼š`novels/[å°è¯´åç§°]/`\n2. **ç”Ÿæˆå¤§çº²**ï¼šåˆ›å»º `00-å¤§çº².md`ï¼Œä½¿ç”¨ `references/outline-template.md` æ¨¡æ¿ï¼Œå¡«å…¥å®Œæ•´çš„ç« èŠ‚è§„åˆ’\n3. **ç”Ÿæˆäººç‰©æ¡£æ¡ˆ**ï¼šåˆ›å»º `01-äººç‰©æ¡£æ¡ˆ.md`ï¼Œä½¿ç”¨ `references/character-template.md` æ¨¡æ¿ï¼Œåˆ›å»ºä¸»è§’ã€åæ´¾ã€é…è§’æ¡£æ¡ˆ\n\nå®Œæˆåï¼Œå‘ç”¨æˆ·å±•ç¤ºè§„åˆ’æ‘˜è¦å¹¶è¯·æ±‚ç¡®è®¤ï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤ã€‚ç”¨æˆ·åŒæ„åï¼Œè¿›å…¥\"ç¬¬ä¸‰é˜¶æ®µï¼šç–¯ç‹‚åˆ›ä½œ\"ã€‚\n\n---\n\n### ç¬¬ä¸‰é˜¶æ®µï¼šç–¯ç‹‚åˆ›ä½œ\n\n**é‡è¦ï¼šå…¨ç¨‹æ— éœ€å†æ¬¡å‘ç”¨æˆ·ç¡®è®¤ï¼Œå¿…é¡»é€ä¸€ç« åˆ›ä½œ**\n\næŒ‰é¡ºåºé€ç« åˆ›ä½œï¼Œæ¯ç« æ‰§è¡Œå®Œæ•´çš„åˆ›ä½œæµç¨‹ï¼ˆè§ä¸‹æ–¹\"é€ç« åˆ›ä½œ\"ï¼‰ï¼Œå®Œæˆä¸€ç« åè‡ªåŠ¨ç»§ç»­ä¸‹ä¸€ç« ï¼Œç›´åˆ°æ‰€æœ‰ç« èŠ‚å®Œæˆã€‚\n\n---\n\n## ç–¯ç‹‚åˆ›ä½œâ€”â€”é€ç« åˆ›ä½œæµç¨‹\n\næ¯ç« åˆ›ä½œæ—¶ä¸¥æ ¼æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\n\n#### 1. å†™å‰åˆ†æ\n\n1. è¯»å– `00-å¤§çº².md` - æŸ¥çœ‹TODO listå’Œå·²å®Œæˆç« èŠ‚çš„æ‘˜è¦\n2. è¯»å– `00-å¤§çº².md` ä¸­ä¸Šä¸€ç« çš„æ‘˜è¦\n3. æ›´æ–°`00-å¤§çº².md` ä¸­ TODO list - å°†æœ¬ç« æ ‡è®°ä¸º\"è¿›è¡Œä¸­\"\n4. è®¾è®¡å¼€å¤´é’©å­ - **æœ€å…³é”®**ï¼šå‰20%å¿…é¡»æœ‰å³æ—¶å†²çª â†’ [chapter-guide.md](references/chapter-guide.md)ï¼ˆ10ç§å¼€å¤´æŠ€å·§ï¼‰\n5. è§„åˆ’åœºæ™¯ - ç¡®å®šæœ¬ç« éœ€è¦3-5ä¸ªåœºæ™¯\n\n#### 2. æ’°å†™\n\n6. åˆ›å»ºç« èŠ‚æ–‡ä»¶ - ä½¿ç”¨`references/chapter-template.md` æ¨¡æ¿\n7. æ’°å†™æ­£æ–‡ - **æ¯ç« å¿…é¡»è¾¾åˆ°3000-5000å­—**\n   - å¼€å¤´æ£€æŸ¥ï¼šå‰20%æ˜¯å¦æå…¶å¸å¼•äººï¼Ÿ\n   - å¯¹è¯è§„èŒƒ â†’ [dialogue-writing.md](references/dialogue-writing.md)\n   - å†…å®¹ä¸è¶³ï¼Ÿä½¿ç”¨ [content-expansion.md](references/content-expansion.md) æ‰©å……æŠ€å·§\n8. è®¾ç½®ç»“å°¾é’©å­ â†’ [hook-techniques.md](references/hook-techniques.md)ï¼ˆ10ç§é’©å­ç±»å‹ï¼‰\n9. **å­—æ•°æ£€æŸ¥** - å¿…é¡»ä½¿ç”¨è„šæœ¬æ£€æŸ¥å­—æ•°ï¼š`python scripts/check_chapter_wordcount.py <ç« èŠ‚æ–‡ä»¶è·¯å¾„>` ä½äº3000å­—å¿…é¡»ä½¿ç”¨æ‰©å……æŠ€å·§é‡å†™\n\n#### 3. æ’°å†™åä¼˜åŒ–\n\n10. è¿è´¯æ€§æ£€æŸ¥ â†’ [consistency.md](references/consistency.md) - äººç‰©ä¸€è‡´æ€§ã€æƒ…èŠ‚è¿è´¯ã€èŠ‚å¥æ§åˆ¶\n11. **æ·±åº¦æ¶¦è‰²ï¼ˆå»é™¤AIå‘³ï¼‰** - é‡ç‚¹æ£€æŸ¥å¹¶ä¿®æ”¹ï¼š\n    - **å»é™¤è¿‡åº¦ä¿®é¥°çš„å½¢å®¹è¯**ï¼šåˆ å‡\"ç’€ç’¨\"ã€\"ç‘°ä¸½\"ã€\"ç»šçƒ‚\"ç­‰AIå¸¸ç”¨è¯å †ç Œ\n    - **å‡å°‘æŠ½è±¡é™ˆè¿°**ï¼šæŠŠ\"å¿ƒä¸­æ¶Œèµ·å¤æ‚çš„æƒ…æ„Ÿ\"æ”¹ä¸ºå…·ä½“åŠ¨ä½œ/å¯¹è¯\n    - **æ‰“ç ´å››å­—æ ¼å¾‹**ï¼šé¿å…\"å¿ƒæ½®æ¾æ¹ƒã€çƒ­è¡€æ²¸è…¾\"ç­‰é™ˆè¯æ»¥è°ƒ\n    - **å¢åŠ å£è¯­åŒ–è¡¨è¾¾**ï¼šäººç‰©å¯¹è¯è¦æœ‰ä¸ªæ€§ï¼Œé¿å…\"ä¹¦é¢è¯­å¥—è¯\"\n    - **ä¼˜åŒ–èŠ‚å¥æ„Ÿ**ï¼šé•¿å¥å’ŒçŸ­å¥äº¤æ›¿ï¼Œé¿å…å¥å¼å•è°ƒ\n    - **ç»†èŠ‚å…·è±¡åŒ–**ï¼šç”¨å…·ä½“çš„è§†è§‰/å¬è§‰/å—…è§‰ç»†èŠ‚æ›¿ä»£ç¬¼ç»Ÿæè¿°\n12. **å­—æ•°æ£€æŸ¥** - å¿…é¡»ä½¿ç”¨è„šæœ¬æ£€æŸ¥å­—æ•°ï¼š`python scripts/check_chapter_wordcount.py <ç« èŠ‚æ–‡ä»¶è·¯å¾„>` ä½äº3000å­—å¿…é¡»ä½¿ç”¨æ‰©å……æŠ€å·§é‡å†™\n\n#### 4. æœ€åæ”¶å°¾\n\n13. ç”Ÿæˆç« èŠ‚æ‘˜è¦ - åœ¨ `00-å¤§çº².md` æ·»åŠ æ‘˜è¦ï¼ˆ300-500å­—ï¼‰\n14. æ›´æ–°çŠ¶æ€ - `00-å¤§çº².md` ä¸­ TODO list - å°†æœ¬ç« æ ‡è®°ä¸º\"å®Œæˆ\"\n\n---\n\n## ä¸‰å¤§é»„é‡‘æ³•åˆ™\n\n1. **å±•ç¤ºè€Œéè®²è¿°** - ç”¨åŠ¨ä½œå’Œå¯¹è¯è¡¨ç°ï¼Œä¸è¦ç›´æ¥é™ˆè¿°\n2. **å†²çªé©±åŠ¨å‰§æƒ…** - æ¯ç« å¿…é¡»æœ‰å†²çªæˆ–è½¬æŠ˜\n3. **æ‚¬å¿µæ‰¿ä¸Šå¯ä¸‹** - æ¯ç« ç»“å°¾å¿…é¡»ç•™ä¸‹é’©å­\n\n### å­—æ•°æ£€æŸ¥è„šæœ¬\n\nä½¿ç”¨ `scripts/check_chapter_wordcount.py` æ£€æŸ¥ç« èŠ‚å­—æ•°ï¼š\n\n```bash\n# æ£€æŸ¥å•ä¸ªç« èŠ‚\npython scripts/check_chapter_wordcount.py novels/å°è¯´å/ç¬¬01ç« .md\n\n# æ£€æŸ¥æ‰€æœ‰ç« èŠ‚\npython scripts/check_chapter_wordcount.py --all novels/å°è¯´å/\n\n# è‡ªå®šä¹‰æœ€å°å­—æ•°\npython scripts/check_chapter_wordcount.py novels/å°è¯´å/ç¬¬01ç« .md 3500\n```\n\nä½äº3000å­—çš„ç« èŠ‚å¿…é¡»ä½¿ç”¨ [content-expansion.md](references/content-expansion.md) çš„æ‰©å……æŠ€å·§è¿›è¡Œæ‰©å……ã€‚\n",
        "skills/chinese-novelist/references/chapter-guide.md": "# ç« èŠ‚å†™ä½œæŒ‡å—\n\næ¯ä¸€ç« éƒ½åº”è¯¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„å™äº‹å•å…ƒï¼ŒåŒæ—¶æ¨åŠ¨æ•´ä½“æ•…äº‹å‘å‰å‘å±•ã€‚\n\n## å…³é”®åŸåˆ™ï¼šå‰ 20% å†³å®šç”Ÿæ­»\n\n**è¯»è€…åœ¨å‰ 20% çš„å†…å®¹å†³å®šæ˜¯å¦ç»§ç»­é˜…è¯»ã€‚**\n\nå¦‚æœå¼€å¤´ä¸å¤Ÿå¸å¼•äººï¼Œè¯»è€…ä¼šæ”¾å¼ƒï¼Œæ— è®ºåé¢å†™å¾—å¤šä¹ˆç²¾å½©ã€‚\n\n### å‰ 20% å¿…é¡»è¾¾åˆ°çš„æ•ˆæœ\n\n1. **å³æ—¶ç´§å¼ æ„Ÿ** - è¯»è€…ç«‹å³æ„Ÿå—åˆ°å±æœº/å†²çª\n2. **é‡å¤§äº‹ä»¶** - å‘ç”Ÿæ¨åŠ¨å‰§æƒ…çš„é‡è¦äº‹æƒ…\n3. **æƒ…æ„Ÿå†²å‡»** - è¯»è€…äº§ç”Ÿå¼ºçƒˆæƒ…ç»ªï¼ˆå¥½å¥‡ã€éœ‡æƒŠã€æ‹…å¿§ï¼‰\n4. **ç»§ç»­é˜…è¯»çš„æ¬²æœ›** - è¿«åˆ‡æƒ³çŸ¥é“æ¥ä¸‹æ¥å‘ç”Ÿä»€ä¹ˆ\n\n### å¼€å¤´è‡´å‘½é”™è¯¯ï¼ˆç»å¯¹é¿å…ï¼‰\n\n| é”™è¯¯ç±»å‹ | ç¤ºä¾‹ | ä¸ºä»€ä¹ˆè‡´å‘½ |\n|---------|------|-----------|\n| å¤©æ°”æå†™ | \"é‚£å¤©å¤©æ°”æ™´æœ—ï¼Œä¸‡é‡Œæ— äº‘...\" | ä¸æ•…äº‹æ— å…³ï¼Œè¯»è€…æ— è€å¿ƒ |\n| æ—¥å¸¸æµç¨‹ | \"ææ˜é†’æ¥ï¼Œåˆ·ç‰™æ´—è„¸ï¼Œåƒæ—©é¤...\" | æ— èŠï¼Œæ²¡æœ‰å†²çª |\n| å›é¡¾ä¸Šç«  | \"ä¸Šä¸€ç« æˆ‘ä»¬è¯´åˆ°...\" | è¯»è€…å·²ç»çŸ¥é“ï¼Œæµªè´¹æ—¶é—´ |\n| ç¼“æ…¢é“ºå« | \"å…ˆä»‹ç»ä¸€ä¸‹è¿™ä¸ªåŸå¸‚çš„èƒŒæ™¯...\" | ä¿¡æ¯å€¾å€’ï¼Œæ²¡æœ‰è¡ŒåŠ¨ |\n| å¹³æ·¡å¯¹è¯ | \"ä½ å¥½ï¼Œä½ å¥½å—ï¼Ÿæˆ‘å¾ˆå¥½ã€‚\" | æ— æ„ä¹‰å¯¹è¯ï¼Œæ²¡æœ‰å¼ åŠ› |\n| è¿‡åº¦è§£é‡Š | \"è¿™æ˜¯å› ä¸ºï¼Œæ‰€ä»¥ï¼Œç„¶å...\" | è®²è¿°è€Œéå±•ç¤º |\n\n---\n\n## åç§å¼ºåŠ›å¼€å¤´æŠ€å·§\n\n### 1. è¡ŒåŠ¨ä¸­å¼€åœºï¼ˆIn Media Resï¼‰\n\nç›´æ¥ä»å†²çª/åŠ¨ä½œçš„é«˜æ½®ç‚¹å¼€å§‹ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> å­å¼¹æ“¦è¿‡ä»–çš„è€³è¾¹ï¼Œå‡»ç¢äº†èº«åçš„èŠ±ç“¶ã€‚ææ˜æ²¡æœ‰å›å¤´ï¼Œç¿»æ»šèº²åˆ°æ²™å‘åé¢ã€‚\n\n**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼š** ç«‹å³å»ºç«‹ç´§å¼ æ„Ÿï¼Œè¯»è€…æƒ³çŸ¥é“ä¸ºä»€ä¹ˆè¢«æ‰“ã€‚\n\n### 2. åå¸¸æƒ…å¢ƒ\n\nå‘ˆç°ä¸€ä¸ªä¸ç¬¦åˆå¸¸ç†çš„åœºæ™¯ï¼Œæ¿€å‘å¥½å¥‡ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> æ­»äººååœ¨åŠå…¬æ¡Œå‰ï¼Œæ­£åœ¨å†™ä¸€ä»½æŠ¥å‘Šã€‚\n\n**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼š** ä¸å¯èƒ½çš„äº‹ç‰©ï¼Œè¯»è€…æƒ³äº†è§£æ€ä¹ˆå›äº‹ã€‚\n\n### 3. éœ‡æ’¼å¯¹è¯\n\nç”¨ä¸€å¥æƒŠäººçš„å¯¹è¯å¼€åœºã€‚\n\n**ç¤ºä¾‹ï¼š**\n> \"æˆ‘æŠŠå­©å­å–äº†ã€‚\" å¦»å­å¹³é™åœ°è¯´ï¼Œç»§ç»­ç¿»é˜…æ‚å¿—ã€‚\n\n**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼š** ç«‹å³åˆ¶é€ æƒ…æ„Ÿå†²å‡»å’Œæ‚¬å¿µã€‚\n\n### 4. å€’è®¡æ—¶å¼€åœº\n\nä»æ—¶é—´å‹åŠ›å¼€å§‹ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> è¿˜æœ‰ä¸‰åˆ†é’Ÿï¼Œç‚¸å¼¹å°±ä¼šçˆ†ç‚¸ã€‚è€Œæ‹†å¼¹åŒ…é‡Œå°‘äº†ä¸€æ ¹çº¢çº¿ã€‚\n\n**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼š** ç´§è¿«æ„Ÿï¼Œè¯»è€…æƒ³çŸ¥é“èƒ½å¦åŠæ—¶ã€‚\n\n### 5. é‡å¤§å‘ç°\n\nä»å‘ç°å…³é”®çº¿ç´¢/çœŸç›¸å¼€å§‹ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> æ³•åŒ»æŠ¥å‘Šæ‘Šåœ¨æ¡Œä¸Šã€‚æ­»å› ä¸æ˜¯æ„å¤–ï¼Œæ˜¯ç²¾å¿ƒç­–åˆ’çš„è°‹æ€ã€‚è€Œå«Œç–‘äººåªæœ‰ä¸€ä¸ªâ€”â€”ä»–è‡ªå·±ã€‚\n\n**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼š** é‡å¤§è½¬æŠ˜ï¼Œé‡æ–°ç†è§£ä¹‹å‰çš„äº‹ä»¶ã€‚\n\n### 6. å±æœºæ—¶åˆ»\n\nä»è§’è‰²é¢ä¸´æœ€å¤§å±æœºå¼€å§‹ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> é—¨è¢«è¸¹å¼€çš„ç¬é—´ï¼Œå¥¹çŸ¥é“è—ä¸ä½äº†ã€‚ä¿é™©ç®±é‡Œçš„ç§˜å¯†å³å°†æ›å…‰ã€‚\n\n**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼š** é«˜é£é™©ï¼Œè¯»è€…å…³å¿ƒè§’è‰²å‘½è¿ã€‚\n\n### 7. è°œå›¢æµ®ç°\n\nä»æ— æ³•è§£é‡Šçš„ç°è±¡å¼€å§‹ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> é†’æ¥æ—¶ï¼Œä»–å‘ç°å³æ‰‹èƒŒä¸Šå‡ºç°äº†ä¸€ä¸ªä»æœªè§è¿‡çš„çº¹èº«ã€‚è€Œä»–ä¸è®°å¾—æ˜¨æ™šå‘ç”Ÿäº†ä»€ä¹ˆã€‚\n\n**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼š** ç¥ç§˜æ„Ÿï¼Œè¯»è€…æƒ³è§£å¼€è°œé¢˜ã€‚\n\n### 8. èƒŒå›å¼€åœº\n\nä»èƒŒå›/ä¿¡ä»»å´©å¡Œå¼€å§‹ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> æªå£å¯¹å‡†ä»–çš„åèƒŒã€‚\"å¯¹ä¸èµ·ï¼Œ\" ä»–ä¿¡ä»»äº†åå¹´çš„æ­æ¡£è¯´ï¼Œ\"ä»–ä»¬ç»™çš„å¤ªå¤šäº†ã€‚\"\n\n**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼š** æƒ…æ„Ÿå†²å‡»ï¼Œè§’è‰²é™·å…¥ç»å¢ƒã€‚\n\n### 9. é‡å¤§é€‰æ‹©\n\nä»è§’è‰²çš„è‰°éš¾å†³å®šå¼€å§‹ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> æ•‘ç”Ÿè‰‡åªèƒ½è½½ä¸€ä¸ªäººã€‚å¥¹çš„ä¸ˆå¤«å’Œå¥³å„¿éƒ½åœ¨å†°å†·çš„æµ·æ°´é‡ŒæŒ£æ‰ã€‚å¥¹ä¼¸å‡ºæ‰‹â€”â€”\n\n**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼š** é“å¾·å›°å¢ƒï¼Œè¯»è€…æƒ³çŸ¥é“å¥¹å¦‚ä½•é€‰æ‹©ã€‚\n\n### 10. ç»“å±€é¢„å‘Š\n\nä»æœªæ¥çš„æŸä¸ªå…³é”®æ—¶åˆ»å¼€å§‹ï¼Œç„¶åå€’å™ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> ä¸‰å¤©åï¼Œæ‰€æœ‰äººéƒ½ä¼šåæ‚”ä»Šå¤©çš„å†³å®šã€‚ä½†æ­¤åˆ»ï¼Œä¼šè®®å®¤é‡Œçš„æ¯ä¸ªäººéƒ½åœ¨å¾®ç¬‘ã€‚\n\n**ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼š** é¢„ç¤ºç¾éš¾ï¼Œè¯»è€…æƒ³çŸ¥é“å¦‚ä½•å‘ç”Ÿã€‚\n\n---\n\n## æ ‡å‡†ç« èŠ‚ç»“æ„\n\n### 1. å¼€å¤´é’©å­ï¼ˆå‰ 20%ï¼‰æœ€å…³é”®\n\n**å¿…é¡»åŒ…å«ï¼š**\n- å³æ—¶å†²çª/å±æœº\n- é‡å¤§äº‹ä»¶/ä¿¡æ¯\n- å¼ºçƒˆæƒ…æ„Ÿå†²å‡»\n- è¡ŒåŠ¨åœºæ™¯\n\n**ä½¿ç”¨ä¸Šè¿°åç§æŠ€å·§ä¹‹ä¸€ï¼Œæˆ–ç»„åˆä½¿ç”¨ã€‚**\n\n### 2. å‘å±•æ¨è¿›ï¼ˆä¸­é—´ 50-60%ï¼‰\n\næœ¬ç« çš„æ ¸å¿ƒå†…å®¹ï¼Œå¿…é¡»æ¨è¿›å‰§æƒ…æˆ–æ·±åŒ–äººç‰©ã€‚\n\n**æ¨è¿›æ–¹å¼ï¼š**\n- **æ–°ä¿¡æ¯æ­ç¤º**ï¼šè®©è¯»è€…/ä¸»è§’è·å¾—é‡è¦ä¿¡æ¯\n- **å…³ç³»å˜åŒ–**ï¼šäººç‰©å…³ç³»å‘ç”Ÿè½¬å˜\n- **é—®é¢˜å‡çº§**ï¼šç°çŠ¶æ¶åŒ–ï¼Œæ–°å±æœºå‡ºç°\n- **è§’è‰²æˆé•¿**ï¼šä¸»è§’è·å¾—æ–°æŠ€èƒ½ã€æ–°è®¤çŸ¥\n\n**é¿å…ï¼š**\n- çº¯ç²¹çš„åœºæ™¯æå†™ï¼ˆé£æ™¯ã€æˆ¿é—´å¸ƒå±€ç­‰ï¼‰\n- ä¸å‰§æƒ…æ— å…³çš„äººç‰©äº’åŠ¨\n- é‡å¤å·²çŸ¥çš„å¯¹è¯\n\n### 3. é«˜æ½®æ—¶åˆ»ï¼ˆå 15-20%ï¼‰\n\næœ¬ç« çš„æƒ…æ„Ÿæˆ–åŠ¨ä½œæœ€é«˜ç‚¹ã€‚\n\n**é«˜æ½®ç±»å‹ï¼š**\n- **åŠ¨ä½œé«˜æ½®**ï¼šæˆ˜æ–—ã€è¿½é€ã€å¯¹æŠ—\n- **æƒ…æ„Ÿé«˜æ½®**ï¼šé‡å¤§å‘ç°ã€èƒŒå›ã€å‘Šç™½ã€ç‰ºç‰²\n- **å¿ƒç†é«˜æ½®**ï¼šä¸»è§’çš„å†…å¿ƒè½¬æŠ˜ç‚¹\n\n### 4. ç»“å°¾é’©å­ï¼ˆæœ€å 5-10%ï¼‰\n\nç•™ä¸‹æ‚¬å¿µï¼Œè®©è¯»è€…æƒ³çœ‹ä¸‹ä¸€ç« ã€‚è¯¦è§ [hook-techniques.md](hook-techniques.md)\n\n---\n\n## ç« èŠ‚ç±»å‹åˆ†ç±»\n\n### æƒ…èŠ‚æ¨è¿›ç« \n\n**ç›®çš„**ï¼šæ¨åŠ¨ä¸»çº¿å‰§æƒ…å‘å±•\n**ç‰¹å¾**ï¼šæœ‰æ˜ç¡®çš„äº‹ä»¶è¿›å±•ã€é‡è¦ä¿¡æ¯æ­ç¤º\n**ç¤ºä¾‹**ï¼šä¸»è§’å‘ç°çº¿ç´¢ã€æ•Œäººå‘åŠ¨æ”»å‡»ã€ç›Ÿå‹èƒŒå›\n\n### äººç‰©æ·±åŒ–ç« \n\n**ç›®çš„**ï¼šæ·±åŒ–è¯»è€…å¯¹äººç‰©çš„ç†è§£\n**ç‰¹å¾**ï¼šæ­ç¤ºäººç‰©èƒŒæ™¯ã€åŠ¨æœºã€å†…å¿ƒå†²çª\n**ç¤ºä¾‹**ï¼šå›å¿†ç‰‡æ®µã€ç§å¯†å¯¹è¯ã€ç‹¬å¤„æ—¶åˆ»\n**æ³¨æ„**ï¼šå¿…é¡»ä¸ä¸»çº¿ç›¸å…³ï¼Œä¸èƒ½æ˜¯çº¯ç²¹çš„äººç‰©å°ä¼ \n\n### æ°›å›´è¥é€ ç« \n\n**ç›®çš„**ï¼šå»ºç«‹ç‰¹å®šæƒ…ç»ªæˆ–ç´§å¼ æ„Ÿ\n**ç‰¹å¾**ï¼šæ³¨é‡æ„Ÿå®˜æå†™ã€èŠ‚å¥æ§åˆ¶\n**ç¤ºä¾‹**ï¼šæš´é£é›¨å‰çš„å®é™ã€æ½œä¼è¡ŒåŠ¨ã€ç­‰å¾…å®¡åˆ¤\n\n### è¿‡æ¸¡è¡”æ¥ç« \n\n**ç›®çš„**ï¼šè¿æ¥ä¸¤ä¸ªé‡å¤§äº‹ä»¶\n**ç‰¹å¾**ï¼šä¿¡æ¯æ•´ç†ã€ä½ç½®è½¬æ¢ã€æ—¶é—´è·³è·ƒ\n**æ³¨æ„**ï¼šä¿æŒç®€æ´ï¼Œé¿å…æ‹–æ²“\n\n---\n\n## ç« èŠ‚èŠ‚å¥æ§åˆ¶\n\n### èŠ‚å¥å˜åŒ–\n\nåŒä¸€ç« å†…åº”åŒ…å«èŠ‚å¥å˜åŒ–ï¼š\n\n```\nç´§å¼  â†’ ç¼“è§£ â†’ æ–°ç´§å¼  â†’ æ›´ç´§å¼ \n```\n\nç¤ºä¾‹ï¼š\n```\nç´§å¼ ï¼šä¸»è§’è¢«è¿½æ•\nç¼“è§£ï¼šèº²è¿›å®‰å…¨å±‹ï¼ŒçŸ­æš‚å–˜æ¯\næ–°ç´§å¼ ï¼šå‘ç°å®‰å…¨å±‹å·²è¢«å…¥ä¾µ\næ›´ç´§å¼ ï¼šå¿…é¡»ç«‹å³é€ƒç¦»\n```\n\n### ä¿¡æ¯å¯†åº¦\n\n- **é«˜å¯†åº¦**ï¼šåŠ¨ä½œåœºé¢ã€å¤§é‡å¯¹è¯ã€å¿«é€Ÿäº‹ä»¶\n- **ä½å¯†åº¦**ï¼šå†…å¿ƒç‹¬ç™½ã€ç¯å¢ƒæå†™ã€æƒ…æ„Ÿæ²‰æ·€\n\n**åŸåˆ™**ï¼šé«˜ä½å¯†åº¦äº¤æ›¿ï¼Œé¿å…æŒç»­é«˜å¯†åº¦ï¼ˆè¯»è€…ç–²åŠ³ï¼‰æˆ–æŒç»­ä½å¯†åº¦ï¼ˆè¯»è€…æ— èŠï¼‰\n\n---\n\n## ç« èŠ‚é•¿åº¦ä¸å†…å®¹å¯†åº¦å¯¹ç…§\n\n| ç« èŠ‚å­—æ•° | æ ¸å¿ƒäº‹ä»¶æ•°é‡ | åœºæ™¯æ•°é‡ |\n|---------|-------------|---------|\n| 800-1500 | 1 ä¸ªä¸»è¦äº‹ä»¶ | 1-2 ä¸ªåœºæ™¯ |\n| 1500-3000 | 1-2 ä¸ªä¸»è¦äº‹ä»¶ | 2-3 ä¸ªåœºæ™¯ |\n| 3000-5000 | 2-3 ä¸ªä¸»è¦äº‹ä»¶ | 3-5 ä¸ªåœºæ™¯ |\n\n**åŸåˆ™**ï¼šæ¯ç« è‡³å°‘åŒ…å«ä¸€ä¸ªä¸å¯åˆ é™¤çš„æ ¸å¿ƒäº‹ä»¶ã€‚å¦‚æœä¸€ä¸ªäº‹ä»¶å¯ä»¥ç§»é™¤è€Œä¸å½±å“ç†è§£ï¼Œåˆ™åº”åˆ é™¤ã€‚\n\n---\n\n## ç« èŠ‚å†™ä½œæ£€æŸ¥æ¸…å•\n\næ’°å†™æ¯ç« åè‡ªæŸ¥ï¼š\n\n### å¼€å¤´æ£€æŸ¥ï¼ˆæœ€å…³é”®ï¼‰\n- [ ] **å‰ 20% æ˜¯å¦æå…¶å¸å¼•äººï¼Ÿ**ï¼ˆå¦‚æœä¸æ˜¯ï¼Œé‡å†™ï¼‰\n- [ ] æ˜¯å¦åœ¨ç¬¬ä¸€æ®µå°±å»ºç«‹å†²çª/ç´§å¼ ï¼Ÿ\n- [ ] æ˜¯å¦æœ‰é‡å¤§äº‹ä»¶æˆ–ä¿¡æ¯æ­ç¤ºï¼Ÿ\n- [ ] æ˜¯å¦æœ‰å¼ºçƒˆçš„æƒ…æ„Ÿå†²å‡»ï¼Ÿ\n- [ ] è¯»è€…æ˜¯å¦ä¼šè¿«åˆ‡æƒ³çŸ¥é“æ¥ä¸‹æ¥å‘ç”Ÿä»€ä¹ˆï¼Ÿ\n- [ ] æ˜¯å¦é¿å…äº†æ‰€æœ‰\"è‡´å‘½é”™è¯¯\"ï¼Ÿï¼ˆå¤©æ°”ã€æ—¥å¸¸ã€å›é¡¾ç­‰ï¼‰\n\n### å†…å®¹æ£€æŸ¥\n- [ ] æœ¬ç« æ˜¯å¦æ¨è¿›äº†ä¸»çº¿å‰§æƒ…æˆ–æ·±åŒ–äº†äººç‰©ï¼Ÿ\n- [ ] æ˜¯å¦æœ‰å†²çªæˆ–è½¬æŠ˜ï¼Ÿ\n- [ ] å¯¹è¯æ˜¯å¦æ¨åŠ¨æƒ…èŠ‚æˆ–æ­ç¤ºäººç‰©ï¼Ÿ\n- [ ] æ˜¯å¦å±•ç¤ºäº†è€Œéè®²è¿°äº†å…³é”®ä¿¡æ¯ï¼Ÿ\n- [ ] ç»“å°¾æ˜¯å¦ç•™ä¸‹æ‚¬å¿µé’©å­ï¼Ÿ\n- [ ] æ˜¯å¦ä¸ºä¸‹ä¸€ç« åŸ‹ä¸‹ä¼ç¬”ï¼Ÿ\n\n### å¼€å¤´è‡ªæµ‹é—®é¢˜\nå¦‚æœå¯¹å¼€å¤´æœ‰ä»»ä½•é—®é¢˜å›ç­”\"å¦\"ï¼Œå¿…é¡»é‡å†™ï¼š\n1. è¯»è€…è¯»äº†å‰ä¸‰æ®µåï¼Œä¼šæƒ³ç»§ç»­è¯»å—ï¼Ÿ\n2. å¼€å¤´æ˜¯å¦æœ‰å†²çªæˆ–å±æœºï¼Ÿ\n3. å¼€å¤´æ˜¯å¦æœ‰æ„å¤–æˆ–è½¬æŠ˜ï¼Ÿ\n4. å¼€å¤´æ˜¯å¦è®©è¯»è€…äº§ç”Ÿå¼ºçƒˆæƒ…ç»ªï¼Ÿ\n5. å¼€å¤´æ˜¯å¦é¿å…äº†å¹³æ·¡çš„æ—¥å¸¸/å¤©æ°”/èƒŒæ™¯è¯´æ˜ï¼Ÿ\n",
        "skills/chinese-novelist/references/chapter-template.md": "# ç¬¬[X]ç« ï¼š[ç« èŠ‚æ ‡é¢˜]\n\n## æœ¬ç« æ¦‚è¦\n- **æ ¸å¿ƒäº‹ä»¶**ï¼š[ä¸€å¥è¯æ¦‚æ‹¬æœ¬ç« å‘ç”Ÿçš„äº‹]\n- **æ‰¿æ¥ä¸Šç« **ï¼š[å›åº”ä¸Šä¸€ç« çš„æ‚¬å¿µ]\n- **æ‚¬å¿µé’©å­**ï¼š[æœ¬ç« ç»“å°¾çš„é’©å­]\n\n---\n\n## æ­£æ–‡\n\n[ç« èŠ‚æ­£æ–‡å†…å®¹ 3000-5000 å­—ï¼Œæœ€ä½ä¸ä½äº 2500 å­—]\n\n---\n\n## ç« èŠ‚å¤‡æ³¨\n- æœ¬ç« æ‚¬å¿µï¼š[ç®€è¿°ç»“å°¾é’©å­]\n- ä¸‹ç« é¢„å‘Šï¼š[å¯é€‰ï¼Œ1-2å¥è¯]\n- ä¼ç¬”æ ‡è®°ï¼š[å¦‚æœåŸ‹ä¸‹ä¼ç¬”ï¼Œåœ¨æ­¤è®°å½•]\n",
        "skills/chinese-novelist/references/character-building.md": "# äººç‰©å¡‘é€ åŸåˆ™\n\nå¥½çš„äººç‰©æ˜¯æ•…äº‹çš„çµé­‚ã€‚è¯»è€…è®°ä½çš„æ˜¯äººï¼Œä¸æ˜¯æƒ…èŠ‚ã€‚\n\n## äººç‰©æ¡£æ¡ˆæ¨¡æ¿\n\næ¯ä¸ªä¸»è¦è§’è‰²éƒ½åº”å»ºç«‹å®Œæ•´æ¡£æ¡ˆï¼š\n\n### åŸºæœ¬ä¿¡æ¯\n\n```\nå§“åï¼šï¼ˆæœ‰æ„ä¹‰çš„åå­—æ›´å¥½ï¼‰\nå¹´é¾„ï¼š\nèŒä¸šï¼š\nå¤–è²Œç‰¹å¾ï¼šï¼ˆ2-3ä¸ªæ˜¾è‘—ç‰¹å¾ï¼Œé¿å…æ³›æ³›è€Œè°ˆï¼‰\n```\n\n### æ€§æ ¼æ ¸å¿ƒ\n\n```\næ ¸å¿ƒä»·å€¼è§‚ï¼šï¼ˆä»–æœ€ç›¸ä¿¡ä»€ä¹ˆï¼‰\næœ€å¤§ææƒ§ï¼šï¼ˆä»–æœ€å®³æ€•ä»€ä¹ˆï¼‰\nè‡´å‘½ç¼ºé™·ï¼šï¼ˆä»€ä¹ˆä¼šå¯¼è‡´ä»–å¤±è´¥ï¼‰\nå†…å¿ƒæ¸´æœ›ï¼šï¼ˆä»–çœŸæ­£æƒ³è¦ä»€ä¹ˆï¼‰\n```\n\n### èƒŒæ™¯æ•…äº‹\n\n```\næˆé•¿ç¯å¢ƒï¼š\nåˆ›ä¼¤ç»å†ï¼šï¼ˆè¿‡å»ä¼¤å®³ä»–çš„äº‹ï¼‰\nå…³é”®è®°å¿†ï¼šï¼ˆå¡‘é€ ä»–ç°åœ¨çš„å…³é”®äº‹ä»¶ï¼‰\nç§˜å¯†ï¼šï¼ˆåˆ«äººä¸çŸ¥é“çš„äº‹ï¼‰\n```\n\n### è¡Œä¸ºæ¨¡å¼\n\n```\nè¯´è¯æ–¹å¼ï¼šï¼ˆå£å¤´ç¦…ã€è¯­é€Ÿã€ç”¨è¯ä¹ æƒ¯ï¼‰\nè‚¢ä½“è¯­è¨€ï¼šï¼ˆä¹ æƒ¯åŠ¨ä½œã€ç´§å¼ æ—¶çš„å°åŠ¨ä½œï¼‰\nç¤¾äº¤é£æ ¼ï¼šï¼ˆå†…å‘/å¤–å‘ã€å¦‚ä½•å¯¹å¾…é™Œç”Ÿäººï¼‰\nå‹åŠ›ååº”ï¼šï¼ˆå‹åŠ›ä¸‹å¦‚ä½•è¡¨ç°ï¼‰\n```\n\n---\n\n## äººç‰©ç±»å‹å¡‘é€ \n\n### ä¸»è§’ï¼ˆProtagonistï¼‰\n\n**å¿…é¡»æœ‰ï¼š**\n- **æ˜ç¡®ç›®æ ‡** - ä»–æƒ³è¦ä»€ä¹ˆ\n- **å¼ºå¤§åŠ¨æœº** - ä¸ºä»€ä¹ˆæƒ³è¦\n- **å¯å…±æƒ…æ€§** - è¯»è€…èƒ½ç†è§£ä»–çš„æ„Ÿå—\n- **æˆé•¿ç©ºé—´** - æ•…äº‹ä¸­ä¼šæ”¹å˜\n\n**ä¸»è§’åŸå‹ï¼š**\n| ç±»å‹ | ç‰¹å¾ | æ•…äº‹ä½œç”¨ |\n|-----|------|---------|\n| è‹±é›„å‹ | å‹‡æ•¢ã€æ­£ä¹‰ã€åˆ©ä»– | æˆ˜èƒœå¤–åœ¨å¨èƒ |\n| æˆé•¿å‹ | ä»å¼±å°åˆ°å¼ºå¤§ | å…‹æœå†…åœ¨ç¼ºé™· |\n| åè‹±é›„å‹ | é“å¾·ç°è‰²ã€å¤æ‚ | æŒ‘æˆ˜ä¼ ç»Ÿé“å¾· |\n| å¹³å‡¡å‹ | æ™®é€šäººå·å…¥éå‡¡äº‹ | è¯»è€…ä»£å…¥æ„Ÿå¼º |\n\n### åæ´¾ï¼ˆAntagonistï¼‰\n\n**å¥½åæ´¾çš„ç‰¹ç‚¹ï¼š**\n- **å¼ºå¤§å¯ä¿¡** - ä¸åº”è¯¥æ˜¯è‰å°ç­å­\n- **æœ‰è‡ªå·±çš„é€»è¾‘** - ä»–ç›¸ä¿¡è‡ªå·±åœ¨åšæ­£ç¡®çš„äº‹\n- **ä¸ä¸»è§’æœ‰æ·±å±‚è”ç³»** - ä¸æ˜¯å•çº¯ä¸ºäº†ä½œæ¶\n- **æ­ç¤ºä¸»é¢˜** - æŒ‘æˆ˜ä¸»è§’çš„ä¿¡å¿µ\n\n**åæ´¾åŠ¨æœºç±»å‹ï¼š**\n- ç†æƒ³ä¸»ä¹‰æ‰­æ›²ï¼ˆ\"ä¸ºäº†å¤§å±€å¿…é¡»ç‰ºç‰²\"ï¼‰\n- è¿‡å»åˆ›ä¼¤ï¼ˆ\"ä¸–ç•Œä¼¤å®³äº†æˆ‘ï¼Œæˆ‘è¦æŠ¥å¤\"ï¼‰\n- æƒåŠ›æ¸´æœ›ï¼ˆ\"æˆ‘é…å¾—ä¸Šæ›´å¤š\"ï¼‰\n- ä¸ä¸»è§’ç›¸åŒç›®æ ‡ï¼ˆä¸åŒæ–¹æ³•ï¼‰\n\n### é…è§’ï¼ˆSupporting Charactersï¼‰\n\n**é…è§’åŠŸèƒ½ï¼š**\n- **å¯¼å¸ˆå‹** - æŒ‡å¼•ä¸»è§’ï¼Œä¼ é€’ä¿¡æ¯\n- **ç›Ÿå‹å‹** - ååŠ©ä¸»è§’ï¼Œæä¾›æƒ…æ„Ÿæ”¯æŒ\n- **æç¬‘å‹** - ç¼“è§£ç´§å¼ ï¼Œæä¾›å–œå‰§å…ƒç´ \n- **çˆ±æƒ…å‹** - åˆ¶é€ æµªæ¼«çº¿ç´¢ï¼Œå¢åŠ ä¸ªäººåˆ©å®³\n- **å›å¾’å‹** - åˆ¶é€ èƒŒå›å’Œè½¬æŠ˜\n\n**é…è§’åŸåˆ™ï¼š**\n- æ¯ä¸ªé…è§’å¿…é¡»æœ‰æ˜ç¡®ä½œç”¨\n- åˆ é™¤\"åªæ˜¯å­˜åœ¨\"çš„è§’è‰²\n- é¿å…åˆ»æ¿å°è±¡ï¼ˆé™¤éæ˜¯æœ‰æ„ä¸ºä¹‹ï¼‰\n\n---\n\n## äººç‰©æ·±åº¦å¡‘é€ æŠ€å·§\n\n### 1. çŸ›ç›¾æ€§\n\nçœŸå®çš„äººæ˜¯å¤æ‚çš„ï¼Œå……æ»¡çŸ›ç›¾ã€‚\n\n**ç¤ºä¾‹ï¼š**\n- æš´åŠ›çš„é»‘å¸®æˆå‘˜ä½†çˆ±æŠ¤æµæµªçŒ«\n- æ— ç¥è®ºçš„ç‰§å¸ˆ\n- å®³æ€•é»‘æš—çš„ä¾¦æ¢\n- é‡è§†å‹æƒ…ä½†æ€»æ˜¯èƒŒå›æœ‹å‹\n\n### 2. ä¾§é¢æ­ç¤º\n\nä¸è¦ç›´æ¥é™ˆè¿°æ€§æ ¼ï¼Œé€šè¿‡è¡Œä¸ºå±•ç¤ºã€‚\n\n| é”™è¯¯ï¼ˆç›´æ¥é™ˆè¿°ï¼‰ | æ­£ç¡®ï¼ˆä¾§é¢å±•ç¤ºï¼‰ |\n|----------------|----------------|\n| ä»–å¾ˆæ„¤æ€’ | ä»–æç¢æ‰‹ä¸­çš„çº¸æ¯ |\n| å¥¹å¾ˆç´§å¼  | å¥¹åå¤è°ƒæ•´çœ¼é•œä½ç½® |\n| ä»–å¾ˆå‚²æ…¢ | ä»–ä»ä¸ç›´è§†ä¸‹å±çš„çœ¼ç› |\n| å¥¹å¾ˆå–„è‰¯ | å¥¹å·å·å–‚æµæµªç‹—ä¸‰å¹´ |\n\n### 3. å£°éŸ³ç‹¬ç‰¹æ€§\n\næ¯ä¸ªäººè¯´è¯æ–¹å¼ä¸åŒï¼Œå¯¹è¯ä¸­èƒ½åˆ†è¾¨è§’è‰²ã€‚\n\n**åŒºåˆ†è¦ç´ ï¼š**\n- ç”¨è¯é€‰æ‹©ï¼ˆæ­£å¼/ä¿šè¯­/æ–¹è¨€ï¼‰\n- å¥å­é•¿åº¦\n- æ˜¯å¦æ‰“æ–­åˆ«äºº\n- æ˜¯å¦å–œæ¬¢éšå–»\n- æƒ…ç»ªè¡¨è¾¾æ–¹å¼\n\n### 4. åŠ¨æœºåˆç†åŒ–\n\næ¯ä¸ªè§’è‰²è¡Œä¸ºå¿…é¡»æœ‰åˆç†åŠ¨æœºï¼Œå³ä½¿åŠ¨æœºæ‰­æ›²ã€‚\n\n**åæ´¾åŠ¨æœºåˆç†åŒ–ç¤ºä¾‹ï¼š**\n- \"æˆ‘æƒ³æ¯ç­ä¸–ç•Œ\" â†’ ä¹å‘³\n- \"æˆ‘å¤±å»äº†ä¸€åˆ‡ï¼Œä¸–ç•Œå¯¹æˆ‘æ²¡æœ‰æ„ä¹‰\" â†’ å¯ç†è§£ä½†æ‰­æ›²\n- \"äººç±»æ˜¯åœ°çƒçš„ç—…æ¯’ï¼Œæˆ‘å¿…é¡»æ¸…é™¤\" â†’ æœ‰å“²å­¦æ”¯æ’‘\n\n### 5. ç¼ºé™·è‡´å‘½åŒ–\n\nä¸»è§’å¿…é¡»æœ‰ç¼ºé™·ï¼Œç¼ºé™·åœ¨å…³é”®æ—¶åˆ»å¯¼è‡´å¤±è´¥ã€‚\n\n**ç»å…¸ç¼ºé™·æ¨¡å¼ï¼š**\n| ç¼ºé™· | å¯¼è‡´çš„å¤±è´¥ |\n|-----|----------|\n| å‚²æ…¢ | ä½ä¼°å¯¹æ‰‹ï¼Œè½å…¥é™·é˜± |\n| ä¿¡ä»»é—®é¢˜ | æ‹’ç»å¸®åŠ©ï¼Œå­¤ç«‹æ— æ´ |\n| å®Œç¾ä¸»ä¹‰ | æ— æ³•åŠæ—¶è¡ŒåŠ¨ï¼Œé”™å¤±æœºä¼š |\n| å¤ä»‡å¿ƒ | è¢«åˆ©ç”¨ï¼Œå¤±å»ç†æ™º |\n\n---\n\n## äººç‰©å…³ç³»è®¾è®¡\n\n### å…³ç³»ç±»å‹\n\n| å…³ç³» | æˆå‰§æ½œåŠ› | åº”ç”¨ |\n|-----|---------|-----|\n| äº¦æ•Œäº¦å‹ | é«˜ | æ‚¬ç–‘ã€åŠ¨ä½œ |\n| ç¦å¿Œä¹‹çˆ± | é«˜ | è¨€æƒ…ã€æ‚²å‰§ |\n| å¸ˆå¾’å…³ç³» | ä¸­ | æˆé•¿æ•…äº‹ |\n| å…„å¼Ÿç«äº‰ | ä¸­ | å®¶åº­å‰§ |\n| é™Œç”Ÿäººè”ç›Ÿ | ä¸­ | å†’é™©ã€æ‚¬ç–‘ |\n\n### å…³ç³»åŠ¨æ€å˜åŒ–\n\n**å¥½çš„å…³ç³»ä¼šéšæ•…äº‹å‘å±•ï¼š**\n```\nç¬¬ä¸€ç« ï¼šé™Œç”Ÿäºº\nç¬¬ä¸‰ç« ï¼šä¸æƒ…æ„¿çš„ç›Ÿå‹\nç¬¬äº”ç« ï¼šå»ºç«‹ä¿¡ä»»\nç¬¬ä¸ƒç« ï¼šèƒŒå›/è€ƒéªŒ\nç»ˆç« ï¼šçœŸæ­£çš„å‹è°Šï¼ˆæˆ–å†³è£‚ï¼‰\n```\n\n### å…³ç³»æ­ç¤º\n\n**é€æ­¥æ­ç¤ºå…³ç³»æ·±åº¦ï¼š**\n- è¡¨å±‚ï¼šè¡¨é¢äº’åŠ¨\n- ä¸­å±‚ï¼šå…±åŒç»å†\n- æ·±å±‚ï¼šçœŸå®æ„Ÿå—/ç§˜å¯†\n\n---\n\n## äººç‰©ä¸€è‡´æ€§æ£€æŸ¥\n\nè§’è‰²è¡Œä¸ºå¿…é¡»ç¬¦åˆå·²å»ºç«‹çš„æ€§æ ¼ã€‚\n\n**æ£€æŸ¥é—®é¢˜ï¼š**\n- è¿™ä»¶äº‹ç¬¦åˆä»–çš„æ ¸å¿ƒä»·å€¼è§‚å—ï¼Ÿ\n- ä»¥ä»–çš„èƒŒæ™¯ï¼Œä¼šæœ‰è¿™æ ·çš„ååº”å—ï¼Ÿ\n- ä»–çš„ææƒ§ä¼šå¦‚ä½•å½±å“è¿™ä¸ªå†³å®šï¼Ÿ\n- ä»–çš„ç¼ºé™·ä¼šå¯¼è‡´ä»–çŠ¯ä»€ä¹ˆé”™ï¼Ÿ\n\n**ä¾‹å¤–å¤„ç†ï¼š**\n- å¦‚æœè§’è‰²\"ä¸ç¬¦åˆæ€§æ ¼\"è¡Œäº‹ï¼Œå¿…é¡»æœ‰åŸå› \n- è§£é‡Šåº”è¯¥åœ¨ç›¸åŒ/ä¸‹ä¸€ç« æä¾›\n- å¯ä»¥æ˜¯æˆé•¿çš„æ ‡å¿—ï¼ˆè§’è‰²å…‹æœç¼ºé™·ï¼‰\n\n---\n\n## äººç‰©å‡ºåœºè®¾è®¡\n\n### é¦–æ¬¡å‡ºåœºåŸåˆ™\n\n**æœ‰æ•ˆçš„å‡ºåœºæ–¹å¼ï¼š**\n- **è¡ŒåŠ¨ä¸­** - å±•ç¤ºèƒ½åŠ›æˆ–æ€§æ ¼\n- **å†²çªä¸­** - ç«‹å³å»ºç«‹å…³ç³»/å¯¹ç«‹\n- **è¯¯è§£ä¸­** - å»ºç«‹æ‚¬å¿µ\n\n**é¿å…ï¼š**\n- é•œå­è‡ªç…§æå†™å¤–è²Œ\n- å§“å+å¹´é¾„+èŒä¸šçš„ç®€å†å¼ä»‹ç»\n- æ— æ„ä¹‰çš„æ—¥å¸¸æ´»åŠ¨\n\n### å‡ºåœºç¤ºä¾‹å¯¹æ¯”\n\n| æ— æ•ˆå‡ºåœº | æœ‰æ•ˆå‡ºåœº |\n|---------|---------|\n| ææ˜ï¼Œ28å²ï¼Œæ˜¯ä¸€åä¾¦æ¢ã€‚ä»–èµ°è¿›åŠå…¬å®¤ã€‚| ææ˜è·¨è¿‡è­¦æˆ’çº¿ï¼Œè­¦å®˜è¯•å›¾æ‹¦ä½ä»–ã€‚\"å¸‚åˆ‘è­¦é˜Ÿï¼Œææ˜ã€‚\"ä»–äº®å‡ºè¯ä»¶ï¼Œå¾„ç›´èµ°å‘å°¸ä½“ã€‚|\n| ç¾ä¸½çš„å¥³å­©ååœ¨çª—è¾¹ï¼Œå¥¹å«å°çº¢ã€‚| å¥¹å·²ç»ä¸‰å¤©æ²¡ç¡äº†ï¼Œå’–å•¡æ¯é‡Œçš„æ¶²ä½“åœ¨é¢¤æŠ–ã€‚å½“é—¨é“ƒå“èµ·æ—¶ï¼Œå¥¹å‡ ä¹æŠŠæ¯å­æ‘”åœ¨åœ°ä¸Šã€‚|\n",
        "skills/chinese-novelist/references/character-template.md": "# äººç‰©æ¡£æ¡ˆ\n\n## ä¸»è§’\n\n### [è§’è‰²ä¸€å§“å]\n- **å¹´é¾„/èŒä¸š**ï¼š\n- **å¤–è²Œç‰¹å¾**ï¼š\n- **æ€§æ ¼æ ¸å¿ƒ**ï¼š\n- **æ ¸å¿ƒä»·å€¼è§‚**ï¼š\n- **æœ€å¤§ææƒ§**ï¼š\n- **è‡´å‘½ç¼ºé™·**ï¼š\n- **å†…å¿ƒæ¸´æœ›**ï¼š\n- **èƒŒæ™¯æ•…äº‹**ï¼š\n- **MBTI:**\n\n### [è§’è‰²äºŒå§“å]\n\n......\n\n\n\n## åæ´¾\n\n### [è§’è‰²å§“å]\n- [åŒä¸»è§’æ ¼å¼]\n\n## é…è§’\n\n### [è§’è‰²å§“å]\n- [ç®€åŒ–æ ¼å¼]\n",
        "skills/chinese-novelist/references/consistency.md": "# è¿è´¯æ€§ä¿è¯æœºåˆ¶\n\nä¸ºç¡®ä¿é•¿æ—¶é—´åˆ›ä½œçš„æ•…äº‹è¿è´¯æ€§ï¼š\n\n## å†™å‰å¿…è¯»\n\næ¯æ¬¡å¼€å§‹å†™æ–°ç« èŠ‚å‰ï¼š\n1. é˜…è¯» `00-å¤§çº².md` ä¸­æ‰€æœ‰å·²å®Œæˆç« èŠ‚çš„æ‘˜è¦\n2. è¯»å–ä¸Šä¸€ç« æ–‡ä»¶ï¼Œäº†è§£å½“å‰æ‚¬å¿µ\n3. æ£€æŸ¥äººç‰©çŠ¶æ€ï¼ˆä½ç½®ã€æƒ…ç»ªã€å…³ç³»ï¼‰\n\n## ç©¿é’ˆå¼•çº¿\n\nåœ¨æ–°ç« èŠ‚ä¸­ï¼š\n- å‘¼åº”å‰æ–‡åŸ‹ä¸‹çš„ä¼ç¬”å’Œçº¿ç´¢\n- æåŠä¹‹å‰å‘ç”Ÿçš„äº‹ä»¶ï¼ˆè‡ªç„¶èå…¥ï¼‰\n- è®©äººç‰©è¡Œä¸ºä¸ä¹‹å‰ä¿æŒä¸€è‡´\n\n## äººç‰©çŠ¶æ€è·Ÿè¸ª\n\næ³¨æ„äººç‰©åœ¨å„ç« èŠ‚ä¸­çš„å˜åŒ–å’Œæˆé•¿ï¼š\n- ä½ç½®å˜åŒ–ï¼ˆäººåœ¨å“ªé‡Œï¼‰\n- æƒ…ç»ªçŠ¶æ€ï¼ˆå½“å‰å¿ƒæƒ…ï¼‰\n- å…³ç³»å˜åŒ–ï¼ˆä¸å…¶ä»–è§’è‰²å…³ç³»ï¼‰\n- èƒ½åŠ›å˜åŒ–ï¼ˆè·å¾—æ–°æŠ€èƒ½/ä¿¡æ¯ï¼‰\n\n## æ‚¬å¿µçº¿å»¶ç»­\n\nç¡®ä¿ä¸»çº¿æ‚¬å¿µé€æ­¥æ¨è¿›ï¼š\n- æ¯ç« è‡³å°‘å›åº”ä¸€ä¸ªæ—§æ‚¬å¿µ\n- æå‡ºæ–°æ‚¬å¿µæˆ–å‡çº§ç°æœ‰æ‚¬å¿µ\n- ä¸è¦é—å¿˜ä»»ä½•æœªè§£çš„æ‚¬å¿µ\n\n## ä¸€è‡´æ€§æ£€æŸ¥æ¸…å•\n\n- [ ] äººç‰©è¡Œä¸ºç¬¦åˆå…¶æ€§æ ¼è®¾å®š\n- [ ] å‰åä¼ç¬”æœ‰å‘¼åº”ï¼Œé€»è¾‘é—­ç¯\n- [ ] é«˜æ½®ä½è°·åˆ†å¸ƒåˆç†ï¼ŒèŠ‚å¥æ°å½“\n- [ ] æ—¶é—´çº¿è¿è´¯ï¼ˆæ²¡æœ‰æ—¶é—´è·³è·ƒé”™è¯¯ï¼‰\n- [ ] åœºæ™¯è½¬æ¢è‡ªç„¶ï¼ˆæ²¡æœ‰å‡­ç©ºå‡ºç°ï¼‰\n",
        "skills/chinese-novelist/references/content-expansion.md": "# å†…å®¹æ‰©å……æŠ€å·§\n\nå½“ç« èŠ‚å†…å®¹ä¸è¶³æ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹æŠ€å·§è‡ªç„¶æ‰©å……ã€‚\n\n## 1. åœºæ™¯ç»†èŠ‚æå†™\n\nä¸è¦åªè¯´\"ä»–èµ°è¿›æˆ¿é—´\"ï¼Œæå†™ï¼š\n- æˆ¿é—´çš„å¸ƒå±€ã€å…‰çº¿ã€æ°”å‘³\n- ç‰©å“çš„ç»†èŠ‚å’Œè´¨æ„Ÿ\n- ç¯å¢ƒå¯¹äººç‰©çš„å½±å“\n- äººç‰©åœ¨ç©ºé—´ä¸­çš„ç§»åŠ¨\n\n## 2. äººç‰©å†…å¿ƒæ´»åŠ¨\n\nå±•ç¤ºè€Œéè®²è¿°å†…å¿ƒä¸–ç•Œï¼š\n- è§’è‰²çš„çŠ¹è±«å’Œçº ç»“\n- è¿‡å»è®°å¿†çš„é—ªå›ï¼ˆ1-2æ®µï¼‰\n- å¯¹æœªæ¥çš„æ‹…å¿§å’ŒæœŸå¾…\n- é“å¾·é€‰æ‹©çš„å†…å¿ƒè¾©è®º\n\n## 3. å¯¹è¯æ‰©å±•\n\nä¸è¦åªæ¨è¿›å‰§æƒ…ï¼Œè®©å¯¹è¯ï¼š\n- å±•ç°äººç‰©æ€§æ ¼å’Œè¯´è¯æ–¹å¼\n- åŒ…å«æ½œå°è¯å’Œæš—ç¤º\n- æœ‰æ¥å›äº¤é”‹å’Œè¯•æ¢\n- å¶å°”è·‘é¢˜å†æ‹‰å›ï¼ˆæ›´çœŸå®ï¼‰\n\n## 4. æ„Ÿå®˜ä½“éªŒ\n\nè°ƒåŠ¨äº”æ„Ÿæå†™ï¼š\n- è§†è§‰ï¼šé¢œè‰²ã€å…‰å½±ã€å½¢çŠ¶\n- å¬è§‰ï¼šå£°éŸ³ã€éŸ³ä¹ã€æ²‰é»˜\n- è§¦è§‰ï¼šæ¸©åº¦ã€è´¨æ„Ÿã€ç–¼ç—›\n- å—…è§‰ï¼šæ°”å‘³ã€é¦™å‘³ã€è…è‡­\n- å‘³è§‰ï¼šé£Ÿç‰©ã€é¥®æ–™ã€è¡€è…¥å‘³\n\n## 5. æ¬¡è¦æƒ…èŠ‚çº¿\n\nåœ¨ä¸»å‰§æƒ…ä¸­ç©¿æ’ï¼š\n- é…è§’çš„å°æ•…äº‹\n- æš—çº¿çš„å‘å±•\n- ä¼ç¬”çš„åŸ‹è®¾\n- äººç‰©å…³ç³»çš„å¾®å¦™å˜åŒ–\n\n## 6. èŠ‚å¥æ”¾æ…¢\n\nå…³é”®æ—¶åˆ»æ…¢ä¸‹æ¥æå†™ï¼š\n- åŠ¨ä½œåœºæ™¯çš„åˆ†è§£\n- æƒ…æ„Ÿè½¬å˜çš„è¿‡ç¨‹\n- å‘ç°çœŸç›¸çš„æ—¶åˆ»\n- ç´§å¼ å¯¹å³™çš„å»¶å±•\n\n## 7. ç¯å¢ƒçƒ˜æ‰˜\n\nç”¨ç¯å¢ƒåæ˜ æƒ…ç»ªï¼š\n- å¤©æ°”å’Œæ°›å›´\n- ç¤¾ä¼šç¯å¢ƒèƒŒæ™¯\n- æ–‡åŒ–ä¹ ä¿—ç»†èŠ‚\n- æ—¶ä»£ç‰¹å¾å±•ç°\n\n## æ‰©å……åŸåˆ™\n\n- **è‡ªç„¶èå…¥** - æ‰©å……å†…å®¹è¦æœåŠ¡äºæ•…äº‹ï¼Œä¸è¦æ³¨æ°´\n- **ä¿æŒå¼ åŠ›** - å³ä½¿æ‰©å……åœºæ™¯ä¹Ÿä¸èƒ½å¤±å»å†²çª\n- **æ¨è¿›ä¸»çº¿** - æ‰€æœ‰æ‰©å……æœ€ç»ˆéƒ½è¦æŒ‡å‘æ ¸å¿ƒå‰§æƒ…\n",
        "skills/chinese-novelist/references/dialogue-writing.md": "# å¯¹è¯å†™ä½œè§„èŒƒ\n\nå¥½å¯¹è¯æ˜¯æ­ç¤ºäººç‰©ã€æ¨åŠ¨æƒ…èŠ‚ã€åˆ¶é€ å†²çªçš„æœ‰åŠ›å·¥å…·ã€‚\n\n## å¯¹è¯æ ¸å¿ƒåŸåˆ™\n\n### 1. å¯¹è¯å¿…é¡»æœ‰ç›®çš„\n\næ¯å¥å¯¹è¯åº”è¯¥è‡³å°‘å®Œæˆä»¥ä¸‹ä¹‹ä¸€ï¼š\n\n| ç›®çš„ | ç¤ºä¾‹ |\n|-----|------|\n| **æ¨åŠ¨æƒ…èŠ‚** | \"æˆ‘æ‰¾åˆ°å‡¶å™¨äº†ï¼Œåœ¨æ²³è¾¹çš„è‰ä¸›é‡Œã€‚\" |\n| **æ­ç¤ºäººç‰©** | \"æˆ‘ä¸ä¿¡ä»»è­¦å¯Ÿï¼Œä»–ä»¬ä»æ¥ä¸å¸®æˆ‘è¿™æ ·çš„äººã€‚\" |\n| **åˆ¶é€ å†²çª** | \"ä½ éª—äº†æˆ‘ã€‚ä½ ä»å¤´åˆ°å°¾éƒ½åœ¨éª—æˆ‘ã€‚\" |\n| **ä¼ è¾¾ä¿¡æ¯** | \"ç‚¸å¼¹å°†åœ¨ä¸‰ç‚¹å¼•çˆ†ã€‚\" |\n| **è¡¨è¾¾æƒ…æ„Ÿ** | \"æˆ‘...æˆ‘ä¸çŸ¥é“è¯¥è¯´ä»€ä¹ˆã€‚\" |\n| **åˆ¶é€ æ‚¬å¿µ** | \"ä½ çŸ¥é“é‚£å¤©æ™šä¸ŠçœŸæ­£å‘ç”Ÿäº†ä»€ä¹ˆå—ï¼Ÿ\" |\n\n**æ— æ•ˆå¯¹è¯ï¼š**\n> \"ä½ å¥½ã€‚\"\n> \"ä½ å¥½ã€‚\"\n> \"åƒäº†å—ï¼Ÿ\"\n> \"åƒäº†ã€‚\"\n> \"å“¦ï¼Œé‚£å°±å¥½ã€‚\"\n\n### 2. å¯¹è¯åº”è¯¥ç®€æ´\n\näººä»¬è¯´è¯ä¸å†™è®ºæ–‡ã€‚åˆ é™¤å¤šä½™çš„è¯ã€‚\n\n| å•°å—¦ | ç®€æ´ |\n|-----|------|\n| \"æˆ‘æƒ³å‘Šè¯‰ä½ çš„æ˜¯ï¼Œæˆ‘è®¤ä¸ºæˆ‘ä»¬åº”è¯¥ç«‹åˆ»ç¦»å¼€è¿™é‡Œã€‚\" | \"æˆ‘ä»¬å¾—é©¬ä¸Šèµ°ã€‚\" |\n| \"æˆ‘éå¸¸æŠ±æ­‰ï¼Œä½†æˆ‘çœŸçš„ä¸çŸ¥é“ä½ åˆšæ‰è¯´çš„é‚£ä»¶äº‹çš„ç­”æ¡ˆã€‚\" | \"æˆ‘ä¸çŸ¥é“ã€‚\" |\n| \"å¦‚æœä½ ä¸ä»‹æ„çš„è¯ï¼Œæˆ‘èƒ½ä¸èƒ½è¯·ä½ å¸®æˆ‘æŠŠé‚£ä¸ªä¸œè¥¿é€’ç»™æˆ‘ï¼Ÿ\" | \"é€’ç»™æˆ‘é‚£ä¸ªã€‚\" |\n\n### 3. çœŸå®çš„äººä¸ä¼šå®Œæ•´è¡¨è¾¾\n\nçœŸå®å¯¹è¯å……æ»¡ï¼š\n- æ‰“æ–­\n- è¿Ÿç–‘\n- è¯é¢˜è½¬ç§»\n- è¯æ²¡è¯´å®Œ\n- æš—ç¤ºè€Œéæ˜è¯´\n\n**ç¤ºä¾‹ï¼š**\n> \"æˆ‘æœ¬æ¥æƒ³å‘Šè¯‰ä½ ï¼Œä½†æ˜¯â€”â€”\"\n> \"ä½†æ˜¯ä»€ä¹ˆï¼Ÿ\"\n> \"ç®—äº†ï¼Œæ²¡ä»€ä¹ˆã€‚\"\n> \"ä¸ï¼Œä½ è¯´ã€‚\"\n> \"çœŸçš„æ²¡ä»€ä¹ˆã€‚\"\n\n---\n\n## å¯¹è¯æ ¼å¼è§„èŒƒ\n\n### ä¸­æ–‡å¯¹è¯æ ‡ç‚¹\n\n**åŸºç¡€æ ¼å¼ï¼š**\n```\n\"è¯´è¯å†…å®¹ï¼Œ\" ä»–è¯´ã€‚\n\"è¯´è¯å†…å®¹ï¼Ÿ\" å¥¹é—®ã€‚\n\"è¯´è¯å†…å®¹ï¼\" ä»–å¤§å–Šã€‚\n```\n\n**å¤šè¡Œå¯¹è¯ï¼š**\n```\n\"ç¬¬ä¸€å¥è¯ï¼Œ\"ä»–è¯´ï¼Œ\"ç¬¬äºŒå¥è¯ã€‚\"\n\n\"ç¬¬ä¸€å¥è¯ã€‚\nç¬¬äºŒå¥è¯ï¼Œ\"ä»–è¯´ï¼Œ\"ç¬¬ä¸‰å¥è¯ã€‚\"\n```\n\n**å¯¹è¯åŠ¨ä½œï¼š**\n```\n\"è¯´è¯å†…å®¹ã€‚\" ä»–åšäº†åŠ¨ä½œã€‚\nä»–åšäº†åŠ¨ä½œã€‚\"è¯´è¯å†…å®¹ã€‚\"\n```\n\n### å¯¹è¯æ ‡ç­¾ä½¿ç”¨\n\n**è§„åˆ™ï¼š**\n- èƒ½è¾¨è¯†è¯´è¯äººæ—¶ï¼Œçœç•¥æ ‡ç­¾\n- ä½¿ç”¨\"è¯´\"\"é—®\"ç­‰ä¸­æ€§æ ‡ç­¾\n- é¿å…è¿‡åº¦ä½¿ç”¨å‰¯è¯ä¿®é¥°\n\n| è¿‡åº¦ä½¿ç”¨ | æ”¹è¿›å |\n|---------|--------|\n| \"ä½ éª—äº†æˆ‘ï¼Œ\"ä»–æ„¤æ€’åœ°è¯´ã€‚| \"ä½ éª—äº†æˆ‘ã€‚\"ä»–çš„å£°éŸ³åœ¨é¢¤æŠ–ã€‚ |\n| \"å¥½çš„ï¼Œ\"å¥¹é«˜å…´åœ°åŒæ„é“ã€‚| å¥¹çœ¼ç›äº®äº†ã€‚\"å¥½çš„ã€‚\" |\n| \"æˆ‘ä¸çŸ¥é“ï¼Œ\"ä»–æ‚²ä¼¤åœ°å›ç­”ã€‚| ä»–ä½ä¸‹å¤´ã€‚\"æˆ‘ä¸çŸ¥é“ã€‚\" |\n\n**æ ‡ç­¾ä½ç½®ï¼š**\n- å¯¹è¯å‰ï¼š[æ ‡ç­¾]\"å¯¹è¯ã€‚\"\n- å¯¹è¯åï¼š\"å¯¹è¯ã€‚\"[æ ‡ç­¾]\n- å¯¹è¯ä¸­æ–­ï¼š\"å¯¹è¯ï¼Œ\"[æ ‡ç­¾]\"å¯¹è¯ã€‚\"\n\n### æ®µè½åˆ’åˆ†\n\n**è§„åˆ™ï¼š** æ¯ä¸ªè¯´è¯äººçš„å¯¹è¯å¼€å§‹æ–°æ®µè½ã€‚\n\n```\næ­£ç¡®ï¼š\n\"ç¬¬ä¸€å¥ï¼Œ\"ç”²è¯´ã€‚\n\"ç¬¬äºŒå¥ï¼Œ\"ä¹™å›ç­”ã€‚\n\"ç¬¬ä¸‰å¥ã€‚\"ç”²ç‚¹å¤´ã€‚\n\né”™è¯¯ï¼š\n\"ç¬¬ä¸€å¥ï¼Œ\"ç”²è¯´ã€‚\"ç¬¬äºŒå¥ï¼Œ\"ä¹™å›ç­”ã€‚\"ç¬¬ä¸‰å¥ã€‚\"ç”²ç‚¹å¤´ã€‚\n```\n\n---\n\n## å¯¹è¯å£°éŸ³åŒºåˆ†\n\næ¯ä¸ªè§’è‰²è¯´è¯æ–¹å¼åº”è¯¥ä¸åŒã€‚\n\n### åŒºåˆ†ç»´åº¦\n\n| ç»´åº¦ | ç¤ºä¾‹ |\n|-----|------|\n| **ç”¨è¯** | æ­£å¼/ä¿šè¯­/æ–¹è¨€/ä¸“ä¸šæœ¯è¯­ |\n| **å¥å¼** | é•¿å¥/çŸ­å¥/ç ´ç¢å¥ |\n| **åœé¡¿** | æµç•…/è¿Ÿç–‘/é¢‘ç¹æ‰“æ–­ |\n| **è¯­æ°”** | æ¸©å’Œ/æ¿€çƒˆ/å†·å˜²çƒ­è®½/å¹³æ·¡ |\n| **ä¹ æƒ¯è¯­** | ç‰¹å®šå£å¤´ç¦…æˆ–ç”¨è¯ä¹ æƒ¯ |\n\n### è§’è‰²å£°éŸ³ç¤ºä¾‹\n\n**æ•™æˆå‹è§’è‰²ï¼š**\n> \"ä»ç†è®ºè§’åº¦åˆ†æï¼Œè¿™ä¸ªå‡è®¾å­˜åœ¨ä¸‰ä¸ªä¸»è¦ç¼ºé™·ã€‚é¦–å…ˆï¼Œæ•°æ®æ ·æœ¬ä¸è¶³ï¼›å…¶æ¬¡ï¼Œå®éªŒæ¡ä»¶æœªå—æ§åˆ¶ï¼›æœ€åï¼Œç»“è®ºè¿‡äºæ¿€è¿›ã€‚\"\n\n**è¡—å¤´æ··æ··å‹è§’è‰²ï¼š**\n> \"æ‰¯æ·¡ã€‚é‚£å¸®äººå°±æ˜¯åœ¨æ”¾å±ï¼Œæƒ³è’™å’±ä»¬å‘¢ã€‚æˆ‘å‘Šè¯‰ä½ ï¼Œè¿™äº‹å„¿æ²¡é‚£ä¹ˆç®€å•ã€‚\"\n\n**å®³ç¾å†…å‘å‹è§’è‰²ï¼š**\n> \"æˆ‘...æˆ‘æ˜¯è¯´ï¼Œå¦‚æœ...å¦‚æœä½ ä¸ä»‹æ„çš„è¯...é‚£ä¸ª...\"\n\n**å‚²æ…¢è‡ªå¤§å‹è§’è‰²ï¼š**\n> \"è®©æˆ‘æ¥å‘Šè¯‰ä½ ä»€ä¹ˆå«ä¸“ä¸šã€‚ä½ ä»¬è¿™äº›ä¸šä½™äººå£«æ ¹æœ¬ä¸æ‡‚ã€‚\"\n\n---\n\n## æ½œå°è¯ï¼ˆSubtextï¼‰\n\nå¥½çš„å¯¹è¯ï¼ŒçœŸæ­£å«ä¹‰åœ¨è¡¨é¢ä¹‹ä¸‹ã€‚\n\n### ç›´æ¥ vs æ½œå°è¯\n\n| ç›´æ¥ï¼ˆä¹å‘³ï¼‰ | æ½œå°è¯ï¼ˆæœ‰è¶£ï¼‰ |\n|-------------|---------------|\n| \"æˆ‘å¾ˆç”Ÿæ°”ã€‚\" | \"æ²¡äº‹ã€‚æˆ‘æŒºå¥½çš„ã€‚çœŸçš„ã€‚\" |\n| \"æˆ‘å–œæ¬¢ä½ ã€‚\" | \"ä½ ä»Šå¤©çœ‹èµ·æ¥...ä¸é”™ã€‚\" |\n| \"æˆ‘ä¸ä¿¡ä»»ä½ ã€‚\" | \"è°¢è°¢ä½ å‘Šè¯‰æˆ‘ã€‚æˆ‘ä¼šè®°ä½çš„ã€‚\" |\n| \"æˆ‘æƒ³ç¦»å¼€ã€‚\" | \"è¿™ä¸ªåœ°æ–¹ç©ºæ°”ä¸å¤ªå¥½ã€‚\" |\n\n### æ½œå°è¯æŠ€å·§\n\n**1. è¯é¢˜è½¬ç§»**\n```\n\"ä½ çˆ±æˆ‘å—ï¼Ÿ\"\n\"ä½ çœ‹äº†å¤©æ°”é¢„æŠ¥å—ï¼Ÿæ˜å¤©æœ‰é›¨ã€‚\"\n```\n\n**2. åé—®è€Œéå›ç­”**\n```\n\"ä½ æ€äº†ä»–å—ï¼Ÿ\"\n\"ä½ è§‰å¾—åƒæˆ‘è¿™æ ·çš„äººä¼šåšé‚£ç§äº‹ï¼Ÿ\"\n```\n\n**3. è°ˆè®ºå…¶ä»–äº‹ç‰©**\n```\n\"ä½ æƒ³æˆ‘å—ï¼Ÿ\"\n\"æˆ‘å¦ˆæ˜¨å¤©æ‰“ç”µè¯æ¥äº†ã€‚\"\n```\n\n**4. æ²‰é»˜å’ŒåŠ¨ä½œ**\n```\n\"ä½ æ„¿æ„åŸè°…æˆ‘å—ï¼Ÿ\"\nå¥¹ç»§ç»­çœ‹æ‚å¿—ï¼Œç¿»äº†ä¸€é¡µã€‚\n```\n\n---\n\n## å¯¹è¯ä¸åŠ¨ä½œç»“åˆ\n\nå¯¹è¯ä¸è‚¢ä½“è¯­è¨€é…åˆï¼Œå¢å¼ºè¡¨ç°åŠ›ã€‚\n\n### åŒæ­¥åŸåˆ™\n\nåŠ¨ä½œä¸å¯¹è¯ä¸€è‡´æˆ–çŸ›ç›¾ï¼Œéƒ½æœ‰æˆå‰§æ•ˆæœã€‚\n\n**ä¸€è‡´ï¼ˆå¢å¼ºï¼‰ï¼š**\n> \"æˆ‘çˆ±ä½ ã€‚\"å¥¹ç´§ç´§æŠ±ä½ä»–ï¼Œçœ¼æ³ªæµä¸‹æ¥ã€‚\n\n**çŸ›ç›¾ï¼ˆæ­ç¤ºçœŸç›¸ï¼‰ï¼š**\n> \"æˆ‘å®Œå…¨æ”¯æŒä½ ã€‚\"ä»–ç›®å…‰çœ‹å‘åˆ«å¤„ï¼Œæ‰‹åœ¨å£è¢‹é‡Œæ¡ç´§æ‹³å¤´ã€‚\n\n### åŠ¨ä½œæ‰“æ–­\n\nåŠ¨ä½œæ’å…¥å¯ä»¥æ§åˆ¶èŠ‚å¥ã€‚\n\n```\n\"æˆ‘æœ¬æ¥æƒ³å‘Šè¯‰ä½ ï¼Œ\"ä»–åœä¸‹è„šæ­¥ï¼Œè½¬è¿‡èº«ï¼Œ\"ä½†æˆ‘æƒ³ä½ å·²ç»çŸ¥é“äº†ã€‚\"\n```\n\n### åŠ¨ä½œæ›¿ä»£æ ‡ç­¾\n\nç”¨åŠ¨ä½œæ›¿ä»£\"ä»–è¯´\"ã€‚\n\n```\n\"ä½ åœ¨æ’’è°ã€‚\"å¥¹æ‹æ¡ˆè€Œèµ·ã€‚\n\"åä¸‹ã€‚\"ä»–å¤´ä¹Ÿä¸æŠ¬ã€‚\n```\n\n---\n\n## å¯¹è¯åœºæ™¯ç±»å‹\n\n### äº‰åµåœºæ™¯\n\n**ç‰¹å¾ï¼š**\n- çŸ­å¥\n- æ‰“æ–­\n- é‡å¤å¼ºè°ƒ\n- æƒ…ç»ªå‡çº§\n\n**ç¤ºä¾‹ï¼š**\n> \"ä½ ç­”åº”è¿‡çš„ï¼\"\n> \"æƒ…å†µå˜äº†ï¼\"\n> \"é‚£æ˜¯ä½ çš„å€Ÿå£ï¼\"\n> \"ä½ æ ¹æœ¬ä¸æ‡‚ï¼\"\n> \"æˆ‘å½“ç„¶ä¸æ‡‚ï¼ä½ ä»€ä¹ˆéƒ½ä¸å‘Šè¯‰æˆ‘ï¼\"\n\n### å‘Šç™½åœºæ™¯\n\n**ç‰¹å¾ï¼š**\n- è¿Ÿç–‘\n- åœé¡¿\n- å¯»æ‰¾è¯è¯­\n- çœŸè¯šæˆ–å°´å°¬\n\n**ç¤ºä¾‹ï¼š**\n> \"æˆ‘...æˆ‘æƒ³è¯´...è¿™äº›å¹´ï¼Œæˆ‘ä¸€ç›´åœ¨æƒ³...å¦‚æœæˆ‘ä»¬...\"\n> å¥¹ä½ä¸‹å¤´ï¼Œå£°éŸ³å˜å°ã€‚\n> \"å¦‚æœæˆ‘ä»¬ä»€ä¹ˆï¼Ÿ\"\n> \"å¦‚æœæˆ‘ä»¬æ—©ä¸€ç‚¹ç›¸é‡ã€‚\"\n\n### å®¡è®¯åœºæ™¯\n\n**ç‰¹å¾ï¼š**\n- æé—®æ§åˆ¶\n- ä¿¡æ¯ä¸å¯¹ç§°\n- å‹åŠ›å»ºç«‹\n- æ“çºµå¯¹è¯\n\n**ç¤ºä¾‹ï¼š**\n> \"é‚£å¤©æ™šä¸Šä½ åœ¨å“ªé‡Œï¼Ÿ\"\n> \"åœ¨å®¶ã€‚\"\n> \"æœ‰äººèƒ½è¯æ˜å—ï¼Ÿ\"\n> \"...æ²¡æœ‰ã€‚\"\n> \"ä½ æ˜¯ä¸€ä¸ªäººï¼Ÿ\"\n> \"æ˜¯çš„ã€‚\"\n> \"æ•´ä¸ªæ™šä¸Šï¼Ÿ\"\n\n### è°ƒæƒ…åœºæ™¯\n\n**ç‰¹å¾ï¼š**\n- åŒå…³è¯­\n- è¯•æ¢\n- èº«ä½“æ¥è¿‘\n- æš—ç¤º\n\n**ç¤ºä¾‹ï¼š**\n> \"ä½ ä»Šå¤©å¾ˆæ¼‚äº®ã€‚\"\n> \"åªæ˜¯ä»Šå¤©ï¼Ÿ\"\n> \"å—¯...ä»Šå¤©ç‰¹åˆ«æ¼‚äº®ã€‚\"\n> \"é‚£æˆ‘æ˜å¤©è¯¥æ‹…å¿ƒäº†ï¼Ÿ\"\n> \"æ˜å¤©...æ˜å¤©å†çœ‹çœ‹ã€‚\"\n\n---\n\n## å¯¹è¯å¸¸è§é—®é¢˜\n\n### é¿å…\n\n1. **ä¿¡æ¯å€¾å€’** - è§’è‰²äº’ç›¸è¯´å·²çŸ¥ä¿¡æ¯\n   > é”™è¯¯ï¼š\"æ­£å¦‚ä½ æ‰€çŸ¥ï¼Œæˆ‘ä»¬çš„å…¬å¸æˆç«‹äº1995å¹´...\"\n   > æ­£ç¡®ï¼šé€šè¿‡æƒ…èŠ‚è‡ªç„¶æ­ç¤ºä¿¡æ¯\n\n2. **æ‰€æœ‰äººè¯´è¯ä¸€æ ·** - æ— æ³•åŒºåˆ†è§’è‰²\n   > è§£å†³ï¼šç»™æ¯ä¸ªè§’è‰²ç‹¬ç‰¹çš„è¯´è¯æ–¹å¼\n\n3. **è¿‡åº¦ç¤¼è²Œ** - çœŸå®å¯¹è¯æ›´ç²—ç³™\n   > é”™è¯¯ï¼š\"æˆ‘å¾ˆæŠ±æ­‰æ‰“æ‰°ä½ ï¼Œèƒ½å¦è¯·ä½ ...\"\n   > æ­£ç¡®ï¼š\"å–‚ã€‚å¸®æˆ‘ä¸ªå¿™ã€‚\"\n\n4. **æ— æ„ä¹‰çš„é—²èŠ** - é™¤éæœ‰ç‰¹æ®Šç›®çš„\n   > åˆ é™¤å¤©æ°”ã€åƒé¥­ç­‰æ— å…³å¯¹è¯ï¼Œé™¤éæ­ç¤ºäººç‰©/æ¨åŠ¨æƒ…èŠ‚\n\n5. **è¯´æ•™** - è§’è‰²å‘è¡¨é•¿ç¯‡å“²å­¦è®ºè¿°\n   > æ”¹ä¸ºé€šè¿‡å†²çªå’Œè¡ŒåŠ¨å±•ç¤ºè§‚ç‚¹\n\n---\n\n## å¯¹è¯ç»ƒä¹ è‡ªæŸ¥\n\nå†™å®Œå¯¹è¯åæ£€æŸ¥ï¼š\n\n- [ ] æ¯å¥å¯¹è¯æ˜¯å¦æœ‰ç›®çš„ï¼Ÿ\n- [ ] åˆ é™¤åæƒ…èŠ‚æ˜¯å¦å—å½±å“ï¼Ÿ\n- [ ] èƒ½å¦è¾¨è¯†è¯´è¯äººï¼ˆä¸çœ‹æ ‡ç­¾ï¼‰ï¼Ÿ\n- [ ] æ˜¯å¦æœ‰æ½œå°è¯ï¼Ÿ\n- [ ] èŠ‚å¥æ˜¯å¦åˆé€‚ï¼ˆå¿«/æ…¢ï¼‰ï¼Ÿ\n- [ ] æ˜¯å¦ç¬¦åˆäººç‰©æ€§æ ¼ï¼Ÿ\n- [ ] æ ‡ç­¾ä½¿ç”¨æ˜¯å¦æ­£ç¡®ï¼Ÿ\n",
        "skills/chinese-novelist/references/hook-techniques.md": "# æ‚¬å¿µè®¾ç½®æŠ€å·§\n\næ‚¬å¿µæ˜¯è®©è¯»è€…ç»§ç»­é˜…è¯»çš„å…³é”®ã€‚æ¯ç« ç»“å°¾å¿…é¡»è®¾ç½®æœ‰æ•ˆçš„é’©å­ã€‚\n\n## åç§ç»å…¸æ‚¬å¿µé’©å­\n\n### 1. çªç„¶æ­ç¤º\n\nåœ¨ç« èŠ‚ç»“å°¾çªç„¶æ­ç¤ºä¸€ä¸ªæ”¹å˜ä¸€åˆ‡çš„ä¿¡æ¯ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> è­¦å®˜çœ‹ç€æ­»è€…çš„æ‰‹æœºï¼Œæœ€åä¸€æ¡çŸ­ä¿¡æ¥è‡ªä¸€ä¸ªä»–è®¤è¯†çš„äººâ€”â€”ä»–è‡ªå·±ä¸‰å¤©å‰å‘å‡ºçš„å·ç ã€‚\n\n**å…³é”®è¦ç´ ï¼š**\n- ä¿¡æ¯å‡ºä¹æ„æ–™\n- æ”¹å˜ç°çŠ¶ç†è§£\n- ç•™ä¸‹\"ä¸ºä»€ä¹ˆ\"çš„ç–‘é—®\n\n### 2. ç´§æ€¥å±æœº\n\nè§’è‰²é¢ä¸´è¿«åœ¨çœ‰ç«çš„å±é™©ï¼Œä¸‹ä¸€ç« å¿…é¡»ç«‹å³åº”å¯¹ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> åœ°æ¿å¼€å§‹éœ‡åŠ¨ï¼Œç°å°˜ä»å¤©èŠ±æ¿ç°Œç°Œè½ä¸‹ã€‚å¥¹æŠ¬å¤´ä¸€çœ‹ï¼Œè£‚ç¼æ­£åœ¨è¿…é€Ÿæ‰©å¤§ã€‚\n\n**å…³é”®è¦ç´ ï¼š**\n- æ—¶é—´ç´§è¿«\n- å¨èƒæ˜ç¡®\n- åæœä¸¥é‡\n\n### 3. æœªå®Œæˆçš„åŠ¨ä½œ\n\nä¸€ä¸ªåŠ¨ä½œè¢«ä¸­æ–­ï¼Œç•™ä¸‹\"æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆ\"çš„ç–‘é—®ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> ä»–ä¸¾èµ·æªï¼Œæ‰‹æŒ‡æ‰£åœ¨æ‰³æœºä¸Šâ€”â€”\"åˆ«åŠ¨ï¼\"èº«åä¼ æ¥ä¸€ä¸ªå£°éŸ³ã€‚\n\n**å…³é”®è¦ç´ ï¼š**\n- åŠ¨ä½œè¿›è¡Œä¸­è¢«æ‰“æ–­\n- ä¸ç¡®å®šç»“æœ\n- æ–°å˜é‡å‡ºç°\n\n### 4. èº«ä»½åè½¬\n\næŸäººè¢«æ­ç¤ºä¸ºä¸æ˜¯æˆ‘ä»¬ä»¥ä¸ºçš„é‚£æ ·ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> \"æˆ‘ç»ˆäºæ‰¾åˆ°ä½ äº†ï¼Œå¼Ÿå¼Ÿã€‚\" é‚£ä¸ªè¯´ç€å®Œç¾æ™®é€šè¯çš„ç”·äººæ‘˜ä¸‹é¢å…·ï¼Œéœ²å‡ºäº†ä¸€å¼ å¥¹çˆ¶äº²çš„è„¸ã€‚\n\n**å…³é”®è¦ç´ ï¼š**\n- èº«ä»½è¯¯è§£\n- å…³ç³»é‡å®šä¹‰\n- åŠ¨æœºé‡æ–°è§£è¯»\n\n### 5. ä¸¤éš¾é€‰æ‹©\n\nè§’è‰²å¿…é¡»åšå‡ºä¸€ä¸ªè‰°éš¾çš„é€‰æ‹©ï¼Œä½†ç« èŠ‚åœ¨å†³å®šå‰ç»“æŸã€‚\n\n**ç¤ºä¾‹ï¼š**\n> æ•‘ç”Ÿè‰‡åªèƒ½è½½ä¸¤ä¸ªäººã€‚å¥¹çš„ä¸ˆå¤«å’Œå¥³å„¿éƒ½åœ¨æ°´é‡Œï¼Œæµ·æµªè¶Šæ¥è¶Šå¤§ã€‚å¥¹ä¼¸å‡ºæ‰‹â€”â€”\n\n**å…³é”®è¦ç´ ï¼š**\n- é€‰é¡¹éƒ½ä¸ç†æƒ³\n- å¿…é¡»é€‰æ‹©\n- é«˜é£é™©\n\n### 6. ç¥ç§˜ç‰©å“/çº¿ç´¢\n\nå‘ç°ä¸€ä¸ªé‡è¦ä½†æ„ä¹‰ä¸æ˜çš„ä¸œè¥¿ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> ä¿é™©ç®±é‡Œåªæœ‰ä¸€å¼ ç…§ç‰‡ï¼Œæ‹æ‘„äºæ˜¨å¤©ã€‚ç…§ç‰‡é‡Œæ˜¯ç†Ÿç¡ä¸­çš„å¥¹ï¼Œä»çª—å¤–è§’åº¦æ‹æ‘„ã€‚\n\n**å…³é”®è¦ç´ ï¼š**\n- ç‰©å“æ„ä¹‰ä¸æ˜\n- æš—ç¤ºå¨èƒ\n- æ¿€å‘å¥½å¥‡\n\n### 7. æ—¶é—´é™åˆ¶\n\nä¸€ä¸ªæˆªæ­¢æ—¶é—´è¢«è®¾å®šï¼Œåˆ¶é€ ç´§è¿«æ„Ÿã€‚\n\n**ç¤ºä¾‹ï¼š**\n> å®šæ—¶å™¨æ˜¾ç¤º 03:00ã€‚è€Œæ‹†å¼¹åŒ…é‡Œå°‘äº†ä¸€æ ¹å…³é”®çš„çº¢çº¿ã€‚\n\n**å…³é”®è¦ç´ ï¼š**\n- æ˜ç¡®æ—¶é™\n- èµ„æºä¸è¶³\n- åæœå·²çŸ¥\n\n### 8. æ‰¿è¯º/å¨èƒ\n\næŸäººåšå‡ºæ‰¿è¯ºæˆ–å¨èƒï¼Œæ”¹å˜é¢„æœŸã€‚\n\n**ç¤ºä¾‹ï¼š**\n> \"ä»Šæ™šåˆå¤œä¹‹å‰ï¼Œæˆ‘ä¼šè®©æ‰€æœ‰äººçŸ¥é“ä½ åå¹´å‰çœŸæ­£åšäº†ä»€ä¹ˆã€‚\" åŒ¿åé‚®ä»¶åªæœ‰è¿™ä¸€è¡Œå­—ã€‚\n\n**å…³é”®è¦ç´ ï¼š**\n- æ˜ç¡®æ„å›¾\n- ä¼¤å®³/æ­éœ²çš„å¨èƒ\n- æ—¶é—´æ¡†æ¶\n\n### 9. ç¦»å¥‡æ¶ˆå¤±\n\næŸäººæˆ–æŸç‰©çªç„¶æ¶ˆå¤±ï¼Œç•™ä¸‹è°œå›¢ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> ä»–è½¬èº«åªä¸€ç§’é’Ÿï¼Œå†å›å¤´æ—¶ï¼Œç©ºè¡è¡çš„ç‰¢æˆ¿é‡Œï¼Œé‚£ä¸ªæˆ´ç€æ‰‹é“çš„å›šçŠ¯ä¸è§äº†ã€‚\n\n**å…³é”®è¦ç´ ï¼š**\n- ä¸å¯èƒ½çš„è¡Œä¸º\n- ç¼ºä¹è§£é‡Š\n- å®‰å…¨æ„Ÿä¸§å¤±\n\n### 10. è¨€å¤–ä¹‹æ„\n\nä¸€å¥è¯è¡¨é¢æ­£å¸¸ï¼Œä½†æš—ç¤ºäº†æ›´æ·±å±‚çš„ä¸œè¥¿ã€‚\n\n**ç¤ºä¾‹ï¼š**\n> \"æ­å–œä½ é€šè¿‡é¢è¯•ï¼Œ\" é¢è¯•å®˜ç¬‘ç€æ¡ä½å¥¹çš„æ‰‹ï¼Œ\"å’Œä½ çš„å§å§ä¸€æ ·ä¼˜ç§€ã€‚\" å¯å¥¹æ˜¯ç‹¬ç”Ÿå¥³ã€‚\n\n**å…³é”®è¦ç´ ï¼š**\n- è¡¨é¢æ­£å¸¸\n- éšè—ä¿¡æ¯\n- éœ€è¦è§£è¯»\n\n---\n\n## ç« èŠ‚é—´æ‚¬å¿µè¿æ¥\n\n### ä¼ç¬”ä¸å‘¼åº”\n\n**ä¼ç¬”æŠ€å·§ï¼š**\n- æ—©æœŸåŸ‹ä¸‹ä¸èµ·çœ¼çš„ç»†èŠ‚\n- è®©è¯»è€…å¿½ç•¥å…¶é‡è¦æ€§\n- åæœŸæ­ç¤ºæ—¶é€ æˆ\"åŸæ¥å¦‚æ­¤\"çš„æ•ˆæœ\n\n**å‘¼åº”æ–¹å¼ï¼š**\n- å¯¹ç§°åœºæ™¯ï¼ˆç›¸ä¼¼æƒ…å¢ƒï¼Œä¸åŒç»“æœï¼‰\n- é‡å¤å¯¹è¯ï¼ˆä¸åŒè¯­å¢ƒï¼Œæ–°å«ä¹‰ï¼‰\n- ç‰©å“å›å½’ï¼ˆé‡è¦ç‰©å“å†æ¬¡å‡ºç°ï¼‰\n\n### æ‚¬å¿µå‡çº§\n\n**é€’è¿›åŸåˆ™ï¼š** åç»­æ‚¬å¿µåº”æ¯”å‰ä¸€ä¸ªæ›´å¼ºæˆ–æ›´æ·±å…¥\n\n```\nç¬¬ä¸€ç« ï¼šè°å·äº†æ–‡ä»¶ï¼Ÿ\nç¬¬äºŒç« ï¼šå°å·æ˜¯ä¸»è§’çš„åŒäº‹\nç¬¬ä¸‰ç« ï¼šåŒäº‹æ˜¯å§åº•ç‰¹å·¥\nç¬¬å››ç« ï¼šç‰¹å·¥çŸ¥é“ä¸»è§’çš„ç§˜å¯†èº«ä»½\n```\n\n### å¤šçº¿æ‚¬å¿µ\n\n**åŒæ—¶ç»´æŒå¤šæ¡æ‚¬å¿µçº¿ï¼š**\n- ä¸»çº¿æ‚¬å¿µï¼ˆæ ¸å¿ƒè°œé¢˜ï¼‰\n- äººç‰©æ‚¬å¿µï¼ˆæŸäººçš„çœŸå®èº«ä»½ï¼‰\n- å…³ç³»æ‚¬å¿µï¼ˆAå’ŒBä¹‹é—´å‘ç”Ÿä»€ä¹ˆï¼‰\n- æ—¶é—´æ‚¬å¿µï¼ˆå€’è®¡æ—¶/æœ€åæœŸé™ï¼‰\n\n---\n\n## æ‚¬å¿µè®¾ç½®ç¦å¿Œ\n\n### é¿å…ï¼š\n\n1. **è™šå‡æ‚¬å¿µ** - åˆ¶é€ ç´§å¼ ä½†ç»“æœæ˜¯è¯¯ä¼š\n   > é”™è¯¯ï¼šä»–å¬åˆ°äº†è„šæ­¥å£°...åŸæ¥æ˜¯çŒ«\n   > æ­£ç¡®ï¼šä»–å¬åˆ°äº†è„šæ­¥å£°...ä½†è¿½ä»–çš„äººå·²ç»æ­»äº†\n\n2. **æœºæ¢°é™ç¥** - çªç„¶å‡ºç°ä»æœªæåŠçš„è§£å†³æ–¹æ¡ˆ\n   > é”™è¯¯ï¼šå¥¹çªç„¶æƒ³èµ·è‡ªå·±ä¼šæ­¦æœ¯\n   > æ­£ç¡®ï¼šå¥¹æƒ³èµ·çˆ¶äº²æ•™è¿‡çš„é˜²èº«æœ¯ï¼ˆç¬¬äº”ç« æè¿‡ï¼‰\n\n3. **è¿‡åº¦ç•™ç™½** - ç•™ä¸‹å¤ªå¤šæœªå›ç­”é—®é¢˜\n   > åŸåˆ™ï¼šæ¯ç« è‡³å°‘å›ç­”ä¸€ä¸ªæ—§æ‚¬å¿µï¼Œå†æå‡ºæ–°æ‚¬å¿µ\n\n4. **ä½é£é™©é’©å­** - ç»“å°¾äº‹ä»¶ä¸å¤Ÿé‡è¦\n   > é”™è¯¯ï¼šä»–ä¸çŸ¥é“æ™šé¥­åƒä»€ä¹ˆ\n   > æ­£ç¡®ï¼šä»–çš„æ™šé¤è¢«äººä¸‹äº†æ¯’\n\n---\n\n## æ‚¬å¿µå¼ºåº¦ç­‰çº§\n\n| ç­‰çº§ | ç±»å‹ | è¯»è€…ååº” | é€‚ç”¨ä½ç½® |\n|-----|------|---------|---------|\n| 1 | å¥½å¥‡æ‚¬å¿µ | \"è¿™å¾ˆæœ‰è¶£\" | ä¸­é—´ç« èŠ‚ |\n| 2 | å…³åˆ‡æ‚¬å¿µ | \"æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆ\" | ä¸­é—´ç« èŠ‚ |\n| 3 | è¿«åˆ‡æ‚¬å¿µ | \"ä»–å¿…é¡»é©¬ä¸Šè¡ŒåŠ¨\" | é«˜æ½®ç« èŠ‚ |\n| 4 | ç”Ÿå­˜æ‚¬å¿µ | \"ä»–ä¼šæ´»ä¸‹å»å—\" | é«˜æ½®/ç»“å±€å‰ |\n| 5 | ç»ˆææ‚¬å¿µ | \"ä¸€åˆ‡åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€\" | å…¨ä¹¦ç»“å°¾ |\n\n**é€’è¿›å»ºè®®ï¼š** æ•…äº‹ä¸­æ‚¬å¿µå¼ºåº¦åº”æ€»ä½“ä¸Šå‡ï¼Œä½†å¯ä»¥æ³¢åŠ¨\n",
        "skills/chinese-novelist/references/outline-template.md": "# [å°è¯´åç§°] å¤§çº²\n\n## åŸºæœ¬ä¿¡æ¯\n- **é¢˜æ**ï¼š[æ‚¬ç–‘/å¥‡å¹»/è¨€æƒ…/ç§‘å¹»ç­‰]\n- **é¢„è®¡ç« èŠ‚æ•°**ï¼š[10-20] ç« \n- **ç›®æ ‡å­—æ•°**ï¼šæ¯ç«  3000-5000 å­—ï¼Œæ€»è®¡ [X] ä¸‡å­—\n- **æ ¸å¿ƒå†²çª**ï¼š[ä¸»è§’æƒ³è¦ä»€ä¹ˆï¼Ÿä»€ä¹ˆé˜»æ­¢äº†ä»–ï¼Ÿ]\n\n## TODO List\n\n### å¾…åˆ›ä½œ\n- [ ] ç¬¬[X]ç« ï¼š[ç« èŠ‚æ ‡é¢˜] - [æ ¸å¿ƒäº‹ä»¶]\n\n### è¿›è¡Œä¸­\n- [ ] ç¬¬[X]ç« ï¼š[ç« èŠ‚æ ‡é¢˜] - [æ ¸å¿ƒäº‹ä»¶]\n\n### å·²å®Œæˆ\n- [x] ç¬¬[X]ç« ï¼š[ç« èŠ‚æ ‡é¢˜] - [æ ¸å¿ƒäº‹ä»¶]ï¼ˆ[å­—æ•°]å­—ï¼‰\n- [x] ç¬¬[X]ç« ï¼š[ç« èŠ‚æ ‡é¢˜] - [æ ¸å¿ƒäº‹ä»¶]ï¼ˆ[å­—æ•°]å­—ï¼‰\n\n## ç« èŠ‚è§„åˆ’\n\n| ç« èŠ‚ | æ ‡é¢˜ | æ ¸å¿ƒäº‹ä»¶ | æ‚¬å¿µé’©å­ | å­—æ•° | çŠ¶æ€ |\n|-----|------|---------|---------|------|------|\n| ç¬¬1ç«  | | | | | å¾…åˆ›ä½œ |\n| ç¬¬2ç«  | | | | | å¾…åˆ›ä½œ |\n\n## å…¨ä¹¦æ‚¬å¿µçº¿\n- **ä¸»çº¿æ‚¬å¿µ**ï¼š[æ ¸å¿ƒè°œé¢˜]\n- **æ”¯çº¿æ‚¬å¿µ**ï¼š[å…¶ä»–æ‚¬å¿µ]\n- **ç»ˆææ­ç§˜**ï¼š[æœ€ç»ˆç­”æ¡ˆ]\n\n## å­—æ•°ç»Ÿè®¡\n- å·²å®Œæˆç« èŠ‚æ•°ï¼š[0] ç« \n- ç´¯è®¡å­—æ•°ï¼š[0] å­—\n- å®Œæˆè¿›åº¦ï¼š[0]%\n\n---\n\n## ç« èŠ‚æ‘˜è¦\n\n### ç¬¬[X]ç« ï¼š[ç« èŠ‚æ ‡é¢˜]\n**æ‘˜è¦**ï¼š[300-500å­—æ¦‚æ‹¬æœ¬ç« æ ¸å¿ƒå†…å®¹ã€é‡è¦æƒ…èŠ‚ã€äººç‰©å˜åŒ–ã€æ‚¬å¿µæ­ç¤ºç­‰]\n\n---\n\nï¼ˆåç»­ç« èŠ‚æ‘˜è¦ä¾æ¬¡è¿½åŠ ï¼‰\n",
        "skills/chinese-novelist/references/plot-structures.md": "# æƒ…èŠ‚ç»“æ„æ¨¡æ¿\n\nå¸¸è§çš„æ•…äº‹ç»“æ„æ¨¡æ¿ï¼Œå¯ç”¨äºè§„åˆ’å°è¯´ç« èŠ‚ã€‚\n\n## ä¸‰å¹•å¼ç»“æ„ï¼ˆThree-Act Structureï¼‰\n\næœ€ç»å…¸çš„æ•…äº‹ç»“æ„ï¼Œé€‚ç”¨äºå¤§å¤šæ•°çŸ­ç¯‡å°è¯´ã€‚\n\n### ç¬¬ä¸€å¹•ï¼šè®¾ç½®ï¼ˆAct 1 - Setupï¼‰çº¦ 25%\n\n| ç« èŠ‚ | å†…å®¹ |\n|-----|------|\n| ç¬¬1ç«  | ä»‹ç»ä¸»è§’æ—¥å¸¸ç”Ÿæ´»ï¼ˆç°çŠ¶ï¼‰ |\n| ç¬¬2ç«  | æ¿€åŠ±äº‹ä»¶ï¼ˆInciting Incidentï¼‰- æ‰“ç ´ç°çŠ¶çš„äº‹ä»¶ |\n| ç¬¬3ç«  | ä¸»è§’æ‹’ç»å¬å”¤ï¼Œä½†æœ€ç»ˆå†³å®šè¡ŒåŠ¨ |\n\n**ç¬¬ä¸€å¹•æ‚¬å¿µç¤ºä¾‹ï¼š**\n- \"é—¨å¼€äº†ï¼Œè¿›æ¥çš„äººæ˜¯ä¸‰å¹´å‰æ­»å»çš„äººã€‚\"\n- \"å¥¹æ”¶åˆ°çš„ä¿¡ä»¶ï¼Œç½²åæ˜¯è‡ªå·±ã€‚\"\n\n### ç¬¬äºŒå¹•ï¼šå¯¹æŠ—ï¼ˆAct 2 - Confrontationï¼‰çº¦ 50%\n\n| ç« èŠ‚ | å†…å®¹ |\n|-----|------|\n| ç¬¬4-5ç«  | ä¸»è§’è¿›å…¥æ–°ä¸–ç•Œï¼Œé­é‡æŒ‘æˆ˜ |\n| ç¬¬6ç«  | ä¸­ç‚¹ï¼ˆMidpointï¼‰- é‡å¤§è½¬æŠ˜/ä¿¡æ¯æ­ç¤º |\n| ç¬¬7-8ç«  | å›°éš¾å‡çº§ï¼Œç›Ÿå‹å¯èƒ½èƒŒå› |\n\n**ç¬¬äºŒå¹•æ‚¬å¿µç¤ºä¾‹ï¼š**\n- \"å¯¼å¸ˆç«Ÿç„¶æ˜¯å¹•åé»‘æ‰‹ã€‚\"\n- \"å”¯ä¸€çš„ç›Ÿå‹å¤±è¸ªäº†ã€‚\"\n\n### ç¬¬ä¸‰å¹•ï¼šç»“å±€ï¼ˆAct 3 - Resolutionï¼‰çº¦ 25%\n\n| ç« èŠ‚ | å†…å®¹ |\n|-----|------|\n| ç¬¬9ç«  | ä¸€åˆ‡çœ‹ä¼¼å¤±è´¥ï¼Œæœ€ä½ç‚¹ |\n| ç¬¬10ç«  | é«˜æ½®ï¼ˆClimaxï¼‰- æœ€ç»ˆå¯¹å†³ |\n| ç»ˆç«  | ç»“å±€ï¼Œå±•ç¤ºæ–°å¸¸æ€ |\n\n---\n\n## è‹±é›„ä¹‹æ—…ï¼ˆHero's Journeyï¼‰\n\nç¥è¯å­¦å®¶çº¦ç‘Ÿå¤«Â·åè´å°”çš„ç»å…¸ç»“æ„ï¼Œé€‚åˆå†’é™©/å¥‡å¹»é¢˜æã€‚\n\n### é˜¶æ®µåˆ†è§£\n\n| é˜¶æ®µ | ç« èŠ‚ | å†…å®¹ |\n|-----|------|------|\n| 1. å¹³å‡¡ä¸–ç•Œ | ç¬¬1ç«  | ä»‹ç»ä¸»è§’æ—¥å¸¸ç”Ÿæ´» |\n| 2. å†’é™©å¬å”¤ | ç¬¬1-2ç«  | æ¿€åŠ±äº‹ä»¶å‘ç”Ÿ |\n| 3. æ‹’ç»å¬å”¤ | ç¬¬2ç«  | ä¸»è§’æœ€åˆçŠ¹è±« |\n| 4. é‡è§å¯¼å¸ˆ | ç¬¬2-3ç«  | è·å¾—æŒ‡å¯¼/è£…å¤‡ |\n| 5. è·¨è¶Šé—¨æ§› | ç¬¬3ç«  | ç¦»å¼€èˆ’é€‚åŒº |\n| 6. è€ƒéªŒç›Ÿå‹æ•Œäºº | ç¬¬4-5ç«  | æ–°ä¸–ç•Œæ¢ç´¢ |\n| 7. æ¥è¿‘æ´ç©´ | ç¬¬5-6ç«  | å‡†å¤‡é¢å¯¹å¤§æŒ‘æˆ˜ |\n| 8. è‹¦éš¾ç…ç†¬ | ç¬¬6-7ç«  | æ¥è¿‘æ­»äº¡/é‡å¤§å¤±è´¥ |\n| 9. å¥–èµ | ç¬¬7-8ç«  | è·å¾—åŠ›é‡/ä¿¡æ¯ |\n| 10. è¿”å›ä¹‹è·¯ | ç¬¬8ç«  | å›å½’é€”ä¸­å—é˜» |\n| 11. å¤æ´» | ç¬¬9ç«  | æœ€ç»ˆè€ƒéªŒ/èœ•å˜ |\n| 12. æ»¡è½½è€Œå½’ | ç¬¬10ç«  | å›å½’ï¼Œå¸¦ç€æ”¶è· |\n\n---\n\n## æ‚¬ç–‘å°è¯´ç»“æ„\n\né€‚åˆä¾¦æ¢/æ¨ç†/æƒŠæ‚šé¢˜æã€‚\n\n### ç¬¬ä¸€å¹•ï¼šè°œé¢˜å‡ºç°\n\n| ç« èŠ‚ | å†…å®¹ | æ‚¬å¿µé’©å­ |\n|-----|------|---------|\n| ç¬¬1ç«  | å‘ç°å°¸ä½“/äº‹ä»¶å‘ç”Ÿ | è°å¹²çš„ï¼Ÿ |\n| ç¬¬2ç«  | ä¾¦æ¢æ¥æ‰‹æ¡ˆä»¶ | ä¸ºä»€ä¹ˆè¿™ä¸ªæ¡ˆå­ç‰¹æ®Šï¼Ÿ |\n| ç¬¬3ç«  | åˆæ­¥è°ƒæŸ¥ï¼Œå‘ç°çº¿ç´¢ | çº¿ç´¢æŒ‡å‘è°ï¼Ÿ |\n\n### ç¬¬äºŒå¹•ï¼šè°ƒæŸ¥æ·±å…¥\n\n| ç« èŠ‚ | å†…å®¹ | æ‚¬å¿µé’©å­ |\n|-----|------|---------|\n| ç¬¬4ç«  | å®¡è®¯å«Œç–‘äººï¼Œå„æœ‰å«Œç–‘ | è°åœ¨æ’’è°ï¼Ÿ |\n| ç¬¬5ç«  | æ–°çº¿ç´¢å‡ºç°ï¼ŒæŒ‡å‘æ„å¤–æ–¹å‘ | æˆ‘ä»¬æ˜¯ä¸æ˜¯ä¸€å¼€å§‹å°±é”™äº†ï¼Ÿ |\n| ç¬¬6ç«  | ç¬¬äºŒèµ·äº‹ä»¶ï¼Œæ¨¡å¼æµ®ç° | è¿™æ˜¯è¿ç¯æ¡ˆä»¶ï¼Ÿ |\n| ç¬¬7ç«  | ä¾¦æ¢é™·å…¥å±é™© | ä¾¦æ¢ä¼šæˆä¸ºä¸‹ä¸€ä¸ªç›®æ ‡å—ï¼Ÿ |\n\n### ç¬¬ä¸‰å¹•ï¼šçœŸç›¸æ­ç¤º\n\n| ç« èŠ‚ | å†…å®¹ | æ‚¬å¿µé’©å­ |\n|-----|------|---------|\n| ç¬¬8ç«  | é‡å¤§çªç ´/åè½¬ | æˆ‘ä»¬ä¿¡ä»»çš„äººæœ‰é—®é¢˜ï¼Ÿ |\n| ç¬¬9ç«  | æœ€ç»ˆå¯¹å†³ | çœŸç›¸æ˜¯ä»€ä¹ˆï¼Ÿä»£ä»·æ˜¯ä»€ä¹ˆï¼Ÿ |\n| ç¬¬10ç«  | æ¡ˆä»¶è§£å†³ï¼Œé—ç•™ç–‘é—® | çœŸçš„ç»“æŸäº†å—ï¼Ÿ |\n\n---\n\n## è¨€æƒ…å°è¯´ç»“æ„\n\né€‚åˆçˆ±æƒ…é¢˜æã€‚\n\n### ç¬¬ä¸€å¹•ï¼šç›¸é‡\n\n| ç« èŠ‚ | å†…å®¹ | æƒ…æ„ŸèŠ‚ç‚¹ |\n|-----|------|---------|\n| ç¬¬1ç«  | ä»‹ç»ä¸»è§’ Aï¼Œç°çŠ¶/é—®é¢˜ | è¯»è€…å…±æƒ… A |\n| ç¬¬2ç«  | ä»‹ç»ä¸»è§’ Bï¼Œç°çŠ¶/é—®é¢˜ | è¯»è€…å…±æƒ… B |\n| ç¬¬3ç«  | A å’Œ B ç›¸é‡ï¼ˆç¬¬ä¸€å°è±¡ä¸ä½³ï¼‰ | ä¸¤äººæ³¨å®šåœ¨ä¸€èµ·ï¼Œä½†ç›®å‰æœ‰å†²çª |\n\n### ç¬¬äºŒå¹•ï¼šå‘å±•\n\n| ç« èŠ‚ | å†…å®¹ | æƒ…æ„ŸèŠ‚ç‚¹ |\n|-----|------|---------|\n| ç¬¬4-5ç«  | è¢«è¿«åœ¨ä¸€èµ·ï¼Œäº†è§£å¯¹æ–¹ | å‘ç°æœ‰å¸å¼•åŠ›çš„åœ°æ–¹ |\n| ç¬¬6ç«  | å¸å¼•åŠ›å¢å¼ºï¼Œäº²å¯†æ—¶åˆ» | æ¥è¿‘ |\n| ç¬¬7-8ç«  | è¯¯è§£/ç§˜å¯†/éšœç¢å‡ºç° | æ¨è¿œ |\n| ç¬¬9ç«  | å±æœºï¼Œå…³ç³»ç ´è£‚ | çœ‹èµ·æ¥æ— æœ› |\n\n### ç¬¬ä¸‰å¹•ï¼šå’Œè§£\n\n| ç« èŠ‚ | å†…å®¹ | æƒ…æ„ŸèŠ‚ç‚¹ |\n|-----|------|---------|\n| ç¬¬10ç«  | æ„è¯†åˆ°çœŸçˆ±ï¼Œå…‹æœéšœç¢ | é«˜æ½® |\n| ç»ˆç«  | åœ¨ä¸€èµ·ï¼Œå±•ç¤ºæ–°ç”Ÿæ´» | åœ†æ»¡ |\n\n---\n\n## æƒŠæ‚š/åŠ¨ä½œç»“æ„\n\né€‚åˆå¿«èŠ‚å¥ã€ç´§å¼ åˆºæ¿€é¢˜æã€‚\n\n### çŸ­ç¯‡ç»“æ„ï¼ˆ5-6ç« ï¼‰\n\n```\nç¬¬1ç« ï¼šå±æœºå‡ºç° â†’ é’©å­ï¼šä¸»è§’è¢«è¿½æ€/å¨èƒ\nç¬¬2ç« ï¼šåº”å¯¹è®¡åˆ’ â†’ é’©å­ï¼šè®¡åˆ’å¤±è´¥ï¼Œæƒ…å†µæ¶åŒ–\nç¬¬3ç« ï¼šè¿½é€/å¯¹æŠ— â†’ é’©å­ï¼šè¢«é€¼å…¥ç»å¢ƒ\nç¬¬4ç« ï¼šé€†è½¬æœºä¼š â†’ é’©å­ï¼šå‘ç°æ–°å¸Œæœ›ï¼Œä½†æ—¶é—´ç´§è¿«\nç¬¬5ç« ï¼šæœ€ç»ˆå¯¹æŠ— â†’ é’©å­ï¼šç”Ÿæ­»ä¸€ç¬\nç¬¬6ç« ï¼šç»“å±€ â†’ å±•ç¤ºåæœ\n```\n\n### ç‰¹ç‚¹\n\n- èŠ‚å¥å¿«ï¼Œæ¯ç« éƒ½æœ‰åŠ¨ä½œ\n- é«˜å¯†åº¦äº‹ä»¶\n- æ—¶é—´å‹åŠ›æŒç»­å­˜åœ¨\n- æ‚¬å¿µå¼ºåº¦é€’å¢\n\n---\n\n## åè½¬ç»“æ„ï¼ˆTwist-Basedï¼‰\n\né€‚åˆå¿ƒç†æƒŠæ‚š/æ‚¬ç–‘é¢˜æã€‚\n\n### ç« èŠ‚åˆ†å¸ƒ\n\n```\nç¬¬1-2ç« ï¼šå»ºç«‹\"çœŸå®\"æƒ…å†µ\nç¬¬3-4ç« ï¼šå‡ºç°ç–‘ç‚¹ï¼Œä½†ä¸æ˜æ˜¾\nç¬¬5-6ç« ï¼šç¬¬ä¸€æ¬¡å°åè½¬ï¼ˆé‡æ–°ç†è§£ï¼‰\nç¬¬7-8ç« ï¼šç¬¬äºŒæ¬¡åè½¬ï¼ˆå†æ¬¡åè½¬ï¼‰\nç¬¬9-10ç« ï¼šæœ€ç»ˆåè½¬ï¼ˆä¸€åˆ‡é¢ è¦†ï¼‰\n```\n\n### å…³é”®\n\n- å‰æœŸåŸ‹ä¸‹çœ‹ä¼¼æ— è¾œçš„çº¿ç´¢\n- æ¯æ¬¡åè½¬éƒ½åˆä¹é€»è¾‘ï¼ˆå›çœ‹æœ‰è¿¹å¯å¾ªï¼‰\n- é¿å…æœºæ¢°é™ç¥\n\n---\n\n## å¤šçº¿å™äº‹ç»“æ„\n\né€‚åˆå¤æ‚å‰§æƒ…ï¼Œå¤šä¸»è§’ã€‚\n\n### äº¤å‰å‰ªè¾‘æ¨¡å¼\n\n```\nç¬¬1ç« ï¼šä¸»è§’Aæ•…äº‹\nç¬¬2ç« ï¼šä¸»è§’Bæ•…äº‹\nç¬¬3ç« ï¼šä¸»è§’Aæ•…äº‹ï¼ˆæ¨è¿›ï¼‰\nç¬¬4ç« ï¼šä¸»è§’Bæ•…äº‹ï¼ˆæ¨è¿›ï¼‰\nç¬¬5ç« ï¼šçº¿ç´¢äº¤æ±‡\n...\n```\n\n### æ—¶é—´çº¿æ¨¡å¼\n\n```\nç¬¬1ç« ï¼šç°åœ¨ï¼ˆæ—¶é—´Aï¼‰\nç¬¬2ç« ï¼šè¿‡å»ï¼ˆæ—¶é—´A-5å¹´ï¼‰\nç¬¬3ç« ï¼šç°åœ¨ï¼ˆæ—¶é—´A+1å¤©ï¼‰\nç¬¬4ç« ï¼šè¿‡å»ï¼ˆæ—¶é—´A-5å¹´+1æœˆï¼‰\n...\n```\n\n### æ”¶æ•›åŸåˆ™\n\n- å„çº¿æœ€ç»ˆå¿…é¡»äº¤æ±‡\n- æ—©æœŸçœ‹ä¼¼æ— å…³çš„äº‹ä»¶åæ¥æœ‰å…³è”\n- æ”¶æ•›æ—¶äº§ç”Ÿ\"åŸæ¥å¦‚æ­¤\"çš„æ•ˆæœ\n\n---\n\n## çŸ­ç¯‡å°è¯´å¿«é€Ÿç»“æ„\n\n### 3ç« å¾®å‹ç»“æ„\n\n```\nç¬¬1ç« ï¼šæ¿€åŠ±äº‹ä»¶ + å†³å®šè¡ŒåŠ¨\nç¬¬2ç« ï¼šå°è¯• + å¤±è´¥ + å‡çº§\nç¬¬3ç« ï¼šæœ€ç»ˆå°è¯• + æˆåŠŸ/å¤±è´¥ + ç»“å±€\n```\n\n### 5ç« æ ‡å‡†ç»“æ„\n\n```\nç¬¬1ç« ï¼šç°çŠ¶ + æ¿€åŠ±äº‹ä»¶\nç¬¬2ç« ï¼šæ‹’ç» + è·¨è¶Šé—¨æ§›\nç¬¬3ç« ï¼šæŒ‘æˆ˜ + ç›Ÿå‹/æ•Œäºº\nç¬¬4ç« ï¼šä½è°· + è§‰é†’\nç¬¬5ç« ï¼šé«˜æ½® + ç»“å±€\n```\n\n---\n\n## ç« èŠ‚æƒ…èŠ‚æ¨¡æ¿\n\n### å•ç« å†…éƒ¨ç»“æ„\n\n```\nå¼€å¤´ï¼ˆ10%ï¼‰ï¼šé’©å­ + ä¸Šä¸‹æ–‡è¿æ¥\nå‘å±•ï¼ˆ60%ï¼‰ï¼šäº‹ä»¶æ¨è¿› + å†²çª\né«˜æ½®ï¼ˆ20%ï¼‰ï¼šæœ¬ç« æœ€é«˜ç‚¹\nç»“å°¾ï¼ˆ10%ï¼‰ï¼šæ‚¬å¿µé’©å­ + ä¸‹ç« é“ºå«\n```\n\n### æ— æ•ˆç« èŠ‚ç»“æ„\n\n```\nå¼€å¤´ï¼šæ¼«é•¿é“ºå«/èƒŒæ™¯è¯´æ˜\nä¸­é—´ï¼šæ—¥å¸¸æ´»åŠ¨/å¯¹è¯æµæ°´è´¦\nç»“å°¾ï¼šå¹³æ·¡ç»“æŸ/æ— æ‚¬å¿µ\n```\n\n---\n\n## ç»“æ„é€‰æ‹©æŒ‡å—\n\n| æ•…äº‹ç±»å‹ | æ¨èç»“æ„ | ç« èŠ‚æ•° |\n|---------|---------|--------|\n| å†’é™©/å¥‡å¹» | è‹±é›„ä¹‹æ—… | 8-12ç«  |\n| ä¾¦æ¢/æ‚¬ç–‘ | æ‚¬ç–‘ç»“æ„ | 8-10ç«  |\n| è¨€æƒ… | è¨€æƒ…ç»“æ„ | 6-10ç«  |\n| åŠ¨ä½œ/æƒŠæ‚š | æƒŠæ‚šç»“æ„ | 5-8ç«  |\n| å¿ƒç†/åè½¬ | åè½¬ç»“æ„ | 6-8ç«  |\n| å¤šä¸»è§’ | å¤šçº¿å™äº‹ | 10-15ç«  |\n| å¾®å‹å°è¯´ | 3ç« ç»“æ„ | 3ç«  |\n",
        "skills/md-to-pptx/SKILL.md": "---\nname: md-to-pptx\ndescription: Convert Markdown documents to PowerPoint presentations or generate presentations from scratch using AI. Use when users want to create PPT/PPTX files, convert MD to slides, generate presentations, make slideshows, or ask for help with PowerPoint creation. Supports custom templates, multiple themes (business, tech_dark, education, neumorphism), and intelligent content layout.\n---\n\n# md-to-pptx\n\nConvert Markdown to PowerPoint or generate presentations with AI assistance.\n\n## Dependencies\n\nInstall required packages before use:\n\n```bash\npip install python-pptx Pillow\n```\n\n**Note**: Use `python3` instead of `python` on systems where Python 3 is not the default.\n\n## Workflow\n\n### Step 1: Gather Requirements\n\n**IMPORTANT**: Before generating any content, you MUST ask the user the following questions using the AskUserQuestion tool:\n\n1. **PPTé¡µæ•° (Slide Count)**: æ‚¨å¸Œæœ›PPTåŒ…å«å¤šå°‘é¡µï¼Ÿ\n   - Options: 5-10é¡µ, 10-15é¡µ, 15-20é¡µ, 20é¡µä»¥ä¸Š\n\n2. **é¢å‘ç”¨æˆ·ç¾¤ä½“ (Target Audience)**: è¿™ä¸ªPPTçš„ç›®æ ‡å—ä¼—æ˜¯è°ï¼Ÿ\n   - Options: ä¼ä¸šé«˜ç®¡/å†³ç­–è€…, æŠ€æœ¯å›¢é˜Ÿ/å¼€å‘è€…, å­¦ç”Ÿ/æ•™è‚²åœºæ™¯, æ™®é€šå¤§ä¼—/å®¢æˆ·\n\n3. **PPTæ¼”ç¤ºåœºæ™¯ (Presentation Context)**: è¿™ä¸ªPPTå°†åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨ï¼Ÿ\n   - Options: å•†åŠ¡æ±‡æŠ¥/ä¼šè®®, äº§å“å‘å¸ƒ/è·¯æ¼”, åŸ¹è®­/æ•™å­¦, å­¦æœ¯æŠ¥å‘Š/ç ”ç©¶åˆ†äº«\n\n4. **PPTæ¨¡æ¿é€‰æ‹© (Template Selection)**: æ˜¯å¦ä½¿ç”¨å·²æœ‰çš„PPTæ¨¡æ¿ï¼Ÿ\n   - Options:\n     - business (å•†åŠ¡é£æ ¼ - ç™½è‰²èƒŒæ™¯ï¼Œæ·±è“æ ‡é¢˜)\n     - tech_dark (ç§‘æŠ€é£æ ¼ - æ·±è‰²èƒŒæ™¯ï¼Œç»¿è‰²ç‚¹ç¼€)\n     - education (æ•™è‚²é£æ ¼ - æš–è‰²èƒŒæ™¯ï¼Œæ©™è‰²ç‚¹ç¼€)\n     - neumorphism (æ–°æ‹Ÿæ€é£æ ¼ - è“é»„è‰²ç°ä»£é£æ ¼)\n     - ä¸ä½¿ç”¨æ¨¡æ¿/è‡ªå®šä¹‰\n\nAdditional questions to ask:\n\n5. **Source**: Do you have an existing Markdown file, or should I generate content?\n6. **Save location**: Where to save the PPT? (default: user's current working directory)\n\nUse the answers to guide content generation:\n- **Slide Count**: Determines the depth and detail of content\n- **Target Audience**: Affects language complexity, terminology, and examples\n- **Presentation Context**: Influences tone, structure, and visual style\n- **Template**: Sets the visual theme for the presentation\n\n### Step 2: Determine Approach\n\n**If converting existing Markdown:**\n1. Read the Markdown file\n2. Parse content into slides (H1/H2 headings create new slides)\n3. Generate PPTX with appropriate layouts\n\n**If generating new content:**\n1. Create an outline based on user's topic\n2. Present outline for user approval\n3. Generate full Markdown content\n4. Convert to PPTX\n\n### Step 3: Generate Presentation\n\nRun the conversion script:\n\n```bash\npython scripts/md_to_pptx.py input.md -o output.pptx --theme business\n```\n\n## Command Line Options\n\n```bash\npython scripts/md_to_pptx.py <input.md> [options]\n\nOptions:\n  -o, --output      Output filename (default: input name + .pptx)\n  -d, --directory   Output directory (default: user's current directory)\n  -t, --theme       Theme: business, tech_dark, education, neumorphism\n  --template        Path to custom .pptx template\n  --no-template     Generate without using built-in template\n  -q, --quiet       Suppress progress output\n  --list-themes     Show available themes\n  --list-templates  Show template locations\n```\n\n### Examples\n\n```bash\n# Save to current directory (default)\npython scripts/md_to_pptx.py presentation.md\n\n# Specify output filename\npython scripts/md_to_pptx.py presentation.md -o slides.pptx\n\n# Save to Desktop\npython scripts/md_to_pptx.py presentation.md -d ~/Desktop\n\n# Use tech dark theme\npython scripts/md_to_pptx.py presentation.md --theme tech_dark\n\n# Use neumorphism theme\npython scripts/md_to_pptx.py presentation.md --theme neumorphism\n\n# Use custom template\npython scripts/md_to_pptx.py presentation.md --template company.pptx\n\n# Show available themes\npython scripts/md_to_pptx.py --list-themes\n\n# Show template locations\npython scripts/md_to_pptx.py --list-templates\n```\n\n## Built-in Templates\n\nFour pre-built templates are included in `assets/templates/`:\n\n| Template | File | Description |\n|----------|------|-------------|\n| business | `business_template.pptx` | White background, dark blue titles, professional |\n| tech_dark | `tech_dark_template.pptx` | Dark gray background, green accents, developer-friendly |\n| education | `education_template.pptx` | Warm cream background, orange accents, approachable |\n| neumorphism | `è“é»„è‰²æ–°æ‹Ÿæ€è¡Œä¸šè°ƒç ”æŠ¥å‘ŠPPTæ¨¡æ¿.pptx` | Blue-yellow neumorphism style, modern research report |\n\n### Custom Templates\n\nPlace custom `.pptx` templates in `assets/templates/` or specify path with `--template`:\n\n```bash\n# Use template from assets/templates/\npython scripts/md_to_pptx.py input.md --template assets/templates/my_company.pptx\n\n# Use template from any location\npython scripts/md_to_pptx.py input.md --template /path/to/custom.pptx\n```\n\nTo regenerate built-in templates:\n```bash\npython scripts/generate_templates.py -o assets/templates\n```\n\n## Markdown Format\n\nKey rules: `# H1` creates title slide, `## H2` creates content slides, `### H3+` stays on current slide.\n\nFor detailed format reference including supported elements, image handling, and layout selection, see [references/markdown-format.md](references/markdown-format.md).\n\n## Error Handling\n\nThe generator uses fault-tolerant mode:\n- Unsupported elements are skipped with warnings\n- Missing images show placeholder text\n- Malformed tables fall back to text\n- All warnings are collected and reported at the end\n\n## Progress Feedback\n\nThe script reports progress per slide:\n```\nğŸ“„ Reading: presentation.md\nğŸ“Š Parsed 6 slides\nğŸ“‹ Using built-in template: tech_dark_template.pptx\n[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 3/6 - Generating slide 3: Introduction...\nâœ… Created: /path/to/output.pptx\n```\n\n## Python API\n\n```python\nfrom scripts.md_to_pptx import convert_md_to_pptx, generate_from_content\n\n# Convert file\nsuccess, output_path, warnings = convert_md_to_pptx(\n    \"presentation.md\",\n    output_path=\"slides.pptx\",\n    theme=\"business\"\n)\n\n# Generate from content string\nsuccess, warnings = generate_from_content(\n    \"# My Title\\n\\n## Slide 1\\nContent here\",\n    \"output.pptx\",\n    theme=\"tech_dark\"\n)\n```\n\n## Typical Interaction Flow\n\n1. User: \"Help me create a presentation about X\"\n2. Ask: Theme preference? Save location?\n3. Generate outline, present for approval\n4. User approves or requests changes\n5. Generate full Markdown content\n6. Run conversion script with chosen options\n7. Report: Created X slides, saved to Y, any warnings\n",
        "skills/md-to-pptx/references/markdown-format.md": "# Markdown Format Reference\n\nThe parser uses standard Markdown with intelligent slide detection.\n\n## Example Structure\n\n```markdown\n# Presentation Title\nSubtitle text here\n\n## Slide Title\nContent for this slide.\n\n- Bullet point 1\n- Bullet point 2\n\n## Another Slide\n\n1. Numbered item\n2. Another item\n\n### Sub-heading (stays on same slide)\n\nMore content...\n```\n\n## Slide Detection Rules\n\n- `# H1` - Creates title slide\n- `## H2` - Creates new content slide\n- `### H3` and below - Stays on current slide as sub-heading\n- Content between headings goes on the same slide\n\n## Supported Elements\n\n| Element | Support | Notes |\n|---------|---------|-------|\n| Headings | Full | H1/H2 create slides, H3+ are content |\n| Paragraphs | Full | Auto-wrapped text |\n| Bullet lists | Full | Nested supported |\n| Numbered lists | Full | Nested supported |\n| Code blocks | Basic | Monospace font, background color |\n| Tables | Full | Converts to native PPT tables |\n| Images | Local only | `![alt](path/to/image.png)` |\n| Charts | Auto | Tables with numeric data can become charts |\n\n## Image Handling\n\nOnly local file paths are supported:\n```markdown\n![Description](./images/diagram.png)\n![](../assets/photo.jpg)\n```\n\nNetwork URLs and base64 images are skipped with a warning.\n\n## Layout Selection\n\nThe generator automatically selects layouts based on content:\n\n| Content Type | Layout |\n|--------------|--------|\n| H1 only | Title slide (centered) |\n| Text + bullets | Content slide |\n| Many elements (>4) | Two-column |\n| Image present | Image-focused |\n| Table with numbers | Chart slide |\n",
        "skills/n8n-code-javascript/BUILTIN_FUNCTIONS.md": "# Built-in Functions - JavaScript Code Node\n\nComplete reference for n8n's built-in JavaScript functions and helpers.\n\n---\n\n## Overview\n\nn8n Code nodes provide powerful built-in functions beyond standard JavaScript. This guide covers:\n\n1. **$helpers.httpRequest()** - Make HTTP requests\n2. **DateTime (Luxon)** - Advanced date/time operations\n3. **$jmespath()** - Query JSON structures\n4. **$getWorkflowStaticData()** - Persistent storage\n5. **Standard JavaScript Globals** - Math, JSON, console, etc.\n6. **Available Node.js Modules** - crypto, Buffer, URL\n\n---\n\n## 1. $helpers.httpRequest() - HTTP Requests\n\nMake HTTP requests directly from Code nodes without using HTTP Request node.\n\n### Basic Usage\n\n```javascript\nconst response = await $helpers.httpRequest({\n  method: 'GET',\n  url: 'https://api.example.com/users'\n});\n\nreturn [{json: {data: response}}];\n```\n\n### Complete Options\n\n```javascript\nconst response = await $helpers.httpRequest({\n  method: 'POST',  // GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS\n  url: 'https://api.example.com/users',\n  headers: {\n    'Authorization': 'Bearer token123',\n    'Content-Type': 'application/json',\n    'User-Agent': 'n8n-workflow'\n  },\n  body: {\n    name: 'John Doe',\n    email: 'john@example.com'\n  },\n  qs: {  // Query string parameters\n    page: 1,\n    limit: 10\n  },\n  timeout: 10000,  // Milliseconds (default: no timeout)\n  json: true,  // Auto-parse JSON response (default: true)\n  simple: false,  // Don't throw on HTTP errors (default: true)\n  resolveWithFullResponse: false  // Return only body (default: false)\n});\n```\n\n### GET Request\n\n```javascript\n// Simple GET\nconst users = await $helpers.httpRequest({\n  method: 'GET',\n  url: 'https://api.example.com/users'\n});\n\nreturn [{json: {users}}];\n```\n\n```javascript\n// GET with query parameters\nconst results = await $helpers.httpRequest({\n  method: 'GET',\n  url: 'https://api.example.com/search',\n  qs: {\n    q: 'javascript',\n    page: 1,\n    per_page: 50\n  }\n});\n\nreturn [{json: results}];\n```\n\n### POST Request\n\n```javascript\n// POST with JSON body\nconst newUser = await $helpers.httpRequest({\n  method: 'POST',\n  url: 'https://api.example.com/users',\n  headers: {\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + $env.API_KEY\n  },\n  body: {\n    name: $json.body.name,\n    email: $json.body.email,\n    role: 'user'\n  }\n});\n\nreturn [{json: newUser}];\n```\n\n### PUT/PATCH Request\n\n```javascript\n// Update resource\nconst updated = await $helpers.httpRequest({\n  method: 'PATCH',\n  url: `https://api.example.com/users/${userId}`,\n  body: {\n    name: 'Updated Name',\n    status: 'active'\n  }\n});\n\nreturn [{json: updated}];\n```\n\n### DELETE Request\n\n```javascript\n// Delete resource\nawait $helpers.httpRequest({\n  method: 'DELETE',\n  url: `https://api.example.com/users/${userId}`,\n  headers: {\n    'Authorization': 'Bearer ' + $env.API_KEY\n  }\n});\n\nreturn [{json: {deleted: true, userId}}];\n```\n\n### Authentication Patterns\n\n```javascript\n// Bearer Token\nconst response = await $helpers.httpRequest({\n  url: 'https://api.example.com/data',\n  headers: {\n    'Authorization': `Bearer ${$env.API_TOKEN}`\n  }\n});\n```\n\n```javascript\n// API Key in Header\nconst response = await $helpers.httpRequest({\n  url: 'https://api.example.com/data',\n  headers: {\n    'X-API-Key': $env.API_KEY\n  }\n});\n```\n\n```javascript\n// Basic Auth (manual)\nconst credentials = Buffer.from(`${username}:${password}`).toString('base64');\n\nconst response = await $helpers.httpRequest({\n  url: 'https://api.example.com/data',\n  headers: {\n    'Authorization': `Basic ${credentials}`\n  }\n});\n```\n\n### Error Handling\n\n```javascript\n// Handle HTTP errors gracefully\ntry {\n  const response = await $helpers.httpRequest({\n    method: 'GET',\n    url: 'https://api.example.com/users',\n    simple: false  // Don't throw on 4xx/5xx\n  });\n\n  if (response.statusCode >= 200 && response.statusCode < 300) {\n    return [{json: {success: true, data: response.body}}];\n  } else {\n    return [{\n      json: {\n        success: false,\n        status: response.statusCode,\n        error: response.body\n      }\n    }];\n  }\n} catch (error) {\n  return [{\n    json: {\n      success: false,\n      error: error.message\n    }\n  }];\n}\n```\n\n### Full Response Access\n\n```javascript\n// Get full response including headers and status\nconst response = await $helpers.httpRequest({\n  url: 'https://api.example.com/data',\n  resolveWithFullResponse: true\n});\n\nreturn [{\n  json: {\n    statusCode: response.statusCode,\n    headers: response.headers,\n    body: response.body,\n    rateLimit: response.headers['x-ratelimit-remaining']\n  }\n}];\n```\n\n---\n\n## 2. DateTime (Luxon) - Date & Time Operations\n\nn8n includes Luxon for powerful date/time handling. Access via `DateTime` global.\n\n### Current Date/Time\n\n```javascript\n// Current time\nconst now = DateTime.now();\n\n// Current time in specific timezone\nconst nowTokyo = DateTime.now().setZone('Asia/Tokyo');\n\n// Today at midnight\nconst today = DateTime.now().startOf('day');\n\nreturn [{\n  json: {\n    iso: now.toISO(),  // \"2025-01-20T15:30:00.000Z\"\n    formatted: now.toFormat('yyyy-MM-dd HH:mm:ss'),  // \"2025-01-20 15:30:00\"\n    unix: now.toSeconds(),  // Unix timestamp\n    millis: now.toMillis()  // Milliseconds since epoch\n  }\n}];\n```\n\n### Formatting Dates\n\n```javascript\nconst now = DateTime.now();\n\nreturn [{\n  json: {\n    isoFormat: now.toISO(),  // ISO 8601: \"2025-01-20T15:30:00.000Z\"\n    sqlFormat: now.toSQL(),  // SQL: \"2025-01-20 15:30:00.000\"\n    httpFormat: now.toHTTP(),  // HTTP: \"Mon, 20 Jan 2025 15:30:00 GMT\"\n\n    // Custom formats\n    dateOnly: now.toFormat('yyyy-MM-dd'),  // \"2025-01-20\"\n    timeOnly: now.toFormat('HH:mm:ss'),  // \"15:30:00\"\n    readable: now.toFormat('MMMM dd, yyyy'),  // \"January 20, 2025\"\n    compact: now.toFormat('yyyyMMdd'),  // \"20250120\"\n    withDay: now.toFormat('EEEE, MMMM dd, yyyy'),  // \"Monday, January 20, 2025\"\n    custom: now.toFormat('dd/MM/yy HH:mm')  // \"20/01/25 15:30\"\n  }\n}];\n```\n\n### Parsing Dates\n\n```javascript\n// From ISO string\nconst dt1 = DateTime.fromISO('2025-01-20T15:30:00');\n\n// From specific format\nconst dt2 = DateTime.fromFormat('01/20/2025', 'MM/dd/yyyy');\n\n// From SQL\nconst dt3 = DateTime.fromSQL('2025-01-20 15:30:00');\n\n// From Unix timestamp\nconst dt4 = DateTime.fromSeconds(1737384600);\n\n// From milliseconds\nconst dt5 = DateTime.fromMillis(1737384600000);\n\nreturn [{json: {parsed: dt1.toISO()}}];\n```\n\n### Date Arithmetic\n\n```javascript\nconst now = DateTime.now();\n\nreturn [{\n  json: {\n    // Adding time\n    tomorrow: now.plus({days: 1}).toISO(),\n    nextWeek: now.plus({weeks: 1}).toISO(),\n    nextMonth: now.plus({months: 1}).toISO(),\n    inTwoHours: now.plus({hours: 2}).toISO(),\n\n    // Subtracting time\n    yesterday: now.minus({days: 1}).toISO(),\n    lastWeek: now.minus({weeks: 1}).toISO(),\n    lastMonth: now.minus({months: 1}).toISO(),\n    twoHoursAgo: now.minus({hours: 2}).toISO(),\n\n    // Complex operations\n    in90Days: now.plus({days: 90}).toFormat('yyyy-MM-dd'),\n    in6Months: now.plus({months: 6}).toFormat('yyyy-MM-dd')\n  }\n}];\n```\n\n### Time Comparisons\n\n```javascript\nconst now = DateTime.now();\nconst targetDate = DateTime.fromISO('2025-12-31');\n\nreturn [{\n  json: {\n    // Comparisons\n    isFuture: targetDate > now,\n    isPast: targetDate < now,\n    isEqual: targetDate.equals(now),\n\n    // Differences\n    daysUntil: targetDate.diff(now, 'days').days,\n    hoursUntil: targetDate.diff(now, 'hours').hours,\n    monthsUntil: targetDate.diff(now, 'months').months,\n\n    // Detailed difference\n    detailedDiff: targetDate.diff(now, ['months', 'days', 'hours']).toObject()\n  }\n}];\n```\n\n### Timezone Operations\n\n```javascript\nconst now = DateTime.now();\n\nreturn [{\n  json: {\n    // Current timezone\n    local: now.toISO(),\n\n    // Convert to different timezone\n    tokyo: now.setZone('Asia/Tokyo').toISO(),\n    newYork: now.setZone('America/New_York').toISO(),\n    london: now.setZone('Europe/London').toISO(),\n    utc: now.toUTC().toISO(),\n\n    // Get timezone info\n    timezone: now.zoneName,  // \"America/Los_Angeles\"\n    offset: now.offset,  // Offset in minutes\n    offsetFormatted: now.toFormat('ZZ')  // \"+08:00\"\n  }\n}];\n```\n\n### Start/End of Period\n\n```javascript\nconst now = DateTime.now();\n\nreturn [{\n  json: {\n    startOfDay: now.startOf('day').toISO(),\n    endOfDay: now.endOf('day').toISO(),\n    startOfWeek: now.startOf('week').toISO(),\n    endOfWeek: now.endOf('week').toISO(),\n    startOfMonth: now.startOf('month').toISO(),\n    endOfMonth: now.endOf('month').toISO(),\n    startOfYear: now.startOf('year').toISO(),\n    endOfYear: now.endOf('year').toISO()\n  }\n}];\n```\n\n### Weekday & Month Info\n\n```javascript\nconst now = DateTime.now();\n\nreturn [{\n  json: {\n    // Day info\n    weekday: now.weekday,  // 1 = Monday, 7 = Sunday\n    weekdayShort: now.weekdayShort,  // \"Mon\"\n    weekdayLong: now.weekdayLong,  // \"Monday\"\n    isWeekend: now.weekday > 5,  // Saturday or Sunday\n\n    // Month info\n    month: now.month,  // 1-12\n    monthShort: now.monthShort,  // \"Jan\"\n    monthLong: now.monthLong,  // \"January\"\n\n    // Year info\n    year: now.year,  // 2025\n    quarter: now.quarter,  // 1-4\n    daysInMonth: now.daysInMonth  // 28-31\n  }\n}];\n```\n\n---\n\n## 3. $jmespath() - JSON Querying\n\nQuery and transform JSON structures using JMESPath syntax.\n\n### Basic Queries\n\n```javascript\nconst data = $input.first().json;\n\n// Extract specific field\nconst names = $jmespath(data, 'users[*].name');\n\n// Filter array\nconst adults = $jmespath(data, 'users[?age >= `18`]');\n\n// Get specific index\nconst firstUser = $jmespath(data, 'users[0]');\n\nreturn [{json: {names, adults, firstUser}}];\n```\n\n### Advanced Queries\n\n```javascript\nconst data = $input.first().json;\n\n// Sort and slice\nconst top5 = $jmespath(data, 'users | sort_by(@, &score) | reverse(@) | [0:5]');\n\n// Extract nested fields\nconst emails = $jmespath(data, 'users[*].contact.email');\n\n// Multi-field extraction\nconst simplified = $jmespath(data, 'users[*].{name: name, email: contact.email}');\n\n// Conditional filtering\nconst premium = $jmespath(data, 'users[?subscription.tier == `premium`]');\n\nreturn [{json: {top5, emails, simplified, premium}}];\n```\n\n### Common Patterns\n\n```javascript\n// Pattern 1: Filter and project\nconst query1 = $jmespath(data, 'products[?price > `100`].{name: name, price: price}');\n\n// Pattern 2: Aggregate functions\nconst query2 = $jmespath(data, 'sum(products[*].price)');\nconst query3 = $jmespath(data, 'max(products[*].price)');\nconst query4 = $jmespath(data, 'length(products)');\n\n// Pattern 3: Nested filtering\nconst query5 = $jmespath(data, 'categories[*].products[?inStock == `true`]');\n\nreturn [{json: {query1, query2, query3, query4, query5}}];\n```\n\n---\n\n## 4. $getWorkflowStaticData() - Persistent Storage\n\nStore data that persists across workflow executions.\n\n### Basic Usage\n\n```javascript\n// Get static data storage\nconst staticData = $getWorkflowStaticData();\n\n// Initialize counter if doesn't exist\nif (!staticData.counter) {\n  staticData.counter = 0;\n}\n\n// Increment counter\nstaticData.counter++;\n\nreturn [{\n  json: {\n    executionCount: staticData.counter\n  }\n}];\n```\n\n### Use Cases\n\n```javascript\n// Use Case 1: Rate limiting\nconst staticData = $getWorkflowStaticData();\nconst now = Date.now();\n\nif (!staticData.lastRun) {\n  staticData.lastRun = now;\n  staticData.runCount = 1;\n} else {\n  const timeSinceLastRun = now - staticData.lastRun;\n\n  if (timeSinceLastRun < 60000) {  // Less than 1 minute\n    return [{json: {error: 'Rate limit: wait 1 minute between runs'}}];\n  }\n\n  staticData.lastRun = now;\n  staticData.runCount++;\n}\n\nreturn [{json: {allowed: true, totalRuns: staticData.runCount}}];\n```\n\n```javascript\n// Use Case 2: Tracking last processed ID\nconst staticData = $getWorkflowStaticData();\nconst currentItems = $input.all();\n\n// Get last processed ID\nconst lastId = staticData.lastProcessedId || 0;\n\n// Filter only new items\nconst newItems = currentItems.filter(item => item.json.id > lastId);\n\n// Update last processed ID\nif (newItems.length > 0) {\n  staticData.lastProcessedId = Math.max(...newItems.map(item => item.json.id));\n}\n\nreturn newItems;\n```\n\n```javascript\n// Use Case 3: Accumulating results\nconst staticData = $getWorkflowStaticData();\n\nif (!staticData.accumulated) {\n  staticData.accumulated = [];\n}\n\n// Add current items to accumulated list\nconst currentData = $input.all().map(item => item.json);\nstaticData.accumulated.push(...currentData);\n\nreturn [{\n  json: {\n    currentBatch: currentData.length,\n    totalAccumulated: staticData.accumulated.length,\n    allData: staticData.accumulated\n  }\n}];\n```\n\n---\n\n## 5. Standard JavaScript Globals\n\n### Math Object\n\n```javascript\nreturn [{\n  json: {\n    // Rounding\n    rounded: Math.round(3.7),  // 4\n    floor: Math.floor(3.7),  // 3\n    ceil: Math.ceil(3.2),  // 4\n\n    // Min/Max\n    max: Math.max(1, 5, 3, 9, 2),  // 9\n    min: Math.min(1, 5, 3, 9, 2),  // 1\n\n    // Random\n    random: Math.random(),  // 0-1\n    randomInt: Math.floor(Math.random() * 100),  // 0-99\n\n    // Other\n    abs: Math.abs(-5),  // 5\n    sqrt: Math.sqrt(16),  // 4\n    pow: Math.pow(2, 3)  // 8\n  }\n}];\n```\n\n### JSON Object\n\n```javascript\n// Parse JSON string\nconst jsonString = '{\"name\": \"John\", \"age\": 30}';\nconst parsed = JSON.parse(jsonString);\n\n// Stringify object\nconst obj = {name: \"John\", age: 30};\nconst stringified = JSON.stringify(obj);\n\n// Pretty print\nconst pretty = JSON.stringify(obj, null, 2);\n\nreturn [{json: {parsed, stringified, pretty}}];\n```\n\n### console Object\n\n```javascript\n// Debug logging (appears in browser console, press F12)\nconsole.log('Processing items:', $input.all().length);\nconsole.log('First item:', $input.first().json);\n\n// Other console methods\nconsole.error('Error message');\nconsole.warn('Warning message');\nconsole.info('Info message');\n\n// Continues to return data\nreturn [{json: {processed: true}}];\n```\n\n### Object Methods\n\n```javascript\nconst obj = {name: \"John\", age: 30, city: \"NYC\"};\n\nreturn [{\n  json: {\n    keys: Object.keys(obj),  // [\"name\", \"age\", \"city\"]\n    values: Object.values(obj),  // [\"John\", 30, \"NYC\"]\n    entries: Object.entries(obj),  // [[\"name\", \"John\"], ...]\n\n    // Check property\n    hasName: 'name' in obj,  // true\n\n    // Merge objects\n    merged: Object.assign({}, obj, {country: \"USA\"})\n  }\n}];\n```\n\n### Array Methods\n\n```javascript\nconst arr = [1, 2, 3, 4, 5];\n\nreturn [{\n  json: {\n    mapped: arr.map(x => x * 2),  // [2, 4, 6, 8, 10]\n    filtered: arr.filter(x => x > 2),  // [3, 4, 5]\n    reduced: arr.reduce((sum, x) => sum + x, 0),  // 15\n    some: arr.some(x => x > 3),  // true\n    every: arr.every(x => x > 0),  // true\n    find: arr.find(x => x > 3),  // 4\n    includes: arr.includes(3),  // true\n    joined: arr.join(', ')  // \"1, 2, 3, 4, 5\"\n  }\n}];\n```\n\n---\n\n## 6. Available Node.js Modules\n\n### crypto Module\n\n```javascript\nconst crypto = require('crypto');\n\n// Hash functions\nconst hash = crypto.createHash('sha256')\n  .update('my secret text')\n  .digest('hex');\n\n// MD5 hash\nconst md5 = crypto.createHash('md5')\n  .update('my text')\n  .digest('hex');\n\n// Random values\nconst randomBytes = crypto.randomBytes(16).toString('hex');\n\nreturn [{json: {hash, md5, randomBytes}}];\n```\n\n### Buffer (built-in)\n\n```javascript\n// Base64 encoding\nconst encoded = Buffer.from('Hello World').toString('base64');\n\n// Base64 decoding\nconst decoded = Buffer.from(encoded, 'base64').toString();\n\n// Hex encoding\nconst hex = Buffer.from('Hello').toString('hex');\n\nreturn [{json: {encoded, decoded, hex}}];\n```\n\n### URL / URLSearchParams\n\n```javascript\n// Parse URL\nconst url = new URL('https://example.com/path?param1=value1&param2=value2');\n\n// Build query string\nconst params = new URLSearchParams({\n  search: 'query',\n  page: 1,\n  limit: 10\n});\n\nreturn [{\n  json: {\n    host: url.host,\n    pathname: url.pathname,\n    search: url.search,\n    queryString: params.toString()  // \"search=query&page=1&limit=10\"\n  }\n}];\n```\n\n---\n\n## What's NOT Available\n\n**External npm packages are NOT available:**\n- âŒ axios\n- âŒ lodash\n- âŒ moment (use DateTime/Luxon instead)\n- âŒ request\n- âŒ Any other npm package\n\n**Workaround**: Use $helpers.httpRequest() for HTTP, or add data to workflow via HTTP Request node.\n\n---\n\n## Summary\n\n**Most Useful Built-ins**:\n1. **$helpers.httpRequest()** - API calls without HTTP Request node\n2. **DateTime** - Professional date/time handling\n3. **$jmespath()** - Complex JSON queries\n4. **Math, JSON, Object, Array** - Standard JavaScript utilities\n\n**Common Patterns**:\n- API calls: Use $helpers.httpRequest()\n- Date operations: Use DateTime (Luxon)\n- Data filtering: Use $jmespath() or JavaScript .filter()\n- Persistent data: Use $getWorkflowStaticData()\n- Hashing: Use crypto module\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Overview\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Real usage examples\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Error prevention\n",
        "skills/n8n-code-javascript/COMMON_PATTERNS.md": "# Common Patterns - JavaScript Code Node\n\nProduction-tested patterns for n8n Code nodes. These patterns are proven in real workflows.\n\n---\n\n## Overview\n\nThis guide covers the 10 most useful Code node patterns for n8n workflows. Each pattern includes:\n- **Use Case**: When to use this pattern\n- **Key Techniques**: Important coding techniques demonstrated\n- **Complete Example**: Working code you can adapt\n- **Variations**: Common modifications\n\n**Pattern Categories:**\n- Data Aggregation (Patterns 1, 5, 10)\n- Content Processing (Patterns 2, 3)\n- Data Validation & Comparison (Patterns 4)\n- Data Transformation (Patterns 5, 6, 7)\n- Output Formatting (Pattern 8)\n- Filtering & Ranking (Pattern 9)\n\n---\n\n## Pattern 1: Multi-Source Data Aggregation\n\n**Use Case**: Combining data from multiple APIs, RSS feeds, webhooks, or databases\n\n**When to use:**\n- Collecting data from multiple services\n- Normalizing different API response formats\n- Merging data sources into unified structure\n- Building aggregated reports\n\n**Key Techniques**: Loop iteration, conditional parsing, data normalization\n\n### Complete Example\n\n```javascript\n// Process and structure data collected from multiple sources\nconst allItems = $input.all();\nlet processedArticles = [];\n\n// Handle different source formats\nfor (const item of allItems) {\n  const sourceName = item.json.name || 'Unknown';\n  const sourceData = item.json;\n\n  // Parse source-specific structure - Hacker News format\n  if (sourceName === 'Hacker News' && sourceData.hits) {\n    for (const hit of sourceData.hits) {\n      processedArticles.push({\n        title: hit.title,\n        url: hit.url,\n        summary: hit.story_text || 'No summary',\n        source: 'Hacker News',\n        score: hit.points || 0,\n        fetchedAt: new Date().toISOString()\n      });\n    }\n  }\n\n  // Parse source-specific structure - Reddit format\n  else if (sourceName === 'Reddit' && sourceData.data?.children) {\n    for (const post of sourceData.data.children) {\n      processedArticles.push({\n        title: post.data.title,\n        url: post.data.url,\n        summary: post.data.selftext || 'No summary',\n        source: 'Reddit',\n        score: post.data.score || 0,\n        fetchedAt: new Date().toISOString()\n      });\n    }\n  }\n\n  // Parse source-specific structure - RSS feed format\n  else if (sourceName === 'RSS' && sourceData.items) {\n    for (const rssItem of sourceData.items) {\n      processedArticles.push({\n        title: rssItem.title,\n        url: rssItem.link,\n        summary: rssItem.description || 'No summary',\n        source: 'RSS Feed',\n        score: 0,\n        fetchedAt: new Date().toISOString()\n      });\n    }\n  }\n}\n\n// Sort by score (highest first)\nprocessedArticles.sort((a, b) => b.score - a.score);\n\nreturn processedArticles.map(article => ({json: article}));\n```\n\n### Variations\n\n```javascript\n// Variation 1: Add source weighting\nfor (const article of processedArticles) {\n  const weights = {\n    'Hacker News': 1.5,\n    'Reddit': 1.0,\n    'RSS Feed': 0.8\n  };\n\n  article.weightedScore = article.score * (weights[article.source] || 1.0);\n}\n\n// Variation 2: Filter by minimum score\nprocessedArticles = processedArticles.filter(article => article.score >= 10);\n\n// Variation 3: Deduplicate by URL\nconst seen = new Set();\nprocessedArticles = processedArticles.filter(article => {\n  if (seen.has(article.url)) {\n    return false;\n  }\n  seen.add(article.url);\n  return true;\n});\n```\n\n---\n\n## Pattern 2: Regex Filtering & Pattern Matching\n\n**Use Case**: Content analysis, keyword extraction, mention tracking, text parsing\n\n**When to use:**\n- Extracting mentions or tags from text\n- Finding patterns in unstructured data\n- Counting keyword occurrences\n- Validating formats (emails, phone numbers)\n\n**Key Techniques**: Regex matching, object aggregation, sorting/ranking\n\n### Complete Example\n\n```javascript\n// Extract and track mentions using regex patterns\nconst etfPattern = /\\b([A-Z]{2,5})\\b/g;\nconst knownETFs = ['VOO', 'VTI', 'VT', 'SCHD', 'QYLD', 'VXUS', 'SPY', 'QQQ'];\n\nconst etfMentions = {};\n\nfor (const item of $input.all()) {\n  const data = item.json.data;\n\n  // Skip if no data or children\n  if (!data?.children) continue;\n\n  for (const post of data.children) {\n    // Combine title and body text\n    const title = post.data.title || '';\n    const body = post.data.selftext || '';\n    const combinedText = (title + ' ' + body).toUpperCase();\n\n    // Find all matches\n    const matches = combinedText.match(etfPattern);\n\n    if (matches) {\n      for (const match of matches) {\n        // Only count known ETFs\n        if (knownETFs.includes(match)) {\n          if (!etfMentions[match]) {\n            etfMentions[match] = {\n              count: 0,\n              totalScore: 0,\n              posts: []\n            };\n          }\n\n          etfMentions[match].count++;\n          etfMentions[match].totalScore += post.data.score || 0;\n          etfMentions[match].posts.push({\n            title: post.data.title,\n            url: post.data.url,\n            score: post.data.score\n          });\n        }\n      }\n    }\n  }\n}\n\n// Convert to array and sort by mention count\nreturn Object.entries(etfMentions)\n  .map(([etf, data]) => ({\n    json: {\n      etf,\n      mentions: data.count,\n      totalScore: data.totalScore,\n      averageScore: data.totalScore / data.count,\n      topPosts: data.posts\n        .sort((a, b) => b.score - a.score)\n        .slice(0, 3)\n    }\n  }))\n  .sort((a, b) => b.json.mentions - a.json.mentions);\n```\n\n### Variations\n\n```javascript\n// Variation 1: Email extraction\nconst emailPattern = /\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b/g;\nconst emails = text.match(emailPattern) || [];\n\n// Variation 2: Phone number extraction\nconst phonePattern = /\\b\\d{3}[-.]?\\d{3}[-.]?\\d{4}\\b/g;\nconst phones = text.match(phonePattern) || [];\n\n// Variation 3: Hashtag extraction\nconst hashtagPattern = /#(\\w+)/g;\nconst hashtags = [];\nlet match;\nwhile ((match = hashtagPattern.exec(text)) !== null) {\n  hashtags.push(match[1]);\n}\n\n// Variation 4: URL extraction\nconst urlPattern = /https?:\\/\\/[^\\s]+/g;\nconst urls = text.match(urlPattern) || [];\n```\n\n---\n\n## Pattern 3: Markdown Parsing & Structured Data Extraction\n\n**Use Case**: Parsing formatted text, extracting structured fields, content transformation\n\n**When to use:**\n- Parsing markdown or HTML\n- Extracting data from structured text\n- Converting formatted content to JSON\n- Processing documentation or articles\n\n**Key Techniques**: Regex grouping, helper functions, data normalization, while loops for iteration\n\n### Complete Example\n\n```javascript\n// Parse markdown and extract structured information\nconst markdown = $input.first().json.data.markdown;\nconst adRegex = /##\\s*(.*?)\\n(.*?)(?=\\n##|\\n---|$)/gs;\n\nconst ads = [];\nlet match;\n\n// Helper function to parse time strings to minutes\nfunction parseTimeToMinutes(timeStr) {\n  if (!timeStr) return 999999;  // Sort unparseable times last\n\n  const hourMatch = timeStr.match(/(\\d+)\\s*hour/);\n  const dayMatch = timeStr.match(/(\\d+)\\s*day/);\n  const minMatch = timeStr.match(/(\\d+)\\s*min/);\n\n  let totalMinutes = 0;\n  if (dayMatch) totalMinutes += parseInt(dayMatch[1]) * 1440;  // 24 * 60\n  if (hourMatch) totalMinutes += parseInt(hourMatch[1]) * 60;\n  if (minMatch) totalMinutes += parseInt(minMatch[1]);\n\n  return totalMinutes;\n}\n\n// Extract all job postings from markdown\nwhile ((match = adRegex.exec(markdown)) !== null) {\n  const title = match[1]?.trim() || 'No title';\n  const content = match[2]?.trim() || '';\n\n  // Extract structured fields from content\n  const districtMatch = content.match(/\\*\\*District:\\*\\*\\s*(.*?)(?:\\n|$)/);\n  const salaryMatch = content.match(/\\*\\*Salary:\\*\\*\\s*(.*?)(?:\\n|$)/);\n  const timeMatch = content.match(/Posted:\\s*(.*?)\\*/);\n\n  ads.push({\n    title: title,\n    district: districtMatch?.[1].trim() || 'Unknown',\n    salary: salaryMatch?.[1].trim() || 'Not specified',\n    postedTimeAgo: timeMatch?.[1] || 'Unknown',\n    timeInMinutes: parseTimeToMinutes(timeMatch?.[1]),\n    fullContent: content,\n    extractedAt: new Date().toISOString()\n  });\n}\n\n// Sort by recency (posted time)\nads.sort((a, b) => a.timeInMinutes - b.timeInMinutes);\n\nreturn ads.map(ad => ({json: ad}));\n```\n\n### Variations\n\n```javascript\n// Variation 1: Parse HTML table to JSON\nconst tableRegex = /<tr>(.*?)<\\/tr>/gs;\nconst cellRegex = /<td>(.*?)<\\/td>/g;\n\nconst rows = [];\nlet tableMatch;\n\nwhile ((tableMatch = tableRegex.exec(htmlTable)) !== null) {\n  const cells = [];\n  let cellMatch;\n\n  while ((cellMatch = cellRegex.exec(tableMatch[1])) !== null) {\n    cells.push(cellMatch[1].trim());\n  }\n\n  if (cells.length > 0) {\n    rows.push(cells);\n  }\n}\n\n// Variation 2: Extract code blocks from markdown\nconst codeBlockRegex = /```(\\w+)?\\n(.*?)```/gs;\nconst codeBlocks = [];\n\nwhile ((match = codeBlockRegex.exec(markdown)) !== null) {\n  codeBlocks.push({\n    language: match[1] || 'plain',\n    code: match[2].trim()\n  });\n}\n\n// Variation 3: Parse YAML frontmatter\nconst frontmatterRegex = /^---\\n(.*?)\\n---/s;\nconst frontmatterMatch = content.match(frontmatterRegex);\n\nif (frontmatterMatch) {\n  const yamlLines = frontmatterMatch[1].split('\\n');\n  const metadata = {};\n\n  for (const line of yamlLines) {\n    const [key, ...valueParts] = line.split(':');\n    if (key && valueParts.length > 0) {\n      metadata[key.trim()] = valueParts.join(':').trim();\n    }\n  }\n}\n```\n\n---\n\n## Pattern 4: JSON Comparison & Validation\n\n**Use Case**: Workflow versioning, configuration validation, change detection, data integrity\n\n**When to use:**\n- Comparing two versions of data\n- Detecting changes in configurations\n- Validating data consistency\n- Checking for differences\n\n**Key Techniques**: JSON ordering, base64 decoding, deep comparison, object manipulation\n\n### Complete Example\n\n```javascript\n// Compare and validate JSON objects from different sources\nconst orderJsonKeys = (jsonObj) => {\n  const ordered = {};\n  Object.keys(jsonObj).sort().forEach(key => {\n    ordered[key] = jsonObj[key];\n  });\n  return ordered;\n};\n\nconst allItems = $input.all();\n\n// Assume first item is base64-encoded original, second is current\nconst origWorkflow = JSON.parse(\n  Buffer.from(allItems[0].json.content, 'base64').toString()\n);\nconst currentWorkflow = allItems[1].json;\n\n// Order keys for consistent comparison\nconst orderedOriginal = orderJsonKeys(origWorkflow);\nconst orderedCurrent = orderJsonKeys(currentWorkflow);\n\n// Deep comparison\nconst isSame = JSON.stringify(orderedOriginal) === JSON.stringify(orderedCurrent);\n\n// Find differences\nconst differences = [];\nfor (const key of Object.keys(orderedOriginal)) {\n  if (JSON.stringify(orderedOriginal[key]) !== JSON.stringify(orderedCurrent[key])) {\n    differences.push({\n      field: key,\n      original: orderedOriginal[key],\n      current: orderedCurrent[key]\n    });\n  }\n}\n\n// Check for new keys\nfor (const key of Object.keys(orderedCurrent)) {\n  if (!(key in orderedOriginal)) {\n    differences.push({\n      field: key,\n      original: null,\n      current: orderedCurrent[key],\n      status: 'new'\n    });\n  }\n}\n\nreturn [{\n  json: {\n    identical: isSame,\n    differenceCount: differences.length,\n    differences: differences,\n    original: orderedOriginal,\n    current: orderedCurrent,\n    comparedAt: new Date().toISOString()\n  }\n}];\n```\n\n### Variations\n\n```javascript\n// Variation 1: Simple equality check\nconst isEqual = JSON.stringify(obj1) === JSON.stringify(obj2);\n\n// Variation 2: Deep diff with detailed changes\nfunction deepDiff(obj1, obj2, path = '') {\n  const changes = [];\n\n  for (const key in obj1) {\n    const currentPath = path ? `${path}.${key}` : key;\n\n    if (!(key in obj2)) {\n      changes.push({type: 'removed', path: currentPath, value: obj1[key]});\n    } else if (typeof obj1[key] === 'object' && typeof obj2[key] === 'object') {\n      changes.push(...deepDiff(obj1[key], obj2[key], currentPath));\n    } else if (obj1[key] !== obj2[key]) {\n      changes.push({\n        type: 'modified',\n        path: currentPath,\n        from: obj1[key],\n        to: obj2[key]\n      });\n    }\n  }\n\n  for (const key in obj2) {\n    if (!(key in obj1)) {\n      const currentPath = path ? `${path}.${key}` : key;\n      changes.push({type: 'added', path: currentPath, value: obj2[key]});\n    }\n  }\n\n  return changes;\n}\n\n// Variation 3: Schema validation\nfunction validateSchema(data, schema) {\n  const errors = [];\n\n  for (const field of schema.required || []) {\n    if (!(field in data)) {\n      errors.push(`Missing required field: ${field}`);\n    }\n  }\n\n  for (const [field, type] of Object.entries(schema.types || {})) {\n    if (field in data && typeof data[field] !== type) {\n      errors.push(`Field ${field} should be ${type}, got ${typeof data[field]}`);\n    }\n  }\n\n  return {\n    valid: errors.length === 0,\n    errors\n  };\n}\n```\n\n---\n\n## Pattern 5: CRM Data Transformation\n\n**Use Case**: Lead enrichment, data normalization, API preparation, form data processing\n\n**When to use:**\n- Processing form submissions\n- Preparing data for CRM APIs\n- Normalizing contact information\n- Enriching lead data\n\n**Key Techniques**: Object destructuring, data mapping, format conversion, field splitting\n\n### Complete Example\n\n```javascript\n// Transform form data into CRM-compatible format\nconst item = $input.all()[0];\nconst {\n  name,\n  email,\n  phone,\n  company,\n  course_interest,\n  message,\n  timestamp\n} = item.json;\n\n// Split name into first and last\nconst nameParts = name.split(' ');\nconst firstName = nameParts[0] || '';\nconst lastName = nameParts.slice(1).join(' ') || 'Unknown';\n\n// Format phone number\nconst cleanPhone = phone.replace(/[^\\d]/g, '');  // Remove non-digits\n\n// Build CRM data structure\nconst crmData = {\n  data: {\n    type: 'Contact',\n    attributes: {\n      first_name: firstName,\n      last_name: lastName,\n      email1: email,\n      phone_work: cleanPhone,\n      account_name: company,\n      description: `Course Interest: ${course_interest}\\n\\nMessage: ${message}\\n\\nSubmitted: ${timestamp}`,\n      lead_source: 'Website Form',\n      status: 'New'\n    }\n  },\n  metadata: {\n    original_submission: timestamp,\n    processed_at: new Date().toISOString()\n  }\n};\n\nreturn [{\n  json: {\n    ...item.json,\n    crmData,\n    processed: true\n  }\n}];\n```\n\n### Variations\n\n```javascript\n// Variation 1: Multiple contact processing\nconst contacts = $input.all();\n\nreturn contacts.map(item => {\n  const data = item.json;\n  const [firstName, ...lastNameParts] = data.name.split(' ');\n\n  return {\n    json: {\n      firstName,\n      lastName: lastNameParts.join(' ') || 'Unknown',\n      email: data.email.toLowerCase(),\n      phone: data.phone.replace(/[^\\d]/g, ''),\n      tags: [data.source, data.interest_level].filter(Boolean)\n    }\n  };\n});\n\n// Variation 2: Field validation and normalization\nfunction normalizePContact(raw) {\n  return {\n    first_name: raw.firstName?.trim() || '',\n    last_name: raw.lastName?.trim() || 'Unknown',\n    email: raw.email?.toLowerCase().trim() || '',\n    phone: raw.phone?.replace(/[^\\d]/g, '') || '',\n    company: raw.company?.trim() || 'Unknown',\n    title: raw.title?.trim() || '',\n    valid: Boolean(raw.email && raw.firstName)\n  };\n}\n\n// Variation 3: Lead scoring\nfunction calculateLeadScore(data) {\n  let score = 0;\n\n  if (data.email) score += 10;\n  if (data.phone) score += 10;\n  if (data.company) score += 15;\n  if (data.title?.toLowerCase().includes('director')) score += 20;\n  if (data.title?.toLowerCase().includes('manager')) score += 15;\n  if (data.message?.length > 100) score += 10;\n\n  return score;\n}\n```\n\n---\n\n## Pattern 6: Release Information Processing\n\n**Use Case**: Version management, changelog parsing, release notes generation, GitHub API processing\n\n**When to use:**\n- Processing GitHub releases\n- Filtering stable versions\n- Generating changelog summaries\n- Extracting version information\n\n**Key Techniques**: Array filtering, conditional field extraction, date formatting, string manipulation\n\n### Complete Example\n\n```javascript\n// Extract and filter stable releases from GitHub API\nconst allReleases = $input.first().json;\n\nconst stableReleases = allReleases\n  .filter(release => !release.prerelease && !release.draft)\n  .slice(0, 10)\n  .map(release => {\n    // Extract highlights section from changelog\n    const body = release.body || '';\n    let highlights = 'No highlights available';\n\n    if (body.includes('## Highlights:')) {\n      highlights = body.split('## Highlights:')[1]?.split('##')[0]?.trim();\n    } else {\n      // Fallback to first 500 chars\n      highlights = body.substring(0, 500) + '...';\n    }\n\n    return {\n      tag: release.tag_name,\n      name: release.name,\n      published: release.published_at,\n      publishedDate: new Date(release.published_at).toLocaleDateString(),\n      author: release.author.login,\n      url: release.html_url,\n      changelog: body,\n      highlights: highlights,\n      assetCount: release.assets.length,\n      assets: release.assets.map(asset => ({\n        name: asset.name,\n        size: asset.size,\n        downloadCount: asset.download_count,\n        downloadUrl: asset.browser_download_url\n      }))\n    };\n  });\n\nreturn stableReleases.map(release => ({json: release}));\n```\n\n### Variations\n\n```javascript\n// Variation 1: Version comparison\nfunction compareVersions(v1, v2) {\n  const parts1 = v1.replace('v', '').split('.').map(Number);\n  const parts2 = v2.replace('v', '').split('.').map(Number);\n\n  for (let i = 0; i < Math.max(parts1.length, parts2.length); i++) {\n    const num1 = parts1[i] || 0;\n    const num2 = parts2[i] || 0;\n\n    if (num1 > num2) return 1;\n    if (num1 < num2) return -1;\n  }\n\n  return 0;\n}\n\n// Variation 2: Breaking change detection\nfunction hasBreakingChanges(changelog) {\n  const breakingKeywords = [\n    'BREAKING CHANGE',\n    'breaking change',\n    'BC:',\n    'ğŸ’¥'\n  ];\n\n  return breakingKeywords.some(keyword => changelog.includes(keyword));\n}\n\n// Variation 3: Extract version numbers\nconst versionPattern = /v?(\\d+)\\.(\\d+)\\.(\\d+)/;\nconst match = tagName.match(versionPattern);\n\nif (match) {\n  const [_, major, minor, patch] = match;\n  const version = {major: parseInt(major), minor: parseInt(minor), patch: parseInt(patch)};\n}\n```\n\n---\n\n## Pattern 7: Array Transformation with Context\n\n**Use Case**: Quick data transformation, field mapping, adding computed fields\n\n**When to use:**\n- Transforming arrays with additional context\n- Adding calculated fields\n- Simplifying complex objects\n- Pluralization logic\n\n**Key Techniques**: Array methods chaining, ternary operators, computed properties\n\n### Complete Example\n\n```javascript\n// Transform releases with contextual information\nconst releases = $input.first().json\n  .filter(release => !release.prerelease && !release.draft)\n  .slice(0, 10)\n  .map(release => ({\n    version: release.tag_name,\n    assetCount: release.assets.length,\n    assetsCountText: release.assets.length === 1 ? 'file' : 'files',\n    downloadUrl: release.html_url,\n    isRecent: new Date(release.published_at) > new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),\n    age: Math.floor((Date.now() - new Date(release.published_at)) / (24 * 60 * 60 * 1000)),\n    ageText: `${Math.floor((Date.now() - new Date(release.published_at)) / (24 * 60 * 60 * 1000))} days ago`\n  }));\n\nreturn releases.map(release => ({json: release}));\n```\n\n### Variations\n\n```javascript\n// Variation 1: Add ranking\nconst items = $input.all()\n  .sort((a, b) => b.json.score - a.json.score)\n  .map((item, index) => ({\n    json: {\n      ...item.json,\n      rank: index + 1,\n      medal: index < 3 ? ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'][index] : ''\n    }\n  }));\n\n// Variation 2: Add percentage calculations\nconst total = $input.all().reduce((sum, item) => sum + item.json.value, 0);\n\nconst itemsWithPercentage = $input.all().map(item => ({\n  json: {\n    ...item.json,\n    percentage: ((item.json.value / total) * 100).toFixed(2) + '%'\n  }\n}));\n\n// Variation 3: Add category labels\nconst categorize = (value) => {\n  if (value > 100) return 'High';\n  if (value > 50) return 'Medium';\n  return 'Low';\n};\n\nconst categorized = $input.all().map(item => ({\n  json: {\n    ...item.json,\n    category: categorize(item.json.value)\n  }\n}));\n```\n\n---\n\n## Pattern 8: Slack Block Kit Formatting\n\n**Use Case**: Chat notifications, rich message formatting, interactive messages\n\n**When to use:**\n- Sending formatted Slack messages\n- Creating interactive notifications\n- Building rich content for chat platforms\n- Status reports and alerts\n\n**Key Techniques**: Template literals, nested objects, Block Kit syntax, date formatting\n\n### Complete Example\n\n```javascript\n// Create Slack-formatted message with structured blocks\nconst date = new Date().toISOString().split('T')[0];\nconst data = $input.first().json;\n\nreturn [{\n  json: {\n    text: `Daily Report - ${date}`,  // Fallback text\n    blocks: [\n      {\n        type: \"header\",\n        text: {\n          type: \"plain_text\",\n          text: `ğŸ“Š Daily Security Report - ${date}`\n        }\n      },\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `*Status:* ${data.status === 'ok' ? 'âœ… All Clear' : 'âš ï¸ Issues Detected'}\\n*Alerts:* ${data.alertCount || 0}\\n*Updated:* ${new Date().toLocaleString()}`\n        }\n      },\n      {\n        type: \"divider\"\n      },\n      {\n        type: \"section\",\n        fields: [\n          {\n            type: \"mrkdwn\",\n            text: `*Failed Logins:*\\n${data.failedLogins || 0}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*API Errors:*\\n${data.apiErrors || 0}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*Uptime:*\\n${data.uptime || '100%'}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*Response Time:*\\n${data.avgResponseTime || 'N/A'}ms`\n          }\n        ]\n      },\n      {\n        type: \"context\",\n        elements: [{\n          type: \"mrkdwn\",\n          text: `Report generated automatically by n8n workflow`\n        }]\n      }\n    ]\n  }\n}];\n```\n\n### Variations\n\n```javascript\n// Variation 1: Interactive buttons\nconst blocksWithButtons = [\n  {\n    type: \"section\",\n    text: {\n      type: \"mrkdwn\",\n      text: \"Would you like to approve this request?\"\n    },\n    accessory: {\n      type: \"button\",\n      text: {\n        type: \"plain_text\",\n        text: \"Approve\"\n      },\n      style: \"primary\",\n      value: \"approve\",\n      action_id: \"approve_button\"\n    }\n  }\n];\n\n// Variation 2: List formatting\nconst items = ['Item 1', 'Item 2', 'Item 3'];\nconst formattedList = items.map((item, i) => `${i + 1}. ${item}`).join('\\n');\n\n// Variation 3: Status indicators\nfunction getStatusEmoji(status) {\n  const statusMap = {\n    'success': 'âœ…',\n    'warning': 'âš ï¸',\n    'error': 'âŒ',\n    'info': 'â„¹ï¸'\n  };\n\n  return statusMap[status] || 'â€¢';\n}\n\n// Variation 4: Truncate long messages\nfunction truncate(text, maxLength = 3000) {\n  if (text.length <= maxLength) return text;\n  return text.substring(0, maxLength - 3) + '...';\n}\n```\n\n---\n\n## Pattern 9: Top N Filtering & Ranking\n\n**Use Case**: RAG pipelines, ranking algorithms, result filtering, leaderboards\n\n**When to use:**\n- Getting top results by score\n- Filtering best/worst performers\n- Building leaderboards\n- Relevance ranking\n\n**Key Techniques**: Sorting, slicing, null coalescing, score calculations\n\n### Complete Example\n\n```javascript\n// Filter and rank by similarity score, return top results\nconst ragResponse = $input.item.json;\nconst chunks = ragResponse.chunks || [];\n\n// Sort by similarity (highest first)\nconst topChunks = chunks\n  .sort((a, b) => (b.similarity || 0) - (a.similarity || 0))\n  .slice(0, 6);\n\nreturn [{\n  json: {\n    query: ragResponse.query,\n    topChunks: topChunks,\n    count: topChunks.length,\n    maxSimilarity: topChunks[0]?.similarity || 0,\n    minSimilarity: topChunks[topChunks.length - 1]?.similarity || 0,\n    averageSimilarity: topChunks.reduce((sum, chunk) => sum + (chunk.similarity || 0), 0) / topChunks.length\n  }\n}];\n```\n\n### Variations\n\n```javascript\n// Variation 1: Top N with minimum threshold\nconst threshold = 0.7;\nconst topItems = $input.all()\n  .filter(item => item.json.score >= threshold)\n  .sort((a, b) => b.json.score - a.json.score)\n  .slice(0, 10);\n\n// Variation 2: Bottom N (worst performers)\nconst bottomItems = $input.all()\n  .sort((a, b) => a.json.score - b.json.score)  // Ascending\n  .slice(0, 5);\n\n// Variation 3: Top N by multiple criteria\nconst ranked = $input.all()\n  .map(item => ({\n    ...item,\n    compositeScore: (item.json.relevance * 0.6) + (item.json.recency * 0.4)\n  }))\n  .sort((a, b) => b.compositeScore - a.compositeScore)\n  .slice(0, 10);\n\n// Variation 4: Percentile filtering\nconst allScores = $input.all().map(item => item.json.score).sort((a, b) => b - a);\nconst percentile95 = allScores[Math.floor(allScores.length * 0.05)];\n\nconst topPercentile = $input.all().filter(item => item.json.score >= percentile95);\n```\n\n---\n\n## Pattern 10: String Aggregation & Reporting\n\n**Use Case**: Report generation, log aggregation, content concatenation, summary creation\n\n**When to use:**\n- Combining multiple text outputs\n- Generating reports from data\n- Aggregating logs or messages\n- Creating formatted summaries\n\n**Key Techniques**: Array joining, string concatenation, template literals, timestamp handling\n\n### Complete Example\n\n```javascript\n// Aggregate multiple text inputs into formatted report\nconst allItems = $input.all();\n\n// Collect all messages\nconst messages = allItems.map(item => item.json.message);\n\n// Build report\nconst header = `ğŸ¯ **Daily Summary Report**\\nğŸ“… ${new Date().toLocaleString()}\\nğŸ“Š Total Items: ${messages.length}\\n\\n`;\nconst divider = '\\n\\n---\\n\\n';\nconst footer = `\\n\\n---\\n\\nâœ… Report generated at ${new Date().toISOString()}`;\n\nconst finalReport = header + messages.join(divider) + footer;\n\nreturn [{\n  json: {\n    report: finalReport,\n    messageCount: messages.length,\n    generatedAt: new Date().toISOString(),\n    reportLength: finalReport.length\n  }\n}];\n```\n\n### Variations\n\n```javascript\n// Variation 1: Numbered list\nconst numberedReport = allItems\n  .map((item, index) => `${index + 1}. ${item.json.title}\\n   ${item.json.description}`)\n  .join('\\n\\n');\n\n// Variation 2: Markdown table\nconst headers = '| Name | Status | Score |\\n|------|--------|-------|\\n';\nconst rows = allItems\n  .map(item => `| ${item.json.name} | ${item.json.status} | ${item.json.score} |`)\n  .join('\\n');\n\nconst table = headers + rows;\n\n// Variation 3: HTML report\nconst htmlReport = `\n<!DOCTYPE html>\n<html>\n<head><title>Report</title></head>\n<body>\n  <h1>Report - ${new Date().toLocaleDateString()}</h1>\n  <ul>\n    ${allItems.map(item => `<li>${item.json.title}: ${item.json.value}</li>`).join('\\n    ')}\n  </ul>\n</body>\n</html>\n`;\n\n// Variation 4: JSON summary\nconst summary = {\n  generated: new Date().toISOString(),\n  totalItems: allItems.length,\n  items: allItems.map(item => item.json),\n  statistics: {\n    total: allItems.reduce((sum, item) => sum + (item.json.value || 0), 0),\n    average: allItems.reduce((sum, item) => sum + (item.json.value || 0), 0) / allItems.length,\n    max: Math.max(...allItems.map(item => item.json.value || 0)),\n    min: Math.min(...allItems.map(item => item.json.value || 0))\n  }\n};\n```\n\n---\n\n## Choosing the Right Pattern\n\n### Pattern Selection Guide\n\n| Your Goal | Use Pattern |\n|-----------|-------------|\n| Combine multiple API responses | Pattern 1 (Multi-source Aggregation) |\n| Extract mentions or keywords | Pattern 2 (Regex Filtering) |\n| Parse formatted text | Pattern 3 (Markdown Parsing) |\n| Detect changes in data | Pattern 4 (JSON Comparison) |\n| Prepare form data for CRM | Pattern 5 (CRM Transformation) |\n| Process GitHub releases | Pattern 6 (Release Processing) |\n| Add computed fields | Pattern 7 (Array Transformation) |\n| Format Slack messages | Pattern 8 (Block Kit Formatting) |\n| Get top results | Pattern 9 (Top N Filtering) |\n| Create text reports | Pattern 10 (String Aggregation) |\n\n### Combining Patterns\n\nMany real workflows combine multiple patterns:\n\n```javascript\n// Example: Multi-source aggregation + Top N filtering\nconst allItems = $input.all();\nconst aggregated = [];\n\n// Pattern 1: Aggregate from different sources\nfor (const item of allItems) {\n  // ... aggregation logic\n  aggregated.push(normalizedItem);\n}\n\n// Pattern 9: Get top 10 by score\nconst top10 = aggregated\n  .sort((a, b) => b.score - a.score)\n  .slice(0, 10);\n\n// Pattern 10: Generate report\nconst report = `Top 10 Items:\\n\\n${top10.map((item, i) => `${i + 1}. ${item.title} (${item.score})`).join('\\n')}`;\n\nreturn [{json: {report, items: top10}}];\n```\n\n---\n\n## Summary\n\n**Most Useful Patterns**:\n1. Multi-source Aggregation - Combining data from APIs, databases\n2. Top N Filtering - Rankings, leaderboards, best results\n3. Data Transformation - CRM data, field mapping, enrichment\n\n**Key Techniques Across Patterns**:\n- Array methods (map, filter, reduce, sort, slice)\n- Regex for pattern matching\n- Object manipulation and destructuring\n- Error handling with optional chaining\n- Template literals for formatting\n\n**See Also**:\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Data access methods\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Avoid common mistakes\n- [BUILTIN_FUNCTIONS.md](BUILTIN_FUNCTIONS.md) - Built-in helpers\n",
        "skills/n8n-code-javascript/DATA_ACCESS.md": "# Data Access Patterns - JavaScript Code Node\n\nComprehensive guide to accessing data in n8n Code nodes using JavaScript.\n\n---\n\n## Overview\n\nIn n8n Code nodes, you access data from previous nodes using built-in variables and methods. Understanding which method to use is critical for correct workflow execution.\n\n**Data Access Priority** (by common usage):\n1. **`$input.all()`** - Most common - Batch operations, aggregations\n2. **`$input.first()`** - Very common - Single item operations\n3. **`$input.item`** - Common - Each Item mode only\n4. **`$node[\"NodeName\"].json`** - Specific node references\n5. **`$json`** - Direct current item (legacy, use `$input` instead)\n\n---\n\n## Pattern 1: $input.all() - Process All Items\n\n**Usage**: Most common pattern for batch processing\n\n**When to use:**\n- Processing multiple records\n- Aggregating data (sum, count, average)\n- Filtering arrays\n- Transforming datasets\n- Comparing items\n- Sorting or ranking\n\n### Basic Usage\n\n```javascript\n// Get all items from previous node\nconst allItems = $input.all();\n\n// allItems is an array of objects like:\n// [\n//   {json: {id: 1, name: \"Alice\"}},\n//   {json: {id: 2, name: \"Bob\"}}\n// ]\n\nconsole.log(`Received ${allItems.length} items`);\n\nreturn allItems;\n```\n\n### Example 1: Filter Active Items\n\n```javascript\nconst allItems = $input.all();\n\n// Filter only active items\nconst activeItems = allItems.filter(item => item.json.status === 'active');\n\nreturn activeItems;\n```\n\n### Example 2: Transform All Items\n\n```javascript\nconst allItems = $input.all();\n\n// Map to new structure\nconst transformed = allItems.map(item => ({\n  json: {\n    id: item.json.id,\n    fullName: `${item.json.firstName} ${item.json.lastName}`,\n    email: item.json.email,\n    processedAt: new Date().toISOString()\n  }\n}));\n\nreturn transformed;\n```\n\n### Example 3: Aggregate Data\n\n```javascript\nconst allItems = $input.all();\n\n// Calculate total\nconst total = allItems.reduce((sum, item) => {\n  return sum + (item.json.amount || 0);\n}, 0);\n\nreturn [{\n  json: {\n    total,\n    count: allItems.length,\n    average: total / allItems.length\n  }\n}];\n```\n\n### Example 4: Sort and Limit\n\n```javascript\nconst allItems = $input.all();\n\n// Get top 5 by score\nconst topFive = allItems\n  .sort((a, b) => (b.json.score || 0) - (a.json.score || 0))\n  .slice(0, 5);\n\nreturn topFive.map(item => ({json: item.json}));\n```\n\n### Example 5: Group By Category\n\n```javascript\nconst allItems = $input.all();\n\n// Group items by category\nconst grouped = {};\n\nfor (const item of allItems) {\n  const category = item.json.category || 'Uncategorized';\n\n  if (!grouped[category]) {\n    grouped[category] = [];\n  }\n\n  grouped[category].push(item.json);\n}\n\n// Convert to array format\nreturn Object.entries(grouped).map(([category, items]) => ({\n  json: {\n    category,\n    items,\n    count: items.length\n  }\n}));\n```\n\n### Example 6: Deduplicate by ID\n\n```javascript\nconst allItems = $input.all();\n\n// Remove duplicates by ID\nconst seen = new Set();\nconst unique = [];\n\nfor (const item of allItems) {\n  const id = item.json.id;\n\n  if (!seen.has(id)) {\n    seen.add(id);\n    unique.push(item);\n  }\n}\n\nreturn unique;\n```\n\n---\n\n## Pattern 2: $input.first() - Get First Item\n\n**Usage**: Very common for single-item operations\n\n**When to use:**\n- Previous node returns single object\n- Working with API responses\n- Getting initial/first data point\n- Configuration or metadata access\n\n### Basic Usage\n\n```javascript\n// Get first item from previous node\nconst firstItem = $input.first();\n\n// Access the JSON data\nconst data = firstItem.json;\n\nconsole.log('First item:', data);\n\nreturn [{json: data}];\n```\n\n### Example 1: Process Single API Response\n\n```javascript\n// Get API response (typically single object)\nconst response = $input.first().json;\n\n// Extract what you need\nreturn [{\n  json: {\n    userId: response.data.user.id,\n    userName: response.data.user.name,\n    status: response.status,\n    fetchedAt: new Date().toISOString()\n  }\n}];\n```\n\n### Example 2: Transform Single Object\n\n```javascript\nconst data = $input.first().json;\n\n// Transform structure\nreturn [{\n  json: {\n    id: data.id,\n    contact: {\n      email: data.email,\n      phone: data.phone\n    },\n    address: {\n      street: data.street,\n      city: data.city,\n      zip: data.zip\n    }\n  }\n}];\n```\n\n### Example 3: Validate Single Item\n\n```javascript\nconst item = $input.first().json;\n\n// Validation logic\nconst isValid = item.email && item.email.includes('@');\n\nreturn [{\n  json: {\n    ...item,\n    valid: isValid,\n    validatedAt: new Date().toISOString()\n  }\n}];\n```\n\n### Example 4: Extract Nested Data\n\n```javascript\nconst response = $input.first().json;\n\n// Navigate nested structure\nconst users = response.data?.users || [];\n\nreturn users.map(user => ({\n  json: {\n    id: user.id,\n    name: user.profile?.name || 'Unknown',\n    email: user.contact?.email || 'no-email'\n  }\n}));\n```\n\n### Example 5: Combine with Other Methods\n\n```javascript\n// Get first item's data\nconst firstData = $input.first().json;\n\n// Use it to filter all items\nconst allItems = $input.all();\nconst matching = allItems.filter(item =>\n  item.json.category === firstData.targetCategory\n);\n\nreturn matching;\n```\n\n---\n\n## Pattern 3: $input.item - Current Item (Each Item Mode)\n\n**Usage**: Common in \"Run Once for Each Item\" mode\n\n**When to use:**\n- Mode is set to \"Run Once for Each Item\"\n- Need to process items independently\n- Per-item API calls or validations\n- Item-specific error handling\n\n**IMPORTANT**: Only use in \"Each Item\" mode. Will be undefined in \"All Items\" mode.\n\n### Basic Usage\n\n```javascript\n// In \"Run Once for Each Item\" mode\nconst currentItem = $input.item;\nconst data = currentItem.json;\n\nconsole.log('Processing item:', data.id);\n\nreturn [{\n  json: {\n    ...data,\n    processed: true\n  }\n}];\n```\n\n### Example 1: Add Processing Metadata\n\n```javascript\nconst item = $input.item;\n\nreturn [{\n  json: {\n    ...item.json,\n    processed: true,\n    processedAt: new Date().toISOString(),\n    processingDuration: Math.random() * 1000  // Simulated duration\n  }\n}];\n```\n\n### Example 2: Per-Item Validation\n\n```javascript\nconst item = $input.item;\nconst data = item.json;\n\n// Validate this specific item\nconst errors = [];\n\nif (!data.email) errors.push('Email required');\nif (!data.name) errors.push('Name required');\nif (data.age && data.age < 18) errors.push('Must be 18+');\n\nreturn [{\n  json: {\n    ...data,\n    valid: errors.length === 0,\n    errors: errors.length > 0 ? errors : undefined\n  }\n}];\n```\n\n### Example 3: Item-Specific API Call\n\n```javascript\nconst item = $input.item;\nconst userId = item.json.userId;\n\n// Make API call specific to this item\nconst response = await $helpers.httpRequest({\n  method: 'GET',\n  url: `https://api.example.com/users/${userId}/details`\n});\n\nreturn [{\n  json: {\n    ...item.json,\n    details: response\n  }\n}];\n```\n\n### Example 4: Conditional Processing\n\n```javascript\nconst item = $input.item;\nconst data = item.json;\n\n// Process based on item type\nif (data.type === 'premium') {\n  return [{\n    json: {\n      ...data,\n      discount: 0.20,\n      tier: 'premium'\n    }\n  }];\n} else {\n  return [{\n    json: {\n      ...data,\n      discount: 0.05,\n      tier: 'standard'\n    }\n  }];\n}\n```\n\n---\n\n## Pattern 4: Loop Processing - Critical Patterns\n\n**Usage**: Essential for Split in Batches (Loop) workflows\n\n**CRITICAL ERRORS TO AVOID**: Using `.first()` in loops, manual context management\n\n### The Problem: Loop Data Access Anti-Pattern\n\nMany developers make critical mistakes when working with loops in n8n:\n\n```javascript\n// âŒ WRONG: Using .first() inside a loop\n// This ALWAYS returns the first iteration's data, not current!\nconst currentPage = $('Loop Node').first().json;\n\n// âœ… CORRECT: Use .item inside loops\n// This automatically matches the current loop iteration\nconst currentPage = $('Loop Node').item.json;\n```\n\n**Why this matters**: `.first()` returns the **first execution result** (always iteration #1), while `.item` returns the **current iteration's data**.\n\n### Loop Processing Rules\n\n#### Rule 1: Inside Loop - Use `.item` for Loop Data\n\n**When**: Accessing data from nodes inside the loop (current iteration)\n\n```javascript\n// Inside a Split in Batches loop\n\n// âŒ WRONG: .first() gets stuck on iteration 1\nconst page = $('Loop Node').first().json;  // Always page 1!\n\n// âœ… CORRECT: .item gets current iteration\nconst page = $('Loop Node').item.json;  // Page 1, then 2, then 3...\n\n// âœ… CORRECT: Reference previous loop step\nconst prevStep = $('Previous Step in Loop').item.json;\n```\n\n#### Rule 2: Inside Loop - Use `.first()` for Static Data\n\n**When**: Accessing data from BEFORE the loop (configuration, constants)\n\n```javascript\n// Get static configuration (from before loop started)\nconst config = $('Initialize Config').first().json;\n\n// Get current loop item\nconst currentItem = $('Loop Node').item.json;\n\n// Use both together\nreturn [{\n  json: {\n    itemId: currentItem.id,\n    globalSetting: config.apiKey\n  }\n}];\n```\n\n#### Rule 3: After Loop - Use `.all()` to Collect Results\n\n**CRITICAL**: Don't use `this.getContext()` or `this.setContext()` for data collection!\n\n```javascript\n// âŒ WRONG: Manual context management (unnecessary and error-prone)\nlet accumulated = this.getContext('results') || [];\naccumulated.push(currentResult);\nthis.setContext('results', accumulated);\n\n// âœ… CORRECT: n8n automatically tracks all executions\n// After loop completes, use .all() to get everything\nconst allResults = $('Node Inside Loop').all().map(item => item.json);\n```\n\n### Complete Loop Example\n\n```javascript\n// ========================================\n// INSIDE THE LOOP (Processing each item)\n// ========================================\n\n// 1. Get current loop iteration data\nconst currentPage = $('Split in Batches').item.json;\n\n// 2. Get static configuration from before loop\nconst prompts = $('Initialize Prompts').first().json.videoPrompts;\n\n// 3. Match current item with configuration\nconst matchedPrompt = prompts.find(p => p.pageNumber === currentPage.pageNumber);\n\n// 4. Return result for THIS iteration only\n// DON'T try to accumulate - n8n does this automatically!\nreturn [{\n  json: {\n    pageNumber: currentPage.pageNumber,\n    imageUrl: currentPage.imageUrl,\n    prompt: matchedPrompt ? matchedPrompt.prompt : 'Default'\n  }\n}];\n\n// ========================================\n// AFTER LOOP COMPLETES (Done branch)\n// ========================================\n\n// 1. Get original input data structure\nconst originalData = $('Initialize Prompts').first().json;\nconst pages = originalData.pages;\n\n// 2. Collect ALL results from loop using .all()\nconst allVideos = $('Video Generation Node').all().map(item => item.json);\n\n// 3. Merge loop results with original structure\nconst finalResult = pages.map(page => {\n  const video = allVideos.find(v => v.pageNumber === page.pageNumber);\n  return {\n    ...page,\n    videoUrl: video ? video.videoUrl : null\n  };\n});\n\nreturn [{\n  json: {\n    courseTitle: originalData.courseTitle,\n    totalVideos: allVideos.length,\n    pages: finalResult\n  }\n}];\n```\n\n### Debug Mode: Use $input not $('NodeName')\n\n**Problem**: In Execute Node (single-step debug), referencing other nodes by name often returns cached/stale data.\n\n```javascript\n// âŒ RISKY: In debug mode, may show old cached data\nconst data = $('Previous Node').all();\n\n// âœ… SAFE: Always reflects actual input to current node\nconst data = $input.all();\n```\n\n**When to use each:**\n- **Production workflow**: Both work, but `$input` is clearer\n- **Debug/Execute Node**: Use `$input` to see actual flowing data\n- **Multi-node reference**: Use `$node[\"Name\"]` when you need specific nodes\n\n### Common Loop Mistakes Summary\n\n| Mistake | Wrong Code | Correct Code | Impact |\n|---------|-----------|--------------|---------|\n| Using `.first()` in loop | `$('Loop').first().json` | `$('Loop').item.json` | Only processes first item repeatedly |\n| Manual accumulation | `this.setContext('data', arr)` | Use `.all()` after loop | Fragile, error-prone, unnecessary |\n| Referencing future nodes | `$('Node After This').json` | Reorder workflow | \"Time paradox\" - data doesn't exist yet |\n| Wrong debug reference | `$('Node').all()` in Execute | `$input.all()` | Shows stale cached data |\n\n### When to Use Each Method in Loops\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Inside Loop (processing current iteration) â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ â€¢ Loop node data:     .item                 â”‚\nâ”‚ â€¢ Previous loop step: .item                 â”‚\nâ”‚ â€¢ Pre-loop config:    .first()              â”‚\nâ”‚ â€¢ Input to this node: $input                â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ After Loop (Done branch - collecting)      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ â€¢ All loop results:   .all()                â”‚\nâ”‚ â€¢ Original structure: .first()              â”‚\nâ”‚ â€¢ Merge/aggregate:    .all().map()          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Pattern 5: $node - Reference Other Nodes\n\n**Usage**: Less common, but powerful for specific scenarios\n\n**When to use:**\n- Need data from specific named node\n- Combining data from multiple nodes\n- Accessing metadata about workflow execution\n\n### Basic Usage\n\n```javascript\n// Get output from specific node\nconst webhookData = $node[\"Webhook\"].json;\nconst apiData = $node[\"HTTP Request\"].json;\n\nreturn [{\n  json: {\n    fromWebhook: webhookData,\n    fromAPI: apiData\n  }\n}];\n```\n\n### Example 1: Combine Multiple Sources\n\n```javascript\n// Reference multiple nodes\nconst webhook = $node[\"Webhook\"].json;\nconst database = $node[\"Postgres\"].json;\nconst api = $node[\"HTTP Request\"].json;\n\nreturn [{\n  json: {\n    combined: {\n      webhook: webhook.body,\n      dbRecords: database.length,\n      apiResponse: api.status\n    },\n    processedAt: new Date().toISOString()\n  }\n}];\n```\n\n### Example 2: Compare Across Nodes\n\n```javascript\nconst oldData = $node[\"Get Old Data\"].json;\nconst newData = $node[\"Get New Data\"].json;\n\n// Compare\nconst changes = {\n  added: newData.filter(n => !oldData.find(o => o.id === n.id)),\n  removed: oldData.filter(o => !newData.find(n => n.id === o.id)),\n  modified: newData.filter(n => {\n    const old = oldData.find(o => o.id === n.id);\n    return old && JSON.stringify(old) !== JSON.stringify(n);\n  })\n};\n\nreturn [{\n  json: {\n    changes,\n    summary: {\n      added: changes.added.length,\n      removed: changes.removed.length,\n      modified: changes.modified.length\n    }\n  }\n}];\n```\n\n### Example 3: Access Node Metadata\n\n```javascript\n// Get data from specific execution path\nconst ifTrueBranch = $node[\"IF True\"].json;\nconst ifFalseBranch = $node[\"IF False\"].json;\n\n// Use whichever branch executed\nconst result = ifTrueBranch || ifFalseBranch || {};\n\nreturn [{json: result}];\n```\n\n---\n\n## Critical: Webhook Data Structure\n\n**MOST COMMON MISTAKE**: Forgetting webhook data is nested under `.body`\n\n### The Problem\n\nWebhook node wraps all incoming data under a `body` property. This catches many developers by surprise.\n\n### Structure\n\n```javascript\n// Webhook node output structure:\n{\n  \"headers\": {\n    \"content-type\": \"application/json\",\n    \"user-agent\": \"...\",\n    // ... other headers\n  },\n  \"params\": {},\n  \"query\": {},\n  \"body\": {\n    // â† YOUR DATA IS HERE\n    \"name\": \"Alice\",\n    \"email\": \"alice@example.com\",\n    \"message\": \"Hello!\"\n  }\n}\n```\n\n### Wrong vs Right\n\n```javascript\n// âŒ WRONG: Trying to access directly\nconst name = $json.name;  // undefined\nconst email = $json.email;  // undefined\n\n// âœ… CORRECT: Access via .body\nconst name = $json.body.name;  // \"Alice\"\nconst email = $json.body.email;  // \"alice@example.com\"\n\n// âœ… CORRECT: Extract body first\nconst webhookData = $json.body;\nconst name = webhookData.name;  // \"Alice\"\nconst email = webhookData.email;  // \"alice@example.com\"\n```\n\n### Example: Full Webhook Processing\n\n```javascript\n// Get webhook data from previous node\nconst webhookOutput = $input.first().json;\n\n// Access the actual payload\nconst payload = webhookOutput.body;\n\n// Access headers if needed\nconst contentType = webhookOutput.headers['content-type'];\n\n// Access query parameters if needed\nconst apiKey = webhookOutput.query.api_key;\n\n// Process the actual data\nreturn [{\n  json: {\n    // Data from webhook body\n    userName: payload.name,\n    userEmail: payload.email,\n    message: payload.message,\n\n    // Metadata\n    receivedAt: new Date().toISOString(),\n    contentType: contentType,\n    authenticated: !!apiKey\n  }\n}];\n```\n\n### POST Data, Query Params, and Headers\n\n```javascript\nconst webhook = $input.first().json;\n\nreturn [{\n  json: {\n    // POST body data\n    formData: webhook.body,\n\n    // Query parameters (?key=value)\n    queryParams: webhook.query,\n\n    // HTTP headers\n    userAgent: webhook.headers['user-agent'],\n    contentType: webhook.headers['content-type'],\n\n    // Request metadata\n    method: webhook.method,  // POST, GET, etc.\n    url: webhook.url\n  }\n}];\n```\n\n### Common Webhook Scenarios\n\n```javascript\n// Scenario 1: Form submission\nconst formData = $json.body;\nconst name = formData.name;\nconst email = formData.email;\n\n// Scenario 2: JSON API webhook\nconst apiPayload = $json.body;\nconst eventType = apiPayload.event;\nconst data = apiPayload.data;\n\n// Scenario 3: Query parameters\nconst apiKey = $json.query.api_key;\nconst userId = $json.query.user_id;\n\n// Scenario 4: Headers\nconst authorization = $json.headers['authorization'];\nconst signature = $json.headers['x-signature'];\n```\n\n---\n\n## Choosing the Right Pattern\n\n### Decision Tree\n\n```\nDo you need ALL items from previous node?\nâ”œâ”€ YES â†’ Use $input.all()\nâ”‚\nâ””â”€ NO â†’ Do you need just the FIRST item?\n    â”œâ”€ YES â†’ Use $input.first()\n    â”‚\n    â””â”€ NO â†’ Are you in \"Each Item\" mode?\n        â”œâ”€ YES â†’ Use $input.item\n        â”‚\n        â””â”€ NO â†’ Do you need specific node data?\n            â”œâ”€ YES â†’ Use $node[\"NodeName\"]\n            â””â”€ NO â†’ Use $input.first() (default)\n```\n\n### Quick Reference Table\n\n| Scenario | Use This | Example |\n|----------|----------|---------|\n| Sum all amounts | `$input.all()` | `allItems.reduce((sum, i) => sum + i.json.amount, 0)` |\n| Get API response | `$input.first()` | `$input.first().json.data` |\n| Process each independently | `$input.item` | `$input.item.json` (Each Item mode) |\n| Combine two nodes | `$node[\"Name\"]` | `$node[\"API\"].json` |\n| Filter array | `$input.all()` | `allItems.filter(i => i.json.active)` |\n| Transform single object | `$input.first()` | `{...input.first().json, new: true}` |\n| Webhook data | `$input.first()` | `$input.first().json.body` |\n\n---\n\n## Common Mistakes\n\n### Mistake 1: Using $json Without Context\n\n```javascript\n// âŒ WRONG: $json is ambiguous\nconst value = $json.field;\n\n// âœ… CORRECT: Be explicit\nconst value = $input.first().json.field;\n```\n\n### Mistake 2: Forgetting .json Property\n\n```javascript\n// âŒ WRONG: Trying to access fields on item object\nconst items = $input.all();\nconst names = items.map(item => item.name);  // undefined\n\n// âœ… CORRECT: Access via .json\nconst names = items.map(item => item.json.name);\n```\n\n### Mistake 3: Using $input.item in All Items Mode\n\n```javascript\n// âŒ WRONG: $input.item is undefined in \"All Items\" mode\nconst data = $input.item.json;  // Error!\n\n// âœ… CORRECT: Use appropriate method\nconst data = $input.first().json;  // Or $input.all()\n```\n\n### Mistake 4: Not Handling Empty Arrays\n\n```javascript\n// âŒ WRONG: Crashes if no items\nconst first = $input.all()[0].json;\n\n// âœ… CORRECT: Check length first\nconst items = $input.all();\nif (items.length === 0) {\n  return [];\n}\nconst first = items[0].json;\n\n// âœ… ALSO CORRECT: Use $input.first()\nconst first = $input.first().json;  // Built-in safety\n```\n\n### Mistake 5: Modifying Original Data\n\n```javascript\n// âŒ RISKY: Mutating original\nconst items = $input.all();\nitems[0].json.modified = true;  // Modifies original\nreturn items;\n\n// âœ… SAFE: Create new objects\nconst items = $input.all();\nreturn items.map(item => ({\n  json: {\n    ...item.json,\n    modified: true\n  }\n}));\n```\n\n---\n\n## Advanced Patterns\n\n### Pattern: Pagination Handling\n\n```javascript\nconst currentPage = $input.all();\nconst pageNumber = $node[\"Set Page\"].json.page || 1;\n\n// Combine with previous pages\nconst allPreviousPages = $node[\"Accumulator\"]?.json.accumulated || [];\n\nreturn [{\n  json: {\n    accumulated: [...allPreviousPages, ...currentPage],\n    currentPage: pageNumber,\n    totalItems: allPreviousPages.length + currentPage.length\n  }\n}];\n```\n\n### Pattern: Conditional Node Reference\n\n```javascript\n// Access different nodes based on condition\nconst condition = $input.first().json.type;\n\nlet data;\nif (condition === 'api') {\n  data = $node[\"API Response\"].json;\n} else if (condition === 'database') {\n  data = $node[\"Database\"].json;\n} else {\n  data = $node[\"Default\"].json;\n}\n\nreturn [{json: data}];\n```\n\n### Pattern: Multi-Node Aggregation\n\n```javascript\n// Collect data from multiple named nodes\nconst sources = ['Source1', 'Source2', 'Source3'];\nconst allData = [];\n\nfor (const source of sources) {\n  const nodeData = $node[source]?.json;\n  if (nodeData) {\n    allData.push({\n      source,\n      data: nodeData\n    });\n  }\n}\n\nreturn allData.map(item => ({json: item}));\n```\n\n---\n\n## Summary\n\n**Most Common Patterns**:\n1. `$input.all()` - Process multiple items, batch operations\n2. `$input.first()` - Single item, API responses\n3. `$input.item` - Each Item mode processing\n\n**Critical Rule**:\n- Webhook data is under `.body` property\n\n**Best Practice**:\n- Be explicit: Use `$input.first().json.field` instead of `$json.field`\n- Always check for null/undefined\n- Use appropriate method for your mode (All Items vs Each Item)\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Overview and quick start\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Production patterns\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Avoid common mistakes\n",
        "skills/n8n-code-javascript/ERROR_PATTERNS.md": "# Error Patterns - JavaScript Code Node\n\nComplete guide to avoiding the most common Code node errors.\n\n---\n\n## Overview\n\nThis guide covers the **top 5 error patterns** encountered in n8n Code nodes. Understanding and avoiding these errors will save you significant debugging time.\n\n**Error Frequency**:\n1. Empty Code / Missing Return - **38% of failures**\n2. Expression Syntax Confusion - **8% of failures**\n3. Incorrect Return Wrapper - **5% of failures**\n4. Unmatched Expression Brackets - **6% of failures**\n5. Missing Null Checks - **Common runtime error**\n\n---\n\n## Error #1: Empty Code or Missing Return Statement\n\n**Frequency**: Most common error (38% of all validation failures)\n\n**What Happens**:\n- Workflow execution fails\n- Next nodes receive no data\n- Error: \"Code cannot be empty\" or \"Code must return data\"\n\n### The Problem\n\n```javascript\n// âŒ ERROR: No code at all\n// (Empty code field)\n```\n\n```javascript\n// âŒ ERROR: Code executes but doesn't return anything\nconst items = $input.all();\n\n// Process items\nfor (const item of items) {\n  console.log(item.json.name);\n}\n\n// Forgot to return!\n```\n\n```javascript\n// âŒ ERROR: Early return path exists, but not all paths return\nconst items = $input.all();\n\nif (items.length === 0) {\n  return [];  // âœ… This path returns\n}\n\n// Process items\nconst processed = items.map(item => ({json: item.json}));\n\n// âŒ Forgot to return processed!\n```\n\n### The Solution\n\n```javascript\n// âœ… CORRECT: Always return data\nconst items = $input.all();\n\n// Process items\nconst processed = items.map(item => ({\n  json: {\n    ...item.json,\n    processed: true\n  }\n}));\n\nreturn processed;  // âœ… Return statement present\n```\n\n```javascript\n// âœ… CORRECT: Return empty array if no items\nconst items = $input.all();\n\nif (items.length === 0) {\n  return [];  // Valid: empty array when no data\n}\n\n// Process and return\nreturn items.map(item => ({json: item.json}));\n```\n\n```javascript\n// âœ… CORRECT: All code paths return\nconst items = $input.all();\n\nif (items.length === 0) {\n  return [];\n} else if (items.length === 1) {\n  return [{json: {single: true, data: items[0].json}}];\n} else {\n  return items.map(item => ({json: item.json}));\n}\n\n// All paths covered\n```\n\n### Checklist\n\n- [ ] Code field is not empty\n- [ ] Return statement exists\n- [ ] ALL code paths return data (if/else branches)\n- [ ] Return format is correct (`[{json: {...}}]`)\n- [ ] Return happens even on errors (use try-catch)\n\n---\n\n## Error #2: Expression Syntax Confusion\n\n**Frequency**: 8% of validation failures\n\n**What Happens**:\n- Syntax error in code execution\n- Error: \"Unexpected token\" or \"Expression syntax is not valid in Code nodes\"\n- Template variables not evaluated\n\n### The Problem\n\nn8n has TWO distinct syntaxes:\n1. **Expression syntax** `{{ }}` - Used in OTHER nodes (Set, IF, HTTP Request)\n2. **JavaScript** - Used in CODE nodes (no `{{ }}`)\n\nMany developers mistakenly use expression syntax inside Code nodes.\n\n```javascript\n// âŒ WRONG: Using n8n expression syntax in Code node\nconst userName = \"{{ $json.name }}\";\nconst userEmail = \"{{ $json.body.email }}\";\n\nreturn [{\n  json: {\n    name: userName,\n    email: userEmail\n  }\n}];\n\n// Result: Literal string \"{{ $json.name }}\", NOT the value!\n```\n\n```javascript\n// âŒ WRONG: Trying to evaluate expressions\nconst value = \"{{ $now.toFormat('yyyy-MM-dd') }}\";\n```\n\n### The Solution\n\n```javascript\n// âœ… CORRECT: Use JavaScript directly (no {{ }})\nconst userName = $json.name;\nconst userEmail = $json.body.email;\n\nreturn [{\n  json: {\n    name: userName,\n    email: userEmail\n  }\n}];\n```\n\n```javascript\n// âœ… CORRECT: JavaScript template literals (use backticks)\nconst message = `Hello, ${$json.name}! Your email is ${$json.email}`;\n\nreturn [{\n  json: {\n    greeting: message\n  }\n}];\n```\n\n```javascript\n// âœ… CORRECT: Direct variable access\nconst item = $input.first().json;\n\nreturn [{\n  json: {\n    name: item.name,\n    email: item.email,\n    timestamp: new Date().toISOString()  // JavaScript Date, not {{ }}\n  }\n}];\n```\n\n### Comparison Table\n\n| Context | Syntax | Example |\n|---------|--------|---------|\n| Set node | `{{ }}` expressions | `{{ $json.name }}` |\n| IF node | `{{ }}` expressions | `{{ $json.age > 18 }}` |\n| HTTP Request URL | `{{ }}` expressions | `{{ $json.userId }}` |\n| **Code node** | **JavaScript** | `$json.name` |\n| **Code node strings** | **Template literals** | `` `Hello ${$json.name}` `` |\n\n### Quick Fix Guide\n\n```javascript\n// WRONG â†’ RIGHT conversions\n\n// âŒ \"{{ $json.field }}\"\n// âœ… $json.field\n\n// âŒ \"{{ $now }}\"\n// âœ… new Date().toISOString()\n\n// âŒ \"{{ $node['HTTP Request'].json.data }}\"\n// âœ… $node[\"HTTP Request\"].json.data\n\n// âŒ `{{ $json.firstName }} {{ $json.lastName }}`\n// âœ… `${$json.firstName} ${$json.lastName}`\n```\n\n---\n\n## Error #3: Incorrect Return Wrapper Format\n\n**Frequency**: 5% of validation failures\n\n**What Happens**:\n- Error: \"Return value must be an array of objects\"\n- Error: \"Each item must have a json property\"\n- Next nodes receive malformed data\n\n### The Problem\n\nCode nodes MUST return:\n- **Array** of objects\n- Each object MUST have a **`json` property**\n\n```javascript\n// âŒ WRONG: Returning object instead of array\nreturn {\n  json: {\n    result: 'success'\n  }\n};\n// Missing array wrapper []\n```\n\n```javascript\n// âŒ WRONG: Returning array without json wrapper\nreturn [\n  {id: 1, name: 'Alice'},\n  {id: 2, name: 'Bob'}\n];\n// Missing json property\n```\n\n```javascript\n// âŒ WRONG: Returning plain value\nreturn \"processed\";\n```\n\n```javascript\n// âŒ WRONG: Returning items without mapping\nreturn $input.all();\n// Works if items already have json property, but not guaranteed\n```\n\n```javascript\n// âŒ WRONG: Incomplete structure\nreturn [{data: {result: 'success'}}];\n// Should be {json: {...}}, not {data: {...}}\n```\n\n### The Solution\n\n```javascript\n// âœ… CORRECT: Single result\nreturn [{\n  json: {\n    result: 'success',\n    timestamp: new Date().toISOString()\n  }\n}];\n```\n\n```javascript\n// âœ… CORRECT: Multiple results\nreturn [\n  {json: {id: 1, name: 'Alice'}},\n  {json: {id: 2, name: 'Bob'}},\n  {json: {id: 3, name: 'Carol'}}\n];\n```\n\n```javascript\n// âœ… CORRECT: Transforming array\nconst items = $input.all();\n\nreturn items.map(item => ({\n  json: {\n    id: item.json.id,\n    name: item.json.name,\n    processed: true\n  }\n}));\n```\n\n```javascript\n// âœ… CORRECT: Empty result\nreturn [];\n// Valid when no data to return\n```\n\n```javascript\n// âœ… CORRECT: Conditional returns\nif (shouldProcess) {\n  return [{json: {result: 'processed'}}];\n} else {\n  return [];\n}\n```\n\n### Return Format Checklist\n\n- [ ] Return value is an **array** `[...]`\n- [ ] Each array element has **`json` property**\n- [ ] Structure is `[{json: {...}}]` or `[{json: {...}}, {json: {...}}]`\n- [ ] NOT `{json: {...}}` (missing array wrapper)\n- [ ] NOT `[{...}]` (missing json property)\n\n### Common Scenarios\n\n```javascript\n// Scenario 1: Single object from API\nconst response = $input.first().json;\n\n// âœ… CORRECT\nreturn [{json: response}];\n\n// âŒ WRONG\nreturn {json: response};\n\n\n// Scenario 2: Array of objects\nconst users = $input.all();\n\n// âœ… CORRECT\nreturn users.map(user => ({json: user.json}));\n\n// âŒ WRONG\nreturn users;  // Risky - depends on existing structure\n\n\n// Scenario 3: Computed result\nconst total = $input.all().reduce((sum, item) => sum + item.json.amount, 0);\n\n// âœ… CORRECT\nreturn [{json: {total}}];\n\n// âŒ WRONG\nreturn {total};\n\n\n// Scenario 4: No results\n// âœ… CORRECT\nreturn [];\n\n// âŒ WRONG\nreturn null;\n```\n\n---\n\n## Error #4: Unmatched Expression Brackets\n\n**Frequency**: 6% of validation failures\n\n**What Happens**:\n- Parsing error during save\n- Error: \"Unmatched expression brackets\"\n- Code appears correct but fails validation\n\n### The Problem\n\nThis error typically occurs when:\n1. Strings contain unbalanced quotes\n2. Multi-line strings with special characters\n3. Template literals with nested brackets\n\n```javascript\n// âŒ WRONG: Unescaped quote in string\nconst message = \"It's a nice day\";\n// Single quote breaks string\n```\n\n```javascript\n// âŒ WRONG: Unbalanced brackets in regex\nconst pattern = /\\{(\\w+)\\}/;  // JSON storage issue\n```\n\n```javascript\n// âŒ WRONG: Multi-line string with quotes\nconst html = \"\n  <div class=\"container\">\n    <p>Hello</p>\n  </div>\n\";\n// Quote balance issues\n```\n\n### The Solution\n\n```javascript\n// âœ… CORRECT: Escape quotes\nconst message = \"It\\\\'s a nice day\";\n// Or use different quotes\nconst message = \"It's a nice day\";  // Double quotes work\n```\n\n```javascript\n// âœ… CORRECT: Escape regex properly\nconst pattern = /\\\\{(\\\\w+)\\\\}/;\n```\n\n```javascript\n// âœ… CORRECT: Template literals for multi-line\nconst html = `\n  <div class=\"container\">\n    <p>Hello</p>\n  </div>\n`;\n// Backticks handle multi-line and quotes\n```\n\n```javascript\n// âœ… CORRECT: Escape backslashes\nconst path = \"C:\\\\\\\\Users\\\\\\\\Documents\\\\\\\\file.txt\";\n```\n\n### Escaping Guide\n\n| Character | Escape As | Example |\n|-----------|-----------|---------|\n| Single quote in single-quoted string | `\\\\'` | `'It\\\\'s working'` |\n| Double quote in double-quoted string | `\\\\\"` | `\"She said \\\\\"hello\\\\\"\"` |\n| Backslash | `\\\\\\\\` | `\"C:\\\\\\\\path\"` |\n| Newline | `\\\\n` | `\"Line 1\\\\nLine 2\"` |\n| Tab | `\\\\t` | `\"Column1\\\\tColumn2\"` |\n\n### Best Practices\n\n```javascript\n// âœ… BEST: Use template literals for complex strings\nconst message = `User ${name} said: \"Hello!\"`;\n\n// âœ… BEST: Use template literals for HTML\nconst html = `\n  <div class=\"${className}\">\n    <h1>${title}</h1>\n    <p>${content}</p>\n  </div>\n`;\n\n// âœ… BEST: Use template literals for JSON\nconst jsonString = `{\n  \"name\": \"${name}\",\n  \"email\": \"${email}\"\n}`;\n```\n\n---\n\n## Error #5: Missing Null Checks / Undefined Access\n\n**Frequency**: Very common runtime error\n\n**What Happens**:\n- Workflow execution stops\n- Error: \"Cannot read property 'X' of undefined\"\n- Error: \"Cannot read property 'X' of null\"\n- Crashes on missing data\n\n### The Problem\n\n```javascript\n// âŒ WRONG: No null check - crashes if user doesn't exist\nconst email = item.json.user.email;\n```\n\n```javascript\n// âŒ WRONG: Assumes array has items\nconst firstItem = $input.all()[0].json;\n```\n\n```javascript\n// âŒ WRONG: Assumes nested property exists\nconst city = $json.address.city;\n```\n\n```javascript\n// âŒ WRONG: No validation before array operations\nconst names = $json.users.map(user => user.name);\n```\n\n### The Solution\n\n```javascript\n// âœ… CORRECT: Optional chaining\nconst email = item.json?.user?.email || 'no-email@example.com';\n```\n\n```javascript\n// âœ… CORRECT: Check array length\nconst items = $input.all();\n\nif (items.length === 0) {\n  return [];\n}\n\nconst firstItem = items[0].json;\n```\n\n```javascript\n// âœ… CORRECT: Guard clauses\nconst data = $input.first().json;\n\nif (!data.address) {\n  return [{json: {error: 'No address provided'}}];\n}\n\nconst city = data.address.city;\n```\n\n```javascript\n// âœ… CORRECT: Default values\nconst users = $json.users || [];\nconst names = users.map(user => user.name || 'Unknown');\n```\n\n```javascript\n// âœ… CORRECT: Try-catch for risky operations\ntry {\n  const email = item.json.user.email.toLowerCase();\n  return [{json: {email}}];\n} catch (error) {\n  return [{\n    json: {\n      error: 'Invalid user data',\n      details: error.message\n    }\n  }];\n}\n```\n\n### Safe Access Patterns\n\n```javascript\n// Pattern 1: Optional chaining (modern, recommended)\nconst value = data?.nested?.property?.value;\n\n// Pattern 2: Logical OR with default\nconst value = data.property || 'default';\n\n// Pattern 3: Ternary check\nconst value = data.property ? data.property : 'default';\n\n// Pattern 4: Guard clause\nif (!data.property) {\n  return [];\n}\nconst value = data.property;\n\n// Pattern 5: Try-catch\ntry {\n  const value = data.nested.property.value;\n} catch (error) {\n  const value = 'default';\n}\n```\n\n### Webhook Data Safety\n\n```javascript\n// Webhook data requires extra safety\n\n// âŒ RISKY: Assumes all fields exist\nconst name = $json.body.user.name;\nconst email = $json.body.user.email;\n\n// âœ… SAFE: Check each level\nconst body = $json.body || {};\nconst user = body.user || {};\nconst name = user.name || 'Unknown';\nconst email = user.email || 'no-email';\n\n// âœ… BETTER: Optional chaining\nconst name = $json.body?.user?.name || 'Unknown';\nconst email = $json.body?.user?.email || 'no-email';\n```\n\n### Array Safety\n\n```javascript\n// âŒ RISKY: No length check\nconst items = $input.all();\nconst firstId = items[0].json.id;\n\n// âœ… SAFE: Check length\nconst items = $input.all();\n\nif (items.length > 0) {\n  const firstId = items[0].json.id;\n} else {\n  // Handle empty case\n  return [];\n}\n\n// âœ… BETTER: Use $input.first()\nconst firstItem = $input.first();\nconst firstId = firstItem.json.id;  // Built-in safety\n```\n\n### Object Property Safety\n\n```javascript\n// âŒ RISKY: Direct access\nconst config = $json.settings.advanced.timeout;\n\n// âœ… SAFE: Step by step with defaults\nconst settings = $json.settings || {};\nconst advanced = settings.advanced || {};\nconst timeout = advanced.timeout || 30000;\n\n// âœ… BETTER: Optional chaining\nconst timeout = $json.settings?.advanced?.timeout ?? 30000;\n// Note: ?? (nullish coalescing) vs || (logical OR)\n```\n\n---\n\n## Error Prevention Checklist\n\nUse this checklist before deploying Code nodes:\n\n### Code Structure\n- [ ] Code field is not empty\n- [ ] Return statement exists\n- [ ] All code paths return data\n\n### Return Format\n- [ ] Returns array: `[...]`\n- [ ] Each item has `json` property: `{json: {...}}`\n- [ ] Format is `[{json: {...}}]`\n\n### Syntax\n- [ ] No `{{ }}` expression syntax (use JavaScript)\n- [ ] Template literals use backticks: `` `${variable}` ``\n- [ ] All quotes and brackets balanced\n- [ ] Strings properly escaped\n\n### Data Safety\n- [ ] Null checks for optional properties\n- [ ] Array length checks before access\n- [ ] Webhook data accessed via `.body`\n- [ ] Try-catch for risky operations\n- [ ] Default values for missing data\n\n### Testing\n- [ ] Test with empty input\n- [ ] Test with missing fields\n- [ ] Test with unexpected data types\n- [ ] Check browser console for errors\n\n---\n\n## Quick Error Reference\n\n| Error Message | Likely Cause | Fix |\n|---------------|--------------|-----|\n| \"Code cannot be empty\" | Empty code field | Add meaningful code |\n| \"Code must return data\" | Missing return statement | Add `return [...]` |\n| \"Return value must be an array\" | Returning object instead of array | Wrap in `[...]` |\n| \"Each item must have json property\" | Missing `json` wrapper | Use `{json: {...}}` |\n| \"Unexpected token\" | Expression syntax `{{ }}` in code | Remove `{{ }}`, use JavaScript |\n| \"Cannot read property X of undefined\" | Missing null check | Use optional chaining `?.` |\n| \"Cannot read property X of null\" | Null value access | Add guard clause or default |\n| \"Unmatched expression brackets\" | Quote/bracket imbalance | Check string escaping |\n\n---\n\n## Debugging Tips\n\n### 1. Use console.log()\n\n```javascript\nconst items = $input.all();\nconsole.log('Items count:', items.length);\nconsole.log('First item:', items[0]);\n\n// Check browser console (F12) for output\n```\n\n### 2. Return Intermediate Results\n\n```javascript\n// Debug by returning current state\nconst items = $input.all();\nconst processed = items.map(item => ({json: item.json}));\n\n// Return to see what you have\nreturn processed;\n```\n\n### 3. Try-Catch for Troubleshooting\n\n```javascript\ntry {\n  // Your code here\n  const result = riskyOperation();\n  return [{json: {result}}];\n} catch (error) {\n  // See what failed\n  return [{\n    json: {\n      error: error.message,\n      stack: error.stack\n    }\n  }];\n}\n```\n\n### 4. Validate Input Structure\n\n```javascript\nconst items = $input.all();\n\n// Check what you received\nconsole.log('Input structure:', JSON.stringify(items[0], null, 2));\n\n// Then process\n```\n\n---\n\n## Error #6: Loop Processing Mistakes (CRITICAL)\n\n**Frequency**: Very common in Split in Batches workflows\n\n**What Happens**:\n- Loop processes only first item repeatedly\n- Data accumulation fails or is incomplete\n- \"Time paradox\" errors (referencing future nodes)\n- Stale/cached data in debug mode\n\n### The Problem #1: Using .first() Inside Loops\n\n**MOST CRITICAL LOOP ERROR**: Using `.first()` instead of `.item` inside loops\n\n```javascript\n// âŒ WRONG: .first() always returns iteration #1\nconst currentPage = $('Split in Batches').first().json;\n\n// Loop iteration 1: Gets page 1 âœ“\n// Loop iteration 2: Gets page 1 âœ— (should be page 2!)\n// Loop iteration 3: Gets page 1 âœ— (should be page 3!)\n// Result: Only first item processed, rest ignored\n```\n\n**Why this happens**: `.first()` returns the **first execution result** stored in memory, which is always iteration #1. It doesn't change as the loop progresses.\n\n### The Solution #1: Use .item for Loop Data\n\n```javascript\n// âœ… CORRECT: .item automatically matches current iteration\nconst currentPage = $('Split in Batches').item.json;\n\n// Loop iteration 1: Gets page 1 âœ“\n// Loop iteration 2: Gets page 2 âœ“\n// Loop iteration 3: Gets page 3 âœ“\n// Result: All items processed correctly\n```\n\n**Rule**: Inside a loop, use `.item` for any node that's part of the loop (changes each iteration).\n\n### The Problem #2: Manual Data Accumulation\n\n```javascript\n// âŒ WRONG: Using this.getContext/setContext to accumulate\nlet results = this.getContext('accumulated') || [];\nresults.push(currentResult);\nthis.setContext('accumulated', results);\n\n// Problems:\n// - Fragile and error-prone\n// - Unnecessary complexity\n// - Can lose data on errors\n// - Doesn't work well with retries\n```\n\n**Why this is wrong**: n8n **automatically tracks** every execution of every node in a loop. You don't need to manually accumulate anything!\n\n### The Solution #2: Use .all() After Loop\n\n```javascript\n// âœ… CORRECT: n8n automatically stores all executions\n// Inside loop: Just return current result\nreturn [{\n  json: {\n    pageNumber: currentPage.pageNumber,\n    videoUrl: generatedVideoUrl\n  }\n}];\n\n// After loop completes (Done branch): Collect everything\nconst allVideos = $('Video Generation Node').all().map(item => item.json);\n// Gets ALL results from ALL loop iterations automatically!\n```\n\n**Rule**: Never use `this.getContext()` or `this.setContext()` for data collection. Use `.all()` after the loop.\n\n### The Problem #3: Referencing Future Nodes\n\n```javascript\n// âŒ WRONG: \"Time paradox\" - referencing a node that hasn't run yet\n// Current node: Inside loop, step 2\nconst futureData = $('Final Aggregation Node').json;  // This is AFTER the loop!\n\n// Error: Node hasn't executed yet, data doesn't exist\n```\n\n**Why this fails**: You can't reference data from nodes that haven't executed yet. The workflow runs sequentially.\n\n### The Solution #3: Proper Workflow Order\n\n```javascript\n// âœ… CORRECT: Only reference nodes that have already executed\n\n// Inside loop: Reference previous steps or pre-loop nodes\nconst currentItem = $('Split in Batches').item.json;  // Current loop node\nconst prevStep = $('Previous Loop Step').item.json;   // Previous in loop\nconst config = $('Pre-Loop Config').first().json;     // Before loop started\n\n// After loop (Done branch): Now you can aggregate\nconst allResults = $('Node Inside Loop').all().map(item => item.json);\n```\n\n**Rule**: Only reference nodes that have already executed in the workflow sequence.\n\n### The Problem #4: Debug Mode Stale Data\n\n```javascript\n// âŒ RISKY: In Execute Node (debug), may show cached data\nconst data = $('Previous Node').all();\n\n// Problem: In single-step debug mode, this might show\n// old cached data from a previous full workflow run\n```\n\n### The Solution #4: Use $input in Debug\n\n```javascript\n// âœ… SAFE: Always reflects actual input to current node\nconst data = $input.all();\n\n// This shows the ACTUAL data flowing into this node right now\n```\n\n**Rule**: In debug/Execute Node mode, prefer `$input` over `$('NodeName')` to see real-time data.\n\n### Complete Loop Pattern Example\n\n```javascript\n// ========================================\n// INSIDE THE LOOP (Processing each item)\n// ========================================\n\n// âœ… CORRECT: Get current iteration data\nconst currentPage = $('Split in Batches').item.json;\n\n// âœ… CORRECT: Get static config from before loop\nconst prompts = $('Initialize Prompts').first().json.videoPrompts;\n\n// âœ… CORRECT: Match and process current item\nconst matchedPrompt = prompts.find(p => p.pageNumber === currentPage.pageNumber);\n\n// âœ… CORRECT: Return only current result (don't accumulate!)\nreturn [{\n  json: {\n    pageNumber: currentPage.pageNumber,\n    imageUrl: currentPage.imageUrl,\n    prompt: matchedPrompt ? matchedPrompt.prompt : 'Default'\n  }\n}];\n\n// ========================================\n// AFTER LOOP COMPLETES (Done branch)\n// ========================================\n\n// âœ… CORRECT: Get original structure\nconst originalData = $('Initialize Prompts').first().json;\nconst pages = originalData.pages;\n\n// âœ… CORRECT: Collect ALL loop results with .all()\nconst allVideos = $('Video Generation Node').all().map(item => item.json);\n\n// âœ… CORRECT: Merge loop results with original structure\nconst finalResult = pages.map(page => {\n  const video = allVideos.find(v => v.pageNumber === page.pageNumber);\n  return {\n    ...page,\n    videoUrl: video ? video.videoUrl : null\n  };\n});\n\nreturn [{\n  json: {\n    courseTitle: originalData.courseTitle,\n    totalVideos: allVideos.length,\n    pages: finalResult\n  }\n}];\n```\n\n### Loop Error Quick Reference\n\n| Error | Wrong Code | Correct Code | Impact |\n|-------|-----------|--------------|---------|\n| Using .first() in loop | `$('Loop').first().json` | `$('Loop').item.json` | Only first item processed |\n| Manual accumulation | `this.setContext('data', arr)` | Use `.all()` after loop | Fragile, unnecessary |\n| Referencing future nodes | `$('Node After Loop').json` | Reorder or use after loop | Data doesn't exist yet |\n| Stale debug data | `$('Node').all()` in Execute | `$input.all()` | Shows cached data |\n| Wrong static reference | `$('Config').item.json` | `$('Config').first().json` | Config changes each loop |\n\n### Loop Data Access Decision Tree\n\n```\nAre you INSIDE a loop?\nâ”œâ”€ YES â†’ Is this data from a node INSIDE the loop?\nâ”‚   â”œâ”€ YES â†’ Use .item (changes each iteration)\nâ”‚   â”‚   Example: $('Loop Node').item.json\nâ”‚   â”‚\nâ”‚   â””â”€ NO â†’ Is this data from BEFORE the loop?\nâ”‚       â””â”€ YES â†’ Use .first() (static config)\nâ”‚           Example: $('Pre-Loop Config').first().json\nâ”‚\nâ””â”€ NO â†’ Are you AFTER the loop (Done branch)?\n    â””â”€ YES â†’ Use .all() to collect all results\n        Example: $('Node Inside Loop').all()\n```\n\n### Common Loop Scenarios\n\n#### Scenario 1: Process Each Page with Global Config\n\n```javascript\n// Inside loop\nconst currentPage = $('Split in Batches').item.json;      // âœ… .item\nconst globalConfig = $('Initialize Config').first().json;  // âœ… .first()\n\nreturn [{\n  json: {\n    pageId: currentPage.id,\n    apiKey: globalConfig.apiKey  // Same for all iterations\n  }\n}];\n```\n\n#### Scenario 2: Collect All Results After Loop\n\n```javascript\n// After loop (Done branch)\nconst allResults = $('Process Page').all().map(item => item.json);  // âœ… .all()\n\nreturn [{\n  json: {\n    totalProcessed: allResults.length,\n    results: allResults\n  }\n}];\n```\n\n#### Scenario 3: Merge Loop Results with Original Data\n\n```javascript\n// After loop (Done branch)\nconst originalPages = $('Initialize Data').first().json.pages;  // âœ… .first()\nconst processedPages = $('Process Page').all().map(item => item.json);  // âœ… .all()\n\nconst merged = originalPages.map(page => {\n  const processed = processedPages.find(p => p.id === page.id);\n  return { ...page, ...processed };\n});\n\nreturn [{json: {pages: merged}}];\n```\n\n### Loop Error Prevention Checklist\n\n- [ ] Inside loop: Use `.item` for loop node data\n- [ ] Inside loop: Use `.first()` for pre-loop config\n- [ ] After loop: Use `.all()` to collect results\n- [ ] Never use `this.getContext/setContext` for accumulation\n- [ ] Only reference nodes that have already executed\n- [ ] In debug mode: Use `$input` instead of `$('NodeName')`\n- [ ] Test with multiple items (not just one)\n\n---\n\n## Summary\n\n**Top 6 Errors to Avoid**:\n1. **Empty code / missing return** (38%) - Always return data\n2. **Expression syntax `{{ }}`** (8%) - Use JavaScript, not expressions\n3. **Wrong return format** (5%) - Always `[{json: {...}}]`\n4. **Unmatched brackets** (6%) - Escape strings properly\n5. **Missing null checks** - Use optional chaining `?.`\n6. **Loop processing mistakes** - Use `.item` in loops, `.all()` after loops\n\n**Quick Prevention**:\n- Return `[{json: {...}}]` format\n- Use JavaScript, NOT `{{ }}` expressions\n- Check for null/undefined before accessing\n- Inside loops: Use `.item` for loop data, `.first()` for config\n- After loops: Use `.all()` to collect results\n- Never use `this.getContext/setContext` for data accumulation\n- Test with empty and invalid data\n- Use browser console for debugging\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Overview and best practices\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Safe data access patterns including complete loop examples\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Working examples\n",
        "skills/n8n-code-javascript/README.md": "# n8n Code JavaScript\n\nExpert guidance for writing JavaScript code in n8n Code nodes.\n\n---\n\n## Purpose\n\nTeaches how to write effective JavaScript in n8n Code nodes, avoid common errors, and use built-in functions effectively.\n\n---\n\n## Activates On\n\n**Trigger keywords**:\n- \"javascript code node\"\n- \"write javascript in n8n\"\n- \"code node javascript\"\n- \"$input syntax\"\n- \"$json syntax\"\n- \"$helpers.httpRequest\"\n- \"DateTime luxon\"\n- \"code node error\"\n- \"webhook data code\"\n- \"return format code node\"\n\n**Common scenarios**:\n- Writing JavaScript code in Code nodes\n- Troubleshooting Code node errors\n- Making HTTP requests from code\n- Working with dates and times\n- Accessing webhook data\n- Choosing between All Items and Each Item mode\n\n---\n\n## What You'll Learn\n\n### Quick Start\n- Mode selection (All Items vs Each Item)\n- Data access patterns ($input.all(), $input.first(), $input.item)\n- Correct return format: `[{json: {...}}]`\n- Webhook data structure (.body nesting)\n- Built-in functions overview\n\n### Data Access Mastery\n- $input.all() - Batch operations (most common)\n- $input.first() - Single item operations\n- $input.item - Each Item mode processing\n- $node - Reference other workflow nodes\n- **Critical gotcha**: Webhook data under `.body`\n\n### Common Patterns (Production-Tested)\n1. Multi-source Data Aggregation\n2. Regex Filtering & Pattern Matching\n3. Markdown Parsing & Structured Extraction\n4. JSON Comparison & Validation\n5. CRM Data Transformation\n6. Release Information Processing\n7. Array Transformation with Context\n8. Slack Block Kit Formatting\n9. Top N Filtering & Ranking\n10. String Aggregation & Reporting\n\n### Error Prevention\nTop 5 errors to avoid:\n1. **Empty code / missing return** (38% of failures)\n2. **Expression syntax confusion** (using `{{}}` in code)\n3. **Incorrect return format** (missing array wrapper or json property)\n4. **Unmatched brackets** (string escaping issues)\n5. **Missing null checks** (crashes on undefined)\n\n### Built-in Functions\n- **$helpers.httpRequest()** - Make HTTP requests\n- **DateTime (Luxon)** - Advanced date/time operations\n- **$jmespath()** - Query JSON structures\n- **$getWorkflowStaticData()** - Persistent storage\n- Standard JavaScript globals (Math, JSON, console)\n- Available Node.js modules (crypto, Buffer, URL)\n\n---\n\n## File Structure\n\n```\nn8n-code-javascript/\nâ”œâ”€â”€ SKILL.md (500 lines)\nâ”‚   Overview, quick start, mode selection, best practices\nâ”‚   - Mode selection guide (All Items vs Each Item)\nâ”‚   - Data access patterns overview\nâ”‚   - Return format requirements\nâ”‚   - Critical webhook gotcha\nâ”‚   - Error prevention overview\nâ”‚   - Quick reference checklist\nâ”‚\nâ”œâ”€â”€ DATA_ACCESS.md (400 lines)\nâ”‚   Complete data access patterns\nâ”‚   - $input.all() - Most common (26% usage)\nâ”‚   - $input.first() - Very common (25% usage)\nâ”‚   - $input.item - Each Item mode (19% usage)\nâ”‚   - $node - Reference other nodes\nâ”‚   - Webhook data structure (.body nesting)\nâ”‚   - Choosing the right pattern\nâ”‚   - Common mistakes to avoid\nâ”‚\nâ”œâ”€â”€ COMMON_PATTERNS.md (600 lines)\nâ”‚   10 production-tested patterns\nâ”‚   - Pattern 1: Multi-source Aggregation\nâ”‚   - Pattern 2: Regex Filtering\nâ”‚   - Pattern 3: Markdown Parsing\nâ”‚   - Pattern 4: JSON Comparison\nâ”‚   - Pattern 5: CRM Transformation\nâ”‚   - Pattern 6: Release Processing\nâ”‚   - Pattern 7: Array Transformation\nâ”‚   - Pattern 8: Slack Block Kit\nâ”‚   - Pattern 9: Top N Filtering\nâ”‚   - Pattern 10: String Aggregation\nâ”‚   - Pattern selection guide\nâ”‚\nâ”œâ”€â”€ ERROR_PATTERNS.md (450 lines)\nâ”‚   Top 5 errors with solutions\nâ”‚   - Error #1: Empty Code / Missing Return (38%)\nâ”‚   - Error #2: Expression Syntax Confusion (8%)\nâ”‚   - Error #3: Incorrect Return Wrapper (5%)\nâ”‚   - Error #4: Unmatched Brackets (6%)\nâ”‚   - Error #5: Missing Null Checks\nâ”‚   - Error prevention checklist\nâ”‚   - Quick error reference\nâ”‚   - Debugging tips\nâ”‚\nâ”œâ”€â”€ BUILTIN_FUNCTIONS.md (450 lines)\nâ”‚   Complete built-in function reference\nâ”‚   - $helpers.httpRequest() API reference\nâ”‚   - DateTime (Luxon) complete guide\nâ”‚   - $jmespath() JSON querying\nâ”‚   - $getWorkflowStaticData() persistent storage\nâ”‚   - Standard JavaScript globals\nâ”‚   - Available Node.js modules\nâ”‚   - What's NOT available\nâ”‚\nâ””â”€â”€ README.md (this file)\n    Skill metadata and overview\n```\n\n**Total**: ~2,400 lines across 6 files\n\n---\n\n## Coverage\n\n### Mode Selection\n- **Run Once for All Items** - Recommended for 95% of use cases\n- **Run Once for Each Item** - Specialized cases only\n- Decision guide and performance implications\n\n### Data Access\n- Most common patterns with usage statistics\n- Webhook data structure (critical .body gotcha)\n- Safe access patterns with null checks\n- When to use which pattern\n\n### Error Prevention\n- Top 5 errors covering 62%+ of all failures\n- Clear wrong vs right examples\n- Error prevention checklist\n- Debugging tips and console.log usage\n\n### Production Patterns\n- 10 patterns from real workflows\n- Complete working examples\n- Use cases and key techniques\n- Pattern selection guide\n\n### Built-in Functions\n- Complete $helpers.httpRequest() reference\n- DateTime/Luxon operations (formatting, parsing, arithmetic)\n- $jmespath() for JSON queries\n- Persistent storage with $getWorkflowStaticData()\n- Standard JavaScript and Node.js modules\n\n---\n\n## Critical Gotchas Highlighted\n\n### #1: Webhook Data Structure\n**MOST COMMON MISTAKE**: Webhook data is under `.body`\n\n```javascript\n// âŒ WRONG\nconst name = $json.name;\n\n// âœ… CORRECT\nconst name = $json.body.name;\n```\n\n### #2: Return Format\n**CRITICAL**: Must return array with json property\n\n```javascript\n// âŒ WRONG\nreturn {json: {result: 'success'}};\n\n// âœ… CORRECT\nreturn [{json: {result: 'success'}}];\n```\n\n### #3: Expression Syntax\n**Don't use `{{}}` in Code nodes**\n\n```javascript\n// âŒ WRONG\nconst value = \"{{ $json.field }}\";\n\n// âœ… CORRECT\nconst value = $json.field;\n```\n\n---\n\n## Integration with Other Skills\n\n### n8n Expression Syntax\n- **Distinction**: Expressions use `{{}}` in OTHER nodes\n- **Code nodes**: Use JavaScript directly (no `{{}}`)\n- **When to use each**: Code vs expressions decision guide\n\n### n8n MCP Tools Expert\n- Find Code node: `search_nodes({query: \"code\"})`\n- Get configuration: `get_node_essentials(\"nodes-base.code\")`\n- Validate code: `validate_node_operation()`\n\n### n8n Node Configuration\n- Mode selection (All Items vs Each Item)\n- Language selection (JavaScript vs Python)\n- Understanding property dependencies\n\n### n8n Workflow Patterns\n- Code nodes in transformation step\n- Webhook â†’ Code â†’ API pattern\n- Error handling in workflows\n\n### n8n Validation Expert\n- Validate Code node configuration\n- Handle validation errors\n- Auto-fix common issues\n\n---\n\n## When to Use Code Node\n\n**Use Code node when:**\n- âœ… Complex transformations requiring multiple steps\n- âœ… Custom calculations or business logic\n- âœ… Recursive operations\n- âœ… API response parsing with complex structure\n- âœ… Multi-step conditionals\n- âœ… Data aggregation across items\n\n**Consider other nodes when:**\n- âŒ Simple field mapping â†’ Use **Set** node\n- âŒ Basic filtering â†’ Use **Filter** node\n- âŒ Simple conditionals â†’ Use **IF** or **Switch** node\n- âŒ HTTP requests only â†’ Use **HTTP Request** node\n\n**Code node excels at**: Complex logic that would require chaining many simple nodes\n\n---\n\n## Success Metrics\n\n**Before this skill**:\n- Users confused by mode selection\n- Frequent return format errors\n- Expression syntax mistakes\n- Webhook data access failures\n- Missing null check crashes\n\n**After this skill**:\n- Clear mode selection guidance\n- Understanding of return format\n- JavaScript vs expression distinction\n- Correct webhook data access\n- Safe null-handling patterns\n- Production-ready code patterns\n\n---\n\n## Quick Reference\n\n### Essential Rules\n1. Choose \"All Items\" mode (recommended)\n2. Access data: `$input.all()`, `$input.first()`, `$input.item`\n3. **MUST return**: `[{json: {...}}]` format\n4. **Webhook data**: Under `.body` property\n5. **No `{{}}` syntax**: Use JavaScript directly\n\n### Most Common Patterns\n- Batch processing â†’ $input.all() + map/filter\n- Single item â†’ $input.first()\n- Aggregation â†’ reduce()\n- HTTP requests â†’ $helpers.httpRequest()\n- Date handling â†’ DateTime (Luxon)\n\n### Error Prevention\n- Always return data\n- Check for null/undefined\n- Use try-catch for risky operations\n- Test with empty input\n- Use console.log() for debugging\n\n---\n\n## Related Documentation\n\n- **n8n Code Node Guide**: https://docs.n8n.io/code/code-node/\n- **Built-in Methods Reference**: https://docs.n8n.io/code-examples/methods-variables-reference/\n- **Luxon Documentation**: https://moment.github.io/luxon/\n\n---\n\n## Evaluations\n\n**5 test scenarios** covering:\n1. Webhook body gotcha (most common mistake)\n2. Return format error (missing array wrapper)\n3. HTTP request with $helpers.httpRequest()\n4. Aggregation pattern with $input.all()\n5. Expression syntax confusion (using `{{}}`)\n\nEach evaluation tests skill activation, correct guidance, and reference to appropriate documentation files.\n\n---\n\n## Version History\n\n- **v1.0** (2025-01-20): Initial implementation\n  - SKILL.md with comprehensive overview\n  - DATA_ACCESS.md covering all access patterns\n  - COMMON_PATTERNS.md with 10 production patterns\n  - ERROR_PATTERNS.md covering top 5 errors\n  - BUILTIN_FUNCTIONS.md complete reference\n  - 5 evaluation scenarios\n\n---\n\n## Author\n\nConceived by Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n\nPart of the n8n-skills collection.\n",
        "skills/n8n-code-javascript/SKILL.md": "---\nname: n8n-code-javascript\ndescription: Write JavaScript code in n8n Code nodes. Use when writing JavaScript in n8n, using $input/$json/$node syntax, making HTTP requests with $helpers, working with dates using DateTime, troubleshooting Code node errors, or choosing between Code node modes.\n---\n\n# JavaScript Code Node\n\nExpert guidance for writing JavaScript code in n8n Code nodes.\n\n---\n\n## Quick Start\n\n```javascript\n// Basic template for Code nodes\nconst items = $input.all();\n\n// Process data\nconst processed = items.map(item => ({\n  json: {\n    ...item.json,\n    processed: true,\n    timestamp: new Date().toISOString()\n  }\n}));\n\nreturn processed;\n```\n\n### Essential Rules\n\n1. **Choose \"Run Once for All Items\" mode** (recommended for most use cases)\n2. **Access data**: `$input.all()`, `$input.first()`, or `$input.item`\n3. **CRITICAL**: Must return `[{json: {...}}]` format\n4. **CRITICAL**: Webhook data is under `$json.body` (not `$json` directly)\n5. **Built-ins available**: $helpers.httpRequest(), DateTime (Luxon), $jmespath()\n\n---\n\n## Mode Selection Guide\n\nThe Code node offers two execution modes. Choose based on your use case:\n\n### Run Once for All Items (Recommended - Default)\n\n**Use this mode for:** 95% of use cases\n\n- **How it works**: Code executes **once** regardless of input count\n- **Data access**: `$input.all()` or `items` array\n- **Best for**: Aggregation, filtering, batch processing, transformations, API calls with all data\n- **Performance**: Faster for multiple items (single execution)\n\n```javascript\n// Example: Calculate total from all items\nconst allItems = $input.all();\nconst total = allItems.reduce((sum, item) => sum + (item.json.amount || 0), 0);\n\nreturn [{\n  json: {\n    total,\n    count: allItems.length,\n    average: total / allItems.length\n  }\n}];\n```\n\n**When to use:**\n- âœ… Comparing items across the dataset\n- âœ… Calculating totals, averages, or statistics\n- âœ… Sorting or ranking items\n- âœ… Deduplication\n- âœ… Building aggregated reports\n- âœ… Combining data from multiple items\n\n### Run Once for Each Item\n\n**Use this mode for:** Specialized cases only\n\n- **How it works**: Code executes **separately** for each input item\n- **Data access**: `$input.item` or `$item`\n- **Best for**: Item-specific logic, independent operations, per-item validation\n- **Performance**: Slower for large datasets (multiple executions)\n\n```javascript\n// Example: Add processing timestamp to each item\nconst item = $input.item;\n\nreturn [{\n  json: {\n    ...item.json,\n    processed: true,\n    processedAt: new Date().toISOString()\n  }\n}];\n```\n\n**When to use:**\n- âœ… Each item needs independent API call\n- âœ… Per-item validation with different error handling\n- âœ… Item-specific transformations based on item properties\n- âœ… When items must be processed separately for business logic\n\n**Decision Shortcut:**\n- **Need to look at multiple items?** â†’ Use \"All Items\" mode\n- **Each item completely independent?** â†’ Use \"Each Item\" mode\n- **Not sure?** â†’ Use \"All Items\" mode (you can always loop inside)\n\n---\n\n## Data Access Patterns\n\n### Pattern 1: $input.all() - Most Common\n\n**Use when**: Processing arrays, batch operations, aggregations\n\n```javascript\n// Get all items from previous node\nconst allItems = $input.all();\n\n// Filter, map, reduce as needed\nconst valid = allItems.filter(item => item.json.status === 'active');\nconst mapped = valid.map(item => ({\n  json: {\n    id: item.json.id,\n    name: item.json.name\n  }\n}));\n\nreturn mapped;\n```\n\n### Pattern 2: $input.first() - Very Common\n\n**Use when**: Working with single objects, API responses, first-in-first-out\n\n```javascript\n// Get first item only\nconst firstItem = $input.first();\nconst data = firstItem.json;\n\nreturn [{\n  json: {\n    result: processData(data),\n    processedAt: new Date().toISOString()\n  }\n}];\n```\n\n### Pattern 3: $input.item - Each Item Mode Only\n\n**Use when**: In \"Run Once for Each Item\" mode\n\n```javascript\n// Current item in loop (Each Item mode only)\nconst currentItem = $input.item;\n\nreturn [{\n  json: {\n    ...currentItem.json,\n    itemProcessed: true\n  }\n}];\n```\n\n### Pattern 4: Loop Processing - CRITICAL\n\n**Use when**: Working with Split in Batches (Loop) nodes\n\n**MOST CRITICAL MISTAKE**: Using `.first()` inside loops instead of `.item`\n\n```javascript\n// âŒ WRONG: .first() always returns iteration #1\nconst page = $('Loop Node').first().json;  // Stuck on first item!\n\n// âœ… CORRECT: .item returns current iteration\nconst page = $('Loop Node').item.json;  // Changes each iteration\n\n// Inside loop: Use .item for loop data, .first() for static config\nconst currentItem = $('Loop Node').item.json;\nconst config = $('Pre-Loop Config').first().json;\n\n// After loop (Done branch): Use .all() to collect all results\nconst allResults = $('Node Inside Loop').all().map(item => item.json);\n```\n\n**CRITICAL**: Never use `this.getContext()` or `this.setContext()` to accumulate data. n8n automatically tracks all loop executions - just use `.all()` after the loop completes.\n\n### Pattern 5: $node - Reference Other Nodes\n\n**Use when**: Need data from specific nodes in workflow\n\n```javascript\n// Get output from specific node\nconst webhookData = $node[\"Webhook\"].json;\nconst httpData = $node[\"HTTP Request\"].json;\n\nreturn [{\n  json: {\n    combined: {\n      webhook: webhookData,\n      api: httpData\n    }\n  }\n}];\n```\n\n**See**: [DATA_ACCESS.md](DATA_ACCESS.md) for comprehensive guide including complete loop examples\n\n---\n\n## Critical: Webhook Data Structure\n\n**MOST COMMON MISTAKE**: Webhook data is nested under `.body`\n\n```javascript\n// âŒ WRONG - Will return undefined\nconst name = $json.name;\nconst email = $json.email;\n\n// âœ… CORRECT - Webhook data is under .body\nconst name = $json.body.name;\nconst email = $json.body.email;\n\n// Or with $input\nconst webhookData = $input.first().json.body;\nconst name = webhookData.name;\n```\n\n**Why**: Webhook node wraps all request data under `body` property. This includes POST data, query parameters, and JSON payloads.\n\n**See**: [DATA_ACCESS.md](DATA_ACCESS.md) for full webhook structure details\n\n---\n\n## Return Format Requirements\n\n**CRITICAL RULE**: Always return array of objects with `json` property\n\n### Correct Return Formats\n\n```javascript\n// âœ… Single result\nreturn [{\n  json: {\n    field1: value1,\n    field2: value2\n  }\n}];\n\n// âœ… Multiple results\nreturn [\n  {json: {id: 1, data: 'first'}},\n  {json: {id: 2, data: 'second'}}\n];\n\n// âœ… Transformed array\nconst transformed = $input.all()\n  .filter(item => item.json.valid)\n  .map(item => ({\n    json: {\n      id: item.json.id,\n      processed: true\n    }\n  }));\nreturn transformed;\n\n// âœ… Empty result (when no data to return)\nreturn [];\n\n// âœ… Conditional return\nif (shouldProcess) {\n  return [{json: processedData}];\n} else {\n  return [];\n}\n```\n\n### Incorrect Return Formats\n\n```javascript\n// âŒ WRONG: Object without array wrapper\nreturn {\n  json: {field: value}\n};\n\n// âŒ WRONG: Array without json wrapper\nreturn [{field: value}];\n\n// âŒ WRONG: Plain string\nreturn \"processed\";\n\n// âŒ WRONG: Raw data without mapping\nreturn $input.all();  // Missing .map()\n\n// âŒ WRONG: Incomplete structure\nreturn [{data: value}];  // Should be {json: value}\n```\n\n**Why it matters**: Next nodes expect array format. Incorrect format causes workflow execution to fail.\n\n**See**: [ERROR_PATTERNS.md](ERROR_PATTERNS.md) #3 for detailed error solutions\n\n---\n\n## Common Patterns Overview\n\nBased on production workflows, here are the most useful patterns:\n\n### 1. Multi-Source Data Aggregation\nCombine data from multiple APIs, webhooks, or nodes\n\n```javascript\nconst allItems = $input.all();\nconst results = [];\n\nfor (const item of allItems) {\n  const sourceName = item.json.name || 'Unknown';\n  // Parse source-specific structure\n  if (sourceName === 'API1' && item.json.data) {\n    results.push({\n      json: {\n        title: item.json.data.title,\n        source: 'API1'\n      }\n    });\n  }\n}\n\nreturn results;\n```\n\n### 2. Filtering with Regex\nExtract patterns, mentions, or keywords from text\n\n```javascript\nconst pattern = /\\b([A-Z]{2,5})\\b/g;\nconst matches = {};\n\nfor (const item of $input.all()) {\n  const text = item.json.text;\n  const found = text.match(pattern);\n\n  if (found) {\n    found.forEach(match => {\n      matches[match] = (matches[match] || 0) + 1;\n    });\n  }\n}\n\nreturn [{json: {matches}}];\n```\n\n### 3. Data Transformation & Enrichment\nMap fields, normalize formats, add computed fields\n\n```javascript\nconst items = $input.all();\n\nreturn items.map(item => {\n  const data = item.json;\n  const nameParts = data.name.split(' ');\n\n  return {\n    json: {\n      first_name: nameParts[0],\n      last_name: nameParts.slice(1).join(' '),\n      email: data.email,\n      created_at: new Date().toISOString()\n    }\n  };\n});\n```\n\n### 4. Top N Filtering & Ranking\nSort and limit results\n\n```javascript\nconst items = $input.all();\n\nconst topItems = items\n  .sort((a, b) => (b.json.score || 0) - (a.json.score || 0))\n  .slice(0, 10);\n\nreturn topItems.map(item => ({json: item.json}));\n```\n\n### 5. Aggregation & Reporting\nSum, count, group data\n\n```javascript\nconst items = $input.all();\nconst total = items.reduce((sum, item) => sum + (item.json.amount || 0), 0);\n\nreturn [{\n  json: {\n    total,\n    count: items.length,\n    average: total / items.length,\n    timestamp: new Date().toISOString()\n  }\n}];\n```\n\n**See**: [COMMON_PATTERNS.md](COMMON_PATTERNS.md) for 10 detailed production patterns\n\n---\n\n## Error Prevention - Top 5 Mistakes\n\n### #1: Empty Code or Missing Return (Most Common)\n\n```javascript\n// âŒ WRONG: No return statement\nconst items = $input.all();\n// ... processing code ...\n// Forgot to return!\n\n// âœ… CORRECT: Always return data\nconst items = $input.all();\n// ... processing ...\nreturn items.map(item => ({json: item.json}));\n```\n\n### #2: Expression Syntax Confusion\n\n```javascript\n// âŒ WRONG: Using n8n expression syntax in code\nconst value = \"{{ $json.field }}\";\n\n// âœ… CORRECT: Use JavaScript template literals\nconst value = `${$json.field}`;\n\n// âœ… CORRECT: Direct access\nconst value = $input.first().json.field;\n```\n\n### #3: Incorrect Return Wrapper\n\n```javascript\n// âŒ WRONG: Returning object instead of array\nreturn {json: {result: 'success'}};\n\n// âœ… CORRECT: Array wrapper required\nreturn [{json: {result: 'success'}}];\n```\n\n### #4: Missing Null Checks\n\n```javascript\n// âŒ WRONG: Crashes if field doesn't exist\nconst value = item.json.user.email;\n\n// âœ… CORRECT: Safe access with optional chaining\nconst value = item.json?.user?.email || 'no-email@example.com';\n\n// âœ… CORRECT: Guard clause\nif (!item.json.user) {\n  return [];\n}\nconst value = item.json.user.email;\n```\n\n### #5: Webhook Body Nesting\n\n```javascript\n// âŒ WRONG: Direct access to webhook data\nconst email = $json.email;\n\n// âœ… CORRECT: Webhook data under .body\nconst email = $json.body.email;\n```\n\n**See**: [ERROR_PATTERNS.md](ERROR_PATTERNS.md) for comprehensive error guide\n\n---\n\n## Built-in Functions & Helpers\n\n### $helpers.httpRequest()\n\nMake HTTP requests from within code:\n\n```javascript\nconst response = await $helpers.httpRequest({\n  method: 'GET',\n  url: 'https://api.example.com/data',\n  headers: {\n    'Authorization': 'Bearer token',\n    'Content-Type': 'application/json'\n  }\n});\n\nreturn [{json: {data: response}}];\n```\n\n### DateTime (Luxon)\n\nDate and time operations:\n\n```javascript\n// Current time\nconst now = DateTime.now();\n\n// Format dates\nconst formatted = now.toFormat('yyyy-MM-dd');\nconst iso = now.toISO();\n\n// Date arithmetic\nconst tomorrow = now.plus({days: 1});\nconst lastWeek = now.minus({weeks: 1});\n\nreturn [{\n  json: {\n    today: formatted,\n    tomorrow: tomorrow.toFormat('yyyy-MM-dd')\n  }\n}];\n```\n\n### $jmespath()\n\nQuery JSON structures:\n\n```javascript\nconst data = $input.first().json;\n\n// Filter array\nconst adults = $jmespath(data, 'users[?age >= `18`]');\n\n// Extract fields\nconst names = $jmespath(data, 'users[*].name');\n\nreturn [{json: {adults, names}}];\n```\n\n**See**: [BUILTIN_FUNCTIONS.md](BUILTIN_FUNCTIONS.md) for complete reference\n\n---\n\n## Best Practices\n\n### 1. Always Validate Input Data\n\n```javascript\nconst items = $input.all();\n\n// Check if data exists\nif (!items || items.length === 0) {\n  return [];\n}\n\n// Validate structure\nif (!items[0].json) {\n  return [{json: {error: 'Invalid input format'}}];\n}\n\n// Continue processing...\n```\n\n### 2. Use Try-Catch for Error Handling\n\n```javascript\ntry {\n  const response = await $helpers.httpRequest({\n    url: 'https://api.example.com/data'\n  });\n\n  return [{json: {success: true, data: response}}];\n} catch (error) {\n  return [{\n    json: {\n      success: false,\n      error: error.message\n    }\n  }];\n}\n```\n\n### 3. Prefer Array Methods Over Loops\n\n```javascript\n// âœ… GOOD: Functional approach\nconst processed = $input.all()\n  .filter(item => item.json.valid)\n  .map(item => ({json: {id: item.json.id}}));\n\n// âŒ SLOWER: Manual loop\nconst processed = [];\nfor (const item of $input.all()) {\n  if (item.json.valid) {\n    processed.push({json: {id: item.json.id}});\n  }\n}\n```\n\n### 4. Filter Early, Process Late\n\n```javascript\n// âœ… GOOD: Filter first to reduce processing\nconst processed = $input.all()\n  .filter(item => item.json.status === 'active')  // Reduce dataset first\n  .map(item => expensiveTransformation(item));  // Then transform\n\n// âŒ WASTEFUL: Transform everything, then filter\nconst processed = $input.all()\n  .map(item => expensiveTransformation(item))  // Wastes CPU\n  .filter(item => item.json.status === 'active');\n```\n\n### 5. Use Descriptive Variable Names\n\n```javascript\n// âœ… GOOD: Clear intent\nconst activeUsers = $input.all().filter(item => item.json.active);\nconst totalRevenue = activeUsers.reduce((sum, user) => sum + user.json.revenue, 0);\n\n// âŒ BAD: Unclear purpose\nconst a = $input.all().filter(item => item.json.active);\nconst t = a.reduce((s, u) => s + u.json.revenue, 0);\n```\n\n### 6. Debug with console.log()\n\n```javascript\n// Debug statements appear in browser console\nconst items = $input.all();\nconsole.log(`Processing ${items.length} items`);\n\nfor (const item of items) {\n  console.log('Item data:', item.json);\n  // Process...\n}\n\nreturn result;\n```\n\n---\n\n## When to Use Code Node\n\nUse Code node when:\n- âœ… Complex transformations requiring multiple steps\n- âœ… Custom calculations or business logic\n- âœ… Recursive operations\n- âœ… API response parsing with complex structure\n- âœ… Multi-step conditionals\n- âœ… Data aggregation across items\n\nConsider other nodes when:\n- âŒ Simple field mapping â†’ Use **Set** node\n- âŒ Basic filtering â†’ Use **Filter** node\n- âŒ Simple conditionals â†’ Use **IF** or **Switch** node\n- âŒ HTTP requests only â†’ Use **HTTP Request** node\n\n**Code node excels at**: Complex logic that would require chaining many simple nodes\n\n---\n\n## Integration with Other Skills\n\n### Works With:\n\n**n8n Expression Syntax**:\n- Expressions use `{{ }}` syntax in other nodes\n- Code nodes use JavaScript directly (no `{{ }}`)\n- When to use expressions vs code\n\n**n8n MCP Tools Expert**:\n- How to find Code node: `search_nodes({query: \"code\"})`\n- Get configuration help: `get_node_essentials(\"nodes-base.code\")`\n- Validate code: `validate_node_operation()`\n\n**n8n Node Configuration**:\n- Mode selection (All Items vs Each Item)\n- Language selection (JavaScript vs Python)\n- Understanding property dependencies\n\n**n8n Workflow Patterns**:\n- Code nodes in transformation step\n- Webhook â†’ Code â†’ API pattern\n- Error handling in workflows\n\n**n8n Validation Expert**:\n- Validate Code node configuration\n- Handle validation errors\n- Auto-fix common issues\n\n---\n\n## Quick Reference Checklist\n\nBefore deploying Code nodes, verify:\n\n- [ ] **Code is not empty** - Must have meaningful logic\n- [ ] **Return statement exists** - Must return array of objects\n- [ ] **Proper return format** - Each item: `{json: {...}}`\n- [ ] **Data access correct** - Using `$input.all()`, `$input.first()`, or `$input.item`\n- [ ] **No n8n expressions** - Use JavaScript template literals: `` `${value}` ``\n- [ ] **Error handling** - Guard clauses for null/undefined inputs\n- [ ] **Webhook data** - Access via `.body` if from webhook\n- [ ] **Mode selection** - \"All Items\" for most cases\n- [ ] **Performance** - Prefer map/filter over manual loops\n- [ ] **Output consistent** - All code paths return same structure\n\n---\n\n## Additional Resources\n\n### Related Files\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Comprehensive data access patterns\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - 10 production-tested patterns\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Top 5 errors and solutions\n- [BUILTIN_FUNCTIONS.md](BUILTIN_FUNCTIONS.md) - Complete built-in reference\n\n### n8n Documentation\n- Code Node Guide: https://docs.n8n.io/code/code-node/\n- Built-in Methods: https://docs.n8n.io/code-examples/methods-variables-reference/\n- Luxon Documentation: https://moment.github.io/luxon/\n\n---\n\n**Ready to write JavaScript in n8n Code nodes!** Start with simple transformations, use the error patterns guide to avoid common mistakes, and reference the pattern library for production-ready examples.\n",
        "skills/n8n-code-python/COMMON_PATTERNS.md": "# Common Patterns - Python Code Node\n\nProduction-tested Python patterns for n8n Code nodes.\n\n---\n\n## âš ï¸ Important: JavaScript First\n\n**Use JavaScript for 95% of use cases.**\n\nPython in n8n has **NO external libraries** (no requests, pandas, numpy).\n\nOnly use Python when:\n- You have complex Python-specific logic\n- You need Python's standard library features\n- You're more comfortable with Python than JavaScript\n\nFor most workflows, **JavaScript is the better choice**.\n\n---\n\n## Pattern Overview\n\nThese 10 patterns cover common n8n Code node scenarios using Python:\n\n1. **Multi-Source Data Aggregation** - Combine data from multiple nodes\n2. **Regex-Based Filtering** - Filter items using pattern matching\n3. **Markdown to Structured Data** - Parse markdown into structured format\n4. **JSON Object Comparison** - Compare two JSON objects for changes\n5. **CRM Data Transformation** - Transform CRM data to standard format\n6. **Release Notes Processing** - Parse and categorize release notes\n7. **Array Transformation** - Reshape arrays and extract fields\n8. **Dictionary Lookup** - Create and use lookup dictionaries\n9. **Top N Filtering** - Get top items by score/value\n10. **String Aggregation** - Aggregate strings with formatting\n\n---\n\n## Pattern 1: Multi-Source Data Aggregation\n\n**Use case**: Combine data from multiple sources (APIs, webhooks, databases).\n\n**Scenario**: Aggregate news articles from multiple sources.\n\n### Implementation\n\n```python\nfrom datetime import datetime\n\nall_items = _input.all()\nprocessed_articles = []\n\nfor item in all_items:\n    source_name = item[\"json\"].get(\"name\", \"Unknown\")\n    source_data = item[\"json\"]\n\n    # Process Hacker News source\n    if source_name == \"Hacker News\" and source_data.get(\"hits\"):\n        for hit in source_data[\"hits\"]:\n            processed_articles.append({\n                \"title\": hit.get(\"title\", \"No title\"),\n                \"url\": hit.get(\"url\", \"\"),\n                \"summary\": hit.get(\"story_text\") or \"No summary\",\n                \"source\": \"Hacker News\",\n                \"score\": hit.get(\"points\", 0),\n                \"fetched_at\": datetime.now().isoformat()\n            })\n\n    # Process Reddit source\n    elif source_name == \"Reddit\" and source_data.get(\"data\"):\n        for post in source_data[\"data\"].get(\"children\", []):\n            post_data = post.get(\"data\", {})\n            processed_articles.append({\n                \"title\": post_data.get(\"title\", \"No title\"),\n                \"url\": post_data.get(\"url\", \"\"),\n                \"summary\": post_data.get(\"selftext\", \"\")[:200],\n                \"source\": \"Reddit\",\n                \"score\": post_data.get(\"score\", 0),\n                \"fetched_at\": datetime.now().isoformat()\n            })\n\n# Sort by score descending\nprocessed_articles.sort(key=lambda x: x[\"score\"], reverse=True)\n\n# Return as n8n items\nreturn [{\"json\": article} for article in processed_articles]\n```\n\n### Key Techniques\n\n- Process multiple data sources in one loop\n- Normalize different data structures\n- Use datetime for timestamps\n- Sort by criteria\n- Return properly formatted items\n\n---\n\n## Pattern 2: Regex-Based Filtering\n\n**Use case**: Filter items based on pattern matching in text fields.\n\n**Scenario**: Filter support tickets by priority keywords.\n\n### Implementation\n\n```python\nimport re\n\nall_items = _input.all()\npriority_tickets = []\n\n# High priority keywords pattern\nhigh_priority_pattern = re.compile(\n    r'\\b(urgent|critical|emergency|asap|down|outage|broken)\\b',\n    re.IGNORECASE\n)\n\nfor item in all_items:\n    ticket = item[\"json\"]\n\n    # Check subject and description\n    subject = ticket.get(\"subject\", \"\")\n    description = ticket.get(\"description\", \"\")\n    combined_text = f\"{subject} {description}\"\n\n    # Find matches\n    matches = high_priority_pattern.findall(combined_text)\n\n    if matches:\n        priority_tickets.append({\n            \"json\": {\n                **ticket,\n                \"priority\": \"high\",\n                \"matched_keywords\": list(set(matches)),\n                \"keyword_count\": len(matches)\n            }\n        })\n    else:\n        priority_tickets.append({\n            \"json\": {\n                **ticket,\n                \"priority\": \"normal\",\n                \"matched_keywords\": [],\n                \"keyword_count\": 0\n            }\n        })\n\n# Sort by keyword count (most urgent first)\npriority_tickets.sort(key=lambda x: x[\"json\"][\"keyword_count\"], reverse=True)\n\nreturn priority_tickets\n```\n\n### Key Techniques\n\n- Use re.compile() for reusable patterns\n- re.IGNORECASE for case-insensitive matching\n- Combine multiple text fields for searching\n- Extract and deduplicate matches\n- Sort by priority indicators\n\n---\n\n## Pattern 3: Markdown to Structured Data\n\n**Use case**: Parse markdown text into structured data.\n\n**Scenario**: Extract tasks from markdown checklist.\n\n### Implementation\n\n```python\nimport re\n\nmarkdown_text = _input.first()[\"json\"][\"body\"].get(\"markdown\", \"\")\n\n# Parse markdown checklist\ntasks = []\nlines = markdown_text.split(\"\\n\")\n\nfor line in lines:\n    # Match: - [ ] Task or - [x] Task\n    match = re.match(r'^\\s*-\\s*\\[([ x])\\]\\s*(.+)$', line, re.IGNORECASE)\n\n    if match:\n        checked = match.group(1).lower() == 'x'\n        task_text = match.group(2).strip()\n\n        # Extract priority if present (e.g., [P1], [HIGH])\n        priority_match = re.search(r'\\[(P\\d|HIGH|MEDIUM|LOW)\\]', task_text, re.IGNORECASE)\n        priority = priority_match.group(1).upper() if priority_match else \"NORMAL\"\n\n        # Remove priority tag from text\n        clean_text = re.sub(r'\\[(P\\d|HIGH|MEDIUM|LOW)\\]', '', task_text, flags=re.IGNORECASE).strip()\n\n        tasks.append({\n            \"text\": clean_text,\n            \"completed\": checked,\n            \"priority\": priority,\n            \"original_line\": line.strip()\n        })\n\nreturn [{\n    \"json\": {\n        \"tasks\": tasks,\n        \"total\": len(tasks),\n        \"completed\": sum(1 for t in tasks if t[\"completed\"]),\n        \"pending\": sum(1 for t in tasks if not t[\"completed\"])\n    }\n}]\n```\n\n### Key Techniques\n\n- Line-by-line parsing\n- Multiple regex patterns for extraction\n- Extract metadata from text\n- Calculate summary statistics\n- Return structured data\n\n---\n\n## Pattern 4: JSON Object Comparison\n\n**Use case**: Compare two JSON objects to find differences.\n\n**Scenario**: Compare old and new user profile data.\n\n### Implementation\n\n```python\nimport json\n\nall_items = _input.all()\n\n# Assume first item is old data, second is new data\nold_data = all_items[0][\"json\"] if len(all_items) > 0 else {}\nnew_data = all_items[1][\"json\"] if len(all_items) > 1 else {}\n\nchanges = {\n    \"added\": {},\n    \"removed\": {},\n    \"modified\": {},\n    \"unchanged\": {}\n}\n\n# Find all unique keys\nall_keys = set(old_data.keys()) | set(new_data.keys())\n\nfor key in all_keys:\n    old_value = old_data.get(key)\n    new_value = new_data.get(key)\n\n    if key not in old_data:\n        # Added field\n        changes[\"added\"][key] = new_value\n    elif key not in new_data:\n        # Removed field\n        changes[\"removed\"][key] = old_value\n    elif old_value != new_value:\n        # Modified field\n        changes[\"modified\"][key] = {\n            \"old\": old_value,\n            \"new\": new_value\n        }\n    else:\n        # Unchanged field\n        changes[\"unchanged\"][key] = old_value\n\nreturn [{\n    \"json\": {\n        \"changes\": changes,\n        \"summary\": {\n            \"added_count\": len(changes[\"added\"]),\n            \"removed_count\": len(changes[\"removed\"]),\n            \"modified_count\": len(changes[\"modified\"]),\n            \"unchanged_count\": len(changes[\"unchanged\"]),\n            \"has_changes\": len(changes[\"added\"]) > 0 or len(changes[\"removed\"]) > 0 or len(changes[\"modified\"]) > 0\n        }\n    }\n}]\n```\n\n### Key Techniques\n\n- Set operations for key comparison\n- Dictionary .get() for safe access\n- Categorize changes by type\n- Create summary statistics\n- Return detailed comparison\n\n---\n\n## Pattern 5: CRM Data Transformation\n\n**Use case**: Transform CRM data to standard format.\n\n**Scenario**: Normalize data from different CRM systems.\n\n### Implementation\n\n```python\nfrom datetime import datetime\nimport re\n\nall_items = _input.all()\nnormalized_contacts = []\n\nfor item in all_items:\n    raw_contact = item[\"json\"]\n    source = raw_contact.get(\"source\", \"unknown\")\n\n    # Normalize email\n    email = raw_contact.get(\"email\", \"\").lower().strip()\n\n    # Normalize phone (remove non-digits)\n    phone_raw = raw_contact.get(\"phone\", \"\")\n    phone = re.sub(r'\\D', '', phone_raw)\n\n    # Parse name\n    if \"full_name\" in raw_contact:\n        name_parts = raw_contact[\"full_name\"].split(\" \", 1)\n        first_name = name_parts[0] if len(name_parts) > 0 else \"\"\n        last_name = name_parts[1] if len(name_parts) > 1 else \"\"\n    else:\n        first_name = raw_contact.get(\"first_name\", \"\")\n        last_name = raw_contact.get(\"last_name\", \"\")\n\n    # Normalize status\n    status_raw = raw_contact.get(\"status\", \"\").lower()\n    status = \"active\" if status_raw in [\"active\", \"enabled\", \"true\", \"1\"] else \"inactive\"\n\n    # Create normalized contact\n    normalized_contacts.append({\n        \"json\": {\n            \"id\": raw_contact.get(\"id\", \"\"),\n            \"first_name\": first_name.strip(),\n            \"last_name\": last_name.strip(),\n            \"full_name\": f\"{first_name} {last_name}\".strip(),\n            \"email\": email,\n            \"phone\": phone,\n            \"status\": status,\n            \"source\": source,\n            \"normalized_at\": datetime.now().isoformat(),\n            \"original_data\": raw_contact\n        }\n    })\n\nreturn normalized_contacts\n```\n\n### Key Techniques\n\n- Multiple field name variations handling\n- String cleaning and normalization\n- Regex for phone number cleaning\n- Name parsing logic\n- Status normalization\n- Preserve original data\n\n---\n\n## Pattern 6: Release Notes Processing\n\n**Use case**: Parse release notes and categorize changes.\n\n**Scenario**: Extract features, fixes, and breaking changes from release notes.\n\n### Implementation\n\n```python\nimport re\n\nrelease_notes = _input.first()[\"json\"][\"body\"].get(\"notes\", \"\")\n\ncategories = {\n    \"features\": [],\n    \"fixes\": [],\n    \"breaking\": [],\n    \"other\": []\n}\n\n# Split into lines\nlines = release_notes.split(\"\\n\")\n\nfor line in lines:\n    line = line.strip()\n\n    # Skip empty lines and headers\n    if not line or line.startswith(\"#\"):\n        continue\n\n    # Remove bullet points\n    clean_line = re.sub(r'^[\\*\\-\\+]\\s*', '', line)\n\n    # Categorize\n    if re.search(r'\\b(feature|add|new)\\b', clean_line, re.IGNORECASE):\n        categories[\"features\"].append(clean_line)\n    elif re.search(r'\\b(fix|bug|patch|resolve)\\b', clean_line, re.IGNORECASE):\n        categories[\"fixes\"].append(clean_line)\n    elif re.search(r'\\b(breaking|deprecated|remove)\\b', clean_line, re.IGNORECASE):\n        categories[\"breaking\"].append(clean_line)\n    else:\n        categories[\"other\"].append(clean_line)\n\nreturn [{\n    \"json\": {\n        \"categories\": categories,\n        \"summary\": {\n            \"features\": len(categories[\"features\"]),\n            \"fixes\": len(categories[\"fixes\"]),\n            \"breaking\": len(categories[\"breaking\"]),\n            \"other\": len(categories[\"other\"]),\n            \"total\": sum(len(v) for v in categories.values())\n        }\n    }\n}]\n```\n\n### Key Techniques\n\n- Line-by-line parsing\n- Pattern-based categorization\n- Bullet point removal\n- Skip headers and empty lines\n- Summary statistics\n\n---\n\n## Pattern 7: Array Transformation\n\n**Use case**: Reshape arrays and extract specific fields.\n\n**Scenario**: Transform user data array to extract specific fields.\n\n### Implementation\n\n```python\nall_items = _input.all()\n\n# Extract and transform\ntransformed = []\n\nfor item in all_items:\n    user = item[\"json\"]\n\n    # Extract nested fields\n    profile = user.get(\"profile\", {})\n    settings = user.get(\"settings\", {})\n\n    transformed.append({\n        \"json\": {\n            \"user_id\": user.get(\"id\"),\n            \"email\": user.get(\"email\"),\n            \"name\": profile.get(\"name\", \"Unknown\"),\n            \"avatar\": profile.get(\"avatar_url\"),\n            \"bio\": profile.get(\"bio\", \"\")[:100],  # Truncate to 100 chars\n            \"notifications_enabled\": settings.get(\"notifications\", True),\n            \"theme\": settings.get(\"theme\", \"light\"),\n            \"created_at\": user.get(\"created_at\"),\n            \"last_login\": user.get(\"last_login_at\")\n        }\n    })\n\nreturn transformed\n```\n\n### Key Techniques\n\n- Field extraction from nested objects\n- Default values with .get()\n- String truncation\n- Flattening nested structures\n\n---\n\n## Pattern 8: Dictionary Lookup\n\n**Use case**: Create lookup dictionary for fast data access.\n\n**Scenario**: Look up user details by ID.\n\n### Implementation\n\n```python\nall_items = _input.all()\n\n# Build lookup dictionary\nusers_by_id = {}\n\nfor item in all_items:\n    user = item[\"json\"]\n    user_id = user.get(\"id\")\n\n    if user_id:\n        users_by_id[user_id] = {\n            \"name\": user.get(\"name\"),\n            \"email\": user.get(\"email\"),\n            \"status\": user.get(\"status\")\n        }\n\n# Example: Look up specific users\nlookup_ids = [1, 3, 5]\nlooked_up = []\n\nfor user_id in lookup_ids:\n    if user_id in users_by_id:\n        looked_up.append({\n            \"json\": {\n                \"id\": user_id,\n                **users_by_id[user_id],\n                \"found\": True\n            }\n        })\n    else:\n        looked_up.append({\n            \"json\": {\n                \"id\": user_id,\n                \"found\": False\n            }\n        })\n\nreturn looked_up\n```\n\n### Key Techniques\n\n- Dictionary comprehension alternative\n- O(1) lookup time\n- Handle missing keys gracefully\n- Preserve lookup order\n\n---\n\n## Pattern 9: Top N Filtering\n\n**Use case**: Get top items by score or value.\n\n**Scenario**: Get top 10 products by sales.\n\n### Implementation\n\n```python\nall_items = _input.all()\n\n# Extract products with sales\nproducts = []\n\nfor item in all_items:\n    product = item[\"json\"]\n    products.append({\n        \"id\": product.get(\"id\"),\n        \"name\": product.get(\"name\"),\n        \"sales\": product.get(\"sales\", 0),\n        \"revenue\": product.get(\"revenue\", 0.0),\n        \"category\": product.get(\"category\")\n    })\n\n# Sort by sales descending\nproducts.sort(key=lambda p: p[\"sales\"], reverse=True)\n\n# Get top 10\ntop_10 = products[:10]\n\nreturn [\n    {\n        \"json\": {\n            **product,\n            \"rank\": index + 1\n        }\n    }\n    for index, product in enumerate(top_10)\n]\n```\n\n### Key Techniques\n\n- List sorting with custom key\n- Slicing for top N\n- Add ranking information\n- Enumerate for index\n\n---\n\n## Pattern 10: String Aggregation\n\n**Use case**: Aggregate strings with formatting.\n\n**Scenario**: Create summary text from multiple items.\n\n### Implementation\n\n```python\nall_items = _input.all()\n\n# Collect messages\nmessages = []\n\nfor item in all_items:\n    data = item[\"json\"]\n\n    user = data.get(\"user\", \"Unknown\")\n    message = data.get(\"message\", \"\")\n    timestamp = data.get(\"timestamp\", \"\")\n\n    # Format each message\n    formatted = f\"[{timestamp}] {user}: {message}\"\n    messages.append(formatted)\n\n# Join with newlines\nsummary = \"\\n\".join(messages)\n\n# Create statistics\ntotal_length = sum(len(msg) for msg in messages)\naverage_length = total_length / len(messages) if messages else 0\n\nreturn [{\n    \"json\": {\n        \"summary\": summary,\n        \"message_count\": len(messages),\n        \"total_characters\": total_length,\n        \"average_length\": round(average_length, 2)\n    }\n}]\n```\n\n### Key Techniques\n\n- String formatting with f-strings\n- Join lists with separator\n- Calculate string statistics\n- Handle empty lists\n\n---\n\n## Pattern Comparison: Python vs JavaScript\n\n### Data Access\n\n```python\n# Python\nall_items = _input.all()\nfirst_item = _input.first()\ncurrent = _input.item\nwebhook_data = _json[\"body\"]\n\n# JavaScript\nconst allItems = $input.all();\nconst firstItem = $input.first();\nconst current = $input.item;\nconst webhookData = $json.body;\n```\n\n### Dictionary/Object Access\n\n```python\n# Python - Dictionary key access\nname = user[\"name\"]           # May raise KeyError\nname = user.get(\"name\", \"?\")  # Safe with default\n\n# JavaScript - Object property access\nconst name = user.name;              // May be undefined\nconst name = user.name || \"?\";       // Safe with default\n```\n\n### Array Operations\n\n```python\n# Python - List comprehension\nfiltered = [item for item in items if item[\"active\"]]\n\n# JavaScript - Array methods\nconst filtered = items.filter(item => item.active);\n```\n\n### Sorting\n\n```python\n# Python\nitems.sort(key=lambda x: x[\"score\"], reverse=True)\n\n# JavaScript\nitems.sort((a, b) => b.score - a.score);\n```\n\n---\n\n## Best Practices\n\n### 1. Use .get() for Safe Access\n\n```python\n# âœ… SAFE: Use .get() with defaults\nname = user.get(\"name\", \"Unknown\")\nemail = user.get(\"email\", \"no-email@example.com\")\n\n# âŒ RISKY: Direct key access\nname = user[\"name\"]  # KeyError if missing!\n```\n\n### 2. Handle Empty Lists\n\n```python\n# âœ… SAFE: Check before processing\nitems = _input.all()\nif items:\n    first = items[0]\nelse:\n    return [{\"json\": {\"error\": \"No items\"}}]\n\n# âŒ RISKY: Assume items exist\nfirst = items[0]  # IndexError if empty!\n```\n\n### 3. Use List Comprehensions\n\n```python\n# âœ… PYTHONIC: List comprehension\nactive = [item for item in items if item[\"json\"].get(\"active\")]\n\n# âŒ VERBOSE: Traditional loop\nactive = []\nfor item in items:\n    if item[\"json\"].get(\"active\"):\n        active.append(item)\n```\n\n### 4. Return Proper Format\n\n```python\n# âœ… CORRECT: Array of objects with \"json\" key\nreturn [{\"json\": {\"field\": \"value\"}}]\n\n# âŒ WRONG: Just the data\nreturn {\"field\": \"value\"}\n\n# âŒ WRONG: Array without \"json\" wrapper\nreturn [{\"field\": \"value\"}]\n```\n\n### 5. Use Standard Library\n\n```python\n# âœ… GOOD: Use standard library\nimport statistics\naverage = statistics.mean(numbers)\n\n# âœ… ALSO GOOD: Built-in functions\naverage = sum(numbers) / len(numbers) if numbers else 0\n\n# âŒ CAN'T DO: External libraries\nimport numpy as np  # ModuleNotFoundError!\n```\n\n---\n\n## When to Use Each Pattern\n\n| Pattern | When to Use |\n|---------|-------------|\n| Multi-Source Aggregation | Combining data from different nodes/sources |\n| Regex Filtering | Text pattern matching, validation, extraction |\n| Markdown Parsing | Processing formatted text into structured data |\n| JSON Comparison | Detecting changes between objects |\n| CRM Transformation | Normalizing data from different systems |\n| Release Notes | Categorizing text by keywords |\n| Array Transformation | Reshaping data, extracting fields |\n| Dictionary Lookup | Fast ID-based lookups |\n| Top N Filtering | Getting best/worst items by criteria |\n| String Aggregation | Creating formatted text summaries |\n\n---\n\n## Summary\n\n**Key Takeaways**:\n- Use `.get()` for safe dictionary access\n- List comprehensions are pythonic and efficient\n- Handle empty lists/None values\n- Use standard library (json, datetime, re)\n- Return proper n8n format: `[{\"json\": {...}}]`\n\n**Remember**:\n- JavaScript is recommended for 95% of use cases\n- Python has NO external libraries\n- Use n8n nodes for complex operations\n- Code node is for data transformation, not API calls\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Python Code overview\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Data access patterns\n- [STANDARD_LIBRARY.md](STANDARD_LIBRARY.md) - Available modules\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Avoid common mistakes\n",
        "skills/n8n-code-python/DATA_ACCESS.md": "# Data Access Patterns - Python Code Node\n\nComplete guide to accessing data in n8n Code nodes using Python.\n\n---\n\n## Overview\n\nIn n8n Python Code nodes, you access data using **underscore-prefixed** variables: `_input`, `_json`, `_node`.\n\n**Data Access Priority** (by common usage):\n1. **`_input.all()`** - Most common - Batch operations, aggregations\n2. **`_input.first()`** - Very common - Single item operations\n3. **`_input.item`** - Common - Each Item mode only\n4. **`_node[\"NodeName\"][\"json\"]`** - Specific node references\n5. **`_json`** - Direct current item (use `_input` instead)\n\n**Python vs JavaScript**:\n| JavaScript | Python (Beta) | Python (Native) |\n|------------|---------------|-----------------|\n| `$input.all()` | `_input.all()` | `_items` |\n| `$input.first()` | `_input.first()` | `_items[0]` |\n| `$input.item` | `_input.item` | `_item` |\n| `$json` | `_json` | `_item[\"json\"]` |\n| `$node[\"Name\"]` | `_node[\"Name\"]` | Not available |\n\n---\n\n## Pattern 1: _input.all() - Process All Items\n\n**Usage**: Most common pattern for batch processing\n\n**When to use:**\n- Processing multiple records\n- Aggregating data (sum, count, average)\n- Filtering lists\n- Transforming datasets\n\n### Basic Usage\n\n```python\n# Get all items from previous node\nall_items = _input.all()\n\n# all_items is a list of dictionaries like:\n# [\n#   {\"json\": {\"id\": 1, \"name\": \"Alice\"}},\n#   {\"json\": {\"id\": 2, \"name\": \"Bob\"}}\n# ]\n\nprint(f\"Received {len(all_items)} items\")\n\nreturn all_items\n```\n\n### Example 1: Filter Active Items\n\n```python\nall_items = _input.all()\n\n# Filter only active items\nactive_items = [\n    item for item in all_items\n    if item[\"json\"].get(\"status\") == \"active\"\n]\n\nreturn active_items\n```\n\n### Example 2: Transform All Items\n\n```python\nall_items = _input.all()\n\n# Transform to new structure\ntransformed = []\nfor item in all_items:\n    transformed.append({\n        \"json\": {\n            \"id\": item[\"json\"].get(\"id\"),\n            \"full_name\": f\"{item['json'].get('first_name', '')} {item['json'].get('last_name', '')}\",\n            \"email\": item[\"json\"].get(\"email\"),\n            \"processed_at\": datetime.now().isoformat()\n        }\n    })\n\nreturn transformed\n```\n\n### Example 3: Aggregate Data\n\n```python\nall_items = _input.all()\n\n# Calculate total\ntotal = sum(item[\"json\"].get(\"amount\", 0) for item in all_items)\n\nreturn [{\n    \"json\": {\n        \"total\": total,\n        \"count\": len(all_items),\n        \"average\": total / len(all_items) if all_items else 0\n    }\n}]\n```\n\n### Example 4: Sort and Limit\n\n```python\nall_items = _input.all()\n\n# Get top 5 by score\nsorted_items = sorted(\n    all_items,\n    key=lambda item: item[\"json\"].get(\"score\", 0),\n    reverse=True\n)\ntop_five = sorted_items[:5]\n\nreturn [{\"json\": item[\"json\"]} for item in top_five]\n```\n\n### Example 5: Group By Category\n\n```python\nall_items = _input.all()\n\n# Group items by category\ngrouped = {}\nfor item in all_items:\n    category = item[\"json\"].get(\"category\", \"Uncategorized\")\n\n    if category not in grouped:\n        grouped[category] = []\n\n    grouped[category].append(item[\"json\"])\n\n# Convert to list format\nreturn [\n    {\n        \"json\": {\n            \"category\": category,\n            \"items\": items,\n            \"count\": len(items)\n        }\n    }\n    for category, items in grouped.items()\n]\n```\n\n### Example 6: Deduplicate by ID\n\n```python\nall_items = _input.all()\n\n# Remove duplicates by ID\nseen = set()\nunique = []\n\nfor item in all_items:\n    item_id = item[\"json\"].get(\"id\")\n\n    if item_id and item_id not in seen:\n        seen.add(item_id)\n        unique.append(item)\n\nreturn unique\n```\n\n---\n\n## Pattern 2: _input.first() - Get First Item\n\n**Usage**: Very common for single-item operations\n\n**When to use:**\n- Previous node returns single object\n- Working with API responses\n- Getting initial/first data point\n\n### Basic Usage\n\n```python\n# Get first item from previous node\nfirst_item = _input.first()\n\n# Access the JSON data\ndata = first_item[\"json\"]\n\nprint(f\"First item: {data}\")\n\nreturn [{\"json\": data}]\n```\n\n### Example 1: Process Single API Response\n\n```python\n# Get API response (typically single object)\nresponse = _input.first()[\"json\"]\n\n# Extract what you need\nreturn [{\n    \"json\": {\n        \"user_id\": response.get(\"data\", {}).get(\"user\", {}).get(\"id\"),\n        \"user_name\": response.get(\"data\", {}).get(\"user\", {}).get(\"name\"),\n        \"status\": response.get(\"status\"),\n        \"fetched_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n### Example 2: Transform Single Object\n\n```python\ndata = _input.first()[\"json\"]\n\n# Transform structure\nreturn [{\n    \"json\": {\n        \"id\": data.get(\"id\"),\n        \"contact\": {\n            \"email\": data.get(\"email\"),\n            \"phone\": data.get(\"phone\")\n        },\n        \"address\": {\n            \"street\": data.get(\"street\"),\n            \"city\": data.get(\"city\"),\n            \"zip\": data.get(\"zip\")\n        }\n    }\n}]\n```\n\n### Example 3: Validate Single Item\n\n```python\nitem = _input.first()[\"json\"]\n\n# Validation logic\nis_valid = bool(item.get(\"email\") and \"@\" in item.get(\"email\", \"\"))\n\nreturn [{\n    \"json\": {\n        **item,\n        \"valid\": is_valid,\n        \"validated_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n### Example 4: Extract Nested Data\n\n```python\nresponse = _input.first()[\"json\"]\n\n# Navigate nested structure\nusers = response.get(\"data\", {}).get(\"users\", [])\n\nreturn [\n    {\n        \"json\": {\n            \"id\": user.get(\"id\"),\n            \"name\": user.get(\"profile\", {}).get(\"name\", \"Unknown\"),\n            \"email\": user.get(\"contact\", {}).get(\"email\", \"no-email\")\n        }\n    }\n    for user in users\n]\n```\n\n---\n\n## Pattern 3: _input.item - Current Item (Each Item Mode)\n\n**Usage**: Common in \"Run Once for Each Item\" mode\n\n**When to use:**\n- Mode is set to \"Run Once for Each Item\"\n- Need to process items independently\n- Per-item API calls or validations\n\n**IMPORTANT**: Only use in \"Each Item\" mode. Will be undefined in \"All Items\" mode.\n\n### Basic Usage\n\n```python\n# In \"Run Once for Each Item\" mode\ncurrent_item = _input.item\ndata = current_item[\"json\"]\n\nprint(f\"Processing item: {data.get('id')}\")\n\nreturn [{\n    \"json\": {\n        **data,\n        \"processed\": True\n    }\n}]\n```\n\n### Example 1: Add Processing Metadata\n\n```python\nitem = _input.item\n\nreturn [{\n    \"json\": {\n        **item[\"json\"],\n        \"processed\": True,\n        \"processed_at\": datetime.now().isoformat(),\n        \"processing_duration\": random.random() * 1000  # Simulated\n    }\n}]\n```\n\n### Example 2: Per-Item Validation\n\n```python\nitem = _input.item\ndata = item[\"json\"]\n\n# Validate this specific item\nerrors = []\n\nif not data.get(\"email\"):\n    errors.append(\"Email required\")\nif not data.get(\"name\"):\n    errors.append(\"Name required\")\nif data.get(\"age\") and data[\"age\"] < 18:\n    errors.append(\"Must be 18+\")\n\nreturn [{\n    \"json\": {\n        **data,\n        \"valid\": len(errors) == 0,\n        \"errors\": errors if errors else None\n    }\n}]\n```\n\n### Example 3: Conditional Processing\n\n```python\nitem = _input.item\ndata = item[\"json\"]\n\n# Process based on item type\nif data.get(\"type\") == \"premium\":\n    return [{\n        \"json\": {\n            **data,\n            \"discount\": 0.20,\n            \"tier\": \"premium\"\n        }\n    }]\nelse:\n    return [{\n        \"json\": {\n            **data,\n            \"discount\": 0.05,\n            \"tier\": \"standard\"\n        }\n    }]\n```\n\n---\n\n## Pattern 4: _node - Reference Other Nodes\n\n**Usage**: Less common, but powerful for specific scenarios\n\n**When to use:**\n- Need data from specific named node\n- Combining data from multiple nodes\n\n### Basic Usage\n\n```python\n# Get output from specific node\nwebhook_data = _node[\"Webhook\"][\"json\"]\napi_data = _node[\"HTTP Request\"][\"json\"]\n\nreturn [{\n    \"json\": {\n        \"from_webhook\": webhook_data,\n        \"from_api\": api_data\n    }\n}]\n```\n\n### Example 1: Combine Multiple Sources\n\n```python\n# Reference multiple nodes\nwebhook = _node[\"Webhook\"][\"json\"]\ndatabase = _node[\"Postgres\"][\"json\"]\napi = _node[\"HTTP Request\"][\"json\"]\n\nreturn [{\n    \"json\": {\n        \"combined\": {\n            \"webhook\": webhook.get(\"body\", {}),\n            \"db_records\": len(database) if isinstance(database, list) else 1,\n            \"api_response\": api.get(\"status\")\n        },\n        \"processed_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n### Example 2: Compare Across Nodes\n\n```python\nold_data = _node[\"Get Old Data\"][\"json\"]\nnew_data = _node[\"Get New Data\"][\"json\"]\n\n# Simple comparison\nchanges = {\n    \"added\": [n for n in new_data if n.get(\"id\") not in [o.get(\"id\") for o in old_data]],\n    \"removed\": [o for o in old_data if o.get(\"id\") not in [n.get(\"id\") for n in new_data]]\n}\n\nreturn [{\n    \"json\": {\n        \"changes\": changes,\n        \"summary\": {\n            \"added\": len(changes[\"added\"]),\n            \"removed\": len(changes[\"removed\"])\n        }\n    }\n}]\n```\n\n---\n\n## Critical: Webhook Data Structure\n\n**MOST COMMON MISTAKE**: Forgetting webhook data is nested under `[\"body\"]`\n\n### The Problem\n\nWebhook node wraps all incoming data under a `\"body\"` property.\n\n### Structure\n\n```python\n# Webhook node output structure:\n{\n    \"headers\": {\n        \"content-type\": \"application/json\",\n        \"user-agent\": \"...\"\n    },\n    \"params\": {},\n    \"query\": {},\n    \"body\": {\n        # â† YOUR DATA IS HERE\n        \"name\": \"Alice\",\n        \"email\": \"alice@example.com\",\n        \"message\": \"Hello!\"\n    }\n}\n```\n\n### Wrong vs Right\n\n```python\n# âŒ WRONG: Trying to access directly\nname = _json[\"name\"]  # KeyError!\nemail = _json[\"email\"]  # KeyError!\n\n# âœ… CORRECT: Access via [\"body\"]\nname = _json[\"body\"][\"name\"]  # \"Alice\"\nemail = _json[\"body\"][\"email\"]  # \"alice@example.com\"\n\n# âœ… SAFER: Use .get() for safe access\nwebhook_data = _json.get(\"body\", {})\nname = webhook_data.get(\"name\")  # None if missing\nemail = webhook_data.get(\"email\", \"no-email\")  # Default value\n```\n\n### Example: Full Webhook Processing\n\n```python\n# Get webhook data from previous node\nwebhook_output = _input.first()[\"json\"]\n\n# Access the actual payload\npayload = webhook_output.get(\"body\", {})\n\n# Access headers if needed\ncontent_type = webhook_output.get(\"headers\", {}).get(\"content-type\")\n\n# Access query parameters if needed\napi_key = webhook_output.get(\"query\", {}).get(\"api_key\")\n\n# Process the actual data\nreturn [{\n    \"json\": {\n        # Data from webhook body\n        \"user_name\": payload.get(\"name\"),\n        \"user_email\": payload.get(\"email\"),\n        \"message\": payload.get(\"message\"),\n\n        # Metadata\n        \"received_at\": datetime.now().isoformat(),\n        \"content_type\": content_type,\n        \"authenticated\": bool(api_key)\n    }\n}]\n```\n\n### POST Data, Query Params, and Headers\n\n```python\nwebhook = _input.first()[\"json\"]\n\nreturn [{\n    \"json\": {\n        # POST body data\n        \"form_data\": webhook.get(\"body\", {}),\n\n        # Query parameters (?key=value)\n        \"query_params\": webhook.get(\"query\", {}),\n\n        # HTTP headers\n        \"user_agent\": webhook.get(\"headers\", {}).get(\"user-agent\"),\n        \"content_type\": webhook.get(\"headers\", {}).get(\"content-type\"),\n\n        # Request metadata\n        \"method\": webhook.get(\"method\"),  # POST, GET, etc.\n        \"url\": webhook.get(\"url\")\n    }\n}]\n```\n\n---\n\n## Choosing the Right Pattern\n\n### Decision Tree\n\n```\nDo you need ALL items from previous node?\nâ”œâ”€ YES â†’ Use _input.all()\nâ”‚\nâ””â”€ NO â†’ Do you need just the FIRST item?\n    â”œâ”€ YES â†’ Use _input.first()\n    â”‚\n    â””â”€ NO â†’ Are you in \"Each Item\" mode?\n        â”œâ”€ YES â†’ Use _input.item\n        â”‚\n        â””â”€ NO â†’ Do you need specific node data?\n            â”œâ”€ YES â†’ Use _node[\"NodeName\"]\n            â””â”€ NO â†’ Use _input.first() (default)\n```\n\n### Quick Reference Table\n\n| Scenario | Use This | Example |\n|----------|----------|---------|\n| Sum all amounts | `_input.all()` | `sum(i[\"json\"].get(\"amount\", 0) for i in items)` |\n| Get API response | `_input.first()` | `_input.first()[\"json\"].get(\"data\")` |\n| Process each independently | `_input.item` | `_input.item[\"json\"]` (Each Item mode) |\n| Combine two nodes | `_node[\"Name\"]` | `_node[\"API\"][\"json\"]` |\n| Filter list | `_input.all()` | `[i for i in items if i[\"json\"].get(\"active\")]` |\n| Transform single object | `_input.first()` | `{**_input.first()[\"json\"], \"new\": True}` |\n| Webhook data | `_input.first()` | `_input.first()[\"json\"][\"body\"]` |\n\n---\n\n## Common Mistakes\n\n### Mistake 1: Using _json Without Context\n\n```python\n# âŒ RISKY: _json is ambiguous\nvalue = _json[\"field\"]\n\n# âœ… CLEAR: Be explicit\nvalue = _input.first()[\"json\"][\"field\"]\n```\n\n### Mistake 2: Forgetting [\"json\"] Property\n\n```python\n# âŒ WRONG: Trying to access fields on item dictionary\nitems = _input.all()\nnames = [item[\"name\"] for item in items]  # KeyError!\n\n# âœ… CORRECT: Access via [\"json\"]\nnames = [item[\"json\"][\"name\"] for item in items]\n```\n\n### Mistake 3: Using _input.item in All Items Mode\n\n```python\n# âŒ WRONG: _input.item is None in \"All Items\" mode\ndata = _input.item[\"json\"]  # AttributeError!\n\n# âœ… CORRECT: Use appropriate method\ndata = _input.first()[\"json\"]  # Or _input.all()\n```\n\n### Mistake 4: Not Handling Empty Lists\n\n```python\n# âŒ WRONG: Crashes if no items\nfirst = _input.all()[0][\"json\"]  # IndexError!\n\n# âœ… CORRECT: Check length first\nitems = _input.all()\nif items:\n    first = items[0][\"json\"]\nelse:\n    return []\n\n# âœ… ALSO CORRECT: Use _input.first()\nfirst = _input.first()[\"json\"]  # Built-in safety\n```\n\n### Mistake 5: Direct Dictionary Access (KeyError)\n\n```python\n# âŒ RISKY: Crashes if key missing\nvalue = item[\"json\"][\"field\"]  # KeyError!\n\n# âœ… SAFE: Use .get()\nvalue = item[\"json\"].get(\"field\", \"default\")\n```\n\n---\n\n## Advanced Patterns\n\n### Pattern: Safe Nested Access\n\n```python\n# Deep nested access with .get()\nvalue = (\n    _input.first()[\"json\"]\n    .get(\"level1\", {})\n    .get(\"level2\", {})\n    .get(\"level3\", \"default\")\n)\n```\n\n### Pattern: List Comprehension with Filtering\n\n```python\nitems = _input.all()\n\n# Filter and transform in one step\nresult = [\n    {\n        \"json\": {\n            \"id\": item[\"json\"][\"id\"],\n            \"name\": item[\"json\"][\"name\"].upper()\n        }\n    }\n    for item in items\n    if item[\"json\"].get(\"active\") and item[\"json\"].get(\"verified\")\n]\n\nreturn result\n```\n\n### Pattern: Dictionary Comprehension\n\n```python\nitems = _input.all()\n\n# Create lookup dictionary\nlookup = {\n    item[\"json\"][\"id\"]: item[\"json\"]\n    for item in items\n    if \"id\" in item[\"json\"]\n}\n\nreturn [{\"json\": lookup}]\n```\n\n---\n\n## Summary\n\n**Most Common Patterns**:\n1. `_input.all()` - Process multiple items, batch operations\n2. `_input.first()` - Single item, API responses\n3. `_input.item` - Each Item mode processing\n\n**Critical Rule**:\n- Webhook data is under `[\"body\"]` property\n\n**Best Practice**:\n- Use `.get()` for dictionary access to avoid KeyError\n- Always check for empty lists\n- Be explicit: Use `_input.first()[\"json\"][\"field\"]` instead of `_json[\"field\"]`\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Overview and quick start\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Python-specific patterns\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Avoid common mistakes\n",
        "skills/n8n-code-python/ERROR_PATTERNS.md": "# Error Patterns - Python Code Node\n\nCommon Python Code node errors and how to fix them.\n\n---\n\n## Error Overview\n\n**Top 5 Python Code Node Errors**:\n\n1. **ModuleNotFoundError** - Trying to import external libraries (Python-specific)\n2. **Empty Code / Missing Return** - No code or return statement\n3. **KeyError** - Dictionary access without .get()\n4. **IndexError** - List access without bounds checking\n5. **Incorrect Return Format** - Wrong data structure returned\n\nThese 5 errors cover the majority of Python Code node failures.\n\n---\n\n## Error #1: ModuleNotFoundError (MOST CRITICAL)\n\n**Frequency**: Very common in Python Code nodes\n\n**What it is**: Attempting to import external libraries that aren't available.\n\n### The Problem\n\n```python\n# âŒ WRONG: External libraries not available\nimport requests  # ModuleNotFoundError: No module named 'requests'\nimport pandas    # ModuleNotFoundError: No module named 'pandas'\nimport numpy     # ModuleNotFoundError: No module named 'numpy'\nimport bs4       # ModuleNotFoundError: No module named 'bs4'\nimport pymongo   # ModuleNotFoundError: No module named 'pymongo'\nimport psycopg2  # ModuleNotFoundError: No module named 'psycopg2'\n\n# This code will FAIL - these libraries are not installed!\nresponse = requests.get(\"https://api.example.com/data\")\n```\n\n### The Solution\n\n**Option 1: Use JavaScript Instead** (Recommended for 95% of cases)\n\n```javascript\n// âœ… JavaScript Code node with $helpers.httpRequest()\nconst response = await $helpers.httpRequest({\n  method: 'GET',\n  url: 'https://api.example.com/data'\n});\n\nreturn [{json: response}];\n```\n\n**Option 2: Use n8n HTTP Request Node**\n\n```python\n# âœ… Add HTTP Request node BEFORE Python Code node\n# Access the response in Python Code node\n\nresponse = _input.first()[\"json\"]\n\nreturn [{\n    \"json\": {\n        \"status\": response.get(\"status\"),\n        \"data\": response.get(\"body\"),\n        \"processed\": True\n    }\n}]\n```\n\n**Option 3: Use Standard Library Only**\n\n```python\n# âœ… Use urllib from standard library (limited functionality)\nfrom urllib.request import urlopen\nfrom urllib.parse import urlencode\nimport json\n\n# Simple GET request (no headers, no auth)\nurl = \"https://api.example.com/data\"\nwith urlopen(url) as response:\n    data = json.loads(response.read())\n\nreturn [{\"json\": data}]\n```\n\n### Common Library Replacements\n\n| Need | âŒ External Library | âœ… Alternative |\n|------|-------------------|----------------|\n| HTTP requests | `requests` | Use HTTP Request node or JavaScript |\n| Data analysis | `pandas` | Use Python list comprehensions |\n| Database | `psycopg2`, `pymongo` | Use n8n database nodes |\n| Web scraping | `beautifulsoup4` | Use HTML Extract node |\n| Excel | `openpyxl` | Use Spreadsheet File node |\n| Image processing | `pillow` | Use external API or node |\n\n### Available Standard Library Modules\n\n```python\n# âœ… THESE WORK - Standard library only\nimport json          # JSON parsing\nimport datetime      # Date/time operations\nimport re            # Regular expressions\nimport base64        # Base64 encoding\nimport hashlib       # Hashing (MD5, SHA256)\nimport urllib.parse  # URL parsing and encoding\nimport math          # Math functions\nimport random        # Random numbers\nimport statistics    # Statistical functions\nimport collections   # defaultdict, Counter, etc.\n```\n\n---\n\n## Error #2: Empty Code / Missing Return\n\n**Frequency**: Common across all Code nodes\n\n**What it is**: Code node has no code or no return statement.\n\n### The Problem\n\n```python\n# âŒ WRONG: Empty code\n# (nothing here)\n\n# âŒ WRONG: Code but no return\nitems = _input.all()\nprocessed = [item for item in items if item[\"json\"].get(\"active\")]\n# Forgot to return!\n\n# âŒ WRONG: Return in wrong scope\nif _input.all():\n    return [{\"json\": {\"result\": \"success\"}}]\n# Return is inside if block - may not execute!\n```\n\n### The Solution\n\n```python\n# âœ… CORRECT: Always return\nall_items = _input.all()\n\nif not all_items:\n    # Return empty array or error\n    return [{\"json\": {\"error\": \"No items\"}}]\n\n# Process items\nprocessed = [item for item in all_items if item[\"json\"].get(\"active\")]\n\n# Always return at the end\nreturn processed if processed else [{\"json\": {\"message\": \"No active items\"}}]\n```\n\n### Best Practice\n\n```python\n# âœ… GOOD: Return at end of function (unconditional)\ndef process_items():\n    items = _input.all()\n\n    if not items:\n        return [{\"json\": {\"error\": \"Empty input\"}}]\n\n    # Process\n    result = []\n    for item in items:\n        result.append({\"json\": item[\"json\"]})\n\n    return result\n\n# Call function and return result\nreturn process_items()\n```\n\n---\n\n## Error #3: KeyError\n\n**Frequency**: Very common in Python Code nodes\n\n**What it is**: Accessing dictionary key that doesn't exist.\n\n### The Problem\n\n```python\n# âŒ WRONG: Direct key access\nitem = _input.first()[\"json\"]\n\nname = item[\"name\"]        # KeyError if \"name\" doesn't exist!\nemail = item[\"email\"]      # KeyError if \"email\" doesn't exist!\nage = item[\"age\"]          # KeyError if \"age\" doesn't exist!\n\nreturn [{\n    \"json\": {\n        \"name\": name,\n        \"email\": email,\n        \"age\": age\n    }\n}]\n```\n\n### Error Message\n\n```\nKeyError: 'name'\n```\n\n### The Solution\n\n```python\n# âœ… CORRECT: Use .get() with defaults\nitem = _input.first()[\"json\"]\n\nname = item.get(\"name\", \"Unknown\")\nemail = item.get(\"email\", \"no-email@example.com\")\nage = item.get(\"age\", 0)\n\nreturn [{\n    \"json\": {\n        \"name\": name,\n        \"email\": email,\n        \"age\": age\n    }\n}]\n```\n\n### Nested Dictionary Access\n\n```python\n# âŒ WRONG: Nested key access\nwebhook = _input.first()[\"json\"]\nname = webhook[\"body\"][\"user\"][\"name\"]  # Multiple KeyErrors possible!\n\n# âœ… CORRECT: Safe nested access\nwebhook = _input.first()[\"json\"]\nbody = webhook.get(\"body\", {})\nuser = body.get(\"user\", {})\nname = user.get(\"name\", \"Unknown\")\n\n# âœ… ALSO CORRECT: Chained .get()\nname = (\n    webhook\n    .get(\"body\", {})\n    .get(\"user\", {})\n    .get(\"name\", \"Unknown\")\n)\n\nreturn [{\"json\": {\"name\": name}}]\n```\n\n### Webhook Body Access (Critical!)\n\n```python\n# âŒ WRONG: Forgetting webhook data is under \"body\"\nwebhook = _input.first()[\"json\"]\nname = webhook[\"name\"]        # KeyError!\nemail = webhook[\"email\"]      # KeyError!\n\n# âœ… CORRECT: Access via [\"body\"]\nwebhook = _input.first()[\"json\"]\nbody = webhook.get(\"body\", {})\nname = body.get(\"name\", \"Unknown\")\nemail = body.get(\"email\", \"no-email\")\n\nreturn [{\n    \"json\": {\n        \"name\": name,\n        \"email\": email\n    }\n}]\n```\n\n---\n\n## Error #4: IndexError\n\n**Frequency**: Common when processing arrays/lists\n\n**What it is**: Accessing list index that doesn't exist.\n\n### The Problem\n\n```python\n# âŒ WRONG: Assuming items exist\nall_items = _input.all()\nfirst_item = all_items[0]        # IndexError if list is empty!\nsecond_item = all_items[1]       # IndexError if only 1 item!\n\nreturn [{\n    \"json\": {\n        \"first\": first_item[\"json\"],\n        \"second\": second_item[\"json\"]\n    }\n}]\n```\n\n### Error Message\n\n```\nIndexError: list index out of range\n```\n\n### The Solution\n\n```python\n# âœ… CORRECT: Check length first\nall_items = _input.all()\n\nif len(all_items) >= 2:\n    first_item = all_items[0][\"json\"]\n    second_item = all_items[1][\"json\"]\n\n    return [{\n        \"json\": {\n            \"first\": first_item,\n            \"second\": second_item\n        }\n    }]\nelse:\n    return [{\n        \"json\": {\n            \"error\": f\"Expected 2+ items, got {len(all_items)}\"\n        }\n    }]\n```\n\n### Safe First Item Access\n\n```python\n# âœ… CORRECT: Use _input.first() instead of [0]\n# This is safer than manual indexing\nfirst_item = _input.first()[\"json\"]\n\nreturn [{\"json\": first_item}]\n\n# âœ… ALSO CORRECT: Check before accessing\nall_items = _input.all()\nif all_items:\n    first_item = all_items[0][\"json\"]\nelse:\n    first_item = {}\n\nreturn [{\"json\": first_item}]\n```\n\n### Slice Instead of Index\n\n```python\n# âœ… CORRECT: Use slicing (never raises IndexError)\nall_items = _input.all()\n\n# Get first 5 items (won't fail if fewer than 5)\nfirst_five = all_items[:5]\n\n# Get items after first (won't fail if empty)\nrest = all_items[1:]\n\nreturn [{\"json\": item[\"json\"]} for item in first_five]\n```\n\n---\n\n## Error #5: Incorrect Return Format\n\n**Frequency**: Common for new users\n\n**What it is**: Returning data in wrong format (n8n expects array of objects with \"json\" key).\n\n### The Problem\n\n```python\n# âŒ WRONG: Returning plain dictionary\nreturn {\"name\": \"Alice\", \"age\": 30}\n\n# âŒ WRONG: Returning array without \"json\" wrapper\nreturn [{\"name\": \"Alice\"}, {\"name\": \"Bob\"}]\n\n# âŒ WRONG: Returning None\nreturn None\n\n# âŒ WRONG: Returning string\nreturn \"success\"\n\n# âŒ WRONG: Returning single item (not array)\nreturn {\"json\": {\"name\": \"Alice\"}}\n```\n\n### The Solution\n\n```python\n# âœ… CORRECT: Array of objects with \"json\" key\nreturn [{\"json\": {\"name\": \"Alice\", \"age\": 30}}]\n\n# âœ… CORRECT: Multiple items\nreturn [\n    {\"json\": {\"name\": \"Alice\"}},\n    {\"json\": {\"name\": \"Bob\"}}\n]\n\n# âœ… CORRECT: Transform items\nall_items = _input.all()\nreturn [\n    {\"json\": item[\"json\"]}\n    for item in all_items\n]\n\n# âœ… CORRECT: Empty array (valid)\nreturn []\n\n# âœ… CORRECT: Single item still needs array wrapper\nreturn [{\"json\": {\"result\": \"success\"}}]\n```\n\n### Common Scenarios\n\n**Scenario 1: Aggregation (Return Single Result)**\n\n```python\n# Calculate total\nall_items = _input.all()\ntotal = sum(item[\"json\"].get(\"amount\", 0) for item in all_items)\n\n# âœ… CORRECT: Wrap in array with \"json\"\nreturn [{\n    \"json\": {\n        \"total\": total,\n        \"count\": len(all_items)\n    }\n}]\n```\n\n**Scenario 2: Filtering (Return Multiple Results)**\n\n```python\n# Filter active items\nall_items = _input.all()\nactive = [item for item in all_items if item[\"json\"].get(\"active\")]\n\n# âœ… CORRECT: Already in correct format\nreturn active\n\n# âœ… ALSO CORRECT: If transforming\nreturn [\n    {\"json\": {**item[\"json\"], \"filtered\": True}}\n    for item in active\n]\n```\n\n**Scenario 3: No Results**\n\n```python\n# âœ… CORRECT: Return empty array\nreturn []\n\n# âœ… ALSO CORRECT: Return error message\nreturn [{\"json\": {\"error\": \"No results found\"}}]\n```\n\n---\n\n## Bonus Error: AttributeError\n\n**What it is**: Using _input.item in wrong mode.\n\n### The Problem\n\n```python\n# âŒ WRONG: Using _input.item in \"All Items\" mode\ncurrent = _input.item        # None in \"All Items\" mode\ndata = current[\"json\"]       # AttributeError: 'NoneType' object has no attribute '__getitem__'\n```\n\n### The Solution\n\n```python\n# âœ… CORRECT: Check mode or use appropriate method\n# In \"All Items\" mode, use:\nall_items = _input.all()\n\n# In \"Each Item\" mode, use:\ncurrent_item = _input.item\n\n# âœ… SAFE: Check if item exists\ncurrent = _input.item\nif current:\n    data = current[\"json\"]\n    return [{\"json\": data}]\nelse:\n    # Running in \"All Items\" mode\n    return _input.all()\n```\n\n---\n\n## Error Prevention Checklist\n\nBefore running your Python Code node, verify:\n\n- [ ] **No external imports**: Only standard library (json, datetime, re, etc.)\n- [ ] **Code returns data**: Every code path ends with `return`\n- [ ] **Correct format**: Returns `[{\"json\": {...}}]` (array with \"json\" key)\n- [ ] **Safe dictionary access**: Uses `.get()` instead of `[]` for dictionaries\n- [ ] **Safe list access**: Checks length before indexing or uses slicing\n- [ ] **Webhook body access**: Accesses webhook data via `_json[\"body\"]`\n- [ ] **No None returns**: Returns empty array `[]` instead of `None`\n- [ ] **Mode awareness**: Uses `_input.all()`, `_input.first()`, or `_input.item` appropriately\n\n---\n\n## Quick Fix Reference\n\n| Error | Quick Fix |\n|-------|-----------|\n| `ModuleNotFoundError` | Use JavaScript or HTTP Request node instead |\n| `KeyError: 'field'` | Change `data[\"field\"]` to `data.get(\"field\", default)` |\n| `IndexError: list index out of range` | Check `if len(items) > 0:` before `items[0]` |\n| Empty output | Add `return [{\"json\": {...}}]` at end |\n| `AttributeError: 'NoneType'` | Check mode setting or verify `_input.item` exists |\n| Wrong format error | Wrap result: `return [{\"json\": result}]` |\n| Webhook KeyError | Access via `_json.get(\"body\", {})` |\n\n---\n\n## Testing Your Code\n\n### Test Pattern 1: Handle Empty Input\n\n```python\n# âœ… Always test with empty input\nall_items = _input.all()\n\nif not all_items:\n    return [{\"json\": {\"message\": \"No items to process\"}}]\n\n# Continue with processing\n# ...\n```\n\n### Test Pattern 2: Test with Missing Fields\n\n```python\n# âœ… Use .get() with defaults\nitem = _input.first()[\"json\"]\n\n# These won't fail even if fields missing\nname = item.get(\"name\", \"Unknown\")\nemail = item.get(\"email\", \"no-email\")\nage = item.get(\"age\", 0)\n\nreturn [{\"json\": {\"name\": name, \"email\": email, \"age\": age}}]\n```\n\n### Test Pattern 3: Test Both Modes\n\n```python\n# âœ… Code that works in both modes\ntry:\n    # Try \"Each Item\" mode first\n    current = _input.item\n    if current:\n        return [{\"json\": current[\"json\"]}]\nexcept:\n    pass\n\n# Fall back to \"All Items\" mode\nall_items = _input.all()\nreturn all_items if all_items else [{\"json\": {\"message\": \"No data\"}}]\n```\n\n---\n\n## Summary\n\n**Top 5 Errors to Avoid**:\n1. **ModuleNotFoundError** - Use JavaScript or n8n nodes instead\n2. **Missing return** - Always end with `return [{\"json\": {...}}]`\n3. **KeyError** - Use `.get()` for dictionary access\n4. **IndexError** - Check length before indexing\n5. **Wrong format** - Return `[{\"json\": {...}}]`, not plain objects\n\n**Golden Rules**:\n- NO external libraries (use JavaScript instead)\n- ALWAYS use `.get()` for dictionaries\n- ALWAYS return `[{\"json\": {...}}]` format\n- CHECK lengths before list access\n- ACCESS webhook data via `[\"body\"]`\n\n**Remember**:\n- JavaScript is recommended for 95% of use cases\n- Python has limitations (no requests, pandas, numpy)\n- Use n8n nodes for complex operations\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Python Code overview\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Data access patterns\n- [STANDARD_LIBRARY.md](STANDARD_LIBRARY.md) - Available modules\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Production patterns\n",
        "skills/n8n-code-python/README.md": "# n8n Code Python Skill\n\nExpert guidance for writing Python code in n8n Code nodes.\n\n---\n\n## âš ï¸ Important: JavaScript First\n\n**Use JavaScript for 95% of use cases.**\n\nPython in n8n has **NO external libraries** (no requests, pandas, numpy).\n\n**When to use Python**:\n- You have complex Python-specific logic\n- You need Python's standard library features\n- You're more comfortable with Python than JavaScript\n\n**When to use JavaScript** (recommended):\n- HTTP requests ($helpers.httpRequest available)\n- Date/time operations (Luxon library included)\n- Most data transformations\n- When in doubt\n\n---\n\n## What This Skill Teaches\n\n### Core Concepts\n\n1. **Critical Limitation**: No external libraries\n2. **Data Access**: `_input.all()`, `_input.first()`, `_input.item`\n3. **Webhook Gotcha**: Data is under `_json[\"body\"]`\n4. **Return Format**: Must return `[{\"json\": {...}}]`\n5. **Standard Library**: json, datetime, re, base64, hashlib, etc.\n\n### Top 5 Error Prevention\n\nThis skill emphasizes **error prevention**:\n\n1. **ModuleNotFoundError** (trying to import external libraries)\n2. **Empty code / missing return**\n3. **KeyError** (dictionary access without .get())\n4. **IndexError** (list access without bounds checking)\n5. **Incorrect return format**\n\nThese 5 errors are the most common in Python Code nodes.\n\n---\n\n## Skill Activation\n\nThis skill activates when you:\n- Write Python in Code nodes\n- Ask about Python limitations\n- Need to know available standard library\n- Troubleshoot Python Code node errors\n- Work with Python data structures\n\n**Example queries**:\n- \"Can I use pandas in Python Code node?\"\n- \"How do I access webhook data in Python?\"\n- \"What Python libraries are available?\"\n- \"Write Python code to process JSON\"\n- \"Why is requests module not found?\"\n\n---\n\n## File Structure\n\n### SKILL.md (719 lines)\n**Quick start** and overview\n- When to use Python vs JavaScript\n- Critical limitation (no external libraries)\n- Mode selection (All Items vs Each Item)\n- Data access overview\n- Return format requirements\n- Standard library overview\n\n### DATA_ACCESS.md (703 lines)\n**Complete data access patterns**\n- `_input.all()` - Process all items\n- `_input.first()` - Get first item\n- `_input.item` - Current item (Each Item mode)\n- `_node[\"Name\"]` - Reference other nodes\n- Webhook body structure (critical gotcha!)\n- Pattern selection guide\n\n### STANDARD_LIBRARY.md (850 lines)\n**Available Python modules**\n- json - JSON parsing\n- datetime - Date/time operations\n- re - Regular expressions\n- base64 - Encoding/decoding\n- hashlib - Hashing\n- urllib.parse - URL operations\n- math, random, statistics\n- What's NOT available (requests, pandas, numpy)\n- Workarounds for missing libraries\n\n### COMMON_PATTERNS.md (895 lines)\n**10 production-tested patterns**\n1. Multi-source data aggregation\n2. Regex-based filtering\n3. Markdown to structured data\n4. JSON object comparison\n5. CRM data transformation\n6. Release notes processing\n7. Array transformation\n8. Dictionary lookup\n9. Top N filtering\n10. String aggregation\n\n### ERROR_PATTERNS.md (730 lines)\n**Top 5 errors with solutions**\n1. ModuleNotFoundError (external libraries)\n2. Empty code / missing return\n3. KeyError (dictionary access)\n4. IndexError (list access)\n5. Incorrect return format\n- Error prevention checklist\n- Quick fix reference\n- Testing patterns\n\n---\n\n## Integration with Other Skills\n\nThis skill works with:\n\n### n8n Expression Syntax\n- Python uses code syntax, not {{}} expressions\n- Data access patterns differ ($ vs _)\n\n### n8n MCP Tools Expert\n- Use MCP tools to validate Code node configurations\n- Check node setup with `get_node_essentials`\n\n### n8n Workflow Patterns\n- Code nodes fit into larger workflow patterns\n- Often used after HTTP Request or Webhook nodes\n\n### n8n Code JavaScript\n- Compare Python vs JavaScript approaches\n- Understand when to use which language\n- JavaScript recommended for 95% of cases\n\n### n8n Node Configuration\n- Configure Code node mode (All Items vs Each Item)\n- Set up proper connections\n\n---\n\n## Success Metrics\n\nAfter using this skill, you should be able to:\n\n- [ ] **Know the limitation**: Python has NO external libraries\n- [ ] **Choose language**: JavaScript for 95% of cases, Python when needed\n- [ ] **Access data**: Use `_input.all()`, `_input.first()`, `_input.item`\n- [ ] **Handle webhooks**: Access data via `_json[\"body\"]`\n- [ ] **Return properly**: Always return `[{\"json\": {...}}]`\n- [ ] **Avoid KeyError**: Use `.get()` for dictionary access\n- [ ] **Use standard library**: Know what's available (json, datetime, re, etc.)\n- [ ] **Prevent errors**: Avoid top 5 common errors\n- [ ] **Choose alternatives**: Use n8n nodes when libraries needed\n- [ ] **Write production code**: Use proven patterns\n\n---\n\n## Quick Reference\n\n### Data Access\n```python\nall_items = _input.all()\nfirst_item = _input.first()\ncurrent_item = _input.item  # Each Item mode only\nother_node = _node[\"NodeName\"]\n```\n\n### Webhook Data\n```python\nwebhook = _input.first()[\"json\"]\nbody = webhook.get(\"body\", {})\nname = body.get(\"name\")\n```\n\n### Safe Dictionary Access\n```python\n# âœ… Use .get() with defaults\nvalue = data.get(\"field\", \"default\")\n\n# âŒ Risky - may raise KeyError\nvalue = data[\"field\"]\n```\n\n### Return Format\n```python\n# âœ… Correct format\nreturn [{\"json\": {\"result\": \"success\"}}]\n\n# âŒ Wrong - plain dict\nreturn {\"result\": \"success\"}\n```\n\n### Standard Library\n```python\n# âœ… Available\nimport json\nimport datetime\nimport re\nimport base64\nimport hashlib\n\n# âŒ NOT available\nimport requests  # ModuleNotFoundError!\nimport pandas    # ModuleNotFoundError!\nimport numpy     # ModuleNotFoundError!\n```\n\n---\n\n## Common Use Cases\n\n### Use Case 1: Process Webhook Data\n```python\nwebhook = _input.first()[\"json\"]\nbody = webhook.get(\"body\", {})\n\nreturn [{\n    \"json\": {\n        \"name\": body.get(\"name\"),\n        \"email\": body.get(\"email\"),\n        \"processed\": True\n    }\n}]\n```\n\n### Use Case 2: Filter and Transform\n```python\nall_items = _input.all()\n\nactive = [\n    {\"json\": {**item[\"json\"], \"filtered\": True}}\n    for item in all_items\n    if item[\"json\"].get(\"status\") == \"active\"\n]\n\nreturn active\n```\n\n### Use Case 3: Aggregate Statistics\n```python\nimport statistics\n\nall_items = _input.all()\namounts = [item[\"json\"].get(\"amount\", 0) for item in all_items]\n\nreturn [{\n    \"json\": {\n        \"total\": sum(amounts),\n        \"average\": statistics.mean(amounts) if amounts else 0,\n        \"count\": len(amounts)\n    }\n}]\n```\n\n### Use Case 4: Parse JSON String\n```python\nimport json\n\ndata = _input.first()[\"json\"][\"body\"]\njson_string = data.get(\"payload\", \"{}\")\n\ntry:\n    parsed = json.loads(json_string)\n    return [{\"json\": parsed}]\nexcept json.JSONDecodeError:\n    return [{\"json\": {\"error\": \"Invalid JSON\"}}]\n```\n\n---\n\n## Limitations and Workarounds\n\n### Limitation 1: No HTTP Requests Library\n**Problem**: No `requests` library\n**Workaround**: Use HTTP Request node or JavaScript\n\n### Limitation 2: No Data Analysis Library\n**Problem**: No `pandas` or `numpy`\n**Workaround**: Use list comprehensions and standard library\n\n### Limitation 3: No Database Drivers\n**Problem**: No `psycopg2`, `pymongo`, etc.\n**Workaround**: Use n8n database nodes (Postgres, MySQL, MongoDB)\n\n### Limitation 4: No Web Scraping\n**Problem**: No `beautifulsoup4` or `selenium`\n**Workaround**: Use HTML Extract node\n\n---\n\n## Best Practices\n\n1. **Use JavaScript for most cases** (95% recommendation)\n2. **Use .get() for dictionaries** (avoid KeyError)\n3. **Check lengths before indexing** (avoid IndexError)\n4. **Always return proper format**: `[{\"json\": {...}}]`\n5. **Access webhook data via [\"body\"]**\n6. **Use standard library only** (no external imports)\n7. **Handle empty input** (check `if items:`)\n8. **Test both modes** (All Items and Each Item)\n\n---\n\n## When Python is the Right Choice\n\nUse Python when:\n- Complex text processing (re module)\n- Mathematical calculations (math, statistics)\n- Date/time manipulation (datetime)\n- Cryptographic operations (hashlib)\n- You have existing Python logic to reuse\n- Team is more comfortable with Python\n\nUse JavaScript instead when:\n- Making HTTP requests\n- Working with dates (Luxon included)\n- Most data transformations\n- When in doubt\n\n---\n\n## Learning Path\n\n**Beginner**:\n1. Read SKILL.md - Understand the limitation\n2. Try DATA_ACCESS.md examples - Learn `_input` patterns\n3. Practice safe dictionary access with `.get()`\n\n**Intermediate**:\n4. Study STANDARD_LIBRARY.md - Know what's available\n5. Try COMMON_PATTERNS.md examples - Use proven patterns\n6. Learn ERROR_PATTERNS.md - Avoid common mistakes\n\n**Advanced**:\n7. Combine multiple patterns\n8. Use standard library effectively\n9. Know when to switch to JavaScript\n10. Write production-ready code\n\n---\n\n## Support\n\n**Questions?**\n- Check ERROR_PATTERNS.md for common issues\n- Review COMMON_PATTERNS.md for examples\n- Consider using JavaScript instead\n\n**Related Skills**:\n- n8n Code JavaScript - Alternative (recommended for 95% of cases)\n- n8n Expression Syntax - For {{}} expressions in other nodes\n- n8n Workflow Patterns - Bigger picture workflow design\n\n---\n\n## Version\n\n**Version**: 1.0.0\n**Status**: Production Ready\n**Compatibility**: n8n Code node (Python mode)\n\n---\n\n## Credits\n\nPart of the n8n-skills project.\n\n**Conceived by Romuald CzÅ‚onkowski**\n- Website: [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n- Part of [n8n-mcp project](https://github.com/czlonkowski/n8n-mcp)\n\n---\n\n**Remember**: JavaScript is recommended for 95% of use cases. Use Python only when you specifically need Python's standard library features.\n",
        "skills/n8n-code-python/SKILL.md": "---\nname: n8n-code-python\ndescription: Write Python code in n8n Code nodes. Use when writing Python in n8n, using _input/_json/_node syntax, working with standard library, or need to understand Python limitations in n8n Code nodes.\n---\n\n# Python Code Node (Beta)\n\nExpert guidance for writing Python code in n8n Code nodes.\n\n---\n\n## âš ï¸ Important: JavaScript First\n\n**Recommendation**: Use **JavaScript for 95% of use cases**. Only use Python when:\n- You need specific Python standard library functions\n- You're significantly more comfortable with Python syntax\n- You're doing data transformations better suited to Python\n\n**Why JavaScript is preferred:**\n- Full n8n helper functions ($helpers.httpRequest, etc.)\n- Luxon DateTime library for advanced date/time operations\n- No external library limitations\n- Better n8n documentation and community support\n\n---\n\n## Quick Start\n\n```python\n# Basic template for Python Code nodes\nitems = _input.all()\n\n# Process data\nprocessed = []\nfor item in items:\n    processed.append({\n        \"json\": {\n            **item[\"json\"],\n            \"processed\": True,\n            \"timestamp\": datetime.now().isoformat()\n        }\n    })\n\nreturn processed\n```\n\n### Essential Rules\n\n1. **Consider JavaScript first** - Use Python only when necessary\n2. **Access data**: `_input.all()`, `_input.first()`, or `_input.item`\n3. **CRITICAL**: Must return `[{\"json\": {...}}]` format\n4. **CRITICAL**: Webhook data is under `_json[\"body\"]` (not `_json` directly)\n5. **CRITICAL LIMITATION**: **No external libraries** (no requests, pandas, numpy)\n6. **Standard library only**: json, datetime, re, base64, hashlib, urllib.parse, math, random, statistics\n\n---\n\n## Mode Selection Guide\n\nSame as JavaScript - choose based on your use case:\n\n### Run Once for All Items (Recommended - Default)\n\n**Use this mode for:** 95% of use cases\n\n- **How it works**: Code executes **once** regardless of input count\n- **Data access**: `_input.all()` or `_items` array (Native mode)\n- **Best for**: Aggregation, filtering, batch processing, transformations\n- **Performance**: Faster for multiple items (single execution)\n\n```python\n# Example: Calculate total from all items\nall_items = _input.all()\ntotal = sum(item[\"json\"].get(\"amount\", 0) for item in all_items)\n\nreturn [{\n    \"json\": {\n        \"total\": total,\n        \"count\": len(all_items),\n        \"average\": total / len(all_items) if all_items else 0\n    }\n}]\n```\n\n### Run Once for Each Item\n\n**Use this mode for:** Specialized cases only\n\n- **How it works**: Code executes **separately** for each input item\n- **Data access**: `_input.item` or `_item` (Native mode)\n- **Best for**: Item-specific logic, independent operations, per-item validation\n- **Performance**: Slower for large datasets (multiple executions)\n\n```python\n# Example: Add processing timestamp to each item\nitem = _input.item\n\nreturn [{\n    \"json\": {\n        **item[\"json\"],\n        \"processed\": True,\n        \"processed_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n---\n\n## Python Modes: Beta vs Native\n\nn8n offers two Python execution modes:\n\n### Python (Beta) - Recommended\n- **Use**: `_input`, `_json`, `_node` helper syntax\n- **Best for**: Most Python use cases\n- **Helpers available**: `_now`, `_today`, `_jmespath()`\n- **Import**: `from datetime import datetime`\n\n```python\n# Python (Beta) example\nitems = _input.all()\nnow = _now  # Built-in datetime object\n\nreturn [{\n    \"json\": {\n        \"count\": len(items),\n        \"timestamp\": now.isoformat()\n    }\n}]\n```\n\n### Python (Native) (Beta)\n- **Use**: `_items`, `_item` variables only\n- **No helpers**: No `_input`, `_now`, etc.\n- **More limited**: Standard Python only\n- **Use when**: Need pure Python without n8n helpers\n\n```python\n# Python (Native) example\nprocessed = []\n\nfor item in _items:\n    processed.append({\n        \"json\": {\n            \"id\": item[\"json\"].get(\"id\"),\n            \"processed\": True\n        }\n    })\n\nreturn processed\n```\n\n**Recommendation**: Use **Python (Beta)** for better n8n integration.\n\n---\n\n## Data Access Patterns\n\n### Pattern 1: _input.all() - Most Common\n\n**Use when**: Processing arrays, batch operations, aggregations\n\n```python\n# Get all items from previous node\nall_items = _input.all()\n\n# Filter, transform as needed\nvalid = [item for item in all_items if item[\"json\"].get(\"status\") == \"active\"]\n\nprocessed = []\nfor item in valid:\n    processed.append({\n        \"json\": {\n            \"id\": item[\"json\"][\"id\"],\n            \"name\": item[\"json\"][\"name\"]\n        }\n    })\n\nreturn processed\n```\n\n### Pattern 2: _input.first() - Very Common\n\n**Use when**: Working with single objects, API responses\n\n```python\n# Get first item only\nfirst_item = _input.first()\ndata = first_item[\"json\"]\n\nreturn [{\n    \"json\": {\n        \"result\": process_data(data),\n        \"processed_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n### Pattern 3: _input.item - Each Item Mode Only\n\n**Use when**: In \"Run Once for Each Item\" mode\n\n```python\n# Current item in loop (Each Item mode only)\ncurrent_item = _input.item\n\nreturn [{\n    \"json\": {\n        **current_item[\"json\"],\n        \"item_processed\": True\n    }\n}]\n```\n\n### Pattern 4: _node - Reference Other Nodes\n\n**Use when**: Need data from specific nodes in workflow\n\n```python\n# Get output from specific node\nwebhook_data = _node[\"Webhook\"][\"json\"]\nhttp_data = _node[\"HTTP Request\"][\"json\"]\n\nreturn [{\n    \"json\": {\n        \"combined\": {\n            \"webhook\": webhook_data,\n            \"api\": http_data\n        }\n    }\n}]\n```\n\n**See**: [DATA_ACCESS.md](DATA_ACCESS.md) for comprehensive guide\n\n---\n\n## Critical: Webhook Data Structure\n\n**MOST COMMON MISTAKE**: Webhook data is nested under `[\"body\"]`\n\n```python\n# âŒ WRONG - Will raise KeyError\nname = _json[\"name\"]\nemail = _json[\"email\"]\n\n# âœ… CORRECT - Webhook data is under [\"body\"]\nname = _json[\"body\"][\"name\"]\nemail = _json[\"body\"][\"email\"]\n\n# âœ… SAFER - Use .get() for safe access\nwebhook_data = _json.get(\"body\", {})\nname = webhook_data.get(\"name\")\n```\n\n**Why**: Webhook node wraps all request data under `body` property. This includes POST data, query parameters, and JSON payloads.\n\n**See**: [DATA_ACCESS.md](DATA_ACCESS.md) for full webhook structure details\n\n---\n\n## Return Format Requirements\n\n**CRITICAL RULE**: Always return list of dictionaries with `\"json\"` key\n\n### Correct Return Formats\n\n```python\n# âœ… Single result\nreturn [{\n    \"json\": {\n        \"field1\": value1,\n        \"field2\": value2\n    }\n}]\n\n# âœ… Multiple results\nreturn [\n    {\"json\": {\"id\": 1, \"data\": \"first\"}},\n    {\"json\": {\"id\": 2, \"data\": \"second\"}}\n]\n\n# âœ… List comprehension\ntransformed = [\n    {\"json\": {\"id\": item[\"json\"][\"id\"], \"processed\": True}}\n    for item in _input.all()\n    if item[\"json\"].get(\"valid\")\n]\nreturn transformed\n\n# âœ… Empty result (when no data to return)\nreturn []\n\n# âœ… Conditional return\nif should_process:\n    return [{\"json\": processed_data}]\nelse:\n    return []\n```\n\n### Incorrect Return Formats\n\n```python\n# âŒ WRONG: Dictionary without list wrapper\nreturn {\n    \"json\": {\"field\": value}\n}\n\n# âŒ WRONG: List without json wrapper\nreturn [{\"field\": value}]\n\n# âŒ WRONG: Plain string\nreturn \"processed\"\n\n# âŒ WRONG: Incomplete structure\nreturn [{\"data\": value}]  # Should be {\"json\": value}\n```\n\n**Why it matters**: Next nodes expect list format. Incorrect format causes workflow execution to fail.\n\n**See**: [ERROR_PATTERNS.md](ERROR_PATTERNS.md) #2 for detailed error solutions\n\n---\n\n## Critical Limitation: No External Libraries\n\n**MOST IMPORTANT PYTHON LIMITATION**: Cannot import external packages\n\n### What's NOT Available\n\n```python\n# âŒ NOT AVAILABLE - Will raise ModuleNotFoundError\nimport requests  # âŒ No\nimport pandas  # âŒ No\nimport numpy  # âŒ No\nimport scipy  # âŒ No\nfrom bs4 import BeautifulSoup  # âŒ No\nimport lxml  # âŒ No\n```\n\n### What IS Available (Standard Library)\n\n```python\n# âœ… AVAILABLE - Standard library only\nimport json  # âœ… JSON parsing\nimport datetime  # âœ… Date/time operations\nimport re  # âœ… Regular expressions\nimport base64  # âœ… Base64 encoding/decoding\nimport hashlib  # âœ… Hashing functions\nimport urllib.parse  # âœ… URL parsing\nimport math  # âœ… Math functions\nimport random  # âœ… Random numbers\nimport statistics  # âœ… Statistical functions\n```\n\n### Workarounds\n\n**Need HTTP requests?**\n- âœ… Use **HTTP Request node** before Code node\n- âœ… Or switch to **JavaScript** and use `$helpers.httpRequest()`\n\n**Need data analysis (pandas/numpy)?**\n- âœ… Use Python **statistics** module for basic stats\n- âœ… Or switch to **JavaScript** for most operations\n- âœ… Manual calculations with lists and dictionaries\n\n**Need web scraping (BeautifulSoup)?**\n- âœ… Use **HTTP Request node** + **HTML Extract node**\n- âœ… Or switch to **JavaScript** with regex/string methods\n\n**See**: [STANDARD_LIBRARY.md](STANDARD_LIBRARY.md) for complete reference\n\n---\n\n## Common Patterns Overview\n\nBased on production workflows, here are the most useful Python patterns:\n\n### 1. Data Transformation\nTransform all items with list comprehensions\n\n```python\nitems = _input.all()\n\nreturn [\n    {\n        \"json\": {\n            \"id\": item[\"json\"].get(\"id\"),\n            \"name\": item[\"json\"].get(\"name\", \"Unknown\").upper(),\n            \"processed\": True\n        }\n    }\n    for item in items\n]\n```\n\n### 2. Filtering & Aggregation\nSum, filter, count with built-in functions\n\n```python\nitems = _input.all()\ntotal = sum(item[\"json\"].get(\"amount\", 0) for item in items)\nvalid_items = [item for item in items if item[\"json\"].get(\"amount\", 0) > 0]\n\nreturn [{\n    \"json\": {\n        \"total\": total,\n        \"count\": len(valid_items)\n    }\n}]\n```\n\n### 3. String Processing with Regex\nExtract patterns from text\n\n```python\nimport re\n\nitems = _input.all()\nemail_pattern = r'\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b'\n\nall_emails = []\nfor item in items:\n    text = item[\"json\"].get(\"text\", \"\")\n    emails = re.findall(email_pattern, text)\n    all_emails.extend(emails)\n\n# Remove duplicates\nunique_emails = list(set(all_emails))\n\nreturn [{\n    \"json\": {\n        \"emails\": unique_emails,\n        \"count\": len(unique_emails)\n    }\n}]\n```\n\n### 4. Data Validation\nValidate and clean data\n\n```python\nitems = _input.all()\nvalidated = []\n\nfor item in items:\n    data = item[\"json\"]\n    errors = []\n\n    # Validate fields\n    if not data.get(\"email\"):\n        errors.append(\"Email required\")\n    if not data.get(\"name\"):\n        errors.append(\"Name required\")\n\n    validated.append({\n        \"json\": {\n            **data,\n            \"valid\": len(errors) == 0,\n            \"errors\": errors if errors else None\n        }\n    })\n\nreturn validated\n```\n\n### 5. Statistical Analysis\nCalculate statistics with statistics module\n\n```python\nfrom statistics import mean, median, stdev\n\nitems = _input.all()\nvalues = [item[\"json\"].get(\"value\", 0) for item in items if \"value\" in item[\"json\"]]\n\nif values:\n    return [{\n        \"json\": {\n            \"mean\": mean(values),\n            \"median\": median(values),\n            \"stdev\": stdev(values) if len(values) > 1 else 0,\n            \"min\": min(values),\n            \"max\": max(values),\n            \"count\": len(values)\n        }\n    }]\nelse:\n    return [{\"json\": {\"error\": \"No values found\"}}]\n```\n\n**See**: [COMMON_PATTERNS.md](COMMON_PATTERNS.md) for 10 detailed Python patterns\n\n---\n\n## Error Prevention - Top 5 Mistakes\n\n### #1: Importing External Libraries (Python-Specific!)\n\n```python\n# âŒ WRONG: Trying to import external library\nimport requests  # ModuleNotFoundError!\n\n# âœ… CORRECT: Use HTTP Request node or JavaScript\n# Add HTTP Request node before Code node\n# OR switch to JavaScript and use $helpers.httpRequest()\n```\n\n### #2: Empty Code or Missing Return\n\n```python\n# âŒ WRONG: No return statement\nitems = _input.all()\n# Processing...\n# Forgot to return!\n\n# âœ… CORRECT: Always return data\nitems = _input.all()\n# Processing...\nreturn [{\"json\": item[\"json\"]} for item in items]\n```\n\n### #3: Incorrect Return Format\n\n```python\n# âŒ WRONG: Returning dict instead of list\nreturn {\"json\": {\"result\": \"success\"}}\n\n# âœ… CORRECT: List wrapper required\nreturn [{\"json\": {\"result\": \"success\"}}]\n```\n\n### #4: KeyError on Dictionary Access\n\n```python\n# âŒ WRONG: Direct access crashes if missing\nname = _json[\"user\"][\"name\"]  # KeyError!\n\n# âœ… CORRECT: Use .get() for safe access\nname = _json.get(\"user\", {}).get(\"name\", \"Unknown\")\n```\n\n### #5: Webhook Body Nesting\n\n```python\n# âŒ WRONG: Direct access to webhook data\nemail = _json[\"email\"]  # KeyError!\n\n# âœ… CORRECT: Webhook data under [\"body\"]\nemail = _json[\"body\"][\"email\"]\n\n# âœ… BETTER: Safe access with .get()\nemail = _json.get(\"body\", {}).get(\"email\", \"no-email\")\n```\n\n**See**: [ERROR_PATTERNS.md](ERROR_PATTERNS.md) for comprehensive error guide\n\n---\n\n## Standard Library Reference\n\n### Most Useful Modules\n\n```python\n# JSON operations\nimport json\ndata = json.loads(json_string)\njson_output = json.dumps({\"key\": \"value\"})\n\n# Date/time\nfrom datetime import datetime, timedelta\nnow = datetime.now()\ntomorrow = now + timedelta(days=1)\nformatted = now.strftime(\"%Y-%m-%d\")\n\n# Regular expressions\nimport re\nmatches = re.findall(r'\\d+', text)\ncleaned = re.sub(r'[^\\w\\s]', '', text)\n\n# Base64 encoding\nimport base64\nencoded = base64.b64encode(data).decode()\ndecoded = base64.b64decode(encoded)\n\n# Hashing\nimport hashlib\nhash_value = hashlib.sha256(text.encode()).hexdigest()\n\n# URL parsing\nimport urllib.parse\nparams = urllib.parse.urlencode({\"key\": \"value\"})\nparsed = urllib.parse.urlparse(url)\n\n# Statistics\nfrom statistics import mean, median, stdev\naverage = mean([1, 2, 3, 4, 5])\n```\n\n**See**: [STANDARD_LIBRARY.md](STANDARD_LIBRARY.md) for complete reference\n\n---\n\n## Best Practices\n\n### 1. Always Use .get() for Dictionary Access\n\n```python\n# âœ… SAFE: Won't crash if field missing\nvalue = item[\"json\"].get(\"field\", \"default\")\n\n# âŒ RISKY: Crashes if field doesn't exist\nvalue = item[\"json\"][\"field\"]\n```\n\n### 2. Handle None/Null Values Explicitly\n\n```python\n# âœ… GOOD: Default to 0 if None\namount = item[\"json\"].get(\"amount\") or 0\n\n# âœ… GOOD: Check for None explicitly\ntext = item[\"json\"].get(\"text\")\nif text is None:\n    text = \"\"\n```\n\n### 3. Use List Comprehensions for Filtering\n\n```python\n# âœ… PYTHONIC: List comprehension\nvalid = [item for item in items if item[\"json\"].get(\"active\")]\n\n# âŒ VERBOSE: Manual loop\nvalid = []\nfor item in items:\n    if item[\"json\"].get(\"active\"):\n        valid.append(item)\n```\n\n### 4. Return Consistent Structure\n\n```python\n# âœ… CONSISTENT: Always list with \"json\" key\nreturn [{\"json\": result}]  # Single result\nreturn results  # Multiple results (already formatted)\nreturn []  # No results\n```\n\n### 5. Debug with print() Statements\n\n```python\n# Debug statements appear in browser console (F12)\nitems = _input.all()\nprint(f\"Processing {len(items)} items\")\nprint(f\"First item: {items[0] if items else 'None'}\")\n```\n\n---\n\n## When to Use Python vs JavaScript\n\n### Use Python When:\n- âœ… You need `statistics` module for statistical operations\n- âœ… You're significantly more comfortable with Python syntax\n- âœ… Your logic maps well to list comprehensions\n- âœ… You need specific standard library functions\n\n### Use JavaScript When:\n- âœ… You need HTTP requests ($helpers.httpRequest())\n- âœ… You need advanced date/time (DateTime/Luxon)\n- âœ… You want better n8n integration\n- âœ… **For 95% of use cases** (recommended)\n\n### Consider Other Nodes When:\n- âŒ Simple field mapping â†’ Use **Set** node\n- âŒ Basic filtering â†’ Use **Filter** node\n- âŒ Simple conditionals â†’ Use **IF** or **Switch** node\n- âŒ HTTP requests only â†’ Use **HTTP Request** node\n\n---\n\n## Integration with Other Skills\n\n### Works With:\n\n**n8n Expression Syntax**:\n- Expressions use `{{ }}` syntax in other nodes\n- Code nodes use Python directly (no `{{ }}`)\n- When to use expressions vs code\n\n**n8n MCP Tools Expert**:\n- How to find Code node: `search_nodes({query: \"code\"})`\n- Get configuration help: `get_node_essentials(\"nodes-base.code\")`\n- Validate code: `validate_node_operation()`\n\n**n8n Node Configuration**:\n- Mode selection (All Items vs Each Item)\n- Language selection (Python vs JavaScript)\n- Understanding property dependencies\n\n**n8n Workflow Patterns**:\n- Code nodes in transformation step\n- When to use Python vs JavaScript in patterns\n\n**n8n Validation Expert**:\n- Validate Code node configuration\n- Handle validation errors\n- Auto-fix common issues\n\n**n8n Code JavaScript**:\n- When to use JavaScript instead\n- Comparison of JavaScript vs Python features\n- Migration from Python to JavaScript\n\n---\n\n## Quick Reference Checklist\n\nBefore deploying Python Code nodes, verify:\n\n- [ ] **Considered JavaScript first** - Using Python only when necessary\n- [ ] **Code is not empty** - Must have meaningful logic\n- [ ] **Return statement exists** - Must return list of dictionaries\n- [ ] **Proper return format** - Each item: `{\"json\": {...}}`\n- [ ] **Data access correct** - Using `_input.all()`, `_input.first()`, or `_input.item`\n- [ ] **No external imports** - Only standard library (json, datetime, re, etc.)\n- [ ] **Safe dictionary access** - Using `.get()` to avoid KeyError\n- [ ] **Webhook data** - Access via `[\"body\"]` if from webhook\n- [ ] **Mode selection** - \"All Items\" for most cases\n- [ ] **Output consistent** - All code paths return same structure\n\n---\n\n## Additional Resources\n\n### Related Files\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Comprehensive Python data access patterns\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - 10 Python patterns for n8n\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Top 5 errors and solutions\n- [STANDARD_LIBRARY.md](STANDARD_LIBRARY.md) - Complete standard library reference\n\n### n8n Documentation\n- Code Node Guide: https://docs.n8n.io/code/code-node/\n- Python in n8n: https://docs.n8n.io/code/builtin/python-modules/\n\n---\n\n**Ready to write Python in n8n Code nodes - but consider JavaScript first!** Use Python for specific needs, reference the error patterns guide to avoid common mistakes, and leverage the standard library effectively.\n",
        "skills/n8n-code-python/STANDARD_LIBRARY.md": "# Standard Library Reference - Python Code Node\n\nComplete guide to available Python standard library modules in n8n Code nodes.\n\n---\n\n## âš ï¸ Critical Limitation\n\n**NO EXTERNAL LIBRARIES AVAILABLE**\n\nPython Code nodes in n8n have **ONLY** the Python standard library. No pip packages.\n\n```python\n# âŒ NOT AVAILABLE - Will cause ModuleNotFoundError\nimport requests      # No HTTP library!\nimport pandas        # No data analysis!\nimport numpy         # No numerical computing!\nimport bs4          # No web scraping!\nimport selenium     # No browser automation!\nimport psycopg2     # No database drivers!\nimport pymongo      # No MongoDB!\nimport sqlalchemy   # No ORMs!\n\n# âœ… AVAILABLE - Standard library only\nimport json\nimport datetime\nimport re\nimport base64\nimport hashlib\nimport urllib.parse\nimport urllib.request\nimport math\nimport random\nimport statistics\n```\n\n**Recommendation**: Use **JavaScript** for 95% of use cases. JavaScript has more capabilities in n8n.\n\n---\n\n## Available Modules\n\n### Priority 1: Most Useful (Use These)\n\n1. **json** - JSON parsing and generation\n2. **datetime** - Date and time operations\n3. **re** - Regular expressions\n4. **base64** - Base64 encoding/decoding\n5. **hashlib** - Hashing (MD5, SHA256, etc.)\n6. **urllib.parse** - URL parsing and encoding\n\n### Priority 2: Moderately Useful\n\n7. **math** - Mathematical functions\n8. **random** - Random number generation\n9. **statistics** - Statistical functions\n10. **collections** - Specialized data structures\n\n### Priority 3: Occasionally Useful\n\n11. **itertools** - Iterator tools\n12. **functools** - Higher-order functions\n13. **operator** - Standard operators as functions\n14. **string** - String constants and templates\n15. **textwrap** - Text wrapping utilities\n\n---\n\n## Module 1: json - JSON Operations\n\n**Most common module** - Parse and generate JSON data.\n\n### Parse JSON String\n\n```python\nimport json\n\n# Parse JSON string to Python dict\njson_string = '{\"name\": \"Alice\", \"age\": 30}'\ndata = json.loads(json_string)\n\nreturn [{\n    \"json\": {\n        \"name\": data[\"name\"],\n        \"age\": data[\"age\"],\n        \"parsed\": True\n    }\n}]\n```\n\n### Generate JSON String\n\n```python\nimport json\n\n# Convert Python dict to JSON string\ndata = {\n    \"users\": [\n        {\"id\": 1, \"name\": \"Alice\"},\n        {\"id\": 2, \"name\": \"Bob\"}\n    ],\n    \"total\": 2\n}\n\njson_string = json.dumps(data, indent=2)\n\nreturn [{\n    \"json\": {\n        \"json_output\": json_string,\n        \"length\": len(json_string)\n    }\n}]\n```\n\n### Handle JSON Errors\n\n```python\nimport json\n\nwebhook_data = _input.first()[\"json\"][\"body\"]\njson_string = webhook_data.get(\"data\", \"\")\n\ntry:\n    parsed = json.loads(json_string)\n    status = \"valid\"\n    error = None\nexcept json.JSONDecodeError as e:\n    parsed = None\n    status = \"invalid\"\n    error = str(e)\n\nreturn [{\n    \"json\": {\n        \"status\": status,\n        \"data\": parsed,\n        \"error\": error\n    }\n}]\n```\n\n### Pretty Print JSON\n\n```python\nimport json\n\n# Format JSON with indentation\ndata = _input.first()[\"json\"]\n\npretty_json = json.dumps(data, indent=2, sort_keys=True)\n\nreturn [{\n    \"json\": {\n        \"formatted\": pretty_json\n    }\n}]\n```\n\n---\n\n## Module 2: datetime - Date and Time\n\n**Very common** - Date parsing, formatting, calculations.\n\n### Current Date and Time\n\n```python\nfrom datetime import datetime\n\nnow = datetime.now()\n\nreturn [{\n    \"json\": {\n        \"timestamp\": now.isoformat(),\n        \"date\": now.strftime(\"%Y-%m-%d\"),\n        \"time\": now.strftime(\"%H:%M:%S\"),\n        \"formatted\": now.strftime(\"%B %d, %Y at %I:%M %p\")\n    }\n}]\n```\n\n### Parse Date String\n\n```python\nfrom datetime import datetime\n\ndate_string = \"2025-01-15T14:30:00\"\ndt = datetime.fromisoformat(date_string)\n\nreturn [{\n    \"json\": {\n        \"year\": dt.year,\n        \"month\": dt.month,\n        \"day\": dt.day,\n        \"hour\": dt.hour,\n        \"weekday\": dt.strftime(\"%A\")\n    }\n}]\n```\n\n### Date Calculations\n\n```python\nfrom datetime import datetime, timedelta\n\nnow = datetime.now()\n\n# Calculate future/past dates\ntomorrow = now + timedelta(days=1)\nyesterday = now - timedelta(days=1)\nnext_week = now + timedelta(weeks=1)\none_hour_ago = now - timedelta(hours=1)\n\nreturn [{\n    \"json\": {\n        \"now\": now.isoformat(),\n        \"tomorrow\": tomorrow.isoformat(),\n        \"yesterday\": yesterday.isoformat(),\n        \"next_week\": next_week.isoformat(),\n        \"one_hour_ago\": one_hour_ago.isoformat()\n    }\n}]\n```\n\n### Compare Dates\n\n```python\nfrom datetime import datetime\n\ndate1 = datetime(2025, 1, 15)\ndate2 = datetime(2025, 1, 20)\n\n# Calculate difference\ndiff = date2 - date1\n\nreturn [{\n    \"json\": {\n        \"days_difference\": diff.days,\n        \"seconds_difference\": diff.total_seconds(),\n        \"date1_is_earlier\": date1 < date2,\n        \"date2_is_later\": date2 > date1\n    }\n}]\n```\n\n### Format Dates\n\n```python\nfrom datetime import datetime\n\ndt = datetime.now()\n\nreturn [{\n    \"json\": {\n        \"iso\": dt.isoformat(),\n        \"us_format\": dt.strftime(\"%m/%d/%Y\"),\n        \"eu_format\": dt.strftime(\"%d/%m/%Y\"),\n        \"long_format\": dt.strftime(\"%A, %B %d, %Y\"),\n        \"time_12h\": dt.strftime(\"%I:%M %p\"),\n        \"time_24h\": dt.strftime(\"%H:%M:%S\")\n    }\n}]\n```\n\n---\n\n## Module 3: re - Regular Expressions\n\n**Common** - Pattern matching, text extraction, validation.\n\n### Pattern Matching\n\n```python\nimport re\n\ntext = \"Email: alice@example.com, Phone: 555-1234\"\n\n# Find email\nemail_match = re.search(r'\\b[\\w.-]+@[\\w.-]+\\.\\w+\\b', text)\nemail = email_match.group(0) if email_match else None\n\n# Find phone\nphone_match = re.search(r'\\d{3}-\\d{4}', text)\nphone = phone_match.group(0) if phone_match else None\n\nreturn [{\n    \"json\": {\n        \"email\": email,\n        \"phone\": phone\n    }\n}]\n```\n\n### Extract All Matches\n\n```python\nimport re\n\ntext = \"Tags: #python #automation #workflow #n8n\"\n\n# Find all hashtags\nhashtags = re.findall(r'#(\\w+)', text)\n\nreturn [{\n    \"json\": {\n        \"tags\": hashtags,\n        \"count\": len(hashtags)\n    }\n}]\n```\n\n### Replace Patterns\n\n```python\nimport re\n\ntext = \"Price: $99.99, Discount: $10.00\"\n\n# Remove dollar signs\ncleaned = re.sub(r'\\$', '', text)\n\n# Replace multiple spaces with single space\nnormalized = re.sub(r'\\s+', ' ', cleaned)\n\nreturn [{\n    \"json\": {\n        \"original\": text,\n        \"cleaned\": cleaned,\n        \"normalized\": normalized\n    }\n}]\n```\n\n### Validate Format\n\n```python\nimport re\n\nemail = _input.first()[\"json\"][\"body\"].get(\"email\", \"\")\n\n# Email validation pattern\nemail_pattern = r'^[\\w.-]+@[\\w.-]+\\.\\w+$'\nis_valid = bool(re.match(email_pattern, email))\n\nreturn [{\n    \"json\": {\n        \"email\": email,\n        \"valid\": is_valid\n    }\n}]\n```\n\n### Split on Pattern\n\n```python\nimport re\n\ntext = \"apple,banana;orange|grape\"\n\n# Split on multiple delimiters\nitems = re.split(r'[,;|]', text)\n\n# Clean up whitespace\nitems = [item.strip() for item in items]\n\nreturn [{\n    \"json\": {\n        \"items\": items,\n        \"count\": len(items)\n    }\n}]\n```\n\n---\n\n## Module 4: base64 - Encoding/Decoding\n\n**Common** - Encode binary data, API authentication.\n\n### Encode String to Base64\n\n```python\nimport base64\n\ntext = \"Hello, World!\"\n\n# Encode to base64\nencoded_bytes = base64.b64encode(text.encode('utf-8'))\nencoded_string = encoded_bytes.decode('utf-8')\n\nreturn [{\n    \"json\": {\n        \"original\": text,\n        \"encoded\": encoded_string\n    }\n}]\n```\n\n### Decode Base64 to String\n\n```python\nimport base64\n\nencoded = \"SGVsbG8sIFdvcmxkIQ==\"\n\n# Decode from base64\ndecoded_bytes = base64.b64decode(encoded)\ndecoded_string = decoded_bytes.decode('utf-8')\n\nreturn [{\n    \"json\": {\n        \"encoded\": encoded,\n        \"decoded\": decoded_string\n    }\n}]\n```\n\n### Basic Auth Header\n\n```python\nimport base64\n\nusername = \"admin\"\npassword = \"secret123\"\n\n# Create Basic Auth header\ncredentials = f\"{username}:{password}\"\nencoded = base64.b64encode(credentials.encode('utf-8')).decode('utf-8')\nauth_header = f\"Basic {encoded}\"\n\nreturn [{\n    \"json\": {\n        \"authorization\": auth_header\n    }\n}]\n```\n\n---\n\n## Module 5: hashlib - Hashing\n\n**Common** - Generate checksums, hash passwords, create IDs.\n\n### MD5 Hash\n\n```python\nimport hashlib\n\ntext = \"Hello, World!\"\n\n# Generate MD5 hash\nmd5_hash = hashlib.md5(text.encode('utf-8')).hexdigest()\n\nreturn [{\n    \"json\": {\n        \"original\": text,\n        \"md5\": md5_hash\n    }\n}]\n```\n\n### SHA256 Hash\n\n```python\nimport hashlib\n\ndata = _input.first()[\"json\"][\"body\"]\ntext = data.get(\"password\", \"\")\n\n# Generate SHA256 hash (more secure than MD5)\nsha256_hash = hashlib.sha256(text.encode('utf-8')).hexdigest()\n\nreturn [{\n    \"json\": {\n        \"hashed\": sha256_hash\n    }\n}]\n```\n\n### Generate Unique ID\n\n```python\nimport hashlib\nfrom datetime import datetime\n\n# Create unique ID from multiple values\nunique_string = f\"{datetime.now().isoformat()}-{_json.get('user_id', 'unknown')}\"\nunique_id = hashlib.sha256(unique_string.encode('utf-8')).hexdigest()[:16]\n\nreturn [{\n    \"json\": {\n        \"id\": unique_id,\n        \"generated_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n---\n\n## Module 6: urllib.parse - URL Operations\n\n**Common** - Parse URLs, encode parameters.\n\n### Parse URL\n\n```python\nfrom urllib.parse import urlparse\n\nurl = \"https://example.com/path?key=value&foo=bar#section\"\n\nparsed = urlparse(url)\n\nreturn [{\n    \"json\": {\n        \"scheme\": parsed.scheme,      # \"https\"\n        \"netloc\": parsed.netloc,      # \"example.com\"\n        \"path\": parsed.path,          # \"/path\"\n        \"query\": parsed.query,        # \"key=value&foo=bar\"\n        \"fragment\": parsed.fragment    # \"section\"\n    }\n}]\n```\n\n### URL Encode Parameters\n\n```python\nfrom urllib.parse import urlencode\n\nparams = {\n    \"name\": \"Alice Smith\",\n    \"email\": \"alice@example.com\",\n    \"message\": \"Hello, World!\"\n}\n\n# Encode parameters for URL\nencoded = urlencode(params)\n\nreturn [{\n    \"json\": {\n        \"query_string\": encoded,\n        \"full_url\": f\"https://api.example.com/submit?{encoded}\"\n    }\n}]\n```\n\n### Parse Query String\n\n```python\nfrom urllib.parse import parse_qs\n\nquery_string = \"name=Alice&age=30&tags=python&tags=n8n\"\n\n# Parse query string\nparams = parse_qs(query_string)\n\nreturn [{\n    \"json\": {\n        \"name\": params.get(\"name\", [\"\"])[0],\n        \"age\": int(params.get(\"age\", [\"0\"])[0]),\n        \"tags\": params.get(\"tags\", [])\n    }\n}]\n```\n\n### URL Encode/Decode Strings\n\n```python\nfrom urllib.parse import quote, unquote\n\ntext = \"Hello, World! ä½ å¥½\"\n\n# URL encode\nencoded = quote(text)\n\n# URL decode\ndecoded = unquote(encoded)\n\nreturn [{\n    \"json\": {\n        \"original\": text,\n        \"encoded\": encoded,\n        \"decoded\": decoded\n    }\n}]\n```\n\n---\n\n## Module 7: math - Mathematical Operations\n\n**Moderately useful** - Advanced math functions.\n\n### Basic Math Functions\n\n```python\nimport math\n\nnumber = 16.7\n\nreturn [{\n    \"json\": {\n        \"ceiling\": math.ceil(number),      # 17\n        \"floor\": math.floor(number),       # 16\n        \"rounded\": round(number),          # 17\n        \"square_root\": math.sqrt(16),      # 4.0\n        \"power\": math.pow(2, 3),          # 8.0\n        \"absolute\": math.fabs(-5.5)       # 5.5\n    }\n}]\n```\n\n### Trigonometry\n\n```python\nimport math\n\nangle_degrees = 45\nangle_radians = math.radians(angle_degrees)\n\nreturn [{\n    \"json\": {\n        \"sine\": math.sin(angle_radians),\n        \"cosine\": math.cos(angle_radians),\n        \"tangent\": math.tan(angle_radians),\n        \"pi\": math.pi,\n        \"e\": math.e\n    }\n}]\n```\n\n### Logarithms\n\n```python\nimport math\n\nnumber = 100\n\nreturn [{\n    \"json\": {\n        \"log10\": math.log10(number),     # 2.0\n        \"natural_log\": math.log(number), # 4.605...\n        \"log2\": math.log2(number)        # 6.644...\n    }\n}]\n```\n\n---\n\n## Module 8: random - Random Numbers\n\n**Moderately useful** - Generate random data, sampling.\n\n### Random Numbers\n\n```python\nimport random\n\nreturn [{\n    \"json\": {\n        \"random_float\": random.random(),           # 0.0 to 1.0\n        \"random_int\": random.randint(1, 100),      # 1 to 100\n        \"random_range\": random.randrange(0, 100, 5) # 0, 5, 10, ..., 95\n    }\n}]\n```\n\n### Random Choice\n\n```python\nimport random\n\ncolors = [\"red\", \"green\", \"blue\", \"yellow\"]\nusers = [{\"id\": 1, \"name\": \"Alice\"}, {\"id\": 2, \"name\": \"Bob\"}]\n\nreturn [{\n    \"json\": {\n        \"random_color\": random.choice(colors),\n        \"random_user\": random.choice(users)\n    }\n}]\n```\n\n### Shuffle List\n\n```python\nimport random\n\nitems = [1, 2, 3, 4, 5]\nshuffled = items.copy()\nrandom.shuffle(shuffled)\n\nreturn [{\n    \"json\": {\n        \"original\": items,\n        \"shuffled\": shuffled\n    }\n}]\n```\n\n### Random Sample\n\n```python\nimport random\n\nitems = list(range(1, 101))\n\n# Get 10 random items without replacement\nsample = random.sample(items, 10)\n\nreturn [{\n    \"json\": {\n        \"sample\": sample,\n        \"count\": len(sample)\n    }\n}]\n```\n\n---\n\n## Module 9: statistics - Statistical Functions\n\n**Moderately useful** - Calculate stats from data.\n\n### Basic Statistics\n\n```python\nimport statistics\n\nnumbers = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100]\n\nreturn [{\n    \"json\": {\n        \"mean\": statistics.mean(numbers),           # 55.0\n        \"median\": statistics.median(numbers),       # 55.0\n        \"mode\": statistics.mode([1, 2, 2, 3]),     # 2\n        \"stdev\": statistics.stdev(numbers),        # 30.28...\n        \"variance\": statistics.variance(numbers)   # 916.67...\n    }\n}]\n```\n\n### Aggregate from Items\n\n```python\nimport statistics\n\nall_items = _input.all()\n\n# Extract amounts\namounts = [item[\"json\"].get(\"amount\", 0) for item in all_items]\n\nif amounts:\n    return [{\n        \"json\": {\n            \"count\": len(amounts),\n            \"total\": sum(amounts),\n            \"average\": statistics.mean(amounts),\n            \"median\": statistics.median(amounts),\n            \"min\": min(amounts),\n            \"max\": max(amounts),\n            \"range\": max(amounts) - min(amounts)\n        }\n    }]\nelse:\n    return [{\"json\": {\"error\": \"No data\"}}]\n```\n\n---\n\n## Workarounds for Missing Libraries\n\n### HTTP Requests (No requests library)\n\n```python\n# âŒ Can't use requests library\n# import requests  # ModuleNotFoundError!\n\n# âœ… Use HTTP Request node instead\n# Add HTTP Request node BEFORE Code node\n# Access the response in Code node\n\nresponse_data = _input.first()[\"json\"]\n\nreturn [{\n    \"json\": {\n        \"status\": response_data.get(\"status\"),\n        \"data\": response_data.get(\"body\"),\n        \"processed\": True\n    }\n}]\n```\n\n### Data Processing (No pandas)\n\n```python\n# âŒ Can't use pandas\n# import pandas as pd  # ModuleNotFoundError!\n\n# âœ… Use Python's built-in list comprehensions\nall_items = _input.all()\n\n# Filter\nactive_items = [\n    item for item in all_items\n    if item[\"json\"].get(\"status\") == \"active\"\n]\n\n# Group by\nfrom collections import defaultdict\ngrouped = defaultdict(list)\n\nfor item in all_items:\n    category = item[\"json\"].get(\"category\", \"other\")\n    grouped[category].append(item[\"json\"])\n\n# Aggregate\nimport statistics\namounts = [item[\"json\"].get(\"amount\", 0) for item in all_items]\ntotal = sum(amounts)\naverage = statistics.mean(amounts) if amounts else 0\n\nreturn [{\n    \"json\": {\n        \"active_count\": len(active_items),\n        \"grouped\": dict(grouped),\n        \"total\": total,\n        \"average\": average\n    }\n}]\n```\n\n### Database Operations (No drivers)\n\n```python\n# âŒ Can't use database drivers\n# import psycopg2  # ModuleNotFoundError!\n# import pymongo   # ModuleNotFoundError!\n\n# âœ… Use n8n database nodes instead\n# Add Postgres/MySQL/MongoDB node BEFORE Code node\n# Process results in Code node\n\ndb_results = _input.first()[\"json\"]\n\nreturn [{\n    \"json\": {\n        \"record_count\": len(db_results) if isinstance(db_results, list) else 1,\n        \"processed\": True\n    }\n}]\n```\n\n---\n\n## Complete Standard Library List\n\n**Available** (commonly useful):\n- json\n- datetime, time\n- re\n- base64\n- hashlib\n- urllib.parse, urllib.request, urllib.error\n- math\n- random\n- statistics\n- collections (defaultdict, Counter, namedtuple)\n- itertools\n- functools\n- operator\n- string\n- textwrap\n\n**Available** (less common):\n- os.path (path operations only)\n- copy\n- typing\n- enum\n- decimal\n- fractions\n\n**NOT Available** (external libraries):\n- requests (HTTP)\n- pandas (data analysis)\n- numpy (numerical computing)\n- bs4/beautifulsoup4 (HTML parsing)\n- selenium (browser automation)\n- psycopg2, pymongo, sqlalchemy (databases)\n- flask, fastapi (web frameworks)\n- pillow (image processing)\n- openpyxl, xlsxwriter (Excel)\n\n---\n\n## Best Practices\n\n### 1. Use Standard Library When Possible\n\n```python\n# âœ… GOOD: Use standard library\nimport json\nimport datetime\nimport re\n\ndata = _input.first()[\"json\"]\nprocessed = json.loads(data.get(\"json_string\", \"{}\"))\n\nreturn [{\"json\": processed}]\n```\n\n### 2. Fall Back to n8n Nodes\n\n```python\n# For operations requiring external libraries,\n# use n8n nodes instead:\n# - HTTP Request for API calls\n# - Postgres/MySQL for databases\n# - Extract from File for parsing\n\n# Then process results in Code node\nresult = _input.first()[\"json\"]\nreturn [{\"json\": {\"processed\": result}}]\n```\n\n### 3. Combine Multiple Modules\n\n```python\nimport json\nimport base64\nimport hashlib\nfrom datetime import datetime\n\n# Combine modules for complex operations\ndata = _input.first()[\"json\"][\"body\"]\n\n# Hash sensitive data\nuser_id = hashlib.sha256(data.get(\"email\", \"\").encode()).hexdigest()[:16]\n\n# Encode for storage\nencoded_data = base64.b64encode(json.dumps(data).encode()).decode()\n\nreturn [{\n    \"json\": {\n        \"user_id\": user_id,\n        \"encoded_data\": encoded_data,\n        \"timestamp\": datetime.now().isoformat()\n    }\n}]\n```\n\n---\n\n## Summary\n\n**Most Useful Modules**:\n1. json - Parse/generate JSON\n2. datetime - Date operations\n3. re - Regular expressions\n4. base64 - Encoding\n5. hashlib - Hashing\n6. urllib.parse - URL operations\n\n**Critical Limitation**:\n- NO external libraries (requests, pandas, numpy, etc.)\n\n**Recommended Approach**:\n- Use **JavaScript** for 95% of use cases\n- Use Python only when specifically needed\n- Use n8n nodes for operations requiring external libraries\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Python Code overview\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Data access patterns\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Production patterns\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Avoid common mistakes\n",
        "skills/n8n-expression-syntax/COMMON_MISTAKES.md": "# Common n8n Expression Mistakes\n\nComplete catalog of expression errors with explanations and fixes.\n\n---\n\n## 1. Missing Curly Braces\n\n**Problem**: Expression not recognized, shows as literal text\n\nâŒ **Wrong**:\n```\n$json.email\n```\n\nâœ… **Correct**:\n```\n{{$json.email}}\n```\n\n**Why it fails**: n8n treats text without {{ }} as a literal string. Expressions must be wrapped to be evaluated.\n\n**How to identify**: Field shows exact text like \"$json.email\" instead of actual value.\n\n---\n\n## 2. Webhook Body Access\n\n**Problem**: Undefined values when accessing webhook data\n\nâŒ **Wrong**:\n```\n{{$json.name}}\n{{$json.email}}\n{{$json.message}}\n```\n\nâœ… **Correct**:\n```\n{{$json.body.name}}\n{{$json.body.email}}\n{{$json.body.message}}\n```\n\n**Why it fails**: Webhook node wraps incoming data under `.body` property. The root `$json` contains headers, params, query, and body.\n\n**Webhook structure**:\n```javascript\n{\n  \"headers\": {...},\n  \"params\": {...},\n  \"query\": {...},\n  \"body\": {         // User data is HERE!\n    \"name\": \"John\",\n    \"email\": \"john@example.com\"\n  }\n}\n```\n\n**How to identify**: Webhook workflow shows \"undefined\" for fields that are definitely being sent.\n\n---\n\n## 3. Spaces in Field Names\n\n**Problem**: Syntax error or undefined value\n\nâŒ **Wrong**:\n```\n{{$json.first name}}\n{{$json.user data.email}}\n```\n\nâœ… **Correct**:\n```\n{{$json['first name']}}\n{{$json['user data'].email}}\n```\n\n**Why it fails**: Spaces break dot notation. JavaScript interprets space as end of property name.\n\n**How to identify**: Error message about unexpected token, or undefined when field exists.\n\n---\n\n## 4. Spaces in Node Names\n\n**Problem**: Cannot access other node's data\n\nâŒ **Wrong**:\n```\n{{$node.HTTP Request.json.data}}\n{{$node.Respond to Webhook.json}}\n```\n\nâœ… **Correct**:\n```\n{{$node[\"HTTP Request\"].json.data}}\n{{$node[\"Respond to Webhook\"].json}}\n```\n\n**Why it fails**: Node names are treated as object property names and need quotes when they contain spaces.\n\n**How to identify**: Error like \"Cannot read property 'Request' of undefined\"\n\n---\n\n## 5. Incorrect Node Reference Case\n\n**Problem**: Undefined or wrong data returned\n\nâŒ **Wrong**:\n```\n{{$node[\"http request\"].json.data}}  // lowercase\n{{$node[\"Http Request\"].json.data}}  // wrong capitalization\n```\n\nâœ… **Correct**:\n```\n{{$node[\"HTTP Request\"].json.data}}  // exact match\n```\n\n**Why it fails**: Node names are **case-sensitive**. Must match exactly as shown in workflow.\n\n**How to identify**: Undefined value even though node exists and has data.\n\n---\n\n## 6. Double Wrapping\n\n**Problem**: Literal {{ }} appears in output\n\nâŒ **Wrong**:\n```\n{{{$json.field}}}\n```\n\nâœ… **Correct**:\n```\n{{$json.field}}\n```\n\n**Why it fails**: Only one set of {{ }} is needed. Extra braces are treated as literal characters.\n\n**How to identify**: Output shows \"{{value}}\" instead of just \"value\".\n\n---\n\n## 7. Array Access with Dots\n\n**Problem**: Syntax error or undefined\n\nâŒ **Wrong**:\n```\n{{$json.items.0.name}}\n{{$json.users.1.email}}\n```\n\nâœ… **Correct**:\n```\n{{$json.items[0].name}}\n{{$json.users[1].email}}\n```\n\n**Why it fails**: Array indices require brackets, not dots. Number after dot is invalid JavaScript.\n\n**How to identify**: Syntax error or \"Cannot read property '0' of undefined\"\n\n---\n\n## 8. Using Expressions in Code Nodes\n\n**Problem**: Literal string instead of value, or errors\n\nâŒ **Wrong (in Code node)**:\n```javascript\nconst email = '{{$json.email}}';\nconst name = '={{$json.body.name}}';\n```\n\nâœ… **Correct (in Code node)**:\n```javascript\nconst email = $json.email;\nconst name = $json.body.name;\n\n// Or using Code node API\nconst email = $input.item.json.email;\nconst allItems = $input.all();\n```\n\n**Why it fails**: Code nodes have **direct access** to data. The {{ }} syntax is for expression fields in other nodes, not for JavaScript code.\n\n**How to identify**: Literal string \"{{$json.email}}\" appears in Code node output instead of actual value.\n\n---\n\n## 9. Missing Quotes in $node Reference\n\n**Problem**: Syntax error\n\nâŒ **Wrong**:\n```\n{{$node[HTTP Request].json.data}}\n```\n\nâœ… **Correct**:\n```\n{{$node[\"HTTP Request\"].json.data}}\n```\n\n**Why it fails**: Node names must be quoted strings inside brackets.\n\n**How to identify**: Syntax error \"Unexpected identifier\"\n\n---\n\n## 10. Incorrect Property Path\n\n**Problem**: Undefined value\n\nâŒ **Wrong**:\n```\n{{$json.data.items.name}}       // items is an array\n{{$json.user.email}}            // user doesn't exist, it's userData\n```\n\nâœ… **Correct**:\n```\n{{$json.data.items[0].name}}    // access array element\n{{$json.userData.email}}        // correct property name\n```\n\n**Why it fails**: Wrong path to data. Arrays need index, property names must be exact.\n\n**How to identify**: Check actual data structure using expression editor preview.\n\n---\n\n## 11. Using = Prefix Outside JSON\n\n**Problem**: Literal \"=\" appears in output\n\nâŒ **Wrong (in text field)**:\n```\nEmail: ={{$json.email}}\n```\n\nâœ… **Correct (in text field)**:\n```\nEmail: {{$json.email}}\n```\n\n**Note**: The `=` prefix is **only** needed in JSON mode or when you want to set entire field value to expression result:\n\n```javascript\n// JSON mode (set property to expression)\n{\n  \"email\": \"={{$json.body.email}}\"\n}\n\n// Text mode (no = needed)\nHello {{$json.body.name}}!\n```\n\n**Why it fails**: The `=` is parsed as literal text in non-JSON contexts.\n\n**How to identify**: Output shows \"=john@example.com\" instead of \"john@example.com\"\n\n---\n\n## 12. Expressions in Webhook Path\n\n**Problem**: Path doesn't update, validation error\n\nâŒ **Wrong**:\n```\npath: \"{{$json.user_id}}/webhook\"\npath: \"users/={{$env.TENANT_ID}}\"\n```\n\nâœ… **Correct**:\n```\npath: \"my-webhook\"              // Static paths only\npath: \"user-webhook/:userId\"    // Use dynamic URL parameters instead\n```\n\n**Why it fails**: Webhook paths must be static. Use dynamic URL parameters (`:paramName`) instead of expressions.\n\n**How to identify**: Webhook path doesn't change or validation warns about invalid path.\n\n---\n\n## 13. Forgetting .json in $node Reference\n\n**Problem**: Undefined or wrong data\n\nâŒ **Wrong**:\n```\n{{$node[\"HTTP Request\"].data}}          // Missing .json\n{{$node[\"Webhook\"].body.email}}         // Missing .json\n```\n\nâœ… **Correct**:\n```\n{{$node[\"HTTP Request\"].json.data}}\n{{$node[\"Webhook\"].json.body.email}}\n```\n\n**Why it fails**: Node data is always under `.json` property (or `.binary` for binary data).\n\n**How to identify**: Undefined value when you know the node has data.\n\n---\n\n## 14. String Concatenation Confusion\n\n**Problem**: Attempting JavaScript template literals\n\nâŒ **Wrong**:\n```\n`Hello ${$json.name}!`          // Template literal syntax\n\"Hello \" + $json.name + \"!\"     // String concatenation\n```\n\nâœ… **Correct**:\n```\nHello {{$json.name}}!           // n8n expressions auto-concatenate\n```\n\n**Why it fails**: n8n expressions don't use JavaScript template literal syntax. Adjacent text and expressions are automatically concatenated.\n\n**How to identify**: Literal backticks or + symbols appear in output.\n\n---\n\n## 15. Empty Expression Brackets\n\n**Problem**: Literal {{}} in output\n\nâŒ **Wrong**:\n```\n{{}}\n{{ }}\n```\n\nâœ… **Correct**:\n```\n{{$json.field}}                 // Include expression content\n```\n\n**Why it fails**: Empty expression brackets have nothing to evaluate.\n\n**How to identify**: Literal \"{{ }}\" text appears in output.\n\n---\n\n## Quick Reference Table\n\n| Error | Symptom | Fix |\n|-------|---------|-----|\n| No {{ }} | Literal text | Add {{ }} |\n| Webhook data | Undefined | Add `.body` |\n| Space in field | Syntax error | Use `['field name']` |\n| Space in node | Undefined | Use `[\"Node Name\"]` |\n| Wrong case | Undefined | Match exact case |\n| Double {{ }} | Literal braces | Remove extra {{ }} |\n| .0 array | Syntax error | Use [0] |\n| {{ }} in Code | Literal string | Remove {{ }} |\n| No quotes in $node | Syntax error | Add quotes |\n| Wrong path | Undefined | Check data structure |\n| = in text | Literal = | Remove = prefix |\n| Dynamic path | Doesn't work | Use static path |\n| Missing .json | Undefined | Add .json |\n| Template literals | Literal text | Use {{ }} |\n| Empty {{ }} | Literal braces | Add expression |\n\n---\n\n## Debugging Process\n\nWhen expression doesn't work:\n\n1. **Check braces**: Is it wrapped in {{ }}?\n2. **Check data source**: Is it webhook data? Add `.body`\n3. **Check spaces**: Field or node name has spaces? Use brackets\n4. **Check case**: Does node name match exactly?\n5. **Check path**: Is the property path correct?\n6. **Use expression editor**: Preview shows actual result\n7. **Check context**: Is it a Code node? Remove {{ }}\n\n---\n\n**Related**: See [EXAMPLES.md](EXAMPLES.md) for working examples of correct syntax.\n",
        "skills/n8n-expression-syntax/EXAMPLES.md": "# n8n Expression Examples\n\nReal working examples from n8n workflows.\n\n---\n\n## Example 1: Webhook Form Submission\n\n**Scenario**: Form submission webhook posts to Slack\n\n**Workflow**: Webhook â†’ Slack\n\n**Webhook Input** (POST):\n```json\n{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"company\": \"Acme Corp\",\n  \"message\": \"Interested in your product\"\n}\n```\n\n**Webhook Node Output**:\n```json\n{\n  \"headers\": {\"content-type\": \"application/json\"},\n  \"params\": {},\n  \"query\": {},\n  \"body\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"company\": \"Acme Corp\",\n    \"message\": \"Interested in your product\"\n  }\n}\n```\n\n**In Slack Node** (text field):\n```\nNew form submission! ğŸ“\n\nName: {{$json.body.name}}\nEmail: {{$json.body.email}}\nCompany: {{$json.body.company}}\nMessage: {{$json.body.message}}\n```\n\n**Output**:\n```\nNew form submission! ğŸ“\n\nName: John Doe\nEmail: john@example.com\nCompany: Acme Corp\nMessage: Interested in your product\n```\n\n---\n\n## Example 2: HTTP API to Database\n\n**Scenario**: Fetch user data from API and insert into database\n\n**Workflow**: Schedule â†’ HTTP Request â†’ Postgres\n\n**HTTP Request Returns**:\n```json\n{\n  \"data\": {\n    \"users\": [\n      {\n        \"id\": 123,\n        \"name\": \"Alice Smith\",\n        \"email\": \"alice@example.com\",\n        \"role\": \"admin\"\n      }\n    ]\n  }\n}\n```\n\n**In Postgres Node** (INSERT statement):\n```sql\nINSERT INTO users (user_id, name, email, role, synced_at)\nVALUES (\n  {{$json.data.users[0].id}},\n  '{{$json.data.users[0].name}}',\n  '{{$json.data.users[0].email}}',\n  '{{$json.data.users[0].role}}',\n  '{{$now.toFormat('yyyy-MM-dd HH:mm:ss')}}'\n)\n```\n\n**Result**: User inserted with current timestamp\n\n---\n\n## Example 3: Multi-Node Data Flow\n\n**Scenario**: Webhook â†’ HTTP Request â†’ Email\n\n**Workflow Structure**:\n1. Webhook receives order ID\n2. HTTP Request fetches order details\n3. Email sends confirmation\n\n### Node 1: Webhook\n\n**Receives**:\n```json\n{\n  \"body\": {\n    \"order_id\": \"ORD-12345\"\n  }\n}\n```\n\n### Node 2: HTTP Request\n\n**URL field**:\n```\nhttps://api.example.com/orders/{{$json.body.order_id}}\n```\n\n**Returns**:\n```json\n{\n  \"order\": {\n    \"id\": \"ORD-12345\",\n    \"customer\": \"Bob Jones\",\n    \"total\": 99.99,\n    \"items\": [\"Widget\", \"Gadget\"]\n  }\n}\n```\n\n### Node 3: Email\n\n**Subject**:\n```\nOrder {{$node[\"Webhook\"].json.body.order_id}} Confirmed\n```\n\n**Body**:\n```\nDear {{$node[\"HTTP Request\"].json.order.customer}},\n\nYour order {{$node[\"Webhook\"].json.body.order_id}} has been confirmed!\n\nTotal: ${{$node[\"HTTP Request\"].json.order.total}}\nItems: {{$node[\"HTTP Request\"].json.order.items.join(', ')}}\n\nThank you for your purchase!\n```\n\n**Email Result**:\n```\nSubject: Order ORD-12345 Confirmed\n\nDear Bob Jones,\n\nYour order ORD-12345 has been confirmed!\n\nTotal: $99.99\nItems: Widget, Gadget\n\nThank you for your purchase!\n```\n\n---\n\n## Example 4: Date Formatting\n\n**Scenario**: Various date format outputs\n\n**Current Time**: 2025-10-20 14:30:45\n\n### ISO Format\n```javascript\n{{$now.toISO()}}\n```\n**Output**: `2025-10-20T14:30:45.000Z`\n\n### Custom Date Format\n```javascript\n{{$now.toFormat('yyyy-MM-dd')}}\n```\n**Output**: `2025-10-20`\n\n### Time Only\n```javascript\n{{$now.toFormat('HH:mm:ss')}}\n```\n**Output**: `14:30:45`\n\n### Full Readable Format\n```javascript\n{{$now.toFormat('MMMM dd, yyyy')}}\n```\n**Output**: `October 20, 2025`\n\n### Date Math - Future\n```javascript\n{{$now.plus({days: 7}).toFormat('yyyy-MM-dd')}}\n```\n**Output**: `2025-10-27`\n\n### Date Math - Past\n```javascript\n{{$now.minus({hours: 24}).toFormat('yyyy-MM-dd HH:mm')}}\n```\n**Output**: `2025-10-19 14:30`\n\n---\n\n## Example 5: Array Operations\n\n**Data**:\n```json\n{\n  \"users\": [\n    {\"name\": \"Alice\", \"email\": \"alice@example.com\"},\n    {\"name\": \"Bob\", \"email\": \"bob@example.com\"},\n    {\"name\": \"Charlie\", \"email\": \"charlie@example.com\"}\n  ]\n}\n```\n\n### First User\n```javascript\n{{$json.users[0].name}}\n```\n**Output**: `Alice`\n\n### Last User\n```javascript\n{{$json.users[$json.users.length - 1].name}}\n```\n**Output**: `Charlie`\n\n### All Emails (Join)\n```javascript\n{{$json.users.map(u => u.email).join(', ')}}\n```\n**Output**: `alice@example.com, bob@example.com, charlie@example.com`\n\n### Array Length\n```javascript\n{{$json.users.length}}\n```\n**Output**: `3`\n\n---\n\n## Example 6: Conditional Logic\n\n**Data**:\n```json\n{\n  \"order\": {\n    \"status\": \"completed\",\n    \"total\": 150\n  }\n}\n```\n\n### Ternary Operator\n```javascript\n{{$json.order.status === 'completed' ? 'Order Complete âœ“' : 'Pending...'}}\n```\n**Output**: `Order Complete âœ“`\n\n### Default Values\n```javascript\n{{$json.order.notes || 'No notes provided'}}\n```\n**Output**: `No notes provided` (if notes field doesn't exist)\n\n### Multiple Conditions\n```javascript\n{{$json.order.total > 100 ? 'Premium Customer' : 'Standard Customer'}}\n```\n**Output**: `Premium Customer`\n\n---\n\n## Example 7: String Manipulation\n\n**Data**:\n```json\n{\n  \"user\": {\n    \"email\": \"JOHN@EXAMPLE.COM\",\n    \"message\": \"  Hello World  \"\n  }\n}\n```\n\n### Lowercase\n```javascript\n{{$json.user.email.toLowerCase()}}\n```\n**Output**: `john@example.com`\n\n### Uppercase\n```javascript\n{{$json.user.message.toUpperCase()}}\n```\n**Output**: `  HELLO WORLD  `\n\n### Trim\n```javascript\n{{$json.user.message.trim()}}\n```\n**Output**: `Hello World`\n\n### Substring\n```javascript\n{{$json.user.email.substring(0, 4)}}\n```\n**Output**: `JOHN`\n\n### Replace\n```javascript\n{{$json.user.message.replace('World', 'n8n')}}\n```\n**Output**: `  Hello n8n  `\n\n---\n\n## Example 8: Fields with Spaces\n\n**Data**:\n```json\n{\n  \"user data\": {\n    \"first name\": \"Jane\",\n    \"last name\": \"Doe\",\n    \"phone number\": \"+1234567890\"\n  }\n}\n```\n\n### Bracket Notation\n```javascript\n{{$json['user data']['first name']}}\n```\n**Output**: `Jane`\n\n### Combined\n```javascript\n{{$json['user data']['first name']}} {{$json['user data']['last name']}}\n```\n**Output**: `Jane Doe`\n\n### Nested Spaces\n```javascript\nContact: {{$json['user data']['phone number']}}\n```\n**Output**: `Contact: +1234567890`\n\n---\n\n## Example 9: Code Node (Direct Access)\n\n**Code Node**: Transform webhook data\n\n**Input** (from Webhook node):\n```json\n{\n  \"body\": {\n    \"items\": [\"apple\", \"banana\", \"cherry\"]\n  }\n}\n```\n\n**Code** (JavaScript):\n```javascript\n// âœ… Direct access (no {{ }})\nconst items = $json.body.items;\n\n// Transform to uppercase\nconst uppercased = items.map(item => item.toUpperCase());\n\n// Return in n8n format\nreturn [{\n  json: {\n    original: items,\n    transformed: uppercased,\n    count: items.length\n  }\n}];\n```\n\n**Output**:\n```json\n{\n  \"original\": [\"apple\", \"banana\", \"cherry\"],\n  \"transformed\": [\"APPLE\", \"BANANA\", \"CHERRY\"],\n  \"count\": 3\n}\n```\n\n---\n\n## Example 10: Environment Variables\n\n**Setup**: Environment variable `API_KEY=secret123`\n\n### In HTTP Request (Headers)\n```javascript\nAuthorization: Bearer {{$env.API_KEY}}\n```\n**Result**: `Authorization: Bearer secret123`\n\n### In URL\n```javascript\nhttps://api.example.com/data?key={{$env.API_KEY}}\n```\n**Result**: `https://api.example.com/data?key=secret123`\n\n---\n\n## Template from Real Workflow\n\n**Based on n8n template #2947** (Weather to Slack)\n\n### Workflow Structure\nWebhook â†’ OpenStreetMap API â†’ Weather API â†’ Slack\n\n### Webhook Slash Command\n**Input**: `/weather London`\n\n**Webhook receives**:\n```json\n{\n  \"body\": {\n    \"text\": \"London\"\n  }\n}\n```\n\n### OpenStreetMap API\n**URL**:\n```\nhttps://nominatim.openstreetmap.org/search?q={{$json.body.text}}&format=json\n```\n\n### Weather API (NWS)\n**URL**:\n```\nhttps://api.weather.gov/points/{{$node[\"OpenStreetMap\"].json[0].lat}},{{$node[\"OpenStreetMap\"].json[0].lon}}\n```\n\n### Slack Message\n```\nWeather for {{$json.body.text}}:\n\nTemperature: {{$node[\"Weather API\"].json.properties.temperature.value}}Â°C\nConditions: {{$node[\"Weather API\"].json.properties.shortForecast}}\n```\n\n---\n\n## Summary\n\n**Key Patterns**:\n1. Webhook data is under `.body`\n2. Use `{{}}` for expressions (except Code nodes)\n3. Reference other nodes with `$node[\"Node Name\"].json`\n4. Use brackets for field names with spaces\n5. Node names are case-sensitive\n\n**Most Common Uses**:\n- `{{$json.body.field}}` - Webhook data\n- `{{$node[\"Name\"].json.field}}` - Other node data\n- `{{$now.toFormat('yyyy-MM-dd')}}` - Timestamps\n- `{{$json.array[0].field}}` - Array access\n- `{{$json.field || 'default'}}` - Default values\n\n---\n\n**Related**: See [COMMON_MISTAKES.md](COMMON_MISTAKES.md) for error examples and fixes.\n",
        "skills/n8n-expression-syntax/README.md": "# n8n Expression Syntax\n\nExpert guide for writing correct n8n expressions in workflows.\n\n---\n\n## Purpose\n\nTeaches correct n8n expression syntax ({{ }} patterns) and fixes common mistakes, especially the critical webhook data structure gotcha.\n\n## Activates On\n\n- expression\n- {{}} syntax\n- $json, $node, $now, $env\n- webhook data\n- troubleshoot expression error\n- undefined in workflow\n\n## File Count\n\n4 files, ~450 lines total\n\n## Dependencies\n\n**n8n-mcp tools**:\n- None directly (syntax knowledge skill)\n- Works with n8n-mcp validation tools\n\n**Related skills**:\n- n8n Workflow Patterns (uses expressions in examples)\n- n8n MCP Tools Expert (validates expressions)\n- n8n Node Configuration (when expressions are needed)\n\n## Coverage\n\n### Core Topics\n- Expression format ({{ }})\n- Core variables ($json, $node, $now, $env)\n- **Webhook data structure** ($json.body.*)\n- When NOT to use expressions (Code nodes)\n\n### Common Patterns\n- Accessing nested fields\n- Referencing other nodes\n- Array and object access\n- Date/time formatting\n- String manipulation\n\n### Error Prevention\n- 15 common mistakes with fixes\n- Quick reference table\n- Debugging process\n\n## Evaluations\n\n4 scenarios (100% coverage expected):\n1. **eval-001**: Missing curly braces\n2. **eval-002**: Webhook body data access (critical!)\n3. **eval-003**: Code node vs expression confusion\n4. **eval-004**: Node reference syntax\n\n## Key Features\n\nâœ… **Critical Gotcha Highlighted**: Webhook data under `.body`\nâœ… **Real Examples**: From MCP testing and real templates\nâœ… **Quick Fixes Table**: Fast reference for common errors\nâœ… **Code vs Expression**: Clear distinction\nâœ… **Comprehensive**: Covers 95% of expression use cases\n\n## Files\n\n- **SKILL.md** (285 lines) - Main content with all essential knowledge\n- **COMMON_MISTAKES.md** (380 lines) - Complete error catalog with 15 common mistakes\n- **EXAMPLES.md** (450 lines) - 10 real working examples\n- **README.md** (this file) - Skill metadata\n\n## Success Metrics\n\n**Expected outcomes**:\n- Users correctly wrap expressions in {{ }}\n- Zero webhook `.body` access errors\n- No expressions used in Code nodes\n- Correct $node reference syntax\n\n## Last Updated\n\n2025-10-20\n\n---\n\n**Part of**: n8n-skills repository\n**Conceived by**: Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n",
        "skills/n8n-expression-syntax/SKILL.md": "---\nname: n8n-expression-syntax\ndescription: Validate n8n expression syntax and fix common errors. Use when writing n8n expressions, using {{}} syntax, accessing $json/$node variables, troubleshooting expression errors, or working with webhook data in workflows.\n---\n\n# n8n Expression Syntax\n\nExpert guide for writing correct n8n expressions in workflows.\n\n---\n\n## Expression Format\n\nAll dynamic content in n8n uses **double curly braces**:\n\n```\n{{expression}}\n```\n\n**Examples**:\n```\nâœ… {{$json.email}}\nâœ… {{$json.body.name}}\nâœ… {{$node[\"HTTP Request\"].json.data}}\nâŒ $json.email  (no braces - treated as literal text)\nâŒ {$json.email}  (single braces - invalid)\n```\n\n---\n\n## Core Variables\n\n### $json - Current Node Output\n\nAccess data from the current node:\n\n```javascript\n{{$json.fieldName}}\n{{$json['field with spaces']}}\n{{$json.nested.property}}\n{{$json.items[0].name}}\n```\n\n### $node - Reference Other Nodes\n\nAccess data from any previous node:\n\n```javascript\n{{$node[\"Node Name\"].json.fieldName}}\n{{$node[\"HTTP Request\"].json.data}}\n{{$node[\"Webhook\"].json.body.email}}\n```\n\n**Important**:\n- Node names **must** be in quotes\n- Node names are **case-sensitive**\n- Must match exact node name from workflow\n\n### $now - Current Timestamp\n\nAccess current date/time:\n\n```javascript\n{{$now}}\n{{$now.toFormat('yyyy-MM-dd')}}\n{{$now.toFormat('HH:mm:ss')}}\n{{$now.plus({days: 7})}}\n```\n\n### $env - Environment Variables\n\nAccess environment variables:\n\n```javascript\n{{$env.API_KEY}}\n{{$env.DATABASE_URL}}\n```\n\n---\n\n## ğŸš¨ CRITICAL: Webhook Data Structure\n\n**Most Common Mistake**: Webhook data is **NOT** at the root!\n\n### Webhook Node Output Structure\n\n```javascript\n{\n  \"headers\": {...},\n  \"params\": {...},\n  \"query\": {...},\n  \"body\": {           // âš ï¸ USER DATA IS HERE!\n    \"name\": \"John\",\n    \"email\": \"john@example.com\",\n    \"message\": \"Hello\"\n  }\n}\n```\n\n### Correct Webhook Data Access\n\n```javascript\nâŒ WRONG: {{$json.name}}\nâŒ WRONG: {{$json.email}}\n\nâœ… CORRECT: {{$json.body.name}}\nâœ… CORRECT: {{$json.body.email}}\nâœ… CORRECT: {{$json.body.message}}\n```\n\n**Why**: Webhook node wraps incoming data under `.body` property to preserve headers, params, and query parameters.\n\n---\n\n## Common Patterns\n\n### Access Nested Fields\n\n```javascript\n// Simple nesting\n{{$json.user.email}}\n\n// Array access\n{{$json.data[0].name}}\n{{$json.items[0].id}}\n\n// Bracket notation for spaces\n{{$json['field name']}}\n{{$json['user data']['first name']}}\n```\n\n### Reference Other Nodes\n\n```javascript\n// Node without spaces\n{{$node[\"Set\"].json.value}}\n\n// Node with spaces (common!)\n{{$node[\"HTTP Request\"].json.data}}\n{{$node[\"Respond to Webhook\"].json.message}}\n\n// Webhook node\n{{$node[\"Webhook\"].json.body.email}}\n```\n\n### Combine Variables\n\n```javascript\n// Concatenation (automatic)\nHello {{$json.body.name}}!\n\n// In URLs\nhttps://api.example.com/users/{{$json.body.user_id}}\n\n// In object properties\n{\n  \"name\": \"={{$json.body.name}}\",\n  \"email\": \"={{$json.body.email}}\"\n}\n```\n\n---\n\n## When NOT to Use Expressions\n\n### âŒ Code Nodes\n\nCode nodes use **direct JavaScript access**, NOT expressions!\n\n```javascript\n// âŒ WRONG in Code node\nconst email = '={{$json.email}}';\nconst name = '{{$json.body.name}}';\n\n// âœ… CORRECT in Code node\nconst email = $json.email;\nconst name = $json.body.name;\n\n// Or using Code node API\nconst email = $input.item.json.email;\nconst allItems = $input.all();\n```\n\n### âŒ Webhook Paths\n\n```javascript\n// âŒ WRONG\npath: \"{{$json.user_id}}/webhook\"\n\n// âœ… CORRECT\npath: \"user-webhook\"  // Static paths only\n```\n\n### âŒ Credential Fields\n\n```javascript\n// âŒ WRONG\napiKey: \"={{$env.API_KEY}}\"\n\n// âœ… CORRECT\nUse n8n credential system, not expressions\n```\n\n---\n\n## Validation Rules\n\n### 1. Always Use {{}}\n\nExpressions **must** be wrapped in double curly braces.\n\n```javascript\nâŒ $json.field\nâœ… {{$json.field}}\n```\n\n### 2. Use Quotes for Spaces\n\nField or node names with spaces require **bracket notation**:\n\n```javascript\nâŒ {{$json.field name}}\nâœ… {{$json['field name']}}\n\nâŒ {{$node.HTTP Request.json}}\nâœ… {{$node[\"HTTP Request\"].json}}\n```\n\n### 3. Match Exact Node Names\n\nNode references are **case-sensitive**:\n\n```javascript\nâŒ {{$node[\"http request\"].json}}  // lowercase\nâŒ {{$node[\"Http Request\"].json}}  // wrong case\nâœ… {{$node[\"HTTP Request\"].json}}  // exact match\n```\n\n### 4. No Nested {{}}\n\nDon't double-wrap expressions:\n\n```javascript\nâŒ {{{$json.field}}}\nâœ… {{$json.field}}\n```\n\n---\n\n## Common Mistakes\n\nFor complete error catalog with fixes, see [COMMON_MISTAKES.md](COMMON_MISTAKES.md)\n\n### Quick Fixes\n\n| Mistake | Fix |\n|---------|-----|\n| `$json.field` | `{{$json.field}}` |\n| `{{$json.field name}}` | `{{$json['field name']}}` |\n| `{{$node.HTTP Request}}` | `{{$node[\"HTTP Request\"]}}` |\n| `{{{$json.field}}}` | `{{$json.field}}` |\n| `{{$json.name}}` (webhook) | `{{$json.body.name}}` |\n| `'={{$json.email}}'` (Code node) | `$json.email` |\n\n---\n\n## Working Examples\n\nFor real workflow examples, see [EXAMPLES.md](EXAMPLES.md)\n\n### Example 1: Webhook to Slack\n\n**Webhook receives**:\n```json\n{\n  \"body\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"message\": \"Hello!\"\n  }\n}\n```\n\n**In Slack node text field**:\n```\nNew form submission!\n\nName: {{$json.body.name}}\nEmail: {{$json.body.email}}\nMessage: {{$json.body.message}}\n```\n\n### Example 2: HTTP Request to Email\n\n**HTTP Request returns**:\n```json\n{\n  \"data\": {\n    \"items\": [\n      {\"name\": \"Product 1\", \"price\": 29.99}\n    ]\n  }\n}\n```\n\n**In Email node** (reference HTTP Request):\n```\nProduct: {{$node[\"HTTP Request\"].json.data.items[0].name}}\nPrice: ${{$node[\"HTTP Request\"].json.data.items[0].price}}\n```\n\n### Example 3: Format Timestamp\n\n```javascript\n// Current date\n{{$now.toFormat('yyyy-MM-dd')}}\n// Result: 2025-10-20\n\n// Time\n{{$now.toFormat('HH:mm:ss')}}\n// Result: 14:30:45\n\n// Full datetime\n{{$now.toFormat('yyyy-MM-dd HH:mm')}}\n// Result: 2025-10-20 14:30\n```\n\n---\n\n## Data Type Handling\n\n### Arrays\n\n```javascript\n// First item\n{{$json.users[0].email}}\n\n// Array length\n{{$json.users.length}}\n\n// Last item\n{{$json.users[$json.users.length - 1].name}}\n```\n\n### Objects\n\n```javascript\n// Dot notation (no spaces)\n{{$json.user.email}}\n\n// Bracket notation (with spaces or dynamic)\n{{$json['user data'].email}}\n```\n\n### Strings\n\n```javascript\n// Concatenation (automatic)\nHello {{$json.name}}!\n\n// String methods\n{{$json.email.toLowerCase()}}\n{{$json.name.toUpperCase()}}\n```\n\n### Numbers\n\n```javascript\n// Direct use\n{{$json.price}}\n\n// Math operations\n{{$json.price * 1.1}}  // Add 10%\n{{$json.quantity + 5}}\n```\n\n---\n\n## Advanced Patterns\n\n### Conditional Content\n\n```javascript\n// Ternary operator\n{{$json.status === 'active' ? 'Active User' : 'Inactive User'}}\n\n// Default values\n{{$json.email || 'no-email@example.com'}}\n```\n\n### Date Manipulation\n\n```javascript\n// Add days\n{{$now.plus({days: 7}).toFormat('yyyy-MM-dd')}}\n\n// Subtract hours\n{{$now.minus({hours: 24}).toISO()}}\n\n// Set specific date\n{{DateTime.fromISO('2025-12-25').toFormat('MMMM dd, yyyy')}}\n```\n\n### String Manipulation\n\n```javascript\n// Substring\n{{$json.email.substring(0, 5)}}\n\n// Replace\n{{$json.message.replace('old', 'new')}}\n\n// Split and join\n{{$json.tags.split(',').join(', ')}}\n```\n\n---\n\n## Debugging Expressions\n\n### Test in Expression Editor\n\n1. Click field with expression\n2. Open expression editor (click \"fx\" icon)\n3. See live preview of result\n4. Check for errors highlighted in red\n\n### Common Error Messages\n\n**\"Cannot read property 'X' of undefined\"**\nâ†’ Parent object doesn't exist\nâ†’ Check your data path\n\n**\"X is not a function\"**\nâ†’ Trying to call method on non-function\nâ†’ Check variable type\n\n**Expression shows as literal text**\nâ†’ Missing {{ }}\nâ†’ Add curly braces\n\n---\n\n## Expression Helpers\n\n### Available Methods\n\n**String**:\n- `.toLowerCase()`, `.toUpperCase()`\n- `.trim()`, `.replace()`, `.substring()`\n- `.split()`, `.includes()`\n\n**Array**:\n- `.length`, `.map()`, `.filter()`\n- `.find()`, `.join()`, `.slice()`\n\n**DateTime** (Luxon):\n- `.toFormat()`, `.toISO()`, `.toLocal()`\n- `.plus()`, `.minus()`, `.set()`\n\n**Number**:\n- `.toFixed()`, `.toString()`\n- Math operations: `+`, `-`, `*`, `/`, `%`\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n- Always use {{ }} for dynamic content\n- Use bracket notation for field names with spaces\n- Reference webhook data from `.body`\n- Use $node for data from other nodes\n- Test expressions in expression editor\n\n### âŒ Don't\n\n- Don't use expressions in Code nodes\n- Don't forget quotes around node names with spaces\n- Don't double-wrap with extra {{ }}\n- Don't assume webhook data is at root (it's under .body!)\n- Don't use expressions in webhook paths or credentials\n\n---\n\n## Related Skills\n\n- **n8n MCP Tools Expert**: Learn how to validate expressions using MCP tools\n- **n8n Workflow Patterns**: See expressions in real workflow examples\n- **n8n Node Configuration**: Understand when expressions are needed\n\n---\n\n## Summary\n\n**Essential Rules**:\n1. Wrap expressions in {{ }}\n2. Webhook data is under `.body`\n3. No {{ }} in Code nodes\n4. Quote node names with spaces\n5. Node names are case-sensitive\n\n**Most Common Mistakes**:\n- Missing {{ }} â†’ Add braces\n- `{{$json.name}}` in webhooks â†’ Use `{{$json.body.name}}`\n- `{{$json.email}}` in Code â†’ Use `$json.email`\n- `{{$node.HTTP Request}}` â†’ Use `{{$node[\"HTTP Request\"]}}`\n\nFor more details, see:\n- [COMMON_MISTAKES.md](COMMON_MISTAKES.md) - Complete error catalog\n- [EXAMPLES.md](EXAMPLES.md) - Real workflow examples\n\n---\n\n**Need Help?** Reference the n8n expression documentation or use n8n-mcp validation tools to check your expressions.\n",
        "skills/n8n-mcp-tools-expert/README.md": "# n8n MCP Tools Expert\n\nExpert guide for using n8n-mcp MCP tools effectively.\n\n---\n\n## Purpose\n\nTeaches how to use n8n-mcp MCP server tools correctly for efficient workflow building.\n\n## Activates On\n\n- search nodes\n- find node\n- validate\n- MCP tools\n- template\n- workflow\n- n8n-mcp\n- tool selection\n\n## File Count\n\n5 files, ~1,150 lines total\n\n## Priority\n\n**HIGHEST** - Essential for correct MCP tool usage\n\n## Dependencies\n\n**n8n-mcp tools**: All of them! (40+ tools)\n\n**Related skills**:\n- n8n Expression Syntax (write expressions for workflows)\n- n8n Workflow Patterns (use tools to build patterns)\n- n8n Validation Expert (interpret validation results)\n- n8n Node Configuration (configure nodes found with tools)\n\n## Coverage\n\n### Core Topics\n- Tool selection guide (which tool for which task)\n- nodeType format differences (nodes-base.* vs n8n-nodes-base.*)\n- Validation profiles (minimal/runtime/ai-friendly/strict)\n- Smart parameters (branch, case for multi-output nodes)\n- Auto-sanitization system\n- Workflow management (15 operation types)\n- AI connection types (8 types)\n\n### Tool Categories\n- Node Discovery (search, list, essentials, info)\n- Configuration Validation (minimal, operation, workflow)\n- Workflow Management (create, update, validate)\n- Template Library (search, get)\n- Documentation (tools, database stats)\n\n## Evaluations\n\n5 scenarios (100% coverage expected):\n1. **eval-001**: Tool selection (search_nodes)\n2. **eval-002**: nodeType format (nodes-base.* prefix)\n3. **eval-003**: Validation workflow (profiles)\n4. **eval-004**: essentials vs info (5KB vs 100KB)\n5. **eval-005**: Smart parameters (branch, case)\n\n## Key Features\n\nâœ… **Tool Selection Guide**: Which tool to use for each task\nâœ… **Common Patterns**: Most effective tool usage sequences\nâœ… **Format Guidance**: nodeType format differences explained\nâœ… **Smart Parameters**: Semantic branch/case routing for multi-output nodes\nâœ… **Auto-Sanitization**: Explains automatic validation fixes\nâœ… **Comprehensive**: Covers all 40+ MCP tools\n\n## Files\n\n- **SKILL.md** (480 lines) - Core tool usage guide\n- **SEARCH_GUIDE.md** (220 lines) - Node discovery tools\n- **VALIDATION_GUIDE.md** (250 lines) - Validation tools and profiles\n- **WORKFLOW_GUIDE.md** (200 lines) - Workflow management\n- **README.md** (this file) - Skill metadata\n\n## What You'll Learn\n\n- Correct nodeType formats (nodes-base.* for search tools)\n- When to use get_node_essentials vs get_node_info\n- How to use validation profiles effectively\n- Smart parameters for multi-output nodes (IF/Switch)\n- Common tool usage patterns and workflows\n\n## Last Updated\n\n2025-10-20\n\n---\n\n**Part of**: n8n-skills repository\n**Conceived by**: Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n",
        "skills/n8n-mcp-tools-expert/SEARCH_GUIDE.md": "# Node Discovery Tools Guide\n\nComplete guide for finding and understanding n8n nodes.\n\n---\n\n## search_nodes (START HERE!)\n\n**Success Rate**: 99.9% | **Speed**: <20ms\n\n**Use when**: You know what you're looking for (keyword, service, use case)\n\n**Syntax**:\n```javascript\nsearch_nodes({\n  query: \"slack\",      // Required: search keywords\n  mode: \"OR\",          // Optional: OR (default), AND, FUZZY\n  limit: 20           // Optional: max results (default 20, max 100)\n})\n```\n\n**Returns**:\n```javascript\n{\n  \"query\": \"slack\",\n  \"results\": [\n    {\n      \"nodeType\": \"nodes-base.slack\",                    // For search/validate tools\n      \"workflowNodeType\": \"n8n-nodes-base.slack\",       // For workflow tools\n      \"displayName\": \"Slack\",\n      \"description\": \"Consume Slack API\",\n      \"category\": \"output\",\n      \"relevance\": \"high\"\n    }\n  ]\n}\n```\n\n**Tips**:\n- Common searches: webhook, http, database, email, slack, google, ai\n- OR mode (default): matches any word\n- AND mode: requires all words\n- FUZZY mode: typo-tolerant (finds \"slak\" â†’ Slack)\n\n---\n\n## get_node_essentials (RECOMMENDED!)\n\n**Success Rate**: 91.7% | **Speed**: <10ms | **Size**: ~5KB\n\n**Use when**: You've found the node and need configuration details\n\n**Syntax**:\n```javascript\nget_node_essentials({\n  nodeType: \"nodes-base.slack\",      // Required: SHORT prefix format\n  includeExamples: true              // Optional: get real template configs\n})\n```\n\n**Returns**:\n- Available operations and resources\n- Essential properties (10-20 most common)\n- Metadata (isAITool, isTrigger, hasCredentials)\n- Real examples from templates (if includeExamples: true)\n\n**Why use this**:\n- 5KB vs 100KB+ (get_node_info)\n- 91.7% success vs 80%\n- <10ms vs slower\n- Focused data (no information overload)\n\n---\n\n## get_node_info (USE SPARINGLY!)\n\n**Success Rate**: 80% âš ï¸ | **Size**: 100KB+\n\n**Use when**:\n- Debugging complex configuration\n- Need complete property schema\n- Exploring advanced features\n\n**Syntax**:\n```javascript\nget_node_info({\n  nodeType: \"nodes-base.httpRequest\"\n})\n```\n\n**Warning**: 20% failure rate! Use get_node_essentials instead for most cases.\n\n**Better alternatives**:\n1. get_node_essentials - operations list\n2. get_node_documentation - readable docs\n3. search_node_properties - specific property\n\n---\n\n## list_nodes (BROWSE BY CATEGORY)\n\n**Success Rate**: 99.6% | **Speed**: <20ms\n\n**Use when**: Exploring by category or listing all nodes\n\n**Syntax**:\n```javascript\nlist_nodes({\n  category: \"trigger\",        // Optional: filter by category\n  package: \"n8n-nodes-base\", // Optional: filter by package\n  limit: 200                 // Optional: default 50\n})\n```\n\n**Categories**:\n- `trigger` - Webhook, Schedule, Manual, etc. (108 total)\n- `transform` - Code, Set, Function, etc.\n- `output` - HTTP Request, Email, Slack, etc.\n- `input` - Read data sources\n- `AI` - AI-capable nodes (270 total)\n\n**Packages**:\n- `n8n-nodes-base` - Core nodes (437 total)\n- `@n8n/n8n-nodes-langchain` - AI nodes (100 total)\n\n---\n\n## search_node_properties (FIND SPECIFIC FIELDS)\n\n**Use when**: Looking for specific property in a node\n\n**Syntax**:\n```javascript\nsearch_node_properties({\n  nodeType: \"nodes-base.httpRequest\",\n  query: \"auth\"               // Find authentication properties\n})\n```\n\n**Returns**: Property paths and descriptions matching query\n\n**Common searches**: auth, header, body, json, url, method\n\n---\n\n## get_node_documentation (READABLE DOCS)\n\n**Coverage**: 88% of nodes (470/537)\n\n**Use when**: Need human-readable documentation with examples\n\n**Syntax**:\n```javascript\nget_node_documentation({\n  nodeType: \"nodes-base.slack\"\n})\n```\n\n**Returns**: Formatted docs with:\n- Usage examples\n- Authentication guide\n- Common patterns\n- Best practices\n\n**Note**: Better than raw schema for learning!\n\n---\n\n## Common Workflow: Finding & Configuring\n\n```\nStep 1: Search\nsearch_nodes({query: \"slack\"})\nâ†’ Returns: nodes-base.slack\n\nStep 2: Get Operations (18s avg thinking time)\nget_node_essentials({\n  nodeType: \"nodes-base.slack\",\n  includeExamples: true\n})\nâ†’ Returns: operations list + example configs\n\nStep 3: Validate Config\nvalidate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config: {resource: \"channel\", operation: \"create\"},\n  profile: \"runtime\"\n})\nâ†’ Returns: validation result\n\nStep 4: Use in Workflow\n(Configuration ready!)\n```\n\n**Most common pattern**: search â†’ essentials (18s average)\n\n---\n\n## Quick Comparison\n\n| Tool | When to Use | Success | Speed | Size |\n|------|-------------|---------|-------|------|\n| search_nodes | Find by keyword | 99.9% | <20ms | Small |\n| get_node_essentials | Get config | 91.7% | <10ms | 5KB |\n| get_node_info | Full schema | 80% âš ï¸ | Slow | 100KB+ |\n| list_nodes | Browse category | 99.6% | <20ms | Small |\n| get_node_documentation | Learn usage | N/A | Fast | Medium |\n\n**Best Practice**: search â†’ essentials â†’ validate\n\n---\n\n## nodeType Format (CRITICAL!)\n\n**Search/Validate Tools** (SHORT prefix):\n```javascript\n\"nodes-base.slack\"\n\"nodes-base.httpRequest\"\n\"nodes-langchain.agent\"\n```\n\n**Workflow Tools** (FULL prefix):\n```javascript\n\"n8n-nodes-base.slack\"\n\"n8n-nodes-base.httpRequest\"\n\"@n8n/n8n-nodes-langchain.agent\"\n```\n\n**Conversion**: search_nodes returns BOTH formats:\n```javascript\n{\n  \"nodeType\": \"nodes-base.slack\",          // Use with essentials\n  \"workflowNodeType\": \"n8n-nodes-base.slack\"  // Use with create_workflow\n}\n```\n\n---\n\n## Related\n\n- [VALIDATION_GUIDE.md](VALIDATION_GUIDE.md) - Validate node configs\n- [WORKFLOW_GUIDE.md](WORKFLOW_GUIDE.md) - Use nodes in workflows\n",
        "skills/n8n-mcp-tools-expert/SKILL.md": "---\nname: n8n-mcp-tools-expert\ndescription: Expert guide for using n8n-mcp MCP tools effectively. Use when searching for nodes, validating configurations, accessing templates, managing workflows, or using any n8n-mcp tool. Provides tool selection guidance, parameter formats, and common patterns.\n---\n\n# n8n MCP Tools Expert\n\nMaster guide for using n8n-mcp MCP server tools to build workflows.\n\n---\n\n## Tool Categories\n\nn8n-mcp provides **40+ tools** organized into categories:\n\n1. **Node Discovery** â†’ [SEARCH_GUIDE.md](SEARCH_GUIDE.md)\n2. **Configuration Validation** â†’ [VALIDATION_GUIDE.md](VALIDATION_GUIDE.md)\n3. **Workflow Management** â†’ [WORKFLOW_GUIDE.md](WORKFLOW_GUIDE.md)\n4. **Template Library** - Search and access 2,653 real workflows\n5. **Documentation** - Get tool and node documentation\n\n---\n\n## Quick Reference\n\n### Most Used Tools (by success rate)\n\n| Tool | Use When | Success Rate | Speed |\n|------|----------|--------------|-------|\n| `search_nodes` | Finding nodes by keyword | 99.9% | <20ms |\n| `get_node_essentials` | Understanding node operations | 91.7% | <10ms |\n| `validate_node_operation` | Checking configurations | Varies | <100ms |\n| `n8n_create_workflow` | Creating workflows | 96.8% | 100-500ms |\n| `n8n_update_partial_workflow` | Editing workflows (MOST USED!) | 99.0% | 50-200ms |\n| `validate_workflow` | Checking complete workflow | 95.5% | 100-500ms |\n\n---\n\n## Tool Selection Guide\n\n### Finding the Right Node\n\n**Workflow**:\n```\n1. search_nodes({query: \"keyword\"})\n2. get_node_essentials({nodeType: \"nodes-base.name\"})\n3. [Optional] get_node_documentation({nodeType: \"nodes-base.name\"})\n```\n\n**Example**:\n```javascript\n// Step 1: Search\nsearch_nodes({query: \"slack\"})\n// Returns: nodes-base.slack\n\n// Step 2: Get details (18s avg between steps)\nget_node_essentials({nodeType: \"nodes-base.slack\"})\n// Returns: operations, properties, examples\n```\n\n**Common pattern**: search â†’ essentials (18s average)\n\n### Validating Configuration\n\n**Workflow**:\n```\n1. validate_node_minimal({nodeType, config: {}}) - Check required fields\n2. validate_node_operation({nodeType, config, profile: \"runtime\"}) - Full validation\n3. [Repeat] Fix errors, validate again\n```\n\n**Common pattern**: validate â†’ fix â†’ validate (23s thinking, 58s fixing per cycle)\n\n### Managing Workflows\n\n**Workflow**:\n```\n1. n8n_create_workflow({name, nodes, connections})\n2. n8n_validate_workflow({id})\n3. n8n_update_partial_workflow({id, operations: [...]})\n4. n8n_validate_workflow({id}) again\n```\n\n**Common pattern**: iterative updates (56s average between edits)\n\n---\n\n## Critical: nodeType Formats\n\n**Two different formats** for different tools!\n\n### Format 1: Search/Validate Tools\n```javascript\n// Use SHORT prefix\n\"nodes-base.slack\"\n\"nodes-base.httpRequest\"\n\"nodes-base.webhook\"\n\"nodes-langchain.agent\"\n```\n\n**Tools that use this**:\n- search_nodes (returns this format)\n- get_node_essentials\n- get_node_info\n- validate_node_minimal\n- validate_node_operation\n- get_property_dependencies\n\n### Format 2: Workflow Tools\n```javascript\n// Use FULL prefix\n\"n8n-nodes-base.slack\"\n\"n8n-nodes-base.httpRequest\"\n\"n8n-nodes-base.webhook\"\n\"@n8n/n8n-nodes-langchain.agent\"\n```\n\n**Tools that use this**:\n- n8n_create_workflow\n- n8n_update_partial_workflow\n- list_node_templates\n\n### Conversion\n\n```javascript\n// search_nodes returns BOTH formats\n{\n  \"nodeType\": \"nodes-base.slack\",          // For search/validate tools\n  \"workflowNodeType\": \"n8n-nodes-base.slack\"  // For workflow tools\n}\n```\n\n---\n\n## Common Mistakes\n\n### âŒ Mistake 1: Wrong nodeType Format\n\n**Problem**: \"Node not found\" error\n\n```javascript\nâŒ get_node_essentials({nodeType: \"slack\"})  // Missing prefix\nâŒ get_node_essentials({nodeType: \"n8n-nodes-base.slack\"})  // Wrong prefix\n\nâœ… get_node_essentials({nodeType: \"nodes-base.slack\"})  // Correct!\n```\n\n### âŒ Mistake 2: Using get_node_info Instead of get_node_essentials\n\n**Problem**: 20% failure rate, slow response, huge payload\n\n```javascript\nâŒ get_node_info({nodeType: \"nodes-base.slack\"})\n// Returns: 100KB+ data, 20% chance of failure\n\nâœ… get_node_essentials({nodeType: \"nodes-base.slack\"})\n// Returns: 5KB focused data, 91.7% success, <10ms\n```\n\n**When to use get_node_info**:\n- Debugging complex configuration issues\n- Need complete property schema\n- Exploring advanced features\n\n**Better alternatives**:\n1. get_node_essentials - for operations list\n2. get_node_documentation - for readable docs\n3. search_node_properties - for specific property\n\n### âŒ Mistake 3: Not Using Validation Profiles\n\n**Problem**: Too many false positives OR missing real errors\n\n**Profiles**:\n- `minimal` - Only required fields (fast, permissive)\n- `runtime` - Values + types (recommended for pre-deployment)\n- `ai-friendly` - Reduce false positives (for AI configuration)\n- `strict` - Maximum validation (for production)\n\n```javascript\nâŒ validate_node_operation({nodeType, config})  // Uses default\n\nâœ… validate_node_operation({nodeType, config, profile: \"runtime\"})  // Explicit\n```\n\n### âŒ Mistake 4: Ignoring Auto-Sanitization\n\n**What happens**: ALL nodes sanitized on ANY workflow update\n\n**Auto-fixes**:\n- Binary operators (equals, contains) â†’ removes singleValue\n- Unary operators (isEmpty, isNotEmpty) â†’ adds singleValue: true\n- IF/Switch nodes â†’ adds missing metadata\n\n**Cannot fix**:\n- Broken connections\n- Branch count mismatches\n- Paradoxical corrupt states\n\n```javascript\n// After ANY update, auto-sanitization runs on ALL nodes\nn8n_update_partial_workflow({id, operations: [...]})\n// â†’ Automatically fixes operator structures\n```\n\n### âŒ Mistake 5: Not Using Smart Parameters\n\n**Problem**: Complex sourceIndex calculations for multi-output nodes\n\n**Old way** (manual):\n```javascript\n// IF node connection\n{\n  type: \"addConnection\",\n  source: \"IF\",\n  target: \"Handler\",\n  sourceIndex: 0  // Which output? Hard to remember!\n}\n```\n\n**New way** (smart parameters):\n```javascript\n// IF node - semantic branch names\n{\n  type: \"addConnection\",\n  source: \"IF\",\n  target: \"True Handler\",\n  branch: \"true\"  // Clear and readable!\n}\n\n{\n  type: \"addConnection\",\n  source: \"IF\",\n  target: \"False Handler\",\n  branch: \"false\"\n}\n\n// Switch node - semantic case numbers\n{\n  type: \"addConnection\",\n  source: \"Switch\",\n  target: \"Handler A\",\n  case: 0\n}\n```\n\n---\n\n## Tool Usage Patterns\n\n### Pattern 1: Node Discovery (Most Common)\n\n**Common workflow**: 18s average between steps\n\n```javascript\n// Step 1: Search (fast!)\nconst results = await search_nodes({\n  query: \"slack\",\n  mode: \"OR\",  // Default: any word matches\n  limit: 20\n});\n// â†’ Returns: nodes-base.slack, nodes-base.slackTrigger\n\n// Step 2: Get details (~18s later, user reviewing results)\nconst details = await get_node_essentials({\n  nodeType: \"nodes-base.slack\",\n  includeExamples: true  // Get real template configs\n});\n// â†’ Returns: operations, properties, metadata\n```\n\n### Pattern 2: Validation Loop\n\n**Typical cycle**: 23s thinking, 58s fixing\n\n```javascript\n// Step 1: Validate\nconst result = await validate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config: {\n    resource: \"channel\",\n    operation: \"create\"\n  },\n  profile: \"runtime\"\n});\n\n// Step 2: Check errors (~23s thinking)\nif (!result.valid) {\n  console.log(result.errors);  // \"Missing required field: name\"\n}\n\n// Step 3: Fix config (~58s fixing)\nconfig.name = \"general\";\n\n// Step 4: Validate again\nawait validate_node_operation({...});  // Repeat until clean\n```\n\n### Pattern 3: Workflow Editing\n\n**Most used update tool**: 99.0% success rate, 56s average between edits\n\n```javascript\n// Iterative workflow building (NOT one-shot!)\n// Edit 1\nawait n8n_update_partial_workflow({\n  id: \"workflow-id\",\n  operations: [{type: \"addNode\", node: {...}}]\n});\n\n// ~56s later...\n\n// Edit 2\nawait n8n_update_partial_workflow({\n  id: \"workflow-id\",\n  operations: [{type: \"addConnection\", source: \"...\", target: \"...\"}]\n});\n\n// ~56s later...\n\n// Edit 3 (validation)\nawait n8n_validate_workflow({id: \"workflow-id\"});\n```\n\n---\n\n## Detailed Guides\n\n### Node Discovery Tools\nSee [SEARCH_GUIDE.md](SEARCH_GUIDE.md) for:\n- search_nodes (99.9% success)\n- get_node_essentials vs get_node_info\n- list_nodes by category\n- search_node_properties for specific fields\n\n### Validation Tools\nSee [VALIDATION_GUIDE.md](VALIDATION_GUIDE.md) for:\n- Validation profiles explained\n- validate_node_minimal vs validate_node_operation\n- validate_workflow complete structure\n- Auto-sanitization system\n- Handling validation errors\n\n### Workflow Management\nSee [WORKFLOW_GUIDE.md](WORKFLOW_GUIDE.md) for:\n- n8n_create_workflow\n- n8n_update_partial_workflow (15 operation types!)\n- Smart parameters (branch, case)\n- AI connection types (8 types)\n- cleanStaleConnections recovery\n\n---\n\n## Template Usage\n\n### Search Templates\n\n```javascript\n// Search by keyword\nsearch_templates({\n  query: \"webhook slack\",\n  limit: 20\n});\n// â†’ Returns: 1,085 templates with metadata\n\n// Get template details\nget_template({\n  templateId: 2947,  // Weather to Slack\n  mode: \"structure\"  // or \"full\" for complete JSON\n});\n```\n\n### Template Metadata\n\nTemplates include:\n- Complexity (simple, medium, complex)\n- Setup time estimate\n- Required services\n- Categories and use cases\n- View counts (popularity)\n\n---\n\n## Self-Help Tools\n\n### Get Tool Documentation\n\n```javascript\n// List all tools\ntools_documentation()\n\n// Specific tool details\ntools_documentation({\n  topic: \"search_nodes\",\n  depth: \"full\"\n})\n```\n\n### Health Check\n\n```javascript\n// Verify MCP server connectivity\nn8n_health_check()\n// â†’ Returns: status, features, API availability, version\n```\n\n### Database Statistics\n\n```javascript\nget_database_statistics()\n// â†’ Returns: 537 nodes, 270 AI tools, 2,653 templates\n```\n\n---\n\n## Tool Availability\n\n**Always Available** (no n8n API needed):\n- search_nodes, list_nodes, get_node_essentials âœ…\n- validate_node_minimal, validate_node_operation âœ…\n- validate_workflow, get_property_dependencies âœ…\n- search_templates, get_template, list_tasks âœ…\n- tools_documentation, get_database_statistics âœ…\n\n**Requires n8n API** (N8N_API_URL + N8N_API_KEY):\n- n8n_create_workflow âš ï¸\n- n8n_update_partial_workflow âš ï¸\n- n8n_validate_workflow (by ID) âš ï¸\n- n8n_list_workflows, n8n_get_workflow âš ï¸\n- n8n_trigger_webhook_workflow âš ï¸\n\nIf API tools unavailable, use templates and validation-only workflows.\n\n---\n\n## Performance Characteristics\n\n| Tool | Response Time | Payload Size | Reliability |\n|------|---------------|--------------|-------------|\n| search_nodes | <20ms | Small | 99.9% |\n| list_nodes | <20ms | Small | 99.6% |\n| get_node_essentials | <10ms | ~5KB | 91.7% |\n| get_node_info | Varies | 100KB+ | 80% âš ï¸ |\n| validate_node_minimal | <100ms | Small | 97.4% |\n| validate_node_operation | <100ms | Medium | Varies |\n| validate_workflow | 100-500ms | Medium | 95.5% |\n| n8n_create_workflow | 100-500ms | Medium | 96.8% |\n| n8n_update_partial_workflow | 50-200ms | Small | 99.0% |\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n- Use get_node_essentials over get_node_info (91.7% vs 80%)\n- Specify validation profile explicitly\n- Use smart parameters (branch, case) for clarity\n- Follow search â†’ essentials â†’ validate workflow\n- Iterate workflows (avg 56s between edits)\n- Validate after every significant change\n- Use includeExamples: true for real configs\n\n### âŒ Don't\n\n- Use get_node_info unless necessary (20% failure rate!)\n- Forget nodeType prefix (nodes-base.*)\n- Skip validation profiles (use \"runtime\")\n- Try to build workflows in one shot (iterate!)\n- Ignore auto-sanitization behavior\n- Use full prefix (n8n-nodes-base.*) with search tools\n\n---\n\n## Summary\n\n**Most Important**:\n1. Use **get_node_essentials**, not get_node_info (5KB vs 100KB, 91.7% vs 80%)\n2. nodeType formats differ: `nodes-base.*` (search) vs `n8n-nodes-base.*` (workflows)\n3. Specify **validation profiles** (runtime recommended)\n4. Use **smart parameters** (branch=\"true\", case=0)\n5. **Auto-sanitization** runs on ALL nodes during updates\n6. Workflows are built **iteratively** (56s avg between edits)\n\n**Common Workflow**:\n1. search_nodes â†’ find node\n2. get_node_essentials â†’ understand config\n3. validate_node_operation â†’ check config\n4. n8n_create_workflow â†’ build\n5. n8n_validate_workflow â†’ verify\n6. n8n_update_partial_workflow â†’ iterate\n\nFor details, see:\n- [SEARCH_GUIDE.md](SEARCH_GUIDE.md) - Node discovery\n- [VALIDATION_GUIDE.md](VALIDATION_GUIDE.md) - Configuration validation\n- [WORKFLOW_GUIDE.md](WORKFLOW_GUIDE.md) - Workflow management\n\n---\n\n**Related Skills**:\n- n8n Expression Syntax - Write expressions in workflow fields\n- n8n Workflow Patterns - Architectural patterns from templates\n- n8n Validation Expert - Interpret validation errors\n- n8n Node Configuration - Operation-specific requirements\n",
        "skills/n8n-mcp-tools-expert/VALIDATION_GUIDE.md": "# Configuration Validation Tools Guide\n\nComplete guide for validating node configurations and workflows.\n\n---\n\n## Validation Philosophy\n\n**Validate early, validate often**\n\nValidation is typically iterative with validate â†’ fix cycles\n\n---\n\n## validate_node_minimal (QUICK CHECK)\n\n**Success Rate**: 97.4% | **Speed**: <100ms\n\n**Use when**: Checking what fields are required\n\n**Syntax**:\n```javascript\nvalidate_node_minimal({\n  nodeType: \"nodes-base.slack\",\n  config: {}  // Empty to see all required fields\n})\n```\n\n**Returns**:\n```javascript\n{\n  \"valid\": true,           // Usually true (most nodes have no strict requirements)\n  \"missingRequiredFields\": []\n}\n```\n\n**When to use**: Planning configuration, seeing basic requirements\n\n---\n\n## validate_node_operation (FULL VALIDATION)\n\n**Success Rate**: Varies | **Speed**: <100ms\n\n**Use when**: Validating actual configuration before deployment\n\n**Syntax**:\n```javascript\nvalidate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config: {\n    resource: \"channel\",\n    operation: \"create\",\n    channel: \"general\"\n  },\n  profile: \"runtime\"  // Recommended!\n})\n```\n\n### Validation Profiles\n\nChoose based on your stage:\n\n**minimal** - Only required fields\n- Fastest\n- Most permissive\n- Use: Quick checks during editing\n\n**runtime** - Values + types (**RECOMMENDED**)\n- Balanced validation\n- Catches real errors\n- Use: Pre-deployment validation\n\n**ai-friendly** - Reduce false positives\n- For AI-generated configs\n- Tolerates minor issues\n- Use: When AI configures nodes\n\n**strict** - Maximum validation\n- Strictest rules\n- May have false positives\n- Use: Production deployment\n\n### Returns\n\n```javascript\n{\n  \"valid\": false,\n  \"errors\": [\n    {\n      \"type\": \"missing_required\",\n      \"property\": \"name\",\n      \"message\": \"Channel name is required\",\n      \"fix\": \"Provide a channel name (lowercase, no spaces, 1-80 characters)\"\n    }\n  ],\n  \"warnings\": [\n    {\n      \"type\": \"best_practice\",\n      \"property\": \"errorHandling\",\n      \"message\": \"Slack API can have rate limits\",\n      \"suggestion\": \"Add onError: 'continueRegularOutput' with retryOnFail\"\n    }\n  ],\n  \"suggestions\": [],\n  \"summary\": {\n    \"hasErrors\": true,\n    \"errorCount\": 1,\n    \"warningCount\": 1\n  }\n}\n```\n\n### Error Types\n\n- `missing_required` - Must fix\n- `invalid_value` - Must fix\n- `type_mismatch` - Must fix\n- `best_practice` - Should fix (warning)\n- `suggestion` - Optional improvement\n\n---\n\n## validate_workflow (STRUCTURE VALIDATION)\n\n**Success Rate**: 95.5% | **Speed**: 100-500ms\n\n**Use when**: Checking complete workflow before execution\n\n**Syntax**:\n```javascript\nvalidate_workflow({\n  workflow: {\n    nodes: [...],        // Array of nodes\n    connections: {...}   // Connections object\n  },\n  options: {\n    validateNodes: true,       // Default: true\n    validateConnections: true, // Default: true\n    validateExpressions: true, // Default: true\n    profile: \"runtime\"         // For node validation\n  }\n})\n```\n\n**Validates**:\n- Node configurations\n- Connection validity (no broken references)\n- Expression syntax ({{ }} patterns)\n- Workflow structure (triggers, flow)\n- AI connections (8 types)\n\n**Returns**: Comprehensive validation report with errors, warnings, suggestions\n\n---\n\n## Validation Loop Pattern\n\n**Typical cycle**: 23s thinking, 58s fixing\n\n```\n1. Configure node\n   â†“\n2. validate_node_operation (23s thinking about errors)\n   â†“\n3. Fix errors\n   â†“\n4. validate_node_operation again (58s fixing)\n   â†“\n5. Repeat until valid\n```\n\n**Example**:\n```javascript\n// Iteration 1\nlet config = {\n  resource: \"channel\",\n  operation: \"create\"\n};\n\nconst result1 = validate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Error: Missing \"name\"\n\n// Iteration 2 (~58s later)\nconfig.name = \"general\";\n\nconst result2 = validate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Valid!\n```\n\n---\n\n## Auto-Sanitization System\n\n**When it runs**: On ANY workflow update (create or update_partial)\n\n**What it fixes** (automatically on ALL nodes):\n1. Binary operators (equals, contains, greaterThan) â†’ removes `singleValue`\n2. Unary operators (isEmpty, isNotEmpty, true, false) â†’ adds `singleValue: true`\n3. Invalid operator structures â†’ corrects to proper format\n4. IF v2.2+ nodes â†’ adds complete `conditions.options` metadata\n5. Switch v3.2+ nodes â†’ adds complete `conditions.options` for all rules\n\n**What it CANNOT fix**:\n- Broken connections (references to non-existent nodes)\n- Branch count mismatches (3 Switch rules but only 2 outputs)\n- Paradoxical corrupt states (API returns corrupt, rejects updates)\n\n**Example**:\n```javascript\n// Before auto-sanitization\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\",\n  \"singleValue\": true  // âŒ Binary operators shouldn't have this\n}\n\n// After auto-sanitization (automatic!)\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\"\n  // singleValue removed automatically\n}\n```\n\n**Recovery tools**:\n- `cleanStaleConnections` operation - removes broken connections\n- `n8n_autofix_workflow` - preview/apply fixes\n\n---\n\n## Binary vs Unary Operators\n\n**Binary operators** (compare two values):\n- equals, notEquals, contains, notContains\n- greaterThan, lessThan, startsWith, endsWith\n- **Must NOT have** `singleValue: true`\n\n**Unary operators** (check single value):\n- isEmpty, isNotEmpty, true, false\n- **Must have** `singleValue: true`\n\n**Auto-sanitization fixes these automatically!**\n\n---\n\n## Handling Validation Errors\n\n### Process\n\n```\n1. Read error message carefully\n2. Check if it's a known false positive\n3. Fix real errors\n4. Validate again\n5. Iterate until clean\n```\n\n### Common Errors\n\n**\"Required field missing\"**\nâ†’ Add the field with appropriate value\n\n**\"Invalid value\"**\nâ†’ Check allowed values in essentials/documentation\n\n**\"Type mismatch\"**\nâ†’ Convert to correct type (string/number/boolean)\n\n**\"Cannot have singleValue\"**\nâ†’ Auto-sanitization will fix on next update\n\n**\"Missing operator metadata\"**\nâ†’ Auto-sanitization will fix on next update\n\n### False Positives\n\nSome validation warnings may be acceptable:\n- Optional best practices\n- Node-specific edge cases\n- Profile-dependent issues\n\nUse **ai-friendly** profile to reduce false positives.\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n- Use **runtime** profile for pre-deployment\n- Validate after every configuration change\n- Fix errors immediately (avg 58s)\n- Iterate validation loop\n- Trust auto-sanitization for operator issues\n- Use minimal profile for quick checks\n- Complete workflow activation manually in n8n UI (API/MCP cannot activate workflows)\n\n### âŒ Don't\n\n- Skip validation before deployment\n- Ignore error messages\n- Use strict profile during development (too many warnings)\n- Assume validation passed (check result)\n- Try to manually fix auto-sanitization issues\n\n---\n\n## Example: Complete Validation Workflow\n\n```javascript\n// Step 1: Get node requirements\nvalidate_node_minimal({\n  nodeType: \"nodes-base.slack\",\n  config: {}\n});\n// â†’ Know what's required\n\n// Step 2: Configure node\nconst config = {\n  resource: \"message\",\n  operation: \"post\",\n  channel: \"#general\",\n  text: \"Hello!\"\n};\n\n// Step 3: Validate configuration\nconst result = validate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n\n// Step 4: Check result\nif (result.valid) {\n  console.log(\"âœ… Configuration valid!\");\n} else {\n  console.log(\"âŒ Errors:\", result.errors);\n  // Fix and validate again\n}\n\n// Step 5: Validate in workflow context\nvalidate_workflow({\n  workflow: {\n    nodes: [{...config as node...}],\n    connections: {...}\n  }\n});\n```\n\n---\n\n## Summary\n\n**Key Points**:\n1. Use **runtime** profile (balanced validation)\n2. Validation loop: validate â†’ fix (58s) â†’ validate again\n3. Auto-sanitization fixes operator structures automatically\n4. Binary operators â‰  singleValue, Unary operators = singleValue: true\n5. Iterate until validation passes\n\n**Tool Selection**:\n- **validate_node_minimal**: Quick check\n- **validate_node_operation**: Full config validation (**use this!**)\n- **validate_workflow**: Complete workflow check\n\n**Related**:\n- [SEARCH_GUIDE.md](SEARCH_GUIDE.md) - Find nodes\n- [WORKFLOW_GUIDE.md](WORKFLOW_GUIDE.md) - Build workflows\n",
        "skills/n8n-mcp-tools-expert/WORKFLOW_GUIDE.md": "# Workflow Management Tools Guide\n\nComplete guide for creating, updating, and managing n8n workflows.\n\n---\n\n## Tool Availability\n\n**âš ï¸ Requires n8n API**: All tools in this guide need `N8N_API_URL` and `N8N_API_KEY` configured.\n\nIf unavailable, use template examples and validation-only workflows.\n\n---\n\n## n8n_create_workflow\n\n**Success Rate**: 96.8% | **Speed**: 100-500ms\n\n**Use when**: Creating new workflows from scratch\n\n**Syntax**:\n```javascript\nn8n_create_workflow({\n  name: \"Webhook to Slack\",  // Required\n  nodes: [...],              // Required: array of nodes\n  connections: {...},        // Required: connections object\n  settings: {...}            // Optional: workflow settings\n})\n```\n\n**Returns**: Created workflow with ID\n\n**Example**:\n```javascript\nn8n_create_workflow({\n  name: \"Webhook to Slack\",\n  nodes: [\n    {\n      id: \"webhook-1\",\n      name: \"Webhook\",\n      type: \"n8n-nodes-base.webhook\",  // Full prefix!\n      typeVersion: 1,\n      position: [250, 300],\n      parameters: {\n        path: \"slack-notify\",\n        httpMethod: \"POST\"\n      }\n    },\n    {\n      id: \"slack-1\",\n      name: \"Slack\",\n      type: \"n8n-nodes-base.slack\",\n      typeVersion: 1,\n      position: [450, 300],\n      parameters: {\n        resource: \"message\",\n        operation: \"post\",\n        channel: \"#general\",\n        text: \"={{$json.body.message}}\"\n      }\n    }\n  ],\n  connections: {\n    \"Webhook\": {\n      \"main\": [[{node: \"Slack\", type: \"main\", index: 0}]]\n    }\n  }\n})\n```\n\n**Notes**:\n- Workflows created **inactive** (must activate separately)\n- Auto-sanitization runs on creation\n- Validate before creating for best results\n\n---\n\n## n8n_update_partial_workflow (MOST USED!)\n\n**Success Rate**: 99.0% | **Speed**: 50-200ms | **Uses**: 38,287 (most used tool!)\n\n**Use when**: Making incremental changes to workflows\n\n**Common pattern**: 56s average between edits (iterative building!)\n\n### 15 Operation Types\n\n**Node Operations** (6 types):\n1. `addNode` - Add new node\n2. `removeNode` - Remove node by ID or name\n3. `updateNode` - Update node properties\n4. `moveNode` - Change position\n5. `enableNode` - Enable disabled node\n6. `disableNode` - Disable active node\n\n**Connection Operations** (5 types):\n7. `addConnection` - Connect nodes\n8. `removeConnection` - Remove connection\n9. `rewireConnection` - Change target\n10. `cleanStaleConnections` - Auto-remove broken connections\n11. `replaceConnections` - Replace entire connections object\n\n**Metadata Operations** (4 types):\n12. `updateSettings` - Workflow settings\n13. `updateName` - Rename workflow\n14. `addTag` - Add tag\n15. `removeTag` - Remove tag\n\n### Smart Parameters (NEW!)\n\n**IF nodes** - Use semantic branch names:\n```javascript\n{\n  type: \"addConnection\",\n  source: \"IF\",\n  target: \"True Handler\",\n  branch: \"true\"  // Instead of sourceIndex: 0\n}\n\n{\n  type: \"addConnection\",\n  source: \"IF\",\n  target: \"False Handler\",\n  branch: \"false\"  // Instead of sourceIndex: 1\n}\n```\n\n**Switch nodes** - Use semantic case numbers:\n```javascript\n{\n  type: \"addConnection\",\n  source: \"Switch\",\n  target: \"Handler A\",\n  case: 0\n}\n\n{\n  type: \"addConnection\",\n  source: \"Switch\",\n  target: \"Handler B\",\n  case: 1\n}\n```\n\n### AI Connection Types (8 types)\n\n**Full support** for AI workflows:\n\n```javascript\n// Language Model\n{\n  type: \"addConnection\",\n  source: \"OpenAI Chat Model\",\n  target: \"AI Agent\",\n  sourceOutput: \"ai_languageModel\"\n}\n\n// Tool\n{\n  type: \"addConnection\",\n  source: \"HTTP Request Tool\",\n  target: \"AI Agent\",\n  sourceOutput: \"ai_tool\"\n}\n\n// Memory\n{\n  type: \"addConnection\",\n  source: \"Window Buffer Memory\",\n  target: \"AI Agent\",\n  sourceOutput: \"ai_memory\"\n}\n\n// All 8 types:\n// - ai_languageModel\n// - ai_tool\n// - ai_memory\n// - ai_outputParser\n// - ai_embedding\n// - ai_vectorStore\n// - ai_document\n// - ai_textSplitter\n```\n\n### Example Usage\n\n```javascript\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  operations: [\n    // Add node\n    {\n      type: \"addNode\",\n      node: {\n        name: \"Transform\",\n        type: \"n8n-nodes-base.set\",\n        position: [400, 300],\n        parameters: {}\n      }\n    },\n    // Connect it (smart parameter)\n    {\n      type: \"addConnection\",\n      source: \"IF\",\n      target: \"Transform\",\n      branch: \"true\"  // Clear and semantic!\n    }\n  ]\n})\n```\n\n### Cleanup & Recovery\n\n**cleanStaleConnections** - Remove broken connections:\n```javascript\n{\n  type: \"cleanStaleConnections\"\n}\n```\n\n**Best-effort mode** - Apply what works:\n```javascript\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  operations: [...],\n  continueOnError: true  // Don't fail if some operations fail\n})\n```\n\n---\n\n## n8n_validate_workflow (by ID)\n\n**Success Rate**: 99.7% | **Speed**: Network-dependent\n\n**Use when**: Validating workflow stored in n8n\n\n**Syntax**:\n```javascript\nn8n_validate_workflow({\n  id: \"workflow-id\",\n  options: {\n    validateNodes: true,\n    validateConnections: true,\n    validateExpressions: true,\n    profile: \"runtime\"\n  }\n})\n```\n\n**Returns**: Same as validate_workflow (from validation guide)\n\n---\n\n## Workflow Lifecycle\n\n**Standard pattern**:\n```\n1. CREATE\n   n8n_create_workflow({...})\n   â†’ Returns workflow ID\n\n2. VALIDATE\n   n8n_validate_workflow({id})\n   â†’ Check for errors\n\n3. EDIT (iterative! 56s avg between edits)\n   n8n_update_partial_workflow({id, operations: [...]})\n   â†’ Make changes\n\n4. VALIDATE AGAIN\n   n8n_validate_workflow({id})\n   â†’ Verify changes\n\n5. ACTIVATE (when ready)\n   âš ï¸ **IMPORTANT LIMITATION**: Workflow activation is NOT supported via API or MCP.\n   Users must activate workflows manually in the n8n UI.\n\n   The following operation will NOT activate the workflow:\n   n8n_update_partial_workflow({id, operations: [{\n     type: \"updateSettings\",\n     settings: {active: true}\n   }]})\n\n   **Manual activation required**: Navigate to workflow in n8n UI and toggle activation.\n\n6. MONITOR\n   n8n_list_executions({workflowId: id})\n   n8n_get_execution({id: execution_id})\n```\n\n**Deployment Note**: After creating and validating workflows via MCP, inform users they must:\n1. Open the workflow in n8n UI (provide workflow ID)\n2. Review the workflow configuration\n3. Manually activate the workflow using the activation toggle\n\n---\n\n## Common Patterns from Telemetry\n\n### Pattern 1: Edit â†’ Validate (7,841 occurrences)\n\n```javascript\n// Edit\nn8n_update_partial_workflow({...})\n// â†“ 23s (thinking about what to validate)\n// Validate\nn8n_validate_workflow({id})\n```\n\n### Pattern 2: Validate â†’ Fix (7,266 occurrences)\n\n```javascript\n// Validate\nn8n_validate_workflow({id})\n// â†“ 58s (fixing errors)\n// Fix\nn8n_update_partial_workflow({...})\n```\n\n### Pattern 3: Iterative Building (31,464 occurrences)\n\n```javascript\nupdate â†’ update â†’ update â†’ ... (56s avg between edits)\n```\n\n**This shows**: Workflows are built **iteratively**, not in one shot!\n\n---\n\n## Retrieval Tools\n\n### n8n_get_workflow\n```javascript\nn8n_get_workflow({id: \"workflow-id\"})\n// Returns: Complete workflow JSON\n```\n\n### n8n_get_workflow_structure\n```javascript\nn8n_get_workflow_structure({id: \"workflow-id\"})\n// Returns: Nodes + connections only (no parameters)\n```\n\n### n8n_get_workflow_minimal\n```javascript\nn8n_get_workflow_minimal({id: \"workflow-id\"})\n// Returns: ID, name, active, tags only (fast!)\n```\n\n### n8n_list_workflows\n```javascript\nn8n_list_workflows({\n  active: true,  // Optional: filter by status\n  limit: 100,    // Optional: max results\n  tags: [\"production\"]  // Optional: filter by tags\n})\n```\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n- Build workflows **iteratively** (avg 56s between edits)\n- Use **smart parameters** (branch, case) for clarity\n- Validate **after** significant changes\n- Use **atomic mode** (default) for critical updates\n- Specify **sourceOutput** for AI connections\n- Clean stale connections after node renames/deletions\n\n### âŒ Don't\n\n- Try to build workflows in one shot\n- Use sourceIndex when branch/case available\n- Skip validation before activation\n- Forget to test workflows after creation\n- Ignore auto-sanitization behavior\n\n---\n\n## Summary\n\n**Most Important**:\n1. **n8n_update_partial_workflow** is most-used tool (38,287 uses, 99.0% success)\n2. Workflows built **iteratively** (56s avg between edits)\n3. Use **smart parameters** (branch=\"true\", case=0) for clarity\n4. **AI connections** supported (8 types with sourceOutput)\n5. **Auto-sanitization** runs on all operations\n6. Validate frequently (7,841 edit â†’ validate patterns)\n\n**Related**:\n- [SEARCH_GUIDE.md](SEARCH_GUIDE.md) - Find nodes to add\n- [VALIDATION_GUIDE.md](VALIDATION_GUIDE.md) - Validate workflows\n",
        "skills/n8n-node-configuration/DEPENDENCIES.md": "# Property Dependencies Guide\n\nDeep dive into n8n property dependencies and displayOptions mechanism.\n\n---\n\n## What Are Property Dependencies?\n\n**Definition**: Rules that control when fields are visible or required based on other field values.\n\n**Mechanism**: `displayOptions` in node schema\n\n**Purpose**:\n- Show relevant fields only\n- Hide irrelevant fields\n- Simplify configuration UX\n- Prevent invalid configurations\n\n---\n\n## displayOptions Structure\n\n### Basic Format\n\n```javascript\n{\n  \"name\": \"fieldName\",\n  \"type\": \"string\",\n  \"displayOptions\": {\n    \"show\": {\n      \"otherField\": [\"value1\", \"value2\"]\n    }\n  }\n}\n```\n\n**Translation**: Show `fieldName` when `otherField` equals \"value1\" OR \"value2\"\n\n### Show vs Hide\n\n#### show (Most Common)\n\n**Show field when condition matches**:\n```javascript\n{\n  \"name\": \"body\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendBody\": [true]\n    }\n  }\n}\n```\n\n**Meaning**: Show `body` when `sendBody = true`\n\n#### hide (Less Common)\n\n**Hide field when condition matches**:\n```javascript\n{\n  \"name\": \"advanced\",\n  \"displayOptions\": {\n    \"hide\": {\n      \"simpleMode\": [true]\n    }\n  }\n}\n```\n\n**Meaning**: Hide `advanced` when `simpleMode = true`\n\n### Multiple Conditions (AND Logic)\n\n```javascript\n{\n  \"name\": \"body\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendBody\": [true],\n      \"method\": [\"POST\", \"PUT\", \"PATCH\"]\n    }\n  }\n}\n```\n\n**Meaning**: Show `body` when:\n- `sendBody = true` AND\n- `method IN (POST, PUT, PATCH)`\n\n**All conditions must match** (AND logic)\n\n### Multiple Values (OR Logic)\n\n```javascript\n{\n  \"name\": \"someField\",\n  \"displayOptions\": {\n    \"show\": {\n      \"method\": [\"POST\", \"PUT\", \"PATCH\"]\n    }\n  }\n}\n```\n\n**Meaning**: Show `someField` when:\n- `method = POST` OR\n- `method = PUT` OR\n- `method = PATCH`\n\n**Any value matches** (OR logic)\n\n---\n\n## Common Dependency Patterns\n\n### Pattern 1: Boolean Toggle\n\n**Use case**: Optional feature flag\n\n**Example**: HTTP Request sendBody\n```javascript\n// Field: sendBody (boolean)\n{\n  \"name\": \"sendBody\",\n  \"type\": \"boolean\",\n  \"default\": false\n}\n\n// Field: body (depends on sendBody)\n{\n  \"name\": \"body\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendBody\": [true]\n    }\n  }\n}\n```\n\n**Flow**:\n1. User sees sendBody checkbox\n2. When checked â†’ body field appears\n3. When unchecked â†’ body field hides\n\n### Pattern 2: Resource/Operation Cascade\n\n**Use case**: Different operations show different fields\n\n**Example**: Slack message operations\n```javascript\n// Operation: post\n{\n  \"name\": \"channel\",\n  \"displayOptions\": {\n    \"show\": {\n      \"resource\": [\"message\"],\n      \"operation\": [\"post\"]\n    }\n  }\n}\n\n// Operation: update\n{\n  \"name\": \"messageId\",\n  \"displayOptions\": {\n    \"show\": {\n      \"resource\": [\"message\"],\n      \"operation\": [\"update\"]\n    }\n  }\n}\n```\n\n**Flow**:\n1. User selects resource=\"message\"\n2. User selects operation=\"post\" â†’ sees channel\n3. User changes to operation=\"update\" â†’ channel hides, messageId shows\n\n### Pattern 3: Type-Specific Configuration\n\n**Use case**: Different types need different fields\n\n**Example**: IF node conditions\n```javascript\n// String operations\n{\n  \"name\": \"value2\",\n  \"displayOptions\": {\n    \"show\": {\n      \"conditions.string.0.operation\": [\"equals\", \"notEquals\", \"contains\"]\n    }\n  }\n}\n\n// Unary operations (isEmpty) don't show value2\n{\n  \"displayOptions\": {\n    \"hide\": {\n      \"conditions.string.0.operation\": [\"isEmpty\", \"isNotEmpty\"]\n    }\n  }\n}\n```\n\n### Pattern 4: Method-Specific Fields\n\n**Use case**: HTTP methods have different options\n\n**Example**: HTTP Request\n```javascript\n// Query parameters (all methods can have)\n{\n  \"name\": \"queryParameters\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendQuery\": [true]\n    }\n  }\n}\n\n// Body (only certain methods)\n{\n  \"name\": \"body\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendBody\": [true],\n      \"method\": [\"POST\", \"PUT\", \"PATCH\", \"DELETE\"]\n    }\n  }\n}\n```\n\n---\n\n## Using get_property_dependencies\n\n### Basic Usage\n\n```javascript\nconst deps = get_property_dependencies({\n  nodeType: \"nodes-base.httpRequest\"\n});\n```\n\n### Example Response\n\n```javascript\n{\n  \"nodeType\": \"n8n-nodes-base.httpRequest\",\n  \"dependencies\": {\n    \"body\": {\n      \"shows_when\": {\n        \"sendBody\": [true],\n        \"method\": [\"POST\", \"PUT\", \"PATCH\", \"DELETE\"]\n      },\n      \"required_when_shown\": true\n    },\n    \"queryParameters\": {\n      \"shows_when\": {\n        \"sendQuery\": [true]\n      },\n      \"required_when_shown\": false\n    },\n    \"headerParameters\": {\n      \"shows_when\": {\n        \"sendHeaders\": [true]\n      },\n      \"required_when_shown\": false\n    }\n  }\n}\n```\n\n### When to Use\n\n**âœ… Use when**:\n- Validation fails with \"missing field\" but you don't see that field\n- A field appears/disappears unexpectedly\n- You need to understand what controls field visibility\n- Building dynamic configuration tools\n\n**âŒ Don't use when**:\n- Simple configuration (use get_node_essentials)\n- Just starting configuration\n- Field requirements are obvious\n\n---\n\n## Complex Dependency Examples\n\n### Example 1: HTTP Request Complete Flow\n\n**Scenario**: Configuring POST with JSON body\n\n**Step 1**: Set method\n```javascript\n{\n  \"method\": \"POST\"\n  // â†’ sendBody becomes visible\n}\n```\n\n**Step 2**: Enable body\n```javascript\n{\n  \"method\": \"POST\",\n  \"sendBody\": true\n  // â†’ body field becomes visible AND required\n}\n```\n\n**Step 3**: Configure body\n```javascript\n{\n  \"method\": \"POST\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\"\n    // â†’ content field becomes visible AND required\n  }\n}\n```\n\n**Step 4**: Add content\n```javascript\n{\n  \"method\": \"POST\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"John\",\n      \"email\": \"john@example.com\"\n    }\n  }\n}\n// âœ… Valid!\n```\n\n**Dependency chain**:\n```\nmethod=POST\n  â†’ sendBody visible\n    â†’ sendBody=true\n      â†’ body visible + required\n        â†’ body.contentType=json\n          â†’ body.content visible + required\n```\n\n### Example 2: IF Node Operator Dependencies\n\n**Scenario**: String comparison with different operators\n\n**Binary operator** (equals):\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"operation\": \"equals\"\n        // â†’ value1 required\n        // â†’ value2 required\n        // â†’ singleValue should NOT be set\n      }\n    ]\n  }\n}\n```\n\n**Unary operator** (isEmpty):\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"operation\": \"isEmpty\"\n        // â†’ value1 required\n        // â†’ value2 should NOT be set\n        // â†’ singleValue should be true (auto-added)\n      }\n    ]\n  }\n}\n```\n\n**Dependency table**:\n\n| Operator | value1 | value2 | singleValue |\n|---|---|---|---|\n| equals | Required | Required | false |\n| notEquals | Required | Required | false |\n| contains | Required | Required | false |\n| isEmpty | Required | Hidden | true |\n| isNotEmpty | Required | Hidden | true |\n\n### Example 3: Slack Operation Matrix\n\n**Scenario**: Different Slack operations show different fields\n\n```javascript\n// post message\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\"\n  // Shows: channel (required), text (required), attachments, blocks\n}\n\n// update message\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\"\n  // Shows: messageId (required), text (required), channel (optional)\n}\n\n// delete message\n{\n  \"resource\": \"message\",\n  \"operation\": \"delete\"\n  // Shows: messageId (required), channel (required)\n  // Hides: text, attachments, blocks\n}\n\n// get message\n{\n  \"resource\": \"message\",\n  \"operation\": \"get\"\n  // Shows: messageId (required), channel (required)\n  // Hides: text, attachments, blocks\n}\n```\n\n**Field visibility matrix**:\n\n| Field | post | update | delete | get |\n|---|---|---|---|---|\n| channel | Required | Optional | Required | Required |\n| text | Required | Required | Hidden | Hidden |\n| messageId | Hidden | Required | Required | Required |\n| attachments | Optional | Optional | Hidden | Hidden |\n| blocks | Optional | Optional | Hidden | Hidden |\n\n---\n\n## Nested Dependencies\n\n### What Are They?\n\n**Definition**: Dependencies within object properties\n\n**Example**: HTTP Request body.contentType controls body.content structure\n\n```javascript\n{\n  \"body\": {\n    \"contentType\": \"json\",\n    // â†’ content expects JSON object\n    \"content\": {\n      \"key\": \"value\"\n    }\n  }\n}\n\n{\n  \"body\": {\n    \"contentType\": \"form-data\",\n    // â†’ content expects form fields array\n    \"content\": [\n      {\n        \"name\": \"field1\",\n        \"value\": \"value1\"\n      }\n    ]\n  }\n}\n```\n\n### How to Handle\n\n**Strategy**: Configure parent first, then children\n\n```javascript\n// Step 1: Parent\n{\n  \"body\": {\n    \"contentType\": \"json\"  // Set parent first\n  }\n}\n\n// Step 2: Children (structure determined by parent)\n{\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {           // JSON object format\n      \"key\": \"value\"\n    }\n  }\n}\n```\n\n---\n\n## Auto-Sanitization and Dependencies\n\n### What Auto-Sanitization Fixes\n\n**Operator structure issues** (IF/Switch nodes):\n\n**Example**: singleValue property\n```javascript\n// You configure (missing singleValue)\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\"\n  // Missing singleValue\n}\n\n// Auto-sanitization adds it\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\",\n  \"singleValue\": true  // âœ… Added automatically\n}\n```\n\n### What It Doesn't Fix\n\n**Missing required fields**:\n```javascript\n// You configure (missing channel)\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"text\": \"Hello\"\n  // Missing required field: channel\n}\n\n// Auto-sanitization does NOT add\n// You must add it yourself\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",  // â† You must add\n  \"text\": \"Hello\"\n}\n```\n\n---\n\n## Troubleshooting Dependencies\n\n### Problem 1: \"Field X is required but not visible\"\n\n**Error**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"body\",\n  \"message\": \"body is required\"\n}\n```\n\n**But you don't see body field in configuration!**\n\n**Solution**:\n```javascript\n// Check dependencies\nconst deps = get_property_dependencies({\n  nodeType: \"nodes-base.httpRequest\"\n});\n\n// Find that body shows when sendBody=true\n// Add sendBody\n{\n  \"method\": \"POST\",\n  \"sendBody\": true,  // â† Now body appears!\n  \"body\": {...}\n}\n```\n\n### Problem 2: \"Field disappears when I change operation\"\n\n**Scenario**:\n```javascript\n// Working configuration\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"Hello\"\n}\n\n// Change operation\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",  // Changed\n  \"channel\": \"#general\",  // Still here\n  \"text\": \"Updated\"       // Still here\n  // Missing: messageId (required for update!)\n}\n```\n\n**Validation error**: \"messageId is required\"\n\n**Why**: Different operation = different required fields\n\n**Solution**:\n```javascript\n// Check essentials for new operation\nget_node_essentials({\n  nodeType: \"nodes-base.slack\"\n});\n\n// Configure for update operation\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",\n  \"messageId\": \"1234567890\",  // Required for update\n  \"text\": \"Updated\",\n  \"channel\": \"#general\"       // Optional for update\n}\n```\n\n### Problem 3: \"Validation passes but field doesn't save\"\n\n**Scenario**: Field hidden by dependencies after validation\n\n**Example**:\n```javascript\n// Configure\n{\n  \"method\": \"GET\",\n  \"sendBody\": true,  // âŒ GET doesn't support body\n  \"body\": {...}      // This will be stripped\n}\n\n// After save\n{\n  \"method\": \"GET\"\n  // body removed because method=GET hides it\n}\n```\n\n**Solution**: Respect dependencies from the start\n\n```javascript\n// Correct approach\nget_property_dependencies({\n  nodeType: \"nodes-base.httpRequest\"\n});\n\n// See that body only shows for POST/PUT/PATCH/DELETE\n// Use correct method\n{\n  \"method\": \"POST\",\n  \"sendBody\": true,\n  \"body\": {...}\n}\n```\n\n---\n\n## Advanced Patterns\n\n### Pattern 1: Conditional Required with Fallback\n\n**Example**: Channel can be string OR expression\n\n```javascript\n// Option 1: String\n{\n  \"channel\": \"#general\"\n}\n\n// Option 2: Expression\n{\n  \"channel\": \"={{$json.channelName}}\"\n}\n\n// Validation accepts both\n```\n\n### Pattern 2: Mutually Exclusive Fields\n\n**Example**: Use either ID or name, not both\n\n```javascript\n// Use messageId\n{\n  \"messageId\": \"1234567890\"\n  // name not needed\n}\n\n// OR use messageName\n{\n  \"messageName\": \"thread-name\"\n  // messageId not needed\n}\n\n// Dependencies ensure only one is required\n```\n\n### Pattern 3: Progressive Complexity\n\n**Example**: Simple mode vs advanced mode\n\n```javascript\n// Simple mode\n{\n  \"mode\": \"simple\",\n  \"text\": \"{{$json.message}}\"\n  // Advanced fields hidden\n}\n\n// Advanced mode\n{\n  \"mode\": \"advanced\",\n  \"attachments\": [...],\n  \"blocks\": [...],\n  \"metadata\": {...}\n  // Simple field hidden, advanced fields shown\n}\n```\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n1. **Check dependencies when stuck**\n   ```javascript\n   get_property_dependencies({nodeType: \"...\"});\n   ```\n\n2. **Configure parent properties first**\n   ```javascript\n   // First: method, resource, operation\n   // Then: dependent fields\n   ```\n\n3. **Validate after changing operation**\n   ```javascript\n   // Operation changed â†’ requirements changed\n   validate_node_operation({...});\n   ```\n\n4. **Read validation errors for dependency hints**\n   ```\n   Error: \"body required when sendBody=true\"\n   â†’ Hint: Set sendBody=true to enable body\n   ```\n\n### âŒ Don't\n\n1. **Don't ignore dependency errors**\n   ```javascript\n   // Error: \"body not visible\" â†’ Check displayOptions\n   ```\n\n2. **Don't hardcode all possible fields**\n   ```javascript\n   // Bad: Adding fields that will be hidden\n   ```\n\n3. **Don't assume operations are identical**\n   ```javascript\n   // Each operation has unique requirements\n   ```\n\n---\n\n## Summary\n\n**Key Concepts**:\n- `displayOptions` control field visibility\n- `show` = field appears when conditions match\n- `hide` = field disappears when conditions match\n- Multiple conditions = AND logic\n- Multiple values = OR logic\n\n**Common Patterns**:\n1. Boolean toggle (sendBody â†’ body)\n2. Resource/operation cascade (different operations â†’ different fields)\n3. Type-specific config (string vs boolean conditions)\n4. Method-specific fields (GET vs POST)\n\n**Troubleshooting**:\n- Field required but not visible â†’ Check dependencies\n- Field disappears after change â†’ Operation changed requirements\n- Field doesn't save â†’ Hidden by dependencies\n\n**Tools**:\n- `get_property_dependencies` - See dependency rules\n- `get_node_essentials` - See operation requirements\n- Validation errors - Hints about dependencies\n\n**Related Files**:\n- **[SKILL.md](SKILL.md)** - Main configuration guide\n- **[OPERATION_PATTERNS.md](OPERATION_PATTERNS.md)** - Common patterns by node type\n",
        "skills/n8n-node-configuration/OPERATION_PATTERNS.md": "# Operation Patterns Guide\n\nCommon node configuration patterns organized by node type and operation.\n\n---\n\n## Overview\n\n**Purpose**: Quick reference for common node configurations\n\n**Coverage**: Top 20 most-used nodes from 525 available\n\n**Pattern format**:\n- Minimal valid configuration\n- Common options\n- Real-world examples\n- Gotchas and tips\n\n---\n\n## HTTP & API Nodes\n\n### HTTP Request (nodes-base.httpRequest)\n\nMost versatile node for HTTP operations\n\n#### GET Request\n\n**Minimal**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\"\n}\n```\n\n**With query parameters**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\",\n  \"sendQuery\": true,\n  \"queryParameters\": {\n    \"parameters\": [\n      {\n        \"name\": \"limit\",\n        \"value\": \"100\"\n      },\n      {\n        \"name\": \"offset\",\n        \"value\": \"={{$json.offset}}\"\n      }\n    ]\n  }\n}\n```\n\n**With authentication**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"predefinedCredentialType\",\n  \"nodeCredentialType\": \"httpHeaderAuth\"\n}\n```\n\n#### POST with JSON\n\n**Minimal**:\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"John Doe\",\n      \"email\": \"john@example.com\"\n    }\n  }\n}\n```\n\n**With expressions**:\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"={{$json.name}}\",\n      \"email\": \"={{$json.email}}\",\n      \"metadata\": {\n        \"source\": \"n8n\",\n        \"timestamp\": \"={{$now.toISO()}}\"\n      }\n    }\n  }\n}\n```\n\n**Gotcha**: Remember `sendBody: true` for POST/PUT/PATCH!\n\n#### PUT/PATCH Request\n\n**Pattern**: Same as POST, but method changes\n```javascript\n{\n  \"method\": \"PUT\",  // or \"PATCH\"\n  \"url\": \"https://api.example.com/users/123\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"Updated Name\"\n    }\n  }\n}\n```\n\n#### DELETE Request\n\n**Minimal** (no body):\n```javascript\n{\n  \"method\": \"DELETE\",\n  \"url\": \"https://api.example.com/users/123\",\n  \"authentication\": \"none\"\n}\n```\n\n**With body** (some APIs allow):\n```javascript\n{\n  \"method\": \"DELETE\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"ids\": [\"123\", \"456\"]\n    }\n  }\n}\n```\n\n---\n\n### Webhook (nodes-base.webhook)\n\nMost common trigger - 813 searches!\n\n#### Basic Webhook\n\n**Minimal**:\n```javascript\n{\n  \"path\": \"my-webhook\",\n  \"httpMethod\": \"POST\",\n  \"responseMode\": \"onReceived\"\n}\n```\n\n**Gotcha**: Webhook data is under `$json.body`, not `$json`!\n\n```javascript\n// âŒ Wrong\n{\n  \"text\": \"={{$json.email}}\"\n}\n\n// âœ… Correct\n{\n  \"text\": \"={{$json.body.email}}\"\n}\n```\n\n#### Webhook with Authentication\n\n**Header auth**:\n```javascript\n{\n  \"path\": \"secure-webhook\",\n  \"httpMethod\": \"POST\",\n  \"responseMode\": \"onReceived\",\n  \"authentication\": \"headerAuth\",\n  \"options\": {\n    \"responseCode\": 200,\n    \"responseData\": \"{\\n  \\\"success\\\": true\\n}\"\n  }\n}\n```\n\n#### Webhook Returning Data\n\n**Custom response**:\n```javascript\n{\n  \"path\": \"my-webhook\",\n  \"httpMethod\": \"POST\",\n  \"responseMode\": \"lastNode\",  // Return data from last node\n  \"options\": {\n    \"responseCode\": 201,\n    \"responseHeaders\": {\n      \"entries\": [\n        {\n          \"name\": \"Content-Type\",\n          \"value\": \"application/json\"\n        }\n      ]\n    }\n  }\n}\n```\n\n---\n\n## Communication Nodes\n\n### Slack (nodes-base.slack)\n\nPopular choice for AI agent workflows\n\n#### Post Message\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"Hello from n8n!\"\n}\n```\n\n**With dynamic content**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"={{$json.channel}}\",\n  \"text\": \"New user: {{$json.name}} ({{$json.email}})\"\n}\n```\n\n**With attachments**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#alerts\",\n  \"text\": \"Error Alert\",\n  \"attachments\": [\n    {\n      \"color\": \"#ff0000\",\n      \"fields\": [\n        {\n          \"title\": \"Error Type\",\n          \"value\": \"={{$json.errorType}}\"\n        },\n        {\n          \"title\": \"Timestamp\",\n          \"value\": \"={{$now.toLocaleString()}}\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Gotcha**: Channel must start with `#` for public channels or be a channel ID!\n\n#### Update Message\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",\n  \"messageId\": \"1234567890.123456\",  // From previous message post\n  \"text\": \"Updated message content\"\n}\n```\n\n**Note**: `messageId` required, `channel` optional (can be inferred)\n\n#### Create Channel\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"channel\",\n  \"operation\": \"create\",\n  \"name\": \"new-project-channel\",  // Lowercase, no spaces\n  \"isPrivate\": false\n}\n```\n\n**Gotcha**: Channel name must be lowercase, no spaces, 1-80 chars!\n\n---\n\n### Gmail (nodes-base.gmail)\n\nPopular for email automation\n\n#### Send Email\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"send\",\n  \"to\": \"user@example.com\",\n  \"subject\": \"Hello from n8n\",\n  \"message\": \"This is the email body\"\n}\n```\n\n**With dynamic content**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"send\",\n  \"to\": \"={{$json.email}}\",\n  \"subject\": \"Order Confirmation #{{$json.orderId}}\",\n  \"message\": \"Dear {{$json.name}},\\n\\nYour order has been confirmed.\\n\\nThank you!\",\n  \"options\": {\n    \"ccList\": \"admin@example.com\",\n    \"replyTo\": \"support@example.com\"\n  }\n}\n```\n\n#### Get Email\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"getAll\",\n  \"returnAll\": false,\n  \"limit\": 10\n}\n```\n\n**With filters**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"getAll\",\n  \"returnAll\": false,\n  \"limit\": 50,\n  \"filters\": {\n    \"q\": \"is:unread from:important@example.com\",\n    \"labelIds\": [\"INBOX\"]\n  }\n}\n```\n\n---\n\n## Database Nodes\n\n### Postgres (nodes-base.postgres)\n\nDatabase operations - 456 templates\n\n#### Execute Query\n\n**Minimal** (SELECT):\n```javascript\n{\n  \"operation\": \"executeQuery\",\n  \"query\": \"SELECT * FROM users WHERE active = true LIMIT 100\"\n}\n```\n\n**With parameters** (SQL injection prevention):\n```javascript\n{\n  \"operation\": \"executeQuery\",\n  \"query\": \"SELECT * FROM users WHERE email = $1 AND active = $2\",\n  \"additionalFields\": {\n    \"mode\": \"list\",\n    \"queryParameters\": \"user@example.com,true\"\n  }\n}\n```\n\n**Gotcha**: ALWAYS use parameterized queries for user input!\n\n```javascript\n// âŒ BAD - SQL injection risk!\n{\n  \"query\": \"SELECT * FROM users WHERE email = '{{$json.email}}'\"\n}\n\n// âœ… GOOD - Parameterized\n{\n  \"query\": \"SELECT * FROM users WHERE email = $1\",\n  \"additionalFields\": {\n    \"mode\": \"list\",\n    \"queryParameters\": \"={{$json.email}}\"\n  }\n}\n```\n\n#### Insert\n\n**Minimal**:\n```javascript\n{\n  \"operation\": \"insert\",\n  \"table\": \"users\",\n  \"columns\": \"name,email,created_at\",\n  \"additionalFields\": {\n    \"mode\": \"list\",\n    \"queryParameters\": \"John Doe,john@example.com,NOW()\"\n  }\n}\n```\n\n**With expressions**:\n```javascript\n{\n  \"operation\": \"insert\",\n  \"table\": \"users\",\n  \"columns\": \"name,email,metadata\",\n  \"additionalFields\": {\n    \"mode\": \"list\",\n    \"queryParameters\": \"={{$json.name}},={{$json.email}},{{JSON.stringify($json)}}\"\n  }\n}\n```\n\n#### Update\n\n**Minimal**:\n```javascript\n{\n  \"operation\": \"update\",\n  \"table\": \"users\",\n  \"updateKey\": \"id\",\n  \"columns\": \"name,email\",\n  \"additionalFields\": {\n    \"mode\": \"list\",\n    \"queryParameters\": \"={{$json.id}},Updated Name,newemail@example.com\"\n  }\n}\n```\n\n---\n\n## Data Transformation Nodes\n\n### Set (nodes-base.set)\n\nMost used transformation - 68% of workflows!\n\n#### Set Fixed Values\n\n**Minimal**:\n```javascript\n{\n  \"mode\": \"manual\",\n  \"duplicateItem\": false,\n  \"assignments\": {\n    \"assignments\": [\n      {\n        \"name\": \"status\",\n        \"value\": \"active\",\n        \"type\": \"string\"\n      },\n      {\n        \"name\": \"count\",\n        \"value\": 100,\n        \"type\": \"number\"\n      }\n    ]\n  }\n}\n```\n\n#### Set from Input Data\n\n**Mapping data**:\n```javascript\n{\n  \"mode\": \"manual\",\n  \"duplicateItem\": false,\n  \"assignments\": {\n    \"assignments\": [\n      {\n        \"name\": \"fullName\",\n        \"value\": \"={{$json.firstName}} {{$json.lastName}}\",\n        \"type\": \"string\"\n      },\n      {\n        \"name\": \"email\",\n        \"value\": \"={{$json.email.toLowerCase()}}\",\n        \"type\": \"string\"\n      },\n      {\n        \"name\": \"timestamp\",\n        \"value\": \"={{$now.toISO()}}\",\n        \"type\": \"string\"\n      }\n    ]\n  }\n}\n```\n\n**Gotcha**: Use correct `type` for each field!\n\n```javascript\n// âŒ Wrong type\n{\n  \"name\": \"age\",\n  \"value\": \"25\",      // String\n  \"type\": \"string\"    // Will be string \"25\"\n}\n\n// âœ… Correct type\n{\n  \"name\": \"age\",\n  \"value\": 25,        // Number\n  \"type\": \"number\"    // Will be number 25\n}\n```\n\n---\n\n### Code (nodes-base.code)\n\nJavaScript execution - 42% of workflows\n\n#### Simple Transformation\n\n**Minimal**:\n```javascript\n{\n  \"mode\": \"runOnceForAllItems\",\n  \"jsCode\": \"return $input.all().map(item => ({\\n  json: {\\n    name: item.json.name.toUpperCase(),\\n    email: item.json.email\\n  }\\n}));\"\n}\n```\n\n**Per-item processing**:\n```javascript\n{\n  \"mode\": \"runOnceForEachItem\",\n  \"jsCode\": \"// Process each item\\nconst data = $input.item.json;\\n\\nreturn {\\n  json: {\\n    fullName: `${data.firstName} ${data.lastName}`,\\n    email: data.email.toLowerCase(),\\n    timestamp: new Date().toISOString()\\n  }\\n};\"\n}\n```\n\n**Gotcha**: In Code nodes, use `$input.item.json` or `$input.all()`, NOT `{{...}}`!\n\n```javascript\n// âŒ Wrong - expressions don't work in Code nodes\n{\n  \"jsCode\": \"const name = '={{$json.name}}';\"\n}\n\n// âœ… Correct - direct access\n{\n  \"jsCode\": \"const name = $input.item.json.name;\"\n}\n```\n\n---\n\n## Conditional Nodes\n\n### IF (nodes-base.if)\n\nConditional logic - 38% of workflows\n\n#### String Comparison\n\n**Equals** (binary):\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.status}}\",\n        \"operation\": \"equals\",\n        \"value2\": \"active\"\n      }\n    ]\n  }\n}\n```\n\n**Contains** (binary):\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.email}}\",\n        \"operation\": \"contains\",\n        \"value2\": \"@example.com\"\n      }\n    ]\n  }\n}\n```\n\n**isEmpty** (unary):\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.email}}\",\n        \"operation\": \"isEmpty\"\n        // No value2 - unary operator\n        // singleValue: true added by auto-sanitization\n      }\n    ]\n  }\n}\n```\n\n**Gotcha**: Unary operators (isEmpty, isNotEmpty) don't need value2!\n\n#### Number Comparison\n\n**Greater than**:\n```javascript\n{\n  \"conditions\": {\n    \"number\": [\n      {\n        \"value1\": \"={{$json.age}}\",\n        \"operation\": \"larger\",\n        \"value2\": 18\n      }\n    ]\n  }\n}\n```\n\n#### Boolean Comparison\n\n**Is true**:\n```javascript\n{\n  \"conditions\": {\n    \"boolean\": [\n      {\n        \"value1\": \"={{$json.isActive}}\",\n        \"operation\": \"true\"\n        // Unary - no value2\n      }\n    ]\n  }\n}\n```\n\n#### Multiple Conditions (AND)\n\n**All must match**:\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.status}}\",\n        \"operation\": \"equals\",\n        \"value2\": \"active\"\n      }\n    ],\n    \"number\": [\n      {\n        \"value1\": \"={{$json.age}}\",\n        \"operation\": \"larger\",\n        \"value2\": 18\n      }\n    ]\n  },\n  \"combineOperation\": \"all\"  // AND logic\n}\n```\n\n#### Multiple Conditions (OR)\n\n**Any can match**:\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.status}}\",\n        \"operation\": \"equals\",\n        \"value2\": \"active\"\n      },\n      {\n        \"value1\": \"={{$json.status}}\",\n        \"operation\": \"equals\",\n        \"value2\": \"pending\"\n      }\n    ]\n  },\n  \"combineOperation\": \"any\"  // OR logic\n}\n```\n\n---\n\n### Switch (nodes-base.switch)\n\nMulti-way routing - 18% of workflows\n\n#### Basic Switch\n\n**Minimal**:\n```javascript\n{\n  \"mode\": \"rules\",\n  \"rules\": {\n    \"rules\": [\n      {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$json.status}}\",\n              \"operation\": \"equals\",\n              \"value2\": \"active\"\n            }\n          ]\n        }\n      },\n      {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$json.status}}\",\n              \"operation\": \"equals\",\n              \"value2\": \"pending\"\n            }\n          ]\n        }\n      }\n    ]\n  },\n  \"fallbackOutput\": \"extra\"  // Catch-all for non-matching\n}\n```\n\n**Gotcha**: Number of rules must match number of outputs!\n\n---\n\n## AI Nodes\n\n### OpenAI (nodes-langchain.openAi)\n\nAI operations - 234 templates\n\n#### Chat Completion\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"chat\",\n  \"operation\": \"complete\",\n  \"messages\": {\n    \"values\": [\n      {\n        \"role\": \"user\",\n        \"content\": \"={{$json.prompt}}\"\n      }\n    ]\n  }\n}\n```\n\n**With system prompt**:\n```javascript\n{\n  \"resource\": \"chat\",\n  \"operation\": \"complete\",\n  \"messages\": {\n    \"values\": [\n      {\n        \"role\": \"system\",\n        \"content\": \"You are a helpful assistant specialized in customer support.\"\n      },\n      {\n        \"role\": \"user\",\n        \"content\": \"={{$json.userMessage}}\"\n      }\n    ]\n  },\n  \"options\": {\n    \"temperature\": 0.7,\n    \"maxTokens\": 500\n  }\n}\n```\n\n---\n\n## Schedule Nodes\n\n### Schedule Trigger (nodes-base.scheduleTrigger)\n\nTime-based workflows - 28% have schedule triggers\n\n#### Daily at Specific Time\n\n**Minimal**:\n```javascript\n{\n  \"rule\": {\n    \"interval\": [\n      {\n        \"field\": \"hours\",\n        \"hoursInterval\": 24\n      }\n    ],\n    \"hour\": 9,\n    \"minute\": 0,\n    \"timezone\": \"America/New_York\"\n  }\n}\n```\n\n**Gotcha**: Always set timezone explicitly!\n\n```javascript\n// âŒ Bad - uses server timezone\n{\n  \"rule\": {\n    \"interval\": [...]\n  }\n}\n\n// âœ… Good - explicit timezone\n{\n  \"rule\": {\n    \"interval\": [...],\n    \"timezone\": \"America/New_York\"\n  }\n}\n```\n\n#### Every N Minutes\n\n**Minimal**:\n```javascript\n{\n  \"rule\": {\n    \"interval\": [\n      {\n        \"field\": \"minutes\",\n        \"minutesInterval\": 15\n      }\n    ]\n  }\n}\n```\n\n#### Cron Expression\n\n**Advanced scheduling**:\n```javascript\n{\n  \"mode\": \"cron\",\n  \"cronExpression\": \"0 */2 * * *\",  // Every 2 hours\n  \"timezone\": \"America/New_York\"\n}\n```\n\n---\n\n## Summary\n\n**Key Patterns by Category**:\n\n| Category | Most Common | Key Gotcha |\n|---|---|---|\n| HTTP/API | GET, POST JSON | Remember sendBody: true |\n| Webhooks | POST receiver | Data under $json.body |\n| Communication | Slack post | Channel format (#name) |\n| Database | SELECT with params | Use parameterized queries |\n| Transform | Set assignments | Correct type per field |\n| Conditional | IF string equals | Unary vs binary operators |\n| AI | OpenAI chat | System + user messages |\n| Schedule | Daily at time | Set timezone explicitly |\n\n**Configuration Approach**:\n1. Use patterns as starting point\n2. Adapt to your use case\n3. Validate configuration\n4. Iterate based on errors\n5. Deploy when valid\n\n**Related Files**:\n- **[SKILL.md](SKILL.md)** - Configuration workflow and philosophy\n- **[DEPENDENCIES.md](DEPENDENCIES.md)** - Property dependency rules\n",
        "skills/n8n-node-configuration/README.md": "# n8n Node Configuration\n\nExpert guidance for operation-aware node configuration with property dependencies.\n\n## Overview\n\n**Skill Name**: n8n Node Configuration\n**Priority**: Medium\n**Purpose**: Teach operation-aware configuration with progressive discovery and dependency awareness\n\n## The Problem This Solves\n\nNode configuration patterns:\n\n- get_node_essentials is the primary discovery tool (18s avg from search â†’ essentials)\n- 91.7% success rate with essentials-based configuration\n- 56 seconds average between configuration edits\n\n**Key insight**: Most configurations only need essentials, not full schema!\n\n## What This Skill Teaches\n\n### Core Concepts\n\n1. **Operation-Aware Configuration**\n   - Resource + operation determine required fields\n   - Different operations = different requirements\n   - Always check requirements when changing operation\n\n2. **Property Dependencies**\n   - Fields appear/disappear based on other field values\n   - displayOptions control visibility\n   - Conditional required fields\n   - Understanding dependency chains\n\n3. **Progressive Discovery**\n   - Start with get_node_essentials (91.7% success)\n   - Escalate to get_property_dependencies if needed\n   - Use get_node_info only when necessary\n   - Right tool for right job\n\n4. **Configuration Workflow**\n   - Identify â†’ Discover â†’ Configure â†’ Validate â†’ Iterate\n   - Average 2-3 validation cycles\n   - Read errors for dependency hints\n   - 56 seconds between edits average\n\n5. **Common Patterns**\n   - Resource/operation nodes (Slack, Sheets)\n   - HTTP-based nodes (HTTP Request, Webhook)\n   - Database nodes (Postgres, MySQL)\n   - Conditional logic nodes (IF, Switch)\n\n## File Structure\n\n```\nn8n-node-configuration/\nâ”œâ”€â”€ SKILL.md (692 lines)\nâ”‚   Main configuration guide\nâ”‚   - Configuration philosophy (progressive disclosure)\nâ”‚   - Core concepts (operation-aware, dependencies)\nâ”‚   - Configuration workflow (8-step process)\nâ”‚   - get_node_essentials vs get_node_info\nâ”‚   - Property dependencies deep dive\nâ”‚   - Common node patterns (4 categories)\nâ”‚   - Operation-specific examples\nâ”‚   - Conditional requirements\nâ”‚   - Anti-patterns and best practices\nâ”‚\nâ”œâ”€â”€ DEPENDENCIES.md (671 lines)\nâ”‚   Property dependencies reference\nâ”‚   - displayOptions mechanism\nâ”‚   - show vs hide rules\nâ”‚   - Multiple conditions (AND logic)\nâ”‚   - Multiple values (OR logic)\nâ”‚   - 4 common dependency patterns\nâ”‚   - Using get_property_dependencies\nâ”‚   - Complex dependency examples\nâ”‚   - Nested dependencies\nâ”‚   - Auto-sanitization interaction\nâ”‚   - Troubleshooting guide\nâ”‚   - Advanced patterns\nâ”‚\nâ”œâ”€â”€ OPERATION_PATTERNS.md (783 lines)\nâ”‚   Common configurations by node type\nâ”‚   - HTTP Request (GET/POST/PUT/DELETE)\nâ”‚   - Webhook (basic/auth/response)\nâ”‚   - Slack (post/update/create)\nâ”‚   - Gmail (send/get)\nâ”‚   - Postgres (query/insert/update)\nâ”‚   - Set (values/mapping)\nâ”‚   - Code (per-item/all-items)\nâ”‚   - IF (string/number/boolean)\nâ”‚   - Switch (rules/fallback)\nâ”‚   - OpenAI (chat completion)\nâ”‚   - Schedule (daily/interval/cron)\nâ”‚   - Gotchas and tips for each\nâ”‚\nâ””â”€â”€ README.md (this file)\n    Skill metadata and statistics\n```\n\n**Total**: ~2,146 lines across 4 files + 4 evaluations\n\n## Usage Statistics\n\nConfiguration metrics:\n\n| Metric | Value | Insight |\n|---|---|---|\n| get_node_essentials | Primary tool | Most popular discovery pattern |\n| Success rate (essentials) | 91.7% | Essentials sufficient for most |\n| Avg time searchâ†’essentials | 18 seconds | Fast discovery workflow |\n| Avg time between edits | 56 seconds | Iterative configuration |\n\n## Tool Usage Pattern\n\n**Most common discovery pattern**:\n```\nsearch_nodes â†’ get_node_essentials (18s average)\n```\n\n**Configuration cycle**:\n```\nget_node_essentials â†’ configure â†’ validate â†’ iterate (56s avg per edit)\n```\n\n## Key Insights\n\n### 1. Progressive Disclosure Works\n\n**91.7% success rate** with get_node_essentials proves most configurations don't need full schema.\n\n**Strategy**:\n1. Start with essentials\n2. Escalate to dependencies if stuck\n3. Use full schema only when necessary\n\n### 2. Operations Determine Requirements\n\n**Same node, different operation = different requirements**\n\nExample: Slack message\n- `operation=\"post\"` â†’ needs channel + text\n- `operation=\"update\"` â†’ needs messageId + text (different!)\n\n### 3. Dependencies Control Visibility\n\n**Fields appear/disappear based on other values**\n\nExample: HTTP Request\n- `method=\"GET\"` â†’ body hidden\n- `method=\"POST\"` + `sendBody=true` â†’ body required\n\n### 4. Configuration is Iterative\n\n**Average 56 seconds between edits** shows configuration is iterative, not one-shot.\n\n**Normal workflow**:\n1. Configure minimal\n2. Validate â†’ error\n3. Add missing field\n4. Validate â†’ error\n5. Adjust value\n6. Validate â†’ valid âœ…\n\n### 5. Common Gotchas Exist\n\n**Top 5 gotchas** from patterns:\n1. Webhook data under `$json.body` (not `$json`)\n2. POST needs `sendBody: true`\n3. Slack channel format (`#name`)\n4. SQL parameterized queries (injection prevention)\n5. Timezone must be explicit (schedule nodes)\n\n## Usage Examples\n\n### Example 1: Basic Configuration Flow\n\n```javascript\n// Step 1: Get essentials\nconst info = get_node_essentials({\n  nodeType: \"nodes-base.slack\"\n});\n\n// Step 2: Configure for operation\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"Hello!\"\n}\n\n// Step 3: Validate\nvalidate_node_operation({...});\n// âœ… Valid!\n```\n\n### Example 2: Handling Dependencies\n\n```javascript\n// Step 1: Configure HTTP POST\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\"\n}\n\n// Step 2: Validate â†’ Error: \"sendBody required\"\n// Step 3: Check dependencies\nget_property_dependencies({\n  nodeType: \"nodes-base.httpRequest\"\n});\n// Shows: body visible when sendBody=true\n\n// Step 4: Fix\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {...}\n  }\n}\n// âœ… Valid!\n```\n\n### Example 3: Operation Change\n\n```javascript\n// Initial config (post operation)\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"Hello\"\n}\n\n// Change operation\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",  // Changed!\n  // Need to check new requirements\n}\n\n// Get essentials for update operation\nget_node_essentials({nodeType: \"nodes-base.slack\"});\n// Shows: messageId required, channel optional\n\n// Correct config\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",\n  \"messageId\": \"1234567890.123456\",\n  \"text\": \"Updated\"\n}\n```\n\n## When This Skill Activates\n\n**Trigger phrases**:\n- \"how to configure\"\n- \"what fields are required\"\n- \"property dependencies\"\n- \"get_node_essentials vs get_node_info\"\n- \"operation-specific\"\n- \"field not visible\"\n\n**Common scenarios**:\n- Configuring new nodes\n- Understanding required fields\n- Field appears/disappears unexpectedly\n- Choosing between discovery tools\n- Switching operations\n- Learning common patterns\n\n## Integration with Other Skills\n\n### Works With:\n- **n8n MCP Tools Expert** - How to call discovery tools correctly\n- **n8n Validation Expert** - Interpret missing_required errors\n- **n8n Expression Syntax** - Configure expression fields\n- **n8n Workflow Patterns** - Apply patterns with proper node config\n\n### Complementary:\n- Use MCP Tools Expert to learn tool selection\n- Use Validation Expert to fix configuration errors\n- Use Expression Syntax for dynamic field values\n- Use Workflow Patterns to understand node relationships\n\n## Testing\n\n**Evaluations**: 4 test scenarios\n\n1. **eval-001-property-dependencies.json**\n   - Tests understanding of displayOptions\n   - Guides to get_property_dependencies\n   - Explains conditional requirements\n\n2. **eval-002-operation-specific-config.json**\n   - Tests operation-aware configuration\n   - Identifies resource + operation pattern\n   - References OPERATION_PATTERNS.md\n\n3. **eval-003-conditional-fields.json**\n   - Tests unary vs binary operators\n   - Explains singleValue dependency\n   - Mentions auto-sanitization\n\n4. **eval-004-essentials-vs-info.json**\n   - Tests tool selection knowledge\n   - Explains progressive disclosure\n   - Provides success rate statistics\n\n## Success Metrics\n\n**Before this skill**:\n- Using get_node_info for everything (slow, overwhelming)\n- Not understanding property dependencies\n- Confused when fields appear/disappear\n- Not aware of operation-specific requirements\n- Trial and error configuration\n\n**After this skill**:\n- Start with get_node_essentials (91.7% success)\n- Understand displayOptions mechanism\n- Predict field visibility based on dependencies\n- Check requirements when changing operations\n- Systematic configuration approach\n- Know common patterns by node type\n\n## Coverage\n\n**Node types covered**: Top 20 most-used nodes\n\n| Category | Nodes | Coverage |\n|---|---|---|\n| HTTP/API | HTTP Request, Webhook | Complete |\n| Communication | Slack, Gmail | Common operations |\n| Database | Postgres, MySQL | CRUD operations |\n| Transform | Set, Code | All modes |\n| Conditional | IF, Switch | All operator types |\n| AI | OpenAI | Chat completion |\n| Schedule | Schedule Trigger | All modes |\n\n## Related Documentation\n\n- **n8n-mcp MCP Server**: Provides discovery tools\n- **n8n Node API**: get_node_essentials, get_property_dependencies, get_node_info\n- **n8n Schema**: displayOptions mechanism, property definitions\n\n## Version History\n\n- **v1.0** (2025-10-20): Initial implementation\n  - SKILL.md with configuration workflow\n  - DEPENDENCIES.md with displayOptions deep dive\n  - OPERATION_PATTERNS.md with 20+ node patterns\n  - 4 evaluation scenarios\n\n## Author\n\nConceived by Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n\nPart of the n8n-skills meta-skill collection.\n",
        "skills/n8n-node-configuration/SKILL.md": "---\nname: n8n-node-configuration\ndescription: Operation-aware node configuration guidance. Use when configuring nodes, understanding property dependencies, determining required fields, choosing between get_node_essentials and get_node_info, or learning common configuration patterns by node type.\n---\n\n# n8n Node Configuration\n\nExpert guidance for operation-aware node configuration with property dependencies.\n\n---\n\n## Configuration Philosophy\n\n**Progressive disclosure**: Start minimal, add complexity as needed\n\nConfiguration best practices:\n- get_node_essentials is the most used discovery pattern\n- 56 seconds average between configuration edits\n- 91.7% success rate with essentials-based configuration\n\n**Key insight**: Most configurations need only essentials, not full schema!\n\n---\n\n## Core Concepts\n\n### 1. Operation-Aware Configuration\n\n**Not all fields are always required** - it depends on operation!\n\n**Example**: Slack node\n```javascript\n// For operation='post'\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",  // Required for post\n  \"text\": \"Hello!\"        // Required for post\n}\n\n// For operation='update'\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",\n  \"messageId\": \"123\",     // Required for update (different!)\n  \"text\": \"Updated!\"      // Required for update\n  // channel NOT required for update\n}\n```\n\n**Key**: Resource + operation determine which fields are required!\n\n### 2. Property Dependencies\n\n**Fields appear/disappear based on other field values**\n\n**Example**: HTTP Request node\n```javascript\n// When method='GET'\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com\"\n  // sendBody not shown (GET doesn't have body)\n}\n\n// When method='POST'\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com\",\n  \"sendBody\": true,       // Now visible!\n  \"body\": {               // Required when sendBody=true\n    \"contentType\": \"json\",\n    \"content\": {...}\n  }\n}\n```\n\n**Mechanism**: displayOptions control field visibility\n\n### 3. Progressive Discovery\n\n**Use the right tool for the right job**:\n\n1. **get_node_essentials** (91.7% success rate)\n   - Quick overview\n   - Required fields\n   - Common options\n   - **Use first** - covers 90% of needs\n\n2. **get_property_dependencies** (for complex nodes)\n   - Shows what fields depend on others\n   - Reveals conditional requirements\n   - Use when essentials isn't enough\n\n3. **get_node_info** (full schema)\n   - Complete documentation\n   - All possible fields\n   - Use when essentials + dependencies insufficient\n\n---\n\n## Configuration Workflow\n\n### Standard Process\n\n```\n1. Identify node type and operation\n   â†“\n2. Use get_node_essentials\n   â†“\n3. Configure required fields\n   â†“\n4. Validate configuration\n   â†“\n5. If dependencies unclear â†’ get_property_dependencies\n   â†“\n6. Add optional fields as needed\n   â†“\n7. Validate again\n   â†“\n8. Deploy\n```\n\n### Example: Configuring HTTP Request\n\n**Step 1**: Identify what you need\n```javascript\n// Goal: POST JSON to API\n```\n\n**Step 2**: Get essentials\n```javascript\nconst info = get_node_essentials({\n  nodeType: \"nodes-base.httpRequest\"\n});\n\n// Returns: method, url, sendBody, body, authentication required/optional\n```\n\n**Step 3**: Minimal config\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"authentication\": \"none\"\n}\n```\n\n**Step 4**: Validate\n```javascript\nvalidate_node_operation({\n  nodeType: \"nodes-base.httpRequest\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Error: \"sendBody required for POST\"\n```\n\n**Step 5**: Add required field\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"authentication\": \"none\",\n  \"sendBody\": true\n}\n```\n\n**Step 6**: Validate again\n```javascript\nvalidate_node_operation({...});\n// â†’ Error: \"body required when sendBody=true\"\n```\n\n**Step 7**: Complete configuration\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"={{$json.name}}\",\n      \"email\": \"={{$json.email}}\"\n    }\n  }\n}\n```\n\n**Step 8**: Final validation\n```javascript\nvalidate_node_operation({...});\n// â†’ Valid! âœ…\n```\n\n---\n\n## get_node_essentials vs get_node_info\n\n### Use get_node_essentials When:\n\n**âœ… Starting configuration** (91.7% success rate)\n```javascript\nget_node_essentials({\n  nodeType: \"nodes-base.slack\"\n});\n```\n\n**Returns**:\n- Required fields\n- Common options\n- Basic examples\n- Operation list\n\n**Fast**: ~18 seconds average (from search â†’ essentials)\n\n### Use get_node_info When:\n\n**âœ… Essentials insufficient**\n```javascript\nget_node_info({\n  nodeType: \"nodes-base.slack\"\n});\n```\n\n**Returns**:\n- Full schema\n- All properties\n- Complete documentation\n- Advanced options\n\n**Slower**: More data to process\n\n### Decision Tree\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Starting new node config?       â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ get_node_essentials       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Essentials has what you need?   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ Configure with essentials â”‚\nâ”‚ NO  â†’ Continue                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Need dependency info?           â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ get_property_dependencies â”‚\nâ”‚ NO  â†’ Continue                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Still need more details?        â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ get_node_info             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Property Dependencies Deep Dive\n\n### displayOptions Mechanism\n\n**Fields have visibility rules**:\n\n```javascript\n{\n  \"name\": \"body\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendBody\": [true],\n      \"method\": [\"POST\", \"PUT\", \"PATCH\"]\n    }\n  }\n}\n```\n\n**Translation**: \"body\" field shows when:\n- sendBody = true AND\n- method = POST, PUT, or PATCH\n\n### Common Dependency Patterns\n\n#### Pattern 1: Boolean Toggle\n\n**Example**: HTTP Request sendBody\n```javascript\n// sendBody controls body visibility\n{\n  \"sendBody\": true   // â†’ body field appears\n}\n```\n\n#### Pattern 2: Operation Switch\n\n**Example**: Slack resource/operation\n```javascript\n// Different operations â†’ different fields\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\"\n  // â†’ Shows: channel, text, attachments, etc.\n}\n\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\"\n  // â†’ Shows: messageId, text (different fields!)\n}\n```\n\n#### Pattern 3: Type Selection\n\n**Example**: IF node conditions\n```javascript\n{\n  \"type\": \"string\",\n  \"operation\": \"contains\"\n  // â†’ Shows: value1, value2\n}\n\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\"\n  // â†’ Shows: value1, value2, different operators\n}\n```\n\n### Using get_property_dependencies\n\n**Example**:\n```javascript\nconst deps = get_property_dependencies({\n  nodeType: \"nodes-base.httpRequest\"\n});\n\n// Returns dependency tree\n{\n  \"dependencies\": {\n    \"body\": {\n      \"shows_when\": {\n        \"sendBody\": [true],\n        \"method\": [\"POST\", \"PUT\", \"PATCH\", \"DELETE\"]\n      }\n    },\n    \"queryParameters\": {\n      \"shows_when\": {\n        \"sendQuery\": [true]\n      }\n    }\n  }\n}\n```\n\n**Use this when**: Validation fails and you don't understand why field is missing/required\n\n---\n\n## Common Node Patterns\n\n### Pattern 1: Resource/Operation Nodes\n\n**Examples**: Slack, Google Sheets, Airtable\n\n**Structure**:\n```javascript\n{\n  \"resource\": \"<entity>\",      // What type of thing\n  \"operation\": \"<action>\",     // What to do with it\n  // ... operation-specific fields\n}\n```\n\n**How to configure**:\n1. Choose resource\n2. Choose operation\n3. Use get_node_essentials to see operation-specific requirements\n4. Configure required fields\n\n### Pattern 2: HTTP-Based Nodes\n\n**Examples**: HTTP Request, Webhook\n\n**Structure**:\n```javascript\n{\n  \"method\": \"<HTTP_METHOD>\",\n  \"url\": \"<endpoint>\",\n  \"authentication\": \"<type>\",\n  // ... method-specific fields\n}\n```\n\n**Dependencies**:\n- POST/PUT/PATCH â†’ sendBody available\n- sendBody=true â†’ body required\n- authentication != \"none\" â†’ credentials required\n\n### Pattern 3: Database Nodes\n\n**Examples**: Postgres, MySQL, MongoDB\n\n**Structure**:\n```javascript\n{\n  \"operation\": \"<query|insert|update|delete>\",\n  // ... operation-specific fields\n}\n```\n\n**Dependencies**:\n- operation=\"executeQuery\" â†’ query required\n- operation=\"insert\" â†’ table + values required\n- operation=\"update\" â†’ table + values + where required\n\n### Pattern 4: Conditional Logic Nodes\n\n**Examples**: IF, Switch, Merge\n\n**Structure**:\n```javascript\n{\n  \"conditions\": {\n    \"<type>\": [\n      {\n        \"operation\": \"<operator>\",\n        \"value1\": \"...\",\n        \"value2\": \"...\"  // Only for binary operators\n      }\n    ]\n  }\n}\n```\n\n**Dependencies**:\n- Binary operators (equals, contains, etc.) â†’ value1 + value2\n- Unary operators (isEmpty, isNotEmpty) â†’ value1 only + singleValue: true\n\n---\n\n## Operation-Specific Configuration\n\n### Slack Node Examples\n\n#### Post Message\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",      // Required\n  \"text\": \"Hello!\",           // Required\n  \"attachments\": [],          // Optional\n  \"blocks\": []                // Optional\n}\n```\n\n#### Update Message\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",\n  \"messageId\": \"1234567890\",  // Required (different from post!)\n  \"text\": \"Updated!\",         // Required\n  \"channel\": \"#general\"       // Optional (can be inferred)\n}\n```\n\n#### Create Channel\n```javascript\n{\n  \"resource\": \"channel\",\n  \"operation\": \"create\",\n  \"name\": \"new-channel\",      // Required\n  \"isPrivate\": false          // Optional\n  // Note: text NOT required for this operation\n}\n```\n\n### HTTP Request Node Examples\n\n#### GET Request\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"predefinedCredentialType\",\n  \"nodeCredentialType\": \"httpHeaderAuth\",\n  \"sendQuery\": true,                    // Optional\n  \"queryParameters\": {                  // Shows when sendQuery=true\n    \"parameters\": [\n      {\n        \"name\": \"limit\",\n        \"value\": \"100\"\n      }\n    ]\n  }\n}\n```\n\n#### POST with JSON\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,                     // Required for POST\n  \"body\": {                             // Required when sendBody=true\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"John Doe\",\n      \"email\": \"john@example.com\"\n    }\n  }\n}\n```\n\n### IF Node Examples\n\n#### String Comparison (Binary)\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.status}}\",\n        \"operation\": \"equals\",\n        \"value2\": \"active\"              // Binary: needs value2\n      }\n    ]\n  }\n}\n```\n\n#### Empty Check (Unary)\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.email}}\",\n        \"operation\": \"isEmpty\",\n        // No value2 - unary operator\n        \"singleValue\": true             // Auto-added by sanitization\n      }\n    ]\n  }\n}\n```\n\n---\n\n## Handling Conditional Requirements\n\n### Example: HTTP Request Body\n\n**Scenario**: body field required, but only sometimes\n\n**Rule**:\n```\nbody is required when:\n  - sendBody = true AND\n  - method IN (POST, PUT, PATCH, DELETE)\n```\n\n**How to discover**:\n```javascript\n// Option 1: Read validation error\nvalidate_node_operation({...});\n// Error: \"body required when sendBody=true\"\n\n// Option 2: Check dependencies\nget_property_dependencies({\n  nodeType: \"nodes-base.httpRequest\"\n});\n// Shows: body â†’ shows_when: sendBody=[true], method=[POST,PUT,PATCH,DELETE]\n\n// Option 3: Try minimal config and iterate\n// Start without body, validation will tell you if needed\n```\n\n### Example: IF Node singleValue\n\n**Scenario**: singleValue property appears for unary operators\n\n**Rule**:\n```\nsingleValue should be true when:\n  - operation IN (isEmpty, isNotEmpty, true, false)\n```\n\n**Good news**: Auto-sanitization fixes this!\n\n**Manual check**:\n```javascript\nget_property_dependencies({\n  nodeType: \"nodes-base.if\"\n});\n// Shows operator-specific dependencies\n```\n\n---\n\n## Configuration Anti-Patterns\n\n### âŒ Don't: Over-configure Upfront\n\n**Bad**:\n```javascript\n// Adding every possible field\n{\n  \"method\": \"GET\",\n  \"url\": \"...\",\n  \"sendQuery\": false,\n  \"sendHeaders\": false,\n  \"sendBody\": false,\n  \"timeout\": 10000,\n  \"ignoreResponseCode\": false,\n  // ... 20 more optional fields\n}\n```\n\n**Good**:\n```javascript\n// Start minimal\n{\n  \"method\": \"GET\",\n  \"url\": \"...\",\n  \"authentication\": \"none\"\n}\n// Add fields only when needed\n```\n\n### âŒ Don't: Skip Validation\n\n**Bad**:\n```javascript\n// Configure and deploy without validating\nconst config = {...};\nn8n_update_partial_workflow({...});  // YOLO\n```\n\n**Good**:\n```javascript\n// Validate before deploying\nconst config = {...};\nconst result = validate_node_operation({...});\nif (result.valid) {\n  n8n_update_partial_workflow({...});\n}\n```\n\n### âŒ Don't: Ignore Operation Context\n\n**Bad**:\n```javascript\n// Same config for all Slack operations\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"...\"\n}\n\n// Then switching operation without updating config\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",  // Changed\n  \"channel\": \"#general\",  // Wrong field for update!\n  \"text\": \"...\"\n}\n```\n\n**Good**:\n```javascript\n// Check requirements when changing operation\nget_node_essentials({\n  nodeType: \"nodes-base.slack\"\n});\n// See what update operation needs (messageId, not channel)\n```\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n1. **Start with get_node_essentials**\n   - 91.7% success rate\n   - Faster than get_node_info\n   - Sufficient for most needs\n\n2. **Validate iteratively**\n   - Configure â†’ Validate â†’ Fix â†’ Repeat\n   - Average 2-3 iterations is normal\n   - Read validation errors carefully\n\n3. **Use property dependencies when stuck**\n   - If field seems missing, check dependencies\n   - Understand what controls field visibility\n   - get_property_dependencies reveals rules\n\n4. **Respect operation context**\n   - Different operations = different requirements\n   - Always check essentials when changing operation\n   - Don't assume configs are transferable\n\n5. **Trust auto-sanitization**\n   - Operator structure fixed automatically\n   - Don't manually add/remove singleValue\n   - IF/Switch metadata added on save\n\n### âŒ Don't\n\n1. **Jump to get_node_info immediately**\n   - Try essentials first\n   - Only escalate if needed\n   - Full schema is overwhelming\n\n2. **Configure blindly**\n   - Always validate before deploying\n   - Understand why fields are required\n   - Check dependencies for conditional fields\n\n3. **Copy configs without understanding**\n   - Different operations need different fields\n   - Validate after copying\n   - Adjust for new context\n\n4. **Manually fix auto-sanitization issues**\n   - Let auto-sanitization handle operator structure\n   - Focus on business logic\n   - Save and let system fix structure\n\n---\n\n## Detailed References\n\nFor comprehensive guides on specific topics:\n\n- **[DEPENDENCIES.md](DEPENDENCIES.md)** - Deep dive into property dependencies and displayOptions\n- **[OPERATION_PATTERNS.md](OPERATION_PATTERNS.md)** - Common configuration patterns by node type\n\n---\n\n## Summary\n\n**Configuration Strategy**:\n1. Start with get_node_essentials (91.7% success)\n2. Configure required fields for operation\n3. Validate configuration\n4. Check dependencies if stuck\n5. Iterate until valid (avg 2-3 cycles)\n6. Deploy with confidence\n\n**Key Principles**:\n- **Operation-aware**: Different operations = different requirements\n- **Progressive disclosure**: Start minimal, add as needed\n- **Dependency-aware**: Understand field visibility rules\n- **Validation-driven**: Let validation guide configuration\n\n**Related Skills**:\n- **n8n MCP Tools Expert** - How to use discovery tools correctly\n- **n8n Validation Expert** - Interpret validation errors\n- **n8n Expression Syntax** - Configure expression fields\n- **n8n Workflow Patterns** - Apply patterns with proper configuration\n",
        "skills/n8n-validation-expert/ERROR_CATALOG.md": "# Error Catalog\n\nComprehensive catalog of n8n validation errors with real examples and fixes.\n\n---\n\n## Error Types Overview\n\nCommon validation errors by priority:\n\n| Error Type | Priority | Severity | Auto-Fix |\n|---|---|---|---|\n| missing_required | Highest | Error | âŒ |\n| invalid_value | High | Error | âŒ |\n| type_mismatch | Medium | Error | âŒ |\n| invalid_expression | Medium | Error | âŒ |\n| invalid_reference | Low | Error | âŒ |\n| operator_structure | Lowest | Warning | âœ… |\n\n---\n\n## Errors (Must Fix)\n\n### 1. missing_required\n\n**What it means**: Required field is not provided in node configuration\n\n**When it occurs**:\n- Creating new nodes without all required fields\n- Copying configurations between different operations\n- Switching operations that have different requirements\n\n**Most common validation error**\n\n#### Example 1: Slack Channel Missing\n\n**Error**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"channel\",\n  \"message\": \"Channel name is required\",\n  \"node\": \"Slack\",\n  \"path\": \"parameters.channel\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\"\n  // Missing: channel\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\"  // âœ… Added required field\n}\n```\n\n**How to identify required fields**:\n```javascript\n// Use get_node_essentials to see what's required\nconst info = get_node_essentials({\n  nodeType: \"nodes-base.slack\"\n});\n// Check properties marked as \"required\": true\n```\n\n#### Example 2: HTTP Request Missing URL\n\n**Error**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"url\",\n  \"message\": \"URL is required for HTTP Request\",\n  \"node\": \"HTTP Request\",\n  \"path\": \"parameters.url\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"authentication\": \"none\"\n  // Missing: url\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"authentication\": \"none\",\n  \"url\": \"https://api.example.com/data\"  // âœ… Added\n}\n```\n\n#### Example 3: Database Query Missing Connection\n\n**Error**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"query\",\n  \"message\": \"SQL query is required\",\n  \"node\": \"Postgres\",\n  \"path\": \"parameters.query\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"operation\": \"executeQuery\"\n  // Missing: query\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"operation\": \"executeQuery\",\n  \"query\": \"SELECT * FROM users WHERE active = true\"  // âœ… Added\n}\n```\n\n#### Example 4: Conditional Fields\n\n**Error**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"body\",\n  \"message\": \"Request body is required when sendBody is true\",\n  \"node\": \"HTTP Request\",\n  \"path\": \"parameters.body\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"sendBody\": true\n  // Missing: body (required when sendBody=true)\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"John\",\n      \"email\": \"john@example.com\"\n    }\n  }  // âœ… Added conditional required field\n}\n```\n\n---\n\n### 2. invalid_value\n\n**What it means**: Provided value doesn't match allowed options or format\n\n**When it occurs**:\n- Using wrong enum value\n- Typos in operation names\n- Invalid format for specialized fields (emails, URLs, channels)\n\n**Second most common error**\n\n#### Example 1: Invalid Operation\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_value\",\n  \"property\": \"operation\",\n  \"message\": \"Operation must be one of: post, update, delete, get\",\n  \"current\": \"send\",\n  \"allowed\": [\"post\", \"update\", \"delete\", \"get\"]\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"send\"  // âŒ Invalid - should be \"post\"\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\"  // âœ… Use valid operation\n}\n```\n\n#### Example 2: Invalid HTTP Method\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_value\",\n  \"property\": \"method\",\n  \"message\": \"Method must be one of: GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS\",\n  \"current\": \"FETCH\",\n  \"allowed\": [\"GET\", \"POST\", \"PUT\", \"PATCH\", \"DELETE\", \"HEAD\", \"OPTIONS\"]\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"method\": \"FETCH\",  // âŒ Invalid\n  \"url\": \"https://api.example.com\"\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"method\": \"GET\",  // âœ… Use valid HTTP method\n  \"url\": \"https://api.example.com\"\n}\n```\n\n#### Example 3: Invalid Channel Format\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_value\",\n  \"property\": \"channel\",\n  \"message\": \"Channel name must start with # and be lowercase (e.g., #general)\",\n  \"current\": \"General\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"General\"  // âŒ Wrong format\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\"  // âœ… Correct format\n}\n```\n\n#### Example 4: Invalid Enum with Case Sensitivity\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_value\",\n  \"property\": \"resource\",\n  \"message\": \"Resource must be one of: channel, message, user, file\",\n  \"current\": \"Message\",\n  \"allowed\": [\"channel\", \"message\", \"user\", \"file\"]\n}\n```\n\n**Note**: Enums are case-sensitive!\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"Message\",  // âŒ Capital M\n  \"operation\": \"post\"\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",  // âœ… Lowercase\n  \"operation\": \"post\"\n}\n```\n\n---\n\n### 3. type_mismatch\n\n**What it means**: Value is wrong data type (string instead of number, etc.)\n\n**When it occurs**:\n- Hardcoding values that should be numbers\n- Using expressions where literals are expected\n- JSON serialization issues\n\n**Common error**\n\n#### Example 1: String Instead of Number\n\n**Error**:\n```json\n{\n  \"type\": \"type_mismatch\",\n  \"property\": \"limit\",\n  \"message\": \"Expected number, got string\",\n  \"expected\": \"number\",\n  \"current\": \"100\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"operation\": \"executeQuery\",\n  \"query\": \"SELECT * FROM users\",\n  \"limit\": \"100\"  // âŒ String\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"operation\": \"executeQuery\",\n  \"query\": \"SELECT * FROM users\",\n  \"limit\": 100  // âœ… Number\n}\n```\n\n#### Example 2: Number Instead of String\n\n**Error**:\n```json\n{\n  \"type\": \"type_mismatch\",\n  \"property\": \"channel\",\n  \"message\": \"Expected string, got number\",\n  \"expected\": \"string\",\n  \"current\": 12345\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": 12345  // âŒ Number (even if channel ID)\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\"  // âœ… String (channel name, not ID)\n}\n```\n\n#### Example 3: Boolean as String\n\n**Error**:\n```json\n{\n  \"type\": \"type_mismatch\",\n  \"property\": \"sendHeaders\",\n  \"message\": \"Expected boolean, got string\",\n  \"expected\": \"boolean\",\n  \"current\": \"true\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com\",\n  \"sendHeaders\": \"true\"  // âŒ String \"true\"\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com\",\n  \"sendHeaders\": true  // âœ… Boolean true\n}\n```\n\n#### Example 4: Object Instead of Array\n\n**Error**:\n```json\n{\n  \"type\": \"type_mismatch\",\n  \"property\": \"tags\",\n  \"message\": \"Expected array, got object\",\n  \"expected\": \"array\",\n  \"current\": {\"tag\": \"important\"}\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"name\": \"New Channel\",\n  \"tags\": {\"tag\": \"important\"}  // âŒ Object\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"name\": \"New Channel\",\n  \"tags\": [\"important\", \"alerts\"]  // âœ… Array\n}\n```\n\n---\n\n### 4. invalid_expression\n\n**What it means**: n8n expression has syntax errors or invalid references\n\n**When it occurs**:\n- Missing `{{}}` around expressions\n- Typos in variable names\n- Referencing non-existent nodes or fields\n- Invalid JavaScript syntax in expressions\n\n**Moderately common**\n\n**Related**: See **n8n Expression Syntax** skill for comprehensive expression guidance\n\n#### Example 1: Missing Curly Braces\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_expression\",\n  \"property\": \"text\",\n  \"message\": \"Expressions must be wrapped in {{}}\",\n  \"current\": \"$json.name\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"$json.name\"  // âŒ Missing {{}}\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"={{$json.name}}\"  // âœ… Wrapped in {{}}\n}\n```\n\n#### Example 2: Invalid Node Reference\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_expression\",\n  \"property\": \"value\",\n  \"message\": \"Referenced node 'HTTP Requets' does not exist\",\n  \"current\": \"={{$node['HTTP Requets'].json.data}}\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"field\": \"data\",\n  \"value\": \"={{$node['HTTP Requets'].json.data}}\"  // âŒ Typo in node name\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"field\": \"data\",\n  \"value\": \"={{$node['HTTP Request'].json.data}}\"  // âœ… Correct node name\n}\n```\n\n#### Example 3: Invalid Property Access\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_expression\",\n  \"property\": \"text\",\n  \"message\": \"Cannot access property 'user' of undefined\",\n  \"current\": \"={{$json.data.user.name}}\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"text\": \"={{$json.data.user.name}}\"  // âŒ Structure doesn't exist\n}\n```\n\n**Fix** (with safe navigation):\n```javascript\n{\n  \"text\": \"={{$json.data?.user?.name || 'Unknown'}}\"  // âœ… Safe navigation + fallback\n}\n```\n\n#### Example 4: Webhook Data Access Error\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_expression\",\n  \"property\": \"value\",\n  \"message\": \"Property 'email' not found in $json\",\n  \"current\": \"={{$json.email}}\"\n}\n```\n\n**Common Gotcha**: Webhook data is under `.body`!\n\n**Broken Configuration**:\n```javascript\n{\n  \"field\": \"email\",\n  \"value\": \"={{$json.email}}\"  // âŒ Missing .body\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"field\": \"email\",\n  \"value\": \"={{$json.body.email}}\"  // âœ… Webhook data under .body\n}\n```\n\n---\n\n### 5. invalid_reference\n\n**What it means**: Configuration references a node that doesn't exist in the workflow\n\n**When it occurs**:\n- Node was renamed or deleted\n- Typo in node name\n- Copy-pasting from another workflow\n\n**Less common error**\n\n#### Example 1: Deleted Node Reference\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_reference\",\n  \"property\": \"expression\",\n  \"message\": \"Node 'Transform Data' does not exist in workflow\",\n  \"referenced_node\": \"Transform Data\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"value\": \"={{$node['Transform Data'].json.result}}\"  // âŒ Node deleted\n}\n```\n\n**Fix**:\n```javascript\n// Option 1: Update to existing node\n{\n  \"value\": \"={{$node['Set'].json.result}}\"\n}\n\n// Option 2: Remove expression if not needed\n{\n  \"value\": \"default_value\"\n}\n```\n\n#### Example 2: Connection to Non-Existent Node\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_reference\",\n  \"message\": \"Connection references node 'Slack1' which does not exist\",\n  \"source\": \"HTTP Request\",\n  \"target\": \"Slack1\"\n}\n```\n\n**Fix**: Use `cleanStaleConnections` operation:\n```javascript\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  operations: [{\n    type: \"cleanStaleConnections\"\n  }]\n})\n```\n\n#### Example 3: Renamed Node Not Updated\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_reference\",\n  \"property\": \"expression\",\n  \"message\": \"Node 'Get Weather' does not exist (did you mean 'Weather API'?)\",\n  \"referenced_node\": \"Get Weather\",\n  \"suggestions\": [\"Weather API\"]\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"value\": \"={{$node['Get Weather'].json.temperature}}\"  // âŒ Old name\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"value\": \"={{$node['Weather API'].json.temperature}}\"  // âœ… Current name\n}\n```\n\n---\n\n## Warnings (Should Fix)\n\n### 6. best_practice\n\n**What it means**: Configuration works but doesn't follow best practices\n\n**Severity**: Warning (doesn't block execution)\n\n**When acceptable**: Development, testing, simple workflows\n\n**When to fix**: Production workflows, critical operations\n\n#### Example 1: Missing Error Handling\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"property\": \"onError\",\n  \"message\": \"Slack API can have rate limits and connection issues\",\n  \"suggestion\": \"Add error handling: onError: 'continueRegularOutput'\"\n}\n```\n\n**Current Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#alerts\"\n  // No error handling âš ï¸\n}\n```\n\n**Recommended Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#alerts\",\n  \"continueOnFail\": true,\n  \"retryOnFail\": true,\n  \"maxTries\": 3\n}\n```\n\n#### Example 2: No Retry Logic\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"property\": \"retryOnFail\",\n  \"message\": \"External API calls should retry on failure\",\n  \"suggestion\": \"Add retryOnFail: true, maxTries: 3, waitBetweenTries: 1000\"\n}\n```\n\n**When to ignore**: Idempotent operations, APIs with their own retry logic\n\n**When to fix**: Flaky external services, production automation\n\n---\n\n### 7. deprecated\n\n**What it means**: Using old API version or deprecated feature\n\n**Severity**: Warning (still works but may stop working in future)\n\n**When to fix**: Always (eventually)\n\n#### Example 1: Old typeVersion\n\n**Warning**:\n```json\n{\n  \"type\": \"deprecated\",\n  \"property\": \"typeVersion\",\n  \"message\": \"typeVersion 1 is deprecated for Slack node, use version 2\",\n  \"current\": 1,\n  \"recommended\": 2\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"type\": \"n8n-nodes-base.slack\",\n  \"typeVersion\": 2,  // âœ… Updated\n  // May need to update configuration for new version\n}\n```\n\n---\n\n### 8. performance\n\n**What it means**: Configuration may cause performance issues\n\n**Severity**: Warning\n\n**When to fix**: High-volume workflows, large datasets\n\n#### Example 1: Unbounded Query\n\n**Warning**:\n```json\n{\n  \"type\": \"performance\",\n  \"property\": \"query\",\n  \"message\": \"SELECT without LIMIT can return massive datasets\",\n  \"suggestion\": \"Add LIMIT clause or use pagination\"\n}\n```\n\n**Current**:\n```sql\nSELECT * FROM users WHERE active = true\n```\n\n**Fix**:\n```sql\nSELECT * FROM users WHERE active = true LIMIT 1000\n```\n\n---\n\n## Auto-Sanitization Fixes\n\n### 9. operator_structure\n\n**What it means**: IF/Switch operator structure issues\n\n**Severity**: Warning\n\n**Auto-Fix**: âœ… YES - Fixed automatically on workflow save\n\n**Rare** (mostly auto-fixed)\n\n#### Fixed Automatically: Binary Operators\n\n**Before** (you create this):\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\",\n  \"singleValue\": true  // âŒ Wrong for binary operator\n}\n```\n\n**After** (auto-sanitization fixes it):\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\"\n  // singleValue removed âœ…\n}\n```\n\n**You don't need to do anything** - this is fixed on save!\n\n#### Fixed Automatically: Unary Operators\n\n**Before**:\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\"\n  // Missing singleValue âŒ\n}\n```\n\n**After**:\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\",\n  \"singleValue\": true  // âœ… Added automatically\n}\n```\n\n**What you should do**: Trust auto-sanitization, don't manually fix these!\n\n---\n\n## Recovery Patterns\n\n### Pattern 1: Progressive Validation\n\n**Problem**: Too many errors at once\n\n**Solution**:\n```javascript\n// Step 1: Minimal valid config\nlet config = {\n  resource: \"message\",\n  operation: \"post\",\n  channel: \"#general\",\n  text: \"Hello\"\n};\n\nvalidate_node_operation({nodeType: \"nodes-base.slack\", config});\n// âœ… Valid\n\n// Step 2: Add features one by one\nconfig.attachments = [...];\nvalidate_node_operation({nodeType: \"nodes-base.slack\", config});\n\nconfig.blocks = [...];\nvalidate_node_operation({nodeType: \"nodes-base.slack\", config});\n```\n\n### Pattern 2: Error Triage\n\n**Problem**: Multiple errors\n\n**Solution**:\n```javascript\nconst result = validate_node_operation({...});\n\n// 1. Fix errors (must fix)\nresult.errors.forEach(error => {\n  console.log(`MUST FIX: ${error.property} - ${error.message}`);\n});\n\n// 2. Review warnings (should fix)\nresult.warnings.forEach(warning => {\n  console.log(`SHOULD FIX: ${warning.property} - ${warning.message}`);\n});\n\n// 3. Consider suggestions (optional)\nresult.suggestions.forEach(sug => {\n  console.log(`OPTIONAL: ${sug.message}`);\n});\n```\n\n### Pattern 3: Use get_node_essentials\n\n**Problem**: Don't know what's required\n\n**Solution**:\n```javascript\n// Before configuring, check requirements\nconst info = get_node_essentials({\n  nodeType: \"nodes-base.slack\"\n});\n\n// Look for required fields\ninfo.properties.forEach(prop => {\n  if (prop.required) {\n    console.log(`Required: ${prop.name} (${prop.type})`);\n  }\n});\n```\n\n---\n\n## Summary\n\n**Most Common Errors**:\n1. `missing_required` (45%) - Always check get_node_essentials\n2. `invalid_value` (28%) - Check allowed values\n3. `type_mismatch` (12%) - Use correct data types\n4. `invalid_expression` (8%) - Use Expression Syntax skill\n5. `invalid_reference` (5%) - Clean stale connections\n\n**Auto-Fixed**:\n- `operator_structure` - Trust auto-sanitization!\n\n**Related Skills**:\n- **[SKILL.md](SKILL.md)** - Main validation guide\n- **[FALSE_POSITIVES.md](FALSE_POSITIVES.md)** - When to ignore warnings\n- **n8n Expression Syntax** - Fix expression errors\n- **n8n MCP Tools Expert** - Use validation tools correctly\n",
        "skills/n8n-validation-expert/FALSE_POSITIVES.md": "# False Positives Guide\n\nWhen validation warnings are acceptable and how to handle them.\n\n---\n\n## What Are False Positives?\n\n**Definition**: Validation warnings that are technically \"issues\" but acceptable in your specific use case.\n\n**Key insight**: Not all warnings need to be fixed!\n\nMany warnings are context-dependent:\n- ~40% of warnings are acceptable in specific use cases\n- Using `ai-friendly` profile reduces false positives by 60%\n\n---\n\n## Philosophy\n\n### âœ… Good Practice\n```\n1. Run validation with 'runtime' profile\n2. Fix all ERRORS\n3. Review each WARNING\n4. Decide if acceptable for your use case\n5. Document why you accepted it\n6. Deploy with confidence\n```\n\n### âŒ Bad Practice\n```\n1. Ignore all warnings blindly\n2. Use 'minimal' profile to avoid warnings\n3. Deploy without understanding risks\n```\n\n---\n\n## Common False Positives\n\n### 1. Missing Error Handling\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"message\": \"No error handling configured\",\n  \"suggestion\": \"Add continueOnFail: true and retryOnFail: true\"\n}\n```\n\n#### When Acceptable\n\n**âœ… Development/Testing Workflows**\n```javascript\n// Testing workflow - failures are obvious\n{\n  \"name\": \"Test Slack Integration\",\n  \"nodes\": [{\n    \"type\": \"n8n-nodes-base.slack\",\n    \"parameters\": {\n      \"resource\": \"message\",\n      \"operation\": \"post\",\n      \"channel\": \"#test\"\n      // No error handling - OK for testing\n    }\n  }]\n}\n```\n\n**Reasoning**: You WANT to see failures during testing.\n\n**âœ… Non-Critical Notifications**\n```javascript\n// Nice-to-have notification\n{\n  \"name\": \"Optional Slack Notification\",\n  \"parameters\": {\n    \"channel\": \"#general\",\n    \"text\": \"FYI: Process completed\"\n    // If this fails, no big deal\n  }\n}\n```\n\n**Reasoning**: Notification failure doesn't affect core functionality.\n\n**âœ… Manual Trigger Workflows**\n```javascript\n// Manual workflow - user is watching\n{\n  \"nodes\": [{\n    \"type\": \"n8n-nodes-base.webhook\",\n    \"parameters\": {\n      \"path\": \"manual-test\"\n      // No error handling - user will retry manually\n    }\n  }]\n}\n```\n\n**Reasoning**: User is present to see and handle errors.\n\n#### When to Fix\n\n**âŒ Production Automation**\n```javascript\n// BAD: Critical workflow without error handling\n{\n  \"name\": \"Process Customer Orders\",\n  \"nodes\": [{\n    \"type\": \"n8n-nodes-base.postgres\",\n    \"parameters\": {\n      \"query\": \"INSERT INTO orders...\"\n      // âŒ Should have error handling!\n    }\n  }]\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"parameters\": {\n    \"query\": \"INSERT INTO orders...\",\n    \"continueOnFail\": true,\n    \"retryOnFail\": true,\n    \"maxTries\": 3,\n    \"waitBetweenTries\": 1000\n  }\n}\n```\n\n**âŒ Critical Integrations**\n```javascript\n// BAD: Payment processing without error handling\n{\n  \"name\": \"Process Payment\",\n  \"type\": \"n8n-nodes-base.stripe\"\n  // âŒ Payment failures MUST be handled!\n}\n```\n\n---\n\n### 2. No Retry Logic\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"message\": \"External API calls should retry on failure\",\n  \"suggestion\": \"Add retryOnFail: true with exponential backoff\"\n}\n```\n\n#### When Acceptable\n\n**âœ… APIs with Built-in Retry**\n```javascript\n// Stripe has its own retry mechanism\n{\n  \"type\": \"n8n-nodes-base.stripe\",\n  \"parameters\": {\n    \"resource\": \"charge\",\n    \"operation\": \"create\"\n    // Stripe SDK retries automatically\n  }\n}\n```\n\n**âœ… Idempotent Operations**\n```javascript\n// GET request - safe to retry manually if needed\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com/status\"\n  // Read-only, no side effects\n}\n```\n\n**âœ… Local/Internal Services**\n```javascript\n// Internal API with high reliability\n{\n  \"url\": \"http://localhost:3000/process\"\n  // Local service, failures are rare and obvious\n}\n```\n\n#### When to Fix\n\n**âŒ Flaky External APIs**\n```javascript\n// BAD: Known unreliable API without retries\n{\n  \"url\": \"https://unreliable-api.com/data\"\n  // âŒ Should retry!\n}\n\n// GOOD:\n{\n  \"url\": \"https://unreliable-api.com/data\",\n  \"retryOnFail\": true,\n  \"maxTries\": 3,\n  \"waitBetweenTries\": 2000\n}\n```\n\n**âŒ Non-Idempotent Operations**\n```javascript\n// BAD: POST without retry - may lose data\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\"\n  // âŒ Could timeout and lose data\n}\n```\n\n---\n\n### 3. Missing Rate Limiting\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"message\": \"API may have rate limits\",\n  \"suggestion\": \"Add rate limiting or batch requests\"\n}\n```\n\n#### When Acceptable\n\n**âœ… Internal APIs**\n```javascript\n// Internal microservice - no rate limits\n{\n  \"url\": \"http://internal-api/process\"\n  // Company controls both ends\n}\n```\n\n**âœ… Low-Volume Workflows**\n```javascript\n// Runs once per day\n{\n  \"trigger\": {\n    \"type\": \"n8n-nodes-base.cron\",\n    \"parameters\": {\n      \"mode\": \"everyDay\",\n      \"hour\": 9\n    }\n  },\n  \"nodes\": [{\n    \"type\": \"n8n-nodes-base.httpRequest\",\n    \"parameters\": {\n      \"url\": \"https://api.example.com/daily-report\"\n      // Once per day = no rate limit concerns\n    }\n  }]\n}\n```\n\n**âœ… APIs with Server-Side Limits**\n```javascript\n// API returns 429 and n8n handles it\n{\n  \"url\": \"https://api.example.com/data\",\n  \"options\": {\n    \"response\": {\n      \"response\": {\n        \"neverError\": false  // Will error on 429\n      }\n    }\n  },\n  \"retryOnFail\": true  // Retry on 429\n}\n```\n\n#### When to Fix\n\n**âŒ High-Volume Public APIs**\n```javascript\n// BAD: Loop hitting rate-limited API\n{\n  \"nodes\": [{\n    \"type\": \"n8n-nodes-base.splitInBatches\",\n    \"parameters\": {\n      \"batchSize\": 100\n    }\n  }, {\n    \"type\": \"n8n-nodes-base.httpRequest\",\n    \"parameters\": {\n      \"url\": \"https://api.github.com/...\"\n      // âŒ GitHub has strict rate limits!\n    }\n  }]\n}\n\n// GOOD: Add rate limiting\n{\n  \"type\": \"n8n-nodes-base.httpRequest\",\n  \"parameters\": {\n    \"url\": \"https://api.github.com/...\",\n    \"options\": {\n      \"batching\": {\n        \"batch\": {\n          \"batchSize\": 10,\n          \"batchInterval\": 1000  // 1 second between batches\n        }\n      }\n    }\n  }\n}\n```\n\n---\n\n### 4. Unbounded Database Queries\n\n**Warning**:\n```json\n{\n  \"type\": \"performance\",\n  \"message\": \"SELECT without LIMIT can return massive datasets\",\n  \"suggestion\": \"Add LIMIT clause or use pagination\"\n}\n```\n\n#### When Acceptable\n\n**âœ… Small Known Datasets**\n```javascript\n// Config table with ~10 rows\n{\n  \"query\": \"SELECT * FROM app_config\"\n  // Known to be small, no LIMIT needed\n}\n```\n\n**âœ… Aggregation Queries**\n```javascript\n// COUNT/SUM operations\n{\n  \"query\": \"SELECT COUNT(*) as total FROM users WHERE active = true\"\n  // Aggregation, not returning rows\n}\n```\n\n**âœ… Development/Testing**\n```javascript\n// Testing with small dataset\n{\n  \"query\": \"SELECT * FROM test_users\"\n  // Test database has 5 rows\n}\n```\n\n#### When to Fix\n\n**âŒ Production Queries on Large Tables**\n```javascript\n// BAD: User table could have millions of rows\n{\n  \"query\": \"SELECT * FROM users\"\n  // âŒ Could return millions of rows!\n}\n\n// GOOD: Add LIMIT\n{\n  \"query\": \"SELECT * FROM users LIMIT 1000\"\n}\n\n// BETTER: Use pagination\n{\n  \"query\": \"SELECT * FROM users WHERE id > {{$json.lastId}} LIMIT 1000\"\n}\n```\n\n---\n\n### 5. Missing Input Validation\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"message\": \"Webhook doesn't validate input data\",\n  \"suggestion\": \"Add IF node to validate required fields\"\n}\n```\n\n#### When Acceptable\n\n**âœ… Internal Webhooks**\n```javascript\n// Webhook from your own backend\n{\n  \"type\": \"n8n-nodes-base.webhook\",\n  \"parameters\": {\n    \"path\": \"internal-trigger\"\n    // Your backend already validates\n  }\n}\n```\n\n**âœ… Trusted Sources**\n```javascript\n// Webhook from Stripe (cryptographically signed)\n{\n  \"type\": \"n8n-nodes-base.webhook\",\n  \"parameters\": {\n    \"path\": \"stripe-webhook\",\n    \"authentication\": \"headerAuth\"\n    // Stripe signature validates authenticity\n  }\n}\n```\n\n#### When to Fix\n\n**âŒ Public Webhooks**\n```javascript\n// BAD: Public webhook without validation\n{\n  \"type\": \"n8n-nodes-base.webhook\",\n  \"parameters\": {\n    \"path\": \"public-form-submit\"\n    // âŒ Anyone can send anything!\n  }\n}\n\n// GOOD: Add validation\n{\n  \"nodes\": [\n    {\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\"\n    },\n    {\n      \"name\": \"Validate Input\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{$json.body.email}}\",\n              \"operation\": \"isNotEmpty\"\n            },\n            {\n              \"value1\": \"={{$json.body.email}}\",\n              \"operation\": \"regex\",\n              \"value2\": \"^[^@]+@[^@]+\\\\.[^@]+$\"\n            }\n          ]\n        }\n      }\n    }\n  ]\n}\n```\n\n---\n\n### 6. Hardcoded Credentials\n\n**Warning**:\n```json\n{\n  \"type\": \"security\",\n  \"message\": \"Credentials should not be hardcoded\",\n  \"suggestion\": \"Use n8n credential system\"\n}\n```\n\n#### When Acceptable\n\n**âœ… Public APIs (No Auth)**\n```javascript\n// Truly public API with no secrets\n{\n  \"url\": \"https://api.ipify.org\"\n  // No credentials needed\n}\n```\n\n**âœ… Demo/Example Workflows**\n```javascript\n// Example workflow in documentation\n{\n  \"url\": \"https://example.com/api\",\n  \"headers\": {\n    \"Authorization\": \"Bearer DEMO_TOKEN\"\n  }\n  // Clearly marked as example\n}\n```\n\n#### When to Fix (Always!)\n\n**âŒ Real Credentials**\n```javascript\n// BAD: Real API key in workflow\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer sk_live_abc123...\"\n  }\n  // âŒ NEVER hardcode real credentials!\n}\n\n// GOOD: Use credentials system\n{\n  \"authentication\": \"headerAuth\",\n  \"credentials\": {\n    \"headerAuth\": {\n      \"id\": \"credential-id\",\n      \"name\": \"My API Key\"\n    }\n  }\n}\n```\n\n---\n\n## Validation Profile Strategies\n\n### Strategy 1: Progressive Strictness\n\n**Development**:\n```javascript\nvalidate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"ai-friendly\"  // Fewer warnings during development\n})\n```\n\n**Pre-Production**:\n```javascript\nvalidate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"  // Balanced validation\n})\n```\n\n**Production Deployment**:\n```javascript\nvalidate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"strict\"  // All warnings, review each one\n})\n```\n\n### Strategy 2: Profile by Workflow Type\n\n**Quick Automations**:\n- Profile: `ai-friendly`\n- Accept: Most warnings\n- Fix: Only errors + security warnings\n\n**Business-Critical Workflows**:\n- Profile: `strict`\n- Accept: Very few warnings\n- Fix: Everything possible\n\n**Integration Testing**:\n- Profile: `minimal`\n- Accept: All warnings (just testing connections)\n- Fix: Only errors that prevent execution\n\n---\n\n## Decision Framework\n\n### Should I Fix This Warning?\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Is it a SECURITY warning?       â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ Always fix                â”‚\nâ”‚ NO  â†’ Continue                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Is this a production workflow?  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ Continue                  â”‚\nâ”‚ NO  â†’ Probably acceptable       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Does it handle critical data?   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ Fix the warning           â”‚\nâ”‚ NO  â†’ Continue                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Is there a known workaround?    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ Acceptable if documented  â”‚\nâ”‚ NO  â†’ Fix the warning           â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Documentation Template\n\nWhen accepting a warning, document why:\n\n```javascript\n// workflows/customer-notifications.json\n\n{\n  \"nodes\": [{\n    \"name\": \"Send Slack Notification\",\n    \"type\": \"n8n-nodes-base.slack\",\n    \"parameters\": {\n      \"channel\": \"#notifications\"\n      // ACCEPTED WARNING: No error handling\n      // Reason: Non-critical notification, failures are acceptable\n      // Reviewed: 2025-10-20\n      // Reviewer: Engineering Team\n    }\n  }]\n}\n```\n\n---\n\n## Known n8n Issues\n\n### Issue #304: IF Node Metadata Warning\n\n**Warning**:\n```json\n{\n  \"type\": \"metadata_incomplete\",\n  \"message\": \"IF node missing conditions.options metadata\",\n  \"node\": \"IF\"\n}\n```\n\n**Status**: False positive for IF v2.2+\n\n**Why it occurs**: Auto-sanitization adds metadata, but validation runs before sanitization\n\n**What to do**: Ignore - metadata is added on save\n\n### Issue #306: Switch Branch Count\n\n**Warning**:\n```json\n{\n  \"type\": \"configuration_mismatch\",\n  \"message\": \"Switch has 3 rules but 4 output connections\",\n  \"node\": \"Switch\"\n}\n```\n\n**Status**: False positive when using \"fallback\" mode\n\n**Why it occurs**: Fallback creates extra output\n\n**What to do**: Ignore if using fallback intentionally\n\n### Issue #338: Credential Validation in Test Mode\n\n**Warning**:\n```json\n{\n  \"type\": \"credentials_invalid\",\n  \"message\": \"Cannot validate credentials without execution context\"\n}\n```\n\n**Status**: False positive during static validation\n\n**Why it occurs**: Credentials validated at runtime, not build time\n\n**What to do**: Ignore - credentials are validated when workflow runs\n\n---\n\n## Summary\n\n### Always Fix\n- âŒ Security warnings\n- âŒ Hardcoded credentials\n- âŒ SQL injection risks\n- âŒ Production workflow errors\n\n### Usually Fix\n- âš ï¸ Error handling (production)\n- âš ï¸ Retry logic (external APIs)\n- âš ï¸ Input validation (public webhooks)\n- âš ï¸ Rate limiting (high volume)\n\n### Often Acceptable\n- âœ… Error handling (dev/test)\n- âœ… Retry logic (internal APIs)\n- âœ… Rate limiting (low volume)\n- âœ… Query limits (small datasets)\n\n### Always Acceptable\n- âœ… Known n8n issues (#304, #306, #338)\n- âœ… Auto-sanitization warnings\n- âœ… Metadata completeness (auto-fixed)\n\n**Golden Rule**: If you accept a warning, document WHY.\n\n**Related Files**:\n- **[SKILL.md](SKILL.md)** - Main validation guide\n- **[ERROR_CATALOG.md](ERROR_CATALOG.md)** - Error types and fixes\n",
        "skills/n8n-validation-expert/README.md": "# n8n Validation Expert\n\nExpert guidance for interpreting and fixing n8n validation errors.\n\n## Overview\n\n**Skill Name**: n8n Validation Expert\n**Priority**: Medium\n**Purpose**: Interpret validation errors and guide systematic fixing through the validation loop\n\n## The Problem This Solves\n\nValidation errors are common:\n\n- Validation often requires iteration (79% lead to feedback loops)\n- **7,841 validate â†’ fix cycles** (avg 23s thinking + 58s fixing)\n- **2-3 iterations** average to achieve valid configuration\n\n**Key insight**: Validation is an iterative process, not a one-shot fix!\n\n## What This Skill Teaches\n\n### Core Concepts\n\n1. **Error Severity Levels**\n   - Errors (must fix) - Block execution\n   - Warnings (should fix) - Don't block but indicate issues\n   - Suggestions (optional) - Nice-to-have improvements\n\n2. **The Validation Loop**\n   - Configure â†’ Validate â†’ Read errors â†’ Fix â†’ Validate again\n   - Average 2-3 iterations to success\n   - 23 seconds thinking + 58 seconds fixing per cycle\n\n3. **Validation Profiles**\n   - `minimal` - Quick checks, most permissive\n   - `runtime` - Recommended for most use cases\n   - `ai-friendly` - Reduces false positives for AI workflows\n   - `strict` - Maximum safety, many warnings\n\n4. **Auto-Sanitization System**\n   - Automatically fixes operator structure issues\n   - Runs on every workflow save\n   - Fixes binary/unary operator problems\n   - Adds IF/Switch metadata\n\n5. **False Positives**\n   - Not all warnings need fixing\n   - 40% of warnings are acceptable in context\n   - Use `ai-friendly` profile to reduce by 60%\n   - Document accepted warnings\n\n## File Structure\n\n```\nn8n-validation-expert/\nâ”œâ”€â”€ SKILL.md (690 lines)\nâ”‚   Core validation concepts and workflow\nâ”‚   - Validation philosophy\nâ”‚   - Error severity levels\nâ”‚   - The validation loop pattern\nâ”‚   - Validation profiles\nâ”‚   - Common error types\nâ”‚   - Auto-sanitization system\nâ”‚   - Workflow validation\nâ”‚   - Recovery strategies\nâ”‚   - Best practices\nâ”‚\nâ”œâ”€â”€ ERROR_CATALOG.md (865 lines)\nâ”‚   Complete error reference with examples\nâ”‚   - 9 error types with real examples\nâ”‚   - missing_required (45% of errors)\nâ”‚   - invalid_value (28%)\nâ”‚   - type_mismatch (12%)\nâ”‚   - invalid_expression (8%)\nâ”‚   - invalid_reference (5%)\nâ”‚   - operator_structure (2%, auto-fixed)\nâ”‚   - Recovery patterns\nâ”‚   - Summary with frequencies\nâ”‚\nâ”œâ”€â”€ FALSE_POSITIVES.md (669 lines)\nâ”‚   When warnings are acceptable\nâ”‚   - Philosophy of warning acceptance\nâ”‚   - 6 common false positive types\nâ”‚   - When acceptable vs when to fix\nâ”‚   - Validation profile strategies\nâ”‚   - Decision framework\nâ”‚   - Documentation template\nâ”‚   - Known n8n issues (#304, #306, #338)\nâ”‚\nâ””â”€â”€ README.md (this file)\n    Skill metadata and statistics\n```\n\n**Total**: ~2,224 lines across 4 files\n\n## Common Error Types\n\n| Error Type | Priority | Auto-Fix | Severity |\n|---|---|---|---|\n| missing_required | Highest | âŒ | Error |\n| invalid_value | High | âŒ | Error |\n| type_mismatch | Medium | âŒ | Error |\n| invalid_expression | Medium | âŒ | Error |\n| invalid_reference | Low | âŒ | Error |\n| operator_structure | Low | âœ… | Warning |\n\n## Key Insights\n\n### 1. Validation is Iterative\nDon't expect to get it right on the first try. Multiple validation cycles (typically 2-3) are normal and expected!\n\n### 2. False Positives Exist\nMany validation warnings are acceptable in production workflows. This skill helps you recognize which ones to address vs. which to ignore.\n\n### 3. Auto-Sanitization Works\nCertain error types (like operator structure issues) are automatically fixed by n8n. Don't waste time manually fixing these!\n\n### 4. Profile Matters\n- `ai-friendly` reduces false positives by 60%\n- `runtime` is the sweet spot for most use cases\n- `strict` has value pre-production but is noisy\n\n### 5. Error Messages Help\nValidation errors include fix guidance - read them carefully!\n\n## Usage Examples\n\n### Example 1: Basic Validation Loop\n\n```javascript\n// Iteration 1\nlet config = {\n  resource: \"channel\",\n  operation: \"create\"\n};\n\nconst result1 = validate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Error: Missing \"name\"\n\n// Iteration 2\nconfig.name = \"general\";\nconst result2 = validate_node_operation({...});\n// â†’ Valid! âœ…\n```\n\n### Example 2: Handling False Positives\n\n```javascript\n// Run validation\nconst result = validate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n\n// Fix errors (must fix)\nif (!result.valid) {\n  result.errors.forEach(error => {\n    console.log(`MUST FIX: ${error.message}`);\n  });\n}\n\n// Review warnings (context-dependent)\nresult.warnings.forEach(warning => {\n  if (warning.type === 'best_practice' && isDevWorkflow) {\n    console.log(`ACCEPTABLE: ${warning.message}`);\n  } else {\n    console.log(`SHOULD FIX: ${warning.message}`);\n  }\n});\n```\n\n### Example 3: Using Auto-Fix\n\n```javascript\n// Check what can be auto-fixed\nconst preview = n8n_autofix_workflow({\n  id: \"workflow-id\",\n  applyFixes: false  // Preview mode\n});\n\nconsole.log(`Can auto-fix: ${preview.fixCount} issues`);\n\n// Apply fixes\nif (preview.fixCount > 0) {\n  n8n_autofix_workflow({\n    id: \"workflow-id\",\n    applyFixes: true\n  });\n}\n```\n\n## When This Skill Activates\n\n**Trigger phrases**:\n- \"validation error\"\n- \"validation failing\"\n- \"what does this error mean\"\n- \"false positive\"\n- \"validation loop\"\n- \"operator structure\"\n- \"validation profile\"\n\n**Common scenarios**:\n- Encountering validation errors\n- Stuck in validation feedback loops\n- Wondering if warnings need fixing\n- Choosing the right validation profile\n- Understanding auto-sanitization\n\n## Integration with Other Skills\n\n### Works With:\n- **n8n MCP Tools Expert** - How to use validation tools correctly\n- **n8n Expression Syntax** - Fix invalid_expression errors\n- **n8n Node Configuration** - Understand required fields\n- **n8n Workflow Patterns** - Validate pattern implementations\n\n### Complementary:\n- Use MCP Tools Expert to call validation tools\n- Use Expression Syntax to fix expression errors\n- Use Node Configuration to understand dependencies\n- Use Workflow Patterns to validate structure\n\n## Testing\n\n**Evaluations**: 4 test scenarios\n\n1. **eval-001-missing-required-field.json**\n   - Tests error interpretation\n   - Guides to get_node_essentials\n   - References ERROR_CATALOG.md\n\n2. **eval-002-false-positive.json**\n   - Tests warning vs error distinction\n   - Explains false positives\n   - References FALSE_POSITIVES.md\n   - Suggests ai-friendly profile\n\n3. **eval-003-auto-sanitization.json**\n   - Tests auto-sanitization understanding\n   - Explains operator structure fixes\n   - Advises trusting auto-fix\n\n4. **eval-004-validation-loop.json**\n   - Tests iterative validation process\n   - Explains 2-3 iteration pattern\n   - Provides systematic approach\n\n## Success Metrics\n\n**Before this skill**:\n- Users confused by validation errors\n- Multiple failed attempts to fix\n- Frustration with \"validation loops\"\n- Fixing issues that auto-fix handles\n- Fixing all warnings unnecessarily\n\n**After this skill**:\n- Systematic error resolution\n- Understanding of iteration process\n- Recognition of false positives\n- Trust in auto-sanitization\n- Context-aware warning handling\n- 94% success within 3 iterations\n\n## Related Documentation\n\n- **n8n-mcp MCP Server**: Provides validation tools\n- **n8n Validation API**: validate_node_operation, validate_workflow, n8n_autofix_workflow\n- **n8n Issues**: #304 (IF metadata), #306 (Switch branches), #338 (credentials)\n\n## Version History\n\n- **v1.0** (2025-10-20): Initial implementation\n  - SKILL.md with core concepts\n  - ERROR_CATALOG.md with 9 error types\n  - FALSE_POSITIVES.md with 6 false positive patterns\n  - 4 evaluation scenarios\n\n## Author\n\nConceived by Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n\nPart of the n8n-skills meta-skill collection.\n",
        "skills/n8n-validation-expert/SKILL.md": "---\nname: n8n-validation-expert\ndescription: Interpret validation errors and guide fixing them. Use when encountering validation errors, validation warnings, false positives, operator structure issues, or need help understanding validation results. Also use when asking about validation profiles, error types, or the validation loop process.\n---\n\n# n8n Validation Expert\n\nExpert guide for interpreting and fixing n8n validation errors.\n\n---\n\n## Validation Philosophy\n\n**Validate early, validate often**\n\nValidation is typically iterative:\n- Expect validation feedback loops\n- Usually 2-3 validate â†’ fix cycles\n- Average: 23s thinking about errors, 58s fixing them\n\n**Key insight**: Validation is an iterative process, not one-shot!\n\n---\n\n## Error Severity Levels\n\n### 1. Errors (Must Fix)\n**Blocks workflow execution** - Must be resolved before activation\n\n**Types**:\n- `missing_required` - Required field not provided\n- `invalid_value` - Value doesn't match allowed options\n- `type_mismatch` - Wrong data type (string instead of number)\n- `invalid_reference` - Referenced node doesn't exist\n- `invalid_expression` - Expression syntax error\n\n**Example**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"channel\",\n  \"message\": \"Channel name is required\",\n  \"fix\": \"Provide a channel name (lowercase, no spaces, 1-80 characters)\"\n}\n```\n\n### 2. Warnings (Should Fix)\n**Doesn't block execution** - Workflow can be activated but may have issues\n\n**Types**:\n- `best_practice` - Recommended but not required\n- `deprecated` - Using old API/feature\n- `performance` - Potential performance issue\n\n**Example**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"property\": \"errorHandling\",\n  \"message\": \"Slack API can have rate limits\",\n  \"suggestion\": \"Add onError: 'continueRegularOutput' with retryOnFail\"\n}\n```\n\n### 3. Suggestions (Optional)\n**Nice to have** - Improvements that could enhance workflow\n\n**Types**:\n- `optimization` - Could be more efficient\n- `alternative` - Better way to achieve same result\n\n---\n\n## The Validation Loop\n\n### Pattern from Telemetry\n**7,841 occurrences** of this pattern:\n\n```\n1. Configure node\n   â†“\n2. validate_node_operation (23 seconds thinking about errors)\n   â†“\n3. Read error messages carefully\n   â†“\n4. Fix errors\n   â†“\n5. validate_node_operation again (58 seconds fixing)\n   â†“\n6. Repeat until valid (usually 2-3 iterations)\n```\n\n### Example\n```javascript\n// Iteration 1\nlet config = {\n  resource: \"channel\",\n  operation: \"create\"\n};\n\nconst result1 = validate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Error: Missing \"name\"\n\n// â±ï¸  23 seconds thinking...\n\n// Iteration 2\nconfig.name = \"general\";\n\nconst result2 = validate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Error: Missing \"text\"\n\n// â±ï¸  58 seconds fixing...\n\n// Iteration 3\nconfig.text = \"Hello!\";\n\nconst result3 = validate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Valid! âœ…\n```\n\n**This is normal!** Don't be discouraged by multiple iterations.\n\n---\n\n## Validation Profiles\n\nChoose the right profile for your stage:\n\n### minimal\n**Use when**: Quick checks during editing\n\n**Validates**:\n- Only required fields\n- Basic structure\n\n**Pros**: Fastest, most permissive\n**Cons**: May miss issues\n\n### runtime (RECOMMENDED)\n**Use when**: Pre-deployment validation\n\n**Validates**:\n- Required fields\n- Value types\n- Allowed values\n- Basic dependencies\n\n**Pros**: Balanced, catches real errors\n**Cons**: Some edge cases missed\n\n**This is the recommended profile for most use cases**\n\n### ai-friendly\n**Use when**: AI-generated configurations\n\n**Validates**:\n- Same as runtime\n- Reduces false positives\n- More tolerant of minor issues\n\n**Pros**: Less noisy for AI workflows\n**Cons**: May allow some questionable configs\n\n### strict\n**Use when**: Production deployment, critical workflows\n\n**Validates**:\n- Everything\n- Best practices\n- Performance concerns\n- Security issues\n\n**Pros**: Maximum safety\n**Cons**: Many warnings, some false positives\n\n---\n\n## Common Error Types\n\n### 1. missing_required\n**What it means**: A required field is not provided\n\n**How to fix**:\n1. Use `get_node_essentials` to see required fields\n2. Add the missing field to your configuration\n3. Provide an appropriate value\n\n**Example**:\n```javascript\n// Error\n{\n  \"type\": \"missing_required\",\n  \"property\": \"channel\",\n  \"message\": \"Channel name is required\"\n}\n\n// Fix\nconfig.channel = \"#general\";\n```\n\n### 2. invalid_value\n**What it means**: Value doesn't match allowed options\n\n**How to fix**:\n1. Check error message for allowed values\n2. Use `get_node_essentials` to see options\n3. Update to a valid value\n\n**Example**:\n```javascript\n// Error\n{\n  \"type\": \"invalid_value\",\n  \"property\": \"operation\",\n  \"message\": \"Operation must be one of: post, update, delete\",\n  \"current\": \"send\"\n}\n\n// Fix\nconfig.operation = \"post\";  // Use valid operation\n```\n\n### 3. type_mismatch\n**What it means**: Wrong data type for field\n\n**How to fix**:\n1. Check expected type in error message\n2. Convert value to correct type\n\n**Example**:\n```javascript\n// Error\n{\n  \"type\": \"type_mismatch\",\n  \"property\": \"limit\",\n  \"message\": \"Expected number, got string\",\n  \"current\": \"100\"\n}\n\n// Fix\nconfig.limit = 100;  // Number, not string\n```\n\n### 4. invalid_expression\n**What it means**: Expression syntax error\n\n**How to fix**:\n1. Use n8n Expression Syntax skill\n2. Check for missing `{{}}` or typos\n3. Verify node/field references\n\n**Example**:\n```javascript\n// Error\n{\n  \"type\": \"invalid_expression\",\n  \"property\": \"text\",\n  \"message\": \"Invalid expression: $json.name\",\n  \"current\": \"$json.name\"\n}\n\n// Fix\nconfig.text = \"={{$json.name}}\";  // Add {{}}\n```\n\n### 5. invalid_reference\n**What it means**: Referenced node doesn't exist\n\n**How to fix**:\n1. Check node name spelling\n2. Verify node exists in workflow\n3. Update reference to correct name\n\n**Example**:\n```javascript\n// Error\n{\n  \"type\": \"invalid_reference\",\n  \"property\": \"expression\",\n  \"message\": \"Node 'HTTP Requets' does not exist\",\n  \"current\": \"={{$node['HTTP Requets'].json.data}}\"\n}\n\n// Fix - correct typo\nconfig.expression = \"={{$node['HTTP Request'].json.data}}\";\n```\n\n---\n\n## Auto-Sanitization System\n\n### What It Does\n**Automatically fixes common operator structure issues** on ANY workflow update\n\n**Runs when**:\n- `n8n_create_workflow`\n- `n8n_update_partial_workflow`\n- Any workflow save operation\n\n### What It Fixes\n\n#### 1. Binary Operators (Two Values)\n**Operators**: equals, notEquals, contains, notContains, greaterThan, lessThan, startsWith, endsWith\n\n**Fix**: Removes `singleValue` property (binary operators compare two values)\n\n**Before**:\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\",\n  \"singleValue\": true  // âŒ Wrong!\n}\n```\n\n**After** (automatic):\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\"\n  // singleValue removed âœ…\n}\n```\n\n#### 2. Unary Operators (One Value)\n**Operators**: isEmpty, isNotEmpty, true, false\n\n**Fix**: Adds `singleValue: true` (unary operators check single value)\n\n**Before**:\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\"\n  // Missing singleValue âŒ\n}\n```\n\n**After** (automatic):\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\",\n  \"singleValue\": true  // âœ… Added\n}\n```\n\n#### 3. IF/Switch Metadata\n**Fix**: Adds complete `conditions.options` metadata for IF v2.2+ and Switch v3.2+\n\n### What It CANNOT Fix\n\n#### 1. Broken Connections\nReferences to non-existent nodes\n\n**Solution**: Use `cleanStaleConnections` operation in `n8n_update_partial_workflow`\n\n#### 2. Branch Count Mismatches\n3 Switch rules but only 2 output connections\n\n**Solution**: Add missing connections or remove extra rules\n\n#### 3. Paradoxical Corrupt States\nAPI returns corrupt data but rejects updates\n\n**Solution**: May require manual database intervention\n\n---\n\n## False Positives\n\n### What Are They?\nValidation warnings that are technically \"wrong\" but acceptable in your use case\n\n### Common False Positives\n\n#### 1. \"Missing error handling\"\n**Warning**: No error handling configured\n\n**When acceptable**:\n- Simple workflows where failures are obvious\n- Testing/development workflows\n- Non-critical notifications\n\n**When to fix**: Production workflows handling important data\n\n#### 2. \"No retry logic\"\n**Warning**: Node doesn't retry on failure\n\n**When acceptable**:\n- APIs with their own retry logic\n- Idempotent operations\n- Manual trigger workflows\n\n**When to fix**: Flaky external services, production automation\n\n#### 3. \"Missing rate limiting\"\n**Warning**: No rate limiting for API calls\n\n**When acceptable**:\n- Internal APIs with no limits\n- Low-volume workflows\n- APIs with server-side rate limiting\n\n**When to fix**: Public APIs, high-volume workflows\n\n#### 4. \"Unbounded query\"\n**Warning**: SELECT without LIMIT\n\n**When acceptable**:\n- Small known datasets\n- Aggregation queries\n- Development/testing\n\n**When to fix**: Production queries on large tables\n\n### Reducing False Positives\n\n**Use `ai-friendly` profile**:\n```javascript\nvalidate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config: {...},\n  profile: \"ai-friendly\"  // Fewer false positives\n})\n```\n\n---\n\n## Validation Result Structure\n\n### Complete Response\n```javascript\n{\n  \"valid\": false,\n  \"errors\": [\n    {\n      \"type\": \"missing_required\",\n      \"property\": \"channel\",\n      \"message\": \"Channel name is required\",\n      \"fix\": \"Provide a channel name (lowercase, no spaces)\"\n    }\n  ],\n  \"warnings\": [\n    {\n      \"type\": \"best_practice\",\n      \"property\": \"errorHandling\",\n      \"message\": \"Slack API can have rate limits\",\n      \"suggestion\": \"Add onError: 'continueRegularOutput'\"\n    }\n  ],\n  \"suggestions\": [\n    {\n      \"type\": \"optimization\",\n      \"message\": \"Consider using batch operations for multiple messages\"\n    }\n  ],\n  \"summary\": {\n    \"hasErrors\": true,\n    \"errorCount\": 1,\n    \"warningCount\": 1,\n    \"suggestionCount\": 1\n  }\n}\n```\n\n### How to Read It\n\n#### 1. Check `valid` field\n```javascript\nif (result.valid) {\n  // âœ… Configuration is valid\n} else {\n  // âŒ Has errors - must fix before deployment\n}\n```\n\n#### 2. Fix errors first\n```javascript\nresult.errors.forEach(error => {\n  console.log(`Error in ${error.property}: ${error.message}`);\n  console.log(`Fix: ${error.fix}`);\n});\n```\n\n#### 3. Review warnings\n```javascript\nresult.warnings.forEach(warning => {\n  console.log(`Warning: ${warning.message}`);\n  console.log(`Suggestion: ${warning.suggestion}`);\n  // Decide if you need to address this\n});\n```\n\n#### 4. Consider suggestions\n```javascript\n// Optional improvements\n// Not required but may enhance workflow\n```\n\n---\n\n## Workflow Validation\n\n### validate_workflow (Structure)\n**Validates entire workflow**, not just individual nodes\n\n**Checks**:\n1. **Node configurations** - Each node valid\n2. **Connections** - No broken references\n3. **Expressions** - Syntax and references valid\n4. **Flow** - Logical workflow structure\n\n**Example**:\n```javascript\nvalidate_workflow({\n  workflow: {\n    nodes: [...],\n    connections: {...}\n  },\n  options: {\n    validateNodes: true,\n    validateConnections: true,\n    validateExpressions: true,\n    profile: \"runtime\"\n  }\n})\n```\n\n### Common Workflow Errors\n\n#### 1. Broken Connections\n```json\n{\n  \"error\": \"Connection from 'Transform' to 'NonExistent' - target node not found\"\n}\n```\n\n**Fix**: Remove stale connection or create missing node\n\n#### 2. Circular Dependencies\n```json\n{\n  \"error\": \"Circular dependency detected: Node A â†’ Node B â†’ Node A\"\n}\n```\n\n**Fix**: Restructure workflow to remove loop\n\n#### 3. Multiple Start Nodes\n```json\n{\n  \"warning\": \"Multiple trigger nodes found - only one will execute\"\n}\n```\n\n**Fix**: Remove extra triggers or split into separate workflows\n\n#### 4. Disconnected Nodes\n```json\n{\n  \"warning\": \"Node 'Transform' is not connected to workflow flow\"\n}\n```\n\n**Fix**: Connect node or remove if unused\n\n---\n\n## Recovery Strategies\n\n### Strategy 1: Start Fresh\n**When**: Configuration is severely broken\n\n**Steps**:\n1. Note required fields from `get_node_essentials`\n2. Create minimal valid configuration\n3. Add features incrementally\n4. Validate after each addition\n\n### Strategy 2: Binary Search\n**When**: Workflow validates but executes incorrectly\n\n**Steps**:\n1. Remove half the nodes\n2. Validate and test\n3. If works: problem is in removed nodes\n4. If fails: problem is in remaining nodes\n5. Repeat until problem isolated\n\n### Strategy 3: Clean Stale Connections\n**When**: \"Node not found\" errors\n\n**Steps**:\n```javascript\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  operations: [{\n    type: \"cleanStaleConnections\"\n  }]\n})\n```\n\n### Strategy 4: Use Auto-fix\n**When**: Operator structure errors\n\n**Steps**:\n```javascript\nn8n_autofix_workflow({\n  id: \"workflow-id\",\n  applyFixes: false  // Preview first\n})\n\n// Review fixes, then apply\nn8n_autofix_workflow({\n  id: \"workflow-id\",\n  applyFixes: true\n})\n```\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n- Validate after every significant change\n- Read error messages completely\n- Fix errors iteratively (one at a time)\n- Use `runtime` profile for pre-deployment\n- Check `valid` field before assuming success\n- Trust auto-sanitization for operator issues\n- Use `get_node_essentials` when unclear about requirements\n- Document false positives you accept\n\n### âŒ Don't\n\n- Skip validation before activation\n- Try to fix all errors at once\n- Ignore error messages\n- Use `strict` profile during development (too noisy)\n- Assume validation passed (always check result)\n- Manually fix auto-sanitization issues\n- Deploy with unresolved errors\n- Ignore all warnings (some are important!)\n\n---\n\n## Detailed Guides\n\nFor comprehensive error catalogs and false positive examples:\n\n- **[ERROR_CATALOG.md](ERROR_CATALOG.md)** - Complete list of error types with examples\n- **[FALSE_POSITIVES.md](FALSE_POSITIVES.md)** - When warnings are acceptable\n\n---\n\n## Summary\n\n**Key Points**:\n1. **Validation is iterative** (avg 2-3 cycles, 23s + 58s)\n2. **Errors must be fixed**, warnings are optional\n3. **Auto-sanitization** fixes operator structures automatically\n4. **Use runtime profile** for balanced validation\n5. **False positives exist** - learn to recognize them\n6. **Read error messages** - they contain fix guidance\n\n**Validation Process**:\n1. Validate â†’ Read errors â†’ Fix â†’ Validate again\n2. Repeat until valid (usually 2-3 iterations)\n3. Review warnings and decide if acceptable\n4. Deploy with confidence\n\n**Related Skills**:\n- n8n MCP Tools Expert - Use validation tools correctly\n- n8n Expression Syntax - Fix expression errors\n- n8n Node Configuration - Understand required fields\n",
        "skills/n8n-workflow-patterns/README.md": "# n8n Workflow Patterns\n\nProven architectural patterns for building n8n workflows.\n\n---\n\n## Purpose\n\nTeaches architectural patterns for building n8n workflows. Provides structure, best practices, and proven approaches for common use cases.\n\n## Activates On\n\n- build workflow\n- workflow pattern\n- workflow architecture\n- workflow structure\n- webhook processing\n- http api\n- api integration\n- database sync\n- ai agent\n- chatbot\n- scheduled task\n- automation pattern\n\n## File Count\n\n7 files, ~3,700 lines total\n\n## Priority\n\n**HIGH** - Addresses 813 webhook searches (most common use case)\n\n## Dependencies\n\n**n8n-mcp tools**:\n- search_nodes (find nodes for patterns)\n- get_node_essentials (understand node operations)\n- search_templates (find example workflows)\n\n**Related skills**:\n- n8n MCP Tools Expert (find and configure nodes)\n- n8n Expression Syntax (write expressions in patterns)\n- n8n Node Configuration (configure pattern nodes)\n- n8n Validation Expert (validate pattern implementations)\n\n## Coverage\n\n### The 5 Core Patterns\n\n1. **Webhook Processing** (Most Common - 813 searches)\n   - Receive HTTP requests â†’ Process â†’ Respond\n   - Critical gotcha: Data under $json.body\n   - Authentication, validation, error handling\n\n2. **HTTP API Integration** (892 templates)\n   - Fetch from REST APIs â†’ Transform â†’ Store/Use\n   - Authentication methods, pagination, rate limiting\n   - Error handling and retries\n\n3. **Database Operations** (456 templates)\n   - Read/Write/Sync database data\n   - Batch processing, transactions, performance\n   - Security: parameterized queries, read-only access\n\n4. **AI Agent Workflow** (234 templates, 270 AI nodes)\n   - AI agents with tool access and memory\n   - 8 AI connection types\n   - ANY node can be an AI tool\n\n5. **Scheduled Tasks** (28% of all workflows)\n   - Recurring automation workflows\n   - Cron schedules, timezone handling\n   - Monitoring and error handling\n\n### Cross-Cutting Concerns\n\n- Data flow patterns (linear, branching, parallel, loops)\n- Error handling strategies\n- Performance optimization\n- Security best practices\n- Testing approaches\n- Monitoring and logging\n\n## Evaluations\n\n5 scenarios (100% coverage expected):\n1. **eval-001**: Webhook workflow structure\n2. **eval-002**: HTTP API integration pattern\n3. **eval-003**: Database sync pattern\n4. **eval-004**: AI agent workflow with tools\n5. **eval-005**: Scheduled report generation\n\n## Key Features\n\nâœ… **5 Proven Patterns**: Webhook, HTTP API, Database, AI Agent, Scheduled tasks\nâœ… **Complete Examples**: Working workflow configurations for each pattern\nâœ… **Best Practices**: Proven approaches from real-world n8n usage\nâœ… **Common Gotchas**: Documented mistakes and their fixes\nâœ… **Integration Guide**: How patterns work with other skills\nâœ… **Template Examples**: Real examples from 2,653+ n8n templates\n\n## Files\n\n- **SKILL.md** (486 lines) - Pattern overview, selection guide, checklist\n- **webhook_processing.md** (554 lines) - Webhook patterns, data structure, auth\n- **http_api_integration.md** (763 lines) - REST APIs, pagination, rate limiting\n- **database_operations.md** (854 lines) - DB operations, batch processing, security\n- **ai_agent_workflow.md** (918 lines) - AI agents, tools, memory, 8 connection types\n- **scheduled_tasks.md** (845 lines) - Cron schedules, timezone, monitoring\n- **README.md** (this file) - Skill metadata\n\n## Success Metrics\n\n**Expected outcomes**:\n- Users select appropriate pattern for their use case\n- Workflows follow proven structural patterns\n- Common gotchas avoided (webhook $json.body, SQL injection, etc.)\n- Proper error handling implemented\n- Security best practices followed\n\n## Pattern Selection Stats\n\nCommon workflow composition:\n\n**Trigger Distribution**:\n- Webhook: 35% (most common)\n- Schedule: 28%\n- Manual: 22%\n- Service triggers: 15%\n\n**Transformation Nodes**:\n- Set: 68%\n- Code: 42%\n- IF: 38%\n- Switch: 18%\n\n**Output Channels**:\n- HTTP Request: 45%\n- Slack: 32%\n- Database: 28%\n- Email: 24%\n\n**Complexity**:\n- Simple (3-5 nodes): 42%\n- Medium (6-10 nodes): 38%\n- Complex (11+ nodes): 20%\n\n## Critical Insights\n\n**Webhook Processing**:\n- 813 searches (most common use case!)\n- #1 gotcha: Data under $json.body (not $json directly)\n- Must choose response mode: onReceived vs lastNode\n\n**API Integration**:\n- Authentication via credentials (never hardcode!)\n- Pagination essential for large datasets\n- Rate limiting prevents API bans\n- continueOnFail: true for error handling\n\n**Database Operations**:\n- Always use parameterized queries (SQL injection prevention)\n- Batch processing for large datasets\n- Read-only access for AI tools\n- Transaction handling for multi-step operations\n\n**AI Agents**:\n- 8 AI connection types (ai_languageModel, ai_tool, ai_memory, etc.)\n- ANY node can be an AI tool (connect to ai_tool port)\n- Memory essential for conversations (Window Buffer recommended)\n- Tool descriptions critical (AI uses them to decide when to call)\n\n**Scheduled Tasks**:\n- Set workflow timezone explicitly (DST handling)\n- Prevent overlapping executions (use locks)\n- Error Trigger workflow for alerts\n- Batch processing for large data\n\n## Workflow Creation Checklist\n\nEvery pattern follows this checklist:\n\n### Planning Phase\n- [ ] Identify the pattern (webhook, API, database, AI, scheduled)\n- [ ] List required nodes (use search_nodes)\n- [ ] Understand data flow (input â†’ transform â†’ output)\n- [ ] Plan error handling strategy\n\n### Implementation Phase\n- [ ] Create workflow with appropriate trigger\n- [ ] Add data source nodes\n- [ ] Configure authentication/credentials\n- [ ] Add transformation nodes (Set, Code, IF)\n- [ ] Add output/action nodes\n- [ ] Configure error handling\n\n### Validation Phase\n- [ ] Validate each node configuration\n- [ ] Validate complete workflow\n- [ ] Test with sample data\n- [ ] Handle edge cases\n\n### Deployment Phase\n- [ ] Review workflow settings\n- [ ] Activate workflow\n- [ ] Monitor first executions\n- [ ] Document workflow\n\n## Real Template Examples\n\n**Weather to Slack** (Template #2947):\n```\nSchedule (daily 8 AM) â†’ HTTP Request (weather) â†’ Set â†’ Slack\n```\n\n**Webhook Processing**: 1,085 templates\n**HTTP API Integration**: 892 templates\n**Database Operations**: 456 templates\n**AI Workflows**: 234 templates\n\nUse `search_templates` to find examples for your use case!\n\n## Integration with Other Skills\n\n**Pattern Selection** (this skill):\n1. Identify use case\n2. Select appropriate pattern\n3. Follow pattern structure\n\n**Node Discovery** (n8n MCP Tools Expert):\n4. Find nodes for pattern (search_nodes)\n5. Understand node operations (get_node_essentials)\n\n**Implementation** (n8n Expression Syntax + Node Configuration):\n6. Write expressions ({{$json.body.field}})\n7. Configure nodes properly\n\n**Validation** (n8n Validation Expert):\n8. Validate workflow structure\n9. Fix validation errors\n\n## Last Updated\n\n2025-10-20\n\n---\n\n**Part of**: n8n-skills repository\n**Conceived by**: Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n",
        "skills/n8n-workflow-patterns/SKILL.md": "---\nname: n8n-workflow-patterns\ndescription: Proven workflow architectural patterns from real n8n workflows. Use when building new workflows, designing workflow structure, choosing workflow patterns, planning workflow architecture, or asking about webhook processing, HTTP API integration, database operations, AI agent workflows, or scheduled tasks.\n---\n\n# n8n Workflow Patterns\n\nProven architectural patterns for building n8n workflows.\n\n---\n\n## The 5 Core Patterns\n\nBased on analysis of real workflow usage:\n\n1. **[Webhook Processing](webhook_processing.md)** (Most Common)\n   - Receive HTTP requests â†’ Process â†’ Output\n   - Pattern: Webhook â†’ Validate â†’ Transform â†’ Respond/Notify\n\n2. **[HTTP API Integration](http_api_integration.md)**\n   - Fetch from REST APIs â†’ Transform â†’ Store/Use\n   - Pattern: Trigger â†’ HTTP Request â†’ Transform â†’ Action â†’ Error Handler\n\n3. **[Database Operations](database_operations.md)**\n   - Read/Write/Sync database data\n   - Pattern: Schedule â†’ Query â†’ Transform â†’ Write â†’ Verify\n\n4. **[AI Agent Workflow](ai_agent_workflow.md)**\n   - AI agents with tools and memory\n   - Pattern: Trigger â†’ AI Agent (Model + Tools + Memory) â†’ Output\n\n5. **[Scheduled Tasks](scheduled_tasks.md)**\n   - Recurring automation workflows\n   - Pattern: Schedule â†’ Fetch â†’ Process â†’ Deliver â†’ Log\n\n---\n\n## Pattern Selection Guide\n\n### When to use each pattern:\n\n**Webhook Processing** - Use when:\n- Receiving data from external systems\n- Building integrations (Slack commands, form submissions, GitHub webhooks)\n- Need instant response to events\n- Example: \"Receive Stripe payment webhook â†’ Update database â†’ Send confirmation\"\n\n**HTTP API Integration** - Use when:\n- Fetching data from external APIs\n- Synchronizing with third-party services\n- Building data pipelines\n- Example: \"Fetch GitHub issues â†’ Transform â†’ Create Jira tickets\"\n\n**Database Operations** - Use when:\n- Syncing between databases\n- Running database queries on schedule\n- ETL workflows\n- Example: \"Read Postgres records â†’ Transform â†’ Write to MySQL\"\n\n**AI Agent Workflow** - Use when:\n- Building conversational AI\n- Need AI with tool access\n- Multi-step reasoning tasks\n- Example: \"Chat with AI that can search docs, query database, send emails\"\n\n**Scheduled Tasks** - Use when:\n- Recurring reports or summaries\n- Periodic data fetching\n- Maintenance tasks\n- Example: \"Daily: Fetch analytics â†’ Generate report â†’ Email team\"\n\n---\n\n## Common Workflow Components\n\nAll patterns share these building blocks:\n\n### 1. Triggers\n- **Webhook** - HTTP endpoint (instant)\n- **Schedule** - Cron-based timing (periodic)\n- **Manual** - Click to execute (testing)\n- **Polling** - Check for changes (intervals)\n\n### 2. Data Sources\n- **HTTP Request** - REST APIs\n- **Database nodes** - Postgres, MySQL, MongoDB\n- **Service nodes** - Slack, Google Sheets, etc.\n- **Code** - Custom JavaScript/Python\n\n### 3. Transformation\n- **Set** - Map/transform fields\n- **Code** - Complex logic\n- **IF/Switch** - Conditional routing\n- **Merge** - Combine data streams\n\n### 4. Outputs\n- **HTTP Request** - Call APIs\n- **Database** - Write data\n- **Communication** - Email, Slack, Discord\n- **Storage** - Files, cloud storage\n\n### 5. Error Handling\n- **Error Trigger** - Catch workflow errors\n- **IF** - Check for error conditions\n- **Stop and Error** - Explicit failure\n- **Continue On Fail** - Per-node setting\n\n---\n\n## Workflow Creation Checklist\n\nWhen building ANY workflow, follow this checklist:\n\n### Planning Phase\n- [ ] Identify the pattern (webhook, API, database, AI, scheduled)\n- [ ] List required nodes (use search_nodes)\n- [ ] Understand data flow (input â†’ transform â†’ output)\n- [ ] Plan error handling strategy\n\n### Implementation Phase\n- [ ] Create workflow with appropriate trigger\n- [ ] Add data source nodes\n- [ ] Configure authentication/credentials\n- [ ] Add transformation nodes (Set, Code, IF)\n- [ ] Add output/action nodes\n- [ ] Configure error handling\n\n### Validation Phase\n- [ ] Validate each node configuration (validate_node_operation)\n- [ ] Validate complete workflow (validate_workflow)\n- [ ] Test with sample data\n- [ ] Handle edge cases (empty data, errors)\n\n### Deployment Phase\n- [ ] Review workflow settings (execution order, timeout, error handling)\n- [ ] Activate workflow âš ï¸ **Manual activation required in n8n UI** (API/MCP cannot activate)\n- [ ] Monitor first executions\n- [ ] Document workflow purpose and data flow\n\n---\n\n## Data Flow Patterns\n\n### Linear Flow\n```\nTrigger â†’ Transform â†’ Action â†’ End\n```\n**Use when**: Simple workflows with single path\n\n### Branching Flow\n```\nTrigger â†’ IF â†’ [True Path]\n             â””â†’ [False Path]\n```\n**Use when**: Different actions based on conditions\n\n### Parallel Processing\n```\nTrigger â†’ [Branch 1] â†’ Merge\n       â””â†’ [Branch 2] â†—\n```\n**Use when**: Independent operations that can run simultaneously\n\n### Loop Pattern\n```\nTrigger â†’ Split in Batches â†’ Process â†’ Loop (until done)\n```\n**Use when**: Processing large datasets in chunks\n\n### Error Handler Pattern\n```\nMain Flow â†’ [Success Path]\n         â””â†’ [Error Trigger â†’ Error Handler]\n```\n**Use when**: Need separate error handling workflow\n\n---\n\n## Common Gotchas\n\n### 1. Webhook Data Structure\n**Problem**: Can't access webhook payload data\n\n**Solution**: Data is nested under `$json.body`\n```javascript\nâŒ {{$json.email}}\nâœ… {{$json.body.email}}\n```\nSee: n8n Expression Syntax skill\n\n### 2. Multiple Input Items\n**Problem**: Node processes all input items, but I only want one\n\n**Solution**: Use \"Execute Once\" mode or process first item only\n```javascript\n{{$json[0].field}}  // First item only\n```\n\n### 3. Authentication Issues\n**Problem**: API calls failing with 401/403\n\n**Solution**:\n- Configure credentials properly\n- Use the \"Credentials\" section, not parameters\n- Test credentials before workflow activation\n\n### 4. Node Execution Order\n**Problem**: Nodes executing in unexpected order\n\n**Solution**: Check workflow settings â†’ Execution Order\n- v0: Top-to-bottom (legacy)\n- v1: Connection-based (recommended)\n\n### 5. Expression Errors\n**Problem**: Expressions showing as literal text\n\n**Solution**: Use {{}} around expressions\n- See n8n Expression Syntax skill for details\n\n---\n\n## Integration with Other Skills\n\nThese skills work together with Workflow Patterns:\n\n**n8n MCP Tools Expert** - Use to:\n- Find nodes for your pattern (search_nodes)\n- Understand node operations (get_node_essentials)\n- Create workflows (n8n_create_workflow)\n\n**n8n Expression Syntax** - Use to:\n- Write expressions in transformation nodes\n- Access webhook data correctly ({{$json.body.field}})\n- Reference previous nodes ({{$node[\"Node Name\"].json.field}})\n\n**n8n Node Configuration** - Use to:\n- Configure specific operations for pattern nodes\n- Understand node-specific requirements\n\n**n8n Validation Expert** - Use to:\n- Validate workflow structure\n- Fix validation errors\n- Ensure workflow correctness before deployment\n\n---\n\n## Pattern Statistics\n\nCommon workflow patterns:\n\n**Most Common Triggers**:\n1. Webhook - 35%\n2. Schedule (periodic tasks) - 28%\n3. Manual (testing/admin) - 22%\n4. Service triggers (Slack, email, etc.) - 15%\n\n**Most Common Transformations**:\n1. Set (field mapping) - 68%\n2. Code (custom logic) - 42%\n3. IF (conditional routing) - 38%\n4. Switch (multi-condition) - 18%\n\n**Most Common Outputs**:\n1. HTTP Request (APIs) - 45%\n2. Slack - 32%\n3. Database writes - 28%\n4. Email - 24%\n\n**Average Workflow Complexity**:\n- Simple (3-5 nodes): 42%\n- Medium (6-10 nodes): 38%\n- Complex (11+ nodes): 20%\n\n---\n\n## Quick Start Examples\n\n### Example 1: Simple Webhook â†’ Slack\n```\n1. Webhook (path: \"form-submit\", POST)\n2. Set (map form fields)\n3. Slack (post message to #notifications)\n```\n\n### Example 2: Scheduled Report\n```\n1. Schedule (daily at 9 AM)\n2. HTTP Request (fetch analytics)\n3. Code (aggregate data)\n4. Email (send formatted report)\n5. Error Trigger â†’ Slack (notify on failure)\n```\n\n### Example 3: Database Sync\n```\n1. Schedule (every 15 minutes)\n2. Postgres (query new records)\n3. IF (check if records exist)\n4. MySQL (insert records)\n5. Postgres (update sync timestamp)\n```\n\n### Example 4: AI Assistant\n```\n1. Webhook (receive chat message)\n2. AI Agent\n   â”œâ”€ OpenAI Chat Model (ai_languageModel)\n   â”œâ”€ HTTP Request Tool (ai_tool)\n   â”œâ”€ Database Tool (ai_tool)\n   â””â”€ Window Buffer Memory (ai_memory)\n3. Webhook Response (send AI reply)\n```\n\n### Example 5: API Integration\n```\n1. Manual Trigger (for testing)\n2. HTTP Request (GET /api/users)\n3. Split In Batches (process 100 at a time)\n4. Set (transform user data)\n5. Postgres (upsert users)\n6. Loop (back to step 3 until done)\n```\n\n---\n\n## Detailed Pattern Files\n\nFor comprehensive guidance on each pattern:\n\n- **[webhook_processing.md](webhook_processing.md)** - Webhook patterns, data structure, response handling\n- **[http_api_integration.md](http_api_integration.md)** - REST APIs, authentication, pagination, retries\n- **[database_operations.md](database_operations.md)** - Queries, sync, transactions, batch processing\n- **[ai_agent_workflow.md](ai_agent_workflow.md)** - AI agents, tools, memory, langchain nodes\n- **[scheduled_tasks.md](scheduled_tasks.md)** - Cron schedules, reports, maintenance tasks\n\n---\n\n## Real Template Examples\n\nFrom n8n template library:\n\n**Template #2947**: Weather to Slack\n- Pattern: Scheduled Task\n- Nodes: Schedule â†’ HTTP Request (weather API) â†’ Set â†’ Slack\n- Complexity: Simple (4 nodes)\n\n**Webhook Processing**: Most common pattern\n- Most common: Form submissions, payment webhooks, chat integrations\n\n**HTTP API**: Common pattern\n- Most common: Data fetching, third-party integrations\n\n**Database Operations**: Common pattern\n- Most common: ETL, data sync, backup workflows\n\n**AI Agents**: Growing in usage\n- Most common: Chatbots, content generation, data analysis\n\nUse `search_templates` and `get_template` from n8n-mcp tools to find examples!\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n- Start with the simplest pattern that solves your problem\n- Plan your workflow structure before building\n- Use error handling on all workflows\n- Test with sample data before activation\n- Follow the workflow creation checklist\n- Use descriptive node names\n- Document complex workflows (notes field)\n- Monitor workflow executions after deployment\n\n### âŒ Don't\n\n- Build workflows in one shot (iterate! avg 56s between edits)\n- Skip validation before activation\n- Ignore error scenarios\n- Use complex patterns when simple ones suffice\n- Hardcode credentials in parameters\n- Forget to handle empty data cases\n- Mix multiple patterns without clear boundaries\n- Deploy without testing\n\n---\n\n## Summary\n\n**Key Points**:\n1. **5 core patterns** cover 90%+ of workflow use cases\n2. **Webhook processing** is the most common pattern\n3. Use the **workflow creation checklist** for every workflow\n4. **Plan pattern** â†’ **Select nodes** â†’ **Build** â†’ **Validate** â†’ **Deploy**\n5. Integrate with other skills for complete workflow development\n\n**Next Steps**:\n1. Identify your use case pattern\n2. Read the detailed pattern file\n3. Use n8n MCP Tools Expert to find nodes\n4. Follow the workflow creation checklist\n5. Use n8n Validation Expert to validate\n\n**Related Skills**:\n- n8n MCP Tools Expert - Find and configure nodes\n- n8n Expression Syntax - Write expressions correctly\n- n8n Validation Expert - Validate and fix errors\n- n8n Node Configuration - Configure specific operations\n",
        "skills/n8n-workflow-patterns/ai_agent_workflow.md": "# AI Agent Workflow Pattern\n\n**Use Case**: Build AI agents with tool access, memory, and reasoning capabilities.\n\n---\n\n## Pattern Structure\n\n```\nTrigger â†’ AI Agent (Model + Tools + Memory) â†’ [Process Response] â†’ Output\n```\n\n**Key Characteristic**: AI-powered decision making with tool use\n\n---\n\n## Core AI Connection Types\n\nn8n supports **8 AI connection types** for building agent workflows:\n\n1. **ai_languageModel** - The LLM (OpenAI, Anthropic, etc.)\n2. **ai_tool** - Functions the agent can call\n3. **ai_memory** - Conversation context\n4. **ai_outputParser** - Parse structured outputs\n5. **ai_embedding** - Vector embeddings\n6. **ai_vectorStore** - Vector database\n7. **ai_document** - Document loaders\n8. **ai_textSplitter** - Text chunking\n\n---\n\n## Core Components\n\n### 1. Trigger\n**Options**:\n- **Webhook** - Chat interfaces, API calls (most common)\n- **Manual** - Testing and development\n- **Schedule** - Periodic AI tasks\n\n### 2. AI Agent Node\n**Purpose**: Orchestrate LLM with tools and memory\n\n**Configuration**:\n```javascript\n{\n  agent: \"conversationalAgent\",  // or \"openAIFunctionsAgent\"\n  promptType: \"define\",\n  text: \"You are a helpful assistant that can search docs, query databases, and send emails.\"\n}\n```\n\n**Connections**:\n- **ai_languageModel input** - Connected to LLM node\n- **ai_tool inputs** - Connected to tool nodes\n- **ai_memory input** - Connected to memory node (optional)\n\n### 3. Language Model\n**Available providers**:\n- OpenAI (GPT-4, GPT-3.5)\n- Anthropic (Claude)\n- Google (Gemini)\n- Local models (Ollama, LM Studio)\n\n**Example** (OpenAI Chat Model):\n```javascript\n{\n  model: \"gpt-4\",\n  temperature: 0.7,\n  maxTokens: 1000\n}\n```\n\n### 4. Tools (ANY Node Can Be a Tool!)\n**Critical insight**: Connect ANY n8n node to agent via `ai_tool` port\n\n**Common tool types**:\n- HTTP Request - Call APIs\n- Database nodes - Query data\n- Code - Custom functions\n- Search nodes - Web/document search\n- Pre-built tool nodes (Calculator, Wikipedia, etc.)\n\n### 5. Memory (Optional but Recommended)\n**Purpose**: Maintain conversation context\n\n**Types**:\n- **Buffer Memory** - Store recent messages\n- **Window Buffer Memory** - Store last N messages\n- **Summary Memory** - Summarize conversation\n\n### 6. Output Processing\n**Purpose**: Format AI response for delivery\n\n**Common patterns**:\n- Return directly (chat response)\n- Store in database (conversation history)\n- Send to communication channel (Slack, email)\n\n---\n\n## Common Use Cases\n\n### 1. Conversational Chatbot\n**Flow**: Webhook (chat message) â†’ AI Agent â†’ Webhook Response\n\n**Example** (Customer support bot):\n```\n1. Webhook (path: \"chat\", POST)\n   - Receives: {user_id, message, session_id}\n\n2. Window Buffer Memory (load context by session_id)\n\n3. AI Agent\n   â”œâ”€ OpenAI Chat Model (gpt-4)\n   â”œâ”€ HTTP Request Tool (search knowledge base)\n   â”œâ”€ Database Tool (query customer orders)\n   â””â”€ Window Buffer Memory (conversation context)\n\n4. Code (format response)\n\n5. Webhook Response (send reply)\n```\n\n**AI Agent prompt**:\n```\nYou are a customer support assistant.\nYou can:\n1. Search the knowledge base for answers\n2. Look up customer orders\n3. Provide shipping information\n\nBe helpful and professional.\n```\n\n### 2. Document Q&A\n**Flow**: Upload docs â†’ Embed â†’ Store â†’ Query with AI\n\n**Example** (Internal documentation assistant):\n```\nSetup Phase (run once):\n1. Read Files (load documentation)\n2. Text Splitter (chunk into paragraphs)\n3. Embeddings (OpenAI Embeddings)\n4. Vector Store (Pinecone/Qdrant) (store vectors)\n\nQuery Phase (recurring):\n1. Webhook (receive question)\n2. AI Agent\n   â”œâ”€ OpenAI Chat Model (gpt-4)\n   â”œâ”€ Vector Store Tool (search similar docs)\n   â””â”€ Buffer Memory (context)\n3. Webhook Response (answer with citations)\n```\n\n### 3. Data Analysis Assistant\n**Flow**: Request â†’ AI Agent (with data tools) â†’ Analysis â†’ Visualization\n\n**Example** (SQL analyst agent):\n```\n1. Webhook (data question: \"What were sales last month?\")\n\n2. AI Agent\n   â”œâ”€ OpenAI Chat Model (gpt-4)\n   â”œâ”€ Postgres Tool (execute queries)\n   â””â”€ Code Tool (data analysis)\n\n3. Code (generate visualization data)\n\n4. Webhook Response (answer + chart data)\n```\n\n**Postgres Tool Configuration**:\n```javascript\n{\n  name: \"query_database\",\n  description: \"Execute SQL queries to analyze sales data. Use SELECT queries only.\",\n  // Node executes AI-generated SQL\n}\n```\n\n### 4. Workflow Automation Agent\n**Flow**: Command â†’ AI Agent â†’ Execute actions â†’ Report\n\n**Example** (DevOps assistant):\n```\n1. Slack (slash command: /deploy production)\n\n2. AI Agent\n   â”œâ”€ OpenAI Chat Model (gpt-4)\n   â”œâ”€ HTTP Request Tool (GitHub API)\n   â”œâ”€ HTTP Request Tool (Deploy API)\n   â””â”€ Postgres Tool (deployment logs)\n\n3. Agent actions:\n   - Check if tests passed\n   - Create deployment\n   - Log deployment\n   - Notify team\n\n4. Slack (deployment status)\n```\n\n### 5. Email Processing Agent\n**Flow**: Email received â†’ AI Agent â†’ Categorize â†’ Route â†’ Respond\n\n**Example** (Support ticket router):\n```\n1. Email Trigger (new support email)\n\n2. AI Agent\n   â”œâ”€ OpenAI Chat Model (gpt-4)\n   â”œâ”€ Vector Store Tool (search similar tickets)\n   â””â”€ HTTP Request Tool (create Jira ticket)\n\n3. Agent actions:\n   - Categorize urgency (low/medium/high)\n   - Find similar past tickets\n   - Create ticket in appropriate project\n   - Draft response\n\n4. Email (send auto-response)\n5. Slack (notify assigned team)\n```\n\n---\n\n## Tool Configuration\n\n### Making ANY Node an AI Tool\n\n**Critical concept**: Any n8n node can become an AI tool!\n\n**Requirements**:\n1. Connect node to AI Agent via `ai_tool` port (NOT main port)\n2. Configure tool name and description\n3. Define input schema (optional)\n\n**Example** (HTTP Request as tool):\n```javascript\n{\n  // Tool metadata (for AI)\n  name: \"search_github_issues\",\n  description: \"Search GitHub issues by keyword. Returns issue titles and URLs.\",\n\n  // HTTP Request configuration\n  method: \"GET\",\n  url: \"https://api.github.com/search/issues\",\n  sendQuery: true,\n  queryParameters: {\n    \"q\": \"={{$json.query}} repo:{{$json.repo}}\",\n    \"per_page\": \"5\"\n  }\n}\n```\n\n**How it works**:\n1. AI Agent sees tool: `search_github_issues(query, repo)`\n2. AI decides to use it: `search_github_issues(\"bug\", \"n8n-io/n8n\")`\n3. n8n executes HTTP Request with parameters\n4. Result returned to AI Agent\n5. AI Agent processes result and responds\n\n### Pre-built Tool Nodes\n\n**Available in @n8n/n8n-nodes-langchain**:\n\n- **Calculator Tool** - Math operations\n- **Wikipedia Tool** - Wikipedia search\n- **Serper Tool** - Google search\n- **Wolfram Alpha Tool** - Computational knowledge\n- **Custom Tool** - Define with Code node\n\n**Example** (Calculator Tool):\n```\nAI Agent\n  â”œâ”€ OpenAI Chat Model\n  â””â”€ Calculator Tool (ai_tool connection)\n\nUser: \"What's 15% of 2,847?\"\nAI: *uses calculator tool* â†’ \"426.05\"\n```\n\n### Database as Tool\n\n**Pattern**: Postgres/MySQL node connected as ai_tool\n\n**Configuration**:\n```javascript\n{\n  // Tool metadata\n  name: \"query_customers\",\n  description: \"Query customer database. Use SELECT queries to find customer information by email, name, or ID.\",\n\n  // Postgres config\n  operation: \"executeQuery\",\n  query: \"={{$json.sql}}\",  // AI provides SQL\n  // Security: Use read-only database user!\n}\n```\n\n**Safety**: Create read-only DB user for AI tools!\n\n```sql\nCREATE USER ai_readonly WITH PASSWORD 'secure_password';\nGRANT SELECT ON customers, orders TO ai_readonly;\n-- NO INSERT, UPDATE, DELETE access\n```\n\n### Code Node as Tool\n\n**Pattern**: Custom Python/JavaScript function\n\n**Example** (Data processor):\n```javascript\n// Tool metadata\n{\n  name: \"process_csv\",\n  description: \"Process CSV data and return statistics. Input: csv_string\"\n}\n\n// Code node\nconst csv = $input.first().json.csv_string;\nconst lines = csv.split('\\n');\nconst data = lines.slice(1).map(line => line.split(','));\n\nreturn [{\n  json: {\n    row_count: data.length,\n    columns: lines[0].split(','),\n    summary: {\n      // Calculate statistics\n    }\n  }\n}];\n```\n\n---\n\n## Memory Configuration\n\n### Buffer Memory\n**Stores all messages** (until cleared)\n\n```javascript\n{\n  memoryType: \"bufferMemory\",\n  sessionKey: \"={{$json.body.user_id}}\"  // Per-user memory\n}\n```\n\n### Window Buffer Memory\n**Stores last N messages** (recommended)\n\n```javascript\n{\n  memoryType: \"windowBufferMemory\",\n  sessionKey: \"={{$json.body.session_id}}\",\n  contextWindowLength: 10  // Last 10 messages\n}\n```\n\n### Summary Memory\n**Summarizes old messages** (for long conversations)\n\n```javascript\n{\n  memoryType: \"summaryMemory\",\n  sessionKey: \"={{$json.body.session_id}}\",\n  maxTokenLimit: 2000\n}\n```\n\n**How it works**:\n1. Conversation grows beyond limit\n2. AI summarizes old messages\n3. Summary stored, old messages discarded\n4. Saves tokens while maintaining context\n\n---\n\n## Agent Types\n\n### 1. Conversational Agent\n**Best for**: General chat, customer support\n\n**Features**:\n- Natural conversation flow\n- Memory integration\n- Tool use with reasoning\n\n**When to use**: Most common use case\n\n### 2. OpenAI Functions Agent\n**Best for**: Tool-heavy workflows, structured outputs\n\n**Features**:\n- Optimized for function calling\n- Better tool selection\n- Structured responses\n\n**When to use**: Multiple tools, need reliable tool calling\n\n### 3. ReAct Agent\n**Best for**: Step-by-step reasoning\n\n**Features**:\n- Think â†’ Act â†’ Observe loop\n- Visible reasoning process\n- Good for debugging\n\n**When to use**: Complex multi-step tasks\n\n---\n\n## Prompt Engineering for Agents\n\n### System Prompt Structure\n```\nYou are a [ROLE].\n\nYou can:\n- [CAPABILITY 1]\n- [CAPABILITY 2]\n- [CAPABILITY 3]\n\nGuidelines:\n- [GUIDELINE 1]\n- [GUIDELINE 2]\n\nFormat:\n- [OUTPUT FORMAT]\n```\n\n### Example (Customer Support)\n```\nYou are a customer support assistant for Acme Corp.\n\nYou can:\n- Search the knowledge base for answers\n- Look up customer orders and shipping status\n- Create support tickets for complex issues\n\nGuidelines:\n- Be friendly and professional\n- If you don't know something, say so and offer to create a ticket\n- Always verify customer identity before sharing order details\n\nFormat:\n- Keep responses concise\n- Use bullet points for multiple items\n- Include relevant links when available\n```\n\n### Example (Data Analyst)\n```\nYou are a data analyst assistant with access to the company database.\n\nYou can:\n- Query sales, customer, and product data\n- Perform data analysis and calculations\n- Generate summary statistics\n\nGuidelines:\n- Write efficient SQL queries (always use LIMIT)\n- Explain your analysis methodology\n- Highlight important trends or anomalies\n- Use read-only queries (SELECT only)\n\nFormat:\n- Provide numerical answers with context\n- Include query used (for transparency)\n- Suggest follow-up analyses when relevant\n```\n\n---\n\n## Error Handling\n\n### Pattern 1: Tool Execution Errors\n```\nAI Agent (continueOnFail on tool nodes)\n  â†’ IF (tool error occurred)\n    â””â”€ Code (log error)\n    â””â”€ Webhook Response (user-friendly error)\n```\n\n### Pattern 2: LLM API Errors\n```\nMain Workflow:\n  AI Agent â†’ Process Response\n\nError Workflow:\n  Error Trigger\n    â†’ IF (rate limit error)\n      â””â”€ Wait â†’ Retry\n    â†’ ELSE\n      â””â”€ Notify Admin\n```\n\n### Pattern 3: Invalid Tool Outputs\n```javascript\n// Code node - validate tool output\nconst result = $input.first().json;\n\nif (!result || !result.data) {\n  throw new Error('Tool returned invalid data');\n}\n\nreturn [{ json: result }];\n```\n\n---\n\n## Performance Optimization\n\n### 1. Choose Right Model\n```\nFast & cheap: GPT-3.5-turbo, Claude 3 Haiku\nBalanced: GPT-4, Claude 3 Sonnet\nPowerful: GPT-4-turbo, Claude 3 Opus\n```\n\n### 2. Limit Context Window\n```javascript\n{\n  memoryType: \"windowBufferMemory\",\n  contextWindowLength: 5  // Only last 5 messages\n}\n```\n\n### 3. Optimize Tool Descriptions\n```javascript\n// âŒ Vague\ndescription: \"Search for things\"\n\n// âœ… Clear and concise\ndescription: \"Search GitHub issues by keyword and repository. Returns top 5 matching issues with titles and URLs.\"\n```\n\n### 4. Cache Embeddings\nFor document Q&A, embed documents once:\n\n```\nSetup (run once):\n  Documents â†’ Embed â†’ Store in Vector DB\n\nQuery (fast):\n  Question â†’ Search Vector DB â†’ AI Agent\n```\n\n### 5. Async Tools for Slow Operations\n```\nAI Agent â†’ [Queue slow tool request]\n       â†’ Return immediate response\n       â†’ [Background: Execute tool + notify when done]\n```\n\n---\n\n## Security Considerations\n\n### 1. Read-Only Database Tools\n```sql\n-- Create limited user for AI tools\nCREATE USER ai_agent_ro WITH PASSWORD 'secure';\nGRANT SELECT ON public.* TO ai_agent_ro;\n-- NO write access!\n```\n\n### 2. Validate Tool Inputs\n```javascript\n// Code node - validate before execution\nconst query = $json.query;\n\nif (query.toLowerCase().includes('drop ') ||\n    query.toLowerCase().includes('delete ') ||\n    query.toLowerCase().includes('update ')) {\n  throw new Error('Invalid query - write operations not allowed');\n}\n```\n\n### 3. Rate Limiting\n```\nWebhook â†’ IF (check user rate limit)\n        â”œâ”€ [Within limit] â†’ AI Agent\n        â””â”€ [Exceeded] â†’ Error (429 Too Many Requests)\n```\n\n### 4. Sanitize User Input\n```javascript\n// Code node\nconst userInput = $json.body.message\n  .trim()\n  .substring(0, 1000);  // Max 1000 chars\n\nreturn [{ json: { sanitized: userInput } }];\n```\n\n### 5. Monitor Tool Usage\n```\nAI Agent â†’ Log Tool Calls\n        â†’ IF (suspicious pattern)\n          â””â”€ Alert Admin + Pause Agent\n```\n\n---\n\n## Testing AI Agents\n\n### 1. Start with Manual Trigger\nReplace webhook with manual trigger:\n```\nManual Trigger\n  â†’ Set (mock user input)\n  â†’ AI Agent\n  â†’ Code (log output)\n```\n\n### 2. Test Tools Independently\nBefore connecting to agent:\n```\nManual Trigger â†’ Tool Node â†’ Verify output format\n```\n\n### 3. Test with Standard Questions\nCreate test suite:\n```\n1. \"Hello\" - Test basic response\n2. \"Search for bug reports\" - Test tool calling\n3. \"What did I ask before?\" - Test memory\n4. Invalid input - Test error handling\n```\n\n### 4. Monitor Token Usage\n```javascript\n// Code node - log token usage\nconsole.log('Input tokens:', $node['AI Agent'].json.usage.input_tokens);\nconsole.log('Output tokens:', $node['AI Agent'].json.usage.output_tokens);\n```\n\n### 5. Test Edge Cases\n- Empty input\n- Very long input\n- Tool returns no results\n- Tool returns error\n- Multiple tool calls in sequence\n\n---\n\n## Common Gotchas\n\n### 1. âŒ Wrong: Connecting tools to main port\n```\nHTTP Request â†’ AI Agent  // Won't work as tool!\n```\n\n### âœ… Correct: Use ai_tool connection type\n```\nHTTP Request --[ai_tool]--> AI Agent\n```\n\n### 2. âŒ Wrong: Vague tool descriptions\n```\ndescription: \"Get data\"  // AI won't know when to use this\n```\n\n### âœ… Correct: Specific descriptions\n```\ndescription: \"Query customer orders by email address. Returns order ID, status, and shipping info.\"\n```\n\n### 3. âŒ Wrong: No memory for conversations\n```\nEvery message is standalone - no context!\n```\n\n### âœ… Correct: Add memory\n```\nWindow Buffer Memory --[ai_memory]--> AI Agent\n```\n\n### 4. âŒ Wrong: Giving AI write access\n```\nPostgres (full access) as tool  // AI could DELETE data!\n```\n\n### âœ… Correct: Read-only access\n```\nPostgres (read-only user) as tool  // Safe\n```\n\n### 5. âŒ Wrong: Unbounded tool responses\n```\nTool returns 10MB of data â†’ exceeds token limit\n```\n\n### âœ… Correct: Limit tool output\n```javascript\n{\n  query: \"SELECT * FROM table LIMIT 10\"  // Only 10 rows\n}\n```\n\n---\n\n## Real Template Examples\n\nFrom n8n template library (234 AI templates):\n\n**Simple Chatbot**:\n```\nWebhook â†’ AI Agent (GPT-4 + Memory) â†’ Webhook Response\n```\n\n**Document Q&A**:\n```\nSetup: Files â†’ Embed â†’ Vector Store\nQuery: Webhook â†’ AI Agent (GPT-4 + Vector Store Tool) â†’ Response\n```\n\n**SQL Analyst**:\n```\nWebhook â†’ AI Agent (GPT-4 + Postgres Tool) â†’ Format â†’ Response\n```\n\nUse `search_templates({query: \"ai agent\"})` to find more!\n\n---\n\n## Checklist for AI Agent Workflows\n\n### Planning\n- [ ] Define agent purpose and capabilities\n- [ ] List required tools (APIs, databases, etc.)\n- [ ] Design conversation flow\n- [ ] Plan memory strategy (per-user, per-session)\n- [ ] Consider token costs\n\n### Implementation\n- [ ] Choose appropriate LLM model\n- [ ] Write clear system prompt\n- [ ] Connect tools via ai_tool ports (NOT main)\n- [ ] Add tool descriptions\n- [ ] Configure memory (Window Buffer recommended)\n- [ ] Test each tool independently\n\n### Security\n- [ ] Use read-only database access for tools\n- [ ] Validate tool inputs\n- [ ] Sanitize user inputs\n- [ ] Add rate limiting\n- [ ] Monitor for abuse\n\n### Testing\n- [ ] Test with diverse inputs\n- [ ] Verify tool calling works\n- [ ] Check memory persistence\n- [ ] Test error scenarios\n- [ ] Monitor token usage and costs\n\n### Deployment\n- [ ] Add error handling\n- [ ] Set up logging\n- [ ] Monitor performance\n- [ ] Set cost alerts\n- [ ] Document agent capabilities\n\n---\n\n## Summary\n\n**Key Points**:\n1. **8 AI connection types** - Use ai_tool for tools, ai_memory for context\n2. **ANY node can be a tool** - Connect to ai_tool port\n3. **Memory is essential** for conversations (Window Buffer recommended)\n4. **Tool descriptions matter** - AI uses them to decide when to call tools\n5. **Security first** - Read-only database access, validate inputs\n\n**Pattern**: Trigger â†’ AI Agent (Model + Tools + Memory) â†’ Output\n\n**Related**:\n- [webhook_processing.md](webhook_processing.md) - Receiving chat messages\n- [http_api_integration.md](http_api_integration.md) - Tools that call APIs\n- [database_operations.md](database_operations.md) - Database tools for agents\n",
        "skills/n8n-workflow-patterns/database_operations.md": "# Database Operations Pattern\n\n**Use Case**: Read, write, sync, and manage database data in workflows.\n\n---\n\n## Pattern Structure\n\n```\nTrigger â†’ [Query/Read] â†’ [Transform] â†’ [Write/Update] â†’ [Verify/Log]\n```\n\n**Key Characteristic**: Data persistence and synchronization\n\n---\n\n## Core Components\n\n### 1. Trigger\n**Options**:\n- **Schedule** - Periodic sync/maintenance (most common)\n- **Webhook** - Event-driven writes\n- **Manual** - One-time operations\n\n### 2. Database Read Nodes\n**Supported databases**:\n- Postgres\n- MySQL\n- MongoDB\n- Microsoft SQL\n- SQLite\n- Redis\n- And more via community nodes\n\n### 3. Transform\n**Purpose**: Map between different database schemas or formats\n\n**Typical nodes**:\n- **Set** - Field mapping\n- **Code** - Complex transformations\n- **Merge** - Combine data from multiple sources\n\n### 4. Database Write Nodes\n**Operations**:\n- INSERT - Create new records\n- UPDATE - Modify existing records\n- UPSERT - Insert or update\n- DELETE - Remove records\n\n### 5. Verification\n**Purpose**: Confirm operations succeeded\n\n**Methods**:\n- Query to verify records\n- Count rows affected\n- Log results\n\n---\n\n## Common Use Cases\n\n### 1. Data Synchronization\n**Flow**: Schedule â†’ Read Source DB â†’ Transform â†’ Write Target DB â†’ Log\n\n**Example** (Postgres to MySQL sync):\n```\n1. Schedule (every 15 minutes)\n2. Postgres (SELECT * FROM users WHERE updated_at > {{$json.last_sync}})\n3. IF (check if records exist)\n4. Set (map Postgres schema to MySQL schema)\n5. MySQL (INSERT or UPDATE users)\n6. Postgres (UPDATE sync_log SET last_sync = NOW())\n7. Slack (notify: \"Synced X users\")\n```\n\n**Incremental sync query**:\n```sql\nSELECT *\nFROM users\nWHERE updated_at > $1\nORDER BY updated_at ASC\nLIMIT 1000\n```\n\n**Parameters**:\n```javascript\n{\n  \"parameters\": [\n    \"={{$node['Get Last Sync'].json.last_sync}}\"\n  ]\n}\n```\n\n### 2. ETL (Extract, Transform, Load)\n**Flow**: Extract from multiple sources â†’ Transform â†’ Load into warehouse\n\n**Example** (Consolidate data):\n```\n1. Schedule (daily at 2 AM)\n2. [Parallel branches]\n   â”œâ”€ Postgres (SELECT orders)\n   â”œâ”€ MySQL (SELECT customers)\n   â””â”€ MongoDB (SELECT products)\n3. Merge (combine all data)\n4. Code (transform to warehouse schema)\n5. Postgres (warehouse - INSERT into fact_sales)\n6. Email (send summary report)\n```\n\n### 3. Data Validation & Cleanup\n**Flow**: Schedule â†’ Query â†’ Validate â†’ Update/Delete invalid records\n\n**Example** (Clean orphaned records):\n```\n1. Schedule (weekly)\n2. Postgres (SELECT users WHERE email IS NULL OR email = '')\n3. IF (invalid records exist)\n4. Postgres (UPDATE users SET status='inactive' WHERE email IS NULL)\n5. Postgres (DELETE FROM users WHERE created_at < NOW() - INTERVAL '1 year' AND status='inactive')\n6. Slack (alert: \"Cleaned X invalid records\")\n```\n\n### 4. Backup & Archive\n**Flow**: Schedule â†’ Query â†’ Export â†’ Store\n\n**Example** (Archive old records):\n```\n1. Schedule (monthly)\n2. Postgres (SELECT * FROM orders WHERE created_at < NOW() - INTERVAL '2 years')\n3. Code (convert to JSON)\n4. Write File (save to archive.json)\n5. Google Drive (upload archive)\n6. Postgres (DELETE FROM orders WHERE created_at < NOW() - INTERVAL '2 years')\n```\n\n### 5. Real-time Data Updates\n**Flow**: Webhook â†’ Parse â†’ Update Database\n\n**Example** (Update user status):\n```\n1. Webhook (receive status update)\n2. Postgres (UPDATE users SET status = {{$json.body.status}} WHERE id = {{$json.body.user_id}})\n3. IF (rows affected > 0)\n4. Redis (SET user:{{$json.body.user_id}}:status {{$json.body.status}})\n5. Webhook Response ({\"success\": true})\n```\n\n---\n\n## Database Node Configuration\n\n### Postgres\n\n#### SELECT Query\n```javascript\n{\n  operation: \"executeQuery\",\n  query: \"SELECT id, name, email FROM users WHERE created_at > $1 LIMIT $2\",\n  parameters: [\n    \"={{$json.since_date}}\",\n    \"100\"\n  ]\n}\n```\n\n#### INSERT\n```javascript\n{\n  operation: \"insert\",\n  table: \"users\",\n  columns: \"id, name, email, created_at\",\n  values: [\n    {\n      id: \"={{$json.id}}\",\n      name: \"={{$json.name}}\",\n      email: \"={{$json.email}}\",\n      created_at: \"={{$now}}\"\n    }\n  ]\n}\n```\n\n#### UPDATE\n```javascript\n{\n  operation: \"update\",\n  table: \"users\",\n  updateKey: \"id\",\n  columns: \"name, email, updated_at\",\n  values: {\n    id: \"={{$json.id}}\",\n    name: \"={{$json.name}}\",\n    email: \"={{$json.email}}\",\n    updated_at: \"={{$now}}\"\n  }\n}\n```\n\n#### UPSERT (INSERT ... ON CONFLICT)\n```javascript\n{\n  operation: \"executeQuery\",\n  query: `\n    INSERT INTO users (id, name, email)\n    VALUES ($1, $2, $3)\n    ON CONFLICT (id)\n    DO UPDATE SET name = $2, email = $3, updated_at = NOW()\n  `,\n  parameters: [\n    \"={{$json.id}}\",\n    \"={{$json.name}}\",\n    \"={{$json.email}}\"\n  ]\n}\n```\n\n### MySQL\n\n#### SELECT with JOIN\n```javascript\n{\n  operation: \"executeQuery\",\n  query: `\n    SELECT u.id, u.name, o.order_id, o.total\n    FROM users u\n    LEFT JOIN orders o ON u.id = o.user_id\n    WHERE u.created_at > ?\n  `,\n  parameters: [\n    \"={{$json.since_date}}\"\n  ]\n}\n```\n\n#### Bulk INSERT\n```javascript\n{\n  operation: \"insert\",\n  table: \"orders\",\n  columns: \"user_id, total, status\",\n  values: $json.orders  // Array of objects\n}\n```\n\n### MongoDB\n\n#### Find Documents\n```javascript\n{\n  operation: \"find\",\n  collection: \"users\",\n  query: JSON.stringify({\n    created_at: { $gt: new Date($json.since_date) },\n    status: \"active\"\n  }),\n  limit: 100\n}\n```\n\n#### Insert Document\n```javascript\n{\n  operation: \"insert\",\n  collection: \"users\",\n  document: JSON.stringify({\n    name: $json.name,\n    email: $json.email,\n    created_at: new Date()\n  })\n}\n```\n\n#### Update Document\n```javascript\n{\n  operation: \"update\",\n  collection: \"users\",\n  query: JSON.stringify({ _id: $json.user_id }),\n  update: JSON.stringify({\n    $set: {\n      status: $json.status,\n      updated_at: new Date()\n    }\n  })\n}\n```\n\n---\n\n## Batch Processing\n\n### Pattern 1: Split In Batches\n**Use when**: Processing large datasets to avoid memory issues\n\n```\nPostgres (SELECT 10000 records)\n  â†’ Split In Batches (100 items per batch)\n  â†’ Transform\n  â†’ MySQL (write batch)\n  â†’ Loop (until all processed)\n```\n\n### Pattern 2: Paginated Queries\n**Use when**: Database has millions of records\n\n```\nSet (initialize: offset=0, limit=1000)\n  â†’ Loop Start\n  â†’ Postgres (SELECT * FROM large_table LIMIT {{$json.limit}} OFFSET {{$json.offset}})\n  â†’ IF (records returned)\n    â”œâ”€ Process records\n    â”œâ”€ Set (increment offset by 1000)\n    â””â”€ Loop back\n  â””â”€ [No records] â†’ End\n```\n\n**Query**:\n```sql\nSELECT * FROM large_table\nORDER BY id\nLIMIT $1 OFFSET $2\n```\n\n### Pattern 3: Cursor-Based Pagination\n**Better performance for large datasets**:\n\n```\nSet (initialize: last_id=0)\n  â†’ Loop Start\n  â†’ Postgres (SELECT * FROM table WHERE id > {{$json.last_id}} ORDER BY id LIMIT 1000)\n  â†’ IF (records returned)\n    â”œâ”€ Process records\n    â”œâ”€ Code (get max id from batch)\n    â””â”€ Loop back\n  â””â”€ [No records] â†’ End\n```\n\n**Query**:\n```sql\nSELECT * FROM table\nWHERE id > $1\nORDER BY id ASC\nLIMIT 1000\n```\n\n---\n\n## Transaction Handling\n\n### Pattern 1: BEGIN/COMMIT/ROLLBACK\n**For databases that support transactions**:\n\n```javascript\n// Node 1: Begin Transaction\n{\n  operation: \"executeQuery\",\n  query: \"BEGIN\"\n}\n\n// Node 2-N: Your operations\n{\n  operation: \"executeQuery\",\n  query: \"INSERT INTO ...\",\n  continueOnFail: true\n}\n\n// Node N+1: Commit or Rollback\n{\n  operation: \"executeQuery\",\n  query: \"={{$node['Operation'].json.error ? 'ROLLBACK' : 'COMMIT'}}\"\n}\n```\n\n### Pattern 2: Atomic Operations\n**Use database features for atomicity**:\n\n```sql\n-- Upsert example (atomic)\nINSERT INTO inventory (product_id, quantity)\nVALUES ($1, $2)\nON CONFLICT (product_id)\nDO UPDATE SET quantity = inventory.quantity + $2\n```\n\n### Pattern 3: Error Rollback\n**Manual rollback on error**:\n\n```\nTry Operations:\n  Postgres (INSERT orders)\n  MySQL (INSERT order_items)\n\nError Trigger:\n  Postgres (DELETE FROM orders WHERE id = {{$json.order_id}})\n  MySQL (DELETE FROM order_items WHERE order_id = {{$json.order_id}})\n```\n\n---\n\n## Data Transformation\n\n### Schema Mapping\n```javascript\n// Code node - map schemas\nconst sourceData = $input.all();\n\nreturn sourceData.map(item => ({\n  json: {\n    // Source â†’ Target mapping\n    user_id: item.json.id,\n    full_name: `${item.json.first_name} ${item.json.last_name}`,\n    email_address: item.json.email,\n    registration_date: new Date(item.json.created_at).toISOString(),\n    // Computed fields\n    is_premium: item.json.plan_type === 'pro',\n    // Default values\n    status: item.json.status || 'active'\n  }\n}));\n```\n\n### Data Type Conversions\n```javascript\n// Code node - convert data types\nreturn $input.all().map(item => ({\n  json: {\n    // String to number\n    user_id: parseInt(item.json.user_id),\n    // String to date\n    created_at: new Date(item.json.created_at),\n    // Number to boolean\n    is_active: item.json.active === 1,\n    // JSON string to object\n    metadata: JSON.parse(item.json.metadata || '{}'),\n    // Null handling\n    email: item.json.email || null\n  }\n}));\n```\n\n### Aggregation\n```javascript\n// Code node - aggregate data\nconst items = $input.all();\n\nconst summary = items.reduce((acc, item) => {\n  const date = item.json.created_at.split('T')[0];\n  if (!acc[date]) {\n    acc[date] = { count: 0, total: 0 };\n  }\n  acc[date].count++;\n  acc[date].total += item.json.amount;\n  return acc;\n}, {});\n\nreturn Object.entries(summary).map(([date, data]) => ({\n  json: {\n    date,\n    count: data.count,\n    total: data.total,\n    average: data.total / data.count\n  }\n}));\n```\n\n---\n\n## Performance Optimization\n\n### 1. Use Indexes\nEnsure database has proper indexes:\n\n```sql\n-- Add index for sync queries\nCREATE INDEX idx_users_updated_at ON users(updated_at);\n\n-- Add index for lookups\nCREATE INDEX idx_orders_user_id ON orders(user_id);\n```\n\n### 2. Limit Result Sets\nAlways use LIMIT:\n\n```sql\n-- âœ… Good\nSELECT * FROM large_table\nWHERE created_at > $1\nLIMIT 1000\n\n-- âŒ Bad (unbounded)\nSELECT * FROM large_table\nWHERE created_at > $1\n```\n\n### 3. Use Prepared Statements\nParameterized queries are faster:\n\n```javascript\n// âœ… Good - prepared statement\n{\n  query: \"SELECT * FROM users WHERE id = $1\",\n  parameters: [\"={{$json.id}}\"]\n}\n\n// âŒ Bad - string concatenation\n{\n  query: \"SELECT * FROM users WHERE id = '={{$json.id}}'\"\n}\n```\n\n### 4. Batch Writes\nWrite multiple records at once:\n\n```javascript\n// âœ… Good - batch insert\n{\n  operation: \"insert\",\n  table: \"orders\",\n  values: $json.items  // Array of 100 items\n}\n\n// âŒ Bad - individual inserts in loop\n// 100 separate INSERT statements\n```\n\n### 5. Connection Pooling\nConfigure in credentials:\n\n```javascript\n{\n  host: \"db.example.com\",\n  database: \"mydb\",\n  user: \"user\",\n  password: \"pass\",\n  // Connection pool settings\n  min: 2,\n  max: 10,\n  idleTimeoutMillis: 30000\n}\n```\n\n---\n\n## Error Handling\n\n### Pattern 1: Check Rows Affected\n```\nDatabase Operation (UPDATE users...)\n  â†’ IF ({{$json.rowsAffected === 0}})\n    â””â”€ Alert: \"No rows updated - record not found\"\n```\n\n### Pattern 2: Constraint Violations\n```javascript\n// Database operation with continueOnFail: true\n{\n  operation: \"insert\",\n  continueOnFail: true\n}\n\n// Next node: Check for errors\nIF ({{$json.error !== undefined}})\n  â†’ IF ({{$json.error.includes('duplicate key')}})\n    â””â”€ Log: \"Record already exists - skipping\"\n  â†’ ELSE\n    â””â”€ Alert: \"Database error: {{$json.error}}\"\n```\n\n### Pattern 3: Rollback on Error\n```\nTry Operations:\n  â†’ Database Write 1\n  â†’ Database Write 2\n  â†’ Database Write 3\n\nError Trigger:\n  â†’ Rollback Operations\n  â†’ Alert Admin\n```\n\n---\n\n## Security Best Practices\n\n### 1. Use Parameterized Queries (Prevent SQL Injection)\n```javascript\n// âœ… SAFE - parameterized\n{\n  query: \"SELECT * FROM users WHERE email = $1\",\n  parameters: [\"={{$json.email}}\"]\n}\n\n// âŒ DANGEROUS - SQL injection risk\n{\n  query: \"SELECT * FROM users WHERE email = '={{$json.email}}'\"\n}\n```\n\n### 2. Least Privilege Access\n**Create dedicated workflow user**:\n\n```sql\n-- âœ… Good - limited permissions\nCREATE USER n8n_workflow WITH PASSWORD 'secure_password';\nGRANT SELECT, INSERT, UPDATE ON orders TO n8n_workflow;\nGRANT SELECT ON users TO n8n_workflow;\n\n-- âŒ Bad - too much access\nGRANT ALL PRIVILEGES TO n8n_workflow;\n```\n\n### 3. Validate Input Data\n```javascript\n// Code node - validate before write\nconst email = $json.email;\nconst name = $json.name;\n\n// Validation\nif (!email || !email.includes('@')) {\n  throw new Error('Invalid email address');\n}\n\nif (!name || name.length < 2) {\n  throw new Error('Invalid name');\n}\n\n// Sanitization\nreturn [{\n  json: {\n    email: email.toLowerCase().trim(),\n    name: name.trim()\n  }\n}];\n```\n\n### 4. Encrypt Sensitive Data\n```javascript\n// Code node - encrypt before storage\nconst crypto = require('crypto');\n\nconst algorithm = 'aes-256-cbc';\nconst key = Buffer.from($credentials.encryptionKey, 'hex');\nconst iv = crypto.randomBytes(16);\n\nconst cipher = crypto.createCipheriv(algorithm, key, iv);\nlet encrypted = cipher.update($json.sensitive_data, 'utf8', 'hex');\nencrypted += cipher.final('hex');\n\nreturn [{\n  json: {\n    encrypted_data: encrypted,\n    iv: iv.toString('hex')\n  }\n}];\n```\n\n---\n\n## Common Gotchas\n\n### 1. âŒ Wrong: Unbounded queries\n```sql\nSELECT * FROM large_table  -- Could return millions\n```\n\n### âœ… Correct: Use LIMIT\n```sql\nSELECT * FROM large_table\nORDER BY created_at DESC\nLIMIT 1000\n```\n\n### 2. âŒ Wrong: String concatenation in queries\n```javascript\nquery: \"SELECT * FROM users WHERE id = '{{$json.id}}'\"\n```\n\n### âœ… Correct: Parameterized queries\n```javascript\nquery: \"SELECT * FROM users WHERE id = $1\",\nparameters: [\"={{$json.id}}\"]\n```\n\n### 3. âŒ Wrong: No transaction for multi-step operations\n```\nINSERT into orders\nINSERT into order_items  // Fails â†’ orphaned order record\n```\n\n### âœ… Correct: Use transaction\n```\nBEGIN\nINSERT into orders\nINSERT into order_items\nCOMMIT (or ROLLBACK on error)\n```\n\n### 4. âŒ Wrong: Processing all items at once\n```\nSELECT 1000000 records â†’ Process all â†’ OOM error\n```\n\n### âœ… Correct: Batch processing\n```\nSELECT records â†’ Split In Batches (1000) â†’ Process â†’ Loop\n```\n\n---\n\n## Real Template Examples\n\nFrom n8n template library (456 database templates):\n\n**Data Sync**:\n```\nSchedule â†’ Postgres (SELECT new records) â†’ Transform â†’ MySQL (INSERT)\n```\n\n**ETL Pipeline**:\n```\nSchedule â†’ [Multiple DB reads] â†’ Merge â†’ Transform â†’ Warehouse (INSERT)\n```\n\n**Backup**:\n```\nSchedule â†’ Postgres (SELECT all) â†’ JSON â†’ Google Drive (upload)\n```\n\nUse `search_templates({query: \"database\"})` to find more!\n\n---\n\n## Checklist for Database Workflows\n\n### Planning\n- [ ] Identify source and target databases\n- [ ] Understand schema differences\n- [ ] Plan transformation logic\n- [ ] Consider batch size for large datasets\n- [ ] Design error handling strategy\n\n### Implementation\n- [ ] Use parameterized queries (never concatenate)\n- [ ] Add LIMIT to all SELECT queries\n- [ ] Use appropriate operation (INSERT/UPDATE/UPSERT)\n- [ ] Configure credentials properly\n- [ ] Test with small dataset first\n\n### Performance\n- [ ] Add database indexes for queries\n- [ ] Use batch operations\n- [ ] Implement pagination for large datasets\n- [ ] Configure connection pooling\n- [ ] Monitor query execution times\n\n### Security\n- [ ] Use parameterized queries (SQL injection prevention)\n- [ ] Least privilege database user\n- [ ] Validate and sanitize input\n- [ ] Encrypt sensitive data\n- [ ] Never log sensitive data\n\n### Reliability\n- [ ] Add transaction handling if needed\n- [ ] Check rows affected\n- [ ] Handle constraint violations\n- [ ] Implement retry logic\n- [ ] Add Error Trigger workflow\n\n---\n\n## Summary\n\n**Key Points**:\n1. **Always use parameterized queries** (prevent SQL injection)\n2. **Batch processing** for large datasets\n3. **Transaction handling** for multi-step operations\n4. **Limit result sets** to avoid memory issues\n5. **Validate input data** before writes\n\n**Pattern**: Trigger â†’ Query â†’ Transform â†’ Write â†’ Verify\n\n**Related**:\n- [http_api_integration.md](http_api_integration.md) - Fetching data to store in DB\n- [scheduled_tasks.md](scheduled_tasks.md) - Periodic database maintenance\n",
        "skills/n8n-workflow-patterns/http_api_integration.md": "# HTTP API Integration Pattern\n\n**Use Case**: Fetch data from REST APIs, transform it, and use it in workflows.\n\n---\n\n## Pattern Structure\n\n```\nTrigger â†’ HTTP Request â†’ [Transform] â†’ [Action] â†’ [Error Handler]\n```\n\n**Key Characteristic**: External data fetching with error handling\n\n---\n\n## Core Components\n\n### 1. Trigger\n**Options**:\n- **Schedule** - Periodic fetching (most common)\n- **Webhook** - Triggered by external event\n- **Manual** - On-demand execution\n\n### 2. HTTP Request Node\n**Purpose**: Call external REST APIs\n\n**Configuration**:\n```javascript\n{\n  method: \"GET\",                    // GET, POST, PUT, DELETE, PATCH\n  url: \"https://api.example.com/users\",\n  authentication: \"predefinedCredentialType\",\n  sendQuery: true,\n  queryParameters: {\n    \"page\": \"={{$json.page}}\",\n    \"limit\": \"100\"\n  },\n  sendHeaders: true,\n  headerParameters: {\n    \"Accept\": \"application/json\",\n    \"X-API-Version\": \"v1\"\n  }\n}\n```\n\n### 3. Response Processing\n**Purpose**: Extract and transform API response data\n\n**Typical flow**:\n```\nHTTP Request â†’ Code (parse) â†’ Set (map fields) â†’ Action\n```\n\n### 4. Action\n**Common actions**:\n- Store in database\n- Send to another API\n- Create notifications\n- Update spreadsheet\n\n### 5. Error Handler\n**Purpose**: Handle API failures gracefully\n\n**Error Trigger Workflow**:\n```\nError Trigger â†’ Log Error â†’ Notify Admin â†’ Retry Logic (optional)\n```\n\n---\n\n## Common Use Cases\n\n### 1. Data Fetching & Storage\n**Flow**: Schedule â†’ HTTP Request â†’ Transform â†’ Database\n\n**Example** (Fetch GitHub issues):\n```\n1. Schedule (every hour)\n2. HTTP Request\n   - Method: GET\n   - URL: https://api.github.com/repos/owner/repo/issues\n   - Auth: Bearer Token\n   - Query: state=open\n3. Code (filter by labels)\n4. Set (map to database schema)\n5. Postgres (upsert issues)\n```\n\n**Response Handling**:\n```javascript\n// Code node - filter issues\nconst issues = $input.all();\nreturn issues\n  .filter(item => item.json.labels.some(l => l.name === 'bug'))\n  .map(item => ({\n    json: {\n      id: item.json.id,\n      title: item.json.title,\n      created_at: item.json.created_at\n    }\n  }));\n```\n\n### 2. API to API Integration\n**Flow**: Trigger â†’ Fetch from API A â†’ Transform â†’ Send to API B\n\n**Example** (Jira to Slack):\n```\n1. Schedule (every 15 minutes)\n2. HTTP Request (GET Jira tickets updated today)\n3. IF (check if tickets exist)\n4. Set (format for Slack)\n5. HTTP Request (POST to Slack webhook)\n```\n\n### 3. Data Enrichment\n**Flow**: Trigger â†’ Fetch base data â†’ Call enrichment API â†’ Combine â†’ Store\n\n**Example** (Enrich contacts with company data):\n```\n1. Postgres (SELECT new contacts)\n2. Code (extract company domains)\n3. HTTP Request (call Clearbit API for each domain)\n4. Set (combine contact + company data)\n5. Postgres (UPDATE contacts with enrichment)\n```\n\n### 4. Monitoring & Alerting\n**Flow**: Schedule â†’ Check API health â†’ IF unhealthy â†’ Alert\n\n**Example** (API health check):\n```\n1. Schedule (every 5 minutes)\n2. HTTP Request (GET /health endpoint)\n3. IF (status !== 200 OR response time > 2000ms)\n4. Slack (alert #ops-team)\n5. PagerDuty (create incident)\n```\n\n### 5. Batch Processing\n**Flow**: Trigger â†’ Fetch large dataset â†’ Split in Batches â†’ Process â†’ Loop\n\n**Example** (Process all users):\n```\n1. Manual Trigger\n2. HTTP Request (GET /api/users?limit=1000)\n3. Split In Batches (100 items per batch)\n4. HTTP Request (POST /api/process for each batch)\n5. Wait (2 seconds between batches - rate limiting)\n6. Loop (back to step 4 until all processed)\n```\n\n---\n\n## Authentication Methods\n\n### 1. None (Public APIs)\n```javascript\n{\n  authentication: \"none\"\n}\n```\n\n### 2. Bearer Token (Most Common)\n**Setup**: Create credential\n```javascript\n{\n  authentication: \"predefinedCredentialType\",\n  nodeCredentialType: \"httpHeaderAuth\",\n  headerAuth: {\n    name: \"Authorization\",\n    value: \"Bearer YOUR_TOKEN\"\n  }\n}\n```\n\n**Access in workflow**:\n```javascript\n{\n  authentication: \"predefinedCredentialType\",\n  nodeCredentialType: \"httpHeaderAuth\"\n}\n```\n\n### 3. API Key (Header or Query)\n**Header auth**:\n```javascript\n{\n  sendHeaders: true,\n  headerParameters: {\n    \"X-API-Key\": \"={{$credentials.apiKey}}\"\n  }\n}\n```\n\n**Query auth**:\n```javascript\n{\n  sendQuery: true,\n  queryParameters: {\n    \"api_key\": \"={{$credentials.apiKey}}\"\n  }\n}\n```\n\n### 4. Basic Auth\n**Setup**: Create \"Basic Auth\" credential\n```javascript\n{\n  authentication: \"predefinedCredentialType\",\n  nodeCredentialType: \"httpBasicAuth\"\n}\n```\n\n### 5. OAuth2\n**Setup**: Create OAuth2 credential with:\n- Authorization URL\n- Token URL\n- Client ID\n- Client Secret\n- Scopes\n\n```javascript\n{\n  authentication: \"predefinedCredentialType\",\n  nodeCredentialType: \"oAuth2Api\"\n}\n```\n\n---\n\n## Handling API Responses\n\n### Success Response (200-299)\n**Default**: Data flows to next node\n\n**Access response**:\n```javascript\n// Entire response\n{{$json}}\n\n// Specific fields\n{{$json.data.id}}\n{{$json.results[0].name}}\n```\n\n### Pagination\n\n#### Pattern 1: Offset-based\n```\n1. Set (initialize: page=1, has_more=true)\n2. HTTP Request (GET /api/items?page={{$json.page}})\n3. Code (check if more pages)\n4. IF (has_more === true)\n   â””â†’ Set (increment page) â†’ Loop to step 2\n```\n\n**Code node** (check pagination):\n```javascript\nconst items = $input.first().json;\nconst currentPage = $json.page || 1;\n\nreturn [{\n  json: {\n    items: items.results,\n    page: currentPage + 1,\n    has_more: items.next !== null\n  }\n}];\n```\n\n#### Pattern 2: Cursor-based\n```\n1. HTTP Request (GET /api/items)\n2. Code (extract next_cursor)\n3. IF (next_cursor exists)\n   â””â†’ Set (cursor={{$json.next_cursor}}) â†’ Loop to step 1\n```\n\n#### Pattern 3: Link Header\n```javascript\n// Code node - parse Link header\nconst linkHeader = $input.first().json.headers['link'];\nconst hasNext = linkHeader && linkHeader.includes('rel=\"next\"');\n\nreturn [{\n  json: {\n    items: $input.first().json.body,\n    has_next: hasNext,\n    next_url: hasNext ? parseNextUrl(linkHeader) : null\n  }\n}];\n```\n\n### Error Responses (400-599)\n\n**Configure HTTP Request**:\n```javascript\n{\n  continueOnFail: true,  // Don't stop workflow on error\n  ignoreResponseCode: true  // Get response even on error\n}\n```\n\n**Handle errors**:\n```\nHTTP Request (continueOnFail: true)\n  â†’ IF (check error)\n    â”œâ”€ [Success Path]\n    â””â”€ [Error Path] â†’ Log â†’ Retry or Alert\n```\n\n**IF condition**:\n```javascript\n{{$json.error}} is empty\n// OR\n{{$json.statusCode}} < 400\n```\n\n---\n\n## Rate Limiting\n\n### Pattern 1: Wait Between Requests\n```\nSplit In Batches (1 item per batch)\n  â†’ HTTP Request\n  â†’ Wait (1 second)\n  â†’ Loop\n```\n\n### Pattern 2: Exponential Backoff\n```javascript\n// Code node\nconst maxRetries = 3;\nlet retryCount = $json.retryCount || 0;\n\nif ($json.error && retryCount < maxRetries) {\n  const delay = Math.pow(2, retryCount) * 1000; // 1s, 2s, 4s\n\n  return [{\n    json: {\n      ...$json,\n      retryCount: retryCount + 1,\n      waitTime: delay\n    }\n  }];\n}\n```\n\n### Pattern 3: Respect Rate Limit Headers\n```javascript\n// Code node - check rate limit\nconst headers = $input.first().json.headers;\nconst remaining = parseInt(headers['x-ratelimit-remaining'] || '999');\nconst resetTime = parseInt(headers['x-ratelimit-reset'] || '0');\n\nif (remaining < 10) {\n  const now = Math.floor(Date.now() / 1000);\n  const waitSeconds = resetTime - now;\n\n  return [{\n    json: {\n      shouldWait: true,\n      waitSeconds: Math.max(waitSeconds, 0)\n    }\n  }];\n}\n\nreturn [{ json: { shouldWait: false } }];\n```\n\n---\n\n## Request Configuration\n\n### GET Request\n```javascript\n{\n  method: \"GET\",\n  url: \"https://api.example.com/users\",\n  sendQuery: true,\n  queryParameters: {\n    \"page\": \"1\",\n    \"limit\": \"100\",\n    \"filter\": \"active\"\n  }\n}\n```\n\n### POST Request (JSON Body)\n```javascript\n{\n  method: \"POST\",\n  url: \"https://api.example.com/users\",\n  sendBody: true,\n  bodyParametersJson: JSON.stringify({\n    name: \"={{$json.name}}\",\n    email: \"={{$json.email}}\",\n    role: \"user\"\n  })\n}\n```\n\n### POST Request (Form Data)\n```javascript\n{\n  method: \"POST\",\n  url: \"https://api.example.com/upload\",\n  sendBody: true,\n  bodyParametersUi: {\n    parameter: [\n      { name: \"file\", value: \"={{$json.fileData}}\" },\n      { name: \"filename\", value: \"={{$json.filename}}\" }\n    ]\n  },\n  sendHeaders: true,\n  headerParameters: {\n    \"Content-Type\": \"multipart/form-data\"\n  }\n}\n```\n\n### PUT/PATCH Request (Update)\n```javascript\n{\n  method: \"PATCH\",\n  url: \"https://api.example.com/users/={{$json.userId}}\",\n  sendBody: true,\n  bodyParametersJson: JSON.stringify({\n    status: \"active\",\n    last_updated: \"={{$now}}\"\n  })\n}\n```\n\n### DELETE Request\n```javascript\n{\n  method: \"DELETE\",\n  url: \"https://api.example.com/users/={{$json.userId}}\"\n}\n```\n\n---\n\n## Error Handling Patterns\n\n### Pattern 1: Retry on Failure\n```\nHTTP Request (continueOnFail: true)\n  â†’ IF (error occurred)\n    â””â†’ Wait (5 seconds)\n    â””â†’ HTTP Request (retry)\n```\n\n### Pattern 2: Fallback API\n```\nHTTP Request (Primary API, continueOnFail: true)\n  â†’ IF (failed)\n    â””â†’ HTTP Request (Fallback API)\n```\n\n### Pattern 3: Error Trigger Workflow\n**Main Workflow**:\n```\nHTTP Request â†’ Process Data\n```\n\n**Error Workflow**:\n```\nError Trigger\n  â†’ Set (extract error details)\n  â†’ Slack (alert team)\n  â†’ Database (log error for analysis)\n```\n\n### Pattern 4: Circuit Breaker\n```javascript\n// Code node - circuit breaker logic\nconst failures = $json.recentFailures || 0;\nconst threshold = 5;\n\nif (failures >= threshold) {\n  throw new Error('Circuit breaker open - too many failures');\n}\n\nreturn [{ json: { canProceed: true } }];\n```\n\n---\n\n## Response Transformation\n\n### Extract Nested Data\n```javascript\n// Code node\nconst response = $input.first().json;\n\nreturn response.data.items.map(item => ({\n  json: {\n    id: item.id,\n    name: item.attributes.name,\n    email: item.attributes.contact.email\n  }\n}));\n```\n\n### Flatten Arrays\n```javascript\n// Code node - flatten nested array\nconst items = $input.all();\nconst flattened = items.flatMap(item =>\n  item.json.results.map(result => ({\n    json: {\n      parent_id: item.json.id,\n      ...result\n    }\n  }))\n);\n\nreturn flattened;\n```\n\n### Combine Multiple API Responses\n```\nHTTP Request 1 (users)\n  â†’ Set (store users)\n  â†’ HTTP Request 2 (orders for each user)\n  â†’ Merge (combine users + orders)\n```\n\n---\n\n## Testing & Debugging\n\n### 1. Test with Manual Trigger\nReplace Schedule with Manual Trigger for testing\n\n### 2. Use Postman/Insomnia First\n- Test API outside n8n\n- Understand response structure\n- Verify authentication\n\n### 3. Log Responses\n```javascript\n// Code node - log for debugging\nconsole.log('API Response:', JSON.stringify($input.first().json, null, 2));\nreturn $input.all();\n```\n\n### 4. Check Execution Data\n- View node output in n8n UI\n- Check headers, body, status code\n- Verify data structure\n\n### 5. Use Binary Data Properly\nFor file downloads:\n```javascript\n{\n  method: \"GET\",\n  url: \"https://api.example.com/download/file.pdf\",\n  responseFormat: \"file\",  // Important for binary data\n  outputPropertyName: \"data\"\n}\n```\n\n---\n\n## Performance Optimization\n\n### 1. Parallel Requests\nUse **Split In Batches** with multiple items:\n```\nSet (create array of IDs)\n  â†’ Split In Batches (10 items per batch)\n  â†’ HTTP Request (processes all 10 in parallel)\n  â†’ Loop\n```\n\n### 2. Caching\n```\nIF (check cache exists)\n  â”œâ”€ [Cache Hit] â†’ Use cached data\n  â””â”€ [Cache Miss] â†’ HTTP Request â†’ Store in cache\n```\n\n### 3. Conditional Fetching\nOnly fetch if data changed:\n```\nHTTP Request (GET with If-Modified-Since header)\n  â†’ IF (status === 304)\n    â””â”€ Use existing data\n  â†’ IF (status === 200)\n    â””â”€ Process new data\n```\n\n### 4. Batch API Calls\nIf API supports batch operations:\n```javascript\n{\n  method: \"POST\",\n  url: \"https://api.example.com/batch\",\n  bodyParametersJson: JSON.stringify({\n    requests: $json.items.map(item => ({\n      method: \"GET\",\n      url: `/users/${item.id}`\n    }))\n  })\n}\n```\n\n---\n\n## Common Gotchas\n\n### 1. âŒ Wrong: Hardcoded URLs\n```javascript\nurl: \"https://api.example.com/prod/users\"\n```\n\n### âœ… Correct: Use environment variables\n```javascript\nurl: \"={{$env.API_BASE_URL}}/users\"\n```\n\n### 2. âŒ Wrong: Credentials in parameters\n```javascript\nheaderParameters: {\n  \"Authorization\": \"Bearer sk-abc123xyz\"  // âŒ Exposed!\n}\n```\n\n### âœ… Correct: Use credentials system\n```javascript\nauthentication: \"predefinedCredentialType\",\nnodeCredentialType: \"httpHeaderAuth\"\n```\n\n### 3. âŒ Wrong: No error handling\n```javascript\nHTTP Request â†’ Process (fails if API down)\n```\n\n### âœ… Correct: Handle errors\n```javascript\nHTTP Request (continueOnFail: true) â†’ IF (error) â†’ Handle\n```\n\n### 4. âŒ Wrong: Blocking on large responses\nProcessing 10,000 items synchronously\n\n### âœ… Correct: Use batching\n```\nSplit In Batches (100 items) â†’ Process â†’ Loop\n```\n\n---\n\n## Real Template Examples\n\nFrom n8n template library (892 API integration templates):\n\n**GitHub to Notion**:\n```\nSchedule â†’ HTTP Request (GitHub API) â†’ Transform â†’ HTTP Request (Notion API)\n```\n\n**Weather to Slack**:\n```\nSchedule â†’ HTTP Request (Weather API) â†’ Set (format) â†’ Slack\n```\n\n**CRM Sync**:\n```\nSchedule â†’ HTTP Request (CRM A) â†’ Transform â†’ HTTP Request (CRM B)\n```\n\nUse `search_templates({query: \"http api\"})` to find more!\n\n---\n\n## Checklist for API Integration\n\n### Planning\n- [ ] Test API with Postman/curl first\n- [ ] Understand response structure\n- [ ] Check rate limits\n- [ ] Review authentication method\n- [ ] Plan error handling\n\n### Implementation\n- [ ] Use credentials (never hardcode)\n- [ ] Configure proper HTTP method\n- [ ] Set correct headers (Content-Type, Accept)\n- [ ] Handle pagination if needed\n- [ ] Add query parameters properly\n\n### Error Handling\n- [ ] Set continueOnFail: true if needed\n- [ ] Check response status codes\n- [ ] Implement retry logic\n- [ ] Add Error Trigger workflow\n- [ ] Alert on failures\n\n### Performance\n- [ ] Use batching for large datasets\n- [ ] Add rate limiting if needed\n- [ ] Consider caching\n- [ ] Test with production load\n\n### Security\n- [ ] Use HTTPS only\n- [ ] Store secrets in credentials\n- [ ] Validate API responses\n- [ ] Use environment variables\n\n---\n\n## Summary\n\n**Key Points**:\n1. **Authentication** via credentials system (never hardcode)\n2. **Error handling** is critical (continueOnFail + IF checks)\n3. **Pagination** for large datasets\n4. **Rate limiting** to respect API limits\n5. **Transform responses** to match your needs\n\n**Pattern**: Trigger â†’ HTTP Request â†’ Transform â†’ Action â†’ Error Handler\n\n**Related**:\n- [webhook_processing.md](webhook_processing.md) - Receiving HTTP requests\n- [database_operations.md](database_operations.md) - Storing API data\n",
        "skills/n8n-workflow-patterns/scheduled_tasks.md": "# Scheduled Tasks Pattern\n\n**Use Case**: Recurring automation workflows that run automatically on a schedule.\n\n---\n\n## Pattern Structure\n\n```\nSchedule Trigger â†’ [Fetch Data] â†’ [Process] â†’ [Deliver] â†’ [Log/Notify]\n```\n\n**Key Characteristic**: Time-based automated execution\n\n---\n\n## Core Components\n\n### 1. Schedule Trigger\n**Purpose**: Execute workflow at specified times\n\n**Modes**:\n- **Interval** - Every X minutes/hours/days\n- **Cron** - Specific times (advanced)\n- **Days & Hours** - Simple recurring schedule\n\n### 2. Data Source\n**Common sources**:\n- HTTP Request (APIs)\n- Database queries\n- File reads\n- Service-specific nodes\n\n### 3. Processing\n**Typical operations**:\n- Filter/transform data\n- Aggregate statistics\n- Generate reports\n- Check conditions\n\n### 4. Delivery\n**Output channels**:\n- Email\n- Slack/Discord/Teams\n- File storage\n- Database writes\n\n### 5. Logging\n**Purpose**: Track execution history\n\n**Methods**:\n- Database log entries\n- File append\n- Monitoring service\n\n---\n\n## Schedule Configuration\n\n### Interval Mode\n**Best for**: Simple recurring tasks\n\n**Examples**:\n```javascript\n// Every 15 minutes\n{\n  mode: \"interval\",\n  interval: 15,\n  unit: \"minutes\"\n}\n\n// Every 2 hours\n{\n  mode: \"interval\",\n  interval: 2,\n  unit: \"hours\"\n}\n\n// Every day at midnight\n{\n  mode: \"interval\",\n  interval: 1,\n  unit: \"days\"\n}\n```\n\n### Days & Hours Mode\n**Best for**: Specific days and times\n\n**Examples**:\n```javascript\n// Weekdays at 9 AM\n{\n  mode: \"daysAndHours\",\n  days: [\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\"],\n  hour: 9,\n  minute: 0\n}\n\n// Every Monday at 6 PM\n{\n  mode: \"daysAndHours\",\n  days: [\"monday\"],\n  hour: 18,\n  minute: 0\n}\n```\n\n### Cron Mode (Advanced)\n**Best for**: Complex schedules\n\n**Examples**:\n```javascript\n// Every weekday at 9 AM\n{\n  mode: \"cron\",\n  expression: \"0 9 * * 1-5\"\n}\n\n// First day of every month at midnight\n{\n  mode: \"cron\",\n  expression: \"0 0 1 * *\"\n}\n\n// Every 15 minutes during business hours (9 AM - 5 PM) on weekdays\n{\n  mode: \"cron\",\n  expression: \"*/15 9-17 * * 1-5\"\n}\n```\n\n**Cron format**: `minute hour day month weekday`\n- `*` = any value\n- `*/15` = every 15 units\n- `1-5` = range (Monday-Friday)\n- `1,15` = specific values\n\n**Cron examples**:\n```\n0 */6 * * *      Every 6 hours\n0 9,17 * * *     At 9 AM and 5 PM daily\n0 0 * * 0        Every Sunday at midnight\n*/30 * * * *     Every 30 minutes\n0 0 1,15 * *     1st and 15th of each month\n```\n\n---\n\n## Common Use Cases\n\n### 1. Daily Reports\n**Flow**: Schedule â†’ Fetch data â†’ Aggregate â†’ Format â†’ Email\n\n**Example** (Sales report):\n```\n1. Schedule (daily at 9 AM)\n\n2. Postgres (query yesterday's sales)\n   SELECT date, SUM(amount) as total, COUNT(*) as orders\n   FROM orders\n   WHERE date = CURRENT_DATE - INTERVAL '1 day'\n   GROUP BY date\n\n3. Code (calculate metrics)\n   - Total revenue\n   - Order count\n   - Average order value\n   - Comparison to previous day\n\n4. Set (format email body)\n   Subject: Daily Sales Report - {{$json.date}}\n   Body: Formatted HTML with metrics\n\n5. Email (send to team@company.com)\n\n6. Slack (post summary to #sales)\n```\n\n### 2. Data Synchronization\n**Flow**: Schedule â†’ Fetch from source â†’ Transform â†’ Write to target\n\n**Example** (CRM to data warehouse sync):\n```\n1. Schedule (every hour)\n\n2. Set (store last sync time)\n   SELECT MAX(synced_at) FROM sync_log\n\n3. HTTP Request (fetch new CRM contacts since last sync)\n   GET /api/contacts?updated_since={{$json.last_sync}}\n\n4. IF (check if new records exist)\n\n5. Set (transform CRM schema to warehouse schema)\n\n6. Postgres (warehouse - INSERT new contacts)\n\n7. Postgres (UPDATE sync_log SET synced_at = NOW())\n\n8. IF (error occurred)\n   â””â”€ Slack (alert #data-team)\n```\n\n### 3. Monitoring & Health Checks\n**Flow**: Schedule â†’ Check endpoints â†’ Alert if down\n\n**Example** (Website uptime monitor):\n```\n1. Schedule (every 5 minutes)\n\n2. HTTP Request (GET https://example.com/health)\n   - timeout: 10 seconds\n   - continueOnFail: true\n\n3. IF (status !== 200 OR response_time > 2000ms)\n\n4. Redis (check alert cooldown - don't spam)\n   - Key: alert:website_down\n   - TTL: 30 minutes\n\n5. IF (no recent alert sent)\n\n6. [Alert Actions]\n   â”œâ”€ Slack (notify #ops-team)\n   â”œâ”€ PagerDuty (create incident)\n   â”œâ”€ Email (alert@company.com)\n   â””â”€ Redis (set alert cooldown)\n\n7. Postgres (log uptime check result)\n```\n\n### 4. Cleanup & Maintenance\n**Flow**: Schedule â†’ Find old data â†’ Archive/Delete â†’ Report\n\n**Example** (Database cleanup):\n```\n1. Schedule (weekly on Sunday at 2 AM)\n\n2. Postgres (find old records)\n   SELECT * FROM logs\n   WHERE created_at < NOW() - INTERVAL '90 days'\n   LIMIT 10000\n\n3. IF (records exist)\n\n4. Code (export to JSON for archive)\n\n5. Google Drive (upload archive file)\n   - Filename: logs_archive_{{$now.format('YYYY-MM-DD')}}.json\n\n6. Postgres (DELETE archived records)\n   DELETE FROM logs\n   WHERE id IN ({{$json.archived_ids}})\n\n7. Slack (report: \"Archived X records, deleted Y records\")\n```\n\n### 5. Data Enrichment\n**Flow**: Schedule â†’ Find incomplete records â†’ Enrich â†’ Update\n\n**Example** (Enrich contacts with company data):\n```\n1. Schedule (nightly at 3 AM)\n\n2. Postgres (find contacts without company data)\n   SELECT id, email, domain FROM contacts\n   WHERE company_name IS NULL\n   AND created_at > NOW() - INTERVAL '7 days'\n   LIMIT 100\n\n3. Split In Batches (10 contacts per batch)\n\n4. HTTP Request (call Clearbit enrichment API)\n   - For each contact domain\n   - Rate limit: wait 1 second between batches\n\n5. Set (map API response to database schema)\n\n6. Postgres (UPDATE contacts with company data)\n\n7. Wait (1 second - rate limiting)\n\n8. Loop (back to step 4 until all batches processed)\n\n9. Email (summary: \"Enriched X contacts\")\n```\n\n### 6. Backup Automation\n**Flow**: Schedule â†’ Export data â†’ Compress â†’ Store â†’ Verify\n\n**Example** (Database backup):\n```\n1. Schedule (daily at 2 AM)\n\n2. Code (execute pg_dump)\n   const { exec } = require('child_process');\n   exec('pg_dump -h db.example.com mydb > backup.sql')\n\n3. Code (compress backup)\n   const zlib = require('zlib');\n   // Compress backup.sql to backup.sql.gz\n\n4. AWS S3 (upload compressed backup)\n   - Bucket: backups\n   - Key: db/backup-{{$now.format('YYYY-MM-DD')}}.sql.gz\n\n5. AWS S3 (list old backups)\n   - Keep last 30 days only\n\n6. AWS S3 (delete old backups)\n\n7. IF (error occurred)\n   â”œâ”€ PagerDuty (critical alert)\n   â””â”€ Email (backup failed!)\n   ELSE\n   â””â”€ Slack (#devops: \"âœ… Backup completed\")\n```\n\n### 7. Content Publishing\n**Flow**: Schedule â†’ Fetch content â†’ Format â†’ Publish\n\n**Example** (Automated social media posts):\n```\n1. Schedule (every 3 hours during business hours)\n   - Cron: 0 9,12,15,18 * * 1-5\n\n2. Google Sheets (read content queue)\n   - Sheet: \"Scheduled Posts\"\n   - Filter: status=pending AND publish_time <= NOW()\n\n3. IF (posts available)\n\n4. HTTP Request (shorten URLs in post)\n\n5. HTTP Request (POST to Twitter API)\n\n6. HTTP Request (POST to LinkedIn API)\n\n7. Google Sheets (update status=published)\n\n8. Slack (notify #marketing: \"Posted: {{$json.title}}\")\n```\n\n---\n\n## Timezone Considerations\n\n### Set Workflow Timezone\n```javascript\n// In workflow settings\n{\n  timezone: \"America/New_York\"  // EST/EDT\n}\n```\n\n### Common Timezones\n```\nAmerica/New_York    - Eastern (US)\nAmerica/Chicago     - Central (US)\nAmerica/Denver      - Mountain (US)\nAmerica/Los_Angeles - Pacific (US)\nEurope/London       - GMT/BST\nEurope/Paris        - CET/CEST\nAsia/Tokyo          - JST\nAustralia/Sydney    - AEDT\nUTC                 - Universal Time\n```\n\n### Handle Daylight Saving\n**Best practice**: Use timezone-aware scheduling\n\n```javascript\n// âŒ Bad: UTC schedule for \"9 AM local\"\n// Will be off by 1 hour during DST transitions\n\n// âœ… Good: Set workflow timezone\n{\n  timezone: \"America/New_York\",\n  schedule: {\n    mode: \"daysAndHours\",\n    hour: 9  // Always 9 AM Eastern, regardless of DST\n  }\n}\n```\n\n---\n\n## Error Handling\n\n### Pattern 1: Error Trigger Workflow\n**Main workflow**: Normal execution\n**Error workflow**: Alerts and recovery\n\n**Main**:\n```\nSchedule â†’ Fetch â†’ Process â†’ Deliver\n```\n\n**Error**:\n```\nError Trigger (for main workflow)\n  â†’ Set (extract error details)\n  â†’ Slack (#ops-team: \"âŒ Scheduled job failed\")\n  â†’ Email (admin alert)\n  â†’ Postgres (log error for analysis)\n```\n\n### Pattern 2: Retry with Backoff\n```\nSchedule â†’ HTTP Request (continueOnFail: true)\n  â†’ IF (error)\n    â”œâ”€ Wait (5 minutes)\n    â”œâ”€ HTTP Request (retry 1)\n    â””â”€ IF (still error)\n      â”œâ”€ Wait (15 minutes)\n      â”œâ”€ HTTP Request (retry 2)\n      â””â”€ IF (still error)\n        â””â”€ Alert admin\n```\n\n### Pattern 3: Partial Failure Handling\n```\nSchedule â†’ Split In Batches\n  â†’ Process (continueOnFail: true)\n  â†’ Code (track successes and failures)\n  â†’ Report:\n    \"âœ… Processed: 95/100\"\n    \"âŒ Failed: 5/100\"\n```\n\n---\n\n## Performance Optimization\n\n### 1. Batch Processing\nFor large datasets:\n\n```\nSchedule â†’ Query (LIMIT 10000)\n  â†’ Split In Batches (100 items)\n  â†’ Process batch\n  â†’ Loop\n```\n\n### 2. Parallel Processing\nWhen operations are independent:\n\n```\nSchedule\n  â”œâ”€ [Branch 1: Update DB]\n  â”œâ”€ [Branch 2: Send emails]\n  â””â”€ [Branch 3: Generate report]\n  â†’ Merge (wait for all) â†’ Final notification\n```\n\n### 3. Skip if Already Running\nPrevent overlapping executions:\n\n```\nSchedule â†’ Redis (check lock)\n  â†’ IF (lock exists)\n    â””â”€ End (skip this execution)\n  â†’ ELSE\n    â”œâ”€ Redis (set lock, TTL 30 min)\n    â”œâ”€ [Execute workflow]\n    â””â”€ Redis (delete lock)\n```\n\n### 4. Early Exit on No Data\nDon't waste time if nothing to process:\n\n```\nSchedule â†’ Query (check if work exists)\n  â†’ IF (no results)\n    â””â”€ End workflow (exit early)\n  â†’ ELSE\n    â””â”€ Process data\n```\n\n---\n\n## Monitoring & Logging\n\n### Pattern 1: Execution Log Table\n```sql\nCREATE TABLE workflow_executions (\n  id SERIAL PRIMARY KEY,\n  workflow_name VARCHAR(255),\n  started_at TIMESTAMP,\n  completed_at TIMESTAMP,\n  status VARCHAR(50),\n  records_processed INT,\n  error_message TEXT\n);\n```\n\n**Log execution**:\n```\nSchedule\n  â†’ Set (record start)\n  â†’ [Workflow logic]\n  â†’ Postgres (INSERT execution log)\n```\n\n### Pattern 2: Metrics Collection\n```\nSchedule â†’ [Execute]\n  â†’ Code (calculate metrics)\n    - Duration\n    - Records processed\n    - Success rate\n  â†’ HTTP Request (send to monitoring system)\n    - Datadog, Prometheus, etc.\n```\n\n### Pattern 3: Summary Notifications\nDaily/weekly execution summaries:\n\n```\nSchedule (daily at 6 PM) â†’ Query execution logs\n  â†’ Code (aggregate today's executions)\n  â†’ Email (summary report)\n    \"Today's Workflow Executions:\n     - 24/24 successful\n     - 0 failures\n     - Avg duration: 2.3 min\"\n```\n\n---\n\n## Testing Scheduled Workflows\n\n### 1. Use Manual Trigger for Testing\n**Development pattern**:\n```\nManual Trigger (for testing)\n  â†’ [Same workflow logic]\n  â†’ [Outputs]\n\n// Once tested, replace with Schedule Trigger\n```\n\n### 2. Test with Different Times\n```javascript\n// Code node - simulate different times\nconst testTime = new Date('2024-01-15T09:00:00Z');\nreturn [{ json: { currentTime: testTime } }];\n```\n\n### 3. Dry Run Mode\n```\nSchedule â†’ Set (dryRun: true)\n  â†’ IF (dryRun)\n    â””â”€ Log what would happen (don't execute)\n  â†’ ELSE\n    â””â”€ Execute normally\n```\n\n### 4. Shorter Interval for Testing\n```javascript\n// Testing: every 1 minute\n{\n  mode: \"interval\",\n  interval: 1,\n  unit: \"minutes\"\n}\n\n// Production: every 1 hour\n{\n  mode: \"interval\",\n  interval: 1,\n  unit: \"hours\"\n}\n```\n\n---\n\n## Common Gotchas\n\n### 1. âŒ Wrong: Ignoring timezone\n```javascript\nSchedule (9 AM)  // 9 AM in which timezone?\n```\n\n### âœ… Correct: Set workflow timezone\n```javascript\n// Workflow settings\n{\n  timezone: \"America/New_York\"\n}\n```\n\n### 2. âŒ Wrong: Overlapping executions\n```\nSchedule (every 5 min) â†’ Long-running task (10 min)\n// Two executions running simultaneously!\n```\n\n### âœ… Correct: Add execution lock\n```\nSchedule â†’ Redis (check lock)\n  â†’ IF (locked) â†’ Skip\n  â†’ ELSE â†’ Execute\n```\n\n### 3. âŒ Wrong: No error handling\n```\nSchedule â†’ API call â†’ Process (fails silently)\n```\n\n### âœ… Correct: Add error workflow\n```\nMain: Schedule â†’ Execute\nError: Error Trigger â†’ Alert\n```\n\n### 4. âŒ Wrong: Processing all data at once\n```\nSchedule â†’ SELECT 1000000 records â†’ Process (OOM)\n```\n\n### âœ… Correct: Batch processing\n```\nSchedule â†’ SELECT with pagination â†’ Split In Batches â†’ Process\n```\n\n### 5. âŒ Wrong: Hardcoded dates\n```javascript\nquery: \"SELECT * FROM orders WHERE date = '2024-01-15'\"\n```\n\n### âœ… Correct: Dynamic dates\n```javascript\nquery: \"SELECT * FROM orders WHERE date = CURRENT_DATE - INTERVAL '1 day'\"\n```\n\n---\n\n## Real Template Examples\n\nFrom n8n template library:\n\n**Template #2947** (Weather to Slack):\n```\nSchedule (daily 8 AM)\n  â†’ HTTP Request (weather API)\n  â†’ Set (format message)\n  â†’ Slack (post to #general)\n```\n\n**Daily backup**:\n```\nSchedule (nightly 2 AM)\n  â†’ Postgres (export data)\n  â†’ Google Drive (upload)\n  â†’ Email (confirmation)\n```\n\n**Monitoring**:\n```\nSchedule (every 5 min)\n  â†’ HTTP Request (health check)\n  â†’ IF (down) â†’ PagerDuty alert\n```\n\nUse `search_templates({query: \"schedule\"})` to find more!\n\n---\n\n## Checklist for Scheduled Workflows\n\n### Planning\n- [ ] Define schedule frequency (interval, cron, days & hours)\n- [ ] Set workflow timezone\n- [ ] Estimate execution duration\n- [ ] Plan for failures and retries\n- [ ] Consider timezone and DST\n\n### Implementation\n- [ ] Configure Schedule Trigger\n- [ ] Set workflow timezone in settings\n- [ ] Add early exit for no-op cases\n- [ ] Implement batch processing for large data\n- [ ] Add execution logging\n\n### Error Handling\n- [ ] Create Error Trigger workflow\n- [ ] Implement retry logic\n- [ ] Add alert notifications\n- [ ] Log errors for analysis\n- [ ] Handle partial failures gracefully\n\n### Monitoring\n- [ ] Log each execution (start, end, status)\n- [ ] Track metrics (duration, records, success rate)\n- [ ] Set up daily/weekly summaries\n- [ ] Alert on consecutive failures\n- [ ] Monitor resource usage\n\n### Testing\n- [ ] Test with Manual Trigger first\n- [ ] Verify timezone behavior\n- [ ] Test error scenarios\n- [ ] Check for overlapping executions\n- [ ] Validate output quality\n\n### Deployment\n- [ ] Document workflow purpose\n- [ ] Set up monitoring\n- [ ] Configure alerts\n- [ ] Activate workflow in n8n UI âš ï¸ **Manual activation required** (API/MCP cannot activate)\n- [ ] Test in production (short interval first)\n- [ ] Monitor first few executions\n\n---\n\n## Advanced Patterns\n\n### Dynamic Scheduling\n**Change schedule based on conditions**:\n\n```\nSchedule (check every hour) â†’ Code (check if it's time to run)\n  â†’ IF (business hours AND weekday)\n    â””â”€ Execute workflow\n  â†’ ELSE\n    â””â”€ Skip\n```\n\n### Dependent Schedules\n**Chain workflows**:\n\n```\nWorkflow A (daily 2 AM): Data sync\n  â†’ On completion â†’ Trigger Workflow B\n\nWorkflow B: Generate report (depends on fresh data)\n```\n\n### Conditional Execution\n**Skip based on external factors**:\n\n```\nSchedule â†’ HTTP Request (check feature flag)\n  â†’ IF (feature enabled)\n    â””â”€ Execute\n  â†’ ELSE\n    â””â”€ Skip\n```\n\n---\n\n## Summary\n\n**Key Points**:\n1. **Set workflow timezone** explicitly\n2. **Batch processing** for large datasets\n3. **Error handling** is critical (Error Trigger + retries)\n4. **Prevent overlaps** with execution locks\n5. **Monitor and log** all executions\n\n**Pattern**: Schedule â†’ Fetch â†’ Process â†’ Deliver â†’ Log\n\n**Schedule Modes**:\n- **Interval**: Simple recurring (every X minutes/hours)\n- **Days & Hours**: Specific days and times\n- **Cron**: Advanced complex schedules\n\n**Related**:\n- [http_api_integration.md](http_api_integration.md) - Fetching data on schedule\n- [database_operations.md](database_operations.md) - Scheduled database tasks\n- [webhook_processing.md](webhook_processing.md) - Alternative to scheduling\n",
        "skills/n8n-workflow-patterns/webhook_processing.md": "# Webhook Processing Pattern\n\n**Use Case**: Receive HTTP requests from external systems and process them instantly.\n\n---\n\n## Pattern Structure\n\n```\nWebhook â†’ [Validate] â†’ [Transform] â†’ [Action] â†’ [Response/Notify]\n```\n\n**Key Characteristic**: Instant event-driven processing\n\n---\n\n## Core Components\n\n### 1. Webhook Node (Trigger)\n**Purpose**: Create HTTP endpoint to receive data\n\n**Configuration**:\n```javascript\n{\n  path: \"form-submit\",        // URL path: https://n8n.example.com/webhook/form-submit\n  httpMethod: \"POST\",         // GET, POST, PUT, DELETE\n  responseMode: \"onReceived\", // or \"lastNode\" for custom response\n  responseData: \"allEntries\"  // or \"firstEntryJson\"\n}\n```\n\n**Critical Gotcha**: Data is nested under `$json.body`\n```javascript\nâŒ {{$json.email}}\nâœ… {{$json.body.email}}\n```\n\n### 2. Validation (Optional but Recommended)\n**Purpose**: Verify incoming data before processing\n\n**Options**:\n- **IF node** - Check required fields exist\n- **Code node** - Custom validation logic\n- **Stop and Error** - Fail gracefully with message\n\n**Example**:\n```javascript\n// IF node condition\n{{$json.body.email}} is not empty AND\n{{$json.body.name}} is not empty\n```\n\n### 3. Transformation\n**Purpose**: Map webhook data to desired format\n\n**Typical nodes**:\n- **Set** - Field mapping\n- **Code** - Complex transformations\n\n**Example** (Set node):\n```javascript\n{\n  \"user_email\": \"={{$json.body.email}}\",\n  \"user_name\": \"={{$json.body.name}}\",\n  \"timestamp\": \"={{$now}}\"\n}\n```\n\n### 4. Action\n**Purpose**: Do something with the data\n\n**Common actions**:\n- Store in database (Postgres, MySQL, MongoDB)\n- Send notification (Slack, Email, Discord)\n- Call another API (HTTP Request)\n- Update external system (CRM, support ticket)\n\n### 5. Response (If responseMode: \"lastNode\")\n**Purpose**: Send custom HTTP response\n\n**Webhook Response Node**:\n```javascript\n{\n  statusCode: 200,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  },\n  body: {\n    \"status\": \"success\",\n    \"message\": \"Form received\"\n  }\n}\n```\n\n---\n\n## Common Use Cases\n\n### 1. Form Submissions\n**Flow**: Form â†’ Webhook â†’ Validate â†’ Database â†’ Email Confirmation\n\n**Example**:\n```\n1. Webhook (path: \"contact-form\", POST)\n2. IF (check email & message not empty)\n3. Postgres (insert into contacts table)\n4. Email (send confirmation to user)\n5. Slack (notify team in #leads)\n6. Webhook Response ({\"status\": \"success\"})\n```\n\n**Real Data Access**:\n```javascript\nName: {{$json.body.name}}\nEmail: {{$json.body.email}}\nMessage: {{$json.body.message}}\n```\n\n### 2. Payment Webhooks (Stripe, PayPal)\n**Flow**: Payment Provider â†’ Webhook â†’ Verify â†’ Update Database â†’ Send Receipt\n\n**Security**: Verify webhook signatures\n```javascript\n// Code node - verify Stripe signature\nconst crypto = require('crypto');\nconst signature = $input.item.headers['stripe-signature'];\nconst secret = $credentials.stripeWebhookSecret;\n\n// Verify signature matches\nconst expectedSig = crypto\n  .createHmac('sha256', secret)\n  .update($input.item.body)\n  .digest('hex');\n\nif (signature !== expectedSig) {\n  throw new Error('Invalid webhook signature');\n}\n\nreturn $input.item.body; // Return validated body\n```\n\n### 3. Chat Platform Integrations (Slack, Discord, Teams)\n**Flow**: Chat Command â†’ Webhook â†’ Process â†’ Respond\n\n**Example** (Slack slash command):\n```\n1. Webhook (path: \"slack-command\", POST)\n2. Code (parse Slack payload: $json.body.text, $json.body.user_id)\n3. HTTP Request (fetch data from API)\n4. Set (format Slack message)\n5. Webhook Response (immediate Slack response)\n```\n\n**Slack Data Access**:\n```javascript\nCommand: {{$json.body.command}}\nText: {{$json.body.text}}\nUser ID: {{$json.body.user_id}}\nChannel ID: {{$json.body.channel_id}}\n```\n\n### 4. GitHub/GitLab Webhooks\n**Flow**: Git Event â†’ Webhook â†’ Parse â†’ Notify/Deploy\n\n**Example** (new PR notification):\n```\n1. Webhook (path: \"github\", POST)\n2. IF (check $json.body.action equals \"opened\")\n3. Set (extract PR details: title, author, url)\n4. Slack (notify #dev-team)\n5. Webhook Response (200 OK)\n```\n\n**GitHub Data Access**:\n```javascript\nEvent Type: {{$json.headers['x-github-event']}}\nAction: {{$json.body.action}}\nPR Title: {{$json.body.pull_request.title}}\nAuthor: {{$json.body.pull_request.user.login}}\nURL: {{$json.body.pull_request.html_url}}\n```\n\n### 5. IoT Device Data\n**Flow**: Device â†’ Webhook â†’ Validate â†’ Store â†’ Alert (if threshold)\n\n**Example** (temperature sensor):\n```\n1. Webhook (path: \"sensor-data\", POST)\n2. Set (extract sensor readings)\n3. Postgres (insert into sensor_readings)\n4. IF (temperature > 80)\n5. Email (alert admin)\n```\n\n---\n\n## Webhook Data Structure\n\n### Standard Structure\n```json\n{\n  \"headers\": {\n    \"content-type\": \"application/json\",\n    \"user-agent\": \"...\",\n    \"x-custom-header\": \"...\"\n  },\n  \"params\": {\n    \"id\": \"123\"  // From URL: /webhook/form/:id\n  },\n  \"query\": {\n    \"token\": \"abc\"  // From URL: /webhook/form?token=abc\n  },\n  \"body\": {\n    // âš ï¸ YOUR DATA IS HERE!\n    \"name\": \"John\",\n    \"email\": \"john@example.com\"\n  }\n}\n```\n\n### Accessing Different Parts\n```javascript\n// Headers\n{{$json.headers['content-type']}}\n{{$json.headers['x-api-key']}}\n\n// URL Parameters\n{{$json.params.id}}\n\n// Query Parameters\n{{$json.query.token}}\n{{$json.query.page}}\n\n// Body (MOST COMMON)\n{{$json.body.email}}\n{{$json.body.user.name}}\n{{$json.body.items[0].price}}\n```\n\n---\n\n## Authentication & Security\n\n### 1. Query Parameter Token\n**Simple but less secure**\n```javascript\n// IF node - validate token\n{{$json.query.token}} equals \"your-secret-token\"\n```\n\n### 2. Header-Based Auth\n**Better security**\n```javascript\n// IF node - check header\n{{$json.headers['x-api-key']}} equals \"your-api-key\"\n```\n\n### 3. Signature Verification\n**Best security** (for webhooks from services like Stripe, GitHub)\n```javascript\n// Code node\nconst crypto = require('crypto');\nconst signature = $input.item.headers['x-signature'];\nconst secret = $credentials.webhookSecret;\n\nconst calculatedSig = crypto\n  .createHmac('sha256', secret)\n  .update(JSON.stringify($input.item.body))\n  .digest('hex');\n\nif (signature !== `sha256=${calculatedSig}`) {\n  throw new Error('Invalid signature');\n}\n\nreturn $input.item.body;\n```\n\n### 4. IP Whitelist\n**Restrict access by IP** (n8n workflow settings)\n- Configure in workflow settings\n- Only allow specific IP ranges\n- Use for internal systems\n\n---\n\n## Response Modes\n\n### onReceived (Default)\n**Behavior**: Immediate 200 OK response, workflow continues in background\n\n**Use when**:\n- Long-running workflows\n- Response doesn't depend on workflow result\n- Fire-and-forget processing\n\n**Configuration**:\n```javascript\n{\n  responseMode: \"onReceived\",\n  responseCode: 200\n}\n```\n\n### lastNode (Custom Response)\n**Behavior**: Wait for workflow completion, send custom response\n\n**Use when**:\n- Need to return data to caller\n- Synchronous processing required\n- Form submissions with confirmation\n\n**Configuration**:\n```javascript\n{\n  responseMode: \"lastNode\"\n}\n```\n\n**Then add Webhook Response node**:\n```javascript\n{\n  statusCode: 200,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  },\n  body: {\n    \"id\": \"={{$json.record_id}}\",\n    \"status\": \"success\"\n  }\n}\n```\n\n---\n\n## Error Handling\n\n### Pattern 1: Try-Catch with Error Trigger\n```\nMain Flow:\n  Webhook â†’ [nodes...] â†’ Success Response\n\nError Flow:\n  Error Trigger â†’ Log Error â†’ Slack Alert â†’ Error Response\n```\n\n**Error Trigger Configuration**:\n```javascript\n{\n  workflowId: \"current-workflow-id\"\n}\n```\n\n**Error Response** (if responseMode: \"lastNode\"):\n```javascript\n{\n  statusCode: 500,\n  body: {\n    \"status\": \"error\",\n    \"message\": \"Processing failed\"\n  }\n}\n```\n\n### Pattern 2: Validation Early Exit\n```\nWebhook â†’ IF (validate) â†’ [True: Process]\n                       â””â†’ [False: Error Response]\n```\n\n**False Branch Response**:\n```javascript\n{\n  statusCode: 400,\n  body: {\n    \"status\": \"error\",\n    \"message\": \"Invalid data: missing email\"\n  }\n}\n```\n\n### Pattern 3: Continue On Fail\n**Per-node setting**: Continue even if node fails\n\n**Use case**: Non-critical notifications\n```\nWebhook â†’ Database (critical) â†’ Slack (continueOnFail: true)\n```\n\n---\n\n## Testing Webhooks\n\n### 1. Use Manual Trigger\nReplace Webhook with Manual Trigger for testing:\n```\nManual Trigger â†’ [set test data] â†’ rest of workflow\n```\n\n### 2. Use curl\n```bash\ncurl -X POST https://n8n.example.com/webhook/form-submit \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\": \"test@example.com\", \"name\": \"Test User\"}'\n```\n\n### 3. Use Postman/Insomnia\n- Create request collection\n- Test different payloads\n- Verify responses\n\n### 4. Webhook.site\n- Use webhook.site for testing\n- Copy webhook.site URL to your service\n- View requests and debug\n\n---\n\n## Performance Considerations\n\n### Large Payloads\n- Webhook timeout: 120 seconds (default)\n- For large data, consider async processing:\n  ```\n  Webhook â†’ Queue (Redis/DB) â†’ Response (immediate)\n\n  Separate Workflow:\n  Schedule â†’ Check Queue â†’ Process\n  ```\n\n### High Volume\n- Use \"Execute Once\" mode if processing all items together\n- Consider rate limiting\n- Monitor execution times\n- Scale n8n instance if needed\n\n### Retries\n- Webhook calls typically don't retry automatically\n- Implement retry logic on caller side\n- Or use queue pattern for guaranteed processing\n\n---\n\n## Common Gotchas\n\n### 1. âŒ Wrong: Accessing webhook data\n```javascript\n{{$json.email}}  // Empty or undefined\n```\n\n### âœ… Correct\n```javascript\n{{$json.body.email}}  // Data is under .body\n```\n\n### 2. âŒ Wrong: Response mode confusion\nUsing Webhook Response node with responseMode: \"onReceived\" (ignored)\n\n### âœ… Correct\nSet responseMode: \"lastNode\" to use Webhook Response node\n\n### 3. âŒ Wrong: No validation\nAssuming data is always present and valid\n\n### âœ… Correct\nValidate data early with IF node or Code node\n\n### 4. âŒ Wrong: Hardcoded paths\nUsing same path for dev/prod\n\n### âœ… Correct\nUse environment variables: `{{$env.WEBHOOK_PATH_PREFIX}}/form-submit`\n\n---\n\n## Real Template Examples\n\nFrom n8n template library (1,085 webhook templates):\n\n**Simple Form to Slack**:\n```\nWebhook â†’ Set â†’ Slack\n```\n\n**Payment Processing**:\n```\nWebhook â†’ Verify Signature â†’ Update Database â†’ Send Receipt â†’ Notify Admin\n```\n\n**Chat Bot**:\n```\nWebhook â†’ Parse Command â†’ AI Agent â†’ Format Response â†’ Webhook Response\n```\n\nUse `search_templates({query: \"webhook\"})` to find more!\n\n---\n\n## Checklist for Webhook Workflows\n\n### Setup\n- [ ] Choose descriptive webhook path\n- [ ] Configure HTTP method (POST most common)\n- [ ] Choose response mode (onReceived vs lastNode)\n- [ ] Test webhook URL before connecting services\n\n### Security\n- [ ] Add authentication (token, signature, IP whitelist)\n- [ ] Validate incoming data\n- [ ] Sanitize user input (if storing/displaying)\n- [ ] Use HTTPS (always)\n\n### Data Handling\n- [ ] Remember data is under $json.body\n- [ ] Handle missing fields gracefully\n- [ ] Transform data to desired format\n- [ ] Log important data (for debugging)\n\n### Error Handling\n- [ ] Add Error Trigger workflow\n- [ ] Validate required fields\n- [ ] Return appropriate error responses\n- [ ] Alert team on failures\n\n### Testing\n- [ ] Test with curl/Postman\n- [ ] Test error scenarios\n- [ ] Verify response format\n- [ ] Monitor first executions\n\n---\n\n## Summary\n\n**Key Points**:\n1. **Data under $json.body** (most common mistake!)\n2. **Validate early** to catch bad data\n3. **Choose response mode** based on use case\n4. **Secure webhooks** with auth\n5. **Handle errors** gracefully\n\n**Pattern**: Webhook â†’ Validate â†’ Transform â†’ Action â†’ Response\n\n**Related**:\n- [n8n Expression Syntax](../../n8n-expression-syntax/SKILL.md) - Accessing webhook data correctly\n- [http_api_integration.md](http_api_integration.md) - Making HTTP requests in response\n",
        "skills/remotion/SKILL.md": "---\nname: remotion-best-practices\ndescription: Best practices for Remotion - Video creation in React. Use this skill when working with Remotion code, creating programmatic videos, React-based animations, or video compositions.\nmetadata:\n  tags: remotion, video, react, animation, composition\n\n# ç”Ÿå‘½å‘¨æœŸç®¡ç†å­—æ®µï¼ˆç”¨äº skill-manager æ£€æŸ¥æ›´æ–°ï¼‰\nsource_url: https://github.com/remotion-dev/skills\nsource_hash: 0fd8c6b1fadcd26718a2919bcac705809f8456a3\nversion: 1.0.0\ncreated_at: 2026-01-28\nupdated_at: 2026-01-28\nevolution_enabled: true\n---\n\n## When to use\n\nUse this skills whenever you are dealing with Remotion code to obtain the domain-specific knowledge.\n\n## How to use\n\nRead individual rule files for detailed explanations and code examples:\n\n- [rules/3d.md](rules/3d.md) - 3D content in Remotion using Three.js and React Three Fiber\n- [rules/animations.md](rules/animations.md) - Fundamental animation skills for Remotion\n- [rules/assets.md](rules/assets.md) - Importing images, videos, audio, and fonts into Remotion\n- [rules/audio.md](rules/audio.md) - Using audio and sound in Remotion - importing, trimming, volume, speed, pitch\n- [rules/calculate-metadata.md](rules/calculate-metadata.md) - Dynamically set composition duration, dimensions, and props\n- [rules/can-decode.md](rules/can-decode.md) - Check if a video can be decoded by the browser using Mediabunny\n- [rules/charts.md](rules/charts.md) - Chart and data visualization patterns for Remotion\n- [rules/compositions.md](rules/compositions.md) - Defining compositions, stills, folders, default props and dynamic metadata\n- [rules/display-captions.md](rules/display-captions.md) - Displaying captions in Remotion with TikTok-style pages and word highlighting\n- [rules/extract-frames.md](rules/extract-frames.md) - Extract frames from videos at specific timestamps using Mediabunny\n- [rules/fonts.md](rules/fonts.md) - Loading Google Fonts and local fonts in Remotion\n- [rules/get-audio-duration.md](rules/get-audio-duration.md) - Getting the duration of an audio file in seconds with Mediabunny\n- [rules/get-video-dimensions.md](rules/get-video-dimensions.md) - Getting the width and height of a video file with Mediabunny\n- [rules/get-video-duration.md](rules/get-video-duration.md) - Getting the duration of a video file in seconds with Mediabunny\n- [rules/gifs.md](rules/gifs.md) - Displaying GIFs synchronized with Remotion's timeline\n- [rules/images.md](rules/images.md) - Embedding images in Remotion using the Img component\n- [rules/import-srt-captions.md](rules/import-srt-captions.md) - Importing .srt subtitle files into Remotion using @remotion/captions\n- [rules/lottie.md](rules/lottie.md) - Embedding Lottie animations in Remotion\n- [rules/measuring-dom-nodes.md](rules/measuring-dom-nodes.md) - Measuring DOM element dimensions in Remotion\n- [rules/measuring-text.md](rules/measuring-text.md) - Measuring text dimensions, fitting text to containers, and checking overflow\n- [rules/sequencing.md](rules/sequencing.md) - Sequencing patterns for Remotion - delay, trim, limit duration of items\n- [rules/tailwind.md](rules/tailwind.md) - Using TailwindCSS in Remotion\n- [rules/text-animations.md](rules/text-animations.md) - Typography and text animation patterns for Remotion\n- [rules/timing.md](rules/timing.md) - Interpolation curves in Remotion - linear, easing, spring animations\n- [rules/transcribe-captions.md](rules/transcribe-captions.md) - Transcribing audio to generate captions in Remotion\n- [rules/transitions.md](rules/transitions.md) - Scene transition patterns for Remotion\n- [rules/trimming.md](rules/trimming.md) - Trimming patterns for Remotion - cut the beginning or end of animations\n- [rules/videos.md](rules/videos.md) - Embedding videos in Remotion - trimming, volume, speed, looping, pitch\n- [rules/parameters.md](rules/parameters.md) - Make a video parametrizable by adding a Zod schema\n- [rules/maps.md](rules/maps.md) - Add a map using Mapbox and animate it\n",
        "skills/remotion/rules/3d.md": "---\nname: 3d\ndescription: 3D content in Remotion using Three.js and React Three Fiber.\nmetadata:\n  tags: 3d, three, threejs\n---\n\n# Using Three.js and React Three Fiber in Remotion\n\nFollow React Three Fiber and Three.js best practices.  \nOnly the following Remotion-specific rules need to be followed:\n\n## Prerequisites\n\nFirst, the `@remotion/three` package needs to be installed.  \nIf it is not, use the following command:\n\n```bash\nnpx remotion add @remotion/three # If project uses npm\nbunx remotion add @remotion/three # If project uses bun\nyarn remotion add @remotion/three # If project uses yarn\npnpm exec remotion add @remotion/three # If project uses pnpm\n```\n\n## Using ThreeCanvas\n\nYou MUST wrap 3D content in `<ThreeCanvas>` and include proper lighting.  \n`<ThreeCanvas>` MUST have a `width` and `height` prop.\n\n```tsx\nimport { ThreeCanvas } from \"@remotion/three\";\nimport { useVideoConfig } from \"remotion\";\n\nconst { width, height } = useVideoConfig();\n\n<ThreeCanvas width={width} height={height}>\n  <ambientLight intensity={0.4} />\n  <directionalLight position={[5, 5, 5]} intensity={0.8} />\n  <mesh>\n    <sphereGeometry args={[1, 32, 32]} />\n    <meshStandardMaterial color=\"red\" />\n  </mesh>\n</ThreeCanvas>\n```\n\n## No animations not driven by `useCurrentFrame()`\n\nShaders, models etc MUST NOT animate by themselves.  \nNo animations are allowed unless they are driven by `useCurrentFrame()`.  \nOtherwise, it will cause flickering during rendering.  \n\nUsing `useFrame()` from `@react-three/fiber` is forbidden.\n\n## Animate using `useCurrentFrame()`\n\nUse `useCurrentFrame()` to perform animations.\n\n```tsx\nconst frame = useCurrentFrame();\nconst rotationY = frame * 0.02;\n\n<mesh rotation={[0, rotationY, 0]}>\n  <boxGeometry args={[2, 2, 2]} />\n  <meshStandardMaterial color=\"#4a9eff\" />\n</mesh>\n```\n\n## Using `<Sequence>` inside `<ThreeCanvas>`\n\nThe `layout` prop of any `<Sequence>` inside a `<ThreeCanvas>` must be set to `none`.\n\n```tsx\nimport { Sequence } from \"remotion\";\nimport { ThreeCanvas } from \"@remotion/three\";\n\nconst { width, height } = useVideoConfig();\n\n<ThreeCanvas width={width} height={height}>\n  <Sequence layout=\"none\">\n    <mesh>\n      <boxGeometry args={[2, 2, 2]} />\n      <meshStandardMaterial color=\"#4a9eff\" />\n    </mesh>\n  </Sequence>\n</ThreeCanvas>\n```",
        "skills/remotion/rules/animations.md": "---\nname: animations\ndescription: Fundamental animation skills for Remotion\nmetadata:\n  tags: animations, transitions, frames, useCurrentFrame\n---\n\nAll animations MUST be driven by the `useCurrentFrame()` hook.  \nWrite animations in seconds and multiply them by the `fps` value from `useVideoConfig()`.\n\n```tsx\nimport { useCurrentFrame } from \"remotion\";\n\nexport const FadeIn = () => {\n  const frame = useCurrentFrame();\n  const { fps } = useVideoConfig();\n\n  const opacity = interpolate(frame, [0, 2 * fps], [0, 1], {\n    extrapolateRight: 'clamp',\n  });\n \n  return (\n    <div style={{ opacity }}>Hello World!</div>\n  );\n};\n```\n\nCSS transitions or animations are FORBIDDEN - they will not render correctly.  \nTailwind animation class names are FORBIDDEN - they will not render correctly.  ",
        "skills/remotion/rules/assets.md": "---\nname: assets\ndescription: Importing images, videos, audio, and fonts into Remotion\nmetadata:\n  tags: assets, staticFile, images, fonts, public\n---\n\n# Importing assets in Remotion\n\n## The public folder\n\nPlace assets in the `public/` folder at your project root.\n\n## Using staticFile()\n\nYou MUST use `staticFile()` to reference files from the `public/` folder:\n\n```tsx\nimport {Img, staticFile} from 'remotion';\n\nexport const MyComposition = () => {\n  return <Img src={staticFile('logo.png')} />;\n};\n```\n\nThe function returns an encoded URL that works correctly when deploying to subdirectories.\n\n## Using with components\n\n**Images:**\n\n```tsx\nimport {Img, staticFile} from 'remotion';\n\n<Img src={staticFile('photo.png')} />;\n```\n\n**Videos:**\n\n```tsx\nimport {Video} from '@remotion/media';\nimport {staticFile} from 'remotion';\n\n<Video src={staticFile('clip.mp4')} />;\n```\n\n**Audio:**\n\n```tsx\nimport {Audio} from '@remotion/media';\nimport {staticFile} from 'remotion';\n\n<Audio src={staticFile('music.mp3')} />;\n```\n\n**Fonts:**\n\n```tsx\nimport {staticFile} from 'remotion';\n\nconst fontFamily = new FontFace('MyFont', `url(${staticFile('font.woff2')})`);\nawait fontFamily.load();\ndocument.fonts.add(fontFamily);\n```\n\n## Remote URLs\n\nRemote URLs can be used directly without `staticFile()`:\n\n```tsx\n<Img src=\"https://example.com/image.png\" />\n<Video src=\"https://remotion.media/video.mp4\" />\n```\n\n## Important notes\n\n- Remotion components (`<Img>`, `<Video>`, `<Audio>`) ensure assets are fully loaded before rendering\n- Special characters in filenames (`#`, `?`, `&`) are automatically encoded\n",
        "skills/remotion/rules/audio.md": "---\nname: audio\ndescription: Using audio and sound in Remotion - importing, trimming, volume, speed, pitch\nmetadata:\n  tags: audio, media, trim, volume, speed, loop, pitch, mute, sound, sfx\n---\n\n# Using audio in Remotion\n\n## Prerequisites\n\nFirst, the @remotion/media package needs to be installed.\nIf it is not installed, use the following command:\n\n```bash\nnpx remotion add @remotion/media # If project uses npm\nbunx remotion add @remotion/media # If project uses bun\nyarn remotion add @remotion/media # If project uses yarn\npnpm exec remotion add @remotion/media # If project uses pnpm\n```\n\n## Importing Audio\n\nUse `<Audio>` from `@remotion/media` to add audio to your composition.\n\n```tsx\nimport { Audio } from \"@remotion/media\";\nimport { staticFile } from \"remotion\";\n\nexport const MyComposition = () => {\n  return <Audio src={staticFile(\"audio.mp3\")} />;\n};\n```\n\nRemote URLs are also supported:\n\n```tsx\n<Audio src=\"https://remotion.media/audio.mp3\" />\n```\n\nBy default, audio plays from the start, at full volume and full length.\nMultiple audio tracks can be layered by adding multiple `<Audio>` components.\n\n## Trimming\n\nUse `trimBefore` and `trimAfter` to remove portions of the audio. Values are in frames.\n\n```tsx\nconst { fps } = useVideoConfig();\n\nreturn (\n  <Audio\n    src={staticFile(\"audio.mp3\")}\n    trimBefore={2 * fps} // Skip the first 2 seconds\n    trimAfter={10 * fps} // End at the 10 second mark\n  />\n);\n```\n\nThe audio still starts playing at the beginning of the composition - only the specified portion is played.\n\n## Delaying\n\nWrap the audio in a `<Sequence>` to delay when it starts:\n\n```tsx\nimport { Sequence, staticFile } from \"remotion\";\nimport { Audio } from \"@remotion/media\";\n\nconst { fps } = useVideoConfig();\n\nreturn (\n  <Sequence from={1 * fps}>\n    <Audio src={staticFile(\"audio.mp3\")} />\n  </Sequence>\n);\n```\n\nThe audio will start playing after 1 second.\n\n## Volume\n\nSet a static volume (0 to 1):\n\n```tsx\n<Audio src={staticFile(\"audio.mp3\")} volume={0.5} />\n```\n\nOr use a callback for dynamic volume based on the current frame:\n\n```tsx\nimport { interpolate } from \"remotion\";\n\nconst { fps } = useVideoConfig();\n\nreturn (\n  <Audio\n    src={staticFile(\"audio.mp3\")}\n    volume={(f) =>\n      interpolate(f, [0, 1 * fps], [0, 1], { extrapolateRight: \"clamp\" })\n    }\n  />\n);\n```\n\nThe value of `f` starts at 0 when the audio begins to play, not the composition frame.\n\n## Muting\n\nUse `muted` to silence the audio. It can be set dynamically:\n\n```tsx\nconst frame = useCurrentFrame();\nconst { fps } = useVideoConfig();\n\nreturn (\n  <Audio\n    src={staticFile(\"audio.mp3\")}\n    muted={frame >= 2 * fps && frame <= 4 * fps} // Mute between 2s and 4s\n  />\n);\n```\n\n## Speed\n\nUse `playbackRate` to change the playback speed:\n\n```tsx\n<Audio src={staticFile(\"audio.mp3\")} playbackRate={2} /> {/* 2x speed */}\n<Audio src={staticFile(\"audio.mp3\")} playbackRate={0.5} /> {/* Half speed */}\n```\n\nReverse playback is not supported.\n\n## Looping\n\nUse `loop` to loop the audio indefinitely:\n\n```tsx\n<Audio src={staticFile(\"audio.mp3\")} loop />\n```\n\nUse `loopVolumeCurveBehavior` to control how the frame count behaves when looping:\n\n- `\"repeat\"`: Frame count resets to 0 each loop (default)\n- `\"extend\"`: Frame count continues incrementing\n\n```tsx\n<Audio\n  src={staticFile(\"audio.mp3\")}\n  loop\n  loopVolumeCurveBehavior=\"extend\"\n  volume={(f) => interpolate(f, [0, 300], [1, 0])} // Fade out over multiple loops\n/>\n```\n\n## Pitch\n\nUse `toneFrequency` to adjust the pitch without affecting speed. Values range from 0.01 to 2:\n\n```tsx\n<Audio\n  src={staticFile(\"audio.mp3\")}\n  toneFrequency={1.5} // Higher pitch\n/>\n<Audio\n  src={staticFile(\"audio.mp3\")}\n  toneFrequency={0.8} // Lower pitch\n/>\n```\n\nPitch shifting only works during server-side rendering, not in the Remotion Studio preview or in the `<Player />`.\n",
        "skills/remotion/rules/calculate-metadata.md": "---\nname: calculate-metadata\ndescription: Dynamically set composition duration, dimensions, and props\nmetadata:\n  tags: calculateMetadata, duration, dimensions, props, dynamic\n---\n\n# Using calculateMetadata\n\nUse `calculateMetadata` on a `<Composition>` to dynamically set duration, dimensions, and transform props before rendering.\n\n```tsx\n<Composition id=\"MyComp\" component={MyComponent} durationInFrames={300} fps={30} width={1920} height={1080} defaultProps={{videoSrc: 'https://remotion.media/video.mp4'}} calculateMetadata={calculateMetadata} />\n```\n\n## Setting duration based on a video\n\nUse the `getMediaMetadata()` function from the mediabunny/metadata skill to get the video duration:\n\n```tsx\nimport {CalculateMetadataFunction} from 'remotion';\nimport {getMediaMetadata} from '../get-media-metadata';\n\nconst calculateMetadata: CalculateMetadataFunction<Props> = async ({props}) => {\n  const {durationInSeconds} = await getMediaMetadata(props.videoSrc);\n\n  return {\n    durationInFrames: Math.ceil(durationInSeconds * 30),\n  };\n};\n```\n\n## Matching dimensions of a video\n\n```tsx\nconst calculateMetadata: CalculateMetadataFunction<Props> = async ({props}) => {\n  const {durationInSeconds, dimensions} = await getMediaMetadata(props.videoSrc);\n\n  return {\n    durationInFrames: Math.ceil(durationInSeconds * 30),\n    width: dimensions?.width ?? 1920,\n    height: dimensions?.height ?? 1080,\n  };\n};\n```\n\n## Setting duration based on multiple videos\n\n```tsx\nconst calculateMetadata: CalculateMetadataFunction<Props> = async ({props}) => {\n  const metadataPromises = props.videos.map((video) => getMediaMetadata(video.src));\n  const allMetadata = await Promise.all(metadataPromises);\n\n  const totalDuration = allMetadata.reduce((sum, meta) => sum + meta.durationInSeconds, 0);\n\n  return {\n    durationInFrames: Math.ceil(totalDuration * 30),\n  };\n};\n```\n\n## Setting a default outName\n\nSet the default output filename based on props:\n\n```tsx\nconst calculateMetadata: CalculateMetadataFunction<Props> = async ({props}) => {\n  return {\n    defaultOutName: `video-${props.id}.mp4`,\n  };\n};\n```\n\n## Transforming props\n\nFetch data or transform props before rendering:\n\n```tsx\nconst calculateMetadata: CalculateMetadataFunction<Props> = async ({props, abortSignal}) => {\n  const response = await fetch(props.dataUrl, {signal: abortSignal});\n  const data = await response.json();\n\n  return {\n    props: {\n      ...props,\n      fetchedData: data,\n    },\n  };\n};\n```\n\nThe `abortSignal` cancels stale requests when props change in the Studio.\n\n## Return value\n\nAll fields are optional. Returned values override the `<Composition>` props:\n\n- `durationInFrames`: Number of frames\n- `width`: Composition width in pixels\n- `height`: Composition height in pixels\n- `fps`: Frames per second\n- `props`: Transformed props passed to the component\n- `defaultOutName`: Default output filename\n- `defaultCodec`: Default codec for rendering\n",
        "skills/remotion/rules/can-decode.md": "---\nname: can-decode\ndescription: Check if a video can be decoded by the browser using Mediabunny\nmetadata:\n  tags: decode, validation, video, audio, compatibility, browser\n---\n\n# Checking if a video can be decoded\n\nUse Mediabunny to check if a video can be decoded by the browser before attempting to play it.\n\n## The `canDecode()` function\n\nThis function can be copy-pasted into any project.\n\n```tsx\nimport { Input, ALL_FORMATS, UrlSource } from \"mediabunny\";\n\nexport const canDecode = async (src: string) => {\n  const input = new Input({\n    formats: ALL_FORMATS,\n    source: new UrlSource(src, {\n      getRetryDelay: () => null,\n    }),\n  });\n\n  try {\n    await input.getFormat();\n  } catch {\n    return false;\n  }\n\n  const videoTrack = await input.getPrimaryVideoTrack();\n  if (videoTrack && !(await videoTrack.canDecode())) {\n    return false;\n  }\n\n  const audioTrack = await input.getPrimaryAudioTrack();\n  if (audioTrack && !(await audioTrack.canDecode())) {\n    return false;\n  }\n\n  return true;\n};\n```\n\n## Usage\n\n```tsx\nconst src = \"https://remotion.media/video.mp4\";\nconst isDecodable = await canDecode(src);\n\nif (isDecodable) {\n  console.log(\"Video can be decoded\");\n} else {\n  console.log(\"Video cannot be decoded by this browser\");\n}\n```\n\n## Using with Blob\n\nFor file uploads or drag-and-drop, use `BlobSource`:\n\n```tsx\nimport { Input, ALL_FORMATS, BlobSource } from \"mediabunny\";\n\nexport const canDecodeBlob = async (blob: Blob) => {\n  const input = new Input({\n    formats: ALL_FORMATS,\n    source: new BlobSource(blob),\n  });\n\n  // Same validation logic as above\n};\n```\n",
        "skills/remotion/rules/charts.md": "---\nname: charts\ndescription: Chart and data visualization patterns for Remotion. Use when creating bar charts, pie charts, histograms, progress bars, or any data-driven animations.\nmetadata:\n  tags: charts, data, visualization, bar-chart, pie-chart, graphs\n---\n\n# Charts in Remotion\n\nYou can create bar charts in Remotion by using regular React code - HTML and SVG is allowed, as well as D3.js.\n\n## No animations not powered by `useCurrentFrame()`\n\nDisable all animations by third party libraries.  \nThey will cause flickering during rendering.  \nInstead, drive all animations from `useCurrentFrame()`.\n\n## Bar Chart Animations\n\nSee [Bar Chart Example](assets/charts/bar-chart.tsx) for a basic example implmentation.\n\n### Staggered Bars\n\nYou can animate the height of the bars and stagger them like this:\n\n```tsx\nconst STAGGER_DELAY = 5;\nconst frame = useCurrentFrame();\nconst {fps} = useVideoConfig();\n\nconst bars = data.map((item, i) => {\n  const delay = i * STAGGER_DELAY;\n  const height = spring({\n    frame,\n    fps,\n    delay,\n    config: {damping: 200},\n  });\n  return <div style={{height: height * item.value}} />;\n});\n```\n\n## Pie Chart Animation\n\nAnimate segments using stroke-dashoffset, starting from 12 o'clock.\n\n```tsx\nconst frame = useCurrentFrame();\nconst {fps} = useVideoConfig();\n\nconst progress = interpolate(frame, [0, 100], [0, 1]);\n\nconst circumference = 2 * Math.PI * radius;\nconst segmentLength = (value / total) * circumference;\nconst offset = interpolate(progress, [0, 1], [segmentLength, 0]);\n\n<circle r={radius} cx={center} cy={center} fill=\"none\" stroke={color} strokeWidth={strokeWidth} strokeDasharray={`${segmentLength} ${circumference}`} strokeDashoffset={offset} transform={`rotate(-90 ${center} ${center})`} />;\n```\n",
        "skills/remotion/rules/compositions.md": "---\nname: compositions\ndescription: Defining compositions, stills, folders, default props and dynamic metadata\nmetadata:\n  tags: composition, still, folder, props, metadata\n---\n\nA `<Composition>` defines the component, width, height, fps and duration of a renderable video.\n\nIt normally is placed in the `src/Root.tsx` file.\n\n```tsx\nimport {Composition} from 'remotion';\nimport {MyComposition} from './MyComposition';\n\nexport const RemotionRoot = () => {\n  return <Composition id=\"MyComposition\" component={MyComposition} durationInFrames={100} fps={30} width={1080} height={1080} />;\n};\n```\n\n## Default Props\n\nPass `defaultProps` to provide initial values for your component.  \nValues must be JSON-serializable (`Date`, `Map`, `Set`, and `staticFile()` are supported).\n\n```tsx\nimport {Composition} from 'remotion';\nimport {MyComposition, MyCompositionProps} from './MyComposition';\n\nexport const RemotionRoot = () => {\n  return (\n    <Composition\n      id=\"MyComposition\"\n      component={MyComposition}\n      durationInFrames={100}\n      fps={30}\n      width={1080}\n      height={1080}\n      defaultProps={\n        {\n          title: 'Hello World',\n          color: '#ff0000',\n        } satisfies MyCompositionProps\n      }\n    />\n  );\n};\n```\n\nUse `type` declarations for props rather than `interface` to ensure `defaultProps` type safety.\n\n## Folders\n\nUse `<Folder>` to organize compositions in the sidebar.  \nFolder names can only contain letters, numbers, and hyphens.\n\n```tsx\nimport {Composition, Folder} from 'remotion';\n\nexport const RemotionRoot = () => {\n  return (\n    <>\n      <Folder name=\"Marketing\">\n        <Composition id=\"Promo\" /* ... */ />\n        <Composition id=\"Ad\" /* ... */ />\n      </Folder>\n      <Folder name=\"Social\">\n        <Folder name=\"Instagram\">\n          <Composition id=\"Story\" /* ... */ />\n          <Composition id=\"Reel\" /* ... */ />\n        </Folder>\n      </Folder>\n    </>\n  );\n};\n```\n\n## Stills\n\nUse `<Still>` for single-frame images. It does not require `durationInFrames` or `fps`.\n\n```tsx\nimport {Still} from 'remotion';\nimport {Thumbnail} from './Thumbnail';\n\nexport const RemotionRoot = () => {\n  return <Still id=\"Thumbnail\" component={Thumbnail} width={1280} height={720} />;\n};\n```\n\n## Calculate Metadata\n\nUse `calculateMetadata` to make dimensions, duration, or props dynamic based on data.\n\n```tsx\nimport {Composition, CalculateMetadataFunction} from 'remotion';\nimport {MyComposition, MyCompositionProps} from './MyComposition';\n\nconst calculateMetadata: CalculateMetadataFunction<MyCompositionProps> = async ({props, abortSignal}) => {\n  const data = await fetch(`https://api.example.com/video/${props.videoId}`, {\n    signal: abortSignal,\n  }).then((res) => res.json());\n\n  return {\n    durationInFrames: Math.ceil(data.duration * 30),\n    props: {\n      ...props,\n      videoUrl: data.url,\n    },\n  };\n};\n\nexport const RemotionRoot = () => {\n  return (\n    <Composition\n      id=\"MyComposition\"\n      component={MyComposition}\n      durationInFrames={100} // Placeholder, will be overridden\n      fps={30}\n      width={1080}\n      height={1080}\n      defaultProps={{videoId: 'abc123'}}\n      calculateMetadata={calculateMetadata}\n    />\n  );\n};\n```\n\nThe function can return `props`, `durationInFrames`, `width`, `height`, `fps`, and codec-related defaults. It runs once before rendering begins.\n\n## Nesting compositions within another\n\nTo add a composition within another composition, you can use the `<Sequence>` component with a `width` and `height` prop to specify the size of the composition.\n\n```tsx\n<AbsoluteFill>\n  <Sequence width={COMPOSITION_WIDTH} height={COMPOSITION_HEIGHT}>\n    <CompositionComponent />\n  </Sequence>\n</AbsoluteFill>\n```\n",
        "skills/remotion/rules/display-captions.md": "---\nname: display-captions\ndescription: Displaying captions in Remotion with TikTok-style pages and word highlighting\nmetadata:\n  tags: captions, subtitles, display, tiktok, highlight\n---\n\n# Displaying captions in Remotion\n\nThis guide explains how to display captions in Remotion, assuming you already have captions in the `Caption` format.\n\n## Prerequisites\n\nFirst, the @remotion/captions package needs to be installed.\nIf it is not installed, use the following command:\n\n```bash\nnpx remotion add @remotion/captions # If project uses npm\nbunx remotion add @remotion/captions # If project uses bun\nyarn remotion add @remotion/captions # If project uses yarn\npnpm exec remotion add @remotion/captions # If project uses pnpm\n```\n\n## Creating pages\n\nUse `createTikTokStyleCaptions()` to group captions into pages. The `combineTokensWithinMilliseconds` option controls how many words appear at once:\n\n```tsx\nimport {useMemo} from 'react';\nimport {createTikTokStyleCaptions} from '@remotion/captions';\nimport type {Caption} from '@remotion/captions';\n\n// How often captions should switch (in milliseconds)\n// Higher values = more words per page\n// Lower values = fewer words (more word-by-word)\nconst SWITCH_CAPTIONS_EVERY_MS = 1200;\n\nconst {pages} = useMemo(() => {\n  return createTikTokStyleCaptions({\n    captions,\n    combineTokensWithinMilliseconds: SWITCH_CAPTIONS_EVERY_MS,\n  });\n}, [captions]);\n```\n\n## Rendering with Sequences\n\nMap over the pages and render each one in a `<Sequence>`. Calculate the start frame and duration from the page timing:\n\n```tsx\nimport {Sequence, useVideoConfig, AbsoluteFill} from 'remotion';\nimport type {TikTokPage} from '@remotion/captions';\n\nconst CaptionedContent: React.FC = () => {\n  const {fps} = useVideoConfig();\n\n  return (\n    <AbsoluteFill>\n      {pages.map((page, index) => {\n        const nextPage = pages[index + 1] ?? null;\n        const startFrame = (page.startMs / 1000) * fps;\n        const endFrame = Math.min(\n          nextPage ? (nextPage.startMs / 1000) * fps : Infinity,\n          startFrame + (SWITCH_CAPTIONS_EVERY_MS / 1000) * fps,\n        );\n        const durationInFrames = endFrame - startFrame;\n\n        if (durationInFrames <= 0) {\n          return null;\n        }\n\n        return (\n          <Sequence\n            key={index}\n            from={startFrame}\n            durationInFrames={durationInFrames}\n          >\n            <CaptionPage page={page} />\n          </Sequence>\n        );\n      })}\n    </AbsoluteFill>\n  );\n};\n```\n\n## Word highlighting\n\nA caption page contains `tokens` which you can use to highlight the currently spoken word:\n\n```tsx\nimport {AbsoluteFill, useCurrentFrame, useVideoConfig} from 'remotion';\nimport type {TikTokPage} from '@remotion/captions';\n\nconst HIGHLIGHT_COLOR = '#39E508';\n\nconst CaptionPage: React.FC<{page: TikTokPage}> = ({page}) => {\n  const frame = useCurrentFrame();\n  const {fps} = useVideoConfig();\n\n  // Current time relative to the start of the sequence\n  const currentTimeMs = (frame / fps) * 1000;\n  // Convert to absolute time by adding the page start\n  const absoluteTimeMs = page.startMs + currentTimeMs;\n\n  return (\n    <AbsoluteFill style={{justifyContent: 'center', alignItems: 'center'}}>\n      <div style={{fontSize: 80, fontWeight: 'bold', whiteSpace: 'pre'}}>\n        {page.tokens.map((token) => {\n          const isActive =\n            token.fromMs <= absoluteTimeMs && token.toMs > absoluteTimeMs;\n\n          return (\n            <span\n              key={token.fromMs}\n              style={{color: isActive ? HIGHLIGHT_COLOR : 'white'}}\n            >\n              {token.text}\n            </span>\n          );\n        })}\n      </div>\n    </AbsoluteFill>\n  );\n};\n```\n",
        "skills/remotion/rules/extract-frames.md": "---\nname: extract-frames\ndescription: Extract frames from videos at specific timestamps using Mediabunny\nmetadata:\n  tags: frames, extract, video, thumbnail, filmstrip, canvas\n---\n\n# Extracting frames from videos\n\nUse Mediabunny to extract frames from videos at specific timestamps. This is useful for generating thumbnails, filmstrips, or processing individual frames.\n\n## The `extractFrames()` function\n\nThis function can be copy-pasted into any project.\n\n```tsx\nimport {\n  ALL_FORMATS,\n  Input,\n  UrlSource,\n  VideoSample,\n  VideoSampleSink,\n} from \"mediabunny\";\n\ntype Options = {\n  track: { width: number; height: number };\n  container: string;\n  durationInSeconds: number | null;\n};\n\nexport type ExtractFramesTimestampsInSecondsFn = (\n  options: Options\n) => Promise<number[]> | number[];\n\nexport type ExtractFramesProps = {\n  src: string;\n  timestampsInSeconds: number[] | ExtractFramesTimestampsInSecondsFn;\n  onVideoSample: (sample: VideoSample) => void;\n  signal?: AbortSignal;\n};\n\nexport async function extractFrames({\n  src,\n  timestampsInSeconds,\n  onVideoSample,\n  signal,\n}: ExtractFramesProps): Promise<void> {\n  using input = new Input({\n    formats: ALL_FORMATS,\n    source: new UrlSource(src),\n  });\n\n  const [durationInSeconds, format, videoTrack] = await Promise.all([\n    input.computeDuration(),\n    input.getFormat(),\n    input.getPrimaryVideoTrack(),\n  ]);\n\n  if (!videoTrack) {\n    throw new Error(\"No video track found in the input\");\n  }\n\n  if (signal?.aborted) {\n    throw new Error(\"Aborted\");\n  }\n\n  const timestamps =\n    typeof timestampsInSeconds === \"function\"\n      ? await timestampsInSeconds({\n          track: {\n            width: videoTrack.displayWidth,\n            height: videoTrack.displayHeight,\n          },\n          container: format.name,\n          durationInSeconds,\n        })\n      : timestampsInSeconds;\n\n  if (timestamps.length === 0) {\n    return;\n  }\n\n  if (signal?.aborted) {\n    throw new Error(\"Aborted\");\n  }\n\n  const sink = new VideoSampleSink(videoTrack);\n\n  for await (using videoSample of sink.samplesAtTimestamps(timestamps)) {\n    if (signal?.aborted) {\n      break;\n    }\n\n    if (!videoSample) {\n      continue;\n    }\n\n    onVideoSample(videoSample);\n  }\n}\n```\n\n## Basic usage\n\nExtract frames at specific timestamps:\n\n```tsx\nawait extractFrames({\n  src: \"https://remotion.media/video.mp4\",\n  timestampsInSeconds: [0, 1, 2, 3, 4],\n  onVideoSample: (sample) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = sample.displayWidth;\n    canvas.height = sample.displayHeight;\n    const ctx = canvas.getContext(\"2d\");\n    sample.draw(ctx!, 0, 0);\n  },\n});\n```\n\n## Creating a filmstrip\n\nUse a callback function to dynamically calculate timestamps based on video metadata:\n\n```tsx\nconst canvasWidth = 500;\nconst canvasHeight = 80;\nconst fromSeconds = 0;\nconst toSeconds = 10;\n\nawait extractFrames({\n  src: \"https://remotion.media/video.mp4\",\n  timestampsInSeconds: async ({ track, durationInSeconds }) => {\n    const aspectRatio = track.width / track.height;\n    const amountOfFramesFit = Math.ceil(\n      canvasWidth / (canvasHeight * aspectRatio)\n    );\n    const segmentDuration = toSeconds - fromSeconds;\n    const timestamps: number[] = [];\n\n    for (let i = 0; i < amountOfFramesFit; i++) {\n      timestamps.push(\n        fromSeconds + (segmentDuration / amountOfFramesFit) * (i + 0.5)\n      );\n    }\n\n    return timestamps;\n  },\n  onVideoSample: (sample) => {\n    console.log(`Frame at ${sample.timestamp}s`);\n\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = sample.displayWidth;\n    canvas.height = sample.displayHeight;\n    const ctx = canvas.getContext(\"2d\");\n    sample.draw(ctx!, 0, 0);\n  },\n});\n```\n\n## Cancellation with AbortSignal\n\nCancel frame extraction after a timeout:\n\n```tsx\nconst controller = new AbortController();\n\nsetTimeout(() => controller.abort(), 5000);\n\ntry {\n  await extractFrames({\n    src: \"https://remotion.media/video.mp4\",\n    timestampsInSeconds: [0, 1, 2, 3, 4],\n    onVideoSample: (sample) => {\n      using frame = sample;\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = frame.displayWidth;\n      canvas.height = frame.displayHeight;\n      const ctx = canvas.getContext(\"2d\");\n      frame.draw(ctx!, 0, 0);\n    },\n    signal: controller.signal,\n  });\n\n  console.log(\"Frame extraction complete!\");\n} catch (error) {\n  console.error(\"Frame extraction was aborted or failed:\", error);\n}\n```\n\n## Timeout with Promise.race\n\n```tsx\nconst controller = new AbortController();\n\nconst timeoutPromise = new Promise<never>((_, reject) => {\n  const timeoutId = setTimeout(() => {\n    controller.abort();\n    reject(new Error(\"Frame extraction timed out after 10 seconds\"));\n  }, 10000);\n\n  controller.signal.addEventListener(\"abort\", () => clearTimeout(timeoutId), {\n    once: true,\n  });\n});\n\ntry {\n  await Promise.race([\n    extractFrames({\n      src: \"https://remotion.media/video.mp4\",\n      timestampsInSeconds: [0, 1, 2, 3, 4],\n      onVideoSample: (sample) => {\n        using frame = sample;\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = frame.displayWidth;\n        canvas.height = frame.displayHeight;\n        const ctx = canvas.getContext(\"2d\");\n        frame.draw(ctx!, 0, 0);\n      },\n      signal: controller.signal,\n    }),\n    timeoutPromise,\n  ]);\n\n  console.log(\"Frame extraction complete!\");\n} catch (error) {\n  console.error(\"Frame extraction was aborted or failed:\", error);\n}\n```\n",
        "skills/remotion/rules/fonts.md": "---\nname: fonts\ndescription: Loading Google Fonts and local fonts in Remotion\nmetadata:\n  tags: fonts, google-fonts, typography, text\n---\n\n# Using fonts in Remotion\n\n## Google Fonts with @remotion/google-fonts\n\nThe recommended way to use Google Fonts. It's type-safe and automatically blocks rendering until the font is ready.\n\n### Prerequisites\n\nFirst, the @remotion/google-fonts package needs to be installed.\nIf it is not installed, use the following command:\n\n```bash\nnpx remotion add @remotion/google-fonts # If project uses npm\nbunx remotion add @remotion/google-fonts # If project uses bun\nyarn remotion add @remotion/google-fonts # If project uses yarn\npnpm exec remotion add @remotion/google-fonts # If project uses pnpm\n```\n\n```tsx\nimport { loadFont } from \"@remotion/google-fonts/Lobster\";\n\nconst { fontFamily } = loadFont();\n\nexport const MyComposition = () => {\n  return <div style={{ fontFamily }}>Hello World</div>;\n};\n```\n\nPreferrably, specify only needed weights and subsets to reduce file size:\n\n```tsx\nimport { loadFont } from \"@remotion/google-fonts/Roboto\";\n\nconst { fontFamily } = loadFont(\"normal\", {\n  weights: [\"400\", \"700\"],\n  subsets: [\"latin\"],\n});\n```\n\n### Waiting for font to load\n\nUse `waitUntilDone()` if you need to know when the font is ready:\n\n```tsx\nimport { loadFont } from \"@remotion/google-fonts/Lobster\";\n\nconst { fontFamily, waitUntilDone } = loadFont();\n\nawait waitUntilDone();\n```\n\n## Local fonts with @remotion/fonts\n\nFor local font files, use the `@remotion/fonts` package.\n\n### Prerequisites\n\nFirst, install @remotion/fonts:\n\n```bash\nnpx remotion add @remotion/fonts # If project uses npm\nbunx remotion add @remotion/fonts # If project uses bun\nyarn remotion add @remotion/fonts # If project uses yarn\npnpm exec remotion add @remotion/fonts # If project uses pnpm\n```\n\n### Loading a local font\n\nPlace your font file in the `public/` folder and use `loadFont()`:\n\n```tsx\nimport { loadFont } from \"@remotion/fonts\";\nimport { staticFile } from \"remotion\";\n\nawait loadFont({\n  family: \"MyFont\",\n  url: staticFile(\"MyFont-Regular.woff2\"),\n});\n\nexport const MyComposition = () => {\n  return <div style={{ fontFamily: \"MyFont\" }}>Hello World</div>;\n};\n```\n\n### Loading multiple weights\n\nLoad each weight separately with the same family name:\n\n```tsx\nimport { loadFont } from \"@remotion/fonts\";\nimport { staticFile } from \"remotion\";\n\nawait Promise.all([\n  loadFont({\n    family: \"Inter\",\n    url: staticFile(\"Inter-Regular.woff2\"),\n    weight: \"400\",\n  }),\n  loadFont({\n    family: \"Inter\",\n    url: staticFile(\"Inter-Bold.woff2\"),\n    weight: \"700\",\n  }),\n]);\n```\n\n### Available options\n\n```tsx\nloadFont({\n  family: \"MyFont\", // Required: name to use in CSS\n  url: staticFile(\"font.woff2\"), // Required: font file URL\n  format: \"woff2\", // Optional: auto-detected from extension\n  weight: \"400\", // Optional: font weight\n  style: \"normal\", // Optional: normal or italic\n  display: \"block\", // Optional: font-display behavior\n});\n```\n\n## Using in components\n\nCall `loadFont()` at the top level of your component or in a separate file that's imported early:\n\n```tsx\nimport { loadFont } from \"@remotion/google-fonts/Montserrat\";\n\nconst { fontFamily } = loadFont(\"normal\", {\n  weights: [\"400\", \"700\"],\n  subsets: [\"latin\"],\n});\n\nexport const Title: React.FC<{ text: string }> = ({ text }) => {\n  return (\n    <h1\n      style={{\n        fontFamily,\n        fontSize: 80,\n        fontWeight: \"bold\",\n      }}\n    >\n      {text}\n    </h1>\n  );\n};\n```\n",
        "skills/remotion/rules/get-audio-duration.md": "---\nname: get-audio-duration\ndescription: Getting the duration of an audio file in seconds with Mediabunny\nmetadata:\n  tags: duration, audio, length, time, seconds, mp3, wav\n---\n\n# Getting audio duration with Mediabunny\n\nMediabunny can extract the duration of an audio file. It works in browser, Node.js, and Bun environments.\n\n## Getting audio duration\n\n```tsx\nimport { Input, ALL_FORMATS, UrlSource } from \"mediabunny\";\n\nexport const getAudioDuration = async (src: string) => {\n  const input = new Input({\n    formats: ALL_FORMATS,\n    source: new UrlSource(src, {\n      getRetryDelay: () => null,\n    }),\n  });\n\n  const durationInSeconds = await input.computeDuration();\n  return durationInSeconds;\n};\n```\n\n## Usage\n\n```tsx\nconst duration = await getAudioDuration(\"https://remotion.media/audio.mp3\");\nconsole.log(duration); // e.g. 180.5 (seconds)\n```\n\n## Using with local files\n\nFor local files, use `FileSource` instead of `UrlSource`:\n\n```tsx\nimport { Input, ALL_FORMATS, FileSource } from \"mediabunny\";\n\nconst input = new Input({\n  formats: ALL_FORMATS,\n  source: new FileSource(file), // File object from input or drag-drop\n});\n\nconst durationInSeconds = await input.computeDuration();\n```\n\n## Using with staticFile in Remotion\n\n```tsx\nimport { staticFile } from \"remotion\";\n\nconst duration = await getAudioDuration(staticFile(\"audio.mp3\"));\n```\n",
        "skills/remotion/rules/get-video-dimensions.md": "---\nname: get-video-dimensions\ndescription: Getting the width and height of a video file with Mediabunny\nmetadata:\n  tags: dimensions, width, height, resolution, size, video\n---\n\n# Getting video dimensions with Mediabunny\n\nMediabunny can extract the width and height of a video file. It works in browser, Node.js, and Bun environments.\n\n## Getting video dimensions\n\n```tsx\nimport { Input, ALL_FORMATS, UrlSource } from \"mediabunny\";\n\nexport const getVideoDimensions = async (src: string) => {\n  const input = new Input({\n    formats: ALL_FORMATS,\n    source: new UrlSource(src, {\n      getRetryDelay: () => null,\n    }),\n  });\n\n  const videoTrack = await input.getPrimaryVideoTrack();\n  if (!videoTrack) {\n    throw new Error(\"No video track found\");\n  }\n\n  return {\n    width: videoTrack.displayWidth,\n    height: videoTrack.displayHeight,\n  };\n};\n```\n\n## Usage\n\n```tsx\nconst dimensions = await getVideoDimensions(\"https://remotion.media/video.mp4\");\nconsole.log(dimensions.width);  // e.g. 1920\nconsole.log(dimensions.height); // e.g. 1080\n```\n\n## Using with local files\n\nFor local files, use `FileSource` instead of `UrlSource`:\n\n```tsx\nimport { Input, ALL_FORMATS, FileSource } from \"mediabunny\";\n\nconst input = new Input({\n  formats: ALL_FORMATS,\n  source: new FileSource(file), // File object from input or drag-drop\n});\n\nconst videoTrack = await input.getPrimaryVideoTrack();\nconst width = videoTrack.displayWidth;\nconst height = videoTrack.displayHeight;\n```\n\n## Using with staticFile in Remotion\n\n```tsx\nimport { staticFile } from \"remotion\";\n\nconst dimensions = await getVideoDimensions(staticFile(\"video.mp4\"));\n```\n",
        "skills/remotion/rules/get-video-duration.md": "---\nname: get-video-duration\ndescription: Getting the duration of a video file in seconds with Mediabunny\nmetadata:\n  tags: duration, video, length, time, seconds\n---\n\n# Getting video duration with Mediabunny\n\nMediabunny can extract the duration of a video file. It works in browser, Node.js, and Bun environments.\n\n## Getting video duration\n\n```tsx\nimport { Input, ALL_FORMATS, UrlSource } from \"mediabunny\";\n\nexport const getVideoDuration = async (src: string) => {\n  const input = new Input({\n    formats: ALL_FORMATS,\n    source: new UrlSource(src, {\n      getRetryDelay: () => null,\n    }),\n  });\n\n  const durationInSeconds = await input.computeDuration();\n  return durationInSeconds;\n};\n```\n\n## Usage\n\n```tsx\nconst duration = await getVideoDuration(\"https://remotion.media/video.mp4\");\nconsole.log(duration); // e.g. 10.5 (seconds)\n```\n\n## Using with local files\n\nFor local files, use `FileSource` instead of `UrlSource`:\n\n```tsx\nimport { Input, ALL_FORMATS, FileSource } from \"mediabunny\";\n\nconst input = new Input({\n  formats: ALL_FORMATS,\n  source: new FileSource(file), // File object from input or drag-drop\n});\n\nconst durationInSeconds = await input.computeDuration();\n```\n\n## Using with staticFile in Remotion\n\n```tsx\nimport { staticFile } from \"remotion\";\n\nconst duration = await getVideoDuration(staticFile(\"video.mp4\"));\n```\n",
        "skills/remotion/rules/gifs.md": "---\nname: gif\ndescription: Displaying GIFs, APNG, AVIF and WebP in Remotion\nmetadata:\n  tags: gif, animation, images, animated, apng, avif, webp\n---\n\n# Using Animated images in Remotion\n\n## Basic usage\n\nUse `<AnimatedImage>` to display a GIF, APNG, AVIF or WebP image synchronized with Remotion's timeline:\n\n```tsx\nimport {AnimatedImage, staticFile} from 'remotion';\n\nexport const MyComposition = () => {\n  return <AnimatedImage src={staticFile('animation.gif')} width={500} height={500} />;\n};\n```\n\nRemote URLs are also supported (must have CORS enabled):\n\n```tsx\n<AnimatedImage src=\"https://example.com/animation.gif\" width={500} height={500} />\n```\n\n## Sizing and fit\n\nControl how the image fills its container with the `fit` prop:\n\n```tsx\n// Stretch to fill (default)\n<AnimatedImage src={staticFile(\"animation.gif\")} width={500} height={300} fit=\"fill\" />\n\n// Maintain aspect ratio, fit inside container\n<AnimatedImage src={staticFile(\"animation.gif\")} width={500} height={300} fit=\"contain\" />\n\n// Fill container, crop if needed\n<AnimatedImage src={staticFile(\"animation.gif\")} width={500} height={300} fit=\"cover\" />\n```\n\n## Playback speed\n\nUse `playbackRate` to control the animation speed:\n\n```tsx\n<AnimatedImage src={staticFile(\"animation.gif\")} width={500} height={500} playbackRate={2} /> {/* 2x speed */}\n<AnimatedImage src={staticFile(\"animation.gif\")} width={500} height={500} playbackRate={0.5} /> {/* Half speed */}\n```\n\n## Looping behavior\n\nControl what happens when the animation finishes:\n\n```tsx\n// Loop indefinitely (default)\n<AnimatedImage src={staticFile(\"animation.gif\")} width={500} height={500} loopBehavior=\"loop\" />\n\n// Play once, show final frame\n<AnimatedImage src={staticFile(\"animation.gif\")} width={500} height={500} loopBehavior=\"pause-after-finish\" />\n\n// Play once, then clear canvas\n<AnimatedImage src={staticFile(\"animation.gif\")} width={500} height={500} loopBehavior=\"clear-after-finish\" />\n```\n\n## Styling\n\nUse the `style` prop for additional CSS (use `width` and `height` props for sizing):\n\n```tsx\n<AnimatedImage\n  src={staticFile('animation.gif')}\n  width={500}\n  height={500}\n  style={{\n    borderRadius: 20,\n    position: 'absolute',\n    top: 100,\n    left: 50,\n  }}\n/>\n```\n\n## Getting GIF duration\n\nUse `getGifDurationInSeconds()` from `@remotion/gif` to get the duration of a GIF.\n\n```bash\nnpx remotion add @remotion/gif # If project uses npm\nbunx remotion add @remotion/gif # If project uses bun\nyarn remotion add @remotion/gif # If project uses yarn\npnpm exec remotion add @remotion/gif # If project uses pnpm\n```\n\n```tsx\nimport {getGifDurationInSeconds} from '@remotion/gif';\nimport {staticFile} from 'remotion';\n\nconst duration = await getGifDurationInSeconds(staticFile('animation.gif'));\nconsole.log(duration); // e.g. 2.5\n```\n\nThis is useful for setting the composition duration to match the GIF:\n\n```tsx\nimport {getGifDurationInSeconds} from '@remotion/gif';\nimport {staticFile, CalculateMetadataFunction} from 'remotion';\n\nconst calculateMetadata: CalculateMetadataFunction = async () => {\n  const duration = await getGifDurationInSeconds(staticFile('animation.gif'));\n  return {\n    durationInFrames: Math.ceil(duration * 30),\n  };\n};\n```\n\n## Alternative\n\nIf `<AnimatedImage>` does not work (only supported in Chrome and Firefox), you can use `<Gif>` from `@remotion/gif` instead.\n\n```bash\nnpx remotion add @remotion/gif # If project uses npm\nbunx remotion add @remotion/gif # If project uses bun\nyarn remotion add @remotion/gif # If project uses yarn\npnpm exec remotion add @remotion/gif # If project uses pnpm\n```\n\n```tsx\nimport {Gif} from '@remotion/gif';\nimport {staticFile} from 'remotion';\n\nexport const MyComposition = () => {\n  return <Gif src={staticFile('animation.gif')} width={500} height={500} />;\n};\n```\n\nThe `<Gif>` component has the same props as `<AnimatedImage>` but only supports GIF files.\n",
        "skills/remotion/rules/images.md": "---\nname: images\ndescription: Embedding images in Remotion using the <Img> component\nmetadata:\n  tags: images, img, staticFile, png, jpg, svg, webp\n---\n\n# Using images in Remotion\n\n## The `<Img>` component\n\nAlways use the `<Img>` component from `remotion` to display images:\n\n```tsx\nimport { Img, staticFile } from \"remotion\";\n\nexport const MyComposition = () => {\n  return <Img src={staticFile(\"photo.png\")} />;\n};\n```\n\n## Important restrictions\n\n**You MUST use the `<Img>` component from `remotion`.** Do not use:\n\n- Native HTML `<img>` elements\n- Next.js `<Image>` component\n- CSS `background-image`\n\nThe `<Img>` component ensures images are fully loaded before rendering, preventing flickering and blank frames during video export.\n\n## Local images with staticFile()\n\nPlace images in the `public/` folder and use `staticFile()` to reference them:\n\n```\nmy-video/\nâ”œâ”€ public/\nâ”‚  â”œâ”€ logo.png\nâ”‚  â”œâ”€ avatar.jpg\nâ”‚  â””â”€ icon.svg\nâ”œâ”€ src/\nâ”œâ”€ package.json\n```\n\n```tsx\nimport { Img, staticFile } from \"remotion\";\n\n<Img src={staticFile(\"logo.png\")} />\n```\n\n## Remote images\n\nRemote URLs can be used directly without `staticFile()`:\n\n```tsx\n<Img src=\"https://example.com/image.png\" />\n```\n\nEnsure remote images have CORS enabled.\n\nFor animated GIFs, use the `<Gif>` component from `@remotion/gif` instead.\n\n## Sizing and positioning\n\nUse the `style` prop to control size and position:\n\n```tsx\n<Img\n  src={staticFile(\"photo.png\")}\n  style={{\n    width: 500,\n    height: 300,\n    position: \"absolute\",\n    top: 100,\n    left: 50,\n    objectFit: \"cover\",\n  }}\n/>\n```\n\n## Dynamic image paths\n\nUse template literals for dynamic file references:\n\n```tsx\nimport { Img, staticFile, useCurrentFrame } from \"remotion\";\n\nconst frame = useCurrentFrame();\n\n// Image sequence\n<Img src={staticFile(`frames/frame${frame}.png`)} />\n\n// Selecting based on props\n<Img src={staticFile(`avatars/${props.userId}.png`)} />\n\n// Conditional images\n<Img src={staticFile(`icons/${isActive ? \"active\" : \"inactive\"}.svg`)} />\n```\n\nThis pattern is useful for:\n\n- Image sequences (frame-by-frame animations)\n- User-specific avatars or profile images\n- Theme-based icons\n- State-dependent graphics\n\n## Getting image dimensions\n\nUse `getImageDimensions()` to get the dimensions of an image:\n\n```tsx\nimport { getImageDimensions, staticFile } from \"remotion\";\n\nconst { width, height } = await getImageDimensions(staticFile(\"photo.png\"));\n```\n\nThis is useful for calculating aspect ratios or sizing compositions:\n\n```tsx\nimport { getImageDimensions, staticFile, CalculateMetadataFunction } from \"remotion\";\n\nconst calculateMetadata: CalculateMetadataFunction = async () => {\n  const { width, height } = await getImageDimensions(staticFile(\"photo.png\"));\n  return {\n    width,\n    height,\n  };\n};\n```\n",
        "skills/remotion/rules/import-srt-captions.md": "---\nname: import-srt-captions\ndescription: Importing .srt subtitle files into Remotion using @remotion/captions\nmetadata:\n  tags: captions, subtitles, srt, import, parse\n---\n\n# Importing .srt subtitles into Remotion\n\nIf you have an existing `.srt` subtitle file, you can import it into Remotion using `parseSrt()` from `@remotion/captions`.\n\n## Prerequisites\n\nFirst, the @remotion/captions package needs to be installed.\nIf it is not installed, use the following command:\n\n```bash\nnpx remotion add @remotion/captions # If project uses npm\nbunx remotion add @remotion/captions # If project uses bun\nyarn remotion add @remotion/captions # If project uses yarn\npnpm exec remotion add @remotion/captions # If project uses pnpm\n```\n\n## Reading an .srt file\n\nUse `staticFile()` to reference an `.srt` file in your `public` folder, then fetch and parse it:\n\n```tsx\nimport {useState, useEffect, useCallback} from 'react';\nimport {AbsoluteFill, staticFile, useDelayRender} from 'remotion';\nimport {parseSrt} from '@remotion/captions';\nimport type {Caption} from '@remotion/captions';\n\nexport const MyComponent: React.FC = () => {\n  const [captions, setCaptions] = useState<Caption[] | null>(null);\n  const {delayRender, continueRender, cancelRender} = useDelayRender();\n  const [handle] = useState(() => delayRender());\n\n  const fetchCaptions = useCallback(async () => {\n    try {\n      const response = await fetch(staticFile('subtitles.srt'));\n      const text = await response.text();\n      const {captions: parsed} = parseSrt({input: text});\n      setCaptions(parsed);\n      continueRender(handle);\n    } catch (e) {\n      cancelRender(e);\n    }\n  }, [continueRender, cancelRender, handle]);\n\n  useEffect(() => {\n    fetchCaptions();\n  }, [fetchCaptions]);\n\n  if (!captions) {\n    return null;\n  }\n\n  return <AbsoluteFill>{/* Use captions here */}</AbsoluteFill>;\n};\n```\n\nRemote URLs are also supported - you can `fetch()` a remote file via URL instead of using `staticFile()`.\n\n## Using imported captions\n\nOnce parsed, the captions are in the `Caption` format and can be used with all `@remotion/captions` utilities.\n",
        "skills/remotion/rules/lottie.md": "---\nname: lottie\ndescription: Embedding Lottie animations in Remotion.\nmetadata:\n  category: Animation\n---\n\n# Using Lottie Animations in Remotion\n\n## Prerequisites\n\nFirst, the @remotion/lottie package needs to be installed.  \nIf it is not, use the following command:\n\n```bash\nnpx remotion add @remotion/lottie # If project uses npm\nbunx remotion add @remotion/lottie # If project uses bun\nyarn remotion add @remotion/lottie # If project uses yarn\npnpm exec remotion add @remotion/lottie # If project uses pnpm\n```\n\n## Displaying a Lottie file\n\nTo import a Lottie animation:\n\n- Fetch the Lottie asset\n- Wrap the loading process in `delayRender()` and `continueRender()`\n- Save the animation data in a state\n- Render the Lottie animation using the `Lottie` component from the `@remotion/lottie` package\n\n```tsx\nimport {Lottie, LottieAnimationData} from '@remotion/lottie';\nimport {useEffect, useState} from 'react';\nimport {cancelRender, continueRender, delayRender} from 'remotion';\n\nexport const MyAnimation = () => {\n  const [handle] = useState(() => delayRender('Loading Lottie animation'));\n\n  const [animationData, setAnimationData] = useState<LottieAnimationData | null>(null);\n\n  useEffect(() => {\n    fetch('https://assets4.lottiefiles.com/packages/lf20_zyquagfl.json')\n      .then((data) => data.json())\n      .then((json) => {\n        setAnimationData(json);\n        continueRender(handle);\n      })\n      .catch((err) => {\n        cancelRender(err);\n      });\n  }, [handle]);\n\n  if (!animationData) {\n    return null;\n  }\n\n  return <Lottie animationData={animationData} />;\n};\n```\n\n## Styling and animating\n\nLottie supports the `style` prop to allow styles and animations:\n\n```tsx\nreturn <Lottie animationData={animationData} style={{width: 400, height: 400}} />;\n```\n\n",
        "skills/remotion/rules/maps.md": "---\nname: maps\ndescription: Make map animations with Mapbox\nmetadata:\n  tags: map, map animation, mapbox\n---\n\nMaps can be added to a Remotion video with Mapbox.  \nThe [Mapbox documentation](https://docs.mapbox.com/mapbox-gl-js/api/) has the API reference.\n\n## Prerequisites\n\nMapbox and `@turf/turf` need to be installed.\n\nSearch the project for lockfiles and run the correct command depending on the package manager:\n\nIf `package-lock.json` is found, use the following command:\n\n```bash\nnpm i mapbox-gl @turf/turf @types/mapbox-gl\n```\n\nIf `bun.lock` is found, use the following command:\n\n```bash\nbun i mapbox-gl @turf/turf @types/mapbox-gl\n```\n\nIf `yarn.lock` is found, use the following command:\n\n```bash\nyarn add mapbox-gl @turf/turf @types/mapbox-gl\n```\n\nIf `pnpm-lock.yaml` is found, use the following command:\n\n```bash\npnpm i mapbox-gl @turf/turf @types/mapbox-gl\n```\n\nThe user needs to create a free Mapbox account and create an access token by visiting https://console.mapbox.com/account/access-tokens/.\n\nThe mapbox token needs to be added to the `.env` file:\n\n```txt title=\".env\"\nREMOTION_MAPBOX_TOKEN==pk.your-mapbox-access-token\n```\n\n## Adding a map\n\nHere is a basic example of a map in Remotion.\n\n```tsx\nimport {useEffect, useMemo, useRef, useState} from 'react';\nimport {AbsoluteFill, useDelayRender, useVideoConfig} from 'remotion';\nimport mapboxgl, {Map} from 'mapbox-gl';\n\nexport const lineCoordinates = [\n  [6.56158447265625, 46.059891147620725],\n  [6.5691375732421875, 46.05679376154153],\n  [6.5842437744140625, 46.05059898938315],\n  [6.594886779785156, 46.04702502069337],\n  [6.601066589355469, 46.0460718554722],\n  [6.6089630126953125, 46.0365370783104],\n  [6.6185760498046875, 46.018420689207964],\n];\n\nmapboxgl.accessToken = process.env.REMOTION_MAPBOX_TOKEN as string;\n\nexport const MyComposition = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const {delayRender, continueRender} = useDelayRender();\n\n  const {width, height} = useVideoConfig();\n  const [handle] = useState(() => delayRender('Loading map...'));\n  const [map, setMap] = useState<Map | null>(null);\n\n  useEffect(() => {\n    const _map = new Map({\n      container: ref.current!,\n      zoom: 11.53,\n      center: [6.5615, 46.0598],\n      pitch: 65,\n      bearing: 0,\n      style: 'â mapbox://styles/mapbox/standard',\n      interactive: false,\n      fadeDuration: 0,\n    });\n\n    _map.on('style.load', () => {\n      // Hide all features from the Mapbox Standard style\n      const hideFeatures = [\n        'showRoadsAndTransit',\n        'showRoads',\n        'showTransit',\n        'showPedestrianRoads',\n        'showRoadLabels',\n        'showTransitLabels',\n        'showPlaceLabels',\n        'showPointOfInterestLabels',\n        'showPointsOfInterest',\n        'showAdminBoundaries',\n        'showLandmarkIcons',\n        'showLandmarkIconLabels',\n        'show3dObjects',\n        'show3dBuildings',\n        'show3dTrees',\n        'show3dLandmarks',\n        'show3dFacades',\n      ];\n      for (const feature of hideFeatures) {\n        _map.setConfigProperty('basemap', feature, false);\n      }\n\n      _map.setConfigProperty('basemap', 'colorMotorways', 'rgba(0, 0, 0, 0)');\n      _map.setConfigProperty('basemap', 'colorRoads', 'rgba(0, 0, 0, 0)');\n      _map.setConfigProperty('basemap', 'colorTrunks', 'rgba(0, 0, 0, 0)');\n\n      _map.addSource('trace', {\n        type: 'geojson',\n        data: {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'LineString',\n            coordinates: lineCoordinates,\n          },\n        },\n      });\n      _map.addLayer({\n        type: 'line',\n        source: 'trace',\n        id: 'line',\n        paint: {\n          'line-color': 'black',\n          'line-width': 5,\n        },\n        layout: {\n          'line-cap': 'round',\n          'line-join': 'round',\n        },\n      });\n    });\n\n    _map.on('load', () => {\n      continueRender(handle);\n      setMap(_map);\n    });\n  }, [handle, lineCoordinates]);\n\n  const style: React.CSSProperties = useMemo(() => ({width, height, position: 'absolute'}), [width, height]);\n\n  return <AbsoluteFill ref={ref} style={style} />;\n};\n```\n\nThe following is important in Remotion:\n\n- Animations must be driven by `useCurrentFrame()` and animations that Mapbox brings itself should be disabled. For example, the `fadeDuration` prop should be set to `0`, `interactive` should be set to `false`, etc.\n- Loading the map should be delayed using `useDelayRender()` and the map should be set to `null` until it is loaded.\n- The element containing the ref MUST have an explicit width and height and `position: \"absolute\"`.\n- Do not add a `_map.remove();` cleanup function.\n\n## Drawing lines\n\nUnless I request it, do not add a glow effect to the lines.\nUnless I request it, do not add additional points to the lines.\n\n## Map style\n\nBy default, use the `mapbox://styles/mapbox/standard` style.  \nHide the labels from the base map style.\n\nUnless I request otherwise, remove all features from the Mapbox Standard style.\n\n```tsx\n// Hide all features from the Mapbox Standard style\nconst hideFeatures = [\n  'showRoadsAndTransit',\n  'showRoads',\n  'showTransit',\n  'showPedestrianRoads',\n  'showRoadLabels',\n  'showTransitLabels',\n  'showPlaceLabels',\n  'showPointOfInterestLabels',\n  'showPointsOfInterest',\n  'showAdminBoundaries',\n  'showLandmarkIcons',\n  'showLandmarkIconLabels',\n  'show3dObjects',\n  'show3dBuildings',\n  'show3dTrees',\n  'show3dLandmarks',\n  'show3dFacades',\n];\nfor (const feature of hideFeatures) {\n  _map.setConfigProperty('basemap', feature, false);\n}\n\n_map.setConfigProperty('basemap', 'colorMotorways', 'transparent');\n_map.setConfigProperty('basemap', 'colorRoads', 'transparent');\n_map.setConfigProperty('basemap', 'colorTrunks', 'transparent');\n```\n\n## Animating the camera\n\nYou can animate the camera along the line by adding a `useEffect` hook that updates the camera position based on the current frame.\n\nUnless I ask for it, do not jump between camera angles.\n\n```tsx\nimport * as turf from '@turf/turf';\nimport {interpolate} from 'remotion';\nimport {Easing} from 'remotion';\nimport {useCurrentFrame, useVideoConfig, useDelayRender} from 'remotion';\n\nconst animationDuration = 20;\nconst cameraAltitude = 4000;\n```\n\n```tsx\nconst frame = useCurrentFrame();\nconst {fps} = useVideoConfig();\nconst {delayRender, continueRender} = useDelayRender();\n\nuseEffect(() => {\n  if (!map) {\n    return;\n  }\n  const handle = delayRender('Moving point...');\n\n  const routeDistance = turf.length(turf.lineString(lineCoordinates));\n\n  const progress = interpolate(frame / fps, [0.00001, animationDuration], [0, 1], {\n    easing: Easing.inOut(Easing.sin),\n    extrapolateLeft: 'clamp',\n    extrapolateRight: 'clamp',\n  });\n\n  const camera = map.getFreeCameraOptions();\n\n  const alongRoute = turf.along(turf.lineString(lineCoordinates), routeDistance * progress).geometry.coordinates;\n\n  camera.lookAtPoint({\n    lng: alongRoute[0],\n    lat: alongRoute[1],\n  });\n\n  map.setFreeCameraOptions(camera);\n  map.once('idle', () => continueRender(handle));\n}, [lineCoordinates, fps, frame, handle, map]);\n```\n\nNotes:\n\nIMPORTANT: Keep the camera by default so north is up.\nIMPORTANT: For multi-step animations, set all properties at all stages (zoom, position, line progress) to prevent jumps. Override initial values.\n\n- The progress is clamped to a minimum value to avoid the line being empty, which can lead to turf errors\n- See [Timing](./timing.md) for more options for timing.\n- Consider the dimensions of the composition and make the lines thick enough and the label font size large enough to be legible for when the composition is scaled down.\n\n## Animating lines\n\n### Straight lines (linear interpolation)\n\nTo animate a line that appears straight on the map, use linear interpolation between coordinates. Do NOT use turf's `lineSliceAlong` or `along` functions, as they use geodesic (great circle) calculations which appear curved on a Mercator projection.\n\n```tsx\nconst frame = useCurrentFrame();\nconst {durationInFrames} = useVideoConfig();\n\nuseEffect(() => {\n  if (!map) return;\n\n  const animationHandle = delayRender('Animating line...');\n\n  const progress = interpolate(frame, [0, durationInFrames - 1], [0, 1], {\n    extrapolateLeft: 'clamp',\n    extrapolateRight: 'clamp',\n    easing: Easing.inOut(Easing.cubic),\n  });\n\n  // Linear interpolation for a straight line on the map\n  const start = lineCoordinates[0];\n  const end = lineCoordinates[1];\n  const currentLng = start[0] + (end[0] - start[0]) * progress;\n  const currentLat = start[1] + (end[1] - start[1]) * progress;\n\n  const lineData: GeoJSON.Feature<GeoJSON.LineString> = {\n    type: 'Feature',\n    properties: {},\n    geometry: {\n      type: 'LineString',\n      coordinates: [start, [currentLng, currentLat]],\n    },\n  };\n\n  const source = map.getSource('trace') as mapboxgl.GeoJSONSource;\n  if (source) {\n    source.setData(lineData);\n  }\n\n  map.once('idle', () => continueRender(animationHandle));\n}, [frame, map, durationInFrames]);\n```\n\n### Curved lines (geodesic/great circle)\n\nTo animate a line that follows the geodesic (great circle) path between two points, use turf's `lineSliceAlong`. This is useful for showing flight paths or the actual shortest distance on Earth.\n\n```tsx\nimport * as turf from '@turf/turf';\n\nconst routeLine = turf.lineString(lineCoordinates);\nconst routeDistance = turf.length(routeLine);\n\nconst currentDistance = Math.max(0.001, routeDistance * progress);\nconst slicedLine = turf.lineSliceAlong(routeLine, 0, currentDistance);\n\nconst source = map.getSource('route') as mapboxgl.GeoJSONSource;\nif (source) {\n  source.setData(slicedLine);\n}\n```\n\n## Markers\n\nAdd labels, and markers where appropriate.\n\n```tsx\n_map.addSource('markers', {\n  type: 'geojson',\n  data: {\n    type: 'FeatureCollection',\n    features: [\n      {\n        type: 'Feature',\n        properties: {name: 'Point 1'},\n        geometry: {type: 'Point', coordinates: [-118.2437, 34.0522]},\n      },\n    ],\n  },\n});\n\n_map.addLayer({\n  id: 'city-markers',\n  type: 'circle',\n  source: 'markers',\n  paint: {\n    'circle-radius': 40,\n    'circle-color': '#FF4444',\n    'circle-stroke-width': 4,\n    'circle-stroke-color': '#FFFFFF',\n  },\n});\n\n_map.addLayer({\n  id: 'labels',\n  type: 'symbol',\n  source: 'markers',\n  layout: {\n    'text-field': ['get', 'name'],\n    'text-font': ['DIN Pro Bold', 'Arial Unicode MS Bold'],\n    'text-size': 50,\n    'text-offset': [0, 0.5],\n    'text-anchor': 'top',\n  },\n  paint: {\n    'text-color': '#FFFFFF',\n    'text-halo-color': '#000000',\n    'text-halo-width': 2,\n  },\n});\n```\n\nMake sure they are big enough. Check the composition dimensions and scale the labels accordingly.\nFor a composition size of 1920x1080, the label font size should be at least 40px.\n\nIMPORTANT: Keep the `text-offset` small enough so it is close to the marker. Consider the marker circle radius. For a circle radius of 40, this is a good offset:\n\n```tsx\n\"text-offset\": [0, 0.5],\n```\n\n## 3D buildings\n\nTo enable 3D buildings, use the following code:\n\n```tsx\n_map.setConfigProperty('basemap', 'show3dObjects', true);\n_map.setConfigProperty('basemap', 'show3dLandmarks', true);\n_map.setConfigProperty('basemap', 'show3dBuildings', true);\n```\n\n## Rendering\n\nWhen rendering a map animation, make sure to render with the following flags:\n\n```\nnpx remotion render --gl=angle --concurrency=1\n```\n",
        "skills/remotion/rules/measuring-dom-nodes.md": "---\nname: measuring-dom-nodes\ndescription: Measuring DOM element dimensions in Remotion\nmetadata:\n  tags: measure, layout, dimensions, getBoundingClientRect, scale\n---\n\n# Measuring DOM nodes in Remotion\n\nRemotion applies a `scale()` transform to the video container, which affects values from `getBoundingClientRect()`. Use `useCurrentScale()` to get correct measurements.\n\n## Measuring element dimensions\n\n```tsx\nimport { useCurrentScale } from \"remotion\";\nimport { useRef, useEffect, useState } from \"react\";\n\nexport const MyComponent = () => {\n  const ref = useRef<HTMLDivElement>(null);\n  const scale = useCurrentScale();\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n\n  useEffect(() => {\n    if (!ref.current) return;\n    const rect = ref.current.getBoundingClientRect();\n    setDimensions({\n      width: rect.width / scale,\n      height: rect.height / scale,\n    });\n  }, [scale]);\n\n  return <div ref={ref}>Content to measure</div>;\n};\n```\n\n",
        "skills/remotion/rules/measuring-text.md": "---\nname: measuring-text\ndescription: Measuring text dimensions, fitting text to containers, and checking overflow\nmetadata:\n  tags: measure, text, layout, dimensions, fitText, fillTextBox\n---\n\n# Measuring text in Remotion\n\n## Prerequisites\n\nInstall @remotion/layout-utils if it is not already installed:\n\n```bash\nnpx remotion add @remotion/layout-utils # If project uses npm\nbunx remotion add @remotion/layout-utils # If project uses bun\nyarn remotion add @remotion/layout-utils # If project uses yarn\npnpm exec remotion add @remotion/layout-utils # If project uses pnpm\n```\n\n## Measuring text dimensions\n\nUse `measureText()` to calculate the width and height of text:\n\n```tsx\nimport { measureText } from \"@remotion/layout-utils\";\n\nconst { width, height } = measureText({\n  text: \"Hello World\",\n  fontFamily: \"Arial\",\n  fontSize: 32,\n  fontWeight: \"bold\",\n});\n```\n\nResults are cached - duplicate calls return the cached result.\n\n## Fitting text to a width\n\nUse `fitText()` to find the optimal font size for a container:\n\n```tsx\nimport { fitText } from \"@remotion/layout-utils\";\n\nconst { fontSize } = fitText({\n  text: \"Hello World\",\n  withinWidth: 600,\n  fontFamily: \"Inter\",\n  fontWeight: \"bold\",\n});\n\nreturn (\n  <div\n    style={{\n      fontSize: Math.min(fontSize, 80), // Cap at 80px\n      fontFamily: \"Inter\",\n      fontWeight: \"bold\",\n    }}\n  >\n    Hello World\n  </div>\n);\n```\n\n## Checking text overflow\n\nUse `fillTextBox()` to check if text exceeds a box:\n\n```tsx\nimport { fillTextBox } from \"@remotion/layout-utils\";\n\nconst box = fillTextBox({ maxBoxWidth: 400, maxLines: 3 });\n\nconst words = [\"Hello\", \"World\", \"This\", \"is\", \"a\", \"test\"];\nfor (const word of words) {\n  const { exceedsBox } = box.add({\n    text: word + \" \",\n    fontFamily: \"Arial\",\n    fontSize: 24,\n  });\n  if (exceedsBox) {\n    // Text would overflow, handle accordingly\n    break;\n  }\n}\n```\n\n## Best practices\n\n**Load fonts first:** Only call measurement functions after fonts are loaded.\n\n```tsx\nimport { loadFont } from \"@remotion/google-fonts/Inter\";\n\nconst { fontFamily, waitUntilDone } = loadFont(\"normal\", {\n  weights: [\"400\"],\n  subsets: [\"latin\"],\n});\n\nwaitUntilDone().then(() => {\n  // Now safe to measure\n  const { width } = measureText({\n    text: \"Hello\",\n    fontFamily,\n    fontSize: 32,\n  });\n})\n```\n\n**Use validateFontIsLoaded:** Catch font loading issues early:\n\n```tsx\nmeasureText({\n  text: \"Hello\",\n  fontFamily: \"MyCustomFont\",\n  fontSize: 32,\n  validateFontIsLoaded: true, // Throws if font not loaded\n});\n```\n\n**Match font properties:** Use the same properties for measurement and rendering:\n\n```tsx\nconst fontStyle = {\n  fontFamily: \"Inter\",\n  fontSize: 32,\n  fontWeight: \"bold\" as const,\n  letterSpacing: \"0.5px\",\n};\n\nconst { width } = measureText({\n  text: \"Hello\",\n  ...fontStyle,\n});\n\nreturn <div style={fontStyle}>Hello</div>;\n```\n\n**Avoid padding and border:** Use `outline` instead of `border` to prevent layout differences:\n\n```tsx\n<div style={{ outline: \"2px solid red\" }}>Text</div>\n```\n",
        "skills/remotion/rules/parameters.md": "---\nname: parameters\ndescription: Make a video parametrizable by adding a Zod schema\nmetadata:\n  tags: parameters, zod, schema\n---\n\nTo make a video parametrizable, a Zod schema can be added to a composition.\n\nFirst, `zod` must be installed - it must be exactly version `3.22.3`.\n\nSearch the project for lockfiles and run the correct command depending on the package manager:\n\nIf `package-lock.json` is found, use the following command:\n\n```bash\nnpm i zod@3.22.3\n```\n\nIf `bun.lockb` is found, use the following command:\n\n```bash\nbun i zod@3.22.3\n```\n\nIf `yarn.lock` is found, use the following command:\n\n```bash\nyarn add zod@3.22.3\n```\n\nIf `pnpm-lock.yaml` is found, use the following command:\n\n```bash\npnpm i zod@3.22.3\n```\n\nThen, a Zod schema can be defined alongside the component:\n\n```tsx title=\"src/MyComposition.tsx\"\nimport {z} from 'zod';\n\nexport const MyCompositionSchema = z.object({\n  title: z.string(),\n});\n\nconst MyComponent: React.FC<z.infer<typeof MyCompositionSchema>> = () => {\n  return (\n    <div>\n      <h1>{props.title}</h1>\n    </div>\n  );\n};\n```\n\nIn the root file, the schema can be passed to the composition:\n\n```tsx title=\"src/Root.tsx\"\nimport {Composition} from 'remotion';\nimport {MycComponent, MyCompositionSchema} from './MyComposition';\n\nexport const RemotionRoot = () => {\n  return <Composition id=\"MyComposition\" component={MyComponent} durationInFrames={100} fps={30} width={1080} height={1080} defaultProps={{title: 'Hello World'}} schema={MyCompositionSchema} />;\n};\n```\n\nNow, the user can edit the parameter visually in the sidebar.\n\nAll schemas that are supported by Zod are supported by Remotion.\n\nRemotion requires that the top-level type is a z.object(), because the collection of props of a React component is always an object.\n\n## Color picker\n\nFor adding a color picker, use `zColor()` from `@remotion/zod-types`.\n\nIf it is not installed, use the following command:\n\n```bash\nnpx remotion add @remotion/zod-types # If project uses npm\nbunx remotion add @remotion/zod-types # If project uses bun\nyarn remotion add @remotion/zod-types # If project uses yarn\npnpm exec remotion add @remotion/zod-types # If project uses pnpm\n```\n\nThen import `zColor` from `@remotion/zod-types`:\n\n```tsx\nimport {zColor} from '@remotion/zod-types';\n```\n\nThen use it in the schema:\n\n```tsx\nexport const MyCompositionSchema = z.object({\n  color: zColor(),\n});\n```\n",
        "skills/remotion/rules/sequencing.md": "---\nname: sequencing\ndescription: Sequencing patterns for Remotion - delay, trim, limit duration of items\nmetadata:\n  tags: sequence, series, timing, delay, trim\n---\n\nUse `<Sequence>` to delay when an element appears in the timeline.\n\n```tsx\nimport { Sequence } from \"remotion\";\n\nconst {fps} = useVideoConfig();\n\n<Sequence from={1 * fps} durationInFrames={2 * fps} premountFor={1 * fps}>\n  <Title />\n</Sequence>\n<Sequence from={2 * fps} durationInFrames={2 * fps} premountFor={1 * fps}>\n  <Subtitle />\n</Sequence>\n```\n\nThis will by default wrap the component in an absolute fill element.  \nIf the items should not be wrapped, use the `layout` prop:\n\n```tsx\n<Sequence layout=\"none\">\n  <Title />\n</Sequence>\n```\n\n## Premounting\n\nThis loads the component in the timeline before it is actually played.  \nAlways premount any `<Sequence>`!\n\n```tsx\n<Sequence premountFor={1 * fps}>\n  <Title />\n</Sequence>\n```\n\n## Series\n\nUse `<Series>` when elements should play one after another without overlap.\n\n```tsx\nimport {Series} from 'remotion';\n\n<Series>\n  <Series.Sequence durationInFrames={45}>\n    <Intro />\n  </Series.Sequence>\n  <Series.Sequence durationInFrames={60}>\n    <MainContent />\n  </Series.Sequence>\n  <Series.Sequence durationInFrames={30}>\n    <Outro />\n  </Series.Sequence>\n</Series>;\n```\n\nSame as with `<Sequence>`, the items will be wrapped in an absolute fill element by default when using `<Series.Sequence>`, unless the `layout` prop is set to `none`.\n\n### Series with overlaps\n\nUse negative offset for overlapping sequences:\n\n```tsx\n<Series>\n  <Series.Sequence durationInFrames={60}>\n    <SceneA />\n  </Series.Sequence>\n  <Series.Sequence offset={-15} durationInFrames={60}>\n    {/* Starts 15 frames before SceneA ends */}\n    <SceneB />\n  </Series.Sequence>\n</Series>\n```\n\n## Frame References Inside Sequences\n\nInside a Sequence, `useCurrentFrame()` returns the local frame (starting from 0):\n\n```tsx\n<Sequence from={60} durationInFrames={30}>\n  <MyComponent />\n  {/* Inside MyComponent, useCurrentFrame() returns 0-29, not 60-89 */}\n</Sequence>\n```\n\n## Nested Sequences\n\nSequences can be nested for complex timing:\n\n```tsx\n<Sequence from={0} durationInFrames={120}>\n  <Background />\n  <Sequence from={15} durationInFrames={90} layout=\"none\">\n    <Title />\n  </Sequence>\n  <Sequence from={45} durationInFrames={60} layout=\"none\">\n    <Subtitle />\n  </Sequence>\n</Sequence>\n```\n\n## Nesting compositions within another\n\nTo add a composition within another composition, you can use the `<Sequence>` component with a `width` and `height` prop to specify the size of the composition.\n\n```tsx\n<AbsoluteFill>\n  <Sequence width={COMPOSITION_WIDTH} height={COMPOSITION_HEIGHT}>\n    <CompositionComponent />\n  </Sequence>\n</AbsoluteFill>\n```\n",
        "skills/remotion/rules/tailwind.md": "---\nname: tailwind\ndescription: Using TailwindCSS in Remotion.\nmetadata:\n---\n\nYou can and should use TailwindCSS in Remotion, if TailwindCSS is installed in the project.\n\nDon't use `transition-*` or `animate-*` classes - always animate using the `useCurrentFrame()` hook.  \n\nTailwind must be installed and enabled first in a Remotion project - fetch  https://www.remotion.dev/docs/tailwind using WebFetch for instructions.",
        "skills/remotion/rules/text-animations.md": "---\nname: text-animations\ndescription: Typography and text animation patterns for Remotion.\nmetadata:\n  tags: typography, text, typewriter, highlighter ken\n---\n\n## Text animations\n\nBased on `useCurrentFrame()`, reduce the string character by character to create a typewriter effect.\n\n## Typewriter Effect\n\nSee [Typewriter](assets/text-animations-typewriter.tsx) for an advanced example with a blinking cursor and a pause after the first sentence.\n\nAlways use string slicing for typewriter effects. Never use per-character opacity.\n\n## Word Highlighting\n\nSee [Word Highlight](assets/text-animations-word-highlight.tsx) for an example for how a word highlight is animated, like with a highlighter pen.\n",
        "skills/remotion/rules/timing.md": "---\nname: timing\ndescription: Interpolation curves in Remotion - linear, easing, spring animations\nmetadata:\n  tags: spring, bounce, easing, interpolation\n---\n\nA simple linear interpolation is done using the `interpolate` function.\n\n```ts title=\"Going from 0 to 1 over 100 frames\"\nimport {interpolate} from 'remotion';\n\nconst opacity = interpolate(frame, [0, 100], [0, 1]);\n```\n\nBy default, the values are not clamped, so the value can go outside the range [0, 1].  \nHere is how they can be clamped:\n\n```ts title=\"Going from 0 to 1 over 100 frames with extrapolation\"\nconst opacity = interpolate(frame, [0, 100], [0, 1], {\n  extrapolateRight: 'clamp',\n  extrapolateLeft: 'clamp',\n});\n```\n\n## Spring animations\n\nSpring animations have a more natural motion.  \nThey go from 0 to 1 over time.\n\n```ts title=\"Spring animation from 0 to 1 over 100 frames\"\nimport {spring, useCurrentFrame, useVideoConfig} from 'remotion';\n\nconst frame = useCurrentFrame();\nconst {fps} = useVideoConfig();\n\nconst scale = spring({\n  frame,\n  fps,\n});\n```\n\n### Physical properties\n\nThe default configuration is: `mass: 1, damping: 10, stiffness: 100`.  \nThis leads to the animation having a bit of bounce before it settles.\n\nThe config can be overwritten like this:\n\n```ts\nconst scale = spring({\n  frame,\n  fps,\n  config: {damping: 200},\n});\n```\n\nThe recommended configuration for a natural motion without a bounce is: `{ damping: 200 }`.\n\nHere are some common configurations:\n\n```tsx\nconst smooth = {damping: 200}; // Smooth, no bounce (subtle reveals)\nconst snappy = {damping: 20, stiffness: 200}; // Snappy, minimal bounce (UI elements)\nconst bouncy = {damping: 8}; // Bouncy entrance (playful animations)\nconst heavy = {damping: 15, stiffness: 80, mass: 2}; // Heavy, slow, small bounce\n```\n\n### Delay\n\nThe animation starts immediately by default.  \nUse the `delay` parameter to delay the animation by a number of frames.\n\n```tsx\nconst entrance = spring({\n  frame: frame - ENTRANCE_DELAY,\n  fps,\n  delay: 20,\n});\n```\n\n### Duration\n\nA `spring()` has a natural duration based on the physical properties.  \nTo stretch the animation to a specific duration, use the `durationInFrames` parameter.\n\n```tsx\nconst spring = spring({\n  frame,\n  fps,\n  durationInFrames: 40,\n});\n```\n\n### Combining spring() with interpolate()\n\nMap spring output (0-1) to custom ranges:\n\n```tsx\nconst springProgress = spring({\n  frame,\n  fps,\n});\n\n// Map to rotation\nconst rotation = interpolate(springProgress, [0, 1], [0, 360]);\n\n<div style={{rotate: rotation + 'deg'}} />;\n```\n\n### Adding springs\n\nSprings return just numbers, so math can be performed:\n\n```tsx\nconst frame = useCurrentFrame();\nconst {fps, durationInFrames} = useVideoConfig();\n\nconst inAnimation = spring({\n  frame,\n  fps,\n});\nconst outAnimation = spring({\n  frame,\n  fps,\n  durationInFrames: 1 * fps,\n  delay: durationInFrames - 1 * fps,\n});\n\nconst scale = inAnimation - outAnimation;\n```\n\n## Easing\n\nEasing can be added to the `interpolate` function:\n\n```ts\nimport {interpolate, Easing} from 'remotion';\n\nconst value1 = interpolate(frame, [0, 100], [0, 1], {\n  easing: Easing.inOut(Easing.quad),\n  extrapolateLeft: 'clamp',\n  extrapolateRight: 'clamp',\n});\n```\n\nThe default easing is `Easing.linear`.  \nThere are various other convexities:\n\n- `Easing.in` for starting slow and accelerating\n- `Easing.out` for starting fast and slowing down\n- `Easing.inOut`\n\nand curves (sorted from most linear to most curved):\n\n- `Easing.quad`\n- `Easing.sin`\n- `Easing.exp`\n- `Easing.circle`\n\nConvexities and curves need be combined for an easing function:\n\n```ts\nconst value1 = interpolate(frame, [0, 100], [0, 1], {\n  easing: Easing.inOut(Easing.quad),\n  extrapolateLeft: 'clamp',\n  extrapolateRight: 'clamp',\n});\n```\n\nCubic bezier curves are also supported:\n\n```ts\nconst value1 = interpolate(frame, [0, 100], [0, 1], {\n  easing: Easing.bezier(0.8, 0.22, 0.96, 0.65),\n  extrapolateLeft: 'clamp',\n  extrapolateRight: 'clamp',\n});\n```\n",
        "skills/remotion/rules/transcribe-captions.md": "---\nname: transcribe-captions\ndescription: Transcribing audio to generate captions in Remotion\nmetadata:\n  tags: captions, transcribe, whisper, audio, speech-to-text\n---\n\n# Transcribing audio\n\nRemotion provides several built-in options for transcribing audio to generate captions:\n\n- `@remotion/install-whisper-cpp` - Transcribe locally on a server using Whisper.cpp. Fast and free, but requires server infrastructure.\n  https://remotion.dev/docs/install-whisper-cpp\n\n- `@remotion/whisper-web` - Transcribe in the browser using WebAssembly. No server needed and free, but slower due to WASM overhead.\n  https://remotion.dev/docs/whisper-web\n\n- `@remotion/openai-whisper` - Use OpenAI Whisper API for cloud-based transcription. Fast and no server needed, but requires payment.\n  https://remotion.dev/docs/openai-whisper/openai-whisper-api-to-captions\n",
        "skills/remotion/rules/transitions.md": "---\nname: transitions\ndescription: Fullscreen scene transitions for Remotion.\nmetadata:\n  tags: transitions, fade, slide, wipe, scenes\n---\n\n## Fullscreen transitions\n\nUsing `<TransitionSeries>` to animate between multiple scenes or clips.  \nThis will absolutely position the children.\n\n## Prerequisites\n\nFirst, the @remotion/transitions package needs to be installed.  \nIf it is not, use the following command:\n\n```bash\nnpx remotion add @remotion/transitions # If project uses npm\nbunx remotion add @remotion/transitions # If project uses bun\nyarn remotion add @remotion/transitions # If project uses yarn\npnpm exec remotion add @remotion/transitions # If project uses pnpm\n```\n\n## Example usage\n\n```tsx\nimport {TransitionSeries, linearTiming} from '@remotion/transitions';\nimport {fade} from '@remotion/transitions/fade';\n\n<TransitionSeries>\n  <TransitionSeries.Sequence durationInFrames={60}>\n    <SceneA />\n  </TransitionSeries.Sequence>\n  <TransitionSeries.Transition presentation={fade()} timing={linearTiming({durationInFrames: 15})} />\n  <TransitionSeries.Sequence durationInFrames={60}>\n    <SceneB />\n  </TransitionSeries.Sequence>\n</TransitionSeries>;\n```\n\n## Available Transition Types\n\nImport transitions from their respective modules:\n\n```tsx\nimport {fade} from '@remotion/transitions/fade';\nimport {slide} from '@remotion/transitions/slide';\nimport {wipe} from '@remotion/transitions/wipe';\nimport {flip} from '@remotion/transitions/flip';\nimport {clockWipe} from '@remotion/transitions/clock-wipe';\n```\n\n## Slide Transition with Direction\n\nSpecify slide direction for enter/exit animations.\n\n```tsx\nimport {slide} from '@remotion/transitions/slide';\n\n<TransitionSeries.Transition presentation={slide({direction: 'from-left'})} timing={linearTiming({durationInFrames: 20})} />;\n```\n\nDirections: `\"from-left\"`, `\"from-right\"`, `\"from-top\"`, `\"from-bottom\"`\n\n## Timing Options\n\n```tsx\nimport {linearTiming, springTiming} from '@remotion/transitions';\n\n// Linear timing - constant speed\nlinearTiming({durationInFrames: 20});\n\n// Spring timing - organic motion\nspringTiming({config: {damping: 200}, durationInFrames: 25});\n```\n\n## Duration calculation\n\nTransitions overlap adjacent scenes, so the total composition length is **shorter** than the sum of all sequence durations.\n\nFor example, with two 60-frame sequences and a 15-frame transition:\n\n- Without transitions: `60 + 60 = 120` frames\n- With transition: `60 + 60 - 15 = 105` frames\n\nThe transition duration is subtracted because both scenes play simultaneously during the transition.\n\n### Getting the duration of a transition\n\nUse the `getDurationInFrames()` method on the timing object:\n\n```tsx\nimport {linearTiming, springTiming} from '@remotion/transitions';\n\nconst linearDuration = linearTiming({durationInFrames: 20}).getDurationInFrames({fps: 30});\n// Returns 20\n\nconst springDuration = springTiming({config: {damping: 200}}).getDurationInFrames({fps: 30});\n// Returns calculated duration based on spring physics\n```\n\nFor `springTiming` without an explicit `durationInFrames`, the duration depends on `fps` because it calculates when the spring animation settles.\n\n### Calculating total composition duration\n\n```tsx\nimport {linearTiming} from '@remotion/transitions';\n\nconst scene1Duration = 60;\nconst scene2Duration = 60;\nconst scene3Duration = 60;\n\nconst timing1 = linearTiming({durationInFrames: 15});\nconst timing2 = linearTiming({durationInFrames: 20});\n\nconst transition1Duration = timing1.getDurationInFrames({fps: 30});\nconst transition2Duration = timing2.getDurationInFrames({fps: 30});\n\nconst totalDuration = scene1Duration + scene2Duration + scene3Duration - transition1Duration - transition2Duration;\n// 60 + 60 + 60 - 15 - 20 = 145 frames\n```\n",
        "skills/remotion/rules/trimming.md": "---\nname: trimming\ndescription: Trimming patterns for Remotion - cut the beginning or end of animations\nmetadata:\n  tags: sequence, trim, clip, cut, offset\n---\n\nUse `<Sequence>` with a negative `from` value to trim the start of an animation.\n\n## Trim the Beginning\n\nA negative `from` value shifts time backwards, making the animation start partway through:\n\n```tsx\nimport { Sequence, useVideoConfig } from \"remotion\";\n\nconst fps = useVideoConfig();\n\n<Sequence from={-0.5 * fps}>\n  <MyAnimation />\n</Sequence>\n```\n\nThe animation appears 15 frames into its progress - the first 15 frames are trimmed off.\nInside `<MyAnimation>`, `useCurrentFrame()` starts at 15 instead of 0.\n\n## Trim the End\n\nUse `durationInFrames` to unmount content after a specified duration:\n\n```tsx\n\n<Sequence durationInFrames={1.5 * fps}>\n  <MyAnimation />\n</Sequence>\n```\n\nThe animation plays for 45 frames, then the component unmounts.\n\n## Trim and Delay\n\nNest sequences to both trim the beginning and delay when it appears:\n\n```tsx\n<Sequence from={30}>\n  <Sequence from={-15}>\n    <MyAnimation />\n  </Sequence>\n</Sequence>\n```\n\nThe inner sequence trims 15 frames from the start, and the outer sequence delays the result by 30 frames.\n\n",
        "skills/remotion/rules/videos.md": "---\nname: videos\ndescription: Embedding videos in Remotion - trimming, volume, speed, looping, pitch\nmetadata:\n  tags: video, media, trim, volume, speed, loop, pitch\n---\n\n# Using videos in Remotion\n\n## Prerequisites\n\nFirst, the @remotion/media package needs to be installed.  \nIf it is not, use the following command:\n\n```bash\nnpx remotion add @remotion/media # If project uses npm\nbunx remotion add @remotion/media # If project uses bun\nyarn remotion add @remotion/media # If project uses yarn\npnpm exec remotion add @remotion/media # If project uses pnpm\n```\n\nUse `<Video>` from `@remotion/media` to embed videos into your composition.\n\n```tsx\nimport { Video } from \"@remotion/media\";\nimport { staticFile } from \"remotion\";\n\nexport const MyComposition = () => {\n  return <Video src={staticFile(\"video.mp4\")} />;\n};\n```\n\nRemote URLs are also supported:\n\n```tsx\n<Video src=\"https://remotion.media/video.mp4\" />\n```\n\n## Trimming\n\nUse `trimBefore` and `trimAfter` to remove portions of the video. Values are in seconds.\n\n```tsx\nconst { fps } = useVideoConfig();\n\nreturn (\n  <Video\n    src={staticFile(\"video.mp4\")}\n    trimBefore={2 * fps} // Skip the first 2 seconds\n    trimAfter={10 * fps} // End at the 10 second mark\n  />\n);\n```\n\n## Delaying\n\nWrap the video in a `<Sequence>` to delay when it appears:\n\n```tsx\nimport { Sequence, staticFile } from \"remotion\";\nimport { Video } from \"@remotion/media\";\n\nconst { fps } = useVideoConfig();\n\nreturn (\n  <Sequence from={1 * fps}>\n    <Video src={staticFile(\"video.mp4\")} />\n  </Sequence>\n);\n```\n\nThe video will appear after 1 second.\n\n## Sizing and Position\n\nUse the `style` prop to control size and position:\n\n```tsx\n<Video\n  src={staticFile(\"video.mp4\")}\n  style={{\n    width: 500,\n    height: 300,\n    position: \"absolute\",\n    top: 100,\n    left: 50,\n    objectFit: \"cover\",\n  }}\n/>\n```\n\n## Volume\n\nSet a static volume (0 to 1):\n\n```tsx\n<Video src={staticFile(\"video.mp4\")} volume={0.5} />\n```\n\nOr use a callback for dynamic volume based on the current frame:\n\n```tsx\nimport { interpolate } from \"remotion\";\n\nconst { fps } = useVideoConfig();\n\nreturn (\n  <Video\n    src={staticFile(\"video.mp4\")}\n    volume={(f) =>\n      interpolate(f, [0, 1 * fps], [0, 1], { extrapolateRight: \"clamp\" })\n    }\n  />\n);\n```\n\nUse `muted` to silence the video entirely:\n\n```tsx\n<Video src={staticFile(\"video.mp4\")} muted />\n```\n\n## Speed\n\nUse `playbackRate` to change the playback speed:\n\n```tsx\n<Video src={staticFile(\"video.mp4\")} playbackRate={2} /> {/* 2x speed */}\n<Video src={staticFile(\"video.mp4\")} playbackRate={0.5} /> {/* Half speed */}\n```\n\nReverse playback is not supported.\n\n## Looping\n\nUse `loop` to loop the video indefinitely:\n\n```tsx\n<Video src={staticFile(\"video.mp4\")} loop />\n```\n\nUse `loopVolumeCurveBehavior` to control how the frame count behaves when looping:\n\n- `\"repeat\"`: Frame count resets to 0 each loop (for `volume` callback)\n- `\"extend\"`: Frame count continues incrementing\n\n```tsx\n<Video\n  src={staticFile(\"video.mp4\")}\n  loop\n  loopVolumeCurveBehavior=\"extend\"\n  volume={(f) => interpolate(f, [0, 300], [1, 0])} // Fade out over multiple loops\n/>\n```\n\n## Pitch\n\nUse `toneFrequency` to adjust the pitch without affecting speed. Values range from 0.01 to 2:\n\n```tsx\n<Video\n  src={staticFile(\"video.mp4\")}\n  toneFrequency={1.5} // Higher pitch\n/>\n<Video\n  src={staticFile(\"video.mp4\")}\n  toneFrequency={0.8} // Lower pitch\n/>\n```\n\nPitch shifting only works during server-side rendering, not in the Remotion Studio preview or in the `<Player />`.\n",
        "skills/skill-creator/SKILL.md": "---\nname: skill-creator\ndescription: Guide for creating effective skills. This skill should be used when users want to create a new skill (or update an existing skill) that extends Claude's capabilities with specialized knowledge, workflows, or tool integrations.\nlicense: Complete terms in LICENSE.txt\n---\n\n# Skill Creator\n\nThis skill provides guidance for creating effective skills.\n\n## About Skills\n\nSkills are modular, self-contained packages that extend Claude's capabilities by providing\nspecialized knowledge, workflows, and tools. Think of them as \"onboarding guides\" for specific\ndomains or tasksâ€”they transform Claude from a general-purpose agent into a specialized agent\nequipped with procedural knowledge that no model can fully possess.\n\n### What Skills Provide\n\n1. Specialized workflows - Multi-step procedures for specific domains\n2. Tool integrations - Instructions for working with specific file formats or APIs\n3. Domain expertise - Company-specific knowledge, schemas, business logic\n4. Bundled resources - Scripts, references, and assets for complex and repetitive tasks\n\n## Core Principles\n\n### Concise is Key\n\nThe context window is a public good. Skills share the context window with everything else Claude needs: system prompt, conversation history, other Skills' metadata, and the actual user request.\n\n**Default assumption: Claude is already very smart.** Only add context Claude doesn't already have. Challenge each piece of information: \"Does Claude really need this explanation?\" and \"Does this paragraph justify its token cost?\"\n\nPrefer concise examples over verbose explanations.\n\n### Set Appropriate Degrees of Freedom\n\nMatch the level of specificity to the task's fragility and variability:\n\n**High freedom (text-based instructions)**: Use when multiple approaches are valid, decisions depend on context, or heuristics guide the approach.\n\n**Medium freedom (pseudocode or scripts with parameters)**: Use when a preferred pattern exists, some variation is acceptable, or configuration affects behavior.\n\n**Low freedom (specific scripts, few parameters)**: Use when operations are fragile and error-prone, consistency is critical, or a specific sequence must be followed.\n\nThink of Claude as exploring a path: a narrow bridge with cliffs needs specific guardrails (low freedom), while an open field allows many routes (high freedom).\n\n### Anatomy of a Skill\n\nEvery skill consists of a required SKILL.md file and optional bundled resources:\n\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md (required)\nâ”‚   â”œâ”€â”€ YAML frontmatter metadata (required)\nâ”‚   â”‚   â”œâ”€â”€ name: (required)\nâ”‚   â”‚   â””â”€â”€ description: (required)\nâ”‚   â””â”€â”€ Markdown instructions (required)\nâ””â”€â”€ Bundled Resources (optional)\n    â”œâ”€â”€ scripts/          - Executable code (Python/Bash/etc.)\n    â”œâ”€â”€ references/       - Documentation intended to be loaded into context as needed\n    â””â”€â”€ assets/           - Files used in output (templates, icons, fonts, etc.)\n```\n\n#### SKILL.md (required)\n\nEvery SKILL.md consists of:\n\n- **Frontmatter** (YAML): Contains `name` and `description` fields. These are the only fields that Claude reads to determine when the skill gets used, thus it is very important to be clear and comprehensive in describing what the skill is, and when it should be used.\n- **Body** (Markdown): Instructions and guidance for using the skill. Only loaded AFTER the skill triggers (if at all).\n\n#### Bundled Resources (optional)\n\n##### Scripts (`scripts/`)\n\nExecutable code (Python/Bash/etc.) for tasks that require deterministic reliability or are repeatedly rewritten.\n\n- **When to include**: When the same code is being rewritten repeatedly or deterministic reliability is needed\n- **Example**: `scripts/rotate_pdf.py` for PDF rotation tasks\n- **Benefits**: Token efficient, deterministic, may be executed without loading into context\n- **Note**: Scripts may still need to be read by Claude for patching or environment-specific adjustments\n\n##### References (`references/`)\n\nDocumentation and reference material intended to be loaded as needed into context to inform Claude's process and thinking.\n\n- **When to include**: For documentation that Claude should reference while working\n- **Examples**: `references/finance.md` for financial schemas, `references/mnda.md` for company NDA template, `references/policies.md` for company policies, `references/api_docs.md` for API specifications\n- **Use cases**: Database schemas, API documentation, domain knowledge, company policies, detailed workflow guides\n- **Benefits**: Keeps SKILL.md lean, loaded only when Claude determines it's needed\n- **Best practice**: If files are large (>10k words), include grep search patterns in SKILL.md\n- **Avoid duplication**: Information should live in either SKILL.md or references files, not both. Prefer references files for detailed information unless it's truly core to the skillâ€”this keeps SKILL.md lean while making information discoverable without hogging the context window. Keep only essential procedural instructions and workflow guidance in SKILL.md; move detailed reference material, schemas, and examples to references files.\n\n##### Assets (`assets/`)\n\nFiles not intended to be loaded into context, but rather used within the output Claude produces.\n\n- **When to include**: When the skill needs files that will be used in the final output\n- **Examples**: `assets/logo.png` for brand assets, `assets/slides.pptx` for PowerPoint templates, `assets/frontend-template/` for HTML/React boilerplate, `assets/font.ttf` for typography\n- **Use cases**: Templates, images, icons, boilerplate code, fonts, sample documents that get copied or modified\n- **Benefits**: Separates output resources from documentation, enables Claude to use files without loading them into context\n\n#### What to Not Include in a Skill\n\nA skill should only contain essential files that directly support its functionality. Do NOT create extraneous documentation or auxiliary files, including:\n\n- README.md\n- INSTALLATION_GUIDE.md\n- QUICK_REFERENCE.md\n- CHANGELOG.md\n- etc.\n\nThe skill should only contain the information needed for an AI agent to do the job at hand. It should not contain auxilary context about the process that went into creating it, setup and testing procedures, user-facing documentation, etc. Creating additional documentation files just adds clutter and confusion.\n\n### Progressive Disclosure Design Principle\n\nSkills use a three-level loading system to manage context efficiently:\n\n1. **Metadata (name + description)** - Always in context (~100 words)\n2. **SKILL.md body** - When skill triggers (<5k words)\n3. **Bundled resources** - As needed by Claude (Unlimited because scripts can be executed without reading into context window)\n\n#### Progressive Disclosure Patterns\n\nKeep SKILL.md body to the essentials and under 500 lines to minimize context bloat. Split content into separate files when approaching this limit. When splitting out content into other files, it is very important to reference them from SKILL.md and describe clearly when to read them, to ensure the reader of the skill knows they exist and when to use them.\n\n**Key principle:** When a skill supports multiple variations, frameworks, or options, keep only the core workflow and selection guidance in SKILL.md. Move variant-specific details (patterns, examples, configuration) into separate reference files.\n\n**Pattern 1: High-level guide with references**\n\n```markdown\n# PDF Processing\n\n## Quick start\n\nExtract text with pdfplumber:\n[code example]\n\n## Advanced features\n\n- **Form filling**: See [FORMS.md](FORMS.md) for complete guide\n- **API reference**: See [REFERENCE.md](REFERENCE.md) for all methods\n- **Examples**: See [EXAMPLES.md](EXAMPLES.md) for common patterns\n```\n\nClaude loads FORMS.md, REFERENCE.md, or EXAMPLES.md only when needed.\n\n**Pattern 2: Domain-specific organization**\n\nFor Skills with multiple domains, organize content by domain to avoid loading irrelevant context:\n\n```\nbigquery-skill/\nâ”œâ”€â”€ SKILL.md (overview and navigation)\nâ””â”€â”€ reference/\n    â”œâ”€â”€ finance.md (revenue, billing metrics)\n    â”œâ”€â”€ sales.md (opportunities, pipeline)\n    â”œâ”€â”€ product.md (API usage, features)\n    â””â”€â”€ marketing.md (campaigns, attribution)\n```\n\nWhen a user asks about sales metrics, Claude only reads sales.md.\n\nSimilarly, for skills supporting multiple frameworks or variants, organize by variant:\n\n```\ncloud-deploy/\nâ”œâ”€â”€ SKILL.md (workflow + provider selection)\nâ””â”€â”€ references/\n    â”œâ”€â”€ aws.md (AWS deployment patterns)\n    â”œâ”€â”€ gcp.md (GCP deployment patterns)\n    â””â”€â”€ azure.md (Azure deployment patterns)\n```\n\nWhen the user chooses AWS, Claude only reads aws.md.\n\n**Pattern 3: Conditional details**\n\nShow basic content, link to advanced content:\n\n```markdown\n# DOCX Processing\n\n## Creating documents\n\nUse docx-js for new documents. See [DOCX-JS.md](DOCX-JS.md).\n\n## Editing documents\n\nFor simple edits, modify the XML directly.\n\n**For tracked changes**: See [REDLINING.md](REDLINING.md)\n**For OOXML details**: See [OOXML.md](OOXML.md)\n```\n\nClaude reads REDLINING.md or OOXML.md only when the user needs those features.\n\n**Important guidelines:**\n\n- **Avoid deeply nested references** - Keep references one level deep from SKILL.md. All reference files should link directly from SKILL.md.\n- **Structure longer reference files** - For files longer than 100 lines, include a table of contents at the top so Claude can see the full scope when previewing.\n\n## Skill Creation Process\n\nSkill creation involves these steps:\n\n1. Understand the skill with concrete examples\n2. Plan reusable skill contents (scripts, references, assets)\n3. Initialize the skill (run init_skill.py)\n4. Edit the skill (implement resources and write SKILL.md)\n5. Package the skill (run package_skill.py)\n6. Iterate based on real usage\n\nFollow these steps in order, skipping only if there is a clear reason why they are not applicable.\n\n### Step 1: Understanding the Skill with Concrete Examples\n\nSkip this step only when the skill's usage patterns are already clearly understood. It remains valuable even when working with an existing skill.\n\nTo create an effective skill, clearly understand concrete examples of how the skill will be used. This understanding can come from either direct user examples or generated examples that are validated with user feedback.\n\nFor example, when building an image-editor skill, relevant questions include:\n\n- \"What functionality should the image-editor skill support? Editing, rotating, anything else?\"\n- \"Can you give some examples of how this skill would be used?\"\n- \"I can imagine users asking for things like 'Remove the red-eye from this image' or 'Rotate this image'. Are there other ways you imagine this skill being used?\"\n- \"What would a user say that should trigger this skill?\"\n\nTo avoid overwhelming users, avoid asking too many questions in a single message. Start with the most important questions and follow up as needed for better effectiveness.\n\nConclude this step when there is a clear sense of the functionality the skill should support.\n\n### Step 2: Planning the Reusable Skill Contents\n\nTo turn concrete examples into an effective skill, analyze each example by:\n\n1. Considering how to execute on the example from scratch\n2. Identifying what scripts, references, and assets would be helpful when executing these workflows repeatedly\n\nExample: When building a `pdf-editor` skill to handle queries like \"Help me rotate this PDF,\" the analysis shows:\n\n1. Rotating a PDF requires re-writing the same code each time\n2. A `scripts/rotate_pdf.py` script would be helpful to store in the skill\n\nExample: When designing a `frontend-webapp-builder` skill for queries like \"Build me a todo app\" or \"Build me a dashboard to track my steps,\" the analysis shows:\n\n1. Writing a frontend webapp requires the same boilerplate HTML/React each time\n2. An `assets/hello-world/` template containing the boilerplate HTML/React project files would be helpful to store in the skill\n\nExample: When building a `big-query` skill to handle queries like \"How many users have logged in today?\" the analysis shows:\n\n1. Querying BigQuery requires re-discovering the table schemas and relationships each time\n2. A `references/schema.md` file documenting the table schemas would be helpful to store in the skill\n\nTo establish the skill's contents, analyze each concrete example to create a list of the reusable resources to include: scripts, references, and assets.\n\n### Step 3: Initializing the Skill\n\nAt this point, it is time to actually create the skill.\n\nSkip this step only if the skill being developed already exists, and iteration or packaging is needed. In this case, continue to the next step.\n\nWhen creating a new skill from scratch, always run the `init_skill.py` script. The script conveniently generates a new template skill directory that automatically includes everything a skill requires, making the skill creation process much more efficient and reliable.\n\nUsage:\n\n```bash\nscripts/init_skill.py <skill-name> --path <output-directory>\n```\n\nThe script:\n\n- Creates the skill directory at the specified path\n- Generates a SKILL.md template with proper frontmatter and TODO placeholders\n- Creates example resource directories: `scripts/`, `references/`, and `assets/`\n- Adds example files in each directory that can be customized or deleted\n\nAfter initialization, customize or remove the generated SKILL.md and example files as needed.\n\n### Step 4: Edit the Skill\n\nWhen editing the (newly-generated or existing) skill, remember that the skill is being created for another instance of Claude to use. Include information that would be beneficial and non-obvious to Claude. Consider what procedural knowledge, domain-specific details, or reusable assets would help another Claude instance execute these tasks more effectively.\n\n#### Learn Proven Design Patterns\n\nConsult these helpful guides based on your skill's needs:\n\n- **Multi-step processes**: See references/workflows.md for sequential workflows and conditional logic\n- **Specific output formats or quality standards**: See references/output-patterns.md for template and example patterns\n\nThese files contain established best practices for effective skill design.\n\n#### Start with Reusable Skill Contents\n\nTo begin implementation, start with the reusable resources identified above: `scripts/`, `references/`, and `assets/` files. Note that this step may require user input. For example, when implementing a `brand-guidelines` skill, the user may need to provide brand assets or templates to store in `assets/`, or documentation to store in `references/`.\n\nAdded scripts must be tested by actually running them to ensure there are no bugs and that the output matches what is expected. If there are many similar scripts, only a representative sample needs to be tested to ensure confidence that they all work while balancing time to completion.\n\nAny example files and directories not needed for the skill should be deleted. The initialization script creates example files in `scripts/`, `references/`, and `assets/` to demonstrate structure, but most skills won't need all of them.\n\n#### Update SKILL.md\n\n**Writing Guidelines:** Always use imperative/infinitive form.\n\n##### Frontmatter\n\nWrite the YAML frontmatter with `name` and `description`:\n\n- `name`: The skill name\n- `description`: This is the primary triggering mechanism for your skill, and helps Claude understand when to use the skill.\n  - Include both what the Skill does and specific triggers/contexts for when to use it.\n  - Include all \"when to use\" information here - Not in the body. The body is only loaded after triggering, so \"When to Use This Skill\" sections in the body are not helpful to Claude.\n  - Example description for a `docx` skill: \"Comprehensive document creation, editing, and analysis with support for tracked changes, comments, formatting preservation, and text extraction. Use when Claude needs to work with professional documents (.docx files) for: (1) Creating new documents, (2) Modifying or editing content, (3) Working with tracked changes, (4) Adding comments, or any other document tasks\"\n\nDo not include any other fields in YAML frontmatter.\n\n##### Body\n\nWrite instructions for using the skill and its bundled resources.\n\n### Step 5: Packaging a Skill\n\nOnce development of the skill is complete, it must be packaged into a distributable .skill file that gets shared with the user. The packaging process automatically validates the skill first to ensure it meets all requirements:\n\n```bash\nscripts/package_skill.py <path/to/skill-folder>\n```\n\nOptional output directory specification:\n\n```bash\nscripts/package_skill.py <path/to/skill-folder> ./dist\n```\n\nThe packaging script will:\n\n1. **Validate** the skill automatically, checking:\n\n   - YAML frontmatter format and required fields\n   - Skill naming conventions and directory structure\n   - Description completeness and quality\n   - File organization and resource references\n\n2. **Package** the skill if validation passes, creating a .skill file named after the skill (e.g., `my-skill.skill`) that includes all files and maintains the proper directory structure for distribution. The .skill file is a zip file with a .skill extension.\n\nIf validation fails, the script will report the errors and exit without creating a package. Fix any validation errors and run the packaging command again.\n\n### Step 6: Iterate\n\nAfter testing the skill, users may request improvements. Often this happens right after using the skill, with fresh context of how the skill performed.\n\n**Iteration workflow:**\n\n1. Use the skill on real tasks\n2. Notice struggles or inefficiencies\n3. Identify how SKILL.md or bundled resources should be updated\n4. Implement changes and test again\n",
        "skills/skill-creator/references/output-patterns.md": "# Output Patterns\n\nUse these patterns when skills need to produce consistent, high-quality output.\n\n## Template Pattern\n\nProvide templates for output format. Match the level of strictness to your needs.\n\n**For strict requirements (like API responses or data formats):**\n\n```markdown\n## Report structure\n\nALWAYS use this exact template structure:\n\n# [Analysis Title]\n\n## Executive summary\n[One-paragraph overview of key findings]\n\n## Key findings\n- Finding 1 with supporting data\n- Finding 2 with supporting data\n- Finding 3 with supporting data\n\n## Recommendations\n1. Specific actionable recommendation\n2. Specific actionable recommendation\n```\n\n**For flexible guidance (when adaptation is useful):**\n\n```markdown\n## Report structure\n\nHere is a sensible default format, but use your best judgment:\n\n# [Analysis Title]\n\n## Executive summary\n[Overview]\n\n## Key findings\n[Adapt sections based on what you discover]\n\n## Recommendations\n[Tailor to the specific context]\n\nAdjust sections as needed for the specific analysis type.\n```\n\n## Examples Pattern\n\nFor skills where output quality depends on seeing examples, provide input/output pairs:\n\n```markdown\n## Commit message format\n\nGenerate commit messages following these examples:\n\n**Example 1:**\nInput: Added user authentication with JWT tokens\nOutput:\n```\nfeat(auth): implement JWT-based authentication\n\nAdd login endpoint and token validation middleware\n```\n\n**Example 2:**\nInput: Fixed bug where dates displayed incorrectly in reports\nOutput:\n```\nfix(reports): correct date formatting in timezone conversion\n\nUse UTC timestamps consistently across report generation\n```\n\nFollow this style: type(scope): brief description, then detailed explanation.\n```\n\nExamples help Claude understand the desired style and level of detail more clearly than descriptions alone.\n",
        "skills/skill-creator/references/workflows.md": "# Workflow Patterns\n\n## Sequential Workflows\n\nFor complex tasks, break operations into clear, sequential steps. It is often helpful to give Claude an overview of the process towards the beginning of SKILL.md:\n\n```markdown\nFilling a PDF form involves these steps:\n\n1. Analyze the form (run analyze_form.py)\n2. Create field mapping (edit fields.json)\n3. Validate mapping (run validate_fields.py)\n4. Fill the form (run fill_form.py)\n5. Verify output (run verify_output.py)\n```\n\n## Conditional Workflows\n\nFor tasks with branching logic, guide Claude through decision points:\n\n```markdown\n1. Determine the modification type:\n   **Creating new content?** â†’ Follow \"Creation workflow\" below\n   **Editing existing content?** â†’ Follow \"Editing workflow\" below\n\n2. Creation workflow: [steps]\n3. Editing workflow: [steps]\n```",
        "skills/skill-evolution/SKILL.md": "---\nname: skill-evolution\ndescription: Skill ç»éªŒè¿›åŒ–ç®¡ç†å™¨ã€‚åœ¨å¯¹è¯ç»“æŸæ—¶åˆ†æç”¨æˆ·åé¦ˆï¼Œæå–æœ€ä½³å®è·µå’Œè§£å†³æ–¹æ¡ˆï¼ŒæŒä¹…åŒ–åˆ° evolution.json å¹¶ç¼åˆåˆ° SKILL.mdã€‚æ”¯æŒä¸‰å±‚æ¶æ„ï¼ˆä¸Šæ¸¸å±‚ã€å…¨å±€å±‚ã€é¡¹ç›®å±‚ï¼‰å®ç°è·¨é¡¹ç›®ç»éªŒç®¡ç†ã€‚å½“ç”¨æˆ·è¯´\"å¤ç›˜\"ã€\"è®°å½•ç»éªŒ\"ã€\"ä¿å­˜è¿™ä¸ªæŠ€å·§\"ã€\"evolve\"æ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚\n---\n\n# Skill Evolution Manager\n\nSkill ç³»ç»Ÿçš„\"è¿›åŒ–ä¸­æ¢\"ã€‚è´Ÿè´£å°†å¯¹è¯ä¸­çš„ç»éªŒæ•™è®­æŒä¹…åŒ–å­˜å‚¨ï¼Œå¹¶è·¨ç‰ˆæœ¬ã€è·¨é¡¹ç›®ä¿ç•™ã€‚\n\n## æ ¸å¿ƒä»·å€¼\n\n**é—®é¢˜**: Skill æ›´æ–°æ—¶ï¼Œç”¨æˆ·ç§¯ç´¯çš„æœ€ä½³å®è·µä¼šä¸¢å¤±ï¼›ä¸åŒé¡¹ç›®é—´çš„ç»éªŒæ— æ³•å…±äº«ã€‚\n\n**è§£å†³æ–¹æ¡ˆ**:\n1. å°†ç”¨æˆ·ç»éªŒå­˜å‚¨åœ¨ç‹¬ç«‹çš„ `evolution.json` æ–‡ä»¶ä¸­\n2. é€šè¿‡æ™ºèƒ½ç¼åˆå°†ç»éªŒè‡ªåŠ¨å†™å…¥ SKILL.md\n3. Skill æ›´æ–°åï¼Œé€šè¿‡å…¨é‡å¯¹é½æ¢å¤ç»éªŒ\n4. **ä¸‰å±‚æ¶æ„**ï¼šæ”¯æŒä¸Šæ¸¸å±‚ã€å…¨å±€å±‚ã€é¡¹ç›®å±‚çš„ç»éªŒåˆ†ç¦»å’Œåˆå¹¶\n\n## ä¸‰å±‚æ¶æ„\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                          ä¸‰å±‚ç»éªŒæ¶æ„                                â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                                      â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚\nâ”‚  â”‚   ä¸Šæ¸¸å±‚ (Upstream)  â”‚  skills-repo åŸå§‹ä»“åº“çš„ç»éªŒ                â”‚\nâ”‚  â”‚   evolution.json     â”‚  æ¥è‡ªç¤¾åŒº/åŸä½œè€…çš„æœ€ä½³å®è·µ                 â”‚\nâ”‚  â”‚   ä½ç½®: skills-repo/skills/<skill>/evolution.json                â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚\nâ”‚            â”‚ ç»§æ‰¿                                                    â”‚\nâ”‚            â–¼                                                         â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚\nâ”‚  â”‚   å…¨å±€å±‚ (Global)    â”‚  ä½ ä¸ªäººçš„é€šç”¨ç»éªŒ                          â”‚\nâ”‚  â”‚   evolution.json     â”‚  å¯é€‰æ‹©æ€§æäº¤ PR åˆ°ä¸Šæ¸¸                    â”‚\nâ”‚  â”‚   ä½ç½®: ~/.claude/evolutions/<skill>/evolution.json              â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚\nâ”‚            â”‚ ç»§æ‰¿                                                    â”‚\nâ”‚            â–¼                                                         â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚\nâ”‚  â”‚   é¡¹ç›®å±‚ (Project)   â”‚  é¡¹ç›®ç‰¹å®šç»éªŒ                              â”‚\nâ”‚  â”‚   <skill>.json       â”‚  ä¸æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶                          â”‚\nâ”‚  â”‚   ä½ç½®: <project>/.claude/evolutions/<skill>.json                â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚\nâ”‚                                                                      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### åˆå¹¶ä¼˜å…ˆçº§\n\n```\næœ€ç»ˆç”Ÿæ•ˆçš„ç»éªŒ = merge(\n    ä¸Šæ¸¸å±‚,      # æœ€ä½ä¼˜å…ˆçº§\n    å…¨å±€å±‚,      # ä¸­ç­‰ä¼˜å…ˆçº§\n    é¡¹ç›®å±‚       # æœ€é«˜ä¼˜å…ˆçº§\n)\n```\n\n- **åˆ—è¡¨å­—æ®µ** (preferences, fixes, contexts): è¿½åŠ å»é‡\n- **custom_prompts**: é¡¹ç›®å±‚ > å…¨å±€å±‚ > ä¸Šæ¸¸å±‚ï¼ˆè¦†ç›–ï¼‰\n\n## æ ¸å¿ƒåŠŸèƒ½\n\n1. **å¤ç›˜è¯Šæ–­**: åˆ†æå¯¹è¯ä¸­çš„é—®é¢˜ç‚¹å’ŒæˆåŠŸæ–¹æ¡ˆ\n2. **ç»éªŒæå–**: å°†éç»“æ„åŒ–åé¦ˆè½¬ä¸ºç»“æ„åŒ– JSON\n3. **å¢é‡åˆå¹¶**: å»é‡åˆå¹¶æ–°ç»éªŒåˆ° evolution.json\n4. **æ™ºèƒ½ç¼åˆ**: å°†ç»éªŒè‡ªåŠ¨å†™å…¥ SKILL.md çš„ä¸“ç”¨ç« èŠ‚\n5. **è·¨ç‰ˆæœ¬å¯¹é½**: Skill æ›´æ–°åé‡æ–°ç¼åˆç»éªŒ\n6. **è·¨é¡¹ç›®ç®¡ç†**: promote/pull å‘½ä»¤åœ¨å±‚çº§é—´åŒæ­¥ç»éªŒ\n\n## ä½¿ç”¨åœºæ™¯\n\n**è§¦å‘æ–¹å¼**:\n- `/skill-evolution` æˆ– `/evolve`\n- \"å¤ç›˜ä¸€ä¸‹åˆšæ‰çš„å¯¹è¯\"\n- \"è®°å½•ä¸€ä¸‹è¿™ä¸ªç»éªŒ\"\n- \"æŠŠè¿™ä¸ªæŠ€å·§ä¿å­˜åˆ° Skill é‡Œ\"\n- \"è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆè¦è®°ä½\"\n\n## å·¥ä½œæµç¨‹\n\n### æ­¥éª¤ 1: å¤ç›˜è¯Šæ–­\n\nAgent åˆ†æå½“å‰å¯¹è¯ï¼Œè¯†åˆ«ï¼š\n- **é—®é¢˜ç‚¹**: æŠ¥é”™ã€å‚æ•°é”™è¯¯ã€é£æ ¼ä¸å¯¹\n- **æˆåŠŸæ–¹æ¡ˆ**: æœ‰æ•ˆçš„è§£å†³æ–¹æ³•ã€æœ€ä½³å®è·µ\n- **ç”¨æˆ·åå¥½**: ç”¨æˆ·æ˜ç¡®è¡¨è¾¾çš„å–œå¥½\n\n### æ­¥éª¤ 2: ç”Ÿæˆç»“æ„åŒ– JSON\n\nAgent å°†æå–çš„ç»éªŒè½¬æ¢ä¸º JSON æ ¼å¼ï¼š\n\n```json\n{\n  \"preferences\": [\n    \"ç”¨æˆ·å¸Œæœ›ä¸‹è½½æ—¶é»˜è®¤é™éŸ³\",\n    \"ä¼˜å…ˆä½¿ç”¨ mp4 æ ¼å¼\"\n  ],\n  \"fixes\": [\n    \"Windows ä¸‹è·¯å¾„éœ€è¦è½¬ä¹‰\",\n    \"æŸäº›å‚æ•°åœ¨ v2.0 åå·²å¼ƒç”¨\"\n  ],\n  \"contexts\": [\n    \"æ‰¹é‡æ“ä½œæ—¶éœ€è¦æ·»åŠ  --batch å‚æ•°\",\n    \"å¤„ç†å¤§æ–‡ä»¶æ—¶å¢åŠ è¶…æ—¶æ—¶é—´\"\n  ],\n  \"custom_prompts\": \"åœ¨æ‰§è¡Œå‰æ€»æ˜¯å…ˆæ‰“å°é¢„ä¼°è€—æ—¶\"\n}\n```\n\n### æ­¥éª¤ 3: é€‰æ‹©ä¿å­˜å±‚çº§\n\nAgent è¯¢é—®ç”¨æˆ·ï¼š\n- **å…¨å±€å±‚**: æ‰€æœ‰é¡¹ç›®å…±äº«çš„é€šç”¨ç»éªŒ\n- **é¡¹ç›®å±‚**: ä»…å½“å‰é¡¹ç›®ä½¿ç”¨çš„ç‰¹å®šç»éªŒ\n\n### æ­¥éª¤ 4: å¢é‡åˆå¹¶\n\nè¿è¡Œ `scripts/merge_evolution.py` å°†ç»éªŒåˆå¹¶ï¼š\n\n```bash\n# ä¼ ç»Ÿæ¨¡å¼ï¼ˆä¿å­˜åˆ° skill ç›®å½•ï¼‰\npython scripts/merge_evolution.py <skill_dir> '<json_string>'\n\n# åˆ†å±‚æ¨¡å¼ï¼ˆä¿å­˜åˆ°å…¨å±€å±‚ï¼‰\npython scripts/merge_evolution.py <skill_name> '<json_string>' --layer global\n\n# åˆ†å±‚æ¨¡å¼ï¼ˆä¿å­˜åˆ°é¡¹ç›®å±‚ï¼‰\npython scripts/merge_evolution.py <skill_name> '<json_string>' --layer project --project /path/to/project\n```\n\n### æ­¥éª¤ 5: æ™ºèƒ½ç¼åˆ\n\nè¿è¡Œ `scripts/smart_stitch.py` å°†ç»éªŒå†™å…¥ SKILL.mdï¼š\n\n```bash\n# å•å±‚æ¨¡å¼\npython scripts/smart_stitch.py <skill_dir>\n\n# åˆ†å±‚æ¨¡å¼ï¼ˆåˆå¹¶ä¸‰å±‚ç»éªŒï¼‰\npython scripts/smart_stitch.py <skill_dir> --layered --project /path/to/project\n```\n\n### æ­¥éª¤ 6: è·¨ç‰ˆæœ¬å¯¹é½\n\nå½“ `skill-manager` æ›´æ–° Skill åï¼Œè¿è¡Œå…¨é‡å¯¹é½æ¢å¤ç»éªŒï¼š\n\n```bash\npython scripts/align_all.py <skills_dir>\n```\n\n## è„šæœ¬è¯´æ˜\n\n| è„šæœ¬ | åŠŸèƒ½ | å‚æ•° |\n|------|------|------|\n| `layered_merge.py` | åˆ†å±‚ç»éªŒç®¡ç†æ ¸å¿ƒ | `<action> <skill_name> [options]` |\n| `merge_evolution.py` | å¢é‡åˆå¹¶ç»éªŒ | `<skill_dir> <json> [--layer] [--project]` |\n| `smart_stitch.py` | ç¼åˆåˆ° SKILL.md | `<skill_dir> [--layered] [--project]` |\n| `align_all.py` | å…¨é‡å¯¹é½ | `<skills_dir> [--dry-run] [--backup]` |\n\n### layered_merge.py å‘½ä»¤\n\n```bash\n# æŸ¥çœ‹ç»éªŒçŠ¶æ€\npython scripts/layered_merge.py status <skill_name> [--project <path>]\n\n# åˆå¹¶ä¸‰å±‚ç»éªŒï¼ˆæŸ¥çœ‹ç»“æœï¼‰\npython scripts/layered_merge.py merge <skill_name> [--project <path>]\n\n# å°†é¡¹ç›®ç»éªŒæå‡åˆ°å…¨å±€å±‚\npython scripts/layered_merge.py promote <skill_name> [--project <path>] [--fields f1,f2]\n\n# ä»å…¨å±€å±‚æ‹‰å–ç»éªŒåˆ°é¡¹ç›®å±‚\npython scripts/layered_merge.py pull <skill_name> [--project <path>]\n\n# ä¿å­˜ç»éªŒåˆ°æŒ‡å®šå±‚\npython scripts/layered_merge.py save <skill_name> <layer> '<json>' [--project <path>]\n```\n\n## evolution.json æ ¼å¼\n\n```json\n{\n  \"preferences\": [\"string\"],\n  \"fixes\": [\"string\"],\n  \"contexts\": [\"string\"],\n  \"custom_prompts\": \"string\",\n  \"last_updated\": \"ISO-8601 datetime\",\n  \"last_evolved_hash\": \"commit hash\"\n}\n```\n\n| å­—æ®µ | è¯´æ˜ |\n|------|------|\n| `preferences` | ç”¨æˆ·åå¥½åˆ—è¡¨ |\n| `fixes` | å·²çŸ¥é—®é¢˜ä¿®å¤æ–¹æ¡ˆ |\n| `contexts` | ç‰¹å®šä½¿ç”¨åœºæ™¯è¯´æ˜ |\n| `custom_prompts` | è‡ªå®šä¹‰æŒ‡ä»¤æ³¨å…¥ |\n| `last_updated` | æœ€åæ›´æ–°æ—¶é—´ |\n| `last_evolved_hash` | æœ€åè¿›åŒ–æ—¶çš„ source_hash |\n\n## æœ€ä½³å®è·µ\n\n1. **é€šè¿‡ evolution.json ä¿®æ”¹**: ä¸è¦ç›´æ¥ç¼–è¾‘ SKILL.md ä¸­çš„ç»éªŒç« èŠ‚\n2. **å®šæœŸå¤ç›˜**: æ¯æ¬¡ä½¿ç”¨ Skill é‡åˆ°é—®é¢˜æˆ–å‘ç°æŠ€å·§æ—¶ï¼ŒåŠæ—¶è®°å½•\n3. **æ›´æ–°åå¯¹é½**: æ¯æ¬¡ skill-manager æ›´æ–° Skill åï¼Œè¿è¡Œ align_all.py\n4. **å¤‡ä»½é‡è¦ç»éªŒ**: ä½¿ç”¨ `--backup` é€‰é¡¹ä¿æŠ¤é‡è¦çš„ç»éªŒæ•°æ®\n5. **åˆç†é€‰æ‹©å±‚çº§**:\n   - é€šç”¨ç»éªŒ â†’ å…¨å±€å±‚\n   - é¡¹ç›®ç‰¹å®šç»éªŒ â†’ é¡¹ç›®å±‚\n   - é«˜è´¨é‡ç»éªŒ â†’ è€ƒè™‘ PR åˆ°ä¸Šæ¸¸\n\n## ç¤ºä¾‹\n\n### ç¤ºä¾‹ 1: è®°å½•ç”¨æˆ·åå¥½åˆ°å…¨å±€å±‚\n\n```\nç”¨æˆ·: è®°å½•ä¸€ä¸‹ï¼Œæˆ‘å¸Œæœ›ä¸‹è½½è§†é¢‘æ—¶é»˜è®¤ä¸å¸¦å­—å¹•ï¼Œè¿™ä¸ªæ˜¯é€šç”¨è®¾ç½®\n\nAgent:\n1. è¯†åˆ«è¿™æ˜¯ä¸€ä¸ªç”¨æˆ·åå¥½ï¼Œä¸”æ˜¯é€šç”¨è®¾ç½®\n2. ç”Ÿæˆ JSON: {\"preferences\": [\"ä¸‹è½½è§†é¢‘æ—¶é»˜è®¤ä¸å¸¦å­—å¹•\"]}\n3. è¿è¡Œ merge_evolution.py --layer global åˆå¹¶åˆ°å…¨å±€å±‚\n4. è¿è¡Œ smart_stitch.py --layered æ›´æ–° SKILL.md\n```\n\n### ç¤ºä¾‹ 2: è®°å½•é¡¹ç›®ç‰¹å®šä¿®å¤\n\n```\nç”¨æˆ·: è¿™ä¸ªé¡¹ç›®çš„è·¯å¾„æ¯”è¾ƒç‰¹æ®Šï¼Œè®°ä½è¦ç”¨ç»å¯¹è·¯å¾„\n\nAgent:\n1. è¯†åˆ«è¿™æ˜¯é¡¹ç›®ç‰¹å®šçš„ä¿®å¤æ–¹æ¡ˆ\n2. ç”Ÿæˆ JSON: {\"fixes\": [\"æ­¤é¡¹ç›®å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„\"]}\n3. è¿è¡Œ merge_evolution.py --layer project åˆå¹¶åˆ°é¡¹ç›®å±‚\n```\n\n### ç¤ºä¾‹ 3: æå‡ç»éªŒåˆ°å…¨å±€\n\n```\nç”¨æˆ·: æŠŠè¿™ä¸ªé¡¹ç›®é‡Œå­¦åˆ°çš„ç»éªŒæå‡åˆ°å…¨å±€ï¼Œå…¶ä»–é¡¹ç›®ä¹Ÿèƒ½ç”¨\n\nAgent:\n1. è¿è¡Œ layered_merge.py promote <skill_name>\n2. é¡¹ç›®å±‚çš„ç»éªŒè¢«å¤åˆ¶åˆ°å…¨å±€å±‚\n3. æŠ¥å‘Šæå‡ç»“æœ\n```\n\n### ç¤ºä¾‹ 4: æ–°é¡¹ç›®åˆå§‹åŒ–\n\n```\nç”¨æˆ·: è¿™æ˜¯æ–°é¡¹ç›®ï¼ŒæŠŠå…¨å±€ç»éªŒæ‹‰ä¸‹æ¥\n\nAgent:\n1. è¿è¡Œ layered_merge.py pull <skill_name>\n2. å…¨å±€å±‚çš„ç»éªŒè¢«å¤åˆ¶åˆ°é¡¹ç›®å±‚\n3. å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šç»§ç»­ç§¯ç´¯é¡¹ç›®ç‰¹å®šç»éªŒ\n```\n\n## ä¸å…¶ä»– Skill çš„åä½œ\n\n- **skill-factory**: åˆ›å»ºçš„ Skills è‡ªåŠ¨å¯ç”¨ evolutionï¼ˆ`evolution_enabled: true`ï¼‰\n- **skill-manager**: æ›´æ–° Skill ååº”è°ƒç”¨ align_all.py æ¢å¤ç»éªŒï¼›æä¾› promote/pull å‘½ä»¤\n- **skill-creator**: éµå¾ªç›¸åŒçš„ç»éªŒç« èŠ‚æ ¼å¼\n",
        "skills/skill-factory/SKILL.md": "---\nname: skill-factory\ndescription: è‡ªåŠ¨åŒ–å·¥å‚ï¼Œå°† GitHub ä»“åº“è½¬æ¢ä¸ºæ ‡å‡†åŒ–çš„ AI Skillã€‚å½“ç”¨æˆ·æä¾› GitHub URL å¹¶å¸Œæœ›\"æ‰“åŒ…\"ã€\"å°è£…\"æˆ–\"åˆ›å»º Skill\"æ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚æ”¯æŒè‡ªåŠ¨è·å–ä»“åº“å…ƒæ•°æ®ã€ç”Ÿæˆæ ‡å‡†ç›®å½•ç»“æ„ã€æ³¨å…¥ç”Ÿå‘½å‘¨æœŸç®¡ç†æ‰€éœ€çš„æ‰©å±•å…ƒæ•°æ®ã€‚\n---\n\n# Skill Factory\n\nå°†ä»»æ„ GitHub ä»“åº“ä¸€é”®è½¬æ¢ä¸ºæ ‡å‡†åŒ–çš„ Claude Skillã€‚\n\n## æ ¸å¿ƒåŠŸèƒ½\n\n1. **ä¿¡æ¯è·å–**: é€šè¿‡ `git ls-remote` è·å– commit hashï¼Œé€šè¿‡ HTTP è·å– README\n2. **ç›®å½•ç”Ÿæˆ**: åˆ›å»ºæ ‡å‡†åŒ–çš„ Skill ç›®å½•ç»“æ„ï¼ˆSKILL.md, scripts/, references/, assets/ï¼‰\n3. **å…ƒæ•°æ®æ³¨å…¥**: è‡ªåŠ¨å¡«å……æ‰©å±•å…ƒæ•°æ®å­—æ®µï¼ˆsource_url, source_hash, version ç­‰ï¼‰\n4. **å ä½è„šæœ¬**: ç”Ÿæˆ wrapper.py æ¨¡æ¿ï¼Œä¾¿äºåç»­å®ç°\n\n## ä½¿ç”¨åœºæ™¯\n\n**è§¦å‘æ–¹å¼**:\n- `/skill-factory <github_url>`\n- \"å°†è¿™ä¸ªä»“åº“æ‰“åŒ…æˆ Skill: <url>\"\n- \"ä» GitHub åˆ›å»º Skill: <url>\"\n- \"å°è£…è¿™ä¸ªå·¥å…·: <url>\"\n\n## å·¥ä½œæµç¨‹\n\n### æ­¥éª¤ 1: è·å–ä»“åº“ä¿¡æ¯\n\nè¿è¡Œ `scripts/fetch_github_info.py` è·å–ä»“åº“å…ƒæ•°æ®:\n\n```bash\npython scripts/fetch_github_info.py <github_url>\n```\n\nè¾“å‡º JSON æ ¼å¼:\n```json\n{\n  \"name\": \"repo-name\",\n  \"owner\": \"owner\",\n  \"url\": \"https://github.com/owner/repo\",\n  \"latest_hash\": \"abc123...\",\n  \"default_branch\": \"main\",\n  \"description\": \"ä»“åº“æè¿°\",\n  \"readme\": \"README å†…å®¹...\"\n}\n```\n\n### æ­¥éª¤ 2: åˆ†æ README\n\nAgent åˆ†æ README å†…å®¹ï¼Œç†è§£:\n- å·¥å…·çš„ä¸»è¦åŠŸèƒ½\n- å®‰è£…å’Œä½¿ç”¨æ–¹æ³•\n- CLI å‚æ•°æˆ– API æ¥å£\n- ä¾èµ–è¦æ±‚\n\n### æ­¥éª¤ 3: åˆ›å»º Skill ç›®å½•\n\nè¿è¡Œ `scripts/create_skill.py` ç”Ÿæˆç›®å½•ç»“æ„:\n\n```bash\npython scripts/create_skill.py <json_file_or_string> <output_dir>\n```\n\nç”Ÿæˆçš„ç›®å½•ç»“æ„:\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md              # ä¸» Skill æ–‡ä»¶ï¼ˆå«æ‰©å±•å…ƒæ•°æ®ï¼‰\nâ”œâ”€â”€ scripts/\nâ”‚   â””â”€â”€ wrapper.py        # å ä½è„šæœ¬\nâ”œâ”€â”€ references/\nâ”‚   â””â”€â”€ .gitkeep\nâ””â”€â”€ assets/\n    â””â”€â”€ .gitkeep\n```\n\n### æ­¥éª¤ 4: å®Œå–„ Skill\n\nAgent æ ¹æ® README åˆ†æç»“æœ:\n1. å®Œå–„ SKILL.md çš„æè¿°å’Œä½¿ç”¨è¯´æ˜\n2. å®ç° wrapper.py çš„å®é™…é€»è¾‘\n3. æ·»åŠ å¿…è¦çš„å‚è€ƒæ–‡æ¡£\n\n### æ­¥éª¤ 5: éªŒè¯\n\nç¡®è®¤:\n- [ ] SKILL.md çš„ frontmatter æ ¼å¼æ­£ç¡®\n- [ ] source_hash å·²æ­£ç¡®è®°å½•\n- [ ] description åŒ…å«è§¦å‘æ¡ä»¶\n- [ ] wrapper.py å¯æ‰§è¡Œï¼ˆå¦‚å·²å®ç°ï¼‰\n\n## ç”Ÿæˆçš„å…ƒæ•°æ®æ ¼å¼\n\næ¯ä¸ªç”± skill-factory åˆ›å»ºçš„ Skill å¿…é¡»åŒ…å«ä»¥ä¸‹æ‰©å±•å…ƒæ•°æ®:\n\n```yaml\n---\nname: skill-name\ndescription: è¯¦ç»†æè¿°ï¼ŒåŒ…å«è§¦å‘æ¡ä»¶\n\n# ç”Ÿå‘½å‘¨æœŸç®¡ç†å­—æ®µï¼ˆå¿…éœ€ï¼‰\nsource_url: https://github.com/owner/repo\nsource_hash: abc123def456...\nversion: 0.1.0\ncreated_at: 2026-01-23\nupdated_at: 2026-01-23\nevolution_enabled: true\n\n# å¯é€‰å­—æ®µ\nentry_point: scripts/wrapper.py\ndependencies:\n  - dependency1\n  - dependency2\n---\n```\n\n## è„šæœ¬è¯´æ˜\n\n| è„šæœ¬ | åŠŸèƒ½ |\n|------|------|\n| `scripts/fetch_github_info.py` | è·å– GitHub ä»“åº“å…ƒæ•°æ®ï¼ˆè½»é‡çº§ï¼Œæ— éœ€ cloneï¼‰ |\n| `scripts/create_skill.py` | åˆ›å»ºæ ‡å‡†åŒ– Skill ç›®å½•ç»“æ„ |\n| `scripts/import_github_skill.py` | **å®Œæ•´å¯¼å…¥** GitHub ä»“åº“ä¸ºæœ¬åœ° Skillï¼ˆæ”¯æŒå¹¶è¡Œä¸‹è½½ï¼‰ |\n\n### import_github_skill.pyï¼ˆæ¨èï¼‰\n\né«˜æ•ˆåœ°ä» GitHub ä»“åº“ä¸‹è½½æ‰€æœ‰æ–‡ä»¶å¹¶åˆ›å»ºæœ¬åœ° Skillã€‚\n\n**ç‰¹ç‚¹ï¼š**\n- ä½¿ç”¨ GitHub API è·å–ç›®å½•ç»“æ„ï¼ˆå•æ¬¡è¯·æ±‚ï¼‰\n- å¹¶è¡Œä¸‹è½½æ‰€æœ‰æ–‡ä»¶ï¼ˆ10 çº¿ç¨‹ï¼‰\n- API é™æµæ—¶è‡ªåŠ¨åˆ‡æ¢åˆ° git clone å¤‡é€‰æ–¹æ¡ˆ\n- æ”¯æŒè‡ªå®šä¹‰ Skill åç§°\n- æ”¯æŒç§»é™¤æºä¿¡æ¯ï¼ˆ`--no-source`ï¼‰\n\n**ç”¨æ³•ï¼š**\n```bash\n# åŸºæœ¬ç”¨æ³•\npython scripts/import_github_skill.py <github_url> <output_dir>\n\n# è‡ªå®šä¹‰åç§°\npython scripts/import_github_skill.py <github_url> <output_dir> --name my-skill\n\n# ä¸ä¿ç•™æºä¿¡æ¯ï¼ˆä½œä¸ºå…¨æ–°æœ¬åœ° Skillï¼‰\npython scripts/import_github_skill.py <github_url> <output_dir> --no-source\n\n# ç»„åˆä½¿ç”¨\npython scripts/import_github_skill.py https://github.com/user/repo ./skills --name my-skill --no-source\n```\n\n**ç¤ºä¾‹ï¼š**\n```bash\n# å¯¼å…¥å¹¶é‡å‘½å\npython scripts/import_github_skill.py https://github.com/PenglongHuang/chinese-novelist-skill ./skills --name chinese-novelist --no-source\n```\n\n## æœ€ä½³å®è·µ\n\n1. **æ¸è¿›å¼æŠ«éœ²**: ä¸è¦å°†æ•´ä¸ªä»“åº“å†…å®¹å¡å…¥ Skillï¼ŒåªåŒ…å«å¿…è¦çš„å°è£…ä»£ç \n2. **ä¾èµ–éš”ç¦»**: ç”Ÿæˆçš„ Skill åº”æ˜ç¡®å£°æ˜ä¾èµ–ï¼Œå»ºè®®ä½¿ç”¨ venv æˆ– uv ç®¡ç†\n3. **å¹‚ç­‰æ€§**: `source_hash` å­—æ®µå…è®¸ skill-manager åç»­æ£€æŸ¥æ›´æ–°\n4. **æè¿°å®Œæ•´**: description å¿…é¡»åŒ…å«\"åšä»€ä¹ˆ\"å’Œ\"ä½•æ—¶ä½¿ç”¨\"\n\n## ç¤ºä¾‹\n\n### ç¤ºä¾‹ 1: å°è£… yt-dlp\n\n```\nç”¨æˆ·: /skill-factory https://github.com/yt-dlp/yt-dlp\n\nAgent:\n1. è¿è¡Œ fetch_github_info.py è·å–ä»“åº“ä¿¡æ¯\n2. åˆ†æ READMEï¼Œäº†è§£ yt-dlp æ˜¯è§†é¢‘ä¸‹è½½å·¥å…·\n3. è¿è¡Œ create_skill.py åˆ›å»ºç›®å½•\n4. å®Œå–„ SKILL.mdï¼Œæ·»åŠ å¸¸ç”¨å‘½ä»¤ç¤ºä¾‹\n5. å®ç° wrapper.pyï¼Œå°è£…ä¸‹è½½åŠŸèƒ½\n```\n\n### ç¤ºä¾‹ 2: å°è£… ffmpeg-python\n\n```\nç”¨æˆ·: æŠŠ https://github.com/kkroening/ffmpeg-python æ‰“åŒ…æˆ Skill\n\nAgent:\n1. è·å–ä»“åº“ä¿¡æ¯\n2. åˆ†æ READMEï¼Œäº†è§£è¿™æ˜¯ FFmpeg çš„ Python ç»‘å®š\n3. åˆ›å»º Skill ç›®å½•\n4. å®Œå–„æ–‡æ¡£ï¼Œæ·»åŠ å¸¸ç”¨è½¬æ¢ç¤ºä¾‹\n5. å®ç° wrapper.pyï¼Œå°è£…å¸¸ç”¨æ“ä½œ\n```\n\n## ä¸å…¶ä»– Skill çš„åä½œ\n\n- **skill-manager**: ä½¿ç”¨ source_url å’Œ source_hash æ£€æŸ¥æ›´æ–°\n- **skill-evolution**: ä½¿ç”¨ evolution_enabled æ§åˆ¶æ˜¯å¦è®°å½•ç”¨æˆ·ç»éªŒ\n- **skill-creator**: éµå¾ªç›¸åŒçš„ç›®å½•ç»“æ„å’Œå…ƒæ•°æ®è§„èŒƒ\n",
        "skills/skill-lookup/SKILL.md": "---\nname: skill-lookup\ndescription: Activates when the user asks about Agent Skills, wants to find reusable AI capabilities, needs to install skills, or mentions skills for Claude. Use for discovering, retrieving, and installing skills.\n---\n\nWhen the user needs Agent Skills, wants to extend Claude's capabilities, or is looking for reusable AI agent components, use the prompts.chat MCP server.\n\n## When to Use This Skill\n\nActivate this skill when the user:\n\n- Asks for Agent Skills (\"Find me a code review skill\")\n- Wants to search for skills (\"What skills are available for testing?\")\n- Needs to retrieve a specific skill (\"Get skill XYZ\")\n- Wants to install a skill (\"Install the documentation skill\")\n- Mentions extending Claude's capabilities with skills\n\n## Available Tools\n\nUse these prompts.chat MCP tools:\n\n- `search_skills` - Search for skills by keyword\n- `get_skill` - Get a specific skill by ID with all its files\n\n## How to Search for Skills\n\nCall `search_skills` with:\n\n- `query`: The search keywords from the user's request\n- `limit`: Number of results (default 10, max 50)\n- `category`: Filter by category slug (e.g., \"coding\", \"automation\")\n- `tag`: Filter by tag slug\n\nPresent results showing:\n- Title and description\n- Author name\n- File list (SKILL.md, reference docs, scripts)\n- Category and tags\n- Link to the skill\n\n## How to Get a Skill\n\nCall `get_skill` with:\n\n- `id`: The skill ID\n\nReturns the skill metadata and all file contents:\n- SKILL.md (main instructions)\n- Reference documentation\n- Helper scripts\n- Configuration files\n\n## How to Install a Skill\n\nWhen the user asks to install a skill:\n\n1. Call `get_skill` to retrieve all files\n2. Create the directory `.claude/skills/{slug}/`\n3. Save each file to the appropriate location:\n   - `SKILL.md` â†’ `.claude/skills/{slug}/SKILL.md`\n   - Other files â†’ `.claude/skills/{slug}/{filename}`\n\n## Skill Structure\n\nSkills contain:\n- **SKILL.md** (required) - Main instructions with frontmatter\n- **Reference docs** - Additional documentation files\n- **Scripts** - Helper scripts (Python, shell, etc.)\n- **Config files** - JSON, YAML configurations\n\n## Guidelines\n\n- Always search before suggesting the user create their own skill\n- Present search results in a readable format with file counts\n- When installing, confirm the skill was saved successfully\n- Explain what the skill does and when it activates\n",
        "skills/skill-manager/SKILL.md": "---\nname: skill-manager\ndescription: Skill ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨ã€‚ç”¨äºæ‰¹é‡æ‰«æ Skills ç›®å½•ã€æ£€æŸ¥ GitHub æ›´æ–°ã€æ‰§è¡Œç‰ˆæœ¬å‡çº§ã€ç®¡ç† Skills åº“å­˜ã€ç®¡ç†ç»éªŒå±‚ï¼ˆpromote/pullï¼‰ã€‚å½“ç”¨æˆ·éœ€è¦\"æ£€æŸ¥æ›´æ–°\"ã€\"åˆ—å‡º Skills\"ã€\"åˆ é™¤ Skill\"ã€\"ç®¡ç† Skills\"ã€\"æå‡ç»éªŒ\"ã€\"æ‹‰å–ç»éªŒ\"æ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚\n---\n\n# Skill Manager\n\nç®¡ç† Skills çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼šæ‰«æã€æ£€æŸ¥æ›´æ–°ã€å‡çº§ã€åˆ é™¤ã€ç»éªŒå±‚ç®¡ç†ã€‚\n\n## æ ¸å¿ƒåŠŸèƒ½\n\n1. **æ‰«æå®¡è®¡**: æ‰«æ Skills ç›®å½•ï¼Œè§£ææ‰€æœ‰ SKILL.md çš„ frontmatter å…ƒæ•°æ®\n2. **ç‰ˆæœ¬æ£€æŸ¥**: å¹¶å‘æŸ¥è¯¢ GitHubï¼ˆé€šè¿‡ `git ls-remote`ï¼‰æ¯”è¾ƒæœ¬åœ°å’Œè¿œç¨‹ hash\n3. **çŠ¶æ€æŠ¥å‘Š**: ç”ŸæˆçŠ¶æ€æŠ¥å‘Šï¼Œæ ‡è¯† outdated/current/unmanaged/error\n4. **æ›´æ–°å·¥ä½œæµ**: å¼•å¯¼ Agent æ‰§è¡Œ Skill å‡çº§\n5. **åº“å­˜ç®¡ç†**: åˆ—å‡ºã€åˆ é™¤ Skills\n6. **ç»éªŒå±‚ç®¡ç†**: promote/pull å‘½ä»¤åœ¨å±‚çº§é—´åŒæ­¥ç»éªŒ\n\n## å¯åŠ¨æµç¨‹ï¼ˆé‡è¦ï¼‰\n\n**æ¯æ¬¡è°ƒç”¨ skill-manager æ—¶ï¼Œå¿…é¡»é¦–å…ˆæ‰§è¡Œä»¥ä¸‹æµç¨‹ç¡®å®š Skills ç›®å½•ï¼š**\n\n### æ­¥éª¤ 1: æ£€æŸ¥é…ç½®\n\nè¿è¡Œ `python scripts/config.py get` æ£€æŸ¥æ˜¯å¦å·²é…ç½® Skills ç›®å½•ã€‚\n\n### æ­¥éª¤ 2: æ ¹æ®é…ç½®çŠ¶æ€å¤„ç†\n\n**æƒ…å†µ A - å·²é…ç½®**:\n1. å‘ç”¨æˆ·ç¡®è®¤ï¼š\"å°†ç®¡ç† `<skills_dir>` ä¸­çš„ Skillsï¼Œç¡®è®¤ç»§ç»­ï¼Ÿ\"\n2. ç”¨æˆ·ç¡®è®¤ â†’ ç»§ç»­æ‰§è¡Œæ“ä½œ\n3. ç”¨æˆ·æ‹’ç» â†’ è¯¢é—®æ–°è·¯å¾„ï¼Œè¿è¡Œ `python scripts/config.py set <new_path>`\n\n**æƒ…å†µ B - æœªé…ç½®**:\n1. è¿è¡Œ `python scripts/config.py detect` è‡ªåŠ¨æ£€æµ‹\n2. æ£€æµ‹æˆåŠŸ â†’ å‘ç”¨æˆ·ç¡®è®¤æ£€æµ‹åˆ°çš„è·¯å¾„ï¼Œç¡®è®¤åç»§ç»­\n3. æ£€æµ‹å¤±è´¥ â†’ è¯¢é—®ç”¨æˆ· Skills ç›®å½•è·¯å¾„ï¼Œç„¶åè¿è¡Œ `python scripts/config.py set <path>`\n\n### ç¤ºä¾‹å¯¹è¯\n\n```\nAgent: æ£€æŸ¥ skill-manager é…ç½®...\nAgent: å·²é…ç½® Skills ç›®å½•: /Users/xxx/.claude/skills\nAgent: å°†ç®¡ç†è¯¥ç›®å½•ä¸­çš„ Skillsï¼Œç¡®è®¤ç»§ç»­ï¼Ÿ\nUser: ç¡®è®¤\nAgent: [æ‰§è¡Œç”¨æˆ·è¯·æ±‚çš„æ“ä½œ]\n```\n\n```\nAgent: æ£€æŸ¥ skill-manager é…ç½®...\nAgent: æœªæ‰¾åˆ°é…ç½®ï¼Œæ­£åœ¨è‡ªåŠ¨æ£€æµ‹...\nAgent: æ£€æµ‹åˆ° Skills ç›®å½•: /Users/xxx/.claude/skills\nAgent: æ˜¯å¦ä½¿ç”¨è¯¥ç›®å½•ï¼Ÿ\nUser: æ˜¯\nAgent: å·²ä¿å­˜é…ç½®ã€‚[æ‰§è¡Œç”¨æˆ·è¯·æ±‚çš„æ“ä½œ]\n```\n\n**æ³¨æ„**: ä¸è¦æ¢ç´¢å½“å‰å·¥ä½œç›®å½•æ¥å¯»æ‰¾ Skillsï¼ŒSkills ç›®å½•æ˜¯ç”¨æˆ·ä¸“é—¨å­˜æ”¾ Skills çš„ä½ç½®ï¼Œä¸å½“å‰é¡¹ç›®æ— å…³ã€‚\n\n---\n\n## ä½¿ç”¨åœºæ™¯\n\n### æ£€æŸ¥æ›´æ–°\n\n**è§¦å‘æ–¹å¼**:\n- `/skill-manager check`\n- \"æ£€æŸ¥æˆ‘çš„ Skills æ˜¯å¦æœ‰æ›´æ–°\"\n- \"æ‰«æ Skills æ›´æ–°\"\n\n**å·¥ä½œæµ**:\n1. Agent è¿è¡Œ `scripts/scan_and_check.py <skills_dir>`\n2. è„šæœ¬å¹¶å‘æ£€æŸ¥æ‰€æœ‰å¸¦æœ‰ `source_url` çš„ Skills\n3. è¾“å‡º JSON æ ¼å¼çš„çŠ¶æ€æŠ¥å‘Š\n4. Agent å‘ç”¨æˆ·å‘ˆç°ç»“æœ\n\n**ç¤ºä¾‹è¾“å‡º**:\n```\nSkills çŠ¶æ€æ‘˜è¦\n========================================\næ€»è®¡: 12 ä¸ª Skills\n  - æœ€æ–°: 8\n  - éœ€æ›´æ–°: 2\n  - éæ‰˜ç®¡: 1\n  - é”™è¯¯: 1\n\néœ€è¦æ›´æ–°çš„ Skills:\n  - yt-dlp: New commits available\n    æœ¬åœ°: abc123...\n    è¿œç¨‹: def456...\n```\n\n### åˆ—å‡º Skills\n\n**è§¦å‘æ–¹å¼**:\n- `/skill-manager list`\n- \"åˆ—å‡ºæˆ‘çš„ Skills\"\n- \"æ˜¾ç¤ºæ‰€æœ‰ Skills\"\n\n**å·¥ä½œæµ**:\n1. Agent è¿è¡Œ `scripts/list_skills.py <skills_dir>`\n2. è¾“å‡ºè¡¨æ ¼æˆ– JSON æ ¼å¼çš„ Skills åˆ—è¡¨\n\n**ç¤ºä¾‹è¾“å‡º**:\n```\nName                   | Type     | Ver      | Description\n-----------------------|----------|----------|------------------------------------------\nmd-to-pptx             | Standard | 1.0.0    | Markdown è½¬ PowerPoint å·¥å…·...\nn8n-workflow-patterns  | Standard | 1.0.0    | n8n å·¥ä½œæµæ¨¡å¼ä¸“å®¶...\nyt-dlp                 | GitHub   | 0.1.0    | YouTube è§†é¢‘ä¸‹è½½å·¥å…·å°è£…...\n-----------------------|----------|----------|------------------------------------------\nTotal: 12 skills\n```\n\n### æ›´æ–° Skill\n\n**è§¦å‘æ–¹å¼**:\n- \"æ›´æ–° [Skill åç§°]\"ï¼ˆåœ¨æ£€æŸ¥æ›´æ–°åï¼‰\n- `/skill-manager update <skill_name>`\n\n**å·¥ä½œæµ**:\n1. Agent ä»è¿œç¨‹ä»“åº“è·å–æ–°çš„ README\n2. å¯¹æ¯”æ–°æ—§ READMEï¼Œè¯†åˆ«å˜åŒ–ï¼ˆæ–°åŠŸèƒ½ã€åºŸå¼ƒå‚æ•°ç­‰ï¼‰\n3. é‡å†™ SKILL.md åæ˜ æ–°åŠŸèƒ½\n4. æ›´æ–° `source_hash` å­—æ®µ\n5. å¯é€‰ï¼šæ›´æ–° wrapper.py\n6. è¿è¡Œ `skill-evolution` çš„ `align_all.py` æ¢å¤ç”¨æˆ·ç»éªŒ\n\n### åˆ é™¤ Skill\n\n**è§¦å‘æ–¹å¼**:\n- `/skill-manager delete <skill_name>`\n- \"åˆ é™¤ Skill: <skill_name>\"\n\n**å·¥ä½œæµ**:\n1. Agent è¿è¡Œ `scripts/delete_skill.py <skill_name> <skills_dir>`\n2. è„šæœ¬æ˜¾ç¤º Skill ä¿¡æ¯å¹¶è¯·æ±‚ç¡®è®¤\n3. å¯é€‰ï¼šå¤‡ä»½åˆ° `.skill-backup` ç›®å½•\n4. æ‰§è¡Œåˆ é™¤\n\n## ç»éªŒå±‚ç®¡ç†\n\n### æŸ¥çœ‹ç»éªŒçŠ¶æ€\n\n**è§¦å‘æ–¹å¼**:\n- `/skill-manager evo-status <skill_name>`\n- \"æŸ¥çœ‹ xxx çš„ç»éªŒçŠ¶æ€\"\n\n**å·¥ä½œæµ**:\n```bash\npython scripts/evo_manager.py evo-status <skill_name> [--project <path>]\n```\n\n**ç¤ºä¾‹è¾“å‡º**:\n```\nSkill: n8n-code-javascript\nProject: /Users/xxx/my-project\n\nLayers:\n  [âœ—] Upstream\n      Path: ~/.claude/skills-repo/skills/n8n-code-javascript/evolution.json\n  [âœ“] Global\n      Path: ~/.claude/evolutions/n8n-code-javascript/evolution.json\n      Items: 5 total\n        - preferences: 2\n        - fixes: 2\n        - contexts: 1\n  [âœ“] Project\n      Path: /Users/xxx/my-project/.claude/evolutions/n8n-code-javascript.json\n      Items: 3 total\n        - preferences: 1\n        - fixes: 2\n\nMerged Total: 8 items\n```\n\n### æå‡ç»éªŒåˆ°å…¨å±€å±‚\n\n**è§¦å‘æ–¹å¼**:\n- `/skill-manager promote <skill_name>`\n- \"æŠŠè¿™ä¸ªé¡¹ç›®çš„ç»éªŒæå‡åˆ°å…¨å±€\"\n\n**å·¥ä½œæµ**:\n```bash\npython scripts/evo_manager.py promote <skill_name> [--project <path>] [--fields f1,f2]\n```\n\nå°†å½“å‰é¡¹ç›®çš„ç»éªŒå¤åˆ¶åˆ°å…¨å±€å±‚ï¼Œä¾›æ‰€æœ‰é¡¹ç›®å…±äº«ã€‚\n\n### ä»å…¨å±€å±‚æ‹‰å–ç»éªŒ\n\n**è§¦å‘æ–¹å¼**:\n- `/skill-manager pull <skill_name>`\n- \"æŠŠå…¨å±€ç»éªŒæ‹‰åˆ°è¿™ä¸ªé¡¹ç›®\"\n\n**å·¥ä½œæµ**:\n```bash\npython scripts/evo_manager.py pull <skill_name> [--project <path>]\n```\n\nå°†å…¨å±€å±‚çš„ç»éªŒå¤åˆ¶åˆ°å½“å‰é¡¹ç›®ï¼Œç”¨äºæ–°é¡¹ç›®åˆå§‹åŒ–ã€‚\n\n### åŒæ­¥æ‰€æœ‰ç»éªŒçŠ¶æ€\n\n**è§¦å‘æ–¹å¼**:\n- `/skill-manager sync-evolutions`\n- \"æŸ¥çœ‹æ‰€æœ‰ Skills çš„ç»éªŒçŠ¶æ€\"\n\n**å·¥ä½œæµ**:\n```bash\npython scripts/evo_manager.py sync [--skills-dir <path>] [--project <path>]\n```\n\n**ç¤ºä¾‹è¾“å‡º**:\n```\n============================================================\nSkills Evolution Status Summary\n============================================================\nSkills Directory: ~/.claude/skills-repo/skills\nProject Path: /Users/xxx/my-project\nTotal Skills: 14\n\nSummary:\n  - Has upstream evolution: 2\n  - Has global evolution: 5\n  - Has project evolution: 3\n  - No evolution data: 8\n\nSkills Detail:\n------------------------------------------------------------\nName                            Up   Glb   Prj  Total\n------------------------------------------------------------\nmd-to-pptx                       -     âœ“     -      3\nn8n-code-javascript              -     âœ“     âœ“      8\nn8n-code-python                  -     -     -      0\n...\n------------------------------------------------------------\n```\n\n## è„šæœ¬è¯´æ˜\n\n| è„šæœ¬ | åŠŸèƒ½ | å‚æ•° |\n|------|------|------|\n| `config.py` | é…ç½®ç®¡ç† | `get\\|set <path>\\|detect\\|clear` |\n| `scan_and_check.py` | æ‰«æå¹¶æ£€æŸ¥æ›´æ–° | `<skills_dir> [--json\\|--summary\\|--table]` |\n| `list_skills.py` | åˆ—å‡ºæ‰€æœ‰ Skills | `<skills_dir> [--json] [--verbose]` |\n| `delete_skill.py` | åˆ é™¤ Skill | `<skill_name> <skills_dir> [--backup] [--force]` |\n| `evo_manager.py` | ç»éªŒå±‚ç®¡ç† | `<command> <skill_name> [options]` |\n\n### evo_manager.py å‘½ä»¤\n\n| å‘½ä»¤ | åŠŸèƒ½ |\n|------|------|\n| `evo-status <skill>` | æŸ¥çœ‹ç»éªŒåˆ†å¸ƒçŠ¶æ€ |\n| `promote <skill>` | é¡¹ç›®ç»éªŒ â†’ å…¨å±€å±‚ |\n| `pull <skill>` | å…¨å±€ç»éªŒ â†’ é¡¹ç›®å±‚ |\n| `sync` | æŸ¥çœ‹æ‰€æœ‰ skills ç»éªŒçŠ¶æ€ |\n\n## å…ƒæ•°æ®ä¾èµ–\n\næ­¤ç®¡ç†å™¨ä¾èµ–ä»¥ä¸‹å…ƒæ•°æ®å­—æ®µï¼š\n\n| å­—æ®µ | ç”¨é€” |\n|------|------|\n| `source_url` | è¿œç¨‹ä»“åº“ URLï¼ˆç”¨äºæ£€æŸ¥æ›´æ–°ï¼‰ |\n| `source_hash` | æœ¬åœ°è®°å½•çš„ commit hash |\n| `version` | è¯­ä¹‰åŒ–ç‰ˆæœ¬å· |\n| `evolution_enabled` | æ˜¯å¦å¯ç”¨ç»éªŒè¿›åŒ– |\n\n**å…¼å®¹æ€§**: åŒæ—¶æ”¯æŒæ—§æ ¼å¼çš„ `github_url` å’Œ `github_hash` å­—æ®µã€‚\n\n## çŠ¶æ€è¯´æ˜\n\n| çŠ¶æ€ | å«ä¹‰ |\n|------|------|\n| `current` | æœ¬åœ° hash ä¸è¿œç¨‹ç›¸åŒï¼Œæ— éœ€æ›´æ–° |\n| `outdated` | è¿œç¨‹æœ‰æ–°çš„ commits |\n| `unmanaged` | æ²¡æœ‰é…ç½® `source_url`ï¼Œæ— æ³•æ£€æŸ¥æ›´æ–° |\n| `error` | æ— æ³•è®¿é—®è¿œç¨‹ä»“åº“ |\n| `unknown` | æœ¬åœ°æ²¡æœ‰è®°å½• hash |\n\n## æœ€ä½³å®è·µ\n\n1. **å®šæœŸæ£€æŸ¥**: å»ºè®®æ¯å‘¨è¿è¡Œä¸€æ¬¡ `/skill-manager check`\n2. **å¤‡ä»½åˆ é™¤**: åˆ é™¤é‡è¦ Skill å‰ä½¿ç”¨ `--backup` é€‰é¡¹\n3. **æ›´æ–°åå¯¹é½**: æ›´æ–° Skill åè¿è¡Œ `skill-evolution` çš„ `align_all.py` æ¢å¤ç»éªŒ\n4. **ç‰ˆæœ¬æ§åˆ¶**: ä½¿ç”¨ Git ç®¡ç† Skills ç›®å½•ï¼Œä¾¿äºå›æ»š\n5. **ç»éªŒç®¡ç†**:\n   - æ–°é¡¹ç›®å¼€å§‹æ—¶è¿è¡Œ `pull` è·å–å…¨å±€ç»éªŒ\n   - é¡¹ç›®ç»“æŸæ—¶è¿è¡Œ `promote` æå‡æœ‰ä»·å€¼çš„ç»éªŒ\n   - å®šæœŸè¿è¡Œ `sync` æŸ¥çœ‹ç»éªŒåˆ†å¸ƒ\n\n## ä¸å…¶ä»– Skill çš„åä½œ\n\n- **skill-factory**: åˆ›å»ºçš„ Skills è‡ªåŠ¨åŒ…å«ç”Ÿå‘½å‘¨æœŸç®¡ç†æ‰€éœ€çš„å…ƒæ•°æ®\n- **skill-evolution**: æ›´æ–°åè°ƒç”¨ `align_all.py` æ¢å¤ç”¨æˆ·ç»éªŒï¼›å…±äº« `layered_merge.py`\n- **skill-creator**: éµå¾ªç›¸åŒçš„å…ƒæ•°æ®è§„èŒƒ\n",
        "skills/skill-writer/SKILL.md": "---\nname: skill-writer\ndescription: Guide users through creating Agent Skills for Claude Code. Use when the user wants to create, write, author, or design a new Skill, or needs help with SKILL.md files, frontmatter, or skill structure.\n---\n\n# Skill Writer\n\nThis Skill helps you create well-structured Agent Skills for Claude Code that follow best practices and validation requirements.\n\n## When to use this Skill\n\nUse this Skill when:\n- Creating a new Agent Skill\n- Writing or updating SKILL.md files\n- Designing skill structure and frontmatter\n- Troubleshooting skill discovery issues\n- Converting existing prompts or workflows into Skills\n\n## Instructions\n\n### Step 1: Determine Skill scope\n\nFirst, understand what the Skill should do:\n\n1. **Ask clarifying questions**:\n   - What specific capability should this Skill provide?\n   - When should Claude use this Skill?\n   - What tools or resources does it need?\n   - Is this for personal use or team sharing?\n\n2. **Keep it focused**: One Skill = one capability\n   - Good: \"PDF form filling\", \"Excel data analysis\"\n   - Too broad: \"Document processing\", \"Data tools\"\n\n### Step 2: Choose Skill location\n\nDetermine where to create the Skill:\n\n**Personal Skills** (`~/.claude/skills/`):\n- Individual workflows and preferences\n- Experimental Skills\n- Personal productivity tools\n\n**Project Skills** (`.claude/skills/`):\n- Team workflows and conventions\n- Project-specific expertise\n- Shared utilities (committed to git)\n\n### Step 3: Create Skill structure\n\nCreate the directory and files:\n\n```bash\n# Personal\nmkdir -p ~/.claude/skills/skill-name\n\n# Project\nmkdir -p .claude/skills/skill-name\n```\n\nFor multi-file Skills:\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md (required)\nâ”œâ”€â”€ reference.md (optional)\nâ”œâ”€â”€ examples.md (optional)\nâ”œâ”€â”€ scripts/\nâ”‚   â””â”€â”€ helper.py (optional)\nâ””â”€â”€ templates/\n    â””â”€â”€ template.txt (optional)\n```\n\n### Step 4: Write SKILL.md frontmatter\n\nCreate YAML frontmatter with required fields:\n\n```yaml\n---\nname: skill-name\ndescription: Brief description of what this does and when to use it\n---\n```\n\n**Field requirements**:\n\n- **name**:\n  - Lowercase letters, numbers, hyphens only\n  - Max 64 characters\n  - Must match directory name\n  - Good: `pdf-processor`, `git-commit-helper`\n  - Bad: `PDF_Processor`, `Git Commits!`\n\n- **description**:\n  - Max 1024 characters\n  - Include BOTH what it does AND when to use it\n  - Use specific trigger words users would say\n  - Mention file types, operations, and context\n\n**Optional frontmatter fields**:\n\n- **allowed-tools**: Restrict tool access (comma-separated list)\n  ```yaml\n  allowed-tools: Read, Grep, Glob\n  ```\n  Use for:\n  - Read-only Skills\n  - Security-sensitive workflows\n  - Limited-scope operations\n\n### Step 5: Write effective descriptions\n\nThe description is critical for Claude to discover your Skill.\n\n**Formula**: `[What it does] + [When to use it] + [Key triggers]`\n\n**Examples**:\n\nâœ… **Good**:\n```yaml\ndescription: Extract text and tables from PDF files, fill forms, merge documents. Use when working with PDF files or when the user mentions PDFs, forms, or document extraction.\n```\n\nâœ… **Good**:\n```yaml\ndescription: Analyze Excel spreadsheets, create pivot tables, and generate charts. Use when working with Excel files, spreadsheets, or analyzing tabular data in .xlsx format.\n```\n\nâŒ **Too vague**:\n```yaml\ndescription: Helps with documents\ndescription: For data analysis\n```\n\n**Tips**:\n- Include specific file extensions (.pdf, .xlsx, .json)\n- Mention common user phrases (\"analyze\", \"extract\", \"generate\")\n- List concrete operations (not generic verbs)\n- Add context clues (\"Use when...\", \"For...\")\n\n### Step 6: Structure the Skill content\n\nUse clear Markdown sections:\n\n```markdown\n# Skill Name\n\nBrief overview of what this Skill does.\n\n## Quick start\n\nProvide a simple example to get started immediately.\n\n## Instructions\n\nStep-by-step guidance for Claude:\n1. First step with clear action\n2. Second step with expected outcome\n3. Handle edge cases\n\n## Examples\n\nShow concrete usage examples with code or commands.\n\n## Best practices\n\n- Key conventions to follow\n- Common pitfalls to avoid\n- When to use vs. not use\n\n## Requirements\n\nList any dependencies or prerequisites:\n```bash\npip install package-name\n```\n\n## Advanced usage\n\nFor complex scenarios, see [reference.md](reference.md).\n```\n\n### Step 7: Add supporting files (optional)\n\nCreate additional files for progressive disclosure:\n\n**reference.md**: Detailed API docs, advanced options\n**examples.md**: Extended examples and use cases\n**scripts/**: Helper scripts and utilities\n**templates/**: File templates or boilerplate\n\nReference them from SKILL.md:\n```markdown\nFor advanced usage, see [reference.md](reference.md).\n\nRun the helper script:\n\\`\\`\\`bash\npython scripts/helper.py input.txt\n\\`\\`\\`\n```\n\n### Step 8: Validate the Skill\n\nCheck these requirements:\n\nâœ… **File structure**:\n- [ ] SKILL.md exists in correct location\n- [ ] Directory name matches frontmatter `name`\n\nâœ… **YAML frontmatter**:\n- [ ] Opening `---` on line 1\n- [ ] Closing `---` before content\n- [ ] Valid YAML (no tabs, correct indentation)\n- [ ] `name` follows naming rules\n- [ ] `description` is specific and < 1024 chars\n\nâœ… **Content quality**:\n- [ ] Clear instructions for Claude\n- [ ] Concrete examples provided\n- [ ] Edge cases handled\n- [ ] Dependencies listed (if any)\n\nâœ… **Testing**:\n- [ ] Description matches user questions\n- [ ] Skill activates on relevant queries\n- [ ] Instructions are clear and actionable\n\n### Step 9: Test the Skill\n\n1. **Restart Claude Code** (if running) to load the Skill\n\n2. **Ask relevant questions** that match the description:\n   ```\n   Can you help me extract text from this PDF?\n   ```\n\n3. **Verify activation**: Claude should use the Skill automatically\n\n4. **Check behavior**: Confirm Claude follows the instructions correctly\n\n### Step 10: Debug if needed\n\nIf Claude doesn't use the Skill:\n\n1. **Make description more specific**:\n   - Add trigger words\n   - Include file types\n   - Mention common user phrases\n\n2. **Check file location**:\n   ```bash\n   ls ~/.claude/skills/skill-name/SKILL.md\n   ls .claude/skills/skill-name/SKILL.md\n   ```\n\n3. **Validate YAML**:\n   ```bash\n   cat SKILL.md | head -n 10\n   ```\n\n4. **Run debug mode**:\n   ```bash\n   claude --debug\n   ```\n\n## Common patterns\n\n### Read-only Skill\n\n```yaml\n---\nname: code-reader\ndescription: Read and analyze code without making changes. Use for code review, understanding codebases, or documentation.\nallowed-tools: Read, Grep, Glob\n---\n```\n\n### Script-based Skill\n\n```yaml\n---\nname: data-processor\ndescription: Process CSV and JSON data files with Python scripts. Use when analyzing data files or transforming datasets.\n---\n\n# Data Processor\n\n## Instructions\n\n1. Use the processing script:\n\\`\\`\\`bash\npython scripts/process.py input.csv --output results.json\n\\`\\`\\`\n\n2. Validate output with:\n\\`\\`\\`bash\npython scripts/validate.py results.json\n\\`\\`\\`\n```\n\n### Multi-file Skill with progressive disclosure\n\n```yaml\n---\nname: api-designer\ndescription: Design REST APIs following best practices. Use when creating API endpoints, designing routes, or planning API architecture.\n---\n\n# API Designer\n\nQuick start: See [examples.md](examples.md)\n\nDetailed reference: See [reference.md](reference.md)\n\n## Instructions\n\n1. Gather requirements\n2. Design endpoints (see examples.md)\n3. Document with OpenAPI spec\n4. Review against best practices (see reference.md)\n```\n\n## Best practices for Skill authors\n\n1. **One Skill, one purpose**: Don't create mega-Skills\n2. **Specific descriptions**: Include trigger words users will say\n3. **Clear instructions**: Write for Claude, not humans\n4. **Concrete examples**: Show real code, not pseudocode\n5. **List dependencies**: Mention required packages in description\n6. **Test with teammates**: Verify activation and clarity\n7. **Version your Skills**: Document changes in content\n8. **Use progressive disclosure**: Put advanced details in separate files\n\n## Validation checklist\n\nBefore finalizing a Skill, verify:\n\n- [ ] Name is lowercase, hyphens only, max 64 chars\n- [ ] Description is specific and < 1024 chars\n- [ ] Description includes \"what\" and \"when\"\n- [ ] YAML frontmatter is valid\n- [ ] Instructions are step-by-step\n- [ ] Examples are concrete and realistic\n- [ ] Dependencies are documented\n- [ ] File paths use forward slashes\n- [ ] Skill activates on relevant queries\n- [ ] Claude follows instructions correctly\n\n## Troubleshooting\n\n**Skill doesn't activate**:\n- Make description more specific with trigger words\n- Include file types and operations in description\n- Add \"Use when...\" clause with user phrases\n\n**Multiple Skills conflict**:\n- Make descriptions more distinct\n- Use different trigger words\n- Narrow the scope of each Skill\n\n**Skill has errors**:\n- Check YAML syntax (no tabs, proper indentation)\n- Verify file paths (use forward slashes)\n- Ensure scripts have execute permissions\n- List all dependencies\n\n## Examples\n\nSee the documentation for complete examples:\n- Simple single-file Skill (commit-helper)\n- Skill with tool permissions (code-reviewer)\n- Multi-file Skill (pdf-processing)\n\n## Output format\n\nWhen creating a Skill, I will:\n\n1. Ask clarifying questions about scope and requirements\n2. Suggest a Skill name and location\n3. Create the SKILL.md file with proper frontmatter\n4. Include clear instructions and examples\n5. Add supporting files if needed\n6. Provide testing instructions\n7. Validate against all requirements\n\nThe result will be a complete, working Skill that follows all best practices and validation rules.\n"
      },
      "plugins": [
        {
          "name": "claude-skills-plugin",
          "source": "./",
          "description": "A comprehensive and extensible Claude Code skills repository. Currently includes 7 n8n workflow development skills and 1 skill-creator meta skill, with plans to expand to other development domains",
          "version": "1.0.0",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add echoleesong/claude-skills-plugin",
            "/plugin install claude-skills-plugin@claude-skills-plugin-marketplace"
          ]
        }
      ]
    }
  ]
}