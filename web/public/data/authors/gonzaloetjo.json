{
  "author": {
    "id": "gonzaloetjo",
    "display_name": "GENGE",
    "avatar_url": "https://avatars.githubusercontent.com/u/12486708?u=8df9ed63a741fbb7795d7c523bd88478ff1aa545&v=4"
  },
  "marketplaces": [
    {
      "name": "solidity-audit-skills",
      "version": "1.5.0",
      "description": "Solidity smart contract audit skills for Claude Code. Per-function audit with 6-stage pipeline: design decisions, parallelized analysis, human review, dispute re-evaluation.",
      "repo_full_name": "gonzaloetjo/solidity-audit-skills",
      "repo_url": "https://github.com/gonzaloetjo/solidity-audit-skills",
      "repo_description": "Skill to audit solidity contracts using claude code teams. ",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-02-11T14:59:32Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"solidity-audit-skills\",\n  \"version\": \"1.5.0\",\n  \"description\": \"Solidity smart contract audit skills for Claude Code. Per-function audit with 6-stage pipeline: design decisions, parallelized analysis, human review, dispute re-evaluation.\",\n  \"owner\": {\n    \"name\": \"gonzaloetjo\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"solidity-function-audit\",\n      \"source\": \"./plugins/solidity-function-audit\"\n    },\n    {\n      \"name\": \"solidity-function-audit-team\",\n      \"source\": \"./plugins/solidity-function-audit-team\"\n    }\n  ]\n}\n",
        "README.md": "# solidity-audit-skills\n\nFunction-by-function security audit of your Solidity contracts, powered by Claude Code agents.\n\n- Captures design decisions before the audit — trade-offs don't get flagged as bugs\n- Parallel agents grouped by domain — one agent per domain, all domains run concurrently\n- Interactive post-audit review — classify findings, dispute false positives, get re-evaluation\n- Structured markdown output with per-domain files, an index, and a summary\n\n## What It Catches\n\n| Severity | Function | Finding |\n|----------|----------|---------|\n| CRITICAL | `withdraw()` | Missing reentrancy guard allows drain via callback before balance update |\n| CRITICAL | `setOracle()` | No access control — any caller can replace the price oracle |\n| WARNING | `deposit()` | Underflow revert produces generic `Panic(0x11)` instead of custom error |\n| INFO | `_stakeToShares()` | Rounding direction correctly protocol-favorable (DOWN on deposit) |\n\n<details>\n<summary>Full per-function analysis format</summary>\n\nEach function gets a standalone analysis block. Here's a trimmed example from a staking vault audit:\n\n### deposit(uint256 minShares)\n\n- **Rationale**: Entry point for users to deposit native token and receive LST shares. Must correctly convert deposited stake to shares at the current exchange rate, protect against sandwich/frontrunning via slippage, and maintain share supply/pool accounting invariants.\n\n- **State mutations**:\n  - `_mint(msg.sender, shares)` -- increases `totalSupply()` and `balanceOf(msg.sender)` by `shares`\n  - `address(this).balance` is implicitly increased by `msg.value` at the start of the call\n\n- **Dependencies**:\n  - Reads: `getTotalPooledStake()`, `totalSupply()`, `INITIAL_SHARES_OFFSET`\n  - Calls: `_stakeToShares(msg.value, preDepositStake)`, `_mint(msg.sender, shares)`\n  - Modifiers: `nonReentrant`, `whenNotPaused`\n\n- **Findings**:\n\n  1. **WARNING -- Underflow revert acts as implicit insolvency guard**. The subtraction `getTotalPooledStake() - msg.value` will revert with arithmetic underflow if `getTotalPooledStake() < msg.value`. The revert reason will be a generic `Panic(0x11)` rather than a descriptive custom error.\n\n  2. **INFO -- Zero-share deposit protection**. `if (shares == 0) revert StakingVault__InvalidAmount()` prevents dust deposits that produce zero shares.\n\n  3. **INFO -- Slippage protection**. `minShares > 0 && shares < minShares` check allows callers to skip by passing 0.\n\n- **Verdict**: **SOUND**\n\n</details>\n\n## How It Works\n\n| Stage | What happens | Mode | Output |\n|-------|-------------|------|--------|\n| 0. Design decisions | Extract + confirm developer intent | Interactive | `stage0/` |\n| 0.5 Slither | Static analysis (if installed) | Orchestrator | `stage0/slither-findings.md` |\n| 1. Foundation | Map state variables, access control, external calls | Agents (parallel) | `stage1/` |\n| 2. Domain audit | Per-function analysis grouped by domain | Agents (parallel) | `stage2/domain-*.md` |\n| 3. Cross-cutting | Reentrancy paths, state consistency, math/rounding | Agents (parallel) | `stage3/` |\n| 4. Human review | Classify findings: BUG, DESIGN, DISPUTED, DISCUSS | Interactive | `review/` |\n| 5. Re-evaluation | Re-analyze disputed findings with developer context | Agent (conditional) | `review/` |\n\n```\n  Stage 0          ┌──────────────────┐\n  interactive      │  Design Decisions │\n                   └────────┬─────────┘\n                            │\n  Slither          ┌────────┴─────────┐\n  if installed     │  Static Analysis  │\n                   └────────┬─────────┘\n                            │\n                ┌───────────┼───────────┐\n                ▼           ▼           ▼\n  Stage 1    ┌──────┐  ┌──────┐  ┌──────────┐\n  3 agents   │State │  │Access│  │ External │\n             │ Vars │  │ Ctrl │  │  Calls   │\n             └──┬───┘  └──┬───┘  └────┬─────┘\n                └──────────┼──────────┘\n                           │\n               ┌───────────┼───────────┐\n               ▼           ▼           ▼\n  Stage 2   ┌──────┐  ┌──────┐  ┌──────────┐\n  N agents  │Dom A │  │Dom B │  │ Dom ...  │\n            └──┬───┘  └──┬───┘  └────┬─────┘\n               └──────────┼──────────┘\n                          │\n              ┌───────────┼───────────┐\n              ▼           ▼           ▼\n  Stage 3  ┌───────┐ ┌────────┐ ┌──────────┐\n  3 agents │ State │ │ Math & │ │Reentrancy│\n           │Consist│ │Rounding│ │ & Trust  │\n           └──┬────┘ └───┬────┘ └────┬─────┘\n              └───────────┼──────────┘\n                          │\n  Synthesis    ┌──────────┴──────────┐\n               │ INDEX.md + SUMMARY  │\n               └──────────┬──────────┘\n                          │\n  Stage 4      ┌──────────┴──────────┐\n  interactive  │    Human Review     │\n               │ BUG/DESIGN/DISPUTED │\n               └──────────┬──────────┘\n                          │\n  Stage 5      ┌──────────┴──────────┐\n  conditional  │   Re-Evaluation     │\n               └──────────┬──────────┘\n                          ▼\n               Final SUMMARY.md\n```\n\nAll output goes to `docs/audit/function-audit/`.\n\n## Slither Integration\n\nIf [Slither](https://github.com/crytic/slither) is installed (`pip install slither-analyzer`), it runs automatically before agents start. Agents cross-reference their manual analysis with Slither's automated detections — confirming findings, identifying false positives, and noting what Slither missed.\n\n## Solo vs Team\n\nBoth variants run the same 6-stage pipeline (Stage 0 → 1 → 2 → 3 → 4 → 5). Stages 0, 4, and 5 are interactive and identical in both. The difference is how Stages 1-3 run:\n\nThe **team variant** (`/solidity-function-audit-team`) gives you control over the analysis pipeline:\n- Agents self-schedule from a shared task list with dependency tracking\n- Stage 2 agents share their analysis plan with the lead before executing\n- Agents message each other about cross-domain findings (CRITICAL only)\n- Requires `CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1`\n\nThe **solo variant** (`/solidity-function-audit`) is lighter-weight:\n- Agents run in the background and write results directly\n- No inter-agent messaging\n\n## Installation\n\nAdd the marketplace and install the plugin you want:\n\n```bash\nclaude plugin marketplace add gonzaloetjo/solidity-audit-skills\n```\n\n**Team variant** (recommended) — agents communicate cross-domain findings, shared task list with dependency tracking:\n\n```bash\nclaude plugin install solidity-function-audit-team@solidity-audit-skills\n```\n\nRequires `CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1` in your environment or `.claude/settings.json`.\n\n**Solo variant** — lighter-weight, agents run independently in the background:\n\n```bash\nclaude plugin install solidity-function-audit@solidity-audit-skills\n```\n\nBoth require a Foundry project layout (`src/**/*.sol`).\n\n## Usage\n\nStart Claude Code in your Foundry project directory:\n\n```bash\ncd your-project\nclaude\n```\n\nThen run the skill:\n\n```\n/solidity-function-audit\n# or\n/solidity-function-audit-team\n```\n\nYou can also pass a path to a specific project:\n\n```\n/solidity-function-audit /path/to/your/foundry/project\n```\n\nThe skill will:\n\n1. **Discover contracts** — scans `src/**/*.sol` for contracts, libraries, and functions\n2. **Group into domains** — presents domain groupings for your confirmation\n3. **Capture design decisions** — asks about intentional trade-offs (Stage 0)\n4. **Run Slither** — if installed, runs static analysis automatically\n5. **Launch parallel agents** — Stages 1-3 run concurrently, writing to `docs/audit/function-audit/`\n6. **Present findings** — shows severity breakdown and asks to proceed to review\n7. **Interactive review** — you classify each finding as BUG, DESIGN, DISPUTED, or DISCUSS (Stage 4)\n8. **Re-evaluate disputes** — if any DISPUTED/DISCUSS items, an agent re-analyzes with your reasoning (Stage 5)\n\nOutput lands in `docs/audit/function-audit/`:\n\n```\ndocs/audit/function-audit/\n├── INDEX.md                    # Links to all files with finding counts\n├── SUMMARY.md                  # Executive summary + action items\n├── stage0/\n│   ├── design-decisions.md     # Confirmed design intent\n│   └── slither-findings.md     # Slither output (if available)\n├── stage1/\n│   ├── state-variables.md      # Storage variable map\n│   ├── access-control.md       # Access control surface\n│   └── external-calls.md       # External call map\n├── stage2/\n│   ├── domain-staking.md       # Per-function analysis (one file per domain)\n│   ├── domain-rewards.md\n│   └── ...\n├── stage3/\n│   ├── state-consistency.md    # Cross-domain state audit\n│   ├── math-rounding.md        # Arithmetic + precision audit\n│   └── reentrancy-trust.md     # Reentrancy + trust boundaries\n└── review/\n    ├── review-responses.md     # Your classifications\n    └── re-evaluation.md        # Dispute re-analysis (if needed)\n```\n\n## Monitoring a Team Audit\n\nThe team variant runs multiple agents from a shared task list at `~/.claude/tasks/`. You can watch progress in real time with [claude-code-kanban](https://github.com/L1AD/claude-task-viewer) — a zero-config Kanban board that shows pending/in-progress/completed tasks, agent assignments, and dependency chains.\n\n**Terminal 1 — Kanban board:**\n\n```bash\nnpx claude-code-kanban\n# Opens http://localhost:3456 in your browser\n```\n\n**Terminal 2 — Run the audit:**\n\n```bash\nexport CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1\ncd your-project\nclaude\n```\n\nThen inside Claude: `/solidity-function-audit-team`\n\nThe env var is only needed in the terminal running Claude. To make it permanent:\n\n```bash\necho 'export CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1' >> ~/.bashrc\nsource ~/.bashrc\n```\n\nThe Kanban board will show Stage 1 tasks completing, Stage 2 domain audits unblocking and getting picked up by teammates, and Stage 3 cross-cutting tasks waiting on Stage 2. No configuration needed — it watches the filesystem directly.\n\n**Keyboard shortcuts** in the Claude terminal for live teammate control:\n\n| Key | Action |\n|-----|--------|\n| `Shift+Up/Down` | Select teammate |\n| `Enter` | View teammate session |\n| `Escape` | Interrupt teammate |\n| `Ctrl+T` | Toggle task list overlay |\n\n### Deep observability with hooks\n\nFor full visibility into what agents are actually doing — every tool call, file write, and message between teammates — see [claude-code-hooks-multi-agent-observability](https://github.com/disler/claude-code-hooks-multi-agent-observability). It captures 12 hook events and renders them as a real-time Vue dashboard with agent swim lanes and event timeline.\n\n> **Security notice**: We audited this tool ([audit notes](https://github.com/disler/claude-code-hooks-multi-agent-observability)). There is no malware or data exfiltration in the default config, and its hooks won't conflict with this plugin's validation hooks (they run in parallel at different levels). However, **the server binds to `0.0.0.0` with wildcard CORS and no auth** — meaning anyone on your LAN can read all captured events, including source code. The `--summarize` flag also sends truncated event payloads to Anthropic's API for one-line summaries. Apply the fixes below before using it with proprietary code.\n\n<details>\n<summary>Setup and required security fixes</summary>\n\n**Install** (clone it anywhere, it lives outside your project):\n\n```bash\ngit clone https://github.com/disler/claude-code-hooks-multi-agent-observability\ncd claude-code-hooks-multi-agent-observability\nbun install        # needs Bun and uv (astral.sh) installed\n```\n\n**Required fixes before first use:**\n\n1. Bind server to localhost only — edit `apps/server/src/index.ts`:\n\n```typescript\n// find Bun.serve({ ... }) and add hostname:\nconst server = Bun.serve({\n  hostname: 'localhost',   // ADD THIS — default is 0.0.0.0\n  port: parseInt(process.env.SERVER_PORT || '4000'),\n  // ...\n});\n```\n\n2. Restrict CORS — in the same file, replace `'*'` with the client origin:\n\n```typescript\n'Access-Control-Allow-Origin': 'http://localhost:5173',  // was '*'\n```\n\n3. Disable API summarization — in the `.claude/settings.json` you'll copy to your project, remove `--summarize` from all `send_event.py` commands to prevent truncated payloads being sent to Anthropic's API:\n\n```bash\nsed -i 's/ --summarize//g' .claude/settings.json\n```\n\n**Copy hooks into your Foundry project:**\n\n```bash\ncp -R .claude /path/to/your-foundry-project/\n```\n\nEdit the `source-app` value in the copied `settings.json`:\n\n```bash\ncd /path/to/your-foundry-project\nsed -i 's/cc-hook-multi-agent-obvs/my-vault-audit/g' .claude/settings.json\n```\n\n**Run it** (three terminals):\n\n```bash\n# Terminal 1 — observability server + dashboard\ncd claude-code-hooks-multi-agent-observability\n./scripts/start-system.sh\n# Server on :4000, dashboard on http://localhost:5173\n\n# Terminal 2 — (optional) Kanban board for task state\nnpx claude-code-kanban\n\n# Terminal 3 — run the audit\nexport CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1\ncd your-foundry-project\nclaude\n# then: /solidity-function-audit-team\n```\n\n</details>\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "solidity-function-audit",
          "source": "./plugins/solidity-function-audit",
          "description": null,
          "categories": [],
          "install_commands": [
            "/plugin marketplace add gonzaloetjo/solidity-audit-skills",
            "/plugin install solidity-function-audit@solidity-audit-skills"
          ]
        },
        {
          "name": "solidity-function-audit-team",
          "source": "./plugins/solidity-function-audit-team",
          "description": null,
          "categories": [],
          "install_commands": [
            "/plugin marketplace add gonzaloetjo/solidity-audit-skills",
            "/plugin install solidity-function-audit-team@solidity-audit-skills"
          ]
        }
      ]
    }
  ]
}