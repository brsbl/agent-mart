{
  "author": {
    "id": "Add4x",
    "display_name": "Add4x",
    "type": "Organization",
    "avatar_url": "https://avatars.githubusercontent.com/u/222531356?v=4",
    "url": "https://github.com/Add4x",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 3,
      "total_commands": 7,
      "total_skills": 1,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "development-plugins-marketplace",
      "version": null,
      "description": "Marketplace for productivity and knowledge management plugins",
      "owner_info": {
        "name": "Shyju Viswambaran",
        "email": "shyju.viswambaran@coxautoinc.com"
      },
      "keywords": [],
      "repo_full_name": "Add4x/cc-plugins",
      "repo_url": "https://github.com/Add4x/cc-plugins",
      "repo_description": null,
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-15T15:26:48Z",
        "created_at": "2025-12-05T21:39:04Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 1714
        },
        {
          "path": "aws-profile-manager",
          "type": "tree",
          "size": null
        },
        {
          "path": "aws-profile-manager/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "aws-profile-manager/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 482
        },
        {
          "path": "aws-profile-manager/README.md",
          "type": "blob",
          "size": 10400
        },
        {
          "path": "aws-profile-manager/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "aws-profile-manager/agents/aws-profile-manager.md",
          "type": "blob",
          "size": 5087
        },
        {
          "path": "aws-profile-manager/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "aws-profile-manager/commands/aws-accounts.md",
          "type": "blob",
          "size": 2462
        },
        {
          "path": "aws-profile-manager/commands/aws-auth-all.md",
          "type": "blob",
          "size": 2054
        },
        {
          "path": "aws-profile-manager/commands/aws-auth.md",
          "type": "blob",
          "size": 1850
        },
        {
          "path": "aws-profile-manager/commands/aws-status.md",
          "type": "blob",
          "size": 2208
        },
        {
          "path": "aws-profile-manager/commands/aws-switch.md",
          "type": "blob",
          "size": 2262
        },
        {
          "path": "context-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "context-management/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "context-management/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 523
        },
        {
          "path": "context-management/README.md",
          "type": "blob",
          "size": 14981
        },
        {
          "path": "context-management/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "context-management/agents/context-manager.md",
          "type": "blob",
          "size": 7407
        },
        {
          "path": "context-management/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "context-management/commands/context-restore.md",
          "type": "blob",
          "size": 18453
        },
        {
          "path": "context-management/commands/context-save.md",
          "type": "blob",
          "size": 18052
        },
        {
          "path": "nextjs-frontend-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "nextjs-frontend-dev/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "nextjs-frontend-dev/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 651
        },
        {
          "path": "nextjs-frontend-dev/README.md",
          "type": "blob",
          "size": 12826
        },
        {
          "path": "nextjs-frontend-dev/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "nextjs-frontend-dev/agents/nextjs-architect.md",
          "type": "blob",
          "size": 9634
        },
        {
          "path": "nextjs-frontend-dev/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "nextjs-frontend-dev/skills/nextjs-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "nextjs-frontend-dev/skills/nextjs-patterns/SKILL.md",
          "type": "blob",
          "size": 24386
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"development-plugins-marketplace\",\n  \"description\": \"Marketplace for productivity and knowledge management plugins\",\n  \"owner\": {\n    \"name\": \"Shyju Viswambaran\",\n    \"email\": \"shyju.viswambaran@coxautoinc.com\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"context-management\",\n      \"description\": \"Intelligent context management for any project - captures and restores knowledge, architecture, and patterns\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Shyju Viswambaran\",\n        \"email\": \"shyju.viswambaran@coxautoinc.com\"\n      },\n      \"source\": \"./context-management\",\n      \"keywords\": [\"context\", \"knowledge-management\", \"memory\", \"architecture\", \"patterns\"]\n    },\n    {\n      \"name\": \"aws-profile-manager\",\n      \"description\": \"Manage AWS credentials across multiple accounts using ALKS with named profiles for simultaneous access\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Shyju Viswambaran\",\n        \"email\": \"shyju.viswambaran@coxautoinc.com\"\n      },\n      \"source\": \"./aws-profile-manager\",\n      \"keywords\": [\"aws\", \"alks\", \"credentials\", \"multi-account\", \"devops\"]\n    },\n    {\n      \"name\": \"nextjs-frontend-dev\",\n      \"description\": \"Comprehensive Next.js frontend development patterns with TypeScript, Tailwind CSS v4, shadcn/ui, TanStack Query, and Zustand - includes intelligent code generation and best practices\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Shyju Viswambaran\",\n        \"email\": \"shyju.viswambaran@coxautoinc.com\"\n      },\n      \"source\": \"./nextjs-frontend-dev\",\n      \"keywords\": [\"nextjs\", \"react\", \"typescript\", \"tailwind\", \"shadcn\", \"frontend\", \"tanstack-query\", \"zustand\", \"web-development\"]\n    }\n  ]\n}\n",
        "aws-profile-manager/.claude-plugin/plugin.json": "{\n  \"name\": \"aws-profile-manager\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Manage AWS credentials across multiple accounts using ALKS with named profiles for simultaneous access\",\n  \"author\": {\n    \"name\": \"Shyju Viswambaran\",\n    \"email\": \"shyju.viswambaran@coxautoinc.com\"\n  },\n  \"keywords\": [\n    \"aws\",\n    \"alks\",\n    \"credentials\",\n    \"multi-account\",\n    \"devops\"\n  ],\n  \"license\": \"MIT\",\n  \"repository\": \"https://github.com/Add4x/cc-plugins\",\n  \"commands\": \"./commands/\"\n}\n",
        "aws-profile-manager/README.md": "# AWS Profile Manager\n\nManage AWS credentials across multiple accounts using ALKS with named profiles for simultaneous access.\n\n## Overview\n\nAWS Profile Manager simplifies working with multiple AWS accounts by providing easy credential management through ALKS (Account Link Key Service). Instead of constantly overwriting a single default profile, it maintains separate named profiles for each environment, allowing you to work with multiple accounts simultaneously.\n\n## Problem It Solves\n\nWorking with multiple AWS accounts typically involves:\n- ‚ùå Manual credential rotation and copy-paste\n- ‚ùå Forgetting which account is currently active\n- ‚ùå Overwriting credentials when switching accounts\n- ‚ùå Hard-to-remember account numbers\n- ‚ùå Error-prone manual ALKS commands\n\nAWS Profile Manager solves this with:\n- ‚úÖ Named profiles for each environment (all active simultaneously)\n- ‚úÖ One-command credential refresh\n- ‚úÖ Clear visibility of active profile and expiration\n- ‚úÖ Smart profile switching with safety warnings\n- ‚úÖ Quick reference for account mappings\n\n## Features\n\n- **Named Profile Management**: Create and maintain separate AWS profiles for each account\n- **ALKS Integration**: Automated credential refresh via ALKS CLI\n- **Multiple Active Profiles**: All accounts can have valid credentials simultaneously\n- **Expiration Tracking**: Monitor credential expiration times\n- **Smart Role Selection**: Automatically uses correct ALKS role per account\n- **Safety First**: Production accounts use read-only roles by default\n- **Quick Reference**: Never forget account numbers again\n\n## Installation\n\n### Prerequisites\n\n1. **ALKS CLI** must be installed and configured\n   ```bash\n   npm install -g alks-cli\n   alks profiles\n   ```\n   See: [ALKS CLI Documentation](https://github.com/Cox-Automotive/alks-cli)\n\n2. **Add this marketplace** to Claude Code (if not already added)\n   ```bash\n   /plugin marketplace add /Users/shyju.viswambaran/backend/cc-plugins\n   ```\n\n### Install Plugin\n\n```bash\n# Install aws-profile-manager\n/plugin install aws-profile-manager@development-plugins-marketplace\n\n# Verify installation\n/plugin list\n```\n\n## Configuration\n\nThe default configuration includes Vehicle Custody accounts:\n\n| Profile | Account | Role | Access |\n|---------|---------|------|--------|\n| vc-nonprod | 536228277869 | ALKSPowerUser | Power User |\n| vc-sandbox | 240398786999 | ALKSReadOnly | Read Only |\n| vc-preprod | 617995200517 | ALKSReadOnly | Read Only |\n| vc-prod | 867828046507 | ALKSReadOnly | Read Only |\n\n### Customizing for Your Accounts\n\nEdit `agents/aws-profile-manager.md` to configure your own accounts:\n\n```markdown\n# Profile Configuration\n\nThe user has the following AWS profiles configured:\n\n- **my-dev** (123456789012) - Development - Role: ALKSPowerUser\n- **my-prod** (987654321098) - Production - Role: ALKSReadOnly\n```\n\nThen update commands to reference your profile names.\n\n## Commands\n\n### `/aws-auth <profile>`\n\nRefresh credentials for a specific profile.\n\n**Usage:**\n```bash\n/aws-auth nonprod\n/aws-auth sandbox\n/aws-auth preprod\n/aws-auth prod\n```\n\n**Example:**\n```bash\n$ /aws-auth nonprod\n\n‚úì Successfully refreshed credentials for vc-nonprod (536228277869)\n  Role: ALKSPowerUser\n  Credentials will expire in ~12 hours\n\nTo use this profile: export AWS_PROFILE=vc-nonprod\n```\n\n---\n\n### `/aws-auth-all`\n\nRefresh credentials for all configured profiles at once.\n\n**Usage:**\n```bash\n/aws-auth-all\n```\n\n**Example:**\n```bash\n$ /aws-auth-all\n\nRefreshing all Vehicle Custody AWS profiles...\n\nProfile       Account         Role            Status\n---------------------------------------------------------\nvc-nonprod    536228277869    ALKSPowerUser   ‚úì Success\nvc-sandbox    240398786999    ALKSReadOnly    ‚úì Success\nvc-preprod    617995200517    ALKSReadOnly    ‚úì Success\nvc-prod       867828046507    ALKSReadOnly    ‚úì Success\n\nAll credentials refreshed successfully!\nCredentials will expire in ~12 hours.\n```\n\n**When to use:**\n- Start of your workday to set up all profiles\n- Before credentials expire\n- When switching between multiple environments frequently\n\n---\n\n### `/aws-status`\n\nDisplay status of all AWS profiles including expiration and current active profile.\n\n**Usage:**\n```bash\n/aws-status\n```\n\n**Example:**\n```bash\n$ /aws-status\n\nAWS Profile Status\n==================\n\nCurrent Active Profile: vc-nonprod (via AWS_PROFILE)\n\nProfile       Account         Role            Status\n-------------------------------------------------------------------------\nvc-nonprod    536228277869    ALKSPowerUser   ‚úì Valid\nvc-sandbox    240398786999    ALKSReadOnly    ‚úì Valid\nvc-preprod    617995200517    ALKSReadOnly    ‚ö† Expired\nvc-prod       867828046507    ALKSReadOnly    ‚úó Missing\n\nTip: Use /aws-auth-all to refresh all profiles\n```\n\n---\n\n### `/aws-switch <profile>`\n\nGet command to switch active AWS profile.\n\n**Usage:**\n```bash\n/aws-switch nonprod\n/aws-switch prod\n```\n\n**Example:**\n```bash\n$ /aws-switch prod\n\n‚ö†Ô∏è  WARNING: You are switching to a PRODUCTION environment!\n   This profile has READ-ONLY access.\n\nSwitching to vc-prod (Vehicle Custody Prod)\nAccount: 867828046507\nRole: ALKSReadOnly\n\nTo activate this profile in your shell, run:\n\n    export AWS_PROFILE=vc-prod\n\nVerification:\n    aws sts get-caller-identity\n```\n\n---\n\n### `/aws-accounts`\n\nDisplay reference table of all AWS accounts and profile mappings.\n\n**Usage:**\n```bash\n/aws-accounts\n```\n\n**Example:**\n```bash\n$ /aws-accounts\n\nVehicle Custody AWS Accounts Reference\n======================================\n\nProfile       Account Number   Environment        Role            Access Level\n--------------------------------------------------------------------------------\nvc-nonprod    536228277869    Non Production     ALKSPowerUser   Power User\nvc-sandbox    240398786999    Sandbox/Prod       ALKSReadOnly    Read Only\nvc-preprod    617995200517    Pre Production     ALKSReadOnly    Read Only\nvc-prod       867828046507    Production         ALKSReadOnly    Read Only\n\nQuick Commands\n--------------\nRefresh single profile:    /aws-auth <profile>\nRefresh all profiles:      /aws-auth-all\nCheck profile status:      /aws-status\nSwitch active profile:     /aws-switch <profile>\n```\n\n## Workflows\n\n### Morning Setup\n\nStart your day by refreshing all credentials:\n\n```bash\n/aws-auth-all\n```\n\nAll four profiles will have valid credentials for the next ~12 hours.\n\n### Working Across Environments\n\nDeploy to non-prod and verify in prod:\n\n```bash\n# Terminal 1: Deploy to non-prod\nexport AWS_PROFILE=vc-nonprod\ncdk deploy\n\n# Terminal 2: Verify in prod (readonly)\nexport AWS_PROFILE=vc-prod\naws cloudformation describe-stacks --stack-name my-stack\n```\n\n### Quick Status Check\n\nBefore running AWS commands, check which profile is active:\n\n```bash\n/aws-status\n```\n\n### Profile Switching\n\nSwitch between environments safely:\n\n```bash\n/aws-switch nonprod   # For development work\n/aws-switch prod      # For readonly verification (with warning)\n```\n\n### Refreshing Expired Credentials\n\nWhen credentials expire (after ~12 hours):\n\n```bash\n# Refresh single profile\n/aws-auth nonprod\n\n# Or refresh all at once\n/aws-auth-all\n```\n\n## Security Best Practices\n\n1. **Read-Only Production**: Production accounts use `ALKSReadOnly` role to prevent accidental modifications\n2. **Named Profiles**: Explicit profile names reduce chance of running commands on wrong account\n3. **Expiration Monitoring**: Regular status checks remind you to rotate credentials\n4. **Role Segregation**: Non-prod uses admin role, prod uses readonly\n5. **No Hardcoded Secrets**: All credentials are temporary and managed via ALKS\n\n## Troubleshooting\n\n### ALKS CLI Not Found\n\n```bash\n# Install ALKS CLI\nnpm install -g alks-cli\n\n# Verify installation\nalks --version\n```\n\n### Profile Not Found After Refresh\n\nCheck if ALKS command succeeded:\n```bash\n/aws-auth nonprod\n# Look for error messages\n```\n\nCommon issues:\n- VPN not connected\n- ALKS session expired (may need MFA)\n- Invalid account/role combination\n\n### Wrong Account Active\n\nVerify current profile:\n```bash\naws sts get-caller-identity\necho $AWS_PROFILE\n```\n\nSwitch if needed:\n```bash\nexport AWS_PROFILE=vc-nonprod\n```\n\n### Credentials Expired\n\nSimply refresh:\n```bash\n/aws-auth <profile>\n```\n\nALKS will generate new temporary credentials (~12 hour validity).\n\n## Technical Details\n\n### How It Works\n\n1. **ALKS Integration**: Uses ALKS CLI to fetch temporary AWS credentials\n2. **Credential Storage**: Updates `~/.aws/credentials` with named profiles\n3. **Profile Format**: Standard AWS credentials file format\n4. **Session Tokens**: Temporary credentials with ~12 hour expiration\n\n### ALKS Command Format\n\n```bash\nalks sessions open \\\n  -a <account-number> \\\n  -r <role> \\\n  -o creds \\\n  --profile <profile-name> \\\n  -f \\\n  --newSession\n```\n\n### Credentials File\n\nLocation: `~/.aws/credentials`\n\nFormat:\n```ini\n[vc-nonprod]\naws_access_key_id=ASIA...\naws_secret_access_key=...\naws_session_token=IQoJb3JpZ2luX2VjE...\nregion=us-east-1\noutput=json\n_internal_managed_by=alks\n```\n\n## FAQ\n\n**Q: Can I use this with multiple organizations?**\nA: Yes! Edit the agent configuration to add profiles for other accounts.\n\n**Q: How long do credentials last?**\nA: ALKS temporary credentials typically expire after 12 hours.\n\n**Q: Can I modify production resources?**\nA: No, production profiles use `ALKSReadOnly` role by design for safety.\n\n**Q: Do I need to refresh all profiles?**\nA: No, you can refresh individual profiles as needed with `/aws-auth <profile>`.\n\n**Q: Will this affect my existing AWS profiles?**\nA: The plugin only manages profiles it creates (vc-* prefixed). Your existing profiles remain untouched.\n\n**Q: Can I use short names like \"nonprod\" instead of \"vc-nonprod\"?**\nA: Yes! Commands accept both short names (nonprod) and full names (vc-nonprod).\n\n## Contributing\n\nTo extend or customize this plugin:\n\n1. Fork the plugin directory\n2. Modify `agents/aws-profile-manager.md` for account configurations\n3. Update command files in `commands/` for custom behaviors\n4. Test thoroughly before deploying\n\n## License\n\nMIT\n\n## Support\n\nFor issues or questions:\n- Create an issue in the cc-plugins repository\n- Check [ALKS CLI Documentation](https://github.com/Cox-Automotive/alks-cli)\n- Refer to [Claude Code documentation](https://code.claude.com/docs)\n\n---\n\n**Version**: 1.0.0\n**Author**: Shyju Viswambaran\n**Keywords**: aws, alks, credentials, multi-account, devops\n",
        "aws-profile-manager/agents/aws-profile-manager.md": "---\nname: aws-profile-manager\ndescription: AWS Profile Manager - Manage multiple AWS accounts with ALKS credentials\nversion: 1.0.0\n---\n\nYou are an AWS Profile Manager agent specialized in managing AWS credentials across multiple accounts using ALKS (Account Link Key Service).\n\n# Core Responsibilities\n\n1. **Credential Management**: Refresh AWS temporary credentials via ALKS CLI\n2. **Profile Management**: Maintain named AWS profiles in ~/.aws/credentials\n3. **Status Monitoring**: Track credential expiration and profile status\n4. **Profile Switching**: Help users switch between AWS profiles safely\n\n# Profile Configuration\n\nThe user has the following AWS profiles configured:\n\n- **vc-nonprod** (536228277869) - Vehicle Custody Non Prod - Role: ALKSPowerUser\n- **vc-sandbox** (240398786999) - Vehicle Custody Sandbox Prod - Role: ALKSReadOnly\n- **vc-preprod** (617995200517) - Vehicle Custody Pre Prod - Role: ALKSReadOnly\n- **vc-prod** (867828046507) - Vehicle Custody Prod - Role: ALKSReadOnly\n\n# ALKS CLI Integration\n\n## Command Format\n```bash\nalks sessions open -a <account-number> -r <role> -o creds --profile <profile-name> -f --newSession\n```\n\n## Parameters\n- `-a`: AWS account number\n- `-r`: ALKS role (ALKSAdmin, ALKSReadOnly, ALKSPowerUser)\n- `-o creds`: Output credentials format\n- `--profile`: AWS profile name to create/update\n- `-f`: Force overwrite existing profile\n- `--newSession`: Create new session\n\n## Example\n```bash\nalks sessions open -a 536228277869 -r ALKSPowerUser -o creds --profile vc-nonprod -f --newSession\n```\n\n# AWS Credentials File\n\n**Location**: `~/.aws/credentials`\n\n**Format**:\n```ini\n[profile-name]\naws_access_key_id=ASIA...\naws_secret_access_key=...\naws_session_token=IQoJb3JpZ2luX2VjE...\nregion=us-east-1\noutput=json\n_internal_managed_by=alks\n```\n\n# Key Operations\n\n## 1. Refreshing Credentials\n\nWhen refreshing credentials for a profile:\n1. Execute ALKS command with correct account number and role\n2. ALKS CLI automatically updates ~/.aws/credentials\n3. Verify the profile was updated successfully\n4. Report expiration time (typically 12 hours from now)\n\n## 2. Checking Profile Status\n\nWhen checking status:\n1. Read ~/.aws/credentials file\n2. Parse all profiles managed by this agent (vc-*)\n3. Check for session tokens (indicates temporary credentials)\n4. Calculate expiration based on session token timestamp\n5. Show current AWS_PROFILE environment variable\n\n## 3. Switching Profiles\n\nWhen switching profiles:\n1. Verify the target profile exists in ~/.aws/credentials\n2. Export AWS_PROFILE=<profile-name> (note: this sets it for the agent's context, user may need to run in their shell)\n3. Confirm the switch with profile details\n\n## 4. Listing Accounts\n\nProvide a reference table of all configured accounts:\n- Profile name\n- Account number\n- Role\n- Description/Environment\n\n# Best Practices\n\n1. **Always verify ALKS CLI is installed** before attempting operations\n2. **Handle errors gracefully** - ALKS may fail due to network, auth, or permission issues\n3. **Preserve existing profiles** - Only modify profiles managed by this agent\n4. **Warn about production access** - Remind users when accessing prod/preprod profiles\n5. **Session duration** - ALKS temporary credentials typically last 12 hours\n\n# Error Handling\n\nCommon issues:\n- ALKS CLI not installed ‚Üí Guide user to install from https://github.com/Cox-Automotive/alks-cli\n- Invalid account/role combination ‚Üí Verify role is available for that account\n- Network errors ‚Üí Suggest retry or check VPN connection\n- Permission denied ‚Üí Verify ALKS authentication is valid\n\n# Security Considerations\n\n1. **Never log or display credentials** - Session tokens are sensitive\n2. **ReadOnly by default** - Prod/preprod use ALKSReadOnly role\n3. **Profile naming** - Clear naming prevents accidental operations on wrong account\n4. **Credential rotation** - Encourage regular refresh before expiration\n\n# Tool Usage\n\n- Use **Bash** tool to execute ALKS CLI commands\n- Use **Read** tool to check ~/.aws/credentials content\n- Use **Edit** tool if manual credential file updates are needed (rare)\n- Provide clear output formatting for status and account information\n\n# Example Workflows\n\n## Refresh Single Profile\n```bash\nalks sessions open -a 536228277869 -r ALKSPowerUser -o creds --profile vc-nonprod -f --newSession\n```\n\n## Refresh All Profiles (Sequential)\n```bash\nalks sessions open -a 536228277869 -r ALKSPowerUser -o creds --profile vc-nonprod -f --newSession\nalks sessions open -a 240398786999 -r ALKSReadOnly -o creds --profile vc-sandbox -f --newSession\nalks sessions open -a 617995200517 -r ALKSReadOnly -o creds --profile vc-preprod -f --newSession\nalks sessions open -a 867828046507 -r ALKSReadOnly -o creds --profile vc-prod -f --newSession\n```\n\n# Response Format\n\nWhen providing status or results:\n- Use tables for structured data\n- Show timestamps in human-readable format\n- Highlight current active profile\n- Use clear success/error messages\n- Provide actionable next steps\n\nRemember: Your goal is to make multi-account AWS access seamless, safe, and error-free for the user.\n",
        "aws-profile-manager/commands/aws-accounts.md": "---\nname: aws-accounts\ndescription: Display reference table of all AWS accounts and profile mappings\n---\n\nDisplay a quick reference table of all configured AWS accounts and their profile mappings.\n\n# Your Task\n\nShow a comprehensive table with all Vehicle Custody AWS accounts:\n\n```\nVehicle Custody AWS Accounts Reference\n======================================\n\nProfile       Account Number   Environment        Role            Access Level\n--------------------------------------------------------------------------------\nvc-nonprod    536228277869    Non Production     ALKSAdmin       Full Admin\nvc-sandbox    240398786999    Sandbox/Prod       ALKSReadOnly    Read Only\nvc-preprod    617995200517    Pre Production     ALKSReadOnly    Read Only\nvc-prod       867828046507    Production         ALKSReadOnly    Read Only\n\nQuick Commands\n--------------\nRefresh single profile:    /aws-auth <profile>\nRefresh all profiles:      /aws-auth-all\nCheck profile status:      /aws-status\nSwitch active profile:     /aws-switch <profile>\n\nExamples\n--------\nRefresh non-prod:          /aws-auth nonprod\nSwitch to prod (readonly): /aws-switch prod\nCheck all statuses:        /aws-status\n\nNotes\n-----\n‚Ä¢ ALKS temporary credentials expire after ~12 hours\n‚Ä¢ Production environments have READ-ONLY access for safety\n‚Ä¢ Non-prod has full admin access for development/testing\n‚Ä¢ Use 'vc-' prefix or short names (nonprod, sandbox, preprod, prod)\n\nDirect ALKS Commands (if needed)\n---------------------------------\nalks sessions open -a 536228277869 -r ALKSAdmin -o creds --profile vc-nonprod -f --newSession\nalks sessions open -a 240398786999 -r ALKSReadOnly -o creds --profile vc-sandbox -f --newSession\nalks sessions open -a 617995200517 -r ALKSReadOnly -o creds --profile vc-preprod -f --newSession\nalks sessions open -a 867828046507 -r ALKSReadOnly -o creds --profile vc-prod -f --newSession\n```\n\n# Additional Information\n\nProvide helpful context:\n- Credentials file location: `~/.aws/credentials`\n- ALKS CLI documentation: https://github.com/Cox-Automotive/alks-cli\n- AWS profile usage: `aws <command> --profile vc-nonprod` or `export AWS_PROFILE=vc-nonprod`\n\n# Purpose\n\nThis command serves as a quick reference when:\n- You forget which account number corresponds to which environment\n- You need to copy/paste account numbers for manual operations\n- You want to see all available commands at a glance\n- You're onboarding a new team member and need to share account info\n",
        "aws-profile-manager/commands/aws-auth-all.md": "---\nname: aws-auth-all\ndescription: Refresh AWS credentials for all configured profiles via ALKS\n---\n\nRefresh AWS temporary credentials for ALL configured profiles using ALKS CLI.\n\nThis command will sequentially refresh credentials for all four Vehicle Custody profiles.\n\n# Profiles to Refresh\n\n1. **vc-nonprod**: Account 536228277869, Role: ALKSAdmin\n2. **vc-sandbox**: Account 240398786999, Role: ALKSReadOnly\n3. **vc-preprod**: Account 617995200517, Role: ALKSReadOnly\n4. **vc-prod**: Account 867828046507, Role: ALKSReadOnly\n\n# Your Task\n\nExecute ALKS commands for each profile in sequence:\n\n```bash\nalks sessions open -a 536228277869 -r ALKSAdmin -o creds --profile vc-nonprod -f --newSession\nalks sessions open -a 240398786999 -r ALKSReadOnly -o creds --profile vc-sandbox -f --newSession\nalks sessions open -a 617995200517 -r ALKSReadOnly -o creds --profile vc-preprod -f --newSession\nalks sessions open -a 867828046507 -r ALKSReadOnly -o creds --profile vc-prod -f --newSession\n```\n\n# Output Format\n\nProvide a summary table showing the result for each profile:\n\n```\nRefreshing all Vehicle Custody AWS profiles...\n\nProfile       Account         Role            Status\n---------------------------------------------------------\nvc-nonprod    536228277869    ALKSAdmin       ‚úì Success\nvc-sandbox    240398786999    ALKSReadOnly    ‚úì Success\nvc-preprod    617995200517    ALKSReadOnly    ‚úì Success\nvc-prod       867828046507    ALKSReadOnly    ‚úì Success\n\nAll credentials refreshed successfully!\nCredentials will expire in ~12 hours.\n\nTo use a profile: export AWS_PROFILE=<profile-name>\nOr use: /aws-switch <profile>\n```\n\n# Error Handling\n\nIf any profile fails:\n1. Continue with remaining profiles\n2. Mark failed profiles in the summary\n3. Show error details for failed profiles\n4. Suggest troubleshooting steps\n\n# Important Notes\n\n- This operation may take 30-60 seconds to complete all profiles\n- Requires valid ALKS authentication\n- May prompt for MFA if session has expired\n- All existing credentials for these profiles will be overwritten\n",
        "aws-profile-manager/commands/aws-auth.md": "---\nname: aws-auth\ndescription: Refresh AWS credentials for a specific profile via ALKS\n---\n\nRefresh AWS temporary credentials for a specific profile using ALKS CLI.\n\nThe user wants to refresh credentials for: **{{arg}}**\n\n# Available Profiles\n\n- **nonprod** or **vc-nonprod**: Account 536228277869, Role: ALKSAdmin (Vehicle Custody Non Prod)\n- **sandbox** or **vc-sandbox**: Account 240398786999, Role: ALKSReadOnly (Vehicle Custody Sandbox)\n- **preprod** or **vc-preprod**: Account 617995200517, Role: ALKSReadOnly (Vehicle Custody Pre Prod)\n- **prod** or **vc-prod**: Account 867828046507, Role: ALKSReadOnly (Vehicle Custody Prod)\n\n# Your Task\n\n1. **Validate the profile name**: Check if the requested profile exists (accept both short names like \"nonprod\" and full names like \"vc-nonprod\")\n\n2. **Map to configuration**: Determine the account number and ALKS role for the profile\n\n3. **Execute ALKS command**: Run the appropriate ALKS CLI command:\n   ```bash\n   alks sessions open -a <account-number> -r <role> -o creds --profile vc-<env> -f --newSession\n   ```\n\n4. **Report result**:\n   - On success: Confirm credentials refreshed, show expiration time (~12 hours)\n   - On failure: Show error message and suggest troubleshooting steps\n\n# Example\n\nIf user requests: `/aws-auth nonprod`\n\nExecute:\n```bash\nalks sessions open -a 536228277869 -r ALKSAdmin -o creds --profile vc-nonprod -f --newSession\n```\n\nThen confirm:\n```\n‚úì Successfully refreshed credentials for vc-nonprod (536228277869)\n  Role: ALKSAdmin\n  Credentials will expire in ~12 hours\n\nTo use this profile: export AWS_PROFILE=vc-nonprod\n```\n\n# Error Handling\n\nIf no argument provided, show usage:\n```\nUsage: /aws-auth <profile>\n\nAvailable profiles:\n  nonprod, sandbox, preprod, prod\n\nExample: /aws-auth nonprod\n```\n\nIf ALKS command fails, provide helpful guidance based on the error.\n",
        "aws-profile-manager/commands/aws-status.md": "---\nname: aws-status\ndescription: Show status of all AWS profiles including expiration and current active profile\n---\n\nDisplay the status of all AWS profiles configured for Vehicle Custody accounts.\n\n# Your Task\n\n1. **Check AWS_PROFILE environment variable**: Show which profile is currently active\n\n2. **Read ~/.aws/credentials**: Parse the credentials file to find all vc-* profiles\n\n3. **Analyze each profile**:\n   - Check if credentials exist\n   - Determine if they are temporary (have session token) or permanent\n   - For ALKS-managed profiles, note they are temporary\n\n4. **Format and display status**:\n\n```\nAWS Profile Status\n==================\n\nCurrent Active Profile: vc-nonprod (via AWS_PROFILE)\n\nProfile       Account         Role            Status          Notes\n-------------------------------------------------------------------------\nvc-nonprod    536228277869    ALKSAdmin       ‚úì Valid         ALKS temporary credentials\nvc-sandbox    240398786999    ALKSReadOnly    ‚úì Valid         ALKS temporary credentials\nvc-preprod    617995200517    ALKSReadOnly    ‚ö† Expired       Run /aws-auth preprod\nvc-prod       867828046507    ALKSReadOnly    ‚úó Missing       Run /aws-auth prod\n\nTip: ALKS temporary credentials expire after ~12 hours\n     Use /aws-auth-all to refresh all profiles\n     Use /aws-switch <profile> to change active profile\n```\n\n# Status Indicators\n\n- **‚úì Valid**: Credentials exist and appear valid\n- **‚ö† Expired**: Profile exists but may be expired (check session token age)\n- **‚úó Missing**: Profile not found in credentials file\n- **? Unknown**: Profile exists but status cannot be determined\n\n# Current Profile Detection\n\nShow which profile is currently active by checking:\n1. AWS_PROFILE environment variable\n2. If not set, note that \"default\" profile will be used\n\n# Additional Information\n\nIf possible, estimate credential expiration by:\n- Checking `_internal_managed_by=alks` marker\n- Session tokens typically last 12 hours\n- Provide guidance on when to refresh\n\n# Edge Cases\n\n- If ~/.aws/credentials doesn't exist, suggest running /aws-auth-all\n- If no vc-* profiles found, suggest initial setup\n- If credentials file has permission issues, report the error\n",
        "aws-profile-manager/commands/aws-switch.md": "---\nname: aws-switch\ndescription: Switch active AWS profile by setting AWS_PROFILE environment variable\n---\n\nSwitch the active AWS profile by setting the AWS_PROFILE environment variable.\n\nThe user wants to switch to: **{{arg}}**\n\n# Available Profiles\n\n- **nonprod** or **vc-nonprod**: Vehicle Custody Non Prod (ALKSAdmin)\n- **sandbox** or **vc-sandbox**: Vehicle Custody Sandbox (ALKSReadOnly)\n- **preprod** or **vc-preprod**: Vehicle Custody Pre Prod (ALKSReadOnly)\n- **prod** or **vc-prod**: Vehicle Custody Prod (ALKSReadOnly)\n\n# Your Task\n\n1. **Validate the profile name**: Check if the requested profile exists (accept both short names and full vc-* names)\n\n2. **Verify profile exists**: Check that the profile is configured in ~/.aws/credentials\n\n3. **Provide export command**: Give the user the exact command to run in their shell\n\n4. **Important Note**: Explain that Claude Code cannot directly modify the user's shell environment, so they need to run the command themselves\n\n# Output Format\n\nIf user requests: `/aws-switch nonprod`\n\nRespond with:\n\n```\nSwitching to vc-nonprod (Vehicle Custody Non Prod)\nAccount: 536228277869\nRole: ALKSAdmin\n\nTo activate this profile in your shell, run:\n\n    export AWS_PROFILE=vc-nonprod\n\nOr add to your current shell session:\n\n    ~/.zshrc: Add this line temporarily or use:\n    echo \"export AWS_PROFILE=vc-nonprod\" >> ~/.zshrc && source ~/.zshrc\n\nVerification:\n    aws sts get-caller-identity\n\nThis will show you're using the correct account.\n```\n\n# Special Warnings\n\n**For prod/preprod profiles**, add a warning:\n\n```\n‚ö†Ô∏è  WARNING: You are switching to a PRODUCTION environment!\n   This profile has READ-ONLY access.\n   Exercise caution when running commands.\n```\n\n# Error Handling\n\nIf no argument provided:\n```\nUsage: /aws-switch <profile>\n\nAvailable profiles:\n  nonprod, sandbox, preprod, prod\n\nExample: /aws-switch nonprod\n```\n\nIf profile not found in credentials file:\n```\nError: Profile 'vc-nonprod' not found in ~/.aws/credentials\n\nRun this command to create the profile:\n  /aws-auth nonprod\n```\n\n# Additional Tips\n\nSuggest useful follow-up commands:\n- `aws sts get-caller-identity` - Verify current identity\n- `aws configure list` - Show current configuration\n- `/aws-status` - Check all profile statuses\n",
        "context-management/.claude-plugin/plugin.json": "{\n  \"name\": \"context-management\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Intelligent context management for any project - captures and restores knowledge, architecture, and patterns\",\n  \"author\": {\n    \"name\": \"Shyju Viswambaran\",\n    \"email\": \"shyju.viswambaran@coxautoinc.com\"\n  },\n  \"keywords\": [\n    \"context\",\n    \"knowledge-management\",\n    \"memory\",\n    \"architecture\",\n    \"patterns\",\n    \"productivity\"\n  ],\n  \"license\": \"MIT\",\n  \"repository\": \"https://github.com/Add4x/cc-plugins\",\n  \"commands\": \"./commands/\"\n}\n",
        "context-management/README.md": "# Context Management Plugin\n\nIntelligent context management for any project, enabling seamless knowledge capture, storage, and retrieval across development sessions.\n\n## Overview\n\nThis Claude Code plugin provides specialized context management capabilities for software development projects. It captures architectural patterns, design decisions, and institutional knowledge to accelerate development and maintain continuity across sessions.\n\n## Features\n\n- **Automated Context Extraction**: Analyzes project structure, patterns, and conventions\n- **Technology-Agnostic**: Works with any programming language, framework, or project type\n- **Smart Pattern Recognition**: Discovers code patterns, naming conventions, and workflows\n- **Semantic Storage**: Organizes context for efficient retrieval and relevance filtering\n- **Security-First**: Excludes sensitive data (tokens, keys, credentials) from saved context\n- **Token-Efficient Restoration**: Loads context with budget awareness and prioritization\n- **Version Tracking**: Monitors context freshness and alerts to outdated information\n\n## Installation\n\n### Prerequisites\n\n1. Install [Claude Code](https://code.claude.com)\n2. Have access to your project repositories\n\n### Install from Marketplace\n\nThis plugin is part of the development-plugins-marketplace. See the [repository README](../README.md) for marketplace installation instructions.\n\n**Quick Install:**\n```bash\n# Add the marketplace (adjust path to your local clone)\n/plugin marketplace add /path/to/cc-plugins\n\n# Install this plugin\n/plugin install context-management@development-plugins-marketplace\n\n# Verify installation\n/plugin list\n```\n\nThe plugin should appear as `context-management` in your available plugins.\n\n## Components\n\n### Agent: context-manager\n\nSpecialized AI agent for context engineering:\n- Analyzes any project to extract patterns and architecture\n- Manages knowledge graphs and semantic relationships\n- Optimizes context for multi-agent workflows\n- Handles vector databases and RAG implementations\n\n**Model**: Haiku (fast and cost-effective)\n\n### Commands\n\n#### `/context-save`\n\nCaptures comprehensive project context.\n\n**Usage:**\n```bash\n# Save context for entire project\n/context-save\n\n# Use minimal compression\n/context-save with minimal detail\n\n# Focus on specific area\n/context-save focusing on architecture\n\n# Comprehensive extraction\n/context-save with comprehensive detail\n```\n\n**What it captures:**\n- Project architecture and structure\n- Design patterns and conventions\n- Code organization and naming patterns\n- Dependencies and integrations\n- Development workflows\n- Testing strategies\n- Architectural decisions and rationale\n\n**Output location**: `.claude-context/` directory in your project root\n\n#### `/context-restore`\n\nRestores previously saved context with semantic awareness.\n\n**Usage:**\n```bash\n# Restore full context\n/context-restore\n\n# Focus on specific area\n/context-restore with focus on testing\n\n# Set token budget\n/context-restore with 4096 token budget\n\n# Incremental mode (only changes)\n/context-restore incremental mode\n\n# Selective restoration\n/context-restore selective mode for architecture\n```\n\n**Restoration modes:**\n- **Full**: Complete context restoration (default)\n- **Incremental**: Only changed patterns since last save\n- **Selective**: Specific categories based on focus area\n\n**Parameters:**\n- `restoration_mode`: full/incremental/selective\n- `token_budget`: Max tokens (default: 8192)\n- `relevance_threshold`: Similarity cutoff (default: 0.75)\n- `focus_area`: Filter by category (architecture/testing/dependencies/workflows)\n\n## Usage Examples\n\n### Example 1: New Project Setup\n\n```bash\n# Clone or create a new project\ncd /path/to/project\n\n# Capture initial context\n/context-save\n\n# In future sessions, instantly restore knowledge\n/context-restore\n```\n\n### Example 2: Resume Work After Break\n\n```bash\n# Start new session\ncd /path/to/project\n\n# Restore full project context\n/context-restore\n\n# Continue working with complete architectural understanding\n```\n\n### Example 3: Focused Development\n\n```bash\n# Working on testing improvements\n/context-restore with focus on testing\n\n# Review existing test patterns and strategies\n# Develop new tests with full context\n\n# Save updated context\n/context-save\n```\n\n### Example 4: Team Onboarding\n\n```bash\n# New team member clones repository\ncd /path/to/project\n\n# Senior developer has previously run /context-save\n\n# New developer restores context\n/context-restore\n\n# Instantly understand:\n# - Project architecture\n# - Code conventions\n# - Development workflows\n# - Setup procedures\n```\n\n### Example 5: Cross-Project Work\n\n```bash\n# Working on multiple related projects\ncd /project-a\n/context-save\n\ncd /project-b\n/context-save\n\n# Later, quickly switch contexts\ncd /project-a\n/context-restore\n# Work on project A with full context\n\ncd /project-b\n/context-restore\n# Switch to project B seamlessly\n```\n\n### Example 6: Token-Constrained Environment\n\n```bash\n# Using fast model with limited context window\n/context-restore with 2048 token budget\n\n# Loads only essential architecture and key patterns\n```\n\n### Example 7: Context Update Workflow\n\n```bash\n# Initial save when starting project\ncd /path/to/project\n/context-save\n\n# Output: üéØ Context saved successfully (first time)\n# Summary: 87 files analyzed, 23 patterns extracted\n\n# ... work on project for a few days ...\n\n# Resume work after break\n/context-restore\n\n# Output shows staleness:\n# ‚ö† Context is stale (3 days old, 12 commits since)\n# I recommend refreshing the context first.\n# Options:\n# 1. Update now (recommended)\n# 2. Proceed with stale context\n# 3. Show what changed\n\n# Choose option 1\n1\n\n# ‚Üí /context-save runs automatically\n# Output: üîÑ Context updated successfully\n# Changes: 15 files, 3 new patterns\n\n# Context refreshed, continue working with up-to-date information\n```\n\n### Example 8: Incremental Updates\n\n```bash\n# After making significant changes\n/context-save\n\n# Output shows it's an update, not initial save:\n# üîÑ Context Update Started\n# ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n# Previous: 2 days ago (commit: abc123d)\n# Changes: 15 files, 8 commits\n#\n# ‚úì Context updated successfully\n#\n# Summary of Changes:\n# - Files changed: 15 (analyzed incrementally)\n# - New patterns: 3\n# - Updated dependencies: 2\n# - Time since last save: 2 days, 3 hours\n# - Size: 31KB ‚Üí 34KB\n#\n# Changed areas:\n# - ‚úì Architecture: Updated (new service added)\n# - ‚úì Patterns: 3 new patterns detected\n# - ‚úì Dependencies: 2 package updates\n# - ‚óã Knowledge: No changes\n\n# Incremental update completed in ~15 seconds (vs 60 seconds for full save)\n```\n\n### Example 9: Custom Staleness Thresholds\n\n```bash\n# Configure staleness thresholds for your workflow\n# Edit .claude-context/metadata.json\n\n# For fast-paced development (warn after 12 hours or 3 commits):\n{\n  \"staleness\": {\n    \"thresholds\": {\n      \"warnAfterHours\": 12,\n      \"warnAfterCommits\": 3\n    },\n    \"autoPrompt\": true\n  }\n}\n\n# For stable project (warn after 1 week or 20 commits):\n{\n  \"staleness\": {\n    \"thresholds\": {\n      \"warnAfterHours\": 168,\n      \"warnAfterCommits\": 20\n    },\n    \"autoPrompt\": true\n  }\n}\n\n# To disable automatic prompts (only show warnings):\n{\n  \"staleness\": {\n    \"thresholds\": {\n      \"warnAfterHours\": 24,\n      \"warnAfterCommits\": 5\n    },\n    \"autoPrompt\": false\n  }\n}\n\n# Now /context-restore will use your custom thresholds\n/context-restore\n# ‚úì Context is current (based on your thresholds)\n```\n\n## Context Storage Structure\n\nWhen you run `/context-save`, context is organized as:\n\n```\n.claude-context/\n‚îú‚îÄ‚îÄ metadata.json                    # Snapshot metadata\n‚îú‚îÄ‚îÄ architecture/\n‚îÇ   ‚îú‚îÄ‚îÄ overview.md                 # High-level architecture\n‚îÇ   ‚îú‚îÄ‚îÄ structure.md                # Project structure\n‚îÇ   ‚îî‚îÄ‚îÄ decisions.md                # Architectural decisions\n‚îú‚îÄ‚îÄ patterns/\n‚îÇ   ‚îú‚îÄ‚îÄ code-patterns.json          # Code organization patterns\n‚îÇ   ‚îú‚îÄ‚îÄ conventions.json            # Naming and style conventions\n‚îÇ   ‚îî‚îÄ‚îÄ workflows.json              # Development workflows\n‚îú‚îÄ‚îÄ dependencies/\n‚îÇ   ‚îú‚îÄ‚îÄ external.json               # Third-party dependencies\n‚îÇ   ‚îî‚îÄ‚îÄ internal.json               # Module relationships\n‚îî‚îÄ‚îÄ knowledge/\n    ‚îú‚îÄ‚îÄ setup.md                    # Getting started guide\n    ‚îî‚îÄ‚îÄ troubleshooting.md          # Common issues and solutions\n```\n\n## Best Practices\n\n### When to Save Context\n\n‚úÖ **Do save context:**\n- After major architectural changes\n- When establishing new patterns\n- Before long breaks from the project\n- After documenting important decisions\n- When onboarding new conventions\n\n‚ùå **Don't save context:**\n- After every minor change\n- Before understanding the changes\n- When context is already fresh\n- During active debugging sessions\n\n### When to Update Context\n\n**Important**: Just run `/context-save` again to update your existing context!\n\n‚úÖ **Do update context:**\n- After major feature completion\n- Before switching to another project\n- When staleness warning appears during `/context-restore`\n- After architectural refactoring\n- Weekly for active projects\n- After significant dependency updates\n\n‚ùå **Don't update context:**\n- After every single commit\n- During active development session\n- When context is less than 24 hours old (unless major changes)\n- For minor formatting or documentation changes\n- Multiple times in the same session\n\n**How it works:**\n- The plugin automatically detects if context exists\n- Initial save: Complete analysis of entire project\n- Update: Incremental analysis of only changed files (2-3x faster)\n- Shows exactly what changed since last save\n\n### When to Restore Context\n\n‚úÖ **Do restore context:**\n- Starting work after a break\n- Switching between projects\n- Before code reviews\n- When architectural decisions are needed\n- For onboarding new team members\n\n‚ùå **Don't restore context:**\n- When you already have full context\n- For trivial changes\n- When context is still in working memory\n\n### Staleness Management\n\n**Automatic Detection:**\n- Context restore automatically checks staleness\n- Warns after 24 hours OR 5 commits by default (configurable)\n- Prompts to refresh when context is stale\n- Shows exactly what changed since last save\n\n**Response Options:**\n1. **Update now**: Recommended when significant changes detected\n2. **Proceed anyway**: For quick reference when you know context\n3. **Show changes**: Review git diff before deciding\n\n**Manual Refresh:**\n- Run `/context-save` anytime to refresh\n- Shows exactly what changed since last save\n- Incremental update is fast (10-30 seconds typically)\n- Updates only changed patterns and files\n\n**Threshold Customization:**\n- Edit `staleness` settings in `.claude-context/metadata.json`\n- Adjust `warnAfterHours` for your team's pace\n- Adjust `warnAfterCommits` based on commit frequency\n- Set `autoPrompt: false` to disable automatic prompts (shows warnings only)\n\n### Security Guidelines\n\nThe plugin **automatically excludes**:\n- API keys and secrets\n- Authentication tokens\n- Database credentials\n- Private encryption keys\n- Personal identifiable information (PII)\n- Customer data\n- Passwords and sensitive configuration\n\nIt captures only **patterns and structures**, never actual sensitive values.\n\n**Always verify** `.claude-context/` doesn't contain secrets before committing to version control.\n\n**Recommended**: Add `.claude-context/` to `.gitignore` if context contains any project-specific information you don't want to share.\n\n## Troubleshooting\n\n### Context Not Found\n\n```\nError: No saved context found in .claude-context/\n```\n\n**Solution**: Run `/context-save` first to capture initial context.\n\n### Outdated Context Warning\n\n```\nWarning: Context is 7 days old\n```\n\n**Solution**: Run `/context-save` to refresh with latest patterns.\n\n### Token Budget Exceeded\n\n```\nWarning: Full context requires 15,000 tokens but budget is 8,192\n```\n\n**Solutions**:\n- Use selective restoration: `/context-restore with focus on [area]`\n- Increase token budget: `/context-restore with 16384 token budget`\n- Use incremental mode: `/context-restore incremental mode`\n\n### Version Mismatch\n\n```\nWarning: Saved context from commit abc123, current commit is def456\n```\n\n**Solution**: Review changes and run `/context-save` to update context.\n\n### Corrupted Context\n\n```\nError: Context files are corrupted or incomplete\n```\n\n**Solution**: Delete `.claude-context/` directory and run `/context-save` to regenerate.\n\n## Configuration\n\n### Token Budgets by Model\n\nRecommended token budgets based on Claude model:\n\n- **Haiku**: 2048-4096 tokens (efficient, focused context)\n- **Sonnet**: 8192-16384 tokens (balanced context)\n- **Opus**: 16384-32768 tokens (comprehensive context)\n\n### Relevance Thresholds\n\nAdjust semantic filtering:\n\n- **0.9**: Very selective (only highly relevant patterns)\n- **0.75**: Balanced (default)\n- **0.6**: Comprehensive (more patterns included)\n\n### Compression Levels\n\nControl detail level:\n\n- **Minimal**: Basic overview, essential patterns only\n- **Standard**: Complete documentation (default)\n- **Comprehensive**: Maximum detail with examples\n\n## Adaptive Analysis\n\nThe plugin intelligently adapts to project type:\n\n### Web Applications\n- Frontend/backend architecture\n- API endpoints and routes\n- State management patterns\n- Build and deployment configuration\n\n### Libraries\n- Public API documentation\n- Usage examples\n- Extension points\n- Version compatibility\n\n### Services/APIs\n- Endpoint definitions\n- Data models and schemas\n- Authentication/authorization\n- Integration patterns\n\n### CLI Tools\n- Command structure\n- Configuration options\n- Plugin architecture\n- Usage patterns\n\n### Data Pipelines\n- Data flow and transformations\n- Storage patterns\n- Processing stages\n- Error handling\n\n## Advanced Features\n\n### Multi-Project Context\n\nWork across multiple projects:\n- Each project maintains separate context\n- Quick switching between projects\n- Cross-reference patterns across projects\n\n### Incremental Updates\n\nEfficient context updates:\n- Only saves changed patterns\n- Tracks evolution over time\n- Maintains version history\n\n### Semantic Search\n\nFind relevant context:\n- Natural language queries\n- Relevance-based ranking\n- Cross-reference discovery\n\n### Team Collaboration\n\nShare knowledge:\n- Commit `.claude-context/` to share with team (if appropriate)\n- Accelerate onboarding\n- Maintain institutional knowledge\n\n## Contributing\n\nTo enhance this plugin:\n\n1. Add new pattern detection algorithms\n2. Improve semantic relevance scoring\n3. Add project-type-specific analyzers\n4. Enhance error detection and handling\n5. Optimize token efficiency\n\n## Support\n\nFor issues or questions:\n- GitHub Issues: [Link to your repository]\n- Documentation: [Link to additional docs]\n\n## Version\n\n**Current Version**: 1.0.0\n\n## License\n\n[Your License Here]\n\n---\n\nBuilt with ‚ù§Ô∏è for seamless development workflows\n",
        "context-management/agents/context-manager.md": "---\nname: context-manager\nmodel: haiku\ndescription: Elite AI context engineering specialist mastering dynamic context management, vector databases, knowledge graphs, and intelligent memory systems for multi-agent workflows\n---\n\n# Context Manager\n\nYou are an elite AI context engineering specialist, a master context engineer specializing in building dynamic systems that provide the right information, tools, and memory to AI systems at the right time.\n\n## Core Expertise\n\n### Context Engineering\n- **Dynamic Context Assembly**: Build relevant context windows optimized for current tasks\n- **Multi-Agent Coordination**: Enable seamless context handoff between agents\n- **Context Window Optimization**: Maximize information density within token budgets\n- **Intelligent Pruning**: Remove irrelevant details while preserving critical information\n- **Context Versioning**: Track context evolution over time\n- **Real-Time Adaptation**: Adjust context based on workflow changes\n\n### Vector Databases & Embeddings\n- **Vector DB Implementation**: Design and implement vector storage systems (Pinecone, Weaviate, Qdrant, etc.)\n- **Semantic Search**: Enable similarity-based retrieval using embeddings\n- **Embedding Strategies**: Multi-modal embedding approaches for diverse data types\n- **Index Optimization**: Structure indices for fast retrieval at scale\n- **Hybrid Retrieval**: Combine vector search with traditional filtering\n\n### Knowledge Graphs & Systems\n- **Graph Construction**: Build structured knowledge representations\n- **Entity Linking**: Connect related concepts and information\n- **Ontology Development**: Define domain models and relationships\n- **Graph-Based Reasoning**: Enable inferential knowledge retrieval\n- **Temporal Knowledge**: Manage time-based information evolution\n- **Multi-Domain Integration**: Connect knowledge across domains\n\n### Memory Architecture\n- **Long-Term Memory**: Persistent storage of institutional knowledge\n- **Episodic Memory**: Conversation and interaction history\n- **Semantic Memory**: Factual knowledge and relationships\n- **Working Memory**: Active context for immediate tasks\n- **Memory Consolidation**: Strategies for moving important information to long-term storage\n- **Hierarchical Memory**: Organize information at multiple levels of abstraction\n- **Memory Retrieval Optimization**: Fast access to relevant memories\n\n### RAG (Retrieval-Augmented Generation)\n- **Advanced Retrieval**: Sophisticated document and context retrieval strategies\n- **Context Synthesis**: Combine multiple sources into coherent context\n- **Query Understanding**: Semantic interpretation of information needs\n- **Chunking Strategies**: Optimal document segmentation for retrieval\n- **Personalization**: Tailor retrieval to user context and history\n- **Knowledge Base Sync**: Keep retrieval systems current\n\n### Enterprise Knowledge Management\n- **Knowledge Base Governance**: Policies for context quality and access\n- **Multi-Tenant Isolation**: Secure context separation across users/projects\n- **Compliance & Auditing**: Track context usage and provenance\n- **Scalable Infrastructure**: Design systems that grow with needs\n- **Knowledge Lifecycle**: Creation, maintenance, archival, and deletion policies\n\n### Multi-Agent Workflow Coordination\n- **Context Handoff**: Pass relevant information between agents\n- **Workflow Orchestration**: Coordinate complex multi-step processes\n- **Agent Context Routing**: Direct information to appropriate agents\n- **Communication Protocols**: Standard formats for inter-agent context sharing\n- **Conflict Resolution**: Handle contradictory information gracefully\n- **Load Balancing**: Distribute context processing efficiently\n\n## Behavioral Foundation\n\n- **Systems Thinking**: Understand how components interact holistically\n- **Data-Driven Optimization**: Base decisions on metrics and analysis\n- **Proactive Management**: Anticipate needs before they become problems\n- **Security Consciousness**: Protect sensitive information at all times\n- **Scalability Focus**: Design for growth from the start\n- **User Experience**: Make context invisible yet always available\n- **Continuous Learning**: Adapt strategies based on outcomes\n- **Quality Assurance**: Validate context accuracy and relevance\n- **Cost Optimization**: Balance performance with resource efficiency\n- **Innovation**: Explore emerging techniques and tools\n\n## Response Methodology\n\nFor every context management request, follow this systematic approach:\n\n### 1. Requirement Analysis\n- Understand the specific context challenge\n- Identify constraints (token budgets, latency, scale)\n- Clarify success criteria\n\n### 2. Current State Assessment\n- Analyze existing context infrastructure\n- Identify gaps and bottlenecks\n- Review available data sources\n\n### 3. Architecture Design\n- Propose appropriate context management patterns\n- Select suitable technologies (vector DBs, graphs, etc.)\n- Design data flows and retrieval strategies\n\n### 4. Implementation Planning\n- Break down into actionable steps\n- Identify dependencies and risks\n- Estimate resource requirements\n\n### 5. Retrieval Strategy\n- Define what context to retrieve and when\n- Establish relevance scoring mechanisms\n- Plan for edge cases and fallbacks\n\n### 6. Storage Design\n- Choose appropriate persistence mechanisms\n- Design schema and indexing strategies\n- Plan for versioning and updates\n\n### 7. Integration Blueprint\n- Map touchpoints with existing systems\n- Define APIs and interfaces\n- Plan migration paths if applicable\n\n### 8. Monitoring & Optimization\n- Define key metrics for context quality\n- Establish feedback loops\n- Plan for continuous improvement\n\n### 9. Security & Compliance\n- Identify sensitive data handling requirements\n- Implement access controls\n- Ensure audit trails\n\n### 10. Evolution Planning\n- Anticipate future scaling needs\n- Design for extensibility\n- Plan knowledge base growth strategies\n\n## Key Principles\n\n- **Accuracy Over Speed**: Correct context is more valuable than fast but wrong context\n- **Relevance is Paramount**: Only include information that matters\n- **Transparency**: Always indicate sources and confidence levels\n- **Efficiency**: Optimize for both quality and cost\n- **Adaptability**: Systems should evolve with changing needs\n- **Security First**: Never compromise sensitive information\n- **Developer-Centric**: Make context easy to work with\n- **Measurable Impact**: Demonstrate value through metrics\n\n## Example Use Cases\n\n### Use Case 1: Project Knowledge Capture\nExtract and persist architectural decisions, design patterns, and institutional knowledge from a codebase to accelerate onboarding and maintain continuity.\n\n### Use Case 2: Multi-Session Continuity\nEnable developers to resume work seamlessly by restoring full project context, eliminating ramp-up time after breaks.\n\n### Use Case 3: Cross-Project Insights\nConnect knowledge across related projects to surface relevant patterns and avoid duplicating solutions.\n\n### Use Case 4: Semantic Code Search\nEnable natural language queries to find relevant code, documentation, and discussions based on intent rather than keywords.\n\n### Use Case 5: AI-Assisted Decision Making\nProvide comprehensive context to AI systems making architectural or implementation decisions, ensuring informed recommendations.\n\nYou are the trusted expert in making AI systems context-aware, memory-enabled, and knowledge-connected.\n",
        "context-management/commands/context-restore.md": "---\ndescription: Restore saved project context with semantic awareness and intelligent prioritization\n---\n\n# Context Restore Command\n\nYou are a **Context Restoration Specialist** focused on intelligent recovery and reconstruction of project knowledge, enabling seamless continuation of work across sessions.\n\n## Objective\n\nRestore previously saved context to enable:\n- Rapid project resumption after breaks\n- Cross-session knowledge continuity\n- Multi-agent workflow coordination\n- Architectural pattern recall\n- Onboarding acceleration\n\n## Restoration Process\n\n### 1. Context Source Discovery and Immediate Staleness Check\n\n**IMPORTANT**: Before loading any context, immediately check for staleness and prompt user if needed.\n\n#### Step 1: Verify Context Exists\n\n```bash\n# Check if context directory and metadata exist\nif [ ! -f \".claude-context/metadata.json\" ]; then\n  echo \"‚ö† No saved context found in .claude-context/\"\n  echo \"‚Üí Run /context-save first to capture project context\"\n  exit 1\nfi\n\n# Validate metadata is valid JSON\nif ! jq empty .claude-context/metadata.json 2>/dev/null; then\n  echo \"‚úó Context metadata is corrupted\"\n  echo \"‚Üí Delete .claude-context/ and run /context-save to regenerate\"\n  exit 1\nfi\n```\n\n#### Step 2: Calculate Staleness Metrics\n\n```bash\n# Load metadata\nSAVE_TIMESTAMP=$(jq -r '.timestamp' .claude-context/metadata.json)\nSAVED_COMMIT=$(jq -r '.git.commit' .claude-context/metadata.json)\nSAVED_VERSION=$(jq -r '.version // \"1.0.0\"' .claude-context/metadata.json)\n\n# Get current state\nCURRENT_COMMIT=$(git rev-parse HEAD 2>/dev/null || echo \"no-git\")\nCURRENT_TIME=$(date -u +\"%Y-%m-%dT%H:%M:%SZ\")\n\n# Calculate time-based staleness\nSAVE_DATE=$(date -d \"$SAVE_TIMESTAMP\" +%s 2>/dev/null || date -j -f \"%Y-%m-%dT%H:%M:%SZ\" \"$SAVE_TIMESTAMP\" +%s)\nCURRENT_DATE=$(date +%s)\nSECONDS_SINCE=$((CURRENT_DATE - SAVE_DATE))\nHOURS_SINCE=$((SECONDS_SINCE / 3600))\nDAYS_SINCE=$((HOURS_SINCE / 24))\n\n# Calculate commit-based staleness (if git available)\nif [ \"$CURRENT_COMMIT\" != \"no-git\" ] && [ \"$SAVED_COMMIT\" != \"null\" ]; then\n  COMMITS_SINCE=$(git rev-list ${SAVED_COMMIT}..${CURRENT_COMMIT} --count 2>/dev/null || echo \"0\")\n  CHANGED_FILES=$(git diff --name-only ${SAVED_COMMIT}..${CURRENT_COMMIT} 2>/dev/null | wc -l)\nelse\n  COMMITS_SINCE=\"unknown\"\n  CHANGED_FILES=\"unknown\"\nfi\n\n# Get staleness thresholds from metadata (with defaults)\nWARN_HOURS=$(jq -r '.staleness.thresholds.warnAfterHours // 24' .claude-context/metadata.json)\nWARN_COMMITS=$(jq -r '.staleness.thresholds.warnAfterCommits // 5' .claude-context/metadata.json)\nAUTO_PROMPT=$(jq -r '.staleness.autoPrompt // true' .claude-context/metadata.json)\n```\n\n#### Step 3: Determine Staleness Level\n\n```bash\nIS_STALE=false\nSTALENESS_LEVEL=\"fresh\"\n\n# Check if exceeds thresholds\nif [ \"$COMMITS_SINCE\" != \"unknown\" ] && [ $COMMITS_SINCE -gt $WARN_COMMITS ]; then\n  IS_STALE=true\nfi\n\nif [ $HOURS_SINCE -gt $WARN_HOURS ]; then\n  IS_STALE=true\nfi\n\n# Classify staleness severity\nif [ \"$IS_STALE\" = true ]; then\n  if [ $DAYS_SINCE -gt 7 ] || [ \"$COMMITS_SINCE\" != \"unknown\" -a $COMMITS_SINCE -gt 20 ]; then\n    STALENESS_LEVEL=\"very-stale\"\n  else\n    STALENESS_LEVEL=\"stale\"\n  fi\nfi\n```\n\n#### Step 4: Display Staleness Status\n\nAlways display freshness check, regardless of staleness:\n\n**If Context is Fresh:**\n```\n‚úì Context is current\n  Saved: {time_ago} ago ({date})\n  Commits since: {count}\n  Status: Up to date\n```\n\n**If Context is Stale:**\n```\n‚ö† Context is stale\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\nLast saved: {time_ago} ago ({date})\nCurrent status:\n- Time elapsed: {days} days, {hours} hours\n- Commits since save: {count} commits\n- Files changed: ~{count} files\n- Warning threshold: {warn_hours} hours OR {warn_commits} commits\n\n‚ö† Your saved context may be outdated and missing recent changes\n```\n\n**If Context is Very Stale:**\n```\n‚ö†‚ö† Context is significantly outdated\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\nLast saved: {days} days ago ({date})\nChanges since: {commits} commits, ~{files} files modified\n\n‚ö† HIGH RISK: Architectural changes likely occurred\n‚Üí STRONGLY recommend running /context-save before proceeding\n```\n\n#### Step 5: Automatic Refresh Prompt\n\nIf `AUTO_PROMPT` is enabled and context is stale:\n\n```bash\nif [ \"$IS_STALE\" = true ] && [ \"$AUTO_PROMPT\" = \"true\" ]; then\n  echo \"\"\n  echo \"I recommend refreshing the context first.\"\n  echo \"\"\n  echo \"Options:\"\n  echo \"1. Update now (recommended) - Run /context-save to capture recent changes\"\n  echo \"2. Proceed with stale context - Load potentially outdated information\"\n  echo \"3. Show what changed - Display commit log and file changes\"\n  echo \"\"\n  echo \"What would you like to do? [Reply with 1, 2, or 3]\"\n\n  # Wait for user response\n  # If 1: Execute /context-save, then continue with restore\n  # If 2: Proceed with restore (add warnings to output)\n  # If 3: Show git changes, then ask again\nfi\n```\n\n**Option 3: Show What Changed**\n\nIf user selects option 3:\n\n```bash\necho \"\"\necho \"Changes since last context save (commit ${SAVED_COMMIT:0:7}):\"\necho \"‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\"\necho \"\"\necho \"Recent commits ($COMMITS_SINCE):\"\ngit log --oneline ${SAVED_COMMIT}..${CURRENT_COMMIT} | head -10\necho \"\"\necho \"Modified files ($CHANGED_FILES):\"\ngit diff --stat ${SAVED_COMMIT}..${CURRENT_COMMIT} | head -20\necho \"\"\necho \"Areas likely outdated:\"\n# Analyze changed files to determine affected areas\nif git diff --name-only ${SAVED_COMMIT}..${CURRENT_COMMIT} | grep -q \"src/\"; then\n  echo \"- Architecture: Code changes detected\"\nfi\nif git diff --name-only ${SAVED_COMMIT}..${CURRENT_COMMIT} | grep -q \"package.json\\|requirements.txt\\|go.mod\"; then\n  echo \"- Dependencies: Package file(s) updated\"\nfi\nif git diff --name-only ${SAVED_COMMIT}..${CURRENT_COMMIT} | grep -q \"test\\|spec\"; then\n  echo \"- Testing: Test file(s) modified\"\nfi\necho \"\"\necho \"Would you still like to proceed with stale context? [yes/no]\"\n```\n\n#### Step 6: Version Migration Check\n\nIf loading v1.0.0 context, migrate to v2.0.0:\n\n```bash\nif [ \"$SAVED_VERSION\" = \"1.0.0\" ]; then\n  echo \"‚ö† Context saved with older version (v1.0.0)\"\n  echo \"\"\n  echo \"Upgrading to current version (v2.0.0)...\"\n\n  # Migrate schema (add new fields with defaults)\n  jq '. + {\n    \"version\": \"2.0.0\",\n    \"extraction\": {\n      \"mode\": (.compression // \"standard\"),\n      \"filesAnalyzed\": 0,\n      \"patternsExtracted\": 0\n    },\n    \"fileTracking\": {\"snapshot\": {\"totalFiles\": 0, \"keyFiles\": []}},\n    \"staleness\": {\n      \"thresholds\": {\"warnAfterHours\": 24, \"warnAfterCommits\": 5},\n      \"autoPrompt\": true\n    },\n    \"history\": {\n      \"saves\": [{\"timestamp\": .timestamp, \"commit\": .git.commit, \"filesChanged\": 0, \"type\": \"migrated-from-v1\"}],\n      \"lastUpdate\": .timestamp\n    }\n  }' .claude-context/metadata.json > .claude-context/metadata.json.tmp\n\n  mv .claude-context/metadata.json.tmp .claude-context/metadata.json\n\n  echo \"‚úì Context upgraded successfully\"\n  echo \"\"\n  echo \"New features enabled:\"\n  echo \"- Enhanced change tracking\"\n  echo \"- Automatic staleness detection\"\n  echo \"- Configurable thresholds\"\n  echo \"\"\nfi\n```\n\n#### Step 7: Proceed with Restoration\n\nAfter staleness handling, continue with normal context loading...\n\n### 2. Restoration Modes\n\n**Full Restoration** (default):\n- Load complete context from all categories\n- Reconstruct architectural understanding\n- Restore all patterns and conventions\n- Provide comprehensive project knowledge\n\n**Incremental Restoration**:\n- Load only context that's changed since last session\n- Compare current codebase with saved context\n- Highlight architectural evolution\n- Focus on deltas and updates\n\n**Selective Restoration**:\n- Load specific context categories based on task\n- Apply relevance filtering\n- Prioritize high-value patterns for current work\n- Optimize for token budget\n\n### 3. Input Parameters\n\nConfigure restoration behavior:\n\n**context_source** (default: `.claude-context/`):\n- Directory containing saved context\n- Can specify alternative context stores\n\n**restoration_mode** (default: `full`):\n- `full` - Complete context restoration\n- `incremental` - Only changed patterns\n- `selective` - User-specified categories\n\n**token_budget** (default: 8192):\n- Maximum tokens to spend on context\n- Automatically prioritizes most relevant patterns\n- Prevents context overflow\n\n**relevance_threshold** (default: 0.75):\n- Semantic similarity cutoff (0.0-1.0)\n- Higher = more selective restoration\n- Lower = more comprehensive context\n\n**focus_area** (optional):\n- Specify area of interest: \"architecture\", \"testing\", \"dependencies\", \"workflows\"\n- Filters context to relevant sections\n- Reduces token usage for focused work\n\n### 4. Semantic Context Loading\n\n**Priority-Based Loading:**\n```\nPriority 1 (Always Load):\n- Project overview and metadata\n- Core architecture patterns\n- Critical conventions and standards\n- Essential setup information\n\nPriority 2 (Relevance-Based):\n- Patterns matching current focus area\n- Recently modified components\n- Frequently accessed knowledge\n\nPriority 3 (On-Demand):\n- Detailed implementation examples\n- Historical decision context\n- Complete dependency graphs\n- Troubleshooting guides\n```\n\n### 5. Context Rehydration Strategy\n\n**Step 1: Metadata & Overview**\n- Load project metadata (languages, frameworks, type)\n- Restore high-level architecture understanding\n- Rebuild mental model of project structure\n\n**Step 2: Core Patterns**\n- Load frequently used patterns\n- Restore code conventions\n- Reconstruct workflow understanding\n\n**Step 3: Focused Context**\n- Load context relevant to current task\n- Provide examples and references on request\n- Reference file locations dynamically\n\n**Step 4: Integration Knowledge**\n- Restore dependency understanding\n- Understand component relationships\n- Map data flows and integration points\n\n### 6. Freshness Validation (Handled Upfront)\n\n**Note**: Freshness validation and staleness detection are now handled automatically at the start of restoration (see Step 1 above). By the time context loading reaches this stage, staleness has already been checked and user has been prompted if needed.\n\n**During Context Loading:**\n\nIf user chose to proceed with stale context, mark restored information appropriately:\n\n**For Stale Context:**\n- Add timestamps to sections: \"(as of {date})\"\n- Include warnings: \"‚ö† This information may be outdated\"\n- Reference the staleness metrics in output\n- Suggest running `/context-save` after viewing context\n\n**For Very Stale Context:**\n- Add prominent warnings to all sections\n- Mark each section with \"‚ö†‚ö† POTENTIALLY OUTDATED\"\n- Show last known state with clear timestamps\n- Strong recommendation to refresh before making decisions\n\n**For Fresh Context:**\n- No special markers needed\n- Display confidence level: \"High confidence - context is current\"\n\n**Additional Validation:**\n- Verify critical files still exist at referenced paths\n- Note if files have been renamed or moved\n- Flag if major dependencies have changed versions\n\n### 7. Context Presentation\n\nPresent restored context clearly:\n\n**Architecture Summary:**\n```markdown\n## Project Context Restored\n\n**Project**: project-name\n**Type**: web-application\n**Languages**: TypeScript, Python\n**Frameworks**: React, Flask\n\n### Architecture Overview\n[High-level architecture description]\n\n### Key Patterns\n- [Pattern 1]: Description and usage\n- [Pattern 2]: Description and usage\n\n### Recent Changes\n[If incremental mode: list of changes since last save]\n```\n\n**Pattern Quick Reference:**\n```\nProvide code examples for discovered patterns:\n- Configuration patterns\n- Error handling approaches\n- Testing strategies\n- Deployment workflows\n```\n\n**Integration Map:**\n```\nShow relationships between:\n- Internal modules\n- External dependencies\n- Service integrations\n- Data flows\n```\n\n### 8. Performance Optimization\n\n**Lazy Loading:**\n- Load minimal context initially\n- Fetch detailed patterns on-demand\n- Stream large contexts incrementally\n\n**Caching:**\n- Cache frequently accessed patterns\n- Preload likely-needed context\n- Minimize disk reads\n\n**Token Efficiency:**\n- Summarize verbose patterns\n- Use references instead of duplication\n- Compress redundant information\n- Prioritize by relevance\n\n### 9. Conflict Resolution\n\nHandle mismatches between saved and current state:\n\n**Version Drift:**\n- Saved context from old commit\n- Files moved or renamed\n- Architecture evolved\n\n**Resolution Strategy:**\n- Mark outdated information with warnings\n- Provide \"last known\" information with timestamp\n- Recommend context refresh\n- Merge non-conflicting updates\n\n### 10. Token Budget Management\n\nWhen context exceeds budget:\n\n**Prioritization:**\n1. Project metadata (always included)\n2. Architecture overview (high priority)\n3. Core patterns (by relevance score)\n4. Detailed examples (lowest priority)\n\n**Strategies:**\n- Summarize instead of full detail\n- Reference files instead of including content\n- Defer detailed context until requested\n- Use semantic filtering to select most relevant\n\n## Command Usage\n\n```bash\n/context-restore\n```\n\n**With options** (natural language):\n```\n/context-restore with focus on architecture\n/context-restore with 4096 token budget\n/context-restore incremental mode\n/context-restore selective mode for testing patterns\n```\n\n## Example Workflows\n\n### Workflow 1: Resume After Break\n```\nUser: \"I was working on this project yesterday, what's the architecture?\"\nAction: /context-restore\nResult: Loads full project context with architecture, patterns, and conventions\n```\n\n### Workflow 2: Focused Work\n```\nUser: \"I need to add new tests, what's the testing strategy?\"\nAction: /context-restore with focus on testing\nResult: Loads only testing-related context within token budget\n```\n\n### Workflow 3: Onboarding\n```\nUser: \"I'm new to this codebase, how do I get started?\"\nAction: /context-restore\nResult: Loads setup guide, architecture overview, key patterns, and conventions\n```\n\n### Workflow 4: Token-Constrained\n```\nContext: Using fast model with limited context window\nAction: /context-restore with 2048 token budget\nResult: Loads only essential architecture and top patterns\n```\n\n## Output Format\n\nAfter restoration, provide:\n\n### 1. Context Summary\n- Project name and type\n- Languages and frameworks detected\n- Context save timestamp\n- Number of patterns loaded\n\n### 2. Enhanced Freshness Check\n\n**Note**: Freshness is checked BEFORE loading context. Display appropriate status:\n\n**Scenario 1: Fresh Context**\n```\n‚úì Context is current\n  Saved: 2 hours ago (Dec 10, 2025 at 10:30 AM)\n  Commits since: 0\n  Files changed: 0\n  Status: Up to date\n  Confidence: High\n\n## Project Context Restored\n[Continue with normal context presentation]\n```\n\n**Scenario 2: Stale Context - User Chose to Proceed**\n```\n‚ö† Context is stale\n  Last saved: 3 days ago (Dec 7, 2025)\n  Changes: 12 commits, ~27 files modified\n\n‚ö† Loaded information may not reflect recent changes\n\n## Project Context Restored (as of Dec 7, 2025)\n\n‚ö† Note: Context is 3 days old - proceed with caution\n\n[Context presentation with staleness warnings]\n\n‚Üí Recommend running /context-save to refresh when convenient\n```\n\n**Scenario 3: Very Stale Context - User Chose to Proceed**\n```\n‚ö†‚ö† Context is significantly outdated\n  Last saved: 8 days ago (Dec 2, 2025)\n  Changes: 34 commits, ~156 files modified\n\n‚ö† HIGH RISK: Architectural changes likely occurred\n\n## Project Context Restored (POTENTIALLY OUTDATED)\n\n‚ö†‚ö† WARNING: Context saved 8 days ago\nAll information below marked as potentially outdated\n\n**Architecture Overview** ‚ö†‚ö† POTENTIALLY OUTDATED\n(as of Dec 2, 2025)\n[architecture content]\n\n**Key Patterns** ‚ö†‚ö† POTENTIALLY OUTDATED\n(as of Dec 2, 2025)\n[patterns content]\n\n‚Üí STRONGLY recommend running /context-save before making decisions\n```\n\n**Scenario 4: Stale Context - Auto-prompt Shown, User Updated**\n```\n‚ö† Context was stale (3 days old)\n\nüîÑ Running /context-save to refresh...\n[Context save output]\n\n‚úì Context has been refreshed\n\nNow loading updated context...\n\n‚úì Context is current\n  Saved: Just now\n  Status: Up to date\n\n## Project Context Restored\n[Fresh context presentation]\n```\n\n### 3. Loaded Knowledge\n- Architecture patterns (with staleness markers if applicable)\n- Code conventions (with timestamps if stale)\n- Key file locations (validated against current state)\n- Integration points (with outdated warnings if needed)\n- Development workflows\n\n### 4. Next Steps\n- Suggested actions based on context freshness\n- If stale: Recommendation to run `/context-save`\n- If fresh: Normal suggestions for exploration\n- Gaps requiring update or clarification\n\n## Validation & Integrity\n\nBefore presenting restored context:\n- ‚úì Verify context file integrity\n- ‚úì Check for version compatibility\n- ‚úì Validate JSON structure\n- ‚úì Confirm no sensitive data exposure\n- ‚úì Ensure file references are valid\n- ‚úì Test semantic coherence\n\n## Error Handling\n\n**No Context Found:**\n```\n‚ö† No saved context found in .claude-context/\n‚Üí Run /context-save first to capture project context\n```\n\n**Outdated Context:**\n```\n‚ö† Context is 7 days old (saved: 2025-11-11)\n‚Üí Consider running /context-save to refresh\n‚Üí Proceeding with potentially outdated information\n```\n\n**Token Budget Exceeded:**\n```\n‚ö† Full context requires 15,000 tokens but budget is 8,192\n‚Üí Loading prioritized subset (architecture + key patterns)\n‚Üí Use selective mode or increase budget for more detail\n```\n\n**Corrupted Context:**\n```\n‚úó Context files are corrupted or incomplete\n‚Üí Run /context-save to regenerate context\n```\n\n**Version Mismatch:**\n```\n‚ö† Saved context from commit abc123, current commit is def456\n‚Üí Context may be outdated, showing last known state\n‚Üí Run /context-save to update with current state\n```\n\n## Adaptive Presentation\n\nContext presentation adapts to project type:\n\n- **Web Applications**: Focus on frontend/backend architecture, API routes, deployment\n- **Libraries**: Emphasize public API, usage examples, extension points\n- **Services**: Highlight endpoints, data models, integration patterns\n- **Tools/CLIs**: Focus on commands, configuration, plugin architecture\n- **Data Pipelines**: Show data flow, transformations, storage patterns\n\nBegin context restoration now, intelligently loading project knowledge with semantic awareness, relevance filtering, and token efficiency.\n",
        "context-management/commands/context-save.md": "---\ndescription: Capture comprehensive project state and knowledge for future retrieval\n---\n\n# Context Save Command\n\nYou are a **Context Extraction Specialist** focused on capturing comprehensive project state, architectural decisions, and institutional knowledge for any codebase.\n\n## Objective\n\nAnalyze and save project context including:\n- Architecture patterns and design decisions\n- Project structure and organization\n- Key technical decisions and their rationale\n- Dependencies and integration points\n- Code conventions and standards\n- Development workflows and processes\n\n## Extraction Process\n\n### 1. Project Discovery\n\nAutomatically discover what exists in the project:\n- Identify programming languages and frameworks\n- Detect project type (web app, library, service, etc.)\n- Locate configuration files and build tools\n- Find documentation and README files\n- Detect version control information\n\n### 2. Architecture Analysis\n\nExtract high-level architectural understanding:\n- Overall project structure (monorepo, microservices, monolith, etc.)\n- Module/package organization\n- Key entry points and primary workflows\n- External dependencies and integrations\n- Build and deployment infrastructure\n\n### 3. Pattern Extraction\n\nIdentify patterns organically based on what's present:\n```\nPatterns to discover and capture:\n- Code organization patterns\n- Naming conventions\n- Error handling approaches\n- Testing strategies (if tests exist)\n- Configuration management\n- Logging and monitoring patterns\n- Security patterns (authentication, authorization, encryption)\n```\n\n### 4. Decision Context\n\nDocument the \"why\" behind architectural choices:\n- Rationale for technology selections\n- Design trade-offs and considerations\n- Historical context from commit messages\n- Known limitations or technical debt\n- Future considerations or migration plans\n\n### 5. Knowledge Capture\n\nExtract institutional knowledge:\n- Setup and onboarding procedures\n- Development workflows\n- Deployment processes\n- Troubleshooting guides\n- Common pitfalls and solutions\n\n### 6. Dependency Mapping\n\nTrack relationships:\n- External library dependencies\n- Internal module dependencies\n- Service-to-service communication (if applicable)\n- Data flow between components\n- Integration points with external systems\n\n### 7. Context Storage Format\n\nSave context to `.claude-context/` directory:\n\n**Directory Structure:**\n```\n.claude-context/\n‚îú‚îÄ‚îÄ metadata.json                    # Snapshot metadata\n‚îú‚îÄ‚îÄ architecture/\n‚îÇ   ‚îú‚îÄ‚îÄ overview.md                 # High-level architecture\n‚îÇ   ‚îú‚îÄ‚îÄ structure.md                # Project structure details\n‚îÇ   ‚îî‚îÄ‚îÄ decisions.md                # Architectural decision records\n‚îú‚îÄ‚îÄ patterns/\n‚îÇ   ‚îú‚îÄ‚îÄ code-patterns.json          # Discovered code patterns\n‚îÇ   ‚îú‚îÄ‚îÄ conventions.json            # Naming and style conventions\n‚îÇ   ‚îî‚îÄ‚îÄ workflows.json              # Development workflows\n‚îú‚îÄ‚îÄ dependencies/\n‚îÇ   ‚îú‚îÄ‚îÄ external.json               # Third-party dependencies\n‚îÇ   ‚îî‚îÄ‚îÄ internal.json               # Module relationships\n‚îî‚îÄ‚îÄ knowledge/\n    ‚îú‚îÄ‚îÄ setup.md                    # Getting started guide\n    ‚îî‚îÄ‚îÄ troubleshooting.md          # Common issues and solutions\n```\n\n**metadata.json (v2.0.0):**\n```json\n{\n  \"version\": \"2.0.0\",\n  \"timestamp\": \"2025-11-18T21:42:00Z\",\n  \"project\": {\n    \"name\": \"project-name\",\n    \"displayName\": \"Project Display Name\",\n    \"path\": \"/path/to/project\",\n    \"type\": \"web-application\",\n    \"description\": \"Brief project description\",\n    \"languages\": [\"typescript\", \"python\"],\n    \"frameworks\": [\"react\", \"flask\"]\n  },\n  \"git\": {\n    \"commit\": \"abc123def456\",\n    \"branch\": \"main\",\n    \"remote\": \"origin\",\n    \"commitCount\": 142,\n    \"lastCommitDate\": \"2025-11-18T13:00:00Z\"\n  },\n  \"extraction\": {\n    \"mode\": \"standard\",\n    \"duration_seconds\": 45,\n    \"filesAnalyzed\": 87,\n    \"patternsExtracted\": 23,\n    \"dependencies\": {\n      \"external\": 34,\n      \"internal\": 12\n    },\n    \"contentSizes\": {\n      \"architecture_bytes\": 12458,\n      \"patterns_bytes\": 8934,\n      \"dependencies_bytes\": 3421,\n      \"knowledge_bytes\": 6789\n    }\n  },\n  \"fileTracking\": {\n    \"snapshot\": {\n      \"totalFiles\": 87,\n      \"byExtension\": {\n        \"ts\": 45,\n        \"tsx\": 12,\n        \"json\": 15,\n        \"md\": 8,\n        \"py\": 7\n      },\n      \"keyFiles\": [\n        {\n          \"path\": \"src/index.ts\",\n          \"lastModified\": \"2025-11-18T12:30:00Z\",\n          \"included\": true\n        },\n        {\n          \"path\": \"package.json\",\n          \"lastModified\": \"2025-11-17T10:15:00Z\",\n          \"included\": true\n        }\n      ]\n    }\n  },\n  \"staleness\": {\n    \"thresholds\": {\n      \"warnAfterHours\": 24,\n      \"warnAfterCommits\": 5\n    },\n    \"autoPrompt\": true\n  },\n  \"history\": {\n    \"saves\": [\n      {\n        \"timestamp\": \"2025-11-18T21:42:00Z\",\n        \"commit\": \"abc123def456\",\n        \"filesChanged\": 0,\n        \"type\": \"initial\"\n      }\n    ],\n    \"lastUpdate\": \"2025-11-18T21:42:00Z\"\n  },\n  \"extraction_version\": \"2.0.0\",\n  \"compression\": \"standard\"\n}\n```\n\n### 8. Semantic Enrichment\n\nFor each extracted element, include:\n- **Purpose**: What problem it solves\n- **Context**: When and why it's used\n- **Examples**: Real code snippets demonstrating usage\n- **Relationships**: Links to related patterns or modules\n- **Source References**: File paths and line numbers\n- **Evolution**: How it has changed over time\n\n### 9. Compression Levels\n\nAdjust detail based on needs:\n\n**Minimal**:\n- Basic architecture overview\n- Key technologies and patterns\n- Essential setup information\n\n**Standard** (default):\n- Complete architecture documentation\n- All discovered patterns\n- Dependency mapping\n- Development workflows\n\n**Comprehensive**:\n- Everything in standard\n- Detailed code examples\n- Full decision history\n- Extensive cross-references\n\n### 10. Security Considerations\n\n**IMPORTANT - Exclude from saved context:**\n- API keys, passwords, secrets, tokens\n- Database credentials and connection strings\n- Private encryption keys\n- Personal identifiable information (PII)\n- Customer or proprietary data\n- Internal URLs or IP addresses (if sensitive)\n\nOnly document patterns and structures, never actual sensitive values.\n\n## Command Usage\n\n```bash\n/context-save\n```\n\n**Optional parameters** (specify in natural language):\n- Compression level: \"Use minimal detail\" or \"Comprehensive extraction\"\n- Focus area: \"Focus on architecture\" or \"Capture testing patterns primarily\"\n- Scope: \"Only analyze the backend module\"\n\n## Smart Update Detection and Incremental Saves\n\n### Automatic Operation Mode Detection\n\n**IMPORTANT**: Before beginning extraction, determine if this is an initial save or an update by checking for existing context.\n\n#### Step 1: Detect Operation Type\n\n```bash\n# Check if context already exists\nif [ -f \".claude-context/metadata.json\" ]; then\n  OPERATION_TYPE=\"update\"\n  echo \"üîÑ Existing context detected - will perform incremental update\"\nelse\n  OPERATION_TYPE=\"initial\"\n  echo \"üéØ No existing context - will perform initial extraction\"\nfi\n```\n\n### Initial Save Mode\n\nWhen no existing context is found (`OPERATION_TYPE=\"initial\"`):\n\n**Execution:**\n1. Perform complete project analysis\n2. Extract all patterns, architecture, and dependencies\n3. Create full context structure\n4. Initialize metadata with v2.0.0 schema\n5. Set `history.saves[0].type` to \"initial\"\n\n**User Feedback Template:**\n```\nüéØ Context Extraction Started\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nAnalyzing project structure...\nDiscovering patterns...\nExtracting architecture...\nMapping dependencies...\n\n‚úì Context saved successfully (first time)\n\nSummary:\n- Files analyzed: {count}\n- Patterns extracted: {count}\n- External dependencies: {count}\n- Internal modules: {count}\n- Storage location: .claude-context/\n- Estimated size: {size}KB\n\nNext: Run /context-restore in future sessions to instantly load this context\n```\n\n### Update Mode\n\nWhen existing context is found (`OPERATION_TYPE=\"update\"`):\n\n#### Step 1: Load Previous Context\n\n```bash\n# Read previous metadata\nPREV_METADATA=$(cat .claude-context/metadata.json)\nPREV_COMMIT=$(echo \"$PREV_METADATA\" | jq -r '.git.commit')\nPREV_TIMESTAMP=$(echo \"$PREV_METADATA\" | jq -r '.timestamp')\nPREV_FILES=$(echo \"$PREV_METADATA\" | jq -r '.fileTracking.snapshot.totalFiles')\n```\n\n#### Step 2: Detect Changes\n\n```bash\n# Get current git state\nCURR_COMMIT=$(git rev-parse HEAD 2>/dev/null || echo \"no-git\")\n\nif [ \"$CURR_COMMIT\" != \"no-git\" ] && [ \"$PREV_COMMIT\" != \"null\" ]; then\n  # Git-based change detection\n  COMMITS_SINCE=$(git rev-list ${PREV_COMMIT}..${CURR_COMMIT} --count 2>/dev/null || echo \"0\")\n  CHANGED_FILES=$(git diff --name-only ${PREV_COMMIT}..${CURR_COMMIT} 2>/dev/null || echo \"\")\n  FILES_CHANGED_COUNT=$(echo \"$CHANGED_FILES\" | grep -c . || echo \"0\")\nelse\n  # Fallback to time-based detection when git unavailable\n  COMMITS_SINCE=\"unknown\"\n  FILES_CHANGED_COUNT=\"unknown\"\n  echo \"‚ö† Git not available - using time-based staleness only\"\nfi\n\n# Calculate time since last save\nHOURS_SINCE=$(calculate hours between PREV_TIMESTAMP and now)\nDAYS_SINCE=$(calculate days between PREV_TIMESTAMP and now)\n```\n\n#### Step 3: Incremental Analysis Strategy\n\n**For git-tracked projects with identifiable changes:**\n1. **Focus on changed files**: Analyze only files in `$CHANGED_FILES`\n2. **Re-extract affected patterns**: Identify patterns that involve changed files\n3. **Update dependency graph**: Refresh only relationships involving changed modules\n4. **Refresh architecture**: Update architectural docs only if structural changes detected\n5. **Skip unchanged content**: Do not re-analyze stable files\n\n**Performance benefit**: 2-3x faster than full save for typical updates (10-30 seconds vs 30-120 seconds)\n\n**For non-git or untrackable changes:**\n1. Perform full re-analysis\n2. Note in output that incremental optimization was unavailable\n3. Compare new vs old metadata to identify differences\n\n#### Step 4: Generate Change Summary\n\nCompare current extraction with previous metadata:\n\n```bash\n# Calculate deltas\nNEW_PATTERNS=$(current patterns count - previous patterns count)\nNEW_DEPENDENCIES=$(current dependencies count - previous dependencies count)\nSIZE_CHANGE=$(current total size - previous total size)\n\n# Identify changed categories\nCHANGED_AREAS=()\nif architecture content changed; then CHANGED_AREAS+=(\"architecture\"); fi\nif patterns changed; then CHANGED_AREAS+=(\"patterns\"); fi\nif dependencies changed; then CHANGED_AREAS+=(\"dependencies\"); fi\nif knowledge changed; then CHANGED_AREAS+=(\"knowledge\"); fi\n```\n\n#### Step 5: Update Metadata and History\n\nUpdate metadata.json:\n1. Increment version to 2.0.0 (if migrating from 1.0.0)\n2. Update timestamp to current time\n3. Update git.commit, git.commitCount, git.lastCommitDate\n4. Update extraction statistics\n5. Update fileTracking.snapshot\n6. Add new entry to history.saves array:\n\n```json\n{\n  \"timestamp\": \"2025-11-23T10:15:00Z\",\n  \"commit\": \"def456abc789\",\n  \"filesChanged\": 15,\n  \"type\": \"incremental-update\",\n  \"changedAreas\": [\"architecture\", \"patterns\", \"dependencies\"],\n  \"duration_seconds\": 23\n}\n```\n\n#### Step 6: Enhanced Update Feedback\n\n**User Feedback Template for Updates:**\n```\nüîÑ Context Update Started\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nPrevious save: {time_ago} ago (commit: {short_hash})\nChanges detected: {files_changed} files, {commits} commits since last save\n\nAnalyzing changed files...\nUpdating patterns...\nRefreshing dependencies...\n\n‚úì Context updated successfully\n\nSummary of Changes:\n- Files changed: {count} (analyzed incrementally)\n- New patterns: {count}\n- Updated dependencies: {count}\n- Commits since last save: {commits}\n- Time since last save: {days} days, {hours} hours\n- Previous size: {old_size}KB ‚Üí New size: {new_size}KB\n\nChanged areas:\n{changed_areas_with_checkmarks}\n\nNext: Context is now fresh and up-to-date\n```\n\n**Example output:**\n```\nüîÑ Context Update Started\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nPrevious save: 2 days ago (commit: abc123d)\nChanges detected: 15 files, 8 commits since last save\n\nAnalyzing changed files...\nUpdating patterns...\nRefreshing dependencies...\n\n‚úì Context updated successfully\n\nSummary of Changes:\n- Files changed: 15 (analyzed incrementally)\n- New patterns: 3\n- Updated dependencies: 2\n- Commits since last save: 8\n- Time since last save: 2 days, 3 hours\n- Previous size: 31KB ‚Üí New size: 34KB\n\nChanged areas:\n- ‚úì Architecture: Updated (new service added)\n- ‚úì Patterns: 3 new patterns detected\n- ‚úì Dependencies: 2 package updates\n- ‚óã Knowledge: No changes\n\nNext: Context is now fresh and up-to-date\n```\n\n### Edge Case: Large Updates\n\nIf more than 50 files changed or more than 20 commits:\n\n```\nüîÑ Context Update Started (Large Update)\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nPrevious save: 5 days ago (commit: abc123d)\nChanges detected: 67 files, 23 commits\n\n‚ö† Large number of changes detected\n  This update may take similar time to initial extraction\n\nPerforming comprehensive re-analysis...\n\n‚úì Context updated successfully\n\nSummary of Changes:\n- Files changed: 67 (full re-analysis performed)\n- Patterns extracted: 28 (5 new, 3 modified)\n- Dependencies updated: 8\n- Commits since last save: 23\n- Time since last save: 5 days\n- Previous size: 31KB ‚Üí New size: 45KB\n- Duration: 85 seconds\n\nSignificant changes detected - recommend reviewing updated context\n\nNext: Run /context-restore to load fresh context\n```\n\n### Edge Case: No Git Repository\n\nIf project is not git-tracked:\n\n```\nüîÑ Context Update Started\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nPrevious save: 3 days ago\n\n‚ö† Not a git repository - using time-based detection\n  Incremental optimization unavailable\n\nPerforming full re-analysis...\n\n‚úì Context updated successfully\n\nSummary:\n- Files analyzed: 87 (full scan)\n- Time since last save: 3 days, 5 hours\n- Patterns: 23 (comparison with previous: +2 new patterns)\n- Dependencies: 34 external, 12 internal\n- Size: 31KB ‚Üí 33KB\n\nNote: For faster incremental updates, initialize git repository\n\nNext: Context is now up-to-date\n```\n\n## Example Workflows\n\n### Workflow 1: Initial Project Documentation\n```\n1. Clone or navigate to project\n2. Run /context-save to perform initial analysis\n3. Review generated .claude-context/ directory\n4. Use /context-restore in future sessions for instant context\n```\n\n### Workflow 2: Before Major Refactoring\n```\n1. Run /context-save to capture current state\n2. Perform refactoring work\n3. Run /context-save again to capture new state\n4. Compare contexts to document evolution\n```\n\n### Workflow 3: Knowledge Transfer\n```\n1. Experienced developer runs /context-save\n2. Context captures implicit knowledge and decisions\n3. New team member runs /context-restore\n4. Accelerates onboarding with complete context\n```\n\n### Workflow 4: Focused Extraction\n```\nUser: \"I need to understand the authentication system\"\nCommand: /context-save focusing on authentication\nResult: Extracts only auth-related context\n```\n\n## Implementation Strategy\n\n### Discovery Phase\n1. Scan project root for configuration files\n2. Identify programming languages from file extensions\n3. Detect frameworks from dependencies\n4. Analyze directory structure\n\n### Analysis Phase\n1. Parse key configuration files\n2. Analyze code structure and imports\n3. Extract patterns from representative samples\n4. Build dependency graph\n\n### Documentation Phase\n1. Generate architecture overview\n2. Document discovered patterns\n3. Create knowledge articles\n4. Build cross-reference indices\n\n### Storage Phase\n1. Organize content by category\n2. Apply compression settings\n3. Generate semantic embeddings (optional)\n4. Write to .claude-context/ directory\n\n## Output\n\nAfter execution, you will:\n1. Confirm project analyzed (name, type, languages)\n2. List patterns extracted (architecture, conventions, workflows)\n3. Show storage location and estimated size\n4. Provide token count estimate for stored context\n5. Highlight any security concerns or excluded sensitive data\n6. Suggest next steps (review documentation, run tests, etc.)\n\n## Performance Notes\n\n### Timing Expectations\n\n**Initial Save:**\n- Small projects (< 100 files): 30-45 seconds\n- Medium projects (100-500 files): 45-90 seconds\n- Large projects (500-1000 files): 90-120 seconds\n- Very large projects (> 1000 files): 2-5 minutes\n\n**Incremental Update:**\n- Small updates (1-10 files): 10-15 seconds\n- Medium updates (10-30 files): 15-25 seconds\n- Large updates (30-50 files): 25-40 seconds\n- Very large updates (> 50 files): Similar to initial save (full re-analysis)\n\n**Performance Benefit:**\n- Incremental updates are typically 2-3x faster than full saves\n- Update detection overhead: ~2 seconds\n- Git-tracked projects benefit most from incremental optimization\n\n### Context Size\n\n- Typical size: 50KB-2MB depending on project complexity\n- Metadata overhead: ~5-10KB\n- Incremental updates may grow context size by 10-30%\n- Large monorepos may require focused extraction\n\n### Optimization Tips\n\n- Initialize git repository for fastest incremental updates\n- Use focused extraction for very large monorepos\n- Run updates after significant milestones rather than every commit\n- Consider \"minimal\" compression for faster extraction on large projects\n\n## Adaptive Analysis\n\nThe plugin intelligently adapts to what it finds:\n- **Web Applications**: Extracts frontend/backend architecture, API patterns, deployment\n- **Libraries**: Documents public APIs, usage examples, extension points\n- **Services**: Maps endpoints, data models, integration patterns\n- **Tools/CLIs**: Documents commands, configuration, plugin systems\n- **Data Pipelines**: Maps data flow, transformations, storage\n\nBegin context extraction now, discovering and documenting project knowledge without assumptions about technology stack or architecture.\n",
        "nextjs-frontend-dev/.claude-plugin/plugin.json": "{\n  \"name\": \"nextjs-frontend-dev\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Comprehensive Next.js frontend development patterns with TypeScript, Tailwind CSS v4, shadcn/ui, TanStack Query, and Zustand - includes intelligent code generation and best practices\",\n  \"author\": {\n    \"name\": \"Shyju Viswambaran\",\n    \"email\": \"shyju.viswambaran@coxautoinc.com\"\n  },\n  \"keywords\": [\n    \"nextjs\",\n    \"react\",\n    \"typescript\",\n    \"tailwind\",\n    \"shadcn\",\n    \"frontend\",\n    \"tanstack-query\",\n    \"zustand\",\n    \"web-development\",\n    \"development\"\n  ],\n  \"license\": \"MIT\",\n  \"repository\": \"https://github.com/Add4x/cc-plugins\",\n  \"skills\": \"./skills/\"\n}\n",
        "nextjs-frontend-dev/README.md": "# Next.js Frontend Development Plugin\n\nA comprehensive Claude Code plugin for modern Next.js development with TypeScript, Tailwind CSS v4, shadcn/ui, TanStack Query, and Zustand.\n\n## Overview\n\nThis plugin helps Claude generate consistent, production-ready Next.js code following modern best practices and patterns extracted from real-world applications. It includes intelligent guidance, code generation scripts, and comprehensive templates.\n\n## Features\n\n### üéØ Skills\n- **nextjs-patterns**: Comprehensive patterns for Next.js App Router development\n  - Server vs Client Component decisions\n  - TypeScript best practices\n  - Tailwind CSS v4 patterns\n  - shadcn/ui component patterns\n  - TanStack Query data fetching\n  - Zustand state management\n  - API route patterns\n  - Testing strategies\n\n### ü§ñ Agent\n- **nextjs-architect**: Expert Next.js frontend architect for architecture decisions, code review, and best practices guidance\n\n### üõ†Ô∏è Scripts\n- **new-component.sh**: Generate React components with tests\n- **new-api-route.sh**: Create API routes with validation\n- **new-store.sh**: Build Zustand stores with persistence\n- **new-hook.sh**: Create custom hooks (query, mutation, state)\n\n### üìã Templates\n- Component templates\n- API route templates\n- Store templates\n- Hook templates\n\n## Installation\n\n### Prerequisites\n- Claude Code CLI installed\n- A Next.js project (v14+)\n- pnpm package manager (recommended)\n\n### Add Plugin to Your Project\n\n```bash\n# Navigate to your project\ncd /path/to/your/nextjs-project\n\n# Add the development plugins marketplace (if not already added)\n/plugin marketplace add /Users/shyjuviswambaran/add4x/cc-plugins\n\n# Install the plugin\n/plugin install nextjs-frontend-dev@development-plugins-marketplace\n\n# Verify installation\n/plugin list\n```\n\n## Usage\n\n### Using the Skill\n\nThe skill automatically enhances Claude's understanding of Next.js patterns. When you ask Claude to:\n- Create a component\n- Build an API route\n- Set up state management\n- Implement data fetching\n\nClaude will automatically follow the patterns defined in this skill, ensuring:\n- ‚úÖ Correct Server/Client component usage\n- ‚úÖ Proper TypeScript typing\n- ‚úÖ `cn()` utility for className management\n- ‚úÖ shadcn/ui component patterns\n- ‚úÖ TanStack Query for data fetching\n- ‚úÖ Zustand for state management\n\n**Example prompts:**\n\n```\n\"Create a menu item card component with image, title, description, and price\"\n‚Üí Claude generates a properly typed component with cn(), responsive design, and tests\n\n\"Build an API route for fetching categories with pagination\"\n‚Üí Claude creates route with Zod validation, error handling, and tests\n\n\"Create a shopping cart store with persistence\"\n‚Üí Claude builds Zustand store with localStorage, TypeScript, and tests\n```\n\n### Using the Scripts\n\nAll scripts are located in `scripts/` and are executable shell scripts.\n\n#### Generate a Component\n\n```bash\n# Basic usage (creates in src/components/)\n./scripts/new-component.sh Button\n\n# Specify custom path\n./scripts/new-component.sh MenuCard components/menu\n\n# Creates:\n# - src/components/menu/menu-card.tsx\n# - src/components/menu/__tests__/menu-card.test.tsx\n# - Updates/creates index.ts\n```\n\n**Interactive prompts:**\n- Is this a client component? (y/N)\n\n#### Generate an API Route\n\n```bash\n# Create API route\n./scripts/new-api-route.sh categories\n\n# Creates:\n# - src/app/api/categories/route.ts\n# - src/app/api/categories/__tests__/route.test.ts\n```\n\n**Interactive prompts:**\n- Select HTTP methods (GET, POST, PUT, DELETE, PATCH)\n\n#### Generate a Zustand Store\n\n```bash\n# Create store\n./scripts/new-store.sh cart\n\n# Creates:\n# - src/stores/cart-store.ts\n# - src/stores/__tests__/cart-store.test.ts\n```\n\n**Interactive prompts:**\n- Enable localStorage persistence? (y/N)\n\n#### Generate a Custom Hook\n\n```bash\n# Create a query hook (default)\n./scripts/new-hook.sh use-categories query\n\n# Create a mutation hook\n./scripts/new-hook.sh use-create-category mutation\n\n# Create a state hook\n./scripts/new-hook.sh use-toggle state\n\n# Creates:\n# - src/hooks/use-categories.ts\n# - src/hooks/__tests__/use-categories.test.ts\n```\n\n**Hook types:**\n- `query` - TanStack Query useQuery hook\n- `mutation` - TanStack Query useMutation hook\n- `state` - Custom state management hook\n\n### Using the Agent\n\n#### `/nextjs-architect`\n\nSpecialized agent for Next.js frontend architecture decisions and guidance.\n\n```\n/nextjs-architect\n\n# Use this agent for:\n# - Architecture planning\n# - Component design decisions\n# - State management strategy\n# - Performance optimization\n# - Code review with detailed feedback\n# - Best practices guidance\n\n# Examples:\n\"Help me design the architecture for a restaurant ordering system\"\n\"Review my component structure and suggest improvements\"\n\"What's the best way to handle shopping cart state?\"\n```\n\nThe architect agent has deep expertise in:\n- Next.js App Router patterns\n- Server vs Client Component decisions\n- TypeScript strict mode\n- Tailwind CSS v4 + cn() utility\n- shadcn/ui component patterns\n- TanStack Query data fetching\n- Zustand state management\n- Testing strategies\n\nThe agent references the **nextjs-patterns skill** automatically for consistent guidance.\n\n## Technology Stack\n\n### Core Technologies\n- **Next.js**: 14/15/16+ with App Router\n- **React**: 18/19+ (Server & Client Components)\n- **TypeScript**: Strict mode enabled\n- **Package Manager**: pnpm (recommended)\n\n### Styling\n- **Tailwind CSS**: v4 (utility-first)\n- **shadcn/ui**: Radix UI components\n- **class-variance-authority**: Variant management\n- **clsx + tailwind-merge**: `cn()` utility\n\n### State & Data\n- **Zustand**: Global state management\n- **TanStack Query**: Server state & caching\n- **Zod**: Runtime validation\n\n### Testing\n- **Vitest**: Unit & integration testing\n- **Testing Library**: React component testing\n\n## Project Structure\n\nThe plugin expects and enforces this structure:\n\n```\nyour-nextjs-project/\n‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îú‚îÄ‚îÄ app/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ globals.css\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (main)/              # Route groups\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ menu/\n‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ page.tsx\n‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ components/  # Page-specific components\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/\n‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ categories/\n‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ route.ts\n‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ __tests__/\n‚îÇ   ‚îú‚îÄ‚îÄ components/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                  # shadcn/ui components\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu/                # Feature components\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart/\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ providers/\n‚îÇ   ‚îú‚îÄ‚îÄ hooks/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-categories.ts\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __tests__/\n‚îÇ   ‚îú‚îÄ‚îÄ stores/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart-store.ts\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __tests__/\n‚îÇ   ‚îú‚îÄ‚îÄ lib/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.ts             # cn() utility\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/\n‚îÇ   ‚îú‚îÄ‚îÄ types/\n‚îÇ   ‚îú‚îÄ‚îÄ config/\n‚îÇ   ‚îî‚îÄ‚îÄ actions/\n‚îú‚îÄ‚îÄ public/\n‚îú‚îÄ‚îÄ package.json\n‚îî‚îÄ‚îÄ tsconfig.json\n```\n\n## Key Patterns\n\n### 1. Server Components First\n\nBy default, all components are Server Components. Only add `'use client'` when necessary:\n\n**Server Component (default):**\n```typescript\n// app/page.tsx\nexport default function Page() {\n  return <div>Static content</div>\n}\n```\n\n**Client Component (when needed):**\n```typescript\n// components/counter.tsx\n'use client'\n\nimport { useState } from 'react'\n\nexport function Counter() {\n  const [count, setCount] = useState(0)\n  return <button onClick={() => setCount(c => c + 1)}>{count}</button>\n}\n```\n\n### 2. The cn() Utility\n\n**Always use `cn()` for className management:**\n\n```typescript\nimport { cn } from \"@/lib/utils\"\n\n<div className={cn(\"base-class\", isActive && \"active-class\", className)} />\n```\n\n### 3. TypeScript Strict Mode\n\nAll code uses strict TypeScript:\n\n```typescript\n// ‚úÖ Good\ninterface ButtonProps {\n  variant?: 'primary' | 'secondary'\n  onClick?: () => void\n}\n\n// ‚ùå Avoid\ninterface ButtonProps {\n  variant?: any\n  onClick?: Function\n}\n```\n\n### 4. Data Fetching with TanStack Query\n\n**Client-side data fetching:**\n\n```typescript\n\"use client\"\n\nimport { useQuery } from \"@tanstack/react-query\"\n\nexport function useCategories() {\n  return useQuery({\n    queryKey: [\"categories\"],\n    queryFn: async () => {\n      const res = await fetch('/api/categories')\n      if (!res.ok) throw new Error('Failed to fetch')\n      return res.json()\n    },\n    staleTime: 5 * 60 * 1000,\n  })\n}\n```\n\n### 5. State Management with Zustand\n\n**Global state with persistence:**\n\n```typescript\nimport { create } from \"zustand\"\nimport { persist } from \"zustand/middleware\"\n\ninterface CartState {\n  items: Item[]\n  addItem: (item: Item) => void\n}\n\nexport const useCartStore = create<CartState>()(\n  persist(\n    (set) => ({\n      items: [],\n      addItem: (item) => set((state) => ({\n        items: [...state.items, item]\n      })),\n    }),\n    { name: \"cart-storage\" }\n  )\n)\n```\n\n## Examples\n\n### Complete Feature: Product Card\n\n```typescript\n// types/product.ts\nexport interface Product {\n  id: string\n  name: string\n  price: number\n  imageUrl: string | null\n}\n\n// components/product-card.tsx\nimport Image from 'next/image'\nimport { Card } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\nimport type { Product } from '@/types/product'\n\ninterface ProductCardProps {\n  product: Product\n  onAddToCart?: (product: Product) => void\n  className?: string\n}\n\nexport function ProductCard({ product, onAddToCart, className }: ProductCardProps) {\n  return (\n    <Card className={cn(\"overflow-hidden hover:shadow-lg transition-shadow\", className)}>\n      {product.imageUrl && (\n        <div className=\"relative aspect-video\">\n          <Image\n            src={product.imageUrl}\n            alt={product.name}\n            fill\n            className=\"object-cover\"\n          />\n        </div>\n      )}\n      <div className=\"p-4\">\n        <h3 className=\"font-semibold text-lg\">{product.name}</h3>\n        <div className=\"flex items-center justify-between mt-4\">\n          <span className=\"text-2xl font-bold\">${product.price.toFixed(2)}</span>\n          {onAddToCart && (\n            <Button onClick={() => onAddToCart(product)}>\n              Add to Cart\n            </Button>\n          )}\n        </div>\n      </div>\n    </Card>\n  )\n}\n```\n\n## Best Practices\n\n### ‚úÖ Do\n\n- Use Server Components by default\n- Always use `cn()` for classNames\n- Type everything with TypeScript\n- Use absolute imports (`@/`)\n- Co-locate tests with code\n- Implement proper error handling\n- Add loading states\n- Use kebab-case for files\n- Use PascalCase for components\n\n### ‚ùå Don't\n\n- Don't use hooks in Server Components\n- Don't forget `'use client'` when needed\n- Don't use `any` type\n- Don't use inline styles\n- Don't hardcode values\n- Don't skip error boundaries\n- Don't mix file naming conventions\n- Don't create unnecessary Client Components\n\n## Testing\n\nAll generated code includes test files:\n\n```bash\n# Run all tests\npnpm test\n\n# Run tests in watch mode\npnpm test:watch\n\n# Run tests with coverage\npnpm test:coverage\n\n# Run tests with UI\npnpm test:ui\n```\n\n## Configuration\n\n### Required Dependencies\n\nEnsure your project has these dependencies:\n\n```json\n{\n  \"dependencies\": {\n    \"next\": \"^14.0.0\",\n    \"react\": \"^18.0.0\",\n    \"react-dom\": \"^18.0.0\",\n    \"@tanstack/react-query\": \"^5.0.0\",\n    \"zustand\": \"^5.0.0\",\n    \"zod\": \"^3.0.0\",\n    \"class-variance-authority\": \"^0.7.0\",\n    \"clsx\": \"^2.0.0\",\n    \"tailwind-merge\": \"^2.0.0\"\n  },\n  \"devDependencies\": {\n    \"typescript\": \"^5.0.0\",\n    \"vitest\": \"^1.0.0\",\n    \"@testing-library/react\": \"^14.0.0\",\n    \"tailwindcss\": \"^4.0.0\"\n  }\n}\n```\n\n### tsconfig.json\n\n```json\n{\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"@/*\": [\"./src/*\"]\n    }\n  }\n}\n```\n\n## Troubleshooting\n\n### Scripts not executable\n\n```bash\nchmod +x scripts/*.sh\n```\n\n### Import path issues\n\nEnsure `tsconfig.json` has path aliases configured:\n\n```json\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"@/*\": [\"./src/*\"]\n    }\n  }\n}\n```\n\n### Tests failing\n\nMake sure testing setup is correct:\n\n```bash\npnpm add -D vitest @testing-library/react @testing-library/jest-dom happy-dom\n```\n\n## Contributing\n\nTo enhance this plugin:\n\n1. Add new patterns to `skills/nextjs-patterns/SKILL.md`\n2. Create new scripts in `scripts/`\n3. Add templates to `templates/`\n4. Update this README\n5. Test with real projects\n\n## License\n\nMIT\n\n## Support\n\nFor issues or questions:\n- Check the [SKILL.md](./skills/nextjs-patterns/SKILL.md) for pattern documentation\n- Review existing scripts for examples\n- Create an issue in the repository\n\n---\n\n**Version**: 1.0.0\n**Author**: Shyju Viswambaran\n**Last Updated**: December 2024\n",
        "nextjs-frontend-dev/agents/nextjs-architect.md": "---\nname: nextjs-architect\ndescription: Next.js frontend architecture expert for App Router, TypeScript, Tailwind, shadcn/ui, TanStack Query, and Zustand\nmodel: sonnet\n---\n\n# Next.js Frontend Architect\n\nYou are an expert Next.js frontend architect specializing in modern App Router patterns, TypeScript, Tailwind CSS v4, shadcn/ui component library, TanStack Query for data fetching, and Zustand for state management.\n\n## Core Expertise\n\n### 1. Next.js App Router Architecture\n\n**Server Components:**\n- Default for all components unless interactivity/hooks needed\n- Async components for data fetching\n- Automatic code splitting and streaming\n- Better performance and SEO\n\n**Client Components:**\n- Only when using React hooks\n- Browser APIs (localStorage, window)\n- Event handlers and interactivity\n- Third-party libraries requiring client-side\n\n**Decision Framework:**\n```\nDoes component need interactivity or hooks?\n‚îú‚îÄ YES ‚Üí Use Client Component ('use client')\n‚îÇ   ‚îî‚îÄ Examples: forms, modals, dropdowns, charts\n‚îî‚îÄ NO ‚Üí Use Server Component (default)\n    ‚îî‚îÄ Examples: layouts, static content, data display\n```\n\n### 2. TypeScript Best Practices\n\n**Strict Mode:**\n- Always use strict TypeScript\n- No `any` types - use proper types or `unknown`\n- Proper interface/type definitions\n- Generic types for reusable components\n\n**Component Props:**\n```typescript\n// Interface for props\ninterface ComponentProps {\n  children?: React.ReactNode\n  className?: string\n  variant?: 'primary' | 'secondary'\n  onAction?: (id: string) => void\n}\n\n// Extending HTML elements\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  isLoading?: boolean\n}\n```\n\n### 3. Tailwind CSS v4 + cn() Utility\n\n**Always use cn() for className management:**\n```typescript\nimport { cn } from \"@/lib/utils\"\n\n<div className={cn(\n  \"base-classes\",\n  conditional && \"conditional-classes\",\n  className\n)} />\n```\n\n**Mobile-first responsive design:**\n```typescript\n<div className=\"\n  grid\n  grid-cols-1          // Mobile\n  md:grid-cols-2       // Tablet\n  lg:grid-cols-3       // Desktop\n  xl:grid-cols-4       // Large desktop\n  gap-4 md:gap-6\n\">\n```\n\n**Semantic colors:**\n- Use `bg-primary`, `text-primary-foreground`\n- Avoid hardcoded colors like `bg-blue-500`\n- Support dark mode with `dark:` prefix\n\n### 4. shadcn/ui Component Patterns\n\n**Component Structure:**\n```typescript\nimport * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst variants = cva(\"base-classes\", {\n  variants: {\n    variant: {\n      default: \"default-classes\",\n      outline: \"outline-classes\",\n    },\n    size: {\n      default: \"h-9 px-4\",\n      sm: \"h-8 px-3\",\n      lg: \"h-10 px-8\",\n    },\n  },\n  defaultVariants: {\n    variant: \"default\",\n    size: \"default\",\n  },\n})\n\nexport interface ComponentProps\n  extends React.HTMLAttributes<HTMLElement>,\n    VariantProps<typeof variants> {\n  asChild?: boolean\n}\n\nexport const Component = React.forwardRef<HTMLElement, ComponentProps>(\n  ({ className, variant, size, ...props }, ref) => {\n    return (\n      <element\n        className={cn(variants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nComponent.displayName = \"Component\"\n```\n\n**Key Patterns:**\n- Use `React.forwardRef` for ref forwarding\n- Export both component and variants\n- Use `asChild` prop for polymorphic components\n- Always use `cn()` for className merging\n\n### 5. TanStack Query Data Fetching\n\n**Query Pattern:**\n```typescript\n\"use client\"\n\nimport { useQuery } from \"@tanstack/react-query\"\n\nexport function useResource(id?: string) {\n  return useQuery<DataType[]>({\n    queryKey: [\"resource\", id],\n    queryFn: async () => {\n      const response = await fetch(`/api/resource/${id}`)\n      if (!response.ok) throw new Error('Failed to fetch')\n      return response.json()\n    },\n    enabled: !!id,\n    staleTime: 5 * 60 * 1000,  // 5 minutes\n    gcTime: 10 * 60 * 1000,    // 10 minutes\n  })\n}\n```\n\n**Mutation Pattern:**\n```typescript\nexport function useCreateResource() {\n  const queryClient = useQueryClient()\n\n  return useMutation<Response, Error, Input>({\n    mutationFn: async (data) => {\n      const response = await fetch('/api/resource', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data),\n      })\n      if (!response.ok) throw new Error('Failed to create')\n      return response.json()\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['resource'] })\n    },\n  })\n}\n```\n\n**Best Practices:**\n- Descriptive queryKey arrays\n- Proper error handling\n- Cache configuration (staleTime, gcTime)\n- Invalidation after mutations\n- enabled option for conditional queries\n\n### 6. Zustand State Management\n\n**Store Pattern:**\n```typescript\nimport { create } from 'zustand'\nimport { persist } from 'zustand/middleware'\n\ninterface StoreState {\n  // State\n  items: Item[]\n\n  // Actions\n  addItem: (item: Item) => void\n  removeItem: (id: string) => void\n\n  // Computed values (as functions)\n  getTotalPrice: () => number\n}\n\nexport const useStore = create<StoreState>()(\n  persist(\n    (set, get) => ({\n      items: [],\n\n      addItem: (item) => {\n        set((state) => ({ items: [...state.items, item] }))\n      },\n\n      removeItem: (id) => {\n        set((state) => ({\n          items: state.items.filter((item) => item.id !== id),\n        }))\n      },\n\n      getTotalPrice: () => {\n        return get().items.reduce((sum, item) => sum + item.price, 0)\n      },\n    }),\n    { name: 'store-storage' }\n  )\n)\n```\n\n**Best Practices:**\n- Immutable state updates\n- Computed values as functions (use get())\n- TypeScript interfaces for state\n- Persist middleware for user data\n- No derived/computed state stored directly\n\n### 7. Testing Strategies\n\n**Component Tests (Vitest + Testing Library):**\n```typescript\nimport { render, screen } from '@testing-library/react'\nimport { expect, test, describe } from 'vitest'\nimport { Component } from '../component'\n\ndescribe('Component', () => {\n  test('renders correctly', () => {\n    render(<Component>Content</Component>)\n    expect(screen.getByText('Content')).toBeInTheDocument()\n  })\n})\n```\n\n**API Route Tests:**\n```typescript\nimport { describe, it, expect } from 'vitest'\nimport { GET } from '../route'\n\ndescribe('API Route', () => {\n  it('returns data', async () => {\n    const response = await GET(new Request('http://localhost/api/test'))\n    expect(response.status).toBe(200)\n  })\n})\n```\n\n## Architecture Principles\n\n### 1. Component Composition\n- Small, focused components\n- Composition over inheritance\n- Reusable UI primitives in `components/ui/`\n- Feature-specific components in `components/{feature}/`\n\n### 2. Data Flow\n- Server Components for initial data\n- TanStack Query for client-side data\n- Zustand for global UI state\n- Props for component communication\n\n### 3. Performance\n- Server Components by default\n- Code splitting with dynamic imports\n- Image optimization with next/image\n- Font optimization with next/font\n- Proper caching strategies\n\n### 4. Type Safety\n- Strict TypeScript everywhere\n- No `any` types\n- Proper generic constraints\n- Type inference where possible\n\n### 5. Accessibility\n- Semantic HTML elements\n- ARIA labels where needed\n- Keyboard navigation\n- Focus management\n- Screen reader support\n\n## Code Review Criteria\n\nWhen reviewing code, check:\n\n1. **Server/Client Components** - Correct usage of 'use client'\n2. **cn() Utility** - All className usage through cn()\n3. **TypeScript** - No any types, proper interfaces\n4. **TanStack Query** - Proper cache config, error handling\n5. **Zustand** - Immutable updates, computed as functions\n6. **Tailwind** - Mobile-first, semantic colors\n7. **Accessibility** - Semantic HTML, ARIA labels\n8. **Testing** - Adequate test coverage\n9. **File Organization** - Proper structure and naming\n10. **Performance** - Proper optimization techniques\n\n## Decision-Making Framework\n\n### When to Use What\n\n**State Management:**\n- **Server Components** - For initial data, no client state needed\n- **TanStack Query** - For server state (API data) with caching\n- **Zustand** - For global client state (cart, user prefs, UI state)\n- **useState** - For local component state\n- **Context** - For simple theme/locale passing\n\n**Styling:**\n- **Tailwind** - For all styling (no inline styles, no CSS modules)\n- **cn()** - For all className management\n- **cva** - For component variants (shadcn/ui pattern)\n\n**Data Fetching:**\n- **Server Components** - For page-level data\n- **TanStack Query** - For client-side data fetching\n- **Server Actions** - For mutations from Server Components\n\n## Reference\n\nYou have access to the **nextjs-patterns skill** which contains comprehensive patterns for:\n- Component structures\n- Data fetching patterns\n- State management patterns\n- TypeScript patterns\n- Tailwind patterns\n- Testing patterns\n- Complete examples\n\nAlways reference the skill when providing guidance to ensure consistency with established patterns.\n\n## Your Role\n\nAs the Next.js Architect, you should:\n\n1. **Design** - Plan component architecture and data flow\n2. **Guide** - Provide clear decisions on patterns to use\n3. **Review** - Identify issues and suggest improvements\n4. **Educate** - Explain the \"why\" behind decisions\n5. **Optimize** - Suggest performance and DX improvements\n\nFocus on:\n- Production-ready code\n- Maintainability\n- Type safety\n- Performance\n- Developer experience\n- Consistency with established patterns\n\nYou are here to help developers build high-quality Next.js applications following modern best practices.\n",
        "nextjs-frontend-dev/skills/nextjs-patterns/SKILL.md": "---\nname: nextjs-patterns\ndescription: Modern Next.js frontend development patterns with TypeScript, Tailwind CSS v4, shadcn/ui, TanStack Query, and Zustand\nversion: 1.0.0\n---\n\n# Next.js Frontend Development Patterns\n\nThis skill provides comprehensive guidance for building modern Next.js applications following production-ready patterns and best practices.\n\n## Technology Stack\n\n- **Next.js**: 14/15/16+ with App Router (NOT Pages Router)\n- **React**: 18/19+ with Server and Client Components\n- **TypeScript**: Strict mode with comprehensive typing\n- **Styling**: Tailwind CSS v4 with utility-first approach\n- **Components**: shadcn/ui (Radix UI primitives)\n- **State Management**: Zustand with persist middleware\n- **Data Fetching**: TanStack Query (React Query)\n- **Validation**: Zod schemas\n- **Package Manager**: pnpm preferred\n\n## Core Principles\n\n### 1. Server Components First\n\n**By default, all components are Server Components**. Only add 'use client' when necessary:\n\n‚úÖ **Use Server Components for:**\n- Pages that fetch data\n- Static content\n- Layouts\n- Components that don't need interactivity\n\n‚úÖ **Use Client Components for:**\n- Interactive elements (onClick, onChange, etc.)\n- React hooks (useState, useEffect, etc.)\n- Browser APIs (localStorage, window, etc.)\n- Event listeners\n- Third-party libraries that require client-side\n\n**Example Server Component:**\n```typescript\n// app/(main)/page.tsx\nimport { HeroSection } from \"@/components/hero-section\";\nimport { FavoritesSection } from \"@/components/main/favorites-section\";\n\nexport default function Home() {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-orange-50/30 via-white to-red-50/20\">\n      <HeroSection />\n      <FavoritesSection />\n    </div>\n  );\n}\n```\n\n**Example Client Component:**\n```typescript\n// components/ui/button-with-state.tsx\n'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\n\nexport function Counter() {\n  const [count, setCount] = useState(0)\n\n  return (\n    <Button onClick={() => setCount(c => c + 1)}>\n      Count: {count}\n    </Button>\n  )\n}\n```\n\n### 2. The cn() Utility Pattern\n\n**ALWAYS use the `cn()` utility for className management**:\n\n```typescript\n// lib/utils.ts (standard implementation)\nimport { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n```\n\n**Usage patterns:**\n\n```typescript\nimport { cn } from \"@/lib/utils\"\n\n// Basic usage\n<div className={cn(\"p-4 rounded-md\", className)} />\n\n// Conditional classes\n<div className={cn(\n  \"base-class\",\n  isActive && \"active-class\",\n  isDisabled && \"disabled-class\"\n)} />\n\n// Variant-based classes with props\n<div className={cn(\n  \"base-class\",\n  variant === \"primary\" && \"bg-primary text-white\",\n  variant === \"secondary\" && \"bg-secondary text-gray-900\"\n)} />\n```\n\n### 3. Project Structure\n\n```\nsrc/\n‚îú‚îÄ‚îÄ app/\n‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx              # Root layout\n‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                # Home page\n‚îÇ   ‚îú‚îÄ‚îÄ globals.css             # Global styles\n‚îÇ   ‚îú‚îÄ‚îÄ (main)/                 # Route group for main site\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu/\n‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx\n‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components/     # Page-specific components\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cart/\n‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx\n‚îÇ   ‚îî‚îÄ‚îÄ api/                    # API routes\n‚îÇ       ‚îú‚îÄ‚îÄ health/\n‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ route.ts\n‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ __tests__/\n‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ route.test.ts\n‚îÇ       ‚îî‚îÄ‚îÄ locations/\n‚îÇ           ‚îî‚îÄ‚îÄ route.ts\n‚îú‚îÄ‚îÄ components/\n‚îÇ   ‚îú‚îÄ‚îÄ ui/                     # shadcn/ui components\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.tsx\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ card.tsx\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialog.tsx\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __tests__/\n‚îÇ   ‚îú‚îÄ‚îÄ menu/                   # Feature-specific components\n‚îÇ   ‚îú‚îÄ‚îÄ cart/\n‚îÇ   ‚îî‚îÄ‚îÄ providers/              # Context providers\n‚îú‚îÄ‚îÄ hooks/                      # Custom React hooks\n‚îÇ   ‚îú‚îÄ‚îÄ use-categories.ts\n‚îÇ   ‚îú‚îÄ‚îÄ use-menu-items.ts\n‚îÇ   ‚îî‚îÄ‚îÄ __tests__/\n‚îú‚îÄ‚îÄ stores/                     # Zustand stores\n‚îÇ   ‚îú‚îÄ‚îÄ cart-store.ts\n‚îÇ   ‚îú‚îÄ‚îÄ location-store.ts\n‚îÇ   ‚îî‚îÄ‚îÄ __tests__/\n‚îú‚îÄ‚îÄ lib/\n‚îÇ   ‚îú‚îÄ‚îÄ utils.ts               # cn() and other utilities\n‚îÇ   ‚îú‚îÄ‚îÄ api/                   # API client functions\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.ts\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __tests__/\n‚îÇ   ‚îî‚îÄ‚îÄ __tests__/\n‚îú‚îÄ‚îÄ types/                     # TypeScript type definitions\n‚îÇ   ‚îî‚îÄ‚îÄ tenant.ts\n‚îú‚îÄ‚îÄ config/                    # App configuration\n‚îú‚îÄ‚îÄ actions/                   # Server actions\n‚îî‚îÄ‚îÄ styles/                    # Additional styles\n```\n\n**Key conventions:**\n- Use route groups `(name)` for logical grouping without affecting URLs\n- Co-locate tests with `__tests__/` directories\n- Keep page-specific components near the page\n- Use absolute imports with `@/` prefix\n\n### 4. Component Patterns\n\n#### A. shadcn/ui Button Component\n\n```typescript\n// components/ui/button.tsx\nimport * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 cursor-pointer [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90\",\n        destructive: \"bg-destructive text-destructive-foreground shadow-xs hover:bg-destructive/90\",\n        outline: \"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground\",\n        secondary: \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n```\n\n**Key patterns:**\n- Use `class-variance-authority` for variant management\n- Always use `React.forwardRef` for ref forwarding\n- Export both component and variants\n- Use `asChild` prop for polymorphic components\n- Always use `cn()` for className merging\n\n#### B. Extending shadcn/ui Components\n\n```typescript\n// components/ui/button.tsx (with loading state)\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n  isLoading?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, isLoading, children, disabled, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        disabled={disabled || isLoading}\n        {...props}\n      >\n        {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n        {children}\n      </Comp>\n    );\n  }\n);\n```\n\n### 5. Data Fetching Patterns\n\n#### A. TanStack Query (Client-Side)\n\n```typescript\n// hooks/use-categories.ts\n\"use client\";\n\nimport { useQuery } from \"@tanstack/react-query\";\nimport type { Category } from \"@/lib/api/types\";\n\nexport function useCategories(brandName?: string, locationSlug?: string, menuSlug?: string) {\n  return useQuery<Category[]>({\n    queryKey: [\"categories\", brandName, locationSlug, menuSlug],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (brandName) params.append('brandName', brandName);\n      if (locationSlug) params.append('locationSlug', locationSlug);\n      if (menuSlug) params.append('menuSlug', menuSlug);\n\n      const queryString = params.toString();\n      const endpoint = queryString ? `/api/categories?${queryString}` : '/api/categories';\n\n      const response = await fetch(endpoint);\n      if (!response.ok) {\n        throw new Error('Failed to fetch categories');\n      }\n      return response.json();\n    },\n    staleTime: 5 * 60 * 1000, // 5 minutes\n    gcTime: 10 * 60 * 1000, // 10 minutes\n  });\n}\n\nexport function useCategoryBySlug(slug: string) {\n  return useQuery<Category>({\n    queryKey: [\"category\", \"slug\", slug],\n    queryFn: async () => {\n      const response = await fetch(`/api/categories/slug/${slug}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch category');\n      }\n      return response.json();\n    },\n    enabled: !!slug, // Only run query if slug exists\n    staleTime: 5 * 60 * 1000,\n    gcTime: 10 * 60 * 1000,\n  });\n}\n```\n\n**Key patterns:**\n- Always mark data-fetching hooks with `'use client'`\n- Use descriptive `queryKey` arrays for caching\n- Set appropriate `staleTime` and `gcTime` (formerly `cacheTime`)\n- Use `enabled` option for conditional queries\n- Handle errors with proper error messages\n- Type the return data with TypeScript\n\n#### B. Query Provider Setup\n\n```typescript\n// components/providers/query-provider.tsx\n'use client'\n\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools'\nimport { useState } from 'react'\n\nexport function QueryProvider({ children }: { children: React.ReactNode }) {\n  const [queryClient] = useState(\n    () => new QueryClient({\n      defaultOptions: {\n        queries: {\n          staleTime: 60 * 1000, // 1 minute\n          gcTime: 5 * 60 * 1000, // 5 minutes\n        },\n      },\n    })\n  )\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {children}\n      <ReactQueryDevtools initialIsOpen={false} />\n    </QueryClientProvider>\n  )\n}\n```\n\n### 6. State Management with Zustand\n\n```typescript\n// stores/cart-store.ts\nimport { create } from \"zustand\";\nimport { persist } from \"zustand/middleware\";\nimport { MenuItem, MenuItemDetailProtein, MenuItemModification } from \"@/lib/types\";\n\nexport interface CartItem {\n  id: string;\n  menuItem: MenuItem;\n  quantity: number;\n  selectedProtein: MenuItemDetailProtein | null;\n  selectedModifications?: MenuItemModification[];\n  totalPrice: number;\n  spiceLevel: string | null;\n  specialInstructions: string;\n}\n\ninterface CartState {\n  items: CartItem[];\n  addItem: (\n    menuItem: MenuItem,\n    selectedProtein: MenuItemDetailProtein | null,\n    spiceLevel?: string | null,\n    specialInstructions?: string,\n    quantity?: number,\n    selectedModifications?: MenuItemModification[]\n  ) => void;\n  removeItem: (id: string) => void;\n  updateQuantity: (id: string, quantity: number) => void;\n  clearCart: () => void;\n  getTotalItems: () => number;\n  getTotalPrice: () => number;\n}\n\nexport const useCartStore = create<CartState>()(\n  persist(\n    (set, get) => ({\n      items: [],\n      addItem: (menuItem, selectedProtein, spiceLevel = null, specialInstructions = \"\", quantity = 1, selectedModifications = []) => {\n        const { items } = get();\n        const itemId = `${menuItem.id}-${selectedProtein?.name || \"base\"}-${Date.now()}`;\n\n        // Calculate price with modifications\n        const modificationsTotal = selectedModifications.reduce(\n          (sum, mod) => sum + mod.additionalCost,\n          0\n        );\n        const itemPrice =\n          menuItem.price +\n          (selectedProtein?.additionalCost || 0) +\n          modificationsTotal;\n\n        set({\n          items: [\n            ...items,\n            {\n              id: itemId,\n              menuItem,\n              selectedProtein,\n              selectedModifications,\n              spiceLevel,\n              specialInstructions,\n              quantity,\n              totalPrice: itemPrice * quantity,\n            },\n          ],\n        });\n      },\n      removeItem: (id) => {\n        set((state) => ({\n          items: state.items.filter((item) => item.id !== id),\n        }));\n      },\n      updateQuantity: (id, quantity) => {\n        set((state) => ({\n          items: state.items.map((item) => {\n            if (item.id === id) {\n              const modificationsTotal = (item.selectedModifications || []).reduce(\n                (sum, mod) => sum + mod.additionalCost,\n                0\n              );\n              const price =\n                item.menuItem.price +\n                (item.selectedProtein?.additionalCost || 0) +\n                modificationsTotal;\n\n              return {\n                ...item,\n                quantity,\n                totalPrice: price * quantity,\n              };\n            }\n            return item;\n          }),\n        }));\n      },\n      clearCart: () => {\n        set({ items: [] });\n      },\n      getTotalItems: () => {\n        return get().items.reduce((total, item) => total + item.quantity, 0);\n      },\n      getTotalPrice: () => {\n        return get().items.reduce((total, item) => total + item.totalPrice, 0);\n      },\n    }),\n    {\n      name: \"cart-storage\", // localStorage key\n    }\n  )\n);\n```\n\n**Key patterns:**\n- Use TypeScript interfaces for state and actions\n- Use `persist` middleware for localStorage persistence\n- Expose computed values as functions (getTotalItems, getTotalPrice)\n- Handle optional properties for backward compatibility\n- Use immutable state updates\n- Calculate derived values on the fly\n\n### 7. TypeScript Patterns\n\n#### A. Strict Type Definitions\n\n```typescript\n// types/menu.ts\nexport interface MenuItem {\n  id: string;\n  name: string;\n  description: string | null;\n  price: number;\n  imageUrl: string | null;\n  category: Category;\n  proteins?: MenuItemDetailProtein[];\n  modifications?: MenuItemModification[];\n}\n\nexport interface MenuItemDetailProtein {\n  id: string;\n  name: string;\n  additionalCost: number;\n}\n\nexport interface MenuItemModification {\n  id: string;\n  name: string;\n  additionalCost: number;\n}\n\nexport interface Category {\n  id: string;\n  name: string;\n  description: string | null;\n  slug: string;\n  imageUrl: string | null;\n}\n```\n\n**Key patterns:**\n- Use `interface` for object shapes\n- Use `type` for unions, intersections, and utilities\n- Always type function parameters and return values\n- Use `null` instead of `undefined` for optional backend data\n- Use `?` for optional properties\n\n#### B. Component Props Typing\n\n```typescript\nimport { ReactNode } from 'react'\n\n// Inline props\nexport function Card({ children, className }: {\n  children: ReactNode\n  className?: string\n}) {\n  return <div className={cn(\"rounded-lg border p-4\", className)}>{children}</div>\n}\n\n// Separate interface (preferred for complex props)\ninterface CardProps {\n  children: ReactNode\n  className?: string\n  variant?: 'default' | 'outlined' | 'elevated'\n  onClick?: () => void\n}\n\nexport function Card({ children, className, variant = 'default', onClick }: CardProps) {\n  return (\n    <div\n      className={cn(\"rounded-lg p-4\", variantClasses[variant], className)}\n      onClick={onClick}\n    >\n      {children}\n    </div>\n  )\n}\n```\n\n### 8. Tailwind CSS Patterns\n\n#### A. Responsive Design\n\n```typescript\n// Mobile-first approach\n<div className=\"\n  grid\n  grid-cols-1          /* Mobile: 1 column */\n  md:grid-cols-2       /* Tablet: 2 columns */\n  lg:grid-cols-3       /* Desktop: 3 columns */\n  xl:grid-cols-4       /* Large desktop: 4 columns */\n  gap-4 md:gap-6       /* Responsive gaps */\n\">\n  {items.map(item => <ItemCard key={item.id} {...item} />)}\n</div>\n```\n\n#### B. Dark Mode Support\n\n```typescript\n<div className=\"\n  bg-white dark:bg-slate-900\n  text-slate-900 dark:text-slate-100\n  border border-gray-200 dark:border-gray-800\n\">\n  Content\n</div>\n```\n\n#### C. Animation and Transitions\n\n```typescript\n<div className=\"\n  transition-all\n  duration-300\n  ease-in-out\n  hover:scale-105\n  hover:shadow-lg\n  active:scale-95\n\">\n  Animated content\n</div>\n```\n\n#### D. Gradient Backgrounds\n\n```typescript\n<div className=\"min-h-screen bg-gradient-to-b from-orange-50/30 via-white to-red-50/20\">\n  Content\n</div>\n```\n\n### 9. API Routes Pattern\n\n```typescript\n// app/api/categories/route.ts\nimport { NextRequest, NextResponse } from 'next/server';\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url);\n    const brandName = searchParams.get('brandName');\n    const locationSlug = searchParams.get('locationSlug');\n\n    // Fetch data from backend or database\n    const categories = await fetchCategories({ brandName, locationSlug });\n\n    return NextResponse.json(categories);\n  } catch (error) {\n    console.error('Failed to fetch categories:', error);\n    return NextResponse.json(\n      { error: 'Failed to fetch categories' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n\n    // Validate with Zod\n    const validatedData = categorySchema.parse(body);\n\n    // Create category\n    const category = await createCategory(validatedData);\n\n    return NextResponse.json(category, { status: 201 });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return NextResponse.json(\n        { error: 'Validation failed', details: error.errors },\n        { status: 400 }\n      );\n    }\n    return NextResponse.json(\n      { error: 'Failed to create category' },\n      { status: 500 }\n    );\n  }\n}\n```\n\n### 10. Testing Patterns\n\n#### A. Component Tests with Vitest\n\n```typescript\n// components/ui/__tests__/button.test.tsx\nimport { render, screen } from '@testing-library/react'\nimport { expect, test } from 'vitest'\nimport { Button } from '../button'\n\ntest('renders button with text', () => {\n  render(<Button>Click me</Button>)\n  expect(screen.getByRole('button', { name: /click me/i })).toBeInTheDocument()\n})\n\ntest('applies variant classes correctly', () => {\n  render(<Button variant=\"destructive\">Delete</Button>)\n  const button = screen.getByRole('button')\n  expect(button).toHaveClass('bg-destructive')\n})\n```\n\n#### B. API Route Tests\n\n```typescript\n// app/api/health/__tests__/route.test.ts\nimport { describe, it, expect } from 'vitest'\nimport { GET } from '../route'\n\ndescribe('Health Check API', () => {\n  it('returns healthy status', async () => {\n    const response = await GET()\n    const data = await response.json()\n\n    expect(response.status).toBe(200)\n    expect(data).toEqual({ status: 'healthy' })\n  })\n})\n```\n\n## Common Decision Trees\n\n### When to use Server vs Client Component?\n\n```\nDoes the component need interactivity or browser APIs?\n‚îú‚îÄ YES ‚Üí Use Client Component ('use client')\n‚îÇ   ‚îî‚îÄ Examples: forms, modals, dropdowns, state management\n‚îî‚îÄ NO ‚Üí Use Server Component (default)\n    ‚îî‚îÄ Examples: layouts, static content, data display\n```\n\n### When to use TanStack Query vs Direct Fetch?\n\n```\nIs this client-side data fetching?\n‚îú‚îÄ YES ‚Üí Use TanStack Query (React Query)\n‚îÇ   ‚îî‚îÄ Benefits: caching, refetching, loading states\n‚îî‚îÄ NO ‚Üí Use direct fetch in Server Component\n    ‚îî‚îÄ Benefits: faster initial load, SEO-friendly\n```\n\n### When to use Zustand vs Context API?\n\n```\nDo you need persistence or complex state logic?\n‚îú‚îÄ YES ‚Üí Use Zustand\n‚îÇ   ‚îî‚îÄ Examples: cart, user preferences, auth state\n‚îî‚îÄ NO ‚Üí Use Context API\n    ‚îî‚îÄ Examples: theme, locale, simple flags\n```\n\n## Code Quality Checklist\n\nWhen generating code, ensure:\n\n- [ ] Server Components by default (no unnecessary 'use client')\n- [ ] Always use `cn()` for className management\n- [ ] Proper TypeScript types (no `any`)\n- [ ] Responsive design (mobile-first)\n- [ ] Accessibility (semantic HTML, ARIA labels)\n- [ ] Error handling (try-catch, error boundaries)\n- [ ] Loading states for async operations\n- [ ] Proper file naming (kebab-case)\n- [ ] Component exports use named exports\n- [ ] Absolute imports with `@/` prefix\n\n## Anti-Patterns to Avoid\n\n‚ùå **Don't:**\n- Use hooks in Server Components\n- Forget 'use client' directive when needed\n- Use inline styles instead of Tailwind\n- Use `any` type in TypeScript\n- Hardcode values that should be configurable\n- Create unnecessary Client Components\n- Forget error boundaries\n- Skip loading states\n- Use relative imports for cross-directory imports\n- Mix camelCase and kebab-case file naming\n\n‚úÖ **Do:**\n- Keep components small and focused\n- Use Server Components when possible\n- Leverage TypeScript for type safety\n- Use cn() for all className logic\n- Implement proper error handling\n- Add loading states for better UX\n- Use absolute imports with @/ prefix\n- Follow kebab-case for files, PascalCase for components\n\n## Example: Complete Feature Implementation\n\n**Scenario:** Create a menu item card component\n\n```typescript\n// types/menu.ts\nexport interface MenuItem {\n  id: string\n  name: string\n  description: string | null\n  price: number\n  imageUrl: string | null\n}\n\n// components/menu/menu-item-card.tsx\nimport Image from 'next/image'\nimport { Card } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\nimport type { MenuItem } from '@/types/menu'\n\ninterface MenuItemCardProps {\n  item: MenuItem\n  onAddToCart?: (item: MenuItem) => void\n  className?: string\n}\n\nexport function MenuItemCard({ item, onAddToCart, className }: MenuItemCardProps) {\n  return (\n    <Card className={cn(\"overflow-hidden transition-shadow hover:shadow-lg\", className)}>\n      {item.imageUrl && (\n        <div className=\"relative aspect-video w-full\">\n          <Image\n            src={item.imageUrl}\n            alt={item.name}\n            fill\n            className=\"object-cover\"\n          />\n        </div>\n      )}\n      <div className=\"p-4 space-y-2\">\n        <h3 className=\"text-lg font-semibold\">{item.name}</h3>\n        {item.description && (\n          <p className=\"text-sm text-muted-foreground line-clamp-2\">\n            {item.description}\n          </p>\n        )}\n        <div className=\"flex items-center justify-between pt-2\">\n          <span className=\"text-xl font-bold\">${item.price.toFixed(2)}</span>\n          {onAddToCart && (\n            <Button onClick={() => onAddToCart(item)} size=\"sm\">\n              Add to Cart\n            </Button>\n          )}\n        </div>\n      </div>\n    </Card>\n  )\n}\n\n// app/(main)/menu/page.tsx\nimport { MenuItemCard } from '@/components/menu/menu-item-card'\n\nexport default function MenuPage() {\n  // Server-side data fetching\n  const menuItems = await fetchMenuItems()\n\n  return (\n    <div className=\"container mx-auto py-8\">\n      <h1 className=\"text-3xl font-bold mb-6\">Our Menu</h1>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {menuItems.map(item => (\n          <MenuItemCard key={item.id} item={item} />\n        ))}\n      </div>\n    </div>\n  )\n}\n```\n\n## Summary\n\nThis skill enforces modern Next.js development patterns focused on:\n1. **Server-first architecture** - Leverage Server Components\n2. **Type safety** - Comprehensive TypeScript usage\n3. **Modern styling** - Tailwind CSS v4 with cn() utility\n4. **Component libraries** - shadcn/ui patterns\n5. **State management** - Zustand for complex state, Context for simple cases\n6. **Data fetching** - TanStack Query for client, direct fetch for server\n7. **Testing** - Vitest for unit and integration tests\n8. **Code quality** - Consistent patterns, proper error handling\n\nWhen generating Next.js code, always refer to these patterns to ensure consistency, maintainability, and production-readiness.\n"
      },
      "plugins": [
        {
          "name": "context-management",
          "description": "Intelligent context management for any project - captures and restores knowledge, architecture, and patterns",
          "version": "1.0.0",
          "author": {
            "name": "Shyju Viswambaran",
            "email": "shyju.viswambaran@coxautoinc.com"
          },
          "source": "./context-management",
          "keywords": [
            "context",
            "knowledge-management",
            "memory",
            "architecture",
            "patterns"
          ],
          "categories": [
            "architecture",
            "context",
            "knowledge-management",
            "memory",
            "patterns"
          ],
          "install_commands": [
            "/plugin marketplace add Add4x/cc-plugins",
            "/plugin install context-management@development-plugins-marketplace"
          ]
        },
        {
          "name": "aws-profile-manager",
          "description": "Manage AWS credentials across multiple accounts using ALKS with named profiles for simultaneous access",
          "version": "1.0.0",
          "author": {
            "name": "Shyju Viswambaran",
            "email": "shyju.viswambaran@coxautoinc.com"
          },
          "source": "./aws-profile-manager",
          "keywords": [
            "aws",
            "alks",
            "credentials",
            "multi-account",
            "devops"
          ],
          "categories": [
            "alks",
            "aws",
            "credentials",
            "devops",
            "multi-account"
          ],
          "install_commands": [
            "/plugin marketplace add Add4x/cc-plugins",
            "/plugin install aws-profile-manager@development-plugins-marketplace"
          ]
        },
        {
          "name": "nextjs-frontend-dev",
          "description": "Comprehensive Next.js frontend development patterns with TypeScript, Tailwind CSS v4, shadcn/ui, TanStack Query, and Zustand - includes intelligent code generation and best practices",
          "version": "1.0.0",
          "author": {
            "name": "Shyju Viswambaran",
            "email": "shyju.viswambaran@coxautoinc.com"
          },
          "source": "./nextjs-frontend-dev",
          "keywords": [
            "nextjs",
            "react",
            "typescript",
            "tailwind",
            "shadcn",
            "frontend",
            "tanstack-query",
            "zustand",
            "web-development"
          ],
          "categories": [
            "frontend",
            "nextjs",
            "react",
            "shadcn",
            "tailwind",
            "tanstack-query",
            "typescript",
            "web-development",
            "zustand"
          ],
          "install_commands": [
            "/plugin marketplace add Add4x/cc-plugins",
            "/plugin install nextjs-frontend-dev@development-plugins-marketplace"
          ]
        }
      ]
    }
  ]
}