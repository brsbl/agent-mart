{
  "author": {
    "id": "edmundmiller",
    "display_name": "Edmund Miller",
    "avatar_url": "https://avatars.githubusercontent.com/u/20095261?u=8960d10cc8e5c32ec78186f277a398a2bd4eba30&v=4"
  },
  "marketplaces": [
    {
      "name": "dotfiles-plugins",
      "version": null,
      "description": "Version control workflow plugins for Jujutsu and Git, plus development utilities",
      "repo_full_name": "edmundmiller/dotfiles",
      "repo_url": "https://github.com/edmundmiller/dotfiles",
      "repo_description": "For keeping all my Dotfiles update to date",
      "signals": {
        "stars": 42,
        "forks": 3,
        "pushed_at": "2026-02-14T23:38:35Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"dotfiles-plugins\",\n  \"owner\": {\n    \"name\": \"emiller\",\n    \"email\": \"claude@edmundmiller.dev\"\n  },\n  \"metadata\": {\n    \"description\": \"Version control workflow plugins for Jujutsu and Git, plus development utilities\",\n    \"version\": \"0.1.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"jj\",\n      \"source\": \"./config/claude/plugins/jj\",\n      \"description\": \"Basic Jujutsu workflow for commit stacking and curation. Commands: /jj:commit (stack commits), /jj:split (pattern-based split), /jj:squash (merge commits), /jj:cleanup (remove workspaces). Includes auto-formatting hook.\",\n      \"version\": \"0.2.0\",\n      \"author\": {\n        \"name\": \"emiller\"\n      },\n      \"keywords\": [\"jujutsu\", \"jj\", \"version-control\", \"workflow\", \"commit-stacking\"],\n      \"license\": \"MIT\",\n      \"category\": \"version-control\",\n      \"tags\": [\"jujutsu\", \"workflow\", \"git-compatible\"]\n    },\n    {\n      \"name\": \"json-to-toon\",\n      \"source\": \"./config/claude/plugins/json-to-toon\",\n      \"description\": \"Automatically converts JSON in Claude Code prompts to TOON format for 30-60% token savings. Uses UserPromptSubmit hook to transparently optimize prompts without user intervention.\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"edmundmiller\"\n      },\n      \"keywords\": [\"json\", \"toon\", \"token-optimization\", \"compression\"],\n      \"license\": \"MIT\",\n      \"category\": \"development-utilities\",\n      \"tags\": [\"optimization\", \"tokens\", \"automation\"]\n    }\n  ]\n}\n",
        "README.md": "<div align=\"center\">\n   \n[![Made with Doom Emacs](https://img.shields.io/badge/Made_with-Doom_Emacs-blueviolet.svg?style=flat-square&logo=GNU%20Emacs&logoColor=white)](https://github.com/hlissner/doom-emacs)\n[![NixOS 24.11](https://img.shields.io/badge/NixOS-v24.11-blue.svg?style=flat-square&logo=NixOS&logoColor=white)](https://nixos.org)\n[![nix-darwin](https://img.shields.io/badge/nix--darwin-24.11-green.svg?style=flat-square&logo=apple&logoColor=white)](https://github.com/nix-darwin/nix-darwin)\n\n</div>\n\n**Hey,** you. You're finally awake. You were trying to configure your OS declaratively, right? Walked right into that NixOS ambush, same as us, and those dotfiles over there.\n\n> **Good news, traveler!** These dotfiles now work on both NixOS and macOS. One config to rule them all, and in the darkness bind them.\n\n```sh\n# Quick taste of what you're in for:\nnix run nix-darwin -- switch --flake ~/.config/dotfiles  # macOS\nnixos-rebuild switch --flake .#hostname                   # NixOS\n```\n\n---\n\n|                |                                                           |\n| -------------- | --------------------------------------------------------- |\n| **Shell:**     | zsh + a bunch of Nix magic                                |\n| **DM:**        | lightdm + lightdm-mini-greeter                            |\n| **WM:**        | bspwm + polybar (Linux) / Aerospace (macOS)               |\n| **Editor:**    | [Doom Emacs][doom-emacs] (and nvim when Emacs is napping) |\n| **Terminal:**  | st (Linux) / Ghostty (macOS)                              |\n| **Launcher:**  | rofi (Linux) / Raycast (macOS)                            |\n| **Browser:**   | firefox / Zen Browser / Orion (I collect browsers)        |\n| **GTK Theme:** | [Ant Dracula](https://github.com/EliverLara/Ant-Dracula)  |\n\n---\n\n## Quick start\n\n### NixOS? I used to be an adventurer like you...\n\n1. Acquire [NixOS 24.11][nixos] (or close enough).\n2. Boot into the installer.\n3. Do your partitions and mount your root to `/mnt` (or don't, I'm not your supervisor)\n4. `git clone https://github.com/emiller88/dotfiles /etc/nixos`\n5. Install NixOS: `nixos-install --root /mnt --flake /etc/nixos#XYZ`, where `XYZ` is your\n   hostname. Use `#generic` for a simple, universal config.\n6. OPTIONAL: Create a sub-directory in `hosts/` for your device. See [host/kuro]\n   as an example.\n7. Reboot!\n\n### macOS? Let me guess, someone stole your sweetroll.\n\n1. Install Nix using the [Determinate Systems installer](https://github.com/DeterminateSystems/nix-installer) (it's like the official installer, but actually works):\n   ```sh\n   curl --proto '=https' --tlsv1.2 -sSf -L https://install.determinate.systems/nix | sh -s -- install\n   ```\n   Why this installer? It handles macOS quirks, enables flakes by default, and won't leave you troubleshooting for hours.\n2. `git clone https://github.com/emiller88/dotfiles ~/.config/dotfiles`\n3. `cd ~/.config/dotfiles`\n4. `./bin/hey re` (or if `hey` isn't in your PATH yet: `nix run .#darwinConfigurations.HOSTNAME.system.build.darwin-rebuild -- switch --flake .`)\n   - Use `MacTraitor-Pro` or `Seqeratop` for HOSTNAME, or check `flake.nix` for available configs\n5. Grab a coffee while Nix downloads the internet\n6. `sudo ./result/sw/bin/darwin-rebuild --flake .#HOSTNAME switch` when prompted\n\n## Management\n\nAnd I say, `bin/hey`. [What's going on?](https://www.youtube.com/watch?v=ZZ5LpwO-An4)\n\n| Command           | Description                                                     |\n| ----------------- | --------------------------------------------------------------- |\n| `hey rebuild`     | Rebuild this flake (shortcut: `hey re`)                         |\n| `hey upgrade`     | Update flake lockfile and switch to it (shortcut: `hey up`)     |\n| `hey rollback`    | Roll back to previous system generation                         |\n| `hey gc`          | Runs `nix-collect-garbage -d`. Use sudo to clean system profile |\n| `hey push REMOTE` | Deploy these dotfiles to REMOTE (over ssh)                      |\n| `hey check`       | Run tests and checks for this flake                             |\n| `hey show`        | Show flake outputs of this repo                                 |\n\n## Frequently asked questions\n\n- **How do I change the default username?**\n  1. Set `USER` the first time you run `nixos-install`: `USER=myusername nixos-install --root /mnt --flake #XYZ`\n  2. Or change `\"emiller\"` in modules/options.nix (was `\"hlissner\"` in the before times).\n  3. For macOS: just make sure your username matches what's in the flake\n\n- **How do I \"set up my partitions\"?**\n\n  My main host [has a README](hosts/kuro/README.org) you can use as a reference.\n  I set up an EFI+GPT system and partitions with `parted` and `zfs`.\n\n  macOS users: You can skip this part and feel smug about it.\n\n- **Why is my build failing with homebrew errors?**\n\n  That's just homebrew being homebrew. The build succeeded, you just need to run the\n  activation with sudo. Check the message at the end of `hey re`.\n\n- **How 2 flakes?**\n\n  It wouldn't be the NixOS experience if I gave you all the answers in one,\n  convenient place. But basically: everything is a flake now, resistance is futile.\n\n[doom-emacs]: https://github.com/hlissner/doom-emacs\n[vim]: https://github.com/hlissner/.vim\n[nixos]: https://releases.nixos.org/?prefix=nixos/24.11/\n[host/kuro]: https://github.com/hlissner/dotfiles/tree/master/hosts/kuro\n\n## Usage as a flake\n\n[![FlakeHub](https://img.shields.io/endpoint?url=https://flakehub.com/f/Emiller88/dotfiles/badge)](https://flakehub.com/flake/Emiller88/dotfiles)\n\nAdd dotfiles to your `flake.nix`:\n\n```nix\n{\n  inputs.dotfiles.url = \"https://flakehub.com/f/Emiller88/dotfiles/*.tar.gz\";\n\n  outputs = { self, dotfiles }: {\n    # Use in your outputs\n  };\n}\n\n```\n",
        "config/claude/plugins/json-to-toon/README.md": "# Claude Code JSON-to-TOON Hook\n\nAutomatically converts JSON in your Claude Code prompts to [TOON format](https://github.com/johannschopplich/toon) for **30-60% token savings**.\n\n## What is TOON?\n\nTOON (Token-Oriented Object Notation) is a compact data format optimized for LLMs. Instead of repeating field names in every object, TOON declares them once and streams values as rows.\n\n**Example:**\n\nJSON (117 tokens):\n\n```json\n{\n  \"products\": [\n    { \"sku\": \"A123\", \"name\": \"Widget\", \"price\": 9.99 },\n    { \"sku\": \"B456\", \"name\": \"Gadget\", \"price\": 19.99 }\n  ]\n}\n```\n\nTOON (49 tokens - 58% reduction):\n\n```\nproducts[2]{sku,name,price}:\n  A123,Widget,9.99\n  B456,Gadget,19.99\n```\n\n## Features\n\n- ✅ Automatically detects and converts JSON in prompts\n- ✅ Handles JSON code blocks (` ```json `)\n- ✅ Handles inline JSON objects/arrays\n- ✅ Converts CSV data to TOON format\n- ✅ Converts Markdown tables to TOON format\n- ✅ Smart detection: preserves JavaScript/TypeScript code\n- ✅ Safe: fails gracefully, never breaks prompts\n- ✅ Zero configuration after setup\n\n## Prerequisites\n\n- [Claude Code](https://docs.claude.com/en/docs/claude-code)\n- Node.js (any recent version)\n\n## Installation\n\n### 1. Create hooks directory\n\n```bash\nmkdir -p ~/.claude/hooks\n```\n\n### 2. Download the TOON library\n\n```bash\ncurl -sL https://esm.sh/@byjohann/toon@latest/es2015/toon.mjs -o ~/.claude/hooks/toon.mjs\n```\n\n### 3. Download the hook script\n\n```bash\ncurl -sL https://gist.githubusercontent.com/maman/de31d48cd960366ce9caec32b569d32a/raw/json-to-toon.mjs -o ~/.claude/hooks/json-to-toon.mjs\nchmod +x ~/.claude/hooks/json-to-toon.mjs\n```\n\n### 4. Configure Claude Code\n\nAdd the following to your `~/.claude/settings.json`:\n\n```json\n{\n  \"hooks\": {\n    \"UserPromptSubmit\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"node ~/.claude/hooks/json-to-toon.mjs\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\nIf your `settings.json` already has a `hooks` section, merge the `UserPromptSubmit` configuration into it.\n\n## How It Works\n\nThe hook runs automatically before each prompt is sent to Claude:\n\n1. **Detects structured data** in your prompt:\n   - **JSON**: Code blocks with ` ```json ` identifier, plain code blocks containing valid JSON, or inline JSON objects/arrays (30+ characters)\n   - **CSV**: Code blocks with ` ```csv ` identifier or plain code blocks with comma/tab/pipe-delimited data\n   - **Markdown tables**: Standard markdown table syntax with header, separator, and data rows\n\n2. **Converts to TOON** format using optimized parsing\n\n3. **Preserves non-data content**:\n   - JavaScript/TypeScript code (detected via keywords)\n   - Plain text\n   - Other code blocks\n\n4. **Sends modified prompt** to Claude with reduced token count\n\n## Examples\n\n### Example 1: JSON Code Block\n\n**You type:**\n\n````\nAnalyze this data:\n\\```json\n{\n  \"users\": [\n    {\"id\": 1, \"name\": \"Alice\", \"active\": true},\n    {\"id\": 2, \"name\": \"Bob\", \"active\": false}\n  ]\n}\n\\```\n````\n\n**Claude receives:**\n\n````\nAnalyze this data:\n\\```\nusers[2]{id,name,active}:\n  1,Alice,true\n  2,Bob,false\n\\```\n````\n\n### Example 2: Inline JSON\n\n**You type:**\n\n```\nProcess this: {\"products\": [{\"sku\": \"A123\", \"name\": \"Widget\", \"price\": 9.99}], \"total\": 1}\n```\n\n**Claude receives:**\n\n```\nProcess this: products[1]{sku,name,price}:\n  A123,Widget,9.99\ntotal: 1\n```\n\n### Example 3: JavaScript Code (Not Converted)\n\n**You type:**\n\n```javascript\nfunction getData() {\n  return { users: [] };\n}\n```\n\n**Claude receives:** (unchanged)\n\n```javascript\nfunction getData() {\n  return { users: [] };\n}\n```\n\n### Example 4: CSV Data\n\n**You type:**\n\n````\nAnalyze this sales data:\n\\```csv\nproduct,quantity,revenue\nWidget,150,1485.00\nGadget,89,1780.11\nTool,234,3510.00\n\\```\n````\n\n**Claude receives:**\n\n````\nAnalyze this sales data:\n\\```\n[3]{product,quantity,revenue}:\n  Widget,150,1485\n  Gadget,89,1780.11\n  Tool,234,3510\n\\```\n````\n\n### Example 5: Markdown Tables\n\n**You type:**\n\n```\nCompare these database options:\n\n| Database  | Type      | Max Connections |\n|-----------|-----------|-----------------|\n| PostgreSQL| Relational| 100             |\n| MongoDB   | Document  | 500             |\n| Redis     | Key-Value | 10000           |\n```\n\n**Claude receives:**\n\n```\nCompare these database options:\n\n[3]{Database,Type,Max Connections}:\n  PostgreSQL,Relational,100\n  MongoDB,Document,500\n  Redis,Key-Value,10000\n```\n\n## Troubleshooting\n\n### Hook not running?\n\n1. Verify Node.js is installed: `node --version`\n2. Check script exists: `ls -lh ~/.claude/hooks/json-to-toon.mjs`\n3. Check script is executable: `chmod +x ~/.claude/hooks/json-to-toon.mjs`\n4. Verify settings.json syntax is valid JSON\n\n### Test the hook manually:\n\n```bash\necho '{\"prompt\": \"Test: {\\\"key\\\": \\\"value\\\", \\\"items\\\": [{\\\"a\\\": 1}, {\\\"a\\\": 2}]}\"}' | node ~/.claude/hooks/json-to-toon.mjs\n```\n\nExpected output:\n\n```\nTest: key: value\nitems[2]{a}:\n  1\n  2\n```\n\n## Credits\n\n- Hook implementation: This gist\n- TOON format: [@johannschopplich/toon](https://github.com/johannschopplich/toon)\n- Claude Code: [Anthropic](https://docs.claude.com/en/docs/claude-code)\n\n## License\n\nMIT - Use freely, no attribution required.\n"
      },
      "plugins": [
        {
          "name": "jj",
          "source": "./config/claude/plugins/jj",
          "description": "Basic Jujutsu workflow for commit stacking and curation. Commands: /jj:commit (stack commits), /jj:split (pattern-based split), /jj:squash (merge commits), /jj:cleanup (remove workspaces). Includes auto-formatting hook.",
          "version": "0.2.0",
          "author": {
            "name": "emiller"
          },
          "keywords": [
            "jujutsu",
            "jj",
            "version-control",
            "workflow",
            "commit-stacking"
          ],
          "license": "MIT",
          "category": "version-control",
          "tags": [
            "jujutsu",
            "workflow",
            "git-compatible"
          ],
          "categories": [
            "commit-stacking",
            "git-compatible",
            "jj",
            "jujutsu",
            "version-control",
            "workflow"
          ],
          "install_commands": [
            "/plugin marketplace add edmundmiller/dotfiles",
            "/plugin install jj@dotfiles-plugins"
          ]
        },
        {
          "name": "json-to-toon",
          "source": "./config/claude/plugins/json-to-toon",
          "description": "Automatically converts JSON in Claude Code prompts to TOON format for 30-60% token savings. Uses UserPromptSubmit hook to transparently optimize prompts without user intervention.",
          "version": "1.0.0",
          "author": {
            "name": "edmundmiller"
          },
          "keywords": [
            "json",
            "toon",
            "token-optimization",
            "compression"
          ],
          "license": "MIT",
          "category": "development-utilities",
          "tags": [
            "optimization",
            "tokens",
            "automation"
          ],
          "categories": [
            "automation",
            "compression",
            "development-utilities",
            "json",
            "optimization",
            "token-optimization",
            "tokens",
            "toon"
          ],
          "install_commands": [
            "/plugin marketplace add edmundmiller/dotfiles",
            "/plugin install json-to-toon@dotfiles-plugins"
          ]
        }
      ]
    }
  ]
}