{
  "author": {
    "id": "malanjp",
    "display_name": "malan",
    "avatar_url": "https://avatars.githubusercontent.com/u/120017?u=8c1012d62881a90b53b7ed25b40953c6891e18f5&v=4"
  },
  "marketplaces": [
    {
      "name": "discord-approval-marketplace",
      "version": "1.0.0",
      "description": "Discord経由で承認リクエスト・通知を送信するMCPサーバー",
      "repo_full_name": "malanjp/discord-approval-mcp",
      "repo_url": "https://github.com/malanjp/discord-approval-mcp",
      "repo_description": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-11T20:34:52Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n  \"name\": \"discord-approval-marketplace\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Discord経由で承認リクエスト・通知を送信するMCPサーバー\",\n  \"owner\": {\n    \"name\": \"malan\",\n    \"url\": \"https://github.com/malanjp\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"discord-approval\",\n      \"description\": \"Discord経由で承認リクエスト・通知を送信するMCPサーバー。Claude Codeから人間の承認を取得するワークフローを実現。\",\n      \"version\": \"1.0.0\",\n      \"source\": \"./plugins/discord-approval\",\n      \"category\": \"productivity\"\n    }\n  ]\n}\n",
        "README.md": "# Discord Approval Server MCP\n\nEnglish | [日本語](docs/README.ja.md)\n\nAn MCP server that sends approval requests and notifications via Discord from Claude Code.\n\n## Installation\n\n### Option A: Plugin Installation (Recommended)\n\n```bash\n# 1. Add the marketplace\nclaude plugin marketplace add malanjp/discord-approval-mcp\n\n# 2. Install the plugin\nclaude plugin install discord-approval\n\n# 3. Set environment variables (see below)\n\n# 4. Restart Claude Code\n```\n\nThe plugin automatically:\n- Configures the MCP server\n- Provides usage guide skill\n\n### Environment Variables Configuration\n\nYou need to set `DISCORD_BOT_TOKEN` and `DISCORD_CHANNEL_ID`. Choose one of the following methods:\n\n#### Method 1: Project-local settings (Recommended)\n\nCreate `.claude/settings.local.json` in your project root (add to `.gitignore`):\n\n```json\n{\n  \"env\": {\n    \"DISCORD_BOT_TOKEN\": \"your_bot_token\",\n    \"DISCORD_CHANNEL_ID\": \"your_channel_id\"\n  }\n}\n```\n\n#### Method 2: User-wide settings\n\nCreate or edit `~/.claude/settings.json`:\n\n```json\n{\n  \"env\": {\n    \"DISCORD_BOT_TOKEN\": \"your_bot_token\",\n    \"DISCORD_CHANNEL_ID\": \"your_channel_id\"\n  }\n}\n```\n\n#### Method 3: Shell environment variables\n\nAdd to `~/.zshrc` or `~/.bashrc`:\n\n```bash\nexport DISCORD_BOT_TOKEN=\"your_bot_token\"\nexport DISCORD_CHANNEL_ID=\"your_channel_id\"\n```\n\n#### Priority Order (highest to lowest)\n\n1. `.claude/settings.local.json` (project-local, gitignored)\n2. `.claude/settings.json` (project-shared)\n3. `~/.claude/settings.json` (user-wide)\n4. OS environment variables (`~/.zshrc`, etc.)\n\n### Option B: Manual Setup\n\n## Setup\n\n### 1. Create a Discord Bot\n\n1. Go to the [Discord Developer Portal](https://discord.com/developers/applications)\n2. Click **New Application** → Enter an application name\n3. Navigate to the **Bot** tab → Click **Reset Token** → Copy the token\n4. In the **Bot** tab → Enable **MESSAGE CONTENT INTENT** (optional)\n5. Go to **OAuth2** → **URL Generator**:\n   - Scopes: `bot`\n   - Bot Permissions: `Send Messages`, `Read Message History`\n6. Use the generated URL to invite the bot to your server\n\n### 2. Get the Channel ID\n\n1. Open Discord Settings → Advanced → Enable **Developer Mode**\n2. Right-click the channel where you want to receive notifications → **Copy ID**\n\n### 3. Build\n\n```bash\nnpm install\nnpm run build\n```\n\n### 4. Configure Claude Code\n\nAdd to `~/.claude.json`:\n\n```json\n{\n  \"mcpServers\": {\n    \"discord-approval\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/discord-approval-mcp/dist/index.js\"],\n      \"env\": {\n        \"DISCORD_BOT_TOKEN\": \"your_bot_token\",\n        \"DISCORD_CHANNEL_ID\": \"your_channel_id\"\n      }\n    }\n  }\n}\n```\n\n## Available Tools\n\n### `request_approval`\n\nSends an approval request and waits for the user's response.\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| message | string | ✅ | The content to be approved |\n| timeout | number | - | Timeout in seconds (default: 300) |\n\n**Returns**: `Approved` / `Denied` / `Timeout`\n\n### `notify`\n\nSends a notification (no response required).\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| message | string | ✅ | The notification message |\n\n### `ask_question`\n\nSends a question with multiple choices and waits for the user's selection.\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| question | string | ✅ | The question to ask |\n| options | string[] | ✅ | Array of choices (2-25 items) |\n| timeout | number | - | Timeout in seconds (default: 300) |\n\n**Returns**: The selected option / `Timeout`\n\n### `schedule_reminder`\n\nSchedules a reminder to be sent to Discord after a specified delay. Use with AskUserQuestion to notify via Discord when the user doesn't respond in time.\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| message | string | ✅ | The reminder message |\n| delay_seconds | number | ✅ | Delay in seconds (1-3600) |\n\n**Returns**: `{ reminder_id: string }` for cancellation\n\n### `cancel_reminder`\n\nCancels a scheduled reminder.\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| reminder_id | string | ✅ | The reminder ID from schedule_reminder |\n\n**Returns**: Success / Error message\n\n### `notify_with_status`\n\nSends a notification with status using Discord Embed (color-coded).\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| message | string | ✅ | The notification message |\n| status | string | ✅ | Status type: `success` (green), `error` (red), `warning` (yellow), `info` (blue) |\n| details | string | - | Additional details (optional) |\n\n**Returns**: Success / Error message\n\n### `request_text_input`\n\nRequests text input from the user via Discord Modal dialog.\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| title | string | ✅ | Modal title (max 45 characters) |\n| prompt | string | ✅ | Message prompting for input |\n| placeholder | string | - | Placeholder text (max 100 characters) |\n| multiline | boolean | - | Allow multiline input (default: false) |\n| timeout | number | - | Timeout in seconds (default: 300, max: 900) |\n\n**Returns**: The entered text / `Cancelled` / `Timeout`\n\n### `confirm_with_diff`\n\nShows a code diff and requests approval from the user.\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| message | string | ✅ | Description of the changes |\n| diff | string | ✅ | The diff to display (unified diff format recommended) |\n| filename | string | - | Filename for syntax highlighting |\n| timeout | number | - | Timeout in seconds (default: 300, max: 900) |\n\n**Returns**: `Approved` / `Denied` / `Timeout`\n\n### `poll`\n\nSends a poll with multiple selectable options and waits for the user's selection.\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| question | string | ✅ | The question to ask |\n| options | string[] | ✅ | Array of choices (2-25 items) |\n| min_selections | number | - | Minimum selections required (default: 0) |\n| max_selections | number | - | Maximum selections allowed (default: all options) |\n| timeout | number | - | Timeout in seconds (default: 300, max: 900) |\n\n**Returns**: Array of selected options / `Timeout`\n\n### `request_approval_with_reason`\n\nSends an approval request and collects a reason when denied.\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| message | string | ✅ | The content to be approved |\n| timeout | number | - | Timeout in seconds (default: 300, max: 900) |\n\n**Returns**: `{ approved: boolean, reason?: string }` / `Timeout`\n\n### `create_thread`\n\nCreates a Discord thread for organizing long task progress.\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| name | string | ✅ | Thread name (max 100 characters) |\n| message | string | - | Initial message in the thread |\n\n**Returns**: `{ thread_id: string }` / Error message\n\n## Usage Example\n\nIn Claude Code:\n\n```\nGet user approval before deploying to production\n```\n\n→ A message with buttons will be sent to Discord, waiting for approval/denial\n\n## CLAUDE.md Configuration\n\nTo make Claude Code automatically use these tools, add the following to your `~/.claude/CLAUDE.md`:\n\n```markdown\n### discord-approval\n\nUse `mcp__discord-approval__request_approval` for approval in these situations:\n- Before deploying to production\n- Before running database migrations\n- Before bulk file deletions\n- Before other irreversible operations\n\nUse `mcp__discord-approval__ask_question` when you need the user to choose from multiple options:\n- Selecting implementation approach\n- Clarifying ambiguous instructions\n- Choosing configuration values\n\nUse `mcp__discord-approval__notify` when long-running tasks (builds, tests, etc.) complete.\n\nUse `mcp__discord-approval__notify_with_status` for rich notifications with status indicators:\n- Success notifications (green) for completed tasks\n- Error notifications (red) for failures\n- Warning notifications (yellow) for potential issues\n- Info notifications (blue) for general information\n\nUse `mcp__discord-approval__request_text_input` when you need free-form text input:\n- Gathering error details from the user\n- Requesting additional requirements\n- Getting commit message modifications\n\nUse `mcp__discord-approval__confirm_with_diff` when showing code changes for approval:\n- Before applying file modifications\n- Reviewing generated code changes\n\nUse `mcp__discord-approval__poll` when multiple selections are needed:\n- Selecting multiple features to implement\n- Choosing which bugs to fix first\n\nUse `mcp__discord-approval__request_approval_with_reason` when you need rejection feedback:\n- Understanding why a change was rejected\n- Collecting improvement suggestions\n\nUse `mcp__discord-approval__create_thread` for organizing long tasks:\n- Multi-step implementation progress\n- Grouping related notifications\n\n## When to actively use discord approval mcp\n\n- When prompting the user for confirmation\n- When asking questions to the user\n- When a task is completed\n```\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "discord-approval",
          "description": "Discord経由で承認リクエスト・通知を送信するMCPサーバー。Claude Codeから人間の承認を取得するワークフローを実現。",
          "version": "1.0.0",
          "source": "./plugins/discord-approval",
          "category": "productivity",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add malanjp/discord-approval-mcp",
            "/plugin install discord-approval@discord-approval-marketplace"
          ]
        }
      ]
    }
  ]
}