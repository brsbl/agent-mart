{
  "author": {
    "id": "yaniv-golan",
    "display_name": "Yaniv Golan",
    "avatar_url": "https://avatars.githubusercontent.com/u/5079117?u=dadce3af041e61ab43af7bc039683a01395ec52e&v=4"
  },
  "marketplaces": [
    {
      "name": "git-hex-marketplace",
      "version": null,
      "description": "Marketplace entry for the git-hex plugin.",
      "repo_full_name": "yaniv-golan/git-hex",
      "repo_url": "https://github.com/yaniv-golan/git-hex",
      "repo_description": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-23T07:52:03Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"git-hex-marketplace\",\n  \"description\": \"Marketplace entry for the git-hex plugin.\",\n  \"owner\": {\n    \"name\": \"Yaniv Golan\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"git-hex\",\n      \"description\": \"Git history rewrite and conflict-resolution tools (MCP) with curated skills.\",\n      \"source\": \"./\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"git-hex\",\n  \"version\": \"0.1.0\",\n  \"description\": \"AI-assisted, non-interactive git refactoring via MCP (safe rebase, fixups, commit surgery) for agents or chat users invoking the MCP tools.\",\n  \"author\": {\n    \"name\": \"Yaniv Golan\",\n    \"url\": \"https://github.com/yaniv-golan\"\n  },\n  \"repository\": \"https://github.com/yaniv-golan/git-hex\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"git\", \"rebase\", \"mcp\", \"git-hex\", \"mcp-bash\"],\n  \"mcpServers\": {\n    \"git-hex\": {\n      \"command\": \"${CLAUDE_PLUGIN_ROOT}/git-hex.sh\"\n    }\n  }\n}\n",
        "README.md": "# git-hex\n\n![git-hex banner](assets/git-hex-banner.png)\n[![CI Status](https://github.com/yaniv-golan/git-hex/actions/workflows/test.yml/badge.svg)](https://github.com/yaniv-golan/git-hex/actions/workflows/test.yml)\n[![Lint](https://github.com/yaniv-golan/git-hex/actions/workflows/lint.yml/badge.svg)](https://github.com/yaniv-golan/git-hex/actions/workflows/lint.yml)\n[![License](https://img.shields.io/github/license/yaniv-golan/git-hex)](LICENSE)\n[![Security Policy](https://img.shields.io/badge/security-policy-blue)](SECURITY.md)\n[![Last Commit](https://img.shields.io/github/last-commit/yaniv-golan/git-hex)](https://github.com/yaniv-golan/git-hex/commits/main)\n[![Pure Bash](https://img.shields.io/badge/pure-bash-4EAA25?logo=gnubash&logoColor=white)](https://www.gnu.org/software/bash/)\n[![MCP](https://img.shields.io/badge/MCP-server-green?logo=modelcontextprotocol)](https://yaniv-golan.github.io/affinity-sdk/mcp/)\n[![MCP Bash Framework](https://img.shields.io/badge/MCP-MCP_Bash_Framework-green?logo=modelcontextprotocol)](https://github.com/yaniv-golan/mcp-bash-framework)\n\n**AI-assisted, non-interactive git refactoring via MCP** — a focused toolset for rebase & commit perfection, usable by agents or chat users directing the MCP tools.\n\ngit-hex is an MCP (Model Context Protocol) server that provides AI assistants with safe, powerful git refactoring capabilities. It handles the complexity of interactive rebasing, fixup commits, and commit amendments while ensuring your repository is never left in a broken state.\n\nName note: “git-hex” is simply a short label for this git-history refactoring toolkit (not related to hex encoding).\n\nSee [`CHANGELOG.md`](CHANGELOG.md) for notable changes. Version metadata also lives in [`VERSION`](VERSION) and [`.claude-plugin/plugin.json`](.claude-plugin/plugin.json).\n\n**Quick links:** [`docs/install.md`](docs/install.md) • [`docs/safety.md`](docs/safety.md) • [`docs/clients.md`](docs/clients.md) • [`docs/reference/tools.md`](docs/reference/tools.md) • [`docs/reference/mcp.md`](docs/reference/mcp.md) • [`SECURITY.md`](SECURITY.md) • [`CONTRIBUTING.md`](CONTRIBUTING.md)\n\n## Table of contents\n\n- [Quick Start](#quick-start-2-minutes)\n- [Safety First](#safety-first)\n- [How it works](#how-it-works)\n- [Requirements](#requirements)\n- [Configuration](#configuration)\n- [Common workflows](#common-workflows)\n- [Tool reference](#tool-reference)\n- [CLI testing/debugging](#cli-testingdebugging)\n- [Diagnostics & Health](#diagnostics--health)\n- [Docker](#docker)\n- [Troubleshooting](#troubleshooting)\n- [Support](#support)\n- [Security](#security)\n\n## Design Principles\n\n- **Safety first**: Conflict-prone operations abort cleanly by default and create backup refs so you can always undo.\n- **Deterministic git**: Focus on well-defined history rewrites (rebase, fixup, amend, split-by-file) with predictable outputs.\n- **Minimal surface**: Tools only—no extra services. Everything runs through the MCP Bash Framework.\n- **Respect the sandbox**: Every path is validated against your client’s allowed folders (MCP `roots`); read-only mode blocks mutating tools.\n- **Agent friendly**: Outputs are structured, include summaries, and prefer explicit parameters over magic.\n\n## Features\n\n- **Safe Rebasing**: Automatic abort on conflicts so git-hex operations leave the repo clean if conflicts arise\n- **Fixup Commits**: Create fixup! commits for later auto-squashing\n- **Commit Amendments**: Safely amend the last commit with staged changes\n- **Cherry-picking**: Single-commit cherry-pick with strategy options\n- **Undo Support**: Backup refs for history-mutating operations (amend, fixup, cherry-pick, rebase, split); undo is safe unless new commits were added after the backup (see `force`)\n- **Path Security**: All operations respect your client’s allowed folders (MCP `roots`) for sandboxed access\n\n## Quick Start (2 minutes)\n\n### Connect your AI\n\n**Claude Code (recommended):**\n```text\n/plugin marketplace add yaniv-golan/git-hex\n/plugin install git-hex@git-hex-marketplace\n```\n\n**Cursor / Claude Desktop / Windsurf (MCP config):**\n```bash\ngit clone https://github.com/yaniv-golan/git-hex.git ~/git-hex\ncd ~/git-hex\n./git-hex.sh install\n```\nThen add to your MCP settings:\n```json\n{\n  \"mcpServers\": {\n    \"git-hex\": {\n      \"command\": \"~/git-hex/git-hex.sh\"\n    }\n  }\n}\n```\n\nWindows (Git Bash): see [`docs/clients.md#windows-git-bash`](docs/clients.md#windows-git-bash)\n\nPrerequisites: `git` and `jq`/`gojq`. See [`docs/install.md`](docs/install.md).\n\n### Verify it works\n\nIn your AI chat (in a repo), ask:\n\n> “Show me the last 5 commits I could rebase onto `main`.”\n\nWhen connected, your AI can use tools like `git-hex-getRebasePlan` to answer.\n\n<details>\n<summary>Having issues?</summary>\n\n- Diagnostics (no persistent changes): `./git-hex.sh doctor`\n- Install/repair prerequisites: `./git-hex.sh install`\n- macOS apps launched from Finder/Spotlight/Dock: use `git-hex-env.sh` (see [`docs/clients.md`](docs/clients.md))\n- Install/uninstall details: [`docs/install.md`](docs/install.md)\n- Allowed folders (“roots”) explanation: [`docs/concepts.md`](docs/concepts.md#allowed-folders-mcp-roots)\n\n</details>\n\n## Safety First\n\n- **Allowed folders enforcement**: repo paths must be inside configured allowed folders (MCP `roots`).\n- **Backups for mutations**: every history-mutating tool creates `refs/git-hex/backup/...` so you can recover.\n- **Conflict safety**: rebases/cherry-picks abort and restore by default on conflicts.\n- **Read-only mode**: set `GIT_HEX_READ_ONLY=1` to block all mutating tools.\n- **Scoped guarantees**: git-hex tools do not run `git push/fetch/pull`; dependency installation may use the network unless you preinstall/pin it.\n\nDetails: [`docs/safety.md`](docs/safety.md)\n\n### Next: 30-second end-to-end example (mutates history)\n\n1. Stage a fix: `git add <files>`\n2. In your AI chat, ask it to create a fixup targeting a commit, then autosquash onto `main`\n   - Tools involved: `git-hex-createFixup` → `git-hex-rebaseWithPlan` (with `autosquash=true`)\n\n## How It Works\n\n### Feature Branch Cleanup Workflow\n\nThe typical git-hex workflow for cleaning up a feature branch after code review:\n\n```mermaid\nflowchart LR\n    A[Review feedback] --> B[getRebasePlan]\n    B --> C{Inspect commits}\n    C --> D[Stage fix]\n    D --> E[createFixup]\n    E --> C\n    C --> F[rebaseWithPlan<br/>autosquash=true]\n    F --> G[Clean history ✓]\n```\n\n### Tool Overview\n\n```mermaid\nflowchart TB\n    subgraph readonly[\"Read-Only\"]\n        plan[getRebasePlan]\n        predict[checkRebaseConflicts]\n        conflictStatus[getConflictStatus]\n    end\n    \n    subgraph mutating[\"History & State Changes\"]\n        rebase[rebaseWithPlan]\n        split[splitCommit]\n        fixup[createFixup]\n        amend[amendLastCommit]\n        cherry[cherryPickSingle]\n    end\n    \n    subgraph conflict[\"Conflict Helpers (no backups)\"]\n        resolve[resolveConflict]\n        cont[continueOperation]\n        abort[abortOperation]\n    end\n    \n    subgraph safety[\"Safety Net\"]\n        undo[undoLast]\n    end\n    \n    predict -.->|\"simulate\"| rebase\n    plan -.->|\"plan first\"| rebase\n    fixup -->|\"then squash\"| rebase\n    \n    rebase --> conflictStatus\n    cherry --> conflictStatus\n    conflictStatus --> resolve\n    resolve --> cont\n    abort -.-> rebase\n\n    rebase --> undo\n    split --> undo\n    fixup --> undo\n    amend --> undo\n    cherry --> undo\n```\n\nAll history-mutating operations create backup refs, enabling `undoLast` to restore the previous state. Conflict-resolution helpers (`resolveConflict`, `continueOperation`, etc.) do not create backups.\n\n## Requirements\n\n| Dependency | Version/Notes |\n|------------|---------------|\n| MCP Bash Framework (`mcp-bash`) | v0.9.6+ |\n| bash | 3.2+ |\n| jq or gojq | Required |\n| git | 2.20+ (2.33+ for `ort`, 2.38+ for `git-hex-checkRebaseConflicts`) |\n\n## Configuration\n\n### Required\n\n| Variable | Description |\n|----------|-------------|\n| `MCPBASH_PROJECT_ROOT` | Project root containing `tools/`. **Auto-set** by `git-hex.sh` and generated wrappers; required only if you invoke `mcp-bash` directly from outside the repo. |\n\n### Optional\n\n| Variable | Default | Description |\n|----------|---------|-------------|\n| `GIT_HEX_READ_ONLY` | unset | `1` blocks mutating tools (see [`docs/safety.md`](docs/safety.md)) |\n| `GIT_HEX_MCPBASH_SHA256` | unset | If set, `./git-hex.sh install` downloads the `FRAMEWORK_VERSION` tarball and verifies it against this checksum (fails on mismatch) instead of cloning. |\n| `GIT_HEX_MCPBASH_ARCHIVE_URL` | unset | Optional override for the tarball URL used when `GIT_HEX_MCPBASH_SHA256` is set. |\n| `MCPBASH_TOOL_ALLOWLIST` | (set by launchers) | Framework v0.7.0+: allowlisted tools may execute. The launchers set an explicit list of git-hex tool names by default (and narrow it in read-only mode). Override to `*` only for trusted environments. |\n\n**Examples:**\n\n```bash\n# Read-only mode (inspection only, no history changes)\nGIT_HEX_READ_ONLY=1 ./git-hex.sh\n\n# Verified framework install (CI/supply-chain security)\nGIT_HEX_MCPBASH_SHA256=\"10524108...\" ./git-hex.sh install\n\n# In MCP client config (e.g., Claude Desktop)\n{\n  \"mcpServers\": {\n    \"git-hex\": {\n      \"command\": \"/path/to/git-hex.sh\",\n      \"env\": { \"GIT_HEX_READ_ONLY\": \"1\" }\n    }\n  }\n}\n```\n\n### Completions\n\ngit-hex ships completion providers (refs, commits, conflict paths) registered declaratively via `server.d/register.json`. Completions require jq/gojq.\n\n> **Tip:** Running `mcp-bash` outside this repo without `MCPBASH_PROJECT_ROOT` starts the framework’s getting-started helper, not git-hex. Use `./git-hex.sh` (CLI) or `./git-hex-env.sh` (macOS apps launched from Finder/Spotlight/Dock; see `docs/clients.md`) when launching from other directories or GUI clients.\n\n## Versioning & Releases\n\n- Current development version: `0.1.0` (see `VERSION`).\n- We plan to publish GitHub Releases with signed tags, release notes, and checksums for verification. Until those are published, pin a specific commit for reproducibility (e.g., `git checkout <commit-sha>`).\n\n## Lint & Tests\n\n- Lint shell scripts: `./test/lint.sh`\n- Run all tests: `./test/run.sh` (or `./test/integration/run.sh` / `./test/security/run.sh`)\n- Optional pre-commit hook to auto-run lint: `git config core.hooksPath .githooks`\n- Contributors: see [`CONTRIBUTING.md`](CONTRIBUTING.md) for `./git-hex.sh validate` and the full workflow\n\n## Installation\n\nStart here: [`docs/install.md`](docs/install.md) (includes verified framework installs and uninstall/cleanup).\n\n```bash\ngit clone https://github.com/yaniv-golan/git-hex.git ~/git-hex\ncd ~/git-hex\n./git-hex.sh install\n```\n\n## Clients & plugin\n\nSee [`docs/clients.md`](docs/clients.md) for Claude Code plugin setup, MCP client configuration (Cursor/Windsurf/Claude Desktop/CLI), and launcher guidance.\n\n## Common Workflows\n\nThese examples show how to combine git-hex tools for typical development tasks.\n\n### Clean Up a Feature Branch After Code Review\n\nAfter receiving review feedback, create targeted fixups and squash them:\n\n```\n1. Review current commits\n   → git-hex-getRebasePlan { \"onto\": \"main\" }\n   \n2. For each piece of feedback:\n   - Make the fix in your editor\n   - Stage the changes: git add <files>\n   - Create a fixup targeting the original commit:\n     → git-hex-createFixup { \"commit\": \"<hash-of-commit-to-fix>\" }\n\n3. Squash all fixups into their targets:\n   → git-hex-rebaseWithPlan { \"onto\": \"main\", \"autosquash\": true }\n```\n\n### Bring Your Branch Up to Date with Main\n\nRebase your feature branch onto the latest main:\n\n```\n1. First, update main:\n   git checkout main && git pull\n\n2. Switch back to your feature branch:\n   git checkout feature/my-branch\n\n3. Preview what will be rebased:\n   → git-hex-getRebasePlan { \"onto\": \"main\" }\n\n4. Perform the rebase:\n   → git-hex-rebaseWithPlan { \"onto\": \"main\" }\n   \n   If conflicts occur, git-hex automatically aborts and restores your branch.\n   Resolve conflicts manually, then retry.\n```\n\n### Quick Fix to the Last Commit\n\nAmend the most recent commit with additional changes:\n\n```\n1. Make your changes in the editor\n2. Stage them: git add <files>\n3. Amend:\n   → git-hex-amendLastCommit { \"addAll\": true }\n   \n   Or with a new message:\n   → git-hex-amendLastCommit { \"message\": \"Better commit message\" }\n```\n\n### Cherry-Pick a Single Fix from Another Branch\n\nBring one specific commit to your current branch:\n\n```\n1. Find the commit hash on the source branch:\n   git log other-branch --oneline\n\n2. Cherry-pick it:\n   → git-hex-cherryPickSingle { \"commit\": \"<hash>\" }\n   \n   If conflicts occur, git-hex aborts automatically.\n```\n\n### Undo the Last git-hex Operation\n\nMade a mistake? Undo it:\n\n```\n→ git-hex-undoLast {}\n\nThis restores HEAD to its state before the last git-hex operation.\nWorks for: amendLastCommit, createFixup, rebaseWithPlan, cherryPickSingle, splitCommit\n```\n\n### When NOT to Use git-hex\n\n- **On shared/protected branches** — Use on personal feature branches only\n- **For hunk-level splitting** — `splitCommit` splits by file only; use `git add -p` + manual commits for line-level splits\n- **On repos with contribution models you don't control** — Understand the project's rebase policy first\n\n### Using git-hex with GitHub\n\ngit-hex handles the **local craft** of shaping commits, while remote collaboration tools handle working with teammates. Together, they cover the complete pull request lifecycle:\n\n1. **Local craft (git-hex)** — shape your commits:\n   - `git-hex-getRebasePlan` — review messy history\n   - `git-hex-createFixup` — fix earlier commits\n   - `git-hex-rebaseWithPlan` — squash/reword for clean history\n\n2. **Push**: `git push --force-with-lease`\n\n3. **Remote collaboration** — work with teammates:\n   - **With [GitHub Plugin](https://github.com/anthropics/claude-plugins-official/tree/main/external_plugins/github)** (from the [Official Claude Plugin Marketplace](https://github.com/anthropics/claude-plugins-official)): use its tools for PRs, reviewers, comments\n   - **With GitHub CLI**: `gh pr create`, `gh pr view`, `gh pr edit`\n\n4. **After review feedback**: return to step 1 for more local craft\n\n## Tool reference\n\nFull per-tool parameters, examples, and outputs: [`docs/reference/tools.md`](docs/reference/tools.md)\n\n## Safety & recovery\n\nDetailed safety model, read-only mode, and recovery procedures: [`docs/safety.md`](docs/safety.md)\n\n## CLI testing/debugging\n\n```bash\n# Run a tool directly (debug/CI)\n./git-hex.sh run-tool git-hex-getRebasePlan --roots /path/to/repo --args '{\"count\": 5}'\n\n# Run with MCP Inspector (must be run from project root or use ./git-hex.sh)\ncd /path/to/git-hex\nnpx @modelcontextprotocol/inspector --transport stdio -- mcp-bash\n\n# Alternative: use git-hex.sh wrapper (works from any directory)\nnpx @modelcontextprotocol/inspector --transport stdio -- /path/to/git-hex/git-hex.sh\n```\n\n> **Note:** The MCP Bash Framework CLI (`mcp-bash`) auto-detects the project root when run from within the git-hex directory. If running from elsewhere, either use the `./git-hex.sh` wrapper or set `MCPBASH_PROJECT_ROOT=/path/to/git-hex`.\n\n## Diagnostics & Health\n\n- Project validation: `./git-hex.sh validate` (or `mcp-bash validate` from the repo)\n- Ready check: `./git-hex.sh --health` (stdio exit code: `0` ready, `1` unhealthy, `2` misconfigured)\n- `install` policy refusal: exits `3` when refusing to modify a user-managed framework install (e.g., `MCPBASH_HOME` points outside the managed path).\n- Debug a single tool without starting MCP: `./git-hex.sh run-tool <tool> --args '{}' --roots <repo>`\n- Backup inventory: `git for-each-ref refs/git-hex/`\n\n## Docker\n\n```bash\ndocker build -t git-hex .\ndocker run -i --rm -v /path/to/repo:/repo git-hex\n```\n\nUse Docker in one of two modes:\n\n- Run the MCP server (stdio) in the container (for MCP clients), and configure your client’s allowed folders (MCP `roots` / `allowedRoots`) to include the mounted repo (see [`docs/concepts.md`](docs/concepts.md#allowed-folders-mcp-roots)).\n- Debug a single tool call in the container via `run-tool` (in this mode, `--roots` is valid because it applies to `run-tool`).\n\n- With MCP Inspector:\n  ```bash\n  npx @modelcontextprotocol/inspector --transport stdio -- \\\n    docker run -i --rm -v /path/to/repo:/repo git-hex\n  ```\n- With a client config that starts the server:\n  ```json\n  {\n    \"mcpServers\": {\n      \"git-hex\": {\n        \"command\": \"docker\",\n        \"args\": [\"run\", \"-i\", \"--rm\", \"-v\", \"/path/to/repo:/repo\", \"git-hex\"]\n      }\n    }\n  }\n  ```\n\n`repoPath` must be within an allowed folder (MCP `roots`); pass it explicitly when you mount multiple repositories.\n\nDebug a single tool call in the container:\n\n```bash\ndocker run --rm -v /path/to/repo:/repo git-hex \\\n  run-tool git-hex-getRebasePlan --roots /repo --args '{\"count\": 5}'\n```\n\n## Troubleshooting\n\n- `undoLast` fails because of new commits: re-run with `\"force\": true` if you intend to discard the commits added after the git-hex operation. If a rebase/merge/cherry-pick is paused, resolve/abort it first.\n- Stuck rebase/cherry-pick: run `git-hex-getConflictStatus`, resolve files, then `git-hex-continueOperation`; if you want to abandon, use `git-hex-abortOperation`.\n- MCP connectivity or repo path errors: ensure `repoPath` is inside your configured allowed folders (MCP `roots`) and that the repo is clean when required (see tool prerequisites and [`docs/concepts.md`](docs/concepts.md#allowed-folders-mcp-roots)).\n- GPG signing/pinentry hangs: tools that create commits default to unsigned commits to avoid non-interactive hangs. If you want signed commits, set `\"signCommits\": true` on the relevant tool call.\n\n## Documentation Map\n\nUser docs:\n- Install: [`docs/install.md`](docs/install.md)\n- Safety & recovery: [`docs/safety.md`](docs/safety.md)\n- Client setup: [`docs/clients.md`](docs/clients.md)\n- Tool reference: [`docs/reference/tools.md`](docs/reference/tools.md)\n- MCP/framework details: [`docs/reference/mcp.md`](docs/reference/mcp.md)\n\nPlugin/workflows:\n- Skills: [`skills/git-hex-branch-cleanup/SKILL.md`](skills/git-hex-branch-cleanup/SKILL.md), [`skills/git-hex-conflict-resolution/SKILL.md`](skills/git-hex-conflict-resolution/SKILL.md), [`skills/git-hex-pr-workflow/SKILL.md`](skills/git-hex-pr-workflow/SKILL.md)\n- Claude command templates: [`claude-commands/`](claude-commands)\n\nProject:\n- CHANGELOG: [`CHANGELOG.md`](CHANGELOG.md)\n- Plugin metadata: [`.claude-plugin/`](.claude-plugin)\n- Server metadata/policy: [`server.d/`](server.d)\n\n## Support\n\nSee [`SUPPORT.md`](SUPPORT.md).\n\n## Security\n\nSee [`SECURITY.md`](SECURITY.md) for how to report vulnerabilities.\n\n## License\n\nMIT License - see [`LICENSE`](LICENSE) for details.\n\n## Contributing\n\nContributions welcome! Please ensure:\n- All tools pass `mcp-bash validate` (MCP Bash Framework CLI)\n- New tools follow the naming convention (`git-hex-toolName`)\n- Tests are included for new functionality\n\n## Distribution\n\n**Download the latest bundle** from [GitHub Releases](https://github.com/yaniv-golan/git-hex/releases) — look for `git-hex-<version>.mcpb`.\n\nInstall by double-clicking the `.mcpb` file in Claude Desktop or other MCPB-compatible clients. The bundle includes the embedded framework, all tools, prompts, and resources.\n\nFor development or custom builds:\n```bash\nmake bundle  # Output: dist/git-hex-<version>.mcpb\n```\n\n## Related Projects\n\n- [mcp-bash-framework](https://github.com/yaniv-golan/mcp-bash-framework) - The MCP server framework powering git-hex\n- [Model Context Protocol](https://modelcontextprotocol.io/) - The protocol specification\n"
      },
      "plugins": [
        {
          "name": "git-hex",
          "description": "Git history rewrite and conflict-resolution tools (MCP) with curated skills.",
          "source": "./",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add yaniv-golan/git-hex",
            "/plugin install git-hex@git-hex-marketplace"
          ]
        }
      ]
    }
  ]
}