{
  "author": {
    "id": "wuliang142857",
    "display_name": "wuliang142857",
    "avatar_url": "https://avatars.githubusercontent.com/u/93135?u=6c35aa84bb30ba86fd1dd24c54173d8c74ae4056&v=4"
  },
  "marketplaces": [
    {
      "name": "wuliang142857",
      "version": "1.0.0",
      "description": "wuliang142857's Claude Code plugins",
      "repo_full_name": "wuliang142857/claude-task-notify",
      "repo_url": "https://github.com/wuliang142857/claude-task-notify",
      "repo_description": "DingTalk notifications for Claude Code with remote interaction support",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-26T10:06:33Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"wuliang142857\",\n  \"version\": \"1.0.0\",\n  \"description\": \"wuliang142857's Claude Code plugins\",\n  \"owner\": {\n    \"name\": \"wuliang142857\",\n    \"email\": \"wuliang@wuliang142857.me\",\n    \"url\": \"https://github.com/wuliang142857\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"notify\",\n      \"description\": \"DingTalk notifications for Claude Code with remote interaction support\",\n      \"version\": \"1.0.0\",\n      \"source\": \"./plugins/notify\",\n      \"category\": \"notification\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"task-notify\",\n  \"description\": \"DingTalk notifications for Claude Code with remote interaction support. Get notified when Claude needs attention and reply remotely.\",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"wuliang142857\",\n    \"email\": \"wuliang@wuliang142857.me\",\n    \"url\": \"https://github.com/wuliang142857\"\n  },\n  \"license\": \"MIT\",\n  \"repository\": \"https://github.com/wuliang142857/claude-task-notify\",\n  \"homepage\": \"https://github.com/wuliang142857/claude-task-notify#readme\",\n  \"keywords\": [\n    \"notification\",\n    \"dingtalk\",\n    \"remote\",\n    \"hooks\",\n    \"interaction\"\n  ]\n}\n",
        "README.md": "# Claude Task Notify\n\n[简体中文](README.zh_CN.md) | English\n\nA Claude Code plugin for DingTalk notifications with remote interaction support. Get notified when Claude Code needs your attention and reply remotely via web interface.\n\n## Features\n\n- **DingTalk Notifications**: Get notified when Claude Code asks questions or completes tasks\n- **Remote Interaction**: Reply to Claude Code questions from your phone via web interface\n- **Secure**: Uses DingTalk's signature verification\n- **Auto-injection**: Automatically injects your replies into Claude Code via tmux\n- **Plugin Architecture**: Easy installation as a Claude Code plugin\n\n## Architecture\n\n```\n+------------------+     +-------------------+     +------------------+\n|   Claude Code    |---->|   Hook Scripts    |---->|    DingTalk      |\n|   (in tmux)      |     |                   |     |    Robot         |\n+------------------+     +-------------------+     +------------------+\n        ^                        |\n        |                        v\n        |               +-------------------+     +------------------+\n        |               |  Poll Script      |<----|  Worker API      |\n        |               |  (background)     |     |  (optional)      |\n        |               +-------------------+     +------------------+\n        |                        |                        ^\n        +------------------------+                        |\n              (tmux inject)                     +------------------+\n                                                |   Web Browser    |\n                                                |   (user reply)   |\n                                                +------------------+\n```\n\n## Prerequisites\n\n- Claude Code CLI\n- tmux\n- jq\n- curl\n- DingTalk Robot with signature verification enabled\n\n## Installation\n\n### Option 1: Plugin Mode (Recommended)\n\n```bash\ngit clone https://github.com/wuliang142857/claude-task-notify.git\ncd claude-task-notify\n./install.sh\n# Select option 1 for plugin mode\n```\n\nThis installs the plugin to `~/.claude/plugins/local/notify/`.\n\n### Option 2: Legacy Mode\n\n```bash\n./install.sh\n# Select option 2 for legacy mode\n```\n\nThis copies scripts to `~/.claude/scripts/`.\n\n## Configuration\n\n### 1. Configure DingTalk Credentials\n\nAdd to `~/.claude/settings.json`:\n\n```json\n{\n  \"env\": {\n    \"DINGTALK_WEBHOOK_URL\": \"https://oapi.dingtalk.com/robot/send?access_token=YOUR_TOKEN\",\n    \"DINGTALK_SECRET\": \"SECxxxxxxxx\"\n  }\n}\n```\n\nOr use the interactive setup command:\n\n```\n/notify:setup\n```\n\n### 2. Configure Hooks\n\nFor plugin mode, add to `~/.claude/settings.json`:\n\n```json\n{\n  \"hooks\": {\n    \"UserPromptSubmit\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"~/.claude/plugins/local/notify/scripts/kill-poll-processes.sh\",\n            \"timeout\": 5\n          }\n        ]\n      }\n    ],\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"AskUserQuestion\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"~/.claude/plugins/local/notify/scripts/handle-ask-user.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ],\n    \"Stop\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"~/.claude/plugins/local/notify/scripts/handle-stop.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### 3. Test Configuration\n\n```\n/notify:test\n```\n\n## Plugin Commands\n\n| Command | Description |\n|---------|-------------|\n| `/notify:status` | Check notification service status |\n| `/notify:test` | Send a test notification to DingTalk |\n| `/notify:setup` | Interactive setup guide |\n\n## Optional: Remote Interaction\n\nFor full remote interaction support (reply via web interface), deploy the Worker API.\n\n### Deploy Worker\n\nSee [worker/README.md](worker/README.md) for deployment instructions.\n\n### Configure Worker URL\n\nAdd to `~/.claude/settings.json`:\n\n```json\n{\n  \"env\": {\n    \"CLAUDE_WORKER_URL\": \"https://your-worker-url.workers.dev\"\n  }\n}\n```\n\nDefault: `https://claude-interactive-message.wuliang142857.me`\n\n## How It Works\n\n### AskUserQuestion Hook\n\nWhen Claude Code uses the `AskUserQuestion` tool:\n\n1. `handle-ask-user.sh` is triggered\n2. Sends notification to DingTalk with question details\n3. If Worker is configured, creates a session for remote reply\n4. Starts background polling process\n5. When user replies via web, poll script injects the answer into tmux\n\n### Stop Hook\n\nWhen Claude Code stops (task complete or needs input):\n\n1. `handle-stop.sh` is triggered\n2. Extracts Claude's last output from transcript\n3. Sends notification to DingTalk\n4. If Worker is configured, allows user to send next instruction remotely\n\n### UserPromptSubmit Hook\n\nWhen user types directly in Claude Code:\n\n1. `kill-poll-processes.sh` is triggered\n2. Kills any running poll processes (no longer needed)\n\n## Scripts\n\n| Script | Purpose |\n|--------|---------|\n| `notify-dingtalk.sh` | Core notification script with DingTalk signature |\n| `handle-ask-user.sh` | AskUserQuestion hook handler |\n| `handle-stop.sh` | Stop hook handler |\n| `poll-reply.sh` | Background polling for remote replies |\n| `kill-poll-processes.sh` | Clean up poll processes |\n\n## Environment Variables\n\n| Variable | Required | Description |\n|----------|----------|-------------|\n| `DINGTALK_WEBHOOK_URL` | Yes | DingTalk robot webhook URL |\n| `DINGTALK_SECRET` | Yes | DingTalk robot signature secret |\n| `CLAUDE_WORKER_URL` | No | Worker API URL for remote interaction |\n\n## Troubleshooting\n\n### Notifications not received\n\n1. Check DingTalk credentials in settings.json\n2. Verify the robot has correct IP whitelist or use signature mode\n3. Run `/notify:test` to verify configuration\n\n### Remote reply not working\n\n1. Verify Worker URL is accessible\n2. Check if running in tmux session\n3. Check poll logs: `cat /tmp/claude-poll-*.log`\n\n### Poll process not stopping\n\nCheck status: `/notify:status`\n\nOr manually kill: `pkill -f poll-reply.sh`\n\n## Directory Structure\n\n```\nclaude-task-notify/\n├── .claude-plugin/\n│   ├── plugin.json         # Plugin metadata\n│   └── marketplace.json    # Marketplace description\n├── plugins/\n│   └── notify/\n│       ├── .claude-plugin/\n│       │   └── plugin.json # Notify plugin metadata\n│       ├── commands/\n│       │   ├── status.md   # /notify:status command\n│       │   ├── test.md     # /notify:test command\n│       │   └── setup.md    # /notify:setup command\n│       └── scripts/\n│           ├── notify-dingtalk.sh\n│           ├── handle-ask-user.sh\n│           ├── handle-stop.sh\n│           ├── poll-reply.sh\n│           └── kill-poll-processes.sh\n├── worker/                 # Cloudflare Worker for remote interaction\n├── install.sh\n├── README.md\n└── README.zh_CN.md\n```\n\n## License\n\nMIT License\n\n## Contributing\n\nPull requests are welcome. For major changes, please open an issue first.\n"
      },
      "plugins": [
        {
          "name": "notify",
          "description": "DingTalk notifications for Claude Code with remote interaction support",
          "version": "1.0.0",
          "source": "./plugins/notify",
          "category": "notification",
          "categories": [
            "notification"
          ],
          "install_commands": [
            "/plugin marketplace add wuliang142857/claude-task-notify",
            "/plugin install notify@wuliang142857"
          ]
        }
      ]
    }
  ]
}