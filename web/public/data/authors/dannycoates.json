{
  "author": {
    "id": "dannycoates",
    "display_name": "Danny Coates",
    "avatar_url": "https://avatars.githubusercontent.com/u/87619?u=37ed2adc69ff60a74ba139da6195d6a3f3d2feca&v=4"
  },
  "marketplaces": [
    {
      "name": "cc-allow-dev",
      "version": null,
      "description": "Development marketplace for cc-allow bash permission control",
      "repo_full_name": "dannycoates/cc-allow",
      "repo_url": "https://github.com/dannycoates/cc-allow",
      "repo_description": null,
      "signals": {
        "stars": 1,
        "forks": 0,
        "pushed_at": "2026-01-31T17:34:56Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"cc-allow-dev\",\n  \"description\": \"Development marketplace for cc-allow bash permission control\",\n  \"owner\": {\n    \"name\": \"Danny Coates\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"cc-allow\",\n      \"description\": \"Bash command permission control for Claude Code\",\n      \"version\": \"1.3.2\",\n      \"source\": \"./\",\n      \"author\": {\n        \"name\": \"Danny Coates\"\n      }\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"cc-allow\",\n  \"description\": \"Bash command permission control for Claude Code\",\n  \"version\": \"1.3.2\",\n  \"author\": {\n    \"name\": \"Danny Coates\"\n  },\n  \"repository\": \"https://github.com/dannycoates/cc-allow\",\n  \"license\": \"MIT\"\n}\n",
        "README.md": "# cc-allow\n\nBash command permission control for Claude Code. Parses bash commands into an AST and evaluates them against configurable rules to allow, deny, or defer to Claude Code's permission system.\n\n## Features\n\n- **AST-based parsing** - Uses `mvdan.cc/sh/v3/syntax` for accurate bash parsing\n- **Tool-centric configuration** - TOML config organized by tool type (`[bash]`, `[read]`, `[write]`, `[edit]`)\n- **Specificity-based matching** - More specific rules win, regardless of order\n- **Layered configs** - Global defaults with project-level overrides\n- **Pipe security** - Block dangerous patterns like `curl | bash`\n- **Redirect control** - Prevent writes to sensitive paths\n- **File rule integration** - Bash commands respect file access rules (e.g., `cat /etc/passwd` denied if `/etc/**` is in Read deny list)\n\n## Disclaimer\n\n**Bash is inherently dangerous.** This tool isn't a substitute for your human judgement. Whatever you let your LLM run is your responsibility.\n\n## Installation\n\n### As a Claude Code Plugin\n\n1. Add the marketplace:\n   ```\n   /plugin marketplace add dannycoates/cc-allow\n   ```\n\n2. Install the plugin:\n   ```\n   /plugin install cc-allow@dannycoates-cc-allow\n   ```\n\nThe plugin automatically downloads binaries on first session start.\n\n### Manual Installation\n\nDownload from [releases](https://github.com/dannycoates/cc-allow/releases) or build from source:\n\n```bash\ngo install github.com/dannycoates/cc-allow/cmd/cc-allow@latest\n```\n\n## Usage\n\n```bash\n# Evaluate a bash command (default)\necho 'rm -rf /' | cc-allow\n# Exit code: 2 (deny)\n\n# Evaluate file tool permissions\necho '/etc/passwd' | cc-allow --read\necho '/project/src/main.go' | cc-allow --write\necho '/home/user/.bashrc' | cc-allow --edit\n\n# With explicit config\necho 'ls -la' | cc-allow --config ./my-rules.toml\n\n# Hook mode for Claude Code (reads JSON from stdin)\ncc-allow --hook\n\n# Validate and inspect config\ncc-allow --fmt\n```\n\n### Exit Codes\n\n| Code | Action | Meaning |\n|------|--------|---------|\n| 0 | allow | Command explicitly allowed |\n| 1 | ask | Defer to Claude Code's permission system |\n| 2 | deny | Command explicitly denied |\n| 3 | error | Configuration or parse error |\n\n## Configuration\n\n### Config Locations\n\nConfigs are loaded from multiple locations (loosest to strictest):\n\n1. `~/.config/cc-allow.toml` - Global defaults\n2. `<project>/.config/cc-allow.toml` - Project rules (in source control)\n3. `<project>/.config/cc-allow.local.toml` - Local overrides (gitignored)\n4. `--config <path>` - Explicit config\n\nRules are merged across configs: **deny always wins**, allow beats ask, ask means \"no opinion.\"\n\n### Quick Start\n\n```toml\nversion = \"2.0\"\n\n[bash]\ndefault = \"ask\"\ndynamic_commands = \"deny\"  # block $VAR or $(cmd) as command names\n\n[bash.allow]\ncommands = [\"ls\", \"cat\", \"grep\", \"git\", \"go\", \"npm\"]\n\n[bash.deny]\ncommands = [\"sudo\", \"rm\", \"dd\"]\nmessage = \"Dangerous command blocked\"\n```\n\n### Rules with Specificity\n\nMore specific rules win regardless of order:\n\n```toml\n# Allow rm in general (specificity: 100)\n[[bash.allow.rm]]\n\n# But deny rm -r (specificity: 105)\n[[bash.deny.rm]]\nmessage = \"Recursive rm not allowed\"\nargs.any = [\"flags:r\", \"--recursive\"]\n```\n\n### Pipe Security\n\nBlock dangerous pipe patterns:\n\n```toml\n# Deny bash receiving piped input from download commands\n[[bash.deny.bash]]\nmessage = \"Cannot pipe to bash from download commands\"\npipe.from = [\"curl\", \"wget\"]\n```\n\n### Redirect Control\n\nPrevent writes to sensitive paths:\n\n```toml\n[[bash.redirects.deny]]\nmessage = \"Cannot write to system directories\"\npaths = [\"path:/etc/**\", \"path:/usr/**\"]\n```\n\n### File Tool Permissions\n\nControl Claude Code's Read, Write, and Edit file tools:\n\n```toml\n[read]\ndefault = \"ask\"\n\n[read.allow]\npaths = [\"path:$PROJECT_ROOT/**\"]\n\n[read.deny]\npaths = [\"path:$HOME/.ssh/**\", \"path:**/*.key\"]\n\n[write.deny]\npaths = [\"path:/etc/**\", \"path:$HOME/.bashrc\"]\n```\n\nWith this config:\n- `cat ~/.ssh/id_rsa` → denied (Read command accessing denied path)\n- `echo \"x\" > ~/.bashrc` → denied (redirect to denied Write path)\n\nFor commands like `cp` and `mv` where arguments have different access types, use positional file rules:\n\n```toml\n[[bash.allow.cp]]\nargs.position = { \"0\" = \"ref:read.allow.paths\", \"1\" = \"ref:write.allow.paths\" }\n```\n\nThis checks the source against Read rules and destination against Write rules.\n\nSee [docs/config.md](docs/config.md) for complete configuration reference.\n\n## CLI Reference\n\n```bash\n# Bash mode (default) - evaluate a bash command\necho 'some command' | cc-allow\necho 'some command' | cc-allow --bash\n\n# File modes - evaluate file tool permissions (stdin is file path)\necho '/path/to/file' | cc-allow --read\necho '/path/to/file' | cc-allow --write\necho '/path/to/file' | cc-allow --edit\n\n# Hook mode - for Claude Code PreToolUse hooks (JSON input/output)\ncc-allow --hook < tool_input.json\n\n# Fmt mode - validate config and show rules by specificity\ncc-allow --fmt\ncc-allow --fmt --config ./my-rules.toml\n\n# Debug mode\ncc-allow --debug\n```\n\n## How It Works\n\n1. Bash input is parsed into an AST\n2. Commands, arguments, pipes, and redirects are extracted from the AST\n3. Rules from all config layers are evaluated\n4. The most specific matching rule wins within each config\n5. If file rules are configured, command arguments are checked against them\n6. Results are merged across configs (deny > allow > ask)\n7. Exit code indicates the final decision\n\n## Example Global Config\n\nSee [cc-allow.global-example.toml](cc-allow.global-example.toml) for a comprehensive example covering common coreutils and development tools.\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "cc-allow",
          "description": "Bash command permission control for Claude Code",
          "version": "1.3.2",
          "source": "./",
          "author": {
            "name": "Danny Coates"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add dannycoates/cc-allow",
            "/plugin install cc-allow@cc-allow-dev"
          ]
        }
      ]
    }
  ]
}