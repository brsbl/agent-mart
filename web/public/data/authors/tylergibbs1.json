{
  "author": {
    "id": "tylergibbs1",
    "display_name": "Tyler Gibbs",
    "avatar_url": "https://avatars.githubusercontent.com/u/104282235?u=aebfc3d291196d747ca0f9a7b0a8a6172b873425&v=4"
  },
  "marketplaces": [
    {
      "name": "ospack",
      "version": null,
      "description": "Semantic context packer - import resolution + semantic search",
      "repo_full_name": "tylergibbs1/ospack",
      "repo_url": "https://github.com/tylergibbs1/ospack",
      "repo_description": null,
      "signals": {
        "stars": 1,
        "forks": 0,
        "pushed_at": "2025-11-26T20:40:56Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"ospack\",\n  \"owner\": {\n    \"name\": \"ospack\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"ospack\",\n      \"source\": \"./plugins/ospack\",\n      \"description\": \"Semantic context packer - import resolution + semantic search\"\n    }\n  ]\n}\n",
        "README.md": "<div align=\"center\">\n  <h1>ospack</h1>\n  <p><em>Semantic context packer for AI coding assistants.</em></p>\n  <a href=\"https://opensource.org/licenses/Apache-2.0\"><img src=\"https://img.shields.io/badge/License-Apache%202.0-blue.svg\" alt=\"License: Apache 2.0\" /></a>\n</div>\n\n<br>\n\nCombines import resolution with BM25+ search to build optimal code context.\n\n## Install\n\n```bash\npip install ospack\n```\n\n## Usage\n\n```bash\n# Pack context from a file + its imports\nospack pack --focus src/auth.py\n\n# Search for code by keywords\nospack search \"user authentication\"\n\n# Combine both\nospack pack --focus src/api.py --query \"error handling\"\n```\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `ospack pack` | Pack context from focus file and/or query |\n| `ospack search` | Quick BM25+ search |\n| `ospack grep` | Exact pattern search (preserves punctuation) |\n| `ospack map` | Generate repo structure map with signatures |\n| `ospack index` | Build/rebuild the search index |\n| `ospack info` | Show index status |\n\n## Options\n\n### pack\n```\n-f, --focus FILE      Entry point for import resolution\n-q, --query TEXT      BM25+ search query\n-m, --max-files N     Max files to include (default: 10)\n-d, --import-depth N  Import traversal depth (default: 2)\n-o, --format FORMAT   Output: xml, compact, or chunks\n-S, --skeleton        Collapse non-focus function bodies to save tokens\n-F, --focus-only      Skip search, only use import resolution (fast)\n```\n\n### map\n```\n-m, --max-sigs N      Max signatures per file (default: unlimited)\n--no-signatures       Show only file tree, no code signatures\n```\n\n### grep\n```\n-E, --regex           Treat pattern as regular expression\n-l, --limit N         Max results to return (default: 20)\n```\n\n## Agent Integration\n\n### Claude Code Plugin\n\n```bash\n# Add the ospack marketplace\n/plugin marketplace add tylerbryy/ospack\n\n# Install the plugin\n/plugin install ospack@ospack\n```\n\nThe plugin provides:\n- `/pack` - Pack context command\n- `/search` - BM25+ search command\n- Auto-invoked skill for codebase exploration\n\n### MCP Server\n\n```bash\n# Start MCP server for AI agents\nospack mcp\n```\n\nOr add to your MCP config:\n\n```json\n{\n  \"mcpServers\": {\n    \"ospack\": {\n      \"command\": \"ospack\",\n      \"args\": [\"mcp\"]\n    }\n  }\n}\n```\n\n**Available MCP Tools:**\n\n| Tool | Description |\n|------|-------------|\n| `ospack_pack` | Pack context with imports + BM25+ search |\n| `ospack_search` | BM25+ code search |\n| `ospack_grep` | Exact/regex pattern search (preserves punctuation) |\n| `ospack_map` | Generate repo structure map |\n| `ospack_index` | Build/rebuild search index |\n| `ospack_probe` | Detect missing symbols and suggest follow-up queries |\n| `ospack_impact` | Find files affected by changes (reverse dependency analysis) |\n| `ospack_audit` | Dry-run pack to check token costs before loading content |\n\n## Advanced Usage\n\n### Token-Efficient Packing with Skeletonization\n\n```bash\n# Collapse non-focus function bodies to save tokens\nospack pack --focus src/api.py --skeleton --max-files 5\n\n# Fast mode: only follow imports, skip search entirely\nospack pack --focus src/api.py --focus-only --skeleton\n```\n\nSkeletonization collapses function bodies to signatures in non-focus files, saving tokens while preserving class/function structure.\n\n### Repo Mapping\n\n```bash\n# Get a bird's-eye view of the codebase\nospack map --max-sigs 10\n\n# Output shows hierarchy with methods under classes:\n# ├── src/\n# │   ├── auth.py\n# │   │     class AuthService:\n# │   │         def login(self, user, password):\n# │   │         def logout(self):\n# │   │     ... (5 more)\n```\n\n### Iterative Context Building (MCP)\n\nUse `ospack_probe` to iteratively build complete context:\n\n1. `ospack_pack(focus=\"auth.py\")` → get initial context\n2. `ospack_probe(content=...)` → find missing `UserModel`, `TokenService`\n3. `ospack_pack(query=\"UserModel definition\")` → fetch missing pieces\n4. Repeat until context is complete\n\n## How It Works\n\n1. **Hard links**: Follow imports from focus file\n2. **Soft links**: BM25+ keyword search for related code\n3. **Skeletonization**: AST-based body collapsing for token efficiency\n\n## Tech\n\n- **Chunking**: tree-sitter AST parsing (15+ languages)\n- **Search**: BM25+ with stemming (bm25s + PyStemmer)\n- **Tokenization**: Code-aware (camelCase, snake_case splitting)\n\n## ospack vs osgrep\n\nospack is inspired by [osgrep](https://github.com/Ryandonofrio3/osgrep). Both use tree-sitter for parsing, but serve different purposes:\n\n| | **ospack** | **osgrep** |\n|---|---|---|\n| **Purpose** | Context packing for AI prompts | Semantic grep replacement |\n| **Key feature** | Import resolution + BM25+ search | Live server with file watching |\n| **Output** | Packed context (XML/markdown) | Search results |\n| **Language** | Python | TypeScript |\n\n**When to use osgrep**: \"Find code about X\" — fast semantic search tool.\n\n**When to use ospack**: \"Give me everything I need to understand/modify X\" — builds complete context by following imports then augmenting with keyword matches.\n\n## License\n\nApache-2.0\n"
      },
      "plugins": [
        {
          "name": "ospack",
          "source": "./plugins/ospack",
          "description": "Semantic context packer - import resolution + semantic search",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add tylergibbs1/ospack",
            "/plugin install ospack@ospack"
          ]
        }
      ]
    }
  ]
}